# StackOverflow 问答 12136000-12136999

# php - 使用php计算csv文件中包含单词“118-bonsplans.com”的行

> ID：12136000
> 
> 赞同：0
> 
> 时间：2012-08-27T03:43:51.653
> 
> 标签：php, cakephp, cakephp-1.3

我有包含许多行的 csv 文件“acct-2012-08-24-0001.csv”。我想计算所有行中包含“118-bonsplans.com”一词的行。但我不知道如何计算它，我可以像下面的 php 代码一样计算 csv 文件中的所有行：

```
$word =  "118-bonsplans.com";
$linecount = count(file('acct-2012-08-24-0001.csv'));
echo $linecount; 
```

我不知道如何继续。请任何人帮助我，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T03:51:47.740

怎么样：

```
count(preg_grep("/118\-bonsplans\.com/", file("acct-2012-08-24-0001.csv"))); 
```

preg_grep 的第一个参数是正则表达式模式。第二个是要搜索的数组。它返回匹配的搜索数组中的项目数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:56:14.027

您可以尝试使用以下代码：

```
$handle = fopen('acct-2012-08-24-0001.csv', 'r');
$counter = 0;
if ($handle) {
while (($buffer = fgets($handle, 4096)) !== false) {
    if (stristr($buffer, '118-bonsplans.com')) $counter += 1;
}
fclose($handle);
}
echo $counter; 
```

# php - 注册表单不会触发验证约束

> ID：12136001
> 
> 赞同：5
> 
> 时间：2012-08-27T03:44:06.727
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1, symfony-forms

我有一个 Doctrine 用户实体，我正在尝试为注册表单添加表单验证器，但在任何情况下它们都不会为注册表单触发。

我的用户实体：

```
namespace JMSHockey\AppBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\AdvancedUserInterface;
use Symfony\Component\Validator\Constraints as Assert;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
/**
 * My\AppBundle\Entity\User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity(repositoryClass="My\AppBundle\Entity\UserRepository")
 * @UniqueEntity(fields={"email"}, message="Sorry, this email address is already in use.", groups={"registration"})
 * @UniqueEntity(fields={"username"}, message="Sorry, this username is already taken.", groups={"registration"})
 */
class User implements AdvancedUserInterface,\Serializable
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var string $email
     *
     * @ORM\Column(name="email", type="string", length=75, nullable=false)
     * @Assert\Email()
     * @Assert\NotBlank()
     */
    private $email;

    /**
     * @var string $username
     *
     * @ORM\Column(name="username", type="string", length=75, nullable=false)
     * @Assert\NotBlank()
     */
    private $username;

    ...
    } 
```

这是我的用户类型表单：

```
namespace My\AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class UserType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('email','email');
        $builder->add('username','text');
        ...
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'My\AppBundle\Entity\User',
            'validation_groups' => array('registration'),
        );
    }

    public function getName()
    {
        return 'user';
    }
} 
```

最后是注册表：

```
namespace My\AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class RegistrationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('user', new UserType());
    }

    public function getName()
    {
        return 'registration';
    }
} 
```

似乎我必须在这里遗漏一些明显的东西，但是在 Symfony 手册和我在网上找到的资源之间，我无法确定它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:28:48.350

我有同样的问题。

我通过在您的类的方法中添加`cascade_validation`true 来解决它，并使用OptionsResolver Symfony 组件中的类：`setDefaultOptions``RegistrationType``OptionsResolverInterface`

```
namespace My\AppBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface

class RegistrationType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('user', new UserType());
    }

    public function getName()
    {
        return 'registration';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
         $resolver->setDefaults(array(
             'cascade_validation' => true
         ));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:02:04.513

你在哪里找到这个组选项？

您可以将其留空，以便为该实体触发。如果你想指定一个实体，看起来你应该使用 em 选项。

[http://symfony.com/doc/master/reference/constraints/UniqueEntity.html#em](http://symfony.com/doc/master/reference/constraints/UniqueEntity.html#em)

# objective-c - 在带有捆绑文件的 safari 3,4 中添加自己的按钮

> ID：12136002
> 
> 赞同：1
> 
> 时间：2012-08-27T03:44:15.433
> 
> 标签：objective-c, macos, safari-extension

我尝试通过 Mac 中的文件包在 Safari 版本 3,4 的工具栏中创建和添加按钮（使用 XCode）

*   当我重新启动浏览器并再次打开它时。这是工作，但它改变了默认工具栏。
*   但是，如果我只是关闭 safari（不退出）或创建新窗口 safari 或创建新选项卡，我的按钮就会消失。

我尝试使用扩展，但它只适用于 safari 5 或更高版本。我使用文件 .nib 并使用 NSToolbar 的 3 个方法委托添加按钮：

*   (NSToolbarItem *)toolbar:(NSToolbar *)toolbar itemForItemIdentifier:(NSString *)itemIdentifier willBeInsertedIntoToolbar:(BOOL)flag

*   (NSArray *)toolbarAllowedItemIdentifiers:(NSToolbar* )toolbar

*   (NSArray *)toolbarDefaultItemIdentifiers:(NSToolbar* )toolbar

请帮助我...谢谢

# sql - SQL Server Management Studio 2008 连接到 SQL 2012 localdb

> ID：12136005
> 
> 赞同：1
> 
> 时间：2012-08-27T03:44:58.690
> 
> 标签：sql, sql-server-2008-r2, localdb

是否可以使用 SQL Server Management Studio 2008 连接到 SQL 2012 localdb 的实例？我已经安装了包含 ODBC 驱动程序的 2012 Native Client，但我似乎仍然无法使用 SSMS 2008 连接到我的 localdb 实例。我使用sqlcmd连接localdb没有问题，所以不是服务器问题。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T11:12:03.180

您可以通过这种方式通过命名管道来做到这一点：

1 - 通过运行以下命令获取 (localdb) 实例的地址："C:\Program Files\Microsoft SQL Server\110\Tools\Binn\SqlLocalDB.exe" info [InstanceName]（如果它是您的默认实例）重新感兴趣，将 v11.0 指定为 [InstanceName] 您可以在 CMD 中使用以下命令将其写入文本文件：

**“C:\Program Files\Microsoft SQL Server\110\Tools\Binn\SqlLocalDB.exe”信息 v11.0 > C:\db_details.txt**

2 - 复制“实例管道名称”值，例如**np:.\pipe\LOCALDB#1E0FF40B\tsql\query**

3 - 将“实例管道名称”值粘贴为服务器名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:48:33.273

在具有 SSMS 2008R2 的系统上安装 CU6，因为它包含一些与 SQL Server 2012 的兼容性问题相关的修复。

如果您可以在 SSMS 2008R2 中看到 2012 服务器，那么您已经连接了它。

打开一个新的查询窗口并执行以下代码：

```
 select @@version 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T10:26:16.617

试试这个 ：

服务器名称中的 ip 地址\sqlserver2012。

然后设置身份验证方法 = SQL Server 身份验证并提供登录名和密码字段。

# c# - 错误“对象引用未设置为对象的实例。”

> ID：12136013
> 
> 赞同：0
> 
> 时间：2012-08-27T03:46:42.443
> 
> 标签：c#

有谁知道我的代码在哪里出错了？这段代码工作得很好，但是我将文件传输到另一台计算机，当我编译文件时弹出这个错误。

```
 private void ShowGeneratedSchedule(string sLocationName, string sAllocationDate)
    {
        //lstAllocation = db.allocations.Where(a => a.AllocationDate == sAllocationDate &&
        //    a.LocationName == sLocationName).ToList();

        scheduleDGV.EditMode = DataGridViewEditMode.EditProgrammatically;
        for (int i = 0; i < lstAllocation.Count; i++)
        {
            for (int j = 0; j < scheduleDGV.Rows.Count - 1; j++)
            {
                for (int k = 0; k < scheduleDGV.Columns.Count; k++)
                {
                    if (scheduleDGV[0, j].Value.Equals(lstAllocation[i].LocationName) &&
                        scheduleDGV[1, j].Value.Equals(lstAllocation[i].StationName) &&
                        scheduleDGV.Columns[k].HeaderText.Equals(lstAllocation[i].AllocationTime.ToString()))
                    {
                        if (lstAllocation[i].EmployeeName != null)
                        {
                            scheduleDGV[k, j].Value = lstAllocation[i].EmployeeName;
                        }
                    }
                }
            }
        }

        //scheduleDGV.DataSource = lstEmployeeSlot;
    } 
```

到达此行时显示错误，

```
for (int i = 0; i < lstAllocation.Count; i++) 
```

有谁知道这里有什么问题？是否有可能将其转移到另一台计算机上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:49:14.960

这很可能意味着 lstAllocation 为空并且从未分配过值。为什么这条线被注释掉了？

```
 //lstAllocation = db.allocations.Where(a => a.AllocationDate == sAllocationDate &&
        //    a.LocationName == sLocationName).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T03:49:51.240

`lstAllocation`没有初始化？方法第一行的注释是什么？为什么注释掉了？没有它就`lstAllocation`没有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T03:49:48.993

看起来你已经注释掉了你分配`lstAllocation`给某些东西的行。这很可能是您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:10:07.370

`lstAllocation`引用变量在程序/代码中的某处被初始化（或`null`尚未构造对象或*缺少对象）。*

*检查引用变量的值*是一个好习惯——它是否具有`null`对象`reference`。

```
private void ShowGeneratedSchedule(string sLocationName, string sAllocationDate)
    {
        if(lstAllocation==null){
           Console.WriteLine("List is not initialized. Can't proceed");
           return;
        }
        //rest code
    } 
```

# android - Android：未选中的checkedtextview项目在ListView中被选中

> ID：12136014
> 
> 赞同：0
> 
> 时间：2012-08-27T03:46:42.703
> 
> 标签：android, listview, checkedtextview

我创建了一个`ListView`如下`Arraylist`：

```
nAdapter=new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_list_item_checked,nArrayList);

mListView.setAdapter(nAdapter); 
```

然后是 setOnItemClickListener()：

```
mListView.setOnItemClickListener(new OnItemClickListener(){

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
       if(((CheckedTextView) arg1).isChecked()){
            ((CheckedTextView)arg1).setChecked(false);
       }else{
        ((CheckedTextView)arg1).setChecked(true);
       }
}}); 
```

问题是如果我选择一个项目，每 7 或 8 个项目（第一个项目不在当前视图中，但在向上滚动时查看）也会被选中。这发生在列表之外。

有人可以解释这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:09:10.187

要解决这个问题，只需使用：

```
mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

并删除您的 OnItemClickListener。

* * *

Android 使用 View 回收。想象一个有 1,000 行的 ListView：当用户一次只能看到一小部分时，为每一行拥有一个唯一的 View 是很浪费的。因此，适配器明智地只创建足够多的可见的唯一视图（在您的情况下大约 7 或 8 个）并回收这些唯一视图以显示所有 1,000 行；创建更快的应用程序。

您在行中看到的错误复选标记发生在检查“上一个”行但在该行被回收并填充“新”数据后未清除时。

希望这是有道理的，否则请观看 Android 的 Romain Guy[在这里讨论这种现象](http://www.google.com/events/io/2009/sessions/TurboChargeUiAndroidFast.html)。

# android - 样式化 ShareActionProvider

> ID：12136016
> 
> 赞同：0
> 
> 时间：2012-08-27T03:46:57.647
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock 并尝试设置 ShareActionProvider 下拉菜单的样式，我当前的主题是 Light.DarkActionbar。我似乎找不到合适的风格来改变。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:34:10.497

我不知道为什么我以前的帖子被删除了。从我所看到的情况来看，这仍然没有得到回答，我提供了关于如何设置 ActionBar 项目的背景的一般问题的答案，这可能是他所需要的，或者其他人正在寻找的所有内容。

# street-address - 如何根据 geocodeAddressString 的搜索结果设置焦点中心

> ID：12136022
> 
> 赞同：0
> 
> 时间：2012-08-27T03:48:44.647
> 
> 标签：street-address

我只有几个月的 Objective-C 经验。

我有一个代码来搜索客户地址列表，然后显示这些地址的注释。由于客户覆盖许多地区，我想让地图视图的中心和跨度适应结果。

因此，我打算记录所有搜索到的地标，并计算出平均经纬度。下面是我的代码

```
self.mapView.mapType = MKMapTypeStandard; 
for (Customer *customer in customers) {
    CLGeocoder *geoCoder = [[CLGeocoder alloc] init];
    NSString *customerAddress = [Customer getWholeAddressOfCustomer:customer];
    NSString *color = @"";
    if([customer.status isEqualToString:@"1"])
    {
        color = @"Green";
    }else if ([customer.status isEqualToString:@"2"]) {
        color = @"Yellow";
    }else if ([customer.status isEqualToString:@"3"])
    {
        color = @"Red";
    }else {
        color = customer.status;
    }
    [geoCoder geocodeAddressString:customerAddress completionHandler:^(NSArray *placemarks, NSError *error) 
     {
         [NSThread sleepForTimeInterval:0.25];
         if (placemarks.count == 0)
         {

             NSLog(@"No place for customer %@ was found",customerAddress);
         }

         CLPlacemark *placemark = [placemarks objectAtIndex:0];

         if(placemark.location.coordinate.latitude != 0.000000 && placemark.location.coordinate.longitude != 0.000000)
         {
             CustomerAnnotation *annotation = [[CustomerAnnotation alloc]initWithCoordinate:placemark.location.coordinate andName:customer.name andNumber:customer.customerNo andColor:color];  

             [self.mapAnnotations addObject:annotation];

         }

     }];

}
CLLocationDegrees totalLatitude=0;
CLLocationDegrees totalLongitude = 0;
for (int i=0; i < [self.mapAnnotations count]; i++) {
    totalLatitude += [(CustomerAnnotation *)[self.mapAnnotations objectAtIndex:i] coordinate].latitude;
    totalLongitude += [(CustomerAnnotation *)[self.mapAnnotations objectAtIndex:i] coordinate].longitude;
    [self.mapView addAnnotation:[self.mapAnnotations objectAtIndex:i]];

}

MKCoordinateRegion focusRegion;
focusRegion.center.latitude = totalLatitude/[self.mapAnnotations count];
focusRegion.center.longitude = totalLongitude/[self.mapAnnotations count];
focusRegion.span.latitudeDelta = 20; //will modify this parameter later to self adapt the map
focusRegion.span.longitudeDelta = 20;
[self.mapView setRegion:focusRegion animated:YES]; 
```

但问题是像 [这个问题这样的时间问题](https://stackoverflow.com/questions/8697177/objective-c-blocks-variables-and-clgeocoder-and-or-clplacemark)

setRegion 在获得这些地点标记之前执行。在该链接提出的解决方案中，我应该在完成块中调用一个方法。但是此解决方案不适合多地址问题，因为我需要在 setRegion 之前将所有地点标记添加到我的方法中。

从 geocodeAddressString 获取所有结果后，是否有办法执行方法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T08:57:19.533

问题解决了。

在块之外，我使用了一个计数器来记录添加的注释。

```
__block int customerCount = 0; 
```

当此计数等于整数时，自动聚焦所有客户的中心区域。

```
if (customerCount == [customers count]) {
   //Set the focus
} 
```

# facebook - Facebook Like 按钮：如何为图像文件的 url 点赞？

> ID：12136023
> 
> 赞同：0
> 
> 时间：2012-08-27T03:48:52.217
> 
> 标签：facebook, api, url

我想拥有它，以便 Facebook Like Button API 能够“点赞”和托管在服务器上的图像。例如，如果它可以“喜欢”类似的东西：`mysite.com/photo1.jpg`

目前，这不适用于 API：

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

```
<div class="fb-like" data-href="http://mysite.com/photo1.jpg" data-send="true" data-width="450" data-show-faces="true"></div> 
```

有谁知道解决这个问题？还是我需要将每个图像放在 HTML 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:04:18.533

从下面的链接中获取喜欢按钮的 iframe，并在其中重写 href="http://mysite.com/photo1.jpg"

```
http://stackoverflow.com/questions/12050786/how-to-add-a-facebook-like-button-to-blogger-blog-post/12055011#12055011 
```

试试这个它会工作

# asp.net - IIS 和/或 ASP.NET 如何知道请求来自哪个 IP？

> ID：12136030
> 
> 赞同：1
> 
> 时间：2012-08-27T03:49:56.210
> 
> 标签：asp.net, iis-7.5, security

我正在使用 ASP.NET 表单身份验证来确保安全，并且间歇性地遇到配置文件重叠问题。即当我以一个用户身份登录时，它会在非常“随机”的时间完全显示为其他人。

表单身份验证是一个简单的标准实现，使用 cookie 作为后续请求的验证。所以我认为问题不存在。

在检查用户的 IIS 日志时，我发现该请求以某种方式与其他活动用户交换，因为它似乎完全来自具有不同 ip 和用户代理但经过身份验证的用户相同的不同机器。

我想知道的是 ASP.NET 或 IIS 如何确定请求来自哪个 IP？

**编辑开始：**

下面的输出是 IIS 日志的实际内容（如果站点名称是 TestApp1 则为事件）

```
date    time    cs-method   cs-uri-stem cs-uri-query    cs-username c-ip    sc-status   time-taken
27/08/12    2:32:32 GET /TestApp1/Actions/ViolationsReferralOther/0     178004  10.1.1.24   200 187
27/08/12    2:33:29 GET /TestApp1/Content/datatables/js/datatables-fnSetFilteringDelay.js       178004  10.1.1.39   304 31 
```

第一个请求来自 IP 地址**10.1.1.24**，第二个请求来自**10.1.1.39**，两者都以同一用户身份登录。

**验证码**

```
protected void Application_AuthenticateRequest(Object sender, EventArgs e)
    {
        HttpCookie authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            if (!authTicket.Expired)
            {
                string[] roles = authTicket.UserData.Split(new Char[] { ',' });

                if (roles == null || roles.Length == 0 || (roles.Length == 1 && roles[0] == ""))
                {
                    FormsAuthentication.SignOut();
                    return;
                }

                GenericPrincipal userPrincipal = new GenericPrincipal(new GenericIdentity(authTicket.Name), roles);
                HttpContext.Current.User = userPrincipal;
                //hack as per http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx
                System.Threading.Thread.CurrentPrincipal = HttpContext.Current.User;
            }
            else
            {
                HttpContext.Current.User = null;
            }

        }            
    } 
```

**编辑结束：**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T03:55:46.440

对您的问题的简短回答是“操作系统套接字层告诉 IIS”。

更长的答案是 IP 地址不足以识别单个用户，因为可能有多个用户共享同一个 IP 地址。Cookies 识别浏览会话。如果您遇到浏览会话混淆的问题，这可能是*您的*应用程序代码中的问题，而不是 IIS 或 OS 套接字层中的问题（这两者在现实世界中都经过了非常好的测试）。

**更新**：您正在使用`System.Threading.Thread.CurrentPrincipal`，这似乎很狡猾（是的，我阅读了您链接到的 Scott Hanselman 的页面）。除非您对为什么需要这样做以及其含义有*绝对清晰*的了解，否则我不会这样做。例如，如果第二个请求由与第一个请求相同的线程处理，但第二个请求没有通过相同的身份验证块怎么办？当时附加到该线程的当前主体是什么？也许它仍然与之前的请求相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T03:55:41.760

IIS 只是获取它从操作系统网络层接收到的数据包中编码的 IP 地址。在不深入研究 OSI 模型中的所有网络层业务的情况下，ASP.NET 实际上只关注底层 Web 服务器提供给它的 IP 信息，这些信息以 HTTP、FTP 等协议进行编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T03:18:14.793

**这是一个很晚的答复**。为了社区的利益，我应该早点更新它。我现在正在按照*迟到总比没有好的*原则来做这件事。根本问题是由我之前没有意识到的设计引起的。

默认情况下，所有项目都由 IIS 7 及更高版本中的 ASP.NET 管道处理，其中包括*js*和*css*等静态文件。直到 IIS 的另一个功能，对于静态文件，它在极短的时间内在内部使用一些智能缓存之前都很好。但是，就我而言，它导致错误的配置文件分配给了错误的用户。

我从 ASP.NET http 管道中排除了静态文件（通过查看文件 .ext 的天真方式），问题就消失了。

# c# - UDP 打孔。让服务器与客户端对话

> ID：12136031
> 
> 赞同：16
> 
> 时间：2012-08-27T03:50:19.480
> 
> 标签：c#, sockets, networking, udp, hole-punching

我一直在阅读很多关于如何实现 UDP 打孔的内容，但由于某种原因，我无法使其工作。

**对于那些不熟悉什么是 udp 打孔的人，这是我自己的定义：**

目标是能够在服务器的帮助下在两个客户端（客户端 A 和客户端 B）之间传输数据。所以客户端 A 连接到服务器并发送它的信息。客户 B 也是如此。服务器具有必要的信息，以便客户端 A 能够向客户端 B 发送数据，反之亦然。因此，服务器将该信息提供给两个客户端。一旦两个客户端都获得了关于彼此的信息，就可以在没有服务器帮助的情况下开始在这些客户端之间发送和接收数据。

我的目标是能够做我刚才描述的事情（udp 打孔）。**在这样做之前，我认为能够从服务器连接到客户端会很有帮助**。为此，我计划向服务器发送有关客户端的信息。一旦服务器收到该信息，就会尝试从头开始连接到客户端。一旦我能够执行，我应该拥有开始实施真正的 udp 打孔所需的一切。

以下是我的设置方式：

![在此处输入图像描述](../Images/7de6094ae0fe15cf00be874f9ab8b1e0.png)

顶部路由器将服务器和底部路由器连接到 LAN 端口。底部路由器 (NAT) 通过其 WAN 端口连接到顶部路由器。客户端计算机连接到底部路由器的 LAN 端口之一。

因此，在该连接中，客户端能够看到服务器，但服务器无法看到客户端。

所以我用伪代码做的算法是：

*   客户端连接到服务器。
*   客户端向服务器发送一些 UDP 包，以便在 NAT 上打开一些端口
*   向服务器发送有关客户端正在侦听的端口的信息。
*   一旦服务器收到该信息，就会尝试从头开始连接到客户端。

## 这是代码中的实现：

**服务器：**

```
static void Main()
{     
    /* Part 1 receive data from client */
    UdpClient listener = new UdpClient(11000);
    IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 11000);
    string received_data;
    byte[] receive_byte_array = listener.Receive(ref groupEP);       
    received_data = Encoding.ASCII.GetString(receive_byte_array, 0, receive_byte_array.Length);

    // get info
    var ip = groupEP.Address.ToString();
    var port = groupEP.Port;

    /* Part 2 atempt to connect to client from scratch */
    // now atempt to send data to client from scratch once we have the info       
    Socket sendSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    IPEndPoint endPointClient = new IPEndPoint(IPAddress.Parse(ip), port);
    sendSocket.SendTo(Encoding.ASCII.GetBytes("Hello"), endPointClient);
} 
```

**客户：**

```
static void Main(string[] args)
{
    /* Part 1 send info to server */
    Socket sending_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram,  ProtocolType.Udp);
    IPAddress send_to_address = IPAddress.Parse("192.168.0.132");
    IPEndPoint sending_end_point = new IPEndPoint(send_to_address, 11000);
    sending_socket.SendTo(Encoding.ASCII.GetBytes("Test"), sending_end_point);

    // get info
    var port = sending_socket.LocalEndPoint.ToString().Split(':')[1];

    /* Part 2 receive data from server */
    IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, int.Parse(port));
    byte[] buffer = new byte[1024];
    sending_socket.Receive(buffer);
} 
```

**由于某种原因，它工作了几次！**当客户端成功在线接收数据时起作用：`sending_socket.Receive(buffer);`

**注意事项：** 如果在第二部分的服务器上我使用实例变量`listner`而不是创建新变量`sendSocket`并通过该变量发送字节，则客户端能够接收正在发送的数据。请记住，服务器的第二部分将由第二个客户端 B 实现，这就是我再次从头开始初始化变量的原因......

* * *

## 编辑：

**这是看待同一问题的不同方式。**当我初始化一个新对象而不是使用同一个对象时，客户端不会收到响应。

我有一个 UdpClient 类型的对象。我能够将该对象的数据发送给其他对等方。如果我创建另一个具有相同属性的相同类型的对象并尝试发送数据它不起作用！我可能缺少初始化一些变量。我可以通过反射设置私有变量，所以我应该没有问题。无论如何，这里是服务器代码：

```
public static void Main()
{
    // wait for client to send data
    UdpClient listener = new UdpClient(11000);
    IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 11000);        
    byte[] receive_byte_array = listener.Receive(ref groupEP);

    // connect so that we are able to send data back
    listener.Connect(groupEP);

    byte[] dataToSend = new byte[] { 1, 2, 3, 4, 5 };

    // now let's atempt to reply back

    // this part does not work!
    UdpClient newClient = CopyUdpClient(listener, groupEP);
    newClient.Send(dataToSend, dataToSend.Length);

    // this part works!
    listener.Send(dataToSend, dataToSend.Length);
}

static UdpClient CopyUdpClient(UdpClient client, IPEndPoint groupEP)
{
    var ip = groupEP.Address.ToString();
    var port = groupEP.Port;
    var newUdpClient = new UdpClient(ip, port);
    return newUdpClient;
} 
```

客户端代码基本上将数据发送到服务器，然后等待响应：

```
 string ipOfServer = "192.168.0.132";
    int portServerIsListeningOn = 11000;

    // send data to server
    Socket sending_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    IPAddress send_to_address = IPAddress.Parse(ipOfServer);
    IPEndPoint sending_end_point = new IPEndPoint(send_to_address, portServerIsListeningOn);
    sending_socket.SendTo(Encoding.ASCII.GetBytes("Test"), sending_end_point);

    // get info
    var port = sending_socket.LocalEndPoint.ToString().Split(':')[1];

    // now wait for server to send data back
    IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, int.Parse(port));
    byte[] buffer = new byte[1024];
    sending_socket.Receive(buffer); // <----- keeps waiting in here :( 
```

**请注意，客户端位于路由器（NAT）后面，否则我不会遇到这个问题。**我想要复制 udpClient 的原因是我可以将该变量发送到另一台计算机，从而使另一台计算机能够将数据发送到客户端。

**所以我的问题是** 为什么原始对象`listener`能够发送数据但`newClient`不能？`sending_socket.Receive(buffer);`即使在服务器执行 line: 之后，客户端仍然在排队等待`newClient.Send(dataToSend, dataToSend.Length);`。当侦听器发送数据而不是newClient时，客户端成功接收数据。如果两个变量具有相同的目标 IP 和端口，为什么会这样？变量有何不同？

注意：如果服务器和客户端在同一个网络上，则复制工作并且变量`newClient`能够将数据发送到客户端。要模拟此问题，客户端必须位于 NAT（路由器）之后。这种网络的一个例子可能包括两个路由器。我们称它们为路由器 X 和路由器 Y。您还需要一个称为 S 的服务器和一个客户端 C。因此 S 可以连接到 X 的 LAN 端口之一。C 可以连接到 Y 的 LAN 端口之一。最后将 Y 的 WAN 端口连接到 X 的 LAN 端口之一。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-30T19:02:16.050

嗯，我认为您在这里混淆了几件事。一方面，它真的被称为[UDP 打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)。让我试着解释一下这应该如何工作。

NAT 路由器通常在将数据包从内部专用网络转发到外部 Internet 时进行[*端口映射。*](http://en.wikipedia.org/wiki/Port_forwarding)

假设您在 NAT 后面的机器上创建了一个 UDP 套接字，并将数据报发送到某个外部 IP/端口。当携带该数据报的 IP 数据包离开发送机器时，其 IP 报头的*源地址*字段设置为本地不可全局路由的私有 IP 地址（如`192.168.1.15`），而 UDP 报头的*源端口*字段设置为分配给的任何端口套接字（通过绑定显式或由操作系统从*临时端口*隐式选择）。我将调用此源端口号`P1`。

然后，当 NAT 路由器在外部网络上发送该数据包时，它会将源 IP 地址覆盖为它自己的外部 IP 地址（否则无法将数据包路由回），并且通常会将源 UDP 端口覆盖为其他值（也许因为专用网络上的某些其他主机使用相同的源端口，这会产生歧义）。原始源端口和新端口号（让我们标记它`P2`）之间的映射保留在路由器中以匹配返回数据包。此映射也可能特定于*目标 IP 地址*和*目标 UDP 端口*。

所以现在你已经在路由器上“打了一个洞”——发回路由器到端口的 UDP 数据包`P2`被转发到 UDP 端口上的内部机器`P1`。同样，根据 NAT 实现，这可能仅限于来自原始目标 IP 地址和目标 UDP 端口的数据包。

对于客户端到客户端的通信，您必须通过服务器将一个的外部 IP/端口告诉另一个，希望 NAT 路由器将相同的内部源端口映射到相同的外部源端口。然后客户端将使用这些数据包相互发送数据包。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T17:12:14.510

终于找到答案了！这是仅使用客户端和服务器的实现。我的下一次尝试将是使用 3 台计算机。无论如何希望这会有所帮助：

**服务器代码：**

```
class Program
{
    static byte[] dataToSend = new byte[] { 1, 2, 3, 4, 5 };

    // get the ip and port number where the client will be listening on
    static IPEndPoint GetClientInfo()
    {
        // wait for client to send data
        using (UdpClient listener = new UdpClient(11000))
        {
            IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, 11000);
            byte[] receive_byte_array = listener.Receive(ref groupEP);

            return groupEP;
        }
    }

    static void Main(string[] args)
    {
        var info = GetClientInfo(); // get client info

        /* NOW THAT WE HAVE THE INFO FROM THE CLIENT WE ARE GONG TO SEND
           DATA TO IT FROM SCRATCH!. NOTE THE CLIENT IS BEHIND A NAT AND
           WE WILL STILL BE ABLE TO SEND PACKAGES TO IT
        */

        // create a new client. this client will be created on a 
        // different computer when I do readl udp punch holing
        UdpClient newClient = ConstructUdpClient(info);

        // send data
        newClient.Send(dataToSend, dataToSend.Length);            
    }

    // Construct a socket with the info received from the client
    static UdpClient ConstructUdpClient(IPEndPoint clientInfo)
    {          
        var ip = clientInfo.Address.ToString();
        var port = clientInfo.Port;

        // this is the part I was missing!!!!
        // the local end point must match. this should be the ip this computer is listening on
        // and also the port            
        UdpClient client = new UdpClient(new IPEndPoint( IPAddress.Any, 11000));

        // lastly we are missing to set the end points. (ip and port client is listening on)

        // the connect method sets the remote endpoints
        client.Connect(ip, port);

        return client;
    }
} 
```

**客户端代码：**

```
string ipOfServer = "192.168.0.139";
int portServerIsListeningOn = 11000;

// send data to server
Socket sending_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
IPAddress send_to_address = IPAddress.Parse(ipOfServer);
IPEndPoint sending_end_point = new IPEndPoint(send_to_address, portServerIsListeningOn);
sending_socket.SendTo(Encoding.ASCII.GetBytes("Test"), sending_end_point);

// get info
var port = sending_socket.LocalEndPoint.ToString().Split(':')[1];

// now wait for server to send data back
IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, int.Parse(port));
byte[] buffer = new byte[1024];
sending_socket.Receive(buffer); // <----- we can receive data now!!!!! 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T22:30:29.460

您是否考虑过在客户端上使用 UPnP 来配置 NAT 穿越以允许特定端口上的传入数据包？然后，客户端只需将入站 IP 和端口传递给服务器，并等待服务器发送数据包。 [http://en.wikipedia.org/wiki/Universal_Plug_and_Play](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T05:38:31.523

似乎您可以第一次与服务器连接。连接成功后，您需要每次关闭并断开连接。请查看此示例代码 [http://codeidol.com/csharp/csharp-network/Connectionless-Sockets/A -简单-UDP-应用程序/](http://codeidol.com/csharp/csharp-network/Connectionless-Sockets/A-Simple-UDP-Application/)

# c++ - 将对象位置与网格对齐

> ID：12136032
> 
> 赞同：2
> 
> 时间：2012-08-27T03:50:31.987
> 
> 标签：c++, math

我想将对象位置与网格对齐。例如，如果我的对象位置是 (102, 93) 并且我的网格大小是 10，则对齐位置（多个）必须是 (100, 90)。我的程序做了很多次。

目前我正在使用这个：

```
inline int Align(int value, int size)
{
    return (value - (value % size));
} 
```

然后，当对象位置发生变化时，我会这样做：

```
this->m_x = Align(new_x, GRID_SIZE);
this->m_y = Align(new_y, GRID_SIZE); 
```

我的问题是：这是将对象与网格对齐的好方法吗？

% 运算符很快（我经常使用它）？

如果我使用 float 而不是 int 我可以做些什么来对齐位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:57:01.503

您可以使用[std::fmod](http://en.cppreference.com/w/cpp/numeric/math/fmod)：

```
inline float Align(float value, float size)
{
    // Added std::abs to give correct behaviour for negative values
    return value - std::abs(std::fmod(value, size));
} 
```

或者：

```
inline float Align(float value, float size)
{
    return std::floor(value/size) * size;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T03:55:03.587

使用整数数学做同样事情的另一种方法是这样的：

```
inline int Align(int value, int size)
{
    return (value/size)*size;
} 
```

如果您的尺寸是 2 的幂，您可以使用位掩码（例如尺寸 16）：

```
inline int AlignTo16(int value)
{
    return value & 0xfff0
} 
```

# sql - 在 PostgreSQL 中安装 PL/Perl

> ID：12136033
> 
> 赞同：7
> 
> 时间：2012-08-27T03:50:42.480
> 
> 标签：sql, perl, postgresql

我使用 PostgreSQL，我想在 pl/perl 中创建一个函数，但 PostgreSQL 不包含 pl/perl。

当我输入`createlang plperlu databasename`它显示：

> createlang：语言安装失败：错误：无法打开扩展控制文件“/usr/local/pgsql/share/extension/plperlu.control”：没有这样的文件或目录

如何安装 plperlu？

CentOS 5.8 中的 PostgreSQL 版本是 9.1

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T05:19:14.183

在您执行任何其他操作之前，请备份您的数据库。至少用于`pg_dump`获取 SQL 转储并将其放在另一台计算机上。然后继续，但要明白，如果你搞砸了，你可能会导致停机甚至数据丢失。

（对于阅读本文的其他人，它仅适用于**从源代码安装的**PostgreSQL 。您可能正在使用打包版本，在这种情况下，您应该为您的发行版安装 postgresql-contrib 或 postgresql-plperl 的包。名称会有所不同，所以在你的包管理系统中搜索。）

* * *

您的同事很可能从源代码安装了 PostgreSQL，但没有启用 PL/Perl。如果你想要 PL/Perl，你需要重新编译。

安装 Perl 开发包，它应该被称为`perl-devel`，例如：

```
yum install perl-devel 
```

当你重新编译 PostgreSQL 时，`--with-perl`使用`./configure`. 您应该能够找到您的同事在系统某处使用的 PostgreSQL 源代码树 - 尝试搜索`config.log`并查看同一位置是否有 PostgreSQL 源代码树。

如果找不到，则必须：

*   下载新的 PostgreSQL 源代码并按照 PostgreSQL 文档进行编译；或者
*   关闭您当前的服务器并安装[yum.postgresql.org](http://yum.postgresql.org) RPM 以替换它。

老实说，如果您不了解 Linux，这不是一个好的开始方式。找一个曾经使用过 Linux 系统并且熟悉安装包等基本任务的人来帮助你。[让他们帮助您用yum.postgresql.org](http://yum.postgresql.org)软件包中的 PostgreSQL 安装替换源安装的 PostgreSQL ，并最好将您相当过时的操作系统安装更新到当前安装。

# javascript - 神秘属性在元素中生效

> ID：12136035
> 
> 赞同：1
> 
> 时间：2012-08-27T03:50:49.453
> 
> 标签：javascript, jquery, css, debugging, firebug

除非这是一个严重的问题，否则我不会问 stackoverflow。我根本无法弄清楚如何调试这个特定问题。向左导航无序列表元素注入了内联显示属性。我无法弄清楚这是什么 js 代码。

**js/custom.js**中有一个文件，如果我删除该文件，效果不会发生。所以我假设它在那里。我尝试了 grepping ，`.attr, .hide, .css etc etc`但没有任何结果指向我试图追踪的显示效果的**ul元素。**我在 php 文件中搜索了它回显或打印元素的实例，但那里也没有任何内容。我使用了 firebug 和 firequery，但在检查元素后没有出现任何明显的问题。我尝试了 chrome 工具中属性更改的断点。

我怀疑答案会在 DOM 检查器中，但它对我来说很神秘。我将需要阅读有关 firefox 和 chrome 工具的 DOM 树视图。但与此同时，任何人都可以给我一个线索，说明什么是给带有**类 subs的****ul**元素，在这个[页面](http://themes.kopyov.com/?theme=Crown%20-%20admin%20theme)中，它们的 display 属性？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T03:53:32.263

这在 Chrome 中很容易弄清楚。

1.  找到包含列表的父元素。
2.  检查所述父元素。
3.  右键单击元素并选中“中断子树修改”
4.  通过检查堆栈跟踪找出谁添加了元素。
5.  利润！

希望能帮助你找到罪魁祸首。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T03:54:39.663

您是否尝试过 Google Chrome 开发人员工具，以查看 CSS 是否是隐藏您正在查看的元素的原因？

只需单击 Chrome 浏览器中的元素，然后选择检查元素，然后查看可用的 CSS 属性。

最终，导致我这样做的是，我点击了某些文本，打开了下面的 li。然后我搜索文本，当我检查元素时，找到了带有文本的锚标记。然后我假设锚一定是罪魁祸首，并搜索了它的相关类名“exp”，并找到了包含该函数的 js 文件。

我查看了 Crown/js 文件夹中的 custom.js，发现以下内容：

```
$('.exp').collapsible({
        defaultOpen: 'current',
        cookieName: 'navAct',
        cssOpen: 'active',
        cssClose: 'inactive',
        speed: 200
    }); 
```

Li 中有一个锚元素，类为“exp”

```
<li class="forms"><a href="#" title="" class="exp"><span>Forms stuff</span><strong>4</strong></a>
            <ul class="sub" style="display: none; ">
                <li><a href="forms.html" title="">Form elements</a></li>
                <li><a href="form_validation.html" title="">Validation</a></li>
                <li><a href="form_editor.html" title="">WYSIWYG and file uploader</a></li>
                <li class="last"><a href="form_wizards.html" title="">Wizards</a></li>
            </ul>
        </li> 
```

当点击这个标签时，它会得到另一个名为“active”的类，然后 jQuery 会注入显示代码：

```
<li class="forms"><a href="#" title="" class="exp active"><span>Forms stuff</span><strong>4</strong></a>
            <ul class="sub" style="display: block; ">
                <li><a href="forms.html" title="">Form elements</a></li>
                <li><a href="form_validation.html" title="">Validation</a></li>
                <li><a href="form_editor.html" title="">WYSIWYG and file uploader</a></li>
                <li class="last"><a href="form_wizards.html" title="">Wizards</a></li>
            </ul>
        </li> 
```

然后 CSS 处理其余部分。**

# jar - 有没有办法在浏览器中运行可执行 Jar？

> ID：12136040
> 
> 赞同：1
> 
> 时间：2012-08-27T03:53:18.063
> 
> 标签：jar, executable-jar

有没有办法在浏览器中运行可执行 Jar？因为如果我将其导出为普通的 Jar Jar 文件，我认为我的 Jar 不起作用：http: [//chromaticcreative.net/rjminer.jar](http://chromaticcreative.net/rjminer.jar)

# javascript - 从collection.parse覆盖调用时，如何在model.fetch（）返回后更新CompositeView？

> ID：12136041
> 
> 赞同：0
> 
> 时间：2012-08-27T03:53:28.410
> 
> 标签：javascript, backbone.js, coffeescript, marionette

示例： http: [//franklovecchio-playback.herokuapp.com/?log=true](http://franklovecchio-playback.herokuapp.com/?log=true)

完整代码：[https ://github.com/franklovecchio/playback](https://github.com/franklovecchio/playback)

您会看到“未定义”属性出现在错误中：`Uncaught TypeError: Object #<Thing> has no method 'serializeData'`在我返回解析覆盖的模型之后。

最初，我将 Collection 绑定到 CompositeView：

```
things = new App.Collections.Things()
things.fetch()

# Render
App.Pages.State.Action1.getLayout().content.show new App.CompositeViews.Action1Things(
  collection: things
) 
```

在集合`parse`方法中，我`fetch`提供了有关模型的更详细信息（返回一个名为 的属性`extra`，该属性呈现为未定义：

```
class App.Collections.Things extends Backbone.Collection

  url: '/things'
  model: App.Models.Thing

  @trace initialize: () ->

  # Override response to get more detailed information about thing.
  @trace parse: (resp) ->

    things = []

    _.each resp, (item) =>

      # Fetch detailed information about thing
      thing = new App.Models.Thing(
        id: item.id
        name: item.name
      )

      thing.fetch()

      things.push thing

    things 
```

然后，在模型内部：

```
class App.Models.Thing extends Backbone.Model

  defaults:
    name: 'n/a'
    extra: 'n/a'

  urlRoot: () ->
    '/thing'

  defaults:
    name: null

  @trace initialize: () ->

    @name = @attributes.name
    @extra = @attributes.extra

  @trace parse: (resp) -> 

    debug.info 'resp: ' + JSON.stringify resp

    @id = resp.id
    @attributes.id = @id

    @name = resp.name
    @attributes.name = @name

    @extra = resp.extra
    @attributes.extra = @extra

    @ 
```

注释掉：

```
@extra = resp.extra
@attributes.extra = @extra 
```

导致错误消失，但 CompositeView 甚至不尝试更新。如何使用获取的模型响应在 parse() 完成时更新 CompositeView？

（虽然示例没有显示它，但我必须重写，因为响应不会像 Backbone 想要的那样返回，以防您想知道）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:12:49.950

使用 jQuery[延迟](http://api.jquery.com/category/deferred-object/)对象延迟视图的呈现，直到收集请求完成：

```
things = new App.Collections.Things()
things.deferred = things.fetch()

things.deferred.done(function() {
  App.Pages.State.Action1.getLayout().content.show new App.CompositeViews.Action1Things(
    collection: things
  )
}); 
```

更多信息：[Backbone.js 在填充集合后调用渲染](https://stackoverflow.com/questions/11585137/backbone-js-calling-render-after-collection-is-populated/11590613#11590613)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:16:50.850

我不得不修改 ItemView 和 CompositeView 的`on 'change'`事件：

ItemView**旧**：

```
class App.ItemViews.Action1Thing extends Backbone.Marionette.ItemView
  template: '#template-action1-thing'
  @trace initialize: (options) ->

    @model.on 'change', @render 
```

**新**项目视图：

```
class App.ItemViews.Action1Thing extends Backbone.Marionette.ItemView
  template: '#template-action1-thing'
  @trace initialize: (options) ->

    @model.on 'change', () ->
      @render 
```

CompositeView**旧**：

```
class App.CompositeViews.Action1Things extends Backbone.Marionette.CompositeView

  template: '#template-action1-things'
  collectionEl: 'tbody#things_collection'
  itemView: App.ItemViews.Action1Thing

  @trace initialize: (options) ->

    @collection.on 'change', @render 
```

复合视图**新**：

```
class App.CompositeViews.Action1Things extends Backbone.Marionette.CompositeView

  template: '#template-action1-things'
  collectionEl: 'tbody#things_collection'
  itemView: App.ItemViews.Action1Thing

  @trace initialize: (options) ->

    @collection.on 'change', (model) ->
      @.remove model
      @.add model
      @render 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-06-28T15:08:43.010

以下绝对应该有效，它对我有用......

而不是下面的

```
this.collection.fetch(); 
```

用这个

```
this.collection.fetch(async: false); 
```

# javascript - 全局变量如何在 jquery/javascript 中工作？（初级水平）

> ID：12136050
> 
> 赞同：0
> 
> 时间：2012-08-27T03:55:17.943
> 
> 标签：javascript, jquery, global-variables, processing

我基本上想知道全局变量在 javascript/JQuery 环境中是如何工作的。我最熟悉一种叫做[处理](http://processing.org/)的语言，有人告诉我它是基于 java 的。我希望 javascript 和 JQuery 中的变量表现得与处理中的变量一样，但它们并没有像我预期的那样工作，而且我终其一生都无法摆脱它。

我有一个非常简单的例子来说明我的困惑：

```
 var what="";

 $(document).ready(function(){
      $("p").click(function () {
           what="p";
           });
      if(what=="p"){
            alert(what);
           }//end if
 });//end doc ready 
```

在处理过程中，这会起作用，因为“what”变量是全局变量，并且通过单击段落来更改它，if 语句应该不断检查是否 'what'=='p'，并触发警报。但这不是发生的事情——“what”似乎只在 click 函数内更新，即使它是一个全局变量，所以当涉及 if 语句时，“what”仍然等于“”而不是“p” .

如果有人能解释为什么会发生这种情况，我将非常感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T04:00:29.350

该`if`语句仅在 DOM 首次准备好时运行一次。它不是连续运行的。如果您希望它在单击处理程序期间运行，那么您将使用以下代码：

```
 var what="";

 $(document).ready(function(){
    $("p").click(function () {
       what="p";
       if(what=="p"){
           alert(what);
       }//end if
    });
});//end doc ready 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:00:19.027

> if 语句应该不断检查是否'what'=='p'，并触发警报。

为什么？您的任何代码都不会产生该功能。如果你想让这种情况发生，你可以使用`setInterval()`：

```
setInterval(function() {
    if(what=="p") { 
        alert("what");
    }
}, 500); // executes function every 500 milliseconds 
```

* * *

> 但这不是发生的事情——“什么”似乎只在点击函数内更新，即使它是一个全局变量

不，您的`what`变量正在全局更新。您只是没有注意到，因为您对`if`功能做出了错误的假设（它只被调用一次）。

# javascript - 如何制作与单词中的任何字母匹配 X 次的正则表达式？

> ID：12136055
> 
> 赞同：1
> 
> 时间：2012-08-27T03:55:48.110
> 
> 标签：javascript, regex

最近，我开始制作一个文字游戏，其中涉及从另一个单词的字母中制作单词。例如，如果您有“Teutonic”一词，则可以制作“tonic”、“tone”等。在游戏中，您只能使用单词中可用的字母，而不能重复。这意味着虽然“tonic”在上述示例中有效，但“tonico”无效，因为“Teutonic”中只有一个“o”。

我的问题基本上是，我怎样才能制作一个正则表达式，以便它搜索字母的**一个**实例并记住它，以便在循环中稍后给出相同的字母时不再查找它？

因此，如果您有“Teutonic”并且您正在使用正则表达式搜索“tonico”（“t”，“o”，“n”，“i”，“c”，“o”）中的每个字母，你会得到除最后一个“o”外，每个都为“true”。

如果你有“铅笔”这个词，你会得到“笔”、“线”和“桩”，但不是“管”。

或者如果你有“小”，你会得到“商场”，“商场”而不是“大众”。

* * *

编辑：

非常感谢您的所有及时回复！我怀疑使用正则表达式方法是不可能的，但我想确定一下。相反，我对数组方法进行了一些实验，以为我没有走得太远。

再次感谢各位！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T04:08:20.203

将字符串拆分为数组，然后与数组进行比较。

```
function checkStr(str1, str2) {
  var arr1 = str1.split(''),
      arr2 = str2.split(''),
      i,j;
  for (i = 0; i < arr2.length; i++) {
     if ((j= arr1.indexOf(arr2[i])) === -1) {
        return false;
     } 
     arr1.splice(j, 1);
  }
  return true;
}
// usage
checkStr('small', 'mall'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:53:27.200

正则表达式不适合这项任务。我会为源和目标字符串建立一个哈希`(character -> occurrences)`，然后比较目标哈希中的计数以确保它们都是 <= 源哈希中的相应计数。

如果你把这个逻辑放在一个对象中，你可以只构建一次源哈希，然后对它进行多次测试（[jsFiddle 版本](http://jsfiddle.net/YxMEJ/3/)）：

```
function Comparer(sourceStr)
{
    this.buildHash = function(str)
    {
        var hash = new Object();
        for (var i in str)
            hash[str[i]] = (hash[str[i]] || 0) + 1;

        return hash
    };

    this.check = function(testStr)
    {
        var hash = this.buildHash(testStr);

        for (var c in hash)
            if ((this.sourceHash[c] || 0) < hash[c])
                return false;

        return true;
    };     

    this.source = sourceStr;
    this.sourceHash = this.buildHash(sourceStr);
};

var comp = new Comparer("teutonic");
alert(comp.check("tonic"));  // true
alert(comp.check("tint"));   // true
alert(comp.check("tonico")); // false
alert(comp.check("asdf"));   // false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:04:41.080

我不确定这是正则表达式的合适用例吗？我认为因为您正在寻找使用原始单词中的字母，以与它们出现的不同顺序，表达不再是“常规”。

我想如果可以做到的话，将需要使用非常复杂的反向引用。

我会使用某种自定义（或预先存在的特定于域的）算法亲自对此进行攻击。

但我必须承认我不是一个正则表达式专家，很高兴被证明是错误的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:34:25.257

```
// It may not matter, but you can also compare strings without creating arrays.

String.prototype.contains= function(word){
    var seed= String(this), i= 0, len= word.length, next= '';
    while(i<len){
        next= word.charAt(i++);
        if(seed.indexOf(next)== -1) return false;
        seed= seed.replace(next, '');
    }
    return word;
}

//testing 
var startword= 'teutonic',report='startword= '+startword, 
list= ['ton', 'on', 'out', 'tout', 'tone', 'tonic', 'tune', 'nice', 
'note', 'not','tot', 'tote', 'ice', 'tic', 'nick', 'cone', 'con', 'cut', 'cute'];

var failed=list.filter(function(itm){
    return !startword.contains(itm);
});

report+= failed.length? '\n'+failed.length+' incorrect: '+failed+';\n':'';
report+=list.length+' correct: '+list+';\n';
alert(report);

/*  returned value: (String)
startword= teutonic
1 incorrect: nick;
19 correct: ton,on,out,tout,tone,tonic,tune,nice,note,
not,tot,tote,ice,tic,nick,cone,con,cut,cute;

*/ 
```

# php - php：两个日历没有显示

> ID：12136057
> 
> 赞同：0
> 
> 时间：2012-08-27T03:55:55.380
> 
> 标签：php, javascript

两个日历未显示在一个 php 文件中。场景如下

我有一个 php 文件名`temp`。在这里我想显示两个日历（上个月和下个月）。

```
<!DOCTYPE html>

<html >

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>Untitled Document</title>

<link rel="stylesheet" type="text/css" href="style.css" />

</head>

<body>

<div id="left1"><?php include('calendar_previous.php');?></div>

<div id="right1"><?php include('calendar_next.php');?>hello</div>

</body>

</html> 
```

我`calendar_previous.php`的是

```
<!DOCTYPE html>

<html>

<head>

<script type="text/javascript"  src="css/datetimepicker_css.js"></script>

<meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />

<title>BuildUp Real Estate</title>

<link rel="stylesheet" type="text/css" href="style.css" />

<link rel="stylesheet" type="text/css" href="admin.css" />

<link rel="stylesheet" type="text/css" media="all" href="jsDatePick_ltr.min.css" />

<script type="text/javascript" src="css/jquery.1.4.2.js"></script>

<script type="text/javascript" src="css/jsDatePick_prev.jquery.min.1.3.js"></script>

<script type="text/javascript">

window.onload = function(){

    g_globalObject = new JsDatePick({

        useMode:1,

        isStripped:true,

        target:"inputField1"

    }); 

    g_globalObject.setOnSelectedDelegate(function(){

        var obj = g_globalObject.getSelectedDay();

        alert("a date was just selected and the date is : " + obj.day + "/" + obj.month + "/" + obj.year);

        document.getElementById("div3_example_result").innerHTML = obj.day + "/" + obj.month + "/" + obj.year;

    });

};

</script>

</head>

<body>  

<div id="inputField1"></div>

</body>

</html> 
```

我`calendar_next.php`的几乎与`calendar_previous.php`javascript 的两个不同之处相同

```
<script type="text/javascript" src="css/jquery.1.4.4.js"></script>

<script type="text/javascript" src="css/jsDatePick_next.jquery.min.1.3.js"></script> 
```

当我分别打电话时`calendar_previous.php`，`calendar_next.php`它会正确显示上个月和下个月。但是，当我将这两个 php 文件包含`temp.php`在不同的文件中时，`div`只会显示一个日历。我想以`temp.php`不同的方式显示两个日历`div`。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:02:25.363

我猜是因为现在你有两个`window.onload`. 所以，这可能很麻烦。您可以尝试将两者的内容`window.onload`放在第二页并尝试。

第二个问题可能是 jquery 冲突。

为此，请遵循此

```
$s = jQuery.noConflict(); 
```

现在用您的一个文件中的所有`$`替换`$s`。

那应该可以解决您的问题。如果没有，请告诉我。

# objective-c - 为什么这个 UIImageView 不显示？

> ID：12136058
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:56:06.753
> 
> 标签：objective-c, ios, quartz-graphics

如果我将此 UIImageView 设置为 IBOutlet 它可以正常工作并显示在 sim 中。但以编程方式它不起作用。我想我错过了一个步骤或忘记了一行代码。

它被声明为

```
@property (nonatomic,retain) UIImageView  *circleView; 
```

和实施

```
self.circleView.frame = CGRectMake(0, 0, self.view.frame.size.width,   self.view.frame.size.height);
    self.circleView.center = self.view.center;
    [self.view addSubview:circleView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:16:52.913

您只是忘记初始化您`UIImageView`的，这就是它不起作用的原因...

```
self.circleView = [[UIImageView alloc] init];
self.circleView.frame = CGRectMake(0, 0, self.view.frame.size.width,   self.view.frame.size.height);
    self.circleView.center = self.view.center;
    [self.view addSubview:circleView]; 
```

# ios - 控制 iOS 设备

> ID：12136061
> 
> 赞同：0
> 
> 时间：2012-08-27T03:56:21.143
> 
> 标签：ios, jailbreak

是否可以从我的应用程序在后台运行，打开/关闭其他应用程序，控制 iOS 设备而无需越狱？我知道这个应用程序*不会通过*Apple 的审查/批准，但我没有计划，相反，我只需要将它分发到明确定义的设备列表。我只是不想要求越狱设备..有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:03:44.090

我相信它可能没有实际越狱物理设备。查看此问题的第二个答案以获取更多信息。[没有开发者程序或越狱的 iOS 应用程序](https://stackoverflow.com/questions/4952820/test-ios-app-on-device-without-apple-developer-program-or-jailbreak?rq=1)

# perl - perl 101 - "@" 用于数组或散列

> ID：12136065
> 
> 赞同：-1
> 
> 时间：2012-08-27T03:57:04.223
> 
> 标签：perl

```
 foreach (@v) { s/^\s+//; s/\s+$// }
        push @{$data[$x]}, @v;
      } 
```

我收到一个错误：全局变量 @data 需要明确的包名称——不知道如何添加“我的”。

但是我也看不懂这行代码，

*   它将 v 元素推入 data[x]。但是@是如何工作的。我了解 {} 用于哈希。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T04:12:17.030

[`my`](http://perldoc.perl.org/functions/my.html)声明词法范围的变量。这里似乎不合适，因为似乎没有新变量被命名，除非`@data`是新变量，在这种情况下`my`必须移动：

```
push @{(my @data)[$x]}, @v; 
```

这几乎是无用的，因为 的词汇范围`@data`立即消失了，或者更清楚、更有用：

```
my @data;
push @{$data[$x]}, @v; 
```

where`@data`是在稍大的范围内。

* * *

[`perlreftut`](http://perldoc.perl.org/perlreftut.html)解释`@{...}`。没有`my`，

```
push @{$data[$x]}, @v; 
```

表示获取数组的`$x`第 th 个元素`@data`，将其视为数组引用，并附`@v`加到它。

例如，

```
my @data = (
    [],          # 0
    ['a'],       # 1
    ['b'],       # 2
    ['c', 'd'],  # 3
);
my $x = 2;
my @v = ('e', 'f');

push @{$data[$x]}, @v;
# @data = (
#     [],               # 0
#     ['a'],            # 1
#     ['b', 'e', 'f'],  # 2
#     ['c', 'd'],       # 3
# ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T04:05:11.300

您是否在尝试定义`@data`它的同时进行定义？`my`如果没有更多信息，目前还不清楚这是为了什么。

包装器说“大括号内的`@{}`东西是一个数组引用，所以现在把它当作一个真正的数组”。push 命令应该将数组的所有元素复制到`@v`数组的第`$x`' 个元素上`@data`，它应该是一个数组引用。

# java - 在 gwt 中调整布局面板的大小

> ID：12136066
> 
> 赞同：0
> 
> 时间：2012-08-27T03:57:17.170
> 
> 标签：java, gwt

我在调整 gwt 容器面板内的表格时遇到困难。该表没有在调整外面板大小时调整大小，因此我需要对此进行修复。由于代码太长，我无法发布代码。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:10:42.473

You may want to try something like:

```
setSize(Window.getClientWidth()*1/4+"px", Window.getClientHeight()*1/4+"px") 
```

# c++ - C++ 地图 与地图 性能（我知道，“再次？”）

> ID：12136071
> 
> 赞同：47
> 
> 时间：2012-08-27T03:58:36.260
> 
> 标签：c++, performance, dictionary, stdmap

我正在使用带有`std::string`键的地图，虽然一切正常，但我没有获得预期的性能。我搜索了一些可以优化和改进的地方，这时一位同事说，“那个字符串键会很慢。”

我读了几十个问题，他们一直说：

> “不要使用 a`char *`作为密钥”
> “`std::string`密钥永远不是你的瓶颈” “a和 a
> 之间的性能差异是一个神话。”`char *``std::string`

我很不情愿地试了一把`char *`钥匙，结果有区别，很大的区别。

我把问题归结为一个简单的例子：

```
#include <stdio.h>
#include <stdlib.h>
#include <map>

#ifdef USE_STRING

#include <string>
typedef std::map<std::string, int> Map;

#else

#include <string.h>
struct char_cmp { 
    bool operator () (const char *a,const char *b) const 
    {
        return strcmp(a,b)<0;
    } 
};
typedef std::map<const char *, int, char_cmp> Map;

#endif

Map m;

bool test(const char *s)
{
    Map::iterator it = m.find(s);
    return it != m.end();
}

int main(int argc, char *argv[])
{
    m.insert( Map::value_type("hello", 42) );

    const int lcount = atoi(argv[1]);
    for (int i=0 ; i<lcount ; i++) test("hello");
} 
```

首先是 std::string 版本：

```
$ g++ -O3 -o test test.cpp -DUSE_STRING
$ time ./test 20000000
real    0m1.893s 
```

接下来是 'char *' 版本：

```
g++ -O3 -o test test.cpp             
$ time ./test 20000000
real    0m0.465s 
```

这是一个相当大的性能差异，与我在更大的程序中看到的差异大致相同。

使用`char *`钥匙来释放钥匙是一件很痛苦的事情，而且感觉不对。C ++专家我错过了什么？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-27T04:14:13.880

您正在使用 a`const char *`作为`find()`. 对于包含`const char*`this 的地图，这是`find`期望的正确类型，并且可以直接进行查找。

包含的映射`std::string`期望参数 of`find()`是 a `std::string`，因此在这种情况下，`const char*`第一个必须转换为 a `std::string`。这可能就是您所看到的差异。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-27T09:56:37.607

如上所述，问题是关联容器（集合和映射）的规范之一，因为它们的成员搜索方法总是强制转换为`key_type`，即使`operator<`存在接受将您的键与映射中的键进行比较的存在尽管它们的类型不同。

另一方面，中的函数`<algorithm>`不受此影响，例如[`lower_bound`](http://en.cppreference.com/w/cpp/algorithm/lower_bound)定义为：

```
template< class ForwardIt, class T >
ForwardIt lower_bound( ForwardIt first, ForwardIt last, const T& value );

template< class ForwardIt, class T, class Compare >
ForwardIt lower_bound( ForwardIt first, ForwardIt last, const T& value, Compare comp ); 
```

因此，替代方案可能是：

```
std::vector< std::pair< std::string, int > > 
```

然后你可以这样做：

```
std::lower_bound(vec.begin(), vec.end(), std::make_pair("hello", 0), CompareFirst{}) 
```

其中`CompareFirst`定义为：

```
struct CompareFirst {
     template <typename T, typename U>
     bool operator()(T const& t, U const& u) const { return t.first < u.first; }
}; 
```

或者甚至构建一个完全自定义的比较器（但它有点难）。

A `vector`of pair 通常在读取繁重的负载时效率更高，因此实际上是存储配置。

我建议提供包装访问的方法。`lower_bound`是相当低级的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-29T03:02:59.607

If your in C++ 11, the copy constructor is not called [unless the string is changed](https://stackoverflow.com/questions/10231349/are-the-days-of-passing-const-stdstring-as-a-parameter-over). Because std::string is a C++ construct, at least 1 dereference is needed to get at the string data.

My guess would be the time is taken up in an extra dereference (which if done 10000 times is costly), and std::string is likely doing appropriate null pointer checks, which again eats up cycles.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T04:01:55.560

将 std::string 存储为指针，然后您将失去复制构造函数的开销。

但是在你必须记住处理删除之后。

std::string 慢的原因是它自己构造。调用复制构造函数，然后在最后调用 delete。如果您在堆上创建字符串，则会丢失复制构造。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-31T15:08:57.607

编译后，2 个“Hello”字符串文字将具有相同的内存地址。在`char *`您使用此内存地址作为键的情况下。

在这种`string`情况下，每个“Hello”都将转换为不同的对象。这是您的性能差异的一小部分（非常非常小）。

更大的部分可能是，因为您使用的所有“Hello”都具有相同的内存地址`strcmp`，所以总是会获得 2 个等效的 char 指针，我很确定它会提前检查这种情况 :) 所以它永远不会真正迭代除了 std::string 比较之外的所有字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-21T18:01:41.030

对此的一种解决方案是使用自定义键类，它充当 a`const char *`和 a之间的交叉`std::string`，但在运行时有一个布尔值来判断它是“拥有”还是“非拥有”。这样，您可以将密钥插入拥有其数据的地图中（并在销毁时释放它），然后与不拥有其数据的密钥进行比较。（这与 rust 类型的概念相似`Cow<'a, str>`）。

下面的示例也继承自 boost's`string_ref`以避免重新实现哈希函数等。

注意这有一个危险的影响，如果您不小心将非拥有版本插入到地图中，并且您指向的字符串超出范围，则键将指向已释放的内存。非拥有版本只能用于查找。

```
#include <iostream>
#include <map>
#include <cstring>

#include <boost/utility/string_ref.hpp>

class MaybeOwned: public boost::string_ref {
public:
  // owning constructor, takes a std::string and copies the data
  // deletes it's copy on destruction
  MaybeOwned(const std::string& string):
    boost::string_ref(
      (char *)malloc(string.size() * sizeof(char)),
      string.size()
    ),
    owned(true)
  {
    memcpy((void *)data(), (void *)string.data(), string.size());
  }

  // non-owning constructor, takes a string ref and points to the same data
  // does not delete it's data on destruction
  MaybeOwned(boost::string_ref string):
    boost::string_ref(string),
    owned(false)
  {
  }

  // non-owning constructor, takes a c string and points to the same data
  // does not delete it's data on destruction
  MaybeOwned(const char * string):
    boost::string_ref(string),
    owned(false)
  {
  }

  // move constructor, tells source that it no longer owns the data if it did
  // to avoid double free
  MaybeOwned(MaybeOwned&& other):
    boost::string_ref(other),
    owned(other.owned)
  {
    other.owned = false;
  }

  // I was to lazy to write a proper copy constructor
  // (it would need to malloc and memcpy again if it owned the data)
  MaybeOwned(const MaybeOwned& other) = delete;

  // free owned data if it has any
  ~MaybeOwned() {
    if (owned) {
      free((void *)data());
    }
  }

private:
  bool owned;
};

int main()
{
  std::map<MaybeOwned, std::string> map;
  map.emplace(std::string("key"), "value");
  map["key"] += " here";
  std::cout << map["key"] << "\n";
} 
```

# objective-c - 添加子视图控制器后为什么需要再次添加子视图？

> ID：12136074
> 
> 赞同：4
> 
> 时间：2012-08-27T03:58:55.723
> 
> 标签：objective-c, ios, uiviewcontroller

由于我有一个父视图控制器和一个子视图控制器，
因此父视图控制器类似于苹果文档所说的容器控制器，
然后执行

```
[parentVC addChildViewController:childVC];
childVC.view.frame = SOMEFRAME; 
```

但是现在屏幕上还没有看到childVC；
我必须在下面添加代码吗？

```
[parentVC.view addSubview:childVC.view];//is a must? any code can replace? 
```

--
在我看来，容器就是容器，当我在其中添加了一个 childVC 时，它的视图应该添加自己，**或者某些方法可以做到这一点？**

UIWindow 有一个“rootViewController”属性，设置后会自动添加新视图，我想这就是我想要的。

我需要一些建议。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T04:12:42.100

这是一个简单的控制问题。通常您希望有一个子视图控制器，但它的视图是您的子视图之一的子视图，而不仅仅是容器视图控制器的“顶级”视图属性的子视图。

本质上，框架选择让您决定，并且不强制包含的视图控制器的视图*必须*是其父视图控制器的第一代后代。这完全取决于您；ViewControllers 和 Views 的层次结构不需要具有完美的代际奇偶性。

# android - 适用于 Android 工具链的 FFMPEG：arm-linux-armeabi-eabi-pkg-config - 是否存在任何包含 pkg-config 工具的工具链

> ID：12136078
> 
> 赞同：14
> 
> 时间：2012-08-27T03:59:45.880
> 
> 标签：android, compilation, ffmpeg, static-libraries, linux-toolchain

有人知道包含**arm-linux-androideabi-pkg-config工具的****ffmpeg linux arm**平台的任何工具链吗？Android NDK 不包含它。还有人成功地为包含 alsa 设备的 android 构建 ffmpeg 吗？请注意，我的 Ubuntu x86 PC 上存在 libasound。在访问了包括 ffmpeg.org、ffmpeg--nabbles、groups.google.com 在内的论坛（包括 andro 和 android-ndk gropus）以及整个互联网之后，我没有成功地找到任何似乎知道它存在的人. 充其量，我读过人们说忽略它。考虑到它需要什么，我认为这是一件天真的事情。 **对标准 ffmpeg 配置脚本的仔细审查表明，对于某些输入和输出设备，需要一个描述为**pkg_config_default=pkg-config**的工具链。此外，HAVE_LIST 上的所有项目都是 SYSTEM DEPENDENT。配置脚本非常清楚地说明了每个 indev 或 outdev 项需要哪些依赖项。显然，此工具用于验证依赖项所需的库 这

是当您尝试为 android 配置 ffmpeg 时发生的情况** 

 **> jasongipsyblues@android-master:~/android-ffmpeg/Project/jni$ ./configure_ffmpeg.sh
> ...
> ...
> ..
> ....
> 许可证：GPL 版本 3 或更高版本 创建 config.mak 和 config.h.. .
> 
> config.h 不变
> 
> config.asm 不变
> 
> libavutil/avconfig.h 不变
> 
> 警告：/home/jasongipsyblues/Desktop/apps/android-ndk-r8b/toolchains/arm-linux-androideabi- 4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-pkg-config 未找到，库检测可能会失败。

在装有 Ubuntu 的 PC 上，pkg-config 没有问题。

请比较以下输出，当一个 greps 来自 Ubuntu x86 PC 的 config.log 文件中的输入/输出设备 alsa 和使用 android-ndk-r8 工具链的 android 机器时

> jasongipsyblues@android-master:~/android-ffmpeg/Project/jni/ffmpeg$ cat config.log|grep >alsa
> alsa_indev
> alsa_outdev
> alsa_asoundlib_h
> INDEV_LIST='alsa_indev
> OUTDEV_LIST='alsa_outdev
> alsa_indev='yes'
> alsa_indev_deps='alsa_asoundlib_h
> sndout_pcm_h '是'
> alsa_outdev_deps='alsa_asoundlib_h'
> indevs_if_any='alsa_indev
> outdevs_if_any='alsa_outdev
> check_lib2 alsa/asoundlib.h snd_pcm_htimestamp -lasound
> check_func_headers alsa/asoundlib.h snd_pcm_htimestamp -lasound
> 1 #include
> /tmp/ffconf.VCjQQAHQ:c:错误：alsa/asoundlib.h：没有这样的文件或目录

这是显示错误来源的编译器输出：

> check_lib2 alsa/asoundlib.h snd_pcm_htimestamp -lasound
> check_func_headers alsa/asoundlib.h snd_pcm_htimestamp -lasound
> check_ld cc -lasound
> check_cc
> BEGIN /tmp/ffconf.VCjQQAHQ.c
> 1 #include
> 2 long check_snd_pcm_htimestamp(void) { return (long) snd_pcm_htimestamp; }
> 3 int main(void) { return 0; }
> 结束 /tmp/ffconf.VCjQQAHQ.c
> /home/jasongipsyblues/Desktop/apps/android-ndk-r8b/toolchains/arm-linux-androideabi->4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-gcc --sysroot=/home/ jasongipsyblues/Desktop/apps/android-ndk-r8b/platforms/android-14/arch-arm -D_ISOC99_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_POSIX_C_SOURCE=200112 -D_XOPEN_SOURCE=600 -DPIC -I../x264 -mcpu=cortex- a9 -std=c99 -fomit-frame-pointer -fPIC -marm -c -o /tmp/ffconf.I2B2AXfH.o
> /tmp/ffconf.VCjQQAHQ.c
> /tmp/ffconf.VCjQQAHQ.c:1:28：错误： alsa/asoundlib.h: 没有这样的文件或目录
> /tmp/ffconf.VCjQQAHQ.c: 在函数 'check_snd_pcm_htimestamp':
> /tmp/ffconf.VCjQQAHQ.c:2: 错误: 'snd_pcm_htimestamp' 未声明（首次在此函数中使用）
> /tmp/ffconf.VCjQQAHQ.c:2：错误：（每个未声明的标识符仅报告一次
> /tmp/ffconf.VCjQQAHQ.c:2：错误：对于它出现的每个函数。）
> 
> 这是针对 Ubuntu x86PC ffmpeg
> jasongipsyblues @安卓主：〜/ ffmpeg的$猫的config.log | grep的
> ALSA
> alsa_indev alsa_outdev
> alsa_asoundlib_h
> INDEV_LIST = 'alsa_indev
> OUTDEV_LIST =' alsa_outdev
> alsa_indev = '是'
> alsa_indev_deps = 'alsa_asoundlib_h snd_pcm_htimestamp'
> alsa_outdev = '是'
> alsa_outdev_deps = 'alsa_asoundlib_h'
> indevs_if_any = 'alsa_indev
> outdevs_if_any='alsa_outdev
> check_lib2 alsa/asoundlib.h snd_pcm_htimestamp -lasound
> check_func_headers alsa/asoundlib.h snd_pcm_htimestamp -lasound
> 1 #include
> 这里没有错误，alsa成功包含在ffmpeg构建中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:53:14.307

[https://github.com/guardianproject/android-ffmpeg](https://github.com/guardianproject/android-ffmpeg)

[https://github.com/guardianproject/android-ffmpeg/commit/f08db49e613a7ea4423effb22973e3f1afefb819](https://github.com/guardianproject/android-ffmpeg/commit/f08db49e613a7ea4423effb22973e3f1afefb819)

看看链接。他只是做了一个提交，包括“freetype2”子模块，以解决 pkg-config 问题。**

# java - 使用记事本在java中播放.mp3文件

> ID：12136086
> 
> 赞同：5
> 
> 时间：2012-08-27T04:01:38.670
> 
> 标签：java, mp3, javafx, javafx-2, illegalargumentexception

我知道这是一个重复的问题。[在此处](https://stackoverflow.com/questions/6045384/playing-mp3-and-wav-in-java)或[此处](https://stackoverflow.com/questions/10888367/compiling-and-running-with-javafx-2-1)查看原始版本。

所以我的代码只是复制粘贴：

```
import javafx.scene.media.*;

class Gui {
  public static void main(String[] args) {
    try{
        Media hit = new Media("skin.mp3");
        MediaPlayer mediaPlayer = new MediaPlayer(hit);
        mediaPlayer.play();
    }catch(Exception e){
        e.printStackTrace();
    }
  }
} 
```

我得到的例外是：

```
java.lang.IllegalArgumentException: uri.getScheme() == null!
        at com.sun.media.jfxmedia.locator.Locator.<init>(Locator.java:217)
        at javafx.scene.media.Media.<init>(Media.java:364)
        at Gui.main(gui.java:6) 
```

我正在编译并正确运行它，即通过将`jfxrt.jar`文件包含在类路径中

注意：我只是使用记事本而不是任何 IDE。

所以谁能告诉我原因`IllegalArgumentException`

谢谢

**更新**：通过使用`file://e:/skin.mp3`它工作正常，但给我留下了另一个例外：

```
MediaException: MEDIA_INACCESSIBLE : e
        at javafx.scene.media.Media.<init>(Unknown Source)
        at Gui.main(gui.java:6) 
```

因此，如果您可以对这个例外有所了解。

顺便说一句，我检查了这首歌，它没有损坏，因为它在 vlc 中播放得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T04:04:58.523

来自 JavaFX API 文档

> *   提供的 URI 必须符合 java.net.URI 要求的 RFC-2396。
> *   仅支持 HTTP、FILE 和 JAR URI。

因此，我怀疑通过阅读文档，您需要提供 URI 路径。

类似的东西`file://path/to/file/skin.mp3`可能会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:33:08.750

这个问题的代码有一些问题。

1.  课程需要公开。
2.  JavaFX 2 应用程序需要扩展 Application 类。
3.  JavaFX 2 应用程序应该定义一个启动方法。
4.  正在创建的媒体的定位器应该是 MadProgrammer 指出的完整 URI。

即使这个问题有一个 javafx-2 标记，我想知道它是否是为 JavaFX 1.x JavaFX Script（现在是一种不受支持的编程语言并且与 JavaFX 2 不兼容）编写的。如果是这样，我建议使用 Java 编码并为此使用 JavaFX 2.x 而不是 JavaFX Script。

在 Windows 上，URI 的绝对定位符的文件表示在文件协议之后有三个斜杠。例如，以下是有效的：

```
file:///C:/Users/Public/Music/skin.mp3

```

出于某种原因，一个斜杠也可以工作（我猜在内部 Java 会为文件上的协议说明符插入额外的 // 或者可能在 URL 规范中有一些我不理解的东西，这意味着你不需要// 在协议之后）。

```
文件：/C:/Users/Public/Music/skin.mp3

```

检查文件 uri 的一种方法是询问文件 uri 是否存在

```
System.out.println("文件" + 文件名 + " 存在吗？" + new File(filename).exists()); 

```

在您知道您的文件 uri 有效后，您可以使用将其转换为字符串。

```
file.toURI().toURL().toExternalForm() 
```

这是一个简短的示例程序，用于在 JavaFX 中使用带有一点错误处理的 MediaPlayer 播放一些音频，以便在出现问题时更容易理解。

```
import java.io.File;
import java.net.MalformedURLException;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.layout.StackPane;
import javafx.scene.media.*;
import javafx.scene.paint.Color;
import javafx.stage.Stage;

/** plays an audio in JavaFX 2.x */
public class SimpleAudioPlayer extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(Stage stage) throws MalformedURLException {
    final Label status = new Label("Init");
    MediaPlayer mediaPlayer = createMediaPlayer(
      "C:/Users/Public/Music/Sample Music/Future Islands - Before the Bridge.mp3", 
      status
    );
    StackPane layout = new StackPane();
    layout.getChildren().addAll(status);
    stage.setScene(new Scene(layout, 600, 100, Color.CORNSILK));
    stage.show();
    if (mediaPlayer != null) {
      mediaPlayer.play();
    }  
  }

  /** 
   * creates a media player using a file from the given filename path 
   * and tracks the status of playing the file via the status label 
   */
  private MediaPlayer createMediaPlayer(final String filename, final Label status) throws MalformedURLException {
    File file = new File(filename);
    if (!file.exists()) {
      status.setText("File does not exist: " + filename);
    }
    final String mediaLocation = file.toURI().toURL().toExternalForm();
    Media media = new Media(mediaLocation);
    MediaPlayer mediaPlayer = new MediaPlayer(media);
    mediaPlayer.setOnError(new Runnable() {
      @Override public void run() {
        status.setText("Error");
      }
    });
    mediaPlayer.setOnPlaying(new Runnable() {
      @Override public void run() {
        status.setText("Playing: " + mediaLocation);
      }
    });
    mediaPlayer.setOnEndOfMedia(new Runnable() {
      @Override public void run() {
        status.setText("Done");
      }
    });
    return mediaPlayer;
  }
} 
```

这是一个指向 JavaFX 2.x 媒体播放器的附加示例的链接，该播放器[按顺序播放给定目录中的所有 mp3 文件](https://gist.github.com/1446612)。

# tsql - 表子集的 T-SQL 平均值

> ID：12136088
> 
> 赞同：1
> 
> 时间：2012-08-27T04:02:12.070
> 
> 标签：tsql, sql-server-2005

我有一个包含以下列的单个位置的每日天气数据表（在 SQL Server 2005 中）：

```
LogDate                 DATETIME  
HighTemp                INT  
Temp6MonthHighAverage   INT 
```

`LogDate`并`HighTemp`有数据。`HighTemp6MonthAverage`顾名思义，将填充以 . 结尾的 6 个月的平均高温`LogDate`。

对于跨越数十年的数据，LowTemp 以及湿度和其他几个项目也有类似的要求。

我发现自己在圈子里思考。我可以使用集合操作为 UPDATE 语句中的每一行得出这个平均值，还是需要使用游标实现解决方案？我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:25:16.570

```
-- select 
select HighTemp, LogDate,(select AVG(HighTemp) 
                          from tbl where 
                          DATEDIFF(MONTH, LogDate, t1.LogDate) between 0 and 6)
from tbl t1

-- update
update t1 set Temp6MonthHighAverage = (select AVG(HighTemp) 
                          from tbl where 
                          DATEDIFF(MONTH, LogDate, t1.LogDate) between 0 and 6)
from tbl t1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T04:18:08.120

您当然可以通过简单的更新来做到这一点：

```
UPDATE table SET Temp6MonthHighAverage = 
  (SELECT AVG(HighTemp) FROM table t2 WHERE
     t2.LogDate <= table.LogDate
     AND t2.LogDate > DATEADD(m, -6, table.LogDate)
  ) 
```

为避免不断地重新计算（因为过去不会改变），只需`WHERE Temp6MonthHighAverage IS NULL`在末尾添加一个，并且可以根据需要运行相同的 UPDATE 以在添加新日期时填补空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:12:48.040

看看这样的东西

```
DECLARE @Table TABLE(
    LogDate DATETIME,
    HighTemp INT,
    Temp6MonthHighAverage INT
)

INSERT INTO @Table SELECT '01 Jan 2000', 15, NULL
INSERT INTO @Table SELECT '01 May 2000', 14, NULL
INSERT INTO @Table SELECT '01 Jun 2000', 13, NULL
INSERT INTO @Table SELECT '01 Jul 2000', 12, NULL
INSERT INTO @Table SELECT '01 Dec 2000', 17, NULL

SELECT  *
FROM    @Table

;WITH DistinctDates AS (
        SELECT  DATEADD(month,-6,LogDate) StartDate,
                LogDate EndDate,
                HighTemp
        FROM    @Table
)
, Aggregates AS (
        SELECT  dd.EndDate LogDate,
                dd.HighTemp,
                MAX(t.HighTemp) Temp6MonthHighAverage
        FROM    DistinctDates dd LEFT JOIN
                @Table t    ON  t.LogDate BETWEEN dd.StartDate AND dd.EndDate
        GROUP BY    dd.EndDate,
                    dd.HighTemp
)
UPDATE  @Table
SET     Temp6MonthHighAverage = a.Temp6MonthHighAverage
FROM    @Table t INNER JOIN
        Aggregates a    ON  t.LogDate = a.LogDate

SELECT  *
FROM    @Table 
```

# jquery - jQuery 慢样式更新

> ID：12136089
> 
> 赞同：0
> 
> 时间：2012-08-27T04:02:22.117
> 
> 标签：jquery, resize, window

我在让我的调整大小事件同步时遇到了一些麻烦。基本上， $M.resize 会更新 div 的宽度（css），然后我希望 $API.resize 读取新的大小并相应地更新其元素。但是，如果我设置窗口调整大小事件（见下文），然后立即触发窗口的调整大小事件，$API.resize 不会获得任何新的宽度信息——几乎就像 $M.resize 还没有完成更新一样。$API.resize 通过 $("#main").css("width"); 获取新的宽度信息 我可以让它工作的唯一方法是使用下面的解决方法 setTimeout .. 有没有更好的方法来做到这一点？

```
// on page load
$(function () {
    $(window).resize(function () {
        $M.resize();
        $API.resize();
    });
    setTimeout(function () {
        $(window).resize();
    }, 100);
});

// $API.resize
function () {
    var pageWidth = $M.width();
    console.log("pageWidth = " + pageWidth);
    $("#atmoGrid").css("width", pageWidth);
    $(".atmoSector")
        .css("width", pageWidth/5-2)
        .css("height", pageWidth/5-2);
}

// $M.resize
function () {
    // refresh screen dimensions
    width = Math.min(screen.availWidth, window.innerWidth);
    height = Math.min(screen.availHeight, window.innerHeight);
    smallScreen = (width < smallWidth);
    fontScale = (smallScreen) ? 3 : 1;

    // check if screen is small
    if (smallScreen) {
        $("#main").css("width", "100%");
    } else {
        $("#main").css("width", smallWidth + "px")
    }
    $("#main").css("font-size", $M.font(18));
}

// $M.width
function () {
    var width = $("#main").css("width");
    return parseInt(width);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:31:38.417

尝试这个：

```
// on page load
$(function () {
    $(window).resize(function () {
        $M.resize();
    });
});

// $API.resize
function (mWidth, mHeight) {
    var pageWidth = mWidth;
    console.log("pageWidth = " + pageWidth);
    $("#atmoGrid").css("width", pageWidth);
    $(".atmoSector")
        .css("width", pageWidth/5-2)
        .css("height", pageWidth/5-2);
}

// $M.resize
function () {
    // refresh screen dimensions
    width = Math.min(screen.availWidth, window.innerWidth);
    height = Math.min(screen.availHeight, window.innerHeight);
    smallScreen = (width < smallWidth);
    fontScale = (smallScreen) ? 3 : 1;

    // check if screen is small
    if (smallScreen) {
        $("#main").css("width", "100%");
    } else {
        $("#main").css("width", smallWidth + "px")
    }
    $("#main").css("font-size", $M.font(18));

    $API.Resize(smallWidth, someheight);
}

// $M.width
function () {
    var width = $("#main").css("width");
    return parseInt(width);
} 
```

hth

# shopify - 私有应用的 Shopify API 调用限制

> ID：12136090
> 
> 赞同：2
> 
> 时间：2012-08-27T04:02:23.177
> 
> 标签：shopify

我们正在开发一个私人应用程序，用于我们的 Shopify 商店。为了确保我们不会超过 API 限制，我们为每个 API 调用实现了一个基本的可配置延迟。

我们从每 5 分钟 500 次调用的记录 API 限制开始，这映射到每次调用 600 毫秒的延迟。但是，在 50 次调用之后，服务器不会响应 HTTP GET。

即使我们将每个 API 调用的延迟增加到 1200 毫秒，它在 50 次调用后仍然失败。

我们在处于试用期的商店 (myfirststore-3) 上使用 Shopify4J。

我查看了 wiki、api 文档、论坛和 SO——但除了官方的 500/5 分钟限制外，没有提及任何其他限制。

我们是否遇到了私人应用程序或试用商店的不同呼叫限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:52:22.290

似乎问题出在 java 客户端实现本身。我们通过在循环中添加所有初始化来解决这个问题。

进行该更改后，我们能够按照记录每 5 分钟进行多达 500 次 API 调用。

我们已将 apache httpclient 库添加到 Shopify4J 包中，以使其在我们的后端服务器上工作，它可能需要一些调整。当然，这不是我们问题的长期解决方案，但它确实回答了这个问题。

一旦我们找出代码中的问题，将在此处发表评论。

# c# - 如何提取网页中加载的额外内容

> ID：12136093
> 
> 赞同：0
> 
> 时间：2012-08-27T04:02:30.630
> 
> 标签：c#, parsing, c#-4.0, html-parsing, web-scraping

如何提取网页中加载的额外内容，这些内容在查看页面源代码中不可见。正在使用 ajax 加载额外的内容。可以使用 firebug 在 NET 选项卡下查看此数据。如何使用 c# 代码提取此数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:56:57.587

首先取决于您的应用程序，如果您使用 c# 应用程序作为客户端来读取网页，那么在您放入 javascript 引擎之前，ajax 内容可能不可见。

如果您正在为上述页面提供服务，则只需记录服务器的请求响应。

更具体的问题将不胜感激

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:51:16.210

额外的内容是由 ajax 动态生成的（例如：Gridview 生成为表格），它存储在浏览器的内存中。并且可以通过客户端调试工具查看（IE有开发者工具选项）。
回发后，所有控件的值都可用于 C#。

如果您说的是额外内容，您能否澄清一下您要使用 c# 提取的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T17:25:49.730

两种方式：

1-您可以使用`webbrowser`加载相同的页面并获取`active document`.

2-您可以复制`ajax call made`, 并使用它来获取附加到文档的额外位。

并阅读您上面的linkedin示例：

当您选择复选框时，将进行 ajax 调用，这会带回结果并填充表格。您可以使用 firebug 控制台窗口查看该调用并查看 post 参数并复制它们以获得相同的结果。

# asp.net-mvc - MVC4中的单元测试自定义actionresults不调用executeresult

> ID：12136095
> 
> 赞同：0
> 
> 时间：2012-08-27T04:03:02.117
> 
> 标签：asp.net-mvc, unit-testing, asp.net-mvc-4

似乎随着 MVC4 的发布版本发生了一些变化，导致当从单元测试中测试操作结果时，不会调用自定义操作结果中的 ExecuteResult 方法。

这是一个非常人为的示例，适用于 MVC3 和 MVC4 的早期版本。从单元测试运行时，执行结果永远不会“执行”。我在这里想念什么？其他人看到这种行为吗？

### 行动结果

```
public class SomeActionResult : ActionResult
{

    public override void ExecuteResult(ControllerContext context)
    {
        if (context == null)
        {
            throw new ArgumentNullException("null context");
        }

        var view = new ViewResult {ViewName = "index"};
        view.ExecuteResult(context);

    }

} 
```

### 控制器动作

```
 [HttpPost]
    public ActionResult Index(string something)
    {
        return new SomeActionResult();
    } 
```

### 单元测试（使用 MVCContrib）

```
 [Test]
    public void ShouldWork_but_doesnt_in_mvc4()
    {

        var controller = new HomeController();

        var result = controller.Index("test");

        result.AssertViewRendered();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:57:08.973

> 这是一个非常人为的示例，适用于 MVC3 和 MVC4 的早期版本。

你一定是弄错了什么。这在 MVC 3、2、1 中也不起作用。这是预期的。因为单元测试意味着您正在孤立地对某些东西进行单元测试。因此，您有一个用于控制器操作的单元测试和另一个用于测试您的自定义操作结果的单元测试。

对动作结果`Index`调用`ExecuteResult`结果方法的不是动作。在执行用户请求期间，这在 MVC 执行管道中发生得更高。在您的单元测试中，您只是调用该`Index`方法。

因此，为了对该控制器操作进行单元测试，您只需断言它返回正确类型的操作结果：

```
[Test]
public void Ensure_That_Index_Action_Return_SomeActionResult()
{
    // arrange
    var controller = new HomeController();

    // act
    var result = controller.Index("test");

    // assert
    result.AssertResultIs<SomeActionResult>();
} 
```

在另一个单元测试中`SomeActionResult`，您将手动调用 ExecuteResult 方法并断言此自定义操作结果使用`ViewResult`.

此外，让您的自定义操作结果从 ViewResult 派生而不是在 ExecuteResult 方法中手动实例化 ViewResult 并设置 ViewName 似乎更合适：

```
public class SomeActionResult : ViewResult
{
    public override void ExecuteResult(ControllerContext context)
    {
        this.ViewName = "Index";
        base.ExecuteResult(context);
    }
} 
```

# java - jsoup table 获取特定元素

> ID：12136101
> 
> 赞同：0
> 
> 时间：2012-08-27T04:04:01.970
> 
> 标签：java, jsoup

```
Document doc = Jsoup.connect(studentprofiles).get();
Element tables = doc.select("table");
Elements myTdsstudent = tables.select("tr td:eq(1)"); 
```

我能够在 eq(1) 中一个接一个地得到所有细节。

在示例中：

```
Table:    
GK   99    
NS   88    
PS   55 
```

当我执行 eq(0) 时，我在 HTML 表中得到 GK、NS、PS。当我执行 eq(1) 时，我得到 99 88 55。

有没有办法让我可以使用 JSOUP 阅读

```
gk=99
ns=88
PS=55 
```

现在我得到了 2 个不同的字符串数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:57:29.153

```
Elements myTdsstudent = tables.select("tr"); 
```

现在迭代`myTdsstudent`并使用它

```
for (Element myTdsstudentIterator: myTdsstudent) {
    System.out.println(myTdsstudentIterator.select("td:eq(0)") + " = " + myTdsstudentIterator.select("td:eq(1)"));
} 
```

# r - R ggplot2中连续轴上的字符值

> ID：12136103
> 
> 赞同：4
> 
> 时间：2012-08-27T04:04:30.523
> 
> 标签：r, axes, ggplot2

使用 ggplot2 绘制连续数据时，有没有办法在轴上包含字符值？我审查了以下数据：

```
 x  y Freq
1 -3 16    3
2 -2 12    4
3  0 10    6
4  2  7    7
5  2  4    3 
```

最后一行数据是右删失的。我正在用下面的代码绘制它以生成以下图：

```
a1 = data.frame(x=c(-3,-2,0,2,2), y=c(16,12,10,7,4), Freq=c(3,4,6,7,3))
fit = ggplot(a1, aes(x,y)) + geom_text(aes(label=Freq), size=5)+
  theme_bw() +
  scale_x_continuous(breaks = seq(min(a1$x)-1,max(a1$x)+1,by=1),
                     labels = seq(min(a1$x)-1,max(a1$x)+1,by=1),
                     limits = c(min(a1$x)-1,max(a1$x)+1))+
  scale_y_continuous(breaks = seq(min(a1$y),max(a1$y),by=2)) 
```

![在此处输入图像描述](../Images/7c8a3d5506c663b611a65c0876865335.png)

(2,4) 处的 3 个点是右删失的。我希望它们用相应的 xaxis 刻度线'> = 2'而不是 3 绘制在右侧一个单位。如果可能的话，有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T14:24:59.800

这是很有可能。我破解了数据，所以`2,4`它是`3,4`. 然后我修改了你的标签，只要它们与中断的长度相同，就可以是你想要的任何东西。

```
ggplot(a1, aes(x,y)) + geom_text(aes(label=Freq), size=5)+
theme_bw() +
scale_x_continuous(breaks = seq(min(a1$x)-1,max(a1$x),by=1),
                   labels = c(seq(min(a1$x)-1,max(a1$x)-1,by=1), ">=2"),
                   limits = c(min(a1$x)-1,max(a1$x)))+
scale_y_continuous(breaks = seq(min(a1$y),max(a1$y),by=2)) 
```

![在此处输入图像描述](../Images/fe0ecaf5bebd6f5d22c7fd4c0c20e147.png)

# ruby-on-rails - Rails Link_to with Loop - RESTful 路由

> ID：12136104
> 
> 赞同：0
> 
> 时间：2012-08-27T04:04:32.833
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我希望你能回答一个问答应用程序的问题。Rails 还是很新的。它应该相当简单，但是每当我尝试创建链接列表以显示该点到循环中的 RESTful 路由时，都会遇到一个小问题。

这是控制器的代码：

users_controller.rb

```
def list
  @user = User.find(params[:id])
  @users = User.find(:all, :select => :name)
end

def quiz
  @user = User.find(params[:id])
  @users = User.find(:all, :select => :name)
end 
```

这是视图的代码：

```
<% if current_user.admin? %>
  <ul>
    <%- @users.each do |link| %>
      <li><%= link_to link.name, quiz_user_path(@user, @quiz) %></li>
    <% end %>
  </ul>
<% end %> 
```

这是路线的代码：

```
resources :users do 
  get 'quiz', :on => :member
end 
```

我想要做的是根据用户名生成单独的链接，然后链接到该特定用户的测验页面。在我看来，我很确定需要为代码更改某些内容。现在，我得到的只是一个指向当前用户的链接，在这种情况下是用户 4。（`http://localhost:3000/users/4/quiz`）

感谢您提供解决此问题的任何快速提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:47:42.520

Currently you are using the same @user instance variable for each link. Instead you need to use the variable set in your loop. The code below should work as expected:

```
<% if current_user.admin? %>
  <ul>
    <%- @users.each do |user| %>
      <li><%= link_to user.name, quiz_user_path(user) %></li>
    <% end %>
  </ul>
<% end %> 
```

I also renamed the variable from `link` to `user`, for clarity, since your iterating through users not links.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:08:30.203

这是因为在您当前的路线图中`quiz_user_path`只需要一个变量。尝试删除`@quiz`.

# c - 重定向串行控制台，用于 telnet/ssh 访问我的 linux 机器

> ID：12136110
> 
> 赞同：0
> 
> 时间：2012-08-27T04:05:40.410
> 
> 标签：c, linux

我必须重定向 linux 机器的串行控制台以进行 telnet 和 ssh 访问。我打算编写 ac 程序来完成这个功能。

根据我的想法，我应该编写 ac 程序，该程序将调用 ioctl 调用以在 telnet/ssh 访问会话时重定向控制台。但我不确定实现这一点的确切 ioctl 调用。请提出一些想法。

谢谢

# sql - Ruby On Rails：如何将 find 与 has_one 关系一起使用

> ID：12136112
> 
> 赞同：0
> 
> 时间：2012-08-27T04:05:53.480
> 
> 标签：sql, ruby-on-rails, activerecord

我有两个模型 A 和 B，其中：

A has_one B

因此，我向 A 添加了一个外键，它将 A 的每个实例与 B 实例的 id 相关联。请注意，我确实知道希望这是一个 1-1 关系。

如何使用 A.find() 来获取与具有 B 的某个属性的 B 实例关联的所有 A 实例（例如 B.name）？

我知道这可以通过两个表之间的 SQL 连接来完成，但是在 ROR 中是否有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:49:44.007

假设您有正确的关联设置：

```
time_range = (Time.now.midnight - 1.day)..Time.now.midnight
Client.joins(:orders).where(:orders => {:created_at => time_range}) 
```

这是来自[Active Record Querying 指南](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:25:30.330

`has_one`关联在归属模型中需要外键。请查看 RailsGuides - [http://guides.rubyonrails.org/association_basics.html#the-has_one-association](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)

# c - Malloc 故障

> ID：12136114
> 
> 赞同：0
> 
> 时间：2012-08-27T04:07:15.373
> 
> 标签：c

这段代码导致分段错误：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define SLIDINGWINDOW 5
#define SEGMENTSIZE 100

int main() {
    char** send_buffer = (char**) malloc (SLIDINGWINDOW);
    int i;
    for (i = 0; i<SLIDINGWINDOW; ++i) {
        send_buffer[i] = (char*) malloc (SEGMENTSIZE);

    }
    for (i = 0; i<SLIDINGWINDOW; ++i) {
        strcpy(send_buffer[i], "Hello, world");
        printf("%s\n", send_buffer[i]);
        fflush(NULL);
    }
} 
```

奇怪的是，如果你把第二个循环的内容放到第一个循环中，它就起作用了！

谁能明白为什么会这样？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T04:10:10.827

传递给的大小`malloc()`不正确。你可能的意思是：

```
char** send_buffer = malloc (SLIDINGWINDOW * sizeof(send_buffer[0])); 
```

和

```
send_buffer[i] = malloc (SEGMENTSIZE * sizeof(send_buffer[i][0])); 
```

这是因为 to 的参数`malloc()`是您要求的字节数，因此您需要将所需的长度乘以元素的大小。

此外，您还应该检查从返回的值 `malloc()`is not `NULL`。

请注意，我已经从 malloc 调用中删除了强制转换 - 在 C 中，强制转换不是必需的，并且[有时可以掩盖错误。](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

进一步的改进是用于[`strncpy()`](http://www.manpagez.com/man/3/strncpy/)确保您不会在段结束后写入字符：

```
strncpy(send_buffer[i], "Hello, world", SEGMENTSIZE); 
```

请注意，如果源字符串大于`SEGMENTSIZE`，则目标字符串不会以空值结尾。您可以通过以下方式解决此问题：

```
send_buffer[i][SEGMENTSIZE - 1] = '\0'; 
```

之后`strncpy()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:10:53.137

这将只为`SLIDINGWINDOW` *字节*产生足够的空间：

```
malloc (SLIDINGWINDOW) 
```

您需要足够的空间来存放`SLIDINGWINDOW` *指针*：

```
malloc (SLIDINGWINDOW * sizeof(char*)) 
```

你的第二个`malloc()`是幸运的；`sizeof(char)`总是`1`。

# c# - C#从两个xml文件中选择读取

> ID：12136118
> 
> 赞同：3
> 
> 时间：2012-08-27T04:08:40.380
> 
> 标签：c#

我想根据comboBox19从两个文件中进行选择，如下所示：

```
 if (comboBox19.Text == "01")  XmlReader reader = new XmlReader ("C:\\Ticket Format ID01.xml");
           else if (comboBox19.Text == "02" ) XmlReader reader = new XmlReader("C:\\Ticket Format ID02.xml");
            while (reader.Read())
            {
                if (reader.IsStartElement())
                {
                    switch (reader.Name)
                    {
                       case:// case coding here
                     }
                }
           } 
```

但是我编译的时候有错误。错误消息是“嵌入式语句不能是声明或标记语句”。各位大佬怎么解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T04:11:39.547

```
XmlTextReader reader = null; 

if (comboBox19.Text == "01")   
    reader = new XmlTextReader ("C:\\Ticket Format ID01.xml");
else if (comboBox19.Text == "02" ) 
    reader = new XmlTextReader ("C:\\Ticket Format ID02.xml"); 
```

或者，如果您的文件都遵循相同的约定；

```
var fileName = String.Format("C:\\Ticket Format ID{0}.xml", comboBox19.Text);
var reader = new XmlTextReader (fileName); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T04:13:34.703

您必须在使用之前声明阅读器引用变量，或者只需将此代码包装在花括号`{}`（块）周围。

```
XmlReader reader=null;

if(comboBox19.Text == "01")
 reader =XmlReader.Create(@"C:\Ticket Format ID01.xml");
else 
if(comboBox19.Text == "02" ) 
 reader =XmlReader.Create(@"C:\Ticket Format ID02.xml"); 
```

或者

```
 string fileName=string.Empty;

  if(comboBox19.Text == "01")
      fileName=@"C:\Ticket Format ID01.xml";
  else 
  if(comboBox19.Text == "02" ) 
      fileName=@"C:\Ticket Format ID02.xml";

  XmlReader reader=null;
  if(!string.IsEmptyOrNull(fileName))
    {
       reader=XmlReader.Create(fileName);
    } 
```

或者

```
 using(XmlReader reader=XmlReader.Create(fileName)) 
 {
  ///
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T04:11:44.523

您需要将 XmlReader 的声明移到 if 语句之外，并且由于 XmlReader 是一个抽象类，您不能直接从它创建实例。使用`XmlTextReader`或静态方法`XmlReader.Create`。您还应该进行比较，`ComboBox.SelectedValue`而不是`ComboBox.Text`：

```
XmlReader reader;
if (comboBox19.SelectedValue == "01")  
  reader = new XmlReader.Create("C:\\Ticket Format ID01.xml");
else if (comboBox19.SelectedValue == "02" )
  reader = new XmlReader.Create("C:\\Ticket Format ID02.xml"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-27T04:16:28.307

```
XmlReader reader = null;
if (textBox1.Text == "01")  reader = new XmlTextReader ("C:\\Ticket Format ID01.xml");
else if (textBox1.Text == "02") reader = new XmlTextReader("C:\\Ticket Format ID02.xml"); 
```

[XMLReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)是一个**抽象**类，因此您无法创建它的实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T04:17:41.723

`{}`如果我们想将其范围限制在一行，则 if 语句不是强制性的。但是，我们不能将变量声明作为其后面的唯一行。这是因为如果条件结果为假，则永远不会创建变量。

所以，在条件之前声明 XMLReader。或将您的条件代码包装在`{}`

```
 XmlReader reader = null;
if (textBox1.Text == "01")
  reader = new XmlTextReader ("C:\\Ticket Format ID01.xml");
else if (textBox1.Text == "02")
 reader = new XmlTextReader("C:\\Ticket Format ID02.xml"); 
```

有关详细信息，请参阅[此链接](http://www.vijaymukhi.com/documents/books/csadv/chap2.htm)。

# php - PHP序列化/反序列化类似Objective-C中的方法

> ID：12136119
> 
> 赞同：1
> 
> 时间：2012-08-27T04:08:46.590
> 
> 标签：php, objective-c, serialization

我已经使用序列化方法在 PHP 中序列化了一个字符串

```
$serializedResult = serialize($value); 
```

如何在 Objective-C 中反序列化这个序列化的字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:12:52.470

我认为没有针对 Objective C 的序列化 PHP 对象解析器。

但是，您可以改用 JSON。在 PHP 端使用`json_encode`，在 Objective C 端参见：[http ://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c](http://blog.zachwaugh.com/post/309924609/how-to-use-json-in-cocoaobjective-c)

或者正如 Tommy 指出的现在的原生实现：http: [//developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:43:07.283

我也遇到同样的问题。作为解决方案，我编写了解析器来完成这项工作。它同时具有序列化和反序列化功能。您可以从此[链接](https://github.com/hasinthajanaka/Objective-C-php-Serializer.m)获取。

这是序列化的测试示例，RTSerializer *serializer=[[RTSerializer alloc]init];

```
 NSMutableDictionary *pack=[NSMutableDictionary dictionary];
  [pack setValue:@"id" forKey:@"3"];
  [pack setValue:@"tariffid" forKey:@"152"];
  [pack setValue:@"rgid" forKey:@"1"];
  [pack setValue:@"name" forKey:@"Test"];

   NSString *_data=@"";
   _data=[serializer pack inString:_data]; 
```

反序列化的例子，

```
 id object=[serializer deserialize:@"a:1:{i:0;a:4:{s:2:\"id\";s:1:\"3\";s:8:\"tariffid\";s:3:\"152\";s:4:\"rgid\";s:1:\"1\";s:4:\"name\";s:4:\"Test\";}}"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T04:14:45.497

不要认为这是可能的。根据 PHP 手动序列化方法应该只在 PHP 脚本中使用。

您应该使用一些开放格式，例如 JSON。或者您可以用两种语言创建自己的“序列化”实现。

# animation - 关键帧中的 CSS3 重叠 div 标签

> ID：12136125
> 
> 赞同：0
> 
> 时间：2012-08-27T04:10:27.510
> 
> 标签：animation, css, html

我试图制作一个可以滑入和滑出的简单动画菜单，但我偶然发现让 div 根据需要重叠。

[http://jsfiddle.net/bluestreak/eQcsc/](http://jsfiddle.net/bluestreak/eQcsc/)

它目前的动画效果很好，但没有超过一圈。我已经尝试了各种定位组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:16:05.080

给你所有的信息菜单 ID 位置：绝对

# asp.net - WebDeploy 和 SetACL - 在有大量文件/文件夹的情况下太慢

> ID：12136131
> 
> 赞同：5
> 
> 时间：2012-08-27T04:11:25.497
> 
> 标签：asp.net, acl, web-deployment, one-click-web-publishing

我们有一个 ASP.Net MVC3 站点，我们使用 Web 部署在 IIS 上发布该站点。

在站点根目录下，我们有一个`"Data"`文件夹，用于存储上传的文件及其处理结果。因此，目前有很多文件/文件夹`"Site Root/Data"`。

Web 部署在发布时尝试更改 ACL 权限，在我们的案例中需要超过 10 分钟（大量文件/文件夹）。

现在我们正在使用

```
<includesetaclproviderondestination>False</includesetaclproviderondestination> 
```

完全禁用 setacl 提供程序，但有时能够通过 web 部署更改新添加的目录的权限很方便。

所以，问题是——在这种情况下，除了关闭 aclprovider 之外，我们还能做什么？有没有办法使用 web-deploy 以非递归方式设置 acl 权限以使其更快？

# ios - 如何在 iOS 应用程序中为不同的语言使用不同的字体？

> ID：12136135
> 
> 赞同：12
> 
> 时间：2012-08-27T04:11:44.983
> 
> 标签：ios, localization, fonts, uiappfonts

我在一个场景中，我想在我的 iOS 应用程序中为不同的语言使用不同的字体。

起初，我想使用 .ttf 文件的本地化版本。我尝试在不同语言的本地化项目文件夹中添加本地化的 .ttf 文件，其中安装了相同的文件名和字体名。它没有用。

然后我查看了不同语言的 InfoPlist.strings 文件。在我看来，它是主 Info.plist 中“键”字符串的键值组合。我找到了针对“UIAppFonts”键的字体条目，该键是一个数组。我无法弄清楚如何将本地化字体文件名作为数组放入 InfoPlist.strings 中。

作为最后的手段，我正在考虑在 Localizable.stings 文件中添加本地化字体名称，以根据当前语言环境选择字体名称，并在我使用字体的地方替换项目中的所有出现。（显然这很麻烦）。喜欢：

```
UIFont *font = [UIFont fontWithName:NSLocalizedString(@"font-name", nil) size:16]; 
```

如果有人以前这样做过，请提供帮助。如果能够以某种方式实现前两个想法中的一个，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:10:49.870

实际上，我通过在项目中和针对 UIAppFonts 的 plist 中为不同的语言添加不同的字体文件来做到这一点。然后我介绍了：

```
"fontName" = "English Font";
"fontName" = "Russian Font"; 
```

在每种支持的语言的 Localizable.strings 中

然后我使用以下方法访问它：

```
UIFont *font = [UIFont fontWithName:NSLocalizedString(@"fontName", nil) size:16]; 
```

正如我在问题中提到的，其他两种方法似乎更优雅。有关这些的任何解决方案都将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:30:45.813

你在 UIAppFonts 的正确轨道上。首先，将 .ttf 文件添加到 Resources 文件夹下的项目中。然后，您需要在 Info.plist 中添加一个新行（不是 InfoPlist.strings？）。您可以通过单击 plist 中最后一行最右侧的加号 (+) 来执行此操作，或者我认为您可以按住 Control 并单击任何其他属性并选择 New。从第一列的下拉列表中选择 UIAppFonts，它的左侧应该有一个箭头 (>)。单击此箭头以展开属性，您应该会看到 item0，在此处输入 .ttf 文件的名称。必要时按住 Control 单击以添加更多项目。

这会将您的自定义字体添加到应用程序中。请务必注意，当您使用 fontWithName 加载它们时，您在 @"font-name" 中提供的名称可能与 .ttf 文件的名称不同（通常也不是）。相反，它是出现在字体册中预览 --> 显示字体信息下的全名。

这一切都很好，但它没有本地化任何东西。您可以使用类似下面的行来查询语言代码，然后根据它决定要加载的字体：

```
NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T12:29:59.783

为了在应用程序中使用特定`UIFonts`的内容，我创建了`UIButton`and的扩展`UILabel`。因为我有同样的问题，`UIFonts`为不同的语言选择不同的，我还在我的扩展中插入了一个检查。看起来像：

```
@implementation MyButton{
    NSString *_language;
}

- (void)awakeFromNib{

    _language = [[NSLocale preferredLanguages] objectAtIndex:0];        
    [self setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [self.titleLabel setFont:[self whichFontShouldBeUsed]];
}

- (UIFont *)whichFontShouldBeUsed{

    UIFont *fontToUse = [UIFont fontWithName:@"Basic Font"
                                        size:self.titleLabel.font.pointSize];

    if( [_language isEqualToString:@"tr"] &&
        [_language isEqualToString:@"pl"] ){
        fontToUse = [UIFont fontWithName:@"Another Font" 
                                    size:self.titleLabel.font.pointSize];
    } else if( [_language isEqualToString:@"ja"] &&
               [_language isEqualToString:@"tr"] ){

        fontToUse = [UIFont boldSystemFontOfSize:self.titleLabel.font.pointSize];
    } else if( [_language isEqualToString:@"ru"] ){
        fontToUse = [UIFont fontWithName:@"Another Font"
                                    size:self.titleLabel.font.pointSize + 2.0f];
    }

    return fontToUse;
} 
```

这样您就可以随时`UIFonts`自动切换。接下来，您只需在`Interface Builder`. 选择`UIButton`您想要的并添加您的自定义`UIButton`类：

![在此处输入图像描述](../Images/e8f707286d135c12fb2bfdf664b8be37.png)

因为`UILabel`您将使用setTextColor`setText`代替setTitleColor`。`setTitleLabel" and` `instead of`

### 有关preferredLanguages 的更多信息，[请查看此网站](http://eureka.ykyuen.info/2010/06/16/iphone-get-the-iphone-preferred-language-codes/)，当然不要忘记将您`fonts`的项目添加到Target 以及`plist`.

# php - PHP/AJAX 邮件联系表 - 部分电子邮件消息未显示

> ID：12136136
> 
> 赞同：1
> 
> 时间：2012-08-27T04:11:59.193
> 
> 标签：php, jquery, ajax, email

好的，所以我有一个使用 PHP 向电子邮件地址发送邮件的表单。我还有一个 jQuery/AJAX 部分，它可以在不重新加载页面的情况下验证表单并执行 PHP。由于某种原因，来自兴趣下拉列表的产品兴趣值未通过电子邮件传递。我错过了什么？我一直在把自己逼疯。谢谢！

这是表格：

```
 <div class="contact-form">
            <div class="row">
                    <div class="field"><input type="text" id="first" name="first" class="input" placeholder="First Name"></div>
                    <div class="field"><input type="text" id="last" name="last" class="input" placeholder="Last Name"></div>
                    <div class="field"><input type="text" id="telephone" name="telephone" class="input" placeholder="Phone Number"></div>
            </div>
            <div class="row">
                    <div class="field"><input type="email" id="email" name="email" class="input" placeholder="E-mail"></div>
                    <div class="field">
                                        <select class="select" name="interest" id="interest">
                                            <optgroup label="Countwise Products:">
                                                  <option value="I-Count">I-Count</option>
                                                  <option value="Q-Count">Q-Count</option>
                                                  <option value="D-Count">D-Count</option>
                                                  <option value="Z-Count">Z-Count</option>
                                             </optgroup>
                                        </select> 
                    </div>
                    <input type="submit" value="Get Better Results!" class="button3 dark-blue submit"/>
                    <span class="error" style="display:none">All Fields Are Required!</span>
                    <span class="success" style="display:none">Contact Form Submitted Successfully</span>   
            </div>
        </div>

    </form> 
```

这是标题为 header_form_email.php 的 PHP

```
<?php

// POST Variables
//Name
$first = $_POST['first'];
$last = $_POST['last'];
//Phone
$telephone = $_POST['telephone'];
//E-mail 
$email = $_POST['email'];
//Interest
$interest= $_POST['interest'];

// Contact subject
$subject = "CountWise Website - Sales Request";

$name =  "$first" . " " . "$last";

$message = "You have received a new information request from Countwise.com\n".
"Name: " . "$name\n".
"Phone: " . "$telephone\n".
"Email: " . "$email\n".
"Product Interest: " . "$interest";

// From
$mailheader = "From: $email \r\n";

// Enter your email address
$to ="kelly@drastikdesigns.com";

$send_contact=mail($to,$subject,$message,$mailheader);

// Check, if message sent to your email
if($send_contact){
echo "<strong>We have received your information and will be in contact you shortly. Thank you.</strong>" ;
}
else {
echo "ERROR";
}
?> 
```

这是 AJAX

```
$(function() {
    $(".submit").click(function() {
        var first = $("#first").val();
        var last = $("#last").val();
        var telephone = $("#telephone").val();
        var email = $("#email").val();
        var interest = $("#interest").val();
        var dataString = 'first=' + first + '&last=' + last + '&telephone=' + telephone + '&email=' + email + '&interest' + interest;

        if (first == '' || last == '' || telephone == '' || email == '') {
            $('.success').fadeOut(200).hide();
            $('.error').fadeOut(200).show();
        }
        else {
            $.ajax({
                type: "POST",
                url: "http://www.drastikdesigns.com/clients/countwise/php/header_form_email.php",
                data: dataString,
                success: function() {
                    $('.success').fadeIn(200).show();
                    $('.error').fadeOut(200).hide();
                }
            });
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T04:15:05.517

你忘了等号：

```
'&interest=' + interest; 
```

顺便说一句，为什么不这样做：

```
data:$("#formid").serialize(), 
```

这将为您节省大量时间和头痛。第二点，在查看通过 ajax 发送的标头时，使用 firebug/developers tools/chrome 肯定会有所帮助。

# iis-7 - PUT 和 DELETE 在 Windows 2008 Server IIS 7 和 7.5 中为 asp.net webapi 返回 404

> ID：12136143
> 
> 赞同：6
> 
> 时间：2012-08-27T04:13:02.507
> 
> 标签：iis-7, asp.net-web-api

我在使用 Windows 2008 服务器 IIS时遇到**500 - 内部服务器错误。**`PUT/DELETE`我得到的回应是：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>500 - Internal server error.</title>
<style type="text/css">
<!--
Formatting 
-->
</style>
</head>
<body>
<div id="header"><h1>Server Error</h1></div>
<div id="content">
 <div class="content-container"><fieldset>
  <h2>500 - Internal server error.</h2>
  <h3>There is a problem with the resource you are looking for, and it cannot be displayed.</h3>
 </fieldset></div>
</div>
</body>
</html> 
```

当我检查我的 WebAPI 的自定义日志时，我发现调用甚至没有命中服务。

我之前的经验是**404 - Not Found** for `PUT`and`DELETE`并且这种行为在 Win7 和 Win 2008 Server 中是一致的。为此，[我找到了这个修复：](https://stackoverflow.com/questions/10099270/asp-net-web-api-returns-404-for-put-only-on-some-servers)

我应用了修复程序并`PUT/DELETE`在 Windows 7 上工作。但之后，当在 win2008 服务器的 IIS 7 上部署相同的服务时，我没有得到 400。但我从 IIS 或之前得到**“500 - 内部服务器错误” 。**

相同的代码在 Windows 7 (IIS 7.5) 上完美运行。

有关解决此类问题的任何线索？

**2012 年 8 月 29 日编辑：**

通过在 IIS7 中启用故障跟踪来检测**500-Internal Server Error**的问题。修复就是这个配置。

```
<modules runAllManagedModulesForAllRequests="true">
  <remove name="WebDAVModule" />
</modules>
<handlers>
  <remove name="WebDAV" />
</handlers> 
```

基本上我们需要从模块中删除“WebDAVModule”，并从处理程序中删除“WebDAV”。但现在我又回到了我的旧问题**404-Not Found**。现在，即使在进行了以下配置后，我也无法让 PUT/DELETE 工作：

```
 <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
  <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*" verb="GET,HEAD,POST,DEBUG,PUT,DELETE" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" /> 
```

不同寻常的是，相同的 Web 应用程序可以在同一系统相同的 IIS 上单独托管（不在默认网站下）完美运行。所以我怀疑这是由于某些父网站配置过滤了 PUT/DELETE 请求。

有同样的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T18:51:08.757

在为一个非常相似的问题苦恼之后，我找到了这个解决方案： [http ://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs](http://www.iis.net/configreference/system.webserver/security/requestfiltering/verbs)

使用请求过滤设置，我能够在 IIS 中全局允许 PUT 和 DELETE 动词，这解决了我的问题。它结束了我对 404.6 错误的噩梦。（顺便说一句，我没有安装 webDAV 并将动词添加到 ExtensionlessUrlHandler）

希望这些信息可以节省一些时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-08T09:39:30.493

我使 Neil S 的信息更准确：

1.  从“模块”中删除 WebDAV
2.  从“处理程序映射”中删除 WebDAV
3.  我从 IIS 组件中删除 WebDAV 以确保 WebDAV 不存在并重新启动 Windows
4.  转到“**处理程序映射**”并找到**ExtensionlessUrlHandler**（适用于 32 和 64 和集成），打开它并转到第二章“动词”的“请求限制”并将一些您需要的方法放入字符串。我有下一个：GET、HEAD、POST、DEBUG、PUT 我重复三个“ExtensionlessUrlHandler”状态的更改。
5.  我不更改请求过滤设置

因此，Put 方法的 404 和 405 错误消失了，我收到 200 状态。

这个解决方案对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-11T14:09:15.440

我最近在我的 Win Server 2008 R2 / IIS 7.5 上遇到了同样的问题，我花了几个小时才发现它是由**LiveStreamingHandler**引起的。IIS 上的**LiveStreamingHandler**模块导致HTTP 动词错误。`PUT``DELETE`

使用**Add and Remove 程序**卸载**Media Services 4.1**并重新启动服务器可解决此问题。希望这对某人有所帮助。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T15:55:31.420

尝试通过添加打开自定义错误

```
<customErrors mode="Off" /> 
```

当您浏览到 API 控制器时，您将看到 500 错误的实际原因，例如：[http](http://staging.site.com/api/book) ://staging.site.com/api/book 。

您将从实际的异常消息中找到更多线索。**

# c# - 带有服务的 SQL Server 的模拟/外观？

> ID：12136144
> 
> 赞同：1
> 
> 时间：2012-08-27T04:13:28.573
> 
> 标签：c#, wcf, sql-server-2008, service

是否可以模拟或创建外观，用服务（理想情况下是 WCF 或其他 .NET 技术）替换当前由网站通过 ADO.net 直接使用的 SQL Server 数据库？

**示例**：
考虑一个具有许多功能的 ASP.NET 网站，该网站使用 SQL Server 2008 over ADO.NET。SQL 事务涉及许多存储存储过程，但也有一些直接的 T-SQL 事务。*能够用更具可扩展性的实现来替换（单一）SQL 服务器，而*不必重新实现网站功能，这将是非常强大的。

这可能是 ADO.NET 的垫片，或者是自定义服务框架的 ODBC 驱动程序，或其他东西。“正确”的答案似乎是“重新实现网站以使用更抽象的数据接口”，但让我们考虑网站代码是不可变的（尽管可以更改配置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:04:04.387

也许只是提供一个数据访问层来指定设计良好的接口。您的网站将永远只有一个接口的句柄，并且您可以使用依赖注入/IoC 根据需要提供您的接口的具体实现。

这不是一种“现有技术”，但可能只是我建议的一种谨慎的设计方式。

# php - 每页一个测验项目（php / mysql测验程序）

> ID：12136151
> 
> 赞同：0
> 
> 时间：2012-08-27T04:14:15.593
> 
> 标签：php, mysql

我目前正在使用 PHP/mySQL 开发一个测验程序（我第一次实际使用任何一种）。

到目前为止，我只是在努力让 mySQL 表正常运行，为此我将所有问题放在一个页面上的测验中。但是，现在我希望能够每页只提出一个问题，然后通过一次提交一个答案来取得进展。

我的问题被选为测验的方式可能有点令人困惑。他们都有一个“quiz_id”列，对应于他们所在的测验。测验有一个“长度”列，指定它实际有多少问题。因此，对应“quiz_id”的问题可能比测验中的实际问题多。我随机选择包含哪些问题的方法是使用“$question =”SELECT * FROM questions WHERE quiz = '$id' ORDER BY rand() LIMIT $length";"。

现在我在每页只放一个问题时遇到了很多麻烦。这是因为每次你进步时，都需要选择下一个随机问题，只要我们没有达到 $length 个问题的限制。还需要增加一个计数器，以跟踪您在多少个问题中（$length）。我不确定我是否需要有两个单独的动作脚本.. 一个开始测验，然后一个在问题之间进行。

这是我的 quiz.php 页面（任何测验的起始页面）：

```
<?php
// initialize the mysql data
$connect = mysql_connect('localhost', 'root', '');
$select_db = mysql_select_db('mysql');

// define the id and length from url
$id = mysql_real_escape_string($_GET['id']);
$length = mysql_real_escape_string($_GET['length']);

// query quiz table for all columns
$query_quiz = "SELECT * FROM quizzes WHERE id = '$id' LIMIT 1";

// if quiz query fails
if(!$query_quiz_result = mysql_query($query_quiz)) 
    { 
        die("Couldn't run quiz query"); 
    } 

// fetch whole array of quiz info
$quiz = mysql_fetch_array($query_quiz_result);

//query question table for all columns
$question = "SELECT * FROM questions WHERE quiz = '$id' ORDER BY  rand() LIMIT $length";
$q_result = mysql_query($question) or die ("couldn't run questions query");

// store queried questions as an array to pass via session variables
$q_array = array();
while($row = mysql_fetch_assoc($q_result))
{
    $q_array[] = $row;
}

session_start();
$_SESSION['quiz'] = $id;
$_SESSION['questions'] = $q_array;
$_SESSION['length'] = $length;
?>

<html>
  <head>
    <title>Quiz <?php echo mysql_real_escape_string($_GET['id']);?></title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="container" style="margin-left: 30px;">

<!-- create the header using the quiz id and name -->
<h1 style="text-align: center;">Quiz <?php echo $quiz['id'] ?>: <?php echo $quiz['name'] ?></h1>

<hr />

<h4>This quiz will have a total of <?php echo $length?> questions.</h4>

<button onClick="parent.location='start.php'">Begin Quiz</button>

    </div>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html> 
```

这是我的 start.php 页面.. 不确定我是否可以将这一页面用于所有问题，或者我是否需要一个单独的操作页面，以便在测验开始并且您正在超越 #1 时进行操作？

```
<?php
// continue the session
session_start();

// initialize the mysql data
$connect = mysql_connect('localhost', 'root', '');
$select_db = mysql_select_db('mysql');

$quiz_id = $_SESSION['quiz'];
$length = $_SESSION['length'];
$_SESSION['questions_array'] = $_SESSION['questions'];
$current_question = array_shift($_SESSION['questions_array']);
$_SESSION['counter'] = 1;

$counter = $_SESSION['counter'];
?>

<html>
  <head>
    <title>Quiz <?php echo mysql_real_escape_string($_GET['id']);?></title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <div id="container" style="margin-left: 30px;">

<h3>Question <?php echo $counter ?> of <?php echo $length ?></h3>

<hr />

<h4><?php echo $current_question['prompt']?></h4>

<?php
// define query for answers for each question
    $answers = 'SELECT `prompt` FROM `answers` WHERE `quiz` = '.$quiz_id.' AND `question` = '.$current_question['id'].'';

    //if failed
    if(!$answers_result = mysql_query($answers)){
        die("Couldn't run answers query");
    }
    ?>

        <p style="margin-left: 50px;">
        <?php

    // if question type is "multiple choice", loop through answer choices and print them as options
    if ($current_question['if_short_answer'] == 0) {
        // loop through rows of answer choices
        while($a_row = mysql_fetch_array($answers_result))
        {
            // print each answer choice
            ?>
            <input type='radio' name='question_<?php echo $current_question['id']; ?>' value='<?php echo $a_row['prompt']?>'><?php echo $a_row['prompt']?>
            <br />

        <?php
        }
        echo "</p>";
    }

    // if question type is "short answer", create text box
    elseif ($current_question['if_short_answer'] == 1) {
        ?>
        <input type="text" name="question_<?php echo $current_question['id']; ?>" /><br />
    </p>

    <?php
    } ?>

<?php
if ($counter >= 1) { ?>
<button onClick="parent.location='next.php'">Next Question</button>
<?php
}

else { ?>
    <button onClick="parent.location='start.php'">Begin Quiz</button>
<?php
}
?>

    </div>
    <script src="js/bootstrap.min.js"></script>
  </body>
</html> 
```

如果这是一个非常模糊或冗长的问题，我深表歉意。我现在迷失了方向，不知道如何继续。基本上我在问：我怎样才能每页只放一个问题，通过随机问题进行，直到达到 $length 的限制，然后最后的“提交测验”按钮导致分数页面？一路上，“下一个问题”按钮需要存储用户对当前问题的输入。

我基本上需要指导来编写脚本以从一个问题推进到下一个问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-28T03:18:55.273

您只需从数据库中获取所有问题，并使用 jquery show()/hide() 方法一次只显示一个问题。

我在这里为您的要求编写了示例脚本。

[http://www.smarttutorials.net/responsive-quiz-application-using-php-mysql-jquery-ajax-and-twitter-bootstrap/](http://www.smarttutorials.net/responsive-quiz-application-using-php-mysql-jquery-ajax-and-twitter-bootstrap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:39:28.873

首先，您要在每个页面上重新创建 $q_array，因此它将仅包含最后显示的问题，该问题不起作用

尝试

```
if(isset($_SESSION['questions']))
{
   $_SESSION['questions']+= ", $question_id";       
} 
```

在选择查询中，您应该省略已显示在数组中的问题。

# php - Frapi API 文档页面无法正常工作

> ID：12136152
> 
> 赞同：-2
> 
> 时间：2012-08-27T04:14:21.460
> 
> 标签：php, api, rest, frapi

Frapi API 文档页面在我同步后无法正常工作。但所有其他事情都完美无缺。只有 API 文档页面加载到一半。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:42:06.280

我终于找到了这个的独奏。如果我们将多重参数放在这个问题发生时，resons 将针对单个参数操作进行 frapi 编码。

为防止出现此问题，请更改 custom/Output/html/Introduction.html.tpl 文件的代码，如此页面。

[https://github.com/trevormorse/frapi/commit/878d5e002557fef0b9abb9ec82c9895ac6688b86](https://github.com/trevormorse/frapi/commit/878d5e002557fef0b9abb9ec82c9895ac6688b86)

# javascript - 将项目动态添加到现有列表

> ID：12136153
> 
> 赞同：1
> 
> 时间：2012-08-27T04:14:22.790
> 
> 标签：javascript, html, loops, dynamic

我需要将一个元素动态插入到现有的博客文章列表中。

下面是一个 HTML 示例：

```
<div id="page">
  <div id="post">Post Content</div>
  <div id="post">Post Content</div>
  <div id="post">Post Content</div>
  <div id="post">Post Content</div>
  <!---- Dynamic Post Inserted Here--->
  <div id="post">Post Content</div>
  <div id="post">Post Content</div>
</div> 
```

我创建了一个循环遍历帖子并返回位置，但返回的位置是一个整数，所以我不能将新帖子附加到该变量。那么将项目附加到我当前的帖子列表的最佳方法是什么？

我面前没有确切的功能，但这基本上就是我正在做的事情：

```
var post = docuemnt.getElementById('post');
var page = docuemnt.getElementById('page');
var pc = 0;
var insert = 5;
var newPost = "new post content";

for(post in page){
  if(pc == insert){
    **append new post content after this post**
  }else{
  pc++;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:19:16.137

如果您使用 jQuery，这将非常容易。

```
$('#post4').after('<div id="post5">new post content</div>'); 
```

如果你想用纯 JavaScript 来做，那么[看看这个问题](https://stackoverflow.com/questions/4793604/how-to-do-insert-after-in-javascript-without-using-a-library)。基本思想是：

```
referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling); 
```

在您的情况下，您需要创建一个`div`节点并直接附加到文档中。

```
var newpost = document.createElement('div');
newpost.id = 'post5';
newpost.innerText = newpost.textContent = "new post content";

var post = document.getElementById('post4');

post.parentNode.insertBefore(newpost, post.nextSibling); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:20:18.653

如果你得到一个整数，让 div id 成为索引。这样你就可以使用`document.getElementById('post'+id).innerHTML`追加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:40:09.043

你的方法都是错误的，在一个元素上做一个 for each 不会给你它的子节点，而是它的属性键。您可以使用 getElementsByTagName 或 querySelector 来实现您的目标

```
var posts = docuemnt.getElementById('page').getElementsByTagName('div');
var insert = 4;
var newPost = "new post content";
var div = document.createElement('div');
div.appendChild(document.createTextNode(newPost ));
posts[insert].parentNode.insertBefore(div, posts[insert]);//index are zero based so element 4 is actually the 5th element 
```

或者

```
var insert = 5;
var post = docuemnt.querySelector('#page > div:nth-child('+insert+')');//nth child index is one based
var newPost = "new post content";
var div = document.createElement('div');
div.appendChild(document.createTextNode(newPost ));
post.parentNode.insertBefore(div, post); 
```

[https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector)

[https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)

[https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T22:55:27.280

您可以为新的 post div 标签创建 jtag 并调用 .dom() 函数来接收 div 元素。试试[Jnerator](http://jnerator.com)库。

```
function addPost() {
    var lastPostElement = page.lastChild;
    var count = page.childNodes.length;
    var postText = tagPost.value;
    var jtag = $j.div({ id: 'post' + count, child: postText });
    var newPostElement = jtag.dom();
    page.insertBefore(newPostElement, lastPostElement);
} 
```

在此处查看示例：http: [//jsfiddle.net/jner​​ator /5nCeV/](http://jsfiddle.net/jnerator/5nCeV/)

# c++ - C++条件运算符中逗号运算符的优先级是什么？

> ID：12136156
> 
> 赞同：10
> 
> 时间：2012-08-27T04:15:02.050
> 
> 标签：c++, operator-precedence, comma-operator

这里发生了什么事？

```
#include <iostream>
using namespace std;

int main(){

    int x=0,y=0;
    true? ++x, ++y : --x, --y; 
    cout << "x: " << x << endl;
    cout << "y: " << y << endl; //why does y=0 here?

    x=0,y=0;
    false ? ++x, ++y : --x, --y; 
    cout << "x: " << x << endl;
    cout << "y: " << y << endl;
}

x: 1
y: 0

x: -1
y: -1 
```

第二种情况似乎很好。在第一种情况下，我希望 x 和 y 都递增到 1，但只有左侧操作数递增。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-27T04:19:41.423

第一个相当于：

```
(true  ? (++x, ++y) : (--x)), --y; 
```

第二个相当于：

```
(false ? (++x, ++y) : (--x)), --y; 
```

因此`--y`总是执行。在第一行中，首先执行增量，因此`x = 1, y = 0`是预期的。在第二行中，`x`首先执行的减量`x = -1, y = -1`是预期的。

* * *

正如[Barmar](https://stackoverflow.com/users/1491895/barmar)在评论（另一个答案）中指出的那样：

> 如果有人想知道为什么和之间的逗号`++x`没有`++y`相同的效果，那是因为`(true? ++x)`根本无效。因此，编译器会一直扫描直到找到`:`，但除此之外，它会在到达较低优先级运算符*[(`,`在此示例中) 或语句结尾] 时停止*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T04:21:55.923

是零，`y`因为逗号[在所有 C++ 运算符中的优先级最低](http://en.cppreference.com/w/cpp/language/operator_precedence)。因为它的优先级低于三元条件运算符，所以条件运算符被解析为`true? ++x, ++y : --x`and `false? ++x, ++y : --x`。在这两种情况下，`--y`语句都是*无条件*执行的。

**编辑**第一个逗号是不同的，因为编译器已经找到了 a `?`，所以现在它需要 a`:`来完成条件的“当真”表达式。这就是为什么两者`++x`都`++y`被纳入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:21:48.967

阅读标准

> §5.18 逗号运算符 [expr.comma]
> 
> ¶1逗号运算符从左到右分组。
> 
> ```
> expression:
> assignment-expression
> expression , assignment-expression 
> ```
> 
> 一对用逗号分隔的表达式从左到右计算；左边的表达式是丢弃值表达式（第 5 条）。^(83)与左表达式关联的每个值计算和副作用在与右表达式关联的每个值计算和副作用之前排序。结果的类型和值是右操作数的类型和值；结果与其右操作数属于相同的值类别，并且如果其右操作数是泛左值和位域，则结果是位域。
> 
> ¶2在逗号被赋予特殊含义的上下文中，[示例：在函数的参数列表（5.2.2）和初始化程序列表（8.5）中-结束示例]第5条中描述的逗号运算符只能出现在括号中. [ 例子：
> 
> ```
> f(a, (t=3, t+2), c); 
> ```
> 
> 有三个参数，其中第二个的值为 5。 —end example ]

# node.js - 在节点中尝试查找操作 5 次

> ID：12136158
> 
> 赞同：0
> 
> 时间：2012-08-27T04:15:12.757
> 
> 标签：node.js, asynchronous

我正在使用“帽子”生成一个令牌。

我正在尝试编写非常偏执的代码。所以，这个想法是系统生成一个 ID，检查它是否已经被占用（查询数据库），如果没有，它会返回它。如果有，再试5次。5 次后，发生了一些非常奇怪的事情，应用程序抛出错误。

简短的问题是：如果令牌实际可用，我怎样才能让这段代码依次运行 5 次，并可选择调用传递的回调（请参阅“退出”循环）？

Is 是只尝试一次的代码：

```
var hat = require('hat'),
mongoose = require('mongoose');

exports.makeToken = function( callback ){

  Workspace = mongoose.model("Workspace");

  var found = false;
  var token;

  // Generate the token, check that it's indeed available
  token = hat();
  Workspace.findOne( { 'access.token':token } , function(err, doc){
    if(err){
      callback(err, null);
    } else {
      if( doc ){
        callback( new Error("Cannot generate unique token"), null );
      } else {
        callback(null, token );
      }
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:35:49.930

我认为你是偏执狂。你为什么做这个？为什么是5次？

把它放在一边。您应该做的就是在天气令牌存在与否时询问数据库。如果您得到结果，则令牌正在使用中，如果没有，则未使用。故事结局。

[正如我在上一个问题](https://stackoverflow.com/questions/12135793/generating-api-tokens-using-node)中提到的那样，您甚至不需要生成令牌，因为您可以使用 mongodb 的本机 ObjectId 作为您的唯一标识符，这是假设您为每个“用户”存储一个单独的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:46:11.627

不幸的是，我不能使用 ObjectId，因为 1) 用户可能决定重新生成令牌密钥 2) 用户没有存储为单独的文档。

因此，生成的令牌有可能*不是*唯一的，这会给我一种情况，即两个用户<->工作区对存在相同的令牌 ID，这不是很好。因此，5 次尝试。我承认机会非常渺茫，但仍然......

我想出了这个（这里需要递归）：

```
var hat = require('hat'),
mongoose = require('mongoose');

exports.makeToken = function( callback ){

  var attempts = 0;
  look();

  function look(){
    Workspace = mongoose.model("Workspace");

    // Generate the token, check that it's indeed available
    var token = hat();
    Workspace.findOne( { 'access.token':token } , function(err, doc){

      // There is an error: throw it straight away
      if(err){
        callback(err, null);
      } else {

        // Token already there: either give up (too many attempts)...
        if( !doc ){
          attempts ++;
          if( attempts == 5 ){
            callback( new Error("Cannot generate unique token"), null );
          } else {
            look();
          }
        // ... or try again by calling this function again!
        } else {
          callback(null, token );
        }
      }
    });
  }
} 
```

# amazon-s3 - 静态文件的 Amazon S3/CloudFront 和 Gzip 压缩

> ID：12136159
> 
> 赞同：2
> 
> 时间：2012-08-27T04:15:21.190
> 
> 标签：amazon-s3, amazon

是否可以指示 Amazon S3 或 Cloudfront 交付某些静态文件（html、css 和 javascript 文件）以使用压缩的 gzip 标头交付？即使 .gz 文件在服务器上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T14:46:53.923

我发现这样做的唯一方法是在本地压缩文件，将其上传到 S3，并`Content-Encoding: gzip`为文件设置标题。这可行，但问题是对于任何不接受编码数据的客户端，它都会解析和读取文件的压缩数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-03T00:14:30.483

现在，您可以使用 Amazon CloudFront，它可以从源服务器提供压缩和未压缩文件。

来自[亚马逊文档](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/ServingCompressedFiles.html)：

> CloudFront 不压缩文件本身。相反，它依赖于从您的来源接收压缩文件。提供压缩文件的过程取决于您使用的是自定义源还是 Amazon S3：
> 
> **自定义源**：CloudFront 依赖源服务器来响应带有压缩文件的请求。有关更多信息，请参阅 CloudFront 如何提供来自自定义源的压缩内容。
> 
> **Amazon S3 来源**：Amazon S3 不会自动压缩文件，因此您必须为要以压缩格式提供的文件创建单独的压缩和未压缩版本。此外，您开发 Web 应用程序以在查看者请求压缩内容时重写 URL。有关更多信息，请参阅从 Amazon S3 提供压缩文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:07:02.577

[您可以使用DragonDisk S3](http://www.dragondisk.com/)（免费软件）、[Bucket Explorer](http://www.bucketexplorer.com/)、[Cloudberry 等](http://www.cloudberrylab.com/)工具来执行此操作。

# php - How can Check the Value of the two array with different values,size in php

> ID：12136167
> 
> 赞同：0
> 
> 时间：2012-08-27T04:16:27.373
> 
> 标签：php

I need a Help, i try to check the array value to another array value.The two array size many be different all the time.because the array get from the data base. Example

```
array A     array B    Result
  1          1,2,3      true
  1            2,3      false
  1            2        false
  1,2          2,3      false
  1,2,3        1        false
  2,3         2,3       true
  1,2,3       1,2,3     true

$arrayA=array(1,2);
$arrayB=array(1); 
```

the array value same time different

```
 $arrayA=array(1);
 $arrayB=array(1,2,3); 
```

The array hole value in the second array then only return true. I need to check the all the value of array a to next array b. please help me.thank adv....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:21:57.000

```
$result = !array_diff($arrayA, $arrayB); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:25:48.253

Something like this maybe?

```
<?php
$array1 = array("a" => "green", "red", "blue", "red");
$array2 = array("b" => "green", "yellow", "red");
$result = array_diff($array1, $array2);

print_r($result);

Array
(
    [1] => blue
)
?> 
```

You can get all the info [HERE](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:40:34.263

just a rough idea,

```
<?
$arrayA=array(1);
 $arrayB=array(1,2,3); 
 $k=array_intersect($arrayA,$arrayB);
 print_r($k);
?> 
```

# c# - c# - 如何从一个简单的应用程序编译带有 .cs 文件的文件夹

> ID：12136169
> 
> 赞同：0
> 
> 时间：2012-08-27T04:16:44.267
> 
> 标签：c#, asp.net, compiler-construction, compilation

我得到了 .NET 2.0 的应用程序。我想使用反射来收集类信息。但首先我需要编译文件夹中的 .cs 文件。我怎样才能**从我的**应用程序中做到这一点？从我的应用程序自动执行此操作非常重要。例如，我想要一个方法，我可以将路径传递给包含 .cs 文件的文件夹，并且此方法将为我编译所有 .cs 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:59:52.627

你可以这样做：

```
using Microsoft.CSharp;
using System.CodeDom.Compiler;
using System.CodeDom;

public static Assembly CreateFromCSFiles(string pathName)
{
        CSharpCodeProvider csCompiler = new CSharpCodeProvider();

        CompilerParameters compilerParams = new CompilerParameters();
        compilerParams.GenerateInMemory = true;

        // here you must add all the references you need. 
        // I don't know whether you know all of them, but you have to get them
        // someway, otherwise it can't work

        compilerParams.ReferencedAssemblies.Add("system.dll");
        compilerParams.ReferencedAssemblies.Add("system.Data.dll");
        compilerParams.ReferencedAssemblies.Add("system.Windows.Forms.dll");
        compilerParams.ReferencedAssemblies.Add("system.Drawing.dll");
        compilerParams.ReferencedAssemblies.Add("system.Xml.dll");

        DirectoryInfo csDir = new DirectoryInfo(pathName);
        FileInfo[] files = csDir.GetFiles();
        string[] csPaths = new string[files.Length];
        foreach (int i = 0; i < csPaths.Length; i++)
            csPaths[i] = files[i].FullName;
        CompilerResults result = csCompiler.CompileAssemblyFromFile(compilerParams, csPaths);
        if (result.Errors.HasErrors)
            return null;
        return result.CompiledAssembly;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:23:39.027

您可以以编程方式和从命令行编译 cs 文件。要以编程方式执行此操作，您需要使用`CSharpCodeProvider`您可以在此处找到有关该主题的更多信息：http: [//support.microsoft.com/kb/304655](http://support.microsoft.com/kb/304655)

# javascript - 高级路由和单个对象定义？

> ID：12136170
> 
> 赞同：1
> 
> 时间：2012-08-27T04:16:45.937
> 
> 标签：javascript, backbone.js, coffeescript

我正在尝试简化路线。我现在仍然需要在扩展路由器的类中进行引用，但是由于我`eval`用于实例化引用，**因此每个路由方法都是相同的**。

目前，在我的应用程序中：

```
ROUTES =
  'action1/:page': 'action1'
  'action2/:page': 'action2'
  '*path': 'default' # Default routes to action1

# Start Backbone history.
App.Router = new Routes(
  routes: ROUTES
)
App.Router.setDefaultRoute 'action1'
Backbone.history.start() 
```

和路由器类：

```
class window.Routes extends Backbone.Marionette.AppRouter

  constructor: (options) ->

    @on 'all', @storeRoute
    @history = []
    super options

  @trace initialize: () ->

    debug.info 'Routes: ' + JSON.stringify @routes

  @trace setDefaultRoute: (route) ->

    App.Data.defaultRoute = route

  @trace getDefaultRoute: () ->

    App.Data.defaultRoute

  @trace storeRoute: () ->

    @history.push Backbone.history.fragment

  @trace getPrevious: () ->

    if @history.length > 1
      @history[@history.length - 1] 

  @trace getPreviousRoute: () ->

    @getPrevious().split('/')[0]

  @trace getPreviousPage: () ->

    @getPrevious().split('/')[1]

  @trace getFormattedWindowHash: () ->

    hash = window.location.hash
    hash = hash.substring(1, hash.length) 

    hash

  @trace getCurrentRoute: () ->

    current = @getFormattedWindowHash().split('/')[0]

    # Allow us to not specify 'route = <route>' inside every routing method.
    if !current
      current = @getDefaultRoute()
    else
      current = current

    current = current.charAt(0).toUpperCase() + current.slice(1)    

  @trace getCurrentPage: () ->

    @getFormattedWindowHash().split('/')[1]

  # Everytime a page is loaded, default data is cleared by instantiating new 
  # Views, Events, UI, State, and Error classes.
  @trace setupPage: (page) ->

    route = @getCurrentRoute()

    debug.info 'current route: ' + route

    event = 'App.Pages.Events.' + route + ' = new App.Events.' + route + '()'
    debug.info 'eval event: ' + event

    eval event

    # The magic which routes to the page.
    goTo = 'App.Pages.Events.' + route + '.router(parseInt(' + page + '))'
    debug.info 'goTo: ' + goTo

    eval goTo

  # Place routing actions below.

  @trace action1: (page) ->

    @setupPage page

  @trace action2: (page) ->

    @setupPage page

  # Default route.
  @trace default: () ->

    # TODO make this settable?
    @action1 1 
```

我想要做的是能够删除这 3 种方法：

```
 @trace action1: (page) ->

    @setupPage page

  @trace action2: (page) ->

    @setupPage page

  # Default route.
  @trace default: () ->

    # TODO make this settable?
    @action1 1 
```

我怎样才能做到这一点？

运行： http: [//franklovecchio-playback.herokuapp.com/?log =true](http://franklovecchio-playback.herokuapp.com/?log=true)

完整代码：[https ://github.com/franklovecchio/playback](https://github.com/franklovecchio/playback)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:03:40.703

您可以使用两个路由处理程序：

```
ROUTES =
  'action1/:page': 'page'
  'action2/:page': 'page'
  '*path': 'def' 
```

接着：

```
page: (page) ->
  @setupPage(parseInt(page, 10))
def: ->
  @setupPage(1) 
```

splat 路由 ( `*path`) 会将路由的匹配部分发送到处理程序，因此您不能只使用一个路由处理程序而不尝试解释 splat 匹配的内容。

# html - 如何在 LimeJS 中翻转对象？

> ID：12136172
> 
> 赞同：0
> 
> 时间：2012-08-27T04:17:01.647
> 
> 标签：html, limejs

我是游戏开发的新手。当我单击对象时，我必须翻转一个对象。我们如何在 LimeJS for HTML5 中解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:43:28.353

也许[http://limejs.digitalfruit.ee/docs/symbols/lime.animation.RotateBy.html](http://limejs.digitalfruit.ee/docs/symbols/lime.animation.RotateBy.html)是您正在寻找的，如果不尝试查看其他动画文档。

# java-me - 如何在 j2me 中记录语句？

> ID：12136173
> 
> 赞同：1
> 
> 时间：2012-08-27T04:17:01.617
> 
> 标签：java-me, lwuit

我在 j2me 中开发了一个应用程序，它正在成功执行。将来，如果我的陈述中有任何问题，我想调试我的应用程序。我知道，我可以使用 System.out.println() 但我想记录一个语句，我该如何在 j2me 中做到这一点？如果可能的话，给我一个示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:27:42.943

简单地

`public static void logToConsole(String str) {`

 ````
 System.out.println(str); 
```` 

`}`

在您的实用程序类中声明并使用它。

如果您想获得屏幕记录器，请将您的消息放入其中并将其显示在画布上。

`//Vector which will hold your logs`

`private static Vector logData = new Vector();`

 `public static void logToScreen(String str) {

```
 logData.add(str); 
```` 

`}`

现在在你的画布中使用它。

`public static Vector getLogData() {`

 ````
 return logData; 
```` 

`}`

# ssis - AdventureWorksDW2008R2：是否有可用的数据沿袭文档？

> ID：12136176
> 
> 赞同：1
> 
> 时间：2012-08-27T04:17:32.737
> 
> 标签：ssis, sql-server-2008-r2, etl, sample-data

AFAICS Microsoft 示例数据库 AdventureWorksDW2008R2 基于 AdventureWorks2008R2。是否有可用的 SSIS ETL 包来创建 AdventureWorksDW2008R2 数据库架构和数据？是否有可用的数据映射（数据沿袭）文档（例如在 Excel 中）说明 AdventureWorksDW2008R2 中的哪些字段代表相应 OLTP 数据库 AdventureWorks2008R2 中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:58:57.683

我认为[这](http://sqlserversamples.codeplex.com/#monolith)是您想要的页面。

第一个链接包含所有示例，但您应该在页面上找到您想要的示例

# mercurial - hg changegroup hook - 抑制 hg 的特定输出？

> ID：12136178
> 
> 赞同：1
> 
> 时间：2012-08-27T04:18:01.910
> 
> 标签：mercurial, mercurial-hook

我编写了一个更改组挂钩，当我从远程服务器副本中提取更改时，它会在我的本地存储库中调用。在钩子实现中，我调用 hg update 来引入更改。在运行`hg pull`命令时，输出显示如下：

```
pulling from ssh://lava@lava.in/hgrepo
searching for changes
adding changesets
adding manifests
adding file changes
added 1 changesets with 1 changes to 1 files  
Verified file test1.cpp
(run 'hg update' to get a working copy) 
```

由于我已经`hg update`在钩子中调用，我想取消建议用户运行的最后一行`hg update`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:23:43.743

还有[另一个线程](https://stackoverflow.com/questions/848627/mercurial-hook-not-executing-properly)可能有用。

此外，如果您只是为自己执行此操作，则可以使用`pull -u`; 的别名来获得相同的结果。我使用一个名为的别名`get`，我倾向于只运行`hg get`以实现拉取和更新。

如果您使用的是 TortoiseHg，您可以在相应文件 ( )`postpull = update`的部分下添加，这将在您使用 Workbench 获取远程更改后更新您的工作目录。`[tortoisehg]``.hgrc/hgrc/mercurial.ini`

# iphone - 为什么 Facebook SDK 要求两次授权？

> ID：12136182
> 
> 赞同：2
> 
> 时间：2012-08-27T04:18:26.983
> 
> 标签：iphone, ios, xcode, facebook, facebook-graph-api

我正在借助 Facebook SDK (iOS) 实施我的项目。我遇到了一个奇怪的现象......

我首先放了 Facebook 对象的初始化代码：

```
self.facebook = [[Facebook alloc] initWithAppId:appID andDelegate:self]; 
```

然后我会检查令牌是否可用，如果没有，请转到我的登录视图...

然后我添加了一个按钮，该按钮将在我的应用程序委托中触发登录 Facebook 方法，并且我只调用了授权方法

```
- (void)LoginToFacebook
{
    NSArray *permissions = [[NSArray alloc] initWithObjects:@"email",nil];
    [self.facebook authorize:permissions];
} 
```

并用这个处理转换

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation
{
    // attempt to extract a token from the url
    return [self.facebook handleOpenURL:url];
} 
```

我遇到的问题是，当我重置我的模拟器并运行项目时，起初一切都很好，我的登录页面显示出来了。当我按下登录按钮时，它首先要求我登录（正常），然后授权应用程序。但是，当我按下 Okay 按钮时（假设我之前已经授权过该应用程序），在程序中调用 fbDidLogin 时，会弹出另一个 safari 窗口并再次请求授权......

我一直在寻找解决方案，发现[这个问题](https://stackoverflow.com/questions/6235879/facebook-sdk-login-dialog-appears-twice?lq=1)说不想将授权方法和提要对话框放在同一个地方。然而，在我的代码中我没有做这些事情（我确实有应用程序请求对话框代码，但我很确定它们没有放在同一个地方）。

此外，在我按了两次确定按钮后，它进入登录页面，错误代码为 400....，当我单击另一个获取用户朋友的按钮时，它成功了。

奇怪的现象是，如果我确实得到了用户的朋友和注销并再次登录，相同的代码只会弹出一个 safari 窗口进行授权.....

所以我一直很困惑，所以有人可以帮助我吗？

# 编辑

我刚刚发现，如果我不包含权限，应用程序运行良好，但如果我包含它，问题仍然存在，Safari在第一次登录时弹出两次......

# iphone - xcode iOS CoreData 简单关系数据检索

> ID：12136183
> 
> 赞同：0
> 
> 时间：2012-08-27T04:18:32.143
> 
> 标签：iphone, ios, xcode, ipad, core-data

我的 coredata 模型中有两个表（有更多但保持示例简单）员工和部门。一个员工属于一个部门，一个部门包含许多员工。以下是表定义：

```
Employee
================
employeeID int32
firstName string
lastName string
departmentID int32

Department
================
departmentID int32
departmentName string 
```

我只是想知道检索所有员工及其部门名称的最干净的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:28:22.743

您似乎正在设计您的架构，就好像它是一个数据库。请不要这样做。这与 CoreData 的工作方式没有必要和对立。您应该摆脱您的 ID 字段。只需在模型中声明适当的关系，然后为员工获取部门所需要做的就是：

```
myEmployee.departmentName 
```

获取所有员工将像这样完成：

```
NSManagedObjectContext *moc = [self managedObjectContext];
NSEntityDescription *entityDescription = [NSEntityDescription
    entityForName:@"Employee" inManagedObjectContext:moc];
NSFetchRequest *request = [[[NSFetchRequest alloc] init] autorelease];
[request setEntity:entityDescription];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]
    initWithKey:@"firstName" ascending:YES];
[request setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
[sortDescriptor release];

NSError *error = nil;
NSArray *array = [moc executeFetchRequest:request error:&error];
if (array == nil)
{
    // Deal with error...
} 
```

这是从文档中获取的。如果您使用的是 ARC，则相应地更改代码。

# c# - oledbdatareader 在 C#.net 代码中的函数之外无法访问

> ID：12136189
> 
> 赞同：-2
> 
> 时间：2012-08-27T04:20:06.123
> 
> 标签：c#, excel, oledb, oledbdatareader

我有下面的代码，它曾经可以工作，直到我最近更新了函数以返回 true 或 false。但是突然对象 objReader 停止在函数外部访问。我在类的开头声明为 private static oledbdatareader = null; 这样我就可以在当前类中的任何方法中访问它。

```
 string strProvider = @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" + strCurWBPath + ";;Mode=ReadWrite" + @";Extended Properties=""Excel 8.0;HDR=Yes;""";

            using ( objConn = new OleDbConnection(strProvider))
             {
                 objConn.Open();                    
                using ( objCmd = new OleDbCommand(strQuery, objConn))
                 {
                     objCmd.CommandType = CommandType.Text;
                     objCmd.ExecuteNonQuery();
                     objReader = objCmd.ExecuteReader(CommandBehavior.SequentialAccess);

                    // No point reading/writing data if there are no rows.
                     if (objReader.HasRows)
                     {

                             if (!objReader.IsClosed)
                             {
                                 return true;
                             }
                             else
                                 return false;                        

                     }
                     else
                     {
                         MessageBox.Show("There are no Rows to process. ");
                     }

                }//end of using1

            }//end of using2 
```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:23:32.570

如果我错了（并且对 OP 所说的内容感到困惑 - `not accessible outside the function in C#.net code`），请纠正我，但在这里您不能`object`在方法/函数之外使用 OleDbDataReader，因为它的关联`connection`已被处置（您已`using`阻止）。

如果您希望将数据库的结果用于其他方法，那么我建议您`DataTable`使用`OleDbDataAdapter.Fill`方法进行填充。

# asp.net - Visual Studio 无法创建虚拟目录

> ID：12136201
> 
> 赞同：2
> 
> 时间：2012-08-27T04:22:24.403
> 
> 标签：asp.net, visual-studio, iis

在我的 Windows 7 x64 机器上，我试图从 Visual Studio 2010 SP1 在托管在本地 IIS 上的 ASP.NET 网站上启动调试。我的第一步是配置使用 IIS，并使用 VS 提供的“创建虚拟目录”选项。当我这样做时，我收到此错误：

> > 为 ASP.NET 4.0配置 Web`http://localhost/MySite`失败。您必须为 ASP.NET 4.0 手动配置此站点，以使该站点正确运行。为 ASP.NET 4.0 配置虚拟目录失败。您可能需要为 ASP.NET 4.0 手动配置此站点，以便您的站点正确运行。

这个问题与[此处描述](https://stackoverflow.com/questions/5273044/visual-studio-cant-create-web-site-in-iis)的问题类似，但在我的情况下，确实设置了默认应用程序池。有任何想法吗？

给出错误信息后，会弹出另一个对话框，说明虚拟目录已成功创建（！！！！！！）。事实上，当我打开 IIS 管理器时，我可以看到新的应用程序。但是，它不起作用；我无法启动 Web 应用程序。

我有另一台机器具有相同的应用程序配置相同的方式，但它工作正常。奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:54:10.883

这个[答案解决了这个问题](https://stackoverflow.com/questions/5836228/asp-net-4-0-has-not-been-registered)。

在前面的步骤中，试图解决这个问题，我已经做了以下事情：

*   递归获取包含应用程序的文件夹的所有权
*   递归地将组 IIS_IUSRS 分配给该根文件夹

也许这两个步骤不是必需的，但在这一点上，我不会回头去找出答案。

# sitecore - Sitecore - “某些自动化状态无法写入数据库，可能是因为锁定过期。记录 ID 在下面”

> ID：12136203
> 
> 赞同：2
> 
> 时间：2012-08-27T04:22:37.477
> 
> 标签：sitecore, sitecore6, sitecore-dms

我正在使用带有 DMS 2.0.0.1 的 Sitecore 6.5 rev 120706。有时 Sitecore 会抛出错误

> “某些自动化状态无法写入数据库，可能是因为锁定过期。记录下面的 ID”

这会导致以下错误：

> “并发冲突：UpdateCommand 影响了预期的 1 条记录中的 0 条。”

该错误似乎是由 Sitecore Analytics 引起的，并且在用户访问 Sitecore 站点并达到站点目标时发生。更新命令与自动化状态有关。

有谁知道是什么原因导致 Sitecore 中的锁定过期？或者我怎样才能缩小问题的范围？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:02:33.560

请参阅已发布的 Sitecore CMS 6.5.0 rev 的发行说明。121009（6.5.0 Update-6）和 DMS 2.0.1 rev。121009。

此问题已在该版本中修复。根据发行说明：

> **已解决的问题**
> 
> *   日志文件将充满错误消息，说明“某些自动化状态无法写入数据库，可能是由于锁过期。以下记录 ID：并发冲突：UpdateCommand 影响了预期的 1 条记录中的 0 条。”</li>

# django - Django admin中自定义列表过滤的重复结果

> ID：12136208
> 
> 赞同：0
> 
> 时间：2012-08-27T04:23:36.480
> 
> 标签：django, django-admin

我正在尝试在 Django Admin 中执行自定义过滤器，但在我的情况下，当我根据父母和老师进行过滤时，我倾向于得到重复的值。意思是说父母的数量（481）多于总数（221）。有些值会重复。我该如何避免这种情况？任何的想法？

管理员.py：

```
class AdultRoleListFilter(SimpleListFilter):

    title = _('Role of Adult')
    parameter_name = 'adultrole'
    def lookups(self, request, model_admin):
        return (
            ('T', _('Teacher')),
            ('P', _('Parent')),)
    def queryset(self, request, queryset):
        if self.value() == 'P':
            return queryset.filter(relationships__role='P')
        if self.value() == 'T':
            return queryset.filter(relationships__role='T') 
```

模型.py

```
class Student(models.Model):
   name = models.CharField(max_length=255)
   birthday= models.DateField(blank=True,null=True)

class Adult(models.Model):
   user = models.OneToOneField(User)
   students = models.ManyToManyField(Student, through='StudentAdultRelationship', related_name='adults')

class class StudentAdultRelationship(models.Model):

    PARENT = 'P'
    TEACHER ='T'
    FOLLOWER = 'F'

    ROLE_CHOICES = (
        (PARENT, 'Parent'),
        (TEACHER, 'Teacher'),
        (FOLLOWER, 'Follower'),
    )

    adult = models.ForeignKey(Adult, related_name='relationships')
    student = models.ForeignKey(Student, related_name='relationships')
    role = models.CharField(choices=ROLE_CHOICES, max_length=1) 
```

在这方面需要一些指导......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:23:17.287

同一个学生必须存在多个关系；假设有 3 个成人角色的`P`学生将返回 3 个学生；您必须`distinct()`向您的电话添加电话`QuerySet`以确保学生是唯一的。

# javascript - 是否可以使用 Javascript 在链接上“悬停”？

> ID：12136212
> 
> 赞同：2
> 
> 时间：2012-08-27T04:24:30.160
> 
> 标签：javascript

假设我有一个网页，它使用第三方 javascript 库从他们的 API 中提取 JSONP 数据，然后根据返回的数据构建丰富的工具提示......当访问者将鼠标光标悬停在链接上时。

是否可以使用 javascript 来模拟鼠标悬停状态？（所以丰富的工具提示会永久出现）

**更新以获取更多信息**

javascript来自[WoWHead here](http://www.wowhead.com/tooltips)。它在加载后自动运行，在 DOM 中搜索 wowhead.com 链接并在鼠标悬停时动态构建工具提示。

本质上，我希望动态生成的工具提示始终可见，而不仅仅是悬停。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:33:24.527

您可能需要发布执行工具提示的代码以获得更好的答案，但是您不能将它从“onmousehover”中取出并让它在页面加载时运行吗？

# database - Schemaspy 导出？

> ID：12136213
> 
> 赞同：2
> 
> 时间：2012-08-27T04:24:44.897
> 
> 标签：database, erd, database-diagramming, schemaspy

我正在寻找一种方法来为我的项目的复杂数据库绘制图表。我在[这里](https://stackoverflow.com/questions/3223770/tools-to-generate-database-tables-diagram-with-postgresql)的问题中找到了[schemaspy](http://sourceforge.net/projects/schemaspy/)，它符合我的需要，除了一件事：我的数据库非常复杂，因此它产生了很多箭头交叉点，这使得阅读变得困难。并且导出文件是html，所以我不能拖放来重新定位表格。

总的来说，这是一个有用的工具，但我想知道我是否可以将图表导出为流行的格式以供其他程序阅读？也许是 MS Visio、[Pencil](http://pencil.evolus.vn)或其他图表原型工具？我在 Schemaspy 网站上进行了搜索，但没有发现任何相关内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:21:47.883

[SchemaCrawler](http://schemacrawler.sourceforge.net/)是一个免费的命令行工具，用于绘制数据库图表。SchemaCrawler 在绘制大型复杂模式图表时特别有用，因为它可以根据正则表达式搜索绘制表格。在您的情况下，您可以考虑没有一个数据库图，而是多个数据库图，一个用于系统中的每个业务域。

例如，您可以有一个图表用于与客户相关的表格，另一个用于帐户，还有一个用于销售。有些表在它们之间可能是通用的。使用 SchemaCrawler，您可以轻松地说您对具有名为 CUSTOMER_ID 的列的所有表感兴趣，并且父表和子表低至 2 个级别。

SchemaCrawler 以 GraphViz DOT 格式输出图表以用于其他图表工具，以及 GraphViz 支持的任何其他格式，例如 PDF 或 PNG。

Sualeh Fatehi，SchemaCrawler

# linux-kernel - 关于访问 pci 配置空间，宏 PCI_CONF1_ADDRESS 让我感到困惑

> ID：12136215
> 
> 赞同：2
> 
> 时间：2012-08-27T04:25:25.300
> 
> 标签：linux-kernel, pci, pci-bus

我正在学习linux内核代码，关于pci的部分，我阅读了文件`/arch/x86/pci/Direct.c`，一些代码让我感到困惑：

```
/*
* Functions for accessing PCI base (first 256 bytes) and extended
* (4096 bytes per PCI function) configuration space with type 1
* accesses.
*/
#define PCI_CONF1_ADDRESS(bus, devfn, reg) \
(0x80000000 | ((reg & 0xF00) << 16) | (bus << 16) \
| (devfn << 8) | (reg & 0xFC))

static int pci_conf1_read(unsigned int seg, unsigned int bus,
          unsigned int devfn, int reg, int len, u32 *value)
{
unsigned long flags;

if ((bus > 255) || (devfn > 255) || (reg > 4095)) {
    *value = -1;
    return -EINVAL;
}

spin_lock_irqsave(&pci_config_lock, flags);

outl(PCI_CONF1_ADDRESS(bus, devfn, reg), 0xCF8);

switch (len) {
case 1:
    *value = inb(0xCFC + (reg & 3));
    break;
case 2:
    *value = inw(0xCFC + (reg & 2));
    break;
case 4:
    *value = inl(0xCFC);
    break;
}

spin_unlock_irqrestore(&pci_config_lock, flags);

return 0;
} 
```

内核版本是 2.6.18，所以宏 PCI_CONF1_ADDRESS 让我很困惑。众所周知，使用IO口CF8/CFC时只能访问pci配置空间的前256字节，如果要访问256~4095字节之间的空间，必须使用ECAM（Enhanced Configuration Access机制），但上面的注释说：

> 具有类型 1 访问的扩展（每个 PCI 功能 4096 字节）配置空间。

这是否意味着在使用 IO 口 CF8/CFC 时可以访问 pci 配置空间的全部 4096 字节？但是为什么 PCI LOCAL BUS SPECIFICATION 从来没有提到这一点呢？

同时，我也对这个表达感到疑惑：

> ((reg & 0xF00) << 16)

它使用这种方式生成 pci 配置地址，我从未在任何书籍或 SPECIFICATION 中看到此表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T01:48:41.593

This is non standard feature of AMD CPUs and chipsets. AFAIK it won't work on Intel platform. At least from Linux kernel code I can understand that it is possible to access extended configuration space using CF8/CFC IO addresses.

[patch from AMD](http://kerneltrap.org/mailarchive/linux-kernel/2007/9/3/1962984)

Regarding ((reg & 0xF00) << 16) -- looks like reserved bits 30:24 of configuration address port at CF8 used by AMD to store part of the address.

# javascript - 没有for的Javascript无限循环

> ID：12136216
> 
> 赞同：0
> 
> 时间：2012-08-27T04:25:26.260
> 
> 标签：javascript, infinite-loop

该函数在不启动循环的情况下连续运行。

setTimeout 是为了允许 refreshTags 函数运行。

我敢肯定这不是写得最好的脚本——我不是大师——但是关于为什么这个脚本在无限循环中运行的任何想法？

```
function addTag() 
{
console.log('running'); 
refreshTags(); 
var t = document.getElementById('existingTags').textContent.match(/tag1/); 
var u = 'tag1'; 
if (t == u) {alert('This ticket has already been resolved by our team.')}; 
if (t != u) 
    {
    refreshTags();
    setTimeout(function() 
    {
        document.getElementById('tagToAdd').value = 'tag1';
        document.getElementById('tagSubmit').click(); 
        alert('Ticket resolved!'); 
    }, 2000)
}; 
} 
```

编辑：下面调用 addTag 的代码。

```
var resolveButton = document.createElement("a");
resolveButton.href = '#';
resolveButton.innerHTML = '<span>Resolve</span>';
resolveButton.setAttribute("onClick", "addTag()");
resolveButton.setAttribute("type", "button");
resolveButton.setAttribute("class", "button1");

var cha = document.getElementById('chatter_view');
cha.parentNode.insertBefore(resolveButton, cha); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:11:43.147

与其试图回答为什么这段特定的代码有无限循环，我将尝试回答更大的问题“你如何防止和调试无限循环？”。

我发现的最好的防御方法之一是构建你的代码，这样控制总是朝着一个方向流动。您在这里有许多不同的层：

*   onclick 事件处理程序正在调用 addTag()
*   addTag() 正在调用 refreshTags()
*   addTag() 正在调用 setTimeout，它稍后会触发对 DOM 的点击。

保持代码向一个方向流动的一个简单方法是创建专用的事件处理程序，例如`resolveButtonOnclick() { addTag() }`. resolveButtonOnclick 只能从 resolveButton 的 onclick 处理程序中调用。这使得审核您的代码变得更加容易。您已经`console.log('running')`在 addTag() 函数的顶部放置了一个。现在，如果您将 console.log() 放入 resolveButtonOnclick() 中，您将立即知道 onclick 处理程序是否包含在无限循环中。

我们看不到您的代码，但是如果 refreshTags() 调用 addTag() 您将有一个循环控制流——这些并不总是坏的，但您需要格外小心它们会在某个时候终止。

您可能拥有的最大循环控制流是 addTag() 正在使用 .click() 方法回调到 DOM。直接从 Javascript 提交表单或使用 XHR 会更好、更快、更简洁。

要调试此循环，您是使用 console.log()s 的正确途径之一。添加更多（例如，您调用 addTag() 的每个位置）并找出调用它的位置。您可以尝试的另一件事是使用 Chrome 的 DevTools：添加一个“调试器”；调用 addTag() 的顶部并检查堆栈跟踪。

# ruby-on-rails - 创建团队 rails 3

> ID：12136218
> 
> 赞同：-1
> 
> 时间：2012-08-27T04:25:40.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3

一个用户属于一个团队，一个团队拥有_许多用户。一个用户一次只能属于一个团队。我希望用户能够创建团队、加入现有团队或离开当前团队。以下是我现在在模型、控制器和视图中拥有的内容，但它不起作用。

另外，我希望创建团队的人成为团队负责人（管理员）。有人可以告诉我该怎么做吗？

用户模型：

```
belongs_to :team, dependent: :destroy

def team_member?
 team.present?
end

def join!(team)
 team.create!
end  

def unjoin!(team)
 team.destroy
end 
```

团队模式：

```
 has_many :users

 attr_accessible :team_name, :team_id

 validates :team_name, presence: true, length: { maximum: 140 }

 default_scope order: 'teams.created_at DESC' 
```

团队控制人：

```
before_filter :signed_in_user

def join
  @team = Team.find params[:id]
  current_user.update_attribute(:team_id, @team.id)
  redirect_to @team
end

def leave
  @team = Team.find params[:id]
  current_user.update_attribute(:team_id, nil)
  redirect_to @team
end

  def create
    @team = Team.new(params[:team])
    if @team.save
      flash[:success] = "Team Created!"  
      redirect_to @team
    else
     render 'new'
    end
  end 
```

_join_team_.html.erb

```
<%= form_for(current_user.team.join) do |f| %>
  <div><%= f.hidden_field :team_name %></div>
  <%= f.submit "Join", class: "btn btn-large btn-primary" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:36:16.263

协会似乎很好。处理代码。要添加“teamlead”，您可以将`has_one`关联添加到团队模型：

```
has_one :teamlead, :class => "User", :dependent => :nullify 
```

# facebook - 更新现有 facebook 照片的属性（包括隐私）

> ID：12136220
> 
> 赞同：0
> 
> 时间：2012-08-27T04:25:48.843
> 
> 标签：facebook, facebook-graph-api

我的应用程序使用图形 api 为用户创建了一张照片，但我找不到任何关于如何更新照片属性的文档。我对隐私设置特别好奇，因为我想将更多用户添加到白名单中，以便以后查看照片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:42:58.823

您目前无法通过 API 设置照片的隐私级别。

如果您将照片发布到用户的墙上，那么隐私级别将与可以看到其墙内容的人相同；

如果您将照片上传到特定相册，则相册的隐私设置将被继承。

只有当您的应用为用户本身创建相册时，您才能设置隐私级别，请参阅[https://developers.facebook.com/docs/reference/api/user/#albums](https://developers.facebook.com/docs/reference/api/user/#albums)甚至以后也无法更改据我所知，通过 API。

# android - 当活动堆栈为空时从通知启动的活动作为主要活动

> ID：12136222
> 
> 赞同：0
> 
> 时间：2012-08-27T04:25:49.470
> 
> 标签：android

在我的应用程序中，A 是主要的 Activity。它导航类似 A、B、C、D 等的东西。我实现了谷歌云推送通知。当推送通知来时，通知产生并单击它转到活动 X。当堆栈不为空时没有问题。当堆栈为空并且从推送通知启动的活动 x 充当启动活动时。这意味着如果我们长按主页按钮并选择应用程序导航到 X 活动（从通知启动的活动）而不是 A 活动，则当堆栈再次为空时。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:45:50.330

最简单的事情是覆盖[`onUserLeaveHint()`](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29)并完成您的活动，

来自有关受保护无效的文档`onUserLeaveHint()`

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。例如，当用户按下 Home 键时，会调用 onUserLeaveHint()，但是当有来电导致通话中的 Activity 自动被带到前台时，被中断的 Activity 不会调用 onUserLeaveHint() . 如果调用它，则在活动的 onPause() 回调之前调用此方法。
> 
> 这个回调和 onUserInteraction() 旨在帮助活动智能地管理状态栏通知；具体来说，用于帮助活动确定取消通知的适当时间。

伪代码，

```
 @Override
    protected void onUserLeaveHint() {
        super.onUserLeaveHint();
        finish();
    } 
```

您还可以检查[`this answer`](https://stackoverflow.com/a/6388546/726863)以供进一步参考。

```
UPDATE: 
```

检测您的 HOME 键被按下的另一个解决方法是检查 ActivityManager 中的 Activity。当按下 HOME 按钮时，您的 BaseActivity 将保持在 Activity Lists 中的第二个位置。因此，您可以使用 ActivityManager 进行检查，如下所示，

```
 @Override
    protected void onUserLeaveHint() {
        super.onUserLeaveHint();
        Log.e("onUserLeaveHint()", "Yes");
        ActivityManager activityManager = (ActivityManager)
                                getSystemService(Context.ACTIVITY_SERVICE);
        List<RunningTaskInfo> recentTasks = activityManager
                                       .getRunningTasks(Integer.MAX_VALUE);
        for (int i=0; i<recentTasks.size(); i++) {
            if (i == 1 && recentTasks.get(i).baseActivity.toShortString()
                                        .indexOf(getPackageName()) > -1) {
                Log.e("Home Pressed", "Yes");
                break;
            }
        }
    } 
```

另外，不要忘记添加

```
<uses-permission android:name="android.permission.GET_TASKS"/> 
```

AndroidManifest 文件中的权限。进一步的参考可以从 中找到[`this blog`](http://tech.chitgoks.com/2011/09/05/how-to-override-back-home-button-in-an-android-app/)。

# php - PHP foreach 循环通过复选框

> ID：12136223
> 
> 赞同：0
> 
> 时间：2012-08-27T04:25:52.947
> 
> 标签：php, foreach

我想遍历所有结果，然后检查从数据库中选择的结果（2 个表）。现在它显示所有结果并检查正确的结果，但我的结果是重复的。我能做些什么来解决这个问题？

我现在得到什么

```
x item1
item1
item1
item2
x item2
item2
item3
item3
x item3
etc... 
```

我想要的结果

```
x item1
x item2
x item3
item4
item5
x item6
etc 
```

我使用的代码

```
<? foreach($modules as $key => $module): ?>
    <? foreach($selectedmodules as $key => $selected):?>
        <input type="checkbox" name="" value="<?=$module->module_id?>"
        <?=($selected->module_sel_id == $module->module_id ? 'checked="checked"' : '') ?>/><?=$module->module_name?><br />
    <? endforeach; ?>
<? endforeach; ?> 
```

模型（我使用 Codeigniter）

```
public function getModules()
{   
    $this->db->select('*');
    $this->db->from('module_type a');
    $this->db->join('module b', 'a.type_id = b.type_id');

    return $this->db->get()->result();
}

public function getSelectedModules($id)
{
    $this->db->select('b.module_sel_id');
    $this->db->from('module a');
    $this->db->join('module_select b', 'a.module_id = b.module_sel_id');
    $this->db->where('b.product_id', $id);

    return $this->db->get()->result();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:36:35.360

这是一个可行的版本*，*但这**不是最好的方法**，您绝对应该考虑找到一种方法来避免内部 loop.test 以查看是否应该检查它。

```
<? foreach($modules as $key => $module): ?>
    <? $checked = false; ?>
    <? foreach($selectedmodules as $key => $selected):?>
        <? if($selected->module_sel_id == $module->module_id) $checked = true; ?>
    <? endforeach; ?>
    <input type="checkbox" name="" value="<?=$module->module_id?>"
    <?=($checked ? 'checked="checked"' : '') ?>/><?=$module->module_name?><br />
<? endforeach; ?> 
```

当前的方式是遍历所有复选框，然后是所有选定的复选框。*最好*的方法是遍历所有复选框，然后测试是否应该检查它。这是一些伪代码：

```
<? foreach($modules as $key => $module): ?>
    <input type="checkbox" name="" value="<?=$module->module_id?>"
    <?=(in_array($module>module_id, $selectedmodules) ? 'checked="checked"' : '') ?>/><?=$module->module_name?><br />
<? endforeach; ?> 
```

# python-sphinx - 不渲染空格的 ReST 分隔符

> ID：12136226
> 
> 赞同：3
> 
> 时间：2012-08-27T04:27:22.067
> 
> 标签：python-sphinx, restructuredtext

这已经出现在一些地方，但我将使用脚注作为示例。假设我有一些引用脚注的 ReST 文本：

```
can be rendered in a single batch [#foot-diffuse]_. 
```

渲染时看起来像这样：

![丑陋的空间](../Images/bcb6ce3ac483b71f52b16bf9fe5fe8d3.png)

引用脚注时，文本后不应有空格。这就是我想要的样子：

![正确渲染](../Images/cc8363de34c1c07f6f97f4a76cafe5c5.png)

`batch`问题是和之间的空间`[#foot-diffuse]_`不是可选的。取出它会使 ReST 无效，并且根本不会呈现脚注。有没有办法在 ReST 中的单词和指令之间插入分隔符，而不会在最终输出中呈现为空格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T12:42:32.230

我想到了。原来你可以逃离这个空间。这有效：

```
can be rendered in a single batch\ [#foot-diffuse]_. 
```

# php - 加载具有多个控制器的视图

> ID：12136234
> 
> 赞同：1
> 
> 时间：2012-08-27T04:28:29.617
> 
> 标签：php, codeigniter, templates

我正在使用 Codeigniter：我有两个控制器。他们使用不同的模型。他们没有任何共同之处。控制器 1 是一个登录控制器，如果我的登录凭据正确，它会将我引导至安全页面。我只是想要 Controller 2: 只加载这个页面的中间部分，就是这样。为什么用 CI 做这件事这么难？

```
+-------------------------------------------------------+
|View "Home_Page"                                       |
+--------------------------------------------------------
| TOP:                                                  |
|Controller 1: function checklogin(){} loads this part  |
|                                                       |
--------------------------------------------------------+
|Middle:                                                |                                  
|Controller 2: function content(){ } loads this part    |
|                                                       |
--------------------------------------------------------+
|Bottom:                                                |                                  
|Controller 1: function checklogin(){} loads this part  |
|                                                       |
--------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:37:11.147

回答你的问题。

因为CI不是开发来做这种事情的？

不是 MVC 的东西？控制器不调用控制器，模型不调用控制器，视图不调用控制器，控制器调用它们想要的任何东西，只有调用控制器的东西是路由。

如果您想要类似的功能，请阅读有关[HMVC](http://codeigniter.com/forums/viewthread/72123/) / [Modular 分离](http://codeigniter.com/forums/viewthread/121820/)的信息。

无论如何，这是不好的做法，请考虑将您的代码重组为 MVC 并停止尝试让 CodeIgniter 做它不应该做的事情。

[关于 MVC 的内容以及模型的用途。](https://stackoverflow.com/questions/5863870/how-should-a-model-be-structured-in-mvc)

**控制器 1**

```
public function index() {
    $this->load->view("header");
    $this->load->view("top");
    $this->load->view("middle");
    $this->load->view("bottom");
} 
```

**控制器 2**

```
public function index() {
    $this->load->view("header");
    $this->load->view("middle");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T00:25:11.317

There are several auth libraries that work just fine, and they don't operate this way.

Generally the flow in CI is:

```
Request -> Front Controller 
-> Route
-> Controller
[-> Auth Library 
    [-> Auth Model]
] 
-> Display View 
```

Brackets are there to indicate optional components.

The controller will run the auth code, be it a library or another method in your controller, and then display a view or redirect the user based upon the outcome.

I personally use Tank Auth, but there are many others that will work as authentication libraries.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:50:39.573

我认为您需要母版页，

参考[这个](https://github.com/EllisLab/CodeIgniter/wiki/Extending-Controller-with-masterpage-template-funtionality)

# python - scipy.stats.kstest with distributions other than norm

> ID：12136235
> 
> 赞同：3
> 
> 时间：2012-08-27T04:28:37.140
> 
> 标签：python, scipy

I have trouble using the Kolmogorov-Smirnov test in scipy (scipy.stats.kstest). the online doc (http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.kstest.html) says it requires the sample, the cdf for comparison with the option of just naming one of the scipy.stats distributions, the cdf arguments (and several optional values)

as long as the chosen cdf does not require any additional arguments, all appears fine

```
teststat,pval=stats.kstest(sample,'norm') 
```

(where sample is a list of values.) However, with other distributions that require additional agruments, such as t, chisquared etc. it won't work for me. it protests correctly if no further arguments are given

```
teststat,pval=stats.kstest(sample,'t')

TypeError: _cdf() takes exactly 3 arguments (2 given) 
```

if an argument is given,

```
teststat,pval=stats.kstest(sample,'t',24) 
```

it complains

```
TypeError: cdf() argument after * must be a sequence, not int 
```

Now I'm not exactly sure what that means but it seems that it wants not int, 24, but a sequence of one int, (24). However:

```
teststat,pval=stats.kstest(sample,'t',24)

TypeError: cdf() argument after * must be a sequence, not int 
```

Defining the distribution manually does not yield better results either because it does not feel that this is callable:

```
numargs = stats.t.numargs
[ df ] = [0.9,] * numargs
rv = stats.t(df)
teststat,pval=stats.kstest(sample,stats.t.cdf(numpy.linspace(0, numpy.minimum(rv.dist.b, 3)),df))

TypeError: 'numpy.ndarray' object is not callable 
```

What do I do to make it work? (Google search for either the kstest function or the various error messages do not turn up anything useful to answer this question.)

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:46:51.137

Looking at this error:

```
TypeError: cdf() argument after * must be a sequence, not int 
```

makes me think that you're right, and it wants a sequence, not an integer. The docs say

```
args : tuple, sequence
    distribution parameters, used if rvs or cdf are strings 
```

Which seems to work:

```
>>> import scipy.stats
>>> sample = scipy.stats.t(1).rvs(size=10**6)
>>> scipy.stats.kstest(sample, 't', (1,))
(0.0006249662221899932, 0.82960203415652445) 
```

or more explicitly:

```
>>> scipy.stats.kstest(sample, 't', args=(1,))
(0.0006249662221899932, 0.82960203415652445) 
```

# java - ORA-01000: 超出批量更新 PreparedStatement 的最大打开游标

> ID：12136237
> 
> 赞同：3
> 
> 时间：2012-08-27T04:28:56.987
> 
> 标签：java, connection, cursor, batch-processing, ora-01000

我在数百万条记录上使用批量更新准备语句，但在执行 >400k 记录后最终在运行时遇到以下错误。

> java.sql.SQLException: ORA-01000: 超出最大打开游标

不知道是不是下面代码造成的

```
try{    
conn = ConnectionManager.getConnection();
// turn off autocommit
conn.setAutoCommit(false);

PreparedStatement stmt = conn.prepareStatement(query);

//for each of the records to be updated
for(int k=0;k<objects.length;k++) { 

    stmt.setString(1, objects[k].getValueA());
    stmt.setString(2, objects[k].getValueB());

    stmt.addBatch();

    //running batch execute on every 10000 records
    if(k%10000 == 0 || k == objects.length-1) {
        // submit the batch for execution
        int[] updateCounts = stmt.executeBatch();

        conn.commit();

        if(k < objects.length-1)
        {
            stmt.close();
            stmt = conn.prepareStatement(query);
        }
    }
}
}catch( Exception e ) {
    e.printStackTrace();
}finally {
    if(conn!=null){
        conn.close();
    }
} 
```

从而在提交连接后关闭 PreparedStatement 并用新的 PreparedStatement 替换。我不确定是否重复提交同一连接可能会导致此问题。

任何人都可以提出问题的解决方案或建议更好的架构来处理准备好的语句的批量更新。

P/S：错误行其实是指向delete语句执行的，但我不认为这是根本原因，因为之前批量更新准备语句代码添加之前不存在这个问题。

```
try {
    if ( hasData ) {
        conn = ConnectionManager.getConnection();
        CommonStore.deleteRecords( conn, queryStr ); //the error point to this line
        hasData = false;
    }
}catch( Exception e ) {
    e.printStackTrace();
}finally {
    if(conn!=null){
        conn.close();
    }
} 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:38:43.000

我观察到的一件事是：

```
if(k < objects.length-1)
{
    stmt.close();
    stmt = conn.prepareStatement(query);
} 
```

而不是`closing`你的`stmt`对象，我会建议重用它。这只是可以避免的开销。

我认为关闭和重新打开相同的`PreparedStatement`. 另外，你可以考虑打电话`PreparedStatement.clearParameters()`后`addBatch()`

# apache - 将真实域配置为 suddomain（通配符子域）？

> ID：12136238
> 
> 赞同：1
> 
> 时间：2012-08-27T04:29:32.913
> 
> 标签：apache, dns, subdomain, wildcard

我们提供博客平台，我们用通配符子域（aaa.testweb.com）分隔每个用户。如果他愿意，我们希望我们的用户能够切换到他的域 (www.aaa.com)。如何配置 Apache 服务器以支持以下场景？

请告知除了 httpd.conf 是否还有其他配置。

EX:
1\. 去**www.aaa.com**显示**aaa.testweb.com**
的内容 （地址栏中的 URL 是**www.aaa.com**）
2\. 去**www.aaa.com/content**显示**aaa.testweb的内容.com/content**
（地址栏中的 URL 是**www.aaa.com/content**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:18:31.207

StackOverflow 上已经有很多关于这个主题的问题，但我还是会插话并加上我的两美分的价值。:) 根据我的经验，这应该可以解决问题...

在我介绍细节之前：简而言之，您需要做的是设置 Apache 在收到请求时提供哪些信息。我在这里假设无论您的客户使用您的子域之一还是他们自己的域，您的服务器仍将托管博客？在这种情况下，重要的部分是客户的 VirtualHost 指令中的 ServerName。

下面是使用示例 URI 的这两种情况的示例，首先使用子域：

```
<VirtualHost *:80>
ServerName aaa.testweb.com
DocumentRoot /public_html/customers/aaa_html
# Other directives here
</VirtualHost> 
```

其次使用专用域名：

```
<VirtualHost *:80>
ServerName www.aaa.com
DocumentRoot /public_html/customers/aaa_html
# Other directives here
</VirtualHost> 
```

在 DNS 方面，每个指向您的网络主机的相关子域都应该有一条 A 记录，以便“aaa.testweb.com”的请求能够访问您的服务器。您可以通过将 *.testweb.com 指向您的服务器来轻松完成此操作，但这会将该域上的所有子域请求路由到您的服务器；如果请求的子域不存在，则将提供默认域站点。

我可能在这里弄错了，但我认为根据需要为每个新子域设置自定义 A 记录将有助于从长远来看更好地控制情况。

如果客户想要从一个选项切换到另一个选项，则 Apache 服务器上唯一需要的更新是他们的 VirtualHost 的 ServerName 规则。DNS 记录将通过相关的域注册商进行配置。

# r - 随 R 变化的增量序列？

> ID：12136240
> 
> 赞同：6
> 
> 时间：2012-08-27T04:29:43.383
> 
> 标签：r, sequence

我正在优化一些不同的模型，其中之一是使用该`caret`包的radialSVM。我正在创建一个调整网格，以准备循环循环以找到用于模型的最佳参数。

非常有用的一件事是某种变化的增量序列。例如，我想从以小步骤递增的小参数值开始。我走的越大，我可以采取的步骤就越大。我发现小参数确实会改变模型很多，所以我想更仔细地探索它们。

让序列增加当前步骤的某个乘数会很棒，比如`x <- x+5*x`。这对于已经存在的东西是否可行（比如创造性地使用`seq()`），还是我需要使用循环？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T05:29:12.833

像这样的东西怎么样：

```
0.0001 * 6^(0:10)
#  [1]    0.0001    0.0006    0.0036    0.0216    0.1296    0.7776    4.6656
#  [8]   27.9936  167.9616 1007.7696 6046.6176 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T05:40:32.593

您可以使用指数分布：

```
qexp((1:100)/100)

> qexp((1:100)/100)
  [1] 0.01005034 0.02020271 0.03045921 0.04082199 0.05129329 0.06187540 0.07257069 0.08338161
  [9] 0.09431068 0.10536052 0.11653382 0.12783337 0.13926207 0.15082289 0.16251893 0.17435339 
```

调整它以具有满足您需求的差异：

```
 diff( 20* qexp((1:100)/100) )
 [1]  0.2030474  0.2051300  0.2072557  0.2094260  0.2116422  0.2139058  0.2162183  0.2185814
 [9]  0.2209967  0.2234660  0.2259911  0.2285739  0.2312164  0.2339208  0.2366892  0.2395238 
```

# multithreading - 为多处理器系统实现锁和信号量？

> ID：12136245
> 
> 赞同：0
> 
> 时间：2012-08-27T04:30:39.820
> 
> 标签：multithreading, concurrency, synchronization, multiprocessing

在回顾一些系统软件概念时，我正在查看我在模拟单处理器上完成的旧操作系统项目。我想知道锁和信号量的概念如何扩展到四核计算设备。

您是否需要原子硬件指令支持，例如同步硬件内核的测试和设置？我只是不确定这将如何解决，以及多处理器的选项是什么，这是我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:41:05.073

你需要硬件方面的东西。原子测试和设置操作是您可以使用的一个示例。您所需要的实际上是特定于平台的，因为您需要解决的问题是特定于平台的。例如，如果您的平台有写入重新排序，您需要一些方法来防止您的写入被重新排序。如果没有，你就没有。

笼统地回答这个问题真的没有好办法。

# vb.net - 从 vb.net 中的字符串中删除 img 标签

> ID：12136246
> 
> 赞同：1
> 
> 时间：2012-08-27T04:30:40.277
> 
> 标签：vb.net

我的项目中有收件箱选项卡，我想只显示 40 个正文而不是所有正文。问题是，当我使用子字符串获得 40 个正文字符时，如果正文中存在 img 标签，有时这个 img 标签带有所有属性意味着完整的 src 但有时它不来意味着可以剪切 src。所以如何从正文中删除这个 img 标签并只获取简单的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:40:45.590

为了快速破解，您可以使用如下正则表达式：

```
Dim input As String = "test<img>" ' your data here
Dim imgRegex As New Regex("<img[^>]*>", RegexOptions.IgnoreCase)
Dim output As String = imgRegex.Replace(input, "") 
```

对于更一般的 HTML 解析，您应该使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。

# ajax - grails 将表单发布到具有异步结果的另一个页面

> ID：12136252
> 
> 赞同：1
> 
> 时间：2012-08-27T04:31:50.340
> 
> 标签：ajax, grails, atmosphere

我的应用程序中有一个表单，我希望允许用户提交表单并重定向到另一个页面，该页面将在结果可用时异步更新。我想知道如何做到这一点。

我的第一个想法是同步提交表单并立即重定向到最初为空的结果页面。然后使用某些版本的 Ajax 推送（例如氛围）来监听结果。

这是正确的方法还是有更简单的方法来解决这个问题？

我知道这类似于我提出的另一个问题（[grails show wait page on form submit](https://stackoverflow.com/questions/11076054/grails-show-wait-page-on-form-submit)），但扩展了一些评论以提出更具体的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:54:57.947

假设您想要实时更新结果，您提出的解决方案（执行普通表单提交/重定向然后服务器推送结果）是您能做的最好的。

# core-data - 什么是 Core Data 的 .omo 文件？是必需的吗？

> ID：12136253
> 
> 赞同：5
> 
> 时间：2012-08-27T04:32:00.380
> 
> 标签：core-data

当我编译 Core Data 模型时，我得到 .mom、.omo 和 versioninfo 文件。.mom 看起来像托管对象模型文件。什么是 .omo 文件？我不知道。尤其是当我想为 iOS 创建一个静态库时，如果我也嵌入 omo 文件会很混乱。而且 Xcode 无法识别数据模型包。我必须将它们作为文件基础。.omo 文件是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-09T21:35:17.260

在今年的 WWDC 上，我与实验室的 Core Data 工程师进行了交谈，他们告诉我该`.omo`文件只是该文件的优化版本`.mom`。该`.mom`文件是二进制 plist，而它`.omo`是加载速度更快的其他格式。

他们告诉我，您可以安全地删除该`.omo`文件，Core Data 将从——稍微慢一点的——<code>.mom 文件加载。他们告诉我这样做只会导致额外的几毫秒的加载时间（这引出了他们为什么要首先优化它的问题）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T02:25:54.540

在我的例子中，当我为一个实体关系指定 RenamingID 时生成了 omo 文件。我链接到这个文件的最糟糕的事情是，即使是简单的数据库更改，我也失去了使用轻量级数据库迁移的能力。

# css - CSS：如何使自动建议结果与输入字段对齐

> ID：12136254
> 
> 赞同：0
> 
> 时间：2012-08-27T04:32:27.080
> 
> 标签：css, alignment, autosuggest

如果我将输入字段移动到页面上的其他位置，我似乎无法使我的自动建议字段的结果与我的输入字段对齐。我想知道我是否会使用 position: absolute 还是什么？这是我的索引页面的代码：

```
<input type="text" class="autosuggest"> <input type="submit" value="Search">

<div class="dropdown">
   <ul class="result"></ul>
</div> 
```

这是我的CSS代码：

```
body{
 font:0.8em Verdana;
   }

.autosuggest, .dropdown, .result {
  margin:0;
  padding:0;
  border:0;
  width:250px;
}

.autosuggest {
  padding:4px;
  border:1px solid #000;
}

.result {
  width:260px;
  list-style:none;
}

.result li {
  padding:5px;
  border:1px solid #000;
  border-top:0;
  cursor: pointer;
}

.result li:hover {
  background:#333;
  color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:12:21.200

尝试用相对定位的包装器包装你的`input`and ，并添加for 。比尝试通过改变顶部和左侧来定位。`.dropdown``position:absolute``.dropdwon``.dropdown`

类似的东西[http://jsfiddle.net/zsUuK/6/](http://jsfiddle.net/zsUuK/6/)

# jquery - 使按钮不可见（不隐藏）

> ID：12136255
> 
> 赞同：2
> 
> 时间：2012-08-27T04:32:33.520
> 
> 标签：jquery, html, css, button

如何使按钮不可见，以便用户看不到按钮但可以按下它。

我一直在尝试这样做，但我发现的所有结果都导致隐藏按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:35:15.420

您是否尝试过将背景颜色、边框和颜色更改为与页面的背景颜色相同？

```
body{
   color: white;
}

.button {
  color: white;
  background-color: transparent;
  border: 0px none transparent;
} 
```

但是，还有许多其他方法可以实现这一点，具体取决于您需要这样做的原因。

或以下内容：

```
.transparent {
    zoom: 1;
    filter: alpha(opacity=0);
    opacity: 0;
} 
```

如 CSS 技巧链接中所述，仅供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T04:48:49.073

那为什么不跟`<input type="image">`呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T04:51:20.577

CSS 必须`opacity: 0`允许没有可见性但具有完整的功能：

```
<html>
<head>
<style type="text/css">
#button { opacity: 0;}
</style>

<script type="text/javascript">
function go()
{
    alert('clicked');
}

</script>
</head>
<body>

<button id="button" onclick="go()">hello</button></div>

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:46:12.373

过滤器：阿尔法（不透明度= 0）；不透明度：0；

还有一些针对更旧浏览器的样式选项@ [http://css-tricks.com/css-transparency-settings-for-all-broswers/](http://css-tricks.com/css-transparency-settings-for-all-broswers/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-08T04:21:18.763

```
`.button1 {
 margin: 10px 0px 0px 4px;
 position: absolute; 
 filter: alpha(opacity=65);
 -mos-opacity: 0.65;
 opacity: 0.65; 
 cursor: pointer;
 height: 85px;
 width: 85px;
 }` 
```

# ajax - JSF 2 更新表单外和 Facelet 外的组件

> ID：12136256
> 
> 赞同：7
> 
> 时间：2012-08-27T04:33:02.297
> 
> 标签：ajax, templates, jsf-2, primefaces, facelets

我在 <ui:insert name="content" /> 中有一个表单当我使用 ap:commandButton 保存数据时，我可以更新 <ui:insert name="content" /> 中的表单和内容。但我无法弄清楚如何更新 <ui:include src="/sections/menus/topMenu.xhtml"/> 中的组件

在顶部菜单中，我有一个面板的子视图，其中的链接取决于一个人是否登录。当他们登录时，我会显示他们的用户名。如果我在模板的内容部分更新用户名，我想更新 ui 以便菜单中的名称也更新而无需刷新页面。但这是我也可以使用的后备方案。更新后刷新页面。但宁愿不要。如果您愿意，我会发布更多代码，但尽量将其保持在最低限度。

```
 <h:body>
    <div id="wrap">
      <div title="Container">
          <ui:include src="/sections/base/header.xhtml"/>
        </div><!-- End of Banner -->

        <div id="baseTemplateTopMenu" title="Menu">
          <ui:include src="/sections/menus/topMenu.xhtml"/>
        </div><!-- End of Menu -->

        <div id="sbt_contentbody"> 

            <div title="Left Column">
              <ui:include src="/sections/base/leftsidebar.xhtml"/>
            </div> <!-- End of Left Column -->
            <div title="Content Column">
              <ui:insert name="content" />
            </div><!-- End of Centre Column -->
            <div title="Right Column">
              <ui:include src="/sections/base/rightsidebar.xhtml"/>
            </div><!-- End of Right Column -->

        </div>
        <div id="footer" title="Footer" class ="container">
          <ui:include src="/sections/base/footer.xhtml"/>
        </div><!-- End of Footer -->

      </div><!-- End of Container -->
  </h:body> 
```

下面是保存用户信息的 p:commandButton

```
<p:commandButton id="id_SubmitUserInfoPrefs"
                    value="Update"
                    action="#{userPreferences.updateUserInfo()}" styleClass="bottom_margin_2em top_margin_2em">
    <f:ajax execute="@form" render="@form :topMenuLoginView:topMenuLoginForm" />
<!-- tried adding 'update=":"topMenuLoginView:topMenuLoginForm"' as well. --> 
```

下面是模板的菜单部分。

```
<f:subview id="topMenuLoginView">
    <h:form id="topMenuLoginForm" prependId="false">
        <ul>
            <h:panelGroup id="loginPanel" rendered="#{!user.loggedIn}">
                <li><h:outputLink value="javascript:void(0)" onclick="topMenuLoginDialog.show()" 
                                    title="login" styleClass="loginpanelclass">Log In</h:outputLink></li>
                <li><h:link value="Register" outcome="/registration/register.xhtml" /></li>
            </h:panelGroup>
            <h:panelGroup id="logoutPanel" rendered="#{user.loggedIn}">
                <li><h:link value="#{user.nickname}" outcome="#{navigationprops.userprefs}" /> </li>
                <li><p:commandLink action="#{webAuthenticationBean.logout}" 
                                    update=":topMenuLoginView:topMenuLoginForm">
                        Logout
                    </p:commandLink>
                </li>
            </h:panelGroup>
        </ul>
    </h:form>
</f:subview> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T21:48:25.953

通过 ID 引用元素的一般思路如下：

假设我们有一个 element `<p:commandButton>`。

当元素没有 id 时，JSF 生成一个：

```
<button name="j_idt191" id="j_idt191" .... 
```

如果一个元素嵌套在像表单这样的容器元素中，JSF 会在 ID 前面加上表单的 ID：

JSF：

```
<h:form>
    <p:commandButton/>
</h:form> 
```

HTML：

```
<form id="j_idt48">
    <button name="j_idt48:j_idt191" id="j_idt48:j_idt191" ....
</form> 
```

当另一个容器中有元素时，您需要从根元素引用。这可以使用ID 前面的“ **: ”来完成。**这是一个例子：

```
<p:commandButton id="button1" update=":form:button2" ...

<h:form id="form">
    <p:commandButton id="button2" update=":button1" ...
</h:form> 
```

如果您不确定 JSF 为您的元素分配了什么 ID，请使用 FireBug 之类的工具来检查元素并发现它的 ID。

就您的代码而言，我认为不会`<f:subview>`生成容器元素，因此您需要`topMenuLoginForm`使用`update=":topMenuLoginForm"`.

* * *

话虽如此，如果您想使用 AJAX 更新元素，请使用 update 属性。请参阅我上面的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T08:26:57.850

更新窗体外的组件

```
<p:gmap center="36.890257,30.707417" zoom="13" type="ROADMAP" 
                style="width:600px;height:400px"
                model="#{mapBean.simpleModel}"
                onPointClick="handlePointClick(event);"
                widgetVar="cliMap" fitBounds="true"
                id="map">
            <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}"  />
        </p:gmap>

        <p:dialog widgetVar="dlg" showEffect="fade">
            <h:form prependId="false" id="formnew">
                <h:panelGrid columns="2">
                    <f:facet name="header">
                        <p:outputLabel value="New Point"/>
                    </f:facet>
                    <h:outputLabel for="title" value="Title:" />
                    <p:inputText id="title" value="#{mapBean.title}" />

                    <f:facet name="footer">
                        <p:commandButton value="Add" actionListener="#{mapBean.newPoint()}" update=":map" oncomplete="markerAddComplete()" />
                        <p:commandButton value="Cancel" onclick="return cancel()" />
                    </f:facet>
                </h:panelGrid>
                <h:inputHidden id="Nlat" value="#{mapBean.lat}"  />
                <h:inputHidden id="Nlng" value="#{mapBean.lng}" />

            </h:form>
        </p:dialog> 
```

我使用 update=":map" 以使用 Primefaces 的形式更新谷歌地图

# ruby-on-rails - 如何在 Heroku 上阻止或过滤 IP 地址？

> ID：12136260
> 
> 赞同：25
> 
> 时间：2012-08-27T04:34:32.257
> 
> 标签：ruby-on-rails, security, heroku, ip, rack

有没有办法实现 IP 过滤或 IP 访问规则，就像我使用 nginx/apache 来限制或阻止 Heroku 上的某些 IP？

**注意：**我知道这可以很容易地在我的应用程序（Rails 3.2）中完成，但我认为这不是在 Heroku 上最有效地使用我的资源。此外，基于 Rack 的解决方案比在 Rails 中实现过滤要好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-10T17:47:39.900

你应该检查[rack-attack](https://github.com/rack/rack-attack)。看起来它和 rack-block 一样，但使用更广泛，更新也更频繁。要阻止特定 IP，您可以执行以下操作：

```
# Block requests from 1.2.3.4
Rack::Attack.blacklist('block 1.2.3.4') do |req|
  # Requests are blocked if the return value is truthy
  '1.2.3.4' == req.ip
end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-02T18:40:03.837

我添加了[“机架块”](https://github.com/udzura/rack-block)作为机架中间件。在 config/initializers 中，添加一个新文件：

```
YourApp::Application.configure do

  config.middleware.insert_before(Rack::Lock, Rack::Block) do  
    # Add your rules with the rack-block syntax in here
  end

end 
```

奇迹般有效。

# ruby - Ruby：使用字符串/符号获取/设置对象的属性

> ID：12136262
> 
> 赞同：28
> 
> 时间：2012-08-27T04:34:47.963
> 
> 标签：ruby

在 Ruby 中，如何使用字符串/符号获取和设置对象的属性？

例如，如果我有一个`car`具有属性`car.color`和`car.name`.

我知道你可以做得到`car.send(:color)`它的属性，但我该如何设置呢？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-27T04:37:46.590

```
car.send("name=", value) 
```

或者

```
car.send("color=", value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T16:23:14.533

另一种方法是：

```
car.set_instance_variable('@color', value) 
```

# ios - viewForAnnotation 和 addAnnotation 的区别

> ID：12136264
> 
> 赞同：0
> 
> 时间：2012-08-27T04:35:01.040
> 
> 标签：ios, mkannotation, mkannotationview

我意识到它们有不同的返回值。我想我在问是因为我试图“刷新”注释的关联视图。

过程如下：我选择一个注释，然后通过操作表在不同的视图控制器中更改注释上的属性。在左侧标注附件视图中说出图像。

当我完成更改该属性时，我会弹回我的地图视图控制器。但是要查看任何更改，我必须离开地图视图控制器。

似乎注释已保存更改，但注释的视图并未反映这些更改。

我想知道这是否是我使用 viewForAnnotation 和 addAnnotation 的方式。

# jquery - jquery从iframe追加内容

> ID：12136266
> 
> 赞同：0
> 
> 时间：2012-08-27T04:35:05.837
> 
> 标签：jquery, append

我想将从 /index.html 的 iframe 加载的 (div class="StaffBlock") 中的一些内容传输到 div class="Contact-Agent-Append" 中。但我的 jquery 不工作，我不知道为什么，是因为我从 iframe 加载它？谢谢。

```
<iframe scrolling="no" height="60px" frameborder="0" width="150px" src="/index.html" marginwidth="0px" marginheight="0px" style="overflow:hidden; margin:0; padding:0; display: none;"></iframe>

<script>
$('.StaffBlock').appendTo($('.Contact-Agent-Append'));
</script> 

<div class="Contact-Agent-Append">content should go here
</div> 
```

## **问题更新：**

**这是存储在包含 StaffBlock 的远程 url 中的内容：**

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/StyleSheets/listing-contact.css" />
</head>
<body>
<div class="listing-contact">
<div class="StaffBlock">
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td class="col-a">{tag_name}</td>
    <td class="col-b" rowspan="4">{tag_Staff Photo}</td>
  </tr>
  <tr>
    <td>{tag_job title}</td>
  </tr>
  <tr>
    <td>{tag_mobile}</td>
    </tr>
  <tr>
    <td><a href="mailto:{tag_email}">email me</a></td>
  </tr>
</table>
</div>
</div>

</body>
</html> 
```

* * *

**这是包含 iframe 的原始编码：**

```
<div class="Contact-Agent-{tag_Publish As Agent}">

    <div class="Contact-Agent-Small-Logo-listing" title="this property is published by agent">
    </div>
    <iframe scrolling="no" height="60px" frameborder="0" width="150px" src="{tag_listing agent staff url}" marginwidth="0px" marginheight="0px" style="overflow:hidden; margin:0; padding:0; display: none;"></iframe>
    <script type='text/javascript'>//<![CDATA[ 
    $(window).load(function(){
    $('iframe').contents().find('.StaffBlock').clone().appendTo($('.Contact-Agent-Append'))‌​‌​
});//]]>  
    </script> 
    <div class="Contact-Agent-Append">1
    </div>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:29:07.640

您必须考虑到您必须**等到页面和 iframe 都准备好进行 DOM 操作**。使用一个`$(document).ready()`是不够的。

在您的情况下，您似乎可以修改 iframe 的内容。我建议**使用 iframe 将数据推送到主页**，而不是从中获取数据，它将确保两者都准备就绪。

您可能需要在 iframe 中加载 jQuery，最棒的是您可以**向选择器添加参数以更改其上下文**。默认为文档，但在您的情况下，您需要从 iframe 文档定位主页。

也不要忘记，如果你想要一个 div 的内容，一个选择器是不够的。要么使用它，`.html()`要么使用`.clone()`它。

```
// in your iframe :
$(document).ready(function()
{
    $('.Contact-Agent-Append', window.parent.document)
    // or window.parent.$('.Contact-Agent-Append')
        .append( $('.StaffBlock').html() );
}); 
```

您可能希望根据需要调整选择器，但它比 setInterval 工作得更快。如果一开始它不起作用，请尝试从主页中删除 jQuery 以防止任何冲突，如果它解决了您的问题，请尝试使用[`j=jQuery.noConflict();`](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:50:11.777

这个怎么样：

```
<iframe id="iframe1" scrolling="no" height="60px" frameborder="0" width="150px" src="/index.html" marginwidth="0px" marginheight="0px" style="overflow:hidden; margin:0; padding:0; display: none;"></iframe>

$(document).ready(function() {
   $('#iframe1').each(function() {
       $('.Contact-Agent-Append').append($('div.StaffBlock',this.contentWindow.document||this.contentDocument).html() );
    })
}); 
```

这假设 iframe 源位于同一域上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:20:49.300

```
 $(window).load(function(){
var flag=true;
          var id= setInterval(function(){if(typeof($('iframe').contents().find('body.StaffBlock').html())!='undefined')
               {
if(flag){
$('.Contact-Agent-Append').append( $('iframe').contents().find('body.StaffBlock').clone())‌​‌​; 
}
flag=false;
        }

    },500);
            }); 
```

# html - iPad上的顶部边框没有延伸全宽？

> ID：12136267
> 
> 赞同：1
> 
> 时间：2012-08-27T04:35:11.113
> 
> 标签：html, css, ipad

我的页面正文顶部有一个 15 像素的边框。

在 iPad 上，此边框被切断，在右侧留下空白区域。

截图 - [http://cl.ly/image/0m1V3T2D3A0j](http://cl.ly/image/0m1V3T2D3A0j)

如何确保边框延伸到 iPad 上视口的右边缘？我尝试将 width: 100% 添加到 body 元素，以及其他一些调整，但我无法解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:36:46.303

这是因为你的身体内容对于 iPad 来说太宽了。#all-logos 为 1157px 宽 - iPad 分辨率为 1024 × 768。也就是说，如果你在 iPad 3 上查看它，分辨率为 2048 × 1536，我猜它会起作用。

您可能想要为移动设备添加一些条件格式。

# android - 安卓游戏菜单

> ID：12136270
> 
> 赞同：0
> 
> 时间：2012-08-27T04:35:44.283
> 
> 标签：android, button

我是 android 编程新手。我的代码需要帮助。如您所见，在单击使用 onDraw 方法和 onTouchEvent 制作的按钮后，我有一个菜单。

```
 public boolean onTouchEvent(MotionEvent event)
    {
    CoordCheck cc = new CoordCheck();
    Log.d(TAG, "Coords: X=" + event.getX() + ",Y=" + event.getY()+"choice="+glb.getChoice());

    if (event.getAction() == MotionEvent.ACTION_DOWN)
    {
        float x, y;
        x = event.getX();
        y = event.getY();
        //
        // MAIN MENU
        //
        if(glb.getChoice()==0)
        {
            if (cc.ifMenu_exit(x, y))
            {
                thread.setRunning(false);
                ((Activity)getContext()).finish();
            }

            else if (cc.ifMenu_pagsasanay(x,y))
            {
                thread.menu_pagsasanay();
            }
        }
        //
        // PAGSASANAY MENU
        //
        if(glb.getChoice()==1)
        {
            Log.d(TAG,"PAGSASANAY MENU");
            if (cc.ifPagsasanay_pitik(x, y))
            {       
                pitik = new PitikBulagAnimation(
                        BitmapFactory.decodeResource(getResources(), R.drawable.hand_sprites) 
                        , 450, 60   // initial position
                        , 350, 41   // width and height of sprite
                        , 50, 6);   // FPS and number of frames in the animation
                Log.d(TAG,"pitik");
                thread.pitikAnimation();
            }
            else if (cc.ifPagsasanay_jnp(x, y))
            {
                jnp = new JNPAnimation(
                        BitmapFactory.decodeResource(getResources(), R.drawable.ai_sprite) 
                        , 550, 70   // initial position
                        , 283, 41   // width and height of sprite
                        , 50, 4);   // FPS and number of frames in the animation
                Log.d(TAG,"jnp");
                thread.jnpAnimation();
            }
            if(cc.ifBackButton(x, y))
            {
                thread.menu_main();
            } 
```

err.. glb.getChoice 如果值为零，则表示视图包含主菜单。我的问题是，如果我单击“pagsasanay”按钮（在主菜单内），我可以转到 Pagsasanay 菜单，并且 glb 类中的选项将设置为 1，但到达那里后，event.getX() 值仍然存在，因此单击另一个与“pagsasanay”按钮坐标完全相同的按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:37:17.950

您用作按钮的这些视图应在 xml 中设置 onClick 属性。onClick 属性标识了单击视图时要调用的方法，在该方法中，您可以决定要采取的操作、提供新菜单或其他操作。如果您更面向 Java，则可以为每个视图编写 onClickListeners 代码，但恕我直言，这只是要编写更多代码。另一方面，有时对侦听器进行编码是有意义的，这取决于您在做什么。到目前为止，从我对您的代码的了解来看，请使用 xml 定义的 onClick 属性。

# c++ - 堆深拷贝上的轮子的C++数组

> ID：12136271
> 
> 赞同：0
> 
> 时间：2012-08-27T04:35:45.143
> 
> 标签：c++, arrays, heap-memory, deep-copy

这是我的代码：

```
//---------------------------------------------------------------------------

#pragma hdrstop

#include <tchar.h>
#include <string>
#include <iostream>
#include <sstream>
#include <conio.h>

using namespace std;

//---------------------------------------------------------------------------

class Wheel
{
public:
        Wheel()
    {
        pressure = 32;
        ptrSize = new int(30);
    }
    Wheel(int s, int p)
    {
        ptrSize = new int(s);
        pressure = p;
    }
    ~Wheel()
    {
        delete ptrSize;
    }
    void pump(int amount)
    {
       pressure += amount;
    }

private:
    int *ptrSize;
    int pressure;
};

class RacingCar
{
public:
    RacingCar()
    {
        speed = 0;
        Wheel carWheels = new Wheel[3];
    }
    RacingCar(int s)
    {
        speed = s;
    }
    void Accelerate()
    {
        speed = speed + 10;
    }

private:
    int speed;
}; 
```

我使用此代码创建一个 RacingCar 对象：

```
RacingCar test(); 
```

然而我收到以下错误：

> [BCC32 错误] 问题 4.cpp(48): E2285 找不到匹配 'Wheel::Wheel(const Wheel&)'

在线：

```
Wheel carWheels = new Wheel[3]; 
```

我想创建一个由 4 个轮子组成的数组作为堆上的对象数组。

我究竟做错了什么？

**更新**

我想为 RacingCar 类使用复制构造函数，它将创建 RacingCar 对象的深层副本，然后编写代码来证明 RacingCar 对象的副本是深层副本。

我可以帮忙吗？

这是我的代码：

```
class RacingCar
{
public:
    RacingCar()
    {
        speed = 0;
        Wheel* carWheels = new Wheel[3];
    }
    RacingCar(int s)
    {
        speed = s;
    }
    RacingCar(const RacingCar &oldObject)
    {
        //I am not sure what to place here.
        Wheel* carWheels = new Wheel[3];

    }
    void Accelerate()
    {
        speed = speed + 10;
    }

private:
    int speed;
}; 
```

*** 第二次更新**

这是我当前的代码：

```
class Wheel
{
public:
    Wheel() : pressure(32)
    {
        ptrSize = new int(30);
    }
    Wheel(int s, int p) : pressure(p)
    {
        ptrSize = new int(s);
    }
    ~Wheel()
    {
        delete ptrSize;
    }
    void pump(int amount)
    {
        pressure += amount;
    }
    int getSize()
    {
        return *ptrSize;
    }
    int getPressure()
    {
        return pressure;
    }
private:
    int *ptrSize;
    int pressure;
};

class RacingCar
{
public:
    RacingCar()
    {
        speed = 0;
        *carWheels = new Wheel[4];
    }
    RacingCar(int s)
    {
        speed = s;
    }
    RacingCar(const RacingCar &oldObject)
    {
        for ( int i = 0; i < sizeof(carWheels)/sizeof(carWheels[0]); ++i)
        {
            Wheel oldObjectWheel = oldObject.getWheel(i);
            carWheels[i]=new Wheel(oldObjectWheel.getSize(),oldObjectWheel.getPressure());
        }

    }
    void Accelerate()
    {
        speed = speed + 10;
    }
    Wheel getWheel(int id)
    {
        return *carWheels[id];
    }
private:
    int speed;
    Wheel *carWheels[4];
}; 
```

复制构造函数无法正常工作。我在以下位置出现错误：

```
Wheel oldObjectWheel = oldObject.getWheel(i); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:39:14.457

这是语法错误，应该是

```
 Wheel* carWheels = new Wheel[3]; 
```

`new`返回一个指针类型 - 指向`Wheel`数组中第一个的指针，因此`carWheels[i]`按预期工作以访问第`i`th 个轮子。

**考虑分配四 (4) 个车轮，除非您确定您的汽车可以安装三 (3) 个车轮。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T04:39:28.647

您正在尝试创建一个`Wheel`被调用并将其值初始化为指向 3 s`carWheels`数组的指针。`Wheel`你可能想要：

```
Wheel* carWheels = new Wheel[3]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:57:15.547

我写了一个深拷贝的例子，希望这有帮助。

```
//---------------------------------------------------------------------------

#include <iostream>

using namespace std;

//---------------------------------------------------------------------------

class Demo
{
public:
    // Constructor
    Demo()
    {
        ptrNeedsDeepCopy = new int(10);
    }

    // Copy constructor
    Demo(const Demo& rhs)
    {
        // You need to allocate new memory to make sure the two
        // objects are not pointing to the same memeory.
        ptrNeedsDeepCopy = new int(*(rhs.ptrNeedsDeepCopy));
    }

    // Copy assign operator
    Demo& operator=(const Demo& rhs)
    {
        // Do things same in the copy constructor
        // AND!!! you have to check that the object is not
        // assigning it to itself.
        if(this != &rhs)
        {
            ptrNeedsDeepCopy = new int(*(rhs.ptrNeedsDeepCopy));  
        }
        return *this;
    }

    // Destructor
    ~Demo()
    {
        delete ptrNeedsDeepCopy;
    }

    void SomeMemberFunctions()
    {
        // What ever.
    }

    int GetPtrValue()
    {
        if(ptrNeedsDeepCopy)
        {
            return *ptrNeedsDeepCopy;
        }
    }

    void SetPtrValue(int val)
    {
        if(ptrNeedsDeepCopy)
        {
            *ptrNeedsDeepCopy = val;  
        }
    }

private:
    int *ptrNeedsDeepCopy;

};

int main()
{
    Demo a;
    Demo b = a;

    cout << "a's initial value: " << a.GetPtrValue() << endl;
    cout << "b's initial value: " << b.GetPtrValue() << endl;

    a.SetPtrValue(7);

    cout << endl;

    cout << "a's changed value: " << a.GetPtrValue() << endl;
    cout << "b's changed value: " << b.GetPtrValue() << endl;

    return 0;
} 
```

# windows - 如何在 Win 8 Metro 中创建媒体接收器

> ID：12136273
> 
> 赞同：1
> 
> 时间：2012-08-27T04:35:55.000
> 
> 标签：windows, window, microsoft-metro

我有一个问题：我想从网络摄像头和微型捕获视频和音频以进行流式传输，并将其显示在其他机器
上关于它的样本
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:55:51.977

将视频链接存储在云端，并使用其他电脑上的程序访问数据。

# facebook - facebook-php-sdk loginurl api 错误代码 100

> ID：12136274
> 
> 赞同：0
> 
> 时间：2012-08-27T04:36:01.713
> 
> 标签：facebook, facebook-php-sdk

我正在尝试使用来自 [https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)的 Facebook PHP SDK (v.3.2.0) 创建一个 facebook 登录 url 下面是我的代码

```
$config = array(    'appId'  => '***',  
                    'secret' => '***',  
                    'cookie' => true 
                    );
require_once("facebook.php");

$facebook = new Facebook($config);

$params = array('scope' => 'user_birthday, user_location, email',
                'redirect_uri' => "http://my_domain.in/user/fb",    
                'display' => 'popup'
                );
$loginUrl = $facebook->getLoginUrl($params); 
```

问题是当 loginUrl 被点击时，它会从 facebook 给出错误，如下所示：

> API 错误代码：100 API 错误描述：无效参数错误消息：显示类型**弹出窗口**。在 www.facebook.com 上无效。您应该访问不同的域（m.facebook.com、www.facebook.com），或使用以下支持的显示类型之一：page、**popup**、iframe、touch、none

问题是我哪里出错了？仅供参考，之前相同的代码很好，不知何故现在不起作用，我有点错过了问题实际上发生的时候，但在这之间我确实将 facebook-php-sdk 从 3.1.1 升级到 3.2.0，n 可能我的 facebook 应用程序中的域和 url 设置。

> 应用程序域：my_domain.in 网站网址：[http ://www.my_domain.in](http://www.my_domain.in)

此外，即使我将参数更改为

```
$params = array('scope' => 'user_birthday, user_location, email',
                'redirect_uri' => "http://my_domain.in/user/fb"
                ); 
```

我仍然收到带有不同消息的错误

> API 错误代码：100 API 错误描述：无效参数错误消息：不支持的范围：'**电子邮件**。'。支持的范围： ads_management create_event create_note **email**export_stream friends_about_me friends_activities friends_birthday friends_checkins friends_education_history friends_events friends_games_activity friends_groups friends_hometown friends_interests friends_likes friends_location friends_notes friends_online_presence friends_photo_video_tags friends_photos friends_questions friends_relationship_details friends_relationships friends_religion_politics friends_status friends_subscriptions friends_videos friends_website friends_work_history manage_friendlists manage_notifications manage_pages offline_access photo_upload publish_actions publish_checkins publish_stream read_friendlists read_insights read_mailbox read_page_mailboxes read_requests read_stream rsvp_event share_item sms status_update user_about_me user_activities user_birthday user_checkins user_education_history user_eventsuser_games_activity user_groups user_hometown user_interests user_likes user_location user_notes user_online_presence user_photo_video_tags user_photos user_questions user_relationship_details user_relationships user_religion_politics user_status user_subscriptions user_videos user_website user_work_history video_upload xmpp_login

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:55:38.123

解决了。

问题是我的 href 属性中有一个附加字符（一个点），如下所示

```
<a href="<?php echo $loginUrl; ?>."> 
```

再次查看错误消息后注意到它（弹出* *。* *电子邮件* *。* *）。

当我删除角色时，它就起作用了。所以它不是由 facebook-php-sdk 版本或我的 facebook 应用程序中的域/url 设置引起的。

很抱歉造成的任何麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T08:37:38.003

在这种情况下，您不能使用该`display`参数，因为您只是在创建一个 URL——而且 URL 本身不包含任何告诉“我想在弹出窗口中打开”的能力。

该参数主要用于使用`FB.ui`JS SDK 外的方法调用对话框。

只需从`$params`数组中删除该条目，它就可以工作了。

# php - PHP将术语分解为数组，将引用的文本保留为单个数组项

> ID：12136277
> 
> 赞同：0
> 
> 时间：2012-08-27T04:36:30.887
> 
> 标签：php, explode

我有来自表单的以下字符串...

> Opera“添加跨平台硬件”“踢屁股”-嬉皮士

一般来说，我一直在使用以下...

```
$p0 = explode(' ',$string); 
```

但是，现在我想将任何和所有引号运算符维护为单个数组项，而不是让它们创建单独的项，例如`"adds`,`cross-platform`和`hardware"`.

我想让那个字符串最终创建一个像这样的数组......

```
Array
(
    [0] => 'Opera',
    [1] => 'adds cross-platform hardware',
    [2] => 'kicks butt',
    [3] => '-hippies'
) 
```

我通常更喜欢在大多数情况下尽可能不使用正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T04:43:24.827

你可以使用一个`preg_match_all(...):`

```
$text = 'Opera "adds cross-platform hardware" "kicks butt" -hippies';
preg_match_all('/"(?:\\\\.|[^\\\\"])*"|\S+/', $text, $matches);
print_r($matches); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T05:04:43.557

如果你使用 PHP >= 5.3，你可以使用[str_getcsv](http://www.php.net/manual/en/function.str-getcsv.php)

```
print_r(str_getcsv('Opera "adds cross-platform hardware" "kicks butt" -hippies'," ")); 
```

印刷

```
Array
(
    [0] => Opera
    [1] => adds cross-platform hardware
    [2] => kicks butt
    [3] => -hippies
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:09:16.780

当我在寻找最快的方法时，我想我会在挑战中添加自己的方法。

```
<?php
$q = 'Opera "adds cross-platform hardware" "kicks butt" -hippies';
echo '<div>'.$q.'</div>';
$p0 = explode(' ',$q);
echo '<div><pre>';print_r($p0);echo '</pre></div>';

$open = false;
$terms = array();
foreach ($p0 as $key)
{
 if ($open==false)
 {
  if (substr($key,0,1)=='"')
  {
   $open = $key;
  }
  else {array_push($terms,$key);}
 }
 else if (substr($key,strlen($key) - 1,strlen($key))=='"')
 {
  $open = $open.' '.$key;
  array_push($terms,$open);
  $open = false;
 }
 else
 {
  $open = $open.' '.$key;
 }
}

echo '<div><pre>';print_r($terms);echo '</pre></div>';

echo '<div><pre>';print_r($open);echo '</pre></div>';
?> 
```

输出以下...

> Opera“添加跨平台硬件”“踢屁股”-嬉皮士
> 
> //初始按空格爆炸...
> 
> 大批 （
> 
> ```
> [0] => Opera
> [1] => "adds
> [2] => cross-platform
> [3] => hardware"
> [4] => "kicks
> [5] => butt"
> [6] => -hippies 
> ```
> 
> )
> 
> //最终结果...
> 
> 大批 （
> 
> ```
> [0] => Opera
> [1] => "adds cross-platform hardware"
> [2] => "kicks butt"
> [3] => -hippies 
> ```
> 
> )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:53:14.450

在不使用正则表达式的情况下尝试这个，粗略的代码

```
<?
$string='Opera "adds cross-platform hardware" "kicks butt" -hippies';
$g=explodeMe($string);
echo "<pre>";
print_r($g);
echo "</pre>";

function explodeMe($string){
    $k=explode('"',$string);
    foreach ($k as $key => $link)
    {
        if ($k[$key] == ' ')
        {
            unset($k[$key]);
        }
    }
    return array_values($k);
}
?> 
```

# javascript - 在同一视图中使用 javascript 在视图中创建的调用函数

> ID：12136280
> 
> 赞同：2
> 
> 时间：2012-08-27T04:36:50.167
> 
> 标签：javascript, jquery, razor

我创建了一个包含 Javascript 和函数的视图，如下所示：

```
@functions
{
    public int DaysInMonth(string Month)
    {
         //code to get the no of days in month;
    }
} 
```

我有包含月份的下拉列表。现在我想使用 jQuery 在下拉列表的更改事件上编写代码，这将调用上述函数。

```
<script type="text/javascript">
    $(function () {
        $('#Months').live('change', function () { 
           //code to call the above function  
        });
    });
</script> 
```

这里`('#Months') is the id`的下拉列表..

注意：以上两个代码片段都在同一个视图（索引）中。

我如何链接上面的两个代码片段？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:02:30.243

```
@functions
{
    public int DaysInMonth(string Month)
    {
         //code to get the no of days in month;
    }
} 
```

试试这样

```
<script type="text/javascript">
    @DaysInMonth(month);
</script> 
```

它在我的程序中运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T04:50:42.580

尝试这个：

```
/*@cc_on @*/

<script type="text/javascript">
    $(function () {
        $('#Months').live('change', function () { 
           var monthSelected = $(this).val();
           //code to call the above function 
           @DaysInMonth(monthSelected);
        });
    });
</script> 
```

有关这方面的更多信息，请访问：http: [//www.mikesdotnetting.com/Article/173/The-Difference-Between-@Helpers-and-@Functions-In-WebMatrix](http://www.mikesdotnetting.com/Article/173/The-Difference-Between-@Helpers-and-@Functions-In-WebMatrix)

也看看这个答案： [JavaScript 错误：条件编译在 MVC2 视图中被关闭](https://stackoverflow.com/questions/4686283/javascript-error-conditional-compilation-is-turned-off-in-mvc2-view)

# javascript - 在提交时向表单添加外部输入值

> ID：12136284
> 
> 赞同：7
> 
> 时间：2012-08-27T04:37:08.620
> 
> 标签：javascript, jquery, forms

我有一个典型的形式：

```
<form action="" accept-charset="utf-8" method="post">
    <textarea name="content"></textarea>
</form> 
```

和一个 not-inside-a-form 元素：

```
<input type="password" name="password"> 
```

提交表单时如何将密码值添加到表单中？

```
$('form').submit(function(){
   //hmmm
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T04:40:49.037

在表单中创建一个隐藏字段，并在提交时将密码字段值复制到该字段。像这样。

```
<form action="" accept-charset="utf-8" method="post">
    <textarea name="content"></textarea>
    <input type="hidden" name="password" id="ps">
</form>

<input type="password" name="password" id="ps1"> 
```

并在提交功能。

```
$('form').submit(function(){
   $('input#ps').val($('input#ps1').val());
   return true;
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T04:49:34.813

“正确”执行此操作的尚未受支持但符合 HTML5 的方法是为您的`<input>`元素提供一个[`[form]`属性](http://www.w3.org/TR/2011/WD-html5-20110525/association-of-controls-and-forms.html#attr-fae-form)：

```
<form id="foo">
    ...stuff...
</form>

<input type="password" id="bar" form="foo" /> 
```

最终你可能会使用它作为解决方案，但在更多浏览器支持该`[form]`属性之前，你必须使用 JavaScript 来填充它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T04:40:46.790

```
$('form').submit(function(){
   var password = $('input[type="password"]');
   password.appendTo($(this));
   //or $(this).append(password);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T04:44:22.643

在表单内部包含一个隐藏的输入元素，在外部输入的更改事件上，为内部输入分配外部输入值。

```
<form action="" accept-charset="utf-8" method="post">
    <textarea name="content"></textarea>
    <input type="hidden" id="inner" />
</form>
<input type="password" name="password" >

<script type="text/javascript">
    $(function(){
        $('#outer').change(function(){
            $('#inner').val($(this).val());
        });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T04:44:38.337

在表单中使用隐藏的输入字段，如下所示：

前任 ： `<input type="hidden" name="pass">`

当您提交这样的表格时：

```
$('form').submit(function(){
 <!-- Save the value of password into the hidden field
  Note : Password here should just be one field in that page -->
 $('input[name="pass"]').val($('input[type="password"]').val());
 return true; 
```

});

# java - 使用 Java / DOM 从 XML 中读取 QName

> ID：12136286
> 
> 赞同：0
> 
> 时间：2012-08-27T04:37:13.347
> 
> 标签：java, xml

我有一个在 XML 文件中编码的 QName，如下所示。如何将它读入 Java javax.xml.namespace.QName？这也是在 XML 中编码 QName 的正确方法吗

```
<messages>
    <message>
        <qname xmlns:msg-i="http://www.abc.com/message">msg-i:InformationMessage</qname>
    </message>
</messages> 
```

和Java代码

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document messagesDoc = db.parse(file);
messagesDoc.getDocumentElement().normalize();

NodeList messages = messagesDoc.getDocumentElement().getElementsByTagName("message");

for (int i = 0; i < messages.getLength(); i++) {
    //read the QName here
    QName qname = ...;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T04:59:03.077

是的，这是解析 xml 元素及其标签值的更好方法，使用 Node 和 Element 接口在子节点之间迭代以解析 xml 元素值。我希望它会对你有所帮助..

# sql - 尝试在 Ruby 中的 SQL 查询中使用绑定变量时出现语法错误

> ID：12136287
> 
> 赞同：1
> 
> 时间：2012-08-27T04:37:24.727
> 
> 标签：sql, ruby, sqlite, bind, sqlite3-ruby

我正在使用 sqlite3 并尝试将绑定变量传递到命令行应用程序中的 SQL 语句中，我正在尝试将其作为[http://www.pangloss.com/seidel/shake_rule.html](http://www.pangloss.com/seidel/shake_rule.html)的复制。这是用于添加/删除数据库的管理实用程序。我只是想了解如何将 SQL 与 Ruby 一起使用，并为我目前正在玩的游戏的 DM 构建一个纸笔 rpg 实用程序集。

```
db.execute ("INSERT INTO insults (position, string) VALUES (?, ?);",    cmd_args[1].to_i, cmd_args[2])

db.execute("SELECT * FROM insults WHERE position = ? AND string = ?;", cmd_args[1].to_i, cmd_args[2]) do |output|
  puts output
end 
```

第一个查询导致语法错误“意外'，'，期待'）'”和更多错误，但是当我注释掉这一行时它们消失了。

后一个查询似乎没有根本的不同，但是当我注释掉前者时它不会导致错误。当我手动设置 cmd_args 数组值时，它仍然没有输出任何内容。数据库中有一些测试元素，即“1|test”不输出，但没有抛出错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:12:45.437

方法名称和左括号之间不能有空格。你的第一个：

```
db.execute ("INSERT INTO insults (position, string) VALUES (?, ?);",    cmd_args[1].to_i, cmd_args[2]) 
```

更像是这样解释的：

```
x = ("INSERT ....", cms_args[1].to_i, cmd_args[2])
db.execute x 
```

但是`(a, b, c)`在这种情况下，像这样的结构不是合法的 Ruby 语法，并且存在语法错误。

你的第二个：

```
db.execute("SELECT * ...", cmd_args[1].to_i, cmd_args[2]) do |output|
  puts output
end 
```

应该可以正常工作，因此您的 WHERE 子句可能与任何内容都不匹配，因此您不会得到任何结果。检查内容`cmd_args`并确保：

1.  你没有任何杂散的空白。
2.  您的论点确实是 in`cmd_args[1..2]`而不是`cmd_args[0..1]`.

# android - Android - 无法打开资产文件

> ID：12136293
> 
> 赞同：0
> 
> 时间：2012-08-27T04:37:53.863
> 
> 标签：android, sqlite

我在资产文件夹中有一个 sqlite 文件。我正在使用在其他堆栈溢出帖子中已被引用数千次的数据库管理器类：[http ://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

```
private void copyDatabase() throws IOException {
        // Open your local db as the input stream
        InputStream myInput = context.getAssets().open( DB_NAME ); 
```

问题在于不断抛出 IOException 的 open() 方法（或 getAssets？）。我的路径和文件名：

```
private static final String DB_NAME = "attractioninfo";
private static final String DB_PATH = "/data/data/seattle.tourists/"; 
```

我的另一个相关问题是关于路径。我已经检查了我的测试手机（三星 Galaxy sII）上的文件，但我没有在任何地方看到 /data/data/mypackagename/...。这在内部存储中到底在哪里？我使用的是安卓 2.2。

编辑：我做了更多测试，我还发现在第一次安装时（这意味着手机内部存储上还没有数据库文件，需要复制到那里）这条线也不起作用（我得到一个SQLite异常）

```
private boolean checkDatabase() {
    SQLiteDatabase checkDB = null;

    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase( myPath, null, SQLiteDatabase.OPEN_READONLY ); 
```

完整代码：

```
package seattle.tourists;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.content.res.AssetManager;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {
    private static final String DB_NAME = "attractioninfo";
    private static final String DB_PATH = "/data/data/seattle.tourists/databases/";
    private static final int DB_VERSION = 1;
    private static final String TABLE_NAME = "ExtraInfo";

    private SQLiteDatabase db;
    private final Context context;

    /**
     * Constructor
     * @param context application context
     */
    public DatabaseHelper( Context context ) {
        super( context, DB_NAME, null, DB_VERSION );
        this.context = context;
    }

    /**
     * Creates empty database on system and rewrites it with existing database
     * @throws IOException
     */
    public void createDatabase() throws IOException {
        boolean dbExist = checkDatabase();

        if ( dbExist ) {
            // do nothing, the database already exists;
        }
        else {
            this.getReadableDatabase();

            try {
                copyDatabase();
            }
            catch ( IOException e ) {
                throw new Error( "Error copying database" );
            }
        }
    }

    /**
     * Check to see if a database exists
     * @return true if database exists, false otherwise;
     */
    private boolean checkDatabase() {
        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase( myPath, null, SQLiteDatabase.OPEN_READONLY );
        }
        catch ( SQLiteException e ) {
            int x = 5;
        }

        if ( checkDB != null )
            checkDB.close();

        return checkDB != null ? true : false;
    }

    /**
     * Copes database from assets-folder to system folder, where it can be
     * accessed and handled. This is done by transferring byte-stream.
     * @throws IOException
     */
    private void copyDatabase() throws IOException {
        // Open your local db as the input stream
        AssetManager assets = context.getAssets();
        InputStream myInput = assets.open( DB_NAME );

        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream( outFileName );

        // transfer bytes from the inputfile to the outputfile
        byte [] buffer = new byte[ 1024 ];
        int length;
        while ( ( length = myInput.read( buffer ) ) > 0 )
            myOutput.write( buffer, 0, length );

        // close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();
    }

    public SQLiteDatabase openDataBase() throws SQLException {
        // Open the database
        String myPath = DB_PATH + DB_NAME;
        return db = SQLiteDatabase.openDatabase( myPath, null, SQLiteDatabase.OPEN_READONLY );
    }

    public synchronized void close() {
        if ( db != null )
            db.close();

        super.close();
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // do nothing
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // do nothing
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:27:14.867

发现我使用了错误的文件格式。我使用的是 txt/SQL 格式而不是 sqlite。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:02:51.717

在您的路径中：

私有静态最终字符串 DB_PATH = "/data/data/seattle.tourists/";

* * *

缺少目录 wc 是包名称后的“/database/”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T04:56:53.377

从资产使用打开一个数据库

```
AssetManager am = myContext.getAssets();
InputStream is = am.open("DB Name"); 
```

`Another related question I have is about the path. I've checked the files on my testing phone (samsung galaxy sII) but I don't see a /data/data/mypackagename/..`

由于安全原因，您无法在设备上看到您的数据库。如果您真的想查看您的数据库。然后你需要在模拟器上安装你的应用程序

编辑：

复制数据库的代码

```
 private static String db_path = "/data/data/your.package.name/databases/";
 private static final String database_name = "search";

 private void copyDataBase() throws IOException {

    String outFileName = db_path + database_name+".db";
    // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);
    // transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int i, r;
    AssetManager am = myContext.getAssets();
    String fn = String.format(database_name);
        InputStream is = am.open(fn);
    while ((r = is.read(buffer)) != -1)
       myOutput.write(buffer, 0, r);
        is.close();

    // Close the streams
    myOutput.flush();
    myOutput.close();

} 
```

检查数据库

```
private boolean checkDataBase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = db_path + database_name+".db";

        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    } catch (SQLiteException e) {
        // database does't exist yet.
    }
    if (checkDB != null) {
        checkDB.close();
    }
    return checkDB != null ? true : false;
} 
```

确保您已添加

`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

在你`manifest file`。

# php - 检测和查询特定语言

> ID：12136294
> 
> 赞同：0
> 
> 时间：2012-08-27T04:38:18.260
> 
> 标签：php, mysql, localization

我的数据库中插入了不同语言的数据，例如中文、法语、英语、马来语、日语、韩语等。

我如何检测这些语言并查询特定的语言。例如，如果我只想查询中文数据并将其显示给用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:03:48.380

如果我是你，我会有这样的东西来存储显示在你的 UI 控件中的文本：

```
create table ui_labels (
  control_id int,
  language varchar(2),
  label varchar(500),
  primary key (control_id, language)
); 
```

`control_id`UI 中的每个控件（例如按钮）都有一个唯一的。每个控件可以有许多标签，每种语言一个。

然后，每个 UI 控件可以为每种语言使用不同的标签。（我假设这里是两个字母的 ISO 语言代码，但您也可以使用数字 ID 或其他一些标识方案。）

这使得只需向表中添加行即可轻松添加新语言，并且只需切换查询中使用的值`ui_labels`即可轻松切换 UI 中显示的语言。`language`

按钮的数据可能如下所示：

```
insert into ui_labels (control_id, language, label)
  values (1, 'en', 'Read the article');
insert into ui_labels (control_id, language, label)
  values (1, 'es', 'Leer el artículo');
insert into ui_labels (control_id, language, label)
  values (1, 'tl', 'Bumasa ang balita'); 
```

但是，作为这种方法的替代方法，您可能需要查看[gettext](http://php.net/manual/en/book.gettext.php)，这是在 PHP 中进行翻译的标准方法。它不使用您的数据库。如果需要将字符串放入数据库（例如，如果最终用户必须能够编辑它们），那么这不是一个选项，但您可以考虑这样做。如果你对此感兴趣，你可能想看看这篇博文：

[http://verens.com/2008/04/03/translation-in-php/](http://verens.com/2008/04/03/translation-in-php/)

# opengl-es - 就帧率而言，常规画布和 openGL 之间是否存在巨大差异？

> ID：12136299
> 
> 赞同：1
> 
> 时间：2012-08-27T04:38:54.750
> 
> 标签：opengl-es, bitmap, android-canvas, frame-rate

我一直在使用 android 中的图形，我注意到使用画布绘制位图需要大量时间和资源。尤其是在需要同时绘制许多图像的高端游戏中，这对帧率等因素可能非常不利。如果我决定学习和使用 openGL，会有很大的不同吗？或者也许我没有使用画布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:14:43.907

这取决于您正在谈论的Android版本。

在 android 2.X 版本中，所有画布操作都不是硬件加速的，所以它根本不使用 GPU，它在 CPU 上逐像素处理所有内容。

在 Android 3 或 4 中（我忘了具体是哪一个），硬件加速被添加到画布中，这样你就可以拥有一个 GPU 加速的画布。

OpenGLES 总是使用硬件加速，所以对于 android 2.X，它总是比画布快得多（对于任何需要合理帧速率的游戏来说，这是你唯一真正的选择）。

在硬件加速的 android 中，您可能不会注意到画布和 OpenGL 之间有太大区别，因为它们都利用 GPU，前提是您的画布启用了硬件加速。

# c++ - MySQL 连接器和 VC2010 标头冲突

> ID：12136300
> 
> 赞同：1
> 
> 时间：2012-08-27T04:39:02.190
> 
> 标签：c++, mysql, collision, connector

我的应用程序使用 MySQL/C++ 连接器，其中包括如下所示的 config.h。

```
// ...
#if !defined(HAVE_INT8_T) && defined(HAVE_MS_INT8)
typedef __int8          int8_t;
#endif
// ... 
```

由于我将 VC++ 2010 与 MSVCR100 一起使用，因此我的应用程序还包括 stdint.h 。

```
/* TYPE DEFINITIONS */
typedef signed char int8_t;
typedef short int16_t;
typedef int int32_t;
// ... 
```

这两个 int8_t 使这个碰撞编译错误。

我做了一些谷歌研究，但似乎没有人知道完美的解决方案。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:26:44.920

在包含 MySQL 标头之前，您是否尝试过 #define HAVE_INT8_T （以及类似的，我猜其他类型也会发生同样的情况）？

即类似的东西

```
...
#define HAVE_INT8_T
#include "MySQL.h"
... 
```

编辑：如果 MySQL.h 包含类似“config.h”的内容，这又搞砸了，您可以尝试直接包含该 config.h，然后调整不正确的定义，然后包含 MySQL.h。config.h 周围可能会有一个包含保护，以防止它再次被包含。

# ruby-on-rails - 在 ubuntu 11.04 中安装 rails 3

> ID：12136301
> 
> 赞同：0
> 
> 时间：2012-08-27T04:39:05.467
> 
> 标签：ruby-on-rails, ubuntu

我正在尝试在我的 Ubuntu 11.04 系统中将 Rails 2.3.5 升级到 3.2.8。我安装了红宝石和红宝石宝石。我还安装了所需的库。我已经按照以下链接 [http://cicolink.blogspot.in/2010/10/how-to-install-ruby-rails-and.html](http://cicolink.blogspot.in/2010/10/how-to-install-ruby-rails-and.html)

但是当我运行 sudo gem install rails 时，我在命令行中收到以下错误

```
WARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/latest_specs.4.8.gz)
WARNING:  Error fetching data: SocketError: getaddrinfo: Name or service not known (http://rubygems.org/specs.4.8.gz)
ERROR:  While executing gem ... (Gem::DependencyError)
Unable to resolve dependencies: mail requires mime-types (~> 1.16), treetop (~> 1.4.8) 
```

在过去的两天里，我一直试图弄清楚这一点。请帮忙

（但是当我运行 sudo apt-get install rails 时，它成功安装了 Rails2.3.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:19:26.113

我知道我没有回答你的问题，但我建议使用 RVM。RVM 将帮助您设置和管理不同的 ruby​​ 版本和 gemset。使用 apt-get 也会给你过时的版本，Rails 当前的稳定版本是 2.3.8。

您可以尝试按照本教程进行操作，它非常简单，并解释了设置所有内容的过程。它在使用 Rails 设置我的机器（也是 Ubuntu 11.04）方面帮助了我很多。

[http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

# neo4j - 带有 LayerNodeIndex 的 Neo4j 的 OSM 导入器

> ID：12136302
> 
> 赞同：1
> 
> 时间：2012-08-27T04:39:09.443
> 
> 标签：neo4j, spatial, openstreetmap

我已经用 neo4j 玩了几个月了（虽然不是那么彻底！）。我已经在测试用例中看到了 OSMImporter 的示例，以及如何制作 WITHIN_DISTANCE_QUERY ( [http://structr.org/blog//299fbc8d5d854c78a530793e1555ae77](http://structr.org/blog//299fbc8d5d854c78a530793e1555ae77) ) 我想知道，有人如何整合上述内容？我应该修改 OSMImporter 的来源吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T14:04:22.703

因此，如果您不使用 OSM 文件，则不需要 OSM 导入器。只需将点从您的域添加到层，就像[https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/LayersTest.java#L57](https://github.com/neo4j/spatial/blob/master/src/test/java/org/neo4j/gis/spatial/LayersTest.java#L57)

# c++ - 如何在 x86 和 x64 中对函数进行 thunk？（就像 C++ 中的 std::bind 一样，但是是动态的）

> ID：12136309
> 
> 赞同：5
> 
> 时间：2012-08-27T04:39:35.997
> 
> 标签：c++, c, x86, 64-bit, thunk

如何在 x86 和 x64 上使用任意（固定）数量的参数对任意函数进行 thunk？

（我不需要浮点数、SSE 等。参数都是整数或指针。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T04:39:35.997

### 这是我的通用实现。

我最初是用[AsmJit 制作](http://code.google.com/p/asmjit/)的，然后手动修改它以删除依赖项。

*   它适用于 x86 和 x64！

*   它适用于 cdecl*和*stdcall！
    它也*应该*适用于 VC++ 和 GCC 上的“thiscall”，但我还没有测试过。
    （VC++ 可能不会触及“this”指针，而 GCC 会将其视为第一个参数。）

*   *它可以在参数列表中的任何*位置绑定*任意*数量的参数！

 *请注意：

*   它不适*用于*可变参数函数，例如`printf`.
    这样做要么需要您动态地提供参数的数量（这很痛苦），要么需要您将返回指针存储在堆栈以外的某个地方，这很复杂。

*   它*不是*为超高性能而设计的，但它仍然应该足够快。
    速度是 O（总参数计数），*而不是*O（绑定参数计数）。

### 向右滚动以查看汇编代码。

```
#include <stddef.h>

size_t vbind(
    void *(/* cdecl, stdcall, or thiscall */ *f)(), size_t param_count,
    unsigned char buffer[/* >= 128 + n * (5 + sizeof(int) + sizeof(void*)) */],
    size_t const i, void *const bound[], unsigned int const n, bool const thiscall)
{
    unsigned char *p = buffer;
    unsigned char s = sizeof(void *);
    unsigned char b = sizeof(int) == sizeof(void *) ? 2 : 3;  // log2(sizeof(void *))
    *p++ = 0x55;                                                                          // push     rbp
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8B; *p++ = 0xEC;                                 // mov      rbp, rsp
    if (b > 2)
    {
        *p++ = 0x48; *p++ = 0x89; *p++ = 0x4C; *p++ = 0x24; *p++ = 2 * s;                 // mov      [rsp + 2 * s], rcx
        *p++ = 0x48; *p++ = 0x89; *p++ = 0x54; *p++ = 0x24; *p++ = 3 * s;                 // mov      [rsp + 3 * s], rdx
        *p++ = 0x4C; *p++ = 0x89; *p++ = 0x44; *p++ = 0x24; *p++ = 4 * s;                 // mov      [rsp + 4 * s], r8
        *p++ = 0x4C; *p++ = 0x89; *p++ = 0x4C; *p++ = 0x24; *p++ = 5 * s;                 // mov      [rsp + 5 * s], r9
    }
    if (b > 2) { *p++ = 0x48; } *p++ = 0xBA; *(*(size_t **)&p)++ = param_count;           // mov      rdx, <param_count>
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8B; *p++ = 0xC2;                                 // mov      rax, rdx
    if (b > 2) { *p++ = 0x48; } *p++ = 0xC1; *p++ = 0xE0; *p++ = b;                       // shl      rax, log2(sizeof(void *))
    if (b > 2) { *p++ = 0x48; } *p++ = 0x2B; *p++ = 0xE0;                                 // sub      rsp, rax
    *p++ = 0x57;                                                                          // push     rdi
    *p++ = 0x56;                                                                          // push     rsi
    *p++ = 0x51;                                                                          // push     rcx
    *p++ = 0x9C;                                                                          // pushfq
    if (b > 2) { *p++ = 0x48; } *p++ = 0xF7; *p++ = 0xD8;                                 // neg      rax
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8D; *p++ = 0x7C; *p++ = 0x05; *p++ = 0x00;       // lea      rdi, [rbp + rax]
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8D; *p++ = 0x75; *p++ = 2 * s;                   // lea      rsi, [rbp + 10h]
    if (b > 2) { *p++ = 0x48; } *p++ = 0xB9; *(*(size_t **)&p)++ = i;                     // mov      rcx, <i>
    if (b > 2) { *p++ = 0x48; } *p++ = 0x2B; *p++ = 0xD1;                                 // sub      rdx, rcx
    *p++ = 0xFC;                                                                          // cld
    *p++ = 0xF3; if (b > 2) { *p++ = 0x48; } *p++ = 0xA5;                                 // rep movs [rdi], [rsi]
    for (unsigned int j = 0; j < n; j++)
    {
        unsigned int const o = j * sizeof(p);
        if (b > 2) { *p++ = 0x48; } *p++ = 0xB8; *(*(void ***)&p)++ = bound[j];           // mov      rax, <arg>
        if (b > 2) { *p++ = 0x48; } *p++ = 0x89; *p++ = 0x87; *(*(int **)&p)++ = o;       // mov      [rdi + <iArg>], rax
    }
    if (b > 2) { *p++ = 0x48; } *p++ = 0xB8; *(*(size_t **)&p)++ = n;                     // mov      rax, <count>
    if (b > 2) { *p++ = 0x48; } *p++ = 0x2B; *p++ = 0xD0;                                 // sub      rdx, rax
    if (b > 2) { *p++ = 0x48; } *p++ = 0xC1; *p++ = 0xE0; *p++ = b;                       // shl      rax, log2(sizeof(void *))
    if (b > 2) { *p++ = 0x48; } *p++ = 0x03; *p++ = 0xF8;                                 // add      rdi, rax
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8B; *p++ = 0xCA;                                 // mov      rcx, rdx
    *p++ = 0xF3; if (b > 2) { *p++ = 0x48; } *p++ = 0xA5;                                 // rep movs [rdi], [rsi]
    *p++ = 0x9D;                                                                          // popfq
    *p++ = 0x59;                                                                          // pop      rcx
    *p++ = 0x5E;                                                                          // pop      rsi
    *p++ = 0x5F;                                                                          // pop      rdi
    if (b > 2)
    {
        *p++ = 0x48; *p++ = 0x8B; *p++ = 0x4C; *p++ = 0x24; *p++ = 0 * s;                 // mov      rcx, [rsp + 0 * s]
        *p++ = 0x48; *p++ = 0x8B; *p++ = 0x54; *p++ = 0x24; *p++ = 1 * s;                 // mov      rdx, [rsp + 1 * s]
        *p++ = 0x4C; *p++ = 0x8B; *p++ = 0x44; *p++ = 0x24; *p++ = 2 * s;                 // mov      r8 , [rsp + 2 * s]
        *p++ = 0x4C; *p++ = 0x8B; *p++ = 0x4C; *p++ = 0x24; *p++ = 3 * s;                 // mov      r9 , [rsp + 3 * s]
        *p++ = 0x48; *p++ = 0xB8; *(*(void *(***)())&p)++ = f;                            // mov      rax, <target_ptr>
        *p++ = 0xFF; *p++ = 0xD0;                                                         // call     rax
    }
    else
    {
        if (thiscall) { *p++ = 0x59; }                                                    // pop      rcx
        *p++ = 0xE8; *(*(ptrdiff_t **)&p)++ = (unsigned char *)f - p
#ifdef _MSC_VER
                - s  // for unknown reasons, GCC doesn't like this
#endif
            ;                                                                             // call     <fn_rel>
    }
    if (b > 2) { *p++ = 0x48; } *p++ = 0x8B; *p++ = 0xE5;                                            // mov      rsp, rbp
    *p++ = 0x5D;                                                                          // pop      rbp
    *p++ = 0xC3;                                                                          // ret
    return p - &buffer[0];
} 
```

### 示例（适用于 Windows）：

```
#include <assert.h>
#include <stdio.h>
#include <Windows.h>
void *__cdecl test(void *value, void *x, void *y, void *z, void *w, void *u)
{
    if (u > 0) { test(value, x, y, z, w, (void *)((size_t)u - 1)); }
    printf("Test called! %p %p %p %p %p %p\n", value, x, y, z, w, u);
    return value;
}
struct Test
{
    void *local;
    void *operator()(void *value, void *x, void *y, void *z, void *w, void *u)
    {
        if (u > 0) { (*this)(value, x, y, z, w, (void *)((size_t)u - 1)); }
        printf("Test::operator() called! %p %p %p %p %p %p %p\n", local, value, x, y, z, w, u);
        return value;
    }
};
int main()
{
    unsigned char thunk[1024]; unsigned long old;
    VirtualProtect(&thunk, sizeof(thunk), PAGE_EXECUTE_READWRITE, &old);
    void *args[] = { (void *)0xBAADF00DBAADF001, (void *)0xBAADF00DBAADF002 };
    void *(Test::*f)(void *value, void *x, void *y, void *z, void *w, void *u) = &Test::operator();
    Test obj = { (void *)0x1234 };
    assert(sizeof(f) == sizeof(void (*)()));  // virtual function are too big, they're not supported :(
    vbind(*(void *(**)())&f, 1 + 6, thunk, 1 + 1, args, sizeof(args) / sizeof(*args), true);
    ((void *(*)(void *, int, int, int, int))&thunk)(&obj, 3, 4, 5, 6);
    vbind((void *(*)())test, 6, thunk, 1, args, sizeof(args) / sizeof(*args), false);
    ((void *(*)(int, int, int, int))&thunk)(3, 4, 5, 6);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T15:15:57.720

**这是thiscall函数的修改**

上面的 vbind() 存根生成器也适用于 C++ 成员函数，尽管尚不清楚如何进行。这是我想出的：

```
// experimental x64 thiscall thunking
class TestHook {
public:
    typedef void (TestHook::*TMFP)();

    TestHook(DWORD num) 
    {
        m_context = num;

        union { void* (*func)(); TMFP method; } addr;
        addr.method = (TMFP)CBTHook_stub;

        // pass "this" as the first fixed argument
        void *args[] = { this };
        size_t thunk_size = vbind(addr.func, 4, m_thunk, 0, args, 1);
        ATLASSERT(thunk_size < sizeof(m_thunk));

        unsigned long old;
        VirtualProtect(m_thunk, thunk_size, PAGE_EXECUTE_READWRITE, &old);
        FlushInstructionCache(GetCurrentProcess(), m_thunk, thunk_size);
    }

    FARPROC GetThunk() const {    return (FARPROC)(void*)m_thunk; }

protected:
    // test thiscall: one integer and two 8-byte arguments
    LRESULT CBTHook_stub(int nCode, WPARAM wParam, LPARAM lParam) 
    {
        ATLTRACE(_T("this=%p, code=%d, wp=%x, lp=%x, context=%x\n"), this, nCode, wParam, lParam, m_context);
        return lParam;
    }

    DWORD m_context;
    unsigned char m_thunk[1024]; // fixed; don't know size required apriori!
};

#ifndef _WIN64
#error does not work for win32
#endif
void main(void)
{
    TestHook tmp(0xDeadBeef);

    HOOKPROC proc = (HOOKPROC)tmp.GetThunk();
    ATLTRACE(_T("object %p return value=%d\n"), &tmp, proc(1, 2, 3));
} 
```

我不是汇编专家，但这段代码正确地存根到 64 位代码的成员函数中。有一些隐含的假设（我不能 100% 确定是否有效，如果我错了，请**纠正我）：**

1.  在 x64 (amd / microsoft VS) 中，所有函数参数都以 8 字节长的形式传递。因此，尽管 vbind 仅用于指针类型的参数，但也可以插入其他函数原型（例如，HOOKPROC 采用一个整数和两个 __int64）

2.  “this”指针作为 x64 中的第一个堆栈参数而不是 ECX 传递。我使用有界参数传递“this”指针并为 C++ 对象提供上下文*

# javascript - IE8中的可打印旋转

> ID：12136318
> 
> 赞同：6
> 
> 时间：2012-08-27T04:40:14.283
> 
> 标签：javascript, printing, internet-explorer-8, rotation

如何在 IE8 中打印旋转的内容（div）？DXImageTranform 过滤器选项似乎不可打印。

[http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85)](http://msdn.microsoft.com/en-us/library/ms533014(v=vs.85))

* * *

只是把它放在上下文中。我正在编写一个名为[simpleCanvas](https://github.com/Matt-Esch/simpleCanvas.js/)的纯基于 dom 的画布库。我拼命尝试在不使用 VML 后备的情况下在 IE8 中提供文本、矩形和图像的旋转，因为它丑陋且缓慢，而且[容易出错](http://www.mattesch.info/blog/printing-vml-and-other-printing-bugs-with-ie8/)。VML 后备在我的待办事项列表上，因为我承认这是我知道如何在 IE8 中执行此操作而无需其他工具的唯一方法。我希望有一些我遗漏的技巧，这些技巧不是第三方或服务器端要求的。如果你找到了，赏金即将到来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T12:41:59.580

This is a massive stretch but is the best idea I could come up with:

Explorer Canvas - [https://code.google.com/p/explorercanvas/](https://code.google.com/p/explorercanvas/) - Implements the canvas in IE8 by abusing VML.

HTML2Canvas - [http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/) - Can render your document onto a canvas, which can then be rotated.

Failing that, I suspect your only option is going to be to generate a rotated document server-side and give that to the client for printing.

Edit: One other last ditch would be to handle the printing via Silverlight, embedding the page in a browsercontrol inside silverlight (yuck), rotating that and printing the result via SL.

Really grasping at straws here though for anything client side in a legacy browser.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:26:07.383

[https://code.google.com/p/jqueryrotate/](https://code.google.com/p/jqueryrotate/) - 这将旋转图像，它使用 VML 在 IE8 中进行。需要注意的是，您想要旋转的任何文本都必须是图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T10:09:46.727

根据[在 Internet Explorer 9 中打印带有旋转文本的网页，](https://stackoverflow.com/questions/7868988/printing-webpage-with-rotated-text-in-internet-explorer-9)您也需要使用 -ms-transform。一定要阅读编辑，因为有一些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T09:40:32.293

我从来没有使用过它，它会是一些工作，但你尝试过[svgweb](https://code.google.com/p/svgweb/ "svgweb")吗？基本上，如果浏览器支持它，它会使用 SVG，如果不支持，它会使用 Flash。因为它是一个 Flash 对象，所以您可以像渲染图像一样打印它。

这是它的更多演示：[svgweb Demos](http://codinginparadise.org/projects/svgweb/samples/demo.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T13:16:57.430

[https://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)可以接受吗？我猜它是否是 LOB 应用程序，但它会为您提供所需的功能，而不会从最严格的意义上将用户带出 IE8。只是另一种探索途径。

# xcode - 可接受的内存泄漏量

> ID：12136325
> 
> 赞同：2
> 
> 时间：2012-08-27T04:41:41.860
> 
> 标签：xcode, ipad, memory-leaks, unity3d

多少内存泄漏可以忽略不计？

在我的程序中，我正在使用`Unity`，当我通过`Profile`>`Leaks`并使用该项目时，它显示了大约 16KB 内存泄漏引起的`Unity`，我无能为力。

编辑：长时间使用该程序后，泄漏量为 400KB。

我该怎么办？iPad 项目可以接受这种内存泄漏量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:53:16.017

这不是很好，但它不会让你的应用程序被拒绝，除非它在审阅者面前导致崩溃。大小不如它发生的频率重要。如果每次运行应用程序时只发生一次，那没什么大不了的。如果每次用户做某事时都会发生这种情况，那么这就是一个更大的问题。

跟踪这些错误并修复它们可能是一个好主意，因为与 Java 相比，Objective C 内存管理有很大的不同，在尝试调试一个大问题之前，最好先练习一些较小的东西最后期限迫在眉睫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:40:11.230

首先，看看您是否可以通过其他方式使用 Unity 来规避泄漏（如果您对该框架的工作有足够的了解）。
然后，如果尚未完成（由您或其他人）将泄漏报告给 Unity 开发人员。
第三，如果你绝对依赖这个框架，希望它尽快得到修复，除非你可以选择切换到另一个框架。
400K 泄漏并不是什么大问题，除非它在几分钟内达到那个大小。**尽管如此，无论泄漏有多小，始终有必要密切关注由您或第三方代码引起的任何泄漏，并尝试在您的应用程序的下一次次要或主要迭代中消除它们。**

# html - Paypal 自定义付款链接

> ID：12136328
> 
> 赞同：3
> 
> 时间：2012-08-27T04:41:54.017
> 
> 标签：html, paypal

我是 Paypal 的新手，之前为我工作的公司构建了一个发票应用程序，并希望在发票上发送一个链接，以便他们可以支付账单，我将如何去做？我已经通过 Paypal 和 Stackoverflow 上的问题进行了筛选，但也许我遗漏了一些东西！即使我无法生成链接，也许有一种方法可以将它们链接到他们可以支付的 Paypal/自定义表单？

任何建议将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T09:26:15.230

[https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=the-recipient@email.here&amount=0.99&item_name=99%20problems%20but%20this%20invoice%ain](https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=the-recipient@email.here&amount=0.99&item_name=99%20problems%20but%20this%20invoice%ain) 't%20one

您可以在 GET 中指定的其他参数列在[https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/formbasics](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/formbasics)

**注意：**金额将在链接中清晰可见。如果您想让它更安全一点，我强烈建议您查看[BMCreateButton](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_BMCreateButton) API 调用。

# c - strcmp() 是如何工作的？

> ID：12136329
> 
> 赞同：23
> 
> 时间：2012-08-27T04:41:54.577
> 
> 标签：c, string

我一直在寻找答案。我将制作一系列我自己的字符串函数，如`my_strcmp()`,`my_strcat()`等。

是否`strcmp()`通过两个字符数组的每个索引工作，如果 ASCII 值在两个字符串的相同索引处较小，则该字符串按字母顺序更大，因此返回 0 或 1 或 2？我想我要问的是，它是否使用字符的 ASCII 值来返回这些结果？

任何帮助将不胜感激。

[修改]

好的，所以我想出了这个......它适用于所有情况，除非第二个字符串大于第一个字符串。

有小费吗？

```
int my_strcmp(char s1[], char s2[])
{   
    int i = 0;
    while ( s1[i] != '\0' )
    {
        if( s2[i] == '\0' ) { return 1; }
        else if( s1[i] < s2[i] ) { return -1; }
        else if( s1[i] > s2[i] ) { return 1; }
        i++;
    }   
    return 0;
}

int main (int argc, char *argv[])
{
    int result = my_strcmp(argv[1], argv[2]);

    printf("Value: %d \n", result);

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-27T04:53:14.810

的伪代码“实现”`strcmp`将类似于：

```
define strcmp (s1, s2):
    p1 = address of first character of str1
    p2 = address of first character of str2

    while contents of p1 not equal to null:
        if contents of p2 equal to null: 
            return 1

        if contents of p2 greater than contents of p1:
            return -1

        if contents of p1 greater than contents of p2:
            return 1

        advance p1
        advance p2

    if contents of p2 not equal to null:
        return -1

    return 0 
```

基本上就是这样。依次比较每个字符，然后根据该字符决定第一个字符串还是第二个字符串更大。

只有当字符相同时，您才会移动到下一个字符，如果*所有*字符都相同，则返回零。

请注意，您可能不一定会得到 1 和 -1，规范说任何正值或负值都足够了，因此您应该始终使用`< 0`、`> 0`或来检查返回值`== 0`。

把它变成真正的 C 语言会相对简单：

```
int myStrCmp (const char *s1, const char *s2) {
    const unsigned char *p1 = (const unsigned char *)s1;
    const unsigned char *p2 = (const unsigned char *)s2;

    while (*p1 != '\0') {
        if (*p2 == '\0') return  1;
        if (*p2 > *p1)   return -1;
        if (*p1 > *p2)   return  1;

        p1++;
        p2++;
    }

    if (*p2 != '\0') return -1;

    return 0;
} 
```

* * *

还要记住，字符上下文中的“更大”不一定基于*所有*字符串函数的简单 ASCII 排序。

C 有一个称为“语言环境”的概念，它指定（除其他外）排序规则或基础字符集的顺序，例如，您可能会发现字符、 和`a`都`á`被认为是相同的。这将发生在像.`à``ä``strcoll`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-27T04:48:54.663

这是[BSD 的实现](http://freebsd.active-venture.com/FreeBSD-srctree/newsrc/libkern/strcmp.c.html)：

```
int
strcmp(s1, s2)
    register const char *s1, *s2;
{
    while (*s1 == *s2++)
        if (*s1++ == 0)
            return (0);
    return (*(const unsigned char *)s1 - *(const unsigned char *)(s2 - 1));
} 
```

一旦两个字符之间不匹配，它只会返回这两个字符之间的差异。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-27T04:44:35.137

它使用字符的字节值，如果第一个字符串出现在第二个字符串之前（按字节值排序），则返回负值，如果相等则返回零，如果第一个字符串出现在第二个之后，则返回正值。由于它对字节进行操作，因此它不支持编码。

例如：

```
strcmp("abc", "def") < 0
strcmp("abc", "abcd") < 0 // null character is less than 'd'
strcmp("abc", "ABC") > 0 // 'a' > 'A' in ASCII
strcmp("abc", "abc") == 0 
```

更准确地说，如[strcmp Open Group 规范](http://pubs.opengroup.org/onlinepubs/007904875/functions/strcmp.html)中所述：

> 非零返回值的符号应由在被比较的字符串中不同的第一对字节（均解释为类型无符号字符）的值之间的差异符号确定。

请注意，返回值可能不等于这个差值，但它带有相同的符号。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-27T06:39:35.640

这是我的版本，为小型微控制器应用程序编写，符合 MISRA-C。这段代码的主要目的是编写可读的代码，而不是大多数编译器库中的单行 goo。

```
int8_t strcmp (const uint8_t* s1, const uint8_t* s2)
{
  while ( (*s1 != '\0') && (*s1 == *s2) )
  {
    s1++; 
    s2++;
  }

  return (int8_t)( (int16_t)*s1 - (int16_t)*s2 );
} 
```

注意：代码假定为 16 位`int`类型。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-04T08:15:48.290

这来自大师们自己（[K&R](https://en.wikipedia.org/wiki/The_C_Programming_Language)，第 2 版，第 106 页）：

```
// strcmp: return < 0 if s < t, 0 if s == t, > 0 if s > t
int strcmp(char *s, char *t) 
{
    int i;

    for (i = 0; s[i] == t[i]; i++)
        if (s[i] == '\0')
            return 0;
    return s[i] - t[i];
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-12T03:18:27.960

这段代码是等价的，更短，更易读：

```
int8_t strcmp (const uint8_t* s1, const uint8_t* s2)
{
    while( (*s1!='\0') && (*s1==*s2) ){
        s1++; 
        s2++;
    }

    return (int8_t)*s1 - (int8_t)*s2;
} 
```

我们只需要测试 s1 的结尾，因为如果我们在 s1 的结尾之前到达 s2 的结尾，循环将终止（因为 *s2 != *s1）。

如果我们只使用 7 位（纯 ASCII）字符，则返回表达式在每种情况下都会计算正确的值。 *由于存在整数溢出的风险，需要仔细*考虑为 8 位字符生成正确的代码。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-15T11:50:03.733

我在网上找到了这个。

[http://www.opensource.apple.com/source/Libc/Libc-262/ppc/gen/strcmp.c](http://www.opensource.apple.com/source/Libc/Libc-262/ppc/gen/strcmp.c)

```
int strcmp(const char *s1, const char *s2)
{
    for ( ; *s1 == *s2; s1++, s2++)
        if (*s1 == '\0')
            return 0;
    return ((*(unsigned char *)s1 < *(unsigned char *)s2) ? -1 : +1);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-01-09T12:05:31.630

这就是我实现**strcmp 的方式：** 它的工作原理如下：它比较两个字符串的第一个字母，如果相同，则继续到下一个字母。如果不是，则返回相应的值。它非常简单易懂：#include

```
//function declaration:
int strcmp(char string1[], char string2[]);

int main()
{
    char string1[]=" The San Antonio spurs";
    char string2[]=" will be champins again!";
    //calling the function- strcmp
    printf("\n number returned by the strcmp function: %d", strcmp(string1, string2));
    getch();
    return(0);
}

/**This function calculates the dictionary value of the string and compares it to another string.
it returns a number bigger than 0 if the first string is bigger than the second
it returns a number smaller than 0 if the second string is bigger than the first
input: string1, string2
output: value- can be 1, 0 or -1 according to the case*/
int strcmp(char string1[], char string2[])
{
    int i=0;
    int value=2;    //this initialization value could be any number but the numbers that can be      returned by the function
    while(value==2)
    {
        if (string1[i]>string2[i])
        {
            value=1;
        }
        else if (string1[i]<string2[i])
        {
            value=-1;
        }
        else
        {
            i++;
        }
    }
    return(value);
} 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-07-03T13:14:26.790

只是这样：

```
int strcmp(char *str1, char *str2){
    while( (*str1 == *str2) && (*str1 != 0) ){
        ++*str1;
        ++*str2;
    }
    return (*str1-*str2);
} 
```

如果你想要更快，你可以在类型前添加“register”，像这样：register char

然后，像这样：

```
int strcmp(register char *str1, register char *str2){
    while( (*str1 == *str2) && (*str1 != 0) ){
        ++*str1;
        ++*str2;
    }
    return (*str1-*str2);
} 
```

这样，如果可能，使用 ALU 的寄存器。

# macos - 我可以在 Mac OS X 终端中更改命令名称吗？

> ID：12136330
> 
> 赞同：1
> 
> 时间：2012-08-27T04:42:03.067
> 
> 标签：macos, shell, terminal

前几天我试图使用“mv”命令在 Mac OS X 终端中更改文件名。相反，我通过意外输入“rm”命令删除了该文件。

```
$ rm my_file.py another_name_for_my_file.py
rm: another_name_for_my_file.py: No such file or directory 
```

我知道在按下键之前我应该​​更加小心`<Enter>`，我确实尝试过，但有时我的手指只是对“rm”和“mv”命令感到困惑。

所以，我想知道如何将'rm'命令的名称更改为另一个，例如'remove'，以防止进一步的事故，但在网上找不到任何方向。（我假设这可以通过编辑`~/.bashrc`或`~/.profile`文件来实现。）

是否存在旁路？还是没有办法更改终端命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:49:07.127

您可以`alias`为任何命令添加一个。您可以使用它来禁用`rm`，但更好的选择是确保`rm`始终要求确认，这是`-i`标志的行为。

> -i 在尝试删除每个文件之前请求确认，无论文件的权限如何，或者标准输入设备是否是终端。-i 选项覆盖任何以前的 -f 选项。

将以下行添加到您的*.bashrc*：

```
alias rm='rm -i' 
```

然后打开一个新的终端窗口，或输入`source .bashrc`一个打开的终端窗口。现在，当您输入 时`rm`，它会询问您是否确定。通过将`-f`标志传递给您的别名来覆盖它：`rm -f`。

# javascript - 谷歌图表中的自动宽度滚动条

> ID：12136331
> 
> 赞同：4
> 
> 时间：2012-08-27T04:42:35.837
> 
> 标签：javascript, jquery, json, google-visualization

我在我的 HTML5 项目中使用谷歌图表。它采用 JSON 值（来自 DB）来绘制图形。

如果 JSON 值中的数据超过 5 到 6，我需要有一个滚动条。我已经通过 JSFiddle 创建了示例附加链接。

目前我已经给出了 22 个值。当 JSON 值有 3 或 4 个值时，我需要相同的效果。条形宽度没有任何变化，即使 JSON 有 50 个值，它也应该保持相同的宽度。

请为我提供解决方案，非常感谢。:)

这是链接： - [http://jsfiddle.net/gK9r7/](http://jsfiddle.net/gK9r7/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T06:25:27.697

这是解决方案：http: [//jsfiddle.net/hsakX/](http://jsfiddle.net/hsakX/)

设置 bar.groupWidth 选项以固定条的宽度。然后使图表的宽度成为条形宽度和要显示的条数的函数：

```
var options = {            
    title: 'Company Performance',
    hAxis: {title: 'Year', titleTextStyle: {color: 'red'}},
    width: data.getNumberOfRows() * 65,
    bar: {groupWidth: 20}
}; 
```

将包含 div 上的溢出-x 设置为滚动：

```
#chart_div {
 overflow-x: scroll;
 overflow-y: hidden;     
 width: 500px;
 height: 550px;
} 
```

# powershell - powershell中的命令行for循环

> ID：12136336
> 
> 赞同：2
> 
> 时间：2012-08-27T04:43:20.550
> 
> 标签：powershell, command-line

假设我有列表 {string1, string2, ..., stringN}。N 大于 50。

现在我有一个命令行查询，它接受一个字符串，我想用它的字符串参数一遍又一遍地执行这个命令，假设我的列表中的每个字符串值。这个怎么做？

我在 Windows 7 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:07:47.407

`foreach`该语句的替代方法是`foreach-object`命令行开关：

```
$list | foreach-object { do-something-with $_ } 
```

如果您从命令生成列表，`foreach-object`可能会更好，因为它会在生成列表时执行您的命令。如果您的列表已经创建，`foreach`可能会更好，因为它可以优化循环体的执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:57:34.700

使用`ForEach`构造：

```
ForEach($x in $y) {
    (your commands on $x)
} 
```

# ruby - 如何使用 Sinatra 驱动的 Ruby 应用程序将数据抓取到 Heroku PostgreSQL 数据库

> ID：12136338
> 
> 赞同：0
> 
> 时间：2012-08-27T04:43:55.483
> 
> 标签：ruby, postgresql, heroku, sinatra, sequel

我成功地将 Sinatra 驱动的 Ruby 应用程序推送到 Heroku。

我推送的其中一个文件是一个 Ruby 脚本，它抓取网络并将数据放入 PostgreSQL 数据库（非 Sinatra 数据库）。

我为 Heroku 应用程序设置了一个 PostgreSQL 插件，但我还没有走得更远。

我想弄清楚的是如何编辑抓取脚本（它使用 Sequel gem）以将它抓取的数据添加到 Heroku PostgreSQL 附加数据库。

我看了一下[这个教程](https://devcenter.heroku.com/articles/import-data-heroku-postgres#from-postgres)，但我卡在了第一步。恐怕我不明白他们列出的命令提示符语法。

此外，当我尝试使用 PGAdmin III 遵循他们的替代说明时，我遇到了另一个问题。Heroku 教程说：

> 作为替代方案，您还可以使用 PGAdmin GUI 工具创建转储文件。为此，请从对象浏览器中选择一个数据库，然后单击工具 > 备份。将文件名设置为 data.dump，使用“COMPRESS”格式，并（在“Dump Options #1”下）选择不保存权限或表空间。

这里的问题是我在 PGAdmin 中看不到“COMPRESS”格式。相反，我只是将文件“data.dump”保存为“所有文件”类型，没有任何格式。

我不确定这是否正确，如果是，我接下来需要做什么。

谁能确认我走在正确的道路上，如果是这样，下一步我必须做什么？

编辑：为澄清起见，我试图让我的抓取脚本将其抓取数据添加到 Heroku 应用程序的 PostgreSQL 数据库中。现在，它仍然像在我的本地机器上一样编写，抓取到我的本地 PostgreSQL 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:46:04.493

[看起来](https://github.com/heroku/heroku/blob/ca49a830723e133cd7c2376d9553c50e6996b129/lib/heroku/command/pg.rb#L156)你可以运行

```
heroku pg:credentials DATABASE --app your-app-name 
```

其中“DATABASE”的字面意思是“DATABASE”。获得凭据后，将脚本配置为访问该数据库。

# php - 使用 PHP 服务器端存储 HTML 5 LocalStorage

> ID：12136339
> 
> 赞同：2
> 
> 时间：2012-08-27T04:43:58.883
> 
> 标签：php, javascript

我创建了一个帐户验证系统，其中用户单击其邮箱中的链接将触发 activate.php，该脚本将在 MySQL 数据库中执行一些后端操作，然后向用户提供他们的帐户。目前，我正在通过标题更改来做到这一点：

```
header( www.mydomain.com/useraccount.html); 
```

**问题：**我需要设置某些本地存储变量，例如 sessionStorage.email 和 sessionStorage.accountID。我不能确定这些东西当前是否已设置，因为用户可能已经关闭了浏览器，在 20 分钟后单击了 activate.php。并打开了一个新会话。因此我想知道如何使用 PHP 设置 HTML 5 本地存储变量。这可能吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T03:23:24.633

最终使用 URL 参数：`header(www.mydomain.com/useraccount.html/usertag=blah&email=blah@gmail.com);`

并在页面加载时用 Javascript 捕获它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T04:47:29.923

嵌入 JavaScript 代码以将本地存储设置到您`activate.php`发送给客户端的页面中。这可能是一个简短的 html 虚拟片段，它运行 JavaScript 逻辑，然后将客户端重定向到`useraccount.html`.

如果 javascript 被禁用（即显式链接），请确保提供后备。

# vertical-alignment - 顶部栏中的内容未完全对齐？

> ID：12136341
> 
> 赞同：0
> 
> 时间：2012-08-27T04:44:21.287
> 
> 标签：vertical-alignment

基本上，我正在创建的页面上有一个固定位置的顶栏。在这个 div 中是一个容器、一个 a/logo 和一个 ul。a/logo 设置为向左浮动，ul 设置为向右浮动。出于某种原因，它看起来像这样：[http](http://puu.sh/ZdS6) ://puu.sh/ZdS6 ，登录按钮位于栏的顶部。这是我的代码，有人可以帮忙解决吗？[http://jsfiddle.net/GPn6K/](http://jsfiddle.net/GPn6K/)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:24:42.510

我不完全理解你的问题。你想让你的按钮在右边吗？然后尝试将 padding-top 直接添加到 ul。

# java - 线程“主”java.lang.Error 中的异常：未解决的编译（PhraseOmatic）

> ID：12136345
> 
> 赞同：1
> 
> 时间：2012-08-27T04:45:00.233
> 
> 标签：java

我尝试从 Head First Java 运行代码，如下所示：

```
public class PhraseOMatic {
   public static void main(String[] args){

    String[] wordListOne = {"24/7", "mult-iTier", "30,000 foot", "B-to-B", "win-win", "front-end", "web-based", "pervasive", "smart", "six-sigma", "critical-path", "dynamic"};

    String[] wordListTwo = {"empowered", "sticky", "value-added", "oriented", "centric", "distributed", "clustered", "branded", "outside-the-box", "positioned", "networked", "focused", "leveraged", "aligned", "targeted", "shared", "cooperative", "accelerated"};

    String[] wordListThree = {"process", "tipping-point", "solution", "architecture", "cor competency", "strategy", "mindshare", "portal", "space", "vision", "paradigm", "mission"};

    int oneLength = wordListOne.length;
    int twoLength = wordListTwo.length;
    int threeLength = wordListThree.length;

    int rand1 = (int) (Math.random() * oneLength);
    int rand2 = (int) (Math.random() * twoLength);
    int rand3 = (int) (Math.random() * twoLength);

    String phrase = wordListOne[rand1] + " " + wordListTwo[rand2] + " " + wordListThree[rand3];

    System.out.println("What we need is a " + phrase);
    }
} 
```

正是在这里我收到了这个错误：

线程“main”java.lang.Error 中的异常：未解决的编译问题：

```
at PhraseOMatic.main(apples.java:2) 
```

我从错误中看到问题出在第 2 行，但我可以识别错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:51:58.817

查看异常跟踪 ( `PhraseOMatic.main(apples.java:2)`)。您的公共课程`PhraseOMatic`必须与`PhraseOMatic.java`文件一起保存。公共类的名称`top-level`和 .java 文件的名称必须相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T04:54:31.887

看看吧`PhraseOMatic.main(apples.java:2)`。您的文件名为`apples.java`，但在 Java 中，您的文件必须与您的类同名。在你的情况下`PhraseOMatic.java`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T04:54:52.927

**您的股份跟踪：**

```
PhraseOMatic.main(apples.java:2) 
```

所以你缺少运行 java 来调整类；你的 java 主类是 PhraseOmatic

# jsp - 如何在jsp中找到两个日期之间的差异？

> ID：12136346
> 
> 赞同：1
> 
> 时间：2012-08-27T04:45:18.007
> 
> 标签：jsp, date, formatting

我有一个日期格式，如“MMMM dd，yyyy”，我正在使用`<fmt:formatDate value="${purchaseDate}" pattern="MMMM dd, yyyy"/>`，我必须将它与当前日期进行比较，并检查购买日期是否距离当前日期不到一年？任何建议如何做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:02:29.240

`scriptlets` `<% //... your code ... %>`我认为在这种情况下您将不得不求助。

如果你继续，`scriptlets`那么这将是简单的 Java 数据比较，如下[所示](http://www.tutorialspoint.com/jsp/jsp_handling_date.htm "在 JSP 中处理日期")。
您还可以在具有比较逻辑的实用程序类中创建一个方法，然后从您的 JSP 中调用它。

我个人不喜欢`scriptlets`在我的 JSP 代码中，所以：

1.  我通常会在 java 类中执行此逻辑并在其中设置一个标志`request`并将其传递给 JSP。但这取决于在这个简单的比较之后你需要做多少逻辑。
2.  或者您可以构建一个简单的自定义标签来为您执行逻辑（可能是矫枉过正！）

所以，如果你真的需要在 JSP 中比较日期，那么我想`scriptlets`这将是唯一的方法。

希望这能给人们一些思考。

# tomcat - 如何用jsvc启动tomcat？

> ID：12136348
> 
> 赞同：3
> 
> 时间：2012-08-27T04:45:45.570
> 
> 标签：tomcat, jsvc

我正在尝试使用 jsvc 启动 tomcat，但它给了我这个奇怪的错误

```
JSVC re-exec requires execution with an absolute or relative path 
```

使用

```
jsvc -debug -cp ./bin/bootstrap.jar:bin/tomcat-juli.jar \
     -outfile ./logs/catalina.out -errfile ./logs/catalina.err \
     org.apache.catalina.startup.Bootstrap 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-06T00:13:57.180

我自己也遇到了这个错误。就我而言，在我的机器上使用 jsvc 的绝对路径`/usr/bin/jsvc`--- 修复了它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-05T16:26:34.570

我通过双击`startup.sh`文件`$CATALINA_HOME/bin`夹上的文件来运行 Tomcat。之后，我`http://localhost:8080/`在浏览器中输入此 URL 并运行。

# android - ListView 错误：您的内容必须有一个 ID 属性为 'android.R.id.list' 的 ListView

> ID：12136355
> 
> 赞同：0
> 
> 时间：2012-08-27T04:47:17.333
> 
> 标签：android

我一直在为 JSON 解析进行编码，所有事情都是正确的，但是在 logcat 中显示了以下错误

```
08-27 10:25:49.628: E/AndroidRuntime(816): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mokshya.hosprsing/com.mokshya.hosprsing.HomeActivity}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

以下是我的主要代码

```
package com.mokshya.hosprsing;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.app.ListActivity;
import android.view.Menu;
import android.widget.ArrayAdapter;

public class HomeActivity extends ListActivity {

@SuppressWarnings({"rawtypes","unchecked"})
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    setListAdapter(new ArrayAdapter (this,     android.R.layout.simple_list_item_1,this.fetchHosTime()));
}
public ArrayList<String> fetchHosTime(){
    ArrayList<String> listitems=new ArrayList<String>();
    try {
        URL hos=new URL("http://ldsclient.com/ftp/strtojson.php");
        URLConnection tc=hos.openConnection();
        BufferedReader in=new BufferedReader(new     InputStreamReader(tc.getInputStream()));
        String line;
        while((line=in.readLine())!=null) {
            JSONArray ja=new JSONArray(line);
                for(int i=0; i<ja.length();i++) {
                    JSONObject jo=(JSONObject) ja.get(i);
                    listitems.add(jo.getString("text"));

                }
        }
    }
    catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return listitems;
}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}
 } 
```

下面是我的 main.xml 代码

```
<ListView android:id="@android:id/list" 
    android:layout_height="fill_parent"
    android:layout_width="wrap_content"></ListView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:55:20.207

把它`ListView`放在你的`main.xml`

```
<ListView
  android:id="@android:id/list"
  android:layout_width="match_parent"
  android:layout_height="wrap_content" >
</ListView> 
```

请参阅[此现有答案。](https://stackoverflow.com/a/12084803/940096)并且，查看[ListActivity 教程](http://www.vogella.com/articles/AndroidListView/article.html#listactivity)以获得更多帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:22:48.517

不要在主 UI 线程上使用网络调用。使用另一个线程或 Asynctask 。最好的方法是 Asynctask

# java - Java 概念思想

> ID：12136358
> 
> 赞同：5
> 
> 时间：2012-08-27T04:47:31.580
> 
> 标签：java, swing, concept

****已解决****

我对 Java 还很陌生，到目前为止我很喜欢它！

所以我只是问是否有人有一个可以帮助我的想法。所以这就是我想做的。

我现在正在做的是一个可以与我的本地网站交互的应用程序（更改标题、内容等）。所以我喜欢做的是显示一个`JOptionPane.showConfirmDialog`，然后输入用户名和密码。

所以基本上如果用户名或密码错误我想显示一个`JOptionPane.showMessageDialog`但是当他们点击`Ok`让他们知道信息错误时`showConfirmDialog`消失了！

有什么想法吗？！这是我的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.sql.*;

public class javaTesting extends JFrame {
    public JFrame mrFrame;
    public int enter;
    public JPanel mrPanel;

    public javaTesting() throws Exception
    {
            Class.forName("com.mysql.jdbc.Driver");
            try {
                Connection con =  DriverManager.getConnection("jdbc:mysql://localhost:3306/cms","root","");
            } catch (SQLException e){
                System.out.println(e.getMessage());
            }
            mrFrame = new JFrame();
            mrPanel = new JPanel();

            mrPanel.setLayout(new GridLayout(4,1));

            JLabel user = new JLabel("Username");
            mrPanel.add(user);

            JTextField user_input = new JTextField(30);
            mrPanel.add(user_input);

            JLabel pass = new JLabel("Password");
            mrPanel.add(pass);

            JTextField pw_input = new JPasswordField(30);
            mrPanel.add(pw_input);

            mrFrame.setSize(700,700);
            mrFrame.setLocationRelativeTo(null);
            mrFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            //mrFrame.setVisible(true);
            mrFrame.setResizable(false);

            input();

            if(enter == JOptionPane.OK_OPTION)
            {
                JOptionPane.showMessageDialog(null, "You clicked ok!");
                input();
            } else {
                System.exit(1);
            }
    }
    public void input()
    {
         enter = (int) JOptionPane.showConfirmDialog(mrFrame,mrPanel,"Login Cridantiels",JOptionPane.OK_CANCEL_OPTION,JOptionPane.QUESTION_MESSAGE);
    }
    public static void main(String agrs[]) throws Exception
    {
        new javaTesting();
    }
} 
```

所以这就是我所做的，它似乎对我来说很好，不知道它是否不正确。但是它有效：]

```
 do{
        input();

        if(enter == JOptionPane.OK_OPTION)
        {
            JOptionPane.showMessageDialog(null, "You clicked ok!");
        } else {
            System.exit(1);
        }
     } while(enter != JOptionPane.CANCEL_OPTION); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:07:20.913

正如 shan 所建议的那样，您需要循环收集您的代码部分的凭据。这是一个例子

```
JPanel pnlDetails = new JPanel(new GridBagLayout());
JTextField userNameField = new JTextField(10);
JPasswordField passwordField = new JPasswordField(10);

GridBagConstraints gbc = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.anchor = GridBagConstraints.WEST;
gbc.insets = new Insets(2, 2, 2, 2);

pnlDetails.add(new JLabel("User name:"), gbc);
gbc.gridy++;
pnlDetails.add(new JLabel("Password:"), gbc);

gbc.gridx = 1;
gbc.gridy = 0;
gbc.anchor = GridBagConstraints.EAST;
pnlDetails.add(userNameField, gbc);
gbc.gridy++;
pnlDetails.add(passwordField, gbc);

// The result from the dialog, will be OK or CANCEL
int operation;
// Flag used to determine if the credentials are okay or not
boolean badCredentials = true;
do {

    operation = JOptionPane.showConfirmDialog(null, pnlDetails, "Login", JOptionPane.OK_CANCEL_OPTION, JOptionPane.INFORMATION_MESSAGE);

    String userName = userNameField.getText();
    char[] password = passwordField.getPassword();

    // You would valid you credintals here :P
    if (userName.equals("super") && new String(password).equals("happy")) {

        badCredentials = false;

    } else if (operation != JOptionPane.CANCEL_OPTION) {

        JOptionPane.showMessageDialog(null, "Invalid Credentials", "Error", JOptionPane.ERROR_MESSAGE);

    }

} while (operation != JOptionPane.CANCEL_OPTION && badCredentials);

if (!badCredentials && operation != JOptionPane.CANCEL_OPTION) {

    System.out.println("Continue program");

} else {

    System.out.println("Exit program");

}

System.exit(0); 
```

# unix - Unix（Solaris）排序的 ls -l 输出，带有数字名称

> ID：12136360
> 
> 赞同：2
> 
> 时间：2012-08-27T04:47:37.473
> 
> 标签：unix, sorting, ls

给定一个`ls -l`目录列表，这些目录是软件发布版本，如何分类为人类喜欢的形式？例如：

```
$ ls -loghF
共计 209
drwxr-xr-x 2 18 年 6 月 3 日 11:33 12.0.40.0/
drwxr-xr-x 2 8 月 24 日 14:45 13.0.11.10/
drwxr-xr-x 2 13 年 7 月 3 日 14:12 13.0.11.4/
drwxr-xr-x 2 7 月 26 日 15:30 13.0.11.5/
drwxr-xr-x 2 7 月 27 日 11:33 13.0.11.6/
drwxr-xr-x 2 月 3 日 8 月 3 日 11:41 13.0.11.7/
drwxr-xr-x 2 10 年 8 月 3 日 11:53 13.0.11.8/
drwxr-xr-x 2 17 年 8 月 3 日 17:00 13.0.11.9/
drwxr-xr-x 2 8 月 3 日 14:37 13.0.17.0/
drwxr-xr-x 2 13 年 8 月 3 日 11:50 13.0.18.0/
drwxr-xr-x 2 17 年 8 月 3 日 11:21 13.0.19.0/
drwxr-xr-x 2 7 月 28 日 15:00 13.0.9.1/

```

期望的结果是：

```
$ ls -loghF | 种类 ...
共计 209
drwxr-xr-x 2 18 年 6 月 3 日 11:33 12.0.40.0/
drwxr-xr-x 2 7 月 28 日 15:00 13.0.9.1/
drwxr-xr-x 2 13 年 7 月 3 日 14:12 13.0.11.4/
drwxr-xr-x 2 7 月 26 日 15:30 13.0.11.5/
drwxr-xr-x 2 7 月 27 日 11:33 13.0.11.6/
drwxr-xr-x 2 月 3 日 8 月 3 日 11:41 13.0.11.7/
drwxr-xr-x 2 10 年 8 月 3 日 11:53 13.0.11.8/
drwxr-xr-x 2 17 年 8 月 3 日 17:00 13.0.11.9/
drwxr-xr-x 2 8 月 24 日 14:45 13.0.11.10/
drwxr-xr-x 2 8 月 3 日 14:37 13.0.17.0/
drwxr-xr-x 2 13 年 8 月 3 日 11:50 13.0.18.0/
drwxr-xr-x 2 17 年 8 月 3 日 11:21 13.0.19.0/

```

排序必须跳过每行的日期部分，然后使用“.”按数字排序（例如，从 12 或 13 开始）作为字段分隔符。

我想到了两种方法，但是如果完全支持 sort -k 语法，我会遇到困难：

(1) 跳过前 36 个字符，然后使用 '.' 作为字段分隔符，对接下来的 4 个字段进行数字排序。

(2) 以字段分隔符为空格，跳到第7个字段，然后将字段分隔符更改为'.' 并对接下来的 4 个字段进行数字排序。

替代方案是一个小的 Perl 脚本，但 Unix 排序不能完成这个“简单”任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:17:04.167

这是一个命令行，用于`awk`首先放置版本号，使用四个数字键进行排序，然后用于`cut`删除前面的临时：

```
$ ls -loghF | awk '{ print $7, $0; }' | sort -n -t. -k1,1 -k2,2 -k3,3 -k4,4 | cut -d' ' -f2-
drwxr-xr-x   2       3 Jun 18 11:33 12.0.40.0/
drwxr-xr-x   2       3 Jul 28 15:00 13.0.9.1/
drwxr-xr-x   2       3 Jul 13 14:12 13.0.11.4/
drwxr-xr-x   2       3 Jul 26 15:30 13.0.11.5/
drwxr-xr-x   2       4 Jul 27 11:33 13.0.11.6/
drwxr-xr-x   2       3 Aug  3 11:41 13.0.11.7/
drwxr-xr-x   2       3 Aug 10 11:53 13.0.11.8/
drwxr-xr-x   2       3 Aug 17 17:00 13.0.11.9/
drwxr-xr-x   2       3 Aug 24 14:45 13.0.11.10/
drwxr-xr-x   2       3 Aug  3 14:37 13.0.17.0/
drwxr-xr-x   2       3 Aug 13 11:50 13.0.18.0/
drwxr-xr-x   2       3 Aug 17 11:21 13.0.19.0/ 
```

[那里的排序命令是从这个答案](https://stackoverflow.com/a/4495368/1204143)中借来的。另一个答案建议`sort -V`（版本排序），但我的版本`sort`没有它（不过你的版本可能，所以值得尝试）。版本排序可能特定于较新的 GNU coreutils（我的 Linux 机器有它，排序来自 GNU Coreutils 8.5）。

使用版本排序：

```
$ ls -loghF | sort -k7,7V
drwxr-xr-x   2       3 Jun 18 11:33 12.0.40.0/
drwxr-xr-x   2       3 Jul 28 15:00 13.0.9.1/
drwxr-xr-x   2       3 Jul 13 14:12 13.0.11.4/
drwxr-xr-x   2       3 Jul 26 15:30 13.0.11.5/
drwxr-xr-x   2       4 Jul 27 11:33 13.0.11.6/
drwxr-xr-x   2       3 Aug  3 11:41 13.0.11.7/
drwxr-xr-x   2       3 Aug 10 11:53 13.0.11.8/
drwxr-xr-x   2       3 Aug 17 17:00 13.0.11.9/
drwxr-xr-x   2       3 Aug 24 14:45 13.0.11.10/
drwxr-xr-x   2       3 Aug  3 14:37 13.0.17.0/
drwxr-xr-x   2       3 Aug 13 11:50 13.0.18.0/
drwxr-xr-x   2       3 Aug 17 11:21 13.0.19.0/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:29:00.390

仅供参考：这就是我最终做的事情。
特别感谢：[http ://www.sysarch.com/Perl/sort_paper.html](http://www.sysarch.com/Perl/sort_paper.html)

```
$ ls -loghF | perl -e '
use strict;
my @in = <>;
my @out = grep(m|\d+\.\d+\.\d+\.\d+/$|, @in);
print sort {
    my @aa = $a =~
            m|(\d+)\.(\d+)\.(\d+)\.(\d+)/$|;
    my @bb = $b =~
            m|(\d+)\.(\d+)\.(\d+)\.(\d+)/$|;
    $aa[0] <=> $bb[0] or
    $aa[1] <=> $bb[1] or
    $aa[2] <=> $bb[2] or
    $aa[3] <=> $bb[3]
    } @out;
' 
```

```
drwxr-xr-x 2 18 年 6 月 3 日 11:33 12.0.40.0/
drwxr-xr-x 2 7 月 28 日 15:00 13.0.9.1/
drwxr-xr-x 2 13 年 7 月 3 日 14:12 13.0.11.4/
drwxr-xr-x 2 7 月 26 日 15:30 13.0.11.5/
drwxr-xr-x 2 7 月 27 日 11:33 13.0.11.6/
drwxr-xr-x 2 月 3 日 8 月 3 日 11:41 13.0.11.7/
drwxr-xr-x 2 10 年 8 月 3 日 11:53 13.0.11.8/
drwxr-xr-x 2 17 年 8 月 3 日 17:00 13.0.11.9/
drwxr-xr-x 2 8 月 24 日 14:45 13.0.11.10/
drwxr-xr-x 2 8 月 29 日 17:31 13.0.11.11/
drwxr-xr-x 2 8 月 3 日 14:37 13.0.17.0/
drwxr-xr-x 2 13 年 8 月 3 日 11:50 13.0.18.0/
drwxr-xr-x 2 17 年 8 月 3 日 11:21 13.0.19.0/

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T05:19:58.343

这不是最快的方法，但解释起来相当简单：

```
ls -loghF |
awk '{ print $7 " " $0 }' |
sort -t. -k 1,1n -k 2,2n -k3,3n -k 4,4n |
sed 's/^[^ ]* //' 
```

'awk' 命令将目录字段复制到行首；sort 命令仅使用单个分隔符（`.`；我认为您不能对行的不同部分使用不同的分隔符），然后按数字顺序显式对 4 个数字部分进行排序。然后`sed`删除在前面添加的字段。

这是“让`sort`查找密钥变得容易”的简单版本，因为拆分输入是`sort`.

# android - 为什么android相机意图不能第二次运行

> ID：12136361
> 
> 赞同：2
> 
> 时间：2012-08-27T04:47:37.353
> 
> 标签：android, android-intent, camera

我和我的朋友尝试编写这个意图相机应用程序来拍照，将其保存到文件夹中，将其显示在 imageView 上并为图片创建哈希值。这里的问题是它在第一次拍照时工作正常，但是当我们尝试第二次继续拍照时出现错误。请帮我看看我们在代码中是否遗漏了任何问题。

这是代码

```
public class CameraApp extends Activity {

private static final int IMAGE_CAPTURE = 0;

private ImageButton startBtn;
private ImageButton gallery;
private Uri imageUri;
private ImageView imageView;
SimpleDateFormat formatter = new SimpleDateFormat("yyyyMMddHHmmss");
Date now = new Date();
String fileName = formatter.format(now);
final Context context = this;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera_app);
    imageView = (ImageView)findViewById(R.id.img);
    startBtn = (ImageButton) findViewById(R.id.startBtn);
    gallery = (ImageButton)findViewById(R.id.gallery);

    startBtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            startCamera();
        }
    });

    gallery.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);
            i.setDataAndType(Uri.fromFile(new  File(Environment.getExternalStorageDirectory(),"camera_app")),"image/*");
            startActivity(i);
        }
    });
}

public void startCamera() {
    File photo = null;
    File folder= new File(Environment.getExternalStorageDirectory(),"camera_app");
    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");

    if(folder.exists()){
    if (android.os.Environment.getExternalStorageState().equals( android.os.Environment.MEDIA_MOUNTED)) {
        photo = new File(android.os.Environment.getExternalStorageDirectory(), "camera_app/DF_" + fileName + "_PIC.jpg");
    } 
    }

    else{
        folder.mkdirs();
        photo = new File(android.os.Environment.getExternalStorageDirectory(), "camera_app/DF_" + fileName + "_PIC.jpg");
    }
    /*else {
        photo = new File(getCacheDir(), "camera_app/FILE_NAME.jpg");
    }    */

    if (photo != null) {

        intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
        imageUri = Uri.fromFile(photo);
        startActivityForResult(intent, IMAGE_CAPTURE);
    }  
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == IMAGE_CAPTURE) {
        if (resultCode == RESULT_OK){
            //try {
                Uri selectedImage = imageUri;

                ContentResolver cr = getContentResolver();
                //InputStream inputStream = cr.openInputStream(imageUri);

               Bitmap bitmap;
               try {
               InputStream inputStream = cr.openInputStream(imageUri);
               bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, selectedImage);
                imageView.setImageBitmap(bitmap);

                java.security.MessageDigest md = MessageDigest.getInstance("MD5");

                  byte[] buffer = new byte[1024];

                 int read;
                    do {
                      read = inputStream.read(buffer);
                      if (read > 0)
                        md.update(buffer, 0, read);
                    } while (read != -1);
                    inputStream.close();

                    byte[] digest = md.digest();

                    String hexString = "";
                    for (int i = 0; i < digest.length; i++) {
                      hexString += Integer.toString((digest[i] & 0xff) 
                                + 0x100, 16).substring(1);
                    }

               final EditText input = new EditText(this);

                input.setText("DF_" + fileName + "_PIC_");
                new AlertDialog.Builder(this)
                .setTitle("Rename")
                .setMessage("<MD5> "+ hexString)
                .setView(input) 

               .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                        String value = input.getText().toString();
                        String value1 = value + ".jpg";
                        final File F=new File(android.os.Environment.getExternalStorageDirectory(), "camera_app/DF_" + fileName + "_PIC.jpg");

                        File newfile=new File(F.getParent(),value1);
                        F.renameTo(newfile);

                    }
                })
                .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {
                        // Do nothing.
                    }
                })
                .show();

            } catch (Exception e) {
                Toast.makeText(this, "Failed to load", Toast.LENGTH_SHORT).show();
                Log.e("Camera", e.toString());
            }

        } else {
            imageUri = null;
            imageView.setImageBitmap(null);

        }       
    } 

} 
```

}

xml代码

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
    <ImageView 
        android:id="@+id/img"
        android:layout_width="fill_parent" 
        android:layout_height="350dip"
        android:layout_gravity="center"
        android:src="@drawable/camera"
        android:scaleType="fitStart"/>

    <LinearLayout 
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

    <ImageButton   
        android:orientation="horizontal"
        android:id="@+id/startBtn" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:background="@null"
        android:src="@drawable/img_button"/>

    <ImageButton

        android:id="@+id/gallery" 
        android:layout_width="430dip" 
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:background="@null"
        android:src="@drawable/gallery_icon"/>

    </LinearLayout>
    </LinearLayout> 
```

显现

```
 <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-feature android:name="android.hardware.camera" />  
    <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

logcat 错误

```
 08-27 05:58:02.505: E/vold(556): Error opening switch name path '/sys/class/switch/test2' (No such file or directory)
    08-27 05:58:02.505: E/vold(556): Error bootstrapping switch '/sys/class/switch/test2' (m)
    08-27 05:58:02.505: E/vold(556): Error opening switch name path '/sys/class/switch/test' (No such file or directory)
    08-27 05:58:02.505: E/vold(556): Error bootstrapping switch '/sys/class/switch/test' (m)
    08-27 05:58:02.626: E/flash_image(564): can't find recovery partition
    08-27 05:58:16.086: E/MemoryHeapBase(590): error opening /dev/pmem: No such file or directory
    08-27 05:58:16.086: E/SurfaceFlinger(590): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
    08-27 05:58:16.186: E/GLLogger(590): couldn't load <libhgl.so> library (Cannot find library)
    08-27 05:58:16.276: E/GLLogger(590): couldn't load <libhgl.so> library (Cannot find library)
    08-27 05:58:19.757: E/BatteryService(590): Could not open '/sys/class/power_supply/usb/online'
    08-27 05:58:19.757: E/BatteryService(590): Could not open '/sys/class/power_supply/battery/batt_vol'
    08-27 05:58:19.757: E/BatteryService(590): Could not open '/sys/class/power_supply/battery/batt_temp'
    08-27 05:58:20.355: E/EventHub(590): could not get driver version for /dev/input/mouse0, Not a typewriter
    08-27 05:58:20.526: E/EventHub(590): could not get driver version for /dev/input/mice, Not a typewriter
    08-27 05:58:20.885: E/System(590): Failure starting core service
    08-27 05:58:20.885: E/System(590): java.lang.SecurityException
    08-27 05:58:20.885: E/System(590):  at android.os.BinderProxy.transact(Native Method)
    08-27 05:58:20.885: E/System(590):  at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
    08-27 05:58:20.885: E/System(590):  at android.os.ServiceManager.addService(ServiceManager.java:72)
    08-27 05:58:20.885: E/System(590):  at com.android.server.ServerThread.run(SystemServer.java:163)
    08-27 05:58:20.895: E/AndroidRuntime(590): Crash logging skipped, no checkin service
    08-27 05:58:22.086: E/LockPatternKeyguardView(590): Failed to bind to GLS while checking for account
    08-27 05:58:25.155: E/ApplicationContext(590): Couldn't create directory for SharedPreferences file shared_prefs/wallpaper-hints.xml
    08-27 05:58:25.890: E/ActivityThread(632): Failed to find provider info for android.server.checkin
    08-27 05:58:26.681: E/ActivityThread(632): Failed to find provider info for android.server.checkin
    08-27 05:58:26.782: E/ActivityThread(632): Failed to find provider info for android.server.checkin
    08-27 05:58:34.680: E/MediaPlayer(561): Unable to to create media player
    08-27 05:58:34.680: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:58:34.710: E/MediaPlayer(561): Unable to to create media player
    08-27 05:58:34.720: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:58:36.660: E/Camera(738): _getParameters: picture-format=jpeg;picture-size=213x350;preview-format=yuv422sp;preview-frame-rate=15;preview-size=176x144
    08-27 05:58:36.660: E/Camera(738): setParameters()
    08-27 05:58:37.901: E/Camera(738): setParameters()
    08-27 05:58:46.891: E/MediaPlayer(561): Unable to to create media player
    08-27 05:58:46.891: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:58:46.891: E/MediaPlayer(561): Unable to to create media player
    08-27 05:58:46.891: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:58:47.821: E/Camera(738): _getParameters: picture-format=jpeg;picture-size=213x350;preview-format=yuv422sp;preview-frame-rate=15;preview-size=176x144
    08-27 05:58:47.840: E/Camera(738): setParameters()
    08-27 05:58:48.910: E/Camera(738): setParameters()
    08-27 05:59:10.970: E/MediaPlayer(561): Unable to to create media player
    08-27 05:59:10.970: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:59:11.000: E/MediaPlayer(561): Unable to to create media player
    08-27 05:59:11.000: E/CameraService(561): Failed to load CameraService sounds.
    08-27 05:59:11.990: E/Camera(738): _getParameters: picture-format=jpeg;picture-size=213x350;preview-format=yuv422sp;preview-frame-rate=15;preview-size=176x144
    08-27 05:59:11.990: E/Camera(738): setParameters()
    08-27 05:59:14.530: E/Camera(738): setParameters()
    : E/(): Device disconnected 
```

# asp.net-mvc - 如何在 MVC 3.0 应用程序中构建页面

> ID：12136363
> 
> 赞同：2
> 
> 时间：2012-08-27T04:47:57.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我对 MVC 世界很陌生。我有一个 MVC 3.0 应用程序，其中每个部门都有多个页面：

```
1\. Division A
    a. Page A
    b. Page B
    c. Page C
    d. Page D

2\. Division B
    a. Page A
    b. Page B

3\. Division C
    a. Page A
    b. Page B   
4\. Division D
    a. Page A
    b. Page B
    c. Page C
    d. Page D 
```

每个部门页面都有自己的动态页面内容，它们以 JSON 格式从控制器接收。主页包含一个下拉菜单，用户可以从中选择一个部门。当他们选择特定部门时，页面应加载特定部门内容。

问题：

1.  我应该为每个部门创建特定的视图文件夹吗？
2.  上述每个部门都应该有自己的控制器吗？
3.  在 MVC 3.0 中有什么方法，当用户在 B 分区上选择时将用户重定向到 B 分区 index.cshtml 页面？
4.  如上所示，部门有自己的页面。跟踪用户在哪个部门以及在用户请求页面 A 时应该加载哪个页面的最佳方法是什么？

5.  或者，我应该有一个部门控制和一个视图，其中包含数据内容的 json 从操作中传递。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:12:06.810

你不应该为每个部门制作一个新的控制器。您可以制作一个 Division 控制器并使用查询字符串值来确定要显示哪一个的数据。

如果您为每个部门创建一个控制器，那么您就很难扩展您的应用程序。如果用户想要创建/删除一个部门会发生什么？等等

# javascript - 使用 jQuery 水平对齐文本内的图像

> ID：12136370
> 
> 赞同：0
> 
> 时间：2012-08-27T04:49:19.597
> 
> 标签：javascript, jquery, html, css

我有一个 div，其中包含一篇文章。我的意思是，它可能包含文本和图像。像这样的东西：

```
Blah Blah Blah Blah    Blah Blah Blah Blah    Blah Blah Blah Blah
Blah Blah Blah Blah    Blah Blah Blah Blah    Blah Blah Blah Blah
Blah Blah Blah Blah    Blah Blah Blah Blah.
{IMAGE}
Blah Blah Blah Blah    Blah Blah Blah Blah    Blah Blah Blah Blah
Blah Blah Blah Blah    Blah Blah Blah Blah    Blah Blah Blah Blah.
{IMAGE}
Blah Blah Blah Blah    Blah Blah Blah Blah. 
```

因此，可能不是每个图像周围都有一个 div。

但我想用 jQuery 水平对齐图像的中心。我的想法是使用特定类围绕每个图像（使用 jQuery）创建一个 div。

但我不知道如何在 jQuery 中做到这一点。

怎么做？**或者**有没有更好的方法？

**编辑：**内容是从另一个网站的提要下载的。我想水平对齐图像中心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:04:22.300

无需在 img 周围添加 div 只能通过 css 完成

试试这个[小提琴](http://jsfiddle.net/gajjuthechamp/8fe6S/1/)

只需使用`display:block`和`margin:auto`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:03:08.057

你可以这样做：

在你的情况下：

$('.test').append($('#image1'));

在 jquery 中，您还可以使用**wrap**方法： [http ://api.jquery.com/wrap/](http://api.jquery.com/wrap/)

例如： $('img').wrap(' `<div class="test"></div>`');

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T05:07:13.680

用jQuery 包装所有`<img>`标签`<div class="imageclass">`：

```
$('img').wrap('<div class="imageclass" />'); 
```

CSS居中`<div>`：

```
.imageclass { margin: 0 auto; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:02:08.260

你的html是这样的吗？

```
<div id="container">
    <div id="column1">
        article text article text
        <img />
        article text article text
    </div>
    <div id="column2">
        article text article text
        <img />
        article text article text
    </div>
    <div id="column3">
        article text with no image
        article text with no image
        article text article text
    </div>
</div> 
```

# java - Android纸牌游戏Random()

> ID：12136371
> 
> 赞同：0
> 
> 时间：2012-08-27T04:49:20.607
> 
> 标签：java, android, random, playing-cards

我正在用 java/android 制作纸牌游戏。这个想法很简单，随机选择一张牌并显示出来，玩家必须选择下一张牌是更高还是更低。我的问题是我怎样才能做到一旦选择了一张卡就不能再使用了？

我的计划是创建一个数组 0-51；然后为所有可能性做一个开关和案例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T04:52:04.323

那会奏效。把你的数组想象成一堆纸牌，然后洗牌。然后从 0 开始遍历数组，从顶部挑选卡片。

[http://www.exampledepot.com/egs/java.util/coll_Shuffle.html](http://www.exampledepot.com/egs/java.util/coll_Shuffle.html)

如果你想变得超级酷，可以使用[Stack](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Stack.html)作为卡片的容器，因为这与真正的一副纸牌的运作方式最相似。

# c# - 无法查询 CSDVersion 的值

> ID：12136372
> 
> 赞同：0
> 
> 时间：2012-08-27T04:49:20.663
> 
> 标签：c#

我遵循了这个 C# 示例并且能够查询一些注册表值，但不是全部：

[如果我不知道它的类型，如何从远程机器获取注册表值？（C＃）](https://stackoverflow.com/questions/1155633/how-to-obtain-a-registry-value-from-a-remote-machine-if-i-dont-know-its-type)

我可以可靠地获取注册表项，例如 CurrentVersion、ProductName 等。但是当我尝试获取 CSDVersion 时，它失败了。

我在 .NET 2.0 和 .NET 4.0 中都进行了编译，但结果相同。我试过查询本地机器和远程机器。两者都能够返回其他注册表值，但不能返回这个特定的值。

两者都是 x64 机器（Windows 7 Ultimate 和 Windows 2008 R2），因此无论以何种方式访问​​注册表都不应该有任何问题。

我发现的一件奇怪的事情是 EnumValues 函数只返回 17 个值，而这个特定的注册表项中有 21 个。在缺少的四个中，CSDVersion 就是其中之一。

我很好奇是否有人知道为什么这四个值不会回来，但其余的都会？缺失值：

*   CSDVersion - Reg_sz
*   DigitalProductID - Reg_binary
*   DigitalProductId4 - Reg_binary
*   产品 ID - Reg_sz

真正奇怪的是我有另一个项目，它是用 .NET 2.0 编写的，并且有一个可以做这种事情的类库。为库运行 NUnit 测试时，此查询工作正常并返回所有 21 个值。但是当通过另一个项目运行这个库时，它不起作用。

我已经逐步完成了调用该库的项目中的代码，并且在执行此操作时，它只返回 17 个条目。所以我无法解释发生了什么。

有人对下一步去哪里有任何想法吗？下面是我正在使用的确切代码，它根本不适用于上述特定情况

```
using System;
using System.Management;
using System.Management.Instrumentation;

namespace GetCSDVersion
{
    public enum RegHive : uint
    {
        HKEY_CLASSES_ROOT = 0x80000000,
        HKEY_CURRENT_USER = 0x80000001,
        HKEY_LOCAL_MACHINE = 0x80000002,
        HKEY_USERS = 0x80000003,
        HKEY_CURRENT_CONFIG = 0x80000005
    }

    public enum RegType
    {
        REG_SZ = 1,
        REG_EXPAND_SZ,
        REG_BINARY,
        REG_DWORD,
        REG_MULTI_SZ = 7
    }

    class Program
    {
        static void Main(string[] args)
        {
            const string strComputer = "localhost";

            ConnectionOptions options = new ConnectionOptions();
            options.Impersonation = ImpersonationLevel.Impersonate;
            options.EnablePrivileges = true;
            //options.Username = "";
            //options.Password = "";

            ManagementScope myScope = new ManagementScope("\\\\" + strComputer + "\\root\\default", options);
            ManagementPath mypath = new ManagementPath("StdRegProv");
            ManagementClass mc = new ManagementClass(myScope, mypath, null);

            object oValue = GetValue(mc, RegHive.HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion", "CSDVersion");
            Console.WriteLine(oValue.ToString());
        }

        public static object GetValue(ManagementClass mc, RegHive hDefKey, string sSubKeyName, string sValueName)
        {
            RegType rType = GetValueType(mc, hDefKey, sSubKeyName, sValueName);

            ManagementBaseObject inParams = mc.GetMethodParameters("GetStringValue");
            inParams["hDefKey"] = hDefKey;
            inParams["sSubKeyName"] = sSubKeyName;
            inParams["sValueName"] = sValueName;

            object oValue = null;

            switch (rType)
            {
                case RegType.REG_SZ:
                    ManagementBaseObject outParams = mc.InvokeMethod("GetStringValue", inParams, null);

                    if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
                    {
                        oValue = outParams["sValue"];
                    }
                    else
                    {
                        // GetStringValue call failed
                    }
                    break;

                case RegType.REG_EXPAND_SZ:
                    outParams = mc.InvokeMethod("GetExpandedStringValue", inParams, null);

                    if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
                    {
                        oValue = outParams["sValue"];
                    }
                    else
                    {
                        // GetExpandedStringValue call failed
                    }
                    break;

                case RegType.REG_MULTI_SZ:
                    outParams = mc.InvokeMethod("GetMultiStringValue", inParams, null);

                    if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
                    {
                        oValue = outParams["sValue"];
                    }
                    else
                    {
                        // GetMultiStringValue call failed
                    }
                    break;

                case RegType.REG_DWORD:
                    outParams = mc.InvokeMethod("GetDWORDValue", inParams, null);

                    if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
                    {
                        oValue = outParams["uValue"];
                    }
                    else
                    {
                        // GetDWORDValue call failed
                    }
                    break;

                case RegType.REG_BINARY:
                    outParams = mc.InvokeMethod("GetBinaryValue", inParams, null);

                    if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
                    {
                        oValue = outParams["uValue"] as byte[];
                    }
                    else
                    {
                        // GetBinaryValue call failed
                    }
                    break;
            }

            return oValue;
        }

        public static RegType GetValueType(ManagementClass mc, RegHive hDefKey, string sSubKeyName, string sValueName)
        {
            ManagementBaseObject inParams = mc.GetMethodParameters("EnumValues");
            inParams["hDefKey"] = hDefKey;
            inParams["sSubKeyName"] = sSubKeyName;

            ManagementBaseObject outParams = mc.InvokeMethod("EnumValues", inParams, null);

            if (Convert.ToUInt32(outParams["ReturnValue"]) == 0)
            {
                string[] sNames = outParams["sNames"] as String[];
                int[] iTypes = outParams["Types"] as int[];

                for (int i = 0; i < sNames.Length; i++)
                {
                    if (sNames[i] == sValueName)
                    {
                        return (RegType)iTypes[i];
                    }
                }
                // value not found
            }
            else
            {
                // EnumValues call failed
            }
            // Things have fallen apart and EnumValues didn't get us what we wanted so assume it's a string
            return RegType.REG_SZ;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T05:12:27.857

哇。好的，所以花了几个小时尝试调试它，我在将它发布到 StackOverflow 后不到 20 分钟就自己解决了这个问题。

我知道在某些情况下，有一种奇怪的混合注册表，其中包含 32 位和 64 位密钥。我认为它不适用于这里，因为我使用的两台机器都是 64 位的。但我忘记的是项目本身有一个指定平台目标的设置。

右键单击项目，然后转到属性。选择构建选项卡。然后将 Platform Target 从 x86（必须是默认值）更改为 Any CPU。重新编译，注册表查询工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T02:00:58.217

在 VS 2012 中，如果选中“首选 32 位”，则行为是相同的，即使目标是“任何 CPU”。

# c# - 无法在当前范围或上下文中解析

> ID：12136374
> 
> 赞同：2
> 
> 时间：2012-08-27T04:49:36.520
> 
> 标签：c#, jqgrid, asp.net-mvc-4

> *在当前范围或上下文中无法解析“fieldName”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。*

当我`_data`在控制器中声明时出现该消息：

```
string orderBy = sidx + " " + sord;
IQueryable<Table> _data;
_data = entities.Table.OrderBy(orderBy).Skip(skip).Take(take); 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T03:13:32.603

感谢您的回答，现在我意识到了......问题是因为`sidx`我从`fieldName`标题 jqgrid 中获得的参数无法识别表名。然后我尝试这样做，现在它解决了:)

添加`it.`到订单变量：

```
string orderBy = "it."+ sidx + " " + sord; IQueryable<Table> _data;
_data = entities.Table.OrderBy(orderBy).Skip(skip).Take(take); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:28:46.953

The most probable cause is that the `orderBy` expression you have generated references the field which is not available in the `Table` - just set a breakpoint in this line and check what value it has.

One important thing here is that in case of jqGrid (you have tagged your question with jqGrid) there are some inconsistencies in what is being send as `sidx`. Most of the time it is the `index` from `colModel` but sometimes (for example when grouping is enabled) it can be `name`.

# database - 我应该将可选记录属性放在单独的表中吗？

> ID：12136375
> 
> 赞同：8
> 
> 时间：2012-08-27T04:49:37.063
> 
> 标签：database, ms-access, database-design, ms-access-2007, normalization

我有一个大约 1,000 条记录的表。其中大约一半将使用一组包含某些特征的字段。大约有10个相关领​​域。另一半记录不需要填写该信息。

该表是数据库的中心，将承担大部分操作。虽然只有大约 1,000 条记录，但数量并不多。

存储数据库的硬件又旧又慢（旋转硬盘驱动器不是 SSD ......）所以我想要一个相当优化的结构来充分利用它。显然，由于空白字段而单独增加的数据库大小并不是主要问题，但如果它减慢查询速度，那就不好了。

我想我应该描述一下设置。目前是 Access 2007 客户端和 Access 后端，不过后端很快会迁移到 SQL Server。目前后端位于主服务器机架上，但当移动到 SQL Server 时，它将获得自己的旧服务器机架。

那么我应该制作一个单独的表来存储上述一组特征，还是应该保持原样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T07:45:46.080

将可选字段放入单独的表中然后使用连接的查询开销对大小或数据管理没有太大好处。特别是如果它像您的示例中那样是一对一的**。**对于大小，可选字段将 NULL 不会对您产生太大影响。是的，75% 是一个很好的*随机*阈值，当你应该开始移出东西时，但即便如此，你实际上并没有通过移出可选字段来规范任何东西（如果它们与记录是一对一的，你将永远将其与主记录一起获取）。

值得注意的是：对于大多数数据库，在单个查询中获取大行比几个小查询要好……以防您以后有在单独查询中获取第二个表中的可选数据的冲动。不过，在 Access 2007 中，这可能不太重要。

并且无论您是否将这些可选字段移出，为您可能在`where`/ `having`/中使用的那些字段添加索引`join`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T09:40:51.393

你所说的我的印象是你应该使用单独的表格。您要表示的依赖关系和数据完整性的需求（“业务规则”）应确定任何属性进入哪个表。

在你的情况下，听起来你有两种事实要表达。这些事实类型具有不同的属性集，因此它们属于不同的表。如果您将两种不同的事实类型组合到一个表中并使一组属性可以为空，那么您可能会损害数据完整性：即，当业务规则不需要此类值时允许某些属性的值，而当业务规则时允许某个值不存在事实上需要它。

有关回答此问题的更正式方式，请参阅第五范式和正交设计原理。如果您还不了解这些设计原则，那么您应该熟悉它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:31:24.057

垂直分区对于大型数据集是有意义的，可以提高缓存的效率。即使在相当旧的硬件上，1000 行也不符合“大”的条件。

因此，除非有*其他*原因需要重新设计此表（您没有[合并查找](https://stackoverflow.com/a/12124811/533120)，不是吗？），否则您可以继续。

# java - 接受 void 的通用参数类型

> ID：12136381
> 
> 赞同：8
> 
> 时间：2012-08-27T04:50:32.040
> 
> 标签：java, parameters, void, return-type

我正在尝试为我正在从事的开源项目创建 API，并且在尝试扩展 API 同时保持语义与当前 API 一致时遇到了障碍。我希望能够定义一个带有通用参数的方法签名，该参数接受调用*任何*方法签名的结果。“*任何*”意味着包括`void`方法。我已经知道你不能直接定义参数类型`void`——请不要重复这个明显的事实。不明显的是是否有任何技巧`void`可以将方法调用作为参数提供给方法（即，并忽略）。

背景故事，所以这更有意义我为什么想做这样的事情，以及我的设计目标和约束是什么，以防上述是不可能的（我担心它是）：

我当前的 API 定义了一种非常可重复的方法模式，如下所示：

```
public <T,V> Function<T,V> functionFor(V ignoredRetVal) {...}
public <T>   Predicate<T>  predicateFor(V ignoredRetVal) {...}
public <T>   Filter<T>     filterFor(V ignoredRetVal) {...} 
```

顾名思义，参数被忽略，甚至没有在实现中使用。在使用中，`ignoredRetVal`被替换为对动态代理的方法调用。`functionFor`由于在调用方法之前评估参数，因此在外部函数（或`predicateFor`等）之前调用此动态代理方法。动态代理调用记录调用的`Method`（或方法链），并将其`Function`从多个函数库中转换为对象（Guava）或其他类似函数的对象。

我现在要做的是创建一个类似的语义，该语义捕获仅用于副作用的方法调用，而不需要返回类型（例如[函数式 Java 的](http://functionaljava.googlecode.com/) [`Effect`](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/Effect.html). 如果提供了非 void 返回类型，则将其忽略. 如果提供了 void 返回类型，它也会被忽略和接受。关键是语义必须以某种方式强制代理方法在另一个提取截获的代理方法调用的方法之前被调用。因为我们只对 side 感兴趣效果，候选方法很可能包括`void`方法。理想情况下，它看起来像：

```
public <T, V> Effect<T> effectFor(V ignoredRetVal) {...} 
```

（它已经适用于非 void 返回类型），它可以按如下方式使用：

```
Effect<MyClass> effect1 = effectFor (proxyOfMyClass.nonVoidMethod());// OK :-)
Effect<MyClass> effect2 = effectFor (proxyOfMyClass.orVoidMethod()); // Problem!! 
```

正如我所说，恐怕我正在寻找的语义不能直接支持。如果不是，那么任何替代方案都应该在精神上接近我建立的模式。此外，我的 API 的整个目标是减少内部类实现的“垂直噪音”，我不是双括号初始化器的粉丝。无论提供什么建议，我都在寻找一种支持简洁的语义，尤其是单语句语义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:11:54.423

我认为您永远无法将 a 强制`void`转换为表达式，特别是如果您不喜欢双括号破解。

您可以在 API 设计中遵循 Mockito 的示例。通常，您会像这样设置一个模拟：

```
when(mockedInstance.someMethod()).thenThrow(new IllegalArgumentException()); 
```

但是对于空白，您可以这样做：

```
doThrow(new IllegalArgumentException()).when(mockedInstance).someMethod(); 
```

同样，您可以枚举 的方法`Effect<T>`以使它们成为库的静态方法。

例如，如果`Effect<T>`有`doSomething()`那么你会反转它，比如

```
doSomething().onEffectFor(proxyInstanceOfA).methodA(); 
```

但这假设相关方法`Effect<T>`本身不返回值。

如果这不是一个选项，并且您需要`Effect<T>`，则可以使其成为有状态的，如下所示：

```
VoidEffect<MyType> effect = effectForVoid(proxyOfMyClass);
effect.on().myVoidMethod(); 
```

Where `VoidEffect<T>`implements `Effect<Void>`，并`on()`返回传入的代理（或不同的代理）。然后你会想在你与之交互之前抛出一个`IllegalStateException`if没有被调用。`on()``effect`

# java - Java跳过序列中的数字

> ID：12136386
> 
> 赞同：2
> 
> 时间：2012-08-27T04:51:18.110
> 
> 标签：java, arrays, methods

这很有趣，我注意到了。在我能进一步解释它最好的地方之前，我会展示代码，你就会明白我的意思。

这是代码：

```
public class Qn3 {
    static BigDecimal[] accbal = new BigDecimal[19];
    private static Integer[] accnums = new Integer[19];

    public static void main(String[] args) {
        addaccount();

    }
    public static void addAccount() {

        int i = 0, accno, input, j, check;
        BigDecimal accbala;
        DecimalFormat df = new DecimalFormat("0.00");

        Scanner sc = new Scanner(System.in);
        Scanner in = new Scanner(System.in);
        accnums[1] = new Integer(1);

        while (accnums.length >= count(accnums)) {
            System.out.print("Enter the account number: ");
            while (sc.hasNext("[0-9]{7}")) {
                accno = sc.nextInt();
                System.out.print("Enter account balance: ");
                accbala = in.nextBigDecimal();

                for (j = 0; j < accnums.length; j++) {
                    if (accnums[j] == null)
                        break;
                    else if (accnums[j].equals(accno)) {
                        break;
                    }
                }

                if (j == accnums.length) {
                    System.out.print("No more than 20 accounts can be added.");
                } else if (accnums[j] != null) {
                    if ((accnums[j].equals(accno)))
                        System.out.println("Account already exists");
                    break;
                } else {
                    accnums[j] = accno;
                    accbala = accbala.setScale(2, RoundingMode.HALF_UP);
                    accbal[j] = accbala;
                    check = j;
                    System.out.println("Current number of accounts in the system: "
                                    + (check + 1)
                                    + "\nNumber of accounts still can be added: "
                                    + (20 - (check + 1)));

                }
            }

            while (!sc.hasNext("[0-9]{7}")) {
                System.out.println("Wrong NRIC");
                break;
            }
            while (accnums.length <= count(accnums)) {
                System.out.println("20 accounts have already been created");
                break;
            }
            break;
        }
    }

    private static int count(Integer[] array) {
        int count = 0;
        // accnums = new Integer[] {1,2};
        for (int index = 0; index < array.length; index++) {
            if (array[index] != null) {
                count++;
            }
        }
        // System.out.println("You have used " + count + " slots");
        return count;
    }
} 
```

所以现在你已经看到了代码很难注意到的问题是这个，注意`addaccount()`方法中的行

```
 System.out.println("Current number of accounts in the system: "+(check+1)+"\nNumber of accounts still can be added: "+(20 - (check+1))); 
```

这条线第一条`check+1`给我 1 然后下一条给我 3！然后下次我运行它给我 4 的方法，然后再给我 5 等等，2 发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T04:58:50.110

您在 else 块中有那个 println，当 j == 1 时，您遇到了 else if 情况。尝试删除此行

```
accnums[1] = new Integer (1); 
```

# php - mysql子查询还是php处理？

> ID：12136390
> 
> 赞同：1
> 
> 时间：2012-08-27T04:51:28.450
> 
> 标签：php, mysql, subquery, post-processing

我有一个看起来像这样的查询：

```
Select 
    tradesmen.id,
    (SELECT COUNT(quotes.id) FROM quotes WHERE quotes.tradesman_id = tradesmen.id) AS quoted
From
    tradesmen; 
```

所以基本上数据库中的每一行都有一个子查询（50,000+）。现在，对于每个交易者来说，可能会有大约 1,000 - 2,000 条报价。

所以我可以使用这个子查询来计算它们。

或者，

我可以查询所有的商人。

```
select tradesman.id from tradesmen; 
```

执行一次查询以获取所有报价计数

```
select tradesman_id as id, count(quotes.id) as quotes from quotes group by tradesman_id; 
```

然后遍历每个商人并从数组中取出每个商人的计数。

mysql有多快？第二种方法会带来显着的好处还是两种方法都可以接受？

作为一般参考，我的实际查询是：

```
SELECT 
    tradesmen.*, 
    regions.name AS region_name, 
    GROUP_CONCAT(ptypes_tradesmen.ptype_id SEPARATOR '|') AS ptype_ids, 
    (SELECT 
         COUNT(quotes.id) 
     FROM 
         quotes 
     WHERE 
         quotes.tradesman_id = tradesmen.id
    ) AS quoted, 
    (SELECT 
         COUNT(quote_intentions.id) 
     FROM 
         quote_intentions 
     WHERE 
         quote_intentions.tradesman_id = tradesmen.id
    ) AS intended, 
    (SELECT 
         COUNT(quotes.id) FROM quotes 
     WHERE 
         quotes.tradesman_id = tradesmen.id 
         AND quotes.accepted = 1
    ) AS awarded
FROM 
    (`tradesmen`)
LEFT JOIN `regions` ON `regions`.`id` = `tradesmen`.`region_id`
LEFT JOIN `ptypes_tradesmen` ON `ptypes_tradesmen`.`tradesman_id` = `tradesmen`.`id`
GROUP BY `tradesmen`.`id` 
```

## 更新

使用 ctrahey 的答案，我更改了查询。

所以，我们现在有三个版本的查询..

关注：

```
SELECT 
    tradesmen.*, 
    regions.name AS region_name, 
    GROUP_CONCAT(ptypes_tradesmen.ptype_id SEPARATOR '|') AS ptype_ids, 
    COUNT(quotes.id) AS quoted,
    COUNT(quote_intentions.id) AS intended,
    COUNT(NULLIF(quotes.accepted, 0)) AS awarded
FROM (`tradesmen`)
LEFT JOIN `regions` ON `regions`.`id` = `tradesmen`.`region_id`
LEFT JOIN `ptypes_tradesmen` ON `ptypes_tradesmen`.`tradesman_id` = `tradesmen`.`id`
LEFT JOIN quotes ON quotes.tradesman_id = tradesmen.id
LEFT JOIN quote_intentions ON quote_intentions.tradesman_id = tradesmen.id
GROUP BY `tradesmen`.`id` 
```

我的修改版本：

```
SELECT 
    t.*, 
    r.name AS region_name, 
    GROUP_CONCAT(p.ptype_id SEPARATOR "|") AS ptype_ids, 
    COUNT(q.id) as quoted, 
    COUNT(i.id) as intended, 
    COUNT(NULLIF(q.accepted, 0)) as awarded
FROM (tradesmen t)
LEFT JOIN regions r ON r.id = t.region_id
LEFT JOIN quotes q ON t.id = q.tradesman_id
LEFT JOIN quote_intentions i ON t.id = i.tradesman_id
LEFT JOIN ptypes_tradesmen p ON p.tradesman_id = t.id
GROUP BY t.id 
```

原本的：

```
SELECT 
    tradesmen.*, 
    regions.name AS region_name, 
    GROUP_CONCAT(ptypes_tradesmen.ptype_id SEPARATOR '|') AS ptype_ids, 
    (SELECT 
         COUNT(quotes.id) 
     FROM 
         quotes 
     WHERE 
         quotes.tradesman_id = tradesmen.id
    ) AS quoted, 
    (SELECT 
         COUNT(quote_intentions.id) 
     FROM 
         quote_intentions 
     WHERE 
         quote_intentions.tradesman_id = tradesmen.id
    ) AS intended, 
    (SELECT 
         COUNT(quotes.id) FROM quotes 
     WHERE 
         quotes.tradesman_id = tradesmen.id 
         AND quotes.accepted = 1
    ) AS awarded
FROM 
    (`tradesmen`)
LEFT JOIN `regions` ON `regions`.`id` = `tradesmen`.`region_id`
LEFT JOIN `ptypes_tradesmen` ON `ptypes_tradesmen`.`tradesman_id` = `tradesmen`.`id`
GROUP BY `tradesmen`.`id` 
```

虽然它们都返回几乎相同的结果，但最后四个字段存在差异（因此我在这里从结果数组中删除所有其他行）。

从原始查询（正确结果）：

```
array('id' => '53',
  'ptype_ids' => '58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68',
  'quoted' => '6',
  'intended' => '14',
  'awarded' => '3'), 
```

从 ctrahey 的查询：

```
array('id' => '53',
  'ptype_ids' => '58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|58|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|2|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|7|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|17|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|40|40|40|40|40|4',
  'quoted' => '2016',
  'intended' => '2016',
  'awarded' => '1008'), 
```

从我修改后的查询中：

```
array('id' => '53',
  'ptype_ids' => '58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46|13|67|8|75|59|23|9|31|71|24|68|58|2|7|17|1|40|52|4|74|66|19|15|46',
  'quoted' => '2016',
  'intended' => '2016',
  'awarded' => '1008'), 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T04:55:18.943

两者都不！执行正确的 JOIN（RDBMS 中的真正价值在哪里）：

```
SELECT 
  tradesmen.id,
  COUNT(quotes.id) as quoted
FROM 
  tradesmen
  LEFT JOIN quotes ON quotes.tradesman_id = tradesmen.id
GROUP BY tradesmen.id 
```

此查询将正是您所需要的，而且速度很快！

# 编辑您的真实查询

实际查询中唯一需要注意的是接受引号计数中的 NULLIF 位，因为 (IIRC) COUNT()*将*计数 false/0，但不计数为 NULL。

```
SELECT 
    tradesmen.*, 
    regions.name AS region_name, 
    GROUP_CONCAT(ptypes_tradesmen.ptype_id SEPARATOR '|') AS ptype_ids, 
    COUNT(quotes.id) AS quoted
    COUNT(quote_intentions.id) AS intended
    COUNT(NULLIF(quotes.accepted, 0)) AS awarded
FROM (`tradesmen`)
LEFT JOIN `regions` ON `regions`.`id` = `tradesmen`.`region_id`
LEFT JOIN `ptypes_tradesmen` ON `ptypes_tradesmen`.`tradesman_id` = `tradesmen`.`id`
LEFT JOIN quotes ON quotes.tradesman_id = tradesmen.id
LEFT JOIN quote_intentions ON quote_intentions.tradesman_id = tradesmen.id
GROUP BY `tradesmen`.`id` 
```

# sql - 如何获得第二条记录

> ID：12136392
> 
> 赞同：0
> 
> 时间：2012-08-27T04:51:57.757
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
id date time

001 01/02/2012 02:00
001 02/02/2012 01:00
001 07/02/2012 08:00
002 04/02/2012 01:00
002 15/02/2012 06:00
... 
```

从 table1 我想按日期列获取每个 id order by date 的第二条记录

预期产出

```
id date time

001 02/02/2012 01:00
001 07/02/2012 08:00
002 15/02/2012 06:00
... 
```

如何查询以获取第二条记录。

需要sql查询帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T04:58:07.207

像这样的东西怎么样

```
SELECT  yt.*
FROM    your_table yt INNER JOIN
        (
            SELECT  [id],
                    MIN([datetime]) first_datetime
            FROM    your_table
            GROUP BY    [id]
        ) f ON  yt.id = f.id
            AND yt. [datetime] > f.first_datetime 
```

假设*第一条记录*是每个 ID 的最短日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:11:26.827

查看数据似乎不是按时间排序的，因此会使事情变得有些复杂。我没有 SQL Server 2000 来尝试这个，所以我会尝试对每一行进行注释，以便您了解并纠正任何错误：

创建一个带有标识列的新临时表

```
create #tmp (MYNEWID int identity, id int, dt datetime) 
```

从您的表中插入记录

```
insert into #tmp select id, dt from table1 
```

获取除第一个 id 之外的所有记录：

```
select id, dt 
from #tmp T 
where cast(T.id as varchar)+cast(T.dt as varchar) not in 
    (select top 1 cast(X.id as varchar)+cast(X.dt as varchar) 
    from #tmp X 
    where T.id=X.id 
    order by MYNEWID asc) 
```

如果存在重复的 dt，则以下代码将无法按预期工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:51:02.293

```
select t1.* from table1 t1 left join 
(select top 1 * from table1) t2
on t1.id=t2.id and t1.date=t2.date and t1.time=t2.time
where t2.id is null and t2.date is null and t2.time is null 
```

# c++ - 在 const 函数内检查成员 std::array 的问题

> ID：12136394
> 
> 赞同：8
> 
> 时间：2012-08-27T04:52:06.587
> 
> 标签：c++, c++11, mingw

我正在使用以下代码检查成员 std::array 与 mingw (gcc 4.7.0) 的奇怪行为界限

```
#include <iostream>
#include <array>

class testClass
{
    std::array<int, 2> testArray;

    public:
        testClass();
        void func() const;

};

testClass::testClass() : testArray({{1, 2}})
{
}

void testClass::func() const
{
    for (int i = 0; i < 2; ++i)
        std::cout << testArray.at(i) << '\n' << testArray[i] << '\n';       
}

int main()
{
    testClass test;
    test.func();
} 
```

输出是

```
0
1
0
2 
```

该错误似乎与优化有关，因为它仅在使用 编译时才会出现`-O`，我尝试了启用的各个标志，`-O`但无法进一步缩小范围。使函数非常量也解决了这个问题。这可能是一个错误还是我错过了什么？

*编辑

缩小范围，看起来像是`const`版本中的错误`.at()`

```
#include <iostream>
#include <array>

int main()
{
    std::array<int, 2> const testArray = {1, 2};

    for (int i = 0; i < 2; ++i)
        std::cout << testArray.at(i) << '\n' << testArray[i] << '\n';       
} 
```

`-std=c++11 -O`在 Windows Xp sp3 和 Windows 7 sp1 上使用 mingw 4.7.0编译的输出与上面相同。

*编辑 2

再次输出相同的

```
#include <iostream>
#include <array>

int main()
{
    typedef std::array<int, 2> Tarray;
    Tarray test = {1, 2};

    for (int i = 0; i < 2; ++i)
        std::cout << const_cast<Tarray const*>(&test)->at(i) << '\n' << test.at(i) << '\n';     
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T06:02:45.140

这是数组标题的一部分

```
#ifdef __EXCEPTIONS
  constexpr const_reference
  at(size_type __n) const
  {
return __n < _Nm ? 
       _M_instance[__n] : throw out_of_range(__N("array::at"));
  }
#else
  const_reference
  at(size_type __n) const
  {
if (__n >= _Nm)
  std::__throw_out_of_range(__N("array::at"));
return _M_instance[__n];
  }
#endif 
```

主文件中的 Undef __EXCEPTIONS（或更改`#ifdef`为`#ifndef`数组）导致正确的输出。我不知道，这是否是正确的解决方案，但它有效。

**UPD：**我将数组标题中的代码更改为

```
#ifdef __EXCEPTIONS
  constexpr const_reference
  at(size_type __n) const
  {
return __n < _Nm ? 
       _M_instance[__n] : (throw out_of_range(__N("array::at"))),
                          _M_instance[__n];
   /*return __n < _Nm ? 
            _M_instance[__n] : throw out_of_range(__N("array::at"));*/
  }
#else
  const_reference
  at(size_type __n) const
  {
if (__n >= _Nm)
  std::__throw_out_of_range(__N("array::at"));
return _M_instance[__n];
  }
#endif 
```

现在一切正常

# mysql - 索引查询，但仍在搜索每一行

> ID：12136396
> 
> 赞同：0
> 
> 时间：2012-08-27T04:53:00.587
> 
> 标签：mysql, indexing, query-optimization, rows, explain

我有以下mysql查询

```
select points_for_user from items where user_id = '38415'; 
```

解释查询返回这个

```
id  select_type table   type    possible_keys   key                     key_len ref     rows    Extra
1   SIMPLE      items   index   NULL            points_for_user_index   2       NULL    1000511 Using index 
```

问题是，由于索引，行数不应该远小于表中的行数吗？

user_id 是主索引，所以我尝试在 points_for_user 上创建一个索引，并且仍然查看每一行。user_id AND points_for_user 上的索引仍然搜索每一行。

我错过了什么？

谢谢！

```
CREATE TABLE IF NOT EXISTS `items` (
  `capture_id` int(11) NOT NULL AUTO_INCREMENT,
  `id` int(11) NOT NULL,
  `creator_user_id` bigint(20) NOT NULL DEFAULT '0',
  `user_id` int(11) NOT NULL,
  `accuracy` int(11) NOT NULL,
  `captured_at` timestamp NOT NULL DEFAULT '2011-01-01 06:00:00',
  `ip` varchar(30) NOT NULL,
  `capture_type_id` smallint(6) NOT NULL DEFAULT '0',
  `points` smallint(6) NOT NULL DEFAULT '5',
  `points_for_user` smallint(6) NOT NULL DEFAULT '3',
  PRIMARY KEY (`capture_id`),
  KEY `capture_user` (`capture_id`,`id`,`user_id`),
  KEY `user_id` (`user_id`,`id`),
  KEY `id` (`id`),
  KEY `capture_creator_index` (`capture_id`,`creator_user_id`),
  KEY `points_capture_index` (`points_for_user`,`creator_user_id`),
  KEY `points_for_user_index` (`points_for_user`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1008992 ; 
```

* * *

```
select count(*) from items where user_id = '38415'

id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  captures    ref user_munzee_id  user_munzee_id  4   const   81  Using index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:28:19.533

mysql 优化器在查询期间尝试使用最佳索引。

在您的第一个查询中，优化器正在考虑 points_for_user_index 的最佳选择，实际上 Extra 列显示“使用索引”状态，这意味着“覆盖索引”。

当查询所需的所有字段（在您的情况下 select points_for_user from ... ）都包含在索引中时，会发生“覆盖索引”，这避免了访问完整的 mysql 数据（.MYD），有利于直接索引访问（。我的我）

首先你可以尝试重建索引树分析表

> 分析表项；

**非常大的表的注意事项**：

> ANALYZE TABLE 分析并存储表的键分布。在分析过程中，表被 InnoDB 和 MyISAM 的读锁锁定。此语句适用于 InnoDB、NDB 和 MyISAM 表。对于 MyISAM 表，此语句等效于使用 myisamchk --analyze。

如果“问题”仍然存在并且您想绕过优化器选择，您可以显式尝试强制使用索引

```
EXPLAIN SELECT points_for_user FROM items USE INDEX ( user_id ) WHERE user_id = '38415' 
```

更多细节：[http ://dev.mysql.com/doc/refman/5.5/en/index-hints.html](http://dev.mysql.com/doc/refman/5.5/en/index-hints.html)

克里斯蒂安

# html - 为非托管 HTML5 应用程序加载外部文件

> ID：12136400
> 
> 赞同：1
> 
> 时间：2012-08-27T04:53:19.913
> 
> 标签：html, xmlhttprequest

我目前正在开发一个加载外部资源的 HTML5 游戏。目前，我正在使用 XMLHttpRequest 读取文件，但这在 Chrome 上不起作用，导致

```
XMLHttpRequest cannot load file:///E:/game/data.txt
Cross origin requests are only supported for HTTP. 
```

该文件与 HTML5 文件位于同一目录中。

问题：

1.  HTML5 应用程序是否有任何方法可以使用 XMLHttpRequest（或其他方法）加载外部文件，而无需将其托管在网络服务器上？

2.  如果我将 HTML5 代码打包为支持 HTML5 的平板电脑/手机上的应用程序，XMLHttpRequest 是否能够加载外部文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:10:26.000

1.  (a) 是和不是。作为安全策略问题，XHR 传统上都是相同协议（即：http://，而不是 file:///），最重要的是，传统上也是相同域（如在同一个子域中 -`http://pages.site.com/index`无法从中获取文件`http://scripts.site.com/`）。现在可以使用跨域请求，但无论如何它们都需要网络服务器，并且托管文件的服务器必须专门接受请求。

    (b) 所以以一种迂回的方式，答案是肯定的，一些实现可能（错误地）允许您通过 XHR 获取文件，即使该页面是用文件系统术语而不是 http 请求（旧版本的浏览器)... ...但否则您将需要一种或另一种网络服务器。好消息是它们安装起来非常简单。EasyPHP 就足够了，而且它几乎是一个 3 次单击的解决方案。还有无数其他的。如果您想要的只是 apache 中的文件服务器，并且您不打算使用服务器端脚本语言（或者如果您确实打算使用PHP）。

2.  XMLHttpRequest 绝对能够获取外部文件...
    ***如果***它们实际上是外部文件（即：未捆绑在特定于手机的缓存中 - 为此使用手机的内置文件访问 API，并编写一个包装器来处理每个都具有相同的自定义界面），***并且***电话当前具有接收功能-准备好处理故障条件（例如具有默认设置对象，或具有错误处理或任何最佳情况，无论是什么失踪）。

    另外，查看应用程序缓存清单。同样，这是一个 html5 解决方案，不同手机的不同版本处理方式不同（早期与更标准化的格式）。 ***不要在开发过程中使用它，因为它会使测试代码/内容更改变得非常缓慢和痛苦***，但是当您的产品几乎完成且没有错误，并且距离发布几秒钟后，您告诉用户的浏览器缓存所有内容时，它很有用永恒的内容，让他们可以离线播放，并且可以节省各种带宽，下次播放时不必下载所有内容。

# iphone - iOS：无法删除文件

> ID：12136404
> 
> 赞同：1
> 
> 时间：2012-08-27T04:54:16.713
> 
> 标签：iphone, objective-c, ios

我是iOS的新手。我有个问题。

我记录了文件的路径，并在 Finder 中进行了验证。但是 fileExistsAtPath: return NO，这就是我不能删除它的原因。

我需要帮助！

这是代码：

```
+ (void)removeImage:(NSString*)imgName {
MyLog(@"%@", [Tool getFileFullPath:imgName]);
NSFileManager *fileManager = [NSFileManager defaultManager];
NSError *error;
BOOL fileExists = [fileManager fileExistsAtPath:(NSString *)[Tool getFileFullPath:imgName]];
NSLog(@"Path to file: %@", [Tool getFileFullPath:imgName]);        
NSLog(@"File exists: %d", fileExists);
NSLog(@"Is deletable file at path: %d", [fileManager isDeletableFileAtPath:[Tool getFileFullPath:imgName]]);
if (fileExists) 
{
    BOOL success = [fileManager removeItemAtPath:[Tool getFileFullPath:imgName] error:&error];
    if (!success) NSLog(@"Error: %@", [error localizedDescription]);
}

} 
```

文件路径：`/Users/vibolteav/Library/Application Support/iPhone Simulator/5.1/Applications/FD57CA70-14E4-442D-9CA5-DE7A7AD56A93/Documents/img/2053871632`

文件已存在：`0`

是路径中的可删除文件：`1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:38:21.717

文档路径..

```
 NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

   documentPath_ = [searchPaths objectAtIndex: 0]; 
```

追加文件名...

```
 NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:fileName];

   NSFileManager *fileManager = [NSFileManager defaultManager];

    if ([fileManager fileExistsAtPath:fullPath]) 
       {
           NSError *error;

           if (![fileManager removeItemAtPath:fullPath error:&error]) {

           }
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:13:29.520

要从文档目录中删除文件，请使用以下代码：

```
 -(void)removeOneImage:(NSString*)fileName
{
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:fileName];
    NSLog(@"%@",fullPath);
    [fileManager removeItemAtPath: fullPath error:NULL]; 
```

}

# iphone - 如何在 IOS 4.0 中自定义 self.title 的垂直位置？

> ID：12136407
> 
> 赞同：1
> 
> 时间：2012-08-27T04:54:35.167
> 
> 标签：iphone, xcode

如何在 iOS 4.0 中设置/自定义 setTitleVerticalPositionAdjustment？我需要建议。

```
- (void)viewDidLoad
{
    label = [[UILabel alloc] init];
    label.backgroundColor = [UIColor clearColor];
    label.textAlignment = UITextAlignmentRight;
    label.textColor=[UIColor whiteColor]; 
    label.font = [ UIFont fontWithName: @"XXII DIRTY-ARMY" size: 32.0 ];
    label.shadowColor = [UIColor colorWithWhite:0.0 alpha:0.0f];

    label.text=NSLocalizedString(@"HomeTitle", @"Home");
    self.navigationController.navigationBar.tintColor = [UIColor   newBrownLight];
    label.frame=CGRectMake(0, 0, 290, 44);

    self.navigationItem.titleView = label; 
    self.navigationItem.title=label.text; 
```

}

# android - Android 从 Eclipse 开始正确的活动 - 但不是从手机开始

> ID：12136408
> 
> 赞同：0
> 
> 时间：2012-08-27T04:54:38.910
> 
> 标签：android, eclipse, android-intent, android-activity, manifest

当我从 Eclipse 启动我的应用程序到我的手机时，它首先启动 Launcher，然后是我的主要活动。它成功地将一个变量传递给主活动。我检查用户名是否已记录在敬酒中。当我直接从手机启动我的应用程序时，它会直接进入主要活动；主要活动将变量注册为空。

我创建了一个测试应用程序，该应用程序执行与此启动器完全相同的功能；除了活动名称外，它们的清单是相同的；并且当我从 Eclipse 安装它时，该测试应用程序在手机上的功能是正确的。

这是一个真正的脑筋急转弯。

这是启动活动的代码：

```
public class SecureAppStarter extends Activity {

TextView report;
WebView input;
Context thisContext = this;
String thisValue, url;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.starter);
    initialize();

    WebViewClient rclient = new WebViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(WebView  view, String  url){
            return false;
        }
        @Override
        public void onLoadResource(WebView  view, String  url){ 
            input.getSettings().setJavaScriptEnabled(true);
            input.addJavascriptInterface(new CustomJavaScriptInterface(thisContext), "Android");
        }

        @Override
        public void onPageFinished(WebView view, String url){
            report.setText(""+thisValue);
            if (thisValue!= null){
                Intent passOn = new Intent("arbuckle.app.MainActivity");
                passOn.putExtra("username", thisValue);
                startActivity(passOn);
            }
        }
    };
    rclient.onPageFinished(input, url);
    input.setWebViewClient(rclient);
    input.loadUrl(url);
}

public class CustomJavaScriptInterface {
    Context mContext;

    CustomJavaScriptInterface(Context context) {

        mContext = context;
    }

    public void getValue(String value){
        thisValue = value;
    }
}

private void initialize() {
    report = (TextView) findViewById(R.id.tvViewName);
    input = (WebView) findViewById(R.id.wbWebAuth);
    url = "http://URL.of.data.com";
}
} 
```

这是清单：

```
 <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="SecureAppStarter"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
          <activity
            android:name=".ArbuckleAppActivity"
            android:label="@string/app_name"
            android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="arbuckle.app.ArbuckleAppActivity" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:19:16.817

好吧，我想通了。

几周以来，我一直在安装/卸载应用程序的版本，主要活动是启动器。显然，它保存在 Android 缓存中的某个位置，并且它正在选择要启动的主要活动，即使它不再是启动器。

所以我完全卸载了该应用程序；并重新安装。现在它起作用了。

有没有人认为我解决了这个问题而不是解决它？我应该期待未来的进一步问题吗？

# vb.net - Vb.net 中的线程问题

> ID：12136414
> 
> 赞同：0
> 
> 时间：2012-08-27T04:55:26.427
> 
> 标签：vb.net

我创建了 vb.net 应用程序并添加了一个名为 frmScan 的 Windows 窗体。我放了两个文本框和两个标签。然后我用委托事件编写以下线程。

```
Private Delegate Sub DoInitializedDelegate() 

Public motdet As New Thread(AddressOf MotionDetection)

Private Sub MotionDetection()
'Do motion detection Work
'It is never ending Loop until form unload.
End Sub 
```

然后我在我的表单加载事件中启动它。

```
Private Sub frmScan_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
motdet.Start()      
End Sub 
```

因此，当我加载表单时，我的问题就开始了。我可以看到表格，但这就像加载一些东西。我认为我的运动检测线程在表单卸载之前永远不会结束循环。我不能在上面提到的两个文本框中输入任何内容。我应该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:06:41.413

`Application.DoEvents()`在调用长时间运行的线程之前使用。

请参阅此处的示例[http://msdn.microsoft.com/en-us/library/aa446540.aspx](http://msdn.microsoft.com/en-us/library/aa446540.aspx)

# extjs - Sencha touch 2 - 无法选择列表项

> ID：12136415
> 
> 赞同：0
> 
> 时间：2012-08-27T04:55:35.317
> 
> 标签：extjs, sencha-touch-2

我已经使用“hbox”布局完成了拆分视图，如下所示：

```
Ext.define('Sencha.view.Blog', {
extend: 'Ext.Panel',
xtype:'blogpage',

config:{
    layout:'fit',
    width:'100%',
    height:'100%',
    title: 'Blog',
    iconCls: 'star',
    style:'background-color: red;',

    items:[
            { 
                xtype:'list',
                id:'thelist',
                //fullscreen:false,
                //docked:'left',
                style:'background-color: blue;',
                height:'100%', width:'20%',
                /*itemTpl: '{title}',
                store: {
                        fields: ['title','url'],
                        data: [
                            {title:'Abc1', url: 'url1'},
                            {title:'Abc2', url: 'url2'},
                            {title:'Abc3', url: 'url3'},
                            {title:'Abc4', url: 'url4'},
                        ]
                        }*/
                        store: {
            fields: ['name', 'number'],
            sorters: 'name',
            data: [
                {name: 'Shawshank Redemption', number: 5},
                {name: 'SuperBad', number: 3},
                {name: 'God Father', number: 5},
                {name: 'Forest Gump', number: 4.5},
                {name: 'A Beautiful Mind', number: 5},
            ]
        },

        itemTpl: '{name}'
            },
            {
                xtype:'panel',
                height:'100%',
                id:'urmilPanel',
                left:'21%',
                width:'79%',
                html:'Urmil\'s Panel',
                            config:{
            layout:{
                type: 'vbox'
            }
        }
            }
        ]
}
}); 
```

单击拆分视图左侧面板中的列表项时，我将在控制器中拆分视图的右侧面板中显示相应的列表，如下所示，

```
onitemtapList: function(list, index, target, record, e, eOpt)
{
    var thePanel = Ext.getCmp('urmilPanel');
    thePanel.removeAll(true);
    thePanel.add([
        {
            xtype: 'button',
            style: {
            'padding': '0.5em'
            },
            flex: 1,
            html: '<font> Table of content </font>',
            listeners:{
            tap: function(){
            console.log("button tapped............");
            }
            }
        },
        {
            xtype: 'list',
            store: {
                fields: ['name'],
                data: [
                    {name: 'BOM'},
                    {name: 'PLM'},
                    {name: 'Drawings'},
                    {name: 'History'},
                    {name: 'Preferences'},
                    {name: 'Import Files'}
                ]
            },
            flex: 1,
            style: {
            'height': '150'
            },

            itemTpl: '<div><img src="res/images/help_question_icon.png" align="absmiddle"/><font align="absmiddle" style="padding: 0.5em;">{name}</font><img src="res/images/help_arrow_hov.png" style="float: right;"/></div>',
            listeners: {
            itemtap: function(list, record){
            if(record.get('name') == 'BOM'){
                console.log("BOM clicked.........");
            }
            }
            },
        }
    ]);
} 
```

我可以点击按钮，但无法点击拆分视图右侧面板中按钮下方的列表项。

请帮助我解决上述问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T08:50:06.013

我通过给出 width:x% 而不是 flex 属性来解决它，如下所示：

```
 thePanel.add([
    {
        xtype: 'button',
        style: {
        'padding': '0.5em'
        },
        width: 10%,
        html: '<font> Table of content </font>',
        listeners:{
        tap: function(){
        console.log("button tapped............");
        }
        }
    },
    {
        xtype: 'list',
        store: {
            fields: ['name'],
            data: [
                {name: 'BOM'},
                {name: 'PLM'},
                {name: 'Drawings'},
                {name: 'History'},
                {name: 'Preferences'},
                {name: 'Import Files'}
            ]
        },
        width: 90%,
        style: {
        'height': '150'
        },

        itemTpl: '<div><img src="res/images/help_question_icon.png" align="absmiddle"/><font align="absmiddle" style="padding: 0.5em;">{name}</font><img src="res/images/help_arrow_hov.png" style="float: right;"/></div>',
        listeners: {
        itemtap: function(list, record){
        if(record.get('name') == 'BOM'){
            console.log("BOM clicked.........");
        }
        }
        },
    }
]); 
```

# jquery - j2me中多个div标签之间的html文本提取

> ID：12136416
> 
> 赞同：3
> 
> 时间：2012-08-27T04:55:48.367
> 
> 标签：jquery, html, java-me, lwuit

我有一个 html 网页网址[http://teluguone.com/recipes/content/Andhra-Spicy-Mutton-Curry-Recipe-6-221.html](http://teluguone.com/recipes/content/Andhra-Spicy-Mutton-Curry-Recipe-6-221.html)

我需要从上面的 url 中提取描述文本。

我的要求是，我需要在多个 DIV 标签之间获取带有 html 标签的文本，

例子：

```
<div class="relatedarticals_info_bold"><h1>Recipe Name</h1></div> : Andhra Spicy Mutton Curry Recipe</div> 
</div> <div id="relatedarticals_info2"> <div class="relatedarticals_info"> <div class="relatedarticals_info_bold">
<h1>Author</h1></div> : Teluguone</div> </div> <div id="relatedarticals_info2"> <div class="relatedarticals_info">
 <div class="relatedarticals_info_bold"><h1>Preparation Time</h1></div> : 30 Mins</div> </div>etc.....? 
```

我需要得到这样的输出：

```
Recipe Name: Andhra Spicy Mutton Curry Recipe Author: Teluguone 
Preparation Time: 30 Mins etc... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:13:20.070

如果 HTML 以字符串形式提供，您可以使用 jQuery`$.parseXML`转换成`XMLDocument`如果成功解析（格式良好的 HTML）。

然后可以使用 和其他此类遍历方法遍历和操作此`.find()`对象`.parent()`。

**注意**：当然，假设您愿意在客户端执行此操作。

# c++ - 我们需要一个外部函数来调用 C++ 中的函数吗？

> ID：12136417
> 
> 赞同：2
> 
> 时间：2012-08-27T04:55:51.020
> 
> 标签：c++

```
EXTERN(void) jpeg_fdct_8x4
JPP((DCTELEM * data, JSAMPARRAY sample_data, JDIMENSION start_col)); 
```

在这里，我有四个问题：

1.  语法 Extern(Void) 是什么意思？那个返回值是无效的？它是一种通常的语法吗？

2.  我在第三方代码中看到非类成员函数带有static关键字、inline关键字、no关键字和extern关键字。我知道 static 关键字将函数的范围限制在文件中。如果我使用“无关键字”会发生什么？我是否必须在其他文件中使用 extern 才能使用该函数，或者我可以在指定函数声明后直接从另一个文件调用该函数？

3.  我是否需要 C++ 中的 extern 才能使用 C 调用接口？

4.  内联函数的默认范围是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:00:15.773

`EXTERN(n)`是一个预处理器定义，可在以下位置找到`jmorecfg.h`：

```
 #define EXTERN(type)            extern type 
```

所以上面的语句扩展为

```
 extern void ... 
```

有关`extern`C 代码的文章，[请查看此答案。](https://stackoverflow.com/questions/856636/effects-of-the-extern-keyword-on-c-functions)

> > 如果我使用“无关键字”会发生什么？

在这种情况下，范围不受限制。非静态全局函数的名称对所有编译单元的链接器都是可见的，这意味着如果不同的模块使用相同的函数名称，则会出现名称冲突。

> > 3) 我是否只需要 C++ 中的 extern 才能使用 C 调用接口？

您大概是指`extern "C" {}`哪个指示编译器使用 C 调用约定。是的，您需要它来从 C++ 调用外部 C 函数。

> > 4) 内联函数的默认范围是什么？

与未声明它们的范围相同`inline`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-13T20:37:15.977

C++ 是一种区分大小写的语言。“extern”关键字与“EXTERN”不同。它似乎正在初始化一个 void 函数。您可以使用其他源文件中的函数，而无需使用 extern 关键字。例如，当您编写项目时，IDE 将始终使用 main() 函数开始调试和编译。您可以在其他文件中声明和调用函数，而无需使用 extern。

# android - 从 android sdk 11 或更高版本中的自定义对话框开始活动

> ID：12136424
> 
> 赞同：0
> 
> 时间：2012-08-27T04:56:50.130
> 
> 标签：android, dialog

我有一个问题，我很困惑。我有一个对话框，它包含一个按钮。我用这段代码在主 Activity 中显示对话框，非常简单：

```
InfoDialog id=new InfoDialog(this);
id.show(); 
```

我想当我点击按钮时，它会启动第二个活动。你看这很容易，我使用这个代码：

```
public class InfoDialog extends Dialog implements android.view.View.OnClickListener{

    Context context;

    public InfoDialog(Context context) {
        super(context);
        setContentView(R.layout.infodialog);
        this.context=context;
        setupViews();
    }

    private void setupViews() {
        Button button=(Button)findViewById(R.id.button1);
        button.setOnClickListener(this);    
    } 

    @Override
    public void onClick(View v) {

        switch (v.getId()){
        case R.id.button1:
            Intent newintent= new Intent(context,DestActivity.class);
            context.startActivity(newintent);
            break;  
    }
} 
```

我也在 Manifest 中声明了 destAct。当我在 Gingerbread Android 上运行旧 sdk 版本时，它运行良好。但是当我在冰淇淋三明治（sdk 11）或更高版本上运行此代码时，它会给我力量关闭！

这是我的日志猫：

```
08-27 09:38:54.540: W/dalvikvm(10945): threadid=1: thread exiting with uncaught exception (group=0x40a3d1f8)
08-27 09:38:54.544: E/AndroidRuntime(10945): FATAL EXCEPTION: main
08-27 09:38:54.544: E/AndroidRuntime(10945): java.lang.NullPointerException
08-27 09:38:54.544: E/AndroidRuntime(10945):    at my.app.InfoDialog.onClick(InfoDialog.java:131)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.view.View.performClick(View.java:3511)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.view.View$PerformClick.run(View.java:14105)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.os.Handler.handleCallback(Handler.java:605)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.os.Looper.loop(Looper.java:137)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at android.app.ActivityThread.main(ActivityThread.java:4575)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at java.lang.reflect.Method.invokeNative(Native Method)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at java.lang.reflect.Method.invoke(Method.java:511)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
08-27 09:38:54.544: E/AndroidRuntime(10945):    at dalvik.system.NativeStart.main(Native Method) 
```

这到底是什么？请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:05:23.110

主要问题在于声明您的`Button`，这不是您在对话框中为按钮提供内存的方式，您应该首先获取父级的引用（即此处的对话框），然后您应该找到视图

为了您更好地理解，我以以下方式重新创建了您的课程，请尝试此操作并告诉我

```
 Context context;
View parentView; // THIS IS ADDED

public InfoDialog(Context context) {
    super(context);
    parentView=setContentView(R.layout.infodialog); //UPDATED
    this.context=context;
    setupViews();
}

private void setupViews() {
    Button button=(Button)parentView.findViewById(R.id.button1); //UPDATED
    button.setOnClickListener(this);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:35:11.837

这是一个更简单的解决方案：

而且我没有使用 context.startActivity() ;)

```
public class MainActivity extends Activity {

final Context context = this;
private Button button;

public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    button = (Button) findViewById(R.id.buttonShowCustomDialog);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            // custom dialog
            final Dialog dialog = new Dialog(context);
            dialog.setContentView(R.layout.custom);
            dialog.setTitle("Some Title");

            // set the custom dialog components - text, image and button
            TextView text = (TextView) dialog.findViewById(R.id.text);
            text.setText("custom dialog");
            ImageView image = (ImageView) dialog.findViewById(R.id.image);
            image.setImageResource(R.drawable.ic_launcher);

            Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
            // if button is clicked, close the custom dialog
            dialogButton.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    switch (v.getId()){
                    case R.id.dialogButtonOK:
                        Intent newintent= new Intent(context,OtherActivity.class);
                        startActivity(newintent);
                        break; 
                    }
                }
            });

            dialog.show();
        }

    });

} 
```

}

这是我的xml：

```
 <?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >

   <ImageView
      android:id="@+id/image"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginRight="5dp" />

  <TextView
    android:id="@+id/text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="#FFF" 
    android:layout_toRightOf="@+id/image"/>

 <Button
    android:id="@+id/dialogButtonOK"
    android:layout_width="100px"
    android:layout_height="wrap_content"
    android:text=" Ok "
    android:layout_marginTop="5dp"
    android:layout_marginRight="5dp"
    android:layout_below="@+id/image"
    />

  </RelativeLayout> 
```

在 OtherActivity 我刚刚展示了一个祝酒词，即：

```
 protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Toast.makeText(this, "ok working fine", Toast.LENGTH_LONG).show();

} 
```

试试这个，它非常整洁、干净且不言自明的代码。尽量保持简单...

僵局...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T04:50:46.613

最后我修好了。我使用了一个处理程序并在处理程序消息接收上编写了 startActivity 代码。在按钮的 onClick 方法中，我只是向我的处理程序发送了一条消息。它在 sdk>11 上运行良好。但我现在仍然不知道为什么我的旧代码不起作用；）

# jquery - jQuery 最新库还是当前版本库？

> ID：12136429
> 
> 赞同：2
> 
> 时间：2012-08-27T04:57:57.977
> 
> 标签：jquery

我想知道为什么人们将 jQuery 当前版本附加到他们的网站上，如下所示

```
//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js 
```

而不是像下面那样附加由它自己更新的版本

```
http://code.jquery.com/jquery-latest.js 
```

请让我知道您对此的看法。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:02:37.853

您可以使用在更改 jQuery 版本时中断的插件 - 这可能只是意味着此类插件已过时/不好使用，但这样您就知道您坚持使用哪个版本。

顺便说一句，谷歌 CDN 更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T05:27:50.653

Google API 的第一个链接是缩小版，与第二个链接 173 个字节相比，只有 136 个字节。

使用 CDN，主要好处是缓存。如果用户已经访问过使用相同 CDN 和相同脚本的站点，则他们的脚本已经缓存在浏览器中，但这要求资源是可缓存的，并且“最新”版本在标头，而指定版本号的链接将在 2013 年 8 月 23 日星期五到期，因此换句话说，使用第二个链接时，jQuery 使用 CDN 的主要优势之一就丢失了，而且文件也更大。最重要的是，如果版本之间发生了某些变化，则使用在版本更新期间更改的某些 jQuery 方法的函数可能会因为 CDN 自动交付最新版本而中断。

使用第一个链接似乎是一个好主意，但在我看来，使用第二个链接不是，而且您最好自己托管文件并启用缓存。

然后还有其他使用 CDN 的原因：

它增加了并行性，因为某些浏览器一次只能从任何给定站点下载 3 或 4 个文件。

它减少了服务器使用的带宽量，因为您基本上可以从 CDN 获得免费带宽。

它增加了脚本已经被缓存的机会，并且随着更多站点使用大型 CDN 网络，更多用户将已经在浏览器中准备好文件而无需下载它，从而加快您的站点速度。

它确保有效负载尽可能小，因为 Google/MS/jQuery 可以以多种格式（如 GZIP 或 DEFLATE）预压缩文件。这使得下载时间非常短，因为它是超级压缩的，并且不像许多常见的网络服务器那样动态压缩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:01:13.703

我对code.jquery.com 不太了解。但是 Google APIs 代码位于 CDN（内容交付网络）上，与从本地计算机访问文件相比，访问速度更快。

并且始终建议从 CDN 访问文件。

请参阅以下文档以获取更多信息

雅虎文档：http: [//developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

谷歌文档：[https ://developers.google.com/speed/libraries/](https://developers.google.com/speed/libraries/)

# eclipse - 如何在 Eclipse RCP 中更改消息框中的字体大小？

> ID：12136432
> 
> 赞同：2
> 
> 时间：2012-08-27T04:58:07.740
> 
> 标签：eclipse, rcp

我想在消息框中以比通常大小更大的字体显示消息。我不知道怎么做这个任务。我也搜索了尝试谷歌，但找不到解决方案。eclipse rcp 有什么方法可以完成这个任务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T12:10:06.730

取决于你打开什么样的“消息框”。一般有：

1.  SWT 消息框 API ( `org.eclipse.swt.widgets.MessageBox`) - 这使用 OS 系统消息框，并且只能使用标题、文本和图标类型（错误、信息、问题...）进行自定义。
2.  JFace 消息对话框 API ( `org.eclipse.jface.dialogs.MessageDialog`) - 这使用“颜色和字体”首选项页面中定义的“基本->对话框”字体。`org.eclipse.jface.preference.PreferenceDialog#createTitleArea`请参阅将侦听器附加到 JFaceResources.getFontRegistry() 的方法中的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:18:43.493

查看Windows->首选项窗格
常规->外观->颜色和字体

# java - 来自前台服务 Android 的多个通知

> ID：12136434
> 
> 赞同：1
> 
> 时间：2012-08-27T04:58:13.593
> 
> 标签：java, android, android-2.2-froyo

我正在开发一个应用程序，我需要每天显示 5 次通知......来自前台服务......使用前台服务的目的是即使应用程序关闭也能够显示通知。所以我想在应用程序启动时启动服务并相应地安排它的通知时间我已经尝试使用android开发者论坛上提供的代码段但它对我不起作用......任何帮助和示例代码都非常感谢谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:07:53.257

如果要在固定时间触发通知，您可能不需要前台服务。保持服务运行只是为了显示通知是一个坏主意。使用`AlarmManager`.

你可以在谷歌找到它的教程。您需要一一安排警报。敌人 ex..当闹钟管理器第一次唤醒您的应用程序时，然后安排第二个闹钟和儿子..您可能无法设置 5 个并发闹钟时间表。一件一件做。。

# c# - 在 MCV3 razor 页面中显示 mime 类型的图标

> ID：12136435
> 
> 赞同：1
> 
> 时间：2012-08-27T04:58:22.967
> 
> 标签：c#, asp.net-mvc-3, mime-types

有没有一种快速的方法来确定（和显示）特定用户正在使用的图标，并将其显示在 MVC3 页面上？

例如

我的所有用户都将使用 Win (XP/Vista/7)，我会将上传文件的 mime 类型限制为：“text/plain”（用于 csv）、“application/pdf”、“application/msword”和“application/ vnd.openxmlformats-officedocument.wordprocessingml.document"

但是，如果显示给用户的图标与他们用来查看文件的应用程序相匹配，那就太好了。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:47:17.090

这取决于安全漏洞：javascript 识别个人计算机上已安装软件的能力。也就是说，可以通过识别是否以这种方式注册程序集来新建 ActiveXObject 并识别是否安装了某些应用程序。否则，最好的选择是抓住机会：如果他们使用的是 windows 显示 excel，如果 mac 显示它的图标，如果 android 显示任何东西，等等

我真的只是做一个最好的猜测，我打赌的绝大多数时间你都是对的。考虑到超出此范围的工作量，获得比基于检测到的操作系统更准确的 ROI 只是一个重大损失。

# jar - 使用 ProcessBuilder 将属性文件放入 jar 文件中

> ID：12136439
> 
> 赞同：0
> 
> 时间：2012-08-27T04:59:14.433
> 
> 标签：jar, processbuilder

我需要将一个名为“customer.properties”的属性文件放入“distribution.jar”中。上述文件的文件路径是；

*   模块\distribution.jar

*   模块\distributionaManager\customer.properties

我的要求是拥有“modules\distribution.ja\distributionaManager\customer.properties”

```
 ProcessBuilder pb = new ProcessBuilder("jar", "uf", "distribution.jar", "distributionaManager\\customer.properties");
        pb.directory(jarFile.getParentFile());
        try
        {
            Process process = pb.start();
            process.waitFor();
            process.destroy();
        } 
```

jarFile.getParentFile() - “模块目录”

但是这段代码在 jar 中没有创建任何属性文件。有什么建议么？

谢谢

# android - android中的listview问题内的滚动视图

> ID：12136445
> 
> 赞同：-1
> 
> 时间：2012-08-27T05:00:18.507
> 
> 标签：android

我正在从中间屏幕加载 xml(Screen) 的 xml 滚动视图中添加一个列表视图。在我的设计中，我有一个顶部像 textview 和一个列表视图，中间部分像 editext 和底部像按钮。页面从中间部分加载。如果它滚动我只能看到上面的部分。我想从上面加载页面。谁能告诉我问题是什么以及如何解决？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:11:58.197

用作`android:fillViewport="true"`滚动视图标签中的属性，它将填满屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:25:41.687

实际上没有必要将 ScrollView 与 ListView 一起使用。仅使用 ListView，您将能够滚动 ListView 中的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:46:22.120

> 永远不要将 ScrollView 与 ListView 一起使用，因为 ListView 负责自己的垂直滚动。最重要的是，这样做会破坏 ListView 中处理大型列表的所有重要优化，因为它有效地强制 ListView 显示其整个项目列表以填充 ScrollView 提供的无限容器。

在[这里找到](http://developer.android.com/reference/android/widget/ScrollView.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:50:16.150

使用 smoothScrollTO(0,0) 解决问题

# javascript - ckeditor textarea 自定义与 jquery 拖放

> ID：12136446
> 
> 赞同：3
> 
> 时间：2012-08-27T05:00:27.663
> 
> 标签：javascript, jquery, ckeditor

我正在 ckeditor 中做一个项目。我想将 div 添加到 ckeditor 的 textarea 中，它应该是可拖放的。我已经向 div 添加了一个 div 和样式。但是 jquery click 事件不适用于文本区域内的 div .我使用的代码如下，它适用于焦点事件。提前致谢

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="ckeditor.js"></script>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="ckfinder/ckfinder.js"></script>
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">

$(document).ready(function () {

    var editor = CKEDITOR.replace( 'content' );
    CKFinder.setupCKEditor( editor, '/ckfinder/' ) ;    

    var ckeditor = CKEDITOR.instances['content'];
    ckeditor.on('focus', fnHandler);

});

function fnHandler(){
    alert("Working");
}

</script>

</head>
<body>

<textarea class="ckeditor" name="content" id="content" cols="20" rows="40">

<div id="makeMeDraggable"> </div>
</textarea>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:09:41.610

首先在他们的演示页面上进行测试，看看你想做的事情是否在那里工作！

[http://ckeditor.com/demo](http://ckeditor.com/demo)

您可能必须与 ckeditor 开发人员一起使用它，并确保您安装了它的最新版本，以及它所依赖的最新库，例如 jQuery。

如果它仍然不起作用，那么您可能必须自定义 Javascript 库，或者找到另一个可以工作的插件，就像他们在 DotNetnuke 或任何其他主流 CMS 系统中使用的插件一样。

# php - 使用 php 到 Android 无法从 MySql 获取数据？

> ID：12136448
> 
> 赞同：0
> 
> 时间：2012-08-27T05:00:52.987
> 
> 标签：php, android, mysql, http-status-code-403

我创建了一个应用程序，它使用 php 从 mysql 获取数据。但是当我从我的 android 应用程序调用 php 文件时，我在我的 LogCat 窗口中得到了跟踪。

```
08-26 21:07:57.748: V/(1036): Response : org.apache.http.message.BasicHttpResponse@44f8b018
08-26 21:07:57.758: V/(1036): Entity : org.apache.http.conn.BasicManagedEntity@44f8c730
08-26 21:07:57.839: V/(1036): Result : <!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
08-26 21:07:57.839: V/(1036): <html><head>
08-26 21:07:57.839: V/(1036): <title>403 Forbidden</title>
08-26 21:07:57.839: V/(1036): </head><body>
08-26 21:07:57.839: V/(1036): <h1>Forbidden</h1>
08-26 21:07:57.839: V/(1036): <p>You don't have permission to access /PHP/getAllPeopleBornAfter.php
08-26 21:07:57.839: V/(1036): on this server.</p>
08-26 21:07:57.839: V/(1036): </body></html> 
```

但是当我使用 wamp 服务器运行 .php 时，它可以成功获取数据。我不明白我在哪里犯了错误。

以下是我的安卓代码

```
ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("year","1980"));

try{
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.167.122.24 /PHP/  getAllPeopleBornAfter.php");
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();

    Log.v("","Response : "+response);
    Log.v("","Entity : "+entity);
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
    StringBuilder sb = new StringBuilder();
    String line = null;

    while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    is.close();
    result=sb.toString();
    Log.v("","Result : "+result);
}catch(Exception e){
    Log.v("log_tag", "Error in http connection "+e);
} 
```

请给我一些想法。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:09:50.773

1）以下是相关信息：

`You don't have permission to access /PHP/getAllPeopleBornAfter.php`

2) 这来自您的 Windows 服务器。

您有权从您的 Android 手机“接触”互联网。

3）您*没有*授予远程客户端（不仅是Android，还有网络上任何其他PC上的*任何*Web浏览器）访问文件的权限。

建议：

4) 检查您的 Web 服务器根目录的 httpd.conf 和/或 .htaccess 权限。

这是一个很好的链接和一个很好的例子：

*   [http://forum.wampserver.com/read.php?2,49649](http://forum.wampserver.com/read.php?2,49649)

    ```
     #   onlineoffline tag - don't remove
        Order Deny,Allow
        Deny from all
        Allow from 127.0.0.1
        Allow from IP_ADDRESS_ABC
        ...
        Allow from IP_ADDRESS_XYZ
    </Directory> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:04:18.120

您的错误日志显示您忘记在`AndroidManifest.xml`,

只需在您的`AndroidManifest.xml`文件中写入以下权限。

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:04:19.487

检查您的 Android 清单中是否有互联网权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# image - 滚动uitableview时图像重复

> ID：12136455
> 
> 赞同：0
> 
> 时间：2012-08-27T05:03:05.570
> 
> 标签：image, uitableview, scroll

我有一个 uitableview 并且我已经为每一行分配了图像。tableView 显示聊天消息和聊天气泡的图像（如在 ios 消息传递应用程序中）。

滚动非常慢，图像似乎在上下滚动时重复。

```
- (UITableViewCell *)tableView:(UITableView *)tableView 
         cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSLog(@"tableView method called AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA");

    //static NSString *CellIdentifier = @"Cell";

    //---add this---
    UILabel* dateLabel = nil;
    UILabel* messageLabel = nil;
    UIImageView *imageView_top_left = nil;
    UIImageView *imageView_top_middle = nil;
    UIImageView *imageView_top_right = nil;

    UIImageView *imageView_middle_left = nil;
    UIImageView *imageView_middle_right = nil;
    UIImageView *imageView_middle_middle = nil;

    UIImageView *imageView_bottom_left = nil;
    UIImageView *imageView_bottom_middle = nil;
    UIImageView *imageView_bottom_right = nil;

    /*UITableViewCell *cell = [tableView 
                              dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    }*/

    ChatMessage *chatMessage = [self.chatMessagesList objectAtIndex:indexPath.row];

    // Check whether this message is to me

    if (![chatMessage.fromId isEqualToString:myId]){

        /////////// changed //////////
        static NSString *CellIdentifier = @"Cell1";

        UITableViewCell *cell = [tableView 
                                 dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];  
        }
        ////////////////////////////

        NSLog(@"AAAAAAAAAAAAAAAAA");

        /////////////////// image ////////////////////////////////////////////////////////////

        NSURL *avatarUrl = [NSURL URLWithString: 
                            @"http://www.mobyn.com/mobyn_v3/application/upload/profile_images/default.jpg"];
        UIImage *avatarImage = [UIImage imageWithData: [NSData dataWithContentsOfURL:avatarUrl]];

        UIImageView *avatar = [[UIImageView alloc] initWithImage:avatarImage];
        avatar.frame = CGRectMake(0, 23, 60, 60);
        [cell.contentView addSubview:avatar];

        //[avatarImage release];
        //[avatar release];

        //////////////////////////////////////////////////////////////////////////////////////

        // If YES, then create the row with the corresponding bubble
        //---add this---
        //---date---
        // dateLabel = [[[UILabel alloc] init] autorelease];
        //dateLabel.tag = DATELABEL_TAG;
        //[cell.contentView addSubview: dateLabel];

        //---top left---
        imageView_top_left = [[[UIImageView alloc] init] autorelease];
        imageView_top_left.tag = IMAGEVIEW_TAG_1;        
        [cell.contentView addSubview: imageView_top_left];

        //---top middle---
        imageView_top_middle = [[[UIImageView alloc] init] autorelease];
        imageView_top_middle.tag = IMAGEVIEW_TAG_2;
        [cell.contentView addSubview: imageView_top_middle];

        //---top right---
        imageView_top_right = [[[UIImageView alloc] init] autorelease];
        imageView_top_right.tag = IMAGEVIEW_TAG_3;
        [cell.contentView addSubview: imageView_top_right];

        //---middle left---
        imageView_middle_left = [[[UIImageView alloc] init] autorelease];
        imageView_middle_left.tag = IMAGEVIEW_TAG_4;
        [cell.contentView addSubview: imageView_middle_left];

        //---middle middle---
        imageView_middle_middle = [[[UIImageView alloc] init] autorelease];
        imageView_middle_middle.tag = IMAGEVIEW_TAG_5;
        [cell.contentView addSubview: imageView_middle_middle];

        //---middle right---
        imageView_middle_right = [[[UIImageView alloc] init] autorelease];
        imageView_middle_right.tag = IMAGEVIEW_TAG_6;
        [cell.contentView addSubview: imageView_middle_right];

        //---bottom left---
        imageView_bottom_left = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_left.tag = IMAGEVIEW_TAG_7;
        [cell.contentView addSubview: imageView_bottom_left];

        //---bottom middle---
        imageView_bottom_middle = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_middle.tag = IMAGEVIEW_TAG_8;
        [cell.contentView addSubview: imageView_bottom_middle];

        //---bottom right---
        imageView_bottom_right = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_right.tag = IMAGEVIEW_TAG_9;
        [cell.contentView addSubview: imageView_bottom_right];

        //---message---
        messageLabel = [[[UILabel alloc] init] autorelease];
        messageLabel.tag = MESSAGELABEL_TAG;        
        [cell.contentView addSubview: messageLabel];

        //---set the images to display for each UIImageView---
        imageView_top_left.image = 
        [UIImage imageNamed:@"bubble_top_left2.png"];
        imageView_top_middle.image = 
        [UIImage imageNamed:@"bubble_top_middle2.png"];
        imageView_top_right.image = 
        [UIImage imageNamed:@"bubble_top_right2.png"];

        imageView_middle_left.image = 
        [UIImage imageNamed:@"bubble_middle_left2.png"];
        imageView_middle_middle.image = 
        [UIImage imageNamed:@"bubble_middle_middle2.png"];
        imageView_middle_right.image = 
        [UIImage imageNamed:@"bubble_middle_right2.png"];

        imageView_bottom_left.image = 
        [UIImage imageNamed:@"bubble_bottom_left2.png"];
        imageView_bottom_middle.image = 
        [UIImage imageNamed:@"bubble_bottom_middle2.png"];
        imageView_bottom_right.image = 
        [UIImage imageNamed:@"bubble_bottom_right2.png"];

        ///////////////////////////////////////////////
        //---calculate the height for the label---
        int labelHeight = [self labelHeight:messsageForTheRow];
        labelHeight -= bubbleFragment_height;
        if (labelHeight<0) labelHeight = 0; 

        //---you can customize the look and feel for the date for each message here---
        dateLabel.frame = CGRectMake(0.0, 0.0, 200, 15.0);
        dateLabel.font = [UIFont boldSystemFontOfSize: FONTSIZE];
        dateLabel.textAlignment = UITextAlignmentLeft;
        dateLabel.textColor = [UIColor darkGrayColor];
        dateLabel.backgroundColor = [UIColor clearColor];

        //---top left---
        imageView_top_left.frame = 
        CGRectMake(bubble_x, bubble_y, bubbleFragment_width, bubbleFragment_height);        
        //---top middle---
        imageView_top_middle.frame = 
        CGRectMake(bubble_x + bubbleFragment_width, bubble_y, 
                   bubbleFragment_width, bubbleFragment_height);        
        //---top right---
        imageView_top_right.frame = 
        CGRectMake(bubble_x + (bubbleFragment_width * 2), bubble_y, 
                   bubbleFragment_width, bubbleFragment_height);        
        //---middle left---
        imageView_middle_left.frame = 
        CGRectMake(bubble_x, bubble_y + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---middle middle---
        imageView_middle_middle.frame = 
        CGRectMake(bubble_x + bubbleFragment_width, bubble_y + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---middle right---
        imageView_middle_right.frame = 
        CGRectMake(bubble_x + (bubbleFragment_width * 2), 
                   bubble_y + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---bottom left---
        imageView_bottom_left.frame = 
        CGRectMake(bubble_x, bubble_y + bubbleFragment_height + labelHeight, 
                   bubbleFragment_width, bubbleFragment_height );         
        //---bottom middle---
        imageView_bottom_middle.frame = 
        CGRectMake(bubble_x + bubbleFragment_width, 
                   bubble_y + bubbleFragment_height + labelHeight,
                   bubbleFragment_width, bubbleFragment_height);        
        //---bottom right---
        imageView_bottom_right.frame = 
        CGRectMake(bubble_x + (bubbleFragment_width * 2), 
                   bubble_y + bubbleFragment_height + labelHeight, 
                   bubbleFragment_width, bubbleFragment_height );

        //---you can customize the look and feel for each message here---    
        messageLabel.frame = 
        CGRectMake(bubble_x + 10, bubble_y + 5, 
                   (bubbleFragment_width * 3) - 25, 
                   (bubbleFragment_height * 2) + labelHeight - 10);

        messageLabel.font = [UIFont systemFontOfSize:FONTSIZE];        
        messageLabel.textAlignment = UITextAlignmentCenter;
        messageLabel.textColor = [UIColor darkTextColor];
        messageLabel.numberOfLines = 0; //---display multiple lines---
        messageLabel.backgroundColor = [UIColor clearColor];
        messageLabel.lineBreakMode = UILineBreakModeWordWrap; 

        ///// changed ///////
        messsageForTheRow = chatMessage.messsage;
        messageLabel.text = messsageForTheRow ;  
        return cell;
        ////////////////////
    } else {

        /////////// changed //////////
        static NSString *CellIdentifier = @"Cell2";

        UITableViewCell *cell = [tableView 
                                 dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];  
        }
        ////////////////////////////

        // If NO, then create the row with the bubble which shows it from me
        // If YES, then create the row with the corresponding bubble
        //---add this---
        //---date---
        // dateLabel = [[[UILabel alloc] init] autorelease];
        //dateLabel.tag = DATELABEL_TAG;
        //[cell.contentView addSubview: dateLabel];

        /////////////////// image ////////////////////////////////////////////////////////////

        NSURL *avatarUrl = [NSURL URLWithString: 
                            @"http://www.mobyn.com/mobyn_v3/application/upload/profile_images/default.jpg"];
        UIImage *avatarImage = [UIImage imageWithData: [NSData dataWithContentsOfURL:avatarUrl]];

        UIImageView *avatar = [[UIImageView alloc] initWithImage:avatarImage];
        avatar.frame = CGRectMake(255, 23, 60, 60);
        [cell.contentView addSubview:avatar];

        //[avatarImage release];
        //[avatar release];

        //////////////////////////////////////////////////////////////////////////////////////

        NSLog(@"BBBBBBBBBBBBBBBBB");

        //---top left---
        imageView_top_left = [[[UIImageView alloc] init] autorelease];
        imageView_top_left.tag = IMAGEVIEW_TAG_1;        
        [cell.contentView addSubview: imageView_top_left];

        //---top middle---
        imageView_top_middle = [[[UIImageView alloc] init] autorelease];
        imageView_top_middle.tag = IMAGEVIEW_TAG_2;
        [cell.contentView addSubview: imageView_top_middle];

        //---top right---
        imageView_top_right = [[[UIImageView alloc] init] autorelease];
        imageView_top_right.tag = IMAGEVIEW_TAG_3;
        [cell.contentView addSubview: imageView_top_right];

        //---middle left---
        imageView_middle_left = [[[UIImageView alloc] init] autorelease];
        imageView_middle_left.tag = IMAGEVIEW_TAG_4;
        [cell.contentView addSubview: imageView_middle_left];

        //---middle middle---
        imageView_middle_middle = [[[UIImageView alloc] init] autorelease];
        imageView_middle_middle.tag = IMAGEVIEW_TAG_5;
        [cell.contentView addSubview: imageView_middle_middle];

        //---middle right---
        imageView_middle_right = [[[UIImageView alloc] init] autorelease];
        imageView_middle_right.tag = IMAGEVIEW_TAG_6;
        [cell.contentView addSubview: imageView_middle_right];

        //---bottom left---
        imageView_bottom_left = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_left.tag = IMAGEVIEW_TAG_7;
        [cell.contentView addSubview: imageView_bottom_left];

        //---bottom middle---
        imageView_bottom_middle = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_middle.tag = IMAGEVIEW_TAG_8;
        [cell.contentView addSubview: imageView_bottom_middle];

        //---bottom right---
        imageView_bottom_right = [[[UIImageView alloc] init] autorelease];
        imageView_bottom_right.tag = IMAGEVIEW_TAG_9;
        [cell.contentView addSubview: imageView_bottom_right];

        //---message---
        messageLabel = [[[UILabel alloc] init] autorelease];
        messageLabel.tag = MESSAGELABEL_TAG;        
        [cell.contentView addSubview: messageLabel];

        //---set the images to display for each UIImageView---
        imageView_top_left.image = 
        [UIImage imageNamed:@"bubble_top_left.png"];
        imageView_top_middle.image = 
        [UIImage imageNamed:@"bubble_top_middle.png"];
        imageView_top_right.image = 
        [UIImage imageNamed:@"bubble_top_right.png"];

        imageView_middle_left.image = 
        [UIImage imageNamed:@"bubble_middle_left.png"];
        imageView_middle_middle.image = 
        [UIImage imageNamed:@"bubble_middle_middle.png"];
        imageView_middle_right.image = 
        [UIImage imageNamed:@"bubble_middle_right.png"];

        imageView_bottom_left.image = 
        [UIImage imageNamed:@"bubble_bottom_left.png"];
        imageView_bottom_middle.image = 
        [UIImage imageNamed:@"bubble_bottom_middle.png"];
        imageView_bottom_right.image = 
        [UIImage imageNamed:@"bubble_bottom_right.png"];

        /////////////////////////////////////////////////
        //---calculate the height for the label---
        int labelHeight = [self labelHeight:messsageForTheRow];
        labelHeight -= bubbleFragment_height;
        if (labelHeight<0) labelHeight = 0;   

        //---you can customize the look and feel for the date for each message here---
        dateLabel.frame = CGRectMake(0.0, 0.0, 200, 15.0);
        dateLabel.font = [UIFont boldSystemFontOfSize: FONTSIZE];
        dateLabel.textAlignment = UITextAlignmentLeft;
        dateLabel.textColor = [UIColor darkGrayColor];
        dateLabel.backgroundColor = [UIColor clearColor];

        //---top left---
        imageView_top_left.frame = 
        CGRectMake(bubble_x2, bubble_y, bubbleFragment_width, bubbleFragment_height);        
        //---top middle---
        imageView_top_middle.frame = 
        CGRectMake(bubble_x2 + bubbleFragment_width, bubble_y2, 
                   bubbleFragment_width, bubbleFragment_height);        
        //---top right---
        imageView_top_right.frame = 
        CGRectMake(bubble_x2 + (bubbleFragment_width * 2), bubble_y2, 
                   bubbleFragment_width, bubbleFragment_height);        
        //---middle left---
        imageView_middle_left.frame = 
        CGRectMake(bubble_x2, bubble_y2 + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---middle middle---
        imageView_middle_middle.frame = 
        CGRectMake(bubble_x2 + bubbleFragment_width, bubble_y2 + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---middle right---
        imageView_middle_right.frame = 
        CGRectMake(bubble_x2 + (bubbleFragment_width * 2), 
                   bubble_y2 + bubbleFragment_height, 
                   bubbleFragment_width, labelHeight);        
        //---bottom left---
        imageView_bottom_left.frame = 
        CGRectMake(bubble_x2, bubble_y2 + bubbleFragment_height + labelHeight, 
                   bubbleFragment_width, bubbleFragment_height );         
        //---bottom middle---
        imageView_bottom_middle.frame = 
        CGRectMake(bubble_x2 + bubbleFragment_width, 
                   bubble_y2 + bubbleFragment_height + labelHeight,
                   bubbleFragment_width, bubbleFragment_height);        
        //---bottom right---
        imageView_bottom_right.frame = 
        CGRectMake(bubble_x2 + (bubbleFragment_width * 2), 
                   bubble_y2 + bubbleFragment_height + labelHeight, 
                   bubbleFragment_width, bubbleFragment_height );

        //---you can customize the look and feel for each message here---    
        messageLabel.frame = 
        CGRectMake(bubble_x2 + 10, bubble_y2 + 5, 
                   (bubbleFragment_width * 3) - 25, 
                   (bubbleFragment_height * 2) + labelHeight - 10);

        messageLabel.font = [UIFont systemFontOfSize:FONTSIZE];        
        messageLabel.textAlignment = UITextAlignmentCenter;
        messageLabel.textColor = [UIColor darkTextColor];
        messageLabel.numberOfLines = 0; //---display multiple lines---
        messageLabel.backgroundColor = [UIColor clearColor];
        messageLabel.lineBreakMode = UILineBreakModeWordWrap; 

        ///// changed ///////
        messsageForTheRow = chatMessage.messsage;
        messageLabel.text = messsageForTheRow ;  
        return cell;
        ////////////////////

    }

    // Then set the data

    messsageForTheRow = chatMessage.messsage;
    messageLabel.text = messsageForTheRow ;    

    //--------------

    /////////// changed //////////
    UITableViewCell *cell = [UITableViewCell alloc];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:32:29.087

您可能正在重新调用您的 chatMessage 初始化/分配`cellForRowAtIndexPath`。

默认情况下`UITableView`，当您向上/向下滚动时会释放屏幕外单元格数据。`cellForRowAtIndexPath`当您向后滚动时，它会再次调用。

尝试：

*   在中设置断点`cellForRowAtIndexPath`
*   禁用它
*   向下滚动
*   再次启用断点
*   再次向上滚动

你的应用应该在`cellForRowAtIndexPath`.

我猜你一直在打电话`UITableViewCell *cell = [UITableViewCell alloc];`。

每次您向上和向下滚动`UITableView`调用`cellForRowAtIndexPath`时，最终都会重新调用单元分配，因此会出现多个图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T22:36:41.337

你需要从你的 IF 语句中取出这段代码：

```
UITableViewCell *cell = [tableView 
                             dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

紧随其后：

```
//---add this---
UILabel* dateLabel = nil;
UILabel* messageLabel = nil;
UIImageView *imageView_top_left = nil;
UIImageView *imageView_top_middle = nil;
UIImageView *imageView_top_right = nil;

UIImageView *imageView_middle_left = nil;
UIImageView *imageView_middle_right = nil;
UIImageView *imageView_middle_middle = nil;

UIImageView *imageView_bottom_left = nil;
UIImageView *imageView_bottom_middle = nil;
UIImageView *imageView_bottom_right = nil; 
```

希望它能解决你的问题

# java - 使用 Java 更新文件中所有出现的字符串

> ID：12136459
> 
> 赞同：2
> 
> 时间：2012-08-27T05:03:34.593
> 
> 标签：java, file

我有 1 个文件，其中包含一些需要更新的字符串。

```
MY REPORT
REPORT RUN DATE : 27/08/2012 12:35:11 PAGE 1 of @TOTAL@                                              
SUCCESSFUL AND UNSUCCESSFUL DAILY TRANSACTIONS REPORT                                                                                    
---record of data here----

MY REPORT                                                                                                                                                 
REPORT RUN DATE : 27/08/2012 12:35:11 PAGE 2 of @TOTAL@                                              
SUCCESSFUL AND UNSUCCESSFUL DAILY TRANSACTIONS REPORT
---record of data here---- 
```

如果我只想将所有出现的@TOTAL@ 更新为某个数字，有没有一种快速有效的方法来做到这一点？

我知道我也可以使用 BufferedReader+BufferedWriter 打印到另一个文件并一路使用 String.replace 它，但我想知道是否有更好更优雅的方法来解决这个问题......

文件不会超过 10MB，所以不用担心文件是否会很大（超过 1 GB 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:07:29.557

如果您不关心文件太大，并且认为`replace()`在每一行上调用都不优雅，我想您可以将整个文件读入一个字符串，调用`replace()`一次，然后将其写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:59:17.127

> ...我想知道是否有更好更优雅的方法来解决这个问题

这取决于您所说的“更好和优雅”是什么意思，但 IMO 的答案是否定的。

> 文件不会超过 10MB，所以不用担心文件是否会很大（超过 1 GB 等）

您不太可能超过 1Gb。然而：

*   您可能无法 100% 确定文件不会大于 10Mb。对于任何具有重要生命周期的程序，您很少知道需求和使用模式不会随着时间而改变。

*   事实上，如果将整个文件加载到 StringBuilder 中，一个 10Mb 的文本文件可能会占用多达 60Mb 的内存。首先，字节被膨胀成字符。其次，StringBuilder 用于管理其后备数组的算法涉及分配一个大小为原始数组两倍的新数组。因此，峰值内存使用量可能高达您正在读取的文件中字节数的 6 倍。

*   请注意，60Mb 大于某些平台上某些 JVM 的默认最大堆大小。

# wcf - 通过 https 访问 AppHarbor 上的 WCF 服务

> ID：12136462
> 
> 赞同：2
> 
> 时间：2012-08-27T05:03:42.657
> 
> 标签：wcf, ssl, appharbor

我正在尝试使用传输安全模型来保护我的 WCF 服务。我已成功将我的服务部署到 AppHarbor。但是当我尝试访问服务页面时出现以下异常：

[InvalidOperationException：找不到与具有绑定 BasicHttpBinding 的端点的方案 https 匹配的基地址。注册的基地址方案是 [http].] ...

我没有上传任何证书，只是在那里使用搭载 SSL。我已经下载了构建并将其部署在我的机器上。它工作正常。

这是我的 web.config 的 system.serviceModel 部分：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="TransportSecurity">
                <security mode="Transport">
                    <transport clientCredentialType="None"/>
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <services>
        <service behaviorConfiguration="AuthService.AuthServiceBehavior"  name="AuthService.AuthService">
            <host>
                <baseAddresses>
                    <add baseAddress="https://auth.apphb.com/AuthService.svc" />
                </baseAddresses>
            </host>
            <endpoint address="" binding="basicHttpBinding" bindingConfiguration="TransportSecurity" contract="AuthService.IAuthService" />
            <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="AuthService.AuthServiceBehavior">
                <serviceMetadata httpsGetEnabled="true"/>        
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

我已经尝试过[在 AppHarbor 上托管 WCF Web API 应用程序？](https://stackoverflow.com/questions/6186090/hosting-a-wcf-web-api-app-on-appharbor)

有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T13:28:23.770

当您通过 LB（AppHarbor 的示例之一）与 wcf Web 服务进行通信时，经常会出现此问题。

您应该了解有关此类通信的几件事。

1）您的客户端应用程序和 LB 之间的通信是安全的（`https`正在使用中）。因此，您应该在客户端利用安全绑定。

> ```
>  <basicHttpBinding>
>      <binding name="BasicHttpBinding_IAuthService">
>          <security mode="Transport">
>              <transport clientCredentialType="None" />
>          </security>
>      </binding> 
>  </basicHttpBinding> 
> ```

2) LB 和web-front 之间的通信使用`http`，所以服务器绑定应该`basicHttpBinding`没有额外的配置。

```
<endpoint binding="basicHttpBinding" contract="AuthService.IAuthService" /> 
```

总结我们拥有的所有东西

**客户**

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IAuthService">
                    <security mode="Transport">
                        <transport clientCredentialType="None" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://auth.apphb.com/AuthService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAuthService"
                contract="AuthService.IAuthService" name="BasicHttpBinding_IAuthService" />
        </client>
    </system.serviceModel>
</configuration> 
```

**服务器**

```
<system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <protocolMapping>
      <add scheme="http" binding="basicHttpBinding" />
    </protocolMapping>
    <bindings>
      <basicHttpBinding/>
    </bindings>
    <services>
      <service behaviorConfiguration="AuthService.AuthServiceBehavior" name="AuthService.AuthService">
        <endpoint binding="basicHttpBinding" contract="AuthService.IAuthService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="AuthService.AuthServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T21:48:33.333

你的方法不会马上奏效。这是因为 SSL 在负载平衡器处终止，并且应用服务器会看到 http 流量。[您可以在此处](http://support.appharbor.com/kb/getting-started/information-about-our-load-balancer)阅读有关 AppHarbor 负载平衡器的更多信息。

你也许可以[用这个模块来欺骗 WCF](http://nuget.org/packages/Premotion.AspNet.AppHarbor.Integration)。

在这个讨论中也有一些提示：http: [//support.appharbor.com/discussions/problems/829-transportwithmessagecredential-https-ssl](http://support.appharbor.com/discussions/problems/829-transportwithmessagecredential-https-ssl)

# ruby-on-rails - Rails：设计登录用户列表

> ID：12136475
> 
> 赞同：2
> 
> 时间：2012-08-27T05:06:02.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3

有没有办法使用[devise](https://github.com/plataformatec/devise)生成登录用户列表？我从高处和低处找遍了，一个也找不到。关于如何做到这一点的任何想法？

# c# - ASP.NET Web API 下载文本

> ID：12136478
> 
> 赞同：5
> 
> 时间：2012-08-27T05:06:35.560
> 
> 标签：c#, asp.net, rest, asp.net-web-api

我有一个 WebAPI 控制器，需要根据请求下载一些文件，但是当涉及纯文本文件时，它不会给我浏览器的下载请求。它只给我纯文本响应，就像它是 JSON 一样（在我的例子中，它是一个**JSONP WebAPI**）。

我已经从堆栈（和其他网站）检查了其他问答，但我仍然一无所获：

*   [有没有办法强制 ASP.NET Web API 返回纯文本？](https://stackoverflow.com/questions/11581697/is-there-a-way-to-force-asp-net-web-api-to-return-plain-text)

*   [从 ASP.NET Web API 中的控制器返回二进制文件](https://stackoverflow.com/questions/9541351/returning-binary-file-from-controller-in-asp-net-web-api)

*   [ASP .Net Web API 将图像下载为二进制](https://stackoverflow.com/questions/10491845/asp-net-web-api-downloading-images-as-binary)

这是我当前的代码：

```
var httpResponse = new HttpResponseMessage(HttpStatusCode.OK);
httpResponse.Content = new StreamContent(new MemoryStream(Encoding.UTF8.GetBytes(content)));
httpResponse.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream");
httpResponse.Content.Headers.ContentDisposition = new ContentDispositionHeaderValue("attachment");
httpResponse.Content.Headers.ContentDisposition.FileName = "speedcam.txt";
return httpResponse; 
```

这是 Chrome 的回应：

> 缓存控制：无缓存
> 
> 内容处置：附件；文件名=speedcam.txt
> 
> 内容长度：17462
> 
> 内容类型：应用程序/八位字节流
> 
> 日期：2012 年 8 月 27 日星期一 04:53:23 GMT
> 
> 过期：-1
> 
> 杂注：无缓存
> 
> 服务器：Microsoft-IIS/8.0
> 
> X-AspNet-版本：4.0.30319
> 
> X-Powered-By:ASP.NET
> 
> X-SourceFiles:=?UTF-8?B?TTpcVHJhYmFsaG9cTWFwYVJhZGFyXE1hcGFSYWRhci5XZWJBUEk0XEV4cG9ydGE=?

看起来不错，但整个文件文本都在 Chrome 开发工具“响应选项卡”中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:10:21.050

经过大量研究和文本，我发现**AJAX 请求无法下载文件**的困难方式。感谢这两个答案：

[JavaScript/jQuery 通过带有 JSON 数据的 POST 下载文件](https://stackoverflow.com/questions/3499597/javascript-jquery-to-download-file-via-post-with-json-data)

[使用 Jquery、PHP 下载 Ajax 文件](https://stackoverflow.com/questions/3599670/ajax-file-download-using-jquery-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:15:38.477

无论文本内容如何，​​您的代码都会强制文件表现为应用程序；

```
httpResponse.Content.Headers.ContentType = new MediaTypeHeaderValue("application/octet-stream"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T18:05:49.483

检查 web.config / IIS 中的 mime 扩展

# nasm - 短跳超出范围

> ID：12136480
> 
> 赞同：5
> 
> 时间：2012-08-27T05:06:46.987
> 
> 标签：nasm

我的循环有问题，其中包含的代码很长，它给我错误“短跳超出范围”，所以我想知道是否有办法通过不减少数量来使循环工作里面的代码？

示例1：

```
label:
my code
    LOOP label 
```

; 它工作正常，但是当我在其中添加更多代码时

示例2：

```
label:
my code
    more code added
    LOOP label 
```

; 它不起作用并出现错误“短跳超出范围”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T18:56:50.993

`LOOP`指令不能跳转到超过 127 字节的距离。您需要更改代码以使用`DEC ECX`说明`JNZ`。

例如：

```
 MOV ECX, 10
label:
    ;some codes
    LOOP label 
```

变得：

```
 MOV ECX, 10
label:
    ;some codes
    DEC ECX
    JNZ label 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-04T13:30:21.873

你试过`near`指导吗？

# php - .htaccess 身份验证 - 我可以从文件中获取 IP 列表吗？

> ID：12136487
> 
> 赞同：1
> 
> 时间：2012-08-27T05:07:40.647
> 
> 标签：php, .htaccess, authentication

我的服务器上有多个网站，并且在很多网站上都有 .htaccess 身份验证。我已经排除了特定 IP 地址的身份验证，它运行良好。

虽然我希望拥有一个允许 IP 地址的通用文件，我可以在各种 .htaccess 文件中引用它，因此我可以从一个地方管理列表，而不必单独更改所有文件。

这可能吗？如果是这样，我该如何实现？

问候， 普拉蒂克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:36:28.333

您不能将列表保存`Allow from <ip>`在单独的文件中并通过 htaccess 文件访问它。您可以`<Directory>`使用指令在 vhost/server 配置的块内执行此操作`Include`，但不能从 htaccess 执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:45:48.000

您可以使用通用脚本来禁止或允许 IP 地址。这是一个例子。 [http://tips-scripts.com/ip_control](http://tips-scripts.com/ip_control)

# php - 如何在 Opencart 中创建仅产品菜单？

> ID：12136493
> 
> 赞同：0
> 
> 时间：2012-08-27T05:08:10.450
> 
> 标签：php, opencart

我正在构建一个仅以 2 种产品开始的网站，因此类别菜单不合适，我正在尝试创建仅产品菜单。

我使用的是商业主题，它会自动在 header.tpl 中生成一个类别菜单

我需要创建一个产品菜单，但不是一个 php 编码器，它变得很棘手，到目前为止我有：

```
<ul id="topnav">
<?php foreach ($products as $product) { ?>
<li><a href="<?php echo $product['href']; ?>"><?php echo $product['name']; ?></a></li>
<?php } ?>
</ul> 
```

有谁知道我要去哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:35:57.260

Opencart 使用模型-视图-控制器框架 (MVC)，其中控制器与模型对话以检索数据，准备数据，然后将其传递给视图（Opencart 中的 .tpl 文件），然后适当地显示它。

在您的情况下， header.tpl 没有 $products 数组的数据，因为它尚未在 header.php 控制器中准备好。因此，在标头控制器（catalog/controller/header.php）的 index() 函数中，让我们从模型中获取所有数据，按照我们想要的方式进行准备，然后将其传递给视图：

```
$this->load->model('catalog/category');   //
$this->load->model('catalog/product');    //Load our models so the controller can get data
$categories = $this->model_catalog_category->getCategories(0);  //get all top level categories
$all_products = array();
foreach ($categories as $category)  //go through each category and get all the products for each category
{
$category_products = $this->model_catalog_product->getProductsforCategoryId($category['category_id']); //returns product IDs for category
foreach ($category_products as $category_product)
{
    $product_data = $this->model_catalog_product->getProduct($category_product);   //fetch product data for this product then add it to our array of all products
    $all_products[] = array(
        'href'        => $this->url->link('product/product', 'product_id=' . $product_data['product_id']),
        'name'        => $product_data['name']
    );
}
}
$this->data['products'] = $all_products;  //Now pass our product array data to the view, in the view this will be the $products array 
```

这是假设您的所有产品仅属于顶级类别而不属于任何子类别。如果您将来确实创建了顶级类别的子类别，您将需要遍历这些子类别并获取每个子类别的产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T03:53:02.070

感谢 OpenCart 论坛的一位好心成员，我找到了答案。

只需将此代码放在您需要的地方：

```
<?php
    $this->load->model('catalog/product');

    $products_1 = $this->model_catalog_product->getProducts($data = array());                                   
    if ($products_1) {$output = '<ul id="topnav">';}                                               
    foreach ($products_1 as $product_1) {                                                         
       $output .= '<li>';                                                                                                         
       $unrewritten  = $this->url->link('product/product', 'product_id=' . $product_1['product_id']);                        
       $output .= '<a href="'.($unrewritten).'">' . $product_1['model'] . '</a>';                        
    }
    if ($products_1) {$output .= '</ul>';}                                             
    echo $output;                                                          
    ?> 
```

[归功于这里的论坛成员。](http://forum.opencart.com/viewtopic.php?f=21&t=82027&p=337912#p337912)

# java - java中的正则表达式解析字符串

> ID：12136495
> 
> 赞同：4
> 
> 时间：2012-08-27T05:08:20.477
> 
> 标签：java

我有一个字符串。字符串是“New England 12 Philidelphia 24 (Final)”。我需要一个正则表达式，我应该能够从中检索类似的项目。

1.  一线队——新英格兰
2.  一队得分——12
3.  二队——费城
4.  二队得分——24
5.  结果 - 最终或大括号中的任何内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T06:01:08.813

下面是一个[SSCCE](http://sscce.org)，展示了如何使用正则表达式和组来提取您想要的数据。

仅供参考，虽然它仅适用于您提供的输入，但此代码将扫描包含*多个*这样的结果的输入，匹配`while`循环中的所有结果。

```
public static void main( String[] args ) {
    String input = "New England 12 Philidelphia 24 (Final)";
    String regex = "([a-zA-Z ]+)\\s+(\\d+)\\s+([a-zA-Z ]+)\\s+(\\d+)\\s+\\((\\w+)\\)";
    Matcher matcher = Pattern.compile( regex ).matcher( input);
    while (matcher.find( )) {
        String team1 = matcher.group(1);
        String score1 = matcher.group(2);
        String team2 = matcher.group(3);
        String score2 = matcher.group(4);
        String result = matcher.group(5);
        System.out.println( team1 + " scored " + score1 + ", " + team2 + " scored " + score2 + ", which was " + result);
    }
} 
```

输出

```
New England scored 12, Philidelphia scored 24, which was Final 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:13:04.797

用这个：

```
"(\\w+) (\\d+) (\\w+) (\\d+) \((\\w+)\)" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:19:50.013

试试这个

```
^[\D]*\s*\d*\s*[\D]*\s*\d*\s*\([\D]*\)$ 
```

# ruby-on-rails - 仅在生产环境中使用设计更新电子邮件地址失败

> ID：12136496
> 
> 赞同：0
> 
> 时间：2012-08-27T05:08:42.333
> 
> 标签：ruby-on-rails, devise, devise-confirmable

这让我快疯了。我测试了在开发和登台环境中更新用户的电子邮件地址，一切正常。它更新 unconfirmed_email 字段并发送确认电子邮件地址。

但是，只有在生产环境中，它才会失败！

在开发/登台环境中，当用户更新他/她的电子邮件地址时，我会看到以下语句。

```
User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
Profile Load (0.3ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = 2 LIMIT 1
(0.1ms)  BEGIN
User Exists (0.6ms)  SELECT 1 FROM "users" WHERE ("users"."email" = 'aaaa@yahoo.com' AND "users"."id" != 2) LIMIT 1
(0.3ms)  UPDATE "users" SET "unconfirmed_email" = 'aaaa@yahoo.com', "updated_at" = '2012-08-27 04:22:10.470329' WHERE "users"."id" = 2
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'jUcfXqMqDjeEsJ3TEKws' LIMIT 1
(0.3ms)  UPDATE "users" SET "unconfirmed_email" = 'aaaa@yahoo.com', "updated_at" = '2012-08-27 04:22:10.470329', "confirmation_token" = 'jUcfXqMqDjeEsJ3TEKws', "confirmation_sent_at" = '2012-08-27 04:22:10.473264' WHERE "users"."id" = 2 
```

但是，在生产中，我看到以下内容。

```
User Load (6.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 5 LIMIT 1
Profile Load (2.1ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = 5 LIMIT 1
 (1.2ms)  BEGIN
User Exists (1.3ms)  SELECT 1 FROM "users" WHERE ("users"."email" = 'aaaa@yahoo.com' AND "users"."id" != 5) LIMIT 1
 (1.2ms)  ROLLBACK 
```

还有一件奇怪的事情。我可以在 Rails 控制台中手动更新电子邮件地址.....

```
1.9.3p194 :005 > u.update_attributes(:email => "aaaa@yahoo.com")
(1.3ms)  BEGIN
User Exists (1.4ms)  SELECT 1 FROM "users" WHERE ("users"."email" = 'aaaa@yahoo.com' AND "users"."id" != 1) LIMIT 1
(1.4ms)  UPDATE "users" SET "unconfirmed_email" = 'aaaa@yahoo.com', "updated_at" = '2012-08-27 05:05:26.337961' WHERE "users"."id" = 1
User Load (1.4ms)  SELECT "users".* FROM "users" WHERE "users"."confirmation_token" = 'Yyg98zno81adJt4mp7pG' LIMIT 1
(1.4ms)  UPDATE "users" SET "unconfirmed_email" = 'aaaa@yahoo.com', "updated_at" = '2012-08-27 05:05:26.337961', "confirmation_token" = 'Yyg98zno81adJt4mp7pG', "confirmation_sent_at" = '2012-08-27 05:05:26.342299' WHERE "users"."id" = 1
Profile Load (1.4ms)  SELECT "profiles".* FROM "profiles" WHERE "profiles"."user_id" = 1 LIMIT 1
(1.7ms)  COMMIT
=> true 
```

任何帮助将非常感激！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:24:22.277

我试图弄清楚这两种环境之间的区别 - 开发/登台与生产。由于登台和生产具有几乎相同的设置，我唯一能想到的就是缓存。因此，我将 update_attributes 行更改为以下内容，并且它起作用了。

```
 if @user.reload.update_attributes(:email => params[:email]) 
```

# c# - 视频帧像素修改

> ID：12136498
> 
> 赞同：0
> 
> 时间：2012-08-27T05:08:51.727
> 
> 标签：c#, video

我想对视频中的每一帧进行各种修改，例如将前 100 像素宽中的每个像素都设为黑色以适应帧的长度。

这实际上只是为了一点乐趣，即用公司员工的“故事”来欺骗一些新闻阅读器的背景图片。

我只是简要地研究了 FFMPeg，但我想知道考虑到项目的性质是否有更直接的方法（我不想在上面浪费太多时间）。

我实际上只是想覆盖 x 帧数的屏幕补丁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:23:18.123

看看这个。[http://directshownet.sourceforge.net/](http://directshownet.sourceforge.net/)

应该有一个样本，他们在视频上画了一只蜘蛛

# asp.net-mvc - 如何将表单值转换为 json 格式

> ID：12136502
> 
> 赞同：1
> 
> 时间：2012-08-27T05:09:46.673
> 
> 标签：asp.net-mvc, json, visual-studio-2010

我正在使用表格。在我的数据库中，数据存储在`form{type:"input",name:"name",Label:"Login"}`我使用 ajax 函数来获取这些值。

我想将其转换为`json`对象格式，如何转换为 json 对象格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:29:20.027

如果您要问，如何使用 Json 对象格式中的 ajax 函数从操作中获取价值，下面是示例代码。

在这里，我正在对“GetData”操作进行 ajax 调用。

```
var url = '@Url.Action("GetData")';
$.ajax({
url: url,
type: 'GET',
cache: false,
data: { value: strId},

success: function (result) {
 // do what you want with result returned here in JSON format
}
}); 
```

**更新：**在上述成功方法中，您可以将 JSON 值读取为`result.type`,`result.name`和`result.Label`.

这是返回 JSON 数据的动作

```
public ActionResult GetData(string id)
{
return Json(new {type="type", name="name", Label="Login"});
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:50:12.300

*根据OP的评论，*

> 是否可以在控制器中创建 json 对象，如果可能，如何创建它？

您可以尝试 JSON.NET 在 MVC 应用程序中轻松创建 JSON 对象。

例如。你可以在 JSON.NET 中做这样的事情，

```
dynamic jsonObj = new JObject();
jsonObj.Name = "Mark";
jsonObj.Age = 29;

var jsonString = jsonObj.ToString(); // { "Name" : "Mark", "Age" : 29 } 
```

您还可以通过解析字符串来创建 json 对象，

```
 dynamic jsonObj = JObject.Parse(jsonString); 
```

[您可以从这里](http://james.newtonking.com/projects/json-net.aspx)下载 JSON.NET 。

# asp.net - 如何在 Windows 身份验证中使用 ASP.Net 和 C# 在两个网站中使用相同的会话

> ID：12136503
> 
> 赞同：0
> 
> 时间：2012-08-27T05:09:48.777
> 
> 标签：asp.net

我有两个网站，我为这两个网站使用相同的会话对象。

我怎样才能在两个网站上实现相同的会话。

问候，普拉萨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:18:02.530

你不能。这些站点是分开的，因此会话数据是分开的。

如果您能够从远程（即使它们是本地托管的）站点访问 Session 数据，这将是一个很大的安全问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:20:10.780

您要实现的基本上是 SSO（单点登录），其中用户登录到一个站点，而不需要登录到其他姊妹网站。

要么搜索 SSO 并获取有关其实施的详细信息，要么在您的两个网站中，使用启用会话来创建 Web 服务。

当需要查看一个网站的session["Login"]时，调用其他网站的webservice的web方法获取信息，反之亦然。

# jquery - 如何让 Twitter Bootstrap 与prototype.js 一起工作？

> ID：12136505
> 
> 赞同：5
> 
> 时间：2012-08-27T05:09:51.850
> 
> 标签：jquery, twitter-bootstrap, prototypejs

看看这段代码[http://jsfiddle.net/u6N6T/3/](http://jsfiddle.net/u6N6T/3/)。手风琴工作正常。

但是在加载prototype.js时它被破坏了，请参见[http://jsfiddle.net/jWZBD/8/](http://jsfiddle.net/jWZBD/8/)。

我按照[http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)使 JQuery 与原型一起工作，但即使我将 bootstrap.js 包装在“jQuery(document).ready(function($ ) {});"。

有没有人知道在加载原型时让 Bootstrap 工作的方法？或者我必须将所有现有的基于原型的 javascripts 转换为 JQuery？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T00:02:21.890

有同样的问题。我无法修复它，但我找到了解决方法。

首先，`$.noConflict()`按照 ShaunOREilly 所说的使用和操作，并将`$`Bootstrap.js 中的所有字符替换为`jQuery`. 但请注意，引导程序有很多以 $ 开头的变量 - 这些不是对 jQuery 的引用，而是变量名的一部分。您无需更改它们。我发现搜索和替换 、 和 $) 的实例`$.`可以`$(`解决问题。

接下来，不要加载 bootstrap-transition 插件。如果您在一个脚本中加载完整的库，请进入并删除转换功能（它位于 bootstrap.js v2.3.0 的顶部）。您将失去过渡动画，但折叠结构仍然有效。有关示例，请参[见此小提琴。](http://jsfiddle.net/ymbsr/6/)

这将修复用户交互的切换行为，但自动切换仍然会被破坏 - 例如在页面调整大小时显示/隐藏导航菜单。要解决这些问题，只需实现您自己的事件侦听器并直接调用您需要的任何引导函数。请参阅[api](http://twitter.github.com/bootstrap/javascript.html)以供参考。

例如，为了解决页面调整大小时导航栏的问题，我使用了以下代码：

```
window.onresize = function(event) {
   var nav = jQuery(".collapse");
   if (jQuery(window).width() > 940) nav.collapse('show');
   else nav.collapse('hide');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-20T12:28:42.077

对于那些使用 PrototypeJS 的开发者，Bootstrap 需要使用 jQuery。如果您不想加载另一个库只是为了处理 Bootstrap 交互，请使用此 Bootstrap 分支：[https ://github.com/jwestbrook/bootstrap-prototype](https://github.com/jwestbrook/bootstrap-prototype)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T07:56:02.290

这并不理想，但您可以编写 CSS3 手风琴并绕过所有 jQuery 混乱......在这里看到了一个：[Accordion with CSS3](http://tympanus.net/codrops/2012/02/21/accordion-with-css3/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:25:11.110

两种选择：

将 twitter js 文件中的所有内容替换为自定义文件，并将所有 $ 字符替换为单词“jQuery”

如果这是唯一的问题，您可以编写自己的手风琴式切换功能。

另一种选择是将原型的东西转换为 jQuery。当我可以使用 jQuery 时，我个人讨厌使用 Prototype。

这是另一个类似问题的例子： [jQuery & Prototype Conflict](https://stackoverflow.com/questions/134572/jquery-prototype-conflict)

或者可以在这里找到一个可能的解决方案： [http ://www.dynamicdrive.com/forums/showthread.php?29309-Content-Glider-and-Lighbox-Conflict](http://www.dynamicdrive.com/forums/showthread.php?29309-Content-Glider-and-Lighbox-Conflict)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T15:59:51.667

我知道这是一个老问题，但我尝试了所有在那里发现的建议都无济于事。对我有用的是稍微改变原型库来过滤某些 Bootstrap 事件，比如这里 -

[https://github.com/zikula/core/commit/079df47e7c1f536a0d9eea2993ae19768e1f0554](https://github.com/zikula/core/commit/079df47e7c1f536a0d9eea2993ae19768e1f0554)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-20T08:31:25.900

[这篇文章](http://www.softec.lu/site/DevelopersCorner/BootstrapPrototypeConflict)让我对使用 Prototype 的 Bootstrap 的潜在问题有了一些了解。那里给出的解决方法实际上运作良好。我稍微调整了第一个并添加了一个检查是否实际加载了 Prototype 并将其组合在 jQueryNoConflict() 中作为标准 jQuery.noConflict() 的替代：

```
function jQueryNoConflict()
{
    jQuery.noConflict();

    if (typeof Prototype !== "undefined" && Prototype.BrowserFeatures.ElementExtensions)
    {
        var disablePrototypeJS = function (method, pluginsToDisable)
        {
            var handler = function (event)
            {
                event.target[method] = undefined;
                setTimeout(function ()
                {
                    delete event.target[method];
                }, 0);
            };

            pluginsToDisable.each(function (plugin)
            {
                jQuery(window).on(method + '.bs.' + plugin, handler);
            });
        },

        pluginsToDisable = ['collapse', 'dropdown', 'modal', 'tooltip', 'popover', 'tab'];
        disablePrototypeJS('show', pluginsToDisable);
        disablePrototypeJS('hide', pluginsToDisable);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-20T04:56:55.860

如果您使用的是 bootstrap.js，请替换：

```
this.$element.trigger(startEvent); 
```

和：

```
this.$element.triggerHandler(startEvent); 
```

它会顺利工作

# hierarchy - Buddypress 插件组层次结构

> ID：12136508
> 
> 赞同：1
> 
> 时间：2012-08-27T05:10:23.473
> 
> 标签：hierarchy, buddypress

Buddypress 有一个组功能，我在其中结合了插件 BP Group Hierarchy，以便我可以根据用户角色创建组层次结构。

但是，该插件使用了 Buddpress 在 group-extension-api> 链接中教授的方法。

使用函数 bp_register_group_extension 注册组步骤，并调用 add_action。我试图通过没有成功删除该操作。因为我不太了解数组是如何工作的，即数组（&$extension，\'_register\'），所以我去搜索并找到了这篇[文章](http://funcdoc.wordpress.com/2008/01/13/writing-plugins-what-is-the-class-callback-format/)。

有一条线说

> 上述对象引用的方法回调的新格式始终是：类名，后跟方法名，然后是之前添加的数量（类名+方法名）。对于类，这允许您添加尽可能多的对象引用类并添加不会相互覆盖的方法。

但是我似乎无法删除该操作。

我试图通过在 function.php 中添加以下代码行来删除该操作

> 功能 remove_bp_hierarchy(){
> 
> > 如果（has_action（'bp_actions'））{
> > 
> > > 回声 $extension = 新的 BP_Groups_Hierarchy_Extension；
> > > 
> > > remove_action('bp_actions', array( &$extension, '_register'), 999);
> > 
> > } 别的 {
> > 
> > }
> > 
> > add_action('bp_init','remove_bp_hierarchy', 999);

我的 remove_action 有问题还是我使用了错误的方法？谢谢并恭祝安康。

＃＃ 更新

找到一个[页面](http://www.wprecipes.com/list-all-hooked-wordpress-functions)，在该页面中，我们可以看到钩子列表以及页面中的钩子函数。我看到有一个名为 _register 的函数，这是我正在寻找的函数。但是，班级地址总是在变化。我正在考虑使用找到的函数对其进行 preg_match 并在找到时将其删除。这是超重的。那么有没有其他方法可以去除呢？谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:12:54.620

CodingBabyDotCom -

长话短说：你将不得不遍历`$wp_filter`数组来删除动作。

您需要对用于创建操作的 SAME 实例的引用，以便使用该`remove_action`函数将其删除。因此，您发布的功能不起作用，因为它使用的是新实例。

不幸的是`bp_register_group_extension()`，它只创建了一个临时实例，因此以后的函数不能引用它。

您评论中的代码将删除级别 8 的所有操作，这意味着所有组扩展。要仅删除您想要的，请遍历每个过滤器并检查其类型：

`is_a( $wp_filter['bp_actions'][8][$key], 'BP_Groups_Hierarchy_Extension' )`

# c# - 如何将 SQL 表中特定列的值作为 GridView 的标题

> ID：12136510
> 
> 赞同：0
> 
> 时间：2012-08-27T05:11:22.847
> 
> 标签：c#, asp.net

![在此处输入图像描述](../Images/1a92ef8af93d8cd579c4af98cc5df374.png)

如图所示，我有 SQL 数据库表。我希望**Location_Instance**列（即图像中的第二列）的值显示为`GridView`. 现在我正在将列复制到 a`ListBox`并使用`ListBox`要显示为标题。但我想直接从数据源显示。任何人都可以帮我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:21:30.033

一种方法是编写一些额外的代码来创建一个新的 DataTable，其中列设置您想要的方式，然后从数据库中的数据插入您想要的行。

在 SQL 中执行此操作很困难。

有关如何执行此操作，请参阅[http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx ...](http://msdn.microsoft.com/en-us/library/hfx3s9wd.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:13:49.363

您不能直接将列的值设置为网格视图中的标题，首先您必须将其保存在某个位置，例如 ViewState 或任何控件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:20:50.893

编写选择查询并获取数据

喜欢

```
Select * from Tbl where 'Condition' 
```

将数据填充到数据表中（例如：dt）。然后直接绑定数据到gridview。喜欢

Gridview.Datasource = dt; Gridview.Databind();

然后直接显示标题。

如果要显示`Location_Type`为，`Location Type`则必须像这样编写 SQL 查询

```
Select Location_Type as [Location Type] .... from Tbl where 'Condition' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:21:24.930

逻辑上这是不可能的。因为在这种情况下，您希望在多列的单行中显示多行数据。所以如果你的位置实例增加你会怎么做？

但是，如果 location_instance 的数量是固定的，则可以解决。但这也是有限的。您可以将位置实例显示为网格视图行，而不是列。您可以设置该行的样式，使其看起来像标题。

要了解如何将列数据转换为行数据，请查看以下链接。 [http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

因此，一旦您连续获取数据，您就可以使用网格视图轻松地将数据绑定到`RowDataBound`网格视图。

# android - 待处理的意图在服务创建的通知中不起作用

> ID：12136519
> 
> 赞同：3
> 
> 时间：2012-08-27T05:12:49.883
> 
> 标签：android, service, notifications, android-pendingintent

我有两个活动 A 和 B。A 在应用程序启动时启动。我有一项从 A 启动的服务。

这是我在活动 A 中的代码。

```
Button btnStart = (Button) findViewById(R.id.button1);
    btnStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startService(new Intent(getBaseContext(), Service_class.class));

        }
    }); 
```

这是我的服务中的 onStartCommand 方法。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    createNotification();
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
} 
```

这是 createNotification 方法

```
private void createNotification() {

    NotificationManager nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    Intent nintent = new Intent();
    nintent.setClass(this, TestActivity.class);
    PendingIntent pin = PendingIntent.getActivity(getApplicationContext(),
            0, nintent, 0);
    String title = "KR Darsan";
    String body = "This is a notification from darsh";
    Notification n = new Notification(R.drawable.ic_launcher, body,
            System.currentTimeMillis());
    n.contentIntent = pin;
    n.setLatestEventInfo(getApplicationContext(), title, body, pin);

    n.defaults = Notification.DEFAULT_ALL;
    nm.notify(unique_id, n);

} 
```

我正在挂起的意图中设置活动 B (TestActivity)。通知会根据需要显示，但是当我单击通知时，活动不会启动。

我在清单中声明了服务。

```
<service android:name=".Service_class" /> 
```

还有什么我应该在清单中声明的​​吗？可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T05:30:38.083

你申报`TestActivity.class`了`AndroidManifest.xml`吗？

# android - 如何在长按列表项时显示按钮

> ID：12136520
> 
> 赞同：3
> 
> 时间：2012-08-27T05:12:54.377
> 
> 标签：android, listview, button, long-press

我需要在长按列表项时显示删除按钮..

我有长按的代码..但不知道如何编写代码以在此长按内显示按钮...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T04:22:40.500

终于得到答案了...

**.xml 文件**

```
<ImageButton
        android:id="@+id/imgdelete"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/delete" 
        android:visibility="invisible"/> 
```

**.java 文件**

```
 lv.setOnItemLongClickListener(new OnItemLongClickListener() {

        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

            arg1.findViewById(R.id.imgdelete).setVisibility(View.VISIBLE);
            return false;
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T05:15:51.610

首先，您必须使用代码使删除按钮不可见，或者在 xml 文件中设置它的属性。当用户单击时，`longpress`您必须使该删除按钮可见。删除操作完成后，再次使该按钮不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:22:12.063

您可以使用警报对话框。这是一个例子

```
listView.setOnItemLongClickListener(new OnItemLongClickListener() {

            public boolean onItemLongClick(AdapterView<?> parent, View view,
                    int position, long id) {
                final CharSequence[] items = { "Delete Item" };

                AlertDialog.Builder builder = new AlertDialog.Builder(
                        [CLASS_NAME].this);
                builder.setTitle("Delete Item");
                builder.setItems(items, new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int item) {
                        Intent i;
                        switch (item) {
                        case 0:
                            AlertDialog.Builder builder = new AlertDialog.Builder(
                                    SelectProfile.this);
                            builder.setMessage(
                                    "Are you sure you want to delete?")
                                    .setCancelable(false)
                                    // Prevents user to use "back button"
                                    .setPositiveButton(
                                            "Delete",
                                            new DialogInterface.OnClickListener() {
                                                public void onClick(
                                                        DialogInterface dialog,
                                                        int id) {
                                                    //Todo code here
                                                }
                                            })
                                    .setNegativeButton(
                                            "Cancel",
                                            new DialogInterface.OnClickListener() {
                                                public void onClick(
                                                        DialogInterface dialog,
                                                        int id) {
                                                    dialog.cancel();
                                                }
                                            });
                            builder.show();
                            break;
                        }
                    }
                });
                AlertDialog alert = builder.create();
                alert.show();
                return false;
            }
        }); 
```

# android - 非存根 Android Google 地图 jar 文件

> ID：12136526
> 
> 赞同：0
> 
> 时间：2012-08-27T05:13:57.263
> 
> 标签：android, google-maps

在 android-sdk 目录中找到的 Google maps.jar 仅包含存根。如果我们检查每个类中方法的字节码，它们都会抛出运行时存根异常。是否可以获得非存根版本的 maps.jar？我正在使用它来自动验证 android 应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:36:33.413

您必须从设备中获取它。它将出现在`/system/framework/com.google.android.maps.jar`。我不确定您是否可以在模拟器上使用它。

# iphone - 每 24 小时我需要启用 UIButton，

> ID：12136528
> 
> 赞同：-2
> 
> 时间：2012-08-27T05:14:16.453
> 
> 标签：iphone, xcode

请帮我摆脱这些家伙。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:21:12.590

很简单，将**NSTimer**放置 24 小时。一旦定时器触发，请**打开**该按钮。给你的时间间隔。

```
[NSTimer 
                             scheduledTimerWithTimeInterval:300 
                             target:self 
                             selector:@selector(timerFireMethod:) 
                             userInfo:nil 
                             repeats:YES]; 
```

火法：-

```
 - (void) timerFireMethod:(NSTimer *) theTimer { //Write Your Code Here } 
```

# delphi - 为什么我有时会在下载后得到最后填充零的文件？

> ID：12136529
> 
> 赞同：0
> 
> 时间：2012-08-27T05:14:23.220
> 
> 标签：delphi, delphi-xe, indy

我正在使用`Indy`和开发下载管理器`Delphi XE`（应用程序使用`Multithreading`尝试与服务器建立多个连接）。一切正常，但有时最终下载的文件已损坏，当我检查下载的临时文件时，我发现其中 2 或 3 个在其末尾填充了零。（每个临时文件是每个连接的下载结果）。文件越大，我得到的临时文件越多。例如，在其中一个 65,536,000 字节的临时文件中，只有 0-34,359,426 的范围是有效的，而从 34,359,427 到 64,535,999 它全是零。如果我删除这些零，应用程序将自动下载丢失的段，我得到的结果是健康的下载文件，如果问题不再发生的话。我想摆脱临时文件末尾的那些零，而不会降低下载速度。

PS我正在使用`TFileStream`，我将它直接发送到并使用方法`TIdHTTP`下载文件。`GET`附加信息：我处理`OnWork`分配`AWorkCount`给公共`int64`变量的事件。每次下载文件时，下载的文件大小（该`Int64`变量）都会记录到一个文本文件中，并且从日志中可以看出该文件已完全下载（即使是那些零字节）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T23:44:26.037

在请求下载范围之前，请确保服务器确实支持下载字节范围。如果服务器不支持范围，则服务器将忽略请求的范围，而是发送整个文件。如果您还没有这样做，您应该`TIdHTTP.Head()`在调用之前使用 to 文本获取范围支持`TIdHTTP.Get()`。无论如何，您还需要执行此操作以检测远程文件自上次下载后是否已更改。任何体面的下载管理器都需要能够处理这样的事情。

还要记住，如果`TIdHTTP`事先知道要传输多少字节，它将在将`TStream`数据下载到其中之前预先分配目标的大小。这是为了在使用`TFileStream`. 因此，即使它们正在写入文件的不同区域，您也不应该用于访问与多个同时下载的目标相同的**文件**。`TFileStream`预先分配多个`TFileStream`对象可能会相互践踏，试图将文件大小设置为不同的位置。如果您需要同时下载多个文件，则可以：

1) 将每个部分下载到一个单独的文件中，并在获得所需的所有部分后根据需要将它们复制到最终文件中。

2) 使用自定义`TStream`类，或 Indy 的`TIdEventStream`类，自己管理文件 I/O，这样您就可以忽略`TIdHTTP`的预分配尝试，并确保多个文件 I/O 操作不会错误地相互重叠。

# python - 通过 UDP Python 流式传输音乐

> ID：12136533
> 
> 赞同：0
> 
> 时间：2012-08-27T05:15:23.170
> 
> 标签：python, tcp, udp, mp3

我正在尝试创建一个通过 UDP 连接流式传输音乐（MP3 文件）的程序。到目前为止，我已经创建了一个程序，可以发送整个 MP3 文件并将其写入客户端计算机上的文件。然后客户端使用`pygame.mixer`.

这显然不是流媒体。我一生都无法弄清楚如何将音乐流式传输到客户端。

如果有人能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:14:26.873

使用 udp 进行实时流式传输意味着类似于 rtsp 流式传输。如果您想这样做，请查看 live555。其中有一个可用的服务器 [live555mediaServer 或类似名称]，您可以将其用于 rtsp 流。

Gstreamer 还可以让您只使用纯 rtp 进行基本流。类似以下管道的东西可以让你做到这一点。

```
 gst-launch filesrc location=<yourfile> ! mp3parse ! rtpmpapay <someoptions> ! udpsink port=<someport> 
```

你可以接收它并对其进行去抖动，然后对其进行解码，然后解码并播放它

```
 gst-launch udpsrc port<the-some-port in the sender> ! gstrtpjitterbuffer ! rtpmpapay ! decodebin2 ! queue ! autoaudiosink 
```

或者您可以使用 ffserver 进行流式传输。用谷歌搜索了解 rtp/rtsp 会帮助你理解这些东西。已经有很多服务器可用于发送数据。[达尔文，Live555]

还有其他形式的流媒体 [rtmp 需要 flv 文件] 以及流畅的流媒体和 HLS。RTSP 是真正的实时流媒体协议。

# blackberry - 检测某些 unicode 字符是否会正确呈现

> ID：12136536
> 
> 赞同：0
> 
> 时间：2012-08-27T05:16:19.707
> 
> 标签：blackberry, unicode

我正在开发一个显示马拉雅拉姆语字符的黑莓应用程序。但有些设备不支持这些字符。例如，我正在测试的 9550 显示矩形而不是正确的字符。我如何知道设备是否支持马拉雅拉姆语字符渲染？

# php - cakephp 托管“Cake 无法连接到数据库。”

> ID：12136540
> 
> 赞同：-1
> 
> 时间：2012-08-27T05:17:31.893
> 
> 标签：php, mysql, cakephp, shared-hosting

初学者级别的东西--我最近在 000webhost.com 上托管了我的 cakephp 项目-它显示了蛋糕主页-但同时显示

Cake 无法连接到数据库。

找不到数据源类 a2952772。

-我已经尝试过多次编辑 root/app/config/database.php。-我在 000webhost.com 上创建了 mysql 数据库

我想 $datasource 有一些问题

```
public $default = array(
        'datasource' => '????',
        'persistent' => false,
        'host' => 'mysql11.000webhost.com',
        'login' => '*****',
        'password' => '*****',
        'database' => 'db1',
        'prefix' => '',
        //'encoding' => 'utf8',
    ); 
```

如果有人在 000webhost.com 上托管和配置了数据库，请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:25:58.817

您需要指定一个有效的数据源，例如`'Database/Mysql'`. 还要检查[CakePHP 数据库配置部分](http://book.cakephp.org/2.0/en/getting-started.html#cake-database-configuration)。

# mysql - Foxpro 和 MYSQL 应用程序中的事务

> ID：12136541
> 
> 赞同：0
> 
> 时间：2012-08-27T05:17:46.133
> 
> 标签：mysql, foxpro

参考此链接[http://msdn.microsoft.com/en-us/library/ms947432.aspx](http://msdn.microsoft.com/en-us/library/ms947432.aspx)

我假设的示例代码可以工作，因为它发布在 Microsoft 的网站上。

```
&& Start a VFP transaction and a transaction on the server.
Begin Transaction  && FoxPro Start Trans Command

=SQLExec(nConnection, 'BEGIN TRANSACTION')  && SQL Start Trans Commnad

&& Update changes to MyTable.    
lEverythingOK = TableUpdate( 2, .F., 'rv_MyView' )

If lEverythingOK
 && Update changes to MyOtherTable.
 lEverythingOK = tableupdate( 2,.F.,'rv_MyOtherView')
EndIf

&& End the transaction on the server and VFP.

If lEverythingOK
 =SQLExec(nConnection, 'COMMIT')   && SQL COMMIT COMMAND
 End Transaction                   && Foxpro COMMIT COMMAND 
Else
 =SQLExec( nConnection, 'ROLLBACK' )  && SQL ROLLBACK COMMAND
 RollBack                             && FoxPro ROLLBACK COMMAND
EndIf 
```

此示例基于 MS SQL 和 Foxpro 使用 Remote View。我想使用 MYSQL 和 Foxpro 使用 Remote View 重新创建它。问题是如果我发出命令 TableUpdate，即使我还没有发出 =SQLExec(nConnection, 'COMMIT') 命令，记录也会被提交到 MYSQL 服务器。我正在使用 INNODB 引擎。请注意，如果我省略 TableUpdate 命令，我可以从 MYSQL 提交或回滚我的事务。我希望不要删除命令 TableUpdate 以捕获记录中的错误，以便在将其提交到 MYSQL 服务器之前不必检查记录的错误记录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:54:32.867

尝试使用自动提交：

> 设置自动提交=0

从 MySQl 文档：

通过将 autocommit 变量设置为零来禁用自动提交模式后，对事务安全表（例如 InnoDB、BDB 或 NDBCLUSTER 的那些）的更改不会立即永久化。您必须使用 COMMIT 将更改存储到磁盘或 ROLLBACK 以忽略更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T22:25:47.457

您的示例没有对 FoxPro 数据进行任何更改，因此不需要本地事务处理。如果您添加它不是因为您在同一事务中进行本地数据更新，而是因为您认为它“可能有帮助”，请将其删除。那可能会解决问题。

如果您在同一事务中进行本地更改，无论如何您都想重新考虑该设计，因为您应该在远程查询完成后进行本地更改。

如果这不能解决问题，那么您的问题是“记录”被提交，但是您正在更新示例中的两个远程视图 - 代码是否只适用于一个？如果没有，两者都更新了吗？如果你回滚第一个会发生什么？如果您使用的是表格而不是视图怎么办？更改可以根本不回滚吗？

如果你能想出一个最小的可重复样本，那么你得到答案（甚至是解决方案）的机会就会高得多。

# installation - 组件页面离开功能：总是说一个组件被选中

> ID：12136543
> 
> 赞同：0
> 
> 时间：2012-08-27T05:17:56.557
> 
> 标签：installation, nsis

在我的 MUI 组件页面上，当用户试图离开该页面时，我会调用一个函数。在该函数中，我试图查看至少检查了 1 个组件。如果没有，那么我会显示一个 MessageBox 并中止（停止继续到下一页）。

**我的问题：**我的函数总是说即使没有检查组件。我究竟做错了什么？

出于某种原因，程序总是认为第一个组件被检查/选择，而不是？

```
!include nsdialogs.nsh
!include MUI2.nsh

!define MUI_PAGE_CUSTOMFUNCTION_SHOW  compshow
!define MUI_PAGE_CUSTOMFUNCTION_LEAVE compleave

!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_LANGUAGE "English"

OutFile "test.exe"

Function compshow

FunctionEnd

Function compleave

    !insertmacro SectionFlagIsSet ${section1} ${SF_SELECTED} +1 +2
    MessageBox MB_OK "Component Selected"
    MessageBox MB_OK "Component NOT Selected"

FunctionEnd

Section "Dummy1"

SectionEnd

Section "Dummy2"

SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:55:08.940

你的问题是相对跳跃。您应该使用一些标签，因为宏可能包含许多命令，而不仅仅是一个。

另外，认为执行将在第一次跳转后继续。不要忘记跳过测试的另一个分支。

修改后的`compleave`回调按您的预期工作：

```
Function compleave

    !insertmacro SectionFlagIsSet ${section1} ${SF_SELECTED} selected not_selected
    selected:
    MessageBox MB_OK "Component Selected"
    goto end
    not_selected:
    MessageBox MB_OK "Component NOT Selected"
    end:

FunctionEnd 
```

# java - 在构造函数中访问实例成员

> ID：12136544
> 
> 赞同：4
> 
> 时间：2012-08-27T05:17:56.970
> 
> 标签：java, constructor, instance-variables, super

我在一本书中读到，只有在超级构造函数运行后才能访问实例成员。

我偶然发现了以下代码：

```
class Parent {

    Parent() {
        printIt();
    }

    void printIt() {
        System.out.println("I'm in a overridden method. Great.");
    }
}

class Child extends Parent {

    int i = 100;

    public static void main(String[] args) {
        Parent p = new Child();
        p.printIt();
    }

    void printIt() {
        System.out.print(i + " ");
    }
} 
```

它打印：

0 100

我的问题是：

如果实例成员只有在超级构造函数运行后才能访问，那为什么在执行Parent类的printIt()方法时（实际上是Child的printIt()，由于多态性），它能够访问未初始化的Child 的实例变量 i 即使 Parent 的构造函数尚未完成执行？

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T05:23:52.057

> 我在一本书中读到，只有在超级构造函数运行后才能访问实例成员。

你的书是错的（如果它真的这么说的话）。一旦施工开始，它们就可以随时访问。但是，直到超级构造函数运行之后，它们才会被*初始化。*因此，您打印的是默认值：null、零或 false。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T05:20:20.810

> 即使 Parent 的构造函数尚未完成执行，它也能够访问 Child 的未初始化实例变量 i？

您可以访问它，但在它被初始化之前（这不是您通常想要的）。

变量的“空格”已经到位（毕竟您确实有一个实例），但是将其初始化为其正确起始值的代码尚未运行。所以它将全部为 null、false 和 0。

因此，类中的一个方法（“printIt”）在对象生命周期的一个尴尬点被调用（在初始化程序运行之前，在“半完成”实例上）。这就是您阅读的警告想要说的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T05:28:03.603

我认为你的例子误导了你。事实上，超级构造函数之前运行过，你可以通过下面的修改示例看到这一点。另外澄清一下，成员值是可访问的，但它们可能尚未初始化。

```
class Parent {

    int i = 0;

    Parent() {
        i = 1;
        printIt();
    }

    void printIt() {
        System.out.println("I'm in a overridden method. Great. i = " + i);
    }
}

class Child extends Parent {
    public static void main(String[] args) {
        Parent p = new Child();
        p.printIt();
    }

    void printIt() {
        System.out.print(i + " ");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:27:55.203

覆盖发生在您的代码中。在运行时考虑对象。因此，调用了 Child 的 printIt()。此时，“i”的值未知，但默认值为“0”，因为它是一个实例变量。完成后，调用 p.printIt()，调用 Child 的 printIt()，此时读取 int i=100 并打印 100。

因此输出应该并且将是**0 100**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-29T03:17:51.937

首次创建对象时，对象中的字段被初始化为默认值 null 或 0，然后您的构造函数实际运行，第一步调用超级构造函数。

可悲的是，您**无法**通过将构造函数编写为来解决此问题

```
Child() {
  i=100;
  super();
} 
```

如果无法做到这一点，就无法在 childs`i`字段用于父构造函数的覆盖方法调用之前设置它。

不过，值得了解一些解决此问题的方法：

一种方法是隐藏`i`在一个抽象的 getter 后面，并提供一个静态工厂函数来创建新的实例覆盖`getI`。

```
public class Child extends Parent {

   protected abstract getI();

   @Override void printIt() {
     System.out.print("i = " + i);
   }

   static Child create(final int i) {
      return new Child() {
         int getI() { return i; }
      }
   }
}

Child child = Child.create(100); 
```

另一种方法是`printIt`从父/子层次结构中分离出来。然后您可以在调用 Parent 构造函数之前创建打印机。（通常这种技巧可以用来彻底清除 Child ，只剩下 Parent 类和组件 -*即*您最终使用组合而不是继承。）

```
class Parent {
   public interface Printer {
     void printIt();
   }

   public class DefaultPrinter extends Printer {
     @Override void printIt() { 
       System.out.println("Default Printer...");
     }
   }

   Parent() {
     this(new DefaultPrinter());
   }

   Parent(Printer p ) {
     this.printer = p;
     printIt();
   }

   void printIt() {
     p.printIt();
   }
}

public class Child extends Parent {
   public class ChildPrinter implements Parent.Printer {
     final int i = 100;
     @Override void printIt() {
       System.out.println("i = "+i);
     }
   }

   Child() {
     super( new Printer() );
   }
} 
```

# sql - SQL Server 2008 中的 ISNULL 函数无法正常工作

> ID：12136546
> 
> 赞同：4
> 
> 时间：2012-08-27T05:18:05.673
> 
> 标签：sql, sql-server, sql-server-2008, tsql

假设这个脚本：

```
DECLARE @result TABLE(Id BIGINT);

DELETE FROM [Products].[Product]
OUTPUT DELETED.[Id] INTO @result
WHERE [Products].[Product].[Id] = 1589; 
```

所以继续我尝试：

**1**

```
SELECT CAST(ISNULL([Id], -1) AS BIGINT) AS N'RetValId' FROM @result; 
```

什么时候`[Id]`null返回null（什么都没有），但是这个返回-1：

**2**

```
DECLARE @mi BIGINT;
SET @mi = (SELECT [Id] FROM @result)
SELECT CAST(ISNULL(@mi, -1) AS BIGINT) AS N'RetValId' 
```

为什么？第一个脚本的问题在哪里？

**更新**

那么有没有办法检查 Deleted Id 是否为 null 返回 -1 如果没有返回 Id 而没有声明另一个变量？最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T05:25:58.783

如果您没有 ID 1589 的条目，则在 DELETED 表中将没有记录，如果有，则应返回 1589。

因此，如果您没有，我认为它不会返回任何内容，因为此语句没有输入行：

```
SELECT CAST(ISNULL([Id], -1) AS BIGINT) AS N'RetValId' FROM @result; 
```

（如果你 SELECT * from @result 它应该没有行）

第二个返回 -1 因为您首先将变量设置为在选择后获取 NULL 值的变量。

```
DECLARE @mi BIGINT;
SET @mi = (SELECT [Id] FROM @result) 
```

（如果你在这之后只选择@mi，那么它应该是NULL）

我认为这就是解释

更新：

愿您可以尝试一个小技巧来实现它而无需其他变量：

```
SELECT CAST(ISNULL(MAX([ID]),-1) AS BIGINT) AS N'RetValId' FROM @result; 
```

由于 MAX 的 insie 语句将为 NULL，所以这里是诀窍。如果某些内容被删除，那么 ID 将在那里。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:48:40.007

您可以使用派生表，该表将返回一行，`-1`然后执行`outer apply`on `@result`。

```
select isnull(R.Id, T.Id) RetValId
from (values(-1)) as T(Id)
  outer apply @result as R 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:46:13.237

`null`如果没有删除的行是`@@rowcount`变量，则返回的一种简单方法。它包含受上一个操作影响的行数：

```
DELETE FROM [Products].[Product]
WHERE [Products].[Product].[Id] = 1589;

IF @@ROWCOUNT = 0
    return null
return 1589 
```

# android - 为什么我的数组总是为每个变量呈现相同的数字？

> ID：12136547
> 
> 赞同：1
> 
> 时间：2012-08-27T05:18:10.250
> 
> 标签：android, arrays, for-loop, iterator, libgdx

我有一个 for 循环，当它们出现时，它会遍历一个矩形数组。对于添加到数组中的每个新矩形，都会在其顶部绘制一个精灵。我希望在矩形顶部绘制的每个精灵都有自己的变量来改变精灵的绘制。虽然在屏幕上，大多数情况下每个矩形都应该绘制不同的精灵 ------------------------------------------------ - 我不知道如何给每个精灵自己的变量而不给所有其他精灵相同的变量。此代码最终在每个矩形上绘制新的相同精灵。这是我到目前为止所拥有的..

```
 int arrayplace = 0;

 for(Rectangle  rain: rectangleArray) { 

    numberArray.add(arrayPlace, MathUtils.random(3);
    //adds a variable to a certain spot on the array
    // picks random# within range given
    arrayplace++;           

          if (numberArray.get(arrayPlace)==1){
              spritebatch.draw(spriteOne, rain.x, rain.y);
          };
          if (numberArray.get(arrayPlace)==2){
              spritebatch.draw(spriteTwo, rain.x, rain.y);
          }
          if (numberArray.get(arrayPlace)==3){
              spritebatch.draw(spriteThree, rain.x, rain.y);
          }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T23:23:53.290

错误是：

```
arrayplace++; 
```

您增加`arrayplace`得太早，因此它指向您添加的值后面的索引。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T05:34:49.653

随机生成器的工作方式是根据“种子”值生成一系列数字。给定相同的种子，该系列中的第一个数字将相同。您是否正确使用了随机函数？您传递给随机方法的“10”值很可能是种子。你需要调用其他函数来给你下一个随机数吗？检查您的随机函数文档。这是 Java 随机文档：[http](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random(long) ://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#Random(long ) 参考构造函数中种子参数的用法和到方法 next() 或 nextInt()

更进一步，我认为每次进入循环时都需要将“种子”更改为随机生成器，而不是使用常数 10。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T05:42:27.857

我猜你得到相同随机数的原因是你在每个循环中初始化类。因此，您正在生成第一个数字，每次都相同。

*   尝试**在 for-loop 之外**初始化 MathUtils 对象：

    ```
    MathUtils m = new MathUtils(); 
    ```

*   在循环内部，使用这一行生成一个数字：

    ```
    PointlessRect.x = m.random(10); 
    ```

希望这会奏效

# mysql - MySQL：如何在 outfile 中转义反斜杠？

> ID：12136551
> 
> 赞同：0
> 
> 时间：2012-08-27T05:18:27.273
> 
> 标签：mysql, special-characters

我想使用此查询将一些字段输出到文件中：

```
SELECT
    CONCAT('[',
        GROUP_CONCAT(
            CONCAT(CHAR(13), CHAR(9), '{"name":"', name, '",'),
            CONCAT('"id":', CAST(rid AS UNSIGNED), '}')
        ),
    CHAR(13), ']')
AS json FROM `role`
INTO OUTFILE '/tmp/roles.json' 
```

在输出文件中，我得到如下内容：

```
[
\       {"name":"anonymous user","rid":1},
\       {"name":"authenticated user","rid":2},
\       {"name":"admin","rid":3},
\       {"name":"moderator","rid":4}
] 
```

如您所见，换行符 ( `char(13)`) 没有反斜杠，但制表符 ( `char(9)`) 有。我怎样才能摆脱它们？

**更新** Sundar G 给了我一个提示，所以我将查询修改为：

```
SELECT
    CONCAT('"name":', name),
    CONCAT('"rid":', rid)

INTO outfile '/tmp/roles.json'

FIELDS TERMINATED BY ','
LINES STARTING BY '\t{' TERMINATED BY '},\n'

FROM `role` 
```

我不知道为什么，但是这种语法从输出文件中去除了反斜杠：

```
 {"name":"anonymous user","rid":1},
       {"name":"authenticated user","rid":2},
       {"name":"admin","rid":3},
       {"name":"moderator","rid":4} 
```

这已经是相当不错的输出，但我还想在文件的开头和结尾添加左方括号和右方括号。我可以通过 MySQL 语法来做到这一点还是我必须手动做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:53:00.070

如[`SELECT ... INTO`语法](http://dev.mysql.com/doc/en/select-into.html)中所述：

> ***`export_options`***语句部分的语法由与语句一起使用的相同`FIELDS`和`LINES`子句组成[`LOAD DATA INFILE`](http://dev.mysql.com/doc/en/load-data.html)。[有关and](http://dev.mysql.com/doc/en/load-data.html)[子句的信息，包括它们的默认值和允许值，](http://dev.mysql.com/doc/en/load-data.html)请参见[第 13.2.6 节，“<code>LOAD DATA INFILE 语法”</a> 。`FIELDS``LINES`](http://dev.mysql.com/doc/en/load-data.html)
> 
> [](http://dev.mysql.com/doc/en/load-data.html)

 [该引用页面说：

> 如果您指定 no `FIELDS`or`LINES`子句，则默认值与您编写以下内容相同：
> 
> ```
> 由 '\t' 终止的字段由 '' 封闭由 '\\' 转义
> 由 '\n' 终止的行由 '' 开始
> ```

后来解释说：

> 对于输出，如果该`FIELDS ESCAPED BY`字符不为空，则用于在输出中为以下字符添加前缀：
> 
> *   `FIELDS ESCAPED BY`性格_
>     
>     
> *   `FIELDS [OPTIONALLY] ENCLOSED BY`性格_
>     
>     
> *   `FIELDS TERMINATED BY`和`LINES TERMINATED BY`值的第一个字符
>     
>     
> *   ASCII `0`（实际写在转义字符后面的是 ASCII “<code>0”，而不是零值字节）
>     
>     
> 
> 如果`FIELDS ESCAPED BY`字符为空，则不转义任何字符并`NULL`输出为`NULL`，而不是`\N`。指定空转义字符可能不是一个好主意，尤其是当数据中的字段值包含刚刚给出的列表中的任何字符时。

因此，由于您没有明确指定`FIELDS`子句，因此`TERMINATED BY`字段中出现的任何默认字符（即制表符）都将被默认`ESCAPED BY`字符（即反斜杠）转义：因此您正在创建的制表符被转义。为避免这种情况，请显式指定不同的字段终止字符或使用空字符串作为转义字符。](http://dev.mysql.com/doc/en/load-data.html) 

[但是，您还应该注意，结果的大小将受到](http://dev.mysql.com/doc/en/load-data.html)[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len). 也许更好的选择是：

```
SELECT json FROM (
  SELECT 1 AS sort_col, '[' AS json
UNION ALL
  SELECT 2, CONCAT('\t{"name":', QUOTE(name), ',"id":', CAST(rid AS UNSIGNED), '}')
  FROM   role
UNION ALL
  SELECT 3, ']'
) t
ORDER BY sort_col
INTO OUTFILE '/tmp/roles.json' FIELDS ESCAPED BY '' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:26:48.097

试试这个查询，比如
SELECT your_fields INTO outfile '/path/file' fields 由 '"' 以 ',' 结尾，以 '\n' FROM table 结尾；
希望这行得通。

# java - 图像文件的加解密

> ID：12136558
> 
> 赞同：0
> 
> 时间：2012-08-27T05:19:47.873
> 
> 标签：java, image, encryption, aes

结合我的另一个[问题](https://stackoverflow.com/questions/12131627/image-encryption-decryption)，并在更改了这小部分代码之后

```
FileOutputStream output = new FileOutputStream("sheepTest.png");
    CipherOutputStream cos = new CipherOutputStream(output, pbeCipher);
    ImageIO.write(input, "PNG", cos);
    cos.close(); 
```

从解密部分，我遇到了另一个错误，那就是

```
Exception in thread "main" java.lang.IllegalArgumentException: image == null!
at javax.imageio.ImageTypeSpecifier.createFromRenderedImage(Unknown Source)
at javax.imageio.ImageIO.getWriter(Unknown Source)
at javax.imageio.ImageIO.write(Unknown Source)
at encypt.com.trial.main(trial.java:82) 
```

当我单击sheepTest.png 时，该文件为空。错误在哪里？谁能帮我解决错误？谢谢你。

```
public class trial {
public static void main(String[] arg) throws Exception {

   // Scanner to read the user's password. The Java cryptography
   // architecture points out that strong passwords in strings is a
   // bad idea, but we'll let it go for this assignment.
   Scanner scanner = new Scanner(System.in);
   // Arbitrary salt data, used to make guessing attacks against the
   // password more difficult to pull off.
   byte[] salt = { (byte) 0xc7, (byte) 0x73, (byte) 0x21, (byte) 0x8c,
           (byte) 0x7e, (byte) 0xc8, (byte) 0xee, (byte) 0x99 };

   {
     File inputFile = new File("sheep.png");
      BufferedImage input = ImageIO.read(inputFile);
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
      SecretKeyFactory keyFac = SecretKeyFactory.getInstance("PBEWithMD5AndDES");
     // Get a password from the user.
     System.out.print("Password: ");
     System.out.flush();
     PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.nextLine().toCharArray());          
     // Set up other parameters to be used by the password-based
     // encryption.
     PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
     SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
     // Make a PBE Cyhper object and initialize it to encrypt using
     // the given password.
     Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
     pbeCipher.init(Cipher.ENCRYPT_MODE, pbeKey, pbeParamSpec);
     FileOutputStream output = new FileOutputStream("sheepTest.png");
     CipherOutputStream cos = new CipherOutputStream(
            output, pbeCipher);
       //File outputFile = new File("image.png");
         ImageIO.write(input,"PNG",cos);
      cos.close();          

   }
   // Now, create a Cipher object to decrypt for us. We are repeating
   // some of the same code here to illustrate how java applications on
   // two different hosts could set up compatible encryption/decryption
   // mechanisms.
  {
       File inputFile = new File("sheepTest.png");
         BufferedImage input = ImageIO.read(inputFile);
       // Get another (hopefully the same) password from the user.
      System.out.print("Decryption Password: ");
       System.out.flush();
       PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.next().toCharArray());
       // Set up other parameters to be used by the password-based
       // encryption.
       PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
       SecretKeyFactory keyFac = SecretKeyFactory
               .getInstance("PBEWithMD5AndDES");
       SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
       // Make a PBE Cyper object and initialize it to decrypt using
       // the given password.
       Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
       pbeCipher.init(Cipher.DECRYPT_MODE, pbeKey, pbeParamSpec);
       // Decrypt the ciphertext and then print it out.
       /*byte[] cleartext = pbeCipher.doFinal(ciphertext);
       System.out.println(new String(cleartext));*/
       FileOutputStream output = new FileOutputStream("sheepTest.png");
       CipherOutputStream cos = new CipherOutputStream(
              output, pbeCipher);
        ImageIO.write(input,"PNG",  cos);
        cos.close();

   }
   }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T05:44:31.297

继 NateCK 的有见地的帖子（顺便说一句做得很好）之后，我修改了你的解密部分

```
// Note that we are not reading the image in here...
System.out.print("Decryption Password: ");
System.out.flush();
PBEKeySpec pbeKeySpec = new PBEKeySpec(scanner.next().toCharArray());
// Set up other parameters to be used by the password-based
// encryption.
PBEParameterSpec pbeParamSpec = new PBEParameterSpec(salt, 20);
SecretKeyFactory keyFac = SecretKeyFactory
        .getInstance("PBEWithMD5AndDES");
SecretKey pbeKey = keyFac.generateSecret(pbeKeySpec);
// Make a PBE Cyper object and initialize it to decrypt using
// the given password.
Cipher pbeCipher = Cipher.getInstance("PBEWithMD5AndDES");
pbeCipher.init(Cipher.DECRYPT_MODE, pbeKey, pbeParamSpec);

// We're now going to read the image in, using the cipher
// input stream, which wraps a file input stream
File inputFile = new File("sheepTest.png");
FileInputStream fis = new FileInputStream(inputFile);
CipherInputStream cis = new CipherInputStream(fis, pbeCipher);
// We then use all that to read the image
BufferedImage input = ImageIO.read(cis);
cis.close();

// We then write the dcrypted image out...
// Decrypt the ciphertext and then print it out.
FileOutputStream output = new FileOutputStream("sheepTest.png");
ImageIO.write(input, "PNG", output); 
```

我的例子是基于 NateCKs 的发现。如果你觉得它有用，点个赞就好了，但 NateCK 值得称赞 ;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T05:28:38.690

我猜这行返回null：

```
BufferedImage input = ImageIO.read(inputFile); 
```

的文档`ImageIO.read`说：

“如果没有注册的 ImageReader 声称能够读取结果流，则返回 null。”

该 null 被传递给此调用，这将导致 NPE：

```
ImageIO.write(input,"PNG",  cos); 
```

我不熟悉这个 API，但是从文档和我在这里看到的，我想我可以推断出`ImageIO.read`返回 null 的原因是因为它试图解释文件中的图像数据，但它不能，因为它是加密。您需要先解密数据，然后才能将其解释为图像。

您正在进行解密，但您的格式转换使用原始的加密文件作为其输入，而不是解密的图像数据。

# git - 如何获取当前工作目录的 Git 哈希？

> ID：12136563
> 
> 赞同：8
> 
> 时间：2012-08-27T05:20:18.503
> 
> 标签：git

> **可能重复：**
> [目录上的 git hash-object？](https://stackoverflow.com/questions/6011172/git-hash-object-on-a-directory)

据说 Git 哈希是该提交中正在跟踪的所有文件的 SHA-1 哈希。使用 好像可以看到HEAD的hash值`git rev-parse HEAD`，但是有没有办法看到当前工作目录的hash值呢？（不做提交）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T05:25:56.550

不，因为提交 ID 是从基于提交本身的信息中散列的，例如时间戳、描述和作者姓名（除了树的内容）。

# perl - perl 中的 ls -ltr 目录名*

> ID：12136574
> 
> 赞同：1
> 
> 时间：2012-08-27T05:21:35.143
> 
> 标签：perl, grep

我需要找到某个目录名，我有一个 greps 最新文件的代码。有人可以在不使用 perl 脚本中的 ls -ltr 命令的情况下帮助我找到 ls -ltr dirname*。下面的代码可能会有所帮助：

```
my $dir = "/abc/pqr/xyz";
opendir(my $DH, $dir) or die "Error opening $dir: $!";
my %files = map { $_ => (stat("$dir/$_"))[9] } grep(! /^\.\.?$/, readdir($DH));
closedir($DH);
my @sorted_files = sort { $files{$b} <=> $files{$a} } (keys %files);
print "the file is $sorted_files[0] \n"; 
```

我需要在 /abc/pqr/xyz 中找到一个目录名称为 new_123。作为 ls -ltr new*，因为这些目录是每天创建的，所以要寻找 new*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:34:13.647

它有点不清楚你在问什么，但是：

> 我需要在 /abc/pqr/xyz 中找到一个目录名称为 new_123。作为 ls -ltr new*，因为这些目录是每天创建的，所以要寻找 new*。

为此，您可以使用[glob](http://perldoc.perl.org/functions/glob.html)。

我的 PERL 有点生锈，但我认为这样做可以：

```
while (my $dir = glob("new*")) {

        next unless (-d "$dir");
        print "$dir\n";

} 
```

如果系统调用不是限制，您可以使用 find：

`find /some/path/ -type d -name "new*"`

# objective-c - 通过我的代码修改 ultralite DB

> ID：12136580
> 
> 赞同：1
> 
> 时间：2012-08-27T05:22:40.610
> 
> 标签：objective-c, ios, xcode

我是 iphone 开发新手。我想在我的系统（本地）中创建一个简单的 Sybase Ultralite DB，并想通过我的代码对其进行修改。即我想通过我的代码执行插入、删除和更新。我跟踪了许多链接，但找不到正确的答案。没有合适的集成 Sybase Ultralite 的教程，而 SQLite 有很多。非常感谢您对此的任何帮助。

谢谢，拉吉

# java - 继承和多态问题

> ID：12136584
> 
> 赞同：2
> 
> 时间：2012-08-27T05:23:22.807
> 
> 标签：java, inheritance, polymorphism

我有这个代码来自书 SCJP：

```
1\.  class Mammal {
2\.    String name = "furry ";
3\.    String makeNoise() { return "generic noise"; }
4\.  }
5\.  
6\.  class Zebra extends Mammal {
7\.    String name = "stripes ";
8\.    String makeNoise() { return "bray"; }
9\.  }
10.
11\. public class ZooKeeper {
12\.   public static void main(String[] args) {
13\.     new ZooKeeper().go();
14\.   }
15\.   
16\.   void go() {
17\.     Mammal m = new Zebra();
18\.     System.out.println(m.name + m.makeNoise());
19\.   }
20\. } 
```

运行此代码的结果是“furry bray”。

**问题 1**

我不明白为什么第 17 行不是： Zebra zebra2 = new Zebra();

以下每种情况的目的是什么，什么时候使用？

```
Mammal zebra1 = new Zebra(); 
```

对比

```
Zebra zebra2 = new Zebra(); 
```

**问题2**

为什么类中的变量`name = "stripes"`会被类中的变量`Zebra`覆盖？我希望相反：来自子类的变量将覆盖来自超类的变量。`name = "furry"``Mammal`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T08:12:24.860

**答案 1**

`Mammal zebra1 = new Zebra();`用于表明您可以将派生类的对象分配给父类类型的变量。这也是. `Mammal m`_ 可以保存类的对象或从 . 派生的任何类。`Lion``m``m``Mammal``Mammal`

**答案 2**

这也与继承有关。当您打印出a 的`m.name`位置时，您将获得该类的该属性的值。您不能通过继承覆盖变量，只能覆盖方法。如果您向两个类都添加一个方法，两者都会返回，则返回。`m``Mammal``Mammal``getName()``name``m.getName()``"stripes"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T08:13:59.330

1.  因为`Zebra` **是** `Mammal`

2.  变量不能被覆盖。如果将第 15 行更改为：

    `System.out.println(((Zebra) m).name + m.makeNoise());`

    你会得到`stripes bray`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T08:20:28.513

答案1：取决于你想要什么。在这种情况下，它并不那么明显。但有时您只希望对象不属于 1 类或 2 类。假设您有一个斑马而不是哺乳动物的方法，并且您想使用该方法，那么您的对象需要不属于斑马类而不是哺乳动物。但是如果有一个第三方类的方法只接受哺乳动物变量，那么你必须传递一个哺乳动物对象。

Answer2：m.name 是哺乳动物的变量（不能被覆盖），m.makeNoise() 是一个方法，在 Zebra 中被覆盖。

# .net - 在非 Metro 应用程序中使用自定义 Windows 运行时组件

> ID：12136585
> 
> 赞同：4
> 
> 时间：2012-08-27T05:23:32.663
> 
> 标签：.net, windows-runtime

想象一个场景，您有一个复杂的 WinRT 代码框架，您希望从 C++ Metro 应用程序和 C# 桌面应用程序访问它。

有没有办法在非 Metro 应用程序中包含 WinMD？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T05:23:32.663

**更新：**这仅适用于 Windows 8。Microsoft 在 Windows 8.1 中禁用了此功能。

就在这里。尝试通过引用管理器添加它们时的块似乎是在 Visual Studio 本身内部实现的。添加后，Visual Studio 会将引用的文件视为任何其他 WinMD 文件。

**注意：**此解决方法不受 MICROSOFT 支持！

要将您的自定义 WinMD 文件添加到任何非 Metro 应用程序，您必须首先确保您的目标是 .NET 4.5。这不适用于任何早期版本的 .NET Framework。

一旦您以 .NET 4.5 为目标，请卸载项目文件并打开它进行编辑。`<PropertyGroup>`然后，在项目文件的最后一个之后添加以下代码：

```
 <PropertyGroup>
    <TargetPlatformVersion>8.0</TargetPlatformVersion>
  </PropertyGroup> 
```

接下来，找到`<ItemGroup>`包含您的引用的内容并添加以下内容：

```
<Reference Include="{Namespace}">
  <HintPath>{Path to WinMD file}</HintPath>
</Reference> 
```

虽然我不能保证这样做不会出现任何问题，并且鉴于 Microsoft 已经非常清楚无论您使用哪个框架配置文件，CLR 都在加载相同的程序集，但我强烈怀疑这不会导致任何伤害。

关于类库的注释。如果您将 WinMD 包含到非 Metro 类库中，然后在非 Metro 应用程序中引用该库；如果不引用应用程序中的 WinMD 文件或提供包装器类型，您将无法访问您的类库公开的任何自定义 WinRT 类型。

# objective-c - 如何在ipad中实现从PDF文件中搜索字符串的搜索方法

> ID：12136599
> 
> 赞同：0
> 
> 时间：2012-08-27T05:25:34.087
> 
> 标签：objective-c, ios, xcode, ipad

实际上我正在视图中加载一个pdf文件。当我输入字符串时，我有一个搜索按钮，我希望它在整个 pdf 文件中搜索该字符串并显示它。谁能告诉我如何实现或任何示例代码？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:15:41.437

您可以使用[此处提供的示例代码来实现它](https://github.com/mobfarm/FastPdfKit)

# php - 检查新旧数组PHP之间的不同值

> ID：12136602
> 
> 赞同：0
> 
> 时间：2012-08-27T05:25:50.647
> 
> 标签：php, arrays

我有一组值会定期更新。更新数组时，我想使用更新数组中的新值执行操作。

```
$old_node->field_name[0]['value'] = 'red'
$old_node->field_name[1]['value'] = 'yellow'
$old_node->field_name[2]['value'] = 'blue'

$updated_node->field_name[0]['value'] = 'green',
$updated_node->field_name[1]['value'] = 'red',
$updated_node->field_name[2]['value'] ='purple',
$updated_node->field_name[3]['value'] = 'blue', 
```

所以'green'和'purple'的值是新数组中的新值。我需要通过一个函数运行每个添加到新数组的值。就像是：

```
foreach(of the newly added values that are in the new array){
 //do stuff;
} 
```

更新数组时可能会删除某些值，因此 key=>value 对可能会更改。

我试过了：

```
foreach($updated_node->field_name as $new_value){
    if(!in_array($new_value['value'], $old_node->field_name) && $new_value['value'] !== NULL){

    //Do stuff; 

        } 
    } 
```

但这不起作用。我还尝试使用 array_diff 和 array_intersect 选择新值，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:34:16.573

使用[array_diff()](http://php.net/array_diff)

```
$old_array = array(
          0 => 'red',
          1 =>'yellow',
          2 => 'blue'
);

$new_array = array(
          0 => 'green',
          1 => 'red',
          2 =>'purple',
          4 => 'blue'
);

$diff = array_diff($new_array, $old_array);

print_r($diff);

/*
Array
(
    [0] => green
    [2] => purple
)
*/ 
```

为您的新代码

```
$old_node->field_name[0]['value'] = 'red';
$old_node->field_name[1]['value'] = 'yellow';
$old_node->field_name[2]['value'] = 'blue';

$updated_node->field_name[0]['value'] = 'green';
$updated_node->field_name[1]['value'] = 'red';
$updated_node->field_name[2]['value'] = 'purple';
$updated_node->field_name[3]['value'] = 'blue';

$diff = array();
foreach($updated_node->field_name as $num => $field){
    $tmpval = false;
    foreach($old_node->field_name as $old){
        if($field['value'] == $old['value']){
            $tmpval = true;
        }
    }
    if(!$tmpval){
        $diff[$num] = $field['value'];    
    }
}

print_r($diff);

/*
Array
(
    [0] => green
    [2] => purple
)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:34:54.370

```
$old_array = array(
          [0] => 'red',
          [1] =>'yellow',
          [2] => 'blue',
);

$new_array = array(
          [0] => 'green',
          [1] => 'red',
          [2] =>'purple',
          [4] => 'blue',
);

$diff = array_diff($new_array, $old_array);
var_dump($diff); 
```

这导致

```
array(2) {
  [0]=>
  string(5) "green"
  [2]=>
  string(6) "purple"
} 
```

这是正确的（预期的）结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:37:23.417

这是一个*简单*的函数，用于加载两个具有添加和删除值的数组：

```
function loadArrayDifferences($before, $after, &$added, &$removed) {
    $added = array_diff($after, $before);
    $removed = array_diff($before, $after);
} 
```

这是一个测试脚本：

```
<?php

$ar1 = array(
'one',
'two',
'three',
'four'  

);
$ar2 = array(
'two',
'four',
'six',
'eight',    
);

$adds = array();
$rems = array();
loadArrayDifferences($ar1, $ar2, $adds, $rems);
var_dump($adds);
var_dump($rems);

function loadArrayDifferences($before, $after, &$added, &$removed) {
    $added = array_diff($after, $before);
    $removed = array_diff($before, $after);
} 
```

输出：

```
array(2) {
  [2]=>
  string(3) "six"
  [3]=>
  string(5) "eight"
}
array(2) {
  [0]=>
  string(3) "one"
  [2]=>
  string(5) "three"
} 
```

# java - 如何找到最长的回文（java）

> ID：12136603
> 
> 赞同：1
> 
> 时间：2012-08-27T05:25:51.597
> 
> 标签：java, string, joptionpane, palindrome

嗨我一直在做这个java程序，我应该输入一个字符串并输出可以找到的最长回文..但是我的程序只输出最长回文的第一个字母..我非常需要你的帮助..谢谢！

应该：

输入：abcdcbbcdeedcba 输出：bcdeedcb 有两个回文字符串：bcdcb 和 bcdeedcb

但是当我输入：abcdcbbcdeedcba 输出：b

```
import javax.swing.JOptionPane;
public class Palindrome5
{   public static void main(String args[])
    {   String word = JOptionPane.showInputDialog(null, "Input String : ", "INPUT", JOptionPane.QUESTION_MESSAGE);
        String subword = "";
        String revword = "";
        String Out = "";
        int size = word.length();
        boolean c;

        for(int x=0; x<size; x++)
        {   for(int y=x+1; y<size-x; y++)
            {   subword = word.substring(x,y);
                c = comparisonOfreverseword(subword);
                if(c==true)
                {
                    Out = GetLongest(subword);
                }
            }
        }
        JOptionPane.showMessageDialog(null, "Longest Palindrome : " + Out, "OUTPUT", JOptionPane.PLAIN_MESSAGE);
    }

    public static boolean comparisonOfreverseword(String a)
        {   String rev = "";
            int tempo = a.length();
            boolean z=false;
            for(int i = tempo-1; i>=0; i--)
            {
                char let = a.charAt(i);
                rev = rev + let;
            }
            if(a.equalsIgnoreCase(rev))
            {
                z=true;
            }
            return(z);
        }
    public static String GetLongest(String sWord)
        {
            int sLength = sWord.length();
            String Lpalindrome = "";
            int storage = 0;
            if(storage<sLength)
            { 
                storage = sLength;

                Lpalindrome = sWord;
            }
            return(Lpalindrome);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-29T10:57:05.587

修改后的程序..这个程序将给出正确的输出

```
package pract1;

import javax.swing.JOptionPane;
public class Palindrome5
{

    public static void main(String args[])
    {

    String word = JOptionPane.showInputDialog(null, "Input String : ", "INPUT", JOptionPane.QUESTION_MESSAGE);
    String subword = "";
    String revword = "";
    String Out = "";

    int size = word.length();
    boolean c;
        String Lpalindrome = "";
        int  storage=0;

  String out="";

    for(int x=0; x<size; x++)
    {   for(int y=x+1; y<=size; y++)
        {   subword = word.substring(x,y);
            c = comparisonOfreverseword(subword);
            if(c==true)
            {
                 int sLength = subword.length();

                   if(storage<sLength)
                 { 
                     storage = sLength;

                     Lpalindrome = subword;
                     out=Lpalindrome;

                 }

            }
        }
    }
            JOptionPane.showMessageDialog(null, "Longest Palindrome : " + out, "OUTPUT", JOptionPane.PLAIN_MESSAGE);
}

public static boolean comparisonOfreverseword(String a)
    {   String rev = "";
        int tempo = a.length();
        boolean z=false;
        for(int i = tempo-1; i>=0; i--)
        {
            char let = a.charAt(i);
            rev = rev + let;
        }
        if(a.equalsIgnoreCase(rev))
        {
            z=true;
        }
        return(z);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:37:58.100

你有两个错误：

1.

```
for(int y=x+1; y<size-x; y++) 
```

应该

```
for(int y=x+1; y<size; y++) 
```

因为您仍然想一直走到字符串的末尾。在上一个循环中，由于 x 在整个循环中增加，您的子字符串大小在整个循环中减小（通过从其末尾删除 x 字符）。

2.

您没有存储迄今为止找到的最长字符串或其长度。编码

```
int storage = 0;
if(storage<sLength) { 
    storage = sLength;
    ... 
```

说'如果新字符串长于零个字符，那么我将假设它是迄今为止发现的最长字符串并将其返回为 LPalindrome'。这无济于事，因为我们之前可能已经发现了更长的回文。

如果是我，我会创建一个静态变量（例如longestSoFar）来保存迄今为止发现的最长回文（最初是空的）。对于每个新回文，检查新回文是否比最长SoFar 长。如果它更长，则将其分配给longestSoFar。然后在最后，显示longestSoFar。

通常，如果您在“记住”程序中的某些内容（例如以前看到的值）时遇到困难，则必须考虑静态存储某些内容，因为一旦它们的方法完成，局部变量就会被遗忘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T17:27:06.550

```
public class LongestPalindrome {

    public static void main(String[] args) {
        HashMap<String, Integer> result = findLongestPalindrome("ayrgabcdeedcbaghihg123444456776");
        result.forEach((k, v) -> System.out.println("String:" + k + " Value:" + v));
    }

    private static HashMap<String, Integer> findLongestPalindrome(String str) {
        int i = 0;
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        while (i < str.length()) {
            String alpha = String.valueOf(str.charAt(i));
            if (str.indexOf(str.charAt(i)) != str.lastIndexOf(str.charAt(i))) {
                String pali = str.substring(i, str.lastIndexOf(str.charAt(i)) + 1);
                if (isPalindrome(pali)) {
                    map.put(pali, pali.length());
                    i = str.lastIndexOf(str.charAt(i));
                }
            }
            i++;
        }
        return map;
    }

    public static boolean isPalindrome(String input) {
        for (int i = 0; i <= input.length() / 2; i++) {
            if (input.charAt(i) != input.charAt(input.length() - 1 - i)) {
                return false;
            }
        }
        return true;

    }

} 
```

这种方法很简单。

输出：
字符串：abcdeedcba 值：10
字符串：4444 值：4
字符串：6776 值：4
字符串：ghihg 值：5

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T15:13:45.007

公共类最长回文{

```
/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
String S= "abcdcba";
printLongestPalindrome(S);
}

public static void printLongestPalindrome(String S)
{
    int maxBack=-1;
    int maxFront = -1;
    int maxLength=0;
    for (int potentialCenter = 0 ; potentialCenter < S.length();potentialCenter ++ )
    {   
        int back = potentialCenter-1;
        int front = potentialCenter + 1;
        int longestPalindrome = 0;
        while(back >=0 && front<S.length() && S.charAt(back)==S.charAt(front))
        {
            back--;
            front++;
            longestPalindrome++;

        }
        if (longestPalindrome > maxLength)
        {
            maxLength = longestPalindrome+1;
            maxBack = back + 1;
            maxFront = front;
        }
        back = potentialCenter;
        front = potentialCenter + 1;
        longestPalindrome=0;
        while(back >=0 && front<S.length() && S.charAt(back)==S.charAt(front))
        {
            back--;
            front++;
            longestPalindrome++;
        }
        if (longestPalindrome > maxLength)
        {
            maxLength = longestPalindrome;
            maxBack = back + 1;
            maxFront = front;
        }

    }

    if (maxLength == 0) System.out.println("There is no Palindrome in the given String");
    else{
        System.out.println("The Longest Palindrome is " + S.substring(maxBack,maxFront) + "of " + maxLength);
    }
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-19T14:37:41.393

我有自己的方法来获得随机单词中最长的回文。看一下这个

```
public static void main(String[] args) {

    Scanner in = new Scanner(System.in);

System.out.println(longestPalSubstr(in.nextLine().toLowerCase()));

}

static String longestPalSubstr(String str) {

       char [] input = str.toCharArray();
       Set<CharSequence> out = new HashSet<CharSequence>();

      int n1 = str.length()-1;

      for(int a=0;a<=n1;a++)
       {
          for(int m=n1;m>a;m--)
          {

          if(input[a]==input[m])
          {

           String nw = "",nw2="";

           for (int y=a;y<=m;y++)
           {

                nw=nw+input[y];
           }
           for (int t=m;t>=a;t--)
           {

               nw2=nw2+input[t];
           }

           if(nw2.equals(nw))
           {

                out.add(nw);

               break;
           }
       }

     }

   }

    int a = out.size();
    int maxpos=0;
    int max=0;
    Object [] s = out.toArray();

    for(int q=0;q<a;q++)
    {

        if(max<s[q].toString().length())
        {
            max=s[q].toString().length();
            maxpos=q;
        }
    }

   String output = "longest palindrome is : "+s[maxpos].toString()+" and the lengths is : "+ max; 
   return output;

} 
```

此方法将返回最大长度回文及其长度。这是我尝试并得到答案的一种方式。无论是奇数还是偶数，这个方法都会运行。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-08-19T14:44:04.517

这是我自己获得最长回文的方法。这将返回长度和回文词

```
public static void main(String[] args) {

    Scanner in = new Scanner(System.in);

System.out.println(longestPalSubstr(in.nextLine().toLowerCase()));

}

static String longestPalSubstr(String str) {

       char [] input = str.toCharArray();
       Set<CharSequence> out = new HashSet<CharSequence>();

      int n1 = str.length()-1;

      for(int a=0;a<=n1;a++)
       {
          for(int m=n1;m>a;m--)
          {

          if(input[a]==input[m])
          {

           String nw = "",nw2="";

           for (int y=a;y<=m;y++)
           {

                nw=nw+input[y];
           }
           for (int t=m;t>=a;t--)
           {

               nw2=nw2+input[t];
           }

           if(nw2.equals(nw))
           {

                out.add(nw);

               break;
           }
       }

     }

   }

    int a = out.size();
    int maxpos=0;
    int max=0;
    Object [] s = out.toArray();

    for(int q=0;q<a;q++)
    {

        if(max<s[q].toString().length())
        {
            max=s[q].toString().length();
            maxpos=q;
        }
    }

   String output = "longest palindrome is : "+s[maxpos].toString()+" and the lengths is : "+ max; 
   return output;

} 
```

此方法将返回最大长度回文及其长度。这是我尝试并得到答案的一种方式。无论是奇数还是偶数，这个方法都会运行。

# jquery - CakePHP 和 Jquery 追加

> ID：12136608
> 
> 赞同：0
> 
> 时间：2012-08-27T05:26:29.767
> 
> 标签：jquery, cakephp

我正在尝试
像这样在 Jquery 中使用 append

```
$('.div_addfield').append('<?php echo $this->Form->input("dob",array("separator"=>"","type"=>"date","label"=>"Date of Birth"));?>'); 
```

它不能在 Firebug 控制台上运行，它会出现以下错误

> SyntaxError：未终止的字符串文字

但它显示数组如下

```
$('.div_addfield').append('<select id="ListOfStudentListOfHouseId" name="data[ListOfStudent]['+field_count+'][list_of_house_id]"><option value="1">Aitchison</option><option value="2">Nalagarh</option><option value="4">Ranjit</option><option value="5">Patiala</option></select>');
$('.div_addfield').append('<div class="input date"><label for="dobMonth">Date of Birth</label><select name="data[dob][month]" id="dobMonth">
<option value="01">January</option>
<option value="02">February</option>
<option value="03">March</option>
<option value="04">April</option>
<option value="05">May</option>
<option value="06">June</option>
<option value="07">July</option>
<option value="08" selected="selected">August</option>
<option value="09">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select><select name="data[dob][day]" id="dobDay">
<option value="01">1</option>
<option value="02">2</option>
<option value="03">3</option>
<option value="04">4</option>
<option value="05">5</option>
<option value="06">6</option>
<option value="07">7</option>
<option value="08">8</option>
<option value="09">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27" selected="selected">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
</select><select name="data[dob][year]" id="dobYear">
<option value="2032">2032</option>
<option value="2031">2031</option>
<option value="2030">2030</option>
<option value="2029">2029</option>
<option value="2028">2028</option>
<option value="2027">2027</option>
<option value="2026">2026</option>
<option value="2025">2025</option>
<option value="2024">2024</option>
<option value="2023">2023</option>
<option value="2022">2022</option>
<option value="2021">2021</option>
<option value="2020">2020</option>
<option value="2019">2019</option>
<option value="2018">2018</option>
<option value="2017">2017</option>
<option value="2016">2016</option>
<option value="2015">2015</option>
<option value="2014">2014</option>
<option value="2013">2013</option>
<option value="2012" selected="selected">2012</option>
<option value="2011">2011</option>
<option value="2010">2010</option>
<option value="2009">2009</option>
<option value="2008">2008</option>
<option value="2007">2007</option>
<option value="2006">2006</option>
<option value="2005">2005</option>
<option value="2004">2004</option>
<option value="2003">2003</option>
<option value="2002">2002</option>
<option value="2001">2001</option>
<option value="2000">2000</option>
<option value="1999">1999</option>
<option value="1998">1998</option>
<option value="1997">1997</option>
<option value="1996">1996</option>
<option value="1995">1995</option>
<option value="1994">1994</option>
<option value="1993">1993</option>
<option value="1992">1992</option>
</select></div>'); 
```

任何人都知道如何解决这个错误

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:29:05.150

您不能在 JavaScript 中让字符串跨越多行，尽管您可以`\`在行尾添加 a 并且字符串将在下一行继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:31:36.490

尝试使用这个

```
$('.div_addfield').append('<?php echo  str_replace(array("\r\n", "\r", "\n"), "",$this->Form->input("dob",array("separator"=>"","type"=>"date","label"=>"Date of Birth")));?>'); 
```

# c# - 我可以通过使用按钮传递不同的值作为输入但在 MVC3 中显示其他内容吗

> ID：12136611
> 
> 赞同：0
> 
> 时间：2012-08-27T05:26:49.043
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我有一个按钮列表，它必须将评论数**显示**为按钮的值。但是，当我单击按钮时，我想将评论 ID**发送/传递**给提交的方法。有没有办法实现这种事情？

编辑：我所做的是，在我有按钮列表的表格中

```
 @foreach(var s in Model.List)  
                 {
                    <tr>
                        <td style="text-align:left;">@s.ID</td>
                        <td style="text-align:center;">@s.CD</td>
                        <td style="text-align:center;">@s.DE</td>
                        <td style="text-align:center;">                                
                            <input class="xxxxx" style="text-align:center;" type="submit" name="count" value ="@s.k" />
                            <input type="hidden" name="SupportID" value="@s.ID" />                                                            
                        </td>
                    </tr>
                  } 
```

这是将 S.ID 传递给控制器​​方法，但它不直观，我觉得这不是最好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T13:10:03.347

除了 ID 之外，您还需要传递其他任何东西吗？

如果没有，那么您可以只使用一个简单的锚并将 URL 设置为类似

> `href="/Page/Method/@s.ID"`

并创建接受 ID 的方法。

或者，您可以使用 jQuery 对该方法进行 AJAX 调用，然后您将可以访问按钮元素上的任何属性，然后在 AJAX 调用中使用。

# asp.net-mvc - 仅使用 MVC 的“控制器”部分有什么好处？

> ID：12136612
> 
> 赞同：0
> 
> 时间：2012-08-27T05:26:49.393
> 
> 标签：asp.net-mvc, web-services, rest, dotnetnuke, llblgenpro

在面向服务的架构模式中仅使用 MVC 的控制器部分可以获得哪些可能的好处。由 LLBLGen Pro 创建的数据库访问层在不使用 MVC ***'model' 的***情况下进行操作。而且，由于我们一直使用 DNN 作为我的内容管理系统，我们创建了通过***“控制器”***调用服务的模块（基于 REST）。我的问题是——我们可以用更简单的方法来做到这一点！**为什么要使用 MVC？以这种方式使用 MVC 是一种常见的做法吗？**

# vbscript - VBScript：获取注册表值的类型，并删除/创建注册表值，*无需*使用 WMI

> ID：12136613
> 
> 赞同：0
> 
> 时间：2012-08-27T05:27:20.493
> 
> 标签：vbscript, registry, wmi

我需要创建一个*不*依赖 WMI 的脚本来执行以下操作：

1.  检查注册表值是否存在，以及它是否具有所需的类型
2.  如果注册表值存在但类型错误，请将其删除
3.  如果注册表值不存在，或者在步骤 #2 中被删除，则使用特定类型创建它
4.  如果注册表值存在*且*类型正确，请确保其值正确

我在 Internet 上找到的几乎所有注册表操作 VBScript 代码片段都依赖于 WMI。由于某些原因，这是不可接受的。

您对如何在不依赖 WMI 的情况下操作注册表有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:41:35.323

*Windows Scripting Host* (WSH) 中的 VBScript/JScript确实具有来自`WScript.Shell`对象的注册表功能，但它们仅限于读取、写入和删除键/值。没有任何功能可以检索注册表项或值的存在，除非通过读取它并检查结果。检索注册表值类型的函数也不存在。

除了从 WMI 对象访问注册表的其他方法是通过函数使用打包的`REG.EXE`命令行工具。`WScript.Shell.Exec`这是通过使用`QUERY`, `ADD`, `DELETE`, `IMPORT`, 或`EXPORT`命令参数来完成的。运行`REG.EXE`显示使用摘要，或`REG.EXE QUERY /?`,`REG.EXE EXPORT /?`等显示命令使用详情。

如果存在，命令的输出`QUERY`将显示值数据及其类型。该`EXPORT`命令也可以使用，除了它将结果保存在`REG`文件中。工具的结果`REG.EXE`也可以在`CMD.EXE`. 例如：

```
CMD.EXE /C REG.EXE QUERY "HKEY_CURRENT_USER\Control Panel\Cursors" > "reg output.txt" 
```

请注意，文件`output.txt`的内容与文件的内容不同`REG`。该`REG`文件具有标准格式，在 Microsoft 知识库[KB310516](http://support.microsoft.com/kb/310516)中有部分描述。

通过检查`REG.EXE`工具的退出代码，并解析其输出或生成的`REG`文件，检索注册表值类型是可能的。`WScript.Shell`如果可能并且如果性能是一个问题，应该使用可以使用对象完成的注册表操作。

# iphone - Google Maps API GeoLocation 不适用于移动设备

> ID：12136615
> 
> 赞同：1
> 
> 时间：2012-08-27T05:27:38.810
> 
> 标签：iphone, google-maps, mobile, browser, geolocation

我不太确定为什么 GeoLocation 可以在我的 PC 上运行，但不能在我的 iPhone 上运行……我已经`sensor=true`在脚本调用 API 中，但除此之外，我不知所措。这是整个脚本：

```
 <div id="info"></div>
                <div id="map_canvas" style="width:908px; height:420px"></div>
                <input type="text" id="addressInput" size="10"/>
                <select id="radiusSelect">
                    <option value="5" selected>5mi</option>
                    <option value="15" selected>15mi</option>
                    <option value="25" selected>25mi</option>
                    <option value="100">100mi</option>
                    <option value="200">200mi</option>
                    <option value="4000">4000mi</option>
                </select>
                <input type="button" value="Search" onclick="searchLocations();">
                <div><select id="locationSelect" style="width:100%;visibility:hidden"></select></div>                   

                <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyCe49sI29q0AVNo9iVvQ-lDlDwZpFZuA4o&sensor=true"></script>
                <script type="text/javascript" src="http://gmaps-samples-v3.googlecode.com/svn/trunk/geolocate/geometa.js"></script>
                <script type="text/javascript">

                var map;
                var markers = [];
                var infoWindow;
                var locationSelect;

                function load() {
                    map = new google.maps.Map(document.getElementById("map_canvas"), {
                        center: new google.maps.LatLng(40, -100),
                        zoom: 4,
                        mapTypeId: 'roadmap',
                        mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU}
                    });
                    infoWindow = new google.maps.InfoWindow();

                    locationSelect = document.getElementById("locationSelect");
                    locationSelect.onchange = function() {
                        var markerNum = locationSelect.options[locationSelect.selectedIndex].value;
                        if (markerNum != "none") {
                            google.maps.event.trigger(markers[markerNum], 'click');
                        }
                    };

                    // geolocation
                    prepareGeolocation();
                    doGeolocation();
                }

                function doGeolocation() {
                    if (navigator.geolocation) {
                        navigator.geolocation.getCurrentPosition(positionSuccess, positionError);
                    } else {
                        positionError(-1);
                    }
                }

                function positionError(err) {
                    var msg;
                    switch(err.code) {
                        case err.UNKNOWN_ERROR:
                            msg = "Unable to find your location";
                            break;
                        case err.PERMISSION_DENINED:
                            msg = "Permission denied in finding your location";
                            break;
                        case err.POSITION_UNAVAILABLE:
                            msg = "Your location is currently unknown";
                            break;
                        case err.BREAK:
                            msg = "Attempt to find location took too long";
                            break;
                        default:
                        msg = "Location detection not supported in browser";
                    }
                    document.getElementById('info').innerHTML = msg;
                }

                function positionSuccess(position) {
                    // Centre the map on the new location
                    var coords = position.coords || position.coordinate || position;
                    var latLng = new google.maps.LatLng(coords.latitude, coords.longitude);
                    map.setCenter(latLng);
                    map.setZoom(15);
                    var marker = new google.maps.Marker({
                        map: map,
                        position: latLng,
                        title: 'Why, there you are!'
                    });
                    document.getElementById('info').innerHTML = 'Looking for <b>' +
                    coords.latitude + ', ' + coords.longitude + '</b>...';

                    // And reverse geocode.
                    (new google.maps.Geocoder()).geocode({latLng: latLng}, function(resp) {
                        var place = "You're around here somewhere!";
                        if (resp[0]) {
                            var bits = [];
                            for (var i = 0, I = resp[0].address_components.length; i < I; ++i) {
                                var component = resp[0].address_components[i];
                                if (contains(component.types, 'political')) {
                                    bits.push('<b>' + component.long_name + '</b>');
                                }
                            }
                            if (bits.length) {
                                place = bits.join(' > ');
                            }
                            marker.setTitle(resp[0].formatted_address);
                        }
                        document.getElementById('info').innerHTML = place;
                    });
                }

                function contains(array, item) {
                    for (var i = 0, I = array.length; i < I; ++i) {
                        if (array[i] == item) return true;
                    }
                    return false;
                }

                function searchLocations() {
                    console.log("searching locations...");
                    var address = document.getElementById("addressInput").value;
                    var geocoder = new google.maps.Geocoder();
                    geocoder.geocode({address: address}, function(results, status) {
                        if (status == google.maps.GeocoderStatus.OK) {
                            searchLocationsNear(results[0].geometry.location);
                        } else {
                            alert(address + ' not found');
                        }
                    });
                }

                function clearLocations() {
                    //infoWindow.close();
                    for (var i = 0; i < markers.length; i++) {
                        markers[i].setMap(null);
                    }
                    markers.length = 0;

                    locationSelect.innerHTML = "";
                    var option = document.createElement("option");
                    option.value = "none";
                    option.innerHTML = "See all results:";
                    locationSelect.appendChild(option);
                    locationSelect.style.visibility = "visible";
                }

                function searchLocationsNear(center) {
                    clearLocations();

                    var radius = document.getElementById('radiusSelect').value;
                    /* var searchUrl = 'phpsqlajax_search.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius; */
                    var searchUrl = 'http://dev-imac.local/phpsqlajax_search.php?lat=' + center.lat() + '&lng=' + center.lng() + '&radius=' + radius;
                    console.log(searchUrl);
                    downloadUrl(searchUrl, function(data) {
                        var xml = parseXml(data);
                        var markerNodes = xml.documentElement.getElementsByTagName("marker");
                        var bounds = new google.maps.LatLngBounds();
                        for (var i = 0; i < markerNodes.length; i++) {
                            var name = markerNodes[i].getAttribute("name");
                            var address = markerNodes[i].getAttribute("address");
                            var distance = parseFloat(markerNodes[i].getAttribute("distance"));
                            var latlng = new google.maps.LatLng(
                                parseFloat(markerNodes[i].getAttribute("lat")),
                                parseFloat(markerNodes[i].getAttribute("lng")));

                                createOption(name, distance, i);
                                createMarker(latlng, name, address);
                                bounds.extend(latlng);
                        }
                        map.fitBounds(bounds);
                    });
                }

                function createMarker(latlng, name, address) {
                    var html = "<b>" + name + "</b> <br/>" + address;
                    var marker = new google.maps.Marker({
                        map: map,
                        position: latlng
                    });
                    google.maps.event.addListener(marker, 'click', function() {
                        infoWindow.setContent(html);
                        infoWindow.open(map, marker);
                    });
                    markers.push(marker);
                }

                function createOption(name, distance, num) {
                    var option = document.createElement("option");
                    option.value = num;
                    option.innerHTML = name + "(" + distance.toFixed(1) + ")";
                    locationSelect.appendChild(option);
                }

                function downloadUrl(url, callback) {
                    var request = window.ActiveXObject ?
                    new ActiveXObject('Microsoft.XMLHTTP') :
                    new XMLHttpRequest;

                    request.onreadystatechange = function() {
                        if (request.readyState == 4) {
                            request.onreadystatechange = doNothing;
                            callback(request.responseText, request.status);
                        }
                    };

                    request.open('GET', url, true);
                    request.send(null);
                }

                function parseXml(str) {
                    if (window.ActiveXObject) {
                        var doc = new ActiveXObject('Microsoft.XMLDOM');
                        doc.loadXML(str);
                        return doc;
                    } else if (window.DOMParser) {
                        return (new DOMParser).parseFromString(str, 'text/xml');
                    }
                }

                function doNothing() {}

                window.onload = load();

                </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:44:38.277

首先，

```
mapTypeId: 'roadmap', 
```

应该：

```
mapTypeId: google.maps.MapTypeId.ROADMAP, 
```

但这也会导致它在您的 PC 中失败。

除此之外，您的`<script>`部分应该在`<head>`文档的部分中，而不是在`<body>`. 也许 iPhone 浏览器比您 PC 上的浏览​​器更严格。您在每个系统中使用什么浏览器？（我猜你在PC上使用IE。你试过其他浏览器吗？）

# jsp - 在 JSP 中使用 OGNL 从集合中选择对象

> ID：12136625
> 
> 赞同：1
> 
> 时间：2012-08-27T05:28:47.787
> 
> 标签：jsp, iterator, struts, selection, ognl

我想从一组对象中选择一个对象。

集合是`#attr.studyTypeListKey`，其表达式是正确的，保存在`applicationContext`.

**选择条件**是，集合中对象的属性`code`应该等于 的值`study`，学习的是迭代器中每个对象的属性`proposals`。

```
 <s:iterator value="proposals">   
       <s:property value="#attr.studyTypeListKey.{^#this.code == study}.name" />
   .... 
```

下面的代码不起作用，即它什么也不显示：

1.  下面将显示集合中的第一个对象，但这个对象实际上不满足条件。

    ```
    <s:property value="#attr.studyTypeListKey.{?#this.code == #study}[0].name" /> 
    ```

2.  以下也不显示任何内容：

    ```
    <s:property value="#attr.studyTypeListKey.{^#this.code == #study}.name" /> 
    ```

# java - Spring App 在 Linux 上运行时给出 rg.springframework.beans.factory.UnsatisfiedDependencyException？

> ID：12136628
> 
> 赞同：1
> 
> 时间：2012-08-27T05:29:08.190
> 
> 标签：java, spring, tomcat

我的应用程序在带有 Tomcat 7 和 JDK 7u6 for Mac OS X 的 Spring Tool Suite 中的 Mac OS X 上运行得很好。当我在带有 Jdk7u6 的 RHEL 6 上运行它时，相同的应用程序给了我错误

```
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'apiAwareAuthenticationEntryPoint' defined in class path resource [spring-security.xml]: Unsatisfied dependency expressed through constructor argument with index 0 of type [java.lang.String]: Ambiguous constructor argument types - did you specify the correct bean references as constructor arguments? 
```

这是相关的bean参考/定义

```
<beans:bean id="apiAwareAuthenticationEntryPoint" class="com.example.ApiAwareAuthenticationEntryPoint">
   <beans:constructor-arg name="loginUrl" value="/login" type="java.lang.String"  index="0"  />
</beans:bean> 
```

这是代码片段

```
public class ApiAwareAuthenticationEntryPoint extends LoginUrlAuthenticationEntryPoint
{
    public ApiAwareAuthenticationEntryPoint(String loginUrl)
    {
        super(loginUrl);
    } 
```

什么可能导致这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:42:56.913

对我来说，听起来你有多个构造函数只接受一个字符串类型的参数。
可能不在同一类中，但可能在它扩展的一类中。

然后 spring 不知道该调用哪个 :)

但是很奇怪你只在linux上得到这个错误。

# iphone - initWithNibName 不起作用

> ID：12136633
> 
> 赞同：0
> 
> 时间：2012-08-27T05:29:45.117
> 
> 标签：iphone, ios, interface-builder

在尝试添加新视图时遇到了这个非常令人沮丧的问题，我有 2 种不同类型的视图：`LargeCoverViewController`和`CoverViewController`.

我创建了一个`LargeCoverViewController`这样的：

```
LargeCoverViewController *tmpCover = [[LargeCoverViewController alloc] initWithNibName:@"LargeCoverViewController" bundle:nil andIssue:issue]; 
```

那行得通，但是当我尝试创建一个`CoverViewController`时，它拒绝工作

```
CoverViewController *tmpCover = [[CoverViewController alloc] initWithNibName:@"CoverViewController" bundle:nil andIssue:issue]; 
```

我认为它与 .xib 文件有关，当我这样做时，它再次“工作”

```
CoverViewController *tmpCover = [[CoverViewController alloc] initWithNibName:@"LargeCoverViewController" bundle:nil andIssue:issue]; 
```

在 Interface Builder 中，该类已正确设置，我的视图已正确链接。（它基本上只是 LargeCoverViewController 的副本），我还缺少什么吗？它变得非常令人沮丧...

编辑：我的应用程序不会崩溃，如果我的 nibname 错误，应用程序应该会崩溃，这里不是这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:09:21.307

尝试创建新的单独 XIB 文件，而不是复制整个 XIB 文件，然后将 UI 出口和视图从其他 XIB 复制到这个新创建的 XIB 文件。

有时，Xcode 会与复制粘贴混淆。我知道这不是正确的解决方案，但有时它会起作用。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:40:26.037

复制 ViewController 时，**文件所有者的自定义类**保持不变，因此将其更改为您的新 ViewController，并在更改后再次绑定您的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T05:41:56.577

你的应用程序在那条线上崩溃了吗？检查控制台的日志。您可能收到错误消息或崩溃日志。

如果您从任何其他 XIB 复制了 XIB 资源，则检查链接的出口是否包含该新类可能不可用的对象。

我希望这会对您有所帮助并能够解决问题。

# c# - 水晶报表中的动态打印

> ID：12136635
> 
> 赞同：1
> 
> 时间：2012-08-27T05:29:47.223
> 
> 标签：c#, visual-studio-2008, crystal-reports

我有一个问题，不知道该怎么做。我需要在水晶报告上打印一份报告（或者可以是其他需要打印的），其中字段不固定，全部打印，例如：- EmpID

企业名称

出生日期

加入

户口号码。

ETC

在这里我们需要给用户自由，选择任何或所有字段来打印，假设用户选择，EmpName，DOjoining

所以它在两个并排的上方打印。

希望我对这个问题很清楚。

# java-7 - try-with-resources：Java 是否对 .close() 的调用顺序做出任何保证？

> ID：12136637
> 
> 赞同：2
> 
> 时间：2012-08-27T05:30:09.593
> 
> 标签：java-7, try-with-resources

在 Java 7 中使用 try-with-resources 时，是否可以保证`.close()`调用的顺序？

以下是来自 Oracle 的一些示例代码，展示了此功能：

```
try (
  java.util.zip.ZipFile zf = new java.util.zip.ZipFile(zipFileName);
  java.io.BufferedWriter writer = java.nio.file.Files.newBufferedWriter(outputFilePath, charset)
) {

  // Enumerate each entry

  for (java.util.Enumeration entries = zf.entries(); entries.hasMoreElements();) {

    // Get the entry name and write it to the output file

    String newLine = System.getProperty("line.separator");
    String zipEntryName = ((java.util.zip.ZipEntry)entries.nextElement()).getName() + newLine;
    writer.write(zipEntryName, 0, zipEntryName.length());
  } 
```

两者都`zf.close()`将`writer.close()`被调用。订单有保障吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:32:24.087

它[的声明顺序相反](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)，从内到外关闭。

# openlayers - 如何确定开放图层中图层中的要素位置？

> ID：12136638
> 
> 赞同：0
> 
> 时间：2012-08-27T05:30:13.450
> 
> 标签：openlayers

我有一个带有矢量图层的 wfs 协议。我在其中使用功能图标。如何确定功能的位置，以便我想知道功能图标占用的确切空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:27:58.810

我们可以在 OpenLayer.Layer.Vector 的 PreFeature 插入函数中通过 point1.distanceTo(point2); 找出特征碰撞。如果距离太小，我们可以忽略一个优先级较低的点。

# php - 从下拉列表中获取所选项目并将其保存到 php 变量

> ID：12136643
> 
> 赞同：0
> 
> 时间：2012-08-27T05:31:17.597
> 
> 标签：php, javascript, jquery, ajax, drop-down-menu

我有一个下拉列表（在一个 php 文件中，没有表单标签）

```
print "<select id="animal" onchange="getSelectedItem(this.value)">
<option value = "Dog"> Dog </option>
<option value = "Cat"> Cat </option>
</select>"; 
```

和一个变量 $selAnimal

和一个javascript函数

```
function getSelectedItem(opt){
    //$selAnimal = opt <- how do i do this?
} 
```

我尽可能不希望页面重新加载，因此我避免将其放在表单中并在我选择时提交。我无法让 $.post 方法工作。我知道这不能直接完成，因为 php 是服务器端而 javascript 是客户端。我还想过将选定的值放在隐藏组件（跨度或其他东西）中并从中获取值。但我不知道如何从组件中获取它。我也见过 AJAX 或 jquery 的使用，但我的知识还不够。

我需要将此值保存到 php 变量中，因为我将使用它作为第二个下拉列表中选项的基础。例如，如果我选择 Dog，则下拉列表将包含狗品种作为选项。

我花了几天时间到处寻找可能的解决方案。帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:54:46.977

由于 PHP 在 JS 启动之前声明了所有变量，因此您不能让该变量可用于同一个文件。但是，您可以简单地将用户重定向到变量可用的新文件。

使用这样的东西：

```
function getSelectedItem(opt){
    location.href = location.href + "?selAnimal=" + opt;
} 
```

在 PHP 中，现在您可以使用 selAnimal 变量来显示不同的内容，如下所示：

```
$selectedAnimal = $_GET["selAnimal"];
if($selectedAnimal == "dog"){
    // Whatever you want to do now
} 
```

更好的方法是将 POST 与表单一起使用，但这也应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:32:18.177

这是解决方案

```
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $('#animal').change(function(){
    $.post('loadbreeds.php', { animal:$('#animal').val() },
        function(data){
            $('#breedList').html(data);
        });
    });
});
</script>

<form method="post" >
    <div id="animalList">
        <select id="animal" name="animal">
            <option value="">--Select--</option>
            <?php if (!empty($animals)) { foreach ($animals as $value) { ?>
                <option value="<?php echo $value['animalKey']; ?>"><?php echo $value['animalName']; ?></option>
            <?php }} ?>
        </select>
    </div>
    <div id="breedList">
        <select id="breed" name="breed">
            <option value="">--Select--</option>
        </select>
    </div>
    <input type="submit" value="Submit" />
</form> 
```

loadbreeds.php 的代码

```
$animalKey = $_POST['animal'];
$breeds = selectByKey($animalKey); // code for selecting breeds

<select id="breed" name="breed">
    <option value="">--Select--</option>
    <?php if (!empty($breeds)) { foreach ($breeds as $value) { ?>
        <option value="<?php echo $value['breedKey']; ?>"><?php echo $value['breedName']; ?></option>
    <?php }} ?>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:57:32.893

尝试以下操作，重建第二个下拉列表：

[http://jsfiddle.net/kAY7M/59/](http://jsfiddle.net/kAY7M/59/)

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>

print "<script type=\"text/javascript\">var AnimalTypeList = [\"Dog1,Dog2,Dog3,Dog4\",\"Cat1,Cat2,Cat3,Cat4\"];</script>";

<script type="text/javascript">

$("#animal").change(function () {
    var sel = $("#animal").prop("selectedIndex") - 1;
    var list = AnimalTypeList[sel].split(",");
    var Counter = list.length;
    $("#type").children().remove();
    for (var i = 0; i < Counter; i++) {
        $("#type").append("<option value = '" + list[i] + "'> " + list[i] + "</option>");
    }    
})

</script> 
```

我也可以做一个纯 Javascript 的版本，但那是更多的代码。

# bash - Bash 输出不同于命令行

> ID：12136645
> 
> 赞同：0
> 
> 时间：2012-08-27T05:31:38.167
> 
> 标签：bash

我已经使用 grep 尝试了各种过滤器来尝试解决这个问题，但就是无法破解它。

```
cpumem="$(ps aux | grep -v 'grep' | grep 'firefox-bin' | awk '{printf $3 "\t" $4}' 
```

我正在提取进程的 CPU 和内存使用情况，当我从命令行运行它时，我得到了正确输出的 2 个字段：

```
ps aux | grep -v 'grep' | grep 'firefox-bin' | awk '{printf $3 "\t" $4}'
> 1.1 4.4 
```

但是从 bash 脚本中执行的相同命令会产生以下结果：

```
cpumem="$(ps aux | grep -v 'grep' | grep 'firefox-bin' | awk '{printf $3 "\t" $4}')"
echo -e cpumem
> 1.1 4.40.0 0.10.0 0.0 
```

我猜它正在收集 3 条记录，但我只是不知道从哪里来。

我正在使用 grep -v 'grep' 过滤掉任何其他 grep 进程，有人可以提供任何建议或更可靠的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:46:16.843

也许您有 3 条记录，因为 3 条 firefox 正在运行（或者一条正在运行，并且它本身正在线程化）。

`ps`您可以通过提供和选项来选择进程来避免 grep 混乱。例如，`-C`按名称选择进程。与`ps -C firefox-bin`您一起获得的只有 Firefox 进程。但是，当有多个进程时，这根本没有帮助。

（你也可以使用 ps 选项只输出你想要的列，所以你的行就像

```
ps -C less --no-headers -o %cpu,%mem 
```

）。

对于三重记录，你必须想出一个解决方案，应该发生什么，在哪里运行不止一个。在具有线程化程序的多用户环境中，总会出现一种情况不止一个进程。有许多可能的解决方案没有人可以帮助您，正如您没有说的那样，您将如何处理它。可以考虑这样的解决方案，例如仅从一个用户中选择，并且仅从具有最低 pid 的用户中选择，或者在组的情况下选择进程领导者，以更改封闭的 bash 脚本以使用循环来处理多个值或使其当 ps 返回多个结果时，工作方式有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:47:19.673

我无法重现该问题，但为了帮助您调试，请尝试在您的 awk 命令中打印 $11，这将告诉您它正在谈论什么进程

cpuem="$(ps aux | grep -v 'grep' | grep 'firefox-bin' | awk '{printf $3 "\t" $4 "\t" $11 "\n"}')" echo -e cpuem

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:02:50.077

这实际上是对输出显示的简单修复；在您的`echo`语句中，将变量用双引号括起来：

```
echo -e "$cpumem" 
```

如果不使用双引号，则不会通过将换行符转换为单空格（或空值）来保留换行符。使用引号，输出时保留变量的原始文本。

如果您的输出包含多个进程（即 - 多行），这意味着您`grep`实际匹配的多行。有可能正在运行子进程`firefox-bin`，也许是插件/容器？使用`ps aux`，该`11th`列将告诉您实际过程是什么，因此您可以将您的更新`awk`为以下（用于调试）：

```
awk '{printf $3 "\t" $4 "\t" $11}' 
```

# php - 在 PHP 中为整数范围提供文本标签

> ID：12136646
> 
> 赞同：1
> 
> 时间：2012-08-27T05:31:46.723
> 
> 标签：php

我正在尝试采用简单的数字范围（在这个项目的示例中，我正在为每个用户使用不同的钱增量。顺便说一下，假钱......）并将它们分组到可以公开显示的类中，而不是绝对数。

下面是一个粗略的代码示例，用于编写这个函数作为示例：

```
<?
$money=500001;

if($money > 0 AND $money < 5000) {
    $class = 'Poor';
} elseif ($money >= 5000 AND $money < 25000) {
    $class = 'Lower Class';
} elseif ($money >= 25000 AND $money < 100000) {
    $class = 'Middle Class';
} elseif ($money >= 100000) {
    $class = 'Upper Class';
}
echo $class;
exit();
?> 
```

现在，我知道这个函数会起作用，但编写它似乎是一种绝对糟糕的方式，因为如果添加更多的 $class'，它就会变得太长。

现在我的问题是：有没有更短的方法来写这个？可能使用 range() 和/或值数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:44:35.090

我会去做这样的事情：

```
function getClass($sal){
    $classes = array(5000=>"poor", 25000=>"Lower Class", 100000=>"Middle Class");
    foreach ($classes as $key => $value) {
        if($sal < $key){
            return $value;
        }
    }
    return "Upper Class";
}

$salary = 90000;
$sal_class = getClass($salary);    
echo "salary class = $sal_class\n"; 
```

**输出**：
sal = 中产阶级

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:56:20.180

有点类似于上面的答案，但更好。我会建议使用 OO 方法。

```
Class Foo {
    protected $class = array(
        array("poor", 0, 5000),
        array("medium", 5000, 25000)
    );

    function get_class($amount) {
       foreach ($this -> class as $key => $value) {
           if($amount > $value[1] && $amount < $value[2]) {
              return $value[0];
           }
       }
       return null;
    }

    function add_class(array $arr) {
        $this -> class[] = $arr;
    }
} 
```

**用法：**

```
$obj = new Foo();
$obj -> get_class(6000); //Outputs: medium
$obj -> add_class(array("rich", 25000, 50000)); //Add a new class
$obj -> get_class(35000); //Outputs: rich 
```

# oop - 面向对象；包含数据的类

> ID：12136647
> 
> 赞同：1
> 
> 时间：2012-08-27T05:32:02.980
> 
> 标签：oop

这不是一个真正的 OOP 问题，只是想就我的程序采取的最佳方式发表意见。

真的很简单：假设我有一个员工类，该类具有构成员工的变量和方法。

我的问题是如何存储“员工数据”（数据，而不是对象）；这很简单，我可以创建一个扩展 EMPLOYEE 的 JOHN 类并在那里添加数据。

但我读过（实际上不确定在哪里）在类中存储简单数据不好？？因为如果你扩展一个类，你还应该在其中添加其他功能。

我提出的解决方案有缺点吗？还是有更好的方法来“存储”数据。注意：假设我无法打开外部文件，我必须在代码中添加我拥有的任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:53:52.677

好的：

1）“类”是创建“对象”的“模板”。

一个类不包含任何数据——一个类*实例*（又名“对象”）包含数据。

2) “Employee”的一个实例可能是一个成员名称（成员数据）为“John”的对象。

您不会“扩展” Employee 来创建“John”；您将创建一个名为“John”的“对象”。

3）但是，您可以将员工扩展为“经理”类。

4）为了回答你原来的问题，*当然*可以设计一个“类”来保存“数据”。该类的每个*对象都将包含该数据。*

# ios - 如何在 iOS 中打开 .svg 文件？

> ID：12136652
> 
> 赞同：4
> 
> 时间：2012-08-27T05:32:52.387
> 
> 标签：ios

我必须创建必须在 iOS 项目中打开 .svg 扩展文件的视图。我对这个 .svg 扩展名有一些疑问

1.  我们可以直接在 iOS 中打开 .svf 文件，如 .png 或任何其他图像吗？
2.  或者我们必须使用任何不同的东西来打开这个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T05:39:49.033

您不能将 .svg 作为图像加载，但您可以`UIWebView`将 SVG 作为内容加载，因为 iOS 浏览器可以渲染 SVG。

另请参阅以下问题：[How to render SVG images in iphone without uiwebview?](https://stackoverflow.com/questions/6610419/how-to-render-svg-images-in-iphone-without-uiwebview) ,[如何使用 iPhone SDK 直接加载矢量图像？](https://stackoverflow.com/questions/1957282/how-can-i-load-vector-image-directly-with-iphone-sdk)，[如何在 iphone 中渲染各种 svg 文件？](https://stackoverflow.com/questions/6624070/how-to-render-all-kind-of-svg-files-in-iphone)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T16:33:45.957

[PocketSVG](https://github.com/arielelkin/PocketSVG)将允许您显示和操作 SVG 文件的行。

```
PocketSVG *myBezier = [[PocketSVG alloc] initFromSVGFileNamed:@"BezierCurve1-iPad"];    
UIBezierPath *myPath = myBezier.bezier;

CAShapeLayer *myShapeLayer = [CAShapeLayer layer];
myShapeLayer.path = myPath.CGPath;

[self.view.layer addSublayer:myShapeLayer]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T14:44:41.440

为了完成这个答案，现在[SVGKit](https://github.com/SVGKit/SVGKit)处理完整的 SVG 文件并将它们渲染为图像。

您还可以操纵路径并捕获触摸路径。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-23T19:27:18.387

从 Xcode 12 开始，您可以在 Assets Catalog 中添加图像并执行此操作。

```
let image = UIImage(named: "SomeSVGImageInYourAssetsLibrary") 
```

这可用于

> macOS 10.15 或更高版本、iOS 13 或更高版本、iPadOS 13 或更高版本

参考：[https ://developer.apple.com/documentation/xcode-release-notes/xcode-12-beta-release-notes](https://developer.apple.com/documentation/xcode-release-notes/xcode-12-beta-release-notes)

# php - PHP/SQL：框架查询构建与字符串连接

> ID：12136654
> 
> 赞同：0
> 
> 时间：2012-08-27T05:33:00.700
> 
> 标签：php, sql, performance, frameworks

考虑两种查询数据库的方法：

使用框架（Yii）：

```
$user = Yii::app()->db->createCommand()
->select('id, username, profile')
->from('tbl_user u')
->join('tbl_profile p', 'u.id=p.user_id')
->where('id=:id', array(':id'=>$id))
->queryRow(); 
```

使用字符串连接（分隔 SQL 语句的各个部分）：

```
$columns = "id,username,profile"; // or =implode(",",$column_array);
//you can always use string functions to wrap quotes around each columns/tables
$join = "INNER JOIN tbl_profile p ON u.id=p.user_id";
$restraint = "WHERE id=$id ";//$id cleaned with intval()
$query="SELECT $columns FROM tbl_user u {$restraint}{$join}";
//use PDO to execute query... and loop through records... 
```

用于分页的字符串连接示例：

```
$records_per_page=20;
$offset = 0;
if (isset($_GET['p'])) $offset = intval($_GET['p'])*$records_per_page;
Squery="SELECT * FROM table LIMIT $offset,$records_per_page"; 
```

哪种方法性能更好？

*   PHP 的 PDO 允许代码可移植到不同的数据库
*   第二种方法可以包装在一个函数中，因此不会重复任何代码。
*   字符串连接允许以编程方式构建复杂的 SQL 语句（通过操作字符串）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:20:38.077

使用适合您和您的项目团队的选项。编写框架是有原因的，所以如果适合就使用它们，但如果不适合（并且有理由不这样做），那么就会放弃。

我不知道 Yii，但如果你看很多框架，他们所做的只是在一天结束时从各个部分构建一个字符串查询，希望利用参数化，但并非总是如此。因此，关于速度，字符串 concat 可能是“最快的” - 但您不太可能真正看到秒表的差异（如果您需要 1000 个查询，您可以进行基准测试，但其他功能（例如更好的错误检查或缓存）可能不公平减慢或加快 hte 结果）。

但是框架的一个优势是它们可以添加上下文相关的缓存，并且知道当您更新表 X 时需要删除查询 A、D 和 F 的缓存，但是查询 B、C 和 E 都很好。

您还需要担心“易于阅读”、“调试”和“功能”。上面的例子更容易阅读，这在共享项目中很重要。

您还需要考虑准备好的语句——框架是否使用它们？如果是这样，它是否允许您重新使用它们（而不是仅仅将它们用于语法目的）。

但是框架可以做子选择吗？它可以在“JOIN ON”中进行参数化吗？如果不是，则使用 PDO 进行字符串连接可能更合适。

这不是一个硬性和快速的答案 - 但希望能提供您需要考虑的所有要点。

建议：使用框架，除非你真的注意到它很慢，使用太多内存或者有其他很好的理由不这样做。

# language-agnostic - 网络任务自动化

> ID：12136656
> 
> 赞同：0
> 
> 时间：2012-08-27T05:33:31.093
> 
> 标签：language-agnostic, web

这个问题与此链接有关：

[http://aeronav.faa.gov/afd.asp?cycle=afd_26JUL2012&eff=07-26-2012&end=09-20-2012#results](http://aeronav.faa.gov/afd.asp?cycle=afd_26JUL2012&eff=07-26-2012&end=09-20-2012#results)

给你一些背景知识，我没有网络编程经验。然而，我精通 C/C++，但我不介意学习 Web 语言来做我需要做的事情。

上面的链接包含一个选择机场的表格。选择机场并单击搜索链接后，页面将向下滚动，并填充一个下载包含机场信息的 pdf 文件的链接。

现在，任务：我有一个包含机场列表的 Excel 表（当然还有导航到机场所需的字段，例如城市、名称和州）。

我想实现一个脚本/程序，该脚本/程序自动使用每个机场的 excel 表中的信息填充上述链接中的字段，并将生成的 pdf 链接下载到本地指定位置。如果已经存在执行此类操作的工具，我显然更愿意使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:23:31.790

您可以为此使用的一种脚本语言是[AutoIt](http://www.autoitscript.com/site/autoit/)。

使用它，您可以编写鼠标应移动到的位置、键盘应键入的内容以及控制所有内容的脚本。您将不得不调整时间，因为某些搜索和下载会比其他搜索和下载花费更长的时间。

但是，与其每次在 Web 表单中输入不同的信息，如果您可以确定他们对 .pdf 文件使用的命名约定，您可能会节省一些时间。

或者，您可以从书中下载每个 .pdf 页面，然后运行一个程序来获取您对特定机场感兴趣的文件。（您可以使用 auto-it 进行下载。我可能会使用 c# 和 WebBrowser 对象，但我习惯于 c#）。

例如，根据西北[传说](http://aeronav.faa.gov/pdfs/nw_front_26JUL2012.pdf)，目录从第 22 页到第 61 页（含）列出了爱达荷州。

这可能意味着您可以只预下载：

```
http://aeronav.faa.gov/pdfs/nw_22_26JUL2012.pdf
http://aeronav.faa.gov/pdfs/nw_23_26JUL2012.pdf
http://aeronav.faa.gov/pdfs/nw_24_26JUL2012.pdf
...
http://aeronav.faa.gov/pdfs/nw_61_26JUL2012.pdf 
```

然后继续去蒙大拿州等。

搜索爱达荷州的特定机场需要在爱达荷州的 .pdf 文件中搜索机场名称。

无论如何，这可能就是我会做的事情。

# c - malloc和free的使用

> ID：12136658
> 
> 赞同：1
> 
> 时间：2012-08-27T05:33:39.140
> 
> 标签：c, malloc

我正在尝试将 mp4 视频解码为 YUV 帧。我想为每个要解码的帧分配内存，如果我连续分配内存并释放它是否可以。这样做有什么问题吗（即，使用`malloc`and有争议地分配和释放内存`free`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T05:36:20.427

我最好分配一次足够的缓冲区并重用相同的缓冲区。除了一些性能损失之外，重复的 malloc-free 不会造成任何问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T05:36:28.700

从技术上讲，只要您不尝试访问已经释放的内存，这根本没有问题。

另一方面，重复进行所有这些调用会产生开销，您可以（并且应该）通过提前分配足够数量的内存，然后在最后释放它来避免。

重复分配/释放的方法实际上应该只在内存非常紧张的情况下使用，否则，保留一大块内存并根据需要自行分配部分内存。或者，如果可能，重用相同的内存块。

更新：正如@EricPostpischil 在有用的评论中提到的（见下文），malloc 是一个*库*调用，而不是仅在当前堆耗尽时才会发生的系统调用。有关这方面的更多信息，请参阅[此说明](http://bit.ly/NrxZi0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:05:56.587

如果您分配的对象具有相同的大小，则应该不会对性能造成太大影响。如有疑问，请测量它。

正确跟踪分配的内存通常并非易事，因此分配一次缓冲区并在整个程序中使用它可能更容易。但是这里的主要规则应该是使用与您的程序逻辑相对应的东西，最容易阅读和维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T05:42:47.920

不断地分配和释放不会破坏程序，但会导致很多性能问题，特别是因为你说你将在每一帧都这样做。分配和释放通常会导致性能明显下降。

您可以做的只是 malloc 一次内存，然后为每个帧重新使用相同的分配。如果您在读取下一帧之前对帧完成了您想要的操作之后不需要存储内存，那么没有任何问题。

# joomla - joomla中如何自定义登录页面的布局

> ID：12136662
> 
> 赞同：0
> 
> 时间：2012-08-27T05:34:12.777
> 
> 标签：joomla

只是想改变登录页面的布局与其他页面相同，我想删除左侧边栏并显示主菜单，少量图像和文本。您可以看到当前的布局。访问[http://www.egovtsolutions.net/index.php/component/users/?view=login](http://www.egovtsolutions.net/index.php/component/users/?view=login)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:40:39.247

您必须从该模块中选择显示选项。如果您想在该位置启用某些模块，只需检查该模块中的菜单名称。

如果您不希望登录页面中有任何模块，只需取消选择该页面中的所有模块。然后，只有您最好根据自己的意愿寻找登录提示。

尝试这个....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:25:06.430

我不知道您正在使用哪个版本的 joomla。但是这个[链接](http://www.artisteer.com/?p=help_joomla)涵盖了从 joomla 1.5 到 1.7。

您应该尝试为您的*登录*模块提供“extra2”或“position-29”。

关键是您分配的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:10:30.370

您可以使菜单模块显示在所有页面上，而不是在选定页面上...然后菜单将显示在所有页面上。

# actionscript-3 - AS3：获取计算机登录名

> ID：12136664
> 
> 赞同：0
> 
> 时间：2012-08-27T05:34:16.347
> 
> 标签：actionscript-3

只是一个简单的问题，我用谷歌搜索了一下，但一切都导致了其他 AS3 的花絮。

是否可以从 AS3 访问用户的计算机登录名？我不会这么认为，但鉴于我们可以直接从计算机访问其他信息（例如日期），我只是想知道这是否可能。

谢谢！哈利。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:38:36.470

在网络上，我相信您无法获得这样的信息。

如果您使用 AIR 在桌面上工作，您可以使用以下命令检索用户的目录

```
File.userDirectory 
```

及其名称应与用户的名称相同

```
File.userDirectory.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:27:21.483

> 我很想知道用户的登录名，还有他的密码。

我认为能够获取此类信息是不可取的，尤其是从客户端脚本中。这对于使用[Windows Authentication的](http://msdn.microsoft.com/en-us/library/eeyk640h.aspx)*ASP.NET*是可能的。用户通过身份验证后，您可以使用. 应该可以将该名称写入前端，您可以使用[ExternalInterFace将其传递给 Flash](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)`User.Identity.Name`

如果您使用的是 Adob​​e Air，则更容易获取用户名，因为您可以访问用户文件系统。请参阅[在 Adob​​e Air 中获取当前登录的操作系统用户](https://stackoverflow.com/questions/1376/get-the-current-logged-in-os-user-in-adobe-air)。

顺便说一句，在网络上，询问用户他的（用户）名称是什么并不是一个不寻常的问题。

# backbone.js - 在方法中从 Backbone.Model 获取默认值？

> ID：12136665
> 
> 赞同：7
> 
> 时间：2012-08-27T05:34:43.543
> 
> 标签：backbone.js

我正在尝试获取要在方法下使用的默认值。似乎`Model.get()`不能在方法本身中使用。这两个我都试过了`console.log`，显示变量未定义。

```
define(['jquery', 'Underscore', 'Backbone'], function($, _, Backbone){
    var Game = Backbone.Model.extend({
        //default values for the function
        defaults: {
            rows : 9,
            cols : 8,
            baseScore : 100, 
            numBlockTypes : 6, 
            baseLevelTimer : 60000,
            baseLevelScore : 1500,
            baseLevelExp : 1.05, 
        },
        initialize: function(){
            console.log(this.get(numBlockTypes));
            //console.log(numBlockTypes);
        }
    }),

    game = new Game;

    return game;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-16T07:07:39.830

根据您的问题（获取**默认**值），答案应该是

```
this.defaults.numBlockTypes 
```

提到的方法

```
this.get("numBlockTypes") 
```

返回**当前**（设置）值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T05:42:56.740

@Elvis D'Souza 和我同时想出了相同的答案。

**需要报价**

```
console.log(this.get('numBlockTypes')); 
```

# git - 所有 gerrit 评论的测试系统

> ID：12136667
> 
> 赞同：0
> 
> 时间：2012-08-27T05:34:51.930
> 
> 标签：git, svn, process, gerrit

我们正在从 svn 切换到 git。由于我们的流程在很大程度上依赖于评论，因此我们将来可能会为此引入 gerrit。为了更好地理解我的问题，让我告诉你我们现在如何处理 svn（简化）：

1.  项目经理有一堆来自客户的请求。与创建技术规范的首席开发人员讨论这些请求
2.  然后将待办事项分解为最大值。2天工作看板卡
3.  然后开发人员单独处理每张卡（所有提交都参考看板卡）
4.  开发人员完成后，项目经理检查卡片
5.  如果没问题，则对更改进行代码审查和合并（实际上是樱桃采摘）并合并到发布分支

到目前为止，一切都很好。这是使用 gerrit 可以做到的。我现在有两个问题：

1.  一张看板卡可能不足以让项目经理测试他的用例。一张卡可能只是“用户界面更改”，另一张卡可能只是“更改逻辑”。单独测试它们没有任何价值（不好的例子，但仍然......）
2.  如果我目前没有所有可测试的更改的“分支”，那么每个项目经理都需要他/她自己的测试系统，这对我们的系统管理员来说是不行的……</li>

有人有类似的过程吗？你是怎么解决的？

谢谢，乔治。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T14:47:38.613

在我看来，您需要一些功能分支。看板卡 1 功能分支（用户界面）派生自最新版本分支（在您的示例中）

开发人员 1 在 1 次或多次提交中完成看板卡。如果是多个提交，我建议在功能分支上对它们进行 1 对 1 审查

看板卡 2 功能分支（逻辑）也是从最新版本分支派生的（在您的示例中）

开发人员 2 在 1 次或多次提交中完成了看板卡。如果是多个提交，我建议在功能分支上对它们进行 1 对 1 审查

如果只能一起测试，则将逻辑分支合并到用户界面分支并进行验证和测试。如果它通过了，你将用户界面分支合并到发布分支中，软件应该没问题

如果发布分支在开发过程中一直在向前推进，您应该在测试之前将最新的发布分支合并到用户界面分支中。

我希望这有帮助

如果这些测试系统无论如何都由 Jenkins 触发和控制，那么您可以将 jenkins 配置为“侦听”多个分支并在您推动对这些分支进行审查时触发测试

# postgresql - 已安装 postgres.app 但哪个 psql 显示 /usr/bin/psql 而不是输入 zshrc 的路径

> ID：12136669
> 
> 赞同：5
> 
> 时间：2012-08-27T05:35:14.057
> 
> 标签：postgresql, osx-mountain-lion, zshrc

postgres.app 的安装位置、运行位置存在问题，但是当我输入 which psql 时，我会收到“/usr/bin/psql”，而不是 postgres.app 期望的正确路径。当我回显我的 PATH 时，我得到以下信息：

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin:/Users/username/.rvm/bin:/usr/local/mysql/bin:/Applications/Postgres.app/Contents/MacOS/bin:/Users/username/.rvm/gems/ruby-1.9.3-p0/bin:/Users/username/.rvm/gems/ruby-1.9.3-p0@global/bin:/Users/username/.rvm/rubies/ruby-1.9.3-p0/bin:/Users/username/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/Applications/MAMP/Library/bin/mysql:/Users/username/.rvm/bin 
```

正如您在我的路径中看到的那样，但我不知道为什么它不会选择正确的 psql。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T05:37:04.917

如果`psql`两者都在`/usr/bin`和中，则根据您的规范，将首选`/Applications/Postgres.app/Contents/MacOS/bin`in 中的一个。考虑将条目放在之前：`/usr/bin``PATH``/Applications/...``/usr/bin`

```
/Applications/Postgres.app/Contents/MacOS/bin:/usr/bin:/bin:/usr/sbin:/sbin:... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T16:49:44.257

您还可以编辑 /etc/paths 并确保 /Applications/Postgres.app/Contents/MacOS/bin 位于顶部。更多信息： [https ://stackoverflow.com/a/6772559/2643002](https://stackoverflow.com/a/6772559/2643002)

# php - 如何拆分 Wordpress 查询？

> ID：12136670
> 
> 赞同：0
> 
> 时间：2012-08-27T05:35:56.137
> 
> 标签：php, wordpress

我一直在寻找整个网络，我什至试图聘请自由职业者寻求帮助，但没有运气。在搜索时，我发现[如何从 wordpress 中的选定类别中获取热门帖子？](https://stackoverflow.com/questions/4477076/how-to-get-popular-posts-fro-selected-categories-in-wordpress)& [http://www.queness.com/code-snippet/6546/how-to-display-most-popular-posts-from-a-specific-category-in-wordpress](http://www.queness.com/code-snippet/6546/how-to-display-most-popular-posts-from-a-specific-category-in-wordpress)这基本上就是我想要的，但我想要我从中获得的信息被拆分，以便我可以对帖子进行排名。

```
<?php
$args=array(
  'cat' => 3, // this is category ID
  'orderby' => 'comment_count',
  'order' => 'DESC',
  'post_type' => 'post',
  'post_status' => 'publish',
  'posts_per_page' => 6, // how much post you want to display
  'caller_get_posts'=> 1
);
$my_query = null;
$my_query = new WP_Query($args);
if( $my_query->have_posts() ) { ?>
<ul>
<?php while ($my_query->have_posts()) : $my_query->the_post(); ?>
<li><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php    the_title_attribute(); ?>"><?php the_title(); ?></a></li>
<?php  endwhile; ?>
</ul>
<?php }

wp_reset_query(); ?> 
```

使用该代码，它会通过评论获得最受欢迎的帖子，而我想要做的基本上是获取结果并为其添加排名，如下面的示例。

```
#1 - post 1
#2 - post 2
#3 - post 3
#4 - post 4
#5 - post5 last post 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:55:09.723

可能这个想法会对你有所帮助。

使用 get_comments_number( $post_id )[函数](http://codex.wordpress.org/Template_Tags/get_comments_number)

要获取评论数量，然后执行 if else 循环以显示排名。

```
$num_comments = get_comments_number(); // get_comments_number returns only a numeric value

if ( comments_open() ) {
if ( $num_comments == 0 ) {
    $rating= 0 ;
} elseif ( $num_comments > 1 ) {
    $rating= 1 ;
} else {
    $rating= 0 ;
}
} 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-16T09:24:24.500

根据您当前的问题，我了解以下内容：

1.  您想从评论最多的 WP 数据库帖子中查询。
2.  您希望向访问者显示收到的帖子的排名。排名取决于帖子的评论数量。

所以你的结果可能是：

**1 个帖子 A（评论数 500）**

**2 帖子 B（评论数 499）**

**3 Post Z（评论数 200）**

我会这样做：

```
<?php
function get_popular_posts()
{

$sql="SELECT comment_count, guid AS link_to_post, post_title
FROM wp_posts 
WHERE post_status = "publish" AND post_type = "post"
ORDER BY comment_count DESC
LIMIT 5"
return $wpdb->get_results($sql, OBJECT)

}   
$post_objects = get_popular_posts();
$i = 1;
foreach($post_objects as $object)
{
echo 'Post: ' . $i . '#' . ' ' . $post_title . ' ' . $link_to_post . ' ' . $comment_count;
$i++;
}
?> 
```

没有测试代码。但它应该从数据库中获取五个“顶级帖子”。出于解释原因，留在了 comment_count 中。

# c# - 我正在使用 edmx 从 C#.Net 中的数据库中获取数据。有没有办法在不引导整个对象的情况下获取单个列？

> ID：12136676
> 
> 赞同：2
> 
> 时间：2012-08-27T05:36:56.893
> 
> 标签：c#

我正在使用 edmx 从 C#.Net 中的数据库中获取数据。为此，我必须启动整个对象。有没有办法在不引导整个对象的情况下获取单个列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:56:17.070

除了 Habib 的回答，您不必创建匿名类型。您只需选择所需的列：

```
var result = db.YourTable
    .Select(x => x.YourColumn)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:38:24.230

您可以创建一个[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)Using`select new`以从表中仅选择一列。

```
var result = from t in db.yourTable
             select new 
                { 
                 ID = t.ID
                }; 
```

上面的查询将为您提供一个匿名对象，其中仅包含`ID`来自 的列`yourtable`。您还可以得到多个列，或者您可以将结果集投影到您的自定义类型

# android - 未在服务中获取共享首选项的更新值

> ID：12136677
> 
> 赞同：4
> 
> 时间：2012-08-27T05:37:01.737
> 
> 标签：android, android-widget, android-activity, android-service

我正在从小部件启动的活动中为共享偏好存储一些价值。如果我从同一个小部件启动的服务中检索该值，则它不是更新的。我得到了共享偏好中的先前值。即使我在共享首选项 xml 中检查了该值，我也在那里看到了更新的值。为什么会这样。我知道widget和activity是两个进程，是这个原因吗？​

```
SharedPreferences preferences = getSharedPreferences("preferences_target_value", Context.MODE_PRIVATE);

String targetValue = preferences.getString("preferences_target_value", "0");

System.out.println("targetValue "+targetValue);` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T07:53:01.257

这些值按进程缓存。

如果您在 Android > 2.3 上运行，则必须指定`MODE_MULTI_PROCESS`何时调用`getSharedPreferences ()`. 如果您在 Android < 2.3 上运行，那么它应该可以正常工作。如果您在 Android 2.3 上运行，则共享首选项中存在错误，并且无论您做什么，它都无法在多个进程中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:42:21.930

在更新值后使用`commit()`，调用它以在编辑器中执行任何更改

```
prefsEditor.commit(); 
```

更改您的代码而不是这个

```
SharedPreferences preferences = getSharedPreferences("preferences_target_value", Context.MODE_PRIVATE); 
```

对此

```
SharedPreferences preferences = getSharedPreferences("preferance name", Context.MODE_PRIVATE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-09T17:16:17.437

在清单文件中尝试删除

```
android:process=":my_process" 
```

从服务。希望它会奏效。

# android - 检测是否在 Android 上运行媒体扫描仪

> ID：12136681
> 
> 赞同：4
> 
> 时间：2012-08-27T05:37:31.687
> 
> 标签：android

有什么方法可以检测 MediaScanner 现在是否正在运行。

例如，如果 mediascanner 正在运行，线程将休眠 200 英里。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T05:49:34.320

使用下面的代码。

```
 public static boolean isMediaScannerScanning(ContentResolver cr) {
        boolean result = false;
        Cursor cursor = query(cr, MediaStore.getMediaScannerUri(),
               new String [] {MediaStore.MEDIA_SCANNER_VOLUME},
                null, null, null);
        if (cursor != null) {
            if (cursor.getCount() == 1) {
                cursor.moveToFirst();
                result = "external".equals(cursor.getString(0));
            }
            cursor.close();
        }    
        return result;
    } 
```

它是从 AOSP 的 ImageManager.java 复制而来的。

# javascript - Jqgrid - 隐藏列不起作用

> ID：12136689
> 
> 赞同：0
> 
> 时间：2012-08-27T05:38:30.780
> 
> 标签：javascript, jquery, jqgrid

我的 colmodel 定义如下所示：

```
<c name='NewShippingAddressCity' index='NewShippingAddressCity' align='left' sortable='false' hidden='true' width='150'></c> 
```

但我不知道为什么这个专栏仍然可见。我应该改变什么来隐藏它？

我使用 jqgrid 4.4.0

编辑 1 看起来从某种原因隐藏属性变为“未定义”，因此 te javascript 将其设置为 false 而不是 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:55:56.953

默认情况下，隐藏的值为 false。尝试在不带引号的情况下给出它，因为我无法检查您的整个代码，请点击此[链接](https://stackoverflow.com/questions/1661800/hidden-columns-in-jqgrid) ，答案中有很多方法可以为您提供功能。

或者，您可以使用 jqgrid 的 hideCol 属性。请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)

# c# - c#为什么intersect方法返回这个？

> ID：12136692
> 
> 赞同：-1
> 
> 时间：2012-08-27T05:39:11.677
> 
> 标签：c#, arrays, linq, intersect, except

我有两个数组，数组 testAnswer 保存“考试答案”，数组 inputAnswers 保存“学生考试答案”。

我正在尝试显示正确和不正确的答案。换句话说，试图显示 testAnswer 有哪些值 inputAnswers 没有（不正确的答案），以及两个数组共有的值（正确的答案）。

为此，我使用了 .Except 和 .Intersect 使用 linq 的方法；但是我得到了这个奇怪的输出：

```
B, D, A, C 
```

任何人都可以帮助我，我已经在这个地方很久了！

我的代码：

```
private void button1_Click(object sender, EventArgs e)
  {
      string[] testAnswer = new string[20] { "B", "D", "A", "A", "C", "A", "B", 
           "A", "C", "D", "B", "C", "D", "A", "D", "C", "C", "B", "D", "A" };
      string a = String.Join(", ", testAnswer);

     // Reads text file line by line. Stores in array, each line of the 
     // file is an element in the array
      string[] inputAnswer = System.IO.File
              .ReadAllLines(@"C:\Users\Momo\Desktop\UNI\Software tech\test.txt");
      string b = String.Join(", ", inputAnswer);

      var inter = inputAnswer.Intersect(testAnswer);
      foreach (var s in inter)
       {
          listBox1.Items.Add(s);
        }
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:45:36.770

`Intersect`确实设置了交集，因此它会丢弃重复的值。如果要比较答案，更好的选择是并行遍历数组：

```
for(int i=0; i<testAnswer.Length; i++) {
    if(testAnswer[i] == inputAnswer[i])
        listBox1.Items.Add(inputAnswer[i]); // or testAnswer[i], as appropriate
} 
```

# sqlalchemy - 在 SQLAlchemy 中，DBSession 和 DBSession() 有什么区别？

> ID：12136694
> 
> 赞同：1
> 
> 时间：2012-08-27T05:39:20.007
> 
> 标签：sqlalchemy

```
DBSession = scoped_session(sessionmaker(bind=engine)

#1
DBSession.add(someobject)
DBsession.commit()

#2
session = DBSession()
session.add(someobject)
session.commit() 
```

**#1**和**#2**有什么区别？

我在我的 Pyramid 应用程序中使用**#1**并且有很多“MySQL 已消失”的例外情况

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T07:40:47.537

没有任何作为 sqlalchemy[使大多数 Session 方法也可用作](http://docs.sqlalchemy.org/en/rel_0_7/orm/session.html?highlight=scoped_session#sqlalchemy.orm.scoped_session)ScopedSessions 的类方法。这包括`add()`和`commit()`。

# jsf - 在变量中缓存基本 url #{request.contextPath} 以在页面和包含的页面上多次使用

> ID：12136695
> 
> 赞同：1
> 
> 时间：2012-08-27T05:39:34.697
> 
> 标签：jsf, jsf-2

我需要缓存`#{request.contextPath}`到一个变量中，以便它可以在一个页面中多次使用。以前，当我使用 Mojarra 2.1.3 时，我可以使用`ui:param`它来缓存整个页面和当前页面中所有包含页面的表达式值。但[它不适用于 Myfaces（请参阅问题）](https://issues.apache.org/jira/browse/MYFACES-3595)，因为它`<ui:param>`应该是`<ui:include>`或`<ui:define>`工作的直接子级。

有人建议我使用`c:set`，但我想尽可能避免使用 JSTL 标签。我的用例推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:40:01.050

只需使用`<c:set>`. 在这种特殊情况下，它不会损害任何东西。

* * *

> *但我想尽可能避免使用 JSTL 标签。*

看起来您不**明白**为什么以及何时应该（不）使用 JSTL 标记，因此将 JSF 中所有 JSTL 标记的使用过度概括为永远“不好”。你不应该这样想。仔细阅读此答案以获得启发：[JSF2 Facelets 中的 JSTL ... 有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense/3343681#3343681)

# ruby-on-rails - 使用嵌套属性表创建表单时遇到问题

> ID：12136697
> 
> 赞同：0
> 
> 时间：2012-08-27T05:39:38.427
> 
> 标签：ruby-on-rails, nested-forms, nested-attributes

我有`Report`很多嵌套`Value`对象：

报告类

```
class Report < ActiveRecord::Base
  attr_accessible :comments
  has_many :values
  accepts_nested_attributes_for :values
end 
```

价值等级

```
class Value < ActiveRecord::Base
  attr_accessible :value, :assessed_user_id, :behaviour_id

  belongs_to :assessed_user
  belongs_to :behaviour

  belongs_to :report

end 
```

我需要一个可以接受 a`Report`及其相关`Value`对象矩阵的表单，如下所示：

```
| 用户 | 行为1 | 行为2 | 行为3 |
| 鲍勃 | ___ | ___ | ___ |
| 简 | ___ | ___ | ___ |
| 吉尔 | ___ | ___ | ___ |

```

我是 Rails 新手，我已经阅读了有关嵌套属性的所有内容，并且我已经尝试过一百万种`semantic_form_for`使用 formtastic 的变化和可能性，但我似乎无法将正确的`value.value`对象放置在正确的位置或将它们的`behaviour`和设置`assessed_user`为隐藏字段，但我似乎无法让它工作。

下面显示了应该是隐藏字段的内容，我无法让我的创建（跟随）接受它。此外，我在子表单元素上看不到任何索引：

```
<%= semantic_form_for @report do |f| %>
  <table>
    <tr>
      <th>User</th>
    <% @behaviours.each do |behaviour| %>
      <th><%= behaviour.name %></th>
    <% end %>
    </tr>
    <% index = 0 %>
    <% @members.each do |member| %>
      <tr>
        <td><%= member.first_name %> <%= member.last_name %></td>
        <% @behaviours.each do |behaviour| %>
          <% @report.values[index].behaviour_id = behaviour.id %>
          <% @report.values[index].assessed_user_id = member.id %>
          <td>

              <%= f.inputs :behaviour_id, :as => :hidden, :for => @report.values[index] %>
              <%= f.inputs :assessed_user_id, :as => :hidden, :for => @report.values[index] %>
              <%= f.inputs :value, :for => :values, :for => @report.values[index] %>
              <% index = index + 1  %>
          </td>
        <% end %>
      </tr>
    <% end %>  

  </table>
  <%= f.inputs :comments %>

  <%= f.buttons %>
<% end %> 
```

报告控制器.rb

```
def create
  @report = Report.new( params[:report] )
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:19.073

你可以看看这个 Railscate esp [http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)

# cocoa - 归档一个 NSString 字典

> ID：12136700
> 
> 赞同：0
> 
> 时间：2012-08-27T05:39:54.273
> 
> 标签：cocoa

我想存档一个只包含 NSStrings 的字典，但是当我取消存档时，发生了错误：

> [NSKeyedUnarchiver initForReadingWithData:]: NSKeyedUnarchiver 无法解码非密钥存档

我的代码是：

```
- (IBAction)startArchive:(id)sender {
    NSString *path = [self pathForDataFile];
    NSMutableDictionary *ageDictionary= [NSMutableDictionary dictionary];
    [ageDictionary setValue:@"12" forKey:@"Jack"];
    [ageDictionary setValue:@"22" forKey:@"John"];
    [NSArchiver archiveRootObject:ageDictionary toFile:path];
}

- (IBAction)unarchive:(id)sender {
    NSString *path = [self pathForDataFile];
    NSDictionary *rootObject = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
    NSLog(@"%@",rootObject);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:11:06.953

原因是Unarchiver。您使用 NSArchiver 来存档。作为 unarchiver，您应该使用 NSUNarchiver。如果你使用 NSKeyedArchiver，你应该使用 NSKeyedUnarchiver。

你把他们弄糊涂了。

流动代码是测试工作：

```
 #import <Foundation/Foundation.h>

void startArchive() {
    NSString *path = @"/Users/dinosaur/Desktop/test.plist";
    NSMutableDictionary *ageDictionary= [NSMutableDictionary dictionary];
    [ageDictionary setValue:@"12" forKey:@"Jack"];
    [ageDictionary setValue:@"22" forKey:@"John"];
    [NSArchiver archiveRootObject:ageDictionary toFile:path];
}

void unarchive() {
    NSString *path = @"/Users/dinosaur/Desktop/test.plist";
    NSDictionary *rootObject = [NSUnarchiver unarchiveObjectWithFile:path];
    NSLog(@"%@",rootObject);
}

int main(int argc, char *argv[]) {
    @autoreleasepool {
        startArchive();
        unarchive();
    }
} 
```

==============

这是日志：

2012-08-27 14:03:11.511 无标题[7930:707] {杰克 = 12; 约翰 = 22; }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:45:22.620

您可以利用 NSDictionary 中对 plist 的“深度”支持（以及类似的“plist”类）。查看[writeToFile:atomically:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-CBHDBHDB)和[dictionaryWithContentsOfFile:](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-CBHEADHI)，它们（在一行中！）为您创建一个 plist 文件并将一个 plist 读入 NSDictionary；只要所有内容都是“plist 对象”（NSStrings、NSArrays、NSNumbers 等）。

# c# - Windows 服务 - 每 x 秒检查一次文件夹

> ID：12136703
> 
> 赞同：0
> 
> 时间：2012-08-27T05:40:29.080
> 
> 标签：c#, windows-services

我想第一次创建一个 Windows 服务，但只是对它的逻辑有疑问：

我想创建一个服务，每隔 x 秒轮询一个目录，读取此目录中的所有文本文件，将详细信息插入数据库，然后存档此文件。

我该怎么做才能让它每 x 秒运行一次？（其中 x 在配置文件中定义）。

我是否做一个循环，上面写着：

```
int interval = 5000;
while (TRUE) {
   //my logic
   Thread.Sleep(interval); //pause for 5 seconds
} 
```

这是实现这一目标的公认方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:46:41.233

您可以使用`FileSystemWatcher`而不是每 x 秒检查一次。每当创建、删除或更改给定文件夹中的文件或文件夹时，您都会收到通知

从 msdn检查[这里。](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:48:01.010

头韵，您可以使用`FileSystemWatcher`API。它在文件夹更改时触发一个事件。如果您在笔记本电脑上，这可以节省电池寿命。

[如何监视 Windows 目录的更改？](https://stackoverflow.com/questions/760904/how-can-i-monitor-a-windows-directory-for-changes)

# android - 不同版本的android选项菜单问题

> ID：12136706
> 
> 赞同：0
> 
> 时间：2012-08-27T05:40:33.797
> 
> 标签：android, android-layout, android-emulator, android-version

我创建了一个简单的菜单，其中包含两个选项，即“添加新联系人”和“设置”以及白色 png 图像。

所以现在如果我在 2.3.3 android OS 版本中运行，它看起来像下图：

![Android 2.3.3 选项菜单](../Images/93b33acd852e729ee573486a264e96af.png)

现在如果我在 2.2 android 操作系统中运行，那么它看起来像下图：

![在此处输入图像描述](../Images/648694618099366e623dc3af5db0a2cd.png)

所以现在如果我想在 android 2.2 中将背景设置为黑色，我该怎么做才能让图标可见。请给我关于这个问题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:33:19.767

处理选项菜单的最佳方法是对其进行自定义。

您可以自定义选项菜单，包括：

添加自定义字体

更改字体大小

更改字体颜色

将背景设置为可绘制资源（例如图像、边框、渐变）

要将背景更改为边框或渐变，您必须在 res 中创建一个名为 drawable 的资源文件夹，并在其中创建边框 XML 或渐变 XML。

这一切都可以通过编程方式完成，如下所示：

```
 public class CustomMenu extends Activity {   
/** Called when the activity is first created. */   
@Override  
public void onCreate(Bundle savedInstanceState) {   
    super.onCreate(savedInstanceState);     } 
public boolean onCreateOptionsMenu(android.view.Menu menu) { 
    MenuInflater inflater = getMenuInflater();  
    inflater.inflate(R.menu.cool_menu, menu);  
    getLayoutInflater().setFactory(new Factory() {  
        public View onCreateView(String name, Context context, 
                AttributeSet attrs) {   
        if (name.equalsIgnoreCase(                                             "com.android.internal.view.menu.IconMenuItemView")) { 
    try {  
        LayoutInflater li = LayoutInflater.from(context); 
        final View view = li.createView(name, null, attrs); 
        new Handler().post(new Runnable() { 
        public void run() {   
// set the background drawable if you want that or keep it default 
//either FOR image, border, gradient, drawable,etc.//   
        view.setBackgroundResource(R.drawable.myimage); 
        ((TextView) view).setTextSize(20);
        // set the text font and color  
        Typeface face = Typeface.createFromAsset(  
        getAssets(),"OldeEnglish.ttf");  
        ((TextView) view).setTypeface(face); 
        ((TextView) view).setTextColor(Color.RED);      }     }); 
        return view;      } 
        catch (InflateException e) {  
        //Handle any inflation exception here  
        } catch (ClassNotFoundException e) {    
        //Handle any ClassNotFoundException here    
                        }     }   
            return null;    }   }); 
           return super.onCreateOptionsMenu(menu);     } 
```

# postgresql - PostgreSQL 中的 to_char() 问题

> ID：12136709
> 
> 赞同：3
> 
> 时间：2012-08-27T05:41:17.113
> 
> 标签：postgresql, to-char

我有一个 PostgreSQL 表，其中包含一个名为`effective_date`且数据类型为整数（纪元日期）的字段。我想要做的是只选择具有我选择的有效日期的条目（我只想按月份查询）。我的查询如下，问题是，尽管该表确实有许多符合选择条件的条目，但它没有返回任何内容。

```
$query = "select    *
          from ". $this->getTable() ."
          where pay_stub_entry_name_id = 43
          AND to_char(effective_date, 'Mon') = 'Jul'
          AND deleted = 0"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:42:40.760

使用`extract(month from the_date)`而不是`to_char`. 请参阅[Pg 文档中的日期时间函数](http://www.postgresql.org/docs/current/static/functions-datetime.html)。

与`to_char`您一起，您将遇到各种案例、本地化等问题。

假设你的意思是数据类型`effective_date`是`timestamp`or `date`，你会写：

```
$query = "select    *
      from ". $this->getTable() ."
      where pay_stub_entry_name_id = 43
      AND extract(month from effective_date) = 7
      AND deleted = 0"; 
```

如果是`integer`这样 - 假设它是一个纪元日期 - 你必须将它转换为时间戳`to_timestamp`，然后使用`extract`它。请参阅`epoch`上面链接的文档中的部分，例如：

```
$query = "select    *
      from ". $this->getTable() ."
      where pay_stub_entry_name_id = 43
      AND extract(month from to_timestamp(effective_date)) = 7
      AND deleted = 0"; 
```

问题的直接原因是您`to_char(integer,text)`使用整数纪元日期调用。只有日期格式的`timestamp`版本；对其他人来说并不特别，所以它只是作为文字字符串输出。相比：`to_char``Mon``Mon`

```
regress=# SELECT to_char(current_timestamp, 'Mon');
 to_char 
---------
 Aug
(1 row)

regress=# select to_char( extract(epoch from current_timestamp), 'Mon');
 to_char 
---------
 Mon
(1 row) 
```

请记住参数化这些查询的真实版本，以帮助避免[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。

# php - 如果记录存在，我可以更新它，如果不存在，我可以在单个查询中为多行插入它吗？

> ID：12136711
> 
> 赞同：3
> 
> 时间：2012-08-27T05:41:36.077
> 
> 标签：php, mysql, sql

我正在尝试编写一个查询以使用'implode'以有效的方式插入一个包含许多值（比如1000）的数组。这是代码。

```
$sql = array(); 
foreach( $return as $key=>$row ) {
$sql[] = '("'.mysql_real_escape_string($row['fullname']).'",   '.$row['age'].','.$row['since'].','.'"'.mysql_real_escape_string($row['description']).'")';
}
mysql_query('INSERT INTO data (name, age, since, description) VALUES '.implode(',', $sql)); 
```

我的查询将记录数组插入到`data`表中。我想更改查询，以便在记录存在时更新记录，否则将插入记录。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T06:29:52.100

您可能想要的是“ON DUPLICATE KEY”的一个版本，它实际上允许您引用正在输入的数据。

```
INSERT INTO data (name, age, since, description) VALUES
     ("Bob", 23, "01-01-1980", "friend"),
     ("Bill", 33, "03-01-1980", "tall"),
     ("Jane", 43, "12-01-1980", "thin")
 ON DUPLICATE KEY UPDATE age=VALUES(age),
                         since=VALUES(since),
                         description=VALUES(description); 
```

希望您阅读时不言自明？

* * *

```
$sql = array();   
foreach( $return as $key=>$row ) {  
    $sql[] = '("'.mysql_real_escape_string($row['fullname']).'",   '.$row['age'].','.$row['since'].','.'"'.mysql_real_escape_string($row['description']).'")';  
}  
mysql_query('INSERT INTO data (name, age, since, description) VALUES '.implode(',', $sql). ' ON DUPLICATE KEY UPDATE age=VALUES(age), since=VALUES(since), description=VALUES(description);'); 
```

编辑，将其添加到上面的用户代码中。

# php - 在 PHP 中使用 DOMDocument 替换 html

> ID：12136715
> 
> 赞同：0
> 
> 时间：2012-08-27T05:42:18.340
> 
> 标签：php, xml

我正在尝试使用 DOMDocument 清理一些错误的 html。html 有一个`<div class="article">`元素，`<br/><br/>`而不是`</p><p>`- 我想将这些正则表达式转换成段落......但似乎无法让我的节点回到原始文档中：

```
//load entire doc
$doc = new DOMDocument();
$doc->loadHTML($htm);
$xpath = new DOMXpath($doc);
//get the article
$article = $xpath->query("//div[@class='article']")->parentNode;
//get as string
$article_htm =   $doc->saveXML($article);
//regex the bad markup
$article_htm2 = preg_replace('/<br\/><br\/>/i', '</p><p>', $article_htm);

//create new doc w/ new html string
$doc2 = new DOMDocument();
$doc2->loadHTML($article_htm2);
$xpath2 = new DOMXpath($doc2);

//get the original article node
$article_old = $xpath->query("//div[@class='article']");
//get the new article node
$article_new = $xpath2->query("//div[@class='article']");

//replace original node with new node
$article->replaceChild($article_old, $article_new);
$article_htm_new = $doc->saveXML();

//dump string
var_dump($article_htm_new); 
```

我得到的只是一个 500 内部服务器错误......不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:52:37.060

有几个问题：

1.  `$xpath->query`返回一个 nodeList，而不是一个节点。您必须从 nodeList 中选择一个项目
2.  replaceChild() 将新节点作为第一个参数，并将要替换的节点作为第二个参数
3.  $article_new 是另一个文档的一部分，您首先必须将节点导入 $doc

固定代码：

```
//load entire doc
$doc = new DOMDocument();
$doc->loadHTML($htm);
$xpath = new DOMXpath($doc);
//get the article
$article = $xpath->query("//div[@class='article']")->item(0)->parentNode;
//get as string
$article_htm =   $doc->saveXML($article);
//regex the bad markup
$article_htm2 = preg_replace('/<br\/><br\/>/i', '</p>xxx<p>', $article_htm);

//create new doc w/ new html string
$doc2 = new DOMDocument();
$doc2->loadHTML($article_htm2);
$xpath2 = new DOMXpath($doc2);

//get the original article node
$article_old = $xpath->query("//div[@class='article']")->item(0);
//get the new article node
$article_new = $xpath2->query("//div[@class='article']")->item(0);

//import the new node into $doc
$article_new=$doc->importNode($article_new,true);

//replace original node with new node
$article->replaceChild($article_new, $article_old);
$article_htm_new = $doc->saveHTML();

//dump string
var_dump($article_htm_new); 
```

您可以创建 $article_htm2 的 DocumentFragment 并使用此片段作为替换，而不是使用 2 个文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:48:48.340

我认为应该是

```
$article->parentNode->replaceChild($article_old, $article_new); 
```

这篇文章不是自己的孩子。

# android - 在清单中为 android 使用 android:theme 会导致出现软键盘（虚拟）时禁用 Scroll View

> ID：12136718
> 
> 赞同：-1
> 
> 时间：2012-08-27T05:42:30.237
> 
> 标签：android, android-softkeyboard, android-theme, android-scrollview

我遇到了一个问题，当我在 android 清单文件中使用任何主题时，当软键盘打开时滚动不会发生，我知道这是因为我删除了主题并且它开始正常工作这是布局文件代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:orientation="vertical" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <EditText
            android:id="@+id/editText3"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <EditText
            android:id="@+id/editText7"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:inputType="textPersonName" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>

        <EditText
            android:id="@+id/editText4"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <EditText
            android:id="@+id/editText6"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <EditText
            android:id="@+id/editText5"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Button" />
    </LinearLayout>
</ScrollView> 
```

以前有没有人遇到过这样奇怪的问题，如果有解决方法，请告诉我，因为目前我已将背景设置为所有不同的布局，而不是简单地将其设置为主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:37:32.093

可能将主题设置为`"full window"`并删除`"title bar"`类似于 `android:windowSoftInputMode="adjustPan"`阻止 UI 重新调整的行为

# objective-c - 在一行UITable中设置多个UILabel

> ID：12136725
> 
> 赞同：1
> 
> 时间：2012-08-27T05:42:51.577
> 
> 标签：objective-c, ios, uitableview, uilabel

我想在表格的行中设置 UILabel ，但问题是应用程序重新启动时**每次标签的数量都不同**。清除我要创建具有动态行和列的表的更多详细信息。行是自己设置的，但是在列中我设置的标签也是动态的，那么每次新的 Web 服务调用时如何设置该标签？

前任。

行列

A1 **b11 b12 ....b1n**

A2 **b21 b22 ....b2n**

A3 **b31 b32 .......b3n** 。.

我 **bm1 bm2 ..bmn**

其中 A 是行或**b 是列**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T07:42:07.523

例如，您可以有一个名为 rowData 的可变数组。在您的 init/initWithCoder/etc 方法中，您可以创建另一个名为 columnData 的可变数组，例如它可以包含每个标签的数据。将每一行的 columnData 对象添加到 rowData。

对于您的 cellForRowAtIndexPath 方法，您可以执行以下操作：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

if (!cell) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"] autorelease];

    int row = [indexPath row];
    int i = 0;
    int nLabels = [[rowData objectAtIndex:row] count];
    UILabel *label;

    NSLog([NSString stringWithFormat:@"%d labels", nLabels]);

    for (i = 0; i < nLabels; i++) {
        NSLog([NSString stringWithFormat:@"%d", i]);
        label = [[[UILabel alloc] initWithFrame:CGRectMake(cell.frame.origin.x + (i * 40), cell.frame.origin.y, 40, cell.frame.size.height)] autorelease]; //replace 40 with desired label width
        label.textColor = [UIColor grayColor];
        label.backgroundColor = [UIColor clearColor];
        // set the label text here

        [cell.contentView addSubview:label];

        NSLog([NSString stringWithFormat:@"%d subviews", [[cell.contentView subviews] count]]);
    }
}

return cell; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-23T06:33:45.743

更好的选择是在 UITableViewCell 中创建一个 UITableView 并且你的每个标签都是单元格，你可以禁用内部 tableview 滚动。但是您需要确保已正确计算内部 tableview 高度。

其他解决方案（例如添加 n 个 UIlabel 等）不会让您平滑滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:33:26.717

创建具有您可能需要的最大标签数的单元格。使他们的标签为 1,2,3,4... - 增加数字。每次要求您在表格旁提供一个单元格时，您要么取一个旧单元格，要么取一个新单元格，决定需要多少标签，使该范围的标签可见（即 label.hidden = NO;），然后隐藏另一个标签。您显然需要更改可见标签的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:09:38.153

您使用标记方法和 indexpath.row。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

            if (!cell) {
                      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
                      for (i = 0; i < n; i++) {
                              label = [[UILabel alloc] initWithFrame:CGRectMake (i * yourWidth, 0, yourWidth + 5, yourHight)]; 
                              label.textColor = [UIColor blueColor];
                              label.tag = (indexPath.row)*100 + i  //you can create n labels in a row.
                              label.text = [NSString stringWithString:@"%d",label.tag]; 
                              [cell.contentView addSubview:label];
                        }
            }

        return cell;

} 
```

我想这会对你有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:32:46.210

您应该考虑使用不同的视图，例如[DTGridView](https://github.com/danielctull/DTGridView)

# google-maps-api-3 - 除非 id 设置为 map_canvas，否则谷歌地图不会显示

> ID：12136729
> 
> 赞同：2
> 
> 时间：2012-08-27T05:43:20.247
> 
> 标签：google-maps-api-3

我正在尝试让 google maps api v3 正常工作，而且确实如此！但**仅**当我将显示地图的 div 设置为具有“map_canvas”的 id 时。需要那个身份证吗？如果您想在一页上显示多个地图怎么办？

我在我的 js 和 html 标记中都设置了 id

## 它完美地像这样工作：

JS

```
<script type="text/javascript" >
 function initialize() {
    var mapOptions = {
     center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
 }
</script> 
```

HTML

```
 <div style="width:300px; height:300px;">
  <div style="width:100% height:100%" id="map_canvas"></div>
 </div> 
```

## 它根据萤火虫加载地图，但当我这样做时不显示任何内容：

JS

```
<script type="text/javascript" >
 function initialize() {
    var mapOptions = {
     center: new google.maps.LatLng(-34.397, 150.644),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("anyotherid"), mapOptions);
 }
</script> 
```

HTML

```
 <div style="width:300px; height:300px;">
  <div style="width:100% height:100%" id="anyotherid"></div>
 </div> 
```

# 更新

我上传了一个示例页面，该页面在以下位置重现了我的问题：http://www.athleteaustin.com/spots/test 上的 [示例](http://athleticaustin.com/spots/test)

One peculiarity that I have noticed is that when I edit the id attribute with firebug from map_test to map_canvas on the div that displays the map, it suddenly appears even though the id is still defined as map_test in the JS in the head.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T05:52:38.570

> Is that Id required?

No.

> What if you want to display multiple maps on one page?

You use multiple unique ids for the divs.

[Here is an example](https://google-developers.appspot.com/maps/documentation/javascript/examples/place-search) from the documentation that uses "map" If it isn't working for you, you are doing something wrong. I don't see it in the snippets you have posted. Do you have a live link or a jsfiddle that exhibits the issue?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:11:56.503

There is a semicolon missing in

```
<div style="width:100% height:100%" id="anyotherid"></div> 
```

it should be

```
<div style="width:100%; height:100%" id="anyotherid"></div> 
```

(semicolon after width:100%;), but that semicolon is also missing in your map_canvas snippet, so it is probably not the issue, unless you copy/paste'd wrongly.

# objective-c - 如何在 obj c 的 sqlite3 中插入 、更新、删除和选择数据到数据库中？

> ID：12136732
> 
> 赞同：2
> 
> 时间：2012-08-27T05:43:31.687
> 
> 标签：objective-c, ios

我想插入、更新和删除并选择数据库中的 1000 条记录。我想在何时何地打开和关闭数据库连接。我插入，更新和删除数据库中的数据，但我错误“内存不足”，“无法打开数据库文件”，“锁定数据库”这种错误从我这边提出。这个问题怎么解决，求大神帮忙。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:12:40.700

嘿 raj 每当您要处理数据库时，您首先打开数据库 Open db，在进行更改后，您必须通过调用 Close Db 方法关闭数据库。以下是在 iPhone 中使用 sqlite 的一些链接

[http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application](http://www.techotopia.com/index.php/An_Example_SQLite_based_iPhone_Application)

[http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/)

[http://blog.saers.com/archives/2008/03/14/sqlite-for-iphone-sdk/](http://blog.saers.com/archives/2008/03/14/sqlite-for-iphone-sdk/)

[http://how2s.org/index.php/How_to_get_started_with_SQLite_on_the_iPhone](http://how2s.org/index.php/How_to_get_started_with_SQLite_on_the_iPhone)

我认为它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T07:43:00.570

```
NSData *d=UIImageJPEGRepresentation(image, 0.50);

    [dm writeImageInTable:[Base64 encode:d]];

-(void)writeImageInTable:(NSString *)imageString
{

    if (sqlite3_open([DB_PATH UTF8String], &database)==SQLITE_OK)
    {

        NSString *str=[NSString stringWithFormat:@"INSERT INTO imageTable (image) VALUES('%@')",imageString];
       //  NSLog(@"%@",str);
       const char *getFolderQuery=[str UTF8String];

       if(sqlite3_prepare_v2(database, getFolderQuery, -1, &queryForImage, NULL)==SQLITE_OK)
        {
             NSLog(@"test");
             int queryResult;
             if((queryResult=sqlite3_step(queryForImage)) == SQLITE_DONE)
             {
                 NSLog(@"sqlite done insert");
             }
             NSLog(@"sqlite error inside %s", sqlite3_errmsg(database));
         }
         sqlite3_reset(queryForImage);
         sqlite3_finalize(queryForImage);
         NSLog(@"sqlite error %s", sqlite3_errmsg(database));
         sqlite3_finalize(queryForImage);
    }
    else
    {

    }
    if(sqlite3_close(database)==SQLITE_OK)
    {
        NSLog(@"database closed");
    }
    else
    {
        NSLog(@"database still open with error %s",sqlite3_errmsg(database));
    }

} 
```

# java - 如何从具有文件扩展名的 Android 资源创建 Uri

> ID：12136734
> 
> 赞同：0
> 
> 时间：2012-08-27T05:43:35.413
> 
> 标签：java, android, android-intent, resources, attachment

我正在尝试将我的 res/drawable 文件夹中的 png 文件作为电子邮件的附件发送。我可以将文件附加并包含在电子邮件中，但它缺少 .png 文件扩展名。我希望它在文件名中包含扩展名。有人可以帮忙吗？这是我的代码：

```
 Intent i = new Intent(Intent.ACTION_SEND_MULTIPLE);
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_SUBJECT, "Subject");
            i.putExtra(Intent.EXTRA_TEXT   , "Text");
            ArrayList<Uri> uris = new ArrayList<Uri>();
            Uri path = Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.png_image);
            uris.add(newPath);

            i.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
            try {
                startActivity(Intent.createChooser(i, "Send mail..."));
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(ShareActivity.this, "There are no email clients installed.", Toast.LENGTH_SHORT).show();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:49:15.187

将类型更改为：

```
i.setType("image/png"); 
```

虽然我相信`putParcelableArrayListExtra()`没有必要。`putExtra()`应该做的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T09:20:05.330

使用此方法获取文件的扩展名

```
public static String getMimeType(Context context, Uri uri) {
    String extension;

    //Check uri format to avoid null
    if (uri.getScheme().equals(ContentResolver.SCHEME_CONTENT)) {
        //If scheme is a content
        final MimeTypeMap mime = MimeTypeMap.getSingleton();
        extension = mime.getExtensionFromMimeType(context.getContentResolver().getType(uri));
    } else {
        //If scheme is a File
        //This will replace white spaces with %20 and also other special characters. This will avoid returning null values on file name with spaces and special characters.
        extension = MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(new File(uri.getPath())).toString());

    }

    return extension;
} 
```

# windows-8 - 如何在 Metro 模式下开发 IME（输入法编辑器）相关文本服务框架？

> ID：12136735
> 
> 赞同：1
> 
> 时间：2012-08-27T05:43:37.757
> 
> 标签：windows-8, microsoft-metro, ime, text-services-framework

“文本服务框架” 如何在 windows8 Metro 模式下实现我的 IME 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T20:38:04.437

我正在寻找相同的东西，我仍在研究。

为了提供帮助，这里是示例代码信息。如果您有视觉工作室，那么它在您的示例 zip 和“国际”文件夹中：

[http://msdn.microsoft.com/en-us/library/0x02zb6d%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-us/library/0x02zb6d%28v=vs.90%29.aspx)

我已经编译了代码和它的第 3 级代码，即开发您自己的控件。

这是另一个链接，可以在您开始实际开发时帮助您：

[http://archive.msdn.microsoft.com/tsf/Release/ProjectReleases.aspx?ReleaseId=1755](http://archive.msdn.microsoft.com/tsf/Release/ProjectReleases.aspx?ReleaseId=1755)

祝你好运！

# ios - 多线程联系人同步

> ID：12136736
> 
> 赞同：1
> 
> 时间：2012-08-27T05:43:40.297
> 
> 标签：ios, multithreading, contacts, abrecordref

我正在尝试加快将设备上的所有联系人同步到我的应用程序的速度。目前它在同步联系人时阻塞了主线程。

我在 NSInvocationOperation 中添加了单个联系人设置，并将其添加到 NSOperationQueue。

我知道您只能在主线程中访问 UI。关于通讯录数据，您无法访问哪些内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T06:21:08.370

地址簿框架通常可以安全地从后台线程使用，但它们是陷阱。[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Chapters/BasicObjects.html#//apple_ref/doc/uid/TP40007744-CH3-SW1)中提到了重要的警告：

> **重要**的 ABAddressBookRef 实例不能被多个线程使用。每个线程必须创建自己的实例。

和

> **重要**Record 对象不能安全地跨线程传递。相反，您应该传递相应的记录标识符。有关详细信息，请参阅“使用记录标识符”。

请注意，仅仅因为`NSInvocationOperation`are on the same`NSOperationQueue`并不能保证它们将在同一个线程上执行。

# grails - Spring Security 登录页面超时

> ID：12136737
> 
> 赞同：1
> 
> 时间：2012-08-27T05:43:40.667
> 
> 标签：grails, grails-plugin

我正在为我的 Grails 应用程序使用 Spring Security Core 插件，但我遇到了一个问题，即当我的应用程序空闲超过 5-10 分钟时，我需要重新启动应用程序。

我认为这是一个会话超时问题，所以我在 my 中添加了一个会话超时标签`web.xml`，但它没有帮助。

我还能尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:10:10.343

只需检查您的应用程序可能正在使用

```
request.getSession().setMaxInactiveInterval(Integer.parseInt(value)*60); 
```

此行覆盖 web.xml 会话超时的特性。

或者

当您为用户创建会话时（在登录时），请在您的应用程序中使用此行。

# iphone - 将一个 UIScrollView 手势识别器添加到另一个 UIScrollView

> ID：12136738
> 
> 赞同：0
> 
> 时间：2012-08-27T05:43:43.010
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我在我的应用程序中有一点，我删除了一个滚动视图并添加了另一个。我希望我以前的滚动视图中的相同手势出现在新的滚动视图中。我试过了：

```
 scrollView.gestureRecognizers = self.scrollView.gestureRecognizers; 
```

但它只是给了我一个 EXC_BAD_ACCESS。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:21:39.483

您需要使用新目标重新初始化手势识别器。你不能像这样复制它。

```
 UIGestureRecognizer *newGestureRecognizer = [UIGestureRecognizer alloc] initWithTarget:newScrollView action:@selector(yourAction); 
```

# xcode - 真实跳跃的算法

> ID：12136739
> 
> 赞同：2
> 
> 时间：2012-08-27T05:44:17.020
> 
> 标签：xcode, physics

我希望我的角色根据按下跳跃按钮的时间来跳跃。当按下跳转按钮时，我尝试添加精灵的 y 位置..但这并没有给跳转带来逼真的感觉。我的增量太恒定了。如何使 y 的增量在到达跳跃的顶部时减小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:53:12.057

我会使用正弦函数来计算给定时间的高度。它大致具有您想要的形状，以便给人一种“逼真”的感觉，并且它可以作为各种语言库中的库函数使用。

除非如果玩家从悬崖上跳下，这不起作用，因为一旦正弦函数下降到起始高度以下，它就会开始转身并转向另一个方向。

所以，要么你使用混合方法，在那个点改变，要么你使用更真实的物理，即向下加速从玩家离开地面的那一刻开始。在后一种情况下，您必须弄清楚按住按钮会发生什么。

对于可玩性，使用正弦实际上可能是有利的，然后说在玩家返回原始高度的时间点，加速度停止并且从那里向下速度保持恒定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:56:08.673

我想到了几种方法来实现这一点：

1.  想象一下，您的角色有一个“燃料”有限的喷气背包。然后，加速度与剩余燃料成反比，因此他以高加速度开始并减速，直到电池组耗尽“燃料”或用户松开跳跃按钮。此时加速度应恢复为重力（负），角色开始下落。（至少在这个故事中，用户在按住跳转按钮时继续上升是有意义的）。
2.  使用具有递减（但为正）斜率的非线性函数将跳跃的持续时间映射到 y 值，例如正弦函数、对数函数或平方根。这是（1）的更一般的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T13:14:36.320

想象一下跳跃按钮会为玩家角色的“跳跃能量”充电（在现实世界中，您可以弯曲膝盖以跳得更高，从而有效地将更多能量带入跳跃中）。

一定高度的能量由公式确定`E = m g h`，其中`m`是运动物体的质量、`g`重力常数和`h`达到的高度。请注意，获得某个跳跃所需的“发射”速度取决于您在该速度下的动能：`E = m v²/2`，结果`h = v²/(2g)`为二次公式。

因此，我建议尝试二次（有界，您不希望人们跳到不可能的高度）或跳跃高度`h`随时间的线性增长。

# selenium-ide - Selenium IDE - sideflow.js 循环

> ID：12136746
> 
> 赞同：2
> 
> 时间：2012-08-27T05:44:50.847
> 
> 标签：selenium-ide

我想用循环创建测试用例。我`sideflow.js`在 Selenium 选项中获得了最新的扩展并针对它。然后我重新启动了 Selenium IDE，但它不起作用。

示例测试用例：

```
store|i|1
while|${i}<200|
echo|${i}|
storeEval|i=1*storedVars['i']; i+1|i
endWhile|| 
```

它显示以下错误消息：

```
[error] Unexpected Exception: fileName -> chrome://selenium-ide/content/tools.js -> file:///home/imslavko/bin/sideflow.js?1346044911197, lineNumber -> 100 
```

Firefox 版本：Ubuntu 14.0.1

Selenium IDE 版本：1.9.0

`sideflow.js`：来自此页面的最新[消息 https://github.com/darrenderidder/sideflow/blob/master/sideflow.js](https://github.com/darrenderidder/sideflow/blob/master/sideflow.js)

如何让它发挥作用？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T16:31:02.107

代替

```
store|i|1 
```

把它写成

```
store|1|i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T01:35:53.597

如果要创建循环，建议使用以下方法。我还在学习，所以我不确定，但这对我有用。

```
For i=0; i <= 200; i++  i

break   "${i}" == 200   

Echo    *** "${i}" ***  

endFor 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T12:59:47.457

这是一个示例三重数组循环器（使用静态变量，因此您可以看到它的变化）

这是我定制的，注意存储增量变量的语法（如计数器等）

该循环器将循环浏览您的所有选项（在下面的示例中，有 6*5*4=120 个选项）。它会回显每个选项一次，然后移动到下一个选项。

```
example_array_looper
storeEval   new Date().getTime();   timeStart
echo    ${timeStart}    
storeEval   new Array("1","2","3","4"); toparray
storeEval   new Array("A", "B", "C", "D", "E"); middlearray
storeEval   new Array("i","ii","iii","iv","v","vi");    bottomarray
getEval topindex=0; 
getEval middleindex=0;  
getEval bottomindex=0;  
getEval loopCounter=0;  
while   topindex < storedVars['toparray'].length    
storeEval   topindex    temptop
while   middleindex < storedVars['middlearray'].length  
storeEval   middleindex tempmiddle
while   bottomindex < storedVars['bottomarray'].length  
storeEval   bottomindex tempbottom
echo    javascript{storedVars['toparray'][storedVars['temptop']]+" -> "+storedVars['middlearray'][storedVars['tempmiddle']]+" -> "+storedVars['bottomarray'][storedVars['tempbottom']]} 
getEval bottomindex++;  
getEval loopCounter++;  
endWhile        
getEval bottomindex=0;  
getEval middleindex++;  
endWhile        
getEval bottomindex=0;  
getEval middleindex=0;  
getEval topindex++; 
endWhile        
storeEval   loopCounter loops
echo    Total number of loops is: ${loops}  
storeEval   new Date().getTime();   timeEnd
echo    ${timeEnd}  
storeEval   (${timeEnd}-${timeStart})/1000  scriptRunTime
echo    Total Run Time for Script was: ${scriptRunTime}s    
storeEval   ${scriptRunTime}/${loops}   averageTime
echo    Average Loop Duration was: ${averageTime}s 
```

我选择删除所有 html 标记（因此差距应该很明显）。StoreEval 命令最适合保存循环计数器，因为您可以将它们用作一步而不是 2 的增量。

# php - 在多个函数中使用相同的大数组而不是冗余的正确方法？

> ID：12136748
> 
> 赞同：1
> 
> 时间：2012-08-27T05:45:16.143
> 
> 标签：php, global-variables

我没有要处理的具体情况，因此请将此视为一个一般性问题。如果语言很重要，答案可能更倾向于 PHP。

如果我有多个函数中需要的大型数据数组（或其他数据类型），并且不会改变，我应该如何使用该数据？例如，也许我有一个看起来像的数组

```
$states = array(
                "AL" => "Alabama",
                     ...
                "WY" => "Wyoming"
                ); 
```

显然，这个数组不需要很快改变。如果我有五个必须使用上述数组的函数，最好的解决方案是什么？我的三个想法是：

*   将其声明为全局常量

这似乎是最直接的，但是我与之交谈过的一些人似乎建议回避使用全局变量。这里的任何见解将不胜感激。

*   将其传递给函数

这对我来说似乎是个坏主意，因为它永远不会改变，函数参数应该用于变量，对吧？更不用说必须将它传递给一个不使用它的函数，这样它就可以被另一个函数使用。这似乎是一个糟糕的做法。

*   是否由函数返回

这是我没有看到很多使用的一个，但我已经用自己几次将 mysqli_connect() 信息传递给多个函数。它工作得很好。这是否被视为不良做法？我应该把它吸起来并使用全局常量吗？

我意识到使用全局常量听起来很明显，但我听过（并阅读过）不止一个口头禅，比如“如果你声明全局变量，你做错了”之类的。谁能解释为什么会这样？

感谢您能给我的任何见解，伙计们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T05:55:15.333

我的一般建议是构建一个“服务提供者”类，类似于您的“从函数中返回它”选项。以下是一些具体的想法：

*   将其声明为全局常量

首先，常量只能是标量值，因此从技术上讲，您不能拥有“常量”数组。其次，您所说的几乎总是正确的：全局变量暗示有更好的方法（有一些例外）。

*   将其传递给函数

如果它们*实际上是*恒定的（在“现实世界”意义上，而不是计算机科学意义上），那么您是对的，传递给函数应该被认为是代码混乱（除非函数应该从“ global" 值，但这是特定于域的架构选择。

*   是否由函数返回

丁丁！原因本质上是这样的：任何人都可以访问这些来“读”，但只有“函数”才能“写”。我将“函数”放在引号中，因为它也可以是类或单例对象实例。基本上，您提供此*静态*信息的语义适当的提供者。

这种方法的好处之一是您可能只需要在长时间运行的程序中很少使用的数据。在这种情况下，服务提供者可能会被写入从一些内存不足的持久性中获取值，并在不再需要内存时释放内存。没有其他人需要负责该内存管理。同样，假设项目增长，这些数据需要从数据库而不是静态数组加载......如果您有集中访问，这非常容易促进并且您不需要在程序执行的整个过程中，巨大的内存堆存放着几乎从未访问过的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T05:48:04.467

如果您坚持不使用全局变量（这确实是一个坏习惯！），那么您可以将其“隐藏”在函数中：

```
function get_state($state_code){
  static $states = array(
                "AL" => "Alabama",
                     ...
                "WY" => "Wyoming"
                );
  return $states[$state_code];
} 
```

但是，在这种情况下，在我看来，使用全局数组就可以了，有点像在 Java 中创建一个 Enam。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T05:52:50.030

听起来像一个包装类是为了将那些显然相关的函数捆绑在一起：

```
class CountryHelper {

    protected static $states = array('AL' => ..., ...);

    public function foo() {
        self::$states ...
    }

    public function bar() {
        self::$states ...
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T05:57:20.737

这取决于您工作的环境 - 在 MVC 中，我会将其作为控制器的静态属性注入，以便您可以通过以下方式访问它：

```
 $this -> settings('states')[$state]; 
```

否则，我会坚持使用`Settings`类的静态字段：

```
 class Settings
 {

      static $states = array( ... );

 } 
```

或者甚至在脚本启动时填充了一个单例，如果需要的话，它可以从其他地方加载设置 [yaml / ini] - 尽管我认为使用单例不是一个好习惯。

无论如何不要走向全球，始终正确命名您的变量/函数。

# node.js - 从逻辑上讲，线程中的事件循环是什么？

> ID：12136749
> 
> 赞同：1
> 
> 时间：2012-08-27T05:45:18.433
> 
> 标签：node.js, events, tornado, eventmachine, event-loop

我遇到了`node.js`和.`python's tornado``Apache`

他们说 ：

*   Apache 为每个连接创建一个线程。
*   `Node.js`&`tornado`实际上在线程上进行事件循环，单个线程可以处理许多连接。

我不明白逻辑上什么是线程的孩子。在计算机科学术语中：

*   进程具有隔离内存并与上下文切换共享 CPU。
*   线程划分一个进程。
*   因此，一个具有多个控制点的进程是由多个线程来实现的。

现在，

`event loop`在线程下如何工作？

它如何在一个线程的 1 控制下处理不同的连接？

**更新 ：**

我的意思是如果在 1 个线程下与 3 个套接字进行通信，那么 1 个线程如何在不让任何人等待的情况下与 3 个套接字进行通信？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T05:51:36.090

基本级别的事件循环类似于：

```
while getNextEvent (&event) {
    dispatchEvent (&event);
} 
```

换句话说，它只不过是一个循环，它不断地从某个描述的队列中检索事件，然后将事件分派到事件处理过程。

您可能已经知道这一点，但我只是根据上下文进行解释。

就不同服务器如何处理它而言，似乎在 Apache 中建立的每个新连接都有一个为其创建的线程，并且该线程负责该连接而不是其他任何事情。

对于另外两个，可能有“固定”数量的线程正在运行（尽管这实际上可能因负载而异），并且连接被移交给其中一个线程。这意味着任何一个线程都可能在任何时间点处理*多个连接。*

因此，在这种情况下，事件必须包含一些关于它适用于什么连接的详细信息，以便线程可以保持不同的连接彼此隔离。

毫无疑问，这两种选择都有利弊。每个线程一个连接选项将简化线程函数中的代码，因为它不必处理多个连接，但随着负载变高，最终可能会占用大量资源。

在每个线程多连接的情况下，代码稍微复杂一些，但您通常可以通过始终运行最大数量的线程来最小化线程创建和销毁开销。在高负载时段之外，他们只会坐在那里无所事事，等待给他们的连接事件。

而且，即使在高负载下，每个线程也可能很容易地处理五个并发连接而不会落后，这意味着每个线程一个连接的选项有点浪费。

* * *

根据您的更新：

> 我的意思是如果在 1 个线程下与 3 个套接字进行通信，那么 1 个线程如何在不让任何人等待的情况下与 3 个套接字进行通信？

有很多方法可以做到这一点。首先，它通常会在`getNextEvent()`调用之后被抽象出来，这可能会负责处理*所有*连接并将它们分配给正确的线程。

在最低级别，这可以通过诸如[`select`](http://en.wikipedia.org/wiki/Select_%28Unix%29)调用之类的方法来完成，该函数等待许多文件描述符之一上的活动，并返回与哪个文件描述符有话要说相关的信息。

例如，您提供所有当前打开的套接字的文件描述符集并将其传递给`select`. 然后它会给你一个修改后的集合，只包含你感兴趣的那些（例如ready-to-read-from）。

然后，您可以查询该集合并将事件分派到相应的线程。

# c# - 如何用linq减去两个数据表

> ID：12136754
> 
> 赞同：1
> 
> 时间：2012-08-27T05:45:56.330
> 
> 标签：c#, linq, datatable

有没有办法减去两个数据表，以便使第一个数据表的行不在第二个数据表中？

我已经尝试过如下所示的 .Except() 方法，但它对我不起作用。

```
dt1.AsEnumerable().Except(dt2.AsEnumerable()).CopyToDataTable(); 
```

我想我使用这种方法有错误，但我找不到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:04:41.623

[您可以使用IEquailtyComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)创建自己的比较器

```
 public class CustomDataRowComparer : IEqualityComparer<DataRow>
    {
        public bool Equals(DataRow x, DataRow y)
        {
            for (int i = 0; i < x.Table.Columns.Count; i++)
            {
                if (x[i].ToString() != y[i].ToString())
                {
                    return false;
                }

            }
            return true;
        }

        public int GetHashCode(DataRow obj)
        {
            return obj.ToString().GetHashCode();
        }
    } 
```

以后你可以这样称呼它：

```
CustomDataRowComparer myDRComparer = new CustomDataRowComparer();
var result2 = dt1.AsEnumerable().Except(dt2.AsEnumerable(),myDRComparer).CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T05:49:03.393

`Except`将不起作用，因为参考文献不同。内存中数据行的每个“副本”都是不同的对象，因此进行的相等比较`Except`将始终返回 false。

您需要与类似的东西进行比较，例如行 ID。几个想法如何做到这一点：

```
var rowsInFirstNotInSecond = dt1.Rows.Where(r1=>!dt2.Rows.Any(r2=>r1.ID == r2.ID)); 
```

或者：

```
var rowsInFirstNotInSecond = dt1.Rows.Where(r1=>dt2.FindById(r1.ID) == null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T08:08:41.230

我使用以下代码将两个数据表相减：

```
var query =    
    from row1 in dt1    
    where !(from row2 in dt2    
            select row2.ID)    
           .Contains(row1.ID)    
    select row1; 
```

这段代码准确地返回了我想要的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-16T23:06:33.437

此代码肯定有效：

```
var rows =dtFirst.AsEnumerable().Except(dtSecond.AsEnumerable(), DataRowComparer.Default);
 DataTable result = null;
 if (rows.Count() != 0)
      result = rows.CopyToDataTable(); 
```

# objective-c - 在本地查看应用程序中的csv文件

> ID：12136755
> 
> 赞同：0
> 
> 时间：2012-08-27T05:45:56.970
> 
> 标签：objective-c, ios, csv, directory, document

我是 iPhone 开发的新手。我正在开发一个项目，我必须在本地应用程序中创建 .csv 文件并在应用程序本身中查看它。我已成功创建 .csv 文件并将其保存在文档目录中。但问题是我不知道创建后如何在应用程序中查看 .csv excel。欢迎提出任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:53:16.520

我假设您可能正在将 csv 保存在文档目录中。您可以使用 UIWebView 像这样显示您的 csv 内容；

```
NSString *filePath = [self documentsDirectoryPath];
filePath = [filePath stringByAppendingPathComponent:@"file.csv"]; //your saved fileName
if ([[NSFileManager defaultManager]fileExistsAtPath:filePath]) {
    [yourWebView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:filePath]]];
} 
```

获取文档目录路径如下：

```
- (NSString *)documentsDirectoryPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [paths objectAtIndex:0];
    return documentsDirectoryPath;
} 
```

# python - 用于浮点集合的 Python 单元测试中的 assertAlmostEqual

> ID：12136762
> 
> 赞同：95
> 
> 时间：2012-08-27T05:46:42.107
> 
> 标签：python, unit-testing, collections

[Python 的单元测试框架](http://docs.python.org/library/unittest.html)中的[assertAlmostEqual(x, y)](http://docs.python.org/library/unittest.html#unittest.TestCase.assertAlmostEqual)方法在假设它们是浮点数的情况下测试它们是否并且近似相等。`x``y`

问题`assertAlmostEqual()`在于它只适用于浮点数。我正在寻找一种`assertAlmostEqual()`适用于浮点数列表、浮点数集、浮点数字典、浮点数元组、浮点数元组列表、浮点数列表集等的方法。

例如，让`x = 0.1234567890`, `y = 0.1234567891`。`x`并且`y`几乎相等，因为除了最后一个数字之外，它们在每个数字上都一致。因此`self.assertAlmostEqual(x, y)`是`True`因为`assertAlmostEqual()`适用于花车。

我正在寻找一个更通用的`assertAlmostEquals()`，它还评估以下调用`True`：

*   `self.assertAlmostEqual_generic([x, x, x], [y, y, y])`.
*   `self.assertAlmostEqual_generic({1: x, 2: x, 3: x}, {1: y, 2: y, 3: y})`.
*   `self.assertAlmostEqual_generic([(x,x)], [(y,y)])`.

有这样的方法还是我必须自己实现？

**说明：**

*   `assertAlmostEquals()`有一个名为的可选参数`places`，并且通过计算四舍五入到小数位数的差异来比较数字`places`。默认情况下`places=7`，因此`self.assertAlmostEqual(0.5, 0.4)`为 False 而`self.assertAlmostEqual(0.12345678, 0.12345679)`为 True。我的推测`assertAlmostEqual_generic()`应该具有相同的功能。

*   如果两个列表以完全相同的顺序具有几乎相等的数字，则认为它们几乎相等。正式地，`for i in range(n): self.assertAlmostEqual(list1[i], list2[i])`.

*   同样，如果两个集合可以转换为几乎相等的列表（通过为每个集合分配顺序），则认为它们几乎相等。

*   类似地，如果每个字典的键集几乎等于另一个字典的键集，则认为两个字典几乎相等，并且对于每个这样的几乎相等的键对，都有一个对应的几乎相等的值。

*   一般来说：我认为两个集合几乎相等，如果它们相等，除了一些对应的浮点数几乎相等。换句话说，我想真正比较对象，但在比较沿途的浮点数时精度较低（自定义）。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-27T10:04:01.033

如果您不介意使用 NumPy（Python(x,y) 附带），您可能需要查看`np.testing`定义`assert_almost_equal`函数的模块。

签名是`np.testing.assert_almost_equal(actual, desired, decimal=7, err_msg='', verbose=True)`

```
>>> x = 1.000001
>>> y = 1.000002
>>> np.testing.assert_almost_equal(x, y)
AssertionError: 
Arrays are not almost equal to 7 decimals
ACTUAL: 1.000001
DESIRED: 1.000002
>>> np.testing.assert_almost_equal(x, y, 5)
>>> np.testing.assert_almost_equal([x, x, x], [y, y, y], 5)
>>> np.testing.assert_almost_equal((x, x, x), (y, y, y), 5) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-07-01T18:33:24.857

从 python 3.5 开始，您可以比较使用

```
math.isclose(a, b, rel_tol=1e-9, abs_tol=0.0) 
```

如[pep-0485](https://www.python.org/dev/peps/pep-0485/)中所述。实现应该等同于

```
abs(a-b) <= max( rel_tol * max(abs(a), abs(b)), abs_tol ) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-27T13:37:19.073

**这是我实现通用`is_almost_equal(first, second)`功能**的方式：

首先，复制您需要比较的对象 (`first`和`second`)，但不要进行精确复制：剪掉您在对象内遇到的任何浮点数的无关紧要的十进制数字。

现在您已经有了 和 的副本，`first`其中`second`无意义的十进制数字已经消失，只需比较`first`并`second`使用`==`运算符即可。

假设我们有一个`cut_insignificant_digits_recursively(obj, places)`函数，它复制`obj`但只保留`places`原始中每个浮点数的最高有效十进制数字`obj`。这是一个有效的实现`is_almost_equals(first, second, places)`：

```
from insignificant_digit_cutter import cut_insignificant_digits_recursively

def is_almost_equal(first, second, places):
    '''returns True if first and second equal. 
    returns true if first and second aren't equal but have exactly the same
    structure and values except for a bunch of floats which are just almost
    equal (floats are almost equal if they're equal when we consider only the
    [places] most significant digits of each).'''
    if first == second: return True
    cut_first = cut_insignificant_digits_recursively(first, places)
    cut_second = cut_insignificant_digits_recursively(second, places)
    return cut_first == cut_second 
```

这是一个有效的实现`cut_insignificant_digits_recursively(obj, places)`：

```
def cut_insignificant_digits(number, places):
    '''cut the least significant decimal digits of a number, 
    leave only [places] decimal digits'''
    if  type(number) != float: return number
    number_as_str = str(number)
    end_of_number = number_as_str.find('.')+places+1
    if end_of_number > len(number_as_str): return number
    return float(number_as_str[:end_of_number])

def cut_insignificant_digits_lazy(iterable, places):
    for obj in iterable:
        yield cut_insignificant_digits_recursively(obj, places)

def cut_insignificant_digits_recursively(obj, places):
    '''return a copy of obj except that every float loses its least significant 
    decimal digits remaining only [places] decimal digits'''
    t = type(obj)
    if t == float: return cut_insignificant_digits(obj, places)
    if t in (list, tuple, set):
        return t(cut_insignificant_digits_lazy(obj, places))
    if t == dict:
        return {cut_insignificant_digits_recursively(key, places):
                cut_insignificant_digits_recursively(val, places)
                for key,val in obj.items()}
    return obj 
```

代码及其单元测试可在此处获得：[https](https://github.com/snakile/approximate_comparator) ://github.com/snakile/approximate_comparator 。我欢迎任何改进和错误修复。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-11T12:00:02.390

如果您不介意使用该`numpy`软件包，则可以使用`numpy.testing`该`assert_array_almost_equal`方法。

这适用于`array_like`对象，因此适用于数组、列表和浮点元组，但不适用于集合和字典。

文档在[这里](http://docs.scipy.org/doc/numpy/reference/generated/numpy.testing.assert_array_almost_equal.html)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-27T06:06:28.917

没有这种方法，你必须自己做。

对于列表和元组，定义是显而易见的，但请注意，您提到的其他情况并不明显，因此没有提供这样的功能也就不足为奇了。例如，`{1.00001: 1.00002}`几乎等于`{1.00002: 1.00001}`？处理这种情况需要选择是否接近取决于键或值或两者。对于集合，您不太可能找到有意义的定义，因为集合是无序的，因此没有“对应”元素的概念。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-27T06:08:49.477

您可能必须自己实现它，而列表和集合确实可以以相同的方式迭代，字典是不同的故事，您迭代它们的键而不是值，第三个示例对我来说似乎有点模棱两可，你的意思是比较集合中的每个值，或每个集合中的每个值。

这是一个简单的代码片段。

```
def almost_equal(value_1, value_2, accuracy = 10**-8):
    return abs(value_1 - value_2) < accuracy

x = [1,2,3,4]
y = [1,2,4,5]
assert all(almost_equal(*values) for values in zip(x, y)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-12T12:18:26.267

这些答案都不适合我。以下代码应该适用于 python 集合、类、数据类和命名元组。我可能忘记了一些东西，但到目前为止这对我有用。

```
import unittest
from collections import namedtuple, OrderedDict
from dataclasses import dataclass
from typing import Any

def are_almost_equal(o1: Any, o2: Any, max_abs_ratio_diff: float, max_abs_diff: float) -> bool:
    """
    Compares two objects by recursively walking them trough. Equality is as usual except for floats.
    Floats are compared according to the two measures defined below.

    :param o1: The first object.
    :param o2: The second object.
    :param max_abs_ratio_diff: The maximum allowed absolute value of the difference.
    `abs(1 - (o1 / o2)` and vice-versa if o2 == 0.0\. Ignored if < 0.
    :param max_abs_diff: The maximum allowed absolute difference `abs(o1 - o2)`. Ignored if < 0.
    :return: Whether the two objects are almost equal.
    """
    if type(o1) != type(o2):
        return False

    composite_type_passed = False

    if hasattr(o1, '__slots__'):
        if len(o1.__slots__) != len(o2.__slots__):
            return False
        if any(not are_almost_equal(getattr(o1, s1), getattr(o2, s2),
                                    max_abs_ratio_diff, max_abs_diff)
            for s1, s2 in zip(sorted(o1.__slots__), sorted(o2.__slots__))):
            return False
        else:
            composite_type_passed = True

    if hasattr(o1, '__dict__'):
        if len(o1.__dict__) != len(o2.__dict__):
            return False
        if any(not are_almost_equal(k1, k2, max_abs_ratio_diff, max_abs_diff)
            or not are_almost_equal(v1, v2, max_abs_ratio_diff, max_abs_diff)
            for ((k1, v1), (k2, v2))
            in zip(sorted(o1.__dict__.items()), sorted(o2.__dict__.items()))
            if not k1.startswith('__')):  # avoid infinite loops
            return False
        else:
            composite_type_passed = True

    if isinstance(o1, dict):
        if len(o1) != len(o2):
            return False
        if any(not are_almost_equal(k1, k2, max_abs_ratio_diff, max_abs_diff)
            or not are_almost_equal(v1, v2, max_abs_ratio_diff, max_abs_diff)
            for ((k1, v1), (k2, v2)) in zip(sorted(o1.items()), sorted(o2.items()))):
            return False

    elif any(issubclass(o1.__class__, c) for c in (list, tuple, set)):
        if len(o1) != len(o2):
            return False
        if any(not are_almost_equal(v1, v2, max_abs_ratio_diff, max_abs_diff)
            for v1, v2 in zip(o1, o2)):
            return False

    elif isinstance(o1, float):
        if o1 == o2:
            return True
        else:
            if max_abs_ratio_diff > 0:  # if max_abs_ratio_diff < 0, max_abs_ratio_diff is ignored
                if o2 != 0:
                    if abs(1.0 - (o1 / o2)) > max_abs_ratio_diff:
                        return False
                else:  # if both == 0, we already returned True
                    if abs(1.0 - (o2 / o1)) > max_abs_ratio_diff:
                        return False
            if 0 < max_abs_diff < abs(o1 - o2):  # if max_abs_diff < 0, max_abs_diff is ignored
                return False
            return True

    else:
        if not composite_type_passed:
            return o1 == o2

    return True

class EqualityTest(unittest.TestCase):

    def test_floats(self) -> None:
        o1 = ('hi', 3, 3.4)
        o2 = ('hi', 3, 3.400001)
        self.assertTrue(are_almost_equal(o1, o2, 0.0001, 0.0001))
        self.assertFalse(are_almost_equal(o1, o2, 0.00000001, 0.00000001))

    def test_ratio_only(self):
        o1 = ['hey', 10000, 123.12]
        o2 = ['hey', 10000, 123.80]
        self.assertTrue(are_almost_equal(o1, o2, 0.01, -1))
        self.assertFalse(are_almost_equal(o1, o2, 0.001, -1))

    def test_diff_only(self):
        o1 = ['hey', 10000, 1234567890.12]
        o2 = ['hey', 10000, 1234567890.80]
        self.assertTrue(are_almost_equal(o1, o2, -1, 1))
        self.assertFalse(are_almost_equal(o1, o2, -1, 0.1))

    def test_both_ignored(self):
        o1 = ['hey', 10000, 1234567890.12]
        o2 = ['hey', 10000, 0.80]
        o3 = ['hi', 10000, 0.80]
        self.assertTrue(are_almost_equal(o1, o2, -1, -1))
        self.assertFalse(are_almost_equal(o1, o3, -1, -1))

    def test_different_lengths(self):
        o1 = ['hey', 1234567890.12, 10000]
        o2 = ['hey', 1234567890.80]
        self.assertFalse(are_almost_equal(o1, o2, 1, 1))

    def test_classes(self):
        class A:
            d = 12.3

            def __init__(self, a, b, c):
                self.a = a
                self.b = b
                self.c = c

        o1 = A(2.34, 'str', {1: 'hey', 345.23: [123, 'hi', 890.12]})
        o2 = A(2.34, 'str', {1: 'hey', 345.231: [123, 'hi', 890.121]})
        self.assertTrue(are_almost_equal(o1, o2, 0.1, 0.1))
        self.assertFalse(are_almost_equal(o1, o2, 0.0001, 0.0001))

        o2.hello = 'hello'
        self.assertFalse(are_almost_equal(o1, o2, -1, -1))

    def test_namedtuples(self):
        B = namedtuple('B', ['x', 'y'])
        o1 = B(3.3, 4.4)
        o2 = B(3.4, 4.5)
        self.assertTrue(are_almost_equal(o1, o2, 0.2, 0.2))
        self.assertFalse(are_almost_equal(o1, o2, 0.001, 0.001))

    def test_classes_with_slots(self):
        class C(object):
            __slots__ = ['a', 'b']

            def __init__(self, a, b):
                self.a = a
                self.b = b

        o1 = C(3.3, 4.4)
        o2 = C(3.4, 4.5)
        self.assertTrue(are_almost_equal(o1, o2, 0.3, 0.3))
        self.assertFalse(are_almost_equal(o1, o2, -1, 0.01))

    def test_dataclasses(self):
        @dataclass
        class D:
            s: str
            i: int
            f: float

        @dataclass
        class E:
            f2: float
            f4: str
            d: D

        o1 = E(12.3, 'hi', D('hello', 34, 20.01))
        o2 = E(12.1, 'hi', D('hello', 34, 20.0))
        self.assertTrue(are_almost_equal(o1, o2, -1, 0.4))
        self.assertFalse(are_almost_equal(o1, o2, -1, 0.001))

        o3 = E(12.1, 'hi', D('ciao', 34, 20.0))
        self.assertFalse(are_almost_equal(o2, o3, -1, -1))

    def test_ordereddict(self):
        o1 = OrderedDict({1: 'hey', 345.23: [123, 'hi', 890.12]})
        o2 = OrderedDict({1: 'hey', 345.23: [123, 'hi', 890.0]})
        self.assertTrue(are_almost_equal(o1, o2, 0.01, -1))
        self.assertFalse(are_almost_equal(o1, o2, 0.0001, -1)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-06-22T22:42:00.473

我仍然会使用`self.assertEqual()`它，因为当狗屎击中粉丝时，它会保持最丰富的信息。您可以通过四舍五入来做到这一点，例如。

```
self.assertEqual(round_tuple((13.949999999999999, 1.121212), 2), (13.95, 1.12)) 
```

`round_tuple`在哪里

```
def round_tuple(t: tuple, ndigits: int) -> tuple:
    return tuple(round(e, ndigits=ndigits) for e in t)

def round_list(l: list, ndigits: int) -> list:
    return [round(e, ndigits=ndigits) for e in l] 
```

根据 python 文档（请参阅[https://stackoverflow.com/a/41407651/1031191](https://stackoverflow.com/a/41407651/1031191)），您可以摆脱像 13.94999999 这样的舍入问题， `13.94999999 == 13.95`因为`True`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-09T19:16:15.263

# 使用熊猫

另一种方法是将两个 dicts 等中的每一个转换为 pandas 数据帧，然后用于`pd.testing.assert_frame_equal()`比较两者。我已经成功地使用它来比较字典列表。

以前的答案通常不适用于涉及字典的结构，但这个答案应该。我还没有在高度嵌套的结构上对此进行详尽的测试，但想象一下 pandas 会正确处理它们。

## 示例 1：比较两个字典

为了说明这一点，我将使用您的 dict 示例数据，因为其他方法不适用于 dicts。你的字典是：

```
x, y = 0.1234567890, 0.1234567891
{1: x, 2: x, 3: x}, {1: y, 2: y, 3: y} 
```

然后我们可以这样做：

```
pd.testing.assert_frame_equal(      
   pd.DataFrame.from_dict({1: x, 2: x, 3: x}, orient='index')   ,         
   pd.DataFrame.from_dict({1: y, 2: y, 3: y}, orient='index')   ) 
```

这不会引发错误，这意味着它们具有一定的精度。

但是，如果我们要这样做

```
pd.testing.assert_frame_equal(      
   pd.DataFrame.from_dict({1: x, 2: x, 3: x}, orient='index')   ,         
   pd.DataFrame.from_dict({1: y, 2: y, 3: y + 1}, orient='index')   ) #add 1 to last value 
```

然后我们会收到以下信息性消息：

```
AssertionError: DataFrame.iloc[:, 0] (column name="0") are different

DataFrame.iloc[:, 0] (column name="0") values are different (33.33333 %)
[index]: [1, 2, 3]
[left]:  [0.123456789, 0.123456789, 0.123456789]
[right]: [0.1234567891, 0.1234567891, 1.1234567891] 
```

有关更多详细信息，请参阅pd.testing.assert_frame_equal[文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.testing.assert_frame_equal.html) ，尤其是参数`check_exact`，以获取有关如何指定相对或实际所需精度的信息。`rtol``atol`

## 示例 2：字典的嵌套字典

```
a = {i*10 : {1:1.1,2:2.1} for i in range(4)}
b = {i*10 : {1:1.1000001,2:2.100001} for i in range(4)}
# a = {0: {1: 1.1, 2: 2.1}, 10: {1: 1.1, 2: 2.1}, 20: {1: 1.1, 2: 2.1}, 30: {1: 1.1, 2: 2.1}}
# b = {0: {1: 1.1000001, 2: 2.100001}, 10: {1: 1.1000001, 2: 2.100001}, 20: {1: 1.1000001, 2: 2.100001}, 30: {1: 1.1000001, 2: 2.100001}} 
```

然后做

```
pd.testing.assert_frame_equal(   pd.DataFrame(a), pd.DataFrame(b) ) 
```

- 它不会引发错误：所有值都非常相似。但是，如果我们改变一个值，例如

```
b[30][2] += 1
#  b = {0: {1: 1.1000001, 2: 2.1000001}, 10: {1: 1.1000001, 2: 2.1000001}, 20: {1: 1.1000001, 2: 2.1000001}, 30: {1: 1.1000001, 2: 3.1000001}} 
```

然后运行相同的测试，我们得到以下明确的错误消息：

```
AssertionError: DataFrame.iloc[:, 3] (column name="30") are different

DataFrame.iloc[:, 3] (column name="30") values are different (50.0 %)
[index]: [1, 2]
[left]:  [1.1, 2.1]
[right]: [1.1000001, 3.1000001] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-19T16:21:41.427

您还可以`unittest.assertAlmostEquals()`通过向单元测试添加方法来递归调用已经存在的元素并跟踪您正在比较的元素。

例如，对于列表列表和浮点元组列表：

```
def assertListAlmostEqual(self, first, second, delta=None, context=None):
    """Asserts lists of lists or tuples to check if they compare and 
       shows which element is wrong when comparing two lists
    """
    self.assertEqual(len(first), len(second), msg="List have different length")
    context = [first, second] if context is None else context
    for i in range(0, len(first)):
        if isinstance(first[0], tuple):
            context.append(i)
            self.assertListAlmostEqual(first[i], second[i], delta, context=context)
        if isinstance(first[0], list):
            context.append(i)
            self.assertListAlmostEqual(first[i], second[i], delta, context=context)
        elif isinstance(first[0], float):
            msg = "Difference in \n{} and \n{}\nFaulty element index={}".format(context[0], context[1], context[2:]+[i]) \
                if context is not None else None
            self.assertAlmostEqual(first[i], second[i], delta, msg=msg) 
```

输出类似：

```
line 23, in assertListAlmostEqual
    self.assertAlmostEqual(first[i], second[i], delta, msg=msg)
AssertionError: 5.0 != 6.0 within 7 places (1.0 difference) : Difference in 
[(0.0, 5.0), (8.0, 2.0), (10.0, 1.999999), (11.0, 1.9999989090909092)] and 
[(0.0, 6.0), (8.0, 2.0), (10.0, 1.999999), (11.0, 1.9999989)]
Faulty element index=[0, 1] 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-08-23T15:51:49.390

另一种方法是将您的数据转换为可比较的形式，例如将每个浮点数转换为具有固定精度的字符串。

```
def comparable(data):
    """Converts `data` to a comparable structure by converting any floats to a string with fixed precision."""
    if isinstance(data, (int, str)):
        return data
    if isinstance(data, float):
        return '{:.4f}'.format(data)
    if isinstance(data, list):
        return [comparable(el) for el in data]
    if isinstance(data, tuple):
        return tuple([comparable(el) for el in data])
    if isinstance(data, dict):
        return {k: comparable(v) for k, v in data.items()} 
```

那么你就可以：

```
self.assertEquals(comparable(value1), comparable(value2)) 
```

# android - 将事件发送到另一个应用程序

> ID：12136764
> 
> 赞同：-2
> 
> 时间：2012-08-27T05:46:59.353
> 
> 标签：android, android-activity

我知道所有的 android 应用程序都在它们的沙箱中运行，唯一与之通信的方法是使用意图和内容提供程序。无论如何我想问是否有任何方法可以发送到另一个活动事件？我想从我的服务发送到另一个应用程序的活动触摸事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T04:53:20.953

您不能从其他应用程序发送按键和触摸事件，您需要 root 访问权限才能执行此操作。

# iphone - iPhone- Collection <__NSArrayM: 0x1416eea0> 在枚举时发生了变异

> ID：12136766
> 
> 赞同：0
> 
> 时间：2012-08-27T05:47:04.870
> 
> 标签：iphone, objective-c, ios5, nsmutablearray, collision

在我的 iphone 游戏中，在 ios 4.0 模拟器上运行时一切正常。但是，当使用 5.0 模拟器或 5.0+ 设备运行时，应用程序在第一级崩溃并留下错误：

> 由于未捕获的异常“NSGenericException”而终止应用程序，原因：
> *** Collection <__NSArrayM: 0x1416eea0> 在枚举时发生了突变。
> *** First throw call stack:
> (0x1d6a052 0x20d0d0a 0x1d69c21 0x6f8e 0x8bd48 0x94020 0xba169 0xbcee4 0x85a2db 0x85a1af 0x1d3e966 0x1d3e407 0x1ca17c0 0x1ca0db4 0x1ca0ccb 0x2702879 0x270293e 0x90fa9b 0x1f31 0x1eb5 0x1)
> terminate called throwing an exception(lldb)

我认为我已经将问题缩小到这段代码。我知道问题是在 for 循环中删除对象，但似乎无法找到解决方案。

这是我的代码：

```
//remove the projectile

for (CCSprite *projectile in projectilesToDelete) {
    [_projectiles removeObject:projectile];
    [self removeChild:projectile cleanup:YES];
}       
[projectilesToDelete release];

//remove the projectile

for (CCSprite *targetDel in targetsToDelete) {  
    targetDel.position = ccp(-2000, -2000);
    [self removeChild:targetDel cleanup:YES];
    [_targets removeObject:targetDel];
}                        
[targetsToDelete release]; 
```

请帮忙，这几天一直在想办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:37:44.810

简而言之，表达式：

```
for (OBJ * VAR in COLLECTION) { 
```

使用一种称为**快速枚举**的技术。这里发生的是编译器在堆栈上插入一些隐藏的后备存储，并从可以枚举的类型中请求一组元素。因为它一次抓取许多对象并对其进行迭代，所以`COLLECTION`在枚举容器时改变容器 () 是错误的，因为堆栈区域和集合可能会不同步。

解决方法是在您更改要枚举的内容时避免快速枚举 - 要么这样，要么在某些情况下您可以枚举副本。标准`for(i;c;e)`循环不使用快速迭代——但`for(in)`确实使用了它。

* * *

改变程序以避免快速枚举错误的一种方法是：

```
// remove the projectile
while (projectilesToDelete.count) {
    CCSprite * projectile = projectilesToDelete[0];
    [_projectiles removeObject:projectile];
    [self removeChild:projectile cleanup:YES];
}
[projectilesToDelete release];

// remove the projectile
while (targetsToDelete.count) {
    CCSprite * targetDel = targetsToDelete[0];
    targetDel.position = ccp(-2000, -2000);
    [self removeChild:targetDel cleanup:YES];
    [_targets removeObject:targetDel];
}
[targetsToDelete release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T06:29:26.913

你的代码的问题是，考虑这个..... projectilesToDelete 数组有 3 个元素（A，B，C）......

在第一次迭代中，您 removeObject(A).. 在该数组计数变为 2 时，即数组内容将为 (B, C) 但它认为它是 3(B,C, Nil)。

所以 Array 在枚举时被修改了。所以它会给出一个例外。

将代码更改为此

```
// get array length
int count = projectilesToDelete. length;

// iterate through the array    
for (int iter = 0; iter < count; inter++) 
{
     CCSprite *projectile = projectilesToDelete [iter];

     [_projectiles removeObject:projectile];

     [self removeChild:projectile cleanup:YES];

      // decrement count
      count--;
      iter--;
} 
```

# android - GCM 可以通过代理工作吗？

> ID：12136768
> 
> 赞同：2
> 
> 时间：2012-08-27T05:47:13.463
> 
> 标签：android, proxy, google-cloud-messaging

我正在尝试通过代理工作 GCM。我没有找到任何方法在 GCM 服务器文档中提供我的代理详细信息。

我尝试设置 System.setProperty，如[另](https://stackoverflow.com/questions/11444372/google-cloud-messaging-gcm-through-proxy)一篇文章中所述。但这对我不起作用。

我可以通过修改 gcm-server 代码来工作的唯一方法。[ Post() 方法中包含代理详细信息。]

我不确定许可是否允许修改 GCM 服务器源并将其用于商业目的。

请让我知道这可能吗？

# mysql - 从 MySQL 写入 CSV？

> ID：12136773
> 
> 赞同：1
> 
> 时间：2012-08-27T05:47:42.333
> 
> 标签：mysql, sql, csv, mysqldump

我正在尝试将 MySQL 中的表导出为 CSV，但我遇到了麻烦。我尝试了两种方法，但都没有奏效。

第一的：

```
SELECT * 
INTO OUTFILE '/path/to/filename.csv' 
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"' 
ESCAPED BY '\\' 
LINES TERMINATED BY '\n' 
FROM table; 
```

第二：

```
mysqldump -u [username] -p -t -T/path/to/directory [database] [table] --fields-enclosed-by=\" --fields-terminated-by=, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:49:39.163

试试这个例子，

```
SELECT order_id,product_name,qty FROM orders
INTO OUTFILE '/tmp/orders.csv'
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n' 
```

**[资源](http://www.tech-recipes.com/rx/1475/save-mysql-query-results-into-a-text-or-csv-file/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:33:20.543

**SELECT order_id,product_name,qty FROM orders INTO OUTFILE '/tmp/orders.csv' FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n'**

如果它不起作用是正确的然后尝试避免文件的路径....只需给出文件名并在执行后查看“ **/var/lib/mysql/dbname** ”中的结果文件。

# java - RESTEasy Mock vs. Exception Mapper vs. Context

> ID：12136780
> 
> 赞同：6
> 
> 时间：2012-08-27T05:48:46.060
> 
> 标签：java, exception, mocking, resteasy

RESTEasy 模拟框架在没有异常映射器的情况下工作正常——收到请求并返回带有预期内容的实体。

注册异常映射器并强制异常后，当RESTEasy内部调用ResteasyProviderFactory.getContextData(type)时调用失败，返回null，导致意外错误消息：“无法找到类型的上下文数据：javax.servlet.http.HttpServletRequest” .

在任何地方都找不到 RESTEasy 模拟和异常映射器的任何在线示例，也找不到有关该错误的任何有用信息。

客户端类：

```
package com.foo;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "foo-type", propOrder = {
    "name"
})
@XmlRootElement(name = "foo")
public class Foo {

    protected String name;

    public String getName() {
        return name;
    }

    public void setName(String value) {
        this.name = value;
    }
} 
```

对象工厂：

```
package com.foo;

import javax.xml.bind.annotation.XmlRegistry;

@XmlRegistry
public class ObjectFactory {

    public ObjectFactory() {
    }

    public Foo createFoo() {
        return new Foo();
    }
} 
```

验证异常：

```
package com.foo;

public class ValidationException extends RuntimeException {

    private static final long serialVersionUID = -8100360206713223313L;

    public ValidationException(String message) {
        super(message);
    }

    public ValidationException(Exception innerException) {
        super(innerException);
    }

    public ValidationException(String message, Exception innerException) {
        super(message, innerException);
    }
} 
```

服务端点：

```
package com.foo;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/rest/v1")
public class FooService {

    @GET
    @Path("/foo")
    @Produces("application/xml")
    public Foo alwaysBlowUp() throws ValidationException {
        if (System.currentTimeMillis() > 0) {
            throw new ValidationException("FOO");
        }
        return null;
    }
} 
```

异常映射器：

```
package com.foo;

import javax.servlet.http.HttpServletRequest;
import javax.ws.rs.core.Context;
import javax.ws.rs.core.HttpHeaders;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.ws.rs.core.Response.ResponseBuilder;
import javax.ws.rs.core.Response.Status;
import javax.ws.rs.ext.ExceptionMapper;
import javax.ws.rs.ext.Provider;

@Provider
public class FooExceptionMapper implements ExceptionMapper<ValidationException> {

    @Context
    private static HttpServletRequest request;
    @Context
    private static HttpHeaders headers;

    @Override
    public Response toResponse(ValidationException exception) {
        MediaType mediaType = null;

/*
Set breakpoint on line below.
Step over line and you get the exception in the logs.
Step into the line and the problem is in ResteasyProviderFactory:

public static <T> T getContextData(Class<T> type)
{
    return (T) getContextDataMap().get(type); <<< type == javax.servlet.http.HttpServletRequest
}

The type is not in the map, so it returns null.

The null results in this error in ContextParameterInjector:

private class GenericDelegatingProxy implements InvocationHandler
{
    public Object invoke(Object o, Method method, Object[] objects) throws Throwable
    {
        try
        {
            Object delegate = ResteasyProviderFactory.getContextData(type);
            if (delegate == null)
               throw new LoggableFailure("Unable to find contextual data of type: " + type.getName()); <<< ERROR IN LOGS
*/

        String acceptHeader = request.getHeader("accept");

        if (MediaType.APPLICATION_XML.equals(acceptHeader)) {
            mediaType = MediaType.APPLICATION_XML_TYPE;
        } else if (MediaType.APPLICATION_JSON.equals(acceptHeader)) {
            mediaType = MediaType.APPLICATION_JSON_TYPE;
        } else {
            mediaType = headers.getMediaType();

            if (mediaType == null) {
                mediaType = MediaType.APPLICATION_XML_TYPE;
            }
        }

        ResponseBuilder builder = Response.status(Status.BAD_REQUEST);
        builder.type(mediaType);
        return builder.build();
    }
} 
```

测试：

```
package com.foo;

import java.net.URISyntaxException;

import org.jboss.resteasy.core.Dispatcher;
import org.jboss.resteasy.mock.MockDispatcherFactory;
import org.jboss.resteasy.mock.MockHttpRequest;
import org.jboss.resteasy.mock.MockHttpResponse;
import org.jboss.resteasy.plugins.server.resourcefactory.POJOResourceFactory;

public final class TestFooExceptionMapper {

    public static void main(String[] args) throws URISyntaxException {
        Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();
        dispatcher.getRegistry().addResourceFactory(new POJOResourceFactory(FooService.class));
        dispatcher.getProviderFactory().addExceptionMapper(FooExceptionMapper.class);

        MockHttpRequest request = MockHttpRequest.get("/rest/v1/foo");
        MockHttpResponse response = new MockHttpResponse();
        dispatcher.invoke(request, response);
    }
} 
```

错误：

```
Aug 26, 2012 10:44:26 PM org.jboss.resteasy.core.SynchronousDispatcher 
SEVERE: Failed executing GET /rest/v1/foo
org.jboss.resteasy.spi.LoggableFailure: Unable to find contextual data of type: javax.servlet.http.HttpServletRequest
    at org.jboss.resteasy.core.ContextParameterInjector$GenericDelegatingProxy.invoke(ContextParameterInjector.java:56)
    at $Proxy18.getHeader(Unknown Source)
    at com.foo.FooExceptionMapper.toResponse(FooExceptionMapper.java:51)
    at com.foo.FooExceptionMapper.toResponse(FooExceptionMapper.java:1)
    at org.jboss.resteasy.core.SynchronousDispatcher.executeExceptionMapper(SynchronousDispatcher.java:330)
    at org.jboss.resteasy.core.SynchronousDispatcher.unwrapException(SynchronousDispatcher.java:359)
    at org.jboss.resteasy.core.SynchronousDispatcher.handleApplicationException(SynchronousDispatcher.java:348)
    at org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:220)
    at org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:196)
    at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:551)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:513)
    at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:125)
    at com.foo.TestFooExceptionMapper.main(TestFooExceptionMapper.java:20) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T08:08:33.887

问题是“模拟框架”不提供`HttpServletRequest`上下文。它与`ExceptionMapper`.

Resteasy`@Context`根据`ResteasyProviderFactory.getContextDataMap()`. 当此地图不包含 的实例时`HttpServletRequest`，它会因错误“无法找到类型的上下文数据...”而爆炸

我通过`HttpServletRequest`在 resteasy 上下文中放置一个模拟来解决这个问题：

```
Dispatcher dispatcher = MockDispatcherFactory.createDispatcher();
dispatcher.getRegistry().addSingletonResource(new Service());

ResteasyProviderFactory
        .getContextDataMap()
        .put(HttpServletRequest.class, new MockHttpServletRequest());

MockHttpResponse response = new MockHttpResponse();

dispatcher.invoke(
    MockHttpRequest.get("/"),
    response
); 
```

# javascript - 需要 url 哈希修复

> ID：12136787
> 
> 赞同：1
> 
> 时间：2012-08-27T05:49:24.467
> 
> 标签：javascript, jquery

我正在尝试在我的网站中使用 ajax 代码。我的问题是我只想使用链接的最后一部分..否则哈希值将变为此处：

```
http://localhos./~ytsejam/wlog/public/#http://localhos./~ytsejam/wlog/public/index.php/ 
```

这是我用于散列的行和 ajax 代码：

```
window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-4); 
```

这是我在源代码中的菜单项

```
<li><a href="http://localhos./~ytsejam/wlog/public/index.php/abouts">HAKKIMIZDA</a></li> 
```

.

如何更改 subsrt 值以在此处工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:01:56.333

我建议您在分配数据时更加明确，而不是解析 URL 字符串。

尝试这样的事情

```
<a href="http://localhos./~ytsejam/wlog/public/index.php/abouts"
   data-hash="abouts">HAKKIMIZDA</a> 
```

然后在事件处理程序中使用 data 属性

```
window.location.hash = $(this).data('hash'); 
```

## 更新

使用[`HTML::link_to_route()`](http://laravel.com/api/class-Laravel.HTML.html#_link_to_route)，你会做类似的事情

```
{{HTML::link_to_route('abouts', 'HAKKIMIZDA', array(), array(
    'data-hash' => 'abouts'
))}} 
```

我建议您熟悉所选框架的文档。

# html - 在 iframe 页面内容加载时显示加载 gif

> ID：12136788
> 
> 赞同：16
> 
> 时间：2012-08-27T05:49:29.513
> 
> 标签：html, iframe, loading, show, gif

我搜索并尝试了各种解决方案来解决我想要实现的目标，但无济于事......

我正在一个摄影网站上工作，该网站在 iframe 中加载了大量图像，这需要一些时间来加载。我想在 iframe 中显示加载 gif 图像，直到图像完成加载。

这是有问题的网站，[http://www.chriszachary.com/portfolio](http://www.chriszachary.com/portfolio)

我正在使用 javascript 动态库来允许用户用鼠标控制图像滚动。在页面完全加载之前，图像不会滚动。为了帮助减少混乱，我认为加载 gif 图像会更有效，但我无法完成。如果您单击任何投资组合类别（婚礼、订婚、肖像），您会注意到加载图像的等待时间很长。

如果有人可以让我知道如何在 iframe 中实现这一点，请告诉我。如果您可以具体说明使用什么代码以及在哪里使用，我是新手：|

在此先感谢，期待答案:)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-27T18:34:45.287

用下面的 HTML替换该`IFRAME`页面中的标记。被找到加载图像（或任何图像）的位置`IFRAME`覆盖。`DIV`图像位于`DIV`区域的中心，其大小最大为 950x633 像素。加载页面时`IFRAME`，加载图像将被隐藏。

您需要更改的是您网站的图片 URL。您可能还想更改`DIV`背景颜色（当前设置为`#FFF`）。

```
<style>
#loadImg{position:absolute;z-index:999;}
#loadImg div{display:table-cell;width:950px;height:633px;background:#fff;text-align:center;vertical-align:middle;}
</style>
<div id="loadImg"><div><img src="loading.gif" /></div></div>
<iframe border=0 name=iframe src="html/wedding.html" width="950" height="633" scrolling="no" noresize frameborder="0" onload="document.getElementById('loadImg').style.display='none';"></iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-05T06:56:24.050

加载 iframe 时可以使用 jquery 触发

```
$('#iframeTest').on("load", function () {
    console.log('iframe loaded'); //replace with code to hide loader
}); 
```

# wordpress - 如何检测和纠正我博客上的这些错误？

> ID：12136796
> 
> 赞同：2
> 
> 时间：2012-08-27T05:50:36.183
> 
> 标签：wordpress, google-analytics, blogs, adsense

我的博客是 valcun.com，我正在尝试让 adsense 获得批准。我已经申请了两次，但两次谷歌都拒绝说我的博客不遵守谷歌政策。原因尚不清楚。所以我很困惑。我写的是copyscape-pass的原创内容，没有什么令人反感的。对于外行来说，它是一个干净的技术博客。

我玩了谷歌分析并发现了这些问题。我的博客出了什么问题，为什么 Google 不批准 Adsense？现在已经6个月了。

我定期从我的 cPanel 在 hostgator 站点中向 google、yahoo 等提交站点地图。我有robot.txt 文件。我不知道谷歌不会批准我的博客有什么问题！我看过不到一个月的博客和 Adsense！怎么会这样？我在我的文章中进行页面搜索引擎优化，并且我也在文章目录中提交我的文章。那么，为什么 google 不想为我的博客批准 Adsense 呢？

我假设这是由于以下错误导致我的博客没有获得批准。是这样吗？我该如何纠正这些？

![在此处输入图像描述](../Images/b56ded825c892e2c6e458cfd021ed2e5.png)

![在此处输入图像描述](../Images/4a1d5ff559609df0701f329609bd0dd1.png)

![在此处输入图像描述](../Images/4debad9baf23e073b9e872abfc84d591.png)

![在此处输入图像描述](../Images/88954da10bdce08e148591ac4aa20cd8.png)

![在此处输入图像描述](../Images/7441ef243f79fc8f9bd8d93be81c2436.png)

## 编辑 1

@Secret：是的，我目前正在使用 Yoast。我也尝试过多合一搜索引擎优化。那些重复的元描述条目只显示我博客的标题。我的意思是我该如何纠正这个错误。我无法理解要改变什么以及如何改变。

此外，我更专注于谷歌自然搜索流量并避免任何类型的推荐流量，因为我在某处读到自然流量至少需要 50%。我今天查了一下，现在搜索流量已经达到了 50%，如果我看到总共 6 个月的话。谷歌仍然不会批准。

除了上述错误外，网站管理员工具还显示以下我无法理解的站点地图错误。

![在此处输入图像描述](../Images/b929278c038c095a9557ab48ffb9dad4.png)

## 编辑 2

我的博客上有 2 个 SEO 插件，我会将我的每篇文章的元描述放在 All in One SEO 和 Yoast 的“Wordpress SEO”两个插件中。现在我前几天从“All in one SEO”中删除了所有文章的元描述，但仍然网络管理员工具显示重复的元标记和描述。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T05:55:18.193

该报告确实说存在重复的元描述和简短的元描述，因此如果您改进它们会有所帮助。据我所知，您正在使用 Wordpress。您是否尝试过使用任何 SEO 插件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T20:40:17.450

> 元描述标签虽然对搜索引擎排名不重要，但对于从搜索引擎结果页面 (SERP) 获得用户点击非常重要。这些简短的段落是网站管理员向搜索者宣传内容并让他们确切知道给定页面与他们正在寻找的内容有关的机会。元描述应该智能地使用关键字，但也应该创建一个搜索者想要点击的引人注目的描述。与页面的直接相关性和每个页面的元描述之间的唯一性是关键。描述最好在 150-160 个字符之间。*

来自[SEOMOZ](http://www.seomoz.org/learn-seo/meta-description)

你应该让 Yoast 或 All in one 来做元标记。您说您同时使用了两者，也许您在使用完其中之一后没有将它们删除。

试试[Xenu](http://home.snafu.de/tilman/xenulink.html)来帮助您识别哪些页面被认为是重复的并将它们整理出来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T03:48:55.693

这可能与您网站上的广告定位有关。[Google 的 Adsense 政策](http://support.google.com/adsense/bin/answer.py?hl=en&answer=23921)规定：

> 在广告和页面控件之间保持足够的空间。

目前尚不清楚 Google 所说的“页面控件”究竟是什么意思，但他们可能会将您网站的主要导航视为“页面控件”，这可能是您被拒绝的原因之一。

同样来自 Google 的 Adsense 政策：

> 确保您的广告在您的网站上放置得恰到好处，远离互动元素，不要模仿周围的内容，也不要放置在误导性标题下。

您网站右侧的 Google 广告块可能与您网页上的其他内容[“融合”](http://support.google.com/adsense/bin/answer.py?hl=en&answer=1346295#Formatting_content_to_mimic_ads)太多。

那么你可以把它们放在哪里呢？好吧，我已经成功地在单个博客文章的内容中间或末尾放置了一个广告块。因此，我建议从您现在拥有它们的位置删除广告，将它们放置在我建议的位置，然后重新申请。如果你仍然被拒绝，至少你可以把它从你的名单上划掉。

# c - 如果 void** 指针类型转换为“指向 COL 大小整数数组的指针”，那么它的行为应该改变并且表现得像 2D 数组？

> ID：12136797
> 
> 赞同：0
> 
> 时间：2012-08-27T05:50:41.153
> 
> 标签：c

> **可能重复：**
> [为具有最少 malloc 调用次数的 2D 数组分配内存](https://stackoverflow.com/questions/12133832/allocate-memory-for-2d-array-with-minimum-number-of-malloc-calls)

据我所知，C void 指针会自动转换为适当的数据类型。以下是我发现警告的程序：

> 从不兼容的指针类型初始化[默认启用]

```
#define ROW 3
#define COL 2

int main()
{

        void **ptr = malloc( ROW*COL* sizeof(int) );

        int (*p)[COL] = ptr;

        int i, j;

        for( i = 0; i < ROW; ++i )
                for( j = 0; j < COL; ++j )
                        scanf("%d", &p[i][j]);

        for( i = 0; i < ROW; ++i )
        {
                for( j = 0; j < COL; ++j )
                        printf("%d ", p[i][j]);
                printf("\n");
        }
        free(ptr);
        return 0;
} 
```

但它工作得很好。如果`void**`指针类型转换为“指向 COL 大小整数数组的指针”，那么它的行为应该改变并且表现得像 2D 数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:01:37.160

首先，`void **`指针不是`void *`指针。`void **`并且`void *`是两种完全不同的类型。无论转换属性适用于`void *`什么，都不适用于您的`ptr`. 正如编译器在警告消息中告诉您的那样，您的初始化确实无效。

其次，程序中绝对不需要`void **`指针。无论如何，它是从哪里形成的？如果你想`ptr`在你的程序中有一个“中间”指针，你应该用`void *`type声明它

```
void *ptr = malloc(ROW * COL * sizeof(int));
int (*p)[COL] = ptr; 
```

警告就会消失。但是，正如我在之前的回答中所说，在这种情况下实际上不需要任何中间指针。你可以做

```
int (*p)[COL] = malloc(ROW * sizeof *p); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T05:58:48.937

您可以将指针*分配*给`void`指向任何指针的指针。但是，您将指针分配给 void 指针：这是不同的。

# css - 基于 href 属性中的片段标识符的 CSS 选择元素

> ID：12136800
> 
> 赞同：1
> 
> 时间：2012-08-27T05:50:59.520
> 
> 标签：css, css-selectors, fragment-identifier

我正在使用[tabview](http://yuilibrary.com/yui/docs/tabview/)，它是 YUI3 库的一部分。

标记基本上如下所示：

```
<div id="demo" class="yui3-tabview-content">
  <ul class="yui3-tabview-list">
    <li class="yui3-tab yui3-widget yui3-tab-selected">
      <a href="#foo" class="yui3-tab-label yui3-tab-content" tabindex="0">foo</a>
    </li>
  </ul>
  <div class="yui3-tabview-panel">
    <div id="foo" class="yui3-tab-panel yui3-tab-panel-selected">
      <p>
        foo content
      </p>
    </div>
  </div>
</div> 
```

标记的小提琴：http: [//jsfiddle.net/zb6su/](http://jsfiddle.net/zb6su/)

问题：我正在编写一些 javascript 代码，并希望选择一个给定`tabview-panel`. 假设`foo`在这种情况下我能够获得 id, 。我想选择带有 的选项卡`a[href=#foo]`。

问题是`a[href=#foo]`根本不起作用，因为`#`用于选择 Ids。我也试过`a[href="#foo"]`无济于事。是否有 css 选择器根据`href`属性中的 URL 片段选择链接？

我知道使用 javascript，我可以遍历所有节点并检查 href 属性，但我更愿意尽可能使用 CSS 选择器。

* * *

更新：选择器确实有效。看起来这是 FireFinder 中的一个错误（我用来测试选择器的扩展）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T05:57:45.317

它适用于相同的选择器，但使用 jQuery ( [fiddle](http://jsfiddle.net/zb6su/1/) )。

```
$('a[href="#foo"]').text(); 
```

返回“富”。[与 CSS 相同](http://jsfiddle.net/zb6su/3/)：

```
a[href="#foo"] {
    color:red;
} 
```

* * *

似乎问题更多在于 F21 的 FireFinder，而不是`a[href="#foo"]`. 结案。

# mysql - 自动将 .txt 文件导入 MySQL 数据库

> ID：12136801
> 
> 赞同：0
> 
> 时间：2012-08-27T05:51:03.017
> 
> 标签：mysql

如何设置将 .txt 文件从文件夹自动导入 MySQL 数据库？

另外，我希望导入的每个文本文件都在自己的表中；例如，导入“john.txt”会创建一个名为 john 的表，导入 john2.txt 会创建一个名为 john2 的表。

文本文件以“COMPUTERNAME-DATE.txt”的格式命名，并存储在我电脑的“C:\inetpub\FTP Logs 文件夹”中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-01-17T04:13:02.020

我认为最好的方法是编写自己的导入器并将其放入某种 Window CRON 中（有类似的东西吗？）。

# visual-studio-2010 - CUDA 4.2.props 和目标文件丢失（Visual Studio 2010）

> ID：12136808
> 
> 赞同：1
> 
> 时间：2012-08-27T05:52:49.910
> 
> 标签：visual-studio-2010, cuda

我正在尝试让 CUDA 4.2 工具包与 Visual Studio 2010（c++ express edition）一起使用。我在 Microsoft Windows 64 位上运行它。我目前安装了 SDK、工具包和 Nsight™ Visual Studio Edition 2.2，以及 Visual Studio 2010（c++ express edition）。我已经完全安装了 CUDA 并且本身可以正常工作，但是当我尝试使用 Visual Studio 2010 打开一个源项目时，我收到了这个错误：

> 无法读取项目文件“bandwidthTest_vs2010.vcxproj”。C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\src\bandwidthTest\bandwidthTest_vs2010.vcxproj(65,5)：导入的项目“C:\Program Files (x86)\MSBuild\Microsoft.Cpp \v4\. 0\BuildCustomization\CUDA 4.2.props”没有找到。确认 Import 声明中的路径正确，并且该文件存在于磁盘上。

我已尝试卸载工具包和 SDK 并重新安装，但这并没有解决问题。我认为如果有人可以简单地给我文件，那么它可能会起作用。但是，我仍然担心为什么我首先会遇到这个问题。任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-12T12:00:16.577

它可能已经解决了，但是对于那些登陆这里的人：

如果遇到这种情况，很可能是 CUDA 工具包没有正确安装。只需从

```
C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\extras\visual_studio_integration\MSBuildExtensions 
```

到

```
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:14:00.183

`Microsoft.Cpp`您提供的路径后面有一个空格。这只是问题中的格式错误吗？我也很好奇 SDK 是如何进入内部的`ProgramData`。

[尝试按照Microsoft Windows 入门指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_Getting_Started_Windows.pdf)中的第 10 页“为现有项目构建自定义”中的说明进行操作。如果这没有帮助，请检查文档的其余部分。

如果仍然无法正常工作，请尝试另一个卸载，包括卸载 Visual Studio。然后首先重新安装 Visual Studio，然后重新安装 Nsight。

如果你让事情顺利进行，请添加评论并让我们知道有什么帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-26T08:26:50.690

**由于这个帖子很旧，我会一般回答**

假设您的错误是：

> 未找到导入的项目“C:\Program Files (x86)\MSBuild\Microsoft.Cpp \v4.0\BuildCustomization\CUDA 10.1.props”。

简单地说，您的系统找不到`CUDA 10.1.props`文件。

首先，检查您的 cuda 版本：

```
nvcc --version 
```

*   如果您的 CUDA 版本是 10.1（与您的系统要求的相同），请使用*@paul-ianas*的答案。

*   如果您的 CUDA 版本是（例如）10.2，那么您的系统仍在寻找旧文件。解决方案：打开您的`.vcxproj`文件（显示在错误中）并将**每个 CUDA 10.1 替换为 CUDA 10.2**。重新启动您的 Visual Studio 并再次构建！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-18T20:21:37.260

**已解决的** 博客文章 [https://saralasewwandikumarage.blogspot.com/2021/08/how-to-use-gpu-in-your-machine-for.html](https://saralasewwandikumarage.blogspot.com/2021/08/how-to-use-gpu-in-your-machine-for.html)

从此路径复制所有文件（取决于您安装 CUDA 的路径）

C:\Program Files\NVIDIA GPU 计算工具包\CUDA\v10.1\extras\visual_studio_integration\MSBuildExtensions

到这条路：

C:\Program Files (x86)\Microsoft Visual Studio\2019\Community\MSBuild\Microsoft\VC\v160\BuildCustomizations [https://saralasewwandikumarage.blogspot.com/2021/08/blog-post.html](https://saralasewwandikumarage.blogspot.com/2021/08/blog-post.html)

# objective-c - 简单的登录推特

> ID：12136809
> 
> 赞同：0
> 
> 时间：2012-08-27T05:53:09.207
> 
> 标签：objective-c, ios, twitter-oauth

是否有任何示例如何登录 Twitter 以获取用户 ID？

我想使用 twitter 实现登录到我的应用程序。出于这个原因，我想获得用户 twitter id。有很多例子如何实现几乎所有的 twitter 应用程序，但我不需要这个。

在 twitter 文档中有一种新的登录方式，称为 xAuth： [xAuth](https://dev.twitter.com/docs/oauth/xauth)

在这有登录的例子：

```
oauth_consumer_key - JvyS7DO2qd6NNTsXJ4E7zA
oauth_consumer_secret - 9z6157pUbOBqtbm0A0q4r29Y2EYzIHlUwbF4Cl9c
oauth_nonce - 6AN2dKRzxyGhmIXUKSmp1JcB4pckM8rD3frKMTmVAo
oauth_signature_method - HMAC-SHA1
oauth_timestamp - 1284565601
oauth_version - 1.0
x_auth_mode - client_auth
x_auth_password - twitter-xauth
x_auth_username - oauth_test_exec 
```

`oauth_consumer_key`没看懂怎么 `oauth_consumer_secret`找回`oauth_nonce`

也许有使用 OAuth 进行简单登录的示例？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T05:59:27.113

要获取消费者密钥和消费者秘密，您必须通过[此](https://dev.twitter.com/apps)链接在 Twitter 中创建一个应用程序。

然后您将进入包含消费者密钥和消费者秘密的页面

您可以在 twitter 中使用[sharekit](http://getsharekit.com/)进行身份验证，只需在其中提供您的应用程序 Consumer Key 和 Consumer Secret

# variables - excel vba - 使用变量插入公式

> ID：12136812
> 
> 赞同：1
> 
> 时间：2012-08-27T05:53:28.960
> 
> 标签：variables, excel, excel-formula, vba

嗨，我想通过确定每个值的变量来将公式插入到单元格中。

例如。

```
=G5/D5 
```

所以在单元格中

```
Sheets("Sheet1").cells(LastRow + 2, 2).value = "=columnletter1 + (lastrow + 2)/columnletter2 + (lastrow + 2) 
```

通过确定列名是否为 X 且行是否为 LastRow + 2，我发现列字母为 G。如何编写以便将“=G5/D5”返回到单元格中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:30:32.173

不确定我是否完全理解您的要求，我认为您的意思是：

`columnletter1`是字符串，=`G`
`columnletter2`是字符串，=`D`
`lastrow`是长字符串，=`3`

要设置公式，请构造一个字符串并写入`.Formula`属性

```
 Sheets("Sheet1").cells(LastRow + 2, 2).Formula = _
    "=" & columnletter1 & lastrow + 2 & "/" & columnletter2 & lastrow + 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T01:59:03.007

对于下面的矩阵计算，包含变量公式的给定代码可能会有所帮助。

```
For ROW= 0 To K - 1
    For COL= 0 To J - 1
        Range("G5").Offset(ROW, COL).Select
        ActiveCell.FormulaR1C1 = _
        "=SUMIFS(R2C5:R500C5,R2C4:R500C4,RC[" & -COL- 1 & "],R2C2:R500C2,R[" & -ROW- 3 & "]C,R2C3:R500C3,R[" & -ROW- 2 & "]C)"

    Next
    COL= COL + 1

Next
ROW= ROW + 1 
```

# android - 没有从相机获取图像

> ID：12136816
> 
> 赞同：0
> 
> 时间：2012-08-27T05:53:56.727
> 
> 标签：android, android-intent

我正在发送带有额外路径的相机意图。但结果我没有得到图像路径。我哪里错了？

我的代码是

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
               if (!APP_FILE_PATH_Images.exists()) 
                {
                     APP_FILE_PATH_Images.mkdirs();
                }
             Uri uriSavedImage  =Uri.fromFile(new File(APP_FILE_PATH_Images+ File.separator +
                        "IMG_"+ getTimeStamp() + ".jpeg"));
             cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, uriSavedImage);
             startActivityForResult(cameraIntent, CAMERA_REQUEST); 
```

onActivityResult 代码是：

```
 else if(requestCode==CAMERA_REQUEST)
                {
                    Uri selectedImage = data.getData();
                    String[] proj = { MediaStore.Images.Media.DATA };
                    Cursor cursor = getContentResolver().query(selectedImage, proj, null, null, null);
                    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA);
                    cursor.moveToFirst();

                    final String filePath = cursor.getString(column_index);
                    Log.i("File path", filePath+"");
                    cursor.close();
                    runOnUiThread(new Runnable()
                    {
                        @Override
                        public void run() 
                        {
                            imageData= new ImagesData();
                            imageData.Source= filePath;
                            imageData.isVector= false;
                            addImage(imageData);
                        }
                    });

                } 
```

我可以使用相同的代码获取视频。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:24:28.337

您不需要在结果中返回路径：它将是您传入的路径。当您的结果返回时尝试使用该 URI。（也就是说，不要试图从 Intent 中读取，直接保存在本地即可。）这和抓视频是不一样的。有关详细信息，请参阅：http: [//developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html)

# macos - 如何使用 PyObjC 关闭和打开 Mac 的无线接口？

> ID：12136817
> 
> 赞同：5
> 
> 时间：2012-08-27T05:54:09.293
> 
> 标签：macos, cocoa, wireless, pyobjc, corewlan

如何使用 PyObjC 关闭和打开 Mac 的无线接口？迄今为止，我的研究将我引向了 Cocoa 框架和 PyObjC。在 Mac Developer 网站上，我找到了一个无线接口管理应用程序示例，演示了如何使用 Cocoa 框架来打开和关闭 Mac 的无线[接口](https://developer.apple.com/library/mac/#samplecode/CoreWLANWirelessManager/Introduction/Intro.html)。这个例子表明CoreWLAN框架下的CWInterface是完成关闭和打开Mac无线接口的任务所必需的。但是，PyObjC 似乎没有在其包装器中包含来自 Cocoa 的 CoreWLAN[框架](http://pypi.python.org/pypi/pyobjc-framework-Cocoa/2.3). 关于如何完成这项任务的任何想法？我可以实现我自己的 PyObjc 对象来调用 CoreWLAN 框架吗？如果可以的话，什么是关于如何做到这一点的好资源？谢谢你的时间！任何事情都有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:34:34.417

您可以使用以下方法手动加载框架：

```
import objc
objc.loadBundle('CoreWLAN', 
       bundle_path='/System/Library/Frameworks/CoreWLAN.framework', 
       module_globals=globals()) 
```

框架中的类现在在模块全局字典中可用。

获取无线接口：

```
iface = CWInterface.interface() 
```

然后，您可以使用以下命令打开或关闭电源：

```
iface.setPower_error_(True, None) 
```

或者

```
iface.setPower_error_(False, None) 
```

PS 我将在未来的版本中添加这个框架，目前它不可用的一个原因是我不知道这是一个公共框架。

# css - CSS：本地主机和服务器之间的对齐变化

> ID：12136819
> 
> 赞同：0
> 
> 时间：2012-08-27T05:54:26.867
> 
> 标签：css

我正在制作一个具有旋转背景图像的网页。在 localhost 上进行开发，我安排了一些东西，以便图像中的人位于我想要的位置。但是，当我推送到服务器并在不同的浏览器中打开网页时，有些人不在屏幕上，结果因浏览器而异。

这是我正在使用的 CSS

```
.animate-this .img1,
.animate-this .img3 {
    clear: left;
    display: block;
    width: 100%;
    height: 1210px;
    margin-left: auto;
    margin-right: auto;

}
.animate-this .img2 {
    clear: left;
    display: block;
    width: 1620px;
    height: 1210px;
    margin-left: auto;
    margin-right: auto;
    background-color: #2b292b;
    background-repeat: no-repeat;

}

.animate-this .img4 {
    clear: left;
    display: block;
    width: 1522px;
    height: 1210px;
    background-color: #2b292b;
    background-repeat: no-repeat;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:01:09.197

我检查了你提供的链接。我认为下面的 CSS 可能会有所帮助。

```
.animate-this .img1,
.animate-this .img3 {
    clear: left;
    display: block;
    width: 100%;
    height: 1210px;
    margin-left: auto;
    margin-right: auto;

}
.animate-this .img2 {
    clear: left;
    display: block;
    width: 100%;
    height: 1210px;
    margin-left: auto;
    margin-right: auto;
    background-color: #2b292b;
    background-repeat: no-repeat;

}

.animate-this .img4 {
    clear: left;
    display: block;
    width: 100%;
    height: 1210px;
    background-color: #2b292b;
    background-repeat: no-repeat;

} 
```

我还注意到您页面中的一件事。每次滚动它都会在您的页面中添加 3-4 张图像，这些图像已经在您的页面中。这将使页面变得沉重，因为这些是非常大的图像。因此，请查看是否可以滚动图像而不重复将它们添加到页面。

# jquery - JQuery 无限循环 - 不透明度降低到几乎为 0

> ID：12136820
> 
> 赞同：0
> 
> 时间：2012-08-27T05:54:27.133
> 
> 标签：jquery, opacity, infinite-loop

我在页面上有许多 div，它们使用 JQuery 淡入/淡出和随机函数随机无限循环背景（在我的示例中是 bg 颜色，但我将在最终产品中使用 bg 图像）。

我的问题是，如果循环停留大约 30 秒，您会看到背景不透明度降低到几乎为 0，从而产生空白空间。在 IE8 中更糟，但在 Chrome 中也是一个问题（仍然需要在 IE9 和 Safari 中测试）。

谁能解释为什么会发生这种情况以及（同样重要的是）如何解决它？

谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
  <title> Background image loop</title>

  <script type="text/javascript" src="js/jquery-1.7.2.js"></script>

<script type='text/javascript'>//<![CDATA[ 
$(document).ready(function(){

    var InfiniteRotator =
    {
        init: function()
        {
            //initial fade-in time (in milliseconds)
            var initialFadeIn = 3000;

            //interval between items (in milliseconds)
            var itemInterval = 1000;

            //cross-fade time (in milliseconds)
            var fadeTime = 2000;

            //count number of items
            var numberOfItems = $('.rotating-item').length;

            //set current item
            var currentItem = 1;

            //show first item
            $('.rotating-item').eq(currentItem).fadeIn(initialFadeIn);

            //loop through the items
            var infiniteLoop = setInterval(function(){
                $('.rotating-item').eq(currentItem).fadeOut(fadeTime);

            var rand = Math.floor(Math.random()*(numberOfItems-1)) + 1;
            currentItem = (currentItem+rand) % numberOfItems;

            $('.rotating-item').eq(currentItem).fadeIn(fadeTime);

            }, itemInterval);
        }
    };

    InfiniteRotator.init();

});
//]]>  

</script>

  <style type='text/css'>
    #rotating-item-wrapper {
    list-style-type:none;
    margin:0;
    padding:0;
    height: 150px;
}  
li{
    float: left;
    width: 148px;
    height: 150px;
    margin: 0 0 0 6px;
    padding: 0;
    position: relative;
}
li div {  
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
}
.rotating-item{            
    display: ;
    position: absolute;
    width: 148px;
    height: 150px;
  }
  </style>
</head>
<body>
  <ul id="rotating-item-wrapper">
    <li>
        <div class="rotating-item" style="background-color: red;"></div>
        <div class="rotating-item" style="background-color: blue;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: yellow;"></div>
        <div class="rotating-item" style="background-color: purple;"></div>
        <div class="rotating-item" style="background-color: brown;"></div>
    </li>
    <li>
        <div class="rotating-item" style="background-color: black;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: red;"></div>
        <div class="rotating-item" style="background-color: blue;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: yellow;"></div>
    </li>
    <li>
        <div class="rotating-item" style="background-color: red;"></div>
        <div class="rotating-item" style="background-color: blue;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: yellow;"></div>
        <div class="rotating-item" style="background-color: purple;"></div>
        <div class="rotating-item" style="background-color: brown;"></div>
    </li>
    <li>
        <div class="rotating-item" style="background-color: black;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: red;"></div>
        <div class="rotating-item" style="background-color: blue;"></div>
        <div class="rotating-item" style="background-color: green;"></div>
        <div class="rotating-item" style="background-color: yellow;"></div>
    </li>
</ul>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:14:46.820

发生这种情况是因为您的随机数生成可以产生与以前相同的数字。然后您的图像淡出，然后*再次*淡入。

您必须修复随机数生成以不再允许最后一个数字。

对于时间问题和 jQuery，我总是推荐使用这个新插件 jquery-timing。使用该插件，您的完整代码（具有固定随机选择）缩小为：

```
$.fn.random = function(){
    return this.eq(Math.floor(Math.random()*this.length));
}

$('.rotating-item').hide().first().fadeIn(initialFadeIn);
$('.rotating-item').repeat(itemInterval).fadeOut(fadeTime)
    .siblings().random().fadeIn(fadeTime).until($); 
```

插件的文档中也有[类似的例子。](http://creativecouple.github.com/jquery-timing/examples/random-banner-rotate.html)

# java - mvn 集成测试与 mvn 故障安全：集成测试

> ID：12136827
> 
> 赞同：0
> 
> 时间：2012-08-27T05:55:11.187
> 
> 标签：java, maven, maven-failsafe-plugin

我在使用 maven 故障安全插件运行集成测试时遇到了问题。我有两个类，一个是 TestUnitTest.java，另一个是 TestIntegrationIT.java。在 pom.xml 中，我配置如下：

```
<plugin>                
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <excludes>
            <exclude>**/*IT.java</exclude>
        </excludes>
    </configuration>
    <executions>
        <execution>
            <id>unit-tests</id>
            <phase>test</phase>
            <goals>
                <goal>test</goal>
            </goals>
        </execution>
    </executions>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <configuration>
        <includes>
            <include>**/*IT.java</include>
        </includes>
    </configuration>                    
    <executions>
        <execution>
            <id>integration-test</id>
            <phase>integration-test</phase>
            <goals>
                <goal>integration-test</goal>                           
            </goals>
        </execution>
    </executions>
</plugin> 
```

当我运行 mvn:integration-test 时，将执行两个测试，当我运行 mvn failsafe:integration-test 时，只运行“TestIntegrationIT”。为什么输出不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:03:32.580

[maven-surefire-plugin](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#includes)的包含定义为 *Test、*TestCase，而[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)定义为*IT.java、IT* .java 或 *ITCase.java。所以你不需要为 maven-surefire-plugin 或 maven-failsafe-plugin 定义包含使用默认值。如果您不想命名集成测试，只需将其命名为 NameIT.java，而单元测试可以命名为 NameTest.java。要运行单元测试和/或集成测试，您应该使用 lifecylce ：

```
mvn package 
```

这将运行单元测试，而

```
mvn verify 
```

将运行单元测试和集成测试。

# python - Twitch TV API 调用在 GAE 中生成错误 400

> ID：12136831
> 
> 赞同：0
> 
> 时间：2012-08-27T05:55:27.210
> 
> 标签：python, api, google-app-engine

我过去遇到过这个问题，直到现在都能够解决它。在应用程序引擎中调用 Twitch API 时，我收到错误 400。我去过谷歌群组 twitch 页面，以及 twitch tv 自己的论坛。

我能够在 Twitch TV 和 App Engine 上与很多人交谈，但不幸的是，我无法解决这个问题。为了澄清我的问题，我已经能够制作一个简单的应用程序来直接复制当我尝试对 Twitch TV 的 API 进行 URL 调用时发生的事情。

概括：

**这是部署我的应用程序时失败的简单代码，但在 localhost 环境中可以完美运行：**

```
import webapp2
import urllib2

class MainHandler(webapp2.RequestHandler):
    def get(self):
    url = ('https://api.twitch.tv/kraken/streams/nl_kripp')
        contents = urllib2.urlopen(url)
    self.response.out.write(contents.read())

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

**下面是这个确切的应用程序在 localhost 上运行时生成的内容（假设也是如此）：**

twitch.tv/kraken/channels/nl_kripp/features"},"成熟":null,"video_banner":"http://static-cdn.jtvnw.net/jtv_user_pictures/nl_kripp-channel_offline_image-f3ad1124bc19cffd-640x360.png", "display_name":"nl_Kripp","status":"nolife Kripparrian -- GW2 Ranger Lvling。服务器 = Maguuma"},"preview":"http://static-cdn.jtvnw.net/previews/live_user_nl_kripp-630x473.jpg","partner":true},"_links":{"self":"https ://api.twitch.tv/kraken/streams/nl_kripp"}}

**现在在 App Engine 环境中同样的应用程序：**

[http://urltestingsite.appspot.com/](http://urltestingsite.appspot.com/)

我花了很长时间试图解决这个问题，因为它是我网站中的主要链接。有谁知道为什么会发生这种情况？

编辑 - 这是我实际应用程序的代码：

```
def check_if_live(self, b):
    url = ('https://api.twitch.tv/kraken/streams/%s' %b)
    url2 = urlfetch.fetch(url, headers = {'User-Agent': "suitegamer_User-Agent"}) 
    contents = urllib2.urlopen(url2)
    if (contents.read()).find('{"stream":null,') == 0:
        return 'Offline'
    else:
        return 'Live' 
```

此代码返回此 AttributeError：

```
AttributeError: '_URLFetchResult' object has no attribute 'get_type' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:59:16.640

当您达到速率限制或您的应用程序被拒绝访问时，有时会返回此错误。

根据[这个线程](http://support.twitch.tv/discussion/39/api-rate-limit)，这可能是实际发生的事情。由于 GAE 是一个共享环境，您肯定会经常达到这些限制，因为可能有很多用户查询 twitch.tv 和/或 justin.tv（我不知道限制是否在两者之间共享）。

同样根据[this other thread](https://groups.google.com/d/topic/justintv-api-developers/mWTlv3BYDow/discussion)，api只是不喜欢GAE生产用户代理（我自己尝试过，问题仍然存在）。

第二个问题的解决方案是设置 User-Agent（请参阅[如何在 Google App Engine UrlFetch 服务上更改 User-Agent？](https://stackoverflow.com/questions/2743521/how-to-change-user-agent-on-google-app-engine-urlfetch-service)），但您仍然可能会达到速率限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T20:33:50.060

我觉得回答自己的问题很愚蠢，但是如果其他人遇到这个问题，希望我能在这个问题上有所启发。

Twitch TV 目前正在将来自 App Engine 的所有呼叫列入黑名单。我确定这是他们的一个错误，但无论如何，我使用 ow3d.tv 的 API 尝试了同一个应用程序，它运行完美。它可能会在适当的时候得到修复，但如果不是，请不要浪费时间试图解决这个问题！干杯!

# jquery - 在 wpf 中包含用于 Web 浏览器控件的 Jquery

> ID：12136835
> 
> 赞同：3
> 
> 时间：2012-08-27T05:55:58.003
> 
> 标签：jquery, wpf, webbrowser-control

我在我的项目中使用 Web 浏览器控件，我可以使用此控件轻松显示 html 数据，
现在我正在尝试在此 html 中包含 jquery，但它似乎不起作用

```
 WebBrowser webwsr = new WebBrowser();
  String WebBrwseHTML = "<html><head><script type='text/javascript' src='jquery-1.7.1.js'></script><script type='text/javascript'>$(document).ready(function () {  $('div').css('background-color', 'Red'); })</script></head><body><div>DUMMY</div></body></html>";

   webwsr.NavigateToString(WebBrwseHTML); 
```

我在这里做错了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:00:56.180

不是 jq 专家，但试试这个：

```
 StringBuilder sb = new StringBuilder();
        sb.AppendLine("<html>");
        sb.AppendLine("<head>");
        sb.AppendLine(" <script src='http://code.jquery.com/jquery-latest.js'></script>");
        sb.AppendLine("<script>");
        sb.AppendLine("$(document).ready(function () {");
        sb.AppendLine("$('div').css('background-color', 'Red'); });");
        sb.AppendLine("</script>");
        sb.AppendLine("</head>");
        sb.AppendLine("<body>");
        sb.AppendLine("<div>DUMMY</div>");
        sb.AppendLine("</body>");
        sb.AppendLine("</html>");

        WebBrowser webwsr = new WebBrowser();
        String WebBrwseHTML = sb.ToString();
        webwsr.NavigateToString(WebBrwseHTML);
        mainGrid.Children.Add(webwsr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-06T13:42:59.380

我的建议是使用`System.IO.File.ReadAllText(jqueryFilePath)`来阅读基本的 jQuery 代码，而不是`<script src="..."></script>`使用`<script>" + jquery + "</script>`.

下面是一个工作示例：（`@"C:\jquery.txt"`用您自己的路径替换）

```
var jquery = File.ReadAllText(@"C:\jquery.txt");

var html = @"<html>
<head>
    <script type='text/javascript'>"+jquery+@"</script>
    <script type='text/javascript'>
        $(document).ready(function() {
            $('div').css('background-color', 'Red');
        })
    </script>
</head>

<body>
    <div>DUMMY</div>
</body>

</html>";

browser.NavigateToString(html); 
```

# iphone - AVMutableVideoComposition 以纵向模式捕获的旋转视频

> ID：12136841
> 
> 赞同：17
> 
> 时间：2012-08-27T05:56:24.617
> 
> 标签：iphone, ios, avmutablecomposition

我使用下面的代码在视频上添加图像叠加，然后将新生成的视频导出到文档目录。但奇怪的是，视频被旋转了 90 度。

```
- (void)buildTransitionComposition:(AVMutableComposition *)composition andVideoComposition:(AVMutableVideoComposition *)videoComposition
{
    CMTime nextClipStartTime = kCMTimeZero;
    NSInteger i;

    // Make transitionDuration no greater than half the shortest clip duration.
    CMTime transitionDuration = self.transitionDuration;
    for (i = 0; i < [_clips count]; i++ ) {
        NSValue *clipTimeRange = [_clipTimeRanges objectAtIndex:i];
        if (clipTimeRange) {
            CMTime halfClipDuration = [clipTimeRange CMTimeRangeValue].duration;
            halfClipDuration.timescale *= 2; // You can halve a rational by doubling its denominator.
            transitionDuration = CMTimeMinimum(transitionDuration, halfClipDuration);
        }
    }

    // Add two video tracks and two audio tracks.
    AVMutableCompositionTrack *compositionVideoTracks[2];
    AVMutableCompositionTrack *compositionAudioTracks[2];
    compositionVideoTracks[0] = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    compositionVideoTracks[1] = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
    compositionAudioTracks[0] = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
    compositionAudioTracks[1] = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];

    CMTimeRange *passThroughTimeRanges = alloca(sizeof(CMTimeRange) * [_clips count]);
    CMTimeRange *transitionTimeRanges = alloca(sizeof(CMTimeRange) * [_clips count]);

    // Place clips into alternating video & audio tracks in composition, overlapped by transitionDuration.
    for (i = 0; i < [_clips count]; i++ ) {
        NSInteger alternatingIndex = i % 2; // alternating targets: 0, 1, 0, 1, ...
        AVURLAsset *asset = [_clips objectAtIndex:i];
        NSValue *clipTimeRange = [_clipTimeRanges objectAtIndex:i];
        CMTimeRange timeRangeInAsset;
        if (clipTimeRange)
            timeRangeInAsset = [clipTimeRange CMTimeRangeValue];
        else
            timeRangeInAsset = CMTimeRangeMake(kCMTimeZero, [asset duration]);

        AVAssetTrack *clipVideoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
        [compositionVideoTracks[alternatingIndex] insertTimeRange:timeRangeInAsset ofTrack:clipVideoTrack atTime:nextClipStartTime error:nil];

        /*
        CGAffineTransform t = clipVideoTrack.preferredTransform;
        NSLog(@"Transform1 : %@",t);
        */
        AVAssetTrack *clipAudioTrack = [[asset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0];
        [compositionAudioTracks[alternatingIndex] insertTimeRange:timeRangeInAsset ofTrack:clipAudioTrack atTime:nextClipStartTime error:nil];

        // Remember the time range in which this clip should pass through.
        // Every clip after the first begins with a transition.
        // Every clip before the last ends with a transition.
        // Exclude those transitions from the pass through time ranges.
        passThroughTimeRanges[i] = CMTimeRangeMake(nextClipStartTime, timeRangeInAsset.duration);
        if (i > 0) {
            passThroughTimeRanges[i].start = CMTimeAdd(passThroughTimeRanges[i].start, transitionDuration);
            passThroughTimeRanges[i].duration = CMTimeSubtract(passThroughTimeRanges[i].duration, transitionDuration);
        }
        if (i+1 < [_clips count]) {
            passThroughTimeRanges[i].duration = CMTimeSubtract(passThroughTimeRanges[i].duration, transitionDuration);
        }

        // The end of this clip will overlap the start of the next by transitionDuration.
        // (Note: this arithmetic falls apart if timeRangeInAsset.duration < 2 * transitionDuration.)
        nextClipStartTime = CMTimeAdd(nextClipStartTime, timeRangeInAsset.duration);
        nextClipStartTime = CMTimeSubtract(nextClipStartTime, transitionDuration);

        // Remember the time range for the transition to the next item.
        transitionTimeRanges[i] = CMTimeRangeMake(nextClipStartTime, transitionDuration);
    }

    // Set up the video composition if we are to perform crossfade or push transitions between clips.
    NSMutableArray *instructions = [NSMutableArray array];

    // Cycle between "pass through A", "transition from A to B", "pass through B", "transition from B to A".
    for (i = 0; i < [_clips count]; i++ ) {
        NSInteger alternatingIndex = i % 2; // alternating targets

        // Pass through clip i.
        AVMutableVideoCompositionInstruction *passThroughInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
        passThroughInstruction.timeRange = passThroughTimeRanges[i];
        AVMutableVideoCompositionLayerInstruction *passThroughLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[alternatingIndex]];
        /*
        CGAffineTransform rotationTransform = CGAffineTransformMakeRotation(M_PI_2);
        CGAffineTransform rotateTranslate = CGAffineTransformTranslate(rotationTransform,320,0);
        [passThroughLayer setTransform:rotateTranslate atTime:kCMTimeZero];
         */
        passThroughInstruction.layerInstructions = [NSArray arrayWithObject:passThroughLayer];
        [instructions addObject:passThroughInstruction];

        if (i+1 < [_clips count]) {
            // Add transition from clip i to clip i+1.

            AVMutableVideoCompositionInstruction *transitionInstruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
            transitionInstruction.timeRange = transitionTimeRanges[i];
            AVMutableVideoCompositionLayerInstruction *fromLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[alternatingIndex]];
            AVMutableVideoCompositionLayerInstruction *toLayer = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:compositionVideoTracks[1-alternatingIndex]];

            if (self.transitionType == SimpleEditorTransitionTypeCrossFade) {
                // Fade out the fromLayer by setting a ramp from 1.0 to 0.0.
                [fromLayer setOpacityRampFromStartOpacity:1.0 toEndOpacity:0.0 timeRange:transitionTimeRanges[i]];
            }
            else if (self.transitionType == SimpleEditorTransitionTypePush) {
                // Set a transform ramp on fromLayer from identity to all the way left of the screen.
                [fromLayer setTransformRampFromStartTransform:CGAffineTransformIdentity toEndTransform:CGAffineTransformMakeTranslation(-composition.naturalSize.width, 0.0) timeRange:transitionTimeRanges[i]];
                // Set a transform ramp on toLayer from all the way right of the screen to identity.
                [toLayer setTransformRampFromStartTransform:CGAffineTransformMakeTranslation(+composition.naturalSize.width, 0.0) toEndTransform:CGAffineTransformIdentity timeRange:transitionTimeRanges[i]];
            }

            transitionInstruction.layerInstructions = [NSArray arrayWithObjects:fromLayer, toLayer, nil];
            [instructions addObject:transitionInstruction];
        }
    }

    videoComposition.instructions = instructions;

} 
```

请帮助，因为我无法以正确的模式导出肖像视频。任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-27T06:05:35.817

默认情况下，当您使用**AVAssetExportSession**导出视频时，视频将从其原始方向旋转。你必须应用它的变换来设置它的精确方向。你请尝试下面的代码来做同样的事情。

```
- (AVMutableVideoCompositionLayerInstruction *)layerInstructionAfterFixingOrientationForAsset:(AVAsset *)inAsset 
                                                                                     forTrack:(AVMutableCompositionTrack *)inTrack
                                                                                       atTime:(CMTime)inTime
{
    //FIXING ORIENTATION//
    AVMutableVideoCompositionLayerInstruction *videolayerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:inTrack];
    AVAssetTrack *videoAssetTrack = [[inAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
    UIImageOrientation videoAssetOrientation_  = UIImageOrientationUp;
    BOOL  isVideoAssetPortrait_  = NO;
    CGAffineTransform videoTransform = videoAssetTrack.preferredTransform;

    if(videoTransform.a == 0 && videoTransform.b == 1.0 && videoTransform.c == -1.0 && videoTransform.d == 0)  {videoAssetOrientation_= UIImageOrientationRight; isVideoAssetPortrait_ = YES;}
    if(videoTransform.a == 0 && videoTransform.b == -1.0 && videoTransform.c == 1.0 && videoTransform.d == 0)  {videoAssetOrientation_ =  UIImageOrientationLeft; isVideoAssetPortrait_ = YES;}
    if(videoTransform.a == 1.0 && videoTransform.b == 0 && videoTransform.c == 0 && videoTransform.d == 1.0)   {videoAssetOrientation_ =  UIImageOrientationUp;}
    if(videoTransform.a == -1.0 && videoTransform.b == 0 && videoTransform.c == 0 && videoTransform.d == -1.0) {videoAssetOrientation_ = UIImageOrientationDown;}

    CGFloat FirstAssetScaleToFitRatio = 320.0 / videoAssetTrack.naturalSize.width;

    if(isVideoAssetPortrait_) {
        FirstAssetScaleToFitRatio = 320.0/videoAssetTrack.naturalSize.height;
        CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
        [videolayerInstruction setTransform:CGAffineTransformConcat(videoAssetTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];
    }else{
        CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
        [videolayerInstruction setTransform:CGAffineTransformConcat(CGAffineTransformConcat(videoAssetTrack.preferredTransform, FirstAssetScaleFactor),CGAffineTransformMakeTranslation(0, 160)) atTime:kCMTimeZero];
    }
    [videolayerInstruction setOpacity:0.0 atTime:inTime];
    return videolayerInstruction;
} 
```

我希望这能帮到您。

```
AVAssetTrack *assetTrack = [[inAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

AVMutableCompositionTrack *mutableTrack = [mergeComposition mutableTrackCompatibleWithTrack:assetTrack];

AVMutableVideoCompositionLayerInstruction *assetInstruction = [self layerInstructionAfterFixingOrientationForAsset:inAsset forTrack:myLocalVideoTrack atTime:videoTotalDuration]; 
```

以上是调用上述方法的代码，`inAsset`您的视频资产在哪里，并且`videoTotalDuration`您的视频总持续时间`CMTime.mergeComposition`是`AVMutableComposition`类的对象。

希望这会有所帮助。

编辑：这不是任何回调方法或事件，您必须使用上面提到的所需参数按预期调用它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-24T06:05:02.483

如果您只想保持原始旋转，这是一种稍微简单的方法。

```
// Grab the source track from AVURLAsset for example.
AVAssetTrack *assetVideoTrack = [asset tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Grab the composition video track from AVMutableComposition you already made.
AVMutableCompositionTrack *compositionVideoTrack = [composition tracksWithMediaType:AVMediaTypeVideo].lastObject;

// Apply the original transform.    
if (assetVideoTrack && compositionVideoTrack) {
   [compositionVideoTrack setPreferredTransform:assetVideoTrack.preferredTransform];
}

// Export... 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-03T04:58:10.030

使用以下这些方法根据视频资产方向设置正确的方向`AVMutableVideoComposition`

```
-(AVMutableVideoComposition *) getVideoComposition:(AVAsset *)asset
{
  AVAssetTrack *videoTrack = [[asset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];
  AVMutableComposition *composition = [AVMutableComposition composition];
  AVMutableVideoComposition *videoComposition = [AVMutableVideoComposition videoComposition];
  CGSize videoSize = videoTrack.naturalSize;
  BOOL isPortrait_ = [self isVideoPortrait:asset];
  if(isPortrait_) {
      NSLog(@"video is portrait ");
      videoSize = CGSizeMake(videoSize.height, videoSize.width);
  }
  composition.naturalSize     = videoSize;
  videoComposition.renderSize = videoSize;
  // videoComposition.renderSize = videoTrack.naturalSize; //
  videoComposition.frameDuration = CMTimeMakeWithSeconds( 1 / videoTrack.nominalFrameRate, 600);

  AVMutableCompositionTrack *compositionVideoTrack;
  compositionVideoTrack = [composition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
  [compositionVideoTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) ofTrack:videoTrack atTime:kCMTimeZero error:nil];
  AVMutableVideoCompositionLayerInstruction *layerInst;
  layerInst = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
  [layerInst setTransform:videoTrack.preferredTransform atTime:kCMTimeZero];
  AVMutableVideoCompositionInstruction *inst = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
  inst.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);
  inst.layerInstructions = [NSArray arrayWithObject:layerInst];
  videoComposition.instructions = [NSArray arrayWithObject:inst];
  return videoComposition;
}

-(BOOL) isVideoPortrait:(AVAsset *)asset
{
  BOOL isPortrait = FALSE;
  NSArray *tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
  if([tracks    count] > 0) {
    AVAssetTrack *videoTrack = [tracks objectAtIndex:0];

    CGAffineTransform t = videoTrack.preferredTransform;
    // Portrait
    if(t.a == 0 && t.b == 1.0 && t.c == -1.0 && t.d == 0)
    {
        isPortrait = YES;
    }
    // PortraitUpsideDown
    if(t.a == 0 && t.b == -1.0 && t.c == 1.0 && t.d == 0)  {

        isPortrait = YES;
    }
    // LandscapeRight
    if(t.a == 1.0 && t.b == 0 && t.c == 0 && t.d == 1.0)
    {
        isPortrait = NO;
    }
    // LandscapeLeft
    if(t.a == -1.0 && t.b == 0 && t.c == 0 && t.d == -1.0)
    {
        isPortrait = NO;
    }
   }
  return isPortrait;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-01T03:02:05.910

这是 swift 4 的代码，可以完美地以最佳方向合并视频

```
let mainComposition = AVMutableComposition()
let compositionVideoTrack = mainComposition.addMutableTrack(withMediaType: .video, preferredTrackID: kCMPersistentTrackID_Invalid)
let soundtrackTrack = mainComposition.addMutableTrack(withMediaType: .audio, preferredTrackID: kCMPersistentTrackID_Invalid)
var insertTime = kCMTimeZero

for videoAsset in arrayVideos {
    try! compositionVideoTrack?.insertTimeRange(CMTimeRangeMake(kCMTimeZero, videoAsset.duration), of: videoAsset.tracks(withMediaType: .video)[0], at: insertTime)
    var assetVideoTrack = (videoAsset.tracks(withMediaType: AVMediaType.video)).last as! AVAssetTrack
    var compositionVideoTrack = (mainComposition.tracks(withMediaType: AVMediaType.video)).last as! AVMutableCompositionTrack
    compositionVideoTrack.preferredTransform = assetVideoTrack.preferredTransform

    try! soundtrackTrack?.insertTimeRange(CMTimeRangeMake(kCMTimeZero, videoAsset.duration), of: videoAsset.tracks(withMediaType: .audio)[0], at: insertTime)

        insertTime = CMTimeAdd(insertTime, videoAsset.duration)  
    }

    let outputFileURL = URL(fileURLWithPath: NSTemporaryDirectory() + "merge1uupo.MOV")

    let fileManager = FileManager()
    //fileManager.removeItemIfExisted(outputFileURL)
    let exporter = AVAssetExportSession(asset: mainComposition, presetName: AVAssetExportPresetHighestQuality)

    exporter?.outputURL = outputFileURL
    exporter?.outputFileType = AVFileType.mov
    exporter?.shouldOptimizeForNetworkUse = true

    exporter?.exportAsynchronously {
        DispatchQueue.main.async {

        // Do what you want at the end    
        }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-09T07:00:22.360

在迅速头晕的答案中..这对我有用

```
 var assetVideoTrack = (sourceAsset.tracksWithMediaType(AVMediaTypeVideo)).last as! AVAssetTrack

  var compositionVideoTrack = (composition.tracksWithMediaType(AVMediaTypeVideo)).last as! AVMutableCompositionTrack

  if (assetVideoTrack.playable && compositionVideoTrack.playable) {

       compositionVideoTrack.preferredTransform = assetVideoTrack.preferredTransform
   } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-01T20:53:30.413

迅速2：

```
做 {
            让路径 = NSSearchPathForDirectoriesInDomains(
                NSSearchPathDirectory.DocumentDirectory，NSSearchPathDomainMask.UserDomainMask，真）
            让文档目录：AnyObject = 路径 [0]
            //这将被改变以适应动态视频
            让 dataPath = filesDirectory.stringByAppendingPathComponent(videoFileName+".MOV")
            让 videoAsset = AVURLAsset(URL: NSURL(fileURLWithPath: dataPath), options: nil)
            让 imgGenerator = AVAssetImageGenerator(asset: videoAsset)
            imgGenerator.appliesPreferredTrackTransform = true
            让 cgImage = 尝试 imgGenerator.copyCGImageAtTime(CMTimeMake(0, 1), actualTime: nil)
            让 uiImage = UIImage(CGImage: cgImage)

            videoThumb.image = uiImage
        } catch let err as NSError {
            print("生成缩略图时出错：\(err)")
        }

```

# android - 应用内购买 Android 问题，Google Play 未返回订单 ID

> ID：12136845
> 
> 赞同：1
> 
> 时间：2012-08-27T05:56:36.107
> 
> 标签：android, in-app-purchase, google-play

我已经成功地`In-App Billing`在 Android 中实现了。
我遇到的唯一问题是当我使用`restoreTransaction()`方法要求`Google`返回`order id`with `Signed Data`（购买状态）时。
它正在退货`Null orders array`，即使该商品已经购买。
这是日志：

```
08-27 08:30:24.342: I/BillingService(17152): handleCommand() action: com.android.vending.billing.PURCHASE_STATE_CHANGED
08-27 08:30:24.342: I/BillingService(17152): purchaseStateChanged
08-27 08:30:24.342: I/class com.folio3.games.candymonster.billing.Security(17152): signedData: {"nonce":XXXXXXXXXXXXXXXXXXXXXXXXX,"orders":[]}
08-27 08:30:24.362: I/class com.folio3.games.candymonster.billing.Security(17152): signature: XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX 
```

# hadoop - hbase 中并非所有元区域在线异常

> ID：12136846
> 
> 赞同：2
> 
> 时间：2012-08-27T05:56:39.030
> 
> 标签：hadoop, hbase, ubuntu-10.04, hadoop-streaming

我有一个 4 节点 hadoop，hbase 集群，其中 1 个用作 hadoopmaster 和 hbasemaster。其余三个服务器作为 datanode & regionserver & zookeeper。最近我的一台运行（datanode，regionserver & zookeeper）的机器崩溃了，系统没有重新启动。但我的 hadoop-cluster 仍然工作正常，但**hbase 集群**显示问题，因为没有区域在线，我无法查看 hbase 表。 **注意**：关闭的节点名称是**hadoopslave3** 命令：

当`hbase shell`我尝试创建一个表时，它给出了一个错误：

```
hbase(main):001:0> create 'USERS','COL-FAMILY1'

ERROR: org.apache.hadoop.hbase.NotAllMetaRegionsOnlineException: org.apache.hadoop.hbase.NotAllMetaRegionsOnlineException: Timed out (10000ms) 
```

对于命令：

```
$hbase hbck 
```

表明：

```
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/usr/lib/hbase/lib/native/Linux-amd64-64
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:os.arch=amd64
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.32-33-server
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:user.name=ocpe
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:user.home=/home/ocpe
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Client environment:user.dir=/var/log/hbase
12/08/27 11:10:20 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=hadoopslave2:2181,hbasemaster:2181,hadoopslave3:2181 sessionTimeout=180000 watcher=hconnection
12/08/27 11:10:20 INFO zookeeper.ClientCnxn: Opening socket connection to server hbasemaster/10.68.210.71:2181
12/08/27 11:10:20 INFO zookeeper.ClientCnxn: Socket connection established to hbasemaster/10.68.210.71:2181, initiating session
12/08/27 11:10:20 INFO zookeeper.ClientCnxn: Session establishment complete on server hbasemaster/10.68.210.71:2181, sessionid = 0x39668f686e0006, negotiated timeout = 180000
Version: 0.90.4-cdh3u3
12/08/27 11:11:21 DEBUG client.HConnectionManager$HConnectionImplementation: Lookedup root region location, connection=org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation@69267649; hsa=null
ERROR: Root Region or some of its attributes are null.
ERROR: Encountered fatal error. Exiting... 
```

和主日志显示：

```
2012-08-27 11:00:41,329 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server hadoopslave3/10.68.210.58:2181
2012-08-27 11:00:42,832 WARN org.apache.zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.NoRouteToHostException: No route to host
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)
.
.
.
.
.
2012-08-27 11:00:43,610 DEBUG org.apache.hadoop.hbase.master.HMaster: Started service threads
2012-08-27 11:00:44,357 INFO org.apache.hadoop.hbase.master.ServerManager: Registering server=hadoopslave2,60020,1346045456923, regionCount=0, userLoad=false
2012-08-27 11:00:45,110 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) count to settle; currently=1
2012-08-27 11:00:45,703 INFO org.apache.hadoop.hbase.master.ServerManager: Registering server=hadoopslave1,60020,1346065230110, regionCount=0, userLoad=false
2012-08-27 11:00:46,611 INFO org.apache.hadoop.hbase.master.ServerManager: Waiting on regionserver(s) count to settle; currently=2
2012-08-27 11:00:48,111 INFO org.apache.hadoop.hbase.master.ServerManager: Exiting wait on regionserver(s) to checkin; count=2, stopped=false, count of regions out on cluster=0
2012-08-27 11:00:48,118 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs://hadoopmaster:54310/hbase2/.logs/hadoopslave1,60020,1346065230110 belongs to an existing region server
2012-08-27 11:00:48,118 INFO org.apache.hadoop.hbase.master.MasterFileSystem: Log folder hdfs://hadoopmaster:54310/hbase2/.logs/hadoopslave2,60020,1346045456923 belongs to an existing region server
2012-08-27 11:00:48,118 INFO org.apache.hadoop.hbase.master.MasterFileSystem: No logs to split
2012-08-27 11:00:48,125 INFO org.apache.hadoop.hbase.master.AssignmentManager: Processing region -ROOT-,,0.70236052 in state RS_ZK_REGION_OPENED
2012-08-27 11:00:48,128 INFO org.apache.hadoop.hbase.master.AssignmentManager: Failed to find hadoopslave2,60020,1345789680868 in list of online servers; skipping registration of open of -ROOT-,,0.70236052
2012-08-27 11:00:48,128 INFO org.apache.hadoop.hbase.master.AssignmentManager: Waiting on 70236052/-ROOT-
2012-08-27 11:00:53,213 INFO org.apache.hadoop.hbase.master.AssignmentManager: Regions in transition timed out:  -ROOT-,,0.70236052 state=OPEN, ts=1345790880487, server=hadoopslave2,60020,1345789680868
2012-08-27 11:00:53,213 ERROR org.apache.hadoop.hbase.master.AssignmentManager: Region has been OPEN for too long, we don't know where region was opened so can't do anything
2012-08-27 11:01:43,242 WARN org.apache.hadoop.hbase.master.TimeToLiveLogCleaner: Found a log newer than current time, probably a clock skew
2012-08-27 11:02:43,234 WARN org.apache.hadoop.hbase.master.TimeToLiveLogCleaner: Found a log newer than current time, probably a clock skew 
```

并且 regionserver(hadoopslave2) 日志之一显示：

```
2012-08-27 16:30:30,388 INFO org.apache.zookeeper.ZooKeeper: Initiating client connection, connectString=hadoopslave2:2181,hbasemaster:2181,hadoopslave3:2181 sessionTimeout=180000 watcher=regionserver:60020
2012-08-27 16:30:30,418 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server hadoopslave3/10.68.210.58:2181
2012-08-27 16:30:30,533 INFO org.apache.hadoop.hbase.regionserver.ShutdownHook: Installed shutdown hook thread: Shutdownhook:regionserver60020
2012-08-27 16:30:33,426 WARN org.apache.zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.NoRouteToHostException: No route to host
    at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
    at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:567)
    at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1146)
.
.
.
.
.
.
.
2012-08-27 16:30:37,649 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 6 on 60020: starting
2012-08-27 16:30:37,649 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 7 on 60020: starting
2012-08-27 16:30:37,649 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 8 on 60020: starting
2012-08-27 16:30:37,653 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 9 on 60020: starting
2012-08-27 16:30:37,653 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Serving as hadoopslave1,60020,1346065230110, RPC listening on /10.68.210.54:60020, sessionid=0x139668faf560000
2012-08-27 16:30:37,655 INFO org.apache.hadoop.hbase.regionserver.SplitLogWorker: SplitLogWorker hadoopslave1,60020,1346065230110 starting
2012-08-27 16:30:37,665 INFO org.apache.hadoop.hbase.regionserver.StoreFile: Allocating LruBlockCache with maximum size 199.2m
2012-08-27 16:30:38,211 WARN org.apache.hadoop.hbase.regionserver.wal.HLog: HDFS pipeline error detected. Found 1 replicas but expecting 3 replicas.  Requesting close of hlog. 
```

# php - 使用 jQuery 和 PHP 进行多文件上传。创建最简化的示例

> ID：12136847
> 
> 赞同：0
> 
> 时间：2012-08-27T05:56:55.473
> 
> 标签：php, jquery, html, file-upload

我想使用 jQuery 创建一个多文件文件上传器。

下面是我正在使用的代码。我只是想抽象出使用 jQuery（和 File API）和 PHP 一次上传多个文件的要点。如果有人有简化的答案，请随时分享或提供建议。

不过，现在这段代码可以上传图片（有点）。有问题：

1.  即使选择了多个文件，也只有一个文件上传到目录
2.  表单在提交时更改页面

这是我正在使用的 js/jquery：

```
function html5Upload($form) {
    file = $form.data('input');
    if (file) {
        var fd = new FormData();
        fd.append($form.find(selector).attr('name'), file);
        //get other form input and append to formData
        $form.find(':input').each(function () {
            if (this.type != 'file') {
                fd.append($(this).attr('name'), $(this).val());
            }
        });

        //Upload using jQuery AJAX
        jqxhr = $.ajax({
            url: $form.attr('action'),
            data: fd,
            cache: false,
            contentType: false,
            processData: false,
            type: 'POST',
            success: function () {
                alert("Images Uploaded!");
            }
        });
    }

    $form.remove();
}

$('form').submit(function (event) {
    event.preventDefault();
    html5Upload($('form.mupload'));
    return false;
}); 
```

**HTML**

```
<form class="mupload" action="upload.php" method="post" enctype="multipart/form-data">
    <input type="file" name="userfile" class="fileUpload" multiple>

    <button type="submit">Upload</button>
</form> 
```

**PHP**

```
/*
Easy PHP Upload - version 2.32
A easy to use class for your (multiple) file uploads

Copyright (c) 2004 - 2010, Olaf Lederer
*/
include("easy_upload/upload_class.php");

$upload = new file_upload();

$upload->upload_dir = 'uploads/';
$upload->extensions = array('.png', '.jpg', '.zip', '.pdf'); // specify the allowed extensions here
$upload->rename_file = true;

if(!empty($_FILES)) {
    $upload->the_temp_file = $_FILES['userfile']['tmp_name'];
    $upload->the_file = $_FILES['userfile']['name'];
    $upload->http_error = $_FILES['userfile']['error'];
    $upload->do_filename_check = 'y'; // use this boolean to check for a valid filename
    if ($upload->upload()){

        echo '<div id="status">success</div>';
        echo '<div id="message">'. $upload->file_copy .' Successfully Uploaded</div>';
        //return the upload file
        echo '<div id="uploadedfile">'. $upload->file_copy .'</div>';

    } else {

        echo '<div id="status">failed</div>';
        echo '<div id="message">'. $upload->show_error_string() .'</div>';

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:55:32.337

到目前为止，我已经看到了一些潜在的问题：

1.  只上传了一个文件。

    *   对于多个文件上传，我认为`name`文件输入的属性应该类似于`userfiles[]`. 这样就不会被覆盖。仅供参考：如果两个 HTML 输入具有相同的名称而没有`[]`，则只有后者将通过请求发送。`[]`也可用于发送任何具有多个值的数据，例如`select`（想想 Array，它在 $_POST 中表示为数组）。
    *   我真的不知道您的上传处理程序，您确定它可以处理多个文件上传吗？
2.  我猜你在`form`? 尝试像这样将事件代码放在 jQuery domReady 中

.

```
$(function() {
     $('form').submit(function (event) {
        event.preventDefault();
        html5Upload($('form.mupload'));
        return false;
    });
}); 
```

您可能需要先检查此问题。

# c++ - 递归 boost::variant 类型不能用“-std=c++11 -stdlib=libc++”编译

> ID：12136848
> 
> 赞同：3
> 
> 时间：2012-08-27T05:57:08.497
> 
> 标签：c++, boost, c++11, compiler-errors, clang

考虑以下代码：

```
#include <vector>
#include <boost/variant.hpp>

struct foo;

typedef boost::variant<foo> bar;

struct foo
{
    std::vector<bar> baz;
};

int main ()
{
    foo f;
    return 0;
} 
```

使用 Xcode 4.4 在 Mac OS X 上构建（我通过 Homebrew 安装了 boost 1.50.0）：

*   `clang++ test.cc`: 没有错误。
*   `clang++ -stdlib=libc++ test.cc`: 没有错误。
*   `clang++ -std=c++11 test.cc`: 没有错误。
*   `clang++ -std=c++11 -stdlib=libc++ test.cc`:**很多错误！**

```
/usr/local/include/boost/type_traits/has_nothrow_constructor.hpp:24:40: error: incomplete type 'foo' used in type trait expression
   BOOST_STATIC_CONSTANT(bool, value = BOOST_HAS_NOTHROW_CONSTRUCTOR(T));
                                       ^
...snip...
test.cc:10:19: note: in instantiation of template class '...snip...' requested here
        std::vector<bar> baz;
                         ^
test.cc:8:8: note: definition of 'foo' is not complete until the closing '}'
struct foo
       ^

/usr/local/include/boost/mpl/next_prior.hpp:31:22: error: type 'int' cannot be used prior to '::' because it has no members
    typedef typename T::next type;
                     ^
test.cc:10:19: note: in instantiation of template class '...snip...' requested here
        std::vector<bar> baz;
                         ^

/usr/local/include/boost/mpl/sizeof.hpp:27:20: error: invalid application of 'sizeof' to an incomplete type 'foo'
    : mpl::size_t< sizeof(T) >
                   ^~~~~~~~~

test.cc:10:19: note: in instantiation of template class '...snip...' requested here
        std::vector<bar> baz;
                         ^
test.cc:8:8: note: definition of 'foo' is not complete until the closing '}'
struct foo
       ^

...big snip...

8 errors generated. 
```

这里发生了什么？为什么我不能用指定的选项编译它？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T16:39:58.117

`boost::recursive_wrapper<foo>`是处理不完整类型的工具，同时仍然保持例如访问者的错觉，即变体确实持有`foo`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:51:57.780

您不能以递归方式使用不完整类型作为模板参数。编译器错误消息非常清楚。

# python - 使用 csv.reader 的制表符分隔文件未在我期望的位置分隔

> ID：12136850
> 
> 赞同：22
> 
> 时间：2012-08-27T05:57:16.520
> 
> 标签：python, csv, python-requests

我正在尝试使用 Python 遍历以制表符分隔的选举结果文件。以下代码不起作用，但是当我使用具有相同结果的本地文件（注释掉的行）时，它确实按预期工作。

我唯一能想到的是我需要传递 url 的一些标题或内容类型，但我无法弄清楚。

为什么会这样？

```
import csv
import requests

r = requests.get('http://vote.wa.gov/results/current/export/MediaResults.txt') 
data = r.text
#data = open('data/MediaResults.txt', 'r')
reader = csv.reader(data, delimiter='\t')
for row in reader:
    print row 
```

结果是：

```
...
['', '']
['', '']
['2']
['3']
['1']
['1']
['8']
['', '']
['D']
['a']
['v']
['i']
['d']
[' ']
['F']
['r']
['a']
['z']
['i']
['e']
['', '']
... 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-27T06:39:29.117

所以发生了什么，好吧，一个电话`help`可能会有所启发。

```
>>> help(csv.reader)
 reader(...)
    csv_reader = reader(iterable [, dialect='excel']
                            [optional keyword args])
        for row in csv_reader:
            process(row)

    The "iterable" argument can be any object that returns a line
    of input for each iteration, such as a file object or a list.  The
    optional "dialect" parameter is discussed below.  The function
    also accepts optional keyword arguments which override settings
    provided by the dialect. 
```

所以看起来它`csv.reader`期望某种类型的迭代器会返回一行，但是我们传递了一个在 char 基础上迭代的字符串，这就是为什么它逐个字符解析的原因，解决这个问题的一种方法是生成一个临时文件，但我们不需要，我们只需要传递*任何*可迭代的对象。

请注意以下内容，它只是将字符串拆分为行列表，然后再将其提供给阅读器。

```
import csv
import requests

r = requests.get('http://vote.wa.gov/results/current/export/MediaResults.txt') 
data = r.text
reader = csv.reader(data.splitlines(), delimiter='\t')
for row in reader:
    print row 
```

这似乎有效。

我还建议使用`csv.DictReader`它非常有用。

```
>>> reader = csv.DictReader(data.splitlines(), delimiter='\t')
>>> for row in reader:
...      print row
{'Votes': '417141', 'BallotName': 'Michael Baumgartner', 'RaceID': '2', 'RaceName': 'U.S. Senator', 'PartyName': '(Prefers Republican Party)', 'TotalBallotsCastByRace': '1387059', 'RaceJurisdictionTypeName': 'Federal', 'BallotID': '23036'}
{'Votes': '15005', 'BallotName': 'Will Baker', 'RaceID': '2', 'RaceName': 'U.S. Senator', 'PartyName': '(Prefers Reform Party)', 'TotalBallotsCastByRace': '1387059', 'RaceJurisdictionTypeName': 'Federal', 'BallotID': '27435'} 
```

基本上它为每一行返回一个字典，使用标题作为键，这样我们就不需要跟踪顺序，而只是名称让我们更容易，即`row['Votes']`看起来更易读`row[4]`......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T06:10:26.690

这完美地工作：

```
import csv

reader = csv.reader(open('./MediaResults.txt'),
                    delimiter='\t')
for row in reader:
    print row 
```

第一个参数`csv.reader`应该是：

> 任何支持迭代器协议并在每次调用其**next** () 方法时返回一个字符串的对象

根据[文档](http://docs.python.org/py3k/library/csv.html)，并且您传递的是字符串，而不是文件对象。字符串表现为单个字符的列表，因此是您正在观察的行为。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-27T06:43:10.167

**简单的问题：** csv.reader不期望它的输入有一个字符串*。*

**简单的解决方案：** 将输入更改为：`data.splitlines()`。

csv 阅读器需要一个迭代，它一次返回一行。不幸的是，字符串一次迭代一个字符。要解决此问题，请使用*splitlines()*将字符串转换为行列表：

```
reader = csv.reader(data.splitlines(), delimiter='\t')
for row in reader:
    print row 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T06:09:00.403

也许你想通过 csv API 来嗅探方言：

```
csvfile = open("example.csv", "rb")
dialect = csv.Sniffer().sniff(csvfile.read(1024))
csvfile.seek(0)
reader = csv.reader(csvfile, dialect) 
```

这将产生正确的输出。

也可以看看

[http://docs.python.org/library/csv.html#csv.Sniffer](http://docs.python.org/library/csv.html#csv.Sniffer)

# zend-framework - Zend 2 中的 FlashMessenger

> ID：12136855
> 
> 赞同：1
> 
> 时间：2012-08-27T05:57:34.970
> 
> 标签：zend-framework, zend-framework2

我正在做zend 2研究。现在我结帐了 flashMessenger 助手。似乎没有记录在 layout.php 中调用 flashMessenger 的方法。因为我想在位于布局的 div 中显示所有消息（错误或成功），所以我需要在那里调用 flashMessenger。我不想每次都通过控制器的操作发送消息，只希望操作只添加消息和布局显示它们。

虽然我对自定义助手/库持开放态度，但内置解决方案是最好的。（我在 zend 1 上也没有太多工作，所以我不知道即使是 zend 1 是否也能轻松实现。）

我签出一篇文章[如何在我的布局文件中访问 flashmessenger，在 zend 框架中？](https://stackoverflow.com/questions/7285131/how-do-i-access-flashmessenger-in-my-layout-file-in-zend-framework?rq=1)但它有针对 zend 1 的自定义解决方案。所以我在想 zend 是否在 1 和 2 中都没有内置解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T20:00:50.620

我刚刚写了我自己的简单视图助手：

```
<?php

namespace My\View\Helper;

use Zend\View\Helper\AbstractHelper;

class FlashMessenger extends AbstractHelper
{
    protected static $_flashMessenger;

    public function __invoke($namespace = 'default') {

        if (!self::$_flashMessenger) {

            self::$_flashMessenger = new \Zend\Mvc\Controller\Plugin\FlashMessenger;
        }

        return self::$_flashMessenger->setNamespace($namespace);
    }
} 
```

像这样使用它：

```
<? if ($this->flashMessenger()->hasMessages()): ?>
    <ul>
    <? foreach ($this->flashMessenger()->getMessages() as $message): ?>
        <li><?= $message></li>
    <? endforeach ?>
    </ul>
<? endif ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-01T14:59:24.810

在你的控制器方法中添加这个

```
$this->flashMessenger()->addMessage('Your Flash message'); 
```

在 module/Application/view/layout/{your-layout.phtml} 添加：

```
<div>
 <?php if ($this->flashMessenger()->hasMessages()): ?>
    <div class="alert alert-info">
        <?php foreach ($this->flashMessenger()->getMessages() as $message): ?>
            <?php echo $message; ?>
        <?php endforeach; ?>
    </div>
<?php endif; ?> 
```

我认为这将有助于解决您的问题。

# javascript - 媒体查询并适应现成的网站

> ID：12136856
> 
> 赞同：0
> 
> 时间：2012-08-27T05:57:42.697
> 
> 标签：javascript, html, css

我现在必须*调整*我当前的网站以适应更小的桌面屏幕尺寸。它可以在所有屏幕上查看，只有较小的屏幕，如 14"，它会在左侧创建一个滚动条，并且不是必需的。

他们要求我缩小所有可能的尺寸以使网站适合 14 英寸但仍然可以看到，就像它以更大的屏幕尺寸出现时一样。有人可以帮我处理这个问题吗？不，iphone 屏幕不是一个选项，只有不同的桌面屏幕，尤其是小屏幕。

你能告诉我应该改变什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:05:18.100

您可以：

*   更改您当前的样式表，使其适用于较小的设备（14" 不是*那么*小，所以这可能是一个不错的选择）。这将是摆脱滚动条的简单方法。

*   编写仅适用于某些设备的单独样式表，并使用[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)来定位您想要的设备（例如使用`min-width`,`max-width`表达式）。这意味着您可以随心所欲地为较小的设备调整样式表，而不会冒险破坏较大设备的页面。

[PhoneGap](http://phonegap.com/)是一个很好的网站示例，它的样式表会随着您调整屏幕大小而改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:26:37.890

由于您已经编写了样式表和网站，因此很难从头开始。

但是你可以添加

```
@media screen and (min-width: ###px) and (max-width: ###px) {
    .sample { /*stuff here */ }
    body { /* stuff here */ }
} 
```

到样式表的底部。

您可以将上面的### 更改为您需要的最小和最大宽度。所以你可以喜欢

```
@media screen and (min-width: 768px) and (max-width: 959px) { 
```

和

```
@media screen and (min-width: 479px) and (max-width: 767px) { 
```

等您需要的所有尺寸。

# c# - 我需要使用 XmlTextReader 将大型 XML 文件拆分为多个输出 xml

> ID：12136857
> 
> 赞同：0
> 
> 时间：2012-08-27T05:57:42.310
> 
> 标签：c#, xml, split, large-files, xmltextreader

我需要获取一个 XML 文件并从输入文件的数千个重复节点创建多个输出 xml 文件。源文件“AnimalBatch.xml”如下所示：

`<?xml version="1.0" encoding="utf-8" ?>`
`<Animals>`
`<Animal id="1001">`
`<Quantity>One</Quantity>`
`<Adjective>Red</Adjective>`
`<Name>Rooster</Name>`
`</Animal>`
`<Animal id="1002">`
`<Quantity>Two</Quantity>`
`<Adjective>Stubborn</Adjective>`
`<Name>Donkeys</Name>`
`</Animal>`
`<Animal id="1003">`
`<Quantity>Three</Quantity>`
`<Color>Blind</Color>`
`<Name>Mice</Name>`
`</Animal>`
`</Animals>`

但实际上，其中没有 CR/LF 字符。实际的文本流如下所示：

`<?xml version="1.0" encoding="utf-8" ?><Animals><Animal id="1001"><Quantity>One</Quantity><Adjective>Red</Adjective><Name>Rooster</Name></Animal><Animal id="1002"><Quantity>Two</Quantity><Adjective>Stubborn</Adjective><Name>Donkeys</Name></Animal><Animal id="1003"><Quantity>Three</Quantity><Color>Blind</Color><Name>Mice</Name></Animal></Animals>`

程序需要对重复的“Animal”进行拆分，生成3个文件，分别命名为：Animal_1001.xml、Animal_1002.xml、Animal_1003.xml

我使用 XmlDocument 对此有一个先前的问题，该问题已经得到解答。
请参阅：[使用 XmlDocument 将 XML 文件拆分为多个 xml][1]

这个问题是关于如何使用 XmlReader 来获取元素并从中创建 XmlDocument 元素。

* * *

Animal_1001.xml：
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>One</Quantity>`
`<Adjective>Red</Adjective>`
`<Name>Rooster</Name>`
`</Animal>`

* * *

Animal_1002.xml
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Two</Quantity>`
`<Adjective>Stubborn</Adjective>`
`<Name>Donkeys</Name>`
`</Animal>`

* * *

Animal_1003.xml>
`<?xml version="1.0" encoding="utf-8"?>`
`<Animal>`
`<Quantity>Three</Quantity>`
`<Adjective>Blind</Adjective>`
`<Name>Mice</Name>`
`</Animal>`

这是有效的代码 - 但仅当输入文件中有换行符时：

```
 static void SplitXMLReader() 
    {
        string strFileName;
        string strSeq;

        XmlReader doc = XmlReader.Create("C:\\AnimalBatch.xml");

        while (doc.Read())
        {
            if (doc.Name=="Animal")
            {
                strSeq = doc.GetAttribute("id");

                XmlDocument outdoc = new XmlDocument();
                XmlDeclaration xmlDeclaration = outdoc.CreateXmlDeclaration("1.0", "utf-8", null);
                XmlElement rootNode = outdoc.CreateElement(doc.Name);

                rootNode.InnerXml = doc.ReadInnerXml();
                outdoc.InsertBefore(xmlDeclaration, outdoc.DocumentElement);
                outdoc.AppendChild(rootNode);

                strFileName = "Animal_" + strSeq + ".xml";
                outdoc.Save("C:\\" + strFileName);
            }
        }
    } 
```

当此程序在每个元素后都有回车符的“AnimalBatch.xml”副本上运行时 - 它可以工作，并根据需要创建 Animal_xxxx.xml 文件。当 AnimalBatch.xml 看起来像未格式化的文本流时 - 它获取第一个 Animal - 并且可以获得它的 ID 1001 并写入输出文件 ok。它能够读取后续的 Animal 元素，但不能获得“id”属性——并最终写入名为“Animal_.xml”的输出文件——因为它试图从属性中读取的 strSeq 变量显然是 null 或空白。最后，第二个文件只包含以下内容：

`<?xml version="1.0" encoding="utf-8"?>`
`<Animal />`

这使我相信 XmlReader，至少在 doc.Read() 方法的范围内，(doc.Name=="Animal") 语句或以后的“strSeq = doc.GetAttribute("id");” - 如果`<Animal id="1002">` 标签后有 CR/LF，则工作方式不同。

我想我真正的问题是 - 什么时候 doc.GetAttribute("id"); 文档中的光标在哪里？为什么它不能得到“1001”之后的那些 - 这确实有效？

John 说 XML 不关心格式——我也一直这么认为——但这令人困惑。另外 - 对于我的应用程序，我可以获得 XML 的唯一方法是未格式化，因为我通过 SSIS 退出 SQL，它是文本流，而不是 XML 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:11.070

首先，我没有看到你在任何地方分配任何东西`outdoc`......我想你想用当前节点数据填充它，然后保存它？另外，我会创建一个`XmlDocument`对象，然后在循环中清除/填充它，在循环中创建新对象几千次并不是一个好主意......

还要注意`XmlReader`一次移动一个元素。所以你的代码自动取款机将：

1.  打电话`XmlRead()`而不是陷入任何情况（它会阅读第一个`?xml`声明）
2.  调用`XmlRead()`一次，陷入案例，移动到`id`属性并写入空文件。
3.  调用`XmlRead()` **10 次**\，跳过所有内容直到下一个`Animal`元素。

从内部标签中获取数据的一种解决方案`<Animal>`类似于[msdn 上的 This example](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.read.aspx)。

其次是想出更方便的方法，例如带有[ReadToFollowing的](http://msdn.microsoft.com/en-us/library/ms162536.aspx)[ReadInnerXml](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.readinnerxml.aspx)方法。另外，看看[GetAttribute 方法](http://msdn.microsoft.com/en-us/library/3c932kx5.aspx)。

我的程序是：

1.  `string toFile = "";`
2.  读取文件直到`<Animal>`标记。
3.  `GetAttribute("id");`
4.  `toFile = ReadInnerXml();`
5.  写入`toFile`文件；）
6.  `doc.ReadToFollowing("Animal");`

可能有一些小的调整，因为我没有检查我用编译器写的东西......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T21:00:40.570

```
static void SplitXMLReader()
{
    string strFileName;
    string strSeq;

    XmlReader doc = XmlReader.Create("C:\\AnimalBatch.xml");

    while (doc.Read())
    {
        if (doc.Name=="Animal")
        {
            strSeq = doc.GetAttribute("id");

            XmlDocument outdoc = new XmlDocument();
            XmlDeclaration xmlDeclaration = outdoc.CreateXmlDeclaration("1.0", "utf-8", null);
            XmlElement rootNode = outdoc.CreateElement(doc.Name);

            rootNode.InnerXml = doc.ReadInnerXml();
            outdoc.InsertBefore(xmlDeclaration, outdoc.DocumentElement);
            outdoc.AppendChild(rootNode);

            strFileName = "Animal_" + strSeq + ".xml";
            outdoc.Save("C:\\" + strFileName);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:06:35.113

您需要在 outdoc 上创建根节点。使用此代码：

```
 static void SplitXMLTextReader()
    {

        string strFileName;
        string strSeq = "0";

        XmlTextReader doc = new XmlTextReader(("C:\\AnimalBatch.xml"));
        doc.WhitespaceHandling = WhitespaceHandling.None;

        while (doc.Read())
        {
            switch (doc.Name)
            {
                case "Animal":
                    XmlDocument outdoc = new XmlDocument();
                   XmlDeclaration xmlDeclaration = outdoc.CreateXmlDeclaration("1.0", "utf-8", null);
                       XmlElement rootNode = outdoc.CreateElement(doc.Name);
                    rootNode.InnerXml = doc.ReadInnerXml();
                    outdoc.InsertBefore(xmlDeclaration, outdoc.DocumentElement);
                    outdoc.AppendChild(rootNode);

                    doc.MoveToFirstAttribute();
                    if (string.Compare(doc.Name, "id", true) == 0)
                    {
                        strSeq = doc.Value;
                    }
                    strFileName = "Animal_" + strSeq + ".xml";
                    outdoc.Save("C:\\" + strFileName);
                    break;
            }
        }

    } 
```

# c# - 在 C# .net 中发送邮件失败

> ID：12136859
> 
> 赞同：2
> 
> 时间：2012-08-27T05:57:51.610
> 
> 标签：c#, email

我发送电子邮件的代码在 psat 两周内正常工作。但是现在它显示了一个错误，例如

> 邮件发送失败。

我不知道为什么会出现这个问题。上周放了一些新的防火墙新政策，是不是因为这个问题才提出来的？我该怎么办？

这是我的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            if (TextBox1.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Email ID. cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox1.Focus();
            }
            else if (TextBox2.Text == "")
            {

                string alertmessage = "";
                alertmessage = "CC To cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox2.Focus();
            }
            else if (TextBox3.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Subject cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox3.Focus();
            }
            else if (TextBox4.Text == "")
            {

                string alertmessage = "";
                alertmessage = "Message Body cannot be blank ";
                this.CreateMessageAlert(this, alertmessage, "alertKey");
                TextBox4.Focus();
            }
            //else if (upSignature.FileName == "")
            //{
            //    ctr = 1;
            //    string alertmessage = "";
            //    alertmessage = "Attachment  Missing...";
            //    this.CreateMessageAlert(this, alertmessage, "alertKey");
            //    upSignature.Focus();
            //}

            else
            {

                string photo = "Enquiry" + Session["MRNO"].ToString() + FileUpload1.FileName;
                string strpath = Request.MapPath("~/");
                FileUpload1.SaveAs(strpath + "/Enquiry/" + photo);

                try
                {
                    MailMessage mail = new MailMessage();
                    mail.To.Add(new MailAddress(TextBox1.Text.Trim()));
                    mail.From = new MailAddress("XXXXXXX");
                    mail.Subject = "Enquiry for MRNO " + " " + " " + Session["MRNO"].ToString() + " " + " " + "Reg.";
                    mail.CC.Add(TextBox2.Text.Trim());
                    mail.Body = TextBox4.Text.Trim();

                        mail.Attachments.Add(new Attachment(FileUpload1.PostedFile.InputStream, FileUpload1.FileName));
                        mail.Attachments.Add(new Attachment(FileUpload2.PostedFile.InputStream, FileUpload2.FileName));

                    //Attachment attach = new Attachment(strpath + "/Enquiry/" + photo);
                    //mail.Attachments.Add(attach);

                    SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);

                    smtp.EnableSsl = true;

                    smtp.UseDefaultCredentials = false;
                    smtp.Credentials = new NetworkCredential("XXXXXX", "XXXXXXX");

                    smtp.Send(mail);

                    string alertmessage = "";
                    alertmessage = "Mail Has Been Sent";
                    this.CreateMessageAlert(this, alertmessage, "alertKey");

                    //   Page.RegisterStartupScript("close", "<script language=javascript>self.close();</script>");

                }
                catch (Exception ex)
                {
                    Response.Write(ex.Message);
                }
            }
        }
        catch (Exception ex1)
        {
            Response.Write(ex1.Message);
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:10:14.060

您需要打开 587 端口来发送邮件。与您的网络团队核实此事并确保它已打开

# javascript - 事件绑定到动态创建的元素

> ID：12136861
> 
> 赞同：0
> 
> 时间：2012-08-27T05:57:54.783
> 
> 标签：javascript, jquery

我有一个文本框#search_text。在 keyup 上，我创建了一个 div#sresult_container。并将某些 div 附加到 div#sresult_container。当此容器显示在画布上时，我尝试将单击和鼠标悬停事件绑定到 div#sresult_container。我尝试以下代码，但那不起作用。我该怎么办？

```
$("#search_text").keyup(function(e) {
    if (e.which != 40 && e.which != 38) {
        $("#search").removeAttr('disabled');
        $.post('http://www.allinone.com', {
            Search: sVal
        }, function(data) {
            $sresult_container = $('<div id="sresult_container"></div>');
            //somecode which create another divs and append to the $sresult_container
        })
    }

    $('#sresult_container').bind({
        click: function(e) {
            //some code  
            },
            mouseover: function(e) {
                //some code
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:00:40.140

```
$('#someParent').on('click', '.someChildSelector', function(e){
}); 
```

侦听`click`冒泡到`#someParent`匹配指定（即`.someChildSelector`）选择器的事件。

因此，源自您附加的任何子元素的事件将被上述处理程序捕获。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-27T07:43:21.090

您可以使用“[实时](http://api.jquery.com/live/)”功能完成此任务。

```
$('#sresult_container').live('click', function() {
    alert('hello from binded function call');
}); 
```

# java - 无法理解 java 中 HashMap 的 clear 方法的实现

> ID：12136863
> 
> 赞同：7
> 
> 时间：2012-08-27T05:58:10.060
> 
> 标签：java, hashmap

我看到了java hash map，clear方法，像这样：

```
public void clear() {
    modCount++;
    Entry[] tab = table;
    for (int i = 0; i < tab.length; i++)
        tab[i] = null;
    size = 0;
} 
```

我不明白，为什么要使用新标签来清除。

为什么不使用表格来清除？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:11:40.980

> 我不明白，为什么要清除新标签。

它不是一个新表……它只是一个局部变量。

我能想到三个可能的原因：

*   可读性，正如@Bhesh Gurung 所建议的那样......尽管在这里（IMO）几乎没有什么区别。

*   如果一个线程调用`clear()`而第二个线程执行可能导致表扩展的更新，它可能会减轻（某种程度上）造成的损害。但这当然不能解决问题，所以我倾向于认为这是荒谬的。

*   它可能会提高性能；例如，由于优化器知道局部变量中的引用`tab`不能改变，它可以更好地优化数组边界检查。

其中，我认为第三个理由是最合理的。

（我不认为这与`transient`修饰符有任何关系。在这种情况下，修饰符只是为了可读性。`HashMap`该类提供`readObject`并且`writeObject`使`transient`修饰符没有实际意义。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:10:10.260

这可能是因为该`table`字段被声明为`transient`，因此它不是 HashMap 对象的持久状态的一部分。该`table`字段在方法中被替换，例如`resize()`不同步的方法，因此当在方法调用`table`中遍历其所有条目时，可以从您下方交换该字段。`clear()`如果它引用`table`first 并遍历该引用，我们保证如果该`table`字段发生更改，我们仍然会遍历原始`table`.

# ruby-on-rails - 如何在 ruby 中保存嵌套类？

> ID：12136869
> 
> 赞同：0
> 
> 时间：2012-08-27T05:58:47.190
> 
> 标签：ruby-on-rails

我的 ruby​​ 应用程序中有 3 个类。

```
 class EmployeeDetail < ActiveRecord::Base
         belongs_to :ContactDetails  
   end

   class ContactDetails < ActiveRecord::Base
      belongs_to :communicationAddress, :class_name=>'Address'
      belongs_to :permanentAddress, :class_name=>'Address'
   end

   class Address < ActiveRecord::Base
      attr_accessible :city, :country, :pin, :state, :street
   end 
```

我的要求是为 EmployeeDetail 创建视图并从同一页面保存通信地址和永久地址。

谁能告诉我 EmployeeDetail 的 _form.html.erb 的可能结构应该是什么，以及我必须在控制器中进行哪些修改才能保存地址。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:03:37.983

您应该尝试[嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)和[自动保存关联](http://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html)功能。

但首先，修复关联名称 :ContactDetails 可能会导致非常奇怪的错误，因为 Ruby 会将所有以大写字母开头的单词视为常量。

首选方法是使用 :contact_details 和 :communication_address 样式，但 :contactDetails 也应该可以使用

此外，最好为模型使用单数名称。

然后在你的`EmployeeDetail`模型中写：

```
accepts_nested_attributes_for :contact_details 
```

它将允许模型在`contact_details_attributes`字段中接受 contact_details 属性

在`ContactDetails`：

```
accepts_nested_attributes_for :communication_address, :permanent_address 
```

之后，您可以使用[fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)助手创建表单，例如：

```
 <%= form_for :employee_detail do |employee_form| %>
    <%= employee_for.fields_for :contact_detail do |contact_fields| %>
       <%= contact_fields.fields.for :communication_address do |comm_address_fields| %> 
```

您可能会看到一些示例：[here](http://rubysource.com/complex-rails-forms-with-nested-attributes/)、[here](http://railscasts.com/episodes/196-nested-model-form-part-1)和许多其他示例，google by`rails nested form`

# mysql - 在mysql中找到每小时执行的选择查询数？

> ID：12136871
> 
> 赞同：0
> 
> 时间：2012-08-27T05:58:54.880
> 
> 标签：mysql, sql

如何在mysql中查找每小时执行的选择查询数？

有没有办法找到这个？

请帮帮我。

谢谢，

尼特什·库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:23:36.213

You could enable MySQL's [general query logging](http://dev.mysql.com/doc/en/query-log.html) to a table (note that this has a non-negligible performance impact) and then perform queries on the data:

```
SELECT   DATE(event_time), HOUR(event_time), COUNT(*) AS select_queries
FROM     mysql.general_log
WHERE    argument LIKE 'select %'
GROUP BY DATE(event_time), HOUR(event_time) 
```

# c# - 如何使用 C# 在文本框中显示选定的数据？

> ID：12136876
> 
> 赞同：-9
> 
> 时间：2012-08-27T05:59:30.140
> 
> 标签：c#

我是 C# 语言的新手。我必须在 C# 中创建项目，以显示从列表框或文本框中的组合框中选择的数据。

只需单击“添加”按钮，列表框或组合框中的选定文本将显示在文本框上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:05:49.263

- 打开 Visual Studio -
创建 C# Winform 应用程序
- 在窗体设计器中，将 Button、TextBox 和 ComboBox 控件拖放到窗体上
- 双击窗体以查看 Form_Load 事件并添加以下代码：

```
string aBitOfText = "blindfolded coding";
combobox1.Items.Add(aBitOfText); 
```

-返回表单设计器视图
-双击按钮并将其添加到按钮的单击事件

```
TextBox1.Text = combobox1.Text; 
```

# java - Java 是否会在不使用 try 和 catchblock 的情况下自动处理异常？

> ID：12136880
> 
> 赞同：2
> 
> 时间：2012-08-27T05:59:45.090
> 
> 标签：java, exception, exception-handling

这段代码显示异常：

```
Exception in thread "main" java.lang.ArithmeticException: / by zero
        at Ankit2.main(Ankit2.java:6) 
```

为什么以及如何发生？不使用 try and catch 块？

```
class ankit1    
{
public static void main(String args[])    
 {
        float a=20,b=120,c=50,sum;    
        sum=(a+b+c)/0;    
        System.out.println("The average of three number is:"+sum);    
    }      

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T06:01:06.003

那是一个运行时异常。

您不必申报或抓住这些。

您的代码未捕获（声明或未声明）的任何异常都会使正在运行的线程崩溃。在启动程序的主线程的情况下，JVM 将在退出之前打印堆栈跟踪。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T06:04:57.713

除以零之类的操作会引发未经检查的异常。这就是为什么您的代码在没有 try/catch 块的情况下编译得很好。这并不意味着在运行时不会抛出异常。查看已检查和未检查异常之间的区别。

# xml - 如何分别从每个父节点获取子节点？

> ID：12136882
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:00:07.800
> 
> 标签：xml, actionscript-3, apache-flex

我有一些数据 XML ..

```
<main>
  <TabNavigator x="27" y="11" width="455" height="376" id="gh" backgroundColor="#A4B6E9">
    <NavigatorContent width="100%" height="100%" label="Client" id="clientTab"></NavigatorContent>
    <NavigatorContent width="100%" height="100%" label="Admin" id="adminTab"></NavigatorContent></TabNavigator>
    <TitleWindow x="521" y="84" width="377" height="234">
      <DataGrid x="0" y="0" width="375" height="163" borderVisible="true" id="details">
        <columns>
          <ArrayList>
            <GridColumn dataField="Name" id="arrayName"/><GridColumn dataField="Address" headerText="Address"/>
            <GridColumn dataField="Phone_Number" headerText="Phone_Number"/>
          </ArrayList>
        </columns>
      </DataGrid>
      <Button x="139" y="167" height="28" label="Export"/>
    </TitleWindow>
</main> 
```

我使用以下代码检索给定 XML 的子名称。

```
private function urlLdr_complete(event:Event):void{
var xmlData:XML=new XML(URLLoader(event.currentTarget).data);                       
for each (var t:XML in xmlData.children()) 
{
   Alert.show(t.Name);
} 
```

但我只有 2 个孩子（TabNavigator 和 TitleWindow）。如何在每个父节点中获取其他孩子？我希望每个父母都有单独的孩子。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:25:46.450

您需要使用递归函数沿着树向下走。使用 trace() 而不是 alert()：

```
private function urlLdr_complete(event:Event):void
{
    var xmlData:XML=new XML(URLLoader(event.currentTarget).data);
    showNodeName(xmlData);
}

private function showNodeName($node:XML):void
{
    // Trace the current node
    trace($node.name());
    if($node.hasChildNodes)
    {
        for each (var child:XML in $node.children())
        {
            // Recursively call this function on each child
            showNodeName(child);
        }
    }
} 
```

或者，使用 E4X descendants() 函数：

```
private function urlLdr_complete(event:Event):void
{
    var xmlData:XML=new XML(URLLoader(event.currentTarget).data);
    // Trace the root node:
    trace(xmlData.name());
    // And trace all its descendants:
    for each(var child:XML in xmlData.descendants())
    {
        trace(child.name());
    }
} 
```

两者都应该产生相同的结果：

```
main
TabNavigator
NavigatorContent
NavigatorContent
TitleWindow
DataGrid
columns
ArrayList
GridColumn
GridColumn
GridColumn
Button 
```

我还没有测试过，但我希望内置的 descendants() 函数更有效。

# javascript - 如何启动我的 WinJs 应用程序向左对齐？

> ID：12136889
> 
> 赞同：3
> 
> 时间：2012-08-27T06:01:03.647
> 
> 标签：javascript, .net, windows-8, winjs

在 Windows 8 中，有没有办法让我的 WinJs 应用程序向左对齐？

还是总是全屏启动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T06:50:14.750

无法在快照视图中启动应用程序。这是故意让用户控制他们的窗口布局的决定。假设用户有一些应用程序已经被捕捉，但启动一个新应用程序似乎会覆盖捕捉的应用程序并因此暂停它。这可能会对用户体验产生负面影响。

另一方面，可以以编程方式尝试取消捕捉 - [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.applicationview.tryunsnap.aspx)。

如果有一个令人信服的理由说明你为什么想要这种能力，我知道团队愿意倾听。

# scala - playframework：如何在 Scala 视图中执行算术运算

> ID：12136890
> 
> 赞同：1
> 
> 时间：2012-08-27T06:01:04.397
> 
> 标签：scala, playframework-2.0

> **可能重复：**
> [Play 2.0 Framework 模板引擎中的计算](https://stackoverflow.com/questions/10024880/calculation-in-play-2-0-framework-template-engine)

如果我有一些视图说 page.scala.html 并且我将哈希映射传递给该视图。现在我想在这个页面上提取并执行一些算术运算，如下所示：

```
 @pageMap.get("newPt") - @pageMap.get("oldPt") = 
(((@pageMap.get("oldPt")) - (@pageMap.get("newPt"))) 
```

但是我没有在右侧打印差异，而是得到了类似这样的`"oldPt"`值`"newPt"`：

50 - 40 = (((50)) - ((40)))

如何克服这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T07:42:30.687

您可以使用 @( ... ) 或 @{ ... } 语法编写 scala 代码块。

```
@pageMap.get("newPt") - @pageMap.get("oldPt") = @{pageMap.get("oldPt") - pageMap.get("newPt")} 
```

# mercurial - 在 Mercurial 历史中更改作者

> ID：12136895
> 
> 赞同：2
> 
> 时间：2012-08-27T06:01:44.410
> 
> 标签：mercurial, updates

我在 Mercurial 中有一个存储库，有几个月的历史。在历史记录中，我可以看到 FIRST_NAME SURNAME 表单中的用户。与此同时，我的 EMAIL 发生了变化。是否可以将历史“更新”到我现在拥有的这封新电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:07:01.410

如果您已经发布了您的历史记录（推送到可以被其他人克隆的远程仓库），那么不建议这样做。

如果未发布，如“[我可以在 mercurial 变更集上更改用户名吗？](https://stackoverflow.com/questions/732819/can-i-change-the-username-on-a-mercurial-changeset) ”中所述，[Convert Extension的](http://mercurial.selenic.com/wiki/ConvertExtension)[`--author`参数](http://mercurial.selenic.com/wiki/ConvertExtension#A--authors)可让您重新映射您的信息，包括电子邮件。`author`

# iphone - UIView（ViewControllers 视图的子视图） UIButton 无法接收点击事件

> ID：12136897
> 
> 赞同：0
> 
> 时间：2012-08-27T06:01:52.573
> 
> 标签：iphone, objective-c, ios

我有一个 ViewController，我在其中设置了两个子视图。我想在它们之间切换。但是我的 StepOne 视图中的按钮没有触发。

我是否以正确的方式使用视图？我怎样才能让这个按钮接收点击事件？

谢谢

```
@interface UsageAlertsViewController ()

@end

@implementation UsageAlertsViewController

@synthesize currViewNum, stepOneView, stepTwoView;

int padSides = 15;
int summaryViewNum =99, stepOneViewNum = 1, stepTwoViewNum = 2;

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self initAlerts];
}

-(void) initAlerts
{
    [self initViews];
    [self setCurrentView];
    [self gotoView];
}

-(void) initViews
{
    stepOneView = [[UIView alloc] init];
    stepTwoView = [[UIView alloc] init];
    stepOneView.userInteractionEnabled = NO;
    stepTwoView.userInteractionEnabled = NO;
    [self.view addSubview: stepOneView];
    [self.view addSubview: stepTwoView];
}

-(void) showSummary
{
    NSLog(@"showing summary");
}

-(void) showStepOne {
    NSLog(@"showing step one");

    //Intro label
    int introLabelWidth = 200;
    int introLabelHeight = 30;
    int introLabelXPos = [GeneralHelper GetCenteredXPosForObj:introLabelWidth :self.view];
    int introLabelYPox = [GeneralHelper TopPadding] + 50;
    UILabel *introLabel = [[UILabel alloc] initWithFrame:CGRectMake(introLabelXPos, introLabelYPox, introLabelWidth, introLabelHeight)];
    introLabel.text = @"Get alerts on the go!";
    introLabel.backgroundColor = [UIColor clearColor];
    introLabel.font = [UIFont boldSystemFontOfSize:20];
    introLabel.textColor = [[Global get] orangeClr];
    [self.stepOneView addSubview:introLabel];

    //Intro text
    int introTVWidth = self.view.frame.size.width - (2*padSides);
    int introTVHeight = 1;
    int introTVXPos = [GeneralHelper GetCenteredXPosForObj:introTVWidth :self.view];
    int introTVYPox = 115;
    UITextView* introTextView = [[UITextView alloc] initWithFrame:CGRectMake(introTVXPos, introTVYPox, introTVWidth, introTVHeight)];
    introTextView.backgroundColor = [UIColor clearColor];
    introTextView.font = [UIFont systemFontOfSize:15];
    introTextView.textAlignment = UITextAlignmentCenter;
    NSString* tx = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"alertsIntroStep1" ofType:@"txt"] encoding:NSUTF8StringEncoding error:nil];
    introTextView.text = tx;
    introTextView.editable = false;
    introTextView.scrollEnabled = false;
    [self.stepOneView addSubview:introTextView]; 
    [GeneralHelper resizeTextView:introTextView];

    //Intro button
    int nextButtonWidth = 75;
    int nextButtonHeight = 35;
    int nextButtonXPos = [GeneralHelper GetCenteredXPosForObj:nextButtonWidth :self.view];
    int nextButtonYPos = 340;
    UIButton *next = [OrangeButton Create:@"Yes!" :CGRectMake(nextButtonXPos, nextButtonYPos, nextButtonWidth, nextButtonHeight)];
    [next addTarget:self action:@selector(finishStepOne) forControlEvents:UIControlEventTouchUpInside];
    [self.stepOneView addSubview:next]; 
}

-(void) finishStepOne
{
    //Do whatever...
    NSLog(@"TRY FINISH STEP ONE");
    currViewNum = stepTwoViewNum;
    [self gotoView];
}

-(void) showStepTwo {

    //Intro text
    int introTVWidth = self.view.frame.size.width - (2*padSides);
    int introTVHeight = 1;
    int introTVXPos = [GeneralHelper GetCenteredXPosForObj:introTVWidth :self.view];
    int introTVYPox = 115;
    NSLog(@"showing step two");
    UITextView* introTextView = [[UITextView alloc] initWithFrame:CGRectMake(introTVXPos, introTVYPox, introTVWidth, introTVHeight)];
    introTextView.backgroundColor = [UIColor clearColor];
    introTextView.font = [UIFont systemFontOfSize:15];
    introTextView.textAlignment = UITextAlignmentCenter;
    NSString* tx = [NSString stringWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"alertsIntroStep2" ofType:@"txt"] encoding:NSUTF8StringEncoding error:nil];
    introTextView.text = tx;
    introTextView.editable = false;
    introTextView.scrollEnabled = false;
    [self.stepTwoView addSubview:introTextView]; 
    [GeneralHelper resizeTextView:introTextView];
}

-(void) gotoView
{
    printf("SHOWING %u", currViewNum);

    if(currViewNum == summaryViewNum) {
        [self showSummary];
    }
    if(currViewNum == stepOneViewNum) {
        [self.view bringSubviewToFront:stepOneView];
        [self showStepOne];
    }
    if(currViewNum == stepTwoViewNum) {
        //[self.view bringSubviewToFront:stepTwoView];
        [self showStepTwo];
    }
}

-(void) setCurrentView
{
    bool isActive = false; //TODO, (temp) this represents if alerts are active or not
    if(isActive) {
        currViewNum = 99;
    } else {
        currViewNum = 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:06:43.897

你已经按照你的`stepOneView`方法 做了。`stepTwoView's` `userInteractionEnabled = NO``initView`

所以`button`里面`stepOneView`会`not` `recieve` `touch`无论如何。所以`not receiving` `click` `events`

# ruby-on-rails - 无法运行 rails 服务器

> ID：12136900
> 
> 赞同：2
> 
> 时间：2012-08-27T06:02:10.717
> 
> 标签：ruby-on-rails, ruby, linux, ruby-on-rails-3

我开始学习 Ruby on Rails，但现在已经在基本安装部分停留了 2 天。我正在关注一个教程，其中提到使用`rails server`命令启动服务器。

运行此命令，我得到以下输出：

```
$ rails server
/home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `each'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:66:in `block in require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `each'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/runtime.rb:55:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:119:in `require'
    from /home/niranjan/fourth_app/config/application.rb:7:in `<top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `require'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:53:in `block in <top (required)>'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
    from /home/niranjan/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我遇到了几个不同的问题，我已经完成`rvm implode`并重新安装了几次。我在 PATH 变量中有 rvm 脚本。

```
$ rvm -v

rvm 1.15.7 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

 $ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]

$ rails -v
Rails 3.2.8 
```

我正在使用 Linux Mint 12。任何帮助/建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T20:26:50.290

试试这个，它对我有用

在“Gemfile”中添加以下行（放置在为 Rails 项目创建的目录中）

> 宝石'therubyracer'
> 
> 宝石'execjs'

并在您的终端中运行此命令

> 捆绑安装

就是这样..！！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T06:07:18.410

你有 JS 运行时吗？我认为从 Rails 3.1 开始需要它（对于资产管道）。查看这篇文章：[部署 Rails 3.1 应用程序陷阱](http://merbist.com/2011/08/30/deploying-a-rails-3-1-app-gotchas/)。

尝试[安装 node.js](https://github.com/joyent/node/wiki/Installing-Node.js-via-package-manager)。

它也可能与此有关：[ExecJS and could not find a JavaScript runtime](https://stackoverflow.com/questions/6282307/execjs-and-could-not-find-a-javascript-runtime)

# android - 如何创建 https 连接？

> ID：12136907
> 
> 赞同：1
> 
> 时间：2012-08-27T06:03:37.997
> 
> 标签：android, https

我的代码适用于 http，但不适用于 https。我正在尝试`Https connections`使用 HttpClient 在 Android 手机上制作。麻烦的是我不断得到`net.ssl.SSLPeerUnverifiedException: No peer certificate`。和`Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.`

这是自定义 HttpClient 的相关代码。

```
public static HttpClient getNewHttpClient() {

     HttpParams params = new BasicHttpParams();
     HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
     HttpProtocolParams.setContentCharset(params, HTTP.DEFAULT_CONTENT_CHARSET);
     HttpProtocolParams.setUseExpectContinue(params, true);

     SchemeRegistry schReg = new SchemeRegistry();
     schReg.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
     schReg.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443));
     ClientConnectionManager conMgr = new ThreadSafeClientConnManager(params, schReg);

     DefaultHttpClient http = new DefaultHttpClient(conMgr, params);
     UsernamePasswordCredentials credentials = new UsernamePasswordCredentials("name", "pass");
     AuthScope authScope = new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT);
     http.getCredentialsProvider().setCredentials(authScope, credentials);

     return http;
} 
```

这是从服务器获取信息的代码

```
public static void Get() {

    HttpClient http = getNewHttpClient();    

    HttpResponse response;
    try {
        HttpGet httpost = new HttpGet(url);
        response = http.execute(httpost);
        BufferedReader in = null;
        Log.i(TAG, "resp-" + response);
        in = new BufferedReader(new InputStreamReader(response.getEntity()
                .getContent()));
        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");
        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }
        in.close();
        String page = sb.toString();
        Log.i(TAG, "res=" + sb.toString());
        tv.setText(page);
    } catch (ClientProtocolException e) {
        Log.i(TAG, "ClientProtocolException=" + e);
        e.printStackTrace();
    } catch (IOException e) {
        Log.i(TAG, "ClientProtocolException=" + e);
        e.printStackTrace();
    }
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:25:35.873

最后我得到了我的问题的解决方案，对于这个解决方案，我在三天内搜索了很多。使用用户名和密码对服务器进行身份验证时出现问题。我改变了这样的代码。我正在将凭据传递给服务器，该凭据仅在我的代码中发生更改，而不是问题中可用的代码..

```
public static HttpClient _getNewHttpClient() {
    try {
        KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
        trustStore.load(null, null);

        SSLSocketFactory sf = new MySSLSocketFactory(trustStore);
        sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

        HttpParams params = new BasicHttpParams();
        HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
        HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

        SchemeRegistry registry = new SchemeRegistry();
        registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
        registry.register(new Scheme("https", sf, 443));

        ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

        DefaultHttpClient http = new DefaultHttpClient(ccm, params);
        UsernamePasswordCredentials credentials = new UsernamePasswordCredentials("jk", "jk");
        AuthScope authScope = new AuthScope(AuthScope.ANY_HOST, AuthScope.ANY_PORT);
        http.getCredentialsProvider().setCredentials(authScope, credentials);

        return http;
    } catch (Exception e) {
        return new DefaultHttpClient();
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T05:11:43.557

尝试在这篇文章的答案中查看 https over HttpClient 是如何实现的：[Trusting all certificate using HttpClient over HTTPS](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https)

他们已经详细讨论过 Keystore 和 TrustManager

# iphone - iOS 6 Passbook：从我的应用程序打开 Passbook 应用程序

> ID：12136914
> 
> 赞同：3
> 
> 时间：2012-08-27T06:04:45.370
> 
> 标签：iphone, ios6, passbook

我正在构建与 Passbook 应用程序相关的应用程序。基本上，我正在为机票生成登机牌并将其添加到 Passbook。那部分工作正常。但是，我想从我的应用程序中打开 Passbook 应用程序以查看通行证详细信息。

我已经看到 Apple 删除了 URL 方案选项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T14:47:44.283

我遇到了同样的问题，它在模拟器上运行良好，但在设备上崩溃了。1 - 仔细检查权利 2 - 当 _pass 已经在库中时，我使用了这个：

```
if([_passLibrary containsPass:_pass])
{
    [[UIApplication sharedApplication] openURL:[[_passLibrary passWithPassTypeIdentifier:[_pass passTypeIdentifier] serialNumber:[_pass serialNumber]] passURL]];        
} 
```

也使用相同的上下文来删除通行证：

```
[_passLibrary removePass: [_passLibrary passWithPassTypeIdentifier:[_pass passTypeIdentifier] serialNumber:[_pass serialNumber]]]; 
```

我希望它有所帮助。

# c# - XML 文件中隐藏的垃圾字符

ID：12136917

赞同：0

时间：2012-08-27T06:04:59.093

标签：c#, xml

# java - JSON Java 向 JSON 对象添加空数组

> ID：12136921
> 
> 赞同：3
> 
> 时间：2012-08-27T06:05:24.850
> 
> 标签：java, arrays, json

我遇到了以下问题。

我的后端（Java sevlet）从数据库返回来自 MongoDB 的单个记录/文档的所有字段。这个 JSON 字符串被发送到执行一些魔法的前端。

这是通过以下代码完成的：

```
public String getDocumentJSON(int id) {
    DBCollection collection = database.getCollection("People");
    BasicDBObject query = new BasicDBObject();
    query.put("id", id);
    DBCursor cur = collection.find(query);
    DBObject one = cur.next();  
    return JSON.serialize(one);
} 
```

前端需要一个字段：`photos[]`

使用此字段创建新记录/文档。（这是一个带有照片文件名的数组）。较旧的记录/文档没有此字段，这会导致前端中断。

为了防止这种情况，我想`photos[]`在将它发送到前端之前将数组：添加到 JSON 中。但我不确定如何将此数组添加到 JSON。

最好我的代码会检查 JSON 或 DBObject 是否有该字段`photos[]`，如果有，则什么也不做，如果它不包含该字段。然后添加。

前端只需要`photos[]`即使它是空的也没问题。

我宁愿在后端解决这个问题，而不是在前端解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:10:31.533

像这样的东西应该工作：

```
DBObject one = cur.next();  

if (one.get("photos") == null)
  one.put("photos", new Object[0]);

return JSON.serialize(one); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-20T15:33:11.917

我需要做类似的事情，并发现接受答案的次要替代方法是使用[JSONArray](http://www.json.org/javadoc/org/json/JSONArray.html)：

```
one.put("photos", new JSONArray()); 
```

# javascript - Stage.load(json) 问题..Kinetic.js

> ID：12136922
> 
> 赞同：0
> 
> 时间：2012-08-27T06:05:25.677
> 
> 标签：javascript, json, html, html5-canvas, kineticjs

我有一个舞台设置，我正在上传一些可拖动可调整大小的图像。现在我正在使用 stage.toJSON(); 保存画布的状态..并在另一个页面中加载 json.. 使用 stage.load(json);

加载舞台..我刚刚阅读了那个 stage.toJSON(); 无法保存图像的状态...

有什么选择吗？？我正在尝试在 cavas 中添加一些图像并设置位置并调整它们的大小......

我想保存图像的状态，这样如果我再次调用相同的 json 字符串..我应该是我离开画布的地方..

谢谢

阿什什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T16:41:42.283

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-load-complex-stage-with-kineticjs/)

您必须使用 stage.get() 手动设置图像，因为图像不可序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T23:11:50.887

尝试

```
 image.toJSON(); 
```

分别在您的图像上查看是否有效

# c++ - 使用字符串拆分进行空检查

> ID：12136923
> 
> 赞同：0
> 
> 时间：2012-08-27T06:05:26.627
> 
> 标签：c++, strtok, string, string-split

```
vector<string> SplitString (string aString,char *sep) 
{  
  vector<string> vec;
  char * cstr,*val,*p;
  string str = aString;
  cstr = new char [str.size()+1];
  strcpy (cstr, str.c_str());
  p=strtok (cstr,sep);
  while(p!=NULL)
  {    
    vec.push_back(p);  
    p=strtok(NULL,sep);

  }delete[] cstr;return vec; } 
```

这是我的字符串拆分代码。我发送了以下字符串以使用分隔符“&”进行拆分

> "f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3="。

我在向量中得到了如下结果。

> f0=fname0 l0=lname0 f1=fname1 l1=lname1 f2=fname2 l2=lname2 f3= l3=

现在我再次发送带有分隔符'='的结果字符串。它与“l2 = lname2”一起工作正常。但是对于 "f3=" 和 "l3=" 我的分隔符在字符串的最后一个位置。所以我找不到该值是否为 null 。我想知道值（'=' 的左侧是名称，右侧是值）是否为空。我该如何检查这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:17:01.853

提升呢？我认为这是分割字符串的最简单方法。

```
#include <algorithm>
#include <iterator>
#include <boost/algorithm/string.hpp>
using namespace std;
using namespace boost;

int main()
{
    string s("f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=");

    vector<string> v1;    
    split(v1, s, is_any_of("&"), token_compress_on); 
    copy(v1.begin(), v1.end(), ostream_iterator<string>(cout, "\n"));    

    for (auto i : v1) {
        vector<string> v2;
        split(v2, i, is_any_of("="), token_compress_on); 

        copy(v2.begin(), v2.end(), ostream_iterator<string>(cout, "\n===\n"));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:22:20.653

检查您要标记的字符串的最后一个字符是否实际上是分隔符本身。

```
while (p != NULL && p[strlen(p) - 1] != *sep) 
```

* * *

**编辑：**根据您的评论，然后在对字符串进行标记之前，我将使用它来修改它，`string::find`并将`string::replace`出现的“=&”替换为“=hi&”，并将终止的“=”替换为“=hi”。这样，您将避免尴尬的解析。

此外，您不需要两次标记化，因为`strDelimit`参数 of`strtok`可以是“&=”（一次传递中的两个定界符）。

# c# - 使用不是接口的构造函数参数的依赖注入

> ID：12136926
> 
> 赞同：8
> 
> 时间：2012-08-27T06:05:35.910
> 
> 标签：c#, dependency-injection, ninject

我仍然是 DI 的新手，我试图了解我是否以错误的方式思考问题。当我想表示一个依赖于 IRandomProvider 的 Die 对象时，我正在处理一个玩具问题。这个界面很简单：

```
public interface IRandomProvider 
{
   int GetRandom(int lower, int upper);
} 
```

我想要一个看起来像这样的 Die 构造函数：

```
Die(int numSides, IRandomProvider provider) 
```

我正在尝试使用具有如下方法的静态 DIFactory：

```
 public static T Resolve<T>()
    {
        if (kernel == null)
        {
            CreateKernel();
        }
        return kernel.Get<T>();
    } 
```

CreateKernel 只是绑定到 IRandomProvider 的特定实现。

我希望能够通过以下方式调用它：

```
DIFactory.Resolve<Die>(20); 
```

如果不制作一个可以让我处理 ConstructorArgs 的特殊版本的“Resolve”，我就无法完成这项工作。这似乎使事情变得过于复杂，并且需要我为每个其他实例修改 DIFactory，并与构造函数参数的特定名称相关联。

如果我重构 Die 类以不使用 int 构造函数，则一切正常。但是现在有人必须记住初始化 numSides 参数，这似乎是个坏主意，因为这是类的要求。

我怀疑这对 DI 来说是一个糟糕的心理模型。任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T06:22:53.843

控制容器的反转不是工厂。不要用它来解析像你的`Die`类这样的业务对象。控制反转是用于让容器控制对象生命周期的模式。这样做的好处是它还支持依赖注入模式。

业务对象通常被创建、更改和处置。因此无需为它们使用容器。正如您刚刚注意到的，它们确实在构造函数中采用了它们的强制参数，这使得它们很难使用容器。

您可以在容器中注册 a`DieFactory`并让它`IRandomProvider`在构造函数中使用：

```
public class DieFactory
{
    public DieFactory(IRandomProvider provider)
    {}

    public Die Create(int numberOfSides)
    {
        return new Die(numberOfSides, _provider);
    }
} 
```

但是创建一个用于创建所有相关业务对象的工厂当然会更好。然后您可以将内核作为依赖项：

```
public class AGoodNameFactory
{
    public DieFactory(IKernel kernel)
    {}

    public Die CreateDie(int numberOfSides)
    {
        var provider = _kernel.Resolve<IRandomProvider>();
        return new Die(numberOfSides, provider);
    }

    // other factories.
} 
```

或者您可以`IRandomProvider`直接在创建类的类中将其作为依赖`Die`项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T06:27:29.330

在这种特殊情况下，您可以`ConstructorArgument`与 with 一起使用。`Kernel.Get`这是[完整的示例](http://pastebin.com/Fx0wUvLG)。

## 模块配置

```
public class ExampleKernel : NinjectModule
{
    public override void Load()
    {
        Bind<IRandomProvider>()
            .To<RandomProvider>();

        Bind<Die>()
            .ToSelf()
            .WithConstructorArgument("numSides", 6);
                           //  default value for numSides
    }
} 
```

## 在代码中解决

```
var d6 = kernel.Get<Die>(); // default numSides value
var d20 = kernel.Get<Die>(new ConstructorArgument("numSides", 20)); // custom numSides

Assert.That(d6.NumSides == 6);
Assert.That(d20.NumSides == 20); 
```

# javascript - 使用 javascript 将标签附加到 HTML 的特定位置

> ID：12136927
> 
> 赞同：0
> 
> 时间：2012-08-27T06:05:37.837
> 
> 标签：javascript, html, appendchild

我的 HTML 中有这些标签，

```
<div id="main">
    <div id="options"></div>
    <div id="searchField"></div>
    <div id="options"></div>

    <div id="results">
        ***<!-- I want to add elements here -->***
        <div id="pagenumber">
        <div id="footer">
    </div>
</div> 
```

`id="pagenumber"`在上面和里面附加孩子的javascript代码是`id="results"`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T06:10:08.573

您可以使用以下方法：

```
var pagenumber = document.getElementById('pagenumber'),
    results = document.getElementById('results'),
    newElem = document.createElement('div');

results.insertBefore(newElem, pagenumber); 
```

要在节点之后插入，*您*`pagenumber`可以使用：

```
results.insertBefore(newElem, pagenumber.nextSibling); 
```

参考：

*   [`node.insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:14:33.473

这会对你有帮助..

```
 var results=document.getElementById('results');
 var newdiv = document.createElement('div');
 var divIdName = 'myDiv';
 newdiv.setAttribute('id',divIdName);
 newdiv.innerHTML = '<p>Test</p>';
 results.appendChild(newdiv); 
```

# macos - 管道 sed 到 diff

> ID：12136931
> 
> 赞同：8
> 
> 时间：2012-08-27T06:06:10.550
> 
> 标签：macos, sed, diff, pipe

我想查看`diff`文件中间的段落和包含单个段落的文件之间的关系。

该段落在`60`file 行上`foo`，并且 file`bar`仅包含可能存在细微差异的该段落。

我可以使用因此提取该段落`sed`：`sed -n 60,60p foo`。我怎样才能使用它`diff`？

以下*不起作用*：

```
sed -n 60,60p foo | diff bar # diff: missing operand after `foo`
diff bar `sed -n 60,60p foo` # diff: extra operand `in` 
```

我可以：

```
sed -n 60,60p foo >> tempfile; diff bar tempfile 
```

是否有不需要我使用管道临时存储某处的解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T06:26:44.817

如果您使用 '-' 作为文件参数，`diff`将从标准输入读取：

```
 sed -n 60,60p foo | diff bar - 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T09:17:08.920

您可以使用流程替换：

```
diff bar <(sed -n 60,60p foo) 
```

这也可用于比较两个进程的输出：

```
diff <(sed -n 60,60p bar) <(sed -n 60,60p foo) 
```

# centos - 为什么即使使用正确的 autoconf，autogen.sh 也会失败？

> ID：12136934
> 
> 赞同：2
> 
> 时间：2012-08-27T06:06:32.547
> 
> 标签：centos, autotools, autoconf, automake, autogen

autogen.sh 失败，输出显示我需要更高版本的 autoconf。但事实上我有一个 2.6x 的 autoconf ....

为什么它仍然失败？

```
[mirror@home 4]$ ./autogen.sh
+ autoreconf -i -f -v
autoreconf: Entering directory `.'
autoreconf: configure.in: not using Gettext
autoreconf: running: aclocal --force -I m4
configure.in:4: error: Autoconf version 2.60 or higher is required
configure.in:4: the top level
autom4te: /usr/bin/m4 failed with exit status: 63
aclocal: autom4te failed with exit status: 63
autoreconf: aclocal failed with exit status: 63 
```

// configure:4
中的内容是 AC_PREREQ(2.60)

```
[mirror@home 4]$ autoconf
autoconf      autoconf2.59  autoconf2.6x
[mirror@home 4]$ autoconf
[mirror@home 4]$ ls -l autocon
[mirror@home 4]$ ls /usr/bin/autoconf* -l
lrwxrwxrwx 1 root root    12 Aug 27 13:55 /usr/bin/autoconf -> autoconf2.6x
-rwxr-xr-x 1 root root  7663 Jan  6  2007 /usr/bin/autoconf2.59
-rwxr-xr-x 1 root root 14635 Feb  3  2011 /usr/bin/autoconf2.6x 
```

2.63 > 2.60，但是自动生成失败了，真的很混乱:(

```
[mirror@home 4]$ autoconf --version
autoconf (GNU Autoconf) 2.63
Copyright (C) 2008 Free Software Foundation, Inc.
License GPLv2+: GNU GPL version 2 or later
<http://gnu.org/licenses/old-licenses/gpl-2.0.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Written by David J. MacKenzie and Akim Demaille. 
```

更多细节：

```
 autoreconf --version
    autoreconf (GNU Autoconf) 2.59 
```

我想知道的是为什么 autogen.sh 失败了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T21:07:38.647

您安装了两个版本的 autoconf，当`aclocal`运行时`autom4te`，这会启动旧版本。你有一个`autom4te-2.6x`在你的路径？如果是这样，请`export AUTOM4TE=autom4te2.6x`在运行前设置`autoreconf-2.64`。

或者只是运行：

```
AUTOM4TE=autom4te2.6x ./autogen.sh 
```

也可以看看：

[将 autoconf 更新到至少 2.6](https://stackoverflow.com/questions/3985398/update-autoconf-to-at-least-2-6)

[为什么我无法使用 autoconf2.6x 构建 autoconf，它的版本无论如何都比 2.6 新](https://stackoverflow.com/questions/12288891/why-i-failed-to-build-autoconf-with-autoconf2-6x-its-version-is-newer-than-2-6)

# android - 缓存谷歌地图安卓？

> ID：12136941
> 
> 赞同：0
> 
> 时间：2012-08-27T06:07:43.930
> 
> 标签：android, google-maps, caching

我正在开发这个应用程序，用户可能有也可能没有 GPRS 或 WiFI 连接。因此，当用户输入来源和目的地时，我想缓存城市级别视图中所需的地图（缩放 12）。有没有办法完成这个任务？我看到 Google Map API 引用了缓存功能，但是我找不到任何代码。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:15:22.510

Android 的 MapView 小部件目前（2012 年 8 月）不支持对缓存或客户端持久性的任何外部控制。

# objective-c - 向导航栏添加两个右栏按钮项

> ID：12136944
> 
> 赞同：7
> 
> 时间：2012-08-27T06:08:48.797
> 
> 标签：objective-c, xcode4, ios4, uinavigationcontroller, uibarbuttonitem

我有一个导航栏，我已成功添加了右 BarButton。NavigationBar 和 BarButton 都是以编程方式创建的。现在根据我的要求，我必须在导航栏中添加两个正确的 BarButtons。谁能告诉我该怎么做？我的应用程序针对 ios4。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-27T06:33:13.960

此代码将为您解决问题，

```
 NSArray *barButtonItems= [[NSArray alloc] initWithObjects:self.addButton,self.sortbyButton,nil];
self.navigationItem.rightBarButtonItems=barButtonItems; 
```

其中 addButton 和 sortbyButton 是 2 个独立的 BarButton 项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T18:28:58.353

我知道为时已晚，但我最近面对它。所以这就是我所做的在代码中创建一个 UIView 并将按钮作为子视图添加到这个视图中。使用 [[UIBarButtonItem alloc] initWithCustomView:buttons] 创建一个 ToolbarButton

将此工具栏按钮指定为左或右 barbuttonItem，如您所愿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:27:04.963

如果您的应用程序面向 iOS 4 及更高版本，那么您应该使用 UISegmentControl 并在其上设置两个段。捕获值更改操作事件并检查选择了哪个段并进行相应操作。

您还可以将图像设置为分段，以使外观和感觉更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:38:58.033

```
NSArray *segmentTextContent = [NSArray arrayWithObjects:
                               NSLocalizedString(@\"Group By\", @\"\"),
                               NSLocalizedString(@\"Filter By\", @\"\"),
                               nil];
UISegmentedcontrol *segmentedControl = [[UISegmentedControl alloc] initWithItems:segmentTextContent];
segmentedControl.selectedSegmentIndex = 0;
segmentedControl.autoresizingMask = UIViewAutoresizingFlexibleWidth;
segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
segmentedControl.frame = CGRectMake(0, 0, 125, 30);
[segmentedControl addTarget:self action:@selector(toggleUnit) forControlEvents:UIControlEventValueChanged];

segmentedControl.tintColor = [UIColor lightGrayColor];
defaultTintColor = [segmentedControl.tintColor retain];

self.navigationItem.rightBarButtonItem = segmentedControl;
[segmentedControl release]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T06:21:43.973

正如`UINavigationItem`[1](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/doc/c_ref/UINavigationItem)的文档所描述的，它有一个属性`rightBarButtonItems`（以及`leftBarButtonItems`），您可以在其中给出`UIBarButtons`. 它们从右（索引 0）到左（索引 n-1）显示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T06:31:15.073

@Matthias，如文档中所述，**rightBarButtonItems**属性可用于 iOS 5 及更高版本，并且此功能也需要在 iOS 4 上支持。

因此，UISegmentControl 是实现这一目标的最佳方式。

# c++ - 检查一个类是否有带有 TMP 的复制构造函数

> ID：12136947
> 
> 赞同：2
> 
> 时间：2012-08-27T06:09:05.447
> 
> 标签：c++, template-meta-programming, sfinae, pointer-to-member

我一直在尝试使用一点 SFINAE 来确定泛型类型 T 是否具有我可以使用的复制构造函数。这是我目前所在的位置。

```
template <bool statement, typename out>
struct Failable
{
    typedef out Type;
};
//This class is only used to insert statements that 
//could encounter substitution failure

template <typename O>
struct COPY
{
    template <typename T>
    typename Failable<true == sizeof(&T::T(const T&)), char>::Type copy(int)
    {}

    template <typename T>
    typename Failable<true, int>::Type copy(...)
    {}

}; 
```

然而，这也是我有点卡住的地方。 `&T::T(const T&)`显然是一个无效的语句，因为我们不能提供一个带有指向成员的指针的参数列表，即使是一个 ptm 函数。我总是可以尝试指定某种`void (T::*ptmf)(const T&) = &T::T`，并希望它隐式地确定正确的重载构造函数以放入指向成员函数的指针中，但这也意味着构造函数具有特定的返回类型，我必须指定它。

还有其他人有什么想法可以让我继续前进吗？（我还需要应用类似的概念来检查赋值运算符。）

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T06:10:54.190

您可以为此使用[std::is_copy_constructible](http://en.cppreference.com/w/cpp/types/is_copy_constructible)和[std::is_assignable](http://en.cppreference.com/w/cpp/types/is_assignable)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T14:39:13.697

你可以用你的代码做，只需要稍微修改一下。

```
template <bool statement, typename out>
struct Failable
{
     typedef out Type;
}; 

template <typename O>
struct COPY
{

     static O MakeO();

     template <typename U> // U and T are the same type
     static typename Failable<(sizeof U(MakeO())), char>::Type copy(int);

     template <typename U>
     static typename Failable<true, int>::Type copy(...);

     enum { value = sizeof(char) == sizeof( copy<O>(0) ) };
}; 
```

# bash - 为什么 shell 忽略通过变量传递给它的参数中的引号字符？

> ID：12136948
> 
> 赞同：42
> 
> 时间：2012-08-27T06:09:19.903
> 
> 标签：bash, variables, syntax, quoting, expansion

这些工作如广告：

```
grep -ir 'hello world' .
grep -ir hello\ world . 
```

这些不会：

```
argumentString1="-ir 'hello world'"
argumentString2="-ir hello\\ world"
grep $argumentString1 .
grep $argumentString2 . 
```

尽管`'hello world'`在第二个示例中被引号括起来，但 grep 将`'hello`(and `hello\`) 解释为一个参数，并将`world'`(and `world`) 解释为另一个参数，这意味着在这种情况下，`'hello`它将是搜索模式并且`world'`将是搜索路径。

同样，这只发生在从`argumentString`变量扩展参数时。grep 在第一个示例中正确地将`'hello world'`(and `hello\ world`) 解释为单个参数。

谁能解释这是为什么？是否有适当的方法来扩展字符串变量，以保留每个字符的语法，以便 shell 命令正确解释它？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-27T06:19:30.657

### 为什么

当字符串被扩展时，它被拆分成单词，但不会重新评估它以找到特殊字符，例如引号或美元符号或......这是 shell 一直以来的行为方式，因为 Bourne shell 1978 年左右。

### 使固定

在`bash`中，使用数组来保存参数：

```
argumentArray=(-ir 'hello world')
grep "${argumentArray[@]}" . 
```

或者，如果勇敢/愚蠢，请使用`eval`：

```
argumentString="-ir 'hello world'"
eval "grep $argumentString ." 
```

另一方面，谨慎往往是勇气的更好部分，而与人一起工作`eval`是谨慎胜于勇敢的地方。如果您不能完全控制`eval`'d 字符串（如果命令字符串中有任何用户输入未经严格验证），那么您将面临潜在的严重问题。

请注意，Bash 的扩展顺序在 GNU Bash 手册的[Shell Expansions中有所描述。](http://www.gnu.org/software/bash/manual/bash.html#Shell-Expansions)请特别注意第 3.5.3 节外壳参数扩展、3.5.7 分词和 3.5.9 引用删除。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T06:18:22.773

当您将引号字符放入变量时，它们只是变成普通文字（请参阅[http://mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)；感谢@tripleee 指出此链接）

相反，请尝试使用数组来传递您的参数：

```
argumentString=(-ir 'hello world')
grep "${argumentString[@]}" . 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-27T23:02:35.827

在查看此问题和相关问题时，我很惊讶没有人提出使用显式子shell。对于 bash 和其他现代 shell，您可以显式执行命令行。在 bash 中，它需要 -c 选项。

```
argumentString="-ir 'hello world'"
bash -c "grep $argumentString ." 
```

完全按照原始提问者的要求工作。这种技术有两个限制：

1.  您只能在命令或参数字符串中使用单引号。
2.  该命令只能使用导出的环境变量

此外，这种技术处理重定向和管道，其他 shellisms 也可以工作。您还可以使用 bash 内部命令以及在命令行上工作的任何其他命令，因为您实际上是在要求 subshel​​l bash 将其直接解释为命令行。这是一个更复杂的例子，一个有点无端复杂的 ls -l 变体。

```
cmd="prefix=`pwd` && ls | xargs -n 1 echo \'In $prefix:\'"
bash -c "$cmd" 
```

我已经用这种方式和参数数组构建了命令处理器。通常，这种方式*更*容易编写和调试，并且回显您正在执行的命令也很简单。OTOH，当您确实拥有抽象的参数数组时，参数数组可以很好地工作，而不仅仅是想要一个简单的命令变体。

# vb.net - 窗口增长时添加平滑动画

> ID：12136952
> 
> 赞同：1
> 
> 时间：2012-08-27T06:09:38.290
> 
> 标签：vb.net, visual-studio-2010, .net-4.0

我的想法是在窗口/表单增长时为它提供动画。例如，Windows 7 的计算器在显示单位转换器或新功能时，窗口会随着动画的流畅变化而改变大小。问题是我不知道在使用按钮更改大小（例如 200 像素以上）时使用哪个代码。我是初学者，所以我不知道如何使用向我建议的“计时器”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T03:20:00.257

在此页面上，可以找到整个概念（在 C# 中）。您甚至可以下载已经完成的代码（同样，在 C# 中）： [http ://www.vcskicks.com/size-transform.php](http://www.vcskicks.com/size-transform.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T18:45:05.700

这是 C++/CLI 中的一个简单实现。我使用了 C++/CLI，所以我可以使用语法。您可以轻松地将其转换为 C#。

**AnimateWindowResize.h**

```
#pragma once

using namespace System;
using namespace System::IO; // Stream
using namespace System::Drawing; // Bitmap
using namespace System::Reflection; // Assembly
using namespace System::Collections::Generic;
using namespace System::Text;
using namespace System::Windows::Forms;

public ref class AnimateWindowResize
{
private:
    static const int DEFAULT_STEP_AMOUNT = 15;

    bool m_startExpanding;
    bool m_animationEnabled;
    bool m_isHorizontal;
    Form^ m_windowsForm;
    Button^ m_initiateButton;
    int m_minSize;
    int m_maxSize;
    Timer^ m_timer;
    int m_stepRate;
    String^ m_initButtonText;
    String^ m_finalButtonText;
    String^ m_initButtonEmbeddedImageName;
    String^ m_finalButtonEmbeddedImageName;
    Bitmap^ m_initBitmap;
    Bitmap^ m_finalBitmap;

public: 
    AnimateWindowResize(Form^ windowsForm, Button^ initiateButton, bool isHorizontal, int minSize, int maxSize, bool isWindowExpanded);

    // init[final]EmbeddedImageName are images added under Linker -> Input -> Embed Managed Resource File.
    AnimateWindowResize(Form^ windowsForm, Button^ initiateButton, String^ initEmbeddedImageName, String^ finalEmbeddedImageName, String^ initButtonText, String^ finalButtonText, bool isHorizontal, int minSize, int maxSize, bool isWindowExpanded);

protected:

    void Init(Form^ windowsForm, Button^ initiateButton, String^ initEmbeddedImageName, String^ finalEmbeddedImageName, String^ initButtonText, String^ finalButtonText, bool isHorizontal, int minSize, int maxSize, bool isWindowExpanded)
    {
        m_initBitmap = nullptr;
        m_finalBitmap = nullptr;
        m_windowsForm = windowsForm;
        m_initiateButton = initiateButton;
        if (initButtonText != nullptr)
            m_initiateButton->Text = initButtonText;

        Stream^ stm = nullptr;
        if(initEmbeddedImageName != nullptr)
            stm = Assembly::GetEntryAssembly()->GetManifestResourceStream (initEmbeddedImageName);
        if (stm != nullptr)
        {
            m_initBitmap = gcnew Bitmap(stm);
            m_initiateButton->Image = m_initBitmap;
        }

        stm = nullptr;
        if(finalEmbeddedImageName != nullptr)
            stm = Assembly::GetEntryAssembly()->GetManifestResourceStream (finalEmbeddedImageName);
        if (stm != nullptr)
            m_finalBitmap = gcnew Bitmap(stm);

        m_minSize = minSize;
        m_maxSize = maxSize;
        m_startExpanding = isWindowExpanded;
        m_isHorizontal = isHorizontal;
        m_initButtonText = initButtonText;
        m_finalButtonText = finalButtonText;
        m_initButtonEmbeddedImageName = initEmbeddedImageName;
        m_finalButtonEmbeddedImageName = finalEmbeddedImageName;

        m_animationEnabled = true;
        m_stepRate = DEFAULT_STEP_AMOUNT;

        // Calculate the step rate
        m_stepRate = (int)((maxSize - minSize) / 10.0);
        if (m_stepRate <= 0)
            m_stepRate = DEFAULT_STEP_AMOUNT;

        m_timer = gcnew Timer();
        m_timer->Interval = 1;
        m_timer->Enabled = false;
        m_timer->Tick += gcnew EventHandler(this, &AnimateWindowResize::m_timer_Tick);
    }

    void m_timer_Tick(Object^ sender, EventArgs^ e)
    {
        if (m_startExpanding)
        {
            if (m_isHorizontal)
            {
                if (m_windowsForm->Width >= m_maxSize)
                {
                    m_timer->Enabled = false;
                }
                else
                {
                    int tempWidth = m_windowsForm->Width + m_stepRate;

                    if (tempWidth >= m_maxSize)
                    {
                        m_windowsForm->Width = m_maxSize;
                        m_timer->Enabled = false;
                        return;
                    }

                    m_windowsForm->Width += m_stepRate;
                }
            }
            else // Vertical
            {
                if (m_windowsForm->Height >= m_maxSize)
                {
                    m_timer->Enabled = false;
                }
                else
                {
                    int tempHeight = m_windowsForm->Height + m_stepRate;

                    if (tempHeight >= m_maxSize)
                    {
                        m_windowsForm->Height = m_maxSize;
                        m_timer->Enabled = false;
                        return;
                    }

                    m_windowsForm->Height += m_stepRate;
                }
            }
        }
        else // Collaspe
        {
            if (m_isHorizontal)
            {
                if (m_windowsForm->Width <= m_minSize)
                {
                    m_timer->Enabled = false;
                }
                else
                {
                    int tempWidth = m_windowsForm->Width - m_stepRate;

                    if (tempWidth <= m_minSize)
                    {
                        m_windowsForm->Width = m_minSize;
                        m_timer->Enabled = false;
                        return;
                    }

                    m_windowsForm->Width -= m_stepRate;
                }
            }
            else // Vertical
            {
                if (m_windowsForm->Height <= m_minSize)
                {
                    m_timer->Enabled = false;
                }
                else
                {
                    int tempHeight = m_windowsForm->Height - m_stepRate;

                    if (tempHeight <= m_minSize)
                    {
                        m_windowsForm->Height = m_minSize;
                        m_timer->Enabled = false;
                        return;
                    }

                    m_windowsForm->Height -= m_stepRate;
                }
            }
        }
    }

public: 
    void StartAnimation()
    {
        m_timer->Enabled = m_animationEnabled;
        m_startExpanding = !m_startExpanding;

        // Change the text of the initiate button.
        if (m_startExpanding)
        {
            m_initiateButton->Text = m_finalButtonText == nullptr ? "Less" : m_finalButtonText;
            if (m_finalBitmap != nullptr)
                m_initiateButton->Image = m_finalBitmap;
        }
        else
        {
            m_initiateButton->Text = m_initButtonText == nullptr ? "More" : m_initButtonText;
            if (m_initBitmap != nullptr)
                m_initiateButton->Image = m_initBitmap;
        }

        if (!m_animationEnabled)
            ResizeWithNoAnimation();
    }

public: 
    property bool AnimationEnabled
    {
        bool get() { return m_animationEnabled; }
        void set(bool value) 
        { 
            m_animationEnabled = value;
        }
    }

private: 
    void ResizeWithNoAnimation()
    {
        // Just resize the window.
        if (m_startExpanding)
        {
            if (m_isHorizontal)
                m_windowsForm->Width = m_maxSize;
            else
                m_windowsForm->Height = m_maxSize;
        }
        else
        {
            if (m_isHorizontal)
                m_windowsForm->Width = m_minSize;
            else
                m_windowsForm->Height = m_minSize;
        }
    }
}; 
```

**AnimateWindowResize.cpp**

```
#include "AnimateWindowResize.h"

AnimateWindowResize::AnimateWindowResize(Form^ windowsForm, Button^ initiateButton, bool isHorizontal, int minSize, int maxSize, bool isWindowExpanded)
{
    Init(windowsForm, initiateButton, nullptr, nullptr, nullptr, nullptr, isHorizontal, minSize, maxSize, isWindowExpanded);
}

// init[final]EmbeddedImageName are images added under Linker -> Input -> Embed Managed Resource File.
AnimateWindowResize::AnimateWindowResize(Form^ windowsForm, Button^ initiateButton, String^ initEmbeddedImageName, String^ finalEmbeddedImageName, String^ initButtonText, String^ finalButtonText, bool isHorizontal, int minSize, int maxSize, bool isWindowExpanded)
{
    Init(windowsForm, initiateButton, initEmbeddedImageName, finalEmbeddedImageName, initButtonText, finalButtonText, isHorizontal, minSize, maxSize, isWindowExpanded);
} 
```

# java - android spinner getselected item

> ID：12136953
> 
> 赞同：1
> 
> 时间：2012-08-27T06:09:58.470
> 
> 标签：java, android

在我的`Spinner`我有一个`String` `Array`{久坐，轻度活跃，中度活跃和重度活跃}（这是一个人的BMR的计算）

我想要做的**是**在`Spinner`.

例如，当我单击**sedentary**时，对于**sedentary**的值为**1.2**，**bmr**`multiplied`的结果是**1.2**。但我似乎无法让它为我工作。

请在下面检查我的代码：

```
private void calculateMen(){    
    String f1 = etft.getText().toString();
    String f2 = etin.getText().toString();
    String f3 = etweight.getText().toString();
    String f4 = etage.getText().toString();

    if ( (f1.isEmpty() || f2.isEmpty() || f3.isEmpty() || f4.isEmpty() ) ) 
    {   // call for custom toast
        viewErrorToast();
    } 
    else
    {
        // Metric Formula for BMR (Men) English Unit
        // 66 + ( 6.2377 x weight in kilos ) + 
        //( 12.7084 x height in cm ) - ( 6.7550 x age in years )
        String age, in, ft, weight;
        Double answer;
        age =  etage.getText().toString();
        in =  etin.getText().toString();    
        ft = etft.getText().toString();
        weight = etweight.getText().toString();

        if (spinnerText.equals("Sedentary"))
        {     
            answer =  ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) ) - ( 6.8 * Double.parseDouble( age ) ) ) * 1.2 ); 
            //*  Double.parseDouble(actAnswer) ;    
            BigDecimal bd = BigDecimal.valueOf(answer);
            bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);         
            etanswer.setText(bd.toString()); 
        }
        else if (spinnerText.equals("Lightly Active"))
        {
            answer =  ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) ) - ( 6.8 * Double.parseDouble( age ) ) ) * 1.375 ); 
            //*  Double.parseDouble(actAnswer) ;    
            BigDecimal bd = BigDecimal.valueOf(answer);
            bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
            etanswer.setText(bd.toString()); 
        }
        else if (spinnerText.equals("Moderately Active"))
        {
          answer =  ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) ) - ( 6.8 * Double.parseDouble( age ) ) ) * 1.55 ); 
          //*  Double.parseDouble(actAnswer) ;    
          BigDecimal bd = BigDecimal.valueOf(answer);
          bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
          etanswer.setText(bd.toString()); 
        }
        else if (spinnerText.equals("Heavily Active"))
        {
          answer =  ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) ) - ( 6.8 * Double.parseDouble( age ) ) ) * 1.725 ); 
          //*  Double.parseDouble(actAnswer) ;    
          BigDecimal bd = BigDecimal.valueOf(answer);
          bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
          etanswer.setText(bd.toString()); 
        }
        // call for custom toast
        viewBMRSavedToast();
    }

} // end of calculateMen method 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:38:46.390

请尝试修改代码如下：

创建一个字段：

```
private HashMap<String, Double> spinnerValues; 
```

从您的活动的 onCreate 中，调用以下函数：

```
private void createSpinnerValues(){
    spinnerValues=new HashMap<String, Double>();
    spinnerValues.put("Sedentary", 1.2);
    spinnerValues.put("Lightly Active", 1.375);
    spinnerValues.put("Moderately Active", 1.55);
    spinnerValues.put("Heavily Active", 1.725);
} 
```

然后找到你修改后的函数来计算如下：

```
private void calculateMen(){

    //Your Code Goes here...

     String age, in, ft, weight;
     Double answer;
     age =  etage.getText().toString();
     in =  etin.getText().toString();    
     ft = etft.getText().toString();
     weight = etweight.getText().toString();

     answer=getAnswer(age,in,ft,weight,getSelectedItemValueFromSpinnerText(spinnerText));

     BigDecimal bd = BigDecimal.valueOf(answer);
     bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);

     etanswer.setText(bd.toString()); 

     // call for custom toast
     viewBMRSavedToast();
    }

private Double getAnswer(String age, String in, String ft, String weight,
        Double selectedItemValueFromSpinner) {
    double answer = ( ( 66 + ( 6.2377 * Double.parseDouble( weight ) ) + 
             ( 12.7084 * ( Double.parseDouble( in ) * 12 + Double.parseDouble( ft ) ) )
             - ( 6.8 * Double.parseDouble( age ) ) ) * selectedItemValueFromSpinner ); 
    return answer;
}

private Double getSelectedItemValueFromSpinnerText(String spinnerText) {
    return spinnerValues.get(spinnerText);
} 
```

不要忘记在以下位置包含您现有的代码：//Your Code Goes here...

# jquery - HTML5 中的可滑动页面

> ID：12136954
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:10:00.947
> 
> 标签：jquery, html, touch, responsive-design

我有一个网站（HTML5、CSS3），我想通过使其在移动设备上运行来改进它。因此，我达到了需要通过简单的向左或向右滑动来更改页面的地步。我不想更改我的 HTML 文档的结构。

我需要它看起来像原生移动应用程序中的任何可滑动组件，所以当我处于流程中间时，我需要看到第二页的一部分，在我滑动时移动。

是否有任何好的响应库可以帮助我解决这个问题？或者你知道什么技巧吗？或者也许是教程？

编辑：我现在更感兴趣，我看到了库，如何预加载页面，以便使用库并提供页面幻灯片效果。这是我最大的担忧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:19:32.177

对于滑动支持，您可能想看看

*   [轻弹](http://lagoscript.org/jquery/flickable/demo)或
*   [滚动](http://cubiq.org/iscroll-4)；他们现在有一个名为[SwipeView的项目](http://cubiq.org/swipeview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:27:51.217

Hammer.js 看起来不错的手势：[http](http://eightmedia.github.com/hammer.js/) ://eightmedia.github.com/hammer.js/ ，但它需要添加一个类等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:12:48.780

试试[http://jquerymobile.com/](http://jquerymobile.com/)，它专为触摸屏设计并提供[页面转换](http://jquerymobile.com/demos/1.1.1/docs/pages/page-transitions.html)

# javascript - Backbone + RequireJS：Collection.each() 不工作

> ID：12136965
> 
> 赞同：0
> 
> 时间：2012-08-27T06:10:50.860
> 
> 标签：javascript, backbone.js, requirejs

我正在尝试在 RequireJS 之上实现一个简单的 Backbone 应用程序，但事情并没有解决。具体来说，我不能让 Collection 对其自身进行迭代。下面是我从各自文件中提取的模型/集合/视图。

模型：

```
define([
    'backbone'
], function(Backbone) {
    'use strict';

    var m_Song = Backbone.Model.extend({
    });

    return m_Song;
}); 
```

收藏：

```
define([
    'backbone',
    '../models/model'
], function(Backbone, m_Song) {
    'use strict';

    var c_Songs = Backbone.Collection.extend({
        model: m_Song,

        url: './path/to/JSON.json',

        initialize: function() {
            this.fetch();
        }
    });

    return new c_Songs();
}); 
```

看法：

```
define([
    'jquery',
    'underscore',
    'backbone',
    '../collections/collection'
], function($, _, Backbone, c_Songs) {
    'use strict';

    var v_Main = Backbone.View.extend({
        initialize: function() {
            this.render();
        },

        render: function() {
            var $_html = (function(){
                var $_res = [];

                console.log(c_Songs);

                c_Songs.each(function($_v, $_k) {
/* =====================> Codes in here won't run <===================== */
                });

                _.each(c_Songs, function($_v, $_k) {
/* =====================> Won't run either <===================== */
                });

                return $_res;
            })();

            return this.$('tbody').append($_html);
        }
    }); 
```

我做错什么了吗？作为记录，以下是输出`console.log(c_Songs);`：

```
─ d
  ├─ _byCid
  ├─ _byId
  ├─ length
  └─ models
     ├─ length
     └─ 0
        ├─ _callbacks
        ├─ _escapedAttributes
        ├─ _pending
        ├─ _previousAttributes
        ├─ _silent
        ├─ attributes
           └─ (My JSON response can be found here!)
        ├─ changed
        ├─ cid
        └─ collection 
```

但我确信我不应该以像这样奇怪的方式访问我的 JSON 数据`c_Songs.models[0].attributes`；一定有什么问题。

我应该如何正确地让 Collection 对其自身进行迭代？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:40:22.607

感谢 mu ，[在这里](http://jsfiddle.net/wookiehangover/yqpLr/)找到了完美的解决方案！

# jsf - 如何从 PrimeFaces 数据表自定义分页器

> ID：12136967
> 
> 赞同：11
> 
> 时间：2012-08-27T06:11:01.870
> 
> 标签：jsf, datatable, primefaces, pagination

我想自定义*PrimeFace*的数据表分页。

它目前在底部显示页数为：`(1 of 5)`。我想在记录总数中显示一页中的记录数，例如：`(1-10 of 50)`.

我在下面包含了我的代码 - 但它不起作用。有人可以帮忙吗？

```
<p:dataTable id="tblStatusSearch" var="item" rowIndexVar="rowStatusSearch"      
    rows="10" paginator="true"  
    paginatorTemplate="{CurrentPageReport}  
    {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
    value="#{StatusAction.listEBeans}"

<f:facet name="footer"> 
    <h:outputText value="#{rowStatusSearch + 1} - 10 out of #{bondLocationStatusAction.itemCount}"/>
</f:facet> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-21T13:10:40.990

`currentPageReportTemplate`您可以像这样为**CurrentPageReport**使用 PrimeFaces ：

```
<p:dataTable id="tblStatusSearch" var="item" paginator="true" rows="10"
    currentPageReportTemplate="Showing {startRecord}-{endRecord} out of {totalRecords}"
    paginatorTemplate="{CurrentPageReport}  
{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} "
    value="#{StatusAction.listEBeans}"> 
```

我确认它在 PrimeFaces 3.4.2 中有效。它出现在 PrimeFaces 3.0 的用户指南中，因此如果您使用 PrimeFaces 3.x，它应该适合您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T07:38:50.617

我认为这将解决您的目的。

```
<p:dataTable id="datatable" var="car" value="#{myBean.cars}" paginator="true" rows="10"  
paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport}"
currentPageReportTemplate="{startRecord} - {endRecord} of {totalRecords}">
<p:column...../>
<p:column...../>
</p:datatable> 
```

代替 {CurrentPageReport}，您将能够看到您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T09:29:10.303

`"please refer to the attached image"`我想你忘了附上图片；）

如果您想在您的 bean 中显示页面大小，您`p:datatable`应该在 bean 中声明两个字段并在其中保存`pageSize`和`first`参数值表单`load`方法，那么您可以使用以下内容显示页面大小`paginatorTemplate`：

`paginatorTemplate=" {CurrentPageReport} #{yourBean.first + yourBean.pageSize} and rest of you template "`

请记住，这`EL`适用于`paginatorTemplate`财产。

# ios - 删除 NSString 中的多个空格

> ID：12136970
> 
> 赞同：23
> 
> 时间：2012-08-27T06:11:33.270
> 
> 标签：ios, objective-c, iphone

我有一个`NSString`，这有多个空格，我想修剪这些空格并为例如@“how.....are.......you”创建一个空格到@“how are you”。（点只是空格）

我试过了

```
NSString *trimmedString = [user_ids stringByTrimmingCharactersInSet:
                           [NSCharacterSet whitespaceCharacterSet]]; 
```

它似乎不起作用。任何的想法。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-27T06:27:55.290

您可以使用正则表达式来完成此操作：

```
NSError *error = nil;

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"  +" options:NSRegularExpressionCaseInsensitive error:&error]; 
```

模式是一个空格，后面跟着一个或多个空格。将其替换为字符串中的一个空格：

```
NSString *trimmedString = [regex stringByReplacingMatchesInString:user_ids options:0 range:NSMakeRange(0, [user_ids length]) withTemplate:@" "]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-27T07:02:18.463

这在我尝试时有效：

```
NSString *trimmedString = @"THIS      IS      A     TEST S    STRING   S D        D F ";
    while ([trimmedString rangeOfString:@"  "].location != NSNotFound) {
        trimmedString = [trimmedString stringByReplacingOccurrencesOfString:@"  " withString:@" "];
    }
NSLog(@"%@", trimmedString); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-08-27T06:24:41.533

用户1587011

```
NSString *trimmedString = [user_ids stringByTrimmingCharactersInSet:
                           [NSCharacterSet whitespaceCharacterSet]]; 
```

此字符串方法用于删除字符串开头和结尾处的空格。

试试这个，它会给你你想要的：-

```
NSString *theString = @"    Hello      this  is a   long       string!   ";

NSCharacterSet *whitespaces = [NSCharacterSet whitespaceCharacterSet];
NSPredicate *noEmptyStrings = [NSPredicate predicateWithFormat:@"SELF != ''"];

NSArray *parts = [theString componentsSeparatedByCharactersInSet:whitespaces];
NSArray *filteredArray = [parts filteredArrayUsingPredicate:noEmptyStrings];
theString = [filteredArray componentsJoinedByString:@" "]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-10T09:55:25.570

**所选答案的**Swift 3代码****

 **```
let regex = try? NSRegularExpression(pattern: "  +", options: .caseInsensitive)
let trimmedString: String? = regex?.stringByReplacingMatches(in: user_ids, options: [], range: NSRange(location: 0, length: user_ids.characters.count), withTemplate: " ") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-13T10:18:07.710

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\s{2,}+" options:NSRegularExpressionCaseInsensitive error:&error];

user_ids = [regex stringByReplacingMatchesInString:user_ids options:0 range:NSMakeRange(0, [s length]) withTemplate:@" "]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-24T10:18:59.320

斯威夫特 4：

```
let stringOut = stringIn.replacingOccurrences(of: " +", with: " ", options: String.CompareOptions.regularExpression, range: nil) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-09-02T07:34:36.197

```
NSString* NSStringWithoutSpace(NSString* string)
{
    return [string stringByReplacingOccurrencesOfString:@" " withString:@""];
} 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-08-27T06:16:07.343

您可以使用：

```
NSString *trimmedString = [user_ids stringByReplacingOccurrencesOfString: @" " withString:@""]; 
```**

# php - 登录验证

> ID：12136971
> 
> 赞同：-1
> 
> 时间：2012-08-27T06:11:35.837
> 
> 标签：php, sql

您好，我目前遇到此代码的问题，我不确定将其他代码放在哪里。错误是这样的：

```
 mysql_num_rows() expects parameter 1 to be resource, boolean given in 
```

这是我的代码：

```
 if ($_POST['submit'])
{           

            $username = $_POST['id'];
            $password = $_POST['pass'];
            //connect to the database here
            $username = mysql_real_escape_string($username);
            $query = "SELECT hashpass, salt
                    FROM users
                    WHERE username = '$username'";
            $result = mysql_query($query);
            if(mysql_num_rows($result) < 1) //no such user exists
            {
                echo "NO USER!";
            }
            $userData = mysql_fetch_array($result, MYSQL_ASSOC);
            $hash = sha1 ( $userData['salt'] . $password );
            if($hash != $userData['password']) //incorrect password
            {
                echo "WRONG PASS";
            }
            } 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:22:32.393

该`mysql_num_rows`函数返回记录集中的行数。

```
int mysql_num_rows ( resource $result ) 
```

该`mysql_query`函数对 MySQL 数据库执行查询。此函数返回 SELECT 查询的查询句柄、其他查询的 TRUE/FALSE 或失败时的 FALSE。

所以在你的情况下，你应该这样做

```
<?php

$link = mysql_connect("localhost", "mysql_user", "mysql_password");

$query = "SELECT hashpass, salt
                    FROM users
                    WHERE username = '$username'";

$result = mysql_query($query);

mysql_select_db("database", $link);

$result = mysql_query($query, $link);
$num_rows = mysql_num_rows($result);

if($num_rows < 1) //no such user exists
{
     echo "NO USER!";
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T06:22:53.663

在我的类似脚本中，我首先检查 $result 以确保查询正常......我还假设每个用户只有一行！

```
$result = mysql_query($query);

if ($result)
{
  if(mysql_num_rows($result) == 1)
  {
    // user exists... check password
  }
  else
  {
    //no such user exists
    echo "NO USER!";
  }
}
else
{
  // Query failed - no such user
} 
```

此外，以防该代码段适用于您的代码，我只会在您验证用户名后才包含密码检查！

# javascript - 如何删除javascript中的不透明度？

> ID：12136973
> 
> 赞同：1
> 
> 时间：2012-08-27T06:11:57.640
> 
> 标签：javascript, android, cordova, opacity

我有一个视图隐私政策。我为我的 div 添加了不透明度，但现在我不知道如何删除不透明度。我正在尝试删除该属性，但它不起作用。有人可以帮助我吗？这是一个非常迫切的要求。

```
<script type="text/javascript">

    function show(id)
    {
       if(document.getElementById("wrapper")) //check the element exists and can be accessed
       {   
           var ele = document.getElementById("wrapper");//get hold of the element
           if(ele.style.visibility=="visible")//see if display property is set to none
           {   
           }
           else
           {
                ele.style.visibility="visible";
               document.getElementById('LOGIN').style.opacity = 0.4;

           }
       }
    } 

    function hide(id)
    {
       if(document.getElementById("wrapper"))//check the element exists and can be accessed
       {    
           var ele = document.getElementById("wrapper");//get hold of the element
           if(ele.style.visibility=="visible")//see if display property is set to none
           {   
               ele.style.visibility="hidden"; 
           }
           else
           {

           }
       }
    } 

</script>
<style>
#wrapper {
position:absolute; 
z-index:1;
top:11%; bottom:5%; left:4%;right:15%;
width:87%;
height:75%;
font-size:15pt;
border:5px solid orange;
border-radius:25px;
overflow:auto;
visibility:hidden;
background-color:#ffffff;

}

#LOGIN.faded {
  opacity: 0.5;

}

</style>
  </head>
  <body >
   <div id="LOGIN" align="center">

            <table width="100%">
                <tr>
                    <td>
                        <input type="image" src="../images/header-sign-up.png" style="width:100%" alt=""/>
                    </td>
                </tr>
            </table>
            <div align="center">
                <a href="#" onclick ="show('showhide');">View privacy policy</a>

            </div>

   </div>
   <div id="wrapper">
                    <div id="scroller" >
                        <div id="popupContact" >
                            <a href="#" onclick ="hide('showhide');">Close Window</a><br/>
                            <p>
                                &nbsp;&nbsp;biler Privacy Policy

                                &nbsp;Please feel free to contact us with any comments, questions, complaints or suggestions you might have regarding the information practices described in this statement. You may send us an e-mail at 
                          </p>  
                        </div>
                    </div>
                </div>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T06:23:50.940

尝试现有的不透明度，或显示...

```
document.getElementById('varContent').style.opacity = 0;
document.getElementById('varContent').style.opacity = 1; 
```

或者

```
document.getElementById('varContent').style.display = 'none';
document.getElementById('varContent').style.display = 'block'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:20:37.723

你必须创造`opacity`价值`1`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T11:08:06.343

使用基于 web kit 的浏览器将不透明度设置为 1 将（不必要地）减慢显示速度（尤其是在背景图像上滚动不透明度为 1 的内容时）

最好完全删除该属性（如果您确定它可用，则使用“removeProperty”方法（IE 9 或更高版本）：

```
element.style.removeProperty("opacity") 
```

或者，更兼容：

```
element.style.opacity = "" 
```

# javascript - 如何使用javascript从动态表中获取特定的单元格值

> ID：12136976
> 
> 赞同：0
> 
> 时间：2012-08-27T06:12:30.143
> 
> 标签：javascript

我有一个显示数据库记录的表格。在每一行中都有一个用于选择特定用户的下拉菜单。在更改时，它应该显示新用户的相应值。

当我从下拉列表中选择特定用户时，它应该将 col1 和 col2 值与所选用户匹配并返回 col3 值。我想要的是获取该特定行的 col1 和 col2 值。我该怎么做 ？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T06:26:12.470

你想用`live('click', function()`. 这将适用于动态创建的元素。

例如，您可以尝试类似的方法；

```
$('#your_table_id .some_class_in_a_row_to_click').live('click', function(){
    $(this).siblings().each(function(){
      var column = $(this).find('.some_class_for_column_with_data');
      var data = column.text();
      alert(data);
    });
}); 
```

您可以将其应用于具有某些列的表。单击具有类的某些列`some_class_in_a_row_to_click`将在该行中具有类的另一列上警告文本`some_class_for_column_with_data`

# c++ - C : Visual Studio 和 Eclipse+MinGW 中的预编译头文件

> ID：12136978
> 
> 赞同：0
> 
> 时间：2012-08-27T06:12:44.817
> 
> 标签：c++, visual-studio-2010, mingw

我目前在我的 C++ 项目中同时使用 Visual Sstudio 2010 和 Eclipse+MinGW。我经历过不同的编译器行为，需要您的解释。这是一个例子：

假设我有`a.h`和`a.cpp`。而且我已经预编译了头文件（即`stdafx.h`在 VS 和`precomp.h`Eclipse 中（我为 Eclipse 创建了一个））。我将在预编译的头文件中包含一些基本的头文件（例如，opencv 中的 core.hpp）。在这两个`a.h`和`a.cpp`中，我将使用在包含在预编译头文件中的基本头文件中声明的一些类（例如，opencv 中的 Mat）。

对于 Visual Studio 2010，我必须将 stdafx.h 放入每个 .cpp 文件中（如[链接](https://stackoverflow.com/questions/5234311/include-stdafx-h-in-header-or-source-file)中所示）。因此`a.cpp`，在开始时，我有这个：

```
#include "stdafx.h"
#include "a.h" 
```

此外，我**不**包括`stdafx.h`在`a.h`. 我期待编译器找不到在基本头文件中声明的类的错误，但事实证明在VS下编译很好。根本没有错误。

对于 Eclipse+MinGW，我喜欢这样：在`a.h`，我放在`#include "precomp.h"`开头。而在a.cpp中，我**只**放了`#include "a.h"`（**据一些朋友说，这是包含头文件的C++标准方式**）。编译后，这是没有错误的，这是毫无疑问的。但是，如果我这样做与我为 Visual Studio 所做的类似，即我**不**包含`precomp.h`在`a.h`. 会有错误，说明有些类没有在这个范围内声明。`As concerned by @MSalters, I should **highlight** that both a.h and a.cpp contain proper declarations and definitions.`

所以任何人都可以帮我解释VS和Eclipse+MinGW的不同行为吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:00:00.467

预编译的头文件是一种效率措施。如果编译器使用普通方法编译它们，则代码应该仍然有效。特别是，您的 Visual C++ 代码应该在 Eclipse 上编译，反之亦然。

~~我强烈怀疑您的问题出在 Eclipse 方面。为什么`a.cpp`几乎是空的？它应该包含所有声明的定义`a.h`。~~

如果您包含“precomp.h”，它可能应该出现在“ah”的内容之前。基本上有两种方法可以实现这一目标。一种是按顺序包含两个标题（Visual Studio 样式），另一种是在“ah”中的任何声明之前包含“precomp.h”。（MinGW 风格）

MinGW 中的预编译规则稍微宽松一些，因为它预编译的更少。那

# selenium - 在 Selenium IDE 中记录 IFrame 活动

> ID：12136982
> 
> 赞同：2
> 
> 时间：2012-08-27T06:13:26.643
> 
> 标签：selenium, selenium-ide, fluentautomation

我是 Selenium 的初学者。我使用 Selenium IDE 1.9.0 来记录网站活动。例如，我正在尝试记录一些涉及在线产品创建的活动。考虑网站“demo.soft2print.com/products.asp”在这里，我点击任何产品。它打开一个 IFrame，我可以在其中设计产品。Selenium IDE 从加载 IFrame 的那一刻起不会记录任何内容（甚至加载 IFrame）。在 Selenium IDE 的“源”选项卡中查看时，以下是最后记录的内容（即当我单击产品时）

```
<tr>
<td>clickAndWait</td>
<td>css=a.productgrouplink</td>
<td></td> 
```

请帮助您了解如何使用 Selenium IDE 继续记录 IFrame 活动（在 IFrame 中加载和相关活动）。如果我知道如何参考我提到的网站，那就太好了。等待一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:58:13.963

正如我在[这里](https://stackoverflow.com/a/13740044/821773)发布的那样。

这是一个对我有用的解决方案：

**场景**：

1.  使用向 DOM 添加 iframe 的 JavaScript 加载页面`<iframe id="iframeId" />`
2.  iframe 加载
3.  现在我想检查 iframe 中的元素`<div id="divElement"></div>`

**解决方案**：

（Command > C，Target > T，Value > V）如果我没有包括，这意味着留空

*   **C** :*打开*   |   **电话**：*/*
*   **C**：*waitForElementPresent*   |   **T** : *iframeId*   |   **五**：*3000*
*   **C** :*等待帧加载*   |   **T** : *iframeId*   |   **五**：*5000*
*   **C**：*选择框架*   |   **T** : *iframeId*
*   **C** :*断言元素存在*   |   **T** : *css=div#divElement*
*   **C** :*验证元素存在*   |   **T** : *css=div#divElement*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-15T21:52:45.587

我知道这有点晚了，但是我发现我认为是一个更简单的解决方案，它适用于 selenium 2.5.0（显然在写作时，有一个已知的问题错误导致它不记录 iframe 活动，请参见此处：[https ://code.google.com/p/selenium/issues/detail?id=6180](https://code.google.com/p/selenium/issues/detail?id=6180) )**我在运行 selenium IDE 时的解决方案是简单地在新选项卡中打开 iframe**，然后录制工作，如下所示：

*   从菜单中右键单击要记录操作的 iframe
*   选择 -> 这个框架 -> 在新标签页中打开
*   Selenium IDE 应该开始记录动作（呜呜！）
*   ...做你的东西，点击点击类型等
*   完成后，关闭选项卡，继续主页，selnium ide 应该可以吗？

我的样本大小为 1，在 google 上没有看到太多关于这个主题的内容，所以这可能不适合你。请以任何一种方式发表评论以让其他人知道？干杯，一个

# c++ - 如何获取指向原始数据的 std::set 指针？

> ID：12136986
> 
> 赞同：1
> 
> 时间：2012-08-27T06:14:16.500
> 
> 标签：c++, stl, set

我想将整个集合作为参数传递给函数，就像我们对数组所做的那样（即 &array[0]）。我无法弄清楚如何获取指向一组原始数据的指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T06:16:40.247

不可能以与数组相同的方式执行此操作，因为`std::set`不需要将其数据排列在连续的内存块中。它是一棵二叉树，因此它很可能由链接节点组成。但是你可以通过引用传递它，或者使用`begin()`and`end()`迭代器。

```
template <typename T>
void foo(const std::set<T>& s);

template <typename Iterator>
void bar(Iterator first, Iterator last);

std::set<int> mySet = ....;
foo(mySet);
bar(mySet.begin(), mySet.end()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T06:16:56.013

您无法像获取数组一样获取指向原始数据的指针，因为 a`set`不驻留在连续内存中。

> 我想将整个集合作为参数传递给函数

通过引用传递它。没有内存开销（如果这是您担心的）：

```
void foo(std::set<int>& x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T06:16:46.520

您将不得不遍历`std::set`以提取`std::set`.
与`std::vector`数组不同，标准没有要求`std::set`元素应位于连续内存中。

在函数中传递一个引用/指针，`std::set`并通过迭代它来提取函数内部的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T06:37:03.740

这取决于你的意思：

> “我想将整个集合作为参数传递给函数”

```
std::set<int>  data;
// fill data; 
```

您可以通过引用传递集合：

```
plop(data);   // void plop(std::set<int>& data); // passing be reference would be the C++ way 
```

或者，您可以传递迭代器。
这会抽象出您正在使用的容器类型，从而允许 plop() 的编写者专注于算法。在这种情况下，迭代器的行为方式与指针相同（在 C++ 代码中）。

```
plop(data.begin(), data.end(); // template<typename I> void plop(I begin, I end); 
```

或者，您的意思是要将数据集中传递给类似 C 的函数。
在这种情况下，您需要传递一个指针（因为这是 C 唯一能理解的）。不幸的是，您不能将指针直接传递到集合中，因为这没有真正的意义。但是您可以将数据复制到向量中，然后从那里复制到 C 程序中：

```
std::vector<int>  datavec(data.begin(), data.end());
plop(&data[0], datavec.size());   // void plop(int* data, std::size_t size); 
```

这是有效的，因为向量将数据存储在连续的内存中。

# mysql - 如何在文本的开头和结尾对 mySQL 进行 REPLACE？

> ID：12136990
> 
> 赞同：1
> 
> 时间：2012-08-27T06:15:09.607
> 
> 标签：mysql, concatenation, replace

我正在尝试使用自定义标签在 wp_posts 表的 post_content 列中包装一段文本。现在，我可以肯定的是，我需要应用它的所有文本块（数百个）如下所示：

```
blah blah blah...
<!--more-->
<script type="text/javascript">...</script> 
```

我需要它看起来像这样：

```
blah blah blah...
[custom_tag]
<script type="text/javascript">...</script>
[/custom_tag] 
```

可以在 mySQL 中以某种方式使用 REPLACE 命令或除了替换之外的某种连接来完成吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:58:58.707

试试这个

```
concat(replace(s,'<!--more-->','[custom_tag]'),'[/custom_tag]') 
```

或者如果您需要`[custom_tag]`在`<script`

```
concat(replace(s,'<script','[custom_tag] <script'),'[/custom_tag]') 
```

# bash - 如何检查主机是否在您的 known_host ssh 中

> ID：12136998
> 
> 赞同：15
> 
> 时间：2012-08-27T06:15:56.443
> 
> 标签：bash, shell, ssh, expect

我的脚本中有以下命令可以将主机添加到 ssh 中的已知主机。

```
VAR2=$(expect -c '
 spawn ssh -o StrictHostKeyChecking=no '"$REMOTE_HOST_USER@$REMOTE_HOST_IP"'
 expect "*?assword:*"
 send "'"$REMOTE_HOST_PASSWD"'\r"
 expect { 
 "Permission denied, please try again." {
 exit '"$WRONG_PASSWORD"' 
 }
 }
 ') 
```

工作正常，但如果主机已经在 known_hosts 中，我需要在命令之前进行控制，如果它已经在 known_hosts 中，则不执行命令。如何检查主机是否在 known_hosts 中？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-27T06:20:54.630

尝试：`ssh-keygen -F <hostname>`

`known_hosts`如果找到主机名指纹并且命令返回，将显示该行`0`，否则不显示任何内容并且命令返回`1`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T09:33:25.343

根据 ssh-keygen(1) 手册页

> -F 主机名 在 known_hosts 文件中搜索指定的主机名，列出找到的所有事件。此选项对于查找散列主机名或地址很有用，也可以与 -H 选项结合使用，以散列格式打印找到的键。