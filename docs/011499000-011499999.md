# StackOverflow 问答 11499000-11499999

# javascript - 如何在扩展的弹出窗口中显示 url 的内容？

> ID：11499000
> 
> 赞同：0
> 
> 时间：2012-07-16T06:18:22.270
> 
> 标签：javascript, json, google-chrome-extension

我正在尝试制作一个 Chrome 扩展程序来获取当前页面的 URL，并使用它来创建和显示一个 QR 码，该 QR 码使用下面的 Google API 链接到它。

*这是我的 popup.js*

```
chrome.tabs.getSelected(null,function(tab) {
var tablink = tab.url;
});

document.write('https://chart.googleapis.com/chart?chs=100x100&cht=qr&chl=' + tablink); 
```

*这是我的 manifest.json*

```
{
  "name": "Qrit",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Instantly creates a QR Code that links to the current page.",
  "browser_action": {
    "default_icon": "icon.png",
     "default_popup": "popup.html"
  },
  "permissions": [
    "tabs"
  ]
} 
```

问题是弹出窗口只是空白。我对 Javascript 和 Json 几乎一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:15:10.407

首先你写“manifest_version”：2，它不允许内联脚本。其次，你的弹出代码应该这样写

```
chrome.tabs.getSelected(null,function(tab) {
var tablink = tab.url;
document.write('https://chart.googleapis.com/chart?chs=100x100&cht=qr&chl=' + tablink);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:43:08.950

正如汤姆所说，使用清单版本 2 你不能有内联脚本。此外，`chrome.tabs.getSelected`被斩首，您应该使用`chrome.tabs.query`.
这里有一些东西可以让你开始......

**清单.json**

```
{
  "name": "Qrit",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Instantly creates a QR Code that links to the current page.",
  "browser_action": {
    "default_icon": "icon.png",
     "default_popup": "popup.html"
  },
  "permissions": [
    "tabs"
  ]
} 
```

**popup.html**

```
<!DOCTYPE html>
<html>
    <head>
        <script src='popup.js'></script>
    </head>
    <body>
        <div id='message'>Getting Image....</div>
    </body>
</html> 
```

**popup.js**

```
function onImageLoad() {
  var message = document.querySelector('#message');
  message.parentNode.removeChild(message);
}

function onImageError(e) {
  var message = document.querySelector('#message');
  message.innerText = 'Error getting image';
  e.srcElement.parentNode.removeChild(e.srcElement);
}

function onWindowLoad() {
  chrome.tabs.query({
    'active': true,
    'windowId': chrome.windows.WINDOW_ID_CURRENT
  }, function(tab) {
    var image = document.createElement('IMG');
    image.src = 'https://chart.googleapis.com/chart?chs=100x100&cht=qr&chl=' + tab[0].url;
    document.body.appendChild(image);
    image.onload = onImageLoad;
    image.onerror = onImageError;
  });
}

window.onload = onWindowLoad; 
```

# django - 如何在 Django 中进行破坏性操作后刷新foreignkey_set？

> ID：11499003
> 
> 赞同：1
> 
> 时间：2012-07-16T06:18:52.413
> 
> 标签：django

我意识到，如果我通过删除项目（没关系），模型上的 object_set 不会更新`filter().delete()`，但是我想更新`_set`删除后的内容，以便通过：

```
def test_prefetch(self):
    game = Game.objects.prefetch_related('bubble_set').get()
    game.fill_board()
    self.assertEqual(game.bubble_set.count(), game.width * game.height)
    game.bubble_set.filter(x=5).delete()
    # Fails
    self.assertNotEqual(game.bubble_set.count(), game.width * game.height)
    game = Game.objects.prefetch_related('bubble_set').get() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:16:02.730

您需要重新获取对象。所以可以做`game = Game.objects.prefetch_related('bubble_set').get()`之后`.delete()`。

# objective-c - navigationController 设置 pop 过渡样式

> ID：11499004
> 
> 赞同：0
> 
> 时间：2012-07-16T06:18:56.417
> 
> 标签：objective-c, uinavigationcontroller

是否可以更改 UINavigationController 的 popToViewController 过渡样式？我需要与 pushViewController 方法相同的样式吗？（我的意思是从右到左样式（pushViewController），而不是从左到右（默认为popToViewController））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:45:04.660

对于模态呈现的视图控制器，您可以使用 modalTransitionStyle 属性更改动画。AFAIK，没有办法改变导航控制器的推送动画（除了从头开始重建 UINavigationController）。 [https://github.com/devindoty/iOS-Transition-Pack](https://github.com/devindoty/iOS-Transition-Pack)

或者

```
[UIView beginAnimations:@"animation" context:nil];
[self.navigationController pushViewController: yourviewcontroller animated:NO]; 
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.navigationController.view cache:NO]; 
[UIView commitAnimations]; 
```

# fedex - 联邦快递 Api 费率计算器

> ID：11499009
> 
> 赞同：-1
> 
> 时间：2012-07-16T06:19:40.307
> 
> 标签：fedex

要传递给 Fedex API 的参数。新的 Fedex APi 费率计算器无法正常工作，出现身份验证错误 1000“身份验证失败”错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T15:44:31.667

首先，您的问题描述性不是很强，但是您遇到的错误是因为您的开发人员密钥或密码不正确。

如果你还没有这样做，我建议你去[https://www.fedex.com/wpor/web/jsp/drclinks.jsp?links=wss/develop.html](https://www.fedex.com/wpor/web/jsp/drclinks.jsp?links=wss/develop.html)。在该页面的底部有一个链接，上面写着“Obtain Developer Test Key”。从那里，只需填写表格，FedEx 就会向您发送您的凭据以及要使用的服务器 URL。

您需要的凭据是开发人员密钥、帐号、仪表编号和密码。Developer 密钥将是一个包含 16 个字符的字母数字字符串。帐号和仪表编号均仅由数字组成，且均由 9 个字符组成。密码将是由 25 个字符组成的字母数字字符串。

# xml - 检查 xslt 中的条件

> ID：11499010
> 
> 赞同：1
> 
> 时间：2012-07-16T06:19:40.733
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0

下面是输入 XML (Little Big) 对不起更大的输入 XML 和输出 xml

```
<tutorial>
<lessons>
   <lesson>
     chapter unit 1 page
</lesson>
    <lesson>
        chapter unit 10~ page
    </lesson>
    <lesson>
        chapter unit page
    </lesson>
    <lesson>
        note lesson
    </lesson>
 <lessons1>
    <lesson>
        chapter unit 1 page
    </lesson>
    <lesson>
        description page
    </lesson>
    <lesson>
        chapter unit page
    </lesson>
</lessons1>
</lessons>
</tutorial> 
```

下面是我的输出 XML

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<Geography>

 <historical>
  <social>
     <toc1>
        <toc>
           <chapter>chapter</chapter>
           <unit>unit 1</unit>
           <pages>page</pages>
        </toc>
         <toc>
           <chapter>chapter</chapter>
           <unit>unit 10</unit>
           <pages>page</pages>
        </toc>
         <toc>
           <chapter>chapter</chapter>
           <unit>unit 10</unit>
           <pages>page</pages>
        </toc>
        <toc>
          <sample>
           <original>Note Lesson</orginal>
          </sample>
        </toc>
     </toc1>
     <toc2>
        <toc>
           <chapter>chapter</chapter>
           <unit>unit 1</unit>
           <pages>page</pages>
        </toc>
        <toc>
          <sample>
           <original>description page</orginal>
          </sample>
        </toc>
         <toc>
           <chapter>chapter</chapter>
           <unit>unit 10</unit>
           <pages>page</pages>
        </toc>
     </toc2>
  </social> 
```

抱歉，这是一个安静的大输出 XML 文件。

在单元中，如果我在输出中有单元 1，它将显示为单元 1，但例如，如果我有 unit10~，它将显示为单元 10，如果默认情况下没有值，则必须删除~，它必须显示单元 10。

小小解释

我的输出 XML 必须区分为三类

1) 章节

2) 单位

3) 页面

输入将采用三种不同类型的格式

1) XML 有章节、单元（带 tilda 符号的数字）和页面

2) XML 有章节、单元（不带 tilda 符号的数字）和页面

3）XML只有页面ex..（注释和描述）所以在这里如果例如我有10〜（单位）输出将显示10，如果输入xml在输出xml中没有值（单位）它将显示 10 作为默认数字 – karthic 昨天

请帮助我并在 XSLT 的帮助下指导我。

问候卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:46:57.253

**这种转变**：

```
<xsl:stylesheet version="2.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>
        <xsl:strip-space elements="*"/>

      <xsl:variable name="vNames" select="'chapter', 'unit', 'pages'"/>

     <xsl:template match="lessons">
        <Geography>
          <historical>
            <social>
               <toc1>
                 <xsl:apply-templates select="lesson"/>
               </toc1>
               <xsl:apply-templates select="lessons1"/>
            </social>
          </historical>
        </Geography>
     </xsl:template>

     <xsl:template match="lesson[starts-with(normalize-space(), 'chapter')]">
      <xsl:variable name="vNorm" select=
                     "translate(normalize-space(), '~', '')"/>
      <xsl:variable name="vAtNumber" select=
                     "substring-after($vNorm, 'chapter unit')"/>
      <xsl:variable name="vNum" select=
       "if(matches($vAtNumber, '^\s*\d+'))
          then replace($vAtNumber, '(^\s*(\d+)).*$', '$2')
          else '10'
       "/>
      <xsl:analyze-string select="."
       regex="(chapter\s+)(unit\s*)(((\d*~?)\s+)?page)">
        <xsl:matching-substring>
          <toc>
             <chapter>chapter</chapter>
             <unit>unit <xsl:value-of select="$vNum"/></unit>
             <pages>page</pages>
          </toc>
        </xsl:matching-substring>
      </xsl:analyze-string>
     </xsl:template>

     <xsl:template match="lesson">
       <sample>
         <original><xsl:value-of select="normalize-space()"/></original>
       </sample>
     </xsl:template>

     <xsl:template match="lessons1">
      <toc2>
       <xsl:apply-templates/>
      </toc2>
     </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<tutorial>
    <lessons>
       <lesson>
         chapter unit 1 page
    </lesson>
        <lesson>
            chapter unit 10~ page
        </lesson>
        <lesson>
            chapter unit page
        </lesson>
        <lesson>
            note lesson
        </lesson>
     <lessons1>
        <lesson>
            chapter unit 1 page
        </lesson>
        <lesson>
            description page
        </lesson>
        <lesson>
            chapter unit page
        </lesson>
    </lessons1>
    </lessons>
</tutorial> 
```

**产生想要的正确结果：**

```
<Geography>
   <historical>
      <social>
         <toc1>
            <toc>
               <chapter>chapter</chapter>
               <unit>unit 1</unit>
               <pages>page</pages>
            </toc>
            <toc>
               <chapter>chapter</chapter>
               <unit>unit 10</unit>
               <pages>page</pages>
            </toc>
            <toc>
               <chapter>chapter</chapter>
               <unit>unit 10</unit>
               <pages>page</pages>
            </toc>
            <sample>
               <original>note lesson</original>
            </sample>
         </toc1>
         <toc2>
            <toc>
               <chapter>chapter</chapter>
               <unit>unit 1</unit>
               <pages>page</pages>
            </toc>
            <sample>
               <original>description page</original>
            </sample>
            <toc>
               <chapter>chapter</chapter>
               <unit>unit 10</unit>
               <pages>page</pages>
            </toc>
         </toc2>
      </social>
   </historical>
</Geography> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:58:46.063

如果您只想删除“~”，请使用 translate(xxx, '~', '')

除此之外，恐怕你没有明确你的要求。例如，我不明白这个条款：

如果默认情况下没有值，则必须显示单位 10

# wso2 - WSO2 ESB 从属性设置肥皂信封

> ID：11499011
> 
> 赞同：1
> 
> 时间：2012-07-16T06:19:41.357
> 
> 标签：wso2, wso2esb

我必须从填充了 xml 内容的 OM 属性设置肥皂信封。我使用丰富的调解器通过以下代码执行此操作：

```
 <log>
  <property xmlns:ns="http://org.apache.synapse/xsd" name="envelope" expression="$ctx:mensaje" />
</log>
<enrich>
  <source xmlns:ns="http://org.apache.synapse/xsd" clone="false" type="property" property="mensaje" />
  <target action="replace" type="envelope" xpath="" property="" />
</enrich> 
```

日志指令显示正确的肥皂信封，但系统日志停止

```
08:12:26,997 [-] [HttpServerWorker-8] INFO Start : Enrich mediator 
```

我得到了这个肥皂故障：

```
<soapenv:Fault>
     <faultcode>soapenv:Server</faultcode>
     <faultstring>Index: 0, Size: 0</faultstring>
     <detail/>
</soapenv:Fault> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-16T07:53:28.133

您正在尝试从消息上下文中获取属性..在源配置中像这样使用..

获取属性（'mensaje'）

# c++ - 使用 c 函数时 C++ 中的命名空间

> ID：11499014
> 
> 赞同：5
> 
> 时间：2012-07-16T06:20:03.600
> 
> 标签：c++, c, namespaces

> **可能重复：**
> [未解决的重载函数类型 c++](https://stackoverflow.com/questions/7531866/unresolved-overloaded-function-type-c)

考虑下面的代码片段：

```
#include <algorithm>
#include <cctype>
#include <string>
using namespace std;
void test(){
    std::string str = "Hello World!";
    std::transform(str.begin(), str.end(), str.begin(), tolower);
} 
```

`tolower`使用 G++ 编译时出现错误：**未解析的重载函数**。

如果`using namespace std;`被删除，代码工作正常。

然后，我的问题是：

*   `namespace std`与C函数有什么关系？
*   `#include<ctype.h>`和 和有什么不一样`#include<cctype>`？尽管它们在上面的示例中都不起作用。
*   为什么`std::tolower`也不起作用？`std::tolower`和有什么区别`tolower`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T06:23:05.387

您可以使用命名空间运算符来使用 C 版本，`tolower`如下所示：

```
::tolower(); // nothing before '::' means look in the global namespaece. 
```

这将强制编译器查找不在特定命名空间内的函数，所有基于 C 的 API 都是这种情况。

至于为什么`std::tolower`不起作用，我不知道。[cpp 参考的例子](http://www.cplusplus.com/reference/std/locale/tolower/)没有使用`std::transform`，这可能是原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T08:07:21.693

`namespace std`和 C 函数之间没有关系。但是您的代码不是 C，而是 C++，因此您还必须考虑 C++ 函数。例如`std::tolower`，在 中`<locale>`。你的问题是由于事情的一致：

*   您包含的标题之一包括`<locale>`. C++ 头文件允许包含其他 C++ 头文件，并且哪个头文件包含哪个其他头文件可能因一种实现而异，因此您编写的代码可能使用一种编译器编译，而不是另一种编译器。

*   您试图将函数作为指向函数参数的指针传递给参数是模板类型参数的函数模板。简单来说，这里为了做重载解析 `tolower`，编译器必须将其与参数的类型相匹配，而为了知道参数的类型，编译器必须根据函数的确切类型进行模板类型推导，它只有在完成重载解析后才能知道。

如果你想要这个函数`<ctype.h>`（你不想要，因为它会导致未定义的行为），你可以通过 include `<ctype.h>`（保证它存在于全局命名空间中）和 using`::tolower`或通过显式指定重载来获得它你想要，例如`static_cast<int (*)(int)>( tolower )` （在这种特殊情况下，`static_cast`并不意味着类型转换，而是显式重载决议。）

在实践中，当然，你不会做这种事情。如果您要进行任何文本处理，您会将所有必要的函数定义为函数对象类型，通过将输入转换为`unsigned char`：

```
struct ToLower
{
    char operator()( char ch ) const
    {
        return ::tolower( static_cast<unsigned char>( ch ) );
    }
}; 
```

或通过使用`<locale>`do*使用*的函数`char`：

```
class ToLower
{
    std::locale myLocale;   //  necessary to guarantee the lifetime of the facet.
    std::ctype const* myCType;
public:
    ToLower( std::locale const& loc = std::locale() )
        ; myLocal( loc )
        , myCType( &std::use_facet<std::ctype>( loc ) )
    {
    }

    bool operator()( char ch ) const
    {
        return myCType->tolower( ch );
    }
}; 
```

最后，写下您的第二个问题：差异取决于您使用的 C++ 版本和编译器。然而，全局：`<ctype.h>` 将函数引入全局命名空间；`<cctype>`会将它们引入命名空间`std::`，并且可能（或可能不）引入全局命名空间。（并且您的第三个问题已经在上面得到了回答：`std::tolower`指的是在`<locale>`和中定义的一组重载函数`<cctype>`；`::tolower`指的是在中定义的单个函数`<ctype.h>`，并且只是`tolower`等价于 `::tolower`，*除非*您已经完成`using namespace std`，在这种情况下，它将指到上面提到的所有函数的重载集。

# asp.net-web-api - 在 ASP.NET Web API 中使用 AuthorizeAttribute

> ID：11499017
> 
> 赞同：3
> 
> 时间：2012-07-16T06:20:13.763
> 
> 标签：asp.net-web-api

我在 ASP.NET Web API 方法中使用了 [Authorize] 属性

```
[Authorize]
public IEnumerable<User> GetAllUsers() 
```

从应用程序中，我可以毫无问题地访问此方法，因为我的用户已经过身份验证。但是，有什么方法可以在调用时指定此方法的用户名和密码，以便实现 REST API？这是从独立应用程序或浏览器调用时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:57:02.650

我不完全理解您的问题，但会`System.Web.Http.AuthorizeAttribute`检查`Thread.CurrentPrincipal`用户是否被授权。

如果需要，您可以专门授予用户权限，如下所示：

```
[Authorize(Users = "User1")]
public IEnumerable<User> GetAllUsers() 
```

但是身份验证过程完全取决于您。我建议通过消息处理程序对用户进行身份验证，然后在`Thread.CurrentPrincipal`那里填充。然后，使用`AuthorizeAttribute`您认为适合您的应用程序的 。

# python - Python重复CSV文件

> ID：11499020
> 
> 赞同：0
> 
> 时间：2012-07-16T06:20:22.157
> 
> 标签：python, list, loops, if-statement

我正在尝试从 CSV 文件加载数字数据，以便分别循环遍历每个股票（文件）的计算数据，并确定计算值是否大于特定数字（在本例中为 731）。但是，我使用的方法似乎使 Python 重复列表以及在数字（'500'）周围添加引号，例如，使它们成为字符串。不幸的是，我认为最终的“if”语句无法处理这个问题，因此它似乎无法正常运行。我不确定发生了什么以及为什么 Python 需要做什么才能让这段代码正常运行。

```
 import csv
    stocks = ['JPM','PG','GOOG','KO']
    for stock in stocks:
        Data = open("%sMin.csv" % (stock), 'r')
        stockdata = []
        for row in Data:
           stockdata.extend(map(float, row.strip().split(',')))
           stockdata.append(row.strip().split(',')[0])
        if any(x > 731 for x in stockdata):
            print "%s Minimum" % (stock) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:55:09.510

目前您正在将每行的所有列添加到列表中，然后再次添加到该行的第一列的末尾？那么所有列都是重要的，还是只是第一列？

您还在比较之前从文件中加载所有数据，但似乎没有在任何地方使用它，所以我想您可以更早地使用快捷方式......

如果我理解正确，您的代码应该是这样的（或修改为仅比较第一列）。

你基本上是在写这个吗？

```
import csv

STOCKS = ['JPM', 'PG', 'GOOG', 'KO']

for stock in STOCKS:
    with open('{}Min.csv'.format(stock)) as csvin:
        for row in csv.reader(csvin):
            if any(col > 731 for col in map(float, row)):
                print '{} minimum'.format(stock)
                break 
```

# html - 使不可见的文本可选

> ID：11499024
> 
> 赞同：2
> 
> 时间：2012-07-16T06:20:41.797
> 
> 标签：html, css, hidden, html-select

我正在制作一个支持折线的源代码显示。虽然使用 CSS 很容易确保替换文本（“N 行隐藏”）不可选，但我希望隐藏的源代码仍然被选中，因此用户只需选择一段代码而不必担心是否由于折叠，它的一部分丢失了。有没有（不太老套）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-26T12:27:48.960

`opacity: 0`可以选择带有的元素，尽管它们是不可见的。

```
.hidden-selectable {
    display: inline-block;
    width: 1px;
    opacity: 0;
}

<div>Visible<span class='hidden-selectable'>selectable</span></div> 
```

In the above snippet, the 'selectable' string will be present in the selection and the copy-pasted text when the elements around it are selected.

元素需要具有非零的宽度和高度，否则它不会出现在选择中。此外，它必须在元素流内部（即它不能有`position: absolute`），否则，它也不会出现在选择中。因此我给它一些非常小但非零的宽度，这样它就不会明显影响流动，但仍然“足够可见”可以选择。

这是[小提琴](https://jsfiddle.net/d7bnnu9x/2/)。

这是我尝试过的其他不起作用的方法：

*   `display: none`
*   `visibility: hidden`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T11:29:37.497

如果你有以下结构：

```
<html>
  <body>
    <div>before</div>
    <div class="folded">this is the hidden source code</div>
    <div class="info">N lines hidden</div>
    <div>after</div>
  </body>
</html> 
```

你应该对这个 CSS 很好：

```
.folded {
  overflow: hidden;
  height: 0px;
}

.info {
  -moz-user-select: none;
  //add other browsers' variation
} 
```

**编辑：另一个选项（在 Chrome 中未经测试）**

HTML：

```
<html>
  <body>
    <div>before</div>
    <div class="folded">this is the hidden source code</div>
    <div class="info" data-lines='5'> </div>
    <div>after</div>
  </body>
</html> 
```

CSS：

```
.folded {
  overflow: hidden;
  height: 0px;
}

.info:before {
  content: attr(data-lines) " lines hidden."
} 
```

# objective-c - Objective-C，从文本文件中获取字符串？

> ID：11499027
> 
> 赞同：0
> 
> 时间：2012-07-16T06:21:42.377
> 
> 标签：objective-c, nsstring, nsrange

我知道有几种不同的方法可以在文件中查找文本，尽管我还没有找到在我正在搜索的字符串之后返回文本的方法。例如，如果我要在 file.txt 中搜索该术语`foo`并想返回`bar`，我将如何在不知道它`bar`或长度的情况下执行此操作？

这是我正在使用的代码：

```
if (!fileContentsString) {
    NSLog(@"Error reading file");
}

// Create the string to search for
NSString *search = @"foo";

// Search the file contents for the given string, put the results into an NSRange structure
NSRange result = [fileContentsString rangeOfString:search];

// -rangeOfString returns the location of the string NSRange.location or NSNotFound.
if (result.location == NSNotFound) {
    // foo not found. Bail.
    NSLog(@"foo not found in file");
    return;
}
// Continue processing
NSLog(@"foo found in file");    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:31:12.063

您可能想要使用[RegexKitLite](http://regexkit.sourceforge.net/)并执行正则表达式查找：

```
NSArray * captures = [myFileString componentsMatchedByRegex:@"foo\\s+(\\w+)"];
NSString * wordAfterFoo = captures[1]; 
```

虽然没有测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:47:46.333

你可以使用[[NSString substringFromIndex:]](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/occ/instm/NSString/substringFromIndex%3a)

```
if (result.location == NSNotFound) 
{
    // foo not found. Bail.
    NSLog(@"foo not found in file");
    return;
}    
else    
{
    int startingPosition = result.location + result.length;
    NSString* foo = [fileContentsString substringFromIndex:startingPosition]        
    NSLog(@"found foo = %@",foo);  
} 
```

# sql-server - 在 T-SQL 代码中使用 xml-rpc

> ID：11499032
> 
> 赞同：2
> 
> 时间：2012-07-16T06:22:42.477
> 
> 标签：sql-server, xml, sql-server-2008, tsql, xml-rpc

目前我对 REST（通过 clr/assembly）和 SOAP（通过基于 sp_OA 的存储过程）有很好的解决方案，但 XML-RPC 仍然是直接从 SQL Server T-SQL 代码访问的问题。

请告知为此目的存在哪些变体。

我需要避开应用层，因为所有逻辑都已经在数据库内的存储过程中，只需要提供记录集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T03:29:31.720

我使用 xmlhttp COM 对象从 t-sql 中的 HTTP 调用中使用了 XML，它看起来像：

```
Declare @Object as Int;

Declare @ResponseText as Varchar(8000);

Exec sp_OACreate 'MSXML2.XMLHTTP', @Object OUT;
Exec sp_OAMethod @Object, 'open', 
NULL, 'get',
'http://www.webservicex.com  /stockquote.asmx?symbol=MSFT',                                                                'false'

Exec sp_OAMethod @Object, 'send'
Exec sp_OAMethod @Object, 'responseText', @ResponseText OUTPUT

Select @ResponseText

Exec sp_OADestroy @Object 
```

然后可以通过传统的 tsql 方法粉碎 @ResponseText 中的 xml。

这不是一个特别健壮的方法。使用 SSIS 包或 CLR 集成很可能会产生更好的解决方案，但这是将其全部保存在 t-sql 中的一种方法。

请参阅： [http ://social.msdn.microsoft.com/forums/en-US/transactsql/thread/eac9c027-db71-48ae-872d-381359d7fb51/](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/eac9c027-db71-48ae-872d-381359d7fb51/)

# python - 如何计算数百万个节点的个性化 PageRank？

> ID：11499033
> 
> 赞同：1
> 
> 时间：2012-07-16T06:23:02.303
> 
> 标签：python, numpy, scipy, pagerank

我有一个包含大约一百万个节点和一千万条边的稀疏图。我想计算每个节点的*个性*化 PageRank，其中节点 n 的个性化 PageRank 是指：

```
# x_0 is a column vector of all zeros, except a 1 in the position corresponding to node n
# adjacency_matrix is a matrix with a 1 in position (i, j) if there is an edge from node i to node j

x_1 = 0.5 * x_0 + 0.5 * adjacency_matrix * x_0
x_2 = 0.5 * x_0 + 0.5 * adjacency_matrix * x_1
x_3 = 0.5 * x_0 + 0.5 * adjacency_matrix * x_2

# x_3 now holds the personalized PageRank scores

# i'm basically approximating the personalized PageRank by running this for only 3 iterations 
```

我尝试使用 NumPy 对其进行编码，但运行时间太长。（约1秒计算每个节点的个性化PageRank）

我还尝试将 x_0 更改为矩阵（通过组合几个不同节点的列向量），但这也没有太大帮助，实际上使计算时间更长。（可能是因为矩阵很快变得密集，所以它不再适合 RAM？我不确定）

是否有另一种建议的方法来计算这个，最好是在 Python 中？我还考虑过使用非矩阵方法进行 PageRank 计算，通过模拟随机游走进行 3 次迭代（即，我以 1 的分数开始每个节点，然后将该分数传播给它的邻居，等等），但我不确定这是否会更快。会是吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:28:40.107

我会认为“PageRank”算法最好被视为有向图[http://en.wikipedia.org/wiki/Directed_graph](http://en.wikipedia.org/wiki/Directed_graph)（可能具有适当的权重）。

我喜欢[http://networkx.lanl.org](http://networkx.lanl.org)`networkx`上的图书馆

您会发现它在您可以适应的算法下也有一个“PageRank”示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T21:05:35.093

在您的情况下，如果您的数据以正确的方式存储，使用模拟随机游走迭代方法应该可以正常工作。当与节点数量（如您的情况）相比，边缘很少时，我认为矩阵方法不是一个好的选择，因为它是一个非常稀疏的矩阵，但实际上这种方法意味着您正在检查对于任何 i 和 j，存在从 i 到 j 的节点。（顺便说一句，我不确定这些乘以零需要多少运行时间。）

如果您的数据存储方式对于每个节点对象，您都有其传出链接的目的地列表，那么随机游走模拟方法将相当快。忽略阻尼因子，这是您在随机游走模拟的每次迭代中实际执行的操作：

```
for node in nodes:
    for destination in node.destinations:
        destination.pageRank += node.pageRank/len(destinations) 
```

每次迭代的时间复杂度为 O(n*k)，在您的情况下，n=1m 和 k=10。这听起来不错，如果我在这里没有遗漏任何东西的话。

# java - 关于 JFreeChart 中的 Y 轴

> ID：11499040
> 
> 赞同：0
> 
> 时间：2012-07-16T06:23:37.393
> 
> 标签：java, jfreechart

![在此处输入图像描述](../Images/b6b04e3f3db9b103ab650f4eaa56fa6d.png)

左边三行数据：Y轴上的0.9,2450,0.4867按比例显示。右边三行（另外两个数据太小显示不出来），左边怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:04:12.407

我看到了几种选择：

*   调整您的数据以显示相对变化，如左侧图表中所做的那样。

*   添加第二个轴以显示更大的动态范围，如[`DualAxisDemo2`](http://www.jfree.org/jfreechart/samples.html).

*   启用放大功能，如本[例](https://stackoverflow.com/a/5522583/230513)`ChartPanel`中所建议的那样。

# asp.net-mvc - 如何在 Asp.Net MVC2 的 Web.config 文件中设置数据库连接字符串

> ID：11499042
> 
> 赞同：0
> 
> 时间：2012-07-16T06:23:42.387
> 
> 标签：asp.net-mvc

> 配置错误

说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。

解析器错误消息：每个配置文件中的部分只能出现一次。有关例外情况，请参阅帮助主题。

```
 <connectionStrings>
<add name="testEntities" connectionString="metadata=res://*/Models.Model1.csdl|res://*/Models.Model1.ssdl|res://*/Models.Model1.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=ROCKER\SQLSERVER2008;Initial Catalog=test;User ID=sunny;Password=sunnyconnected;MultipleActiveResultSets=True&quot;"
 providerName="System.Data.EntityClient" />
<add name="DbConnection" connectionString="Data Source=Test\sqlserver2008;database=test;User ID=sunny;Password=sunnyconnected" providerName="System.Data.SqlClient"/> 
```

> 这个连接字符串设置在根 Web.config 文件中，然后它给出运行时上面提到的错误。如何在 Asp.Net MVC2 中处理和设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:37:16.603

“ **connectionStrings** ”部分在配置文件中应该只出现一次。检查您是否添加了两次。

# android - Magento API 的创建发票方法无法正常工作

> ID：11499043
> 
> 赞同：3
> 
> 时间：2012-07-16T06:23:45.033
> 
> 标签：android, api, magento, xml-rpc, invoice

我正在尝试使用 XMLRPC 在 android 应用程序中使用 Magento API 创建销售订单发票。我正在使用方法“ **sales_order_invoice.create** ”来创建发票。此方法在给定数量的响应中为我提供发票 ID，如[magento wiki](http://www.magentocommerce.com/api/soap/sales/salesOrderInvoice/sales_order_invoice.create.html)中所述。但问题是发票数量没有在magento商店更新。其他事情是订单状态正在更改为正确的处理中，并且创建的发票的条目也出现在商店的发票列表中，但它显示已支付的金额为**$0.0**这是不正确的。

我不知道在调用**sales_order_invoice.create**之前是否需要调用另一个方法或者该方法有什么问题？？
下面是我调用方法的部分代码：

```
import java.util.HashMap;
import org.xmlrpc.android.XMLRPCClient;
import org.xmlrpc.android.XMLRPCException;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class MagentoStore extends Activity {

private XMLRPCClient client;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
            String sessionId = "";

client = new XMLRPCClient("http://www.mystore.com/index.php/api/xmlrpc");
        try {

            sessionId = (String)client.call("login", "tester", "tester");
            Log.d("MY_XMLRPC_SUCCESS_SESSION_ID", sessionId);
            }
         catch (XMLRPCException e) {

            Log.d("MY_XMLRPCException_MSG", e.getMessage());
        }

        Object salesorderInfo = null;
        Object[] methodParams = new Object[]{"100000028"};
        Object[] callParams = new Object[]{sessionId,"sales_order.info", methodParams};
        String salesorderinvoice= null;
        try {
             salesorderInfo = (Object)client.callEx("call",callParams);
             HashMap map = (HashMap)salesorderInfo;
             Object[]items=(Object[])map.get("items");
             for(Object item :items)
             {
                 HashMap itemlist=(HashMap)item;
                 String item_id=(String)itemlist.get("item_id");
                 int itemids=Integer.parseInt(item_id);
                 String base_price=(String)itemlist.get("base_price");
                 if(base_price.equals("0.0000"))
                 {
                  continue;  
                 }   
                 String name=(String)itemlist.get("name");
                 Double qty=1.0;
                 String qty_ordered =(String)itemlist.get("qty_ordered");
                 String qty_invoiced=(String)itemlist.get("qty_invoiced");
                 Object[] methodParams1 = new Object[]{"100000028",itemids,qty};
                 Object[] callParams1 = new Object[]{sessionId,"sales_order_invoice.create", methodParams1};
                 salesorderinvoice= (String)client.callEx("call",callParams1);

             } 
            } catch (Exception e) {
            Log.d("APP_INFO", "Exception: " + e.getMessage());
            }               
    }
} 
```

任何人有任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:47:01.583

供参考

当您调用 API sales_order_invoice.create 时，您必须分配数组指针名称。

```
String qty_ordered =(String)itemlist.get("qty_ordered");
                 String qty_invoiced=(String)itemlist.get("qty_invoiced");
                 Object[] methodParams1 = new Object[]{"100000028",itemids,qty}; 
```

尝试使用 var_dump methodParams1

```
methodParams1.toString(); 
```

它必须与

```
array(
      'orderIncrementId' => '200000008', 
      array(
            'order_item_id' => '11', 
            'qty' => '1'
      )
); 
```

因为这是将参数放入**sales_order_invoice.create的方式**

```
$result = $client->call(
    $session,
    'sales_order_invoice.create',
    array('orderIncrementId' => '200000008', array('order_item_id' => '11', 'qty' => '1'))
); 
```

# android - 如何解释 Android Native 代码中的 JNI 错误？这个错误是什么意思？

> ID：11499044
> 
> 赞同：0
> 
> 时间：2012-07-16T06:23:48.153
> 
> 标签：android, memory, memory-leaks, android-ndk, java-native-interface

我的 Android APP 在 JNI 代码中崩溃，并且 LogCat 显示以下输出，此失败的可能原因是什么？如何在 JNI 中管理本机内存？

```
07-16 11:51:19.500: W/dalvikvm(15869): threadid=4: spin on suspend #1 threadid=3 (pcf=0)
07-16 11:51:20.242: W/dalvikvm(15869): threadid=4: spin on suspend #2 threadid=3 (pcf=0)
07-16 11:51:20.242: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:20.242: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:20.242: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:20.242: I/dalvikvm(15869):   | schedstat=( 1251222 701905 25 )
07-16 11:51:20.242: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:20.242: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:20.242: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:20.242: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:20.242: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:20.281: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:21.054: W/dalvikvm(15869): threadid=4: spin on suspend #3 threadid=3 (pcf=0)
07-16 11:51:21.054: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:21.054: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:21.054: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:21.054: I/dalvikvm(15869):   | schedstat=( 2502444 65551756 35 )
07-16 11:51:21.054: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:21.054: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:21.054: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:21.054: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:21.054: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:21.117: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:21.914: W/dalvikvm(15869): threadid=4: spin on suspend #4 threadid=3 (pcf=0)
07-16 11:51:21.914: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:21.914: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:21.914: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:21.914: I/dalvikvm(15869):   | schedstat=( 3479006 203796386 45 )
07-16 11:51:21.914: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:21.914: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:21.914: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:21.914: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:21.914: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:22.015: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:22.796: W/dalvikvm(15869): threadid=4: spin on suspend #5 threadid=3 (pcf=0)
07-16 11:51:22.796: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:22.796: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:22.796: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:22.804: I/dalvikvm(15869):   | schedstat=( 4821778 368194582 56 )
07-16 11:51:22.804: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:22.804: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:22.804: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:22.804: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:22.804: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:22.867: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:23.617: W/dalvikvm(15869): threadid=4: spin on suspend #6 threadid=3 (pcf=0)
07-16 11:51:23.617: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:23.617: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:23.617: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:23.617: I/dalvikvm(15869):   | schedstat=( 5706788 437561037 64 )
07-16 11:51:23.617: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:23.617: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:23.617: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:23.617: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:23.617: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:23.695: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:24.445: W/dalvikvm(15869): threadid=4: spin on suspend #7 threadid=3 (pcf=0)
07-16 11:51:24.445: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:24.445: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:24.445: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:24.445: I/dalvikvm(15869):   | schedstat=( 6744387 515899659 74 )
07-16 11:51:24.445: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:24.445: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:24.445: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:24.445: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:24.445: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:24.445: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:25.195: W/dalvikvm(15869): threadid=4: spin on suspend #8 threadid=3 (pcf=0)
07-16 11:51:25.195: I/dalvikvm(15869): "Signal Catcher" daemon prio=5 tid=4 RUNNABLE
07-16 11:51:25.195: I/dalvikvm(15869):   | group="system" sCount=0 dsCount=0 obj=0x405115e8 self=0x159898
07-16 11:51:25.195: I/dalvikvm(15869):   | sysTid=15873 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1575600
07-16 11:51:25.195: I/dalvikvm(15869):   | schedstat=( 7751467 517486574 82 )
07-16 11:51:25.195: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method)
07-16 11:51:25.195: I/dalvikvm(15869): "GC" daemon prio=5 tid=3 RUNNABLE
07-16 11:51:25.195: I/dalvikvm(15869):   | group="system" sCount=1 dsCount=0 obj=0x40511540 self=0x159d70
07-16 11:51:25.195: I/dalvikvm(15869):   | sysTid=15872 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1422192
07-16 11:51:25.195: I/dalvikvm(15869):   | schedstat=( 149871827 1162109373 98 )
07-16 11:51:25.203: I/dalvikvm(15869):   at dalvik.system.NativeStart.run(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:06:00.333

类似的问题在这里..请看[这里](http://www.basic4ppc.com/forum/basic4android-updates-questions/17859-market-error-report.html)..可能会在某个地方帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:31:19.747

从一开始就很清楚问题出在 JNI 中，我交叉检查了本机代码，发现我在 JNI 中`memset()`使用`memcpy()`了**错误**的字节数。我更正了代码，问题就解决了。

对于其他面临相同问题的人，**“请检查本机代码中的内存使用情况。”**

# javascript - 如何更改外部样式表的css规则

> ID：11499048
> 
> 赞同：9
> 
> 时间：2012-07-16T06:24:12.990
> 
> 标签：javascript, html, css

> **可能重复：**
> [如何在运行时更改/删除 CSS 类定义？](https://stackoverflow.com/questions/730048/how-to-change-remove-css-classes-definitions-at-runtime)

我有一个使用外部 css 文件的 HTML 页面。我想在运行时使用 javascript 更改外部文件的 css 规则。

我的HTML.html

```
<html>
  <head>
    <link rel="stylesheet" href="myCSS.css" type="text/css">
    <script type="text/ecmascript" src="myJS.js" />
  </head>
  <body>
    <p> change css style color for this element using javascript </p>
  </body>
</html> 
```

我的CSS.css

```
.p{ color:blue} 
```

myJS.js

```
var ss = document.styleSheets[0]
var firstRule = ss.rules[0] // null 
```

我要执行操作：

```
firstRule.style.color = "red" ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:05:58.737

您可以使用内部 css 覆盖外部 css 属性。它也可以通过三种不同的方式实现：

1）在页面本身中声明您的css属性，例如根据您的代码包括“样式”标签并在其间写入属性

```
< html>

 < head>
   < link rel="stylesheet" href="myCSS.css" type="text/css">
   < script type="text/ecmascript" src="myJS.js" />
   <style type="text/css">
   ........................
   .........................
   </style>
< /head>
< p > change css style color for this element using javascript   
< /p>

< /html> 
```

2）使用内联CSS

```
< p style="font-color:red;"> change css style color for this element using javascript   
< /p> 
```

3）使用javascript：这只是另一种方式，或者你可以说间接方式来实现内部css实现。请参阅@Misam 给出的第一个答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:28:53.010

您可以通过以下方式实现

```
var div = document.getElementById("newDiv");
div.style.position = "absolute"; 
div.style.top = "200px"; 
div.style.left = "200px"; 
```

同样你可以编辑/添加更多的CSS属性看看这是否有助于改变CSS规则：[改变CSS规则](http://www.javascriptkit.com/dhtmltutors/externalcss3.shtml)

# spring-mvc - 如何配置 MultipartResolver？

> ID：11499051
> 
> 赞同：2
> 
> 时间：2012-07-16T06:24:43.153
> 
> 标签：spring-mvc

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:beans="http://www.springframework.org/schema/beans"
xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources/ directory -->
<resources mapping="/resources/**" location="/resources/" />
 <bean class="org.springframework.web.multipart.commons.CommonsMultipartResolver" 
    id="multipartResolver"> <property name="maxUploadSize" value="500000" /> 
</bean> 
```

有我的 context.xml 文件，但是当我包含 multipartResolver 配置时，我收到以下错误：

```
"cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element 'bean'.". 
```

请帮助我，我是春天的新手。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T06:45:49.877

我认为你应该加上前缀`bean`和：`property``beans`

```
...
<beans:bean class="org.springframework.web.multipart.commons.CommonsMultipartResolver" id="multipartResolver"> 
    <beans:property name="maxUploadSize" value="500000" /> 
</beans:bean>
... 
```

并记住使用结束标记关闭 XML：

```
...
</beans:beans> 
```

# web-services - 使用 Nagios 监控 AJAX 繁重的 Web 应用程序

> ID：11499057
> 
> 赞同：1
> 
> 时间：2012-07-16T06:25:47.890
> 
> 标签：web-services, monitoring, nagios

我们有一个跨服务器托管在云中的（AJAX 重度）Web 应用程序，我们需要监控该服务的可用性。需要使用用户名密码登录应用程序，以该用户身份执行一些搜索等。

由于我们计划将 Nagios 用于其他一些监控任务，因此我们决定也将 Nagios 用于 Web 应用程序监控。

我遇到了三个这样的解决方案：

1.  Webinject：我不想用这个。项目未在积极开发中。它最后一次发布是在 2006 年 1 月。我看不到任何可用的支持/帮助。另外我怀疑它在 Ajax 中的表现如何。

2.  Cucumber-Nagios：我试过用这个。它涉及许多 Ruby 组件，并且发现您必须对 Ruby 平台有深入的了解才能使所有这些组件协同工作。我不是一个 Ruby 人，很难让所有这些组件一起工作。此外，即使这个项目也没有处于积极开发阶段，我也没有看到可用的支持/帮助选项。我在 4 天前发布了一个错误，但还没有看到任何回复。

3.  Nagios 的 Selenium 插件：还没试过。现在会试试。

还有更多可用的解决方案吗？

此外，由于我没有看到任何积极开发的使用 Nagios 监控 Web 应用程序的良好解决方案，我怀疑使用 Nagios 是否真的是一个好方法？如果没有，我有什么选择？简而言之，监控 Web 应用程序可用性的最佳方法是什么？

**编辑 1：**我们买不起 Nagios XI 付费版本，更喜欢开源解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:56:33.847

> 如果没有，我有什么选择？

尽管 Nagios 是我们考虑过的选项之一，但我们还是选择了[OpenNMS](http://www.opennms.org)来进行监控。我们决定的理由是 OpenNMS 是高度可靠且可配置的免费开源工具，此外，我们的大多数应用程序都是基于 Java 的；OpenNMS 提供与 JMX 的集成。但是，请记住，如果您要求对您的网站进行非常复杂的测试，最好还是去别处看看。OpenNMS 可以设置为检查 HTTP 状态代码等，但如果您正在寻找复杂的场景，请查看：

*   [Apache JMeter](http://jmeter.apache.org/)（我们主要在测试阶段使用它）
*   [硒](http://seleniumhq.org/)（即​​使在生产阶段也可以很好地使用）

# html - 在容器外展开文本

> ID：11499062
> 
> 赞同：0
> 
> 时间：2012-07-16T06:26:37.363
> 
> 标签：html, css

我试图弄清楚如何将我的文本扩展到其容器之外。期望的效果是使文本扩展得比其容器大。前任。//![文本在其容器之外展开](../Images/56e8d5942e8477892b783987189e1390.png)

我不知道如何开始。我是 HTML 和 CSS 的新手，可以使用一些帮助 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:33:54.213

您应该对包含以下文本的框应用固定大小：EXAMPLE。

之后，您应该将文本放在中间并调整字母大小，使其大于框的空间并应用`overflow: hidden`

它应该是这样的：

```
.box{
 width: 50px;
 height: 10px;
 overflow: hidden;
 margin: auto;
 background-color: gray;
}

.text{
 color: red;
 font-size: 14px;
 text-align:center
 vertical-align:middle;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:36:08.240

这是一种方法：

```
<div class="container"><span>EXAMPLE</span></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

​.container {
    background: #ddd;
    font-size: 30px;
    width: 130px;
    height: 15px;
    overflow: hidden;
}
.container span {
    position: relative;
    top: -10px;
    left: -7px;
} 
```

[http://jsfiddle.net/ZnxrT/](http://jsfiddle.net/ZnxrT/)

注意：顶部/左侧偏移量是任意单位。您需要调整它们以满足您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T06:38:41.030

这是一个工作示例 [http://jsfiddle.net/8CaQx/](http://jsfiddle.net/8CaQx/)

```
<div id="outer"><div id="inner">TEXT</div></div>​

#outer {
    height: 36px;
    width: 140px;
    overflow: hidden;
    background-color: black;
}

#inner {
    position: relative;
    top: -18px;
    left: -10px;
    font-size: 60px;
    text-align: center;
    vertical-align: middle;
    font-family: arial, sans serif;
    font-weight: 900;
    color: red;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:37:57.537

您可能正在寻找 CSS 溢出属性。

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

请参阅此小提琴以获取重新创建上述示例的代码：http: [//jsfiddle.net/E5atK/](http://jsfiddle.net/E5atK/)

# php - PHP中按值按desc顺序对数组进行排序

> ID：11499065
> 
> 赞同：0
> 
> 时间：2012-07-16T06:26:47.350
> 
> 标签：php, sorting

是否有按 desc 顺序按值（而不是按键）排序数组的函数？以下是要排序的数组。

```
array(
0 => 3223,
1 => 675,
2 => 56,
3 => 66899,
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:28:23.797

`asort()`并且`arsort()`会这样做。

[http://www.php.net/manual/en/function.asort.php](http://www.php.net/manual/en/function.asort.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:29:54.483

请试试这个

```
<?php
$fruits = array("lemon", "orange", "banana", "apple");
rsort($fruits);
foreach ($fruits as $key => $val) {
    echo "$key = $val\n";
}
?> 
```

我希望它会帮助你

另请参阅[http://php.net/manual/en/function.rsort.php](http://php.net/manual/en/function.rsort.php)

# macos - 在特定情况下显示或不显示关闭窗口的警报

> ID：11499068
> 
> 赞同：2
> 
> 时间：2012-07-16T06:27:24.470
> 
> 标签：macos, cocoa, webview, nstextfield

我在窗口中使用了一些文本字段和 Web 视图。我想要的是，如果用户在任何文本字段或 webView 中进行了任何更改，那么在关闭窗口时它应该显示一个警报以保存所做的更改（这已经完成）......

但我想要做的是，如果用户没有在任何字段或 web 视图中进行任何更改，那么在关闭窗口时，它应该关闭而不显示任何警报。请让我知道如何做到这一点。

如果不清楚，请告诉我，以便我提供更多解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:05:45.313

如果您使用的是`NSDocument`基于应用程序，您可以使用它。

```
- (BOOL)isDocumentEdited 
```

Return`YES`如果要保存更改，否则`NO`。

这是[NSDocument的类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsdocument_Class/Reference/Reference.html)

# php - PHP - 简单的数组/字符串操作

> ID：11499069
> 
> 赞同：1
> 
> 时间：2012-07-16T06:27:32.693
> 
> 标签：php, arrays, string

我有一个数组，其中包含一组链接作为字符串，例如

```
[1]==> "<a href = 'this.html'> This </a>"
[2]==> "<a href = 'that.html'> That </a>"
[3]==> "<a href = 'other.html'> Other </a>" 
```

仅回显以逗号分隔的文本的最简单方法是什么？例如，它显示：

```
This, That, Other 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:31:10.573

您将需要使用两个函数，`implode`并且`strip_tags`.

```
$data = array (
  "<a href='this.html'>This</a>",
  "<a href='this.html'>That</a>",
  "<a href='this.html'>Other</a>"
);

echo strip_tags (implode (", ", $data)); 
```

```
This, That, Other 
```

* * *

**文档链接**

*   **[内爆](http://php.net/manual/en/function.implode.php)**

    此函数会将作为第二个参数传递的数组元素与指定为第一个参数的“胶水”粘合在一起。`implode (":", array (1,2,3))`将导致*“1:2:3* ”

*   **[strip_tags](http://php.net/manual/en/function.strip-tags.php)**

    此函数将删除作为第一个参数传递的字符串中的 xml 元素（标签）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T06:31:00.160

```
implode(",",array_map('strip_tags',$yourarray)); 
```

试试这个

# java - 注销时浏览器缓存不活动

> ID：11499070
> 
> 赞同：0
> 
> 时间：2012-07-16T06:27:35.370
> 
> 标签：java, jsp

注销时如何禁用浏览器缓存。我用了：

```
<meta http-equiv="cache-control" content="no-cache"> <!-- tells browser not to cache -->
<meta http-equiv="expires" content="0"> <!-- says that the cache expires 'now' -->
<meta http-equiv="pragma" content="no-cache"> <!-- says not to use cached stuff, if there is any --> 
```

但是当我单击注销时，我仍然得到上一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:01:14.663

这应该适用于大多数浏览器，但为了防止 Firefox 缓存，您需要额外的两个标头`Cache-Control=no-store`和`Cache-Control=must-revalidate`. 因此尝试：

```
<meta http-equiv="expires" content="0">
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="cache-control" content="no-cache">
<meta http-equiv="cache-control" content="no-store">
<meta http-equiv="cache-control" content="must-revalidate"> 
```

看看[我怎样才能防止 Firefox 缓存](https://stackoverflow.com/questions/6467451/how-can-i-prevent-firefox-caching)。

# android - Android Canvas 随机停止在屏幕上绘图

> ID：11499072
> 
> 赞同：1
> 
> 时间：2012-07-16T06:27:45.997
> 
> 标签：android, surfaceview, android-canvas, ondraw

如果我们继续重新启动应用程序，我遇到了一个问题，即画布会随机停止在屏幕上绘制。

我已经通过记录器检查了该方法`onDraw()`正在被调用。但我在设备上的手指痕迹不可见。

任何帮助和建议表示赞赏。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:02:03.140

您可以在屏幕线或更多绘图中尝试此代码......

包 com.kk.demo；

```
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Matrix;
import android.graphics.Paint;
import android.graphics.PointF;
import android.os.Bundle;
import android.util.FloatMath;
import android.util.Log;
import android.view.Display;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class ZoomDemoActivity extends Activity implements OnTouchListener {
     ImageView imageView;
      Bitmap bitmap;
      Canvas canvas;
      Paint paint;

      float downx = 0,downy = 0,upx = 0,upy = 0;

      @Override
      public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        imageView = (ImageView) this.findViewById(R.id.imageView1);
        Display currentDisplay = getWindowManager().getDefaultDisplay();
        float dw = currentDisplay.getWidth();
        float dh = currentDisplay.getHeight();

        bitmap = Bitmap.createBitmap((int) dw, (int) dh,
            Bitmap.Config.ARGB_8888);
        canvas = new Canvas(bitmap);
        paint = new Paint();
        paint.setColor(Color.GREEN);
        imageView.setImageBitmap(bitmap);
        imageView.setOnTouchListener(this);
      }

      public boolean onTouch(View v, MotionEvent event) {
        int action = event.getAction();
        switch (action) {
        case MotionEvent.ACTION_DOWN:
          downx = event.getX();
          downy = event.getY();
          break;
        case MotionEvent.ACTION_MOVE:
          upx = event.getX();
          upy = event.getY();
          canvas.drawLine(downx, downy, upx, upy, paint);
          imageView.invalidate();
          downx = upx;
          downy = upy;
          break;
        case MotionEvent.ACTION_UP:
          upx = event.getX();
          upy = event.getY();
          canvas.drawLine(downx, downy, upx, upy, paint);
          imageView.invalidate();
          break;
        case MotionEvent.ACTION_CANCEL:
          break;
        default:
          break;
        }
        return true;
      }
    } 
```

# sql - Oracle 10g -SQL

> ID：11499077
> 
> 赞同：1
> 
> 时间：2012-07-16T06:28:15.427
> 
> 标签：sql, oracle, oracle10g

如何在emp表中找到每个部门的前2名薪水？

```
Emp Table
-----------
Row_id Salary Dept 
R1       2000    D1
R2       3000    D1
R3       4000    D1
R4       5000    D1
R5       2000    D2
R6       3000    D2
R7       4000    D2
R8       5000    D2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:31:51.487

```
select 
    row_id,salary,dept 
from
(
select 
    row_number() over (partition by dept order by salary desc) as sno,
    row_id,salary,dept 
from emp
) t 
where sno<=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:33:58.000

请试试这个

```
select T1.Dept,T2.Salary  
from Emp_Table T1  join Emp_Table T2
on T1.Dept=T2.Dept
and T1.Salary>=T2.Salary
group by T1.Dept,T2.Salary 
having COUNT(*) <=2 
```

# magento - 如何在 Magento 集合中加载 mage_sales_flat_quote_item_option 这个表？

> ID：11499081
> 
> 赞同：0
> 
> 时间：2012-07-16T06:28:35.420
> 
> 标签：magento, magento-1.4

我对magento很陌生。任何人都可以帮助我将`mage_sales_flat_quote_item_option`这张表加载到 Magento 集合中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:03:54.110

```
$collection = Mage::getModel('sales/quote_item_option')->getCollection(); 
```

**编辑**

在评论中询问了如何从集合中的每个模型中获取单个属性值的问题：

```
$collection->getColumnValues('your_column_name'); 
```

# android - 如何检查视频是否可以在 Android 上被设备支持

> ID：11499088
> 
> 赞同：2
> 
> 时间：2012-07-16T06:29:07.237
> 
> 标签：android, android-videoview

我尝试使用以下代码播放 *.mp4 视频：

```
Uri uri = Uri.parse(path);
VideoView vv = (VideoView)findViewById(id);
vv.setVideoURI(uri); 
```

路径为 *.mp4 格式。
但有时由于 *.mp4 视频不是 mpeg4 的标准编解码器，设备不支持该视频。
或者视频的分辨率高于支持的设备。
我想找到它们，并显示一些信息。
我该怎么做才能检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:42:31.827

尝试：

```
vv.setOnErrorListener(new OnErrorListener() {
    @Override
    public boolean onError(MediaPlayer mp, int what, int extra) {
        ...
    }
}); 
```

有关可能的错误代码列表，请参阅文档：[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_ERROR_NOT_VALID_FOR_PROGRESSIVE_PLAYBACK)

# itunes - iTunes 示例 url（m4a 链接）不在浏览器/jplayer 中播放

> ID：11499097
> 
> 赞同：2
> 
> 时间：2012-07-16T06:29:31.737
> 
> 标签：itunes, jplayer, m4a

我正在尝试使用 jplayer 集成 iTunes 预览 url（m4a 文件）但遇到问题

Apple iTunes 中的所有文件都不起作用。例如：

```
http://a1.phobos.apple.com/us/r1000/057/Music/fd/8b/40/mzm.staswrxu.aac.p.m4a 
```

但是，这 2 个 m4a（非苹果）链接有效：

```
http://jwdriggs.com/jagspodcast/m4a/%23116.m4a 
```

他们自己在 iTunes 播放器中工作。

我能做些什么来让它们工作？它与iTunes编码有什么关系。如果这个问题有任何解决方法，那就太好了。

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />

<!-- Website Design By: www.happyworm.com -->
<title>Demo : jPlayer circle player</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="skin/circle.skin/circle.player.css">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.jplayer.min.js"></script>
<script type="text/javascript" src="js/jquery.transform.js"></script>
<script type="text/javascript" src="js/jquery.grab.js"></script>
<script type="text/javascript" src="js/mod.csstransforms.min.js"></script>
<script type="text/javascript" src="js/circle.player.js"></script>

<script type="text/javascript">
//<![CDATA[

$(document).ready(function(){

/*
 * Instance CirclePlayer inside jQuery doc ready
 *
 * CirclePlayer(jPlayerSelector, media, options)
 *   jPlayerSelector: String - The css selector of the jPlayer div.
 *   media: Object - The media object used in jPlayer("setMedia",media).
 *   options: Object - The jPlayer options.
 *
 * Multiple instances must set the cssSelectorAncestor in the jPlayer options.     Defaults to "#cp_container_1" in CirclePlayer.
 *
 * The CirclePlayer uses the default supplied:"m4a, oga" if not given, which is different from the jPlayer default of supplied:"mp3"
 * Note that the {wmode:"window"} option is set to ensure playback in Firefox 3.6 with the Flash solution.
 * However, the OGA format would be used in this case with the HTML solution.
 */

var myCirclePlayer = new CirclePlayer("#jquery_jplayer_1",
{
    //m4a: "http://www.jplayer.org/audio/m4a/Miaow-07-Bubble.m4a"
    m4a: "http://a1549.phobos.apple.com/us/r1000/026/Music/d8/01/eb/mzm.mxkkesne.aac.p.m4a"
}, {
    cssSelectorAncestor: "#cp_container_1",
    swfPath: "js",
    wmode: "window"
});
});
//]]>
</script>
</head>
<body>

        <!-- The jPlayer div must not be hidden. Keep it at the root of the body element to avoid any such problems. -->
        <div id="jquery_jplayer_1" class="cp-jplayer"></div>

        <!-- The container for the interface can go where you want to display it. Show and hide it as you need. -->

        <div id="cp_container_1" class="cp-container">
            <div class="cp-buffer-holder"> <!-- .cp-gt50 only needed when buffer is > than 50% -->
                <div class="cp-buffer-1"></div>
                <div class="cp-buffer-2"></div>
            </div>
            <div class="cp-progress-holder"> <!-- .cp-gt50 only needed when progress is > than 50% -->
                <div class="cp-progress-1"></div>
                <div class="cp-progress-2"></div>
            </div>
            <div class="cp-circle-control"></div>
            <ul class="cp-controls">
                <li><a href="#" class="cp-play" tabindex="1">play</a></li>
                <li><a href="#" class="cp-pause" style="display:none;" tabindex="1">pause</a></li> <!-- Needs the inline style here, or jQuery.show() uses display:inline instead of display:block -->
            </ul>
        </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T01:25:32.863

尝试使用[SoundManager2](http://www.schillmania.com/projects/soundmanager2/) - 这个库可以很好地播放 iTunes 音频预览。

# objective-c - 如何找到数组的索引？

> ID：11499098
> 
> 赞同：3
> 
> 时间：2012-07-16T06:29:35.980
> 
> 标签：objective-c, uibutton, nsmutablearray, xcode4.2

我有一个`NSMutableArray`实例，名为`myArray`. 它包含 8 个按钮对象。如何获取已粘贴到整数变量的按钮的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:32:34.530

`NSArray`有一个方法叫做`indexOfObject`

```
- (IBAction)pushButton:(id)sender {
    NSButton *button = (NSButton *)sender;
  NSUInteger index =  [Array indexOfObject:button];

} 
```

# vb.net - 使用 vb.net 打开一个文本文件，如果存在则删除该文件

> ID：11499101
> 
> 赞同：0
> 
> 时间：2012-07-16T06:29:51.043
> 
> 标签：vb.net, file-io, vb.net-2010

我正在使用 vb.net 为 Windows 应用程序编写代码。我想在`c:\`. 如果该文件已经存在，我想删除该文件。

```
my code
-------
 Dim file As String = "C:\test.txt"
    If System.IO.File.Exists(file) Then
        file.Remove(file)
    Else

        System.Diagnostics.Process.Start(file)

  End If 
```

当我尝试打开该文件时出现以下错误。

```
error
-----
The system cannot find the file specified 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T20:21:33.447

除了 Konrad 关于尝试执行您刚刚检查的文件不存在的观点之外：

1) 命名变量不是一个好主意，`file`因为它可能会与 System.IO.File 混淆。

2) 它是 File.Delete，而不是 file.Remove - 您正在调用 String.Remove 方法，因为`file`它是一个字符串。您应该使用**Option Strict On**，因为它会为您捕获该错误。

3) 在 Windows Vista 和更高版本上，您可能没有对 C: 的写入/删除权限。

假设您对目录 C:\temp 具有写访问权限，则此方法有效：

```
Dim fyle As String = "C:\temp\test.txt"

If System.IO.File.Exists(fyle) Then
    IO.File.Delete(fyle)
End If

IO.File.Create(fyle)
System.Diagnostics.Process.Start(fyle) 
```

# java - 错误：找不到/hibernate.cfg.xml

> ID：11499104
> 
> 赞同：0
> 
> 时间：2012-07-16T06:29:57.507
> 
> 标签：java, eclipse, hibernate

我正在使用 Eclipse“靛蓝”。我制作了一个具有以下结构的 Java 项目：
Hibernate (Project Name)
src
Referenced Libraries
JRE System Libraries
employee.hbm.xml
hibernate.cfg.xml

现在，当我运行我的代码时，它显示错误**“/hibernate.cfg.xml not found”**
有没有办法为休眠配置文件设置路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:13:40.890

您必须将 hibernate.cfg.xml 放入 src 目录（与您的包或类在同一文件夹中）。

`src/`
`com.mypackage/myJava.java`
`com.otherPackage`
`hibernate.cfg.xml`

另外，在eclipse中你可以定义一个资源目录，把它添加到路径中，然后把hibernate.cfg.xml放在那里

我希望能帮助你。马科斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:37:19.983

这显然是一个错误的设置。您可以通过在 google 中搜索如何设置 eclipse 以使用 hibernate 来获得详细的解释。甚至还有关于此的视频教程。[喜欢这个](http://www.youtube.com/watch?v=GINvxAaXDbY)：）

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:42:46.833

hibernate.cfg.xml 必须在您的类路径中。因此，创建一个源文件夹（如您的 src）并将其放在那里。像这样：
1\. 创建一个名为“properties”的源文件夹
2\. 将您的 hibernate.cfg.xml 放在那里
3.`properties/hibernate.cfg.xml`在您的应用程序中提供地址。
4\. 如果你在你的 XML 文件中使用这个 hibernate 配置文件，你必须使用这个地址：`classpath:properties/hibernate.cfg.xml`

# ruby-on-rails - .increment vs += 1

> ID：11499110
> 
> 赞同：41
> 
> 时间：2012-07-16T06:30:27.797
> 
> 标签：ruby-on-rails, ruby, increment

我有一个包含视图计数（整数）变量的图片模型。每次有人查看图片对象时，查看次数都会增加 +1。

在完成这项工作时，有什么区别

```
 @picture.view_count += 1
   @picture.save 
```

和

```
 @picture.increment(:view_count, 1) 
```

另外，如果我使用增量，是否需要 .save？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-16T06:36:50.977

的来源`increment`如下，如果为 nil 则将属性初始化为零并将传递的值添加为 by（默认为 1），它不保存，所以`.save`仍然是必要的。

```
def increment(attribute, by = 1)
  self[attribute] ||= 0
  self[attribute] += by
  self
end 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-04-03T22:26:01.593

在这种情况下，我经常使用`counter_cache`和`increment_counter`。

像这样：

```
Picture.increment_counter(:view_count, @picture.id) 
```

这种方法比自制的方法更简单、更快捷。

顺便说一句，ActiveRecord::CounterCache 也有`decrement_counter`.

[http://api.rubyonrails.org/classes/ActiveRecord/CounterCache/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/CounterCache/ClassMethods.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T07:48:04.307

您应该使用 counter_cache。counter_cache 帮助您自动增加记录数。

```
class Picture < ActiveRecord::Base
  has_many :views
end

class View < ActiveRecord::Base
  belongs_to :picture, counter_cache: true
end 
```

图片表需要名称为views_count的列，或者您可以为此列使用自己的名称，例如：

```
belongs_to :picture, counter_cache: :number_of_views 
```

但我建议您为 counter_cache 列使用默认名称，即 views_count。

# c# - 计算并行端口输入频率 - C#

> ID：11499113
> 
> 赞同：0
> 
> 时间：2012-07-16T06:30:46.423
> 
> 标签：c#, input, parallel-port, time-frequency

我必须在 13 号引脚计算并行端口的输入频率，来自 555 定时器 IC，实际频率应该在 3-4 Hz 左右（ON 脉冲）。我已经尝试了几次代码，但每次都给出不同的值。我尝试了以下代码：

```
 [DllImport("inpout32.dll", EntryPoint = "Inp32")]
    public static extern int Input(int adress);

    private void button1_Click(object sender, EventArgs e)
    {
        int currentState = Input(889);
        int LastState;
        while (true)
        {
            int State = Input(889);
            if (State != currentState)
            {
                if (Input(889) == 120)
                {
                    LastState = 0;
                }
                else
                {
                    LastState = 1;
                }
                break;
            }
        }
        GetFreq(LastState);

    }
    void GetFreq(int LastPulse)
    {
        int highPulseFreq = 0;
        int lowPulseFreq = 0;
        if (LastPulse == 1)
        {
            highPulseFreq++;
        }
        if (LastPulse == 0)
        {
            lowPulseFreq++;
        }
        int startTime = DateTime.Now.Second;
        while (true)
        {
            if (startTime == DateTime.Now.Second)
            {
                if (Input(889) != 120)// ON
                {
                    if (LastPulse == 0)
                    {
                        highPulseFreq++;
                        LastPulse = 1;
                    }
                }
                else
                {
                    if (LastPulse == 1)
                    {
                        lowPulseFreq++;
                        LastPulse = 0;
                    }
                }
            }
            else
            {
                MessageBox.Show("ON Pulses: " + highPulseFreq.ToString() + Environment.NewLine + "OFF Pulses: " + lowPulseFreq.ToString());
                break;
            }
        }
    } 
```

输出：

![在此处输入图像描述](../Images/b59eeaa545f651f7395fd47310cbb766.png) ![在此处输入图像描述](../Images/2a0aa6dba4be1d321160569e524dad0e.png) ![在此处输入图像描述](../Images/9fc946c4c8ab1e59f1fecd1f0ec70207.png)

我该怎么做才能获得准确的频率？我的代码有什么问题吗？我正在使用`inpout32.dll`来控制并行端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:35:48.963

您需要以至少两倍于信号最高频率的速率对信号进行采样。如果您预期的最高频率约为 4Hz，那么在 15 - 20Hz 的任何地方对信号进行采样应该会产生良好的结果。

幸运的是，在这种速率下采样是可以在 Windows 上使用高精度计时器完成的（如果您不需要很高的准确性）。20Hz 采样率对应于 50ms 的采样周期，因此您可以使用循环，在记录采样值之间睡眠约 50ms。您不会在样本之间获得超精确的 delta-T（您可能会看到每个样本之间的时间变化高达 15-30 毫秒，具体取决于您的系统），但对于您正在处理的频率应该足够好和。

您可以记录几秒钟的样本（以及相关的时间戳），然后将数据导出到电子表格。进入电子表格后，您可以进行一些分析和绘图。或者您可以找到一些时间序列分析代码来分析样本列表，例如使用傅里叶变换（FFT）将信号从时域转换到频域。

这是创建示例的示例。如果您确实需要更准确的时间戳，您可以`DateTime.Now`用`StopWatch`in替换使用。`GetInputSamples`

```
[DllImport("inpout32.dll", EntryPoint = "Inp32")] 
public static extern int Input(int adress); 

struct Sample 
{
    public int Value;
    public int Milliseconds;
};

private void button1_Click(object sender, EventArgs e) 
{ 
    TimeSpan duration = TimeSpan.FromSeconds(5);
    TimeSpan samplePeriod = TimeSpan.FromMilliseconds(50);

    var samples = GetInputSamples(889, duration, samplePeriod);
    SaveSamplesCSV(samples, "test.csv");
} 

private static List<Sample> GetInputSamples(int inputPort, TimeSpan duration, TimeSpan samplePeriod)
{ 
    List<Sample> samples = new List<Sample>();

    var oldPriority = Thread.CurrentThread.Priority;
    try
    {
        Thread.CurrentThread.Priority = ThreadPriority.Highest;

        DateTime start = DateTime.Now;
        while (DateTime.Now - start < duration)
        {
            int value = Input(inputPort); 
            TimeSpan timestamp = DateTime.Now - start;

            samples.Add(new Sample() { Value = value, Milliseconds = (int)timestamp.TotalMilliseconds });

            Thread.Sleep(samplePeriod);
        }
    }
    finally
    {
        Thread.CurrentThread.Priority = oldPriority;
    }

    return samples;
}

private static void SaveSamplesCSV(List<Sample> samples, string fileName)
{
    using (StreamWriter writer = File.CreateText(fileName))
    {
        writer.WriteLine("Sample, Time (ms)");
        foreach (var sample in samples)
        {
            writer.WriteLine("{0}, {1}", sample.Value, sample.Milliseconds);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:50:10.497

尝试改用以下函数：

```
double GetFreq(long time, out int highCount, out int lowCount)
{
    const int ADDRESS = 0x378 + 1, MASK = 0x10;
    highCount = lowCount = 0;
    bool LastState = (Input(ADDRESS) & MASK) == MASK;
    if (LastState)
    {
        highCount++;
    }
    else
    {
        lowCount++;
    }
    System.Diagnostics.Stopwatch stopwatch = new System.Diagnostics.Stopwatch();
    stopwatch.Start();
    while (stopwatch.ElapsedMilliseconds <= time)
    {
        if ((Input(ADDRESS) & MASK) == MASK) // High
        {
            if (!LastState)
            {
                highCount++;
                LastState = true;
            }
        }
        else
        {
            if (!LastState)
            {
                lowCount++;
                LastState = false;
            }
        }
    }
    stopwatch.Stop();
    return ((double)(highCount + lowCount)) / time * 500
} 
```

当您需要调用该函数时，只需执行以下操作：

```
int highCount, lowCount;
double frequenct = GetFreq(1000, out highCount, out lowCount); 
```

在我的代码中，我使用按位运算符`AND`来屏蔽不必要的位，这应该比直接与`120`. 请记住，当结果是按位计算时，切勿直接使用`==`or`!=`运算符进行比较。

我使用`System.Diagnostics.Stopwatch`了比使用**更**精确的`DateTime.Now.Second`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:50:45.853

你做的各种事情都有点不对劲。首先，您要计算一整秒的脉冲数，*最多*计算一秒钟的脉冲数（取决于第二次调用 GetFreq 的位置）。

其次，您正在计算向上和向下脉冲，尽管我认为频率应该是每秒向上（或向下）脉冲的数量，而不是两者（这将是频率的两倍）。

最后，如果你想测量 3 或 4 Hz，测量一秒钟会引入舍入误差。尝试测量 5 秒。使用 a`Stopwatch`来测量这 5 秒。

# sql - 如何在 Sql Server 中使用 Pivot？

> ID：11499115
> 
> 赞同：0
> 
> 时间：2012-07-16T06:30:51.767
> 
> 标签：sql, sql-server-2008, pivot

我有一个存储数据的表，如下所示：
username status
user1 HT
user2 EC
user1 PR
user1 EC
user2 HT

我需要这样的结果

用户名 HT EC PR GrandTotal
user1 1 1 1 3
user2 1 1 0 2
Total 2 2 1 5

请任何人帮助我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:36:43.407

当状态值固定时，这很简单。

```
select 
    username,
    sum(case when status='HT' then 1 else 0 end) as HT,
    sum(case when status='EC' then 1 else 0 end) as EC,
    sum(case when status='PR' then 1 else 0 end) as PR,
    count(*) as total
from
    table
group by
    username
WITH ROLLUP 
```

如果它们是动态的，则需要使用[http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx](http://beyondrelational.com/modules/2/blogs/70/posts/10840/dynamic-pivot-in-sql-server-2005.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:37:22.073

```
 USE AdventureWorks
    GO
    -- Creating Test Table
    CREATE TABLE Product(Cust VARCHAR(25), Product VARCHAR(20), QTY INT)
    GO
    -- Inserting Data into Table
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('KATE','VEG',2)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('KATE','SODA',6)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('KATE','MILK',1)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('KATE','BEER',12)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('FRED','MILK',3)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('FRED','BEER',24)
    INSERT INTO Product(Cust, Product, QTY)
    VALUES('KATE','VEG',3)
    GO
    -- Selecting and checking entires in table
    SELECT *
    FROM Product
    GO
    -- Pivot Table ordered by PRODUCT
    SELECT PRODUCT, FRED, KATE
    FROM (
    SELECT CUST, PRODUCT, QTY
    FROM Product) up
    PIVOT (SUM(QTY) FOR CUST IN (FRED, KATE)) AS pvt
    ORDER BY PRODUCT
    GO
    -- Pivot Table ordered by CUST
    SELECT CUST, VEG, SODA, MILK, BEER, CHIPS
    FROM (
    SELECT CUST, PRODUCT, QTY
    FROM Product) up
    PIVOT (SUM(QTY) FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)) AS pvt
    ORDER BY CUST
    GO
    -- Unpivot Table ordered by CUST
    SELECT CUST, PRODUCT, QTY
    FROM
    (
    SELECT CUST, VEG, SODA, MILK, BEER, CHIPS
    FROM (
    SELECT CUST, PRODUCT, QTY
    FROM Product) up
    PIVOT
    ( SUM(QTY) FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)) AS pvt) p
    UNPIVOT
    (QTY FOR PRODUCT IN (VEG, SODA, MILK, BEER, CHIPS)
    ) AS Unpvt
    GO
    -- Clean up database
    DROP TABLE Product
    GO

    ResultSet:
    -- Selecting and checking entires in table
    Cust Product QTY
    ------------------------- -------------------- -----------
    KATE VEG 2
    KATE SODA 6
    KATE MILK 1
    KATE BEER 12
    FRED MILK 3
    FRED BEER 24
    KATE VEG 3

    -- Pivot Table ordered by PRODUCT
    PRODUCT FRED KATE
    -------------------- ----------- -----------
    BEER 24 12
    MILK 3 1
    SODA NULL 6
    VEG NULL 5

    -- Pivot Table ordered by CUST
    CUST VEG SODA MILK BEER CHIPS
    ------------------------- ----------- ----------- ----------- ----------- -----------
    FRED NULL NULL 3 24 NULL
    KATE 5 6 1 12 NULL

    -- Unpivot Table ordered by CUST
    CUST PRODUCT QTY
    ------------------------- -------- -----------
    FRED MILK 3
    FRED BEER 24
    KATE VEG 5
    KATE SODA 6
    KATE MILK 1
    KATE BEER 12 12 
```

参考：http: [//blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

# iphone - 尝试将字符串转换为日期

> ID：11499116
> 
> 赞同：0
> 
> 时间：2012-07-16T06:30:56.617
> 
> 标签：iphone, objective-c, ios, nsdateformatter

> **可能重复：**
> [将字符串转换为 nsdate](https://stackoverflow.com/questions/2311421/convert-string-to-nsdate)

NSString 具有以下值 '2012-07-11T15:59:16'

我无法确定 NSDateFomatter.dateFormat 属性的正确格式，以便使用 dateFromString 方法对其进行转换。我尝试了 'yyyy-MM-ddTHH:mm:ss' 和其他类似格式，但结果日期为零。

包含有关日期格式的信息的链接也将受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:06:22.470

好吧，如果您逃脱了以下命令，您应该能够使其工作`T`：

```
 [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss"]; 
```

# iphone - 无法创建新版本

> ID：11499120
> 
> 赞同：1
> 
> 时间：2012-07-16T06:31:08.863
> 
> 标签：iphone, ipad

当我尝试在 iTunes 中上传新版本时，我收到错误响应。

当我单击“准备上传二进制文件”按钮时，我得到以下响应

发生以下错误：我们暂时无法保存您的更改。请稍后再试。

我从过去 2 周开始尝试，但得到了相同的响应。

# ios - UIImage 中的绘图被扭曲

> ID：11499129
> 
> 赞同：2
> 
> 时间：2012-07-16T06:31:47.360
> 
> 标签：ios, cocoa-touch, uiimage, core-animation, core-graphics

我在我的应用程序中实现了一个突出显示功能。此高亮显示在 UIImage 中，以便可以将其保存为 PNG 表示。一切都运行良好，但最近我意识到一个非常令人困惑的问题。有时当我突出显示时，图纸被扭曲了。这是它的样子：

![突出显示向左拉伸](../Images/402bf68f3a3e079717463f205ae14366.png)

每当我移动手指以突出显示字符时，绘制的高光就会向左延伸。另一个：

![高光淡出](../Images/4ab370c1370b5a69ca9386aa5e8c3860.png)

在这个中，每次我移动手指高亮时，绘制的高光都会向上移动！

这一切都让我很困惑。这种情况不时发生，有时仅发生在某些页面上。有时它就像这样运行良好：

![完美的亮点](../Images/2c6b9254d4f43c3bdd3bf77c2a293795.png)

我很困惑为什么会发生这种情况。谁能告诉我或至少让我知道为什么会发生这种情况？请帮我。

**编码：**

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
   currPoint = [[touches anyObject]locationInView:self];

   for (int r = 0; r < [rectangles count]; r++) 
   {
      CGRect rect = [[rectangles objectAtIndex:r]CGRectValue];

      //Get the edges of the rectangles
      CGFloat xEdge = rect.origin.x + rect.size.width;
      CGFloat yEdge = rect.origin.y + rect.size.height;

    if ((currPoint.x > rect.origin.x && currPoint.x < xEdge) && (currPoint.y < rect.origin.y && currPoint.y > yEdge))
    {
        imgView.image = [self drawRectsToImage:imgView.image withRectOriginX:rect.origin.x originY:rect.origin.y rectWidth:rect.size.width rectHeight:rect.size.height];
        break;
    }
   }
}

//The function that draws the highlight
- (UIImage *)drawRectsToImage:(UIImage *)image withRectOriginX:(CGFloat)x originY:(CGFloat)y rectWidth:(CGFloat)width rectHeight:(CGFloat)ht
{
  UIGraphicsBeginImageContext(self.bounds.size);
  CGContextRef context = UIGraphicsGetCurrentContext();
  [image drawInRect:self.bounds];

  CGContextSetStrokeColorWithColor(context, [UIColor clearColor].CGColor);

  CGRect rect = CGRectMake(x, y, width, ht);
  CGContextAddRect(context, rect);
  CGContextSetCMYKFillColor(context, 0, 0, 1, 0, 0.5);
  CGContextFillRect(context, rect);

  UIImage *ret = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();
  return ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T12:38:13.167

我不能确切地告诉你为什么会出现这些伪影，但是......

我认为在触摸处理程序中渲染图像不是一个好主意。触摸处理应该尽可能少。

您可能想尝试使用 CoreAnimation 的`CALayer`：

将您的图像设置为这样的背景图像（假设您的类是 的子类`UIView`）或使用实际的`UIImageView`：

```
self.layer.contents = (id)image.CGImage; 
```

当您检测到另一个矩形`rect`已被触摸时，将突出显示添加为图像背景上方的子图层：

```
CALayer *highlightLayer = [CALayer layer];
highlightLayer.frame = rect;
highlightLayer.backgroundColor = [UIColor yellowColor].CGColor;
highlightLayer.opacity = 0.25f;
[self.layer addSublayer:highlightLayer]; 
```

如有必要，`shouldRasterize`layer 属性可能有助于提高性能：

```
self.layer.shouldRasterize = YES; 
```

为了使用所有这些，请使用 QuartzCore 框架并`<QuartzCore/QuartzCore.h>`在您的实现文件中导入。

您可以通过将 渲染`self.layer`到图像上下文来创建层层次结构的 PNG 表示，然后获取图像和您的 PNG 表示。

# objective-c - ios中sqlite3中的内存泄漏

> ID：11499132
> 
> 赞同：0
> 
> 时间：2012-07-16T06:31:59.067
> 
> 标签：objective-c, ios, memory-management, sqlite

其基于位置的应用程序和应用程序在 5-6 分钟后崩溃。当我使用性能工具运行应用程序时，泄漏，我不断发现我的所有类都泄漏内存。我一秒一秒地调用这个函数。请正确关闭我的数据库或 sqlite3。谢谢。

```
 - (void)locationUpdate:(CLLocation *)location {

            for (int i=0; i<[arrayAlerts count]; i++) {
                   Msg=[DatabaseManager GetSelectedMessage:[NSString stringWithFormat:@"select text_msg  from TextMsgTemplate  where msg_id=%d",ObjAlertInfo.msgID]];
        }

    in Databasemanger

    +(NSString *)GetSelectedMessage:(NSString *)SQL
    {

        NSString *msg;//=[[[NSString alloc]init] autorelease];
        msg=nil;
        sqlite3_stmt *dataset=nil; 
        dataset=[DatabaseManager getMessages:SQL];

        while ((sqlite3_step(dataset)==SQLITE_ROW) ) {
            msg=[NSString stringWithUTF8String:(char *)sqlite3_column_text(dataset, 0)];

        } 

        sqlite3_finalize(dataset);

        dataset = nil;
       return msg;

    }

    +(sqlite3_stmt *)getMessages:(NSString *)SQL
    {

        sqlite3_stmt *dataset=nil;

        sqlite3_stmt *finaldataset=nil;

        if (sqlite3_open([[self getdatabasePath] UTF8String], &database) == SQLITE_OK ) {

            if (sqlite3_prepare_v2(database, [SQL UTF8String], -1, &dataset, NULL) != SQLITE_OK) 
            {
                NSLog(@"error get message");
                return nil;

            }else{
                finaldataset= dataset;  

            }

       }

        sqlite3_close(database);

        return finaldataset;

    } 
```

# ruby - 自定义红宝石宝石上的奇怪 LoadError

> ID：11499140
> 
> 赞同：5
> 
> 时间：2012-07-16T06:33:10.043
> 
> 标签：ruby, gem

我有一个自定义 gem，当我将它作为 gem 安装并尝试在 irb 中使用它时遇到了一个非常奇怪的 LoadError。

在项目文件夹中，我的 rspec 测试一切正常。这仅在将其用作 irb 中的实际宝石时才会发生。

它在 ( ) 处引发 LoadError 异常的文件`/lib/mws/api/order_response.rb`确实存在。我尝试重命名文件并更新需要它的文件（`/lib/mws.rb`）。我尝试重新创建文件，认为可能存在权限问题。没有任何效果。

如果我注释掉该特定文件的要求行，一切正常。该文件没有什么特别之处。还有 4 个其他文件几乎与它相同 ( `*_response.rb`)。

我觉得我正在服用疯狂的药丸。我一定是在俯瞰某些东西，但我肯定看不到它。

**痕迹：**

```
chris@Samus:~$ irb
1.9.3p194 :001 > require 'mws'
LoadError: cannot load such file -- mws/api/order_response
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/chris/.rvm/gems/ruby-1.9.3-p194/gems/mws-0.1.18/lib/mws.rb:14:in `<top (required)>'
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require'
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `rescue in require'
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:35:in `require'
    from (irb):1
    from /Users/chris/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

**带有要求 ( `/lib/mws.rb`)的文件**

```
require 'mws/base'
require 'mws/connection'
require 'mws/utility'

require 'mws/api/seller'
require 'mws/api/product'
require 'mws/api/order'
require 'mws/api/report'

require 'mws/api/general_response'
require 'mws/api/product_response'
require 'mws/api/report_response'
require 'mws/api/seller_response'
require 'mws/api/order_response' # <--- the offending line

module MWS
  # @see Base#initialize MWS::Base for instantiation details.
  # @return [Base] returns MWS::Base object.
  def self.new(merchant_id, access_key, secret_key)
    MWS::Base.new(merchant_id, access_key, secret_key)
  end
end

# The below is for documentation generation purposes.

# MWS is a wrapper for the Amazon Marketplace Web Service (MWS) API.
module MWS
  # API handles all the Amazon MWS API specific stuff.
  module API
  end
  # Utilities contains various functions needed throughout MWS. Utilities is a mixin to multiple classes.
  module Utilities
  end
end 
```

**我需要的文件（`/lib/mws/api/order_response.rb`）：**

```
module MWS
  module API

    # Class for parsing Amazon's XML responses into managable objects.
    class OrderResponse

      # Include GeneralResponse instance methods as class methods
      extend GeneralResponse

    end
  end
end 
```

**还有我的文件结构**

![在此处输入图像描述](../Images/0287dc7e9d497a90b58f382fc5295b9d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-05T23:03:12.463

对于任何感兴趣的人，我正在使用 Jeweler 来处理构建这颗宝石。事实证明，Jeweler 在构建 gemspec 时会使用您的 Git 存储库。

如果您尚未将所有必需的文件添加到您的 git 存储库，Jeweler 的 gemspec rake 任务将不会在生成新的 gemspec 文件时包含它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T19:54:39.983

`/Users/chris/.rvm/gems/ruby-1.9.3-p194/gems/mws-0.1.18/lib/mws/api`如果文件在那里（并且没有模糊的权限），Can 应该签入。

如果不是这种情况，您可能忘记将它添加到您的 gemspec 中。

如果它在那里，请尝试使用绝对路径要求/加载它（用于调试目的）。

# c - ARM指令解码

> ID：11499141
> 
> 赞同：1
> 
> 时间：2012-07-16T06:33:28.583
> 
> 标签：c, assembly, arm, instruction-set

我需要用 C 解码 ARM(ARM926EJ) 指令。我有 32 位十六进制指令。我想解码并获取操作码操作数。任何人都知道这方面的任何好材料。

注意我查看了 QEMU translate.c 文件。但它是如此复杂，甚至不知道为什么要做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:08:57.693

假设您不想/不能使用程序为您执行此操作，您可以参考[ARM 参考手册](http://www.scss.tcd.ie/~waldroj/3d1/arm_arm.pdf)。

其中有专门用于指令编码的部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T18:05:38.110

我使用结合了 gas 和 objdump 的脚本来为我执行此操作。我确信有更好的方法，但这对我来说效果很好。

```
#!/bin/sh

cat > /tmp/foo.S <<EOF
 .text
 .arm
 .word $1
EOF

arm-linux-gnueabi-as  /tmp/foo.S -o /tmp/foo.o
echo "ARM:  " `arm-linux-gnueabi-objdump -d /tmp/foo.o | grep "   0:"`
echo "Thumb:" `arm-linux-gnueabi-objdump --disassembler-options=force-thumb -d     /tmp/foo.o | grep "   0:"`
rm -rf /tmp/foo.o /tmp/foo.S 
```

# android - TextView 在 Android 中显示 CR LF 的 HexValue (0x0d0a)

> ID：11499144
> 
> 赞同：0
> 
> 时间：2012-07-16T06:33:46.260
> 
> 标签：android

在从 textview 保存数据时，CR LF 像十六进制值 0x0d0a 一样存储。但是，虽然**在列表视图内的另一个文本视图中**显示相同的数据，但没有显示 0x0d0a 的返回空间。而不是直接打印/0x0d0a。这里有任何帮助。提前致谢。——拉加夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T06:19:44.373

今天解决了。文本视图仅显示 \n 的返回空间。用 \n 替换 /0x0d0a 解决了这个问题。谢谢 ！！

# stdin - php 命令行不会向脚本发送来自用户的正确提示输入

> ID：11499146
> 
> 赞同：0
> 
> 时间：2012-07-16T06:33:50.813
> 
> 标签：stdin, php

php 命令行不会向脚本发送来自用户的正确提示输入。他是这个问题的一个例子

`is_dir("C:/");`返回 1 但`is_dir(fgets(STDIN))`在用户输入后返回 null`"C:/"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:51:30.667

试试这个

`is_dir(trim(fgets(STDIN)))`

我认为原始输入必须是`c:/ + ENTER KEY`

# symfony - Symfony2 表单和多态集合

> ID：11499150
> 
> 赞同：12
> 
> 时间：2012-07-16T06:34:16.557
> 
> 标签：symfony, doctrine, polymorphism

我在玩 Symfony2 并且我不确定 Symfony2 如何处理 View 组件中的多态集合。似乎我可以创建一个包含 AbstractChildren 集合的实体，但不确定如何在 Form Type 类中使用它。

例如，我有以下实体关系。

```
/**
 * @ORM\Entity
 */
class Order
{
    /**
     * @ORM\OneToMany(targetEntity="AbstractOrderItem", mappedBy="order", cascade={"all"}, orphanRemoval=true)
     * 
     * @var AbstractOrderItem $items;
     */
    $orderItems;  
    ...
}

/**
 * Base class for order items to be added to an Order
 *
 * @ORM\Entity
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="discr", type="string")
 * @ORM\DiscriminatorMap({
 *     "ProductOrderItem" = "ProductOrderItem",
 *     "SubscriptionOrderItem " = "SubscriptionOrderItem "
 * })
 */
class AbstractOrderItem
{
    $id;
    ...
}

/**
 * @ORM\Entity
 */
class ProductOrderItem  extends AbstractOrderItem
{
    $productName;
}

/**
 * @ORM\Entity
 */
class SubscriptionOrderItem extends AbstractOrderItem
{
    $duration;
    $startDate;
    ...
} 
```

很简单，但是当我为我的订单类创建表单时

```
class OrderType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder->add('items', 'collection', array('type' => AbstractOrderItemType()));
    }
} 
```

我不确定如何处理这种情况，您实际上需要为集合中的每个项目类别使用不同的表单类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T11:02:00.960

我最近解决了一个类似的问题——Symfony 本身对多态集合没有做出任何让步，但是使用 EventListener 来扩展表单很容易为它们提供支持。

下面是我的 EventListener 的内容，它使用了与 Symfony\Component\Form\Extension\Core\EventListener\ResizeFormListener 类似的方法，事件监听器提供了集合表单类型的正常功能：

```
namespace Acme\VariedCollectionBundle\EventListener;

use Symfony\Component\EventDispatcher\EventSubscriberInterface;
use Symfony\Component\Form\FormFactoryInterface;
use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\FormEvents;

class VariedCollectionSubscriber implements EventSubscriberInterface
{
    protected $factory;
    protected $type;
    protected $typeCb;
    protected $options;

    public function __construct(FormFactoryInterface $factory, $type, $typeCb)
    {
        $this->factory = $factory;
        $this->type = $type;
        $this->typeCb = $typeCb;
    }

    public static function getSubscribedEvents()
    {
        return array(
            FormEvents::PRE_SET_DATA => 'fixChildTypes'
        );
    }

    public function fixChildTypes(FormEvent $event)
    {
        $form = $event->getForm();
        $data = $event->getData();

        // Go with defaults if we have no data
        if($data === null || '' === $data)
        {
            return;
        }

        // It's possible to use array access/addChild, but it's not a part of the interface
        // Instead, we have to remove all children and re-add them to maintain the order
        $toAdd = array();
        foreach($form as $name => $child)
        {
            // Store our own copy of the original form order, in case any are missing from the data
            $toAdd[$name] = $child->getConfig()->getOptions();
            $form->remove($name);
        }
        // Now that the form is empty, build it up again
        foreach($toAdd as $name => $origOptions)
        {
            // Decide whether to use the default form type or some extension
            $datum = $data[$name] ?: null;
            $type = $this->type;
            if($datum)
            {
                $calculatedType = call_user_func($this->typeCb, $datum);
                if($calculatedType)
                {
                    $type = $calculatedType;
                }
            }
            // And recreate the form field
            $form->add($this->factory->createNamed($name, $type, null, $origOptions));
        }
    }
} 
```

使用这种方法的缺点是它要在提交时识别多态实体的类型，您*必须*在绑定之前将表单上的数据设置为相关实体，否则侦听器无法确定数据的真正类型是。您可以使用 FormTypeGuesser 系统解决这个问题，但这超出了我的解决方案的范围。

同样，虽然使用此系统的集合仍然支持添加/删除行，但它会假定所有新行都是基本类型 - 如果您尝试将它们设置为扩展实体，它会给您一个关于包含的表单的错误额外的字段。

为简单起见，我使用便利类型来封装此功能 - 请参见下面的示例：

```
namespace Acme\VariedCollectionBundle\Form\Type;

use Acme\VariedCollectionBundle\EventListener\VariedCollectionSubscriber;
use JMS\DiExtraBundle\Annotation\FormType;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\AbstractType;

/**
 * @FormType()
 */
class VariedCollectionType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        // Tack on our event subscriber
        $builder->addEventSubscriber(new VariedCollectionSubscriber($builder->getFormFactory(), $options['type'], $options['type_cb']));
    }

    public function getParent()
    {
        return "collection";
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setRequired(array('type_cb'));
    }

    public function getName()
    {
        return "varied_collection";
    }
} 
```

示例：命名空间 Acme\VariedCollectionBundle\Form；

```
use Acme\VariedCollectionBundle\Entity\TestModelWithDate;
use Acme\VariedCollectionBundle\Entity\TestModelWithInt;
use JMS\DiExtraBundle\Annotation\FormType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\AbstractType;

/**
 * @FormType()
 */
class TestForm extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $typeCb = function($datum) {
            if($datum instanceof TestModelWithInt)
            {
                return "test_with_int_type";
            }
            elseif($datum instanceof TestModelWithDate)
            {
                return "test_with_date_type";
            }
            else
            {
                return null; // Returning null tells the varied collection to use the default type - can be omitted, but included here for clarity
            }
        };

        $builder->add('demoCollection', 'varied_collection', array('type_cb' => $typeCb,  /* Used for determining the per-item type */
                                                                   'type' => 'test_type', /* Used as a fallback and for prototypes */
                                                                   'allow_add' => true,
                                                                   'allow_remove' => true));
    }

    public function getName()
    {
        return "test_form";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-23T09:48:27.943

在您给出的示例中，您必须为那些 ProductOrder 和 SubscriptionOrder 创建不同的表单类

```
class ProductOrderType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        //Form elements related to Product Order here
    }
} 
```

和

```
class SubsciptionOrderType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        //Form elements related SubscriptionOrder here
    }
} 
```

在您的 OrderType 表单类中，您添加这两种表单，如下所示

```
class OrderType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
         $builder->add('product',new ProductOrderType())
         $builder->add('subscription',new SubsciptionOrderType())
        //Form elements related to order here
    }
} 
```

现在这将两个表单 SubsciptionOrderType,ProductOrderType 添加到主表单 OrderType 。因此，稍后在控制器中，如果您初始化此表单，您将获得订阅和产品表单的所有字段以及 OrderType 的字段。

如果仍然不清楚，我希望这能回答您的问题，请在此处查看嵌入多个表单的文档。[http://symfony.com/doc/current/cookbook/form/form_collections.html](http://symfony.com/doc/current/cookbook/form/form_collections.html)

# ruby - Ruby:: 如何使用机械化搜索隐藏元素

> ID：11499151
> 
> 赞同：2
> 
> 时间：2012-07-16T06:34:16.877
> 
> 标签：ruby, mechanize-ruby

我正在尝试使用 ruby​​ 中的机械化来隐藏字段并尝试单击它。

```
agent = Mechanize.new
agent.get('http://www.example.com/')
agent.page.link_with(:text => "More Links...") 
```

但这给了我：

```
=> nil 
```

实际上，我想点击它：

```
agent.page.link_with(:text => "More Links...").click 
```

但这是一个错误：

> nil:NilClass 的未定义方法“点击”

这是我的 HTML 代码：

```
<div id="rld-4" class="results_links_more highlight_d links_deep" style="display: none;">
<a class="large" href="javascript:;">More Links...</a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:42:28.727

Mechanize 目前不支持 JavaScript。我建议您尝试弄清楚服务器期望用户代理发送什么，然后使用 Mechanize 复制它。您可以使用[HTTPFox 之](https://addons.mozilla.org/en-us/firefox/addon/httpfox/)类的工具，它是一个 Firefox 插件，可以监控 Web 服务器和浏览器之间的流量。一旦你有了这个，你可以很容易地用机械化复制它。像这样的东西；

```
agent = Mechanize.new

# Doesn't work

# home_page = agent.get('http://requestb.in/')
# agent.click(home_page.link_with(:text => "Create a RequestBin"))
# => undefined method `[]' for nil:NilClass (NoMethodError)

# Works

# The javascript code just makes a POST request with one parameter
request_bin = agent.post("http://requestb.in/api/v1/bins", { "private" => "false" })
puts request_bin.body 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:54:15.330

如果它真的在页面上，那可能应该找到链接，但更大的问题是单击带有'javascript：;'href的链接 不做你认为它做的事。那是因为 mechanize 不是带有 javascript 解释器等的完整浏览器。

# mysql - 使用“NOT IN”查询过滤的问题

> ID：11499152
> 
> 赞同：0
> 
> 时间：2012-07-16T06:34:20.330
> 
> 标签：mysql, filtering

我正在做一个小项目，有点像技术人员的议程，每个技术人员都被分配了一个日常议程。

我正在寻找一个查询，它只显示一个分支中一天没有分配的技术人员（该公司有两个分支：东部和西部）

我试过的查询是：

```
SELECT *
FROM technicians
WHERE id_tech NOT
IN (    
     SELECT id_tech
     FROM hours
   )
AND branch = 'West' 
```

这个查询返回我想要的，但我不知道如何用日期过滤它，我尝试了很多查询，并返回所有具有重复结果的列。

我的表格是每个技术人员都有任务的小时表：

```
CREATE TABLE IF NOT EXISTS `hours` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_tech` int(11) NOT NULL,
  `9_30` varchar(140) DEFAULT NULL,
  `10_30` varchar(50) DEFAULT NULL,
  `11_30` varchar(50) DEFAULT NULL,
  `12_30` varchar(50) DEFAULT NULL,
  `1_30` varchar(50) DEFAULT NULL,
  `2_30` varchar(50) DEFAULT NULL,
  `3_30` varchar(50) DEFAULT NULL,
  `4_30` varchar(50) DEFAULT NULL,
  `5_30` varchar(50) DEFAULT NULL,
  `6_30` varchar(50) DEFAULT NULL,
  `comments` varchar(50) DEFAULT NULL,
  `date` text NOT NULL,
  PRIMARY KEY (`id`)
) TYPE=MyISAM  ROW_FORMAT=DYNAMIC;

INSERT INTO `hours` (`id`, `id_tech`, `9_30`, `10_30`, `11_30`, `12_30`, `1_30`, `2_30`, `3_30`, `4_30`, `5_30`, `6_30`, `comments`, `date`) VALUES
(1, 1, 'Router with problems, Customer ID 111', 'Router with problems, Customer ID 111', 'Router with problems, Customer ID 111', 'Router with problems, Customer ID 111', 'Router with problems, Customer ID 111', 'Desktop with problems, Customer ID 121', NULL, NULL, NULL, 'Network problems, Customer ID 121', 'Router with problems, Customer ID 111', '16-07-2012'),
(3, 3, 'Network with problems, Customer ID 111', 'Network with problems, Customer ID 111', NULL, NULL, NULL, NULL, NULL, NULL, 'Network with problems, Customer ID 111', '', 'Didn''t came to work today', '16-07-2012'); 
```

和技术人员表：

```
CREATE TABLE IF NOT EXISTS `technicians` (
  `id_tech` int(11) NOT NULL,
  `name` varchar(50) COLLATE utf8_spanish_ci NOT NULL,
  `branch` varchar(50) COLLATE utf8_spanish_ci NOT NULL,
  PRIMARY KEY (`id_tech`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci ROW_FORMAT=DYNAMIC;

INSERT INTO `technicians` (`id_tech`, `name`, `branch`) VALUES
(1, 'Peter', 'East'),
(2, 'Juan', 'East'),
(3, 'Rick', 'West'),
(4, 'Mario', 'West'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:51:19.080

将日期比较作为条件检查之一放在`LEFT JOIN`：

```
SELECT a.*
FROM technicians a
LEFT JOIN hours b ON 
          a.id_tech = b.id_tech AND 
          STR_TO_DATE(b.date, '%d-%m-%Y') = CURDATE()
WHERE a.branch = 'West' AND b.id_tech IS NULL 
```

^ 这将获取当天没有任务的所有技术人员。

```
-- Get all West branch technicians who have not been assigned within past week

SELECT a.*
FROM technicians a
LEFT JOIN hours b ON 
          a.id_tech = b.id_tech AND 
          STR_TO_DATE(b.date, '%d-%m-%Y') >= CURDATE() - INTERVAL 1 WEEK
WHERE a.branch = 'West' AND b.id_tech IS NULL 
```

如果您想在过去的特定日期进行比较：

```
-- Get all West branch technicians who have not been assigned on a particular
-- day in the past:

SELECT a.*
FROM technicians a
LEFT JOIN hours b ON 
          a.id_tech = b.id_tech AND 
          STR_TO_DATE(b.date, '%d-%m-%Y') = CAST('2012-06-14' AS DATE)
WHERE a.branch = 'West' AND b.id_tech IS NULL 
```

# java - 每个 jsf 的 C 不工作。JSF

> ID：11499154
> 
> 赞同：0
> 
> 时间：2012-07-16T06:34:26.290
> 
> 标签：java, jsf, jstl

我正在尝试**在 jsf 2.0 中将 c foreach 与 hashmap 或 table**一起使用，但它不起作用，所以我写了一个像这样的简单代码，但这个代码仍然不起作用....请帮助我丢失的地方...

```
<body>
<f:view>
    <c:forEach var="i" begin="1" end="20" step="1" varStatus ="status">
        <c:out value="#{i}" /> 
    </c:forEach>
</f:view> 
```

并为此输出我变得像这样..

```
#{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} #{i} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T12:59:23.163

当您出于某种原因使用古老且 EOL 的 JSTL 1.0 时，EL 将在 JSF2 webapp 中的 JSTL 标记中失败。

确保您至少安装了 JSTL 1.1 或 1.2。建议使用 JSTL 1.2。首先从您的中删除`jstl.jar` **和** ，然后下载并将其放入. 最后确保您将 XML 命名空间设置如下（使用URI 中的路径！）：`standard.jar``/WEB-INF/lib`[`jstl-1.2.jar`](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)`/WEB-INF/lib``/jsp`

```
xmlns:c="http://java.sun.com/jsp/jstl/core" 
```

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)
*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:38:36.217

使用`$`代替`#`

```
<c:forEach var="i" begin="1" end="20" step="1" varStatus ="status">
        <c:out value="${i}" /> 
</c:forEach> 
```

`<c:forEach>`来自 JSTL，您应该使用 JSF，`<ui:repeat>`正如*Luiggi*评论的那样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T06:39:00.670

当您将它与地图一起使用时，您没有指定究竟是什么不起作用......您是否尝试在 foreach 中设置地图/表格的项目：

```
<c:forEach items="#{myMap}" var="item">             
  <h:outputText value="#{item.key}" />
  <h:outputText value="#{item.value}" />
</c:forEach> 
```

# android - 在两点之间画一条线 android & google maps

> ID：11499155
> 
> 赞同：0
> 
> 时间：2012-07-16T06:34:26.400
> 
> 标签：android, google-maps, android-layout, layout, maps

我在谷歌地图上工作，我想在两点之间画一条线我使用了本网站用户问题中的以下代码，但它对我不起作用当我在内部删除此功能时，我有一个强制关闭类应用程序工作

但我需要它，因为我必须画线

我使用的代码如下：

```
 class MyOverlay extends com.google.android.maps.Overlay {
    GeoPoint [] geoPointsArray ;
// constructor 
public MyOverlay(){

    }   

@Override 
public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);

    Paint   mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(2);

    GeoPoint gP1 = new GeoPoint(19240000,-99120000);
    GeoPoint gP2 = new GeoPoint(37423157, -122085008);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path = new Path();

    projection.toPixels(gP1, p1);
    projection.toPixels(gP2, p2);

    path.moveTo(p2.x, p2.y);
    path.lineTo(p1.x,p1.y);

    canvas.drawPath(path, mPaint);
} 
```

}//内部类结束

我真的需要帮助，当我添加这个东西时，我被逼近了：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:42:22.647

试试这个给你的叠加层添加一个或多个点并用红色填充它们。

```
public void draw(Canvas canvas, MapView mapView, boolean shadow) 
    {
        super.draw(canvas, mapView, shadow);

        Paint mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setStyle(Style.FILL_AND_STROKE);
        mPaint.setColor(Color.RED);
        mPaint.setAlpha(9);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        Path path = new Path();

        Projection projection = mapView.getProjection();

        for(int j = 0; j < geoArrayist.size(); j++) 
        {
            Iterator<GeoPoint> it = geoArrayist.iterator();
            while(it.hasNext()) 
            {
                GeoPoint arrayListGeoPoint = it.next();

                Point currentScreenPoint = new Point();
                projection.toPixels(arrayListGeoPoint, currentScreenPoint);

                if(j == 0)
                    path.moveTo(currentScreenPoint.x, currentScreenPoint.y); 
                else
                    path.lineTo(currentScreenPoint.x, currentScreenPoint.y);
            }                 
        }
        // old_geopoint = new_geopoint;
        canvas.drawPath(path, mPaint);
    } 
```

geoArrayList 是一个地理点列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:48:35.663

使用下面的堆栈溢出答案在谷歌地图上的两点之间绘制路线，它可能会对您有所帮助。

[在谷歌地图上绘制路线路径](https://stackoverflow.com/questions/11428650/draw-a-line-in-a-route-map/11428745#11428745)

# algorithm - 至少共享一位数字的对数

> ID：11499157
> 
> 赞同：12
> 
> 时间：2012-07-16T06:34:35.850
> 
> 标签：algorithm

你得到了`n`数字，你必须找到对的**数量，**使得它们之间至少有一个数字是共同的。

例如。对于**5 个**号码：

```
2837 2818 654 35 931 
```

答案：**6**

这里的对是`(2837,2818), (2837,35), (2837,931), (2818,931), (654,35), (35,931)`

**我的尝试**：我采用了一个结构，该结构**以十进制存储数字，以数组中的数字形式存储数字以及该数字中的位数**。

现在对于每个数字，我在包含索引**0-9**的数组中对该数字进行**哈希**处理，并检查所有以下数字是否已经存在它们的任何数字。

 **我的尝试是`O(n^2)`，这很慢。是否有另一种算法可以更快地工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T07:32:45.640

在这里了解什么是变量和什么是常数是至关重要的。

位数是一个常数 (10)。所有数字集的数量（1024）也是如此。此类集合的所有对的数量也是如此（2 ^(20)或大约一百万）。让我们利用这一点。

让我们尝试将输入预处理为大小恒定（与输入大小无关）的数据结构中的“等效”表示。然后，我们对这个恒定大小的结构所做的任何事情都被定义为恒定时间操作，因此总运行时间仅由预处理阶段渐近确定。

**数据结构**

创建一个1024个整数的数组，每个桶（索引）对应一组数字；我们希望在每个桶中存储恰好具有该组数字的输入数字的数量。

例如，3606 有数字 0、3 和 6，因此它将被计入存储桶 2 ⁰ + 2 ³ + 2 ⁶ = 73。

**算法**

预处理是显而易见的。取下一个数字（例如`'3'`），将其转换为它的值（例如`3`），现在计算相应的位（例如`1 << 3`）并将其 OR 为（暂定）桶索引变量；不同的数字占据不同的位，因此每个数字组合都有一个唯一的桶，但我们摆脱了任何重复的数字。像这样循环，直到遇到数字分隔符；那时，桶索引是最终的，我们可以增加桶，重置桶索引并跳到下一个数字。

而已。剩下的就是数我们的羊了。哎呀。成对的羊。

将每个存储桶与其他存储桶（但不是自身）进行比较。每当两个*索引*共享一个数字时（这可以使用`&`运算符确定），将这两个存储桶的内容相乘，并将乘积添加到全局维护的总和中。

将每个桶也与其自身进行比较，并仅`x * (x - 1) / 2`将其与全局维护的总和相加，其中`x`是桶的内容。

这个总和就是你的结果。

**表现**

最坏的情况：输入大小 `O(n)`在哪里。`n`

常数因素也是有利的。每个数字或分隔符我们需要一些指令（和 RAM 访问）；恒定阶段检查一百万个桶对，在每对桶上花费一些类似的指令（不需要访问 RAM，数据结构非常紧凑）。这是闪电般的速度。

理论家会说这是作弊。我们假设输入长度没有上限（或者我们根本不能谈论渐近复杂度），但我们还假设我们可以将总输入长度放入一个整数变量中。那好吧。

更实际的程序员会注意到该算法的字母大小呈指数级。我们很幸运；如果我们的单词不是由数字组成，而是由除分隔符之外的任意字符组成，那么我们的单词仍将是渐近线性时间算法，但与可以轻松处理到兆字节的幼稚算法相比，它对于任何输入都会非常慢一次输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:41:22.173

创建一个集合数组，每个数字一个。

迭代您的数字并将每个数字放入每个集合中的数字中。

迭代所有 10 个集合，并将集合中的每个元素与同一集合中的所有其他元素组合。（或所有其他大于自身的元素，如果您不想在结果中出现 (a,b) 和 (b,a) 。

我认为这仍然是 O(n^2) 但可以使用分叉连接方法很好地使其瘫痪。

**更新**

刚刚意识到你只想要结果的数量。所以这将是所有集合的 size * size-1 的总和。由于插入一个集合并获得它的大小应该是线性的（我认为）这实际上可能是 O(n)

**另一个更新**

如果您的号码不同，并且您只对成对的数量感兴趣，那么您甚至不需要套数，而只需要一个计数器。

**不起作用** 来自评论：

```
Consider 1st pair in above questions test case (2837,2818), this will put first number in set containing digit 2 and 8 and same for 2818 now they are to be counted as one but counting in 2 and 8 will count it twice. I hope you understand what I am trying to say... 
```

所以这种方法行不通……我想这可能对其他人有警告价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:06:34.983

首先，我注意到常用数字的位置无关紧要。

在这种情况下，我用哈希表勾勒出一个小算法：形成 10 个 bin，每个数字一个。然后，对于每个数字，将（唯一地）该数字的 ID 放入每个 bin 中，对应于它所具有的每个数字。这个操作是O(n*k)，k是数字的位数。最后，要形成所有对，在每个 bin 中取成对的数字。要删除可能的双倍数，请将每对 (a,b) 与 a

我认为最坏的情况实际上是 O(n^2); 事实上，我确实认为这一步必须具有 O(n^2) 的复杂性，因为您想要获取所有对（最大 n*(n+1)/2）。所以最终的复杂度确实是二次的。**

# c# - 如何从字符串c#中提取数字

> ID：11499159
> 
> 赞同：0
> 
> 时间：2012-07-16T06:34:36.203
> 
> 标签：c#

我有一个字符串

```
"transform(23, 45)" 
```

我必须从这个字符串中提取 23 和 45，我做到了

```
var xy = "transform(23,45)".Substring("transform(23,45)".indexOf('(') + 1).TrimEnd(')');
var num = xy.Split(','); 
```

我正在使用 c#。在c#中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T06:37:09.687

使用正则表达式：

```
string sInput = "transform(23, 45)";
Match match = Regex.Match(sInput, @"(\d)+",
              RegexOptions.IgnoreCase);

if (match.Success)
{
    foreach (var sVal in match)
             // Do something with sVal
} 
```

[您可以在此处](http://oreilly.com/windows/archive/csharp-regular-expressions.html)阅读有关正则表达式的更多信息。使用[RegExr](http://gskinner.com/RegExr/)进行培训，它有很大帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:39:41.587

好吧，一个简单的正则表达式字符串是`([0-9]+)`，但您可能需要定义其他表达式约束，例如，您在做什么来处理字符串中的句点、逗号等？

```
var matches = Regex.Matches("transform(23,45)", "([0-9]+)");
foreach (Match match in matches)
{  
    int value = int.Parse(match.Groups[1].Value);
    // Do work.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:53:43.677

使用`Regex`：

```
var matches = Regex.Matches(inputString, @"(\d+)"); 
```

解释：

```
\d    Matches any decimal digit.

\d+   Matches digits (0-9) 
      (1 or more times, matching the most amount possible) 
```

并用于：

```
foreach (Match match in matches)
{  
    var number = match.Groups[1].Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:46:00.827

这会做到的

```
string[] t = "transform(23, 45)".ToLower().Replace("transform(", string.Empty).Replace(")", string.Empty).Split(','); 
```

# iphone - 在 imagePickerController:didFinishPickingMediaWithInfo 之后关闭 Modalview:

> ID：11499160
> 
> 赞同：0
> 
> 时间：2012-07-16T06:34:39.887
> 
> 标签：iphone, objective-c, uiimagepickercontroller, dismiss, modal-view

我有一个 ViewController (VC1)，它以模态方式打开另一个 ViewController (VC2)，该 ViewController (VC2) 嵌入在 NavigationController (NavC1) 中。VC2 用作源选择视图，供用户选择不同的源，例如内置的照片库。当用户在 VC2 中选择照片库时，我正在打开 Apple 的 imagePicker。

`VC1 --(modal)--> NavC1 ----> VC2`

在 imagePickerdidFinish 中，我想关闭之前模态显示的 VC2。实际上这个方法看起来如下。

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    UIImage* image = [info objectForKey:UIImagePickerControllerOriginalImage];

    ...

    NSError* error;
    if([UIImageJPEGRepresentation(image, 0.5) writeToFile:path options:NSDataWritingFileProtectionComplete error:&error] == NO)
    {
        NSLog(@"Saving image to file failed with error %@",[error localizedDescription]);
    }

    picker.delegate = nil;
    [self dismissModalViewControllerAnimated:YES];
    ...
} 
```

到目前为止我已经尝试过：

*   我试图使用父导航控制器将其关闭
*   我已经在`prepareForSegue:`VC1 中存储了对 VC2 的引用，并在 imagePicker 完成后将委托从 VC2 传递回 VC1。在这种方法中，我试图简单地手动关闭模态视图（`[self.myModalView dismissModalViewControllerAnimated:YES]`）

有人对我有什么建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:47:01.310

如果你要来VC2`[self.navigationController PushViewController:VC2Object animated:YES];`那么你需要弹出它，即`[self.navigationController popViewController];`

如果您届时将来到 VC2，`[self.navigationController presentedViewController];`则需要`[self dismissModalViewControllerAnimated:YES];`

因此，请检查您如何在内存中加载 VC2 viewController。

# sdk - Azure - IISConfigurator.exe 已停止工作

> ID：11499163
> 
> 赞同：2
> 
> 时间：2012-07-16T06:34:51.407
> 
> 标签：sdk, azure

我已于 2012 年 6 月安装了适用于 .NET 的 Windows Azure SDK，当我尝试在本地运行具有 Web 角色的项目时，我收到以下错误消息：

“IISConfigurator.exe 已停止工作”

在事件查看器中，我发现以下消息：

故障桶，类型 0 事件名称：CLR20r3 响应：不可用 Cab Id：0

问题签名：P1：iisconfigurator.exe P2：1.7.0.0 P3：4fcaabb8 P4：System.Management P5：2.0.0.0 P6：4ca2baf0 P7：32f P8：12b P9：System.IO.FileNotFoundException P10：

附件：C:\Users\gert.vanmeerbergen\AppData\Local\Temp\WERB2EA.tmp.WERInternalMetadata.xml

这些文件可能在此处可用：C:\Users\gert.vanmeerbergen\AppData\Local\Microsoft\Windows\WER\ReportArchive\AppCrash_iisconfigurator._26305d6c2cb0448de956b81b6cbdbc2cdc9158f9_2000b8e3

分析符号：重新检查解决方案：0 报告 ID：aeff36bf-cf0f-11e1-b2df-74de2b9a4969

我已经尝试重新安装 Windows Azure SDK，但这没有帮助。

关于如何解决这个问题的想法？

谢谢。

格特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T21:24:19.663

由于未知的原因，安装 IIS 管理控制台为我解决了这个问题。

我找到了这篇文章： http: [//flummox-engineering.blogspot.com/2012/07/iisconfiguratorexe.html](http://flummox-engineering.blogspot.com/2012/07/iisconfiguratorexe.html)，但我不需要安装“Internet Information Services Hostable Web Core”，只需要安装管理控制台。

我正在运行 w8

![在此处输入图像描述](../Images/7a172525ee1b1b7ac96916ee7224dc11.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:13:00.170

尝试使用 Web 角色运行 ASP.NET MVC 3.0 应用程序时遇到了同样的问题。对我来说快速修复是右键单击 VS 并选择以管理员身份运行。这样做让我可以在 Google Chrome 或我机器上安装的任何其他浏览器中运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T19:16:54.007

此问题与 Windows Azure 没有任何直接关系，唯一可以链接此问题的方法是因为它与 IISConfigurator.exe 一起出现。

你可以做的是在你的机器上创建一个新的管理员用户，看看你是否仍然看到新用户的问题，我认为问题不应该出现在新用户身上。

根据上述崩溃报告，您最好的选择是清理所有用户特定文件、缓存等（清理 appdata\local*），然后重新启动机器。这应该可以解决您的问题。

# c++ - 需要一个用于通过 NAT 遍历的 Https 服务的 C++ 库？

> ID：11499164
> 
> 赞同：3
> 
> 时间：2012-07-16T06:34:55.703
> 
> 标签：c++, http, servlets, traversal, nat

我正在使用 C++ 开发一个项目，基本上，我需要能够在不同平台（Win、Mac、Linux 等）上通过 https（或可能是 sftp）短暂地（比如 1 次使用）托管单个文件可能的）。该库需要与我的 LGPL 许可证兼容，并且最好需要与路由器后面的广域网一起使用。如果没有，我将不得不要求我的用户手动进行端口转发。

我意识到这是一种奇怪的想法，NAT Traversal + HTTP，但我只是想知道是否有人知道一个好的库或一组库可以做到这一点？如果没有，我可能不得不自己写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:53:06.247

您可以查看[GNU libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)（LGPL 许可证），这是一个用于嵌入到应用程序中的跨平台 HTTP 服务器库。上手相当容易。

对于端口转发部分，您可以查看[MiniUPnP](http://miniupnp.free.fr/)（BSD 许可证），我没有使用过这个库，也不能保证它可以正常工作。

任何 UPnP 库都可以解决问题，基本步骤是：

1.  在本地计算机上启动 HTTP 服务器
2.  打开本地计算机上的端口
3.  使用UPnP请求网关转发端口

如果第 2 步或第 3 步失败，您需要向用户提供如何操作的说明（将其发送到[portforward.com](http://portforward.com/english/routers/port_forwarding/routerindex.htm)）。

# jquery - 重叠元素中的目标元素

> ID：11499169
> 
> 赞同：0
> 
> 时间：2012-07-16T06:35:13.310
> 
> 标签：jquery, jquery-selectors

在我的项目中，我需要创建一个 html5 CMS，我的问题是如何定位重叠元素中的元素？喜欢

```
<div id='L1'>
  <!--some text -->
  <div id='L2'>
    <!--some text -->
    <div id='L3'>
         <!--some text -->
    </div>
    <div id='L4'>
         <!--some text -->
    </div>
  </div>
</div> 
```

我想针对 L1、L2、L3 和 L4。现在问题来了，我可以使用 $(L1, L1 *) 来定位 L1 中的每个元素，包括 L1 并为它们绑定“click”事件处理程序。

但是，当我单击时，比如说 L4，不仅会出现 L4 的内容，还会出现 L1 和 L2。我想查看仅包含该元素的内容，不需要 is 的父级，我该怎么办？

更新：我通过 ajax 加载一个 Temple 容器，并为它们绑定事件处理程序

```
$('#load_area').load(file,function(){
$('#load_area *').click(
    function(){
        $('#edit_area').append($(this).html());//display what I have clicked
    }
);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:11:06.677

您的代码以这种方式运行的原因是您的事件正在冒泡 DOM，为了防止这种行为，您可以执行以下操作之一

```
$('#load_area').load(file,function(){
$('#load_area *').click(
    function(event){
        event.stopPropagation();
        $('#edit_area').append($(this).html());//display what I have clicked
    }
);
}); 
```

或者

```
$('#load_area').load(file,function(){
$('#load_area *').click(
    function(){
        $('#edit_area').append($(this).html());//display what I have clicked
        return false; //event.stopPrpagation() + event.preventDefault()
    }
);
}); 
```

# iphone - 如何检测aurioTouch项目中最低和最高频率的值

> ID：11499171
> 
> 赞同：2
> 
> 时间：2012-07-16T06:35:19.327
> 
> 标签：iphone, ios, audio, frequency, frequency-analysis

> **可能重复：**
> [如何从 FFT 结果中获取频率](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result)

我正在研究[aurioTouch2](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)示例代码。在绘图视图函数中，总是调用一个函数来计算 fft 数据，因此我们可以计算不同频率的功率。

```
Boolean FFTBufferManager::ComputeFFT(int32_t *outFFTData)
{
    if (HasNewAudioData())
    {

        //Generate a split complex vector from the real data
        // real1 = -0.005138, real2 = -0.005010;     r = -0.005138, im = -0.005010   
        vDSP_ctoz((COMPLEX *)mAudioBuffer, 2, &mDspSplitComplex, 1, mFFTLength);

        //Take the fft and scale appropriately
        // FFTSetup mSpectrumAnalysis - koefficients
        vDSP_fft_zrip(mSpectrumAnalysis, &mDspSplitComplex, 1, mLog2N, kFFTDirection_Forward);
        vDSP_vsmul(mDspSplitComplex.realp, 1, &mFFTNormFactor, mDspSplitComplex.realp, 1, mFFTLength);
        vDSP_vsmul(mDspSplitComplex.imagp, 1, &mFFTNormFactor, mDspSplitComplex.imagp, 1, mFFTLength);

        //Zero out the nyquist value
        mDspSplitComplex.imagp[0] = 0.0;

        //Convert the fft data to dB
        // calculate complex number abs, write to tmpData
        Float32 tmpData[mFFTLength];
        vDSP_zvmags(&mDspSplitComplex, 1, tmpData, 1, mFFTLength);

        //In order to avoid taking log10 of zero, an adjusting factor is added in to make the minimum value equal -128dB
        vDSP_vsadd(tmpData, 1, &mAdjust0DB, tmpData, 1, mFFTLength);
        Float32 one = 1;
        vDSP_vdbcon(tmpData, 1, &one, tmpData, 1, mFFTLength, 0);

        //Convert floating point data to integer (Q7.24)
        vDSP_vsmul(tmpData, 1, &m24BitFracScale, tmpData, 1, mFFTLength);
        for(UInt32 i=0; i<mFFTLength; ++i)
            outFFTData[i] = (SInt32) tmpData[i];

        OSAtomicDecrement32Barrier(&mHasAudioData);
        OSAtomicIncrement32Barrier(&mNeedsAudioData);
        mAudioBufferCurrentIndex = 0;
        return true;
    }
    else if (mNeedsAudioData == 0)
        OSAtomicIncrement32Barrier(&mNeedsAudioData);

    return false;
} 
```

问题是如何获得我在屏幕上显示的各种频率？我的意思是，我有不同音频频率的电源阵列。我怎么能理解，例如最低频率的值是多少？

**更新以表明我的观点：**

我知道，最低阈值（最低频率）是 outFFTData[0]，最高的是 outFFTData[last]。但我不知道，例如，数字中的频率与 outFFTData[0] 相关。outFFTData[0] 是否与 16Hz 相关；outFFTData[last] 是否与 22 kHz 相关？

现在我认为，outFFTData[0] 与人能听到的最低音频频率有关；和 outFFTData[last] 与人可以听到的最高音频频率有关。

我错了吗？

**更新 2**

我在[这里查看了](https://stackoverflow.com/questions/4364823/how-to-get-frequency-from-fft-result/4371627#4371627)[Paul R](https://stackoverflow.com/users/253056/paul-r)代码。它确实显示了几乎所有内容。但是，如果我错了，请纠正我：

在这段代码中：

```
//Generate a split complex vector from the real data
        // real1 = -0.005138, real2 = -0.005010;     r = -0.005138, im = -0.005010   
        vDSP_ctoz((COMPLEX *)mAudioBuffer, 2, &mDspSplitComplex, 1, mFFTLength);
//Take the fft and scale appropriately
        // FFTSetup mSpectrumAnalysis - koefficients
        vDSP_fft_zrip(mSpectrumAnalysis, &mDspSplitComplex, 1, mLog2N, kFFTDirection_Forward);
        vDSP_vsmul(mDspSplitComplex.realp, 1, &mFFTNormFactor, mDspSplitComplex.realp, 1, mFFTLength);
        vDSP_vsmul(mDspSplitComplex.imagp, 1, &mFFTNormFactor, mDspSplitComplex.imagp, 1, mFFTLength); 
```

在这段代码 `mFFTLength = mAudioBufferLen / 2;`中，我认为，频率的最大值将在 mDspSplitComplex 中，`index = mFFTLength - 1` 或者我错了，频率的最大值将在 mDspSplitComplex 中`index = mFFTLength / 2 - 1`？

**Update 3**

I have very simular issue [Why do we use only the first buffer in aurioTouch project](https://stackoverflow.com/questions/11503139/why-do-we-use-only-the-first-buffer-in-auriotouch-project). May be anyone knows the answer.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:47:31.477

There will be energy at some level in *all* of the FFT output bins - you need to decide upon a threshold value and then find the bins whose magnitude exceeds this threshold.

As for interpreting the corresponding frequency for each output bin, see [this excellent answer](https://stackoverflow.com/a/4371627/253056).

# visual-studio-2012 - 在 Metro 应用程序中创建 WCF 应用程序

> ID：11499177
> 
> 赞同：0
> 
> 时间：2012-07-16T06:35:49.880
> 
> 标签：visual-studio-2012

有没有办法在 Visual Studio 2012 Metro 应用解决方案文件中创建 WCF 服务？当我尝试添加一个新项目时，我没有看到 [WCF 服务] 模板。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:52:04.383

I don't think this is a supported scenario for Modern UI applications.

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/43df6c8f-f1e3-4aba-af0a-7c4e1db477b6/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/43df6c8f-f1e3-4aba-af0a-7c4e1db477b6/)

# c++ - 我有反作弊程序 SSDT 挂钩地址，但如何恢复它们？

> ID：11499184
> 
> 赞同：1
> 
> 时间：2012-07-16T06:36:05.910
> 
> 标签：c++, debugging

我拥有游戏中反作弊程序的所有 SSDT 挂钩地址（来自内核侦探）。但我的代码似乎无法更改地址十六进制内容。请帮忙。谢谢。

上钩地址：

```
Address             : 0x805D2C44
Location            : ntkrnlpa.exe [PAGE]
Len                 : 5
State               : Relative Call :: call 0x8931C5B0
Current Value       : E8 67 99 D4 08 
Original Value      : E8 95 88 FE FF 
Destination Module  : 0x8931C5B0 :: - 
```

代码：

```
#define NTKRNLPA01 0x805D2C44
...
MemRelace((void *)(NTKRNLPA01), (void *)"\xE8\x95\x88\xFE\xFF", 5) 
```

内存替换功能：

```
bool MemReplace(VOID *lpMem, VOID *lpSrc, DWORD len)
{
  DWORD lpflOldProtect, flNewProtect = PAGE_READWRITE;

  unsigned char *pDst = (unsigned char *)lpMem, 

  *pSrc = (unsigned char *)lpSrc;

  if (VirtualProtect(lpMem,len,flNewProtect,&lpflOldProtect))
  {
      while(len-- >0) *pDst++ = *pSrc++;
      VirtualProtect(lpMem,len, lpflOldProtect,&lpflOldProtect);
      FlushInstructionCache(GetCurrentProcess(), lpMem, len);
      return 1;
  }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:00:38.430

该地址驻留在内核地址空间中，如果您自己不在内核领域，您将无法触摸它（即：没有 ring0 驱动程序，此任务是不可能的）。

# c# - DateTimePicker DataGrid 上的日期

> ID：11499187
> 
> 赞同：0
> 
> 时间：2012-07-16T06:36:19.597
> 
> 标签：c#, .net, datetime, datagridview, datetimepicker

```
mtxtBdate.Value = dataGridView1.SelectedRows[0].Cells["Birthdate"].Value.ToString(); 
```

我在所有其他文本框中的 DataGridView 上使用此语法 - 但有人可以告诉我如何调整此 DatePicker 控件语法吗？我想获取用户`DateTimePicker`在数据网格上显示的日期上选择的日期。

```
mtxtfname.text = datagridView1.SelectRows[0].Cells["fIrstname"].value.ToString(); 
```

此语法适用于文本框，但适用于数据选择器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:35:26.690

Make use of the combination of a `<asp:TextBox>` and `<asp:CalendarExtender>` control that targets a textbox where the selected date will be added

```
<asp:TextBox ID="txtBirthdate" runat="server"  
            CssClass="contentfield" Height="16px" MaxLength="12" 
             width="150px" Wrap="False"></asp:TextBox>
        <asp:CalendarExtender ID="CalendarExtender1" runat="server" 
            Format="dd MMM yyyy" PopupButtonID="imgSummaryCashFlowDate" 
            TargetControlID="txtBirthdate">
        </asp:CalendarExtender> 
```

This will work exactly the same as a normal textbox in your gridview and you will be able to pull the date from the textbox exactly the same manner as you have done orignally.

# java - 为什么我的代码无法实时更新 JTextArea？

> ID：11499189
> 
> 赞同：1
> 
> 时间：2012-07-16T06:36:30.337
> 
> 标签：java, jtextarea, bufferedreader, processbuilder, bufferedinputstream

嗨，我是 Java 编程新手。我正在尝试从 Java 执行外部命令，然后在 JTextArea 中显示命令提示符输出`in real time`。该外部程序将每秒生成 1 行输出，然后在 10 秒后退出。

以下是我的 Java 代码：

`original codes have been deleted to save space after reading Kumra's answer`

当我在命令提示符窗口中手动运行 program.exe 时，输出会实时更新，如下所示：

```
<some warning message of the .exe program
    which should not affect the output of the program> // shown at t=0
output line 1   //shown at t=1
output line 2   //shown at t=2
output line 3   //shown at t=3
output line 4   //shown at t=4
output line 5   //shown at t=5
output line 6   //shown at t=6
output line 7   //shown at t=7
output line 8   //shown at t=8
output line 9   //shown at t=9
output line 10  //shown at t=10

Done. //shown at t=10. 
```

当我在上面运行我的 Java 程序时，我认为 JTextArea 将实时更新以显示命令提示符输出。不幸的是，它不起作用。实际输出是这样的：

```
<some warning message of the .exe program
    which should not affect the output of the program> // shown at t=0 
```

从 t=0 到 t=10，JTextArea 卡在上面的输出中。在 t=11 时，它突然显示完整的输出：

```
<some warning message of the .exe program
    which should not affect the output of the program> // shown at t=0
output line 1   //shown at t=11
output line 2   //shown at t=11
output line 3   //shown at t=11
output line 4   //shown at t=11
output line 5   //shown at t=11
output line 6   //shown at t=11
output line 7   //shown at t=11
output line 8   //shown at t=11
output line 9   //shown at t=11
output line 10  //shown at t=11

Done. //shown at t=11 
```

我可以知道我的代码有什么问题吗？谁能教我如何在 JTextArea 中显示命令提示符输出`in real time`？谢谢。

**编辑 1：**
我已经根据 Kumar 的回答编辑了代码，但它仍然无法正常工作。下面是最新的代码。

MyUI.java

```
public class MyUI extends JFrame
implements ActionListener, KeyListener, ChangeListener, WindowListener
{
    ...
    private JTextArea output;

    public void showMessage(String message)
    {
        output.append(message + "\n");
        output.setCaretPosition(output.getDocument().getLength());
    }
    ...

    public void actionPerformed(final ActionEvent e)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                if (xxxxx)
                {
                    myThreadInstance = new MyThread(xx,xxx,xx,xx,xx);
                    myThreadInstance.start();
                }
            }
        }
    }

} 
```

MyThread.java

```
public class MyThread extends Thread
{
    ...
    public MyUI myFrame;
    ...

    public void run
    {
        try
        {
            String command = "program.exe arg1 arg2 arg3 arg4";

            List<String> items = Arrays.asList(command.split("\\s+"));

            builder = new ProcessBuilder(items);
            builder.redirectErrorStream(true);

            process = builder.start();

            input = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String inputline = null;
            while ((inputline = input.readLine()) != null)
            {
                myFrame.showMessage(inputline);
            }
        }
        catch(){}
        finally{}
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:45:25.040

试试这个...

1.  始终保持 UI 在 UI 线程上工作，而 Non-UI 在 Non-UI 线程上工作。
2.  Event Dispatcher Thread是UI线程，负责GUI。
3.  您正在 UI 线程上执行从 t=0 到 t=10 的计数过程，这就是您*在 t=11 之前看不到任何输出的原因。*
4.  创建一个*单独的线程*对cmd进行计数，或者使用`SwingWorker`Swing中提供的同步UI和Non-UI线程。

# c# - 我如何编写一个 Windows 服务来管理其他 Windows 服务？（可以吗？）

> ID：11499190
> 
> 赞同：0
> 
> 时间：2012-07-16T06:36:32.313
> 
> 标签：c#, windows, windows-services

我想编写管理另一个窗口服务并检查它是停止还是运行的窗口服务。

如果它停止，那么我的根服务将再次启动服务。

我的根服务在特定时间运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:43:19.723

看一下[ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类：

> 表示 Windows 服务，并允许您连接到正在运行或已停止的服务、操作它或获取有关它的信息。

* * *

**例子：**

要启动服务，您将使用如下代码：

```
ServiceController service = new ServiceController("YourServiceName");
service.Start() 
```

* * *

该类有一个[Status](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.status.aspx)属性，您可以使用它来检查您要监视的服务是正在运行还是已停止。

* * *

**选择：**

您还可以使用命令行工具来检查/启动/停止服务。

检查服务是否正在运行：

```
sc query YourServiceName 
```

启动服务：

```
net start YourServiceName 
```

停止服务：

```
net stop YourServiceName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:43:32.590

[您可以使用ServiceController](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicecontroller.aspx)类控制其他服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:43:18.080

创建一个监视您的服务的 windows 服务。您服务中的代码将是

```
 var Service = new ServiceController(servicetowach);
                    if (Service.Status != ServiceControllerStatus.Running
                        && Service.Status != ServiceControllerStatus.StartPending)
                    {
Service.Start();
} 
```

其中 ServiceToWatch 是您要监视的服务的名称（无论是否运行）

# php - 带数组的php foarch

> ID：11499203
> 
> 赞同：0
> 
> 时间：2012-07-16T06:37:29.077
> 
> 标签：php, foreach

我需要为我的代码更改什么？回声只有 1 个字母`m`

这是我的代码：

```
$string = 'mars@email.com,123,12,1|art@hur.com,321,32,2';

$output = array();

foreach (explode('|', $string) as $key => $person) {
    $output[] = array(
        'email'   =>    $person[0],
        'score'   =>    $person[1],
        'street'  =>    $person[2],
        'rank'    =>    $person[3]
    );
    echo $output[0]['email']; 
} 
```

输出 ：`m`

输出应该是：

```
$email1  = mars@email.com
$score1  = 123
$street1 = 12
$rank1   = 1

$email2  = art@hur.com
$score2  = 321
$street2 = 21
$rank2   = 2 
```

是否可以执行此代码来输出 email1 和 email2？我的代码是正确的还是我需要改变一些东西？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:42:48.190

您需要使用嵌套循环；第一个迭代管道分隔的数据，第二个迭代逗号分隔的条目。

```
$string = 'mars@email.com,123,12,1|art@hur.com,321,32,2';

$entries = explode('|', $string);
foreach ($entries as $i => $entry) {
    $parts = explode(',', $entry, 4);
    if (count($parts) < 4) {
        // not enough parts, throw an error or something
    }
    printf('$email%d  = %s%s', $i+1, $parts[0], PHP_EOL);
    printf('$score%d  = %s%s', $i+1, $parts[1], PHP_EOL);
    printf('$street%d = %s%s', $i+1, $parts[2], PHP_EOL);
    printf('$rank%d   = %s%s', $i+1, $parts[3], PHP_EOL);
    echo PHP_EOL;
} 
```

这里的例子 - [http://codepad.viper-7.com/82HbtT](http://codepad.viper-7.com/82HbtT)

# html - 如何在底部显示粘性回复表单？

> ID：11499204
> 
> 赞同：3
> 
> 时间：2012-07-16T06:37:29.363
> 
> 标签：html, css

我将如何显示用于聊天的粘性回复表单？标记是这样的：

```
<div id="container">
  <div class="messages_container">
    <ol class="messages">
      <li>sample message here</li>
      <li>sample message here</li>
      <li>sample message here</li>
    </ol>
  </div>
  <div class="reply">
    <form>
      <fieldset>
        <textarea cols="60" rows="1" name="message"></textarea>
        <input type="checkbox" checked="checked">
        <input type="submit" value="Submit"/>
      </fieldset>
    </form>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:44:37.507

假设您的意思是您希望表单粘在页面底部，而不管滚动位置如何。我会使用 CSS 将固定定位应用于包含元素。

```
.stuck {
    position: fixed;
    bottom: 0;
    z-index: 100;
}

<div class="stuck">
    <!-- Form goes here. -->
</div> 
```

# php - 在php中处理多个提交

> ID：11499208
> 
> 赞同：0
> 
> 时间：2012-07-16T06:37:53.263
> 
> 标签：php, javascript, mysql, submit

这是我的代码。

```
 <?php
    $qry5=mysql_query("SELECT * FROM `questions` WHERE `questnTime`=curdate()");
    $quest=mysql_fetch_array($qry5);
    ?>
    <form id="form" name="form" action="">
    <textarea name="questn" id="questn" readonly="readonly" cols="45" rows="5">
         <?php echo $quest['questnId']; ?>.&nbsp
         <?php echo $quest['question'];?>
    </textarea>
    <input type="submit" class="myButton" name="option" 
         onclick="handleSubmit(this)" value="<?php echo $quest['optiona'];?>"/>
    <input type="submit" class="myButton" name="option" 
         onclick="handleSubmit(this)" value="<?php echo $quest['optionb'];?>"/>
    <input type="submit" class="myButton" name="option" 
         onclick="handleSubmit(this)" value="<?php echo $quest['optionc'];?>"/>
    <input type="submit" class="myButton" name="option" 
         onclick="handleSubmit(this)" value="<?php echo $quest['optiond'];?>"/>
    </form>

   <?php
  if($quest['answer']==$_GET['option']){
  $option=$_GET['option'];
  } 
```

Javascript代码：

```
 <script type="text/javascript">
  function handleSubmit(current){
  var list = document.getElementsByName('option');

  for(var i=0;i<list.length;i++){
    if(list[i]!=current)
      list[i].disabled=true;
  }

  alert('all disabled');
  }
  </script> 
```

CSS：

```
 <style>
  input.myButton{
  background-image: url('option.png');
 background-color:#FFF;
 height:32;
 width:32;
 border-style:hidden;
 color: #FFFFFF;
   }
 </style> 
```

我需要的是当用户单击一个选项时，必须禁用所有其他选项。单击选项时，我想获取该值。我也不希望页面被刷新。这该怎么做？以下代码不会禁用这些选项。请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:59:01.140

在这种情况下，不要进行多次提交，将它们作为一个按钮，然后单击时禁用除单击一个之外的所有内容，并将输入类型更改为提交。

# css - 浏览器中的 CSS 样式表，具有匿名用户

> ID：11499211
> 
> 赞同：0
> 
> 时间：2012-07-16T06:37:59.577
> 
> 标签：css, drupal, drupal-7, opera

我有网站，它可以在所有浏览器中完美运行，除了歌剧。主页工作正常，但是当我打开任何节点页面（drupal 7）时，Opera 只是根本不下载 css 文件。试图清除缓存，但没有奏效。有什么想法该怎么做？

PS我只是想，登录用户的问题。如果您以管理员身份登录，则可以正常工作，否则请不要下载 css

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:55:18.970

此问题是由未设置匿名用户权限的 krumo() 引起的。在我从我的节点中删除它之后——xx.tpl 一切都变好了。

# javascript - 如果字符更多用于字段，则html页面的标题将div调整为向左浮动

> ID：11499215
> 
> 赞同：0
> 
> 时间：2012-07-16T06:38:32.797
> 
> 标签：javascript, jquery, html, css

我这里的情况如下：

```
 <html lang="en">
    <head>
        <meta charset="utf-8">
        <title>My Header</title>

        <style>
            /* Global */
            * {
                margin: 0;
            }
            html, body {
                height: 99%;
                margin-top:5px;margin-left:5px;
                margin-right:5px;
            }
            /* Header Menu*/
            .task-bar{
                width:80px;
                background-color:#fff;
                border:1px solid green;
                position: absolute;
            }

            .task-bar span{
                color:#000;
                display:block;
                font-size:8pt;
                cursor:pointer;
                text-decoration:none;
            }

            .task-bar span:hover{
                color:red;
            }

            /* Header */
            .container{
                min-height: 100%;
                height: auto !important;
                height: 100%;
                margin: 0 auto -3em;
                width:100%;
                font-family:Segoe UI;
                color:#fff;
            }
        </style>

        <script type="text/javascript">
            $(document).ready(function(){ 
                 $('.task-icon').click(function(){
                        $(".task-bar").slideToggle();
                 });
            });
        </script>
    </head>
    <body>
    <!-- Header Div -->
    <div class="container">
        <table width="100%" style="background-color:#333030;">
                <tr>
                    <td>
                        <div style="padding-top:15px;padding-left:20px;font-size:36px;">Header Header Header Header</div>
                    </td>
                    <td style="padding-top:10px;">
                        <div style="padding-left:10px;color:#FFFFFF;" id="userRole">
                            UserName<br/>
                            <i>Role Role Role</i>
                        </div>
                    </td>
                    <td>
                        <div class="task-icon"><img src="profile.png"/></div>
                        <div class="task-bar" style="display:none;">
                            <span id="">&nbsp;Change Role</span>
                            <span id="">&nbsp;Profile</span>
                            <span id="">&nbsp;Preferences</span>
                            <span id="logout">&nbsp;Sign Out</span>
                        </div>
                    </td>
                </tr>
            </table>
    </div>
    </body>
</html> 
```

我必须动态显示用户名和角色，它可以是更少的字符，也可以更多......所以它没有调整我想要的正确方式......它应该接近 profile.png 但是当角色/用户名是 20 -25 个字符 den 它会变远或变形。我想要一些东西坚持profile.png，如果它是更多的字符，它应该浮动：左边并坚持profile.png。

```
Usernameeeeeeeeeeee - Profile.png
Role                -   

OR

username                - Profile.png
Roleeeeeeeeeeeeeeeeeeee - 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:43:26.753

因为表这就是原因。

但严肃地说，如果这是一个问题，请将两者合并为一个 td。

# embedded - 什么是微控制器中的上拉和下拉电阻

> ID：11499223
> 
> 赞同：1
> 
> 时间：2012-07-16T06:38:52.417
> 
> 标签：embedded

为什么上拉和下拉电阻是接在引脚上的。如何将引脚配置为上拉和下拉或中断源。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:12:34.627

对于输出，它在 GPIO 处于复位状态（通常是高阻抗输入）时为引脚提供定义的逻辑状态，因此不会将输出驱动到有效逻辑状态。

对于输入，是否需要由连接的设备确定，该设备也可能在启动时为高阻抗或“浮动”，在这种情况下，上拉/下拉将确保有效电平。

具有开漏/开集输出的器件需要上拉/下拉。

您至少需要对电子学有基本的了解才能在嵌入式系统开发中取得成功（除非您所需要的只是在一个现成的板上，无需修改或添加。给自己一份*Horowitz & Hill 的电子艺术*或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:27:18.973

有些设备的设计只能驱动 1 或驱动 0，有些设备可以同时驱动两者。例如，您将使用类似 spi 的共享线路，如果您是被寻址的设备，您拉零，一次只有一个设备拉零。由于这条线要么是浮动的，要么是零，所以在剩下的时间里你需要一个上拉电阻，把它想象成一个球或弹簧上的东西，当你需要时，弹簧将球保持在天花板附近球在地面上它被弹簧拉下，弹簧相当弱。当球被释放时，弹簧将其拉回天花板。在这些类型的公共汽车上也有类似的事情。

# aes - 使用 pycrypto 进行 AES 解密

> ID：11499224
> 
> 赞同：1
> 
> 时间：2012-07-16T06:38:59.553
> 
> 标签：aes, pycrypto

作为一项自学练习，我正在尝试学习如何使用一些 pycrypto 库。我需要使用 AES 解密 CBC_MODE 中的密文字符串。我给出了密文、密钥和IV。这是我编写的代码：

```
from Crypto.Cipher import AES

mode = AES.MODE_CBC
key = "a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1"
ciphertext = "a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1a1";

iv = ciphertext[:32] 
ciphertext = ciphertext[32:] 
decryptor = AES.new(key, mode, iv)
plaintext = decryptor.decrypt(ciphertext)
print plaintext 
```

当我运行它时，我收到以下错误：

> ValueError：IV 必须为 16 字节长

我知道 IV 字符串是 32 个十六进制字符，因此是 16 个字节。我认为这可能是一个打字问题，但我不知道如何纠正它。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T17:29:05.773

您的字符串仅包含十六进制字符，但它们仍然是纯字符串，因此每个字符都很重要。

所以你的 IV 字符串是 32 字节长，因为你从`ciphertext`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T02:23:19.070

我怀疑你是对的，这取决于打字。尝试其中之一：

iv = binascii.unhexlify(密文[:32])

或者

iv = long(密文[:32], 16)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T23:19:27.120

告诉计算机您正在处理十六进制。它把它当作一个字符串。iv = iv.decode('hex');

# jquery - 添加简单 Jquery 淡入/淡出时 IE8 中的不透明度问题

> ID：11499232
> 
> 赞同：0
> 
> 时间：2012-07-16T06:39:38.033
> 
> 标签：jquery, css, internet-explorer-8, opacity

我正在尝试对`JQuery Fadein/Fadeout`我的网站实施简单。所以我已经完成了这些步骤

查询

```
<script type="text/javascript">
    $(document).ready(function() {          
    $(".writereview").click(function(){

        $(".reviewpopup").fadeIn();
        $(".popupcontainer").fadeIn();

    });

    $(".popupclose").click(function(){

        $(".reviewpopup").fadeOut();
        $(".popupcontainer").fadeOut();

    });

    });

    </script> 
```

HTML

```
 <div class="reviewpopup" style="display: none; "></div>
   <div class="popupcontainer" style="display: none; ">
   <iframe src="feedback.html" frameborder="0" scrolling="no" width="475" height="510">               </iframe>
    <a href="#" class="popupclose"><img src="images/popupclose.jpg" alt="HoHo"></a> </div> 
```

CSS

```
.reviewpopup {

    display:none;
    width:100%;
    height:100%;
    overflow:hidden;
    background-color:#000;
    opacity:0.5;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"; 
    filter: alpha(opacity=50);              
    position:fixed;
    top:0;
    z-index:1001;   
        }

        .popupcontainer {
    width: auto;
    height:auto;
    display:none;
    position:absolute;
    top: 45px;
    left: 50%;
    margin-left: -280px;
    background-color:#FFF;
    z-index:1001;
    border-radius:10px;
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border:solid 5px #000;
    padding:20px;
         } 
```

**JQuery**在所有浏览器中都可以正常工作，但问题是，`Opacity is not working properly in IE8`. 我刚刚删除了 Jquery，它可以工作。我不知道这个**IE8 Opacity**和 Jquery 的确切原因是什么。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T19:04:46.400

`fadeIn()`覆盖 CSS`filter`值，因此当您调用`fadeIn`部分不透明元素时，您应该在回调中重置该值：

```
var pop = $('.reviewpopup'),
    filter = pop.css('filter'); // fadeIn overrides filter value in IE8; reset it
pop.fadeIn(function() {
    if (filter) pop.css('filter', filter);
}); 
```

# javascript - 如何覆盖默认的主干模型？

> ID：11499238
> 
> 赞同：1
> 
> 时间：2012-07-16T06:40:34.560
> 
> 标签：javascript, backbone.js, underscore.js, requirejs

我想覆盖默认的主干模型变量 (Backbone.Model) 以使用我自己的自定义验证方法 (isValid, validate) 并添加一些属性。

```
_.extend(Backbone.Model, {
    isValid: function() { // custom function },
    validate: function() { // custom logic }
});

var myModel = Backbone.Model.extend({
   // this adds for example properties to my modified Backbone model.
}); 
```

不幸的是，这不起作用......当我用 requirejs 加载“包装器，扩展”模块并创建一个新的模型实例然后调用 validate. 它说它不知道任何验证功能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:50:13.187

您必须扩展`Backbone.Model.prototype`而不是扩展`Backbone.Model`自身，因为所有方法都是构造函数的原型方法，而不是模型上的属性。尽管创建一个自定义 BaseModel 来扩展 Backbone.Model 并实现您的自定义逻辑可能是更好的主意，这样如果主干得到更新等，您将避免可能的冲突，即使在这种情况下它们不太可能发生，但它仍然被认为是更好的练习扩展基本的 Backbone 类，而不是修改它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T14:36:16.483

我更喜欢为项目做自定义模型，而不是“覆盖”不是 OOP。（最后可能是相同的，但如果我们尝试模仿 OOP，我觉得这更容易理解）。

检查我的示例，我将 YourAbstractModel 定义为 Backbone.Model 的一种扩展，然后我的所有模型都扩展了该抽象模型而不是 Backbone 模型。

```
var YourProject = {};
YourProject.YourAbstractModel = Backbone.Model.extend({
    customProperty1 : null, 
    customProperty2 : null, 
    isValid : function(){ },    
    specificUtility : function(){ } 
});

var YourModel1 = YourProject.YourAbstractModel.extend({
    customProperty1 : 'aaaaa'
});
var YourModel2 = YourProject.YourAbstractModel.extend({
    customProperty1 : 'bbbbb'
});

console.log( new YourModel1().customProperty1 );
console.log( new YourModel2().customProperty1 ); 
```

我的方式也很灵活，可以有多个抽象模型，不和Backbone的更新冲突，我觉得更接近可继承的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T18:20:20.053

您可以使用 thedersen [https://github.com/thedersen/backbone.validation的 Backbone.Validation 插件](https://github.com/thedersen/backbone.validation)

它非常有用且易于使用。您还可以将视图绑定到模型，以便您的视图具有未通过验证的特定模型属性的自定义错误属性。

# moodle - 用于创建/复制课程的 Moodle 2.x 任务自动化

> ID：11499240
> 
> 赞同：2
> 
> 时间：2012-07-16T06:40:49.300
> 
> 标签：moodle

在moodle中是否有一种以编程方式创建新课程和复制旧课程的好方法？目前我试图弄清楚moodles webservices有什么可能，因为cli脚本很糟糕。但似乎只有使用网络服务才能创建课程。复制一个是不可能的任务。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:16:10.580

对于站点管理员而言，自动课程备份在时间、CPU 使用率和存储方面的成本更高。使站点再次运行的恢复时间比站点备份要长。但是，教师和站点管理员可能会发现课程备份是一种创建可重复使用的“新”课程副本的方法。

使用默认的 Moodle 功能备份和恢复，这对您来说很容易，并且您还可以使用网络服务来创建课程。

# sql - 删除后 SQL Server 触发器与引用表冲突

> ID：11499242
> 
> 赞同：0
> 
> 时间：2012-07-16T06:40:54.773
> 
> 标签：sql, sql-server, triggers

我创建了一个触发器，它在更改后创建一个带有新行的新行`ID`。当我将触发器与一个表一起使用时，它可以工作，但是当我在引用另一个表的表上使用它时，我收到一个错误：

> DELETE 语句与 REFERENCE 约束冲突。

表格如下所示：

**表 1**：

```
ID       BEZEICHNUNG        MENGENEINHEIT        PREIS  .....
1        Harry Potter       Book                 20
2        iPod               Music                150 
```

**表2**：

```
DIENSTLEISTUNG_ID      RAUM_ID 
1                      2
2                      1 
```

**表 3**：

```
ID      Raumname ....
1       Elbe
2       Main 
```

我的触发器如下所示：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
   ON [dbo].[DIENSTLEISTUNG]
   AFTER  UPDATE
AS
BEGIN
 SET  NOCOUNT ON;

    DECLARE @MAX_ID INT;
    SELECT @MAX_ID=MAX(ID) FROM [DIENSTLEISTUNG];

    declare @tmp Table(ID  numeric, BEZEICHNUNG nvarchar(64), MENGENEINHEIT nvarchar(64), 
    PREIS numeric(19,5), BESCHREIBUNG nvarchar(64), VORLAUFZEIT numeric(10),
    AZ_MO nvarchar(22), AZ_DI nvarchar(22),AZ_MI nvarchar(22),AZ_DO nvarchar(22),AZ_FR nvarchar(22),
    AZ_SA nvarchar(22),AZ_SO nvarchar(22),DIENSTLEISTUNGSART_ID numeric(38),
    UPDATE_USER numeric(38), UPDATE_DATE datetime, RUESTZEIT numeric(38),
    PERMISSIONS numeric (38), KONTRAKTPOSITION numeric(38),ARTIKELNUMMER nvarchar(64),
    ANZAHL numeric(10), BUCHUNGSHINWEIS nvarchar(255), SONDERWUNSCH char(1),
    FLAG bit)

    insert into @tmp
    select
    ID, BEZEICHNUNG, MENGENEINHEIT, 
    PREIS, BESCHREIBUNG, VORLAUFZEIT,
    AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
    AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
    UPDATE_USER, UPDATE_DATE, RUESTZEIT,
    PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
    ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
    1 [flag] from deleted;

    delete T from DIENSTLEISTUNG T JOIN @tmp I
    ON T.ID=I.ID

SET IDENTITY_INSERT   [DIENSTLEISTUNG] ON
INSERT INTO [DIENSTLEISTUNG] (ID, BEZEICHNUNG, MENGENEINHEIT, 
    PREIS, BESCHREIBUNG, VORLAUFZEIT,
    AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
    AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
    UPDATE_USER, UPDATE_DATE, RUESTZEIT,
    PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
    ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
    FLAG)
SELECT @MAX_ID+ROW_NUMBER() OVER(ORDER BY ID) [ID],BEZEICHNUNG, MENGENEINHEIT, 
    PREIS, BESCHREIBUNG, VORLAUFZEIT,
    AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
    AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
    UPDATE_USER,GETDATE(),RUESTZEIT,
    PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
    ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
    0 
FROM INSERTED
union all
select * from @tmp

 SET IDENTITY_INSERT dbo.DIENSTLEISTUNG OFF
 SET  NOCOUNT OFF;
END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:07:24.467

发生这种情况的原因是，尽管您正在重新插入具有相同 ID 的行，但在您删除该行时，SQL 无法知道您将重新插入它以保持参照完整性。

看来此触发器的目的是不允许更新，并在进行更改时插入新行，因此我认为`INSTEAD OF`触发器将更适合您的需求。然后，您可以忽略对现有行所做的任何更改，并插入新行，避免任何删除，从而避免任何引用完整性问题。

```
ALTER TRIGGER [dbo].[DIENSTLEISTUNG_Update]
   ON [dbo].[DIENSTLEISTUNG]
   INSTEAD OF UPDATE
AS
BEGIN
    INSERT INTO [DIENSTLEISTUNG] (BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER, UPDATE_DATE, RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
        FLAG)
    SELECT  BEZEICHNUNG, MENGENEINHEIT, 
        PREIS, BESCHREIBUNG, VORLAUFZEIT,
        AZ_MO, AZ_DI,AZ_MI,AZ_DO,AZ_FR,
        AZ_SA,AZ_SO,DIENSTLEISTUNGSART_ID,
        UPDATE_USER,GETDATE(),RUESTZEIT,
        PERMISSIONS, KONTRAKTPOSITION,ARTIKELNUMMER,
        ANZAHL, BUCHUNGSHINWEIS, SONDERWUNSCH,
        0 
    FROM INSERTED

    UPDATE  DIENSTLEISTUNG
    SET     Flag = 1 
    FROM    DIENSTLEISTUNG 
            INNER JOIN INSERTED
                ON INSERTED.ID = DIENSTLEISTUNG.ID

END 
```

# grails - 使用绝对：true 图像时的 Grails 资源警告日志条目

> ID：11499243
> 
> 赞同：5
> 
> 时间：2012-07-16T06:41:02.073
> 
> 标签：grails, resources, absolute-path

使用 Grails 2.0.4。在构建电子邮件时，我使用了很多带有绝对路径的图像。每一个都会导致烦人的日志条目。有简单的解决方法吗？它们确实存在，只是资源插件似乎不喜欢绝对路径。这也发生在 localhost / dev 环境之外。

```
<img src="${resource(dir: 'images/brochure', file: 'arrow_up.png', absolute: 'true')}" alt="Up" /> 
```

结果是

```
WARN  resource.ResourceTagLib  - Invocation of <r:resource> for a resource that apparently doesn't exist: http://localhost:8080/images/brochure/arrow_up.png 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-07T00:56:59.367

与我一起为 Grails 2.1.x 及更高版本（包括最新的 2.3.x）工作的解决方案是将这些条目添加到 Config.groovy 中的 log4j 配置块中 - 无需更改其他代码。

```
 log4j = {
           //your other stuff ...
            error 'grails.app.services.org.grails.plugin.resource'
            error 'grails.app.taglib.org.grails.plugin.resource'
            error 'grails.app.resourceMappers.org.grails.plugin.resource'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T11:35:01.857

我知道这是一个老问题，但它似乎仍然是 Grails 2.3.x 的问题。`resource`关闭上方有评论`ResourceTagLib`说：

> @todo 这目前不适用于 absolute="true" 调用，它应该只是通过这些

为了删除日志中的警告，我覆盖了`resource`闭包，更改了这一点：

```
...
if (!info.debug && log.warnEnabled) {
    log.warn "Invocation of <r:resource> for a resource that apparently doesn't exist: ${info.uri}"
}
... 
```

对此：

```
...
if (attrs.absolute != true && !info.debug && log.warnEnabled) {
    log.warn "Invocation of <r:resource> for a resource that apparently doesn't exist: ${info.uri}"
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T19:02:04.183

仅当您在使用参数时尝试使用子目录时才会发生这种情况`dir`。您需要指定一个`uri`. 我假设它`dir`只能是一个单级目录。

您可以尝试以下方法（来自[插件文档](http://grails-plugins.github.io/grails-resources/guide/4.%20Using%20resources.html)）：

```
<r:img uri="images/logo.png" width="100" height="50"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-16T07:03:41.427

你正在使用'grails-resources'插件。它也有标签“资源”。尝试使用直接 G-tag：

```
<img src="${g.resource(dir: 'images/brochure', file: 'arrow_up.png', absolute: 'true')}" alt="Up" /> 
```

或使用资源插件中的 R-tag（推荐）：

```
<img src="${r.resource(uri: 'images/brochure/arrow_up.png')}" /> 
```

[在此处](http://grails-plugins.github.com/grails-resources/guide/4.%20Using%20resources.html#4.2%20Linking%20to%20images)获取更多信息

# java - 带有 ajax 更新的 JSF selectOneButton - 调用了 2 次 setter

> ID：11499244
> 
> 赞同：4
> 
> 时间：2012-07-16T06:41:04.420
> 
> 标签：java, ajax, jsf-2, primefaces

我在 WebSphere Application Server 8 上使用 Primefaces 3.2 和 ApacheMyfaces。

我有一个内部带有 ajax 更新的 selectOneButton。当我切换按钮时，我的设置器首先将值 (int) 设置为 0，然后设置为选定的值：

```
<p:selectOneButton value="#{graph.view}" id="view">
    <f:selectItem itemLabel="W" itemValue="1" />
    <f:selectItem itemLabel="M" itemValue="2" />
    <f:selectItem itemLabel="Y" itemValue="3" />
    <p:ajax event="change" update=":optform:datecol"/>
</p:selectOneButton> 
```

datecol 是我的表单（optform）中的另一个 selectComponent。

为什么 JSF 首先将值设置为 0，然后再设置为例如 2？

**解决方案** 这是一个 PrimeFaces selectOneButton 错误。[在此处](https://stackoverflow.com/questions/11611699/jsf-lifecycle-performed-2-times-with-primefaces-ajax)查看我的问题。

最好的问候投票

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:29:23.453

您所看到的可能是托管 bean`graph`在 JSF 生命周期的早期被实例化，并且仅在该`APPLY_REQUEST_VALUES`阶段的后期才为托管属性设置适当的值`view`。由于 Web 固有的无状态特性，托管 bean 无论范围如何，都会在每次请求后重新实例化。

有关更多信息，B​​alusC 有一篇关于调试 JSF 生命周期的精彩文章，其中逐步介绍了如何实现自定义 PhaseListener，这将帮助您理解和调试应用程序中的此类行为。

[http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html](http://balusc.blogspot.com/2006/09/debug-jsf-lifecycle.html)

# php - PHP：忽略额外的 ini 文件

> ID：11499246
> 
> 赞同：1
> 
> 时间：2012-07-16T06:41:19.557
> 
> 标签：php

我在加载其他 php.ini 文件时遇到问题。我指定了要使用的配置目录，但我不希望 PHP 在其他地方查找并加载其他 php.ini 或模块。事实证明，/etc/php.d 指定了不存在的模块，所以我在调用函数时总是出错。

如何告诉 PHP 只查看我通过在 httpd.conf 中设置 shell 的 PHPRC 或 PHPINIDIR 指定的位置？

```
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         /home/me/php/etc/php.ini
Scan for additional .ini files in: /etc/php.d
Additional .ini files parsed:      /etc/php.d/dbase.ini,
/etc/php.d/mysql.ini,
/etc/php.d/mysqli.ini,
/etc/php.d/pdo.ini,
/etc/php.d/pdo_mysql.ini,
/etc/php.d/pdo_sqlite.ini 
```

我经常遇到的错误是干扰了我返回到调用函数的 JSON 字符串。错误是：

```
PHP Warning:  PHP Startup: Unable to load dynamic library     
'/home/me/usr/lib64/php/modules/dbase.so' - /home/me/usr/lib64/php/modules/dbase.so: 
cannot open shared object file: No such file or directory in Unknown on line 0 
```

dbase.so 在 /etc/php.d 中声明，我无法删除它，因为我们无权访问系统级设置，此外，其他一些用户可能依赖默认设置（即使他们坏了）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:46:33.993

```
poncha@localhost:~$ php -c . -r 'var_dump(function_exists("mysql_connect"));'
bool(true)

poncha@localhost:~$ export PHP_INI_SCAN_DIR=""
poncha@localhost:~$ php -c . -r 'var_dump(function_exists("mysql_connect"));'
bool(false) 
```

`-c`实际上匹配`PHPIniDir`apache 配置。至于环境变量，您可以为 apache 实例设置它（例如在 apache init 脚本中），但这意味着您仍然需要操作系统级别的控制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:49:20.293

MikeC，这是虚拟主机共享安装的常见问题。PHP 搜索列表是设计使然，有助于确保 ISP 可以强制执行 ini 包含。如果您无权访问系统配置，则无法修复它。这是与您的托管服务提供商的服务/支持台登录的一个。指出错误并要求他们从 conf.d 目录中删除 ini 文件。

我过去也遇到过类似的问题。

As to "The error I constantly get is interfering with the JSON string I'm returning to calling functions", why are you returning errors to the user or AJAX routines anyway? Best practice is to log errors to file, so this content shouldn't appear in your JSON returns anyway.

# java - Java EE 中有哪些用于异步通信的方法？

> ID：11499256
> 
> 赞同：0
> 
> 时间：2012-07-16T06:42:14.393
> 
> 标签：java

我想知道 Java EE 中有哪些方法可以用于异步通信，尤其是在分布式系统中？（事实上​​，Java 中有哪些为此目的而设计的方法）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:10:18.723

一些选项：

**异步网络服务**

优点：

*   众所周知的标准
*   易于调试
*   可以参与 JTA 交易

缺点：

*   不保证交货
*   没有持久化、重试等。
*   性能不太好（HTTP、序列化开销）

**Java 消息服务**

优点：

*   众所周知的标准
*   可以参与 JTA 交易
*   可以设置以保证交付，如果需要重试
*   多种实现可供选择
*   很棒的表演

缺点：

*   需要一个单独的服务器（如果没有内置到您的应用服务器中）
*   需要 JMS 经验

看到这个实现：[http ://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations](http://en.wikipedia.org/wiki/Java_Message_Service#Provider_implementations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:48:07.877

您可以`JMS`用于异步消息传递

# java - 如何在android中调整位图图像对比度？

> ID：11499260
> 
> 赞同：2
> 
> 时间：2012-07-16T06:42:25.180
> 
> 标签：java, android, bitmap, bitmapimage, contrast

我经历了更多的技术。但没有什么可以解决我的查询。这些技术都不合适。图像变得模糊或完全变暗。所以，我需要一个特定的算法来调整位图图像对比度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T10:48:27.513

试试这个

[http://android.okhelp.cz/bitmap-set-contrast-and-brightness-android/](http://android.okhelp.cz/bitmap-set-contrast-and-brightness-android/)

希望帮助某人

# jboss - JDWP 退出错误 AGENT_ERROR_TRANSPORT_INIT(197)：没有初始化传输 [../../../src/share/back/debugInit.c:690]

> ID：11499263
> 
> 赞同：18
> 
> 时间：2012-07-16T06:42:34.227
> 
> 标签：jboss, intellij-idea, jrebel, jdwp

我一直在尝试使用 JRebel 运行此配置：

![在此处输入图像描述](../Images/2d06c4ca74d4f6764ea4c91bd6808039.png)

![在此处输入图像描述](../Images/db26e0a31044f72e296e9048ed4b11ff.png)

这是我的输出：

```
c:\JBOSS\jboss-portal-2.7.2\bin\run.bat -c default

c:\JBOSS\jboss-portal-2.7.2\bin>set JAVA_OPTS=-Dhttp.proxyHost=188.173.32.78 -Dhttp.proxyPort=3128 -DproxySet=true 
===============================================================================

  JBoss Bootstrap Environment

  JBOSS_HOME: c:\JBOSS\jboss-portal-2.7.2

  JAVA: C:\Program Files\Java\jdk1.6.0_25\bin\java

  JAVA_OPTS: -Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n -Dhttp.proxyHost=188.173.32.78 -Dhttp.proxyPort=3128 -DproxySet=true -Dprogram.name=run.bat -server -Xms256m -Xmx512m -XX:MaxPermSize=256m -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000

  CLASSPATH: C:\Program Files\Java\jdk1.6.0_25\lib\tools.jar;c:\JBOSS\jboss-portal-2.7.2\bin\run.jar

===============================================================================

[2012-07-16 12:32:53,968] Artifact app-ear:ear: Artifact is being deployed, please wait...
[2012-07-16 12:32:53,972] Artifact my-portlet:war: Artifact is being deployed, please wait...
Connected to server
[2012-07-16 12:32:54,007] Artifact app-ear:ear: Artifact is deployed successfully
FATAL ERROR in native method: JDWP No transports initialized, jvmtiError=AGENT_ERROR_TRANSPORT_INIT(197)
ERROR: transport error 202: bind failed: Address already in use
ERROR: JDWP Transport dt_socket failed to initialize, TRANSPORT_INIT(510)
JDWP exit error AGENT_ERROR_TRANSPORT_INIT(197): No transports initialized [../../../src/share/back/debugInit.c:690]
Disconnected from server 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-13T08:02:09.280

请注意帖子中的以下启动参数。

```
-Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n 
```

8787端口肯定有其他进程占用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:04:47.050

**8787**端口已在使用中。如果 8787 端口正在被其他应用程序使用，则需要在文件**run.bat**中选择不同的端口号， 例如**18787**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T12:45:07.037

> 错误：传输错误 202：绑定失败：地址已在使用中
> 错误：JDWP 传输 dt_socket 无法初始化，TRANSPORT_INIT(510) 来自“JAVA_OPTS：地址 = 8787”

您设置地址 8787

1.  查找 PID

    ```
    netstat -ap | grep 8787 
    ```

2.  如果您仍然使用上述命令看到 PID，则说明存在子 PID。查找子 PID

    ```
    pstree -p 
    ```

    和

    ```
    pstree -p  | grep previousPID 
    ```

3.  找到PID的groupPID

    ```
    ps x -o "%r %p %y %x %c" 
    ```

4.  杀死找到的PID

    ```
    kill -TERM -groupPID 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-27T03:35:38.050

通常当端口已被使用时会发生此错误。根据我的经验，这通常发生在服务器未成功启动时，使服务器仍在进程中运行。如果您使用的是 Windows，您可以查看您的任务管理器 (Ctrl+Shift+Esc)，然后查找“java.exe”进程。终止它并尝试再次启动您的服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-04T07:09:14.330

只要运行服务器所需的端口已被其他应用程序使用，就会出现此问题。由于我用于码头服务器的端口号**8080已经在使用中，它给了我这个错误，所以我只是将端口从****8080**更改为**7070**，它对我有用..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-06-20T07:59:17.027

检查你的调试端口

> 独立的.sh

应该是

```
DEBUG_MODE=true
DEBUG_PORT="8787" 
```

将调试模式更改**为 false**或从调用此独立的新 sh 文件传递​​新的调试端口 `--debug 8788`

# javascript - 以相同的方式对两个数组进行排序

> ID：11499268
> 
> 赞同：61
> 
> 时间：2012-07-16T06:43:06.880
> 
> 标签：javascript

例如，如果我有这些数组：

```
var name = ["Bob","Tom","Larry"];
var age =  ["10", "20", "30"]; 
```

而我使用`name.sort()`“name”数组的顺序变成：

```
var name = ["Bob","Larry","Tom"]; 
```

但是，如何对“name”数组进行排序并让“age”数组保持相同的顺序？像这样：

```
var name = ["Bob","Larry","Tom"];
var age =  ["10", "30", "20"]; 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-16T06:52:58.583

您可以对现有数组进行排序，或重新组织数据。

**方法一：** 使用已有的数组，可以组合、排序、分离：（ *假设等长数组）*

```
var names = ["Bob","Tom","Larry"];
var ages =  ["10", "20", "30"];

//1) combine the arrays:
var list = [];
for (var j = 0; j < names.length; j++) 
    list.push({'name': names[j], 'age': ages[j]});

//2) sort:
list.sort(function(a, b) {
    return ((a.name < b.name) ? -1 : ((a.name == b.name) ? 0 : 1));
    //Sort could be modified to, for example, sort on the age 
    // if the name is the same.
});

//3) separate them back out:
for (var k = 0; k < list.length; k++) {
    names[k] = list[k].name;
    ages[k] = list[k].age;
} 
```

这具有不依赖字符串解析技术的优点，并且可以用于需要一起排序的任意数量的数组。

**方法2：**或者你可以稍微重新组织一下数据，然后对一组对象进行排序：

```
var list = [
    {name: "Bob", age: 10}, 
    {name: "Tom", age: 20},
    {name: "Larry", age: 30}
    ];

list.sort(function(a, b) {
    return ((a.name < b.name) ? -1 : ((a.name == b.name) ? 0 : 1));
});

for (var i = 0; i<list.length; i++) {
    alert(list[i].name + ", " + list[i].age);
}
​ 
```

对于比较，-1 表示较低的索引，0 表示相等，1 表示较高的索引。值得注意的是，它`sort()`实际上改变了底层数组。

另外值得注意的是，方法 2 更有效，因为除了排序之外，您不必遍历整个列表两次。

[http://jsfiddle.net/ghBn7/38/](http://jsfiddle.net/ghBn7/38/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-07-25T08:48:00.510

该解决方案（我的工作）对多个数组进行排序，无需将数据转换为中间结构，并且可以有效地处理大型数组。它允许将数组作为列表或对象传递，并支持自定义 compareFunction。

用法：

```
let people = ["john", "benny", "sally", "george"];
let peopleIds = [10, 20, 30, 40];

sortArrays([people, peopleIds]);
[["benny", "george", "john", "sally"], [20, 40, 10, 30]] // output

sortArrays({people, peopleIds});
{"people": ["benny", "george", "john", "sally"], "peopleIds": [20, 40, 10, 30]} // output 
```

算法：

*   创建主数组（sortableArray）的索引列表
*   使用比较值的自定义 compareFunction 对索引进行排序，用索引查找
*   对于每个输入数组，按顺序将每个索引映射到它的值

执行：

```
/**
 *  Sorts all arrays together with the first. Pass either a list of arrays, or a map. Any key is accepted.
 *     Array|Object arrays               [sortableArray, ...otherArrays]; {sortableArray: [], secondaryArray: [], ...}
 *     Function comparator(?,?) -> int   optional compareFunction, compatible with Array.sort(compareFunction)
 */
function sortArrays(arrays, comparator = (a, b) => (a < b) ? -1 : (a > b) ? 1 : 0) {
    let arrayKeys = Object.keys(arrays);
    let sortableArray = Object.values(arrays)[0];
    let indexes = Object.keys(sortableArray);
    let sortedIndexes = indexes.sort((a, b) => comparator(sortableArray[a], sortableArray[b]));

    let sortByIndexes = (array, sortedIndexes) => sortedIndexes.map(sortedIndex => array[sortedIndex]);

    if (Array.isArray(arrays)) {
        return arrayKeys.map(arrayIndex => sortByIndexes(arrays[arrayIndex], sortedIndexes));
    } else {
        let sortedArrays = {};
        arrayKeys.forEach((arrayKey) => {
            sortedArrays[arrayKey] = sortByIndexes(arrays[arrayKey], sortedIndexes);
        });
        return sortedArrays;
    }
} 
```

另请参阅[https://gist.github.com/boukeversteegh/3219ffb912ac6ef7282b1f5ce7a379ad](https://gist.github.com/boukeversteegh/3219ffb912ac6ef7282b1f5ce7a379ad)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-09-14T14:44:23.937

您可以使用or获取`name`数组的索引。根据它们的值对它们进行排序。然后用于获取任意数量相关数组中相应索引的值`Array.from(name.keys())``[...name.keys()]``indices``map`

```
const indices = Array.from(name.keys())
indices.sort( (a,b) => name[a].localeCompare(name[b]) )

const sortedName = indices.map(i => name[i]),
const sortedAge = indices.map(i => age[i]) 
```

这是一个片段：

```
const name = ["Bob","Tom","Larry"],
      age =  ["10", "20", "30"],

      indices = Array.from(name.keys())
                     .sort( (a,b) => name[a].localeCompare(name[b]) ),

      sortedName = indices.map(i => name[i]),
      sortedAge = indices.map(i => age[i])

console.log(indices)
console.log(sortedName)
console.log(sortedAge)
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-18T06:07:12.807

如果性能很重要，可以使用[sort-ids](https://npmjs.com/sort-ids)包：

```
var sortIds = require('sort-ids')
var reorder = require('array-rearrange')

var name = ["Bob","Larry","Tom"];
var age =  [30, 20, 10];

var ids = sortIds(age)
reorder(age, ids)
reorder(name, ids)
```

这比比较器功能快约 5 倍。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-20T11:33:22.860

[它与jwatts1980 的回答 (Update 2)](https://stackoverflow.com/a/11499391/493756)非常相似。考虑阅读[Sorting with map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Sorting_with_map)。

```
name.map(function (v, i) {
    return {
        value1  : v,
        value2  : age[i]
    };
}).sort(function (a, b) {
    return ((a.value1 < b.value1) ? -1 : ((a.value1 == b.value1) ? 0 : 1));
}).forEach(function (v, i) {
    name[i] = v.value1;
    age[i] = v.value2;
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T06:49:17.197

您试图通过仅在其中一个上调用 sort() 来对 2 个独立数组进行排序。

实现这一点的一种方法是编写自己的排序方法来解决这个问题，这意味着当它在“原始”数组中就地交换 2 个元素时，它应该在“属性”数组中就地交换 2 个元素。

这是有关如何尝试的伪代码。

```
function mySort(originals, attributes) {
    // Start of your sorting code here
        swap(originals, i, j);
        swap(attributes, i, j);
    // Rest of your sorting code here
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-06-14T17:12:30.077

受[@jwatts1980 的回答](https://stackoverflow.com/a/11499391/493756)[和](https://stackoverflow.com/questions/13960105/sorting-multiple-arrays-at-once/13960306#13960306)@Alexander的回答启发，我将这两个答案合并为一个快速而肮脏的解决方案；主数组是要排序的，其余的只是按照它的索引

**注意**：对于非常非常大的阵列不是很有效

```
 /* @sort argument is the array that has the values to sort
   @followers argument is an array of arrays which are all same length of 'sort'
   all will be sorted accordingly
   example:

   sortMutipleArrays(
         [0, 6, 7, 8, 3, 4, 9], 
         [ ["zr", "sx", "sv", "et", "th", "fr", "nn"], 
           ["zero", "six", "seven", "eight", "three", "four", "nine"] 
         ]
   );

  // Will return

  {  
     sorted: [0, 3, 4, 6, 7, 8, 9], 
     followed: [
      ["zr", th, "fr", "sx", "sv", "et", "nn"], 
      ["zero", "three", "four", "six", "seven", "eight", "nine"]
     ]
   }
 */ 
```

您可能想要更改方法签名/返回结构，但这应该很容易。我这样做是因为我需要它

```
var sortMultipleArrays = function (sort, followers) {
  var index = this.getSortedIndex(sort)
    , followed = [];
  followers.unshift(sort);
  followers.forEach(function(arr){
    var _arr = [];
    for(var i = 0; i < arr.length; i++)
      _arr[i] = arr[index[i]];
    followed.push(_arr);
  });
  var result =  {sorted: followed[0]};
  followed.shift();
  result.followed = followed;
  return result;
};

var getSortedIndex = function (arr) {
  var index = [];
  for (var i = 0; i < arr.length; i++) {
    index.push(i);
  }
  index = index.sort((function(arr){
  /* this will sort ints in descending order, change it based on your needs */
    return function (a, b) {return ((arr[a] > arr[b]) ? -1 : ((arr[a] < arr[b]) ? 1 : 0));
    };
  })(arr));
  return index;
}; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-15T22:11:04.113

我一直在寻找比当前答案更通用、更实用的东西。

这是我想出的：一个 es6 实现（没有突变！），它可以让你对任意数量的数组进行排序，给定一个“源”数组

```
/**
 * Given multiple arrays of the same length, sort one (the "source" array), and
 * sort all other arrays to reorder the same way the source array does.
 * 
 * Usage:
 * 
 * sortMultipleArrays( objectWithArrays, sortFunctionToApplyToSource )
 * 
 * sortMultipleArrays(
 *   {
 *    source: [...],
 *    other1: [...],
 *    other2: [...]
 *   },
 *   (a, b) => { return a - b })
 * )
 * 
 * Returns:
 *   {
 *      source: [..sorted source array]
 *      other1: [...other1 sorted in same order as source],
 *      other2: [...other2 sorted in same order as source]
 *   }
 */
export function sortMultipleArrays( namedArrays, sortFn ) {
    const { source } = namedArrays;
    if( !source ) {
        throw new Error('You must pass in an object containing a key named "source" pointing to an array');
    }

    const arrayNames = Object.keys( namedArrays );

    // First build an array combining all arrays into one, eg
    // [{ source: 'source1', other: 'other1' }, { source: 'source2', other: 'other2' } ...]
    return source.map(( value, index ) =>
        arrayNames.reduce((memo, name) => ({
            ...memo,
            [ name ]: namedArrays[ name ][ index ]
        }), {})
    )
    // Then have user defined sort function sort the single array, but only
    // pass in the source value
    .sort(( a, b ) => sortFn( a.source, b.source ))
    // Then turn the source array back into an object with the values being the
    // sorted arrays, eg
    // { source: [ 'source1', 'source2' ], other: [ 'other1', 'other2' ] ... }
    .reduce(( memo, group ) =>
        arrayNames.reduce((ongoingMemo, arrayName) => ({
            ...ongoingMemo,
            [ arrayName ]: [
                ...( ongoingMemo[ arrayName ] || [] ),
                group[ arrayName ]
            ]
        }), memo), {});
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-16T07:10:33.337

您可以将每个成员的原始索引附加到值，对数组进行排序，然后删除索引并使用它重新排序另一个数组。它仅适用于内容是字符串或可以成功转换为字符串和从字符串转换的情况。

另一种解决方案是保留原始数组的副本，然后在排序后找到每个成员现在的位置并适当调整另一个数组。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-07T15:45:21.733

我遇到了同样的问题，并想出了这个非常简单的解决方案。首先将关联的元素组合成单独数组中的字符串，然后在排序比较函数中使用 parseInt，如下所示：

```
<html>
<body>
<div id="outPut"></div>
<script>
var theNums = [13,12,14];
var theStrs = ["a","b","c"];
var theCombine = [];

for (var x in theNums)
{
    theCombine[x] = theNums[x] + "," + theStrs;
}

var theSorted = theAr.sort(function(a,b)
{
    var c = parseInt(a,10);
    var d = parseInt(b,10);
    return c-d;
});
document.getElementById("outPut").innerHTML = theS;
</script>
</body>
</html> 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2014-12-06T23:42:30.870

最简单的解释是最好的，合并数组，排序后提取：创建数组

```
name_age=["bob@10","Tom@20","Larry@30"]; 
```

像以前一样对数组进行排序，然后提取名称和年龄，您可以使用 @ 来协调名称结束和年龄开始的位置。也许不是纯粹主义者的方法，但我有同样的问题，这是我的方法。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-08-20T18:33:54.497

怎么样：

```
var names = ["Bob","Tom","Larry"];
var ages =  ["10", "20", "30"];
var n = names.slice(0).sort()
var a = [];
for (x in n)
{
i = names.indexOf(n[x]);
a.push(ages[i]);
names[i] = null;
}
names = n
ages = a 
```

# iphone - 获取 UIWebView URL 的查询

> ID：11499271
> 
> 赞同：2
> 
> 时间：2012-07-16T06:43:15.603
> 
> 标签：iphone, objective-c, xcode

嘿伙计们，我正在尝试找到一种方法来专门从`URL`我`UIWebView`当前加载的查询字符串中获取查询字符串。

例如：

`www.google.com?page=235`

我想以`NSString`文本“page=235”结尾。

或者甚至更好的页面在`NSData`标题键和 235 在 ID 键。

我基本上试图将查询字符串组织成可用的数据。

在我的项目中，我有一个按钮：

```
[HTML appendString:@"<a href='didtap://goto?Page=56'>Post Comment</a>"]; 
```

我通过检查绝对值`URL`来查看按钮是否被触发。

有什么方法可以按照我想要的方式描述信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:58:53.473

我创建了您想要得到的演示，并进一步描述..

以下是viewcontroller.h文件代码

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    NSURL *Url;
}
@property(nonatomic,retain)IBOutlet UIWebView *webVctr;
@end 
```

这可能有助于解决您的问题谢谢

以下是 viewcontroller.m 文件代码

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize webVctr = _webVctr;

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    NSLog(@"%@",request);
    Url = [request URL];
    //    if ([[UrlParts objectAtIndex:(1)] isEqualToString:@"NeverGonnaFindMe"]) {
    // CONVERT TO STRING AN CLEAN
    NSString *urlResources = [Url resourceSpecifier];
    urlResources = [urlResources stringByReplacingOccurrencesOfString:@"?" withString:@"/"];

    // SEPORATE OUT THE URL ON THE /
    NSArray *urlResourcesArray = [urlResources componentsSeparatedByString:@"/"];
    // THE LAST OBJECT IN THE ARRAY
    NSString *urlParamaters = [urlResourcesArray objectAtIndex:([urlResourcesArray count]-1)];
    // SEPORATE OUT THE URL ON THE &
    NSArray *urlParamatersArray = [urlParamaters componentsSeparatedByString:@"&"];

    if([urlParamatersArray count] == 1) {
        NSString *keyValue = [urlParamatersArray objectAtIndex:(0)];
        NSArray *keyValueArray = [keyValue componentsSeparatedByString:@"="];

        if([[keyValueArray objectAtIndex:(0)] isEqualToString:@"page"]) {
            NSLog(@"%@",[keyValueArray objectAtIndex:1]);
        }

        [self dismissModalViewControllerAnimated:YES];
        return NO;
    }
    return YES;
}
// ACTIVITY INDICATOR
- (void)webViewDidStartLoad:(UIWebView *)webView{
///    [_activityIndicator startAnimating];
    NSLog(@"Resting to server");
}
- (void)webViewDidFinishLoad:(UIWebView *)webView{
//    [_activityIndicator stopAnimating];
    NSLog(@"Finish request  server");  
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{
    NSLog(@"Error");
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *fullAuthUrlString =[[NSString alloc] initWithFormat:@"www.google.com?page=235"];
    NSURL *authUrl = [NSURL URLWithString:fullAuthUrlString];
    NSURLRequest *myRequest = [[NSURLRequest alloc] initWithURL:authUrl];
    [self.webVctr loadRequest:myRequest];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T08:47:26.320

要获取查询字符串，请获取 NSURL 对象的*查询*字符串。

```
NSURL *url = …;
NSString *queryString = url.query; 
```

有关更多信息，请参阅[NSURL 类](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURL_Class/Reference/Reference.html)文档中的*访问 URL*的各个部分。

# objective-c - UIButton 中的边框

> ID：11499277
> 
> 赞同：0
> 
> 时间：2012-07-16T06:43:29.520
> 
> 标签：objective-c, xcode, cocoa-touch, uibutton

我将圆形矩形按钮拖入笔尖并为按钮设置背景图像。然而，图像并没有填满整个空间，它在按钮的两侧留下了一个狭窄的边框。我如何摆脱这个边界？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:54:38.067

如果要为 使用自定义背景图像`UIButton`，则应将按钮类型更改为`UIButtonTypeCustom`而不是`UIButtonTypeRoundedRect`。

（您也可以在*Interface Builder*中执行此操作）

# c++ - 使用 strcmp 和字符串数组

> ID：11499279
> 
> 赞同：0
> 
> 时间：2012-07-16T06:43:35.787
> 
> 标签：c++, arrays, string, strcmp

我试图消除字符串数组中的额外元素，并编写了下面的代码。strcmp 函数和字符串数组似乎存在问题。strcmp 不接受这种方式的字符串数组元素。你能帮我解决这个问题吗？array3 是字符串数组。我正在用 C++ 进行编码，我想做的是在字符串数组中有多个“apple”或“banana”。但我只需要一个“苹果”或一个“香蕉”。

```
for(int l = 0; l<9999; l++)
{
    for(int m=l+1;m<10000;m++)
        if(!strcmp(array3[l],array3[m]))
        {
            array3[m]=array3[m+1];
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:04:08.653

首先，您可以使用`operator==`比较`std::string`类型的字符串：

```
std::string a = "asd";
std::string b = "asd";
if(a == b)
{
//do something
} 
```

其次，如果 10000 是数组的大小，则代码中有错误：

```
array3[m]=array3[m+1]; 
```

在这一行中，您正在访问`m+1`st 元素，`m`最多可达 10000。这意味着您最终将尝试访问第 10001 个元素，并摆脱数组键。

最后，您的方法是错误的，这种方法不会让您删除所有重复的字符串。一个更好的（但不是最好的）方法是这样的（伪代码）：

```
std::string array[];//initial array
std::string result[];//the array without duplicate elements
int resultSize = 0;//The number of unique elements.
bool isUnique = false;//A flag to indicate if the current element is unique.

for( int i = 0; i < array.size; i++ )
{ 
    isUnique = true;//we assume that the element is unique
    for( int j = 0; j < result.size; j++ ) 
    {
        if( array[i] == result[j] )
        {
            /*if the result array already contains such an element, it is, obviously, 
            not unique, and we have no interest in it.*/
            isUnique = false;
            break;
        }
    }
    //Now, if the isUnique flag is true, which means we didn't find a match in the result array,
    //we add the current element into the result array, and increase the count by one. 
    if( isUnique == true )
    {
        result[resultSize] = array[i];
        resultSize++;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:03:14.123

`strcmp`相等时返回 0，因此`if (strcmp(s1,s2))...`表示“如果字符串相等，则执行此操作...”。你是这个意思吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:12:29.800

strcmp 仅适用于 Cstrings，因此如果您想使用它，我建议您将其更改为以下内容：`strcmp(array3[l].c_str(),array3[m].c_str())`这使字符串成为 C 字符串。

另一种选择是简单地将它们与相等运算符进行比较，`array3[l]==array3[m]`这将告诉您字符串是否相等。

做你想做的事情的另一种方法是将数组放在一个**集合**中并对其进行迭代。集合不包含多个相同内容的字符串！

参考：

*   有关 strcmp 的更多信息：http: [//en.cppreference.com/w/cpp/string/byte/strcmp](http://en.cppreference.com/w/cpp/string/byte/strcmp)
*   更多关于 c_str：[http ://en.cppreference.com/w/cpp/string/basic_string/c_str](http://en.cppreference.com/w/cpp/string/basic_string/c_str)
*   关于字符串比较：[http ://en.cppreference.com/w/cpp/string/basic_string/compare](http://en.cppreference.com/w/cpp/string/basic_string/compare)
*   C++ 集[http://en.cppreference.com/w/cpp/container/set](http://en.cppreference.com/w/cpp/container/set)

# html - @font-face 替代字体的字体大小

> ID：11499280
> 
> 赞同：6
> 
> 时间：2012-07-16T06:43:38.660
> 
> 标签：html, css, fonts, font-face, font-size

我正在使用@font-face，它必须被赋予一个大的字体大小。例如，标题的字体大小是 54px，这通常是很大的，但在这种字体中它看起来是中等的。

所以问题是，当页面加载时，替代字体显得非常大并且破坏了整个布局。

有没有办法可以为替代字体指定字体大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:54:07.680

我会尝试`name`通过 JavaScript 或 jQuery 检索正在使用的字体，如果不是`@font-face`字体，则`font-size`相应地进行调整。

**编辑：**
这是一个[**JavaScript 字体检测**](http://www.lalit.org/lab/javascript-css-font-detect/)插件，用于测试何时呈现后备字体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:19:36.750

您也许可以使用[Modernizr](http://modernizr.com "现代化")。它将类添加到`<html>`表示浏览器支持的功能的元素中。在这种情况下，它为`@font-face`支持添加的类是`fontface`.

我要做的是将标题大小设置为适合替代字体的大小，然后嵌套正确的字体大小，如下所示：

```
.title {
    font-size: 20px;
    font-family: arial, sans-serif;
}
.fontface .title {
    font-size: 50px;
    font-family: 'alternative-font', arial, sans-serif;
} 
```

虽然，即使那样我猜它可能不会以正确的顺序改变......一般来说，我不会担心加载时布局看起来很有趣，但希望这会有所帮助。

# ios - 使用RestKit，使用块加载对象，何时以及如何取消请求？

> ID：11499281
> 
> 赞同：3
> 
> 时间：2012-07-16T06:43:41.887
> 
> 标签：ios, block, restkit

```
[[RKObjectManager sharedManager] loadObjectsAtResourcePath:@"app/site_pattern" usingBlock:^(RKObjectLoader* loader) {
    [loader setObjectMapping:clientMappring];
    loader.delegate = self;
    shopLoader = loader;
}]; 
```

上面，我使用block函数在我的应用程序中加载了一些数据，但是当我弹出这个viewcontroller时，我不知道何时以及如何取消这个请求。

任何的想法？

```
- (void)showSelectShop
{

    SelectShopViewController * selectShopViewController = [[SelectShopViewController alloc] initWithNibName:@"SelectShopViewController" bundle:nil];
    [self.navigationController pushViewController:selectShopViewController animated:YES];
} 
```

更多的：

我尝试在 viewDidUnload 中取消它

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    [shopLoader cancel];
} 
```

但它没有用。我仍然收到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:16:49.047

我通过添加解决了这个问题

```
- (void)viewWillDisappear:(BOOL)animated
{
    [shopLoader cancel];
    shopLoader.delegate = nil;
    shopLoader = nil;
} 
```

我还是想知道，如果不想在viewWillDisappear中取消这个请求，那几行应该写在哪个函数里呢？

# java - jsp如何在一张表中显示3张地图的数据

> ID：11499284
> 
> 赞同：3
> 
> 时间：2012-07-16T06:43:57.443
> 
> 标签：java, jsp

我有三张包含数据的地图。如何在 jsp 页面的表格中显示它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:44:48.817

使用迭代每个地图`<c:forEach>`

```
<table>
<c:forEach items="#{map1}" var="item1">             
   <tr>       
  <td><c:out value="#{item1.key}" /></td>
  <td><c:out value="#{item1.value}" </td>
  </tr>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:28:13.820

为了解决这个问题，我使用了 apache commons 集合中的 MultiMap。如果我为要在 jsp 上发送的数据创建 DTO，这也可以解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:35:55.537

将三个 Map 合并为一个。

```
 Map<String, Integer> map1 = new HashMap<String, Integer>();
    Map<String, Integer> map2 = new HashMap<String, Integer>();
    Map<String, Integer> map3 = new HashMap<String, Integer>();

    Map<String, Integer> combinedMap = new HashMap<String, Integer>();
    combinedMap.putAll(map1);
    combinedMap.putAll(map2);
    combinedMap.putAll(map3); 
```

然后迭代`combinedMap`。

```
 <c:forEach items="#{combinedMap}" var="item1"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:51:32.570

有不止一种方法可以做到这一点（其中之一）：

通过使用 JSP 标准标记库 (JSTL)`c:forEach`标记如下：

```
 <c:set value="${sessionScope.sessionObject.map1}" var="map1">
 <c:set value="${sessionScope.sessionObject.map1}" var="map2">
 <c:set value="${sessionScope.sessionObject.map1}" var="map3">

<c:forEach items="${map1}" var="item1">             
   <tr>       
  <td><c:out value="${item1.key}" /></td>
  <td><c:out value="${item1.value}" </td>
  </tr>
</c:forEach>
<c:forEach items="${map2}" var="item1"> .... etc 
```

或者将它们加入一张地图，然后进行迭代。

# linux - 从串口接收无限循环

> ID：11499285
> 
> 赞同：3
> 
> 时间：2012-07-16T06:44:00.280
> 
> 标签：linux, serial-port

从[这里](https://stackoverflow.com/questions/6947413/how-to-open-read-and-write-from-serial-port-in-c)我复制了串口配置的例子：

```
tcgetattr (serialfd, &tty);

cfsetospeed(&tty,B115200);
cfsetispeed(&tty,B115200);

tty.c_cflag = (tty.c_cflag & ~CSIZE) | CS8;
tty.c_iflag &= ~IGNBRK;
tty.c_lflag = 0;

tty.c_oflag = 0;
tty.c_cc[VMIN]  = 0;
tty.c_cc[VTIME] = 5;

tty.c_iflag &= ~(IXON | IXOFF | IXANY);
tty.c_cflag |= (CLOCAL | CREAD);
tty.c_cflag &= ~(PARENB | PARODD);
tty.c_cflag |= 0;
tty.c_cflag &= ~CSTOPB;
tty.c_cflag &= ~CRTSCTS; 
```

我的实际代码是这样的：

```
char buf[100];
write(serialfd, "PING", strlen("PING"));
fsync(serialfd);

while (1) 
{
    read(serialfd, buf, sizeof(buf));
    printf("length: %d\n", strlen(buf));
} 
```

在这种情况下，它会`length: 6`无限打印而不会停止。当我更改`tty.c_cc[VMIN] = 1`并且`tty.c_cc[VTIME] = 0`它不读取时。（它阻塞`read()`）

我正在使用带有 USB 到串行转换器的 debian 6.0.5。我这样打开串口：

```
serialfd = open("/dev/ttyUSB0", O_RDWR | O_NOCTTY | O_SYNC); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:51:17.990

看你的代码

```
while (1) 
{
    read(serialfd, buf, sizeof(buf));
    printf("length: %d\n", strlen(buf));
} 
```

您已经在此循环之前编写了一个数据包，然后在第一次迭代中您读取了读入缓冲区的可用数据。您需要`memset`每次将缓冲区归零，或者使用调用返回值中给出的读取字节数将缓冲区归零`read`。然后您无限循环，每次再次读取 - 但后续读取不会复制任何更多数据，因为没有要读取的数据。但是，由于调用 read 因此，您的缓冲区保持不变，并且您的打印输出每次迭代都保持不变，因为缓冲区每次迭代都保持不变。

至于阻塞方面，你应该阅读以下指南（之前在SO上推荐过，作为串口编程的入门非常好）

[http://www.easysw.com/~mike/serial/serial.html](http://www.easysw.com/~mike/serial/serial.html)

本节描述将 VMIN 和 VTIME 设置为各种值时的行为。特别是最后一段解释了您看到的阻塞行为。

> VMIN 指定要读取的最小字符数。如果设置为 0，则 VTIME 值指定等待读取每个字符的时间。请注意，这并不意味着对 N 个字节的读取调用将等待 N 个字符进入。相反，超时将应用于第一个字符，并且读取调用将返回立即可用的字符数（最多为您要求）。
> 
> 如果 VMIN 非零，则 VTIME 指定等待读取第一个字符的时间。如果在给定时间内读取了一个字符，则任何读取都将阻塞（等待），直到读取所有 VMIN 字符。也就是说，一旦读取了第一个字符，串行接口驱动程序就期望接收整个字符包（总共 VMIN 字节）。如果在允许的时间内没有读取任何字符，则 read 调用返回 0。此方法允许您告诉串行驱动程序您需要 N 个字节，并且任何 read 调用将返回 0 或 N 个字节。但是，超时仅适用于读取的第一个字符，因此如果由于某种原因驱动程序错过了 N 字节数据包中的一个字符，则读取调用可能会永远阻塞等待其他输入字符。
> 
> VTIME 指定等待传入字符的时间量，以十分之一秒为单位。如果 VTIME 设置为 0（默认值），读取将无限期地阻塞（等待），除非在带有 open 或 fcntl 的端口上设置了 NDELAY 选项。

# android - 我可以在 google play 上为多个目标提交多个 apk 文件吗？

> ID：11499286
> 
> 赞同：0
> 
> 时间：2012-07-16T06:44:01.640
> 
> 标签：android, google-play

我倾向于发布并提交到 GooglePlay 同一应用程序的两个 apk 文件。一个带有 android sdk 7 的 android 版本低于 4.0，一个带有 android sdk 14 的 android 4.0 及更高版本。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:46:10.140

是的你可以。但是，这可能很棘手。

[http://developer.android.com/guide/google/play/publishing/multiple-apks.html](http://developer.android.com/guide/google/play/publishing/multiple-apks.html)

当您为设备使用不同的apk时，会出现一些问题，它们彼此靠近。但是，您可以从上面的链接开始。

但建议使用单个 apk。

注意：通常只有当您的 APK 太大（大于 50MB）时，您才应该使用多个 APK 来支持不同的设备配置。

# php - 通过 PHP 从 MySQL 编辑数据

> ID：11499287
> 
> 赞同：4
> 
> 时间：2012-07-16T06:44:11.250
> 
> 标签：php, mysql

我在使用 PHP 脚本时遇到了一个令人沮丧的问题，该脚本应该允许我编辑 MySQL 数据库中的各个行。

这是显示数据库中所有行的文件；它就像它应该的那样工作。

```
<table cellpadding="10">
<tr>
<td>ID</td>
<td>First Name</td>
<td>Last Name</td>
<td>E-mail</td>
<td>Phone</td>
</tr>

<?php

$username="username here";
$password="password here";
$database="database name here";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM students";
$result=mysql_query($query);
mysql_close();

while ($row=mysql_fetch_array($result)){
echo ("<tr><td>$row[id]</td>");
echo ("<td>$row[first]</td>");
echo ("<td>$row[last]</td>");
echo ("<td>$row[email]</td>");
echo ("<td>$row[phone]</td>");
echo ("<td><a href=\"StudentEdit.php?id=$row[id]\">Edit</a></td></tr>");
}
echo "</table>";

?> 
```

如您所见，每一行都有一个“编辑”链接，应该允许用户编辑该学生的数据。那么，这里是 StudentEdit.php：

```
<?php

$username="username";
$password="password";
$database="database";

mysql_connect(localhost,$username,$password);

$student_id = $_GET[id]; 
$query = "SELECT * FROM students WHERE id = '$student_id'"; 
$result = mysql_query($query);
$row = mysql_fetch_array($result);
mysql_close();
?>

<form method="post" action="EditStudentData.php" />

<table>

<tr>
<td><input type="hidden" name="id" value="<? echo "$row[id]" ?>"></td>
</tr>

<tr>
<td>First Name:</td>
<td><input type="text" name="first" value="<? echo "$row[first]" ?>"></td>
</tr>

<tr>
<td>Last Name:</td>
<td><input type="text" name="last" value="<? echo "$row[last]" ?>"></td>
</tr>

<tr>
<td>Phone Number:</td>
<td><input type="text" name="phone" value="<? echo "$row[phone]" ?>"></td>
</tr>

<tr>
<td>E-mail:</td>
<td><input type="text" name="email" value="<?echo "$row[email]" ?>"></td>
</tr>

</table>

</form> 
```

但是，当我执行此操作时，我收到以下错误消息：

警告：mysql_fetch_array()：提供的参数不是第 12 行 /home4/lukaspl1/public_html/StudentEdit.php 中的有效 MySQL 结果资源

任何想法出了什么问题，以及如何解决？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:49:51.760

从这里删除 mysql_close

```
mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM students";
$result=mysql_query($query);
mysql_close(); 
```

代码应该是 mysql_connect(localhost,$username,$password);

```
@mysql_select_db($database) or die( "Unable to select database");
$query="SELECT * FROM students";
$result=mysql_query($query); 
```

而且，您将只使用基于键的结果集.. 只需使用 mysql_fetch_assoc。另一个建议是用 $row['id'] 代替 $row[id].. 替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:57:56.170

**StudentEdit.php：**`@mysql_select_db($database) or die( "Unable to select database");`您在执行查询之前忘记调用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-17T13:38:52.587

这部分代码是错误的：

```
$student_id = $_GET[id]; 
```

正确的代码是

```
$student_id = $_GET['id']; 
```

来自[expertsnote.com的代码](https://expertsnote.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-17T12:17:57.867

缺少此代码

```
$select_db = mysql_select_db("$db_name");
if (!$select_db) {echo "Error Selecting Database";} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T06:56:37.183

尝试...

```
echo ("<td><a href=\"StudentEdit.php?id=".$row['id']."\">Edit</a></td></tr>"); 
```

代替

```
echo ("<td><a href=\"StudentEdit.php?id=$row[id]\">Edit</a></td></tr>"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-19T06:56:09.680

这是动态编辑细节的代码

```
<?php

    include('db.php');

        $id=$_REQUEST['id'];
         $query="SELECT * FROM `camera details` WHERE id='".$id."'";
        $result=mysqli_query($db,$query) or die(mysqli_error());
        $row1=mysqli_fetch_assoc($result);

    if(isset($_POST['submit'])&&(isset($_POST['new'])&&($_POST['new'])==1))
    {
            $id=$_REQUEST['id'];

        foreach($_POST as $key=>$values)
        {
            if($key!="submit"){

            $names[]=$key;
            $val[]= "'".$values."'";

            if($key!="new"){
            $k[] = "`".$key."` = '".$values."'";
            }
            }
        }
        $output=implode(",",(array)($k));
        //$v=implode(",",(array)($val));

        // `name` = 'san'

        $query="UPDATE `camera details` SET $output WHERE id='".$id."'";

        $output=mysqli_query($db,$query) or die(mysqli_error($db));
        if($output)
        {
            header('location:cameralist.php');
        }
    }
    else{
        ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T06:50:58.937

我建议在 studentEdit.php 中执行此操作

```
$student_id = mysql_real_escape_string($_GET[id]); 
$query = "SELECT * FROM students WHERE id = '$student_id'"; 
$result = mysql_query($query) or die(mysql_error() . ' ' . $query);
$row = mysql_fetch_array($result);
mysql_close(); 
```

我在这里更改的两件事首先是转义在 url 中传递的数据，其次我添加了`or die(mysql_error() . ' ' . $query);`如果 sql 语句中出现问题，您现在应该看到错误，希望您能够修复它那里。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-16T06:51:16.673

对我来说看起来不正确的是您显示从数据库中检索到的值的方式：

```
<input type="hidden" name="id" value="<? echo "$row[id]" ?>"> 
```

**它应该是**

```
<input type="hidden" name="id" value="<?php echo $row['id']; ?>"> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-09T16:11:41.577

此代码提供了添加、搜索、编辑和删除选项的选项。认为它可能会在一个代码中看到所有选项。

```
 $searchedUsername = "";
        $searchedEmail = "";
    //registration (Add) function   
        if ( isset($_POST['stdregister'])){

            $username = $_POST['stdusername'];
            $password = $_POST['stdpassword'];
            $email = $_POST['stdemail'];
            $hashedPassword = md5($password);

            $connection = mysqli_connect("localhost","root","","std");
            $query = "INSERT INTO student VALUES ('$username','$hashedPassword','$email')";
            if ( mysqli_query($connection,$query) == 1 ){
                echo "Successfully saved";
            }
            else{
                echo "<p style='color: #f00;'>There is an error</p>";
            }
            mysqli_close($connection);
        }

    //delete function   
        if ( isset($_POST['stddelete'])){
            $username = $_POST['stddelusername'];
            $connection = mysqli_connect("localhost","root","","std");
            $query = "DELETE FROM student WHERE username LIKE '$username'";
            mysqli_query($connection,$query);
            echo mysqli_error($connection);

            mysqli_close($connection);
        }
    //update function   
        if ( isset($_POST['stdupdate'])){
            $username = $_POST['stdusername'];
            $stdpass = md5($_POST['stdpassword']);
            $stdemail = $_POST['stdemail'];
            $connection = mysqli_connect("localhost","root","","std");
            $query = "UPDATE student SET password='$stdpass', email='$stdemail' WHERE username LIKE '$username'";
            mysqli_query($connection,$query);
            echo mysqli_error($connection);
            mysqli_close($connection);
        }

        if ( isset($_POST['stdsearch']) ){
            $searchUsername = $_POST['stdeditusername'];
            $connection = mysqli_connect("localhost","root","","std");
            $query = "SELECT * FROM student WHERE username LIKE '$searchUsername' ";
            $result = mysqli_query($connection, $query);
            while( $row = mysqli_fetch_array($result) ){
                $searchedUsername = $row['username'];
                $searchedEmail = $row['email'];
            }
        }

    ?>
    <html>
        <head>

        </head>
        <body>
            <h1>Student Registration</h1>
            <form name="stdregistration" action="forms.php" method="post">
                <label>Username :</label>
                <input name="stdusername" required="required" type="text" /><br /><br />
                <label>Password :</label>
                <input name="stdpassword" type="password" /><br /><br />
                <label>E-mail :</label>
                <input name="stdemail" type="email" /><br /><br />
                <input name="stdregister" type="submit" value="Save" />
            </form>

            <h2>Delete Students</h2>
            <form name="stddeletion" action="forms.php" method="post">
                <label>Select the Username :</label>
                    <select name="stddelusername" required>
                    <option value="">Select One</option>
    <?php
        $connection2 = mysqli_connect("localhost","root","","std");
        $query2 = "SELECT username FROM student";
        $result = mysqli_query($connection2,$query2);
        while( $row = mysqli_fetch_array($result) ){
            echo "<option value='".$row['username']."'>".$row['username']."</option>";
        }
        mysqli_close($connection2);

    ?>          

                </select>
                <input name="stddelete" type="submit" value="Delete" />
            </form>

            <h2>Edit Students</h2>
            <form name="stdedition" action="forms.php" method="post">
                <label>Select the Username :</label>
                    <select name="stdeditusername" required>
                    <option value="">Select One</option>
    <?php
        $connection2 = mysqli_connect("localhost","root","","std");
        $query2 = "SELECT username FROM student";
        $result = mysqli_query($connection2,$query2);
        while( $row = mysqli_fetch_array($result) ){
            echo "<option value='".$row['username']."'>".$row['username']."</option>";
        }
        mysqli_close($connection2);

    ?>          
                </select>
                <input name="stdsearch" type="submit" value="Search" />
            </form>

            <form name="stdedit" action="forms.php" method="post">
                <label>Username :</label>
                <input name="stdusername" required="required" type="text" readonly value="<?php echo $searchedUsername; ?>" /><br /><br />
                <label>Password :</label>
                <input name="stdpassword" type="password" /><br /><br />
                <label>E-mail :</label>
                <input name="stdemail" type="email" value="<?php echo $searchedEmail; ?>" /><br /><br />
                <input name="stdupdate" type="submit" value="Update" />
            </form>
        </body>
    </html> 
```

# android - 您是否需要在 ProGuard for Android 构建中指定 -injars 和 -outjars 选项？

> ID：11499288
> 
> 赞同：4
> 
> 时间：2012-07-16T06:44:16.037
> 
> 标签：android, proguard

默认的 android proguard.cfg 文件没有指定任何`-injars`或`-outjars`选项，我还没有找到任何关于`-outjars'`输出应该是什么的文档。另一方面，ProGuard 站点提供了一个 android 示例，其中包括`-injars`和`-outjars`. 我应该关注哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:14:21.827

我做了一些搜索，我找到了一个文件，`$ANDROID_SDK/tools/proguard/examples/android.pro`，其中指出：

```
#
# This ProGuard configuration file illustrates how to process Android
# applications.
# Usage:
#     java -jar proguard.jar @android.pro
#
# If you're using the Android SDK (version 2.3 or higher), the android tool
# already creates a file like this in your project, called proguard.cfg.
# It should contain the settings of this file, minus the input and output paths
# (-injars, -outjars, -libraryjars, -printmapping, and -printseeds).
# The generated Ant build file automatically sets these paths.

# Specify the input jars, output jars, and library jars.
# Note that ProGuard works with Java bytecode (.class),
# before the dex compiler converts it into Dalvik code (.dex). 
```

我认为，这回答了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T18:54:20.983

不，您不应指定任何 -injars、-outjars 或 -libraryjars 选项。Ant、Eclipse、Grade 或 Maven 的插件会在您构建项目时根据项目的结构为您添加它们。您的配置文件可以为空，但任何特定于项目的配置除外。请参阅 Android 文档中的 ProGuard 页面。

ProGuard 网站上的示例适用于独立构建。

# php - 多页表单的策略？

> ID：11499292
> 
> 赞同：0
> 
> 时间：2012-07-16T06:44:44.837
> 
> 标签：php, ajax, forms, jquery-mobile, ajaxform

我一直在尝试使用 jQuery Mobile 进行多页轮询，该轮询应该通过 Ajax/PHP 与我的 MySQL 数据库交互，并且已经有一段时间了。由于将表单拆分为多个页面，我似乎在提交表单时遇到了一些问题。我需要的一个要求是页面不能重新加载页面。

在我的第一次尝试中，我尝试将页面分为以下几部分：

```
<div id="page1" data-role="page"> 
```

然而，无论我如何尝试编码，这都失败了很多次。我无法让提交按钮工作，我认为这可能是由于我已将表单拆分为几个 div“页面”。我还尝试制作下一个/提交按钮而不是“下一个，下一个，下一个......提交”，以便我可以将临时数据存储在会话中，但未成功。

我将我的整个策略重新编写为一个隐藏不活动的问题 div 的代码。我的意思是我有一个将数据角色设置为页面的 div，在其中我有几个 div，其内容的数据角色通过单击带有下一步按钮的表单来隐藏/显示。我设法以这种方式制作了一个小的示例表单，它可以提交整个表单并使用一些 PHP 代码完美地打印出来。但是我还没有成功验证这个版本。我只能让我的脚本来验证最后一页，即使那样它也需要检查所有复选框，这是没有意义的。当我尝试将此版本实现到我的真实项目中时，我根本无法将其提交给 .php 脚本，但这可能只是我将继续寻找的一些语法错误。

那么，有没有人做过类似的事情呢？我正在寻找潜在的其他策略来解决这个问题，或者也许有人对我上述尝试失败的原因有一个理论。似乎 Ajax 表单提交很难在 jQuery Mobile 中工作？

另外，如果有人能发现其中的缺陷，我已经附上了我用于提交的代码，有没有一种简单的方法可以将它变成一个函数？还是那毫无意义？

```
$(document).ready(function()
    {
            $("#submit").click(function() 
            {
                var data_string = $('#form').serialize();
                $.ajax(
                {
                    type:'POST',
                    url:'add.php',
                    data:data_string,
                    success:function(response)
                    {
                        $("#answers").html(response);
                    }
                });         
            })
    }); 
```

我还在 window.onload 期间使用此函数来生成带有冗长 .php 脚本的投票。基本上它将问题生成为，所有其他问题种类只有 name="answers[question_id]"。

```
function getQuestions(id)
        {
            var xmlhttp = getHttpRequestObj();
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById(id).innerHTML=xmlhttp.responseText;
                }
              }
            xmlhttp.open("GET","poll2.php",true);
            xmlhttp.send();
        } 
```

表格如下所示：

```
<form id="form">
  <div data-role="content" id="form'.$page.'" class="section">
    <fieldset data-role="controlgroup" data-type="vertical" data-mini="true" id="'.$question_id.'">
      <input type="checkbox" name="answers['.$question_id.']['.$alt_id.']" id="'.$question_id.'_'.$alt_id.'" value="'.$alt_id.'"/>
        <label for="'.$question_id.'_'.$alt_id.'">'.$alt_desc.'</label>
    </fieldset>
    <input type="button" name="next" value="Next" id="next" onClick="toggleVisibility(\'form'.($page+1).'\')" class="next-btn"/>
  </div> 
```

最后一页有这个代码，而不是下一个按钮：

```
</div><input type="button" id="submit" value="Submit" class="submit-btn"/></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:00:17.857

在我看来，隐藏其他选项并逐个打开是更好的方法（也称为多步表单）。

对于验证，您可以在客户端使用 javascript 或使用 ajax 触发适当的事件（您不需要提交它进行验证）并在服务器端进行验证。

你在正确的轨道上。我在这里看到的问题是您将如何进行验证，但这取决于您的表单的结构。

# macos - Mac 的选择器

> ID：11499294
> 
> 赞同：0
> 
> 时间：2012-07-16T06:44:54.133
> 
> 标签：macos, cocoa, cocoa-design-patterns

我们有用于可可 mac 桌面应用程序的 UIAlert/日期选择器类型的控件吗？（这些控件在视觉上很吸引人）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:50:48.637

的类似物`UIAlertView`是[`NSAlert`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSAlert_Class/Reference/Reference.html).

的类比`UIDatePicker`是[`NSDatePicker`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSDatePicker_Class/Reference/Reference.html)。

当然，他们的视觉风格是不同的。它们的存在时间比它们的 UIKit 对应物要长得多。我不知道复制 iOS 外观的任何第三方实现`UIAlertView`或`UIDatePicker`Mac OS。

# javascript - 使用 jquery 的 Ajax 跨域请求

> ID：11499296
> 
> 赞同：2
> 
> 时间：2012-07-16T06:44:57.090
> 
> 标签：javascript, jquery

我尝试使用 $.ajax() 调用外部域并且它工作正常，服务器接收到调用，但是在 jquery.js 行 7760 中的 firebug 错误的响应。我一直在敲我的头这一切一天，不要觉得我已经做得更远了。

```
$.ajax({
            type: "GET",
            url: "http://admin:asdfg@149.50.143.241:81/stream.jpg",
            //data: {},
            //async: true,
            //contentType: "application/jsonp; charset=utf-8",
            //headers: {
            //    'User-Agent': 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5',
            //    'Accept': '*/*',
            //    'Authorization': 'Basic ' + auth
            //},
            //timeout: 500,
            dataType: "jsonp",
            //crossDomain: true,
            beforeSend: function (req) {
                req.setRequestHeader('User-Agent', 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5');
                req.setRequestHeader('Accept', '*/*');
                req.setRequestHeader('Authorization', 'Basic ' + auth);
            },
            success: function (data) {
                alert("Success");
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:28:16.797

jsonp 响应必须包含在 javascript 方法调用中。（回调方法）。

假设响应是图像。jquery 看起来不太可能处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:05:38.013

我不知道你是否可以使用 ajax 调用来调用图像。

当您使用 jsonp 时，将忽略 beforeSend at ajax 调用。

也许您必须让您的服务器了解并响应 CORS。

像这样的东西：

```
 protected override void OnStartProcessingRequest(ProcessRequestArgs args)
    {
        HttpContext context = HttpContext.Current;    // set cache policy to this page 

        context.Response.AddHeader("Access-Control-Allow-Origin", "*");
        if (context.Request.HttpMethod == "OPTIONS")
        {
            context.Response.AddHeader("Access-Control-Allow-Methods", "GET, POST, OPTIONS");
            context.Response.AddHeader("Access-Control-Allow-Headers", "X-Requested-With, Accept");
            context.Response.AddHeader("Access-Control-Max-Age", "3628800");
            context.Response.AddHeader("type", "application/json; charset=utf-8");
            context.Response.End();
        }
    } 
```

并使用 XDomainRequest 和 XMLHttpResquest 在客户端进行调用。

看看这里：[http ://andre-pedroso.blogspot.pt/2011/02/javascript-consume-service-with-cross.html](http://andre-pedroso.blogspot.pt/2011/02/javascript-consume-service-with-cross.html)

干杯

# c# - Microsoft.VisualStudio.Text.Tagging.TextMarkerTag - OnClick 事件

> ID：11499297
> 
> 赞同：1
> 
> 时间：2012-07-16T06:45:02.457
> 
> 标签：c#, wpf, visual-studio, visual-studio-extensions

有人知道如何在 IWpfTextView 中捕获对 TextMarker 的点击吗？我想在 XML 编辑器中具有此功能，以允许 CTRL+单击某些节点。现在可以突出显示特定节点，但 Textmarker 上没有“OnClick”事件。

也可以看看：

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.tagging.textmarkertag.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.tagging.textmarkertag.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:33:50.280

TextMarker 上没有事件，你是对的。您要做的是实现并 MEF 导出[IMouseProcessor](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.text.editor.imouseprocessor.aspx)，并在适当的方法中查看您是否在您关心的范围内。您可以从中派生一个类`MouseProcessorBase`，以使您的实现不那么烦人。

Noah Richards 的 GoToDef 示例，它以与您在此处尝试执行的方式非常相似的方式实现 Ctrl+Click。代码位于[https://github.com/NoahRic/GoToDef](https://github.com/NoahRic/GoToDef)。我*强烈*建议你看看它。

# objective-c - Button Jiggle 算法错误

> ID：11499298
> 
> 赞同：4
> 
> 时间：2012-07-16T06:45:02.777
> 
> 标签：objective-c, xcode

我已经实现了一个按钮抖动动画。按下按钮会摇晃，但问题是动画不会停止并在 [self.layer removeAllAnimations] 中出现错误；下面是代码；

```
 -(IBAction)button1Clicked:(id)sender
 {
UIButton *no1 =sender;
output= [self answerCheck:no1.titleLabel.text];
self.label.text=output;
[self enableOptions:NO];
[self loadingView];
[self startJiggling:2];

 }
- (void)startJiggling:(NSInteger)count
{

    CGAffineTransform leftWobble = CGAffineTransformMakeRotation(degreesToRadians( kAnimationRotateDeg * (count%2 ? +1 : -1 ) ));
    CGAffineTransform rightWobble = CGAffineTransformMakeRotation(degreesToRadians( kAnimationRotateDeg * (count%2 ? -1 : +1 ) ));
    CGAffineTransform moveTransform = CGAffineTransformTranslate(rightWobble, -kAnimationTranslateX, -kAnimationTranslateY);
    CGAffineTransform conCatTransform = CGAffineTransformConcat(rightWobble, moveTransform);

    self.btnOption1.transform = leftWobble;  // starting point

    [UIView animateWithDuration:0.1
                          delay:(count * 0.08)
                        options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                     animations:^{ self.btnOption1.transform = conCatTransform; }
                     completion:nil];
 [self stopJiggling];
}

-(void)stopJiggling 
{
    [self.btnOption1.layer removeAllAnimations];
    self.btnOption1.transform = CGAffineTransformIdentity;   // Set it straight 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T06:59:15.283

您将动画设置为 on `self.btnOption1`，因此您需要将其从 中删除`self.btnOption1`：

```
- (void)stopJiggling {
    [self.btnOption1.layer removeAllAnimations];
    self.btnOption1.transform = CGAffineTransformIdentity;
} 
```

但实际上，如果您只是在`transform`动画块之外再次设置按钮的属性，它将删除动画：

```
- (void)stopJiggling {
    self.btnOption1.transform = CGAffineTransformIdentity;
} 
```

（这在我的测试项目中有效。）

### 更新：

我注意到您正在延迟启动动画，并且您`stopJiggling` *在*调用`animateWithDuration:...`. 我不知道您为什么要使用延迟或为什么要`stopJiggling`立即致电。

我创建了一个测试用例来匹配您的代码：

```
@implementation ViewController {
    __unsafe_unretained IBOutlet UIButton *btnOption1;
}

- (IBAction)startJiggling {
    btnOption1.transform = CGAffineTransformMakeRotation(-.1);
    [UIView animateWithDuration:.1 delay:2 * 0.08 options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse animations:^{
        btnOption1.transform = CGAffineTransformMakeRotation(.1);
    } completion:nil];
    [self stopJiggling];
}

- (void)stopJiggling {
    [btnOption1.layer removeAllAnimations];
    btnOption1.transform = CGAffineTransformIdentity;
}

@end 
```

我将我的`btnOption1`ivar 连接到一个按钮，并将该按钮连接到该`startJiggling`方法。使用如图所示的代码，单击按钮不会执行任何操作，因为动画在添加后立即被删除。如果我注释掉该`removeAllAnimations`消息，单击按钮会使按钮开始抖动并且它会永远抖动。我在 iPhone 4.3 模拟器、iPhone 5.0 模拟器、iPhone 5.1 模拟器和运行 iOS 5.1 的 iPhone 4S 上进行了测试。

所以，我无法重现您的问题。发送`removeAllAnimations`会删除我测试中的动画。

我怀疑您只是希望动画重复两次然后停止（因为您有一个名为的参数`count`并且您正在传递 2）。如果这就是你想要做的，你可以这样做：

```
- (IBAction)startJiggling {
    btnOption1.transform = CGAffineTransformMakeRotation(-.1);
    [UIView animateWithDuration:.1 delay:2 * 0.08 options:UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse animations:^{
        [UIView setAnimationRepeatCount:2];
        btnOption1.transform = CGAffineTransformMakeRotation(.1);
    } completion:^(BOOL completed){
        btnOption1.transform = CGAffineTransformIdentity;
    }];
} 
```

使用 设置动画块内的重复计数`+[UIView setAnimationRepeatCount:]`，并在完成块中恢复按钮的变换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:52:50.340

记得导入 QuartzCore/QuartzCore.h 来与层对话。

# c# - 从 Linq To Sql 中的现有实体创建和插入新实体

> ID：11499300
> 
> 赞同：1
> 
> 时间：2012-07-16T06:45:05.570
> 
> 标签：c#, asp.net, linq, linq-to-sql

我有 2 张桌子；具有一对多现实的 PriceList 和 PriceListDetail。插入新的 PriceList 后，我​​需要复制现有 PriceList 的 PriceListDetail。

```
var pricedetails= db.PriceListDetails.Where(p => p.PriceList Id == SomeExistingPriceListID); 
```

我只需要更改上面 pricedetails 的 priceListID 并将它们插入 PriceListDetail 表。当我修改 pricedetails 的 priceListId 并尝试插入它们时，我得到“无法插入已经存在的实体”。

明显的解决方案是创建新实体并从 pricedetails 中一一复制值然后插入。

有没有办法避免一一复制？也许创建重复的行然后修改重复的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:53:45.790

实体框架使用除主键之外的另一个键，它称为`entity key`. 因此，有了 PriceListDetails，您所要做的就是更改主键 ID 并将实体键设置为 NULL（NULL 表示新行）。

# visual-studio - VS Setup 项目：将文件安装在不同的目录中

> ID：11499301
> 
> 赞同：3
> 
> 时间：2012-07-16T06:45:11.840
> 
> 标签：visual-studio, setup-project

我有 Visual Studio 安装项目。我想将我的一个文件安装到驱动器 C 上的某个目录中。我应该怎么做？

一个例子：

我正在 C:\MyApp 中安装我的应用程序。还有一个文件 settings.ini 到 C:\Settings\MyAppSettings\

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:12:07.233

您可以尝试使用[WindowsVolume](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372817%28v=vs.85%29.aspx)属性：

*   转到文件系统编辑器
*   右键单击“目标机器上的文件系统”树项并选择“添加特殊文件夹”->“自定义文件夹”上下文菜单
*   将新文件夹重命名为友好的名称，例如“C Drive”
*   选择文件夹
*   在其属性窗格中将**DefaultLocation**设置为`[WindowsVolume]`
*   在此自定义文件夹中添加您想要的文件夹结构（MyApp、设置等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T01:26:12.900

由于这在 Google 搜索结果中的占比很高 - 任何希望将文件放到非 Windows 卷的驱动器（即网络驱动器，或者如果 Windows 不在 C 驱动器上）的人：

按照上面@Cosmin 提供的答案（在安装程序的文件系统中添加特殊文件夹），但将文字驱动器路径放入。

例如，将**DefaultLocation**设置为`c:\MyApp`或`z:\desired\location`。

# sql - SQL Server 2008：平均。以毫秒为单位的计时

> ID：11499302
> 
> 赞同：0
> 
> 时间：2012-07-16T06:45:24.337
> 
> 标签：sql, sql-server-2008

我有这个查询

```
select 
    substring((convert(varchar, PostTime, 120)), 1, 11),
    AccountNumber,
    sum(Cast(datediff(ss, TranTime, AuthProcessedTime) as money)) / COUNT(1) AverageTime,
    COUNT(1) NumberOfCount 
from 
    AuthTransactions WITH (NOLOCK) 
group by 
    substring((convert(varchar, PostTime, 120)), 1, 11), AccountNumber 
```

在此查询`AverageTime`中以秒为单位。但我想以以下格式查看它，`HH:MM:SS.msmsms`因为大多数时间结果都以毫秒为单位。那么是否有可能以这种格式查看结果？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:22:25.803

尝试这个：

```
SELECT
   Convert(date, PostTime) PostDay
   AccountNumber,
   Avg(Datediff(ms, TranTime, AuthProcessedTime) * 1.0) AverageTime,
   Count(*) NumberPerDay
FROM
   dbo.AuthTransactions 
GROUP BY
   Convert(date, PostTime),
   AccountNumber 
```

我消除或更正的查询存在几个问题：

*   *始终*指定`char`数据类型的长度。
*   不要将日期转换为字符串以删除时间部分。使用`DateDiff`and `DateAdd`，或者由于您使用的是 SQL 2008，您可以转换为`date`.
*   除非您真的知道自己在做什么，否则不要使用 WITH (NOLOCK)。它最终会咬你。
*   不要转化为金钱。这很奇怪。它有 2 个小数位，如果你真的想要，然后转换为小数（[something], 2）。否则有人会看到你的代码然后说“这到底是怎么回事？” 并为您“修复”它，即使那是您想要的。就像我展示的那样，只需乘以 1.0，您就可以获得足够精确的十进制转换。
*   一定要指定对象的架构。它很小，但有助于提高性能，而且（如果我没记错的话）不这样做会导致不必要的计划重新编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:50:15.713

在您`datediff(ss,TranTime,AuthProcessedTime)` 将 ss 更改为 ms。ms 用于毫秒。

像这样

```
select substring((convert(varchar,PostTime,120)),1,11),
AccountNumber,
sum(Cast (datediff(ms,TranTime,AuthProcessedTime)  as money)) / COUNT(1)
AverageTime,COUNT(1) NumberOfCount from AuthTransactions
WITH(NOLOCK) group by 
substring((convert(varchar,PostTime,120)),1,11),AccountNumber 
```

# google-apps-script - 如何获取嵌入了 Google Script Gadget 的页面的 URL

> ID：11499308
> 
> 赞同：2
> 
> 时间：2012-07-16T06:45:56.273
> 
> 标签：google-apps-script

我正在寻找一种方法，该方法允许我获取嵌入了 Google Script Gadget 的当前页面的 URL。

我尝试使用 getActivePage() 但这只会返回我的 Google 站点的主页。根据这个问题：[http](http://code.google.com/p/google-apps-script-issues/issues/detail?id=568) ://code.google.com/p/google-apps-script-issues/issues/detail?id=568获取活动站点并获取活动页面有缺陷，但那是在 2011 年 9 月...

这是我的代码：

```
 var site = SitesApp.getActivePage(); 
```

我是否错误地使用了 getActivePage()？

提前谢谢你的帮助。

编辑 1 次尝试：

```
 var templates = site.getTemplates();
  var template;
  var names = '';
  for (var i = 0; i < templates.length; i++) {
    if (templates[i].getName() == 'profile') {
      template = templates[i];
      break;
    }
  }
  if (template != null) {
    var pageName = name;
    Logger.log('Found: ' + pageName);
    site.createPageFromTemplate(pageName, pageName, template);
  }
  else {
    Logger.log('Not Found');
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:52:12.250

我创建了以下脚本

```
function doGet(e) {
  var app = UiApp.createApplication();
  var lbl = app.createTextArea();
  lbl.setWidth('100%');
  lbl.setHeight('100%');
  var txt = SitesApp.getActivePage().getUrl();
  lbl.setText(txt);
  app.add(lbl);
  return app;
} 
```

以及嵌入与此脚本链接的 Google Script Gadget 的几页。该脚本的输出与 Internet 浏览器地址栏中的 URL 相同。

@LehanCoetzee 代码。

```
 var templ = HtmlService.createTemplateFromFile('profile').evaluate();
    site.createPageFromTemplate(name + ' ' + surname, name, templ); 
```

'profile' 是我通过应用程序脚本编辑器创建的 html 模板。

**编辑 01：** 我创建了一个模板页面，其中包含一个链接到我上面的脚本的小工具。脚本的名称是`ProfileTemplate`. 我还使用以下脚本创建了一个新页面。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var tb = app.createTextBox().setName('tb').setId('tb');
  var btn = app.createButton().setText('Create').setId('btn');
  var out = app.createTextArea().setId('out');
  var handler = app.createServerHandler('onBtnClick');
  handler.addCallbackElement(panel);
  btn.addClickHandler(handler);
  panel.add(tb);
  panel.add(btn);
  panel.add(out);
  app.add(panel);
  return app;
}

function onBtnClick(e) {
  var app = UiApp.getActiveApplication();
  var site = SitesApp.getActiveSite();
  var out = app.getElementById('out');
  var templates = site.getTemplates();
  var template;
  var names = '';
  for (var i = 0; i < templates.length; i++) {
    if (templates[i].getName() == 'profiletemplate') {
      template = templates[i];
      break;
    }
  }
  if (template != null) {
    var pageName = e.parameter.tb;
    out.setText('Found: ' + pageName);
    site.createPageFromTemplate(pageName, pageName, template);
  }
  else {
    out.setText('Not Found');
  }
  return app;
} 
```

如果要打开新页面，键入文本，例如 test1 或 test2，然后单击`Create`按钮，则会从模板中创建一个新页面。对于文本“test1”，模板页面将具有类似于[https://sites.google.com/a/..../.../test1](https://sites.google.com/a/..../.../test1)的 URL ，并且小工具的输出将包含此文本。

# c# - DBDataReader，重命名值

> ID：11499311
> 
> 赞同：0
> 
> 时间：2012-07-16T06:46:06.757
> 
> 标签：c#

```
 MySqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            if (dr["date_payment"].ToString() == "01.01.0001 0:00:00")
            {
                dr["date_payment"] = dr["date_payment"].ToString().Replace("01.01.0001 0:00:00", "Не оплачено");
            }
        } 
```

请帮忙，我怎样才能重命名这个？`date_payment`有 DateTime 类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:49:19.223

您不需要*格式化*DataBase 值，您需要格式化该值的*可视化*。

顺便说一句，如果需要更改数据库中的日期时间格式，请编写一些*单次运行*脚本（存储过程、C# 服务器端代码等）

希望这可以帮助。

# iphone - 在 IOS 中通过 HTTP 流式传输视频

> ID：11499312
> 
> 赞同：4
> 
> 时间：2012-07-16T06:46:07.587
> 
> 标签：iphone, ios

我正在开发我的应用程序。它需要通过服务器在 iPhone 上播放视频。我有一个视频链接[http://www.cwtmedia.se/cwtvideo.mp4](http://www.cwtmedia.se/cwtvideo.mp4)。任何人都可以建议我如何在 MPMoviePlayerController 上执行此操作。我正在使用此代码，但它不起作用。

```
enter code here

NSURL *url = [NSURL fileURLWithPath:@"http://www.cwtmedia.se/cwtvideo.mp4"];
moviePlayer1 = [[MPMoviePlayerController alloc] initWithContentURL:url];
[self.view addSubview:moviePlayer1.view];
moviePlayer1.view.frame = CGRectMake(0, 0, 320, 416); 
moviePlayer1.fullscreen=YES;
[moviePlayer1 setFullscreen:NO animated:YES];
moviePlayer1.controlStyle = MPMovieControlStyleFullscreen;

[moviePlayer1 play]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:52:35.993

顺便说一下，这是我使用 mpmovieplayercontroller 进行流式传输的方式：

```
NSURL *url = [NSURL URLWithString:videoUrl];
moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
[moviePlayer setControlStyle:MPMovieControlStyleDefault];
moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
CGRect frame;
if(self.interfaceOrientation ==UIInterfaceOrientationPortrait)
    frame = CGRectMake(20, 69, 280, 170);
else if(self.interfaceOrientation ==UIInterfaceOrientationLandscapeLeft || self.interfaceOrientation ==UIInterfaceOrientationLandscapeRight)
    frame = CGRectMake(20, 61, 210, 170);
[moviePlayer.view setFrame:frame];  // player's frame must match parent's
[self.view addSubview: moviePlayer.view];
[self.view bringSubviewToFront:moviePlayer.view];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:moviePlayer];

[moviePlayer prepareToPlay];
[moviePlayer play]; 
```

然后是委托方法：

```
- (void) moviePlayBackDidFinish:(NSNotification*)notification {
       MPMoviePlayerController *player = [notification object];
       [[NSNotificationCenter defaultCenter] 
            removeObserver:self
            name:MPMoviePlayerPlaybackDidFinishNotification
            object:player];

       if ([player respondsToSelector:@selector(setFullscreen:animated:)]){
          //self.navigationController.navigationBarHidden = YES;
          [player.view removeFromSuperview];
       }
} 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:30:16.893

据我所知，您有两种选择：

1）首先下载文件并在本地播放。像这样：

```
 NSString *url = [[NSBundle mainBundle] pathForResource:@"cwtvideo" ofType:@"mp4"];
   MPMoviePlayerController *player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:url]]; 
```

2）使用HTTP流协议。据我所知，[HTTP 流](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/Introduction/Introduction.html)是 MPMoviePlayerController 已知的唯一流协议。

希望这可以帮助。

干杯!

# php - PHP preg_replace 位数

> ID：11499314
> 
> 赞同：-1
> 
> 时间：2012-07-16T06:46:15.460
> 
> 标签：php, regex, pcre

我有这个：

```
preg_replace('/(\d{1}|\d{2})/gi', '$1', 'some number'); 
```

如果文本是一位数字 $1 返回一位数字，如果是 2 位则返回 2 位数字....，但我需要返回的数字始终是 2 位数字：

```
1 => 01 
2 => 02
...
10 => 10
...
99 => 99 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:10:34.463

你的意思是像这个？使用修饰符，使用函数`e`执行 php 代码，以及满足你的要求的任何东西。`preg_replace``str_pad``sprintf`

`preg_replace('/(\d{1}|\d{2})/ie', 'sprintf("%02d",$1)', 'some number');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:49:06.757

使用 str_pad()。它便宜很多。[http://php.net/str_pad](http://php.net/str_pad)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T06:49:47.303

为什么这么复杂？[**亲吻**](http://en.wikipedia.org/wiki/KISS_principle)和使用[`str_pad`](http://php.net/manual/en/function.str-pad.php)

```
echo str_pad($input, 2, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-10T14:38:30.180

请使用`str_pad()`. 自 PHP 5.5.0 起，该`e`修饰符已弃用，应避免使用。

# windows - 如何在一页上添加多个屏幕？Windows Phone 7 应用程序

> ID：11499317
> 
> 赞同：0
> 
> 时间：2012-07-16T06:46:23.103
> 
> 标签：windows, windows-phone-7, windows-7

**我在 Windows 手机应用程序开发方面完全是新手。到目前为止，我一直在开发 iPhone 应用程序。在 iphone 中有一个视图和视图控制器的概念。您可以在一个屏幕上添加多个视图并隐藏/显示以显示多个屏幕**。

**我正在搜索，如何在 Windows 手机应用程序开发中实现相同的目标。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:02:49.193

对于类似的模式，请参阅 MVVM：

[如何：在 Windows Phone 7 应用程序中使用 MVVM？](http://msdn.microsoft.com/en-us/gg241309.aspx)

[Windows Phone Mango：10 分钟开始使用 MVVM](http://windowsphonegeek.com/articles/Windows-Phone-Mango-Getting-Started-with-MVVM-in-10-Minutes)

[MVVM 在现实生活中的 Windows Phone 应用 Part1](http://windowsphonegeek.com/articles/MVVM-in-real-life-Windows-Phone-applications-Part1)

要隐藏/显示不同的视图/XAML 对象/面板，请使用它们的名称和可见性属性，例如：

contentpanel.Visibility = Visibility.Visible;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:05:38.490

Windows Phone 应用程序通常遵循基于页面的导航。如果你想在一个页面中实现隐藏/显示多个视图而不导航到新页面，你可以在[UserControls](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol%28v=vs.95%29.aspx)的帮助下做到这一点。

您可以根据需要定义任意数量的 UserControls (==views)，然后根据 YourPage.xaml 中的要求隐藏并显示它们

此外，您最好使用 MVVM 方法。

查看这个很好的示例以获取更多详细信息[在 Windows Phone 应用程序中实现模型-视图-视图模型模式](http://msdn.microsoft.com/en-us/library/gg521153%28v=vs.92%29.aspx)

# c# - 如何在磁盘上的序列化文件中附加数据

> ID：11499318
> 
> 赞同：5
> 
> 时间：2012-07-16T06:46:31.917
> 
> 标签：c#

我有一个用 C# 编写的程序，它将数据序列化为二进制文件并将其写入磁盘。如果我想向这个文件添加更多数据，首先我必须反序列化整个文件，然后将更多序列化数据附加到它。是否可以在不反序列化现有数据的情况下将数据附加到此序列化文件中，以便在整个过程中节省一些时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:52:48.607

您不必读取文件中的所有数据来附加数据。

您可以在附加模式下打开它并写入数据。

```
var fileStream = File.Open(fileName, FileMode.Append, FileAccess.Write, FileShare.Read);
var binaryWriter = new BinaryWriter(fileStream);
binaryWriter.Write(data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:46:07.290

现在我们知道（评论）我们正在谈论`DataTable`/ `DataSet`via `BinaryFormatter`，它变得更清楚了。如果您的意图是让它在现有表中显示为额外的行，那么不：那是行不通的。您*可以*做的是追加，但*依次*反序列化每个表，然后手动合并内容。根据您的描述，这*可能是*您最好的选择。这是一个仅使用 2 的示例，但显然您会重复反序列化/合并直到 EOF：

```
var dt = new DataTable();
dt.Columns.Add("foo", typeof (int));
dt.Columns.Add("bar", typeof(string));

dt.RemotingFormat = SerializationFormat.Binary;
var ser = new BinaryFormatter();
using(var ms = new MemoryStream())
{
    dt.Rows.Add(123, "abc");
    ser.Serialize(ms, dt); // batch 1
    dt.Rows.Clear();
    dt.Rows.Add(456, "def");
    ser.Serialize(ms, dt); // batch 2

    ms.Position = 0;

    var table1 = (DataTable) ser.Deserialize(ms);

    // the following is the merge loop that you'd repeat until EOF
    var table2 = (DataTable) ser.Deserialize(ms);
    foreach(DataRow row in table2.Rows) {
        table1.ImportRow(row);
    }

    // show the results
    foreach(DataRow row in table1.Rows)
    {
        Console.WriteLine("{0}, {1}", row[0], row[1]);
    }
} 
```

然而！`DataTable`我个人对和都有疑虑`BinaryFormatter`。如果你知道你的数据是什么，还有其他技术。例如，这可以使用“protobuf”非常简单地完成，因为 protobuf 本质上是可附加的。实际上，您需要做一些额外的事情才能**不**附加（尽管这也很简单）：

```
[ProtoContract]
class Foo
{
    [ProtoMember(1)]
    public int X { get; set; }
    [ProtoMember(2)]
    public string Y { get; set; }

}
[ProtoContract]
class MyData
{
    private readonly List<Foo> items = new List<Foo>();
    [ProtoMember(1)]
    public List<Foo> Items { get { return items; } }
} 
```

然后：

```
var batch1 = new MyData { Items = { new Foo { X = 123, Y = "abc" } } };
var batch2 = new MyData { Items = { new Foo { X = 456, Y = "def" } } };
using(var ms = new MemoryStream())
{
    Serializer.Serialize(ms, batch1);
    Serializer.Serialize(ms, batch2);
    ms.Position = 0;
    var merged = Serializer.Deserialize<MyData>(ms);
    foreach(var row in merged.Items) {
        Console.WriteLine("{0}, {1}", row.X, row.Y);
    }
} 
```

# ios4 - 如何在 uiimageview 上显示 .RGB

> ID：11499320
> 
> 赞同：0
> 
> 时间：2012-07-16T06:46:34.900
> 
> 标签：ios4, uiimageview, uiimagepngrepresentation

我有扩展名为 .RGB 的文件，需要在 uiimageview 上显示它。

为此，我需要将 .RGB 格式转换为 .PNG 或 .JPEG 等特定格式，但无法正确处理。我为此尝试了以下代码。

```
 UIImage *image=[UIImage imageNamed:@"Attachment.RGB"];
CGImageRef imageRef=[image CGImage];
UIImage *myImage = [UIImage imageWithCGImage:imageRef];
NSData *pngData = UIImagePNGRepresentation(myImage);
UIImage* imageFinal = [UIImage imageWithData:pngData];

image_view.image=imageFinal; 
```

有在线网站可以将 RGB 转换为可见图像。但我没有找到任何目标 c 的解决方案。谁可以帮我这个事 。

问候 Pagyyy123

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:18:56.817

您可以为此使用 readtex.c，这是它的开源实现。请参阅以下代码片段的示例...

```
static TK_RGBImageRec *tkRGBImageLoad(const char *fileName)
{
   rawImageRec *raw;
   TK_RGBImageRec *final;

   raw = RawImageOpen(fileName);
   if (!raw) {
      fprintf(stderr, "File not found\n");
      return NULL;
   }
   final = (TK_RGBImageRec *)malloc(sizeof(TK_RGBImageRec));
   if (final == NULL) {
      fprintf(stderr, "Out of memory!\n");
      return NULL;
   }
   final->sizeX = raw->sizeX;
   final->sizeY = raw->sizeY;
   final->components = raw->sizeZ;
   RawImageGetData(raw, final);
   RawImageClose(raw);
   return final;
} 
```

[http://opensource.apple.com/source/X11server/X11server-85/mesa/Mesa-7.2/progs/util/readtex.c](http://opensource.apple.com/source/X11server/X11server-85/mesa/Mesa-7.2/progs/util/readtex.c)

我希望上面的网址会有所帮助。

# macos - 通过 Tab 按钮打开弹出菜单

> ID：11499332
> 
> 赞同：1
> 
> 时间：2012-07-16T06:47:59.303
> 
> 标签：macos, cocoa, popupmenu

我想通过 TAB 按钮打开弹出菜单。附上一张图片来解释它。

![在此处输入图像描述](../Images/e40864cd62dd740f5702b3c7776f540e.png)

当我在第一个 textField 上按 TAB 时，它应该打开它下面的弹出菜单，依此类推。目前它只是选择弹出菜单，我们必须点击它才能打开。

如果有办法通过 TAB 打开弹出菜单，请告诉我。

谢谢

# workflow-foundation-4 - WF4 状态机重新托管：FinalState

> ID：11499336
> 
> 赞同：1
> 
> 时间：2012-07-16T06:48:21.837
> 
> 标签：workflow-foundation-4, state-machine, rehosting

我正在重新托管 WF4 工作流设计器。

对于状态机，我不知道如何通过 XAML 中的 sapt:ToolboxItemWrapper 提供“FinalState”。

没有 FinalState 类，只有“常规”状态的 State 类。State 类有一个 IsFinal 属性，所以我想它必须设置才能成为“FinalState”。

我尝试从 State 派生我自己的 FinalState 类，该类将在构造函数中设置 IsFinal，但由于 State 是密封的，因此它不起作用。

那么如何从 XAML 提供 FinalState 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:58:58.520

实际上***有***一个 FinalState 类，只是在不同的程序集中。所以要添加状态机使用：

```
<Window.Resources>
    <sys:String x:Key="AssemblyName">System.Activities, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35</sys:String>
    <sys:String x:Key="SACPAssemblyName">System.Activities.Core.Presentation, Version=4.0.0.0, Culture=neutral, PublicKeyToken="31bf3856ad364e35"</sys:String>
</Window.Resources>

<sapt:ToolboxCategory CategoryName="State Machine">

  <sapt:ToolboxItemWrapper  AssemblyName="{StaticResource AssemblyName}">
       <sapt:ToolboxItemWrapper.ToolName>
          System.Activities.Statements.Statemachine
       </sapt:ToolboxItemWrapper.ToolName>
  </sapt:ToolboxItemWrapper>

  <sapt:ToolboxItemWrapper  AssemblyName="{StaticResource AssemblyName}">
       <sapt:ToolboxItemWrapper.ToolName>
          System.Activities.Statements.State
       </sapt:ToolboxItemWrapper.ToolName>
  </sapt:ToolboxItemWrapper>

  <sapt:ToolboxItemWrapper  AssemblyName="{StaticResource SACPAssemblyName}">
       <sapt:ToolboxItemWrapper.ToolName>
          System.Activities.Core.Presentation.FinalState
       </sapt:ToolboxItemWrapper.ToolName>
  </sapt:ToolboxItemWrapper>

</sapt:ToolboxCategory> 
```

# windows-phone-7.1 - 如何在 windows phone 7 中阅读 PDF 文档？

> ID：11499338
> 
> 赞同：0
> 
> 时间：2012-07-16T06:48:27.703
> 
> 标签：windows-phone-7.1

当我点击按钮需要在 windows phone 7 中读取 PDF 文件时，我将 PDF 文件保存在一个文件夹中，并在数据库中给出了指定的路径。

如何在 windows phone 7 上阅读 PDF 文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:20:37.373

在 Windows Phone 上打开 PDF 文件有 3 种方法：

1.  使用“本机”PDF 查看器 - Adob​​e Reader

    为此，您需要 PDF 文件的位置 URI，然后您可以使用 HyperlinkBut​​ton

    ```
    <HyperlinkButton Content="Click here to open PDF"
        NavigateUri="URI of your PDF" TargetName="_blank" Margin="10,60,0,0"/> 
    ```

    或者您可以使用 WebBrowser 任务浏览到将调用 PDF 查看器的 PDF：

    ```
    WebBrowserTask browser = new WebBrowserTask();
    browser.URL = "URI of your PDF";
    browser.Show(); 
    ```

2.  使用 ComponentOne 控件查看 PDF

    [http://www.componentone.com/SuperProducts/PdfViewerPhone/](http://www.componentone.com/SuperProducts/PdfViewerPhone/)

    这将花费您一些钱，但应该可以正常工作。

3.  编写您自己的用于呈现 PDF 的控件 :)))

# ruby - 在ruby中合并2个数组

> ID：11499340
> 
> 赞同：1
> 
> 时间：2012-07-16T06:48:40.467
> 
> 标签：ruby, arrays

我有 2 个数组。例如

```
x= [1,2,3,4,5]
y= [a,b,c,d,e] 
```

如何合并它们，以便我有一个如下所示的数组

```
z=[[1,a],[2,b],[3,c],[4,d],[5,e]] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T06:55:49.980

简短的回答是......

```
x.zip y 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:04:12.090

```
1.9.3p194 :011 >   x= [1,2,3,4,5]
 => [1, 2, 3, 4, 5] 
1.9.3p194 :012 > y= ['a','b','c','d','e']
 => ["a", "b", "c", "d", "e"] 
1.9.3p194 :013 > x.zip(y)
 => [[1, "a"], [2, "b"], [3, "c"], [4, "d"], [5, "e"]] 
```

# mongodb - 关于 pymongo 中的 upsert

> ID：11499343
> 
> 赞同：0
> 
> 时间：2012-07-16T06:48:46.503
> 
> 标签：mongodb, pymongo

集合中的每条记录都有两个键“ip”和“timestamp”

```
db.posts.update({'ip' : '127.0.0.1', 'timestamp' : {'$gt' : sometimestamp}}, {'$set' : {'timestamp' : time.time()}, True) 
```

如果字段“ip”和“127.0.0.1”不在集合中或“timestamp”小于有时tamp，上述命令将插入一条新记录

现在，如果我想只插入一条新记录“ip”而“127.0.0.1”不在集合中，换句话说，保持“ip”的值是唯一的。

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:10:51.347

你可能想要做的是：

```
if( ip=127)
   if( ts > myts)
      update;
    else
      DO NOTHING;
else
   insert; 
```

所以本质上，你有两种不同类型的更新..一个是要对时间戳进行更改，另一个告诉 mongo 什么都不做，即，甚至不进行插入。我猜这对于 upsert 是不可能的。所以最好使用如下简单的更新：

```
db.posts.update ( { 'ip' : '127.0.0.1', 'timestamp' : { '$gt' : sometimestamp } } , { '$set' : { 'timestamp' : time.time() } , False) 
```

而且我不知道你会如何在 Pymongo 中编写它，但从逻辑上讲，你这样做：

```
if (db.posts.find_one( { 'ip':'127.0.0.1'} ) != null):
    db.posts.update ( {'ip' : '127.0.0.1'}, { '$set' : {'timestamp' : time.time() } } ) 
```

Unfortunately, I can't comment on the performance..

# oracle - 在 Oracle 中使用带有 INNER JOIN 的子查询时出现“缺少右括号”错误

> ID：11499344
> 
> 赞同：0
> 
> 时间：2012-07-16T06:48:53.417
> 
> 标签：oracle, subquery, inner-join

我有一个 Oracle 命令

```
Select offers.OFR_STAT,OFFER_DETAILS.*,PrevData.*
From offers
INNER JOIN OFFER_DETAILS
    ON OFFER_DETAILS.OFFER_ID=offers.OFFER_ID
INNER JOIN (
    SELECT InnerOfrDtl.*
    FROM OFFER_DETAILS as InnerOfrDtl 
    WHERE InnerOfrDtl.offer_id=offers.offer_id
) AS PrevData
    ON PrevData.SCHEDULE_TYPE=OFFER_DETAILS.SCHEDULE_TYPE 
```

运行时，我收到一条错误消息“缺少右括号”。在这里，我想使用内部联接的子查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T06:54:03.207

尝试在右括号之后和之前删除 AS `PrevData`。据我了解，Oracle 不允许使用关键字 AS 作为表别名。

* * *

该查询不需要子查询。你可以写：

```
SELECT o.OFR_STAT, d.*, p.*
  FROM offers o
  JOIN Offer_Details d ON d.Offer_ID = o.Offer_ID
  JOIN Offer_Details p
    ON p.Offer_ID = o.Offer_ID
   AND p.Schedule_Type = d.Schedule_Type 
```

我并不完全相信这个查询是有道理的，但这完全是另一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:29:53.337

旧版本的 Oracle（肯定是 8i，也可能是 9i）在显式 INNER JOIN 方面存在问题。用隐式（非ANSI？）内部连接替换它们可以解决问题。

[https://forums.oracle.com/forums/thread.jspa?threadID=328028](https://forums.oracle.com/forums/thread.jspa?threadID=328028)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T06:55:56.040

删除`AS`子查询的关键字，Oracle 不支持：

```
Select offers.OFR_STAT,OFFER_DETAILS.*,PrevData.*
From offers
INNER JOIN OFFER_DETAILS
    ON OFFER_DETAILS.OFFER_ID=offers.OFFER_ID
INNER JOIN (
    SELECT InnerOfrDtl.*
    FROM OFFER_DETAILS as InnerOfrDtl 
    WHERE InnerOfrDtl.offer_id=offers.offer_id
) PrevData  -- <<<< here is the change
    ON PrevData.SCHEDULE_TYPE=OFFER_DETAILS.SCHEDULE_TYPE 
```

# php - codeigniter 多次提交按钮点击。（不阻止多次提交或点击）

> ID：11499345
> 
> 赞同：0
> 
> 时间：2012-07-16T06:48:57.710
> 
> 标签：php, forms, codeigniter

我有一个注册表单，并且我已经将电子邮件列设置为在数据库中是唯一的，因此如果用户使用使用的电子邮件地址注册，则不允许重复电子邮件。

我的问题是，如果用户使用新电子邮件注册（意味着数据库中没有）并且他/她点击太快或什么。第一次提交请求将成功插入数据库并返回错误消息“电子邮件不可用或未使用”。

如果用户点击太快，我如何防止第二个或其余请求？

注意，我需要防止在服务器端而不是客户端像禁用按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:57:37.877

当注册成功时，设置一个带有一些键值和时间的会话。因此，当注册请求到达服务器时，只需在短时间内检查同一会话上是否已经成功注册。如果是这样，请不要进入注册过程，只需显示成功消息，就像您在第一个请求中显示的那样。

当出现验证错误时，您不需要做任何事情，因为第二次验证表单并没有什么坏处。

注意：如果您通过单击后禁用提交按钮来实现这一点，将是最简单的解决方案。

# javascript - 单击内容向上滑动并向下滑动以下内容？

> ID：11499346
> 
> 赞同：0
> 
> 时间：2012-07-16T06:49:00.170
> 
> 标签：javascript, jquery

```
 <table>
    <tr class="clicke">
        <td colspan="2">
            <img src="images/title_.gif" vspace="0" hspace="0" width="690" height="65"
            border="0" alt="" />
        </td>
    </tr>
    <tr class="tbl_even">
        <td class="required">Name (First, Middle Initial, Last)</td>
        <td>
            <input type="text" name="realname" />
        </td>
    </tr>
    <tr class="tbl_odd">
        <td>Birth Date</td>
        <td>
            <input type="text" name="Birth Date" />
        </td>
    </tr>
    <tr class="clicke">
        <td colspan="2">
            <img src="images/informati.gif" vspace="0" hspace="0" width="690" height="65"
            border="0" alt="" />
        </td>
    </tr>
    <tr class="tbl_odd">
        <td>Present Address</td>
        <td>
            <input type="text" name="Present Address" style="width:250px;" />
        </td>
    </tr>
    <tr class="tbl_even">
        <td class="required">City</td>
        <td>
            <input type="text" name="City" value="credit-application.php" />
        </td>
    </tr>
</table> 
```

当点击 时`clicke class tr`，后面的 tr 会慢慢隐藏，直到下一个 `clicke`tr。再次点击时，以下 tr 内容会减速显示。

我的代码：

```
$(document).ready(function(){
    $(".clicke").click(function(){
        $("tr").slideToggle("slow");
    }

    );
  }); 
```

但是所有的tr都是效果，这不是我想要的，如何确定相关的tr内容。谢谢你

对不起，也许我没有把问题说清楚。例如：

```
<tr class="clicke">

        </tr>

click the tr. those tr will be show/hide

<tr class="tbl_even">
            <td class="required">Name (First, Middle Initial, Last)</td>
            <td>
                <input type="text" name="realname" />
            </td>
        </tr>
        <tr class="tbl_odd">
            <td>Birth Date</td>
            <td>
                <input type="text" name="Birth Date" />
            </td>
        </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T06:53:56.347

试试这个，它会工作。

```
$(document).ready(function(){
    $(".clicke").click(function(){
        $(this).nextAll("tr:eq(0), tr:eq(1)").slideToggle("slow");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T06:56:47.270

编辑：我看到你已经更新了你的问题，让你的意图更清楚。我认为实现您想要的最佳方法是将表单字段分组到一个元素中，然后切换该元素。

我认为这比同时为多个表行设置动画更好，因为我假设您的目标是在单个动画中一次为所有关联字段设置动画。

您可以这样做：

```
<h2 class="clicke">CLICK ME #1</h2>
<table>
    <tr class="tbl_even">
      <td class="required">Name (First, Middle Initial, Last)</td>
      <td><input type="text" name="realname" /></td>
    </tr>
    <tr class="tbl_odd">
      <td>Birth Date</td>
      <td><input type="text" name="Birth Date" /></td>
    </tr>
</table>

<h2 class="clicke">CLICK ME #2</h2>
<table>
    <tr class="tbl_odd">
      <td>Present Address</td>
      <td><input type="text" name="Present Address" /></td>
    </tr>
    <tr class="tbl_even">
      <td class="required">City</td>
      <td><input type="text" name="City" /></td>
    </tr>
</table>​​​ 
```

jQuery：

```
$(document).ready(function(){
    $('.clicke').next('table').hide();
    $('.clicke').click(function(){
        $(this).next('table').slideToggle('slow');
    });
});​ 
```

这是一个演示：http: [//jsfiddle.net/ZvFQm/1/](http://jsfiddle.net/ZvFQm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:05:48.363

我不能正确理解，但这可能是一个解决方案：

```
$(".clicke").toggle(
    function(){
        $(this).parent().find("tr").eq(1).hide();

},function(){
         $(this).parent().find("tr").eq(1).show();

} ); 
```

看[这里](http://jsfiddle.net/TPxHy/)看结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:16:14.607

请尝试在 [此处的演示演示中编辑表格格式](http://jsfiddle.net/hQKFf/)

它所做的就是找到下一张`.slide`桌子并执行`slideToggle`

```
 $(".clicke").click(function(){
        $(this).next('tr').find('.slide').slideToggle("slow");
    }); 
```

# php - 在 PHP 中按 Desc 顺序对多个数组进行排序

> ID：11499352
> 
> 赞同：0
> 
> 时间：2012-07-16T06:49:30.390
> 
> 标签：php

我需要按 desc 顺序对以下数组进行排序`ref_no`。例如：在 location`[0]`应该有带有 id`16`的属性（因为它`ref_no`更大）和在`[1]`带有 id 的属性`10`。

*请注意：主数组的大小是动态的，属性数组的大小保持不变。

```
Array
(
[0] => Array
    (
        [Property] => Array
            (
                [id] => 10
                [member_id] => 2
                [ref_no] => 333
             }
     )

  [1] => Array
    (
        [Property] => Array
            (
                [id] => 16
                [member_id] => 4
                [ref_no] => 509
             }
     )

 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:58:39.757

申请[`usort`](http://php.net/manual/en/function.usort.php)

```
 usort($input, function ($a, $b) {return ($a['ref_no']>$b['ref_no']);}); 
```

# ruby-on-rails - rails 集成测试通过 ruby -Itest 通过，通过 rake test:integration 失败

> ID：11499362
> 
> 赞同：3
> 
> 时间：2012-07-16T06:50:33.793
> 
> 标签：ruby-on-rails, devise, ruby-on-rails-3.2, cancan, rails-admin

我正在关注 rails_admin 自述文件。我已经设置了 devise 和 cancan，只有组 admin 的用户可以访问 rails_admin。这是测试

```
test "try to access rails_admin as a non admin user" do
  get_via_redirect '/users/auth/facebook'
  assert_response :success
  assert_match 'Successfully authenticated', flash[:notice]

  puts User.all.count
  puts User.first.name
  puts Group.find(User.first.group_id).name
  assert_equal Ability.new(User.first).can?(:access, :dashboard), false
  puts session

  get '/admin'
  assert_response :found
  assert_redirected_to '/'
  assert_match 'You are not authorized', flash[:alert]
end 
```

当我运行 'ruby -Itest test/integration/test.rb' 时全部通过。输出是

```
1
Facebook User
user
{"session_id"=>"5345e64582b2557d0d02cd2011461467", "warden.user.user.key"=>["User", [2], "$2a$04$B.nVokuCXSWOpZ2Ezf60Cu"], "flash"=>#<ActionDispatch::Flash::FlashHash:0xb49d9a4 @used=#<Set: {:notice}>, @closed=false, @flashes={:notice=>"Successfully authenticated from facebook account."}, @now=nil>} 
```

当我运行“bundle exec rake test:integration”时，测试失败。输出是

```
1
Facebook User
user
{"session_id"=>"0005d96c17c75d0843166e5dbb4dcc05", "warden.user.user.key"=>["User", [3], "$2a$04$4f5/I9uSZbMWBdCgDA086O"], "flash"=>#<ActionDispatch::Flash::FlashHash:0xa4c0db0 @used=#<Set: {:notice}>, @closed=false, @flashes={:notice=>"Successfully authenticated from facebook account."}, @now=nil>}
F.

Finished tests in 1.054687s, 3.7926 tests/s, 24.6519 assertions/s.

1) Failure:
test_try_to_access_rails_admin_as_a_non_admin_user(RailsAdminTest):
Expected response to be a <:found>, but was <200> 
```

我也试过“assert_select 'body', 'something'”。运行 rake test:integration 时，它会输出一些 html，例如标准 rails_admin dashborad 页面。看起来用户有权访问 rails_admin。

我正在使用 rails 3.2.6、devise 2.1.2、cancan 1.6.8、rails_admin 0.0.5

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:22:51.793

我遇到了同样的问题（单个测试运行但不是一次全部运行）。这似乎是由于 rails_admin 在运行测试时默认未初始化。有帮助的是设置

```
SKIP_RAILS_ADMIN_INITIALIZER=false 
```

在调用 rake 之前。所以现在是

```
SKIP_RAILS_ADMIN_INITIALIZER=false rake test 
```

为了我。

不幸的是，我不知道如何从测试内部重新初始化 rails_admin（有一个 rake 任务要禁用但不能启用）并且每次都为 rake 测试添加前缀很烦人。此外，如果 rails_admin 被初始化，测试运行的时间也会更长（这可能是它默认关闭的原因）。

我们现在对那些检查 rails_admin 访问的测试使用一个小的测试助手。如果 SKIP_RAILS_ADMIN_INITIALIZER 为真，帮助程序立即返回并记录警告，因此不会在正常的开发系统上运行测试。在我们的持续集成系统上设置了 SKIP_RAILS_ADMIN_INITIALIZER=false 并运行测试。

# math - 使用简单的数学添加和减去月份

> ID：11499363
> 
> 赞同：0
> 
> 时间：2012-07-16T06:50:35.727
> 
> 标签：math

我正在寻找数学公式来添加和减去日期到/从日期。我只需要知道年份和月份，因此可以忽略天数。

这是我想出的添加月份的伪代码：

```
OldYear = 2012 // current year
OldMonth = 3 // current month
AddMonths = 0 // the months to be added

FooBar = OldMonth + AddMonths

NewYear = OldYear + FooBar / 12
NewMonth = FooBar % 12

IF NewMonth = 0
    NewYear = NewYear - 1
    NewMonth = 12
END IF

// set AddMonths to 0 and the result will be 2012.03
// set AddMonths to 6 and the result will be 2012.09
// set AddMonths to 9 and the result will be 2012.12
// set AddMonths to 11 and the result will be 2013.02
// set AddMonths to 23 and the result will be 2014.02
// set AddMonths to 38 and the result will be 2015.05 
```

它真的很好用，但有更好的方法吗？我真的不喜欢 IF NewMonth = 0 重新调整的需要。

但我的实际问题是，我想不出一个对应的公式来减去几个月。我尝试了各种事情，但一切都失败了，这让我发疯。所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:43:27.897

这是我在@Matt 的回答中的评论和@Matt 的回答的组合

如果采用从 0 开始的月份方案，公式可以大大减少。

伪代码：

```
year = 2012;  // year 2012
month = 6;    // July (NOT June)
monthToAdd = -20;  // +ve/-ve means add/subtract

resultYear = (year * 12 + month + monthToAdd) /12;
resultMonth = (year * 12 + month + monthToAdd) mod 12;

// resultYear == 2010
// resultMonth == 10  , which means November 
```

* * *

编辑：上面的原始答案假设了一个从零开始的月份计划，这似乎被一些人忽略了。为了避免混淆，我们当然可以使用更直观的从 1 开始的月份方案，并在计算过程中进行 0 基转换（虽然它使计算稍微混乱）：

```
year = 2012;  // year 2012
month = 7;    // July
monthToAdd = -20;  // +ve/-ve means add/subtract

resultYear = (year * 12 + (month - 1) + monthToAdd) /12;
resultMonth = ((year * 12 + (month - 1) + monthToAdd) mod 12) + 1

// resultYear == 2010
// resultMonth == 11  , which means November 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:35:23.337

一种可能的解决方案是乘以`OldYear`12（从而将其转换为月份），分别添加或减去`AddMonths`or `SubMonths`，然后转换回`NewYear`并`NewMonth`使用整数和模除法（取决于您的编程语言，您可以简化这个）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-12-21T23:36:17.247

完全归功于 Adrian Shum 构建了主要逻辑，但我认为有一个边缘情况，对于我们返回与我们所在月份相同的月份数的情况，代码不是 100% 准确的。例如，如果我们是3 月，我们回去 3 个月，我们应该在 12 月（2 月、1 月和 12 月）结束。

这是修改后的版本：

```
year = 2020;  
month = 4;    
monthToAdd = -1; 
resultYear = (year * 12 + month + monthToAdd) /12;
resultMonth = (year * 12 + month + monthToAdd) % 12;

if month+monthToAdd == 0:
    resultMonth=12

elif (abs(monthToAdd)%month)==0:
    resultMonth=month

print(resultMonth)
print(resultYear) 
```

# python - 为什么我的 URL 编码不起作用？

> ID：11499365
> 
> 赞同：1
> 
> 时间：2012-07-16T06:50:48.877
> 
> 标签：python, twitter, html-encode

为 Twitter 编码一些编程 url，但由于某种原因，我的 url 给了我 500 个错误。

任何人都可以注意到这有什么问题吗？我正在尝试查看是否有任何我没有注意到或产生此错误的内容。

这是代码：

```
response = urllib2.urlopen("http://search.twitter.com/search.json?q=" + urlinfo + "&rpp=1&page=1") 
```

这是最终的输出：

```
http://search.twitter.com/search.json?q=feel%2BOR%2Bi+feel%2BOR%2Bim+feeling%2BOR%2Bi%27m+feeling%2BOR%2Bi+am+feeling%2BOR%2Bi+dont+feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmakes+me+feel%2BOR%2Bmade+me%2BOR%2Bmade+me+feel%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so%2BOR%2Bim+so%2BOR%2Bi+don%27t+feel&rpp=1&page=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:36:11.283

我收到一个 twitter 131 响应，根据文档，它应该被视为 HTTP 500 响应。

这不是您问题的直接答案，但您是否考虑过：

```
http://search.twitter.com/search.json?q=feel+OR+make 
```

无论如何，会涵盖你所有的 OR'ing 的绝大部分吗？

# python - 带有 idl 的 Python COM 服务器

> ID：11499366
> 
> 赞同：3
> 
> 时间：2012-07-16T06:50:56.820
> 
> 标签：python, com, idl

我必须创建一个 tlb 文件，这样我才能从 .Net 访问 Python COM 服务器。我只想要一个接受字符串并返回字符串的方法（Process）。idl文件如下：

```
import "oaidl.idl";
import "ocidl.idl";
[
    uuid(A66551C8-ADB4-4A1E-BB19-39F356282A7E),
    dual,
    oleautomation
]
interface IMyInterface : IDispatch {
    HRESULT Process([in, out] BSTR str);
}

[
  uuid(BE0CDA23-A2D0-40E5-8D33-61DBE78E0A03)
]
library MyTypeLib
{
    importlib("stdole2.tlb");

    [uuid(F235B9D8-9C1A-44C3-A59F-3C822EC82A67)]
          coclass MyObject {
          [default] interface IMyInterface;
    };
}; 
```

使用midl这个成功生成了一个tlb文件python程序如下：

```
import comtypes
import comtypes.server.localserver

from comtypes.client import GetModule
# generate wrapper code for the type library, this needs
# to be done only once (but also each time the IDL file changes)
GetModule("audiclave.tlb")

from comtypes.gen.MyTypeLib import MyObject

class AudiclaveImpl(MyObject):
    # registry entries
    _reg_threading_ = "Both"
    _reg_progid_ = "Audiclave.Analysis.1"
    _reg_novers_progid_ = "Audiclave.Analysis"
    _reg_desc_ = "Python engine for Audiclave"
    _reg_clsctx_ = comtypes.CLSCTX_INPROC_SERVER | comtypes.CLSCTX_LOCAL_SERVER
    _regcls_ = comtypes.server.localserver.REGCLS_MULTIPLEUSE

    def Process(self, a):
        return str(a) + "executed"

if __name__ == "__main__":
    from comtypes.server.register import UseCommandLine
    UseCommandLine(AudiclaveImpl) 
```

我用

```
python audiclaveAnalysis.py /regserver 
```

现在我打开 python 并执行以下操作：

```
>>> from comtypes.client import CreateObject
>>> x = CreateObject("Audiclave.Analysis")
# Generating comtypes.gen._BE0CDA23_A2D0_40E5_8D33_61DBE78E0A03_0_0_0
>>> x.Process("test")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python26\lib\site-packages\comtypes\__init__.py", line 596, in call_with_inout
v = atyp.from_param(v)
AttributeError: 'str' object has no attribute 'from_param' 
```

如何定义一种方法来获取字符串参数并返回一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:00:50.583

这有效

```
HRESULT Process([in] BSTR str, [out, retval] VARIANT *pResult); 
```

# c# - WinForms：控件的最大大小为 65535 - 解决方法？

> ID：11499368
> 
> 赞同：4
> 
> 时间：2012-07-16T06:51:04.973
> 
> 标签：c#, winforms

在 WinForms 和 C# 中，似乎我无法创建宽于 65535 的控件。如果将其设置为 70.000，则该值将重置为 65535。使用 ILSpy 挖掘 Control.Size 的源代码，我无法立即找到负责的代码用于夹紧尺寸。

那么这是 Win32 API 或 Windows 窗体的限制吗？有没有办法解决这个问题，例如使用非托管互操作？

我需要这么大的控件的原因是我在它上面绘制了非常长的音频文件的音乐波形。（是的，我可以直接绘制波形，无需包含控件；但这需要大量重构）。我不是在这里谈论绘图代码。显然，只需要绘制可见部分，但问题是我想要一个宽度为 200.000 像素的控件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T07:20:47.567

这是一个winapi限制。一个相当困难的问题是，鼠标位置通过 WM_MOUSEMOVE 消息报告，鼠标位置被打包到 LPARAM 参数中。X 位置为 16 位，Y 位置为 16 位。

你将不得不处理它。它不是对例如面板的 AutoScrollMinSize 属性的限制。无论如何，在这种情况下你总是会使用它，从 AutoScrollPosition 开始绘画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:55:11.607

我确实认为它是 Windows 窗体的一个限制，事实是，对于您的需要，WPF 窗体会更合适，因为它允许更大的负载。只是我的观点。

# alfresco - wso2 产品和 alfresco 集成

> ID：11499369
> 
> 赞同：3
> 
> 时间：2012-07-16T06:51:08.473
> 
> 标签：alfresco, wso2

我找到了关于在 WSO2 Appserver 上安装 Alfresco 的教程。

[http://sanjeewamalgoda.blogspot.com/2011/09/how-to-install-alfresco-on-wso2.html](http://sanjeewamalalgoda.blogspot.com/2011/09/how-to-install-alfresco-on-wso2.html)

这是否意味着我也可以将身份验证委托给 wso2 安全配置？我不想分别管理这两个地方的安全性。

如果我要在 wso2 中部署 Alfresco，我会想使用 wso2 身份服务器进行身份验证。我正在考虑在 wso2 Appserver 中运行的 Alfresco，使用身份服务器进行身份验证，使用 ESB 进行 Alfresco 服务。这种方法是否也适用于其他应用程序？

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:01:11.840

WSO2 Identity Server 有一个 LDAP 接口。所以我们可以让第三方软件使用该接口并进行身份验证。

此外，如果您在 WSO2 Application Server 中托管 Alfresco，则该应用程序使用的是 WSO2 Cabon 平台公开的安全框架，因此安全集成变得无缝。当您使用托管应用程序时，您不仅可以利用 WSO2 平台的安全模型，还可以利用监控、日志记录以及多租户、计费、计量等云功能WSO2 应用服务器。因此，您最好专注于业务逻辑和解决方案方面，而 WSO2 平台可以让您摆脱横切的 QoS 问题。

# matlab - 如何在 Matlab 中用数据坐标绘制箭头？

> ID：11499370
> 
> 赞同：24
> 
> 时间：2012-07-16T06:51:14.200
> 
> 标签：matlab, plot, annotations, figure

我知道有一个名为 annotation 的函数可以绘制箭头或双箭头。但是注释只能以标准化单位绘制。例如：

```
annotation('arrows',[x1 x2],[y1 y2]) 
```

这里，[x1, x2] 应该是小于 1 的比率数。

所以，我的问题是如何绘制具有真实值而不是标准化值的箭头？

我想知道是否有任何其他函数可以接近这个，或者是否有任何函数可以获取图形的轴值，以便我可以将真实值调整为标准化值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T12:07:22.507

For the positioning of annotations, Matlab offers the function `dsxy2figxy` to convert data space points to normalized space coordinates. However, for whatever reasons, the function is not included in the Matlab distribution and has to be "created" first.

Copy the following line into the command window and execute it to open the function in your editor.

```
edit(fullfile(docroot,'techdoc','creating_plots','examples','dsxy2figxy.m')) 
```

To use the function `dsxy2figxy` save it somewhere in your matlab search path.

Please find the full instructions for the function `dsxy2figxy` at matlab-central: [http://www.mathworks.de/help/techdoc/creating_plots/bquk5ia-1.html](http://www.mathworks.de/help/techdoc/creating_plots/bquk5ia-1.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-03-29T17:07:59.310

即使`annotation`用作`normalized`默认单位，您也可以将这些对象关联到当前坐标区 ( `gca`) 并使用数据单位进行设置`X`和`Y`属性。

这是绘制单个箭头的示例。

```
plot(1:10);
ha = annotation('arrow');  % store the arrow information in ha
ha.Parent = gca;           % associate the arrow the the current axes
ha.X = [5.5 5.5];          % the location in data units
ha.Y = [2 8];   

ha.LineWidth  = 3;          % make the arrow bolder for the picture
ha.HeadWidth  = 30;
ha.HeadLength = 30; 
```

[![在此处输入图像描述](../Images/0d5d2263d1d342accf35dab46eed6cf3.png)](https://i.stack.imgur.com/u31ux.png)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-16T13:59:10.157

对于遇到此主题并希望在“数据空间”而不是相对于图形和/或轴的单位中绘制箭头的任何人，我强烈推荐来自文件交换的[arrow.m 。](http://www.mathworks.com/matlabcentral/fileexchange/278)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-13T00:43:55.333

我刚刚发现了这种方法，因为我不想打扰标准化单位。使用乳胶解释器：

```
figure
plot([1:5],[1:5]*3,'.-')
%// Say I want to put an arrow pointing to the location, [3 9]    
text(2.94,8.3,'\uparrow','fontsize',20)
text(2.8,7.8,'point [3,9]') 
```

要使箭头更长，请使用更大的字体。

**优点**

*   比使用标准化单位更容易、更快、更快
*   不需要安装任何功能（对我们懒惰的人有好处..）
*   利用 LaTeX 解释器，有一系列箭头（上、下、左、右和其他角度（参见[符号列表](http://www.artofproblemsolving.com/Wiki/index.php/LaTeX%3aSymbols)）

**缺点**

*   绝对需要反复试验/调整才能获得箭头相对于 POI 的正确位置。
*   对箭头长度的控制有限
*   解释器 (boo) 无法理解某些乳胶命令。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-16T10:17:41.363

如果我没记错的话，您需要计算轴相对于图形的位置。

它应该像：

```
%% example plot
clf
plot(rand(5,2)*5)
%% get info specific to the axes you plan to plot into
set(gcf,'Units','normalized')
set(gca,'Units','normalized')
ax = axis;
ap = get(gca,'Position')
%% annotation from 1,2 to 3,4
xo = [1,3];
yo = [2,4];
xp = (xo-ax(1))/(ax(2)-ax(1))*ap(3)+ap(1);
yp = (yo-ax(3))/(ax(4)-ax(3))*ap(4)+ap(2);
ah=annotation('arrow',xp,yp,'Color','r'); 
```

**注意**原始计算中的固定偏移量 - ap(3),ap(4) 是 gca 的宽度和高度，而不是角位置

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T08:36:03.253

创建注释对象后，您应该将属性*Units*设置为绝对值。例子：

```
arrowObj = annotation('arrow', [0.1 0.1], [0.5 0.5]);
set(arrowObj, 'Units', 'centimeters');
set(arrowObj, 'Position', [1 1 3 5]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-23T02:39:55.467

一种方法是在轴单位中定义一个箭头：

```
Ax=[0 -0.003 0.003 0];       % (Ax,Ay) form an upward pointing arrowhead.
Ay=[0.01 0.0060 0.0060 0.01];
Ax=Ax-mean(Ax);  % center it on zero
Ay=Ay-mean(Ay); 
```

然后在曲线 vv 上所需的箭头索引处，计算

```
x1=vv(in,1); y1=vv(in,2);
x2=vv(in+1,1); y2=vv(in+1,2);
u=x2-x1;
v=y2-y1;
th=-pi/2+atan2(v,u);
R=[cos(th) -sin(th); sin(th) cos(th)];   % Rotation matrix for local slope of vv.
A=R*[Ax;Ay];    % Rotate the arrowhead.
patch(x1+A(1,:),y1+A(2,:),'r','LineWidth',0.01)   % plot rotated arrowhead at (x1,y1).
plot(x1+A(1,:),y1+A(2,:),'r','LineWidth',0.01)    % Kludge to make boundary red too (I'm sure there is a more elegant way). 
```

为我工作，适合我的特殊情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-15T04:34:48.320

您可以在（有据可查的）[DaVinci Draw 工具箱](http://davinci-draw.com)中使用“箭头”组件（完全披露：我编写/出售工具箱，尽管箭头是免费的）。

示例语法和示例输出如下。

```
davinci( 'arrow', 'X', [0 10], 'Y', [0 2], <plus-lots-of-options> ) 
```

[![在此处输入图像描述](../Images/80ac7bd0b40bbd533158e631daeae237.png)](https://i.stack.imgur.com/4t7KL.png)

# javascript - 你将如何使用 JS 组织 UI 状态？

> ID：11499377
> 
> 赞同：1
> 
> 时间：2012-07-16T06:51:31.407
> 
> 标签：javascript, html, user-interface

我有一个应用程序，它主要是通过锚标记链接的传统静态 HTML 页面，但最近我一直在使用 JS 添加越来越多的动态行为。

我需要以隐藏/显示/为每个“屏幕”创建不同元素的形式在众多 UI 状态之间“兼顾”。（假设主页和整页博客文章。）

如果我只有 2 个状态，这很容易，但随着添加越来越多的“屏幕”而变得复杂。

**问题：** 我将如何组织各种 UI 状态以便在它们之间直接切换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:57:07.297

如果您在管理 UI 状态时遇到很多复杂问题，这很可能表明应用程序逻辑与 UI 处理的耦合过于紧密。如果在某些地方您需要检查 UI 的状态以决定应用程序逻辑应如何反应，这一点尤其明显。

随着它变得越来越复杂，您可能需要考虑使用某种 MVC 模式来解耦 UI。或者更好的是，使用预先构建的框架，例如[Knockout.js](http://knockoutjs.com/)。

注意：[其他](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/) [框架](http://www.faridesign.net/2012/04/20-javascript-frameworks-mvvm-templating-licenses-etc/) [可用](http://net.tutsplus.com/articles/web-roundups/20-javascript-frameworks-worth-checking-out/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:01:41.917

我会使用 JavaScriptMVC，它是一个轻量级框架，在过去一年左右的时间里投入了大量工作。通过拥有客户端 mvc，您可以设置两个不同的视图并轻松地在它们之间切换。

您可能还想研究 sproutcore

# php - php。如何删除文件名部分？

> ID：11499379
> 
> 赞同：0
> 
> 时间：2012-07-16T06:51:40.433
> 
> 标签：php, regex

我有：

```
$filename =  basename(__FILE__);
$id = preg_replace("/\\.[^.\\s]{3,4}$/", "", $filename); 
```

`$id`现在是没有扩展名的文件名。如何从文件中不仅删除扩展名，还删除前缀和后缀？

prefix_ineedthis_suffix.php ->ineedthis

* * *

更新：感谢您的回答！不幸的是，我只能将一个答案标记为答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:57:28.213

```
$prefix = 'prefix_';
$suffix = '_suffix';

$pattern = sprintf('/%s(.+)%s/i', $prefix, $suffix);

if (preg_match($pattern, $filename, $matches)) {
    $id = $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:58:14.643

改为使用[`basename(string $path , string $suffix)`](http://us3.php.net/manual/en/function.basename.php)。如果需要，这可以删除目录部分和扩展部分。

```
$id = basename(__FILE__, "_suffix.php")
$prefix = "prefix_";
if (substr($id, 0, strlen($prefix) ) == $prefix) {
    $id = substr($id, strlen($prefix), strlen($id) );
} 
```

根据[这个问题](https://stackoverflow.com/questions/4517067/php-remove-a-string-from-the-beginning-of-a-string)，这比使用 RegEx 更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:00:13.123

如果“前缀”和“后缀”是由`_`（下划线）分隔的部分，那么您可能根本不需要正则表达式：

```
 $parts = explode("_", $filename);
 array_shift($parts);
 array_pop($parts);
 $ineedthis = implode("_", $parts); 
```

或者，如果`ineedthis`肯定不包含下划线，则：

```
 $parts = explode("_", $filename);
 $ineedthis = $parts[1]; 
```

* * *

如果您仍然想使用正则表达式，那么：

```
if(preg_match("/^[^_]+_(.*)_[^_]+\.[a-z]{3,4}$/", $filename, $match))
   $ineedthis = $match[1];
else
   /// oops! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T06:59:55.713

您可以使用 explode() 两次首先删除扩展名，然后删除前缀和后缀。这会将所有部分存储在数组中，如果您以后需要这些部分，这将很方便。

# android - 没有代理的 Android 不工作？

> ID：11499380
> 
> 赞同：7
> 
> 时间：2012-07-16T06:51:52.290
> 
> 标签：android, proxy, httpurlconnection

我需要在我的应用程序中设置没有代理的条件；为此，我使用了以下代码：

```
URL url = null;

try {
    url = new URL(uri.toURL().toString());
} catch (MalformedURLException e3) {
    e3.printStackTrace();
}

try {
    //client = (HttpURLConnection) url.openConnection(java.net.Proxy.NO_PROXY);
    Properties systemProperties = System.getProperties();

    systemProperties.setProperty("http.nonProxyHosts",ServerIP);
    systemProperties.setProperty( "proxySet", "false" );
    systemProperties.setProperty("http.proxyHost","");
    systemProperties.setProperty("http.proxyPort","");
    URLConnection conn = url.openConnection(Proxy.NO_PROXY);

    conn.connect();
} catch (IOException e3) {
    e3.printStackTrace();
} 
```

但是我遇到了*网络无法访问*的异​​常！！

任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T04:07:57.450

如果我没有误解您的问题...您想在通过 WIFI 连接时直接连接到服务器？

```
HttpURLConnection con =null;
URL url = new URL("xxxxx");
boolean isProxy=true;

ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
if(cm!=null){
    NetworkInfo  ni = cm.getActiveNetworkInfo();
    if(ni!=null){
        if(! ni.getTypeName().equals("WIFI")){
           isProxy=false;
        }
        if(isProxy){
            Proxy proxy=new Proxy(java.net.Proxy.Type.HTTP,new InetSocketAddress(android.net.Proxy.getDefaultHost(),android.net.Proxy.getDefaultPort()));
            con = (HttpURLConnection) url.openConnection(proxy);
        }else{
            con = (HttpURLConnection) url.openConnection();
        }
    }
} 
```

ps 请注意，上面的代码片段可能会遗漏一些错误处理。谢谢 ;）

# xcode - Return 键的作用类似于 Xcode 中的 Enter

> ID：11499381
> 
> 赞同：2
> 
> 时间：2012-07-16T06:51:52.577
> 
> 标签：xcode

在过去 24 小时内的某个时间点，我的返回键在 Xcode 中停止正常运行。例如，如果我在控制台中输入：

```
po someObject 
```

然后按回车键，以前这会运行命令。现在，它只是进入一个换行符。如果我点击函数返回，它会按预期运行命令。

我在“查找”窗格中得到了同样的行为。

我不相信我最近对 ​​Xcode 或 OS X 进行了任何更新。

任何想法我可能做了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:31:27.337

首先要看的地方是`Preferences`> `Key Bindings`，特别注意`Customized`选项卡，看看那里有没有什么不对劲的地方。仔细看，我没有看到任何直接看起来像“执行控制台命令”的绑定，但这是一个很长的列表。您还可以通过选择未设置的命令并尝试将其设置为来查看当前绑定的返回`return`，此时冲突将显示在状态栏中。

使用默认设置，似乎`return`绑定到“插入换行符”，而`fn`+`return`绑定到“插入换行符而不进行额外操作”，这听起来很像您所看到的相反行为：默认情况下您没有额外的操作，以及函数修饰符的通常效果。（令我印象深刻的是，您甚至想尝试该组合键。）

鉴于此，请查看`System Preferences`>`Keyboard`并确保未选中“使用所有 F1、F2 等键作为标准功能键”。这具有逆转`fn`功能键对修饰键的需求的效果，因此它也可能会产生影响`return`（这通常不会产生影响，但 XCode 显然可以区分）。我不确定这是如何意外设置的，但谁知道呢。

最后，假设这只是 XCode 的一些奇怪的怪事，你总是可以尝试经典的 Mac 应用程序把首选项文件吹走的技巧：

1.  关闭 Xcode。
2.  移动`~/Library/Preferences/com.apple.XCode.plist`到其他地方，例如您的桌面。
3.  启动 XCode，现在使用所有默认首选项。

显然你会失去你设置的任何偏好，但希望没有太多，以至于重新设置它们很麻烦。（对于粗体，您还可以尝试区分 plist 文件并以这种方式追踪问题设置。）

# c# - WCF 作为业务逻辑

> ID：11499383
> 
> 赞同：0
> 
> 时间：2012-07-16T06:52:12.703
> 
> 标签：c#, wcf, n-tier-architecture, business-logic-layer

我当前的应用程序架构计划是

UI -> WCF Bal -> 通用 Dal -> 实体模型

我创建了通用 Dal 方法，相关实体和要执行的特定操作将从业务逻辑处理。

我正在尝试在 wcf 上创建一个业务逻辑，正如之前我们曾经为单独的实体做单独的类，所以从 WCF 上下文中我混淆了如何去做？

我最初想创建一个具有通用实现的接口，例如

```
 public interface IBalService<TEntity> where TEntity:class 
{
    [OperationContract]
    IDictionary<int, string> Populatelist();

    [OperationContract]
    IEnumerable<TEntity> Viewall();

    [OperationContract]
    void Insert(TEntity obj);

    [OperationContract]
    void Update(TEntity obj);

    [OperationContract]
    void Delete(TEntity obj);
} 
```

现在这个接口应该对不同的实体有不同的实现，比如产品、类别、客户，但是 wcf 只能有一个服务类......

知道我现在应该做什么吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T06:55:20.963

简而言之，我会做的（并在某些项目中成功完成）是这样的：

*   使用 WCF 作为端点创建服务层。该层可以包含静态方法，包含在仅用作“命名空间”的类中，例如“UserService”、“MessagesService”等。世界“看到”的只是这些类。

*   使用传统的完整 OO 类在其背后创建您的业务逻辑

*   创建您的 DAL；除了 BL 访问它之外，Service Layer 也可以访问它，用于无法证明使用完整业务逻辑的简单操作。

我不会使用泛型作为 WCF 端点，它可以做到，但如果您将服务层视为单一操作的单一方法，您将赢得最终将其变成一种公共 API 的选项（如果你想要）。

# c# - 使用扩展方法中的新对象更新 IEnumerable

> ID：11499384
> 
> 赞同：4
> 
> 时间：2012-07-16T06:52:19.610
> 
> 标签：c#, extension-methods, ienumerable

我想将新的 iEnumerable 对象添加到原始对象中。我可以像下面这样在扩展方法中更新原始对象吗？

```
public static void AddItems<TSource>(this IEnumerable<TSource> orginalColl,    
IEnumerable<TSource> collectionToAdd)
{
foreach (var item in collectionToAdd)
{
    orginalColl.ToList<TSource>().Add(item);             
}             
} 
```

我这样称呼：OrgCollecation.AddItems(newCollection)。但这似乎不起作用。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:11:10.313

An`IEnumerable[<T>]` ***不适***用于添加。您可以*连接*（生成新序列），但这不会改变原始序列（/list/array/etc）。你可以做到这一点`Enumerable.Concat`，即`return orginalColl.Concat(...)`。但强调：*这不会更新原始集合*。

您*可以*做的是强制转换为`IList[<T>]`或类似的，但这*将是滥用*（并且仅适用于某些情况，而不是全部）。例如，它不适用于任何基于迭代器块（或任何其他`IEnumerable<T>`不也是`IList<T>`）的东西 - 例如，它不适用于`someSource.Where(predicte)`.

如果您希望更改源，那么您应该**传入**类似`IList[<T>]`. 例如：

```
public static void AddItems<TSource>(this IList<TSource> orginalColl,
    IEnumerable<TSource> collectionToAdd)
{
    foreach (var item in collectionToAdd)
    {
        orginalColl.Add(item);             
    }             
} 
```

（顺便说一句，`AddRange`将是上述的替代名称，以匹配`List<T>.AddRange`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:09:22.250

你不能。在您的代码中，您将源可枚举克隆到列表中，然后向其中添加元素并忘记，因为您没有返回任何内容。

尝试

```
var result = orginalColl.Concat(collectionToAdd); 
```

查看[http://msdn.microsoft.com/en-us/library/bb302894.aspx](http://msdn.microsoft.com/en-us/library/bb302894.aspx)了解更多信息和示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:25:11.557

简而言之， an`IEnumerable<T>`应该被认为是不可变的，你不能添加它。您不知道实现它的是哪种集合，例如，它可能是串行端口输入或您正在枚举的文件系统中的只读文件。

您尝试对集合执行的操作与`ICollection<T>`更好的用例相匹配；它由框架中的通用（可变）集合实现。

```
public static void AddItems<TSource>(this ICollection<TSource> orginalColl,
        IEnumerable<TSource> collectionToAdd)
{
    foreach (var item in collectionToAdd)
    {
        orginalColl.Add(item);
    }
} 
```

# sharepoint - 是否可以在 XP 机器中使用 powershell 更新 sharerpoint 2010 列表？

> ID：11499385
> 
> 赞同：2
> 
> 时间：2012-07-16T06:52:19.560
> 
> 标签：sharepoint, powershell, sharepoint-2010, powershell-2.0

我正在使用 XP service pack3。

我想将我的 csv 文件内容上传到 sharepoint 2010 列表中。

有一种使用客户端 OM 的方法（[http://www.spjeff.com/2012/02/26/powershell-upload-csv-file-to-list-both-server-and-client-om](http://www.spjeff.com/2012/02/26/powershell-upload-csv-file-to-list-both-server-and-client-om/) /），但是我无法使其与 Windows xp 一起使用。

实际上我试图使用[SharePoint Foundation 2010 Client Object Model Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=21786)。但是在系统要求中没有提到 Windows XP，而且似乎没有得到官方支持。

有没有其他方法可以使用 powershell 将内容上传到 Sharepoint 2010 列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T19:37:15.083

假设您的 XP 机器上有 PowerShell V2，您始终可以使用隐式远程处理将所有 SharePoint cmdlet 导入您的 XP PowerShell 运行空间。这将允许您在 XP 机器上本地运行 SharePoint cmdlet。

# c# - c#无法播放wav文件

> ID：11499390
> 
> 赞同：2
> 
> 时间：2012-07-16T06:52:54.520
> 
> 标签：c#, audio, media-player

尝试创建具有文本框的软件，用户可以在其中输入单词或短语，程序将使用谷歌翻译来“说出”这些单词并将该语音下载到 wav 或 mp3 文件，然后播放该文件。

一切正常，除了播放。文件将被加载到计算机，但在播放它时，Visual Studio 会给出一个错误，即文件不是有效的 wav 文件。从计算机手动播放文件时，媒体播放器播放正常！

```
 private void Puhu(string Sana) {

WebClient web = new WebClient();
web.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/4.0 (compatible; MSIE 9.0;      Windows;)");

 string encstr = string.Empty;

  string filename = "tts.wav"; 

  string s = Sana;

  encstr = Uri.EscapeDataString(s);

  web.DownloadFile("http://translate.google.com/translate_tts?tl=fi&q=" + encstr, ".\\" + filename);

   (new SoundPlayer(@"tts.wav")).Play(); // this line wont work!! Audio format is wrong!

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:01:30.610

因为你下载的文件是`MP3`文件。并且[`System.Media.SoundPlayer`](http://msdn.microsoft.com/en-us/library/system.media.soundplayer.aspx)只支持`WAV`文件：

来自 MSDN：

> `SoundPlayer`类支持从文件路径、URL、包含 .wav 文件的 Stream 或包含 .wav 文件的嵌入式资源加载 .wav 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T06:55:26.883

也许您可以尝试使用 Windows Media Player 控件？

请参阅：http: [//msdn.microsoft.com/en-us/library/dd562851 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/dd562851(v=vs.85).aspx)

我记得 SoundPlayer 是一种特定的格式，您必须以哪种格式提供波形文件..

# html - 为什么我不能摆脱这张图片下方的空间？

> ID：11499392
> 
> 赞同：0
> 
> 时间：2012-07-16T00:44:12.440
> 
> 标签：html, css, image

在过去的几个小时里，我一直在研究这个，我放弃了。我无法弄清楚这一点。

我有一个图像（标题徽标），然后是一个导航栏。图片下方有 2-3px 的空间。我系统地消除了所有外部引用的 CSS，然后添加了一些内联 CSS 来尝试解决问题。这是我现在拥有的：

```
<html lang='en'>
        <head>
            <meta charset='utf-8' />
            <title>Sci-fi's Big Mistake</title>
        </head>

        <body style='margin:0px; padding:0px; border:1px solid green;'>

            <img src='/images/farscape.jpg'  alt='Farscape style='margin:0px; padding:0px; border:1px solid red;'><br>
            <span style='border:1px solid blue;margin:0px; padding:0px; '>text</span>
            <ul id='menu' class='gold' style='margin:0px; padding:0px; border:1px solid red;'>
                <li><a href='#'>Home</a></li>
                <li class='active'><a href='#'>About</a></li>
                <li><a href='#'>Services</a></li>
                <li><a href='#'>Products</a></li>
                <li><a href='#'>Contact</a></li>
                </ul>

Shouldn't have cancelled this.
</body></html> 
```

这是页面的屏幕截图，以及我在系统上看到的内容（Win、xp，在 IE8 和 FF 13 中相同）

[http://picturepush.com/public/8737985](http://picturepush.com/public/8737985)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:54:07.593

你明白了。

[http://jsfiddle.net/dennym/XBdfk/](http://jsfiddle.net/dennym/XBdfk/)

删除`<br>`并添加`display:block`到您的图像。空间没了。

问题是`<br>`它有一个你无法删除的最小边距......我猜。您还必须在图像中添加一个`display:block`，以便文本显示在底部。

（还删除了引号中的一个小错误）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T03:53:04.157

图片标签代码不正确，您没有关闭 alt 属性，因此样式不会生效，您应该使用双引号

```
<img src='/images/farscape.jpg'  alt='Farscape style='margin:0px; padding:0px; border:1px solid red;'><br> 
```

您可能还想删除图像上的`<br>`和设置`display:block;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T11:14:56.710

如果理解正确，问题是由于图像不仅是像文本这样的内联元素，而且也被认为是“文本”。文本是用基线编写的。大多数字母在此基线上对齐，但有些字母，如 j、g 和 y 不是。因此，在呈现文本时，一些空间像素包含在底部，低于基线。您可以通过添加来推迟它

```
line-height:0px; 
```

到您的图像标签。

这种图像等于字母的想法的另一个奇怪结果是，应该并排对齐的图像显示出间隙。确实：字母之间有空格！您可以通过添加到该 sme 图像标签来解决此问题：

```
font-size:0px; 
```

* * *

解决您提到的该问题的另一种方法是使该标题图像成为具有相同尺寸的 div 的背景图像。Div 只是容器，没有类似字体的属性。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T03:25:44.150

使用 Mac OS X/Chrome 对我来说没有任何差距。我的猜测是您的浏览器在跨度上设置的 line-height 不是 1。

尝试使用重置样式表， http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)。[Firebug](https://addons.mozilla.org/en-US/firefox/addon/firebug/)还可以让您轻松地将鼠标悬停在元素上，以查看元素的大小以查明填充的来源。

# java - 更改 android 选项菜单的外观

> ID：11499395
> 
> 赞同：1
> 
> 时间：2012-07-16T06:53:23.353
> 
> 标签：java, android, user-interface

我想创建一个看起来像这样的 android 选项菜单（android 设备上的左按钮）：

![屏幕1](../Images/da06fa8529c82226978b09ff9e697bd6.png)

但使用 onPrepareOptionsMenu 创建的菜单如下所示：

![屏幕2](../Images/736fd3af444c916fd12597a4efc5a76c.png)

你能指点我如何改变菜单的外观吗？我可以在菜单 XML 中设置什么来改变它的外观，或者我应该使用：onPrepareContextMenu？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:41:54.800

添加

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

`<activity>`项目的 AndroidManifest.xml中标签的属性

```
<activity android:name="YourActivity"
          android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
          > 
```

# sql - FORMAT 函数在 sql server 2008 R2 中不起作用

> ID：11499396
> 
> 赞同：9
> 
> 时间：2012-07-16T06:53:23.727
> 
> 标签：sql, sql-server, sql-server-2008

```
DECLARE @d DATETIME = '01/01/2011';
SELECT FORMAT ( @d, 'd', 'en-US' ) AS US_Result; 
```

我在 SQL Server 2008 R2 中使用上述代码，但遇到错误：

> 'FORMAT' 不是可识别的内置函数名称。

如何使用`FORMAT`功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T07:01:15.233

FORMAT 功能从 2012 版开始可用。在早期版本中，使用这个：

```
DECLARE @d DATETIME = '01/01/2011'; 
SELECT replace(replace(' '+convert(varchar(10),@d,101),' 0',''),'/0','/') 
```

但是，格式化是前端应用程序的工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T07:26:33.997

你可以使用这个：

```
 select convert(varchar(12) , @d , 3) 
```

您可以在此处找到[http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx](http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx)更多标准日期格式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T09:39:08.630

根据：[FORMAT Function (DAX), (SQL Server 2008 R2)](http://msdn.microsoft.com/en-us/library/ee634924%28v=sql.105%29.aspx)，FORMAT() 函数存在于SQL Server 2008 R2...

编辑：正如所指出的，上面的链接仅与 DAX 有关。正确的一个（[FORMAT (Transact-SQL)](https://msdn.microsoft.com/en-us/library/hh213505.aspx)）指定 T-SQL 中的 FORMAT 仅从 SQL Server 2012 开始可用...

# java - 使用java读取换行符

> ID：11499398
> 
> 赞同：1
> 
> 时间：2012-07-16T06:53:30.953
> 
> 标签：java, line, newline

帮助伙计们，我刚刚在网上看到了这个例子。我想用它来精确打印包含新行的相同格式的文本文件的内容，但它只打印出第一行。谢谢

```
 import java.util.*;
 import java.io.*;

      public class Program
      {
          public static void main(String[] args)throws Exception
          {
          Scanner scanner = new Scanner(new FileReader("B:\\input.txt"));
          String str = scanner.nextLine(); 

          // Convert the above string to a char array.
          char[] arr = str.toCharArray();

          // Display the contents of the char array.
          System.out.println(arr);
          }
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T06:58:34.530

试试这个..按原样阅读整个文件......

```
File f = new File("B:\\input.txt");
FileReader fr = new FileReader(f);
BufferedReader br  = new BufferedReader(fr);

String s = null;

while ((s = br.readLine()) != null) {
    // Do whatever u want to do with the content of the file,eg print it on console using SysOut...etc
}

br.close(); 
```

**但是，如果您想使用 Scanner，请尝试此....**

```
while ( scan.hasNextLine() ) {
    str = scan.nextLine();
    char[] arr = str.toCharArray();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T06:55:50.543

```
public class Program {
    public static void main(String[] args) throws Exception {
        Scanner scanner = new Scanner(new FileReader("B:\\input.txt"));
        String str;
        while ((str = scanner.nextLine()) != null)
            // No need to convert to char array before printing
            System.out.println(str);
    }
} 
```

nextLine() 方法只提供一行，你必须调用它直到有一个空（~C 的 EOF）

# php - 我如何使这个 rss 提要验证？

> ID：11499406
> 
> 赞同：-1
> 
> 时间：2012-07-16T06:54:17.483
> 
> 标签：php, mysql, rss

我正在使用它来生成 RSS 以发布到我的 facebook 墙上......但在过去的 24 小时内它停止工作。我认为我使用的提要推送服务对 RSS 验证变得严格。这没有验证......我也无法得到它。任何人都可以建议进行更改以使其正常工作吗？我知道这可能看起来很乱！:os

提前致谢。

```
<?php do { ?>
<item>
<title><![CDATA[<?php echo htmlentities(strip_tags(addslashes($row_getDresses['listing_title']))); ?><?php if($_GET['type'] == "reduced-dresses"){?> (REDUCED BY <?php echo $row_getDresses['symbol'];?><?php echo $row_getDresses['reduced_price'];?> <?php echo $row_getDresses['dress_currency'];?>)<?php } else {?> (<?php echo $row_getDresses['symbol'];?><?php echo $row_getDresses['price'];?> <?php echo $row_getDresses['dress_currency'];?>)<?php }?>]]></title>
<link><![CDATA[http://www.asite.com/dress/<?php echo $row_getDresses['listing_tidy_url'];?>-<?php echo $row_getDresses['dress_id'];?>.html]]></link>
<description><![CDATA[<?php echo substr(strip_tags(addslashes(trim($row_getDresses['dress_desc'])),'ENT_QUOTES'),0,100);?>]]>...</description>
<?php if (isset($row_getDresses['main_image']) && file_exists("../listing-images/".$row_getDresses['main_image']."")) { ?>
<enclosure url="http://www.asite.com/listing-images/<?php echo $row_getDresses['main_image'];?>" length="<?php echo filesize("../listing-images/".$row_getDresses['main_image']."");?>" type="image/jpeg">
<?php }?>
<?php if ($_GET['type'] == "reduced-dresses"){?>
<pubDate><?php echo $row_getDresses['date_updated'];?> GMT</pubDate>
<?php } else { ?>
<pubDate><?php echo $row_getDresses['date_added'];?> GMT</pubDate>
<?php }?>
<category><?php echo htmlentities($pageTitle);?></category>
</item>
<?php } while ($row_getDresses = mysql_fetch_assoc($getDresses)); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:03:23.073

你没有关闭附件标签，添加一个`</enclosure>`或只是`/`在标签的末尾添加一个，比如`<enclosure ... />`

**更新**
和可读性很糟糕，这是我编码风格的代码示例：

```
<?php

   do
   {
      /* preper data */
      $category = htmlentities($pageTitle);
      $link = "http://www.asite.com/dress/{$row_getDresses['listing_tidy_url']}-{$row_getDresses['dress_id']}.html";
      $description = substr(strip_tags(addslashes(trim($row_getDresses['dress_desc'])),'ENT_QUOTES'),0,100);
      $title = htmlentities(strip_tags(addslashes($row_getDresses['listing_title'])));

      /* Reduced price? */
      if($_GET['type'] == "reduced-dresses")
      {
         $title .= " (REDUCED BY {$row_getDresses['symbol']}{$row_getDresses['reduced_price']} {$row_getDresses['dress_currency']})";
         $date = $row_getDresses['date_updated'];
      }
      else
      {
         $titlt .= " ({$row_getDresses['symbol']}{$row_getDresses['price']} {$row_getDresses['dress_currency']})";
         $date = $row_getDresses['date_added'];
      }

      /* image exists? */
      if(isset($row_getDresses['main_image']) AND file_exists("../listing-images/".$row_getDresses['main_image'].""))
      {
         $image = "http://www.asite.com/listing-images/{$row_getDresses['main_image']}";
         $image_size = filesize("../listing-images/".$row_getDresses['main_image']."");
      }
      else
      {
         $image = FALSE;
      }

      /* write RSS */
      echo "<item>";
      echo "<title><![CDATA[{$title}]]></title>";
      echo "<link><![CDATA[{$link}]]></link>";
      echo "<description><![CDATA[{$description}]]>...</description>";

      if($image)
      {
         echo "<enclosure url='{$image}' length='{$image_size}' type='image/jpeg' />";
      }

      echo "<pubDate>{$date} GMT</pubDate>";
      echo "<category>{$category}</category>";
      echo "</item>";

   } while ($row_getDresses = mysql_fetch_assoc($getDresses));

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:07:15.733

我试图使它更具可读性，是的，外壳没有关闭：

```
<?php

$new_rss = '';

do {
$new_rss .= '<item>';

$new_rss .= '<title><![CDATA[' . htmlentities( strip_tags( addslashes( $row_getDresses[ 'listing_title' ] ) ) );

if( $_GET[ 'type' ] == 'reduced-dresses') {
    $new_rss .= '(REDUCED BY ' . $row_getDresses[ 'symbol' ] .  $row_getDresses[ 'reduced_price' ] .  $row_getDresses[ 'dress_currency' ] . ')';
} else {
    $new_rss .= '(' . $row_getDresses[ 'symbol' ] . $row_getDresses[ 'price' ] . $row_getDresses[ 'dress_currency' ] . ')';
}

$new_rss .= ']]></title>';

$new_rss .= '<link><![CDATA[http://www.asite.com/dress/' . $row_getDresses[ 'listing_tidy_url' ] . '-' . $row_getDresses[ 'dress_id' ] . '.html]]></link>';

$new_rss .= '<description><![CDATA[' . substr( strip_tags( addslashes( trim( $row_getDresses[ 'dress_desc' ] ) ), 'ENT_QUOTES' ), 0, 100 ) . ']]>...</description>';

if ( isset( $row_getDresses[ 'main_image' ] ) && file_exists( '../listing-images/' . $row_getDresses[ 'main_image' ] ) ) {
    $new_rss .= '<enclosure url="http://www.asite.com/listing-images/' . $row_getDresses[ 'main_image' ] . '" length="' . filesize( '../listing-images/' . $row_getDresses[ 'main_image' ] ) . '" type="image/jpeg" />';
}

if ( $_GET[ 'type' ] == 'reduced-dresses' ) {
    $new_rss .= '<pubDate>' . $row_getDresses[ 'date_updated' ] . ' GMT</pubDate>';
} else {
    $new_rss .= '<pubDate>' . $row_getDresses[ 'date_added' ] . ' GMT</pubDate>';
}

$new_rss .= '<category>' . htmlentities($pageTitle) . '</category>';

$new_rss .= '</item>';

} while ( $row_getDresses = mysql_fetch_assoc( $getDresses ) );

echo $new_rss;

?> 
```

# gwt - 如何使 GWT Spring 项目启用 maven

> ID：11499407
> 
> 赞同：0
> 
> 时间：2012-07-16T06:54:22.623
> 
> 标签：gwt, spring-mvc, gwt-2.4, gwt-maven-plugin

我有一个使用 GWT 和 Spring 实现的项目。我想让项目启用 maven。

我怎样才能做到这一点？我见过 GWT maven 插件。是绝对需要的吗？

谢谢，萨丽莎。

* * *

在以下链接中，我无法找到如何在 eclipse 中添加插件。 **http://mojo.codehaus.org/gwt-maven-plugin/**

如何运行 **mvn 原型：生成**

我已经按照**http://www.uptick.com.au/content/getting-started-gwt-maven-and-eclipse**链接安装了 gwt maven 插件。之后一切都成功了，当我尝试创建 maven 项目时，我无法找到**gwt-maven-plugin 原型**

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:12:05.617

您可能可以自己编写.. 但同时看看[http://mojo.codehaus.org/gwt-maven-plugin/](http://mojo.codehaus.org/gwt-maven-plugin/)。我认为[原型](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/archetype.html)真的很有用，因为默认的 GWT 项目不一定遵循 Maven 目录约定。

# linux - /dev/zero 或 /dev/random - 什么更安全，为什么？

> ID：11499409
> 
> 赞同：25
> 
> 时间：2012-07-16T06:54:28.900
> 
> 标签：linux, random, zero

谁能告诉我为什么 /dev/random 在擦除硬盘驱动器中的数据时更适合安全性？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-16T06:58:04.050

简单的回答，`/dev/random`不是首选。两者同样安全。用于`/dev/zero`更轻松的验证。CPU使用率也更低，可能更快。

更完整的答案。对于现代硬盘驱动器的盘片密度，不可能从驱动器的未完全覆盖的扇区中获取信号，Gutmann 等人在很多很多年前就写到了这一点。就现代硬盘驱动器而言（我将其放置为任何容量可以以千兆字节或更高为单位测量的硬盘驱动器），如果它被覆盖，它就消失了。故事结局。因此，您将数据更改为什么并不重要。只是你改变了数据。

除此之外，即使您完全擦除硬盘驱动器，驱动器上仍可能会保留由硬盘驱动器固件重新映射的扇区中的数据，但这些数据相对较少，并且只会包含非常少量的数据在内部，更不用说您需要非常专业的设备来检索该数据（您必须编辑驱动器的`G-List`内部`System Area`才能获得它），更不用说这些扇区在第一次重新映射的原因地方是因为他们失败了。

总而言之，DoD 擦拭布是愚蠢的，Gutmann 擦拭布更愚蠢，使用`/dev/zero`它几乎 100% 的情况下都很好。如果这是一个极端情况，那么您需要非常专业地了解如何获取数据并删除数据。

> “谢谢！那么，U盘呢？”

USB 记忆棒完全是另一种动物，您需要绕过闪存控制器才能将其清除，即使是 Gutmann 擦除也不会完全删除数据，因为磨损均衡算法。但就像硬盘一样，如果你覆盖数据一次，它就消失了，诀窍是强制设备实际覆盖数据。

话虽这么说，如果你有一个便宜的 USB 记忆棒，但没有一个控制器来进行磨损均衡，那么一次 0 填充应该足以删除其中的数据。否则，您正在寻找定制硬件和焊接工作。

SSD 应被视为带有执行磨损均衡控制器的 USB 记忆棒。SSD 将始终进行磨损均衡，我不知道这条规则有任何例外。许多 U 盘没有。

如何判断 U 盘是否磨损均衡？您需要将其拆开并检查控制器芯片并在其上查找数据表。

> “您能否提供“无法从驱动器的未完全覆盖扇区获取信号”的声明的来源？我不是在谈论计算机杂志上关于数据恢复存储的测试，我说的是最坏的情况：a装备精良的政府实验室。所以我真的很想知道你怎么能保证这种说法，最好是一篇科学论文。”

我将给出一些关于在磁介质上模拟存储数字数据的理由和信息。以下内容主要是我在数据恢复公司工作时学到的东西，在某些地方可能部分不准确。如果是这样，请告诉我，我会纠正它。但这是我对材料最好的理解。

硬盘驱动器制造完成后，首先会从伺服标签写入机接收伺服标签。这是一台单独的机器，它的唯一工作是获取一个完全空白的硬盘驱动器并引导它。（这就是为什么硬盘驱动器上有孔，上面覆盖着铝带，这就是伺服贴标机放置写入头的地方。）如果你曾经有一个驱动器，当你打开它时它只会产生“点击点击点击”它是是因为它无法读取伺服标签。当硬盘驱动器通电时，它尝试做的第一件事就是将其读头扔到盘片的某个地方并获取磁道。伺服标签定义轨道。如果它看不到伺服标签，它会到达中间，发出咔哒声，将手臂拉回并再次尝试。

我提到这一点的原因是，这几乎是外部设备读取和写入硬盘驱动器的唯一实例，它大致描述了驱动器自身读头之外的硬件可以处理盘片上的数据的限制。如果有可能使伺服标签更小，硬盘制造商会更节省空间。伺服标签的空间效率相对较低，原因有两个。

1.  他们不失败是绝对关键的。如果伺服标签出现故障，则每次磁头越过该特定伺服标签时，它都会丢失磁道，这实际上意味着整个磁道不可用。
2.  它提供了一些关于硬盘驱动器硬件在处理盘片上的信息方面比外部机器好多少的想法。

一圈伺服标签定义了一个轨道。关于轨道，您必须了解一些事情。

1.  它们不一定是圆形的。它们是不完美的，并且可能包含扭曲。这是因为伺服贴标机不准确。
2.  它们不一定是同心的。他们可以并且确实交叉。这意味着某些扇区或整个磁道可能会因为伺服标签机不准确而无法使用。

伺服标签写入后，接下来是低级格式。驱动器的实际低级 1980 年代格式，除了更复杂。因为盘片是圆形的，但硬盘驱动器的速度是恒定的，所以读头下方通过的区域量是到盘片中间距离的可变函数。因此，为了从盘片中挤出最后一滴存储空间，盘片的密度是可变的并在区域中定义。在典型的 3.5" 硬盘上，会有几十个不同盘片密度的区域。

其中之一是特殊的超低密度，称为`System Area`. 系统区域是驱动器上存储所有固件和配置设置的地方。它具有超低密度，因为该信息更重要。密度越低，随机出现问题的可能性就越小。当然，它一直都在发生，但比用户区域中的事情少。

在驱动器被低级格式化后，固件被写入系统区。每个驱动器的固件都不同。为了优化驱动器以满足盘片极其精细的要求，必须调整每个驱动器。（这实际上发生在低级格式化之前，当然，因为你必须知道设备有多好才能决定制作盘片的密度。）这个数据被称为`adaptives`并保存在系统区。自适应区域中的信息是“当伺服标签告诉我我偏离轨道时我应该使用多少电压来纠正自己”，以及使硬盘驱动器实际工作所需的其他信息。如果自适应功能稍微关闭，则可能无法访问用户区域。系统区域更容易访问，因此只需很少的自适应存储在 PCB CMOS 上。

摘自本段：

1.  较低的密度意味着更容易阅读。
2.  密度越高，事情随机搞砸的可能性就越大。
3.  用户区域的密度与硬盘制造商所能达到的一样高。
4.  如果这看起来很草率和草率，那是因为它确实如此。硬盘制造商在每 GB 的价格上竞争并取胜。硬盘驱动器设计并不是真的要制作非常精心制造的设备并将它们非常小心地组合在一起，因为这已经远远不够了。当然，他们仍然这样做，但他们还必须使这些部件在软件中相互协作，因为硬件公差太宽，不再具有竞争力。

所以。因为用户的密度如此之高，实际上非常（非常（非常非常））可能在正常情况下搞砸了。这可能是由许多因素引起的，包括非常轻微的时序问题和盘片退化。硬盘驱动器的很大一部分扇区实际上包含搞砸的位。（您可以通过向您的驱动器发出`ATA28 READLONG`命令来自己验证这一点（仅对前 127 GB 左右有效。它没有`ATA48`被丢弃！）在许多扇区上多次并比较输出。您会发现它不是某些位会行为不端并表现出吸吮或关闭甚至随机翻转的情况并不罕见。）这是生活中的事实。这就是为什么我们有`ECC.`

ECC 是包含在 512（或较新驱动器中的 4096）字节数据之后的校验和，如果错误位足够少，它将纠正该数据。确切的数字取决于固件和制造商，但所有驱动器都有它并且所有驱动器都需要它（它比你预期的要高得多，比如 48-60 字节，可以检测和纠正多达 6-8 个错误字节。疯狂数学继续。）这是因为盘片的密度太高，即使是高度专业化和调整的内部硬盘驱动器设备。

最后，我想谈谈前置放大器芯片。它位于硬盘驱动器的臂上，用作扩音器。因为信号是由非常小的磁场产生的，所以它们作用在非常小的磁头上的潜力非常小。因此，您不能将硬盘磁头用于 Gutmann 方法，因为您无法从中获得足够准确的读数，从而使 Gutmann 的技术值得。

但是让我们假设 NSA 有一件神奇的设备，他们可以在 1 毫秒内对任何特定位进行非常准确的读取（精确到足以计算潜力并得出先前写入的数据）。他们首先需要什么？

首先，他们需要系统区域。因为那是存储翻译器的地方（翻译器是将 LBA 地址转换为 PCHS 地址的东西（物理气缸盖扇区，而不是假的逻辑 CHS 地址）。系统的大小面积不一样，不用魔法工具也能搞定，正常情况下也就50-100MB左右，翻译器的布局是固件特有的，所以你要倒过来（不过以前做过，没什么大不了的）

所以第一个问题，信噪比。如前所述，盘片密度调整得更高，这是严格安全的。Gutmann 的方法需要在正常读/写活动中具有非常低的方差，才能以任何精度计算位的先前状态。如果信号的变化很大，那么它可能会破坏这些尝试。并且差异大到足以让你彻底崩溃（这就是 ECC 在现代驱动器中如此疯狂的原因。）类比就像试图完美地听到有人在嘈杂的房间中间和你说话时对你耳语一样。

第二个问题，时间。即使电子显微镜非常快速和准确（每比特 1 毫秒！这对电子显微镜来说是闪电。它也比 1200 波特调制解调器慢），硬盘驱动器上有大量数据，完整图像需要非常很久。（WA 说整个 500GB 硬盘驱动器需要 126 年，这不包括 ECC 数据（您需要）。还有很多其他与硬盘驱动器扇区相关的元数据，我没有提到，比如 ID 字段和地址标记，但是这些不会被覆盖，也许您可​​以想出一种更快的方法来正常成像它们？毫无疑问，有一些方法可以加快这个过程（例如有选择地对驱动器的部分进行成像），但即使这样也需要你几个月的 24 /7 日以继夜的工作只是为了得到`$MFT`标准硬盘驱动器上的文件（通常在安装了 Windows 的驱动器上大约 50-300MB））。

第三个问题，可接受性。如果政府追捕你，他们追捕你的原因只有几个，他们想知道你知道的事情，或者他们想逮捕你，把你关进监狱。有更简单的方法可以获得前者（橡胶软管密码学），而后者需要定期的证据程序。回到类比，如果有人作证说有人悄悄告诉他们某事，而其他人在拥挤嘈杂的房间中间与他们交谈，那么那里就有很大的怀疑空间。它绝不会是那种需要花费大量时间和金钱的有力证据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T12:44:15.587

你问错问题了。尝试通过写入用户可见块来安全擦除驱动器完全忽略了这样一个事实，即在标记为坏的扇区中可能存在用户数据（但仍包含可读的敏感数据）。

当然，可以通过发出 ATA 命令来解决这个问题，但随后一个 ATA 安全擦除命令将首先完成您想要的所有操作。有关如何使用该选项发出安全擦除命令的详细信息，请参阅[https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase 。](https://ata.wiki.kernel.org/index.php/ATA_Secure_Erase)`hdparm``--security-erase`

# android - 设计TextView和ImageView的视图组合

> ID：11499410
> 
> 赞同：1
> 
> 时间：2012-07-16T06:54:33.333
> 
> 标签：android, views

我想开发一个既可以用作 ImageView 又可以用作 TextView 的视图。通常可以通过扩展这两个类来实现，但 Java 不支持多重继承。

那么有可能做到这一点吗？如何 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-07T20:35:50.897

我知道我发布这个很晚，你可能也解决了这个问题！仍然想分享一个工作。

我有类似的要求，并意识到 GridView 不是最适合这个。我通过使用 TableLayout 并将 TableRows 的元素定义为 ImageView 或 TextView 来实现这一点。如果您有静态 UI 结构，这可以作为一种解决方法，这意味着您知道哪个表索引应该包含哪个元素。希望这可以帮助某人。

```
<TableLayout
    android:id="@+id/tableLayout3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:shrinkColumns="*"
    android:stretchColumns="*"
    android:layout_below="@+id/tagGrid">

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <TextView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"/>

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/orange"/>

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/blue"/>

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/yellow"/>

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/milkman"/>

    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/check"/>

            <TextView
                android:id="@+id/tv1"
                android:layout_height="@dimen/activity_vertical_margin"
                android:layout_width="@dimen/activity_horizontal_margin"
                android:text="10.4"
                android:gravity="center" />
            <TextView
                android:id="@+id/tv2"
                android:layout_height="@dimen/activity_vertical_margin"
                android:layout_width="@dimen/activity_horizontal_margin"
                android:text="10.4"
                android:gravity="center" />
            <TextView
                android:id="@+id/tv3"
                android:layout_height="@dimen/activity_vertical_margin"
                android:layout_width="@dimen/activity_horizontal_margin"
                android:text="10.4"
                android:gravity="center" />
            <TextView
                android:id="@+id/tv4"
                android:layout_height="@dimen/activity_vertical_margin"
                android:layout_width="@dimen/activity_horizontal_margin"
                android:text="10.4"
                android:gravity="center" />

    </TableRow>

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">

        <ImageView
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:src="@drawable/cross"/>

        <TextView
            android:id="@+id/tv5"
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:text="10.4"
            android:gravity="center" />

        <TextView
            android:id="@+id/tv6"
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:text="10.4"
            android:gravity="center" />

        <TextView
            android:id="@+id/tv7"
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:text="10.4"
            android:gravity="center" />

        <TextView
            android:id="@+id/tv8"
            android:layout_height="@dimen/activity_vertical_margin"
            android:layout_width="@dimen/activity_horizontal_margin"
            android:text="10.4"
            android:gravity="center" />

    </TableRow>

</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:57:50.167

TextView 具有参数“DrawableTop/Left/Right”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:02:11.317

为此，您可以`View`通过扩展`View`类来创建自定义。[这](http://kahdev.wordpress.com/2008/09/13/making-a-custom-android-button-using-a-custom-view/)是创建自定义按钮的示例`View`。它不是您正在寻找的东西，因为它显示了一个自定义`Button`，但我相信它会让您入门。

# asp.net - 如何避免使用 # 导航 Url 属性的菜单项

> ID：11499413
> 
> 赞同：1
> 
> 时间：2012-07-16T06:54:44.410
> 
> 标签：asp.net, contextmenu, menuitem, navigateurl

我正在将一些项目绑定到菜单。假设我的站点地址是“www.abc.com/Dev”，菜单项会自动获取“www.abc.com/Dev/#”的navigationUrl。

现在，单击这些菜单项会打开一些应用程序，例如“记事本”。

由于这些菜单项的 navigateUrl 属性，如果我右键单击这些项目，它会给我一个上下文菜单，如果我单击“在新窗口中打开”，它会将我带回到我的原始站点。

理想情况下，这是错误的行为。有什么方法可以阻止navigationUrl的设置吗？我尝试制作：

```
menuItem.NavigateUrl = null 
```

但是一旦 menuItems 被初始化，它们的 navigateUrl 属性就会被设置为 #。

有什么办法可以防止这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:05:02.013

```
menuItem.NavigateUrl = "javascript: void(0);"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:33:38.220

在这种情况下，请执行以下操作，

把 menuItem.NavigateUrl = string.Empty 或 menuItem.NavigateUrl = "" 这将产生 "#"

在添加 menuItem.attributes.add("onclick","TrackRightClickAndReturnFalse") 的顶部

这样你可以有“#”但你可以防止右键单击它...

请参阅[如何在 javascript 中禁用右键单击上下文菜单，](https://stackoverflow.com/questions/381795/how-to-disable-right-click-context-menu-in-javascript)了解如何了解如何禁用右键单击。

我希望你能理解我的概念。

# php - CodeIgniter RESTful API 库响应

> ID：11499414
> 
> 赞同：0
> 
> 时间：2012-07-16T06:54:46.180
> 
> 标签：php, api, rest, codeigniter-2

这个问题与此处找到的 CodeIGniter RESTful API 库有关。我希望这里有人在使用这个库并且可以提供一些帮助:)。

[http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

我已经安装了这个库并用它建立了一个工作环境。我也能够取回数据。为了使用，我创建了一个非常简单的类，我使用以下代码访问它：

```
<?php

 require APPPATH.'/libraries/REST_Controller.php';

 class Users extends REST_Controller
 {
      public function list_get()
      {
           $this->load->database();

           $data = $this->db->get('users')->result();

           $this->response($data, 200); 
       }

  } 
```

为了访问这个控制器，我调用了以下 URL：

“http://localhost/mgtapp/index.php/api/users/list/format/json”

当我取回数据时，我看到标头内容类型设置为 text/html 而不是 json，并且我还在 php 中收到错误消息，显示“标头已发送”。我试图从 url 的末尾删除格式并通过“接受”发送，但我得到了同样的错误，我看到内容类型被设置为 text/html。当我运行示例时，我看到响应按原样返回（作为内容类型中的 json），所以我不明白我在这里做错了什么，内容类型设置不正确。如果有人能解释一下，那将非常有帮助！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:28:44.563

所以我回答这个问题是因为我遇到麻烦的原因是愚蠢的。

我的 php 类控制器的“？>”下有几行，显然这把它搞砸了。对不起！

其他有这个问题的人，先检查一下！

# php - 更新已在 Magento 1.6.2 购物车中的可配置产品的选项

> ID：11499419
> 
> 赞同：0
> 
> 时间：2012-07-16T06:55:11.390
> 
> 标签：php, jquery, magento, magento-1.6, mage

谁能告诉我如何更新已经在 Magento 购物车中的可配置产品的选项（使用下拉选择）。

我将代码以显示可配置产品的超级属性选项（使用下拉列表）放在以下文件中：`magento\app\design\frontend\default\theme-name\template\checkout\cart\item\default.phtml`.

我找到了这段代码的一行：

```
<?php if ($_options = $this->getOptionList()):?> 
```

之后，我将代码显示为可配置产品的属性下拉列表，并且它工作正常，但是当我从超级属性下拉列表中选择另一个选项时，我需要更新该产品的超级属性选项值。下面是我显示下拉列表的代码：

```
<?php
if($this->getProduct()->isConfigurable()){
    $_product = Mage::getModel('catalog/product')->load($this->getProduct()->getId());
    Mage::getBlockSingleton('catalog/product_view_type_configurable')->unsetData();
    $_configurable = Mage::getBlockSingleton('catalog/product_view_type_configurable')->setData('product', $_product);
    $_cdata = json_decode($_configurable->getJsonConfig());
    $_current = array();
    foreach((array)$this->getOptionList() as $_option) {
        $_current[$_option['label']]=$_option['value'];
    }
    foreach($_cdata->attributes as $attribute) {
        ?>
        <strong><?php echo $attribute->label;
        $catchlabel = $attribute->label;
        if($catchlabel == 'Clipboard Color'):
            $SelectOptions = "selectAtt";
        else:
            $SelectOptions = "selectFont";
        endif;
        ?>
        </strong>
        <select style="width: 150px;"
name="cart[<?php echo $_item->getId() ?>][option][<?php echo $attribute->id ?>]"
id="<?php  echo $_item->getId(); ?>_<?php echo $attribute->id;  ?>"
class="<?php echo $SelectOptions; ?>">
            <?php
            foreach($attribute->options as $option) {
                ?>
                <option
                <?php echo ($_current[$attribute->label]==$option->label) ? ' selected' : '' ?>
                    value="<?php echo $option->id ?>">
                    <?php echo $option->label ?>

                </option>
                <?php
            }
            ?>
        </select> 
        <script type="text/javascript">
            jQuery('#<?php  echo $_item->getId(); ?>_<?php echo $attribute->id;  ?>').change(function() {
                var getOption = jQuery('#<?php  echo $_item->getId(); ?>_<?php echo $attribute->id;  ?>').val();
                // something to do here for update attibute options for current product
                alert(getOption);
            });
        </script> <?php
    }
}
?> 
```

请告诉我如何更新所选可配置产品的超属性选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:14:15.620

您需要将新的配置信息提交给处理更新的控制器操作。

Magento 没有这样的控制器操作，但是，当您在购物车中编辑单个可配置产品时，您会获得带有稍微不同标记的产品视图。该页面中的表单用于编辑购物车中的产品，而不是添加新产品。

您应该检查该控制器操作中的算法并创建一个带有控制器的模块，该控制器将该算法应用于购物车中的每个产品

# python - Python 检测 Txt 文件中的缺失行

> ID：11499421
> 
> 赞同：-2
> 
> 时间：2012-07-16T06:55:11.307
> 
> 标签：python, text-processing, file-processing, line-processing

假设一个 txt 文件由以下几行组成：

```
A
  1
  2
  3
B 
  1
  2
  3
C
  1
  3 
```

显然，txt 文件中的 C 中缺少 2。检测丢失的 2 并输出它的想法是什么？我需要逐行读取txt文件。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:13:45.580

可能你想要这样的东西：

```
line_sets = []
file_names = ['a', 'b', 'c']

# read content of files, if you need to remember file names, use
# dict instead of list
for file_name in file_names:
    with open(file_name, 'rb') as f:
        line_sets.append(set(f.readlines()))

# find missing lines
missing_lines = set()
for first_set, second_set in itertools.combinations(line_sets, 2):
    missing_lines.add(first_set - second_set)
print 'Missing lines: %s' % missing_lines 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T08:09:00.973

好的，我认为你们大多数人都不清楚这个问题。无论如何，这是我的解决方案：

我将每个部分的值附加到 for 循环内的列表中。例如，在 A 节中，列表将包含 1,2 和 3。C 节中列表的 len 将只有 2。因此，我们知道 C 节中缺少一个值。从这里，我们可以打印出C节。对造成的误解深表歉意。这个问题正式关闭。无论如何感谢您的看法！

# iphone - 将客户视图添加到单元格时更改单元格内容视图

> ID：11499428
> 
> 赞同：0
> 
> 时间：2012-07-16T06:55:29.777
> 
> 标签：iphone, ios, ipad, uitableview

我已经创建了一个带有 xib 的 uiviewcontroller 以添加到 uitableview 单元格中。这是代码。

```
@interface CustomeCellHome : UIViewController{

    IBOutlet UIImageView *imgViewBack;

    // will have number of labels and imageviews.
}
@property (nonatomic, retain) UIImageView *imgViewBack;

@implementation CustomeCellHome
@synthesize imgViewBack; 
```

所有这些 IBOutlet 都连接到 xib。

现在我将其添加到我的 uitableview 单元格中。这是代码。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 150;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
//    }

    CustomeCellHome *objCell = [[CustomeCellHome alloc] init];
    [objCell.view setTag:indexPath.row];
    [cell.contentView addSubview:objCell.view];

    objCell.imgViewBack.image = [UIImage  imageNamed:@"unsel.png"];

    [objCell release];
    return cell;
} 
```

现在我想在选择行时更改这个 imgViewBack 图像。这是代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    CustomeCellHome *objCCell = [[CustomeCellHome alloc] init];
    objCCell.view = [cell viewWithTag:indexPath.row];
    objCCell.imgViewBack.image = [UIImage imageNamed:@"sel.png"]; 
```

}

但我的 imgViewBack 并没有改变它的形象。不明白这有什么问题。有什么建议吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:08:42.123

如果您必须像您一样使用 viewController（同样可能这不是您需要的），我可以看到您的代码没有什么问题。

1）当indexPath.row = 0（我认为0也是superview的标签 ）时，而不是`[objCell.view setTag:indexPath.row];`使用否则你会遇到问题。`[objCell.view setTag:indexPath.row+1];`

2）不要释放viewController，如果你需要一个保持它。
（但你需要将它保存在一些数据结构中，以便稍后你可以释放它......）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = nil;

    // u will have problems reusing those cells...
    cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

   // if(cell == nil) 
   // { 
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        CustomeCellHome *objCell = [[CustomeCellHome alloc] init];

        [objCell.view setTag:indexPath.row+1];
        [cell.contentView addSubview:objCell.view];

        objCell.imgViewBack.image = [UIImage imageNamed:@"image1.png"];

        //[objCell release]; // don't release now, add it to some data structure so u can release later
   // }

    return cell;
} 
```

2）然后在`didSelectRowAtIndexPath`检索单元格的 viewController 并更改他的`imgViewBack`属性。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // get the cell
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    // get the cell's viewController
    UIView *aView = [cell.contentView viewWithTag:indexPath.row+1];
    CustomeCellHome *objCCell = (CustomeCellHome *)[aView nextResponder];

    // update the image
    objCCell.imgViewBack.image = [UIImage imageNamed:@"image2.png"];
} 
```

这会改变图像，但这不是一个完美的解决方案，如果你重复使用单元格，你会遇到问题......如果你真的需要使用 viewController，请尝试重新考虑。

# c++ - 关于 Cmake 的基本问题

> ID：11499433
> 
> 赞同：0
> 
> 时间：2012-07-16T06:55:55.230
> 
> 标签：c++, opencv, cmake, mingw

我正在尝试使用 OpenCV，但我不断在 Cmake 上收到此错误：

> CMake 错误：CMake 无法找到与“MinGW Makefiles”对应的构建程序

我知道我必须做的是：“cmake 很难找到 make 和 GCC，将 mingw bin 目录添加到您的 PATH 环境变量中。”

但是我不知道：

1.  如何添加mingw
2.  PATH 环境变量在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:03:43.043

[此链接](http://www.computerhope.com/issues/ch000549.htm)描述如何将条目添加到 PATH 环境变量。您需要添加安装 MinGW 的目录。

如果您想了解 PATH 的实际用途，也可以查阅[wiki 。](http://en.wikipedia.org/wiki/PATH_%28variable%29)

# android - 如何处理事件软键盘隐藏？

> ID：11499438
> 
> 赞同：2
> 
> 时间：2012-07-16T06:56:25.193
> 
> 标签：android, fragment, android-softkeyboard

我的笔记应用程序在屏幕上有 2 个片段：一个笔记片段列表和一个用于在第二个片段中显示所选笔记的笔记详细片段，它有一个输入文本字段 ( `android:inputType="textMultiLine"`)。因为我想处理隐藏的事件键盘，所以我可以保存用户在关闭键盘时所做的更改。谁能给我一个线索来完成这项任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-09T11:10:55.713

我认为键盘问题的最佳和通用解决方案是在布局更改时测量 VisibleDisplayFrame：

```
Rect visibleRect = new Rect();

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ViewGroup mMain = (ViewGroup) inflater.inflate(R.layout.select_cover_album, container, false);

    mMain.getWindowVisibleDisplayFrame(visibleRect);
    mMain.addOnLayoutChangeListener(new View.OnLayoutChangeListener() {
            @Override
            public void onLayoutChange(View v,
                                       int left,
                                       int top,
                                       int right,
                                       int bottom,
                                       int oldLeft,
                                       int oldTop,
                                       int oldRight,
                                       int oldBottom) {

                Rect r = new Rect();
                mMain.getWindowVisibleDisplayFrame(r);

                if(r.height() < visibleRect.height()){
                    //keyboard shown

                }
                if(r.height() == visibleRect.height()){
                    //keyboard hidden
                }

            }
        });

        return mMain;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T06:39:06.317

这是我在 Note Detail 片段上处理它的方式：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    this.view = inflater.inflate(R.layout.fragment_note_detail_of_style_searching, container , false);

    listviewFilter = (ListView) view.findViewById(R.id.listview_filter);
    noteDetailView = view.findViewById(R.id.note_detail_of_style_view);
    photoDetailView = view.findViewById(R.id.gv_note_detail_photo);

    view.getViewTreeObserver().addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {                
            int heightDiff = view.getRootView().getHeight() - view.getHeight();
            if (heightDiff > 200) { 
                isWatchingKeyboard = true;
                photoDetailView.setVisibility(View.GONE);
                return; //must exit now
            }

            if(isWatchingKeyboard){
                isWatchingKeyboard = false;
                viewForFocus.requestFocus();
                photoDetailView.setVisibility(View.VISIBLE);
            }
        }
    });

    return this.view;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-14T16:38:20.187

我是这样做的：

```
private int prevBottom;

@Override
public View onCreateView(LayoutInflater inflater, final ViewGroup container, Bundle savedInstanceState) {
    view = inflater.inflate(R.layout.fragment_status, container, false);
    prevBottom = view.getBottom();

    view.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            if (view.getBottom() > prevBottom) {
                view.requestFocus();
            }
            prevBottom = view.getBottom();
        }
    });

    return view;
} 
```

并将其添加到我正在膨胀的视图中：

```
android:focusableInTouchMode="true" 
```

这与 AndroidManifest.xml 中的活动有关

```
android:windowSoftInputMode="adjustResize" 
```

# html - 主菜单html化

> ID：11499439
> 
> 赞同：0
> 
> 时间：2012-07-16T06:56:28.683
> 
> 标签：html, css, menu

如何仅使用 css htmlise 附加图像？

如果纯 css 不可能，那么我怎么能至少用图像来做到这一点![主菜单](../Images/86c83a8338266fd7b171bdb4daa6b5d1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:02:07.840

这不是一个真正的问题，而是您希望我们为您编写代码。我建议您谷歌“css 面包屑”并查看其他人为构建类似设计所做的工作。例如，看看[这篇文章](http://www.red-team-design.com/css3-breadcrumbs)。

# vb6 - 您可以使用基类来允许将多个派生类作为参数传递给 VB6 中的函数吗？

> ID：11499440
> 
> 赞同：0
> 
> 时间：2012-07-16T06:56:28.333
> 
> 标签：vb6, parameters, polymorphism

我搜索了有关 VB6 对多态性的支持的文章，但我阅读的所有文章都只提到您可以使派生类继承派生类的属性和方法。我读过的三四篇文章都没有提到 VB6 的多态性是否允许您将派生类作为基类类型的参数传递。

如果你有一个名为 的类`Bunny`，它派生自一个名为 的类`Animal`，你可以将一个类型的变量传递`Bunny`给下面的函数吗？

```
Public Sub Chase(thePerson as Person, theAnimal as Animal)
    Do While thePerson.position <> theAnimal.position
        ...
    Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:04:03.580

如果您的 Bunny 类继承自 Animal，那么是的，您应该能够执行示例代码中所述的操作。

# c# - DefaultCellStyle.Backcolor 在 C# 的 DataGridView 中给了我错误的颜色

> ID：11499444
> 
> 赞同：0
> 
> 时间：2012-07-16T06:56:50.463
> 
> 标签：c#, datagridview

我有一个 Datagridview 并想像这样更改行的颜色：在第一列中具有相同值的所有行都应该具有相同的颜色。
我这样做是为了实现这一目标：

```
 private void AlternatingRows()
    {
        foreach (DataGridViewRow row in dataGridView_daten.Rows)
        {
            if (row.Index > 0)
            {
                if (row.Cells[0].Value.ToString().Substring(0, 5) == dataGridView_daten.Rows[row.Index - 1].Cells[0].Value.ToString().Substring(0, 5))
                {
                    row.DefaultCellStyle.BackColor = dataGridView_daten.Rows[row.Index - 1].DefaultCellStyle.BackColor;
                }
                else if (dataGridView_daten.Rows[row.Index - 1].DefaultCellStyle.BackColor == Color.AliceBlue)
                {
                    row.DefaultCellStyle.BackColor = Color.FromArgb(226, 241, 254);
                }
                else if (dataGridView_daten.Rows[row.Index - 1].DefaultCellStyle.BackColor == Color.FromArgb(226, 241, 254))
                {
                    row.DefaultCellStyle.BackColor = Color.AliceBlue;
                }
            }
        }
    } 
```

所以基本上如果第一个单元格的值与上面的行相同，颜色应该是相同的......我在将Data绑定到DataGridView之后调用了这个方法......我也尝试在`CellFormatting`事件，但它没有工作。我的问题是行仍然具有相同的颜色。当我调试它时，它`DefaultCellStyle.BackColor`是空的......为什么`DefaultCellStyle.BackColor`返回Empty？
就像那个`If`条款`else if (dataGridView_daten.Rows[row.Index -1].DefaultCellStyle.BackColor == Color.FromArgb(226, 241, 254))` 永远不会是真的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:37:37.507

我解决了这个问题`color`，当数字改变时会改变：

```
 private void AlternatingRows()
    {
        foreach (DataGridViewRow row in dataGridView_daten.Rows)
        {
            if (row.Index > 0)
            {
                if (row.Cells[0].Value.ToString().Substring(0, 5) != dataGridView_daten.Rows[row.Index - 1].Cells[0].Value.ToString().Substring(0, 5))
                {
                    if (Farbe == Color.FromArgb(226, 241, 254))
                        Farbe = Color.AliceBlue;
                    else
                        Farbe = Color.FromArgb(226, 241, 254);
                }
                row.DefaultCellStyle.BackColor = Farbe;
            }
        }
    } 
```

# html - 将鼠标悬停在“a”标签上（IE 无法正常工作）

> ID：11499445
> 
> 赞同：1
> 
> 时间：2012-07-16T06:56:52.490
> 
> 标签：html, css, internet-explorer, hover

我们有一个`div`with`a`标签。中定义了一种`hover`样式`css`。除 IE 外，一切正常。请打开[演示](http://jsfiddle.net/BqjSa/)（在 IE 中），并尝试在`div`时间之间移动鼠标。如您所见，第一个`div`更改颜色。我该如何修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:20:20.077

删除`display: table;`并替换为`overflow: hidden;`in `#kassa_cont_space .sean_box .details .sched`，这是 CSS 中的最后一个样式。

```
#kassa_cont_space .sean_box .details .sched {
    padding: 0px 15px 15px 15px;
    overflow: hidden;
} 
```

工作 JSFiddle：http: [//jsfiddle.net/BqjSa/4/](http://jsfiddle.net/BqjSa/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:35:39.560

更改这部分代码...

```
<div class="sched">
<a href="javascript:void(0);" class="link _001" style = "display:block;"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
<a href="javascript:void(0);" class="link _001"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
<a href="javascript:void(0);" class="link _001"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
<a href="javascript:void(0);" class="link _001"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
<a href="javascript:void(0);" class="link _001"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
<a href="javascript:void(0);" class="link _001"><span class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div> 
```

..到这个..

```
<div class="sched">
<div style="float:left; margin:0;padding:0">
    <a href="javascript:void(0);" class="link _001" style = "display:block;"><span    class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div>
   <div style="float:left; margin:0;padding:0">
    <a href="javascript:void(0);" class="link _001" style = "display:block;"><span    class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div><div style="float:left; margin:0;padding:0">
    <a href="javascript:void(0);" class="link _001" style = "display:block;"><span    class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div><div style="float:left; margin:0;padding:0">
    <a href="javascript:void(0);" class="link _001" style = "display:block;"><span    class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div><div style="float:left; margin:0;padding:0">
    <a href="javascript:void(0);" class="link _001" style = "display:block;"><span    class="time">10:30</span><span class="cost">от 700 тг</span></a>
</div>
    </div> 
```

这将解决您的问题...

或者只是从“#kassa_cont_space .sean_box .details .sched”css 中删除“display:table”

# asp.net - WCF Web 服务在托管后出现错误

> ID：11499449
> 
> 赞同：0
> 
> 时间：2012-07-16T06:57:02.773
> 
> 标签：asp.net, wcf, web-services

我在 IIS 中托管了 WCF Web 服务。但是当我触发 url 时，我收到以下错误消息。

“IIS 指定了身份验证方案‘基本、匿名’，但绑定只支持指定一个身份验证方案。有效的身份验证方案是摘要、协商、NTLM、基本或匿名。更改 IIS 设置，以便只有一个身份验证方案是用过的。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T14:34:15.347

您可以通过禁用 IIS 上的基本身份验证来解决此问题。这取决于您使用的是哪个 IIS 版本？但对于 IIS 7，您可以通过如下更新 web.config 文件来执行此操作：

```
<system.webServer>
    <security>
        <authentication>
            <basicAuthentication enabled="false" />
        </authentication>   
    </security>
</system.webServer> 
```

# php - 如何缓存 REST 资源的不同格式/表示？

> ID：11499461
> 
> 赞同：1
> 
> 时间：2012-07-16T06:57:59.670
> 
> 标签：php, rest, http-headers, http-caching

我使用 tonic.php (http://peej.github.com/tonic/) 库来创建我的 REST 资源。数据非常稳定，最好有较长的缓存时间。我设置了缓存头（使用 tonic.php 库）：

```
$lastModified = gmdate('D, d M Y H:i:s', $_SERVER['REQUEST_TIME']) . ' GMT';                    
$expires = gmdate('D, d M Y H:i:s', ($_SERVER['REQUEST_TIME'] + $httpCacheDuration)) . ' GMT'; 
$response->addHeader('Cache-Control', 'public,max-age='.$httpCacheDuration.',must-revalidate');                    
$response->addHeader('Expires', $expires);
$response->addHeader('Last-Modified', $lastModified); 
```

问题是，当请求 html 时，会对 php 页面进行 cURL 调用，并将返回的 html 放入响应正文中：

```
$ch = curl_init();  
curl_setopt($ch, CURLOPT_URL, $url . '?identifier=' . $identifier);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

$html = curl_exec($ch); 
curl_close($ch);

$response->body = $html; 
```

然后，此返回的页面通过 AJAX 调用对同一资源获取实际数据，但接受标头为“application/json”而不是“text/html”。AJAX 调用是用 jquery 完成的，如果我设置

```
cache: true 
```

在 jquery $.ajax 中，使用 accept: text/html 调用我的资源只会将数据显示为 JSON 而不是网页 (Firefox) 或引发错误 (IE8)。代码：

```
switch ($format) {

    case 'html':

        $response->addHeader('Content-type', 'text/html');
        $lastModified = gmdate('D, d M Y H:i:s', $_SERVER['REQUEST_TIME']) . ' GMT';                    
        $expires = gmdate('D, d M Y H:i:s', ($_SERVER['REQUEST_TIME'] + $httpCacheDuration)) . ' GMT';                                                      
        $response->addHeader('Cache-Control', 'public,max-age='.$httpCacheDuration.',must-revalidate');                    
        $response->addHeader('Expires', $expires);
        $response->addHeader('Last-Modified', $lastModified);  
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_COOKIE, $strCookie);
        curl_setopt($ch, CURLOPT_URL, url . '?identifier=' . $identifier);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        $html = curl_exec($ch);         
        curl_close($ch);
        $response->body = $html;
        return $response;
        break;

    case 'json':

        $result = DataManager::get($identifier);
        if (empty($result)) {
            $response->code = Response::NOTFOUND;
            return $response;
        }

        $lastModified = gmdate('D, d M Y H:i:s', $_SERVER['REQUEST_TIME']) . ' GMT';                    
        $expires = gmdate('D, d M Y H:i:s', ($_SERVER['REQUEST_TIME'] + $httpCacheDuration)) . ' GMT';                                                      
        $response->addHeader('Cache-Control', 'public,max-age='.$httpCacheDuration.',must-revalidate');                    
        $response->addHeader('Expires', $expires);
        $response->addHeader('Last-Modified', $lastModified);
        $response->addHeader('Content-type', 'application/json');
        $response->code = Response::OK;
        $response->body = json_encode($result);
        return $response;
        break;

    // we don't have a suitable format, so do a 406 response instead
    default:
        $response->code = Response::NOTACCEPTABLE;
        $response->addHeader('Content-type', 'text/plain');
        $response->body = getErrorPage(Response::NOTACCEPTABLE);
        return $response;
        break;
} 
```

添加

```
$response->addHeader('Vary', 'Accept'); 
```

让它工作。然而，json 永远不会被缓存，这会导致与设置缓存相同的行为：在 Jquery ajax 调用中为 false。

如何缓存 2 种不同的表示并让浏览器为请求的接受标头显示正确的表示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:43:39.350

答案在评论 1 中：

> 如果你改变 URL 怎么样？如果我理解您的问题，浏览器缓存不会根据请求中的 Accept 标头区分内容。如果您将 .json 附加到 JSON 数据包的 URL，浏览器将能够基于 URL 进行缓存。

# c# - c#中的可绑定对象？

> ID：11499462
> 
> 赞同：3
> 
> 时间：2012-07-16T06:58:00.427
> 
> 标签：c#, .net, .net-4.0

是什么让 .net 中的对象可以绑定？

曾经有人回答说它是 Ienumerable 类使其可绑定。

但是，当我查看 DataTAable ( System.Data) 时，它并没有实现 Ienumerable ：

```
public class DataTable : MarshalByValueComponent, 
                         IListSource, 
                         ISupportInitializeNotification,
                         ISupportInitialize, 
                         ISerializable, 
                         IXmlSerializable
{...} 
```

而且，我们仍然可以写：

```
myObj.DataSource=myDataTable;
myObj.Bind(); 
```

帮助 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:16:24.020

`DataTable`通过`IListSource`提供`DataTable.DefaultView`

`DataView`实现`IBindingList`绑定目标实际使用的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:03:30.770

来自 MSDN

DataGridView 类支持标准的 Windows 窗体数据绑定模型。这意味着数据源可以是实现以下接口之一的任何类型：

IList 接口，包括一维数组。

IListSource 接口，例如 DataTable 和 DataSet 类。

IBindingList 接口，例如 BindingList 类。

IBindingListView 接口，例如 BindingSource 类。

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:20:14.833

嗯，据我了解，任何对象都可用于 WPF 绑定。但是默认情况下不通知值的变化，它必须实现INPC，INCC..对于winforms情况非常不同。因此，这实际上取决于您具体询问的绑定类型。

# django - 使用 Django 在 cassandra 中创建数据模型

> ID：11499468
> 
> 赞同：2
> 
> 时间：2012-07-16T06:58:38.377
> 
> 标签：django, django-models, cassandra, pycassa

如何使用 Django 后端在 cassandra 中创建数据模型？我提到了 twissandra ，但我对数据模型的创建方式感到困惑（比如在关系数据库中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:24:59.613

看看[https://github.com/thobbs/twissandra/blob/master/tweets/management/commands/sync_cassandra.py](https://github.com/thobbs/twissandra/blob/master/tweets/management/commands/sync_cassandra.py)

你会得到一个清晰的画面

# git - 您的带有指纹的密钥 .... 无权访问... myapp。远端意外挂断。HEROKU，GIT 克隆

> ID：11499481
> 
> 赞同：0
> 
> 时间：2012-07-16T06:59:55.730
> 
> 标签：git, heroku

我打算从 Heroku 备份我的源代码。

所以我使用了 git clone 命令

将源代码从 Heroku 传输到本地机器。

我运行以下命令

```
C:\Users\Rowell\myapp>git clone git@heroku.com:myapp.git c:\peekbox-recent
Cloning into 'c:\peekbox-recent'...

 **!  Your key with fingerprint eb:a9:b4:2f:5d:d8:21:27:1e:1e:34:60:de:eb:cf:eb is not authorized to access myapp.**

**fatal: The remote end hung up unexpectedly** 
```

可能是什么问题呢？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T10:50:06.687

这是一个未经授权的 ssh 密钥的问题，即您的 ssh 密钥不存在于您的 heroku 帐户密钥中。使用 heroku keys:add 命令将您的机器现有的 ssh 密钥（如果不存在，则生成一个新密钥）添加到 heroku 帐户。有关更多详细步骤，请参阅[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

# php - 动画布局

> ID：11499482
> 
> 赞同：-3
> 
> 时间：2012-07-16T07:00:09.410
> 
> 标签：php, javascript, jquery, html, css

我想创建一个布局更改而不是加载新页面的页面。这个想法是让用户点击一个项目，然后重新排列页面上的所有项目。我可以弄清楚如何做到这一点，但我不知道如何为每个页面创建链接。

因此，如果用户单击项目 A 并获得布局，AI 会希望有一个链接。

如果用户单击项目 B 并获得布局 BI 想为此创建一个链接。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:12:48.237

您可以更改HTML 正文上的**类。**这将允许您根据布局使用 CSS 的不同部分。每个链接都可以使用 jQuery 设置类：

```
// In your javascript (within jQuery ready function)
$('#layoutTwoOne').click(function(event) {
    $('body').removeClass('layoutTwo').addClass('layoutOne');
});
$('#layoutTwoLink').click(function(event) {
    $('body').removeClass('layoutOne').addClass('layoutTwo');
}); 
```

在您的 HTML 中：

```
<a href="#" id="layoutOneLink">Switch to Layout One</a>
<a href="#" id="layoutTwoLink">Switch to Layout Two</a> 
```

在您的 CSS 中：

```
body.layoutOne {
    background-color: black;
}
body.layoutTwo {
    background-color: white;
}
body.layoutOne div {
    /* Some special css for all divs in layout one */
} 
```

代码可能更受数据驱动。这有点像黑客，但它会做你需要的。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:12:24.553

如果你使用 jQuery，你基本上可以使用任何你喜欢的元素作为链接/按钮或其他任何东西。

Jquery 允许我们为用户交互触发的事件附加各种事件侦听器 -

*   鼠标点击
*   双喜
*   键盘键向下/向上
*   ETC...

这些操作可以附加到 HTML 中的任何元素。它可能是 -

*   一个`<a>`标签
*   一个`<img>`标签
*   a `<td>`or`<tr>`在表结构中
*   通用`<div>`元素
*   ETC...

您甚至可以将单击绑定到您喜欢的任何元素上并让它触发您的`changeLayout()`功能（或类似的东西）。简单（单次）单击处理程序的语法如下所示 -

```
$("#elementSelector").on('click',function(){
  // user has clicked the element!
  // do some cool animations and stuff!
}); 
```

该函数将为任何具有`id`等于 的属性的元素触发`elementSelector`。

符合描述的元素的一些示例 -

*   `<div id="elementSelector"></div>`
*   `<a href="#" id="elementSelector"></a>`
*   `<td id="elementSelector"></td>`

# java - 如何使用 graniteds 配置解串器安全器？

> ID：11499483
> 
> 赞同：0
> 
> 时间：2012-07-16T07:00:11.220
> 
> 标签：java, apache-flex, amf, graniteds

在最新版本的granite ds中，引入了deserializer securizer。

如果我理解得很好，这基本上是为了防止反序列化器调用不打算传输的类。

不幸的是，我找不到如何在`granite-config.xml`. 而且这部分没有很好的文档记录，也没有在文档中，也没有在`RegexAMF3DeserializerSecurizer`.

有人要添加xml片段吗？

在此先感谢 M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:28:31.297

我发现了答案。

```
<amf3-deserializer-securizer param="org\.granite\..* | flex\.messaging\..* | my\.packages\.bo\..*"/> 
```

这将配置默认安全器并允许它从指定的包构造类。

M。

# events - 如何获取程序调用堆栈跟踪？

> ID：11499488
> 
> 赞同：4
> 
> 时间：2012-07-16T07:00:20.633
> 
> 标签：events, abap

我的程序可以通过两种方式启动：

从我的本地类之一`START OF SELECTION`调用函数的事件。调用相同方法`MAIN`的事务。`ZAVGTTA4`

在`PAI`，对于 BACK 事件，当调用 时`LEAVE TO SCREEN '0'.`，我的程序根据它的启动方式以两种方式运行。我想回到选择屏幕（1000）。

我考虑过查询堆栈，我肯定会在其中找到我的程序是如何被调用的。我可以看到堆栈跟踪不同，但我不知道如何从程序中访问我的堆栈。我听说过我认为可能对我有帮助的 RTTI。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:07:52.740

你可以试试`SYSTEM_CALLSTACK`。

```
DATA:
   abap_callstack_line TYPE abap_callstack_line,
   callstack TYPE  abap_callstack.

  CALL FUNCTION 'SYSTEM_CALLSTACK'
    EXPORTING
      max_level          = 4
    IMPORTING
      callstack          = callstack. 
```

但在你的情况下，我更喜欢一个额外的参数，调用地点可以填写这个条目。我不会调用参数`called_by`，而是类似`behaviour`or `mode`。

# html - 无法单击 Chrome/Firefox/Safari 中较低 z-index 元素中的链接

> ID：11499490
> 
> 赞同：0
> 
> 时间：2012-07-16T07:00:47.710
> 
> 标签：html, css

此代码在 Internet Explorer 中运行良好，但我在其他浏览器中遇到问题。基本上有一个带有固定左侧边栏的水平滚动页面。在 IE 中，您可以单击页面每个面板上的前进和后退按钮，但在 chrome 等中，只有侧边栏中的链接有效。我认为这是z-index或元素定位的问题，css有

```
#bg{
   display:inline;
   position:absolute;
   left:0px;
   top:-2px;
   z-index:1;
}

#sidestripe {
   display:inline;
   position:fixed;
   left:0px;
   top:-2px;
   width:100%;
   min-height: 100%;
   z-index:1000;
} 
```

我尝试了许多 z-index 组合，但我似乎无法让一个元素可点击而不使另一个元素不可点击。

任何帮助将不胜感激！

[http://www.travelhome.com.au/index.htm](http://www.travelhome.com.au/index.htm)是有问题的网站

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:04:17.350

改变你的`#sidestripe`宽度，`380px`而不是`100%`：

```
#sidestripe {
display:inline;
position:fixed;
left:0px;
top:-2px;
width:380px;
min-height: 100%;
z-index:1000;
} 
```

这样它就不会覆盖页面上的其他内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:05:01.690

我不知道究竟是什么问题，但前段时间我遇到了类似的问题。

为了解决这个问题，我浏览了谷歌浏览器的开发者工具，隐藏类应用了预定义的 Z-index，所以我的被覆盖了。

尝试找到所有应用的类，可能你会发现类似的东西。

这通常在使用 API 时发生。

# python - django shell启动时如何运行任意代码？

> ID：11499494
> 
> 赞同：8
> 
> 时间：2012-07-16T07:01:04.670
> 
> 标签：python, django, debugging, django-shell

这个问题：[Automatically import models on Django shell launch](https://stackoverflow.com/questions/4863301/automatically-run-code-on-django-shell-launch)有解释如何在启动时使用 shell_plus 导入模型的答案，但没有关于如何运行代码的一般答案。

但是有没有一种简单的方法来运行一个 python 脚本？

```
python manage.py shell [or shell_plus] --run=script.py 
```

只需运行脚本，就好像您在 shell 启动时输入了整个内容一样。

我意识到你可以在 shell 中导入东西，但是它们被困在一个命名空间中。

我认为 ipython 应该有一种方法来运行脚本，然后将其`locals()`导入顶级命名空间。在那种情况下，你可以做`%magic script.py`，我们只需要一步，这很好。

更改启动 shell 的方式应该没问题 - 主要目标是能够创建一个在启动 shell 时运行的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:18:28.160

您可以像以前一样创建自己的自定义命令`shell_plus`：查看命令的[源代码](https://github.com/django-extensions/django-extensions/blob/master/django_extensions/management/commands/shell_plus.py)以`shell_plus`了解如何操作。在该代码中，您可以指定并运行需要在启动 shell 之前执行的文件。[Django 关于创建自定义命令](https://docs.djangoproject.com/en/dev/howto/custom-management-commands/)的文档也很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:16:19.457

您可以尝试使用环境变量 PYTHONSTARTUP。还可以尝试 django-extensions：[django-extensions](https://github.com/django-extensions/django-extensions/blob/master/django_extensions)

请参阅 django-extensions/management/commands/shell_plus.py 命令。

从这个命令的源代码中，我看到它尊重 PYTHONSTARTUP 环境变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-26T09:16:48.263

shell_plus 使用有限形式的 IPython，它不处理其启动和配置，这会破坏大多数在 django+ipython shell 启动时运行东西的正常尝试。您可以将其切换为使用完整版，这将解决大多数问题。

**修改django_extensions/management/commands/shell_plus.py**

消除：

```
embed(user_ns=imported_objects) 
```

并将其替换为：

```
from IPython import start_ipython
start_ipython(argv=[], user_ns=imported_objects) 
```

然后将加载启动目录中的 python 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T07:05:16.880

不确定是否有可以使用的标志，但如果你安装了 ipython，它应该很简单：

`ipython`

然后，当您在提示中时：

`run script.py`

然后：

`run manage.py shell`

# java - 在 Java 中测试两个 BST 是否相等

> ID：11499495
> 
> 赞同：4
> 
> 时间：2012-07-16T07:01:10.803
> 
> 标签：java, equality, binary-search-tree

我想测试两个给定的`BSTs`（二叉搜索树）在 Java 中是否相等。`BST`节点没有指向父节点的指针。

最简单的解决方案是遍历两者`BSTs`，创建两个遍历列表并测试列表是否相等。但是它需要 O(N) 内存。

我想尝试另一种方式：创建一个`Iterator`，它遍历`BSTs`, 和 ... 其余的很明显。

是否有意义？是否有任何“更好”（更简单有效）的解决方案来测试两者`BSTs`是否相等？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T07:03:46.433

1.  二叉搜索树是一棵树，对吧？

2.  如果两棵树具有相同的根和相同的孩子，则它们是相等的。

3.  每个孩子也是一棵树。

4.  见第 2 点。

提示：[递归](/questions/tagged/recursion "显示标记为“递归”的问题")。内存消耗是`O(logn)`（自己证明）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:04:11.597

最简单的方法可能是，创建两个树的哈希，然后检查它们是否相等。这仅适用于两棵树的内容也相同的情况。

如何创建校验和然后比较这些校验和。

[http://www.mkyong.com/java/how-to-generate-a-file-checksum-value-in-java/](http://www.mkyong.com/java/how-to-generate-a-file-checksum-value-in-java/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:04:34.920

实现递归`equals()`方法。它不需要内存，并且很容易编码。

像这样的东西应该工作：

```
public class Node {

    Object value;
    private Node left;
    private Node right;

    public boolean equals(Object o) {
        if (o instanceof Node) {
            Node node = (Node)o;
            if (value.equals(node.value)) {
                return true;
            }
            return ((left == null && node.left == null) || left.equals( node.left)) && 
                    ((right == null && node.right == null) || right.equals( node.right));
        }
        return false;
    }
} 
```

请注意，您应该重写`hashCode()`以反映此实现，因此请考虑将上述 impl 命名为，`equalsDeep()`并跳过该`hashCode()`impl。

# android - j2memaprouteprovider 项目不工作，给我一个力量关闭

> ID：11499499
> 
> 赞同：1
> 
> 时间：2012-07-16T07:01:43.097
> 
> 标签：android, google-maps, android-layout, java-me, android-maps

有一个[关于在谷歌地图中绘制线条](https://stackoverflow.com/q/2023669)的问题，建议的解决方案之一是一个完整的项目，可在以下链接中找到。

[http://code.google.com/p/j2memaprouteprovider/source/browse/#svn%2Ftrunk%2FJ2MEMapRouteAndroidEx%2Fsrc%2Forg%2Fci%2Fgeo%2Froute%253Fstate%253Dclose](http://code.google.com/p/j2memaprouteprovider/source/browse/#svn%2Ftrunk%2FJ2MEMapRouteAndroidEx%2Fsrc%2Forg%2Fci%2Fgeo%2Froute%253Fstate%253Dclosed)

我刚刚下载了这个应用程序，它不工作。整件事，它给了我一种接近的力量。

我希望它可以在没有更改的情况下工作，因为它已发布在上面的链接中。为了让它发挥作用，我可以做些什么？

另外，我没有得到 URL 的概念，我的意思是解析？

# python - 如何在 paramiko 建立的 ssh 连接中将文件传输到 ssh 服务器？

> ID：11499507
> 
> 赞同：19
> 
> 时间：2012-07-16T07:02:16.387
> 
> 标签：python, ssh, sftp, paramiko

我正在使用 Python 的 paramiko 数据包来保持与服务器的 ssh 连接：

```
s = paramiko.SSHClient()
s.set_missing_host_key_policy(paramiko.AutoAddPolicy())
s.connect("xxx.xxx.xxx.xxx",22,username=xxx,password='',timeout=4) 
```

我想使用这个 ssh-connection 将文件传输到 ssh 服务器，我该怎么做？

就像使用 `scp a-file xxx@xxx.xxx.xxx.xxx:filepath` 命令一样？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-17T09:03:51.387

试试这个：

```
s = paramiko.SSHClient()
s.set_missing_host_key_policy(paramiko.AutoAddPolicy())
s.connect("xxx.xxx.xxx.xxx",22,username=xxx,password='',timeout=4)

sftp = s.open_sftp()
sftp.put('/home/me/file.ext', '/remote/home/file.ext') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-12T06:44:24.450

[这是来自https://www.programcreek.com/python/example/4561/paramiko.SSHClient](https://www.programcreek.com/python/example/4561/paramiko.SSHClient)的另一个示例

```
def copy_file(hostname, port, username, password, src, dst):
    client = paramiko.SSHClient()
    client.load_system_host_keys()
    print (" Connecting to %s \n with username=%s... \n" %(hostname,username))
    t = paramiko.Transport(hostname, port)
    t.connect(username=username,password=password)
    sftp = paramiko.SFTPClient.from_transport(t)
    print ("Copying file: %s to path: %s" %(src, dst))
    sftp.put(src, dst)
    sftp.close()
    t.close() 
```

# c++ - 当 ac/c++ 语句只包含一个变量名时，有什么特定用途吗？

> ID：11499524
> 
> 赞同：2
> 
> 时间：2012-07-16T07:03:47.433
> 
> 标签：c++

我曾经看到一段代码如下，

```
/** Starts a synchronized block
*
*   This macro starts a block synchronized on its argument x
*   Note that the synchronized block defines a scope (i.e. { })
*   All variables declared in it will live inside this block only
*/
#define SYNCHRONIZE_ON(x) { \
                const abcd::LockBase & __lock = \
                                abcd::MakeLock(x); __lock;

/** Ends a synchronized block */
#define END_SYNCHRONIZE   } 
```

和`SYNCHRONIZE_ON`一起`END_SYNCHRONIZE`用于在对象上同步。宏在其块中`SYNCHRONIZE_ON`定义了一个变量。`____lock`

这里的问题是：**句子`__lock;`（在 之后`abcd::MakeLock(x);`）的用途是什么？**请注意，这句话只包含变量名。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T07:11:28.527

图片你有这个代码：

```
SYNCHRONIZE_ON(myVariable)
   // Do stuff
END_SYNCHRONIZE 
```

它将被重写为：

```
{
    abcd::LockBase& __lock = abcd::MakeLock(myVariable);
    __lock;

    // Do stuff
} 
```

实际上，该`__lock`变量不会在您的代码中使用，它只是在它超出范围时处理关键部分（如果它是它使用的）。

该代码的*问题*在于它会产生大量警告，因为`__lock`已声明但从未使用过。该语句用于防止这些警告，并且编译器将对其进行优化（因为它没有副作用），这就是您的编译器实际执行的操作：

```
{
    abcd::LockBase& __lock = abcd::MakeLock(myVariable);

    // Do stuff
} 
```

**编辑**
此代码应该抑制“未使用的变量”警告，但它可能无法从“表达式无效”警告中保存。`pragma`禁用特定警告的 s 根本不可移植，并且 Internet 充满了避免它们的变通方法，就像这样（它似乎可以跨编译器移植）。

```
{
    abcd::LockBase& __lock = abcd::MakeLock(myVariable);
    (void)__lock;

    // Do stuff
} 
```

在这种情况下，更好的解决方案可能是将声明和锁获取分开，如下所示：

```
{
    abcd::LockBase& __lock = abcd::MakeLock(myVariable);
    __lock.Acquire();

    // Do stuff
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T07:18:16.177

从这段代码很难猜出是什么`__lock`。通常，您永远不应该使用以 开头的名称来命名您的东西`__`，因为这些名称是为编译器开发人员保留的。

在您的情况下， __lock 可以是宏（更可能）或全局变量（不太可能）。

你也有这一行： `const abcd::LockBase & __lock`. 这一行很可能声明了对`__lock`类对象的引用`LockBase`。

所以，在这里： `const abcd::LockBase & __lock = abcd::MakeLock(x);`我们只是执行一个函数调用。但是，`__lock`在块中的其他任何地方都没有使用，因此编译器会给你一个关于“*未使用的变量`__lock`*”的警告。因此，`__lock;`可能会添加该语句来抑制此警告。值得一提的是，这是 Herb Sutter 在他的*《C++ 编码标准：101 条规则、指南和最佳实践》一书中推荐的一种警告抑制方式*

对不起，如果我的解释有点混乱，希望你能得到大致的想法。

# javascript - 每当javascript要执行时如何显示一条消息？

> ID：11499530
> 
> 赞同：1
> 
> 时间：2012-07-16T07:04:11.670
> 
> 标签：javascript

我想在我的 javascript 代码中跟踪错误。有时 javascript 会自动执行并挂起我的浏览器我想跟踪 javascript 的哪个部分正在自动执行并挂起....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:26:45.427

使用 console.log 跟踪错误

或者使用警报作为其中包含变量的第一行代码，这应该会有所帮助，

我会推荐 console.log，因为警报变得烦人，控制台日志还可以更轻松地查看变量、对象和数组。我个人使用 chrome 你应该尝试一下:)

这也可能有助于[控制台日志问题](https://stackoverflow.com/questions/217957/how-to-print-debug-messages-in-the-google-chrome-javascript-console)

# asp.net - 将值从 ObjectDataSource 对象级别传递到 ASP .NET 控件

> ID：11499533
> 
> 赞同：0
> 
> 时间：2012-07-16T07:04:25.873
> 
> 标签：asp.net, objectdatasource

我正在使用 ObjectDataSource 和 FormView 控件。

在 ObjectDataSource 中，我指定了一个类型，以及一个执行插入操作的方法。但是，一旦插入完成，我想将用户重定向到其他页面，并且我需要新创建/持久对象的 ID。

所以在 FormView 中：

```
OnItemInserted="OnFormItemInserted" 
```

处理程序我需要访问该 ID。但是如何从 ObjectDataSource 级别优雅地传递该 id 呢？我可以使用

```
HttpContext.Current.Items 
```

在 ObjectDataSource 处理对象中，但我不喜欢它，因为我的处理类型对 ASP .NET 一无所知（关注点分离？）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:24:06.503

你有没有尝试过这样简单的事情：

## 在您的数据对象中

更新控件中配置的插入方法`ObjectDataSource`以返回生成的 ID：

```
public int Insert(string firstName, int lastname)
{
    // return the ID generated by the insert command
    return 4;
} 
```

## ASPX 代码背后

就是这样，在您处理`Inserted`事件的页面中：

```
protected void ods_Inserted(object sender, ObjectDataSourceStatusEventArgs e)
{
    var res = e.ReturnValue.ToString();
    this.lblMessage.Text = res;
    // add your cool additional logic and redirect stuff
} 
```

# assembly - arm 汇编代码 .long 在下面的代码中做了什么？

> ID：11499534
> 
> 赞同：2
> 
> 时间：2012-07-16T07:04:28.207
> 
> 标签：assembly, arm, boot

标签：

```
@ ATAG_CORE
.long   2
.long   0x54410001

@ ATAG_CMDLINE
.long   (1f - .) >> 2
.long   0x54410009 
```

我刚刚浏览了 ARM 的引导包装代码。定义 ATAG 标记的部分，我无法理解指令：

.long (1f - .) >> 2

这个指令是做什么的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:38:38.720

不是 ARM 专家，但在其他汇编程序中，这意味着

`1f`= 下一个标签的地址（前 1 个）
`.` = 当前位置

`1f - .`然后将是到下一个标签的距离（以字节为单位）

如果你将它除以 4 ( `>> 2`)，你得到的距离是 longs 而不是字节。

# ios - 如何在随地图移动的mapkit上添加叠加层

> ID：11499535
> 
> 赞同：1
> 
> 时间：2012-07-16T07:04:28.103
> 
> 标签：ios, xcode, overlay, mapkit, noise

我需要在 mapkit（噪声图像）上添加叠加图像，并且我需要该图像移动并无限继续。那可能吗？

我的目标是这样的：

![在此处输入图像描述](../Images/05d9976052ef0af12e17a9bda486c78e.png)

# asp.net-mvc - ASP.NET Mvc 两个依赖下拉列表？

> ID：11499538
> 
> 赞同：0
> 
> 时间：2012-07-16T07:04:37.557
> 
> 标签：asp.net-mvc, jquery

脚本

```
<script type="text/javascript">
$(document).ready(function () {
    $('musteri_sno').change(function () {
        $('form_sayac_secimi').submit(function () {
            if ($(this).valid()) {
                $.ajax({
                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {

                    }
                });
            }
            return false;
        });
    });
});
</script> 
```

html

```
@using (Html.BeginForm("SayacSecimiPartial", "SayacOkumalari", FormMethod.Post, new { id = "form_sayac_secimi" }))
{
<table>
    <tr>
        <td>
            @Html.DropDownList("musteri_sno", (SelectList)ViewBag.musteri_id, "--Müşteri Seçiniz--", new { id = "musteri_sno" })
        </td>
        <td>
            @Html.DropDownList("sayac_no", Enumerable.Empty<SelectListItem>(), "-- Sayaç Seçiniz --", new { id = "sayac_no" })
        </td>
        <td>
            <input type="submit" value="Uygula" />
            @Html.Hidden("sno", new { sno = ViewData["sno"] })
        </td>
    </tr>
</table> 
} 
```

我想用从第一个返回的值填充第二个下拉列表。我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:20:57.967

在 ajax 调用的成功回调中，构建`option`填充了返回值的标记，然后将其附加到`select`名为“sayac_no”的标记中。

```
success: function(result) {
  var opt = '';
  for (var i = 0; i < result; i++) {
    opt += '<option value="' + result[i].value + '">' + result[i].name + '</option>';
  }
  $('select[name=sayac_no]').html(opt);
} 
```

我想结果对象是具有两个属性的对象列表，名称和值。根据您的需要对其进行修改并改进它，因为这只是一个非常基本的版本。

# linux - crontab 作业的结束时间

> ID：11499545
> 
> 赞同：3
> 
> 时间：2012-07-16T07:05:06.090
> 
> 标签：linux, unix, solaris

我将在`20:00`until期间每 5 分钟运行一次 snoop 命令`23:00`，但我不知道如何在最后 5 分钟（`22:55`until `23:00`）杀死。请您在这方面帮助我。

窥探命令：

```
FILE=vitrin_`date +%Y%m%d%H%M`.cap
kill -9 `pgrep snoop`
snoop -x0 -d e1000g0 -o /export/home/vitrin/$FILE 
```

crontab：

```
0,5,10,15,20,25,30,35,40,45,50,55 20,21,22 * * * /export/home/snoop.sh 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:38:47.680

与其`snoop`在下一次 cron 运行中杀死你的（可能还有其他一些不相关的），你可以在诸如[`timeout`from coreutils](http://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)之类的工具的监督下从一开始就运行它。至少在 linux 下你几乎肯定已经拥有它，除非你的 coreutils 已经很老了。

```
timeout 5m snoop ...
status=$?
[ $status -eq 124 ] && exit 0
exit $status 
```

如果你真的需要`SIGKILL` `timeout`有一个`--signal`选择。

如果正在运行的命令被超时终止，则退出状态设置为 124。在您的情况下，您似乎想忽略它，例如。就像上面的例子一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:14:49.697

这样的事情可能会有所帮助：

```
kill -9 $(pgrep snoop) && \
  test $(date '+%s') -lt $(date -d "23:00" '+%s') && \
  snoop -x0 -d e1000g0 -o /export/home/vitrin/$FILE 
```

或者在 crontab 中像这样：

```
*/5 20-23 * * * /export/home/snoop.sh 
```

# objective-c-blocks - 阻塞问题，iOS

> ID：11499547
> 
> 赞同：1
> 
> 时间：2012-07-16T07:05:23.393
> 
> 标签：objective-c-blocks

尝试定义和分配块时出现此错误：

![](../Images/668e99828072d6246e785557bad1812c.png)

```
int (^bl)(int) = ^(int k)
{
    [_self c2:k]; // incompatible block pointer types initializing 'int (^)(int)' with an expression of type 'void (^)(int)'
}; 
```

这是来自一个[块教程](http://www.raywenderlich.com/9438/how-to-use-blocks-in-ios-5-tutorial-part-2)：

![](../Images/e0e9ccc7f9ce297289355e30ecd6adec.png)

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:18:20.490

`bl`将from的返回类型更改`int`为`void`。

```
void (^bl)(int) = ^(int k) {
    [_self c2:k];
}; 
```

如果您查看[块的语言规范，](http://clang.llvm.org/docs/BlockLanguageSpec.txt)您将看到发生了什么：

> 返回类型是可选的，是从返回语句中推断出来的。如果 return 语句返回一个值，它们都必须返回一个相同类型的值。**如果没有返回值，则推断的 Block 类型为 void；否则它是返回语句值的类型。**

在 Apple 示例中，返回类型将是`num * multiplier`与`int`块变量的返回类型匹配的类型`myBlock`。

但是在您的情况下，没有`return`语句，因此返回类型将`void`与块变量的返回类型不匹配`bl`。

# html - asp.net MVC 响应式设计最佳模板

> ID：11499548
> 
> 赞同：6
> 
> 时间：2012-07-16T07:05:23.393
> 
> 标签：html, css, asp.net-mvc-4, responsive-design

我正在为我的新 mvc 4 Web 应用程序比较响应式设计模板。到目前为止，我正在考虑来自 twitter 的 Bootstrap 和来自 Zurb 的 Foundation 框架。

我只是想知道根据您的经验哪个更好？还有其他好的选择吗？

谢谢，

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T16:57:09.023

阅读我的文章，它应该让您对入门有一个很好的了解。 [http://www.simple-talk.com/dotnet/asp.net/responsive-design-using-foundation-with-asp.net-mvc/](http://www.simple-talk.com/dotnet/asp.net/responsive-design-using-foundation-with-asp.net-mvc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T13:08:52.243

我尝试了 3-4 个响应式框架，但发现[Twitter Bootstap](http://getbootstrap.com/)是最好的。它现在也用于默认的 Microsoft Asp.net 模板。

# sql - 重命名和避免重复的迭代

> ID：11499549
> 
> 赞同：0
> 
> 时间：2012-07-16T07:05:27.247
> 
> 标签：sql, sql-server, sql-server-ce

想要通过重命名活动将表的所有行插入到新表中。我们也有一些我们不应该移动它们的例外。

`Renaming Act`: 将字符 '_' 更改为 ' '

`Exceptions` ：如果我们重命名它们将在新表中重复的项目。

因此，那里的所有项目都将是我们之前表格的唯一且重命名的版本。

*   这里我们没有任何整数 ID，
*   数据库是 SQL Server CE

* * *

*   我们的桌子：产品，tblNew
*   每个都有相同的列：“Product”、“col1”、“col2”

要将记录移动到 tblNew ，我们不想重复的关键列是“产品”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:16:31.107

```
INSERT INTO Table1(Column1)
    SELECT  REPLACE(OriginalColumn, '_', '')
      FROM  Table2 t2
            LEFT OUTER JOIN Table1 t1 ON t1.Column1 = REPLACE(OriginalColumn, '_', '')
     WHERE  t1.Column1 IS NULL  -- Not a duplicate Record 
```

# android - 如何在android中杀死正在运行的应用程序

> ID：11499550
> 
> 赞同：0
> 
> 时间：2012-07-16T07:05:27.830
> 
> 标签：android

我正在编写一个可以杀死其他正在运行的应用程序的应用程序。为此，我使用以下代码

```
int pid = process.pid;
android.os.Process.killProcess(pid);
Log.e("killed",process.processName); 
```

我能够显示所有正在运行的应用程序。但是上面两行代码并没有杀死应用程序（com.sample.mango）的进程。我还可以在市场上看到几个任务杀应用程序。

所以我的问题是——是否可以从其他应用程序中终止正在运行的应用程序？

如果是，那么杀死的方法是什么？（为什么上面的代码不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:12:16.680

Android 是否允许此类应用程序？这不是操作系统而不是第三方App提供的服务吗？如果我的应用程序被某些第三方应用程序杀死，我会讨厌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:19:41.510

从[文档](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)中：

> 杀死具有给定 PID 的进程。请注意，尽管此 API 允许我们根据其 PID 请求终止任何进程，但内核仍会对您实际能够终止的 PID 施加标准限制。通常这意味着仅运行调用者的包/应用程序的进程以及该应用程序创建的任何其他进程；共享一个公共 UID 的包也将能够杀死彼此的进程。

这就是为什么 killProcess 不起作用的原因。

您应该尝试[killBackgroundProcesses](http://developer.android.com/reference/android/app/ActivityManager.html#killBackgroundProcesses%28java.lang.String%29)。不要忘记添加`KILL_BACKGROUND_PROCESSES`到您的 AndroidManifest.xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:27:51.090

您也可以尝试[将](http://developer.android.com/reference/android/os/Process.html#sendSignal%28int,%20int%29 "发送信号/整数，整数）") [SIGNAL_KILL](http://developer.android.com/reference/android/os/Process.html#SIGNAL_KILL "SIGNAL_KILL")发送到 pid。

# android - 活动后的微调器更新

> ID：11499551
> 
> 赞同：-1
> 
> 时间：2012-07-16T07:05:34.103
> 
> 标签：android, spinner

在我的应用程序中，当用户单击微调器中的项目时，它将转到新活动，因为我有 5 个编辑文本，因为我保留微调器的值，当用户编辑此值并按下保存按钮时，编辑的值应替换微调器中的旧值。我怎样才能做到这一点？请帮助我..

我的微调器代码：

```
 public class BudgetJulyo4Activity extends Activity
{
        /** Called when the activity is first created. */
        DBadapter db =new DBadapter(this); 
        DBadapterRec dbrec=new DBadapterRec(this);
        public void onCreate(Bundle savedInstanceState) 
        {       

            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);  
            Button b1=(Button)findViewById(R.id.button1);
            Button b2=(Button)findViewById(R.id.button2);
            Button b3=(Button)findViewById(R.id.button3);
            Button b4=(Button)findViewById(R.id.button4); 
            Spinner s1=(Spinner)findViewById(R.id.spinner);
            Spinner s2=(Spinner)findViewById(R.id.spinner1);

            ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                    this, R.array.recurr_array, android.R.layout.simple_spinner_item);
            adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s1.setAdapter(adapter);        

            String group[]=getResources().getStringArray(R.array.group_array);------>Before calling edit(i.e when enters first time i am showing some hardcore value)

            ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(
                    this, android.R.layout.simple_spinner_item,group);
            adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
            s2.setAdapter(adapter1);    
}

 protected void onActivityResult(int requestCode, int resultCode, Intent data) ------>After edit option.
        {      
            java.lang.System.out.println("Inside act");
            // TODO Auto-generated method stub        
//      }
            super.onActivityResult(requestCode, resultCode, data);        
            if(resultCode==1)
            {          
                 Spinner s2=(Spinner)findViewById(R.id.spinner1);
                String str1=data.getStringExtra("grp1val");    
                String str2=data.getStringExtra("grp2val");  
                String str3=data.getStringExtra("grp3val");
                String str4=data.getStringExtra("grp4val"); 
                String str5=data.getStringExtra("grp5val");  
                String str6="Edit";

                String group[] = new String[] { str1,str2,str3,str4,str5,str6};
                 ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(
                        this, android.R.layout.simple_spinner_item,group);               
                adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                s2.setAdapter(adapter1);                

            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:34:42.603

尝试启动 SpinnerEdit Activity，`startactivityforresult`而不是`startActivity`让用户保存的值返回 Spinner Activity，然后您可以使用以下中的最新值更新 Spinner `startactivityforresult` ：

```
public void onItemSelected(AdapterView<?> s2, View arg1,
    int pos, long id) {
    // TODO Auto-generated method stub  
    group=s2.getItemAtPosition(pos).toString();
    if(group.equals("Edit"))
      {
        Intent i = new Intent(getApplicationContext(),SpinnerEdit.class);
        startActivityForResult(i, 1);
      }
      //your code here...

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode==1){
           String str1=ata.getStringExtra("grp1val");
           ...
           //here you can update your Spinner Adapter with latest values
        }
        else{
            Toast.makeText(this, "Fail", Toast.LENGTH_LONG).show();
        } 
```

在 SpinnerEdit 中：

```
saveButton.setOnClickListener(new OnClickListener() {
  @Override
  public void onClick(View v) {
    Intent spin = new Intent();
    spin.putExtra("grp1val", group1.getText().toString()); 
    spin.putExtra("grp2val", group2.getText().toString()); 
    spin.putExtra("grp3val", group3.getText().toString()); 
    spin.putExtra("grp4val", group4.getText().toString()); 
    spin.putExtra("grp5val", group5.getText().toString());
    setResult(1,spin);
    finish();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:14:35.943

如果 Spinner 的适配器扩展了 BaseAdapter，那么您应该`notifyDataSetChanged()`在修改数据后调用它：

```
((BaseAdapter)s2.getAdapter()).notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:15:20.280

在 setOnItemSelectedListener 中使用`s2.setselection(position)`并将该值保存在共享首选项中，并在该活动的 oncreate 中使用上述方法

# assembly - 程序集返回 false

> ID：11499553
> 
> 赞同：0
> 
> 时间：2012-07-16T07:05:38.300
> 
> 标签：assembly, x86, disassembly

在 IDA 我看到：

```
mov     ecx, [esp+130h+dwProcessId]
push    eax
push    ecx
call    sub_FE13A0
add     esp, 8
test    al, al
jnz     short loc_FE1261 
```

当前返回 false 导致程序终止。有人可以解释最后两行中的条件到底是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:11:37.200

我敢打赌最后两条指令将返回值`sub_FE13A0(...)`与 0 和 jmp 进行比较，`loc_FE1261`如果它不是 0 则继续执行过去`jnz`。

# c - 从 C 程序中调用调试器

> ID：11499554
> 
> 赞同：5
> 
> 时间：2012-07-16T07:05:45.153
> 
> 标签：c, linux, gdb, systems-programming

我正在阅读 David Hanson 的《C 接口和实现》一书。这个练习题似乎很有趣，我无法找到解决方案：

> 在某些系统上，程序可以在检测到错误时自行调用调试器。这个工具在开发过程中特别有用，因为断言失败可能很常见。

您能否提供一个关于如何调用调试器的简短示例。

```
void handle_seg_fault(int arg)
{
    /* how to invoke debugger from within here */
}

int main()
{
    int *ptr = NULL;
    signal(SIGSEGV, handle_seg_fault);
    /* generate segmentation fault */
    *ptr = 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T08:12:26.017

详细阐述 Christian.K 的评论，`fork()`在面对 SIGFPE 或 SIGSEGV 之类的东西时使用调试器可能不是最好的想法，因为......

1.  您的程序一开始就可能已损坏，从而导致`fork()`不安全；
2.  您可能希望使用与程序硬编码不同的东西进行调试；
3.  一般的应用程序用户不知道如何处理调试器；
4.  任何能*胜任*调试器的人通常会*更喜欢*coredump 而不是自动调用的调试器。

我可以复制到测试平台的核心转储在一天中的任何时间都在我客户的工作场所击败调试器实例。调试器界面会导致糟糕的最终用户错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T07:54:26.963

我有这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <string.h>
#include <errno.h>

void exception_handler(int)
{
    int pid = getpid();
    if (fork() != 0) {
        while(true) sleep(1000);
    }
    char buf[20];
    sprintf(buf, "--pid=%u", pid);
    execlp("gdb", "gdb", buf, NULL);
    exit(-1);
}

int init()
{
    if (signal(SIGSEGV, exception_handler) < 0) {
       return errno;
    }
    if (signal(SIGILL, exception_handler) < 0) {
        return errno;
    }
    if (signal(SIGFPE, exception_handler) < 0) {
        return errno;
    }
    return 0;
}

int main()
{
    if (int rc = init()) {
       fprintf(stderr, "init error: %s\n", strerror(rc));
       return 1;
    }
    *((char*)(0)) = 1;
} 
```

# ruby-on-rails-3 - Rails SRP 模块，attr_accessible

> ID：11499556
> 
> 赞同：1
> 
> 时间：2012-07-16T07:05:54.093
> 
> 标签：ruby-on-rails-3, module, single-responsibility-principle, attr-accessible

我正在学习 SOLID 并尝试将 SRP 引入我的 rails 应用程序。我有以下具有基本身份验证的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :password, :password_confirmation
  attr_accessor :password

  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of     :password, :on => :create

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  def self.generate_random_password
    return ActiveSupport::SecureRandom.hex(12)
  end
end 
```

我想将所有身份验证逻辑移动到一个模块，如下所示：

```
module Authentication

  attr_accessible :password, :password_confirmation
  attr_accessor :password

  before_save :encrypt_password

  validates_confirmation_of :password
  validates_presence_of     :password, :on => :create

  def self.authenticate(email, password)
    user = find_by_email(email)
    if user && user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)
      user
    else
      nil
    end
  end

  def encrypt_password
    if password.present?
      self.password_salt = BCrypt::Engine.generate_salt
      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)
    end
  end

  def self.generate_random_password
    return ActiveSupport::SecureRandom.hex(12)
  end
end 
```

我的用户模型是这样的：

```
class User < ActiveRecord::Base
  include Authentication #SRP in action! :P
end 
```

现在错误开始了：

> 身份验证的未定义方法“attr_accessible”：模块

我将如何解决此错误？我确信这是将 SRP 引入我的 Rails 应用程序的最佳开始。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:24:30.217

在错误的范围内调用 attr_accessible 方法。看看问题来解决这个问题：

[http://api.rubyonrails.org/classes/ActiveSupport/Concern.html](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)

这将导致：

```
module Authentication
  extend ActiveSupport::Concern
  included do
    attr_accessible :password, :password_confirmation
  end
  ...
end 
```

这也将照顾你的类和实例方法定义。

注意：具体来说，这并不能完全实现 SRP，因为多个职责仍然在同一个类中共享，即使它们被分成模块。通过引用或修饰的类组合会是一个更严格的解决方案，但我更喜欢模块的务实方法。

# wordpress - 重定向一个 wordpress 网站

> ID：11499561
> 
> 赞同：1
> 
> 时间：2012-07-16T07:06:07.003
> 
> 标签：wordpress, redirect

我已经将我的 wordpress 站点安装在一个文件夹中，现在我只能通过以下方式访问它：[域名]/wordpress。

是否可以将我的网站重定向到 [域名]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:10:29.403

是的，这是可能的，可以分两步完成：

1.  更改站点地址选项
2.  修改 index.php

详细信息：[http](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory) ://codex.wordpress.org/Giving_WordPress_Its_Own_Directory段落**使用预先存在的子目录安装**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:07:44.403

将 Wordpress 移动到您的 webroot：

[http://codex.wordpress.org/Moving_WordPress#On_Your_Existing_Server](http://codex.wordpress.org/Moving_WordPress#On_Your_Existing_Server)

# php - 如何在 Symfony 2 中实现服务类

> ID：11499568
> 
> 赞同：0
> 
> 时间：2012-07-16T07:06:54.217
> 
> 标签：php, symfony, dependency-injection

我正在尝试学习 OOP 和 DI。我正在接受 FOSUserBundle 的帮助并编写自己的包来学习东西。

FOS 有：

`UserManager.php`和`UserManagerInterface.php`。

现在，我想在`Service`文件夹中创建 UserService.php。

我很困惑是否可以替换`UserManager.php`为`userService.php`，还是需要制作一个新文件？

`userService.php`延伸`userManager.php`。

我想保持模块化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:52:53.250

您不应该编辑 FOSUserBundle 中的任何文件，使用第二种解决方案：继承，并使用配置文件来选择您的 userManager 而不是 FOS 用户管理器。

# mysql - 如何将 table1.column1 的值设置为 table2.column2 的平均值

> ID：11499569
> 
> 赞同：0
> 
> 时间：2012-07-16T07:06:56.680
> 
> 标签：mysql, select, sum, average

我已经看遍了，似乎找不到明确的解决方案。对不起，如果我错过了。

我的问题：我有每小时累积并放置在 table1 中的数据，我希望 table2.metric_ 包含当天 table1.metric_ 的平均值。

> 表 1：record_key_、id_、metric_、date_
> 
> 表 2：record_key_、id_、metric_、date_

获取我使用当天的记录列表： SELECT * FROM table1 t WHERE t.date_ >= DATE_SUB(NOW(),INTERVAL 1 DAY) WHERE t.id_='id1';

table2 的 INSERT 查询是什么样的，所以 table2.metric_ 是 table1 中由前一个 SELECT 语句返回的所有 id1 记录的 table1.metric_ 列值的平均值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:15:25.007

```
insert into table2 SELECT avg(total) FROM (SELECT count(*) as Total FROM table1 t WHERE t.col= DATE_SUB(NOW(),INTERVAL 1 DAY) group by colname) as a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:20:29.720

```
INSERT INTO table2 metric_
       SELECT AVG(t.metric_) FROM table1 t WHERE t.date_ >= DATE_SUB(NOW(),INTERVAL 1 DAY) WHERE t.id_='id1'); 
```

应该是解决方案您可以在 SELECT 语句中添加您喜欢的 date_ 格式

没有测试查询，因为我没有 MySQL 测试数据库。

来源：[MySQL 参考中的 INSERT-SELECT](http://dev.mysql.com/doc/refman/5.1/de/insert-select.html)

（我无法评论接受的答案，但我很确定这是错误的？它计算有多少条目并计算平均值（一天有多少小时？）

# iphone - 如何删除视图？

> ID：11499570
> 
> 赞同：0
> 
> 时间：2012-07-16T07:07:04.377
> 
> 标签：iphone, ios, ipad

我有一个 iphone 应用程序，我在其中添加了一个视图控制器视图，其中包含一个类似于从左翻转的动画。我正在使用导航栏按钮项进行操作。单击它时，我正在将视图控制器视图添加到我的 rootview 中。并更改按钮 amd该操作我正在删除该视图并添加上一个按钮。但是 pbm 我需要在该视图内的按钮操作中删除该信息视图。这是我的翻转动画代码。

```
- (void)backPressed1
{

    InfoViewController *infoviewcontroller = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:.95];

    //[UIView beginAnimations:nil context:NULL];

    //[UIView setAnimationDuration:0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:self.view cache:YES];
    //CGRect frame=CGRectMake(0,0,320,480);
    [rootview removeFromSuperview];
    //[infoviewcontroller.view setFrame:frame];
    //selfhelpscoresAppDelegate *appdelegate=[[UIApplication sharedApplication] delegate];
    [infoviewcontroller viewWillAppear:YES];
    [self.view addSubview:infoviewcontroller.view];
    [UIView commitAnimations];
    UIImage *buttonImage = [UIImage imageNamed:@"information_btn.png"];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];

    button.frame = CGRectMake(0, 0, 42, 32);
    [button addTarget:self action:@selector(backpressed) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    self.navigationItem.rightBarButtonItem = customBarItem;

    //UILabel *label =[[[UILabel alloc]init]autorelease];
    self.navigationItem.title=@"Tutorial";
    //label.text = @"";

    //self.navigationController.title = @"";
    [customBarItem release];

}
-(IBAction)backpressed
{
    InfoViewController *infoviewcontroller = [[InfoViewController alloc] initWithNibName:@"InfoViewController" bundle:nil];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:.95];

    //[UIView beginAnimations:nil context:NULL];
    //DailypercentageViewController *pieChart = [[DailypercentageViewController alloc] initWithNibName:@"DailypercentageViewController" bundle:nil];
    //[UIView setAnimationDuration:0.5];
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.view cache:YES];
    //CGRect frame=CGRectMake(0,0,320,370);
    [infoviewcontroller.view removeFromSuperview];
    [self.view addSubview:rootview];
    [UIView commitAnimations];  

    //[rearView setFrame:frame];
        //[pieChart viewDidAppear:YES];

    UIImage *buttonImage1 = [UIImage imageNamed:@"information_btn.png"];
    UIButton *button1 = [UIButton buttonWithType:UIButtonTypeCustom];
    [button1 setImage:buttonImage1 forState:UIControlStateNormal];

    button1.frame = CGRectMake(0, 0, 42, 32);
    [button1 addTarget:self action:@selector(backPressed1) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *customBarItem1 = [[UIBarButtonItem alloc] initWithCustomView:button1];
    self.navigationItem.rightBarButtonItem = customBarItem1;
    [customBarItem1 release];

    //UILabel *label1 =[[[UILabel alloc]init]autorelease];
    self.navigationItem.title=@"";
    //label1.text = @"Home";
    //self.title= @"Home";

} 
```

`我的问题是如何删除此信息视图并从信息视图的按钮操作中返回根视图？

# html - 在另一个 div 中动态改变 div 的高度

> ID：11499571
> 
> 赞同：0
> 
> 时间：2012-07-16T07:07:05.833
> 
> 标签：html, css

我试图让 div 的高度根据 div 内的元素数量动态变化。我正在尝试做的整个想法如下图所示![在此处输入图像描述](../Images/f7754cbb96069bcc4003f980ccfabcbf.png)

最后一个 div 应该能够动态更改。看来我必须设置第三个内部 div 的高度。如果我不这样做，则 div 会出现在主 div 之外。

我尝试过的解决方案：

1）溢出：自动

2) 尝试不设置第三个内部 div 的高度。

我必须使用javascript吗？我可以不使用javascript吗？这些解决方案不起作用。需要一些指导..对不起，如果问题重复了....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:10:38.083

不要给 div 一个固定的高度，只`float:left;`在你的 CSS 中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:12:23.417

嘿，现在我认为你应该这样做

**HTML**

```
<div class="parent">
  <div class="child1">
    <div class="one">One</div>
     <div class="one">two</div>
  </div>

   <div class="child1">
    <div class="one">One</div>
     <div class="one">two</div>
  </div>

   <div class="child2">
     dynamic height
     </div>

</div> 
```

**CSS**

```
.parent{
border:solid 1px red;
}
.child1, .child2{
overflow:hidden;
  margin:10px;
  border:solid 2px green;
}

.one{
background:red;
  border:solid 1px black;
  padding:10px;
  float:left;
  margin:10px;
} 
```

**现场演示** [http://tinkerbin.com/i1R8emEb](http://tinkerbin.com/i1R8emEb)

现在根据您的设计更改为高度宽度或高度..

# android - 使用不同状态下的两个图像切换按钮

> ID：11499574
> 
> 赞同：104
> 
> 时间：2012-07-16T07:07:35.260
> 
> 标签：android, togglebutton

我需要使用两个图像而不是开/关状态来制作一个切换按钮。

在关闭状态下，我设置了一个背景图像。但是当我使用背景图像时，无法删除关闭文本。

而且我无法通过单击切换按钮将另一个图像设置为 ON 状态 :( 我是 android 新手。我希望你们能帮助我摆脱这个问题

* * *

## 回答 #1

> 赞同：226
> 
> 时间：2012-07-16T07:10:12.930

做这个：

```
<ToggleButton 
        android:id="@+id/toggle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/check"   <!--check.xml-->
        android:layout_margin="10dp"
        android:textOn=""
        android:textOff=""
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:layout_centerVertical="true"/> 
```

在可绘制文件夹中创建 check.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/selected_image"
          android:state_checked="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/unselected_image"
        android:state_checked="false"/>

 </selector> 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-31T03:16:32.143

AkashG 的解决方案对我不起作用。当我将 check.xml 设置为背景时，它只是在垂直方向上分层。要解决此问题，您应该将 check.xml 设置为“android:button”属性：

```
<ToggleButton 
    android:id="@+id/toggle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:button="@drawable/check"   //check.xml
    android:background="@null"/> 
```

检查.xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- When selected, use grey -->
    <item android:drawable="@drawable/selected_image"
          android:state_checked="true" />
    <!-- When not selected, use white-->
    <item android:drawable="@drawable/unselected_image"
          android:state_checked="false"/>
    </selector> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-24T10:34:20.797

你可以尝试这样的事情。在这里单击图像按钮，我切换图像视图。

```
holder.imgitem.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            if(!onclick){
            mSparseBooleanArray.put((Integer) view.getTag(), true);
            holder.imgoverlay.setImageResource(R.drawable.ipad_768x1024_editmode_delete_overlay_com);
            onclick=true;}
            else if(onclick)
            {
                 mSparseBooleanArray.put((Integer) view.getTag(), false);
                  holder.imgoverlay.setImageResource(R.drawable.ipad_768x1024_editmode_selection_com);

            onclick=false;
            }
        }
    }); 
```

# haskell - 在haskell中通过冒泡排序搜索元组列表的排序索引

> ID：11499577
> 
> 赞同：1
> 
> 时间：2012-07-16T07:07:55.890
> 
> 标签：haskell, tuples

我选择二进制搜索记录数组索引作为我的研究生研究的 c++ 和 haskell 我**编写**c++ 代码并工作，现在我为 haskell 工作

```
 import Data.List

  data BookInfo = Book Int String [String]
            deriving (Show) 
```

--输入变量

```
 entering :: Int String [String]-> Book
  entering id name subject= Book id name subject 
```

--创建元组数组的索引

```
 index :: [Book]->[Int]
  index [m] = getID (Book id _     _      ) = id
  main :: IO ()
  main = do
  putStrLn "Please enter your book id,name,Subject"
  Book inpStr <- getLine
  putStrLn print r 
```

-- 使用地图的冒泡排序

```
 bubbleSort ::(Ord x) => [x] -> [x]
 bubbleSort (x':xs) = if x>x' then x': bubbleSort(x:xs)
                  else
                  if x<x' then x: bubbleSort(x':xs)
                  else 
                               x: bubbleSort(X':xs)

 bubble ::[a] -> [a]
 bubble [a] = map bubbleSort [a] 
```

--为数组创建索引

```
 indexsort(ord a)::[int]->[Int]
 indexsort a=bubble a 
```

--制作元组列表

```
 addBooks2List Book->[Book]->[Book]
 addBooks2List b m=b:entering b':m 
```

--二进制搜索

```
 binarysearch [Int]->Int->Int->Int->Int
 a=bubble x
 binaryseach a i m j=
 let u=(i+m)/2
 if a[u]=j then u
 if a[u]>j then binaryseach a i u-1 j
 else 
 if a[u]<j then binarysearch a u+1 m j
 if i=m "Not found" 
```

--打印具有搜索到的 id 的元组

```
 print::Int->Book
 print r= Book r y z 
 r=binaryseach m 0 (length m) 
```

它在输入“输入”时在 8:3 解析错误时出错这个错误是什么意思？以及如何纠正它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:26:34.487

一方面，类型签名`entering`应该是

```
entering :: Int -> String -> [String] -> BookInfo 
```

而不是`entering :: Int String [String]-> Book`——但这是一个类型错误，而不是一个解析错误。

也许您的缩进是错误的，但是如果没有逐字提供的代码，这很难说。请记住：在 Haskell 中，与 C 和 Java 等语言相反，代码的布局很重要。

无论如何，正如您发布的那样，代码远非解决您的问题的有效解决方案。您可能想退后几步，学习如何在 Haskell 中编写基本函数，然后再学习如何将它们粘合在一起，以便编写更多涉及的程序。我真的怀疑通过尝试将 C++ 片段转换为 Haskell 来学习该语言是否有很高的成功机会。只是我的两分钱，虽然...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T07:50:18.393

你的代码中有很多问题，你最好从一个函数开始，慢慢地扩展你的程序，看看你得到了编译的增量部分。从此开始：

```
entering :: Int String [String]-> Book
entering id name subject= Book id name subject 
```

首先，`Book`不是类型而是数据构造函数，类型是`BookInfo`. 然后，你错过了箭头（正如 dblhelix 指出的那样）。所以它应该是：

```
entering :: Int -> String -> [String]-> BookInfo
entering id name subject= Book id name subject 
```

这将编译。但是，`entering`现在与`Book`. 无论如何，继续添加下一个函数并编译它等等。

如果我们继续，

```
index :: [Book]->[Int]
index [m] = 
```

缺少定义（右侧是`=`什么？），并且`[m]`只会匹配具有单个元素的列表，这可能不是您想要的。完成此功能，或将其注释掉并继续其余部分。显然你目前根本不使用它。等等。

# php - 使用php从url读取xml数据

> ID：11499581
> 
> 赞同：0
> 
> 时间：2012-07-16T07:08:52.000
> 
> 标签：php, xml

我想使用 php- 从这个 url 读取数据和 xml 属性值

[旅程规划师](http://journeyplanner.tfl.gov.uk/user/XML_TRIP_REQUEST2?language=en&sessionID=0&place%20_origin=London&type_origin=stop&name_origin=Alexa%20nder%20Road&place_destinat%20ion=London&type_destination=stop&name_destination=Prince%20Of%20Wales%20%20Gate&itdDate=20110801&itdTime=0800)

我以前从未使用过xml..所以我需要一些建议来完成我的任务..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:30:05.190

您可以`simplexml_load_file(string $filename)`为此使用。只需将完整的 URL 传递给此函数，例如：

```
$url="your url";

$xmlinfo = simplexml_load_file($url);

print_r($xmlinfo); 
```

# arrays - 无法读取：变量不是数组

> ID：11499584
> 
> 赞同：3
> 
> 时间：2012-07-16T07:09:00.953
> 
> 标签：arrays, tcl

我有以下代码：

```
set arr1(a1) t1
set arr2(a2) t2
set l1 {}
lappend l1 arr1
lappend l1 arr2

set arr3(a3) $l1

foreach names [array names arr3] {
    set value $arr3($names)
    puts "names = $names, value = $value"
    foreach ar $value {
      if {[array exists $ar]} {
        puts "$ar is an array"
        foreach {key val} [array get $ar] {
          set d1 $ar($key)
          puts "ar key = $key value = $val "
        }
      }
    }
  } 
```

但是当我运行 tcl 脚本时，它对于 "set d1 $ar($key)" 行失败了。错误消息是 'can't read "ar(a1)": variable is not array' 。您能否建议导致错误的原因以及如何解决该错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T09:34:59.657

# android - 声音传感器，安卓

> ID：11499585
> 
> 赞同：0
> 
> 时间：2012-07-16T07:09:03.490
> 
> 标签：android, android-layout, android-sensors

我想制作一个能够记录环境声音并在 android 中生成图形的测试应用程序。请有人建议我如何捕捉周围的声音并对其进行分析以检测噪音或类似的东西。我是安卓新手。:)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:23:19.983

使用 MediaRecorder，卢克。或者，如果您需要对正在录制的数据进行更多控制，请使用 AudioRecorder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:50:50.417

尝试使用[AudioCapture](http://developer.android.com/guide/topics/media/audio-capture.html)使用麦克风录制。

# html - 为什么div在div中

> ID：11499586
> 
> 赞同：1
> 
> 时间：2012-07-16T07:09:05.243
> 
> 标签：html, css

我试图通过尝试用 HTML/CSS 制作简单的网站来学习 HTML/CSS。到目前为止，我已经建立了一些基本的骨架，但有些事情我无法解决。

我有一个问题，即 div 的文章列表、sidebar1、sidebar2 放在 div 页脚内，但我想将 div 的文章列表、sidebar1、sidebar2 放在页脚之外。

这是相关代码：HTML：

```
 <!-- article listing -->
        <div class="articlelisting">
            articlelisting
        </div>

        <!-- sidebar 1 -->
        <div class="sidebar1">
            sidebar1
        </div>

        <!-- sidebar 2 -->
        <div class="sidebar2">
            sidebar2
        </div>

        <!-- footer -->
        <div class="footer">
            footer
        </div> 
```

CSS：

```
.articlelisting {
display: inline;
width: 48%;
float: left;
}

.sidebar1 {
display: inline;
width: 24%;
float: right;
}

.sidebar2 {
display: inline;
margin-right: 15px;
width: 24%;
float: right;
}

 .footer {
width: 100%;
border: solid 1px red;
} 
```

编辑：我已经放置了文章列表 div。对不起，我错过了。

我的问题是为什么 div 文章列表、sidebar1、sidebar2、inside div footer，以及如何将它们放在 div footer 之外？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:17:32.340

嘿现在清楚你的页脚就像这样

```
 .footer{
    clear:both;
    overflow:hidden;
       /// and write some properties as required to
    } 
```

现场演示[http://tinkerbin.com/9vrEFCqo](http://tinkerbin.com/9vrEFCqo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:18:50.933

添加`clear: both;`到您的页脚样式。这可以确保页脚与前面的 div 保持一致`float`。

```
.footer {
  clear: both; <-- Add this
  width: 100%;
  border: solid 1px red;
}​ 
```

[我在jsfiddle](http://jsfiddle.net/bAue5/)发布了一个工作示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:15:04.400

然后将您的文章列表、sidebar1、sidebar2 放在页脚之外。

并给

```
.footer {
width: 100%;
border: solid 1px red;
clear:both;
} 
```

# iphone - 如何在 iphone 应用程序的新行上制作电子邮件正文的一些文本

> ID：11499587
> 
> 赞同：0
> 
> 时间：2012-07-16T07:09:05.007
> 
> 标签：iphone, xcode

我正在从我想要的 iphone 应用程序发送电子邮件

现在在正文字段中 MyScroe 和 My Time 显示在同一行我希望它们应该分别在不同的行上如何显示

```
 NSString * emailBody = [NSString stringWithFormat:@"My Score: %d/%d, My Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time];
    [picker setMessageBody:emailBody isHTML:NO]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:13:34.147

`"\n\r"`应该适用于您的情况。如果您想更改为 html ( `isHTML:YES`)，那么您必须使用`"<br/>"`

```
NSString * emailBody = [NSString stringWithFormat:@"My Score: %d/%d\n\rMy Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:13:43.450

使用转义序列。尝试`\n`新线路。一对一`\n`_

```
NSString * emailBody = [NSString stringWithFormat:@"My Score: %d/%d, \n\nMy Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:14:00.217

您可以使用“\n”转义在此字符串中插入换行符。每个 "\n" 代表一个换行符，无论它被添加到哪里。

# asp.net-mvc - 如何使用 Telerik 开放访问从不同数据模型的不同表中获取数据

> ID：11499588
> 
> 赞同：0
> 
> 时间：2012-07-16T07:09:10.347
> 
> 标签：asp.net-mvc, visual-studio-2010, telerik-open-access

我正在使用 Telerik 开放式访问，我有三种不同的数据模型，例如：

```
UserEntitiesModel->account_details
ProfileEntitiesModel->biographic_details
ContactsEntitiesModel->contact_groups 
```

我在不同的数据模型中有三个不同的表。我想从所有表中加载数据；我使用连接并编写了 lambda 表达式，但它引发了异常

> 用户代码未处理的 InvalidOperationException

你能告诉我如何从不同数据模型的不同表中检索数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:59:14.800

您会看到，不同的模型 (rlinq) 文件生成不同的 Context 对象（从 OpenAccessContext 派生的对象），它们又使用不同的内部结构并且完全独立。这意味着您不能在 LINQ 查询中组合它们。

LINQ 查询是针对每个上下文的，并且（通常）在 sql server 上执行。OpenAccess 无法知道两个模型如何关联以及它们是否来自同一个数据库实例。

话虽如此，如果数据模型只是同一数据库的不同部分（并使用相同（或相似）的连接字符串），您应该能够将模型聚合到单个上下文对象中。[上下文对象使用 MetadataSource 进行初始化，您可以使用AggregateMetadataSource](http://www.telerik.com/help/openaccess-orm/fluent-mapping-merging-models-aggregate-metadata-source.html)将您拥有的模型合并为一个模型。您将需要实现自己的 Context 对象，这需要更多的工作，但它应该可以工作。

如果您不想遇到这样的麻烦，您可以在 LINQ 查询中使用它们之前使用 .ToList() 从表中枚举结果。然而，这意味着您将在客户端上检索更多您不需要的数据。

# c# - 部分刷新gridview

> ID：11499589
> 
> 赞同：1
> 
> 时间：2012-07-16T07:09:13.363
> 
> 标签：c#, asp.net, gridview

如何在网格视图中单独刷新率？我正在使用下拉列表来过滤我的数据。如果未选择任何内容，则显示所有内容。例如，它正在过滤国家，我希望 gridview 按国家使用不同的刷新率。

```
<form id="form1" runat="server">

  <h3>Northwind Employees</h3>

    <table cellspacing="10">            
      <tr>
        <td valign="top">
          <table border="0">
            <tr>
              <td valign="top">Country</td>
              <td><asp:DropDownList runat="server" id="CountryListBox" AppendDataBoundItems="True"
                                    DataSourceID="CountrySqlDataSource" 
                                    DataTextField="Country" DataValueField="Country" >
                    <asp:ListItem Selected="True" Value="" >(Show All)</asp:ListItem>
                  </asp:DropDownList>
              </td>
            </tr>
            <tr>
              <td>Last Name</td>
              <td><asp:TextBox runat="server" id="LastNameTextBox" Text="*" /></td>
            </tr>
            <tr>
              <td></td>
              <td><asp:Button runat="server" id="FilterButton" Text="Filter Results" /></td>
            </tr>
          </table>
        </td>

        <td valign="top">                
          <asp:GridView ID="EmployeesGridView"
            DataSourceID="EmployeeDetailsSqlDataSource"
            AutoGenerateColumns="false"
            AllowSorting="true"
            DataKeyNames="EmployeeID"     
            Gridlines="Both"
            RunAt="server">

            <HeaderStyle backcolor="Navy"
              forecolor="White"/>

            <RowStyle backcolor="White"/>

            <AlternatingRowStyle backcolor="LightGray"/>

            <EditRowStyle backcolor="LightCyan"/>

            <Columns>                  
              <asp:BoundField DataField="EmployeeID" HeaderText="Employee ID" ReadOnly="true"/>                    
              <asp:BoundField DataField="FirstName"  HeaderText="First Name"/>
              <asp:BoundField DataField="LastName"   HeaderText="Last Name"/>                    
              <asp:BoundField DataField="Country"    HeaderText="Country"/>                    
            </Columns>                 
          </asp:GridView>
        </td>                
      </tr>            
    </table>

    <asp:SqlDataSource ID="CountrySqlDataSource" 
      SelectCommand="SELECT DISTINCT Country FROM Employees"
      EnableCaching="True"
      CacheDuration="60"
      ConnectionString="<%$ ConnectionStrings:NorthwindConnection %>"
      RunAt="server" />

    <asp:SqlDataSource ID="EmployeeDetailsSqlDataSource" 
      SelectCommand="SELECT EmployeeID, LastName, FirstName, Country FROM Employees"
      EnableCaching="True"
      CacheDuration="60"
      ConnectionString="<%$ ConnectionStrings:NorthwindConnection %>"
      FilterExpression="Country LIKE '{0}' AND LastName LIKE '{1}'"
      RunAt="server">

      <FilterParameters>
        <asp:ControlParameter ControlID="CountryListBox"   PropertyName="SelectedValue" />
        <asp:ControlParameter ControlID="LastNameTextBox" PropertyName="Text" />
      </FilterParameters>
    </asp:SqlDataSource>
  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:55:06.410

好吧，我不认为你可以渲染部分`GridView`数据，但我只是用一个`UpdatePanel`和一个`Timer`控件做了一个实验，它工作得很好，网格数据被更新了，因为我在服务器上分页，只是一小束数据从 SQL Server 检索。

好消息是当前页面索引和顺序在数据更新时被保留，因此看起来网格数据是否会部分更新

看一看：

## ASPX

```
 <asp:ScriptManager runat="server" />
    <asp:ObjectDataSource runat="server" ID="ods" TypeName="MyObject" EnablePaging="True"
        SelectMethod="FindPaging"
        MaximumRowsParameterName="pageSize"
        SortParameterName="sortColumn"
        StartRowIndexParameterName="startIndex"
        SelectCountMethod="FindPagingCount"
    >
        <SelectParameters>
            <asp:Parameter Name="sortColumn" Type="String" />
            <asp:Parameter Name="startIndex" Type="Int32" />
            <asp:Parameter Name="pageSize" Type="Int32" />
            <asp:ControlParameter Name="job" Type="String" ControlID="ddl" />
        </SelectParameters>
    </asp:ObjectDataSource>

    <asp:DropDownList AutoPostBack="true" runat="server" ID="ddl" DataTextField="job_desc" DataValueField="job_id">
    </asp:DropDownList>

    <asp:UpdatePanel runat="server">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="ddl" EventName="SelectedIndexChanged" />
        </Triggers>
        <ContentTemplate>
            <asp:GridView ID="grid" runat="server" AllowPaging="True" AllowSorting="True" PageSize="10"
                DataSourceID="ods" AutoGenerateColumns="true">
            </asp:GridView>
            <asp:Label runat="server" ID="lblMessage"></asp:Label>
            <asp:Timer Enabled="true" Interval="5000" runat="server" ID="timer" OnTick="timer_Tick"></asp:Timer>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

## 在后面的 ASPX 代码中

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!this.IsPostBack)
    {
        this.ddl.DataSource = new DataClassesDataContext().jobs;
        this.ddl.DataBind();
    }
}

protected void timer_Tick(object sender, EventArgs e)
{
    this.grid.DataBind();
} 
```

## 数据对象

```
public class MyObject
{
    public IEnumerable<employee> FindPaging(string job, int startIndex, int pageSize, string sortColumn)
    {
        var c = new DataClassesDataContext();
        var sort = string.Empty;

        if (string.IsNullOrWhiteSpace(sortColumn) || sortColumn == "sortColumn")
        {
            sort = "fname";
        }
        else
        {
            sort = sortColumn.Replace("sortColumn ", string.Empty);
            sort = sort.Replace(" DESC", string.Empty);
        }

        var q = c.employees.Where(x => x.job_id.ToString() == job).Skip(startIndex).Take(pageSize);

        if (!sortColumn.Contains("DESC"))
        {
            return q.OrderBy(sort);
        }
        else
        {
            return q.OrderByDescending(sort);
        }
    }

    public int FindPagingCount(string job, int startIndex, int pageSize, string sortColumn)
    {
        var c = new DataClassesDataContext();

        return c.employees.Where(x => x.job_id.ToString() == job).Count();
    }
} 
```

# excel - 通过合并 2 个工作表的 Excel 公式

> ID：11499593
> 
> 赞同：1
> 
> 时间：2012-07-16T07:09:29.673
> 
> 标签：excel, report

我需要帮助生成 excel 报告。你们中的任何人都可以帮助我吗？

我有2个excel文件。我试图将文件粘贴到问题中。

### 文件1：

```
Column A                    Column B        Column C
----------------------------------------------------
$www.example1.com/ab        200             abc 
```

### 文件 2：

```
URL                              Hits
-----------------------------------------
$www.something.com/dir/abc       1000
$www.example1.com/ab             100
$www.example2.com/cd             50
$www.example1.com/ab             100 
```

1.  包含 3 列 - colA (URLs), colB(Hits in Numerals), colC(some data)
2.  包含 2 列 - ColA (URLs), ColB(Hits in Numericals)

脚步：

1.  从 file1 获取 ColA(URLs) 并在 files2 的 ColA(URL) 中搜索。
2.  假设我们进行了 10 次搜索，我需要获取 file2 的所有 ColB(Hits) 的总和，并将其放入第一个结果的 file1 ColB 中。

任何类型的提示都会有所帮助。我尝试了很多选择，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T07:41:41.767

在以下条件下应该是可能的：

*   两个文件都打开
*   网址相同

然后使用类似于此示例的代码：

`=SUMIF([Name of file 2]NameOfSheet!$A$2:$C$6;A2;[Name of file 2]NameOfSheet!$B$2:$B$6)`

其中`$A$2:$C$6`是文件 2 中的数据范围，`A2`是文件 1 中具有值的单元格，是`$B$2:$B$6`文件 2 中要汇总的数据范围。

希望这可以帮助。

# desktop-application - 在 DesktopApp 中从 STS 获取声明（活动）

> ID：11499594
> 
> 赞同：3
> 
> 时间：2012-07-16T07:09:29.347
> 
> 标签：desktop-application, wif, claims

在理解如何在本地桌面应用程序中使用声明方面，我非常感谢一些帮助。这是场景：我想根据用户是否有类似“AnalysisAllowed:true”的声明来显示一个选项卡 fe。所以我想在应用程序启动时获取声明并稍后绑定它们。

所有示例都在讨论如何使 WCF 使用 Authorization- 和 AuthenticationManagers 对其他 WCF-Services 进行基于声明的调用，但我只想联系 sts（我该怎么做？WCF-Fed 绑定？）然后缓存使用它的东西。没有其他服务电话... :)

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:08:53.857

在默认配置（客户端和 STS）中，您获得的令牌将被加密（除了被签名）。如果您拥有整个事物（客户端和服务），那么您可以调整一些旋钮，以便可以从客户端“读取”令牌（因此，未加密）。

在这里，您有一些代码将为您提供来自 ADFS 的未加密 SAML 令牌（关键是要求“不记名”令牌并在没有加密证书的情况下配置 ADFS 依赖方）。

```
private static SecurityToken GetSamlToken(string realm, string stsEndpoint, ClientCredentials clientCredentials)
{
    using (var factory = new WSTrustChannelFactory(
        new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential), 
        new EndpointAddress(new Uri(stsEndpoint))))
    {
        factory.Credentials.UserName.UserName = clientCredentials.UserName.UserName;
        factory.Credentials.UserName.Password = clientCredentials.UserName.Password;
        factory.Credentials.ServiceCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.None;
        factory.TrustVersion = TrustVersion.WSTrust13;

        WSTrustChannel channel = null;

        try
        {
            var rst = new RequestSecurityToken
                          {
                              RequestType = WSTrust13Constants.RequestTypes.Issue, 
                              AppliesTo = new EndpointAddress(realm), 
                              KeyType = KeyTypes.Bearer, 
                          };

            channel = (WSTrustChannel)factory.CreateChannel();

            return channel.Issue(rst);
        }
        finally
        {
            if (channel != null)
            {
                channel.Abort();
            }

            factory.Abort();
        }
    } 
```

获得令牌后，您可以使用 LINQ to XML 或 WIF 从 SecurityToken 中获取 ClaimsIdentity。确保您在客户端与 STS 和服务之间使用 SSL。

第二种选择是依靠服务返回索赔清单。这是另一个请求，但您将在用户登录的同时执行此操作，然后缓存这些声明，直到令牌过期。

```
public IEnumerable<Claim> GetUserClaims() {
      // get Thread.CurrentPricinpal IClaimsIdentity and grab the claims
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T12:19:44.893

我不确定您使用的是什么 STS，但通常（例如，使用 AD FS 2.0），您将使用 WS-Trust 连接到 STS Web 服务。这是主动联合与被动联合。

[请查看此处](http://claimsid.codeplex.com/releases/view/68061)的实验室 4 ，了解如何执行此操作的一些示例。

# java - Spring中按文件实现的数据访问层

> ID：11499598
> 
> 赞同：0
> 
> 时间：2012-07-16T07:10:31.093
> 
> 标签：java, spring, data-access-layer, dao

`Data Access Layer`我为我的应用程序`CRUD`操作及其接口定义了一个。我想要临时保存/加载数据到/从文件中，但最后我将在关系数据库中定义适当的模型。`DAO`所以我写了一个临时定义层的文件实现。

我的问题是：

是否有诸如`JpaTemplate`用于文件`DAO`实现的包装器`Spring`？

（对不起，如果我使用了错误的术语或语法，我还在学习英语。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:39:47.470

不，据我所知，Spring 不支持基于表单文件的 DAO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:49:45.087

没有通用的基于文件的模板。

但是，根据您使用的特定格式，您可能会找到可以提供帮助的工具（即使它们不是模板）。例如，您可以将 JAXB 用于 XML，将 Jackson 用于 JSON。

# vb6 - 如何检查列表框是否被选中

> ID：11499604
> 
> 赞同：0
> 
> 时间：2012-07-16T07:10:45.277
> 
> 标签：vb6

如何检查列表框是否被选中

列表1

```
checkbox item

checkbox   Raja
checkbox   Raman
checkbox   Vijay 
```

从 list1 我想检查复选框是否被选中

如何在vb6中编写代码

需要 Vb6 代码帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T07:32:19.743

这是代码：

```
Private Sub Command1_Click()
    If List1.SelCount > 0 Then
        MsgBox "Some items are selected"
    Else
        MsgBox "Sorry,no items are selected !"
    End If
End Sub 
```

**编辑**

如果您想找出选定的项目，您可以这样做：

```
Private Sub Command2_Click()
    Dim i As Long

    For i = 0 To List1.ListCount - 1    'loop through the items in the ListBox
        If List1.Selected(i) = True Then    ' if the item is selected(checked)
            MsgBox List1.List(i)        ' display the item
        End If
    Next
End Sub 
```

# c# - 从winform创建类库项目

> ID：11499610
> 
> 赞同：0
> 
> 时间：2012-07-16T07:11:11.377
> 
> 标签：c#, dll, class-library, web-reference

我有一个使用网络参考的 winform 项目（来自不同的人，我没有构建它）。我想创建一个新项目——类库项目——基于winform项目（无GUI）。

我试图复制一些文件，但我无法复制这个网络参考，我的新项目中什至没有目录“网络参考”。当我单击所需的 Web 引用时，我会在属性“Url Behavior - Dynamic”和“Web reference”上看到 - 我的计算机中不存在的 url（但旧项目有效！）。

当我在文件资源管理器上进入网络参考目录时，我可以在那里看到文件但没有 dll，因此我无法将其添加到新项目中。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:48:01.337

1.  将项目选项从 Windows 应用程序更改为类库。
2.  编译它，你就得到了dll。
3.  创建一个新的 WinForms 项目并添加这个类库项目作为参考。（有时您可能需要将一些文件从类库移动到 WinForms 项目。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:17:54.730

右键单击`Project`，然后单击`Add Service Reference`。

> **添加 Web 引用**是旧式的、已弃用的 ASP.NET Web 服务。
> 
> **添加服务引用**是一种新的方法，添加一个 WCF 服务引用。

有关详细信息，请参阅此 MSDN 页面：[如何：添加、更新或删除服务参考](http://msdn.microsoft.com/en-us/library/cc668183.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:11:26.150

首先，Web References 不能直接使用 dll。Web 引用是对 Web 服务的引用，即通过 Web 界面公开其服务方法的服务。为了与 Web 服务通信，（通常）使用 http 协议，就像与常规网站一样。您可以在此处阅读有关 Web 服务的更多信息：http: [//gdp.globus.org/gt4-tutorial/multiplehtml/ch01s02.html](http://gdp.globus.org/gt4-tutorial/multiplehtml/ch01s02.html)

如何添加网页参考：

我假设您使用的是 Visual Studio - 我自己使用的是 Visual Studio 2010，所以如果您有旧/新版本，情况可能会略有不同。

右键单击您的项目并选择“添加服务引用”。在此对话框中，输入您要引用的 Web 服务的地址。按 Go，Visual Studio 应尝试连接到该服务，一段时间后该服务应显示在“服务”列表中。选择服务并按确定。

# php - 我的 php 下载代码有问题

> ID：11499615
> 
> 赞同：0
> 
> 时间：2012-07-16T07:11:14.667
> 
> 标签：php, download, adobe-reader

我正在制作一个网站，用户可以在其中上传、阅读和下载 pdf 文件。上传效果很好，他们可以在线阅读 pdf 文件，也可以使用 adobe reader 插件下载。但是我写的下载代码让我很难受。它下载文件，但文件未在 adobe 阅读器中打开。它给出错误“Adobe Reader 无法打开文件，因为它不是受支持的文件类型或文件已损坏”。

这是我的代码：

```
if(is_file($fullPath)) {
  $fsize = filesize($fullPath);
  $path_parts = pathinfo($fullPath);
  $ext = strtolower($path_parts['extension']);
  switch($ext) {
    case 'pdf':
      header('Content-type: application/pdf');
      header('Content-Disposition: attachment; filename="' . $fullPath. '"');
      break;
    default:
      header('Content-type: application/octet-stream');
  }
  header('Content-length: $fsize');
  header('Cache-control: private'); //use this to open files directly
  readfile($name);
}
exit; 
```

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:13:55.180

> `echo "<br>$fullPath<br>";`

这个，摆脱这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:15:35.227

> 不要`echo`在`header`发送内容之前。

删除它

```
echo "<br>$fullPath<br>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:49:41.733

正如其他人所说，如果没有指定其他内容，则在第一个输出处发送标头，因此您的 echo 将触发脚本发送 Web 服务器指定的内容类型的标准标头 - 可能是 html 或类似的东西。

此外，您的代码中还有其他不必要的东西，所以我建议这样：

```
if(is_file($fullPath)) {
  $path_parts = pathinfo($fullPath);
  $ext = strtolower($path_parts['extension']);
  switch($ext) {
    case 'pdf':
      header('Content-type: application/pdf');
      header('Content-Disposition: attachment; filename="' . $name . '"');
      break;
    default:
      header('Content-type: application/octet-stream');
      header('Content-length: ' . filesize($fullPath));
      header('Cache-control: private'); //use this to open files directly
  }
  readfile($fullPath);
}
exit; 
```

最大的区别是，初始检查只检查文件是否存在并且不打开文件。只需打开文件并将其直接写入输出缓冲区即可完成输出。我从默认情况下删除了部分`Content-Disposition`标题，因为默认情况下它会执行相同或更好的操作，并将 Content-lenght 和 Cache-control 移动到默认情况下，因为 pdf 下载不需要它们。另外，我将其更改为使用 filename 提供文件`$name`。`$name`我怀疑如果在给定范围之外定义它应该是相反的。

如果脚本失败，您可能只是使用了错误的 pdf 文件路径。尝试将此代码放在上面的代码之前

```
echo 'The file "' . $fullPath . '" ' . (is_file($fullPath) ? 'exists' : 'doesn\'t exist'); 
```

# php - Facebook FQL——非常慢

> ID：11499622
> 
> 赞同：5
> 
> 时间：2012-07-16T07:11:48.627
> 
> 标签：php, facebook, facebook-graph-api

```
$access_token = $facebook->getAccessToken();
$query = "SELECT uid FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1=me())";
$query = urlencode($query);
$fql_query_url = 'https://graph.facebook.com/'. 'fql?q='.$query. '&access_token=' .    $access_token;
$fql_query_result = file_get_contents($fql_query_url);
$fql_query_obj = json_decode($fql_query_result, true); 
```

这是查询。它让我工作得更快，因为我的朋友有限。但是一些应用程序用户说，如果他们有大约 2000 多个朋友，这对他们来说非常非常慢。他们说这也需要30秒到几分钟。

为什么它非常慢？这个请求有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T20:24:48.927

嗯，第一件事——只要你过滤用户`uid`并且只`uid`在之后选择——外部查询看起来是多余的。所以最终的查询可以简化为

```
SELECT uid2 FROM friend WHERE uid1=me() 
```

第二件事：使用 fb php sdk 来执行 FQL 查询会更方便一点，而不是`file_get_contents`像：

```
$facebook->api("/fql?q={$fql}"); 
```

（取自[https://stackoverflow.com/a/7827550/251311](https://stackoverflow.com/a/7827550/251311)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:17:42.387

它之所以更慢，仅仅是因为要收集更多数据。2000 多个朋友对于一个查询来说是相当多的......

可以在此处找到一些有用的信息 - [https://developers.facebook.com/live_status](https://developers.facebook.com/live_status)。

除了平台的实时状态（确实有用知道），还有两个图表显示平均 API 响应时间和 API 错误计数。如果您注意到请求极其缓慢，请转到该链接以查看这是否是系统范围的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:10:00.853

在我看来，FQL 很好，但应该在常规图形 API 无法满足您的要求时使用。在给定的情况下，如果唯一的要求是获取朋友的 ID，那么您可以简单地使用以下代码。

```
FB.api("me/friends?fields=id&limit=3000", function(resp){//process data}); 
```

# iphone - Core Data 同一类的两个实体

> ID：11499627
> 
> 赞同：0
> 
> 时间：2012-07-16T07:12:07.490
> 
> 标签：iphone, ios, core-data

我想要一个代表食物的`NSManagedObject`子类。`Food`现在我想要两个实体（或单独存储的列表），即`EatenFood`使用`FoodInTheFridge`核心数据。两个列表都包含相同的对象`Food`，但我想让它们分开并分开保存（所以`Food`可以在冰箱里吃）。

如何使用核心数据实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:43:26.597

Core Data 是一个可选的持久对象图，而不是数据库。所以答案是：你做这件事的方式和你处理对象的方式完全一样。您有一个带有两个派生实体（EatenFood 和 FoodInTheFridge）的基本实体（食物）。当您获取 Food 中的所有内容时，您会同时获得 EatenFood 和 FoodInTheFridge；当您查询特定实体时，您只会得到那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:48:58.663

我以不同的方式阅读了您的问题，这里有一些替代方法可以对此进行建模，以防它们更接近您想要的。

![在此处输入图像描述](../Images/6f7aae89a4acfb792557fd340c395661.png)

# iphone - UIScrollView 上的 scrollsToTop 不起作用

> ID：11499631
> 
> 赞同：1
> 
> 时间：2012-07-16T07:12:36.890
> 
> 标签：iphone, objective-c, ios, ipad

我已经在我的 YES 中设置了 scrollTopTop 属性，`UIScrollView`但是当我点击状态栏时它不起作用。为什么是这样？

我有一个`UIViewController`叫 A ，在 AI 里面有一个`UIViewController B`，里面有`UIScrollView`. 这是它不起作用的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-25T15:15:36.633

I had an app where scrollsToTop was working. Later on, I added a UICollectionView and scrollsToTop stopped working. After tracking down the offending revision I had to set UICollectionView.scrollsToTop = NO. I overlooked the fact that UICollectionView also inherits from UIScrollView.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T02:46:06.047

UIViewController B 应该添加到 UIViewController A 中。像这样，当您在 a 中添加 b.view 时，您应该添加以下代码：[self addChildViewController:b]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:33:45.023

确保一些事情：

*   滚动视图在前面。
*   添加/删除状态栏后，请确保它已重新启用。
*   只有一个滚动视图，因为其中许多会阻止它滚动到顶部。
*   确保前面的 B 视图和 A 视图一样。

抱歉，问题必须提供更多详细信息，以便我们提供帮助:)

# facebook - Facebook $facebook->getUser() 总是返回 0

> ID：11499632
> 
> 赞同：0
> 
> 时间：2012-07-16T07:12:46.670
> 
> 标签：facebook

我正面临一个基于 facebook 应用脚本的问题。它总是返回 0，即使用户登录到 facebook。我看了一下旧的讨论，但我找不到解决方案。请看一下代码。

```
<?php 
    require "config/database.class.php";
    require 'fbook/src/facebook.php';
    require "core/corefunction.php";

    $facebook = new Facebook(array(
        'appId'  => 'xxxxxxx',
   'secret' => 'xxxxxxxxx',
));

$user = $facebook->getUser();

   if ($user) {
 try {

  $user_profile = $facebook->api('/me');
 } catch (FacebookApiException $e) {
error_log($e);
$user = null;
 }  
   }
          if ($user) {
echo "Yes";exit;
}
else{

$urlf= $facebook->getLoginUrl(array('scope' => 'user_status,publish_stream'));
?>
<script language="javascript" type="text/javascript">
                document.location.href="<?php echo $urlf; ?>";
</script>
<?php
exit; 
```

} ?>

在验证 facebook 后，我得到一个这样的 url，

```
http://www.example.com/fblog.php?state=91e3e7013fcfeb01df23eed352add987&code=AQAyitCNGSqtCEwMueFi5RvFILI0YC2P4IFdaY0TFK7_ay5vSU1RZh1Ab56DS6aUokQj9VS6RCoYTKmFa0H0AbUFsZBWZTLlFvWqVoOMpwZQcTeCoHcZ1o3NE2VljyoXgfJERreb2ZvL1MhwZ2rKSaInk9SMiyiaNrRXU86fkiL6GBbhrM1aCfuWPq7jqwqG_IM#_=_ 
```

它被连续调用...

# sql-server - 将 SQL Server CE 数据移入 SQL Server 进行编辑和返回

> ID：11499634
> 
> 赞同：0
> 
> 时间：2012-07-16T07:12:47.680
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-ce

想知道将 SQL Server CE 数据库移动到 SQL Server 中并在某些过程之后将其返回或将其导出为新的紧凑型本地数据库的最快、高效和最简单的方法。

您经历并建议过哪些经过验证的程序？

*   **版本：** SQL Server CE 3.5
*   **版本：** SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:56:44.213

你试过复制吗？在这里你可以找到一篇关于同步 2008r2 和 CE 的几乎完整的文章：http: [//msdn.microsoft.com/en-US/library/ff928494.aspx](http://msdn.microsoft.com/en-US/library/ff928494.aspx)

# vb6 - 在 vb6 中限制列表框中的选择

> ID：11499635
> 
> 赞同：3
> 
> 时间：2012-07-16T07:13:00.623
> 
> 标签：vb6, listbox, multiple-select

如何限制**VB6中****ListBox**的选择？ 我想要什么：***用户可以从 ListBox 中选择最多 8 个项目。***

 ***我正在使用这段代码：

```
Private Sub lstBox1_Click()
     If lstBox1.SelCount > 8 Then
        MsgBox "Maximum 8 items can be selected."             
       'I want here return false
     End if
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T07:24:27.290

这是答案：

```
lstBox1.Selected(lstBox1.ListIndex) = False 
```

例子：

```
Private Sub lstBox1_Click()
     If lstBox1.SelCount > 8 Then
        MsgBox "Maximum 8 items can be selected."             
       'I want here return false
        lstBox1.Selected(lstBox1.ListIndex) = False
     End if
End Sub 
```***

# android - 那么如何查看 Jelly Bean 中的日志呢？

> ID：11499636
> 
> 赞同：5
> 
> 时间：2012-07-16T07:13:04.307
> 
> 标签：android, logging, android-4.2-jelly-bean

我曾经使用一个名为 Log Collector 的应用程序来查看系统日志。它会将它们发送到我的电子邮件或通过蓝牙，

但是，在 Jelly Bean 上，应用程序的“读取日志”权限不再存在，应用程序无法读取日志，Log Collector 显然也不例外。

那么现在是否需要 root 设备才能查看系统日志？必须有一种方法让用户阅读它们。我不需要从应用程序访问它们，我需要以人类的身份阅读它们。有办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-19T20:43:52.153

我在这个谷歌群组线程中得到了答案： [https ://groups.google.com/forum/?fromgroups#!searchin/android-developers/READ_LOGS/android-developers/6U4A5irWang/8xOi74KfRIYJ](https://groups.google.com/forum/?fromgroups#!searchin/android-developers/READ_LOGS/android-developers/6U4A5irWang/8xOi74KfRIYJ)

Mark Murphy 回复 Matteo Sisti Sette（就是我）的消息。

（似乎无法链接到特定消息，是吗？）

**POWER + VOLUME_UP + VOLUME_DOWN**将生成报告和屏幕截图，您可以通过电子邮件发送或上传到云端硬盘（可笑的是，您不能以任意方式共享它，例如通过蓝牙发送或作为文本文件打开，但无论如何）。

（似乎你必须按住它们一段时间，当你*释放*它们时就会启动动作）

起初我以为他在取笑我，那只会重新启动或其他什么，但后来我尝试了，它奏效了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-31T18:15:37.020

*来自 Google+ 的引述和致 +Ian Clifton 的致谢：*

“如果您进入运行**4.2的设备的****开发人员选项**，您可以选中该框以**将错误报告选项添加到电源菜单**。这也将其添加到快速通知菜单（不确定正确的名称，但向下滑动用两根手指在手机或平板电脑右侧的通知栏）。﻿“

 *****..那将是正确的答案..* *干杯*****

# php - 调用 jquery 函数 wordpress

> ID：11499638
> 
> 赞同：0
> 
> 时间：2012-07-16T07:13:17.833
> 
> 标签：php, jquery, wordpress

下面的代码是jquery函数

```
$(document).ready(function () {
   $('#access').accordion({
      create: function (event, ui) {
          $('div#access> div').each(function () {
              var id = $(this).attr('id');
            $(this).load(id+'.html', function () {
                $('#access').accordion('resize');
            });
        });
    }
});
}); 
```

其中**access**是我用于标题中菜单项的 div id。

下面的代码是 header.php 页面代码

```
<div id="access" >
    <ul>        
        <?php wp_list_pages('depth=1&title_li=');?>
    </ul>
</div> 
```

我想要的是菜单项的onclick应该调用javascript函数..

如何从php文件中调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:59:04.767

您不会从 PHP 调用 JavaScript 函数。PHP 仅使您能够动态构建 HTML 页面。一旦页面准备就绪，就会调用 JavaScript 并开始将事件绑定到适当的元素。

您需要做的是使用“查看源代码”或萤火虫查看生成的代码并探索生成的 HTML 的结构，然后您可以将事件绑定到请求的元素。

# python - 用 python 模拟 CLI Shell

> ID：11499646
> 
> 赞同：2
> 
> 时间：2012-07-16T07:13:50.523
> 
> 标签：python, command-line-interface

我被要求用 Python 模拟 CLI。

这就是我所做的

```
def somefunction(a,b):
    //codes here
//consider some other functions too

print "--- StackOverFlow Shell ---"
while True:
    user_input = raw_input("#> ")
    splitit = user_input.split(" ")
    if splitit[0] == "add":
        firstNum = splitit[1]
        sNum = splitit[2]
        result = somefunction(firstNum, sNum)
        print result
    //consider some other elif blocks with "sub", "div", etc
    else:
        print "Invalid Command" 
```

我还检查了列表的长度，这里“拆分”我将只允许 3 个参数，第一个是操作，第二个和第三个是要执行某些函数的参数，以防参数超过3，为此我做了检查。

虽然不知何故我设法让它工作，但有没有更好的方法来实现同样的目标？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T07:16:48.080

使用 python`CMD`模块：

检查以下页面上给出的几个示例

[http://docs.python.org/library/cmd.html](http://docs.python.org/library/cmd.html) # 支持面向行的命令解释器

[http://www.doughellmann.com/PyMOTW/cmd](http://www.doughellmann.com/PyMOTW/cmd) - # 创建面向行的​​命令处理器

`prompt`可以设置为每次要求用户输入新命令时要打印的字符串。

`intro`是程序开始时打印的“欢迎”消息。

例如：

```
import cmd

class HelloWorld(cmd.Cmd):
    """Simple command processor example."""

    prompt = 'prompt: '
    intro = "Simple command processor example." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:01:58.780

您应该查看 VTE 库：

[http://earobinson.wordpress.com/2007/09/10/python-vteterminal-example/](http://earobinson.wordpress.com/2007/09/10/python-vteterminal-example/)

它工作得非常好，你可以很容易地自定义它的外观。这是多么容易：

```
 # make terminal
    terminal = vte.Terminal()
    terminal.connect ("child-exited", lambda term: gtk.main_quit())
    terminal.fork_command()

    # put the terminal in a scrollable window
    terminal_window = gtk.ScrolledWindow()
    terminal_window.set_policy(gtk.POLICY_AUTOMATIC, gtk.POLICY_AUTOMATIC)
    terminal_window.add(terminal) 
```

# oracle - Oracle 过程参数定义为 .NUMBER，是否可以将其作为 .INTEGER 传递

> ID：11499651
> 
> 赞同：0
> 
> 时间：2012-07-16T07:14:03.830
> 
> 标签：oracle, jdbc

我在 oracle 中有两个过程，它们以不同的方式定义参数，即使基础数据是相同的。在代码中，我们将其表示为整数。

```
procedure GetByNum(..., vRegionID in number, ...)
procedure GetByInt(...., vRegionID in integer, ...) 
```

在 java 中，我们总是将字段定义为整数（在 db 中也是如此）

```
public Integer getRegionID() {
    return 100;
} 
```

有没有办法将这个（在java中）传递`integer`给使用相同的两个程序`OracleTypes.*`？我们使用自定义的基本包装器`org.springframework.jdbc.object.StoredProcedure`来调用它们。目前不允许修改存储过程，所以剩下的就是修复java。

1.  你能通过proc`getRegionID`吗？`OracleTypes.NUMBER``getByInt`
2.  你能把它传递`OracleTypes.INTEGER`给`getByNum`哪个期望`in number`吗？
3.  另一种神奇的方式？

这可能看起来很简单，但我认为我不允许像这样破坏参数。我希望那不是真的！

*编辑：*

*   用于传递`OracleTypes.INTEGER`给`procedure ... (param in number)`工作
*   不知道这是否只是特定于环境的

希望有一个明确的答案，这样我就可以让他们开始使用新的包装器，而不必担心无法预料的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:27:51.617

`INTEGER`是 ANSI 标准类型，[Oracle 将其描述](http://docs.oracle.com/cd/B28359_01/server.111/b28286/sql_elements001.htm#sthref83)`NUMBER`为as的子类型`NUMBER(38)`。因此，只要没有小数部分，任何将 a`INTEGER`作为参数的地方也应该接受 a 。`NUMBER`

# objective-c - Objective-C：触摸绘制不透明度

> ID：11499652
> 
> 赞同：1
> 
> 时间：2012-07-16T07:14:05.040
> 
> 标签：objective-c, ios, core-graphics

我正在尝试制作一个可以控制画笔不透明度的绘图应用程序，但是当我尝试降低不透明度时，结果是这样的。我使用了核心图形。（检查图像）。

![在此处输入图像描述](../Images/758d63f77e85bf8ba79c962d0f236c5c.png)

我将如何解决这个问题？

这是我的一些代码。

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event//upon touches
{
    UITouch *touch = [touches anyObject];

    previousPoint1 = [touch locationInView:self.view];
    previousPoint2 = [touch locationInView:self.view];
    currentTouch = [touch locationInView:self.view];
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event//upon moving
{
    UITouch *touch = [touches anyObject];

    previousPoint2 = previousPoint1;
    previousPoint1 = currentTouch;
    currentTouch = [touch locationInView:self.view];

    CGPoint mid1 = midPoint(previousPoint2, previousPoint1); 
    CGPoint mid2 = midPoint(currentTouch, previousPoint1);

    UIGraphicsBeginImageContext(CGSizeMake(1024, 768));
    [imgDraw.image drawInRect:CGRectMake(0, 0, 1024, 768)];
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineCap(context,kCGLineCapRound);
    CGContextSetLineWidth(context, slider.value);
    CGContextSetBlendMode(context, blendMode);
    CGContextSetRGBStrokeColor(context,red, green, blue, 0.5);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, mid1.x, mid1.y);
    CGContextAddQuadCurveToPoint(context, previousPoint1.x, previousPoint1.y, mid2.x, mid2.y);
    CGContextStrokePath(context);

    imgDraw.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsGetCurrentContext();
    endingPoint=currentTouch;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:30:41.913

`touchesMoved`我建议您不要每次都重新保存图像，而不是每次都更新图像，而是将每个图像添加`touchesMoved`到数据点数组中。然后，在您的绘图例程中（正如 NSResponder 建议的那样）拉出原始图像，然后重新绘制由您的点数组映射出的整个路径。如果您想在某个时候更新您的图像，请在 上进行`touchesEnded`，但不是每次都在`touchesMoved`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:27:56.860

不要在`-touchesMoved:withEvent:`. 在任何事件方法中，您都应该更新需要绘制的内容，然后发送 -`setNeedsDisplay.`

正如上面编写的代码一样，您正在从事件消息中获得的每对位置之间创建一条路径。

您应该在 中创建一个路径`-touchesBegan:withEvent:`，并在 中添加它`-touchesMoved:withEvent:`。

# java - 如何删除句子中的某些单词Java？

> ID：11499656
> 
> 赞同：3
> 
> 时间：2012-07-16T07:14:23.350
> 
> 标签：java, string

假设字符串是：

`The/at Fulton/np-tl County/nn-tl Grand/jj-tl`

如何删除字符后`/`和输出如下 `The Fulton County Grand`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T07:16:14.163

看起来一个简单的基于正则表达式的替换在这里可以正常工作：

```
text = text.replaceAll("/\\S*", ""); 
```

这里的`\\S*`意思是“0个或多个非空白字符”。当然，您也可以使用其他选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T07:16:23.870

```
String input = "The/at Fulton/np-tl County/nn-tl Grand/jj-tl";
String clean = input.replaceAll("/.*?(?= |$)", ""); 
```

这是一个测试：

```
public static void main( String[] args ) {
    String input = "The/at Fulton/np-tl County/nn-tl Grand/jj-tl";
    String clean = input.replaceAll("/.*?(?= |$)", "");
    System.out.println( clean);
} 
```

输出：

```
The Fulton County Grand 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T07:15:51.853

```
String text = "The/at Fulton/np-tl County/nn-tl Grand/jj-tl";
String newText = text.replaceAll("/.*?\\S*", ""); 
```

来自 Java API：

```
String  replace(char oldChar, char newChar)
Returns a new string resulting from replacing all occurrences of oldChar in this string with newChar.

String  replace(CharSequence target, CharSequence replacement)
Replaces each substring of this string that matches the literal target sequence with the specified literal replacement sequence.

String  replaceAll(String regex, String replacement)
Replaces each substring of this string that matches the given regular expression with the given replacement.

String  replaceFirst(String regex, String replacement)
Replaces the first substring of this string that matches the given regular expression with the given replacement. 
```

如果您需要替换子字符串或字符，请使用 1st 2 方法。如果您需要替换模式或正则表达式，请使用 2nd 2 方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T07:17:26.940

执行以下操作：

**startchar**：是要替换的起始字符。

**endchar** ：是一个结束字符，直到您要替换的 chich 字符。

**" "** : 是因为你只想删除它所以用空格替换

```
string.replaceAll(startchar+".*"+endchar, "") 
```

参考[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

另见[贪婪量词示例](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)

见工作示例

```
 public static void main( String[] args ) {
        String startchar ="/";
        String endchar="?(\\s|$)";
    String input = "The/at Fulton/np-tl County/nn-tl Grand/jj-tl";
    String clean = input.replaceAll(startchar+".*"+endchar, " ");
    System.out.println( clean);
} 
```

输出

```
The Fulton County Grand 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T07:21:24.647

这对我有用：

```
String text = "The/at Fulton/np-tl County/nn-tl Grand/jj-tl";
String newText = text.replaceAll("/.*?(\\s|$)", " ").trim(); 
```

产量：

> 富尔顿县大酒店

这基本上替换了 a 之后的任何字符，`/`并且后跟空格或字符串末尾。最后`trim()`是为了迎合该方法添加的额外空白`replaceAll`。

# zend-framework - 如何在zend php中验证utf8字符集中的特殊字符

> ID：11499662
> 
> 赞同：0
> 
> 时间：2012-07-16T07:14:42.193
> 
> 标签：zend-framework, utf-8, validation

我正在使用多语言字符，使用 utf8 编码。现在我需要验证它并在输入时避免使用特殊字符。有没有办法在使用多语言字符输入时识别特殊字符？我的意思是我们可以在使用英语时验证特殊字符，如!@%%^&..。我正在寻找相同类型的验证。

任何人请帮助我...

我正在使用zend php。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:18:13.883

使用[`Zend_Validate_Alnum`](http://framework.zend.com/manual/en/zend.validate.set.html#zend.validate.set.alnum)验证器，它已准备好 Unicode。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:20:36.560

分别只有一个“!”、“@”、“%”、“^”和“&”字符。没有“英语！” 和一个“西班牙语！” 和一个“印度人！” 和一个“韩国人！”。他们都是同一个角色。如果它们以 UTF-8 编码，它们甚至与 ASCII 编码字符的字节相同。您可以像以前一样查找并替换它们。

可能有一些*看起来相似*的字符，例如“！”（全角感叹号），但这与“！”不是同一个字符 因此如果“！”没有特殊含义 有特殊的意义。

# linux - 多用户共享时 Linux 上的 Eclipse 行为

> ID：11499663
> 
> 赞同：2
> 
> 时间：2012-07-16T07:14:48.830
> 
> 标签：linux, eclipse, permissions, eclipse-plugin, eclipse-juno

我们正在尝试在共享环境中设置 Eclipse，即，它将安装在 Linux 服务器上，并且每个用户使用远程 X 连接到它。共享 Eclipse 有不同的原因，一个是与 ClearCase 的正确集成。

我们的管理员已经使用一些默认插件设置了 eclipse，每个用户都通过远程 X 访问 eclipse。现在，我想安装一个新插件，以便每个人都可以使用它。安装插件后，只有我可以访问，其他人无法使用。但是，管理员安装的插件可供所有人使用。

查看时，我安装的插件和管理员安装的插件位于不同的位置：

我安装的插件：

> /home/ernesto/.eclipse/org.eclipse.platform_4.2.0_53742576/plugins/

/home/ernesto/ 是我的主目录。

管理员安装的插件：

> /项目/eclipse/插件/

其中/project/eclipse是eclipse安装目录

是因为权限吗？这种行为是否记录在某处？

我使用的是 eclipse juno 4.2，它是 SuSE Linux 服务器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:09:21.660

你说的对。这是由于权限限制。

[您可以从Eclipse 的文档](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/multi_user_installs.html)中找到详细信息。

**注意：**在这个场景中存在很多已知的[缺陷。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=358471)

# cxf - 为 Kerberos 和模拟配置 Tomcat

> ID：11499671
> 
> 赞同：0
> 
> 时间：2012-07-16T07:15:14.557
> 
> 标签：cxf, tomcat7, windows-authentication, kerberos, spnego

我想将 Tomcat 配置为能够连接到 AD 并相应地对用户进行身份验证。

此外，我还想使用客户端凭据调用一些 Web 服务（在本例中为 Share Point）。

到目前为止，我已经成功地将 Tomcat 配置为使用 SPNEGO 身份验证，如[http://tomcat.apache.org/tomcat-7.0-doc/windows-auth-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/windows-auth-howto.html)上的教程中所述。请注意，我使用了 Tomcat 的 SPNEGO 身份验证（不是 Source Forge 或 Waffle）。

我没有使用 Source Forge 的实现，因为我想保持简单并使用开箱即用的 Tomcat。此外，我希望所有的身份验证和授权都由 Tomcat 处理，使用 SPNEGO 作为身份验证方法，`WEB.XML`并使用 Tomcat 的 JNDI 领域进行授权。

我也没有使用过 WAFFLE，因为这只是 Windows。

我使用 CXF 作为我的 Web 服务堆栈。根据[http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includeSSLsupport%29-SpnegoAuthentication%28Kerberos%29](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includingSSLsupport%29-SpnegoAuthentication%28Kerberos%29)上的 CXF 文档，您需要做的就是使用 Web 服务（在我的情况下为 Share Point）进行身份验证将使用：

```
 <conduit name="{http://example.com/}HelloWorldServicePort.http-conduit"
   xmlns="http://cxf.apache.org/transports/http/configuration">
   <authorization>
      <AuthorizationType>Negotiate</AuthorizationType>
      <Authorization>CXFClient</Authorization>
   </authorization>
 </conduit> 
```

并在 jaas.conf 中配置 CXFClient （在我的例子中，Tomcat 的服务器 JAAS 配置所在的位置，这样我`jass.conf`看起来像：

```
CXFClient {
    com.sun.security.auth.module.Krb5LoginModule required client=true useTicketCache=true debug=true;
};

com.sun.security.jgss.krb5.initiate {
    com.sun.security.auth.module.Krb5LoginModule required
    doNotPrompt=true
    principal="HTTP/tomcatsrv.corporate.intra@CORPORATE.INTRA"
    useKeyTab=true
    keyTab="C:/Program Files/Apache/apache-tomcat-7.0.27/conf/tomcatsrv.keytab"
    storeKey=true
    debug=true;
};

com.sun.security.jgss.krb5.accept {
    com.sun.security.auth.module.Krb5LoginModule required
    doNotPrompt=true
    principal="HTTP/tomcatsrv.corporate.intra@CORPORATE.INTRA"
    useKeyTab=true
    keyTab="C:/Program Files/Apache/apache-tomcat-7.0.27/conf/tomcatsrv.keytab"
    storeKey=true
    debug=true;
}; 
```

然而，当我调用 Web 服务时，它是在服务用户名（即在 AD 和 in 中配置的 Tomcat 的用户名）下调用的`tomcatsrv.keytab`，而不是客户端的用户名（例如 duncan.attard）。

所以我的问题是：是否有某种方式可以将客户端的用户名委托（或使用某种模拟）给 CXF，这样当我调用 Share Point 的 Web 服务时（例如，我想使用 Copy.asmx 上传文件） , 文件上传为`duncan.attard`而不是`tomcat.srv`.

谢谢大家，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T21:17:53.137

从技术上讲，这非常有效。这是食谱：

1.  如果您使用凭证委派，则不需要登录模块名称。
2.  您必须确保用户帐户有资格进行委派。

看一下 Tomcat 的实现，[`GenericPrincipal`](http://svn.apache.org/viewvc/tomcat/tc7.0.x/tags/TOMCAT_7_0_29/java/org/apache/catalina/realm/GenericPrincipal.java?view=markup#l199)如果有 GSS 凭证，它将为您保存。投射`request.getPrincipal`并`GenericPrincipal`获得证书。

现在说你有凭证：

1.  [`Subject`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/security/auth/Subject.html)用 the`Principal`和 the`GSSCredential`作为私有凭证构造 a 。
2.  将 CXF 代码包装成[`PrivilegedAction`](http://docs.oracle.com/javase/1.5.0/docs/api/java/security/PrivilegedAction.html).
3.  将构造的主题和特权操作的实例传递给`Subject.doAs`方法，系统将`AccessControlContext`代表传递的主题构造一个，并代表该上下文调用 JAAS 中的所有内容。**如果**正确实施，CXF 应该使用这些。这就像`su`或`sudo`在 Unix 上。

最简单的测试方法是`InitialDirContext`代表客户端在您的 Active Directory 中创建一个特权操作。这就是我测试有效的凭证委派环境的方式。

# java - 为什么单个 Ajax 调用工作正常，但连续 Ajax 调用失败？

> ID：11499672
> 
> 赞同：8
> 
> 时间：2012-07-16T07:15:19.407
> 
> 标签：java, ajax, jquery, jsonp

**设置：**

我有一个数据表，它的每一行都是可点击的。单击一行时，会进行一个 ajax 调用，该调用会返回一些数据。有时，ajax 调用需要一些时间，具体取决于返回的数据量。一切正常。

**问题：**

当快速单击行时会出现问题，一个接一个。简而言之，在之前的 ajax 调用返回之前，如果单击该行（即进行了新的 ajax 调用），我会收到错误消息。

```
Uncaught TypeError: Property 'callback' of object [object Window] is not a function 
```

（ajax 调用返回一个 JSONP 数据）

看起来 ajax 调用以某种方式混合在一起（？），但我不确定这一点。谁能告诉我为什么会这样？

如果需要更多信息来澄清问题，请告诉我。

谢谢

**编辑1：**

这是一些ajax代码：

```
 $.ajax({
                type: "GET",
                url: 'http://' + myserver + ':8080/someurl/' + my_param,
                contentType: "application/json",
                dataType: "jsonp",
                jsonpCallback: 'callback',
                success: function(data) {
                // Inside here, I am doing some Datatables stuff.
                var myTable = $('#my_table').dataTable( {
                        "bJQueryUI" : true,
                        "bSort" : false,
                        "bFilter" : false,
                        "bPaginate": true,
                        "bProcessing": true,
                        "bScrollCollapse": true,
                        "bInfo": false,
                        "bDestroy": true,
                        "aaData": samples,
                        "sEmptyTable": "No sample listings avaiable",
                        "iDisplayLength": number,
                        "bLengthChange": false,
                        "bAutoWidth": false,
                        .
                        .
                        .
                    } 
```

**编辑2：**

这是分配`callback`其名称的类。如果默认回调为空，则它分配一个默认值“回调”。但看起来默认回调总是为空，因此它总是分配“回调”。

```
public class MappingJacksonJsonpConverter extends MappingJacksonHttpMessageConverter {

    @Override
    protected void writeInternal(Object object, HttpOutputMessage outputMessage) throws IOException,
            HttpMessageNotWritableException {

        JsonEncoding encoding = getJsonEncoding(outputMessage.getHeaders().getContentType());
        JsonGenerator jsonGenerator = this.getObjectMapper()
                .getJsonFactory()
                .createJsonGenerator(outputMessage.getBody(), encoding);
        try {
            String jsonPadding = "callback";
            if (object instanceof JsonObject) {
                String jsonCallback = ((JsonObject) object).getJsonCallback();
                if (jsonCallback != null) {
                    jsonPadding = jsonCallback;
                }
            }
            jsonGenerator.writeRaw(jsonPadding);
            jsonGenerator.writeRaw("(");
            this.getObjectMapper().writeValue(jsonGenerator, object);
            jsonGenerator.writeRaw(")");
            jsonGenerator.flush();
        } catch (JsonProcessingException ex) {
            throw new HttpMessageNotWritableException("Could not write JSON: " + ex.getMessage(), ex);
        }
    }
} 
```

上面的类被引用`mvc-servlet.xml`如下：

```
 <mvc:message-converters>
        <bean
            class="citygrid.feedmanager.web.converter.MappingJacksonJsonpConverter">
            <property name="supportedMediaTypes">
                <list>
                    <value>application/x-javascript</value>
                </list>
            </property>
        </bean>
    </mvc:message-converters> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T07:38:31.347

问题在于 jQuery 如何处理带有 JSONP 的回调。这是想法：

1.  JSONP 被触发；
2.  回调已设置；
3.  JSONP 返回；
4.  回调被触发；
5.  回调被删除；

现在，如果您不定义自定义，一切正常`jsonpCallback`（默认情况下，jQuery 为每个 JSONP 请求分配唯一的回调）。现在如果你这样做并且同时触发两个 JSONP 请求会发生什么？

1.  JSONP1 被触发；
2.  设置了名称回调`callback`。
3.  JSONP2 被触发；
4.  回调`callback`被 JSONP2 覆盖；
5.  JSONP1 返回；
6.  `callback`为 JSONP1 触发回调；
7.  JSONP1 删除`callback`；
8.  JSONP2 返回；
9.  JSONP2 尝试触发`callback`，但已被删除；
10.  抛出类型错误。

简单的解决方案是不要覆盖`jsonpCallback`选项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T07:34:48.230

正如 Alex Ball 建议的那样，您需要将 AJAX 请求放入队列中，以便一一执行。它非常简单，如[stackoverflow 中的一篇文章](https://stackoverflow.com/a/3035268/778687)所示（是的，它也适用于 JSON-P）。

第二件事是错误消息只是`Property 'callback' of object [object Window] is not a function`因为您没有*名为*`callback`. 只需将其定义为：

```
window.callback= function(responseText) {
    //alert(responseText);
}; 
```

希望这可以帮助。

# python - 为什么 PyQt4 插槽多次收到一个信号

> ID：11499677
> 
> 赞同：0
> 
> 时间：2012-07-16T07:15:52.637
> 
> 标签：python, multithreading, pyqt4

我使用 pyuic4 创建 GUI 并创建一个线程，当该线程完成后，它将结果附加到 textbrowser。问题是：当我在“HOST or URL”中输入一些文本时，单击“Do check”按钮，它会打印出“this is text”一次。但是，当我从 URL 更改文本时，再次按下该按钮，它会打印两次，并且以后每次都会增加。日志说信号只发出一次，但槽函数被调用了很多次。我不知道我错过了什么。任何人都可以提出解决方案吗？感谢您提供任何帮助

这是我的 main.py

```
import logging
from PyQt4 import QtGui, QtCore
from PyQt4.QtGui import QMessageBox
from form1 import *

logging.basicConfig(filename="netchecker.log", filemode='w',\
        format='%(asctime)s %(levelname)s %(message)s',
        level=logging.DEBUG)

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class PingThread(QtCore.QThread):
    def run(self):
        logging.debug("*****Done pingThread")
        all_res = "this is text"
        self.emit(QtCore.SIGNAL("Data"), all_res)

class MyApp(Ui_MainWindow):
    def __init__(self, app):
        logging.info("Init MyAPP")
        self.app = app
        self.pingThread = PingThread()

    def setupUi(self, *args):
        super(MyApp, self).setupUi(*args)
        logging.info("setupUi")
        QtCore.QObject.connect(self.pushButton, QtCore.SIGNAL(_fromUtf8("clicked()")), self.doCheck)

    def append_to_text_browser(self, newtext):
        """This method is callback for some thread run separated
        from main thread"""
        logging.debug("Inside append_to_text_browser")
        self.textBrowser.append(newtext)
        self.app.processEvents()

    def onNewUrl(self):
        font = QtGui.QFont()
        self.pushButton.setFont(font)
        del font
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Do new check", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setEnabled(True)
        self.app.processEvents()

    def doCheck(self):
        logging.info("doCheck beginning")
        self.textBrowser.clear()
        QtCore.QObject.connect(self.pingThread, \
                QtCore.SIGNAL("Data"), \
                self.append_to_text_browser)
        logging.info("Called pingThread")
        self.pingThread.start()

if __name__ == "__main__":

    import sys
    app = QtGui.QApplication(sys.argv)
    MainWindow = QtGui.QMainWindow()
    MainWindow.setWindowIcon(QtGui.QIcon('zChecker.png'))
    ui = MyApp(app)

    ui.setupUi(MainWindow)
    MainWindow.show()
    sys.exit(app.exec_()) 
```

以及pyuic4 form1.py转换的文件：

```
# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'test.ui'
#
# Created: Thu Jul 12 17:21:45 2012
#      by: PyQt4 UI code generator 4.9.1
#
# WARNING! All changes made in this file will be lost!

from PyQt4 import QtCore, QtGui

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_MainWindow(object):
    def setupUi(self, MainWindow):
        MainWindow.setObjectName(_fromUtf8("MainWindow"))
        MainWindow.setEnabled(True)
        MainWindow.resize(679, 713)
        font = QtGui.QFont()
        font.setKerning(True)
        MainWindow.setFont(font)
        self.centralwidget = QtGui.QWidget(MainWindow)
        self.centralwidget.setObjectName(_fromUtf8("centralwidget"))
        self.lineEdit = QtGui.QLineEdit(self.centralwidget)
        self.lineEdit.setGeometry(QtCore.QRect(100, 10, 561, 27))
        self.lineEdit.setObjectName(_fromUtf8("lineEdit"))
        self.label = QtGui.QLabel(self.centralwidget)
        self.label.setGeometry(QtCore.QRect(10, 10, 81, 31))
        self.label.setObjectName(_fromUtf8("label"))
        self.checkBox_1 = QtGui.QCheckBox(self.centralwidget)
        self.checkBox_1.setGeometry(QtCore.QRect(70, 50, 121, 22))
        self.checkBox_1.setChecked(True)
        self.checkBox_1.setObjectName(_fromUtf8("checkBox_1"))
        self.checkBox_2 = QtGui.QCheckBox(self.centralwidget)
        self.checkBox_2.setGeometry(QtCore.QRect(70, 80, 161, 22))
        self.checkBox_2.setChecked(True)
        self.checkBox_2.setObjectName(_fromUtf8("checkBox_2"))
        self.pushButton = QtGui.QPushButton(self.centralwidget)
        self.pushButton.setEnabled(True)
        self.pushButton.setGeometry(QtCore.QRect(510, 60, 98, 27))
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        font.setKerning(True)
        self.pushButton.setFont(font)
        self.pushButton.setObjectName(_fromUtf8("pushButton"))
        self.textBrowser = QtGui.QTextBrowser(self.centralwidget)
        self.textBrowser.setGeometry(QtCore.QRect(20, 110, 641, 521))
        self.textBrowser.viewport().setProperty("cursor", QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.textBrowser.setObjectName(_fromUtf8("textBrowser"))
        self.pushButton_2 = QtGui.QPushButton(self.centralwidget)
        self.pushButton_2.setEnabled(False)
        self.pushButton_2.setGeometry(QtCore.QRect(310, 630, 111, 31))
        self.pushButton_2.setObjectName(_fromUtf8("pushButton_2"))
        self.checkbox_vital = QtGui.QCheckBox(self.centralwidget)
        self.checkbox_vital.setEnabled(True)
        self.checkbox_vital.setGeometry(QtCore.QRect(260, 50, 181, 22))
        self.checkbox_vital.setToolTip(_fromUtf8(""))
        self.checkbox_vital.setStatusTip(_fromUtf8(""))
        self.checkbox_vital.setObjectName(_fromUtf8("checkbox_vital"))
        self.checkbox_full = QtGui.QCheckBox(self.centralwidget)
        self.checkbox_full.setEnabled(False)
        self.checkbox_full.setGeometry(QtCore.QRect(260, 80, 141, 22))
        self.checkbox_full.setToolTip(_fromUtf8(""))
        self.checkbox_full.setObjectName(_fromUtf8("checkbox_full"))
        MainWindow.setCentralWidget(self.centralwidget)
        self.menubar = QtGui.QMenuBar(MainWindow)
        self.menubar.setGeometry(QtCore.QRect(0, 0, 679, 27))
        self.menubar.setObjectName(_fromUtf8("menubar"))
        MainWindow.setMenuBar(self.menubar)
        self.statusbar = QtGui.QStatusBar(MainWindow)
        self.statusbar.setObjectName(_fromUtf8("statusbar"))
        MainWindow.setStatusBar(self.statusbar)

        self.retranslateUi(MainWindow)
        QtCore.QObject.connect(self.lineEdit, QtCore.SIGNAL(_fromUtf8("textEdited(QString)")), self.pushButton.showMenu)
        QtCore.QMetaObject.connectSlotsByName(MainWindow)

    def retranslateUi(self, MainWindow):
        MainWindow.setWindowTitle(QtGui.QApplication.translate("MainWindow", "Network and website\'s health Checker - by MinhCD", None, QtGui.QApplication.UnicodeUTF8))
        self.label.setText(QtGui.QApplication.translate("MainWindow", "Host or URL", None, QtGui.QApplication.UnicodeUTF8))
        self.checkBox_1.setText(QtGui.QApplication.translate("MainWindow", "Ping all parts", None, QtGui.QApplication.UnicodeUTF8))
        self.checkBox_2.setText(QtGui.QApplication.translate("MainWindow", "TraceRoute all parts", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setText(QtGui.QApplication.translate("MainWindow", "Do check", None, QtGui.QApplication.UnicodeUTF8))
        self.textBrowser.setHtml(QtGui.QApplication.translate("MainWindow", "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\">\n"
"<html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">\n"
"p, li { white-space: pre-wrap; }\n"
"</style></head><body style=\" font-family:\'Ubuntu\'; font-size:11pt; font-weight:400; font-style:normal;\">\n"
"<p style=\"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\"><br /></p>\n"
"<p align=\"center\" style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;\"><span style=\" font-style:italic;\">Check results will be displayed here:</span></p></body></html>", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton_2.setText(QtGui.QApplication.translate("MainWindow", "Send report", None, QtGui.QApplication.UnicodeUTF8))
        self.checkbox_vital.setText(QtGui.QApplication.translate("MainWindow", "Load vital components", None, QtGui.QApplication.UnicodeUTF8))
        self.checkbox_full.setText(QtGui.QApplication.translate("MainWindow", "Load full site", None, QtGui.QApplication.UnicodeUTF8)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:06:57.967

解决了，搬家

```
QtCore.QObject.connect(self.pingThread, \
                QtCore.SIGNAL("Data"), \
                self.append_to_text_browser) 
```

到内部方法

```
def setupUi(self, *args): 
```

# jsp - 如何在登录操作时存储 cookie 并在内部检索 cookie 任何 jsp 页面中的标记

> ID：11499680
> 
> 赞同：1
> 
> 时间：2012-07-16T07:16:01.903
> 
> 标签：jsp, jakarta-ee, cookies

我是 cookie 管理的新手。我只想从一个简单的场景开始。当用户成功登录到他的帐户时，会生成一个 uid（从数据库的 Users 表中相应行的 uid 中获取）并作为 cookie 存储在用户系统的硬盘上。登录后用户被重定向到他的主页。用户转到另一个可访问的页面，例如 myinfo.jsp。myinfo.jsp 包含一个文本字段，其中要显示的 uid 将从存储在硬盘上的 cookie 中检索。我希望当用户导航到 myinfo.jsp 时，他应该在文本字段中看到他的 uid。

我正在使用 J2EE 技术。

有人可以建议一种方法来完成这个简单的任务。或者有人可以放一些`to the point to my this simple task`教程的链接。我会感谢任何帮助或提示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:19:23.503

您可以在呈现 jsp 的操作类中设置文本字段的值。如果您使用会话管理器来存储活动登录信息，您可以执行以下操作。

```
User user = (User)request.getSession().getAttribute("userAttributeName");
setTextField(user.getId().toString) 
```

否则，您可以获取 cookie 并在代码中迭代以获取所需的属性。

```
public static String getCookieValue(String cookieName, HttpServletRequest request)
{
    String cookieVal = null;
    Cookie cookies[] = request.getCookies();
    if(null != cookies && StringUtils.isNotEmpty(cookieName))
    {
        for(Cookie cookie : cookies)
        {
            if(cookieName.equals(cookie.getName()))
            {
                cookieVal = cookie.getValue();
                break;
            }
        }
    }
    return cookieVal;
}

String userId = getCookieValue(cookieName, request);
setTextField(user.getId().toString); 
```

您还可以使用 Jquery (javascript) 获取 cookie。[此链接](http://www.jquery4u.com/data-manipulation/jquery-set-delete-cookies/)可能会有所帮助。

# sql - 如何从用逗号分隔的 Oracle 中获取行

> ID：11499691
> 
> 赞同：0
> 
> 时间：2012-07-16T07:16:29.827
> 
> 标签：sql, oracle

这就是我得到的

```
parent   MenuName Name     menu2    type      menuId   menu2Id
--------------------------------------------------------------
26  General Currency    Add 3   27  29
26  General Currency    Delete  3   27  31
26  General Currency    Update  3   27  30
26  General Currency    View    3   27  28
26  General Country Add 3   32  34
26  General Country Delete  3   32  36
26  General Country Update  3   32  35 
```

我想变成这样

```
MenuId   MenuName   Name       Privilege
------------------------------------------------
27       General    Currency   Add,Delete,Update,View
32       General    Country    Add,Delete,Update 
```

请帮忙

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:21:54.647

您没有说明您的版本，所以我假设当前版本（11.2）：

```
select menuid, menuname, name, listagg(privilege, ',')
from menu
group by menuid, menuname, name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:24:08.280

您可以使用`listagg`相同的功能，如下所示 -

```
select MenuId,
       MenuName,
       Name, 
       listagg(menu2,',') within group (order by 1) Privilege
from table_name
group by MenuId,MenuName,Name 
```

[以供参考](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T12:38:03.477

如果您没有使用 oracle 11gR2，那么还有其他方法 - 阅读[这里](http://www.oracle-base.com/articles/misc/string-aggregation-techniques.php)

和 XMLAGG 方式：

```
select menuid, menuname, name, trim(xmlagg(xmlelement(e, privilege || ','))
              .extract('//text()')) Privilege
from table_name
group by MenuId,MenuName,Name 
```

# cakephp - 在 cakephp 中的 ajax 渲染视图上加载 ajax

> ID：11499693
> 
> 赞同：2
> 
> 时间：2012-07-16T07:16:36.490
> 
> 标签：cakephp

我在我的 cakephp 应用程序中通过 js helper 使用 ajax；为此，我正在使用以下代码。

```
echo $this->Js->link('test','/controller/test/', array('before'=>$this->Js->get('#loading')->effect('fadeIn'),'success'=>$this->Js->get('#loading')->effect('fadeOut'),'update'=>'#mydiv')); 
```

它工作正常。但是，当我在由 ajax 呈现的视图页面上使用此代码时，它无法正常工作。当我检查页面源时，我发现该视图的脚本未添加到缓冲脚本中。我猜在加载页面时会创建缓冲脚本。在我的情况下，加载页面时未加载特定内容，因此不会在缓冲脚本中添加此布局的脚本。

请指导我是否有任何其他方法可以做到这一点，或者我必须通过自定义 jquery 或其他方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:24:58.043

您应该在 Ajax 链接中使用 evalScripts 选项。这是代码：

```
echo $this->Js->link('test','/controller/test/', array('before'=>$this->Js->get('#loading')->effect('fadeIn'),'success'=>$this->Js->get('#loading')->effect('fadeOut'),'update'=>'#mydiv', 'evalScripts' => true)); 
```

在您的 Ajax 视图文件的底部。请务必包括：

```
<?php echo $this->Js->writeBuffer();?> 
```

# c# - 水晶报表将表格移至下一页

> ID：11499695
> 
> 赞同：0
> 
> 时间：2012-07-16T07:16:43.157
> 
> 标签：c#, crystal-reports-2008

我正在使用c#水晶报表，我在标题部分有一些文本下面是子报表中的一个表格下面表格是页脚部分，如果表格行的大小增加，结束行被截断，我想要做的是如果表格行它的尺寸变大了，它应该在下一页中显示，并且应该在该页脚部分下方显示。有谁知道如何实现它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:54:54.917

首先，您需要为子报告中的字段提供 Can Grow 选项，并且也为子报告提供相同的选项

仅供参考，可以通过右键单击子报告并选择格式报告选项来访问上下文菜单中的 Can Grow 选项

# ruby - 如何编写一个函数来更改 Ruby 主范围内变量的值

> ID：11499705
> 
> 赞同：1
> 
> 时间：2012-07-16T07:17:36.740
> 
> 标签：ruby, scope

我有一个任务要在 c 中编写一个值交换函数，我也不知道如何在 ruby​​ 中做到这一点

在 Ruby 中类似

```
a = 1

b = 2

value_swap!(a,b)

puts a #=> 2

puts b #=> 1 
```

这里的难点是如何使用函数来改变主作用域中的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:41:15.107

这是一个重大的黑客攻击，但你可以尝试这样的事情：

```
def value_swap(a,b,parent_binding)
    parent_binding.eval("#{a},#{b}=#{b},#{a}")
end

a=1
b=2
value_swap :a,:b,binding
puts a
puts b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:05:17.653

Ruby 字符串是可变的，所以你可以拥有：

```
a= "43"
b= "42"

def wtf!(a, b)
    t= a.clone
    a.gsub!(a, b)
    b.gsub!(b, t)
end

wtf!(a, b)

puts a, b 
```

不幸的是，Fixnum 是不可变的，所以 self=n 不起作用。

**编辑：可变数据结构的另一个例子**

这是另一个可变数据结构，数组。这可能会澄清我的答案。

```
a= [43]
b= [42]

def omg!(a, b)
    b[0], a[0]= a[0], b[0]
end

omg!(a, b)

p a, b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:22:04.410

*Ruby 支持变量的并行赋值，如果你想像这样交换变量的值*，它会派上用场：

```
irb(main):001:0> a = 1
=> 1
irb(main):002:0> b = 2
=> 2
irb(main):003:0> a,b = b,a
=> [1, 2]
irb(main):004:0> a
=> 2
irb(main):005:0> b
=> 1
irb(main):006:0> 
```

但我想这对分配没有真正的帮助。在 C 中，您将对引用进行操作，例如将这些变量的指针传递给函数，然后对其进行操作。

如果您无法提出解决方案，这是一个尝试（不是我的）：

```
void swap(int *i, int *j) {
   int t = *i;
   *i = *j;
   *j = t;
}

void main() {
   int a = 23, b = 47;
   printf("Before. a: %d, b: %d\n", a, b);
   swap(&a, &b);
   printf("After . a: %d, b: %d\n", a, b);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T15:15:35.680

除非您使用诡计，否则 Ruby 的语义不会允许您尝试做的事情。

对于您给出的示例，我只使用并行分配，它不使用任何技巧，并且对您的代码的读者来说会立即显而易见：

```
a, b = b, a 
```

# xpages - 如何设置 xe:namePicker 的样式（摆脱内联样式）？

> ID：11499707
> 
> 赞同：0
> 
> 时间：2012-07-16T07:17:50.167
> 
> 标签：xpages, xpages-extlib

我在我们的应用程序的几个地方使用 xe:namePicker。我想为选择器设置样式以反映应用程序样式。所以我给它一个 styleClass 使用 dojo 属性。Sie 源代码截图

![名称选择器代码](../Images/f981e0f74eda7f03b91f662e438bbcdb.png)

但是没有使用样式，因为选择器有自己的内联样式。

![名称选择器](../Images/37bca040669201a8884a2d2126463506.png)

如何摆脱内联样式以使用我自己的样式类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:03:29.110

你可以在你的css中用这样的东西覆盖内联样式：

```
.lotusdialog [style] {
   background: yellow !important;
} 
```

[style] 覆盖添加到它之前的元素的任何内联样式，在这种情况下使用类 .lotusdialog

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T08:36:55.767

我只是使用“class”dojo 属性尝试了它，与你让它工作不同：

这是名称选择器的 xml 代码：

```
<xe:namePicker id="namePicker1" for="inputText7">
    <xe:this.dataProvider>
        <xe:dominoNABNamePicker></xe:dominoNABNamePicker>
    </xe:this.dataProvider>
    <xe:this.dojoAttributes>
        <xp:dojoAttribute name="class" value="myDlgClass">
        </xp:dojoAttribute>
    </xe:this.dojoAttributes>
</xe:namePicker> 
```

这从附加到 Xpage 的 .css 资源中引用 styleClass。正如您在屏幕截图中看到的那样，该类附加到名称选择器的内容小部件，并且它也确实有效。

![萤火虫代码](../Images/92b9ac0e14221f5232b6994ff689dcd3.png) ![对话框样式类](../Images/8667dfdb20df5d356265e84b26b27688.png) ![对话框](../Images/6887c981a684ff145c5d16f701fe5bc7.png)

我不知道这种方法是否比彼得推荐的另一种方法有优势，但也许它可以以一种或另一种方式派上用场。

# c# - 文件上传控制导致服务器错误

> ID：11499715
> 
> 赞同：0
> 
> 时间：2012-07-16T07:18:29.257
> 
> 标签：c#, asp.net, http, file-upload

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void Button1_Click(object sender, EventArgs e)
{
    String fn = FileUpload1.FileName;
    string fp = Server.MapPath("images");
    if (fp.EndsWith("\\") == false)
    {
        fp = fp + "\\";
    }
    fp = fp + fn;
    FileUpload1.PostedFile.SaveAs(fp);
}
} 
```

在运行此代码时，我收到以下错误：

> “/WebSite11”应用程序中的服务器错误
> HTTP 错误 400 - 错误请求。
> 版本信息：ASP.NET 开发服务器 10.0.0.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:21:32.960

如果图像文件夹位于您网站的根目录，那么路径应该是这个

```
string fp = Server.MapPath(~"/images"); 
```

并且还尝试在不同的浏览器 bcz 上运行该站点几天前我看到了同样的问题，但是当他在不同的浏览器上运行代码时它工作正常。

请参阅以下帖子 [HTTP 错误 400 - 由于 vb.net 中的 FileUpload 控制导致的错误请求](https://stackoverflow.com/questions/11400637/http-error-400-bad-request-due-to-fileupload-control-in-vb-net/11407612#11407612)

# android - Android 使用 ActionBarSherlock 创建普通菜单

> ID：11499716
> 
> 赞同：0
> 
> 时间：2012-07-16T07:18:34.137
> 
> 标签：android, actionbarsherlock

我的活动中有 ActionBarSherlock 操作栏。它是使用 onCreateOptionsMenu(Menu menu) 方法创建的。如何让这个菜单像操作栏一样可用，并用一些按钮创建普通菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:59:37.290

为您的应用程序创建布局。例如，为您的菜单创建一个按钮。您还可以使用图形 UI android eclipse 插件来定位它。

```
 <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/testButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="@string/testTitle"/>
</RelativeLayout> 
```

在扩展 com.android.Activity 的活动类中，

```
Button testButton;

testButton = (Button) findViewById(R.id.testButton);

        testButton .setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
            // Code to perform on click of the menu button
            }
        }); 
```

# host - openstack 特定主机 vm 启动

> ID：11499721
> 
> 赞同：0
> 
> 时间：2012-07-16T07:18:59.890
> 
> 标签：host, openstack

每个人！

我在 4 个计算节点和 1 个控制节点集群上运行 openstack（安装了 devstack）。

计算主机：node1、node2、node3、node4。

如何在特定主机上运行 VM，例如在 node3 上？

使用 Horizo​​n 或 euca-* 工具。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T10:39:11.683

选择一个特定的节点来启动实例：
[http ://docs.openstack.org/essex/openstack-compute/admin/content/specify-host-to-boot-instances-on.html](http://docs.openstack.org/essex/openstack-compute/admin/content/specify-host-to-boot-instances-on.html)

需要管理员帐户
Essex 版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T17:30:07.937

您需要使用 euca-run-instances 中的可用区 -z 选项。例如，如果您想在您拥有的每个计算主机上启动相同的映像。

```
HOSTS=`nova-manage service list | grep compute | grep -v XXX | grep -v disabled | sort | cut -f1 -d' '`

for host in $HOSTS; do
    euca-run-instances -k my-keypair -z nova:$host my-ami-id
done 
```

这个小脚本假定您只有一个名为“nova”（devstack 中的默认设置）的“可用区”。

请注意，这在 Essex 中仍然有效，但前提是您是**管理员**用户。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-11-30T11:47:20.937

您可以使用以下方法检查您的可用区：

```
openstack availability zone list 
```

现在要在 node2 上创建一个实例，您提供：

```
nova boot --flavor 'm1.tiny' --image (image id) --nic net-id=(network id) --availability-zone nova:node2 instance_name 
```

# c# - 以 XML 作为数据源的实体框架代码优先

> ID：11499725
> 
> 赞同：4
> 
> 时间：2012-07-16T07:19:28.890
> 
> 标签：c#, asp.net-mvc, entity-framework, xml-serialization, code-first

是否可以使用实体框架（代码优先）并将数据源作为 XML 文件？我需要使用 XML 文件中的值填充域对象。

XML 文件具有以下结构：

```
<Person name="John" age="12">
    <Products>
        <Product id="1" name="Product 1" />
        <Product id="2" name="Product 2" />
        <Product id="3" name="Product 3" />
    </Products>
</Person> 
```

C# 域对象具有以下结构：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public ICollection<Product> Products { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我可以使用 Linq to XML 来解析 XML 的每个元素并填充对象，但我正在寻找一种更自动化的方法来执行此操作（如果存在）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:22:43.633

您需要一些可通过 ADO.NET 访问的 XML 数据库。否则，您将针对您的 XML 文件实现自定义 EF 提供程序（仍将基于 ADO.NET）。EF 用于访问数据库。

如果您想要更“自动化”的方式，只需使用 XML 序列化和相关属性 - 这与首先使用代码和数据注释相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:22:04.947

实体框架代码主要支持[ADO.net 支持的数据源](http://msdn.microsoft.com/en-us/data/dd363565.aspx)。

根据[MSDN](http://msdn.microsoft.com/en-us/data/dd363565.aspx)：

> ADO.NET 数据提供程序模型在 .NET Framework 中提供了一个通用托管接口，用于连接到数据存储并与之交互。ADO.NET 实体框架构建在 ADO.NET 数据提供程序模型之上，以允许将实体框架与支持提供程序可用的任何数据源一起使用。

# android - 为什么抱歉弹出文本大小的原因？

> ID：11499726
> 
> 赞同：0
> 
> 时间：2012-07-16T07:19:37.860
> 
> 标签：android, android-layout, textview, android-button, android-textattributes

我有一个带有文本视图和按钮的布局，如下所示。

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    style="@style/info_layout">        

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="20sp"  />

<Button android:id="@+id/butn1"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="40dip"
    android:layout_width="150dip"
    android:layout_height="wrap_content" 
    android:gravity="center"
    android:text="@string/button1" />
</LinearLayout> 
```

上面的布局适用于许多语言，但对于阿拉伯人来说，它会弹出抱歉的窗口，但如果我将 textSize 更改为 18sp，它就可以正常工作。即使我尝试在更改文本大小之前从按钮中删除边距，但问题仍然存在。我将在 java 文件中为文本视图设置文本。所以我不明白这个问题的确切原因是什么。

```
 01-08 03:09:59.959: E/AndroidRuntime(1803): java.lang.StringIndexOutOfBoundsException: length=75; regionStart=52; regionLength=-18 
```

# javascript - 如何从 JSON 数组中获取数据并放入列表视图？

> ID：11499729
> 
> 赞同：1
> 
> 时间：2012-07-16T07:19:46.773
> 
> 标签：javascript, jquery-mobile

嗨，我是 javascript 编程的新手，我正在 jquery mobile 中制作一个下拉列表视图（选择器视图），以便数据位于该选择器视图中，我创建了一个 json 数组。问题是我需要代码，当我单击特定列表视图时，它应该运行一个 js 函数，该函数从 json 数组中获取数据并将其放入选择器（列表）视图中。我的html代码是：

```
<form method="get" name="datarange">
  <div data-role="fieldcontain">
     <select id="number" name="day you need" onclick="dayLoad();">
       <option value="select-value" selected="selected" >--Select Day--</option>
       <option value="01">/* here i want my data from array "day"/*</option>
       <option value="02">/* here i want my data from array "day"/*</option>
     </select>
  </div>
  <div data-role="fieldcontain">
     <select id="time" name="time you need">
       <option value="select-value" selected="selected">--Select Time--</option>
       <option value="101">/* here i want my data from array "Time" /*</option>
       <option value="102">/* here i want my data from array "Time"/*</option>
       <option value="103">/* here i want my data from array "Time"/*</option>
       <!--  etc. -->
       <option value="116">/* here i want my data from array "Time"/*</option>
     </select>
  </div>
  <div data-role="fieldcontain">
     <select id="pid" name="pid you need">
       <option value="select-value" selected="selected">--No PID allocation found--</option>
       <option value="301">/* here i want my data from array "pid"/*</option>
       <option value="302">/* here i want my data from array "pid"/*</option>
     </select>
  </div>
  <div data-role="fieldcontain">
     <select id="jus" name="justification you need">
       <option value="select-value" selected="selected">--Select Justification--</option>
       <option value="201">Project Work</option>
       <option value="202">Client Call</option>
       <option value="203">Team Meeting<option>
       <option value="204">Others</option>
     </select>
  </div>
</form>
<div id="display" class="rss-box"></div> 
```

在我的 js 文件中：

```
var day=[
       {"dayTime" : "Today-Drop"},
       {"dayTime" : "Tomorrow-Pick up"}];  
var time=[
        {"PM" : "3:00 PM"},
        {"PM" : "4:00 PM"},
        {"PM" : "7:30 PM"},
        {"PM" : "9:00 PM"},
        {"PM" : "10:15 PM"},
        {"PM" : "11:00 PM"}];

var Pid=[
        {"pidno" : "7813"},
        {"pidno" : "8133"},];

function dayLoad(){//i need the code to put in this function which grabs the data from array and gonna put into the listview} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:06:10.400

只需遍历您的数据，json（JavaScript Object Notation）就是 javascript：

```
function dayLoad() {
    for (var key in day) {
        $('#number').append($("<option/>", {
            value: key,
            text: day[key].dayTime
        }));
    }
} 
```

或 jQuery 流利的风格：

```
function dayLoad() {    
    $.each(day, function (key, value) {
        $('#number')
            .append($("<option></option>")
            .attr("value", key)
            .text(value.dayTime));
    });
} 
```

我不明白你为什么要使用 onclick 事件，也许你应该看看[jquery ready method](http://api.jquery.com/ready/)。初始化可能如下所示：

```
$(document).ready(function () {        
            dayLoad();        
    }); 
```

[更新见@Calavoow 评论] 移动使用 $(document).bind('pageinit')，而不是 $(document).ready()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:32:26.237

如果您按照其他一些答案的解释正确插入，问题可能仍然是 jquery mobile 没有修改 dom 以便它根据 jquery mobile 样式表呈现。发生这种情况是因为 jquery mobile 仅在加载页面时才进行这种转换。

但是 jquery mobile 确实提供了一种方法来修改通过 javascript 函数插入到 dom 中的内容。这个方法是trigger('create')。需要用 $ 选择已经插入到 dom 中的元素，然后按如下方式调用 trigger：

```
$("css selector for the element").trigger('create') 
```

应用到 day Dropbox 这将是这样完成的：

```
$("#number").trigger('create') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:37:54.043

就像是：

```
function appendNodes( target, data, key ) {
    var div = document.getElementById(target);
    for (var i = 0; i < data.length; i++ ) {
        var option = document.createElement("option");
        option.appendChild( document.createTextNode(data[i][key]) )
        option.value = i;
        div.appendChild(option);
    }
}

function dayLoad(){
    appendNodes( "number", day, "dayTime" );
    appendNodes( "time", time, "PM" );
    appendNodes( "pid", Pid, "pidno" );
} 
```

# zend-framework - 如何在zend框架中调整上传图像的大小

> ID：11499731
> 
> 赞同：3
> 
> 时间：2012-07-16T07:19:51.433
> 
> 标签：zend-framework, zend-form

我有一个带有上传图片字段的表单。如何将最近上传的图像调整为所需大小？我目前的表格是：

```
<?php
class Application_Form_User extends Zend_Form
{
public function init()
{
    $this->setAttrib('enctype', 'multipart/form-data');
    $this->setAction("");
    $this->setMethod("post");

    $element = new Zend_Form_Element_File('photo');
    $element->setLabel('Upload an image:')
            ->setValueDisabled(true);
    $this->addElement($element, 'photo');
    $element->addValidator('Count', false, 1);
    // limit to 1000K
    $element->addValidator('Size', false, 1024000);
    // only JPEG, PNG, and GIFs
    $element->addValidator('Extension', false, 'jpg,png,gif');
    $submit = $this->createElement('submit', 'submit');
    $submit->setLabel('Save');
    $this->addElement($submit);
} 
```

}

我的控制器：

```
public function indexAction()
{
    $form=new Application_Form_User();
    if ($this->getRequest()->isPost()) {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) {
            $file=pathinfo($form->photo->getFileName());
            $form->photo->addFilter('Rename', PUBLIC_PATH.'/images/'.uniqid().time().'.'.$file['extension']);
            if ($form->photo->receive()) {
                $this->view->photo=pathinfo($form->photo->getFileName());
            }
        }
    }
    $this->view->form=$form;
} 
```

有人可以给我举个例子吗？如何使用 php thumbnailer 之类的插件或类似插件来调整上传图像的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:29:27.800

Skoch_Filter_File_Resize 有效。这是一个自定义过滤器：[http ://eliteinformatiker.de/2011/09/02/thumbnails-upload-and-resize-images-with-zend_form_element_file/](http://eliteinformatiker.de/2011/09/02/thumbnails-upload-and-resize-images-with-zend_form_element_file/)

```
<?php
// Skoch/Filter/File/Resize.php
/**
 * Zend Framework addition by skoch
 * 
 * @category   Skoch
 * @package    Skoch_Filter
 * @license    http://opensource.org/licenses/gpl-license.php GNU Public License
 * @author     Stefan Koch <cct@stefan-koch.name>
 */

/**
 * @see Zend_Filter_Interface
 */
require_once 'Zend/Filter/Interface.php';

/**
 * Resizes a given file and saves the created file
 *
 * @category   Skoch
 * @package    Skoch_Filter
 */
class Skoch_Filter_File_Resize implements Zend_Filter_Interface
{
    protected $_width = null;
    protected $_height = null;
    protected $_keepRatio = true;
    protected $_keepSmaller = true;
    protected $_directory = null;
    protected $_adapter = 'Skoch_Filter_File_Resize_Adapter_Gd';

    /**
     * Create a new resize filter with the given options
     *
     * @param Zend_Config|array $options Some options. You may specify: width, 
     * height, keepRatio, keepSmaller (do not resize image if it is smaller than
     * expected), directory (save thumbnail to another directory),
     * adapter (the name or an instance of the desired adapter)
     * @return Skoch_Filter_File_Resize An instance of this filter
     */
    public function __construct($options = array())
    {
        if ($options instanceof Zend_Config) {
            $options = $options->toArray();
        } elseif (!is_array($options)) {
            require_once 'Zend/Filter/Exception.php';
            throw new Zend_Filter_Exception('Invalid options argument provided to filter');
        }

        if (!isset($options['width']) && !isset($options['height'])) {
            require_once 'Zend/Filter/Exception.php';
            throw new Zend_Filter_Exception('At least one of width or height must be defined');
        }

        if (isset($options['width'])) {
            $this->_width = $options['width'];
        }
        if (isset($options['height'])) {
            $this->_height = $options['height'];
        }
        if (isset($options['keepRatio'])) {
            $this->_keepRatio = $options['keepRatio'];
        }
        if (isset($options['keepSmaller'])) {
            $this->_keepSmaller = $options['keepSmaller'];
        }
        if (isset($options['directory'])) {
            $this->_directory = $options['directory'];
        }
        if (isset($options['adapter'])) {
            if ($options['adapter'] instanceof Skoch_Filter_File_Resize_Adapter_Abstract) {
                $this->_adapter = $options['adapter'];
            } else {
                $name = $options['adapter'];
                if (substr($name, 0, 33) != 'Skoch_Filter_File_Resize_Adapter_') {
                    $name = 'Skoch_Filter_File_Resize_Adapter_' . ucfirst(strtolower($name));
                }
                $this->_adapter = $name;
            }
        }

        $this->_prepareAdapter();
    }

    /**
     * Instantiate the adapter if it is not already an instance
     *
     * @return void
     */
    protected function _prepareAdapter()
    {
        if ($this->_adapter instanceof Skoch_Filter_File_Resize_Adapter_Abstract) {
            return;
        } else {
            $this->_adapter = new $this->_adapter();
        }
    }

    /**
     * Defined by Zend_Filter_Interface
     *
     * Resizes the file $value according to the defined settings
     *
     * @param  string $value Full path of file to change
     * @return string The filename which has been set, or false when there were errors
     */
    public function filter($value)
    {
        if ($this->_directory) {
            $target = $this->_directory . '/' . basename($value);
        } else {
            $target = $value;
        }

        return $this->_adapter->resize($this->_width, $this->_height,
            $this->_keepRatio, $value, $target, $this->_keepSmaller);
    }
} 
```

* * *

```
<?php
// Skoch/Filter/File/Resize/Adapter/Abstract.php
/**
 * Zend Framework addition by skoch
 * 
 * @category   Skoch
 * @package    Skoch_Filter
 * @license    http://opensource.org/licenses/gpl-license.php GNU Public License
 * @author     Stefan Koch <cct@stefan-koch.name>
 */

/**
 * Resizes a given file and saves the created file
 *
 * @category   Skoch
 * @package    Skoch_Filter
 */
abstract class Skoch_Filter_File_Resize_Adapter_Abstract
{
    abstract public function resize($width, $height, $keepRatio, $file, $target, $keepSmaller = true);

    protected function _calculateWidth($oldWidth, $oldHeight, $width, $height)
    {
        // now we need the resize factor
        // use the bigger one of both and apply them on both
        $factor = max(($oldWidth/$width), ($oldHeight/$height));
        return array($oldWidth/$factor, $oldHeight/$factor);
    }
} 
```

* * *

```
<?php
// Skoch/Filter/File/Resize/Adapter/Gd.php
/**
 * Zend Framework addition by skoch
 * 
 * @category   Skoch
 * @package    Skoch_Filter
 * @license    http://opensource.org/licenses/gpl-license.php GNU Public License
 * @author     Stefan Koch <cct@stefan-koch.name>
 */

require_once 'Skoch/Filter/File/Resize/Adapter/Abstract.php';

/**
 * Resizes a given file with the gd adapter and saves the created file
 *
 * @category   Skoch
 * @package    Skoch_Filter
 */
class Skoch_Filter_File_Resize_Adapter_Gd extends
    Skoch_Filter_File_Resize_Adapter_Abstract
{
    public function resize($width, $height, $keepRatio, $file, $target, $keepSmaller = true)
    {
        list($oldWidth, $oldHeight, $type) = getimagesize($file);

        switch ($type) {
            case IMAGETYPE_PNG:
                $source = imagecreatefrompng($file);
                break;
            case IMAGETYPE_JPEG:
                $source = imagecreatefromjpeg($file);
                break;
            case IMAGETYPE_GIF:
                $source = imagecreatefromgif($file);
                break;
        }

        if (!$keepSmaller || $oldWidth > $width || $oldHeight > $height) {
            if ($keepRatio) {
                list($width, $height) = $this->_calculateWidth($oldWidth, $oldHeight, $width, $height);
            }
        } else {
            $width = $oldWidth;
            $height = $oldHeight;
        }

        $thumb = imagecreatetruecolor($width, $height);

        imagealphablending($thumb, false);
        imagesavealpha($thumb, true);

        imagecopyresampled($thumb, $source, 0, 0, 0, 0, $width, $height, $oldWidth, $oldHeight);

        switch ($type) {
            case IMAGETYPE_PNG:
                imagepng($thumb, $target);
                break;
            case IMAGETYPE_JPEG:
                imagejpeg($thumb, $target);
                break;
            case IMAGETYPE_GIF:
                imagegif($thumb, $target);
                break;
        }
        return $target;
    }
} 
```

* * *

```
$photo->addFilter(new Skoch_Filter_File_Resize(array(
    'width' => 200,
    'height' => 300,
    'keepRatio' => true,
))); 
```

# c++ - 将派生类作为值放入 STL 映射

> ID：11499732
> 
> 赞同：0
> 
> 时间：2012-07-16T07:19:59.077
> 
> 标签：c++, stl, map, derived-class

我有 2 个简单的课程。基类`A`和派生类`B`。出于调试目的，复制构造函数和析构函数被重写为`cout`：

```
class A
{
protected:
    char * c;
public:
    A(char * c) : c(c) { cout << "+A " << this << "\n"; }
    A(const A& other) : c(other.c) { cout << "*A " << this << "\n"; }
    ~A() { cout << "-A " << this << "\n"; }
};

class B : public A
{
public:
    B(char * c) : A(c) { cout << "+B " << this << "\n"; }
    B(const B& other) : A(other.c) { cout << "*B " << this << "\n"; }
    ~B() { cout << "-B " << this << "\n"; }
}; 
```

这是我如何进入的`insert`实例：`B``map`

```
 {
        cout << "-- 1\n";
        map<string, A> m;
        cout << "-- 2\n";
        m.insert(pair<string, A>( "b", B("bVal")));
        cout << "-- 3\n";
    }
    cout << "-- 4 --\n"; 
```

结果：

```
-- 1
-- 2
+A 0051F620
+B 0051F620
*A 0051F5EC
*A 00BD8BAC
-A 0051F5EC
-B 0051F620
-A 0051F620
-- 3
-A 00BD8BAC
-- 4 -- 
```

关于实例的创建，我阅读如下：

1.  `B`由我自己的代码创建
2.  被`B`复制构造成`A`by`pair`
3.  然后，最后一个实例被插入它`A`的位置再次复制`map`

顺便说一句，将`pair`in`insert`行更改为 a`pair<string, B>`并没有解决问题，它仅将第二步更改为创建 an`B`而不是`A`，但最后一步会将其*降级*为 an `A`。在地图本身有资格销毁之前，地图中唯一保留的实例似乎是最后一个`A`实例。

我做错了什么，我应该如何将派生类放入地图？使用格式的地图

```
map<string, A*> 
```

也许？

**更新 - 解决方案**由于我的解决方案没有直接在接受的答案中说明，而是以建议的形式隐藏在其评论中，这就是我最终做的事情：

```
map<string, shared_ptr<A>> m; 
```

这假设您的构建环境支持`shared_ptr`s - 我的（C++/CLI，Visual Studio 2010）支持。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:25:06.103

这称为[切片](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，当派生类不适合分配给它的对象时会发生这种情况。这是一个简单的例子：

```
B b;
A a = b; // This would only copy the A part of B. 
```

如果您想在地图中存储不同类型的对象，则使用 map<..., A*> 是您正确推断的方式。由于对象不存储在映射中，而是存储在堆中的某个位置，因此无需复制它并且它总是适合的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:23:15.740

```
 map<string, A> m; 
```

将对插入的对象进行**切片**`A`，这将成为一个，丢失所有其他信息（它不再是一个`B`）。

你的直觉是正确的，你需要使用指针，或者更好的是，智能指针。

此外，析构函数`A`需要是`virtual`：

```
class A
{
    //...
    virtual ~A() { cout << "-A " << this << "\n"; }
}; 
```

`B`否则，通过指向 an 的指针删除实际类型的对象`A`会导致**未定义的行为**。

# jar - 我在哪里可以找到要导入我的程序的 wso2 jar

> ID：11499735
> 
> 赞同：0
> 
> 时间：2012-07-16T07:20:01.010
> 
> 标签：jar, wso2, wso2is

我一直在尝试按照[http://xacmlinfo.com/2011/12/18/writing-jdbc-pip-module/](http://xacmlinfo.com/2011/12/18/writing-jdbc-pip-module/)上的示例为 wso2 身份服务器创建一个 pip，但我无法让它工作，因为我无法导入 wso2 jar。我曾尝试使用 maven 构建项目，认为 maven 会自动下载必要的依赖项，但事实并非如此。谁能告诉我我是否可以获得 wso2 jar 或指向正确的方向以便能够编译 wso2 java 程序。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:35:29.147

嘿伙计们，我想通了，wso2 身份服务器编程的软件包是随身份服务器一起提供的。它们位于 IS_HOME\repository\components\plugins 中。谢谢大家帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T13:42:57.447

所有发布的 wso2 jar 都托管在 wso2-nexus 存储库中。您只需在应用程序的存储库下添加 wso2-nexus 即可下载 wso2 发布的 jar。以下会有所帮助

```
<repository>
    <id>wso2-nexus</id>
    <name>WSO2 internal Repository</name>
    <url>http://maven.wso2.org/nexus/content/groups/wso2-public/</url>
    <releases>
        <enabled>true</enabled>
        <updatePolicy>daily</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
    </releases>
</repository> 
```

# java - Java cron中问号的意义

> ID：11499740
> 
> 赞同：72
> 
> 时间：2012-07-16T07:20:26.280
> 
> 标签：java, cron, crontab

来源维基百科：

> **使用问号**(?) 代替“*”将日期或星期几留空。

上面的陈述对我来说没有多大意义。

因此，如果我写一些 cron，**`0 0 0 ? * *`**那么这意味着每个月的第一天还是意味着它将每天执行？

这有点令人困惑，因为 Java crons 以秒开头，而其他 crons 以分钟开头。

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2014-05-02T15:37:54.537

根据[Quartz CronTrigger 教程](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/tutorials/crontrigger.html)（Quartz 被 www.cronmaker.com 使用，上面引用过），`?`通配符只用在 day of month 和 day of week 字段中：

> ? （“无特定值”） - 当您需要在允许该字符的两个字段之一中指定某些内容时很有用，但另一个字段中不允许。例如，如果我希望触发器在一个月中的特定日期（例如，10 号）触发，但不关心恰好是一周中的哪一天，我会在 day-of 中输入“10” -month 字段和“？” 在星期几字段中。

我想`*`这里不合适，因为`*`意味着在一周中的每一天执行，这与它应该只在每月 10 日运行的规则相矛盾。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-23T14:37:45.827

我知道这是一个老问题，但为了后代，这里解释了：[http ://www.nncron.ru/help/EN/working/cron-format.htm#STARTTIME](http://www.nncron.ru/help/EN/working/cron-format.htm#STARTTIME)

> 在经典模式和扩展模式下，nnCron 用户都可以使用“非标准”字符“？” 在 cron 格式的前四个字段中。它代表nnCron启动的时间，即当一个字段被处理时，启动时间将代替问号：分钟字段为分钟，小时字段为小时，月份字段为月份，月份字段为月份。
> 
> 例如，如果您编写以下内容：
> 
> 时间： ？? * * * * 任务将在 nnCron 启动时执行，然后每天同时执行（当然，除非用户不重新启动 nnCron）：问号将被 nnCron 启动时间“替换”。例如，如果 nnCron 是在 8:25 开始的，那么问号将被这样替换：
> 
> 时间：25 8 * * * *

# php - 如何在一天中单击一次后禁用提交按钮，并在第二天使用 php 重新启用此按钮？

> ID：11499743
> 
> 赞同：0
> 
> 时间：2012-07-16T07:20:33.713
> 
> 标签：php, submit

我想在一天中单击一次后禁用用户的提交按钮，并在第二天重新启用此按钮。

```
 <input type="submit" class="myButton" id="option" value="submit"/> 
```

我需要的是，当我单击提交按钮时，表单会提交并禁用当天的按钮。然后它仅在第二天为该用户重新启用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:25:43.740

好吧，您应该以某种方式存储是否单击了按钮，如果是，则存储在什么日期/时间。或者只保留日期和时间，如果它是空的（只有第一次）它还没有被按下，否则只需检查它是多于还是少于一天前。

您可以将此值存储在数据库的文本文件中。

加载页面时，请执行以下伪代码：

```
<?
if ($dateLastPressed < $aDayAgo)
{
   echo '<input type="submit" class="myButton" id="option" value="submit" disabled = "disabled"/>';
}
else
{
   echo '<input type="submit" class="myButton" id="option" value="submit"/>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:33:27.903

我想最简单的方法是将点击的时间和日期存储在数据库中。我将假设您的用户具有某种独特的身份，该身份应该与点击的时间和日期一起存储。

当您为该用户呈现此特定表单时，检查数据库记录，将日期和时间与当前日期和时间进行比较，然后根据比较结果显示按钮。

```
<?php if ($dbRecord < $timeLimit) : ?>
   <input type="submit" class="myButton" id="option" value="submit" disabled = "disabled"/>
<?php else : ?>
   <input type="submit" class="myButton" id="option" value="submit"/>
<?php endif; ?> 
```

您还需要在您的 PHP 脚本中进行某种验证，以确保用户在第一次提交表单后不只是通过按 Enter 向您的页面发送垃圾邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T00:34:05.993

```
<form name="from" id="myForm"></form>

$('#myForm').bind('submit', function(){

$.ajax({
    type:'POST',
    cache:false,
    url:'/phpFiles/Form.php', //your path file
    data:$('#myForm').serializeArray(),
        success:function(data){
            var msg = $('.dearUserMsg');
            msg.slideDown(100, function(){
                msg.html(data);});// esse e a resposta do segundo form

        }
});
return false;
});

$('#myForm').bind('submit', function(){ // essa e a submit perfeito
$.ajax({
    type:'POST',
    cache:false,
    url:'secondForm.php',
    data:$('#myForm').serializeArray(),
        success:function(data){
            $.fancybox({
                content: data,
                width: '90%',
                height: '50%',
                scrolling: 'no',
                overlayColor: '#060',
                overlayOpacity: .3,
                transitionIn: 'elastic',
                transitionOut: 'elastic',
                easingIn: 'easeInSine',
                easingOut: 'easeOutSine',
                titlePosition: 'outside',
                hideOnOverlayClick: false,
                hideOnContentClick: false
            }); //('#mainTag')
        }
});return false;
});

<input type="submit" value="Submit" id="sButton" />
<div class="dearUserMsg" style="display:none"></div> 
```

不要忘记显示 none 以 SlideDown 工作

和它是一样的，但响应会出现在一个花哨的盒子里

在这两个例子中，提交按钮只工作一次，按钮将正常

# c# - devexpress gridView.Rows？

> ID：11499747
> 
> 赞同：4
> 
> 时间：2012-07-16T07:20:54.910
> 
> 标签：c#, gridview, datagridview, devexpress, gridcontrol

我想用 Devexpress 扩展（gridview）来做：

```
string dataInCell = dataGridView1.Rows[i].Cells[j].Value.ToString(); 
```

喜欢 ：

```
gridView1.Rows[i].Cells[j] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T09:23:13.917

如果您尝试获取特定行中单元格的值，请执行以下操作：

一个。如果您想要焦点行的单元格的值：

```
view.GetFocusedRowCellValue("fieldName"); 
```

湾。如果你想让一行的单元格值知道他的句柄：

```
view.GetRowCellValue(rowHandle, "fieldName"); 
```

祝你好运

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T08:01:05.387

尝试这个

```
 for (int i = 0; i < gridView.RowCount; i++)
        {
            dataInCell = Convert.ToString(gridView.GetRowCellValue(i, "FieldName"));
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:46:14.183

要获得特定的行，您可以使用这些命令。

```
GridView.GetDataRow(rowHandle) 
```

或者

```
GridView.GetRow(rowHandle) 
```

但是如果要修改一系列单元格，通常最好直接进入数据源

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-18T23:58:10.437

你大概已经`datasource`在网格上设置了一个？如果是这样，请使用数据源并通过其`datasource`索引访问它。

对网格进行排序时，使用行句柄可能会导致问题。我建议...

```
int dataIndex = gridView.GetDataSourceRowIndex(rowHandle);
var myData = myDataSource[dataIndex]; 
```

如果您使用的是通用集合，则不涉及强制转换，这可以处理分组和排序。当然，显示的内容和数据的内容可能不是一回事。例如，如果数据是一个枚举。您将为此显示显示名称，但数据源中的值是枚举。通常我需要基础值而不是显示的文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T10:58:49.047

```
string dataInCell = ((DataRowView)gridControl1.MainView.GetRow(i)).Row.ItemArray[j].ToString(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T05:56:55.933

您可以使用以下代码：

```
dataGridView1.GetRowValues(dataGridView1.FocusedRowIndex,"column1-name","column2-name",...); 
```

有了这个，您可以使用专注于它的行索引获取值，并使用字段的名称进行选择，返回对象的值类型，然后转换为 int、string 和 ... 这样：

```
string id=(string)dataGridView1.GetRowValues(dataGridView1.FocusedRowIndex,"column1-name"); 
```

但这取决于输入`column1-name`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-18T17:24:28.130

你应该使用[GetRowCellValue](https://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_GetRowCellValuetopic)

```
string cellValue;
cellValue = gridView1.GetRowCellValue(2, "ID").ToString(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-27T10:21:36.317

我想你正在寻找这个：

```
string str = gridView1.GetRowCellValue(Convert.ToInt32("ROW_NUMBER"), "COLUMN_NAME").ToString(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-09T09:33:19.470

您可以执行上述所有步骤，但请记住，空值对话将引发错误，因此在访问它之前执行 Convert.IsDBNull()。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-22T07:49:55.000

您可以使用获取网格单元格的值

```
string cellValue = gvGrid.GetRowValues(visibleIndex, "FieldName").ToString(); 
```

其中 visibleIndex 是行的索引。你可以像这样循环

```
if (gvGrid.VisibleRowCount > 0)
{
   for (int index = 0; index < gvGrid.VisibleRowCount; index++)
   {
      string cellValue = gvGrid.GetRowValues(index, "FieldName").ToString();
   }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-16T10:24:37.920

我认为这是获取行列字段的最佳代码。

```
string name= gridView1.GetRowCellValue(gridView1.FocusedRowHandle, "name").ToString(), 
```

# ruby-on-rails - 当用户访问某些页面时，我应该将我想要运行的 ruby 代码放在哪里？

> ID：11499749
> 
> 赞同：0
> 
> 时间：2012-07-16T07:21:20.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3

当用户加载页面时，我需要运行一些代码。它的具体作用是使用 gem 基于 xml 文件更新我的数据库。到目前为止，我找到的答案告诉我应该把它放在从 rake 任务到 lib 文件夹本身到模型的所有内容中。这有点令人困惑。

这是有问题的代码：

```
require 'rubygems'
require 'eaal'
EAAL.cache = EAAL::Cache::FileCache.new 
api = EAAL::API.new("id", "vcode", "char")                                  
result = api.MarketOrders("characterID" => "id")
result.orders.each do |order|
  @found = MarketItem.find_by_typeid(order.typeID.to_i)
  MarketItem.update(@found.id, :remaining => order.volRemaining.to_i)
end 
```

如果这是一个明显的问题，我很抱歉，我确信我的代码很糟糕。我对rails真的很陌生，我似乎能够学习新语言的唯一方法是bull-in-a-china-shop方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:28:58.627

有一条通往该页面的路线首先点击一个功能

例如。show_user_path 将点击函数 show。您可以将代码放在呈现页面的函数的开头。

# java - Java多线程：线程对象的引用计数变为零时的行为

> ID：11499750
> 
> 赞同：4
> 
> 时间：2012-07-16T07:21:23.290
> 
> 标签：java, multithreading, garbage-collection, reference-counting

*[开始之前我尝试搜索相关问题，因为我没有找到，所以我在这里问一个问题]*

我正在学习 Java，下面的场景让我很头疼：

```
class MyThread extends Thread {
    void run(){
        //a heavy function
    }
} 
```

现在在主线程中，我将此线程调用为：

```
public static void main(...){
    new MyThread().start();
    System.gc(); //just a request..
    //end of main thread too.
    //Reference to that MyThread object is now zero.
} 
```

我运行了那个代码。看来线程还活着。当**所有**线程退出时程序结束。

我的问题：

*   当引用计数为零时，线程是否有资格进行 GC？如果真的符合条件，那么垃圾回收的行为是什么？线程会被终止吗？
*   我知道这是一件坏事，但是没有`otherThread.join()`in 的定义是否明确`main()`？

我对自己有一些解释（但我不知道我有多正确——我在这里发帖的原因）：

*   只要线程**处于活动状态**，JVM 就会保持对线程的引用。所以参考计数永远不会真正为零。
*   执行函数有一个隐式`this`引用，所以引用计数再次不为零。

我在上述任何解释中是否正确？还是完全有其他解释？

谢谢并恭祝安康 ：）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T07:26:05.613

每个正在运行的线程构成 GC 的根。任何可从根之一访问的对象都不符合 GC 条件，并且线程具有对`java.lang.Thread`实例的线程本地引用（由 返回`Thread.currentThread()`）。所以不，您的线程在结束运行之前不会被 GC，因为`Thread`可以从正在运行的线程访问实例。

`join()`我不明白为什么不调用生成的线程会是一件坏事。如果您不在乎生成的线程何时结束，则无需加入它。当最后一个非守护线程停止运行时，应用程序将停止。

另外，请注意，引用的数量并不是 GC 用来判断对象是否符合 GC 条件的数量。如果图不再可访问，则保持相互引用的对象图（例如 DOM 树）可以进行 GC。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T07:29:05.953

**1.** `JVM will terminate only when all the Non-Daemon thread including the Main thread`已终止。（主线程不是 main() 方法）。

**2.**线程在**运行完其run() 方法后将立即死亡**，但正如您所知道的，每个线程（toe，即执行线程）都与Thread 类的实例相关联。

**3.**所以当线程死亡时，它会进入死亡状态（这里我不提线程池），**但是与线程关联的Thread类的对象仍然存在，但已经永久失去了它的线程性。**

**4.**但是很有**可能你的线程仍然在运行，只有 main 方法完成了。**

**5.**调用`join()`并没有什么坏处，但要谨慎使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:50:00.697

> 当引用计数为零时，线程是否有资格进行 GC？

*不可以。当线程终止并且*没有引用时，它就有资格进行 GC 。

> 如果真的符合条件，那么垃圾回收的行为是什么？线程会被终止吗？

看上面。

> 我知道这是一件坏事，但是在 main() 中没有 otherThread.join() 的定义是否明确？

这不是一件坏事，而且它的定义非常明确：当所有非守护线程都退出时，JVM 将退出。

> 只要线程处于活动状态，JVM 就会保持对线程的引用。所以参考计数永远不会真正为零。

正确的。

> 正在执行的函数有一个隐含的 this 引用，所以引用计数又不为零。

不正确。考虑静态方法。根据定义，执行函数是在活动线程中执行的，因此根据定义，线程是活动的，因此它不能被 GC 处理。你在这里的想法是相当循环的。

# sql - SQL Server varchar(50) 和 varchar(128) 性能差异

> ID：11499756
> 
> 赞同：5
> 
> 时间：2012-07-16T07:21:56.953
> 
> 标签：sql, sql-server

> **可能重复：**
> [varchar(500) 是否比 varchar(8000) 有优势？](https://stackoverflow.com/questions/2009694/is-there-an-advantage-to-varchar500-over-varchar8000)

我目前正在处理一个有很多带有 varchar(50) 的列的表。我们现在必须在某些列中插入的数据超过 50 个字符，因此我们必须将这些列的列大小从 50 更改为 128，因为我们有很多列，更改单个列是浪费时间。

所以我向我的团队提出，为什么不把所有的列都改成varchar(128)。一些队友认为，这将在选择和加入操作期间导致性能下降。

现在我不是数据库专家，但我认为从 varchar 50 迁移到 varchar 128 不会对性能造成任何重大影响。

PS - 我们在这些列中没有任何名称、姓氏、地址类型的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T09:23:29.087

`varchar(50)`并且`varchar(128)`从各个角度来看都会表现得几乎相同。对于 50 个字符以下的值，存储大小相同。它们可以互换地连接（`varchar(50)`连接`varchar(128)`），没有类型转换问题（即索引`varchar(50)`可以在连接中查找列`varchar(128)`），同样适用于 WHERE 谓词。在 SQL Server 2012 之前，增加`varchar`列的大小是一个非常快速的仅限元数据的操作，在 SQL Server 2012 之后，此操作在某些条件下*可能*是一个缓慢的 size-of-data-update-each-record 操作，类似于那些描述的在[添加一个可为空的列可以更新整个表](http://rusanu.com/2012/02/16/adding-a-nullable-column-can-update-the-entire-table/)。

任何列长度更改都可能引起一些问题：

*   处理意外大小值的应用程序问题。如果编码不当，本机*可能会遇到缓冲区大小问题（即较大的大小会导致缓冲区溢出）。*托管应用程序不太可能出现严重问题，但可能会出现一些小问题，例如值不适合屏幕或报告的列宽。
*   插入或更新时截断值导致的 T-SQL 错误
*   发生 T-SQL 静默截断并导致不正确的值（例如，@variables`varchar(50)`在存储过程中声明）
*   可能会达到最大行大小或最大索引大小等限制。例如。你今天有一个 8 列类型的复合索引`varchar(50)`，扩展到`varchar(128)`将超过 900 的最大索引大小并触发警告。

Martin 关于内存授权增加的警告是一个非常有道理的担忧。如果这确实是一个问题，我会购买更多的 RAM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:47:56.577

请在此处查看 [varchar(max) 与 varchar(n) 的性能比较](http://rusanu.com/2010/03/22/performance-comparison-of-varcharmax-vs-varcharn/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:44:10.707

我建议只更改需要更改的列。如果您在任何列中不需要超过 50 个字符，请不要更改它。

为什么你有兴趣使所有列的长度都相同？我怀疑所有列都有相同的长度要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:08:16.437

这样的列有多少？最佳实践规则说您需要仔细计划每一列并相应地定义大小。您应该确定适合 varchar(128) 的列，而不是盲目地增加所有列的大小。

# mysql - CakePHP 2：如何从数组生成 sql 插入脚本

> ID：11499759
> 
> 赞同：0
> 
> 时间：2012-07-16T07:22:06.490
> 
> 标签：mysql, cakephp-2.0, dump, sql-insert

我可以从 find 方法返回的数组中生成 sql insert 语句吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:07:05.843

是的你可以。执行 find() 操作后，使用 foreach 循环迭代数据并使用“;”进行基于字符串的插入查询 作为每个插入查询后的分隔符。创建一个扩展名为 .sql 的文件并使用强制下载组件下载它。我有一些可以帮助你的代码。我会尽快给你代码。

# bash - bash - 没有临时文件的多个操作（计算带有自定义排除的代码行）

> ID：11499760
> 
> 赞同：0
> 
> 时间：2012-07-16T07:22:11.183
> 
> 标签：bash, count

我想通过散布的评论使每个操作都保持在自己的位置上

如果没有 kludgy 临时文件，是否有办法做到这一点

```
 #!/bin/sh

    git diff --stat `git hash-object -t tree /dev/null` > tmp.txt

    # not my code
    grep -v "^ kazmath" tmp.txt > tmp2.txt

    grep -v "\.obj " tmp2.txt > tmp.txt
    grep -v "\.png " tmp.txt > tmp2.txt
    grep -v "\.gbo " tmp2.txt > tmp.txt

    # not my code
    grep -v "obj2opengl\.pl " tmp.txt > tmp2.txt

    grep -v "\.txt " tmp2.txt > tmp.txt
    grep -v "\.md " tmp.txt > tmp2.txt
    grep -v "\.blend " tmp2.txt > tmp.txt

    # +'s at end of line
    sed 's/+*$//' tmp.txt > tmp2.txt

    # ditch last line
    sed '$d' < tmp2.txt > tmp.txt

    echo -n "lines of code "
    cut -d '|' -f 2 tmp.txt | awk '{ sum+=$1} END {print sum}'

    rm tmp.txt
    rm tmp2.txt 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:32:57.153

将管道和更强大的正则表达式与`grep -E`(aka `egrep`) 一起使用：

```
git diff --stat `git hash-object -t tree /dev/null` |
grep -v "^ kazmath" |
grep -E -v "\.(png|gbo|obj|txt|md|blend) " |
grep -v "obj2opengl\.pl " |
sed -e 's/+*$//' -e '$d' |
cut -d '|' -f 2 |
awk '{sum += $1 } END { print "lines of code " sum }' 
```

# jquery - 在 jquery/ajax 中使用文本链接作为按钮

> ID：11499762
> 
> 赞同：-1
> 
> 时间：2012-07-16T07:22:15.880
> 
> 标签：jquery, ajax

我已经下载了一个带有普通按钮的 ajax/jquery conatct 表单。但我想用文本链接替换按钮。我一直在尝试来自网络的一堆建议，但似乎没有一个有效。

任何帮助将非常感激。

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">
$(function(){
    $('#contact_form').submit(function(e){
        e.preventDefault();
        var form = $(this);
        var post_url = form.attr('action');
        var post_data = form.serialize();
        $('#loader', form).html('<img src="loader.gif" /> Please Wait...');
        $.ajax({
            type: 'POST',
            url: post_url, 
            data: post_data,
            success: function(msg) {
                $(form).fadeOut(500, function(){
                    form.html(msg).fadeIn();
                });
            }
        });
    });
});
</script>
</head>
<body>
<form action="process.php" method="post" id="contact_form">
    <div>
         <label for="name">Your Name:</label>
         <input type="text" name="name" id="name" value="" tabindex="1" />
    </div>
    <div>
         <label for="email">Your Email:</label>
         <input type="text" name="email" id="email" value="" tabindex="2" />
    </div>
    <div>
        <label for="message">Message:</label>
        <textarea cols="40" rows="8" name="message" id="message"></textarea>
    </div>
    <div id="loader">
        <input type="submit" value="Submit" /> 
    </div>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:28:25.487

如果您只想用`<a />`标签替换提交按钮：

在您的 HTML 中，替换`<input />`标签：

```
<div id="loader">
    <!-- <input type="submit" value="Submit" /> -->
    <a id="yourID" href="" >Your Text</a>
</div> 
```

使用 jQuery将事件处理程序附加到新`<a />`标签：

```
$("#yourID").on("click",function(){
    $("#contact_form").trigger("submit");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:28:42.510

将按钮替换为

```
<a href="#" id="submit">Submit</a> 
```

然后使用以下代码（在您的表单 ajax 代码之后或之前）

```
$('#submit').click(function (e){
  e.preventDefault();
  $('#contact_form').submit();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T07:30:04.180

**HTML**

```
<div id="loader">
    <a href="#" class="submit">Submit</a> 
</div> 
```

**JS**

```
$(function(){
    $('#contact_form').submit(function(e){
        e.preventDefault();
        var form = $(this);
        var post_url = form.attr('action');
        var post_data = form.serialize();
        $('#loader', form).html('<img src="loader.gif" /> Please Wait...');
        $.ajax({
            type: 'POST',
            url: post_url, 
            data: post_data,
            success: function(msg) {
                $(form).fadeOut(500, function(){
                    form.html(msg).fadeIn();
                });
            }
        });
    }).delegate('a.submit', 'click', function() {
        $(this).closest('form').submit();
        return false;
    });
}); 
```

# java - 使用 Eclipse 调试多个 hadoop jvm

> ID：11499763
> 
> 赞同：0
> 
> 时间：2012-07-16T07:22:16.723
> 
> 标签：java, eclipse, hadoop, multiprocessing

我有一个问题出现在伪分布式模式下，但不是在独立模式下，我希望能就如何调试它提出一些想法。

我的一些映射器任务返回代码 143。我很想在 System.exit() 上放置一个断点，看看谁在调用它，但我必须让调试器在该映射器上运行。

我可以通过修改我的 bin/hadoop 脚本并远程连接到 localhost:5000 在调试器中启动任务跟踪器：

```
...
elif [ "$COMMAND" = "tasktracker" ] ; then
  CLASS=org.apache.hadoop.mapred.TaskTracker
  HADOOP_OPTS="$HADOOP_OPTS $HADOOP_TASKTRACKER_OPTS"
# TBMark!
  HADOOP_OPTS="$HADOOP_OPTS -Xdebug -Xrunjdwp:transport=dt_socket,address=5000,server=y,suspend=n" 
```

...我可以通过将它添加到我的 conf/mapred-site.xml 并远程连接到 localhost:5001 来将第一个映射器（或通过小调整，reducer）放入 Eclipse：

```
<property>
  <name>mapred.map.child.java.opts</name>
  <value>-Xdebug -Xrunjdwp:transport=dt_socket,address=5001,server=y,suspend=y</value>
</property> 
```

我的问题是失败是随机发生的，而不是在第一个映射器上。

不满意的想法包括：

1.  不知何故，用我自己的方法替换 System.exit() 进行堆栈跟踪。（如何挂钩系统调用？）
2.  只需继续尝试一个一个地调试映射器，并在调试下一个之前运行每个映射器以完成。（它*可能会*工作......）
3.  跟踪 hadoop 中调用 System.exit() 的每个最后一个位置，并将不同的签名写入日志。（*呸*）
4.  使调试器端口号变量，这样，如果我能猜出哪个会失败并且延迟不会使错误消失，我可以附加到该 jvm 并对其进行调试。（很多 if，我不知道有什么方法可以在 .xml 文件中创建这个变量。）
5.  如果可以预测在某次尝试时会发生故障，请在 jvm 启动之前中断任务跟踪器并手动编辑脚本文件。（危急时刻需要绝招）

关于如何使我的坏主意发挥作用的任何建议或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T08:32:58.153

[您可以尝试使用IsolationRunner](http://hadoop.apache.org/docs/r1.1.2/mapred_tutorial.html#IsolationRunner)重新运行失败的地图任务

如果它再次失败，您应该能够添加调试选项！

# web-services - Web 服务中的 BS 1.0 VS BS 1.1 规范有什么区别？

> ID：11499764
> 
> 赞同：0
> 
> 时间：2012-07-16T07:22:18.130
> 
> 标签：web-services

有人可以告诉我 WS-I Basic Profile 1.0 和 WS-I Basic Profile 1.1 之间的区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:28:07.687

来自：[WS-1 基本配置文件版本 1.1](http://www.ws-i.org/Profiles/BasicProfile-1.1.html)

> ## 1.2 基本配置文件版本 1.0 的更改
> 
> 该规范源自基本配置文件版本 1.0，并包含针对该规范的已发布勘误表。最显着的变化是：
> 
> *   MESSAGE 一致性目标 - 在 BP1.0 中具有 MESSAGE 一致性目标的一些需求现在使用新目标 ENVELOPE。这有助于消息的交替序列化，例如附件配置文件中描述的序列化。
>     
>     
> *   SOAP 绑定 - 与消息的 SOAP 绑定序列化相关的要求已移至简单 SOAP 绑定配置文件以促进其他序列化。

# java - 没有发现异常

> ID：11499765
> 
> 赞同：1
> 
> 时间：2012-07-16T07:22:32.803
> 
> 标签：java, java.util.scanner

再次帮助大家，为什么我在使用扫描仪时总是遇到这种错误，即使我确定该文件存在。

> java.util.NoSuchElementException：找不到行

我正在尝试`a`通过使用`for`循环来计算出现的次数。文本文件包含句子行。同时，我想打印句子的确切格式。

```
Scanner scanLine = new Scanner(new FileReader("C:/input.txt"));
while (scanLine.nextLine() != null) {
    String textInput = scanLine.nextLine();
    char[] stringArray = textInput.toCharArray();

    for (char c : stringArray) {
        switch (c) {
            case 'a':
            default:
                break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:24:43.373

```
while(scanLine.nextLine() != null) {
    String textInput = scanLine.nextLine();
} 
```

我想说问题出在这里：

在您的`while`情况下，您扫描最后一行并来到 EOF。之后，您进入循环体并尝试获取下一行，但您已经将文件读到了结尾。将循环条件更改为`scanLine.hasNextLine()`或尝试另一种读取文件的方法。

另一种读取txt文件的方式可以是这样的：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(new BufferedInputStream(new FileInputStream(new File("text.txt")))));

String line = null;

while ((line = reader.readLine()) != null) {
    // do something with your read line
}
reader.close(); 
```

或这个：

```
byte[] bytes = Files.readAllBytes(Paths.get("text.txt"));
String text = new String(bytes, StandardCharsets.UTF_8); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T07:25:07.953

您应该在 while 条件下使用：scanner.hasNextLine() 而不是scanner.nextLine()

Scanner 实现了按照这种模式工作的 Iterator 接口：

*   查看是否有下一项（hasNext()）
*   检索下一项 (next())

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:44:15.773

要计算“a”的出现次数或字符串中的任何字符串，您可以使用[apache-commons-lang](http://commons.apache.org/lang/api-2.6/index.html)中的 StringUtils，例如：

```
System.out.println(StringUtils.countMatches(textInput,"a")); 
```

我认为这比将字符串转换为字符数组然后循环整个数组以查找“a”的出现次数更有效。此外，StringUtils 方法是 null 安全的

# client - 如何使用 cmd 更改客户端规范的根目录

> ID：11499766
> 
> 赞同：4
> 
> 时间：2012-07-16T07:22:42.027
> 
> 标签：client, set, perforce, root

我使用以下命令创建了一个新的客户端规范：

> `p4 client abc;`

abc是我的cs的名字

现在我想改变这个cs的根。

有人可以告诉我如何在不显式修改客户端文件的情况下更改此客户端规范的根目录。（即通过使用某些命令）。在创建或设置客户端（通过命令行）时是否有提及根路径的选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T12:51:36.470

以下是一些提示：

在创建客户端新客户端规范时，您可以使用 -d 全局选项为 Root 字段播种，例如：

```
p4 -d /this/is/the/client/root client NewClientName 
```

您还可以将“p4 client -o”的输出通过管道传输到“p4 client -i”以创建或修改客户端规范，而无需打开编辑器，例如：

```
p4 -d /this/is/the/client/root client -o NewClientName | p4 client -i 
```

然而，这个`p4 -d`技巧不会做任何事情来替换现有客户端规范中的 Root 字段。为此，您需要一个内联过滤器，如下所示：

```
p4 client -o ExistingClientName | sed -e '/Root:/ s,.*,Root: /new/root/path,' | p4 client -i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T19:11:22.523

这是您如何使用 PowerShell 脚本更改现有客户端规范的根目录

```
$p4ClientSpec = p4 client -o "$env:COMPUTERNAME" 
$p4ClientSpec = $p4ClientSpec -replace '^Root:.+$', "Root: D:\test" 
$p4ClientSpec | p4 client -i 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-05T10:53:00.217

我的设置：

*   macOS 10.14
*   p4 2019.1

现有的答案都不适合我。

我不得不在终端运行

```
p4 client my-client 
```

在打开的文本编辑器中编辑根路径并保存规范。

之后，一切正常。

# c# - Extjs 还是 Deveexpress？

> ID：11499774
> 
> 赞同：-1
> 
> 时间：2012-07-16T07:23:04.613
> 
> 标签：c#, curl, extjs

我想为金融和银行解决方案开发 mvc 网络应用程序。我在几个应用程序中使用过 Kendo UI，但 Kendo UI 不稳定。

我想知道 extjs 是用于金融和银行解决方案的好解决方案或 Devexpress。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:39:33.013

我会在谷歌上搜索。

分别搜索与 Extjs 和 "Dev Express" 配对的 "bad service" "bugs" 等。

考虑到其中一个可能更受欢迎，因此会给你带来更多的点击率。

我对 Dev Express 的支持感到非常满意，我的问题总是在 24 小时内得到答复。我没有使用 Extjs 的经验

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:24:47.563

DevExpress 是一个很好的解决方案，我现在也在使用它——试试演示版，看看它是否也适合你。

[http://www.devexpress.com/Home/Try.xml](http://www.devexpress.com/Home/Try.xml)

# android - 来自 Web 的 Android 动态布局和代码

> ID：11499775
> 
> 赞同：2
> 
> 时间：2012-07-16T07:23:06.393
> 
> 标签：android, android-layout, dynamic

我正在开发一个会有很多布局和代码更改的项目。我的问题很简单，但我对此一无所知。是否可以在 Backgroundthread 上动态加载诸如源代码 (Java) 和 XML 布局文件之类的内容，然后使用下载的内容（或者/和 Java 文件 + XML 布局）启动另一个活动？这样您就可以在线更改代码和布局并在每次启动应用程序时下载它？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:22:16.100

[您可以动态](https://stackoverflow.com/questions/3022454/how-to-load-a-java-class-dynamically-on-android-dalvik)加载类。但是对于几乎不可能的 xml 布局，您将编写自己的解析器和充气器。不幸的是`LayoutInflater`不能膨胀外部文件。这是来自`LayoutInflater`文档：

> 出于性能原因，视图膨胀在很大程度上依赖于在构建时完成的 XML 文件的预处理。因此，目前无法在运行时在纯 XML 文件上使用带有 XmlPullParser 的 LayoutInflater；它仅适用于从已编译资源（R.something 文件）返回的 XmlPullParser。

因此，您基本上只能从代码中创建所有 UI。

# jquery - 如何通过uploadify从表单输入中传递数据

> ID：11499779
> 
> 赞同：1
> 
> 时间：2012-07-16T07:23:25.913
> 
> 标签：jquery, uploadify

这是我的代码：

```
 $('#file_upload').uploadify({

        'swf'      : 'uploadify/uploadify.swf',
        'uploader' : 'uploadify/uploadify.php',
        'formData' : { 'workId' : $("#zkouska").val() }

    }); 
```

和

```
 <input type="text" name="zkouska" id="zkouska" /> 
```

它不会传递任何东西，因为它仅在uploadify 脚本初始化期间从#zkouska 输入中获取值。但是我想在输入后传递输入值。我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:45:53.117

我自己想通了。

我阅读了 formData 的手册，您必须添加以下代码（但它不起作用）：

```
'onUploadStart' : function(file) {

    $("#file_upload").uploadify("settings", "workId", $("#zkouska").val());

} 
```

所以我搜索了一下，找到了一个有这个更正的线程：

```
'onUploadStart' : function(file) {

    $("#file_upload").uploadify("settings", "formData", {"workId": $("#zkouska").val()});

} 
```

现在工作正常。

# android - 安卓。ldpi 设备不会从 mdpi 文件夹中选择图像

> ID：11499781
> 
> 赞同：2
> 
> 时间：2012-07-16T07:23:32.983
> 
> 标签：android

我只在每个文件夹中放置了 mdpi 和 hdpi 图像，但是当我在 ldpi 设备上运行我的应用程序时，它不会从 mdpi 文件夹中选择图像，而是从 hdpi 文件夹中选择图像。这是为什么？关于我做错了什么的任何想法？

PS 如果我将专门用于 ldpi 设备的图像放在 ldpi 文件夹中，它会使用这些图像，但如果我删除它们，它会使用 hdpi 图像。

帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T07:26:48.890

这是 Android 的默认行为。LDPI 基本上是 HDPI 的一半，而 Android 基本上从 HDPI 中挑选图像，将其缩放到一半大小并使用它。

阅读此链接上的最后一条注释

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:33:12.330

Android 检查特定的密度。如果给出图像的参考，它会检查它的可用性并根据密度设置图像，但如果它不可用，它将采用位于 Hdpi 文件夹中的默认图像，即Android 的默认行为。

以 Android 的默认映像 ic_launcher 为例，如果它存在于单个文件夹中，Android 将设置它，因为它首先找到它的可用性而不是密度。

# c# - 安装 Windows 服务 -Setup.exe 失败

> ID：11499787
> 
> 赞同：0
> 
> 时间：2012-07-16T07:24:26.690
> 
> 标签：c#, visual-studio

我面临一个奇怪的问题。我通过各种博客和教程创建了我的第一个 Windows 服务。然后为添加安装程序等创建设置。它在安装时工作正常，通过 Visual Studio 卸载但在我部署它时失败。

```
Below is a summary of the errors, details of these errors are listed later in the log.
    * Activation of C:\Users\bhuvint\Documents\Visual Studio 2010\Projects\CPNS Library\ServicePackage\CommonPushNotificationWindowsService.application resulted in exception. Following failure messages were detected:
        + You cannot start application CommonPushNotificationWindowsService from this location because it is already installed from a different location.
        + You cannot start application CommonPushNotificationWindowsService from location file:///C:/Users/bhuvint/Documents/Visual%20Studio%202010/Projects/CPNS%20Library/ServicePackage/CommonPushNotificationWindowsService.application it is already installed from location file:///C:/inetpub/wwwroot/ServicePackage/CommonPushNotificationWindowsService.application. You can start it from location file:///C:/inetpub/wwwroot/ServicePackage/CommonPushNotificationWindowsService.application or you can uninstall it and reinstall it from location file:///C:/Users/bhuvint/Documents/Visual%20Studio%202010/Projects/CPNS%20Library/ServicePackage/CommonPushNotificationWindowsService.application. 
```

我已经卸载了该服务并尝试从同一台 PC 中已部署的服务中安装它以进行测试。但它因上述错误而失败。 **我觉得我以错误的方式部署了 Windows 服务。你们能否建议如何部署Windows服务？** *（我浏览过网络。所有人都建议从视觉工作室构建并安装它。但是如何发布它是我需要的东西。）*

请尽快帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:28:40.530

可能您在卸载之前的服务之前构建了安装项目。在这种情况下，您不能使用新设置来卸载服务，因为设置将不一样并且无法访问已安装的服务。

您应该尝试转到项目的先前版本并卸载该服务，以便将来每次构建安装项目时卸载该服务。

这在我身上发生了好几次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:30:32.957

在调试模式下运行 Visual Studio，并在服务项目的属性中转到构建后事件命令行中的选项卡构建事件并添加 -d 以便您无需安装即可运行服务，它将作为控制台应用程序运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:14:50.440

LocalService 帐户充当本地计算机上的非特权用户，并向任何远程服务器提供匿名凭据。谨慎使用其他帐户，因为它们以更高的权限运行并增加您受到恶意代码攻击的风险。

如果您的服务应用程序无法正确安装，请检查以确保服务类的 ServiceName 属性设置为与该服务的安装程序中显示的相同的值。两个实例中的值必须相同，才能正确安装您的服务。注意注意

您还可以查看安装日志以获取有关安装过程的反馈。

您还应该检查以确定您是否已经安装了另一个同名的服务。服务名称必须是唯一的，安装才能成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:29:47.697

**拟人化的愚蠢**

正如我所说，我正在部署我的服务。所以这个发布的代码有一个“setup.exe”文件。现在我已经为 Windows 服务创建了一个安装项目，用于安装、卸载。而且我不知道（这些话需要勇气！！）创建的 msi 文件是安装 Windows 服务所必需的。所以当我通过安装项目的文件夹结构时。我遇到了 .msi 文件。因此问题得到了解决。主要问题是：

*   我不知道使用设置项目
*   我将 setup.exe 与已发布的 windows 服务与 windows 服务的设置混淆了。

***我真的很抱歉从您宝贵的时间中窃取带宽。感谢大家的宝贵意见。***

# wso2 - WSO2 Carbon studio 1.0.14 不支持从注册表项中丰富

> ID：11499790
> 
> 赞同：0
> 
> 时间：2012-07-16T07:24:36.050
> 
> 标签：wso2, wso2esb, wso2carbon, wso2developerstudio

我在 wso2 esb 门户中使用 envolepe 丰富的调解器制作了一个序列，该调解器的来源是注册表中的一个键。当我将此代码移至 eclipse carbon studio 1.0.14 时，它失败了，丰富的中介指令变空了。

这个版本不支持吗？有这个解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:18:34.360

Carbon Studio 1.0.14 支持 ESB 3.0.1 和 ESB 4.0.0。默认情况下，它是为 ESB 3.0.1 配置的。

在 ESB 3.0.1 中，没有从 Registry 获取 Enrich 源的选项。它在 ESB 4.0.0 中启用。因此，您需要为 ESB 4.0.0 配置 Carbon Studio ESB 编辑器。

您可以按照以下步骤进行操作。

1.  窗口 -> 首选项
2.  展开 Carbon Studio 并选择 ESB。
3.  在 ESB Version 下拉框中选择 ESB 4.0.0，然后单击 Apply 和 OK。
4.  关闭您的序列编辑器并使用 ESB 编辑器重新打开序列。
5.  然后尝试从源代码视图将相同的配置重新导入到 Carbon Studio。

希望这可以帮助！！

谢谢并恭祝安康，

哈沙娜

# sql - 带有 Propel 的嵌套 SQL 语句？

> ID：11499791
> 
> 赞同：3
> 
> 时间：2012-07-16T07:24:37.687
> 
> 标签：sql, symfony1, symfony-1.4, propel

我正在尝试将 SQL 语句转换为 Propel，但没有取得如此大的成功。我有这个 SQL 语句：

```
SELECT id, param1, param2
              FROM Field1
              WHERE id
              in
              (
                  SELECT DISTINCT Field1_id
                  FROM Field2
                  WHERE id in
                  (
                      SELECT DISTINCT `Field2_id`
                      FROM `Field3`
                      WHERE
                      `param7` is null
                      AND param5 > 40
                  )
              ) LIMIT 0, 1000 
```

我开始以原始方式进行操作：

```
$connection = Propel::getConnection();
$query = "my Query";
$statement = $connection->prepare($query);
$statement->execute();
$results = $statement->fetch(PDO::FETCH_ASSOC); 
```

这很好用，但我不能对 $results 执行任何推进操作，因为它是一个数组。

那么如何在没有原始方式的情况下将此 SQL 转换为 Propel 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:57:56.990

一个很好的快速解决方法是在数据库中创建一个视图，并在 Propel 中为该视图设置一个只读表。然后，您可以像使用普通 Propel 表一样使用您的视图模型。现在当然这*是*作弊，并且被 ORM 纯粹主义者所反对，但它会让你在短期内继续前进。

我的方法是尝试重构回表，在这些表中我将它用于一个简单的查询，但对于大型的中央查询（特别是用于主要向下钻取屏幕的复杂查询），我非常乐意永久保持视图方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:43:08.973

据我所知，Propel 不处理嵌套查询。相反，您可以编写[表子查询](http://www.propelorm.org/reference/model-criteria.html#using_a_query_as_input_for_a_second_query_table_subqueries)。

# c# - 从身份验证 cookie 中读取

> ID：11499793
> 
> 赞同：1
> 
> 时间：2012-07-16T07:24:40.090
> 
> 标签：c#, asp.net

我正在尝试从身份验证票中读取用户名（即`TESTTEST`）

-----登录页面-----

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1,
      "TESTTEST",
      DateTime.Now,
      DateTime.Now.AddMinutes(30),
      false,
      String.Empty,
      FormsAuthentication.FormsCookiePath);
            string encryptedTicket = FormsAuthentication.Encrypt(ticket);
            HttpCookie authCookie = new HttpCookie(
                            FormsAuthentication.FormsCookieName,
                            encryptedTicket);
            authCookie.Secure = true;
            Response.Cookies.Add(authCookie);
             FormsAuthentication.RedirectFromLoginPage("User", false); 
```

------受保护的页面-----

```
 HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(authCookie.Value);
            Label1.Text = ticket.Name; 
```

结果：标签文本`"USER"`代替`"TESTTEST"`

我能做些什么来解决这个问题并获得正确的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:11:05.527

`FormsAuthentication.RedirectFromLoginPage`使用提供的名称（在您的情况下为“用户”）创建一个新票证。来自[http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)

> 如果 CookiesSupported 属性为真，并且 ReturnUrl 变量在当前应用程序中或 EnableCrossAppRedirects 属性为真，则 RedirectFromLoginPage 方法发出身份验证票证并使用 SetAuthCookie 方法将其放置在默认 cookie 中。

您可能希望使用以下代码而不是 RedirectFromLoginPage

```
returnUrl = FormsAuthentication.GetRedirectUrl(userName, false);
HttpContext.Current.Response.Redirect(returnUrl); 
```

# javascript - 需要有关定位最初隐藏对象的建议

> ID：11499794
> 
> 赞同：0
> 
> 时间：2012-07-16T07:24:42.820
> 
> 标签：javascript, jquery, css, jquery-ui

在我的 Web 应用程序中，我有一个 div 中的内容，该 div 将位于浏览器窗口的中心。
这个内容一开始是隐藏的，一次内容少，一次内容多，所以div的尺寸和左上角的位置发生了变化。

我使用 jQuery UI 定位实用程序来定位 div，但它无法处理隐藏元素。

到目前为止，我做了以下事情：
* div 是隐藏的（显示：无）并且不透明度为 0，“top”为 0，“left”为 0。
* 现在我从显示“none”更改为“block”。* 由于不透明度为 0，在窗口的左上角仍然无法识别 div。
* 在这种情况下，我将带有 jQ​​uery ui 位置的 div 定位到中心。
* 之后我从不透明度 0 更改为 1。 * 这样我希望用户不要看到从 0/0 到中心位置的“跳跃”。

现在我想简化我的小部件。
我想收起不透明度，只需从显示“无”更改为“块”并定位 div。

我将很快对其进行测试，我会看看我是否看到 div 从某个起始位置“跳跃”到目标位置。问题是我只有相对较快的机器进行测试。

如果有人告诉我，用户会在慢速机器/慢速浏览器上看到从初始位置到目标位置的跳跃，我不会用我的小部件进行任何更改。

非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:36:45.700

即使在速度非常快的机器上，您也会注意到它会跳到页面中间。保证。

相反，您应该使用`visibility: hidden;`而不是`display: none;`. 以这种方式隐藏的对象，仍然保持它们的盒子大小，并且你的位置插件将没有问题居中它。

`visibility`将属性切换到`visible`要显示 div 的时间。

# bpmn - 在 drools-guvnor 中查看规则流文件

> ID：11499797
> 
> 赞同：2
> 
> 时间：2012-07-16T07:24:48.720
> 
> 标签：bpmn, drools-flow, drools-guvnor

我正在从事一个涉及在 Drools 流程中创建工作流程的项目。我有很多规则流 (rf) 文件，我希望它们可以通过 Web UI 进行查看。

我已经看到 drools-guvnor 允许管理 rf 文件。但似乎它不允许用户查看它们（仅下载作品）。

我还听说 bpmn 文件格式适用于 Guvnor，但在我的工作流程中，我需要使用全局对象，我认为它不受支持。

所以我的疑问是，有没有办法在 Guvnor 上显示 rf 文件？并且可以在 bpmn 文件中使用全局变量吗？

# java - 无法在我的 IE8 中运行小程序

> ID：11499798
> 
> 赞同：0
> 
> 时间：2012-07-16T07:24:56.517
> 
> 标签：java, applet, classnotfoundexception

我有一个网页，我在其中通过小程序搜索斑马打印机。

小程序在其他系统上运行良好，但在我的系统上却不行。我在浏览器中测试了一些关于小程序设置的事情......

1.  我检查了是否通过控制面板的 JAVA 管理窗口启用了小程序
2.  我从“管理加载项”选项检查了我的 IE 中的 JAVA 加载项。

我指的是这个链接来解决问题：

[http://javatester.org/enabled.html](http://javatester.org/enabled.html)

但是这个在线小程序测试给出了错误..

```
ClassNotFoundExceptioln : Tiny. 
```

似乎小程序在我的系统中工作，但它无法从服务器检索类文件。

你有什么想法？如何解决这个问题呢？是否有任何网络或防火墙设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:31:05.137

这是一些特权问题。更改我的 Windows 配置文件设置后，它开始工作。

谢谢，甘扬。

# git - Git http.proxy 设置

> ID：11499805
> 
> 赞同：16
> 
> 时间：2012-07-16T07:25:09.433
> 
> 标签：git, proxy

我试图弄清楚这个 git 事情，有一次我弄乱了 http.proxy 变量。现在这只是胡说八道，'asdf'所以推送不起作用。我不知道之前的代理设置是什么（我什至不知道代理服务器是什么）。有什么方法可以将 http.proxy 设置为正确的值？

现在错误是：“访问时无法解析代理'asdf'......致命：HTTP请求失败。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-16T08:52:25.343

您错误地在 git 配置文件中添加了一个条目。您可以使用`git config`.

要确定您是否将代理条目添加到全局或本地配置文件，请从控制台运行：

```
git config -l --global | grep http  # this will print the line if it is in the global file
git config -l | grep http # this will print the line if it is in the repo config file 
```

`http.proxy`然后要从全局或本地文件中删除所有条目，请运行以下命令：

```
git config --global --unset-all http.proxy # to remove it from the global config
git config --unset-all http.proxy  # to remove it from the local repo config file 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:59:12.533

git config 文件是一个本地文件（即它没有被推送到远程仓库）。
因此，除非您有某种本地历史记录/备份机制（例如 Mac 上的 TimeMachine），否则您无法轻松恢复它。

例如，在 Windows 上，如果您有权访问注册表，[则可以在那里查找代理设置](https://superuser.com/questions/164365/does-the-registry-location-of-ie-proxy-settings-vary-between-versions-of-ie-and)。

# c - 某个参数有 3 个可能的值，并且有 n 个这样的参数，每个参数有 3 个值。需要通过随机更改来创建场景

> ID：11499807
> 
> 赞同：1
> 
> 时间：2012-07-16T07:25:24.320
> 
> 标签：c, matlab

某个参数有***3 个***可能的值，并且有***n 个***这样的参数，每个参数有 3 个值。需要通过随机更改来创建场景并将每个场景保存为文本文件，没有任何重复的场景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T07:31:51.803

从 0 数到 3 ^n -1，并将您的数字转换为 n 位基数为 3 的数字（包括前导零）。结果中的每个数字代表一个参数的值。

# qt - 如何修改 QTreeWidget？

> ID：11499808
> 
> 赞同：4
> 
> 时间：2012-07-16T07:25:24.230
> 
> 标签：qt

我想不显示父`QWidgetItem`项和子项之间的空间...我该怎么做。`style-Sheet`？.. 谢谢你！！！

这是一个`QTreeWidget`。

![在此处输入图像描述](../Images/aadfc6fa09c7ea1c712e7632a656ba4d.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T09:11:25.547

[http://qt-project.org/doc/qt-4.8/qtreeview.html#indentation-prop](http://qt-project.org/doc/qt-4.8/qtreeview.html#indentation-prop)

```
indentation : int 
```

此属性保存树视图中项目的缩进。

此属性保存以像素为单位测量的树视图中每个级别的项目的缩进。对于顶级项目，缩进指定从视口边缘到第一列中的项目的水平距离；对于子项，它指定它们相对于父项的缩进。

默认情况下，此属性的值为 20。

访问功能：

```
int indentation () const
void    setIndentation ( int i ) 
```

# c# - WPF 和 MVVM 的结构和性能

> ID：11499809
> 
> 赞同：4
> 
> 时间：2012-07-16T07:25:32.993
> 
> 标签：c#, .net, wpf, mvvm

我需要创建一个简单的菜单/选择设计工具 - 想法是选择类别和更多选择，这些选择由所选类别过滤。最终这将在 Kiosk 风格的环境中运行。

我正在使用 MVVM，我的设计包含一个视图，其中包含两个 ItemsControls 内的 2 个网格 - 一个用于类别（2 行 x 10 列），一个用于选择（10 x 10）。在我的 ViewModel 中，这些 ItemsControl 都绑定到 ObservableCollection 对象，其中一些细节（标题、颜色等）绑定到部件的属性。DataTemplate 绑定到单独程序集中的项目类，因为我也想在信息亭应用程序中重用它们。

我使用“ModifiedBehaviours”类将我的网格对象上的左右单击映射到 ViewModel 拾取的命令，类似于此

[如何将两个附加行为附加到一个 XAML 元素？](https://stackoverflow.com/questions/926451/how-can-i-attach-two-attached-behaviors-to-one-xaml-element)

从我读过的内容来看，该设计似乎“干净”（此处对 MVVM 而言相对较新），因为视图的代码隐藏除了将 ViewModel 分配给窗口的 DataContext 之外没有任何内容，视图中没有 x:name= 标签和ViewModel 不直接与视图交互。

但是我确实有性能问题。

当用户单击一个类别时，我会创建一个新的 ObservableCollection，其中包含它的详细信息项目 - 我还在设计模式下填写空白，因此我最终得到 100 个选项，其中包含“右键单击编辑”的空白选项。

创建这个集合的时间很短 - 在 1.6 Ghz 上网本上 < 0.01 秒（Kiosk PC 会很慢，所以我在较慢的硬件上进行测试）。但是，一旦刷新了控件绑定到的集合，UI 大约需要 2 秒才能更新，这比我正在重新创建的旧应用程序要慢得多——这是用非常旧的 Delphi 编写的。

我尝试过各种各样的事情。首先，我通过删除一些渐变和其他内容来简化我的 XAML，以使其尽可能简单 - 最终归结为单个文本块。然后在刷新集合时，我单独创建它，然后将其分配给绑定的集合，以便更新“一次”发生。第三，我稍微打破了我的设计，并在窗口和网格的更新代码周围添加了 BeginInit() 和 EndInit()。

这些都没有丝毫改善。

以下做了 - 这导致了我的问题。

1.  我从项目控件中删除了其中一个命令行为——尽管我需要左右单击。这必须将每个项目单元格（其中 100 个）的事件绑定到命令的事实是否会导致问题？

是否有另一种方法来左右单击每个网格单元？

2.  <- 这是我标记中的 2！我将项目（边框、文本块和命令）的 XAML 从单独的程序集中复制到主窗口 XAML 中。这给出了最大、最简单的改进，但我不明白为什么。

两者分别产生了影响，两者共同使表现“可以接受” - 虽然仍然非常缓慢。还有什么我可以看的吗？

我的控件看起来像这样（在单独的程序集中）。在任何人如上所述指出之前，我已经尝试删除很多内容，甚至将其删除为只是一个文本块。

```
<Control.Resources>
    <Style x:Key="MyBorderStyle" TargetType="Border">
        <Style.Triggers>
            <DataTrigger Binding="{Binding IsSelected}" Value="True">
                <Setter Property="BorderBrush" Value="Red"/>
                <Setter Property="BorderThickness" Value="3"/>
            </DataTrigger>
            <DataTrigger Binding="{Binding IsSelected}" Value="False">
                <Setter Property="BorderBrush" Value="{Binding BackColour}"/>
                <Setter Property="BorderThickness" Value="0"/>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Control.Resources>
<Grid>
    <Border Margin="1" Style="{StaticResource MyBorderStyle}" CornerRadius="8">
        <CommandBehaviour:CommandBehaviorCollection.Behaviors>
            <CommandBehaviour:BehaviorBinding Event="MouseLeftButtonDown" Command="{Binding DataContext.SelectLeftCommand, 
                RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" CommandParameter="{Binding ItemKey}"/>
            <CommandBehaviour:BehaviorBinding Event="MouseRightButtonDown" Command="{Binding DataContext.SelectRightCommand, 
                RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}}" CommandParameter="{Binding ItemKey}"/>
        </CommandBehaviour:CommandBehaviorCollection.Behaviors>
        <Border.Background>
            <LinearGradientBrush StartPoint="0.7,0" EndPoint="0.7,1">
                <GradientStop Color="{Binding BackColour}" Offset="0"/>
                <GradientStop Color="#33333333" Offset="1.5"/>
            </LinearGradientBrush>
        </Border.Background>
            <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{Binding ForeColour}" Text="{Binding Description}"/>
    </Border>
</Grid> 
```

当我将它复制到主窗口中的 ItemsTemplate 并且性能改进时，我可以保留很多这些。

Statement-Rant WPF 的最大问题之一似乎是许多性能（和其他）问题都在某个地方“陷入困境” - 在幕后的代码中 - 这使得很难弄清楚正在发生的事情无需外部且有时相当复杂的性能和分析工具，也无需下载、安装和学习它们的时间。

真的是裤子。

呼吸......声明结束-咆哮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:18:27.070

> 刷新集合时，我单独创建它，然后将其分配给绑定的集合，以便更新“一次”发生。

如果只是刷新，那么您不应该创建新的`ObservableCollection`，而只是添加/删除项目；分配新的`ObservableCollection`会导致 WPF 引擎清除旧 UI 并再次呈现整个 UI，这将非常耗时。

还要检查绑定错误，因为它们也会[影响](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/eb6b83b5-bcbb-4e1f-af03-cde68cfe827d)性能，在调试模式下查看 Visual Studio 中的输出窗口，您将获得绑定错误的详细信息。这种情况经常发生在 RelativeSource 绑定中，并且在您的情况下也可能成为瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:47:20.340

那就是你的问题：

> “当用户单击一个类别时，我会创建一个包含详细信息的新 ObservableCollection”

创建一个新集合的成本很高。创建一个受用户每次点击限制的新集合 - 成本非常高。

您可以尝试只创建一次集合并重新使用它吗？
（这只是一个有根据的赌注——但如果我是你，我的目标就是这个）

# sql - 根据日期和时间将一张表的数据与另一张表的数据进行比较

> ID：11499812
> 
> 赞同：1
> 
> 时间：2012-07-16T07:25:49.153
> 
> 标签：sql, sql-server, common-table-expression

我必须比较两个表之间的数据并检查是否有任何冲突。

下面是两个表的示例数据，`Events & Bookings`我需要根据& 显示冲突的记录将`bookings`表与表进行比较。`Events``Date & Time`

实际上，一旦日期更改，用户可以更改活动日期和时间，用户需要生成报告，如果他们已经对该特定日期和时间段进行了任何预订，则该报告将显示他们。

我正在使用以下查询来检查我们是否有任何更新活动的预订

**询问**

```
Declare @bTime varchar(10) = '10:30';
Declare @bDate date = '2012-08-15';
SELECT * FROM  EventDatesReporting   WHERE 
((CONVERT(time(0), EventStartTime) <= CONVERT(time(0),@bTime )  
    AND CONVERT(time(0), EventEndTime) >= CONVERT(time(0),@bTime ))
OR 
(CONVERT(time(0), EventStartTime) <= DATEADD(minute,59,CONVERT(time(0), @bTime))   
    AND CONVERT(time(0), EventEndTime) >= DATEADD(minute,59,CONVERT(time(0), @bTime))))
AND EventDates = @bDate 
```

上面的查询工作正常，但我需要转换此查询，以便我可以将 Booking 表`BookingDate & Time`与`Events Table`我正在寻找基于性能的 ms sql-query 进行比较，因为这些表中的数据会随着时间增长。

**活动**

```
EventID EventStartDate  EventEndDate    EventDates  DT        EventStartTime    EventEndTime
17      2012-07-25      2012-07-26      2012-07-25  2012-07-25  10:00:00        12:00:00
17      2012-07-25      2012-07-26      2012-07-26  2012-07-26  10:00:00        12:00:00
21      2012-05-28      2012-05-28      2012-05-28  2012-05-28  18:00:00        19:00:00
26      2012-01-01      2015-01-01      2012-07-01  2012-07-01  08:00:00        18:00:00 
```

**预订**

```
BookingID   TotalVisitors   BookingDate Time    BookingCancelled
1900221519  5               2012-07-10  10:30   0
5600515751  1               2012-07-20  10:30   0
8044913913  41              2012-07-05  10:30   0
1638934678  5               2012-07-20  10:30   1
5685687635  9               2012-07-25  10:30   0 
```

在上述情况下，我们假设用户更改了 `2012-07-25`与预订表冲突的第一个事件的日期，因为我们已经预订了该日期。我们需要找到这样的行，以便用户可以采取相应的行动，例如关于他们的预订取消等的亲密用户。

**场景和细节**

让我给你一张完整的照片，我们允许参观让我们说私人博物馆从周一到周五在两个不同的时间，一个在上午 10:30，第二个在下午 4:30，每次旅行我们最多可以接待 50 名游客（人）。假设一组 50 人想在 2012 年 8 月 15 日上午 10:30 参观博物馆，那么我们将在前端阻止这个日期。前端是一个简单的 Web 表单，具有常见字段，如姓名、地址、公司名称、访客人数、时间（这是一个下拉菜单，包含两个条目，上午 10:30，下午 4:30）和访问日期（这是一个日历控件这会阻止已达到完整预订的日期，并允许他们仅选择可用的日期。

另一方面，博物馆还组织特别活动，他们可以在预订表格上屏蔽这些日期。假设一个活动原定于 2012 年 8 月 10 日上午 9:00 至下午 1:00 举行，而该日期被管理员提前阻止。现在活动日期已更改为 2012-08-25。由于该日期之前没有安排任何活动，因此博物馆在该日期进行了一些预订。

由于博物馆不能为在 2012 年 8 月 25 日同一日期预订的人进行任何游览，因此需要通知。为此，我需要比较两个表事件表和预订表，如果我们在 2012 年 8 月 25 日 10:30 有任何预订，那么我们需要通过电子邮件通知游客取消他们的旅行。

在我的查询中，我还增加了 59 分钟的时间，因为我们需要在 EventStartTime 或 EventEndTime 之间至少休息 1 小时。

我希望这能让我了解我正在寻找什么样的数据报告。我提到的查询工作正常，但我需要将预订表中每一行的日期和时间值传递到事件表，并仅显示预订表中与 eventDate 和时间冲突的记录

**所需输出** 从示例数据中，我需要一个查询，该查询将仅向我显示以下记录，就好像它与更改事件日期后的预订冲突一样

```
EventID BookingID   TotalVisitors   BookingDate Time    BookingCancelled
17      5685687635  9               2012-07-25  10:30   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:17:26.047

假设 +1 小时实际上意味着参观博物馆持续一小时，并且这一小时不能与其他博物馆活动重叠，这里是一个查找此类冲突的查询。这是预订/活动日期两个表之间的简单连接，用于未取消的预订。[使用此处解释的表达式](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)检查椭圆间隔；本质上，两个范围在范围 A 的开始日期重叠在范围 B 的结束日期之前，并且范围 A 的结束日期在范围 B 的开始日期之后。`After`并且`before`可能读为`after or equals`or `before or equals`，具体取决于您如何定义重叠。

```
select e.EventID,
       b.BookingID,
       b.TotalVisitors,
       b.BookingDate,
       b.Time,
       b.BookingCancelled
  from EventDatesReporting e
 inner join Bookings b
   -- On same date
    on e.EventDates = b.BookingDate
   -- Overlapping intervals
   and e.EventEndTime >= cast(b.Time as Time)
   and e.EventStartTime < dateadd (hour, 1, cast(b.Time as Time))
   -- Only if booking is not cancelled
   and b.BookingCancelled = 'false' 
```

[有一个方便的 SQL 站点，称为 Sql Fiddle。我已将您的样本和我的答案放在那里，以便您可以在线查看](http://sqlfiddle.com/#!3/adf74/1)。

# javascript - JsTree 呈现为空 标签

> ID：11499813
> 
> 赞同：1
> 
> 时间：2012-07-16T07:25:50.637
> 
> 标签：javascript, jquery, web-applications, jstree

我正在尝试将 jsTree 添加到我的 web 应用程序中。当我触发创建 jsTree 的单击事件时，什么也没有出现。如果我检查 Chromium 开发人员工具中的 HTML，它所呈现的只是一个空的无序列表标签。有谁知道我做错了什么？

之前的HTML：

```
<div id="studenttree">
</div> 
```

Jquery/Jstree 代码：

```
$('#studenttree').jstree({
    'plugins' : ['json_data'],
    'json_data' : {
        'ajax' : {
            'url' : 'fakejax/getdirs.txt',
            'data' : function(n) {
                return {'id' : 'test'};
            }
        }
    }
}); 
```

事件触发后的html：

```
<div id="studenttree" class="jstree jstree-0 jstree-focused">
  <ul></ul>
</div> 
```

fakejax/getdirs.txt：

```
[
  {
    "data" : "test",
    "children" : ["Child 1", "Child 2"]
  }
] 
```

在 Chromium 开发人员工具中，没有出现对 getdirs.txt 的 ajax 请求，所以我假设甚至没有发出请求。然而，代码块正在执行，因为周围的 console.log() 语句出现在输出框中。我觉得我错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:50:27.477

在测试我的代码后，使用来自另一个来源的 jquery.jstree.js 文件，我发现代码有效。经过进一步调查，很明显我的本地 jquery.jstree.js 文件在下载过程中已损坏并且无法正确呈现。

# php - 在 PHP 中从 MySQL 数据构建 XLS 时出错

> ID：11499815
> 
> 赞同：-1
> 
> 时间：2012-07-16T07:26:10.340
> 
> 标签：php, mysql, export-to-excel

我有一些用 php 编写的代码，用于将数据从 mysql 导出到 xls，但是输出 php 有问题。

这是代码

```
<?php
// koneksi database
$db = "k8665xxxx";

mysql_connect("localhost","k866xxx","kixxx");
mysql_select_db("$db");

$date = date('d-m-Y');
$filename = "Data-inquiry-downloaded-$date.xls";

// nilai awal counter untuk jumlah data yang sukses dan yang gagal diimport
$sukses = 0;
$gagal = 0;
$table = "promo";

//jumlah kolom
$jkolom=0;

//generate kolom
$q= mysql_query("select * from $table where last_update between '$_POST[DariTanggal]' AND '$_POST[SampaiTanggal]'");
$r=mysql_fetch_assoc($q);
foreach ($r as $head=>$nilai) {
$judul = str_replace("Promo","Inquiry","$head");
$header .=$judul."\t"; //print header table
$jkolom++;
}
$header .= "\n";

//generate baris
$result= mysql_query("select * from $table where last_update between '$_POST[DariTanggal]' AND '$_POST[SampaiTanggal]'");
while ($row=mysql_fetch_array($result)) {
for ($x=0; $x<$jkolom; $x++) {
$content .=$row[$x]."\t";
}
$content .= $row[$x]."\n";
}

$output .= $header.$content;
header('Content-type:application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
echo $output;

?> 
```

这是输出...

```
622 Joni    bekasi  2193850955      4/11/2012                   spooring        yani    TELP        Bekasi  deal
623 rengko      81383691374 cek distributor komo    4/11/2012                   33x12.5x15  ban rosi    TELP        DKI Jakarta 
624 Joko Prayitno               4/11/2012                   175/65/14   ban rosi    EMAIL   jokfis2001@yahoo.com    DKI Jakarta 
625 diana   Jl.landas pacu timur blok D No.5kemayoran   818772885       4/11/2012   B1603BFF    Honda   2009    jazz Rs ban 185/55/R16  ban yani    YM  diana.william@ymail.com Jakarta Pusat   deal
626 Indra   Jln.Terusan I Gusti NgurahRay Pondok Kopi                                                       
    8129496491      4/11/2012   B8723KF Suzuki  2004    baleno  paket dasi  paket dasi  rosi    TELP    ind_dra@yahoo.com   Jakarta Timur   deal        
627 ari depok   2128639500  mau konfirmasi lagi     4/11/2012                   195/60/15   ban rosi    TELP        Depok 
```

让我详细了解一下，看看数字626..数据是这样的

```
626 Indra   Jln.Terusan I Gusti NgurahRay Pondok Kopi                                                       
    8129496491      4/11/2012   B8723KF Suzuki  2004    baleno  paket dasi  paket dasi  rosi    TELP    ind_dra@yahoo.com   Jakarta Timur   deal 
```

不过，应该是...

```
626 Indra   Jln.Terusan I Gusti NgurahRay Pondok Kopi  8129496491      4/11/2012   B8723KF Suzuki  2004    baleno  paket dasi  paket dasi  rosi    TELP    ind_dra@yahoo.com   Jakarta Timur   deal 
```

我的很多数据都变成了这样......有人对我的问题有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:29:25.907

与其尝试构建分隔的数据字符串，不如使用内置函数[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php)

例如（略）

```
header('Content-Type: text/csv' );
header('Content-Disposition: attachment;filename='.$filename);
$fp = fopen('php://output', 'w');

while ($row = mysql_fetch_row($result)) {
    fputcsv($fp, $row);
}
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:33:08.827

我猜你在数据库中的文本中有一个行中断，在 2 行中，如`$content .=$row[$x]."\t";`, use `str_replace()`to remove`\n`或使用 php:s 内置的 csv 函数（如 Phil）建议。

如果您想构建更复杂的 xls，而不仅仅是 csv 中的数据，您可能需要阅读“Excel XML 2003”-files

```
$content .= str_replace("\n", " ", $row[$x]) . "\t"; 
```

**更新**

或者只是修剪掉所有不必要的空白

```
$content .= trim($row[$x]) . "\t"; 
```

# git - 如何防止非快进推送到 git 中的选定分支？

> ID：11499820
> 
> 赞同：8
> 
> 时间：2012-07-16T07:26:36.177
> 
> 标签：git, git-push, fast-forward

我想保护我的 git 存储库，因此只能覆盖非主分支。有没有办法只保护选定的分支？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T09:33:39.007

这是我为自己使用而编写的更新挂钩（复制到挂钩/更新）。默认情况下，此脚本拒绝所有非快进更新，但允许它们用于显式配置的分支。反转它应该很容易，以便除主分支之外的所有分支都允许非快进更新。

```
#!/bin/sh
#
# A hook script to block non-fast-forward updates for branches that haven't
# been explicitly configured to allow it. Based on update.sample.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# Config
# ------
# hooks.branch.<name>.allownonfastforward
#   This boolean sets whether non-fast-forward updates will be allowed for
#   branch <name>. By default they won't be.

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
        echo "Don't run this script from the command line." >&2
        echo " (if you want, you could supply GIT_DIR then run" >&2
        echo "  $0 <ref> <oldrev> <newrev>)" >&2
        exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
        echo "Usage: $0 <ref> <oldrev> <newrev>" >&2
        exit 1
fi

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero="0000000000000000000000000000000000000000"
if [ "$newrev" = "$zero" ]; then
        newrev_type=delete
else
        newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
        refs/tags/*,commit)
                # un-annotated tag
                ;;
        refs/tags/*,delete)
                # delete tag
                ;;
        refs/tags/*,tag)
                # annotated tag
                ;;
        refs/heads/*,commit)
                # branch
                # git rev-list doesn't print anything on fast-forward updates
                if test $(git rev-list "$newrev".."$oldrev"); then
                        branch=${refname##refs/heads/}
                        nonfastforwardallowed=$(git config --bool hooks.branch."$branch".allownonfastforward)

                        if [ "$nonfastforwardallowed" != "true" ]; then
                                echo "hooks/update: Non-fast-forward updates are not allowed for branch $branch"
                                exit 1
                        fi
                fi
                ;;
        refs/heads/*,delete)
                # delete branch
                ;;
        refs/remotes/*,commit)
                # tracking branch
                ;;
        refs/remotes/*,delete)
                # delete tracking branch
                ;;
        *)
                # Anything else (is there anything else?)
                echo "hooks/update: Unknown type of update to ref $refname of type $newrev_type" >&2
                exit 1
                ;;
esac

# --- Finished
exit 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T08:08:55.470

您可以使用[GitEnterprise](http://www.gitenterprise.com)设置每个分支权限（管理员），以使用细粒度访问权限阻止非快进推送。

如果`git config --system receive.denyNonFastForwards true`您需要阻止所有分支的历史记录更改，它将简单地完成这项工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:44:42.733

您可以通过配置防止非快进更新`denyNonFastForwards`

```
git config --system receive.denyNonFastForwards true 
```

但它适用于所有分支。有关更多信息，请参阅[ProGit](http://git-scm.com/book/ch7-1.html#Server-Configuration)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:42:38.643

[这个 SO 答案](https://stackoverflow.com/a/6827045/506338)将为您提供所需的内容。只需编辑它以应用于主分支：

```
#!/bin/sh
# lock the master branch for pushing
refname="$1"

if [ "$refname" = "refs/heads/master" ]
then
    echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
    echo "You cannot push to the master branch."
    echo "XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
    exit 1
fi
exit 0 
```

**更新：**
这将阻止所有推送到主分支，包括快进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T10:00:48.627

我认为这取决于您在服务器端使用什么来访问您的存储库。有一些支持每个分支权限的服务器应用程序，例如[Gerrit](http://code.google.com/p/gerrit)或[Gitlab](http://gitlabhq.com/)（但是，我不确定 Gitlab 是否支持您的用例）。Gerrit 支持它，因为我在公司使用类似的工作流程。

也许[Gitolite](https://github.com/sitaramc/gitolite)也支持它（这是 Gitlab 在后台使用的），它更容易设置，但没有像 Gerrit 或 Gitlab 这样的网络界面。

附加评论：正如建议的那样，GitEnterprise 也是一个很好的解决方案，但是我的建议是合适的，如果您有自己的服务器（这在许多公司中很常见）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-08T17:08:30.860

如果您被允许修改您的服务器，那么这将在服务器上启用快速转发。

```
ssh ip 'echo $"[receive]
    denyDeletes = false
    denyNonFastForwards = false" >> /path/to/repo/config'
#then git push -f origin master 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-16T20:41:30.847

这是对[Tanu Kaskinen](https://stackoverflow.com/a/15760683/529659)脚本的修改，以允许对分支名称进行通配符。我们使用名称以“d/”开头的分支来指定“开发”分支。我想要一种方法来允许这些 d/ 分支的非快进更新：

```
 refs/heads/*,commit)
            # branch
            # git rev-list doesn't print anything on fast-forward updates

            if [[ $(git rev-list "$newrev".."$oldrev") ]]; then
                    branch=${refname##refs/heads/}
                    if [[ "$branch" =~ ^d/ ]] ; then
                      echo "Non-fast-forward update allowed on d/ branch"
                      nonfastforwardallowed="true";
                    else
                      #look for a specific config setting
                      nonfastforwardallowed=$(git config --bool  hooks.branch."$branch".allownonfastforward)
                    fi

                    if [ "$nonfastforwardallowed" != "true" ]; then
                            echo "hooks/update: Non-fast-forward updates are not allowed for branch $branch"
                            exit 1
                    fi
            fi 
```

# wordpress - WP搜索功能搜索自定义表格

> ID：11499829
> 
> 赞同：1
> 
> 时间：2012-07-16T07:27:51.150
> 
> 标签：wordpress, search, customization

现在这是我什至无法在谷歌上找到的东西。这里有谁知道我可以如何更改 wordpress 中的搜索功能以仅在一个包含几个字段的自定义表中搜索？我一直在为此绞尽脑汁。我什至找不到可以让您在数据库中定义自己的表和字段的插件。

任何人都可以帮忙吗？（顺便说一句，我认为这可能是一个非常方便的插件，如果它不存在的话。）

提前致谢！

编辑：我[在 wordpress 搜索上看到了这个主题](https://stackoverflow.com/questions/10144432/how-do-i-search-a-custom-database-table-not-a-wordpress-table?rq=1) 问题是我尝试了 phpacademy 搜索引擎教程，但从未从搜索中得到任何结果，而且那里的论坛人员也没有太大帮助，可以这么说。我只是为我父亲做这件事，无偿，所以如果有人能指出我正确的方向，我可以使用复制粘贴等进行编程，但我对 query.php 中的搜索功能感到困惑（wp ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:52:53.780

使用“搜索所有内容”插件，您可以搜索任何自定义字段或分类法。[http://wordpress.org/extend/plugins/search-everything/faq/](http://wordpress.org/extend/plugins/search-everything/faq/)

否则，您可以使用过滤器使用自定义查询（[http://codex.wordpress.org/Custom_Queries](http://codex.wordpress.org/Custom_Queries)）`posts_request`（如此处所示[覆盖 wordpress（sql 和 php）中的搜索功能](https://stackoverflow.com/questions/3025174/overwrite-the-search-function-in-wordpress-sql-and-php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-13T07:42:15.923

正如您所说，您想在自定义表和选定字段中进行搜索，为什么不创建自己的 wordpress 模板文件并在其中使用带有自定义 sql 的搜索查询？

查看更多此链接 [http://premium.wpmudev.org/forums/topic/how-do-i-search-a-custom-table](http://premium.wpmudev.org/forums/topic/how-do-i-search-a-custom-table)

# ruby - 如何存根在 RSpec 中接受多个参数的基类方法？

> ID：11499836
> 
> 赞同：1
> 
> 时间：2012-07-16T07:28:33.427
> 
> 标签：ruby, rspec

我想测试 ChildClass 的实例调用 something_interesting，同时省略对 BaseClass.my_method 的调用

```
class BaseClass
  def my_method *args, &block
  end
end

class ChildClass < BaseClass
  def my_method first_arg, second_arg
    something_interesting
    super first_arg, second_arg
  end
end 
```

如果我这样写我的测试：

```
subject = ChildClass.new
subject.should_receive :something_interesting
BaseClass.any_instance.stub :my_method
subject.my_method 
```

我得到错误：

> ArgumentError：参数数量错误（3 对 2）

任何想法为什么会这样？如何正确地把它存根？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T17:07:09.797

我不得不玩这个。这可能很愚蠢，但我认为这是一种相当明确的方式（没有存根）：

```
require 'rspec'

class BaseClass
  def my_method *args, &block
    raise 'hell'
  end
end

class ChildClass < BaseClass
  def my_method first_arg, second_arg
    something_interesting
    super first_arg, second_arg
  end

  def something_interesting
  end
end

describe ChildClass do
    it "should work" do
        class BaseClass
            def my_method *args, &block
            end
        end
        subject = ChildClass.new
        subject.should_receive :something_interesting
        subject.my_method 'two', 'args'
    end
end 
```

Monkey patching 可能有点邪恶，但在测试时是一个不错的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:43:36.890

首先， intances`BaseClass.any_instance`和之间没有联系`ChildClass.new`，您只是在实例中存根方法并期望在另一个实例中存根。

其次，测试并不意味着测试对象的内部部分。如果您正在处理`BaseClass'`对象，请对其方法进行测试。如果您正在处理`ChildClass'`对象，请检查该对象可以提出的所有内容，不要深入内部。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T18:21:42.857

你可以存根`super`：

```
describe ChildClass do
  it 'calls something_interesting' do
    subject.should_receive(:something_interesting)
    subject.stub(:super)
    subject.my_method 'a', 'b'
  end
end 
```

# android - 多维向量不允许我删除项目

> ID：11499837
> 
> 赞同：0
> 
> 时间：2012-07-16T07:28:35.440
> 
> 标签：android, c++, vector

我正在使用这个多维向量的定义：

```
Vector<Vector<sp<InputWindowHandle> > > mWindowHandles; 
```

除了这一行之外，它几乎在代码中的任何地方都可以正常工作：

```
(mWindowHandles[displayId]).removeAt(i--); 
```

我不明白为什么。Vector的单个条目不应该是向量吗？这是我得到的编译错误：

> 传递 'const android::Vector >' 作为 'ssize_t android::Vector::removeAt(size_t) [with TYPE = android::sp]' 的 'this' 参数会丢弃限定符

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:16:39.580

非常感谢@Component 10 似乎在 android 中实现 Vector 与我习惯的普通 std::vector 不同。为了删除一个项目，我必须这样做：

`Vector<sp<InputWindowHandle> >& oneDisplayWindowHandles = mWindowHandles.editItemAt(displayId);` `oneDisplayWindowHandles.removeAt(i--);`

# android - 尝试拍照时应用程序崩溃

> ID：11499842
> 
> 赞同：0
> 
> 时间：2012-07-16T07:28:48.340
> 
> 标签：android, crash, camera

我的应用有 2 个问题：

- 拍照
时崩溃 - 旋转设备时崩溃

cameraPreview.java:

```
 public class CameraPreview extends Activity implements SurfaceHolder.Callback
    {
     Camera camera;
     SurfaceView preview;
     SurfaceHolder holder;
     LayoutInflater controlInflater = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.activity_camera_preview);
        getWindow().setFormat(PixelFormat.UNKNOWN);

        preview = (SurfaceView) findViewById(R.id.surface1);
        holder = preview.getHolder();
        holder.addCallback(this);
        //holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        controlInflater = LayoutInflater.from(getBaseContext());
        View viewControl = controlInflater.inflate(R.layout.control, null);
        LayoutParams layoutParamsControl = new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
        this.addContentView(viewControl, layoutParamsControl);  }
    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) 
    {
        Camera camera = Camera.open();      
        Configuration c = getResources().getConfiguration();

        if(c.orientation == Configuration.ORIENTATION_PORTRAIT)
        {
            camera.setDisplayOrientation(90);
        }

        if(camera!=null)
        {
            try 
            {
                camera.setPreviewDisplay(holder);
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }   
            camera.startPreview();
            }}

          public void surfaceCreated(SurfaceHolder holder) 
          {

          }
    @Override
    public void surfaceDestroyed(SurfaceHolder holder) 
    {
        if(camera!=null)
        { 
            camera.stopPreview(); 
            camera.setPreviewCallback(null); 
            camera.release();       
            camera=null; 
        }
    }

    PictureCallback myPictureCallback_JPG = new PictureCallback()
    {
         @Override
         public void onPictureTaken(byte[] arg0, Camera arg1) 
         {
             Bitmap bitmapPicture = BitmapFactory.decodeByteArray(arg0, 0, arg0.length);
         }
    };

    public void take_picture_onClick(View view)
    {
        camera.takePicture(null, null, myPictureCallback_JPG);
    }   } 
```

AndroidManifest.xml：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.paparazzi"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-feature android:name="android.hardware.camera" android:required="true"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >

        </activity>
        <activity 
            android:name=".CameraPreview"
            android:configChanges="orientation" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

起初我认为第二个问题可能是由于缺少这部分引起的：

```
public void surfaceDestroyed(SurfaceHolder holder) 
    {
    if(camera!=null)
    { 
        camera.stopPreview(); 
        camera.setPreviewCallback(null); 
        camera.release();       
        camera=null; 
    }
} 
```

但是添加后没有任何变化。

至于第一个问题，我不知道出了什么问题。该应用程序在 3 种不同的设备上进行了测试。我将不胜感激任何建议。

编辑

好的，所以我正在尝试按照建议获取日志，但我不确定我是否做得对：

```
public void take_picture_onClick(View view)
    {
        try
        {
            camera.takePicture(null, null, myPictureCallback_JPG);
        }
        catch(Exception ee)
        {

                try {
                    File filename = new File(Environment.getExternalStorageDirectory()+"/logfile4.log"); 
                    filename.createNewFile(); 
                    String cmd = "logcat -d -f "+filename.getAbsolutePath();
                    Runtime.getRuntime().exec(cmd);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

    } 
```

日志文件已创建，但它是空的，即使我给它一点时间来加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T11:25:34.573

好的，所以第二个问题是由这部分引起的（我认为）

```
@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
int height) 
{
    Camera camera = Camera.open(); 
```

camera 应该是一个字段，而不是在每次调用 surfaceChanged 时创建。它现在工作正常。

编辑
实际上，拍照也可以。谢谢你的建议。

# ruby-on-rails - [0, 0] 的未定义方法 '<' :Array

> ID：11499850
> 
> 赞同：2
> 
> 时间：2012-07-16T07:29:38.090
> 
> 标签：ruby-on-rails, ruby

我是 Ruby 编程的初学者。我的程序是计算给定字符串中偶数长度的单词的数量。但它显示以下错误

**[0, 0] 的未定义方法 '<' :Array**

这是我的代码

```
def even(words, n)
   i = 0, m = 0
   while i < n do
       count = count + words[i].length
       if count%2 == 0 then
          m = m + 1
       end
       i = i + 1
  end
  return m
end
prinnt "Enter The String:"
s = gets.chomp
words = s.split()
n = words.length
x = even(words, n)
puts x 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:34:05.850

我认为你的问题在这里

```
i = 0, m = 0 
```

做了

```
i = 0
m = 0 
```

编辑：

也像 Kai König 所说的，如果你这样称呼它，它的意思是

```
" now's  the time".split        #=> ["now's", "the", "time"] 
```

[http://ruby-doc.org/core-1.9.3/String.html#method-i-split](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:57:44.873

这是我的做法：

```
'this is a string'.split.select{ |w| w.size % 2 == 0 }.size # => 3 
```

适用于`gets`：

```
gets.chomp.split.select{ |w| w.length % 2 == 0 }.size 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T15:12:55.147

其他人已经向您解释了您的代码中的*直接*错误是什么。但是，更大的问题是您的代码不是惯用的 Ruby 代码。

惯用代码如下所示：

```
puts gets.split.map(&:length).count(&:even?) 
```

而且，正如你所看到的，你根本不可能*犯*像你犯的那样的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:39:58.250

试试看

```
 def even(words, n)
     i = 0
     m = 0
     count = 0
      while i < n do
        count = count + words[i].length
        if count%2 == 0 then m = m + 1 end
        i = i + 1
      end
      return m
      end
      print "Enter The String:"
      s = gets.chomp
      words = s.split("")
      n =  words.length
      #p n 
      x = even(words, n)
      puts x 
```

# c++ - 带有 std::enable_if 的模棱两可的偏特化

> ID：11499863
> 
> 赞同：6
> 
> 时间：2012-07-16T07:30:14.210
> 
> 标签：c++, templates, partial-specialization, disambiguation

我在以下情况下遇到问题：

```
#include <iostream>
#include <type_traits>

#define TRACE void operator()() const { std::cerr << "@" << __LINE__ << std::endl; }

template <class T>
struct check : std::true_type {};

template <class F, class T, class Check=void>
struct convert {
  TRACE;// first case
};

template <class F, class T>
struct convert<F*, T, typename std::enable_if<(check<F>::value && check<T>::value), void>::type> {
  TRACE; // second case
};

template <class T>
struct convert<int*, T, typename std::enable_if<(check<T>::value), void>::type> {
  TRACE; // third case
}; 
```

然后

```
convert<int*, int> c;
c(); 
```

将报告 g++-4.5、g++-4.6、g++-4.7 和 clang++-3.1 中的模棱两可的类模板实例化（全部带有选项 -std=c++0x）

但是，如果我将第三种情况的支票替换为

```
typename std::enable_if<(check<int>::value && check<T>::value), void>:type 
```

然后 clang++-3.1 工作正常。

是编译器错误还是标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:04:18.920

在这个问题中出现了类似的[问题](https://stackoverflow.com/q/1180325/819272)

因为第二个和第三个部分特化都与 匹配`convert<int*, int>`，所以编译器将构建两个测试函数模板，其中两个部分特化的类模板作为参数提供：

```
template <class F, class T> 
void fun2(convert<F*, T, typename std::enable_if<
    (check<F>::value && check<T>::value), void>::type>
);

template <class T> 
void fun3(convert<int*, T, typename std::enable_if<
    (check<T>::value), void>::type>
); 
```

然后编译器通过将一个函数的一组转换参数交叉替换到另一个函数模板来检查一个函数模板是否比另一个函数模板更专业，并检查是否可以推导出所有模板参数。如果这两种方式都有效，那么任何一个功能都不会比另一个更专业，并且会产生歧义。

这里的问题是，这`std::enable_if< (check<F>::value && check<T>::value), void>::type>`是一个非演绎的上下文，在这个论证演绎游戏中不会被评估。`::`编译器仅检查通用表达式是否具有相同的结构形式（推导定界符前面的任何内容），而不检查它们是否具有相同的值（`true_type`在这种情况下）。

只有在第三个部分特化中增加额外的部分，第三个特`check<int>::value`化才会比第二个更特化。另一个“修复”是手动放入`true_type`参数`Check`，但是，编译器在参数推导期间不会为您执行此操作。

**更新**：作为对 Johannes Schaub - litb 的回应：你是对的，`std::check<int>`放入的代码`std::enable_if`无法在 Ideone 和 MSVC++ 2010 上编译。这是怎么回事？根据**14.8.2.4 第 11 条 [temp.deduct.partial]**

> 在大多数情况下，所有模板参数都必须具有值才能成功进行推导，但出于偏序目的，模板参数可能会保持没有值，前提是它未用于偏序的类型。[ 注意：在非推导上下文中使用的模板参数被视为已使用。— 尾注] [示例：
> 
> ```
> template <class T> T f(int); // #1
> template <class T, class U> T f(U); // #2
> void g() {
>     f<int>(1); // calls #1
> } 
> ```

对于 OP 的代码，我将其解释为未使用的参数将是`std::enable_if`表达式。我的猜测是 Clang 3.1 做了一些 Ideone 和 MSVC++ 不做的表达式匹配。我不明白在上述引用的上下文中，这是否是标准要求的：应该只忽略未使用的模板参数，还是忽略未使用的模板表达式？标准中的其他部分出现了诸如“不要求实现使用英勇的努力”之类的短语。也许 Clang 在这方面比 MSVC++ 或 Ideone 更英勇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:44:40.263

你有

```
template <class F, class T>
struct convert<F*, T, typename std::enable_if<(check<F>::value && check<T>::value), void>::type> {
  TRACE; // second case
}; 
```

和

```
template <class T>
struct convert<int*, T, typename std::enable_if<(check<T>::value), void>::type> {
  TRACE; // third case
}; 
```

当您使用`convert<int*, int> c;`时，编译器无法选择他需要使用的结构，因为它们都适合。

请注意，您`check<F>::value`在第一个模板中使用。这意味着即使您通过了例如 an `int *`，您也将拥有`check<int>::value`，而不是`check<int *>::value`

# javascript - JavaScript 不能在不同的域中工作？

> ID：11499869
> 
> 赞同：0
> 
> 时间：2012-07-16T07:30:34.923
> 
> 标签：javascript, asp.net-mvc

我的项目在两个域中。当我从本地主机域脚本打开它时，它不起作用。例如，在其他域 192.168.1.3/myProject 中，脚本正在运行，但在我的本地主机（例如 localhost:49416/myProject）中，脚本无法运行。可能是什么问题呢？

像this.Css这样的脚本和css引用。

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.7.2.min.js")" type="text/javascript"></script> 
```

对于 js 文件，会出现此错误：在 localhost 中加载资源失败。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:35:04.237

首先检查 Javascript 是否正确加载。您可以通过在网络选项卡中查看源代码或更好地使用 Firebug (FF) 或开发人员工具（IE、Chrome）来做到这一点。它会告诉您资源是否已正确加载（状态代码 200）。

如果您确定 JS 已正确嵌入，请检查是否为 localhost 启用了 Javascript。尤其是 Internet Explorer，我相信默认情况下不允许从 localhost 运行脚本。

如果仍然有问题，请检查代码中是否存在脚本错误。例如在控制台下的 Firebug。

# php - 在我的 MVC 框架中应该在哪里使用 ajax？

> ID：11499870
> 
> 赞同：1
> 
> 时间：2012-07-16T07:30:37.597
> 
> 标签：php, json, model-view-controller

> **可能重复：**
> [MVC ajax 调用 - 在哪里处理它们？](https://stackoverflow.com/questions/2016973/mvc-ajax-calls-where-to-handle-them)

我有一个框架，整体视图如下：
![在此处输入图像描述](../Images/525b847979eccf38ed08f4b8632b6653.png) 这张图片来自 PHP 5 社交网络书，我没有这`Page Object`部分。我对简单的 javascript/jQuery 语句没有任何问题，但是当涉及到我需要获取数据的 JSON 或 Ajax 时，我感到很困惑！因为在 JSON 中我们需要放置 url 部分。在 MVC 中没有直接调用。一切都将到达前端控制器（index.php）。
现在的问题是如何在 MVC 中处理 JSON 或 Ajax 请求？我应该在另一个目录中创建单独的 json php 文件来处理不是面向对象的数据库连接等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:40:24.810

您应该使用参数对前端控制器进行“特殊”调用，该参数指定它是帖子中的 ajax 调用并以不同方式处理它，例如：

```
if($_POST['retrieve_postaction']){
   //general action 
   //load object and do stuff
   if($_POST['is_ajax']){
       //format data for an ajax call and return it
      echo json_encode($array_object);
      exit;}
   else {
      //normal action
     }
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:40:10.550

我不知道您使用的是哪个框架，但例如 Zend Framework 有一种机制允许您修改操作返回其数据的格式。在 Zend Framework 中，这称为上下文切换。

您可能想看看他们是如何实现该功能的，看看您是否可以将其集成到您的 mvc 中或在您自己的 mvc 中对其进行建模。

[http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch](http://framework.zend.com/manual/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.contextswitch)

- - 编辑 - -

听起来您的框架没有委托给控制器？如果是这种情况，我将实施您在问题中暗示的解决方案，并实施仅由您的 Ajax/REST 调用使用的脚本。

- - 编辑 - -

因此，您的前端控制器将请求分派给控制器，在这种情况下，我建议在控制器级别实现上下文切换，这将使用您在标准请求中使用的相同 url 工作，但要么读取

a) HTTP 标头信息以查看您要求的响应类型，您将在 AJAX 请求中设置。

b）在 url 中发送另一个参数，类似这样的参数`format=json`将切换您的操作的返回类型。

我建议阅读我发布的链接中的信息，因为它可能会使事情变得更清楚一些。

# image-processing - 分割大图像以进行并行处理

> ID：11499872
> 
> 赞同：4
> 
> 时间：2012-07-16T07:30:42.867
> 
> 标签：image-processing, parallel-processing

假设我有一个非常大的位图，它应该被分成更小的块以进行并行处理。但在某些情况下，应考虑来自相邻区域的边缘像素。我应该简单地添加一些重叠/填充还是还有其他事情要做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:28:28.427

在与其他子块相邻的一侧扩展子块是并行处理中的常见模式。它被称为*光晕*图案上的*鬼细胞*图案。基本上，您需要处理模具所需的尽可能多的鬼细胞/光晕像素，并在每次处理迭代开始时传达它们的值。还可以采用两倍大的光环区域，从而将通信次数减少一半（提高高延迟网络的性能）。每个并行进程将其部分子块发送到其邻居的光环区域（反之亦然）的过程称为*光环交换*。大多数并行处理库（例如 MPI）提供有助于执行这些光环交换的例程（例如结合**`MPI_Cart_shift()``MPI_Sendrecv()`在 MPI 中）。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T09:08:05.860

是的，重叠是最常见的解决方案。请注意，在图像的物理边缘上，您将不得不做一些更聪明的事情，因为不会从相邻的瓷砖中获取任何像素。常见的解决方案是通过图像内容的连续性来镜像或延长，除非您不介意输出图像小于输入图像。**

# sql - Hive hql：聚合成 MAP 数据类型

> ID：11499877
> 
> 赞同：0
> 
> 时间：2012-07-16T07:31:42.930
> 
> 标签：sql, hadoop, hive

我有一个名为 graph_table 的表，有 2 列

```
node_id INT  
neighbour_id INT 
```

我需要运行以下选择查询

```
SELECT node_id, aggregater_func( neighbour_id ) as neighbourhood  FROM graph_table GROUP BY node_id 
```

aggregater_func 将邻居聚合成一个`MAP <INT(neighbour_id), INT(frequency)>`

这个 aggregater_func 应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-02T08:13:46.307

你不能用原生 HQL 做到这一点。

但是使用 Facebook 的 PrestoDB，您可以获得直方图功能的优势

来自[https://prestodb.io/docs/current/functions/aggregate.html](https://prestodb.io/docs/current/functions/aggregate.html)：

> histogram(x) → map 返回一个映射，其中包含每个输入值出现的次数的计数。

或者它可能存在于 UDF 中以在 HQL 上使用地图，例如[https://github.com/klout/brickhouse](https://github.com/klout/brickhouse)。我不是很了解，但你可以试一试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T07:53:24.893

尝试以下操作：

```
select node,SUM(neighbour) 
    from #neighbourhood 
    group by node 
```

# android - 强制滚动/弹跳边缘效果 Horizo ntalScrollView

> ID：11499878
> 
> 赞同：2
> 
> 时间：2012-07-16T07:31:44.547
> 
> 标签：android, horizontalscrollview

我想让我的 Horizo​​ntalScrollView 可以滚动，即使它没有足够的项目。如果我在 ScrollView 上说 5 个图像，它会滚动。但是当我只有 3 个时，它没有。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:35:27.047

据我了解，您是否希望始终启用 overScrollMode，在这种情况下，只需添加`android:overScrollMode="always"`您定义的滚动视图 xml：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:overScrollMode="always"> 
```

# php - 将输入中的特殊字符匹配到存储在数据库中

> ID：11499880
> 
> 赞同：-1
> 
> 时间：2012-07-16T07:31:51.787
> 
> 标签：php, mysql, diacritics

**我按实体（例如föo** => **`f&ouml;o`**）在数据库中保存了一些德语字符。

现在我有一个查询，它只使用`LIKE %search_word%`. 这`search_word`可能是一个包含特殊德语字符的输入。你能建议最有效的方法来比较我`search_word`和数据库中存储的方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:36:32.697

`search_word`在将其放入查询之前使用相同的实体转换。

或者您可以停止保存实体转换的数据，并在需要插入它们时进行转换

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:39:58.077

也许这已经是一个有效的答案：[MySQL DB 选择带有和不带有变音符号的记录。例如：'.. where something = FÖÖ'](https://stackoverflow.com/questions/6279374/mysql-db-selects-records-with-and-without-umlauts-e-g-where-something-f)

您必须确保字符串编码（例如 UTF8）和您的（MySQL）数据库字符集匹配。查看排序规则的作用以及 utf8_bin 是否有帮助。

# gwt - Tabpanel child remove 在 Bootstrap GWT 中不起作用

> ID：11499884
> 
> 赞同：1
> 
> 时间：2012-07-16T07:32:12.443
> 
> 标签：gwt, twitter-bootstrap

在将 Bootstrap 用于 GWT 时，我尝试使用删除功能从 TabPanel(Parent) 中删除一个选项卡(Child)，但它不起作用。

我也尝试使用 TabPanel ->TabLink->TabPane 组合，但这无济于事

```
<b:TabPanel tabPosition="left" ui:field="tabPanel">
    <b:Tab  ui:field="tabA" heading="tabA"></b:Tab>
    <b:Tab  ui:field="tabB" heading="tabB"></b:Tab>
    <b:Tab  ui:field="tabC" heading="tabC"></b:Tab>
</b:TabPanel>

tabPanel.remove(tabA);//doesnt work 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:54:48.953

我在他们的[GitHub 问题](https://github.com/gwtbootstrap/gwt-bootstrap/issues/184)中报告了这个问题，他们在两个小时内修复了它。

惊讶！

迪帕克

# wcf-ria-services - RIA 服务项目的 TeamCity 构建失败

> ID：11499886
> 
> 赞同：1
> 
> 时间：2012-07-16T07:32:21.077
> 
> 标签：wcf-ria-services, teamcity-7.0

我在我的解决方案中的一个项目中使用 RIA 服务，它可以在任何开发机器上完美构建。我还检查了构建顺序，看起来也不错。

我还有一个 64 位的 Windows 7 Server，我在其中安装了 TeamCity 7.0.3。当我运行构建代理时，相同的解决方案无法构建，这是构建日志文件中的一个条目 -

[CreateRiaClientFilesTask] C:\Program Files (x86)\MSBuild\Microsoft\Silverlight\v5.0\Microsoft.Ria.Client.targets(303, 5)：必须先构建“xxx.csproj”项目，然后才能构建客户端代理类被生成。

但是，也会生成客户端代理类。我不明白问题出在哪里。我尝试在构建步骤中使用 MSBuild 和 VS sln 作为“Runner Type”。

注意：VS 2010（以及其他必要的 SDK 等）已安装在服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:21:44.843

在解决方案文件 (*.sln) 中，将 RIA 服务器项目“xxx.csproj”移动到所有客户端项目之前。

这样，服务器构建是为“默认目标”而不是“BuiltProjectOutputGroupDependencies”进行的。

# linux - 如何查看是否有任何计时器线程正在运行

> ID：11499891
> 
> 赞同：0
> 
> 时间：2012-07-16T07:32:34.880
> 
> 标签：linux, timer, posix

我编写了一个程序来在 LINUX 中使用`timer_create`和`timer_settime`.

如果我在删除和停止此计时器之前终止进程会发生什么？即使从 main 中退出，计时器也会保持活动状态。

如果是，我如何检查在杀死主后是否有任何此类计时器仍在运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:38:07.037

[timer_create(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)的手册页说：

```
 Timers are not inherited by the child of a fork(2), and are disarmed and
   deleted during an execve(2). 
```

因此，在创建进程退出或终止（例如被杀死）之后，您不应该担心计时器。

在 Linux 上，您可以解析`/proc/timer_list`和`/proc/timer_stats`查询内核有关计时器的信息。

[管理进程](http://en.wikipedia.org/wiki/Process_%28computing%29)特定资源（如文件描述符、地址空间、计时器等）是内核的责任。相信内核，它会适当地释放这些资源，如[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)和[execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)手册页中所述。

阅读有关[linux 内核](http://en.wikipedia.org/wiki/Linux_kernel)角色和[系统调用](http://en.wikipedia.org/wiki/System_call)的更多信息。

# c#-4.0 - 如何正确读取文本文件中的列

> ID：11499893
> 
> 赞同：2
> 
> 时间：2012-07-16T07:32:45.733
> 
> 标签：c#-4.0, text-files, csv

我试图从文本文件中读取数据并将其加载到数据集中，但下图中的不同列只是一个长列。我想将数据作为 7 列返回（与下图中显示的方式相同）。

这是正在使用的代码，

```
public DataSet LoadTxtFile(int numberOfRows)
    {
        DataSet ds = new DataSet();
        //try
        //{
            // Creates and opens an ODBC connection
            string strConnString = "Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" + this.dirCSV.Trim() + ";Extensions=asc,csv,tab,txt;Persist Security Info=False";
            string sql_select;
            OdbcConnection conn;
            conn = new OdbcConnection(strConnString.Trim());
            conn.Open();

            //Creates the select command text
            if (numberOfRows == -1)
            {
                sql_select = "select * from [" + this.FileNevCSV.Trim() + "]";
            }
            else
            {
                sql_select = "select top " + numberOfRows + " * from [" + this.FileNevCSV.Trim() + "]";
            }

            //Creates the data adapter
            OdbcDataAdapter obj_oledb_da = new OdbcDataAdapter(sql_select, conn);

            //Fills dataset with the records from CSV file
            obj_oledb_da.Fill(ds, "csv");

            //closes the connection
            conn.Close();
        //}
        //catch (Exception e) //Error
        //{
            //MessageBox.Show(e.Message, "Error - LoadCSV",MessageBoxButtons.OK,MessageBoxIcon.Error);
        //}
        return ds;
    } 
```

![文本文件示例数据](../Images/ecabaf4f038c9761186055eb64ab5f38.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:10:08.593

我通常采用一种简单的解决方案，即访问文件，读取所有行，在循环中拆分行字符串，创建并填充新的数据行，最后将数据行添加到数据表中：

```
string[] records = File.ReadAllLines(path);
foreach(string record in records)
{
  DataRow r = myDataTable.NewRow();
  string[] fields = record.Split('\t');
  /* Parse each field into the corresponding r column
   * ....
   */
  myDataTable.rows.Add(r);
} 
```

我还找到了有关如何使用 OleDb 连接和架构信息文件访问 CSV 文件的解决方案。我从来没有使用过这种方法。

参考：

*   [File.ReadAllLINEs()](http://msdn.microsoft.com/it-it/library/s2tte0y1.aspx)。
*   [String.Split()](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)。
*   [Stackoverflow 与 OleDb 连接相关的问题](https://stackoverflow.com/questions/471039/cant-separate-text-file-by-delimiter)。
*   [MSDN 架构信息文件](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353(v=vs.85).aspx)。

# android - 如何从 android 手机中提取联系人并将其存储/导入到模拟器中的应用程序中？

> ID：11499898
> 
> 赞同：0
> 
> 时间：2012-07-16T07:32:58.673
> 
> 标签：android, import, android-emulator, store, contacts

如何从安卓手机中提取联系人并存储或导入应用程序以显示联系人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:50:16.327

Android 使用内容提供程序存储方法存储联系人。这样它的数据就可以在不同的应用程序之间共享。此解决方案将为您提供帮助 -[单击此处](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)

# encoding - nfs编码问题

> ID：11499904
> 
> 赞同：0
> 
> 时间：2012-07-16T07:33:19.743
> 
> 标签：encoding, nfs, cifs

我有一个使用 cifs 和 nfs 导出文件系统的 Celerra NS-20。这些文件是由 Windows 机器编写的。

当我在 linux 中挂载 cifs 时，所有文件名特殊字符都可以，但是当挂载 nfs（相同文件系统）时，文件名特殊字符被破坏。

有没有办法挂载改变编码的文件系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:29:09.750

我们对新的 VNX 5300 也有同样的问题，解决方法是在 VNX 中启用 NFSv4 协议，默认情况下它只支持 v3。

为此，编辑：

/nas/server/slot_2/config

/nas/server/slot_3/config

并将行设置为：

nfs 配置 hivers=4

并重新启动数据移动器：

server_cpu server_2 -reboot -monitor

server_cpu server_3 -reboot -monitor

# php - 动作对象被symfony 1.0中的组件最后一个对象覆盖

> ID：11499908
> 
> 赞同：0
> 
> 时间：2012-07-16T07:33:52.400
> 
> 标签：php, orm, symfony1, propel

我正在处理 symfony 1.0 中的项目我在操作文件中创建了结果集，如下所示

```
$perform = new Criteria();
$perform->clearSelectColumns();
$perform->addSelectColumn(ProductionPeer::PREVIEW_DATE);
$perform->addSelectColumn(ProductionPeer::OPENED);
$perform->addSelectColumn(ProductionPeer::CLOSED);
$perform->addSelectColumn(ProductionPeer::PERFORMANCES);
$perform->addSelectColumn(VenuePeer::NAME);

$perform->addJoin(ProductionPeer::VENUE_ID, VenuePeer::ID, Criteria::LEFT_JOIN);
$perform->add(ProductionPeer::TITLE_ID,3);

$this->performRsCnt = ProductionPeer::doCount($perform);

if($this->performRsCnt > 0)
{
    $this->performRs = ProductionPeer::doSelectRS($perform);
    $this->performRs->setFetchmode(ResultSet::FETCHMODE_ASSOC);
} 
```

当我 print_r($this->performRs) 本身运行时，它会给出所需的输出

现在的问题是我创建了一个包含在成功文件中的实用文件，而在部分文件中，部分文件中包含了组件。当我在包含组件代码之前打印我的操作对象（即 $performRs）时，它会提供所需的输出，但是当我在包含代码之后打印时，它会被组件中的最后一个结果集覆盖

下面是组件的示例代码

组件文件代码

```
class defaultComponents extends sfComponents
{

      public function executeMediaDetail()
      {
           $mediaHardeep = new Criteria();
           $mediaHardeep->addSelectColumn(PhotosPeer::PHOTO);
           $mediaHardeep->addSelectColumn(PhotosConcernsPeer::PHOTOS_ID);
           $mediaHardeep->addJoin(PhotosConcernsPeer::PHOTOS_ID, PhotosPeer::ID, Criteria::LEFT_JOIN);
           $mediaHardeep->add(PhotosConcernsPeer::REF_ID, $this->ref_id);
           $mediaHardeep->add(PhotosConcernsPeer::TYPE, $this->type);
           $imgRsCntHardeep = PhotosConcernsPeer::doCount($mediaHardeep);
        }
    } 
```

组件包含部分代码

```
<?php print_r($performRs);?> //desired output
   <!-- start media section -->
        <?php include_component('default', 'mediaDetail',array('ref_id' => $titleData['ID'], 'type' => 'title','abc123'=>$abcRs));?>
    <!-- end media section -->
   <?php print_r($performRs);?> //gives the output of $imgRsCntHardeep which is in component 
```

我已多次检查我的代码，并确保代码不包含任何类型的错误，如变量不匹配、将变量传递给部分或组件、多次使用变量名。我希望我能从这里找到解决方案，因为我从星期六开始解决这个问题

# r - R在绘图上翻转XY轴

> ID：11499909
> 
> 赞同：5
> 
> 时间：2012-07-16T07:33:54.083
> 
> 标签：r, plot, flip

这似乎是一个微不足道的`R`问题，但我没有找到任何令人信服的解决方案。我想翻转 X 轴变为 Y 的情节，反之亦然。在 boxplot 中有一个`horiz="T"`选项，但在`plot()`.

这就是我的情节：

```
plot(rm, type="l", main="CpG - running window 100")

> str(rm)
 num [1:43631] 0.667 0.673 0.679 0.685 0.691 ... 
```

![这就是我所拥有的](../Images/5326bcdaeea8840d2b98beca4697cfe3.png)

我想得到这个：

![在此处输入图像描述](../Images/99eb4858b0e401bade581a26de184d12.png)

感谢您的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:59:35.420

我认为问题是因为情节没有明确的索引。尝试以下操作：

```
set.seed(1)
a = rnorm(200) # like your `rm` -- bad name for an object, by the way
plot(a, type="l", main="rnorm(200)") # index automatically added 
```

这与您所拥有的相似。它也相当于`plot(1:length(a), a, ...)`where `1:length(a)`is your`x`和`a`is your `y`。

![在此处输入图像描述](../Images/0ac274c3426ecb736d43e8217132bbd6.png)

记住以上几点，我们可以像这样翻转您的图表：

```
# index specified, and X-Y swapped
plot(a, 1:length(a), type="l", main="rnorm(200)") 
```

![在此处输入图像描述](../Images/4b809f25964ac58a2d6cbdc5955b7544.png)

# flash - 安装 Adob e AIR 时出错

> ID：11499912
> 
> 赞同：1
> 
> 时间：2012-07-16T07:34:19.357
> 
> 标签：flash, apache-flex, air, adobe, salesforce

*   我尝试了很多次来安装 Adob​​e AIR。正常：错误说...

> **安装 Adob​​e AIR 时出错。您的管理员可能不允许安装。请联系您的管理员。**

然后，我以管理员身份运行，但我收到相同的错误消息...

*   我再次下载安装程序，但有相同的错误消息...
*   我在另一台笔记本电脑上使用相同的安装程序安装，但我收到相同的错误消息...

我在 Win XP SP3 专业版。（另一台笔记本电脑：XP SP3 家庭版）

下载 AIR[链接](http://get.adobe.com/air/otherversions/)

这是日志……没有命令行？？

> [2012-07-16:14:23:25] 运行时安装程序从 Windows XP x86 上的 3.3.0.3670 版本开始
> [2012-07-16:14:23:25]**命令行是：**
> [2012-07-16:14: 23:25] 未检测到已安装的运行时
> [2012-07-16:14:23:28] 开始运行时安装。安装运行时版本 3.3.0.3670
> [2012-07-16:14:23:28] 在 c:\docume~1\admini~1\locals~1\temp\air1fb.tmp\setup.msi 使用 guid {65CB4C08 安装 msi -C47B-4A7E-A6A4-50C06ADA5FC6}
> [2012-07-16:14:23:28] msi 安装操作期间发生错误；开始回滚：[ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1601" errorID=0]
> [2012-07-16:14:23:28] 回滚安装 c:\docume~ 1\admini~1\locals~1\temp\air1fb.tmp\setup.msi
> [2012-07-16:14:23:
> [2012-07-16:14:23:28] 由于错误退出：[ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="1601" errorID=0]
> [2012-07-16: 14:23:30]运行时安装程序以退出代码7结束

这是相关[链接](https://stackoverflow.com/questions/11416258/error-installing-air-app)，但也没有意义。

* * *

**[-已解决-]**
**解决方案**：要检查 Windows Installer 服务是否设置为禁用值 单击开始，在开始搜索框中键入 services.msc 并按 Enter。
在服务（本地）列表中，右键单击 Windows Installer，然后单击属性。
如果启动类型下拉列表设置为禁用值，请从启动类型下拉列表中选择手动选项。
单击标题服务状态下方的开始按钮，然后单击确定。
然后尝试重新安装...

信用：[微软](http://answers.microsoft.com/en-us/windows/forum/windows_vista-windows_programs/error-1601-windows-installer-is-not-accessible/08dce679-496d-43f4-a4b5-bb467800bb90)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-13T22:34:22.433

没有一个解决方案对我有用。查看安装日志，我发现每次尝试安装 Adob​​e Air 的最新更新时都会出现错误 1603 和 1605。自从 1.x 系列以来，我已经有好几年没有遇到过这个问题了，但在最新的 14.x 版本上，麻烦就开始了。解决方法是使用Microsoft 不再提供的**Windows Installer Cleanup Utility ，但谢天谢地，MajorGeeks.com 和 Softpedia.com 将其保存在他们的档案中。**它只为 XP 和 Vista 设计。因此，如果您有较新版本的 Windows，除非您正在寻找问题，否则请在其他地方寻找解决方案。总之，长话短说，我删除了 Adob​​e Air 的条目，突然间我所有的安装问题都解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:50:10.890

它可能与 Windows Installer 服务有关。

这是类似的问题报告：[http ://forums.adobe.com/thread/42878](http://forums.adobe.com/thread/42878)

试试这里的建议：http: [//answers.microsoft.com/en-us/windows/forum/windows_vista-windows_programs/error-1601-windows-installer-is-not-accessible/08dce679-496d-43f4-a4b5-bb467800bb90](http://answers.microsoft.com/en-us/windows/forum/windows_vista-windows_programs/error-1601-windows-installer-is-not-accessible/08dce679-496d-43f4-a4b5-bb467800bb90)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T02:30:55.467

我遇到了类似的问题，我的 Windows Installer 服务设置为手动，但它没有启动。我点击了开始按钮，然后我就可以安装 Adob​​e AIR。

# javascript - 如何使用幻灯片效果移动 div？

> ID：11499914
> 
> 赞同：1
> 
> 时间：2012-07-16T07:34:42.713
> 
> 标签：javascript, jquery, effects

此代码切换 frm01 的可见性

```
$(document).ready(function () {
    $("#reg").click(function () {
        if ($("#frm01").is(":visible")) $("#frm01").hide("slide", {
            direction: "down"
        }, 1000);
        else $("#frm01").show("slide", {
            direction: "down"
        }, 1000);
    });
}); 
```

但是底层 div（div bellow frm01）会瞬间向上/向下移动，没有滑动效果。
我也想使用幻灯片效果来移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T07:41:21.410

如果它是一个单独的 div，为什么不简单地将该 div 添加到 jquery 选择器中呢？

```
$(document).ready(function() {
    $("#reg").click(function () {
        if ($("#frm01").is(":visible"))
            $("#frm01,#otherdiv").hide("slide", { direction: "down" }, 1000);
        else
            $("#frm01,#otherdiv").show("slide", { direction: "down" }, 1000);
    });
}); 
```

或者，如果您只想为 div 的移动设置动画，请使用 jquery .animate() 函数。

```
$(document).ready(function() {
    $("#reg").click(function () {
        if ($("#frm01").is(":visible")) {
            $("#frm01").hide("slide", { direction: "down" }, 1000);
            $("#otherdiv").animate({margin-top: "50px"}, 1000);
        } else {
            $("#frm01").show("slide", { direction: "down" }, 1000);
            $("#otherdiv").animate({margin-top: "100px"}, 1000);
        }
    });
}); 
```

更多关于动画 CSS 变化[的信息在这里](http://api.jquery.com/animate/)

# c# - 触发 sql（更改类型列）

> ID：11499922
> 
> 赞同：0
> 
> 时间：2012-07-16T07:35:32.813
> 
> 标签：c#, mysql, sql, wpf, datagrid

我需要选择数据，最后我需要`date_payment`用`DateTime`to更改列`Text`，请帮助...

我写这个查询

```
SELECT r.id, user_name, user_phone, date_create, REPLACE( date_payment,  '0000-00-00 00:00:00',  'No payment' ) , payment_method, amount, rs.name_ru
FROM request AS r, request_status AS rs
WHERE r.status = rs.id
LIMIT 0 , 30 
```

在 sql 控制台查询是有效的，并且`date_payment`是 replase，但是：

```
MySqlCommand cmd = new MySqlCommand(query, conn);

        dt.Load(cmd.ExecuteReader());

        GetList();

        source.DataSource = dt;
dataGrid1.ItemsSource = source; 
```

那么 datagrid 中的 column(date_payment) 为空 - 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:03:11.380

您的计算列没有任何名称。在您的程序中添加“AS updated_date_payment”关键字并请求“updated_date_payment”列：

```
SELECT r.id, user_name, user_phone, date_create, REPLACE( date_payment,  '0000-00-00 00:00:00',  'No payment' ) AS updated_date_payment, payment_method, amount, rs.name_ru
FROM request AS r, request_status AS rs
WHERE r.status = rs.id
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T08:17:49.367

使用以下代码：

```
SELECT r.id, user_name, user_phone, date_create, REPLACE( date_payment,  '0000-00-00 00:00:00',  'No payment' ) AS date_payment, payment_method, amount, rs.name_ru
FROM request AS r, request_status AS rs
WHERE r.status = rs.id
LIMIT 0 , 30 
```

在这里你必须使用***AS***关键字。否则，它会将 *REPLACE(date_payment, '0000-00-00 00:00:00', 'No payment' )* 的列名返回为*（无列名）*

# jquery - JQuery - 复制拖放对象

> ID：11499923
> 
> 赞同：1
> 
> 时间：2012-07-16T07:35:34.380
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

当我拖动我提议的项目时，克隆助手被拖动，原始对象留在原位，但之后无法再次拖动。我需要能够两次拖动同一个对象。我该怎么做？

```
$('.drag').draggable({
helper: 'clone',
snap: '.drop',
grid: [60, 60],
revert: function(droppable) {
    if (droppable === false) {
        return true;
    }
    else {
        return false;
    }
}
});

 $('.drop').droppable({
     drop: function(event, ui) {
        ui.draggable.fadeOut(1000);
     }
});

$('.drag').hover(
  function() {
    $(this).stop().animate({
    opacity: "0.8"
    });
}, function() {
    $(this).stop().animate({
        opacity: "1"
    });
});

$('.drop').droppable({
    drop: function(event, ui) {
        if (ui.draggable[10, 10].id) {
            $(this).append($(ui.helper).clone().draggable());
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T03:37:04.820

这是工作代码的jsfiddle：

[http://jsfiddle.net/qfywP/2/](http://jsfiddle.net/qfywP/2/)

问题出在这一行：

`$(this).append($(ui.helper).clone().draggable())`

您应该首先克隆助手，将其附加到 DOM，然后使其可拖动：

`ui.helper.clone().appendTo($(this)).draggable()`

您还应该知道您的代码包含在 if 语句中`if (ui.draggable[10, 10].id) {}`。这没有返回 true，因此您的代码永远不会被执行。

我还对您的代码进行了一些春季大扫除，因为您有一些冗余。`$('.drop').droppable()`被声明了两次，而你只需要一次。

# iphone - UIImage imageNamed：在蓝色引用的 Xcode 文件夹中找不到图像

> ID：11499925
> 
> 赞同：17
> 
> 时间：2012-07-16T07:35:43.080
> 
> 标签：iphone, ios, xcode, cocoa-touch

在我的 Xcode 项目中，我有一个蓝色引用文件夹，它指向一个包含图像的文件夹。

蓝色文件夹的好处是我不必手动将文件添加到 Xcode。因此，当我将新图像添加到文件夹时，它会自动显示在 Xcode 中，但是，当我尝试使用代码从代码中引用文件时

```
[UIImage imageNamed:@"myFileFromTheBlueFolder"]; 
```

尽管将顶级文件夹添加到目标中，但它找不到图像。:-(

当我来自蓝色文件夹时，我是否必须以不同的方式引用图像，恕我直言，这完全违背了拥有这样一个文件夹的目的。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-05-30T06:34:17.737

Kevin 关于提供的内存优化是正确的`+[UIImage imageNamed:]`，但绝对可以访问蓝色文件夹（文件夹引用）中的图像。您所要做的就是将文件夹名称添加到图像名称中。例如：

您的资源是这样组织的：

```
Icons (blue folder / folder reference)
  |__camera.png
  |__checkmark.png
Shared (yellow folder / xcode group)
  |__back.png
  |__logo.png 
```

您可以像这样访问图像：

```
[UIImage imageNamed:@"Icons/camera"];
[UIImage imageNamed:@"Icons/checkmark"];

[UIImage imageNamed:@"back"];
[UIImage imageNamed:@"logo"]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-16T07:44:12.743

我想问题是“蓝色文件夹”（例如文件夹引用，而不是组）被逐字复制到您的应用程序资源中。换句话说，它并没有像通常的资源那样被扁平化。如果您检查您构建的产品，您可能会在所有正常资源旁边看到文件夹本身，并且文件夹中的所有内容仍在文件夹中。

因此，`+[UIImage imageNamed:]`找不到图像，因为它不会递归到子目录中。您可以使用`-[NSBundle pathForResource:ofType:inDirectory:]`来获取资源的路径并将其传递给`+[UIImage imageWithContentsOfFile:]`，但这会丢弃具有的内存优化`+imageNamed:`（例如，它缓存使用过的图像并丢弃未使用的图像的位置）。

或者，您可以停止使用文件夹引用。或者，您可以从资源构建阶段删除文件夹引用，并添加一个 shell 脚本构建阶段，将其内容复制到您构建的产品中。

* * *

## 回答 #3

> 赞同：-10
> 
> 时间：2012-07-16T07:45:44.230

写下图像的完整名称。

```
[UIImage imageNamed:@"myFileFromTheBlueFolder.png"]; 
```

还要记住不区分大小写的名称。

# java - API 或代码：Hibernate 3 和 4 之间的区别？

> ID：11499929
> 
> 赞同：8
> 
> 时间：2012-07-16T07:36:06.310
> 
> 标签：java, hibernate

我已经粘贴了**Hibernate 3**配置文件、SessionFactory 类来配置这个 config.xml 和一个带有 JPA 注释的 bean。我想知道如果我使用的是**Hibernate 4**，那么代码级别的上下文会发生什么变化，或者外行语言的非常广泛的差异或进步。

> 休眠.cfg.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
        <property name="hibernate.connection.url">jdbc:oracle:thin:@192.168.2.144:1521:xe</property>
        <property name="hibernate.connection.username">prateek</property>
        <property name="connection.password">prateek</property>
        <property name="connection.pool_size">1</property>
        <property name="hibernate.dialect">org.hibernate.dialect.OracleDialect</property>
        <property name="show_sql">true</property>
        <property name="hbm2ddl.auto">create</property>
        <mapping class="com.vaannila.domain.User1" />
    </session-factory>
</hibernate-configuration> 
```

> 建立连接的静态java类（SessionFactory Helper）

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class SessionFactoryHelper {
    private static final SessionFactory sessionFactory;

    static {
        try {            
            /*
             * Build a SessionFactory object from session-factory configuration 
             * defined in the hibernate.cfg.xml file. In this file we register 
             * the JDBC connection information, connection pool, the hibernate 
             * dialect that we used and the mapping to our hbm.xml file for each 
             * POJO (Plain Old Java Object).
             * 
             */
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable e) {
            System.err.println("Error in creating SessionFactory object." 
                + e.getMessage());
            throw new ExceptionInInitializerError(e);
        }
    }

    /*
     * A static method for other application to get SessionFactory object 
     * initialized in this helper class.
     * 
     */
    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

> 豆类

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="USER1")
public class User1 {

    private Long id;
    private String name;
    private String gender;
    private String country;
    private String aboutYou;
    private Boolean mailingList;

    @Id
    @GeneratedValue
    @Column(name="USER_ID") 
    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name="USER_NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column(name="USER_GENDER")
    public String getGender() {
        return gender;
    }
    public void setGender(String gender) {
        this.gender = gender;
    }

    @Column(name="USER_COUNTRY")
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

    @Column(name="USER_ABOUT_YOU")
    public String getAboutYou() {
        return aboutYou;
    }
    public void setAboutYou(String aboutYou) {
        this.aboutYou = aboutYou;
    }

    @Column(name="USER_MAILING_LIST")
    public Boolean getMailingList() {
        return mailingList;
    }
    public void setMailingList(Boolean mailingList) {
        this.mailingList = mailingList;
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:03:03.753

## 休眠.cfg.xml

文件 hibernate.cfg.xml 很好。hibernate-configuration-3.0.dtd 中的版本仍然是 3.0 可能看起来令人困惑，但事实就是如此。DTD 未更新。也许您想使用以 hibernate 为前缀的名称，例如，`hibernate.show_sql`而不是`show_sql`. 可以从[文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#configuration-sessionfactory)中找到属性名称。通常使用的 DTD_location 是`http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd`（相对于 ..sourceforge...），但两者都应该工作。

## 构建会话工厂

正如您从[API](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/cfg/Configuration.html#buildSessionFactory%28%29)中看到的，buildSessionFactory 已被弃用。这是它在 4.x 中的构建方式：

```
Configuration conf = new Configuration();
conf.configure();
serviceRegistry = new ServiceRegistryBuilder().applySettings(conf.getProperties()).buildServiceRegistry();        
sessionFactory = configuration.buildSessionFactory(serviceRegistry); 
```

在文档中的许多地方，这仍然不是最新的。

## 注释实体

一般来说，不需要对 bean 类中的映射进行任何更改。原因是您使用的是普通的 JPA 映射，而且 Hibernate 3 是 JPA 规范中描述的实现。

# jsf-2 - 用于 jQueryUI 拖放的 JSF 自定义组件

> ID：11499931
> 
> 赞同：1
> 
> 时间：2012-07-16T07:36:12.317
> 
> 标签：jsf-2, custom-component

我正在学习构建 JSF 自定义组件，我想我可以尝试构建 jQuery 拖放的实现。所以我阅读了大部分内容，实际上可以构建一个足够简单的 Draggable 和 Droppable 组件，基本上可以生成正确的jQuery js 支持拖放的数量，直到我可以关联“可拖动”对象和“可放置”容器，并且几乎可以拖放东西。

这很简单，我的问题是如何获取被删除的“数据”，或者如何绑定到 jQuery 生成的 drop 事件......我知道这应该很容易，所以如果有人能指出我正确的方向（文档/代码示例）我将非常感激...

我将粘贴尽可能少的代码。

（如您所见，我可以绑定一个 ajax 事件。我只是不知道如何调用它。）。

蒂亚..

成分...

```
@FacesComponent(Draggable.COMPONENT_TYPE)
public class Draggable extends UIComponentBase  {
    public static final String COMPONENT_TYPE = "ar.com.easytech.Draggable";
    public static final String DEFAULT_RENDERER_TYPE = "ar.com.easytech.DraggableRenderer";
    public static final String COMPONENT_FAMILY = "javax.faces.Output";

    public String getFamily() {
        return COMPONENT_FAMILY;
    }

    public String getFor() {
        return (String) getStateHelper().eval(PropertyKeys.forVal);
    }

    ...

    protected enum PropertyKeys {
        forVal("for"), draggableSelector, revert, containTo;
        String c;

        PropertyKeys() {
        }

        PropertyKeys(String c) {
            this.c = c;
        }

        public String toString() {
            return ((this.c != null) ? this.c : super.toString());
        }
    }

    @Override
    public void encodeEnd(FacesContext facesContext) throws IOException {
        ResponseWriter writer = facesContext.getResponseWriter();

        String clientId = getClientId(facesContext);
        UIComponent targetComponent = findComponent(getFor());
        if(targetComponent == null)
            throw new FacesException("Cannot find component \"" + getFor());

        String target = targetComponent.getClientId();

        writer.startElement("script", null);
        writer.writeAttribute("id", clientId + "_s", null);
        writer.writeAttribute("type", "text/javascript", null);
        writer.write("$(function() {");
        writer.write("$( '#" + target.replace(":", "\\\\:") + "').draggable({");
        if (getRevert() != null) writer.write(" revert: '" + getRevert() + "', ");
        if (getContainTo() != null) writer.write(" containment: '" + getContainTo() + "',");
        writer.write("});");

        writer.write("});");
        writer.endElement("script");
    }

} 
```

Droppable.java

```
@FacesComponent(Droppable.COMPONENT_TYPE)
public class Droppable extends UIComponentBase implements ClientBehaviorHolder {
    public static final String COMPONENT_TYPE = "ar.com.easytech.Droppable";
    public static final String DEFAULT_RENDERER_TYPE = "ar.com.easytech.DroppableRenderer";
    public static final String COMPONENT_FAMILY = "javax.faces.Output";

    private final static String DEFAULT_EVENT = "drop";
    private static final Collection<String> EVENT_NAMES = Collections.unmodifiableCollection(Arrays.asList(DEFAULT_EVENT));

    public String getFamily() {
        return COMPONENT_FAMILY;
    }

    // Property: for
    public String getFor() {
        return (String) getStateHelper().eval(PropertyKeys.forVal);
    }

    ...

    protected enum PropertyKeys {
        forVal("for"), droppableSelector, activeClass, hoverClass, accept, tolerance, source;
        String c;

        PropertyKeys() {
        }

        // Constructor needed by "for" property
        PropertyKeys(String c) {
            this.c = c;
        }

        public String toString() {
            return ((this.c != null) ? this.c : super.toString());
        }
    }

    @Override
    public void queueEvent(FacesEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();

        if (isRequestSource(context)) {
            Map<String, String> params = context.getExternalContext()
                    .getRequestParameterMap();
            String eventName = params.get("javax.faces.behavior.event");
            String clientId = getClientId(context);

            AjaxBehaviorEvent behaviorEvent = (AjaxBehaviorEvent) event;

            if (eventName.equals("drop")) {
                String dragId = params.get(clientId + "_sourceId");
                String dropId = params.get(clientId + "_targetId");
                DragDropEvent dndEvent = null;
                String datasourceId = getSource();

                if (datasourceId != null) {
                    UIData datasource = (UIData) findComponent(datasourceId);
                    String[] idTokens = dragId.split(String
                            .valueOf(UINamingContainer
                                    .getSeparatorChar(context)));
                    int rowIndex = Integer
                            .parseInt(idTokens[idTokens.length - 2]);
                    datasource.setRowIndex(rowIndex);
                    Object data = datasource.getRowData();
                    datasource.setRowIndex(-1);

                    dndEvent = new DragDropEvent(this,
                            behaviorEvent.getBehavior(), dragId, dropId, data);
                } else {
                    dndEvent = new DragDropEvent(this,
                            behaviorEvent.getBehavior(), dragId, dropId);
                }

                super.queueEvent(dndEvent);
            }

        } else {
            super.queueEvent(event);
        }
    }

    @Override
    public Collection<String> getEventNames() {
        return EVENT_NAMES;
    }

    @Override
    public String getDefaultEventName() {
        return DEFAULT_EVENT;
    }

    @Override
    public void decode(FacesContext context) {

         if (context == null ) {
              throw new NullPointerException();
            }

            String clientId = getClientId(context);
            Map<String, String> requestParameterMap = context.getExternalContext().getRequestParameterMap();
            String value = (String) requestParameterMap.get(clientId);
            if (value == null || value.equals("") || !clientId.equals(value))
              return;
            ActionEvent actionEvent = new ActionEvent(this);
            queueEvent(actionEvent);
    }

    @Override
    public void encodeEnd(FacesContext context) throws IOException {

        ClientBehaviorContext behaviorContext =
                  ClientBehaviorContext.createClientBehaviorContext(context,this, DEFAULT_EVENT, getClientId(context), null);

        ResponseWriter writer = context.getResponseWriter();
        String clientId = getClientId(context);
        UIComponent targetComponent = findComponent(getFor());
        if(targetComponent == null)
            throw new FacesException("Cannot find component \"" + getFor());
        String target = targetComponent.getClientId();

        writer.startElement("script", null);
        writer.writeAttribute("id", clientId + "_s", null);
        writer.writeAttribute("type", "text/javascript", null);
        writer.write("$(function() {");
        writer.write("$( '#" + target.replace(":", "\\\\:") + "').droppable({");

        if (getActiveClass() != null) writer.write(" activeClass: '" + getActiveClass() + "',");
        if (getHoverClass() != null) writer.write(" hoverClass: '" + getHoverClass() + "',");
        if (getAccept() != null) writer.write(" accept: '" + getAccept() + "',");
        if (getTolerance() != null) writer.write(" tolerance: '" + getTolerance() + "',");

        Map<String,List<ClientBehavior>> behaviors = getClientBehaviors();
        if (behaviors.containsKey(DEFAULT_EVENT) ) {
            String drop = behaviors.get(DEFAULT_EVENT).get(0).getScript(behaviorContext);
            writer.writeAttribute("drop:", drop, null);
        }

        writer.write("});");
        writer.write("});");
        writer.endElement("script");
    }

    // Private

    private boolean isRequestSource(FacesContext context) {
        return this.getClientId(context).equals(context.getExternalContext().getRequestParameterMap() .get("javax.faces.source"));
    }
} 
```

和这个用法会是这样的..

```
<h:form id="frm">
      <div id="container" class="container">
        <ui:repeat var="row" value="#{homeBean.data}" id="dnd" >
          <h:panelGroup layout="block" id="draggable" styleClass="draggable">
            <h:outputText value="#{row}" />
          </h:panelGroup>
          <et:draggable  for="draggable" draggableSelector=".draggable" containTo="parent" revert="invalid" />
        </ui:repeat>

        <h:panelGroup layout="block" id="droppable" styleClass="droppable">
          <p>Drop Here!</p>
        </h:panelGroup>
      </div>

  <h:dataTable id="selectedItems" var="data" value="#{homeBean.selectedRows}">
    <h:column>
      <h:outputText value="#{data.name}" />
    </h:column>
  </h:dataTable>

      <et:droppable for="droppable" droppableSelector=".droppable" hoverClass="ui-state-hover" activeClass="ui-state-active" >
         <f:ajax listener="#{homeBean.objectDropped}" render="@form" event="drop" />
      </et:droppable>
    </h:form> 
```

HomeBean.java

```
@ManagedBean
public class HomeBean {

    private List<String> data = new ArrayList<String>();
    private List<String> selectedRows = new ArrayList<String>();

    @PostConstruct
    public void init() {

        data.add("Value 1");
        data.add("Value 2");
    }

    public void objectDropped(DragDropEvent event) {
        selectedRows.add(event.getSourceId());
    }

    public List<String> getData() {
        return data;
    }

    public void setData(List<String> data) {
        this.data = data;
    }

    public List<String> getSelectedRows() {
        return selectedRows;
    }

    public void setSelectedRows(List<String> selectedRows) {
        this.selectedRows = selectedRows;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T16:41:17.433

事实证明，我缺少的是在 jQuery drop 事件上添加一个 Ajax 调用，该事件引发 Droppable.java 中定义的“drop”事件......

```
writer.write(" jsf.ajax.request(this,event,{execute: '");
writer.write(getClientId() +"', sourceId: ui.draggable.attr('id') , targetId: $(this).attr('id')}); "); 
```

我仍然对生成的事件有疑问（它不会生成 javax.faces.behavior.event 的实例），但我想我应该为此打开一个新问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:04:20.447

对于您的示例，这是通过 JSF 将数据从 jquery 事件传递到服务器的一种方法（其自我解释性 INMO）

```
$( ".selector" ).bind( "drop", function(event, ui) { 
    $("#myInputHiddenID").val("someJsonStringCanBePlacedHereForExample");
    $("#myButtonID").click();
});

<h:commandButton id="myButtonID" action="#{myBean.myAction()}" style="display:none" >
    <f:ajax></f:ajax>
    <h:inputHidden id="myInputHiddenID" value="#{myBean.myStringData}" />
</h:commandButton>

public void myAction() {
     System.out.println(myStringData);
} 
```

# c# - WPF 弹出窗口

> ID：11499932
> 
> 赞同：32
> 
> 时间：2012-07-16T07:36:13.683
> 
> 标签：c#, wpf

我想让用户在单击按钮后选择他们的选项。例如，在模式弹出窗口中显示两个按钮，“立即重新启动”和“稍后重新启动”将是我的偏好。使用 a`MessageBox`对我来说不是解决方案，因为它不允许用户更改按钮的标题。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-16T07:47:07.087

您需要创建一个新的 Window 类。你可以设计任何你想要的方式。您可以像这样以模态方式创建和显示窗口：

```
MyWindow popup = new MyWindow();
popup.ShowDialog(); 
```

您可以为结果值添加自定义属性，或者如果您只有两个可能的结果（+ 可能不确定，这将是`null`），您可以在关闭它之前设置窗口的[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.window.dialogresult.aspx)属性，然后检查它（它是返回的值`ShowDialog()`）。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-16T07:55:58.420

在 WPF 中有一个名为 Popup 的控件。

```
Popup myPopup = new Popup();
//(...)
myPopup.IsOpen = true; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-14T11:48:19.633

XAML

```
<Popup Name="myPopup">
      <TextBlock Name="myPopupText" 
                 Background="LightBlue" 
                 Foreground="Blue">
        Popup Text
      </TextBlock>
</Popup> 
```

C＃

```
 Popup codePopup = new Popup();
    TextBlock popupText = new TextBlock();
    popupText.Text = "Popup Text";
    popupText.Background = Brushes.LightBlue;
    popupText.Foreground = Brushes.Blue;
    codePopup.Child = popupText; 
```

您可以从 MSDN 文档中找到有关弹出控件的更多详细信息。

[关于 Popup 控件的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-07-16T07:40:36.160

只需显示一个带有两个按钮的新窗口。添加属性以包含用户结果。

# php - 如何解决 PHP 和 MySQL 中的 UTF-8/Unicode 问题

> ID：11499933
> 
> 赞同：-8
> 
> 时间：2012-07-16T07:36:14.910
> 
> 标签：php, mysql, unicode, encoding, utf-8

我需要一个在 UTF8 Unicode 系统上运行良好的简单 PHP 和 MySQL 源代码。请给我最简单的源代码，它在 UTF8 Unicode 上 100% 有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T07:38:13.290

只需告诉 mysql 和 php 你使用的是 utf-8：

```
<?php
   mb_internal_encoding("UTF-8");

   $db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
?> 
```

# javascript - 我们如何在下拉子菜单中设置时间或延迟 5 秒？

> ID：11499935
> 
> 赞同：2
> 
> 时间：2012-07-16T07:36:19.100
> 
> 标签：javascript, jquery

我们如何在下拉菜单中设置 5 秒的时间或延迟。

要求是这样的：当有人将鼠标悬停在主菜单上时，只有当您的鼠标离开主菜单或子菜单时，它才会显示该子菜单 5 秒。

现在我已经将 ul 的高度增加到横幅图像的高度，这样它就不会被隐藏，直到您将鼠标移出该横幅区域。

以下是网站链接：[http ://transitions.advisorproducts.com/home](http://transitions.advisorproducts.com/home)

这是一个参考站点链接： http: [//focusyou.com/home](http://focusyou.com/home)（我的要求是这样的，但我不想复制这段代码，我想在自己的代码中实现）

下面是js：

```
$(function()
{
    $("ul.dropdown li").hover(function()
    {
        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');
    }, function()
    {
        $(this).removeClass("hover");
        $('ul:first',this).css('visibility', 'hidden');
    });
    $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");
}); 
```

提前致谢 ：）

你可以在这里测试：http: [//jsfiddle.net/alokjain_lucky/KQAYT/2/](http://jsfiddle.net/alokjain_lucky/KQAYT/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T07:42:42.203

如果您想抽象此行为而不处理计时器等，请使用：
[http ://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

否则只需使用计时器：

```
$(function()
{
    var hideTimer;
    $("ul.dropdown li").hover(function()
    {
        $(this).addClass("hover");
        $('ul', this).css('visibility', 'hidden'); //this should fix the error you mentioned!
        $('ul:first',this).css('visibility', 'visible');
    }, function()
    {
        if(hideTimer) {
            clearTimeout(hideTimer);
            hideTimer = setTimeout(function(){
                $(this).removeClass("hover");
                $('ul:first',this).css('visibility', 'hidden');
            }, 5000);
        }
    });
    $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");
}); 
```

我肯定会推荐 jquery hoverIntent 插件，它对悬停意图进行了很好的抽象，而且没有手动计时器管理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T08:26:01.543

尝试这个：

```
$(function()
{
    var timer = 0;
    $("ul.dropdown > li").hover(function()
    {
        if (timer) clearTimeout(timer);
        $("ul.dropdown > li").removeClass("hover");
        $("ul.dropdown > li ul").css('visibility', 'hidden');
        $(this).addClass("hover");
        $('ul:first',this).css('visibility', 'visible');
    }, function()
    {
        var link = $(this);
        timer = setTimeout(function(){
            $(link).removeClass("hover");
            $('ul:first',link).css('visibility', 'hidden');
        }, 5000);
    });
    $("ul.dropdown li ul li:has(ul)").find("a:first").append(" &raquo; ");
}); 
```

1.  setTimeout 函数将添加指定毫秒数的延迟。
2.  this 关键字在 setTimeout 函数中不起作用，因此我在变量链接中使用了对 this 值的引用。

这是代码的工作示例：http: [//jsfiddle.net/alokjain_lucky/KQAYT/](http://jsfiddle.net/alokjain_lucky/KQAYT/)

# java - android 应用程序无法解析主机

> ID：11499938
> 
> 赞同：1
> 
> 时间：2012-07-16T07:36:39.883
> 
> 标签：java, android, ksoap2

我正在android中开发一个连接到wcf服务并返回结果的应用程序。wcf是用soap编写的，我正在使用KSOAP2进行连接。

起初我连接到某个 url，一切运行良好。然后我不得不更改 url，我得到一个未知的异常`unable to resolve host:No address associated with name`。

我已经完成了我的研究，所有其他类似问题的解决方案是在 Android Manifest 互联网连接中添加。但我已经这样做了。有什么建议吗？另一个细节是，使用我的应用程序工作正常的第一个 url 是一个普通的 url，第二个是在本地服务器中，顺便说一下，虽然我的电脑在这个服务器上连接正确。（正确的意思是当我使用使用我的浏览器的 url 与它连接没有问题）

我在这里发布建立连接的类：

公共类 KSoapConnector 实现 InstantiateConnection{

```
private SoapObject response;
private WcfReceivedClass identifier;
private WcfReceivedClass[] receivedData;    
private final String NAMESPACE = "http://microsoft.com/webservices/";
private String METHOD_NAME="GetTeacherClass";         
private String SOAP_ACTION = "http://microsoft.com/webservices/IVertiSchool_SRV/GetTeacherClass";
private final String URL = "http://vertiserv1:81/VertiSchool_SRV.svc";

    //below is the url which was working fine
//private final String URL = "http://wcf.schoolportal.gr/VertiSchool_SRV.SVC";

public  KSoapConnector(String methodName,int mode){

    SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

    //here are the parameters for the wcf service and there values are correctly put   
    Request.addProperty("connString", "connectionString");
    Request.addProperty("TeCode", "tCode");
    Request.addProperty("Company", "cmp");
    Request.addProperty("Lng", "lng");
    Request.addProperty("MainPeriod", "mainPrd");

    SoapSerializationEnvelope envelope = new SerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(Request);      
envelope.addMapping(NAMESPACE, "SRV_Class",new SRV_Class().getClass());
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{

        //here is where i get the exception...
        androidHttpTransport.call(SOAP_ACTION, envelope);

        response = (SoapObject)envelope.getResponse();

        receivedData = identifier.retrieveFromSoap(response);
    }
    catch(Exception e){
        e.printStackTrace();
    } 
```

}

这是我的清单文件：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.example.myapp"
     android:versionCode="1"
     android:versionName="1.0" >

        <uses-permission android:name="android.permission.INTERNET" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />  

 <uses-sdk android:minSdkVersion="7" /> 

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>        
    <activity android:name=".ListOfClasses"></activity>            
</application> 
```

我知道在 Android 中 localhost 是 10.0.2.2 但我的应用程序直接连接到本地服务器......我应该转发任何端口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:03:45.953

您的 SOAP_ACTION 应该是这样的。

```
AppConsts.NAMESPACE =  "http://www.tempuri.us/"

usecaseString = THIS SHOULD BE YOUR METHOD NAME OF SERVICE.

String soapAction = AppConsts.NAMESPACE + usecaseString; 
```

你的 URL 应该是这样的。

```
NAMESPACE+/PROJECTNAME/SERVICE_NAME.asmx 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T11:35:06.353

好的，我发现了问题所在。显然，我的应用程序无法解析此网址，但这是由于该网站的绑定，所以我会联系管理员。

# asp.net - 设置动态 ConnectionString 实体框架

> ID：11499940
> 
> 赞同：0
> 
> 时间：2012-07-16T07:36:57.987
> 
> 标签：asp.net, entity-framework, c#-4.0

我使用实体框架开发了 Asp.net 应用程序，现在我需要在运行时更改实体连接字符串。我尝试了以下方式。

```
public class DataLayer(){

static DataLayer()
{
((EntityConnection)_dbEntity.Connection).StoreConnection.ConnectionString =    GetConnectionString();

//GetConnectonString() returns "user id=xxxx;password=xxxx;database=xxxx;server=xxx.xxx.xx.xx"
}

static DBContext _dbEntity = new DBContext();
//other codes
} 
```

我也检查了以下链接。我仍然无法更改它。

[http://msdn.microsoft.com/en-us/library/bb738533(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb738533(v=vs.90).aspx)

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/8a89a728-6c8d-4734-98cb-11b196ba11fd](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/8a89a728-6c8d-4734-98cb-11b196ba11fd)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:15:31.510

您不能更改现有上下文的连接字符串。如果要在运行时控制连接字符串，则必须将连接字符串传递给`DbContext`构造`ObjectContext`函数。

顺便提一句。正如我在评论中已经提到的那样——你不能在 ASP.NET 中使用静态上下文。您根本不应该使用静态上下文。如果您继续使用静态上下文，您的应用程序将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:13:19.780

最后我得到了答案。我将此 dbcontext 应用于网格的实体数据源。所以它在运行时创建上下文它是固定的。所以我改变了那个。

```
 protected void EntityDataSource1_ContextCreating(object sender, EntityDataSourceContextCreatingEventArgs e)
    {
        var dp=new DBContext();
        e.Context = dp;
    } 
```

# tcl - 我在运行 Tcl 脚本时遇到了困难

> ID：11499941
> 
> 赞同：4
> 
> 时间：2012-07-16T07:37:00.793
> 
> 标签：tcl

我已经开始学习TCL脚本语言了。我使用的是 ActivateState Tcl Devkit 5.3.0。当我创建新模拟器时，它会出现如下错误：

```
无效的命令名称“新”
    在执行时
“新模拟器”
    从内部调用
“设置 ns [新模拟器]”

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:11:20.753

Tcl中没有命令`new`。

所以它是由一些包或一些修改过的外壳提供的。

假设您使用 ns2 或类似的东西，您需要使用适当的 shell 或将包加载`package require`到普通的 tclsh shell 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T15:54:59.400

如果您使用的是 ns （几个小时前我遇到了完全相同的错误，所以我猜是的 ^^ ）您可以尝试以下命令：

```
ns your_tcl_script.tcl 
```

如果 ns 安装正确，它将为您建立链接

祝你今天过得愉快

# android - 实现 PDF 查看器的 Android 代码

> ID：11499942
> 
> 赞同：2
> 
> 时间：2012-07-16T07:37:00.643
> 
> 标签：android, pdf

在这里，我需要在我的应用程序中使用 Pdf-Viewer。我将许多 API 作为参考，但仍然坚持从 SDCARD 查看 Pdf 文件。这是我的代码

`**首先.java**

```
public class First extends ListActivity {
String[] pdflist;
File[] imagelist;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);

    File images = Environment.getExternalStorageDirectory();
    imagelist = images.listFiles(new FilenameFilter() {
        public boolean accept(File dir, String name) {
            return ((name.endsWith(".pdf")));
        }
    });
    pdflist = new String[imagelist.length];
    for (int i = 0; i < imagelist.length; i++) {
        pdflist[i] = imagelist[i].getName();
    }
    this.setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, pdflist));
}
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    String path = imagelist[(int) id].getAbsolutePath();
    openPdfIntent(path);
}
private void openPdfIntent(String path) {
    try {
        final Intent intent = new Intent(First.this, Second.class);
        intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME, path);
        startActivity(intent);
    } catch (Exception e) {
        e.printStackTrace();
    }
}} 
```

**二.java**

```
public class Second extends PdfViewerActivity {

@Override
public int getPreviousPageImageResource() {
    // TODO Auto-generated method stub
    return R.drawable.left_arrow;
}

@Override
public int getNextPageImageResource() {
    // TODO Auto-generated method stub
    return R.drawable.right_arrow;
}

@Override
public int getZoomInImageResource() {
    // TODO Auto-generated method stub
     return R.drawable.zoom_in;
}

@Override
public int getZoomOutImageResource() {
    // TODO Auto-generated method stub
    return R.drawable.zoom_out;
}

@Override
public int getPdfPasswordLayoutResource() {
    // TODO Auto-generated method stub
    return R.layout.pdf_file_password;  
    }

@Override
public int getPdfPageNumberResource() {
    // TODO Auto-generated method stub
     return R.layout.dialog_pagenumber;
}

@Override
public int getPdfPasswordEditField() {
    // TODO Auto-generated method stub
    return R.id.etPassword;
}

@Override
public int getPdfPasswordOkButton() {
    // TODO Auto-generated method stub
     return R.id.btOK;
}

@Override
public int getPdfPasswordExitButton() {
    // TODO Auto-generated method stub
     return R.id.btExit;
}

@Override
public int getPdfPageNumberEditField() {
    // TODO Auto-generated method stub
    return R.id.pagenum_edit;
}} 
```

我在我的模拟器对话中使用[了 Android-Pdf-Reader-Library](https://github.com/jblough/Android-Pdf-Viewer-Library) project.in ，因为单击 Pdf 文件后出现“正在加载 pdf 文件”。你能告诉我如何通过手指滑动来更改 Pdf 页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T08:06:32.037

你可以在google doc上打开pdf

```
 WebView webviewer = new WebView(this);
    webviewer.getSettings().setJavaScriptEnabled(true);
    webviewer.getSettings().setPluginsEnabled(true);
    setContentView(webviewer);

    webviewer.loadUrl("http://docs.google.com/gview?embedded=true&url=PDF_url/fileName.pdf");
    setContentView(webviewer); 
```

要在快速 pdf 或 adobe pdf 阅读器等应用程序中打开 PDF：

```
 Uri path = Uri.fromFile(file);
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setDataAndType(path, "application/pdf");
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-28T07:59:36.043

您可以使用[AndroidPdfViewer](https://github.com/barteksc/AndroidPdfViewer)库。

**在您的成绩中添加此依赖项：**

```
implementation 'com.github.barteksc:android-pdf-viewer:2.8.2' 
```

**在activity_main.xml中添加PDFView**

```
<com.github.barteksc.pdfviewer.PDFView
    android:id="@+id/pdfView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/> 
```

**在 MainActivity.java 中添加加载 PDF 文件**

```
pdfView.fromUri(Uri) 
```

或者

```
pdfView.fromFile(File) 
```

或者

```
pdfView.fromBytes(byte[]) 
```

或者

```
pdfView.fromStream(InputStream) // stream is written to bytearray - native code cannot use Java Streams 
```

或者

```
pdfView.fromSource(DocumentSource) 
```

或者

```
pdfView.fromAsset(String)
    .pages(0, 2, 1, 3, 3, 3) // all pages are displayed by default
    .enableSwipe(true) // allows to block changing pages using swipe
    .swipeHorizontal(false)
    .enableDoubletap(true)
    .defaultPage(0)
    // allows to draw something on the current page, usually visible in the middle of the screen
    .onDraw(onDrawListener)
    // allows to draw something on all pages, separately for every page. Called only for visible pages
    .onDrawAll(onDrawListener)
    .onLoad(onLoadCompleteListener) // called after document is loaded and starts to be rendered
    .onPageChange(onPageChangeListener)
    .onPageScroll(onPageScrollListener)
    .onError(onErrorListener)
    .onPageError(onPageErrorListener)
    .onRender(onRenderListener) // called after document is rendered for the first time
    // called on single tap, return true if handled, false to toggle scroll handle visibility
    .onTap(onTapListener)
    .onLongPress(onLongPressListener)
    .enableAnnotationRendering(false) // render annotations (such as comments, colors or forms)
    .password(null)
    .scrollHandle(null)
    .enableAntialiasing(true) // improve rendering a little bit on low-res screens
    // spacing between pages in dp. To define spacing color, set view background
    .spacing(0)
    .autoSpacing(false) // add dynamic spacing to fit each page on its own on the screen
    .linkHandler(DefaultLinkHandler)
    .pageFitPolicy(FitPolicy.WIDTH) // mode to fit pages in the view
    .fitEachPage(false) // fit each page to the view, else smaller pages are scaled relative to largest page.
    .pageSnap(false) // snap pages to screen boundaries
    .pageFling(false) // make a fling change only a single page like ViewPager
    .nightMode(false) // toggle night mode
    .load(); 
```

**如果您使用 ProGuard**，请不要忘记添加以下行：

```
-keep class com.shockwave.** 
```

# android - 在sdcard中找不到隐藏文件

> ID：11499944
> 
> 赞同：1
> 
> 时间：2012-07-16T07:37:22.323
> 
> 标签：android, hidden-files

我正在下载一个文件到客户端的sd内存卡，我用文件名前面的点（“.”）隐藏它，问题是搜索它然后打开它，没有找到. 有什么办法找到吗？

编辑：我也在寻找它：

```
File file = new File("/sdcard/SEAS Campus/" , "." + StudiesVO.bookID+".pdf");

if(file.exists()){} 
```

也没有一点，但没有结果

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T08:05:35.207

我想到的一个原因是你有硬编码的 SD 卡路径。不同的手机型号可能有不同的 SD 卡路径，因此您的代码**将无法**在某些手机上运行。因此，您应该像这样以编程方式获取外部路径：

```
File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/SEAS Campus/" , ".StudiesVO.bookID.pdf"); 
```

# html - 如何在表格单元格的图像中心下方放置单选按钮？

> ID：11499945
> 
> 赞同：0
> 
> 时间：2012-07-16T07:37:22.047
> 
> 标签：html, css

我有一个带有单选按钮和图像的表单（例如： http: [//jsfiddle.net/FQbny/](http://jsfiddle.net/FQbny/)），但我希望单选按钮位于书籍图像的中心下方 - 而不是它旁边。

你能给我一些解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:41:49.080

在一行中添加图像，然后在下一行中添加单选按钮，冲洗并重复。

在单选按钮行（<td>）上，使其样式设置为 text-align:center;

就像是：

```
<table>
    <tr>
        <td>
            <img src="http://derivativeofln.com/nagrody/howtomeasure.jpg" />
        </td>
        <td>
            <img src="http://derivativeofln.com/nagrody/competingonanalytics.jpg" />
        </td>
    </tr>
    <tr>
        <td style="text-align:center">
            <input type="radio" name="radio-207" value="howtomeasure">
        </td>
        <td style="text-align:center">
            <input type="radio" name="radio-207" value="competingonanalytics">
        </td>
    </tr>
</table> 
```

这里的代码工作：http: [//jsfiddle.net/TJGeG/](http://jsfiddle.net/TJGeG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T07:41:58.290

[http://jsfiddle.net/ags4j/](http://jsfiddle.net/ags4j/)

只需更改顺序（img 之后的输入）并将两者分开 a`<br>`并给 td 一个`align="center"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:43:08.503

嘿，现在像这样更改为您的 html

**HTML**

```
<table>
    <tr>
        <td>
            <div class="parent">
        <input type="radio" name="radio-207" value="howtomeasure" style="botton:0px">
        <img src="http://derivativeofln.com/nagrody/howtomeasure.jpg"  style="top:0px" />
            </div>
        </td>

        <td>
            <div class="parent">
            <input type="radio" name="radio-207" value="competingonanalytics">
            <img src="http://derivativeofln.com/nagrody/competingonanalytics.jpg" />
            </div></td>
    </tr>

<tr>
    <td>
<div class="parent">        <input type="radio" name="radio-207" value="likeablesocial">
        <img src="http://derivativeofln.com/nagrody/likeablesocialmedia.jpg" />
        </div></td>

    <td>
        <div class="parent">
        <input type="radio" name="radio-207" value="oldrules">
        <img src="http://derivativeofln.com/nagrody/oldrules.jpg" />
        </div> </td>
    </tr>
</table> 
```

**CSS**

```
.parent{
position:relative;
    z-index:2;
}

.parent input{
position:absolute;
    top:50%;
    left:50%;
    z-index:5;
} 
```

**现场演示** [http://jsfiddle.net/FQbny/3/](http://jsfiddle.net/FQbny/3/)

`left top`现在根据您的要求更改位置

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T07:45:46.033

干得好

[**演示**](http://jsfiddle.net/FQbny/7/)

代码如下：

```
<table border="0" style="padding:10px;">
    <tr><td><img src="http://derivativeofln.com/nagrody/howtomeasure.jpg"  style="top:0px" /></td><td> <img src="http://derivativeofln.com/nagrody/competingonanalytics.jpg" /></td></tr>
    <tr><td align="center"><input type="radio" name="radio-207" value="howtomeasure" style="botton:0px"> </td><td align="center"><input type="radio" name="radio-207" value="competingonanalytics"> </td></tr>
<tr>
  <td><img src="http://derivativeofln.com/nagrody/likeablesocialmedia.jpg" /> </td>
  <td><img src="http://derivativeofln.com/nagrody/oldrules.jpg" /></td>
</tr>
<tr><td  align="center"><input type="radio" name="radio-207" value="likeablesocial"> </td><td  align="center"><input type="radio" name="radio-207" value="oldrules"></td></tr>
</table> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T07:46:40.533

试试这个，

```
<table cellspace="0" cellpadding="0" border="0">
    <tr>
        <td>
            <img src="http://derivativeofln.com/nagrody/howtomeasure.jpg" style="top: 0px" />
        </td>
        <td>
            <img src="http://derivativeofln.com/nagrody/competingonanalytics.jpg" />
        </td>
    </tr>
    <tr>
        <td align="center">
            <input type="radio" name="radio-207" value="howtomeasure" style="botton: 0px">
        </td>
        <td align="center">
            <input type="radio" name="radio-207" value="competingonanalytics">
        </td>
    </tr>
    <tr>
        <td>
            <img src="http://derivativeofln.com/nagrody/likeablesocialmedia.jpg" />
        </td>
        <td>
            <img src="http://derivativeofln.com/nagrody/oldrules.jpg" />
        </td>
    </tr>
    <tr>
        <td align="center">
            <input type="radio" name="radio-207" value="likeablesocial">
        </td>
        <td align="center">
            <input type="radio" name="radio-207" value="oldrules">
        </td>
    </tr>
</table> 
```

# xml - xpath 选择按属性值列表排除的节点

> ID：11499946
> 
> 赞同：22
> 
> 时间：2012-07-16T07:37:28.930
> 
> 标签：xml, xpath, contains, xmlnodelist

我想知道是否有更短的方法来选择节点列表，而忽略那些在列表中指定属性值的节点

工作示例：

```
/item[not(@uid='id1') and not(@uid='id2')] 
```

所需的替代方案：

```
/item[not(@uid in('id1','id2'))] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-16T07:48:11.173

您可以使用正则表达式 - 如果您的 xpath 实现支持它 - 或编写

```
/item[not(@uid='id1' or @uid='id2')] 
```

这可能会更短一些。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-16T12:42:40.173

**如果属性名称列表很长，以下是处理这种情况的好方法**：

```
//item[not(contains('|attr1|attr2|attr3|attr4|attr5|attr6|attrN|', 
                    concat('|', @uid, '|')
                    )
           )] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-16T07:44:26.430

也许是这样的？？

```
/item[not(contains('id1 id2', @uid))] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T22:07:57.943

至少在 Xpath 2 中，对序列的一般比较是成对和存在的，所以你可以写：

```
/item[not(@uid = ('id1','id2'))] 
```

# java - BeagleBoard ICS 上的 VideoView 错误

> ID：11499947
> 
> 赞同：0
> 
> 时间：2012-07-16T07:37:36.277
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, beagleboard

我正在尝试使用 VideoView 一个接一个地播放多个视频（.mp4 格式）。它在带有 ICS 的 Android 平板电脑上运行良好，但是当我在带有 Android 的 BeagleBoard 硬件上运行它时出现错误“抱歉无法播放此视频”错误ICS.logcat报错如下：

```
MediaPlayer(3151):error(1,-110).
MediaPlayer(3151):error(1,-110).
VideoView(3151):error(1,-110).

> public class PlayVideoActivity extends Activity implements
> OnCompletionListener {
> 
>   @Override   protected void onCreate(Bundle savedInstanceState) {
>       super.onCreate(savedInstanceState);         PowerManager pm =
> (PowerManager) getSystemService(Context.POWER_SERVICE);       mWakeLock =
> pm.newWakeLock(PowerManager.FULL_WAKE_LOCK |
> PowerManager.ACQUIRE_CAUSES_WAKEUP, TAG);         mWakeLock.acquire();
>               setContentView(R.layout.playvideo);         videoView = (VideoView) findViewById(R.id.videoView);  
>       videoView.setOnCompletionListener(this);
>       
>       mVideoLocalPathArrayList.add("/mnt/sdcard/downloads/mediabox/film.mp4");
>       mVideoLocalPathArrayList.add("/mnt/sdcard/downloads/mediabox/et.mp4");
>       mVideoLocalPathArrayList.add("/mnt/sdcard/downloads/mediabox/interview.mp4");
>               playListVideo();    }
> 
>   private void playListVideo() {      try {
>               if (Util.CURRENT_VIDEO > 2) {
>                   Util.CURRENT_VIDEO = 0;
>               }
>               playVideo(mVideoLocalPathArrayList.get(Util.CURRENT_VIDEO ));       } catch (Exception e) {     }       private void playVideo(String string) {
>       mediaController = new MediaController(this);
>       mediaController.setMediaPlayer(videoView);
>       videoView.setMediaController(mediaController);
>       //videoView.stopPlayback();
>       videoView.setVideoURI(Uri.parse(string));
>       videoView.requestFocus();
>       videoView.setMediaController(mediaController);      videoView.start();
>   }
> 
>   @Override   public void onCompletion(MediaPlayer arg0) {        finish();
>       Util.CURRENT_VIDEO++;       Intent intent = new Intent(this,
> PlayVideoActivity.class);         startActivity(intent);  } } 
```

任何意见将是有益的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T09:05:04.513

尝试这个：

```
 videoView.setVideoURI(uri);
        videoView.start();
        videoView.setOnCompletionListener(completionListener); 
```

OnCompletionListener 写这个：

```
OnCompletionListener completionListener=new OnCompletionListener() {

        public void onCompletion(MediaPlayer mp) {
            mp.stop();
            Intent intent = new Intent(YourActivity.this, NewActivity.class);
            startActivity(intent);
        }
    }; 
```

# sharepoint - SharePoint 2010 重定向到匿名用户的主页

> ID：11499952
> 
> 赞同：0
> 
> 时间：2012-07-16T07:37:55.027
> 
> 标签：sharepoint, iis-7, sharepoint-2010

我正在使用 SharePoint 2010，我将网站和子网站创建为匿名访问。

匿名用户只能访问页面，但如果匿名用户播放或将 URL 从 mysite:80/site1/Pages/default.aspx 更改为

mysite:80/site1/Pages/ 或 /Pages ，他会得到登录提示。

我的问题：如何改变这种行为，我的意思是当用户更改 URL 时，立即重定向到主页或在没有登录提示的情况下访问被拒绝的页面（我更喜欢主页）？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T10:25:53.347

那么在这种情况下，您必须为您的 Web 应用程序添加一个 http 处理程序（在 web.config 中注册模块）

```
public void Init(HttpApplication context)
{
    context.PreRequestHandlerExecute += new EventHandler(PreRequestHandlerExecute);
}

public void Dispose()
{
}

/// <summary>
/// Pres the request handler execute.
/// </summary>
/// <param name="sender">The sender.</param>
/// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
void PreRequestHandlerExecute(object sender, EventArgs e)
{    
    if(HttpContext.Current.Request.Path == "/_layouts/Authenticate.aspx")
    {
        HttpContext.Current.Response.Redirect(url.Replace("/_layouts/Authenticate.aspx", "/HOME_PAGE.aspx"));
    }
} 
```

# django - django 中 pre_delete 信号中的当前用户

> ID：11499953
> 
> 赞同：4
> 
> 时间：2012-07-16T07:37:55.337
> 
> 标签：django, django-models, django-signals

是否可以在连接到 pre_delete 信号的回调中获得登录的 django 用户（调用模型的删除方法）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T08:55:52.730

`pre_delete`信号不传递请求实例，但您可以添加一个装饰器，添加它，并在视图上使用该装饰器，删除指定的模型。

假设这是回调函数：

```
def pre_delete_cb(sender, instance, using, **kwargs):
    pass 
```

在装饰器中添加：

```
from django.db.models.signals import pre_delete
from functools import wraps
from django.utils.decorators import available_attrs

def pre_delete_dec(cb, sender):
    def decorator(view_func):
        @wraps(view_func, assigned=available_attrs(view_func))
        def _wrapped_view(request, *args, **kwargs):
            cb.request = request  # here we add the request to the callback function
            pre_delete.connect(cb, sender=sender)  # and connecting the real pre_delete to the callback
            return view_func(request, *args, **kwargs)
        return _wrapped_view
    return decorator 
```

并以您调用它的方式在视图上使用装饰器 - 而不是`pre_delete.connect(pre_delete_cb, MyModel)`使用：

```
@pre_delete_dec(pre_delete_cb, MyModel)
def myview(request): 
```

然后在回调中，您将可以通过以下方式访问请求：

```
def pre_delete_cb(sender, instance, using, **kwargs):
    current_user = pre_delete_cb.request.user 
```

您可以在全局级别添加它，而不仅仅是每个视图 - 使用中间件：

```
from django.db.models.signals import pre_delete

def pre_delete_cb(sender, instance, using, **kwargs):
    current_user = pre_delete_cb.request.user

class PreDeleteMiddleware(object):
    def process_view(self, request, view_func, view_args, view_kwargs):
        pre_delete_cb.request = request
        from myapp.models import MyModel
        pre_delete.connect(pre_delete_cb, sender=MyModel) 
```

# iphone - iOS Audio Unit + Speex 编码失真

> ID：11499957
> 
> 赞同：0
> 
> 时间：2012-07-16T07:38:06.973
> 
> 标签：iphone, ios, core-audio, audiounit, speex

我正在开发一个 iOS 项目，该项目需要使用 remoteIO 音频单元作为输入/输出对 Speex 音频进行编码和解码。

我遇到的问题是，虽然 speex 没有打印任何错误，但我得到的音频在某种程度上可以识别为语音，但非常失真，有点像增益只是以机器人方式提高的声音。

以下是编码和解码函数（编码的输入是来自音频单元渲染函数的 320 字节有符号整数，解码的输入是 62 字节的压缩数据）：

```
#define AUDIO_QUALITY 10
#define FRAME_SIZE 160
#define COMP_FRAME_SIZE 62

char *encodeSpeexWithBuffer(spx_int16_t *buffer, int *insize) {
    SpeexBits bits;
    void *enc_state;

    char *outputBuffer = (char *)malloc(200);

    speex_bits_init(&bits);
    enc_state = speex_encoder_init(&speex_nb_mode);

    int quality = AUDIO_QUALITY;

    speex_encoder_ctl(enc_state, SPEEX_SET_QUALITY, &quality);

    speex_bits_reset(&bits);

    speex_encode_int(enc_state, buffer, &bits);

    *insize = speex_bits_write(&bits, outputBuffer, 200);

    speex_bits_destroy(&bits);
    speex_encoder_destroy(enc_state);

    return outputBuffer;
}

short *decodeSpeexWithBuffer(char *buffer) {
    SpeexBits bits;
    void *dec_state;

    speex_bits_init(&bits);

    dec_state = speex_decoder_init(&speex_nb_mode);

    short *outTemp = (short *)malloc(FRAME_SIZE * 2);

    speex_bits_read_from(&bits, buffer, COMP_FRAME_SIZE);
    speex_decode_int(dec_state, &bits, outTemp);

    speex_decoder_destroy(dec_state);
    speex_bits_destroy(&bits);

    return outTemp;
} 
```

以及音频单元格式：

```
// Describe format
audioFormat.mSampleRate         = 8000.00;
audioFormat.mFormatID           = kAudioFormatLinearPCM;
audioFormat.mFormatFlags        =  kAudioFormatFlagIsSignedInteger |
kAudioFormatFlagsNativeEndian |
kAudioFormatFlagIsPacked;
audioFormat.mFramesPerPacket    = 1;
audioFormat.mChannelsPerFrame   = 1;
audioFormat.mBitsPerChannel     = 16;
audioFormat.mBytesPerPacket     = 2;
audioFormat.mBytesPerFrame      = 2; 
```

任何地方都没有报告错误，我已经确认音频单元正在以 8000 的采样率处理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:14:40.797

经过几天的疯狂，我终于想通了。Speex 的诀窍是您必须初始化 SpeexBit 和编码器 void* 并在整个会话期间使用它们。因为我正在为每一段编码重新创建它们，所以会产生奇怪的声音结果。

一旦我搬家：

```
 speex_bits_init(&bits);
 enc_state = speex_encoder_init(&speex_nb_mode); 
```

在while循环之外，一切都很好。

# lua - 每次做lua_setglobal后都需要做lua_pop吗？

> ID：11499960
> 
> 赞同：0
> 
> 时间：2012-07-16T07:38:23.730
> 
> 标签：lua

就像标题提到的那样，在将值存储到全局空间后，是否需要从堆栈中弹出值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:56:23.320

不，你不需要弹出它。请参阅[文档`lua_setglobal`](http://www.lua.org/manual/5.2/manual.html#lua_setglobal)：

> 从堆栈中弹出一个值并将其设置为全局名称的新值。

# javascript - jQuery UI Draggable div 粘在鼠标上

> ID：11499962
> 
> 赞同：0
> 
> 时间：2012-07-16T07:38:31.257
> 
> 标签：javascript, jquery, jquery-ui

我使用 div 作为弹出窗口，可拖动如下

```
$("#popup").draggable(); 
```

问题是，如果我们在这个 div 上单击鼠标并离开，那么在某些 IE 版本中，div 会粘在鼠标上，尤其是在 Windows 7 上。即使没有单击和拖动操作，div 也会随着鼠标移动（它只是鼠标悬停行动）。请让我知道这是 jQuery 错误还是一些具有适当解决方案的操作系统/浏览器错误？

我正在使用 jquery-ui-1.8.6 js 和 jquery-1.4.2 js。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:56:43.423

我会建议你使用最新版本的 jquery-ui 和 jquery 库文件..

您提供的代码不足以引起争论，但正如您所提到的，这可能是因为文件的旧版本。

我正在使用这两个文件的最新版本（jquery-ui-1.8.21/jquery-1.7.1）并且拖动在所有 ie 版本中都可以正常工作。

但是，当您使用 iframe 时，情况就不一样了。因为某些浏览器特别处理 iframe 的方式不同，我可能在猜测，但可能是这样！:)

# html - 类似于css中的地图标签的东西？

> ID：11499963
> 
> 赞同：2
> 
> 时间：2012-07-16T07:38:35.653
> 
> 标签：html, css, image

所以，我需要我的标题的两个小部分是可点击的。问题是我不能使用地图标签，因为我的图像在 css 中设置为 div 的背景。而且我不允许更改它（改为使用 img src ）。我怎么能做到这一点，而不使用图像后面两个 div 的绝对定位。

CSS：

```
#bg_top { /*the design for the header*/
    background:url(../images/header_bg_new.png) center top  no-repeat;
    min-height: 100%; /*stick footer to bottom of the page*/
    text-align:left;
    width:100%; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T07:48:06.957

他们是解决这个问题的诀窍......

在 div#bg_top 添加一个透明 gif 图像，其尺寸应为 1x1，然后在 img 标签中指定其宽度和高度...

```
<div id="bg_top"><img src="spacer.gif" width="100%" height="100%" /></div> 
```

然后在其中添加地图标签...这是您可以使用的简单技巧...

您也可以通过 jquery 应用 img 标签，

```
$("#bg_top").html("<img src='spacer.gif' width='100%' height='100%' />"); 
```

从此链接下载图片：- [Spacer.gif](ftp://ftp.bignosebird.com/spacer.gif)

# css - 100% 的高度和 Doctype

> ID：11499964
> 
> 赞同：0
> 
> 时间：2012-07-16T07:39:09.920
> 
> 标签：css, internet-explorer, height, doctype

我对 IE、doctype 和 height 100% 有一点问题。

事实上，我有一个高度为 100% 的页面容器，但我认为我的 doctype 行很糟糕，它不能在 IE 上运行，并且只能在 chrome 等上运行，如果我删除了 doctype 行。使用这些东西的好文档类型是什么？

我已经测试了所有可能的文档类型，问题可能来自其他问题？

谢谢

# iphone - 从 xCode 发送数据库时出错

> ID：11499971
> 
> 赞同：0
> 
> 时间：2012-07-16T07:40:00.880
> 
> 标签：iphone, xcode, ipad, sqlite, email

我正在尝试从我的 iphone 应用程序发送附加到邮件的 sqlite 数据库，我收到了电子邮件，但没有收到数据库文件，对不起我的语法，我来自西班牙，这是我的代码。

```
-(IBAction)mandar:(id)sender
{   
    MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
    [composer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) 
    {
        [composer setToRecipients:[NSArray arrayWithObjects:@"Introducir direccion",nil]];
        [composer setSubject:@"Base de datos"];
        [composer setMessageBody:@"Mensage" isHTML:YES];
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

        NSString *documentsDirectory = [paths objectAtIndex:0];

        NSString *file = [documentsDirectory stringByAppendingPathComponent:@"capturas.sqlite"];

        NSData *data=[NSData dataWithContentsOfFile:file];

        [composer addAttachmentData:data mimeType:@"application/sqlite" fileName:@"capturas.sqlite"];

        [self presentModalViewController:composer animated:YES];
    }
    else {
        UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:@"No se a podido mandar el mensage" delegate:self cancelButtonTitle:@"dismis" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T07:44:57.990

我认为你应该使用：

application/x-sqlite3 而不是 mimeType 的 application/sqlite

编辑：这解决了它并发送了文件：

```
-(IBAction)mandar:(id)sender {

MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
[composer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) 
{
    [composer setToRecipients:[NSArray arrayWithObjects:@"EMAIL Address here",nil]];
    [composer setSubject:@"Base de datos"];
    [composer setMessageBody:@"Mensage" isHTML:YES];
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve]; 
```

从您的代码中评论了这些：

//NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

//NSString *documentsDirectory = [paths objectAtIndex:0];

//NSString *file = [documentsDirectory stringByAppendingPathComponent:@"capturas.sqlite"];

//NSData *data=[NSData dataWithContentsOfFile:file];

并替换为以下内容

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"database name without extension" ofType:@"sqlite"];
    NSData *myData = [NSData dataWithContentsOfFile:path];

    [composer addAttachmentData:myData mimeType:@"application/x-sqlite3" fileName:path];

    [self presentModalViewController:composer animated:YES];
}
else {
    UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Error" message:@"No se a podido mandar el mensage" delegate:self cancelButtonTitle:@"dismis" otherButtonTitles:nil, nil];
    [alert show];
} 
```

}

# jquery - jQuery每个函数总是返回第一个选项

> ID：11499972
> 
> 赞同：0
> 
> 时间：2012-07-16T07:40:02.743
> 
> 标签：jquery, select, each, option

我尝试使用 jQuery 浏览一个选择并使用每个函数，但我的警报在我每个我返回 X 次（其中 x 是选项的数量）我的第一个选项的值..

一个想法？

```
$("#selectionChamp option").each(function(){            
        alert($("#selectionChamp option").val());
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T07:40:45.147

[`.val()`](http://api.jquery.com/val/)（实际上是所有 jQuery getter）返回匹配集中第一个元素的请求值。在 的上下文中[`.each()`](http://api.jquery.com/each/)，要访问当前正在评估的元素，请使用`this`：

```
$("#selectionChamp option").each(function(){            
    alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:41:47.270

```
$("#selectionChamp option").each(function(){            
    console.log(this.value);
}); 
```

# sticky - 如何：用一张表固定表头（无 jQuery）

> ID：11499973
> 
> 赞同：7
> 
> 时间：2012-07-16T07:40:04.463
> 
> 标签：sticky, tableheader

我知道，在 stackoverflow 上至少有 3 打这样的问题，但我仍然无法做到这一点：

一个简单的表格，其中thead 被粘贴/固定在顶部，tbody 滚动。在过去的几天里我尝试了很多，现在我最终在这里哭求帮助。

解决方案应该适用于 IE8+ 和最新的 FF、Chrome 和 Safari。与其他“可能重复”的不同之[处](https://stackoverflow.com/questions/14834198/table-scroll-with-html-and-css)在于我**不想**使用两个嵌套表或 jQuery（虽然纯 JavaScript 很好）。

我想要的演示：
[http](http://www.imaputz.com/cssStuff/bigFourVersion.html) ://www.imaputz.com/cssStuff/bigFourVersion.html 。

问题是它在 IE 中不起作用，我可以使用一些 JS。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T09:56:06.900

好，我知道了：

您需要将表格包装在两个 DIV 中：

```
<div class="outerDIV">
  <div class="innerDIV">
    <table></table>
  </div>
</div> 
```

DIV 的 CSS 是这样的：

```
.outerDIV {
  position: relative;
  padding-top: 20px;   //height of your thead
}
.innerDIV {
  overflow-y: auto;
  height: 200px;       //the actual scrolling container
} 
```

原因是，您基本上使内部 DIV 可滚动，并通过将 THEAD 粘贴到外部 DIV 上将其拉出。

现在`thead`通过给它坚持到outerDIV

```
table thead {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
} 
```

`tbody`需要也`display: block`有。

现在您会注意到滚动有效，但宽度完全混乱。那是 Javascript 进来的。你可以自己选择你想如何分配它。我自己给表格中的 TH 提供了固定宽度，并构建了一个简单的脚本，该脚本采用宽度并将它们分配给`tbody`.

像这样的东西应该工作：

```
function scrollingTableSetThWidth(tableId)
{
    var table = document.getElementById(tableId);

    ths = table.getElementsByTagName('th');
    tds = table.getElementsByTagName('td');

    if(ths.length > 0) {
        for(i=0; i < ths.length; i++) {
            tds[i].style.width = getCurrentComputedStyle(ths[i], 'width');
        }
    }
}

function getCurrentComputedStyle(element, attribute)
{
    var attributeValue;
    if (window.getComputedStyle) 
    { // class A browsers
        var styledeclaration = document.defaultView.getComputedStyle(element, null);
        attributeValue = styledeclaration.getPropertyValue(attribute);
    } else if (element.currentStyle) { // IE
        attributeValue = element.currentStyle[vclToCamelCases(attribute)];
    }
    return attributeValue;
} 
```

使用 jQuery 当然这会容易得多，但现在我不允许为这个项目使用第三方库。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-27T04:44:16.953

也许我们应该改变一种方法来实现这个目标。例如：

```
<div><ul><li>1</li><li>2</li></ul></div> //make it fixed
<table>
    <thead>
        <tr><th>1</th><th>2</th></tr>
    </thead>
    <tfoot></tfoot>
    <tbody></tbody>
</table> 
```

当然，这对语义不好。但它是没有js或jq的最简单的方法。你不这么认为吗？

# mysql - 设计用于存储具有任意数量字段的表的数据库

> ID：11499975
> 
> 赞同：1
> 
> 时间：2012-07-16T07:40:14.350
> 
> 标签：mysql, sql

我需要建立一个潜在客户聚合系统。一般来说，系统会存储客户从登录页面发送的数据（姓名、电话、电子邮件等）。

有趣的是，我不知道每个登录页面将包含哪些字段。因此，一个着陆页可能需要和`name`，而其他着陆页将收集和。我还需要以某种方式保存该字段的标题 - 因为我需要显示为. 我想简单地将整个内容作为 JSON 对象存储在一个字段中，但这感觉既便宜又错误（而且它会糟蹋排序和选择它）。`phone``email``email``num_of_kids``num_of_kids``Number of Children`

我对建议和解决方法持开放态度（解决方案不必是严格的 MySQL）。

*编辑：我决定将 MongoDB 用于该项目。目前看来，这似乎是我今年做出的最佳决定之一。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T08:03:18.887

您是否考虑过将可变表单数据存储在 XML 字段中？然后你可以使用`ExtractValue`XPath 来获取值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:08:42.143

您的问题可以通过像[MongoDB这样的无模式 NoSQL 数据库来解决](http://www.mongodb.org/)

进一步阅读： [NoSQL](http://en.wikipedia.org/wiki/NoSQL)

PS祝你好运，玩得开心:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T07:46:24.693

```
#store minimal required data as the lead
CREATE TABLE leads (
   leads_id SERIAL,
   name TINYTEXT
)

#Store the rest of the data as key-value pair
CREATE TABLE leads_data (
   leads_id BIGINT UNSIGNED NOT NULL,
   field_name TINYTEXT NOT NULL,
   field_value TINYTEXT NOT NULL
); 
```

或者您可以将字段名称存储在一个表中，并将值存储在第三个表中

```
CREATE TABLE leads_fields (
   leads_field_id SERIAL,
   field_name TINYTEXT NOT NULL,
   field_type TINYTEXT NOT NULL
);

CREATE TABLE leads_data (
   leads_id BIGINT UNSIGNED NOT NULL,
   leads_field_id BIGINT UNSIGNED NOT NULL,
   field_value TINYTEXT NOT NULL,
   PRIMARY KEY(leads_id, leads_field_id)
); 
```

# c# - 从独立存储中保存和加载图像 (Windows Phone)

> ID：11499976
> 
> 赞同：1
> 
> 时间：2012-07-16T07:40:15.083
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

我在这个链接上找到了一个非常有用的类：[图像缓存](https://gist.github.com/2688372#file_cache_image_file_converter.cs%20%20images%20caching)——它帮助我制定缓存图像的逻辑。但就我而言，我有这个：

```
 private void DetailView_SelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                                   SaveAndLoadImage(feedItem);

            } 
```

在这种方法中，我从独立存储中保存和加载图像。但是由于某些权限（IsolatedStorageFileStream 上不允许操作），我无法立即加载文件。如何更正我的逻辑以立即保存和加载图像？

```
 public void SaveAndLoadImage(MediaItemViewModel curItem)
            {
                string url = string.Empty;
                if (!string.IsNullOrEmpty(curItem.ThumbUrl))
                {
                    url = curItem.ThumbUrl;
                }
                if ((string.IsNullOrEmpty(curItem.ThumbUrl)) && (!string.IsNullOrEmpty(curItem.MediaUrl)))
                {
                    url = curItem.MediaUrl;
                }
                if ((!string.IsNullOrEmpty(url)) && (CacheImageFile.GetInstance().IsOnStorage(new Uri(url)) == false))
                {
                    CacheImageFile.DownloadFromWeb(new Uri(url));

                }

                    curItem.ImageSource = CacheImageFile.ExtractFromLocalStorage(new Uri(url)) as BitmapImage;

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T08:04:35.143

看看下面的链接

[http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images](http://www.windowsphonegeek.com/tips/All-about-WP7-Isolated-Storage---Read-and-Save-Images)

用于从隔离存储加载图像。使用流

```
BitmapImage bi = new BitmapImage();

            using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("logo.jpg", FileMode.Open, FileAccess.Read))
                {
                    bi.SetSource(fileStream);
                    this.img.Height = bi.PixelHeight;
                    this.img.Width = bi.PixelWidth;
                }
            }
            this.img.Source = bi; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T23:01:49.867

您可以使用[JetImageLoader](https://github.com/artem-zinnatullin/jet-image-loader)，我为应用程序创建了它，我们需要在其中加载、缓存和显示大量徽标、图标等。

它可以用作绑定转换器，因此*您甚至不应该更改您的代码！只需更新您的 XAML！*

请查看[存储库中的示例](https://github.com/artem-zinnatullin/jet-image-loader)，您会喜欢的；）

**特征：**

*   缓存在磁盘上
*   缓存在内存中
*   完全异步
*   可用作绑定转换器或以编程方式从您的代码中使用
*   完全开源，分叉和改进它！

这是示例：

```
<Image Source="{Binding ImageUrl, Converter={StaticResource MyAppJetImageLoaderConverter}}"/> 
```

PS我很抱歉，我从另一个问题中复制了我的答案，但是Windows手机上的图像缓存是个大问题，我想分享我的解决方案，所以每个人都可以使用它并为开发者社区改进

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T08:15:03.037

您正在从网络异步获取图像，但立即转到下一行以读取甚至尚未写入隔离存储的文件。这就是导致您异常的原因。

您可以尝试使用 ManualResetEvent 编辑您在 github 上找到的缓存库。请注意，您将不得不在另一个线程上进行方法调用！

例如：

```
public class CacheImageFileConverter : IValueConverter
{
    ...
    private static ManualResetEvent mre = new ManualResetEvent(true);

    private static object DownloadFromWeb(Uri imageFileUri)
    {
        mre.Reset();
        WebClient m_webClient = new WebClient();                                //Load from internet
        BitmapImage bm = new BitmapImage();

        m_webClient.OpenReadCompleted += (o, e) =>
        {
            if (e.Error != null || e.Cancelled) return;
            WriteToIsolatedStorage(IsolatedStorageFile.GetUserStoreForApplication(), e.Result, GetFileNameInIsolatedStorage(imageFileUri));
            bm.SetSource(e.Result);
            e.Result.Close();
            mre.Set();
        };
        m_webClient.OpenReadAsync(imageFileUri);
        return bm;
    }

    private static object ExtractFromLocalStorage(Uri imageFileUri)
    {
        mre.WaitOne();
        string isolatedStoragePath = GetFileNameInIsolatedStorage(imageFileUri);       //Load from local storage
        using (var sourceFile = _storage.OpenFile(isolatedStoragePath, FileMode.Open, FileAccess.Read))
        {
            BitmapImage bm = new BitmapImage();
            bm.SetSource(sourceFile);
            return bm;
        }
    }
    .... other methods
} 
```

请注意使用 Reset、Set 和 WaitOne 来发送信号。

# xamarin.android - 适用于 Android 的 Mono：Android 更新后的未知运行时

> ID：11499977
> 
> 赞同：-2
> 
> 时间：2012-07-16T07:40:22.213
> 
> 标签：xamarin.android

我刚刚收到 Google 将我的 Galaxy Nexus 更新到 Android v4.1.1。

现在，当我每次开始使用 Mono for Android 进行调试时，都会收到以下警告：

“未知的运行时间。

无法确定版本的设备上存在共享运行时。不会部署新的运行时。如果需要更换运行时，请手动将其从设备中移除。”

还有：“未知平台运行时

无法确定版本的设备上存在平台支持运行时。不会部署新的平台支持运行时。如果需要更换平台支持运行时，请手动将其从设备中移除。”

不幸的是，它没有告诉我如何删除该运行时。

我是否必须删除某些东西，如果是，我可以在我的设备上哪里找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:23:57.643

Mono for Android 4.2.5 (alpha) 版本解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:52:01.790

您可以在设备的已安装应用程序列表下找到 Mono 运行时，并可以从那里卸载它。

# jsf-2 - 如何关闭 Richfaces 4 生成的 CSS 验证警告？

> ID：11499981
> 
> 赞同：0
> 
> 时间：2012-07-16T07:40:27.447
> 
> 标签：jsf-2, richfaces

我的 RichFaces 4 应用程序中有一个自定义 ecss 文件。这个 ecss 文件有一些警告，但我对它们没意见，不想修复这个警告。

我在我的页面中包含这个 ecss 文件；

```
<h:outputStylesheet name="myTheme.ecss" library="css" /> 
```

一切正常，但 Richfaces 在服务器日志中生成一些关于 ecss 文件的警告。

> 警告：解析“css/sws/workstationTheme.ecss”资源时出现问题：忽略整个规则。2012 年 7 月 16 日 10:26:59 org.richfaces.resource.CompiledCSSResource$ErrorHandlerImpl logException 警告：解析“css/myTheme.ecss”资源时出现问题：属性>选择器中的错误。>无效的标记“*”。期待以下之一：、“=”、“]”、“~=”、“|=”。

有没有办法关闭此警告，每次访问 JSF 页面时它们都会出现，因此我的服务器日志中充满了它们。

**服务器**：Tomcat 7
**JSF 版本。**：javax.faces-2.1.8
**Rich Faces 版本**：4.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T17:24:37.750

重新启动服务器时是否收到警告？那个问题是与热部署相关的 JIRA，据说在 4.2.2.Final 中已修复。如果您在 web.xml 中将 javax.faces.PROJECT_STAGE 设置为 Development ，则应该防止生成该异常。

# eclipse - 从 Eclipse 格式化程序文件创建 Checkstyle 配置

> ID：11499984
> 
> 赞同：5
> 
> 时间：2012-07-16T07:40:43.170
> 
> 标签：eclipse, checkstyle, formatter

目前，我们的团队正在使用自定义 eclipse Formatter 配置。有没有办法将生成的 xml 文件导入 Checkstyle 以使两者都在同一个规则集中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T06:52:32.797

[正如在此处](https://stackoverflow.com/questions/8327498/converting-an-eclipse-formatter-file-to-a-checkstyle-file)回答的那样，目前无法将格式化程序文件转换为 checkstyle 规则集。格式化程序文件有另一种语法，如 checkstyle，因此无法读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T07:53:59.793

> 首选项 -> Java -> 代码样式 -> 格式化程序

您可以导入/导出或创建新的格式规则。

# c# - 在将输入的数据应用到 BindingSource 基础源之前验证输入的数据

> ID：11499988
> 
> 赞同：2
> 
> 时间：2012-07-16T07:41:07.083
> 
> 标签：c#, validation, bindingsource

```
BindingSource BS = new BindingSource();
public Cource()
{
    InitializeComponent();
}

private void Cource_Load(object sender, EventArgs e)
{
    DataSet ds = new DataAccess.newCourcesDAC().GetAllTeachers();
    BS.DataSource = ds;
    BS.DataMember = "tblCourses";
    dataGridView1.DataSource = BS;
    txtCourseID.DataBindings.Add("Text", BS, "CourseID");
    txtCourseName.DataBindings.Add("Text", BS, "CourseName");
    txtPrequest.DataBindings.Add("Text", BS, "Prequest");
    txtCourseContent.DataBindings.Add("Text", BS, "CourseContent");
}

private void btnAdd_Click(object sender, EventArgs e)
{
    BS.AddNew();
} 
```

我有一个数据源，其中包含一个名为“tblCourses”的数据表，它有 4 列。我使用 BindingSource 来管理货币 beetwen datagridView 和 4 个文本框。我使用 bindingSource 的 addNew 方法将新行添加到 dataTable 。如何在将输入的数据应用到 BindingSource 基础源之前验证输入的数据？

# java - Java 泛型捕获列表

> ID：11499989
> 
> 赞同：5
> 
> 时间：2012-07-16T07:41:09.863
> 
> 标签：java, generics

我正在查看[Java 泛型文档](http://docs.oracle.com/javase/tutorial/java/generics/capture.html)并找到了这段代码，

```
public class WildcardError {

void foo(List<?> l) {
    //This give a compile time error
    l.set(0,l.get(0));
}
} 
```

我可以理解我们正在从 a 中获取一个元素`List<?>`并尝试将其设置为另一个`List<?>`。所以编译器会报错。`l.set(0, m.get(0))`我的问题是，当 2 个列表不同时，即此处的列表不同`l`，这才有意义`m`。但是在上面的例子中，`l`和`l`是相同的列表。为什么编译器不够聪明，看不到这一点？实施起来难吗？

**编辑**：我知道我可以通过辅助方法或使用`T`代替`?`. 只是想知道为什么编译器不为我做。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T07:45:21.250

在您的特定情况下，您可以明确解决此问题：

```
public class WildcardError {
    <T> void foo(List<T> l) {
        // This will work
        l.set(0, l.get(0));
    }
} 
```

或者，如果您不想更改原始 API，请引入委托辅助方法：

```
public class WildcardError {
    void foo(List<?> l) {
        foo0(l);
    }

    private <T> void foo0(List<T> l) {
        // This will work
        l.set(0, l.get(0));
    }
} 
```

不幸的是，编译器无法推断出那种“明显”的`<T>`类型。我也一直在想。似乎可以在编译器中进行改进，因为每个通配符都可以非正式地转换为未知`<T>`类型。可能，这被省略是有一些原因的，也许这只是直觉，但形式上是不可能的。

**更新**：

请注意，我刚刚看到了这种特殊的实现[`Collections.swap()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#swap%28java.util.List,%20int,%20int%29)：

```
public static void swap(List<?> list, int i, int j) {
    final List l = list;
    l.set(i, l.set(j, l.get(i)));
} 
```

JDK 家伙求助于原始类型，以便在本地处理这个问题。这是一个强有力的声明，表明编译器可能*应该*支持这一点，但由于某种原因（例如，没有时间正式指定这一点）只是没有完成

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T07:43:39.503

编译器报告一个错误，因为一般来说，它无法判断两个表达式（在本例中为`l`and `l`）是否引用同一个列表。

相关的，有点笼统的问题：

*   [JLS 如何指定不能在方法中正式使用通配符？](https://stackoverflow.com/questions/11500385/how-does-the-jls-justify-that-wildcards-cannot-be-formally-used-within-methods)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T07:52:38.080

`List<?>`表示*包含某种未知类型元素的列表*，因此当人们想从中获取元素时，`list.get(i)`它将返回*某种未知类型的对象*，因此唯一有效的猜测是`Object`. 然后当尝试使用`list.set(index, list.get(index))`它设置元素时会产生编译时错误，因为如上所述`List<?>`只能包含一些*未知类型*，所以放入`Object`它可能会导致`ClassCastException`.

*这在 Joshua Bloch 的Effective Java，第 2 版，第 28 条：使用有界通配符提高 API 灵活性*中得到了很好的解释

 *这也称为`PECS`原理，可以在此 Q/A 中找到很好的解释： [什么是 PECS（Producer Extends Consumer Super）？](https://stackoverflow.com/questions/2723397/java-generics-what-is-pecs)（请注意，与少数例外情况`List<?>`相同）`List<? extends Object>`

用外行的话来说，一个人应该`List<?>`只使用作为方法参数来从该方法中*获取元素*，而不是在需要*将元素*放入列表时。当一个人既需要*put 又需要 get*时，他/她需要`T`像 Lukas Eder 的回答（类型安全方式）中那样使用类型参数来泛化方法，或者简单地使用`List<Object>`（非类型安全方式）。*

# assembly - 在 MS-DOS/FreeDOS 应用程序中实现超时

> ID：11499991
> 
> 赞同：4
> 
> 时间：2012-07-16T07:41:19.940
> 
> 标签：assembly, timeout, dos

我正在用 C 语言为 FreeDOS 编写一个 DOS 保护模式应用程序。编译器是 Open Watcom 1.8。

我需要编写一个超时例程，它启动一个超时变量，然后当超时变量变为零时，应用程序将知道指定的毫秒数（ms）已经过去。

我认为这可以通过编写 ISR 来完成。每次调用 ISR 时，ISR 都会递减超时变量。应用程序不断检查超时变量是否为零。

现在我的问题是：

是否有任何*可靠*的方法来实现这种超时 ISR。我读到了 0x1C 中断向量，但它提供的分辨率只有 55 毫秒。我需要更多的分辨率。例如1ms 或者如果可能的话*甚至更低。*

如何才能做到这一点？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T09:11:15.050

这是一个演示如何将默认计时器速率从 18.2 Hz 更改为其他值。使用 Borland Turbo C++（作为实模式 EXE 应用程序）和 Open Watcom C++ 1.9（作为 DPMI/dos4gw 应用程序）编译。

```
// file: tmr.c
#include <stddef.h>
#include <stdio.h>
#include <dos.h>
#include <conio.h>

#ifdef __WATCOMC__
// Define Borland C aliases:
#define getvect _dos_getvect
#define setvect _dos_setvect
#define outportb outp
#define inportb inp
#define disable _disable
#define enable _enable
#endif

typedef unsigned uint;
typedef unsigned char uchar;

void interrupt (*pOldInt1C)(void) = NULL;

volatile uint int1Ccnt = 0;

void interrupt NewInt1C(void)
{
  int1Ccnt++;
  pOldInt1C();
}

void SetPitResolutionInHz(uint ResolutionInHz)
{
  uint count;

  if (ResolutionInHz < 18 || ResolutionInHz >= 65535)
    return;

  count = (ResolutionInHz == 18) ? 0 : (uint)(1193181 / ResolutionInHz);

  disable();

  outportb(0x43, 0x34);
  outportb(0x40, (uchar)(count & 0xFF));
  outportb(0x40, (uchar)(count >> 8));

  enable();
}

int main(void)
{
  pOldInt1C = getvect(0x1C);
  setvect(0x1C, &NewInt1C);

  printf("3 seconds delay, default timer rate...\n");
  while (int1Ccnt < 18*1*3)
  {
    static uint last = 0;
    if (last != int1Ccnt)
    {
      printf("1"); fflush(stdout);
      last = int1Ccnt;
    }
  }
  printf("\n");

  SetPitResolutionInHz(18*2);
  printf("3 seconds delay, double timer rate...\n");
  int1Ccnt = 0;
  while (int1Ccnt < 18*2*3)
  {
    static uint last = 0;
    if (last != int1Ccnt)
    {
      printf("2"); fflush(stdout);
      last = int1Ccnt;
    }
  }
  printf("\n");

  SetPitResolutionInHz(18*3);
  printf("3 seconds delay, triple timer rate...\n");
  int1Ccnt = 0;
  while (int1Ccnt < 18*3*3)
  {
    static uint last = 0;
    if (last != int1Ccnt)
    {
      printf("3"); fflush(stdout);
      last = int1Ccnt;
    }
  }
  printf("\n");

  // Set default rate: 1193181 MHz / 65536 = 18.2 Hz
  SetPitResolutionInHz(18*1);
  printf("3 seconds delay, default timer rate...\n");
  int1Ccnt = 0;
  while (int1Ccnt < 18*1*3)
  {
    static uint last = 0;
    if (last != int1Ccnt)
    {
      printf("1"); fflush(stdout);
      last = int1Ccnt;
    }
  }
  printf("\n");

  setvect(0x1C, pOldInt1C);

  return 0;
} 
```

它将默认打印 1s、2s 和 3s，默认速率的两倍和三倍，每个 3 秒。

当心，这段代码搞砸了 BIOS/DOS 计时（两者都使用计时器中断来实现各种延迟）。要解决您想要挂钩向量 8 (IRQ0) 而不是向量 0x1C（它从向量 8 ISR 调用）并以大约默认速率从新 IRQ0 ISR 调用原始 IRQ0 ISR（您需要为此计算中断）的解决方法。当您不从 ISR 调用它时，您需要`outportb(0x20, 0x20);`在从 ISR 返回之前手动发出中断处理结束的信号（原始 ISR 会这样做，但如果您不调用它，这是您的责任）。

**编辑**：请注意，在虚拟化环境中，计时器中断可能会丢失或以不规则的时间间隔传递，特别是如果您设置了高中断率并且您的 PC 正忙于其他任务。此外，即使在物理机器上，您也可能会遇到定时器频率高的问题，系统管理中断 (SMI) 会在中断传递中引入抖动/可变延迟。您无法摆脱它们，它们由 BIOS 透明地处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T08:25:13.353

您可以挂钩定时器中断 (08h) 并配置 PIT 以获得高达 1.2 Mhz 的速率。

这是一些旧的 TASM 风格的程序集，展示了如何做到这一点：

```
tmTimerHandler PROC
    push ds
    mov ds,cs:tmDataSeg
    add ds:tmTicker,65536
    pop ds
    jmp cs:tmOldTimer
tmTimerHandler ENDP

tmInit PROC
    mov tmDataSeg,ds
    mov tmTicker,65536
    push es
    ; Save the old timer interrupt vector
    mov ax,3508h
    int 21h
    mov dword ptr tmOldTimer+0,ebx
    mov word ptr tmOldTimer+4,es
    pop es

    ; Install our own timer interrupt vector
    push ds
    mov ax,2508h
    push cs
    pop ds
    mov edx,OFFSET tmTimerHandler
    int 21h
    pop ds

    ; Configure the PIT to generate interrupts
    ; at the maximum rate
    mov al,34h
    out 43h,al
    xor al,al  ; zero divisor
    out 40h,al
    out 40h,al
    ret
tmInit ENDP

tmClose PROC
   push ds
   mov ax,2508h
   lds edx,tmOldTimer
   int 21h
   pop ds
   ret
tmClose ENDP

; Returns the current tick count in eax
tmGetTimer PROC
   pushf
   cli
   xor eax,eax
   out 43h,al
   in al,40h
   mov ah,al
   in al,40h
   xchg ah,al
   neg eax
   add eax,tmTicker
   popf
   ret
tmGetTimer ENDP

.data
  tmOldTimer    df 0
  tmDataSeg dw 0
  tmTicker  dd 0 
```

# sharepoint - sharepoint 在线工作流活动崩溃

> ID：11499993
> 
> 赞同：1
> 
> 时间：2012-07-16T07:41:37.213
> 
> 标签：sharepoint, android-activity, crash, workflow

我有一个类似于[http://msdn.microsoft.com/en-us/magazine/hh288072.aspx](http://msdn.microsoft.com/en-us/magazine/hh288072.aspx)的工作流程。

大多数时候它工作得很好。但是，有时它会崩溃，然后显示“工作流 CreateSiteFlow 中发生错误”。然后该站点已成功创建。

我发现了一些对同一问题的引用，但都说要查看日志文件。这对 SharePoint Online 有什么作用，或者有什么可能出错的指南？

我在网上找到了一些关于工作流程超时的参考资料。但是我找不到有关此的任何细节，而且我也无法在工作流的报告中看到很长时间（包括几秒钟，甚至更精确）..

问候， Matthijs ter Wood

# css-selectors - jsoup ：选择后获取最后一个索引

> ID：11499994
> 
> 赞同：0
> 
> 时间：2012-07-16T07:41:41.953
> 
> 标签：css-selectors, jsoup

我的问题是我`span`在一个标签中有多个标签`p`。

我只想要最内层标签中的 HTML 代码`span`。

前任：

```
<span>
  <span>
    <span>
      <span> <strong> lkfghsij</strong> hi how are u?
      </span>
    </span>
  </span>
</span> 
```

在这里，我只希望将`strong`标记和其后的文本写入文件。

我该怎么做？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:33:10.850

解决了...这很简单...只需添加：

```
select().last().html(); 
```

# python - 如何实现 REST API 的身份验证？

> ID：11499995
> 
> 赞同：10
> 
> 时间：2012-07-16T07:41:45.340
> 
> 标签：python, api, authentication, rest, oauth

我正在创建一个基于 Web 的服务，我想将其公开为 REST API，以便开发人员能够使用它创建应用程序。我希望开发人员能够创建/管理用户帐户并通过 API 进行身份验证。如何处理？OAuth 还是其他？

我为此使用 python、flask、mongodb。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T07:49:37.587

我们已经解决了以下问题，使用[OAuth 2](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-30)（比 OAuth 1 更可取）。特别是我们正在使用[资源所有者密码凭证](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-30#section-1.3.3)流程。至于如何将其集成到我们的 RESTful 服务中，思路如下：

*   初始资源在被未经授权的用户点击时返回 401。401 的正文包含单个链接，带有[`rel=oauth2-token`](https://datatracker.ietf.org/doc/html/draft-wmills-oauth-lrdd-00). （您如何发出链接信号取决于您的媒体类型；我们使用的是[HAL](http://stateless.co/hal_specification.html)，但您甚至可以只使用`Link`标题。）
*   用户进行身份验证后，他返回到初始资源，在其`Authorization`标头中发送从 OAuth 2 进程返回的不记名令牌。此时，我们返回 200，所有正常链接都可用。

我们不会公开帐户创建，但如果您想这样做，我会使用初始资源中未经授权的用户可用的另一个链接来这样做。该链接将具有自定义`rel`，因为它特定于您的应用程序，例如`rel=http://rels.myapi.com/users`

良好的 RESTful 设计将表明与 this 的链接`rel`指向 eg `http://myapi.com/users`，并且 API 的使用者`POST`对该端点执行 a 操作，该端点向他们返回新的用户资源，其`Location`标头指向在 eg 处新创建的用户资源`http://myapi.com/users/username`。（用户资源本身当然是另一种`rel`，区分单数用户资源和复数用户集合资源。）