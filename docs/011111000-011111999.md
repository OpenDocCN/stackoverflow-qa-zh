# StackOverflow 问答 11111000-11111999

# java - 如何轻松调用 java 类（查询数据库）并将可用结果返回给 JSP？

> ID：11111003
> 
> 赞同：3
> 
> 时间：2012-06-19T23:39:13.383
> 
> 标签：java, jsp, servlets

我是学习 JSP 和 Servlet 的新手。我有一个 Java 类，它调用一个存储过程并从数据库返回一个状态列表（这是我学习时的测试用例，其他更复杂的操作稍后会出现）。状态列表应该返回到 JSP 以在表单中显示/使用，等等。现在，我很高兴通过 JSP 页面打印数据以知道它在那里。

但是，当我从 JSP 调用 Java 代码时，结果对象似乎返回为 null，因此无法访问任何数据。我也尝试将数据作为 ResultSet 对象返回，但结果是一样的。我确实知道从 SQL 调用存储过程时有效。此外，我将 Java 代码作为响应 doPost 请求的 servlet 并且工作正常......

我可能会错过/无法理解什么？这可能吗？

```
package edu.XXXX.ais.userapp;

import java.sql.*;
import java.util.*;

public class DBQueries {

    public static Vector<String> getStatesList() {
        Vector<String> results = new Vector<String>();
        Connection con = null;  
        try {

            // Example of executing a stored procedure
            Class.forName("com.mysql.jdbc.Driver");
            con = DriverManager.getConnection ("jdbc:mysql://hostname:3306/dbName","username","password");
            CallableStatement cs = con.prepareCall("{call getStatesList()}");
            ResultSet rs = cs.getResultSet();

            while (rs.next()) {
                results.add(rs.getString(1));
            }
        } catch (SQLException e) {
            System.err.println("Servlet could not display records." + e);

        } catch (ClassNotFoundException e) {
            System.err.println("JDBC driver not found." + e);

        } finally {
            try {
                if (con != null) {
                    con.close();
                    con = null;
                }

            } catch (SQLException e) {
                System.err.println(e);
            }
        }
        return results;
    }
} 
```

调用上述Java代码的JSP页面（期望能收到结果...）

```
<html>
<head>
<title>Foo</title>
</head>

<body>
<h3>List of states via a servlet call to the database</h3>
<%@ page import="java.util.*" %>
<%@ page import="edu.XXXX.ais.userapp.DBQueries" %>

<%
    Vector rs = DBQueries.getStatesList();
    if (rs != null)
        for (int index = 0; index < rs.size(); index++) {
            out.println("Name : " + (String) rs.get(index));
        }
%>

</body>
</html> 
```

产生的Tomcat错误如下：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /states.jsp at line 12

9: <%@ page import="edu.XXXX.ais.userapp.DBQueries" %>
10: 
11: <%
12:     Vector rs = DBQueries.getStatesList();
13:     if (rs != null)
14:         for (int index = 0; index < rs.size(); index++) {
15:             out.println("Name : " + (String) rs.get(index));

Stacktrace:
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:568)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

java.lang.NullPointerException
    edu.XXXX.ais.userapp.DBQueries.getStatesList(Unknown Source)
    org.apache.jsp.states_jsp._jspService(states_jsp.java:75)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:53:56.717

异常告诉您在哪里查看：

```
edu.XXXX.ais.userapp.DBQueries.getStatesList(Unknown Source) 
```

该方法中有一个空引用。我建议在没有 JSP 的情况下进行测试并使用调试器。

你没有关闭你的`Statement`or `ResultSet`。那会导致悲伤。以相反的创建顺序关闭它们，就像你做`Connection`.

对于初学者，请停止将 scriptlet 代码放入您的 JSP 中。那是 1999 年的风格；不要这样做。

正确的做法是学习 JSTL，只让你的 JSP 做显示任务。

让 JSP 与代表它与数据库进行调解的 servlet 对话。

使用应用服务器设置数据源。您的代码中不应包含连接信息。

暂时忘记 servlet 和 JSP。从数据层开始。

使用 POJO 编写，测试它，让它工作，然后把它放在一边。

然后编写一个接收 HTTP 请求的 servlet，验证并绑定参数，使用您的数据访问层与数据库通信，然后将响应放入请求或会话范围以显示页面。

它被称为 Model-2 MVC。这就是编写 Java Web 应用程序的方式。

我会写 DBUtils 类的东西更像这样：

```
package edu.XXXX.ais.userapp;

import java.sql.*;
import java.util.*;

public class DBQueries {

    public static List<String> getStates(Connection connection) throws SQLException {
        List<String> states = new ArrayList<String>();
        CallableStatement cs = null;
        ResultSet rs = null;
        try {
            cs = connection.prepareCall("{call getStatesList()}");
            boolean hasResultSet = cs.execute();
            rs = cs.getResultSet();    
            while (rs.next()) {
                states.add(rs.getString(1));
            }
        } finally {
            close(rs);
            close(cs);
        }
        return states;
    }

    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Statement st) {
        try {
            if (st != null) {
                st.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    public static void close(Connection conn) {
        try {
            if (conn != null) {
                conn.close();
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
} 
```

编写一个 JUnit 测试来证明您的 DBQueries 有效：

```
package edu.XXX.ais.userapp;

public class DBQueriesTest {

    // You have to initialize this; I'm deliberately leaving out some details.
    private Connection connection;

    @Test
    public void testGetStates() {
        List<String> actual = DbQueries.getStates(this.connection);
        List<String> expected = { "CT", "NY" };  // whatever
        Assert.assertEquals(expected, actual);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T00:58:39.257

在您的示例代码中，`CallableStatement`之前未执行`cs.getResultSet()`，因此`rs`将为空，然后`NullPointerException`将在执行时发生`rs.next()`。

```
CallableStatement cs = con.prepareCall("{call getStatesList()}");
boolean bIsResultSetOrNot = cs.execute (); // <-- missed
ResultSet rs = cs.getResultSet(); 
```

确保语句被执行，并确保执行结果`ResultSet`不是更新计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:57:14.250

异常堆栈跟踪显示您在方法 DBQueries.getStatesList() 中有一个空指针。用 Exception 包围方法中的 try 块，并尝试查看是哪一行抛出它。我的猜测是 Connection 对象为空。

如果这是真的，请检查您在获取连接时传递的“主机名”的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:04:23.543

您正在尝试将字符串向量传递给向量。你的方法是`Vector<String> getStatesList()`你正在参考一个`NULL`.

进入 ../Apache Tomcat/webapps/work 找到你编译的 JSP 类。看看那些 JSP 行中的错误。

请使用 Spring Core JDBCTemplate 类建立与数据库的连接，对于那些忘记关闭连接的人来说，这是一个非常好的类。：） 好的

# android - 安卓应用搜索界面

> ID：11111006
> 
> 赞同：2
> 
> 时间：2012-06-19T23:39:42.023
> 
> 标签：android

我目前已经使用对话框在 Android 中实现了搜索界面。但是，我需要更改它并将搜索编辑放在应用程序的其他位置。默认情况下，搜索对话框位于应用程序的最顶部，它必须移动。现在我在文档中看到：http: [//developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)它说 Android 3.0+ 有一个小部件选项但是，我仍然需要支持 Android 2.1、2.2

所以我想使用具有语音搜索等优势的Android搜索界面，但是我怎样才能将搜索编辑框放在最顶部以外的地方，并且仍然兼容Android 2.1、2.2？

# python - 龙卷风的同步行为

> ID：11111015
> 
> 赞同：1
> 
> 时间：2012-06-19T23:40:43.177
> 
> 标签：python, asynchronous, tornado

龙卷风框架中有没有办法同步设置回调。

例如

```
print word

self.twitter_request(path= "/search",
    access_token=self.current_user["access_token"],
    callback=self.test,q=word,rpp="100") 
```

我的测试功能定义为

```
def test(self,response):
        print "Test" 
```

在上述请求中，我有一组 2 个单词正在针对 twitter api 进行查询。但是，上述请求功能是同步的。

我得到输出

查询1

查询2

测试

测试

但是我想输出为

查询1

测试

查询2

测试

任何想法如何调整上述代码以实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:54:12.740

这将阻止龙卷风 - 它是单线程、单进程。所以这样做是一个非常糟糕的主意。

但是，您可以简单地重构您的代码，以便在 Query 1的回调中触发*Query* *2*。

 *要做到这一点而不会使用嵌套回调降低代码的可读性，请查看[`tornado.gen`](http://www.tornadoweb.org/documentation/gen.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:15:03.380

如果您的目标是按顺序执行查询列表，那么您可以使用该`@gen.engine`方法来执行处理程序（[http://www.tornadoweb.org/documentation/gen.html](http://www.tornadoweb.org/documentation/gen.html)）。然后你会像这样构造你的代码：

```
 @gen.engine
 def doit(self):
     for word in LIST_OF_STUFF:
         print word

         response = yield gen.Task(self.twitter_request, 
                                   path= "/search",
                                   access_token=self.current_user["access_token"],
                                   q=word,rpp="100")

         # do something with response. 
```*

# facebook-graph-api - 已批准的图表操作不起作用

> ID：11111017
> 
> 赞同：0
> 
> 时间：2012-06-19T23:41:14.533
> 
> 标签：facebook-graph-api, graph, publish

我已经为此苦苦挣扎了好几个小时......创建图形操作的新手......为什么我们批准的图形操作不起作用？我们期望当用户点击“点击这里！” 按钮，它将显示他们已经在他们的时间线上安排了献血。我们有一个按照 FB 教程中的描述精确编码的表单按钮，它位于我们添加到页面的页面选项卡上，但是当您单击“单击此处！”时没有任何反应。按钮。

有问题的页面标签 - > [http://www.facebook.com/cityofhope.donateblood/app_323470837712150](http://www.facebook.com/cityofhope.donateblood/app_323470837712150)

这是代码：

```
<script type="text/javascript">
  function postSchedule()
  {
   FB.api(
    '/me/cohblooddonor:schedule',
    'post',
    { blood_donation: 'http://www.cityofhope.org/giving/Documents/blood-donor.html' },
    function(response) {
       if (!response || response.error) {
          alert('Error occured');
       } else {
          alert('You've shared with your friends! Action ID: ' + response.id);
       }
    });
 }
 </script> 
```

和按钮：

```
<form>
<input type="button" value="Click here!" onclick="postSchedule()" />
</form> 
```

任何帮助表示赞赏！我已经做了几个小时了。是身份验证问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:00:24.203

由于源代码第 58 行的引号不匹配，出现语法错误：' **You** 've ...'

您可以使用反斜杠转义文字撇号，或将“You've”更改为“You have”。

页面上还有一些其他错误。在现代浏览器上使用 Javascript 控制台检查这些内容。

# php - 从 url 中删除子域

> ID：11111018
> 
> 赞同：2
> 
> 时间：2012-06-19T23:41:43.647
> 
> 标签：php, regex, preg-match

所以我有这种代码，它返回域名，但我不知道如何删除子域，有人可以帮忙吗？

```
$link='http://www.lol.wwwyoursitewww.com/aaaaa/ggghd/site.php?sadf=asg';
preg_match('/^http\:\/\/www.(.*?)\/.*/i', $link, $link_domain);
echo $link_domain[1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:52:17.817

我会尽可能多地使用内置的 parse_url 来做，这只会让你有域名来整理。我对要求有点不清楚。什么是预期的输出？- 只是 wwwyoursitewww.com？或[http://wwwyoursitewww.com/aaaaa/ggghd/site.php?sadf=asg](http://wwwyoursitewww.com/aaaaa/ggghd/site.php?sadf=asg)

```
$link='http://www.lol.wwwyoursitewww.com/aaaaa/ggghd/site.php?sadf=asg';

$url = parse_url($link);

if (preg_match("/(www.*?)\.(.*)/", $url['host'], $m)) {
  $url['host'] = $m[2];
}

$rebuild = $url['scheme'] . '://' . $url['host'] . $url['path'] . '?' . $url['query'];

echo "$rebuild\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:09:43.273

```
$link='http://www.lol.wwwyoursitewww.com/aaaaa/ggghd/site.php?sadf=asg';
preg_match('!www((\.(\w)+))+!', $link, $match);
$link_arr=(explode(".", $match[0]));
echo $link_domain = $link_arr[count($link_arr)-1]; 
```

输出：`com`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T18:10:56.923

获取`host`没有子域。一起工作`www`

```
/**
   * Get Host without subdomain
   * @param $host
   * @return string
   */
  public static function giveHost($host): string
  {
    $newHost    = $host;
    $host_array = explode('.', $host);
    $countDot   = count($host_array);
    if ($countDot > 2){
      $newHost = $host_array[$countDot-2].'.'.$host_array[$countDot-1];
      if (preg_match('/www/', $host)){
        $newHost = 'www.'.$newHost;
      }
    }
    return $newHost;
  } 
```

# mysql - 当我 ORDER BY 计算列时，查询会显着减慢 - 可以加快速度吗？

> ID：11111020
> 
> 赞同：1
> 
> 时间：2012-06-19T23:41:59.120
> 
> 标签：mysql, sql-order-by, query-optimization

以下查询需要 25 秒以上才能完成：

```
SELECT c.* , (c.age+ (UNIX_TIMESTAMP()-UNIX_TIMESTAMP(c.newdate))) AS ranking , IF(uc.id_user = 7,1,0) AS favorite
FROM c 
LEFT OUTER JOIN uc ON uc.id_cluster = c.id AND uc.id_user = '7' 
LEFT OUTER JOIN d ON d.id_cluster = c.id 
LEFT OUTER JOIN dt0 ON dt0.id_document = d.id 
LEFT OUTER JOIN t0 ON dt0.id_term = t0.id 
WHERE MATCH(t0.normalizacion) AGAINST ('term' IN NATURAL LANGUAGE MODE) 
GROUP BY c.id 
ORDER BY ranking ASC 
LIMIT 30 
```

索引：

*   c.id 初级
*   年龄指数
*   c.newdate 索引
*   uc.id_user, uc.id_cluster PRIMARY
*   d.id 初级
*   d.id_cluster 索引
*   dt0.id_document, dt0.id_term PRIMARY
*   dt0.id_document 索引
*   dt0.id_term 索引
*   t0.id 主要
*   t0.normalizacion FULLTEXT

如果我删除 ORDER BY 子句，只需要 2 秒。

我一直在搜索，发现 GROUP BY 和 ORDER BY 必须使用相同的索引（尝试按 c.id 排序并花费 2 或 3 秒）。如何将查询更改为更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T12:08:44.030

（巩固上面的讨论）

您无法通过计算结果有效地排序。要使此查询快速运行，请创建一个`ranking`包含`c.age-UNIX_TIMESTAMP(c.newdate)`. `id` *然后在and* 上创建一个索引`ranking`，即使`CREATE INDEX id_ranking ON c (id, ranking)`GROUP BY 和 ORDER BY 都被索引。

# mysql - 从默认值确定mysql提交的值

> ID：11111021
> 
> 赞同：0
> 
> 时间：2012-06-19T23:42:25.690
> 
> 标签：mysql, default, fieldtype

我有一个具有整数列的 mysql 表。如果未提交任何值，则数据库默认为 0（零）。不幸的是，这与我们需要的内容冲突，因为不应该将任何值存储为 null 或空。

数据现在具有合法的零（已提交）以及在未为字段输入值时由数据库创建的默认零。

**只是想知道有没有办法从默认零中确定提交的零？**

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:55:13.223

根据您在该列中存储的数据，您似乎需要一个 MySQL 可以使用的默认值，但用户不能选择。

总的来说，据我所知，由于 MySQL 的默认值、插入或更新，无法区分该值是否存在。

# maven - 创建源和 doc jar

> ID：11111023
> 
> 赞同：5
> 
> 时间：2012-06-19T23:42:44.863
> 
> 标签：maven

我注意到 m2eclipse 插件有一些很酷的地方。当我尝试查看 Maven 包含的一个类文件的源代码时，起初它无法向我显示，但随后在后台下载了一个 src JAR 和一个 docs JAR。对于我自己的项目，如何在我的 Maven 存储库中制作和部署这些 JAR 以及我的二进制 JAR？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:24:09.493

您可以通过附加源代码和 javadocs 作为项目构建的一部分来做到这一点。这[本食谱](http://maven.apache.org/plugin-developers/cookbook/attach-source-javadoc-artifacts.html)具有所需的 Maven 配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:39:20.120

Maven 源插件：[http ://maven.apache.org/plugins/maven-source-plugin/usage.html](http://maven.apache.org/plugins/maven-source-plugin/usage.html)

# php - 仅在 PHP 中加载外部 PHP 文件一次

> ID：11111027
> 
> 赞同：0
> 
> 时间：2012-06-19T23:43:28.870
> 
> 标签：php

每当加载 PHP 页面时，我想调用一个外部 PHP 文件。即使用户刷新页面，这个外部 PHP 文件也应该只加载一次。我该怎么办？在调用此外部 PHP 文件之前，我可以设置用户必须等待多长时间的时间间隔吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:47:12.680

您可以使用 require_once 和 session。

```
session_start();

if (!isset($_SESSION['executed'])) {
   require_once('your_file.php');
   $_SESSION['executed'] = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:45:49.820

您可以在上次执行此外部文件时写入文件或更好地写入数据库。因此，每次调用此文件时，您都会比较上次调用它的时间，如果不是太长则退出

# java - 安卓; 在默认按钮声音之后播放按钮声音

> ID：11111029
> 
> 赞同：0
> 
> 时间：2012-06-19T23:43:56.360
> 
> 标签：java, android, button, android-mediaplayer

`raw`在我的应用程序中，我放置了一个按钮，通过从目录中选择一个随机按钮声源来播放自己的声音 。

但是当点击按钮时，默认的 PHONE BUTTON SOUND 首先播放，然后是我的自定义按钮声音。

如何禁用默认的电话按键声音？

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);

    //will fetch a random button sound and load it in this variable.        
    ImageButton amazingPicsButton = (ImageButton) findViewById(R.id.amazingPics);
    amazingPicsButton.getBackground().setAlpha(2);
    amazingPicsButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.jasfiddle.AmazingInterface.AMAZINGPICS"));

            //create random sound
            amazingPicsSound = createRandButSound();
            amazingPicsSound.start();
        }
    });         
}

private MediaPlayer createRandButSound(){
    return MediaPlayer.create(this, buttonSounds[r.nextInt(buttonSounds.length)]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:57:12.287

我认为您需要做的就是：

```
setSoundEffectsEnabled(false); 
```

但是这可能是全局的，您可能需要创建自己的 Button 类并设置 this.setSoundEffectsEnabled(false)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:04:50.267

您可以创建自己的 Button 类并在 XML 布局文件中使用它...

```
package mypackagename.myApp

public class MyButton extends Button {

    public MyButton (Context context, AttributeSet attrs) {
        this.setSoundEffectsEnabled(false);
    }
} 
```

然后在布局文件中为您的按钮使用以下 XML

```
<mypackagename.myApp.MyButton
    ...
</mypackagename.myApp.MyButton> 
```

您也可以尝试`android:soundEffectsEnabled=false`输入一个主题，然后将您的主题分配给您的活动

# php - 前端mysql视图，用复选框删除条目？

> ID：11111031
> 
> 赞同：-1
> 
> 时间：2012-06-19T23:44:18.890
> 
> 标签：php, mysql, onclick, delete-row

我正在建立一个我之前提出并解决的问题：[前端 mysql，删除一行](https://stackoverflow.com/questions/10457022/front-end-mysql-deleting-a-row)

基本上，我有一个前端，用户可以在其中查看数据库。我不想在每一行旁边都有一个删除按钮，而是有一个可以为多行选择的复选框。然后，用户只需单击一个删除按钮，所有选定的行都会被删除。我根本不知道多少 php 和 mysql，所以我不确定如何处理我已经拥有的代码。

目前，onclick 调用删除函数。任何人都可以帮忙吗？

我有一个 php 文件，它将 mysql 数据的 html 输出为 long strong，我需要更改的部分是：

```
$display_string .= "<td class='blank'><input type=\"button\" VALUE=\"Delete\" onclick='delFunction(" . $row['ID'] . ")' ></td>"; 
```

接下来我的删除功能：

```
function delFunction(ID){
    // confirm delete
    if (!confirm(\"Are you sure you want to delete?\")) return false;

    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject(\"Msxml2.XMLHTTP\");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject(\"Microsoft.XMLHTTP\");
            } catch (e){
                // Something went wrong
                alert(\"Your browser broke!\");
                return false;
            }
        }
    }
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
            var ajaxDisplay = document.getElementById('ajaxDiv');
            ajaxDisplay.innerHTML = ajaxRequest.responseText;
        }
    }

    var queryString = \"?ID=\" + ID

    ajaxRequest.open(\"GET\", \"delete_row.php\" + queryString, true);
    ajaxRequest.send(null); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:04:11.997

据我了解您的问题，我发布了一些前端和后端的代码

前端示例代码

```
<body>
<form action="delete.php" method="post">
<input type="checkbox" name="del_chk[]">Item1
<input type="checkbox" name="del_chk[]">Item2
<input type="checkbox" name="del_chk[]">Item3
<input type="checkbox" name="del_chk[]">Item4
.
.
<input type="submit">
</form> 
```

......

您的后端代码现在将是...

```
<?php
if(isset($_POST['del_chk'])){
$chkbox=$_POST['del_chk'];
foreach($chkbox as $key=>$value) {

//Now you can get your value and use it in mysql delete statements

//for example
$del_query="DELETE FROM `yourtable` WHERE `pri_key`=$value;";
if(mysql_query($del_query)) {
echo "Successful Deletion of: ".$value;
}
else 
{
echo "Unsuccessful Deletion of: ".$value;
} 

} //end foreach
}
?> 
```

我对ajax了解不多。但是你可以使用ajax来调用这个页面..

# ruby - Ruby 运算符重载

> ID：11111034
> 
> 赞同：2
> 
> 时间：2012-06-19T23:44:25.240
> 
> 标签：ruby

我有一个特定的课程`C`，我想重载一些数学运算符。

我已经超载了`+`, `i`, `*`, ，`/`所以我可以做类似的事情

```
a = C.new
b = C.new
a + b
a + 2
a + 2.0 
```

为了处理最后三种情况，我正在系统地测试操作数的类型： is it `C`，`Fixnum`or `Float`，其他可能性被拒绝。我的第一个问题是：这样做是否正确？

接下来我也希望能够做到

```
2.0 + A 
```

我该怎么做？我应该提供某种转换吗？这两个问题可以用同样的方法解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:50:04.387

我相信“[红宝石运算符重载问题](https://stackoverflow.com/questions/1854203/ruby-operator-overloading-question?rq=1)”的答案通过使用`is_a?`and解决了您的观点`coerce`。

关于你的第一点。Ruby 中的常规方法是尽可能使用`respond_to?`，而不是检查类型。如果由于某种原因您特别需要检查类型，那么使用`is_a?`是正确的方法。

# mobile - h.264/svc 移动支持

> ID：11111036
> 
> 赞同：4
> 
> 时间：2012-06-19T23:45:02.697
> 
> 标签：mobile, h.264

我是 H.264/SVC 标准的新手。我研究发现android、ipad和iOSx等移动设备都支持H.264/AVC。由于 H.264/SVC 是 H.264/AVC 的扩展，具有基本配置文件和增强配置文件的多层结构，我想知道支持 H.264/AVC 的设备是否也支持 H.264/SVC ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:51:48.963

根据我对此事的（仅理论上的）研究，H.264 AVC 播放器将无法开箱即用地解码 H.264 SVC 流。

但是在服务器上使用 SVC 作为编码格式并不一定意味着您将 SVC 编码数据流式传输到客户端。从 SVC 到 AVC 的转换可以在服务器端完成，只需很少的计算工作。这不是重新编码！市场上越来越多的解决方案在服务器上使用 H.264 SVC 文件格式，但在确定可用网络带宽后仍以定制的数据速率向其客户端发送 AVC 流。这样，流媒体系统与现有的客户群保持兼容，但已经可以在服务器上使用 SVC 的优势（例如，每个视频只有一个文件，并且存储开销非常低）。

另一方面，如果您的客户端能够处理它们，则确实可以以 SVC 格式发送流。如果需要，这些 SVC 流可以具有降低的数据速率 - 取决于可用带宽 - 可以通过删除 SVC 层轻松地从原始 SVC 文件中提取并且具有低计算能力。在许多情况下，只要可用带宽不允许流式传输完整的 SVC 文件，动态重建流并发送减少的层集（向下到简单的基础层）将是有意义的。毕竟这就是 SVC 的意义所在：可以从单个主文件或高带宽 SVC 流中快速生成带宽减少的版本。

实际上，从 SVC 流中删除层甚至可以在从服务器到客户端的途中在专门的中间网络节点和代理上即时发生。这允许在网络连接的以下部分的带宽对于完整的传入流来说太低时降低信号数据速率。

我为从 SVC 文件动态生成适应的 SVC 或 AVC 流的系统找到的一些提供程序是

*   [Radvision](http://www.radvision.com/Solutions/Video-Communications-Technology/Scalable-Video-Coding/)（视频会议），
*   [Vidyo](http://www.vidyo.com/technology/)（视频会议）和
*   [拉伸](http://search.stretchinc.com/search?q=svc&Submit.x=-717&Submit.y=-60&Submit=GO&site=Stretchinc&client=Stretchinc&proxystylesheet=Stretchinc&output=xml_no_dtd)（视频硬件）。

有关 H.264 SVC 的更多详细信息，请参阅以下链接：

*   [http://www.streaminglearningcenter.com/articles/h264--scalable-video-coding---what-you-need-to-know.html](http://www.streaminglearningcenter.com/articles/h264--scalable-video-coding---what-you-need-to-know.html)
*   [http://www.eetimes.com/design/signal-processing-dsp/4017613/Tutorial-The-H-264-Scalable-Video-Codec-SVC-?pageNumber=0](http://www.eetimes.com/design/signal-processing-dsp/4017613/Tutorial-The-H-264-Scalable-Video-Codec-SVC-?pageNumber=0)。

# jquery - CSS/JQuery 建议：显示悬停在链接上并切换 div

> ID：11111037
> 
> 赞同：2
> 
> 时间：2012-06-19T23:45:05.327
> 
> 标签：jquery, css

我有一个链接（水平导航栏项目），当用户将鼠标悬停在它上面时，另一个`div`应该`slideDown`就在下面。`.toggle`不起作用，因为当您将鼠标悬停在链接上时，它会不断切换 div。

我尝试编写自己的使用`mouseover`，`mouseOut`但它太敏感并且`div`在显示器之间来回翻转（块，无）。

这是我的 jQuery：

```
 $(".topHorzNavLink").mouseover(function() {

    //get which link we hovered over
    var thisHorzLink = $(this).attr('linkItem');

    if (thisHorzLink == "link2") {

        $("#hoverContainer").slideDown('slow');

    }

});

$(".topHorzNavLink").mouseout(function() {

    //get which link we hovered over
    var thisHorzLink = $(this).attr('linkItem');

    if (thisHorzLink == "link2") {

        $("#hoverContainer").slideUp('slow');

    }

}); 
```

这是 HTML（我知道，呃，它在某些时候会是动态的）：

```
<nav id="topHorzNav">

            <div id="topHorzNavLinks">

                <ul>
                    <li><p class="topHorzNavLink" linkItem="link1"><a href="#">Link 1</a></p></li>
                    <li><p class="topHorzNavLink" linkItem="link2"><a href="#">Link 2</a></p>
                <div id="hoverContainer">
                    <div class="colContainer">
                        <div class="colContainer">
                            <div class="colContainer">
                                <div class="colContainer">
                                    <div class="colContainer">

                                        <!--col 1-->
                                        <div class="col">
                                            <p class="colHeader">Heading 1</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                        </div>

                                        <div class="colDivider">&nbsp;</div>

                                        <!--col2 -->
                                        <div class="col">
                                            <p class="colHeader">Heading 2</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                        </div>

                                        <div class="colDivider">&nbsp;</div>

                                        <!--col3 -->
                                        <div class="col">
                                            <p class="colHeader">Heading 3</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                        </div>

                                        <div class="colDivider">&nbsp;</div>

                                        <!--col4 -->
                                        <div class="col">
                                            <p class="colHeader">Heading 4</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                        </div>

                                        <div class="colDivider">&nbsp;</div>

                                        <!--col5 -->
                                        <div class="col">
                                            <p class="colHeader">Heading 5</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                            <p class="colText">Lorem Ipsum Dolar</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    </li>
                    <li><p class="topHorzNavLink"><a href="#" class="topHorzNavLink" linkItem="link3">Link 3</a></p></li>
                    <li><p class="topHorzNavLink"><a href="#" class="topHorzNavLink" linkItem="link4">Link 4</a></p></li>
                </ul>

            </div>

            <div id="topHorzNavRight">&nbsp;</div>

        </nav>
        <!--end top horz nav items--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T10:24:33.350

您需要使用该[`.stop()`](http://api.jquery.com/stop/)功能清除排队的动画，否则每次进出时`<li>`都会触发更多动画。另一个问题是，*即使指针位于子元素内*[`mouseover()`](http://api.jquery.com/mouseover/)，您也正在使用它触发动画。还会创建当指针离开子元素时冒泡的事件。你最好使用and 。*`mouseout()`[`.mouseenter()`](http://api.jquery.com/mouseenter/)[`.mouseleave()`](http://api.jquery.com/mouseleave/)*

 *这是一个使用 HTML5 和 jQuery 1.7.2[**的演示。**](http://jsfiddle.net/2KkQC/)我不得不说你的例子非常冗长！

### HTML

```
<nav>
    <ul>
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a>
            <div>
                <!--col 1-->
                <section>
                    <header><h1>Heading 1</h1></header>
                    <article>
                        <p class="colText">Lorem Ipsum Dolar</p>
                        <p class="colText">Lorem Ipsum Dolar</p>
                    </article>
                </section>
                <!--col2 -->
                <section>
                    <header><h1>Heading 2</h1></header>
                    <article>
                        <p class="colText">Lorem Ipsum Dolar</p>
                        <p class="colText">Lorem Ipsum Dolar</p>
                    </article>
                </section>
                <section>
                    <header><h1>Heading 3</h1></header>
                    <article>
                        <p class="colText">Lorem Ipsum Dolar</p>
                        <p class="colText">Lorem Ipsum Dolar</p>
                    </article>
                </section>
                <section>
                    <header><h1>Heading 4</h1></header>
                    <article>
                        <p class="colText">Lorem Ipsum Dolar</p>
                        <p class="colText">Lorem Ipsum Dolar</p>
                    </article>
                </section>
                <section>
                    <header><h1>Heading 4</h1></header>
                    <article>
                        <p class="colText">Lorem Ipsum Dolar</p>
                        <p class="colText">Lorem Ipsum Dolar</p>
                    </article>
                </section>
            </div>
        </li>
        <li><a href="#">Link 3</a></li>
        <li><a href="#">Link 4</a></li>
    </ul>
</nav>​ 
```

### CSS

```
ul {
    width:150px;
}
li {
    border:1px dashed lightgrey;
}
li > div {
    display:none;
}
h1 {
   font-size:14px;
}

​section {
    padding-bottom:8px;
    border-bottom:1px dashed lightblue;
} 
```

​​​​</p>

### JavaScript

```
$('li').on({
    mouseenter: function() {
        $(this).find('div:first').stop(true, true).slideDown('slow');
    },
    mouseleave: function() {
        $(this).find('div:first').stop(true, false).slideUp('slow');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:52:55.753

你最好使用这个[`hover()`](http://api.jquery.com/hover/)功能。它有两个参数，每个参数都是一个函数。第一个是针对`mouseover`事件的，第二个是针对`mouseout`事件的。

我尝试了以下代码并且它有效：

```
$(function() {  
$('#nav-list>li').hover(function(e) {
    $(this).children('ul').slideDown(300);
}, function(e) {
    $(this).children('ul').slideUp(200);
});
}); 
```*

# javascript - 使用 jquery 读取命名空间属性

> ID：11111045
> 
> 赞同：4
> 
> 时间：2012-06-19T23:46:20.257
> 
> 标签：javascript, jquery

给定这样的文件：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
<body>
    ...
</body> 
```

如何`xml:lang`使用 jquery 读取属性？我可以查询具有`xml:lang`这样的元素：

```
$('[xml\\:lang]') 
```

但我不知道如何获取属性本身。 `attr('lang')`并且`attr('xml\\:lang')`不工作。我有一个 jsfiddle[在这里](http://jsfiddle.net/paleozogt/HRL7E/)展示这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:52:34.343

`:`只需要在选择器中转义，因为它们指示伪选择器的开始。作为属性名称，您不必转义它：

```
.attr('xml:lang') 
```

[工作正常](http://jsfiddle.net/HRL7E/1/)。

# jquery - 使用 EditableGrid 的多个 mysql 链接网格

> ID：11111046
> 
> 赞同：2
> 
> 时间：2012-06-19T23:46:40.473
> 
> 标签：jquery, datagrid, editablegrid

我正在通过 EditableGrid 演示修改代码以理解它，并通过 write-to-db 示例达到多个网格的工作示例。我是非程序员和 vba-hack。

在非数据库示例中创建多个网格非常简单。然而，试图复制多个网格的代码/结构，我认为*原型*和*这个*对象可能会让我感到困惑

没有 db-link/inline-edit 的多个网格：

```
 window.onload = function() {
            editableGrid = new EditableGrid("DemoGridMinimal"); 
            editableGrid.tableLoaded = function() { this.renderGrid("tablecontent", "testgrid"); };
            editableGrid.loadXML("grid.xml");
            editableGrid = new EditableGrid("DemoGridMinimal2"); 
            editableGrid.tableLoaded = function() { this.renderGrid("tablecontent2", "testgrid"); };
            editableGrid.loadXML("grid.xml");
        } 
```

带有 db 链接和内联编辑的单个网格：（对示例进行了一些修改）

```
function DatabaseGrid() { 
    this.editableGrid = new EditableGrid("demo", {
        enableSort: false,
        tableLoaded: function() { datagrid.initializeGrid(this); },
        modelChanged: function(rowIndex, columnIndex, oldValue, newValue, row) {
            updateCellValue(this, rowIndex, columnIndex, oldValue, newValue, row);
        }
    });
    this.fetchGrid();   
}

DatabaseGrid.prototype.initializeGrid = function(grid) { grid.renderGrid("tablecontent", "testgrid"); };  
DatabaseGrid.prototype.fetchGrid = function() { this.editableGrid.loadXML("loaddata.php"); }; 

window.onload = function() { 
    datagrid = new DatabaseGrid();
}; 
```

如果它有助于放置整体上下文，最终结果是在单个页面上有多个网格，填充单个 sql 查询，由 html 表单输入 {accounting sql injection} 定义，每个网格显示来自 db 的不同字段

有人可以简单地解释一下*原型*的上下文和*这里*的例子吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:58:47.257

由 freelancer.com 提供。

使用“函数 DatabaseGrid()”创建每个网格，对每个网格进行 PHP 调用以填充它们，并使用“$(document).ready(function()”列出每个连续的网格，以便将每个网格加载到网页上

# matlab - 在 Matlab 中上传一个 .AVI 文件并在屏幕上移动它

> ID：11111048
> 
> 赞同：0
> 
> 时间：2012-06-19T23:46:47.920
> 
> 标签：matlab, avi

我是 Matlab 的新手，我只想知道 Matlab 是否允许我们上传 swf 文件。如果没有，我知道可以上传电影（例如 AVI）。我可以上传电影并在播放时以一定的速度和动作将其移动到屏幕的不同点吗？我需要一个特定的工具箱吗？

谢谢哟哟！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:44:28.497

我能想到的唯一方法是在轴对象中显示图像/电影，然后在包含的图形中移动轴。

```
f = figure();
a = axes('Units', 'Normalized', 'Position', [0 .5 .1 .1]);

while true
  pos = get(a,'Position');
  pos(1) = mod(pos(1) + .01, 1);
  set(a, 'Position', pos);
  pause(.01); 
  drawnow; 
end 
```

要使其与电影一起使用，您需要在轴内绘制电影

# asp.net-mvc - Knockout.js foreach 绑定值未分配给当前对象

> ID：11111052
> 
> 赞同：1
> 
> 时间：2012-06-19T23:47:09.587
> 
> 标签：asp.net-mvc, knockout.js, knockout-2.0

我有一个简单的[jsfiddle](http://jsfiddle.net/loop/bwzqs/3/)，我正在尝试更改每个 foreach 绑定的值。如果我尝试更改一行的值，则绑定会更新我不想要的所有其他行。这个绑定有什么问题？

```
<div data-bind="foreach:lines">
<div>
    <input data-bind="value: qty, valueUpdate: 'keyup'" />
    <label data-bind="text: qty"></label>
</div> 
```

```
var Product = function (qty) {
 self = this;
 self.qty = ko.observable(qty);
};
var Cart = function () {
 self = this;
 self.lines = ko.observableArray([]);
 self.lines.push(new Product(1));
 self.lines.push(new Product(2));
};
ko.applyBindings(new Cart()); 
```

更新：我将 self.lines.push 移入购物车模型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:40:24.007

问题是您缺少`var`. `self = this`它需要是`var self = this`。在您的示例中，`self`是一个全局变量，每个对象共享相同的`self`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:56:53.533

购物车是您的模型：

```
var c  = new Cart();
ko.applyBindings(c);

c.lines.push(new Product(1))
c.lines.push(new Product(2));​

http://jsfiddle.net/gY26k/ 
```

# android - 如何让精灵在被触摸时做某事（Android AndEngine）？

> ID：11111055
> 
> 赞同：0
> 
> 时间：2012-06-19T23:47:17.087
> 
> 标签：android, touch, sprite, andengine

如何让精灵在被触摸时做某事（具体来说，我希望它的大小增加。）我试过：

```
private void createSpriteOnTap(float x, float y)
    {
        final Sprite yourSprite = new Sprite(x, y, textureRegionForYourSprite, getVertexBufferObjectManager())
        {           
            @Override
            public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) 
            {
                //if(pSceneTouchEvent.isActionDown()){
                    if (pSceneTouchEvent.isActionMove())
                    {
                        // while player is touching our sprite
                        setScale(scale += 0.1);
                        setPosition(pSceneTouchEvent.getX() - getWidth() / 2, pSceneTouchEvent.getY() - getHeight() / 2);
                    }

                    if(pSceneTouchEvent.isActionDown())
                            setScale(scale += 0.1);
                return true; 
            }
        }; 
```

但是精灵只有在移动或被点击时才会增加大小，而不是被握住。在用户抬起手指之前，如何使其尺寸增加？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:12:45.330

好吧，如果您在精灵区域内捕获 mousedown 事件，您可以使用 CountDownTimer 例如开始放大精灵。鼠标向上将停止计时器。请参阅：http: [//developer.android.com/reference/android/os/CountDownTimer.html](http://developer.android.com/reference/android/os/CountDownTimer.html)

所以在这里你会在鼠标按下时启动它。

```
CountDownTimer spriteScaleTimer = new CountDownTimer(30000, 1000) {

 public void onTick(long millisUntilFinished) {
     mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     // put scaling here
 }

 public void onFinish() {
     mTextField.setText("done!");
     // Max scale size.
 }
 }.start(); 
```

然后在鼠标上：

```
spriteScaleTimer.cancel(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T08:45:00.217

我已经这样做了 -

```
@Override
public boolean onAreaTouched(TouchEvent pSceneTouchEvent,
        float pTouchAreaLocalX, float pTouchAreaLocalY) {

    if(pSceneTouchEvent.isActionDown()){
        flagTouch=true;
    }
    if(pSceneTouchEvent.isActionMove()) {
        flagTouch=false;
        setScale(1f);
    }
    if (pSceneTouchEvent.isActionUp()) {
        flagTouch=false;
        setScale(1f);   
    }
    return true;
}

@Override
protected void onManagedUpdate(float pSecondsElapsed) {
     if(flagTouch){
         setScale(1.5f);
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T05:40:42.037

我认为以下代码对您有用，因为我已经对其进行了测试并且对我有用。

```
final Sprite sprite = new Sprite(centerX, centerY, mFaceTextureRegion) {

        @Override
        public boolean onAreaTouched(TouchEvent pSceneTouchEvent,
                float pTouchAreaLocalX, float pTouchAreaLocalY) {

            if(pSceneTouchEvent.isActionDown())
                flagTouch = true;

            if(pSceneTouchEvent.isActionUp())
                flagTouch = false;

            setPosition(pSceneTouchEvent.getX() - getWidth() / 2,
                    pSceneTouchEvent.getY() - getHeight() / 2);
            return true;
        }

        @Override
        protected void onManagedUpdate(float pSecondsElapsed) {
            super.onManagedUpdate(pSecondsElapsed);

            if(flagTouch)
                setScale(scale+=0.1f);
        }
    }; 
```

# c++ - 这个多重继承的例子在 C++ 中可以接受吗？

> ID：11111056
> 
> 赞同：1
> 
> 时间：2012-06-19T23:47:22.367
> 
> 标签：c++, multiple-inheritance

我有两个（不相关的）课程。第一个是“点”：

```
typedef std::complex<double> complex_number;

class Point
{
public:
    Point(const complex_number &affix);

    const complex_number & get_affix() const;
    void set_affix(const complex_number & new_affix);

    // etc
private:
    complex_number affix_;
}; 
```

（顺便说一句，很抱歉问了这个不相关的问题，但是在哪里放置我的类型定义的正确位置？这里是我的 point.hpp 文件的顶部，“良好做法”吗？）

第二个是“Abstract_Vertex”（这意味着稍后将成为抽象图的一部分）：

```
typedef int vertex_label;

class Abstract_Vertex
{
public:
    Abstract_Vertex(const vertex_label &label);

    const vertex_label & get_label() const;
    const vertex_label & get_neighbor_label(const int &index) const;
    void set_label(const vertex_label &new_label);

    bool is_neighbor_label(const vertex_label &label) const;

    // etc
protected:
    vertex_label label_;
    std::vector<vertex_label> neighbor_labels_;
}; 
```

现在我想创建第三个类，“Plane_Vertex”（位于平面某处的顶点）。我正在考虑两种方法来做到这一点：

1.  多重继承：Plane_Vertex 类继承自 Point 和 Vertex，并且没有任何成员

2.  Plane_Vertex 类仅继承自 Vertex 并具有私有`Point point_`成员。

当然，我可以很容易地避免多重继承，而只选择选项 2。但我是一个认真的 C++ 学习者，我想知道在我的情况下会有什么“好的做法”。

感谢您的见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:29:26.343

可能还有第三种选择。您可以像标准库那样做，并制作`AbstractVertex`模板。然后，您可以在模板中实现图形导航和通用功能，并让用户提供值以作为模板参数存储在节点中。

因为设计是妥协的，所以我要从我的角度指出主要的不同之处。

*相关/不相关的顶点类型*

在模板方法中，不同的实例化是完全不同的类型。这意味着`Vertex<int>`和`Vertex<Point>`不相关。另一方面，在所有顶点的多态方法中`IntVertex`，`PointVertex`...是`AbstractVertex`对象：您可以将它们组合在容器中并将它们连接起来，或者在可以使用的代码中互换使用它们`AbstractVertex`。这是否是任何一种方法的限制或优势，同样是一个设计决定。我更喜欢不相关的类型，因为我不认为你应该混合这些类型。

*要编写的代码量*

在模板方法中，您实现模板，然后您只需实例化，在多态方法中，您需要为要包含在图中的每个可能元素提供一个新类

如果最后你决定采用多态方法（我不会），那么我会避免使用这两种类型的多重继承，而是更喜欢组合。一般来说，继承可能是面向对象语言中被滥用最多的特性，它可以用来*解决*许多问题，有时它似乎是最简单的解决方案*，*但事实并非如此。特别是您的基类型似乎都不是为继承而设计的，没有功能可以被派生类型覆盖，也没有虚函数。这些清楚地表明您在组合就足够的情况下滥用继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:09:21.310

通常，除非您有充分的理由进行多重继承，否则请避免使用它。

原因：

1.  你避免了[钻石问题](http://en.wikipedia.org/wiki/Diamond_problem)。
2.  保持设计尽可能简单——在几个层次之后，多重继承真的很难遵循和维护。
3.  当您不使用多重继承时，通常更容易检查您的类是否满足良好设计的[SOLID原则。](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)
4.  [组合](http://www.artima.com/designtechniques/compoinhP.html)和/或[聚合](http://en.wikipedia.org/wiki/Object_composition#Aggregation)通常提供好的或更好的方法。
5.  测试你的课程更容易。

这些应该足以让您入门。乔恩·凯奇（Jon Cage）链接到的帖子中有更多的智慧。

因此，回答您的问题：您似乎没有足够的理由使用多重继承。使用组合。

# python - 对 Flask 应用程序类进行单元测试

> ID：11111058
> 
> 赞同：7
> 
> 时间：2012-06-19T23:48:14.240
> 
> 标签：python, unit-testing, flask, nose

我对 Python 还很陌生，所以如果这对于一些基本的东西来说太麻烦了，我提前道歉。

我的情况类似于[如何使用 SQLAlchemy 设置 Flask 应用程序进行测试？](https://stackoverflow.com/questions/5025720/how-do-you-set-up-a-flask-application-with-sqlalchemy-for-testing)对我来说最大的不同是，与我在 Internet 上看到的大多数其他 Flask 示例不同，我的应用程序的大部分代码都在一个类中。出于某种原因，这导致我的单元测试无法正常工作。以下是我的应用程序和测试的基本设置：

**应用：**

```
from Flask import Flask

app = Flask(__name__)

class MyApplication():
    def __init__(self, param1, param2):
        app.add_url("/path/<methodParam>", "method1", self.method1, methods=["POST"])
        # Initialize the app

    def getApplication(self):
       options = # application configuration options
       middleware = ApplicationMiddleware(app, options)
       return middleware

    def method1(self, methodParam):
        # Does useful stuff that should be tested
    # More methods, etc. 
```

**应用测试：**

```
import unittest
from apppackage import MyApplication

class ApplicationTestCase(unittest.TestCase):

    def setUp(self):
        self.tearDown()
        param1 = # Param values
        param2 = # Param values
        # Other local setup 
        self.app = MyApplication(param1, param2).app.test_client()

    def tearDown(self):
       # Clean up tests

    def test_method1(self):
        methodParam = # Param value
        response = self.app.post("path/methodParam")
        assert(reponse.status_code == 200) 
```

当我通过

> 鼻子测试 --with-coverage --cover-package apppackage ./test/test_application.py

我收到以下错误：

> param2).app.test_client() AttributeError: MyApplication instance has no attribute 'app'

我已经尝试在类声明中移动应用程序，但这没有任何好处，而且我见过的所有其他单元测试指南都不是这样做的。为什么我的单元测试找不到“app”属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:47:57.673

您的单元测试找不到“app”属性，因为 MyApplication 没有。在定义 MyApplication 的模块中有一个“app”属性。但那是两个不同的地方。

也许尝试以下方法：

```
class MyApplication(object):
    def __init__(self, param1, param2):
        self.app = Flask(__name__)
        self.app.add_url("/path/<methodParam>", "method1", self.method1, methods=["POST"])
        # Initialize the app 
```

或者，您似乎也有一个“getApplication”方法，您并没有真正做任何事情，但我想您正在使用它来做某事。也许您实际上希望在测试中使用它...

```
def setUp(self):
        self.tearDown()
        param1 = # Param values
        param2 = # Param values
        # Other local setup 
        self.app = MyApplication(param1, param2).getApplication().test_client() 
```

# jquery - 浏览器如何区分用户点击和程序化点击？

> ID：11111059
> 
> 赞同：15
> 
> 时间：2012-06-19T23:48:28.327
> 
> 标签：jquery, browser, click

如果我使用 jquery 发起点击`window.open()`，它会被弹出阻止程序阻止，如果我手动点击，则窗口不会被阻止。两者的浏览器有何不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:58:55.603

[在这个 bug](https://bugzilla.mozilla.org/show_bug.cgi?id=197919)上详细讨论了 Firefox 的实现，并且[这个另一个 bug](https://bugzilla.mozilla.org/show_bug.cgi?id=126224)有一些更有趣的背景，包括站点将经历多长时间才能向毫无戒心的用户强加一个不需要的弹出窗口（在这种情况下：`window.open()`从图像`load`事件）。如果您在 Bugzilla 周围搜索，您会发现 Mozilla 人员花了很多年才让这一切正常工作，例如[这里有一个 2001 的错误](https://bugzilla.mozilla.org/show_bug.cgi?id=92955)。

`window.open()`它目前的工作方式是这样的：当 Firefox 收到来自操作系统的点击事件时，在 JavaScript 中启用一定的时间（在`dom.disable_open_click_delay`中查找`about:config`）。如果您在`click()`没有用户点击的情况下从代码中调用事件，那么第一步，`window.open()`永远不会发生启用，尽管调用`window.open()`本身会成功[阻止站点检测到您启用了弹出窗口阻止](https://bugzilla.mozilla.org/show_bug.cgi?id=181035)。

我不确定其他浏览器是如何实现这些东西的，但如果它有很大的不同，我会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:53:36.173

我相信`click`通过 jQuery 调用实际上并不会真正触发对元素的点击，而是调用监听点击的函数。因此，尽管您正在调用`click()`，但实际上只是在调用一个函数。

当用户点击时，它是真正的点击。

例子：

```
var handler = function () {
    alert('hi');
};

$('#example').on('click', handler);
$('#example').click(); // really just calls handler(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:16:30.567

浏览器的本机代码处理实际的鼠标单击事件（来自操作系统）并创建浏览器事件对象。在浏览器的本机代码中，浏览器知道该事件是由真正的鼠标单击创建的。

我的猜测是事件中附加了一些隐藏数据（无法从 javascript 访问），这让浏览器可以跟踪事件是否是通过真正的鼠标单击启动的，尽管也可能存在其他实现机制。

# python - 如何为不同的 python 日志处理程序设置不同的级别

> ID：11111064
> 
> 赞同：81
> 
> 时间：2012-06-19T23:49:30.143
> 
> 标签：python, logging

我已经阅读了一些关于此的帖子，但我仍然感到困惑。我有这个日志记录设置：

```
import logging

class MongoHandler(logging.Handler):
    def __init__(self):
        logging.Handler.__init__(self)
        from pymongo import Connection
        self.db = Connection('db_server').db_name

    def emit(self, record):
        try:
            self.db.Logging.save(record.__dict__)
        except:
            print 'Logging Error:  Unable to save log entry to db'

mh = MongoHandler()
sh = logging.StreamHandler()
formatter = logging.Formatter('%(asctime)s - %(threadName)s - %(levelname)s - %(message)s')
sh.setFormatter(formatter)
log = logging.getLogger('DeviceMonitor_%s' % hostname)
log.addHandler(mh)
log.addHandler(sh)
log.setLevel(logging.INFO) 
```

我希望能够为 StreamHandler 和 MongoHandler 设置不同的级别。这是可能的还是我需要第二个 Logger obj？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-06-20T00:12:08.130

您可以为每个日志记录处理程序设置不同的日志记录级别，但似乎您必须将记录器的级别设置为“最低”。在下面的示例中，我将记录器设置为 DEBUG，将流处理程序设置为 INFO，将 TimedRotatingFileHandler 设置为 DEBUG。所以该文件有 DEBUG 条目，并且流只输出 INFO。您不能仅将 DEBUG 定向到一个处理程序，而仅将 INFO 定向到另一个处理程序。为此，您需要另一个记录器。

```
logger = logging.getLogger("mylog")
formatter = logging.Formatter(
    '%(asctime)s | %(name)s |  %(levelname)s: %(message)s')
logger.setLevel(logging.DEBUG)

stream_handler = logging.StreamHandler()
stream_handler.setLevel(logging.INFO)
stream_handler.setFormatter(formatter)

logFilePath = "my.log"
file_handler = logging.handlers.TimedRotatingFileHandler(
    filename=logFilePath, when='midnight', backupCount=30)
file_handler.setFormatter(formatter)
file_handler.setLevel(logging.DEBUG)

logger.addHandler(file_handler)
logger.addHandler(stream_handler)

logger.info("Started");
try:
    x = 14
    y = 0
    z = x / y
except Exception as ex:
    logger.error("Operation failed.")
    logger.debug(
        "Encountered {0} when trying to perform calculation.".format(ex))

logger.info("Ended"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-21T18:20:55.100

我需要时间来理解这一点

1.  在您的子记录器（处理程序）下方设置**通用记录器**（您的 logging.getLogger() 的结果）
2.  将您的子记录器级别设置为与一般记录器**相同或更高的级别**

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-28T09:19:51.090

GrantVS 回答的补充：

我不得不使用

```
logging.basicConfig(level=logging.DEBUG) 
```

为了让它工作。否则很好的答案，谢谢！

马里奥

PS：由于某种原因，系统不允许我直接评论 GrantVS 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-31T09:57:21.540

有同样的问题，但解决方案不适用于 iPython，因为 QtConsole 会自动创建一个没有级别集的处理程序：

```
import logging                                                                                                                               
root = logging.getLogger()                                                                                                                   
root.handlers                                                                                                                                
Out: [<StreamHandler <stderr> (NOTSET)>] 
```

结果 iPython 将 DEBUG 和 INFO 都打印到控制台，尽管我的文件处理程序和流处理程序具有不同的级别。

该线程为我指出了这个问题：[Logging module does not print in IPython](https://stackoverflow.com/questions/24259952/logging-module-does-not-print-in-ipython)

我制作了一个名为 custom_logging.py 的辅助模块（这个堆栈线程帮助很大！），以便在其他模块中更方便地进行日志记录：

```
import logging
from pathlib import Path
import sys

def _add_stream_handler(logger: logging.Logger):

    stream_handler = logging.StreamHandler()
    formatter = logging.Formatter('%(name)-12s: %(levelname)-8s %(message)s')
    stream_handler.setFormatter(formatter)
    stream_handler.setLevel(logging.INFO)

    logger.addHandler(stream_handler)

    return logger

def _add_file_handler(logger: logging.Logger, log_path: Path):

    file_handler = logging.FileHandler(log_path, mode='w')
    formatter = logging.Formatter(
        fmt='%(asctime)s %(name)-12s %(levelname)-8s %(message)s', datefmt='%m-%d %H:%M')

    file_handler.setFormatter(formatter)
    file_handler.setLevel(logging.DEBUG)

    logger.addHandler(file_handler)

    return logger

def create_logger(root_dir: Path, caller: str) -> logging.Logger:

    log_path = root_dir / 'logs' / f'{caller}.log'
    logger = logging.getLogger(caller)
    root = logging.getLogger()

    logger.setLevel(logging.DEBUG)

    # If haven't already launched handlers...
    if not len(logger.handlers):

        _add_file_handler(logger=logger, log_path=log_path)
        _add_stream_handler(logger=logger)

        logger.info('Logging started.')

    # Delete the Qtconsole stderr handler
    # ... as it automatically logs both DEBUG & INFO to stderr
    if root.handlers:
        root.handlers = []

    return logger

def log_dataframe(df, logger: logging.Logger, name: str = "DataFrame") -> None:

    logger.debug(
        f'''{name} head:\n {df.head()}\n----------\n''')

def log_dataframes(*args, logger: logging.Logger) -> None:

    for gdf in args:

        logger.debug(
            f'''DataFrame head:\n {gdf.head()}\n----------\n''') 
```

可以通过以下方式使用其功能：

```
from custom_logging import create_logger, log_dataframe 
```

或者`import custom_logging`等等`custom_logging.create_logger()`。

另请参阅官方日志记录手册中的“多个处理程序和格式化程序”和“记录到多个目的地”部分： [https ://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook](https://docs.python.org/3/howto/logging-cookbook.html#logging-cookbook)

# android - Modem 代码如何与 Android 代码对话

> ID：11111067
> 
> 赞同：42
> 
> 时间：2012-06-19T23:50:07.157
> 
> 标签：android, android-source, modem, ril

我想知道 Android Modem 代码如何调用/传递消息到 Android 应用层的高级概念。假设我们以短信为例。如果网络发送短信和调制解调器（比如高通 C 代码解析它）它是如何传输到 Android 应用层的？

是否总是发生 JNI 调用？作为调制解调器和Android之间的接口？能否请您与我们分享信息。谢谢

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-06-20T02:13:03.780

在 AOSP/CAF/CM 源代码（分别为 Android 开源项目、CodeAurora 论坛、Cyanogenmod）中找到的几乎所有 android 源代码库中，都会有称为**rild**的 C 代码（无线电接口层守护程序）。这通常在`/hardware/ril`源代码树中找到。

这个守护进程从 Android 启动的那一刻开始运行，并创建一个名为`/dev/socket/rild`and的套接字`/dev/socket/rild-debug`。将有一个来自高通、HTC 的专有库，它会在启动时在运行时动态加载。反过来，正是该专有库与无线电固件通信。并且**rild**用于回调到专有库的钩子是在那里建立的。

在**rild**层，通过上述套接字，是 Android 层（在源代码树中找到`frameworks/base/telephony/com/android/internal/telephony/RIL.java`）的通信方式。

在 Java 端，它打开用于读/写的套接字，同时建立意图并设置委托以通过此套接字广播/接收事件。

例如，传入呼叫（专有库）调用由**rild**设置的回调挂钩。**rild**将标准通用 AT Hayes 调制解调器命令写入套接字，在 Java 端，它读取并解释调制解调器命令，然后PhoneManager*广播*，`CALL_STATE_RINGING`其中*Phone*应用程序（在源代码中找到`packages/apps/Phone`）已注册接收器并启动用户界面，这就是您接听电话的方式。

另一个例子，拨打一个电话，你在Android上拨打一个号码，intent被创建，然后是*PhoneManager*（***这是它的根源***，在这里，不记得我的头顶，认为它在`frameworks/base/core/java`源的某个地方tree) 接收意图，将其转换为 AT Hayes 调制解调器命令序列，将其写入套接字，然后**rild**调用专有库的回调，专有库依次委托给无线电固件。

最后一个示例，从*Messaging*（在`packages/apps/Mms`源代码树中找到）应用程序发送文本消息，您键入的文本被推送到一个意图中，*PhoneManager*接收该意图，使用 7 位 GSM 字母（IIRC）将文本转换为 GSM 编码)，被写入套接字，**rild**反过来调用专有库的回调，专有库又委托给无线电固件，文本现在已经离开手机的域并在某处的电波中。 . :) 除了在 Android 内部发送广播消息外，只要在***AndroidManifest.xml***`READ_PHONE_STATE`中使用并指定了权限。

 *同样相反，当接收到文本消息时，情况正好相反，无线电固件接收到一些字节，专有库调用**rild**的回调，从而将字节写入套接字。在 Java 端，它读取它，解码字节序列，将其转换为我们所知道的文本，触发带有消息接收通知的广播。*Messaging*应用程序依次为所述广播注册接收者，并向通知栏发送一个意图，如“*收到来自 +xxxxxx 的新消息*”

意图在`frameworks/base/telephony/java/com/android/internal/telephony/TelephonyIntents.java`

这就是电话系统如何工作的要点，真正的美在于它使用通用的 AT Hayes 调制解调器命令，从而简化和隐藏了真正的专有机制。

至于高通、HTC 之类的公司，因为无线电话层嵌入在 SoC（片上系统）电路中，所以他们认为他们曾经开源过有问题的库，所以忘记了它！

这也是，作为旁注，为什么刷无线电固件有风险，一些手机提供了这样做的能力，刷错误的固件（例如不兼容或不适合手机），与手机告别并使用作为门挡或镇纸！:)

应该注意的是，涉及的 JNI 机制为零。

. 我在这里猜测它是如何工作的。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T20:34:59.593

继续 t0mm13b 的解释，当我们谈论智能手机时，想想 SMS/Calls 的 3 层操作。

RIL（用户级别）<-> AP <-> CP

AP：应用处理器（运行您的 Android 操作系统的地方。想想在此处理器上运行的游戏、歌曲、视频、相机等）

CP：蜂窝处理器（实际上处理传入/传出呼叫/短信的空中接口，与网络塔等交互..）

现在假设在 CP 端接收到一些数据（可能是互联网数据/短信/通话）。现在AP和CP之间有一定的逻辑信道。所以CP会根据数据类型将接收到的数据推送到相应的通道。该数据将由 AP 接收。AP 会将这些数据发送回 RIL/App。RIL 将解码这些数据（特别是通话/短信数据）。基于此，向用户提供有关 SMS/Call 的通知。*

# javascript - Tubeplayer 导致元素（短暂）重新出现在 chrome 中？

> ID：11111068
> 
> 赞同：1
> 
> 时间：2012-06-19T23:50:10.367
> 
> 标签：javascript, google-chrome, youtube-javascript-api

我正在开发一些 javascript 以使用[tubeplayer](http://www.tikku.com/jquery-youtube-tubeplayer-plugin)插件将 youtube 视频插入页面。视频在用户单击链接时插入，在用户单击关闭按钮时删除。

在大多数情况下，脚本工作正常。当用户点击关闭按钮时，按钮滑开，视频播放器淡出，容器淡出，一切看起来都和用户点击链接前一样。

然而，在 Chrome 中，当一切都淡出之后，视频和关闭按钮偶尔会在短暂的闪光中重新出现。它并不一致——它只发生了大约一半的时间——但它看起来很糟糕。

我已经尝试了各种各样的方法来解决这个问题——隐藏元素，而不是隐藏元素，在脚本中的各个点删除元素——而且它一直在发生。我唯一确定的是，tubeplayer 是必要的元素。如果我取出 tubeplayer 并仅显示/隐藏其他元素，则不会出现闪光灯。

我完全不知道如何防止这种情况发生。任何帮助将不胜感激。

这是我的标记：

```
<section id="hero">
  <div class="item-content">
    <a href="http://www.youtube.com/watch?v=sC_IESaVT0A" class="youtube">
      <img src="/dynamic-content/solutions/hero_content_mobility.png">
    </a>
  </div>
</section>

<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        jnet.ytplayer.init('#hero', 711, 400, '#000');
    });
</script> 
```

和脚本：

```
ytplayer = {

    $target:null,
    height:null,
    width:null,
    background:null,
    defaults:{
     allowFullScreen: "true",
     initialVideo: 'FtUtE_kv7DU',
     preferredQuality: "default",
     showControls: 1,
     showRelated: 0,
     autoPlay: 1,
     autoHide: 3,
     border: 0,
     theme: 'dark',
     wmode: 'opaque',
     origin: document.domain,
     swfobjectURL: "/assets/js/jquery/plugins_jq.js",
     allowScriptAccess: "always",
     playerID: "tubeplayer-player-container",
     loadSWFObject: false,
     iframed: true,
     onPlayerEnded: function(){
         ytplayer.removeVideo();
        }
    },
    init:function(target, w, h, bg){
        this.$target = $(target);
        this.defaults.height = h;
        this.defaults.width = w;
        this.background = bg;

    },
    showVideo:function(link){
        var id = $(link).attr("href").replace("http://www.youtube.com/watch?v=", "");
        this.defaults.initialVideo = id;
        var markup = "<div id='youtube-container'>";
        markup +=           "<div id='youtube-player'>";
        markup +=            "<div id='youtube-closeBtn'></div>";
        markup +=            "<div id='youtube'></div>";
        markup +=           "</div>";
        markup +=       "</div>";
        this.$target.prepend(markup);
        $('#youtube-closeBtn').click(function(){
            ytplayer.removeVideo();
        });

        $('#youtube-container').height(this.defaults.height);
        $('#youtube-container').css('background', this.background);
        $('#youtube').height(this.defaults.height);
        $('#youtube').width(this.defaults.width);
        $('#youtube-player').height(this.defaults.height);
        $('#youtube-player').width(this.defaults.width);
        $('#youtube-container').fadeIn(200);
            $('#youtube-player').fadeIn(600, function() {
                $('#youtube').tubeplayer(ytplayer.defaults);
                $('#youtube-closeBtn').show();
                $('#youtube-closeBtn').animate({ 'right' : '-=49' }, 600, function(){
            });
        });
    },
    removeVideo:function(){
        $('#youtube-closeBtn').animate({'right' : '+=49'}, 200, function() {
            $('#youtube-closeBtn').hide();
            $('#youtube').tubeplayer('stop');
            $('#youtube-player').fadeOut(600, function(){
                $('#youtube-container').fadeOut(100, function(){
                    $('#youtube-container').remove();
                });
            });
        })
    }

} 
```

# python - 根据时间对字典列表值进行排序

> ID：11111071
> 
> 赞同：2
> 
> 时间：2012-06-19T23:50:55.143
> 
> 标签：python, list, sorting, date, dictionary

我对 python 还是很陌生（几周后），我在理解数据结构时遇到了一些麻烦。到目前为止，我所做的是从 .txt 文件中逐行提取文本，并将它们存储到字典中，例如，键为动物。

```
database = {
    'dog': ['apple', 'dog', '2012-06-12-08-12-59'],
    'cat': [
        ['orange', 'cat', '2012-06-11-18-33-12'],
        ['blue', 'cat', '2012-06-13-03-23-48']
    ],
    'frog': ['kiwi', 'frog', '2012-06-12-17-12-44'],
    'cow': [
        ['pear', 'ant', '2012-06-12-14-02-30'],
        ['plum', 'cow', '2012-06-12-23-27-14']
    ]
} 

# year-month-day-hour-min-sec 
```

这样，当我打印我的字典时，它会按动物类型打印出来，并且最先打印最新日期。

按时间排序这些数据的最佳方法是什么？我在 python 2.7 上。我在想的是

对于每个键：

获取列表（或列表列表）-> 获取第三个条目-->`'-'.split`它，--> 然后也许尝试`sorted(parameters)`

我只是不确定该怎么做...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:03:54.950

浏览字典的元素。对于每个值，`sorted`在列表列表上运行，并告诉排序算法使用列表的第三个字段作为“键”元素。此关键元素用于将值与列表中的其他元素进行比较以确定排序顺序。要告诉`sorted`列表中的哪个元素进行排序，请使用`operator.itemgetter`指定第三个元素。

由于您的时间戳具有严格的结构，并且时间戳中的每个字符都比下一个字符在时间上更重要，因此您可以像字符串一样自然地对它们进行排序 - 您不需要将它们转换为时间。

```
# Dictionary stored in d
from operator import itemgetter
# Iterate over the elements of the dictionary; below, by
# calling items(), k gets the key value of an entry and 
# v gets the value of that entry
for k,v in d.items():
    if v and isinstance(v[0], list):
        v.sort(key=itemgetter(2)) # Start with 0, so third element is 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T00:05:03.740

如果您的日期都是格式`year-month-day-hour-min-sec`，`2012-06-12-23-27-14`我认为您的拆分步骤没有必要，只需将它们作为字符串进行比较。

```
>>> '2012-06-12-23-27-14' > '2012-06-12-14-02-30'                              
True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T00:15:32.560

首先，您可能希望 dict 中的每个键、值项具有相似的类型。目前，其中一些（例如：database['dog']）是字符串列表（一行），而一些（例如：database['cat']）是行列表。如果您将它们全部放入行列表格式中（即使行列表中只有一项），它会容易得多。

然后，一种（旧）方法是为这些行创建一个比较函数。这很容易，因为您的日期已经采用直接（字符串）可比较的格式。要比较两行，您需要比较其中的第三个（第二个索引）项：

```
def compare_line_by_date(x,y):
    return cmp(x[2],y[2]) 
```

`sorted`最后，您可以通过告诉内置函数使用您的 compare_line_by_date 函数来获得对特定键进行排序的行：

```
sorted(database['cat'],compare_line_by_date) 
```

The above is suitable (but slow, and will disappear in python 3) for arbitrarily complex comparison/sorting functions. There are other ways to do your particular sort, for example by using the `key` parameter of sorted:

```
def key_for_line(line):
    return line[2]

sorted(database['cat'],key=key_for_line) 
```

Using keys for sorting is much faster than cmp because the key function only needs to be run once per item in the list to be sorted, instead of every time items in the list are compared (which is usually much more often than the number of items in the list). The idea of a key is to basically boil each list item down into something that be compared naturally, like a string or a number. In the example above we boiled the line down into just the date, which is then compared.

Disclaimer: I haven't tested any of the code in this answer... but it should work!

# javascript - 使用 CSS 和 jQuery 控制切换按钮

> ID：11111075
> 
> 赞同：0
> 
> 时间：2012-06-19T23:51:17.850
> 
> 标签：javascript, jquery, css, hover

正如您在这个[jsfiddle](http://jsfiddle.net/4mK9q/)中看到的那样，我正在尝试制作一个切换开关（静音按钮）

1.  显示当前设置，即静音或取消静音
2.  悬停在上面时，显示替代

但是，我的问题是当用户单击按钮时，它不会显示对面的按钮，而是显示对面的按钮悬停状态。我希望这是有道理的，哈哈。基本上交互是：

1.  处于取消静音状态的查看按钮
2.  将鼠标悬停在上方并查看静音图标
3.  单击并再次查看取消静音图标，因为它是静音状态悬停图像
4.  当图标没有悬停时，它会显示正确的图标，即静音

在 jsfiddle 示例中，我想要单击以显示按钮，而不是 :hover 属性...任何帮助？我知道这种事情不能单独由 css 处理..（对不起，如果这看起来很混乱，我今天在 codepeak 工作了一段时间......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:30:08.640

考虑这个替代解决方案：

*   使用单个按钮
*   操作`.text()`和`.css()`更改按钮属性
*   由于您需要的特殊情况而实现了自定义切换器

这是代码：

CSS：

```
button { width: 200px; height: 60px; color: white; font-size: 20px; background-color: red; } 
```

HTML：

```
<button class=''> Mute </button> 
```

JS：

```
function unmute() {
    $('button').removeClass('muted');
    $('button').text('Unmute');
    $('button').css('background-color','blue');
}
function mute() {
    $('button').addClass('muted');
    $('button').text('Mute');
    $('button').css('background-color','red');
}

function customToggler() {
    if (disableToggle) return;
    if ($('button').hasClass('muted')) unmute(); else mute();
}

var disableToggle = false;

$(document).ready(function() {

    customToggler();

    $('button').click(function() {
       disableToggle = true;
       customToggler();
    });

    $('button').mouseover(function() {  
        customToggler();
    }).mouseout(function() {  
        customToggler();
        disableToggle = false;
    });
}); 
```

--

要查看上面的代码，请参阅[http://jsfiddle.net/fwjz5/](http://jsfiddle.net/fwjz5/)祝你好运！​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:58:39.450

您可以在 javascript 中处理悬停状态并删除 CSS 状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:44:55.577

好吧，我认为这是目前最短的解决方案：

[http://jsfiddle.net/4mK9q/](http://jsfiddle.net/4mK9q/)

# c - 在 C 中从“.bin”文件创建列表

> ID：11111076
> 
> 赞同：1
> 
> 时间：2012-06-19T23:51:34.533
> 
> 标签：c, file, list, struct, binaryfiles

我的目标是从“menu.bin”创建一个列表。这是函数：

```
 pitem recupera_menu(pitem p){

    pitem novo,aux;

    FILE *f;

                        f=fopen("menu.bin","rb");
                                if(f == NULL)
                                    printf("Erro ao caregar o ficheiro 'menu.bin' \n");

                                novo = (struct item*)malloc(sizeof(item));
                                    if(novo == NULL)
                                        return p;

                                    novo->prox=NULL;

                                    while((fread(novo,sizeof(item),1,f))!=NULL){

                                        if(p==NULL){
                                            p=novo;
                                            aux=p;
                                        }
                                        else{
                                            aux->prox=novo;
                                            aux=aux->prox;
                                        }

                                        printf("%s\n OLE\n",aux->id);

                                    }

                        fclose(f);

                        system("pause");
    return p;
} 
```

这是我的结构：

```
typedef struct item item, *pitem;
struct item{
    char id[5];
    int ing[10];
    float qtd[10];
    pitem prox;
}; 
```

出于某种原因，文件的结果不是应该的（它不读取文件海峡）。也许有人可以帮助我。

编辑：它确实运行了，并打印了“ole”行。问题是文件 .bin 已使用以下结构类型完成：

```
struct item{
    char id[5];
    int ing[10];
    float qtd[10];} 
```

当我做 malloc 时，我将内存分配给以下结构类型：

```
 struct item{
        char id[5];
        int ing[10];
        float qtd[10];
        pitem prox;
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:17:44.333

```
struct item{
        char id[5];
        int ing[10];
        float qtd[10];
    };
struct list{
        struct list *next;
        struct item payload;
    }; 
```

分配：

```
struct list *p;
p = malloc (sizeof *p); 
```

从文件中读取：

```
ret = fread(&p->payload, sizeof p->payload, 1, fp); 
```

额外：清理循环：

```
int recupera_menu(struct list **pp){

    int ret,cnt;
    FILE *fp;

    fp = fopen("menu.bin","rb");
    if (!fp) {
        fprintf(stderr, "Erro ao caregar o ficheiro 'menu.bin' \n");
        return 0;
        }

    for (cnt=0;   ;cnt++) {
        *pp = malloc(sizeof **pp);
        if( !*pp ) break;
        (*pp)->next = NULL;

        ret = fread(&(*pp)->payload, sizeof &(*pp)->payload, 1, fp);
        if (ret < 1) break;
        pp = &(*pp)->next;
    }                               

    free (*pp);
    *pp = NULL;
    fclose(fp);
    return cnt
} 
```

# php - 给定初始纬度 lng，距离和方位角，在 php 中查找纬度经度点

> ID：11111077
> 
> 赞同：7
> 
> 时间：2012-06-19T23:51:58.050
> 
> 标签：php, google-maps, distance, bearing

在 php 中，给定一个纬度和经度点、方位角（以度为单位）和距离（以英尺或公里或其他为单位）我如何确定新的 lat lng 点是什么？这是我尝试过的，但它是错误的。

```
function destinationPoint($lat, $lng, $brng, $dist) {
      $meters = $dist/3.2808399; // dist in meters
      $dist =  $meters/1000; // dist in km
      $rad = 6371; // earths mean radius
      $dist = $dist/$rad;  // convert dist to angular distance in radians
      $brng = deg2rad($brng);  // conver to radians 
      $lat1 = deg2rad($lat); 
      $lon1 = deg2rad($lng);

      $lat2 = asin(sin($lat1)*cos($dist) + cos($lat1)*sin($dist)*cos($brng) );
      $lon2 = $lon1 + atan2(sin($brng)*sin($dist)*cos($lat1),cos($dist)-sin($lat1)*sin($lat2));
      $lon2 = ($lon2+3*M_PI) % (2*M_PI) - M_PI;  // normalise to -180..+180º
      $lat2 = rad2deg($lat2);
      $lon2 = rad2deg($lon2);

        echo "lat2 = ".$lat2."<br/>";
        echo "lon2 = ".$lon2."<br/>";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:35:48.303

只是改变

```
$lon2 = ($lon2+3*M_PI) % (2*M_PI) - M_PI; 
```

到

```
$lon2 = fmod($lon2 + 3*M_PI, 2*M_PI) - M_PI; 
```

根据[PHP 关于模运算符 ( `%`)](http://php.net/manual/en/language.operators.arithmetic.php)的文档，

> 模数的操作数在处理之前被转换为整数（通过去除小数部分）。

[fmod](http://www.php.net/manual/en/function.fmod.php) "[r] 返回参数除法的浮点余数（模）。"

# php - 与教义 2 的关联

> ID：11111084
> 
> 赞同：4
> 
> 时间：2012-06-19T23:52:53.007
> 
> 标签：php, doctrine-orm, many-to-many, associations, many-to-one

我正在尝试创建一个与其他实体有三个关联的学说实体

所以一个项目与：

*   必须与一个 Rssfeed 相关联，它源自
*   可以与一个或多个位置关联
*   可以与一个或多个标签相关联

这是我的尝试：

```
class Item{

    /**
     * @ManyToOne(targetEntity="Rssfeed")
     */
    protected $rssfeed;

    /**
     *
     * @ManyToMany(targetEntity="Location")
     */
    protected $locations;

    /**
     *
     * @ManyToMany(targetEntity="Tag")
     */
    protected $tags;
} 
```

现在

*   如果一个 Rssfeed 被删除，关联的项目也必须被删除
*   如果删除了某个项目，则应分离附加到该项目的 Rssfeeds 和 Locations 和 Tags
*   如果一个位置或标签被删除，相关的项目应该被分离，因为它们是可选的关联。

我应该如何更改我的代码来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:07:10.520

您必须为 $rssfeed 添加 @JoinColumn 和 onDelete="CASCADE" 并为 Location 和 Tag 实体中的外键添加 onDelete="SET NULL" 。

```
 /**
     * @ManyToOne(targetEntity="Rssfeed")
     * @JoinColumn(name="rssfeed_id", referencedColumnName="id", onDelete="CASCADE")
     */
    protected $rssfeed; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T23:26:18.267

对于您的 Item 实体中的每个关联，将 onDelete="SET NULL" 添加到 @JoinColumn 注释。在您的位置和标签实体中，找到 JoinColumn 注释并添加 onDelete="SET NULL" 以与“Item”关联。在 RssFeed 实体下，找到每个 @JoinColumn 注释并添加 onDelete="SET NULL"。请注意，您也可以使用 Doctrine 级联操作来实现此目的（即 cascade={"remove"} 等；但是，由于操作不是在 RDBMS 级别执行的，因此它可能会明显变慢。

# c# - CIL 中的条件——如何获得下一个免费存储位置？

> ID：11111087
> 
> 赞同：2
> 
> 时间：2012-06-19T23:53:02.770
> 
> 标签：c#, cil, reflection.emit, il

我正在将代码从 C# 转换为 IL（CIL/MSIL 等）。我坚持使用条件，因为我希望能够存储到下一个可用的*免费*位置。例子：

```
var x = 0;
if(x > 20)
 x = 1;

Console.WriteLine(x); 
```

如果我将其转换为我认为正确的 IL，我会得到：

```
IL_0001:  ldc.i4.0    
IL_0002:  stloc.0     
IL_0003:  ldloc.0     
IL_0004:  ldc.i4.s    14 
IL_0006:  cgt         
IL_0008:  ldc.i4.0    
IL_0009:  ceq         
IL_000B:  stloc.1     
IL_000C:  ldloc.1     
IL_000D:  brtrue.s    IL_0011
IL_000F:  ldc.i4.1    
IL_0010:  stloc.0     
IL_0011:  ldloc.0     
IL_0012:  call        System.Console.WriteLine 
```

我相信这是正确的 IL，但我的例子是非常静态的。如果您在 IL 代码中看到，它将 ceq 的结果存储到 loc.1

这就是我的问题——编译器看到 loc.0 已被占用（变量“x”）并使用下一个空闲位置，即 1。我的目标是在给定方法可能有 N 个变量的情况下动态执行此操作在条件句之前。

所以，最后，这是我的问题：我如何从 C# 发出一个操作码来说“ *stloc.nextAvailable* ”并且它是等效的负载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:20:58.307

`stloc`并且`ldloc`只能使用恒定索引。然而，这并不是一件坏事——这意味着如果你发出了其他代码，你已经有了下一个可用的索引，或者如果你以某种方式在其他地方获取了代码，你所要做的就是取所有本地索引的最大值并添加一个（或者从方法头中读取本地人的数量，如果有的话）。

或者您可以跳过本地并`cgt`直接使用（使用 a `brfalse`）的结果，或者使用`ble`指令。那么这个问题甚至一开始都没有出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:55:46.813

在我看来，您正在查看在为调试模式编译时生成的 IL，`stloc.1`并且`ldloc.1`正在引用一个在您的代码中不存在但可以创建以在将鼠标悬停在大于符号上时提供漂亮的小工具提示的本地调试。

我希望发布模式生成的 IL 看起来更像这样（如果它不`Console.WriteLine(0);`提前优化整个事情）：

```
//load the 4-byte integer 0 on to the stack
IL_0001:    ldc.i4.0
//set the value of local 0 (x) to the previous value on the stack (0)
IL_0002:    stloc.0
//load up x for the comparison
IL_0003:    ldloc.0
//load the 4-byte integer 0x14 (20) on to the stack
IL_0004:    ldc.i4.s    14
//check to see whether two elements back on the stack is greater than one element back on the stack (x > 20), push 1 one back on the stack in the case the first is greater, 0 otherwise
IL_0005:    cgt
//if 0x14 (20) was the greater (or equal) value, jump over the body of the if block
IL_0006:    brfalse.s    IL_0009
//load the 4-byte integer 1 (1) on to the stack
IL_0007:    ldc.i4.1
//set the value of local 0 (x) to the previous value on the stack (1)
IL_0008:    stloc.0
//load the value of local 0 (x) on to the stack
IL_0009:    ldloc.0
//call Console.WriteLine
IL_000A:    call    System.Console.WriteLine 
```

# python - 为什么在 Python 中跨类继承属性？

> ID：11111089
> 
> 赞同：3
> 
> 时间：2012-06-19T23:53:26.807
> 
> 标签：python, class, attributes

我显然在学习如何正确使用类时遇到了一些麻烦。我希望下面的代码循环遍历一组文件（它确实如此），将元素添加到一个集合中（它确实如此），并在它移动到一个新文件时重新开始该集合（*它没有*）。我破解下面代码的方式，我希望它每次都返回一个空集`file.terminals`，因为我相信每个集合都是类的新实例的唯一属性`SrcFile`。显然，我错了。实际发生的是，由第一个文件创建的终端集对于列表中的所有后续文件仍然存在（并被添加到），尽管其他属性（例如`file.name`，`file.seqlength()`) 随文件适当更改。有人可以解释为什么它会以这种方式工作以及如何创建我期望的行为吗？预先感谢您对初学者的无知的耐心。

```
class SrcFile:
   terminals = set([])
   def __init__(self, which):
      self.name = which
   def seqlength(self):
      with open(self.name) as file:
         linecounter = 0
         for line in file:
            linecounter += 1
            if linecounter == 3:
               return int(line.split()[0])
               break

class Record(SrcFile):
   def terminal(self):
      record = self.name
   def terminal(self):
      record = self.name
      return record.split()[0]

for f in files:
   file = SrcFile(f)
   print(file.name, file.seqlength(), file.terminals)

   with open(f) as f:
      recordline = re.compile(r"^([A-Z]{5})\s{3}")
      for line in f:
         if recordline.match(line):
            record = Record(line)
            if record.terminal() in file.terminals:
               pass
            else:
               file.terminals.add(record.terminal()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:57:38.293

您`terminals`在类声明中定义，而不是在为类`__init__`的每个新实例执行的函数中定义。

基本上，`terminals`为整个类初始化，而不是为类的每个实例：

```
>>> SrcFile.terminals
set([]) 
```

注意我跑了`SrcFile.terminals`, not `SrcFile().terminals`，这意味着这`SrcFile`是对类的引用，而不是类的实例。

您将类似的变量放在`__init__`函数内部以使它们特定于实例：

```
class SrcFile(object):
  def __init__(self, which):
    self.name = which
    self.terminals = set([]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T23:55:26.390

通过`terminals = set([])`在类本身中定义，它在定义类时创建**一次**，而不是在创建实例时创建。

为避免这种情况，请将其删除并将以下内容添加到您的`__init__`方法中：

```
self.terminals = set() 
```

# android - 在 RelativeLayout 中为 320dp 和 360dp 开发布局？

> ID：11111091
> 
> 赞同：0
> 
> 时间：2012-06-19T23:53:47.543
> 
> 标签：android, android-layout, android-relativelayout

正如我在这里发布的[how-can-i-create-layout-for-both-320dp-and-360dp](https://stackoverflow.com/questions/11092965/how-can-i-create-layout-for-both-320dp-and-360dp)。在那个问题中，我举了一个关于两个按钮的简单示例。但是现在我已经有了 320dp 的布局，但我无法像 Motorola Atrix 那样创建 360dp 的布局。因为给出的解决方案是与 LinearLayout 相关的，而我的布局现在是相对的。如何避免或填补右边的空白？

**布局.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@drawable/bg_tapfast" >

    <ImageView 
        android:id="@+id/img_logomaior"
        android:layout_width="@dimen/default_width_img_logomaior"
        android:layout_height="@dimen/default_height_img_logomaior"
        android:src="@drawable/img_logomaior"
        android:layout_marginTop="@dimen/margin_top_img_logomaior"
        android:layout_marginLeft="@dimen/margin_left_img_logomaior"
        android:layout_alignParentLeft="true" />    

    <ImageView 
        android:id="@+id/img_mode_tapcolor"
        android:layout_width="@dimen/default_width_mode_tapcolor"
        android:layout_height="@dimen/default_height_mode_tapcolor"
        android:src="@drawable/mode_tapcolor"
        android:layout_marginTop="@dimen/margin_top_mode_tapcolor"
        android:layout_marginLeft="@dimen/margin_left_mode_tapcolor" />     

    <ImageView 
        android:id="@+id/img_mode_tapname"
        android:layout_width="@dimen/default_width_mode_tapname"
        android:layout_height="@dimen/default_height_mode_tapname"
        android:src="@drawable/mode_tapname"
        android:layout_marginTop="@dimen/margin_top_mode_tapname"
        android:layout_marginLeft="@dimen/margin_left_mode_tapname" />       

     <ImageView 
        android:id="@+id/img_mode_tapgroup"
        android:layout_width="@dimen/default_width_mode_tapgroup"
        android:layout_height="@dimen/default_height_mode_tapgroup"
        android:src="@drawable/mode_tapgroup"
        android:layout_marginTop="@dimen/margin_top_mode_tapgroup"
        android:layout_marginLeft="@dimen/margin_left_mode_tapgroup" />     

     <ImageView 
        android:id="@+id/img_tap_2be"
        android:layout_width="@dimen/default_width_tap_2be"
        android:layout_height="@dimen/default_width_tap_2be"
        android:src="@drawable/tap_2be"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="@dimen/margin_left_tap_2be" />

     <ImageView 
        android:id="@+id/img_bt_howtoplay"
        android:layout_width="@dimen/default_width_bt_howtoplay"
        android:layout_height="@dimen/default_height_bt_howtoplay"      
        android:src="@drawable/bt_howtoplay"        
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

**摩托罗拉 Atrix**

![摩托罗拉 Atrix](../Images/a88e2ffa1125e90a8caf1a3df72025ea.png)

**三星盖乐世 SII**

![三星盖乐世 SII](../Images/47fe4f96c9b6042d571a40985e603f9e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:47:07.397

这可能会帮助你 [http://developer.android.com/resources/articles/layout-tricks-efficiency.html](http://developer.android.com/resources/articles/layout-tricks-efficiency.html) 和这个[http://developer.android.com/resources/articles/layout-tricks-merge.html](http://developer.android.com/resources/articles/layout-tricks-merge.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:00:45.440

您必须为我发布您的代码才能确定。

但是您应该能够将这样的属性添加到您的 RelativeLayout：

```
android:gravity="center_horizontal" 
```

**编辑：**我认为，如果您将 3 个 ImageViews 放在它们自己的布局中并将顶级父级上的重力设置为水平中心，它将使您的所有 ImageViews 相对于彼此保持在相同的位置，但它也会使它们消失超过一些，因此无论您在哪个设备上运行，它们都居中。

像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_horizontal"
    android:background="@drawable/bg_tapfast" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >
    <ImageView 
        android:id="@+id/img_logomaior"
        android:layout_width="@dimen/default_width_img_logomaior"
        android:layout_height="@dimen/default_height_img_logomaior"
        android:src="@drawable/img_logomaior"
        android:layout_marginTop="@dimen/margin_top_img_logomaior"
        android:layout_marginLeft="@dimen/margin_left_img_logomaior"
        android:layout_alignParentLeft="true" />    

    <ImageView 
        android:id="@+id/img_mode_tapcolor"
        android:layout_width="@dimen/default_width_mode_tapcolor"
        android:layout_height="@dimen/default_height_mode_tapcolor"
        android:src="@drawable/mode_tapcolor"
        android:layout_marginTop="@dimen/margin_top_mode_tapcolor"
        android:layout_marginLeft="@dimen/margin_left_mode_tapcolor" />     

    <ImageView 
        android:id="@+id/img_mode_tapname"
        android:layout_width="@dimen/default_width_mode_tapname"
        android:layout_height="@dimen/default_height_mode_tapname"
        android:src="@drawable/mode_tapname"
        android:layout_marginTop="@dimen/margin_top_mode_tapname"
        android:layout_marginLeft="@dimen/margin_left_mode_tapname" />       

     <ImageView 
        android:id="@+id/img_mode_tapgroup"
        android:layout_width="@dimen/default_width_mode_tapgroup"
        android:layout_height="@dimen/default_height_mode_tapgroup"
        android:src="@drawable/mode_tapgroup"
        android:layout_marginTop="@dimen/margin_top_mode_tapgroup"
        android:layout_marginLeft="@dimen/margin_left_mode_tapgroup" />     

     <ImageView 
        android:id="@+id/img_tap_2be"
        android:layout_width="@dimen/default_width_tap_2be"
        android:layout_height="@dimen/default_width_tap_2be"
        android:src="@drawable/tap_2be"
        android:layout_alignParentBottom="true"
        android:layout_marginLeft="@dimen/margin_left_tap_2be" />

     <ImageView 
        android:id="@+id/img_bt_howtoplay"
        android:layout_width="@dimen/default_width_bt_howtoplay"
        android:layout_height="@dimen/default_height_bt_howtoplay"      
        android:src="@drawable/bt_howtoplay"        
        android:layout_alignParentRight="true"
        android:layout_alignParentBottom="true" />

     </RelativeLayout>

</RelativeLayout> 
```

# java - Java 小程序可能占用了太多内存

> ID：11111097
> 
> 赞同：0
> 
> 时间：2012-06-19T23:55:12.113
> 
> 标签：java, memory, applet, memory-leaks

我有一种情况，Java Applet 在多次打开后挂起。这只发生在 RAM 较低的系统上，这使我相信可能存在内存泄漏，或者分配给堆的内存不足。

如何测试小程序的内存泄漏？像JProbe这样的东西会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:01:01.110

我不认为特定工作站上的低内存是一个问题。

如果没有另外指定（带`-Xmx`设置），Java 小程序`64MB`在开始时获取内存。**JVM在一开始就**从系统中保留了这个数量的 RAM ，因此如果系统可用的内存较少，则 JVM（以及 Applet）甚至都不会启动。

但如果它启动，则保证所有配置的内存都可用。因此，如果您的 Applet 仍然缺少内存，则有两种可能：

1.  默认设置 (64MB) 是低 - 配置您的小程序以获得更多 RAM。
2.  您没有正确释放资源，并泄漏内存。查看您的小程序的[生命周期方法](http://docs.oracle.com/javase/tutorial/deployment/applet/appletMethods.html)，并检查您是否正在按应有的方式释放资源。

另外，您说最后，您的小程序*挂起*。要查看发生了什么，请将一些日志记录添加到*生命周期方法*，[启用 Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)，并查找异常。

# google-drive-api - 谷歌文档/驱动评论和标签API

> ID：11111101
> 
> 赞同：0
> 
> 时间：2012-06-19T23:55:44.360
> 
> 标签：google-drive-api, google-docs-api

有谁知道 Google Docs API 是否支持评论。我正在尝试构建一个允许我向 gdrive 上的文件添加评论和标记的应用程序？

谢谢...

任何提示和/或建议将不胜感激！

-阿什利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:01:40.977

文档列表 API 不公开注释，您可以考虑使用该`<docs:description>`元素来存储特定于应用程序的标签。

# makefile - 在 for 循环中获取源文件列表的目录部分

> ID：11111102
> 
> 赞同：0
> 
> 时间：2012-06-19T23:55:59.137
> 
> 标签：makefile, gnu-make

我有以下 gnu make 脚本：

```
for hdrfile in $(_PUBLIC_HEADERS) ; do \
    echo $(dir $$hdrfile) ; \
done 
```

该`_PUBLIC_HEADERS`变量有一个相对路径列表，如下所示：

```
./subdir/myheader1.h
./subdir/myheader2.h 
```

我从上面的 for 循环中得到的输出是：

```
./
./ 
```

我希望看到：

```
./subdir/
./subdir/ 
```

我究竟做错了什么？请注意，如果我将代码更改为：

```
echo $(dir ./subdir/myheader1.h) 
```

它在这种情况下有效。我认为这可能与 for 循环有关，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:57:06.203

`make`在执行`for`-loop时，您将变量（或函数）与 shell 变量混淆了。请注意，这`$(dir ...)`是一个在 shell 执行命令之前`make`被扩展的结构。`make`但是，您希望 shell 在循环内执行该命令。

您可以做的是替换为由 shell 执行`$(dir)`的相应命令。`dirname`所以它变成：

```
for hdrfile in $(_PUBLIC_HEADERS) ; do \
    dirname $$hdrfile ; \
done 
```

这应该会产生预期的结果。

# javascript - 使用 Jquery 向数字添加跨度

> ID：11111110
> 
> 赞同：3
> 
> 时间：2012-06-19T23:57:23.237
> 
> 标签：javascript, jquery, numbers, html

所以这周我一直在涉足 jQuery。尝试在我目前正在研究的 wordpress 主题中添加一些很酷的东西。

在这个很棒的网站的帮助下，我收到了以下 JS 来包裹某个 div 中的数字。一切都很好，直到我开始实施更多的 JS 以发现这实际上导致我的其他 JS 崩溃。

```
//add span to numbers
var elem = document.getElementById('passage');
elem.innerHTML = elem.innerHTML.replace(/\b(\d+)\b/g, '<span>$1</span>'); 
```

但是，由于我使用的是 jQuery，因此我被告知要取出“document.getElementById”并得到以下结果：

```
//add span to numbers
var elem = $( 'passage' );
elem.innerHTML = elem.innerHTML.replace( /\b(\d+)\b/g, '<span>$1</span>' ); 
```

我认为这将解决没有运气的情况。关于为什么这不起作用的任何想法？谢谢

我的最终结果是能够像这个网站一样为他们的圣经经文设置数字样式：http: [//marshill.com/media/the-seven/lukewarm-in-laodicea-comfort-and-convenience-before-christ#scripture](http://marshill.com/media/the-seven/lukewarm-in-laodicea-comfort-and-convenience-before-christ#scripture)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:59:16.220

如果你选择`id`你需要类似 CSS 的`id`选择器：

```
var elem = $('#passage');, 
```

按班级选择：

```
var elems = $('.className'); 
```

使用`$('#passage')`选择器，您最终会得到一个 jQuery 对象，而不是 DOM 节点，因此`$('#passage').innerHTML`(or `elem.innerHTML`) 返回错误：[`Uncaught TypeError: Cannot call method 'replace' of undefined`](http://jsfiddle.net/davidThomas/pGSDQ/1/)在 Chromium 19 中。

要解决这个问题，您可以使用以下命令“退回”到 DOM 节点：

```
elem.innerHTML = $('#passage')[0].innerHTML.replace(/*...*/); 
```

或者改为使用 jQuery：

```
elem.html(function(i,oldHTML){
    return oldHTML.replace( /\b(\d+)\b/g, '<span>$1</span>' );
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/pGSDQ/)。

参考：

*   [jQuery 选择器](http://api.jquery.com/category/selectors/)。
*   [`html()`](http://api.jquery.com/html/).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T00:03:58.853

对于第一行，在使用 id 时，您希望在字符串前面加上一个井号；也就是说，`$('#passage')`.

对于第二行，请注意，doing`$('#passage')`返回一个 jQuery 对象，因此您不能在其上使用标准方法。您应该使用 jQuery 方法。的等价物`innerHTML`是[`.html()`](http://api.jquery.com/html/)。

因此，您需要执行以下操作：

```
//add span to numbers
var elem = $( '#passage' );
elem.html(elem.html().replace( /\b(\d+)\b/g, '<span>$1</span>' )); 
```

有点难看，但它完成了工作。[大卫的回答](https://stackoverflow.com/a/11111121/1467811)更有说服力。

# jquery - 更改 H3 颜色 onClick 然后 Fade Back

> ID：11111112
> 
> 赞同：3
> 
> 时间：2012-06-19T23:57:59.087
> 
> 标签：jquery, css, jquery-animate

我的页面顶部有一个按钮，当我单击它时会滚动到 DIV，但我也希望它使 h3 闪烁为一种颜色，然后在滚动到它时返回原始颜色，就像 Facebook 所做的那样通知。

到目前为止的jQuery：

```
 function goToByScroll(id) {
        $('html,body').animate({ scrollTop: $("#" + id).offset().top }, 'slow');
        $("#" + id).css({ "color": "yellow" }).delay(1000).css({ "color": "#222" });
    } 
```

到目前为止的HTML：

```
<a href="javascript:void(0)" onclick="goToByScroll('createdest')">Add Destination</a>

<h3 id="createdest">Add a Country</h3> 
```

但到目前为止，一切都没有改变。接下来我可以尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:03:48.057

使用`animate()`函数的回调在动画完成后立即运行代码。

另外，我添加了`data`属性来存储元素的原始颜色：

```
var $target = $("#" + id);
$target.data('oldColor', $target.css("color"));
$target.css("color", "yellow");

$('html,body').animate({ scrollTop: $("#" + id).offset().top }, 'slow', function() {
  $target.delay(1000).css('color', $target.data('oldColor'))
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T00:19:21.100

尝试`queue()`方法：

```
 function goToByScroll(id) {
            $('html,body').animate({ scrollTop: $("#" + id).offset().top }, 'slow');
            $("#" + id).css({ "color": "yellow" }).delay(1000).queue(function() {
              $(this).css({ "color": "#222" });
   }) 
```

# c# - Borland C++ Builder 上是否有任何“类型”，例如 C# 中的“十进制”？

> ID：11111114
> 
> 赞同：6
> 
> 时间：2012-06-19T23:58:37.660
> 
> 标签：c#, floating-point, decimal, c++builder

在 C# 中，有一种类型称为`decimal`（System.Decimal 结构）。我发现了一些信息，这些信息显示了它在某些情况下的优劣`float`和类型：`double`

*   [StackOverflow - 网上双精度问题](https://stackoverflow.com/questions/566958/double-precision-problems-on-net)
*   [StackOverflow - 如何制作双打 - 正确工作 - c-sharp](https://stackoverflow.com/questions/10693098/how-to-make-doubles-work-properly-c-sharp)

Borland C++ Builder 程序有类似的类型吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T00:36:38.237

`decimal`C# 中的类型，.NET 的类型`System.Decimal`，只是一个浮点数，存储为 base-10，而不是 base-2 编码。`float`并且`double`是更典型的 base-2 浮点数。也就是说， a`double`存储为 ，`+/- x * 2^y`而小数存储为`+/- x * 10 ^ y`。这就是为什么它在财务数据方面表现更好，例如，财务数据通常以`x * 10^-2`. IEEE 标准 754（浮点数学标准）称之为“十进制浮点”数学，并分别定义了 32 位和 64 位版本。

在 C++ 中，这些类型在命名空间中实现，并在标头`std::decimal`中调用`std::decimal::decimal32`and 。如果 Borland C++ builder 有这样的类型，你会在那里找到它。GNU 的 C++ 库包含这个头文件，但是，AFAIK 它实际上还不是标准的一部分，所以 BCB 可能没有它。如果是这种情况，您将需要使用第三方库。@dash 的英特尔[十进制浮点](http://software.intel.com/en-us/articles/intel-decimal-floating-point-math-library/)库示例可能是最著名的此类库，但如果出于某种原因需要它们，谷歌搜索应该会出现其他库。`std::decimal::decimal64``<decimal>``IEEE 754 Decimal`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T00:19:40.133

这些是您可以在 Delphi 中使用的浮点类型：

```
single  :  4 bytes (32bits)
real    :  6 bytes (48bits)
double  :  8 bytes (64bits)
currency:  8 bytes (64bits) (this is probably what you're looking for)
extended: 10 bytes (80bits) (maps to double when you compile to x64!) 
```

在 C++ builder 中似乎有一个`System::Currency`类模仿 Delphi 的内置货币类型。也许这有助于调查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T00:42:16.833

我找到了这个链接[Borland C++ Primitive Data types](https://docs.google.com/viewer?a=v&q=cache%3acdHCy__Rpo4J%3ahelpcentreonline.com/article/primitiv_console_bcc.pdf%20&hl=en&gl=us&pid=bl&srcid=ADGEESgfnmX6nsUy1YBnQ9Xrn9soCEjsf7XJ5glWn_pIiRV7x6ZDJ7fU21M-lnQvRpbrdzTJhiPNcQnxtQDZyN45OnOiyRQ18bxqYXsyf6p7VD05twUUk5kTqv4BQbYeJkQA-myz0GaW&sig=AHIEtbT-IT61GLf2cmgOOQiehzWepze60A&pli=1)。在 HTML 中查看它。

有一个容量为 10 字节的 long double 类型。

该文件内容丰富。无论如何，您可能都想阅读它。

# asp.net-mvc - 如何测试 ModelBindingContext.ValueProvider 中的所有值都由自定义模型绑定器使用

> ID：11111122
> 
> 赞同：0
> 
> 时间：2012-06-19T23:59:17.060
> 
> 标签：asp.net-mvc, asp.net-mvc-3, unit-testing, model, model-binding

我正在为自定义模型绑定器（MVC 3）编写单元测试，并希望确认我通过 ValueProvider 传入的所有值都被绑定器使用（意味着绑定器读取它们并将它们绑定到模型对象）。（我还想要一个测试用例来确认没有消耗带有额外值的 ValueProvider）

这是我的测试的（工作）代码：

```
 <Test()> _
    Public Sub Should_Bind_Example_Payment_Method_To_Model()
        'arrange
        Dim testBindingContext As New ModelBindingContext() With {
            .ModelName = "MyModel",
            .ValueProvider = New NameValueCollectionValueProvider(
                New NameValueCollection() From {
                    {"Param1", "val1"},
                    {"Param2", "val2"},
                }, Nothing),
            .ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(Nothing, GetType(MyModelType))
        }

        dim testControllerContext as new ControllerContext()
        Dim modelBinder As New MyCustomModelBinder()

        'act
        Dim generatedModel As MyModelType = modelBinder.BindModel(testControllerContext, testBindingContext)

        'assert
        Assert.AreEqual("val1", generatedModel.Param1)
        Assert.AreEqual("val2", generatedPaymentMethod.Param2)

        Assert.IsTrue(testBindingContext.ModelState.IsValid)
    End Sub 
```

我想添加这样一行（这显然是无效代码）

```
Assert.IsTrue(testBindingContext.ValueProvider.AllValuesConsumed) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:49:21.443

有两种方法：

A）创建一个 IValueProvider 的模拟，它具有测试是否全部消耗的逻辑。

B）接受多重断言，但将它们提取到一个方法中以保持单元测试简短、简单和可读。

因为简单，我会选择 B) —— 除非我期望类似的测试涉及 IValueProvider。我会将断言方法称为`AssertThatAllValuesAreConsumed(testBindingContext)`.

问候，莫腾

# php - php 代码中出现意外的 T_ELSE

> ID：11111128
> 
> 赞同：1
> 
> 时间：2012-06-20T00:00:54.113
> 
> 标签：php

我是 php 编程的新手，我无法找到这段代码中的错误：

```
<p>
       <?php
            function check_input($data)
                {
                    $data = trim($data);
                    $data = stripslashes($data);
                    $data = htmlspecialchars($data);
                    $data = nl2br($data);
                    return $data;
                }
            $password = $_POST['password'];//security check on the input of the password

            if (isset($password))
            {
                if ($password == "hotdog")
                {
       ?>
                    Here is the secret NASA code: <br/>
                    <strong>RT4567EGST442YT3ZQS</strong>
       <?php
                else
                {
       ?>
                    The password is incorrect. <br/>
                    <a href="index.php">go and try here again</a>.
       <?php
                }
                }
            }
            else
            {
       ?>
                You have to put a password. thanks to retry on <a href="index.php">this page</a>.
       <?php
            }
       ?>
   </p> 
```

任何帮助将不胜感激！多谢。麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:03:01.503

在您发布的代码的第 21 行附近，您缺少一个`}`. 改变

```
 <?php
            else
            {

    ?> 
```

到

```
 <?php
            } else
            {
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:12:19.323

您还在`}`第 28 行添加了太多。

这应该有效：

```
 <p>
   <?php
    function check_input($data)
        {
            $data = trim($data);
            $data = stripslashes($data);
            $data = htmlspecialchars($data);
            $data = nl2br($data);
            return $data;
        }

        $password = $_POST['password'];//security check on the input of the password

        if (isset($password))
        {
            if ($password == "hotdog")
            {
   ?>
                Here is the secret NASA code: <br/>
                <strong>RT4567EGST442YT3ZQS</strong>
   <?php
            }
            else
            {
   ?>
                The password is incorrect. <br/>
                <a href="index.php">go and try here again</a>.
   <?php
            }
        }
        else
        {
   ?>
            You have to put a password. thanks to retry on <a href="index.php">this page</a>.
   <?php
        }
   ?></p> 
```

# android - 每行的单独行距

> ID：11111129
> 
> 赞同：10
> 
> 时间：2012-06-20T00:01:01.423
> 
> 标签：android, textview

是否可以为 a 的每个文本行定义单独的行距`TextView`？

例子：

```
TextView tv = new TextView(context);
tv.setText("line1\nline2\nline3"); 
```

该方法`setLineSpacing(float add, float mult)`定义`TextView`. 我想在 line1 和 line2 之间定义另一个行距，在 line2 和 line3 之间定义一个不同的行距。

任何想法如何做到这一点？

spannable 是否提供解决方案？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T13:03:26.653

是的，您可以通过使用`LineHeightSpan`界面来做到这一点。这是有关如何执行此操作的快速而肮脏的示例代码：

```
public class MyActivity extends Activity {

    private static class MySpan implements LineHeightSpan {
        private final int height;

        MySpan(int height) {
            this.height = height;
        }

        @Override
        public void chooseHeight(CharSequence text, int start, int end, int spanstartv, int v,
                FontMetricsInt fm) {
            fm.bottom += height;
            fm.descent += height;
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final TextView tv = new TextView(this);
        setContentView(tv);

        tv.setText("Lines:\n", BufferType.EDITABLE);
        appendLine(tv.getEditableText(), "Line 1 = 40\n", 40);
        appendLine(tv.getEditableText(), "Line 2 = 30\n", 30);
        appendLine(tv.getEditableText(), "Line 3 = 20\n", 20);
        appendLine(tv.getEditableText(), "Line 4 = 10\n", 10);
    }

    private void appendLine(Editable text, String string, int height) {
        final int start = text.length();
        text.append(string);
        final int end = text.length();
        text.setSpan(new MySpan(height), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:59:34.287

您可以使用 Html 对 textview 执行这些特定样式。试试这个例子，

```
tv.setText(Html.fromHtml("<h2>Text1</h2><br><p>Text2</p>")); 
```

这里允许的不同类型的标签是，

```
<a href="...">
<b>
<big>
<blockquote>
<br>
<cite>
<dfn>
<div align="...">
<em>
<font size="..." color="..." face="...">
<h1>
<h2>
<h3>
<h4>
<h5>
<h6>
<i>
<img src="...">
<p>
<small>
<strike>
<strong>
<sub>
<sup>
<tt>
<u> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-26T10:04:42.080

添加了Android 10 (API 29)`LineHeightSpan.Standard`以设置绝对行高。如果您需要向后兼容，请使用我基于的以下实现`LineHeightSpan.Standard`：

```
private static class AbsoluteHeightSpan implements LineHeightSpan {
    private final int _height;

    AbsoluteHeightSpan(int height) {
        _height = height;
    }

    @Override
    public void chooseHeight(CharSequence text, int start, int end, int spanstartv, int v, FontMetricsInt fm) {
        final int originHeight = fm.descent - fm.ascent;
        // If original height is not positive, do nothing
        if (originHeight <= 0)
            return;
        final float ratio = _height * 1.0f / originHeight;
        fm.descent = Math.round(fm.descent * ratio);
        fm.ascent = fm.descent - _height;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-22T04:46:18.653

最近我面临着类似的问题。我使用来自的字符串资源`string.xml`并将其显示在对话框中。我通过在内部使用`<font>`标签`<string>`并在其中指定字体大小来解决我的问题`\n`。第一个`\n`只是一个换行符，第二个是一个新的空行，高度由`<font size="YOUR_SIZE_FOR_THE_LINE"></font>`.

示例代码：

```
 <string name="specification_msg"><b>1 Quick Action</b>
        \nQuick-Action is a small window which is supposed to be fast so it can offer you a convenient way of recording income and expenditure.
        <font size="4">\n\n</font><b>︎︎1.1 Brief Mode</b>
        \nDate and time will be hidden in window and set to current time. If you scarcely adjust them, turning on this feature will give you a cleaner view.
        <!-- Other lines -->
    </string> 
```

截图：AlertDialog里面TextView的截图

[![在此处输入图像描述](../Images/1cfe088d1d05f622136af1f79de7f55b.png)](https://i.stack.imgur.com/hHV8h.png)

（行间距最初是为汉字设计的，因此在英文中可能看起来不太明显。）

我知道这是一种肮脏的方法，但它有时会有所帮助......

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-06-20T03:03:11.800

这是不可能的。这种技术在 c ，c++ 中使用。你在 setText() 中使用什么，它显示你写的整个文本。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-03-31T09:15:10.683

尝试这个：

```
android:lineSpacingMultiplier = "3" 
```

行间距也可以是十进制格式。

# javascript - 点击超链接的跟踪信息

> ID：11111131
> 
> 赞同：0
> 
> 时间：2012-06-20T00:01:14.360
> 
> 标签：javascript, html

我想写一个可以跟踪点击超链接的html页面。这意味着我可以获得过去一段时间内有多少人点击我页面中的超链接的统计数据。如果能知道他们的ID就更好了。

我从网页的源代码中找到了这段代码：

```
<script type="text/javascript">
function stc(e,linkIndex) {
  if (document.images) {
     var linkText;
     if (navigator.appName.toLowerCase()=="microsoft internet explorer") {
        linkText=e.innerText}
     else {
        linkText=e.textContent}
     if (linkText=="") {
        if (e.firstChild) {
           var firstChild=e.firstChild.nodeName.toUpperCase();
           if (firstChild=="IMG") {
              linkText="Image: "+getName(e.firstChild.getAttribute('src'))}}
        else {
           var nodeName=e.nodeName.toUpperCase();
           if (nodeName=="AREA") {
              linkText="ImageMap: "+e.href}}}
     if (linkText=="") {
        linkText=e.href}
     (new Image()).src="/a/i/stg.gif?f="+escape(document.location.href)+"&t="+escape(e.href)+"&i="+linkIndex+"&n="+escape(trimString(linkText))}}

function getName(s) {
  if (s.lastIndexOf('/')>=0) {
     return(s.substring(s.lastIndexOf('/')+1,s.length))}
  else {
     return(s)}}

function trimString(s) {
  return(s.replace(/^\s*/,"").replace(/\s*$/,""))}
</script> 
```

我想`<a href="http://www.google.com" onClick="stc(this, 1)">google</a>`将能够跟踪此链接上的叮当信息。

我不太了解`Javascript`，谁能告诉我，根据这段代码，跟踪信息保存在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:42:16.930

您需要服务器端代码来执行此操作。

例如，您可以有一个网关脚本，将用户重定向到他们想要查看的页面：

```
http://www.example.com/portal/www.google.com/ 
```

从那里，您可以将用户的请求保存到数据库中，然后`www.google.com`几乎立即将用户重定向到，而无需用户真正关心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:22:30.613

通常其他语言中的 trace() 只是某种输出，而在 javascript 中执行此操作的最佳最简单方法是调用 console.log("some output")。您可以通过右键单击页面 > 检查元素来查看 Google Chrome 中的输出，然后单击控制台选项卡，在那里您将看到您的输出。在 Firefox 中，您应该获得 Firebug 附加组件，您可以在控制台选项卡中再次看到由 console.log("some output") 生成的相同输出。

其他浏览器对开发人员来说很糟糕，所以为什么还要费心解释呢？

# jquery - 如何处理/调度由 javascript for 循环创建的大量事件队列

> ID：11111132
> 
> 赞同：0
> 
> 时间：2012-06-20T00:01:16.807
> 
> 标签：jquery, queue, jquery-animate

我正在使用 jquery`animate()`从 svg 标记中提取值，并创建一个动画。（IE不支持SMIL，需要用脚本来完成。）

这是问题所在：动画有数千个元素，每个元素都有自己的开始时间，因此`for`我用来迭代每个元素的循环会消耗几秒钟，在较慢的机器/浏览器上甚至更多。所以感觉就像在事件队列实际开始时，运行时已经运行了一段时间，并且已经过去了几秒钟，所以动画的最开始就提前了。动画从时间=零开始。*动画的开头有时会被剪掉。*

不同的浏览器似乎对这个问题的处理方式不同，而且它似乎也取决于处理器的状态，所以我很难系统地弄清楚发生了什么。）这也是我第一次涉足动画和非常长的运行时间，所以我确定我做错了什么:)

所以我的具体问题是如何避免这种行为。但更一般地说，事件队列的计时器是在运行时开始还是结束时开始？这究竟是如何工作的？

以下是大部分相关代码：

```
function runAnimation() {
  // create node list of paths
  var allPaths = document.getElementById('svgcontainer').getElementsByTagName('path');

  // define the animate function
  var doAnim = function(currentPath, dur, begin) {
    setTimeout(function(){
        $(currentPath).animate({'stroke-dashoffset': 0}, dur);
    }, begin);
  };

  // iterate through the nodelist
  for (var i=0; i<allPaths.length; i++) {

    var pathAnim = allPaths[i].firstChild;

    startTime = parseFloat(pathAnim.getAttribute('begin'));
    pathDuration = parseFloat(pathAnim.getAttribute('dur'));

// change times from seconds to milliseconds        
    startTime = startTime * 1000;
    pathDuration = pathDuration * 1000;

    doAnim(allPaths[i], pathDuration, startTime);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:00:55.000

因为 javascript 是单线程的，所以如果你启动一个动画（它可能会`setTimeout()`在未来一段时间内执行）然后你运行一堆其他的 javascript，这些 javascript 比第一个要长得多`setTimeout()`，那么`setTimeout()`不会能够触发/运行，直到您的其他 javascript 执行完毕。当它最终运行时，它会意识到圣牛，它的方式，远远落后于计划，任何体面的补间算法都会尝试回到计划并跳过一堆动画的初始部分。这听起来像你所描述的看到。

解决此问题的唯一方法是避免在启动动画后运行代码的任何重要时间，因为正是运行的代码使动画落后于计划。如果您愿意仅针对此问题优化从开始到结束的动画过程，并且可以更改您自己的动画代码，则可以运行并初始化每个动画，以便预先计算所有初始状态，但没有实际动画的开始。然后，一旦运行所有代码来设置所有动画，您将运行一个非常快速的循环来启动它们全部运行。这将最小化第一个动画开始后的代码运行时间。

我真的不知道现在花费了所有初始化时间，也没有对时间的真正去向进行基准测试，但是您可以通过预先计算所有初始动画参数，将它们全部存储到一个数组中来优化您当前的函数，然后在完成所有这样的预先计算后开始所有动画：

# 想法1：

```
function runAnimation() {
  // create node list of paths
  var allPaths = document.getElementById('svgcontainer').getElementsByTagName('path');

  // define the animate function
  var doAnim = function(currentPath, dur, begin) {
    setTimeout(function(){
        $(currentPath).animate({'stroke-dashoffset': 0}, dur);
    }, begin);
  };

  var anims = [];

  // iterate through the nodelist
  for (var i=0, len = allPaths.length; i<len; i++) {

    var pathAnim = allPaths[i].firstChild;

    startTime = parseFloat(pathAnim.getAttribute('begin'));
    pathDuration = parseFloat(pathAnim.getAttribute('dur'));

// change times from seconds to milliseconds        
    startTime = startTime * 1000;
    pathDuration = pathDuration * 1000;

    // accumulate animation parameters, but don't start animation yet
    anims.push([allPaths[i], pathDuration, startTime]);
  }

  // now start all animations as fast as possible
  for (var i = 0, len = anims.length; i < len; i++) {
      doAnim.apply(this, anims[i]);
  }

} 
```

老实说，这个代码更改看起来不会节省很多（这段代码中没有发生太多可能需要很多时间的事情），但是如果循环的大小很大，它可能是一个有意义的改进。

* * *

# 想法2：

这是另一个想法。对动画进行排序，`doAnim()`最后调用 startTime 最快的动画。这使得`setTimeout()`在我们仍在初始化动画时 a will 不太可能触发。

```
function runAnimation() {
  // create node list of paths
  var allPaths = document.getElementById('svgcontainer').getElementsByTagName('path');

  // define the animate function
  var doAnim = function(currentPath, dur, begin) {
    setTimeout(function(){
        $(currentPath).animate({'stroke-dashoffset': 0}, dur);
    }, begin);
  };

  var anims = [];

  // iterate through the nodelist
  for (var i=0, len = allPaths.length; i<len; i++) {

    var pathAnim = allPaths[i].firstChild;

    startTime = parseFloat(pathAnim.getAttribute('begin'));
    pathDuration = parseFloat(pathAnim.getAttribute('dur'));

// change times from seconds to milliseconds        
    startTime = startTime * 1000;
    pathDuration = pathDuration * 1000;

    // accumulate animation parameters, but don't start animation yet
    anims.push([allPaths[i], pathDuration, startTime]);
  }

  // sort array so that smallest startTime values are last
  anims.sort(function(a, b) {
      return(b[2] - a[2]);
  });

  // Now start all animations as fast as possible
  // Because the array is sorted, it will start the longer setTimeout()
  // calls first and lessen the chance that the short ones will not get
  // get to fire when they want to
  for (var i = 0, len = anims.length; i < len; i++) {
      doAnim.apply(this, anims[i]);
  }
} 
```

除此之外，任何其他修复可能都必须在 .animate() 代码本身中，因为它有自己的设置时间，所以如果太多对象都试图同时启动它们的动画，那将不会很顺利。

* * *

# 关于 SetTimeout() 如何与事件队列一起工作的注意事项：

就是这样`setTimeout()`与 javascript 事件队列一起使用。系统计时器被安排在未来的某个时间。当达到该时间时，该计时器的事件将被放入 javascript 事件队列中。如果此时 javascript 引擎处于空闲状态，则立即执行相应的回调。如果 javascript 引擎此时正在执行其他操作，那么该计时器甚至只是停留在事件队列中。当当前正在执行的 javascript 线程完成其执行时，它会检查事件队列中是否还有更多事件。如果有一个事件在等待，它会从队列中拉出最旧的一个并开始执行它。该过程一直重复，直到一个执行的 javascript 线程完成并且队列中没有更多事件。虽然 javascript 事件一次只能执行一个，

正如你所看到的，因为 javascript 是单线程的，如果同时有很多事情要做（比如要启动很多动画），那么这些事情中只有一个会按时启动，而其他所有事情都会按时启动会耽误一些。

在您的特定代码中，如果您的代码试图同时启动一大堆动画（例如，所有动画都具有相同或非常接近的 startTime 值），那么您将启动第一个，然后将启动第二个，第三个开始，等等......虽然所有其他人都开始了，但实际的动画还没有运行，因为他们实际显示动画的计时器被卡在所有试图开始的动画之后的队列中。关键是尽量减少任何动画运行后必须发生的工作量，并尝试分散工作量，这样就不会一次完成大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:54:45.580

两点：

*   Javascript是单线程的；
*   每个 setTimeout 都会触发一个新线程。

将这两个事实加在一起，您可以看到您的`for`循环保证在任何动画开始运行之前完成。

如果`for`与延迟相比，循环需要很长时间才能完成，`startTime`那么一旦 for 循环的线程完成，许多排队的动画就可以启动了——所有精心计划的微定时都刚刚结束。

希望这可以为您描述的行为提供一些见解。

编辑：

基于 jfriend00 的想法，这里有一些东西（除了错误）将实现与想法 #2 相同但避免昂贵排序的需要。

```
function runAnimation() {
    var allPaths = document.getElementById('svgcontainer').getElementsByTagName('path'),
        pathAnim, startTime, pathDuration, anims = [],
        i, j, arr;

    function doAnim(i, dur, begin) {
        setTimeout(function(){
            $(allPaths[i]).animate({'stroke-dashoffset': 0}, dur);
        }, begin);
    }

    // iterate through the nodelist
    for (i = 0, len = allPaths.length; i<len; i++) {
        pathAnim = allPaths[i].firstChild;
        startTime = pathAnim.getAttribute('begin');
        pathDuration = pathAnim.getAttribute('dur');
        // Accumulate animation parameters in such a way that 
        // we avoid the need for an expensive array sort later
        if(!anims[startTime]) {
            anims[startTime] = [];//Allow for multiple events per startTime
        }
        anims[startTime].push([i, pathDuration*1000, startTime*1000]);
    }

    // At this point we have a sparse array indexed by startTime and containing arrays of animation data.
    // To iterate over a sparse array efficiently, we have to do something slightly tricky
    // ref: http://hexmen.com/blog/2006/12/iterating-over-sparse-arrays/
    for (arr in anims) {
        if (String(arr >>> 0) == arr && arr >>> 0 != 0xffffffff) {
            for(j = 0, len = arr.length; j < len; j++) {
                doAnim.apply(this, arr[j]);
            }
        }
    }
} 
```

不要试图理解`>>>`稀疏迭代器中的内容。我自己并不完全理解；我只知道它有效;-)。但是，我之前没有在大容量、时间紧迫的环境中使用它，所以看看它是否足够快会很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:38:21.643

不幸的是，关于动画和 JavaScript(jQuery) 的性能已经说过的话是非常正确的。在我多年来试图找到一种方法来做这些事情的过程中，我克服了一些障碍，但最终都是一样的：`you have to give more than you'll get.`

以下是您可以针对绩效问题采取的措施，以及为什么您付出的比得到的多。

**什么、如何和为什么**

jQuery 使用 JavaScript 函数`setInterval`更新 DOM 以反映对象的变化。（无论是位置、方面、不透明度——随便）。

该函数在 jQuery 中重写为 step，并且 step 设置为每 13 毫秒触发一次。因为您要为如此多的对象设置动画——无论大小、形状、任何东西——它都会使浏览器超负荷运行。

**那我们能做些什么呢？**

您在这里有两个选择，它们都不是您的优雅解决方案。

您也可以更改触发动画的时间间隔。在执行此操作时，您必须考虑您拥有的数千个元素，并确定最适合您的性能与美学比率的刷新率。

[$.fx.interval](http://api.jquery.com/jQuery.fx.interval/)

但是，您应该注意，某些浏览器对此的解释不同。还有几个插件旨在进一步优化它，并且有些成功。不过，我不提出建议，所以你必须用谷歌搜索才能找到。

作为旁注，上面将更改所有动画的队列计时器。如果您只需要它处理特定的动画，您可以谷歌搜索以获得快速答案。这只是客观地提供信息。

**或者**，您可以在某些位置拍摄元素的快照，并将它们制作成更大的图像，您可以根据需要进行操作和交换。如果您使用爆炸或其他方式，这可能对您不起作用，但通常您可以使用此解决方案来获得预期的效果。

我希望它有所帮助

# verilog - 如果在 Verilog 中恰好是一个高电平，则为高电平

> ID：11111136
> 
> 赞同：4
> 
> 时间：2012-06-20T00:02:03.833
> 
> 标签：verilog

如果我有 9 根线的阵列，如果 9 根线中恰好有一根是高的，是否有一种简单的方法可以制作一根高的新线？我知道我能做到

```
wire[8:0] data;
wire exactlyOneActive;
assign exactlyOneActive = (data[0] & !data[1] & !data[2] ...) | 
                          (!data[0] & data[1] & !data[2] ...) |
                          (!data[0] & !data[1] & data[2] ...) |
                          ...etc 
```

但是，糟糕，对吧？特别是因为九根线在某个时候可能是 25 根。任何更好的方法来做到这一点，也许使用`generate`？它也必须是可合成的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T22:20:02.800

```
assign zeroOrOnehot     = ~|(data & (data-1));
assign atLeastOneBitSet = |data;
assign exactlyOneActive = zeroOrOnehot & atLeastOneBitSet; 
```

问候 - Cliff Cummings - Verilog 和 SystemVerilog 大师

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T13:23:38.170

这应该是一个非常有效的设计。

```
wire[8:0] data;
wire exactly_one_active;

//Total is log2_ceiling of data bits wide
// Remove binary weighting
wire  [3:0] total = data[8] + data[7] ... + data[0]; 

assign exactly_one_active = (total == 4'b1); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T00:56:31.973

我认为这样的事情应该有效。只要 For 循环有一个恒定的循环计数器，它就可以合成，如下所示：

```
#define N 8

wire [N:0] data;

reg [N:0] uniqueActive;

always @(data) begin
   for (i=0 ; i < N; i = i+1 ) begin
      uniqueActive[i] = (data == 1<<i);
   end
end

assign exactlyOneActive = (uniqueActive != 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-29T19:36:50.560

所有其他解决方案都需要 O(N^2) 门。请注意以下模式

```
(a#b#c#d#e#f#g#h) & (a&b # c&d # e&f # g&h) & (a&b&c&d # e&f&g&h) 
```

在哪里测试聚合异或，每对的异或，每组 4 的异或，每组 8 的异或（未显示）等，在 O(N log(N)) 门中给出正确答案. [（您可以在真值表生成器](http://turner.faculty.swau.edu/mathematics/materialslibrary/truth/ "真值表生成器")上验证逻辑）。不知道如何在 Verilog 中以简洁的方式编写它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-30T16:03:43.760

这是一个 O(N) 门解决方案

```
wire[8:0] wires;
wire isOneHot;
wire[8:-1] moreThanOne;
wire[8:-1] atLeastOne;

genvar i;
generate
    for (i=0; i<9; i=i+1) begin :b1
        assign atLeastOne[i] = atLeastOne[i-1] | wires[i];
        assign moreThanOne[i] = moreThanOne[i-1] | atLeastOne[i-1] & wires[i];
    end
    assign isOneHot = atLeastOne[8] & !moreThanOne[8];
endgenerate 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-06-29T05:32:35.440

从逻辑的角度思考：你想要什么？假设您有两条线：并且您想知道是高还是不高...不是与，不是或...等等，它是异或（独占或...一个或另一个，但不是两者） .

所以你想要的是：分配完全OneActive = data[0] ^ data[1] ^ data[2] ^ ...

也许以下是合法的： data ^ 1b'0 （异或所有位与一个零位）

# python - 从文本文件读入python列表

> ID：11111138
> 
> 赞同：1
> 
> 时间：2012-06-20T00:02:38.590
> 
> 标签：python, arrays, list, loops, file-io

对python非常陌生，无法理解为什么这不起作用。我在文本文件中逐行存储了一个网址列表。我想将前 10 个存储在一个名为 bing 的数组/列表中，接下来的 10 个存储在一个名为 yahoo 的列表中，最后 10 个存储在一个名为 dadgo 的列表中。我正在使用该`readlines`函数将文件中的数据读取到每个数组中。问题是没有任何东西被写入列表。计数按应有的方式递增。此外，如果我完全删除循环并将整个文本文件读入一个列表，它就可以完美地工作。这使我相信循环导致了问题。我正在使用的代码如下。非常感谢一些反馈。

```
count=0;

#Open the file
fo=open("results.txt","r")

#read into each array
while(count<30):
    if(count<10):
        bing = fo.readlines()
        count+=1
        print bing
        print count

    elif(count>=10 and count<=19):
        yahoo = fo.readlines()
        count+=1
        print count

    elif(count>=20 and count<=29):
        duckgo = fo.readlines()
        count+=1
        print count

print bing
print yahoo
print duckgo

fo.close 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T00:09:55.697

您`readlines`用于读取文件。`readlines`一次读取*所有*行，因此第一次通过循环时，您会耗尽整个文件并将结果存储在`bing`. 然后，每次通过循环时，您都会用下一次调用的（空）结果覆盖`bing`、`yahoo`或。所以你的清单最后都是空的。`duckgo``readlines`

有很多方法可以解决这个问题。除其他事项外，您应该考虑一次读取文件一行，使用`readline`(no 's')。或者更好的是，您可以逐行遍历文件，只需使用`for`循环：

```
for line in fo:
    ... 
```

要保持当前代码的结构，您可以使用`enumerate`：

```
for line_number, line in enumerate(fo):
    if condition(line_number):
        ... 
```

但坦率地说，我认为您应该放弃当前的系统。一种更简单的方法是`readlines`不使用循环，然后对结果列表进行切片！

```
lines = fo.readlines()
bing = lines[0:10]
yahoo = lines[10:20]
duckgo = lines[20:30] 
```

还有很多其他方法可以做到这一点，有些可能会更好，但没有一个更简单！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:09:43.930

`readlines()`读取文件的所有行。如果你再次调用它，你会得到空列表。因此，当您遍历循环时，您正在用空数据覆盖列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T00:11:04.533

你应该使用`readline()`而不是`readlines()`

`readlines()`一次读取整个文件，而从文件中`readline()`读取一行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T01:06:38.177

我建议你像这样重写它：

```
bing = []
yahoo = []
duckgo = []
with open("results.txt", "r") as f:
    for i, line in enumerate(f):
        if i < 10:
            bing.append(line)
        elif i < 20:
            yahoo.append(line)
        elif i < 30:
            duckgo.append(line)
        else:
            raise RuntimeError, "too many lines in input file" 
```

请注意我们如何使用`enumerate()`来获取行数，而不是制作我们自己的`count`变量并需要自己增加它。这在 Python 中被认为是很好的风格。

但我认为解决这个问题的最好方法是这样使用`itertools`：

```
import itertools as it
with open("results.txt", "r") as f:
    bing = list(it.islice(f, 10))
    yahoo = list(it.islice(f, 10)) 
    duckgo = list(it.islice(f, 10))
    if list(it.islice(f, 1)):
        raise RuntimeError, "too many lines in input file" 
```

`itertools.islice()`（或者`it.islice()`因为我做了`import itertools as it`）将从迭代器中提取指定数量的项目。我们打开的文件句柄对象`f`是一个迭代器，它从文件中返回行，因此`it.islice(f, 10)`从输入文件中准确提取 10 行。

因为`it.islice()`返回一个迭代器，我们必须将它显式地扩展为 a `list`，将其包裹在`list()`.

我认为这是最简单的方法。它完美地表达了我们想要的：对于每一个，我们想要一个包含文件中 10 行的列表。完全不用专柜，每次拉10条线就行了！

编辑：现在使用额外行的检查，`it.islice(f, 1)`以便它只会拉一行。即使多出一行就足以知道有超过 30 行预期的行，这样如果有人不小心在一个非常大的文件上运行此代码，它就不会尝试将整个文件吞入内存。

# objective-c - 从 connectionDidReceiveData 更新 UILabel 不起作用

> ID：11111143
> 
> 赞同：0
> 
> 时间：2012-06-20T00:02:55.250
> 
> 标签：objective-c, connection, uilabel

在我的连接 DidReceiveData 方法中，我有一个 NSLog 打印接收到的百分比数据并且运行良好。我需要在 UILabel 上显示这个百分比，但 UILabel 没有得到更新。我可以通过 viewDidLoad 等其他方法或按下按钮来更新 UILabel。但是从连接确实收到了数据，我没有得到任何改变。这里有什么问题。我的标签和计算没有任何问题。此方法是否在后台运行或其他什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:53:56.857

假设你没有做任何时髦的事情来让它在后台队列/线程上运行（默认情况下它应该是主队列/线程），我想到了几种可能性：

1.  在实际设置视图之前调用该方法。在设置 UI 之前启动网络活动的某些情况下，这肯定会发生。

2.  实际`UILabel`连接不正确，尽管如果事情在`-viewDidLoad`.

要测试，请中断该方法并`po myLabel`确保它不为零。

# android - 强制 HttpURLConnection 使用移动网络并回退到 WiFi

> ID：11111151
> 
> 赞同：11
> 
> 时间：2012-06-20T00:04:01.447
> 
> 标签：android, http, proxy

我的应用程序用于`HttpURLConnection`连接到我的 REST 服务。我记录了错误并注意到偶尔发生的是用户获取的 WiFi 连接但它有代理。

例如，那些将您重定向到支付页面然后让您使用互联网的机场 wifi。我的代码不遵循重定向。

我真正想要的是忽略 WiFi 的存在并强制通过 3G/4G/E 进行通信。我怎么能在安卓上做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T16:00:20.567

## 切换到移动网络：

一旦您检测到代理，就会弹出一个对话框，告诉用户您的应用无法使用该网络，因此您正在切换到移动网络。您可以使用类切换到移动网络`ConnectivityManager`。

```
ConnectivityManager cm; 
cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
cm.setNetworkPreference(ConnectivityManager.TYPE_MOBILE); 
```

完成后切换回默认值：

```
cm.setNetworkPreference(ConnectivityManager.DEFAULT_NETWORK_PREFERENCE); 
```

## 检测代理：

使用以下代码段检测代理

```
HttpURLConnection conn;
...
if (conn.getResponseCode() == HTTP_PROXY_AUTH){
    // You got a '407: Proxy authentication required' response.
    // Set the networkPreference() here and retry when 
    // network connection changes to TYPE_MOBILE.
} 
```

您可以查看这篇文章以了解如何通过代理使用 HttpURLConnection：[如何使 HttpURLConnection 使用代理？](https://stackoverflow.com/questions/1432961/how-do-i-make-httpurlconnection-use-a-proxy)

## 检测“网络变化”：

要了解如何检测“网络变化”，请参阅这篇文章： [Android，如何在轮询数据时处理网络变化（从 GPRS 到 Wi-fi，反之亦然）](https://stackoverflow.com/questions/5165099/android-how-to-handle-change-in-network-from-gprs-to-wi-fi-and-vice-versa-whi)

## 更新：

如果您无法显示对话框，至少发送一个状态栏`Notification`，以便用户稍后了解网络切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T05:44:56.640

在您的活动中，每当您尝试调用您的 Web 服务时

**如果启用了，**只需禁用 WIFI 即可。互联网上会有很多这样的代码[片段](https://stackoverflow.com/questions/8863509/how-to-programmatically-turn-off-wifi-on-android-device)

现在*还要检查移动数据网络是否可用*，如果可用，请拨打您的电话，否则向用户显示一个对话框，该应用程序将需要移动数据网络来执行任务。

一旦你完成你的 HTTP 调用*，再次打开 WIFI*。

# objective-c - 如何使用属性列表字符串填充 UIImageView

> ID：11111157
> 
> 赞同：0
> 
> 时间：2012-06-20T00:05:00.667
> 
> 标签：objective-c, xcode, uiimageview, plist

我正在尝试将图像从 plist 加载到自定义单元格。使用标签一切正常，但是当我使用 imageview 运行应用程序时，它崩溃了。

单元格.h：

```
@interface WineCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *nameLabel;
@property (nonatomic, strong) IBOutlet UIImageView *bottleImageView;

@end 
```

视图控制器.m：

```
cell.nameLabel.text = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Name"];
cell.bottleImageView.image = [[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Image"]; 
```

崩溃报告：

2012-06-20 01:41:08.975 Appen [3862:f803] 无法加载从标识符为“NOVAFORLAG.R-dvinsguiden”的捆绑包中的笔尖引用的“瓶子”图像 2012-06-20 01:41:08.978 Rødvinsguiden[3862:f803] -[__NSCFString _isResizable]：无法识别的选择器发送到实例 0x6d7b800

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:16:24.467

尝试

```
cell.bottleImageView.image = [UIImage imageNamed:[[wine libraryItemAtIndex:indexPath.row] valueForKey:@"Image"]]; 
```

因为 plist 文件只能存储图像的名称。

# php - CSRF 令牌和 XSS 漏洞

> ID：11111160
> 
> 赞同：5
> 
> 时间：2012-06-20T00:05:22.407
> 
> 标签：php, security, web, xss, csrf

假设我们在表单中使用了 CSRF 令牌，但碰巧我们的网站上有一个未被注意到的 XSS 漏洞。

据我了解，在这种情况下，CSRF 令牌保护完全无效，因为攻击者可以通过 XSS 使用 XMLHttpRequest 检索它。

在这种情况下，有没有办法让 CSRF 保护在攻击中幸存下来，或者我们的网站在做任何 CSRF 之王之前应该首先拥有安全的反 XSS 保护？

在每个页面请求上设置一个新令牌而不是在登录时设置一个令牌会处理它吗？这带来了一次打开更多表单的问题，我不喜欢它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T13:32:11.033

您的站点应该已经关闭了您发现的所有 XSS 漏洞，否则 CSRF 将毫无用处。但是，并行添加 CSRF 会很有用，这样一旦所有 XSS 错误都得到修复，站点的 csrf 保护也可以正常工作。

不幸的是，如果存在 XSS 漏洞，则无法防止 CSRF，因为通过 XSS 漏洞，攻击者可以读取您的网站并检查令牌（使用 javascript）。因此，无论您以何种方式和任何位置添加令牌，都可以找到该令牌，然后对其进行屏幕截图

但是，如果您确保重要页面上没有 XSS 错误，然后添加 CSRF 保护，仍然存在安全漏洞，但是将多个错误链接在一起所需的技能水平会更加困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-17T00:18:24.980

**简短的回答：** `Origin header check`是唯一的**csrf**保护机制，即使存在 XSS 漏洞，它也能站稳脚跟。

这些是我们用来防止 CSRF 的技术

## 同步器令牌

使用 Synchronizer Token 方法，服务器在输入表单中嵌入一个动态隐藏变量（注意，服务器必须对表单生成具有绝对控制权，以便它可以生成随机字符串并嵌入到表单中）并将其保存在服务器端的会话-> 验证表单提交，并在使用一次后立即将其从会话中失效。这不适用于支持完全分离的 SPA（单页应用程序）的 Restful 服务，因为微服务无法访问 SPA 的表单生成机制。提交表单时，服务器可以检查并确保隐藏变量存在并且它是正确的值。看，这是在正文中发送的（如果我们将这个新令牌设置为 cookie 而不是表单正文，它会破坏整个事情，

如果 mybank.com 没有清理表单输入（或者换句话说，如果 mybank.com 容易受到 xss 攻击），黑客[可以克服](https://rileykidd.com/2013/09/09/using-xss-to-csrf/)这种 csrf 预防方法。[https://rileykidd.com/2013/09/09/using-xss-to-csrf/](https://rileykidd.com/2013/09/09/using-xss-to-csrf/)

## 双重提交 Cookie

使用双重提交 Cookie 方法，会将两个 cookie 发送回浏览器。一个是会话 id，另一个是随机值（类似于同步器令牌）可以说`sessionid`是`csrfid`那些 cookie。

有两件事可以使这种机制发挥作用。

1) 内置于浏览器中的功能称为`Same Origin Policy`. 这仅允许脚本代码与其他服务器端点交互，前提是这些端点与传递所述脚本代码的端点具有相同的来源（基本 URI）。你可能会想，“哇！如果一个 cookie 本身不安全，那么两个 cookie 如何更安全？” 等等，关键在下一个点

2) 将第二个 cookie ( `csrfid`) 包含在自定义标头中的后续请求中（比如说，`X-XSRF-Token`）。由您的客户端脚本代码来确保正确设置。

当您请求登录页面时，服务器会发回两个 cookie。第二个 cookie 用于来自浏览器的后续请求的自定义标头。服务器检查自定义标头是否存在，并根据为该页面发送的内容检查该值。

与 Synchronizer Token 方法类似，外部站点试图欺骗页面并诱骗您将数据提交到活动会话，将会失败，因为它无法为不同 URL 的站点设置自定义标头。

## 主要行动

1.  服务器必须生成一个随机值 csrftoken cookie 并在会话建立时将其发送到浏览器。

2.  客户端需要访问 cookie 并为每个后续请求设置自定义标头

3.  服务器需要验证 CUSTOM HEADER（只需忽略`csrfid`（或您提供的任何名称）cookie。由于它是一个 cookie，无论如何它都会与每个请求一起出现，只需忽略它）

这种技术是有效的，因为所有浏览器都实现了相同的源策略。只有设置了 cookie 的网站中的代码才能从该站点读取 cookie 并为对该站点的请求设置自定义标头。

**开放式问题**（还没有机会对此进行测试）：`httpOnly`第二个（csrf-token）cookie怎么样......我们是否需要设置它？.. 如果我们设置它，Javascript 是否能够访问它来设置每个后续请求。另一方面，如果 Javascript 能够访问它，那么再加上 un-sanitized-form-negligence XSS 漏洞，XSS 攻击可以暴露用户的 csrf-token。然后，如果 evil-guy 能够欺骗用户访问 evil-site-which-has-a-csrf-form.com，同时在 mybank.com 中进行活动会话，则可能发生 csrf 攻击。同意，有太多的“**如果**”可以进行攻击，但仍然**不安全**。

到目前为止，如果存在 XSS 漏洞，这些方法都不是那么有效。让我们看看第 3 个选项

## 源头检查

`Origin`所有浏览器（包括 Internet Explorer 9 及更高版本）都会在其请求中发送标头。Javascript 不允许设置此标头，这使您可以高度确信浏览器在该标头中具有正确的信息。然后，服务器可以显式检查该标头并验证基本 URI 是否与服务器的匹配。如果服务器设置为拒绝 Origin 标头中的基本 URI 与预期值不匹配的浏览器请求，则试图欺骗您页面外观的第三方站点将被挫败，因为浏览器中设置的 Origin 将是与预期的不同。

即使 mybank.com 存在 XSS 漏洞，这也不会失败。**抓住**纳达！如果您的用户使用（非常）旧版本的浏览器，您可能还有其他问题需要解决:)

参考： [https ://stormpath.com/blog/secure-single-page-app-problem](https://stormpath.com/blog/secure-single-page-app-problem)

# c# - MonoDroid HttpWebRequest 和 WebClient 不可靠？

> ID：11111163
> 
> 赞同：6
> 
> 时间：2012-06-20T00:05:41.283
> 
> 标签：c#, mono, xamarin.android

我在 MonoDroid 中使用 Webrequests 并随机超时时遇到了很多麻烦。我的代码工作正常，然后有时所有请求都超时并且不起作用。

我已经验证了我的请求中使用的 web 服务不是问题。

下面是一些代码示例，我可以使用它来使用 MonoDroid 从 Web 服务请求一些数据：

```
bool bolOk = false;
HttpWebRequest request = (HttpWebRequest)WebRequest.Create ("http://www.website.com/service/");
request.Timeout = 20000;
request.Credentials = gv_objCredentials;

using (HttpWebResponse response = (HttpWebResponse)request.GetResponse ()) {
    bolOk = response.StatusCode == HttpStatusCode.OK;
} 
```

如您所见，这是基本的东西。我总是在使用 ThreadPool.QueueUserWorkItem 或 TaskFactory 的 UI 的另一个线程上使用上述代码。

我注意到的是，如果请求从我的应用程序开始超时并且我将其插入我的计算机然后从 MonoDevelop 调试应用程序，请求工作而不会超时。我不确定这是否意味着什么。这类似于使用与手机位于同一网络上的浏览器在我的计算机上测试 Web 服务。Web 服务始终可以正常工作。

从 MonoDroid 发出 Web 请求的最佳方法是什么？

如果 web 服务正常运行，如何确保我的请求始终成功并且不会超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T12:57:13.967

我在 Xamarin 4.2.6 和 4.2.8 上遇到了问题。

[感谢 Xamarin 的支持，他们发现了问题并建议我在我的项目属性中将我的构建定位到 armeabi-v7a 而不是 armeabi（这里](http://mono-for-android.1047100.n5.nabble.com/PSA-Properly-supporting-ARM-Devices-td5711990.html)描述了一些多核处理器问题）

根据您是否计划支持多核处理器，您应该查看我们的[这篇文章](https://bugzilla.xamarin.com/show_bug.cgi?id=7013#c15)，并且可能需要手动编辑您的 .csproj 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-07T15:21:39.703

有一个新版本的 Mono for Android (4.2.5) 修复了 WebRequest 和 webRequestStream 的一些错误。您可以在此处查看发行说明：http: [//docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.2.5](http://docs.xamarin.com/android/Releases/Mono_For_Android_4/Mono_for_Android_4.2.5)

我建议下载最新的位并检查它是否有效。如果没有，请提交一个错误，他们肯定会在产品的下一个版本中修复它。

# php - 从 url 获取域（理想功能）

> ID：11111165
> 
> 赞同：-2
> 
> 时间：2012-06-20T00:05:53.690
> 
> 标签：php, regex

> **可能重复：**
> [如何从 URL](https://stackoverflow.com/questions/569137/how-to-get-domain-name-from-url)
> [获取域名 PHP 从子域获取域名](https://stackoverflow.com/questions/1201194/php-getting-domain-name-from-subdomain)

正如我从谷歌的例子中发现的那样，从 url 获取域名并不是那么普遍，因为：

1.  万维网
2.  子域
3.  二级域名（co.uk）

是否有任何解决方案，可以得到普遍的领域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:27:45.853

我在 Ruby 中使用以下正则表达式，它对我有用：

```
/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([-\w\/_\.]*(\?\S+)?)?)?)/ 
```

示例：[http ://rubular.com/r/wyR7yvKT6q](http://rubular.com/r/wyR7yvKT6q)

但是你在**domain**下是什么意思？上面的正则表达式正确提取域

```
http://my.subdomain.ko.uk
to
my.subdomain.ko.uk <-- this is domain 
```

或者您可以使用：

```
.*([^\.]+)(com|net|org|info|coop|int|co\.uk|org\.uk|ac\.uk|uk|__and so on__)$
/^(?:www\.)?(.*?)\.(?:com|au\.uk|co\.in)$/ 
```

# android - WebViewClient shouldInterceptRequest 处理压缩数据

> ID：11111168
> 
> 赞同：4
> 
> 时间：2012-06-20T00:06:21.667
> 
> 标签：android, gzip, webviewclient

我想拦截 WebViewClient 中的所有 HTTP 请求并发出我自己的请求。我遇到的问题是处理压缩响应。

有几个不同的帖子建议可以使用的方法（例如 AndroidHttpClient.getUngzippedContent(entity) 或 GZIPInputStream(entity.getResponse())），但是当我为这些返回 WebResourceResponses 时，页面加载为空白。我认为这是因为 html 是 gzip 压缩的，然后没有正确处理，所以页面的其余部分甚至没有被请求。

有没有人有一个 100% 的工作方法来简单地拦截每个 HTTP 请求并返回一个 WebResourceResponse？我目前能够对未压缩的任何内容执行此操作，但对于压缩响应我返回 null （这意味着请求没有被拦截，因此会被执行两次），以便页面正确加载。

任何帮助或朝着正确方向迈出的一步将不胜感激。我认为这可能并不难，但我完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-08T13:55:21.070

在请求资源时尝试避免接受标头。如果您在请求时不接受 gzip 数据，服务器将向您发送完整的数据。

# typo3 - 打字稿中对象变量的概念

> ID：11111170
> 
> 赞同：1
> 
> 时间：2012-06-20T00:07:09.813
> 
> 标签：typo3, typoscript

在我的打字稿`20.special.value`中`10.value.typolink.parameter`具有相同的值，即页面 id。`COA`我使用这个值在同一个对象中构建标题和子页面的菜单。我希望能够重新使用这个值。

**如何在打字稿中调用对象属性？**

这是我尝试过的：

```
 10 = HTML
  10 {
    value.typolink {
      parameter = {$temp.LANDINGPAGEMENU.20.special.value}
    }
  } 
```

**更新**：

我在网站的不同部分重新使用我的 COA 对象，并且只更改`special.value`, 所以要显示我拥有的菜单：

```
temp.LANDINGPAGEMENU.10.value.typolink.parameter = 2427
temp.LANDINGPAGEMENU.20.special.value = 2427  
temp.COLUMN_NOTSURE < temp.LANDINGPAGEMENU 
```

我正在寻找一种更清洁的方式来处理

```
temp.LANDINGPAGEMENU.10.value.typolink.parameter = 2427
temp.LANDINGPAGEMENU.20.special.value = 2427 
```

完整的 LANDINGPAGEMENU 印刷代码是[http://pastebin.com/p9kPuZEe](http://pastebin.com/p9kPuZEe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:16:44.100

1.  使用常量，但不要以您尝试过的方式使用。您必须先定义常量。

    常数：`my_constant = 2427`

    设置：`parameter = {$my_constant}`

    **...或者...**

2.  使用运算符通过**[引用](http://typo3.org/documentation/document-library/core-documentation/doc_core_ts/4.7.0/view/1/2/#id501855)**分配值之一`=<`。但是，这仅在使用整个对象时才有效。例子：

    `temp.something = TEXT`

    `temp.something.value = 2427`

    `...parameter.cObject =< temp.something`

* * *

我建议您使用常量选择选项 1，因为第二个选项有点麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:29:29.763

您可以复制该属性，但不能通过引用它。

# javascript - 在 Click 事件中访问 Javascript 类对象

> ID：11111171
> 
> 赞同：0
> 
> 时间：2012-06-20T00:07:14.957
> 
> 标签：javascript, jquery, object, plugins

我一直在尝试学习如何构建 jQuery 插件，所以我还是新手。由于这是我的第一个插件，我决定尝试一个简单的可折叠面板/盒子（你只能阅读这么多，对吧？）。当点击事件触发时，我无法访问对我的 Javascript 类对象的引用。我知道事件内部的 this 是指触发事件的元素。我也知道我可以`_self = this;`在事件之前做一些事情，但这只会缓存集合中的最后一个对象。有人对我如何保留对类对象的引用有任何建议吗？

谢谢！

这是我的代码。

HTML 代码

```
<div class="mypanel" title="Panel 1">Testing panel 1</div>
<div class="mypanel" title="Panel 2">Testing panel 2</div>
$('.mypanel').collapsiblePanel(); 
```

插件代码

```
var contentVisible = 'showContent', contentNotVisible = 'hideContent';

;(function($) {
    var pluginName = 'collapsibleBox';

    function Plugin(element, options) {
        this.ele = element;
        this.$ele = $(element);
        var _self = this;

        this.options = $.extend({}, $.fn[pluginName].defaults, options);

        this.init();

        /* Expose methods of Plugin we wish to be public.
         * This gets stored when the plugin is created
         */
        return {
            option: this.option,
            destroy: this.destroy
            /* Other public methods here */
        }
    }
    $.fn[pluginName] = function(options) {
        /* If the first parameter is a string, treat this as a call to a public method. */
        if(typeof arguments[0] === 'string') {
            var methodName = arguments[0];
            var args = Array.prototype.slice.call(arguments, 1);
            var returnVal;
            this.each(function() {
                /* Check that the element has a plugin instance, and that
                 * the requrested public method exists.
                 */
                if($.data(this, 'plugin_' + pluginName) && typeof $.data(this, 'plugin_' + pluginName)[methodName] === 'function') {
                    /* Call the method of the Plugin instance, and Pass it the supplied arguments */
                    returnVal = $.data(this, 'plugin_' + pluginName)[methodName].appy(this, args);
                }
                else {
                    $.error('Method ' + methodName + ' does not exist on jQuery.' + pluginName);
                }
            });
            if(returnVal !== undefined) {
                /* If the method returned something, return it */
                return returnVal;
            }
            else {
                /* Otherwise, returning 'this' preserves chainability */
                return this;
            }
        }
        /* If the first parameter is an object (options), or was omitted,
         * instantiate a new instance of the plugin
         */
        else if(typeof options === 'object' || !options) {
            return this.each(function() {
                /* Only allow the plugin to be instantiated once */
                if(!$.data(this, 'plugin_' + pluginName)) {
                    /* Pass options to Plugin constructor, and store Plugin
                     * instance in the element's jQuery data object
                     */
                    $.data(this, 'plugin_' + pluginName, new Plugin(this, options));
                }
            });
        }
    };

    $.fn[pluginName].defaults = {
        onInit: function() {},
        onDestroy: function() {}
    };

    Plugin.prototype = {
        init: function() {
            this.createContentArea();
            this.createTitleBar();
            this.hook('onInit');
        },
        createContentArea: function() {
            /* ... */
        },
        createTitleBar: function() {
            /* ... */

            this.$title.click(function() {
                if(this.$ele.data('state') == contentVisible) { // The problem is here
                    this.collapse();
                }
                else {
                    this.expand();
                }
            });
        },
        expand: function() {
            this.$content.slideDown();
            this.$ele.data('state', contentVisible);
        },
        collapse: function() {
            console.log(this);
            this.$content.slideUp();
            this.$ele.data('state', contentNotVisible);
        },
        /* Use this function to get/set variables */
        option: function (key, val) {
            if(val) {
                this.options[key] = val;
            }
            else {
                return this.options[key];
            }
        },
        destroy: function () {
            /* ... */
        },

        hook: function (hookName) {
            if(this.options[hookName] !== undefined) {
                this.options[hookName].call(this.ele);
            }
        }
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:20:28.740

我已经设法使用`.data()`方法和`.call()`方法的组合来解决这个问题，以确保函数调用的上下文始终是父元素。我设法使用我拥有的模式以及使用 jQuery Plugin Authoring Tutorial 建议的模式来完成这项工作。这是否是正确的做法，我不知道。

```
var methods = {
    init: function(options) {
        var $this = $(this), data = {};
        /* Set a local copy of the options */
        data.options = $.extend({}, defaults, options);
        /* Create the content area */
        data.$content = createContentArea(this);
        /* Create the title bar */
        data.$title = createTitleBar(this, data.options.header, data.options.title);

        /* Show/Hide the content based on the default state passed in */
        if(data.options.defaultState == contentVisible) {
            data.$content.show();
            data.state = contentVisible;
        }
        else {
            data.$content.hide();
            data.state = contentNotVisible;
        }

        /* Add the title click event */
        data.$title.click(function() {
            methods.toggle.call($(this).parent());
        });

        /* Add the public methods */
        data.methods = {
            toggle: methods.toggle, 
            expand: methods.expand, 
            collapse: methods.collapse
        };
        return data;
    }, 
    toggle: function() {
        var $this = $(this), data = $this.data('plugin_' + pluginName);
        if(data.state == contentVisible) {
            methods.collapse.call(this);
        }
        else if(data.state == contentNotVisible) {
            methods.expand.call(this);
        }
    }, 
    expand: function() {
        var $this = $(this), data = $this.data('plugin_' + pluginName);
        data.$content.slideDown();
        data.state = contentVisible;
        $this.data('plugin_' + pluginName, data);
    }, 
    collapse: function() {
        var $this = $(this), data = $this.data('plugin_' + pluginName);
        data.$content.slideUp();
        data.state = contentNotVisible;
        $this.data('plugin_' + pluginName, data);
    }
}; 
```

# perl - Catalyst 中的 :Args 和 :CaptureArgs 有什么区别？

> ID：11111172
> 
> 赞同：10
> 
> 时间：2012-06-20T00:07:26.353
> 
> 标签：perl, catalyst

我通常可以通过随机尝试这两个选项的不同排列来获得我想要的行为，但我仍然不能说我确切地知道它们做了什么。有没有具体的例子可以证明这种差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T00:18:00.327

`:CaptureArgs(N)`如果至少有 N 个 args 则匹配。它用于非终端链式处理程序。

`:Args(N)`仅当恰好剩下 N 个 args 时才匹配。

例如，

```
sub catalog : Chained : CaptureArgs(1) {
    my ( $self, $c, $arg ) = @_;
    ...
}

sub item : Chained('catalog') : Args(2) {
    my ( $self, $c, $arg1, $arg2 ) = @_;
    ...
} 
```

火柴

```
/catalog/*/item/*/* 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T06:47:50.600

`CaptureArgs`在 Catalyst 的链式方法中使用。

`Args`标志着链式方法的结束。

例如：

```
sub base_method : Chained('/') :PathPart("account")  :CaptureArgs(0)
{

}
sub after_base : Chained('base_method') :PathPart("org") :CaptureArgs(2)
{

}
sub base_end : Chained('after_base') :PathPart("edit")  :Args(1)
{

} 
```

以上链式方法匹配`/account/org/*/*/edit/*`。

这`base_end`是链的结束方法。使用标记链动作`Args`的结束。如果`CaptureArgs`使用表示链仍在进行中。

`Args`也用于催化剂的其他方法中，用于指定方法的参数。

同样来自 cpan [Catalyst::DispatchType::Chained](http://search.cpan.org/~bobtfish/Catalyst-Runtime-5.90012/lib/Catalyst/DispatchType/Chained.pm#Introduction)：

```
The endpoint of the chain specifies how many arguments it
 gets through the Args attribute. :Args(0) would be none at all,
 :Args without an integer would be unlimited. The path parts that 
aren't endpoints are using CaptureArgs to specify how many parameters
 they expect to receive. 
```

# android - 如何将 DialogFragment 正/负按钮保留在软键盘上方

> ID：11111176
> 
> 赞同：15
> 
> 时间：2012-06-20T00:07:42.157
> 
> 标签：android, android-dialogfragment

我正在使用 DialogFragment。当用户从 Gmail 平板电脑应用程序的屏幕与下面的示例图片中的编辑文本进行交互时，我希望正面和负面按钮保持在键盘上方。

![没有软键盘](../Images/67539a4ad15d570cb8aafe95ade36e2a.png)

![使用软键盘 - 当对话框调整大小和内容滚动时，按钮仍保留在键盘上方](../Images/6d1367a40adc066be819c0c7c361c1d4.png)

在我不起作用的尝试中，这是我的 Dialog Fragments onCreateDialog 方法

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {   

    LayoutInflater factory = LayoutInflater.from(getActivity());
    final View textEntryView = factory.inflate(R.layout.my_layout, null);

    return new AlertDialog.Builder(getActivity())                
            .setTitle(getString(R.string.paypal))
            .setView(textEntryView)
            .setPositiveButton(R.string.dialog_ok,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {                          

                    }
                }
            )
            .setNegativeButton(R.string.dialog_cancel,
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int whichButton) {

                    }
                }
            )
            .create();
} 
```

这是 R.layout.my_layout

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:fillViewport="true">

    <LinearLayout android:layout_width="fill_parent" android:layout_height="wrap_content" android:orientation="vertical">
        <ImageView android:id="@+id/paypal_button"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:layout_marginTop="15dip"
               android:layout_marginBottom="15dip"

             />
        <EditText
            android:id="@+id/edit_paypal_email"
                style="@style/GeneralEditText"
                android:hint="@string/contact_info_text_email"
                android:inputType="textEmailAddress"
                />

           <View 
            android:id="@id/horizontal_line"
            style="@style/HorizontalLine"
            android:layout_marginTop="@dimen/contact_info_line_margin_top" />

        <!-- Notes -->
        <TextView
            android:text="@string/paypal_info1"
            style="@style/ContactInfoNotes"
            android:paddingBottom="5dip"
            />  

        <TextView
            android:text="@string/paypal_info2"
            style="@style/ContactInfoNotes"
            android:paddingBottom="5dip"
            />

        <TextView
            android:text="@string/paypal_info3"
            style="@style/ContactInfoNotes"
            android:paddingBottom="5dip"
            />
        <TextView
            android:text="@string/paypal_info4"
            style="@style/ContactInfoNotes"
            android:paddingBottom="5dip"
            />

    </LinearLayout> 
</ScrollView> 
```

在我的实现中，软键盘出现并覆盖了对话框的正面和负面按钮。我缺少什么让按钮保留在键盘上方？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-14T17:49:23.253

只需将其添加到您的 onViewCreated 上：

```
@Override
public void onViewCreated(View view, Bundle savedInstanceState) {
    getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
    super.onViewCreated(view, savedInstanceState);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T18:12:42.040

我有同样的问题，我找到了解决方案。布局文件的基本部分：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:layout_weight="1">
 <!-- Form items  -->
</ScrollView>

<!-- Include the layout which contains the buttons -->
<include layout="@layout/fragment_dialog_button_bar" android:layout_weight="0" /> 
```

所以你需要将按钮的 layout_weight 设置为 0，而 scrollview 的权重为 1 或更大。

我希望这将有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:15:57.697

我相信这与`LinearLayout`and有关`ScrollView`。从 ScrollView 中移除 fillViewport 部分，并在 LinearLayout 中显示滚动条。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:scrollbars="vertical"
        android:scrollbarAlwaysDrawVerticalTrack="true">
         <!-- Stuff -->

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:21:20.867

您是否尝试将以下属性添加到`activity`清单中的标记？

```
<activity android:name=".SampleActivity"
    android:windowSoftInputMode="adjustResize" 
    ... >
</activity> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:58:54.673

这对我有用。

```
public class Fragment1 extends DialogFragment{
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState){
    getDialog().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_RESIZE);
    super.onViewCreated(view, savedInstanceState);
    }
}

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ScrollView
        android:layout_width="match_parent"
        android:fillViewport="true"
        android:layout_weight="1"
        android:layout_height="300dp" >

        <EditText
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:inputType="textMultiLine|textAutoCorrect|textCapSentences"
             />
    </ScrollView>

    <Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0"
         />

</LinearLayout> 
```

# php - PHP Curl 登录 Cookie 如何设置 cookie

> ID：11111178
> 
> 赞同：0
> 
> 时间：2012-06-20T00:07:48.520
> 
> 标签：php, cookies, curl, login, setcookie

我有两个站点 A 和 B 我希望能够让站点 A 的经过验证的用户登录到站点 B，

站点 A - 使用 php；

站点 B - 使用 Zend 框架。

我希望在站点 A 上有一个 iframe 到站点 B 的私有部分或重定向到站点 B，当我使用站点 A 上的表单进行 html 帖子时，我使用重定向并登录的凭据一切正常，我想要在 php.ini 中从服务器端更安全地执行此操作。当我使用 php curl 发布时，用户没有在 iframe 内登录，我厌倦了重定向，但用户再次没有在站点 B 上登录。

我不知道为什么 html 表单有效而 php curl 无效？我是否想使用 curl 发送其他内容，还是 Zend 有问题？

----- 好的，经过更多的谷歌搜索后，我将问题缩小到了 cookie，我相信我必须设置它们，但我不知道如何设置？这个对吗？我将如何在 php 中设置它们？或者我是否将设置 cookie 的标头传递给浏览器并转发到站点 B？如果是这样，我该怎么做？

到目前为止，这是我的代码。

```
<?php
$data = array(
 'useremail' => 'someemail',
 'password' => 'somepassword'
 );

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://siteb.com/account/login");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookies.txt");   // Cookie management.
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookies.txt");
curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE);

$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
?>    

<html>
 <body>
 <iframe src="http://SiteB.com/account/login" width="950" height="700"></iframe>

 <form action="http://SiteB.com/account/login" method="post">
 email: <input type="text" name="useremail" value="useremail" /><br />
 password: <input type="text" name="password" value="somepassword" /><br />
 <input type="submit" value="Submit" />
 </form>
</body>
</html> 
```

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:54:31.660

“当我使用 php curl 发布时，用户没有在 iframe 中登录，我厌倦了重定向，但用户再次没有在站点 B 上登录。”

我的回答：将 Php-Curl 视为浏览器。并且您正在将脚本作为不同浏览器执行的浏览器。要使 iframe 身份验证正常工作，需要在浏览器中设置 cookie。当您从 PHP 脚本进行身份验证时，会在 PHP-curl 浏览器上设置 cookie。这两个浏览器都不共享 cookie。我不认为你可以让用户像这样登录。

您使用的是 Windows 服务器还是 Linux 服务器？

我相信我必须设置它们，但我不知道如何设置？这个对吗？通过查看使用 cookie 的 curl 选项，您做对了。

```
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);   // Cookie management.
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path); 
```

顺便说一句，您可以尝试以下代码并检查 cookies%randNum%.txt 是否正在您的 cookies 文件夹中生成？顺便说一句，在执行之前，在与脚本相同的文件夹中创建一个 cookies 文件夹。只是为了确保您将所有 cookie 放在一个文件夹中，而不是分散在脚本文件中。

```
 <?
$mypath = getcwd();
            $mypath = preg_replace('/\\\\/', '/', $mypath);
            $rand = rand(1, 15000);
            $cookie_file_path = "$mypath/cookies/cookie$rand.txt";
    $data = array(
     'useremail' => 'someemail',
     'password' => 'somepassword'
     );

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, "http://siteb.com/account/login");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE );
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE );
    curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie_file_path);   // Cookie management.
    curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie_file_path);
    curl_setopt($ch, CURLOPT_COOKIESESSION, TRUE);

    $output = curl_exec($ch);
    $info = curl_getinfo($ch);
    curl_close($ch);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:42:26.373

您是否创建了 cookies.txt 并允许 Web 服务器的用户对其进行写入？

[http://siteb.com/account/login](http://siteb.com/account/login)将需要启动会话（或写入 cookie）。

cURL 将处理其余部分。

# php - PHP 回显 HTML 文件

> ID：11111185
> 
> 赞同：1
> 
> 时间：2012-06-20T00:08:31.270
> 
> 标签：php, html, echo

我正在尝试从 php 脚本中回显 html 文件内容。很简单的实现

```
$response=file_get_contents("second.html");

echo $response; 
```

当我直接点击 html 文件时，所有内容似乎都可以，但是当我得到回显字符串时，它就不同了，html 包含带有 utf8 字符串和转义字符的 javascript。似乎“echo”正在更改字符串，因为我尝试将 $response 字符串保存在第二个 html 文件中，并且看起来也可以。我的问题是，有没有办法直接给出字符串而不进行处理。

此外，似乎回显的 html 可以在 Firefox 上运行，但不能在 chrome 上运行，文件 html 可以在两者上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:35:33.753

如果你这样做，你会得到什么：

```
var_export(get_magic_quotes_gpc()); 
```

开了吗？（真的）

如果是这样的话：

[http://www.php.net/manual/en/security.magicquotes.disabling.php](http://www.php.net/manual/en/security.magicquotes.disabling.php)

或者

```
$response = stripslashes(file_get_contents("second.html")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:42:54.677

可能是您没有告诉浏览器您使用的是什么编码？

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-08T15:40:13.497

如果我理解正确，您想将 HTML 视为纯文本，您可以运行 PHP 脚本以使用“str_replace()”查找“<”和“>”字符并将其替换为 HTML 实体。[HTML 实体](http://www.w3schools.com/HTML/html_entities.asp)

然后，当您回显时，PHP 将它们作为纯文本而不是 HTML 的“<”和“>”处理。

了解有关使用 str_replace() 在 PHP 中查找和替换的更多信息：

[str_replace PHP 教程](http://www.w3schools.com/php/func_string_str_replace.asp)
示例：

```
<?php
$response = file_get_contents("second.html");
str_replace("<", "&lt;",$response);
str_replace(">", "&gt;",$response;
echo $response;
?> 
```

# php - PHP 变量重用

> ID：11111186
> 
> 赞同：2
> 
> 时间：2012-06-20T00:08:33.113
> 
> 标签：php, garbage-collection

在开始之前，我不是在询问标准编码实践或“礼仪”。我的问题更多是出于对 PHP 内部结构的好奇。到目前为止，我的研究似乎发现人们对 PHP 的范围感到困惑。

在 PHP 中重用变量是否有任何好处/坏处，无论是内存还是速度？为了科学。

假设您在整个脚本中按顺序访问多个文件。

*   场景 A：每个句柄都有一个变量，$file1、$file2、$file3 等。
*   场景 B：您的句柄都重用了变量 $fp

这种理论场景是否需要分别占用资源密集型的脚本？B 会允许垃圾收集摆脱旧句柄而 A 不会吗？通过 Zend 进行的优化会使这成为一个非问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:35:57.873

这个问题没有一个简单的答案。优化和性能在很大程度上取决于您的特定代码库、它运行的平台、服务器上运行的其他内容等等。

首先，您的场景太模糊，无法提供足够的答案。但是，要触及一些先前的评论/担忧......

PHP 没有非常明确的垃圾收集规则。在 THEORY 场景中，由于垃圾收集，函数退出时 A 将释放内存。实际上，这种情况很少发生。有许多触发器会导致垃圾回收释放该内存，但在幕后，实际的低级 free() 和 mallocs() 并没有被淘汰。如果您仔细观察内存堆栈，您会发现在函数退出后，$file1、$file2、$file3 的内存空间将保留。有时直到整个应用程序退出。

您的应用程序构建还将确定哪个更快，在符号表中为 $file1、$file2、$file3 创建一个新条目或反复使用 $fp。在理论上，再次使用 $fp 通常意味着不需要重新分配内存空间，并且不需要重新创建新的符号表条目和相应的管理对象。然而，这并非总是如此。有时重新使用 $fp 实际上可能会更慢，因为需要先调用销毁，然后重新创建对象。在某些极端情况下，在迭代过程中创建一个新的 $file1、$file2、$file3 并让垃圾收集一次发生可能会更快。

所以，这一切的底线......

您需要在其原生环境中分析和测试您自己的应用程序，以了解事物在您的 Playground 中的行为方式。它很少是“总是这样做”或“从不这样做”的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:20:22.083

对我的答案没有信心，但我确实发现重用 var 可以节省更多内存，尤其是在将 var 重新用于查询结果时，因为这些 var 通常会在其中填充许多其他不需要的东西。

您可以使用

`echo memory_get_usage()`在代码执行的不同阶段查看差异并进行比较。

但随着代码的增长，它可能会变得令人困惑，并使人们更难阅读。

当脚本完成时，PHP 也会运行垃圾收集。所以你如何命名你的变量可能与它没有任何关系，而是影响它在执行期间使用多少内存。

# c++ - 函数运行时间

> ID：11111189
> 
> 赞同：3
> 
> 时间：2012-06-20T00:08:50.830
> 
> 标签：c++, time, clock

我想打印我的函数的运行时间。出于某种原因，我的计时器总是返回 0。谁能告诉我为什么？

```
double RunningTime(clock_t time1, clock_t time2)
{
    double t=time1 - time2;
    double time = (t*1000)/CLOCKS_PER_SEC;
    return time;
}

int main()
{
     clock_t start_time = clock();

     // some code.....

    clock_t end_time = clock();

    std::cout << "Time elapsed: " << double(RunningTime(end_time, start_time)) << " ms";

    return 0;
} 
```

我尝试使用`gettimeofday`它仍然返回 0。

```
double get_time()
{
    struct timeval t;
    gettimeofday(&t, NULL);
    double d = t.tv_sec + (double) t.tv_usec/100000;
    return d;
}

int main()
{
        double time_start = get_time();

        //Some code......

        double time_end = get_time();

        std::cout << time_end - time_start;

    return 0;
} 
```

还尝试使用`chrono`，它给了我各种构建错误：

*   错误：#error 此文件需要对即将推出的 ISO C++ 标准 C++0x 的编译器和库支持。此支持目前是
    实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用。
*   警告：'auto' 将改变 C++0x 中的含义；请删除它
*   错误：ISO C++ 禁止声明“t1”且没有类型错误：“std::chrono”尚未声明
*   错误：请求“（t2 - t1）”中的成员“count”，它是非类类型“int”

    int main() { auto t1 = std::chrono::high_resolution_clock::now();

    ```
     //Some code......

                auto t2 = std::chrono::high_resolution_clock::now();

                std::cout << "Time elapsed: " << std::chrono::duration_cast<std::chrono::milliseconds>(t2-t1).count() << " milliseconds\n";

            return 0;
        } 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:20:12.897

一个计时器滴答大约等于 1/CLOCKS_PER_SEC 秒，即毫秒分辨率。要查看一个实数（非零）数，您应该调用一个非常长时间的函数或使用另一个具有更高时间分辨率工具的库：

*   新的 c++11x 库`chrono`（使用 MSVS 2012）
*   `boost::chrono`（不幸的是，图书馆引用了很多其他的）
*   POSIX 函数[`gettimeofday`](http://pubs.opengroup.org/onlinepubs/000095399/functions/gettimeofday.html)，它为您提供 1 微秒的时间分辨率

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:55:41.620

经过大量的反复试验，我选择了`gettimeofday`. 这是我终于可以正常工作的代码。

```
double get_time()
{
    struct timeval t;
    gettimeofday(&t, NULL);
    double d = t.tv_sec + (double) t.tv_usec/1000000;
    return d;
}

int main()
{
    double time_start = get_time();

    //Some code.........

    double time_end = get_time();

    std::cout << time_end - time_start;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T23:20:38.960

我最近使用的一个解决方案使用 C++11 的 lambda 功能来计时任何任意函数调用或一系列操作。

```
#include <ctime>
#include <iostream>
#include <functional>

void timeit(std::function<void()> func) {
    std::clock_t start = std::clock();

    func();

    int ms = (std::clock() - start) / (double) (CLOCKS_PER_SEC / 1000);

    std::cout << "Finished in " << ms << "ms" << std::endl;
}

int main() {
    timeit([] {
        for (int i = 0; i < 10; ++i) {
            std::cout << "i = " << i << std::endl;
        } 
    });

    return 0;
} 
```

# com - 针对 Intersystems Cache 运行 ObjectScript 程序以向 SQL Server 提供数据

> ID：11111190
> 
> 赞同：4
> 
> 时间：2012-06-20T00:09:06.990
> 
> 标签：com, sqlclr, intersystems-cache

# 背景

我工作的主要应用程序主要基于 InterSystems 的 MUMPS 式 Caché 数据库引擎。一切都存储在全局数组中。从系统中获取数据以进行外部报告的范围从简单的痛苦到极其缓慢和痛苦。

Caché 为数据库提供了一个 ODBC 驱动程序，但除非涉及的全局数组碰巧由选择标准键入，否则它会求助于扫描，一个简单的查询将需要数小时才能运行。就规模而言，整个 Caché 生产命名空间约为 100GB。在这些情况下，我可以编写比 ODBC 驱动程序更快地提取数据的 ObjectScript（Intersystems 的 MUMPS 方言）程序。

我认为部分问题是应用程序供应商不使用 Caché 的对象持久性支持，而是将 SQL 表定义为全局数组的外观，并且它通常不适用于批处理请求。

我在 MS SQL Server 中构建了一个报告数据库，它提取最常见的数据（价值 2.5GB），即使它必须扫描每个表，所有结果也会在 3 秒内返回。不幸的是，刷新数据需要很长时间，所以我只能每周进行一次完全刷新，每天进行一次主动刷新。这足以满足大多数需求，但我想做得更好。

我在 Windows 7 和 Windows Server 2008 R2 上使用 Caché 2007、SQL Server 2008 R2、VS2010。

# 问题范围

我需要一种将源 Caché 数据库中的实时数据与 SQL Server 上的其他数据集成的方法。我希望能够将视图或表值函数集成到 SQL 查询中，并让它从源数据库中提取实时数据。

*   实时数据必须在 SQL Server 中可用以进行处理。使用辅助应用程序执行此操作将是一个巨大的痛苦，并且不适用于只希望通过 ODBC 推送查询并获得正确格式的最终​​数据集的报告工具。

*   我知道有一些方法可以将数据导入 SQL Server 或完成我想做的相同的一般事情。这不是这个问题的目的。

*   数据需要来自在 Caché 上运行的 ObjectScript 程序，因为并非我需要的所有数据都通过 SQL 定义的表公开，并且我获得了使性能可用于 ObjectScript 所需的控制。

*   我正在寻找有关任何新选项的建议，或者我如何改进我尝试或考虑过的选项之一，或者这些方法的其他优点或缺点。

# 到目前为止我尝试过的

这个项目是一个令人沮丧的练习，我研究过的每条有希望的途径要么很糟糕，要么由于某种原因不起作用。通常原因是对 SQLCLR 程序集的一些不必要的限制。

1.  通过链接服务器通过 InterSystem 的 Caché ODBC 驱动程序提取所有内容。如果 SQL Server 无法将条件推送到远程服务器或必须在本地执行连接，则它通常会求助于扫描。对任何重要表的扫描都需要花费数小时并且是不可接受的。此外，Caché 中的 SQL 表定义错误地定义了许多列的长度；SQL Server 不喜欢这样并中止查询。请参阅[这个 SO 问题](https://stackoverflow.com/questions/8569520/intersystems-cache-maintaining-object-code-to-ensure-data-is-compliant-with-ob)。我无法更改表定义，供应商认为这不是问题，因为它可以与 MS Access 一起使用。

2.  按需使用 OPENQUERY。这在某种程度上有效，但我仍然可以从上一项中遇到列长度问题，并且无法参数化 OPENQUERY 查询，因此提取上下文数据非常无用。

3.  使用 SQLCLR 通过 CLR 表值函数调用 ODBC 数据提供程序。这解决了参数化和数据长度问题，尽管它确实需要我在每次需要新数据时定义或修改一个函数。不幸的是，并不是我感兴趣的所有数据元素都可以通过 SQL 获得。对于某些事情，我需要直接访问全局数组。

4.  Intersystems 提供了一个[ActiveX 控件](http://docs.intersystems.com/cache20102/csp/docbook/DocBook.UI.Page.cls?KEY=GBCD_basics)，允许您在服务器上通过 TCP 运行 ObjectScript 程序并获得结果。这在独立的 C# 应用程序中效果很好，但是一旦我尝试从 SQLCLR 程序集建立连接，我就会收到一个荒谬的 URI 错误：

    在执行用户定义的例程或聚合“GetActiveAccounts”期间发生 .NET Framework 错误：System.UriFormatException：无效的 URI：URI 为空。System.UriFormatException: 在 System.Uri.CreateThis(String uri, Boolean dontEscape, UriKind uriKind) 在 System.ComponentModel.Design.RuntimeLicenseContext.GetLocalPath(String fileName) 在 System.ComponentModel. Design.RuntimeLicenseContext.GetSavedLicenseKey(Type type, Assembly resourceAssembly) at System.ComponentModel.LicenseManager.LicenseInteropHelper.GetCurrentContextInfo(Int32& fDesignTime, IntPtr& bstrKey, RuntimeTypeHandle rth) at FacsAccess.GetActiveAccounts.Client.connect() at FacsAccess.GetActiveAccounts.Client.. FacsAccess.GetActiveAccounts.E1.GetEnumerator() 处的 ctor()

    请参阅[这个未回答的 SO 问题](https://stackoverflow.com/questions/6524322/sqlclr-wrapping-a-com-call)。网上还有其他[帖子](http://social.msdn.microsoft.com/Forums/en/sqlnetfx/thread/f3be7727-a13d-422c-b2f4-c1f4a4b04074)，但似乎没有人知道。这是一个非常简单的 C++ DLL 的 COM 包装器；它对许可没有任何作用，也没有理由进入托管许可库。我想知道这是否是某种样板文件，它试图获取一个没有名称的程序集的名称，因为它已加载到 SQL 数据库中。

5.  Intersystems 还提供了更直接的[非托管接口](http://docs.intersystems.com/cache20102/csp/docbook/DocBook.UI.Page.cls?KEY=GBCD_classes)，但这些接口都是 C++，我无法通过 P/Invoke 使用它，也无法在 SQLCLR 中加载 C++/CLI 混合模式不纯程序集。

# 我考虑过但似乎有点糟糕的选项

6.  我考虑过通过 SQL Server 的 COM 支持来尝试 ActiveX 控件，但这非常慢而且非常麻烦。

7.  我可以创建一个进程外服务来代理流量，但我不能使用来自 SQLCLR 的 .NET 远程处理，而且你不应该使用 WCF，而且对于这样一个简单的接口来说，它真的很重。我宁愿推出自己的 IPC 接口。

8.  我可以为 VisM 或 CacheDirect 接口编写某种带有 C 风格接口的额外非托管包装器，并通过 P/Invoke 访问它。

看起来这不应该那么难，但它真的把我逼到了墙角，我需要一些观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:51:07.937

我认为您可以通过链接服务器访问 Cache 数据库上的存储过程来使用 ODBC，这些存储过程对 ODBC 驱动程序可见并返回结果集，但未使用 SQL 实现。

我 100% 确定您可以创建此类存储过程并通过 ODBC 访问它们，但我从未尝试从 SQL Server 作为链接服务器访问它们。即使链接服务器不工作，通过 Intersystem 的 ODBC 驱动程序而不是 Active X 控件或 CacheDirect 访问似乎更可取。

[对于这个问题](https://stackoverflow.com/questions/8569545/intersystems-cache-can-python-be-used-to-directly-access-a-global-or-only-clas/9746991#9746991)，我有一个这样的程序示例。

如果链接失效，这里是代码：

```
Query OneGlobal(GlobalName As %String) As %Query(ROWSPEC = "NodeValue:%String,Sub1:%String,Sub2:%String,Sub3:%String,Sub4:%String,Sub5:%String,Sub6:%String,Sub7:%String,Sub8:%String,Sub9:%String") [SqlProc]
{
}

ClassMethod OneGlobalExecute(ByRef qHandle As %Binary, GlobalName As %String) As %Status
{
    S qHandle="^"_GlobalName
    Quit $$$OK
}

ClassMethod OneGlobalClose(ByRef qHandle As %Binary) As %Status [ PlaceAfter = OneGlobalExecute ]
{
    Quit $$$OK
}

ClassMethod OneGlobalFetch(ByRef qHandle As %Binary, ByRef Row As %List, ByRef AtEnd As %Integer = 0) As %Status [ PlaceAfter = OneGlobalExecute ]
{

    S Q=qHandle  
    S Q=$Q(@Q)  b  
    I Q="" S Row="",AtEnd=1 Q $$$OK
    S Depth=$QL(Q)
    S $LI(Row,1)=$G(@Q)
    F I=1:1:Depth S $LI(Row,I+1)=$QS(Q,I)
    F I=Depth+1:1:9 S $LI(Row,I+1)=""
    S AtEnd=0
    S qHandle=Q
    Quit $$$OK
} 
```

仅供参考，这*不是*在生产中使用的示例，因为它公开了来自所有全局变量的所有数据。

但是，听起来您似乎已经准备好编写缓存对象脚本来直接获取数据——这是一个这样做的模板。要了解的主要内容是 qHandle 将在每次调用时由 ODBC 驱动程序传回，因此您可以使用它来存储状态。如果有很多状态，使 qHandle 成为一个整数索引，指向一个临时全局保存“真实”状态，并在 close 方法中清理它。

由于您关心性能，您可能还想实现一个

```
MyQueryFetchRows (ByRef qHandle As %Binary, FetchCount As %Integer = 0, ByRef RowSet As %List, ByRef ReturnCount As %Integer, ByRef AtEnd As %Integer) As %Status 
```

方法 - 有关详细信息，请参阅 %Library.Query 的文档。

如果您确实需要将其作为（只读）表而不是存储过程出现在 ODBC 中，我认为这可能是可能的 - 但我以前从未尝试过查看任意存储过程是否可以公开为读取 -只有桌子，我不确定它有多容易，或者它是否真的总是可能的。

# javascript - 寻找 IDE 和 JavaScript 的 SDK

> ID：11111196
> 
> 赞同：-1
> 
> 时间：2012-06-20T00:09:55.810
> 
> 标签：javascript, sdk, ide, web-inspector

我很想知道开发 en JS 的最佳方式。如果我能得到一份在 JS 中开发和调试的工具列表。我不确定是否有。目前，我正在使用：

总结:)

1.  记事本++
2.  JLint N++ 插件
3.  Chrome 网页检查器
4.  网络斯特罗姆
5.  崇高的文字 2
6.  NetBeans 7.3
7.  织梦者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:30:55.367

开发工具总是主观的，但我目前的设置是：

1.  [Visual Studio 2010](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express) - 快速版是免费的，并且仍然支持 javascript 智能感知。
2.  [JetBrains 的 WebStorm](http://www.jetbrains.com/webstorm/) - 有一个很棒的付费版本。
3.  [Firebug](http://www.getfirebug.com)对调试非常有用
4.  [Fiddler](http://www.fiddler2.com) Web 代理 - 对调试非常有用

您可能还想查看 Scott Hanselman 的列表：[Ultimate Developer and Power Users Tool List for Windows](http://www.hanselman.com/blog/ScottHanselmans2011UltimateDeveloperAndPowerUsersToolListForWindows.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T14:24:49.447

试用 NetBeans 7.3

*   项目画架：HTML5 应用程序开发
*   具有 JavaScript 测试支持的 HTML5 应用程序项目
*   JavaScript 编辑器显着改进
*   页面检查器和可视化 CSS 样式编辑器
*   JavaScript 调试器
*   嵌入式 WebKit 浏览器；与 Chrome 深度集成

[http://netbeans.org/community/releases/73/](http://netbeans.org/community/releases/73/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:23:04.783

根据您使用的其他语言，您的 IDE 可能支持 JavaScript。

我正在使用 JetBrains PHPStorm 编写 PHP，并且 JavaScript 支持非常好，因为它可以预编译以检查您的代码并为您提供 intillisense。

这是许多 IDE 中的一个功能，它可以真正提高工作效率，因为您将在工作流程中更早地发现错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:29:11.520

我用`Vim`++ ，我也安装了`jslint plugin`，这对于在不同功能之间切换非常有用。`javascript syntax``ctags`

`snippets`也是一个非常有用的vim插件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T00:36:01.750

我发现 Webstorm 是最好的，但如果您想要免费和开源，请尝试 Eclipse。此外，firebug 似乎比 chrome 调试器工作得更好，因为您可以在 firebug 上安装附加组件，例如 firecookie 等等。

Dreamweaver 也不错

# c# - Activator.CreateInstance 和 Ninject

> ID：11111200
> 
> 赞同：5
> 
> 时间：2012-06-20T00:10:30.773
> 
> 标签：c#, c#-4.0, ninject

我有一个正在处理的项目，我不知道在编译时需要实例化什么类。我正在尝试使用 Activator.CreateInstance() 根据用户输入为我生成一个新类。下面的代码运行良好，但我不得不将我的 INECCQuery 类的构造函数更改为只有一个默认构造函数，并且不使用任何类型的依赖注入。有没有办法我仍然可以使用我的注入绑定和 Activator.CreatInstance()？我正在使用 Ninject 进行注射。

```
 [HttpGet]
    public ActionResult Index(string item) {
      Type t = Type.GetType(string.Format("Info.Audit.Query.{0}Query, Info.Audit", item.ToUpper()));
      if (t != null) {
        INECCQuery query = (INECCQuery)Activator.CreateInstance(t);
        var results = query.Check();
        return View("Index", results);
      }
      return View("Notfound");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:34:33.080

在可能的情况下，始终首选构造函数注入，但合适的备份是利用属性注入。

[http://ninject.codeplex.com/wikipage?title=Injection%20Patterns](http://ninject.codeplex.com/wikipage?title=Injection%20Patterns)

```
class SomeController {

  [Inject]
  public Object InjectedProperty { get; set; }

} 
```

基于您尝试替换的假设，`Activator.CreateInstance`您可以注入一个`Func<T, INECCQuery>`或任何您希望使用的工厂。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T10:12:10.203

您可以让 Ninject 在运行时为您提供一个类型为 t 的对象，并且仍然通过构造函数获得依赖项注入......我在我的应用程序中为一个案例做了类似的事情。

在 Global.asax.cs 文件中，我有以下方法：

```
 /// <summary>
    /// Gets the instance of Type T from the Ninject Kernel
    /// </summary>
    /// <typeparam name="T">The Type which is requested</typeparam>
    /// <returns>An instance of Type T from the Kernel</returns>
    public static T GetInstance<T>()
    {
        return (T)Kernel.Get(typeof(T));
    } 
```

这取决于静态内核引用。

然后，在代码中，我做

```
var myInfrastructureObject = <YourAppNameHere>.GetInstance<MyInfrastructureType>(); 
```

所以，我知道编译时的类型，而你不知道，但改变它并不难。

您可能还希望研究 ServiceLocator 模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T22:40:43.567

我实际上发现您可以将第二个选项传递给该`Activator.CreateInstance`方法，只要它与您的构造函数签名匹配，它就可以工作。唯一的问题是，如果您的参数不匹配，您将收到运行时错误。

```
Type t = Type.GetType(string.Format("Info.Audit.Query.{0}Query, Info.Audit", item.ToUpper()));
INECCQuery query = (INECCQuery)Activator.CreateInstance(t, repository); 
```

感谢所有的帮助。

# ruby-on-rails - Rails Radiant CMS 标签云插件

> ID：11111202
> 
> 赞同：0
> 
> 时间：2012-06-20T00:10:53.807
> 
> 标签：ruby-on-rails, tag-cloud, radiant

我正在使用 Radiant CMS 创建一个博客网站，但我需要一个标签云插件，它可以像博客一样工作，如视觉标签云。我发现[了这个](https://github.com/radiant/radiant/wiki/Tags-Extension)，但它没有给出视觉标签云功能。是否有任何已知的具有传统标签云视觉的产品，或者我必须开发它吗？

感谢回答者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T21:26:47.627

如果你运行 'update' rake 任务，你会发现 public/stylesheets/tags.css 包含一些 CSS。只需确保在您的布局中链接该 css 文件（或将规则复制到您自己的样式表），标签云应该看起来很像您想要的。

# internet-explorer - Flash 广告未在 IE 中显示

> ID：11111206
> 
> 赞同：0
> 
> 时间：2012-06-20T00:11:13.067
> 
> 标签：internet-explorer, flash

我被要求调查 Flash 广告未在 IE 中显示的问题。

该网站[http://www.outbacktravelshop.com.au/](http://www.outbacktravelshop.com.au/)在右栏中的地图下方有许多广告。其中 5 个是 Flash，而这 5 个 Flash 广告不会在 IE 中显示（在 IE9 上的 Windows 7 VM 上进行测试……也可以通过 IETester 在 IE8 和 IE7 上进行测试）。如果您在 PC 或 Mac 上的任何其他浏览器中查看它们，它们就会显示出来。

有谁知道为什么这些可能不会在 IE 中显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:20:27.190

许多人使用[SWFObject](http://code.google.com/p/swfobject/)嵌入 Flash，因为它为您处理各种浏览器怪癖。

然后，您可以像这样嵌入 Flash：

```
<script>

var flashvars = {};
var params = {};
var attributes = {};

swfobject.embedSWF("myContent.swf", "myContent", "300", "120", "9.0.0","expressInstall.swf", flashvars, params, attributes);

</script> 
```

# r - 将 MSWord 文件读入 R

> ID：11111207
> 
> 赞同：10
> 
> 时间：2012-06-20T00:11:24.643
> 
> 标签：r, ms-word

是否可以将 MSWord 2010 文件读入 R？我有 Windows 7 和戴尔 PC。

我正在使用这条线：

```
my.data <- readLines('c:/users/mark w miller/simple R programs/test_for_r.docx') 
```

尝试读取包含以下文本的 MSWord 文件：

```
A   20  1000    AA
B   30  1001    BB
C   10  1500    CC 
```

我收到一条警告消息，上面写着：

警告消息：在 readLines("c:/users/mark w miller/simple R programs/test_for_r.docx") 中：在 'c:/users/mark w miller/simple R programs/test_for_r.docx' 上找到不完整的最后一行

并且`my.data`似乎是胡言乱语：

```
# [1] "PK\003\004\024" "¤l"             "ÈFÃË‹Átí" 
```

我知道通过这个简单的示例，我可以轻松地将 MSWord 文件转换为不同的格式。但是，我的实际数据文件由几十年前输入的复杂表格组成，后来扫描成 pdf 文档。原始纸质文件的年代以及原始纸质、打字和/或扫描过程中可能存在的缺陷导致某些字母和数字不是很清楚。到目前为止，将 pdf 文件转换为 MSWord 似乎是正确翻译表格最成功的方法。将 MSWord 文件转换为 Excel 或富文本等，并不是很成功。即使在转换为 MSWord 之后，生成的文件也非常复杂并且包含许多错误。我想如果我可以将 MSWord 文件读入 R，这可能是编辑和更正它们的最有效方法。

我知道“package tm”我猜它可以将 MSWord 文件读入 R，但我有点担心使用它，因为它似乎需要安装第三方软件。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T01:00:50.927

首先，*readLines()*不是正确的解决方案，因为 Word 文件不是文本（即纯 ASCII 文本）文件。

*tm*包中与 Word 相关的函数称为*readDOC()*，但它和所需的第三方工具 (Antiword) 都适用于较旧的 Word 文件（直到 Word 2003），并且无法使用较新的 .docx 文件。

我可以建议的最好的方法是您尝试*readPDF()*，也可以在*tm*包中找到。注意：它要求您的系统上安装了工具*pdftotext 。*对 Linux 来说很容易，对 Windows 不了解。或者，找到一个将 PDF 转换为纯 ASCII 文本文件（**不是**Word 文件）的 Windows 工具——它们应该在 Windows 上使用记事本正确打开和显示——然后再次尝试*readLines()*。但是，鉴于您的 PDF 文件较旧且来自扫描仪，转换为文本可能会很困难。

最后：我意识到您在这种情况下没有做出最初的决定，但对于其他任何人 - Word 和 PDF 不是存储您要解析的数据的合适格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-24T16:45:56.290

如果它对其他人有帮助，[https://cran.r-project.org/web/packages/readtext/vignettes/readtext_vignette.html](https://cran.r-project.org/web/packages/readtext/vignettes/readtext_vignette.html)，似乎有一个专门用于读取文本数据的新包，包括 Word 文件（也是新的`.docx`格式）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T09:05:30.033

我还没有弄清楚如何将 MSWord 文件读入 R，但我已经将内容转换为 R 可以读取的格式。

1.  我使用 Acrobat X Pro 将 pdf 转换为 MSWord

2.  原始表格用实心垂直线分隔列。事实证明，当我将 MSWord 文件转换为文本文件时，这些垂直线破坏了数据的格式，但我能够在创建文本文件之前从 MSWord 文件中删除这些行。

3.  在步骤 2 中删除垂直线后，将 MSWord 文件转换为文本文件。

4.  生成的文本文件仍然需要大量编辑，但至少数据大部分以 R 可以读取的格式存在，我不必手动重新输入 pdf 中的所有数据，从而节省了很多小时的工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-24T22:23:33.677

您可以使用 RDCOMClient 轻松完成此操作。这么说，有些字符将无法正确读入。

```
require(RDCOMClient)
# Create the connection
wordApp <- COMCreate("Word.Application")
# Let's set visible to true so you can see it run
wordApp[["Visible"]] <- TRUE

# Define the file we want to open
wordFileName <- "c:/path/to/word/doc.docx"
# Open the file
doc <- wordApp[["Documents"]]$Open(wordFileName)
# Print the text
print(doc$range()$text()) 
```

# c# - 正则表达式运算符

> ID：11111208
> 
> 赞同：0
> 
> 时间：2012-06-20T00:11:33.347
> 
> 标签：c#, regex

我有以下正则表达式，我匹配了几行。

这是一个例子：

```
field1    xyz
field2    yiuyi
field3    12.34.12 
```

这是我的正则表达式：

```
static string partPattern = @"^(?<Key>\w*)\s+(?<Value>\w*)$"; 
```

这是我使用的代码：

```
Match m = Regex.Match(line, partPattern);
if (m.Groups["Key"].Length > 0 && m.Groups["Value"].Length > 0)
{
    //add to Dictionary 
} 
```

它在所有情况下都可以正常工作，除非有日期。我只是想让它获取值，而不管空白、引号或其他任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:14:07.080

您正在使用单词字符 ( `\w`)，其中包括`[a-zA-Z0-9_]`，但您可能希望匹配任何字符，至少对于`Value`.

```
^(?<Key>\w+)\s+(?<Value>.+)$ 
```

# android - 以编程方式比较两个移动硬件

> ID：11111209
> 
> 赞同：1
> 
> 时间：2012-06-20T00:11:34.760
> 
> 标签：android, performance, cpu

我正在做一个 Android VOIP 应用程序。我想根据 cpu 性能选择我的编解码器类型。某些音频编解码器在某些低端设备上表现不佳。我想以编程方式而不是在编译时决定这一点。有助于确定 CPU 性能和处理可用带宽的标准是什么：

以下是我能想到的一些：

1) CPU 时钟周期 2) 可用内存

是否有根据 CPU/内存统计信息确定处理能力的标准方法？

很高兴知道 Android 是否提供 api 用于在运行时进行性能分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:48:04.203

有些公司提供这些服务。

大多数情况下，您只需发送设备的品牌、型号、版本等。您会收到描述设备功能的响应，例如 RAM、CPU 等。以及支持播放哪些文件格式，您的设备是否有加速度计，是否支持 HTML 5 ....

快速谷歌搜索给了我[http://wurfl.sourceforge.net/](http://wurfl.sourceforge.net/)

有很多提供者，有付费的和免费的。我不能推荐任何，因为我从未使用过它们。

# ios - 使用 Xcode iOS 的表格视图中的选择（或单选）列表？

> ID：11111210
> 
> 赞同：1
> 
> 时间：2012-06-20T00:12:05.430
> 
> 标签：ios, xcode, uitableview

我想设计一个有表格视图的 iPad 界面，我想知道如何使用 Xcode 在表格视图中进行选择（或单选）列表？所以我可以一次选择多个单元格，例如复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T11:41:43.650

我为广播列表制作了一个类似的 UIView [https://github.com/bishalg/BGRradioList](https://github.com/bishalg/BGRadioList)

我们可以将其修改为不是单选列表而是选择列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:47:25.737

我不确定您到底想做什么，但我有一些代码，我可以在其中从表格视图中选择多个图像，并使用[此](https://github.com/AalokParikh/ELCImagePickerController)代码在一个滚动视图中显示它们。

愿这能帮助你做你喜欢做的事。

快乐编码:)

享受这一天 :) <3 <3 :)

# php - 无法重定向到 html 页面

> ID：11111211
> 
> 赞同：1
> 
> 时间：2012-06-20T00:12:06.223
> 
> 标签：php, html

我的问题是在我成功登录后，它没有重定向到我应该去的页面。

另外，我正在使用 apache 服务器。

下面是我认为需要修复的 PHP 部分。

```
if($count==1){
    // Register $Username, $Password and redirect to file "login_success.php"
    session_register("Username");
    session_register("Password");
    echo "Correct Username & Password";

    header("location:$http://localhost/.../contacts.html");
    }
    else {
    echo "Wrong Username or Password";
    header("location:../php/error.php");
    } 
```

通过使用

`header("location:$http://localhost/.../contacts.html");`

我得到 403 Forbidden 错误..这个错误没有出现在网页上，而是出现在萤火虫上。

如果我替换为

`header( 'Location: http://localhost/.../contacts.html' ) ;`

或者

`header("Location: ./../contacts.html");`

或者

`header('Location: ./../contacts.html');`

它没有给我任何错误，但它仅通过显示contacts.html的html代码而不显示页面本身来响应firebug。

请帮我解释一下以及如何解决这个问题

对于任何语法错误和难以理解的内容，我们深表歉意 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:15:08.573

如[文档](http://php.net/manual/en/function.header.php)`header`中所述，如果您之前打印了一些 html ，则无法使用。（你之前甚至不能放一个空格）。

只需删除`echo`它，它应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:15:24.267

一旦您`echo`发送任何内容或发送任何输出，您的标头就会被发送。因此，您不能在这样做后操纵您的标题。通过简单搜索您在 SO 上的错误消息，您会发现很多关于此问题的帖子

[https://stackoverflow.com/search?q=headers+already+sent](https://stackoverflow.com/search?q=headers+already+sent)

当您将它们重定向到下一行时，无论如何要回显它们有什么意义？:p

**编辑：**此语句中的美元符号是否有原因：`header("location:$http://localhost/.../contacts.html");`？是`$http`变量吗？也许尝试删除美元符号..

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-20T01:15:26.647

去掉`$`http前面的标志就完成了...

# linux - 如何从命令行从 pdf 中删除隐藏的裁剪元素？

> ID：11111216
> 
> 赞同：3
> 
> 时间：2012-06-20T00:12:48.277
> 
> 标签：linux, pdf, crop

如何从命令行从 pdf 中删除隐藏的裁剪元素？我已经尝试了许多解决方案来根据坐标裁剪 pdf 页面上的元素，但是生成的 pdf 大小相同，并且额外的元素只是被屏蔽而不是被删除。我找到[了这个解决方案](http://www.proficiografik.com/2009/11/17/acrobat-9-when-the-crop-tool-is-not-cropping-and-how-to-fix-it.html)，但我正在寻找一个命令行工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:56:02.747

我知道的唯一方法可以做到这一点，同时保留在命令行（Windows、Linux、MacOSX）上工作*的 CropBox 中的所有 PDF 对象是*[**callassoftware**](http://www.callassoftware.com/)的商业/付费软件。

如果您可以接受，请在评论中指出，我会用更多细节更新答案。

否则，另一种方法是将（裁剪的）PDF 页面转换为图像（在 Ghostscript 的帮助下将 fe 转换为 TIFF），然后将图像重新转换回 PDF。所有以前的 PDF 对象都将消失，现在唯一的（图形）“对象”将是嵌入在 PDF 页面上的图像。

如果您可以接受，请在评论中指出这一点，我将使用更多详细信息更新答案。

# html - tr 和边框的边距不起作用，css 和 html

> ID：11111218
> 
> 赞同：0
> 
> 时间：2012-06-20T00:13:24.580
> 
> 标签：html, css

这是我得到的：

[http://jsfiddle.net/62hKs/2/](http://jsfiddle.net/62hKs/2/)

我的愿望：

1.  1）您看到的两个红色框之间的边距顶部 15px
2.  2）在每 2 个盒子中，它看起来像 4 个，我想删除中间的红线，所以只有 2 个，所以它不会成为红线，因为选择器在一个新的 td 中

我做了什么：

我以自己的方式在 4 tr 周围的红色边框上做了，因为经过一些研究后我找不到任何更聪明的方法，然后我尝试了 #mytable tr{ margin: 15px } 这不起作用，还尝试在 css highlightRowStart 中使用边距， highlightRowMiddle, highlightedRowEnd 但也不起作用..

我如何申请保证金？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:15:30.960

您必须将 display 属性设置为 block，以便将边距应用于表格元素。默认情况下 display 属性设置为 table，它[不响应 margin 和 padding 规则](http://www.w3.org/wiki/CSS/Properties/margin)。

尝试类似：

```
table {border: 1px solid #f00;}
tr {display:block}
tr:nth-child(5) {margin-top:15px;border-top:1px solid #f00;}
td:first-child {width:200px;} 
```

此外，考虑在选择元素上制作左侧单元格标签，或者更好的是，完全放弃表格进行布局。`<section>`使用两个 child可能会更灵活，`<ul>`其中`<li>`包含`<label>`and `<select>`：

```
<style>
  section { width:600px; }
  ul { border:1px solid #f00; margin:10px 0 0 0; padding:10px;}
  li { margin:8px 0; width:400px; clear:both; }
  select { float:right; }
</style>

<section>
  <ul>                                                                                                                                                                                                          
    <li>
      <label for='seats_timeclock[]'>Foo</label>
      <select name="seats_timeclock[]">
        <option value="08:00">08:00</option>
        <option value="08:30">08:30</option>
        <option value="09:00">09:00</option>         
      </select>          
    </li>
  </ul>
  <ul>                                                                                                                                                                                                          
    <li>
      <label for='seats_timeclock[]'>Bar</label>
      <select name="seats_timeclock[]">
        <option value="08:00">08:00</option>
        <option value="08:30">08:30</option>
        <option value="09:00">09:00</option>         
      </select>          
    </li>
  </ul>
</section> 
```

[http://jsfiddle.net/sSmCc/3/](http://jsfiddle.net/sSmCc/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:15:35.997

见这个例子：http: [//jsfiddle.net/FypSu/](http://jsfiddle.net/FypSu/)

你想要的是旧的 cellspacing html 属性。CSS 等效项是边框间距。

# ruby-on-rails - 从 VirtualBox 访问 Rails 服务器

> ID：11111219
> 
> 赞同：19
> 
> 时间：2012-06-20T00:13:27.310
> 
> 标签：ruby-on-rails, virtualbox

我目前在运行 Ubuntu 12.04 的笔记本电脑上运行 Rails 3.2.3 服务器，并希望通过同样在笔记本电脑上运行的 WinXP (SP3) 虚拟机通过 VirtualBox（4.1.16 版）访问它。尝试使用桥接网络而不是 NAT，但最终在 Firefox（版本 13）中被拒绝连接。Firefox 显示一个错误页面，其中包括以下内容：

> **无法连接。**
> 
> *Firefox 无法在 localhost:3000 建立与服务器的连接。*

有没有直接从 VirtualBox 远程访问 Rails 服务器的方法？不确定 Vagrant 是否会解决该问题，因为它旨在以相反的方式工作（从主机操作系统到虚拟机）。远程访问 Rails 服务器会很好，因为这意味着可以根据需要在单个 PC 上使用 Internet Explorer（使用版本 8）轻松完成测试。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-12-20T01:50:55.827

使用 NAT：

1.  转到 VirtualBox... 设置 -> 网络 -> 端口转发
    *   输入 3000 作为主机端口
    *   为访客端口输入 3000
2.  转到您的 VirtualBox 来宾计算机。
3.  在终端运行**ifconfig**，使用 eth0 的 inet addr。就我而言，它是 10.0.2.15
4.  当您运行 rails 服务器时，在 VirtualBox 客户机中，使用以下命令：
    **$ rails server -b 10.0.2.15**
    您想要绑定到该地址。
5.  在您的主机系统上，转到浏览器并访问`http://127.0.0.1:3000`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-05T17:53:58.483

答案是*肯定*的，有一个简单的方法可以做到这一点。我在 OS X Mountain Lion 上使用 VirtualBox，但我怀疑它对 Ubuntu 也一样。

1.  您不需要使用桥接模式，NAT 可以正常工作。
2.  只需使用主机的 IP 地址即可。例如`192.168.xxx.xxx:3000`
3.  作为替代方案，您可以`ipconfig /all`在命令提示符下在虚拟机上使用（使用 windows 搜索/查找 (windows+f) 并搜索“cmd”）查找`Default Gateway`并使用该 IP。就我而言，它是`10.0.2.2`如此`10.0.2.2:3000`有效

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T00:18:16.783

您应该输入主机的 IP 而不是 localhost。使用桥接模式，虚拟机和您的主机在本地网络中具有不同的 IP。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T15:07:46.523

如果您在开发模式下运行 rails，`webrick`默认情况下它带有访问权限仅限于 localhost。您可以使用类似`thin`in dev 的东西，它允许从另一台机器访问。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T00:20:33.560

你需要Ubuntu的本地IP。`ifconfig`在终端中获取此类型。

我已经成功使用 NAT 和 virtualbox，在你获得机器的 ip 后，使用 VM 的 3000 端口键入它，你应该能够访问它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T00:21:55.593

远程启动 Rails 服务器，然后连接到它：

```
http://virtualboxhost:3000 
```

如果它不起作用：

1.  尝试**ping virtualboxhost**
2.  在 virtualboxhost 上查看**netstat -l**打开 3000 端口

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-01T19:58:03.830

## 如果你使用 Pow...

...并且已将您的应用程序配置为`myapp`，您无法`myapp.dev`从来宾计算机访问它，但您可以使用“魔术”`xip.io`域。**只需访问`http://myapp.10.0.2.2.xip.io`，它应该可以工作！**

# android - Android：将字符串数组从值传递给.java

> ID：11111221
> 
> 赞同：1
> 
> 时间：2012-06-20T00:14:15.287
> 
> 标签：android, nullpointerexception, arrays

我正在使用此代码从我的值文件夹中提取我的字符串数组：

```
String achievementNames[] = getResources().getStringArray(R.array.achieveString);
    String achievementDescriptions[] = getResources().getStringArray(R.array.achieveDescript); 
```

但是，当我运行它时，它会在这些代码行上给我一个空指针异常。有没有更好的方法来提取字符串数组或者我的代码中有错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:30:24.547

`getResources()`除非`onCreate()`触发了回调，否则您不应调用。

```
public class StackStackActivity extends Activity 
{

    String[] myArray = getResources().getStringArray(R.array.glenns); // This returns null

    public StackStackActivity()
    {

        myArray = getResources().getStringArray(R.array.glenns); // This returns null also
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myArray = getResources().getStringArray(R.array.glenns); // Returns an array from resources
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:26:12.317

确保将`Context`对象传递到调用此方法的任何位置（因为我的猜测是`getResources()`返回`null`）。有了这个`Context`对象，你可以调用，

```
context.getResources().getStringArray(...); 
```

# ruby-on-rails - Rails 邮件调度

> ID：11111222
> 
> 赞同：1
> 
> 时间：2012-06-20T00:14:21.240
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, ruby-on-rails-3.1, actionmailer

我正在开发一个应用程序，用户可以在其中输入他们想要提醒的某些日期（生日、纪念日、假期等）。我需要设置一封自动电子邮件，在日期前 2 周、1 周和 1 天发出) 他们选择。

在 rails 3 应用程序中解决此问题的最佳方法是什么？

我有 mandrill(smtp) 和 Mailchimp 帐户..

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:18:30.330

设置一个 rake 任务，检查是否需要发送任何电子邮件，然后在任务中发送它们。然后，使用提到的 heroku 插件垃圾收集来运行“rake my_email_task”，其中 my_email_task 是您的自定义任务的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:21:35.097

您是否有机会在 Heroku 上运行它？

[Heroku 有一个用于此类任务的附加组件。](https://devcenter.heroku.com/articles/scheduler)

# pdf - 强制打开/保存内联 PDF 对话框？

> ID：11111225
> 
> 赞同：1
> 
> 时间：2012-06-20T00:14:38.760
> 
> 标签：pdf, dialog, inline

我想知道是否可以为内联 PDF 强制打开/保存对话框？

我有一个链接可以打开一个新窗口，其中包含一个内联 PDF。我可以通过更改注册表设置来提示对话框，但前提是我在 Adob​​e Reader 中更改了我的首选项（Internet > 取消选中“在浏览器中显示 PDF”）。所以基本上，如果 PDF 在阅读器中打开，我可以得到一个对话框..但这对于内联 PDF 是否可行？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:21:46.567

您需要相应地更改 http respose 标头的“Content-disposition”属性。

*   [SO中的这个答案告诉你如何在C#中做到这一点](https://stackoverflow.com/questions/8590543/force-browser-to-download-pdf-document-instead-of-opening-it)
*   [这个告诉你如何在 PHP 中做到这一点](https://stackoverflow.com/questions/1804446/prompt-user-to-download-pdf-file-instead-of-opening)
*   [Java中的这个](https://stackoverflow.com/questions/10974734/how-to-make-files-download-instead-of-opening-in-browser)

# php - 是否可以根据其键将值推入数组

> ID：11111226
> 
> 赞同：0
> 
> 时间：2012-06-20T00:14:51.447
> 
> 标签：php, arrays, key, add

是否可以根据其键将值推入数组但实际上添加到键中。

例如

```
$data = array();

    $data[0]= 12;
    $data[1]= 1;
    $data[2]= 2;
    $data[3]= 56;
    $data[4]= 78;

array_push($data, 0,23); 
```

所以输出将是

```
$data[0]= 35;   (12+23)
$data[1]= 1;
$data[2]= 2;
$data[3]= 56;
$data[4]= 78; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:17:21.727

为什么不`$data[0] += 23`呢？

或者

为什么不`$data[0] = $data[0] + 23`呢？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T00:16:44.220

`=`您可以使用`+=`将值附加到变量而不是 using ：

```
$data[0] += 23; 
```

这段代码等价于：

```
$data[0] = $data[0] + 23; 
```

你可以在这里看到输出：http: [//codepad.org/bNruNNFe](http://codepad.org/bNruNNFe)

# mysql - MySQL - 条件的正确位置在哪里？

> ID：11111227
> 
> 赞同：2
> 
> 时间：2012-06-20T00:14:54.220
> 
> 标签：mysql, sql

如何防止 sum(f)=0 插入？

```
INSERT INTO `t_1` (a,b,c)
 SELECT d,e,sum(f)
 GROUP by d,e 
```

我试图`sum(f)>0`在查询结束时添加条件 WHERE。但它以错误结束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:17:42.893

使用 GROUP by 时，您可以使用 HAVING 子句过滤掉组。

```
SELECT d,e,sum(f)  
GROUP by d,e
HAVING sum(f) > 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T00:22:21.050

试试这个：

```
INSERT INTO `t_1` (a,b,c)
SELECT   d,e,sum(f)
--FROM        -- don't forget this line  
GROUP by d,e
HAVING   sum(f) > 0 
```

`WHERE`and`HAVING`子句的区别在于`HAVING`子句评估聚合（*SUM()、COUNT()、MAX() 等*函数）条件，而`WHERE`子句不能包含聚合函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T00:18:31.073

之前`GROUP BY`，你可以在 MySQL 文档中看到[select 语法](http://dev.mysql.com/doc/refman/5.5/en/select.html)，当你前面有 'insert into' 时，它应该是相似或相同的。

（尽管您的意思可能是“拥有……”而不是“在哪里”）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T00:18:49.700

```
SELECT d,e,sum(f)  
FROM mytable
GROUP by d,e
HAVING sum(f) > 0 
```

或者...

如果该值为 0，则在引发异常的触发器中放置一些逻辑。

# visual-studio-2010 - 如果 Visual Studio 不存在 SharePoint 子网站，我可以创建它吗？

> ID：11111234
> 
> 赞同：3
> 
> 时间：2012-06-20T00:16:04.897
> 
> 标签：visual-studio-2010, visual-studio, sharepoint, sharepoint-2010

我正在尝试为 SharePoint 创建一个应用程序。

我希望这个应用程序作为根网站集下的子网站存在。

如果我能把它交给客户，让他们部署 WSP，让包创建一个子站点，然后将我的所有页面和 webpart 部署到这个子站点，那就太好了。

我已经在谷歌上搜索了一段时间，但似乎无法得到答案。

****回答****

SPWeb 的实例有一个允许您创建子站点的 .add() 方法。

我将创建一个功能，其唯一目的是检查 RootSite 级别是否存在“/whatever”子站点，如果不存在，则在 FeatureActivated 事件期间创建它。

然后，我将使我的其他功能依赖于此功能，以确保该站点在部署到它之前存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:17:29.163

一个子站点 = SPWeb... 所以只需通过在解决方案的功能接收器中创建一个新的 SPWeb 以编程方式在站点集中创建一个？或者您甚至可以使用 powershell 编写脚本...

# c# - 在同一个进程中加载 的两个 .NET CLR 如何相互通信？

> ID：11111235
> 
> 赞同：3
> 
> 时间：2012-06-20T00:16:05.160
> 
> 标签：c#, clr, dll-injection, clr4.0, clr-hosting

既然可以让两个 CLR 在同一个机器上运行，那么它们如何相互“对话”呢？

假设 GUI 在 .NET 2.0 CLR 下运行，并且有一个脚本在 .NET 4.0 CLR 上运行，例如，有没有办法从 4.0 环境修改基于 2.0 的 GUI？

当我使用这种技术将 .NET C# REPL 环境注入另一个 .net 进程时，我遇到了这个确切的问题：[视频：将 C# DLL 注入托管 (C#) 和非托管 (C++) 进程](http://diniscruz.blogspot.co.uk/2012/06/video-injecting-c-dlls-into-managed-c.html)

* * *

注意：我在 Reddit 上问过一个类似的[问题，该版本包含大量参考资料](http://www.reddit.com/r/dotnet/comments/vawqp/how_can_two_net_clr_loaded_in_the_same_process/)，如果您对并行执行和 CLR 托管主题感兴趣，这将很有用

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:21:37.633

通常，两个单独的 CLR 的进程内托管仅在 COM 世界中完成。当您将 COM 用于可扩展性等时，会加载适当的运行时。在这种情况下，CLR 对象可以通过 COM 相互“对话”，因为 COM 是关于互操作性的。

纯托管应用程序将始终在 4.0 CLR 中运行 - 因此加载 2.0 程序集的 4.0 应用程序最终将在 CLR 4 中执行 2.0 程序集。

有关详细信息，请参阅[CLR Inside Out：In-Process Side by Side](http://msdn.microsoft.com/en-us/magazine/ee819091.aspx)文章，该文章对此进行了详细描述。

至于你的具体例子：

> 假设 GUI 在 .NET 2.0 CLR 下运行，并且有一个脚本在 .NET 4.0 CLR 上运行，例如，有没有办法从 4.0 环境修改基于 2.0 的 GUI？

如果您尝试*直接*加载 4.0 程序集，它将失败。您必须使用 COM 互操作来加载它，在这种情况下，所有通信都通过 COM 进行。4.0 GUI 应用程序*可以*加载 2.0“脚本”——但它是在 4.0 运行时加载的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:21:35.183

主要有两种方式，一种是松耦合或紧耦合。

在松散耦合的系统中，您将使用某种形式的绑定（JSON、XML、SOAP）来来回传递数据。该系统的好处是您可以在将来使用您可能没有想到的其他程序与应用程序进行交互。

其他紧密耦合的方法可以使用插件，或者使用 Windows 消息泵来来回发送消息。还可以查看[Windows 通信框架](http://msdn.microsoft.com/en-us/netframework/aa663324.aspx)

# android - android中的本机消息传递系统

> ID：11111238
> 
> 赞同：2
> 
> 时间：2012-06-20T00:16:46.567
> 
> 标签：android, sms

我只是 android 编码的初学者和学生研究员。我正在考虑编写一个可以在手机中访问本机消息传递应用程序的应用程序。是否可以访问本机消息传递应用程序（访问意味着我可以从本机消息传递应用程序发送消息并阅读传入消息）？我怎样才能阅读或参考有关该主题的内容？谢谢。

# android - 编辑完成时缩小文本视图

> ID：11111239
> 
> 赞同：0
> 
> 时间：2012-06-20T00:17:00.850
> 
> 标签：android, textview

我有一个可以变得非常大的多行文本视图。当用户实际编辑它时，我想根据需要扩展它——但是当它不再被编辑时，它会再次折叠成一行。

示例：在编辑过程中，文本视图可能有很多行，看起来像这样

多行的很多很长的音符

当焦点丢失时，我想将视图收缩回单行，这样看起来像：很多真的很长......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:28:15.690

类似这样的问题已经有好几个了，请看这里：

[TextView 像在 Android Market 中一样展开动画](https://stackoverflow.com/questions/5927977/textview-expand-animation-like-in-android-market)

[Android：展开/折叠动画](https://stackoverflow.com/questions/4946295/android-expand-collapse-animation)

[Android EditText 不会占用剩余空间](https://stackoverflow.com/questions/2830669/android-edittext-wont-take-up-remaining-space)

[如何缩放/调整文本以适合 TextView？](https://stackoverflow.com/questions/2596452/how-to-scale-resize-text-to-fit-a-textview)

其中一些链接包括文本视图的滑动动画。我希望这有帮助！

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:41:02.533

尝试将其包裹在`ScrollView`?

# php - foreach 遍历数组并使用 php 获取值

> ID：11111240
> 
> 赞同：0
> 
> 时间：2012-06-20T00:17:01.990
> 
> 标签：php, arrays

使用 jquery 的 .post 我发送我的 php 代码一个对象，`var_dump`我得到这个结果：

```
array(6) {
  [0]=>
  array(1) {
    ["00176 "]=>
    string(1) "2"
  }
  [1]=>
  array(1) {
    ["00171 "]=>
    string(1) "5"
  }
  [2]=>
  array(1) {
    ["00173 "]=>
    string(1) "1"
  }
  [3]=>
  array(1) {
    ["00177 "]=>
    string(1) "4"
  }
  [4]=>
  array(1) {
    ["00183 "]=>
    string(1) "2"
  }
  [5]=>
  array(1) {
    ["00149 "]=>
    string(1) "1"
  }
} 
```

我怎样才能从这个数组中获取值？我想

```
foreach{
echo $key . '__ ' . $value //would give for [0]: '00176 __ 2'
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:24:50.290

如果您正在为数组的嵌套结构而苦苦挣扎，您可以先将其展平，然后执行以下操作`foreach`：

```
// flatten the array:
$array = call_user_func_array('array_merge', $array);

// standard foreach:
foreach ($array as $key => $value) {
   echo $key . '__ ' . $value;
} 
```

另一种选择是使用[`each`](http://php.net/each)：

```
foreach ($array as $entry) {
    list($key, $value) = each($entry);
    echo $key . '__ ' . $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:45:34.127

您正在通过 POST 接收一个多维数组，它具有以下结构：

```
$_POST[0][00176] = '2'
$_POST[1][00171] = '5'
$_POST[2][00173] = '1'
$_POST[3][00177] = '4'
$_POST[4][00183] = '2'
$_POST[5][00149] = '1' 
```

所以我认为更简单的阅读方法是在另一个 foreach 中做一个 foreach，如下所示：

```
foreach ($_POST as $key1 => $value1)
{
    foreach ($value1 as $key2 => $value2)
    {
        echo $key2 . '__' . $value2;
    }

} 
```

[在 PHP 文档中有一个使用foreach](http://www.php.net/manual/pt_BR/control-structures.foreach.php)读取多维数组的示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:21:10.417

由于子数组的键值发生变化，您可能需要外循环和内循环。我希望将您的帖子数据重组得更干净一些。

```
foreach($array as $item)
{
  if(is_array($item))
    foreach($item as $key => $value)
    {
      echo $key . '__ ' . $value;
    }
} 
```

# c# - NAudio - 无法设置线路控制静音值

> ID：11111242
> 
> 赞同：0
> 
> 时间：2012-06-20T00:17:23.690
> 
> 标签：c#, naudio

我正在使用 NAudio 完成一些任务：

1.  找到“立体声混音”源行
2.  通过启用任何存在的线路控制来取消“立体声混音”源线路的静音
3.  通过禁用存在的任何线路控件，使同一输入设备上的所有其他源线路静音

我编写的程序可以正常执行任务 1，但任务 2 和 3 失败。

具体来说，这段代码会导致 ArgumentException 被抛出：

```
if( control.IsBoolean ) {

    BooleanMixerControl boolControl = (BooleanMixerControl)control;
    boolControl.Value = isMuted;
    set = true;

    if( boolControl.Value != isMuted )
        throw new ArgumentException("Could not set line muted value.");
} 
```

这是我用来执行这些任务的静态类。它依赖于当前版本的 NAudio：

```
public static class RecordSourceManager {

    public static Boolean GetMicrophoneMuted(String deviceName) {

        Mixer mixer = GetMixer( deviceName );
        if( mixer == null ) throw new ArgumentException("Specified device \"" + deviceName + "\" does not exist.");

        foreach(MixerLine line in mixer.Destinations) {

            foreach(MixerLine sourceLine in line.Sources) {

                if( sourceLine.ComponentType == MixerLineComponentType.SourceMicrophone ) {

                    return GetLineMuted( sourceLine );
                }
            }
        }

        throw new ArgumentException("Specified device \"" + deviceName + "\" does not contain a microphone device.");
    }

    public static void SetMicrophoneExclusive(String deviceName, Boolean enableMicrophoneExclusivity) {

        Mixer mixer = GetMixer( deviceName );
        if( mixer == null ) throw new ArgumentException("Specified device \"" + deviceName + "\" does not exist.");

        foreach(MixerLine line in mixer.Destinations) {

            foreach(MixerLine sourceLine in line.Sources) {

                if( sourceLine.ComponentType == MixerLineComponentType.SourceMicrophone ) {

                    SetLineMuted( sourceLine, !enableMicrophoneExclusivity );

                } else {

                    SetLineMuted( sourceLine, enableMicrophoneExclusivity );
                }
            }
        }
    }

    public static Boolean GetStereoMixMuted(String deviceName) {

        Mixer mixer = GetMixer( deviceName );
        if( mixer == null ) throw new ArgumentException("Specified device \"" + deviceName + "\" does not exist.");

        foreach(MixerLine line in mixer.Destinations) {

            foreach(MixerLine sourceLine in line.Sources) {

                if( IsStereoMix( sourceLine.Name ) ) {

                    return GetLineMuted( sourceLine );
                }
            }
        }

        throw new ArgumentException("Specified device \"" + deviceName + "\" does not contain a microphone device.");
    }

    public static void SetStereoMixExclusive(String deviceName, Boolean enableStereoMixExclusivity) {

        Mixer mixer = GetMixer( deviceName );
        if( mixer == null ) throw new ArgumentException("Specified device \"" + deviceName + "\" does not exist.");

        MixerLine stereoMix;
        MixerLine parentLine;

        GetStereoMixLine( mixer, out stereoMix, out parentLine );
        if( stereoMix == null ) throw new ArgumentException("Specified device \"" + deviceName + "\" does not contain a Stereo Mix line.");

        foreach(MixerLine source in parentLine.Sources) {

            Boolean ok;

            if( IsStereoMix( source.Name ) ) {

                ok = SetLineMuted( source, !enableStereoMixExclusivity );

            } else {

                ok = SetLineMuted( source, enableStereoMixExclusivity );
            }

            if( !ok ) throw new ArgumentException("Could not set line muted state.");
        }
    }

    private static Mixer GetMixer(String deviceName) {

        foreach(Mixer mixer in Mixer.Mixers) {

            //wtr.WriteLine("Mixer: {0}, Mfg: {1}", mixer.Name, mixer.Manufacturer );
            if( String.Equals( mixer.Name, deviceName, StringComparison.OrdinalIgnoreCase ) ) return mixer;
        }

        return null;
    }

    private static void GetStereoMixLine(Mixer device, out MixerLine stereoMix, out MixerLine parentLine) {

        foreach(MixerLine line in device.Destinations) {

            foreach(MixerLine source in line.Sources) {

                if( IsStereoMix( source.Name ) ) {

                    stereoMix  = source;
                    parentLine = line;
                    return;
                }
            }

        }

        stereoMix  = null;
        parentLine = null;
    }

    private static Boolean IsStereoMix(String sourceName) {

        String[] names = new String[] {
            "Stereo Mix",
            "What U Hear",
            "What \"U\" Hear",
            "What-U-Hear",
            "Playback Redirect",
            "Wave Out",
            "Wave Out Mix",
            "Wave-Out Mix"
        };

        foreach(String name in names) {

            if( String.Equals( sourceName, name, StringComparison.OrdinalIgnoreCase ) ) return true;
        }

        return false;
    }

    private static Boolean SetLineMuted(MixerLine line, Boolean isMuted) {

        Boolean set = false;

        foreach(MixerControl control in line.Controls) {

            // Can't test if control's name == "Mute" because sometimes it's "Mic Volume" (even though it's boolean). Same goes for GetLineMuted.
            if( control.IsBoolean ) {

                BooleanMixerControl boolControl = (BooleanMixerControl)control;
                boolControl.Value = isMuted;
                set = true;

                if( boolControl.Value != isMuted )
                    throw new ArgumentException("Could not set line muted value.");
            }

        }

        return set;
    }

    private static Boolean GetLineMuted(MixerLine line) {

        foreach(MixerControl control in line.Controls) {

            if( control.IsBoolean ) {

                BooleanMixerControl boolControl = (BooleanMixerControl)control;
                return boolControl.Value;
            }
        }

        return false;
    }
} 
```

我想我会看看 NAudio 的 BooleanMixerControl 类，我看到了这个：

```
public bool Value {
    get {
        base.GetControlDetails();
        return (this.boolDetails.fValue == 1);
    }
    set {
        MmException.Try(MixerInterop.mixerSetControlDetails(base.mixerHandle, ref this.mixerControlDetails, base.mixerHandleType), "mixerSetControlDetails");
    }
} 
```

有趣的是，属性设置器的参数似乎`value`被忽略了，因此，mixerSetControlDetails 调用不会做任何有用的工作。这是 NAudio 中的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T11:09:26.633

我也有这个问题。除了 Mark Heaths 的回复之外，我还调整了 BooleanMixerControl 的属性 Value 以检索正确的值：

```
/// <summary>
/// The current value of the control
/// </summary>
public bool Value 
{
    get 
    {
        GetControlDetails(); // make sure we have the latest value
        return (boolDetails.fValue == 1);
    }
    set
    {
        int structSize = Marshal.SizeOf(boolDetails);

        mixerControlDetails.paDetails = Marshal.AllocHGlobal(structSize * nChannels);
        for (int channel = 0; channel < nChannels; channel++)
        {
            boolDetails.fValue = value ? 1 : 0;
            long pointer = mixerControlDetails.paDetails.ToInt64() + (structSize * channel);
            Marshal.StructureToPtr(boolDetails, (IntPtr)pointer, false);
        }
        MmException.Try(MixerInterop.mixerSetControlDetails(mixerHandle, ref mixerControlDetails, MixerFlags.Value | mixerHandleType), "mixerSetControlDetails");
        Marshal.FreeHGlobal(mixerControlDetails.paDetails);
    } 
```

这对我来说似乎很好用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T09:55:56.340

此功能未实现，可能应替换为`NotImplementedException`. 这是我在 2002 年为 NAudio 编写的第一个代码之一，当时我刚刚开始学习 PInvoke 和 pinning，如果您查看 NAudio 源代码，您会看到使用该值的代码被注释掉了，大概是因为它当我最初尝试它时导致某种内存异常。

```
/// <summary>
/// The current value of the control
/// </summary>
public bool Value 
{
    get 
    {
        GetControlDetails(); // make sure we have the latest value
        return (boolDetails.fValue == 1);
    }
    set 
    {
        //GetControlDetails();
        //MixerInterop.MIXERCONTROLDETAILS_BOOLEAN boolDetails = (MixerInterop.MIXERCONTROLDETAILS_BOOLEAN) Marshal.PtrToStructure(mixerControlDetails.paDetails,typeof(MixerInterop.MIXERCONTROLDETAILS_BOOLEAN));
        //boolDetails.fValue = (value) ? 1 : 0;
        // TODO: pin the memory
        MmException.Try(MixerInterop.mixerSetControlDetails(mixerHandle, ref mixerControlDetails, MixerFlags.Value | mixerHandleType), "mixerSetControlDetails");
    }
} 
```

它从未被修复的原因是我自己从来不需要使用它，但如果有人想提供修复，我很乐意将它包含在 NAudio 中。

# python - 数据加载infile_python和Qfiledialog

> ID：11111249
> 
> 赞同：0
> 
> 时间：2012-06-20T00:17:45.580
> 
> 标签：python, excel, load, qfiledialog

您好，我想使用“加载数据 Infile”将数据从 excel 文件或 .txt 导入数据库，但我的文件的路径包含“\”，Mysql 不接受女巫

要清楚这是我的 Python 代码：

```
def parcourir(self):
        fi=QFileDialog.getOpenFileName(self)
        self.Pathfile.setText(fi)

def chargeFile(self):        
        try:
            fiche=open(self.Pathfile.text(),'r')
        except IOError :
            QtGui.QMessageBox.warning(self,"erreur","fichier nontrouvé")
        connection = MySQLdb.connect (host = "localhost", user = "root", passwd = "", db = "lexique")
        cursor = connection.cursor()
        query="LOAD DATA INFILE 'self.Pathfile.text()' INTO TABLE tbl_lexique FIELDS TERMINATED BY ',' ENCLOSED BY '\"'LINES TERMINATED BY '\n'"
        cursor.execute( query )
        connection.commit()
        ................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:11:40.050

您可能应该考虑使用参数化查询：

```
query="""
    LOAD DATA INFILE '%s' INTO TABLE tbl_lexique 
    FIELDS TERMINATED BY '%s' 
    ENCLOSED BY '%s' 
    LINES TERMINATED BY '%s'
    """

# you can also try converting your windows
# path to a posix path
path = self.Pathfile.text().replace('\\', '/')
cursor.execute(query, (path, ',', '"', '\n')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T22:55:24.033

好吧，它现在终于可以工作了:)我只是提出了这个查询：

```
query = "LOAD DATA INFILE '%s' " % self.Pathfile.text()
query += " INTO TABLE tbl_lexique FIELDS TERMINATED BY ',' ENCLOSED BY '\\\"' LINES TERMINATED BY '\\n'" 
cursor.execute( query ) 
```

# c# - 如何处理在 .NET 中使用多种货币的国家/地区？

> ID：11111254
> 
> 赞同：8
> 
> 时间：2012-06-20T00:18:27.920
> 
> 标签：c#, asp.net, .net-3.5, internationalization, currency

我有一个应用程序，我想使用该国家的本币格式来格式化货币。问题是，某些国家使用多种货币，但 .NET 只为每个国家分配一种货币。例如，**罗马尼亚**使用**EUR**和**RON**。当我从 .NET 获得货币信息时：

```
var cultureInfo = new CultureInfo("ro-RO");
Console.WriteLine("cultureInfo.NumberFormat.CurrencySymbol); 
```

输出为`leu`，即**RON**货币类型。

我如何在.NET 中为这种情况获得欧元？我有 3 个字母的 ISO 货币代码 ( **EUR** ) 和国家语言 ( **ro-RO** )，但我不知道如何使用此信息来获取格式正确的欧元货币字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:31:14.780

您可以将货币符号替换为自定义符号（在本例中为 leu 为欧元）

```
NumberFormatInfo LocalFormat = (NumberFormatInfo)NumberFormatInfo.CurrentInfo.Clone();
LocalFormat.CurrencySymbol = "€";

decimal money = 100;
Console.WriteLine(money.ToString("c", LocalFormat)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:39:31.783

我想我会给你一个静态助手类的答案，如下所示：

```
static class CurrencySymbolHelper
{
    public static string GetCurrencySymbol(CultureInfo cultureInfo, bool getAlternate)
    {
        if (cultureInfo.Name == "ro-RO" && getAlternate)
                return "EUR";

        return cultureInfo.NumberFormat.CurrencySymbol;
    }
} 
```

您可以将所需的任何变量传递给该方法，并在其中执行您希望的任何操作。调用如下：

```
var cultureInfo = new CultureInfo("ro-RO");
Console.WriteLine(CurrencySymbolHelper.GetCurrencySymbol(cultureInfo,false)); 
```

问题是，当您想要获取货币信息而不是`cultureInfo.NumberFormat.CurrencySymbol`

# javascript - JS代码运行很慢

> ID：11111255
> 
> 赞同：0
> 
> 时间：2012-06-20T00:18:30.260
> 
> 标签：javascript, jquery, html, css

我是 JS 新手，所以在这里放轻松。但我写了一个简单的幻灯片，它似乎运行得很慢。下面的代码大约需要 2-4 秒才能在我自己的机器上本地加载。想知道是什么导致了延迟。告诉我，谢谢！

```
function slideshow(){
    $("#1").animate({top: "50px",}, 500).delay(2000);
    $("#1").animate({top: "400px",}, 500);
    $("#2").animate({top: "50px",}, 500).delay(2000);
    $("#2").animate({top: "400px",}, 500);
    $("#3").animate({top: "50px",}, 500).delay(2000);
    $("#3").animate({top: "400px",}, 500);
    $("#4").animate({top: "50px",}, 500).delay(2000);
    $("#4").animate({top: "400px",}, 500);
    $("#5").animate({top: "50px",}, 500).delay(2000);
    $("#5").animate({top: "400px",}, 500);
    slideshow();
} 
```

每个 ID 代表一个不同的图像。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:44:50.117

您的代码的一个*大*问题是，因为其他答案似乎还没有谈到它，所以最后一行`slideshow()`调用本身是递归的，这将导致堆栈溢出。不要这样做：

```
function slideshow() {
   // animate code
   slideshow();
} 
```

相反，如果您希望它重复运行，请在*x*毫秒后将`setTimeout()`函数的另一个执行排队：

 *```
function slideshow() {
   // animate code
   setTimeout(slideshow, 3500);
} 
```

按照你的方式，没有一个功能真正完成。使用`setTimeout()`，每次调用都会`slideshow()`完成，然后在指定的延迟后运行一个单独的调用。我会让延迟足够大，以便在当前动画完成后发生下一次调用，否则你将排队越来越多的动画比它们运行的​​速度更快。

**更新：** jQuery 为每个元素维护单独的动画队列，这意味着您的五个元素上的动画将同时运行。其他一些答案已经提供了一次按顺序运行动画的方法，但这是我的做法：

```
$(window).on("load",function() {    
    // cache a jQuery object containing the elements to animate
    // (note you don't need their ids if you use their class)
    var $imgs = $('img.slideshow-image'),
        i = 0;

    function slideShow() {
       // start animation for "current" img
       $imgs.eq(i).show(1)
                  .animate({top: "50px",}, 500)
                  .delay(2000)
                  .animate({top: "400px",}, 500)
                  .hide(1, function() {
                     i = (i+1) % $imgs.length;
                     setTimeout(slideShow, 500);
                  });
    }    
    slideShow();    
}); 
```

工作演示：http: [//jsfiddle.net/bARwb/](http://jsfiddle.net/bARwb/)

*   我已经将代码包装在负载处理程序中，以消除对内联`onload=`属性的需要，并作为将代码保持在全局范围之外的一种方便方法（如果您这样做，请不要忘记`onload="slideShow()"`从您的 body 标签中删除）。
*   我已经添加`.show()`并`.hide()`调用（*有*一个持续时间，以便它们加入动画队列），以便 img 元素将`display:none`在动画之间，因为否则你的`position:relative`风格除了第一个之外你什么都看不到（但更改为`position:absolute`会阻止他们得到由他们的父母裁剪`overflow:hidden`）。
*   当一个元素的动画完成时，回调从`.hide()`增量`i`指向下一个元素的索引（但检查它何时超过最后一个元素），然后用于`setTimeout()`为下一个元素排队动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T00:32:58.807

你有一些重复，还有一些不正确的假设。

在 jQuery 中调用`.animate`时，可以指定动画完成时将调用的回调。这是放置“下一步”的地方。

所以在这个例子中：

*   动画图像
*   完成后，等待 2 秒
*   2 秒后，为图像设置动画
*   完成后，使用下一张图片调用该函数

这是它的样子

```
var images = ['#1', '#2', '#3', '#4', '#5'];

function slideshow(index){
    if (index >= images.length) {
        index = 0;
    }
    var image = images[index];
    $(image).animate({top: "50px",}, 500, function () {
        window.setTimeout(function () {
            $(image).animate({top: "400px",}, 500, function () {
                slideshow(index + 1);
            });
        }, 2000);
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:26:39.990

除了代码中的故意延迟之外，我没有看到任何会导致加载缓慢的内容。它可能是页面的其余部分。在 JavaScript 幻灯片功能执行之前，我会检查您的图像有多大以及可能正在下载的任何其他文件。

附带说明一下，您从幻灯片功能中调用幻灯片很奇怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:38:38.677

你可以尝试这样的事情：

```
var intervalValue = setInterval( "slideshow()", 2000 );
var slideshow_imageindex = 1;

function slideshow()
{
  //check if imageindex is greater than the number of images available (5 is an example)
  if (slideshow_imageindex > 5)
  {
    slideshow_imageindex = 1;
  }
  //hide image below, change image src, then move image so that it is visible again
  $("#1").animate({top: "400px",}, 500).attr('src','img/Slideshow-Audio-Trsfr'+slideshow_imageindex+'.png').animate({top: "50px",}, 500);
  //increase image index
  slideshow_imageindex++;
} 
```

您只需要一个 img（我保留了您的“id=#1”img），并且每 2 秒图像被隐藏，它会更改并再次显示。只有你必须做的事情：命名图像，以便只有数字发生变化，例如：

```
img/Slideshow-Audio-Trsfr1.png
img/Slideshow-Audio-Trsfr2.png
img/Slideshow-Audio-Trsfr3.png
img/Slideshow-Audio-Trsfr4.png
img/Slideshow-Audio-Trsfr5.png 
```

然后在函数内的“if”中使用图像数量。在意大利已经很晚了，希望我没有忘记任何事情:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T00:21:32.313

我的猜测是您将帧设置为 2 秒（2000 年）。尝试像 50 这样更快的速度，看看你看到了什么。我不确定这是帧延迟还是 500，但如果其中任何一个表示您在帧更改之间等待多长时间，那就太长了。*

# c++ - 在 boost::variant 中调用类型通用的方法

> ID：11111260
> 
> 赞同：7
> 
> 时间：2012-06-20T00:19:14.413
> 
> 标签：c++, generic-programming, visitor-pattern, boost-variant

如果我的所有类型都`boost::variant`支持相同的方法，有没有办法通用地调用它（即不为 的每个方法单独调用它`static_visitor`）？

我试图让这样的事情起作用：

```
class A
{
    void boo() {}
};

class B
{
    void boo() {}
};

class C
{
    void boo() {}
};

typedef boost::variant<A, B, C> X;

void foo(X& d)
{
    x.boo();
} 
```

但它无法编译说`'boo' : is not a member of 'boost::variant<T0_,T1,T2>'`。

目前，我有一些类都继承自一个接口，以便可以多态地使用它们的单个共享方法。我还希望能够通过访问者使用这些类，因为所有其他方法对于每个具体类都是唯一的。我希望`boost::variant`可能是在这里实现我自己的访问者机制的更好选择。是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:59:17.030

没有直接的方法，但您可以使用模板使 static_visitor 非常简洁。

从 boost 文档修改：

```
struct boo_generic : public boost::static_visitor<>
{
    template <typename T>
    void operator()( T & operand ) const
    {
        operand.boo();
    }
}; 
```

现在你可以这样做：

```
boost::apply_visitor( boo_generic(), v ); 
```

事实上，您可以将其概括为获取基类的函数指针：

```
struct fn_generic : public boost::static_visitor<>
{
   fn_generic( void (IBase::fn)() ) : fn_(fn) {}
   template<T> void operator() ( T & op ) const { op.*fn(); }
} 
```

然后你可以这样做：

```
boost::apply_visitor( boo_generic( IBase::boo ), v ); 
```

或者类似的东西——我可能弄错了我的函数指针语法，但希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T16:32:21.950

```
class Base {
    virtual void boo() = 0;
};

class A : Base
{
    void boo() override {}
};

class B : Base
{
    void boo() override {}
};

class C : Base
{
    void boo() override {}
};

typedef boost::variant<A, B, C> X;

void foo(X& x)
{
    boost::relaxed_get<Base>(x).boo();
} 
```

在上面的示例中不起作用`boost::relaxed_get`？注意：这需要实时类型信息 (RTTI) 支持。

# ruby-on-rails - 如何绕过使用设计和更新的登录

> ID：11111263
> 
> 赞同：4
> 
> 时间：2012-06-20T00:19:29.933
> 
> 标签：ruby-on-rails, authentication, devise, passwords

标题有点混乱，我来解释一下。我有以下控制器方法：

```
 def password_update
      @op = params[:old_password]
      @np = params[:new_password]
      @cp = params[:confirm_password]

      if @np == @cp
        if !@np.empty?
          if current_user.update_with_password(:current_password=> @op)
              current_user.password = @np
              if current_user.save
                flash[:notice] = "Password Successfully Changed"
                redirect_to settings_path and return 
              end 
          else
            flash[:notice] = "Incorrent Current Password"
            redirect_to change_password_path and return 
          end
        else
          flash[:notice] = "New Password Cannot Be Blank"
        end   
      elsel
        flash[:notice] = "Incorrect Password Confirmation"
      end
      redirect_to change_password_path
    end 
```

其他一切都很好，这意味着我有工作路线和视图将您带到此方法并在提交表单时调用它。但是，当我尝试正确更改密码时，就会出现错误。顺便说一句，我正在使用设计。当我单击提交时，我退出并显示“您必须登录才能完成此操作”。所以我尝试登录，我当前的密码不起作用。它更改了我的密码（更改为我在表格中设置的密码）！它告诉我必须登录（当我尝试更改密码时就是这样），但它仍然会更改它。

欢迎任何帮助，但是，我是新手，非常感谢详细的解释。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T02:15:03.617

我相信 Devise wiki 中的这个页面回答了你的问题：[https ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password](https://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-edit-their-password)

这段代码特别

```
 if @user.update_attributes(params[:user])
   # Sign in the user by passing validation in case his password changed
   sign_in @user, :bypass => true
   redirect_to root_path
 else
   render "edit"
 end 
```

并且绕过选项似乎也很好命名。希望这可以帮助。干杯

# c++ - 从非常量向量返回 const 向量

> ID：11111271
> 
> 赞同：0
> 
> 时间：2012-06-20T00:20:47.177
> 
> 标签：c++, vector, constants, shared-ptr

我正在为数据库类编写以下代码以从文件中读取数据：

```
typedef std::vector<char> CharVec;
typedef std::vector<const char> ConstCharVec;
typedef std::shared_ptr<CharVec> CharVecPtr;
typedef std::shared_ptr<ConstCharVec> ConstCharVecPtr;

const ConstCharVecPtr DB::readData(unsigned int amount,unsigned int offset,unsigned int flag)
{
    CharVec data;
    //Add stuff to data from the file...
    //etc...
    return ConstCharVecPtr(new ConstCharVec(data.begin(),data.end()));
} 
```

编译期间返回语句失败：

```
include\c++\bits\allocator.h|89|  required from 'class std::allocator<const char>'|
include\c++\bits\alloc_traits.h|86|  required from 'struct std::allocator_traits<std::allocator<const char> >'|
include\c++\ext\alloc_traits.h|90|  required from 'struct __gnu_cxx::__alloc_traits<std::allocator<const char> >'|
include\c++\bits\stl_vector.h|76|  required from 'struct std::_Vector_base<const char, std::allocator<const char> >'|
include\c++\bits\stl_vector.h|208|  required from 'class std::vector<const char>'|
C:\Users\Brian\work\cr\code\DB.cpp|86|  required from here| 
```

我想保持返回值的常量，因为其他函数期望数据库中的原始数据是常量，但我看不到将非常量数据转换为常量。char 向量用作返回，以便原始数据的用户可以轻松地将其输入需要 const char* 指针的函数。有没有办法完成这种 const 转换，或者我最好对这种数据使用另一种返回类型？

# vb.net - VB 无法获得正确的函数来处理字符串

> ID：11111276
> 
> 赞同：2
> 
> 时间：2012-06-20T00:21:33.923
> 
> 标签：vb.net, visual-studio-2010, vba

基本上，我正在尝试进行一些字符串操作来编辑目录。我找到了一些代码来尝试编辑目录，但是当我使用它时，它不会将“正确”识别为函数，而只会将其识别为正确的属性，从而产生错误。

我想知道是否有一些我没有导入的东西，或者“正确”是否是一个在 VB6 中使用但被替换的过时函数。

我的代码如下：

```
Dim Foo As String
Dim Bar As String
Bar = 'some form of directory input i.e. my.computer.currentdirectory
Foo = right(Bar, (Len(Bar) - InStrRev(Bar, "/")))
MsgBox(Foo) 
```

理想情况下，我需要一种更好的目录操作方法或一种使“正确”功能正常工作的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T00:25:53.903

> 但是当我使用它时，它不会将“正确”识别为函数，而只会将其识别为正确的属性，从而产生错误。

如果你有一个“正确”的属性，你可以完全限定函数：

```
Foo = Microsoft.VisualBasic.Right(Bar, (Len(Bar) - InStrRev(Bar, "/"))) 
```

有关详细信息，请参阅[Right Function](http://msdn.microsoft.com/en-US/library/dxs6hz0a%28v=vs.80%29)的文档。

请注意，对于目录解析，您可以通过命名空间更干净地处理它`System.IO`。特别是，您可以构造一个[DirectoryInfo](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)并通过[Parent](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.parent.aspx)属性获取父文件夹。

您还可以使用[Path.GetDirectoryName](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)来处理字符串。在您的情况下，如果您`Bar`设置为“C:\Some\Path\To\A\File.txt”并调用`Path.GetDirectoryName(Bar)`，它将返回“C:\Some\Path\To\A”。如果你调用它，你会得到 ""C:\Some\Path\To" 等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T00:39:09.457

查找 System.IO.Path - 有很多有用的工具。您将特别需要 GetDirectoryName 和 GetFileName。它们适用于目录和文件名。

```
Bar = "C:\Dir1\Dir2\Dir3"
Foo = IO.Path.GetFileName(Bar)  'now = Dir3
Foo = IO.Path.GetDirectoryName(Bar)  'now = C:\Dir1\Dir2 
```

[http://msdn.microsoft.com/en-us/library/system.io.path.getfilename](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename)
[http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname)

# asp.net - 我如何通过 jquery ajax 调用将参数传递给控制器 中的方法

> ID：11111279
> 
> 赞同：0
> 
> 时间：2012-06-20T00:21:35.200
> 
> 标签：asp.net, jquery, asp.net-web-api

我正在研究 asp.net web api。我正在尝试使用 jquery ajax 调用来调用控制器（安全）。我的控制器中有一个带有 3 个参数的方法，例如，

```
public WebRequest GetRequest(string method,string type,string endpoint)
        {
        RSACryptoServiceProvider rsa=new RSACryptoServiceProvider();
        var request = WebRequest.Create(endpoint);
        request.Method = method;
        request.ContentType = type;
        UnicodeEncoding enc = new UnicodeEncoding();
        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };
        request.Headers.Add("Authorization-Token", RSAClass.StringConverter(RSAClass.RSAEncrypt(enc.GetBytes("User1"), rsa.ExportParameters(false), false)));
        return request;
} 
```

我正在做一个 jquery ajax 调用，比如，

```
CreateRequest("GET", "application/json;charset=utf-8", "http://localhost:49847/api/Security", function (request) { alert("Hello"); });  

function CreateRequest(method, type, endpoint, callback) {
        $.ajax({
            url: "api/Security",
            data: { method: method, type: type, endpoint: endpoint }, 
            type: "GET",
            contentType: "application/json;charset=utf-8",
            statusCode: {
                200: function (request) {
                    callback(request);
                }
            }
        }); 
```

而且我还有 customfilterattribute 类来验证授权令牌，例如，

```
public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
        {
            string token;
            try
            {
                token = actionContext.Request.Headers.GetValues("Authorization-Token").First();
            }
            catch
            {
                actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.BadRequest) { Content = new StringContent("missing authorization token") };
                return;
            }
            try
            {
                RSACryptoServiceProvider RSA = new RSACryptoServiceProvider();
                UnicodeEncoding enc = new UnicodeEncoding();
                AuthUsersRepository.GetAllUsers().First(x => x.Name ==enc.GetString(RSAClass.RSADecrypt(RSAClass.ByteConverter(token), RSA.ExportParameters(true), false)));
                base.OnActionExecuting(actionContext);
            }
            catch
            {
                actionContext.Response = new HttpResponseMessage(System.Net.HttpStatusCode.Forbidden) { Content = new StringContent("Unauthorized User") };
                return;
            }
        } 
```

当我提出第一个请求时，它要求我提供授权令牌。并且还在 3 个参数（方法、类型、端点）中显示空值。引导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:25:54.393

你需要这个：

```
data: { 'method': method, 'type': type, 'endpoint': endpoint }, 
```

这会传递请求中的值，尽管在您的示例中，如果端点的值是控制器/操作的 URL，我不确定为什么需要将端点作为参数传递给方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:06:51.283

你要么需要

1）更改您的 GET 以将数据发布为 JSON。GET 不能有内容。2) 将数据作为查询字符串参数传递

如果我要自己做，我会选择案例2：

```
http://localhost:49847/api/Security?method=someMethod&type=someType&endpoint=someendpoint 
```

由于这与安全相关，**因此它必须是 HTTPS**。

但我*不会自己做*，而是使用安全专家开发的：“Thinktecture.IdentityModel.40”

[https://github.com/thinktecture/Thinktecture.IdentityModel.40](https://github.com/thinktecture/Thinktecture.IdentityModel.40)

# php - node-mongodb-native 的插入性能

> ID：11111281
> 
> 赞同：3
> 
> 时间：2012-06-20T00:21:44.203
> 
> 标签：php, performance, node.js, mongodb

我正在使用 MongoDB 测试 Node.js 的性能。我知道这些中的每一个都很好，彼此独立，但我正在尝试一些测试来感受它们。我遇到了这个问题，我无法确定来源。

**问题**

我试图在单个 Node.js 程序中插入 1,000,000 条记录。 ***它绝对会爬行。*** 我们说的是 20 分钟的执行时间。无论是我的 Mac 还是 CentOS，都会发生这种情况，尽管两者的行为略有不同。它最终会完成。

效果类似于交换，但不是（内存永远不会超过 2 GB）。MongoDB 只打开了 3 个连接，而且大多数时候没有插入数据。它似乎做了很多上下文切换，并且 Node.js CPU 内核已被最大化。

效果类似于[此线程](https://stackoverflow.com/questions/8045838/importing-a-very-large-record-set-into-mongodb-using-nodejs)中提到的效果。

我尝试使用 PHP 进行相同的操作，并在 2-3 分钟内完成。没有剧情。

为什么？

**可能的原因**

我目前认为这要么是 Node.js 套接字问题，要么是 libev 在幕后发生的事情，要么是其他一些 node-mongodb-native 问题。我可能完全错了，所以我在这里寻找一些指导。

至于其他 Node.js MongoDB 适配器，我尝试过蒙古语，它似乎对文档进行排队以便批量插入它们，但最终内存不足。所以就这样了。（旁注：我也不知道为什么会这样，因为它甚至没有接近我的 16 GB 盒子限制——但我并没有费心进一步调查。）

我可能应该提一下，我确实测试了一个有 4 个工作人员（在四核机器上）的主/工作集群，它在 2-3 分钟内完成。

**编码**

这是我的 Node.js CoffeeScript 程序：

```
mongodb = require "mongodb"
microtime = require "microtime"
crypto = require "crypto"

times = 1000000
server = new mongodb.Server "127.0.0.1", 27017
db = mongodb.Db "test", server
db.open (error, client) ->
  throw error if error?

  collection = mongodb.Collection client, "foo"

  for i in [0...times]
    console.log "Inserting #{i}..." if i % 100000 == 0

    hash = crypto.createHash "sha1"
    hash.update "" + microtime.now() + (Math.random() * 255 | 0)
    key = hash.digest "hex"

    doc =
      key: key,
      foo1: 1000,
      foo2: 1000,
      foo3: 1000,
      bar1: 2000,
      bar2: 2000,
      bar3: 2000,
      baz1: 3000,
      baz2: 3000,
      baz3: 3000

    collection.insert doc, safe: true, (error, response) ->
      console.log error.message if error 
```

这是大致等效的 PHP 程序：

```
<?php
$mongo = new Mongo();
$collection = $mongo->test->foo;

$times = 1000000;
for ($i = 0; $i < $times; $i++) {
    if ($i % 100000 == 0) {
        print "Inserting $i...\n";
    }

    $doc = array(
        "key" => sha1(microtime(true) + rand(0, 255)),
        "foo1" => 1000,
        "foo2" => 1000,
        "foo3" => 1000,
        "bar1" => 2000,
        "bar2" => 2000,
        "bar3" => 2000,
        "baz1" => 3000,
        "baz2" => 3000,
        "baz3" => 3000
    );
    try {
        $collection->insert($doc, array("safe" => true));
    } catch (MongoCursorException $e) {
        print $e->getMessage() . "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T19:35:15.107

听起来您遇到了 V8 中的默认堆限制。我写了[一篇](http://blog.caustik.com/2012/04/11/escape-the-1-4gb-v8-heap-limit-in-node-js/)关于消除此限制的博客文章。

垃圾收集器可能会发疯并咀嚼 CPU，因为它会不断执行，直到您低于 1.4GB 限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T17:31:33.200

如果在 db.open 回调函数的末尾显式返回一个值会发生什么？您生成的 javascript 代码正在将您的所有 collection.insert 返回推到一个大的“_results”数组中，我想这会越来越慢。

```
db.open(function(error, client) {
  var collection, doc, hash, i, key, _i, _results;
  if (error != null) {
    throw error;
  }
  collection = mongodb.Collection(client, "foo");
  _results = [];
  for (i = _i = 0; 0 <= times ? _i < times : _i > times; i = 0 <= times ? ++_i : --_i) {
    ...
    _results.push(collection.insert(doc, {
      safe: true
    }, function(error, response) {
      if (error) {
        return console.log(error.message);
      }
    }));
  }
  return _results;
}); 
```

尝试在你的咖啡脚本末尾添加这个：

```
 collection.insert doc, safe: true, (error, response) ->
      console.log error.message if error

  return 
```

**更新：**所以，我实际上尝试运行您的程序，并注意到更多问题：

最大的问题是你试图以同步方式产生一百万个插入，这真的会杀死你的 RAM，并最终停止插入（至少，它对我来说是这样）。我在 800MB RAM 左右杀死了它。

您需要更改调用 collection.insert() 的方式，以便它异步工作。

我像这样重写了它，为了清楚起见，分解了几个函数：

```
mongodb = require "mongodb"
microtime = require "microtime"
crypto = require "crypto"

gen  = () ->
  hash = crypto.createHash "sha1"
  hash.update "" + microtime.now() + (Math.random() * 255 | 0)
  key = hash.digest "hex"

  key: key,
  foo1: 1000,
  foo2: 1000,
  foo3: 1000,
  bar1: 2000,
  bar2: 2000,
  bar3: 2000,
  baz1: 3000,
  baz2: 3000,
  baz3: 3000

times = 1000000
i = times

insertDocs = (collection) ->
  collection.insert gen(), {safe:true}, () ->
    console.log "Inserting #{times-i}..." if i % 100000 == 0
    if --i > 0
      insertDocs(collection)
    else
      process.exit 0
  return

server = new mongodb.Server "127.0.0.1", 27017
db = mongodb.Db "test", server
db.open (error, db) ->
  throw error if error?
  db.collection "foo", (err, collection) ->
    insertDocs(collection)
    return
  return 
```

在约 3 分钟内完成：

```
wfreeman$ time coffee mongotest.coffee
Inserting 0...
Inserting 100000...
Inserting 200000...
Inserting 300000...
Inserting 400000...
Inserting 500000...
Inserting 600000...
Inserting 700000...
Inserting 800000...
Inserting 900000...

real    3m31.991s
user    1m55.211s
sys 0m23.420s 
```

此外，它还具有使用 <100MB 的 RAM、70% 的节点上的 CPU 和 40% 的 mongod 上的 CPU 的附带好处（在 2 核机器上，所以看起来它并没有最大化 CPU）。

# c# - 无法先从 EF 代码打开生成的数据库

> ID：11111282
> 
> 赞同：2
> 
> 时间：2012-06-20T00:21:47.573
> 
> 标签：c#, entity-framework-4, ef-code-first, asp.net-mvc-4

我收到的错误是登录请求的“无法打开数据库”NerdlyDB。登录失败。用户“计算机名\用户名”登录失败。

这是我的连接字符串：

```
<add name="NerdlyDB" connectionString="Data Source=(LocalDb)\v11.0; Integrated Security=SSPI; initial catalog= NerdlyDB" providerName="System.Data.SqlClient"/> 
```

该数据库是使用 EF 代码优先方法生成的。我是这个新手，所以我会告诉你我做了什么，以防它在某个地方关闭：

在我的实体类中：

```
namespace NerdlyThings.Models
{
public class Post
{
    public int ID { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string Content { get; set; }
    public DateTime Date { get; set; }
    public string Tags { get; set; }
}
} 
```

DBContext 类

```
namespace NerdlyThings.Models
{
public class NerdlyDB : DbContext
{
    public DbSet<Post> Posts { get; set; }
    public DbSet<Comment> Comments { get; set; }
    public DbSet<Image> Images { get; set; }
    public DbSet<Quote> Quotes { get; set; }
}
} 
```

我看到这个错误很明显是一个身份验证问题，但我不知道首先使用代码在哪里设置它，只能通过在 sql server management studio 中设置一个数据库。

*****编辑*******

 **好的，所以我不是在最初做这个的电脑旁，但我有一些时间在工作中消磨时间，所以按照[这里的简单说明再次尝试](http://msdn.microsoft.com/en-us/data/gg685467.aspx)

我在 Visual Studio 2012 RC 中的 MVC4 互联网应用程序模板中执行此操作。像梦一样工作，我只能假设我的另一台计算机上出现了一些奇怪的配置问题，或者在此过程中出现了一些问题。无论如何，这就是我所做的：

课程：

```
namespace CodeFirstBlog.Models
{
public class Blog
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string BloggerName { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
}

public class Post
{
    public int Id { get; set; }
    public string Title { get; set; }
    public DateTime DateCreated { get; set; }
    public string Content { get; set; }
    public int BlogId { get; set; }
    public ICollection<Comment> Comments { get; set; }
}

public class Comment
{
    public int Id { get; set; }
    public DateTime DateCreated { get; set; }
    public string Content { get; set; }
    public int PostId { get; set; }
    public Post Post { get; set; }
}
} 
```

DBContext 类：

```
namespace CodeFirstBlog.Models
{
public class BlogContext : DbContext
{
    public DbSet<Blog> Blogs { get; set; }
    public DbSet<Post> Posts { get; set; }
    public DbSet<Comment> Comments { get; set; }
}
} 
```

我设置了这些，然后像这样创建了一个控制器（只是让它生成了我选择的上下文和类）：

```
public class BlogController : Controller
{
    private BlogContext db = new BlogContext();

    //
    // GET: /Blog/

    public ActionResult Index()
    {
        return View(db.Blogs.ToList());
    }

    //
    // GET: /Blog/Details/5

    public ActionResult Details(int id = 0)
    {
        Blog blog = db.Blogs.Find(id);
        if (blog == null)
        {
            return HttpNotFound();
        }
        return View(blog);
    }

    //
    // GET: /Blog/Create

    public ActionResult Create()
    {
        return View();
    }

    //
    // POST: /Blog/Create

    [HttpPost]
    public ActionResult Create(Blog blog)
    {
        if (ModelState.IsValid)
        {
            db.Blogs.Add(blog);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(blog);
    }

    //
    // GET: /Blog/Edit/5

    public ActionResult Edit(int id = 0)
    {
        Blog blog = db.Blogs.Find(id);
        if (blog == null)
        {
            return HttpNotFound();
        }
        return View(blog);
    }

    //
    // POST: /Blog/Edit/5

    [HttpPost]
    public ActionResult Edit(Blog blog)
    {
        if (ModelState.IsValid)
        {
            db.Entry(blog).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        return View(blog);
    }

    //
    // GET: /Blog/Delete/5

    public ActionResult Delete(int id = 0)
    {
        Blog blog = db.Blogs.Find(id);
        if (blog == null)
        {
            return HttpNotFound();
        }
        return View(blog);
    }

    //
    // POST: /Blog/Delete/5

    [HttpPost, ActionName("Delete")]
    public ActionResult DeleteConfirmed(int id)
    {
        Blog blog = db.Blogs.Find(id);
        db.Blogs.Remove(blog);
        db.SaveChanges();
        return RedirectToAction("Index");
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
    }
} 
```

然后我简单地运行应用程序，使用生成的视图创建一个新博客。效果很好。数据库是在我的 App_Data 文件夹中生成的，我可以很好地访问它并查看生成的架构。所以问题解决了，也许？从这一点开始，我可以使用您建议的答案来调整数据库设置等等，所以谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:18:35.523

您是否在某处将您的`DBContext`班级连接到该连接字符串？我的猜测是缺少，因此导致了问题。我经常看到`DBContext`类的构造函数中指定的连接字符串（参见下面的示例）：

```
public class NerdlyDB : DbContext
{
    public NerdlyDB() : base("NerdlyDB")
    {
    }
    ... 
```

然后，这将在您的/中查找`<connectionString>`with 。有关使用连接字符串设置 EF 的更多信息，请参阅此[链接。](http://blogs.msdn.com/b/adonet/archive/2011/01/27/using-dbcontext-in-ef-feature-ctp5-part-2-connections-and-models.aspx)`name="NerdlyDB"``web.config``app.config`

我还建议在您的代码中使用@Eric J. 的方法。[您可以在Silk.codeplex.com](http://silk.codeplex.com)（特别是`MileageStats.Data.SqlCe`项目）上看到他的建议（通常首先是 EF 代码）的一个非常深入的示例

在单独的说明中，您似乎缺少实际的代码优先模型设置。查看项目中的[`MileageStatsDbContext.cs`](http://silk.codeplex.com/SourceControl/changeset/view/d380cf634c1b#MileageStats/MileageStats.Data.SqlCe/MileageStatsDbContext.cs)文件`Silk`以查看如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:31:05.513

到目前为止，我发现的最佳方法是创建自己的[IDatabaseInitializer](http://msdn.microsoft.com/en-us/library/gg696323%28v=vs.103%29.aspx)来运行创建索引和创建用户所需的命令。

```
public class MyContext : DbContext
{
    static private Initializer DbInitializer;
    static MyContext()
    {
        DbInitializer = new MyContext.Initializer();
        Database.SetInitializer<MyContext>(DbInitializer);
    }
}
public class Initializer : IDatabaseInitializer<MyContext>
{
    public void InitializeDatabase(MyContext context)
    {
        string ddl = "(Some SQL command to e.g. create an index or create a user)";
        context.Database.ExecuteSqlCommand(ddl);
    }
} 
```**

# android - 解决PhoneGap 1.4.1上Android 4+动态JS联动问题

> ID：11111287
> 
> 赞同：2
> 
> 时间：2012-06-20T00:22:29.880
> 
> 标签：android, cordova, android-4.0-ice-cream-sandwich

我遇到了在 Android 4.0+ 上使用 PhoneGap 访问 JS 文件的常见问题。这是一个严重影响 PhoneGap 应用程序的令人讨厌的 webview 错误。如果我尝试动态加载脚本，例如

```
$('head').append('<script type="text/javascript" charset="utf-8" src="app/android.js"></script>'); 
```

Android 4.0+ 会出现 404，也就是“铬错误 -6”——它无法解析 url。这对 XHR 请求产生了灾难性的影响。该线程中概述了该问题，并且一位好心的用户发布了 PhoneGap 1.7 的补丁：

[http://code.google.com/p/android/issues/detail?id=17535](http://code.google.com/p/android/issues/detail?id=17535)

我已经尝试过这个补丁并且它有效。我想知道的是是否可以为 PhoneGap 1.4.1 做任何事情。此时将我的生产版本升级到 1.7 不是一个可行的解决方案，我想其他人在这个主要的 Android 错误中处于类似的位置。值得注意的是，即使是PhoneGap 1.8.1也没有集成上述补丁。

有没有人能够为 PhoneGap 1.4.1 解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:59:16.807

我有在 ICS 中动态加载 js 的类似问题，并通过以下方式解决：

1.  使用java代码读取内容JS文件，java将js文件的内容作为字符串返回
2.  在 js 中从 Java 代码中获取数据并使用 globalEval 全局执行代码

# c++ - 带有 -lpthread，g++ 编译器错误，“未定义引用”信号量调用，例如 `sem_open'

> ID：11111291
> 
> 赞同：6
> 
> 时间：2012-06-20T00:22:54.857
> 
> 标签：c++, linux, multithreading, system-calls, undefined-reference

我是 posix 线程库的新手，我尝试从教程中编译示例代码：

```
g++ -lpthread agreement.cpp -o agreement 
```

但是我无法编译代码并收到以下错误消息：

```
a3q2.cpp:(.text+0x7e): undefined reference to `sem_open'
a3q2.cpp:(.text+0xab): undefined reference to `sem_wait'
a3q2.cpp:(.text+0x290): undefined reference to `sem_post'
a3q2.cpp:(.text+0x2af): undefined reference to `sem_close'
a3q2.cpp:(.text+0x2bb): undefined reference to `sem_unlink'
collect2: ld returned 1 exit status
make: *** [a3q2_exe] Error 1 
```

我知道编译需要 -lpthread 才能工作，但是我可能需要其他选项来解决问题吗？如果不是，我该如何安装“正确的”pthread 库？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-20T00:28:24.947

你想要编译选项`-pthread`（如果你真的在使用 pthreads）。如果您只需要它们正在`librt`使用的那些功能`-lrt`

# gcc - 为什么找不到我的共享库？

> ID：11111293
> 
> 赞同：6
> 
> 时间：2012-06-20T00:23:31.913
> 
> 标签：gcc, shared-libraries, ld

[我正在尝试编译一个链接到Sundown](https://github.com/tanoku/sundown)生成的共享库的示例程序。我正在像这样编译程序。

```
$ gcc -o sd sundown.c -L. -lsundown 
```

然而，当我运行它时，我收到以下错误。

> ./sd：加载共享库时出错：libsundown.so：无法打开共享对象文件：没有这样的文件或目录

的输出`ls`是。

```
$ ls
libsundown.so  libsundown.so.1  sundown.c  sd 
```

为什么找不到共享库`ld`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:45:28.433

简短的解决方案：

将`.`（或任何来自您的`-L`标志的内容）添加到您的`LD_LIBRARY_PATH`. 运行时`sd`，它会在标准位置和 LD_LIBRARY_PATH 中查找库。请注意，由于您已添加`.`，因此仅当您`sd`从 libsundown.so 所在的同一目录运行时才有效。

> 我计划分发编译后的二进制文件。我怎样才能在不强迫人们编辑他们的 LD_LIBRARY_PATH 的情况下分发库？

您应该将 libsundown.so 安装在标准位置之一，例如 /usr/lib 或 /usr/local/lib。您可以使用安装程序或 ma​​ke 文件，或者像 INSTALL 或 README 这样简单的东西来执行此操作，告诉用户将库粘贴在那里并确保权限设置为合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-06T02:10:25.320

在带有 /usr/lib 和 /usr/lib64 的 Centos 系统上，如果您手动将 64 位库安装到 /usr/lib 中，那么在运行时，即使在构建时它是可见的，该库也可能不可见（我使用了 autotools 和它能够毫无问题地从 /usr/lib 找到我的 zopfli 库）。当我执行链接到 /usr/lib/libzopfli.so.1 的 my_binary 时，我得到了

```
libzopfli.so.1 => not found 
```

将 libzopfly.so.1 从 /usr/lib 移动到 /usr/lib64 后，一切正常。

# r - R启动期间Websockets服务方法失败

> ID：11111294
> 
> 赞同：2
> 
> 时间：2012-06-20T00:24:13.780
> 
> 标签：r, websocket

我想在 R 启动时在 R 中运行 websockets。我使用 websockets 包：[http](http://cran.r-project.org/web/packages/websockets/) ://cran.r-project.org/web/packages/websockets/ 。如果我通过在 Rprofile.site 中设置 follow 来在​​ Windows 上运行此发行版中的示例：

```
.First <- function()
{
   source("C:\\R\\orig-websockets.R")
} 
```

我收到以下错误：

.parse_header(x) 中的错误：找不到函数“tail”

跟踪如下：

```
6: .parse_header(x)
5: service(w) at orig-websockets.R#26
4: eval.with.vis(expr, envir, enclos)
3: eval.with.vis(ei, envir)
2: source("C:\\R\\orig-websockets.R")
1: .First() 
```

我假设某些包依赖项中的问题。如果手动加载，相同的脚本可以正常工作。

先感谢您。

伊利亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:56:11.197

`tail`在`utils`包装中。您需要在获取脚本之前或在脚本顶部添加`require("utils")`到函数中。`.First`

从`?Startup`

> ...如果在搜索路径中找到函数 .First，则将其作为 .First() 执行。最后，运行基础包中的函数 .First.sys()。此调用需要附加选项（“defaultPackages”）指定的默认包。

换句话说，直到`utils`函数执行*后才加载。*`.First`

# jquery-ui - jQuery UI 多个日期选择器：在按类设置选项后按 id 设置单个事件

> ID：11111296
> 
> 赞同：3
> 
> 时间：2012-06-20T00:24:38.883
> 
> 标签：jquery-ui, datepicker, options, onselect

我在一页中有多个日期选择器。我使用类名来设置诸如出现之类的选项。

```
$('.datepickers').datepicker({
        dateFormat: "yy-mm-dd",
        showButtonPanel: true,
        changeMonth: true,
        changeYear: true,
        showOtherMonths: true,
        selectOtherMonths: true,
        showWeek: true
}); 
```

然后，我想为其中两个设置 onSelect 事件。

```
$('#to').datepicker({
    onSelect: function(selectedDate) {
        $('#from').datepicker("option", "minDate", selectedDate);
    }
}); 
```

其他类似的 onSelect 事件设置。

但是，这行不通。除了通过 id 单独设置所有选项之外，有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:02:55.490

我在这里创建了一个功能演示来展示一个可能的解决方案：

## [点击 jsfiddle](http://jsfiddle.net/nickadeemus2002/Apqnc/)

您不必创建多个日期选择器方法。只需使用“onSelect”方法即可：

1.  测试当前日期选择器是否有“#to”
2.  如果是这样，请使用此日期选择器中的“dateText”值来初始化“#from”日期选择器
3.  使用当前的“inst”值将 dom 遍历到“#from”日期选择器并设置它的值。

这些是关键线：

```
onSelect: function(dateText, inst) {
   if(inst.id === 'to'){
     $('.datepickers').filter($('input#from')).datepicker("option", "minDate", dateText);
  }          
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T10:12:16.567

您是否尝试过以下语法？您不想再次 _init 日期选择器小部件。您只想更改一个选项。这是使用 jquery ui 小部件执行此操作的方法。

```
 $('#to').datepicker('option', 'onSelect', function(selectedDate) {
            $('#from').datepicker("option", "minDate", selectedDate);
        }); 
```

# html - 无序列表清除修复

> ID：11111302
> 
> 赞同：2
> 
> 时间：2012-06-20T00:26:15.483
> 
> 标签：html, css, css-float, html-lists, clearfix

我有一个无序列表，每个列表元素都包含一张照片和一个标题。我的 CSS 将网格设置为网格，其中每行包含三张照片。有时标题（或照片说明）比照片的宽度长，并且必须跨越两行。在某些情况下，当文本跨越 2 行以上时，它下面的列表元素会被推到右侧，并且列表中有很大的间隙。唯一对我有用的解决方法是`<div style="clear:both"></div>`在每三个`<li></li>`元素之后添加以下 HTML。该问题可以在列表元素的第三行中看到。我试过研究这个问题，但还没有找到纯 CSS 的方法。在我的示例代码中，我应用了 CSS clearfix 类，但它似乎没有任何效果。

我使用的是最新版本的谷歌浏览器。

这是我的代码：http: [//jsfiddle.net/NVveP/1/](http://jsfiddle.net/NVveP/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T09:24:16.337

两者兼而有之`float: left`，`display: inline-block`实际上将无效`display: inline-block`，因为[`float: left`力量`display: block`](https://stackoverflow.com/questions/5854463/jquery-in-chrome-returns-block-instead-of-inline/5854523#5854523)。

因此，删除`float: left`允许`display: inline-block`工作，结合它`vertical-align: top`是您可以实现所需布局的方式。

**见：http:** [//jsfiddle.net/thirtydot/NVveP/3/](http://jsfiddle.net/thirtydot/NVveP/3/)

如果这很重要，我还添加了一个 hack 以`display: inline-block`在 IE7 中工作。

用浮动来做到这一点会更加困难。你需要一些东西来达到以下效果：

```
li:nth-child(3n+1) {
    clear: both;
} 
```

哪个有在IE7 / 8等旧浏览器中不起作用的问题。幸运的是，无需担心这一点，因为这`display: inline-block`是解决方案，而不是浮动。

# jquery - 用于动态检测点击的jquery事件监听器？

> ID：11111303
> 
> 赞同：1
> 
> 时间：2012-06-20T00:26:26.840
> 
> 标签：jquery, addeventlistener

我有 2 个（或更多）表，每个表中的 id 和类名都相同。根据单击的跨度，我想在 tbody 中显示或隐藏行。例如：如果单击跨度类 =“季度”，我想在 tbody 中显示带有类 =“季度”的行并隐藏类 =“月”。我应该使用 jQuery 事件侦听器来实现这一点吗？我希望此代码可用于 id=tab3 或 tab4 以及可能更多的许多其他表。所以我不想使用 $("#tab1").onclick...我希望能够检测单击哪个表中的哪个跨度，然后显示其中的 tbody 元素。

```
<table id="tab1">
<thead><tr><th><span class="quarter">Quarter</span></th></tr>
<tr><th><span class="month">Month</span></th></tr>
</thead>
<tbody>
<tr class="quarter"><td></td></tr>
<tr class="month"><td></td></tr>
</tbody>
</table>

<table id="tab2">
<thead><tr><th><span class="quarter">Quarter</span></th></tr>
<tr><th><span class="month">Month</span></th></tr> 
```

最终解决方案（我的实际 html 结构与上面的示例略有不同）

```
$('table thead span label').click(function() {  
                        $("label:not(this.className)").css('color','#d6c9b9');      
                        $(this).css('color','#00425f');         
                        $(this).parents('table').parents('table').find('table').hide();                     
                        $(this).closest('table').find('tbody tr').hide();
                        $(this).closest('table').show();                        
                        $(this).closest('table').find('tbody tr.' + this.className).show();
                        $(this).parents('table').parents('table').find('table.'+ this.className).show();
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:31:20.943

尝试这个：

```
$('span').click(function(){
   $(this).closest('table').find('tbody tr').hide();
   $(this).closest('table').find('tr.' + this.className).show();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:08:06.210

```
$('table thead span').click(function() {
   $(this)
       .closest('table')  // find parent table
       .find('tbody tr.' + this.className)  // detect row with same class name
       .show() // show that row
       .siblings('tr')  // capture other tr
       .hide(); // hide those tr
}); 
```

**[演示](http://jsfiddle.net/QStkd/326/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:44:02.980

像这样的东西：

```
$('.toggle thead tr').click(function(){
    var c = $(this).find('span').attr('class');
        p = $(this).parent().parent();
    p.find('tbody tr').hide();
    p.find('tbody .' + c).show();
});

<table id="tab1" class="toggle">
...
</table> 
```

**演示：[在这里](http://jsfiddle.net/bS55H/)**

# regex - 将字段中的未转义文本添加到postgres中的正则表达式的正确方法？

> ID：11111304
> 
> 赞同：2
> 
> 时间：2012-06-20T00:26:30.787
> 
> 标签：regex, postgresql

将字段中的文字文本值添加到 postgres 中的正则表达式的正确方法是什么？

例如，如果不转义， some_field 可能包含无效的正则表达式语法，如下所示：

```
where some_text ~* ('\m' || some_field || '\M'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:54:43.863

最简单的事情是使用正则表达式来准备您的字符串以进入正则表达式。转义字符串中的非单词字符应该足以使其成为正则表达式安全，例如：

```
=> select regexp_replace('. word * and µ{', E'([^\\w\\s])', E'\\\\\\1', 'g');
   regexp_replace   
--------------------
 \. word \* and µ\{ 
```

所以这样的事情通常应该起作用：

```
where some_text ~* x || regexp_replace(some_field, E'([^\\w\\s])', E'\\\\\\1', 'g') || y 
```

where`x`和`y`是正则表达式的其他部分。

如果您最后不需要正则表达式（即`y`上面没有），那么您可以使用[`(?q)`](http://www.postgresql.org/docs/current/static/functions-matching.html#POSIX-METASYNTAX)：

> ARE 可以以*嵌入的选项*开始：一个序列`(?xyz)`（`xyz`一个或多个字母字符）指定影响 RE 其余部分的选项。

和 a`q`意味着：

> RE 的其余部分是文字（“引用”）字符串，所有普通字符

所以你可以使用：

```
where some_text ~* x || '(?q)' || some_field 
```

在这种有限的情况下。

# r - 写函数

> ID：11111306
> 
> 赞同：1
> 
> 时间：2012-06-20T00:26:42.020
> 
> 标签：r, function, create-function

我正在为一个名为 opps 的关于零件编号销售数据的数据集编写一个函数，并且我正在尝试将数据分解为特定于零件编号的较小数据集。我试图将数据集命名为参数“modNum”。这是我到目前为止所拥有的-

```
# modNum (Modified Product Number) takes a product number that looks 
# like "950-0004-00" and makes it "opQty950.0004.00"
productNumber <- function(prodNum,modNum){

  path <- "C:/Users/Data/"
  readFile <- paste(path,"/opps.csv",sep="")
  oppsQty <- read.csv(file=readFile,sep=",")

  oppsQty$Line.Created.date <- as.Date(as.character(oppsQty$Line.Created),
                                      "%m/%d/%Y")

  modNum <- oppsQty[oppsQty$Part.Number=="prodNum",]
 }

productNumber(280-0213-00,opQty280.0213.00)
#Error: object 'opQty910.0002.01' not found 
```

我认为我遇到问题的线路是

```
modNum <- oppsQty[oppsQty$Part.Number=="prodNum",] 
```

这是因为为了使代码正常工作，prodNum 周围必须有括号，但是当我将括号放入代码中时，prodNum 不再被视为要填充的参数。当我将括号放入参数中时像这样，-

```
productNumber(280-0213-00,"opQty280.0213.00") 
```

我还是有问题。
我怎样才能解决这个问题？

我尝试将 oppsQty$Part.Number 变量重写为数字（如下所示），以便我可以一起消除括号，但我仍然有错误......

```
 productNumber <- function(prodNum,nameNum){

     path <- "C:/Users/Data"
    readFile <- paste(path,"/opps.csv",sep="")
    oppsQty <- read.csv(file=readFile,sep=",")

    oppsQty$Line.Created.date <- as.Date(as.character(oppsQty$Line.Created),
                                         "%m/%d/%Y")

    #ifelse(oppsQty$Part.Number=="Discount", 
    #       oppsQty$Part.Number=="000000000", 
    #       oppsQty$Part.Number)

    oppsQty$Part <- paste(substr(oppsQty$Part.Number,1,3),
                          substr(oppsQty$Part.Number,5,8),
                          substr(oppsQty$Part.Number,10,11),sep = "")

    oppsQty$Part <- as.numeric(oppsQty$Part)

    oppsQty$Part[is.na(oppsQty$Part)] <- 0

    nameNum <- oppsQty[oppsQty$Part==prodNum,]

 }
> productNumber(401110201,opQty401.1102.01)

Warning message:
In productNumber(401110201, opQty401.1102.01) : NAs introduced by coercion 
```

非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:45:37.110

目前您将 prodNum 作为数值传递，因此

`280-0213-00`被评估为`67` `(280-213-0= 67)`

您应该将（并考虑）`prodNum`作为字符串传递（因为这是您想要的）

IE。`"280-0213-00"`

# opengl-es-2.0 - OpenGL ES 2.0：在没有模型视图或投影矩阵的情况下将纹理渲染到屏幕

> ID：11111307
> 
> 赞同：0
> 
> 时间：2012-06-20T00:26:46.937
> 
> 标签：opengl-es-2.0

我正在尝试将纹理渲染到屏幕的左下角，例如：

```
glViewPort(0, 0, width/4, height/4); 
```

我无法执行该渲染。我画了一个四边形并做一些基本的事情。我已经尝试了所有渲染到四边形的变体，如这些链接和其他关于 SO 的讨论：

[如何在 OpenGL ES 2.0 中将纹理绘制为 2D 背景？](https://stackoverflow.com/questions/4036737/how-to-draw-a-texture-as-a-2d-background-in-opengl-es-2-0)

[OpenGL ES 2.0 使用纹理渲染](https://stackoverflow.com/questions/2771408/opengl-es-2-0-rendering-with-a-texture)

我的顶点和片段着色器如下：

```
const char * VERTEX_SHADER =
"                                               \n\
attribute vec4 a_position;                      \n\
attribute vec4 a_texCoord;                      \n\
                                                \n\
                                                \n\
#ifdef GL_ES                                    \n\
varying mediump vec2 v_texCoord;                \n\
#else                                           \n\
varying vec2 v_texCoord;                        \n\
#endif                                          \n\
                                                \n\
void main()                                     \n\
{                                               \n\
    gl_Position = a_position;                   \n\
    v_texCoord = a_texCoord.xy;                 \n\
}                                               \n\
";

const char * FRAGMENT_SHADER =
"                                                       \n\
#ifdef GL_ES                                            \n\
precision lowp float;                                   \n\
#endif                                                  \n\
                                                        \n\
varying vec2 v_texCoord;                                \n\
uniform sampler2D u_texture;                            \n\
                                                        \n\
void main()                                             \n\
{                                                       \n\
    gl_FragColor =  texture2D(u_texture, v_texCoord);   \n\
}                                                       \n\
"; 
```

我的渲染代码是这样的：

```
static const GLfloat squareVertices[] = {
    -1.0f, -1.0f,
     1.0f, -1.0f,
    -1.0f,  1.0f,
     1.0f,  1.0f,
};

static const GLfloat textureVertices[] = {
    0.0f, 0.0f,
    1.0f, 0.0f,
    0.0f, 1.0f,
    1.0f, 1.0f,
};

// ...

glUseProgram(myProgram_);
glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
glViewPort(0, 0, width/4, height/4);  // width and height are defined elsewhere

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, myTexture_); // myTexture_ has been successfully loaded and checked

// Update uniform values
glUniform1i(textureUniformLocation_, 0);

// Update attribute values.
glEnableVertexAttribArray(a_position_location_);
glEnableVertexAttribArray(a_texcoord_location_);
glVertexAttribPointer(a_position_location_, 2, GL_FLOAT, 0, 0, squareVertices);
glVertexAttribPointer(a_texcoord_location_, 2, GL_FLOAT, 0, 0, textureVertices;

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

顶点和片段着色器编译并且 glProgram 链接成功。我得到的只是屏幕左下角的一个白色矩形（当然，在已经渲染的场景的顶部）。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:21:35.570

也许你忘了设置你的缩小过滤器？将纹理保存为图像可能不会提醒您这样的采样错误。

[http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture](http://www.opengl.org/wiki/Common_Mistakes#Creating_a_Texture)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-03T00:00:46.303

你应该改变

```
attribute vec4 a_position;
attribute vec4 a_texCoord; 
```

至

```
attribute vec2 a_position;
attribute vec2 a_texCoord; 
```

和

```
gl_Position = a_position; 
```

至

```
gl_Position = vec4(a_position,0.0,1.0); 
```

# linux - 寻找 linux 2.6.33.20 内核源 SCSI 超时的创建/设置位置

> ID：11111321
> 
> 赞同：1
> 
> 时间：2012-06-20T00:28:34.430
> 
> 标签：linux, kernel, scsi

在旧版本的内核（2.6.25.8）中，它位于函数 scsi_add_timer 和 scsi_delete_timer 中的 drivers/scsi/scsi_error.c 中：[http ://www.cs.fsu.edu/~baker/devices/lxr/http/源/linux/drivers/scsi/scsi_error.c?v=2.6.25.8](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/drivers/scsi/scsi_error.c?v=2.6.25.8)

我似乎在 2.6.33.20 内核的 scsi_error.c 中找不到任何类似的东西，我查看了其他文件（使用 grep 并搜索时间）并看到提到超时，但没有什么看起来像你重新设置定时器的超时值。

非常感谢任何帮助，我已经为此苦苦挣扎了一段时间。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:47:00.243

[`242f9dcb8ba6f68fcd217a119a7648a4f69290e9`](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=patch;h=242f9dcb8ba6f68fcd217a119a7648a4f69290e9)我有一种感觉，当超时从特定的块设备中取出并移入块设备抽象层时，您尝试查找的内容已更改。

# node.js - Node.js - 等到文件完全写入

> ID：11111323
> 
> 赞同：2
> 
> 时间：2012-06-20T00:29:19.563
> 
> 标签：node.js, wkhtmltopdf

我正在使用 child_process 运行 wkhtmltopdf 以从 html 文档构建 PDF。我想等到 wkhtmltopdf 完成将文档处理成 PDF 后再继续。我认为从 stdout 读取以捕获 wkhtmltopdf 发送其完成信号时的最佳方法是执行此操作，但以下代码在 res.send() 处报告 stdout 为空。当 stdout 为我提供数据时，如何设置要触发的事件？

代码：

```
var buildPdf = function(error){
    var pdfLetter;

    var child = exec('wkhtmltopdf temp.html compensation.pdf', function(error, stdout, stderr) {
        if (error)
            res.send({
                err:error.message
                });
        else
            res.send({
                output : stdout.toString()
        });
                    // sendEmail();
    });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:55:46.743

您遇到了 wkhtmltopdf 问题。它不会将状态信息写入 STDOUT，而是将其写入 STDERR。

```
$ node -e \
  "require('child_process').exec( \
   'wkhtmltopdf http://stackoverflow.com/ foo.pdf', \
   function(err, stdout, stderr) { process.stdout.write( stderr ); } );"
Loading pages (1/6)
content-type missing in HTTP POST, defaulting to application/octet-stream
Counting pages (2/6)
Resolving links (4/6)
Loading headers and footers (5/6)
Printing pages (6/6)
Done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T23:45:22.750

我刚刚通过 Heroku 上的 Node.js 完成了这项工作，并想发布，因为我必须克服几个小障碍。

```
// Spin up a new child_process to handle wkhtmltopdf.
var spawn = require('child_process').spawn;

// stdin/stdout, but see below for writing to tmp storage.
wkhtmltopdf = spawn('./path/to/wkhtmltopdf', ['-', '-']);

// Capture stdout (the generated PDF contents) and append it to the response.
wkhtmltopdf.stdout.on('data', function (data) {
    res.write(data);
});

// On process exit, determine proper response depending on the code.
wkhtmltopdf.on('close', function (code) {
    if (code === 0) {
        res.end();
    } else {
        res.status(500).send('Super helpful explanation.');
    }
});

res.header('Content-Type', 'application/octet-stream');
res.header('Content-Disposition', 'attachment; filename=some_file.pdf');
res.header('Expires', '0');
res.header('Cache-Control', 'must-revalidate, post-check=0, pre-check=0');

// Write some markup to wkhtmltopdf and then end the process. The .on 
// event above will be triggered and the response will get sent to the user.
wkhtmltopdf.stdin.write(some_markup);
wkhtmltopdf.stdin.end(); 
```

在 Heroku 的 Cedar-14 堆栈上，我无法让 wkhtmltopdf 写入标准输出。服务器总是以`Unable to write to destination`. 诀窍是写入`./.tmp`然后将写入的文件流式传输回用户 - 很简单：

```
wkhtmltopdf = spawn('./path/to/wkhtmltopdf', ['-', './.tmp/some_file.pdf']);

wkhtmltopdf.on('close', function (code) {
    if (code === 0) {

        // Stream the file.
        fs.readFile('./.tmp/some_file.pdf', function(err, data) {

            res.header('Content-Type', 'application/octet-stream');
            res.header('Content-Disposition', 'attachment; filename=' + filename);
            res.header('Expires', '0');
            res.header('Cache-Control', 'must-revalidate, post-check=0, pre-check=0');

            res.send(data);
        });
    } else {
        res.status(500).send('Super helpful explanation.');
    }
});

res.header('Content-Type', 'application/octet-stream');
res.header('Content-Disposition', 'attachment; filename=' + filename);
res.header('Expires', '0');
res.header('Cache-Control', 'must-revalidate, post-check=0, pre-check=0'); 
```

# c# - 未触发下拉的RequiredValidator（asp：从数据库填充的下拉菜单）

> ID：11111327
> 
> 赞同：0
> 
> 时间：2012-06-20T00:30:11.050
> 
> 标签：c#, asp.net, webforms

```
<asp:DropDownList id="Code1" runat="server" 
    OnLoad="GetCode1" ValidationGroup="ValidateGroup"/>    
 <asp:RequiredFieldValidator ID="Code1_RequiredValidator" runat="server" 
       ErrorMessage="Please select a value!"   ControlToValidate="Code1" 
       ValidationGroup="ValidateGroup" InitialValue="Select Code1!">
 </asp:RequiredFieldValidator> 
```

下拉列表填充在后面的代码中，如下所示：

```
protected void GetCode1(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                ISROManagement sroMgmt = ObjectFactory.CreateSROManagement();
                List<string> code1List = QuerydBForCodes();
                Code1.DataSource = codeList;
                Code1.DataBind();
                Code1.Items.Insert(0, "Make a selection."); //Added to be shown as the default value:
            }
        } 
```

当我提交模态弹出扩展器时 - 默认值位于索引 0 即进行选择 - 我没有看到 ErrorMessage="请进行选择！" 打印旁边的下拉！所以验证不会发生。

同样在提交模式弹出的按钮单击中，我有一个

```
Page.Validate("ValidateGroup");
        if (!Page.IsValid) return; 
```

但是，我没有看到下拉列表旁边打印的验证消息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:31:09.590

在 GetCode1 函数中替换以下行：

```
Code1.Items.Insert(0, "Make a selection."); 
```

到

```
Code1.Items.Insert(0, ""); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:42:00.017

您的下拉列表必须具有相同的 ValidationGroup。将 ValidationGroup="ValidateGroup" 添加到您的下拉列表中

从“选择 Code1！”更改 InitialValue “做出选择”。

# c# - 如何重定向到asp.net中的根文件？

> ID：11111330
> 
> 赞同：1
> 
> 时间：2012-06-20T00:30:27.950
> 
> 标签：c#, asp.net, vb.net, webforms

当我点击联系我们时，我的登录页面`root/Account/Login.aspx`需要重定向到`root/contactus.aspx`页面。我`Response.Redirect("~/contactus.aspx")`在母版页（Site.Master）中使用

```
 Protected Sub lbContactUs_Click(sender As Object, e As EventArgs) Handles lbContactUs.Click
    Response.Redirect("~/contactus.aspx")

End Sub 
```

它仍然没有重定向到页面。

![在此处输入图像描述](../Images/c93df75e09c33913328eae56b3cd8d85.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T03:20:46.297

您没有正确重定向。

```
Response.Redirect("/contactus.aspx", False);
Context.ApplicationInstance.CompleteRequest(); 
```

不要使用`Response.Redirect(url)`. 它调用`Response.End` **这对服务器来说是非常繁重的**。

`Response.Redirect(url, false)` **速度更快，效率更高**。

`Response.End`将提高`ThreadAbortException`服务器的成本。

[http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx](http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx)

`@Jason Kulatunga`的答案看起来会解决你的问题。以上信息仅供参考。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T03:11:09.610

将以下内容添加到您的`web.config`

```
<configuration>
...
<location path="ContactUs.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location>
... 
</configuration> 
```

似乎您在`web.config`. 如果您需要允许匿名用户访问特定页面，同时仍然让站点的其余部分受到表单身份验证的保护，您可以使用`location`标记来覆盖特定页面的安全性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T03:05:11.133

@James123：使用

```
 Protected Sub lbContactUs_Click(sender As Object, e As EventArgs) Handles lbContactUs.Click
 Response.Redirect("/contactus.aspx") 
```

结束子

这将重定向到根目录

# javascript - 用于 GMail 样式的电子邮件地址验证的 Javascript 正则表达式

> ID：11111332
> 
> 赞同：1
> 
> 时间：2012-06-20T00:30:51.967
> 
> 标签：javascript, regex, validation, email, email-validation

我需要一个正则表达式，它可以接受多种格式（见下文）的格式良好的电子邮件，这些格式将在逗号分隔的列表中输入。我有基本的电子邮件地址验证正则表达式，

```
^[\w\d._%+-]+@(?:[\w\d-]+\.)+(\w{2,})(,|$) 
```

它可以处理测试用例**A**和**B**，但不能处理其他测试用例。我也试过

```
^(\<)?[\w\d._%+-]+@(?:[\w\d-]+\.)+(\w{2,})(\>)?(,|$) 
```

它能够处理**A**、**B**和**C**，但只验证了每个测试用例**D**和**E**中的第一个电子邮件地址。我什至还没有测试格式**3**的正则表达式。

*tl;dr*需要一个正则表达式来验证电子邮件地址**1**、**2**和**3**。

测试正则表达式的好网站：[Online Javascript Regex Tester](http://www.pagecolumn.com/tool/regtest.htm)

***数据***

**测试用例**
A. nora@example.com
B. nora@example.com, fred@example.com
C. `<nora@example.com>`, fred@example.com
D. `<nora@example.com>, <fred@example.com>`
E. fred@example.com,`<nora@example.com>`

**电子邮件地址格式**
1\. xyz@example.com
2\. `<xyz@example.com>`
3\. “xyz”`<xyz@example.com>`

## *编辑*

我将此标记为可能的重复项：

[在 JavaScript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

反过来，这似乎是以下内容的副本：

[使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/what-is-the-best-regular-expression-for-validating-email-addresses)

两者都包含很多关于正则表达式作为电子邮件验证的有效性的讨论。但是，提供的投票最多的正则表达式似乎并没有完全符合我的要求，所以我认为这还没有回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:02:28.703

提供的链接或答案都不是这个问题的最佳答案。这是解决它的方法：

```
/*
* regex checks: must start with the beginning of a word or a left caret
* must end with either the end of a word or a right caret
* can handle example.example.com as possible domain
* email username can have + - _ and .
* not case sensitive
*/
var EMAIL_REGEX = /(\<|^)[\w\d._%+-]+@(?:[\w\d-]+\.)+(\w{2,})(\>|$)/i;  
var emails = emailList.trim().split(',');  
var validEmails = [];  
var invalidEmails = [];  

for (var i = 0; i < emails.length; i++) {  
    var current = emails[i].trim();
    if(current !== "") {
        //if something matching the regex can be found in the string
        if(current.search(EMAIL_REGEX) !== -1) {
            //check if it has either a front or back bracket
            if(current.indexOf("<") > -1 || current.indexOf(">") > -1) {
                //if it has both, find the email address in the string
                if(current.indexOf("<") > -1 && current.indexOf(">") > -1) {
                    current = current.substr(current.indexOf("<")+1, current.indexOf(">")-current.indexOf("<") -1);
                } 
            } 
        }
        if(EMAIL_REGEX.test(current)) {
            validEmails.push(current);
        } else {
            invalidEmails.push(current);
        }
    }               
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:49:59.170

首先将逗号分隔的列表拆分为一个数组，然后单独验证数组的每个成员会更简单。这将使正则表达式更易于编写（以及阅读和维护），并且还使您能够向输入列表的用户提供特定的反馈（“第三个电子邮件地址无效”）。

因此，假设您通过拆分做到了这一点

```
var bits = csv.split(','); 
```

遍历`bits`数组

```
for (var i = 0; i < bits.length; ++i) {
  if (!validateEmail(bits[i])) {
    alert("Email #" + (i+1) + " is bogus");
  }
} 
```

然后对于正则表达式，这样的东西将捕获 2 和 3

```
(\"[a-z0-9\s]+\"\s+)?\<[\w\d._%+-]+@(?:[\w\d-]+\.)+(\w{2,})\> 
```

您可以使用更简单的方法来捕获简单的电子邮件地址，而无需在`<`其前面加上引号或名称。

单个正则表达式的运行速度不一定比两个测试快，特别是如果您通过将最有可能的一个放在第一位来`if`短路。`or`它也更难阅读和维护。最后，它特别棘手，因为您需要前瞻：`>`只有在电子邮件地址前面的字符串包含电子邮件`<`第一个字符之前的右侧时，最后才可以。

所以我的 0.02 美元 = 不值得。只需做两个正则表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:01:41.837

此 validateEmail 函数将检查电子邮件地址 ( `xyz@example.com`) 的基本语法。包含`if`的 s 将检查替代格式 ( `<xyz@example.com>, 'xyz' <xyz@example.com>`) 并仅验证实际的电子邮件部分。仅包含 < 或 > 的项目因格式不佳（`Nope@example.com>`）而被视为无效，与任何缺少所需基本结构的电子邮件相同（`invalidExample.com`）。

```
var emailList = "abc@example.com,<lmn@example.com>,'xyz' <xyz@example.com>,invalidExample.com,Nope@example.com>,'Still93e-=48%5922=2 Good' <xyz@example.com>";
var emails = emailList.split(",");

//Loop through the array of emails
for (var i = 0; i < emails.length; i++) {
    var isValid = 1;
    var cur = emails[i];

    // If it has a < or a >,
    if( cur.indexOf("<") > -1 || cur.indexOf(">") > -1 ){
        // Set it invalid
        isValid = 0;
        // But if it has both < and >
        if( cur.indexOf("<") > -1 && cur.indexOf(">") > -1 ){
            //Set it valid and set the cur email to the content between < and >
            isValid = 1;
            cur = cur.substr(cur.indexOf("<")+1, ( cur.indexOf(">") - cur.indexOf("<") - 1 ));
        }
    }
    //Run the validate function
    if ( !validateEmail(cur) )
        isValid = 0;

    // Output your results. valid = 1, not valid = 0
    alert("Orig: "+emails[i] +"\nStripped: "+cur+"\nIs Valid: "+isValid);

}

function validateEmail(curEmail){
    var emailValid = /.*\@.*\..*$/g;
    return (curEmail.test(emailValid));
} 
```

[jsFiddle](http://jsfiddle.net/LgAXk/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:47:02.490

这样的事情会有帮助吗？

我已经测试了**2.**和**3.**，它检测到了这两种模式。

```
var isEmail_re       = /^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/;

function isEmail (s) {
   return String(s).search (isEmail_re) != -1;
}

alert(isEmail ('"xyz"<xyz@example.com>')); 
```

[http://jsfiddle.net/epinapala/BfKrR/](http://jsfiddle.net/epinapala/BfKrR/)

# c# - C# MySQL 语法错误

> ID：11111336
> 
> 赞同：3
> 
> 时间：2012-06-20T00:31:17.603
> 
> 标签：c#, mysql, syntax-error

我得到：

**您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''spectra' WHERE specId=42' 附近使用正确的语法**

运行此代码时：

```
public System.Drawing.Image GetImage(int index)
{
 using (MySqlCommand command = connection.CreateCommand())
 {
  //command.CommandText = "SELECT imageObj FROM spectra WHERE specId=42"; <== Works OK!

  command.CommandText = "SELECT imageObj FROM @tname WHERE specId=@index";
  command.Parameters.AddWithValue("@index", index);
  command.Parameters.AddWithValue("@tname", "spectra");

  using (MySqlDataReader reader = command.ExecuteReader())
  {
   if (reader.Read())
   {
    return (System.Drawing.Image)Serial.ByteArrayToObject((byte[])reader[0]);
   }
  }
 }
 return null;
} 
```

**我认为问题在于频谱**周围的引号。我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:32:46.317

您不能用参数替换表名。可悲的是，这不受支持。只有 WHERE 子句中的参数值可以用这种方式替换。

您必须自己进行替换，而不是依赖`MySqlCommand`对象。像这样的东西应该工作：

```
string tableName = "spectra";
command.CommandText = 
    String.Format( "SELECT imageObj FROM {0} WHERE specId=@index", tableName );
command.Parameters.AddWithValue("@index", index); 
```

# java - Java ArrayList如何添加类

> ID：11111339
> 
> 赞同：2
> 
> 时间：2012-06-20T00:31:56.420
> 
> 标签：java, arrays, arraylist

我在尝试`ArrayList`用 Java 创建一个时遇到了一个问题，但更具体地说是在尝试创建`add()`它时。我在线收到语法错误`people.add(joe);` ...

```
Error: misplaced construct: VariableDeclaratorId expected after this token.
    at people.add(joe);
                  ^ 
```

我的理解是，`ArrayList`就我的目的而言，an 比数组更好，所以我的问题是，是这样吗？如果不是，我的语法在哪里出错？

这是我的代码...

```
import java.util.ArrayList;

public class Person {
    static String name;
    static double age;
    static double height;
    static double weight;

    Person(String name, double age, double height, double weight){
        Person.name = name;
        Person.age = age;
        Person.height = height;
        Person.weight = weight;
    }

    Person joe = new Person("Joe", 30, 70, 180);
    ArrayList<Person> people = new ArrayList<Person>();
    people.add(joe);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:35:54.847

```
static String name;      
static double age;
static double height;
static double weight; 
```

**为什么**将这些变量定义为**static**？

看起来您正在 Person 类中执行此操作。在课堂上这样做是可以的（可以做到），但如果您正在创建 Person 对象的 ArrayList，则没有多大意义。

这里的要点是，这必须在实际的方法或构造函数或其他东西（实际的代码块）中完成。同样，我不完全确定 Person 类型的 ArrayList 在 Person 类中会有多大用处。

```
import java.util.ArrayList;

public class Person 
{                   // Don't use static here unless you want all of your Person 
                    // objects to have the same data
   String name;
   double age;
   double height;
   double weight;

   public Person(String name, double age, double height, double weight)
   {
      this.name = name;       // Must refer to instance variables that have
      this.age = age;         // the same name as constructor parameters
      this.height = height;    // with the "this" keyword. Can't use 
      this.weight = weight;    // Classname.variable with non-static variables
   }

}

public AnotherClass 
{
   public void someMethod()
   {
      Person joe = new Person("Joe", 30, 70, 180);
      ArrayList<Person> people = new ArrayList<Person>();
      people.add(joe);
      Person steve = new Person("Steve", 28, 70, 170);
      people.add(steve);            // Now Steve and Joe are two separate objects 
                                    // that have their own instance variables
                                    // (non-static)
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:36:19.297

将该代码放在 main 方法中，例如：

```
 public class Person {

     public static void main(String[] args ) {
         Person joe = new Person("Joe", 30, 70, 180);
         ArrayList<Person> people = new ArrayList<Person>();
         people.add(joe);
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:36:28.680

将这些写在某个方法或块中。
像：：

```
import java.util.ArrayList;

public class Person 
{
   static String name;
   static double age;
   static double height;
   static double weight;

  Person(String name, double age, double height, double weight)
  {
    Person.name = name;
    Person.age = age;
    Person.height = height;
    Person.weight = weight;
  }

  public static void main(String args[])
  {
    Person joe = new Person("Joe", 30, 70, 180);
    ArrayList<Person> people = new ArrayList<Person>();
    people.add(joe);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T00:36:42.660

正如其他人建议的那样，ArrayList 添加操作应该在方法块（可能在 main）中完成。

```
public class Person  {
  static String name;
  static double age;
  static double height;
  static double weight;

  Person(String name, double age, double height, double weight) {
    Person.name = name;
    Person.age = age;
    Person.height = height;
    Person.weight = weight;
  }
}

public static void main(String[] args) {
  Person joe = new Person("Joe", 30, 70, 180);
  ArrayList<Person> people = new ArrayList<Person>();
  people.add(joe);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T00:36:44.077

将您的代码（在构造函数之后）放在一个方法中，然后在其他地方调用该方法。为此，您的字段不能是静态的，因为所有实例都将共享它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T00:37:11.253

首先，您的`ArrayList`变量确实应该在实例级别，或者`static`. 像这样声明它：

```
private ArrayList<Person> people; 
```

或者：

```
static ArrayList<Person> people; 
```

其次，您需要某种功能来执行操作。

```
public static void addPerson(Person p) {
    people.add(p);
} 
```

第三，您需要调用它。您可以通过以下方式做到这一点：

```
Person.addPerson(new Person("Joe", 30, 70, 180)); 
```

在 的主体中`main()`，或与您的程序执行相关的某个地方。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-20T00:45:19.163

在 people.add(joe); 周围放置花括号 并且代码将编译：

`{people.add(joe);}`

为什么？作为初始化块的练习。

# mysql - sql多列加上每列的总和

> ID：11111341
> 
> 赞同：1
> 
> 时间：2012-06-20T00:32:32.277
> 
> 标签：mysql

使用 MySQL，我计算了几年时间跨度内几个事件（字段）的发生。然后我按年份将其显示在列中。按年份分组时，我的查询效果很好。我现在想添加最后一列，显示年份的汇总。如何包括**总列**查询？

```
Event 2008  2009  2010  2011 total  
  A     0     2    0     1     3  
  B     1     2    3     0     6  
etc. 
```

这是真正的查询：

```
select   
    count(*) as total_docs,  
    YEAR(field_document_date_value) as doc_year,  
    field_document_facility_id_value as facility,  
    IF(count(IF(field_document_type_value ='LIC809',1, NULL)) >0,count(IF(field_document_type_value ='LIC809',1, NULL)),'-') as doc_type_LIC809,  
    IF(count(IF(field_document_type_value ='LIC9099',1, NULL)) >0,count(IF(field_document_type_value ='LIC9099',1, NULL)),'-') as doc_type_LIC9099,  
    IF(count(field_document_f1_value) >0,count(field_document_f1_value),'-')  as substantial_compliance,  
    IF(count(field_document_f2_value) >0,count(field_document_f2_value),'-') as deficiencies_sited,  
    IF(count(field_document_f3_value) >0,count(field_document_f3_value),'-') as admin_outcome_809,  
    IF(count(field_document_f4_value) >0,count(field_document_f4_value),'-') as unfounded,  
    IF(count(field_document_f5_value) >0,count(field_document_f5_value),'-') as substantiated,  
    IF(count(field_document_f6_value) >0,count(field_document_f6_value),'-') as inconclusive,  
    IF(count(field_document_f7_value) >0,count(field_document_f7_value),'-') as further_investigation,  
    IF(count(field_document_f8_value) >0,count(field_document_f8_value),'-') as admin_outcome_9099,  
    IF(count(field_document_type_a_value) >0,count(field_document_type_a_value),'-') as penalty_type_a,  
    IF(count(field_document_type_b_value) >0,count(field_document_type_b_value),'-') as penalty_type_b,  
    IF(sum(field_document_civil_penalties_value) >0,CONCAT('$',sum(field_document_civil_penalties_value)),'-') as total_penalties,  
    IF(count(field_document_noncompliance_value) >0,count(field_document_noncompliance_value),'-') as total_noncompliance  

from rcfe_content_type_facility_document  

where YEAR(field_document_date_value) BETWEEN year(NOW()) -9 AND year(NOW())  
  and field_document_facility_id_value = :facility  

group by doc_year 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:32:48.463

您不能`GROUP`在 a 中排两次`SELECT`，因此您只能计算一年或总计中的行数。您可以使用`UNION`两个`SELECT`（一个按年份分组，第二个不分组 - 总计）来克服这个限制，但我认为最好从脚本中计算年份结果（如果有的话）。

简化示例：

```
SELECT by_year.amount, years.date_year FROM

-- generating years pseudo table
(
    SELECT 2008 AS date_year 
    UNION ALL SELECT 2009 
    UNION ALL SELECT 2010 
    UNION ALL SELECT 2011
) AS years

-- joining with yearly stat data
LEFT JOIN 
(
    SELECT SUM(value_field) AS amount, YEAR(date_field) AS date_year FROM data
    GROUP BY YEAR(date_field)
) AS by_year USING(date_year)

-- appending total
UNION ALL SELECT SUM(value_field) AS amount, 'total' AS date_year FROM data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T23:23:38.057

**WITH ROLLUP**是你的朋友： [http ://dev.mysql.com/doc/refman/5.7/en/group-by-modifiers.html](http://dev.mysql.com/doc/refman/5.7/en/group-by-modifiers.html)

使用您的原始查询并将其添加到最后一行：

```
GROUP BY doc_year WITH ROLLUP 
```

这将为您的查询结果集添加一个最终累积行。

# winapi - Win32错误LNK2019：无法解析的外部符号

> ID：11111344
> 
> 赞同：0
> 
> 时间：2012-06-20T00:33:06.250
> 
> 标签：winapi, winsock

我目前正在尝试从[http://johnnie.jerrata.com/winsocktutorial/](http://johnnie.jerrata.com/winsocktutorial/)学习 WinSock 编码，但是当我编译我的监听套接字时，我得到 9 个`error LNK2019: unresolved external symbol`错误。它们看起来都是代码中使用的相同函数名`referenced in function _WinMain@16`

当我运行可供下载的代码示例时也会发生这种情况，所以我认为我没有犯错。

什么是未解决的外部问题，我该如何解决？如果需要，我可以发布代码，但在那个链接上都是可见的。我正在使用 Visual Studios 2010，Win32 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:38:37.103

未解析的外部是链接器错误，告诉您没有将符号链接到二进制文件中。

引用您链接的网站：

> 随意下载整个教程代码清单。请记住，本教程中提供的任何代码**都应与 Winsock 库链接，通常是 wsock32.lib 或类似名称**的 . 此外，当在您自己的 IDE（Dev-C++、Microsoft VC++、C++ Builder 等）中使用与教程中完全相同的代码时，请选择使用 WinMain() 构建 Windows 项目以避免错误。

链接它的方法之一是：

```
#pragma comment(lib, "wsock32.lib") 
```

此外，请考虑使用[Boost.Asio](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html)而不是原始 WinSock。

# visual-studio-2010 - TFS 2012 和 VS 2010

> ID：11111346
> 
> 赞同：13
> 
> 时间：2012-06-20T00:33:37.740
> 
> 标签：visual-studio-2010, visual-studio-2012

我很高兴听到 TFS 2012 朝着分布式源代码控制迈出了一步，允许在 TFS 离线时修改源代码（没有重大问题）。

我目前使用托管的 TFS 服务，所以我希望迁移到 TFS2012 应该是无痛的。不管怎样，至少对我来说。

所以我的问题很简单，是否有适用于 VS2010 的 TFS2012 powertools 之类的东西，或者 TFS2012 是否仅适用于 VS2012？

感谢您的评论。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-23T11:17:46.213

您可以从 VS 2010 连接到 TFS 2012，但您需要[兼容性 GDR](http://www.microsoft.com/en-us/download/details.aspx?id=29082)。本地工作空间（支持您描述的改进的离线体验）仅在 VS 2012 中受支持，因为它们需要对客户端进行重大更改。

# java - java：从类中查找项目名称

> ID：11111350
> 
> 赞同：3
> 
> 时间：2012-06-20T00:35:22.813
> 
> 标签：java, reflection

我如何使用 java 反射或类似的方法通过类的实例来查找项目名称？如果不是项目名称——这是我真正想要的——我能找到包名称吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T00:42:16.370

项目只是 IDE 使用的组织工具，因此项目名称不是包含在类或 JVM 中的信息。

要获取包，请使用[Class#getPackage()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getPackage%28%29)。然后，可以调用[Package#getName()以将包作为您在代码的包声明中看到的字符串来获取。](http://docs.oracle.com/javase/7/docs/api/java/lang/Package.html#getName%28%29)

```
Class<?> clazz = Application.class;
Package package = clazz.getPackage();
System.out.println(package.getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:00:01.060

项目名称位于 IDE 的配置文件中，例如。它是 Eclipse 中的 .project 。它是一个 xml 文件，项目名称位于 projectDescription 元素的子元素名称中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-06T18:02:41.990

Java 不知道项目名称，但通常是代码所在目录的名称。

例如，如果您正在处理一个项目（在 Eclipse 或 Intellij 中）并且该项目位于文件夹“~/eclipse-workspace/myproject”中，那么您想要的项目名称可能是“myproject”。请注意，这不会是通用的——甚至不适用于您的开发环境之外。

因此，您可能想要的是用户目录，在这些情况下，它将与项目名称一致。如果某人只有一个二进制文件（jar 或类文件），它将是执行它的位置——这可能不一样。

但是，如果这是您想要的，请使用以下内容：

```
String userDir = System.getProperty("user.dir");
Path path = Paths.get(userDir);
String project = path.getFileName(); 
```

# objective-c - 如何将 NSImageView 带到另一个 NSImageView 的前面或后面？

> ID：11111355
> 
> 赞同：0
> 
> 时间：2012-06-20T00:35:37.743
> 
> 标签：objective-c, cocoa, nstableview, foreground, nsimageview

我有一个 NSTableView，它包含我所有 NSImageView 的名称，并且根据添加 NSImageViews 的顺序，最后一个将在前面。

但是如果我希望用户能够将 NSImageViews 放在另一个前面，我该怎么做呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:58:59.753

正如 NSView 参考页所解释的，视图子视图的 z 顺序由它们在视图`subviews`数组中的 oder 给出。您可以使用 插入相对于其他子视图的新子视图`-addSubview:positioned:relativeTo:`，并且可以通过获取 `subviews`属性重新排序现有子视图，根据需要重新排序其中的视图，然后调用`-setSubviews:`以设置新顺序。

具体来说，文档说：

> 子视图的顺序可以被认为是从后到前的，但这并不意味着失效和绘制行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:46:06.550

我认为您要问的是如何控制视图的 z 顺序。

由于历史性能原因，这在 AppKit 中没有得到很好的支持（与 iOS 中的 UIKit 不同），因为直到最近，您实际上*还*不能有重叠的兄弟视图。

一个常见的方法（在最近的 OS X 版本上）是使用 Core Animation（特别是，`CALayer`），它确实支持原生 z 排序，但这可能是你需要的过度杀伤力（无论如何都会有一个学习曲线为你）。

你到底想做什么？这些图像（图像视图）是否恰好在彼此之上？如果是这样，最简单（并且性能更好）的方法是拥有一个`NSImageView`并发`-setImage:...`送给它以更改显示的图像。

# mysql - 优化 MySQL LEFT JOIN 查询

> ID：11111364
> 
> 赞同：0
> 
> 时间：2012-06-20T00:36:12.957
> 
> 标签：mysql, sql, join, left-join

我的目标是选择`primary_category_id`（`articles`表）或任何次要类别（`articles_secondary_categories`连接表）是给定值的文章。在此示例查询中，类别 1。我尝试使用其他类型的连接，但这里需要注意的是，一篇文章可能没有任何二级类别。

```
SELECT DISTINCT articles.* 
FROM articles
LEFT JOIN articles_secondary_categories AS categories 
    ON categories.article_id = articles.id
WHERE 
(
    primary_category_id = 1
    OR
    categories.category_id = 1
)
    AND articles.state = "published"
    AND edition_id = 1

ORDER BY publish_at DESC
LIMIT 10; 
```

欢迎任何帮助优化此或替代方案。在具有 4k`articles`和 7k `articles_secondary_categories`（不是类别）的数据库中，运行此查询需要 5 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:02:54.060

您可以反转对次要类别的查询：

```
(SELECT articles.* 
FROM articles
WHERE primary_category_id = 1)
UNION DISTINCT
(SELECT articles.*
FROM articles_secondary_categories AS categories 
JOIN articles ON (categories.article_id = articles.id)
WHERE categories.category_id = 1
GROUP BY articles_id)
ORDER BY publish_at DESC
LIMIT 10; 
```

它应该给你一个不错的速度提升 - 只要确保你索引 categories.articles_id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:03:29.080

避免`OR`在 where 子句中使用。优化器通常不使用带有`OR`谓词的索引。

尝试将`categories.category_id = 1`移入连接条件：

```
SELECT articles.* 
FROM articles
LEFT JOIN articles_secondary_categories AS categories 
    ON categories.article_id = articles.id and categories.category_id = 1
WHERE 1 in (ifnull(categories.category_id, primary_category_id), primary_category_id)
AND articles.state = "published"
AND edition_id = 1
ORDER BY publish_at DESC
LIMIT 10; 
```

此查询的关键是`1 in (ifnull(categories.category_id, primary_category_id), primary_category_id)`，它表示“如果我们有一个类别的连接，则在列表中使用它，否则使用 primary_category_id，并且在所有情况下都使用 primary_category_id。

# java - 截图程序

> ID：11111367
> 
> 赞同：1
> 
> 时间：2012-06-20T00:36:32.310
> 
> 标签：java, swing, screenshot, bufferedimage, awtrobot

我正在制作一个屏幕截图程序，所以当您按下屏幕截图按钮时，会弹出一个 JMessageDial 并提示您使用您的图像，它会告诉您拖动鼠标并在您想要截取屏幕截图的区域周围制作一个框。当用户单击确定时，我似乎无法找到如何在框内获取图像。

所以我需要帮助的是获取用户用鼠标“绘制”的矩形内的图像，并将其存储在一个变量中。

下面是具体代码：

```
public void selectArea(final BufferedImage screen) throws Exception {
    final BufferedImage screenCopy = new BufferedImage(screen.getWidth(), screen.getHeight(), screen.getType());
    final JLabel screenLabel = new JLabel(new ImageIcon(screenCopy));
    JScrollPane screenScroll = new JScrollPane(screenLabel);

    screenScroll.setPreferredSize(new Dimension((int)(screen.getWidth()/2), (int)(screen.getHeight()/2)));

    JPanel panel = new JPanel(new BorderLayout());
    panel.add(screenScroll, BorderLayout.CENTER);

    final JLabel selectionLabel = new JLabel("Draw a rectangle");
    panel.add(selectionLabel, BorderLayout.SOUTH);
    repaint(screen, screenCopy);
    screenLabel.repaint();

    screenLabel.addMouseMotionListener(new MouseMotionAdapter() {

        @Override
        public void mouseMoved(MouseEvent me) {
            start = me.getPoint();
            repaint(screen, screenCopy);
            selectionLabel.setText("Start Point: " + start);
            screenLabel.repaint();
        }

        @Override
        public void mouseDragged(MouseEvent me) {
            end = me.getPoint();
            captureRect = new Rectangle(start, new Dimension(end.x-start.x, end.y-start.y));
            try {
                paintFinalImage(new BufferedImage((int)screenCopy.getGraphics().getClipBounds(captureRect).getWidth()+1,
                        (int)screenCopy.getGraphics().getClipBounds(captureRect).getHeight()+1, screen.getType()));
            } catch (Exception e) {
                e.printStackTrace();
            }
            repaint(screen, screenCopy);
            screenLabel.repaint();
            selectionLabel.setText("Rectangle: " + captureRect);
        }
    });
    JOptionPane.showMessageDialog(null, panel, "Select your image", JOptionPane.OK_OPTION, new ImageIcon(""));
    uploadImage(screenShot);
    System.out.println("Final rectangle: " + screenCopy.getGraphics().getClipBounds(captureRect));
} 
```

如果您需要，这是完整的课程：

```
package com.screencapture;

import java.awt.*;

public class Main implements ActionListener, ItemListener, KeyListener, NativeKeyListener {

    private final Image icon = Toolkit.getDefaultToolkit().getImage("./data/icon.gif");
    private final TrayIcon trayIcon = new TrayIcon(icon, "Screen Snapper");
    private JFrame frame;
    private Rectangle captureRect;
    private JComboBox<String> imageType;
    private boolean hideWhenMinimized = false;
    private final String API_KEY = "b84e430b4a65d16a6955358141f21a61";
    private static Robot robot;
    private BufferedImage screenShot;
    private Point end;
    private Point start;

    public static void main(String[] args) throws Exception {
        robot = new Robot();
        new Main().start();
    }

    public void start() throws Exception {
        GlobalScreen.getInstance().registerNativeHook();
        GlobalScreen.getInstance().addNativeKeyListener(this);
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        frame = new JFrame("White power!");
        frame.setPreferredSize(new Dimension(250, 250));
        frame.getContentPane().setLayout(null);
        frame.setIconImage(icon);
        frame.addKeyListener(this);
        frame.addWindowListener(new WindowListener() {

            @Override
            public void windowOpened(WindowEvent e) {}

            @Override
            public void windowClosing(WindowEvent e) {}

            @Override
            public void windowClosed(WindowEvent e) {}

            @Override
            public void windowIconified(WindowEvent e) {
                if (hideWhenMinimized)
                    frame.setVisible(false);
            }

            @Override
            public void windowDeiconified(WindowEvent e) {}

            @Override
            public void windowActivated(WindowEvent e) {}

            @Override
            public void windowDeactivated(WindowEvent e)  {}

        });

        JLabel lblImageType = new JLabel("Image Format:");
        lblImageType.setBounds(10, 11, 90, 14);
        frame.getContentPane().add(lblImageType);

        String[] imageTypes = {"PNG", "JPG"};
        imageType = new JComboBox<String>(imageTypes);
        imageType.setBounds(106, 8, 51, 20);
        frame.getContentPane().add(imageType);

        JButton btnTakeScreenShot = new JButton("ScreenShot");
        btnTakeScreenShot.setBounds(24, 69, 115, 23);
        frame.getContentPane().add(btnTakeScreenShot);
        btnTakeScreenShot.addActionListener(this);

        setTrayIcon();
        frame.pack();
        frame.setVisible(true);
    }

    public void setTrayIcon() throws AWTException {
        CheckboxMenuItem startup = new CheckboxMenuItem("Run on start-up");
        CheckboxMenuItem hide = new CheckboxMenuItem("Hide when minimized");
        String[] popupMenuOptions = {"Open", "Exit"};
        if (SystemTray.isSupported()) {
            SystemTray tray = SystemTray.getSystemTray();
            trayIcon.setImageAutoSize(true);
            PopupMenu popupMenu = new PopupMenu();
            for (String option : popupMenuOptions) {
                if (option == "Exit") {
                    popupMenu.add(startup);
                    popupMenu.add(hide);
                    popupMenu.add(option);
                } else {
                    popupMenu.add(option);
                }
            }
            trayIcon.setPopupMenu(popupMenu);
            popupMenu.addActionListener(this);
            startup.addItemListener(this);
            hide.addItemListener(this);
            trayIcon.addActionListener(new ActionListener() {

                @Override
                public void actionPerformed(ActionEvent e) {
                    frame.setVisible(true);
                }

            });
            tray.add(trayIcon);
        }
    }

    public void selectArea(final BufferedImage screen) throws Exception {
        final BufferedImage screenCopy = new BufferedImage(screen.getWidth(), screen.getHeight(), screen.getType());
        final JLabel screenLabel = new JLabel(new ImageIcon(screenCopy));
        JScrollPane screenScroll = new JScrollPane(screenLabel);

        screenScroll.setPreferredSize(new Dimension((int)(screen.getWidth()/2), (int)(screen.getHeight()/2)));

        JPanel panel = new JPanel(new BorderLayout());
        panel.add(screenScroll, BorderLayout.CENTER);

        final JLabel selectionLabel = new JLabel("Draw a rectangle");
        panel.add(selectionLabel, BorderLayout.SOUTH);
        repaint(screen, screenCopy);
        screenLabel.repaint();

        screenLabel.addMouseMotionListener(new MouseMotionAdapter() {

            @Override
            public void mouseMoved(MouseEvent me) {
                start = me.getPoint();
                repaint(screen, screenCopy);
                selectionLabel.setText("Start Point: " + start);
                screenLabel.repaint();
            }

            @Override
            public void mouseDragged(MouseEvent me) {
                end = me.getPoint();
                captureRect = new Rectangle(start, new Dimension(end.x-start.x, end.y-start.y));
                try {
                    paintFinalImage(new BufferedImage((int)screenCopy.getGraphics().getClipBounds(captureRect).getWidth()+1,
                            (int)screenCopy.getGraphics().getClipBounds(captureRect).getHeight()+1, screen.getType()));
                } catch (Exception e) {
                    e.printStackTrace();
                }
                repaint(screen, screenCopy);
                screenLabel.repaint();
                selectionLabel.setText("Rectangle: " + captureRect);
            }
        });
        JOptionPane.showMessageDialog(null, panel, "Select your image", JOptionPane.OK_OPTION, new ImageIcon(""));
        uploadImage(screenShot);
        System.out.println("Final rectangle: " + screenCopy.getGraphics().getClipBounds(captureRect));
    }

    public void paintFinalImage(BufferedImage image) throws Exception {
        screenShot = new BufferedImage(image.getWidth(), image.getHeight(), image.getType());
        Graphics2D g = screenShot.createGraphics();
        g.drawImage(image, 0, 0, null);
        g.dispose();
    }

    public void repaint(BufferedImage orig, BufferedImage copy) {
        Graphics2D g = copy.createGraphics();
        g.drawImage(orig, 0, 0, null);
        if (captureRect != null) {
            g.setColor(Color.BLACK);
            g.draw(captureRect);
        }
        g.dispose();
    }

    public void uploadImage(BufferedImage image) throws Exception {
        String IMGUR_POST_URI = "http://api.imgur.com/2/upload.xml";
        String IMGUR_API_KEY = API_KEY;
        String readLine = null;
        try {
            ByteArrayOutputStream outputStream = new ByteArrayOutputStream();
            ImageIO.write(image, imageType.getSelectedItem().toString(), outputStream);
            URL url = new URL(IMGUR_POST_URI);

            String data = URLEncoder.encode("image", "UTF-8") + "=" + URLEncoder.encode(Base64.encodeBase64String(outputStream.toByteArray()).toString(), "UTF-8");
            data += "&" + URLEncoder.encode("key", "UTF-8") + "=" + URLEncoder.encode(IMGUR_API_KEY, "UTF-8");

            URLConnection urlConnection = url.openConnection();
            urlConnection.setDoOutput(true);
            OutputStreamWriter wr = new OutputStreamWriter(urlConnection.getOutputStream());
            wr.write(data);
            wr.flush();
            InputStream inputStream;
            if (((HttpURLConnection) urlConnection).getResponseCode() == 400) {
                inputStream = ((HttpURLConnection) urlConnection).getErrorStream();
            } else {
                inputStream = urlConnection.getInputStream();
            }
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
            String line;
            while ((line = reader.readLine()) != null) {
                readLine = line;
            }
            wr.close();
            reader.close();
        } catch(Exception e){
            e.printStackTrace();
        }
        String URL = readLine.substring(readLine.indexOf("<original>") + 10, readLine.indexOf("</original>"));
        System.out.println(URL);
        Toolkit.getDefaultToolkit().beep();
        StringSelection stringSelection = new StringSelection(URL);
        Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String command = e.getActionCommand();
        System.out.println(command);
        if (command.equalsIgnoreCase("open")) {
            frame.setVisible(true);
        } else if (command.equalsIgnoreCase("exit")) {
            System.exit(-1);
        } else if (command.equalsIgnoreCase("screenshot")) {
            try {
                final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
                final BufferedImage screen = robot.createScreenCapture(new Rectangle(screenSize));
                selectArea(screen);
            } catch (Exception e1) {
                e1.printStackTrace();
            }
        }
    }

    @Override
    public void itemStateChanged(ItemEvent e) {
        System.out.println(e.getItem() + ", " +e.getStateChange());
        String itemChanged = e.getItem().toString();
        if (itemChanged.equalsIgnoreCase("run on start-up")) {
            //TODO
        } else if (itemChanged.equalsIgnoreCase("hide when minimized")) {
            if (e.getStateChange() == ItemEvent.DESELECTED) {
                hideWhenMinimized = false;
            } else if (e.getStateChange() == ItemEvent.SELECTED) {
                hideWhenMinimized = true;
            }
        }
    }

    @Override
    public void keyTyped(KeyEvent e) {
        System.out.println("KeyTyped: "+e.getKeyCode());
    }

    @Override
    public void keyPressed(KeyEvent e) {
    }

    @Override
    public void keyReleased(KeyEvent e) {
    }

    @Override
    public void nativeKeyPressed(NativeKeyEvent e) {
    }

    @Override
    public void nativeKeyReleased(NativeKeyEvent e) {
        System.out.println("KeyReleased: "+e.getKeyCode());
        System.out.println(KeyEvent.getKeyText(e.getKeyCode()));
        if (e.getKeyCode() == 154) {
            try {
                final Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
                final BufferedImage screen = robot.createScreenCapture(new Rectangle(screenSize));
                selectArea(screen);
                frame.setVisible(true);
            } catch(Exception e1) {
                e1.printStackTrace();
            }
        }
    }

    @Override
    public void nativeKeyTyped(NativeKeyEvent e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:21:09.390

我建议你简化你的问题来解决它。创建一个小的可编译和可运行程序，它没有当前代码的所有包袱，但其唯一目标是显示图像，并让用户选择该图像的子部分。然后，如果您的尝试失败，您可以在此处发布您的尝试，我们实际上可以运行它并理解它，并希望能够修复它。

例如，这里有一小段可编译和可运行的代码，它使用 MouseListener 来选择图像的一小部分。也许你可以从中得到一些想法：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;

@SuppressWarnings("serial")
public class ImagePlay extends JPanel {
   public static final String IMAGE_PATH = "http://upload.wikimedia.org/wikipedia/" +
        "commons/thumb/3/39/European_Common_Frog_Rana_temporaria.jpg/" +
        "800px-European_Common_Frog_Rana_temporaria.jpg";
   private static final Color RECT_COLOR = new Color(180, 180, 255);
   private BufferedImage img = null;
   Point p1 = null;
   Point p2 = null;

   public ImagePlay() {
      URL imgUrl;
      try {
         imgUrl = new URL(IMAGE_PATH);
         img = ImageIO.read(imgUrl );
         ImageIcon icon = new ImageIcon(img);
         JLabel label = new JLabel(icon) {
            @Override
            protected void paintComponent(Graphics g) {
               super.paintComponent(g);
               myLabelPaint(g);
            }
         };

         setLayout(new BorderLayout());
         add(new JScrollPane(label));

         MouseAdapter mAdapter = new MyMouseAdapter();
         label.addMouseListener(mAdapter);
         label.addMouseMotionListener(mAdapter);

      } catch (MalformedURLException e) {
         e.printStackTrace();
      } catch (IOException e) {
         e.printStackTrace();
      }
   }

   private void myLabelPaint(Graphics g) {
      if (p1 != null && p2 != null) {
         int x = Math.min(p1.x, p2.x);
         int y = Math.min(p1.y, p2.y);
         int width = Math.abs(p1.x - p2.x);
         int height = Math.abs(p1.y - p2.y);
         g.setXORMode(Color.DARK_GRAY);
         g.setColor(RECT_COLOR);
         g.drawRect(x, y, width, height);
      }
   }

   private class MyMouseAdapter extends MouseAdapter {

      @Override
      public void mousePressed(MouseEvent e) {
         p1 = e.getPoint();
         p2 = null;
         repaint();
      }

      @Override
      public void mouseDragged(MouseEvent e) {
         p2 = e.getPoint();
         repaint();
      }

      @Override
      public void mouseReleased(MouseEvent e) {
         p2 = e.getPoint();
         repaint();

         int x = Math.min(p1.x, p2.x);
         int y = Math.min(p1.y, p2.y);
         int width = Math.abs(p1.x - p2.x);
         int height = Math.abs(p1.y - p2.y);
         BufferedImage smlImg = img.getSubimage(x, y, width, height);
         ImageIcon icon = new ImageIcon(smlImg);
         JLabel label = new JLabel(icon);
         JOptionPane.showMessageDialog(ImagePlay.this, label, "Selected Image", 
               JOptionPane.PLAIN_MESSAGE);         
      }
   }

   private static void createAndShowGui() {
      ImagePlay mainPanel = new ImagePlay();

      JFrame frame = new JFrame("ImagePlay");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

它使用在线获取的公开可用图像，添加到 JLabel 的 MouseListener，并且 JLabel 的`paintComponent(...)`方法被覆盖，以便显示来自 MouseListener/Adapter 的指南。它通过 BufferedImage 的方法创建子图像`getSubimage(...)`，然后将其显示在 JOptionPane 中，但如果需要保存图像将是微不足道的。

# xcode4.3 - “未分类”Xcode 错误

> ID：11111373
> 
> 赞同：0
> 
> 时间：2012-06-20T00:37:50.837
> 
> 标签：xcode4.3

我遇到了这个 WEIRD Xcode 错误 - 未分类错误。它似乎在寻找一个不存在的文件。问题是我在我的项目中没有看到对该文件的任何引用。

Xcode 还有其他地方保存其项目文件引用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T08:37:40.980

构建阶段 > 复制捆绑资源

# security - 暴露给不受信任的用户时，Fiddler 不是安全隐患吗？

> ID：11111380
> 
> 赞同：0
> 
> 时间：2012-06-20T00:39:10.007
> 
> 标签：security, proxy, fiddler

Fiddler 在将客户端上传的所有数据发送到服务器之前对其进行缓冲。这意味着，如果您尝试上传 2 GB 的文件，Fiddler 将尝试在将整个内容发送到服务器之前将其缓冲在 ram 中。这是否意味着将此代理服务器暴露给不受信任的用户存在安全风险？恶意用户所要做的就是发送大请求以消耗服务器的所有内存并将其关闭。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:42:20.607

为什么客户端中的缓冲区会用完服务器中的所有内存？它看起来就像客户端非常快速地发送了大量数据一样，如果没有像 Fiddler 提供的缓冲区，它可以很容易地做到这一点。

恶意用户可以在没有 Fiddler 帮助的情况下发送非常大的请求，它不会改变客户端的功能。

# php - PHP试图添加发送附件到工作联系我们表格的能力

> ID：11111382
> 
> 赞同：0
> 
> 时间：2012-06-20T00:39:13.747
> 
> 标签：php, email, attachment, email-attachments

我有一个朋友让我修改她网站的联系表格以请求电话号码以及添加照片附件的能力。我已经添加了通过电子邮件请求和发送电话号码所需的代码，但是添加附加照片文件的功能超出了我目前的知识范围。有人可以看一下代码并告诉我如何添加将文件附加到消息的功能吗？我要做的就是在当前消息字段下方添加它，但事实证明它比我预期的要复杂。由于我尝试的所有内容都破坏了当前表单，因此我删除了添加附件的代码尝试，并且我正在发布当前工作的代码。我希望对 php 有更好理解的人可以帮助我们解决这个问题。

```
 <?php
      //set the level of error reporting
        error_reporting(E_ALL & ~E_NOTICE & ~E_DEPRECATED);  

      // Set-up these 3 parameters
      $to = 'any@somewhere.net';
      $subject = 'Question from The website';
      $contact_submitted = 'Your message has been sent.';

      function email_is_valid($email) {
        return preg_match('/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i',$email);
      }
      if (!email_is_valid($to)) {
        echo '<p style="color: red;">You must set-up a valid (to) email address before this contact page will work.</p>';
      }
      if (isset($_POST['contact_submitted'])) {
        $return = "\n\r";
        $youremail = trim(htmlspecialchars($_POST['your_email']));
        $yourname = stripslashes(strip_tags($_POST['your_name']));
        $yourphone = trim(htmlspecialchars($_POST['your_phone']));
        $yourmessage = stripslashes(strip_tags($_POST['your_message']));
        $contact_name = "Name: ".$yourname;
        $contact_email = "Email Address: ".$youremail;
        $contact_phone = "Phone: ".$yourphone;
        $message_text = "Message: ".$yourmessage;
        $user_answer = trim(htmlspecialchars($_POST['user_answer']));
        $answer = trim(htmlspecialchars($_POST['answer']));
        $message = $contact_name . $return . $contact_email . $return . $contact_phone . $return . $return . $message_text;
        $headers = "From: ".$youremail;
        if (email_is_valid($youremail) && !eregi("\r",$youremail) && !eregi("\n",$youremail) && $yourname != "" && $yourphone != "" && $yourmessage != "" && substr(md5($user_answer),5,10) === $answer) {
          mail($to,$subject,$message,$headers);
          $yourname = '';
          $youremail = '';
          $yourphone = '';
          $yourmessage = '';
          echo '<p style="color: blue;">'.$contact_submitted.'</p>';
        }
        else echo '<p style="color: red;">Please enter your name, a valid email address, your message and the answer to the simple maths question before sending your message.</p>';
      }
      $number_1 = rand(1, 9);
      $number_2 = rand(1, 9);
      $answer = substr(md5($number_1+$number_2),5,10);
    ?>
    <form id="contact" action="contact.php" method="post">
      <div class="form_settings">
        <p><span>Name:</span><input class="contact" type="text" name="your_name" value="<?php $yourname; ?>" /></p>
        <p><span>Email Address:</span><input class="contact" type="text" name="your_email" value="<?php $youremail; ?>" /></p>
        <p><span>Phone Number:</span><input class="contact" type="text" name="your_phone" value="<?php $yourphone; ?>" /></p>
        <p><span>Message:</span><textarea class="contact textarea" rows="1" cols="50" name="your_message"><?php $yourmessage; ?></textarea></p>
        <p style="line-height: 1.7em;">To help prevent spam, please enter the answer to this question:</p>
        <p><span><?php echo $number_1; ?> + <?php echo $number_2; ?> = ?</span><input type="text" name="user_answer" /><input type="hidden" name="answer" value="<?php echo $answer; ?>" /></p>
        <p style="padding-top: 15px"><span>&nbsp;</span><input class="submit" type="submit" name="contact_submitted" value="send" /></p>
      </div>
    </form> 
```

如果有人能弄清楚这一点，我将永远感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:43:54.497

您将遇到的第一个问题是您将无法上传任何文件而不指示

```
enctype="multipart/form-data" 
```

在表单标签内。

其余信息，您可以参考本[教程](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)

# cakephp - 模拟对象中的CakePHP“with”方法不起作用

> ID：11111383
> 
> 赞同：3
> 
> 时间：2012-06-20T00:40:07.380
> 
> 标签：cakephp, authentication, mocking, phpunit

我正在尝试使用 CakePHP 2.2 RC1 测试我的应用程序，在我的控制器的某些操作中，我需要 Auth 对象的一个​​信息，在我的测试中，我为 Auth 组件创建了一个模拟对象，但是当我**用**我的模拟调用该方法时对象变得无效，当我不放这个时，一切正常。

在模拟对象下方不起作用

```
$this->controller->Auth
    ->staticExpects($this->any())
    ->method('user')
    ->with('count_id')
    ->will($this->returnValue(9)); 
```

谢谢你们的关注。

--

**编辑**

在我的测试用例的完整代码之上，这是一个非常简单的测试。

```
class TagsControllerTest extends ControllerTestCase {
    public function testView(){
        $Tags = $this->generate('Tags', array(
            'components' => array(
                'Session',
                'Auth' => array('user')
            )
        ));
        $Tags->Auth->staticExpects($this->any())
            ->method('user')
            ->with('count_id')
            ->will($this->returnValue(2));

        $result = $this->testAction('/tags/view');
        $this->assertEquals($result, 2);
    }
} 
```

而我在 Tag 控制器中的操作代码，这没有更多（用于测试目的）它们返回带有 count_id 作为参数的用户对象。

```
public function view(){
    return $this->Auth->user('count_id');
} 
```

运行测试我收到了这条消息：

> 方法名称的期望失败等于调用 0 次或多次时 调用 AuthComponent::user(null) 的参数 0 与期望值不匹配。无法断言 null 与预期的“count_id”匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:42:11.097

我面临着同样的问题，我无法通过提供的解决方案来解决。

解决方案是使用 staticExpects() 而不是 expects() 因为 user 是一个静态函数。

```
$batches->Auth->staticExpects($this->once())->method('user') 
        ->with('id')
        ->will($this->returnValue(1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T11:16:53.553

查看`AuthComponent`代码后，我认为问题在于您没有模拟整个组件*或*没有模拟`_getUser()`方法。不要忘记：**你没有嘲笑的方法是*真正的*方法！**

如果您查看代码，您会看到`user()`被调用的代码，而被调用的代码`_getUser()`又被调用`startup()`。

有两种方法可以解决这个问题，第一种是mock整个`AuthComponent`：

```
$Tags = $this->generate('Tags', array(
        'components' => array(
            'Session',
            'Auth' /* no methods */
        )
    )); 
```

或模拟`_getUser()`除了`user()`：

```
$Tags = $this->generate('Tags', array(
        'components' => array(
            'Session',
            'Auth' => array('user', '_getUser')
        )
    )); 
```

希望这应该可以解决您的问题。

# html - jwplayer 设置为对象（不带 javascript）但带有播放列表

> ID：11111384
> 
> 赞同：1
> 
> 时间：2012-06-20T00:40:07.910
> 
> 标签：html, video, jwplayer, playlist

我想用播放列表设置 jwplayer 而没有 javascript。我使用“对象”嵌入选项将播放器添加到页面（没有 javascript）。是否可以在没有“JW Embedder”javascript 且无需向服务器额外请求 rss 播放列表文件的情况下将播放列表“注入”到 jwplayer？也许一些`flashVars`？或带有曲目列表的特殊`<div>`标签或其他标签？`html`

# android - 需要帮助设计一个 android UI

> ID：11111391
> 
> 赞同：2
> 
> 时间：2012-06-20T00:41:37.523
> 
> 标签：android, user-interface

我正在尝试在 Android 中设计一个像这样的屏幕：

![示例图像](../Images/e49660233daf515b0229f8397fbeac5b.png)

我在单独的 PNG 文件中拥有所有按钮、背景和图像，但我无法完成！我不知道如何将两个按钮放在背景中，而且我也遇到了与边框的距离问题。这是我到目前为止所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:background="@drawable/fundo_tela">
    <ImageView
    android:id="@+id/imgtopo"
    android:src="@drawable/topo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    />
  <TextView  
        android:layout_width="fill_parent"  
        android:layout_height="wrap_content"  
        android:text="@string/telaInicio"  
        android:layout_gravity="center"  
        android:gravity="center"  
        android:textColor="#fff"  
        android:textSize="20dp" /> 

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
                android:layout_marginTop="5dp"
                        android:layout_marginBottom="5dp"
        android:background="@drawable/fundoBotoes" >

<Button  android:id="@+id/Camera" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:background="@color/cameraBselector">
</Button>
<Button 
    android:id="@+id/Galeria" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:background="@color/galleryBselector">
</Button>
</LinearLayout>
<Button 
    android:id="@+id/Pedidos" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:background="@color/pedidosBselector"
    android:layout_marginTop="15dp"
    android:layout_marginBottom="15dp"
    >
</Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:17:03.043

当您说“两个按钮”时，我认为您正在谈论的是图库和相机按钮。

如果我理解正确你可以做这样的事情（我没有正确地测试它，所以你可能想要做一些额外的改变）

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:orientation="vertical"
    android:background="#000000"
    android:gravity="center"
>
    <Button  
        android:id="@+id/Camera" 
        android:layout_width="wrap_content"  
        android:layout_height="wrap_content" 
        android:layout_margin="5sp"
        android:background="@color/cameraBselector"
    >
    </Button>
    <View
        android:layout_width="fill_parent"
        android:layout_height="1dip"
        android:layout_margin="3sp"
        android:background="#41383C"
    />
    <Button 
        android:id="@+id/Galeria" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_margin="3sp"
        android:background="@color/galleryBselector"
    />

</LinearLayout> 
```

如果我误解了什么，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:18:18.157

尝试这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/fundo_tela"
    android:layout_weight="100"

    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="20"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"

        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imgtopo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/topo" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:gravity="center"
            android:text="@string/telaInicio"
            android:textColor="#fff"
            android:textSize="20dp" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="0px"
        android:layout_weight="60"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/fundoBotoes"
        android:orientation="vertical" >

        <Button
            android:id="@+id/Camera"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@color/cameraBselector" >
        </Button>

        <Button
            android:id="@+id/Galeria"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@color/galleryBselector" >
        </Button>
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
                android:layout_height="0px"
        android:layout_weight="20"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:layout_marginTop="5dp"

        android:orientation="vertical" >

        <Button
            android:id="@+id/Pedidos"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dp"
            android:layout_marginTop="15dp"
            android:background="@color/pedidosBselector" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

仅将第一个图像视图和文本分组到 Linearlayout 中，并将最后一个按钮分组到其他 LinearLayout 中。权重属性像百分比一样工作，这个例子是 20% 的顶部，60% 的主体和 20% 的页脚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T03:49:11.583

确实看起来正是你想要的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imgtopo"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/darker_gray"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:paddingTop="10dp"
        android:text="Selecione a opção desejada:"
        android:textColor="#fff"
        android:textSize="18dp"
        android:textStyle="bold" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"
        android:layout_weight="0.90"
        android:background="@android:color/black"
        android:gravity="center"
        android:orientation="vertical" >

        <Button
            android:id="@+id/ButtonCamera"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.50"
            android:layout_margin="10dp"
            android:drawablePadding="-5sp"
            android:drawableTop="@android:drawable/ic_menu_camera"
            android:text="Tirar Foto"
            android:textColor="#FFFFFF" />

        <Button
            android:id="@+id/ButtonSlideShow"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.50"
            android:layout_margin="10dp"
            android:drawablePadding="-5sp"
            android:drawableTop="@android:drawable/ic_menu_slideshow"
            android:text="Galeria de Foto"
            android:textColor="#FFFFFF" />
    </LinearLayout>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Meus Pedidos" />
</LinearLayout> 
```

# php - Using Smarty 3, Code Igniter 2, and HMVC together with smarty's inheritance?

> ID：11111396
> 
> 赞同：0
> 
> 时间：2012-06-20T00:42:20.647
> 
> 标签：php, codeigniter, extend, hmvc, smarty3

I am using Code Igniter, The [HMVC library](http://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc), and Smarty with [this library](http://ilikekillnerds.com/2010/11/using-smarty-3-in-codeigniter-2-a-really-tiny-ci-library/).

Smarty is working fine by default, however if I try to use smarty's inheritance feature ( `{extends file="master.tpl"}`) then we run into an issue.

The extends feature does not look in the module views folder for the extended file (in the above's case `master.tpl`), instead it only looks in the `application/views/` folder and throws an error if it cannot find it.

I could add `APPPATH."modules/smartytest/views"` to the `$config['template_directory']` array in the smarty config file. but that throws an error for each item in the array it checks first for the file. `filemtime(): stat failed for application/views/master.tpl`

and that has the added issue of, if I have three modules all the the array and the modules all have a master.tpl then no matter what module I call the extend from it will load the first one found.

So, is there a way to get smarty's extend function to behave nicely with the HMVC modules?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:27:25.900

Ah, found a working solution,

in `My_Parser.php` edit the block at line 30 so it reads:

```
// Modular Separation / Modular Extensions has been detected
if (method_exists( $this->CI->router, 'fetch_module' ))
{
    $this->_module  = $this->CI->router->fetch_module();
    //add the current module view folder as a template directory
    if ($this->_module !== '')
        $this->CI->smarty->addTemplateDir(APPPATH."modules/".$this->_module.'/views');
} 
```

The one drawback of this method is that smarty will look in your application/views folder before the module views folder. if someone knows a solution to that then it would be fantastic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T19:13:14.437

The problem is that CI is not checking error_reporting() returns 0, because Smarty is using the @ control operator: So add the line at the top of the function "_exception_handler":

`if (error_reporting() == 0) return;`

To the "Common.php" file in the "_exception_handler" function (line 469), or create your own function with the same name before calling "CodeIgniter.php" in the index.php file.

Best!

# php - 网站开发：建筑

> ID：11111404
> 
> 赞同：0
> 
> 时间：2012-06-20T00:44:02.570
> 
> 标签：php, mysql

我正在建立一个站点来展示我的漫画——但我已经阅读了一些教程（[Elated.com CMS 设计与图像](http://www.elated.com/articles/add-image-uploading-to-your-cms/)），这些教程提倡使用数据库来存储文件扩展名，并使用更面向对象的方法。我现在没有这样做，因为我没有看到需要，因为我通过 FTP 管理文件，并且用户不会添加内容。所以，在我继续之前，我希望我目前的架构还可以。

现在，我的页面从文件系统中获取图像，如下所示：

```
<?php
$dir = "../images/*";
foreach(glob($dir) as $image) {
$total = count(glob($dir . "*"));
?>
        <span class="comicBG"><a href="./viewComic.php?image=<?php echo $image ?>"><img src="./thumbnailer.php?img=<?php echo $image ?>&mw=&mh=" /></a></span>

<?php } ?> 
```

单击漫画会在模板上显示该漫画：

```
<?php $myImage = $_GET['image']; ?>

 <center><img src="<?php echo  $myImage  ?>" /></center> 
```

我可以继续走这条路吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:47:55.747

你绝对可以这样开始，但我想这一切都取决于你的最终目标是什么。如果您只是希望能够将漫画上传到 /images/ 目录并让脚本显示缩略图和链接，那么您很好……但是如果您认为您需要的功能比我建议的更多，至少可以工作从数据库。例如，存储每个漫画缩略图被点击多少次的信息，或者可能是访问和查看漫画的人的屏幕分辨率，这样您就可以相应地调整漫画的大小。只是几个想法，但可能值得你花时间。

**编辑：**这是一个示例表结构，只是为了给您一些想法。

```
cartoon_id           int(11)         auto-increment    primary
title                varchar(32)
filename             varchar(32)
description          varchar(256)
num_views            int(11)
last_view_dt         datetime
order                tinyint(3) 
```

您可能会喜欢并设置第二个表，将视图信息插入（日期、时间、ip_address、comic 等），并可以生成一些相当有趣的统计数据。

样本数据如下：

```
cartoon_id:          1    (would be generated automatically)
title:               "Awesome Man!"
filename:            "images/cartoons/awesomeman1.jpg"
description:         "This was my first cartoon, created in 2002, etc..."
num_views:           2300  (this would setup to just auto increment when viewed)
last_view_dt         2012-07-21
order                1     (could use this to determine the order in which comics are displayed on the thumbnail page) 
```

可以继续下去，但我想你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:51:17.500

到目前为止看起来还不错，您可能想`$_GET['image']`在使用它之前验证它的内容，并希望在输出它时注意`$image`并`$myImage`正确编码。所以基本上照顾输出和输入多一点。

此外，您不使用该`$total`变量，因此不需要创建它。

```
<?php
$dir = "../images/*";
$images = glob($dir);
foreach ($images as $image) {    
    $linkUrl = sprintf('./viewComic.php?image=%s', urlencode($image));
    $thumbUrl = sprintf('./thumbnailer.php?img=%s&mw=&mh=', urlencode($image))
    printf('<span class="comicBG"><a href="%s"><img src="%s" /></a></span>', $linkUrl, $thumbUrl);
}
?> 
```

对于输入验证，您应该定义图像名称中允许的一组安全字符，然后对其进行检查：

```
<?php
$image = $_GET['image']; 
if (!preg_match('/^[a-z0-9_-]+\.jpg$/')) {
    header("HTTP/1.1 403 Forbidden");
    echo 'Forbidden'; 
    return;
}
?>
<center><img src="<?php echo htmlspecialchars($image) ?>" /></center> 
```

# django - Django 自定义更新模型表单 - 显示相关模型的选定字段而不是外键 id。

> ID：11111409
> 
> 赞同：1
> 
> 时间：2012-06-20T00:44:51.250
> 
> 标签：django, django-models, django-forms, django-views

我的问题是：有没有办法创建自定义模型表单，该表单将使用相关模型中的指定字段而不是相关模型的 id？

澄清一下，如果我有以下两个模型：

```
class ModelOne(models.Model):
  id = models.AutoField(primary_key = True)
  name = models.CharField(unique = True, blank = False, null = False)

class ModelTwo(models.Model):
  id = models.AutoField(primary_key = True)
  parent = models.ForeignKey(ModelOne, blank = False, null = False)
  attribute_1 = models.CharField(blank = False, null = False)
  attribute_2 = models.IntegerField(blank = False, null = False) 
```

现在，如果我使用 ModelForm 在 ModelTwo 上创建一个 UpdateView，那么父字段将预填充来自 ModelOne 的相应 id。但是我希望它显示 ModelOne 的 name 属性，然后在表单提交时将唯一名称（ModelOne）解析为 ModelOne 的相应实例。我想这样做的原因是，我相信从用户的角度来看，处理 ModelOne 的名称（更新 ModelTwo 实例时）而不是它的“id”更直观。

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:59:48.323

首先，尝试在 ModelOne 上定义**unicode方法。**它可能不适用于解决方案，但值得拥有 - 它将驱动表单选择小部件中的文本值......

```
def __unicode__(self):
    '''Warning: be careful not to use related objects here,
    could cause unwanted DB hits when debugging/logging
    '''
    return self.name 
```

如果这还不够，这样的事情可能会起作用（它改编自我拥有的更新用户名附加到个人资料的表格）......

```
class M2Form(forms.ModelForm):
    m1_name = forms.CharField()

    class Meta:
        model = ModelTwo

    def save(self, *args, **kw):
        # Update your name field here, something like
        if self.cleaned_data.get('m1_name'):
            self.instance.parent = ModelOne.objects.get(name=self.cleaned_data.get('m1_name'))
            return super(M2Form, self).save(*args, **kw) 
```

这是未经测试的，您可能需要对其进行调整以验证名称是否存在并确保原始父字段不会出现在表单上。运气好的话，第一个答案涵盖了我认为您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:33:05.510

以 Rog 的回答为起点，深入研究 Django 的一些内部结构，我最终找到了一个可行的解决方案。鉴于我的 Django 知识水平，我想有更好的方法来做到这一点；因此，如果您有其他方法，请添加它。

所以基于以上两种模型，我创建了如下表单类：

```
class CustomForm(forms.ModelForm):
    parent = models.CharField(label='Name')

    class Meta:
       model = ModelTwo
       exclude = ['parent']

    def __init__(self,*args,**kwargs):
       # The line of code below is the one that I was looking for. It pre-populates 
       # the "parent" field of the form with the "name" attribute of the related 
       # ModelOne instance.
       kwargs['initial']['parent'] = kwargs['instance'].parent.name
       super(CustomForm,self).__init__(*args,**kwargs)
       # The next line is for convenience and orders the form fields in our desired 
       # order. I got this tip from: 
       # http://stackoverflow.com/questions/913589/django-forms-inheritance-and-order-of-form-fields
       self.fields.keyOrder = ['parent','attribute_1','attribute_2']

    def save(self, *args, **kwargs):
       if self.cleaned_data.get('parent'):
       # This section of code is important because we need to convert back from the 
       # unique 'name' attribute of ModelOne to the corresponding instance so that
       # ModelTwo can be saved. Thanks goes to Rog for this section of code.
           self.instance.parent = ModelOne.objects.get(name=self.cleaned_data.get('parent'))
           return super(CustomForm, self).save(*args, **kwargs) 
```

# php - php：获取 feedburner 提要的内容

> ID：11111410
> 
> 赞同：1
> 
> 时间：2012-06-20T00:44:56.297
> 
> 标签：php, feedburner

我编写了这个函数来解析 html 源代码，但由于某种原因，它不适用于 feedburner 提要。有任何想法吗？

```
$dom = new DOMDocument();
$dom->loadHTMLFile('http://www.killington.com/winter/mountain/conditions');
$xml = simplexml_import_dom($dom);
$snow = $xml->xpath('//td'); 
```

我真正需要做的只是从页面中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:53:28.640

除了这不是一个提要它的网页这一事实之外，不确定问题是什么。也就是说，由于您使用的是 dom 文档，因此没有理由打扰 simplexml，这可能就是问题所在......

```
$dom = new DOMDocument();
$dom->loadHTMLFile('http://www.killington.com/winter/mountain/conditions');
$xpath = new DOMXPath($dom);
$snow = $xpath->query('//td'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:57:00.883

首先，您必须打开提要页面（例如 xml 页面）并检查它是哪种提要：

```
<rss xmlns:feedburner="http://rssnamespace.org/feedburner/ext/1.0" version="2.0"> 
```

然后，你看看这个很好的教程： http: [//net.tutsplus.com/articles/news/how-to-read-an-rss-feed-with-php-screencast/](http://net.tutsplus.com/articles/news/how-to-read-an-rss-feed-with-php-screencast/)你几乎完毕 ：）

# java - 拼出时间

> ID：11111417
> 
> 赞同：2
> 
> 时间：2012-06-20T00:46:03.407
> 
> 标签：java, c++, python, linux, perl

是否有任何库或实用程序可以正式说明时间？

```
Examples:   
5:37 -> five thirty-seven   
2:00 -> two o'clock   
4:05 -> five past four   
12:00 -> noon 
```

如果它还可以拼出日期，则奖励。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:49:43.830

一些。Perl 选项包括[Time::Human](http://p3rl.org/Time%3a%3aHuman)（以及相关的[DateTime::Format::Human](http://p3rl.org/DateTime%3a%3aFormat%3a%3aHuman)）、[Time::Fuzzy](http://p3rl.org/Time%3a%3aFuzzy)和[Time::ProseClock](http://p3rl.org/Time%3a%3aProseClock)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:22:14.933

您可以使用[http://babel.edgewall.org/wiki/Documentation/dates.html#time-delta-formatting](http://babel.edgewall.org/wiki/Documentation/dates.html#time-delta-formatting)格式化时间字符串，然后使用[http://wiki.python.org/moin/Audio](http://wiki.python.org/moin/Audio)进行音频。

# c++ - 多次分叉后无法向父进程发送消息

> ID：11111419
> 
> 赞同：0
> 
> 时间：2012-06-20T00:46:33.917
> 
> 标签：c++, c, linux, pipe

我有一个程序，它分叉出四个进程并调用 execlp() 为孩子运行不同的代码。我给孩子一个数字作为身份证。到目前为止，孩子所做的只是尝试将 id 传递回父进程。管道工作，如果我通过它在父进程中打印出来的流放置一个字符串。但是，当我尝试将 id 作为流的 int 时，它不起作用。在孩子的 fprintf() 和 fflush() 命令之后，我什至没有进入代码行。

我对创建文件描述符的方式进行了一些更改，并为示例添加了更多代码。现在，在孩子身上，我无法创建 FILE* 了。但是，如果我在文件描述符 1 上创建，它会打印到屏幕上。我尝试在文件描述符 3 上创建 out，程序就坐在那里等待来自永远不会出现的孩子的输入。

这是我的父母：

```
Mom::Mom():childCount(0)
{
    pipeCount = fileCount = 0;
    int fd[2];
    srand(time(NULL));

    for(int c=0; c<NUMJOBS; ++c) jobs[c] = newJob();
    //createFileDescriptors(fd);
    ret = pipe(fd);
    if(ret < 0) fatal("Error creating pipes");
    //cout << fd[0] << "\t"  << fd[1] << endl;
    pipes[fileCount++] = fdopen(fd[0], "r");
    fcntl( 3, F_SETFD, 0 );
    //close(fd[1]);
    //for(int c=3; c<FILEDESCRIPTORS; c+=2) pipes[pipeCount++] = fdopen(c, "w");
    createChildren();
    for(int c=0; c<4; c++)
    {
        int tmp = -1;
        //cout << "About to read from children, tmp = " << tmp << endl;
        ret = fscanf(pipes[0], "%d", &tmp);
        //char* buffer = (char*) malloc(80*sizeof(char));
        //char buffer[80];
        //read(3, buffer, 80);
        cout << ret << "\t" << tmp << endl;
        //cout << ret << " " << tmp << endl;
        //free(buffer);
    }
    //sleep(5);
}

/*------------------------------------------------------------------------------
  Create all the children by using fork() and execlp()
  ----------------------------------------------------------------------------*/
void Mom::createChildren()
{
    int fd[2];
    fcntl( fd[IN], F_SETFD, 0 );
    for(int c=0; c<NUMCHILDREN; c++)
    {
        ret = pipe(fd);
        if(ret < 0) fatal("Error creating pipes");
        int pid = fork();
        //cout << pid << endl;
        if(pid == 0)
        {
            setupChild(c, fd);
        }
        else
        {
            //close(fd[1]);

        }
    }
}

/*------------------------------------------------------------------------------
  set up the child and call exec to run ChildMain
  ----------------------------------------------------------------------------*/
void Mom::setupChild(int count, int fd[])
{
    //cout << "Creating child with id: " << count << endl;
    char cnt = '0' + count;
    string id_str (&cnt + '\0');
    fcntl( fd[0], F_SETFD, 0 );
    pipes[fileCount++] = fdopen(fd[1], "w");
    //execlp("ChildMain", "ChildMain",  id_str.c_str(), NULL);
    execlp("ChildMain",  id_str.c_str(), NULL);
} 
```

这是子代码：

```
int main(int argc, char* argv[])
{
    //cout << argv[argc-1] << endl;
    if(argc < 1) fatal("Not enough arguments provided to ChildMain");
    int id = atoi(argv[argc-1]);
    //cout << *argv[1] << " " << id << endl;
    //redirect STDIN and STDOUT
    /*int c_in = dup(0);
    close(0);
    dup((2*id) + 5);
    int c_out = dup(1);
    close(1);
    dup(4);*/
    /////////////////////////////
    //Child kid((int) *argv[1]);
    FILE* out = fdopen(4, "w");
    if(out == NULL)
        cout << "Error opening stream to parent in child: " << id << endl;
    //char childID = '0' + id;
    //char buf[80];
    //strcpy(buf, "Child ");
    //strcat(buf, &childID);
    string buf ("Child");
    //cout << tmp << " " << childID << endl;
    //write(4, buf.c_str(), buf.length()+1);
    //cout << id << endl;
    int ret = fprintf(out, "%d", id);
    fflush(out);
    //fclose(out);
    //cout << id << " " << ret << endl;
    //ch.push_back((char) id);
    //put STDIN and STDOUT back to correct file descriptors
    /*close(1);
    dup(c_out);
    close(0);
    dup(c_in);*/
    ////////////////////////////////////////////////////////
    return 0;
} 
```

我很困惑为什么这适用于第一个孩子，id 为 0，但没有其他孩子。有谁知道我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T12:37:49.557

这是一个关于如何在我的评论中实施建议的小例子：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

int main()
{
    /* Need two sets of pipes: one for child stdin, one for child stdout */
    int pipefds1[2];
    int pipefds2[2];

    pipe(pipefds1);
    pipe(pipefds2);

    int rc = fork();
    if (rc == -1)
        perror("fork");
    else if (rc == 0)
    {
        /* In child */

        /* Close the old stdin and stdout */
        close(STDIN_FILENO);
        close(STDOUT_FILENO);

        /* Create new stdin/stroud from the pipes */
        dup2(pipefds1[0], STDIN_FILENO);
        dup2(pipefds2[1], STDOUT_FILENO);

        /* Close the unneeded pipe handles */
        close(pipefds1[1]);
        close(pipefds2[0]);

        /* Now pass control to the new program */
        execl("/bin/ls", "ls", "-l", "/", NULL);
    }
    else
    {
        /* In parent */

        /* Close the uneeded pipe handles */
        close(pipefds1[0]);
        close(pipefds2[1]);

        /* We want to use stdio functions */
        FILE *fp = fdopen(pipefds2[0], "r");

        /* Read all from the child */
        char buffer[128];
        while (fgets(buffer, sizeof(buffer), fp))
        {
            printf("Input from child: %s\n", buffer);
        }

        fclose(fp);

        /* Wait for child to exit */
        wait(NULL);
    }

    return 0;
} 
```

希望这足以让您继续发展。

错误处理不存在，但经过测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:43:50.263

`execlp(3)`期望以空字符结尾的字符串，因为它是 args。`&cnt`不会被空终止。

简单修复：

```
void Mom::setupChild(int count, int fd[])
{
    char cnt[2];
    cnt[0] = '0' + count;
    cnt[1] = '\0';
    fcntl( fd[(2*count)+3], F_SETFD, 0 );
    execlp("ChildMain", "ChildMain",  &cnt, NULL);
} 
```

不过，这并不能扩展到 10 个进程，所以我可能会使用一个缓冲区，然后将 sprintf() 放入其中。

# android - 运行时记录

> ID：11111426
> 
> 赞同：1
> 
> 时间：2012-06-20T00:47:21.990
> 
> 标签：android

有谁知道如何连续捕获日志并更新列表？我认为

```
Process process = Runtime.getRuntime().exec("logcat -d"); 
```

将读取日志缓冲区的全部内容并返回。但是有没有办法连续读取日志缓冲区并更新列表视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:27:12.527

我相信这是唯一的方法。不要在生产应用程序中这样做......它会很快耗尽你的电池寿命。

```
Process process = Runtime.getRuntime().exec("logcat logcat -b events");
BufferedReader bufferedReader = 
    new BufferedReader(new InputStreamReader(process.getInputStream()));

String line = bufferedReader.readLine();

while (line != null) {
    // do something with the line

    line = bufferedReader.readLine();
} 
```

# ruby-on-rails - 在 Windows 7 上安装 RubyMine 时出现持续错误：“在任何源路径中都找不到“README”。”

> ID：11111427
> 
> 赞同：0
> 
> 时间：2012-06-20T00:47:55.380
> 
> 标签：ruby-on-rails, windows-7, rubymine

我安装了 ruby​​ 1.9.3 w/rubyinstaller-1.9.3-p194.exe，然后按照说明安装了 RubyMine：

[http://www.jetbrains.com/ruby/quickstart/index.html](http://www.jetbrains.com/ruby/quickstart/index.html)

和

[http://rubyinstaller.org/](http://rubyinstaller.org/)

我已经安装了适用于 Windows 的 git hub，我不知道这是否会导致问题。

我还安装了 ruby​​ 和 rails 几次，但我查看了 PATH 环境变量中是否存在任何不再存在的安装并删除它们（在已经出现此错误之后），这没有帮助。

这是我在 RubyMine 中选择的设置。

![设置](../Images/7860c1d210f7c195d31caa27d4ca5068.png)

错误信息：

"C:\Ruby193\bin\ruby.exe -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) C:\Ruby193\bin/rails *3.2.6* new "D: /Program Files (x86)/Git/Rails App/asfasf" --skip-test-unit --javascript=jquery --skip --database=postgresql 存在 D:/Program Files (x86)/Git/Rails App/asfasf在您的任何源路径中都找不到“README”。您当前的源路径是：C:/Ruby193/lib/ruby/gems/1.9.1/gems/railties-3.2.6/lib/rails/generators/rails/应用程序/模板

进程以退出代码 1 结束"

![错误](../Images/bda536d747c1a876bde0f198cd9c5132.png)

如果我感到愤怒/沮丧（我多次编辑以将其删除），我深表歉意，因为我一直试图让 RubyMine 在 Windows 7 或 Ubuntu 12.04 上工作，但都没有成功。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:15:03.830

我继续在网上搜索信息，并记得以前在 Windows 上安装 Rails 的地方，由于某些原因，文件中不能有空格。

长话短说：确保您的路径名称中没有空格，因为它会破坏 ruby​​mine 或 rails 或沿途的东西。

将我的项目文件夹更改为没有空格的目标解决了这个问题。

# c# - 如何在 Metro 应用程序中刷新 UI？

> ID：11111432
> 
> 赞同：0
> 
> 时间：2012-06-20T00:48:08.457
> 
> 标签：c#, xaml, windows-runtime, microsoft-metro, winrt-xaml

我在 XAML 页面中使用此代码：

```
<TextBox ItemsSource="{Binding Posters, Converter={StaticResource collectionToFirstElementConverter}, Mode=TwoWay}" /> 
```

海报是一个 ObsevableCollection，我正在使用一个转换器来获取集合并获取它的第一个元素。

当我使用异步过程时，文本框接收对象，这个没有元素（Count=0），并调用转换器。

每次属性添加新元素时，我都尝试更新文本框，但不调用转换器。

我记得在 Silverlight 或 WPF 中，存在 SourceTrigger 或 UpdatePropertyChanged，但在 WinRT 中我看不到这种模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T04:53:24.453

实现这一目标的最简单方法是相应地修改包含该`Posters`属性的视图模型。我可以看到两种方法（都假设您的视图模型实现`INotifyPropertyChanged`）：

*   将事件处理程序添加到`Posters.CollectionChanged`并在其中引发`INotifyPropertyChanged.PropertyChanged`.`Posters`
*   添加另一个属性`FirstPoster`，返回 中第一个元素的值`Posters`。在视图模型中添加一个事件处理程序，`Posters.CollectionChanged`并在其内部`INotifyPropertyChanged.PropertyChanged`为`FirstPoster`. 这样你甚至不需要转换器。

我个人更喜欢第二种方法。

# java - 从java类运行geb测试

> ID：11111433
> 
> 赞同：2
> 
> 时间：2012-06-20T00:48:09.807
> 
> 标签：java, groovy, geb

我最近偶然发现了[geb](http://www.gebish.org/)，它看起来是在我们的 Web 应用程序上执行集成测试的好方法。我们的平台都是基于 java 的，并且从阅读中

> “Geb 通过与流行的测试框架（例如 ...JUnit、TestNG...）集成，为功能性 Web 测试提供一流的支持。”

我认为从 java 类执行测试会很容易（testng 测试？）。

我是 groovy 和 geb 的新手。

到目前为止，我已经在我的 pom 中包含了 geb-testng 和 groovy：

```
<dependency>
    <groupId>org.codehaus.geb</groupId>
    <artifactId>geb-testng</artifactId>
    <version>0.7.0</version>
</dependency>
<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy</artifactId>
    <version>1.8.6</version>
</dependency> 
```

...但是我找不到任何创建测试并从 java 类运行它的示例。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T17:48:48.713

Geb 是为 Groovy 代码设计的，并且只能用于 Groovy 代码。这主要是由于其 API 的动态特性。您*可以*选择使用哪个测试框架（JUnit、TestNG、Spock 等）。由于 Geb 本身只是一个库，因此它也可以在没有测试框架的情况下使用，例如自动化与网站的交互。

如果您需要坚持使用 Java，则必须使用 Selenium2 之类的东西，这是 Geb 在幕后使用的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-20T15:16:03.150

我在搜索 Geb-TestNG 示例时偶然发现了这个问题。这对我有用：

```
import geb.testng.GebTest
import org.testng.annotations.Test

class GroovyYourTestClass extends GebTest {

    @Test
    void "should test something"() {
        to YourPageObject
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T09:16:55.320

如果您使用 Java，Geb 的最佳替代品是恕我直言 Selenide ( [http://selenide.org](http://selenide.org) )

快速入门指南中的示例：

```
@Test
public void userCanLoginByUsername() {
  open("/login");
  $(By.name("user.name")).setValue("johny");
  $("#submit").click();
  $(".loading_progress").should(disappear); // Waits until element disappears
  $("#username").shouldHave(text("Hello, Johny!")); // Waits until element gets text
} 
```

它独立于您的测试框架，因此可以与例如 JUnit、TestNG、Cucumber、ScalaTest、JBehave 一起使用

# python - django 如何与 virtualenv 一起工作？

> ID：11111434
> 
> 赞同：3
> 
> 时间：2012-06-20T00:48:14.070
> 
> 标签：python, django, virtualenv, wsgi, gunicorn

我了解如何创建 virtualenv，激活该 virtualenv，然后在激活 virtualenv 时安装 django。前任：

```
virtualenv ~/narnia
source ~/narnia/bin/activate
pip install django 
```

据我了解，当您“激活”虚拟环境时，它只会在您处于 shell 时更改一些路径变量，仅此而已。因此，当激活 narnia 时使用 pip 安装 django 时，它只是将东西安装到相对于 ~/narnia 而不是相对于 /usr 的位置（例如 ~/narnia/lib/python2.6/site-packages 而不是 /usr/ lib/python2.6/site-packages）。

现在假设我想用那个 virtualenv 创建一个 django 项目。我什至不必被激活，对吗？我可以这样做：

```
deactivate
cd ~
narnia/bin/django-admin.py startproject myproject 
```

那么，如果我有一个使用“myproject”设置的 Web 服务器......此时该 django 项目如何与 narnia virtualenv 相关联？系统路径变量不会只是正常的系统范围的 python 路径吗？“myproject”如何知道使用 narnia 环境？

我对它的工作原理有点困惑。任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:50:53.303

Web 服务器通常有一种方法来配置它们的 Python 使用。您可以设置环境变量、路径等。使用这些工具指向 virtualenv。

例如，在我的 Apache httpd.conf 中：

```
WSGIDaemonProcess myapp processes=2 threads=12 python-path=/home/nedbat/webapps/myapp/server:/home/nedbat/webapps/myapp/lib/python2.7
WSGIProcessGroup myapp
WSGIRestrictEmbedded On
WSGILazyInitialization On
WSGIScriptAlias / /home/nedbat/webapps/myapp/myapp.wsgi 
```

我有一个 myapp.wsgi 文件：

```
import os
import site
import sys

VE = '/home/nedbat/webapps/myapp/ve'

site.addsitedir(VE + '/lib/python2.7/site-packages')

os.environ['DJANGO_SETTINGS_MODULE'] = 'prod_settings'
os.environ['USE_PYPY'] = 'y'
os.environ['TMPDIR'] = '/home/nedbat/webapps/myapp/tmp'

from django.core.handlers.wsgi import WSGIHandler

application = WSGIHandler() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T00:55:40.457

如果您希望在生产环境甚至暂存环境中将 virtualenv 与 Django 一起使用，我希望您激活环境，并根据您是手动执行还是使用例如 virtualenvwrapper，设置适当的环境变量。我不确定在虚拟环境中安装 Django 然后不使用它的目的是什么。

顺便说一句，就在我看到这个的时候，我看到相关的问题[Django and VirtualEnv Development/Deployment Best Practices](https://stackoverflow.com/questions/2241055/django-and-virtualenv-development-deployment-best-practices)出现在边栏中。这似乎与您的设置相当相关。

# mysql - SQL 查询 - 替换/移动部分内容

> ID：11111436
> 
> 赞同：0
> 
> 时间：2012-06-20T00:48:24.750
> 
> 标签：mysql, sql, database

我需要在 MySQL 中更新大约 2000 条记录

我有来自表“my_table”的列“my_content”，其值如下

```
Title: some title here<br />Author: John Smith<br />Size: 2MB<br /> 
```

我创建了 3 个新列（my_title、my_author 和 my_size），现在我需要像这样分隔 'my_content' 的内容

'我的标题'

```
some title here 
```

“我的作者”

```
John Smith 
```

“我的大小”

```
2MB 
```

正如您可以想象的那样，每一行的标题、作者和大小总是不同的。

我在想的是查询以下内容，但我不擅长 SQL 查询，我不确定实际查询会是什么样子。

这就是我想要做的：

```
Within 'my_content' find everything that starts with "title:..." and ends with "...<br />au" and move it to 'my_title'
Within 'my_content' find everything that starts with "thor:..." and ends with "...<br />s" and move it to 'my_author'
Within 'my_content' find everything that starts with "ize:..." and ends with "...<br />" and move it to 'my_size' 
```

我只是不知道如何编写查询来执行此操作。

一旦所有内容都在新列中，我就可以找到并删除不再需要的内容，例如 'thor:' 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:03:42.567

您可以使用`INSTR`来查找分隔符的索引并`SUBSTRING`选择所需的部分。因此，例如，作者将是

```
SUBSTR(my_content,
       INSTR(my_content, "Author: ") + 8,
       INSTR(my_content, "Size: ") - INSTR(my_content, "Author: ") - 8) 
```

您需要更多的工作来修剪`<br/>`和任何周围的空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:52:16.817

请尝试以下方法：

```
SELECT SUBSTRING(SUBSTRING_INDEX(mycontent,'<br />',1),LOCATE('Title: ',mycontent)+7) as mytitle, 
SUBSTRING(SUBSTRING_INDEX(mycontent,'<br />',2),LOCATE('Author: ',mycontent)+8) as myauthor, 
SUBSTRING(SUBSTRING_INDEX(mycontent,'<br />',3),LOCATE('Size: ',mycontent)+6) as mysize 
FROM mytable; 
```

# sorting - 我可以在查询时更改 SOLR 搜索的排序顺序吗？让 SOLR 使用 52734 而不是 12345？

> ID：11111438
> 
> 赞同：2
> 
> 时间：2012-06-20T00:48:54.953
> 
> 标签：sorting, dynamic, solr, lexical

我在具有类别属性的索引中有文档。

每个类别都有优先级，如下所示：

```
Category | Priority
    1    |     1
    2    |     2
    3    |     3
    4    |     4 
```

我希望能够在查询时更改 SOLR 按类别属性排序的方式，以便我可以决定类别 4 应该是优先级 1，而不必重新索引所有文档。

例如，像这样：

```
order by category asc, with ordering of "4123" 
```

然后，如果一个文档的类别为 4，它将位于类别为 1 的文档之前。

这在 SOLR 中可能吗？

另外，我使用此优先级对**文档组进行**排序，而不是整体排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:15:39.400

您可以使用 map 函数按照该顺序实现，请参见[此处](http://lucene.472066.n3.nabble.com/Sorting-function-with-condition-td2970036.html)，尽管该函数可能有点长且难以理解。

# php - MySQLi 准备好的语句未执行

> ID：11111443
> 
> 赞同：2
> 
> 时间：2012-06-20T00:49:10.983
> 
> 标签：php, mysqli

以下代码运行没有任何错误，但实际上并没有删除任何内容：

```
 $update = $mysqli->prepare('DELETE FROM table WHERE RetailerID = ? AND Amount = ? AND FXRate = ?');
      $update->bind_param('iii', $rID, $base_value, $fx_rate);
      $update->execute();
      $update->close(); 
```

我在同一个文件中有许多 mysqli 准备好的语句，它们执行得很好，但这是唯一一个不修改表的语句。没有错误或显示，但该行也没有从表中删除。我已验证 $rID、$base_value 和 $fx_rate 是正确的值，并且表中肯定存在与这些值匹配的行。

此语句与其他语句之间的唯一区别是参数以及它是 DELETE 而不是 SELECT 或 UPDATE 的事实。我还尝试使用相同的 WHERE 参数执行 SELECT 或 UPDATE 而不是 DELETE，但没有运气。问题似乎是它没有找到适合 WHERE 参数的行，但就像我说的那样，该行肯定存在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:49:01.543

金额是整数还是双精度？您正在转换为整数 ('iii')，但我认为它会是 0.34 美元或类似的价格。改用“idi”。

编辑：同样适用于费率 - 也是整数还是双倍？

# javascript - Javascript代码显示选择值

> ID：11111446
> 
> 赞同：0
> 
> 时间：2012-06-20T00:49:28.760
> 
> 标签：javascript

我在确定该值是否丢失时遇到了一些问题。

我的屏幕上有以下选择框：

```
<select id="user_list" onclick="load_user(this)" name="user_list" size="21" style="width:200px;">   
<option value="1">Item1</option>
<option value="2">Item2</option>
<option value="4">Item4</option>
</select> 
```

我正在使用以下 JavaScript：

```
var userList = document.getElementById("user_list"); 
    for (var i=0;i<userList.options.length; i++) { 
        if (userList.options[i].value != (i+1)) { 
            alert((i+1)+" is missing"); 
            break; 
        } 
        else
        {
        alert((userList.options.length+1)+" is missing"); 
        break;
        }

} 
```

我面临的问题是，如果选项值为 1、2、3、4，则回复为 5（因为这是下一个数字），这很好，因为这就是我想要的。

如果我删除选项 3（如我上面的选择框中），它会一直回复 4 is missing 当它应该说 3 is missing 时。

如果我删除以下代码：

```
else
{
alert((userList.options.length+1)+" is missing"); 
break;
} 
```

它做了我想要它做的事情，但是在检查所有值后它没有得到下一个值编号（因此它在读取列表中的最后一个选项后停止）。

它应该做的是检查选择框中的所有选项，如果缺少其中一个值，它应该提醒缺少的那个。如果所有值数字都在那里，那么它应该提醒下一个缺少的可用选项。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:03:14.243

它一直告诉您`4`丢失了，因为您`else`在循环的每次迭代中都在运行代码（直到找到丢失的代码）。您的代码`else`应该只运行一次。您可以使用标志变量来设置是否缺少一个并在循环后检查。尝试将js代码更改为

```
var allFound = true;
var userList = document.getElementById("user_list");
    for (var i=0;i<userList.options.length; i++) {
        if (userList.options[i].value != (i+1)) {
            alert((i+1)+" is missing");
            allFound = false;
            break;
        }
    }
if(allFound)
    alert((userList.options.length+1)+" is missing"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:20:07.877

这适用于 Jfiddle [http://jsfiddle.net/Vt2DJ/](http://jsfiddle.net/Vt2DJ/)

```
var userList = document.getElementById("user_list"); 
var whileindex  = 0; //keeps track of the number of options checked
var i = 0; //values that should be available for the options
while ( whileindex <  userList.options.length )
{
  if (userList.options[i].value != (i+1)) { 
      alert((i+1)+" is missing"); 
      i++; //this because otherwise we have a wrong offset for the check
  } 
  else
  {
      whileindex++; //option exists
  }
   i++; //go on to the next value
} 
```

# rspec - Cleaner Rspec spec_helper 文件和实例变量

> ID：11111452
> 
> 赞同：1
> 
> 时间：2012-06-20T00:50:39.457
> 
> 标签：rspec

我希望为我的所有测试文件提供一些常量，并且不确定使用 rspec 执行此操作的最佳方法。这种方式是否是声明实例变量的最佳实践？谢谢！

```
require File.join(File.dirname(__FILE__), '..', 'app.rb')
require 'rack/test'

set :environment, :test
set :run, false
set :raise_errors, true
set :logging, false

def access_token
   "xxxxx"
end

def api_token
  "xxxxx"
end

def app
   Sinatra::Application
end

RSpec.configure do |config|
  config.include Rack::Test::Methods
end

#no database debug messages
ActiveRecord::Base.logger.level = Logger::INFO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T14:03:11.193

RSpec 不会限制您为规范定义数据的方式。您可以使用常规方法、常量、本地、实例或类变量等。选择最合适的解决方案完全取决于您。

除了标准的 Ruby，RSpec 还支持在测试中显式[命名主题](http://betterspecs.org/#subject)和[协作者](http://betterspecs.org/#let)。

就个人而言，我`subject(:app)`用于被测对象、`let`协作者（主要是类）、`before`块内或规范内的局部变量和实例变量，用于简单的东西，如用户名和密码，以及用于设置更复杂对象的（工厂）方法。

# perforce - 蒙德里安源代码存储库的 Perforce 连接失败

> ID：11111456
> 
> 赞同：0
> 
> 时间：2012-06-20T00:51:53.830
> 
> 标签：perforce, mondrian, p4v

我正在尝试按照[http://mondrian.pentaho.com/documentation/developers_guide.php](http://mondrian.pentaho.com/documentation/developers_guide.php)下载和编译 Mondrian 源代码。

我在全新安装的 Windows 7 上安装了来自 www.perforce.com/downloads/complete_list 的 P4V 客户端，并将其配置为：

主机：perforce.eigenbase.org

端口：1666

我似乎能得到的只是“与 perforce.eigenbase.org:1666 的 TCP 连接失败。连接：72.14.190.177:1666: WSAECONNREFUSED”

我也尝试过“telnet perforce.eigenbase.org 1666”并收到相同类型的错误。

存储库是否与文档相反？还是我使用了错误的 Perforce 客户端？

任何可证明的方向将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T11:29:49.317

我认为 mondrian 现在托管在 github 上，它是几个月前从 perforce 迁移而来的。也许 ping 他们以更新 doco..

# types - opencl中的uchar sqare内核，行为？

> ID：11111459
> 
> 赞同：0
> 
> 时间：2012-06-20T00:52:01.930
> 
> 标签：types, overflow, opencl

我做了一个内核：

```
__kernel void square(                                                       
   __global uchar* input,                                             
   __global uchar* output,                                           
   const unsigned int count)                                       
{                                                                      
   int i = get_global_id(0);                                           
   if(i < count)                                                      
       output[i] = input[i] * input[i];                                
}; 
```

我的程序的输出是输入矩阵和输出。我看到所有工作项都评估为 val*val % 256。为什么？

```
Found 1 platform(s).
OutData from Write and Read:
0
[91, 2, 79, 179, 52, 205, 236, 8;
  181, 239, 26, 248, 207, 218, 45, 183;
  158, 101, 102, 18, 118, 68, 210, 139;
  198, 207, 211, 181, 162, 197, 191, 196;
  40, 7, 243, 230, 45, 6, 48, 173;
  242, 125, 175, 90, 63, 90, 22, 112;
  221, 167, 224, 113, 208, 123, 214, 35;
  229, 6, 143, 138, 98, 81, 118, 187;
  167, 140, 218, 178, 23, 43, 133, 154;
  150, 76, 101, 8, 38, 238, 84, 47]
[89, 4, 97, 41, 144, 41, 144, 64;
  249, 33, 164, 64, 97, 164, 233, 209;
  132, 217, 164, 68, 100, 16, 68, 121;
  36, 97, 233, 249, 132, 153, 129, 16;
  64, 49, 169, 164, 233, 36, 0, 233;
  196, 9, 161, 164, 129, 164, 228, 0;
  201, 241, 0, 225, 0, 25, 228, 201;
  217, 36, 225, 100, 132, 161, 100, 153;
  241, 144, 164, 196, 17, 57, 25, 164;
  228, 144, 217, 64, 164, 68, 144, 161]

OutData from Write and Read:
8913
Succed
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:52:02.493

答案是GPU上的操作溢出，使用uchar类型时，256又变成0，循环继续。

# selenium - Selenium 不检测页面加载（Ruby）

> ID：11111462
> 
> 赞同：4
> 
> 时间：2012-06-20T00:53:05.467
> 
> 标签：selenium, rspec

我目前正在使用 - firefox 13 - selenium-server-standalone-2.23.1.jar - selenium-client (1.2.18) - rspec 1.2.8

即使页面已完全加载，Selenium 也会在此处停止

08:49:43.888 信息 - 命令请求：会话 2718493e6d4640eea76d6cb3ab1a6fc3 上的 waitForPageToLoad[300000, ]

```
require 'rubygems'
require "selenium/client"
require "selenium/rspec/spec_helper"

describe "Google Search" do
    attr_reader :selenium_driver
    alias :page :selenium_driver

  before(:all) do
      @selenium_driver = Selenium::Client::Driver.new \
          :host => "localhost",
          :port => 4444,
          :browser => "*firefox",
          :url => "http://www.google.com",
          :timeout_in_second => 10
  end

  before(:each) do
    selenium_driver.start_new_browser_session
  end

  # The system capture need to happen BEFORE closing the Selenium session
  append_after(:each) do
    @selenium_driver.close_current_browser_session
  end

  it "can find Selenium" do
    page.open "/"
    page.title.should eql("Google")
    page.type "q", "Selenium seleniumhq"
    page.click "btnG", :wait_for => :page
    page.value("q").should eql("Selenium seleniumhq")
    page.text?("seleniumhq.org").should be_true
    page.title.should eql("Selenium seleniumhq - Google Search")
    page.text?("seleniumhq.org").should be_true
    page.element?("link=Cached").should be_true
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-26T16:42:40.703

我想知道谷歌页面是否使用了 AJAX，这会混淆页面加载事件。

当我访问[http://google.com](http://google.com)时，我注意到提交搜索只会将 #q=selenium 添加到 url。

这可能会混淆硒。也许您可以等待页面元素而不是等待页面加载

一些搜索元素xpath（例如）/html/body/div[1]/div[3]/div[3]/div[6]/div[2]/div[3]/div/div[2]/ div[2]/div/div/ol/div[2]/li[1]/div（丑我知道）

# java - 找不到空指针异常的起源

> ID：11111465
> 
> 赞同：0
> 
> 时间：2012-06-20T00:53:34.553
> 
> 标签：java, nullpointerexception

我该如何避免`NullPointerExceptions`？我曾尝试使用`try-catch`块，但没有奏效。

我的程序应该从谷歌日历获取数据。我得到了很多元素，但这里只是一个元素作为例子......

```
for (Iterator<?> i = eventsToday.iterator(); i.hasNext();) {
    Component component = (Component) i.next();
    String Attachement=null;
    if(component.getProperty(Property.ATTACH).toString().trim()!=null){
        Attachement=component.getProperty(Property.ATTACH).toString();
    }
} 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T00:56:58.990

测试`component.getProperty() == null`空指针异常是否是由于`toString()`在空对象上被调用。以下示例将起作用。（替换`Object o`为返回的真实类型`getProperty()`）

```
String Attachment;
Object o = component.getProperty(Property.ATTACH);
if(o != null) {
   Attachment = component.getProperty(Property.ATTACH).toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:57:11.160

问题很可能是

```
component.getProperty(Property.ATTACH) 
```

正在返回 null

只需添加一些检查代码

```
if (component.getProperty(Property.ATTACH)) {
    Attachement = component.getProperty(Property.ATTACH).toString();
} 
```

您可能想要缓存`component.getProperty(Property.ATTACH)`

# c# - 如何从智能设备应用程序对 WCF 服务进行异步调用？

> ID：11111466
> 
> 赞同：0
> 
> 时间：2012-06-20T00:53:34.903
> 
> 标签：c#, wcf, asynchronous, windows-mobile, compact-framework

我正在开发一个智能设备应用程序，它将通过 wi-fi 与 wcf 服务进行通信。由于无法将服务引用添加到智能设备项目中，我决定使用 NetCFSvcUtil.exe。一切都很好！

但...

最后我明白了应用程序必须在后台与服务交互。阅读了这篇文章[Microsoft .NET Compact Framework 后台处理技术](http://msdn.microsoft.com/en-us/library/aa446488.aspx)。我决定使用异步 Web 服务调用。在那里[http://msdn.microsoft.com/ru-ru/library/aa347733.aspx](http://msdn.microsoft.com/ru-ru/library/aa347733.aspx)我找到了 /async 参数，但它似乎不适用于 NetCFSvcUtil.exe。

如何为我的智能设备应用程序获取异步代理？有没有办法生成它，或者我应该用我自己的双手将异步方法添加到接口中？在我的情况下，使用 SvcUtil.exe 生成异步代理可能适合 .Net CF？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:38:28.123

更多信息，例如您使用哪个平台来构建您的智能手机应用程序，将会很有帮助。

我做过黑莓开发并使用过网络服务。有两种方法可以构建您的 Web 服务

1.  RestFul Service - Web 服务的消费将非常容易。发布数据可能会有点痛苦，因为多部分表单数据在 Wcf - Rest Starter Kit 中作为流发布

2.  Soap 服务 - 如果您决定使用 SOAP，那么对于黑莓和 Android，您必须使用预先验证的 KSOAP -2 在您的应用程序和 Web 服务之间发送和接收肥皂消息。如果您决定使用 KSOAP -2 ，请返回 ASMX 服务。不知何故，WCF 服务不与 KSOAP -2 通信（由于 SOAP 版本或其他东西的变化），而简单的 ASMX 服务工作得非常顺利。您可以使用数十篇文章来学习如何使用 KSOAP

> 他最初的想法是将其托管在 Windows 服务中...

Windows 服务永远不会面向 Web。如果你想要任何东西是面向网络的，你需要一个网络服务器！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T06:14:22.590

最后它奏效了。“添加 Web 引用”工具使用 Begin/End 异步方法创建了一个代理，并且该代理通过代理的 URL 属性与由简单控制台应用程序（后来的 Windows 服务）托管的 wcf 服务交互。

# clojure - Clojure、Lein、JavaFx、本机部门

> ID：11111467
> 
> 赞同：1
> 
> 时间：2012-06-20T00:53:39.030
> 
> 标签：clojure, javafx-2, leiningen

## 语境

我想将 JavaFx 与 clojure 一起使用。

我知道[http://nailthatbug.ne​​t /2011/06/clojure-javafx-2-0-simple-app/](http://nailthatbug.net/2011/06/clojure-javafx-2-0-simple-app/)

## 问题：

有没有办法使用 lein 中的 native-deps 使 JavaFX 与 Clojure 一起工作？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:06:05.717

我[在 Github 上创建了一个简单的 Clojure 和 JavaFX 示例](https://github.com/raju-bitter/clojure-javafx-example)。*在 Ubuntu 上进行测试我必须使用deploy:deploy-file*目标将 JavaFX 运行时安装到我的本地 Maven 存储库中（install:install-file 对我不起作用）。

```
mvn deploy:deploy-file -DgroupId=local.oracle -DartifactId=javafxrt -Dversion=2.2.0 -Dpackaging=jar -Dfile=/usr/lib/jvm/java-7-oracle-amd64/jre/lib/jfxrt.jar -Durl=file:/home/raju/.m2/repository 
```

确保正确设置了以下参数：

*   -Dfile={jre/lib 文件夹中 jfxrt.jar 的完整路径}
*   -Durl=file:{Maven 存储库的完整路径，例如 $HOME/m2.repository}

在 project.clj 中，我在将 JAR 安装到存储库时添加了基于 -DgroupId 和 -DartifactId 值的依赖项。如果您使用更改这些值，请确保相应地更改依赖项：

```
[local.oracle/javafxrt "2.2.0"] 
```

Java 能够毫无问题地加载二进制库。如果 Java 报告加载二进制库时出现问题，例如

> 引起：java.lang.UnsatisfiedLinkError：无法加载库：/usr/lib/jvm/javafx-sdk/rt/lib/amd64/libglass.so

在 SO 上查看这两个问题：

[什么是 LD_LIBRARY_PATH 以及如何使用它？](https://stackoverflow.com/questions/7148036/what-is-ld-library-path-and-how-to-use-it)
[java.lang.UnsatisfiedLinkError no *****.dll in java.library.path](https://stackoverflow.com/questions/1403788/java-lang-unsatisfiedlinkerror-no-dll-in-java-library-path)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:12:05.633

因为 JavaFx 具有本机依赖项，​​所以您的选择仅限于，]

*   将这些依赖项与您的项目（包括它们）一起提供，
*   创建一个你可以依赖的包（提供它们），
*   或让您的软件包要求用户以其他方式安装它们。

因为您链接到的教程涵盖了包/程序的用户自己安装 JavaFx 的情况，通过使用`robert.hook`并依赖最终用户的包管理器来提供实际的本机依赖项。我将介绍如何让您的包/程序包含依赖项。

[native-deps](https://github.com/swannodette/native-deps)可用于将本机依赖项与您的包一起提供。您只需在适当的目录中添加所有 .so、.dll、.etc 文件。我认为项目 github 页面在解释结构方面比我做得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T05:45:15.393

问题中的链接已损坏，因此我看不到您的示例，但是对于 Java 8，JavaFX 现在是标准 JDK/JRE 的一部分。因此，我希望本机依赖问题在这一点上无关紧要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:53:43.197

不确定这是否对其他人有用，但这似乎（到目前为止）对我有用：

mvn install:install-file -DgroupId=javafx -DartifactId=javafx -Dversion=2.1.0 -Dpackaging=jar -Dfile=/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home/jre/lib/jfxrt。罐

我不知道为什么会这样，但我相信 jfxrt.jar 有我需要的文件。然后，在此之后，我在 project.clj 中将其点燃为

```
[javafx "2.1.0"] 
```

在 :dependencies (不是 :native-deps) 部分。

[写完这篇，我真的不知道为什么这似乎有效。]

# ruby-on-rails - 为什么这在我的 Rails 控制器中不起作用

> ID：11111470
> 
> 赞同：1
> 
> 时间：2012-06-20T00:54:31.783
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个 if 条件来检查这个国家是否不在美国

```
 if params[:address][:country] != 'United States'
  logger.info "I am in here"
  @address.errors.add(:base, "We're sorry, you cant update your address")
  @address.errors.add(:country, "We're sorry, you cant update your address")
end

if @address.update_attributes(params[:address])
  flash[:notice] = 'Information was successfully updated.' 
```

但是我假设如果你在对象的基础上添加了一个错误，它会停止，但没有任何东西停止更新，并且总是出现 flash 通知......我如何停止这个并添加一个 flash 错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T01:08:14.913

随机添加错误via`@address.errors.add()`不会导致记录无效。这就是为什么您的呼叫`update_attributes`仍在发生（而不是引发验证错误）。据我所知，要正常运行，**`errors.add()`需要在 rails 验证机制内部进行**。否则，你会得到一些奇怪的行为。

例如，在`rails console`

```
# assume a valid record
@address = Address.first
@address.valid?  # => true
@address.errors.add(:random_error, "random error")
@address.errors  # => {:random_error => ["random error"]}
@address.valid?  # => true
@address.errors  # => [] - call to valid? caused added error to disappear 
```

您希望`valid?`在添加错误后调用 to ，`false`但事实并非如此。它还最终清除了您刚刚添加的错误。

你说你不能把它移到模型上，但这确实是合适的地方。您可以在此处查看有关活动记录[验证的](http://guides.rubyonrails.org/active_record_validations_callbacks.html)更多信息。请注意，所有示例都在模型中进行了验证。

# javascript - 无法更改三个容器中的 SVG 矩形属性

> ID：11111471
> 
> 赞同：0
> 
> 时间：2012-06-20T00:54:37.907
> 
> 标签：javascript, jquery, html, svg, jquery-svg

经过几次尝试和代码更改，我无法在 SVG 内制作矩形来改变他的位置 - 甚至不要求动画。显然是使用[jQuery SVG 插件](http://keith-wood.name/svg.html)加上动画扩展。

问题：一个 SVG 包裹在三个内部`<div>`，一个内部 y 有一个矩形，需要在`y:0`文档加载后位于。这是代码：

```
var rect = jQuery('div.post-image').children('svg').svg().svg('get');

jQuery(rect).each(function(){
    jQuery(this).change('.b1', {y:0});
}); 
```

好吧，矩形没有任何反应，它保持原始坐标。Chrome 控制台也没有说什么。

补充：有问题的HTML

```
<a href="#" class="post-image" title="title">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="250" height="140" viewBox="0,0,250,140" overflow="hidden">
    <switch>
    <g>
        <defs>
            <filter id="innershadow">
                <feOffset dx="0" dy="0"></feOffset>
                <feGaussianBlur stdDeviation="7" result="offset-blur"></feGaussianBlur>
                <feComposite operator="out" in="SourceGraphic" in2="offset-blur" result="inverse"></feComposite>
                <feFlood flood-color="#000" flood-opacity="0.3" result="color"></feFlood>
                <feComposite operator="in" in="color" in2="inverse" result="shadow"></feComposite>
                <feComposite operator="over" in="shadow" in2="SourceGraphic"></feComposite>
            </filter>
            <pattern xmlns="http://www.w3.org/2000/svg" id="image-771" patternUnits="userSpaceOnUse" width="250" height="202">
                <image href="example-310x250.jpg" xlink="http://www.w3.org/1999/xlink" x="0" y="0" width="250" height="202"></image>
            </pattern>
            <clipPath id="clip">
                <polygon points="0,0 235,0 250,70 235,140 0,140 15,70"></polygon>
            </clipPath>
        </defs>
        <polygon points="0,0 235,0 250,70 235,140 0,140 15,70" style="fill: url(#image-771); filter:url(#innershadow);"></polygon>
        <rect class="b1" width="100%" height="100%" style="fill:rgb(0,92,148); opacity: 0.9;" clip-path="url(#clip)" x="0" y="98"></rect>
        <rect class="b2" width="60" height="25" style="fill:rgb(0,92,148); opacity: 0.9;" clip-path="url(#clip)" x="190" y="0"></rect>
        <rect class="b3" width="100" height="25" style="fill:rgb(0,0,0); opacity: 0.75;" clip-path="url(#clip)" x="0" y="0"></rect>
    </g>
    <foreignObject width="250" height="140">
        <img width="250" height="125" src="example-fallback.jpg" alt="example" title="title">       </foreignObject>
    </switch>
    </svg>  
</a> 
```

我愿意为此使用`<canvas>`，但我不知道结果如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:54:25.053

找出问题所在：

```
var rect = jQuery('a.post-image').children('svg').find('.b2, .b3');

jQuery(rect).each(function(){
    jQuery(this).attr('y','-25');
}); 
```

完成，并且没有插件。好吧，不是最好的方法（找到而不是最直接的选择器），但它会削减它。

# linux - GVIM 6.4 比 GVIM 7 有更好的 GUI 和选项

> ID：11111472
> 
> 赞同：0
> 
> 时间：2012-06-20T00:54:50.537
> 
> 标签：linux, vim

我想使用 gvim 的选项卡文件功能，因此我从 gvim 6.4.6 迁移到 gvim 7.0，因为旧版本不支持它。然而令我惊讶的是，我在旧的 gvim 中看到了更好的 GUI。不仅外观而且选项也更少。例如，在“编辑”菜单中，没有 GVIM 6.4.6 中的选择字体选项。

我是否需要更改某些内容（.vimrc 等）以获得优于 6.4.6 的 GUI 和功能？附件是显示新旧的屏幕截图，以给您一个想法...

感谢新手的帮助
![新 GVIM 与旧 GVIM](../Images/711928624378401bf61f6033bedad699.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T15:22:57.490

你在比较苹果和橘子。Vim 可以使用不同的 GUI 工具包进行编译，而您的较新、外观不那么吸引人的工具包是在没有现代 GTK2 GUI 的情况下编译的。

您可以通过`:version`. 尝试获得不同的 Vim 版本。

# linq - LINQ/LinqPad：相同的查询不同的结果

> ID：11111473
> 
> 赞同：1
> 
> 时间：2012-06-20T00:55:11.867
> 
> 标签：linq, entity-framework, linqpad, outer-join

因此，我们将完全相同的查询从 LinqPad 复制并粘贴到我们的 EF 4.3 应用程序中，指向完全相同的数据库并获得不同的结果。在 LinqPad 中，我们返回 2 条记录。在我们的应用程序中，我们引发了一个错误“对象引用未设置为对象的实例”。

```
 var Shippings = shippingRepository.All.ToArray();
        var SalesOrderHeaders = salesOrderHeaderRepository.All.ToArray();
        var Customers = customerRepository.All.ToArray();
        var Stores = storeRepository.All.ToArray();
        var Departments = departmentRepository.All.ToArray();

        var toShip = from sh in Shippings
                     join h in SalesOrderHeaders on sh.OrderId equals h.SalesOrderHeaderId
                     join c in Customers on h.CustomerId equals c.CustomerId
                     join st in Stores on h.StoreId equals st.StoreId
                     join d in Departments on h.DepartmentId equals d.DepartmentId into outer
                     from o in outer.DefaultIfEmpty()
                     select new 
                     {
                        OrderId = sh.OrderId,
                        CustomerName = c.Name,
                        StoreName = st.Name,
                        DepartmentName = (o.Name == null) ? o.Name : "None",
                        DeliveryDate = h.DeliveryDateTime
                     }; 
```

在应用程序代码中，当我们删除外连接（以添加部门）及其关联字段时，查询返回与 LinqPad 中相同的 2 条记录。

有没有人对如何修复此功能有任何见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T05:40:44.127

单击 linqpad 中的“添加连接”，然后从程序集中选择 datacontext，例如 ![在此处输入图像描述](../Images/3881b140f18d48e5c31e4a1379bc0f0b.png)
您可以根据您的场景选择 Entity Framework datacontext 或 Entity Framework BDContext with POCO。单击下一步并提供程序集的路径以及连接字符串，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:21:10.530

在 LINQPad 中，您实际上是在查询您的实体模型吗？如果您不是，请查看[此链接。](http://www.linqpad.net/EntityFramework.aspx)刚开始时我遇到了类似的问题，并且没有意识到我之前已经设置了默认的 LINQ to SQL 连接并且正在查询该连接。

# jquery - 使用 qTip2 进行边缘检测

> ID：11111481
> 
> 赞同：3
> 
> 时间：2012-06-20T00:56:33.270
> 
> 标签：jquery, iframe, tooltip, qtip, qtip2

我正在使用[qTip2](http://craigsworks.com/projects/qtip2/)。我认为它包括屏幕检测 - 但是，我在 iframe 中使用工具提示，但它不起作用：

![显示隐藏在 iframe 边缘下的工具提示的屏幕截图](../Images/7a07b879dfbd54af7ac52e2c52acf198.png)

我试过：

```
position: {
    adjust: {screen: true},
    my: 'bottom center',  // Position my top left...
    at: 'top center' // at the bottom right of...
}, 
```

它没有用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T15:40:08.600

qTip2 插件有一个`viewport`选项：

```
position: {
    my: 'bottom center',  // Position my top left...
    at: 'top center', // at the bottom right of...
    adjust: {
        screen: true
    },
    viewport: $(window)
}, 
```

它修复了这种情况。

# web-services - 使用 Powershell 在 Web 服务上调用异步 Web 方法

> ID：11111490
> 
> 赞同：3
> 
> 时间：2012-06-20T00:57:23.953
> 
> 标签：web-services, powershell

我正在使用 PowerShell V2 并试图找到一个使用 Web 服务代理来调用异步 Web 方法的示例：

这是我到目前为止的代码：

```
$Uri = "http://localhost/mywebservice.asmx?wsdl" 

$proxy = New-WebServiceProxy -Uri $Uri -UseDefaultCredential 
```

Web 服务具有以下方法 **BeginFoo** **EndFoo** **FooAsync** * *FooCompleted* *

希望这是有道理的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T03:42:12.160

这是使用 BeginInvoke/EndInvoke 的示例。运行`$ar | Get-Member`以查看您可以在 IAsyncResult 对象上使用哪些其他方法和属性。

```
PS> $zip = New-WebServiceProxy -uri http://www.webservicex.net/uszip.asmx?WSDL
PS> $ar = $zip.BeginGetInfoByAreaCode("970", $null, $null)

... other PS script ...

# Now join the async work back to the PowerShell thread, wait for completion
# and grab the result. WaitOne returns false on timeout, true if signaled.
PS> $ar.AsyncWaitHandle.WaitOne([timespan]'0:0:5')
True
PS> $ar.IsCompleted
True
PS> $res = $zip.EndGetInfoByAreaCode($ar)
PS> $res.Table

CITY      : Whitewater
STATE     : CO
ZIP       : 81527
AREA_CODE : 970
TIME_ZONE : M

CITY      : Wiggins
STATE     : CO
ZIP       : 80654
AREA_CODE : 970
TIME_ZONE : M 
```

# macos - 无法使用带有python的opencv在mac上初始化ps3 eye，但c示例工作正常

> ID：11111491
> 
> 赞同：2
> 
> 时间：2012-06-20T00:57:26.637
> 
> 标签：macos, opencv, python-2.7, webcam

通过执行以下“port install opencv +python27”，我已经通过 macports 安装了 OpenCV。使用 C 并调用 cvCaptureFromCAM(0) 我可以很好地从摄像头捕获帧。当我使用 python 的 cv.CaptureFromCAM(0) 尝试它时，它会死于以下情况：

```
QTKit didn't find any attached Video Input Devices!
Warning, camera failed to properly initialize!
Cleaned up camera.
Traceback (most recent call last):
  File "test.py", line 5, in <module>
    temp=cv.CloneImage(frame) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T02:39:37.047

使用 python 你可以尝试**cv2**接口：

```
import cv2

# initiate the capture interface
cv2.VideoCapture() # that's right, no params 
```

# solr - Solr - 请求的资源 (/solr/suggest) 不可用

> ID：11111492
> 
> 赞同：1
> 
> 时间：2012-06-20T00:57:29.947
> 
> 标签：solr

我遵循了本教程：[http ://solr.pl/en/2010/11/15/solr-and-autocomplete-part-2/](http://solr.pl/en/2010/11/15/solr-and-autocomplete-part-2/)

在教程中，据说将“/suggest?spellcheck.build=true”发送到 solr，所以我在浏览器中执行了此操作（我可能在这里错了吗？） localhost:8080/solr/suggest?spellcheck.build=true 和然后我收到以下错误：

```
HTTP Status 404 - /solr/suggest

type Status report

message /solr/suggest

description The requested resource (/solr/suggest) is not available.

Apache Tomcat/7.0.27 
```

任何人都知道如何解决这个问题？感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-08T08:48:02.730

Solr 建议器是默认情况下可能未启用的组件。

检查您的**solrconfig.xml**是否有一个名为“/suggest”的活动 requestHandler。

如果没有，请按照此 Solr wiki 页面中的说明激活它：[Suggester](https://wiki.apache.org/solr/Suggester)

# java - 如何制作 ImageView 数组并在 for 循环中将它们设置为启用（假）

> ID：11111496
> 
> 赞同：3
> 
> 时间：2012-06-20T00:58:46.797
> 
> 标签：java, android, list, for-loop, imageview

这是简短的版本。我有一个奖励活动，它有 25 个可点击的图像视图。我需要的是当单击一个 ImageView 时，所有其他的都需要设置为启用（假）。我想在 for 循环中执行此操作。我所拥有的一个例子如下。有什么建议么

```
 private ImageView img1;
    private ImageView img2;
    private ImageView img3;
    private ImageView img4;
    private ImageView img5;
    private ImageView img6;
    private ImageView img7;
    private ImageView img8;
    private ImageView img9;
    private ImageView img10;
    private ImageView[] imageview = {img1,img2,img3,img4,img5,img6,img7,img8,img9,img10};
    int i = 0; 
    int imgv =0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.bonus_layout); 

        img1 = (ImageView) findViewById(R.id.imageView1);
        img2 = (ImageView) findViewById(R.id.imageView2);
        img3 = (ImageView) findViewById(R.id.imageView3);
        img4 = (ImageView) findViewById(R.id.imageView4);
        img5 = (ImageView) findViewById(R.id.imageView5);
        img6 = (ImageView) findViewById(R.id.imageView6);
        img7 = (ImageView) findViewById(R.id.imageView7);
        img8 = (ImageView) findViewById(R.id.imageView8);
        img9 = (ImageView) findViewById(R.id.imageView9);
        img10 = (ImageView) findViewById(R.id.imageView10);

    img1.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
            if(rank[b]==0){

            for(i<25) imageview.get(i) setEnabled(false);
                             (i++); 

//This example offered get a force close  for(ImageView iv:imageview)iv.setEnabled(false);
                }
              }} }); 
```

这是您帮助我的更正代码

```
public class BonusActivity extends Activity implements View.OnClickListener   
{
    Integer rank[]=  {0,100,200,300,0,400,500,0};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState); 
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.bonus_layout);

     final ImageView img1 = (ImageView) findViewById(R.id.imageView1);
     final ImageView img2 = (ImageView) findViewById(R.id.imageView2);
     final ImageView img3 = (ImageView) findViewById(R.id.imageView3);
     final ImageView img4 = (ImageView) findViewById(R.id.imageView4);
     final ImageView img5 = (ImageView) findViewById(R.id.imageView5);
     final ImageView img6 = (ImageView) findViewById(R.id.imageView6);
     final ImageView img7 = (ImageView) findViewById(R.id.imageView7);
     final ImageView img8 = (ImageView) findViewById(R.id.imageView8);
     final ImageView img9 = (ImageView) findViewById(R.id.imageView9);
     final ImageView img10 = (ImageView) findViewById(R.id.imageView10);
     final ImageView[] imageview ={img1,img2,img3,img4,img5,img6,img7,img8,img9,img10};

    img1.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

            if(rank[b]==0){
            img1.setImageResource(R.drawable.empty);

            for(int i = 0; i<imageview.length;i++)
            {imageview[i].setClickable(false);} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:05:01.657

初始化你`ImageView Array`的`onCreate()`，然后只需使用下面的代码来禁用[启用 false] 每个 ImageView

```
for(int i = 0; i < imageview.length; i++)
{
    imageview[i].setEnabled(false);    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:07:29.687

```
public void setEnabledFalse(int enableTrue){
for(int x = 0; x < imageview.length; x++){

   if(x != enabledTrue){
      imageview[i].setEnabled(false);
   }
}

} 
```

创建一个类似上面的方法并为点击的 ImageView 传递一个参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T01:16:38.173

这个怎么样，

1.  Activity 实现 View.OnClickListener
2.  覆盖Activity中的onClick：

```
void onClick(View v) {
    for (int i = 0; i < imageview.length; i++) {
        if (v != imageview[i]) {
            imageview[i].setEnabled(false);
        }
    }
} 
```

并且不要忘记在 Activity.onCreate 上设置 onclick 监听器

```
for (int i = 0; i < imageview.length; i++) {
   imageview[i].setOnClickListener(this);
} 
```

# php - 通过 MySql 数据库创建动态内容？

> ID：11111502
> 
> 赞同：0
> 
> 时间：2012-06-20T00:59:47.510
> 
> 标签：php, mysql

在我问我的问题之前，我想给大家介绍一下我自己的背景。我目前处于 PHP 和 MySql 的学习阶段。

（由于缺乏技术术语，我提前提出了建议）

我有一个关于如何在 php 代码中“制作”或“生成”某些页面的问题。在我过去，我总是手动制作页面。例如，aboutus.html、information.html、cats.html 等……我想你明白了。

假设正在使用代码。如何“制作”或“生产”功能齐全的 php 页面？人们可以在哪里登录，进行编辑，撰写评论等......（下面有几个例子）

以下网站的所有者/程序员是否手动“制作”或“制作”这些页面？http://cars.oodle.com/used-cars/riverside-ca-area/
http://cars.oodle.com/used-cars/ukiah-ca-area/

我的问题是，我怎样才能为我的网站“制作”或“制作”这些类型的页面？任何人都可以提供我如何做到这一点的任何提示/技巧。我假设我必须使用 php 中的“while”循环来使这样的页面成为可能。那是对的吗？

如果你们想制作类似上述页面的页面。你会怎么做？你将如何应对这种情况？

欢迎所有意见。提前感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:08:59.047

您好，欢迎来到 StackOverflow。这不是你应该在这里问的那种问题，因为它太笼统了，而且有很多不同的部分。也就是说，我希望这可以为您指明正确的方向：

PHP 和其他服务器端语言（如 python、perl、node.js 等）会进行一些计算，可能会连接到数据库，但最终它们会打印出 html。这与您手动完成的 html 相同，但他们可以将动态计算或从数据库中查找的数据放入其中。您展示的示例页面肯定是由某些数据库中的数据制成的，但很难说使用的是什么语言。

我会推荐一本好的 PHP 入门书并从头开始学习 php。获取本地服务器（搜索 XAMPP），以便您可以测试并编写一些代码以查看它是如何工作的。这个本地服务器还可以让你托管一个小型 mysql 数据库，这样你就可以将实时数据加载到网站中，看看它是如何变化的。制作这种类型的动态网站确实是知道如何做的最有用的事情之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:08:46.603

上面的 URL 只是“短 URL”，它们是 apache 的一部分。网上有很多教程——谷歌“short url apache”或“short url .htaccess”，你会得到很多指南。 [http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

基本上，它所做的只是将一个看起来像一堆文件夹的 URL 映射到具有某些变量的特定 PHP 文件。然后，您在 PHP 文件中基本上只有一系列语句来根据变量执行不同的操作。

例如

example.com/search/abc 将使用 .htaccess 技巧映射到 search.php?query=abc。

example.com/search/hello 将映射到 example.com/search.php=query=hello

另请注意，您可以使用它来访问静态 html 页面——尽管它没有多大意义！

如果您的问题更倾向于“我如何让 PHP 对变量输入做不同的事情”，请阅读 W3school 的 PHP 指南 [http://www.w3schools.com/php/default.asp](http://www.w3schools.com/php/default.asp)

或者，PhP and MySQL For Dummies 是一本不错的读物！

如果您需要澄清，请随时发表评论 - 否则如果您有更多问题，请再次询问堆栈

# zend-framework - Zend 阻止应用程序加载视图脚本

> ID：11111504
> 
> 赞同：-1
> 
> 时间：2012-06-20T00:59:56.887
> 
> 标签：zend-framework

如何防止应用程序使用任何参数呈现视图脚本。

所以如果我有什么是

www.mywebsite.com/myapplication/mycontroller/some/params

我怎样才能停止它，这样无论控制器之后发生什么，它都不会加载视图脚本。我已经能够在动作中做到这一点，但我想对所有动作都这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:44:37.113

默认情况下，前端控制器启用 ViewRenderer 操作助手。这个助手负责将视图对象注入控制器，以及自动渲染视图。您可以通过以下方法之一在您的动作控制器中禁用它：

```
class FooController extends Zend_Controller_Action
{
    public function init()
    {
        // Local to this controller only; affects all actions,
        // as loaded in init:
        $this->_helper->viewRenderer->setNoRender(true);

        // Globally:
        $this->_helper->removeHelper('viewRenderer');

        // Also globally, but would need to be in conjunction with the
        // local version in order to propagate for this controller:
        Zend_Controller_Front::getInstance()
            ->setParam('noViewRenderer', true);
    }
} 
```

参考： http: [//framework.zend.com/manual/en/zend.controller.action.html](http://framework.zend.com/manual/en/zend.controller.action.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T04:57:20.017

这是我必须做的才能让它做我想做的事：

```
 public function preDispatch(){
        if($this->User->isValid()){
            if($this->getRequest()->getActionName() !== 'login' ){ 
                    $this->_forward('login');
            }
         }
    }

    public function loginAction(){
        $this->_helper->FlashMessenger('You must be logged in to do that!');
        $this->_flashMessenger = $this->_helper->getHelper('FlashMessenger');
        $this->view->messages = $this->_flashMessenger->getMessages();
        $this->_helper->viewRenderer->setNoRender(false);
    } 
```

# php - 使用 PHP/MySQL 循环检查复选框并插入数据库

> ID：11111507
> 
> 赞同：0
> 
> 时间：2012-06-20T01:00:45.183
> 
> 标签：php, mysql

我有一个带有 4 个文本字段和 2 个复选框的 PHP 表单。复选框是“标签”，可以应用于使用文本字段输入的文章。

例如：

信息：

**标题**- 定义南美洲候鸟的不及物关系

**作者**- 作者。S.惠灵顿

**访问日期**- 19/06/2012

**网址**- [http://www.wellington.org/articles/birds/def-int-rel-mig-bird-s-amer.pdf](http://www.wellington.org/articles/birds/def-int-rel-mig-bird-s-amer.pdf)

标签：

鸟类[X] 南美[X]

在这种情况下，两个复选框都会被选中，因为这篇文章既涉及鸟类，也涉及南美洲。

我有一个包含 3 个表的数据库：

**文章：** id - 文章标题 - 文章组织 - 文章日期 - 文章网址

**标签：** id - tag_content

**文章标签：** article_id - tag_id

目前，我的表单可以使用以下方法将文章信息插入到文章表中：

```
 mysql_query("INSERT INTO articles SET articletitle='$articletitle',
      articleorganization='$articleorganization',
      articledate='$articledate',
      articleurl='$articleurl' ") 
```

然后，我可以`$article_id = mysql_insert_id();`用来获取将插入到articles_tags 表中的id。

但在那之后，我完全被难住了。

我需要以某种方式遍历复选框：

```
<input type="checkbox" name="articletags_birds" value="Birds" id="articletags_0" />
<input type="checkbox" name="articletags_southamerica" value="South America" id="articletags_1" /> 
```

但我不知道我应该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:29:30.510

```
if ($_POST['articletags_birds'] == 'on')
{
    mysql_query("INSERT INTO tags SET id='$article_id', tag_content='articletags_birds'");
} 
```

对其他标签执行相同操作。如果您有一个非常大的数字（5+），或者希望用户输入他们自己的标签，只需执行以下操作：

```
foreach ($_POST as $key=>$value)
{
    if (strpos($key, 'articletags_') === 0) //identity, otherwise false will set this off
    {
         mysql_query("INSERT INTO tags SET id='$article_id', tag_content='$value'");
    }
} 
```

笔记：

1.) 如果没有选中复选框，则不会发送 POST！

2.) strpos 将检查标签是否以 articletags_ 开头

3.) 请转义查询！我只是简写了这一切，但是可以在这里注入恶意PHP

如果我不清楚/如果它仍然不起作用，请发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:30:31.957

我不是 100% 你的问题是什么，但是：

1.  Offcourse 我会将标签名称保留在数据库中
2.  然后在生成更新文章的表单时，我会从数据库中获取所有标签并将它们插入循环中，如下所示：

    ```
    <input type="checkbox" name="tagArray[]" value = '$tagId' />$tagName 
    ```

3.  然后在提交表单后，如果在发布请求中设置了这些标签中的任何一个，我将在循环中检查并创建新的articles_tags，如下所示：

    ```
    if(isset($_POST['tagArray']))
    {
     $tagArray = $_POST['tagArray'];
         foreach($tagArray as $tagId)
         {
           mysql_query('...');
           // insert new articles_tags with tag_id = $tagId and article_id =$article_id
          }     
    } 
    ```

# vb.net - VB.net 相当于 Ruby 的元帅 - 对象保存/加载

> ID：11111511
> 
> 赞同：1
> 
> 时间：2012-06-20T01:01:43.220
> 
> 标签：vb.net

我只需要一些简单的 vb.net 代码，它可以让我将一个对象编组为一个字符串，允许保存和加载这个字符串，这样我就可以保存我的类，需要简单易用！

提前致谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:05:56.850

您可以使用[序列化](http://support.microsoft.com/kb/316730)将对象加载和保存为字符串或二进制数据。

# apache-flex - Flex 3 中跨多个对象的数据绑定

> ID：11111512
> 
> 赞同：0
> 
> 时间：2012-06-20T01:02:00.757
> 
> 标签：apache-flex, data-binding, actionscript, flex3, bindable

我是 Flex 的新手（被指派在工作中维护一个旧项目）并且在使数据绑定正常工作时遇到了一些麻烦。我有一个弹出表单类 AddOffer.mxml，它使用模型 AddOfferModel.as。在我的弹出表单上，我有以下组件：

```
 <mx:FormItem label="{getResource('addOffer.form.OFFER_DATE')}:"
        labelWidth="90">
        <views:OfferWindowDatesFragment 
            id="offerWindowField" 
            start="{model.offerStartDate}"
            stop="{model.offerStopDate}" />
    </mx:FormItem> 
```

我的 AddForm.mxml 文件还有一些嵌入的动作脚本，我在其中定义了我的“模型”变量：

```
 [Bindable]
    public var model:AddOfferModel; 
```

我试图绑定的模型变量是标准的 getter/setter，在 AddOfferModel.as 中看起来像这样：

```
 [Bindable]
    public function set offerStartDate(val:EditableInstant):void
    {
        _offerStartDate = val;
    }
    public function get offerStartDate():EditableInstant
    {
        return _offerStartDate;
    }
    private var _offerStartDate:EditableInstant;

    [Bindable]
    public function set offerStopDate(val:EditableInstant):void
    {
        _offerStopDate = val;
    }
    public function get offerStopDate():EditableInstant
    {
        return _offerStopDate;
    }
    private var _offerStopDate:EditableInstant; 
```

在 OfferWindowDatesFragment 组件类中，开始和停止变量如下所示：

```
 [Bindable]
    public function set start(val:EditableInstant):void
    {
        _start = val;
    }
    public function get start():EditableInstant
    {
        return _start;
    }
    private var _start:EditableInstant;

    [Bindable]
    public function set stop(val:EditableInstant):void
    {
        _stop = val;
    }
    public function get stop():EditableInstant
    {
        return _stop;
    }
    private var _stop:EditableInstant; 
```

基本上，我只想将 OfferWindowDatesFragment 类中的 start 和 stop 变量绑定到 AddOfferModel.as 文件中的 offerStartDate 和 offerStopDate 变量。每当我访问 OfferWindowDatesFragment 类中的函数中的开始/停止变量时，它们都是空的。

我有一个事件监听器函数，只要用户选择一个新日期，它就会在 OfferWindowDatesFragment 中触发，它看起来像这样：

```
 private function changeOfferDate():void
    {
        start.currentValue = offerDateEditor.start;
    stop.currentValue  = offerDateEditor.stop;
    } 
```

每次我到达这个函数时，它都会抛出一个错误，因为'start'和'stop'都是空的......但应该已经被初始化和绑定了。如果我查看调试器中的变量，我可以确认赋值表达式右侧的值是有效的，而不是导致错误的原因。

我并不真正熟悉 Flex 中的初始化是如何工作的，并且我假设只要我实例化了在我的帖子顶部的第一个代码片段中看到的组件，它就会初始化所有类变量并设置绑定。我错过了什么吗？也许我没有正确初始化 AddForm.mxml 或 AddFormModel.as 的模型或类数据，从而将空引用绑定到我的 OfferWindowDatesFragment 类中的开始/停止字段？

任何帮助将不胜感激。谢谢！

**编辑：**

我进一步研究了这一点，并尝试使用 Mate 在 AddOffer.mxml 中使用有效的 AddOfferModel 对象注入“模型”变量：

```
 <Injectors target="{AddOffer}" debug="{debug}">
        <ObjectBuilder generator="{AddOfferModel}" constructorArguments="{scope.dispatcher}" cache="local"/>
        <PropertyInjector targetKey="model" source="{lastReturn}" />
    </Injectors> 
```

由于另一个表单上的按钮单击事件，我加载了 AddOffer.mxml 对话框。弹出的函数如下所示：

```
 public function addOffer():void
    {
        var addOfferDialog:AddOffer = new AddOffer();

        addOfferDialog.addEventListener("addOffer", addOfferFromDialog);

        modalUtil.popup(addOfferDialog);
    } 
```

它似乎没有为 AddOffer.mxml 中的“模型”变量分配任何内容。以这种方式加载视图/对话框不会偶然触发来自 Mate 的注入吗？（我意识到这最后一部分可能属于 Mate 论坛，但我希望这里有人可能对所有这些有一些见解）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:13:54.043

在 AddOffer.mxml 中，您有以下代码：

```
[Bindable]     
public var model:AddOfferModel; 
```

AddOffer.mxml 之外是否有将其设置为有效的 AddOfferModel 的东西？应该有。Flex 组件生命周期的性质意味着您可以预期在构建视图时有时事物可能为空。所以你应该构建你的组件，以便在接收到坏数据后能够“自我纠正”，如果数据最终是好的。

数据绑定是执行此操作的一种方法，但它可能不会覆盖所有内容，具体取决于其他情况。

您是否已验证您获得的模型值在用户选择日期时不为空，并且其 offerStartDate 和 offerEndDate 属性已填充有效的 EditableInstants？如果这两个都是正确的，我会开始寻找期望在给定时刻有东西的视图片段，然后如果稍后提供它就不会恢复。

# python - 从文本文件中解析唯一的单词

> ID：11111521
> 
> 赞同：3
> 
> 时间：2012-06-20T01:03:52.237
> 
> 标签：python, python-2.7

我正在做一个项目来从大量文本文件中解析出唯一的单词。我已经完成了文件处理，但我正在尝试改进解析过程。每个文件都有一个特定的文本段，以我在实时系统上使用正则表达式捕获的某些短语结尾。

解析器应该遍历每一行，并根据 3 个标准检查每个单词：

1.  超过两个字符
2.  不在预定义的字典集中`dict_file`
3.  尚未在单词列表中

`.writerow(foo)`结果应该是一个二维数组，每行是每个文件的唯一单词列表，在处理每个文件后使用该方法将其写入 CSV 文件。

我的工作代码在下面，但它很慢而且很笨拙，我错过了什么？

我的生产系统运行 2.5.1，只有默认模块（所以 NLTK 是不行的），不能升级到 2.7+。

```
def process(line):
    line_strip = line.strip()
    return line_strip.translate(punct, string.punctuation)

# Directory walking and initialization here
report_set = set()
with open(fullpath, 'r') as report:
    for line in report:
        # Strip out the CR/LF and punctuation from the input line
        line_check = process(line)
        if line_check == "FOOTNOTES":
            break
        for word in line_check.split():
            word_check = word.lower()
            if ((word_check not in report_set) and (word_check not in dict_file) 
                 and (len(word) > 2)):
                report_set.append(word_check)
report_list = list(report_set) 
```

编辑：根据 steveha 的建议更新了我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:09:01.530

一个问题是`in`对 a 的测试`list`很慢。您可能应该保留 a`set`以跟踪您看到的单词，因为`in`a 的测试`set`非常快。

例子：

```
report_set = set()
for line in report:
    for word in line.split():
        if we_want_to_keep_word(word):
            report_set.add(word) 
```

然后当你完成时：report_list = list(report_set)

任何时候你需要强制 a`set`进入 a `list`，你都可以。但是，如果您只需要循环或进行`in`测试，则可以将其保留为`set`; 这是合法的`for x in report_set:`

另一个可能或可能无关紧要的问题是，您使用该`.readlines()`方法一次性从文件中删除所有行。对于非常大的文件，最好只使用打开的文件句柄对象作为迭代器，如下所示：

```
with open("filename", "r") as f:
    for line in f:
        ... # process each line here 
```

一个大问题是我什至看不到这段代码是如何工作的：

```
while 1:
    lines = report.readlines()
    if not lines:
        break 
```

这将永远循环。第一条语句用 slurps 所有输入行`.readlines()`，然后我们再次循环，然后下一次调用`.readlines()`已经`report`用尽，所以调用`.readlines()`返回一个空列表，它会跳出无限循环。但是现在这已经丢失了我们刚刚阅读的所有行，其余代码必须使用一个空`lines`变量。这甚至是如何工作的？

因此，摆脱整个`while 1`循环，并将下一个循环更改为`for line in report:`.

此外，您实际上并不需要保留`count`变量。您可以随时使用`len(report_set)`来找出`set`.

此外，使用 a`set`您实际上不需要检查一个单词是否是`in`集合；您可以随时调用`report_set.add(word)`，如果它已经在其中`set`，则不会再次添加！

此外，您不必按照*我*的方式进行操作，但我喜欢制作一个可以完成所有处理的生成器。剥离线，翻译线，在空白处分割，并产生准备使用的单词。我也会强制单词小写，除非我不知道`FOOTNOTES`仅以大写形式检测是否重要。

因此，将以上所有内容放在一起，您会得到：

```
def words(file_object):
    for line in file_object:
        line = line.strip().translate(None, string.punctuation)
        for word in line.split():
            yield word

report_set = set()
with open(fullpath, 'r') as report:
    for word in words(report):
        if word == "FOOTNOTES":
            break
        word = word.lower()
        if len(word) > 2 and word not in dict_file:
            report_set.add(word)

print("Words in report_set: %d" % len(report_set)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T01:08:57.380

尝试用字典或集合替换 report_list。如果 report_list 是列表，则 word_check 不在 report_list 中运行缓慢

# scala - 我可以为 Scala 中的抽象类型提供默认值吗？

> ID：11111522
> 
> 赞同：3
> 
> 时间：2012-06-20T01:03:53.097
> 
> 标签：scala, abstract-type

我有这样的课：

```
abstract class CrudResource extends Controller {
  type ResourceIdType

  def getAction(id: ResourceIdType) = ...
  def deleteAction(id: ResourceIdType) = ...

  ...
} 
```

打算像这样使用：

```
class Payees extends CrudResource {
  type ResourceIdType = Int

  ...
} 
```

我想默认`ResourceIdType`为 Int，如下所示：

```
abstract class CrudResource extends Controller {
  type ResourceIdType = Int

  ...
} 
```

这样 ID 类型将是`Int`除非子类像这样覆盖它：

```
override type ResourceId = String 
```

但这无法编译：

```
error: overriding type ResourceIdType in class CrudResource, which equals Int;
 type ResourceIdType has incompatible type
       class Payees extends CrudResource { override type ResourceIdType = String } 
```

有可能做我想做的事吗？我试过， in `CrudResource`, `type ResourceIdType <: Any = Int`，但这不是有效的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:43:23.853

不确定您是否真的可以做到这一点，但泛型和继承可以很好地做到这一点：

```
abstract class CrudController [T] {

    def getAction( resource : T )
    def deleteAction( resource : T )
    def updateAction( resource : T )

}

abstract class IntCrudController extends CrudController [Int]

class PayeesController extends IntCrudController {

    override def getAction( resource : Int ) {}

    def deleteAction(resource: Int) {}

    def updateAction(resource: Int) {}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T17:31:01.980

这将违反 liskov 替换原则。让我们假设你可以做到。

```
abstract class CrudResource extends Controller {
  type ResourceIdType = Int
  def resources: List[ResourceIdType] = ???
  def getAction(id: ResourceIdType) = ???
  def deleteAction(id: ResourceIdType) = ???
}

class Payees extends CrudResource {
  override type ResourceIdType = String
}

class Trouble {
  var resource: Controller.ResourceIdType
}
val trouble = new Trouble
val crudResource: CrudResource = new Payee
trouble.resource = crudResource.resources.head // assigning String to Int var! 
```

但是，您已经完成了蛋糕模式的一半。如果将 ResourceId 定义为抽象嵌套类，则可以让子类根据`Int`or实现它们`String`，只要其 API 不公开特定类型即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T13:14:57.353

Scala 的抽象类型在你定义之后就会被冻结。您不能在继承的类中用另一种类型覆盖一种类型

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T05:47:15.720

不，据我所知，这是不可能的。

# erlang - erlang 主管处理 ibrowse 的最佳方法：send_req conn_failed

> ID：11111524
> 
> 赞同：2
> 
> 时间：2012-06-20T01:04:29.630
> 
> 标签：erlang, erlang-otp, erlang-supervisor

Erlang 新手，只是在理解新范式时遇到了一些麻烦！

好的，所以我在 OTP gen_server 中有这个内部函数：

```
my_func() ->
Result = ibrowse:send_req(?ROOTPAGE,[{"User-Agent",?USERAGENT}],get),
case Result of
    {ok, "200", _, Xml} -> %<<do some stuff that won't interest you>>
,ok;
{error,{conn_failed,{error,nxdomain}}} -> <<what the heck do I do here?>>
end. 
```

如果我忽略了处理连接失败的情况，那么我会收到一个传播到主管的退出信号，它会与服务器一起关闭。

我想要发生的事情（至少我认为这是我想要发生的事情）是在连接失败时我想暂停然后重试 send_req 说 10 次，此时主管可能会失败。

如果我做这种丑陋的事情......

```
{error,{conn_failed,{error,nxdomain}}} -> stop() 
```

它会关闭服务器进程，是的，我可以使用我的（在 10 秒内尝试 10 次）重启策略，直到它失败，这也是预期的结果，但是当我从服务器到主管的返回值是“好的”时真的很想返回 {error,error_but_please_dont_fall_over_mr_supervisor}。

在这种情况下，我强烈怀疑我应该处理所有业务问题，例如在“my_func”中重试失败的连接，而不是试图让进程停止，然后让主管重新启动它以便再次尝试。

问题：在这种情况下，“Erlang 方式”是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:24:52.063

我也是erlang的新手..但是这样的事情怎么样？

代码很长只是因为注释。我的解决方案（我希望我已经正确理解了您的问题）将接收最大尝试次数，然后进行尾递归调用，这将通过将最大尝试次数与下一次进行模式匹配来停止。使用 timer:sleep() 暂停以简化事情。

```
%% @doc Instead of having my_func/0, you have
%% my_func/1, so we can "inject" the max number of
%% attempts. This one will call your tail-recursive
%% one
my_func(MaxAttempts) ->
    my_func(MaxAttempts, 0).

%% @doc This one will match when the maximum number
%% of attempts have been reached, terminates the
%% tail recursion.
my_func(MaxAttempts, MaxAttempts) ->
    {error, too_many_retries};

%% @doc Here's where we do the work, by having
%% an accumulator that is incremented with each
%% failed attempt.
my_func(MaxAttempts, Counter) ->
    io:format("Attempt #~B~n", [Counter]),
    % Simulating the error here.
    Result = {error,{conn_failed,{error,nxdomain}}},
    case Result of
        {ok, "200", _, Xml} -> ok;
        {error,{conn_failed,{error,nxdomain}}} ->
            % Wait, then tail-recursive call.
            timer:sleep(1000),
            my_func(MaxAttempts, Counter + 1)
    end. 
```

编辑：如果此代码处于受监督的进程中，我认为最好有一个 simple_one_for_one，您可以在其中动态添加所需的任何工作人员，这是为了避免由于超时而延迟初始化（在 one_for_one 中，工作人员开始顺序，并且此时进入睡眠状态将阻止其他进程初始化）。

EDIT2：添加了一个示例 shell 执行：

```
1> c(my_func).
my_func.erl:26: Warning: variable 'Xml' is unused
{ok,my_func}
2> my_func:my_func(5).
Attempt #0
Attempt #1
Attempt #2
Attempt #3
Attempt #4
{error,too_many_retries} 
```

每条打印消息之间有 1 秒的延迟。

# c - gcc 警告：赋值从没有强制转换的指针生成整数

> ID：11111525
> 
> 赞同：2
> 
> 时间：2012-06-20T01:04:54.547
> 
> 标签：c, pointers, gcc, warnings

我在我的程序中做这个任务，我得到了一个标题警告。这是代码片段：

`table_name[index] = NULL;`

我无法理解这样的声明可能存在什么问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T01:06:23.733

NULL*不是*一个有效的整数，它被分配给一个大概由 s 组成的数组的条目`int`，所以编译器在抱怨。

NULL 用作指示“无”的默认指针值。如果您有一个指针变量并将 NULL 分配给它，您会说该指针变量指向“无”。

由于这种类型不匹配，特定消息*警告*您正在尝试将一种类型（实际上是指针值）分配给另一种（`int`）而不尝试强制转换它（这就是我们有时将一种类型转换为另一种以避免类型不匹配）。

如果你有一个*指针*数组，那么这个 NULL 赋值就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:06:57.910

问题是这`table_name[index]`是一个整数值，而不是一个指针。 `NULL`旨在表示指针。

如果`table_name`声明为`int*`，你可以`table_name = NULL;`毫无问题地做，但是当 *在索引处设置一个值时*，编译器会期望你使用与数组相同的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T18:25:13.710

当我尝试将指针值分配给变量（总是相同的数据类型）时，编译器会做出相同的反应..

例子：

```
#include <stdio.h>
#include <stdlib.h>

int main(){

    int X,Y;
    int *P_1;
    float Z;
    float *P_2;

    X=5;
    Z=3.5;
    P_1=&X;
    printf("\n X = %d, Z = %.2f\n",X,Z);
    printf(" &X = %d\n",&X);
    printf(" *P_1 = %d\n",*P_1);
    printf(" P_1 = %d\n",P_1);  

    Y=X;
    printf(" Y = %d\n",Y);

    X=10;
    Y=P_1;
    fflush(stdin);
    getchar();
    return 0;   
} 
```

# ruby - 具有持久数据的 Ruby gem

> ID：11111527
> 
> 赞同：0
> 
> 时间：2012-06-20T01:05:05.090
> 
> 标签：ruby, notifications, gem, libnotify

我需要创建一个 gem，供我自己使用，它可以替换当前的“libnotify” gem，因为我发现让我的测试通知一个接一个地排队是不可用的。我将用于`dbus-send`创建通知，并获取他们的 ID。现在我需要某种方式在每个代码运行之间存储此 ID，以便在创建新通知时检索它并替换通知而不是排队新通知。

那么如何以及在哪里使用我的 gem 存储这些临时数据？它所需要的只是一个简单的临时文件，但它不是我可以在使用后删除的文件。最好的做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:44:42.000

一种常见的习惯用法是使用主目录中的隐藏文件夹。

```
~/.mygem/data 
```

# javascript - (IE9)移除浮动或绝对定位的元素会导致兄弟元素的滚动条回滚到顶部

> ID：11111528
> 
> 赞同：2
> 
> 时间：2012-06-20T01:05:20.050
> 
> 标签：javascript, html, css, browser, internet-explorer-9

我最近在 IE9 中发现了一个奇怪的行为（没有在 IE8 下测试过）：http: [//jsfiddle.net/qktfq/5/](http://jsfiddle.net/qktfq/5/)

删除黄色元素（通过单击它）将导致蓝色元素中的滚动条滚动回顶部。仅当黄色元素浮动或绝对定位时才会发生此行为。

这种行为真的很烦人。关于如何避免它的任何帮助将是一个巨大的帮助！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:58:14.553

知道了！这是因为职位。尝试将 position:relative 添加到可滚动的 div（在本例中为 div.outer），您会发现它有效。

更好：您可以使用 position:relative 将所有内容包装在 div 中，它应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:02:06.827

经过一些研究，我发现这种行为只会影响接近浮动或位置的元素：绝对元素。如果我在它们之间添加另一个元素，这种行为就会消失。[http://jsfiddle.net/qktfq/34/](http://jsfiddle.net/qktfq/34/) 但是仅为此原因添加一个空元素似乎很奇怪... Orz ...

# css - 有没有办法找到输入文本字段发光的默认样式？

> ID：11111532
> 
> 赞同：4
> 
> 时间：2012-06-20T01:06:12.580
> 
> 标签：css

你知道输入字段周围的性感光芒吗？

无需过多详细说明，我需要在输入字段之外重新创建该效果，但我似乎无法在任何地方找到指示这种效果的样式表。

（我知道怎么做，使用大纲属性等等。我只是想知道是否有一种方法可以找到输入文本字段默认使用的精确值。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T02:36:48.753

chrome 默认具有输入的轮廓样式。我必须为许多项目禁用该规则。

使用 chrome 开发者工具查看浏览器样式规则。

在此处查看如何执行此操作：

[chrome 开发者工具信息](https://developers.google.com/chrome-developer-tools/docs/elements-styles)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T02:42:21.653

可以通过 CSS 做到这一点。看看[Twitter Bootstrap Forms](http://twitter.github.com/bootstrap/base-css.html#forms)以及他们是如何做到的。在任何输入字段内单击。

在此处查看一个简单的工作示例：http: [//jsbin.com/esidas/2/edit#html,live](http://jsbin.com/esidas/2/edit#html,live)

它是使用 CSS3 属性来完成`box-shadow`的`transition`

```
input[type=text] {
  background-color: #ffffff;
  border: 1px solid #cccccc;
  -webkit-border-radius: 3px;
     -moz-border-radius: 3px;
          border-radius: 3px;
  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
     -moz-transition: border linear 0.2s, box-shadow linear 0.2s;
      -ms-transition: border linear 0.2s, box-shadow linear 0.2s;
       -o-transition: border linear 0.2s, box-shadow linear 0.2s;
          transition: border linear 0.2s, box-shadow linear 0.2s;
}

input[type=text]:focus {
  border-color: rgba(82, 168, 236, 0.8);
  outline: 0;
  outline: thin dotted \9;
  /* IE6-9 */

  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
     -moz-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
          box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(82, 168, 236, 0.6);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T04:55:27.417

我所知道的最好的跨浏览器/跨平台是[formalize](http://formalize.me/)。

如果您想弄清楚特定渲染是如何工作的（即在 Safari Mac 上），您会寻找*用户代理 css*。在现代浏览器上，整个渲染生命周期是完全参数化的，严重依赖供应商特定的前缀，并且可以使用检查工具使其可见，例如在[Chrome](https://i.stack.imgur.com/XR1Bn.jpg)或 FF+Firebug 上：

![FF+萤火虫赢](../Images/43a0233acc3f9d497171efa4e9ac8fe0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:28:16.700

那是你的*浏览器*自动为你做的。这就是为什么您找不到它的样式表的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T02:40:39.873

因为它是浏览器的效果而不是样式，所以您需要手动完成。话虽如此，请记住每个浏览器的做法都不同（我认为这也取决于客户端操作系统）。因此，如果您事先知道客户端环境（可能在封闭网络中），您实际上只能匹配它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T02:52:43.540

您知道它是由网络浏览器添加的，它取决于您使用的浏览器和操作系统，因此我们无法向您显示确切的代码。如何找到确切的样式可能并不难，尝试输入字段上的“检查元素”选项，它可能会显示浏览器的“计算样式”。否则，如果您能准确说出您在什么操作系统上使用的浏览器，我们可以为您提供帮助。

# c# - 如何检查窗口句柄是否用于控制台窗口？

> ID：11111533
> 
> 赞同：2
> 
> 时间：2012-06-20T01:06:18.490
> 
> 标签：c#, windows, interop

我有一个应用程序，使用一个进程，有两个窗口。这两个窗口的标题相同。一个是主应用程序窗口，用户与之进行所有交互。另一个是控制台窗口，纯粹用于实时记录在主窗口中执行的命令。

我目前正在实现互斥锁，如果应用程序已经打开，我想恢复并切换到当前正在运行的主应用程序窗口（而不是控制台窗口）。但是，鉴于两个窗口具有相同的标题和相同的进程，因此很难区分两者。

有没有办法确定一个窗口是否是控制台窗口？或者任何其他方式来区分这两个窗口？

# javascript - JavaScript for .. in loop IE 问题

> ID：11111535
> 
> 赞同：2
> 
> 时间：2012-06-20T01:06:32.107
> 
> 标签：javascript, internet-explorer, checkbox, for-loop

我正在尝试使用带有 javascript 的复选框。IE（使用 IE8）似乎对下面的代码有问题。它在 Firefox 中运行良好。

这是我的示例 html。

```
<input type="checkbox" name="one" id="one" />
<input type="checkbox" name="two" id="two" />
<input type="checkbox" name="three" id="three" />
<input type="checkbox" name="four" id="four" />
<input type="checkbox" name="five" id="five" /> 
```

IE 只是禁用了 id 为“one”的复选框，而不触及“5”和“3”。

```
var all = new Array("one","two","three","four","five");
var some = new Array("one","five","three");

disableFew(some);

function disableFew(few){
    for (var i in all){
        document.getElementById(all[i]).disabled = false;
    }
    for (var j in few){
        if(document.getElementById(few[j]).nodeName == 'INPUT'){
            document.getElementById(few[j]).checked = false;
        }
        document.getElementById(few[j]).value = 'disabled';
        document.getElementById(few[j]).disabled = true;
    }
} 
```

关于发生了什么的任何线索？我只是 Web 开发的初学者，所以我可能会遗漏 IE/Firefox 的一些细微差别。

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T01:12:17.860

您应该使用常规`for`循环：

```
for(var i=0; i<all.length; i++) ...
for(var j=0; j<some.length; j++) ... 
```

您正在使用的将迭代数组原型中的`for..in`其他属性，而不仅仅是您的数组索引。

另外，我会避免`all`用作变量名，也许 IE 会感到困惑（它有它的`document.all`）。但我不确定这一点。

# c++ - 为什么从 DLL 调用时 boost::wave::context 构造函数会死锁？

> ID：11111538
> 
> 赞同：3
> 
> 时间：2012-06-20T01:06:57.597
> 
> 标签：c++, boost, dll

我有一个名为 PreProcessSource 的函数，它分配一个 boost::wave::context 并进行一些预处理；没有什么花哨的。

```
std::string PreProcessSource(const std::string& instring, const std::string& defines)
{
    typedef boost::wave::cpplexer::lex_token<> token_type;
    typedef boost::wave::cpplexer::lex_iterator<token_type> lex_iterator_type;
    typedef boost::wave::context<std::string::iterator, lex_iterator_type> context_type;

    std::string source = instring;
    context_type ctx(source.begin(), source.end()); // DEADLOCK here
    ctx.set_language(boost::wave::enable_emit_line_directives(ctx.get_language(), true));

    if(!defines.empty())
    {
        std::vector<std::string> tokens;
        Split<std::string>(defines, tokens, ",");

        std::vector<std::string>::const_iterator cit = tokens.begin();

        for (;cit != tokens.end(); ++cit)
            ctx.add_macro_definition(*cit);
    }

    context_type::iterator_type first = ctx.begin();
    context_type::iterator_type last = ctx.end();

    std::string outstring;

    while (first != last)
    {
        const token_type::string_type& value = (*first).get_value();
        std::copy(value.begin(), value.end(), std::back_inserter(outstring));
        ++first;
    }

    return outstring;
} 
```

在过去（这个项目正在现代化，所以它被破坏了很长时间）它曾经在相同的设置中工作正常：

库 A 是承载 PreProcess 源函数的 DLL，可执行文件 B 使用 DLL A 并可以调用 PreProcess 源，DLL A 有时也可以调用函数本身。

但现在情况不再如此：每当 DLL A 调用函数本身，或 DLL A 调用另一个函数，而后者又调用回 DLL A PreProcess 源时，它就会死锁。

这是一个在我的单元测试中运行良好的示例：

```
BOOST_AUTO_TEST_CASE(Preprocessor)
{
    std::stringstream sstream;
    sstream << "void main(inout float4 vtxInput : POSITION) { }" << std::endl << std::endl;
    std::string source = sstream.str();
    std::string defines = "";
    try
    {
        std::string shaderCode = Nitro::PreProcessSource(source, defines);
    } catch (boost::wave::preprocess_exception& pe)
    {
        std::cerr << pe.what() << std::endl;
    }
} 
```

奇怪的是，如果在以下代码中将 DO_DEADLOCK 定义为 1，就会发生死锁：

```
class Tutorial00 : public Game
{
public:
    // ...
    Tutorial00()
    : Game()
    {
#if !DO_DEADLOCK
        std::stringstream sstream;
        sstream << "void main(inout float4 vtxInput : POSITION) { }" << std::endl << std::endl;
        std::string source = sstream.str();
        std::string defines = "";
        std::string shaderCode = Nitro::PreProcessSource(source, defines);
#endif
    }

    void LoadContent()
    {
#if DO_DEADLOCK
        std::stringstream sstream;
        sstream << "void main(inout float4 vtxInput : POSITION) { }" << std::endl << std::endl;
        std::string source = sstream.str();
        std::string defines = "";
        std::string shaderCode = Nitro::PreProcessSource(source, defines);
#endif
        // Original code that deadlocks too.
        // Calls in the DLL, which will call PreProcessSource.
        // effect->Initialize(device, source, "DX11");
    }

    // ...
};

#if 1
int APIENTRY wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPWSTR lpCmdLine, int nCmdShow)
#else
int main(int argc, char* argv[])
#endif
{
    Tutorial00 app;
    app.Run();
    return 0;
} 
```

请注意，构造函数是直接从可执行文件调用的，而 LoadContent 是从 DLL 调用的：

```
// In the DLL
void Game::Run()
{
    try
    {
        // ...

        LoadContent();

        // ...
    } catch(/* ... */) { }
} 
```

该代码是为 x64 和调试模式编译的。我使用以下选项将 boost 自己编译成一个 DLL（使用 bcp 来获取我使用的库的文件）：

**预处理器：**

*   WIN32
*   BOOST_ALL_NO_LIB
*   BOOST_ALL_DYN_LINK
*   BOOST_THREAD_BUILD_DLL
*   _DLL
*   _调试
*   _视窗
*   _USRDLL

**代码生成：**

*   C++ 异常 (/EHsc)
*   多线程调试 DLL (/MDd)
*   功能级链接 (/Gy)
*   流式 SIMD 扩展 2 (/arch:SSE2) (/arch:SSE2)
*   快速浮点模型 (/fp:fast)

除了 BOOST_ALL_DYN_LINK、BOOST_THREAD_BUILD_DLL 和字符串池选项之外，DLL A 使用相同的选项。

Boost 单元测试库作为静态库单独构建。

这是**工作**版本的堆栈跟踪：

```
Nitro.dll!boost::call_once<void (__cdecl*)(void)>(boost::once_flag & flag, void (void)* f)  Line 200    C++
Nitro.dll!boost::call_once(void (void)* func, boost::once_flag & flag)  Line 28 C++
Nitro.dll!boost::spirit::classic::static_<boost::thread_specific_ptr<boost::weak_ptr<boost::spirit::classic::impl::grammar_helper ...  Line 72 + 0x13 bytes C++
Nitro.dll!boost::spirit::classic::impl::get_definition<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 241 + 0x17 bytes   C++
Nitro.dll!boost::spirit::classic::impl::grammar_parser_parse<0,boost::wave::util::time_conversion::time_conversion_grammar, ...  Line 296 + 0xa bytes   C++
Nitro.dll!boost::spirit::classic::grammar<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 55 + 0x3c bytes C++
Nitro.dll!boost::spirit::classic::grammar<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 65 + 0x75 bytes C++
Nitro.dll!boost::spirit::classic::impl::phrase_parser<boost::spirit::classic::space_parser>::parse<char const * __ptr64,boost::wave::util::time_conversion::time_conversion_grammar> ... Line 136   C++
Nitro.dll!boost::spirit::classic::parse<char const * __ptr64,boost::wave::util::time_conversion::time_conversion_grammar, ... Line 155 + 0x3a bytes C++
Nitro.dll!boost::spirit::classic::parse<char,boost::wave::util::time_conversion::time_conversion_grammar, ... Line 173 + 0x23 bytes C++
Nitro.dll!boost::wave::util::time_conversion::time_conversion_helper::time_conversion_helper(const char * act_time)  Line 123   C++
Nitro.dll!boost::wave::util::predefined_macros::predefined_macros()  Line 196 + 0x38 bytes  C++
...
Nitro.dll!Nitro::PreProcessSource(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & instring, const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & defines)  Line 51 + 0xa0 bytes    C++
NitroCoreUnitTests.exe!Preprocessor::test_method()  Line 16 C++
NitroCoreUnitTests.exe!Preprocessor_invoker()  Line 7 + 0x1f bytes  C++
...
NitroCoreUnitTests.exe!boost::unit_test::unit_test_main(boost::unit_test::test_suite * (int, char * *)* init_func, int argc, char * * argv)  Line 187   C++
NitroCoreUnitTests.exe!main(int argc, char * * argv)  Line 238  C++
NitroCoreUnitTests.exe!__tmainCRTStartup()  Line 555 + 0x19 bytes   C
NitroCoreUnitTests.exe!mainCRTStartup()  Line 371   C
kernel32.dll!00000000766a652d()     
[Frames below may be incorrect and/or missing, no symbols loaded for kernel32.dll]  
ntdll.dll!0000000076d9c521() 
```

这是死锁的堆栈跟踪：

```
ntdll.dll!0000000076dc135a()    
[Frames below may be incorrect and/or missing, no symbols loaded for ntdll.dll] 
KernelBase.dll!000007fefd4f10dc()   
Nitro.dll!boost::call_once<void (__cdecl*)(void)>(boost::once_flag & flag, void (void)* f)  Line 197 + 0x18 bytes   C++
Nitro.dll!boost::call_once(void (void)* func, boost::once_flag & flag)  Line 28 C++
Nitro.dll!boost::spirit::classic::static_<boost::thread_specific_ptr<boost::weak_ptr<boost::spirit::classic::impl::grammar_helper ...  Line 72 + 0x13 bytes C++
Nitro.dll!boost::spirit::classic::impl::get_definition<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 241 + 0x17 bytes   C++
Nitro.dll!boost::spirit::classic::impl::grammar_parser_parse<0,boost::wave::util::time_conversion::time_conversion_grammar, ...  Line 296 + 0xa bytes   C++
Nitro.dll!boost::spirit::classic::grammar<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 55 + 0x3c bytes C++
Nitro.dll!boost::spirit::classic::grammar<boost::wave::util::time_conversion::time_conversion_grammar, ... Line 65 + 0x75 bytes C++
Nitro.dll!boost::spirit::classic::impl::phrase_parser<boost::spirit::classic::space_parser>::parse<char const * __ptr64,boost::wave::util::time_conversion::time_conversion_grammar> ... Line 136   C++
Nitro.dll!boost::spirit::classic::parse<char const * __ptr64,boost::wave::util::time_conversion::time_conversion_grammar, ... Line 155 + 0x3a bytes C++
Nitro.dll!boost::spirit::classic::parse<char,boost::wave::util::time_conversion::time_conversion_grammar, ... Line 173 + 0x23 bytes C++
Nitro.dll!boost::wave::util::time_conversion::time_conversion_helper::time_conversion_helper(const char * act_time)  Line 123   C++
Nitro.dll!boost::wave::util::predefined_macros::predefined_macros()  Line 196 + 0x38 bytes  C++
...
Nitro.dll!Nitro::PreProcessSource(const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & instring, const std::basic_string<char,std::char_traits<char>,std::allocator<char> > & defines)  Line 51 + 0xa0 bytes    C++
Tutorial01.exe!Tutorial01::LoadContent()  Line 70 + 0x33 bytes  C++
Nitro.dll!Nitro::Game::Run()  Line 40   C++
Tutorial01.exe!wWinMain(HINSTANCE__ * hInstance, HINSTANCE__ * hPrevInstance, wchar_t * lpCmdLine, int nCmdShow)  Line 149  C++
Tutorial01.exe!__tmainCRTStartup()  Line 547 + 0x42 bytes   C
Tutorial01.exe!wWinMainCRTStartup()  Line 371   C
kernel32.dll!00000000766a652d()     
ntdll.dll!0000000076d9c521() 
```

似乎 boost::wave 正在尝试解析一些时间戳，并通过这样做实例化一个语法，这就是事情似乎向南的时候。

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:23:13.997

我发现在 boost 的 trac 上打开了以下票：[boost::call_once not re-entrant (至少在 win32 中)](https://svn.boost.org/trac/boost/ticket/3407)

它说 call_once 不是可重入的，不应该被递归调用。因此，我使用的代码是未定义的行为；该票被标记为“将无法修复”。

我采取的解决方案是创建一个单独的 DLL，它只包含 PreProcessSource 函数。

# joomla - Joomla 2.5 从外部脚本获取用户数据

> ID：11111541
> 
> 赞同：0
> 
> 时间：2012-06-20T01:07:01.170
> 
> 标签：joomla, joomla2.5, external-script

我需要从 Joomla 本身之外的程序中获取当前登录到 Joomla 的用户的信息。我从 1.5 升级到 2.5，我之前拥有的不再工作了。

```
<?php

define( '_VALID_MOS', 1 );

include_once( 'globals.php' );
require_once( 'configuration.php' );
require_once( 'includes/joomla.php' );
$option="test";
$mainframe = new mosMainFrame( $database, $option, '.' );
$mainframe->initSession();

$my = $mainframe->getUser();
$joomla_name = $my->name;
$joomla_email = $my->email;
$joomla_password = $my->password; 
```

经过一番研究，我想出了这个：

```
<?php
define( '_JEXEC', 1 );
define( 'JPATH_BASE', dirname(__FILE__) );
define( 'DS', '/' );

require_once ( JPATH_BASE .DS.'configuration.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
require_once ( JPATH_BASE .DS.'libraries'.DS.'joomla'.DS.'factory.php' );

$my =& JFactory::getUser();
$joomla_name = $my->name;
$joomla_email = $my->email;
$joomla_password = $my->password;
$joomla_username = $my->username; 
```

它不会产生任何错误，但似乎可以工作。但是，用户对象是空的。此脚本与 Joomla 安装位于同一目录中。可能是什么问题？谢谢！

资料来源：

[http://www.cmsboke.com/accessing-joomla-objects-from-an-external-script/](http://www.cmsbloke.com/accessing-joomla-objects-from-an-external-script/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T22:26:46.473

取自 [http://docs.joomla.org/How_to_access_session_variables_set_by_an_external_script](http://docs.joomla.org/How_to_access_session_variables_set_by_an_external_script)

解决方案：`session_start();`在您的外部脚本中替换为

```
define( '_JEXEC', 1 );
define( 'JPATH_BASE', realpath(dirname(__FILE__).'/../..' ));
define( 'DS', DIRECTORY_SEPARATOR );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise(); 
```

请务必更改`JPATH_BASE`以适合您的目录结构。

将`$_SESSION[ 'name' ] = "value";`外部脚本中的替换为

```
$session =& JFactory::getSession();
$session->set('name', "value");
Now you can retrieve this session variable using:

$session =& JFactory::getSession();
echo $session->get('name'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:23:26.657

事实证明，我有两个问题：

1.  我的脚本是 on `www.example.com`，而我是在 下登录的`example.com`，所以不同的域正在丢弃会话数据。
2.  我也没有初​​始化应用程序，这显然是必要的。

结果如下：

```
<?php
define( '_JEXEC', 1 );
define( 'JPATH_BASE', dirname(__FILE__) );
define( 'DS', '/' );

require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );

JFactory::getApplication('site')->initialise();

$user = JFactory::getUser();
$joomla_name = $user->name;
$joomla_email = $user->email;
$joomla_password = $user->password;
$joomla_username = $user->username; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:27:06.973

~~我认为随着事情的变化，人们在 Joomla 2.5 中遇到了这个问题。我还没有找到您所要求的解决方案，但写了您可能想要使用的解决方法（但不包括密码字段）。~~

定义与数据库的连接：

```
<?php
   $host="localhost";
   $username="DB_USERNAME";
   $password="DB_PASSWORD";
   $db_name="DB_NAME";
   mysql_connect($host,$username,$password)or die(mysql_error());
   mysql_select_db($db_name)or die(mysql_error());
?> 
```

Echo 创建一个查询并将结果回显到一个表中：

```
<table style="background:#FFF; color:#000;">
<?php
$query = "SELECT username,name,email FROM j25_users "; 
$result = mysql_query($query) or die(mysql_error());
    while ($row = mysql_fetch_array($result)) { 
        echo '<tr><td>',$row["username"],'</td><td>',$row["name"],'</td><td>',$row["email"],'</td></tr>' ;
    }
?>
</table> 
```

~~您需要将 j25_users 更改为数据库表的正确前缀。~~

更新：更好地导入框架来获取用户对象。

希望这对你有用。问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T18:51:52.510

如果您想跳过使用 Joomla！功能，可以查询Joomla！数据库。加入表`js25_session`并`js25_users`使用用户 ID。这样，您可以获得网站上每个当前登录的用户和所有访客（可能还有在线用户的数量）。

# regex - 使用解析器组合器整理文本行

> ID：11111543
> 
> 赞同：2
> 
> 时间：2012-06-20T01:07:08.313
> 
> 标签：regex, scala, parser-combinators

我正在尝试使用解析器组合器解析文本文件。我想在一个名为`Example`. 这是一个显示输入文件表单的测试：

```
object Test extends ParsComb with App {
  val input = """
0)
blah1
blah2
blah3
1)
blah4
blah5
END
"""
  println(parseAll(examples, input))
} 
```

这是我的尝试不起作用：

```
import scala.util.parsing.combinator.RegexParsers

case class Example(index: Int, text: String)

class ParsComb extends RegexParsers {
  def examples: Parser[List[Example]] = rep(divider~example) ^^ 
                                          {_ map {case d ~ e => Example(d,e)}}
  def divider:  Parser[Int]           = "[0-9]+".r <~ ")"    ^^ (_.toInt)
  def example:  Parser[String]        = ".*".r <~ (divider | "END") 
} 
```

它失败了：

```
[4.1] failure: `END' expected but `b' found

blah2

^ 
```

我只是从这些开始，所以我不太清楚我在做什么。我认为问题可能与`".*".r`正则表达式不做多行有关。如何更改它以使其正确解析？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T10:46:07.550

*   错误信息是什么意思？

根据您的语法定义，`".*".r <~ (divider | "END")`您告诉解析器 an`example`后面应该跟 a`divider`或 a `END`。解析 blah1 后，解析器尝试查找`divider`并失败，然后尝试`END`，再次失败，没有其他可用选项，所以`END`这里是生产值的最后一个替代方案，所以从解析器的角度来看，它是预期的`END`，但很快发现，下一个输入`blah2`来自第 4 行。

*   如何解决？

尽量接近你的实现，你的情况下的语法应该是：

```
examples ::= {divider example}
divider  ::= Integer")"
example  ::= {literal ["END"]} 
```

而且我认为将“示例”解析为`List[String]`更有意义，无论如何，这取决于您。

问题是你的`example`解析器，它应该是一个可重复的文字。

所以 ，

```
class ParsComb extends RegexParsers {
  def examples: Parser[List[Example]] = rep(divider ~ example) ^^ { _ map { case d ~ e => Example(d, e) } }
  def divider: Parser[Int] = "[0-9]+".r <~ ")" ^^ (_.toInt)
  def example: Parser[List[String]] = rep("[\\w]*(?=[\\r\\n])".r <~ opt("END"))
} 
```

正则表达式`(?=[\\r\\n])`意味着它是一个积极的前瞻，并且会匹配后面跟着的字符`\r`or `\n`。

解析结果是：

> [10.1]解析：List(Example(0,List(blah1,blah2,blah3)),Example(1,List(blah4,blah5)))

如果要将其解析为字符串（而不是`List[String]`），只需添加一个转换函数，例如：`^^ {_ mkString "\n"}`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T06:18:08.967

您的解析器无法处理换行符，您的`example`解析器消除了下一个`divider`并且您的`example`正则表达式匹配`divider`和“END”字符串。

尝试这个：

```
object ParsComb extends RegexParsers { 
  def examples: Parser[List[Example]] = rep(divider~example) <~ """END\n?""".r ^^ {_ map {case d ~ e => Example(d,e)}} 
  def divider: Parser[Int] = "[0-9]+".r <~ ")\n" ^^ (_.toInt) 
  def example: Parser[String] = rep(str) ^^ {_.mkString}
  def str: Parser[String] = """.*\n""".r ^? { case s if simpleLine(s) => s}

  val div = """[0-9]+\)\n""".r
  def simpleLine(s: String) = s match {
    case div() => false
    case "END\n" => false
    case _ => true
  }

  def apply(s: String) = parseAll(examples, s)
} 
```

结果：

```
scala> ParsComb(input)
res3: ParsComb.ParseResult[List[Example]] =
[10.1] parsed: List(Example(0,blah1
blah2
blah3
), Example(1,blah4
blah5
)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T17:07:45.940

> 我认为问题可能出在 ".*".r 正则表达式没有做多行。

确切地。使用 dotall 修饰符（奇怪地称为“s”）：

```
def example:  Parser[String]        = "(?s).*".r <~ (divider | "END") 
```

# ruby-on-rails - simple-private-messages gem 一直说它有错误

> ID：11111548
> 
> 赞同：0
> 
> 时间：2012-06-20T01:07:58.783
> 
> 标签：ruby-on-rails, devise

当我访问[http://example.com/users/1/messages/new](http://example.com/users/1/messages/new) 它说

```
undefined method `error_message_on' for #<#<Class:0x00000005921d50>:0x0000000591e448> 
```

如果我从视图中删除具有“error_message_on”的行，则不会出现错误，但会显示空白页。太奇怪了 ：（

消息新视图就是这样。怎么了？提前致谢！！

```
<% form_for @message, :url => user_messages_path(@user) do |f| %>
  <p>
    To:<br />
        <%= f.text_field :to %>
        <%= error_message_on @message, :to %>
  </p>
  <p>
    Subject:<br />
    <%= f.text_field :subject %>
    <%= error_message_on @message, :subject %>
    </p>
    <p>
      Message<br />
      <%= f.text_area :body %>
            <%= error_message_on @message, :body %>
    </p>
    <p>
      <%= submit_tag "Send" %>
    </p>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:54:56.157

您需要更改用于 form_for 声明的 erb 标签。它应该`<%=`代替`<%`. 那应该修复空白页。

至于如何显示错误消息，[在 Rails 2.3.8](http://apidock.com/rails/ActionView/Helpers/ActiveRecordHelper/error_message_on)`error_message_on`中已弃用。你需要使用你的 Rails 版本支持的东西。[这个问题可能有用](https://stackoverflow.com/questions/3803180/rails-3-how-to-display-error-messages-in-embedded-form)，还有[这个问题](https://stackoverflow.com/questions/3873190/f-error-messages-in-rails-3-0)

# multithreading - 关于在多线程环境下提高修剪功能效率

> ID：11111551
> 
> 赞同：1
> 
> 时间：2012-06-20T01:08:22.513
> 
> 标签：multithreading, performance, boost, trim, multiprocess

我使用了 boost trim 功能，发现它在单线程环境中表现得非常好。

但是当我在多线程环境中调用trim函数时，它的性能会很差。我还发现使用多进程方法调用它会有很好的性能。

最后，我写了一个简单的trim函数，它在多线程环境或多进程环境下都表现的很好。

我想我必须在多线程环境中错误地使用它。所以我想知道出了什么问题。

感谢您的回复。

boost版本：boost 1.46.1 操作系统：linux redhat 6.1，8core，24G内存。

打击是示例代码test1.cpp，在多线程环境中调用trim函数

```
//----------------------------
---------------------
using namespace std;
using namespace boost;

void *TrimNString(void *arg) {

    string base ="fdsffdsafdsa";
    for(int i = 0; i != 50000000;i++)
    {
        string str = base;
        trim(str);
    }
    return 0;
}

int main()
{

    //8 threads to call trim function
    system("date");
    pthread_t mythread1, mythread2, mythread3, mythread4, mythread5, mythread6, mythread7,mythread8;
    pthread_create(&mythread1, NULL, TrimNString, NULL);
    pthread_create(&mythread2, NULL, TrimNString, NULL);
    pthread_create(&mythread3, NULL, TrimNString, NULL);
    pthread_create(&mythread4, NULL, TrimNString, NULL);
    pthread_create(&mythread5, NULL, TrimNString, NULL);
    pthread_create(&mythread6, NULL, TrimNString, NULL);
    pthread_create(&mythread7, NULL, TrimNString, NULL);
    pthread_create(&mythread8, NULL, TrimNString, NULL);

    pthread_join(mythread1, NULL);
    pthread_join(mythread2, NULL);
    pthread_join(mythread3, NULL);
    pthread_join(mythread4, NULL);
    pthread_join(mythread5, NULL);
    pthread_join(mythread6, NULL);
    pthread_join(mythread7, NULL);
    pthread_join(mythread8, NULL);
    system("date");
    return 0;
} 
```

test2.cpp，多进程环境调用trim函数

```
//-------------------------------------------------
/*
 * test.cpp
 *
 *  Created on: 2012-6-19
 *      Author: root
 */

#include<pthread.h>
#include <boost/algorithm/string.hpp>
#include <string>
#include <vector>
#include <cstdlib>
#include <iostream>
using namespace std;
using namespace boost;

void *TrimNString(void *arg) {

    system("./TrimNString");// TrimNString is produced by test3.cpp

    return 0;
}

int main()
{

    //8 process to call trim function
    system("date");
    pthread_t mythread1, mythread2, mythread3, mythread4, mythread5, mythread6, mythread7,mythread8;
    pthread_create(&mythread1, NULL, TrimNString, NULL);
    pthread_create(&mythread2, NULL, TrimNString, NULL);
    pthread_create(&mythread3, NULL, TrimNString, NULL);
    pthread_create(&mythread4, NULL, TrimNString, NULL);
    pthread_create(&mythread5, NULL, TrimNString, NULL);
    pthread_create(&mythread6, NULL, TrimNString, NULL);
    pthread_create(&mythread7, NULL, TrimNString, NULL);
    pthread_create(&mythread8, NULL, TrimNString, NULL);

    pthread_join(mythread1, NULL);
    pthread_join(mythread2, NULL);
    pthread_join(mythread3, NULL);
    pthread_join(mythread4, NULL);
    pthread_join(mythread5, NULL);
    pthread_join(mythread6, NULL);
    pthread_join(mythread7, NULL);
    pthread_join(mythread8, NULL);
    system("date");
    return 0;
} 
```

test3.cpp，test2.cpp 的可执行文件

```
/*
 * test.cpp
 *
 *  Created on: 2012-6-19
 *      Author: root
 */

#include<pthread.h>
#include <boost/algorithm/string.hpp>
#include <string>
#include <vector>
#include <cstdlib>
#include <iostream>
using namespace std;
using namespace boost;

//produce the executable file
int main()
{
    string base ="fdsffdsafdsa";
    for(int i = 0; i != 50000000;i++)
    {
        string str = base;
        trim(str);
    }
    return 0;
} 
```

test4.cpp，在多线程环境中调用一个简单的trim（不是boost库）函数，它的性能类似于多进程调用。

```
//-------------------------------------------------
#include<pthread.h>
#include <boost/algorithm/string.hpp>
#include <string>
#include <vector>
#include <cstdlib>
#include <iostream>
using namespace std;
using namespace boost;

void ltrim(string & str)
{
    if(str.find_first_not_of(" \n\r\t") != string::npos)
    {
        str = str.substr(str.find_first_not_of(" \n\r\t"));
    }

}

void rtrim(string & str)
{
    if(str.find_first_not_of(" \n\r\t") != string::npos)
    {
        str = str.substr(0, str.find_last_not_of(" \n\r\t") + 1);
    }

}

void trimStr(string &str)
{
    ltrim(str);
    rtrim(str);
}

void *TrimNString(void *arg) {

    string base ="fdsffdsafdsa";
    for(int i = 0; i != 50000000;i++)
    {
        string str = base;
        trimStr(str);
    }
    return 0;
}

int main()
{

    //8 threads to call trim function
    system("date");
    pthread_t mythread1, mythread2, mythread3, mythread4, mythread5, mythread6, mythread7,mythread8;
    pthread_create(&mythread1, NULL, TrimNString, NULL);
    pthread_create(&mythread2, NULL, TrimNString, NULL);
    pthread_create(&mythread3, NULL, TrimNString, NULL);
    pthread_create(&mythread4, NULL, TrimNString, NULL);
    pthread_create(&mythread5, NULL, TrimNString, NULL);
    pthread_create(&mythread6, NULL, TrimNString, NULL);
    pthread_create(&mythread7, NULL, TrimNString, NULL);
    pthread_create(&mythread8, NULL, TrimNString, NULL);

    pthread_join(mythread1, NULL);
    pthread_join(mythread2, NULL);
    pthread_join(mythread3, NULL);
    pthread_join(mythread4, NULL);
    pthread_join(mythread5, NULL);
    pthread_join(mythread6, NULL);
    pthread_join(mythread7, NULL);
    pthread_join(mythread8, NULL);
    system("date");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:25:55.483

您没有提供语言环境，因此 trim 将使用当前语言环境。获取当前语言环境可能需要一个锁，这可能会导致您的性能问题。

尝试创建一次语言环境并在所有修剪调用中使用它

```
std::locale mylocale = std::locale();

...

trim(str, mylocale); 
```

# twitter-bootstrap - Bootstrap：使用具有固定和响应式布局的谷歌地图

> ID：11111552
> 
> 赞同：3
> 
> 时间：2012-06-20T01:08:30.473
> 
> 标签：twitter-bootstrap

我正在尝试将 Google 地图放置在 Boostrap 布局中，在传统网页上使用固定宽度，并在移动设备上查看时使用响应式布局。

我已经阅读了 Google 地图如何对 Bootstrap 布局和可用修复造成问题。我使用了这段代码，它在几个网站上被列为修复：

```
#map_canvas label { width: auto; display:inline; }
#map_canvas img { max-width: none; max-height: none; } 
```

这适用于固定布局，但在移动设备上查看时不提供任何响应。

在使用 Bootstrap 时有什么方法可以实现这两个目标？非常感谢分享的任何见解或经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T20:00:00.140

你不`max-width`想像@matt 建议的那样，但他在正确的轨道上。流体列设置相对大小。Google 已经在框架中设置了大小，您希望将其覆盖为您的网格允许的最大大小；你想要经常`width`的。

```
iframe, object, embed { width: 100%; } 
```

我建议把它放在一个`div`被调用的`#gmap`地方并且更合理，

```
#gmap iframe, #gmap object, #gmap embed { width: 100%; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-21T08:28:37.363

用它。这个对我有用。希望它也能解决你的问题

```
 <iframe width="100%" height="350" frameborder="0" scrolling="no" marginheigh
    t="0" marginwidth="0" src="https://maps.google.co.uk/maps?f=q&amp;source=s_q
    &amp;hl=en&amp;geocode=&amp;q=Littlehampton,+UK&amp;aq=0&amp;oq=little&amp;s
    ll=53.800651,-4.064941&amp;sspn=20.121063,44.384766&amp;ie=UTF8&amp;hq=&amp;
    hnear=Littlehampton,+West+Sussex,+United+Kingdom&amp;t=m&amp;ll=50.811033,-0
    .538673&amp;spn=0.018982,0.036478&amp;z=14&amp;iwloc=A&amp;output=embed">
    </iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T20:55:38.770

实际上，如果您只是使用嵌入的谷歌地图 IFRAME，您只需将其添加到您的 CSS 即可使其具有响应性（假设您不使用任何其他 iframe：

```
iframe, object, embed{max-width: 100%;} 
```

如果您的容器/主题是响应式的，这将非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T12:42:24.537

[http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio](http://ansciath.tumblr.com/post/7347495869/css-aspect-ratio)中描述的技术效果很好。

只需将此处给出的示例中的“某些文本”替换为 Google 地图代码即可。

# python - 可以有一个属性修饰的方法来在 Python 中返回一个类吗？

> ID：11111554
> 
> 赞同：1
> 
> 时间：2012-06-20T01:08:33.953
> 
> 标签：python

假设我有以下代码：

```
class MyClass(object):
    def __init__(self, param):
        self.param = param

    @property
    def super_param(self):
        return Param(self, self.param)

class Param(object):
    def __init__(self, parent, param):
        self.param = param
        self.parent = parent

    @property
    def get_parent(self):
        return self.parent 
```

我的问题是，以这种方式使用 @property 装饰器是否被认为是不好的做法？有什么优点或缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:11:19.973

为什么不只是

```
class MyClass(object):
    def __init__(self, param):
        self.param = Param(self, param) 
```

我不认为从一个属性返回一个类有什么特别的错误。一个更好的问题是，你这样做是为了达到什么目的？

**编辑：**如果您不想更改它，请将其设为私有财产：

```
class MyClass(object):
    def __init__(self, param):
        self._param = param     # naming convention, 'don't muck with it'
        # OR
        self.__param = param    # name mangled

    @property
    def param(self):
        return self._param 
```

# c# - 使用 T4MVC 在 RedirectToAction() 中传递一个对象

> ID：11111555
> 
> 赞同：1
> 
> 时间：2012-06-20T01:08:36.917
> 
> 标签：c#, asp.net-mvc-3, t4mvc

> **可能重复：**
> [将数据从动作传递到另一个动作](https://stackoverflow.com/questions/10957501/pass-data-from-action-to-another-action)

我有一个视图，我在其中提交表单，并根据我想要重定向到操作的结果。与 action 对应的视图是强类型的，它应该接受 ResultsViewModel。

我正在尝试使用 T4MVC 传递 ResultsViewModel。

下面是代码：

```
 [HttpPost]
    public virtual ActionResult AddEntity(string viewModel)
    {
        //Deserialize using Json.NET
        var entity = JsonConvert.DeserializeObject<MyEntity>(viewModel);

        var success = DoSomething(); //returns boolean
        if(success)
        {
            var result = new ResultsViewModel { MyEntity = entity, MessageId = 1};
            return RedirectToAction(MVC.MyController.ResultsPage(result));
        }

        var result = new ResultsViewModel { MyEntity = entity, MessageId = 2};
        return RedirectToAction(MVC.MyController.ResultsPage(result));
    }

    public virtual ActionResult ResultsPage(ResultsViewModel viewModel)
    {
        return View(viewModel);
    } 
```

当代码到达

```
 public virtual ActionResult ResultsPage(ResultsViewModel viewModel)
    {
        return View(viewModel);
    } 
```

viewModel 始终等于 null。

我知道我可以做这样的事情：

```
return RedirectToAction("ResultsPage", new { viewModel = result }); 
```

编辑：我尝试了 return RedirectToAction("ResultsPage", new { viewModel = result }); 而且我的viewModel中也有一个空值。

但是我试图弄清楚为什么/如何使用 T4MVC 传递对象。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T01:29:48.160

利用`TempData`

```
[HttpPost]
public virtual ActionResult AddEntity(string viewModel)
{
    //Deserialize using Json.NET
    var entity = JsonConvert.DeserializeObject<MyEntity>(viewModel);

    var success = DoSomething(); //returns boolean
    if(success)
    {
        var result = new ResultsViewModel { MyEntity = entity, MessageId = 1};
        return RedirectToAction(MVC.MyController.ResultsPage(result));
    }

    var result = new ResultsViewModel { MyEntity = entity, MessageId = 2};

    TempData["Result"] = result;

    return RedirectToAction(MVC.MyController.ResultsPage(result));
}

public virtual ActionResult ResultsPage()
{
    ResultsViewModel model = (ResultsViewModel)TempData["Result"];
    return View(model);
} 
```

# ruby-on-rails-3 - Rails 3: Choose and run a Mechanize script from inside Rails action.

> ID：11111560
> 
> 赞同：2
> 
> 时间：2012-06-20T01:09:05.290
> 
> 标签：ruby-on-rails-3, mechanize

My application scrapes information from various sites using Mechanize. Naturally, each site requires custom Mechanize code. Each site is stored in my database, including the url to scrape and the string name of an .rb file containing that site's Mechanize code. For this case, let's assume the scripts are available in the assets folder.

I would like to call `http://example.com/site/:id`, then have the show action dynamically choose which Mechanize script to run (say, `@site.name + ".rb"` ). The script will massage the data into a common model, so all sites can use the same show template.

I can't find a way to dynamically load a .rb script within an action and obtain the result. It may be easier to have the scripts return a JSON string, which I can parse before passing on to the template, but I can't see a solution for that either. Ideally, the script will run in the action's scope. The ugly solution is an enormous if-else chain (testing the site name to determine which code block to run), but there must be a better way.

Any suggestions would be greatly appreciated, as would any general solutions to running different code dependent upon the properties of database objects.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:26:38.080

If you have all the code in your app already why are you eval'ing Ruby code?

Create classes like:

```
class GoogleSpider < Spider; end
class NewYorkTimesSpider < Spider; end
class SomeOtherSpider < Spider; end 
```

And the site class will hold the class name that will be used, so you would be able to easily do something like this in your controller action:

```
def show
  @site = Site.find(params[:id])
  # name contains SomeOtherSpider
  @process_output = @site.name.constantize.new.process
  # do something with the output here
end 
```

And then you don't need to mess around evaluating Ruby code, just call the class needed. You can even make them all singletons or keep them all in a hash for faster access.

# linux - rsync 使用包含选项仅复制某些类型的文件

> ID：11111562
> 
> 赞同：153
> 
> 时间：2012-06-20T01:09:36.540
> 
> 标签：linux, bash, shell, rsync

我使用以下 bash 脚本仅复制特定扩展名的文件（在本例中为 *.sh），但它仍然复制所有文件。怎么了？

```
从=$1
到=$2

rsync -zarv --include="*.sh" $from $to

```

* * *

## 回答 #1

> 赞同：262
> 
> 时间：2012-06-20T01:48:42.093

我认为`--include`用于包含以其他方式排除的文件子集`--exclude`，而不是仅包含那些文件。换句话说：您必须考虑*包含*含义**不排除**。

请尝试：

```
rsync -zarv  --include "*/" --exclude="*" --include="*.sh" "$from" "$to" 
```

对于 rsync 3.0.6 或更高版本，顺序需要修改如下（见注释）：

```
rsync -zarv --include="*/" --include="*.sh" --exclude="*" "$from" "$to" 
```

添加`-m`标志将避免在目标中创建空目录结构。在 3.1.2 版本中测试。

因此，如果我们只想要 *.sh 文件，我们必须排除所有文件`--exclude="*"`，包括所有目录`--include="*/"`并包括所有 *.sh 文件`--include="*.sh"`。

您可以在[手册页的](https://linux.die.net/man/1/rsync)**包含/排除模式规则**部分找到一些很好的示例

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2015-09-11T15:42:29.830

@chepner 的答案将复制所有子目录，无论它是否包含文件。如果您需要排除不包含文件的子目录并仍保留目录结构，请使用

```
rsync -zarv  --prune-empty-dirs --include "*/"  --include="*.sh" --exclude="*" "$from" "$to" 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-07-23T13:55:03.183

这是手册页中的重要部分：

> 随着要传输的文件/目录列表的建立，rsync 会依次检查要传输的每个名称与包含/排除模式列表的比较，并且对第一个匹配模式进行操作：如果它是排除模式，则该文件是跳过；如果它是包含模式，则不会跳过该文件名；如果没有找到匹配的模式，则不跳过文件名。

总结一下：

*   不匹配任何模式意味着将复制文件！
*   一旦任何模式匹配，算法就会退出

此外，以斜杠结尾的内容是匹配目录（就像`find -type d`会一样）。

让我们从上面拆开这个答案。

```
rsync -zarv  --prune-empty-dirs --include "*/"  --include="*.sh" --exclude="*" "$from" "$to" 
```

1.  不要跳过任何目录
2.  不要跳过任何`.sh`文件
3.  跳过所有内容
4.  （隐含地，不要跳过任何内容，但上面的规则会阻止默认规则发生。）

最后，`--prune-empty-directories`保持第一条规则不会在整个地方创建空目录。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-02-17T13:32:16.010

另一个补充：如果您只需要在**一个目录**中通过其扩展名同步文件（没有递归），您应该使用这样的结构：

```
rsync -auzv --include './' --include '*.ext' --exclude '*' /source/dir/ /destination/dir/ 
```

请注意第一个中的点`--include`。`--no-r`在这种结构中不起作用。

**编辑：**

感谢 gbyte.co 的宝贵意见！

**编辑：**

这些`-uzv`标志与这个问题没有直接关系，但我将它们包括在内，因为我经常使用它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-20T09:49:15.267

编写了这个方便的函数并放入我的 bash 脚本或`~/.bash_aliases`. 使用 bash 在 Linux 上本地测试同步并`awk`安装。有用

```
selrsync(){
# selective rsync to sync only certain filetypes;
# based on: https://stackoverflow.com/a/11111793/588867
# Example: selrsync 'tsv,csv' ./source ./target --dry-run
types="$1"; shift; #accepts comma separated list of types. Must be the first argument.
includes=$(echo $types| awk  -F',' \
    'BEGIN{OFS=" ";}
    {
    for (i = 1; i <= NF; i++ ) { if (length($i) > 0) $i="--include=*."$i; } print
    }')
restargs="$@"

echo Command: rsync -avz --prune-empty-dirs --include="*/" $includes --exclude="*" "$restargs"
eval rsync -avz --prune-empty-dirs --include="*/" "$includes" --exclude="*" $restargs
} 
```

## 好处：

当一个人想要添加更多参数（即`--dry-run`）时，它很方便且可扩展。

## 例子：

```
selrsync 'tsv,csv' ./source ./target --dry-run 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-11T19:39:46.623

如果有人在寻找这个……我只想 rsync 特定的文件和文件夹，并设法用这个命令来做到这一点：`rsync --include-from=rsync-files`

使用 rsync 文件：

```
my-dir/
my-file.txt

- /* 
```

# ruby - 从数组数组中获取最后一个值

> ID：11111565
> 
> 赞同：3
> 
> 时间：2012-06-20T01:10:17.727
> 
> 标签：ruby, arrays

```
arr = [[a,1], [b,3], [c,2]] 
```

如何将上述数组转换为以下数组：

```
[1,3,2] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T01:14:10.053

使用[`map`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-map)& [`last`](http://ruby-doc.org/core-1.9.3/Array.html#method-i-last)：

```
arr.map(&:last)  #=> [1,3,2] 
```

这相当于更长的

```
arr.map { |o| o.last } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T01:13:53.227

简直了`arr.map(&:last)`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T01:15:19.830

执行此操作的另一种更明确的方法是使用 Array#collect：

```
array = [['a', 1], ['b', 3], ['c', 2]]
array.collect { |subarray| subarray.last } 
```

这仅取决于您需要什么语义来表示您正在做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T01:13:31.493

如果每个元素都是一个 2 元素数组，那么就像这样

```
arr.map{|x,y| y} 
```

# php - jQuery $.post() 函数难以显示结果？

> ID：11111567
> 
> 赞同：3
> 
> 时间：2012-06-20T01:10:54.670
> 
> 标签：php, javascript, jquery, post

我正在使用 jQuery 的 $.post 函数从 php 文件中检索一些数据，但返回的数据似乎没有显示？这就是我所拥有的。

**Javascript代码：**

```
$(document).ready(function(){
$("#import").click(function(){
        //This code works when uncommented, used for debugging.
        /*var x = "tester";
        $('input[name=title]').val(x);*/

        $.post("import.php", function(data){
            $('input[name=title]').empty().val(data.name); // John
            $('input[name=subtitle]').empty().val(data.time); //  2pm
            }, "json");
    });
}); 
```

**PHP import.php 代码：**

```
<?php
    $my_array = array("name"=>"John","time"=>"2pm");
    echo json_encode($my_array); 
?> 
```

我错过了什么愚蠢的事情，或者我做错了。我对 javascript/jquery 还很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:54:44.357

您必须使用 json.parse() 并将其分配给变量以将其用作对象。

[从这里](https://github.com/douglascrockford/JSON-js)下载 json2.js

json.parse 有[这个](http://www.json.org/js.html)文档。

JSON 的请求类型并不意味着 ajax 函数将“数据”值作为对象返回。它仍然是一个字符串，需要解析

```
var myObject = JSON.parse(data); 
```

然后你可以像使用它一样

```
alert(myObject.name); 
```

# c++ - C++ 编译器在 main 之后实现动态初始化

> ID：11111568
> 
> 赞同：4
> 
> 时间：2012-06-20T01:11:07.507
> 
> 标签：c++

C++ 标准第 3.6.2 节第 3 段指出，非本地对象的动态初始化是否发生在 main() 的第一条语句之后是实现定义的。

有谁知道这是什么原理，哪些编译器会以这种方式推迟非本地对象初始化？我最熟悉 g++，它在输入 main() 之前执行这些初始化。

这个问题是相关[的：静态变量的动态初始化阶段](https://stackoverflow.com/questions/6372032/dynamic-initialization-phase-of-static-variables) 但我特意问的是已知哪些编译器会以这种方式运行。

这一段的唯一理由可能是支持在运行时加载的动态库，但我认为该标准没有考虑动态加载问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:04:01.147

原因之一可能是：

```
static char data[1000000000000000000000000000000];

void main(int argc)
{
    if (argc > 0)
        data[0] = 0;
} 
```

只有当事实证明确实需要它时才分配和初始化这个静态数组可能是合理的。某些申请可能会遇到类似的情况，并且有足够的发言权来说服委员会。根据我自己使用 C# 的经验，我遇到了在 jitting 类后没有立即分配类的静态成员的情况。在第一次使用时，它们被一个一个地分配。在那种情况下，绝对没有理由这样做。这简直是​​一场灾难。也许他们现在解决了这个问题。

其他原因也是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T00:56:02.117

来自 C++11 草案：

> 具有静态存储持续时间的非局部变量的动态初始化是否在 main 的第一条语句之前完成是实现定义的。如果初始化延迟到 main 的第一个语句之后的某个时间点，它应该发生在与要初始化的变量**在同一翻译单元中定义的任何函数或变量的第一次 odr-use (3.2)之前。***[强调我的]*

也就是说，必须在使用同一翻译单元中定义的任何内容之前初始化静态变量。

在我看来，这样做是为了允许动态库（DLL 或 SO）被延迟加载和初始化，甚至动态地（调用`dlopen`或`LoadLibrary`其他）。很明显，在 DLL 本身加载之前，无法初始化 DLL 中定义的变量。

自然，C++ 对 DLL 一无所知，因此标准中没有直接提及它们。但是委员会的人确实知道真实的环境和编译器，当然也知道 DLL。如果没有这个子句，延迟加载 DLL 在技术上会违反 C++ 规范。（并不是说它会阻止实现者这样做，但是如果我们都尝试彼此配合会更好。）

关于哪些系统支持这一点，据我所知，至少 MS Visual C++ 编译器支持惰性动态链接（DLL 甚至在第一次使用之前不会被加载）。大多数现代平台都支持动态加载 DLL。

# c++ - linux发送带有标志MSG_DONTWAIT的调用

> ID：11111574
> 
> 赞同：2
> 
> 时间：2012-06-20T01:11:57.630
> 
> 标签：c++, linux, sockets, tcp, network-programming

在阻塞套接字上，如果我`MSG_DONTWAIT`在每个调用的基础上设置标志，它是否会影响整个套接字，因为这个调用是用这个标志进行的，所以套接字现在会像非阻塞套接字一样工作吗？

我的意思`recv`是阻塞套接字会开始表现得像非阻塞`recv`吗？

或者这个标志的效果是否只会持续到请求的单次发送调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T10:03:02.930

提供给的标志`sendmsg()`只会影响`sendmsg()`调用。

# php - 如何防止数据库在引号中添加斜杠

> ID：11111577
> 
> 赞同：8
> 
> 时间：2012-06-20T01:12:12.607
> 
> 标签：php, mysql, zend-framework, hosting, addslashes

我知道这听起来很常见而且微不足道，但是，我在这里遇到了挑战。我有一个带有 Zend/Doctrine 的网站，我使用 ckeditor 进行后端管理。上传网站后，我意识到在编辑测试期间网站的外观和感觉搞砸了。

在萤火虫的帮助下，我看到整个 html 上都有斜线。内联版后，外观恢复正常。有这么多文件，我想不出在从mysql输出数据之前做其他解码。

我有什么选择来解决这个问题。网站已经上线了，我对此感到有点不自在。谁能给个提示？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T01:17:59.823

可能是`magic_quotes_gpc`。你能验证它是否已关闭？

这是一种关闭它的方法：http: [//php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

> 为 GPC（Get/Post/Cookie）操作设置 magic_quotes 状态。当 magic_quotes 打开时，所有 '（单引号）、"（双引号）、\（反斜杠）和 NUL 都会自动使用反斜杠进行转义。

另外，您是否使用准备好的语句？PHP PDO/MySQL我会自动为你转义。取决于您使用的查询类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T01:27:07.417

似乎您的数据在插入数据库之前被双重转义。您是在使用`mysql_real_escape_string`还是`addslashes`在将数据插入数据库之前？如果是这样，也许您想在插入数据之前使用stripslashes，如下所示：

```
mysql_real_escape_string(stripslashes($data)); 
```

否则，您从数据库中取出数据后，理论上可以调用 stripslashes：

```
stripslashes($data); 
```

不过，第二种方法不太理想。最好将数据正确存储在数据库中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T09:27:33.333

我感谢每一个人的帮助。真正被接受的解决方案应该是来自@Stanislav Palatnik 的解决方案。只是它不适用于我的.htaccess。托管服务器非常好，可以在我的 public_html 中放置一个 php.ini，让我可以更改它。所以 +1 @Stanislav Palatnik 因为他指出了这个问题。我还发现了有趣的信息，我想我会分享，以防有人发现自己处于我的境地。

```
info from: http://support.godaddy.com/groups/web-hosting/forum/topic/how-to-turn-off-magic_quotes_gpc/
Yes – the solution below worked for me:

(1) First of all do not try to turn off the magic quotes in your .htaccess file, it won’t work on godaddy.
(2) Second, if you’re running PHP5 on your account, rename your php.ini file to php5.ini, make sure it’s in your root folder.
(3) Third, make sure all the lines in your php5.ini file end in a semi colon ;
(4) Fourth, add this line to your php5.ini file:
magic_quotes_gpc = Off; 
```

在同一页面上，有人说它不应该只是 magic_quotes_gpc，还有其他的，如下所示：

```
magic_quotes_gpc = Off;
magic_quotes_runtime = Off;
magic_quotes_sybase = Off; 
```

希望这对某人有所帮助。特别感谢@Stanislav Palatnik

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T05:11:03.260

如果这是一个魔术引号问题，并且我记得您只能访问您的 application.ini，您可以添加以下内容并尝试一下

```
phpSettings.magic_quotes_gpc = 0
phpSettings.magic_quotes_runtime = 0 
```

这仍然需要允许您的用户/用户组更改默认的 php 设置；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-13T07:11:45.627

```
 <?php
     if (get_magic_quotes_gpc()) {
$process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
while (list($key, $val) = each($process)) {
    foreach ($val as $k => $v) {
        unset($process[$key][$k]);
        if (is_array($v)) {
            $process[$key][stripslashes($k)] = $v;
            $process[] = &$process[$key][stripslashes($k)];
        } else {
            $process[$key][stripslashes($k)] = stripslashes($v);
        }
    }
}
unset($process);}
 ?> 
```

将此添加到具有插入/更新查询的 php 页面:)

# google-app-engine - 会话中的 Twitter4j 请求令牌（Google-App-Engine 中的 Struts2）

> ID：11111578
> 
> 赞同：1
> 
> 时间：2012-06-20T01:12:12.983
> 
> 标签：google-app-engine, struts2, twitter4j

在我的操作中，我将请求令牌存储如下：

```
//TwitterOath
public String execute(){
    Twitter twitter = new TwitterFactory().getInstance();
    twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

    try {
        RequestToken requestToken = twitter.getOAuthRequestToken(REDIRECT_URI);
        authUrl = requestToken.getAuthenticationURL();

        //session
        Map<String, Object> session = ActionContext.getContext().getSession();
        session.put("requestToken", requestToken);

    } catch (TwitterException e) {
        e.printStackTrace();
    }

    return SUCCESS;
} 
```

在 REDIRECT_URI 操作中：

```
RequestToken requestToken = (RequestToken)
    ActionContext.getContext().getSession().get("requestToken"); 
```

问题是有时 requestToken 为空。

# html - openlayers 附加不透明度渲染不均等

> ID：11111579
> 
> 赞同：1
> 
> 时间：2012-06-20T01:12:16.033
> 
> 标签：html, openlayers

我最近将[scriptaculous 滑块](http://madrobby.github.com/scriptaculous/slider/)与一些类似的图层集成在一起，以实现图层之间的“补间”效果。

拖动滑块时，图层的不透明度会改变。任何时候都不会有超过 2 层可见，并且在相交点处，只有一层可见。

两个（或一个）可见层的总不透明度始终为 0.63，因此将为这些层分配其各自不透明度级别的一部分，即在某一点，layerA=0.1 和 layerB=0.53。

这些层都是纯色的，在许多情况下，相同的颜色覆盖所有层的相同区域。

就数学而言，我的实现是完美的。

**问题**是，虽然 2 层的总不透明度保持在 0.63，但组合的视觉透明度会波动。随着达到 2 层之间的中点，组合的视觉透明度增加。

这会在拖动滑块时产生闪烁效果。

本质上，如果`a`和`b`都是基础层上的纯红色可见层，我的观察是：

```
a.opacity=0.31 + b.opacity=0.32 < a.opacity=0.01 + b.opacity=0.62 
```

我已经在 chrome 和 firefox 上对此进行了测试，结果相同。

这是 openlayers、javascript 还是渲染器问题，是否有替代方法？

# java - 第一个标签总是被调用

> ID：11111581
> 
> 赞同：3
> 
> 时间：2012-06-20T01:12:25.253
> 
> 标签：java, android, android-tabhost

我正在尝试使用 Tabhost，我有 2 个选项卡，每个选项卡加载一个 Activity，每个 Activity 都有一个 aSync 方法来解析一些数据。如果我`setCurrentTab(0)`在创建 Tabmenu Activity 时这样做一切正常，但如果我尝试在第二个选项卡上启动应用程序（`setCurrentTab(1)`），它会尝试加载第一个选项卡，并执行第一个选项卡的 aSync 方法并崩溃，因为缺少某些数据让方法起作用，根本不应该调用它。

这是 TabMenu.Activity：

```
public class TabMenu extends TabActivity {

TabHost tabHost = null;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    setResult(resultCode);
    this.finish();
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu);
    Intent intentToGet = getIntent();
    tabHost = getTabHost(); 
    TabHost.TabSpec spec; 
    Intent intent; 
    TabHost.TabSpec spec2; 
    Intent intent2; 

    intent = new Intent().setClass(this, HoursActivity.class);
    intent.putExtra("student", intentToGet.getStringExtra("student"));
    intent.putExtra("pass", intentToGet.getStringExtra("pass"));
    intent.putExtra("un", intentToGet.getStringExtra("un"));

    spec = tabHost
            .newTabSpec("hours")
            .setIndicator("Hours")
            .setContent(intent);
    tabHost.addTab(spec);

            intent2 = new Intent().setClass(this, NotesActivity.class);
    intent2.putExtra("student", intentToGet.getStringExtra("student"));
    intent2.putExtra("pass", intentToGet.getStringExtra("pass"));
    intent2.putExtra("un", intentToGet.getStringExtra("un"));
    spec2 = tabHost
            .newTabSpec("notes")
            .setIndicator("Notes")
            .setContent(intent2);
    tabHost.addTab(spec2);

    tabHost.setCurrentTab(1);   
} 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:07:18.573

在过去，我不得不做类似的事情并通过执行以下操作来解决它：

1.  在 HoursActivity 类中创建一个静态布尔变量 CAN_LOAD = false 和 HAS_LOADED = false。
2.  一旦在 NotesActivity 中发生任何需要加载 HoursActivity 类的事情，请将 CAN_LOAD 设置为 true。
3.  在 HoursActivity 中，在 onCreate 和 onResume 上调用您要运行的加载函数，并在该函数中测试 CAN_LOAD == true && HAS_LOADED == false 并且仅在两者都通过时才加载，在函数中设置 HAS_LOADED = true 以便它不会多次运行。

因此，当您单击选项卡时，将调用 onResume 并且 Activity 可以进行所需的任何设置。如果加载函数执行速度很慢，可能会出现性能问题，在这种情况下，您需要稍微修改它，以免等到 onResume 加载（保持异步）。但这至少应该让你开始。

# jquery - 从选择选项更改字体颜色

> ID：11111585
> 
> 赞同：2
> 
> 时间：2012-06-20T01:14:07.730
> 
> 标签：jquery, css

我正在编写一些代码，基本上我有一个表格。在该表单上是一个选择选项，我希望用户在其中选择字体颜色。然后，我需要将该选项附加到页面上的元素，方法是添加他们选择作为 css 类的选项。需要现场做这个。

所以形成这样的元素：

```
<select id="selectcolor" name="selectcolor" style="width: 200px;">
                        <option value="null">-- Select a Color ... --</option>
                        <option value="black">Black</option>
                        <option value="white">White</option>
                </select> 
```

我做的JS是：

```
//select text color
    $("#selectcolor").change(function(){
    var color = $(this).val();
    $(".selectcolor").css("color", 'color'); 
```

将更改应用到的 HTML：

```
<div class="rightBottom selectcolor">Change this text<br />color</div> 
```

然后在css中我要做：

```
.black {color:#000;}
.white {color:#fff;} 
```

等等

基本上，当用户更改选择选项时，假设为黑色，类属性将 div / span 元素上的文本颜色更改为黑色。ETC

请有任何建议，我尝试添加选择选项值颜色：#000 等但没有用，我猜我忽略了几个问题......

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:25:17.067

```
$('#selectcolor').change(function() {
    var color = this.value || '';
    $('.selectcolor').attr('class', function(i, classes) {
        var cls = classes.split(/[\s]/);
        cls[2] = color;
        return cls.join(' ');
    });
}); 
```

**[演示](http://jsfiddle.net/QStkd/347/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:23:00.043

我认为这是因为您使用的是常量“颜色”而不是使用可变颜色。换行：

```
 $(".selectcolor").css("color", 'color'); 
```

至：

```
$(".selectcolor").css("color", color) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T14:14:36.147

正如我所理解的那样，您希望元素根据选定的选项值获得正确的类名；

因此，这是想到的解决方案：

```
<select id="selectcolor" name="selectcolor" style="width: 200px;">
     <option value="null">-- Select a Color ... --</option>
     <option value="000000">Black</option>
     <option value="ffffff">White</option>
</select>

$("#selectcolor").change(function(){
    var color = $(this).val();
    $(".selectcolor").css('color', '#'+ color);
} 
```

希望它可以帮助你。我没有测试代码，但它背后的想法是您将选项值设置为不带 # 符号的颜色代码，因此在第三行查询中会将 # 粘贴到字符串中。在 jQuery 中使用变量时要小心，不要用 \' 包围它，因为它会将其解释为静态文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:25:18.207

我认为你需要改变

`$(".selectcolor").css("color", 'color');`

至

`$(".selectcolor").css("color", color);`

# javascript - javascript中的for循环是如何执行的？

> ID：11111587
> 
> 赞同：2
> 
> 时间：2012-06-20T01:14:19.040
> 
> 标签：javascript, for-loop

我不知道如何最好地处理`for`JavaScript 中的循环。希望对`for`循环的理解将有助于阐明其他类型的循环。

**示例代码**

```
for (var i=0; i < 10; i=i+1) {
    document.write("This is number " + i);
} 
```

我的理解是，当`i`已初始化时，它以`0`which 的值开始，然后根据条件进行评估`< 10`。如果小于`10`，则执行语句`document.write("This is number + i);`一旦执行了前面的语句，它**才会**将下一个值增加`1`。

我咨询过的指南：

1.  [http://www.functionx.com/javascript/Lesson11.htm](http://www.functionx.com/javascript/Lesson11.htm)
2.  [http://www.cs.brown.edu/courses/bridge/1998/res/javascript/javascript-tutorial.html#10.1](http://www.cs.brown.edu/courses/bridge/1998/res/javascript/javascript-tutorial.html#10.1)
3.  [http://www.tizag.com/javascriptT/javascriptfor.php](http://www.tizag.com/javascriptT/javascriptfor.php)

现在[http://www.functionx.com/javascript/Lesson11.htm](http://www.functionx.com/javascript/Lesson11.htm)上的指南似乎另有说明，即

> 要执行此循环，请检查开始条件。这通常是开始计数的初始值。接下来，测试Condition；此测试确定循环是否应该继续。如果测试呈现真实结果，则使用表达式修改循环并执行语句。执行完语句后，循环重新开始。

抛出我的行是“如果测试呈现真实结果，则表达式用于修改循环并执行语句”。这似乎暗示因为`0`小于`10`，增量表达式被修改，这将是`0 + 1`然后执行语句，例如`document.write`。

**我的问题**

`for`解释循环的正确方法是什么？我自己的理解正确吗？相同的理解是否适用于其他编程语言，例如 PHP、Perl、Python 等？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T01:20:37.060

将 for 循环想象如下

```
for(initializers; condition; postexec) {
    execution
} 
```

1.  当循环首次启动时，代码`var i = 0`将运行。这会初始化您将在循环内测试的变量

2.  接下来循环计算`i < 10`表达式。这将返回一个布尔值，该值将在前 10 次运行时为真。当这个表达式一直评估为真时，循环内的代码会运行。

    `document.write("This is number " + i);`

3.  每次运行此代码后，`i++`都会执行循环的最后一部分。此示例中的此代码在`i`每次执行后加 1。

执行该代码后，检查循环条件并重复步骤 2 和 3，直到最终条件为假，在这种情况下退出循环。

这是循环在您提到的语言中工作的方式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-20T01:26:44.660

让我们看一下[ECMAScript 规范中的相应部分](http://es5.github.com/#x12.6.3)：

> 产生
> *式 IterationStatement* : `for ( var` *VariableDeclarationListNoIn* `;` *Expression* [opt] `;` *Expression* [opt]`)` *语句*
> 的评估如下：
> 
> ```
> 1\. Evaluate VariableDeclarationListNoIn.
> 2\. Let V = empty.
> 3\. Repeat
>   a. If the first Expression is present, then
>      i. Let testExprRef be the result of evaluating the first Expression.
>      ii. If ToBoolean(GetValue(testExprRef)) is false, 
>          return (normal, V, empty).
>   b. Let stmt be the result of evaluating Statement.
>   ...
>   f. If the second Expression is present, then
>      i. Let incExprRef be the result of evaluating the second Expression.
>      ii. Call GetValue(incExprRef). (This value is not used.) 
> ```

如您所见，在第 1 步中，评估了变量赋值。在步骤 3a 中，测试条件。在步骤 3b 中，评估循环体，然后*在*步骤 3f 中评估第三个表达式。

因此，您对`for`循环的理解是正确的。

* * *

假设它在其他语言中的工作方式相同，因为`for`循环在编程语言中是如此常见的语句（注意 Python 没有这样的语句）。但是，如果您想绝对确定，最好也参考他们的规范。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T01:52:06.917

您引用的来源是错误的，我们可以证明...

for 循环的基础有四个可以执行的独立块：

**for( `initialise`; `condition`; `finishediteration`) { `iteration`}**

幸运的是，我们可以在每个块中执行一个函数。因此，我们可以创建四个函数，它们在执行时会记录到控制台，如下所示：

```
var initialise = function () { console.log("initialising"); i=0; }
var condition = function () { console.log("conditioning"); return i<5; }
var finishediteration = function () { console.log("finished an iteration"); i++; }
var doingiteration = function () { console.log("doing iteration when `i` is equal", i); } 
```

然后我们可以运行以下命令，将上述函数放入每个块中：

```
for (initialise(); condition(); finishediteration()) {
    doingiteration();
} 
```

卡布姆。作品。

*如果您在 Mac 上使用 Safari 查看此页面，则可以`Apple``Alt`+`I`并将上述两个片段按顺序复制到控制台中并查看结果。*

**编辑，额外信息....**

另外...完成的迭代块是可选的。例如：

```
for (var i=0; i<10;) { 
    console.log(i); i++; 
}; 
```

确实有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-20T01:20:53.133

第二个参考是错误的。你的解释是正确的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T01:24:54.663

如果这对您有帮助，另一种思考方式：

```
var i = 0;
while (i < 10) {
    document.write("This is number " + i);
    i++;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T01:25:10.343

这是`for`语句语法：

```
for(initalize, condition, increment) {
    Do_some_things();
} 
```

`initalize``for`begin时只执行一次then 执行`Do_some_things();`语句，而`condition`仍然`true`执行`increment`then `Do_some_things();`。如果 co`condition`为假，for 将退出。

```
for (var i=0; i < 10; i=i+1) {
    document.write("This is number " + i);
} 
```

`var i=0`将执行一次（初始化）。 `i < 10`循环后总是检查条件。 `i=i+1`将在检查后执行`i < 10`，结果为真。i的值为：0、1、3、4、5、6、7、8、9（10次循环）

# xcode - UITextView 不响应 beginOfDocument

> ID：11111588
> 
> 赞同：1
> 
> 时间：2012-06-20T01:14:21.697
> 
> 标签：xcode, uitextview

我试图按照这篇[文章](https://stackoverflow.com/a/9606413/1358863)在我的 UITextView 中获取某个单词的像素位置，但是下面的代码：

`UITextPosition *beginning = cell.textView.beginningOfDocument;`

导致我的应用程序崩溃（似乎仅在 iOS4 中，但根据文档`UITextInput beginningOfDocument`应该从 iOS3.2 开始可用）。我尝试调试问题并获得以下输出：

```
(gdb) po cell
<ReadTableViewCell: 0x1bf25d60; baseClass = UITableViewCell; frame = (0 0; 320 44); userInteractionEnabled = NO; tag = 1248776; layer = <CALayer: 0x1bf25d20>>
(gdb) po [cell textView]
<UITextView: 0x1bf26810; frame = (5 4; 309 121); text = 'Subject Header

Detailed Content...'; clipsToBounds = YES; layer = <CALayer: 0x1bf26650>; contentOffset: {0, 0}>
(gdb) po [[cell textView] beginningOfDocument]
Target does not respond to this message selector.
(gdb) 
```

有人可以给我一些提示如何解决或避免这种情况吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:11:43.917

UITextInput 从 iOS3.2 开始肯定是可用的，但遗憾的是 UITextView 从 iOS5.0 开始符合 UITextInput。它曾经使用 UITextInputTraits 协议。

在这个线程中有一些关于如何调整以在 iOS4 上工作的更多信息：

[iOS 4.3 中的 UITextView beginOfDocument 问题](https://stackoverflow.com/questions/11520348/issue-in-uitextview-beginningofdocument-in-ios-4-3)

# html - 用等宽的表格单元格填充整个表格空间

> ID：11111593
> 
> 赞同：0
> 
> 时间：2012-06-20T01:15:05.557
> 
> 标签：html, css, html-table, equals, cells

标题很容易解释，但基本上我需要表格行等于提供的表格空间，并且表格单元格具有相同的宽度。我在网上尝试了很多建议，但我无法弄清楚。任何帮助是极大的赞赏。

HTML：

```
<div id="content">
<div id="boxes">
    <table>
        <tr>
            <td>
                <h2>News</h2>

                <h6>The new website is up!</h6>
                <p>The new website is up take a look around and be sure to visit our games page and have a good time. =)</p>
            </td>
            <td>
                <h2>Other Stuff</h2>

                <h6>This is where some other info goes</h6>
                <p>We can type other types of information in here for the general public to know.</p>
            </td>
            <td>test</td>
            <td>test</td>
        </tr>
    </table>
</div><!--end boxes-->
</div><!--end content--> 
```

CSS：

```
#content{
text-align:center;
width:90%;
margin-left:auto;
margin-right:auto;  
}
#content #boxes table{
table-layout:fixed; 
}
#content #boxes table tr td{
border-top:30px solid #000;
border-left:1px solid #000;
border-right:1px solid #000;
height:250px;
width:23%;
table-layout:fixed;
text-align:left;
float:left;
display:inline-block;   
}
#content #boxes table tr td:hover{
border-top:30px solid #F00;
border-left:1px solid #F00;
border-right:1px solid #F00;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:37:46.977

更改`#content #boxes table tr td`为：

```
border-top:30px solid #000;
border-left:1px solid #000;
border-right:1px solid #000;
border-collapse:collapse;
height:250px;
width:25%;
text-align:left; 
```

[小提琴](http://jsfiddle.net/TrDAZ/3/)

编辑：谢谢Pumbaa，删除了不必要的指令

# actionscript-3 - AS3 取消事件

> ID：11111594
> 
> 赞同：0
> 
> 时间：2012-06-20T01:15:18.207
> 
> 标签：actionscript-3, flash

嘿，所以我有一个带有多个按钮的 MC，我可以拖动容器 MC，当我释放 MC 时，我想取消任何可能在此期间触发的 MouseEvent.CLICK 侦听器。mouseEnabled 和 mouseChildren 不是我当前问题的选项，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:33:20.060

您可以在拖动时使用选项来拦截容器的事件从移动到孩子吗？

将侦听器添加到容器，并使用捕获阶段停止这些事件的传播。

# jquery - 带有箭头键 jquery 的 Firefox 错误

> ID：11111600
> 
> 赞同：1
> 
> 时间：2012-06-20T01:16:10.560
> 
> 标签：jquery, firefox, keydown, preventdefault

我对 Firefox 和 keydown 功能有疑问。它不会在 Firefox 中触发该功能，但可以在 Safari 和 Chrome 中使用。我知道 preventDefault 是问题的原因，但我想阻止默认滚动并触发其他功能。

```
$(document).keydown(function(e){
    if(e.keyCode == 40)
    {
        movePointer();
        e.preventDefault();
    }
}); 
```

有人有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:40:01.673

你的火狐是什么版本？我已经在 FF12 上测试过：

```
var movePointer = function() {
    console.log('moved');
}

$(document).keydown(function(e){
    var key = e.keyCode || e.which;
    if( key === 40 )
    {
        e.preventDefault();
        movePointer();

    }
}) 
```

对我很有用。您可能会注意到我交换了`preventDefault`and`movePointer`函数，因此稍微修改了条件。它确实阻止了 keydown 的滚动，但不阻止 keyup 滚动。

# air - 如何为 Adob e Air 安装 Crunch 应用程序？

> ID：11111601
> 
> 赞同：-1
> 
> 时间：2012-06-20T01:16:12.420
> 
> 标签：air, installation, less

除了 Adob​​e Muse 和 Adob​​e Edge，我从未使用过任何 Air，它们都有安装包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:14:24.623

我正在运行 Windows 7，并按照以下步骤操作。

*   [从http://crunchapp.net/](http://crunchapp.net/)下载 crunchapp并解压到任意位置
*   通过访问他们的站点安装 Adob​​e Air SDK。
*   解压到合适的文件夹（*我解压到 C:\Program Files\Adobe\Adobe AIR SDK*）
*   右键单击“开始”菜单中的“我的电脑”，然后选择“属性”。
*   点击左侧菜单中的“高级系统设置”
*   选择“环境变量”并添加两个新的系统变量，如下所示

> adl [更改提取的 Adob​​e AIR SDK\bin\adl.exe 文件的路径]

（*我使用 - C:\Program Files\Adobe\Adobe AIR SDK\bin\adl.exe*）

> adt [更改提取的 Adob​​e AIR SDK\bin\adt.bat 文件的路径]

（*我使用 - C:\Program Files\Adobe\Adobe AIR SDK\bin\adt.bat*）

*   重启电脑（*这让我*很着急）
*   打开命令行界面并导航到 C:\Program Files\Adobe\Adobe AIR SDK\bin\
*   输入 adl [Crunch 文件夹的完整路径]application.xml
*   享受紧缩！！！！

高温高压

拉尔夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:08:08.347

在我的 Windows 机器上，这就是我刚才所做的（因为我也不知道从哪里开始）：

*   您需要下载 Adob​​e Air SDK
*   提取其内容，我遵循了这个：[http ://chisflorinel.blogspot.com/2007/06/installing-adobe-air-on-windows-vista.html](http://chisflorinel.blogspot.com/2007/06/installing-adobe-air-on-windows-vista.html)

在那之后，我打开了我的命令行，然后去了 Crunch！文件夹，然后输入命令：

```
adl application.xml 
```

# tomcat - 如何在 solr 或 tomcat 中增加堆大小？

> ID：11111604
> 
> 赞同：3
> 
> 时间：2012-06-20T01:16:24.667
> 
> 标签：tomcat, solr

当我运行以下命令时： 127.0.0.1:8080/solr/suggest?spellcheck.build=true 我得到一个异常如下，有人知道如何在 tomcat 或 solr 中增加堆大小吗？

Apache Tomcat/7.0.27 - 错误报告

# HTTP 状态 500 - Java 堆空间

java.lang.OutOfMemoryError：Java 堆空间

**类型**状态报告

**消息**Java 堆空间

java.lang.OutOfMemoryError：Java 堆空间

**描述**服务器遇到内部错误（Java 堆空间

java.lang.OutOfMemoryError: Java heap space ）阻止它完成这个请求。

### Apache Tomcat/7.0.27

%

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T01:36:26.650

找到用于启动运行 Solr（Tomcat 或 Jetty）的服务器的命令，并为其添加 java 堆大小选项 - 例如 -Xmx500m 将设置最大堆大小为 500 MB，而 -Xms300m 将设置初始堆大小为300 MB。

对于 Tomcat，找到 catalina.sh，打开它并找到设置 CATALINA_OPTS 的行。将 -Xms 和 -Xmx 的选项添加到该行。在 Windows 中，您不会将它们放在引号中，而在 Linux 中则需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:56:19.300

在网上找到了确切的答案，对 JAVA_OPTS 所做的更改。在 catalina.sh 的以下部分中附加“-Xms256m -Xmx512m”

```
if [ -z "$LOGGING_MANAGER" ]; then
   JAVA_OPTS ="$JAVA_OPTS -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms256m -Xmx512m"
else 
  JAVA_OPTS="$JAVA_OPTS $LOGGING_MANAGER -Xms256m -Xmx512m"
fi 
```

无论如何，堆大小仍然用完......我可以设置多大？

# ruby - Highline ask 方法不会使用同一行

> ID：11111608
> 
> 赞同：5
> 
> 时间：2012-06-20T01:16:50.950
> 
> 标签：ruby, highline

设置：

*   重击
*   红宝石 1.9.2
*   高线 (1.6.13)

描述：

我已经习惯了一些其他项目的高线，但几个月没有使用它。现在，在 Ruby 1.9.2 上全新安装时，似乎不允许在同一行回答提示。

所以以前我会看到类似的东西：

```
 require "highline/import"
 ask "What is your favorite color?" 
```

并得到：

```
 What is your favorite color? | 
```

现在我看到类似的东西：

```
 What is your favorite color?
 | 
```

管道 (|) 符号是我的终端光标。

任何想法为什么会发生这种变化？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T01:22:35.837

在问题字符串的末尾放置一个空格，例如

```
ask "What is your favorite color? " 
```

# actionscript-3 - Flex/AS3：如何从 textFlow 中调用 ActionScript 函数？

> ID：11111609
> 
> 赞同：1
> 
> 时间：2012-06-20T01:16:56.950
> 
> 标签：actionscript-3, apache-flex, flex4

我正在使用一个 Flex 4 mxml 文件，该文件将 textFlow 用于 RichEditableText，如下所示：

```
<s:RichEditableText>
    <s:textFlow>
        <s:TextFlow>
            <s:p>Here is your result: {myVariable}</s:p>
        </s:TextFlow>
    </s:textFlow>
</s:RichEditableText> 
```

myVariable 从中间层返回，等于字符“a”、“b”或“c”。但是由于我需要根据字符是什么来显示一条消息，所以我想调用一个 actionscript 函数来解码 myVariable。例如：

```
private function myFunction(myVariable):String {
  if (myVariable=="a") 
      myMsg = "You selected letter a";
  else if (myVariable=="b")
      myMsg = "You selected letter b";
  else
      myMsg = "You selected letter c";
  return myMsg;
} 
```

我不知道该怎么做，但我尝试了以下方法：

```
<s:RichEditableText>
    <s:textFlow>
        <s:TextFlow>
             <s:p>Here is your result: {myFunction(myVariable)}</s:p>
        </s:TextFlow>
    </s:textFlow>
</s:RichEditableText> 
```

尽管它编译并运行良好，但结果是——什么都没有显示，甚至没有显示`Here is your result:`文本。

知道如何实现这一目标吗？或者，如果无法从内部调用 actionscript 函数`<s:p> ... </s:p>`，那么是否可以使用内联（有时称为速记） if/then/else actionscript 语句来实现？

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:32:28.570

您可以动态添加文本。请参阅此链接[http://blog.flexexamples.com/2009/10/09/dynamically-adding-paragraphs-to-a-spark-richtext-control-in-flex-4/](http://blog.flexexamples.com/2009/10/09/dynamically-adding-paragraphs-to-a-spark-richtext-control-in-flex-4/)

# ruby-on-rails-3 - Heroku 上使用 PostgreSQL 的多租户 Rails 3 应用程序

> ID：11111617
> 
> 赞同：5
> 
> 时间：2012-06-20T01:18:19.313
> 
> 标签：ruby-on-rails-3, postgresql, mongodb, heroku, multi-tenant

我在 Heroku 上有一个多租户应用程序（多个彼此一无所知的帐户），我不确定如何最好地构建我的数据库。Postgres 的模式[看起来很棒](http://blog.jerodsanto.net/2011/07/building-multi-tenant-rails-apps-with-postgresql-schemas/)，但是 heroku 不能很好地处理[大量](https://devcenter.heroku.com/articles/postgres-multiple-schema-support)的模式。

现在，我的 Rails 应用程序主要提供 JSON，因为大多数模板都在客户端呈现（使用 Backbone.js）。所以我正在考虑迁移到 MongoDB，因为 1）每个租户可以获得一个顶级“帐户”文档，并且所有内容都可以嵌套在下面，以及 2）它的存储格式非常类似于 JSON。我们仍处于测试阶段，因此可以取消。这些是使用 Mongo 的正当理由吗？前者甚至是使用 Mongo 的一种智能方式吗？

如果我坚持使用 postgres，一切都应该属于顶级帐户模型（带有索引）吗？如果是这样，我将如何处理连接？是否可以执行多索引连接（总 postgres noob）？

到目前为止，我们在一个表中有大约 60k 个条目，但一个帐户可能只有 200-1000 个，所以我担心加入整个表。

非常感谢任何帮助。

更新：

我们最终转移到了 VPS（Rackspace 云）并实现了 postgres 的模式。这一举动并不后悔，因为它的运行速度比在 Heroku 上的运行速度要快得多，而且我们对服务器有更多的控制权*。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T06:29:39.960

查看这个为使用 postgres 进行多租户而编写的 gem [http://railscraft.tumblr.com/post/21421806379/multi-tenanting-ruby-on-rails-applications-on-heroku](http://railscraft.tumblr.com/post/21421806379/multi-tenanting-ruby-on-rails-applications-on-heroku)

# email - 发送数百万封电子邮件的垃圾邮件问题

> ID：11111618
> 
> 赞同：9
> 
> 时间：2012-06-20T01:18:33.087
> 
> 标签：email, smtp

我目前正在用 C 语言开发一个电子邮件服务器，最终目标是能够每天向数百万人发送数百万封电子邮件。许多组织都有包含大量用户的电子邮件列表，他们每周/每月/等都会发送电子邮件。

最大的问题：**如何防止服务器和电子邮件被标记为垃圾邮件？** 到目前为止，我看到的所有防止垃圾邮件的东西都主要处理糟糕的配置，或者至少不需要每小时发送大量电子邮件。我还没有看到任何可以解决每小时数百万封电子邮件的问题。

以下是您可以做出的一些假设：

*   发送的每封电子邮件都是合法的
*   所有 SPF 记录和 MX 记录都是准确、最新且有效的
*   正在使用所有其他常见的垃圾邮件预防策略（反向 DNS 很好，使用 DKIM，返回地址有效，等等等等）
*   电子邮件是一对一的（即，我不是抄送 1000 个 gmail 地址；我要向每个地址发送一封电子邮件）

这里有一些问题可以让我们朝着正确的方向前进：

*   我应该限制每个域每分钟发送 X 封电子邮件的电子邮件数量吗？如果是这样，像 GMail 和 MailChimp 这样的网站如何解决这个问题？*注意：没有 ISP 限制；这只是接收邮件服务器的问题......*
*   我应该在给定时间限制到域的连接数吗？（例如，如果我同时打开 10/100/1000 个与 gmail 服务器的连接，Google 会认为我是垃圾邮件代理吗？）
*   为了自动从订阅列表中删除该电子邮件，我应该接受多少次退回（地址上的 5xx 错误）？这会影响服务器的垃圾邮件评级吗？
*   还有什么我应该或不应该做的吗？

最后说明：请记住这是一个*编程*问题，而不是图书馆问题——我不想使用别人的服务；我们自己写是有原因的。我正在寻找实用的编程建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T10:14:02.400

这不是一个编程问题，但这里有：

我强烈建议您加入您当地的邮件运营商邮件列表，以及“Spam-L”邮件列表。阅读档案，看看其他人遇到了什么问题。

简短的回答是目标服务器可以并且确实使用各种方法来防止垃圾邮件。为了获得良好的可交付性，您需要注意很多事情，而且***这些事情一直在变化***。

*   **首先**也是最重要的，记住：

    ***言论自由还包括自由聆听。*** 没有人必须接受或传输您的邮件。

    独立运营商、企业和个人完全有权以任何理由或无理由拒绝您的邮件。ISP 仅受其与客户的合同和公共运营商法律的限制，这些法律通常赋予他们广泛的自由裁量权来决定什么是垃圾邮件以及如何阻止它。

*   **他们的系统，他们的规则。**如果您希望您的消息被传递，您必须与接收 ISP 合作。这可能意味着跳槽，或遵守您认为愚蠢或毫无意义的要求。

*   **确保您没有被 SpamHaus 列出。**大多数大小 ISP 都使用 SpamHaus DNSBL 服务。出现在 SpamHaus 的列表之一表明他们认为您的邮件符合他们的列表标准。由于 SpamHaus 的高声誉，大多数 ISP 会根据他们的意见简单地阻止您发送的所有邮件。

*   **确保您处理退订。**

*   **确保您处理未送达报告。**您可能不想在第一个 NDR 上终止订阅，因为可能会出现间歇性网络或服务器问题，从而导致无法送达，甚至错误地报告地址不正确。但是，如果您在一两个月内收到了几个但没有成功交付，您应该终止订阅。

*   **加入付费信誉服务。**这些可能需要张贴保证金，如果您发送垃圾邮件，您可能会失去该保证金。SpamHaus 提供一个。还有其他的。

*   **从像 Return-Path 这样的人那里**获得专业建议。**您也必须为此付费。**

***   **监视器**。您必须跳过的篮球一直在变化。确保您了解新出现的可交付性问题。

    *   **加入反馈循环。**大多数大型 ISP 都提供反馈计划，您可以在其中获得有关用户如何看待您的邮件、他们是否将其报告为垃圾邮件等方面的反馈。** 

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T21:15:34.790

Ben 有一些很好的实用建议，但对于其他有这个问题的人，这是我在过去一个月中发现的：

**电子邮件是关于*声誉***的。您将永远无法将服务器、IP 和/或域名放在一起，并期望能够发送数百万封电子邮件。

在 Stack Overflow 上，我们有一个评级系统（赞成和反对票）来估计这个人对 SO 社区的价值/信任。但是获得积分需要时间和精力。电子邮件也是如此——您必须开始发送少量人们实际打开并阅读的电子邮件（并且永远不会标记为垃圾邮件），然后每个月慢慢发送越来越多，直到达到数百万的目标数百万封电子邮件。

每次有人“投反对票”——将电子邮件标记为垃圾邮件、标记域、标记 IP 地址、删除电子邮件而不阅读它等等——你的声誉就会受到打击。如果您想在人们中获得良好的声誉，您需要不断地监控并为您的声誉付出努力和最佳实践。

因此，从小处着手，以稳定和稳定的方式扩展，并时刻注意滥用、误用、好的和坏的反馈，或任何可能影响您声誉的事情。

这不仅可行，而且非常实用；你只需要给它时间和精力。**

# c# - NLB 环境中的 Response.Redirect 超时

> ID：11111621
> 
> 赞同：0
> 
> 时间：2012-06-20T01:18:49.600
> 
> 标签：c#, sharepoint, web-parts, nlb

我有一个自定义的 Sharepoint 2010 Web 部件，它通过注册过程中的一系列步骤运行用户。在每一步，当任何需要的输入完成时，用户单击继续按钮，这是一个标准的服务器端按钮控件。后面的代码在调用 Response.Redirect 之前会进行一些验证和数据库更新，后者会使用更新的会话数据刷新同一页面。

（注意：会话数据作为加密查询字符串参数保存在 URL 中，而不是由常规的 Session 对象保存）

此解决方案在我的单服务器测试环境中运行良好，但是一旦我将其部署到负载平衡阶段或生产环境，一些请求就会在单击继续 (ERR_TIMED_OUT) 后简单地超时而没有收到响应。

1.  Webpart 日志显示 Webpart 实际上是使用有效 URL 调用 Response.Redirect
2.  这不是服务器资源问题。超时可以设置为一分钟或更长时间，没有收到响应。
3.  仅在部署到负载平衡服务器时发生
4.  **当我在其中一台负载平衡服务器上**完成注册时，一切正常- 这让我相信负载平衡和服务器会话存在问题。我知道，当从 NLB 中的一个服务器节点与负载平衡的 Web 应用程序交互时，所有请求都将转到该特定服务器。

我知道我以前也遇到过类似的问题，但那是几年前的事了，我不记得解决方案是什么了。

```
 try
        {
            // get clean URL without query string parameters
            string url;
            if (string.IsNullOrEmpty(Request.Url.Query))
                url = Request.Url.AbsoluteUri;
            else
                url = Request.Url.AbsoluteUri.Replace(Request.Url.Query, "");

            // add encrypted serialized session object
            url += "?" + Constants.QueryStringParameterData + "=" + SessionData.Serialize(true);

            _log.Info("Redirecting to url '" + url + "'..");
            Response.Redirect(url);
        }
        catch (Exception) { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:14:08.500

OK, the problem has been resolved.

It turned out to be UAG that was doing something in the background, and the way I discovered it was that the links that triggered the postbacks got changed from

[http://some_url.com/sites/work/al2343/page.aspx](http://some_url.com/sites/work/al2343/page.aspx)

to

[http://some_other_url.domain.com/uniquesigfed6a45cdc95e5fa9aa451d1a37451068d36e625ec2be5d4bc00f965ebc6a721/uniquesig1/sites/work/al2343/page.aspx](http://some_other_url.domain.com/uniquesigfed6a45cdc95e5fa9aa451d1a37451068d36e625ec2be5d4bc00f965ebc6a721/uniquesig1/sites/work/al2343/page.aspx)

(Take note of the "uniquesig" in there)

This was the URL the browser actually tried to redirect to, but because of whatever the issue was with UAG the navigation froze.

I don't know how they fixed it, but at least the problem was not in my component.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:30:27.580

One possibility that Request.Url is how particular server sees the url (something like `http://internalServer44/myUrl`) instead of externally visible load-balanced Ulr (like `http://NlbFarmUrl/myUrl`).

In case of SharePoint it will be better to use SPContext.Current.Site/Web properties to get base portion of Url since this Urls should already be in externally visible form.

# iphone - UITableViewCell 为 Nil

> ID：11111623
> 
> 赞同：1
> 
> 时间：2012-06-20T01:18:51.893
> 
> 标签：iphone, objective-c, ios, uitableview

我确信这个问题有一个足够简单的答案，但我似乎找不到它。我的代码中有以下代码`UITableViewController`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil)
    {
        NSLog(@"Cell is nil!");
    }

    return cell;
} 
```

但是在我的日志输出中我得到

> 细胞为零！

紧接着

> Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' *** First throw call stack: (0x1b68d72 0x135fe51 0x1b68bd8 0xb0e315 0xcb373 0x63578 0xcb1d3 0xcff19 0xcffcf 0xb9384 0xc952e 0x691bc 0x13736be 0x215c3b6 0x2150748 0x215055c 0x20ce7c4 0x20cf92f 0x2171DA2 0x1B4B4 0x1BE63 0x2C2BE 0x2CF9F 0x1F3F3FDDDDDDD DD 0X1AC5F39 0X1AC5C5C5C5C10 0X1ADEDA5 0X1ADEB12B12 0X1B12 0X1B0FB46抛出0x1b0eed4 expriatity 40x1B0B0B0B0B0B211B211B211B211B28FIL / 0X11B28FIL / 0X11B28FIL / 0X11B28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.28F.211B28F.

有谁知道为什么会发生这种情况，更重要的是，如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:27:23.347

如果它为零，则必须创建单元格，因为方法

```
[tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
```

从表视图缓存中返回未使用的单元格。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:NSIndexPath*)indexPath
{
   static NSString *CellIdentifier = @"Cell";
   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil)
   {
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
   }

   //configure cell

   return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:50:49.103

你用`interface builder`这个班吗？如果是这样，不要忘记从表格视图中进行引用。我有同样的零问题，这就是我的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T01:27:30.980

`dequeueReusableCellWithIdentifier`如果存在可以重用的标识符，则返回具有您传入的标识符的已创建单元格。

如果没有，您有责任创建一个。

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCustomCellID];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1
                                   reuseIdentifier:kCustomCellID] autorelease];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:31:35.003

是的，该方法`UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];`意味着它将重用已分配有 CellIdentifier 的单元格。但您尚未分配任何具有此标识符的单元格，对于 tableView，它将为屏幕分配一些单元格，然后它将重用单元格标识符，如果你这样做，你会发现它会起作用

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil)
    {
        NSLog(@"Cell is nil!");
        cell = [[[UITableViewCell alloc] initWithSyle:UITableViewCellStyleNormal reuseIdentifier:CellIdentifier] autorelease];
    }

    return cell;
} 
```

参加考试。

# eclipse - Eclipse MapReduce 插件错误：服务器 IPC 版本 7 无法与客户端版本 3 通信

> ID：11111624
> 
> 赞同：1
> 
> 时间：2012-06-20T01:18:57.473
> 
> 标签：eclipse, hadoop, mapreduce, hadoop-plugins

当我尝试从我的笔记本电脑（我有我的 eclipse 和 mapreduce 插件）连接到 MapReduce 位置时，该位置是一个名称节点和数据节点的集群，我收到错误：服务器 IPC 版本 7 无法与客户端版本 3 通信。我试图找到谷歌上的一些信息，但找不到太多。是不是因为我的mapreduce eclipse插件使用的是旧版本的IPC，而hadoop集群有更新的插件。所以只是我使用过时的插件？如何找到我的 eclipse 插件使用的 IPC 版本？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:25:50.620

是的，这听起来像是版本不兼容。假设您的 hadoop 发行版有源代码，您可以为该版本重新编译 eclipse 插件。

请参阅：

*   `$HADOOP_HOME/src/contrib/eclipse-plugin`文件夹
*   [http://wiki.apache.org/hadoop/EclipsePlugIn](http://wiki.apache.org/hadoop/EclipsePlugIn) - 关于如何构建插件的最后一节

# python - Python - 从文件中读取第二列

> ID：11111625
> 
> 赞同：8
> 
> 时间：2012-06-20T01:19:15.413
> 
> 标签：python, for-loop, file-io, readfile

我的输入文件有两列。我正在尝试在第二`inputdata1.txt`个 for 循环中打印第二列。但是我的代码不起作用。有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T01:23:09.887

```
with open('inputdata1.txt') as inf:
    for line in inf:
        parts = line.split() # split line into parts
        if len(parts) > 1:   # if at least 2 parts/columns
            print parts[1]   # print column 2 
```

这假设列由空格分隔。

函数[split()](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)可以指定不同的分隔符。例如，如果列用逗号分隔，`,`您将`line.split(',')`在上面的代码中使用。

注意：当您完成或遇到*异常*`with`时，使用来打开您的文件*会自动关闭它*。

 ** * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-20T01:22:36.920

你可以做这样的事情。`Separator`是您的文件用来分隔列的字符，例如制表符或逗号。

```
for line in open("inputfile.txt"):
    columns = line.split(separator)
    if len(columns) >= 2:
        print columns[1] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-02T09:30:31.430

**快'n脏**

如果安装了 AWK：

```
# $2 for the second column
os.system("awk '{print $2}' inputdata1.txt") 
```

* * *

**使用类**

做一个类：

```
class getCol:
    matrix = []
    def __init__(self, file, delim=" "):
        with open(file, 'rU') as f:
            getCol.matrix =  [filter(None, l.split(delim)) for l in f]

    def __getitem__ (self, key):
        column = []
        for row in getCol.matrix:
            try:
                column.append(row[key])
            except IndexError:
                # pass
                column.append("")
        return column 
```

如果`inputdata1.txt`看起来像：

```
你好世界
世界你好

```

你会得到这个：

```
print getCol('inputdata1.txt')[1]
#['lo', 'ld'] 
```

* * *

**补充说明**

*   您可以使用[`pyawk`](http://pyawk.sourceforge.net/)更多 awk 功能
*   如果您使用的是 Quick 'n dirty 方法，请使用`subprocess.Popen`
*   您可以更改分隔符`getCol('inputdata1.txt', delim=", ")`
*   用于`filter`删除空值或取消注释`pass`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-31T11:18:59.057

```
f = open("file_to_read.txt") # open your file

line = f.readline().strip() # get the first line in line

while line: # while a line exists in the file f
    columns = line.split('separator') # get all the columns
    while columns: # while a column exists in the line
        print columns # print the column
    line = f.readline().strip() # get the next line if it exists 
```

使用此代码，您可以访问每行的所有列。*

# python - Python - 定义常量列表或字典的最佳/最简洁方式

> ID：11111632
> 
> 赞同：39
> 
> 时间：2012-06-20T01:21:02.667
> 
> 标签：python, c, header, constants, organized

第一次使用堆栈溢出，我很高兴来到这里。

简介：我最近开始了进入 Python 编程世界的神奇冒险——我喜欢它。现在，在我从 C 语言的尴尬过渡中，一切都顺利进行了，但我在创建与 HEADER 文件 (.h) 同义的东西时遇到了麻烦。

问题：我有中等大小的字典和列表（大约 1,000 个元素）、冗长的枚举和“#defines”（不是真的），但我找不到一种干净的方式来组织它们。在 C 语言中，我会将它们全部放在一个头文件中，并且永远不会再考虑它，但是，在 Python 中这是不可能的，或者我认为是不可能的。

当前肮脏的解决方案：我正在初始化 MODULE 或 FUNCTION 顶部的所有 CONSTANT 变量（如果多个函数需要它，则为模块）。

结论：如果有人想出了一种干净地组织常量变量的方法，我将永远感激不尽。

太感谢了！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-20T01:23:39.323

将您的常量放入自己的模块中：

```
# constants.py

RED = 1
BLUE = 2
GREEN = 3 
```

然后导入该模块并使用常量：

```
import constants

print "RED is", constants.RED 
```

常量可以是你喜欢的任何值，我在这里展示了整数，但列表和字典的工作方式是一样的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-20T01:24:08.660

通常我这样做：

文件：**常量.py**

```
CONSTANT1 = 'asd'
CONSTANT_FOO = 123
CONSTANT_BAR = [1, 2, 5] 
```

文件：**your_script.py**

```
from constants import CONSTANT1, CONSTANT_FOO
# or if you want *all* of them
# from constants import *

... 
```

现在您的常量在一个文件中，您可以很好地导入和使用它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-20T01:24:36.760

制作一个单独的文件`constants.py`，并将所有全局相关的常量放在那里。然后你可以`import constants`将它们称为`constants.SPAM`or 做 (有问题的)`from constants import *`将它们简单地称为`SPAM`or `EGGS`。

当我们在这里时，请注意 Python 不支持*常量*。约定只是将它们命名`ALL_CAPS`并保证不会改变它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-25T16:57:11.847

接受的答案很好，更进一步可以在定义常量时使用类型；您可以只指定 Final，或者更进一步并提供 Final[type]，例如：

```
from typing import Final, List
CONSTANT1: Final = 'asd'
CONSTANT_FOO: Final[int] = 123
ADLS_ENVIRONMENTS: Final[List[str]] = ["sandbox", "dev", "uat", "prod"]

# etc. 
```

见[https://www.python.org/dev/peps/pep-0591/#the-final-annotation](https://www.python.org/dev/peps/pep-0591/#the-final-annotation)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-23T02:22:20.527

如果您想弄乱嵌套常量并且不喜欢 dicts，我想出了这个有趣的解决方案：

```
# Recursively transform a dict to instances of the desired class

import json
from collections import namedtuple

class DictTransformer():
    @classmethod
    def constantize(self, d):
        return self.transform(d, klass=namedtuple, klassname='namedtuple')

    @classmethod
    def transform(self, d, klass, klassname):
        return self._from_json(self._to_json(d), klass=klass, klassname=klassname)

    @classmethod
    def _to_json(self, d, access_method='__dict__'):
        return json.dumps(d, default=lambda o: getattr(o, access_method, str(o)))

    @classmethod
    def _from_json(self, jsonstr, klass, klassname):
        return json.loads(jsonstr, object_hook=lambda d: klass(klassname, d.keys())(*d.values())) 
```

前任：

```
constants = {
  'A': {
    'B': {
      'C': 'D'
    }
  }
}
CONSTANTS = DictTransformer.transform(d, klass=namedtuple, klassname='namedtuple')
CONSTANTS.A.B.C == 'D' 
```

优点：

*   处理嵌套的字典
*   可能会生成其他类型的字典/类
*   namedtuples 为常量提供不变性

缺点：

*   如果您的 klass 上未提供 .keys 和 .values ，则可能无法响应（尽管您有时可以使用 ._fields 和 list(ABC) 进行模仿）

想法？

h/t 致 @hlzr 和你们的原创课程理念

# erlang - Erlang gen_tcp 和行 i/o

> ID：11111636
> 
> 赞同：5
> 
> 时间：2012-06-20T01:21:30.513
> 
> 标签：erlang

有什么方法可以从 Erlang 中的套接字读取整行，还是我需要在上面手动实现行缓冲`gen_tcp:recv`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T12:06:25.680

您是否尝试过使用

```
inet:setopts(Socket, [{packet, line}]) 
```

见：[http ://www.erlang.org/doc/man/inet.html#setopts-2](http://www.erlang.org/doc/man/inet.html#setopts-2)

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-20T15:13:23.253

无需自己实现行缓冲。

`gen_tcp:listen/2`接受`{packet, line}`它的`Options`参数，这将使套接字进入行模式，因此调用`gen_tcp:recv`将阻塞，直到读取了完整的行。

```
gen_tcp:listen(Port, [{packet, line}]) 
```

确保通过`{buffer, Size}`相同调用（或`inet:setopts/2`）的选项设置的缓冲区大小足够大以适合所有行，否则它们将被截断。

或者，如果使用 Elixir，这应该可以帮助您入门：

```
:gen_tcp.listen(port, [packet: :line, buffer: 1024]) 
```

# internet-explorer-9 - IE 开发者工具说我的 body 标签在 IE9 的响应式网站上是空的

> ID：11111640
> 
> 赞同：1
> 
> 时间：2012-06-20T01:21:46.770
> 
> 标签：internet-explorer-9

我刚刚结束了这个响应式站点，现在它没有出现在 IE9 中。一路走来，我做了一些把事情搞砸的事情。

位于[http://www.dermatologypartners.com](http://www.dermatologypartners.com)的网站，它在现代浏览器中看起来很棒，在 IE8 中不错，在 IE9 中不可见。在 iPad、iphone 等上也很好。

我做了一个桌面优先的样式表，这样即使我正在使用平板电脑和手机版本的媒体查询，IE8 也会显示出来。

我的头文件中有 html5 shiv，还有一些使渐变在 IE9 中工作的代码。

我现在不知道该怎么办 - 救命！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:50:01.630

我遇到的问题是，在关闭 xml 评论之前有一个空格，导致浏览器将评论视为未关闭，所以他只是忽略了页面的其余部分

```
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif] --> 
```

在这种情况下，它是后面的空间`[endif]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:56:02.550

在脚本中发现错误 - 缺少结束语。修复了这个问题，该网站现在出现在 ie9 中。其他要解决的问题，但那个问题已经解决了。

阅读一篇建议寻找小脚本错误的文章

# haskell - Haskell：foldl'累加器参数

> ID：11111642
> 
> 赞同：3
> 
> 时间：2012-06-20T01:22:02.000
> 
> 标签：haskell, lazy-evaluation

我一直在问一些关于严格性的问题，但我想我以前错过了分数。希望这更精确。

假设我们有：

```
n = 1000000
f z = foldl' (\(x1, x2) y -> (x1 + y, y - x2)) z [1..n] 
```

不改变`f`，我应该设置什么

```
z = ... 
```

这样`f z`不会溢出堆栈吗？（即无论 n 的大小如何，都在恒定空间中运行）

如果答案需要 GHC 扩展，那也没关系。

* * *

我的第一个想法是定义：

```
g (a1, a2) = (!a1, !a2) 
```

接着

```
z = g (0, 0) 
```

但我不认为`g`是有效的Haskell。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T03:12:23.707

因此，您的 strict`foldl'`只会在折叠到*Weak Head Normal Form*的每个步骤中评估您的 lambda 的结果，即它仅在最外层的构造函数中是严格的。因此，将评估*元组，但是元组**内*的那些添加可能会构建为 thunk。这个[深入的答案](https://stackoverflow.com/a/6889335/176841)实际上似乎在这里解决了您的确切情况。

W/R/T your `g`：您正在考虑`BangPatterns`扩展，看起来像

```
g (!a1, !a2) = (a1, a2) 
```

并在将 a1 和 a2 返回到元组之前将它们评估为 WHNF。

您要关心的不是您的初始累加器，而是您的 lambda 表达式。这将是一个不错的解决方案：

```
f z = foldl' (\(!x1, !x2) y -> (x1 + y, y - x2)) z [1..n] 
```

**编辑**：在注意到你的其他问题后，我发现我没有仔细阅读这个问题。可以这么说，您的目标是拥有“严格的数据”。那么，您的另一个选择是创建一个在其字段上具有严格标签的新元组类型：

```
data Tuple a b = Tuple !a !b 
```

然后，当您对 ,进行模式匹配时`Tuple a b`，将对其进行评估。`a``b`

无论如何，您都需要更改您的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T08:52:58.930

没有改变就什么都做不了`f`。如果`f`在对的类型中重载，您可以使用严格的对，但就目前而言，您被锁定在做什么`f`。编译器（严格性分析和转换）可以避免堆栈增长，但没有什么可以指望的。

# iphone - 在 iPhone 上，纯文字横幅广告赚的钱一样多吗？

> ID：11111643
> 
> 赞同：0
> 
> 时间：2012-06-20T01:22:04.150
> 
> 标签：iphone, admob, iad

我的应用程序是横向的，我正在使用 kGADAdSizeSmartBannerLandscape 在屏幕上创建横幅。我仅将 AdMob 中介与 AdMob 和 iAd 结合使用。

问题是，这些尺寸的广告 (480x32) 或 (960x64) 仅适用于 iphone。有没有人对这些大小和类型的广告有任何经验。我可以期待降低填充率吗？

另一种方法是使用标准的纵向横幅尺寸，这意味着广告不会横跨整个屏幕并且会更胖。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:38:16.250

最佳做法是使用最适合您的应用的广告尺寸。

可以对 AdMob 文字广告进行操作以适应整个宽度尺寸。图片无法更改其分辨率，但由于 480x32 是 iPhone 的流行格式，因此在某些时候也可能存在这种尺寸的 AdMob 图片广告资源。

# ruby - 将用户从文本文件添加到活动目录

> ID：11111644
> 
> 赞同：1
> 
> 时间：2012-06-20T01:22:10.943
> 
> 标签：ruby, active-directory

我一直在研究这段代码，但我无法让它工作。它从文本文件中获取用户信息，创建用户组并将用户放入组中。它使安全组很好，但不会将用户放入组中。没有错误消息，但经过错误检查后，将通过应添加用户并将错误放在底部的代码。有人可以帮忙吗？

文本文件中的用户名设置如下：

```
fred,bush,1990-20-3,123456781,2008-20-3,D5,

xin,zhao,1990-20-2,123456782,2008-20-3,D5,

bobby,bob,1990-20-1,123456783,2008-20-3,D5,

john,lose,1990-20-4,123456784,2008-20-3,D5,

elly,moose,1990-20-5,123456785,2008-20-3,D5,

jackie,chan,1990-20-6,123456786,2008-20-3,D5,

katarina,lotus,1990-20-7,123456787,2008-20-3,D5,

kelly,nunu,1990-20-8,123456788,2008-20-3,D5,

lois,harris,1990-20-9,123456789,2008-20-3,D5,

gutwold,manly,1990-20-10,123456780,2008-20-3,D5,

griswold,womenly,1990-20-11,123456710,2008-20-3,D5,

bessy,horse,1990-20-12,123456711,2008-20-3,D5, 
```

代码是：

```
require 'date'
domain = "dc=TROPTRAIN,dc=net,dc=au"
ou = "ou=studentsOU"
filepath = 'C:\Documents and Settings\Administrator\My Documents\Luke Abbey Ruby Final\userfile\error_log.txt'
users = 'C:\Documents and Settings\Administrator\My Documents\Luke Abbey Ruby Final\userfile\newusers.txt'

#intro function for the program
def intro
    system "cls"
    puts ""
    puts "  Tropical Train - Adding users"
    puts "====================================================================="
    puts ""
end

#get user file
check = 0
while check == 0
    intro
    puts "Please enter the path to the user file,"
    puts "or enter the the letter 's' to use the stored file location:"
    puts ""
    puts "#{users}"
    userfile = gets.chomp.to_s
    if ((userfile == 's') || (userfile == 'S'))
        check = 1
        userfile = users

        #puts userfile
        #system "pause"
    elsif(test(?e,userfile))
        check = 1
    elsif userfile =~ (/[\x00\/\\:\*\?\"<>\|]/)
        puts "The userfile contains invalid characters. Try again."
        system "pause"
        check = 0
    elsif userfile == ""
        puts "You entered nothing. Try again."
        system "pause"
        check = 0
    elsif(!test(?e,userfile))
        check = 0
        puts "The file #{userfile} does not exist. Try again."
        system "pause"
    else 
        puts "Your entry is invalid. Try again."
        system "pause"
        check = 0
    end
end

#create the security groups via DOS and check wheteher they already exist
grpC2 = 0
grpC3 = 0
grpC4 = 0
grpD5 = 0
expired = 0
students = 0
%x[dsquery group "dc=troptrain,dc=net,dc=au"].each do |line|
    data = line
    if line.include?("grpC2")
        grpC2 = 1
    end
    if line.include?("grpC3")
        grpC3 = 1
    end
    if line.include?("grpC4")
        grpC4 = 1
    end
    if line.include?("grpD5")
        grpD5 = 1
    end
    if line.include?("Expired")
        expired = 1
    end
    if line.include?("Students")
        students = 1
    end
end
if grpC2 != 1
    %x[dsadd group "cn=grpC2,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end
if grpC3 != 1
    %x[dsadd group "cn=grpC3,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end
if grpC4 != 1
    %x[dsadd group "cn=grpC4,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end
if grpD5 != 1
    %x[dsadd group "cn=grpD5,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end
if expired != 1
    %x[dsadd group "cn=Expired,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end
if students != 1
    %x[dsadd group "cn=Students,ou=studentsOU,dc=troptrain,dc=net,dc=au"]
end

#open the file
f1 = File.open(userfile,"r")

#read the file line by line
count = 0
f1.each do |line|
    data = line.split(',')
    firstname = data[0].capitalize
    surname = data[1].capitalize
    dob = data[2].to_s
    snumber = data[3].to_s
    enddate1 = data [4].gsub!("-","/")
    enddate = enddate1
    area = data[5]
    fullname = (firstname + (" ") + surname)
    group = "cn=#{'grp'+data[5]}"
    password1 = data[2].gsub("-", "")
    password = password1
    count = count + 1
    #display values for establishing error checks
    #puts ""
    #puts "fullname:   #{fullname}"
    #puts "dob:        #{dob}"
    #puts "snumber:    #{snumber}"
    #puts "enddate:    #{enddate}"
    #puts "area:       #{area}"
    #puts "password:   #{password}"
    #puts "group:      #{group}"
    #puts "count:      #{count}"
    #puts ""
    if ((data[2] =~ /[^0-9-]/) || (data[3] =~ /[^0-9-]/) || (data[4] =~ /[^0-9\/]/) ||    (data[5] =~ /[^A-Za-z0-9 ]/) || (data[0] =~ /[^A-Za-z ]/) || (data[1] =~ /[^A-Za-z ]/) || (data[0] == "") || (data[1] == "") || (data[2] == "") || (data[3] == "") || (data[4] == "") || (data[5] == "") || (data[6] == ""))
        puts ""    
        puts "====================================================================="
        puts "User account No #{count}: #{fullname} was not created."
        puts ""
        if (File.exist?(filepath))
            file = File.open((filepath), "a+")
            t = Time.now    
            file.puts "====================================================================="
            file.puts "User account No #{count}: #{fullname} was not created."
            file.puts t
            file.puts ""
        else
            puts "Error log cannot be found!"
            puts "Searched directory: #{filepath}"
        end

        #checking database entries for errors
        if ((data[0] == "") || (data[0] =~ /[^A-Za-z ]/))
            puts "No/Incorrect firstname on file."
            file.puts "No/Incorrect firstname on file."
        end     
        if ((data[1] == "") || (data[1] =~ /[^A-Za-z ]/))
            puts "No/Incorrect surname on file."
            file.puts "No/Incorrect surname on file."
        end
        if ((data[2] == "") || (data[2] =~ /[^0-9-]/))
            puts "No/Incorrect birthdate on file."
            file.puts "No/Incorrect birthdate on file."
        end
        if ((data[3] == "") || (data[3] =~ /[^0-9-]/))
            puts "No/Incorrect student number on file."
            file.puts "No/Incorrect student number on file."
        end
        if ((data[4] == "") || (data[4] =~ /[^0-9\/]/))
            puts "No/Incorrect study end date on file."
            file.puts "No/Incorrect study end date on file."
        end
        if ((data[5] == "") || (data[5] =~ /[^A-Za-z0-9 ]/))
            puts "No/Incorrect study area on file."
            file.puts "No/Incorrect study area on file."
        end
        file.close
    else
        begin
            puts "working"
            system 'pause'
            ad = WIN32OLE.connect("LDAP://#{ou},#{domain}")
            user = ad.create("user","cn=#{fullname}")
            user.givenName = firstname
            user.Sn = surname
            user.SAMAccountname = "#{snumber}"
            user.userPrincipalName = "#{snumber}@Troptrain.net.au"
            user.displayName = fullname
            user.profilePath = "c:\\profiles\\students\\logon"
            user.setInfo

            user_fqdn = "cn=#{fullname},#{ou},#{domain}"
            user = WIN32OLE.connect("LDAP://#{user_fqdn}")
            user.userPassword = Password01
            user.accountDisabled = 0
            user.accountExpirationDate = enddate

            user.setInfo

            studentgroup_fqdn = "#{group},#{ou},#{domain}"
            grp = WIN32OLE.connect("LDAP://#{studentgroup_fqdn}")
            grp.add("LDAP://#{user_fqdn}")

            allgroup_fqdn = "cn=students,#{ou},#{domain}"
            allgrp = WIN32OLE.connect("LDAP://#{allgroup_fqdn}")
            allgrp.add("LDAP://#{user_fqdn}")

            puts ""
            puts "====================================================================="
            puts "User account No #{count}: #{fullname} was created."
            sleep 0.5

        rescue

        end
    end
end
puts "====================================================================="
puts ""
puts "See Error log for details."
puts ""
puts "The program has finished creating users."
f1.close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:49:36.863

分开你的顾虑。

1.  您需要解析文本文件并以结构化方式从中检索用户和组。
2.  您需要导入您的组，然后导入您的用户。
3.  然后，您将用户分配给您创建的组。
4.  每个用户和组必须位于他们自己的 OU 中才能识别它们。
5.  这些 OU 必须是已知的。

现在向后工作并分解出您需要继续进行的所有内容。

1.  找到要绑定到 LDAP 服务器的主机名、端口和凭据。
2.  找到您的基本 DN。( `DC=troptrain, DC=net, DC=au`)
3.  找到您的用户和组前缀。（基础 DN 之后的 OU 段）。
4.  导入您的数据。
5.  核实。（这也很重要！）

由于 LDAP 与典型的关系数据库相比似乎有些落后，因此我建议将 ActiveLDAP ruby​​ gem 与`gem install active_ldap`. 它使使用 LDAP 变得容易得多。

```
#!/usr/bin/env ruby

require 'active_ldap'

class User < ActiveLdap::Base
  ldap_mapping :dn_attribute => 'CN', :prefix => '<user-ou-prefix>',
  has_many :groups, :class => 'Group', :wrap => 'memberOf', :primary_key => 'DN'
end

class Group < ActiveLdap::Base
  ldap_mapping :dn_attribute => 'CN', :prefix => '<group-ou-prefix>',
  has_many :members, :class => 'User', :wrap => 'member', :primary_key => 'DN' 
end

ActiveLdap::Base.setup_connection(
  :host => '<hostname>',
  :base => '<base-dn>',
  :bind_dn  => '<bind-dn>',
  :password => '<bind-password>',
  :allow_anonymous => false,
  :try_sasl => false,
  :port => 389
) 
```

从那里，您应该能够使用类似 ActiveRecord 的界面创建、读取、更新和删除用户。调用`#setup_connection`建立用于连接的选项，并且`has_many`调用在您的类之间建立类似外键的关系。

```
# Find and display all users:
User.find(:all, '*') do |user|
  puts user.cn
end

# Create a group with a CN of 'Anonymous'
group = Group.new('Anonymous')
group.description = "An anonymous group."
group.save

# Change the user with the CN 'Nobody' and change their displayName attribute.
user = User.find('Nobody')
user.displayName = "Nobody's Name"
user.save

# Delete a group with a CN of 'Foobar'.
group = Group.find('Foobar')
group.delete 
```

ActiveLdap 使得从 Ruby 操作 LDAP 变得*非常*容易，我强烈推荐它。

# java - 从 Oracle 执行 JavaFX FXML 教程时出错

> ID：11111645
> 
> 赞同：0
> 
> 时间：2012-06-20T01:22:24.617
> 
> 标签：java, fxml

美好的一天，我正在学习官方 JavaFX FXML 教程（请参阅[此处](http://docs.oracle.com/javafx/2/get_started/FXMLExample.zip)的源代码）。但是，当我使用 Netbeans IDE 编译它时，出现以下错误：

谁能帮我这个

我正在运行 JDK 1.7 和 JavaFX 2.0

> 初始化：删除：
> C:\Users\riash\Documents\Riaz\Personal\Java\Samples\FXMLExample\build\built-jar.properties
> deps-jar：更新属性文件：
> C:\Users\riash\Documents\Riaz\Personal \Java\Samples\FXMLExample\build\built-jar.properties
> compile: Detected JavaFX Ant API version 1.1 Launching task
> from C:\Program Files (x86)\Oracle\JavaFX 2.0 SDK\tools\ant-javafx.jar
> Signing JAR:
> C:\Users\riash\Documents\Riaz\Personal\Java\Samples\FXMLExample\dist\FXMLExample.jar 到
> C:\Users\riash\Documents\Riaz\Personal\Java\Samples\FXMLExample\dist\FXMLExample.jar 为NB-JFX
> 
> 警告：签名者证书将在六个月内到期。Enter Passphrase for keystore: Enter key password for nb-jfx: Launching task from C:\Program Files (x86)\Oracle\JavaFX 2.0 SDK\tools\ant-javafx.jar 跳过 jar 复制到自身：FXMLExample.jar jfx-deployment ：jar：运行：2012 年 6 月 19 日晚上 9:10:33 javafx.fxml.FXMLLoader logException 严重：文件
> /C:/Users/riash/Documents/Riaz/Personal/Java/Samples/中的第 48 行发生以下错误FXMLExample/build/classes/fxmlexample/fxml_example.fxml[Ljava.lang.StackTraceElement;@1bb3a11
> 应用程序启动方法
> java.lang.reflect.InvocationTargetException
> 在 sun.reflect.NativeMethodAccessorImpl.invoke0（本机方法）
> 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
> 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601)
> 在 com。 com.javafx.main.Main.main(Main.java:537)
> 处的 javafx.main.Main.launchApp(Main.java:453)
> 
> 原因：java.lang.RuntimeException：
> com.sun 的应用程序启动方法中的异常。 javafx.application.LauncherImpl.launchApplication1(Unknown Source)
> at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source)
> at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source)
> at java.lang。线程运行（线程.java：722）
> 
> 原因：javafx.fxml.LoadException：javafx.scene.layout.GridPane 没有默认属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:54:30.747

将您的 JavaFX 运行时升级到至少 2.1 将解决您的问题。

您引用的示例源是为 2.1 运行时设计的，而不是 2.0 运行时。

新源与 2.0 不兼容的原因是 2.1 向 Pane 类添加了继承的 @DefaultProperty 注释（此注释行为被 GridPane 继承）。因此，当您使用 2.1 编写 fxml 时，您可以省略某些默认标记，从而使 2.1 fxml 比 2.0 所需的更简洁。达斯汀马克思在他的博客中提供了对此的[完整解释。](http://marxsoftware.blogspot.com/2012/01/javafx-21-javafx-2s-defaultproperty.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T00:37:47.227

从 JavaFx 2.0 升级到 JavaFx 2.2 将解决此问题。

# android - 从后台堆栈恢复片段时的 savedInstanceState

> ID：11111649
> 
> 赞同：38
> 
> 时间：2012-06-20T01:22:50.547
> 
> 标签：android, android-fragments, bundle, back-stack

我可以`savedInstanceState()`在删除片段时保存状态，然后在将片段从返回堆栈中弹出时恢复状态吗？当我从后台堆栈恢复片段时，savedInstanceState 包始终为空。

现在，应用程序流程是：创建片段 -> 删除片段（添加到后台堆栈）-> 从后台堆栈恢复片段（savedInstanceState 包为空）。

以下是相关代码：

```
public void onActivityCreated(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle bundle = getArguments();
    Long playlistId = bundle.getLong(Constants.PLAYLIST_ID);
    int playlistItemId = bundle.getInt(Constants.PLAYLISTITEM_ID);

    if (savedInstanceState == null) {
       selectedVideoNumber = playlistItemId;
    } else {
       selectedVideoNumber = savedInstanceState.getInt("SELECTED_VIDEO");
    }
}

public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt(Constants.SELECTED_VIDEO, selectedVideoNumber);
    } 
```

我认为问题在于它`onSavedInstanceState()`在被删除并被添加到后堆栈时永远不会被调用。如果我不能使用 onsavedInstanceState()，还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T16:35:55.027

onSaveInstanceState （不幸的是）在片段的正常回栈重新创建中没有被调用。查看[http://developer.android.com/guide/components/fragments.html#Creating](http://developer.android.com/guide/components/fragments.html#Creating)以及[如何在添加到后台堆栈时保持片段状态的答案？](https://stackoverflow.com/questions/11353075/how-can-i-maintain-fragment-state-when-added-to-the-back-stack)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T22:18:00.520

我喜欢将我在 onCreateView 返回的视图存储为全局变量，然后当我返回时，我只需检查一下：

```
if(mBaseView != null) {
        // Remove the view from the parent
        ((ViewGroup)mBaseView.getParent()).removeView(mBaseView);
        // Return it
        return mBaseView;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-17T21:54:05.000

问题是片段需要有一个`Id`或`Tag`与之关联才能`FragmentManager`跟踪它。

至少有 3 种方法可以做到这一点：

1.  在 xml 布局`Id`中为您的片段声明一个：

    ```
    android:id=@+id/<Id> 
    ```

2.  如果您的 Fragment 容器`View`有`Id`，请使用[FragmentTransaction](http://developer.android.com/reference/android/app/FragmentTransaction.html#add(int,%20android.app.Fragment))：

    ```
    FragmentTransaction  add (int containerViewId, Fragment fragment) 
    ```

3.  如果您的片段不与任何`View`（例如无头片段）相关联，请给它一个`Tag`：

    ```
    FragmentTransaction  add (Fragment fragment, String tag) 
    ```

[另外，请参阅此 SO 答案。](https://stackoverflow.com/a/20552273/1290264)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T16:22:54.513

FWIW，我也遇到了这个问题，但在我的情况下，onSaveInstanceState 被正确调用，当智能手机上出现新的活动片段时，我推送了我的状态数据。和你一样，onActivityCreated 被称为 w/ savedInstanceState 始终为空。恕我直言，我认为这是一个错误。

我通过创建一个静态 MyApplication 状态并将数据放在那里相当于“全局变量”来解决它......

# java - jvmmonitor 未在 Eclipse 中列出任何 JVM

> ID：11111653
> 
> 赞同：3
> 
> 时间：2012-06-20T01:23:26.333
> 
> 标签：java, eclipse

我正在尝试使用 jvmonitor 在 eclipse 中分析我的应用程序，但没有列出 jvm，甚至没有正在运行的 eclipse jvm，当我启动我的应用程序时，新的 jvm 没有出现。

[文档](http://www.jvmmonitor.org/doc/index.html#FAQ)说>

> JVM Explorer 上应至少显示一个 JVM（Eclipse 本身）。如果未显示 JVM，则 Eclipse 可能未使用受支持的 JDK 启动。例如，可以使用 JRE 代替 JDK。要解决此问题，请使用 Help > About Eclipse > Installation Details > Configuration 检查系统属性 java.home 的值。您可能会看到 java.home 未指定支持的 JDK。关闭 Eclipse。要在 Eclipse 上强制使用所需的 JDK，请为 eclipse 可执行文件指定选项 -vm，或者在 eclipse.ini 中指定它。请参阅 Workbench 用户指南以了解如何指定该选项。启动 Eclipse。

eclipse 配置中的 java.home 属性说 /home/myname/programs/jdk/jre

我试图改变它，但没有任何改变。我的 -vm 已经设置为 jdk 目录，我的 linux .profile 和 .bashrc 导出到 JAVA_HOME 到 jdk 目录，但 Eclipse 中的 java.home 仍然显示 /home/myname/programs/jdk/jre

我还在 java>monitor>tools 首选项页面中将 jdk 根目录设置为 /home/myname/programs/jdk/，但仍然没有运气。

我已经卸载了 jvmmonitor 并完全重新安装了它，但没有任何变化。

我正在使用 jdk 7 和 jvmonitor 3.8 运行 eclipse indigo

这让我现在发疯了，任何想法都会受到欢迎

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-29T13:36:42.547

You have to change the .ini file of Eclipse

Just add:

```
-vm C:\JavaJDK\Java\jdk1.6.0_01\jre\bin\client\jvm.dll 
```

Here is the eclipse.ini file in full:

```
-startup
plugins/org.eclipse.equinox.launcher_1.0.201.R35x_v20090715.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_1.0.200.v20090519
-product
org.eclipse.epp.package.jee.product
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
-vm
C:\JavaJDK\Java\jdk1.6.0_01\jre\bin\client\jvm.dll
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms40m
-Xmx512m 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T23:06:53.923

经过数小时的摆弄，我找到了解决方案。我现在改用 VisualJVM，但它们通过连接到本地套接字并设置 JMX 连接以相同的方式运行。

首先，jvmmonitor/visualjm 和你的 java 应用程序必须在同一个用户下运行。

用户必须对 linux /tmp/ 上的 tmp 目录具有写入权限。

当启动任何 java 应用程序时，将在 tmp 的 hsperfdata_myusername 文件夹中创建一个带有 java 程序进程 PID 的本地文件，java 分析软件使用该文件夹连接到运行 java 程序的 jvm。

如果您从终端启动 java 程序并且终端的当前目录不是您的主目录，例如。从 MYNAME:/home/myname/project/myjavaapp$ 启动，您可能会发现您可以连接到 jvm，但无法对其进行采样或分析。将当前目录设为主目录应该可以解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-19T13:35:56.920

[JVisualVM Troubleshooting Guide](https://visualvm.java.net/troubleshooting.html)中的这个解决方案对jvmonitor也有帮助：

> **本地应用无法监控**
> 
> **说明：** VisualVM 启动后立即显示一个错误对话框，指出无法监视本地应用程序。本地运行的 Java 应用程序显示为 (pid ###)。
> 
> **解决方法：** 如果用户名包含大写字母，这可能在 Windows 系统上发生。在这种情况下，用户名是`UserName`但JDK创建的jvmstat目录是`%TMP%\hsperfdata_username`。要解决此问题，请退出所有 Java 应用程序，删除 `%TMP%\hsperfdata_username`目录并创建新 `%TMP%\hsperfdata_UserName`目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-06T11:01:01.990

您是否检查了此[JVMMonitor 的常见问题解答](http://www.jvmmonitor.org/doc/#Cannot_Find_JVMs)中的指令？

如果问题仍然存在，请以管理员身份运行 Eclipse，至少在安装 JVM Monitor 插件后运行一次。

这为我解决了这个问题。

# qt - QWidget 的样式表在 Qt 中不起作用

> ID：11111656
> 
> 赞同：2
> 
> 时间：2012-06-20T01:23:41.210
> 
> 标签：qt

我已经设置`StyleSheet`了`Designer`...

并且预览显示了我想要的效果，但是当它运行时...效果更改为默认值。为什么 ？

```
QWidget#BasicInfo{
    background-color: white;
} 
```

我把它放到QStackedWidget中，可能是它的原因吗？

即`stylesheet`不起作用...是什么原因？

谢谢...

这里是设计师..

![在此处输入图像描述](../Images/a4ab45cd06e3efec307ccfc980d1d19a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T03:55:54.680

您可以重建项目（清洁，Qmake，构建）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:07:25.823

您能否检查生成的 ui 文件（例如 ui_basicinfo.h），是否有调用*setStyleSheet*的代码？有时，ui 代码没有更新或者在不同的子文件夹中有多个相同类的 ui 文件（取决于您的项目结构）。

# jsf - ui:repeat inside composition 不打印值

> ID：11111659
> 
> 赞同：1
> 
> 时间：2012-06-20T01:24:13.360
> 
> 标签：jsf, xhtml, richfaces, composition, uirepeat

我是 jsf 的新手。我有下面的代码。当我将 ui:repeat 放在 rich:toolbar 中时，它会打印数据。但是当我将它放在组合标签内的工具栏组之后时，它不会打印任何东西。我有一个工具栏，我想在该工具栏下方显示 ui:repeat 数据。如果我将它放在工具栏中，它会显示数据，但在工具栏内不低于它。我怎样才能把它放在工具栏下面？

谢谢。

更新：我发现了问题。ui:repeat 标签显示在工具栏下方。那么如何将位置添加到 ui:repeat？

```
enter code here<h:body>
    <ui:composition>    <h:panelGroup layout="block">
            <a4j:region>
                <rich:toolbar id="header-toolbar" height="30px" itemSeparator="line">
                    <rich:toolbarGroup location="right" rendered="#{not empty searchType}">
                        <rich:menuItem 
                            label="search"
                            mode="ajax"
                            execute="@this"
                            oncomplete="#{rich:component(searchFormModalPanel)}.show();"
                            status="status"/>
                    </rich:toolbarGroup>   </rich:toolbarGroup>

                </rich:toolbar>   
            </a4j:region>   //Bellow doesn't show up!   <ui:repeat value="#{breadCrumbMB.crumbs}" var="crumb" varStatus="crumStatus">
                    #{breadCrumbMB.incIndex()}
                    <h:outputLink value="#{crumb}">
                        <h:outputText value="#{breadCrumbMB.title(crumb.toString())}" rendered="${breadCrumbMB.lastLink()=='false'}"/></h:outputLink> >
                    <h:outputText value="#{breadCrumbMB.title(crumb.toString())}" rendered="${breadCrumbMB.lastLink()=='true'}"/> 
                    </ui:repeat>  </ui:composition>
</h:body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:59:20.177

尝试在 a4j:region 中包含 ui:repeat，如果它不起作用，则使用 a4j:repeat

# asp.net-mvc-3 - 如何使用 WebGrid 访问强类型的复杂模式属性

> ID：11111660
> 
> 赞同：0
> 
> 时间：2012-06-20T01:24:20.763
> 
> 标签：asp.net-mvc-3, entity-framework-4, webgrid

如何在 MVC 3 中的 webGrid 中访问强绑定的复杂类型。例如，我有一个名为 Project 的对象，它有另一个对象作为名为 Employee 的属性。这两个对象在主键 EmployeeId 上相互关联。如果项目是强绑定对象，如何访问属于雇员类的任何属性，该雇员类是项目类的一个属性？

我四处搜索并找到了使用点符号的答案。(Employee.EmployeeId) 但这不起作用

绑定列时有特定的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T06:06:48.890

*点*符号应该可以工作。

模型：

```
public class Project
{
    public string Name { get; set; }
    public Employee Employee { get; set; }
}

public class Employee
{
    public int EmployeeId { get; set; }
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = Enumerable.Range(1, 5).Select(x => new Project
        {
            Name = "project " + x,
            Employee = new Employee
            {
                EmployeeId = x
            }
        });
        return View(model);
    }
} 
```

看法：

```
@model IEnumerable<Project>

@{
    var grid = new WebGrid(Model);
}

@grid.GetHtml(
    columns: grid.Columns(
        grid.Column("Name"),
        grid.Column("Employee.EmployeeId")
    )
) 
```

结果：

![在此处输入图像描述](../Images/43271233b9f3fb06580c566d85ab83a9.png)

# c#-4.0 - 缺少 SQL Server 事务日志 (.ldf) 文件之谜

> ID：11111668
> 
> 赞同：1
> 
> 时间：2012-06-20T01:25:29.080
> 
> 标签：c#-4.0, sql-server-2005-express

我刚刚完成了使用 SQL Server 2005 Express 的 C# 2010 Windows 桌面应用程序的开发。

我把它交给了一位同事，让他在他的 Windows 7（64 位）笔记本电脑上进行测试。

该程序在第一天按预期运行，当它使用如下连接字符串进行第一次 db 调用时，将数据库连接到 SQL Server Express 的本地实例：

```
Server=.\SQLExpress;AttachDbFilename=|DataDirectory|MyDB.mdf;Database=MyDB;integrated security=true;user instance=true; 
```

第二天，当他运行该程序时，它失败了，但出现以下异常：

> System.Data.SqlClient.SqlException (0x80131904)：无法打开登录请求的数据库“MyDB”。登录失败。
> 用户“Tack-PC\Tack”登录失败。
> 文件激活失败。物理文件名“C:\Program Files (x86)\MyCo\MyApp\MyDB_log.LDF”可能不正确。
> 当主文件为只读时，无法重建日志。
> 在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔型 breakConnection）
> 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
> 在 System.Data.SqlClient.TdsParser.Run（RunBehavior runBehavior，SqlCommand cmdHandler，SqlDataReader dataStream，BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
> 在 System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover (ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
> at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
> 在 System.Data.SqlClient.SqlInternalConnectionTds..ctor（DbConnectionPoolIdentity 标识，SqlConnectionString connectionOptions，对象 providerInfo，字符串 newPassword，SqlConnection owningObject，布尔重定向用户实例）
> 在 System.Data.SqlClient.SqlConnectionFactory.CreateConnection（DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池， DbConnection owningConnection)
> 在 System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
> 在 System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject )
> 在 System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
> 在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
> 在 System.Data。 SqlClient.SqlConnection.Open()
> 在 MyApp.DataGateway.getTable(String sql)
> 在 MyApp.frmMain.InitialiseList()
> 在 MyApp.frmMain.frmMain_Load(Object sender, EventArgs e)
> 在 System.Windows.Forms.Form.OnLoad(EventArgs e)
> 在 System.Windows.Forms.Form.OnCreateControl()
> 在 System.Windows.Forms.Control.CreateControl(Boolean fIgnoreVisible)
> 在 System.Windows.Forms.Control.CreateControl()
> 在 System.Windows.Forms.Control.WmShowWindow(Message& m)
> 在 System.Windows.Forms.Control.WndProc(Message& m)
> 在 System.Windows.Forms.ScrollableControl.WndProc (Message& m)
> 在 System.Windows.Forms.Form.WmShowWindow(Message& m)
> 在 System.Windows.Forms.Form.WndProc(Message& m)
> 在 System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
> 在 System .Windows.FormsControl.ControlNativeWindow.WndProc(Message& m)
> 在 System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

`.ldf`我还注意到SQL Server 在第一次附加数据库后创建的日志文件 ( ) 丢失了。

有谁知道它为什么或如何消失？

我在阅读异常时做的第一件事是（我知道有点笨拙，但我只是想让他重新启动并运行，而他仍然可以花时间为我测试并且我可以并行研究问题）给所有用户对工作文件夹的完全权限，因此它至少可以创建一个新的日志文件。

这导致程序成功运行，但他在第一天输入的所有数据都没有消失。

任何人都可以为我阐明这种情况吗？为什么日志文件消失了？

当我们这样做的时候，为什么所有的数据都丢失了？它不会在仍然存在的 mdf 文件中吗？

# html - 为什么会 break my layout but not if I close with ?

> ID：11111669
> 
> 赞同：0
> 
> 时间：2012-06-20T01:25:47.720
> 
> 标签：html, textarea

为什么会`<textarea col="5" row="5" />`在我的现代浏览器中破坏我的布局，但如果我明确使用结束标签，例如`<textarea col="5" row="5" /></textarea>`？这一直困扰着我。它是标准的一部分吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:29:31.077

是的，它是标准的一部分：

[http://www.w3.org/TR/html401/interact/forms.html#h-17.7](http://www.w3.org/TR/html401/interact/forms.html#h-17.7)

```
17.7 The TEXTAREA element

<!ELEMENT TEXTAREA - - (#PCDATA)       -- multi-line text field -->
<!ATTLIST TEXTAREA
  %attrs;                              -- %coreattrs, %i18n, %events --
  name        CDATA          #IMPLIED
  rows        NUMBER         #REQUIRED
  cols        NUMBER         #REQUIRED
  disabled    (disabled)     #IMPLIED  -- unavailable in this context --
  readonly    (readonly)     #IMPLIED
  tabindex    NUMBER         #IMPLIED  -- position in tabbing order --
  accesskey   %Character;    #IMPLIED  -- accessibility key character --
  onfocus     %Script;       #IMPLIED  -- the element got the focus --
  onblur      %Script;       #IMPLIED  -- the element lost the focus --
  onselect    %Script;       #IMPLIED  -- some text was selected --
  onchange    %Script;       #IMPLIED  -- the element value was changed --
  > 
```

> **开始标签：必填，结束标签：必填**

为什么它会中断是另一个完全不同的故事，浏览器也可以实现它，这样它只会创建一个空`textarea`而不中断。但由于这是标准要求的，你应该遵循它。

- 编辑 -

同样根据@Seth 评论（谢谢！），它没有`value`属性，因此初始值位于标签内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:08:17.773

By HTML 4.01 rules, `<textarea col="5" row="5" />` is equivalent to `<textarea col="5" row="5">>` (making the `>` a data character). No browser follows this rule, though. Validators do, but this is difficult to see directly. A long explanation: [Empty elements in SGML, HTML, XML, and XHTML](http://www.cs.tut.fi/~jkorpela/html/empty.html).

What browsers do in practice is that they just skip the `/` as garbage. This, too, means that you have just a start tag, and the browser then tries to process subsequent characters as contents of `textarea`, though it may stop this at some point. Depending on the context, the layout of the document may get messed up.

However, if the document is sent with an XML media type (in HTTP headers), it will be processed by XML rules, and then `<textarea col="5" row="5" />` is equivalent to `<textarea col="5" row="5"></textarea>`. Such usage is not recommended in XHTML when used on the Internet; see clause C.3 of the (in)famous [appendix C](http://www.w3.org/TR/xhtml1/#guidelines) of the XHTML 1.0 spec.

# html - 可以有多个同名的 HTML 表单吗？

> ID：11111670
> 
> 赞同：20
> 
> 时间：2012-06-20T01:25:53.960
> 
> 标签：html, forms

我想这样做是有正当理由的，但这是一个很长的故事，所以我会忘记解释原因，只是问是否可以这样做。

我有一个页面，我需要多个具有相同名称的表单，但我只希望提交其提交按钮为单击的表单。例如，以下内容可能在我的页面上：

```
<form name="input" action="" method="get">
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form>

text

<form name="input" action="" method="get">
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form>

text

<form name="input" action="" method="get">
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form> 
```

这可以接受吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-20T03:57:43.110

关于 HTML 4.01 规范，您可以使用`form`具有相同`name`属性的元素，因为它们没有唯一性要求。但是，这样做违背了这些属性的目的。它们旨在使在客户端脚本中引用表单变得更容易：如果您有`<form name=foo>`，则`document.foo`引用该表单。

未定义`name`使用相同属性时会发生什么，但浏览器似乎做的是返回一个数组。在您的示例中，`document.foo`将是一个 3 元素数组，并且`document.foo[0]`是第一种形式。但这没有用，因为（假设文档中没有其他形式）您可以使用`document.forms[0]`, 具有明确定义的含义。

`name`属性本身对于元素来说已经过时了（`form`但对于表单字段来说不是，它一直是必不可少的）。[HTML 4.01 规范条款`form`](http://www.w3.org/TR/html4/interact/forms.html#edef-FORM)说：

“<code>name = cdata [CI] 此属性命名元素，以便可以从样式表或脚本中引用它。笔记。包含此属性是为了向后兼容。应用程序应该使用该`id`属性来识别元素。”</p>

在 HTML5 草案中，即使是正式规则也不允许使用相同的`name`属性。[属性 on](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#attr-form-name)的[HTML5 子句`name``form`](http://www.whatwg.org/specs/web-apps/current-work/multipage/forms.html#attr-form-name)说它的值“在它所`form`在的集合中的元素中必须是唯一的`forms`，如果有的话”。这是一个令人困惑的表述，但最安全的做法是假设它在`form`文档的元素中必须是唯一的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T01:28:42.860

是的，它是允许的，只有`id`'s 必须是唯一的。但是，我不会推荐它，为什么还要让自己在路上感到困惑。

该`name`属性仅定义每个表单字段元素在发送到服务器时将被表示为什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-03T15:54:02.927

在 HTML5 中也可以。只有名称在表单本身内必须是唯一的。

请参阅文档：“该值不能是空字符串，并且该值在它所在的表单集合中的表单元素中必须是唯一的，如果有的话。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:31:45.407

当用户单击提交按钮时，只有该表单才会生效。不过，最好命名它们，以免您感到困惑:)

# java - “java.lang.ClassFormatError: Invalid pc in LineNumberTable”的可能原因

> ID：11111682
> 
> 赞同：5
> 
> 时间：2012-06-20T01:27:27.960
> 
> 标签：java, sqlite, exception

今天我开始编写一个使用 sqlite 的项目，当我尝试对其进行测试时，我收到了**java.lang.ClassFormatError: Invalid pc in LineNumberTable**。希望你能帮助我，因为我只是迷路了。我已经搜索过这个错误，并遇到了一些奇怪原因的奇怪解决方案。据我了解，它们都没有引起我的问​​题。

我正在使用“sqlitejdbc-v056”，它被插入到我的类路径中。

**编辑：**我的 JDK 版本是 1.7.0_03-b05

堆栈跟踪：

```
Exception in thread "main" java.lang.ClassFormatError: Invalid pc in LineNumberTable in     class file Controllers/FuncionariosController
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(Unknown Source)
at java.security.SecureClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.defineClass(Unknown Source)
at java.net.URLClassLoader.access$100(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at Main.main(Main.java:13) 
```

给出错误的代码：

```
public class Main {

public static void main(String[] args) {  
    DatabaseController db=new DatabaseController();
    FuncionariosController f=new FuncionariosController(db);
        ...
     } 
} 
```

类 FuncionarioController：

```
package Controllers;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import Models.Funcionario;

public class FuncionariosController {
    private DatabaseController db;

    public FuncionariosController(DatabaseController db){
        this.db=db;
    }

    public void render(String cargo){
        ...
    }
    public List<Funcionario> selectAll(){
        ...
    }
    public Funcionario select(String login){
        ...
    }
} 
```

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-23T13:50:29.107

我有一个类似的问题。发生它是由没有案例代码的开关引起的。发生错误时，它看起来像这样：

```
switch(e.getActionCommand()) {
        case ACTION_OPEN_PID:
            break;
        case ACTION_OPEN_PPID:
            break;
        default:
    } 
```

将简单的控制台输出添加到案例后，错误消失了。

```
switch(e.getActionCommand()) {
        case ACTION_OPEN_PID:
            System.out.println(ACTION_OPEN_PID);
            break;
        case ACTION_OPEN_PPID:
            System.out.println(ACTION_OPEN_PPID);
            break;
        default:
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T14:41:50.323

感谢 Luiggi Mendoza，我使用 JDK 1.6 而不是 1.7 解决了这个问题。这成功了，但我不得不注释掉很多代码来编译它。不是很好的解决方案....

# iphone - UIScrollView 缩放行为不缩放子视图

> ID：11111684
> 
> 赞同：2
> 
> 时间：2012-06-20T01:27:38.373
> 
> 标签：iphone, objective-c, ios, uiscrollview, uipinchgesturerecognizer

因此，我`UIScrollView`将缩放功能委托给了视图控制器，该视图控制器当然会覆盖：

```
- (UIView*)viewForZoomingInScrollView:(UIScrollView*)scrollView { ... etc ... 
```

一切正常（它缩放和滚动）。

然后我把它提高了一个档次，在顶层视图中添加了另外两个 UIScrollView，其目的是充当网格的指南（例如 M$ Excel 中的行和列）。

因此，scrollView 的一个子视图包含一行`UILabel`s（A、B、C、D...），另一个相同，只是`UILabel`s 在列中（1、2、3、4...）。如果这有帮助，请想象一个棋盘。

现在我将主 scrollView 的垂直和水平滚动连接到指南滚动视图，如下所示：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (scrollView == self.scrollView) {
       self.verticalGuideScrollView.contentOffset = CGPointMake(0, scrollView.contentOffset.y);
       self.horizontalGuideScrollView.contentOffset = CGPointMake(scrollView.contentOffset.x, 0);
    }
} 
```

一切正常。

我像这样连接了滚动视图的缩放功能：

```
- (void)scrollViewDidZoom:(UIScrollView *)scrollView
{
    if (scrollView == self.scrollView) {
        self.verticalGuideScrollView.zoomScale = scrollView.zoomScale;
        self.horizontalGuideScrollView.zoomScale = scrollView.zoomScale;
    }
} 
```

这也很好用，除了我实际上不希望它放大`UILabel`指南视图中的子视图（即 s），我只想要来自缩放而不缩放（放大或缩小）的翻译行为。

我可以通过向`UIPinchGestureRecognizer`主滚动视图添加 a 并使用它来翻译指南滚动视图中的所有子视图来设想一个解决方案，但也许这里有人可以想出一些更简单的方法。

# java - Java 旋转动画

> ID：11111685
> 
> 赞同：0
> 
> 时间：2012-06-20T01:27:40.917
> 
> 标签：java, swing, graphics, rotation, bufferedimage

编程语言：Java

好的，所以我想要一个[BufferedImage](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/image/BufferedImage.html)保持无限旋转。我在提出好问题方面还是个新手，所以请多多包涵。

我有一个名为 arm 的 BufferedImage，它是矩形的，我有一个[ActionListener](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ActionListener.html)，它每 100 毫秒循环一次 repaint() 我的代码是：

```
public void paint(Graphics g){ 
    AffineTransform t = new AffineTransform(); 
    t.rotate(Math.toRadians(90),(a­­rm.getWidth()/2)*scale,0); 
    t.translate(300,300); 
    g.drawImage(arm,t,null);
} 
```

如果您想知道我将图像的大小调整了 4 倍，因此变量比例 = 4。我认为我的错误是我没有正确映射枢轴点，但我不知道。我的游戏真的需要这个，所以请帮助我现在非常绝望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:44:43.167

新的`AffineTransform`总是零旋转。您正在添加 90 度旋转，因此动画的每一帧看起来都一样：图像从其正常方向旋转 90 度。

您需要计算当前的旋转角度。

```
// Instance variable intialized at zero.
double angle = 0.0;

// In your ActionListener timer handler increment the angle.
{
    angle += Math.toRadians(5); // 5 degrees per 100 ms = 50 degrees/second
    while (angle > 2 * Math.pi()) 
        angle -= 2 * Math.pi();  // keep angle in reasonable range.
}

public void paint(Graphics g) {
    // Just use the transform that's already in the graphics.
    Graphics2d g2 = (Graphics2d) g;
    g2.setToIdentity();
    // The code for your other transforms is garbled in my browser. Fill in here.
    g2.rotate(angle);
    g2.drawImage(arm, t, null);
} 
```

希望这能让你更接近。

我要补充一点，对于帧速率来说，100 毫秒是相当慢的。动画会看起来很生涩。流畅的动作最多需要 30 毫秒或每秒 30 帧。使用 GPU 的游戏有时运行速度超过 100 fps。

你应该`new`尽可能避免在动画循环中。它将要求垃圾收集器更频繁地运行。这可能会导致动画卡顿。

# gmail - 如何将谷歌邮件设置为不将 php 邮件放入垃圾邮件文件夹？

> ID：11111686
> 
> 赞同：1
> 
> 时间：2012-06-20T01:27:59.377
> 
> 标签：gmail, phpmailer, spam

我正在为我创建一个仅从我的服务器运行的站点。我希望它使用已设置的 php 向我发送电子邮件，但这些电子邮件会进入我在 gmail 中的垃圾邮件文件夹。如何在 gmail 而不是 php 中更改此设置以将这些电子邮件发送到我的收件箱？我尝试过使用 mail() 和 phpmailer()。

这是我拥有的 PHP 代码。

```
$mail = new PHPMailer();

$body = "email from server - testing.";
$from = "email@mysite.com";
$email = "myemail@gmail.com";

$mail->IsSMTP(); 
$mail->Host       = "localhost"; 
$mail->SMTPDebug  = 2;

$mail->SetFrom($from, "mysite.com");
$mail->AddReplyTo($from, "mysite.com");

$mail->Subject    = "emails";

$mail->MsgHTML($body);

$address = $email;
$mail->AddAddress($address, "me");

// $mail->Send();

if(!$mail->Send()) {
echo "Mailer Error: " . $mail->ErrorInfo;
} else {
echo "Message sent!";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:00:03.803

我看不出您的代码有什么问题，因为您似乎设置`From`正确。但是，我建议您检查 GMail 收到的实际标头（`Show Original`在电子邮件/消息的消息选项下）并检查`From`标头是否正确。不正确的发件人是此类问题的常见原因。

正如 sarnold 上面所说，这涉及到一定程度的猜测工作，但我建议您查看以下一项或多项：

*   为您的域检查/设置 SPF 或 DKIM
*   检查/设置用于发送电子邮件的 IP 地址的反向 dns 记录
*   检查您发送的 IP 地址是否在任何黑名单中（如果是，请联系您的 ISP）。[MXToolBox BlackList Checker](http://www.mxtoolbox.com/blacklists.aspx)可能对检查多个黑名单很有用

# asp.net - 将文本框连接到表格

> ID：11111687
> 
> 赞同：1
> 
> 时间：2012-06-20T01:28:00.307
> 
> 标签：asp.net, data-binding

我是 ASP.net 的新手，开始了我的第一个网站项目。我想将文本框连接到我的“详细信息”表，请参见下面的代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <p class="style2">
        <br />
        DETAILS FORMS</p>
    <p>
        <table style="width: 100%; height: 117px;">
            <tr>
                <td class="style4">
                    <asp:Label ID="Label1" runat="server" Text="ID :"></asp:Label>
                </td>
                <td class="style3">
                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                </td>
                <td class="style3">
                </td>
            </tr>
            <tr>
                <td class="style5">
                    <asp:Label ID="Label2" runat="server" Text="Date Recieved  :"></asp:Label>
                </td>
                <td>
                    <asp:TextBox ID="DRInput" runat="server"></asp:TextBox>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="style5">
                    <asp:Label ID="Label3" runat="server" Text="Date Commision :"></asp:Label>
                </td>
                <td>
                    <asp:TextBox ID="DCINput" runat="server"></asp:TextBox>
                </td>
                <td>
                    &nbsp;</td>
            </tr>
            <tr>
                <td class="style5">
                    <asp:Label ID="Label4" runat="server" Text="Sender"></asp:Label>
                </td>
                <td>

                    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True">
                        <asp:ListItem>Angeles</asp:ListItem>
                        <asp:ListItem>Aurora</asp:ListItem>
                        <asp:ListItem>Bataan</asp:ListItem>
                        <asp:ListItem>Bulacan</asp:ListItem>
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:Database1ConnectionString1 %>" 
                        SelectCommand="SELECT [Sender] FROM [Details]"></asp:SqlDataSource>

                </td>
                <td>
                </td>
            </tr>
            <tr>
                <td class="style10">
                    </td>
                <td class="style11">

                    <asp:Button ID="Button1" runat="server" Text="Button" />

                </td>
                <td class="style11">
                    </td>
            </tr>
            <tr>
                <td class="style6">
                    &nbsp;</td>
                <td class="style7">
                    &nbsp;</td>
                <td class="style7">
                    &nbsp;</td>
            </tr>
        </table>
    </p>
</asp:Content> 
```

这是它背后的代码：

```
public partial class Data : System.Web.UI.Page
{
    protected void DRInput_DataBinding(object sender, EventArgs e)
    {

    } 
```

绑定文本框以将详细信息保存在表“详细信息”中的代码是什么，当我单击按钮时，它将保存在表“详细信息”中。希望任何人都可以提供帮助。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:36:22.617

在您的特定情况下，它看起来不像您正在显示*列表*，而是在显示项目的详细信息。

简单的方法是将文本框的文本属性分配为页面请求的一部分，例如在页面的页面加载事件中。

```
DRInput.Text = detailsModel.DRInput; 
```

然后在提交页面时将文本框的文本值分配回您的对象。

```
detailsModel.DRInput = DRInput.Text; 
```

由于您是 ASP.Net 的新手；也许最好从教程网站开始，例如 w3schools.com/aspnet/aspnet_demo_intro.asp 或 asp.net/web-forms 然后回来问你的问题

# jquery - 带有部分视图的 ASP.NET MVC ajax 分页

> ID：11111689
> 
> 赞同：0
> 
> 时间：2012-06-20T01:28:15.317
> 
> 标签：jquery, asp.net-mvc, pagination

我有一个搜索页面，它使用简单的 ajax 请求从控制器获取新的搜索结果。

控制器将结果作为呈现的 html 返回，因此客户端脚本所要做的就是 $('#results').html(data);

html 还包含分页链接。

我想将点击处理程序添加到 ajax 成功事件处理程序中的这些分页链接，但我发现从 A 的文本属性中获取页码有点令人讨厌。假设链接可以读取“第 1 页”、“第2"，然后我会解析文本。

我做错了吗？

我应该在局部视图中生成 ajax 链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:56:46.207

页码可以存储为元素的*数据。*您可以在连接事件处理程序`a`时参考该*数据。*传统上——即在我的旧应用程序中——我会这样做：

```
<a href="#" name="myLink" data="<%: [pageNumber] %>">
  Page <%: [pageNumber] %>
</a> 
```

然后在jquery方面（即ajax回调）：

```
$('a[name=myLink]').click( function (e) {
  e.preventDefault();
  var pageNumber = $(this).attr('data');
  // do what you have to do with the pageNumber
}); 
```

但是如果你走这条路，你可以（并且应该）参考[jQuery 数据函数。](http://api.jquery.com/jQuery.data/)

# oracle - 从用户文件加载数据时，主键列被重复输入

> ID：11111692
> 
> 赞同：1
> 
> 时间：2012-06-20T01:28:57.240
> 
> 标签：oracle

甲骨文 11g

步骤1。

```
create table pur_order(
               po_number number primary key,
               po_date date,
               po_vendor number,
                :) 
```

步骤 2.使用 Enterprise Manager 11g 从用户文件 podata.txt 内容中加载数据，例如：

```
 1 25-JUN-2011 1001
  2 26-JUN-2011 1002
  3 27-JUN-2011 1003
  1 27-JUN-2011 1001
  2 28-JUN-2011 1002 
```

步骤 3\. 加载过程成功完成。

表格内容就像上面的问题一样，因为我已经将 po_number 定义为主键，为什么 po_number 的重复值仍然可以加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T12:14:24.037

这种导入方法很可能使用 SQL*Loader 实用程序和 Direct Path Load 方法。[如文档](http://docs.oracle.com/cd/B10501_01/server.920/a96652/ch09.htm#1007642)中所述，这将禁用一些完整性约束：

> 依赖于其他行或表的完整性约束（例如引用约束）在直接路径加载之前被禁用，并且必须在之后重新启用。如果指定了 REENABLE，SQL*Loader 可以在加载结束时自动重新启用它们。重新启用约束时，将检查整个表。任何未通过此检查的行都会在指定的错误日志中报告。请参阅[直接加载、完整性约束和触发器](http://docs.oracle.com/cd/B10501_01/server.920/a96652/ch09.htm#1008082)。

SQL*Loader 尝试重新启用约束但失败了，因此：

> 如果检测到违反 UNIQUE 约束，则索引将处于 Index Unusable 状态。请参阅[处于不可用状态的索引](http://docs.oracle.com/cd/B10501_01/server.920/a96652/ch09.htm#1007759)。

我很确定您会发现主键索引不可用（`SELECT index_name, status FROM all_indexes WHERE table_name = 'PUR_ORDER'`）。

要么在没有直接路径加载的情况下加载数据文件，要么确保之后成功启用约束。

# ruby-on-rails - Heroku 运行 rake db:migrate 错误，“没有要加载的文件--bundler/setup”

> ID：11111696
> 
> 赞同：1
> 
> 时间：2012-06-20T01:29:19.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, heroku, rubygems, bundler

我正在尝试执行“heroku run rake db:migrate”，并收到此错误：

```
es-MacBook-Pro:project e$ heroku run rake db:migrate
Running rake db:migrate attached to terminal... up, run.1
(in /app)
rake aborted!
no such file to load -- bundler/setup
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/config/boot.rb:6:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/config/application.rb:1:in `<top (required)>'
<internal:lib/rubygems/custom_require>:29:in `require'
<internal:lib/rubygems/custom_require>:29:in `require'
/app/Rakefile:5:in `<top (required)>'
/usr/local/lib/ruby/1.9.1/rake.rb:2373:in `load'
/usr/local/lib/ruby/1.9.1/rake.rb:2373:in `raw_load_rakefile'
/usr/local/lib/ruby/1.9.1/rake.rb:2007:in `block in load_rakefile'
/usr/local/lib/ruby/1.9.1/rake.rb:2058:in `standard_exception_handling'
/usr/local/lib/ruby/1.9.1/rake.rb:2006:in `load_rakefile'
/usr/local/lib/ruby/1.9.1/rake.rb:1991:in `run'
/usr/local/bin/rake:31:in `<main>' 
```

我不知道如何解释这个错误。有没有人有任何线索？

# actionscript-3 - 在 AS3 中“反转”旋转（以度为单位）的正确公式？

> ID：11111697
> 
> 赞同：0
> 
> 时间：2012-06-20T01:29:27.710
> 
> 标签：actionscript-3, rotation, degrees

我在舞台上有我的播放器影片剪辑，当单击鼠标时，子弹会发射并以正确的角度投射以将其自身指向鼠标位置。我还想要一个“镜像”敌人，当玩家这样做时，它会向完全相反的方向射击。

例如，当玩家向上射击时，敌人应该向下射击。同样，向右射击会导致敌人向左射击。

是否有一个公式可以将旋转角度转换为完全相反的角度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:28:18.540

加减 180 度不会指向相反的方向吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:48:13.640

使用 Matrix 是一个非常简单和精确的解决方案。只是多个 a 或 c 与 -1 （翻转垂直和水平）。

示例代码：

```
 var _tmpMatrix:Matrix = sprite.transform.matrix;
        _tmpMatrix.a *= -1;
        if ( _tmpMatrix.a < 0 ) {
            _tmpMatrix.tx = sprite.width + sprite.x;
        } else {
            _tmpMatrix.tx = 0;
        }
        sprite.transform.matrix = _tmpMatrix; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-25T19:37:39.243

或者

obj.scaleX = -1;

会做同样的事情。=)

# iphone - 声明的未声明标识符？

> ID：11111698
> 
> 赞同：0
> 
> 时间：2012-06-20T01:29:29.677
> 
> 标签：iphone, ios, xcode, exc-bad-access, undeclared-identifier

我正在制作一个应用程序，如果网页没有加载，它会给出错误并返回到上一个屏幕。然而，在这样做之后，在所有代码之后，得到一个未声明的标识符

```
#pragma mark - View lifecycle

- (void)viewDidLoad
{
    UIAlertView *cats = [[UIAlertView alloc] initWithTitle:@"**Read this first!**" 
                                                   message:@"Thank you for ..." 
                                                  delegate:nil 
                                         cancelButtonTitle:@"OK"
                                         otherButtonTitles:nil];
    [cats show];
    [catscroll setScrollEnabled:YES];
    [catscroll setContentSize:CGSizeMake(320,4800)];
    [catscroll setPagingEnabled:NO];
    [catform loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://m.petfinder.com/s/showPage.do?siteId=76333&pageId=7133416&shelterId=MA84&navigateToPage=Adopt%20Pets"]]];
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)doPop
{
    [cats dissmissWithClickedButtonIndex:-1 animated:YES];
    [self.navigationController popViewControllerAnimated:YES];
    UIAlertView *noconnectcatform = [[UIAlertView alloc] initWithTitle:@"Check your connection!" 
                                                               message:@"Cannot connect to FPP Servers.\nPlease check your Internet Connection\nYou may not proceed until you are connected via a cellular network." 
                                                              delegate:nil cancelButtonTitle:@"OK" 
                                                     otherButtonTitles:nil];
    [noconnectcatform show];
} 
```

正如你在这张图片中看到的那样。如果网页没有加载，它会激活 doPop，它会返回视图并显示一条消息。但是，这会引发 EXC_BAD_ACCESS，因为如您所见，在 viewDidLoad 方法下，还有另一条消息在播放。该应用程序变得混乱和崩溃。我试图通过消除 doPop 方法中的警报来解决这个问题，但是奇怪的是它给了我这个错误。我可能会误解，但不是在它说“UIAlertView *cats”的地方定义了警报视图吗？为什么它说它没有在doPop方法中定义？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:54:25.380

该对象`cats`在本地定义为`viewDidLoad`。变量的范围没有超出方法，因此`doPop`不知道猫是什么。

移动`cats`要在 .h 文件中定义为成员/类变量。

这意味着您需要`UIAlertView *`从内部删除`viewDidLoad`并仅引用猫（因为您正在定义另一个范围为 的变量`viewDidLoad`）。

您在调用的方法中有错字`doPop` The method is `dismissWithClickedButtonIndex:1 animated:YES];` You have`dissmissWithClickedButtonIndex:1 animated:YES];`

此外，您只需要`IBOutlet`定义`@property`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T02:05:48.077

好的，所以如果我是你，我会简单地在加载失败的视图上显示错误消息，然后使用默认的取消操作来弹出这个视图（这是最常见的做法）

或者，如果您真的想在另一个视图中显示消息，则必须使该视图显示错误消息。有几种方法可以做到这一点，但 id 仍然使用第一个选项。（我可以告诉你如果你真的想采用这种方法）

编辑：如果您只是希望该错误消失，请在 .m 文件中的“实施”之前添加

```
@interface CatForm ()
{
    UIAlertView *cats;
}

@end 
```

和改变

```
UIAlertView *cats = [[UIAlertView alloc] initWithTitle:@"**Read this first!**" 
                                                                  message:@"Thank you for considering to adopt a cat from our shelter. PLEASE READ THIS FORM CAREFULLY.\n\nThis on-line form is intended to assist you in selecting a cat that is suitable for you, your family, and your lifestyle.\n\nThe Friends of the Plymouth Pound have established guidelines and policies that must be met in order for your pre-screening application to be approved.\n\nThe information you provide is essential to facilitate the application review process.\n\nIn order to be considered for adoption by the Friends of the Plymouth Pound, you must:\n\n\n*Be at least 18 years old.\n\n*Provide all the applicable information requested below.\n\n**Note, any data field marked with an asterisk character (*) must be filled in. Incomplete application forms will not be considered for review and will be denied automatically.**\n\n*Understand that this is a pre-screening form.\n\n\nThe Friends of the Plymouth Pound will contact you and approve you if, and only if, all requirements have been met.\n\nUpon review of your pre-screening application, you will be contacted by the Friends of the Plymouth Pound to notify you if your application has been accepted and if further information is needed. \n\n\n**Please note that we do contact all personal references and veterinarians, and we must speak with them personally. In addition, in some cases, a pre-adoption home visit may also be required.**\n\nIn the event that your pre-screening application has been not been approved, we will notify you of same.\n\n\nTHE BOARD OF DIRECTORS OF THE FRIENDS OF THE PLYMOUTH POUND RESERVES THE RIGHT TO DENY ANY PRE-APPLICATION BASED ON THE ORGANIZATION'S ESTABLISHED STANDARDS AND POLICIES, INCLUDING, BUT NOT LIMITED TO, INCOMPLETE INFORMATION, NON-DISCLOSURE OR OMISSION OF PERTINENT FACTS, AND NON-COMPLIANCE WITH ACCEPTED STANDARDS.\n\n\nUpon approval of your application and transfer of the animal, you will be charged a $150.00 adoption fee per cat.\n\n\nWe are an all-volunteer organization. Due to the high volume of applications, we ask that you be patient in waiting for a reply. Please do not submit duplicate applications or separate requests for response. Doing this will not accelerate the review process in any way." 
                                                                 delegate:self cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil]; 
```

为了

```
cats = [[UIAlertView alloc] initWithTitle:@"**Read this first!**" 
                                                                  message:@"Thank you for considering to adopt a cat from our shelter. PLEASE READ THIS FORM CAREFULLY.\n\nThis on-line form is intended to assist you in selecting a cat that is suitable for you, your family, and your lifestyle.\n\nThe Friends of the Plymouth Pound have established guidelines and policies that must be met in order for your pre-screening application to be approved.\n\nThe information you provide is essential to facilitate the application review process.\n\nIn order to be considered for adoption by the Friends of the Plymouth Pound, you must:\n\n\n*Be at least 18 years old.\n\n*Provide all the applicable information requested below.\n\n**Note, any data field marked with an asterisk character (*) must be filled in. Incomplete application forms will not be considered for review and will be denied automatically.**\n\n*Understand that this is a pre-screening form.\n\n\nThe Friends of the Plymouth Pound will contact you and approve you if, and only if, all requirements have been met.\n\nUpon review of your pre-screening application, you will be contacted by the Friends of the Plymouth Pound to notify you if your application has been accepted and if further information is needed. \n\n\n**Please note that we do contact all personal references and veterinarians, and we must speak with them personally. In addition, in some cases, a pre-adoption home visit may also be required.**\n\nIn the event that your pre-screening application has been not been approved, we will notify you of same.\n\n\nTHE BOARD OF DIRECTORS OF THE FRIENDS OF THE PLYMOUTH POUND RESERVES THE RIGHT TO DENY ANY PRE-APPLICATION BASED ON THE ORGANIZATION'S ESTABLISHED STANDARDS AND POLICIES, INCLUDING, BUT NOT LIMITED TO, INCOMPLETE INFORMATION, NON-DISCLOSURE OR OMISSION OF PERTINENT FACTS, AND NON-COMPLIANCE WITH ACCEPTED STANDARDS.\n\n\nUpon approval of your application and transfer of the animal, you will be charged a $150.00 adoption fee per cat.\n\n\nWe are an all-volunteer organization. Due to the high volume of applications, we ask that you be patient in waiting for a reply. Please do not submit duplicate applications or separate requests for response. Doing this will not accelerate the review process in any way." 
                                                                 delegate:self cancelButtonTitle:@"OK"
                                                        otherButtonTitles:nil]; 
```

在视图中加载

# java - 为什么这个无效的 EL 表达式？

> ID：11111701
> 
> 赞同：0
> 
> 时间：2012-06-20T01:29:42.577
> 
> 标签：java, jsf, el

我正在做一个简单的注销，并想确保我正确地引用了登录根。

```
<h:form>
  <h:commandLink value="Logout" action="#{request.contextPath}/#{userController.logout()}" />
</h:form> 
```

但我收到此错误：

```
/topnav.xhtml @16,104 action="#{request.contextPath}/#{userController.logout()}" Not a Valid Method Expression: #{request.contextPath}/#{userController.logout()} 
```

更新

现在我正在从注销链接添加导航规则到登录页面，由于注销链接在所有页面上，我需要添加规则以允许转换回登录页面。对于一个简单的项目，这似乎是很多配置。宁愿只调用方法指示登录页面的最终目的地和热点必须放置一个从所有页面到登录页面的导航条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T08:36:37.953

从[commandLink](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/commandLink.html)的文档：

```
Name      Required  Request-time    Type
==============================================================
action    false     false           javax.el.MethodExpression 
```

复合表达式`#{request.contextPath}/#{userController.logout()}`无法解析为[MethodExpression](http://docs.oracle.com/javaee/6/api/javax/el/MethodExpression.html)。

[JSF 2.1 规范](http://jcp.org/en/jsr/detail?id=314)提到 MethodExpressions ：

> *方法表达式*与值表达式非常相似，但不支持动态检索和设置属性，方法表达式支持调用（即执行）任意对象的任意公共方法，传递指定的一组参数，并返回被调用方法的结果（如果有）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:52:16.870

尝试

```
<h:form>
  <h:commandLink value="Logout" action="#{userController.logout()}" />
</h:form> 
```

除了您不需要上下文之外，您不能`#`以使用它的方式两次使用它。

# javascript - Rangy (JS/jQuery) 分割节点

> ID：11111704
> 
> 赞同：6
> 
> 时间：2012-06-20T01:30:18.583
> 
> 标签：javascript, jquery, rangy

我将如何在某个位置（选择）拆分节点/元素。

示例我有这个标记：

```
<p>This is <a href="">a te|st</a>, you like?</p> 
```

（这个管道代表位置/选择）

我想将其转换为：

```
<p>This is <a href="">a te</a></p>|<p><a href="">st</a>, you like?</p> 
```

维护选择。

有任何想法吗？

我使用 Rangy 库和 jQuery，但如果适用，可以使用原始 JS。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T09:57:14.883

您可以通过创建一个从插入符号延伸到段落之后的点并使用它的[`extractContents()`](https://developer.mozilla.org/en/DOM/range.extractContents)方法来做到这一点。

现场演示：http: [//jsfiddle.net/timdown/rr9qs/2/](http://jsfiddle.net/timdown/rr9qs/2/)

代码：

```
var sel = rangy.getSelection();
if (sel.rangeCount > 0) {
    // Create a copy of the selection range to work with
    var range = sel.getRangeAt(0).cloneRange();

    // Get the containing paragraph
    var p = range.commonAncestorContainer;
    while (p && (p.nodeType != 1 || p.tagName != "P") ) {
        p = p.parentNode;
    }

    if (p) {
        // Place the end of the range after the paragraph
        range.setEndAfter(p);

        // Extract the contents of the paragraph after the caret into a fragment
        var contentAfterRangeStart = range.extractContents();

        // Collapse the range immediately after the paragraph
        range.collapseAfter(p);

        // Insert the content
        range.insertNode(contentAfterRangeStart);

        // Move the caret to the insertion point
        range.collapseAfter(p);
        sel.setSingleRange(range);
    }
} 
```

# algorithm - 循环迭代分析

> ID：11111706
> 
> 赞同：0
> 
> 时间：2012-06-20T01:30:49.297
> 
> 标签：algorithm, big-o, analysis

我正在尝试找到以下代码块的运行时间 O(n)：

```
int z=0;
int x=0; 
for (int i=1; i<=n; i=i*3){ //runs from 1->n, 1, 3, 9, 27... <- fcn that defines this?
   //constant running times below
   z = z+5;
   z++;
   x = 2*x;
} 
```

如果是 i=i*2，那么就是 logn 复杂度运行时间。这个案子有什么用？

蒂亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T01:28:00.337

假设你的 n 是 15，这种情况下你的循环如下 -

1, 3, 9 = 3次迭代次数为log_3 (15)

一般来说，考虑它的方法是，如果您将输入减半或除以三分之一（或任何分数）并达到 0，那么它将是您除以该因子的对数基数。

如果减半，则为 log_2(n)，如果除以三分之一，则为 log_3(n)，依此类推。希望总体思路有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:44:30.403

请注意 log_3 (n) = log_2 (n) / log_2 (3) 。这里 log_2 表示以 2 为底的对数，log_3 表示以 3 为底的对数。因此，log_2(n) 只是 log_3(n) 乘以一个常数。

因此，根据大 O 定义，任何运行时间为 O(log_3(n)) 的代码也是 O(log(n))。

# android - Android ImageView 上的抗锯齿圆角

> ID：11111707
> 
> 赞同：9
> 
> 时间：2012-06-20T01:30:59.473
> 
> 标签：android, imageview, rounded-corners, antialiasing

我是android dev的新手，我已经尝试了几个小时来为ImageView添加漂亮光滑的圆角，但没有成功。

我尝试的第一件事是直接将图像的角转圆，但这意味着更改位图，并且由于我需要保留原始图像，而且它们非常大，这对内存并不友好。这也会导致其他困难，因为我的 ImageView 是流动的。

我尝试使用的第二件事是子类化视图后的 clipPath 方法。这可行，但角落有别名。然后我尝试添加一个 PaintFlagsDrawFilter 来实现别名，但这没有奏效。我正在使用 monodroid，我想知道这应该在 Java 中工作。

这是我的代码（C#）：

```
public class MyImageView : ImageView
{
    private float[] roundedCorner;

    /**
     * Contains the rounded  corners for the view.
     * You can define one, four or height values.
     * This behaves as the css border-radius property
     * 
     * @see http://developer.android.com/reference/android/graphics/Path.html#addRoundRect(android.graphics.RectF, float[], android.graphics.Path.Direction)
     */
    public float[] RoundedCorners{
        get{
            return roundedCorner;
        }
        set{
            float[] finalValue = new float[8];
            int i=0;
            if(value.Length == 1){
                for(i=0; i<8;i++){
                    finalValue[i] = value[0];
                }
            }else if(value.Length == 4){
                for(i=0; i<4;i++){
                    finalValue[2*i] = value[i];
                    finalValue[2*i+1] = value[i];
                }
            }

            roundedCorner = finalValue;
        }
    }

    public SquareImageView (Context context) :
        base (context)
    {
        Initialize ();
    }

    public SquareImageView (Context context, IAttributeSet attrs) :
        base (context, attrs)
    {
        Initialize ();
    }

    private void Initialize ()
    {
        RoundedCorners = new float[]{0,0,0,0};
    }

    public override void Draw (Android.Graphics.Canvas canvas)
    {
        Path path = new Path();
        path.AddRoundRect(new RectF(0,0, Width,Height),RoundedCorners, Path.Direction.Cw);

        canvas.ClipPath(path);

        base.Draw (canvas);
    }

    /**
     *  try to add antialiasing.
             */
    protected override void DispatchDraw (Canvas canvas)
    {

        canvas.DrawFilter = new PaintFlagsDrawFilter((PaintFlags)1, PaintFlags.AntiAlias);
        base.DispatchDraw (canvas);
    }

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:13:20.633

我根据 Romain Guy 的[示例代码创建了一个](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)[RoundedImageView](https://github.com/makeramen/RoundedImageView) ，该代码将此逻辑包装到一个您应该能够使用的 ImageView 中。它支持开箱即用的边框和抗锯齿。

它比其他圆角示例更有效，因为它不创建位图的另一个副本，也不使用在画布上绘制两次的 clipPath。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:11:08.923

使用下面的代码

```
public Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) 
    {
        Bitmap output = null;

        if(bitmap != null)
        {
            output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
            Canvas canvas = new Canvas(output);

            final int color = 0xff424242;
            final Paint paint = new Paint();
            final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
            final RectF rectF = new RectF(rect);
            final float roundPx = pixels;

            paint.setAntiAlias(true);
            canvas.drawARGB(0, 0, 0, 0);
            paint.setColor(color);
            canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

            paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
            canvas.drawBitmap(bitmap, rect, rect, paint);
        }

        return output;
    } 
```

并像这样调用这个方法

```
 imageView.setImageBitmap(getRoundedCornerBitmap(bitmap, 10)); 
```

# c - 使用不同的堆栈指针 (gcc) 调用 C 函数

> ID：11111712
> 
> 赞同：8
> 
> 时间：2012-06-20T01:32:12.677
> 
> 标签：c, pointers, gcc, stack

我正在寻找一种在不同堆栈中调用 C 函数的方法，即保存当前堆栈指针，将堆栈指针设置到不同位置，调用该函数并在返回时恢复旧堆栈指针。

这样做的目的是为编程语言提供一个轻量级的线程系统。线程将在非常小的堆栈上运行，检查何时需要更多堆栈并动态调整其大小。这样可以在不浪费大量内存的情况下分配数千个线程。在调用 C 代码时，使用小堆栈是不安全的，因为 C 代码不知道检查和调整大小，所以我想使用一个大的 pthread 堆栈，它仅用于调用 C（在轻量级线程之间共享相同的 pthread）。

现在我可以编写可以正常工作的汇编代码存根，但我想知道是否有更好的方法来做到这一点，例如 gcc 扩展或已经实现它的库。如果没有，那么我想我会把头埋在 ABI 和汇编语言手册中；-) 我只是出于懒惰而不想重新发明轮子而问这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:36:32.777

假设您正在使用 POSIX 线程并且在 POSIX 系统上，您可以使用信号来实现这一点。设置备用信号处理堆栈 ( `sigaltstack`) 并指定一个特殊的实时信号，使其处理程序在备用信号堆栈上运行。然后`raise`信号切换到堆栈，并让信号处理程序从线程本地数据中读取要调用的函数和传递的参数的数据。

请注意，这种方法相当昂贵（更改堆栈的多个系统调用），但应该 100% 可移植到 POSIX 系统。由于它很慢，您可能希望使用汇编语言编写特定于拱门的调用 alt-stack 函数，并且只使用我的通用解决方案作为您尚未编写汇编版本的拱门的后备方案。

# c++ - pthread_spinlock 和 boost::smart_ptr::spinlock 的区别？

> ID：11111720
> 
> 赞同：7
> 
> 时间：2012-06-20T01:33:46.107
> 
> 标签：c++, linux, performance, spinlock

我在以下位置找到了以下自旋锁代码`boost::smart_ptr`：

```
bool try_lock()
{
    return (__sync_lock_test_and_set(&v_, 1) == 0);
}
void lock()
{    
    for (unsigned k=0; !try_lock(); ++k)
    {
        if (k<4)
            ; // spin
        else if (k < 16)
            __asm__ __volatile__("pause"); // was ("rep; nop" ::: "memory")
        else if (k < 32 || k & 1)
            sched_yield();
        else
        {
            struct timespec rqtp;
            rqtp.tv_sec  = 0;
            rqtp.tv_nsec = 100;
            nanosleep(&rqtp, 0);
        }
    }
}
void unlock()
{
     __sync_lock_release(&v_);
} 
```

因此，如果我正确理解这一点，当锁被争用时，传入线程将呈指数级回退，首先疯狂旋转，然后暂停，然后产生其时间片的剩余部分，最后在睡眠和产生之间翻转。

我还找到了`glibc pthread_spinlock`实现，它使用程序集来执行锁定。

```
#define LOCK_PREFIX "lock;" // using an SMP machine

int pthread_spin_lock(pthread_spinlock_t *lock)
{
    __asm__ ("\n"
       "1:\t" LOCK_PREFIX "decl %0\n\t"
       "jne 2f\n\t"
       ".subsection 1\n\t"
       ".align 16\n"
       "2:\trep; nop\n\t"
       "cmpl $0, %0\n\t"
       "jg 1b\n\t"
       "jmp 2b\n\t"
       ".previous"
       : "=m" (*lock)
       : "m" (*lock));

    return 0;
} 
```

我承认我对汇编的理解不是很好，所以我不完全理解这里发生了什么。（有人可以解释一下这是在做什么吗？）

但是，我对 boost spinlock 和 glibc pthread_spinlock 进行了一些测试，当**内核多于线程时，boost 代码的性能优于 glibc 代码**。

另一方面，当**线程多于内核时，glibc 代码更好**。

为什么是这样？这两个自旋锁实现之间有什么区别，使它们在每种情况下的表现都不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-13T00:57:07.107

您从哪里获得`pthread_spin_lock()`问题中发布的实施？它似乎缺少几条重要的线。

我看到的实现（不是内联汇编——它是来自 的独立汇编源文件`glibc/nptl/sysdeps/i386/pthread_spin_lock.S`）看起来很相似，但有两个额外的关键指令：

```
#include <lowlevellock.h>

    .globl  pthread_spin_lock
    .type   pthread_spin_lock,@function
    .align  16
pthread_spin_lock:
    mov 4(%esp), %eax
1:  LOCK
    decl    0(%eax)
    jne 2f
    xor %eax, %eax
    ret

    .align  16
2:  rep
    nop
    cmpl    $0, 0(%eax)
    jg  1b
    jmp 2b
    .size   pthread_spin_lock,.-pthread_spin_lock 
```

它递减`long`传入参数所指向的 a 并在结果为零时返回。

否则，结果为非零，这意味着该线程没有获得锁。所以它执行 a `rep nop`，相当于`pause`指令。这是一个“特殊”nop，它向 CPU 提示线程处于自旋状态，并且 cpu 应该以某种方式处理内存排序和/或分支预测，以提高这些情况下的性能（我不假装准确了解芯片覆盖下发生的不同情况 - 从软件的角度来看，与普通的旧版本没有区别`nop`）。

在`pause`它再次检查该值之后 - 如果它大于零，则锁未被认领，因此它跳转到函数的顶部并尝试再次认领锁。否则，它会跳转到`pause`另一个。

这个自旋锁和 Boost 版本之间的主要区别在于，这个自旋锁在`pause`旋转时从不做任何比 a 更花哨的事情——没有什么比 a`sched_yield()`或`nanosleep()`. 所以线程保持热。我不确定这在您提到的两种行为中是如何发挥作用的，但是 glibc 代码会更贪婪 - 如果一个线程在锁上旋转并且有其他线程准备运行但没有可用的核心，则旋转线程不会t 帮助等待线程获得任何 cpu 时间，而 Boost 版本最终会自愿为等待关注的线程让路。

# ruby-on-rails - Paper Trail Gem：跟踪用户活动以提供信誉积分

> ID：11111721
> 
> 赞同：1
> 
> 时间：2012-06-20T01:33:49.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

[我对名为Paper Trail](https://github.com/airblade/paper_trail)的宝石有疑问。我想为网站上最活跃的人提供声誉积分。这个宝石可以帮助我吗？此外，是否可以跟踪哪些用户编辑或创建了不属于他们的模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:53:57.333

`whodunnit`任何时候在您的系统中进行更改时，书面记录都可以通过属性跟踪用户 ID 。如果您的控制器使`current_user`对象可用，则会自动设置。我知道[authlogic 会这样做](https://github.com/binarylogic/authlogic)，我敢打赌 devise 也[会这样做](https://github.com/plataformatec/devise)。所以是的，它会跟踪任何用户，无论用户和模型之间是否存在实际关系。

# c# - 如何以指定的间隔/时间自动导出文件？

> ID：11111727
> 
> 赞同：0
> 
> 时间：2012-06-20T01:36:10.983
> 
> 标签：c#, asp.net-mvc-3

我有以下代码，当点击链接供用户保存时，它会返回一个 .CSV 文件：

```
public FileContentResult DownloadCSV()
{
    StringBuilder sb = new StringBuilder();
    var props = typeof(PenCalcModel).GetProperties();
    var penSummary = PenSummaryReport(new DateTime(DateTime.Today.Ticks, DateTimeKind.Utc), new DateTime(DateTime.Today.AddDays(1).Ticks, DateTimeKind.Utc), "");

    foreach (PenCalcModel item in penSummary)
    {
        sb.Append(string.Join(",", props.Select(p=>p.GetValue(item,null).ToString())));
        sb.AppendLine();
    }

    return File(new System.Text.UTF8Encoding().GetBytes(sb.ToString()), "text/csv", "PenReport.csv");
} 
```

有没有一种方法可以将它设置为每隔 X 小时从服务器将完全相同的 .CSV 文件导出到网络驱动器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:38:54.290

将任何内容设置为计划任务/作业不应该是 Web 应用程序的责任。该应用程序可以随时回收，甚至可能中断该工作。这些类型的实现应该是 Windows 服务或服务器上某种基于任务的作业的责任。简短的回答，不要在网络应用程序中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:12:32.963

我可能会使用 powershell 脚本来下载内容并使用计划的 windows 任务来触发它。这个问题有几个下载内容的例子：[download url content](https://stackoverflow.com/questions/1973880/download-url-content)

# ruby-on-rails - 如何在没有轨道的情况下使用活动记录

> ID：11111733
> 
> 赞同：16
> 
> 时间：2012-06-20T01:36:37.223
> 
> 标签：ruby-on-rails, ruby, activerecord

伙计们，我正在尝试使用没有轨道的活动记录，但似乎无法让 has_many 正常工作。我从来没有尝试过使用没有轨道的活动记录。我可以从单个表中查询，但关系似乎不起作用。任何人都可以快速浏览一下，看看我是否遗漏了什么。这是存根

```
#!/usr/bin/ruby

require 'rubygems'
gem 'activerecord'

require 'sqlite3'
require 'active_record'

ActiveRecord::Base.establish_connection(
  :adapter => 'sqlite3',
  :database => 'test.db'
)

class User < ActiveRecord::Base
  has_many :problems
end

class Problem < ActiveRecord::Base
  belongs_to :users
end

def show_single_item
  pr = Problem.find(:first)
  puts "showing first problem from the db below", pr.desc
end

def show_all_items
  pr = Problem.find(:all)
  puts "showing all problems from the db below"

  pr.each do |a|
    puts a.desc
  end
end

def check_has_many
  user = User.find(:first)
  puts user.problem.desc
end

# run some methods 
show_single_item  # works
show_all_items    # works
check_has_many    # not working

------

here is the schema of users and problems from the database

sqlite> .schema users
CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name"      varchar(255), "last_name" varchar(255));

sqlite> .schema problems
CREATE TABLE "problems" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id"  integer, "desc" varchar(255));

and some selects to show some data from the tables

sqlite> select * from users;
2|mike|smit
3|mike|wilson

sqlite> select * from problems;
1||first problem
2||it went
3||this is a new problem
4||some more junk data 
```

这是错误

```
ruby-1.8.7-p352/gems/activemodel-3.2.3/lib/active_model/attribute_methods.rb:407:in `method_missing': \
undefined method `problem' for #<User id: 2, first_name: "mike", last_name: "smit"> (NoMethodError)
        from /home/wileybd/.rvm/gems/ruby-1.8.7-p352/gems/activerecord-3.2.3/lib/active_record/attribute_methods.rb:148:in `method_missing'
        from ./main.rb:38:in `check_has_many'
        from ./main.rb:44 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T02:31:34.893

我想我知道你想做什么。如果我没记错的话，您想为给定用户显示每个问题的 desc 值。

完成您需要的一个简单方法是结合您的最后两种方法：

```
user = User.first
user.problems.each do |pr|
  puts pr.desc
end 
```

您在代码中遇到的问题是，从语义上讲，您是在说“显示用户的问题描述（注意它是单数）”而不是说“显示用户遇到的每个问题的描述”，如果它可能应该是这样的：

```
puts user.problems.descs  # This will not work 
```

但这不是它的工作方式。但是，您可以使用一种[新方法](http://apidock.com/rails/ActiveRecord/Calculations/pluck)：

```
puts user.problems.pluck(:desc) 
```

该方法将为用户生成每个问题的 desc 值数组。您可能可以使用输出来以您喜欢的方式打印它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T01:49:49.613

您提供的堆栈跟踪确切地说明了错误是什么。它在 check_has_many 方法中：

```
def check_has_many
  user = User.find(:first)
  puts user.problem.desc # <==== should be user.problems
end 
```

你的用户有很多问题，所以它必须是复数：

```
def check_has_many
  user = User.find(:first)
  puts user.problems.first.desc # <==== do this instead
end 
```

此外，问题模型中的 belongs_to :users 关系应该是单数的：

```
class Problem < ActiveRecord::Base
  belongs_to :user # <=== singular, not :users
end 
```

# perl - 在 Perl 中，如何将 unicode 参数传递给外部命令？

> ID：11111735
> 
> 赞同：7
> 
> 时间：2012-06-20T01:36:47.910
> 
> 标签：perl, unicode, utf-8, solaris, openbsd

这个问题的根本原因是我尝试为 Perl的新选项/参数处理模块 ( [OptArgs ) 编写测试。](http://prepan.org/module/429En4oFbF)这当然涉及`@ARGV`我正在根据[这个](https://stackoverflow.com/questions/2037467/how-can-i-treat-command-line-arguments-as-utf-8-in-perl)问题的答案进行的解析。这在定义了 I18N::Langinfo::CODESET 的系统上运行良好 [1]。

在`langinfo(CODESET)`不可用的系统上，我想至少根据观察到的行为做出最大努力。但是到目前为止，我的测试表明某些系统我什至无法将 unicode 参数正确地*传递*给外部脚本。

我已经设法在“test_script”是一个仅执行以下操作的 Perl 脚本的各种系统上运行类似以下内容`print Dumper(@ARGV)`：

```
use utf8;
my $utf8   = '¥';
my $result = qx/$^X test_script $utf8/; 
```

我发现在 FreeBSD 上 test_script 接收可以解码为 Perl 内部格式的字节。但是在 OpenBSD 和 Solaris 上 test_script 似乎得到了`"\x{fffd}\x{fffd}"`只包含 unicode 替换字符的字符串（两次？）。

我不知道`qx`运营商背后的机制。我认为它要么是`exec`'s 要么是外壳，但与文件句柄不同（我可以对它们进行 binmode 编码），我不知道如何确保它符合我的要求。与`system()`此相同。所以我的问题是我在上面做错了什么？否则 Perl 或 shell 或 OpenBSD 和 Solaris 上的环境有什么不同？

[1] 实际上我认为到目前为止，根据 CPAN 测试人员的结果，这只是 Linux。

**更新（x2）：**我目前通过 cpantester 的设置运行以下命令来测试 Schwern 的假设：

```
use strict;
use warnings;
use Data::Dumper;

BEGIN {
    if (@ARGV) {
        require Test::More;
        Test::More::diag( "\npre utf8::all: "
              . Dumper( { utf8 => $ARGV[0], bytes => $ARGV[1] } ) );
    }
}

use utf8;
use utf8::all;

BEGIN { 
    if (@ARGV) {
        Test::More::diag( "\npost utf8::all: "
              . Dumper( { utf8 => $ARGV[0], bytes => $ARGV[1] } ) );
        exit;
    }
}

use Encode;
use Test::More;

my $builder = Test::More->builder;
binmode $builder->output,         ':encoding(UTF-8)';
binmode $builder->failure_output, ':encoding(UTF-8)';
binmode $builder->todo_output,    ':encoding(UTF-8)';

my $utf8  = '¥';
my $bytes = encode_utf8($utf8);

diag( "\nPassing: " . Dumper( { utf8 => $utf8, bytes => $bytes, } ) );

open( my $fh, '-|', $^X, $0, $utf8, $bytes ) || die "open: $!";
my $result = join( '', <$fh> );
close $fh;

ok(1);
done_testing(); 
```

当它们通过时，我会在各种系统上发布结果。对此的有效性和正确性的任何评论将不胜感激。请注意，它*不是*一个有效的测试。上述的目的是能够比较在不同系统上接收到的内容。

**解决方案**： 真正的潜在问题原来是我的问题中没有解决的问题，也不是下面 Schwern 的回答。我发现一些 cpantesters 机器只安装了/可用的 ascii 语言环境。我不应该期望在这种类型的环境中将 UTF-8 字符传递给程序的任何尝试都能正常工作。所以最后我的问题是无效的测试条件，而不是无效的代码。

到目前为止，我没有看到任何迹象表明`qx`运算符或`utf8::all`模块对参数如何传递给外部程序有任何影响。关键组件似乎是`LANG`和/或`LC_ALL`环境变量，以告知外部程序它们正在运行的语言环境。

顺便说一句，我最初的断言是我的代码在定义了 I18N::Langinfo::CODESET 的所有系统上工作是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:25:49.160

`qx`调用外壳，它可能会干扰。

为避免这种情况，请使用[utf8::all](https://metacpan.org/module/utf8%3a%3aall)打开所有 Perl Unicode voodoo。然后使用该`open`函数打开通往程序的管道，避开 shell。

```
use utf8::all;
my $utf8   = '¥';

open my $read_from_script, "-|", "test_script", $utf8;
print <$read_from_script>,"\n"; 
```

# java - 如何在java中正确格式化JSON字符串？

> ID：11111737
> 
> 赞同：5
> 
> 时间：2012-06-20T01:36:59.960
> 
> 标签：java, json

我有一个球衣客户端，它从我需要进入格式正确的 JSON 的源获取 JSON：

我的 JSON 字符串在通过 http 请求获取时如下所示：

```
{
    "properties": [
        {
            someproperty: "aproperty",
            set of data: {
                keyA: "SomeValueA",
                keyB: "SomeValueB",
                keyC: "SomeValueC"
            }
        }
    ]
} 
```

我遇到了问题，因为 json 必须正确格式化，并且 keyA、keB 和 keyC 没有用引号括起来。是否有一些库可以帮助添加引号或将这个字符串转换为格式正确的 json 的最佳方法？或者，如果有一些简单的方法可以将其转换为 json 对象，而无需编写一堆具有与传入结构匹配的变量和列表的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T01:56:56.143

你可以使用[json-lib](http://json-lib.sourceforge.net/)。很方便！你可以像这样构造你的 json 字符串：

```
JSONObject dataSet = new JSONObject();
dataSet.put("keyA", "SomeValueA") ;
dataSet.put("keyB", "SomeValueB") ;
dataSet.put("keyC", "SomeValueC") ;

JSONObject someProperty = new JSONObject();
dataSet.put("someproperty", "aproperty") ;

JSONArray properties = new JSONArray();
properties.add(dataSet);
properties.add(someProperty); 
```

当然，您只需调用即可获取 JSON 字符串`properties.toString()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T02:00:20.927

我喜欢[Flexjson](http://flexjson.sourceforge.net/)，并且使用[了很多](https://stackoverflow.com/questions/924285/efficiency-of-java-double-brace-initialization)初始化程序：

```
 public static void main(String[] args) {

    Map<String, Object> object = new HashMap<String, Object>() {
        {
            put("properties", new Object[] { new HashMap<String, Object>() {
                {
                    put("someproperty", "aproperty");
                    put("set of dada", new HashMap<String, Object>() {
                        {
                            put("keyA", "SomeValueA");
                            put("keyB", "SomeValueB");
                            put("keyC", "SomeValueC");
                        }
                    });
                }
            } });
        }
    };

    JSONSerializer json = new JSONSerializer();
    json.prettyPrint(true);
    System.out.println(json.deepSerialize(object));
  } 
```

结果是：

```
{
  "properties": [
    {
        "someproperty": "aproperty",
        "set of dada": {
            "keyA": "SomeValueA",
            "keyB": "SomeValueB",
            "keyC": "SomeValueC"
        }
    }
  ]
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-20T10:19:00.090

您的字符串不是 JSON。它与 JSON 类似。没有任何形式的 JSON 可以使这些引号成为可选。AFAIK，没有库可以读取您的字符串并处理丢失的引号，然后将其正确吐出。您需要找到生成此代码的代码并对其进行修复以生成实际的 JSON。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T01:52:17.800

您可以使用[argo](http://argo.sourceforge.net/)，一个简单的 JSON 解析器和 Java 生成器

# makefile - 使用 make 复制具有不同文件名的文件

> ID：11111739
> 
> 赞同：1
> 
> 时间：2012-06-20T01:37:43.157
> 
> 标签：makefile

我想要一个 makefile 从另一个目录复制文件并更改它们的名称。目前，我做这样的事情：

```
ALL: figure1.eps figure2.eps figure3.eps

figure1.eps: ../other_directory/a_nice_graph.eps
        cp $< $@

figure2.eps: ../other_directory/a_beautiful_graph.eps
        cp $< $@

figure3.eps: ../other_directory/an_ugly_graph.eps
        cp $< $@ 
```

我想避免为每一行编写相同的规则（cp $< $@）。我不能使用标准通配符 (%.eps)，因为文件名不匹配。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:52:00.447

试试这个：

```
ALL: figure1.eps figure2.eps figure3.eps

%.eps:
        cp $< $@

figure1.eps: ../other_directory/a_nice_graph.eps

figure2.eps: ../other_directory/a_beautiful_graph.eps

figure3.eps: ../other_directory/an_ugly_graph.eps 
```

# performance - 快速解压算法

> ID：11111740
> 
> 赞同：4
> 
> 时间：2012-06-20T01:37:44.450
> 
> 标签：performance, algorithm, compression

我正在寻找可以在常规英文文本上提供 2-4 倍的体面压缩的压缩/解压缩算法，但我几乎可以尽可能快地解压缩这些数据，因为我可以将其从主内存中取出（~10Gbps）。就快速解压缩算法而言，目前的最新技术是什么（可能是使用多核的矢量化代码）

特别是，我正在查看这篇[使用 SIMD 指令进行快速整数压缩](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFQQFjAA&url=http://www.mpi-inf.mpg.de/~rgemulla/publications/schlegel10compression.pdf&ei=9WXjT6SdCaKe2QXM8NnNCA&usg=AFQjCNHgwdqc_ocCxHjrcjNwQo14ke7ALQ&sig2=yoKMbAIxlRCmlFaWB1AyTA)的论文 ，并想知道是否在任何系统中都使用过类似的算法。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-20T09:21:51.443

看看[LZO](http://www.oberhumer.com/opensource/lzo/)和[lz4](http://code.google.com/p/lz4/)。在您的数据上试用它们，看看它们的表现如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T11:59:27.143

golomb 代码可以像哈夫曼一样好，并且非常简单和快速。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-20T09:23:26.010

[BWT](http://en.wikipedia.org/wiki/BWT) +[熵编码](http://en.wikipedia.org/wiki/Entropy_coding)（例如[Huffman 编码](http://en.wikipedia.org/wiki/Huffman_coding)）非常快（复杂度 O(n)），但需要两次通过。

# sql - 真实列的 SQL 百分比

> ID：11111744
> 
> 赞同：5
> 
> 时间：2012-06-20T01:38:42.733
> 
> 标签：sql, sqlite

我有一个表，其中每一行都有一个描述字段和一个布尔值。我正在尝试编写一个查询，我可以按每个相应的描述进行分组，并查看布尔值为真的次数百分比。

示例表：

```
 PID    Gender    SeniorCitizen
     1       M             1
     2       M             1
     3       F             0
     4       F             1
     5       M             0 
```

我想要一个返回这个的查询：

```
 Gender    SeniorPct
      M         .66
      F         .50 
```

我已经到了可以计算男性或女性个人百分比的查询的地步 - 但我想同时查看这两个结果

```
 SELECT Gender, COUNT(*) * 1.0 / 
                   (SELECT COUNT(*) FROM MyTable WHERE Gender='M') 
    FROM MyTable WHERE Gender='M' and SeniorCitizen=1; 
```

我一直在尝试在上面的外部 SELECT 中包含“GROUP BY Gender”语句，但在调整外部 SELECT 之后，我似乎无法弄清楚如何调整内部 SELECT 以获得正确的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T02:04:18.120

*（我在 MySQL 下测试过，请检查是否可以将相同的想法应用于 SQLite。）*

要找到老年人的数量（按性别），我们可以将这些位视为数字并简单地总结它们：

```
SELECT
    Gender,
    SUM(SeniorCitizen) Seniors
FROM MyTable
GROUP BY Gender

GENDER  SENIORS
M       2
F       1 
```

基于此，我们可以轻松计算百分比：

```
SELECT
    Gender,
    SUM(SeniorCitizen) / COUNT(*) * 100 SeniorsPct
FROM MyTable
GROUP BY Gender

GENDER  SENIORSPCT
M       66.6667
F       50 
```

您可以在这个[SQL Fiddle](http://sqlfiddle.com/#!2/7c6c2/8)中使用它。

* * *

更新：非常相似的想法也适用于 SQLite。请看一下另一个[SQL Fiddle](http://sqlfiddle.com/#!7/d5f8f/3)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T01:47:03.573

尝试以下操作：

```
CREATE TABLE #MyTable
(
    PID INT,
    Gender VARCHAR(1),
    SeniorCitizen BIT
)

INSERT INTO #MyTable
(
    PID,
    Gender,
    SeniorCitizen
)
SELECT 1, 'M', 1 UNION
SELECT 2, 'M', 1 UNION
SELECT 3, 'F', 0 UNION
SELECT 4, 'F', 1 UNION
SELECT 5, 'M', 0

SELECT
    Gender,
    COUNT(CASE WHEN SeniorCitizen = 1 THEN 1 END), -- Count of SeniorCitizens grouped by Gender
    COUNT(1), -- Count of all users grouped by Gender
    CONVERT(DECIMAL(2, 2), -- You can ignore this if you want
        COUNT(CASE WHEN SeniorCitizen = 1 THEN 1 END) * 1.0 / COUNT(1) -- Your ratio
        )
FROM
    #MyTable
GROUP BY
    Gender 
```

# c++ - 在 C++ 中编写多个 if-else 语句并使用 rand() 函数进行分支

> ID：11111748
> 
> 赞同：0
> 
> 时间：2012-06-20T01:40:09.880
> 
> 标签：c++

问题如下：

> 我们希望能够对在野外发现的新动物进行分类。我们将使用该`rand()`函数生成随机整数（0 或 1）来分别表示一系列问题的“否”或“是”答案。然后我们可以使用答案将动物分类为：
> 
> *   昆虫
> *   爬行动物
> *   鸟类
> *   哺乳动物
> 
> 在每种情况下，问题都会持续到做出识别为止。对于提出的每个问题，答案都需要一个随机值。`if`要识别每种动物，请使用嵌套`else`结构。

以下是一些示例程序运行及其输出。每个示例都是一个不同的程序运行。

```
随机动物生成器

动物是脊椎动物吗？是——不是昆虫
动物是温血动物吗？是——不是爬行动物
动物会飞吗？是的——动物是鸟！

```

* * *

```
随机动物生成器

动物是脊椎动物吗？不——动物是昆虫！

```

* * *

```
随机动物生成器

动物是脊椎动物吗？是——不是昆虫
动物是温血动物吗？不——动物是爬行动物！

```

我很混乱。如何生成所有`else if`陈述以按顺序工作和回答？我如何让他们回答是或否，然后让他们再次回答是或否等？另外，如何使它们随`rand()`功能随机出现？

代码：

```
#include <iostream> 
using namespace std; 

main () { 
    char Answer; 
    cout<<" Random Animal Generator\n"; 
    cout << "Is the animal a vertibrate?(1=Yes/0=No)? "; 
    cin >> Answer; 

    if(Answer == '1') 
        cout << "Not Insect \n"; 
    else (Answer== '0') 
        cout<<"The animal is an Insect!\n"; 

    cout<<endl; 
    system("pause"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:48:59.473

这是一个开始：

```
#include <iostream> 
using namespace std; 

int getRandomAnswer()
{ // code here to return a 1 or 0 randomly
}

main () { 
    cout<<" Random Animal Generator\n"; 
    cout << "Is the animal a vertebrate?"; 

    if(getRandomAnswer() == 1) 
    {
        cout << "Yes - Not Insect \n"; 
        cout << "Is the animal warm blooded?"
        if (getRandomAnswer() == 1)
        {
          // Code for "warm blooded" case goes here
        }
        else
        {
          // Code for "not warm blooded" case goes here
        }
     }
    else
    {
       cout<<"No. The animal is an Insect!\n"; 
    }

    cout<<endl; 
} 
```

`system("pause");`另外，在任何情况下都不要使用。如果您想等待按键，请执行此操作。但是您无法知道是否有命令`pause`在其他人的机器上调用，或者如果有，它会做什么。例如，在我的机器上，有一个命令叫`pause`暂停我家反应堆上的冷却剂泵。想象一下，如果我在我的机器上测试了你的代码，可能会造成什么危害！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:53:49.250

C 库有一个函数`rand()`，它返回一个从 0 到 RAND_MAX 的随机数。现在，您需要一个零或一的随机数。什么是接受随机数并以相等概率（或非常接近相等）返回 0/1 的好函数？

想想自然数的性质。您需要一个大约一半的数字有而另一半没有的属性。

# objective-c - 具有特定控制的 NSTimer 秒表

> ID：11111749
> 
> 赞同：0
> 
> 时间：2012-06-20T01:40:11.567
> 
> 标签：objective-c, ios, nstimer, stopwatch

我有一个标签 00:00.0 和按钮。当我按下按钮时，无论我点击多少次，计时器都应该在标签上计数。当我点击标签时计时器应该停止，并且应该在第二次点击同一标签时重置。

**我尝试了一切，但我无法达到结果:) 任何人请帮助我。**

```
@interface MainViewController : UIViewController <FlipsideViewControllerDelegate> {
    IBOutlet UILabel *stopWatchLabel;
    NSTimer *stopWatchTimer; // Store the timer that fires after a certain time
    NSDate *startDate; // Stores the date of the click on the start button
}

@property (nonatomic, retain) IBOutlet UILabel *stopWatchLabel;
    - (IBAction)onStartPressed:(id)sender;
    - (IBAction)onStopPressed:(id)sender;
    - (void)updateTimer; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T14:20:12.147

在我的活动项目中引用一些代码。

```
 -(void)start{
        [self setup];
        if(_timer == nil){
            _timer = [NSTimer scheduledTimerWithTimeInterval:kDefaultFireInterval target:self selector:@selector(updateLabel:) userInfo:nil repeats:YES];
            _counting = YES;
        }
    }

    -(void)pause{
        [_timer invalidate];
        _timer = nil;
        _counting = NO;
    } 
```

这就是实现秒表的基本概念，如果你想使用 UILabel 作为秒表，[MZTimerLabel](https://github.com/mineschan/MZTimerLabel/)是一个完美的两行解决方案。看一看。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T12:22:36.980

```
-(IBAction)onStartpressed:(id)sender{
     NSTimer * timer = [[NSTimer alloc] initWithFireDate:[NSDate date] interval:1.0 target:self selector:@selector(methodthatUpdateslabel) userInfo:nil repeats:YES];
     [[NSRunLoop mainRunLoop]addTimer:timer forMode:NSDefaultRunLoopMode];

}    

-(IBAction)onStopPressed:(id)sender{
[timer invalidate];
} 
```

这应该可以，希望对您有所帮助。

# android - 为什么到处都是“android：”？

> ID：11111751
> 
> 赞同：5
> 
> 时间：2012-06-20T01:40:29.017
> 
> 标签：android, android-layout

为什么 Android`xml`布局文件需要`android:`在*每个*视图属性之前？系统不知道它是安卓吗？如果这个词确实是多余的，那么省略它似乎会节省这些文件所需的大部分内存，更不用说程序员的打字了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T01:42:54.073

它用于指定元素或属性是该 XML 命名空间的一部分。您可以为自己的自定义组件创建自己的命名空间（通常您会在 3rd 方库中看到它们）。所以在这方面，它不是多余的，因为它可以防止名称冲突。

# android - 运行套接字时android无法关闭对话框

> ID：11111753
> 
> 赞同：2
> 
> 时间：2012-06-20T01:41:05.473
> 
> 标签：android, sockets, rdp

我有一些问题。[`Dialog.dismiss()`](http://developer.android.com/guide/topics/ui/dialogs.html)不起作用。我想输入ip、用户名、密码来登录[WinServer 2003](http://en.wikipedia.org/wiki/Windows_Server_2003)。当我单击提交按钮时，对话框无法关闭。需要注意的是，我的 Thread-socket 能够从服务器检索消息并将消息发送回服务器。只有当线程套接字出错时才能关闭对话框。

```
 public void onCreate(Bundle savedInstanceState) {      
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jiemian);

    netInit();
    JieMianActivity.jiemian = this;
    LayoutInflater factory = LayoutInflater.from(JieMianActivity.this);  

    View view = factory.inflate(R.layout.login, null);  

    dialog02 = new AlertDialog.Builder(JieMianActivity.this)  
         .setIcon(android.R.drawable.btn_star)  
         .setTitle("login")  
           .setView(view)  
           .setPositiveButton("submit", onclickButton)  
           .setNegativeButton("cancel",  onclickButton).create();  
    dialog02.show(); 
}

private OnClickListener onclickButton = new OnClickListener() {

    @Override  
    public void onClick(DialogInterface dialog, int which) {  
        Log.v("which", which+"");
        switch(which){
        case Dialog.BUTTON_POSITIVE:
            dialog.dismiss();//doesn't work , cann't close dialog.
            EditText ip = (EditText) findViewById(R.id.ip);

            EditText username = (EditText) findViewById(R.id.username);

            EditText password = (EditText) findViewById(R.id.password);

            new Connect(JieMianActivity.jiemian).run();//do some socket thing
            break;
        case Dialog.BUTTON_NEGATIVE:
            dialog.dismiss();
            JieMianActivity.jiemian.finish();
            break;
        }
    }
}; 
```

这是我的主题：

```
 class Connect extends Thread{
    private JieMianActivity jiemain;
    public Connect(JieMianActivity jiemian){
        this.jiemain = jiemian;
    }

    public void run(){
        //Process.setThreadPriority(Process.THREAD_PRIORITY_LOWEST);
        try {
            Display display = getWindowManager().getDefaultDisplay();
            InputStream is = getResources().getAssets().open(
                    connect2RDP.mapFile);

            sfv = (SurfaceView) findViewById(R.id.surfaceView);

            sfh = sfv.getHolder();
            sfh.addCallback(JieMianActivity.jiemian);

            if (conn.connect("192.168.10.134", "Adminstrator", "123",
                    display.getWidth(), display.getHeight(), 3389, is)) {
                Log.v("login", "success");  

                //dialog02.dismiss();
                Log.v("login", "ok");

                canvas = new MyCanvas();
                canvas.setRop(new RasterOp());
                canvas.setHeight(Options.height);
                canvas.setWidth(Options.width);
                canvas.setRight(Options.width - 1);
                canvas.setBottom(Options.height - 1);
                canvas.setBackstore(new WrappedImage(Options.width,
                        Options.height, JieMianActivity.jiemian));
                canvas.setJiemian(JieMianActivity.jiemian);
                canvas.setSurView(sfv);
                canvas.setSurHolder(sfh);
                conn.doconnect(JieMianActivity.jiemian);// 启动RDP

                // init();
            }
        } catch (OrderException e) {

        } catch (Exception e) {

        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:11:01.407

您需要更改代码以启动线程，您需要调用方法`start()`- 这将执行`run()`在该线程中编写的方法。
因此，调用`Connect.start()`而不是`Connect.run()`在您的`onClick`处理程序内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:59:30.540

我认为您应该在 UI 线程中关闭警报对话框，否则它将不起作用。您可以通过两种方式做到这一点： 1\. 使用消息处理程序 2\. 使用 RunOnUiThread。样品供您参考：

1.

```
messageHandler.sendEmptyMessageDelayed(unique_id, 500);

private Handler messageHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg) {
        switch(msg.what) {

            case unique_id:
                // do here
                break;
        }
    }
}; 
```

2.

```
Runnable hide_ui = new Runnable() {
   @Override
   public void run() {
     // do here                           
   }
 };
 runOnUiThread(hide_ui); 
```

# javascript - 来自 Facebook FQL 函数的 JSON JS 对象数组

> ID：11111754
> 
> 赞同：0
> 
> 时间：2012-06-20T01:41:12.843
> 
> 标签：javascript, jquery, json, facebook-fql

我一直在用这个功能拉头发。这是一个函数中的一个函数，这就是为什么我认为它没有返回任何东西，代码如下：

```
function getEventImageNormal(data) {
    $.getJSON("https://graph.facebook.com/fql?access_token=" + access_token + "&q=SELECT pic FROM event WHERE eid=" + data, function(data){
        console.log(data.data[0].pic);
        return data.data[0].pic;
    });
} 
```

正确的项目，图像的 URL，被设置到控制台日志，但没有被返回？

**如果有人想知道为什么我不使用`https://graph.facebook.com/object_id/picture`来获取事件图像，那是因为此功能当前不起作用，唯一的方法是使用 FQL 获取事件图像。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:55:47.820

默认情况下`getJSON()`执行异步调用。您可以直接在成功回调处理程序中调用函数来处理响应。

```
$.getJSON("https://graph.facebook.com/fql?access_token=" + access_token + "&q=SELECT pic FROM event WHERE eid=" + data, function(data){
    console.log(data.data[0].pic);
    getResponse(data);
});

function getResponse(data) {
    // handle your data here.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:08:32.160

您需要在`callback=?`url 中添加参数，让远程 url 和 jQuery 知道这是一个`jsonp`调用。如果只发送json，则违反跨域安全策略，浏览器不会接受它进入DOM。

由于 ajax 的异步特性，这是在请求的成功回调中处理数据的补充。

```
 var data=/* your value*/
 $.getJSON("https://graph.facebook.com/fql?callback=?&access_token=" + access_token + "&q=SELECT pic FROM event WHERE eid=" + data, function(data){
 /* process data here*/

 }) 
```

# objective-c - 如何忽略 Objective-C 中的“无效”SSL 证书？

> ID：11111755
> 
> 赞同：0
> 
> 时间：2012-06-20T01:41:18.397
> 
> 标签：objective-c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T21:28:52.227

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T07:33:37.827

If your application flow needs the syncronous request, i answer something similar here [Objective-C SSL Synchronous Connection](https://stackoverflow.com/a/18843828/1662307)

# iis - 使用 WebDeploy 将应用程序池同步到远程主机

> ID：11111756
> 
> 赞同：0
> 
> 时间：2012-06-20T01:41:32.993
> 
> 标签：iis, iis-7, webdeploy, microsoft-web-deploy

我正在尝试使用 IIS 凭据将应用程序池从本地计算机同步到远程服务器

这是我运行的命令

```
msdeploy.exe 
          -verb:sync 
          -source:appPoolConfig='MyAppPool' 
          -dest:appPoolConfig,
                 computerName='https://remoteserver.com:8172/MSDeploy.axd',
                 userName='WebDeploy',
                 password='Pa$$word',
                 authtype='Basic',
                 includeAcls='False' 
          -enableLink:AppPoolExtension  
          -disableLink:CertificateExtension 
          -allowUntrusted 
```

但我不断得到

```
Error Code: ERROR_USER_UNAUTHORIZED
More Information: Connected to the remote computer ("dev.dash.exceptron.com") using the Web Management Service, but could not authorize. Make sure that you are using the correct user name and password, that the site you are connecting to exists, and that the credentials represent a user who has permissions to access the site.  Learn more at: http://go.microsoft.com/fwlink/?LinkId=221672#ERROR_USER_UNAUTHORIZED.
Error: The remote server returned an error: (401) Unauthorized.
Error count: 1. 
```

我可以很好地同步现有网站，但我无法创建网站或应用程序池。我认为这可能与我的用户具有“站点”级别的事实有关，而应用程序池不适合该级别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:56:14.180

发现了问题，似乎 IIS 凭据没有权限做很多任务，使用`authtype='NTLM'` Windows 用户名和密码解决了这个问题。

这个链接似乎也很有用， [http://blog.scnetstudio.com/post/2011/01/08/How-to-Configure-Windows-Server-2008-R2-to-support-Web-Deploy- (for-Web -矩阵）.aspx](http://blog.scnetstudio.com/post/2011/01/08/How-to-Configure-Windows-Server-2008-R2-to-support-Web-Deploy-(for-Web-Matrix).aspx)

# clojure - 通过访问其先前元素来处理序列

> ID：11111757
> 
> 赞同：1
> 
> 时间：2012-06-20T01:42:09.077
> 
> 标签：clojure

我想创建一个序列，但是要创建它的每个元素，我需要访问前两个元素。在 clojure 中做这些事情的一般方法是什么？

所以两个略有不同的情况 - a) seq 是 (abc) 当我处理 c 我想访问 a 和 b .... b) 并具有通过始终能够访问这两个来创建序列本身的能力以前的元素。

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T02:53:17.037

partition 几乎免费为您提供：

```
(partition-all 3 1 (range 100))
((0 1 2) (1 2 3) (2 3 4) (3 4 5) (4 5 6) (5 6 7) (6 7 8) ... ) 
```

然后你可以将你的函数映射到分区序列上：

```
(map my-func (partition-all 3 1 (range 100))) 
```

您只需要让您的函数意识到如果您的 seq 不是三的倍数，最后一段可能包含少于三个元素的事实。如果你想放弃任何额外的使用`partition`而不是`partition-all`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:36:41.247

好吧，这是一种方法。假设您有一个函数`g`，它将最后两个值作为输入并产生下一个值。

```
(defn f [g x0 x1] 
  (let [s (g x0 x1)] 
    [s (fn [] (f g x1 s))])) 
```

给定`g`序列中的两个连续值，`f`返回由下一个值和一个将返回该值的函数组成的对。您可以使用`f`如下方式生成此类对的无限序列：

```
(iterate (fn [[v h]] (h)) (f g x0 x1)) 
```

要仅提取序列值，请执行以下操作：

```
(map first (iterate (fn [[v h]] (h)) (f g x0 x1))) 
```

例如：

```
user=> (take 10 (map first (iterate (fn [[v h]] (h)) (f + 0 1))))
(1 2 3 5 8 13 21 34 55 89) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:32:11.533

您可以`iterate`使用两个元素的向量，然后获取`first`结果序列的。

例如，要创建斐波那契数列：

```
user=> (def fib (map first (iterate (fn [[a b]] [b (+ a b)]) [1 1])))
#'user/fib

user=> (take 10 fib)
(1 1 2 3 5 8 13 21 34 55) 
```

# python - 当我在输入“python manage.py runserver”后配置 django 管理工具时，我使用了哪个服务器？

> ID：11111760
> 
> 赞同：1
> 
> 时间：2012-06-20T01:42:31.080
> 
> 标签：python, django, django-admin, python-2.6

我正在配置 django 以使用 django 管理工具，遵循网页[http://www.ibm.com/developerworks/linux/library/l-django/?S_TACT=105AGX52&S_CMP=cn-al中的步骤](http://www.ibm.com/developerworks/linux/library/l-django/?S_TACT=105AGX52&S_CMP=cn-a-l)

当我输入“python manage.py runserver”时，我使用了哪个服务器？阿帕奇？还是python中的简单http服务器？我有 apache 2.2 监听端口 80。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:45:14.120

您正在使用 Django 的开发服务器，正如您所说，它是一个用 Python 编写的简单 http 服务器，并在您以“python manage.py runserver”命令启动的 Python 进程中运行。请注意，此服务器不适用于生产用途。例如，它一次只能处理一个请求。

# ios - 按与当前位置的距离对 TableView 进行排序

> ID：11111762
> 
> 赞同：1
> 
> 时间：2012-06-20T01:42:52.860
> 
> 标签：ios, xcode, sqlite

我有一个包含经纬度信息的 SQL 数据库。我找到了我当前的位置，并且能够获得每个位置与我当前位置的距离。我可以让我的 tableview 显示这个距离，但我知道我想对该 tableview 进行排序，以便首先列出最接近的。

我的想法是我需要将距离添加到我的 SQL DB 数据中，以某种方式对其进行排序，然后将该信息显示回 tableview。

我的想法是我会在我的 TableView 中完成所有这些工作。寻找有关如何执行此操作以及我是否应该在 tableview 中执行此操作的指导。

```
#import "TulsaMasterViewController.h"
#import "TulsaDetailViewController.h"
#import "Bars.h"
#import "BarDatabase.h"

@implementation TulsaMasterViewController

@synthesize barArray = _barArray;
@synthesize currentLat = _currentLat;

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
currentLat = newLocation;

if (newLocation.horizontalAccuracy <= 100.0f) {
    [lm stopUpdatingLocation];
}

[self.tableView reloadData];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
NSString *msg = [[NSString alloc]initWithString:@"Error obtaining location"];
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Error" message:msg delegate:nil cancelButtonTitle:@"Done" otherButtonTitles:nil];
[alert show];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [self.barArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

//Get the object from the array.
Bars *barObj = [self.barInfo objectAtIndex:indexPath.row];

//Set the name.
cell.textLabel.text = barObj.barName;

if (currentLat == nil) {
    cell.detailTextLabel.text = [NSString stringWithFormat:@"?"];
}else
{
    cell.detailTextLabel.text = [NSString stringWithFormat:@"%.02f", cachedDist];
}

// Set up the cell
return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
if ([[segue identifier] isEqualToString:@"ShowDetails"]) {
    TulsaDetailViewController *detailViewController = [segue destinationViewController];

    detailViewController.detailItem = [self.barArray objectAtIndex:[self.tableView indexPathForSelectedRow].row];
}
}

- (void)viewDidLoad
{
[super viewDidLoad];

self.barArray = [BarDatabase database].barInfo;

lm = [[CLLocationManager alloc] init];
lm.delegate = self;
[lm startUpdatingLocation];
}

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];

for (Bars *barObj in barArray) {
    NSString *strLat = barObj.Lat;
    NSString *strLong = barObj.Long;
    CLLocation *barLocation = [[CLLocation alloc] initWithLatitude:[strLat doubleValue] longitude:[strLong doubleValue]];
    CLLocationDistance distance = [currentLat distanceFromLocation:barLocation]/1000;

    [barArray addObject:[NSNumber numberWithDouble:distance]];
    NSSortDescriptor *sort=[NSSortDescriptor sortDescriptorWithKey:@"cachedDist" ascending:YES];
    [barArray sortUsingDescriptors:[NSArray arrayWithObject:sort]];
} 
```

供参考我的其余代码

酒吧.h

```
#import <Foundation/Foundation.h>

@interface Bars : NSObject {
    NSString *barName;
    NSString *barAddress;
    NSString *Lat;
    NSString *Long;
    NSString *cachedDist;
}

@property (nonatomic, copy) NSString *barName;
@property (nonatomic, copy) NSString *barAddress;
@property (nonatomic, copy) NSString *Lat;
@property (nonatomic, copy) NSString *Long;
@property (nonatomic, copy) NSString *cachedDist;

- (id)initWithName:(NSString *)name address:(NSString *)address latitude:(NSString *)latitude longitude:(NSString *)longitude distance:(NSString *)distance;

@end 
```

酒吧.m

```
#import "Bars.h"

@implementation Bars

@synthesize barName = _barName;
@synthesize barAddress = _barAddress;
@synthesize Lat = _Lat;
@synthesize Long = _Long;
@synthesize cachedDist = _cachedDist;

- (id)initWithName:(NSString *)name address:(NSString *)address latitude:(NSString *)latitude longitude:(NSString *)longitude distance:(NSString *)distance;
{
if ((self = [super init])) {
    self.barName = name;
    self.barAddress = address;
    self.Lat = latitude;
    self.Long = longitude;
    self.cachedDist = distance;
}
return self;
}

@end 
```

条形数据库.h

```
#import <Foundation/Foundation.h>
#import <sqlite3.h>

@interface BarDatabase : NSObject
{
    sqlite3 *_database;
}

+ (BarDatabase *)database;
- (NSMutableArray *)barInfo;

@end 
```

条形数据库.m

```
#import "BarDatabase.h"
#import "Bars.h"

@implementation BarDatabase

static BarDatabase *_database;

+ (BarDatabase *)database {
if (_database == nil) {
    _database = [[BarDatabase alloc] init];
}
return _database;
}

- (id)init {
if ((self = [super init])) {
    NSString *sqLiteDb = [[NSBundle mainBundle] pathForResource:@"TulsaBars" 
                                                         ofType:@"sqlite"];

    if (sqlite3_open([sqLiteDb UTF8String], &_database) != SQLITE_OK) {
        NSLog(@"Failed to open database!");
    }
}
return self;
}

- (void)dealloc {
sqlite3_close(_database);
}

- (NSMutableArray *)barInfo {

NSMutableArray *retval = [[NSMutableArray alloc] init];
NSString *query = @"SELECT * FROM TulsaBars";
sqlite3_stmt *statement;
if (sqlite3_prepare_v2(_database, [query UTF8String], -1, &statement, nil) 
    == SQLITE_OK) {
    while (sqlite3_step(statement) == SQLITE_ROW) {
        char *nameChars = (char *) sqlite3_column_text(statement, 1);
        char *addressChars = (char *) sqlite3_column_text(statement, 2);
        char *latChars = (char *) sqlite3_column_text(statement, 8);
        char *longChars = (char *) sqlite3_column_text(statement, 9);
        NSString *name = [[NSString alloc] initWithUTF8String:nameChars];
        NSString *address = [[NSString alloc] initWithUTF8String:addressChars];
        NSString *latitude = [[NSString alloc] initWithUTF8String:latChars];
        NSString *longitude = [[NSString alloc] initWithUTF8String:longChars];

        Bars *info = [[Bars alloc]
                      initWithName:name address:address latitude:latitude longitude:longitude];                        
        [retval addObject:info];
    }
    sqlite3_finalize(statement);
}
return retval;

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:38:17.553

人力资源管理系统。在 cellForRowAtIndexPath 内不应该发生排序。在游戏中为时已晚。如果每个单元格为 1 个条形，并且条形应按距离排序，我建议您在 self.barInfo 的惰性吸气剂中实现排序（如果这是您的条形列表）。

我不确定您的模型是什么样的，但是如果每个条形对象都具有与您的参考点的距离的属性，那么您的排序看起来与您在那里的相似。

这种排序只会在加载第一个单元格（即“惰性”部分）然后缓存时发生。所以你的 cellForRowAtIndexPath: 只会在它的 indexPath 行中询问模型对象，相信它的顺序是正确的。

我不确定你对这个术语有多少熟悉，所以请随时提出澄清问题，我会重复回答。

共享更多代码后编辑：我认为您应该在名为 cachedDistance 之类的栏上添加一个@property，并且每当您进入屏幕（viewWillAppear）时，遍历栏并设置它们的缓存距离（使用与 cellForRow 中类似的代码...）。然后为 self.barArray: 实现一个 getter：`-(NSArray *)barArray`它本质上返回使用 sortDescriptor 排序的 barArray，其中缓存的距离属性的名称作为它的键。这将大大简化您的 cellForRow... 代码。

然后，您可以扩展逻辑以在获取位置更新时重新计算距离，也许只有当它与之前的距离有一定距离时。

# sql - 无法在 max 函数上聚合

> ID：11111766
> 
> 赞同：0
> 
> 时间：2012-06-20T01:43:42.497
> 
> 标签：sql, sqlite

我有一张桌子

```
CREATE TABLE `messages` ( `uid` BIGINT NOT NULL ,
`mid` BIGINT , `date` BIGINT NOT NULL  , PRIMARY KEY (`mid`)); 
```

我想选择按 uid 分组的 max(date)，即对于每个 uid(read user) 我想查找最新消息（最大日期）

试过这个

```
select messages.mid,  max(messages.date), messages.uid, messages.body 
                                   from messages 
                             where messages.chat_id is  NULL 
                                   group by messages.uid 
```

但查询工作错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T02:00:37.283

子查询可以为您提供所需的日期，以便为每个用户检索最新消息：

```
SELECT messages.uid, messages.mid, messages.date, messages.body
FROM messages
WHERE messages.chat_id IS NULL
AND messages.date IN 
( SELECT MAX(m2.date) FROM messages m2 
  WHERE m2.uid = messages.uid AND m2.chat_id IS NULL 
)
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:25:17.110

您需要在使用聚合函数时按所有字段进行分组:) 使用子查询可以解决问题。

> SELECT messages.date,messages.uid,messages.mid,messages.body FROM messages WHERE messages.chat_id IS NULL AND messages.date IN (SELECT MAX(msg.date) FROM messages msg WHERE messages.chat_id IS NULL And msg.uid = 消息.uid )

或者，也可以使用“有”子句来完成

完毕 ：）

# wordpress - 将 Wordpress 嵌入 Matrix 的方法？

> ID：11111768
> 
> 赞同：0
> 
> 时间：2012-06-20T01:44:07.333
> 
> 标签：wordpress, matrix, mysource

如何将 Wordpress 嵌入到 Squiz Matrix 中？不一定是整个实例，也许只是让生活更轻松的元素。

我正在考虑 iframe，但这似乎有点过时 - 有没有人制作了允许您使用 Wordpress 的自定义资产？如果不是真的应该添加矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:22:37.580

是的，您可以将 wordpress 网站添加到 iframe 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T06:40:59.477

您可以使用远程内容资产来实现这一点。

可以在[此处](http://manuals.matrix.squizsuite.net/remote-content)找到有关如何使用远程内容资产的文档。

# java - @ElementCollection 或 @OnetoMany 与实体或原语？

> ID：11111769
> 
> 赞同：3
> 
> 时间：2012-06-20T01:44:16.877
> 
> 标签：java, hibernate, jpa

我有一个包含多个页面的站点，每个页面都有一个包含一些数据的表。表格有很多列，用户可以选择显示或隐藏哪些列。我正在尝试坚持这些选择。

我的问题是选择持久化这些对象的最佳方式。

我看到了许多可能的方法，但我都没有成功实施。但在我承诺其中之一之前，我想知道我是否做错了，或者我对如何实施这件事有点离题。

我有一个已经持久化的用户类。

选项#1 在我的用户实体中，添加一个 Map> 字段，其中键是页面名称，列表是用户在该页面上选择的列。使用@ElementCollection。

选项#2 用户实体有一个@onetomany 列表。这需要一个 UserColumns 实体，以 pagename 作为主键，并且每列与另一个实体有@oneToMany 关系。

选项1：

```
@Entity
public class User{

private Map<String, List<String>> columns;

@ElementCollection
public void setColumns(Map<String, List<String>> colunms){

}

} 
```

选项 2：

```
@Entity
public class User{

private List<UserColumns> columns;

@ElementCollection or @OneToMany
public void setColumns(List<UserColumns> colunms){

}

} 
```

我意识到如果不查看实际代码就很难回答这个问题，而且我可能没有充分或准确地描述这种情况，但无论如何欢迎所有输入。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T04:31:33.917

在做这样的事情时，我个人总是更喜欢使用与其他实体的一对多关系。我的理由是它是一个更加灵活的设计。很容易看到这样一种情况，您不仅需要知道列名，还需要其他信息。通过使用真实实体而不是字符串，您只需将新属性添加到您的类。如果您只使用一个字符串，那么您将需要进行更广泛的重构。一开始需要更长的时间，但最终几乎总是有回报。

# eclipse - JUnit 插件集成

> ID：11111773
> 
> 赞同：0
> 
> 时间：2012-06-20T01:44:44.257
> 
> 标签：eclipse, junit, rcp

有没有办法将 JUnit Window 集成到 Eclipse RCP 项目中？我正计划创建一个测试脚本运行器，并且我希望 JUnit 窗口出现在我的应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:27:23.083

当然可以，但不是你想象的那样。JUnit 视图由 org.eclipse.jdt.junit 提供（您可以通过在该视图处于活动状态时按 Shift-Alt-F1 来查看）。因此，您需要将其作为依赖项包含在您的插件中（或在您的产品定义中，如果有的话）。

坏消息：我还没有检查该插件的依赖关系，这些依赖关系可能会将大部分 JDT 也带入您的应用程序，这可能是不希望的。

# c# - 使用 MVC3 在视图中设置列表属性

> ID：11111774
> 
> 赞同：0
> 
> 时间：2012-06-20T01:44:57.740
> 
> 标签：c#, asp.net-mvc-3

对 MVC 等来说很新。我有一个看起来像这样的类：

```
public class SomeExampleModel
{
    public int Id { get; private set; }
    public string Name { get; private set;}
    public string Street { get; private set; }
    public IList<Contact> Contacts { get; private set; }
    ...
} 
```

哪里`Contact`看起来像：

```
public class Contact
{
    public int Id { get; private set; }
    public int SomeExampleModelId { get; private set; }
    public ContactType Type { get; private set; }
    public string ContactValue { get; private set; }
...
} 
```

现在的问题是，我有一个 Post`Create`操作和 Create.cshtml 视图来添加新到`SomeExampleModel`我的数据库。它适用于所有基本属性，但没有任何联系人属性（它是数据库中的单独表）。

我如何能够在我的视图中使用表单添加联系人（现在是单一的，将来是复数的）？

**编辑：**如果我不清楚，我很抱歉。问题是没有将数据正确保存在数据库中。我已经对此进行了测试，如果我只是使用 SomeExampleContext 手动将 SomeExampleModel 记录插入到数据库中，它就可以正常工作。*我不知道如何起草我的视图，以便它允许用户将联系人添加到记录中*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:47:49.177

这是使用`EditorTemplate`. 我对您的模型类进行了细微更改（这可行；但是，请注意，这只是为了让您理解这个概念。您可以对此进行扩展）

楷模

```
public class SomeExampleModel
{
    public int Id { get; set; }
    public string Name { get; set;}
    public string Street { get; set; }
    public IList<Contact> Contacts { get; set; }    
}

public class Contact
{
    public int Id { get; set; }
    public int SomeExampleModelId { get; set; }
    public ContactType Type { get; set; }
    public string ContactText { get { return Type.ToString(); } }
    public string ContactValue { get; set; }
}

public enum ContactType
{
    email,
    Phone,
    mobile,
    fax
} 
```

记下我创建了一个`ContactText`返回枚举文本的属性（用于显示目的）

为联系人创建一个编辑器模板（命名为`Contact.cshtml`；模板名称必须与类名匹配）。在屏幕截图下方找到放置编辑器模板的位置。

![在此处输入图像描述](../Images/9aabf5a3a9d98fbd18b1d2b50ae67d16.png)

这是代码`Contact.cshtml`

```
@model Test1.Models.Contact
<table>
@Html.HiddenFor(a=>a.Type)
<tr>
 <td>@Html.Label(Model.ContactText)</td>
 <td>@Html.TextBoxFor(a => a.ContactValue)</td>
</tr>
</table> 
```

这是“创建”视图的代码（`ExampleCreateView.cshtml`在我的例子中）

```
@model Test1.Models.SomeExampleModel

@{
    ViewBag.Title = "ExampleCreateView";
}

<h2>ExampleCreateView</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>SomeExampleModel</legend>
        @Html.HiddenFor(model=>model.Id)
        <table>
            <tr>
                <td>@Html.LabelFor(model=>model.Name)</td>
                <td>@Html.EditorFor(model=>model.Name)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model=>model.Street)</td>
                <td>@Html.EditorFor(model=>model.Street)</td>
            </tr>
            <tr>
                <td>@Html.LabelFor(model=>model.Contacts)</td>
                <td>@Html.EditorFor(model=>model.Contacts)</td>
            </tr>
        </table>
        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

记下我是如何使用`@Html.EditorFor`该`Contacts`物业的。

下面是 Get、Post 操作的样子

```
 public ActionResult ExampleCreateView()
    {
        SomeExampleModel model = new SomeExampleModel();
        Contact contactEmail = new Contact();
        contactEmail.Type = ContactType.email;

        Contact contactFax = new Contact();
        contactFax.Type = ContactType.fax;

        Contact contactPhone = new Contact();
        contactPhone.Type = ContactType.Phone;

        Contact contactMobile = new Contact();
        contactMobile.Type = ContactType.mobile;

        List<Contact> contacts = new List<Contact>();

        contacts.Add(contactEmail);
        contacts.Add(contactFax);
        contacts.Add(contactPhone);
        contacts.Add(contactMobile);

        model.Contacts = contacts;

        return View(model);
    }

    [HttpPost]
    public ActionResult ExampleCreateView(SomeExampleModel model)
    {
        //Your operations
        return View(model);
    } 
```

运行应用程序。这就是视图的样子

![在此处输入图像描述](../Images/ebb829adc09919e7623bd303e08785ae.png)

您将在 POST 操作中获得的内容的屏幕截图

![在此处输入图像描述](../Images/22be24615132e4b0e36d84aec7ed0b76.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:41:41.350

我会这样做的方式是有两个单独的操作 - 一个执行初始创建 的`SomeExampleModel`操作，以及一个用于将 a 添加`Contact`到该模型的单独操作。

这样，您的创建`SomeExampleModel`视图将只有名称和街道，当它保存时，您将显示`SomeExampleModel`. 的只读版本`SomeExampleModel`将在名称和街道下方的表格中列出所有相关联系人，并带有编辑和删除链接，以及表格下方的“添加新”联系人链接

例如

```
<table>
@foreach (var contact in Model.Contacts)
{
    <tr>
        <td>@contact.ContactType</td>
        <td>@contact.ContactValue</td>
        <td>@Html.Action("Edit", "Edit", "Contact",  new { id = contact.Id }</td>
        <td>@Html.Action("Delete", "Delete", "Contact", { id = contact.Id }</td>
    </tr>
}
</table>
@Html.Action("Add new contact", "Add", "Contact" new { id = Model.Id } 
```

最初，不会列出任何联系人，然后您将拥有多个联系人。

# objective-c - ios应用登录会话

> ID：11111776
> 
> 赞同：1
> 
> 时间：2012-06-20T01:45:07.020
> 
> 标签：objective-c, ios, web-services, session

我环顾四周，看到一些方法是在 xcode 上使用 NSUserDefault、钥匙串和单例来为通过应用程序登录的用户创建会话。我也问过我的朋友，发现可以创建一个会话并将其存储在数据库中。

我对编程等还是很陌生，所以请不要被我的愚蠢问题冒犯。我想知道的是，在上面提到的方法中，哪种方法更适合举行会议。会议必须在应用程序中举行吗？是否可以使用 web 服务来创建会话并将其存储在数据库中。还是只能由应用程序创建会话？（对此感到困惑）

我想知道哪个是最实用的，当然，对于初学者来说实施和调整并不难。感谢您的建议。

# python - 如何在 python 中仅使用 web.py 发送邮件？

> ID：11111779
> 
> 赞同：0
> 
> 时间：2012-06-20T01:46:42.710
> 
> 标签：python, html, sendmail, web.py

我有一个带有通知模块的 web.py 项目 - 系统将通过发送 HTML 格式的电子邮件通知用户。

我知道如何在 python 中发送 HTML 格式的电子邮件。（也在这个[带有 HTML 消息的 Q sendmail 中](https://stackoverflow.com/questions/8300860/sendmail-with-html-message)描述），并且还知道 web.py（版本 0.37）中的 sendmail() 函数。

```
import web

web.config.smtp_server = 'smtp.gmail.com' 
web.config.smtp_port = 587                
web.config.smtp_username = 'goooooooooooooogle@gmail.com' 
web.config.smtp_password = '*********'    
web.config.smtp_starttls = True

web.sendmail('goooooooooooooogle@gmail.com',['1361877@gmail.com'],'Hello nodexy','This email is from web.py !') 
```

我预计 ：

```
web.sendmail('goooooooooooooogle@gmail.com',['1361877@gmail.com'],'Hello nodexy', '<html><img src="hello.png"/></html>') 
```

现在如何在 web.py 中解决这个问题？我确定我不能将 HTML 字符串设置为 sendmail() 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T02:31:26.673

发送 html 邮件，在 headers 中添加一个键：

```
web.sendmail(from_address, to_address, subject, msg, headers={'Content-Type':'text/html;charset=utf-8'}) 
```

在 web.py utils.py 中，查看 _EmailMessage 的 prepare_message 方法：

```
def prepare_message(self):
    for k, v in self.headers.iteritems():
        if k.lower() == "content-type":
            self.message.set_type(v)
        else:
            self.message.add_header(k, v)

    self.headers = {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T06:04:23.127

我从 web.py 的 help(web.sendmail) 中得到它！

```
>>> import web
>>> help(web.sendmail) 
```

关于模块 web.utils 中函数 sendmail 的帮助：

```
sendmail(from_address, to_address, subject, message, headers=None, **kw) 
```

使用 from到with`message`的邮件和信封标头发送电子邮件。可以使用字典 `headers.xml 指定其他电子邮件标题。`from_address_``to_address``subject`

可选择将 cc、bcc 和附件指定为关键字参数。附件必须是可迭代的，每个附件可以是文件名或文件对象，也可以是带有文件名、内容和可选的 content_type 键的字典。

作为@number23_cn 的回答，只需将此键 'Content-Type' 添加到 headers 即可。

# google-analytics - 谷歌分析：100% 从着陆页掉线

> ID：11111783
> 
> 赞同：1
> 
> 时间：2012-06-20T01:47:10.080
> 
> 标签：google-analytics

我有一个用 Drupal 7 构建的网站——我们称之为 website.com。在该网站之外，我有一个特定于广告系列的登录页面——我们称之为 website.com/landingpage。在此页面上，有几个按钮返回到主网站 (website.com)。我设置了目标，从该登录页面跟踪用户，回到主站点主页，然后通过其他一些步骤。出于某种原因，即使我知道用户正在点击访问该网站，我还是会从登录页面到主网站的 100% 下降...

...有人对这是为什么有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-01T09:24:17.333

它是一个动态的网络应用程序吗？路由是在客户端而不是在服务器端处理的吗？

如果它是一个动态的 webapp，并且路由是在客户端处理的，那么 GA 不会自动跟踪您的浏览量，您必须手动进行。[https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications](https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications)

如果你使用 angularjs，你可以使用这个很棒的工具： [http ://luisfarzati.github.io/angulartics/](http://luisfarzati.github.io/angulartics/)

# qt4 - QML 是否支持状态继承和覆盖？

> ID：11111785
> 
> 赞同：4
> 
> 时间：2012-06-20T01:47:14.317
> 
> 标签：qt4, qml

我有`CoolButton`一个`pressed`状态：

```
// CoolButton.qml:
BorderImage {
    ...
    states: State {
        name: "pressed"
        when: mouseArea.pressed == true
        PropertyChanges { target: shade; opacity: 0.5 }
    }
} 
```

和`MenuButton`延伸`CoolButton`：

```
// MenuButton.qml:
CoolButton {
    ...
    states: State {
        name: "pressed"
        PropertyChanges { ... }
    }
} 
```

但是，中`pressed`定义的状态`MenuButton`似乎根本不起作用。`pressed`它是否被 中定义的状态隐藏`CoolButton`？我怎样才能覆盖它？

应该是这样的吗？

```
// MenuButton.qml:
CoolButton {
    ...
    states: State {
        name: "pressed"
        extend: "CoolButton.pressed"
        PropertyChanges { ... }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T23:41:16.890

我是 QML 的新手，但据我所知，您无法扩展或覆盖已定义的组件。相反，您可以封装它们，如下所示：

```
// CoolButton.qml:
BorderImage {
    ...
    states: State {
        name: "pressed"
        when: mouseArea.pressed == true
        PropertyChanges { target: shade; opacity: 0.5 }
    }
} 
```

封装看起来像这样：

```
// MenuButton.qml:
CoolButton {
    property alias cb: encapsulatedCB
    CoolButton {id: encapsulatedCB; }
    ...

    states: State {
        name: "pressed"
        PropertyChanges { ... }
    }
} 
```

# php - php时间意外结果

> ID：11111787
> 
> 赞同：0
> 
> 时间：2012-06-20T01:47:59.713
> 
> 标签：php, date, strtotime

我对这些 strtotime 函数的结果有点困惑，我希望它们相同但得到完全不同的结果：

```
echo strtotime(date('Y-m-d h:i:s',time()).' +1 hour')."\n";
echo strtotime('now +1 hour')."\n"; 
```

结果是：

```
date('Y-m-d h:i:s',time(): 1340117163
now +1 hour: 1340160363 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:46:05.767

问题在于传递给 date() 的字符串格式中的“h”；我玩了一堆，发现相差 12 小时，这是一个完美的嫌疑人。

大写 H（明确的小时数），你应该很好。:-)

# struts2 - 在struts2中保留多个选择框值

> ID：11111788
> 
> 赞同：0
> 
> 时间：2012-06-20T01:48:00.293
> 
> 标签：struts2

嗨，我对 struts2 的多选框有疑问。

```
<s:select name="test" id="test" multiple="true" size="2" list="testlist" theme="simple" listKey="testkey" listValue="testvalue" /> 
```

选择框名称“test”是我实体中的字段名称。列表数据正在显示，我可以选择多个项目并将其存储在数据库中。但问题是我在修改时无法保留选定的值。但我有注意到如果我只选择一项，我可以保留价值。知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:29:53.257

您必须定义属性“值”，检查示例：

```
<s:select label="Pets"
       name="petIds"
       list="petDao.pets"
       listKey="id"
       listValue="name"
       multiple="true"
       size="3"
       required="true"
       value="%{petDao.pets.{id}}"
/> 
```

# codeigniter - 更改 CI 中的 URL 结构

> ID：11111789
> 
> 赞同：0
> 
> 时间：2012-06-20T01:48:00.993
> 
> 标签：codeigniter, url

我被要求更改 CI 中的结构，如下所示：

在每个控制器中，每个控制器都有自己的目录，每个目录都有文件控制器。- 正常情况下，每次运行时，我们都会调用包含文件Controller的目录，然后调用Class控制器和Method，... - 现在只调用一个别名，自理解是指向任何目录，任何类。（每个别名都会替换一个目录，一个类）

**例子：**假设有**Listtype文件夹**（Controller目录），*包括文件Category（category.php）。*

=> 以正常方式调用：

> localhost/demo/index.php/listtype/category/method/

只需调用“别名”</p>

> localhost/demo/index.php/alias/method/

其中，“别名”将替换**listtype / category**。我在配置文件（route.php）中使用过但不正确

> $route['alias/(:num)'] = "listtype/category/$1";

但我认为它并不适用于所有情况（好像每个段中有更多变量，...）请帮我解决这个问题，非常感谢

对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T14:32:55.617

我了解您想将方法发送到 codeigniter 路由配置。

```
$route[‘alias/(:any)’] = “listtype/category/$1”; 
```

您可以这样做，但如果您想将此方法与参数一起使用，请查看[Codeigniter 用户指南 - URI 路由](http://codeigniter.com/user_guide/general/routing.html)中的正则表达式主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:38:49.373

你想在类别控制器中调用什么函数？

文件夹路径：controllers/listtype/category.php 然后在 category.php 里面你会有一个函数（例如视图）

```
$route[‘alias/(:num)’] = “listtype/category/view/$1”; 
```

然后，您可以访问控制器调用类别中称为视图的函数中别名后输入的 (:num)。

# perl - 在不同的文本文件中查找常见条目

> ID：11111791
> 
> 赞同：3
> 
> 时间：2012-06-20T01:48:19.377
> 
> 标签：perl

我是 Perl 的新手。我有八个文本文件，每个文件超过五千行。我想编写一个 perl 脚本来查找在前五个文件中找到但没有找到最后三个文件的条目（记录）。假设文件是​​ (A, B, C, D, E, F, G, H) 所以我想获取在`A`to`E`但不是`F`to中找到的条目`H`。

有人可以就如何为这份工作编写代码提供建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T05:32:27.643

如果我理解正确，您需要：

1.  列出 AE 中的所有项目（称为列表 1）
2.  在 FH 中制作另一个项目列表（列表 2）
3.  找出 1 中所有不在 2 中的项目。

您将使用两个散列，而不是使用两个列表。

```
# Two sets of files to be compared.
my @Set1 = qw(A B C D E);
my @Set2 = qw(F G H);

# Get all the items out of each set into hash references
my $items_in_set1 = get_items(@Set1);
my $items_in_set2 = get_items(@Set2);

my %unique_to_set1;
for my $item (keys %$items_in_set1) {
    # If an item in set 1 isn't in set 2, remember it.
    $unique_to_set1{$item}++ if !$items_in_set2->{$item};
}

# Print them out
print join "\n", keys %unique_to_set1;

sub get_items {
    my @files = @_;

    my %items;
    for my $file (@files) {
        open my $fh, "<", $file or die "Can't open $file: $!";
        while( my $item = <$fh>) {
            chomp $item;
            $items{$item}++;
        }
    }

    return \%items;
} 
```

如果它是一次性的，你可以在 shell 中完成它。

```
cat A B C D E | sort | uniq > set1
cat F G H | sort | uniq > set2
comm -23 set1 set2 
```

`cat A B C D E`将文件一起涂抹成一个流。将其交给`sort`，然后`uniq`删除重复项（`uniq`除非对行进行排序，否则效果不佳）。结果被放入文件`set1`中。这对第二组再次进行。 `comm`然后在两个集合文件上使用以比较它们，仅显示`set1`.

# c++ - 结构内的结构数组，C++ 代码

> ID：11111792
> 
> 赞同：0
> 
> 时间：2012-06-20T01:48:37.567
> 
> 标签：c++, structure

我正在为最终成为 MUD 的东西准备一些代码；这是我的第一个“大”项目，我正在逐渐消除错误；然而，一些问题现在阻碍了我的项目，我似乎无法打破它们。这是我的代码：

```
#include <iostream>
using namespace std;

int test_var;
#define K    125
#define TEST 50

struct item {
int quantity;
//Some More Stuff Will Be Inside Later//
};

struct inventory {
  struct item[K];  //Error 1 - "expected unqualified-id before '[' token"
} test;

int main()
{
cout << "Number?" << endl;
cin >> test_var;
test.item[TEST].quantity = test_var;  //Error 2 - "'struct inventory' has no member named 'item'"
cout << test.item[TEST].quantity << endl;  //Error 3 - "'struct inventory' has no member named 'item'"
cout << test.item[TEST].quantity;  //Error 4 - "'struct inventory' has no member named 'item'"
return 0;
} 
```

我不得不道歉，因为这段代码有点草率，但这代表了我想要完成的两件事。第 1 点，我需要某种方式在结构“库存”中包含一组结构“项目”。第二，我需要确保我可以访问结构内的各个元素；实际代码在结构中涉及更多结构，我可以访问单个非结构元素（整数、布尔值、双精度数、字符串）至关重要。如果有人可以就这些问题提供许多建议，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:50:33.663

```
struct item[K]; 
```

您缺少结构对象的标识符/名称。请注意，`item`它本身是一个结构。所以，试试

```
struct item obj[K];  // struct key word is unnecessary 
```

# java - Android-显示自定义对话框

> ID：11111796
> 
> 赞同：1
> 
> 时间：2012-06-20T01:48:55.693
> 
> 标签：java, android, eclipse, dialog

在我的 android 应用程序中，我使用的是自定义对话框。当我尝试显示对话框时，会导致错误。我不知道我做错了什么，我真的很困惑。

这是我的代码：

```
protected Dialog onCreateDialog(int id) {
    Dialog dialog;
    switch(id) {
    case 0:
        dialog = new Dialog(getApplicationContext());

        dialog.setContentView(R.layout.paused);
        dialog.setTitle("Game Paused");
        dialog.show();
        break;
    default:
        dialog = null;
    }
    return null;
} 
```

这是我显示对话框的方式

```
showDialog(0); 
```

顺便说一句，它说 showDialog(int) 已被弃用。

安卓日志猫：

```
> 06-19 18:44:22.399: W/dalvikvm(467): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-19 18:44:22.419: E/AndroidRuntime(467): FATAL EXCEPTION: main
06-19 18:44:22.419: E/AndroidRuntime(467): java.lang.IllegalStateException: Could not execute method of the activity
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.View$1.onClick(View.java:2072)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.View.performClick(View.java:2408)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.View$PerformClick.run(View.java:8816)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.os.Handler.handleCallback(Handler.java:587)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.os.Looper.loop(Looper.java:123)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-19 18:44:22.419: E/AndroidRuntime(467):  at java.lang.reflect.Method.invokeNative(Native Method)
06-19 18:44:22.419: E/AndroidRuntime(467):  at java.lang.reflect.Method.invoke(Method.java:521)
06-19 18:44:22.419: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-19 18:44:22.419: E/AndroidRuntime(467):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-19 18:44:22.419: E/AndroidRuntime(467):  at dalvik.system.NativeStart.main(Native Method)
06-19 18:44:22.419: E/AndroidRuntime(467): Caused by: java.lang.reflect.InvocationTargetException
06-19 18:44:22.419: E/AndroidRuntime(467):  at com.jlennon.gametest.PlayGameActivity.pause(PlayGameActivity.java:105)
06-19 18:44:22.419: E/AndroidRuntime(467):  at java.lang.reflect.Method.invokeNative(Native Method)
06-19 18:44:22.419: E/AndroidRuntime(467):  at java.lang.reflect.Method.invoke(Method.java:521)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.View$1.onClick(View.java:2067)
06-19 18:44:22.419: E/AndroidRuntime(467):  ... 11 more
06-19 18:44:22.419: E/AndroidRuntime(467): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.ViewRoot.setView(ViewRoot.java:509)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.Dialog.show(Dialog.java:241)
06-19 18:44:22.419: E/AndroidRuntime(467):  at com.jlennon.gametest.PlayGameActivity.onCreateDialog(PlayGameActivity.java:131)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.Activity.onCreateDialog(Activity.java:2472)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.Activity.createDialog(Activity.java:881)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.Activity.showDialog(Activity.java:2547)
06-19 18:44:22.419: E/AndroidRuntime(467):  at android.app.Activity.showDialog(Activity.java:2514)
06-19 18:44:22.419: E/AndroidRuntime(467):  ... 15 more 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:17:42.890

试试这个代码

```
 protected Dialog onCreateDialog(int id) {
  Dialog dialog;
  switch(id) {
   case 0:
    dialog = new Dialog(this);

    dialog.setContentView(R.layout.paused);
    dialog.setTitle("Game Paused");
    dialog.show();
    break;
default:
    dialog = null;
}
return null; 
```

}

我刚刚将 dialog = new Dialog(getApplicationContext()) 替换为 dialog = new Dialog(this);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:20:52.803

```
Dialog dialog = new Dialog(YourActivity.this);
dialog.show(); 
```

而不是上面的代码。

我会用这个。

```
AlertDialog.Builder dialog = AlertDialog.Builder(this);

LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View v = inflater.inflate(R.layout.yourlayout,null,false);

dialog.setView(v);

dialog.show(); 
```

顺便说一句，`onCreateDialog(int)`已弃用；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-04T11:51:43.773

我创建了一个自定义对话框。像这样..

![在此处输入图像描述](../Images/86c185434d16f2ae45ac236a09680a68.png)

xml是..

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/createpost_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/cre"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:gravity="center_horizontal"
            android:text="CREATE POST"
            android:textColor="@color/mytextcolor"
            android:textSize="20sp" />

        <EditText
            android:id="@+id/topic_ev"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:background="@drawable/txt_field"
            android:hint="topic" />

        <EditText
            android:id="@+id/description_ev"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:background="@drawable/destxt_field"
            android:hint="description"
            android:inputType="textMultiLine" />

        <Button
            android:id="@+id/upload_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:layout_margin="10dp"
            android:background="@drawable/upload_btn" />

        <TextView
            android:id="@+id/textu"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:text="UPLOAD A FILE JPEG,GIF OR PNG 3MB Max"
            android:textSize="10sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/layout_forbuttons"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/createpost_layout"
        android:layout_margin="10dp"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/post_btn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:layout_weight="1"
            android:background="@drawable/post_btn" />

        <Button
            android:id="@+id/cancel_btn"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_margin="10dp"
            android:layout_weight="1"
            android:background="@drawable/cancel_btn" />
    </LinearLayout>

</RelativeLayout> 
```

和 CustomDialogClass 是

```
 import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.Toast;

import com.example.fragmentaltdd.R;

public class CustomDialogClass extends Dialog implements
android.view.View.OnClickListener {

    public Activity c;
    public Dialog d;
    public Button Post, Cancel,Upload;

    public CustomDialogClass(Activity a)
    {
        super(a);

        this.c = a;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.createpost);

        Post = (Button) findViewById(R.id.post_btn);

        Cancel = (Button) findViewById(R.id.cancel_btn);

        Upload = (Button)findViewById(R.id.upload_btn);

        Post.setOnClickListener(this);

        Cancel.setOnClickListener(this);

        Upload.setOnClickListener(this);

    }

    @Override
    public void onClick(View v)
    {
        switch (v.getId())
        {
            case R.id.post_btn:
              //c.finish();
                Toast.makeText(c, "Post button clikced", Toast.LENGTH_LONG).show();
              break;

            case R.id.upload_btn:
                 // c.finish();
                Toast.makeText(c, "Upload button clikced", Toast.LENGTH_LONG).show();
                  break;

            case R.id.cancel_btn:
              dismiss();
              break;

            default:
              break;
        }
        dismiss();
    }
} 
```

像这样称呼它

```
 CustomDialogClass cdd = new CustomDialogClass(getActivity());//while calling from fragment

CustomDialogClass cdd = new CustomDialogClass(YourActivity.this);//while calling from Activity

            cdd.show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T02:15:03.857

首先，您使用的方法是错误的。该`createDialog`方法的重点是创建对话框然后返回它。您在方法中显示对话框，然后根本不返回它，这完全违背了覆盖该方法的目的。你真的应该有你自己的方法来创建和显示你的对话框。

其次，正如 AVD 在对您的问题的评论中发布的那样，对于针对 Honeycomb (11) 或更高版本的 API 的应用程序，不推荐使用这种显示对话框的方法。

但是，您的问题是您正在使用 Application `Context`( `getApplicationContext()`) 对象来显示一个应该属于您的`Activity`. 您应该传入`this`以使用`Activity`上下文，这将修复您的错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-20T01:56:49.483

试试这样：

```
import android.app.AlertDialog;

new AlertDialog.Builder(YourActivityName.this)
    .setTitle("Game Paused")
    .setPositiveButton("OK", null)
    .show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-20T02:13:09.787

文档说：

> Dialog 类是创建对话框的基类。但是，您通常不应该直接实例化 Dialog。相反，您应该使用以下子类之一：
> 
> 警报对话框
> 
> 进度对话框
> 
> 日期选择器对话框
> 
> 时间选择器对话框

来源：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

Google 似乎没有在本文档或 Dialog 类的实际 API 参考中给出原因。正如您已经知道的那样，错误消息也没有。所以我不确定为什么这个类没有“受保护”。

无论如何，使用上述类之一应该可以解决您的问题。

如果有人知道为什么我们不能直接使用 Dialog 类，请发表评论。

# javascript - 将 textarea 句子拆分为数组并找出在 keyup() 上更改的句子

> ID：11111801
> 
> 赞同：1
> 
> 时间：2012-06-20T01:49:03.400
> 
> 标签：javascript, jquery, split

我有一个包含以下内容的文本区域：

```
<textarea id="text">
Hello! Who am I? This is the third sentence. This, is another sentence.
</textarea> 
```

因为它是一个文本区域，所以它可以被聚焦。我试图找到一种方法：

1.  将 textarea 中的所有句子分隔成一个 javascript 数组。我尝试了一种**$('#text').val().split()**方法，但在我的示例中不止一个句子分隔符。

2.  我还需要知道光标当前位于哪个句子中。

为什么，你可能会问？当用户更改其内容时，我需要处理（使用按字符收费的付费 API）句子。如果我只对第 2 句做一点改动，为什么要提交第 1、3、4 句？只提交第二个当然要便宜得多。

正如我之前所说，如果人们只使用点来分隔句子，.split() 方法将是完美的，但还有其他字符也应该考虑（**！？。**）——关于第二点，我找到了一个函数查找脱字符位置：

```
function doGetCaretPosition (ctrl) {
    var CaretPos = 0;
    if (document.selection) {
        ctrl.focus ();
        var Sel = document.selection.createRange ();
        Sel.moveStart ('character', -ctrl.value.length);
        CaretPos = Sel.text.length;
    } else if (ctrl.selectionStart || ctrl.selectionStart == '0') {
        CaretPos = ctrl.selectionStart;
    }
    return (CaretPos);
} 
```

问题是，这个位置如何帮助我找到句号？欢迎所有想法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T03:50:10.303

我能看到的最简单的方法是像你提到的那样 split() str 。根据我的理解（并且没有找到对此的任何引用），jQuery 实际上并没有 split() 函数，但是：

```
var str = $('#text').val();
var sentences = str.split(/[.|!|?]\s/gi); 
```

如您所见，javascript 的 split 函数允许使用正则表达式。然而，正则表达式并不完美（现在已经很晚了，我明天会考虑得到一个更好的）。

一旦你有了句子，只需计算每个字符串的长度，直到你得到插入符号的位置。所以得到第一个句子的长度，是否比插入符号的位置更大，如果不是，得到第二个字符串的长度+第一个字符串，那个=或更大。如果它相等或更大，那么这就是您所在的句子，您使用的索引是句子编号。

# javascript - 在html代码中插入变量

> ID：11111803
> 
> 赞同：3
> 
> 时间：2012-06-20T01:49:43.637
> 
> 标签：javascript, dom

我是 Javascript 的新手，我已经做了很多搜索，但我发现似乎没有任何东西可以回答我的具体问题。我试图弄清楚如何在 html 中实现一个变量......它可能会更好地提供示例：

Javascript

```
var key = 1;

function nextImage()
{
    if(key == 52)
    {
        key = 0;
    }else{
        key++;
    }
    var image = "images/52/week_" + key + ".jpg";
    document.getElementById("mainImage").src= image;
} 
```

HTML

```
<button type="button" onclick="nextImage()">Next</button>
<img id="mainImage" src="images/52/week_0.jpg" /> 
```

我想要做的是将“images/52/week_”从 javascript 中移到 html 中，这样我就可以将该函数重用于其他图像集。基本上我想让脚本遍历数字，然后将这些数字发送到 HTML`<img src="images/52/week_" + image + ".jpg">`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:59:37.763

HTML 没有变量的概念。您需要在 javascript 中存储/操作变量。这并不是说您不能重构要在更一般意义上使用的函数。考虑以下：

**JS**

```
var key = 1;

function nextImage(id) {
    if(key == 52)
    {
        key = 0;
    }else{
        key++;
    }

    var image = document.getElementById(id);
    var src = image.getAttribute('data-src').replace('{0}', key);
    image.src = src;
}; 
```

**HTML**

```
<button type="button" onclick="nextImage('mainImage')">Next</button>
<img id="mainImage" data-src="images/52/week_{0}.jpg" src="images/52/week_0.jpg" />
<button type="button" onclick="nextImage('otherImage')">Next</button>
<img id="otherImage" data-src="images/356/week_{0}.jpg" src="images/356/week_0.jpg" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:03:15.103

向函数添加参数会不会更容易？

```
 var key = 1;

 function nextImage(string,id)
 {
     if(key == 52)
     {
        key = 0;
     }else{
        key++;
     }
     var image = string + key + ".jpg";
     document.getElementById(id).src= image;
 } 
```

**更新** 该问题由您自己回答！使用上面给出的代码，您只需将两个参数添加到您的 javascript 调用中，例如：

```
 <button type="button" onclick="nextImage('string','mainImage')">Next</button>
 <img id="mainImage" src="images/52/week_0.jpg" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:07:32.733

正如 EH_warch 所说，您可以将路径作为参数传递，也可以`<img>`像这样从自身获取它：

```
var key = 1;
function nextImage()
{
    if(key == 52)
    {
        key = 0;
    } else {
        key++;
    }
    var imageElement = document.getElementById("mainImage");
    var path = imageElement.getAttribute('src').split('/');
    path.pop();
    path = path.join('/');
    var image = path + '/' + key + ".jpg";
    imageElement.src= image;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T02:11:21.403

您可以使用正则表达式来修改`src`属性。

```
function nextImage() {
    var img = document.getElementById("mainImage");
    var s = img.src.match(/^(.+_)(\d+)(\.jpg)$/);
    var key = s[2];

    if (key == 52) {
      key = 0;
    } else {
      key++;
    }

    img.src = s[1] + key + s[3];
} 
```

**注意：**正如 FelixKling 在评论中所说，正则表达式模式必须与图像文件名匹配。

# google-visualization - 谷歌图表（饼图）错误？

> ID：11111805
> 
> 赞同：1
> 
> 时间：2012-06-20T01:49:46.150
> 
> 标签：google-visualization

请查看下面的图表，为什么 10.52% 和 2.72 的大小相同？

[https://chart.googleapis.com/chart?cht=pc&chxs=0,000000,9&chxt=x&chs=490x200&chp=4.7&chd=t:720,207,322,108,69,283,519,246,138,158,89,344&chl=%2822.03%25%5%29.2%3% 29|%289.85%25%29|%283.30%25%29|%282.11%25%29|%288.65%25%29|%2815.88%25%29|%287.52%25%29|%284.22%25%29 |%284.83%25%29|%282.72%25%29|%2810.52%25%29&chco=FF00FF|336699|800000|FF00FF|ff6600|808000|0099cc|3366ff|000000|3399ff|C0C0C0|800080|00FF0](https://chart.googleapis.com/chart?cht=pc&chxs=0,000000,9&chxt=x&chs=490x200&chp=4.7&chd=t:720,207,322,108,69,283,519,246,138,158,89,344&chl=%2822.03%25%29|%286.33%25%29|%289.85%25%29|%283.30%25%29|%282.11%25%29|%288.65%25%29|%2815.88%25%29|%287.52%25%29|%284.22%25%29|%284.83%25%29|%282.72%25%29|%2810.52%25%29&chco=FF00FF|336699|800000|FF00FF|ff6600|808000|0099cc|3366ff|000000|3399ff|C0C0C0|800080|00FF00)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:00:09.463

您只是缺少`chds=a`指定值的“自动缩放”的参数。添加它，当数据不是百分比时，图表将是正确的。

请参阅：[https ://developers.google.com/chart/image/docs/data_formats#textformatautoscaling](https://developers.google.com/chart/image/docs/data_formats#textformatautoscaling)

这是[添加了参数的示例图表](https://chart.googleapis.com/chart?cht=pc&chxs=0,000000,9&chxt=x&chs=490x200&chp=4.7&chd=t:720,207,322,108,69,283,519,246,138,158,89,344&chl=%2822.03%25%29|%286.33%25%29|%289.85%25%29|%283.30%25%29|%282.11%25%29|%288.65%25%29|%2815.88%25%29|%287.52%25%29|%284.22%25%29|%284.83%25%29|%282.72%25%29|%2810.52%25%29&chco=FF00FF|336699|800000|FF00FF|ff6600|808000|0099cc|3366ff|000000|3399ff|C0C0C0|800080|00FF00&chds=a)。

不幸的是，很多时候没有这个参数你会得到看似准确的结果，所以很容易错过它。不过，在我看来，这基本上是饼图的要求，所以我无法想象为什么它不是默认行为。

提供准确的百分比值也可能在所有情况下都能正常工作。我实际上并不知道问题的细节，只有当它发生时自动缩放会解决它，所以我倾向于建议使用它以防万一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:03:58.160

chd=t：值是百分比。我认为它们是价值，谷歌图表会为它们计算出百分比。

一旦我用百分比值替换实际值，它就已修复。图表是固定的。

# grep - 使用 Xargs 从控制台读取输入

> ID：11111806
> 
> 赞同：0
> 
> 时间：2012-06-20T01:49:48.380
> 
> 标签：grep, xargs

这是我写的脚本

```
zgrep -i xxxx FileA | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2 | xargs 
```

在`xargs`使用之前，我的 o/p 是

```
01982893213982312 - RID 1
32103213213213213 - RID 2
32103213213213343 - RID 3
32103213213251261 - RID 4 
```

对于此处存在的每个 RID，文件 B 中都有相应的行。我计划在以下内容之后执行以下操作：

```
zgrep -i xxxx FileA | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2 | xargs|
{grep RID1 in file B, grep RID2 in file B,grep RID3 in file B, grep RID4 in file B} 
```

现在我唯一的问题是我将如何使用 xargs 引用 RID1,2,3,4....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:13:11.717

如果 FileA 中的数据是每行一个 RID，那么显而易见的选择是（经典）[`fgrep`](http://pubs.opengroup.org/onlinepubs/7990989775/xcu/fgrep.html)或（使用更现代的表示法）[`grep -F`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html)。2004 版本中的POSIX 未标准化`fgrep`（将其替换为`grep -F`）。然而，`fgrep`有着很长的血统；例如，它是 1978 年左右的第 7 版 UNIX™ 的一部分。

```
fgrep -f FileA FileB
grep -F -f FileA FileB 
```

如果 FileA 中的数据不是“每行一个 RID”格式，那就这样吧！

* * *

> 但是 fgrep 是否从控制台读取 i/p

如果您告诉它，它会这样做，但您不希望它从控制台读取；您希望它从标准输入中读取。“控制台输入”大致意思是“你在打字”。（也就是说，我`grep -F`通过使用`grep -F -f - /etc/passwd`然后`/bin/`在“控制台”（终端）上键入来检查行为，然后指示 EOF。它工作正常。）

如果您正在使用`bash`，您可以使用“进程替换”来获得您想要的结果：

```
grep -F -f <(zgrep -i xxxx FileA | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2) FileB 
```

进程替换在内部运行命令，`<( ... )`以便其输出到“文件”（实际上，通常是 中的文件描述符），并将名称作为常规文件名参数`/dev/fd`提供给命令 ( )。`grep`

如果您不使用`bash`，则可以改用它（这也可以正常工作`bash`，甚至可能更可取）：

```
zgrep -i xxxx FileA | grep -o "RID=[0-9|A-Z]*" | uniq | cut -d "=" -f2 |
grep -F -f - FileB 
```

在这种情况下，单独的破折号表示“从标准输入读取”；这是命令的通用约定。它在 Mac OS X 10.7.4 上运行良好；它很有可能在其他地方也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:05:12.913

另一种方法是管道数据，例如：

```
script1 fileA | script2 fileB 
```

这种方法允许您传递更多参数，并通过 fileB..

# excel - 导出到excel时如何取消合并ssrs中的单元格以尝试排序

> ID：11111808
> 
> 赞同：7
> 
> 时间：2012-06-20T01:50:24.863
> 
> 标签：excel, reporting-services, ssrs-2008, ssrs-tablix

我正在将 SSRS 报告导出到 Excel，并且当用户尝试对某些列进行排序时。他们收到消息“此操作要求合并的单元格大小相同。

如何使用未合并的单元格在 SSRS 中生成报告？我试图在 tablix 中获取一些属性，但我找不到

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T02:58:58.143

这通常是由于标题的列宽与数据区域不同 - 渲染器将合并的单元格放入表格中以使标题文本 Excel 列与表格单元格的 Excel 列对齐。您可以尝试通过确保标题项与表格单元格完全对齐来解决此问题。

但是，解决这个问题的最佳方法是在导出到 Excel 时消除标题，这样您就可以获得表格单元格。没有标题，就没有对齐问题。

这里有几个选项。对于永久导出选项，您可以查看我之前关于[添加新 Excel 报告呈现选项的](https://stackoverflow.com/questions/3048363/ssrs-2005-set-simplepageheaders-on-the-report-instead-of-the-server/3058576#3058576)答案，或者以更手动的方式执行此操作的几种方法，您可以[使用 Simple Page Headers 输出到 Excel](https://stackoverflow.com/questions/521719/exporting-from-ssrs-to-excel-with-no-headers/540759#540759)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-26T01:44:29.357

*   一种方法是不输出报告的麻烦部分。您可以转到元素的属性页 -> Visibility -> Show/Hide based on expression，然后使用此表达式：

`=(Globals!RenderFormat.Name = "EXCEL")` 它不会在 excel 导出中显示该部分。

*   另一个技巧是确保一切都完美排列，并使用点测量而不是厘米来测量尺寸。

**参考：**

*   [http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx](http://blogs.msdn.com/b/robertbruckner/archive/2010/05/16/report-design-naming-excel-worksheets.aspx)
*   [http://edspencer.me.uk/2010/10/23/how-to-avoid-cell-merging-when-exporting-to-excel-in-ssrs-2008/](http://edspencer.me.uk/2010/10/23/how-to-avoid-cell-merging-when-exporting-to-excel-in-ssrs-2008/)
*   [从 SSRS 导出时如何获取命名的 Excel 工作表](https://stackoverflow.com/questions/736918/how-to-get-named-excel-sheets-while-exporting-from-ssrs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-25T07:53:23.640

这通常是由未对齐对齐的页眉/列/文本框/页脚引起的。在导出到 Excel 时，即使偏离 1 点或 0.5 英寸也会导致合并单元格。确保一切都正确对齐。在多个项目中多次遇到此问题，并且始终是相同的根本原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-17T15:13:21.773

请确保您的标题文本框和 tablix 具有相同的宽度。这将消除合并单元格的机会。如果两者的宽度不同，那么它将合并您的标题边缘所在的 excel 单元格。

1.  确保所有未绑定的文本框的大小都与您的 tablix 宽度相匹配。
2.  确保所有未绑定的文本框都适合 tablix 列。

[参考 - 如何在导出的 SSRS 报告中消除 Excel 列合并](https://www.ptr.co.uk/blog/how-eliminate-excel-column-merging-exported-ssrs-reports)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-21T21:38:38.017

您还可以修改 C:\Program Files\Microsoft SQL Server(SSRS Installation Folder)\Reporting Services\ReportServer 找到的 rsreportserver.config 并替换：

```
 <Extension Name="EXCELOPENXML" Type="Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.ExcelOpenXmlRenderer,Microsoft.ReportingServices.ExcelRendering"> <Extension Name="EXCELOPENXML_NoHeader" Type="Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.ExcelOpenXmlRenderer,Microsoft.ReportingServices.ExcelRendering"/> 
```

和

```
 <Extension Name="EXCELOPENXML_NoHeader" Type="Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.ExcelOpenXmlRenderer,Microsoft.ReportingServices.ExcelRendering"> <Extension Name="EXCELOPENXML_NoHeader" Type="Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.ExcelOpenXmlRenderer,Microsoft.ReportingServices.ExcelRendering">                <OverrideNames>                        <Name Language="en-US">Excel With No Header                        </Name>                </OverrideNames>                <Configuration>                    <DeviceInfo>                        <SimplePageHeaders>True</SimplePageHeaders>                    </DeviceInfo>                </Configuration>            </Extension>            <Extension Name="EXCELOPENXML" Type="Microsoft.ReportingServices.Rendering.ExcelOpenXmlRenderer.ExcelOpenXmlRenderer,Microsoft.ReportingServices.ExcelRendering">                <OverrideNames>                    <Name Language="en-US">Excel With Header                    </Name>                </OverrideNames>            </Extension> 
```

它将为您提供将报告导出到带有或不带有标题的 Excel 的选项。这是一次性更改，无需修改所有报告。无需重启 SSRS 服务。通过 SSRS 2014、2016、2017 测试

# php - 使用 PHP 获得下一个增量

> ID：11111809
> 
> 赞同：3
> 
> 时间：2012-06-20T01:50:32.167
> 
> 标签：php, increment

我的值每 5 个视图增加 1。MySQL 表如下所示：

```
myvalue views increment
10      12    5 
```

例如，一旦浏览量达到 15，`myvalue`将变为 11。

我通过这样做来完成这个：

```
$div = $myvalue / $increment;
if (ceil($div) == $div) {
    $myvalue = $myvalue + $increment;
} 
```

我想做的是做一个快速计算，告诉我在下一次增量之前还有多少视图。在此示例中，我想返回数字 3，因为在下一次`myvalue`达到 5 的增量（即 15）之前还有 3 个视图。

如果`myvalue`是`views`10、26 和`increment`25，我需要得到数字 24，因为在我们达到 25 的下一个增量（即 50）之前还需要 24 个视图。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:00:15.647

我认为你可以使用这个公式

```
$diff = $increment - ($views % $increment); 
```

而且你的原始代码也可以写成

```
if(($views % $increment) === 0)
{
  $myvalue += 1; // you said myvalue will increase by one
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:56:02.253

```
$ret = ceil($views / $increment) * $increment - $views; 
```

或者

```
$ret = $increment - $views % $increment; 
```

# javascript - 在嵌套函数中使用 var 关键字

> ID：11111811
> 
> 赞同：3
> 
> 时间：2012-06-20T01:50:43.947
> 
> 标签：javascript, syntax

我发现自己编写了很多由嵌套函数组成的函数。

这样做时我喜欢使用这种模式，因为我发现使用 eclipse 大纲视图再次很容易找到它们

```
var outer_func = function(){

  var inner_func1 = function(){
  //code
  }
  var inner_func2 = function(){
  //code
  }

} 
```

我的问题：如果我从嵌套/内部函数中删除 var 关键字，是否有任何作用域差异？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:53:18.733

如果您不使用 inner`var`关键字，那么您将创建名为`inner_func1`and的全局函数`inner_func2`。保持`var`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T01:54:48.500

是的，执行外部函数时，“内部”函数将变为全局函数。一般来说，最好使用函数声明，因为它们首先被处理。

```
function outer() {
  function inner() {
  }
  ...
} 
```

仅在稍后需要定义函数的情况下使用表达式，例如基于某些直到稍后才知道的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T02:01:02.387

函数是它们自己的域，局部变量只暴露**在**执行**堆栈中。（或大多数人所说的“范围”）**如果一个变量被声明为没有局部性**（是局部的。）**，它会直接进入窗口（全局）对象，并且在函数完成时不会被垃圾收集。例如：

```
function somefunc(){
   var a;
   function nested(){
      a=2;//this will edit parent function's variable a
   }
   function anothernested(){
      var b=5;//this will create local variable in nested function
      c=3;//this will create global variable
   }
   nested();
   console.log(a);
} 
```

# iphone - 在块内发布委托不起作用（ASIHTTPRequest）

> ID：11111812
> 
> 赞同：1
> 
> 时间：2012-06-20T01:50:48.157
> 
> 标签：iphone, objective-c, delegates, asihttprequest, block

我在 Blocks 中使用委托时遇到问题。

在 ARC 开启的情况下，这是显示问题的示例。

```
- (void)whatsGoingOn {

    NSString *address = @"someAddress";    

    //setting for request
    NSURL *requestURL               = [NSURL URLWithString:address];    
    __weak ASIHTTPRequest *request  = [ASIHTTPRequest requestWithURL:requestURL];    

    [delegate_ postDelegateMethod]; //This delegation works fine       

    [request setCompletionBlock:^{     
        [delegate_ postDelegateMethod]; //This delegation doesn't work        
    }];

    [request startAsynchronous];
} 
```

看来我不能在 Blocks 中发布委托。在这种情况下我该怎么办？

我可以改用通知，但我觉得这不是一个好方法。

这是班级的主要部分。如果我不使用weak，请求部分会产生一个retain循环，所以还不知道该怎么做。

```
@interface URLFilter : NSObject {
      id __weak                   delegate_;
}
@property (nonatomic, weak) id                              delegate;

@implementation URLFilter
@synthesize delegate    = delegate_; 
```

***已解决！！！**

它通过制作另一个 __block id blockDelegate 来工作。而且，也没有内存泄漏。

```
- (void)whatsGoingOn {

    NSString *address = @"someAddress";    

    //setting for request
    NSURL *requestURL               = [NSURL URLWithString:bitlyAPIAddress];    
    __weak ASIHTTPRequest *request  = [ASIHTTPRequest requestWithURL:requestURL];    

    //set blockDelegate since delegate_ will be gone inside blocks
    __block id blockDelegate        = delegate_;

    [request setCompletionBlock:^{        

        //it works
        [blockDelegate postDelegateMethod];
    }];

    [request startAsynchronous];
} 
```

**更新**

我再次查看代码，问题可能是由 whatsGoingOn 方法之外的这个块方法引起的。

在这个 twitter api 块方法内部，我称之为 whatsGoingOn 方法，在 whatsGoingOn 方法内部，我放置了 asihttprequest 块方法。

奇怪的是，如果我在块的一侧使用通常的 asihtttprequest 委托方法，它就会崩溃，这就是我选择 asihttprequest 的块方法的原因。

```
//request tweet data
[twRequest performRequestWithHandler:^(NSData *responseData,
                                         NSHTTPURLResponse *urlResponse,
                                         NSError *error) {
    [self whatsGoingOn];                            
}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T02:02:34.100

很确定问题是请求上的 __weak 限定符。如果我是对的，您将不会在块中获得委托调用，并且您不会得到任何其他东西 - 请求的块副本在它有机会运行之前被清理。

```
- (void)whatsGoingOn {

    NSString *address = @"someAddress";    

    //setting for request
    NSURL *requestURL        = [NSURL URLWithString:address];    
    ASIHTTPRequest *request  = [ASIHTTPRequest requestWithURL:requestURL];    

    [request setCompletionBlock:^{
        NSLog(@"proof we got here.  delegate = %@", self.delegate);   
        [self.delegate postDelegateMethod]; // This delegation _should_ work        
    }];

    [request startAsynchronous];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:05:55.550

*永远不要*指望弱引用仍然存在。假设请求是在代码中的方法内部创建的，它将在下一行运行之前立即被释放。

随着更新，我看到了参考周期。你应该做的是制作`request`一个 iVar。然后在块之前这样做：

```
ASIHTTPRequest __weak *weakRequest = mRequest; 
```

然后参考弱请求而不是强请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T00:02:46.053

它通过制作另一个 __block id blockDelegate 来工作。而且，也没有内存泄漏。:)

```
//setting for request
NSURL *requestURL               = [NSURL URLWithString:bitlyAPIAddress];    
__weak ASIHTTPRequest *request  = [ASIHTTPRequest requestWithURL:requestURL];    

//set blockDelegate since delegate_ will be gone inside blocks
__block id blockDelegate        = delegate_;

[request setCompletionBlock:^{        

    //it works
    [blockDelegate postDelegateMethod];
}];

[request startAsynchronous]; 
```

# ios - 取消 NSURLConnection 并停止下载数据

> ID：11111813
> 
> 赞同：0
> 
> 时间：2012-06-20T01:50:59.807
> 
> 标签：ios, nsurlconnection

`NSURLConnection`有一个`-cancel`方法导致进一步的委托消息不被发送。但是，这是否也会使端点停止向客户端发送数据？我有一个界面，用户可以开始下载一个巨大的图像，但也可以随时“取消”。我不希望设备继续接收不需要的数据，因为这会浪费带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:10:38.773

是`-cancel`的，关闭 TCP 连接，因此服务器将不再发送数据。

# php - ucfirst 在命令行运行时将第二个字母大写

> ID：11111816
> 
> 赞同：2
> 
> 时间：2012-06-20T01:51:15.097
> 
> 标签：php, ucfirst

我有一个日志方法，它保存到一个与调用它的脚本同名的文件中，只有第一个字母大写，有时有效，但其他时候第二个字母大写（我看不到任何关于何时它做了什么，但它始终是一致的，这意味着文件 A 将始终是初始封顶或第二个字母封顶，这不是任意的）。

这是我的代码...

```
function logData($str){
    $filePath = $_SERVER["SCRIPT_FILENAME"]; 

    $dir = substr($filePath, 0, strrpos($filePath, "/") + 1);   
    $fileName = substr($filePath,strrpos($filePath, "/")+1);
    $fileName = preg_replace('/\w+$/','log',$fileName);
    $fileName = ucfirst($fileName);  
    $fHandle = fopen( $dir.$fileName , "a");
    $contents = fwrite($fHandle, $str ."\n");
    fclose($fHandle);
} 
```

有人对某些时候可能导致这种奇怪行为的原因有任何想法吗？

我知道我可以在第一个字符上使用 strtoupper 强制它，然后附加字符串的其余部分，但我真的很想了解我在这里做错了什么（如果有的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:29:37.747

这可能是代码后面的一个错误，您可以在其中计算 $dir 和 $filename。如果路径有斜线或没有...一个可能的解决方案是 .

```
if (strpos('/', $filePath) === false) {
    $dir = '';    
    $fileName = $filePath;
} else {
    $dir = substr($filePath, 0, strrpos($filePath, "/") + 1);    
    $fileName = substr($filePath,strrpos($filePath, "/")+1);
} 
```

但是将这些价值观呼应出来并集中在那里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:16:08.333

您可以在首字母大写之前强制将文件名小写。也就是说，如果您所关心的只是将第一个字母大写。

```
$fileName = ucfirst(strtolower($fileName)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T02:43:04.387

在[ucfirst](http://php.net/manual/en/function.ucfirst.php)的文档中它说（我强调）：

> 如果 str 的第一个字符是字母，则返回一个字符串。

根据您执行此脚本的位置，`SCRIPT_FILENAME`将返回不同的结果。您是否有可能从不同的路径执行脚本，从而为 SCRIPT_FILENAME 提供相对路径？

为了测试这个理论，我从您的一些可能的执行路径中运行了下面的脚本，并看到可能的示例包括前缀“./”和“/”，它们可能不被视为具有字母首字符。

```
<?php
error_reporting(E_ALL);
echo $_SERVER["SCRIPT_FILENAME"]; 
?> 
```

# jquery - jQuery 移动图像数组。如何使用图像数组添加另一个 div？

> ID：11111818
> 
> 赞同：1
> 
> 时间：2012-06-20T01:51:21.327
> 
> 标签：jquery, mobile, jquery-mobile, swipe

```
var aryimageSet1=["img1.jpg","img2.jpg"];
var aryimageSet2=["img3.jpg","img4.jpg"];

/..some code../

$objImage = $("#div1")
$ary = aryimageSet1; 
```

当我运行这段代码，然后在平板电脑上滑动到 div1 空间时，它会像想象的那样切换我的图像。

谁能告诉我，如何在 jQuery 中声明另一个 div2？

```
$objImage = $("#div2")
$ary = aryimageSet2; 
```

我使用 jQuery 移动。当我手指交换平板电脑上的某些#div 时，它将循环图像（exp. img1.jpg - img2.jpg）。我现在要做的是在 HTML 中创建了另一个#div，我需要添加另一个图像数组。我不知道怎么做。任何帮助是极大的赞赏。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:56:50.110

你能再解释一下吗？代码`$objImage = $("#div2) $ary = aryimageSet2;`应该是什么意思？（您在 之后缺少双引号`"#div2->"<-`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:16:34.400

您可以尝试[克隆](http://api.jquery.com/clone/)方法：

```
$div2 = $("#div1").clone().attr('id', 'div2'); 
```

然后遍历图像 url 数组并在新 div 上设置图像属性：

```
$div2.find('img').each(function(index) {
  $(this).attr('src', aryimageSet2[index]);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T22:17:16.097

```
var $newDiv = $('<div id="div2">'); 
```

这将创建一个新的 div 元素。然后，您可以操作该元素并将其插入 DOM（或执行您计划使用它的任何操作）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T01:23:46.190

```
$(document).on('swipeleft swiperight', '.swipe', function (e) {
    switch(e.target.id) {
        case "swipe1_id":
            $objImage = $("#div1")
            $ary = aryimageSet1;
           break;
         case "swipe2_id":
            $objImage = $("#div2")
            $ary = aryimageSet2;
           break;
     }
 } 
```

HTML

```
<div id="swipe1_id" class="swipe"></div>
<div id="swipe2_id" class="swipe"></div> 
```

我自己解决了这个问题 :) 不确定它是否完美，但它对我有用。如果我不清楚我的问题，我很抱歉。

# sorting - 如何使用 lua 在 2d 游戏中快速排序精灵？

> ID：11111821
> 
> 赞同：-1
> 
> 时间：2012-06-20T01:52:06.687
> 
> 标签：sorting, lua

我正在开发一个 2d 游戏。我在所有游戏逻辑中都使用 lua 脚本。现在的问题是排序太慢了。任何人都可以帮助改进它吗？

这是我关于 zobject 列表的代码。

```
local c = class("ZList") -- class is a function to generate a "Class"

function c:insert(v) -- every v(value or object) has a z field
    if v.z == nil then v.z = -1 end
    if self.head == nil then
        self.head = {val=v, nxt=nil}
    else
        local p = self.head
        local pp = p -- pp is a pointer to pre node
        while v.z and p and p.val.z and p.val.z <= v.z do
            pp = p
            p = p.nxt
        end
        if p == self.head then
            self.head = {val=v, nxt=p}
        else
            pp.nxt = {val=v, nxt=p}
        end
    end
end

function c:delete(v)
    local p = self.head
    local pp
    while p and p.val ~= v do
        pp = p
        p = p.nxt
    end

    if p ~= nil then
        if p == self.head then
            self.head = p.nxt
        else
            pp.nxt = p.nxt
        end
    end
end 
```

****___** **更新*****_ *_* __ *_********

 *****谢谢尼科尔，每个人都回复了！我听从了你的建议：使用 table.insert 和 table.sort，使用不需要排序的静态列表。这是我的最终代码：

```
 local remove_list
    sort(Graphics.viewports, comp)
    for _, viewport in pairs(Graphics.viewports) do
        if viewport.visible then
            remove_list = {}
            if not viewport.static then sort(viewport.sprites, comp) end
            for k, sprite in pairs(viewport.sprites) do
                if not sprite:paint() then
                    table.insert(remove_list,1, k)
                end
            end
            for _, k in pairs(remove_list) do
                table.remove(viewport.sprites, k)
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:57:34.887

停止将您的精灵放在链接列表中。将它们放在常规列表中。插入时间不会像内存分配和链表那样对您造成严重的伤害。只需使用常规的 Lua 列表，`table.insert`等等。

或者，您真的*需要*对所有精灵进行排序吗？最有可能（当然取决于具体情况），您可以将它们分层绘制：所有第 0 层（以任何顺序），然​​后所有第 1 层，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:55:56.997

为什么不使用内置`table.sort`？使用它你有2个选项

1.  在调用时指定一个排序函数：`table.sort(table,comp)`，如果`comp(a,b)`一个函数返回 true

2.  为你的精灵类实现一个 __lt 元方法，实现`<`操作。

`table.sort`显然使用了快速排序算法的变体（根据lua-users wiki 上的[LuaSorting ）。](http://lua-users.org/wiki/LuaSorting)*****

# spring - SPRING MVC：如何将 ModelAndView 呈现为字符串

> ID：11111823
> 
> 赞同：0
> 
> 时间：2012-06-20T01:52:07.533
> 
> 标签：spring, spring-mvc

在 Controller 中，我需要获取一个呈现的字符串并对其执行一些操作。这个字符串必须从视图中渲染出来。有没有简单的方法呢？

澄清：

我有控制器

```
@RequestMapping(value = "/")
@ResponseBody
public String renderString() {

//I NEED TO RENDER SOME CONTENT I SAVED IN A VIEW
//I DONT WANT TO RETURN THIS CONTENT BACK TO THE BROWSER
//INSTEAD I WANT TO LETS SAY SEND CONTENT VIA EMAIL

ModelAndView view = new ModelAndView("email_template", Model);

**//QUESTION IS HERE, HOW DO I GET RENDERED STRING OUT OF VIEW/MODEL?
String emailText = view.render(); ??????????** 

...sendEmail(emailText);

return "Email send";
} 
```

希望现在更加清晰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:16:17.467

正如日本人告诉你的那样，我不确定是否真的理解你的问题，但我会选择我认为“视野之外”的意思。

使用 Spring，您可以将注释 @ResponseBody 添加到您的控制器。该方法返回的字符串将成为响应的唯一内容。

例子：

```
@RequestMapping(value = "/")
@ResponseBody
public String renderString() {
    return "Rendered String";
} 
```

您将在屏幕上看到“渲染字符串”。

# r - R中的环境链接

> ID：11111830
> 
> 赞同：3
> 
> 时间：2012-06-20T01:53:07.347
> 
> 标签：r, tdd, do.call, proto

在我的 R 开发中，我需要将函数原语包装在`proto`对象中，以便在`$perform()`调用对象的方法时可以将许多参数自动传递给函数。函数调用在内部通过`do.call()`. 一切都很好，除非函数试图从定义它的闭包中访问变量。在这种情况下，该函数无法解析名称。

这是我发现的重现该行为的最小示例：

```
library(proto)

make_command <- function(operation) {
  proto(
    func = operation,
    perform = function(., ...) {
      func <- with(., func) # unbinds proto method
      do.call(func, list(), envir=environment(operation))
    }  
    )
}

test_case <- function() {
  result <- 100  
  make_command(function() result)$perform()
}

# Will generate error:
# Error in function ()  : object 'result' not found
test_case() 
```

我有一个可重复的`testthat`测试，它也输出大量的诊断输出。诊断输出让我难过。通过查找父环境链，我的位于函数内部的诊断代码找到并打印了函数无法找到的同一个变量。[请参阅此要点。](https://gist.github.com/2957567).

如何`do.call`正确设置环境？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T23:55:32.547

这是与发帖者线下讨论后的最终答案：

```
make_command <- function(operation) {
 proto(perform = function(.) operation())
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T04:52:51.737

我认为这里的问题更清晰，更容易探索，如果你：

*   `make_command()`用命名函数替换其中的匿名函数。

*   使该函数打开 a `browser()`（而不是尝试获取`result`）。这样你就可以环顾四周，看看你在哪里以及发生了什么。

试试这个，它应该澄清你的问题的原因：

```
test_case <- function() {
  result <- 100  
  myFun <- function() browser()
  make_command(myFun)$perform()
}
test_case()
## Then from within the browser:
#
parent.env(environment())
# <environment: 0x0d8de854>
# attr(,"class")
# [1] "proto"       "environment"
get("result", parent.env(environment()))
# Error in get("result", parent.env(environment())) : 
#   object 'result' not found
#
parent.frame()
# <environment: 0x0d8ddfc0>
get("result", parent.frame())  ## (This works, so points towards a solution.)
# [1] 100 
```

这就是问题所在。尽管您认为您正在评估`myFun()`，其环境是 的评估框架`test_case()`，但您的调用`do.call(func, ...)`实际上是评估`func()`，其环境是`proto`定义它的环境。`result`在自己的框架中寻找和没有找到之后，调用`func()`遵循词法作用域的规则，然后在`proto`环境中寻找。*它*及其父环境都不包含名为 的对象`result`，从而导致您收到错误消息。

如果这不能立即生效，您可以继续在浏览器中四处寻找。以下是一些您可能会觉得有帮助的进一步电话：

```
environment(get("myFun", parent.frame()))
ls(environment(get("myFun", parent.frame())))
environment(get("func", parent.env(environment())))
ls(environment(get("func", parent.env(environment())))) 
```

# android - MonoDroid 自定义控件 + 以编程方式填充列表视图

> ID：11111840
> 
> 赞同：2
> 
> 时间：2012-06-20T01:55:10.240
> 
> 标签：android, xamarin.android, xamarin

我对所有这些 Monodroid 东西都很陌生。

我正在将我的 Windows Phone 应用程序移植到 Android，到目前为止，就重新创建 AXML UI 而言非常好，但是当我尝试移植从 UserControl 类继承的自定义用户控件时，我似乎不知道该怎么做.

有人可以给我一个小例子吗？

我真正想做的是创建一个自定义的可重用控件，左侧有一个简单的彩色矩形，右侧有一些文本。

我希望能够通过根据需要多次实例化控件来填充列表视图（也不知道该怎么做）。

我不知道如何创建控件本身并实例化它以编程方式填充列表视图。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:47:53.513

我建议通读Xamarin 网站上的[这组教程](http://docs.xamarin.com/android/tutorials/ListViews_and_Adapters)，了解列表在 Android 中的工作原理。听起来您真正想要的只是自定义行布局，而不是使用自定义“控件”，这将在[第 3 部分](http://docs.xamarin.com/android/tutorials/ListViews_and_Adapters/Part_3_-_Customizing_a_ListView%27s_Appearance#Creating_a_Custom_Row_Layout)中介绍。

# linux - how to shield a cpu from the linux scheduler (prevent it scheduling threads onto that cpu)?

> ID：11111852
> 
> 赞同：38
> 
> 时间：2012-06-20T01:56:49.097
> 
> 标签：linux, performance, real-time, scheduling

It is possible to use `sched_setaffinity` to pin a thread to a cpu, increasing performance (in some situations)

From the linux man page:

> Restricting a process to run on a single CPU also avoids the performance cost caused by the cache invalidation that occurs when a process ceases to execute on one CPU and then recommences execution on a different CPU

Further, if I desire a more real-time response, I can change the scheduler policy for that thread to `SCHED_FIFO`, and up the priority to some high value (up to `sched_get_priority_max`), meaning the thread in question should always pre-empt any other thread running on its cpu when it becomes ready.

However, at this point, the thread running on the cpu which the real-time thread just pre-empted will possibly have evicted much of the real-time thread's level-1 cache entries.

My questions are as follows:

1.  Is it possible to prevent the scheduler from scheduling any threads onto a given cpu? (eg: either hide the cpu completely from the scheduler, or some other way)
2.  Are there some threads which absolutely have to be able to run on that cpu? (eg: kernel threads / interrupt threads)
3.  If I need to have kernel threads running on that cpu, what is a reasonable maximum priority value to use such that I don't starve out the kernel threads?

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-25T20:39:23.850

The answer is to use [cpusets](http://www.kernel.org/doc/man-pages/online/pages/man7/cpuset.7.html). The [python cpuset utility](http://code.google.com/p/cpuset/) makes it easy to configure them.

**Basic concepts**

*3 cpusets*

*   `root`: present in all configurations and contains all cpus (*unshielded*)
*   `system`: contains cpus used for system tasks - the ones which need to run but aren't "important" (*unshielded*)
*   `user`: contains cpus used for "important" tasks - the ones we want to run in "realtime" mode (*shielded*)

The `shield` command manages these 3 cpusets.

During setup it moves all movable tasks into the unshielded cpuset (`system`) and during teardown it moves all movable tasks into the `root` cpuset. After setup, the subcommand lets you move tasks into the *shield* (`user`) cpuset, and additionally, to move special tasks (kernel threads) from `root` to `system` (and therefore out of the `user` cpuset).

**Commands:**

First we create a shield. Naturally the layout of the shield will be machine/task dependent. For example, say we have a 4-core non-NUMA machine: we want to dedicate **3 cores to the shield**, and leave **1 core for unimportant tasks**; since it is non-NUMA we don't need to specify any memory node parameters, and we leave the kernel threads running in the `root` cpuset (ie: across all cpus)

```
$ cset shield --cpu 1-3 
```

Some kernel threads (those which aren't bound to specific cpus) can be moved into the `system` cpuset. (In general it is not a good idea to move kernel threads which have been bound to a specific cpu)

```
$ cset shield --kthread on 
```

Now let's list what's running in the shield (`user`) or unshielded (`system`) cpusets: (`-v` for verbose, which will list the process names) (add a 2nd `-v` to display more than 80 characters)

```
$ cset shield --shield -v
$ cset shield --unshield -v -v 
```

If we want to stop the shield (teardown)

```
$ cset shield --reset 
```

Now let's execute a process in the shield (commands following `'--'` are passed to the command to be executed, not to `cset`)

```
$ cset shield --exec mycommand -- -arg1 -arg2 
```

If we already have a running process which we want to move into the shield (note we can move multiple processes by passing a comma separated list, or ranges (any process in the range will be moved, even if there are gaps))

```
$ cset shield --shield --pid 1234
$ cset shield --shield --pid 1234,1236
$ cset shield --shield --pid 1234,1237,1238-1240 
```

**Advanced concepts**

`cset set/proc` - these give you finer control of cpusets

**Set**

Create, adjust, rename, move and destroy cpusets

*Commands*

Create a cpuset, using cpus 1-3, use NUMA node 1 and call it "my_cpuset1"

```
$ cset set --cpu=1-3 --mem=1 --set=my_cpuset1 
```

Change "my_cpuset1" to only use cpus 1 and 3

```
$ cset set --cpu=1,3 --mem=1 --set=my_cpuset1 
```

Destroy a cpuset

```
$ cset set --destroy --set=my_cpuset1 
```

Rename an existing cpuset

```
$ cset set --set=my_cpuset1 --newname=your_cpuset1 
```

Create a hierarchical cpuset

```
$ cset set --cpu=3 --mem=1 --set=my_cpuset1/my_subset1 
```

List existing cpusets (depth of level 1)

```
$ cset set --list 
```

List existing cpuset and its children

```
$ cset set --list --set=my_cpuset1 
```

List all existing cpusets

```
$ cset set --list --recurse 
```

**Proc**

Manage threads and processes

*Commands*

List tasks running in a cpuset

```
$ cset proc --list --set=my_cpuset1 --verbose 
```

Execute a task in a cpuset

```
$ cset proc --set=my_cpuset1 --exec myApp -- --arg1 --arg2 
```

Moving a task

```
$ cset proc --toset=my_cpuset1 --move --pid 1234
$ cset proc --toset=my_cpuset1 --move --pid 1234,1236
$ cset proc --toset=my_cpuset1 --move --pid 1238-1340 
```

Moving a task and all its siblings

```
$ cset proc --move --toset=my_cpuset1 --pid 1234 --threads 
```

Move all tasks from one cpuset to another

```
$ cset proc --move --fromset=my_cpuset1 --toset=system 
```

Move unpinned kernel threads into a cpuset

```
$ cset proc --kthread --fromset=root --toset=system 
```

Forcibly move kernel threads (including those that are pinned to a specific cpu) into a cpuset (note: this may have dire consequences for the system - make sure you know what you're doing)

```
$ cset proc --kthread --fromset=root --toset=system --force 
```

**Hierarchy example**

We can use hierarchical cpusets to create prioritised groupings

1.  Create a `system` cpuset with 1 cpu (0)
2.  Create a `prio_low` cpuset with 1 cpu (1)
3.  Create a `prio_met` cpuset with 2 cpus (1-2)
4.  Create a `prio_high` cpuset with 3 cpus (1-3)
5.  Create a `prio_all` cpuset with all 4 cpus (0-3) (note this the same as root; it is considered good practice to keep a separation from root)

To achieve the above you create prio_all, and then create subset prio_high under prio_all, etc

```
$ cset set --cpu=0 --set=system
$ cset set --cpu=0-3 --set=prio_all
$ cset set --cpu=1-3 --set=/prio_all/prio_high
$ cset set --cpu=1-2 --set=/prio_all/prio_high/prio_med
$ cset set --cpu=1 --set=/prio_all/prio_high/prio_med/prio_low 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-06T16:38:55.290

There are two other ways I can think of doing this (though not as elegant as cset, which doesn't seem to have a fantastic level of support from Redhat):

1) Taskset everything including PID 1 - nice and easy (but, alledgly -- I've never seen any issues myself -- may cause inefficiencies in the scheduler). The script below (which must be run as root) runs taskset on all the running processes, including init (pid 1); this will pin all the running processes to one or more 'junk cores', and by also pinning init, it will ensure that any future processes are also started in the list of 'junk cores':

```
#!/bin/bash

if [[ -z $1 ]]; then
  printf "Usage: %s '<csv list of cores to set as junk in double quotes>'", $0
  exit -1;
fi

for i in `ps -eLfad |awk '{ print $4 } '|grep -v PID | xargs echo `; do 
   taskset -pc $1 $i;
done 
```

2) use the isolcpus kernel parameter (here's the documentation from [https://www.kernel.org/doc/Documentation/kernel-parameters.txt](https://www.kernel.org/doc/Documentation/kernel-parameters.txt)):

```
isolcpus=   [KNL,SMP] Isolate CPUs from the general scheduler.
            Format:
            <cpu number>,...,<cpu number>
            or
            <cpu number>-<cpu number>
            (must be a positive range in ascending order)
            or a mixture
            <cpu number>,...,<cpu number>-<cpu number>

        This option can be used to specify one or more CPUs
        to isolate from the general SMP balancing and scheduling
        algorithms. You can move a process onto or off an
        "isolated" CPU via the CPU affinity syscalls or cpuset.
        <cpu number> begins at 0 and the maximum value is
        "number of CPUs in system - 1".

        This option is the preferred way to isolate CPUs. The
        alternative -- manually setting the CPU mask of all
        tasks in the system -- can cause problems and
        suboptimal load balancer performance. 
```

I've used these two plus the cset mechanisms for several projects (incidentally, please pardon the blatant self promotion :-)), I've just filed a patent for a tool called [Pontus Vision ThreadManager](http://www.pontusvision.com/case-studies/reduce-latency-by-20-x/) that comes up with optimal pinning strategies for any given x86 platform to any given software work loads; after testing it in a customer site, I got really good results (270% reduction in peak latencies), so it's well worth doing pinning and CPU isolation.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-09T13:10:06.677

Here's how to do it the old-fashioned way, using cgroups. I have a Fedora 28 machine and RedHat/Fedora want you to use `systemd-run`, but I wasn't able to find this functionality in there. I would love to know how to do it using `systemd-run`, if anyone would care to enlighten me.

Let's say I want to exclude my fourth CPU (of CPUs 0-3) from scheduling, and move all existing processes to CPUs 0-2\. Then I want to put a process on CPU 3 all by itself.

```
sudo su -
cgcreate -g cpuset:not_cpu_3
echo 0-2 > /sys/fs/cgroup/cpuset/not_cpu_3/cpuset.cpus
# This "0" is the memory node. See https://utcc.utoronto.ca/~cks/space/blog/linux/NUMAMemoryInfo
# for more information *
echo 0 > /sys/fs/cgroup/cpuset/not_cpu_3/cpuset.mems 
```

*   Specifically, on your machine you'll want to review `/proc/zoneinfo` and the `/sys/devices/system/node` heirarchy. Getting the proper node information is left as an exercise for the reader.

Now that we have our cgroup, we need to create our isolated CPU 3 cgroup:

```
cgcreate -g cpuset:cpu_3
echo 3 > /sys/fs/cgroup/cpuset/cpu_3/cpuset.cpus
# Again, the memory node(s) you want to specify.
echo 0 > /sys/fs/cgroup/cpuset/cpu_3/cpuset.mems 
```

Put all processes/threads on the `not_cpu_3` cgroup:

```
for pid in $(ps -eLo pid) ; do cgclassify -g cpuset:not_cpu_3 $pid; done 
```

Review:

```
ps -eL k psr o psr,pid,tid,args | sort | cut -c -80 
```

NOTE! Processes currently in sleep *will not move*. They must be awakened so that the scheduler will put them on a different CPU. To see this, choose your favorite sleeping process in the above list- a process, say a web browser, that you thought should be on CPU 0-2 but it's still on 3\. Using its thread ID from the above list, perform:

```
kill -CONT <thread_id> 
```

example

```
kill -CONT 9812 
```

Rerun the ps command, and note that it's moved to another CPU.

DOUBLE NOTE! Some kernel threads *cannot* and will not move! For example, you may note that every CPU has a kernel thread `[kthreadd]` on it. Assigning processes to cgroups works for userspace processes, not for kernel threads. This is life in the multitasking world.

Now to move a process and all its children to control group cpu_3:

```
pid=12566 # for example
cgclassify -g cpuset:cpu_3 $pid
taskset -c -p 3 $pid 
```

Again, if `$pid` is sleeping, you'll need to wake it up for the CPU move to actually take place.

To undo all of this, simply delete the cgroups you've created. Everybody will be stuck back into the root cgroup:

```
cgdelete -r cpuset:cpu_3
cgdelete -r cpuset:not_cpu_3 
```

No need to reboot.

(Sorry, I don't understand the 3rd question from the original poster. I can't comment on that.)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-05T11:20:12.940

If you are using rhel instance you can use Tuna for this (May be available for other linux distros also, but not sure about that). It can easily installed from yum command. Tuna can be used to isolate a cpu core and it dynamically moves processes run in that particular cpu to neighboring cpu. The command to isolate a cpu core is as follow,

`# tuna --cpus=CPU-LIST --isolate`

You can use `htop` to see how tuna isolate the cpu cores in real-time.

# c++ - unique_ptr 应该用于类成员指针吗？

> ID：11111860
> 
> 赞同：0
> 
> 时间：2012-06-20T01:57:49.897
> 
> 标签：c++, c++11

寻找对此的一些意见，因为在阅读 C++ 11 文档时不清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:01:10.090

绝对地。这为您处理[了三法则。](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

# concatenation - verilog 连接的方向

> ID：11111861
> 
> 赞同：4
> 
> 时间：2012-06-20T01:58:05.887
> 
> 标签：concatenation, verilog

我是verilog的初学者。

几乎所有的连接示例如下。

```
wire [3:0] result;
reg  a, b, c, d;

result = {a, b, c, d}; 
```

以下也可能吗？

```
wire [3:0] result;
wire a, b, c, d;

{a, b, c, d} = result; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T02:21:03.117

分配的 LHS（左侧）确实允许连接。

```
module mod1;

wire [3:0] result;
wire a, b, c, d;

reg e,f,g,h;

{a, b, c, d} = result; //Invalid, not in procedural construct

assign {a, b, c, d} = result; //Valid
assign {a,{b,c},d}  = result; //Valid

initial 
   {e, f, g, h} = result; //Valid

endmodule 
```

# ruby - 如何获得随机的 0 和 1 数字

> ID：11111862
> 
> 赞同：6
> 
> 时间：2012-06-20T01:58:09.220
> 
> 标签：ruby, loops, random

所以基本上为了好玩，我试图生成一列数字（7位数字只有0和1）我的代码很短：

```
a = rand(0000000-1111111)
b = 220
a1 = rand(0000000-1111111)
a2 = rand(0000000-1111111)
a3 = rand(0000000-1111111)
a4 = rand(0000000-1111111)
a5 = rand(0000000-1111111)

while b !=0
  puts a
  puts a2
  puts a3
  puts a4
  puts a5
end 
```

我的问题是，不是生成一个随机的 0 和 1 列，而是使用*所有*数字。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T02:11:18.753

这是惯用的 Ruby：

```
5.times do
  puts (1..7).map { [0, 1].sample }.join
end 
```

让我们打开它：

`5.times do...end`是不言自明的。做任何介于`do`和`end`五次之间的事情。

`(1..7)`生成一个包含七个元素的数组。我们现在并不关心里面有什么。`map`返回一个新数组，其中每个元素都是调用大括号之间的内容的结果。因此，我们将调用七次`[0, 1].sample`并将结果压缩到一个数组中。`sample`当然，它本身会随机选择`0`或`1`。最后`.join`将数组变成字符串。`.join('-')`例如，如果我们说，它会在每个元素之间添加一个连字符 (1-0-0-1-1-1-0-1)。但是由于我们没有指定任何内容，因此它在每个元素之间都没有放置任何内容 (10011101)。

你有它。

正如其他人所指出的，对于这个特定的问题，可以通过使用二进制来做更快更短的事情。我不认为这是Ruby Way。关于速度，“过早的优化是万恶之源”，如果你对慢代码有强烈的反感，那么无论如何你都不应该编写 Ruby。关于可读性，这种方式可能更短，但上述方式更清晰。“哦，我们做了五次，这将打印出一个 7 长的东西......随机的 0 和 1 序列......作为一个字符串”。它几乎读起来像英语（如果您知道单词[map](http://en.wiktionary.org/wiki/map#Verb)（定义三））。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-20T02:03:55.017

解决此问题的最佳方法可能是进行基本转换：

```
someNumber = rand(1 << 7) # Seven digits, max; 1 << 7 is 10000000 in binary.

puts someNumber.to_s(2).ljust(7, '0') # 10110100, e.g. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T06:14:57.997

@minitech 答案的推导

```
 5.times { puts "%07b" % rand(128) } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-20T02:04:10.203

Ruby 无法从您的`rand()`输入中理解您需要特定格式的数字。

取而代之的是随机生成每个数字 ( `rand(2)`) 并用这样的七个变量构建整个数字。在自己的一行上打印结果，然后重新启动循环。

另一种选择是生成一个随机数`0`，`127`然后将其格式化为二进制输出。这在随机数生成器上花费的时间要少得多，并大大减少了程序中的变量。

这两种方法都适用于学习计划。两者都试一下，看看你喜欢哪个版本。试着理解为什么你更喜欢一种方式而不是另一种方式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-20T12:19:51.423

这是一种生成任意数量（默认为 1）的指定长度的二进制数的方法：

```
def random_binary(length, n=1)
  raise ArgumentError if n < 1
  (1..n).map { "%0#{length}b" % rand(2**length) }
end

random_binary(7, 5)
#=> ["0011100", "1001010", "0101111", "0010101", "1100101"] 
```

# android - Android NDK jshortArray 没有宣传的那么长

> ID：11111869
> 
> 赞同：1
> 
> 时间：2012-06-20T01:59:02.663
> 
> 标签：android, android-ndk, java-native-interface

我收到以下代码的段错误：

```
#include <stddef.h>
#include <android/log.h>
#include "com_backyardbrains_drawing_BybGLDrawable.h"

#define ALOG(msg) __android_log_print(ANDROID_LOG_DEBUG, "NDK:BYB", msg)
#define AERR(msg) __android_log_print(ANDROID_LOG_ERROR, "NDK:BYB", msg)

JNIEXPORT jfloatArray JNICALL
Java_com_backyardbrains_drawing_BybGLDrawable_interleaveXvalues
(JNIEnv *env, jclass clazz, jshortArray shortArrayToDraw) {
ALOG("called interleave");

    jfloatArray result;
    jsize len = (*env)->GetArrayLength(env, shortArrayToDraw);
    __android_log_print(ANDROID_LOG_DEBUG, "NDK:BYB",
                       "Got input length of %d", len);
    jshort *valuesjs = (*env)->GetShortArrayElements(env, shortArrayToDraw, NULL);
    if (valuesjs == NULL || !(len > 0)) {
        return NULL;
    }
    jfloat tmp[len*2];
    __android_log_print(ANDROID_LOG_DEBUG, "NDK:BYB",
                  "made a new tmp array of size %d",
                  sizeof(tmp)/sizeof(jfloat));
    // Create the returnable 2D array
    result = (*env)->NewFloatArray(env, len*2);
    if (result == NULL) {
        AERR("could not allocate result");
        return NULL;
    }

    int i;
    for (i = 0; i < len; i++) {
        tmp[i*2] = i;
        tmp[i*2+1] = valuesjs[i];
        __android_log_print(ANDROID_LOG_DEBUG, "NDK:BYB", "Set element %d", i);
    }
    ALOG("Finished building new array");

    (*env)->ReleaseShortArrayElements(env, shortArrayToDraw, valuesjs, 0);
    ALOG("released old short array");

    (*env)->SetFloatArrayRegion(env, result, 0, len*2, tmp);
    ALOG("set new float array");
    return result;

} 
```

日志输出类似于：

```
06-19 21:34:24.829 29156 29172 D NDK:BYB : called interleave
06-19 21:34:24.829 29156 29172 D NDK:BYB : Got input length of 131072
06-19 21:34:24.829 29156 29172 D NDK:BYB : made a new tmp array of size 262144            
06-19 21:34:25.157 29156 29172 D NDK:BYB : Set element 0
... 
06-19 21:34:25.157 29156 29172 D NDK:BYB : Set element 158
06-19 21:34:25.367 29204 29204 I DEBUG   : pid: 29156, tid: 29172  >>> com.backyardbrains <<<
06-19 21:34:25.367 29204 29204 I DEBUG   : signal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 450ac000 
```

该问题始终以`159`for循环`i`的值出现。`for`但是，传入此函数的数组的预期长度是固定的 131072 个元素（如日志中所反映）。为什么数组下方的值无法访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:39:21.230

也许您的环境不能很好地处理堆栈上分配的这么多内存。因为 sizeof(tmp) == 1 兆字节。尝试在堆上分配 tmp。

# php - 价格范围查询返回不准确的结果

> ID：11111874
> 
> 赞同：0
> 
> 时间：2012-06-20T01:59:59.657
> 
> 标签：php, mysql

我有一个搜索表单，用户可以在其中搜索指定价格范围内的产品。其中我有 2 个输入框 1 用于起始范围，另一个用于结束范围。

我的数据库表中有 3 个产品商店。与价格`2300.0000`，`1200.0000`，`1000.5000`分别。

我在输入的价格范围内选择值时遇到问题。问题是，当我输入像

1.  `100`开始范围到`1100`结束范围。带有`1200.0000` 和`1000.5000`正在显示的产品，而不仅仅是`1000.5000` 产品。
2.  `0`开始范围到`1100`结束范围或`1000.50`结束范围。带有`1200.0000`和`1000.5000`正在显示的产品，而不仅仅是`1000.5000`产品。
3.  `1100`起始范围。仅显示带有 的产品，`2300.0000`而不是同时显示`2300.0000`和`1200.0000`。但是当起始值小于或等于时，`500`所有 3 个产品都将被显示。

这是我正在使用的代码。

```
function db_prepare_input($string)
{
    if (is_string($string)) {
        return trim(stripslashes($string));
    } elseif (is_array($string)) {
        reset($string);
        while (list($key, $value) = each($string)) {
            $string[$key] = db_prepare_input($value);
        }
        return mysql_real_escape_string($string);
    } else {
        return mysql_real_escape_string($string);
    }
}

$pricefrom_key = db_prepare_input(number_format($_GET['pricefrom'], 4, '.', ''));
$priceto_key = db_prepare_input(number_format($_GET['priceto'], 4, '.', ''));

// Price Range
if (!empty($_GET['pricefrom']) && !empty($_GET['priceto'])) {
    $price_range = " having price >= ".$pricefrom_key." and price <= ".$priceto_key;
}
elseif(empty($_GET['pricefrom']) && !empty($_GET['priceto']))
{
    $price_range = " having price >= 0 and price <= ".$priceto_key;
}

elseif(!empty($_GET['pricefrom']) && empty($_GET['priceto']))
{
    $price_range = " having price >= ".$pricefrom_key;
}

elseif(!empty($_GET['pricefrom']) && !empty($_GET['priceto']))
{
    $price_range = "";
}

$catglobal_sql = "select p.blog_id, p.global_category_id, p.products_id, p.products_currency, p.products_type, p.products_name, p.products_description, p.products_quantity, p.products_model, p.products_image, p.products_price, p.products_date_added, p.products_last_modified, p.products_date_available, p.products_weight, p.products_status, p.products_tax_class_id, p.manufacturers_id, p.products_ordered, p.specials_new_products_price, p.specials_date_added, p.specials_last_modified, p.expires_date, p.date_status_change, p.status, p.display_product, case when (p.specials_new_products_price > 0 or p.specials_new_products_price != 0000-00-00 and p.expires_date > Now() and p.status != 0) then p.specials_new_products_price else p.products_price end price from ".TABLE_GLOBAL_PRODUCTS." p INNER JOIN ".TABLE_STORES." s ON s.blog_id = p.blog_id where MATCH (p.products_name,p.products_description) AGAINST ('%".$search_key."%') OR p.products_name like '%".$search_key."%' and s.countries_id = '168' ".$search_cat." and p.display_product = '1' and p.products_status = '1' ".$price_range." order by p.products_date_added DESC, p.products_name"; 
```

我试过，添加`die($catglobal_sql);`，结果是，

```
select p.blog_id, p.global_category_id, p.products_id, p.products_currency, p.products_type, p.products_name, p.products_description, p.products_quantity, p.products_model, p.products_image, p.products_price, p.products_date_added, p.products_last_modified, p.products_date_available, p.products_weight, p.products_status, p.products_tax_class_id, p.manufacturers_id, p.products_ordered, p.specials_new_products_price, p.specials_date_added, p.specials_last_modified, p.expires_date, p.date_status_change, p.status, p.display_product, case when (p.specials_new_products_price > 0 or p.specials_new_products_price != 0000-00-00 and p.expires_date > Now() and p.status != 0) then p.specials_new_products_price else p.products_price end price from wp_global_products_table p INNER JOIN wp_blogs s ON s.blog_id = p.blog_id where MATCH (p.products_name,p.products_description) AGAINST ('%cotton%') OR p.products_name like '%cotton%' and s.countries_id = '168' and p.products_currency = 'php' and p.display_product = '1' and p.products_status = '1' and p.products_type = 'a' having price >= 0 and price <= 1200.0000 order by p.products_date_added DESC, p.products_name 
```

好像有什么问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:24:30.297

我找到了问题..它在案例中..我已将其修改为`case when p.specials_new_products_price >= 0.0000 and p.expires_date > Now() and p.status != 0 then p.specials_new_products_price else p.products_price end price`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-20T02:24:04.830

你到底在用这条线做什么..

```
$price_range = " having price >= ".$pricefrom_key." and price <= ".$priceto_key; 
```

你不应该只设置 $price_range 即：

```
if (!empty($_GET['pricefrom']) && !empty($_GET['priceto'])) 
```

{

```
 if($price_range >= $pricefrom_key && $price_range <= $priceto_key)
      {
      echo "you are in the pricerange from" .$pricefrom_key." to ".$priceto_key;
      } 
//etc......
} 
```

编辑：由于有些人没有得到我的回答，这只是为了指出正确的方向。无论我们使用“echo”语句还是SQL查询，都需要正确指定范围。该声明：

```
$price_range = " having price >= ".$pricefrom_key." and price <= ".$priceto_key; 
```

..几乎说：价格范围=一些文字。数字 。一些文字。编号 < = > 运算符在“”中，表示 TEXT，它们将被忽略。我希望这是有道理的。

# bison - EBNF 到 Bison - 减少/减少错误

> ID：11111876
> 
> 赞同：0
> 
> 时间：2012-06-20T02:00:06.230
> 
> 标签：bison, ebnf, reduce-reduce-conflict

我必须将此 EBNF 翻译成野牛：

```
<compound-statement> ::= begin [ <statement> ( ; <statement> )*] end

<statement> ::= 
| <assignment>
| <if-statement>
| <while-statement>
| <proc-func-call>
| <compound-statement> 
```

当我翻译赋值、if、while 语句和 proc_func_ 时，bison 没有错误。然而，当我在野牛中输入这个时，翻译复合语句：

```
compound_statement : BEGINKEY state ENDKEY ;
state : | statement stm ;
stm : | BQUESTIONMARK statement stm ; 
```

有一个减少/减少错误。

有人可以向我解释一下，为什么会出现减少/减少错误，因为这对我来说没有意义。我真的很感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:00:44.010

所以你有一种 Pascal 语言，其中分号是语句分隔符，而不是终止符。

我认为这`BQUESTIONMARK`是您的分号 (";") 的标记。

我认为您最好使用一个需要第一个语句的产品，然后是另一个提供可选附加语句的左递归产品。

我可能误读了一些东西，但你的语法允许`state`是 epsilon (null) 和`stm`，我认为这是你的 reduce/reduce 错误的根源。

我会像这样解决这个问题：

```
compound_statement : BEGINKEY first_statement statements ENDKEY
                   | BEGINKEY first_statement ENDKEY
                   ;

first_statement : statement ;

statement : assignment
          | if_statement
          | while_statement
          | proc_func_call
          | compound_statement
          ;

statements : statements statement_with_semi
           | statement_with_semi
           ;

statement_with_semi : BQUESTIONMARK statement ; 
```

# javascript - CouchApps 中的安全性

> ID：11111881
> 
> 赞同：1
> 
> 时间：2012-06-20T02:00:36.080
> 
> 标签：javascript, json, security, couchdb, cloudant

我刚刚开始使用 couchdb，并且一直在研究编写沙发应用程序。这个想法很酷。据我目前所知，它非常适合编写前置应用程序，但我还不能说的是保护数据和代码。

例如，如果我有一个类似 iriscouch 的应用程序，似乎整个数据库都可以复制到世界各地。这对那些事情很好。但是，如果我要在 cloudant（或自托管）之类的东西上托管一些东西，我不想让 joe schmoe 复制我的数据库（假设我在自己的域中拥有它），有没有办法保护而不让你的所有源码出来？

也许这只是我目前的理解。但是当你有 javascript 时，你总是可以看到源代码。构建沙发应用程序时有什么不同吗？例如，如果我想保留后端 js 代码的专有性。

在构建前端时，客户端代码显然无关紧要。但我想知道是否可以使用 html/js 来构建可以保持后端专有的应用程序。或者这只是超出了 couchapps 的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:41:29.300

CouchDB 有非常[原始的访问控制](http://wiki.apache.org/couchdb/Security_Features_Overview)。使用这种访​​问控制系统是不可能构建具有安全意识的 Web 应用程序（如购物车）的。为了实施更复杂的访问控制规则，您需要在 JavaScript 和 CouchDB 之间构建一个中间件。在这种情况下，用户登录到中间件，这段代码负责跟踪用户是谁以及他们可以访问哪些资源。

# doctrine-orm - Doctrine 2 在刷新时生成空 id

> ID：11111884
> 
> 赞同：0
> 
> 时间：2012-06-20T02:01:06.220
> 
> 标签：doctrine-orm, flush, persist, string

关于stackoverflow的第一个问题，有点紧张。

所以，情况是这样的：我正在使用 Doctrine 2 作为网站。我在没有梨的情况下正确安装了它，在我的应用程序中使用了好的库和好的路径。我在开始编码之前创建了我的数据库，因此我使用逆向工程方法（学说导出器）创建了映射（xml 和 yml，以防万一）。生成的映射很好，然后我自己编写了实体文件（控制台没有工作）。

```
/** @Entity */
class Member {

/** @Id @Column(type="string", nullable=false) */
private $login;
/** @Column(type="string", nullable=false) */
private $password;
/** @Column(type="string") */
private $mail;
/** */
private $dateregister;
/** */
private $datelastconnexion;
/** @Column(type="string") */
private $description;
/** */
private $birthday;
/** @Column(type="string") */
private $website;
/** @Column(type="boolean") */
private $activated;
/** @Column(type="integer") */
private $idstatus;
/** @Column(type="integer") */
private $idcountry;
/** @Column(type="integer") */
private $idlang;

/** @Column(type="integer") */
private $idarticle;
/** @Column(type="integer") */
private $idfilters;

public function __construct($login) {
    $this->login = $login;
    $this->activated = false;
}

public function getLogin() {return $this->login;}
public function getPassword() {return $this->password;}
public function getMail() {return $this->mail;}
public function getDateregister() {return $this->dateregister->format('Y/m/d');}
public function getDatelastconnexion() {if ($this->datelastconnexion == null) return 'Never logged';
    else return $this->datelastconnexion->format('Y/m/d H:i');}
public function getDescription() {return $this->description;}
public function getBirthday() {return $this->birthday->format('Y/m/d');}
public function getWebsite() {return $this->website;}
public function getActivated() {return $this->activated;}
public function getStatus() {return $this->idstatus;}
public function getCountry() {return $this->idcountry;}
public function getLang() {return $this->idlang;}
public function getArticles() {return $this->idarticle->toArray();}
public function getFilters() {return $this->idfilters->toArray();}

public function setLogin($newLogin) {$this->login = $newLogin;}
public function setPassword($newPassword) {$this->password = sha1($newPassword);}
public function setMail($newMail) {$this->mail = $newMail;}
public function setDateregister($newDate) {$this->dateregister = $newDate;}
public function setDatelastconnexion($newDate) {$this->datelastconnexion = $newDate;}
public function setDescription($newDescription) {$this->description = $newDescription;}
public function setBirthday($newDate) {$this->birthday = $newDate;}
public function setWebsite($newWebsite) {$this->website = $newWebsite;}
public function setActivated($activate) {$this->activated = $activate;}
public function setStatus($newStatus) {$this->idstatus = $newStatus;}
public function setCountry($newCountry) {$this->idcountry = $newCountry;}
public function setLang($newLang) {$this->idlang = $newLang;}
public function setArticles($newArticles) {$this->idarticle = $newArticles;}
public function setFilters($newFilters) {$this->idfilters = $newFilters;}

} 
```

现在我试图在数据库中插入一些东西，但我遇到了一个小问题：当一个成员尝试注册时，他会填写一些信息（登录名、密码等）。我进行每一次测试以查看信息是否正确，如果正确，我创建一个新的对象成员，我用每个给定的信息填充并自动生成一个，然后我在对象上调用persist()，然后调用flush()。

```
$newMember = new Member($login);
$newMember -> setPassword($passwd);
$newMember -> setMail($mail);
$newMember -> setDateregister($currentDate);
$newMember -> setDescription($description);
$newMember -> setBirthday($newBirthday);
$newMember -> setStatus($status[0]); // existing object
$newMember -> setCountry($country[0]); // existing object
$newMember -> setLang($lang[0]); // existing object
$doctrineManager->persist($newMember);
$doctrineManager->flush($newMember); 
```

查看数据库时我有些惊讶，看到填充的 ID 等于 ''（空字符串），而不是 $login。所以......这是我的问题：这怎么可能？是因为我在刷新之前没有填写 Member 的每个属性吗？还是没有提供有关实体之间关系的信息（一对多、多对多、多对一）？还是别的什么？我在这个问题上已经一个星期了，我无法弄清楚。

有关信息：

*   $status, $lang, $country 是外键。
*   $article 和 $filters 是多对多关系。

感谢您阅读，并且（我希望）感谢您向我解释我的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T23:05:30.860

事实是 $idarticles 和 $idfilters 是多对多关系，我没有指定。在构建对象时，有可能 Doctrine 2 无法根据映射构建对象。

所以构造函数看起来像这样：

```
public function __construct()
{
    $this->idfilters = new \Doctrine\Common\Collections\ArrayCollection();
    $this->idarticle = new \Doctrine\Common\Collections\ArrayCollection();
    $this->activated = false;
} 
```

并且每个 ManyToMany 都必须获取它们的 ArrayCollections 才能工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:13:00.693

您必须像这样使用冲洗：

```
$doctrineManager->flush(); 
```

之后，您可以通过以下方式访问 id：

```
$newmember->getId(); 
```

# sql - 回滚更新查询的更改

> ID：11111888
> 
> 赞同：0
> 
> 时间：2012-06-20T02:01:38.733
> 
> 标签：sql, oracle

```
UPDATE UPI_ATTRIBUTE SET SITE_INC ='0' 
WHERE USER_PROFILING_NAME IN ('CAR_IMPLICIT','CAR_EXPLICIT') 
```

以上是我用来更新 UPI_ATTRIBUTE 表中的列的查询。并假设如果我需要回滚我对更新查询所做的上述更改，那么在上述情况下如何使用删除查询？当前 SITE_INC 为空。因此，在更新表格后，它将有 0 。如果我需要回滚更改，那么我需要再次将其清空。

更新后如何从上面的列中删除值 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:21:27.487

您不能“删除”数据来回滚更新。

即使您要做的唯一更改是将标志从“NULL”设置为“Y”，反之亦然，当您进行多次更新时，您也无法真正确定要更新哪个值。

```
update 1 : set from "NULL" to "0"
update 2 : set from "0" to "something else"
update 3 : Rollback changes (rollback to which state)? 
```

如果您想真正回滚对特定行的更改（而不是完整的表，这可以使用闪回来完成），您可以审核更改以“记住”这些值，然后恢复它们。

即使这样，当您有多个更新时，您也应该考虑恢复到哪个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:26:36.897

不确定 Oracle 是否具有用于选择/更新的最终表/旧表功能。

对于 DB2 for z/OS，它具有这样的功能：

```
 SELECT LASTNAME, BONUS FROM FINAL TABLE
  (UPDATE EMP SET BONUS = BONUS * 1.3
          WHERE JOB = 'CLERK'); 
```

然后，选择的结果集包括所有更新的行。您可以使用 rownum 或其他唯一值，然后您可以根据需要将其更新回任何值。

# mysql - 如何使用具有相同日期的事件的累积计数来更新 MySQL 表

> ID：11111892
> 
> 赞同：1
> 
> 时间：2012-06-20T02:02:25.247
> 
> 标签：mysql

我有一张表，我从中提取数据。该数据具有日期和股票代码。可以有多行具有相同日期和不同股票代码的数据。我需要更新表格，以便所有具有相同日期的行都有一个运行总计。当一个新的日期出现时，累积计数重新设置为 1，然后恢复。

一个典型的查询：

```
mysql> SELECT Sym 'sym' ,  fdate as 'FilledDate',  TsTradeNum 'numT'
-> FROM trades_entered_b2
-> WHERE fDate >= '2009-08-03' AND fDate <= '2009-08-07'
-> LIMIT 10;

+------+------------+------+
| sym  | FilledDate | numT |
+------+------------+------+
| WAT   | 2009-08-03 |    0 |
| ALGN  | 2009-08-04 |    0 |
| POT   | 2009-08-05 |    0 |
| PTR   | 2009-08-06 |    0 |
| SCHW  | 2009-08-06 |    0 |
| FDO   | 2009-08-07 |    0 |
| NBL   | 2009-08-07 |    0 |
| RRC   | 2009-08-07 |    0 |
| WAT   | 2009-08-08 |    0 |
| COCO  | 2009-08-08 |    0 |
+------+------------+------+ 
```

我想要的是：

```
+------+------------+------+
| sym  | FilledDate | numT |
+------+------------+------+
| WAT   | 2009-08-03 |    1 |
| ALGN  | 2009-08-04 |    1 |
| POT   | 2009-08-05 |    1 |
| PTR   | 2009-08-06 |    1 |
| SCHW  | 2009-08-06 |    2 |
| FDO   | 2009-08-07 |    3 |
| NBL   | 2009-08-07 |    4 |
| RRC   | 2009-08-07 |    5 |
| WAT   | 2009-08-08 |    1 |
| COCO  | 2009-08-08 |    2 |
+------+------------+------+ 
```

我需要做的是用正确的值更新 TsTradeNum 列。我试图创建一个函数，但各种查询都失败了。

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:13:19.097

可以在下面尝试。如果前一行日期与当前行相同，则查询会将 numT 递增 1，否则它将 numT 重置为 1。

```
SELECT sym, FilledDate, numT  
FROM(
SELECT sym, FilledDate,
   @count:=CASE WHEN ( @date <> FilledDate) THEN 1 
                ELSE 
                    @count+1                     
                END AS numT,
    @date:=FilledDate as dlset        
FROM
(SELECT @count:= -1) s,
(SELECT @date:= -1) d,    
  (SELECT id, sym, FilledDate
   FROM mytable3  
   ORDER BY FilledDate,sym desc        
  ) t ) a 
```

# winapi - 如何在 Windows 7 和 XP 之间共享包含图标的资源 DLL？

> ID：11111893
> 
> 赞同：0
> 
> 时间：2012-06-20T02:02:32.477
> 
> 标签：winapi, windows-xp, embedded-resource

我有一个项目，为了 MUI 的目的，在资源 DLL 中嵌入了一些图标、位图和字符串。这些都在 Windows 7 中工作得很好，但只有字符串和位图在 XP 中工作。我使用 VS2012 在 Windows 7 上构建应用程序，使用 Visual Studio 2010 (v100) 作为实际工具集。

由于 XP 本身不支持 MUI，因此我根据[MSDN 上本文](http://msdn.microsoft.com/en-us/library/windows/desktop/ee845043%28v=vs.85%29.aspx#step_5)的步骤 5.1c 和 5.2 以编程方式获取适当资源 DLL 的句柄。

在我从 XP 上的资源中为我的图标尝试 LoadImage 后，GetLastError 的结果是 1813，或 ERROR_RESOURCE_TYPE_NOT_FOUND。在同一资源句柄上为位图或 LoadString 调用 LoadImage 可以正常工作，并且确实，我的字符串和位图会出现在适当的位置。

我注意到：如果我尝试通过打开应用程序的 DLL 来设置快捷方式的图标，Windows 7 没有问题，但 Windows XP 报告该文件不包含图标。如果我将它们复制过来，XP 自己加载 ico 文件没有问题，所以我不认为它们的格式不好，除非资源编译器以某种方式破坏它们。如果我查看资源编辑器中的图标，它应该显示为 16x16 32 位 BMP 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:19:34.607

当您创建 MUI 解决方案时，您的资源在与语言无关的 DLL（通常包含图标、清单等）和特定于语言的 DLL（通常包含字符串、对话框等）之间进行拆分。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ee845043%28v=vs.85%29.aspx#platform_requirements)：“Windows Vista 之前的资源加载函数（例如 LoadString、LoadIcon、LoadBitmap、FormatMessage 等）不支持 MUI。”

您的字符串和图标可能不在同一个 DLL 中，XP 不会去寻找它们。我链接到的文章解释了如何使 MUI 在 Windows XP 上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T22:01:15.040

我的问题是由VS2012引起的。我不确定使用 VS2010 工具在 VS2010 中构建资源 DLL 与使用 VS2010 工具在 VS2012 中构建它们之间有什么区别，但有一个。

# php - PHP 返回额外的行返回

> ID：11111898
> 
> 赞同：1
> 
> 时间：2012-06-20T02:03:54.547
> 
> 标签：php, post

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T02:07:53.917

No, this is not by design. You have three newline output.

Try to delete the close tag of php `?>`, if you don't have any html after php code.

Another way is just put `exit;` right after `echo`, you won't get newline again.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:29:14.750

... right below your

```
echo 'ok'; 
```

paste another snippet:

```
echo '--------new line------'; 
```

if the gap (extra returns) show between your first echo and the -----new line----- it would be more than strange:) However if it shows below the ------new line----- you have probably some extra HTML text (tags) below your PHP statement.

# svn - 在 SVN 中重新集成分支后跟踪提交日志的最佳方法是什么？

> ID：11111907
> 
> 赞同：1
> 
> 时间：2012-06-20T02:04:59.020
> 
> 标签：svn, version-control, project-management, cornerstone

我在SVN方面有一些经验。我们在 iOS Xcode 开发中使用 Cornerstone 作为我们的 SVN 客户端。

按照规范，对于每个项目，我们都有分支/标签/主干。我们决定让我们的主干分支拥有最新发布的稳定代码（通常是 App Store 版本）。

我们还决定有一个名为“main”的分支，它将是 Adhoc 发布的代码。“开发”分支合并所有开发人员的更改和每个开发人员的每个分支。

在实现功能或修复错误后，开发人员会将其分支合并到开发分支中。从开发分支，主分支将被合并。以此类推。

不幸的是，在我们执行“重新集成”分支后，在开发者分支中完成的所有提交日志都将丢失（以便获得所有开发者合并更改的干净副本）

那么，对于我们来说，在跟踪提交日志的同时能够重新分支以从所有其他开发人员那里获取合并更改的最佳实践是什么？

如果有一种方法可以从 Cornerstone 做到这一点，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T02:10:49.103

重新集成并提交后，[阻止该提交](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.advanced.html#svn.branchmerge.advanced.reintegratetwice)合并回您的分支。这样你就可以保持分支活着，而且你不需要覆盖它的历史。

# javascript - JavaScript 可以通过特定的本地端口建立出站 TCP 连接吗？

> ID：11111910
> 
> 赞同：0
> 
> 时间：2012-06-20T02:05:17.760
> 
> 标签：javascript, networking

JavaScript 有没有办法查询用于连接服务器的本地端口？另外，我可以通过指定本地端口号连接到服务器吗？

Java中的anology是

```
Socket socket = new Socket(0);
int localPort = socket.getLocalPort(); 
```

我认为让javascript访问系统资源会有安全问题。只是想确定是否有办法。如果这在 javascript 中是不可能的，是否有任何其他方法可以通过特定端口建立出站 TCP 连接？

# asp.net - IIS 7.5 - 403 禁止

> ID：11111911
> 
> 赞同：27
> 
> 时间：2012-06-20T02:05:30.883
> 
> 标签：asp.net, windows, iis, iis-7.5

好的，我已经搜索了在线资源并应用了所有建议的解决方案。

我正在使用“ASP.NET v4.0”池在 IIS 7.5 下的 Windows Server 2008 R2 上建立一个简单的网站。我将其设置为具有不同根目录的默认网站下的应用程序。我不断收到 403 Forbidden 错误。

我有：

1.  使用 aspnet_regiis.exe -i 安装了 asp.net（多次）
2.  确保我的根目录（物理路径）对“IIS_IUSR”和“IUSR”用户具有权限。
3.  确保启用“匿名身份验证”并设置为“应用程序池标识”
4.  我已经多次重新启动 IIS
5.  我已经检查并仔细检查了所有其他配置。

奇怪的是我在默认网站下还有另一个应用程序，它工作得很好。

任何建议都会有所帮助。除非我遗漏了一些明显的东西，否则这不应该那么难。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-20T13:18:10.067

好的，我很尴尬，但忽略的是“需要 SSL”是默认选中的，那是我没有检查的地方。我猜这是因为 SSL 绑定到默认网站。删除该检查使其工作。

希望这会对其他人有所帮助。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-06-04T08:57:25.530

哈哈，你觉得这很尴尬！这可能是我安装的第 1000 个网络服务器...... 30 分钟的 403 秒！！我想不通。那里有一个存根 default.asp.. 权限都正确... 一切！

我不顾一切地打开了“目录”浏览。

default.asp.txt 坐在那里...... DOH。

需要关闭“已知文件类型”...为什么还是那样设置？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-16T11:52:45.677

另一个可能导致 403 错误的问题：

`Global.asax`文件丢失。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-11-10T20:17:45.700

对我来说，答案在 IIS 7.5 的处理程序映射部分

将以下内容添加到 web.config 使所有 aspx 页面都能正常工作

```
<configuration>
...
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers accessPolicy="Read, Script" />
    ... 
  </system.webServer>
</configuration> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-20T02:09:11.353

`Network Service`向 NTFS 文件夹中的用户授予权限

还要检查 .Net 授权规则：

![在此处输入图像描述](../Images/21e30202180f7fcd97da5d4e91700e12.png)

![在此处输入图像描述](../Images/d3562f55848a89c90d73a8a687ff4804.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-21T11:06:26.847

检查 IP 地址限制是否没有阻止请求。可以在日志中检查这一点。

（这是我尴尬的原因！）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-31T05:06:25.167

我的更尴尬。

右键单击文件夹，`Remove READ only attribute`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-26T18:29:37.500

对我来说，重写规则有一个退化`Web.config`。`C:\inetpub\wwwroot`删除它解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-27T15:43:04.977

我在 Windows 7 上遇到问题，令人惊讶的是它在安装 Service Pack 1 后得到了修复

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-13T04:32:42.493

如果为网站设置 FTP 并尝试更改网站上 FTP 的默认目录，您也可能会遇到此问题。

据我所知：

管理 FTP 站点 -> 高级设置 -> 物理路径

是一样的

管理网站 -> 高级设置 -> 物理路径

更改一个将更改另一个，并可能在工作站点上导致 403。

# android - gridview android的第一项的更大图像

> ID：11111917
> 
> 赞同：14
> 
> 时间：2012-06-20T02:06:15.827
> 
> 标签：android, gridview

我是这里的新用户，并且正在使用请求自定义滚动视图的 android 应用程序（如下面的链接所示）。除了第一个图像外，它与网格视图非常相似。我尝试使用添加一个大的图像视图和网格视图。但它失败了。有人有什么建议吗？

![在此处输入图像描述](../Images/2d8999261cbc9788d206773083dff201.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-20T03:09:15.953

我设法使用以下代码获得以下图像： ![在此处输入图像描述](../Images/7064f386156ad5599a04b0f32609f994.png)

我将代码移至此[博客：](http://sudarnimalan.blogspot.sg/2012/06/android-bigger-image-for-first-item-of.html)

```
// please check this part.
            @Override
            public View getView(int arg0, View arg1, ViewGroup arg2) {
                ImageView imageView;
                if(arg1==null){
                    imageView = new ImageView(DemoGridViewActivity.this){
                        @Override
                        protected void onMeasure(int widthMeasureSpec,
                                int heightMeasureSpec) {
                            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
                            setMeasuredDimension(getMeasuredWidth(), getMeasuredWidth());
                        }
                    };
                }else{
                    imageView = (ImageView) arg1;
                }

                imageView.setLayoutParams(new GridView.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));
                imageView.setBackgroundColor(Color.BLUE);
                imageView.setScaleType(ScaleType.FIT_XY);
                Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
//according to the position return proper imageview with bitmap
//for case 0 - top-left part
//for case 1 - top-right
//for case 5 - bottom-left
//for case 6 - bottom-right

                switch(arg0){
                case 0:
                    imageView.setImageBitmap(Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth()/2, bitmap.getHeight()/2));
                    imageView.setBackgroundColor(Color.RED);
                    return imageView;
                case 1:
                    imageView.setImageBitmap(Bitmap.createBitmap(bitmap, bitmap.getWidth()/2, 0, bitmap.getWidth()/2, bitmap.getHeight()/2));
                    imageView.setBackgroundColor(Color.GREEN);
                    return imageView;
                case 5:
                    imageView.setImageBitmap(Bitmap.createBitmap(bitmap, 0, bitmap.getHeight()/2, bitmap.getWidth()/2, bitmap.getHeight()/2));
                    imageView.setBackgroundColor(Color.YELLOW);
                    return imageView;
                case 6:
                    imageView.setImageBitmap(Bitmap.createBitmap(bitmap, bitmap.getWidth()/2, bitmap.getHeight()/2, bitmap.getWidth()/2, bitmap.getHeight()/2));
                    imageView.setBackgroundColor(Color.MAGENTA);
                    return imageView;
                default:
                    imageView.setImageResource(R.drawable.ic_launcher);
                    return imageView;
                }
            }

        }
    }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <GridView
            android:id="@+id/gridView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:numColumns="5" >
        </GridView>

</LinearLayout> 
```

# algorithm - 循环迭代分析第 2 部分

> ID：11111918
> 
> 赞同：2
> 
> 时间：2012-06-20T02:06:34.927
> 
> 标签：algorithm, big-o, analysis

在我开始之前澄清一下，这不是家庭作业，而是我正在为考试而学习。我已经给出了以下问题的解决方案。我想要一些建设性的反馈。

感谢在我上一个问题中留下它的人的反馈。下面我给出了为什么我认为答案是这样的详细解决方案。

根据 O(n) 表示法查找运行时间。

```
int y=0;
for(int j=1; j*j<=n; j++)// runs from 1->j=sqrt(n) times
    y++; //constant - c 
```

因此，运行时间为`c x n^1/2 = O(n^1/2)`

Q2。

```
int b=0;
for(int i=n; i>0; i--) //runs from n->1
    for(int j=0; j<i; j++) // runs from 0 to i
        b=b+5; //constant 
```

对于`j (1,2...,n)`内部循环的每个值，运行 i 次常量 = `ci`。-`nc+(n-1)+...+2c+1c = c(n+..+2+1) = cn(n+1)/2 = O(n^2)`运行时间。

Q3。

```
int y=1;
int j=0;
for(j=1; j<=2n; j=j+2) //runs 2n times, increments by 2
    y=y+i; //constant c

int s=0;
for(i=1; i<=j; i++) // not a nested for loop, therefore runs n times
    s++; 
```

运行时间：`O(n)`

Q4。

```
int x=0; //constant
for(int i=1; i<=n; i=i*3) //runs log_3 (n) times
{ 
    if(i%2 != 0) // for values above will always be 1

    for(int j=0; j<i; j++) // runs from 0 to log_3(n)
        x++;
} 
```

所以我们有`clog_3(n)xclog_3(n) = O(log_3(n))^2`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:37:17.107

好的，前三个是毫无疑问的（我相信，都是正确的）。但是第四季度就有问题了。

你的回答有点不正确。结果肯定不是`O(log_3(n))^2`。案例在内部循环中，它只发生了`O(log_3(n))`几次。而且，不是来自，`0-log_3(n)`而是来自`0-m`（`m`显然与 相关`i`）。

假设以上所有，我认为正确的答案是`O(mlog3(n))`。但是如果有人认为我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T01:14:58.373

```
The loops can be thought of as two summations

Summation ( i from 1 to lg_3(n) ) * Summation (j = 0 to i-1) [1 operation]
= Summation (i = 1 to lg_3 (n) (i)
= 1 + 2 + 3....lg_3(n) terms
= lg_3(n) [ lg_3(n) + 1] /2
= O (lg_3(n)] ^2 
```

# javascript - 从空格中提取数字

> ID：11111919
> 
> 赞同：0
> 
> 时间：2012-06-20T02:06:50.633
> 
> 标签：javascript, regex

值是这样的：`12 23 345 3454 21`.

我需要从中获取数字并存储到数组中，所以我的数组应该看起来像 `values = new Array(12,23,345,3454,21);`.

我的问题是我可以删除空格，但它是`1223345345421`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T02:08:23.253

您可以使用`split(" ")`空格分割字符串。

为了更彻底，您应该修剪前导和尾随空格，并沿多个空格字符拆分：

```
> var numbers_in_string = "   12   23 345 3454    21    ";
> var numbers_in_array = numbers_in_string.trim().split(/\s+/);
> console.log(numbers_in_arrays)
["12", "23", "345", "3454", "21"] 
```

**编辑**

正如@Sangdol 所提到的，trim() 可能在 IE9 中不起作用，因此您可以使用包含[这些解决方案之一](https://stackoverflow.com/questions/2308134/trim-in-javascript-not-working-in-ie)来将 trim() 功能添加到 IE9。或者只是替换`trim()`为`replace(/^\s+|\s+$/g, '')`. 这两种解决方案都可以作为跨浏览器兼容性的解决方法。

```
.replace(/^\s+|\s+$/g, '').split(/\s+/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:09:15.757

如果它是相同的模式，你可以使用`split()`：

```
var arr = '12 23 345 3454 21'.split(' ');
console.log(arr); // [12, 23, 345, 3454, 21] 
```

**文件：**

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T03:40:44.157

作为拆分的替代方法，您可以使用匹配：

```
' 12 23   345   3454   21 '.match(/\d+/g); //12,23,345,3454,21 
```

请注意，这更特定于您尝试提取的模式，可能适合或不适合。您只会获得匹配的模式，因此不会返回任何介入的不匹配（包括空格）。

# python - 将 csv 写入文件

> ID：11111920
> 
> 赞同：2
> 
> 时间：2012-06-20T02:06:58.947
> 
> 标签：python, csv

我需要将我必须的代码的输出写入一个文件，以便稍后调用它。我需要调用输出而不是原始 test1 文件。我拥有的使输出的代码在下面并且工作正常，我只是无法将它放到稍后可以调用的文件中。

```
 import csv 

 file1  = open('C:/Users/Gallatin/Documents/adamenergy.csv',"r") #Open CSV File in Read Mode 
 reader = csv.reader(file1)      #Create reader object which iterates over lines 

 class Object:                   #Object to store unique data 
  def __init__(self, name, produce, amount): 
    self.name = name 
    self.produce = produce 
    self.amount = amount 

 rownum = 0 #Row Number currently iterating over 
 list = []  #List to store objects 

 def checkList(name, produce, amount): 

    for object in list:  #Iterate through list         
    if object.name == name and object.produce == produce:  #Check if name and produce combination exists 
        object.amount += int(amount) #If it does add to amount variable and break out 
        return 

newObject = Object(name, produce, int(amount)) #Create a new object with new name, produce, and amount 
list.append(newObject)  #Add to list and break out 

  for row in reader:  #Iterate through all the rows 
   if rownum == 0:  #Store header row seperately to not get confused 
    header = row 
  else: 
    name = row[0]  #Store name 
    produce = row[1]  #Store produce 
    amount = row[2]  #Store amount 

    if len(list) == 0:  #Default case if list = 0 
        newObject = Object(name, produce, int(amount)) 
        list.append(newObject) 
    else:  #If not... 
        checkList(name, produce, amount) 

rownum += 1 

 for each in list:
   print each.name,each.produce,each.amount 
```

通过打印，它会正确生成我想要的输出，但我需要将此输出写入文件，以便稍后使用 ndiff 调用它以与另一个 csv 文件进行比较我将通过上面类似的代码运行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T02:12:39.717

只需将输出重定向到文件。例如，

C:> python myfile.py > output.txt

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T02:18:48.923

您可以采取几种方法：

1.  您可以以不同的方式运行程序；而不是运行：

    ```
    ./generate 
    ```

    跑

    ```
    ./generate > output_file.csv 
    ```

    这使用 shell 重定向将标准输出保存到您指定的任何文件。这非常灵活并且很容易构建到未来的脚本中。如果您接受标准输入或通过命名文件的输入，那就特别棒了，它使您的工具非常灵活。

2.  您可以修改您的程序以[写入特定文件](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)。使用以下内容打开文件：

    ```
    output = open("output.csv", "w") 
    ```

    然后使用沿线的字符串编写输出

    ```
    output.write(each.name + "," + str(each.produce)  + "," + str(each.amount)) 
    ```

3.  您也可以使用相同的[`csv`模块来*写入*文件](http://docs.python.org/library/csv.html#module-contents)。这可能是长期使用的更好方法，因为它会自动处理复杂的输入情况，包括`,`字符和其他困难的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T02:14:19.333

在文件顶部，打开您的输出文件：

```
outf = open("my_output_file.csv", "wb") 
```

然后稍后：

```
print >>outf, each.name,each.produce,each.amount 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T02:25:13.940

只需使用 CSV 编写器

```
add below code:
csvWriter = csv.writer(open('csvFileSource.csv', 'wb'), delimiter=',', quotechar='|',quoting=csv.QUOTE_MINIMAL)
      csvWriter.writerow(each.name + each.produce + each.amount) 
```

完整代码：

```
import csv

file1  = open('csvFileSource.csv',"r") #Open CSV File in Read Mode
reader = csv.reader(file1)      #Create reader object which iterates over lines

class Object:                   #Object to store unique data
    def __init__(self, name, produce, amount):
        self.name = name
        self.produce = produce
        self.amount = amount

rownum = 0 #Row Number currently iterating over
list = []  #List to store objects

def checkList(name, produce, amount):
    for object in list:  #Iterate through listif object.name == name and object.produce == produce:  #Check if name and produce combination exists
        object.amount += int(amount) #If it does add to amount variable and break out
        return

newObject = Object(name, produce, int(amount)) #Create a new object with new name, produce, and amount
list.append(newObject)  #Add to list and break out

for row in reader:  #Iterate through all the rows
    if rownum == 0:  #Store header row seperately to not get confused
            header = row
    else:
        name = row[0]  #Store name
        produce = row[1]  #Store produce
        amount = row[2]  #Store amount

        if len(list) == 0:  #Default case if list = 0
            newObject = Object(name, produce, int(amount))
            list.append(newObject)
        else:  #If not...
            checkList(name, produce, amount)

rownum += 1
csvWriter = csv.writer(open('csvFileDestination.csv', 'wb'), delimiter=',', quotechar='|',quoting=csv.QUOTE_MINIMAL)
for each in list:
    csvWriter.writerow(each.name + each.produce + each.amount) 
```

# svn - 如何使用静态检查工具检查两个代码版本之间的变化？

> ID：11111922
> 
> 赞同：1
> 
> 时间：2012-06-20T02:07:26.027
> 
> 标签：svn

如何使用静态检查工具检查两个代码版本之间的变化？例如，静态检查工具是 FlexPMD；版本管理工具是svn。当使用svn找出两个版本之间的部分更改时，如何使用FlexPMD检查更改的部分。还是存在直接包含版本控制和静态检查工具？

# c# - 如何完全刷新 ASP.NET 页面以便再次运行 Page_Load？

> ID：11111928
> 
> 赞同：1
> 
> 时间：2012-06-20T02:08:44.670
> 
> 标签：c#, asp.net, caching, browser

我有一个 ASP.NET 页面，其中动态设置了 iframe src：

```
<iframe id="specialframe" src="<%= IframeSrc %>"></iframe> 
```

和代码隐藏：

```
internal string IframeSrc { get; set; }

protected void Page_Load(object sender, EventArgs e)
{
    IframeSrc = SpecialService.GetNewUrl();
} 
```

`SpecialService`是一种第三方服务，在调用时会返回一个一次性使用的 URL，如下所示：

```
http://www.specialservice.com/oneTimeUseId=fh8396123lkjufgh49 
```

出于安全考虑，此 ID 在过期前只能使用一次。然而，这导致了一个问题。

我第一次在浏览器中显示页面时，它会正确加载 iframe。但是，如果我点击**refresh**，我将在 iframe 中收到一条错误消息，因为它正在尝试使用相同的一次性使用 ID。如果我**Ctrl+F5**刷新以强制清除缓存，它可以正常工作，但我不能告诉我的用户每次都这样做。

我的问题是，是否可以强制浏览器从不使用缓存并**始终**从服务器请求新副本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:19:11.127

您需要正确设置过期和缓存页面，以便浏览器始终必须从服务器请求页面。

这个问题可能是一个好的开始[http://msdn.microsoft.com/en-us/library/y18he7cw.aspx](http://msdn.microsoft.com/en-us/library/y18he7cw.aspx)。

您需要无缓存（并且可能在过去设置过期，也可能是 SetMaxAge）：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(DateTime.Now.AddMinutes(-30)); 
```

# in-app-purchase - 如何将具有自动续订订阅的 iOS 应用程序转换为非续订订阅？

> ID：11111930
> 
> 赞同：2
> 
> 时间：2012-06-20T02:09:06.533
> 
> 标签：in-app-purchase, transition, subscription

我的带有自动续订订阅的 iOS 应用更新被拒绝，原因是我必须切换到非续订订阅。我可以这样做，但我不清楚如何过渡。我有很多订阅者自动续订订阅，那么当用户更新到非续订版本然后他们当前的订阅自动续订时会发生什么？我还必须像以前一样处理这些订阅吗？或者是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:14:04.020

以下是一些基本准则： - 不要让任何新用户使用 Auto 订阅。- 如果你还没有，你应该使用你的服务器来存储和验证收据，就像从应用程序中做的那样。- 当有人购买不可续订时，您计算到期时间。不是苹果。-`restoreCompletedTransactions`不适用于非续订订阅 (NRS)。- Apple 要求您建立一个系统来在一个人的多个设备上同步订阅。与 ARS 不同，NRS 不会自动执行此操作。- 他们要求你实现一个**可选的**用户/密码系统来完成此操作。- 我因未正确遵守而被拒绝。问我是否有问题。- 您可能知道，只有用户可以取消自动续订订阅。不是你。除非苹果想介入以帮助过渡。但是您可以鼓励人们取消他们是 ARS 并购买 NRS。它可能必须分两步完成。如果他们过渡，您甚至可以免费为他们提供 2 周的时间。您现在可以执行此操作，因为您可以使用 NRS 计算到期日期。不是苹果。- 因为你必须让这两种类型运行一段时间，直到每个人都被切换。继续遵守 ARS 到期日期是公平的。因此，您应该从 Apple 提供的 ARS 到期时间开始计算到期日期，然后添加已购买的任何 NRS 持续时间。

# objective-c - NSAlert 显示错位的按钮

> ID：11111939
> 
> 赞同：0
> 
> 时间：2012-06-20T02:11:06.087
> 
> 标签：objective-c, ios, macos, cocoa, cocoa-design-patterns

我有一个显示 NSAlert 窗口的多线程 OSX 应用程序。大多数情况下，UI 看起来不错，但有时它会通过放错看起来非常难看的按钮来破坏 UI。

![在此处输入图像描述](../Images/e03e58851cdf03746c42b73f60202881.png)

因为我无法阻止主线程并且不想将其显示为模态。我正在使用以下代码。

```
NSAlert* alert = [NSAlert alertWithMessageText:title defaultButton:defaultBtn alternateButton:alterBtn otherButton:otherBtn informativeTextWithFormat:msg];
[alert setAlertStyle:style];

BOOL isMainThread = (dispatch_get_current_queue() == dispatch_get_main_queue());

if(isMainThread)
    [alert layout];
else
{
    dispatch_sync(dispatch_get_main_queue(), ^{
        [alert layout];
    });
}

NSModalSession session = [NSApp beginModalSessionForWindow:alert.window];
__block NSUInteger response;

for (;;) {
    if(isMainThread)
    {
        response = [NSApp runModalSession:session];
    }
    else
    {
        dispatch_sync(dispatch_get_main_queue(), ^{
            response = [NSApp runModalSession:session];
        });
    }

    if(response != NSRunContinuesResponse)
        break;
} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:58:03.460

哇，那是您那里的一些严重混乱的代码。

*   你是如何决定打电话`-layout`是一个好主意的必要条件？
*   AppKit 不是线程安全的；你不应该`-beginModalSessionForWindow:`从除主线程之外的任何线程调用
*   `NSAlert`并非旨在让您为其运行模式会话，或接管它的演示

相反，`NSAlert`直接在主线程上调用`-runModal`或者`-beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:`

# php - 显示空白幻灯片的 Jquery 滑块

> ID：11111945
> 
> 赞同：0
> 
> 时间：2012-06-20T02:11:43.900
> 
> 标签：php, javascript, jquery, wordpress

我正在研究[http://lobounce.com.s138810.gridserver.com/](http://lobounce.com.s138810.gridserver.com/)并且使用 SlidesJS 的滑块遇到了一些问题。出于某种原因，它会显示一张不应显示的空白幻灯片。我检查了一下，看起来好像一个列表元素被添加到了分页类中，但我不知道为什么。

这是 Slider.php

```
<div id="slides">
    <ul class="slides_container">
        <?php $query = new WP_Query(array('posts_per_page' => '4','post_type' => 'featured'));
            if ( $query->have_posts() ) : while ( $query->have_posts() ) : $query->the_post(); 
            $video_source = get_post_meta($post->ID, 'video_meta_box_source', true);
            $video_id = get_post_meta($post->ID, 'video_meta_box_videoid', true);
            if(($video_source == "vimeo") && !empty($video_id)){ ?>
                <iframe src="http://player.vimeo.com/video/<?php echo $video_id; ?>?title=0&amp;portrait=0&amp;color=e275c7" width="822" height="292" frameborder="0" webkitAllowFullScreen allowFullScreen></iframe>
            <?php } elseif(( $video_source == "youtube") && !empty($video_id)){ ?>
                <iframe width="822" height="292" src="http://www.youtube.com/embed/<?php echo $video_id; ?>" frameborder="0" allowfullscreen></iframe>
            <?php  }
            $target_link =  get_permalink();
            $post_behaviour = get_post_meta($post->ID, 'slider_meta_box_behaviour', true);  
            if ($post_behaviour == 'external_link')
            {
                $target_link = get_post_meta($post->ID, 'slider_meta_box_target_link', true);
            } 
            else if ($post_behaviour == 'no_link')
            {
                $target_link = false;
            }

            if(has_post_thumbnail()) {
            ?>
            <li>
            <?php
                if($target_link)
            {
                ?>
                <a href="<?php echo $target_link; ?>">
                    <?php gorilla_img('slider');?>
                </a>
            <?php 
            } else { 
            ?>  
                <?php gorilla_img('slider');?>
            <?php 
                } 
            ?>
            </li>
            <?php
            } else{ ?> 
            <li>
            <?php
                if($target_link)
            {
                ?>
            <a href="<?php echo $target_link; ?>">
            <?php gorilla_img('slider');?>
            </a>
            <?php 
            } else { 
            ?>  
                <?php gorilla_img('slider');?>
            <?php 
                } 
            ?>
            </li>
            <?php } endwhile; endif;?>
    </ul>
</div><!-- slider closed --> 
```

slides.min.jquery.js：

```
/*
* Slides, A Slideshow Plugin for jQuery
* Intructions: http://slidesjs.com
* By: Nathan Searles, http://nathansearles.com
* Version: 1.1.9
* Updated: September 5th, 2011
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
(function(a){a.fn.slides=function(b){return b=a.extend({},a.fn.slides.option,b),this.each(function(){function w(g,h,i){if(!p&&o){p=!0,b.animationStart(n+1);switch(g){case"next":l=n,k=n+1,k=e===k?0:k,r=f*2,g=-f*2,n=k;break;case"prev":l=n,k=n-1,k=k===-1?e-1:k,r=0,g=0,n=k;break;case"pagination":k=parseInt(i,10),l=a("."+b.paginationClass+" li."+b.currentClass+" a",c).attr("href").match("[^#/]+$"),k>l?(r=f*2,g=-f*2):(r=0,g=0),n=k}h==="fade"?b.crossfade?d.children(":eq("+k+")",c).css({zIndex:10}).fadeIn(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+l+")",c).css({display:"none",zIndex:0}),d.children(":eq("+k+")",c).css({zIndex:0}),b.animationComplete(k+1),p=!1)}):d.children(":eq("+l+")",c).fadeOut(b.fadeSpeed,b.fadeEasing,function(){b.autoHeight?d.animate({height:d.children(":eq("+k+")",c).outerHeight()},b.autoHeightSpeed,function(){d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing)}):d.children(":eq("+k+")",c).fadeIn(b.fadeSpeed,b.fadeEasing,function(){a.browser.msie&&a(this).get(0).style.removeAttribute("filter")}),b.animationComplete(k+1),p=!1}):(d.children(":eq("+k+")").css({left:r,display:"block"}),b.autoHeight?d.animate({left:g,height:d.children(":eq("+k+")").outerHeight()},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1}):d.animate({left:g},b.slideSpeed,b.slideEasing,function(){d.css({left:-f}),d.children(":eq("+k+")").css({left:f,zIndex:5}),d.children(":eq("+l+")").css({left:f,display:"none",zIndex:0}),b.animationComplete(k+1),p=!1})),b.pagination&&(a("."+b.paginationClass+" li."+b.currentClass,c).removeClass(b.currentClass),a("."+b.paginationClass+" li:eq("+k+")",c).addClass(b.currentClass))}}function x(){clearInterval(c.data("interval"))}function y(){b.pause?(clearTimeout(c.data("pause")),clearInterval(c.data("interval")),u=setTimeout(function(){clearTimeout(c.data("pause")),v=setInterval(function(){w("next",i)},b.play),c.data("interval",v)},b.pause),c.data("pause",u)):x()}a("."+b.container,a(this)).children().wrapAll('<div class="slides_control"/>');var c=a(this),d=a(".slides_control",c),e=d.children().size(),f=d.children().outerWidth(),g=d.children().outerHeight(),h=b.start-1,i=b.effect.indexOf(",")<0?b.effect:b.effect.replace(" ","").split(",")[0],j=b.effect.indexOf(",")<0?i:b.effect.replace(" ","").split(",")[1],k=0,l=0,m=0,n=0,o,p,q,r,s,t,u,v;if(e<2)return a("."+b.container,a(this)).fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()}),a("."+b.next+", ."+b.prev).fadeOut(0),!1;if(e<2)return;h<0&&(h=0),h>e&&(h=e-1),b.start&&(n=h),b.randomize&&d.randomize(),a("."+b.container,c).css({overflow:"hidden",position:"relative"}),d.children().css({position:"absolute",top:0,left:d.children().outerWidth(),zIndex:0,display:"none"}),d.css({position:"relative",width:f*3,height:g,left:-f}),a("."+b.container,c).css({display:"block"}),b.autoHeight&&(d.children().css({height:"auto"}),d.animate({height:d.children(":eq("+h+")").outerHeight()},b.autoHeightSpeed));if(b.preload&&d.find("img:eq("+h+")").length){a("."+b.container,c).css({background:"url("+b.preloadImage+") no-repeat 50% 50%"});var z=d.find("img:eq("+h+")").attr("src")+"?"+(new Date).getTime();a("img",c).parent().attr("class")!="slides_control"?t=d.children(":eq(0)")[0].tagName.toLowerCase():t=d.find("img:eq("+h+")"),d.find("img:eq("+h+")").attr("src",z).load(function(){d.find(t+":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){a(this).css({zIndex:5}),a("."+b.container,c).css({background:""}),o=!0,b.slidesLoaded()})})}else d.children(":eq("+h+")").fadeIn(b.fadeSpeed,b.fadeEasing,function(){o=!0,b.slidesLoaded()});b.bigTarget&&(d.children().css({cursor:"pointer"}),d.children().click(function(){return w("next",i),!1})),b.hoverPause&&b.play&&(d.bind("mouseover",function(){x()}),d.bind("mouseleave",function(){y()})),b.generateNextPrev&&(a("."+b.container,c).after('<a href="#" class="'+b.prev+'">Prev</a>'),a("."+b.prev,c).after('<a href="#" class="'+b.next+'">Next</a>')),a("."+b.next,c).click(function(a){a.preventDefault(),b.play&&y(),w("next",i)}),a("."+b.prev,c).click(function(a){a.preventDefault(),b.play&&y(),w("prev",i)}),b.generatePagination?(b.prependPagination?c.prepend("<ul class="+b.paginationClass+"></ul>"):c.append("<ul class="+b.paginationClass+"></ul>"),d.children().each(function(){a("."+b.paginationClass,c).append('<li><a href="#'+m+'">'+(m+1)+"</a></li>"),m++})):a("."+b.paginationClass+" li a",c).each(function(){a(this).attr("href","#"+m),m++}),a("."+b.paginationClass+" li:eq("+h+")",c).addClass(b.currentClass),a("."+b.paginationClass+" li a",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$"),n!=q&&w("pagination",j,q),!1}),a("a.link",c).click(function(){return b.play&&y(),q=a(this).attr("href").match("[^#/]+$")-1,n!=q&&w("pagination",j,q),!1}),b.play&&(v=setInterval(function(){w("next",i)},b.play),c.data("interval",v))})},a.fn.slides.option={preload:!1,preloadImage:"/img/loading.gif",container:"slides_container",generateNextPrev:!1,next:"next",prev:"prev",pagination:!0,generatePagination:!0,prependPagination:!1,paginationClass:"pagination",currentClass:"current",fadeSpeed:350,fadeEasing:"",slideSpeed:350,slideEasing:"",start:1,effect:"slide",crossfade:!1,randomize:!1,play:0,pause:0,hoverPause:!1,autoHeight:!1,autoHeightSpeed:350,bigTarget:!1,animationStart:function(){},animationComplete:function(){},slidesLoaded:function(){}},a.fn.randomize=function(b){function c(){return Math.round(Math.random())-.5}return a(this).each(function(){var d=a(this),e=d.children(),f=e.length;if(f>1){e.hide();var g=[];for(i=0;i<f;i++)g[g.length]=i;g=g.sort(c),a.each(g,function(a,c){var f=e.eq(c),g=f.clone(!0);g.show().appendTo(d),b!==undefined&&b(f,g),f.remove()})}})}})(jQuery) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:35:27.507

我无法确定这是否是您的问题，但即使不是，最终也会导致其他问题：

在您的页面中，您加载了一个不存在的文件[http://lobounce.com.s138810.gridserver.com/wp-content/themes/DanceFloorV2/js/jquery.cycle.all.js.js](http://lobounce.com.s138810.gridserver.com/wp-content/themes/DanceFloorV2/js/jquery.cycle.all.js.js) （注意 .js .js 最后，我只用了一个 .js 进行了尝试，然后找到了该文件，看起来像一个简单的错字）。

I'd assume that missing .js file then leads to the next error I see about your script trying to call a method "cycle" that doesn't exist (because the file with the method isn't loaded). However, we won't know if that's actually the problem until you fix it, so can't tell you for sure.

# ruby-on-rails - 重定向后登录用户时出现奇怪的错误

> ID：11111949
> 
> 赞同：2
> 
> 时间：2012-06-20T02:12:41.557
> 
> 标签：ruby-on-rails, ruby, authentication

我想在用户创建帐户后自动登录。我的应用程序是多租户应用程序，其中帐户在子域级别实现：*account_name.myapp.com*

我有一个`Account`模型`has_many :owners, through: :ownerships`。我正在使用`accepts_nested_attributes_for`一种形式创建帐户和用户模型。

我写了一个`before_filter`来处理登录，但我收到了一个`wrong number of arguments (1 for 0)`错误。我不确定如何调试它。

创建 Account 和 User 模型后，我会重定向到 Accounts#show——错误发生的地方。我正在传递一个`sign_in_token`参数。使用 before_filter，我从令牌加载用户并`sign_in`在其上调用方法。

```
class AccountsController < ApplicationController
  before_filter :sign_in,  only: :show

  def show
    @account ||= Account.find_by_subdomain!(request.subdomain)
  end

  def new
    @account = Account.new
    @owner   = @account.owners.build
  end

  def create
    @account = Account.new(params[:account])
    if @account.save
      redirect_to root_url(subdomain: @account.subdomain, sign_in_token: @account.owners.first.sign_in_token)
    else
      render 'new'
    end
  end

  private

  def sign_in
    if params[:sign_in_token]
      user = User.find_by_sign_in_token(params[:sign_in_token])
      sign_in user
    end
  end
end 
```

我的`sign_in`方法正常工作，并且我已经编写了测试。它只在这种情况下中断。

```
 def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    current_user = user
  end 
```

错误：

```
ArgumentError in AccountsController#show

wrong number of arguments (1 for 0) 
```

堆

```
app/controllers/accounts_controller.rb:31:in `sign_in'
app/controllers/accounts_controller.rb:34:in `sign_in'
activesupport (3.2.3) lib/active_support/callbacks.rb:429:in `_run__3150241459892085714__process_action__1436783733275598907__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/mapper.rb:40:in `call'
journey (1.0.3) lib/journey/router.rb:68:in `block in call'
journey (1.0.3) lib/journey/router.rb:56:in `each'
journey (1.0.3) lib/journey/router.rb:56:in `call'
actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__1668768892136358850__call__837556511977231927__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/home/mohamad/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/mohamad/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/mohamad/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:19:31.073

您与正在调用的函数具有相同的名称

```
def **sign_in**
  if params[:sign_in_token]
    user = User.find_by_sign_in_token(params[:sign_in_token])
    **sign_in user**
  end
end 
```

所以 sign_in 用户试图调用它定义的函数，但带有一个参数。可能不是你的意思。

至于如何调试，一旦你发布了堆栈跟踪，就很明显了。 `sign_in user`当没有预期的时候（1/0）正在传递一个参数......原因是它上面的三行。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:20:22.680

您已经在控制器中定义了一个`sign_in`方法，该方法隐藏了`sign_in`您正在使用的身份验证库提供的方法，因此您`sign_in`不采用参数，但原始参数却采用。解决此问题的方法是将您的方法重命名为其他名称：

```
class AccountsController < ApplicationController
  before_filter :sign_in_user,  only: :show

  def show
    @account ||= Account.find_by_subdomain!(request.subdomain)
  end

  def new
    @account = Account.new
    @owner   = @account.owners.build
  end

  def create
    @account = Account.new(params[:account])
    if @account.save
      redirect_to root_url(subdomain: @account.subdomain, sign_in_token: @account.owners.first.sign_in_token)
    else
      render 'new'
    end
  end

  private

  def sign_in_user
    if params[:sign_in_token]
      user = User.find_by_sign_in_token(params[:sign_in_token])
      sign_in user
    end
  end
end 
```

它现在应该可以工作了。

# php - 如何在php中将javascript函数编写为字符串？

> ID：11111950
> 
> 赞同：0
> 
> 时间：2012-06-20T02:12:42.720
> 
> 标签：php, javascript, html, string

我在 php 文件中有这样的一行：

```
<a class="hide-if-no-js" onclick="findPosts.open( 'media[]','<?php echo $post->ID ?>' ); return false;" href="#the-list">Attach</a> 
```

我需要将此行写为 php 函数中的字符串，我试过这个：

```
$output .="<a class='hide-if-no-js' onclick='findPosts.open( 'media[]','$id' ); return false;' href='#the-list'>'$linktext'</a>"; 
```

似乎围绕“媒体 []”的引用是错误的，并且使这一行的 html 混乱。有人可以帮我纠正吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:15:23.507

```
$output .= "<a class=\"hide-if-no-js\" onclick=\"findPosts.open( 'media[]','$id' ); return false;\" href=\"#the-list\">$linktext</a>"; 
```

您的 javascript 字符串使用单引号，因此 html 属性应使用双引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:18:35.943

你可以试试：

```
$output .= '<a class="hide-if-no-js" onclick="findPosts.open( \'media[]\',\'' . $id . '\' ); return false;" href="#the-list">' . $linktext . '</a>'; 
```

**或者**

```
$output .= "<a class='hide-if-no-js' onclick='findPosts.open( \"media[]\", \"$id\" ); return false;' href='#the-list'>$linktext</a>"; 
```

# asp.net - 发送到外部电子邮件失败

> ID：11111952
> 
> 赞同：0
> 
> 时间：2012-06-20T02:12:50.967
> 
> 标签：asp.net, vb.net

这是代码：

```
 Dim SmtpServer As New SmtpClient()
    Dim mail As New MailMessage()
    Dim attachment As System.Net.Mail.Attachment

    SmtpServer.Credentials = New  _
    Net.NetworkCredential("administrator@company.com", "1234")    
    SmtpServer.Port = 25
    SmtpServer.Host = "SmtpServer"

    mail = New MailMessage()
    mail.From = New MailAddress("user@company.com.my")

    mail.To.Add("recipient@external.com")

    mail.CC.Add("user1@company.com")
    mail.CC.Add("user2@company.com")

    mail.Headers.Add("Disposition-Notification-To", "user1@company.com")   'Read receipt

    mail.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure    'Fail delivery notification

    mail.Subject = "Sending Documents"

    mail.Body = "To Whom May Concern," & vbCrLf _
    & vbCrLf & "Please refer to the attachment for the documents." & vbCrLf & _
    "NOTE : This is an automatically generated email and will be sent daily."

    For Each path As String In attch
        attachment = New System.Net.Mail.Attachment(path)
        mail.Attachments.Add(attachment)
    Next

    Try
        SmtpServer.Send(mail)
        SmtpServer = Nothing

    Catch ex As Exception
        Response.Write(ex.ToString)
        Exit Sub

    End Try 
```

问题只是内部电子邮件接收，而不是外部电子邮件。代码执行期间没有显示错误。关于如何解决这个问题的任何想法？或者我需要在 Microsoft Exchange Server 上进行一些配置吗？服务器也使用 MailMarshal 进行过滤。非常感谢您提供反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:46:27.217

确保“mail.From”值在 SMTP 服务器允许的列表中。可能是不允许中继。

# c - ~x + ~y == ~(x + y) 总是假的？

> ID：11111956
> 
> 赞同：153
> 
> 时间：2012-06-20T02:13:16.820
> 
> 标签：c, bit-manipulation, signed, twos-complement

此代码是否总是评估为假？两个变量都是二进制补码符号整数。

```
~x + ~y == ~(x + y) 
```

我觉得应该有一些满足条件的数字。我尝试测试两者之间的数字`-5000`，`5000`但从未达到相等。有没有办法建立一个方程来找到条件的解决方案？

将一个换成另一个会在我的程序中导致一个潜在的错误吗？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-06-20T02:35:44.440

为了矛盾起见，假设存在 some `x`and some `y`(mod 2 ^n ) 使得

```
~(x+y) == ~x + ~y 
```

通过二进制补码*，我们知道，

```
 -x == ~x + 1
<==>  -1 == ~x + x 
```

注意到这个结果，我们有，

```
 ~(x+y) == ~x + ~y
<==>  ~(x+y) + (x+y) == ~x + ~y + (x+y)
<==>  ~(x+y) + (x+y) == (~x + x) + (~y + y)
<==>  ~(x+y) + (x+y) == -1 + -1
<==>  ~(x+y) + (x+y) == -2
<==>  -1 == -2 
```

因此，矛盾。因此，`~(x+y) != ~x + ~y`对于所有`x`和`y`(mod 2 ^n )。

* * *

^(*有趣的是，在具有补码算法的机器上，等式实际上对所有`x`和都成立`y`。这是因为在一个补码下，`~x = -x`。因此，`~x + ~y == -x + -y == -(x+y) == ~(x+y)`.)

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2012-06-20T05:42:05.910

# 二进制补码

在*绝大多数*计算机上，如果`x`是整数，则`-x`表示为`~x + 1`。等效地，`~x == -(x + 1)`。在您的等式中进行此替换给出：

*   ~x + ~y == ~(x + y)
*   -(x+1) + -(y+1) = -((x + y) + 1)
*   -x - y - 2 = -x - y - 1
*   -2 = -1

这是一个矛盾，所以`~x + ~y == ~(x + y)`总是**false**。

* * *

也就是说，学究们会指出 C 不需要二进制补码，所以我们还必须考虑......

# 一个人的补充

在[一个的补码](http://en.wikipedia.org/wiki/Ones%27_complement)中，`-x`简单地表示为`~x`。零是一种特殊情况，同时具有全 0 ( `+0`) 和全 1 ( `-0`) 表示，但 IIRC、C 要求`+0 == -0`即使它们具有不同的位模式，所以这应该不是问题。只需替换`~`为`-`.

*   ~x + ~y == ~(x + y)
*   -x + (-y) = -(x + y)

这对所有和都是**正确**的。`x``y`

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-20T02:25:19.980

只考虑两者的最右边的位`x`和`y`（即，如果`x == 13`它`1101`在基数 2 中，我们将只看最后一位， a `1`）然后有四种可能的情况：

**x = 0，y = 0：**

> 左轴：~0 + ~0 => 1 + 1 => 10
> 右轴：~(0 + 0) => ~0 => 1

**x = 0，y = 1：**

> 左轴：~0 + ~1 => 1 + 0 => 1
> 右轴：~(0 + 1) => ~1 => 0

**x = 1，y = 0：**

> 我将把它留给你，因为这是家庭作业（提示：它与前面的 x 和 y 交换相同）。

**x = 1，y = 1：**

> 我也会把这个留给你。

您可以证明在给定任何可能的输入的情况下，等式的左侧和右侧的最右边的位总是不同的，因此您已经证明两边不相等，因为它们至少有一个被翻转的位从彼此。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2012-06-20T02:21:15.067

如果位数为 n

```
~x = (2^n - 1) - x
~y = (2^n - 1) - y

~x + ~y = (2^n - 1) +(2^n - 1) - x - y =>  (2^n + (2^n - 1) - x - y ) - 1 => modulo: (2^n - 1) - x - y - 1. 
```

现在，

```
 ~(x + y) = (2^n - 1) - (x + y) = (2^n - 1) - x - y. 
```

因此，它们总是不相等的，相差 1。

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2012-06-20T02:24:52.570

**暗示：**

`x + ~x = -1`（模 2 ^n）

假设问题的目标是测试您的数学（而不是您阅读 C 规范的技能），这应该可以让您找到答案。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-06-20T13:12:40.833

在 one's 和 two's（甚至 42's）补码中，可以证明：

```
~x + ~y == ~(x + a) + ~(y - a) 
```

现在让`a = y`我们有：

```
~x + ~y == ~(x + y) + ~(y - y) 
```

或者：

```
~x + ~y == ~(x + y) + ~0 
```

因此，在二进制补码中`~0 = -1`，命题为假。

反之`~0 = 0`，命题为真。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-06-20T04:12:24.807

根据 Dennis Ritchie 的书，C 默认情况下不实现二进制补码。因此，您的问题可能并不总是正确的。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-06-20T03:21:16.947

让`MAX_INT`是由`011111...111`（无论有多少位）表示的 int 。然后您知道`~x + x = MAX_INT`和`~y + y = MAX_INT`，因此您将确定`~x + ~y`和之间的区别`~(x + y)`是`1`。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-06-20T03:23:59.897

C不要求二进制补码是实现的。但是，对于无符号整数，应用了类似的逻辑。在这个逻辑下，差异永远是 1！

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-06-21T14:21:25.430

当然，C 不需要这种行为，因为它不需要二进制补码表示。例如，`~x = (2^n - 1) - x`&`~y = (2^n - 1) - y`会得到这个结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-23T01:25:33.450

啊，基础离散数学！

看看[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

```
~x & ~y == ~(x | y)

~x | ~y == ~(x & y) 
```

对于布尔证明非常重要！

# c# - WPF 按钮后台操作被代码覆盖

> ID：11111961
> 
> 赞同：3
> 
> 时间：2012-06-20T02:14:23.437
> 
> 标签：c#, wpf, expression-blend

我有一个按钮，我修改了它的模板，所以当按钮被点击和鼠标悬停时它显示不同的背景颜色（它变成绿色而不是浅蓝色）。

这本身就很好用，但我需要根据某些状态更改背景颜色，所以我需要更改代码中的背景。

我的问题是当我更改代码中的背景颜色时，它会正确更改，但不再更改单击或鼠标悬停事件的背景。

我假设我以某种方式覆盖了代码中的背景颜色，因此涵盖了我在模板中创建的内容。如何解决此问题，以便我可以通过代码更改背景但仍然可以单击和鼠标悬停？

这是我的 XAML 代码：

```
<Style x:Key="NodeButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="FocusVisualStyle" Value="{StaticResource ButtonFocusVisual}"/>
            <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Microsoft_Windows_Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}"  RenderDefaulted="{TemplateBinding IsDefaulted}" SnapsToDevicePixels="true" OverridesDefaultStyle="true">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                        </Microsoft_Windows_Themes:ButtonChrome>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="true">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                            <GradientStop Color="#FFCFF9C4" Offset="0"/>
                                            <GradientStop Color="#FF249505" Offset="1"/>
                                            <GradientStop Color="#FF58D835" Offset="0.5"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="#ADADAD"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background">
                                    <Setter.Value>
                                        <LinearGradientBrush EndPoint="0,1" StartPoint="0,0" Opacity="0.5">
                                            <GradientStop Color="#FFCFF9C4" Offset="0"/>
                                            <GradientStop Color="#FF249505" Offset="1"/>
                                            <GradientStop Color="#FF58D835" Offset="0.5"/>
                                        </LinearGradientBrush>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

在代码中，我只是做 button1.Background = newBrush;

我试图寻找类似的问题，但我找不到任何..任何帮助将不胜感激！我正在使用混合 4 .net 3.5 和 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:01:38.263

我相信您遇到了[DependecyProperty 值优先级](http://msdn.microsoft.com/en-us/library/ms743230)问题。在代码中设置值会覆盖在您的样式中设置的值。不要直接在后面的代码中设置属性，而是尝试更改按钮上的样式。另一种解决方案是将背景绑定到 DataContext 上的属性并将其设置在那里而不是您的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:32:29.617

丹是对的，这就是你如何绕过它

```
 <Trigger Property="IsMouseOver" Value="True">
                            <Trigger.EnterActions>
                                <BeginStoryboard Name="fred">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0">
                                                <DiscreteObjectKeyFrame.Value>
                                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0" Opacity="0.5">
                                                        <GradientStop Color="#FFCFF9C4" Offset="0"/>
                                                        <GradientStop Color="#FF249505" Offset="1"/>
                                                        <GradientStop Color="#FF58D835" Offset="0.5"/>
                                                    </LinearGradientBrush>
                                                </DiscreteObjectKeyFrame.Value>
                                            </DiscreteObjectKeyFrame>
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </BeginStoryboard>
                            </Trigger.EnterActions>
                            <Trigger.ExitActions>
                                <RemoveStoryboard BeginStoryboardName="fred" />
                            </Trigger.ExitActions>
                        </Trigger> 
```

请注意，在场景中我们使用了 ObjectAnimation 而不是 ColorAnimation，因此我们不需要对背景最初设置的画笔类型做出任何假设。

# sqlite - Py2app 不包括 Sqlite 驱动程序-“数据库错误：未加载驱动程序未加载驱动程序”

> ID：11111963
> 
> 赞同：2
> 
> 时间：2012-06-20T02:14:32.610
> 
> 标签：sqlite, py2app

我在[py2app 邮件列表上的这篇文章中](http://mail.python.org/pipermail/pythonmac-sig/2009-January/020930.html)遇到了同样的问题。

我有一个使用 sqlite 数据库的 python 应用程序。在我安装了所有依赖项的机器上，没有问题。但是，当我将应用程序与 py2app 捆绑在一起时，单击导致访问数据库的菜单会导致此错误：

> 数据库错误：未加载驱动程序 未加载驱动程序

对于 Windows 安装程序， `\Qt\version\plugins\sqldrivers\*.*`可以将其中的文件复制到`\myApp\sqldrivers\*`

Mac 上的相同文件可以在　`/opt/local/share/qt4/plugins/sqldrivers`（通过 Macports 安装）中找到。

但是，将`sqldrivers`目录复制到我的应用程序`Resources`或`Frameworks`目录仍然会导致相同的错误。

如何将 sqlite 支持添加到使用 py2app 构建的应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T13:21:38.143

你试过他在这篇文章中所说的吗？ 它提到[的py2app setup.py使用问题](https://stackoverflow.com/questions/7270554/py2app-setup-py-usage-question)

> 您需要将 sqlalchemy.dialects.sqlite 作为一个包包含在内

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:36:43.917

我设法让它工作如下：

使用 py2app 构建后，在应用程序的 Contents 目录中，创建一个新`plugins`目录。

然后将 sqldrivers/libqsqlite.dylib 复制到这个插件目录中。

之后，必须使用 install_name_tool 将 libqsqlite.dylib 中的库链接更改为指向应用程序 Frameworks 目录中的 Qt 库而不是系统 Qt 库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-16T02:58:56.053

原来 pyside 配方确实有一种方法来指定你需要哪些 qt 插件......

```
 options=dict(py2app={
                         'argv_emulation': True,
                         'qt_plugins' : "sqldrivers",
                         }
                 ), 
```

这会将所有 sqldrivers 放入正确的目录并正确设置 qt.conf。

# python - psycopg2 安装/Python 路径的问题

> ID：11111965
> 
> 赞同：5
> 
> 时间：2012-06-20T02:14:43.077
> 
> 标签：python, django, virtualenv, pythonpath

我在我的 django app 文件夹中创建了一个 virtualenv，并在那里安装了我所有的 python 依赖项。我的 Django 项目被称为主题，所以在主题文件夹中有一个包含 python 库的 venv 文件夹。如果我运行`python manage.py syncdb`它会抛出`Error was: No module named postgresql_psycopg2.base`. 这是回溯：

```
(venv)app@domain-VirtualBox:~/dj/theme$ python manage.py syncdb
Traceback (most recent call last):
  File "manage.py", line 14, in <module>
    execute_manager(settings)
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 459, in execute_manager
    utility.execute()
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 261, in fetch_command
    klass = load_command_class(app_name, subcommand)
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 69, in load_command_class
    module = import_module('%s.management.commands.%s' % (app_name, name))
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 8, in <module>
    from django.core.management.sql import custom_sql_for_model, emit_post_sync_signal
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/core/management/sql.py", line 6, in <module>
    from django.db import models
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/db/__init__.py", line 40, in <module>
    backend = load_backend(connection.settings_dict['ENGINE'])
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
    return getattr(connections[DEFAULT_DB_ALIAS], item)
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/db/utils.py", line 92, in __getitem__
    backend = load_backend(db['ENGINE'])
  File "/home/app/dj/theme/venv/local/lib/python2.7/site-packages/django/db/utils.py", line 51, in load_backend
    raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'postgresql_psycopg2' isn't an available database backend.
Try using django.db.backends.postgresql_psycopg2 instead.
Error was: No module named postgresql_psycopg2.base 
```

但问题是，如果我尝试从 python 命令行导入 psycopg2，它会起作用：

```
(venv)app@domain-VirtualBox:~/dj/theme$ python
Python 2.7.3 (default, Apr 20 2012, 22:44:07)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import psycopg2
>>> quit() 
```

这是我的python路径：

```
>>> import sys
>>> print sys.path
['', '/home/app/dj/theme/venv/local/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg', '/home/app/dj/theme/venv/local/lib/python2.7/site-packages/pip-1.1-py2.7.egg', '/home/app/dj/theme/venv/lib/python2.7/site-packages/distribute-0.6.24-py2.7.egg', '/home/app/dj/theme/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg', '/home/app/dj/theme/venv/lib/python2.7', '/home/leonsas/dj/theme/venv/lib/python2.7/plat-linux2', '/home/app/dj/theme/venv/lib/python2.7/lib-tk', '/home/app/dj/theme/venv/lib/python2.7/lib-old', '/home/app/dj/theme/venv/lib/python2.7/lib-dynload', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/home/app/dj/theme/venv/local/lib/python2.7/site-packages', '/home/app/dj/theme/venv/lib/python2.7/site-packages']
>>> quit() 
```

和`whereis python`：

```
(venv)app@domain-VirtualBox:~/dj/theme$ whereis python
python: /usr/bin/python2.7 /usr/bin/python /usr/bin/python2.7-config /etc/python2.7 /etc/python /usr/lib/python2.7 /usr/bin/X11/python2.7 /usr/bin/X11/python /usr/bin/X11/python2.7-config /usr/local/lib/python2.7 /usr/include/python2.7 /usr/share/python /usr/share/man/man1/python.1.gz 
```

我相信问题就在那里，但我不知道如何解决它。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T05:05:19.627

尝试遵循`django.core.exceptions.ImproperlyConfigured`异常的建议：在您的设置中使用`'django.db.backends.postgresql_psycopg2'`而不是`'postgresql_psycopg2'`in`DATABASES`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T18:09:45.497

您需要先将 PostgreSQL 数据库服务器连接到 postgresql_psycopg2。

遵循本指南：[https ://www.postgresqltutorial.com/postgresql-python/connect/](https://www.postgresqltutorial.com/postgresql-python/connect/)

# eclipse - Eclipse Arduino 链接器故障

> ID：11111966
> 
> 赞同：1
> 
> 时间：2012-06-20T02:14:42.903
> 
> 标签：eclipse, arduino, avr

我一直在尝试设置我的 Arduino/Eclipse 环境。出于某种原因，我一直遇到链接器问题。

这是我在尝试构建时收到的错误。那么libgcc和libc之间有冲突吗？

我已经非常接近地遵循了这些说明，但有一些细微差别。

```
**** Build of configuration Debug for project CustomLEDPoi ****

make all 
Building target: CustomLEDPoi.elf
Invoking: AVR C++ Linker
avr-gcc -Wl,-Map,CustomLEDPoi.map,--cref -Wl,--gc-sections -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino" -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src" -Xlinker -verbose -mmcu=atmega328p -o "CustomLEDPoi.elf"  ./src/glowstick2.o  ./lib/CShiftPWM.o ./lib/MeetAndroid.o ./lib/hsv2rgb.o  ./arduinolib/HardwareSerial.o ./arduinolib/SPI.o   -lArduinoCore
GNU ld (WinAVR 20081205) 2.19
  Supported emulations:
   avr2
   avr1
   avr25
   avr3
   avr31
   avr35
   avr4
   avr5
   avr51
   avr6
   avrxmega1
   avrxmega2
   avrxmega3
   avrxmega4
   avrxmega5
   avrxmega6
   avrxmega7
cannot find script file ldscripts/avr5.x
opened script file c:\users\justin\arduino\arduino-1.0\hardware\tools\avr\avr\bin\../lib\ldscripts/avr5.x
using external linker script:
==================================================
/* Default linker script, for normal executables */
OUTPUT_FORMAT("elf32-avr","elf32-avr","elf32-avr")
OUTPUT_ARCH(avr:5)
MEMORY
{
  text      (rx)   : ORIGIN = 0, LENGTH = 128K
  data      (rw!x) : ORIGIN = 0x800060, LENGTH = 0xffa0
  eeprom    (rw!x) : ORIGIN = 0x810000, LENGTH = 64K
  fuse      (rw!x) : ORIGIN = 0x820000, LENGTH = 1K
  lock      (rw!x) : ORIGIN = 0x830000, LENGTH = 1K
  signature (rw!x) : ORIGIN = 0x840000, LENGTH = 1K
}
SECTIONS
{
  /* Read-only sections, merged into text segment: */
  .hash          : { *(.hash)       }
  .dynsym        : { *(.dynsym)     }
  .dynstr        : { *(.dynstr)     }
  .gnu.version   : { *(.gnu.version)    }
  .gnu.version_d   : { *(.gnu.version_d)    }
  .gnu.version_r   : { *(.gnu.version_r)    }
  .rel.init      : { *(.rel.init)       }
  .rela.init     : { *(.rela.init)  }
  .rel.text      :
    {
      *(.rel.text)
      *(.rel.text.*)
      *(.rel.gnu.linkonce.t*)
    }
  .rela.text     :
    {
      *(.rela.text)
      *(.rela.text.*)
      *(.rela.gnu.linkonce.t*)
    }
  .rel.fini      : { *(.rel.fini)       }
  .rela.fini     : { *(.rela.fini)  }
  .rel.rodata    :
    {
      *(.rel.rodata)
      *(.rel.rodata.*)
      *(.rel.gnu.linkonce.r*)
    }
  .rela.rodata   :
    {
      *(.rela.rodata)
      *(.rela.rodata.*)
      *(.rela.gnu.linkonce.r*)
    }
  .rel.data      :
    {
      *(.rel.data)
      *(.rel.data.*)
      *(.rel.gnu.linkonce.d*)
    }
  .rela.data     :
    {
      *(.rela.data)
      *(.rela.data.*)
      *(.rela.gnu.linkonce.d*)
    }
  .rel.ctors     : { *(.rel.ctors)  }
  .rela.ctors    : { *(.rela.ctors) }
  .rel.dtors     : { *(.rel.dtors)  }
  .rela.dtors    : { *(.rela.dtors) }
  .rel.got       : { *(.rel.got)        }
  .rela.got      : { *(.rela.got)       }
  .rel.bss       : { *(.rel.bss)        }
  .rela.bss      : { *(.rela.bss)       }
  .rel.plt       : { *(.rel.plt)        }
  .rela.plt      : { *(.rela.plt)       }
  /* Internal text space or external memory.  */
  .text   :
  {
    *(.vectors)
    KEEP(*(.vectors))
    /* For data that needs to reside in the lower 64k of progmem.  */
    *(.progmem.gcc*)
    *(.progmem*)
    . = ALIGN(2);
     __trampolines_start = . ;
    /* The jump trampolines for the 16-bit limited relocs will reside here.  */
    *(.trampolines)
    *(.trampolines*)
     __trampolines_end = . ;
    /* For future tablejump instruction arrays for 3 byte pc devices.
       We don't relax jump/call instructions within these sections.  */
    *(.jumptables)
    *(.jumptables*)
    /* For code that needs to reside in the lower 128k progmem.  */
    *(.lowtext)
    *(.lowtext*)
     __ctors_start = . ;
     *(.ctors)
     __ctors_end = . ;
     __dtors_start = . ;
     *(.dtors)
     __dtors_end = . ;
    KEEP(SORT(*)(.ctors))
    KEEP(SORT(*)(.dtors))
    /* From this point on, we don't bother about wether the insns are
       below or above the 16 bits boundary.  */
    *(.init0)  /* Start here after reset.  */
    KEEP (*(.init0))
    *(.init1)
    KEEP (*(.init1))
    *(.init2)  /* Clear __zero_reg__, set up stack pointer.  */
    KEEP (*(.init2))
    *(.init3)
    KEEP (*(.init3))
    *(.init4)  /* Initialize data and BSS.  */
    KEEP (*(.init4))
    *(.init5)
    KEEP (*(.init5))
    *(.init6)  /* C++ constructors.  */
    KEEP (*(.init6))
    *(.init7)
    KEEP (*(.init7))
    *(.init8)
    KEEP (*(.init8))
    *(.init9)  /* Call main().  */
    KEEP (*(.init9))
    *(.text)
    . = ALIGN(2);
    *(.text.*)
    . = ALIGN(2);
    *(.fini9)  /* _exit() starts here.  */
    KEEP (*(.fini9))
    *(.fini8)
    KEEP (*(.fini8))
    *(.fini7)
    KEEP (*(.fini7))
    *(.fini6)  /* C++ destructors.  */
    KEEP (*(.fini6))
    *(.fini5)
    KEEP (*(.fini5))
    *(.fini4)
    KEEP (*(.fini4))
    *(.fini3)
    KEEP (*(.fini3))
    *(.fini2)
    KEEP (*(.fini2))
    *(.fini1)
    KEEP (*(.fini1))
    *(.fini0)  /* Infinite loop after program termination.  */
    KEEP (*(.fini0))
     _etext = . ;
  }  > text
  .data   : AT (ADDR (.text) + SIZEOF (.text))
  {
     PROVIDE (__data_start = .) ;
    *(.data)
    *(.data*)
    *(.rodata)  /* We need to include .rodata here if gcc is used */
    *(.rodata*) /* with -fdata-sections.  */
    *(.gnu.linkonce.d*)
    . = ALIGN(2);
     _edata = . ;
     PROVIDE (__data_end = .) ;
  }  > data
  .bss   : AT (ADDR (.bss))
  {
     PROVIDE (__bss_start = .) ;
    *(.bss)
    *(.bss*)
    *(COMMON)
     PROVIDE (__bss_end = .) ;
  }  > data
   __data_load_start = LOADADDR(.data);
   __data_load_end = __data_load_start + SIZEOF(.data);
  /* Global data not cleared after reset.  */
  .noinit  :
  {
     PROVIDE (__noinit_start = .) ;
    *(.noinit*)
     PROVIDE (__noinit_end = .) ;
     _end = . ;
     PROVIDE (__heap_start = .) ;
  }  > data
  .eeprom  :
  {
    *(.eeprom*)
     __eeprom_end = . ;
  }  > eeprom
  .fuse  :
  {
    KEEP(*(.fuse))
    KEEP(*(.lfuse))
    KEEP(*(.hfuse))
    KEEP(*(.efuse))
  }  > fuse
  .lock  :
  {
    KEEP(*(.lock*))
  }  > lock
  .signature  :
  {
    KEEP(*(.signature*))
  }  > signature
  /* Stabs debugging sections.  */
  .stab 0 : { *(.stab) }
  .stabstr 0 : { *(.stabstr) }
  .stab.excl 0 : { *(.stab.excl) }
  .stab.exclstr 0 : { *(.stab.exclstr) }
  .stab.index 0 : { *(.stab.index) }
  .stab.indexstr 0 : { *(.stab.indexstr) }
  .comment 0 : { *(.comment) }
  /* DWARF debug sections.
     Symbols in the DWARF debugging sections are relative to the beginning
     of the section so we begin them at 0\.  */
  /* DWARF 1 */
  .debug          0 : { *(.debug) }
  .line           0 : { *(.line) }
  /* GNU DWARF 1 extensions */
  .debug_srcinfo  0 : { *(.debug_srcinfo) }
  .debug_sfnames  0 : { *(.debug_sfnames) }
  /* DWARF 1.1 and DWARF 2 */
  .debug_aranges  0 : { *(.debug_aranges) }
  .debug_pubnames 0 : { *(.debug_pubnames) }
  /* DWARF 2 */
  .debug_info     0 : { *(.debug_info) *(.gnu.linkonce.wi.*) }
  .debug_abbrev   0 : { *(.debug_abbrev) }
  .debug_line     0 : { *(.debug_line) }
  .debug_frame    0 : { *(.debug_frame) }
  .debug_str      0 : { *(.debug_str) }
  .debug_loc      0 : { *(.debug_loc) }
  .debug_macinfo  0 : { *(.debug_macinfo) }
}

==================================================
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5/crtm328p.o succeeded
c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5/crtm328p.o
attempt to open ./src/glowstick2.o succeeded
./src/glowstick2.o
attempt to open ./lib/CShiftPWM.o succeeded
./lib/CShiftPWM.o
attempt to open ./lib/MeetAndroid.o succeeded
./lib/MeetAndroid.o
attempt to open ./lib/hsv2rgb.o succeeded
./lib/hsv2rgb.o
attempt to open ./arduinolib/HardwareSerial.o succeeded
./arduinolib/HardwareSerial.o
attempt to open ./arduinolib/SPI.o succeeded
./arduinolib/SPI.o
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino/libArduinoCore.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\libArduinoCore.a failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src/libArduinoCore.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a succeeded
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)wiring.c.o
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)wiring_digital.c.o
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)main.cpp.o
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)new.cpp.o
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)Print.cpp.o
(C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libArduinoCore.a)WString.cpp.o
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino/libgcc.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\libgcc.a failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src/libgcc.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libgcc.a failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5/libgcc.so failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a succeeded
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_mulsi3.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_udivmodhi4.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_divmodhi4.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_udivmodsi4.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_exit.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_copy_data.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_clear_bss.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_ctors.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_dtors.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_fixunssfsi.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_addsub_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_mul_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_div_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_gt_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_ge_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_lt_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_si_to_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_sf_to_si.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_thenan_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_usi_to_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_prologue.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_epilogue.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_tablejump.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_clzsi2.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_pack_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_unpack_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_fpcmp_parts_sf.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a)_clz.o
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino/libc.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\libc.a failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src/libc.so failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libc.a failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5/libc.so failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libc.a failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5/libc.so failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a succeeded
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)malloc.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)realloc.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)atof.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)atoi.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)atol.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)isspace.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)tolower.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)toupper.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)memcpy.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)memmove.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strchr.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strcmp.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strcpy.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strncmp.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strncpy.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strrchr.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strstr.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)itoa.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)ltoa.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)mulsi10.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)mul10.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)ultoa.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)utoa.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strtod.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)cty_isfalse.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strncasecmp_P.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)strrev.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)cmpsf2.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)fp_cmp.o
(c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a)errno.o
c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/../../../../avr/lib/avr5\libc.a(cmpsf2.o): In function `__lesf2':
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino/libgcc.so failed
(.text.fplib+0x0): multiple definition of `__ltsf2'
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\libgcc.a failed
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src/libgcc.so failed
c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a(_lt_sf.o):(.text+0x0): first defined here
attempt to open C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src\libgcc.a failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5/libgcc.so failed
attempt to open c:/users/justin/arduino/arduino-1.0/hardware/tools/avr/bin/../lib/gcc/avr/4.3.2/avr5\libgcc.a succeeded
make: *** [CustomLEDPoi.elf] Error 1

**** Build Finished **** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T04:23:03.950

我意识到我没有添加库 m。所以我使用添加库选项附加了 -lm 。make 文件现在有这个命令。

```
 avr-g++ -o"CustomLEDPoi.elf"  ./src/glowstick2.o  ./lib/CShiftPWM.o ./lib/MeetAndroid.o ./lib/hsv2rgb.o  ./arduinolib/HardwareSerial.o ./arduinolib/SPI.o   -larduino_core -lm -Wl,-Map,CustomLEDPoi.map,--cref -Wl,--gc-sections -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino" -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src" -Xlinker -verbose -mmcu=atmega328p 
```

这仍然给了我同样的问题。查看[http://arduino.cc/playground/Code/Eclipse](http://arduino.cc/playground/Code/Eclipse)上的指南 它说，

> 如果您使用的是 C++，那么 hex 文件会变得非常大。在链接器菜单中，将命令更改为 avr-gcc 并将命令行模式更改为以下内容： ${COMMAND} --cref -s -Os ${OUTPUT_FLAG}${OUTPUT_PREFIX}${OUTPUT} ${INPUTS} -lm ${标志}

我的 make 文件现在有这个命令。

```
avr-g++ --cref -s -Os -o"CustomLEDPoi.elf"  ./src/glowstick2.o  ./lib/CShiftPWM.o ./lib/MeetAndroid.o ./lib/hsv2rgb.o  ./arduinolib/HardwareSerial.o ./arduinolib/SPI.o   -larduino_core -lm -lm -Wl,-Map,CustomLEDPoi.map,--cref -Wl,--gc-sections -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino" -L"C:\Users\Justin\workspaceArduino\arduino_core\328P_16MHz Arduino\src" -Xlinker -verbose -mmcu=atmega328p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-17T05:15:19.410

`ATmega32 (avr5)`这是GCC 链接器脚本 中的灾难性错误：数据`(rw!x) : ORIGIN = 0x800060, LENGTH = 0xffa0`

该手册声明：

```
(0xC6) UDR0 USART I/O Data Register 
```

at 地址 (0xC6) 将由用户 .data 改写

# octave - 开始八度时如何组合“-”和“--”选项？

> ID：11111968
> 
> 赞同：1
> 
> 时间：2012-06-20T02:14:50.940
> 
> 标签：octave

我注意到我不能将`--traditional`选项与另一个字母组合在一起`-i`，例如其他选项。

例如，当我将此作为 octave .m 文件中的第一行时

```
#!/usr/bin/octave  --traditional 
```

然后它工作。Octave 启动正常并运行脚本。

但是当我尝试

```
#!/usr/bin/octave  --traditional --silent --norc --interactive 
```

这没用。八度误差。不理解选项。

当我尝试

```
#!/usr/bin/octave  --traditional -qfi 
```

还有错误。但是这个

```
#!/usr/bin/octave  -qfi 
```

作品。

问题是它`--traditional`没有像所有其他选项一样的单字母快捷方式。这是我看到的选项

```
Options:

  --debug, -d             Enter parser debugging mode.
  --doc-cache-file FILE   Use doc cache file FILE.
  --echo-commands, -x     Echo commands as they are executed.
  --eval CODE             Evaluate CODE.  Exit when done unless --persist.
  --exec-path PATH        Set path for executing subprograms.
  --help, -h, -?          Print short help message and exit.
  --image-path PATH       Add PATH to head of image search path.
  --info-file FILE        Use top-level info file FILE.
  --info-program PROGRAM  Use PROGRAM for reading info files.
  --interactive, -i       Force interactive behavior.
  --line-editing          Force readline use for command-line editing.
  --no-history, -H        Don't save commands to the history list
  --no-init-file          Don't read the ~/.octaverc or .octaverc files.
  --no-init-path          Don't initialize function search path.
  --no-line-editing       Don't use readline for command-line editing.
  --no-site-file          Don't read the site-wide octaverc file.
  --no-window-system      Disable window system, including graphics.
  --norc, -f              Don't read any initialization files.
  --path PATH, -p PATH    Add PATH to head of function search path.
  --persist               Go interactive after --eval or reading from FILE.
  --silent, -q            Don't print message at startup.
  --traditional           Set variables for closer MATLAB compatibility.
  --verbose, -V           Enable verbose output in some cases.
  --version, -v           Print version number and exit. 
```

我主要对运行与 Matlab 兼容的 octave 代码感兴趣，因此我想使用此`--traditional`选项来确保代码与 Matlab 兼容，以防我也需要在 Matlab 中运行相同的代码。

或者，一旦八度开始使用不同的命令，我是否可以“打开”这种兼容模式？

我在 Linux 上使用 GNU Octave，版本 3.2.4。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:45:38.447

我认为这`octave`本身并不是一个真正的问题。一般而言，Unix [shebang](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)表示法有些限制。我不知道我脑海中的确切限制，但我敢肯定，如果您在 shebang 行中添加多个选项，许多实现都不满意，这似乎是您的问题。

使用包装脚本可能是解决此类问题的规范方法。

为了解决您组合短选项和长选项的问题，Unix 约定不允许这样做。如果这对您可行，您可以考虑修补`octave`以添加一个简短的选项。`--traditional`或者，我想有一种方法可以在用户或系统范围的 Octave 配置文件中指定传统行为，但如果您需要脚本在您无法控制的系统上工作，这可能没有那么有用。

# c++ - 如何在 C++ 中打印成员函数地址

> ID：11111969
> 
> 赞同：16
> 
> 时间：2012-06-20T02:14:51.260
> 
> 标签：c++, pointers, function-pointers, pointer-to-member

看起来`std::cout`无法打印成员函数的地址，例如：

```
#include <iostream>

using std::cout;
using std::endl;

class TestClass
{
  void MyFunc(void);

public:
  void PrintMyFuncAddress(void);
};

void TestClass::MyFunc(void)
{
  return;
}

void TestClass::PrintMyFuncAddress(void)
{
  printf("%p\n", &TestClass::MyFunc);
  cout << &TestClass::MyFunc << endl;
}

int main(void)
{
  TestClass a;

  a.PrintMyFuncAddress();

  return EXIT_SUCCESS;
} 
```

结果是这样的：

```
003111DB
1 
```

如何`MyFunc`使用 打印地址`std::cout`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-20T02:18:57.253

我不相信该语言提供了任何工具来执行此操作。流有重载`operator <<`打印出普通`void*`指针，但成员函数指针不能转换为`void*`s。这都是特定于实现的，但通常成员函数指针被实现为一对值 - 一个指示成员函数是否为虚拟的标志，以及一些额外的数据。如果该函数是非虚函数，则该额外信息通常是实际成员函数的地址。如果函数是虚函数，则该额外信息可能包含有关如何索引虚函数表以查找给定接收器对象要调用的函数的数据。

一般来说，我认为这意味着如果不调用未定义的行为，就不可能打印出成员函数的地址。您可能必须使用一些特定于编译器的技巧来实现此效果。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T03:25:58.867

我想补充一下其他答案，你打印'1'而不是地址的原因是，由于某种原因，编译器将你的函数指针强制转换为布尔值，所以你真的打电话`ostream& operator<< (bool val);`

这似乎与作为成员函数的函数无关。

您可以使用 clang++ -cc1 -ast-dump 发现此类信息：

```
(ImplicitCastExpr 0x3861dc0 <col:13, col:25> '_Bool' <MemberPointerToBoolean>
    (UnaryOperator 0x3861940 <col:13, col:25> 'void (class TestClass::*)(void)' prefix '&'
        (DeclRefExpr 0x38618d0 <col:14, col:25> 'void (void)' CXXMethod 0x3861500 'MyFunc' 'void (void)'))))) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-20T02:30:42.640

一种方法是（我不确定它是否便携）：

```
void TestClass::PrintMyFuncAddress(void)
{
  void (TestClass::* ptrtofn)() = &TestClass::MyFunc;
  cout << (void*&)ptrtofn<< endl;
} 
```

工作示例：http: [//ideone.com/1SmjW](http://ideone.com/1SmjW)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-03-27T00:24:06.177

指向成员函数的指针也需要内存。它们也有大小。那么如何打印出指针的内存：

```
template<typename R, typename T, typename... Args>
std::string to_string(R (T::*func)(Args...))
{
    union PtrUnion
    {
        R(T::*f)(Args...);
        std::array<unsigned char, sizeof(func)> buf;
    };
    PtrUnion u;
    u.f = func;

    std::ostringstream os;

    os << std::hex << std::setfill('0');
    for (auto c : u.buf)
        os << std::setw(2) << (unsigned)c;

    return os.str();
} 
```

你可以这样使用它：

```
class TestClass
{
    void foo();
};

...

std::cout << to_string(&TestClass::foo) << std::endl; 
```

# ios - 在 iOS UIWebView 中，使用 CSS 框阴影还是背景图像性能更好

> ID：11111977
> 
> 赞同：1
> 
> 时间：2012-06-20T02:15:59.210
> 
> 标签：ios, uiwebview

使用诸如盒子阴影之类的 css3 功能是否会导致 iOS UIWebView 的性能大幅下降。如果我说一百行有一百张图片，我应该使用背景图片来创建阴影边框效果，还是可以在所有这些元素上使用 css 框阴影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:24:18.720

iOS 上的 CSS 是硬件加速的，所以应该很快

# c# - 将背景图像添加到 asp.net 主网页 asp.net 4.0 和 html5

> ID：11111981
> 
> 赞同：2
> 
> 时间：2012-06-20T02:16:25.583
> 
> 标签：c#, html, css, background-image, asp.net-4.0

使用 ASP.NET、C#、HTML5 和 CSS3。我的 MasterPage 无法识别我在样式表中设置的背景图像。我在 MSN 开发人员的 ASP.NET 论坛上找到了 2009 年的答案，但仍然无法正常工作。检查代码后，答案与 XHTML 过渡有关，它是 Visual Studio 中 .NET 的默认文档类型。

有什么建议么？先感谢您。

```
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>

    <link href="../changes.css" rel="stylesheet" type="text/css" />
    <link href="../style.css" rel="stylesheet" type="text/css" />
    </head>
    <body>

    <form id="form1" runat="server">
    <div id="PageWrapper">

    html, body {
    background-color: #000;
    background-image: url('../images/darker_wood_1600x1200.jpg');
    background-attachment: scroll;
    background-repeat: repeat-x;
            }

    <!DOCTYPE html>
<html>
<meta charset="utf-8" />

<head><title>

</title>
<link href="changes.css" rel="stylesheet" type="text/css" /><link href="style.css" rel="stylesheet" type="text/css" /></head>
<body>

    <form method="post" action="Default.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1MmRkM1MGX8QufJ31wnSeINevDB81G3lHsitto4ucLAdg6zs=" />
</div>

    <div id="PageWrapper">

    <div id="Header"><a href="./">Header here
        </a></div>

    <div id="MenuWrapper">Menu here</div>

    <div id="MainContent">

    </div>

    <div id="Sidebar">Sidebar here</div>
    <div id="Footer">Footer here</div>
    </div>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:05:03.250

这段代码对我有用，但我不知道上面的代码是不是它的样子。因为您在 div 的中间发布了一个样式表值。

此外，如果页面无法读取文件。尝试其他文件或尝试更改文件的搜索路径。也许它无法读取它，因为它在服务器目录之外。因为 CSS 代码看起来是正确的。

```
<!DOCTYPE html>
<html>
<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>

    <link href="../changes.css" rel="stylesheet" type="text/css" />
    <link href="../style.css" rel="stylesheet" type="text/css" />
    <link href="changes.css" rel="stylesheet" type="text/css" /><link href="style.css" rel="stylesheet" type="text/css" /></head>

    <meta charset="utf-8" />
    <style type="text/css">

        // If you want the "Page" background to be this way:
        html, body
        {
            background-color: #000;
            background-image: url('../images/darker_wood_1600x1200.jpg');
            background-attachment: scroll;
            background-repeat: repeat-x;
        }

        // Or the PageWrapper
        div#PageWrapper
        {
            background-color: #000;
            background-image: url('../images/darker_wood_1600x1200.jpg');
            background-attachment: scroll;
            background-repeat: repeat-x;
        }

    </style>
</head>
<body>
    <!--- <form id="form1" runat="server"> --->
    <form method="post" action="Default.aspx" id="form1">
        <div class="aspNetHidden">
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTY1NDU2MTA1MmRkM1MGX8QufJ31wnSeINevDB81G3lHsitto4ucLAdg6zs=" />
        </div>
        <div id="PageWrapper">

            <div id="Header">
                <a href="./">Header here</a>
            </div>
            <div id="MenuWrapper">
                Menu here
            </div>

            <div id="MainContent">
            </div>

            <div id="Sidebar">
                Sidebar here
            </div>
            <div id="Footer">
                Footer here
            </div>
        </div>
    </form>
    <!--- </form> --->
</body>
</html> 
```

# jquery - jQuery。一旦发生重复动作，如何停止？

> ID：11111982
> 
> 赞同：0
> 
> 时间：2012-06-20T02:16:27.987
> 
> 标签：jquery

我有一个每 1 秒发生一次的动作：

```
(function(){
  $('.testme').jClever();
  setTimeout(arguments.callee, 1000);
})() 
```

一旦发生，我该如何阻止它？

更新： .testme 来自 xmlhttpPost 操作，我无法以其他方式工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T02:18:36.160

您必须使用 clearTimeout() 来停止 setTimeout()，例如：

```
var clr = null;
(function(){
  $('.testme').jClever();
  clr = setTimeout(arguments.callee, 1000);
})()

// assuming that arguments.callee is a function named foo
function foo() {
    clearTimeout(clr);
} 
```

# validation - 仅当没有使用 zend 框架的电子邮件地址时，如何在数据库中插入用户？

> ID：11111992
> 
> 赞同：0
> 
> 时间：2012-06-20T02:17:55.913
> 
> 标签：validation, zend-framework, email

我有我的控制器、要插入数据库的函数和表单。如果他输入的电子邮件尚未在数据库中注册，我只想将用户插入数据库。

我的控制器：

```
$nome       = $this->_request->getParam('nome');
$senha      = $this->_request->getParam('senha');
$confirmar  = $this->_request->getParam('confirmar');
$email      = $this->_request->getParam('email');
$usuarios = new Application_Model_DbTable_Usuarios();
$usuarios->addUsuario($nome, $senha, $email); 
```

我的 DbTable_Usuario 类包含将用户插入数据库的函数

```
public function addUsuario($nome, $senha, $email) {
    $data = array(
        'id'    =>  'NULL',
        'nome'  =>  $nome,
        'senha' =>  $senha,
        'email' =>  $email,
        'nivel' =>  '0'
    );
    $this->insert($data);
} 
```

还有我的 zend_form

```
$email = new Zend_Form_Element_Text('email');
    $email->setLabel('Email:')
          ->setRequired(true)
          ->addValidator('EmailAddress')
          ->addValidator('NotEmpty'); 
```

我有一些方法可以在表单中添加一些东西，它检查输入的邮件是否已经存在于数据库中？如果存在，则显示该消息，如果不存在，则将其插入银行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:31:07.557

将[Zend_Validate_Db_NoRecordExists](http://framework.zend.com/manual/en/zend.validate.set.html#zend.validate.Db)验证器添加到电子邮件字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:07:26.787

使用 NoRecordExists 更深入地了解特定问题。验证器的添加方式与其他验证器相同

```
$email->addValidator('Db_NoRecordExists', false, array('table'=>'usario', 'field'=>'email')); 
```

根据您的表单设置，您也将使用完全相同的字段来编辑用户。编辑用户时，NoRecordExists 有点棘手。至于一次，您不应该被允许更改为现有的电子邮件，但您应该能够更新您的其他数据并保留您的电子邮件（虽然它存在于当前行的数据库中）。

因此，您需要从该规则中删除当前行。有几种方法，您可以从[我自己的问题](https://stackoverflow.com/questions/7832820/best-approach-on-exlcuding-fields-from-a-validator)中看到，但我认为以下方法在控制器级别上效果最好：

```
$form = new UserForm();
$form->getElement('email')->getValidator('Db_NoRecordExists')->setExclude(array(
  'field' => 'id',
  'value' => $idToEdit
)) 
```

# c++ - 将 void* 转换为 std::map

> ID：11111993
> 
> 赞同：2
> 
> 时间：2012-06-20T02:17:58.657
> 
> 标签：c++, pointers, void-pointers, stdmap

我正在尝试将 std::map 存储在共享内存段上。但我无法恢复地图。

我创建共享内存段（使用下面的类）并将映射地址分配给它。

但是当我试图恢复它时，我得到了一个错误的指针。

以下是一些代码片段：

```
 // This is in my header file
    CSharedMem * shMem;
    // This is in my cpp file - inside my class constructor
    shMem = new CSharedMem("MyShMem", 16536);
    void * ptr = shMem->GetAddress();
    std::map<int,int> myMap;
    ptr = &myMap;
    shMem-ReleaseAddress();

    // This is inside another function
    void * ptr = shMem->GetAdress();

    std::map<int,int> myMap = *static_cast<std::map<int,int> *> (ptr); 
```

有人有线索吗？

CSharedMem 类头文件：

```
 #pragma once

    #include <string>

    class CSharedMem
    {
    public:
    CSharedMem(const std::string& name, std::size_t size);
    ~CSharedMem();

    void* GetAddress() const;
    void ReleaseAddress();
    bool IsShared() const;
    private:
    bool shared_;
    void* address_;

    private:
    void* shm_;
    void* mtx_;
    }; 
```

cpp文件：

```
 #include "StdAfx.h"
    #include "SharedMem.h"
    #include <windows.h>
    CSharedMem::CSharedMem(const std::string& name, std::size_t size)
    : shared_(false), 
    address_(NULL)
    {
    shm_ = CreateFileMapping(INVALID_HANDLE_VALUE, 
                            NULL, PAGE_READWRITE, 
                            0, 
                            static_cast<DWORD>(size), 
                            name.c_str() );
    if( shm_ == INVALID_HANDLE_VALUE )
            throw std::exception("Failed to allocate shared memory.");

    if( GetLastError() == ERROR_ALREADY_EXISTS )
            shared_ = true;

    address_ = MapViewOfFile(shm_, FILE_MAP_READ | FILE_MAP_WRITE, 0, 0, 0);
    if( address_ == NULL )
            throw std::exception("Failed to map shared memory.");

    if( !shared_ )
            std::memset(address_, 0, size);

    mtx_ = CreateMutex(NULL, FALSE, (name + "MTX").c_str());
    if( mtx_ == INVALID_HANDLE_VALUE )
            throw std::exception("Failed to create shared mutex.");
    }

    CSharedMem::~CSharedMem()
    {
    UnmapViewOfFile(address_);
    CloseHandle(mtx_);
    }
    void* CSharedMem::GetAddress() const
    {
    if(WaitForSingleObject(mtx_, INFINITE) != WAIT_OBJECT_0)
            throw std::exception("Failed to obtain access to shared memory.");

    return address_;
    }

    void CSharedMem::ReleaseAddress()
    {
            ReleaseMutex(mtx_);
    }

    bool CSharedMem::IsShared() const
    {
            return shared_;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T02:22:33.960

这种逻辑有些可疑：

```
void * ptr = shMem->GetAddress();
std::map<int,int> myMap;
ptr = &myMap;
shMem->ReleaseAddress(); 
```

请注意，您使用 获得了地址`shMem->GetAddress()`，但随后声明了一个局部变量`myMap`，然后分配`ptr`了该局部变量的地址。这意味着您实际上将不再`ptr`指向该共享内存。

我不确定对此的解决方法是什么，因为我不确定我是否看到您在这里尝试做的事情。如果您打算将共享内存转换为指向映射的指针，也许您的意思是：

```
void * ptr = shMem->GetAddress();

/* Construct a map at the given address using placement new. */
new (ptr) std::map<int, int>();
shMem-ReleaseAddress(); 
```

稍后，您可以检索地图：

```
void* ptr = shMem->GetAdress();

/* Note the use of a reference here so we don't just make a copy. */
std::map<int,int> myMap& = *static_cast<std::map<int,int> *> (ptr); 
```

也就是说，我非常怀疑这是否会起作用，因为在内部分配的指针`map`对于创建它们的进程来说是本地的，而不是共享的。您可能需要对分配器做一些花哨的事情才能使其正常工作。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T03:05:52.710

根据上面的评论，这并不像听起来那么简单。如果跨进程使用共享内存，则不能传递 STL 容器。

However, you can use the containers in the [`boost::interprocess`](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/allocators_containers.html) library. This library specifically provides containers (vector, deque, set, map) that can be used within a shared memory segment, and the documentation provides lots of examples.

# javascript - 在 d3.js 中使用 HTML 而不是 SVG

> ID：11111999
> 
> 赞同：2
> 
> 时间：2012-06-20T02:18:38.393
> 
> 标签：javascript, dom, svg, d3.js

我正在 d3.js 中构建一个图表，并在每次刷新时附加近 30-60 个圆圈以及 2 条线。我发现这在浏览器中变慢了，导致严重的性能问题。

在我的css中附加html并使用图像而不是绘制圆圈会更好吗？

另外，我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T04:29:42.477

我在这里有几个使用纯 HTML 的 D3.js 示例：

*   [http://phrogz.net/js/d3-playground/#StockPrice_HTML](http://phrogz.net/js/d3-playground/#StockPrice_HTML)
*   [http://phrogz.net/js/d3-playground/#BoxMullerDistribution_HTML](http://phrogz.net/js/d3-playground/#BoxMullerDistribution_HTML)
*   [http://phrogz.net/js/d3-playground/#MultiBars_HTML](http://phrogz.net/js/d3-playground/#MultiBars_HTML)

正如您从代码中看到的那样，您只需……执行此操作即可。按名称创建您想要的 HTML 元素并在其上设置属性或 CSS 属性。

例如，要创建一个圆圈的图像，您可以这样做：

```
var imgs = d3.select("body").selectAll("img").data(myData);
imgs.enter().append("img").attr("src", "circle.png");
imgs.exit().remove(); 
```

至于这是否会比 SVG 快……可能会快一点，但不会快很多。我怀疑您的计算机/浏览器速度很慢，或者您的代码*可能*做错了什么（例如意外破坏和重新创建某些元素）。但是，如果没有看到您的问题的示例，我们只能猜测。