# StackOverflow 问答 12371000-12371999

# css - Safari 使用 Typekit 和 optimizeLegibility 移除字间距

> ID：12371006
> 
> 赞同：1
> 
> 时间：2012-09-11T13:37:13.113
> 
> 标签：css, safari, text-rendering, kerning, typekit

Safari 使用 Typekit 字体和文本渲染删除单词之间的空格时遇到问题：css 中的 optimizeLegibility ..

它在 Chrome 中运行良好，因此不是 webkit 问题。它在 Firefox 中也很好用。我想使用 optimizeLegibility 的原因是因为 webkit 浏览器中的字距太可怕了。

有什么建议吗？

编辑： [我在这里创建了一个示例](http://jsbin.com/opehiq/5/edit) （它在 Firefox 和 Chrome 中运行良好，但在 Safari 5.1.7 中不适用（至少在 Windows 中不适用））

作为替代方案，如果有人可以帮助我在 Firefox 中获得起始点，就像在 Chrome 中一样，我可以使用 lettering.js 或其他东西来手动调整它。我无法让它与文本渲染一起使用：optimizeSpeed；

**编辑：从 Typekit 得到这个答案：**

> 很抱歉你遇到了这个问题。不幸的是，我们已经看到了其中一些问题： Safari 和 Chrome 中的 optimizeLegibility。它似乎非常随机并影响某些字体。
> 
> 很抱歉，除了向 Safari/Webkit 提交错误外，我们对此无能为力。
> 
> 你能告诉我哪个字体显示了这个问题吗？让我知道，我们会从那里拿走它。

希望他们能想出办法:)

**编辑：我现在从 Typekit 得到了更多答案。**

> 对于大标题，您可以简单地使用 CSS 更改设置。这样，您在 Firefox 中的起始位置相同：
> 
> 文本渲染：optimizeSpeed；
> 
> 这将改变 Firefox 和其他的文本渲染。然后你可以用 lettering.js 紧缩。
> 
> 我希望这有帮助。如果您还有其他问题，请告诉我。

但是我已经尝试过了，所以我让他们知道，不幸的是他们无法再帮助我解决这个问题。

我附上了一张它在不同浏览器中的样子的图片，所有浏览器都使用 Windows 7..

![使用 Abril Display 在不同浏览器上使用 typekit 进行文本渲染](../Images/547ddc6f7b656d10353f8928ab85da21.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:20:15.577

这实际上很可能是一个 webkit 问题，因为 webkits 实际上是由苹果发明的！

字体的渲染取决于浏览器，甚至在 typekit 网站上，似乎所有字体的渲染都因浏览器而异。

更好的选择是使用 css3 的 @font-face 新功能并使用您喜欢的任何字体，而无需使用外部服务。

很有可能您还可以更好地呈现您的文本，因为您可以更好地控制您的内容。

我不确定您的问题出在哪里，但也许这种替代方案会有所帮助。

关于 webkits 的额外信息： [http ://en.wikipedia.org/wiki/WebKit](http://en.wikipedia.org/wiki/WebKit)

如果您查看起源，它会告诉您有关苹果创建 webkit 的信息。

# android - Android：多项活动

> ID：12371008
> 
> 赞同：0
> 
> 时间：2012-09-11T13:37:14.723
> 
> 标签：android, android-intent, android-activity

我以前做过这个，很幸运，所以我不明白为什么我现在把它搞砸了。

很简单，从主要活动开始第二个活动。

在我的主要活动（Test.class）中：

```
Intent s = new Intent(Test.this, Settings.class);
this.startActivity(s); 
```

我的设置活动（Settings.class）：

```
public class Settings extends Activity {
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.settings);
    }
} 
```

设置.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent" 
    android:orientation="horizontal" 
    xmlns:android="http://schemas.android.com/apk/res/android"> 

    <TextView 
        android:id="@+id/test"
        android:text="Test"
    /> 

</LinearLayout> 
```

这是 AndroidManifest.xml 文件的应用程序部分：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="com.frank.test.Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.frank.test.Settings"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

这只是崩溃。没有日志条目，什么都没有。即使我用带有调试标签的 try-catch 来围绕意图/活动的创建和启动。

我是瞎子还是聋子，我知道。但我真的很讨厌这些地方没有任何错误的崩溃。

顺便说一下，我在主要的 Acitvity 的 onCreate() 方法中开始了意图。

更新：我还尝试将第二个活动添加到 AndroidManifest.xml 类中，如下所示：

```
<activity android:name=".Settings"></activity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:41:04.340

你需要修复的东西很少。

**首先**，您的布局：

您需要为您定义宽度和高度，`TextView`如下所示：

```
<TextView 
    android:id="@+id/test"
    android:text="Test"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

**其次**，你需要修复你的`AndroidManifest.xml`. 您没有正确定义您的两个活动。见下文：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

<!-- Test activity -->
    <activity
        android:name="com.frank.test.Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

<!-- Settings activity -->
    <activity
        android:name="com.frank.test.Settings"
        android:label="@string/app_name" >
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:42:43.533

更改清单如下：

```
<activity
    android:name=".Settings"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:43:07.197

您应该在清单文件中指定您的设置活动，**而不**为它指定*category.LAUNCHER*。它应该如下所示：

```
<activity android:name=".Settings"/> 
```

关于“无日志条目” - 您似乎正在查看您的应用程序的日志（由您的应用程序标签过滤）。您可以禁用任何日志过滤，并且应该在 logcat 中看到此崩溃的错误消息和堆栈跟踪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:44:18.990

AndroidManifest.xml 中的两个启动器活动？，2个相同的班级名称？这里是错的

```
 <activity
        android:name="com.frank.test.Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.frank.test.Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

它的使用喜欢并确保您的班级名称

```
 <activity
        android:name="com.frank.test.Test"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 <activity  android:name=".com.frank.test.Settings"></activity> 
```

# axapta - 将 InventTable 字段添加到 InventOnHandItem 表单

> ID：12371010
> 
> 赞同：1
> 
> 时间：2012-09-11T13:37:19.453
> 
> 标签：axapta, x++, ax

我正在尝试将 InventTable 表字段添加到 InventOnHandItem 表单中，我在 InventOnHandForm 数据源中添加了 InventTable 并测试了所有类型的链接类型属性，但没有结果。

我还尝试通过添加 InventTable 与 ItemId 上的链接的关系来修改 InventSum 表，但我有一些奇怪的结果：如果我将焦点更改为 InventOnHandItem 表单网格线，正确的 InventTable 字段数据会出现在网格第一行

我想我应该在表单数据源上添加一些代码来纠正焦点、显示和刷新问题，但我不知道如何继续。

有没有人有任何想法可以帮助我解决这个问题？

提前致谢

编辑：我不能使用显示方法，因为我需要过滤 InventTable 添加的字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:56:27.227

您可以将字段添加为表格上的[显示方法。](http://msdn.microsoft.com/en-us/library/aa595058.aspx)`InventSum`

为了加快速度，您可以使用[缓存](http://msdn.microsoft.com/en-us/library/aa596691.aspx)。

另见[Axaptapedia](http://www.axaptapedia.com/Display_method)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T06:40:40.670

如果您希望在`InventTable`网格上可以搜索字段，则必须完全重新设计表单。

这将涉及添加`InventTable`,`InventSum`和`InvenDim`作为内部连接的数据源（按指定顺序）并将相关`InventTable`字段添加到分组依据。

# java - 是否可以手动创建 PortletRequest？

> ID：12371012
> 
> 赞同：2
> 
> 时间：2012-09-11T13:37:26.660
> 
> 标签：java, request, liferay, portlet

我想为 Liferay Portal 5.2.3 创建一个 PortletRequest。在我的环境中，此时我无法以编程方式获取 PortletRequest。我可以用一些信息创建一个 dummyrequest 吗？是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T19:44:05.447

技术上的回答是“是的，当然”。另一方面，隐含的答案是“你为什么要这样做？”。最大的问题是，您希望在 portletrequest 中有哪些数据可用？

您只是提到“在我的环境中的*这*一点”，而没有具体说明*这*是什么。通常，如果某个位置的 portletrequest 不可用，那么您要么处于应用程序的错误层，要么处于生命周期的错误部分。请记住：Portlet API 位于 UI 层，在您的业务层中不应该知道。您通常将值从 Portlet 层（例如 portletrequest）传递到业务层——而不传递完整的对象。

人工创建请求对象的唯一远程意义是测试用例实现，您可以在其中组成您想要在请求中找到的内容。即使在那里，如果您为了测试手头操作的极窄部分而做太多工作来创建这样的对象，也是有争议的，但仍然：这是我唯一可以理解的想法。（并不是说没有其他人，但如果你反对，你必须给出充分的理由）

# java - 更新到 Java 7 后的 NoClassDefFoundError

> ID：12371014
> 
> 赞同：1
> 
> 时间：2012-09-11T13:37:28.087
> 
> 标签：java, log4j, noclassdeffounderror

在执行我的项目的 JAR 文件后，我得到了 NoClassDefFoundError。`java -jar myproject.jar`使用 Eclipse 进行调试工作正常，但是自从我安装了 JDK 1.7 以来，每当我使用 windows 命令时都会出现此错误。

使用 Java 1.6 运行良好。

这是错误日志：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/log4j/Layout
at program.Main.main(Main.java:20)
Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Layout
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 1 more 
```

我对此进行了谷歌搜索，但找不到正确的解决方案。

我已经做了什么：-卸载 Java 1.7，安装 1.6 -检查类路径 -在另一台计算机上尝试（在从中卸载 Java 1.7 之后）-创建一个空项目，并引用 log4j 库 => 同样的问题

这是类路径文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath> 
<classpathentry kind="src" path="src"/> 
<classpathentry kind="con"path="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/JavaSE-1.6"/>
<classpathentry kind="lib" path="lib/RXTXcomm.jar"/> 
<classpathentry kind="lib" path="lib/log4j-1.2.15.jar"/> 
<classpathentry kind="output" path="bin"/> 
</classpath> 
```

你知道我还应该做什么吗？

谢谢，

尼尔斯

编辑：如果我将项目导出为“可运行 JAR”而不是简单的“JAR”，程序将启动但无法使用我正在使用的另一个库（RxtxComm）。这是我得到的日志：

```
java.lang.UnsatisfiedLinkError: no rxtxSerial in java.library.path thrown while loading gnu.io.RXTXCommDriver 
```

EDIT2：我终于通过将 rxtxSerial.dll 放在 Windows/system32 文件夹中解决了最后一个问题。但是，我仍然不明白如果我将项目导出为 JAR 文件，为什么它不再起作用，以及为什么我现在需要使用 dll 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:43:40.550

运行 jar 文件时，您确定 log4j 的 jar 在类路径中吗？检查是否：

*   你有一个 CLASSPATH 系统变量，其中包含 log4j 的 jar 所在的文件夹

*   您在启动 jar 时将该 log4j jar 文件夹作为参数传递

    java -jar yourJar.jar -classpath c:\myLog4JJarFolder

更新：

根据 Andrew Thompson 的评论，使用 -jar 参数将使您的 -classpath 参数无用（它将被忽略）。为了能够在命令行中指定类路径，您还必须使用主类的完全限定名称作为启动参数：

```
java -classpath "c:\dir1;c:\dir2" package.subPackage.MainClass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:52:29.923

除了上述之外，我还要检查几件事：

*   确保您已将所有资源打包在可执行 JAR 中。提取你的罐子，看看只是为了确保。

*   将 jar 添加到类路径中：

    java -cp [jar here] main.java

# iphone - iPhone - 如何设计使 UITableView 可以显示大量项目？

> ID：12371019
> 
> 赞同：1
> 
> 时间：2012-09-11T13:37:46.420
> 
> 标签：iphone, performance, uitableview, core-data

我在 CoreData 数据库中有大量项目。一个item其实就是一个新闻实体，有tile、summary、content等。

我也有一个 UITableView。我正在做的是从 CoreData 数据库中读取项目（不仅仅是一次读取，但最终可能全部读取）并将它们显示在 UITableView 中。

假设`the number of items is very very big`不可能将所有项目读入内存，所以我需要一个缓冲的东西来将它们全部显示在 UITableView 中。

我知道这`NSFetchedResultController`是可以根据需要加载数据的候选者。

但是，我认为它只是阅读越来越多，从不倾倒东西，对吧？

**那么，就我而言，如何从两端动态加载/卸载项目？**

更准确地说，如果我向下滚动 UITableView，那么我应该在该方向加载更多项目并从相反方向从内存中删除项目。

有没有方便的方法或自动的方法呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:41:57.073

是的，使用 NSFetchRequest 的 setBatchSize: 方法。这将允许 NSFetchedResultsController 实例仅将 batchSize 的数量保存到内存中。[这](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html)是 NSFetchRequest 的文档。

# java - java、regexp和简单的html嵌套：无法进入文本

> ID：12371024
> 
> 赞同：1
> 
> 时间：2012-09-11T13:38:05.840
> 
> 标签：java, html, regex

我对正则表达式模式匹配有一个奇怪的行为

正则表达式是：

```
String regexp = "<h3.*>(.*)</h3>"; 
```

我有第一个案例：

```
<h3 class="pubAdTitleBlock">Title</h3> 
```

在这种情况下，一切正常，matcher.group(1) 给我“标题”

我是第二种情况，我有一个嵌套在 h3 中的链接，如下所示：

```
<h3 class="pubAdTitleBlock "><a href="myLink" title="title">Title</a></h3> 
```

**这就是问题**

在这种情况下 - matcher.find() 为真， - matcher.group(0) 为完整字符串， - 但 matcher.group(1)**为空字符串**

为什么 ？

我需要在里面`<h3 ..>title</h3>`和里面提取标题`<h3 ...><a ...>title</a></h3>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:43:58.210

`<h3.*>`捕获`<h3 class="pubAdTitleBlock "><a href="myLink" title="title">`是因为正则表达式默认使用贪婪匹配算法。如果您希望它在 > 的第一个匹配后停止，则需要在 * 之后使用问号。试试这个：`<h3.*?>(.*)</h3>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:43:41.500

第一个`.*`将捕获，`" class="pubAdTitleBlock "><a href="myLink" title="title">Title</a"`仅在捕获组之间留下零宽度空间。`</a>``</h3>`

您需要将其更改为类似的`[^>]*`内容（即“除 > 之外的任何内容”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T13:53:07.723

答案是正则表达式的“贪婪”。在您的正则表达式中使用“大于”字符：

```
<h3.*>(.*)</h3>
     ^this one 
```

您希望这将匹配开始 h3 标记的结尾，这将导致您的捕获组包含 h3 标记内的所有内容，就像第一个示例一样。

不过，正则表达式是贪婪的，这意味着它们会尝试尽可能多地使用文本。这导致您的正则表达式的第一部分，即

```
<h3.*> 
```

匹配整个部分：

```
<h3 class="pubAdTitleBlock "><a href="myLink" title="title">Title</a> 
```

请注意，匹配的字符串以与您的正则表达式 ( ) 相同的字符结尾`>`。`>`该组现在捕获 this和 之间的剩余文本`</h3>`，这是一个空字符串。

有 3 个适合的解决方案。

*   使用 xml 解析器，然后使用 xpath 来获取 h3 标记的内容（由于外部库等导致大量开销，但对于更大的项目来说绝对必须具备）
*   通过附加 a使`*`-operator 非贪婪`?`，使 regex `<h3.*?>(.*)</h3>`。[在这里](http://www.regular-expressions.info/repeat.html)查看更多信息。
*   修改正则表达式以在 h3 标记（并且没有其他标记！）关闭时立即开始捕获：`<h3[^>]*>(.*)</h3>`

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:50:30.023

感谢 Namida Aneskans，解决方案是：

```
String regexp = "<h3[^>]*>(<a[^>]*>)?([^<]+)(</a>)?</h3>"; 
```

所以第一组和第三组可以是空的，但第二组总是标题，谢谢！

# postgresql - Postgres 查询返回的不仅仅是 array_agg

> ID：12371026
> 
> 赞同：1
> 
> 时间：2012-09-11T13:38:12.003
> 
> 标签：postgresql, postgresql-8.4

这是数据的格式：

```
item_name | item_serial | sub_group | conc_stuff | other_data | more_data
----------+-------------+-----------+------------+------------+-----------
foo        bar-01-a      widget      b-3          towel        dent
foo        bar-02-a      widget      a-1          42           mouse
foo        bar-03-a      widget      p-1          babel        dolphin
foo3       bar-21-f      widget      f-1          42           marvin
foo3       bar-22-f      widget      x-1          poetry       vogon 
```

我已经让查询按照我想要的方式执行，问题是我需要返回更多数据。

```
SELECT item_name, 
       array_to_string(array_agg(conc_stuff), ',') as stuff 
FROM dataset 
WHERE some_selector = 'X' 
GROUP BY item_name 
ORDER BY item_name; 
```

我尝试了对我来说似乎简单但合乎逻辑的方法：

```
SELECT item_name, 
       item_serial, 
       sub_group, 
       array_to_string(array_agg(conc_stuff), ',') as stuff 
FROM dataset 
WHERE some_selector = 'X' 
GROUP BY item_name 
ORDER BY item_name; 
```

我需要返回如下所示的内容：

```
item_name | item_serial | sub_group |   stuff
----------+-------------+-----------+-------------
foo        bar-01-a      widget      a-1,b-3,p-1
foo3       bar-21-f      widget      f-1,x-1,g-5
foo6       bar-81-z      widget      r-1,d-8,w-0 
```

而不仅仅是这个：

```
item_name |   stuff
----------+--------------
foo        a-1,b-3,p-1
foo3       f-1,x-1,g-5
foo6       r-1,d-8,w-0 
```

当我尝试向查询添加其他字段时，我得到：

`ERROR: column "stuff.item_serial" must appear in the GROUP BY clause or be used in an aggregate function`

但是我不想`GROUP BY`item_serial，我只是希望它与聚合一起返回，对吗？

我需要运行子查询吗？我相信这很简单。如果有多种方法，哪种方法最有效？我将连接的一些文本是坐标（大字符串文本）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T20:17:42.417

您需要为您拥有的每个名称选择一个值。您不能让每个名称只返回一次，但`item_serial`多次返回值。

通过聚合函数从存在的值中选择一个值作为组值：

```
SELECT item_name,
       min(item_serial),
       min(sub_group),
       array_to_string(array_agg(conc_stuff),',') AS stuff
FROM dataset
WHERE sub_group = 'widget'
GROUP BY item_name
ORDER BY item_name; 
```

这会选择“第一个”`item_serial`和`sub_group`每个名称。

如果您想要最后一个值，请`max`改用。

但要理解的重要一点是，您必须为未分组的列选择一个值。您需要通过提供一个选择**一个**值的聚合函数来准确地告诉 DBMS 它应该使用哪一个。

SQLFiddle 示例：[http ://www.sqlfiddle.com/#!1/58009/1](http://www.sqlfiddle.com/#!1/58009/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T19:03:33.410

在这方面，Postgres 8.4 比 Pg 的最新版本要严格一些。使用 a 时`GROUP BY`，需要对所有不包含聚合函数的字段进行分组。

从 Pg9.1 开始，如果您使用`GROUP BY`主键，则可以省略所有其他非分组字段。

希望能帮助到你。

编辑：

```
SELECT 
  item_name, 
  item_serial, 
  sub_group, 
  array_to_string(array_agg(conc_stuff), ',') as stuff 
FROM 
  dataset 
WHERE 
  some_selector = 'X' 
GROUP BY 
  item_name,
  item_serial,
  sub_group 
ORDER BY 
  item_name; 
```

# c# - 哪个是测试 Ninject 绑定的好方法？

> ID：12371027
> 
> 赞同：25
> 
> 时间：2012-09-11T13:38:13.640
> 
> 标签：c#, dependency-injection, ninject, ioc-container

我们在所有项目中都使用 ninject，如您所知，有时很难测试内核是否能够在执行时解析每种类型，因为有时当绑定和自动绑定的大小（通过 ninject 扩展） 高。

所以，我在这里要问的是，我如何知道我的内核在加载所有模块和绑定后，能够解析每种类型？你做任何类型的单元测试吗？或者您只是在执行时对应用程序进行验收测试？任何建议都会很棒:)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-11T19:29:57.537

编写一个集成测试，通过循环应用程序中的所有根类型并从容器/内核请求它们来测试容器的配置。通过从容器中请求它们，您可以确定容器可以为您构建完整的对象图。

根类型是直接从容器请求的类型。大多数类型不是根类型，而是对象图的一部分（因为您应该很少从应用程序中回调容器）。当您测试根类型的创建时，您将立即测试该根类型的所有依赖项的创建，除非存在代理、工厂或其他可能延迟构建过程的机制。然而，延迟构建过程的机制确实指向其他根对象。您应该识别它们并测试它们的创建。

通过调用每种根类型的容器来防止自己进行大规模测试。相反，使用反射加载（如果可能）所有根类型并对其进行迭代。通过使用某种约定优于配置的方法，您可以避免 1\. 为每个新的根类型更改测试，以及 2\. 在您忘记为新的根类型添加测试时防止测试不完整。

这是 ASP.NET MVC 的示例，其中您的根类型是控制器：

```
[TestMethod]
public void CompositionRoot_IntegrationTest()
{
    // Arrange
    CompositionRoot.Bootstrap();

    var mvcAssembly = typeof(HomeController).Assembly;

    var controllerTypes =
        from type in mvcAssembly.GetExportedTypes()
        where typeof(IController).IsAssignableFrom(type)
        where !type.IsAbstract
        where !type.IsGenericTypeDefinition
        where type.Name.EndsWith("Controller")
        select type;

    // Act
    foreach (var controllerType in controllerTypes)
    {
        CompositionRoot.GetInstance(controllerType);
    }
} 
```

**更新**

塞巴斯蒂安·韦伯（Sebastian Weber）提出了一个有趣的评论，我想对此作出回应。

> 使用容器支持 (Func) 或容器生成的工厂（如 Castle 的 Typed Factory Facility）来延迟创建对象呢？你不会用那种测试抓住他们。那会给你一种虚假的安全感。

我的建议是验证所有***根类型***。以延迟方式创建的服务实际上是根类型，因此应该明确地测试它们。这当然会迫使您密切监视对配置的更改，并在您检测到添加了无法使用您已有的约定优于配置测试进行测试的新根类型时添加测试。这还不错，因为没有人说使用 DI 和 DI 容器意味着我们可能会突然变得粗心。无论您是否使用 DI，创建好的软件都需要纪律。

当然，当您有许多延迟创建的注册时，这种方法会变得非常不方便。在这种情况下，您的应用程序的设计可能有问题，因为使用延迟创建应该是例外，而不是常态。另一件可能会给您带来麻烦的事情是，当您的容器允许您`Func<T>`通过将它们映射到`() => container.GetInstance<T>()`委托来解决未注册的注册时。这听起来不错，但这迫使您超越容器注册来寻找根类型，并且更容易错过。由于延迟创建的使用应该是例外，因此最好使用显式注册。

另请注意，即使您无法 100% 测试您的配置，但这并不意味着这会使测试配置毫无用处。我们无法自动测试 100% 的软件，应特别注意无法自动测试的软件/配置部分。例如，您可以将不可测试的部分添加到手动测试脚本中，然后手动测试它们。当然，您必须手动测试的次数越多，出错的可能性（也将会）越多，因此您应该尝试最大限度地提高配置的可测试性（就像您应该对所有软件所做的那样）。当你不知道你的测试是什么时，你当然会得到一种错误的安全感，但同样，这适用于我们职业中的一切。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-16T15:14:49.833

> 所以，我在这里要问的是，我如何知道我的内核在加载所有模块和绑定后，能够解析每种类型？你做任何类型的单元测试吗？

我通过遍历模块中的每个绑定并检查内核是否可以为它们返回一些东西来测试这一点：

```
[Test]
public void AllModuleBindingsTest()
{
    var kernel = new StandardKernel(new MyNinjectModule())
    foreach (var binding in new MyNinjectModule().Bindings)
    {
        var result = kernel.Get(binding.Service);
        Assert.NotNull(result, $"Could not get {binding.Service}");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-15T18:47:13.543

根据欧文的回答，但这对我不起作用。我所要做的就是将我的依赖项的新实例传递给一个新的内核实例，然后`Bindings`填充该属性。

```
 [TestMethod]
    public void TestBindings
    {
        var dependencies = new MyDependencies();
        var kernel = new StandardKernel(dependencies);

        foreach (var binding in dependencies.Bindings)
        {
            kernel.Get(binding.Service);
        }
    } 
```

我还选择使用`kernal.Get`，以便如果无法解析服务，则测试将因抛出错误而失败，并在消息中显示缺少的绑定

# c# - 有什么可以在 C# 中实现快速随机访问列表的吗？

> ID：12371031
> 
> 赞同：3
> 
> 时间：2012-09-11T13:38:27.733
> 
> 标签：c#, .net, list, dictionary, hashtable

我找到`OrderedDictionary`了，但它并没有完全符合我的要求。`OrderedDictionary`似乎呈现数据的字典或列表视图，但您不能很好地在它们之间交叉。

例如

```
OrderedDictionary mylist = new OrderedDictionary();

mylist.Add(1, "Hello");
mylist.Add(4, "World");
mylist.Add(7, "Foo");
mylist.Add(9, "Bar"); 
```

使用这段代码，我可以直接访问`mylist[7]`和获取`"Foo"`，或者我可以以正确的顺序遍历内容，但我无法快速回答“列表中 Foo 后面的内容是什么？”这个问题。

我想要的是这样的：

```
mylist.GetNode(7).Next.Value => "Bar" 
```

.NET 和 C# 中是否有任何可用的东西可以执行此任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:54:38.313

使用[`SortedList`](http://msdn.microsoft.com/en-us/library/ms132319.aspx)类（是的，我们必须击败那个叫`SortedList`这个名字的家伙）。

```
static class SortedListExtensions
{
    public static TValue GetNextValueOrDefault<TKey, TValue>(this SortedList<TKey, TValue> list, TKey key)
    {
        var indexOfKey = list.IndexOfKey(key);

        if (indexOfKey == -1)
            return default(TValue);

        if (++indexOfKey == list.Count)
            return default(TValue);

        return list.Values[indexOfKey];
    }
}

var myList = new SortedList<int, string>
{
    { 1, "Hello" },
    { 4, "World" },
    { 7, "Foo" },
    { 9, "Bar" },
};

Console.WriteLine(myList.GetNextValueOrDefault(7)); // "Bar"
Console.WriteLine(myList.GetNextValueOrDefault(9)); // null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:43:20.547

为什么不能只在索引中添加一个？

```
mylist[3] == "Foo";
mylist[3 + 1] == "Bar"; 
```

如果数据结构支持随机访问，我看不出您为什么要添加链表样式行为。

**编辑**

看起来虽然`OrderedDictionary`可以使用索引和键，但[请参阅 MSDN](http://msdn.microsoft.com/en-us/library/ms132598.aspx)

否则，您可以很容易地添加自己的“下一步”指针：

```
class DictionaryNode {
  public int? Next { get; set; }
  public string Value { get; set; }
}

// Inside the appropriate class
int? lastKey = null;

void AddItem(int key, string value) {
  mylist.Add(key, new DictionaryNode { Next = null, Value = value });
  if (lastKey.HasValue) {
    mylist[lastKey].Next = key;
  }
  lastKey = key;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:07:20.710

丑陋，但是您可以像这样即时执行此操作：

```
OrderedDictionary mylist = new OrderedDictionary(); 
mylist.Add(1, "Hello"); 
mylist.Add(4, "World"); 
mylist.Add(7, "Foo"); 
mylist.Add(9, "Bar");

int key = 7;
Console.WriteLine("value: " + mylist[key as object]);
var nextKeys = mylist.Keys.Cast<int>().Where(i => i > key);
if (nextKeys.Count() == 0)
    Console.WriteLine("next value: (none)");
else
    Console.WriteLine("next value: " + mylist[nextKeys.Min() as object]); 
```

# ruby-on-rails - 如何隐藏图像的物理路径

> ID：12371032
> 
> 赞同：1
> 
> 时间：2012-09-11T13:38:29.683
> 
> 标签：ruby-on-rails, image, path, cakephp-2.0, gravatar

在我的应用程序中，我通过提供目录的物理路径来显示用户的图像，例如[http://www.example.com/user_images/abcdefghijk.jpg](http://www.example.com/user_images/abcdefghijk.jpg)

但我不想将此物理路径公开给外部用户以访问直接文件。我想按照gravtar类型的图像显示来实现图像检索。我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:46:00.977

在 PHP 中，您可以使用 GD 库来读取图像。因此，您需要创建 image.php 文件并使用以下代码的唯一方法，

```
<?php
$imagepath="your image physical path";

$image=imagecreatefromjpeg($imagepath);

header('Content-Type: image/jpeg');
imagejpeg($image);
?> 
```

这适用于所有其他图像的 jpg 图像，您可以使用 GD 库的不同功能。

所以 Gravtar.com 使用上面的方式来显示图像 :)

在 ROR 中，您可以使用 Rmagick gem 读取图像并以相同的方式显示图像。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T07:14:31.367

在php中，您可以在会话中保存一个变量并将其附加到图像的路径中

```
<img src="php_function.php?token=1234" /> 
```

并在 php 文件中获取从会话读取其实际路径的图像并返回内容`file_get_contents`

这里是源[http://hashmode.com/hide-image-path-php/9](http://hashmode.com/hide-image-path-php/9)

# javascript - 两个重叠的DOM元素之间的jQuery优先级

> ID：12371038
> 
> 赞同：0
> 
> 时间：2012-09-11T13:38:45.887
> 
> 标签：javascript, jquery, html, ruby-on-rails

我在制作的导航栏中有两个 div，当窗口对于所有选项卡都太小时，最右边的一个将留在屏幕上，而其他选项卡将滑到它后面。所有选项卡上都有 jquery .hover 事件侦听器，当右侧选项卡位于其他选项卡上方时，其他选项卡将触发而不是右侧选项卡。我试过重新排序 html 和 js，但都没有改变。

# ruby-on-rails - 如何在 Rails 中清理我的查找或创建代码

> ID：12371039
> 
> 赞同：0
> 
> 时间：2012-09-11T13:38:46.943
> 
> 标签：ruby-on-rails

我有这行代码来查找数据库中的行，或者创建一个新行。正在工作，但它看起来非常丑陋且难以维护。

```
return_policy_id= MyEbayReturnPolicy.find_or_create_by_active_and_name_and_ebay_marketplace_id_and_returns_within_and_returns_accepted_and_warranty_offered_and_warranty_duration_and_warranty_type_and_shipping_costs_paid_by_and_refunds(active,name,ebay_marketplace_id,returns_within,returns_accepted,warrenty_offered,warranty_duration,warranty_type,shipping_costs_paid_by,refunds) 
```

这是 find_or_create 代码

```
 def self.find_or_create(search, *args, &block)
    parameters = search.split("_and_")
    params = Hash[ parameters.zip(args) ]
    obj = where(params).first 
    if(obj.nil?)
       obj = self.new(params);
       obj.save
    end
    return obj;
  end 
```

如您所见，这是非常长的代码行。

我想知道是否有更好的方法让这段代码看起来漂亮干净，易于维护。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:51:54.430

Rails 3.2 引入了[first_or_create](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-first_or_create)（以及其他类似方法）。您可以利用它：

```
MyEbayReturnPolicy.where(
    active:                 active,
    name:                   name,
    ebay_marketplace_id:    ebay_marketplace_id,
    returns_within:         returns_within,
    returns_accepted:       returns_accepted,
    warranty_offered:       warranty_offered,
    warranty_duration:      warranty_duration,
    warranty_type:          warranty_type,
    shipping_costs_paid_by: shipping_costs_paid_by,
    refunds:                refunds
).first_or_create 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:44:17.900

根据我的建议条件太多，`scope`为上述属性创建您可以通过某种元编程方式来执行此操作也可以减少代码，首先通过链接范围找出是否找到然后返回或创建记录

# c# - Visual Studio 2012 中“Visual Studio Setup (*.vdproj)”的替换选项

> ID：12371041
> 
> 赞同：0
> 
> 时间：2012-09-11T13:38:55.657
> 
> 标签：c#, windows-installer, visual-studio-2012

按照微软的说法，他们已经停止支持经典的“Visual Studio Setup (*.vdproj)”项目。

[http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)

所以我正在寻找替代品的更好选择。

在手：`Wix`&`InstallShield`

请给点建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:40:51.363

你手中的就是答案，[Wix](http://wixtoolset.org/)。Visual Studio 本身使用 Wix 作为其设置。

# iphone - 如何在 iPhone 设备中存储（下载）文件？

> ID：12371049
> 
> 赞同：0
> 
> 时间：2012-09-11T13:39:24.550
> 
> 标签：iphone, path, download, device, dropbox

目前我在 iPhone 中使用简单的 Dropbox 应用程序，使用 Dropbox_SDK 开发这个应用程序，我必须在 drop box 路径文件夹中存储一个文件并且它的工作正常，然后我尝试从 Dropbox 中检索（下载）该文件并存储在里面iPhone设备，但是设备路径，我不知道，如何设置设备路径？请帮我

提前致谢

我试过这个供你参考：

```
- (void)viewDidLoad
{
    NSString *DropBoxpath = @"/Public/sam.txt";
    NSString *devicepath = [[NSBundle mainBundle] pathForResource:@"Info" ofType:@"plist"];
    [[self restClient] loadFile:DropBoxpath destDir:devicepath];
}
- (void)restClient:(DBRestClient*)client loadedFile:(NSString*)localPath
{
    NSLog(@"File loaded into path: %@", localPath);
}

- (void)restClient:(DBRestClient*)client loadFileFailedWithError:(NSError*)error {
    NSLog(@"There was an error loading the file - %@", error);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:13:29.007

You Have to use NSFileManager and document directory for saving files. NSFieManager operation is needed for same. You can also use third party API for downloading

[https://github.com/H2CO3/HCDownload/](https://github.com/H2CO3/HCDownload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:17:33.847

这是用于下载文件表单保管箱：

```
 -(void) DBdownload:(id)sender
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
        NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Example.txt"];
        NSError *error;

        [self.restClient loadFile:@"/example/Example.txt" intoPath:filePath];

        if (filePath) { // check if file exists - if so load it:
            NSString *tempTextOut = [NSString stringWithContentsOfFile:filePath
                                                              encoding:NSUTF8StringEncoding
                                                                 error:&error];
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:52:35.013

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
         NSString *filePath = [NSString stringWithFormat:@"%@/", [paths objectAtIndex:0]];   

    //    // Download and write to file
         NSURL *url = [NSURL URLWithString:@"dropbox url.com"];
         NSData *urlData = [NSData dataWithContentsOfURL:url];

         [urlData writeToFile:filePath atomically:YES]; 
```

# html - 为 iOS Safari 网站渲染设置默认 100% 缩放

> ID：12371051
> 
> 赞同：5
> 
> 时间：2012-09-11T13:39:28.513
> 
> 标签：html, mobile-safari

我的网页比 iPad 分辨率略大，所以当我在 iPad Safari 窗口中打开它时，它可以水平滚动。当我捏出视图时，该网站看起来很完美。我可以通过设置一些标签`viewport`或其他标签来让页面在加载后立即完全显示吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T13:42:02.350

这样：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

文档：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-11T13:43:08.213

这也阻止了用户重新缩放页面，您可以通过将 user-scalable 更改为 1 或通过更改 maximum-scale 来限制可扩展性来切换它

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"> 
```

# php - Pear Mail 包 - 在电子邮件正文中嵌入 URL

> ID：12371063
> 
> 赞同：0
> 
> 时间：2012-09-11T13:40:11.567
> 
> 标签：php, email, gmail, pear

我正在使用 Pear Mail 包通过 G-Mail（使用 SMTP）为我正在开发的网站发送电子邮件。当有人在网站上注册时，用户必须首先单击他们收到的确认电子邮件中的链接，然后才能创建帐户。我遇到的问题是，我在电子邮件中嵌入的 URL 在我输入时按字面意思显示（显示 HTML 标记），即

```
<a href = '...'>...</a> 
```

而不是作为可点击的 URL。关于如何使网址可点击的任何建议？我的代码或多或少与以下问题相同：[Send email using the GMail SMTP server from a PHP page](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

```
<?php

require_once "/Mail/Mail-1.2.0/Mail.php";
require_once "/Mail/Mail-1.2.0/Mail_Mime-1.8.5/Mail/mime.php";

$from = "XYZ <XYZ.gmail.com>";
$email = $_GET['e'];
$to = $email;
$subject = "XYZ - Registration";
$body = "<html><body>Hi " . $_GET['f'] . ",\n\nThank You For Registering With XYZ\n\nPlease Click The Following Link To Confirm Your Account: <a href = 'www.test.com'>www.test.com</a></body></html>";
$crlf = "\n";

$mime = new Mail_mime($crlf);
$mime->setHTMLBody($body);
$body = $mime->get();

$host = "ssl://smtp.gmail.com";
$port = "465";
$username = "XYZ";
$password = "XYZPassword";

$headers = array ('From' => $from, 'To' => $to, 'Subject' => $subject);
$smtp = Mail::factory('smtp', array('host' => $host, 'port' => $port, 'auth' => true, 'username' => $username, 'password' => $password)   );

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) 
{

    echo("<p>" . $mail->getMessage() . "</p>");

} 

else 
{

    echo("<p>Message successfully sent!</p>");

}

?> 
```

任何帮助深表感谢，

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:33:30.090

感谢@andrewsi 的帮助。只需要花一些时间来使他的示例与 G-Mail 一起工作。

```
<?php

require_once "/Mail/Mail-1.2.0/Mail.php";
require_once "/Mail/Mail-1.2.0/Mail_Mime-1.8.5/Mail/mime.php";

$from = "XYZ <XYZ.gmail.com>";
$email = $_GET['e'];
$to = $email;
$subject = "xyz - Registration";
$body = "<html><body>Hi " . $_GET['f'] . ",\n\nThank You For Registering With xyz\n\nPlease Click The Following Link To Confirm Your Account: <a href = 'www.test.com'>www.test.com</a></body></html>";

$host = "ssl://smtp.gmail.com";
$port = "465";
$username = "XYZ";
$password = "XYZPassword";

$crlf = "\n";
$hdrs = array(
              'From'    => $from,
              'Subject' => $subject
              );

$mime = new Mail_mime(array('eol' => $crlf));

$mime->setHTMLBody($body);

$body = $mime->get();
$hdrs = $mime->headers($hdrs);
$mail =& Mail::factory('smtp', array('host' => $host, 'port' => $port, 'auth' => true, 'username' => $username, 'password' => $password)    );
$mail->send($to, $hdrs, $body);

if (PEAR::isError($mail)) 
{

    echo("<p>" . $mail->getMessage() . "</p>");

} 

else 
{

    echo("<p>Message successfully sent!</p>");

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:52:47.443

查看[PEAR 手册页](http://pear.php.net/manual/en/package.mail.mail-mime.example.php)：

```
<?php

include 'Mail.php';
include 'Mail/mime.php' ;

$text = 'Text version of email';
$html = '<html><body>HTML version of email</body></html>';
$file = '/home/richard/example.php';
$crlf = "\n";
$hdrs = array(
              'From'    => 'you@yourdomain.com',
              'Subject' => 'Test mime message'
              );

$mime = new Mail_mime(array('eol' => $crlf));

$mime->setTXTBody($text);
$mime->setHTMLBody($html);
$mime->addAttachment($file, 'text/plain');

$body = $mime->get();
$hdrs = $mime->headers($hdrs);

$mail =& Mail::factory('mail');
$mail->send('postmaster@localhost', $hdrs, $body);

?> 
```

如果您没有明确告诉它，它假定您正在发送纯文本电子邮件，因此接收客户端不会解析您的链接。

# arm - 补偿ARM中断的延迟？

> ID：12371064
> 
> 赞同：5
> 
> 时间：2012-09-11T13:40:13.307
> 
> 标签：arm, counter, interrupt, stm32, low-latency

我正在 STM32F4 CPU 上开发一个项目，生成信号。

我在 STM32 上的 CPU 时钟（无预分频器）上有一个通用定时器，在溢出时触发中断，之后使用 GPIO 生成周期性信号。

我需要在非常精确的时间触发 GPIO（基本上低至一个 CPU 周期精度）。我已经设法通过设置优先级和 al 将这种抖动减少到 +-5 个周期，但是这种抖动存在，具体取决于 CPU 正在做什么。

我需要补偿这几个周期的抖动。只要我在精确的时间切换 GPIO，增加几个周期的延迟就不是问题。

我的想法是读取计数器的当前值，并有一个 FIXED_NUMBER-CURRENT_VALUE 时间的活动循环，确保我会在精确的时间退出循环。

然而，在 C 中做一个简单的循环——作为一个 FOR 循环，或者一个 while(counter->value < TARGET) 不起作用，因为它增加了抖动而不是减少它。

我做错了什么/天真吗？我应该在汇编中这样做吗？这与 C 有何不同（我用 GCC 检查了反汇编以检查循环没有被优化掉，也没有达到内存？）

（我确保使用空的、未优化但未命中内存循环体）

*编辑*：在 AVR 上查看这个示例（我知道更稳定） 参见示例[http://lucidscience.com/pro-vga%20video%20generator-7.aspx](http://lucidscience.com/pro-vga%20video%20generator-7.aspx) （搜索“jitter”）

*edit2*：我在程序集中尝试了一个简单的循环，例如（r0 是我的计数器，要等待的周期数，在寄存器中）

```
loop : SUBS r0,#1 ; tried with 2 also
       BGE loop 
```

而且，没有它，抖动会更好。

总而言之，我已经*知道*我应该延迟多少。我只需要一种方法让代码分支在一个案例中可靠地消耗 N 个周期，在另一个案例中消耗 M 个周期。不幸的是，单独的分支似乎不起作用，因为管道重新填充似乎不需要*可靠*数量的周期，而条件表达式也不是，因为它们总是需要相同数量的周期（有时什么都不做）。

从 RAM 而不是闪存运行会提高一致性吗？（NB stm32f4 有一个闪存预取..）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-12T17:20:10.353

*（具有讽刺意味的是，关于减少响应延迟的问题花了三年时间才得到答案。）*

+/- 5 个周期听起来非常熟悉。在中断调度期间，您可能会遇到访问 Flash 控制器的等待状态。

CPU在中断调度期间需要做三件事：

1.  加载向量表条目。
2.  加载中断例程的初始代码。
3.  将一些寄存器写入堆栈。

如果您的向量表和/或中断程序代码在 Flash 中，则第 1 项和第 2 项中的取指将转到 Flash。当 CPU 以最高额定速度（高达 168MHz）运行时，对 Flash 的访问需要五个等待状态。这意味着对 Flash 的访问可能需要 1 或 6 个周期，具体取决于所请求的数据是否在 Flash 缓存中。如果您*正好*看到0 或 5 个延迟周期，这可能是罪魁祸首。*通过将 ISR 代码和向量表*移动到 RAM中最容易解决此问题。您还可以通过禁用 Flash 缓存来“修复”它，这将导致 Flash 访问速度变慢。

有一个隐秘的因素也可能会咬你：如果*被中断*的代码也在使用 Flash，那么中断调度可能必须等待*其*Flash 访问完成，假设它未命中缓存。您也可以通过将*中断*的代码移动到 RAM 中来解决此问题，但此时它开始听起来好像 Flash 中没有任何内容。有一种方法可以将代码保存在我在下面提到的 Flash 中。

最后，还有一个*更隐秘*的事情：如果您有其他中断可能*在*您的延迟敏感中断之前发生，那么该中断可能会由于[尾链](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0337e/Babjagdg.html)而获得 -5 个延迟周期。

我对我列出的后两个问题的解决方案有点奇怪：确保处理器处于空闲状态，即当您的中断发生时，不接受另一个中断或从 Flash 获取。*我这样做的方法是通过配置一个较低优先级的中断在我的延迟敏感中断之前*到达（使用计时器）；ISR 只是执行一条等待中断指令，`wfi`.

这些都是可以克服的问题。我不同意您需要放弃 C 并用汇编语言编写的评论者；我的[m4vgalib](http://cliffle.com/project/m4vgalib/)系统几乎不包含汇编语言，并且抖动非常低。

[我在博客上的一篇文章](http://cliffle.com/article/2015/06/11/matrix/#how-to-mess-up-an-entire-scanline)中更详细地讨论了这些相同的问题和我的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-30T20:32:48.677

Cliff 是正确的，没有办法在具有中断、闪存等待状态和流水线的 CPU 内核上获得单个 CPU 周期的精度。AFAIK，有点奇怪的视差“螺旋桨”是少数可以保证周期时间一致性的“高性能”MCU 内核之一，因为它不支持中断（而是“旋转”访问集线器中的 8 个内核）。

# transformation - Cg几何着色器中的世界空间视图方向

> ID：12371065
> 
> 赞同：0
> 
> 时间：2012-09-11T13:40:19.620
> 
> 标签：transformation, gpu, cg, geometry-shader

如何在 Cg 几何着色器内的世界空间中获取视图方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:27:28.873

它将在视图矩阵中。根据您的列主要或列次要排序，它将位于 viewXf[3].xyz 或 flaot3(viewXf[0].w,viewXf[1].w,viewXf[2].w) 中。根据需要否定以匹配您的其他数学。

# c# - 如何将值从复选框传递到控制器？

> ID：12371066
> 
> 赞同：0
> 
> 时间：2012-09-11T13:40:27.797
> 
> 标签：c#, asp.net-mvc-3, checkbox

我有一个包含列表和过滤器选项的视图。我需要添加选项以立即更新列表中的选定项目。带有列表和过滤器选项的视图简而言之如下：

```
 @model GWeb.Models.FilterModel
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
   <fieldset>
        <legend>Search criteria</legend>
            @Html.LabelFor(model => model.ProjectId, "Project")       
            @Html.DropDownList("ProjectId",
            new SelectList(ViewBag.projectListDesciption as System.Collections.IEnumerable, "Id", "Desciption"), "all")

            @Html.LabelFor(model => model.StartWork, "From Date")       
            @(Html.Telerik().DatePicker()
            .Name("StartWork")
            .Value(Model.StartWork))  

        <input type="submit" value="Filter" name="submitButton"/>
    </fieldset>  
    <fieldset>
        <legend>Status change</legend>        
            Change status on selected:        
            @Html.DropDownList("Status",
             new SelectList(ViewBag.statusList as System.Collections.IEnumerable, "Id", "Description"))

        <input type="submit" value="Update" name="submitButton"/>
    </fieldset>
}

@{Html.RenderPartial("WorkList", Model.workList);} 
```

在局部视图中呈现列表的位置，简而言之，如下所示：

```
@model IEnumerable<GWeb.Models.WorkModel>   
    @foreach (var item in Model)
    {
        <tr>
            <td>
            @Html.CheckBox("chb" + item.Id, item.Selected)
            </td>
            ...
        </tr>
    } 
```

以下是使用的模型：

```
 public class FilterModel
    { 
        public int ProjectId { get; set; }         
        public DateTime? StartWork { get; set; }  
        public int? Status { get; set; }

        public List<WorkModel> workList { get; set; }
    }

    public class WorkModel
    {
        public int Id { get; set; }
        ...         
        public bool Selected { get; set; }
    } 
```

在控制器中，我正在检查单击了哪个按钮。如果是“更新”，我想进行修改。但`workFilter.workList`始终为空。

```
public ActionResult WorkManager(FilterModel workFilter, string submitButton)
    {            
        if (submitButton == "Update")
        {
            if (workFilter.workList != null)
            {
                //...
            }             
        }
        else
        {
           //filter
        }
        //...           
        return View(workFilter); 
```

如何签入控制器 wchich 复选框被选中进行更新？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:25:30.303

您应该看看[如何使用 MVC HTML 编辑器模板生成非顺序前缀集合索引？](https://stackoverflow.com/questions/11267354/how-to-produce-non-sequential-prefix-collection-indices-with-mvc-html-editor-tem/11267659#11267659)因为对于任何更复杂的事情，您都需要做类似的事情。

您的问题的快速解决方案是：

```
//instead of: @{Html.RenderPartial("WorkList", Model.workList);} write code below inside using statement(below </fieldset>)

    @for (int i = 0; i < Model.worklist.Count; i++)
    {
        <tr>
            <td>
            @Html.HiddenFor(x => x.workList[i].Id)
            @Html.CheckBoxFor(x => x.workList[i].Selected)
            </td>
            ...
        </tr>
    } 
```

警告：上面的代码未经测试，但我建议你看看上面的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:39:59.413

为避免 workList 为 NULL 问题，您可以将代码添加到 FilterModel 默认构造函数（无参数构造函数），以使用虚拟项目创建和初始化 workList。

请让我知道这是否可以解决问题。

**更新：**

请原谅我没有澄清在构造函数中添加代码的效果。不，它不会创建新模型。它所做的是初始化 workList 以便控制器可以访问其中的索引元素。

示例代码：

```
public FilterModel(){
  workList = new List<WorkModel>();
  for(int i = 0; i < MAX_WORKMODEL_COUNT; i++){
    workList.Add(new WorkModel());
  }
} 
```

# php - cron 作业未更新数据

> ID：12371068
> 
> 赞同：0
> 
> 时间：2012-09-11T13:40:36.187
> 
> 标签：php, pdo, cron

我正在使用 cron 作业从事务表中获取总计并更新另一个表。在我的 cron 作业电子邮件中，我返回任务已完成但没有看到我的数据发生变化。

```
 <?php

try {
    $dbh = new PDO("mysql:host=localhost;dbname=the", 'the', '1');
        $query = "UPDATE Test a 
                INNER JOIN
                (
                    SELECT ID, SUM(Total) as Total, 
                    FROM TestTrans
                    WHERE Status = ? 
                    Group By ID
                ) b
                ON a.ID = b.ID
        SET a.Total = b.Total
    Where a.Total > b.Total";

    $iStatus = 1;
    $stmt = $dbh->prepare($query);
    $stmt->bindParam(1, $iStatus);

    $stmt->execute();    

    echo 'Task Completed';
    }
    catch(PDOException $e)
    {
    echo $e->getMessage();
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:47:29.790

一些建议：

*   以与 cron 相同的方式从命令提示符手动运行脚本。例如`php myscript.php myoptions`。它有效吗？
*   将一些日志记录添加到您的 cron 作业中：

*/5 * * * * php myscript.php myoptions >> /var/log/cronrun.log 2&>1

在 /var/log/cronrun.log 文件中查找错误和线索/

# graph - 将波形图传递给 subvi 以保存到文件 - 保留轴标签

> ID：12371074
> 
> 赞同：0
> 
> 时间：2012-09-11T13:40:58.700
> 
> 标签：graph, labview

我有一个包含 2 个控件的子 vi。第一个是文件路径，标识将文件保存到哪里，第二个是波形图控件，即我要打印的图形。我可以使用调用节点将图像保存在 sub-vi 中，但问题是，它没有保留标题、x 和 y 轴标签以及我传递给 sub-vi 的其他设置。

我也尝试过作为参考，但没有成功。如果在主VI中设置了标签和其他设置，有没有办法在子VI中将图形保存为PNG？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:55:48.410

首先，您要使用导出图像调用节点，而不是获取图像。

此外，如果您在 sub-vi 中右键单击调用节点，您可以将其与绑定的控件断开连接。然后将参考线从 subvi 的终端连接连接到调用节点。

请记住，您可能需要在调用导出调用节点之前以编程方式使用属性节点设置轴标签，具体取决于您在调用 vi 中设置图表的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:36:55.647

答案是传递对 sub-vi 的引用。sub-vi 必须使用调用节点，但不绑定到实际控件，因此它使用传入的实际引用，而不是对 FP 控件的引用。

# macos - Safari 扩展向应用程序发送消息

> ID：12371075
> 
> 赞同：0
> 
> 时间：2012-09-11T13:41:01.627
> 
> 标签：macos, safari, safari-extension, browser-extension

我是制作浏览器扩展的新手。我需要为 Safari 进行扩展，以便能够启动或向用户机器上的现有应用程序发送消息。我想在 Mac 平台上做这个。我想知道这可能吗？如果可能的话，任何人都可以提供示例代码或如何完成它的方法吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:15:54.553

Safari 扩展程序至少可以通过多种方式与外界通信。可能最干净的方法是让您的扩展打开与本地计算机上运行的[WebSocket服务器的连接。](http://en.wikipedia.org/wiki/WebSocket)

```
// Inside your extension's master or local .js
WebSocket ws = new WebSocket("ws://localhost/mywebserver");
ws.onopen = function () {
    ws.send("Message to outside world");
}; 
```

[可以使用libwebsockets](http://git.warmcat.com/cgi-bin/cgit/libwebsockets/)、[jWebSocket](http://jwebsocket.org/)或[Socket.IO](http://socket.io/)等库将此服务器集成到您的应用程序中。

# excel - 缓慢执行时间批处理 .xlsx 到 .xls 的转换

> ID：12371077
> 
> 赞同：3
> 
> 时间：2012-09-11T13:41:05.500
> 
> 标签：excel, execution-time, vba

我编写了这段代码来将一堆 .xlsx 工作簿批量转换为 .xls（我有很多最终用户使用 2003）。它可以完成这项工作，但速度很慢，我在 20 个工作簿上进行了测试，每个工作簿大小只有 30 kb，本地执行需要 9.78 秒。通过我的 sharepoint 服务器，这需要 262 秒，但我相信 sharepoint 的速度非常慢是另一个问题。

**代码**

```
Option Explicit
Sub Convert_to972003()
    Dim orgwb As Workbook
    Dim mypath As String, strfilename As String
    Dim nname As String

    '--> Error Handling
    On Error GoTo WhatHappened

    '--> Disable Alerts
    With Application
        .DisplayAlerts = False
        .ScreenUpdating = False
    End With

    '--> Specify location of workbooks
    mypath = "C:\xxx"
    strfilename = Dir(mypath & "\*.xlsx", vbNormal)

    '--> Check the specified folder contains files
    If Len(strfilename) = 0 Then Exit Sub

    '--> Start Loop, end when last file reached
    Do Until strfilename = ""

    '--> Open a workbook
        Set orgwb = Application.Workbooks.Open _
        (mypath & "\" & strfilename)

        '--> Create new Filename, Save in new File Format and Close
        nname = Replace(strfilename, ".xlsx", ".xls")
        orgwb.SaveAs mypath & "\" & nname, FileFormat:=xlExcel8
        orgwb.Close
        strfilename = Dir()
    Loop

    '--> Enable Alerts
    With Application
        .DisplayAlerts = True
        .ScreenUpdating = True
    End With

Exit Sub

WhatHappened: MsgBox Err.Description

End Sub 
```

**问题**

有没有比循环文件夹/打开/保存/关闭更快的方法来转换文件格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T11:05:25.550

如果这仍然相关。当我遇到类似的问题时，我最终得到了几乎相同的代码，但是帮助我加快速度的是 disable [`Application.EnableEvents`](https://msdn.microsoft.com/en-us/library/office/ff821508.aspx)，即：

```
Application.EnableEvents = False
...
Application.EnableEvents = True 
```

在适当的部分。如果您有任何其他由各种 Excel 事件（如打开或关闭工作簿等）触发的加载项或宏，这将特别有用。

# android-ndk - 将预构建的 .so 文件添加到 android 项目并使用 dlopen 和 ndk 加载它

> ID：12371079
> 
> 赞同：0
> 
> 时间：2012-09-11T13:41:15.360
> 
> 标签：android-ndk, makefile

我也有一个预构建的共享对象文件 (mylib.so) 和 API 文件 (mylib.h)。现在我必须在我的项目中包含这些文件。我想使用本机接口调用这个库中的函数。

但是为库提供的头文件不是**JNI 特定的头文件**，它是常见的 C 头文件。我想使用加载这个库`dlopen`并使用`dlsym`. 所以我可以使用返回的函数指针调用这些函数`dlsym`。

**我的要求**

--> **Android.mk**文件

--> dlopen ( **lib_path** , RTLD_LAZY); 安装 apk 文件后**mylib.so**的路径

如果有人尝试过这样并成功了，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:58:51.310

`System.Load("my")`从第二个问题开始，调用 Java将**libmy.so**放入内存通常要容易得多，而不是使用`dlopen()`. 在您的 JNI 模块中，`dlsym()`如果需要，您仍然可以使用，但通常如果您将**libmy.so提供给****Android.mk**中的链接器，它会自动找到正确的导出函数。

请阅读相关的 NDK 文档[http://source-android.frandroid.com/ndk/docs/PREBUILTS.html](http://source-android.frandroid.com/ndk/docs/PREBUILTS.html)：它的解释非常好。

# javascript - LINK 元素是否同步加载？

> ID：12371080
> 
> 赞同：4
> 
> 时间：2012-09-11T13:41:16.187
> 
> 标签：javascript, html, hyperlink, onload, synchronous

如果我有以下 HTML5 文档：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>FOOBAR</title>
</head>
<body>
<link rel="stylesheet" href="/largefonts.css">
<script src="onload.js"></script>
</body>
</html> 
```

标签是否会`<link>`同步加载，以便在`onload.js`执行脚本时，字体应该在浏览器中加载？

请注意，我不是在询问字体是否已**应用于**任何 DOM 节点，我只是想知道它们是否已加载到内存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:45:35.620

获取`<link>`资源的过程[在 HTML5 规范的相应部分中](http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#concept-link-obtain)有描述，答案如下：

> 用户代理**可能会**选择仅在需要时尝试获取此类资源，而不是主动获取所有未应用的外部资源

然而，

> [ `<link>`] 元素必须延迟元素文档的加载事件，直到所有获取资源及其关键子资源的尝试都完成

...意味着文档的事件在所有s 都已加载（或失败）`load`之前不会触发`<link>`

# javascript - JQuery Mobile 页面随机中断

> ID：12371087
> 
> 赞同：0
> 
> 时间：2012-09-11T13:41:31.633
> 
> 标签：javascript, jquery, html, jquery-mobile

[http://dugley.com/checkin/](http://dugley.com/checkin/)

它有时会随机中断，有时会起作用，有时则不会。它出什么问题了？

这是我的代码：

```
<!DOCTYPE html>
    <html>
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=0" />
                   <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
            <script src="my.js">
            </script>    
        </head>
        <body>
            <!-- Home -->
            <div data-role="page" id="one">
                <div data-theme="c" data-role="header">
                    <h3>Friends School</h3>
                </div>
                <div data-role="content" style="padding: 15px">
                    <div data-role="fieldcontain">
                    	<input type="submit" id="selectbutton" data-theme="b" data-icon="arrow-r" data-iconpos="right" value="Choose Name" />
                    </div>
                    <input type="submit" id="button" data-theme="a" data-icon="alert" disabled="disabled" data-iconpos="top" value="Check-In" />
    				<small style="display: none;">Not activating? Try going closer to the Upper School office. If still not working just go to the office and check-in manually</small> 
                </div>

            </div>
    		<div data-role="page" id="two" data-theme="a">
    			<div data-theme="c" data-role="header">
                    <h3>Select Name</h3>
                </div>
                <div data-role="content" data-theme="a">
    			<ul data-role="listview" data-filter="true" data-filter-placeholder="Search people..." data-filter-theme="d"data-theme="d" data-divider-theme="d">
    				<li data-role="list-divider">A</li>
    				<li><a name="personname" href="#">Adam Kinkaid</a></li>
    				<li><a name="personname" href="#">Alex Wickerham</a></li>
    				<li><a name="personname" href="#">Avery Johnson</a></li>
    				<li data-role="list-divider">B</li>
    				<li><a name="personname" href="#">Bob Cabot</a></li>
    				<li data-role="list-divider">C</li>
    				<li><a name="personname" href="#">Caleb Booth</a></li>
    				<li><a name="personname" href="#">Christopher Adams</a></li>
    				<li><a name="personname" href="#">Culver James</a></li>
    				<li data-role="list-divider">D</li>
    				<li><a name="personname" href="#">David Walsh</a></li>
    				<li><a name="personname" href="#">Drake Alfred</a></li>
    				<li data-role="list-divider">E</li>
    				<li><a name="personname" href="#">Elizabeth Bacon</a></li>
    				<li><a name="personname" href="#">Emery Parker</a></li>
    				<li><a name="personname" href="#">Enid Voldon</a></li>
    				<li data-role="list-divider">F</li>
    				<li><a name="personname" href="#">Francis Wall</a></li>
    				<li data-role="list-divider">G</li>
    				<li><a name="personname" href="#">Graham Smith</a></li>
    				<li><a name="personname" href="#">Greta Peete</a></li>
    				<li data-role="list-divider">H</li>
    				<li><a name="personname" href="#">Harvey Walls</a></li>
    				<li data-role="list-divider">M</li>
    				<li><a name="personname" href="#">Mike Farnsworth</a></li>
    				<li><a name="personname" href="#">Murray Vanderbuilt</a></li>
    				<li data-role="list-divider">N</li>
    				<li><a name="personname" href="#">Nathan Williams</a></li>
    				<li data-role="list-divider">P</li>
    				<li><a name="personname" href="#">Paul Baker</a></li>
    				<li><a name="personname" href="#">Pete Mason</a></li>
    				<li data-role="list-divider">R</li>
    				<li><a name="personname" href="#">Rod Tarker</a></li>
    				<li data-role="list-divider">S</li>
    				<li><a name="personname" href="#">Sawyer Wakefield</a></li>
    			</ul>	
                </div>		
    		</div><!-- /page two -->
            <script>

            	var tries = 0;
                function check(){
    				//alert('d');

    				if(tries>4){
    					first=true;
    					$("small").fadeIn(3000);
    					//alert("In")
    				}
    				else{
    					$("small").fadeOut(3000);
    				}

    				navigator.geolocation.getCurrentPosition( function(loc){
    					var lat1 = 39.35691630053478;
    					var lon1 = -76.62641812613514;
    					//var lat1 = 39.4354312;
    					//var lon1 =  -76.6642454;
    					var lat2 = loc.coords.latitude;
    					var lon2 = loc.coords.longitude;
    					var radlat1 = Math.PI * lat1/180
    					var radlat2 = Math.PI * lat2/180
    					var radlon1 = Math.PI * lon1/180
    					var radlon2 = Math.PI * lon2/180
    					var theta = lon1-lon2
    					var radtheta = Math.PI * theta/180
    					var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
    					dist = Math.acos(dist)
    					dist = dist * 180/Math.PI
    					dist = dist * 60 * 1.1515

    					if(dist < 0.06){
    						$('#button').button('enable');	
    						tries = 0;
    						//$( "#button" ).text("Check-In");
    						$('#button').buttonMarkup({ icon: "star" });
    					}
    					else{
    						//$("#button" ).text("Not on campus.");
    						tries += 1;
    						$('#button').button('disable');	
    						$('#button').buttonMarkup({ icon: "alert" });
    					}
    					//alert(dist);

    				});

    				$('#button').button('refresh');
    			}
    		var id = setInterval("check()",2000);
    		$( "#button" ).bind( "click", function(event, ui) {
    			$('#button').buttonMarkup({ icon: "check" });
    			$('#button').button('disable');	
    			$( "#button" ).text("Checked in.");
    			$('#button').button('refresh');
    			window.clearInterval(id);
    			//$.mobile.changePage("#two", "flip", true, false);
    		});
    		$( "#selectbutton" ).bind( "click", function(event, ui) {
    			//alert('d');
    			$.mobile.changePage("#two", "slide", true, false);
    		});
    		$( "[name=personname]" ).bind( "click", function(event, ui) {
    			//alert($(this).html());
    			$("#selectbutton").prop('value', $(this).html());
    			$('#selectbutton').button('refresh');

    			$.mobile.changePage("#one", "slide", true, false);

    		});

            </script>

        </body>
    </html>
```

这是什么问题，有时有效，有时无效。

然而它适用于 JSFiddle：http: [//jsfiddle.net/5e4ue/](http://jsfiddle.net/5e4ue/)

我在同一服务器上的两个不同域上进行了尝试，有时它在一个服务器上运行，但在另一个服务器代码相同的域上运行。出来像 ![在 iPhone 上](../Images/b5c399fe4e81761b9a81cc1959a678b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:56:06.817

好的，由于某种原因，您的网站发出了破坏您的 css 文件的`header`as尝试将其添加到您的文件中：`utf-16``.html`

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
```

这就是你的`css`文件链接标签

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" charset="UTF-8"/> 
```

如果您是服务器端编程（例如 php），您可以使用：

```
header('Content-Type: text/html; charset=utf-8'); 
```

作为最后的手段，请确保您的文件保存`utf-8`在您使用的任何编辑器中。检查有关如何执行此操作的文档；大多数情况下，它可以在文档设置或首选项中进行设置。

**编辑：** 如果没有什么效果最好的事情就是自己托管文件，因为最后这就是问题所在。

# c++ - 尝试打开管道进行读取时的 open() 块

> ID：12371088
> 
> 赞同：5
> 
> 时间：2012-09-11T13:41:32.210
> 
> 标签：c++, linux, pipe

我有两个进程，一个服务器和一个客户端，它们应该通过管道（C++、Linux）进行通信。`O_RDONLY`服务器使用标志打开管道，客户端使用`O_WRONLY`. 但是，服务器在`open`函数处阻塞，而客户端似乎运行成功（`open`函数返回成功，函数也是如此`write`）。

我已经读过，如果`O_NONBLOCK`设置了标志，读取功能将继续，但如果没有连接客户端，我不希望它继续 - 在连接**客户端之前**阻塞是可以的，但在我的情况下它仍然被阻塞客户端完成运行后...

你能告诉我我做错了什么......？

这是代码：

```
// Server side
int pipe;
int status, nr_read = 0;

status = mkfifo(FIFO_NAME, 0666);
if (status < 0)
{
    // If the file already exists, delete it
    unlink(FIFO_NAME);

    // Try again
    status = mkfifo(FIFO_NAME, 0666);

    if(status < 0)
    {
        printf("mkfifo error: %d\n", status);
        return status;
    }
}

pipe = open(FIFO_NAME, O_RDONLY);
printf("Never gets here...\n");
[...]
nr_read = read(pipe, my_char_array, CHAR_ARRAY_SIZE);
[...]
close(pipe);
unlink(FIFO_NAME); 
```

它永远不会到达“printf”行......

```
// Client side:
int pipe, nr_sent = 0;
int status = 0;

pipe = open(FIFO_NAME, O_WRONLY);
if (pipe < 0)
{
    printf("open fifo error: %d\n", status);
    return pipe;
}

[...]
nr_sent = write(pipe, my_char_array, CHAR_ARRAY_LENGTH);
[...]
close(pipe); 
```

* * *

**编辑**

我没有提到这条线 `#define FIFO_NAME "MYFIFO"`

...这就是问题所在：正如乔迪·哈金斯所说，路径是相对路径，进程从不同文件夹启动，他们试图打开不同的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:09:57.293

在写入端完成管道之前，读取端不会完成阻塞打开。

如果您不想要此功能，则打开 read-side `O_NONBLOCK`，并用于`select`确定 write-side 何时建立连接并相应地处理输入。

**编辑**

哎呀。刚刚注意到您说即使在运行客户端之后您的服务器也没有完成打开。那很奇怪。我只是剪切/粘贴您的代码，在添加缺少的标头包含和缺少的变量/常量后，运行服务器/客户端，它们按预期运行。

服务器等待客户端，当客户端运行时，服务器完成打开并读取数据。

检查您的文件以确保您有一个实际的 FIFO。

您应该看到如下内容：

```
> ls -lat /tmp/FIFO
prw-r--r-- 1 user user 0 2012-09-11 10:22 /tmp/FIFO

> stat /tmp/FIFO
  File: `/tmp/FIFO'
  Size: 0               Blocks: 0          IO Block: 4096   fifo
Device: 6802h/26626d    Inode: 186603      Links: 1
Access: (0644/prw-r--r--)  Uid: (10042/ user)   Gid: (10042/ user)
Access: 2012-09-11 10:22:48.000000000 -0400
Modify: 2012-09-11 10:22:48.000000000 -0400
Change: 2012-09-11 10:22:48.000000000 -0400 
```

# c# - 从字典中输出数据 到 Visual Studio c# 中的表

> ID：12371089
> 
> 赞同：0
> 
> 时间：2012-09-11T13:41:42.163
> 
> 标签：c#, visual-studio, dictionary

我正在尝试显示存储在字典中的信息，以便整数像在表格中一样左对齐。

我考虑编写一种方法来在“表格布局面板”的一行中创建两个标签，然后为特定键调用此方法，但它似乎很啰嗦。有没有更简单的方法？

数据样本：

```
{[Board,1]}
{[Messages Transmitted, 75877814]}
{[ISR Count, 682900312]}
{[Bus Errors, 0]}
{[Data Errors, 0]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:16:05.387

您可能还可以使用[ListView](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.aspx)控件。

您可以创建一个，将视图设置为详细信息，添加两列，然后添加如下项目：

```
 Dictionary<string, int> itemsSource = new Dictionary<string, int>() { { "Board", 1 }, { "Messages Transmitted", 75877814 }, {"ISR Count", 682900312}, {"Bus Errors", 0}, {"Data Errors", 0}};

    foreach (var item in itemsSource)
    { 
        ListViewItem listItem = new ListViewItem(item.Key);
        listItem.SubItems.Add(item.Value.ToString());

        listView1.Items.Add(listItem);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:06:54.323

尝试查看 PadRight。这应该够了吧 ;）

# jsf - 识别当前 JSF/XHTML 页面的路径

> ID：12371100
> 
> 赞同：1
> 
> 时间：2012-09-11T13:42:07.210
> 
> 标签：jsf, path, identifier

我需要能够唯一标识我的 JSF (XHTML) 页面的东西。

我知道我有：

```
String URI = servletRequest.getRequestURI(); 
```

这给出了我的完整路径，但如果我使用 PrettyFaces 或任何其他 URL 更改库，这将无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:43:51.523

您可以[`UIViewRoot#getViewId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html#getViewId%28%29)为此使用：

```
String viewId = FacesContext.getCurrentInstance().getViewRoot().getViewId(); 
```

它也可以在 EL 中使用，如下所示：

```
#{view.viewId} 
```

# java - 将枚举集合映射到单个 varchar 列

> ID：12371101
> 
> 赞同：6
> 
> 时间：2012-09-11T13:42:08.690
> 
> 标签：java, hibernate, collections, enums, mapping

在休眠中，我需要将枚举集合映射到单个 varchar 列（例如，作为逗号分隔的枚举值列表）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T11:31:21.360

您可以创建一个 Hibernate UserType，在其中将值设置为逗号分隔的字符串：

```
 public void nullSafeSet(PreparedStatement st, Object value, int index) throws HibernateException {
    try {
        if (null == value) {
            st.setNull(index, Types.VARCHAR);
        } else {
            st.setString(index, toCommaSeparated((Set<Enum>) value));
        }
    } catch (Exception e) {
        throw new HibernateException(String.format("Exception while stringifing '%s'", value), e);
    }

}

private String toCommaSeparated(Set<Enum> inputSet) {
    StringBuilder sb = new StringBuilder();
    String delim = "";
    for (Enum current : inputSet) {
        sb.append(delim).append(current.name());
        delim = ",";
    }
    return sb.toString();
} 
```

你把它作为一个 EnumSet 得到：

```
 @Override
public Object nullSafeGet(ResultSet rs, String[] names, Object owner) throws HibernateException, SQLException {
    String name = rs.getString(names[0]);
    if (rs.wasNull()) {
        return null;
    }

    try {
        Set<Enum<?>> retSet = EnumSet.noneOf(enumClass);
        if (StringUtils.isNotBlank(name)) {
            String[] values = name.split(",");
            for (String value : values) {
                Enum<?> current = getEnumValueFor(value);
                if (current != null) {
                    retSet.add(current);
                }
            }
        }
        return retSet;
    } catch (Exception e) {
        throw new HibernateException("Exception getting object from comma separated string", e);
    }
}

private Enum<?> getEnumValueFor(String name) {
    for (Enum<?> current : enumClass.getEnumConstants()) {
        if (current.name().equals(name)) {
            return current;
        }
    }
    return null;
} 
```

这个实现只是为了给你一个想法，它当然可以改进或适应你的需要。您还可以找到大量关于如何创建自己的 UserType 的教程，并可能使用您要存储的 Enum 类对其进行参数化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:49:08.090

我真的不会那样做，因为它使查询您的数据变得不可能。

如果你真的想这样做，那么只需将集合转换为 setter 中的字符串，然后将字符串转换为枚举集合到 getter。与番石榴：

```
private String fooValues;

public EnumSet<Foo> getFoos() {
    EnumSet<Foo> result = EnumSet.noneOf(Foo.class);
    for (String fooAsString : Splitter.on(',').split(fooValues)) {
        result.add(Foo.valueOf(fooAsString);
    }
    return result;
}

public void setFoos(EnumSet<Foo> foos) {
    this.fooValues = Joiner.on(",").join(foos);
} 
```

# php - 学说2将数据保存和恢复到实体图中

> ID：12371104
> 
> 赞同：0
> 
> 时间：2012-09-11T13:42:13.270
> 
> 标签：php, serialization, symfony, doctrine-orm, symfony-2.1

我将 symfony2 与学说 2 一起使用。

我开发了一个功能，用户可以将数据从外部源导入数据库。我现在必须实现“还原”功能。基本上，用户应该能够一键撤消整个导入操作。

行为与 mysql 回滚或 mysqldump + 重新导入数据子集的行为相同，但我需要在应用程序级别使用 Doctrine 2 工作。

序列化和反序列化代理或使用工作单元都没有成功。我现在正在实现一个实用程序类来将实体（和指定的关系）保存到数组/从数组恢复实体（和指定的关系），但是管理所有关系需要做很多工作。

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T11:44:03.360

我不认为以下是一个优雅的解决方案，因为它非常具有侵入性，但它可能会有所帮助并且很可能非常有效：

为每个实体指定一个引用*导入实体的**导入*字段。*还原时只需删除映射到给定Import*的所有实体。如果修改实体以添加*导入*字段过于侵入或不是一个选项，则可以考虑将导入映射到特定实体的 OneToOne 关系。这也一定程度上减少了耦合。

 ***如果导入也包含更新，那么事情显然会变得更加复杂；导入后对数据进行的修改也是如此。恢复将失败或级联到新实体。***

# javascript - 如何用'，'分割字符串

> ID：12371106
> 
> 赞同：-6
> 
> 时间：2012-09-11T13:42:22.180
> 
> 标签：javascript

我有一些参数的数组，例如：

```
arr=['abc','xyz','how are you, I am good']; 
```

我想要这样的结果：

1.  美国广播公司
2.  xyz
3.  你好吗，我很好

仅使用 JavaScript。

我再次解释上一个问题有问题。这是场景。

我有 6 个具有一些特殊字符的字符串变量。

我将这 6 个字符串分配给这样的数组：

```
arr=[str1,str2,str3.....); 
```

之后我在做：

```
arr=escape(arr); 
```

因为某些字符串变量具有特殊字符。

之后，我将其恢复`arr`为像这样的其他功能。

```
var newarr=unescape(arr); 
```

现在我想从这个 new 中获取所有六个变量`arr`，我该怎么做？

目前我正在使用拆分功能。

```
split(','); 
```

但问题在于，有些变量在里面，所以它分裂了两次，我不想要那个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T13:43:09.380

使用[`join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)，像这样：

```
arr.join(" "); 
```

这`" "`是一个线索。

您可以使用`"<br />"`新行来连接数组元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:57:16.313

嗯，您可以将它们从阵列中取出而无需拆分或加入

```
var arr=['abc','xyz','how are you, I am good'];
console.log('1\. ' + arr[0]);
console.log('2\. ' + arr[1]);
console.log('3\. ' + arr[2]); 
```

[http://jsfiddle.net/8hGxM/](http://jsfiddle.net/8hGxM/)

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:18:24.387

Fabrizio，这对我有用：

```
var arr=['abc','xyz','how are you, I am good'];
var res = arr.join("\n");
console.log(res); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:44:08.730

使用加入功能：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

```
arr.join(' '); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T13:45:18.833

使用拆分功能

```
string.split(','); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T13:45:20.570

尝试

```
string.split(','); 
```

你会得到的

# facebook-graph-api - 迭代分页时出现“未知”OAuthException

> ID：12371112
> 
> 赞同：3
> 
> 时间：2012-09-11T13:42:43.207
> 
> 标签：facebook-graph-api, feed

在迭代用户提要的分页时，我会定期收到此错误（ala [https://graph.facebook.com/user_id/feed](https://graph.facebook.com/user_id/feed)）

```
{"error":{"message":"An unknown error has occurred.","type":"OAuthException","code":1}} 
```

如果我调整我的限制，有时我可以让它工作，但是，有时即使调整到 1 也不起作用。如果我调整直到值，我有时也可以让它工作。

就好像 facebook 的一端有损坏的数据，我不得不强迫它跳过。是否有适当/最佳实践方法来处理这种情况？

因为它适用于大多数用户的提要访问，所以看起来这不是访问令牌问题，而实际上是 facebook 方面的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-03T23:51:16.877

这个我也见过很多。我对提要进行分页，然后在某些时候我会遇到类似的错误。虽然现在它是`code: 2`并添加`is_transient: true`参数以及`fbtrace_id`.

为了解决这个问题，我不断重试，将`until`10000 秒的时间递减，直到请求成功。

# c# - 如何为 .Net HttpWebRequest 客户端打开 SSL 层压缩？

> ID：12371113
> 
> 赞同：2
> 
> 时间：2012-09-11T13:42:45.987
> 
> 标签：c#, .net, ssl, compression

我正在使用的基于 Apache/Perl 的 HTTPS 服务器支持 SSL 层中的压缩。这意味着所有客户端-服务器通信都被压缩，而不仅仅是服务器响应，就像 HTTP 压缩一样。

.Net 4 客户端正在使用 HttpWebRequest 通过 HTTPS 与该服务器一起工作。是否可以在客户端启用 SSL 层压缩？

# .htaccess - .htaccess 规则冲突

> ID：12371114
> 
> 赞同：0
> 
> 时间：2012-09-11T13:42:48.930
> 
> 标签：.htaccess

我的 .htaccess 有以下规则

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ stat.php?domain=$1 [L]

ErrorDocument 404 /page/404 
```

似乎规则相互冲突。我知道第一条规则对于检测域名有点不正确。

所以任何人都可以帮助我检测域名并从上面的代码重写以下规则的正确规则：

`RewriteRule ^([^/]+)/?$ stat.php?domain=$1 [L]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:38:11.707

您是否尝试通过 stat.php 发送每个请求？如果是这样：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ stat.php?domain=%{HTTP_HOST}&page=$1 [L] 
```

我认为你正在寻找的部分是`%{HTTP_HOST}`。

# vb.net - 检查空标签并根据文本框值填充

> ID：12371117
> 
> 赞同：1
> 
> 时间：2012-09-11T13:42:55.080
> 
> 标签：vb.net, visual-studio-2010

好的，我在表单上定义了 20 个标签，并且这些标签的文本在表单加载时被空白。标签被命名为“LabelValue1...LabelValue20”

在表单上，​​是一个文本框，用户将在其中输入数值。点击提交后，我需要用这个数值填充第一个可用标签。用户一次最多可以输入 20 个不同的值，我需要用他们第二次输入的值填充下一个标签，所以第四次。

有没有更简单的方法来编写代码，然后使用很长的 if else endif 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:49:16.173

虽然列表框更合适，但如果您需要这样做，您可以使用表单的`Controls`集合按名称访问标签：

```
Dim _currentLabel As Integer = 1

Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    If _currentLabel <= 20 Then
        Dim lbl As Label = CType(Controls("LabelValue" & _currentLabel.ToString()), Label)
        lbl.Text = TextBox1.Text
        _currentLabel += 1
    End If
End Sub 
```

相反，要使用`ListBox`控件，您只需要执行以下操作：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    If ListBox1.Items.Count < 20 Then
        ListBox1.Items.Add(TextBox1.Text)
    End If
End Sub 
```

然后要阅读特定项目，您将执行以下操作：

```
Dim secondItem As String = CStr(ListBox1.Items(1)) 
```

# c# - 如何从一个动作重定向到另一个动作，但在 MVC 3 中提供其参数？

> ID：12371131
> 
> 赞同：1
> 
> 时间：2012-09-11T13:43:26.353
> 
> 标签：c#, asp.net-mvc-3

我知道您可以将一个动作重定向到另一个动作，例如：

```
public ActionResult Index() {
   return View();
}

public ActionResult OtherAction(){
   return RedirectToAction("Index");
} 
```

好的。我没有找到解决问题的方法：如何重定向到具有参数的操作？例如：

```
public ActionResult Index(string v1, int i1) {
   return View();
}

public ActionResult OtherAction(string value, int size){
   return RedirectToAction("Index", // here need some adjustements or another trick);
} 
```

抱歉问题不好，但我在这里没有找到任何相关问题，也许我不知道使用搜索:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T13:46:55.300

使用采用 RouteValues 对象[的 RedirectToAction 的重载之一，例如](http://msdn.microsoft.com/en-us/library/dd460311%28v=vs.108%29.aspx#Y0)

```
return RedirectToAction("Index", "Controller", new {v1 = "Hello", i1 = 123}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:46:48.007

```
return RedirectToAction("Index", new {v1 = value1,i1=value2} ); 
```

# c# - 如何查询字段组合的ContentType（由“WithField”定义）

> ID：12371132
> 
> 赞同：1
> 
> 时间：2012-09-11T13:43:26.857
> 
> 标签：c#, .net, asp.net-mvc, orchardcms

我设置了一个`ContentType`与其他字段（例如`NumericField`）结合的自定义。现在我想为此创建一个查询，这`ContentType`需要将一些条件应用于组合字段之一。在我的代码中，我有一个`ContentPart`调用`EstatePart`，其中包含一个`NumericField`名为“ `BedroomCount`”的字段：

```
ContentDefinitionManager.AlterPartDefinition("EstatePart", part => part.Attachable()
        .WithField(
                "BedroomCount",
                fieldBuilder =>
                {
                    fieldBuilder.OfType(typeof(NumericField).Name);        
                }) 
```

现在我如何`EstatePart`通过将条件应用于`BedroomCount`字段来查询？

这是我尝试过的：

```
_contentManager.Query("Estate").Where<EstatePartRecord>(r=>r. // HERE I CAN'T ACCESS TO BEDROOMCOUNT FIELD 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:53:38.760

我认为的问题是字段不是 ...PartReccord 的一部分。

我已经设法像这样访问我的模型中的媒体选择器字段

```
public MediaPickerField MediaPicker
        {
            get
            {
                return (MediaPickerField)ContentItem.As<HeaderPart>().Fields.First(x => x.Name == "Image");
            }
        } 
```

您应该能够获取 Estate 类型的字段 > 找到一个名为卧室计数的字段并再次查询。...抱歉不知道确切的语法

# drupal - 如何在联系表单中添加重置按钮

> ID：12371135
> 
> 赞同：1
> 
> 时间：2012-09-11T13:43:34.470
> 
> 标签：drupal

下面提到的代码不起作用

```
function yourModuleName_form_alter(&$form, $form_state, $form_id) {
  if ((strpos($form_id, 'contact_mail_page') === 0)) {
    $form['reset'] = array(
      '#value' => '<input class="form-button" type="reset" value=" Reset " />',
      '#weight' => 1001,
    );
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T06:52:06.250

**Option1** 如果您想使用自定义 html，您应该使用 'markup' 或 'item' 表单元素

```
$form['reset'] = array(
  '#type' => 'markup'
  '#markup' => '<input class="form-button" type="reset" value=" Reset " />',
  '#weight' => 1001,
); 
```

**选项 2**使用 javascript 和按钮

```
$form['actions']['reset'] = array(
  '#type' => 'button',
  '#value' => t('Reset'),
  '#weight' => 1001,
  '#validate' => array(),
  '#attributes' => array('onclick' => 'this.form.reset(); return false;'),
); 
```

**Optoin 3**您可以将链接添加到同一页面并将其设置为按钮

```
$form['reset'] = array(
   '#type' => 'markup'
   '#markup' => '<a href="/contact">' .t('Reset') . '<a/>',
   '#weight' => 1001,
); 
```

**选项 4**添加在提交时不会执行任何操作的提交或按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T14:42:10.537

这对我有用：

```
$form['reset'] = array(
        '#type' => 'markup',
        '#markup' => '<input type="reset" value="Reset All Values" class="form-submit">',
    ); 
```

谢谢 ：-）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T06:14:57.933

```
function mymodule_form_alter(&$form, &$form_state, $form_id) {

switch ($form_id) {

case 'myform':
  $form['buttons']['reset_button'] = array(
    '#type' => 'markup',
    '#value' => '<input class="form-button" value="Reset" type="reset">',
    '#weight' => 2000,
  );
  break;
 }

return $form;

} 
```

# c# - 如何让用户在命令行中只输入一种类型的数据？

> ID：12371140
> 
> 赞同：1
> 
> 时间：2012-09-11T13:43:44.940
> 
> 标签：c#, command-line, user-input

我正在编写一个程序，其中一个特点是：不会因为数据输入与接收它的变量类型不同而发生错误。所以我会知道如何允许用户在提示符下只输入一种数据类型。我已经知道如何使用`try-catch`，但我不想使用它。

**编辑：**

用户必须只输入**浮点类型**的值

**请给我一个例子。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:52:23.783

由于所有命令行参数都是字符串，因此只能解析它们。如果您期望一个浮点值，您可以执行以下操作：

```
float f;
bool success = Float.TryParse(parameter, out f);
if(success)
{
    ....
}
else
{
    ....
} 
```

如果 TryParse 成功，则该值现在分配给 f。否则，f == 0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:55:14.003

控制台只读取文本。如果您想确保用户只输入给定类型的数据，我建议您创建通用方法，例如 GetDate()，它使用 TryParse 方法并循环直到用户输入可以解析为该类型的字符串。

您必须使用自己的命令转义策略，以便将转义一直反馈到调用 GetDate() 的方法，以使其知道用户已转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:49:58.240

像这样的东西

```
string usrInput = Console.ReadLine();
while(!isValid(usrInput))
{
   Console.Write("Invalid Input. Enter a valid value");
   usrInput = Console.ReadLine();
}

//continue to use input here 
```

写下你的有效函数

```
private void isValid(string input)
{
   //use regex
   //use something else
   //if test passed return true 
   //return false
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:51:24.077

不需要 try-catch 块的最简单方法是尝试解析输入并根据输入是否成功解析做出控制流决策。例如，您可以在*未*成功解析用户输入时不断请求有效输入：

```
float myValue;
do 
{
    Console.WriteLine("Enter a valid value: ");
} while (!Float.TryParse(Console.ReadLine(), out myValue))

// myValue contains a valid float, do something with it now...
float percent = myValue / 100.0f; 
```

.NET 的所有数字类型都包含一个`TryParse`方法，因此如果您有其他输入类型，您可以相应地更改示例（`Integer.TryParse()`、`Double.TryParse()`等）。

# activerecord - Rails：has_one 关联错误？

> ID：12371141
> 
> 赞同：0
> 
> 时间：2012-09-11T13:43:47.373
> 
> 标签：activerecord, associations, ruby-on-rails-3.2

社区，我需要你的帮助。这是一个非常简单的问题，但我不知道出了什么问题。

我有两个模型，一个产品模型和一个条件模型。一个产品只能有一个条件，所以我在两者之间设置了一对多的关联。Condition 包含固定记录（例如好、坏、损坏）

**产品.rb**

```
attr_accessible :condition_id
has_one :condition 
```

**条件.rb**

```
belongs_to :product 
```

我的产品表中有一个外键 condition_id。在我的产品表单中，我遍历条件并设置 ID：

**_form.html.erb**（产品）

```
<%= f.select :condition_id, Condition.all.collect {|x| [x.name, x.id]}, {} %> 
```

当我提交表单时，我可以看到在控制台中设置了 id。但我无法检索给定条件的值。在我的产品展示页面中，我尝试

```
<%= @product.condition.name %> 
```

但它给了我一个“nil:NilClass 的未定义方法‘名称’”错误。在控制台中尝试时也会发生这种情况。

我在这里想念什么？

谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:16:18.157

对不起，回答我自己的问题。看来我混合了协会。

所以 Product belongs_to :condition 和 Condition has_many :products 工作正常。

但是，对我来说 Product has_one :condition 和 Condition belongs_to :product 听起来更加冗长。

# ruby-on-rails - Ruby on Rails 构建使 id 为零

> ID：12371149
> 
> 赞同：1
> 
> 时间：2012-09-11T13:44:07.427
> 
> 标签：ruby-on-rails, build

在我的项目中，用户有一家酒店，每家酒店都有与之关联的房间类型。简而言之，模型是

```
 class User < ActiveRecord::Base
     has_many :hotels

 class Hotel < ActiveRecord::Base
      belongs_to :user
      has_many :roomtypes

 class Roomtype < ActiveRecord::Base
    attr_accessible :maxguests, :name
    belongs_to :hotel 
```

如果我执行命令：

```
 @user = User.find(1)
 @user.hotels.find(1).roomtypes.build(name: "something", maxguests: "2") 
```

控制台返回：

```
 #<Roomtype id: nil, name: "something", maxguests: 2, created_at: nil, updated_at: nil, hotel_id: 1> 
```

出于某种原因，Roomtype id 和时间戳为零。任何想法为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T13:46:14.233

您已经构建了房间类型（它创建了对象的一个​​新实例），但您还没有保存它。您必须明确保存房间类型才能进入数据库（并因此获得一个 id）。

而不是`build`使用`create`或`create!`通过单个方法调用来完成此操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:46:35.977

替换`build`为`create`，您将获得带有 id 和时间戳的持久对象。

以前有这个是没有意义的。

# ios - iOS - 为了与视网膜显示器一起工作，所有图像名称究竟应该是什么？

> ID：12371158
> 
> 赞同：3
> 
> 时间：2012-09-11T13:44:18.870
> 
> 标签：ios, ios5

我刚刚浏览了所有图像，并添加了名称为 original_name@2x.png 的图像，以便为视网膜显示提供每个图像副本。

但我有 4 张图片的名字有点奇怪。例如：

```
Default-Landscape@2x~ipad.png
Default-Landscape~ipad.png
Default-Portrait@2x~ipad.png
Default-Portrait~ipad.png 
```

而且我不确定 xCode 是否在这些名称中添加了 ~ipad 部分，或者它们为什么会这样。取名似乎有点尴尬。

这些图像名称应该是什么？我应该将名称中的@2x 切换到.png 的左侧吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:34:34.270

您列出的路径是正确的。波浪号后缀如`~ipad`指定文件应仅在该特定设备上使用。有关更多信息，请参阅[应用程序相关资源](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)文档。资源文件名的一般模式是：

```
<basename>-<scale_modifier><device_modifier>.png 
```

Default.png 文件也可以支持方案修饰符，尽管您可能不需要它。当前唯一支持的比例修饰符是`@2x`和设备修饰符是`~ipad`and `~iphone`。

因此，以您的一个示例为例，该`Default-Portrait@2x~ipad.png`文件将仅用于 Retina ( `@2x`) iPad ( `~ipad`) 设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:47:38.200

检查[Apple 的链接](https://developer.apple.com/library/ios/#qa/qa2010/qa1686.html)以获取不同文件的默认名称。如果您的应用程序是通用的，您只需要使用这些默认名称放置文件。

# javascript - 如何在自定义指令中获取评估属性

> ID：12371159
> 
> 赞同：365
> 
> 时间：2012-09-11T13:44:20.660
> 
> 标签：javascript, binding, angularjs, directive

我正在尝试从我的自定义指令中获取**评估**的属性，但我找不到正确的方法。

我创建了[这个 jsFiddle](http://jsfiddle.net/neuTA/1/)来详细说明。

```
<div ng-controller="MyCtrl">
    <input my-directive value="123">
    <input my-directive value="{{1+1}}">
</div>

myApp.directive('myDirective', function () {
    return function (scope, element, attr) {
        element.val("value = "+attr.value);
    }
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：578
> 
> 时间：2012-09-11T14:50:43.687

*注意：当我找到更好的解决方案时，我会更新这个答案。只要它们保持相关，我也会保留旧答案以供将来参考。最新和最好的答案是第一位的。*

## 更好的答案：

angularjs 中的指令非常强大，但需要时间来理解它们背后的进程。

在创建指令时，angularjs 允许您创建一个*隔离的范围*，其中包含一些与父范围的绑定。这些绑定由您在 DOM 中附加元素的**属性**以及您在*指令定义对象中定义***范围**属性的方式指定。

 *您可以在范围内定义 3 种类型的绑定选项，并将它们写为与前缀相关的属性。

```
angular.module("myApp", []).directive("myDirective", function () {
    return {
        restrict: "A",
        scope: {
            text: "@myText",
            twoWayBind: "=myTwoWayBind",
            oneWayBind: "&myOneWayBind"
        }
    };
}).controller("myController", function ($scope) {
    $scope.foo = {name: "Umur"};
    $scope.bar = "qwe";
}); 
```

*HTML*

```
<div ng-controller="myController">
    <div my-directive my-text="hello {{ bar }}" my-two-way-bind="foo" my-one-way-bind="bar">
    </div>
</div> 
```

在这种情况下，在指令的范围内（无论是在链接函数还是控制器中），我们可以像这样访问这些属性：

```
/* Directive scope */

in: $scope.text
out: "hello qwe"
// this would automatically update the changes of value in digest
// this is always string as dom attributes values are always strings

in: $scope.twoWayBind
out: {name:"Umur"}
// this would automatically update the changes of value in digest
// changes in this will be reflected in parent scope

// in directive's scope
in: $scope.twoWayBind.name = "John"

//in parent scope
in: $scope.foo.name
out: "John"

in: $scope.oneWayBind() // notice the function call, this binding is read only
out: "qwe"
// any changes here will not reflect in parent, as this only a getter . 
```

## “还可以”回答：

由于此答案已被接受，但存在一些问题，因此我将其更新为更好的答案。显然，`$parse`是一项服务，它不存在于当前范围的属性中，这意味着它只需要角度表达式并且无法到达范围。 `{{`,`}}`表达式是在 angularjs 启动时编译的，这意味着当我们尝试在指令`postlink`方法中访问它们时，它们已经被编译。（`{{1+1}}`已经`2`在指令中）。

这就是您想要使用的方式：

```
var myApp = angular.module('myApp',[]);

myApp.directive('myDirective', function ($parse) {
    return function (scope, element, attr) {
        element.val("value=" + $parse(attr.myDirective)(scope));
    };
});

function MyCtrl($scope) {
    $scope.aaa = 3432;
}​ 
```

.

```
<div ng-controller="MyCtrl">
    <input my-directive="123">
    <input my-directive="1+1">
    <input my-directive="'1+1'">
    <input my-directive="aaa">
</div>​​​​​​​​ 
```

您应该在这里注意到的一件事是，如果您想设置值字符串，您应该将它用引号引起来。（见第三个输入）

这是玩的小提琴：http: [//jsfiddle.net/neuTA/6/](http://jsfiddle.net/neuTA/6/)

## 老答案：

*对于像我这样可能被误导的人，我不会删除它，请注意，使用`$eval`正确的方法是完全可以的，但是`$parse`有不同的行为，在大多数情况下你可能不需要使用它。*

这样做的方法是，再次使用`scope.$eval`. 它不仅编译角度表达式，还可以访问当前作用域的属性。

```
var myApp = angular.module('myApp',[]);

myApp.directive('myDirective', function () {
    return function (scope, element, attr) {
        element.val("value = "+ scope.$eval(attr.value));
    }
});

function MyCtrl($scope) {

}​ 
```

你缺少的是`$eval`.

> [http://docs.angularjs.org/api/ng.$ro​​otScope.Scope#$eval](http://docs.angularjs.org/api/ng.$rootScope.Scope#$eval)
> 
> 在返回结果的当前范围内执行表达式。表达式中的任何异常都会传播（未捕获）。这在评估角度表达式时很有用。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-09-12T19:49:24.720

对于需要在不使用隔离范围的指令中插入的属性值，例如，

```
<input my-directive value="{{1+1}}"> 
```

使用属性的方法`$observe`：

```
myApp.directive('myDirective', function () {
  return function (scope, element, attr) {
    attr.$observe('value', function(actual_value) {
      element.val("value = "+ actual_value);
    })
 }
}); 
```

从[指令](http://docs.angularjs.org/guide/directive)页面，

> 观察插值属性：`$observe`用于观察包含插值的属性的值变化（例如`src="{{bar}}"`）。这不仅非常有效，而且也是轻松获得实际值的唯一方法，因为在链接阶段尚未评估插值，因此此时值设置为`undefined`.

如果属性值只是一个常数，例如，

```
<input my-directive value="123"> 
```

如果值是数字或布尔值，您可以使用[$eval ，并且您需要正确的类型：](http://docs.angularjs.org/api/ng.$rootScope.Scope#$eval)

```
return function (scope, element, attr) {
   var number = scope.$eval(attr.value);
   console.log(number, number + 1);
}); 
```

如果属性值是字符串常量，或者您希望指令中的值是字符串类型，则可以直接访问它：

```
return function (scope, element, attr) {
   var str = attr.value;
   console.log(str, str + " more");
}); 
```

但是，在您的情况下，由于您希望支持插值和常量，请使用`$observe`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-05T16:00:36.050

这里的其他答案非常正确且有价值。但有时你只想简单：在指令实例化时获得一个普通的旧解析值，不需要更新，也不会弄乱隔离范围。例如，可以很方便地将声明性有效负载作为数组或哈希对象提供到指令中，格式如下：

```
my-directive-name="['string1', 'string2']" 
```

在这种情况下，您可以切入正题，只使用一个不错的基本`angular.$eval(attr.attrName)`.

```
element.val("value = "+angular.$eval(attr.value)); 
```

工作[小提琴](http://jsfiddle.net/neuTA/450/)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-27T13:14:21.120

对于我正在寻找的相同解决方案`Angularjs directive with ng-Model`。
这是解决问题的代码。

```
 myApp.directive('zipcodeformatter', function () {
    return {
        restrict: 'A', // only activate on element attribute
        require: '?ngModel', // get a hold of NgModelController
        link: function (scope, element, attrs, ngModel) {

            scope.$watch(attrs.ngModel, function (v) {
                if (v) {
                    console.log('value changed, new value is: ' + v + ' ' + v.length);
                    if (v.length > 5) {
                        var newzip = v.replace("-", '');
                        var str = newzip.substring(0, 5) + '-' + newzip.substring(5, newzip.length);
                        element.val(str);

                    } else {
                        element.val(v);
                    }

                }

            });

        }
    };
}); 
```

**HTML DOM**

```
<input maxlength="10" zipcodeformatter onkeypress="return isNumberKey(event)" placeholder="Zipcode" type="text" ng-readonly="!checked" name="zipcode" id="postal_code" class="form-control input-sm" ng-model="patient.shippingZipcode" required ng-required="true"> 
```

**我的结果是：**

```
92108-2223 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-02T07:54:45.027

```
var myApp = angular.module('myApp',[]);

myApp .directive('myDirective', function ($timeout) {
    return function (scope, element, attr) {
        $timeout(function(){
            element.val("value = "+attr.value);
        });

    }
});

function MyCtrl($scope) {

} 
```

使用 $timeout 因为在 dom 加载后调用指令，所以你的更改不适用*

# ruby-on-rails - activeadmin 操作的自定义路由？

> ID：12371161
> 
> 赞同：5
> 
> 时间：2012-09-11T13:44:29.250
> 
> 标签：ruby-on-rails, activeadmin

我正在使用 activeadmin 创建一个页面来更新当前用户的密码。我有一个非持久化模型来检查密码验证等。我的问题是当我尝试

```
ActiveAdmin.register UpdatePassword do
    actions :edit, :update
end 
```

它创建路由 /update_passwords/:id 和 /update_passwords/:id/edit。

我想通过 get 和 put 将这些路由更改为 /update_passwords。

有什么办法可以改变吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T18:31:06.530

我找不到使用 activeadmin 的方法，但手动定义路由：

```
#config/routes.rb
match "/admin/update_passwords" => 'admin/update_passwords#edit', via: :get, as: "admin_update_passwords"
match "/admin/update_passwords" => 'admin/update_passwords#update', via: :post 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-29T10:31:06.990

`collection_action`虽然这个问题大约有 2 年的历史，但您可以使用or实现路由以及自定义方法`member_action`。[参考这个](http://activeadmin.info/docs/8-custom-actions.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T20:53:01.113

在我看来，控制器名称 UpdatePassword 令人困惑。

路径最终类似于：

```
edit_admin_update_passwords_path
update_admin_update_passwords_path 
```

我认为这样会更好：

```
ActiveAdmin.register Password do
  actions :edit, :update
end 
```

或者

```
ActiveAdmin.register User do
  actions :edit, :update
end 
```

# c# - 在不同系统中使用程序时必须更改 C# 文件名

> ID：12371162
> 
> 赞同：0
> 
> 时间：2012-09-11T13:44:29.487
> 
> 标签：c#

我用 C# 编写了一个简单的应用程序，它使用 XML 文件。当程序加载时，它必须从文件中获取值并将它们加载到数组列表中，问题是当我将程序移动到另一台 PC 时，我必须手动更改文件位置。即使在不同的 PC 上运行程序，如何使文件名不更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:50:51.983

将 XML 文件复制到程序所在的同一文件夹或子文件夹中，以便始终可以使用例如：

```
Path.GetDirectoryName(Application.ExecutablePath); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:50:22.413

有几种方法可以解决这个问题。一种是将文件名作为命令行参数传递。例如：

```
public static void main(string[] args)
{
    // Use the first argument on the command line
    string file = args[0];
} 
```

另一个是将它包含在 app.config 文件中。有关一个很好的示例，请参阅[https://codereview.stackexchange.com/questions/186/getting-setting-default-values-from-my-app-config](https://codereview.stackexchange.com/questions/186/getting-setting-default-values-from-my-app-config)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:50:33.480

您可以将文件存储在程序集位置或某个公共位置

```
string myfile = System.IO.Path.Combine(Assembly.GetExecutingAssembly().Location,"your file name"); 
```

# java - 如何为部署在 Google App Engine 上的应用程序将插件令牌与我的 chrome 插件绑定

> ID：12371166
> 
> 赞同：0
> 
> 时间：2012-09-11T13:44:52.397
> 
> 标签：java, google-app-engine, google-chrome, file-io, plugins

我在 Chrome 中开发一个插件，整个应用程序将部署在 Google App Engine 上。服务器端的编程语言是Java。

每当下载我的插件时，我都需要生成一个唯一的密钥或令牌，并且需要通过我的插件的清单文件绑定生成的密钥，以便我能够检测到哪个插件在我的服务器上向我发送了请求的请求源。

我应该如何去实现结果？

一种选择是在下载时我将生成的密钥写入插件清单文件。但是 Google App Engine 不允许我们写入文件。所以不能考虑这个选项。

通过 Blobstore 管理操作是一种选择。但这是处理问题的适当方法还是有其他方法来解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:13:04.097

Create an entity in the datastore, and use the entity id.

You can store plugin info in the entity too.

# c# - C# .Net 中的目录

> ID：12371167
> 
> 赞同：-7
> 
> 时间：2012-09-11T13:44:54.390
> 
> 标签：c#

我有 ：

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\", "*.*",
                                     SearchOption.AllDirectories); 
```

而且，我想知道里面有多少个文件。你能帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:46:56.400

您只需查询数组中有多少项。

```
int amountOfFiles = filePaths.Length; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T13:46:44.317

`filePaths.Length`应该给你文件的数量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T13:46:52.803

你有一个文件数组，所以数组长度会告诉你文件的数量。

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\", "*.*",
                                 SearchOption.AllDirectories);
int numberOfFiles = filePaths.Length; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:47:00.240

使用[长度](http://msdn.microsoft.com/en-us/library/system.array.length%28v=vs.71%29.aspx)属性：`filePaths.Length`

# java - 如何记录 RESTful 发布数据？

> ID：12371168
> 
> 赞同：13
> 
> 时间：2012-09-11T13:45:00.147
> 
> 标签：java, spring, rest, logging

我们通过 Spring MVC 公开了 REST 服务。我们使用 a`HandlerExceptionResolver`来记录异常。我们目前记录以下内容：

*   异常及其堆栈跟踪
*   网址
*   请求标头

如果我们也可以记录 JSON 发布数据，那么调试会更容易。关于如何获得这个的任何建议？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-26T18:56:26.940

将此添加到代表应用程序配置的类中：

```
import javax.servlet.Filter;
import javax.servlet.http.HttpServletRequest;
import org.springframework.web.filter.AbstractRequestLoggingFilter; 
```

……

```
@Bean
public Filter loggingFilter(){
    AbstractRequestLoggingFilter f = new AbstractRequestLoggingFilter() {

        @Override
        protected void beforeRequest(HttpServletRequest request, String message) {
            System.out.println("beforeRequest: " +message);
        }

        @Override
        protected void afterRequest(HttpServletRequest request, String message) {
            System.out.println("afterRequest: " +message);
        }
    };
    f.setIncludeClientInfo(true);
    f.setIncludePayload(true);
    f.setIncludeQueryString(true);

    f.setBeforeMessagePrefix("BEFORE REQUEST  [");
    f.setAfterMessagePrefix("AFTER REQUEST    [");
    f.setAfterMessageSuffix("]\n");
    return f;
} 
```

你可能需要注释掉

```
 f.setIncludePayload(true); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T14:18:26.110

您需要一个过滤器来在读取请求正文时保存它，并稍后将保存的数据提供给您的异常记录器。

Spring包含[`AbstractRequestLoggingFilter`](https://github.com/SpringSource/spring-framework/blob/master/spring-web/src/main/java/org/springframework/web/filter/AbstractRequestLoggingFilter.java)做类似的事情。虽然它并不直接适合您的问题，但您可以将其用作实现您自己的过滤器的参考。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-11T14:35:48.943

没有简单的方法来记录请求/响应的负载。您可以使用 java web 过滤器来拦截所有请求和响应，并从流中读取 JSON 数据。但是有一个问题，当您从流中读取数据时，实际数据将从流中耗尽。

因此，您必须实现实际请求和响应对象的包装器。只会记录请求响应的复制版本。我们已经实现了类似的解决方案，如下所示，它满足了我们的要求：

[http://www.wetfeetblog.com/servlet-filer-to-log-request-and-response-details-and-payload/431](http://www.wetfeetblog.com/servlet-filer-to-log-request-and-response-details-and-payload/431)

[http://angelborroy.wordpress.com/2009/03/04/dump-request-and-response-using-javaxservletfilter/](http://angelborroy.wordpress.com/2009/03/04/dump-request-and-response-using-javaxservletfilter/)

# jquery - 为 qunit 测试设置复选框

> ID：12371171
> 
> 赞同：2
> 
> 时间：2012-09-11T13:45:07.620
> 
> 标签：jquery, jquery-ui, qunit

我开始使用 QUnit。我有以复选框状态为条件的现有逻辑。

```
function CheckEmailRequirementSatisfied() {
if (isEdit == "false") {
    if ($("#EmailId").val() != "" || $("#IsOtherEmail").is(":checked")) {
        $("#EmailRequirementSatisfied").val("1");
    } else {
        $("#EmailRequirementSatisfied").val("");
    }
}
} 
```

我有以下带有设置和测试的模块。

```
module("CheckEmailRequirementSatisfied", {
setup: function () {
    $("#qunit-fixture").append('<input id="EmailId" /> ');
    $("#qunit-fixture").append('<input id="EmailRequirementSatisfied" /> ');
    $("#qunit-fixture").append('<input type="checkbox" name="IsOtherEmail" /> ');
}
});

test("IsOtherEmail true", function () {
isEdit = "false";
$("#EmailId").val("");
$("#EmailRequirementSatisfied").val("test value");
/*
    document.getElementById('IsOtherEmail').checked=true;
    $("#IsOtherEmail").prop("checked", true);
    $("#IsOtherEmail").attr("checked", "checked");
    $("#IsOtherEmail").val(true);
*/
CheckEmailRequirementSatisfied();

ok($("#EmailRequirementSatisfied").val() == "1", "Requirements should be set to 1");
}); 
```

我已经尝试了测试注释块中的所有选项来设置我的复选框。但它一直没有说它没有被检查。

使用[https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js)和[http://code.jquery.com/qunit/qunit-1.10.0.js](http://code.jquery.com/qunit/qunit-1.10.0.js)

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:25:04.837

那条线不应该是：

```
 $("#qunit-fixture").append('<input type="checkbox" id="IsOtherEmail" /> '); 
```

即'id'而不是'name'？

# ios - 在 IOS 实用程序应用程序视图之间共享数据

> ID：12371180
> 
> 赞同：1
> 
> 时间：2012-09-11T13:45:28.867
> 
> 标签：ios, global-variables, data-sharing

我使用 Xcode 4.2 中的 Utility Application 模板创建了一个非常基本的应用程序，其中我希望从 MainViewController 中可用的 FlipsideViewController 中的滑块或文本字段获取整数变量。

我一直在寻找关于全局变量的小时，但找不到适合我的具体情况的简单好答案。

请帮忙

（注意：我在为 IOS 和目标 C 开发方面非常新。尽你所能为我降低你的答案！）

非常感谢

以下是我的代码的基本版本，显示了我想要做什么。

FlipSideViewController.h

```
#import <UIKit/UIKit.h>

@class FlipsideViewController;

@protocol FlipsideViewControllerDelegate
- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller;
@end

@interface FlipsideViewController : UIViewController

@property (weak, nonatomic) id <FlipsideViewControllerDelegate> delegate;

- (IBAction)done:(id)sender;
- (IBAction)sliderChange:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *sliderValueOnFlipside;

@end 
```

FlipSideViewController.m

```
#import "FlipsideViewController.h"

@interface FlipsideViewController ()

@end

@implementation FlipsideViewController
@synthesize sliderValueOnFlipside;

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [self setSliderValueOnFlipside:nil];
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Actions

- (IBAction)done:(id)sender
{
    [self.delegate flipsideViewControllerDidFinish:self];
}

- (IBAction)sliderChange:(id)sender {
    UISlider *slider = (UISlider *) sender;
    int var = [slider value];

    sliderValueOnFlipside.text = [NSString stringWithFormat:@"Slider Value is %d",var];
}

@end 
```

主视图控制器.h

```
#import "FlipsideViewController.h"

@interface MainViewController : UIViewController <FlipsideViewControllerDelegate>

- (IBAction)showInfo:(id)sender;
@property (weak, nonatomic) IBOutlet UILabel *sliderValueOnMain;

@end 
```

主视图控制器.m

```
#import "MainViewController.h"

@interface MainViewController ()

@end

@implementation MainViewController
@synthesize sliderValueOnMain;

- (void)viewDidLoad
{
    [super viewDidLoad];

    sliderValueOnMain.text = [NSString stringWithFormat:@"Slider Value from flipside is %d", var];
}

- (void)viewDidUnload
{
    [self setSliderValueOnMain:nil];
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark - Flipside View

- (void)flipsideViewControllerDidFinish:(FlipsideViewController *)controller
{
    [self dismissModalViewControllerAnimated:YES];
}

- (IBAction)showInfo:(id)sender
{    
    FlipsideViewController *controller = [[FlipsideViewController alloc] initWithNibName:@"FlipsideViewController" bundle:nil];
    controller.delegate = self;
    controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:controller animated:YES];
}

@end 
```

我可以轻松地将滑块的值显示在翻转视图上，但是我也希望该值显示在主视图上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:22:35.770

全局变量在礼貌的编程圈子中通常不受欢迎。

如果您希望 MainViewController 中的方法对 FlipsideViewController 中的状态变化做出反应，那么您可以使 MVC 成为 FVC 的委托，并让 FVC 在值更改时调用 MVC 上的方法。

这里对委托设计模式有很好的解释：http: [//mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

# c# - 如何更改文本框的位置

> ID：12371184
> 
> 赞同：-2
> 
> 时间：2012-09-11T13:45:37.623
> 
> 标签：c#, textbox

我有一个问题，我正在制作自己的自定义 SharePoint webpart。一切顺利，但问题是我不知道如何更改文本框和标签的位置。有谁知道我如何更改位置？

我正在尝试在 C# 中完成它。

问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T16:39:41.077

“如何更改文本框和标签的位置”

在此示例中，我使用了一个按钮（在单击按钮时执行的操作），并且我还添加了如何生成文本框和标签（当您按下此按钮时）。仅仅因为这通常是为控件设置位置的常见过程。

```
 private void button1_Click(object sender, EventArgs e)
    {
        // Settings to generate a New TextBox
        TextBox txt = new TextBox();   // Create the Variable for TextBox
        txt.Name = "MyTextBoxID";      // Identify your new TextBox

        // Create Variables to Define "X" and "Y" Locations
        var txtLocX = txt.Location.X;
        var txtLocY = txt.Location.Y;

        //Set your TextBox Location Here
        txtLocX = 103;
        txtLocY = 74;

        // This adds a new TextBox
        this.Controls.Add(txt);

        // Now do the same for Labels

        // Settings to generate a New Label
        Label lbl = new Label();   // Create the Variable for Label
        lbl.Name = "MyNewLabelID"; // Identify your new Label

        // Create Variables to Define "X" and "Y" Locations
        var lblLocX = lbl.Location.X;
        var lblLoxY = lbl.Location.Y;

        //Set your Label Location Here
        lblLocX = 34;
        lblLoxY = 77;

        // Adds a new Label
        this.Controls.Add(lbl);
    }
} 
```

注意：这只是一个示例，回发后将不起作用。

我希望这能回答你和每个人的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T13:40:03.733

在组件 ID 的帮助下。设置该特定组件的位置。

# php - 带有 php 循环的 CSS onmouseover 库

> ID：12371188
> 
> 赞同：0
> 
> 时间：2012-09-11T13:46:06.273
> 
> 标签：php, css, image, gallery

我曾经使用 CSS 创建了一个图片库，它执行了以下操作：

1.  创建了一个缩略图库
2.  创建了一个 div，其中放置了 1x1 像素图像
3.  在缩略图的鼠标悬停时，这些 1x1 像素的图像会扩展以适应 div 大小，高度与长度相关。
4.  到目前为止我的代码：

php:

```
echo '<div id="thumbnails">';
$files = glob("11-09-2012/*.*");
for ($i=1; $i<count($files); $i++)
{       //creating thumbnails
   $num = $files[$i];
   echo '<img src="'.$num.'" height="50px" id="thumb'.$files[$i].'"></img>';
};

   echo '</div><div id="gallery">';
   for ($i=1; $i<count($files); $i++)
{       //creating 1x1
   $num = $files[$i];
   echo '<img STYLE="position:absolute" src="'.$num.'" height="1px" width="1px" id="img'.$files[$i].'"></img>';
};
echo '</div>'; 
```

CSS：

```
#gallery {
margin: 0 auto; 
border-style: solid;
border-width: 3px;
border-color: #fff;
width: 800px;  
height: 600px;  
} 
```

现在我不知道该去哪里 - 感谢任何帮助 - 替代方法也是如此。

最好的问候 - 杰斯珀

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:10:24.627

一个天真的程序员可能会推荐 jQuery，或者为每个单独的图像附加一个事件。以下是大男孩的做法：

```
(function() {
  var box = document.getElementById('thumbnails'),
      handler = function(e) {
        e = e||window.event;
        var tar = e.target || e.srcElement,
            type = e.type, id = tar.id, m, img;
        if( (m=id.match(/^thumb(.*)$/)) && (img=document.getElementById('img'+m[1]))) {
          img.style.height = img.style.width = type == "mouseover" ? "auto" : "1px";
        }
      };
  if( typeof box.attachEvent != "undefined") {
    box.attachEvent('onmouseover',handler);
    box.attachEvent('onmouseout',handler);
  }
  else {
    box.addEventListener('mouseover',handler);
    box.addEventListener('mouseout',handler);
  }
})(); 
```

您需要对 HTML 进行的唯一更改是`width="1px" height="1px"`从图像中删除 ，而是添加`width:1px;height:1px;max-width:800px;max-height:600px;`到图像的样式中。这在 CSS 文件中会更好：

```
#gallery>img {
    position: absolute;
    left: 0; top: 0;
    width: 1px; height: 1px;
    max-width: 800px;
    max-height: 600px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:25:57.450

[http://jsfiddle.net/yDUMT/](http://jsfiddle.net/yDUMT/)

jsfiddle 显示了 onMouseOver 与 javascript 函数一起使用，以在鼠标悬停时放大 1px，以及 onMouseOut 与 javascript 函数一起使用，以在鼠标移出缩略图时将放大的 1px 图像缩小。

# ios - MPMoviePlayer 缓冲区大小/调整

> ID：12371196
> 
> 赞同：2
> 
> 时间：2012-09-11T13:46:24.660
> 
> 标签：ios, streaming, buffer, mpmovieplayercontroller

我一直在使用`MPMovieplayer`和`playableDuration`来检查电影的可用时长。

持续时间似乎总是比我当前的持续时间长约 1 秒，基本上我想增加它。

我曾尝试使用，`prepareToPlay`但这似乎对可播放的持续时间没有任何明显影响。

我尝试设置尽可能多的参数，以尝试通过预先设置默认值来更改值，例如`MPMovieSourceType`,`MediaType`等，但都无济于事。

首先要弄清楚一些事情：我同时使用两者`MPMoviePlayer`，并且`AVplayer`它们同时播放不同的流，因为我使用的视频/音频是拆分的。

**编辑**

似乎我忽略了影响流的文件大小，应该在苹果资源中阅读更多内容，然后在其他地方，但据我所知，问题是：文件大小太大，因此必须实现服务器端媒体分段器.

[Apple 媒体分割资源](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/HTTPStreamingArchitecture/HTTPStreamingArchitecture.html#//apple_ref/doc/uid/TP40008332-CH101-SW2)

# windows - Magnify.exe 命令行参数

> ID：12371198
> 
> 赞同：4
> 
> 时间：2012-09-11T13:46:30.603
> 
> 标签：windows, command-line-arguments, magnify

有谁知道我是否可以将任何命令行参数传递给 Windows 放大镜（magnify.exe），以便使用镜头视图打开它。

或者可能是其他方式，我尝试使用快捷方式打开并发送键盘输入以更改视图，但它通常在更改视图之前闪烁！=/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-08T16:21:24.817

我只是需要做同样的事情，并在这里试图找到解决方案。认为他们没有命令行开关来设置视图是荒谬的，所以我开始尝试一些。看哪！我得分：

*   **Magnify.exe /lens** （默认为镜头视图）
*   **Magnify.exe /fullscreen**（默认为全屏视图）
*   **Magnify.exe /停靠**（默认为停靠视图）

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:57:30.650

`Magnify.exe /?`在命令行上不会为可执行文件提供任何帮助。并且在线搜索似乎没有提供任何命令行参数的证据。让我得出结论，magnify.exe 不接受命令行参数。

我建议阅读这篇关于[将击键发送到另一个应用程序的文章。](http://www.codeproject.com/Articles/18366/Sending-Keystrokes-to-another-Application-in-C)他的演示应用程序帮助我将键盘快捷键发送到 magnify.exe。他的源代码也可用，因此您可以集成到您的应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T19:02:11.140

您可以尝试使用 autoit，它是一种类似于 basic 的脚本语言，非常适合自动化任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-01T12:21:33.600

按照这些思路，这个 autoit 脚本可能会有所帮助 - 它列出了一些 msdn doco，如果您知道 autoit 脚本。

[放大镜 UDF](http://www.autoitscript.com/forum/topic/161193-magnifier-functions-windows-vista-magnifier-manipulation/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-27T01:27:40.817

我正在使用解决方法。我创建了一个 Windows-8 样式的批处理文件，其中包含一个命令“放大/打开”。我不确定“/ on”部分是否必要。我试图放大的程序（这是一个在 DOS-Box 中运行的旧 DOS 程序）启动时带有放大窗口，方便我更改放大设置。我试图在关闭后包含一个命令“放大/关闭”，但它不起作用；因此，必须单击放大镜窗口框才能将放大倍率恢复正常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-02T19:27:54.127

这是 UNIX“字符串”实用程序的一个很好的例子，这里有一个 Sysinternals[版本](https://docs.microsoft.com/en-us/sysinternals/downloads/strings)

这需要一些挖掘和测试，但我发现了以下选项：

*   等待（在您按下键之前不会放大）
*   努蒂尔曼
*   硬件按钮启动
*   全屏
*   镜片
*   停靠
*   亮点
*   全局热键

# html - 图像不会位于 html 的底部

> ID：12371199
> 
> 赞同：0
> 
> 时间：2012-09-11T13:46:30.510
> 
> 标签：html, position

我有一个要放在屏幕底部的菜单栏。我已将定位设置为绝对，将底部的距离设置为“0”，但由于某种原因，无论我如何尝试定位它，它都不会从屏幕中间移动。谁能抓住我做错了什么？

```
<div class=bmenu>
  <img src="bottommenu.gif" width=100% height="39" alt="" />
</div>

<style>
.bmenu
{
    position:absolute;
    z-index: 2;
    bottom:0;
    left:0;
    width:100%;
}
</style> 
```

编辑：一些评论者说这段代码把它放在了他们的底部。这是否意味着问题出在此代码片段与其余代码交互的方式上？有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:33:41.170

如果您使用任何浏览器的网络检查器，您会看到`<html>`和`<body>`元素的高度不是 100%，而是`auto`，这意味着它们的高度仅与它们中的内容扩展它们的高度一样高。

您需要做的是设置这些元素的高度，如下所示：

```
html, body {
    height: 100%;
} 
```

这将迫使它们填满视口的整个高度。唯一需要注意的是，这需要您在其他元素上定义`margin-top`、和`margin-bottom`，因为边距和填充将添加**到 height 的顶部**，这不是您在定义（或就此而言）时通常想要的。`padding-top``padding-bottom`**`height``width``%`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:48:12.593

尝试使用此代码：

```
.bmenu
{
    position:fixed;
    z-index: 2;
    bottom:0;
    left:0;
    width:100%;

} 
```**

# javascript - 当浏览器控制台未打开时，为什么需要在 Internet Explorer 9 中导致超时？

> ID：12371201
> 
> 赞同：1
> 
> 时间：2012-09-11T13:46:38.013
> 
> 标签：javascript, internet-explorer-9, browser-console

我正在维护一个建立在以下堆栈之上的遗留 Web 应用程序：

*   服务器端
    *   NGINX
    *   龙卷风
*   客户端
    *   要求JS
    *   jQuery
    *   骨干

在 Firefox 和 Chrome 中一切正常，但在 IE9 中，`require`在函数内部调用动态加载模块会导致超时。打开 JavaScript 控制台以查找错误后，它可以正常工作（并且没有记录错误）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:53:13.167

激活的开发人员工具通常会通过至少两件事影响您的页面和 javascript：
1) console.*() 功能在开发工具打开时可用（通常是因为您的代码中忘记了 console.log()。我推荐[console.log wrapper](http://paulirish.com/2009/log-a-lightweight-wrapper-for-consolelog/) )
2) 与选择的默认 IE 渲染引擎版本不同。检查您的 Doctype 和 X-UA-Compatible 元标记值。

还要检查一下：[在使用开发人员工具时，IE9 是否启用了“某些东西”？](https://stackoverflow.com/questions/10415519/does-ie9-enable-something-when-using-developer-tools)

# session - 从 HttpSessionEvent 获取 Request 对象

> ID：12371202
> 
> 赞同：0
> 
> 时间：2012-09-11T13:46:40.207
> 
> 标签：session, httprequest, httpresponse

我有一个`Session`扩展的监听器`PortalSessionListener`。我有`sessionCreated(HttpSessionEvent httpSessionEvent)`和`sessionDestroyed(HttpSessionEvent httpSessionEvent)`方法

当我`Session`失效时（根据我在 web.xml 中的配置，15 分钟后），我的监听器被调用并`Session`失效。

在我的听众中，我想`Cookie`在注销用户之前清除值。所以，我想要`Request`和`Response`对象，以便我可以清除 Cookie 值并将其设置为`Response`.

但是，我怎样才能`Request / Response`在我的监听器中获取对象`HttpSessionEvent`？

我试过下面的代码。但是，当我的`sessionDestroyed`方法被调用或任何其他阶段时，这不会被调用。

```
public void requestInitialized(ServletRequestEvent servletRequestEvent) 
 {
        log.debug("Entered into requestInitialized method");
        HttpServletRequest request = (HttpServletRequest) servletRequestEvent.getServletRequest();

        log.debug("Request object created is :" +request);

 } 
```

有人建议实施`Filter`适合此要求（用于获取`Request`对象）。如何将其应用于我的场景？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:04:05.550

这可能是真实的：

> 您可以访问 RequestContextHolder 并获取值
> 
> String ipAddr = ((ServletRequestAttributes)RequestContextHolder.currentRequestAttributes()) .getRequest().getRemoteAddr();

[在这里发布](https://stackoverflow.com/questions/3597083/how-to-get-the-ip-address-when-a-session-is-created)

# android - 为什么我们两次使用 invalidat() ？

> ID：12371206
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:46:51.197
> 
> 标签：android, invalidation

我读了 Hello Android 书，但我不理解代码的 PuzzleView 类的某些部分。invalidate() 函数只重绘页面的一部分，而不是重绘所有页面。这是真实的？

下面这个函数，为什么我们用了两次invalidate()？这两者有什么区别？

```
private void select(int x, int y) {
    invalidate(selRect);
    selX = Math.min(Math.max(x, 0), 8);
    selY = Math.min(Math.max(y, 0), 8);
    getRect(selX, selY, selRect);
    invalidate(selRect);
} 
```

请帮我 。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:51:56.770

因为被无效的矩形可能在第一次调用和第二次调用之间发生了变化

View.invalidate(Rect dirty) 会导致dirty中定义的区域被重绘

# java - 如何从java应用程序打印PDF

> ID：12371211
> 
> 赞同：3
> 
> 时间：2012-09-11T13:47:02.873
> 
> 标签：java, pdf, printing, pdfbox

我必须使用 java 应用程序打印 PDF 文件。我试过这样的方法：

```
FileInputStream psStream = new FileInputStream("<path to file>");
PrintService service = getPrinterByName("some printer name");
if (service != null) {
    DocPrintJob printJob = service.createPrintJob();
    Doc document = new SimpleDoc(psStream, DocFlavor.INPUT_STREAM.AUTOSENSE, null);
    try {
        printJob.print(document, null);
    } catch (PrintException e) {
        e.printStackTrace();
    }
}

private PrintService[] getPrintersList() {
    DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
    PrintService[] services = PrintServiceLookup.lookupPrintServices(flavor, null);

    return services;
}

private PrintService getPrinterByName(String name) {
    PrintService[] list = getPrintersList();
    if (list.length > 0) {
        for (PrintService service : list) {
            if (service.getName().contains(name)) {
                return service;
            }
        }
    }
    return null;
} 
```

当我在假打印机上测试时（我使用 PDFCreator 作为打印机）一切正常，但是当我尝试在物理打印机上打印时，什么也没发生。

然后我使用[了 PDFBox](http://pdfbox.apache.org/)。文件打印出来了，但是单词之间有奇怪的点，在不应该出现的地方。

那么，也许有人有从 Java 应用程序打印 PDF 的经验并且可以分享这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:18:58.677

将 PDF 文件直接发送到打印机仅适用于本机支持 PDF 格式的打印机。任何虚拟 PDF 打印机都支持此功能，但大多数硬件打印机不支持。如果要可靠地打印 PDF 文件，则需要使用库将其内容*呈现*到打印机中。

然后看一下 SO 中的这个问题：
[我应该使用哪个基于 Java 的 PDF 渲染库进行打印？](https://stackoverflow.com/questions/1084660/which-java-based-pdf-rendering-library-should-i-use-for-printing)

**更新：** 上面的链接已损坏，但除了进行谷歌搜索之外，没有其他替代品。不幸的是，堆栈溢出所有者决定不欢迎与库推荐相关的问题。

# c# - 邮件不适用于多个收件人地址

> ID：12371212
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:47:06.813
> 
> 标签：c#, sendmail

> **可能重复：**
> [无法使用 C# 向多个地址/收件人发送电子邮件](https://stackoverflow.com/questions/3209129/sending-an-email-to-multiple-addresses-recipients)

我使用下面的代码在脚本任务中发送邮件

```
 string MailFromName = "Admin";
            System.Net.Mail.SmtpClient mailobj = new System.Net.Mail.SmtpClient();
            System.Net.Mail.MailAddress MailFrom = new System.Net.Mail.MailAddress(MailFromEmail, MailFromName);
            System.Net.Mail.MailAddress MailTo = new System.Net.Mail.MailAddress(MailToEmail, MailToEmail);
            System.Net.Mail.MailMessage mailmsg = new System.Net.Mail.MailMessage(MailFrom, MailTo);
            mailmsg.IsBodyHtml = true;
            mailmsg.Subject = strMessageSubject;
            mailmsg.Body = strMessageBody;
            mailobj.Host = strSMTPServerName;
            mailobj.Send(mailmsg); 
```

当我将 MailToEmail 用作“myaddress@myMail.com”即一个电子邮件地址时，它工作正常

但是当我有多个地址要列出时，这不会发送任何邮件（也不会失败）

例如：“MyAdress@MyMail.com；MySecondAddress@MyMail.com”

如何解决这个问题？

**编辑**新代码

```
 string MailFromName = "Admin";
            System.Net.Mail.SmtpClient mailobj = new System.Net.Mail.SmtpClient();
            System.Net.Mail.MailAddress MailFrom = new System.Net.Mail.MailAddress(MailFromEmail, MailFromName);
            System.Net.Mail.MailAddress MailTo = new System.Net.Mail.MailAddress(MailToEmail, MailToEmail);
            System.Net.Mail.MailMessage mailmsg = new System.Net.Mail.MailMessage(MailFrom, MailTo);
            mailmsg.IsBodyHtml = true;
            mailmsg.Subject = strMessageSubject;
            mailmsg.Body = strMessageBody;
            foreach (string str in multipleToMsg)
            {
                mailmsg.To.Add(str);
            }

            mailobj.Host = strSMTPServerName;
            mailobj.Send(mailmsg); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:51:04.430

您尚未显示添加收件人的准确程度。但是，要添加多个收件人，请添加到“收件人”集合：

```
MailMessage message = new MailMessage();
message.To.Add("sillyjoe@stackoverflow.com"); 
```

“收件人”是邮件地址的集合。确保将其添加到该集合中，而不是尝试将电子邮件地址全部连接到一个 MailAddress 对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:52:00.150

根据[MSDN：MailMessage 类](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.to.aspx)，“To”属性是 MailAddresses 的集合

所以你只需要做类似的事情

```
mailmsg.To.Add(new System.Net.Mail.MailAddress(MailToEmail, MailToEmail)); 
mailmsg.To.Add(new System.Net.Mail.MailAddress(MailToEmail2, MailToEmail2)) 
```

或在 foreach 循环中

```
//get email addresses into a collection called emailAdds
foreach (var emailAdd in emailAdds)
{
    mailmsg.To.Add(new System.Net.Mail.MailAddress(emailAdd, emailAdd )); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T13:51:30.500

要指定多个地址，您需要使用作为[MailAddressCollection的 To 属性](http://msdn.microsoft.com/en-us/library/system.net.mail.mailaddresscollection.aspx)

```
message.To.Add("one@example.com, one@example.com"));
message.To.Add("two@example.com, two@example.com")); 
```

# php - 全局常量并包含我的 CMS 页面的路径

> ID：12371214
> 
> 赞同：0
> 
> 时间：2012-09-11T13:47:11.283
> 
> 标签：php, configuration, content-management-system, constants

我们有一个 CMS，它在无限深度的文件系统中创建页面（带有 index.php 的文件夹）。用户可以添加、编辑和移动页面到上/下级别。我正在寻找与服务器无关的最佳方法，如何设置包含路径以始终从站点根目录（或与子根目录一起使用）开始调用我的 config.php 的全局可用常量。

想避免使用 .htacces 或自定义 php.ini，因为我事先不知道任何服务器的安全设置。当然，安全很重要。

到目前为止，最好的选择是在每个页面模板顶部包含（其中 wwwmap 是 Web 根目录）：

```
 $doc_root="C:\\wwwmap\\subfolder\\";
  ini_set("include_path", get_include_path() . PATH_SEPARATOR . $doc_root );  
  include_once("sitesetup.php"); 
```

（在 sitesetup.php 中，调用 config.php 并开始会话）您的想法非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:50:12.327

`$_SERVER['DOCUMENT_ROOT']`行不通（而不是 $doc_root） ？[http://ch2.php.net/manual/en/reserved.variables.server.php](http://ch2.php.net/manual/en/reserved.variables.server.php)

# java - EJB 覆盖 JPA javax.persistence

> ID：12371215
> 
> 赞同：0
> 
> 时间：2012-09-11T13:47:20.283
> 
> 标签：java, hibernate, jpa, ejb, guice-persist

我对 Java EE 领域还很陌生，所以请原谅我的无知；我继承了一个使用 guice-persist 和 hibernate 来处理 ORM 的应用程序。

我正在尝试使用`CriteriaQuery`，但我发现我的`jaxax.persistence.EntityManager`似乎是[这个](http://www.jarvana.com/jarvana/view/org/ow2/spec/ee/ow2-jpa-1.0-spec/1.0.2/ow2-jpa-1.0-spec-1.0.2-javadoc.jar!/javax/persistence/EntityManager.html)接口（来自 EJB），而不是[我想要的](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)接口（来自 JPA），所以我无法使用`createQuery(CriteriaQuery)`.

这是一个 Maven 项目，我不清楚这个 EJB 代码是从哪里来的——我从 Guice-Persist 和 Hibernate 中看到的一切都显示了 JPA 接口，而不是 EJB 接口，所以我不知道这个 EJB 包在哪里来自。

这里有什么想法吗？我是否有一个杂散的 Maven 依赖项将 EJB 引入我的项目，或者听起来我误解了持久层并且实际上在我的应用程序中需要 EJB？

如果您让我知道您需要什么，我将很乐意发布更多信息。

编辑：

经过仔细检查，我开始怀疑我的“远程”项目有一个格式错误的 pom.xml。下面的依赖树。

```
 [INFO] --- maven-dependency-plugin:2.1:tree (default-cli) @ texasU ---
    [INFO] texasU:texasU:war:1.1.2-SNAPSHOT
    [INFO] +- com.google.gwt:gwt-user:jar:2.5.0-rc1:provided
    [INFO] |  +- (javax.validation:validation-api:jar:1.0.0.GA:compile - scope updat
    ed from provided; omitted for duplicate)
    [INFO] |  +- javax.validation:validation-api:jar:sources:1.0.0.GA:provided
    [INFO] |  \- org.json:json:jar:20090211:provided
    [INFO] +- com.google.gwt:gwt-servlet:jar:2.5.0-rc1:runtime
    [INFO] +- com.arcbees.core:arcbees-core:jar:1.0-SNAPSHOT:provided
    [INFO] |  +- (com.google.gwt:gwt-servlet:jar:2.4.0:provided - omitted for confli
    ct with 2.5.0-rc1)
    [INFO] |  +- com.google.appengine:appengine-api-1.0-sdk:jar:1.6.1:provided
    [INFO] |  +- (com.gwtplatform:gwtp-dispatch-server-guice:jar:0.8-SNAPSHOT:provid
    ed - omitted for duplicate)
    [INFO] |  +- (com.gwtplatform:gwtp-dispatch-shared:jar:0.8-SNAPSHOT:compile - sc
    ope updated from provided; omitted for duplicate)
    [INFO] |  +- (com.google.inject:guice:jar:3.0:compile - scope updated from provi
    ded; omitted for duplicate)
    [INFO] |  +- (com.google.inject.extensions:guice-servlet:jar:3.0:provided - omit
    ted for duplicate)
    [INFO] |  +- (com.google.inject.extensions:guice-assistedinject:jar:3.0:provided
     - omitted for duplicate)
    [INFO] |  +- javax.persistence:persistence-api:jar:1.0:provided
    [INFO] |  +- org.restlet.gae:org.restlet:jar:2.1-RC2:provided
    [INFO] |  \- org.restlet.gae:org.restlet.ext.servlet:jar:2.1-RC2:provided
    [INFO] |     \- (org.restlet.gae:org.restlet:jar:2.1-RC2:provided - omitted for
    duplicate)
    [INFO] +- com.gwtplatform:gwtp-mvp-client:jar:0.8-SNAPSHOT:provided
    [INFO] |  \- com.gwtplatform:gwtp-clients-common:jar:0.8-SNAPSHOT:provided
    [INFO] |     \- (com.google.inject:guice:jar:3.0:provided - omitted for duplicat
    e)
    [INFO] +- com.gwtplatform:gwtp-dispatch-client:jar:0.8-SNAPSHOT:provided
    [INFO] |  +- (com.gwtplatform:gwtp-clients-common:jar:0.8-SNAPSHOT:provided - om
    itted for duplicate)
    [INFO] |  +- (com.gwtplatform:gwtp-dispatch-shared:jar:0.8-SNAPSHOT:provided - o
    mitted for duplicate)
    [INFO] |  \- (com.google.inject:guice:jar:3.0:provided - omitted for duplicate)
    [INFO] +- com.gwtplatform:gwtp-dispatch-server-guice:jar:0.8-SNAPSHOT:compile
    [INFO] |  +- com.gwtplatform:gwtp-dispatch-server:jar:0.8-SNAPSHOT:compile
    [INFO] |  |  \- (com.gwtplatform:gwtp-dispatch-shared:jar:0.8-SNAPSHOT:compile -
     omitted for duplicate)
    [INFO] |  +- (com.gwtplatform:gwtp-dispatch-shared:jar:0.8-SNAPSHOT:compile - om
    itted for duplicate)
    [INFO] |  \- (com.google.inject:guice:jar:3.0:compile - omitted for duplicate)
    [INFO] +- com.gwtplatform:gwtp-dispatch-shared:jar:0.8-SNAPSHOT:compile
    [INFO] +- com.gwtplatform:gwtp-processors:jar:0.8-SNAPSHOT:provided
    [INFO] +- com.google.inject:guice:jar:3.0:compile
    [INFO] |  +- javax.inject:javax.inject:jar:1:compile
    [INFO] |  \- aopalliance:aopalliance:jar:1.0:compile
    [INFO] +- com.google.inject.extensions:guice-servlet:jar:3.0:compile
    [INFO] |  \- (com.google.inject:guice:jar:3.0:compile - omitted for duplicate)
    [INFO] +- com.google.inject.extensions:guice-assistedinject:jar:3.0:compile
    [INFO] |  \- (com.google.inject:guice:jar:3.0:compile - omitted for duplicate)
    [INFO] +- com.google.gwt.inject:gin:jar:1.5.0:provided
    [INFO] |  +- (com.google.inject:guice:jar:3.0-rc2:provided - omitted for conflic
    t with 3.0)
    [INFO] |  +- (com.google.inject.extensions:guice-assistedinject:jar:3.0-rc2:prov
    ided - omitted for conflict with 3.0)
    [INFO] |  \- (com.google.gwt:gwt-servlet:jar:2.2.0:provided - omitted for confli
    ct with 2.5.0-rc1)
    [INFO] +- mysql:mysql-connector-java:jar:5.1.21:compile
    [INFO] +- org.hibernate:hibernate-core:jar:4.1.4.Final:compile
    [INFO] |  +- antlr:antlr:jar:2.7.7:compile
    [INFO] |  +- org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile
    [INFO] |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:jar
    :1.0.0.Final:compile
    [INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
    [INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Fin
    al:compile
    [INFO] |  +- org.javassist:javassist:jar:3.15.0-GA:compile
    [INFO] |  \- org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final:
    compile
    [INFO] |     \- (org.jboss.logging:jboss-logging:jar:3.1.0.CR2:compile - omitted
     for conflict with 3.1.0.GA)
    [INFO] +- org.hibernate:hibernate-entitymanager:jar:4.1.4.Final:compile
    [INFO] |  +- (org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile - omitted for
     duplicate)
    [INFO] |  +- (org.hibernate:hibernate-core:jar:4.1.4.Final:compile - omitted for
     duplicate)
    [INFO] |  +- (org.jboss.spec.javax.transaction:jboss-transaction-api_1.1_spec:ja
    r:1.0.0.Final:compile - omitted for duplicate)
    [INFO] |  +- (dom4j:dom4j:jar:1.6.1:compile - omitted for duplicate)
    [INFO] |  +- (org.hibernate.javax.persistence:hibernate-jpa-2.0-api:jar:1.0.1.Fi
    nal:compile - omitted for duplicate)
    [INFO] |  +- (org.javassist:javassist:jar:3.15.0-GA:compile - omitted for duplic
    ate)
    [INFO] |  \- (org.hibernate.common:hibernate-commons-annotations:jar:4.0.1.Final
    :compile - omitted for duplicate)
    [INFO] +- org.hibernate:hibernate-validator:jar:4.3.0.Final:compile
    [INFO] |  +- javax.validation:validation-api:jar:1.0.0.GA:compile
    [INFO] |  \- (org.jboss.logging:jboss-logging:jar:3.1.0.CR2:compile - omitted fo
    r conflict with 3.1.0.GA)
    [INFO] +- com.google.inject.extensions:guice-persist:jar:3.0:compile
    [INFO] |  \- (com.google.inject:guice:jar:3.0:compile - omitted for duplicate)
    [INFO] +- org.hibernate:hibernate-c3p0:jar:4.1.4.Final:compile
    [INFO] |  +- (org.jboss.logging:jboss-logging:jar:3.1.0.GA:compile - omitted for
     duplicate)
    [INFO] |  +- (org.hibernate:hibernate-core:jar:4.1.4.Final:compile - omitted for
     duplicate)
    [INFO] |  \- c3p0:c3p0:jar:0.9.1:compile
    [INFO] +- com.googlecode.gwtquery:gwtquery:jar:1.1.0:provided
    [INFO] +- com.google.guava:guava:jar:13.0-rc2:compile
    [INFO] +- com.google.guava:guava-gwt:jar:13.0-rc2:provided
    [INFO] |  \- (com.google.guava:guava:jar:13.0-rc2:provided - omitted for duplica
    te)
    [INFO] +- org.mindrot:jbcrypt:jar:0.3m:compile
    [INFO] +- javax.mail:mail:jar:1.4.5:compile
    [INFO] |  \- javax.activation:activation:jar:1.1:compile
    [INFO] +- edu.utsouthwestern.qbri.remoter:service-bundle:jar:1.0-SNAPSHOT:compil
    e
    [INFO] |  +- org.nuiton.thirdparty:Rserve:jar:0.6-1:compile
    [INFO] |  +- org.nuiton.thirdparty:REngine:jar:0.6-1:compile
    [INFO] |  +- org.apache.cxf:cxf-rt-frontend-jaxws:jar:2.5.1:compile
    [INFO] |  |  +- xml-resolver:xml-resolver:jar:1.2:compile
    [INFO] |  |  +- asm:asm:jar:3.3:compile
    [INFO] |  |  +- org.apache.cxf:cxf-api:jar:2.5.1:compile
    [INFO] |  |  |  +- org.apache.cxf:cxf-common-utilities:jar:2.5.1:compile
    [INFO] |  |  |  |  +- (org.apache.ws.xmlschema:xmlschema-core:jar:2.0.1:compile
    - omitted for duplicate)
    [INFO] |  |  |  |  \- org.codehaus.woodstox:woodstox-core-asl:jar:4.1.1:runtime
    [INFO] |  |  |  |     \- org.codehaus.woodstox:stax2-api:jar:3.1.1:runtime
    [INFO] |  |  |  +- org.apache.ws.xmlschema:xmlschema-core:jar:2.0.1:compile
    [INFO] |  |  |  +- org.apache.neethi:neethi:jar:3.0.1:compile
    [INFO] |  |  |  \- wsdl4j:wsdl4j:jar:1.6.2:compile
    [INFO] |  |  +- org.apache.cxf:cxf-rt-core:jar:2.5.1:compile
    [INFO] |  |  |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |  |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.1.13:compile
    [INFO] |  |  |  +- (org.apache.ws.xmlschema:xmlschema-core:jar:2.0.1:compile - o
    mitted for duplicate)
    [INFO] |  |  |  \- org.apache.geronimo.specs:geronimo-javamail_1.4_spec:jar:1.7.
    1:compile
    [INFO] |  |  +- org.apache.cxf:cxf-rt-bindings-soap:jar:2.5.1:compile
    [INFO] |  |  |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |  |  |  +- org.apache.cxf:cxf-tools-common:jar:2.5.1:compile
    [INFO] |  |  |  |  +- (wsdl4j:wsdl4j:jar:1.6.2:compile - omitted for duplicate)
    [INFO] |  |  |  |  +- (com.sun.xml.bind:jaxb-impl:jar:2.1.13:compile - omitted f
    or duplicate)
    [INFO] |  |  |  |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for du
    plicate)
    [INFO] |  |  |  |  +- (org.apache.cxf:cxf-common-utilities:jar:2.5.1:compile - o
    mitted for duplicate)
    [INFO] |  |  |  |  \- (org.apache.cxf:cxf-rt-core:jar:2.5.1:compile - omitted fo
    r duplicate)
    [INFO] |  |  |  \- org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.5.1:compile
    [INFO] |  |  |     +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for du
    plicate)
    [INFO] |  |  |     +- (org.apache.cxf:cxf-rt-core:jar:2.5.1:compile - omitted fo
    r duplicate)
    [INFO] |  |  |     \- (com.sun.xml.bind:jaxb-impl:jar:2.1.13:compile - omitted f
    or duplicate)
    [INFO] |  |  +- org.apache.cxf:cxf-rt-bindings-xml:jar:2.5.1:compile
    [INFO] |  |  |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |  |  |  \- (org.apache.cxf:cxf-rt-databinding-jaxb:jar:2.5.1:compile - o
    mitted for duplicate)
    [INFO] |  |  +- org.apache.cxf:cxf-rt-frontend-simple:jar:2.5.1:compile
    [INFO] |  |  |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |  |  |  +- (org.apache.cxf:cxf-rt-core:jar:2.5.1:compile - omitted for d
    uplicate)
    [INFO] |  |  |  \- (org.apache.cxf:cxf-rt-bindings-soap:jar:2.5.1:compile - omit
    ted for duplicate)
    [INFO] |  |  \- org.apache.cxf:cxf-rt-ws-addr:jar:2.5.1:compile
    [INFO] |  |     +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |  |     +- (org.apache.cxf:cxf-common-utilities:jar:2.5.1:compile - omit
    ted for duplicate)
    [INFO] |  |     \- (org.apache.cxf:cxf-rt-bindings-soap:jar:2.5.1:compile - omit
    ted for duplicate)
    [INFO] |  \- org.apache.cxf:cxf-rt-transports-http:jar:2.5.1:compile
    [INFO] |     +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for duplicat
    e)
    [INFO] |     +- org.apache.cxf:cxf-rt-transports-common:jar:2.5.1:compile
    [INFO] |     |  +- (org.apache.cxf:cxf-api:jar:2.5.1:compile - omitted for dupli
    cate)
    [INFO] |     |  \- (org.apache.cxf:cxf-rt-core:jar:2.5.1:compile - omitted for d
    uplicate)
    [INFO] |     +- (org.apache.cxf:cxf-rt-core:jar:2.5.1:compile - omitted for dupl
    icate)
    [INFO] |     \- org.springframework:spring-web:jar:3.0.6.RELEASE:compile
    [INFO] |        +- (aopalliance:aopalliance:jar:1.0:compile - omitted for duplic
    ate)
    [INFO] |        +- org.springframework:spring-beans:jar:3.0.6.RELEASE:compile
    [INFO] |        |  \- (org.springframework:spring-core:jar:3.0.6.RELEASE:compile
     - omitted for duplicate)
    [INFO] |        +- org.springframework:spring-context:jar:3.0.6.RELEASE:compile
    [INFO] |        |  +- org.springframework:spring-aop:jar:3.0.6.RELEASE:compile
    [INFO] |        |  |  +- (aopalliance:aopalliance:jar:1.0:compile - omitted for
    duplicate)
    [INFO] |        |  |  +- (org.springframework:spring-asm:jar:3.0.6.RELEASE:compi
    le - omitted for duplicate)
    [INFO] |        |  |  +- (org.springframework:spring-beans:jar:3.0.6.RELEASE:com
    pile - omitted for duplicate)
    [INFO] |        |  |  \- (org.springframework:spring-core:jar:3.0.6.RELEASE:comp
    ile - omitted for duplicate)
    [INFO] |        |  +- (org.springframework:spring-beans:jar:3.0.6.RELEASE:compil
    e - omitted for duplicate)
    [INFO] |        |  +- (org.springframework:spring-core:jar:3.0.6.RELEASE:compile
     - omitted for duplicate)
    [INFO] |        |  +- org.springframework:spring-expression:jar:3.0.6.RELEASE:co
    mpile
    [INFO] |        |  |  \- (org.springframework:spring-core:jar:3.0.6.RELEASE:comp
    ile - omitted for duplicate)
    [INFO] |        |  \- org.springframework:spring-asm:jar:3.0.6.RELEASE:compile
    [INFO] |        \- org.springframework:spring-core:jar:3.0.6.RELEASE:compile
    [INFO] |           +- (org.springframework:spring-asm:jar:3.0.6.RELEASE:compile
    - omitted for duplicate)
    [INFO] |           \- commons-logging:commons-logging:jar:1.1.1:compile
    [INFO] +- org.apache.commons:commons-io:jar:1.3.2:compile
    [INFO] +- com.googlecode.gwt.charts:gwt-charts:jar:0.9.5:compile
    [INFO] +- junit:junit:jar:4.10:test
    [INFO] |  \- org.hamcrest:hamcrest-core:jar:1.1:test
    [INFO] +- org.mockito:mockito-all:jar:1.9.5-rc1:test
    [INFO] +- org.jukito:jukito:jar:1.1:test
    [INFO] |  +- org.mockito:mockito-core:jar:1.8.5:test
    [INFO] |  |  +- (org.hamcrest:hamcrest-core:jar:1.1:test - omitted for duplicate
    )
    [INFO] |  |  \- org.objenesis:objenesis:jar:1.0:test
    [INFO] |  +- (junit:junit:jar:4.5:test - omitted for conflict with 4.10)
    [INFO] |  +- (com.google.inject:guice:jar:3.0:test - omitted for duplicate)
    [INFO] |  \- (com.google.inject.extensions:guice-assistedinject:jar:3.0:test - o
    mitted for duplicate)
    [INFO] +- org.seleniumhq.selenium:selenium-java:jar:2.22.0:test
    [INFO] |  +- org.seleniumhq.selenium:selenium-android-driver:jar:2.22.0:test
    [INFO] |  |  \- org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    [INFO] |  |     +- cglib:cglib-nodep:jar:2.1_3:test
    [INFO] |  |     +- (org.json:json:jar:20080701:test - omitted for conflict with
    20090211)
    [INFO] |  |     +- (org.seleniumhq.selenium:selenium-api:jar:2.22.0:test - omitt
    ed for duplicate)
    [INFO] |  |     +- (org.apache.httpcomponents:httpclient:jar:4.1.2:test - omitte
    d for duplicate)
    [INFO] |  |     +- (com.google.guava:guava:jar:12.0:test - omitted for conflict
    with 13.0-rc2)
    [INFO] |  |     +- (org.apache.commons:commons-exec:jar:1.1:test - omitted for d
    uplicate)
    [INFO] |  |     +- (net.java.dev.jna:jna:jar:3.4.0:test - omitted for duplicate)

    [INFO] |  |     \- (net.java.dev.jna:platform:jar:3.4.0:test - omitted for dupli
    cate)
    [INFO] |  +- org.seleniumhq.selenium:selenium-chrome-driver:jar:2.22.0:test
    [INFO] |  |  \- (org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    - omitted for duplicate)
    [INFO] |  +- org.seleniumhq.selenium:selenium-htmlunit-driver:jar:2.22.0:test
    [INFO] |  |  +- org.seleniumhq.selenium:selenium-api:jar:2.22.0:test
    [INFO] |  |  |  \- (com.google.guava:guava:jar:12.0:test - omitted for conflict
    with 13.0-rc2)
    [INFO] |  |  +- net.sourceforge.htmlunit:htmlunit:jar:2.9:test
    [INFO] |  |  |  +- xalan:xalan:jar:2.7.1:test
    [INFO] |  |  |  |  \- xalan:serializer:jar:2.7.1:test
    [INFO] |  |  |  |     \- (xml-apis:xml-apis:jar:1.3.04:test - omitted for duplic
    ate)
    [INFO] |  |  |  +- commons-collections:commons-collections:jar:3.2.1:test
    [INFO] |  |  |  +- commons-lang:commons-lang:jar:2.6:test
    [INFO] |  |  |  +- org.apache.httpcomponents:httpmime:jar:4.1.2:test
    [INFO] |  |  |  |  +- (org.apache.httpcomponents:httpcore:jar:4.1.2:test - omitt
    ed for duplicate)
    [INFO] |  |  |  |  \- (commons-logging:commons-logging:jar:1.1.1:test - omitted
    for duplicate)
    [INFO] |  |  |  +- commons-codec:commons-codec:jar:1.4:test
    [INFO] |  |  |  +- net.sourceforge.htmlunit:htmlunit-core-js:jar:2.9:test
    [INFO] |  |  |  +- xerces:xercesImpl:jar:2.9.1:test
    [INFO] |  |  |  |  \- xml-apis:xml-apis:jar:1.3.04:test
    [INFO] |  |  |  +- net.sourceforge.nekohtml:nekohtml:jar:1.9.15:test
    [INFO] |  |  |  +- net.sourceforge.cssparser:cssparser:jar:0.9.5:test
    [INFO] |  |  |  |  \- org.w3c.css:sac:jar:1.3:test
    [INFO] |  |  |  +- (commons-io:commons-io:jar:2.0.1:test - omitted for duplicate
    )
    [INFO] |  |  |  \- (commons-logging:commons-logging:jar:1.1.1:compile - scope up
    dated from test; omitted for duplicate)
    [INFO] |  |  \- org.apache.httpcomponents:httpclient:jar:4.1.2:test
    [INFO] |  |     +- org.apache.httpcomponents:httpcore:jar:4.1.2:test
    [INFO] |  |     \- (commons-logging:commons-logging:jar:1.1.1:compile - scope up
    dated from test; omitted for duplicate)
    [INFO] |  +- org.seleniumhq.selenium:selenium-firefox-driver:jar:2.22.0:test
    [INFO] |  |  +- (org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    - omitted for duplicate)
    [INFO] |  |  +- commons-io:commons-io:jar:2.0.1:test
    [INFO] |  |  \- org.apache.commons:commons-exec:jar:1.1:test
    [INFO] |  +- org.seleniumhq.selenium:selenium-ie-driver:jar:2.22.0:test
    [INFO] |  |  +- net.java.dev.jna:jna:jar:3.4.0:test
    [INFO] |  |  +- net.java.dev.jna:platform:jar:3.4.0:test
    [INFO] |  |  \- (org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    - omitted for duplicate)
    [INFO] |  +- org.seleniumhq.selenium:selenium-iphone-driver:jar:2.22.0:test
    [INFO] |  |  \- (org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    - omitted for duplicate)
    [INFO] |  +- org.seleniumhq.selenium:selenium-safari-driver:jar:2.22.0:test
    [INFO] |  |  +- (org.seleniumhq.selenium:selenium-remote-driver:jar:2.22.0:test
    - omitted for duplicate)
    [INFO] |  |  \- (org.webbitserver:webbit:jar:0.4.6:test - omitted for duplicate)

    [INFO] |  +- org.seleniumhq.selenium:selenium-support:jar:2.22.0:test
    [INFO] |  |  \- (org.seleniumhq.selenium:selenium-api:jar:2.22.0:test - omitted
    for duplicate)
    [INFO] |  \- org.webbitserver:webbit:jar:0.4.6:test
    [INFO] |     \- org.jboss.netty:netty:jar:3.2.7.Final:test
    [INFO] +- info.cukes:cucumber-java:jar:1.0.11:test
    [INFO] |  \- info.cukes:cucumber-core:jar:1.0.11:test
    [INFO] |     +- info.cukes:gherkin:jar:2.11.1:test
    [INFO] |     \- info.cukes:cucumber-html:jar:0.2.1:test
    [INFO] +- info.cukes:cucumber-guice:jar:1.0.11:test
    [INFO] |  \- (info.cukes:cucumber-java:jar:1.0.11:test - omitted for duplicate)
    [INFO] \- info.cukes:cucumber-junit:jar:1.0.11:test
    [INFO]    \- (info.cukes:cucumber-core:jar:1.0.11:test - omitted for duplicate)
    [INFO] ------------------------------------------------------------------------
    [INFO] BUILD SUCCESS
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 5.014s
    [INFO] Finished at: Tue Sep 11 09:08:32 CDT 2012
    [INFO] Final Memory: 13M/218M
    [INFO] ------------------------------------------------------------------------ 
```

RemoteR 应该是一个自主运行的 CXF SOAP Web 服务。我在这个项目中想要的只是“客户端”部分，它能够向其他地方托管的 Web 服务发出请求。因此，在我当前的项目中看到 spring 依赖项让我怀疑我可能在这里遇到了一些 JPA 冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:00:48.557

你在这里混合了很多概念，让我澄清一下......

首先 JPA 与 EJB - JPA 代表 Java 持久性体系结构 - 它是一种规范，是 Java EE 规范的一部分，描述了如何实现 ORM 并将你的东西存储在数据库中。在底层，它可以使用 hibernate、toplink 或任何其他 ORM 框架来实现。

现在 EJB - 代表 Enterprise Java Beans 是另一个解决业务逻辑并定义如何创建远程调用的代码的规范。从历史上看（在 EJB3 之前），ejb 的规范提到了 JPA 和 EJB，因此是混合的。但是现在分离很清楚了。

关于你的问题。

javax.persistence.EntityManager 是 JPA 的一个类，但整个 Criteria API 仅在 JPA 2.0 中添加所以您的第一个链接不包含它只是因为它描述了 JPA 1.0 规范

你该怎么办？答案像往常一样“取决于”:)

在理想的世界里，我会告诉你类似：“升级到 JPA 2.0 并使用 Criteria API”

从技术上讲，您应该更新 pom.xml 中的依赖版本（您说您的项目是 mavenized），您会没事的。

然而在实践中它并不那么容易：

*   Java EE 是由容器（又名应用服务器）实现的，因此您很有可能在 JBoss/Glassfish/WebShere 中运行您的项目，您可以命名它。通常每个版本的应用服务器都会在 Java EE 上实现特定的版本。

    JPA 1.0 是 Java EE 5.0 的一部分，而 JPA 2.0（使用您的标准 api）是 Java EE 6.0 的一部分

    因此，如果您真的想使用此标准 api，您应该确保应用程序服务器能够运行 Java EE 6。

*   我必须提到的另一个问题是，在底层，ORM 框架也在不断发展，所以如果你正在升级，你会得到更新版本的，比如说，hibernate。

    这可能会引入一些不一致的地方，尤其是在复杂的查询中。

所以选择权在你。

免责声明：我没有使用 guice-persist，所以我的答案针对的是在 Java EE 容器中运行的应用程序。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:01:01.460

您可以通过以下方式查看您拥有的依赖项，包括传递依赖项

`mvn dependency:tree`

但是我会假设这个 jar 来自您的应用程序服务器。jOnAS 是偶然的吗？

这是一个实现 JPA 的依赖 Hibernate 的示例

```
 <properties>        
            <hibernate.version>4.1.4-Final</hibernate.version>
    </properties>
    ......
    ......
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>         
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>         
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>${hibernate.version}</version>         
    </dependency> 
```

# asp.net - 在 monodevelop 中使用 AJAX

> ID：12371220
> 
> 赞同：0
> 
> 时间：2012-09-11T13:47:32.623
> 
> 标签：asp.net, .net, ajax, mono

因此，我一直在网上广泛搜索如何在单声道 ASP 中使用 AJAX 工具包。到目前为止，我收集到的是您需要将 System.Web.Extensions 添加到您的引用中。但是由于某些奇怪的原因，我不能在我的 WebForms 站点中使用它，所以它 `<asp:ScriptManager>`根本不存在，所以有人可以告诉我我错过了什么吗？我正在使用单声道版本 3.0.4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:11:26.720

如果您喜欢结合 ajax 调用和回调，则需要 System.Web.Extensions。但是如果您使用 jQuery 而不是 ajax 工具包，则不需要它。

而monodevelop仅用于编辑aspx或js文件并运行xsp进行测试。

XSP 将正常响应 jquery 调用

# asp.net-mvc - Web API - 架构

> ID：12371227
> 
> 赞同：3
> 
> 时间：2012-09-11T13:47:51.343
> 
> 标签：asp.net-mvc, architecture, asp.net-web-api

在过去的几年里，我看到了许多 Web API 的兴起——服务通过普通的 HTTP 而不是通过更正式的服务合同（如 SOAP 或 WS*）公开。Microsoft 刚刚推出了一个名为“ASP.NET Web API”的新框架，它可以轻松构建覆盖广泛客户端的 HTTP 服务。Event 如果我是 .net 粉丝，它是另一个通信框架（在 asmx、wcf、ria 之后）。现在，作为一名快乐的架构师，我必须对技术做出决定。

Asp.net Web Api 真的是新架构的好选择吗？请记住 Linq2Sql，我不想投资“一次性”api。

WCF 中的 WebBindings 还有用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:10:13.393

就堆栈溢出问题而言，这个问题的问题在于它基本上是主观的。结果，我很确定它会被关闭 - 但无论如何我都会坚持我的 2 便士（实际上更像是 2 英镑），如果它被关闭，那就这样吧。

首先 Linq2Sql 不是“一次性的”——它仍然存在并且不会消失。它没有被*开发*——这完全是另一回事。

无论如何 - Asp.Net Web API 是 REST Web 服务支持的一种形式化形式，由在 Asp.Net MVC 上工作的同一团队的许多人提供，并使用非常相似的方法来处理可扩展性、流水线、横切关注点（例如身份验证、日志记录、验证）等。是否使用它完全取决于您是否打算开发 RESTful Web 服务。如果您是，并且您在.Net 4+ 上，那么在我看来，您会生气不这样做。

Web API 的整体架构非常好，您可以毫不费力地扩展其中的大部分内容。特别是，他们处理内容协商的方式非常好，例如，支持 JSON 请求但仅仅因为客户端发送`Content-Type:application/json`和返回 XML 响应就变得微不足道了`Accepts:application/xml`。

作为一种服务器技术，它也非常非常快；部分原因是它完全是异步的（增加了可扩展性），还因为从请求进入到您的代码被调用之间的堆栈非常浅。

不仅如此，您还可以在 IIS 和任何 .Net 应用程序中托管它 - 这增加了您的托管选项，但也使其成为公共网络（即非互联网）环境中网络内通信的候选者。

但是，如果您想编写 SOAP 或 WS-HTTP 服务，那么，不，Web API 不适合您——您会坚持使用 WCF。

简而言之 - 您需要将 Asp.Net Web API 纯粹视为在 .Net 上运行的服务器和客户端技术，而不是协议或 Web 架构。它使您能够构建 RESTful Web 服务——您也可以在 MVC、WebForms（如果您真的想要的话）、.ashx 处理程序中或者通过编写您自己的 HttpListener 来实现。

您选择哪一个完全由您决定。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T14:03:32.910

我们可以将 ASP.NET Web API 称为 WCF Web API 的替代者。它将支持更多面向平台的服务。

# select - Selenium WebDriver - 隐藏的选择和锚点

> ID：12371228
> 
> 赞同：2
> 
> 时间：2012-09-11T13:47:51.990
> 
> 标签：select, drop-down-menu, selenium, webdriver, options

> **可能重复：**
> [Selenium WebDriver - 从隐藏选择中获取选项](https://stackoverflow.com/questions/12345403/selenium-webdriver-get-options-from-hidden-select)

我在选择一页时遇到了很大的问题。

代码：

```
<select name="fw3k_ad_input_et_type_group" class="" 
            id="_id_fw3k_ad_input_et_type_group" 
            onchange=" eurotax.change_type_group( this.value ); " 
            style="display: none; ">

        <option value="0"> --- odaberite tip --- </option>
        <option value="-1" class="special">> nema mog tipa  </option>
        <option value="16390">CD</option>
        <option value="17605">S</option>
        <option value="17636">SE</option>

</select>
<a href="" class="fs_item" id="fs_item_0" style=""> --- odaberite tip --- </a> 
```

查看：http:

[//imageshack.us/f/7/screenshotfrom201209111.png/](http://imageshack.us/f/7/screenshotfrom201209111.png/)

Select 是隐藏的，并且 href="" 是可见部分，它会根据所选选项更改其文本。

我真的不知道如何管理。我可以使用 JavascriptExecutor 获取所有选项，并且可以使用 a.click() 查看下拉框，但我不知道如何单击某个选项。

我曾尝试使用 Select 类和 .getOptions() 方法，但它不适用于隐藏选择，我无法更改 href="" 文本。

:(

请帮我举个例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:07:41.007

对这个问题有点困惑，但你试过了吗

```
WebElement element = driver.findElement(By.id("fw3k_ad_input_et_type_group"));
Select select = new Select(element); 
```

然后使用

```
select.selectByValue(value);
select.selectByVisibleText(text);
select.selectByIndex(index); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T16:17:49.433

**第一种方式：** 使用相同的js点击任何元素都不是问题。如您所知，如何获得任何选项，最后的操作是执行单击。这应该适合你：

```
WebElement hiddenWebElement =driver.findElement(By(..selector of the element....));
        ((JavascriptExecutor)driver).executeScript("arguments[0].click()",hiddenWebElement); 
```

**第二种方式**：

```
String cssSelector= ...//i gave them in your previous question
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssSelector+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString()); 
```

**第三种方式：** 使用操作生成器，高级用户操作 API。[你可以在这里](http://code.google.com/p/selenium/wiki/AdvancedUserInteractions)阅读它 并且代码将是这样的：

```
WebElement mnuElement;
WebElement submnuElement;
mnEle = driver.findElement(By.Id("mnEle")).click();
sbEle = driver.findElement(By.Id("sbEle")).click();

Actions builder = new Actions(driver);
// Move cursor to the Main Menu Element
builder.moveToElement(mnEle).Perform();
// Giving 5 Secs for submenu to be displayed
Thread.sleep(5000L);
// Clicking on the Hidden SubMenu
driver.findElement(By.Id("sbEle")).click(); 
```

您还可以[在这里](http://www.anitpatel.net/2012/02/25/selenium-webdriver-how-to-click-on-a-hidden-link-or-menu/)获取一些其他信息 希望这对您有所帮助）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:59:05.443

```
driver.findElement(By.name("_id_fw3k_ad_input_et_type_group")).sendKeys("16390"); 
```

worked for me for something very similar.

# eclipse - 如何配置 maven 或 eclipse 以便在版本中使用 RELEASE 常量？

> ID：12371231
> 
> 赞同：2
> 
> 时间：2012-09-11T13:47:59.330
> 
> 标签：eclipse, maven, m2e

我们所有的项目都是使用 maven 构建的。我们将一些主要配置集中在一个超级 pom 中。

为了始终拥有这个超级 pom 的更新版本（无需修改版本），我们使用了以下语法：

```
<parent>
    <groupId>my.organization</groupId>
    <artifactId>superPom</artifactId>
    <version>RELEASE</version>
</parent> 
```

问题是 Maven Eclipse 插件 (m2e) 不理解此语法（未解析 RELEASE 常量）。所以，我们的 Eclipse 用户不能使用内置编译。

你有什么建议来克服这个问题？

顺便说一句，我们从 maven 的角度尝试了几个选项（[尤其是这里描述的那些](https://stackoverflow.com/questions/30571/how-do-i-tell-maven-to-use-the-latest-version-of-a-dependency)），但是 version.RELEASE 对每个人来说都是最简单的（除了那些使用 Eclipse 的人）。

编辑：我们的项目源在多个 SVN 存储库中拆分。这个超级 pom 是一个独立的项目。它是通过我们的 Nexus 服务器检索的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:03:02.130

你正试图走向错误的方向。maven 中的[发布是一个特定版本，如 1.0.0](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)，它表明您已定义该工件的状态。在您的情况下，您的超级 pom 具有特定的状态。如果您尝试将版本定义为“RELEASE”，您是在说我的版本始终相同，但实际上并非如此。

通常这样的超级 pom 会随着时间的推移而改变，比如说今天你已经在其中定义了一些特定的依赖版本（dependencyManagemet）。明天你改变那些定义。现在 1.000.000 美元的问题是在今天完成的构建中使用了超级 pom 的哪个状态？好的，在那个简单的场景中，您可以回答问题，但如果您昨天某个时候更改了超级 pom，您将无法准确回答问题。

此外，如果您尝试重新创建比方说上周的工件，您无法说出在那个特定时间使用了超级 pom 的哪个确切状态，因为您没有让您有机会看到它的指示器。

这就是您需要 1.0.0 或 1.1.0 等真实版本的原因。

我强烈建议使用真实版本，如 1.0.0 等，但不要使用诸如“RELEASE”之类的东西，它会在 Maven 系统中使用其相关组、工件和版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:32:40.830

版本范围和扩展确实[不适用于父工件](http://jira.codehaus.org/browse/MNG-2199)。

有人建议调用版本插件：

```
mvn versions:update-parent 
```

这不能完全满足您的需求，但恐怕没有更好的解决方法。其他想法：使用 SNAPSHOT 父 pom（我承认不是很满意）。另请参阅[Maven2 cannot find parent from relative path](https://stackoverflow.com/questions/2389602/maven2-cannot-find-parent-from-relative-path)。

# ios - apprequests 对话框未显示好友列表

> ID：12371235
> 
> 赞同：1
> 
> 时间：2012-09-11T13:48:14.030
> 
> 标签：ios, facebook-graph-api

[关于 Facebook 文档http://developers.facebook.com/blog/post/2012/04/26/android-and-ios--discovery-via-requests-best-practices/](http://developers.facebook.com/blog/post/2012/04/26/android-and-ios--discovery-via-requests-best-practices/)中描述的原生 iOS 应用程序代码，非常有趣使用已弃用的应用程序请求对话框

```
 NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"Check out this awesome app.",  @"message",
                                   nil];
    [self.facebook dialog:@"apprequests"
                andParams:params
              andDelegate:self]; 
```

它显示对话框但没有任何朋友。我在 stackoverfloww 看到了很多与此代码有关的问题，但与过滤器参数有关。但实际上我根本没有使用过滤器。它不想显示朋友列表。可能与SDK API更改有关吗？因为几个月前它运行良好。

# tsql - 如果已附加数据库，如何使用 Transact-SQL 和 SQL Server 2008 R2 进行测试？

> ID：12371240
> 
> 赞同：0
> 
> 时间：2012-09-11T13:48:19.270
> 
> 标签：tsql, sql-server-2008-r2

> **可能重复：**
> [如何检查 SQL Server 中是否存在数据库？](https://stackoverflow.com/questions/679000/how-to-check-if-a-database-exists-in-sql-server)

我正在使用 Transact-SQL 使用以下代码附加 SQL Server 2008 R2 数据库，但我只想在尚未附加数据库的情况下执行此操作，因为尝试附加已附加的数据库会返回错误。

有没有办法使用 Transact-SQL 来测试数据库是否已经附加？

```
USE [MASTER]
GO
#I'd like to test here if database is already attached
CREATE DATABASE ASPNETDB
    ON (FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\Data\ASPNETDB.MDF')
FOR ATTACH ;
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:53:28.800

```
IF NOT EXISTS(SELECT * FROM SYS.DATABASES WHERE NAME = 'ASPNETDB')
    CREATE DATABASE... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:55:01.867

像这样的东西：

```
IF NOT EXISTS(SELECT * FROM sys.databases WHERE name = N'ASPNETDB')
BEGIN
  CREATE DATABASE ASPNETDB
    ON (FILENAME = 'C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\Data\ASPNETDB.MDF')
  FOR ATTACH ;
END 
```

# php - 将两个日期传递给 PHP 函数

> ID：12371241
> 
> 赞同：0
> 
> 时间：2012-09-11T13:48:21.033
> 
> 标签：php

当我将赛季结束日期作为变量传递给此函数时，我收到此错误：警告：除以零

```
function win_percentage($season_start, $season_end)
{
    $wins = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Won' AND gamedate >= $season_start AND gamedate <= $season_end;");
    $losses = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Lost' AND gamedate >= $season_start AND gamedate <= $season_end;");
    $winstotal = mysql_fetch_array($wins);
    $lossestotal = mysql_fetch_array($losses);
    $resultgames = $winstotal['COUNT(result)'] + $lossestotal['COUNT(result)'];
    $winratio = ROUND(($winstotal['COUNT(result)'] / $resultgames),2) * 100;
    return $winratio;
}
echo win_percentage('2012-01-01', '2012-09-10') 
```

输出：警告：除以零

但是，当我将季节结束的日期值直接放在函数中时，它可以完美运行。这些与代码块之间的唯一区别是第 3 行和第 4 行的结尾，其他一切都相同。为什么我不能在不抛出错误的情况下将 season_end 传递给该函数？

```
function win_percentage($season_start, $season_end)
{
    $wins = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Won' AND gamedate >= $season_start AND gamedate <= '2012-12-31';");
    $losses = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Lost' AND gamedate >= $season_start AND gamedate <= '2012-12-31';");
    $winstotal = mysql_fetch_array($wins);
    $lossestotal = mysql_fetch_array($losses);
    $resultgames = $winstotal['COUNT(result)'] + $lossestotal['COUNT(result)'];
    $winratio = ROUND(($winstotal['COUNT(result)'] / $resultgames),2) * 100;
    return $winratio;
}
echo win_percentage('2012-01-01', '2012-09-10') 
```

输出：57%

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:49:33.263

您需要将日期放在引号中：

```
$wins = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Won' AND gamedate >= $season_start AND gamedate <= '$season_end';");
$losses = mysql_query("SELECT COUNT(result) FROM scorecards WHERE result = 'Lost' AND gamedate >= $season_start AND gamedate <= '$season_end';"); 
```

如果您开始使用 mysqli 或 PDO 并使用它们的绑定参数，这种事情会容易得多 - 它会为您处理所有引用，并避免 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:52:52.000

在查询中使用日期值时，您应该`'`在日期值之前和之后放置它们：`AND gamedate >= '$season_start' AND gamedate <= '$season_end'`

您还应该使用[`mysqli`](http://php.net/manual/en/book.mysqli.php).

您还应该避免将日期作为字符串保存在数据库中。

# asp.net - 在asp.net中缓存方法输出的方法

> ID：12371245
> 
> 赞同：1
> 
> 时间：2012-09-11T13:48:32.390
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, caching

有一个很棒的属性 OutputCache

```
[OutputCache(Duration = 60*60 )]
public ActionResult Index() 
```

它工作正常，但只有在方法是控制器的 Action Method 的情况下（原因在于调用 actionMethod 的代码中）。

我想存储其他一些控制器方法的输出（例如，代码对数据库执行一些查询并返回一个集合）

有没有像 OutputCacheAttribute 这样的机制？Оr 我应该编写自己的缓存代码吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:53:04.517

您可以使用[ASP.NET 缓存](http://msdn.microsoft.com/en-us/library/system.web.caching.cache.aspx)来存储这样的数据。我建议不要使用您自己的缓存模型，因为您需要在线程安全、陈旧缓存、内存管理等问题上重新发明轮子。另请参阅这篇文章：[asp.net-mvc 中的缓存](https://stackoverflow.com/questions/385986/caching-in-asp-net-mvc)

# ios - 在 iTunes 上重新提交应用程序需要更改发布日期吗？

> ID：12371246
> 
> 赞同：0
> 
> 时间：2012-09-11T13:48:33.847
> 
> 标签：ios, app-store, app-store-connect

第一次被拒绝后，我正在将新的二进制文件上传到 iTunes。我需要再次更新发布日期吗？如果我没有更新发布日期，我的应用会被拒绝吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:50:03.933

不，发布日期与应用提交/拒绝过程无关。就在它向公众发布的时候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:50:30.733

不，如果您将其设置为在批准后自动进入应用商店，您就可以了。如果您将其设置为手动，则必须返回并将其翻转到应用商店中。

# magento - 将我的 Web 应用程序与 Magento 集成

> ID：12371247
> 
> 赞同：0
> 
> 时间：2012-09-11T13:48:46.383
> 
> 标签：magento, e-commerce, magento-1.7

我用 PHP、Ajax、HTML5 创建了一个 Web 应用程序。它已准备就绪并且可以完美运行。现在我想将它与 magento 集成。在应用程序中，当用户单击立即购买时，图像会保存在服务器上的文件夹中。

我刚开始使用magento。我认为有两种方法可以实现该功能，

1.  将用户从 magento 产品页面导航到我的应用程序页面，当用户单击我页面上的立即购买按钮时，它将成为后端的添加到购物车功能。我将发送随机生成的图像名称并将其附加到管理员可以看到的产品评论中。

2.  使我的应用程序成为一个 magento 自定义插件。在 magento 中添加我的 HTML、css、js、php 文件，并将我的应用程序用作内部 magento 应用程序。

所以，我需要建议、评论、想法或任何可以帮助我的东西。

因为我刚开始使用 magento，我对电子商务没有任何经验。所以，我的问题可能会在经验中显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:44:12.617

尝试学习[Magento API](http://www.magentocommerce.com/api/soap/introduction.html) ，它可以与您的所有应用程序集成。

# listview - WinJS - 项目更新时禁用 ListView 动画

> ID：12371248
> 
> 赞同：0
> 
> 时间：2012-09-11T13:48:46.727
> 
> 标签：listview, microsoft-metro, winjs

我正在研究每 2 分钟刷新一次的 ListView。列表视图使用多个模板（使用自定义 itemTemplate 函数分配）

由于我在列表视图中有多个模板，我不能简单地使用 dataSource.change 函数更新数据。我必须重置数据源，以便根据最新数据它应该能够再次选择正确的模板。

但是，当我重新分配 dataSource 时，会出现令人分心的闪烁动画。我想摆脱那个动画。

```
var listView = element.querySelector('.my-list-view').winControl;
var list = new WinJS.Binding.List(data);
listView.itemTemplate = function (itemPromise) {
    return itemPromise.then(function (item) {
        var container = document.createElement("div");
        var itemTemplate;
        switch (item.data.status) {
            case "Final":
                itemTemplate = element.querySelector(".final-template");
                break;

            case "NotFinal":
                itemTemplate = element.querySelector(".not-final-template");
                break;
        }

        itemTemplate.winControl.render(item.data, container);
        container.style.height = '120px';
        container.style.width = '380px';
        return container;
    });
};
listView.itemDataSource = list.dataSource;
listView.addEventListener("contentanimating", function (e) { e.preventDefault() }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:53:38.963

为什么一定要重置数据？如果您使用多个模板，则在需要渲染项目时调用 itemTemplate 渲染函数 - 如果您更改了项目并导致在基础数据集中添加或替换它，则列表视图可以对这可以调用您的项目模板。**这比要求列表视图再次呈现所有**数据的性能要高得多——尤其是在 ARM 等低端设备上。

有关 itemTemplate 渲染函数的详细信息，请参阅[此处](http://msdn.microsoft.com/en-us/library/windows/apps/br212598.aspx)的“使用模板或渲染函数显示项目”部分。

但是，如果这仍然对您不起作用，您可以通过处理“contentanimating”事件来禁用列表视图中的动画，并`preventDefault()`在事件对象引发时调用它。例如

```
var myListview = /* get listview control some how */
myListView.addEventListener("contentanimating", function(e) { e.preventDefault() }); 
```

如果您的代码比 listview 实例的寿命更长，请记住分离侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-04T22:52:46.783

您可以随时使用禁用动画，`WinJS.UI.disableAnimations();`然后在重置完成后再次启用它们，在`ListView` `LoadingState`.

# sql - 在 where 子句中使用 case 语句创建查询

> ID：12371249
> 
> 赞同：3
> 
> 时间：2012-09-11T13:48:48.723
> 
> 标签：sql, tsql

我有一个为报告提取数据的大型存储过程。我试图`WHERE`根据某些标准在子句中使用两个不同的值之一。我不知道如何使用`CASE`语句来完成这项工作，我不断收到`THEN`部分错误。以下是我正在尝试做的事情，它是较大存储过程的一小部分。所以我正在寻找的是`dlp(DATETIME)`比`dlc(DATETIME)`我想用and参数`dlp`评估的地方更新，如果没有，那么用and评估。`@AgeStart``@AgeEnd``dlc``@AgeStart``@AgeEnd`

```
@AgeStart INT
@AgeEnd INT

SET @Recovery = (
SELECT SUM(ISNULL(M.Paid1, 0))
FROM Master AS M
WHERE M.Status IN ('xxx','yyy')
  AND CASE
    WHEN COALESCE(M.dlp, '2000-01-01 00:00:00') > 
         COALESCE(M.dlc, '2000-01-01 00:00:00') 
    THEN DATEDIFF(dd,M.Received,M.dlp) 
      >= @AgeStart AND DATEDIFF(dd,M.Received,M.dlp) <= @AgeEnd
    ELSE DATEDIFF(dd, M.dlc, M.Received) 
      >= @AgeStart AND DATEDIFF(dd, M.dlc, M.Received) <= @AgeEnd
  END
  AND M.Balance >= @OrigBalanceMin AND M.Balance <= @OrigBalanceMax
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:54:01.860

您不需要 case 语句，您可以将它们嵌套在括号中并使用`OR`条件。我*想*我把所有的括号都排好了：

```
WHERE M.Status IN ('xxx','yyy')
    AND 
    /* Your updated case statement starts here */
    (
        (
            COALESCE(M.dlp, '2000-01-01 00:00:00') > 
                COALESCE(M.dlc, '2000-01-01 00:00:00') AND 
            DATEDIFF(dd,M.Received,M.dlp) >= @AgeStart AND 
                DATEDIFF(dd,M.Received,M.dlp) <= @AgeEnd
        ) OR (
            COALESCE(M.dlp, '2000-01-01 00:00:00') <= 
                COALESCE(M.dlc, '2000-01-01 00:00:00') AND 
            DATEDIFF(dd, M.dlc, M.Received) >= @AgeStart AND 
                DATEDIFF(dd, M.dlc, M.Received) <= @AgeEnd
        )
    )
    /* Your updated case statement ends here */
    AND M.Balance >= @OrigBalanceMin AND M.Balance <= @OrigBalanceMax
) 
```

# c# - 如何将变量作为 CommandParameter 传递

> ID：12371253
> 
> 赞同：10
> 
> 时间：2012-09-11T13:49:03.957
> 
> 标签：c#, wpf, mvvm, command, commandparameter

我正在尝试将 ViewModel 中的变量作为参数发送到命令。该命令如下所示：

```
public class EditPersonCommand : ICommand
{
  private bool _CanExecute = false;

  public bool CanExecute(object parameter)
  {
     PersonModel p = parameter as PersonModel;
     CanExecuteProperty = (p != null) && (p.Age > 0);
     return CanExecuteProperty;
  }

  public event EventHandler CanExecuteChanged;

  public void Execute(object parameter) { }

  private bool CanExecuteProperty
  {
     get { return _CanExecute; }
     set
     {
        if (_CanExecute != value)
        {
           _CanExecute = value;
           EventHandler can_execute = CanExecuteChanged;
           if (can_execute != null)
           {
              can_execute.Invoke(this, EventArgs.Empty);
           }
        }
     }
  }
} 
```

ViewModel 看起来像这样：

```
public class PersonViewModel : ViewModelBase
{
  private PersonModel _PersonModel;
  private EditPersonCommand _EditPersonCommand;

  ///<remarks>
  /// must use the parameterless constructor to satisfy <Window.Resources>
  ///</remarks>
  public PersonViewModel()
     : this(new PersonModel())
  {

  }

  public PersonViewModel(PersonModel personModel)
  {
     _PersonModel = personModel;
  }

  public ICommand EditPersonCommand
  {
     get
     {
        if (_EditPersonCommand == null)
        {
           _EditPersonCommand = new EditPersonCommand();
        }
        return _EditPersonCommand;
     }
  }
} 
```

xaml 看起来像这样：

```
<Button Content="Edit" HorizontalAlignment="Right" Height="20" Width="80"
   Command="{Binding EditPersonCommand}" 
   CommandParameter="{Binding _PersonModel}" /> 
```

我尝试在 ViewModel 中创建一个属性，而不是使用私有局部变量名称，但这也不起作用。`object parameter`始终显示`null`在调用中，并且该`CanExecute`按钮从不启用。如果我将`CommandParameter`值更改为`Hello`，那么我会收到`Hello`对 的调用`CanExecute`，所以我不确定为什么该变量不起作用。任何帮助，将不胜感激。

**更新：** 我也尝试过为模型创建一个公共属性（我真的不想公开模型，但只是尝试看看它是否有效，但它没有）。

```
// Added this to the ViewModel
public PersonModel PersonModelProp
{
  get
  {
     return _PersonModel;
  }
  set
  {
     _PersonModel = value;
     OnPropertyChanged("PersonModelProp");
  }
} 
```

并将 xaml 更改为：

```
<Button Content="Edit" HorizontalAlignment="Right" Height="20"  Width="80"
   Command="{Binding EditPersonCommand}" 
   CommandParameter="{Binding PersonModelProp}" /> 
```

但仍然没有运气。ViewModel 确实实现了`INotifyPropertyChanged`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T14:21:47.173

CommandParameter 是否始终为空，或者您仅在第一次执行时检查它？

在这种情况下，您声明属性的顺序似乎很重要，因为设置 Command 属性会导致 CanExecute 在设置 CommandParameter 之前立即触发。

尝试将 CommandParameter 属性移到 Command 属性之前：

```
<Button Content="Edit" HorizontalAlignment="Right" Height="20"  Width="80"
 CommandParameter="{Binding PersonModelProp}" 
 Command="{Binding EditPersonCommand}" /> 
```

另外，请参见[此处](https://stackoverflow.com/a/336258/684831)和[此处](https://stackoverflow.com/a/4047384/684831)。

**编辑**

为确保您的事件被正确引发，您应该在`PersonModelProp`值更改时引发 CanExecuteChanged 事件。

命令：

```
public class EditPersonCommand : ICommand
{
  public bool CanExecute(object parameter)
  {
     PersonModel p = parameter as PersonModel;
     return p != null && p.Age > 0;
  }

  public event EventHandler CanExecuteChanged;

  public void Execute(object parameter) 
  {
      //command implementation
  }

  public void RaiseCanExecuteChanged()
  {
      var handler = CanExecuteChanged;
      if(handler != null)
      {
          handler(this, EventArgs.Empty);
      }
  }
} 
```

和视图模型：

```
public class PersonViewModel : ViewModelBase
{
  private PersonModel _PersonModel;
  private EditPersonCommand _EditPersonCommand;

  ///<remarks>
  /// must use the parameterless constructor to satisfy <Window.Resources>
  ///</remarks>
  public PersonViewModel()
     : this(new PersonModel())
  {
      _EditPersonCommand = new EditPersonCommand();
  }

  public PersonViewModel(PersonModel personModel)
  {
     _PersonModel = personModel;
  }

  public ICommand EditPersonCommand
  {
     get
     {
         return _EditPersonCommand;
     }
  }

  public PersonModel PersonModelProp
  {
      get
      {
         return _PersonModel;
      }
      set
      {
         _PersonModel = value;
         OnPropertyChanged("PersonModelProp");
         EditPersonCommand.RaiseCanExecuteChanged();
      }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T14:22:48.757

回答两点：

首先，正如@akton 提到的，您只能绑定到*public properties*。不过，它**不一定**是**DependencyProperty**。

其次，我花了一些时间才弄清楚，您必须在**Command**属性*之前设置***CommandParameter的绑定。** IE

 ***```
<Button Content="Edit" HorizontalAlignment="Right" Height="20"  Width="80"
        CommandParameter="{Binding PersonModelProp}"
        Command="{Binding EditPersonCommand}" /> 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T13:51:49.650

`_PersonModel`是私有的，因此无法访问。创建一个公开它的公共属性并绑定到`CommandParameter`. 请记住使该属性成为依赖属性（技术上不是必需的，但它有帮助）并且 ViewModel 应该实现 INotifyProperty changed 并触发 PropertyChanged 事件以便更新绑定。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-11T14:46:43.947

我认为你的 EditPersonCommand 有问题（它没有被触发）。我用 relayCommand 检查它并且它工作！

这是代码：

视图模型：

```
 public class PersonViewModel : ViewModelBase
    {
        private PersonModel _PersonModel;
        private ICommand _EditPersonCommand;

        ///<remarks>
        /// must use the parameterless constructor to satisfy <Window.Resources>
        ///</remarks>
        public PersonViewModel()
            : this(new PersonModel())
        {

        }

        public PersonViewModel(PersonModel personModel)
        {
            PersonModelProp = personModel;
        }

        public ICommand EditPersonCommand
        {
            get
            {
                if (_EditPersonCommand == null)
                {
                    _EditPersonCommand = new RelayCommand(ExecuteEditPerson,CanExecuteEditPerson);
                }
                return _EditPersonCommand;
            }
        }

        private bool CanExecuteEditPerson(object parameter)
        {
            PersonModel p = parameter as PersonModel;

            return (p != null) && (p.Age > 0);
        }

        private void ExecuteEditPerson(object o)
        {

        }

        public PersonModel PersonModelProp
        {
            get
            {
                return _PersonModel;
            }
            set
            {
                _PersonModel = value;
                NotifyPropertyChanged("PersonModelProp");
            }
        }

    } 
```

还有这个 RelayCommand（火灾事件好！）

```
 public class RelayCommand : ICommand
        {
            #region Constants and Fields

            private readonly Predicate<object> canExecute;

            private readonly Action<object> execute;

            #endregion

            #region Constructors and Destructors

            public RelayCommand(Action<object> execute)
                : this(execute, null)
            {
            }

            public RelayCommand(Action<object> execute, Predicate<object> canExecute)
            {
                if (execute == null)
                {
                    throw new ArgumentNullException("execute");
                }

                this.execute = execute;
                this.canExecute = canExecute;
            }

            #endregion

            #region Events

            public event EventHandler CanExecuteChanged
            {
                add
                {
                    CommandManager.RequerySuggested += value;
                }

                remove
                {
                    CommandManager.RequerySuggested -= value;
                }
            }

            #endregion

            #region Implemented Interfaces

            #region ICommand

            [DebuggerStepThrough]
            public bool CanExecute(object parameter)
            {
                return this.canExecute == null || this.canExecute(parameter);
            }

            public void Execute(object parameter)
            {
                this.execute(parameter);
            }

            #endregion

            #endregion
        } 
```

圣诞节：

```
<Button Content="Edit" HorizontalAlignment="Right" Height="20"  Width="80"
 CommandParameter="{Binding PersonModelProp}" 
 Command="{Binding EditPersonCommand}" /> 
```***

# python - 为什么在 Python Flask 中使用类与装饰器？

> ID：12371256
> 
> 赞同：3
> 
> 时间：2012-09-11T13:49:17.193
> 
> 标签：python, class, decorator, flask, tornado

在 Flask 中，您可以将类和装饰器用于路由。每个用例的优势是什么？

我正在考虑静态页面的装饰器和更多动态页面的类。如果我要将龙卷风/独角兽与烧瓶结合起来，这是更好的方法。

我打算使用异步方法，以此为例作为起点： [同时使用 Flask 和 Tornado？](https://stackoverflow.com/questions/8143141/using-flask-and-tornado-together)

这篇文章指出它可能依赖于框架，但在烧瓶中我们可以同时使用两者。
[python web开发中的装饰器与类](https://stackoverflow.com/questions/2985014/decorators-vs-classes-in-python-web-development)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:18:40.840

这些是我个人的经验法则。

1.  如果我必须从现有应用程序移植，我使用源应用程序中使用的约定。拥有两种可能的路由样式是一大优势。
2.  如果应用程序对相同的代码使用不同的 URL，我会在 URL 和处理程序类之间创建一个显式映射。
3.  如果应用程序中使用的 URL 和类的数量很少，我将使用装饰器。
4.  如果应用程序很复杂，具有复杂的 URL，我会在 URL 和处理程序类之间创建一个映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-23T03:57:27.800

从下面的 MVP 代码中可以看出，当我将实现许​​多 REST API 动词时，我通常发现我喜欢基于类的路由，很可能围绕数据库表等资源。这在使用其他装饰器时也有利于清晰，并且您还可以选择哪个动词可能具有某个装饰器。

或者，我将使用装饰方法来实现为静态页面返回 html 的路由，我只需要 GET 动词。

```
from flask import Flask
from flask_restful import Api, Resource, reqparse, abort, fields, marshal_with
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
api = Api(app)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///database.db'
db = SQLAlchemy(app)

class VideoModel(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(100), nullable=False)
    views = db.Column(db.Integer, nullable=False)
    likes = db.Column(db.Integer, nullable=False)

    def __repr__(self):
        return f"Video(name = {name}, views = {views}, likes = {likes})"

video_put_args = reqparse.RequestParser()
video_put_args.add_argument("name", type=str, help="Name of the video is required", required=True)
video_put_args.add_argument("views", type=int, help="Views of the video", required=True)
video_put_args.add_argument("likes", type=int, help="Likes on the video", required=True)

video_update_args = reqparse.RequestParser()
video_update_args.add_argument("name", type=str, help="Name of the video is required")
video_update_args.add_argument("views", type=int, help="Views of the video")
video_update_args.add_argument("likes", type=int, help="Likes on the video")

resource_fields = {
    'id': fields.Integer,
    'name': fields.String,
    'views': fields.Integer,
    'likes': fields.Integer
}

class Video(Resource):
    @marshal_with(resource_fields)
    def get(self, video_id):
        result = VideoModel.query.filter_by(id=video_id).first()
        if not result:
            abort(404, message="Could not find video with that id")
        return result

    @marshal_with(resource_fields)
    def put(self, video_id):
        args = video_put_args.parse_args()
        result = VideoModel.query.filter_by(id=video_id).first()
        if result:
            abort(409, message="Video id taken...")

        video = VideoModel(id=video_id, name=args['name'], views=args['views'], likes=args['likes'])
        db.session.add(video)
        db.session.commit()
        return video, 201

    @marshal_with(resource_fields)
    def patch(self, video_id):
        args = video_update_args.parse_args()
        result = VideoModel.query.filter_by(id=video_id).first()
        if not result:
            abort(404, message="Video doesn't exist, cannot update")

        if args['name']:
            result.name = args['name']
        if args['views']:
            result.views = args['views']
        if args['likes']:
            result.likes = args['likes']

        db.session.commit()

        return result

    def delete(self, video_id):
        abort_if_video_id_doesnt_exist(video_id)
        del videos[video_id]
        return '', 204

api.add_resource(Video, "/video/<int:video_id>")

if __name__ == "__main__":
    app.run(debug=True) 
```

# mysql - 使用行值动态命名mysql变量

> ID：12371258
> 
> 赞同：0
> 
> 时间：2012-09-11T13:49:19.260
> 
> 标签：mysql, variables, select

我有一个带有单词的 varchar 列。我想动态创建@variables 并使用列中的值命名每个变量以保持每个单词的计数。

```
//Define all variables in PHP dynamically
@word1:=0, @word2:=0;

//Select and count how many times each word exists
SELECT (@column_value:=@column_value+1) AS words FROM Data ORDER BY words 
```

上面的“@column_value”应该是“@word1”..“@word2”等。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:52:12.257

为什么不使用正常的计数 SQL 功能来计算单词，例如：

```
SELECT word, COUNT(word) as `count`
FROM Data
GROUP BY word
ORDER BY word ASC 
```

# javascript - 无法从谷歌地图清除多条路线

> ID：12371259
> 
> 赞同：0
> 
> 时间：2012-09-11T13:49:20.080
> 
> 标签：javascript, google-maps-api-3

**塞纳里奥：**

我有一个谷歌地图，它的功能之一是显示从一个中心点到同一张地图上几个不同位置的路线信息。我知道每个方向对象一次只能显示一组路线，所以我有一个函数，每次调用它时都会创建一个渲染对象，并将路线放在地图上并为每个位置调用它。

**编码：**

计算和显示路线的功能：

```
 function calculateRoot (startLocation,wayPoints,endLocation) {
            var selectedMode = $("#travelMode").val(); 
            // create a new directions service object to handle directions requests 
            var directionsService = new google.maps.DirectionsService();
            // create a directions display to display route info on the map
            var directionsDisplay = new google.maps.DirectionsRenderer();
            directionsDisplay.setMap(map);
            // Stops the default googlemarkers from showing
            directionsDisplay.suppressMarkers = true;
            directionsDisplay.setPanel(document.getElementById("directions"));

            // create a request object
            var request = {
                origin:startLocation,
                waypoints: wayPoints,
                destination:endLocation,
                travelMode: google.maps.TravelMode[selectedMode],
                optimizeWaypoints:true,
                provideRouteAlternatives:true,
                transitOptions: {
                    departureTime: new Date()
                }
                };   
            directionsService.route(request, function(result,status) {
                if (status == google.maps.DirectionsStatus.OK) {
                    directionsDisplay.setDirections(result);
                    return directionsDisplay;
                }

                else if (status == google.maps.DirectionsStatus.ZERO_RESULTS){
                    alert ('No routing can be found for this Journey');
                    return -1;
                }
                else {
                    alert ('The following error occoured while attempting to obtain directions information:'+'\n'+status + '\n' + 'For:'+ ' '+ request.destination);
                    return -1;
                }
            });
        } 
```

**所有位置功能：**

```
 function showAllRoutes(){
            if ( ! directionsArray.length < 1) {
                // if directions are already displayed clear the route info
                clearRoots();
            } 
            $('#directions').empty();
            // craete an empty waypoint array just to pass to the function
            var wayPoints = [];
            for (var i = 0; i< markerArray.length; i++) {
                 var directions = calculateRoot(startLatLng,wayPoints,markerArray[i].position); 
                     directionsArray.push(directions);

            }
            sizeMap();
            $('#directions').show();
        } 
```

**清除路线的功能**

```
function clearRoutes() {
            if (directionsArray.length <1 ) {
                alert ("No directions have been set to clear");
                return;

            }
            else {
                $('#directions').hide();
                for (var i = 0;i< directionsArray.length; i ++) {
                  if (directionsArray [i] !== -1) {
                      directionsArray [i].setMap(null); 
                  }
                }
                directionsArray.clear();
                map.setZoom(5);
                return;
            }   
        } 
```

**问题：**

虽然无论我做什么，生成和显示路线似乎都可以正常工作，除非我刷新，否则我无法从地图上清除路线。我是否遗漏了一些简单的事情，或者我需要做的事情不需要以这种方式完成，我已经尝试让这个工作超过一天，我很难过。任何人都可以帮忙吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:24:24.517

路线服务是异步的，calculateRoot（或calculateRoute 或其他真正调用的）不能返回任何内容，您需要将路线推送到回调函数中的全局数组中。

这是您的回调函数：

```
function(result,status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(result);
                return directionsDisplay;
            } 
```

将其更改为：

```
function(result,status) {
            if (status == google.maps.DirectionsStatus.OK) {
                directionsDisplay.setDirections(result);
                directionsArray.push(directionsDisplay);
            } 
```

# ios - 捆绑标识符不能从以前的版本更改

> ID：12371263
> 
> 赞同：4
> 
> 时间：2012-09-11T13:49:51.117
> 
> 标签：ios, xcode, app-store-connect

尝试将我的应用程序的第一个更新提交到 iTunes Connect 时出现错误。

当通过分发操作“提交到 iOS App Store”时，我选择了我在 iTunes Connect 中创建的新应用程序版本，以及唯一可用的代码签名身份。XCode 然后告诉我

> “此捆绑包无效。捆绑包标识符无法从以前的版本更改。如果要更改捆绑包标识符，则需要在 iTunes Connect 中创建一个新应用程序。”

但是，我的应用程序的 iTunes Connect 页面告诉我 Bundle ID 是

```
com.mycompany.myapp 
```

在 XCode Targets Summary 中，Bundle Identifier 设置为

```
com.mycompany.myapp 
```

我确实从网页上复制了文本并将其粘贴到 XCode 中。

版本号和内部版本号比 iTunes 中已有的版本高 0.1。

我努力了：

*   谷歌搜索
*   删除管理器中的派生数据目录
*   更改捆绑 ID，存档然后再次更改回来
*   甚至再次打开和关闭

一切都无济于事。似乎没有“捆绑标识符不能从以前的版本更改”的谷歌结果，尽管有很多包含“次要”这个词，但不幸的是它们没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-09T06:14:17.210

在我转到 iTunesConnect 并为新版本按“准备上传”之前，我收到了这个错误，此时状态更改为“等待上传”。捆绑包标识符从来没有任何问题，因此“捆绑包标识符不能从以前的版本更改”的消息非常具有误导性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-29T08:00:54.863

今天早上收到了。去iTunes解决了。有人指出，该应用程序已经处于“准备审核”状态。奇怪的是。通过以下方式解决了这个问题：

*   单击应用程序“查看详细信息”->“二进制详细信息”->“拒绝二进制”。
*   在此之后，我立即将状态设置为“准备好二进制上传”
*   通过 Xcode 分发应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T11:45:01.117

我有类似的 - 我搞砸了构建版本，（更新应用程序）所以添加了 1.0.1 的构建版本，然后在模拟器中构建了一个项目。接下来我重新上传到iTunes - 通过存档根。注意：如果这是您第一次将它发送到 iTunes - 他们是另一回事。

# asp.net - ASP.Net WebAPI 中的自定义路由处理程序

> ID：12371269
> 
> 赞同：14
> 
> 时间：2012-09-11T13:50:11.547
> 
> 标签：asp.net, asp.net-web-api

我能够在 global.asax.cs 中为 Web API 路由 ala 成功注册自定义路由处理程序（从 IRouteHandler 派生）：

```
 routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{client}/api/1.0/{controller}/{action}/{id}",
            defaults: new{id = UrlParameter.Optional}
        ).RouteHandler = new SingleActionAPIRouteHandler(); 
```

但是，当我尝试为 API 设置内存主机以进行集成测试时，我似乎找不到一种方法来执行此操作，当我调用 HttpConfiguration.Routes.MapRoute 时，我无法在返回的 IHttpRoute 上设置处理程序。

我应该以不同的方式执行此操作（例如通过使用自定义 HttpControllerSelector）吗？我显然想在这两种情况下都以同样的方式做。

谢谢，马特

编辑：

所以我最终做的基本上是遵循下面的建议，只是简单地覆盖 HttpControllerDispatcher 类，如下所示：

```
public class CustomHttpControllerDispatcher : HttpControllerDispatcher
{
    public CustomHttpControllerDispatcher(HttpConfiguration configuration) : base(configuration)
    {
    }
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        // My stuff here

        return base.SendAsync(request, cancellationToken);
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-13T13:25:08.067

你说的很对。自宿主返回 IHttpRoute 并以 HttpMessageHandler 作为参数。似乎没有内置的方法来指定路由处理程序。

**更新：要清楚一点**

您几乎肯定应该尝试使用 HttpControllerSelector 并实现自定义的……一个例子。[http://netmvc.blogspot.co.uk/](http://netmvc.blogspot.co.uk/)

**如果 HttpControllerSelector 不能满足您的要求，无论出于何种原因，**接下来是一些实验......****

 **但是，正如您所看到的那样，`MapHttpRoute`确实有一个重载，`HttpMessageHandler`因此您可以对此进行试验...[如果处理程序为 NULL，则它默认为 IHttpController](http://msdn.microsoft.com/en-us/library/system.web.http.routing.ihttproute.handler%28v=vs.108%29.aspx)但您可以实现自己的并使用它来指向正确的控制器... MVC 框架似乎在`[HttpControllerDispatcher]` [这里](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/f59892797e46#src/System.Web.Http/Dispatcher/HttpControllerDispatcher.cs)使用，因此借用一些代码，您也可以在这里放置您自己的控制器/路由选择代码 - 您可以访问路由和选择器，并且可以自己将其换入和换出。

此 CustomHttpControllerDispatcher 代码仅用于演示...查找该行

> //在这里做一些定制来选择你的控制器

也许可以玩一下...

**示例路线：**

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional },
            constraints: null,
            handler: new CustomHttpControllerDispatcher(config)
        ); 
```

**示例 CustomHttpControllerDispatcher：**

```
public class CustomHttpControllerDispatcher : HttpMessageHandler
{
        private IHttpControllerSelector _controllerSelector;
        private readonly HttpConfiguration _configuration;

        public CustomHttpControllerDispatcher(HttpConfiguration configuration)
        {
            _configuration = configuration;
        }

        public HttpConfiguration Configuration
        {
            get { return _configuration; }
        }

        private IHttpControllerSelector ControllerSelector
        {
            get
            {
                if (_controllerSelector == null)
                {
                    _controllerSelector = _configuration.Services.GetHttpControllerSelector();
                }
                return _controllerSelector;
            }
        }

        protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
        {
                return SendAsyncInternal(request, cancellationToken);
        }

        private Task<HttpResponseMessage> SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken)
        {

            IHttpRouteData routeData = request.GetRouteData();
            Contract.Assert(routeData != null);

            //DO SOMETHING CUSTOM HERE TO PICK YOUR CONTROLLER
            HttpControllerDescriptor httpControllerDescriptor = ControllerSelector.SelectController(request);
            IHttpController httpController = httpControllerDescriptor.CreateController(request);

            // Create context
            HttpControllerContext controllerContext = new HttpControllerContext(_configuration, routeData, request);
            controllerContext.Controller = httpController;
            controllerContext.ControllerDescriptor = httpControllerDescriptor;

            return httpController.ExecuteAsync(controllerContext, cancellationToken);
        }
} 
```**

# javascript - 外部javascript文件导致ie内存泄漏

> ID：12371278
> 
> 赞同：1
> 
> 时间：2012-09-11T13:50:39.150
> 
> 标签：javascript, internet-explorer, memory-leaks

我尝试在 IE（6 和 8）中执行此代码，它可以正常工作，但 IE 在执行时会导致内存泄漏。

```
<html>

<head>
<script type="text/javascript" src="file_with_data.html" id=currentJsData></script>
<script type="text/javascript">

function currentJsDataRefresh()
{
document.getElementById('currentJsData').src="file_with_data.html";
}

setInterval(currentJsDataRefresh, 300);

</script>
</head>
<body>

</body>
</html> 
```

其他文件 file_with_data.html 的摘录，其中包含 javascript 数据源作为全局变量：

```
var xMax;
var array1 = new Array();
var array2 = new Array();
var array3 = new Array();
array1[0] = 123;
array1[0] = 456;
... 
```

我试图插入一个删除所有变量的函数，使它们等于 null，但内存泄漏仍然存在。你能解释一下IE中发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:03:09.680

~~看起来您的应用程序中有 (i) 框架，如果您提供更完整的代码示例会有所帮助。~~ *抱歉没有仔细阅读问题*

同时检查这个问题：[Externally Declared Global Variable Leak](http://novemberborn.net/2006/04/javascriptedgvl-85)（查看代码演示）

当您在一个框架内声明全局变量而在另一框架的上下文中时，可能会发生这种情况。

# ruby-on-rails - Rails ActiveRecord group_by & sum db results 用于 Lazy HighCharts

> ID：12371279
> 
> 赞同：4
> 
> 时间：2012-09-11T13:50:43.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, highcharts

我对 RoR/Ruby 完全陌生，我正在使用 Lazy High Charts gem 根据一些数据库信息生成一些 purdy 图表。

我已经尝试了上一个问题中提供的答案，但我仍然对如何做到这一点感到有些困惑..

我需要按月/年汇总 amount_used 和 billed_amount 和分组（例如，2012 年 8 月）

最终结果将类似于具有两个系列“使用量”和“成本”的双轴图表。此信息特定于某个 account_id。

![在此处输入图像描述](../Images/b8864cf9851b9ebaee2597dc0901ad53.png)

## 发票表

```
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| account_id    | int(11)      | YES  |     | NULL    |                |
| invoice_date  | varchar(255) | YES  |     | NULL    |                |
| amount_used   | float        | YES  |     | NULL    |                |
| billed_amount | float        | YES  |     | NULL    |                |
| comments      | text         | YES  |     | NULL    |                |
| created_at    | datetime     | NO   |     | NULL    |                |
| updated_at    | datetime     | NO   |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

## 控制器图表代码

```
@account = Account.find(params[:id])
@invoices = Invoice.where("account_id = #{@account.id}").order("invoice_date DESC")

@h = LazyHighCharts::HighChart.new('area') do |f|
  f.options[:chart][:defaultSeriesType] = "area"
  #Sample dates right now, should be the grouped_by :invoice_date
  f.xAxis( :categories => ['May', 'Jun', 'Jul'] )
  f.yAxis([
    {
      :title => { :text => "Amount Used" }
    },
    {
      :title => { :text => "Cost" },
      :opposite => true
    }
  ])
  #Sample data right now, should be the summed amounts of the :amount_used correpsonding for each above grouped invoice_date
  f.series(:name => "Amount Used", :data => [100,300,500] )
  #Sample data right now, should be the summed amounts of the :billed_amount correpsonding for each above grouped invoice date
  f.series(:name => "Cost", :yAxis => 1, :data => [200,400,600] )
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T14:20:44.100

看起来你已经准备好了一切。以下是从 db 中提取数据的方法：

```
@aggregated_invoices = Invoice.
  where(:account_id => params[:id]).
  order("invoice_date DESC").
  group("invoice_date").
  select("DATE_FORMAT(invoice_date, '%Y-%m-01') AS invoice_date, sum(amount_used) AS amount_used, sum(billed_amount) AS billed_amount")

# Then use these instead of sample data:
@categories = @aggregated_invoices.map {|i| i.invoice_date.strftime("%b/%Y")}
@amount_used_data = @aggregated_invoices.map(&:amount_used)
@billed_amount_data = @aggregated_invoices.map(&:billed_amount) 
```

# php - curl_multi_exec 在有一个超时时杀死整个进程

> ID：12371280
> 
> 赞同：1
> 
> 时间：2012-09-11T13:50:48.170
> 
> 标签：php, curl

我正在使用 curl_multi 在与此类似的滚动 curl 脚本中发送电子邮件，但我添加了 10 秒的 curlopt_timeout 和 20 秒的 curlopt_connecttimeout [http://www.onlineaspect.com/2009/01/26/how-使用-curl_multi-without-blocking/](http://www.onlineaspect.com/2009/01/26/how-to-use-curl_multi-without-blocking/)

在测试它时，我分别使用 timeout_ms 和 connecttimeout_ms 将超时减少到 1ms，只是为了看看它如何处理超时。但是超时会杀死整个 curl 过程。即使有一次超时，有没有办法继续其他线程？谢谢。

-devo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:13:30.903

[https://github.com/krakjoe/pthreads](https://github.com/krakjoe/pthreads)

```
<?php
class Possibilities extends Thread {
    public function __construct($url){
        $this->url = $url;
    }

    public function run(){
        /*
        * Or use curl, this is quicker to make an example ...
        */
        return file_get_contents($this->url);
    }
}
$threads = array();
$urls = get_my_urls_from_somewhere();
foreach($urls as $index => $url){
    $threads[$index]=new Possibilities($url);
    $threads[$index]->start();
}
foreach($threads as $index => $thread ){
    if( ( $response = $threads[$index]->join() ) ){
        /** good, got a response */
    } else { /** we do not care **/ }
}
?> 
```

我的猜测是，您使用 curl multi 因为它是并发执行发送电子邮件的代码的唯一选择......如果是这种情况，我不建议您使用类似上面代码的任何东西，我建议您线程直接调用 mail() ，因为到目前为止这将更快、更有效。

但是现在您知道了，您可以在 PHP 中使用线程 .. 享受 :)

# bash - 重定向多个标准输入？

> ID：12371283
> 
> 赞同：3
> 
> 时间：2012-09-11T13:50:58.957
> 
> 标签：bash, sorting, redirect, input, stdin

我有三个文件，名为一、二、三。

一个包含：

```
1
3
2 
```

两个包含：

```
4
6
5 
```

三包含：

```
7
9
8 
```

当我给出以下命令时：

```
$sort < One < Two < Three 
```

我得到输出：

```
7
8
9 
```

但是当我给出以下命令时：

```
$sort One Two Three 
```

我得到输出：

```
1
2
3
4
5
6
7
8
9 
```

任何人都可以阐明这里发生了什么吗？为什么在第一个命令中没有考虑来自 1 和 2 的输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:54:38.823

您的命令与以下命令相同：

```
sort 0<1 0<2 0<3 
```

（文件描述符 0 是标准输入）

重定向按照它们出现的顺序进行处理，从左到右。
`sort`命令本身看不到任何这些文件。一个一个
`bash`打开文件`1`，，，`2`。 所以最右边的覆盖左边的。 最后，读取绑定到文件的文件。`3``file descriptor 0`

`sort``file descriptor 0``3`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:08:17.443

您不能使用 bash 重定向多个文件。要解决此限制，您可以使用 cat：

```
cat 1 2 3 | sort 
```

附带说明一下，zsh 支持它所谓的 mutlios：

```
 zsh$ setopt multios
 zsh$ sort < 1 < 2 < 3 > 4 > 5
 zsh$ tr '\n' ' ' < 4 < 5
 1 2 3 4 5 6 7 8 9 1 2 3 4 5 6 7 8 9 
```

# cakephp - cakephp tcpdf 图像错误 [图像] 无法获取图像

> ID：12371284
> 
> 赞同：1
> 
> 时间：2012-09-11T13:51:03.220
> 
> 标签：cakephp, tcpdf

我正在尝试使用 TCPDF 和 CakePHP 来解决这个奇怪的问题。

事实是我能够输出这样的“静态”图像

```
$this->Image(WWW_ROOT.'/img/logo-infiniti.png', 15, 15); 
```

但是当我对图像使用 cakephp 指令时，它不再起作用

```
echo $this->Image->resize($line['Line']['UploadImage'][0]['name'], 100, 100); 
```

我得到这个错误

```
TCPDF ERROR: [Image] Unable to get image: /Applications/MAMP/htdocs/configurator/files/cache/a/a/79x100_1316533443.jpg 
```

任何帮助将不胜感激...谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T05:11:34.660

使用 chmode() 函数将权限 Applications/MAMP/htdocs/configurator/files/cache 授予 777

# python - 如何以 UTF8 格式打开 ascii 编码的文件？

> ID：12371286
> 
> 赞同：3
> 
> 时间：2012-09-11T13:51:08.723
> 
> 标签：python, file-io, utf-8, io, ascii

我的文件是 US-ASCII 和类似的命令`a = file( 'main.html')`，并将`a.read()`它们作为 ASCII 文本加载。如何让它加载为 UTF8？

我要解决的问题是：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xae' in position 38: ordinal not in range(128) 
```

我正在使用文件的内容进行模板化，如`template_str.format(attrib=val)`. 但是要插入的字符串是 ASCII 的超集。

我们团队的版本控制和文本编辑器并不关心编码。那么如何在代码中处理呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:00:30.133

在 Python2 中工作的解决方案：

```
import codecs
fo = codecs.open('filename.txt', 'r', 'ascii')
content = fo.read()  ## returns unicode
assert type(content) == unicode
fo.close()

utf8_content = content.encode('utf-8')
assert type(utf8_content) == str 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T14:09:10.803

您试图在不指定编码的情况下打开文件，这意味着 python 使用默认值（ASCII）。

您需要使用以下`.decode()`函数显式解码字节字符串：

```
 template_str = template_str.decode('utf8') 
```

您`val`尝试插入模板的变量本身就是一个 unicode 值，python 也希望自动将您的字节字符串模板（从文件中读取）转换为 unicode 值，以便它可以将两者结合起来，它会使用这样做的默认编码。

我是否已经提到您应该阅读 Joel Spolsky[关于 Unicode](http://www.joelonsoftware.com/articles/Unicode.html)和[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)的文章？他们将帮助您了解这里发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T13:56:04.783

我想您确定您的文件是用 ASCII 编码的。你是？:) 由于 UTF-8 中包含 ASCII，因此您可以使用 UTF-8 解码此数据而不会出现问题。但是，当您确定数据只是 ASCII 时，您应该只使用 ASCII 而不是 UTF-8 来解码数据。

“如何让它以 UTF8 格式加载？”

我相信你的意思是“我如何让它加载为 unicode？”。只需使用 ASCII 编**解码**器对数据进行解码，在 Python 2.x 中，生成的数据将是`unicode`. 在 Python 3 中，结果数据的类型为`str`.

你必须阅读这个主题才能了解如何在 Python 中执行这种解码。一旦理解了，就很简单了。

# iphone - 如何停止使用 NSOperationQueue 启动的任务？

> ID：12371288
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:14.253
> 
> 标签：iphone, ios, nsoperationqueue

![在此处输入图像描述](../Images/80fa66afc98813642d0097cc2e33f808.png)我通过以下方式使用 NSOperationQueue 创建了一个进程：

```
queue = [[NSOperationQueue alloc]init];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self 
                                                                           selector:@selector(loadDataWithOperation)object:nil];
[queue addOperation:operation];
[operation release]; 
```

在该`loadDataWithOperation`方法中，我编写了用于打印无限数的代码。

现在我已经调用了 cancelAppOperations 来停止它的执行，并且我也尝试像这样将挂起的值设置为 YES

```
[queue setSuspended:YES] 
```

即使该进程仍在运行，我正在使用“停止”按钮调用停止方法。它在同一个班级里打电话。

我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:11:34.180

您可以在队列中的所有操作开始执行之前向它们发送取消消息，但如果您的操作已经在执行，您需要处理取消消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:38:38.283

这里暂停队列 [queue setSuspended:YES] 工作正常，我检查停止 For 循环的条件，即

```
if(![queue isSuspended]) 
{
        NSLog(@"elements are :%d",i);
}
else
{
    break; 
} 
```

我将这些代码行放在“loadDataWithOperation”方法中

# javascript - Google 版本 3 地图地理编码器，单击或拖动标记时获取标记层的坐标

> ID：12371293
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:27.707
> 
> 标签：javascript, html, google-maps, geocoding

我制作了 Google Version 3 Geocoder ，我希望能够在拖动或单击标记时获取标记的坐标。下面是我的代码：

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Geocoding Simple</title>
<link href="http://code.google.com/apis/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script src="http://maps.google.com/maps/api/js?v=3.5&amp;sensor=false"></script>
<script type="text/javascript">
var geocoder;
var map;
function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(-34.397, 150.644);
var myOptions = {
  zoom: 8,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function codeAddress() {
var address = document.getElementById("address").value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
        map: map,
        draggable: true,
        position: results[0].geometry.location

    });
  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
});
}
</script>

<style type="text/css">
#controls {
position: absolute;
bottom: 1em;
left: 100px;
width: 400px;
z-index: 20000;
padding: 0 0.5em 0.5em 0.5em;
}
 html, body, #map_canvas {
            margin: 0;
            width: 100%;
            height: 100%;
        }
</style>
</head>
<body onload="initialize()">
<div id="controls">
<input id="address" type="textbox" value="Sydney, NSW">

<input type="button" value="Geocode" onclick="codeAddress()">
</div>
<div id="map_canvas"></div>
</body>
</html> 
```

我尝试使用以下代码来执行此操作，但它似乎不起作用。

```
 // Javascript//
       google.maps.event.addListener(marker, 'dragend', function(evt){
       document.getElementById('current').innerHTML = '<p>Marker dropped: Current Lat: ' + evt.latLng.lat().toFixed(3) + ' Current Lng: ' + evt.latLng.lng().toFixed(3) + '</p>';
       });

       google.maps.event.addListener(marker, 'dragstart', function(evt){
       document.getElementById('current').innerHTML = '<p>Currently dragging marker...</p>';
       });

 map.setCenter(marker.position);
 marker.setMap(map);

 //HTML//
 <div id='map_canvas'></div>
 <div id="current">Nothing yet...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T03:15:41.650

如果您将其放在正确的位置，该代码就可以正常工作：

[http://www.geocodezip.com/BlakeLoizides_geocode.html](http://www.geocodezip.com/BlakeLoizides_geocode.html)

（在回调例程中，标记是本地的）

# asp.net-mvc - asp mvc 细粒度视图权限

> ID：12371294
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:28.430
> 
> 标签：asp.net-mvc, security, authorization

我正在构建 ASP MVC 4 Web 应用程序，我需要在我的视图上创建细粒度的权限。这意味着我需要根据他们的角色、数据类型请求和其他授权规则向某些用户显示一些操作。

在控制器端，我将 Authorize 属性放在适当的位置并创建细粒度的代码，如下所示：

```
public ActionResult Index() {
  List<Survey> surveys;
  if (MyUser.IsSuperUser) {
    surveys = surveyRep.AllSurveys.ToList();
  }
  else {
    surveys = surveyRep.VisibleSurveys.ToList();
  }

  return View(surveys);
} 
```

因为我正在构建多租户应用程序，所以任何不是超级用户的用户只能看到“可见”调查。超级用户总能看到一切。

现在的问题是如何在视图端创建相同的东西，而不需要复制逻辑（DRY）。

目前，当用户不是超级用户并且只有一个租户链接时，我使用此剃刀视图逻辑：

```
<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Survey</legend>

        @if (!MyUser.IsSingleTenant) {
            <div class="editor-label">
                Tenant
            </div>
            <div class="editor-field">
                @Html.DropDownListFor(model => model.TenantID, ...
                @Html.ValidationMessageFor(model => model.TenantID)
            </div>
        } 
```

MyUser 返回当前登录的用户，IsSingleTenant 指示她是否仅链接到单个租户。

恐怕这会使我的观点因大量“如果-那么”逻辑而变得混乱。

其他人如何解决这个问题？

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:53:52.720

这种方法没有任何问题。您可以将这些部分放在部分视图中以使其更具可读性：

```
<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Survey</legend>

        @if (!MyUser.IsSingleTenant) {
            @Html.Partial("Tenant")
        }

        ...
    </fieldset>
} 
```

# regex - RegEx - MatchCollection 获取 subMatches

> ID：12371296
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:31.203
> 
> 标签：regex

我有一个这样的文本文件：

```
Start
<Not Present>

   Start
  <Word>
   End

   Start 
   <Word>
   End

   Start 
   <Antoher>
   End    

End 
```

我必须编写一个正则表达式，结果只提供包含`<Word>`.

我试过这样的事情：

```
(Start[\s\S]+?(<Word>.*)[\s\S]+?End) 
```

结果我得到了两个子匹配。第一个子匹配：

```
Start
<Not Present>

   Start
  <Word>
   End 
```

第二个子匹配：

```
 Start 
   <Word>
   End 
```

如您所见，第二个是正确的，但第一个是错误的。我只想要`<Word>`“开始...结束”块内的子匹配。

我怎样才能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:24:07.893

```
(?s)Start(?:(?!Start|End).)*<Word>(?:(?!End).)*End 
```

`(?!Start|End).`匹配任何一个字符（包括`\n`，感谢`(?s)`修饰符），除非它是`Start`or的第一个字符`End`。这确保您只匹配最里面的一组`Start`和`End`分隔符。

我`.`在单行模式下使用（通过 inline`(?s)`修饰符）匹配任何字符，*包括换行符*，因为您提到`MatchCollection`了 ，表明您使用的是 .NET 正则表达式风格。这种`[\s\S]`hack 通常只在 JavaScript 中需要。

* * *

**更正：** 我假设您在谈论`System.Text.RegularExpressions.MatchCollection`.NET 框架中的类，但我刚刚了解到 VBScript 还包含一个名为`MatchCollection`. 它可能是您正在使用的 VBScript 风格（通过 ActiveX 或 COM），因此正则表达式应该是：

```
Start(?:(?!Start|End)[\S\s])*<Word>(?:(?!End)[\S\s])*End 
```

很抱歉造成混乱。更多信息[**在这里**](http://www.regular-expressions.info/vb.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:58:50.053

两个问题：

1.  您正在使用“贪婪”匹配 - 只需添加 a`?`使其不贪婪。如果没有这个，它将匹配 a`Start`并且`End`跨越*两*对 - 第一对`Start`和第二对`End`- 并将其放在开头和结尾`<Word>`
2.  表达式`[\s\S]`匹配所有内容 - 它与 dot 相同`.`。你只想要空白`[\s]`

试试这个（你也可以删除多余的外括号）：

```
Start(.*?<Word>.*?)End 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:06:27.367

`[\s\S]`没有多大意义。`\s`匹配空格并`\S`完全相反 - 它匹配非空格。所以`[\s\S]`几乎等同于`.`.

我也不确定你想用`.*`after实现什么`<Word>`。那只会匹配 . 之后的空格`<Word>`。

```
(Start[\s]+(<Word>)[\s]+End) 
```

[据我所知，它适用于http://regexpal.com/](http://regexpal.com/)中的测试用例。

# c#-4.0 - 在 C# 中逐列附加文本制表符分隔的文本文件

> ID：12371297
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:35.600
> 
> 标签：c#-4.0, large-files, streamreader

我有一个以制表符分隔的文本文件，大小为许多 GB。这里的任务是将标题文本附加到每一列。截至目前，我使用 StreamReader 逐行读取并将标题附加到每一列。到目前为止，这需要很多时间。有没有办法让它更快？我在想是否有办法按列处理文件。一种方法是将文件导入数据库表中，然后在附加标题后 bcp 出数据。还有其他更好的方法吗，可能是在 C# 代码中调用 powershell、awk/sed ？

代码如下：

```
 StreamReader sr = new StreamReader(@FilePath, System.Text.Encoding.Default);
  string mainLine = sr.ReadLine();
  string[] fileHeaders = mainLine.Split(new string[] { "\t" }, StringSplitOptions.None);
  string newLine = "";

  System.IO.StreamWriter outFileSw = new System.IO.StreamWriter(@outFile);

  while (!sr.EndOfStream)
  {
     mainLine = sr.ReadLine();
     string[] originalLine = mainLine.Split(new string[] { "\t" }, StringSplitOptions.None);

     newLine = "";
     for (int i = 0; i < fileHeaders.Length; i++)
     {
          if(fileHeaders[i].Trim() != "")
           newLine = newLine + fileHeaders[i].Trim() + "=" + originalLine[i].Trim() + "&";
     }

 outFileSw.WriteLine(newLine.Remove(newLine.Length - 1));
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:56:48.827

仅对文本文件进行任何操作都不会明显更快 - 从根本上说，您必须*阅读*整个输入文件，并且您必须*创建*一个全新的输出文件，因为您不能“插入”文本对于每一列。

一般来说，使用数据库几乎肯定是一个更好的主意，但添加一列最终仍可能是一项相对缓慢的业务。

但是，您可以改进处理每一行的方式。在这段代码中：

```
for (int i = 0; i < fileHeaders.Length; i++)
{
    if(fileHeaders[i].Trim() != "")
         newLine = newLine + fileHeaders[i].Trim() + "=" + originalLine[i].Trim() + "&";
} 
```

...您在循环中使用字符串连接，如果有大量列，这会很慢。使用 a`StringBuilder`很可能更有效。此外，无需调用每一行`Trim()`的每个字符串`fileHeaders`。您只需计算出您想要的列*一次*，适当地修剪标题，然后以这种方式过滤。

# regex - Morphia mongoDB 通配符查询

> ID：12371299
> 
> 赞同：7
> 
> 时间：2012-09-11T13:51:44.743
> 
> 标签：regex, mongodb, wildcard, morphia, mongodb-java

直截了当的问题，有人知道如何使用链接到 mongoDB 数据库的 morphia 进行通配符查询吗？

这就是 mongo 语句的样子：

蒙哥：`db.users.find({name:/Joe/})`
SQL： `SELECT * FROM users WHERE name LIKE "%Joe%"`

我的吗啡声明如下：

吗啡：`ds.find(File.class, "filename","/test/").order("filename").asList();`

我的数据库中有文件名，例如 test1、test 等

如果有人可以告诉我它是否可能与吗啡一起使用，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-11T14:17:14.233

您所说的“通配符”实际上是“[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)”。

代表正则表达式的 Java 类是[Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。您可以将这些传递给 Morphia 的 Query 对象的过滤器方法。

```
// create a regular expression which matches any string which includes "test"
Pattern regexp = Pattern.compile("test");
// use this regular expression to create a query
Query q = ds.createQuery(File.class).filter("filename", regexp).sort("filename"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-21T11:10:57.250

这也将起作用

```
DS.find(Model.class).field("filename").startsWithIgnoreCase("name").asList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-20T22:28:13.713

还可以这样做：

```
ds.createQuery(File.class)
    .criteria("filename").contains("test")
    .asList(); 
```

# objective-c - 滚动后单元格变为空。(Xcode)

> ID：12371300
> 
> 赞同：2
> 
> 时间：2012-09-11T13:51:45.633
> 
> 标签：objective-c, ios, xcode, uitableview

我的表格视图有问题。当我滚动并且一个单元格从屏幕上消失时，它变成空白。我在情节提要中构建了一个带有两个标签和一个图像视图的原型单元，它具有我在代码中使用的相同标识符。我还为 customcell 构建了一个自定义类。这是 cellForRowAtIndexPath 中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
Scientist *currentScientist = [[xmlParser data] objectAtIndex:indexPath.row];

CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

}

cell.self.cellName.text = currentScientist.self.name;
cell.self.cellSubject.text = currentScientist.self.subject;
cell.self.cellImage.image = currentScientist.self.image;

return cell;
} 
```

我不知道您是否需要更多代码来帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:03:34.547

就我而言，为每个单元创建一个不同的单元标识符就可以了。我有类似的东西：

```
NSString *cellIdentifier = [NSString stringWithFormat:@"identifier%i%i", indexPath.section, indexPath.row]; 
```

其余的应该保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:02:57.937

我发现一篇文章详细说明了您遇到的问题。我还建议打印出 Scientist 数据，以确保使用 objectAtIndex:indexPath.row 调用正确获取对象。

从我在下面链接的文章中，我愿意打赌您的 dequeueReusableCellWithIdentifier 是问题所在。解决此问题的一种快速方法是为每个单元格提供其自己的唯一单元格标识符（只是为了测试理论）。但是，看起来解决此问题的适当方法是更改​​ cellForRowAtIndex 方法。

[资源](https://stackoverflow.com/questions/8981366/uitableview-custom-cell-images-disappear-after-scrolling)

# android - Google Play 中的 Android APK 大小限制

> ID：12371302
> 
> 赞同：21
> 
> 时间：2012-09-11T13:51:52.657
> 
> 标签：android, google-play, apk-expansion-files

文档说 Google Play 中的 APK 大小限制为 50MB，可选择两个 2GB 扩展 APK。

但是，我可以在 Google Play 商店中找到超出 50MB 限制的应用程序（例如 Gears & Guts 是 371MB）。我可以直接从 Google Play 本身下载此游戏，无需外部下载器。作为顶级开发者，他们是否有一些额外的功能来上传超过 50MB 的 APK，或者 Google Play 是否只是隐藏了它正在下载扩展文件而不是 APK 本身的事实？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-11T14:14:36.387

Expansion files act kind of weird. To the user, they look like a normal app. A 50MB app with 150MB worth of expansion files will look like a 200MB download. Google Play will download the main app first. It will then download the main expansion file and then the patch expansion file. All in seemingly one lump sum.

However, it is possible for the download to be partial. I.E., the user can finish the main app download without the expansion files. As such, you MUST implement a custom downloader in order to retrieve the remaining files on the event the initial download fails. To make things a bit more complicated, sometimes the expansion files are not included in the initial download. I don't know what causes this, but I've seen it happen on rare occasions.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-11T14:09:29.103

更新：我刚刚再次下载了我的 APK 和 Gears 和 Guts，它们都显示为一个下载，但如果您查看状态栏中的下载状态，它会显示它正在下载一个附加文件。

![在此处输入图像描述](../Images/4f45fc53cd9d7626bea80cfdebd6e7e1.png)

# mysql - 计算外键数

> ID：12371304
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:56.043
> 
> 标签：mysql

我有三张桌子。

**1.`fi_category`**

```
+----+-----------------+-----------------+
| id | name            | slug            |
+----+-----------------+-----------------+ 
```

**2.`fi_subcategory`**

```
+----+-----------------+-----------------+-------------+
| id | name            | slug            | category_id |
+----+-----------------+-----------------+-------------+ 
```

**3.`fi_business_subcategory`**

```
+----+-------------+----------------+
| id | business_id | subcategory_id |
+----+-------------+----------------+ 
```

我基本上想做的是，

1.  获取所有类别
2.  获取属于类别的所有子类别。
3.  计算特定子类别存在的业务数量。

这就是我尝试做的。

```
SELECT 
    f.id,
    f.name,
    f.slug,
    f2.id,
    f2.name,
    f2.slug,
    COUNT(f3.business_id) as count
FROM
    fi_category f
LEFT JOIN 
    fi_subcategory f2 ON f.id = f2.category_id
LEFT JOIN 
    fi_business_subcategory f3 ON f2.id = f3.subcategory_id 
```

但是上面的查询只获取 1 条记录。我如何获取我想要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:54:25.173

我会添加一个`GROUP BY`子句：

```
SELECT 
    f.id,
    f.name,
    f.slug,
    f2.id,
    f2.name,
    f2.slug,
    COUNT(f3.business_id) as count
FROM fi_category f
LEFT JOIN fi_subcategory f2 
    ON f.id = f2.category_id
LEFT JOIN fi_business_subcategory f3 
    ON f2.id = f3.subcategory_id
GROUP BY f.id,
    f.name,
    f.slug,
    f2.id,
    f2.name,
    f2.slug 
```

或者让你`count()`的子查询：

```
SELECT f.id,
    f.name,
    f.slug,
    f2.id,
    f2.name,
    f2.slug,
    f3.cnt
FROM fi_category f
LEFT JOIN fi_subcategory f2 
    ON f.id = f2.category_id
LEFT JOIN
(
    select count(business_id) cnt, subcategory_id 
    from fi_business_subcategory
    group by subcategory_id
) f3 
    ON f2.id = f3.subcategory_id 
```

# mysql - Mysql - 是否建议为静态数据表使用单独的数据库？

> ID：12371306
> 
> 赞同：0
> 
> 时间：2012-09-11T13:51:59.360
> 
> 标签：mysql, performance

我有一堆表（大约 20 个）很少改变，我称之为静态数据。这些是查找表。

我正在考虑将它们存储在单独的数据库中。考虑到它们被引用（外键约束）是否存在任何性能问题是另一个数据库中的许多主表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:59:27.297

Keep them in the same database with the tables that are referencing them. There's really very little to be gained by placing them in a separate DB.

# android - android - 使用 AutoCompleTextView 过滤 Listview 与基于 BaseAdapter 的图像

> ID：12371309
> 
> 赞同：3
> 
> 时间：2012-09-11T13:52:05.733
> 
> 标签：android, listview, filter, baseadapter

我是Android新手，所以请耐心等待！

我想使用 AutoCompleTextView 来过滤基于自定义 BaseAdapter 的 ListView。此列表视图包含文本和图像。

这是列表视图的布局：

```
listview_main.xml

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/container"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:background="@drawable/backrepeat_dark"
android:padding="0sp" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/options_bar"
    android:layout_alignParentTop="true"
    android:orientation="vertical" >

    <AutoCompleteTextView
        android:id="@+id/inputSearch"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Ricerca opere..."
        android:inputType="textVisiblePassword"
        android:textSize="12dp" >

</AutoCompleteTextView>

     <ListView
         android:id="@+id/list"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
         android:layout_above="@+id/options_bar"
         android:layout_weight="1"
         android:cacheColorHint="#80000000"
         android:divider="#b5b5b5"
         android:dividerHeight="1dp" />

</LinearLayout>

<include
    android:id="@+id/options_bar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="0dp"
    android:layout_weight="0"
    layout="@layout/menu_main"
    android:fadingEdge="horizontal" />

</RelativeLayout> 
```

这里是列表行布局：

```
list_row.xml

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="110dp"
android:background="@drawable/list_selector"
android:orientation="horizontal"
android:padding="5dip" >

<LinearLayout
    android:id="@+id/thumbnail"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_marginRight="5dip"
    android:padding="3dip" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="100dp"
        android:layout_height="100dp" />
</LinearLayout>

<TextView
    android:id="@+id/pid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="5dip"
    android:gravity="right"
    android:text="5:45"
    android:textColor="#10bcc9"
    android:textSize="10dip"
    android:textStyle="bold"
    android:visibility="gone" />

<!-- Rightend Arrow -->

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:src="@drawable/arrow" />

<TextView
    android:id="@+id/name"
    style="?textLarge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/thumbnail"
    android:layout_marginLeft="56dp"
    android:layout_toRightOf="@+id/thumbnail"
    android:text="TITOLO" />

<TextView
    android:id="@+id/autore"
    style="?textRegular"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/name"
    android:layout_below="@+id/name"
    android:text="Autore" />

</RelativeLayout> 
```

这是我的自定义适配器：

```
public class LazyAdapterOpere extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater = null;
public ImageLoader imageLoader;

public LazyAdapterOpere(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader = new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)

        vi = inflater.inflate(R.layout.list_row, null);

    TextView pid = (TextView) vi.findViewById(R.id.pid); 
    TextView name = (TextView) vi.findViewById(R.id.name); 
    TextView autore = (TextView) vi.findViewById(R.id.autore); 
    ImageView image = (ImageView) vi.findViewById(R.id.image); 

    HashMap<String, String> opere = new HashMap<String, String>();
    opere = data.get(position);

    // Setting all values in listview
    pid.setText(opere.get(ElencoOpere.TAG_PID));
    name.setText(opere.get(ElencoOpere.TAG_NAME));
    autore.setText(opere.get(ElencoOpere.TAG_AUTORE));

    imageLoader.DisplayImage(opere.get(ElencoOpere.TAG_IMAGE), image);
    return vi;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
} 
```

这就是我填充自定义适配器的方式：

```
ArrayList<HashMap<String, String>> listaOpere = new ArrayList<HashMap<String, String>>();

// products JSONArray
JSONArray opere = null;

ListView list;
LazyAdapterOpere adapter;

EditText inputSearch;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.listview_main);

    addListenerOnButton();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    list=(ListView)findViewById(R.id.list);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // getting product details from intent
    Intent i = getIntent();

    // getting product id (pid) from intent
    sala = i.getStringExtra(TAG_SALA);

        adapter=new LazyAdapterOpere(this, listaOpere);     
        adapter.imageLoader.clearCache();
        list.setAdapter(adapter); 
```

一切正常，但我不知道如何在这个适配器上使用过滤器，我只看到了 ArrayAdapter 的示例。你能帮我么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-18T08:36:21.300

而不是使用你可以使用edittext和listview来做到这一点。您可以将 textwatcher 和自定义列表视图与图像一起使用

# android - 打开预加载的 sqlite db 文件

> ID：12371315
> 
> 赞同：1
> 
> 时间：2012-09-11T13:52:22.483
> 
> 标签：android, database, sqlite, android-sqlite

我想我已经准备好跳下悬崖了。我一直在尝试制作预加载的 sqlite 数据库以进行批量插入。无论我的数据库文件是什么，都永远不会打开并且应用程序崩溃。最后，我尝试在这里使用最防白痴的方法，但我仍然很短：[https ://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

这是相关的logcat：

```
09-11 13:41:34.359: I/Database(2913): sqlite returned: error code = 14, msg = cannot open file at source line 25467
09-11 13:41:34.359: E/Database(2913): sqlite3_open_v2("/data/data/com.anthonyce.mcathomie/databases/northwind", &handle, 2, NULL) failed
09-11 13:41:34.369: W/SQLiteAssetHelper(2913): could not open database northwind - unable to open database file
09-11 13:41:34.369: W/SQLiteAssetHelper(2913): copying database from assets...
09-11 13:41:34.369: W/SQLiteAssetHelper(2913): extracting file: 'Northwind-v1.db'...
09-11 13:41:34.779: W/SQLiteAssetHelper(2913): database copy complete
09-11 13:41:34.869: I/SQLiteAssetHelper(2913): successfully opened database northwind
09-11 13:41:34.889: D/AndroidRuntime(2913): Shutting down VM
09-11 13:41:34.889: W/dalvikvm(2913): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-11 13:41:34.910: E/AndroidRuntime(2913): FATAL EXCEPTION: main
09-11 13:41:34.910: E/AndroidRuntime(2913): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.anthonyce.mcathomie/com.anthonyce.mcathomie.GameActivity}: java.lang.ClassCastException: android.database.sqlite.SQLiteCursor
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.os.Looper.loop(Looper.java:123)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread.main(ActivityThread.java:3683)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at java.lang.reflect.Method.invokeNative(Native Method)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at java.lang.reflect.Method.invoke(Method.java:507)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at dalvik.system.NativeStart.main(Native Method)
09-11 13:41:34.910: E/AndroidRuntime(2913): Caused by: java.lang.ClassCastException: android.database.sqlite.SQLiteCursor
09-11 13:41:34.910: E/AndroidRuntime(2913):     at com.anthonyce.mcathomie.GameActivity.onCreate(GameActivity.java:25)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-11 13:41:34.910: E/AndroidRuntime(2913):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-11 13:41:34.910: E/AndroidRuntime(2913):     ... 11 more 
```

编码。我不骗你，我使用的是完全相同的示例文件。我已经被一步一步地复制了样本，但我仍然遇到这些令人沮丧的错误。

```
public class McatDatabase extends SQLiteAssetHelper{

private static final String DB_NAME = "northwind";
private static final int DB_VERSION = 1;
private static final String[] COLUMNS = {"LastName"};
private static final String TABLE_NAME = "Employees";

public McatDatabase(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

public Cursor getQuestions() {
SQLiteDatabase db = getReadableDatabase();
Cursor c = db.query(TABLE_NAME, COLUMNS, null, null, null, null, null);
c.moveToFirst();
return c;
} 
```

## }

在另一个班级：

```
public class GameActivity extends Activity {

    private McatDatabase db;
    private Cursor thequestions;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);

        db = new McatDatabase(this);
        thequestions = db.getQuestions();

        TextView tv = (TextView)findViewById(R.id.TextView1);
        tv.setText((CharSequence) thequestions);
        thequestions.close();
        db.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:41:09.537

您正在尝试将光标投射到 CharSequence，而系统不喜欢这样，因此向您抛出 ClassCast 异常。

如果将 Cursor 放入 SimpleCursorAdapter，则可以使用[convertToString](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#convertToString%28android.database.Cursor%29)方法进行转换。否则，您需要自己遍历光标进行转换。

字面上的问题得到了回答，在我看来你正在尝试列出问题，所以我想知道你为什么使用你现在使用的方法而不是使用适配器并创建一个列表（这是 Android*非常*好的在）。

如果您是该框架的新手并且不了解如何操作，那么这里有很多教程，当您遇到困难时，您可以来这里寻求帮助以克服困难。

# php - 浏览器重定向

> ID：12371320
> 
> 赞同：0
> 
> 时间：2012-09-11T13:52:33.090
> 
> 标签：php, javascript, linux, iptables

我正在为 LAN 编写一个互联网访问工具，每次用户尝试访问任何网页时，该工具都使用 Linux + iptables 重定向到登录页面。该登录页面要求输入用户名和密码，如果身份验证成功，它会删除 iptables 规则，以便后续请求转到最初预期的网页。

这是这种情况：

1.  如果我去[http://www.abc.com](http://www.abc.com)，我的默认 gw 会将我重定向到 10.0.10.10/login.php
2.  我成功登录。
3.  如果我再次尝试访问[http://www.abc.com](http://www.abc.com)，浏览器会自动将我发送回 10.0.10.10，这就像某种缓存。
4.  如果我尝试进入 abc.com 以外的其他页面，它会按预期工作。

如何告诉浏览器删除“记住”的重定向规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:24:18.487

基于[http://www.w3schools.com/tags/att_meta_http_equiv.asp](http://www.w3schools.com/tags/att_meta_http_equiv.asp)

如果您使用这些元标记页面不会被浏览器或代理服务器缓存：

```
<meta http-equiv=”expires” content="Wed, 22 Jul 1981 16:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-store" />
<meta http-equiv="cache-control" content="no-cache" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:55:09.937

您需要硬刷新缓存。

通常你可以用`CTRL`+`F5`或`CTRL`+`R`

或者您更改规则以使第二次重定向到同一页面但带有一些`#`片段标识符

例如：如果用户进入`abc.com`并在登录时被重定向如果他尝试再次访问`abc.com`并且您看到他已登录将他重定向到`abc.com#1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:04:23.940

您可以使用 javascript 从浏览器历史记录中删除该页面/url，这将完成您需要的操作。而且当用户点击浏览器上的后退按钮时，他将不会回到他/她登录的上一个页面。

# iphone - 我应该在哪里保存我想长期保留的数据和文件，以及如何防止 iCloud 备份它们

> ID：12371321
> 
> 赞同：8
> 
> 时间：2012-09-11T13:52:32.123
> 
> 标签：iphone, objective-c, ios, core-data

我有文件 - 包括核心数据存储库在内的任意类型 - 我需要保留而不让 iOS 删除它们。通常，我不希望 iCloud 备份这些文件。我应该把它们保存在哪里？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T13:52:32.123

本地保存文件从 iOS5.0 及更早版本、5.0.1 和 5.1 及更新版本主要是为了解决 iCloud 备份问题。有两个 Apple 源文档（[文件系统编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)和[QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)）共同提供支持以下内容的信息：

*   iOS 5.0

文件应保存在“Caches”目录中，因为如果它们存储在 Documents 文件夹中，则无法阻止备份。请注意，系统可能会删除这些文件（请参阅 QA1719），因此您需要能够根据需要重新创建每个文件。要查找缓存目录，请使用以下命令：

```
[NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES) lastObject] 
```

*   iOS 5.0.1

文件应保存在“/Library/Application Support”（[FSP](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)，第 15 页）中，可以通过以下方式更好地访问：

```
[NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES) lastObject] 
```

我的经验是这个目录并不总是存在，因此您可能需要创建它：

```
- (NSString *)applicationAppSupportDirectory
{
    return [NSSearchPathForDirectoriesInDomains(NSApplicationSupportDirectory, NSUserDomainMask, YES) lastObject];
}

NSFileManager *manager = [NSFileManager defaultManager];
NSString *appSupportDir = [self applicationAppSupportDirectory];
if(![manager fileExistsAtPath:appSupportDir]) {
    __autoreleasing NSError *error;
    BOOL ret = [manager createDirectoryAtPath:appSupportDir withIntermediateDirectories:NO attributes:nil error:&error];
    if(!ret) {
        NSLog(@"ERROR app support: %@", error);
        exit(0);
    }
} 
```

保存到此目录（或子目录）的文件需要扩展属性来告诉 iCloud 不要备份它们（请参阅 QA1719）。

PS：我还没有找到将Deployment目标设置为这个版本的方法，如果有方法请发表评论。

*   iOS 5.1

文件（或文件文件夹）应位于如上所述的“应用程序支持”文件夹中。要防止 iCloud 备份使用：

```
[URL setResourceValue: [NSNumber numberWithBool: YES] ￼￼￼￼forKey:NSURLIsExcludedFromBackupKey error:&error] 
```

如 QA1719 中所述。请注意，您可以将此密钥应用于目录以防止其内容被备份。来自 QA1719 的完整方法：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;
} 
```

# android - android中带有复选框和按钮的快速操作对话框/弹出窗口

> ID：12371324
> 
> 赞同：1
> 
> 时间：2012-09-11T13:52:35.390
> 
> 标签：android, android-layout, android-intent, android-emulator, android-dialog

我正在寻找包含 4 个复选框和 1 个是（确定）按钮的快速操作对话框。请。建议我一个很好的样本。...我正在尝试执行此功能 3 天..浏览了许多代码，但它不包含复选框和按钮...这是我正在寻找的图像：

[在android中使用onclick搜索视图的快速对话框](https://stackoverflow.com/questions/12351670/quick-dialog-using-onclick-search-view-in-android)

请提供您的帮助！在此先感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:57:09.937

如果罐装快速盒实现都不适合您的需求，您可以使用`PopupWindow`并放置您想要的任何布局。

[文档](http://developer.android.com/reference/android/widget/PopupWindow.html)中有关 PopupWindow 的更多信息。对于教程，只需谷歌搜索“ *android popupwindow tutorial ”（*[这里](http://android-er.blogspot.com/2012/03/example-of-using-popupwindow.html)的第一个示例）。

# resharper - 如何阻止 ReSharper 将“x => new”放在新行上？

> ID：12371327
> 
> 赞同：1
> 
> 时间：2012-09-11T13:52:46.220
> 
> 标签：resharper, visual-studio-2012, resharper-7.0

我知道这是一个相当小的细节，但由于某种原因，这对我来说非常烦人，我无法弄清楚如何纠正它（我已经查看了“换行和换行”选项）。

这是我喜欢此代码格式的方式：

```
var reps = ctx.Commissions
    .GroupBy(x => x.SalesRep)
    .Select(x => new
                {
                    x.Key.UserID,
                    Name = x.Key.FirstName + " " + x.Key.LastName
                })
    .ToList(); 
```

不过，ReSharper 喜欢将其格式化为

```
var reps = ctx.Commissions
    .GroupBy(x => x.SalesRep)
    .Select(
            x => new
                {
                        x.Key.UserID,
                        Name = x.Key.FirstName + " " + x.Key.LastName
                })
    .ToList(); 
```

关于如何阻止 ReSharper 这样做的任何想法？

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:40:16.520

看起来您应该禁用部分中`Prefer wrap after '(' in invocation`的选项`Code Editing -> C# -> Formatting Style -> Line Breaks and Wrapping`。

# jquery - html 选择下拉菜单宽度太大

> ID：12371329
> 
> 赞同：21
> 
> 时间：2012-09-11T13:52:53.717
> 
> 标签：jquery, html, css, select, width

我搜索了解决问题的方法，但找不到，也许我不知道如何用英语搜索它，因为它不是我的第一语言。

无论如何，我的问题是我正在尝试使用 HTML 中的功能，并且其中一个选项非常冗长，如果我将没有任何宽度作为样式传递，它将破坏整个网站。如果我使用宽度，它只会显示一些东西，看起来像切割。但是，我看到了一个包含“...”的示例，我很乐意使用它，但我不知道如何使用。

为了清楚起见，我正在寻找一些帮助，让我看起来像“长选项......”或者如果有人知道更好的方法？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-11T14:56:09.820

示例 HTML：

```
<select id="myOptions">
    <option value="1"><span>Item 1</span></option>
    <option value="2">Item 2</option>
    <option value="3">Item 3 which has very very very very very long text</option>
    <option value="4">Item 4</option>
</select> 
```

示例 CSS：

```
select{
    width: 100px;
    text-overflow: ellipsis;
} 
```

### [演示](http://jsfiddle.net/8mTdM/)- 仅将 ... 添加到选定的值

将宽度更改为最适合您情况的宽度。应用`text-overflow: ellipsis`添加`...`到比指定宽度长的文本。

此样式**仅**应用于选定的值，但在单击下拉列表时仍会完整显示选项。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T14:11:52.293

如果您正在寻找一个非常简单的解决方案，就像您描述的那样（附加...），那么这样的东西应该适合您：-

```
$(document).ready(function() {
    var maxLength = 15;
    $('#example > option').text(function(i, text) {
        if (text.length > maxLength) {
            return text.substr(0, maxLength) + '...';
        }
    });
}); 
```

这只是遍历每个`option`并检查其文本长度。如果它大于`maxLength`它将被缩短到与它相同的长度`maxLength`并将`...`被附加到它。

这是一些与之相关的示例标记：-

```
<select id="example">
    <option value="1">Short</option>
    <option value="2">Oh dear, this option has really long text :(</option>
</select> 
```

### [这是一个小提琴](http://jsfiddle.net/wCUA6/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T14:50:31.073

如果您在`select`元素上设置宽度，例如

```
select { width: 7em } 
```

下拉列表仍会以其自然宽度显示。

如果某个选项*很*长，那么无论如何您都会遇到可用性问题，您应该考虑将其缩短或使用不同的控件，例如一组单选按钮或复选框。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-11T13:57:44.123

You could solve this using jQuery and reading [this](http://css-tricks.com/select-cuts-off-options-in-ie-fix/) article .

```
var el;

$("select")
  .each(function() {
    el = $(this);
    el.data("origWidth", el.outerWidth()) // IE 8 can haz padding
  })
  .mouseenter(function(){
    $(this).css("width", "auto");
  })
  .bind("blur change", function(){
    el = $(this);
    el.css("width", el.data("origWidth"));
  }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T13:56:55.937

这取决于您如何将选项添加到选择中 - 它是使用 PHP/Python/等服务器端语言生成的吗？或者它是一些 JS 或它的静态 HTML？

您可以使用这些语言中的任何一种来缩短字符串（最后使用 ...）。在这里你可以找到如何使用 js： [javascript 缩短字符串而不剪切单词](https://stackoverflow.com/questions/5454235/javascript-shorten-string-without-cutting-words)

如果您更具体并显示一些代码，我可以帮助您在特定情况下完成此操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-12-13T10:38:50.343

无法单独使用 css 更改/更改选择菜单。我添加了一个使用 jquery 的小演示来模拟解决方案的问题。

```
[Truncating or showing ellipses for Long option value][1]

  [1]: http://jsfiddle.net/xpvt214o/996293/ 
```

# javascript - Javascript 查找和替换 div

> ID：12371331
> 
> 赞同：2
> 
> 时间：2012-09-11T13:52:57.550
> 
> 标签：javascript, html, css, parsing, bbcode

我想将自己的 bbcode 添加到所见即所得的 bbcode 编辑器中。我遇到的问题是它可以找到 bbcode 并更改为 html，但它不能相反。我不习惯用 javascript 编写安全的字符串，所以希望有人能指出我的问题。

HTML 到 BBcode 行

```
rep(/<(div style=\"background-color:\s[^<>]*?#fff; padding: 8px; margin: 5px; border: 1px solid #EAEAEA;\"|b)(\s[^<>]*)?>/gi,"[boxone]");
rep(/<\/(div|b)>/gi, "[/boxone]"); 
```

BBcode 到 HTML 行（这个有效）

```
rep(/\[boxone\]/gi,"<div style=\"background-color: #fff; padding: 8px; margin: 5px; border: 1px solid #EAEAEA;\">");
rep(/\[\/boxone\]/gi,"</div>"); 
```

这个想法是改变`[boxone] Content [/boxone]`为

```
<div style="background-color: #fff; padding: 8px; margin: 5px; border: 1px solid #EAEAEA;">$1</div> 
```

反之亦然。

申请帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:59:34.353

我认为您不需要使用正则表达式，因为您正在寻找特定的字符串。一个简单的字符串替换应该可以完成这项工作（只需确保在需要的地方转义字符）。

我不知道您使用什么语言，但这不是简单的工作：

```
rep('[/boxone]','</div>'); 
```

# javascript - Gmaps4rails：当用户单击侧边栏中的链接时如何更改标记的外观？

> ID：12371335
> 
> 赞同：0
> 
> 时间：2012-09-11T13:53:08.253
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, gmaps4rails

我正在尝试使用 gmaps4rails 获得此行为：用户单击侧边栏中的链接，地图上的相应标记会更改图像/颜色，以使所选的标记从其他标记中脱颖而出。

我试过这段代码

```
Gmaps.map.callback = function(){
        var len = Gmaps.map.markers.length;
        for(var i = 0; i < len; i++){
            marker = Gmaps.map.markers[i];
            google.maps.event.addListener(marker.serviceObject, 'click', (function(i){
                return function(){
                    console.log($(Gmaps.map.markers[i].serviceObject.ne.ga).attr("src", "/assets/marker_sprite2.png"));
                }
            })(i));
        }
    } 
```

但这会改变每个标记的外观，这对我想要做的事情不是很有用！

有没有办法做到这一点？

编辑：让它工作见下面的答案

编辑 2：虽然此解决方案适用于我想要的，但我偶然发现了此方法的另一个问题，请参阅下面的评论以回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:57:15.787

你有一个javascript问题。实际上，你不能用一个不断变化的计数器来做一个闭包：它总是用它的最后一个值来引用。

```
Gmaps.map.callback = function(){
  for(var i = 0; i < Gmaps.map.markers.length; i++){
    marker = Gmaps.map.markers[i];
    google.maps.event.addListener(marker.serviceObject, 'click', 
      (function(marker){
        return function(){
         console.log($(marker.serviceObject.ne.ga).attr("src", "/assets/marker_sprite2.png"));
        }
      })(marker)
    )
  }
} 
```

您的主要问题有点长，不复杂但很长。思路如下：

*   为每个标记添加一个`id`，您可以使用该`to_gmaps4rails`方法的 block 参数并添加更多 json

*   自己创建侧边栏并将 id 添加到每一行，以便在单击 li 时知道您想要哪个标记

*   循环所有标记以获取具有正确 id 的标记

*   改变它的图片

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:48:23.580

我使它与这段代码一起工作：

```
Gmaps.map.callback = function(e){
        var len = Gmaps.map.markers.length;
        var markers = Gmaps.map.markers;
        for(var i = 0; i < len; i++){
            m = Gmaps.map.markers[i];
            google.maps.event.addListener(m.serviceObject, 'click',
                (function(m, markers){
                    return function(){
                        for(a in markers){
                            markers[a].serviceObject.setIcon("/assets/marker_sprite.png");
                        }
                        m.serviceObject.setIcon("/assets/marker_sprite2.png");
                    }
                }(m, markers))
            )
        }
    } 
```

发生的事情是我们为每个标记添加了一个点击监听器，并将标记本身传递给这个监听器函数。我还传入整个标记数组以在每次单击时将它们全部重置，然后使我感兴趣的那个脱颖而出。这是简单的版本，我的最终版本是这样的：

```
 Gmaps.map.callback = function(){
        var len = Gmaps.map.markers.length;
        var markers = Gmaps.map.markers;
        var anchor = new google.maps.Point(9.5, 34);
        var sAnchor = new google.maps.Point(0, 34);
        var origin = new google.maps.Point(0, 0);
        var sOrigin = new google.maps.Point(28.5, 0);
        var size = new google.maps.Size(28.5,34);

        var markerNormal = new google.maps.MarkerImage("/assets/marker_sprite.png", size, origin, anchor);
        var markerHighlight = new google.maps.MarkerImage("/assets/marker_sprite_bleu.png", size, origin, anchor);
        var shadow = new google.maps.MarkerImage("/assets/marker_sprite.png", size, sOrigin, sAnchor);
        for(var i = 0; i < len; i++){
            m = Gmaps.map.markers[i];
            google.maps.event.addListener(m.serviceObject, 'click',
                (function(m, markers){
                    return function(){
                        console.log(m);
                        for(a in markers){
                            markers[a].serviceObject.setIcon(markerNormal);
                            markers[a].serviceObject.setZIndex(1);
                            markers[a].serviceObject.shadow = shadow;
                        }
                        Gmaps.map.map.setZoom(7);
                        m.serviceObject.setZIndex(99);
                        m.serviceObject.setIcon(markerHighlight);
                    }
                }(m, markers))
            )
        }
    } 
```

如果您看到任何可以改进的地方，请随时发表评论：）

# java - Android Authentication Mananger，什么时候需要用户权限？

> ID：12371341
> 
> 赞同：5
> 
> 时间：2012-09-11T13:53:26.037
> 
> 标签：java, android, access-token, android-4.2-jelly-bean, android-authenticator

我正在编写一个 Android 应用程序，我需要从该帐户请求一个 Auth 令牌。获取帐户列表和令牌很容易，到目前为止我已经完成了。

问题是果冻豆打开一个弹出窗口，要求用户许可。现在我的问题：

1.  弹出对话框出现的规则是什么？在我将设备更新到 Android 4.1 之后，我第一次发生了这种情况。它似乎是随机发生的：安装和卸载应用程序我无法重现此弹出窗口再次出现的情况。

2.  有没有什么办法不用恢复出厂设置就可以恢复？我需要重现这个以测试问题 3。）

3.  有没有办法在请求 authtoken**之前**确定弹出窗口是否会出现，即等到不再需要它（即，如果用户安装了有问题的应用程序但从未使用过，或者 authtoken 是否过期？）然后请求它？

    我知道大多数 Android 用户非常缺乏经验，可能会被一些权限请求吓到，我想避免在触发此用户弹出窗口时请求 authtoken。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:03:27.133

我试图撤销对我的应用程序引擎项目的访问权限，并且我能够通过转到谷歌帐户设置页面来撤销许可。在那里，您可以撤消 android 登录服务的访问权限。之后，我不得不从手机中删除谷歌帐户并将其重新添加。如果您再次启动您的应用程序，您应该会再次看到权限对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:41:32.920

重置/撤销权限通常取决于令牌的类型。这有两个方面：使用您的 Google 个人资料页面撤销服务器端的令牌，以及撤销您的应用程序使用此类令牌的权限（在 Android 上）。对于服务器端，您可以撤销 OAuth 和 AuthSub 令牌，但不能撤销 ClientLogin 令牌。转到[https://www.google.com/settings/security](https://www.google.com/settings/security)并单击“授权应用程序和网站”部分中的“编辑”按钮。为了撤销设备上的权限，卸载您的应用程序应该重置它（当您的包被卸载时，它会删除系统数据库中的一个条目）。显然这在某些设备上不能正常工作，但它*应该*工作。该对话框仅在您尝试使用令牌时出现，因此在您请求之前不应出现。您应该在您的应用程序中处理到期（即请求新令牌），但这不会显示权限对话框。

# jboss - 从 SAN 加载整个应用程序服务器

> ID：12371343
> 
> 赞同：0
> 
> 时间：2012-09-11T13:53:27.847
> 
> 标签：jboss, san

传统上，我们一直使用 SAN 作为数据库的后端存储。但是最近我们的 SAN 供应商提出了一个想法，即我们甚至可以直接从 SAN 加载我们的应用服务器 (JBoss)。我很惊讶，但这个概念是在 SAN LUN 上安装应用程序服务器，然后从那里运行它。SAN 供应商提到了 AppServer 配置的 DR 复制的简易性等。这对于生产系统来说是一种可行的策略吗？有什么风险、弊端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-17T09:56:05.147

您的供应商正在谈论“从 SAN 引导”。这是一个相当可行的策略。许多数据中心客户开始适应这种情况。SAN 加载有 2 个选项 - FC 和 iSCSI。您的 SAN LUN 可以用作引导分区，您的所有应用程序基本上都从那里运行。

FC：最好使用FC SAN boot，因为它具有非常高的速度和带宽，但需要一个SAN网络（FC适配器、FC电缆、交换机）。

iSCSI：它比 FC 慢得多，因为您可以使用 LAN 网络传输 SAN 流量。

这真的取决于你的选择。祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T15:11:47.207

他们可能在谈论从 SAN 引导。这对于 FC SAN 卡和 iSCSI 卡都是可能的，在较小程度上仅适用于 iSCSI SW。

我的建议是，如果您追求这个，您可以设置一个与您的应用程序的数据卷分开的 BOOT 卷。如果您利用 DR 或 Snapshot 技术，最大的问题是您的 DATA 需要什么级别的一致性。它是否知道在不正常关闭时如何恢复，或者您是否需要编写应用程序脚本以静默数据，以便在返回时处于一致状态。参与 VSS 的 Windows 应用程序可以通过绑定到 SAN 供应商的 VSS 服务静默，其他应用程序需要在 SAN 和您的应用程序之间编写脚本。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T06:01:56.243

如果您使用的是大多数 Linux 或 UNIX。您甚至可以从 san 引导整个系统，甚至可以从 SAN 挂载 /。

缺点是您的内核必须在较早的阶段提供 LUN。这在 Linux/UNIX 中是一件容易的事。除此之外，钱很重要。

# python - Python 中的断管不会在 Ubuntu Linux 上产生异常

> ID：12371347
> 
> 赞同：0
> 
> 时间：2012-09-11T13:53:46.400
> 
> 标签：python, exception, pipe

这是我昨天匆忙结束的[这个问题](https://stackoverflow.com/questions/12356241/piped-python-script-takes-100-of-cpu-when-reading-from-broken-pipe)的后续行动

我有两个 Python 进程与从 stdin 读取的第二个进程一起传输。当馈线进程（将其输出写入标准输出）停止（例如被杀死）时，我希望下面的代码生成异常，正如其他人所建议的那样：

```
 while True:
    try:
        l = sys.stdin.readline()
        ## process l

    except Exception, e:
        ## handle exceptions

    except IOError, e:
        ## handle IO exceptions

        if e.errno == errno.EPIPE:
            ## handle EPIPE exceptions 
```

但是，这不会发生。相反，`sys.stdin.readline()`只需返回一个空的`l`.

所以2个问题：

*   当馈线进程死亡时，是否可以修改此代码以获取异常？
*   我能以某种方式在第二个进程中找到进料器进程的进程 ID 吗？换句话说，如果我的管道是`./step1.py | ./step2.py`我想在 step2 中找到 step1 的进程 ID。我试过`os.getppid()`了，但返回的是运行 step2 的 bach 进程的 id，而不是 step1。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:04:43.440

首先，你为什么还坚持那个`while True:`结构？这是危险的，因为它可能导致无限循环。不`for line in sys.stdin:`适合你吗？

那么，如果你没有得到这个异常，那也不是一件坏事。这只是意味着“进料器”正确地关闭了管道的末端并且消费者注意到了它，这就是为什么 readline() 什么都不返回（一次？经常？它阻塞吗？又是一个无限循环吗？）。

我认为除了显式通信之外，没有一种简洁的方法可以确定刚刚通过管道连接的另一个进程的进程 ID。当然，操作系统会保留这些信息：[https ://serverfault.com/questions/48330/how-can-i-get-more-info-on-open-pipes-show-in-proc-in-linux](https://serverfault.com/questions/48330/how-can-i-get-more-info-on-open-pipes-show-in-proc-in-linux)

我经常将数据通过管道传输到 Python 脚本中，这些脚本通过`for line in sys.stdin`. 这样，当进料过程终止并正确关闭管道的一侧时，循环就结束了。

# php - 除非分隔符出现在引号中，否则在分隔符处爆炸

> ID：12371354
> 
> 赞同：1
> 
> 时间：2012-09-11T13:54:20.687
> 
> 标签：php, csv, explode

我有以下字符串，我需要在以下位置爆炸`,`：

```
$line = 'C13T110,E010,"WF2010/2510/2540 BK,C,M,Y PACK",0,99.99,EP,EP2,.000,' 
```

`,`我遇到的问题是引号内的描述中有许多's 会抛出我的结果数组。

如何分解此字符串以输出以下数组：

```
[0] = C13T110
[1] = E010
[2] = "WF2010/2510/2540 BK,C,M,Y PACK"
[3] = 0
[4] = 99.99
[5] = EP
[6] = EP2
[7] = .000 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:55:41.813

您正在尝试解码 CSV 格式。使用`str_getcsv()`.

在此处查看[文档](http://php.net/manual/en/function.str-getcsv.php)

# iphone - 旋转带有按钮的 UIView

> ID：12371355
> 
> 赞同：1
> 
> 时间：2012-09-11T13:54:23.323
> 
> 标签：iphone, uiview, rotation, imageview

我正在尝试旋转一个 UIview，它在左上角有一个 UIButton 与操作：

`NSLog@"hello";`

现在我将 UIView 旋转 180°，按钮现在位于右下角。但是只有当我按下左上角时按钮才会触发它的动作......所以它就像按钮位置已经改变但它的动作保持在与旋转前相同的位置？

我用`CAKeyframeAnimation`.

```
CAKeyframeAnimation *rotationAnimation;
rotationAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.rotation.z"];

rotationAnimation.values = [NSArray arrayWithObjects:
                            [NSNumber numberWithFloat:0.0 * M_PI], 
                            [NSNumber numberWithFloat:0.75 * M_PI],
                            [NSNumber numberWithFloat:1.5 * M_PI], 
                            [NSNumber numberWithFloat:2.0 * M_PI], nil]; 
rotationAnimation.calculationMode = kCAAnimationPaced;

rotationAnimation.removedOnCompletion = NO;
rotationAnimation.fillMode = kCAFillModeForwards;

rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
rotationAnimation.duration = 10.0;

CALayer *layer = [rotateView layer];
[layer addAnimation:rotationAnimation forKey:@"rotationAnimation"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:33:06.293

使用 CGAFFINETRANSFORM 进行旋转

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.2];
    CGAffineTransform transform=CGAffineTransformMakeRotation(3.14159265);
    yourView.transform=transform;
[UIView commitAnimations]; 
```

# android - 如何在活动完成前处理时在 android 活动中显示加载消息或对话框或图像？

> ID：12371358
> 
> 赞同：2
> 
> 时间：2012-09-11T13:54:37.437
> 
> 标签：android, listview, android-activity, android-asynctask

我有一个`Activity`“A1”和一个`ListActivity`“A2”

我从`Activity`“A1”中的用户那里获取输入，并根据用户给出的输入进行处理并生成结果列表。然后生成的列表将显示在我的`ListActivity`“A2”中。

现在，处理输入和生成结果列表需要一点时间。所以我想在这个时候显示一个加载对话框或加载图像或加载消息，这样用户就不会认为应用程序无所事事。

现在我到目前为止尝试过的事情：是的，我试过了`AsyncTask`！（我知道很多人都会建议它）所以现在我正在一个`AsyncTask`. 我正在显示`ProgressDialog`，`onPreExecute`正在处理`doInBackground`并关闭对话框`onPostExecute`。

但是，对话框出现在`ListActivity`“A2”开始之前。在那之前，`Activity`“A1”似乎被卡住了！

我希望当我单击`Activity`“A1”上的“提交”按钮并继续看到该对话框直到`ListActivity`“A2”出现为止。

如果您需要更多详细信息，请告诉我。谢谢。

-***编辑***-

**onClick**方法中的代码：

```
ProgressDialog progressDialog = new ProgressDialog(this);
progressDialog.setMessage("Processing... Please Wait...");
progressDialog.show();
// Execute task
MyTask myTask = new MyTask(progressDialog);
AsyncTask<String, Void, ArrayList<HashMap<String, String>>> result =
    myTask.execute(userChoice);
Intent intent = new Intent(this, ListActivityA2.class);
// Put results in intent
intent.putExtra("results", resultsList);
// Start result activity
startActivity(intent); 
```

**异步任务**

```
public class MyTask extends
            AsyncTask<String, Void, ArrayList<HashMap<String, String>>> {

        ArrayList<HashMap<String, String>> resultsList =
                    new ArrayList<HashMap<String, String>>();
        ProgressDialog progressDialog;

        public MyTask(ProgressDialog progressDialog) {
            this.progressDialog = progressDialog;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(
                String... params) {
            return doProcess(params[0]);
        }

        @Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
            progressDialog.dismiss();
            super.onPostExecute(result);
        }

        private ArrayList<HashMap<String, String>> doProcess(String choice) {

            // do processing here
            return arrayList;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:03:41.980

我已经解决了这个问题！

我将要创建的代码`Intent`移至`onPostExecute`

这背后的原因：UI线程（`Activity`“A1”）无论如何都在等待`AsyncTask`返回结果，以便它可以显示`ListActivity`“A2”

现在，UI 线程中的创建意图和启动`ListActivity`“A2”可以在不冻结的情况下工作。`onPostExecute`

感谢您的所有帮助@Aswin Kumar！

希望这个问题和答案对其他人有所帮助。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:55:37.647

如果我正确理解您的问题，您希望在单击提交时显示对话框，将其关闭，然后显示填充数据的活动 A2。

所以你可以做到这一点：

1.  开始提交`AsyncTask`_`onClick`

2.  显示`ProgressDialog`

3.  做加工

4.  `onPostExecute`，*将数据保存为要传递给 A2 的对象`Intent`*，关闭对话框，然后使用保存的数据启动列表活动 A2`Intent`

5.  在活动A2中，只需解析传入的数据并显示列表。

# python - 在信号处理程序中使用变量 - 需要全局？

> ID：12371361
> 
> 赞同：34
> 
> 时间：2012-09-11T13:54:39.890
> 
> 标签：python

我有一个信号处理程序来处理 ctrl-c 中断。如果在信号处理程序中我想读取在我的主脚本中设置的变量，在设置变量时是否可以使用“全局”语句？

我不介意这样做，但请阅读这篇文章（[Do you use the "global" statement in Python?](https://stackoverflow.com/questions/146557/do-you-use-the-global-statement-in-python)），其中有人评论说应该没有理由使用 global。

在这种情况下有什么替代方案？

我的代码如下所示：

```
 def signal_handler(signal, frame):
    print "in sig handler - g_var=%s" % g_var

def main():
    global g_var
    g_var = "test"

    time.sleep(120)

if __name__ == '__main__':
    signal.signal(signal.SIGINT, signal_handler)
    main() 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-11T14:08:27.553

您可以使用闭包作为从主脚本获取其状态的信号处理程序：

```
import signal
import sys
import time

def main_function():

    data_for_signal_handler = 10

    def signal_handler(*args):
        print data_for_signal_handler
        sys.exit()

    signal.signal(signal.SIGINT, signal_handler) # Or whatever signal

    while True:
        data_for_signal_handler += 1
        time.sleep(0.5)

if __name__ == '__main__':
    main_function() 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-07-29T19:06:39.910

您可以使用它`partial`来创建“闭包”。

```
import signal
from functools import partial

def signal_handler(g_var, signal, frame):
    print "in sig handler - g_var=%s" % g_var

def main():
    g_var = "test"
    signal.signal(signal.SIGINT, partial(signal_handler, g_var))

    time.sleep(120)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-10-18T12:27:16.583

在面向对象范式 (OOP) 中，为此目的使用 lambda 非常方便。使用 lambdas，您可以传递一些额外的上下文（如*自*引用）和/或摆脱未使用的参数（*信号*、*帧*）。

```
import time
import signal

class Application:

    def __init__( self ):
        signal.signal( signal.SIGINT, lambda signal, frame: self._signal_handler() )
        self.terminated = False

    def _signal_handler( self ):
        self.terminated = True

    def MainLoop( self ):        
        while not self.terminated:
            print( "I'm just doing my job like everyone else" )
            time.sleep( 3 )

app = Application()
app.MainLoop()

print( "The app is terminated, exiting ..." ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:57:28.977

If you're just reading the variable, there should be no need to make the variable "global"

```
def foo():
    print a
a = 3
foo()  #3 
```

global is necessary to allow you to change the variable and have that change propagate into the module namespace.

If you want to pass some state to your callback without using global, the typical way to do this us to use an instance method as the callback:

```
class foo(object):
     def __init__(self,arg):
         self.arg = arg
     def callback_print_arg(self):
         print self.arg

def call_callback(callback):
    callback()

a = foo(42)
call_callback(a.callback_print_arg) #42 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T14:03:38.900

您可以从内联定义的函数中访问外部范围变量，如下所示：

```
my_values = {'foo':'bar'}
def handler(signum, frame):
    for key,val in my_values.items():
        print key,val
    my_values['bat']='baz'
    #remember to use mutable types, like dicts or lists

signal.signal(signal.SIGINT, handler) 
```

# ubuntu - RhodeCode 提供的 Mercurial

> ID：12371363
> 
> 赞同：0
> 
> 时间：2012-09-11T13:54:52.860
> 
> 标签：ubuntu, mercurial, rhodecode

我在 Ubuntu 服务器上设置了 Mercurial 和 RhodeCode。我按照[本手册](https://rhodecode.com/docs/setup.html "RhodeCode 设置说明")的说明启动 RhodeCode。

但是，当我尝试从客户端调用 URL 时，服务器不会响应。我什至没有看到服务器终端上显示任何类型的消息已到达的消息。我试图在我的本地机器上安装 RhodeCode 并调用 127.0.0.1:5000 并且它工作正常。我在控制台中看到日志消息，浏览器显示该页面。有什么我想念的或可以调试的吗？（我也试过 netstat，这个服务正在监听端口 5000）。

# java - Tomcat 7.0.30 不适用于 Resteasy 2.3.4

> ID：12371366
> 
> 赞同：5
> 
> 时间：2012-09-11T13:55:02.860
> 
> 标签：java, tomcat7, resteasy

我使用 resteasy 2.3.4 Final 创建了一个小型 Web 应用程序，并将其部署到 Tomcat 7.0.30。当tomcat启动时，我收到以下错误消息：

```
...
INFO: JSF1048: PostConstruct/PreDestroy annotations present.  ManagedBeans methods marked with these annotations will have said annotations processed.
Sep 11, 2012 9:28:08 PM org.apache.catalina.core.StandardContext filterStart
SEVERE: Exception starting filter org.jboss.resteasy.plugins.server.servlet.Filter30Dispatcher
java.lang.NoClassDefFoundError: javax/enterprise/context/spi/Contextual
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
... 
```

我的 web.xml 如下：

```
<context-param>
    <param-name>resteasy.servlet.mapping.prefix</param-name>
    <param-value>/services</param-value>
</context-param>

<context-param>
    <param-name>resteasy.scan.resources</param-name>
    <param-value>true</param-value>
</context-param>

<servlet>
    <servlet-name>Resteasy</servlet-name>
    <servlet-class>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>Resteasy</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T12:37:59.303

通过删除 resteasy-cdi-2.3.4.Final.jar 解决了问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T08:17:15.643

这也发生在我身上，但是使用 tomcat 7.0.52 和 resteasy-cdi-3.0.6.Final 我从库包中删除了 resteasy-cdi-3.0.6.Final 并且部署得很好

# c# - 如何将未知深度/长度的数组发布到 c#/mvc

> ID：12371367
> 
> 赞同：0
> 
> 时间：2012-09-11T13:55:03.370
> 
> 标签：c#, asp.net-mvc, forms, formcollection

我的背景主要是 PHP，所以我习惯了能够非常轻松地在表单中使用深度数组。我需要的是以下的 c#/MVC 等价物：

```
<input type="text" name="data[0][index_name][0]">
<input type="text" name="data[0][index_name][1]">
<input type="text" name="data[1][index_name][0]">
<input type="text" name="data[1][index_name][1]">
<input type="text" name="data[2][index_name][0][something_else]">
<input type="text" name="data[2][index_name][0]">
<input type="text" name="data[2][index_name][1]"> 
```

然后可以在 php 中以这种方式访问​​这些...

```
$_POST['data'][0]['index_name'][0];
$_POST['data'][0]['index_name'][1];
$_POST['data'][1]['index_name'][0];
$_POST['data'][1]['index_name'][1];
$_POST['data'][2]['index_name'][0]['something_else'];
$_POST['data'][2]['index_name'][0];
$_POST['data'][2]['index_name'][1]; 
```

我试过查看/循环我收到的 formColletion 对象，但键只是名称属性字符串，例如“data[2][index_name][0][something_else]”，并且没有深度数据。

如何解析这些数据并输入一些可用的数据类型？我不知道随着表单在前端动态变化，数组会有多深。

所以你有一些上下文，这将被用来构建一个具有灵活数量的行和列的数据“表”，并且每一行都可以被视为标准行或分组行（意味着它包含其他行），所以理论上，数据可以变得非常深入。

附带说明一下，我还考虑过在客户端清理数据，但似乎没有任何标准支持这一点。Jquery.serialize 和 JQuery.serializeArray() 与 C#/MVC 做同样的事情，只是简单地用全名属性索引所有内容，而不考虑数组索引。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:01:17.543

我不确定深层方面，但是如果您发布具有相同名称的项目，则 MVC 会将其重建为一个数组。

```
<input type="hidden" name="MyArray" value="1"/>
<input type="hidden" name="MyArray" value="2"/>
<input type="hidden" name="MyArray" value="3"/>
<input type="hidden" name="MyArray" value="4"/> 
```

在你的控制器上

```
[HttpPost]
public ActionResult MyActionMethod(string[] MyArray)
{
  // Do stuff with MyArray
} 
```

您还可以访问`Request.Form`控制器中的集合。关键来自 HTML 表单上输入的名称部分。

您可以像这样访问它：

```
Request.Form["data[2][index_name][0][something_else]"] 
```

或者像这样迭代它：

```
[HttpPost]
public ActionResult MyActionMethod()
{
  foreach(var key in Request.Form.Keys)
  {
    var item = Request.Form[key];
    // Do stuff with each item
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T18:13:20.433

模型绑定被证明是正确的解决方案。它支持开箱即用的递归。这是一篇不错的文章：http: [//msdn.microsoft.com/en-us/magazine/hh781022.aspx](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)

# c++ - 使用 C 中的 C++ 重整函数

> ID：12371370
> 
> 赞同：5
> 
> 时间：2012-09-11T13:55:09.437
> 
> 标签：c++, c, name-mangling

我有一个 .lib 文件，我没有它的源代码。

我需要一个导出的函数，但我是用 C 语言编写的，并且该函数是 C++ 名称损坏的。我不会写`extern "C"`，因为我没有源代码。

如何在没有源代码的情况下链接损坏的函数并切换到 C++？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T13:58:11.643

Make C++ wrapper:

**wrapper.cpp:**

```
#include "3rdparty.hpp"

extern "C" int foo(int a, int b)
{
    return third_party::secret_function(a, b);
} 
```

**consumer.c:**

```
extern int foo(int, int);

// ... 
```

**Build:** (e.g. with GCC)

```
g++ -o wrapper.o wrapper.cpp
gcc -o consumer.o consumer.c
g++ -o program consumer.o wrapper.o -l3rdparty 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T13:57:43.423

Write your own C++ wrapper over those functions and declare your wrapper functions with `extern "C"`.

I'm not aware of any other way.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T21:27:31.133

.lib 文件中的损坏名称可以在您的 c 程序中调用。如果您链接到的 .lib 是稳定的，并且不会不断地重新编译/更新，则此解决方案可能对您有用。

我对 Windows 不太熟悉，但[如何查看 Windows 库 (*.lib) 的内容](https://stackoverflow.com/questions/305287/how-to-see-the-contents-of-windows-library-lib)或其他搜索应该显示如何从 .lib 获取此信息

在输出中搜索函数的名称，大多数修改都会保持名称不变，只是用各种其他信息装饰它。

将该名称放在您的 C 代码中，并带有解释性注释...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-20T15:24:16.190

让我们假设您有一个 .c 文件 (FileC.c)，并且您希望调用 .cpp (FileC++.cpp) 中定义的函数。让我们将 C++ 文件中的函数定义为：

```
void func_in_cpp(void) 
{ 
  // whatever you wanna do here doesn't matter what I am gonna say!
} 
```

> 现在执行以下步骤（以便能够从 .c 文件调用上述函数）：

1) 使用您的常规 C++ 编译器（或[www.cpp.sh](http://www.cpp.sh)），编写一个包含您的函数名称（func_in_cpp）的非常简单的程序。编译你的程序。例如

```
$ g++ FileC++.cpp -o test.o 
```

2）找到你的函数的错位名称。

```
$ nm test.out | grep -i func_in_cpp
[ The result should be "_Z11func_in_cppv" ] 
```

3）转到你的C程序并做两件事：

```
void _Z11func_in_cppv(void);  // provide the external function definition at the top in your program. Function is extern by default in C.

int main(void) 
{
    _Z11func_in_cppv();   // call your function to access the function defined in .cpp file
} 
```

# visual-studio-2012 - 在新的 Visual Studio 2012 中找不到“我的工作”

> ID：12371374
> 
> 赞同：13
> 
> 时间：2012-09-11T13:55:13.447
> 
> 标签：visual-studio-2012

我正在使用 Visual Studio 2012 Premium，但在团队资源管理器中找不到“我的工作”部分来暂停我当前的工作。我的 TFS 仍在 2010 版上……是否必须更新才能看到“我的工作”功能？或者如何启用此部分？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-11T20:00:36.213

**我的工作**确实是 VS 高级功能。它确实需要激活 TFS 2012，因为它使用 2012 SDK 的新功能。

在 TFS 2012 上，您将不得不决定合并**工作项**和**待定更改**页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:02:51.743

是的，您需要连接到 TFS 2012 服务器才能看到“我的工作”页面。另外，我相信 My Work 只是一个 VS Premium 功能。如果需要连接 2012 服务器，可以通过将 VS 客户端连接到 tfspreview.com 上的帐户来测试这一点。

# jquery - jquery 两个滑块不同的价格

> ID：12371378
> 
> 赞同：1
> 
> 时间：2012-09-11T13:55:22.713
> 
> 标签：jquery, slider

我现在很困惑：

我有两个滑块：一个是数量，另一个是合同期。如果数量增加，每件的价格就会下降。如果合同期增加，每件价格将下降更多。

我现在有这个： http: [//jsfiddle.net/vBVkL/16/](http://jsfiddle.net/vBVkL/16/) 不知何故，当我使用批量时，我无法更改每件的价格。

```
 qty = ui.value;  //-> this works

    qty = batches[ui.value - 1]; //-> this doesn't work 
```

有人可以帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:07:54.453

在滑块处理程序中更改以下行：

```
$("input").val(prices[contract][qty - 1]); 
```

至

```
$("input").val(prices[contract][ui.value - 1]); 
```

原始代码使用的`qty`是字符串变量。当您尝试从中减去 1 时，它会导致“不是数字”，它不能用于索引`batches`数组。

`prices`你的数组也有问题。它们只包含三个值，但您的滑块可以选择第四个，您需要在这些数组的末尾添加一个值：

```
var prices = {
    'none': [10, 9, 8, ?],
    '12 months': [9, 8, 7, ?],
    '24 months': [8, 7, 6, ?],
    '36 months': [7, 6, 5, ?],
}; 
```

[更新的小提琴](http://jsfiddle.net/vBVkL/20/)

我不确定为什么页面第一次加载时滑块没有正确动画。

**编辑：**

页面加载时滑块不起作用的原因是用于初始化变量的值：

```
var contract = 'Geen' 
```

当滑块移动时，代码尝试在数组`$("input").val(prices[contract][qty - 1]);`中查找值并失败，因此函数因错误而结束，并且 jQueryUI 永远不会完成更新滑块的工作。直到您移动第二个滑块，变量才被正确设置。`Geen``contracts`

将初始值设置`contract`为“无”意味着代码将正确执行并且滑块将动画。

您还遇到了一个错误，即在设置价格时更改合同期限滑块会忽略数量滑块的值。该行：

```
$("input").val(prices[contract][ui.value - 1]); 
```

在“slider2”事件处理程序应更改为：

```
$("input").val(prices[contract][$("#slider1").slider("value") - 1]); 
```

看看[更新后的小提琴](http://jsfiddle.net/vBVkL/25/)，现在一切正常。

# android - 安卓，全球定位系统。每秒获取位置

> ID：12371380
> 
> 赞同：1
> 
> 时间：2012-09-11T13:55:23.957
> 
> 标签：android, gps, location, coordinates

我有这个：

```
public class GpsUpdate extends Observable implements LocationListener  {

private int x_position;
private int y_position;
private float currentAccuracy;
public GpsUpdate(Observer observer){
    addObserver(observer);
}

@Override
public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude() * 1E6);
    int lng = (int) (location.getLongitude() * 1E6);
    setAccuracy(location.getAccuracy());
    setX_position(lat);
    setY_position(lng);
    setChanged();
    notifyObservers();

}
@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

public int getX_position() {
    return x_position;
}
public void setX_position(int x_position) {
    this.x_position = x_position;

}
public int getY_position() {
    return y_position;

}
public void setY_position(int y_position) {
    this.y_position = y_position;
}

public void setAccuracy(float currentAccuracy) {
    this.currentAccuracy = currentAccuracy;
}

public float getAccuracy(){
    return currentAccuracy;
} 
```

}

此方法 (onLocationChanged()) 通知其他类中的另一个方法 (update()) 位置已更改，但即使当前与以前相同，我也需要收集所有坐标。

```
_GPSUPDATE = new GpsUpdate(this);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1, _GPSUPDATE);

    @Override
        public void update(Observable observable, Object data) {
            xCurrent = _GPSUPDATE.getX_position();
            yCurrent = _GPSUPDATE.getY_position();
                     .....
          } 
```

那么，我要添加/更改什么才能每秒获得位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:03:43.470

这是相当糟糕的做法。即使您需要每秒存储位置，然后重新定义您的应用程序逻辑以存储**带时间戳**的位置。这足够了，因为（假设`T`是以秒为单位的增量时间）如果在`T=0`您收到并存储`locationA`时，在`T=2`您收到并存储`locationB`时，如果您想知道在什么位置，`T=1`那么没有看到明确的记录，您知道当时位置没有变化，因此很明显，您的位置等于上次存储的最近的下一个位置`T`，在这种情况下，`T=1`您的位置（仍然）是`locationA`因为它没有改变`T=0`. 这是更好的方法，可以为您节省大量存储空间。如果您将其存储在数据库中，那么获得正确的结果也是微不足道的 - 只需搜索时间戳**小于或等于**所需的条目，按时间戳 desc 排序，限制 1。

# android - 无法登录 Twitter - “访问令牌错误”

> ID：12371382
> 
> 赞同：0
> 
> 时间：2012-09-11T13:55:35.843
> 
> 标签：android, twitter, twitter-oauth, twitter4j

我已经在我的 Android 应用程序中实现了 Twitter。我还实现了登录和注销功能。它工作正常，但是当我再次尝试登录 Twitter 时，它无法正常工作。它给出了以下例外：

```
D/Twitter-WebView(545): Loading URL: https://twitter.com/oauth/authorize
D/dalvikvm(545): GC_FOR_MALLOC freed 13203 objects / 516760 bytes in 74ms
D/NativeCrypto(545): Freeing OpenSSL session
D/Twitter-WebView(545): Redirecting URL twitterapp://connect?oauth_token=Lfbjv4ciEma8bv4XijpY4eeZrkkf735Oz1WX2BtZM&oauth_verifier=fgb9EJUG6qS92Qkk4ZYDYwtJSQzaTKkB4JGOLllv4
I/global(545): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
D/TwitterApp(545): Error getting access token
W/System.err(545): java.lang.IllegalStateException: consumer key/secret pair already set.
W/System.err(545):  at twitter4j.TwitterOAuthSupportBaseImpl.setOAuthConsumer(TwitterOAuthSupportBaseImpl.java:234)
W/System.err(545):  at twitter4j.Twitter.setOAuthConsumer(Twitter.java:54)
W/System.err(545):  at com.twit.sb.more_module.TwitterApp.configureToken(TwitterApp.java:67)
W/System.err(545):  at com.twit.sb.more_module.TwitterApp.access$7(TwitterApp.java:65)
W/System.err(545):  at com.twit.sb.more_module.TwitterApp$3.run(TwitterApp.java:140) 
```

这是我登录和注销 twitter 的代码：

```
if (mTwitter.hasAccessToken()) {
                    onTwitterClick();
                } else {
                    mTwitter.resetAccessToken();
                    mTwitter.authorize();
                }

    private void onTwitterClick() {
        if (mTwitter.hasAccessToken()) {
            final AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Log out from Twitter ?")
                    .setCancelable(false)
                    .setPositiveButton("Yes",new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,int id) {
                                    mTwitter.resetAccessToken();
                                }
                            })
                    .setNegativeButton("No",new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,int id) {
                                    dialog.cancel();
                                }
                            });
            final AlertDialog alert = builder.create();
            alert.show();
        } else {
            mTwitter.authorize();
        }
    } 

    public void authorize() {
        mProgressDlg.setMessage("Initializing ...");
        mProgressDlg.show();

        new Thread() {
            @Override
            public void run() {
                String authUrl = "";
                int what = 1;

                try {
                    authUrl = mHttpOauthprovider.retrieveRequestToken(mHttpOauthConsumer, CALLBACK_URL);    

                    what = 0;

                    Log.d(TAG, "Request token url " + authUrl);
                } catch (Exception e) {
                    Log.d(TAG, "Failed to get request token");

                    e.printStackTrace();
                }

                mHandler.sendMessage(mHandler.obtainMessage(what, 1, 0, authUrl));
            }
        }.start();
    } 
```

# c++ - 如何在linux中指定用于套接字的接口

> ID：12371385
> 
> 赞同：2
> 
> 时间：2012-09-11T13:55:48.820
> 
> 标签：c++, linux, sockets

是否可以将 udp 套接字绑定到特定接口，以便通过该接口发送数据？我有一个使用多个 Udp 套接字发送数据的应用程序，它在具有多个接口的机器上运行。我知道可以通过使用以下代码指定接口名称来做到这一点：

```
int UdpSocket::open(const char *interface)
{
   send_fd_ = ::socket(AF_INET, SOCK_DGRAM, 0);
   if (send_fd_ < 0)
   {
      perror("socket");
      return -1;
   }

   int val = 1;
   int rc = ::setsockopt(send_fd_, SOL_SOCKET, SO_REUSEADDR, &val, sizeof(val));
   if (rc < 0)
   {
      perror("sesockopt");
      close();
      return -1;
   }

   unsigned char ttl = 16;
   rc = ::setsockopt(send_fd_, IPPROTO_IP, IP_MULTICAST_TTL, &ttl, sizeof(ttl));
   if (rc < 0)
   {
      perror("sesockopt_ttl");
      close();
      return -1;
   }

   if (interface != NULL)
   {
      struct ifreq ifr;

      memset(&ifr, 0, sizeof(ifr));
      snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), interface);
      rc = ::setsockopt(send_fd_, SOL_SOCKET, SO_BINDTODEVICE, (void*)&ifr, sizeof(ifr));

      if (rc < 0)
      {
         perror("sesockopt");
         close();
         return -1;
      }
   }

   const int flags = ::fcntl(send_fd_, F_GETFL, 0);
   ::fcntl(send_fd_, F_SETFL, flags | O_NONBLOCK);

   return 0;
} 
```

但这需要应用程序以root权限运行，否则它会抛出一个错误，说“操作不允许”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:32:18.057

最简单，也是迄今为止最理智的方法是添加[`route`](http://linux.die.net/man/8/route)与您的多播目标匹配的（s）：

```
~# route add -net 224.0.0.0 netmask 240.0.0.0 dev eth0 
```

因为操作系统网络堆栈根据路由表为多播数据包选择出站接口。这也适用于监听 - 您只需绑定到组地址，内核就会为您选择正确的接口。您仍然必须像往常一样加入该组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:40:53.843

从手册页：

**SO_BINDTODEVICE**

> 将此套接字绑定到特定设备，如“eth0”，如传递的接口名称中指定的那样。如果名称为空字符串或选项长度为零，则移除套接字设备绑定。传递的选项是一个可变长度的以空结尾的接口名称字符串，最大大小为 IFNAMSIZ。如果套接字绑定到接口，则只有从该特定接口接收到的数据包才会被套接字处理。请注意，这只适用于某些套接字类型，尤其是 AF_INET 套接字。数据包套接字不支持它（在那里使用普通的 bind(2) ）。

这意味着您必须自己从名称中获取接口，可能使用 getifaddrs，然后绑定到该地址。

# java - 从 GWT 项目引用 Eclipse Java 项目

> ID：12371386
> 
> 赞同：1
> 
> 时间：2012-09-11T13:55:52.777
> 
> 标签：java, eclipse, gwt

我已经在eclipse中有一个java项目，我需要在我的GWT项目的*服务器*代码中使用那里的类，也在eclipse中。我有一个包，让我们`com.example`用很多子包来称呼它。

我按照这里的说明进行操作： [Eclipse 3.4 GWT 1.6 project - how to reference source from other projects？](https://stackoverflow.com/questions/951926/eclipse-3-4-gwt-1-6-project-how-to-reference-source-from-other-projects)通过在根包中定义以下文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE module PUBLIC "-//Google Inc.//DTD Google Web Toolkit 1.7.0//EN" "http://google-web-toolkit.googlecode.com/svn/tags/1.7.0/distro-source/core/src/gwt-module.dtd">
<module rename-to='example'>
    <inherits name='com.google.gwt.user.User' />
    <source path="*" />
</module> 
```

在 GWT XML 文件中，我添加了

```
<inherits name="com.example" /> 
```

但我不断得到

```
java.lang.NoClassDefFoundError 
```

对于定义在`com.example`

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:58:31.960

If you only want to reference classes for use on the server-side (i.e. not by GWT actually), then you don't need all that stuff. The GWT modules are only about client-side code to be processed by the DevMode and ultimately the GWT Compiler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:25:12.737

我有一个类似的项目设置，除了我使用的是 get 2.3，它可以正常工作。但我收到如下警告消息；

```
 [WARN] Server class '<CLASS_IN_OTHER_PROJECT>' could not be found in the web app, but was found on the system classpath
   [WARN] Adding classpath entry 'file:/workspace/<OTHER PROJECT>/src/' to the web app classpath for this session
For additional info see: file:/Downloads/gwt-2.3.0/doc/helpInfo/webAppClassPath.html 
```

可能是您使用的是旧版本的 gwt，它没有上述解决方法。[您可以在此处](http://google-web-toolkit.googlecode.com/svn/trunk/distro-source/core/src/doc/helpInfo/webAppClassPath.html)查看上述警告消息中提到的信息。

总而言之，据说；

> 所有服务器类和依赖项都应该放在你的war目录中：库（jars）应该放在war/WEB-INF/lib/中，不在jars中的类应该放在war/WEB-INF/classes中/。

因此，我想如果您将实用程序项目（服务器端类所依赖的项目）导出为 jar 文件并将其放入模块的 war/WEB-INF/lib/ 文件夹中，您将不会遇到问题。

# c# - 弹出位置到右下角

> ID：12371388
> 
> 赞同：1
> 
> 时间：2012-09-11T13:55:54.720
> 
> 标签：c#, wpf

我有一个 ToggleButton，当单击它时，将其设置`IsActionMenuOpen`为 true，以便可以显示弹出窗口。我想要的结果是弹出窗口的位置会像[这里](http://img1.imagilive.com/0311/combo_right.png)一样在右下角。关于如何做到这一点的任何想法？此外，如果正在调整窗口大小，是否可以找到解决方案以使弹出窗口也移动？

```
<ToggleButton x:Name="PART_TGAction">
                        <ToggleButton.Template>
                            <ControlTemplate>
                                <TextBlock x:Name="PART_SubjectActions"  
                                        Text="Actions" 
                                        Margin="4,0,0,0" 
                                              PreviewMouseLeftButtonDown="PART_SubjectActions_PreviewMouseLeftButtonDown"
                                        />
                            </ControlTemplate>
                        </ToggleButton.Template>
                    </ToggleButton>
                    <Popup IsOpen="{Binding IsActionMenuOpen, Mode=OneWay}" 
                             x:Name="PART_Popup">
                        <Border Background="White">
                            ......
                        </Border>
                    </Popup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:23:54.110

通过将它放在 UserControl 的 Loaded 事件中，我能够让它工作：

```
PART_Popup.CustomPopupPlacementCallback += (Size popupSize, Size targetSize, Point offset) => new[] { new CustomPopupPlacement() { Point = new Point(targetSize.Width - popupSize.Width, targetSize.Height) } }; 
```

# jquery - jQuery：使用函数而不是 $(document).ready

> ID：12371390
> 
> 赞同：5
> 
> 时间：2012-09-11T13:56:04.943
> 
> 标签：jquery

我在显示排行榜配置文件的网站上使用 Piety 插件。每个配置文件都包含应用 Piety 的不同数量的元素，我发现`$(document).ready`在所有这些元素加载之前触发。

到目前为止，我的解决方案是将 Piety 从`$(document).ready`转移到`$(window).load`- 这对大多数配置文件都非常有用。然而，排行榜顶部的人拥有非常大的个人资料，这造成了相当长的等待，然后`$(window).load`才能开始并完成所有虔诚元素。

`$(window).load`我想知道如果我在加载每个饼图时单独调用它们，而不是等待并让 jQuery 一次性完成所有操作，是否会有任何性能问题。

就像是..

从：

```
$(window).load(function(){
   $("span.pie").peity("pie", { ... })
}); 
```

到：

```
function loadPie(id){
    $("#"+id).peity("pie", { ... })
} 
```

..然后在每个元素之后加载Pie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:13:43.130

如果配置文件在 DOM 准备好后异步加载，那么是的，在加载后对每个配置文件进行初始化是有意义的。$(window).load() 等待页面上的**所有**其他内容（与配置文件相关或不相关）完全加载。

要考虑的一件事是每个实例所需的资源虔诚。根据您拥有的配置文件/饼图的数量，在加载*最后一个*配置文件之后（但在 window.load 之前）一次调用它们可能会更快。我将尝试使用 jsperf 更新它......现在开始工作:)

# delphi - TRoleAuth TDSDataModule 不起作用

> ID：12371392
> 
> 赞同：1
> 
> 时间：2012-09-11T13:56:09.123
> 
> 标签：delphi, authentication, datasnap

`RoleAuth`完成您的工作并拒绝其他联系：

```
[TRoleAuth('ModuleAdmin')]
TAdmin = class(TBaseServerClass) 
```

但这不起作用。为什么？

```
[TRoleAuth('ModuleAdmin')]
TDataModuleEmployee = class(TDSServerModule) 
```

# iphone - GLKit 检测触摸位置

> ID：12371394
> 
> 赞同：2
> 
> 时间：2012-09-11T13:56:22.743
> 
> 标签：iphone, touch, glkit

如何检测 iphone GLKit 3d 对象上的触摸位置？

如果它在物体上？在哪里？

我有由三角形构建的立方体，即使它在对象上，我也需要知道触摸，如果是，在哪里

我的立方体：

```
const Vertex Vertices[] = {
// Front - red
{{1, -1, 1}, {0.89, 0, 0, 1}, {1, 0}},
{{1, 1, 1}, {0.89, 0, 0, 1}, {1, 1}},
{{-1, 1, 1}, {0.89, 0, 0, 1}, {0, 1}},
{{-1, -1, 1}, {0.89, 0, 0, 1}, {0, 0}},
// Back - green
{{1, 1, -1}, {0, 0.92, 0, 1}, {0, 1}},
{{-1, -1, -1}, {0, 0.92, 0, 1}, {1, 0}},
{{1, -1, -1}, {0, 0.92, 0, 1}, {0, 0}},
{{-1, 1, -1}, {0, 0.92, 0, 1}, {1, 1}},
// Left - yellow
{{-1, -1, 1}, {1, 0.92, 0, 1}, {1, 0}}, 
{{-1, 1, 1}, {1, 0.92, 0, 1}, {1, 1}},
{{-1, 1, -1}, {1, 0.92, 0, 1}, {0, 1}},
{{-1, -1, -1}, {1, 0.92, 0, 1}, {0, 0}},
// Right - blue
{{1, -1, -1}, {0, 0, 0.89, 1}, {1, 0}},
{{1, 1, -1}, {0, 0, 0.89, 1}, {1, 1}},
{{1, 1, 1}, {0, 0, 0.89, 1}, {0, 1}},
{{1, -1, 1}, {0, 0, 0.89, 1}, {0, 0}},
// Top
{{1, 1, 1}, {0.35, 0.35, 0.35, 1}, {1, 0}},
{{1, 1, -1}, {0.35, 0.35, 0.35, 1}, {1, 1}},
{{-1, 1, -1},{0.35, 0.35, 0.35, 1}, {0, 1}},
{{-1, 1, 1}, {0.35, 0.35, 0.35, 1}, {0, 0}},
// Bottom
{{1, -1, -1}, {0.35, 0.35, 0.35, 1}, {1, 0}},
{{1, -1, 1}, {0.35, 0.35, 0.35, 1}, {1, 1}},
{{-1, -1, 1}, {0.35, 0.35, 0.35, 1}, {0, 1}}, 
{{-1, -1, -1}, {0.35, 0.35, 0.35, 1}, {0, 0}} 
```

};

const GLubyte Indices[] = { // 前 0, 1, 2, 2, 3, 0, // 后 4, 6, 5, 4, 5, 7, // 左 8, 9, 10, 10, 11, 8, // 右 12, 13, 14, 14, 15, 12, // 上 16, 17, 18, 18, 19, 16, // 下 20, 21, 22, 22, 23, 20 };

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T21:34:10.783

1.  将触摸坐标转换为眼睛空间中的射线，从近平面到远平面。

2.  将立方体的顶点变换到眼睛空间（与渲染时使用的变换相同）。

3.  对变换后的立方体进行光线盒相交测试。

# php - 从选择框中选择选项单击保存按钮执行数据库更新

> ID：12371395
> 
> 赞同：-1
> 
> 时间：2012-09-11T13:56:24.990
> 
> 标签：php, html, sql, forms

我有一个包含三个选项的选择框。选择选项时，请单击“保存”按钮，该按钮在字段上执行数据库更新。这将涉及在一个表单中有两个提交按钮。我在每个提交按钮上创建了不同的操作，这将是保存按钮：

```
if ($_POST['update_status'] == 'Save') {
    $keys = array_keys($_POST['order_status']);
    //perform the database update to change the option value
} 

if(isset($_POST['order_selected'])) {
    //send email 
} 
```

目前，我的每个选项的选择框都嵌入在如下表格中：

```
echo '<select name="order_status[] id="id"">';
echo '<option value = "Pending"  name="order_status['.$i.']" class = "pending"' .        ($row['status'] == 'Pending' ? ' selected=selected' : '') . '>Pending</option>';
echo '<option value = "Approved" name="order_status['.$i.']" class = "approved"' . ($row['status'] == 'Approved' ? ' selected=selected' : '') . '>Approved</option>';
echo '<option value = "Disapproved" name="order_status['.$i.']" class ="disapproved"' .    ($row['status'] == 'Disapproved' ? ' selected=selected' : '') . '>Disapproved</option>';
echo '</select>'; 
```

现在我有更新查询工作，除了它在表格之外并且通过从数据库中发布一个唯一的订单ID然后执行他的更新来工作。但是我只能做'批准'。“待处理”不是问题，因为我在创建订单时已经在数据库中设置了一个标志，默认为待处理。

我不想在表单之外拥有这个功能，我想成为苹果来选择一个下拉项目，点击保存，然后运行数据库更新查询，在同一个表单中更改选择框中的值，如果这是可能的？。

目前，我在表单之外有查询和提交按钮，如下所示：

```
<?php
    if (!empty($_POST)) {
        $id = intval($_POST['approval']);
        $query = "UPDATE Orders SET status = 'Approved' WHERE id = $id";
        mysql_query($query);
    }
    $query = "SELECT ID, Orderno, status FROM Orders WHERE status = '0'";
    $result = mysql_query($query);
?>

<select name="approval">
<?php while ($row = mysql_fetch_assoc($result)): ?>
<option value="<?php echo $row['ID']; ?>"><?php echo $row['Orderno']; ?></option>
<?php endwhile; ?>
</select>
<input type="submit" action ="" value="Approve Order" /> 
```

非常感谢，非常感谢任何关于我应该如何解决这个问题的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:00:11.197

我对您的问题感到很困惑，但是如果您试图在不让用户离开页面的情况下运行数据库查询，然后更新某些 HTML 元素的属性，那么您将不得不使用 AJAX。

# java - SVNKit 库动态用户凭证

> ID：12371402
> 
> 赞同：0
> 
> 时间：2012-09-11T13:56:46.207
> 
> 标签：java, svn, tortoisesvn, svnkit

有没有办法使用 SVNKit 库作为多个用户签入文件/文件夹，以便在不创建多个 SVNCommitClient 对象的情况下签入 SVN 存储库。这样整个交易就会是单一的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:37:54.287

我不确定我是否理解你的问题。

Subversion 提交是原子的。这意味着所有提交都已完成，或者没有一个提交。这种原子性适用于单个用户。

如果您有多个用户，则您有多个原子提交。

您可以让您的多个用户组使用相同的登录名和密码，这样您就可以使所有单独的提交成为原子提交，或者您可以分解您的 Subversion 提交，以便您的用户组中的每个人都进行单独的原子提交。

# php - 可以订阅频道的 Node.js 或 PHP 推送器库？

> ID：12371406
> 
> 赞同：3
> 
> 时间：2012-09-11T13:56:56.220
> 
> 标签：php, node.js, pusher

我正在尝试为 Pusher 构建服务器端客户端。客户端应该能够订阅频道并对事件做出反应......从数据库等获取信息后，它应该将信息发送给另一个客户端（Javascript，Arduino）。

问题是我找不到任何能够订阅 Pusher 频道并绑定到事件的服务器端库...

这样的东西已经写了吗？你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T00:14:23.570

在这里 - [https://github.com/abhishiv/pusher-server](https://github.com/abhishiv/pusher-server)

node.js 的推送客户端

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-09T19:12:46.943

由于尚未选择答案，我将回答我在 2014 年 5 月使用的内容： [Pusher Node.js Client](https://github.com/dirkbonhomme/pusher-client-node)

这个库是一个开源客户端，它允许 Node.js 应用程序连接到 Pusher Web 服务。它旨在与 Pusher 的官方 JavaScript 客户端完全兼容并保持最新。Github.com/dirkbonhomme

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:01:46.403

实际上与[Pusher.com 无关](http://pusher.com/)，但您可以查看 faye for node.js。这实际上不是一项不同的服务。你将不得不主持它，我并不是说它比 Pusher 更好或更差。

[http://faye.jcoglan.com/](http://faye.jcoglan.com/)

节点特定[http://faye.jcoglan.com/node.html](http://faye.jcoglan.com/node.html)

您可以在 node.js 中创建服务器。（指南中的示例）

```
var http = require('http'),
    faye = require('faye');

var bayeux = new faye.NodeAdapter({mount: '/faye', timeout: 45});
bayeux.listen(8000); 
```

而客户端在服务器端 node.js 在不同的服务器中，因此您可以发布或订阅频道。（在faye服务器上已经连接了一个客户端）

```
var client = new faye.Client('http://localhost:8000/faye'); 
```

你也可以在浏览器中使用它

```
<script type="text/javascript">
    var client = new Faye.Client('http://localhost:8000/faye');
</script> 
```

# command-line - openSSL 命令行的问题

> ID：12371409
> 
> 赞同：0
> 
> 时间：2012-09-11T13:57:03.680
> 
> 标签：command-line, openssl, certificate, pki

我正在使用 O'Reilly 的 SSL 书籍，它使用 openSSL 作为示例。

创建配置文件后：

```
[ ca ]
default_ca = mobileCA

[ mobileCA ]
dir = /users/crodgers/src/sds2mobile/Server/CA
certificate = $dir/cacert.pem
database = $dir/index.txt
new_certs_dir = $dir/certs
private_key = $dir/private/key.pem
serial = $dir/serial

default_crl_days = 7
default_days = 365
default_md = md5

policy = mobile_CA_policy
x509_extensions = certificate_extensions

[ mobileCA_policy ]
commonName = SDS/2 Mobile Certificate
stateOrProvinceName = Nebraska
countryName = US
emailAddress = designdatamobiledevelopment@gmail.com
organizationName = Design Data

[ certificate_extensions ]
basicConstraints = CA:false

[ req ]
default_bits = 2048
default_keyfile = /users/crodgers/src/sds2mobile/Server/CA/private/key.pem
default_md = md5

prompt = no
distinguished_name = root_ca_distinguished_name

x509_extensions = root_ca_extensions

[ root_ca_distinguished_name ]
commonName = Root Certificate
stateOrProvinceName = Nebraska
countryName = US
emailAddress = designdatamobiledevelopment@gmail.com
organizationName = Design Data

[ root_ca_extensions ]
basicConstraints = CA:true 
```

指示用户输入以下命令：

```
openssl req -x509 -newkey rsa -out cacert.pem -outform PEM 
```

这应该创建一个自签名的根证书。

这个命令给了我 -help 输出。我假设命令中的某些内容不正确，但无法缩小范围。

目前在 Ubuntu 10.04 和 openSSL 0.9.8k 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:42:29.613

您缺少 RSA 密钥大小，例如`-newkey rsa:1024`1024 位密钥。

# sql - 从单月数 SQL 中计算出日期

> ID：12371416
> 
> 赞同：0
> 
> 时间：2012-09-11T13:57:17.720
> 
> 标签：sql, sql-server, sql-server-2008, tsql, date

有 2 个参数`@yr`，并且`@period`,`@period`只是月份数，因此例如 7 月将等于 7。

在我的存储过程表中，我有一个名为的列`Date`，它只是一个标准`datetime`字段。我需要一个`where`子句来计算所有大于当前期间减去 1 年的日期，所以如果`@period = 7 and @yr = 2012`我希望该`where`子句返回大于“01-07-2011”（英国日期格式）的所有日期，我如何仅使用 2来自`@period`和的数字`@yr`。

```
WHERE <br>
Date >= '01-07-2011' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:03:45.813

你可以

```
Date >= dateadd(month, @period-1, dateadd(year, @yr-1900, 0)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:00:03.800

```
where year(date)>year(getdate()-1) and month(date)>@period 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:01:05.263

如果您想要表达式[sargable](http://en.wikipedia.org/wiki/Sargable)，请将其转换为日期时间：

```
declare @year int = 2012
declare @month int = 7

select 
   ...
where [Date] >= convert(datetime, convert(varchar(4), @year) 
                       + right('0' + convert (varchar(2), @month), 2) 
                       + '01') 
```

看到 Alex K. 的回答后，您甚至可以这样做：

```
dateadd(month, @month - 1 + (@year-1900) * 12, 0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:07:14.813

为了获得最佳性能，您应该执行以下操作：

```
declare @yr int = 2012
declare @period int = 7

select ...
from ....
WHERE date >= dateadd(month, (@yr - 1901) * 12 + @period - 1, 0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:08:35.717

只是要确保您与整个日期进行比较，我提供的一种解决方案是：

```
Select *
  from TheTable
 where date> DateAdd(Year,-1, convert(datetime, '01/'+convert(varchar,@period)+'/' + convert(varchar,@yr))) 
```

要考虑 SQL Server 2012 中的区域格式差异：

```
Select *
  from TheTable
 where date> DateAdd(Year,-1, DateFromParts(@year,@period,1)) 
```

对于 2012 年之前：

```
Select *
  from TheTable
 Where Date > DateAdd(day, 0, DateAdd(month, @period-1, DateAdd(year, (@yr-1900)-1,0))) 
```

维护@yr-1900 是为了说明从 1900 年开始计算基准日期偏移量，然后减去 1 以计算一年期结束日期

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T14:14:22.193

我们可以通过多种方式做到这一点

尝试一下

```
DECLARE @a VARCHAR(20),
        @b VARCHAR(10),
        @c varchar(4)

SET @b='may'  /*pass your stored proc value */
SET @c='2011'

SET @a='01'+@b+@c
SET DATEFORMAT YDM
SELECT CAST(@a AS DATE)

FOR uk formate

SELECT CONVERT(char,CAST(@a AS DATE),103) 
```

# python - 为什么Python（IronPython）在使用bin这个词时会报告“路径中的非法字符”？

> ID：12371417
> 
> 赞同：8
> 
> 时间：2012-09-11T13:57:22.960
> 
> 标签：python, ironpython, illegal-characters

在 Iron Python 中执行 chdir 命令时出现“路径中的非法字符”错误。这是在我的代码运行时发生的，但即使在 Iron Python 控制台中也存在此问题。我正在使用 nt 模块，因为在代码中 os 模块不起作用（似乎是一个已知问题）。

稍微玩了一下，结果发现“非法字符”实际上是bin这个词。下面是来自控制台的文本，显示我只有在导航到 bin 目录时才会收到错误。

这是示例

```
>>> nt.chdir('c:\Users\xxxxx\Documents\Visual Studio 2010\Projects\xxx')
>>> nt.chdir('c:\Users\xxxxx\Documents\Visual Studio 2010\Projects\xxx\Directory')
>>> nt.chdir('c:\Users\xxxxx\Documents\Visual Studio 2010\Projects\xxx\Directory\bin')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: Illegal characters in path. 
```

更糟糕的是，我将导航到一个完全不同的目录（甚至没有 bin 目录）并尝试导航到子目录“bin”，但我仍然会收到该错误！

有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-11T13:59:00.163

`\`路径分隔符也是一个 python 转义字符。将它们加倍，或者更好的是，使用`r''`原始 python 文字代替：

```
r'c:\Users\xxxxx\Documents\Visual Studio 2010\Projects\xxx'
'c:\\Users\\xxxxx\\Documents\\Visual Studio 2010\\Projects\\xxx' 
```

例如，`\n`是换行符，并被`\t`解释为 TAB。在您的具体情况下，`\b`被解释为退格键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T14:04:47.260

`\`是 Python 字符串中的转义字符。`\b`是退格，这就是为什么它会显示`\bin`：您没有指定目录`Directory\bin`，您正在指定目录`Directory<backspace>in`，这不是合法路径，即使是，也不存在。

您可以通过加倍反斜杠或使用`r`Martijn 建议的指示符来编写字符串。第三种选择是像在所有其他文明操作系统中一样简单地使用正斜杠。Windows 非常乐意使用这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-06T19:20:10.143

Windows 和大多数其他操作系统将识别正斜杠。因此，您可以使用正斜杠，而不是反斜杠、双反斜杠或 r' '（更多关于字符串文字的内容[） 。](http://docs.python.org/release/2.5.2/ref/strings.html)[这里](https://stackoverflow.com/a/647787/2540349)的答案也很详细。

更新： PS：谨慎使用反斜杠和字符串文字。始终检查您的具体情况。在这个[答案中有一个很好的评论](https://stackoverflow.com/a/647787/2540349)

# actionscript-3 - 将参数传递给 addEventListener AS3

> ID：12371418
> 
> 赞同：2
> 
> 时间：2012-09-11T13:57:25.423
> 
> 标签：actionscript-3, flash, events, actionscript

我正在努力传递参数以在 onComplete 事件处理程序上运行。

看来我的问题出在事件上。完整的代码..

我只想从 url 加载图像并传输参数。

这是我的代码：

```
var imageURLRequest:URLRequest = new URLRequest(pic); 
var myImageLoader:Loader = new Loader(); 
myImageLoader.load(imageURLRequest); 

myImageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE,function(evt:Event.COMPLETE){
    doIt(evt, "Shift key was down:")
},false,0, true);

function doIt(evt:Event, msg:String) {
    var myBitmapData:BitmapData = new BitmapData(myImageLoader.width, myImageLoader.height); 
    myBitmapData.draw(myImageLoader); 
    var myBitmap:Bitmap = new Bitmap; 
    myBitmap.bitmapData = myBitmapData; 
} 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:14:17.043

从处理程序内部函数中删除`.COMPLETE`，以便您的侦听器如下所示：

```
myImageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, function(evt:Event)
{
   doIt(evt, "Shift key was down:")
} , false, 0, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:14:58.837

将`Loader`类视为加载器，而不是`DisplayObject`即使它是：

```
var myBitmap:Bitmap;
var contentLoader:Loader = new Loader();
contentLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, handleComplete);
contentLoader.load(imageURLRequest); 

function handleComplete(e:Event):void
{
    myBitmap = contentLoader.content as Bitmap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:47:06.937

首先，正如[Gio](https://stackoverflow.com/a/12371747/1837285)所说，将其删除，`.COMPLETE`因为`evt:Event.COMPLETE`它返回的是 String 而不是函数需要的 Event。

然后，我建议您将引用保留在变量中，以便在正确的时间使用它，而不是将最后一个令人恐惧的不可预测的参数 ( `useWeakReference`) 。一种方法（在回答您的问题时）是：`true``addEventListener()``removeEventListener()`

```
var imageURLRequest:URLRequest = new URLRequest(pic);
var myImageLoader:Loader = new Loader();
myImageLoader.load(imageURLRequest);

var functionDoIt:Function = doIt("Shift key was down:");
myImageLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, functionDoIt);

function doIt(msg:String):Function {
  return function(evt:Event):void {
    // Now you can use both "msg" and "evt" here
    var myBitmapData:BitmapData = new BitmapData(myImageLoader.width, myImageLoader.height);
    myBitmapData.draw(myImageLoader);
    var myBitmap:Bitmap = new Bitmap(myBitmapData);
  }
}

// Remove the listener when you don't need it anymore:
//myImageLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, functionDoIt); 
```

通过阅读[此答案](https://stackoverflow.com/a/13488640)，您可以更好地理解此解决方案。

# symfony - Dependency Injection - What is the best approach?

> ID：12371419
> 
> 赞同：1
> 
> 时间：2012-09-11T13:57:25.537
> 
> 标签：symfony, dependency-injection

**Scenario**

Talk about Symfony2\. I have an entity with his setters and getters. One of this setter is a bit particular, because have to retrieve some related object, do something and write back ralationship.
What came in my mind, for retrieve those objects, is to use the entity manager and repository related to my entity.

**Problem**

I haven't the possibility to access Entity Manager directly from entity. One possible solution is to inject the E.M. into this entity but, as far I know, dependency injection is not recommended for entity.

**Possible solution**

Write a service, inject into it E.M., use service into entity.
**Please pay attention to this**: I can't instantiate my entity elsewhere because a Bundle (SonataAdmin) is responsible for doin' that.

Is this a good way to do it, or exists a better method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:12:37.707

Let's say you're working with the Entity 1\. You need to get entity 2.

I would create a service, with a function which get Entity 1 as a parameter. Give E.M. to this service, and get Entity 2.

Entity file isn't made to such a thing, services are here to help you.

# android - 对象构造函数使用 this 进入可运行对象

> ID：12371422
> 
> 赞同：0
> 
> 时间：2012-09-11T13:57:32.400
> 
> 标签：android, runnable

我正在尝试将对象构造函数调用为可运行但 Eclipse 返回错误。这

```
simpleAdapter = new SimpleStandardAdapter(this, manager, LEVEL_NUMBER, this, headendDataLookup, findViewById(R.id.moduleDetailView)); 
```

不被接受到可运行文件中。问题与此变量有关。日食建议这些变量与 Runnable

```
public void updateTreeView()
    {
        this.runOnUiThread(new Runnable() {
            @Override
            public void run() {
                if (treeView == null)
                    return;
                updateTreeContent();
                simpleAdapter = new SimpleStandardAdapter(this, manager, LEVEL_NUMBER, this, headendDataLookup, findViewById(R.id.moduleDetailView));
                setTreeAdapter(TreeType.SIMPLE);
                setCollapsible(true);
                registerForContextMenu(treeView);
                manager.collapseChildren(null);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:00:01.167

您将需要一个上下文对象。所以使用

```
 ActivityName.this 
```

而不是`this`.

在你的情况下`this`指向`runnable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:35:05.363

这可能会帮助你

```
 simpleAdapter = new SimpleStandardAdapter(ActivityName.this , manager, LEVEL_NUMBER, ActivityName.this , headendDataLookup, findViewById(R.id.moduleDetailView)); 
```

# sql - Multiple stored procedure executions in one call

> ID：12371424
> 
> 赞同：1
> 
> 时间：2012-09-11T13:57:37.713
> 
> 标签：sql, web-applications, sybase

I have a stored procedure in Sybase that takes in a single date but I have to call it for a large time frame. I am calling this from a web application so would be nice to submit one call to the db instead of multiple calls. I am not able to modify the stored procedure, I have to use what is available.

```
 myspcall '1/1/2012' 
```

What I would love to do is something like:

```
execute myspcall '1/1/2012'
UNION
execute myspcall '1/2/2012'
UNION
execute myspcall '1/3/2012'
etc... 
```

I know that is invalid but then I would get one result set for the entire call.

# .net - msbuild 自定义任务在 TFS 中失败并出现 DirectoryNotFoundException

> ID：12371425
> 
> 赞同：1
> 
> 时间：2012-09-11T13:57:38.563
> 
> 标签：.net, tfs, msbuild, tfsbuild, msbuild-task

我一直在构建一个自定义构建任务，它读取 xml 文件，并将内容组合到一个 xml 文件中并将其写入构建的输出目录，我使用 ${OutputPath) 来获取它。

本地构建时构建任务工作正常，xml文件按预期显示。

但是，我已经添加了新的解决方案，因此覆盖了 AfterCompile 目标的 csproj 文件（我也尝试过 AfterBuild）以及我们的主 TFS 构建项目所需的特定自定义任务。TFS 构建现在失败，因为我的自定义任务引发了异常：

> “QBBuildTask”任务意外失败。System.IO.DirectoryNotFoundException：找不到路径“C:*此解决方案的 TFS 构建输出路径*\86\Release\QueryBuilder.xml”的一部分。

请注意 ** 是我为减少 SO 错误大小而添加的。

当我的任务尝试写入时，发布文件夹似乎不存在。

我的问题是，如果任务不存在，我应该让任务创建目录，还是我为 TFSBuild 使用了错误的输出路径变量？

似乎有点奇怪，它在本地正常工作，即使我在尝试构建之前删除了输出文件夹。

请问有人有什么想法吗？

马龙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:28:21.897

结果发现在使用 TFSBuild 时 OutputPath 不正确，因此我的 xml 被随机放置在某个地方，现在使用了使用正确的 TFSBuild 属性“TeamBuildOutDir”的条件属性。

```
<PropertyGroup>
  <OutputPathCond Condition=" '$(TeamBuildOutDir)'=='' ">$(OutputPath)</OutputPathCond>
  <OutputPathCond Condition=" '$(TeamBuildOutDir)'!='' ">$(TeamBuildOutDir)</OutputPathCond>
</PropertyGroup> 
```

这意味着它现在可以在本地和服务器上工作。

以为我会留下这个，以防有人有类似的问题。

# android - HTML form Input with Phonegap Android development in Eclipse

> ID：12371426
> 
> 赞同：3
> 
> 时间：2012-09-11T13:57:39.310
> 
> 标签：android, eclipse, cordova, jquery-mobile, cordova-2.0.0

I have a weird problem. I recently developed an App for ios using Phonegap and Xcode. It went well, they are in the App store, everything worked. One of the elements is a simple email form, written in HTML. It looks like this:

```
<form name="emailformbtn" id="emailformbtn" onsubmit="submitHandler(e);" action="#emailfromBtn">
                    To: <input type="email" name="emailvarto"/>
                    Message:<textarea cols="40" rows="8" id="emailmessagebtn" name="emailmessage">Email Message</textarea>
                    <input type="button" value="send" onsubmit="submitHandler(e);" onclick="emailProcessfromBtn();"/>
                </form> 
```

Works in ios using Phonegap and Jquery mobile. So i decided to convert the app into Android. Converting all the ObjectiveC into Java, and the rest should work because they are both Phonegap/Cordova.

**I am Using Cordova 2.0 and Android 4.1**

A lot of it does, but when I try to touch the input of the emails field, it does nothing, and Eclipse displays the message:

```
The View is not attached to a window. 
```

Its a Phonegap/Cordova element. I'm not even sure what its trying to say. Is there an issue with Android and Jquery mobile, or does touching input fields in Android using phonegap not invoke native Keyboards?

Any direction or advice on this problem would be greatly appreciated.

Just to make things clearer, even though I followed Phonegap's configuration guide tot he letter, Here is the contents of the Activity.java file:

```
package uk.co.testdevelopment.testapp.droidapp;

import android.os.Bundle;
import android.view.Menu;
import org.apache.cordova.*;

public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/index.html");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:26:59.530

你确定你的活动正在扩展`'DroidGap'`而不是`'Activity'`？这绝对听起来很奇怪，看起来更像是科尔多瓦配置的问题，而不是与您的 html 相关的任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:58:45.897

问题似乎出在您指定调用 inflate 的菜单上。对于 ICS 及更高版本，菜单是在应用程序首次运行时创建的，而不是在访问菜单时创建的。我建议删除您的菜单代码以消除查看错误。

顺便说一句：视图必须附加到 Android 视图的根元素，这通常由 DroidGap 处理。DroidGap 也有菜单处理程序，您可能想看看使用菜单插件或使用 CordovaWebView 方法来开发适用于 Android 4.x 的混合应用程序。

# asp.net - ASP.NET WebForms: Asynchronous UpdatePanel?

> ID：12371427
> 
> 赞同：0
> 
> 时间：2012-09-11T13:57:42.430
> 
> 标签：asp.net, webforms, updatepanel

First off, I know that what I am doing here seems entirely impractical and not good design, but I am trying to increase performance in this ASPX that contains 8,000+ lines of markup. Because of the complexity of this page (not to mention messiness) and short deadline, rewriting it to use clientside binding with AJAX/JSON is just not an option, so I have to continue to use serverside binding.

The page I am working on contains around 13 individual sections, each one loading its own entity from the database. Right now, the page initially loads ALL entities synchronously, so you can imagine that this page can sometimes take 5 seconds or longer to load. My goal here is to employ a quick fix that will load these sections only when the section is expanded so that we load only the sections that are requested by the user, thus increasing performance and conserving database resources.

The sample code below should be easy to paste right into a VB.NET WebForm if you're interested in trying this out for yourself. Just name the page `asyncupdatepanels.aspx`.

**The problem:** Overall, my solution is working fairly well. In `cmUpdate_Click`, I use `Threading.Thread.Sleep(2000)` to simulate a call to the database to retrieve data. When you click one of the buttons, it pauses for 2 seconds and then sets the appropriate Panel's .Visible property to True.

The issue occurs when you click one button and then click the the other before the first one is finished updating. For example, if you click `Show Panel 1` then quickly click `Show Panel 2`, only Panel 2 shows even though both button clicks are triggered in the codebehind.

Maybe `asynchronous UpdatePanel` is the wrong term to use here. Regardless, I need to find a way to show the panels as if they were executed in separate asyncronous threads. I want to be able to click these buttons pretty much near the same time and have both panels show.

If anyone has any other solutions to my problem that will not require major changes to the way I bind controls in each section, I'd love to hear it. The method I am using now is pretty much a hack, but it will work for now until we eventually rewrite this whole thing in MVC/c#.

**Edit:** The production code doesn't actually call a Javascript function by use of a button's OnClientClick. Instead, it uses a jQuery accordion. I just wanted to keep the sample code simple. For now, focus on `__doPostBack("<%=cmUpdate.ClientID %>", ButtonId);` regardless of how it's ultimately called.

ASPX

```
<%@ Page Language="vb" AutoEventWireup="false" EnableEventValidation="false" CodeBehind="asyncupdatepanels.aspx.vb" Inherits="JsonJqueryDevex.asyncupdatepanels" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script language="javascript" type="text/javascript">

        function UpdateIt(ButtonId) {
            __doPostBack("<%=cmUpdate.ClientID %>", ButtonId);
            return false;
        }

    </script>
</head>
<body>
    <form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <div>
        <asp:Button ID="cmShow1" Text="Show Panel 1" ClientIDMode="Static" OnClientClick="javascript:return UpdateIt(this.id);" runat="server" />
        <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
            <ContentTemplate>
                <asp:Panel ID="pnl1" Visible="false" runat="server">
                    Panel 1 content
                </asp:Panel>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="cmUpdate" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>
        <asp:Button ID="cmShow2" Text="Show Panel 2" ClientIDMode="Static" OnClientClick="javascript:return UpdateIt(this.id);" runat="server" />
        <asp:UpdatePanel ID="UpdatePanel2" UpdateMode="Conditional" runat="server">
            <ContentTemplate>
                <asp:Panel ID="pnl2" Visible="false" runat="server">
                    Panel 2 content
                </asp:Panel>
            </ContentTemplate>
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="cmUpdate" EventName="Click" />
            </Triggers>
        </asp:UpdatePanel>
        <div style="display: none">
            <asp:UpdatePanel UpdateMode="Conditional" runat="server">
                <ContentTemplate>
                    <asp:Button ID="cmUpdate" runat="server" />
                </ContentTemplate>
            </asp:UpdatePanel>
        </div>
    </div>
    </form>
</body>
</html> 
```

Codebehind:

```
Public Class asyncupdatepanels
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Private Sub cmUpdate_Click(sender As Object, e As System.EventArgs) Handles cmUpdate.Click

        Dim Param As String = Request("__EVENTARGUMENT")

        Threading.Thread.Sleep(2000)

        Select Case Param
            Case "cmShow1"
                pnl1.Visible = True
            Case "cmShow2"
                pnl2.Visible = True
        End Select

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:12:23.337

I would do an AJAX call to your server-side in the `page_load` event of the page where your updated panel is. You would then call the Update method of your update panel when your processing is done.

You won't have to wait for the processing to be done to do whatever you want to do meanwhile.

**Javascript(with jQuery):**

```
function ajaxCall() {
    $.ajax({
        url: "YourPage.aspx"
    });
} 
```

You can process your AJAX call in the `Page_Load` in your .NET.

I know that you said using AJAX wouldn't be a good option, but this is fairly short and simple.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:10:03.497

如何在点击时禁用相应的按钮？

说，

```
function UpdateIt(ButtonId) {
           $('#<%=cmShow1.ClientID %>').attr('disabled', true);
           $('#<%=cmShow2.ClientID %>').attr('disabled', true);
            __doPostBack("<%=cmUpdate.ClientID %>", ButtonId);
            return false;
        } 
```

然后，在您的代码中，在睡眠之后，再次启用它们（cmShow1.Enabled = true / cmShow2.Enabled = true） - UpdatePanel 调用将处理其余部分。

# javascript - JQuery 函数 做某事 - 暂停 - 做其他事

> ID：12371431
> 
> 赞同：1
> 
> 时间：2012-09-11T13:57:48.000
> 
> 标签：javascript, jquery

我正在创建一个函数，我可以在其中执行一些 jquery 代码......然后暂停说...... 5 秒，然后执行其他东西..

像这样的东西：

```
function myFunc() {
    var str1 = 'This is the starting text';
        var str2 = 'This is the ending text';
          $("#label").html(str1);

        //I need a pause here (5000 ms) ---

          $("#label").html(str2);

} 
```

我怎样才能在那里停下来？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:00:47.017

这可以使用 jQuery 的[`queue`](http://api.jquery.com/queue)方法按顺序完成

### jQuery方式：

```
$('#label')
    .queue(function (n) {
        ...your code here...
        n(); //dequeue the next item in the queue
    })
    .delay(5000)
    .queue(function (n) {
        ...your second bit of code here...
        n(); //dequeue the next item in the queue
    }); 
```

虽然了解如何使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)也很好。

这样做的好处`queue`是它默认与`fx`队列一起工作，尽管您可以选择指定不同的队列名称。

### 非jQuery方式：

```
function first() {
    ...your code here...
    setTimeout(second, 5000);
}
function second() {
    ...your second bit of code here...
}
first(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T13:59:38.213

您可以使用超时来处理您的暂停

```
function myFunc() {
    var str1 = 'This is the starting text';
        var str2 = 'This is the ending text';
          $("#label").html(str1);
          var plzwait=setTimeout(function(){  $("#label").html(str2);  }, 5000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T13:59:39.027

不确定您要完成什么，但您可能不应该尝试使其同步并暂停它，这会冻结应用程序。相反，我建议您使用超时，在给定的时间后执行您想要的代码。

```
function myFunc() {
    var str1 = 'This is the starting text';
        var str2 = 'This is the ending text';
          $("#label").html(str1);

          setTimeout(function() { 
             // Do what you want to do after a certain time in here 
             $("#label").html(str2); 
          }, 5000);

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T13:59:50.293

jQuery 有[delay(](http://api.jquery.com/delay/) )，它接受毫秒并与效果一起工作。

这是一个在文本更改以引起注意时淡入的示例。

```
var str1 = "I am the first string";
var str2 = "This is the second string!";
var label = $("#label")
    label.html(str1).delay(5000).fadeOut("fast",function(){label.html(str2)}).fadeIn("slow"); 
```

[jsFiddle 示例](http://jsfiddle.net/6zdhZ/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T14:00:03.487

采用`setTimeout();`

```
function myFunc() {
    var str1 = 'This is the starting text';
        var str2 = 'This is the ending text';
          $("#label").html(str1);

        //I need a pause here (5000 ms) ---
        setTimeout(function(){
         $("#label").html(str2);
        },5000);

} 
```

# arguments - How do I pass a cell argument from a spreadsheet to a custum function as a range?

> ID：12371434
> 
> 赞同：5
> 
> 时间：2012-09-11T13:58:05.410
> 
> 标签：arguments, google-apps-script

I'm trying to get the following function to work by calling it from a spreadsheet cell:

```
=IsFormula(A1)

function IsFormula(aCell) {

  return cell.getFormula().length != 0
} 
```

What should I do?

Dror

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T22:32:45.323

自定义函数只能访问单元格的值，而不是 Range 对象本身。在您的情况下， aCell 将包含单元格的值，这不适用于您的用例。

# java - 如何从ckeditor中删除图像上传？

> ID：12371437
> 
> 赞同：1
> 
> 时间：2012-09-11T13:58:18.360
> 
> 标签：java, ckeditor

我正在使用 ckeditor，我不想通过 ckeditor 添加图像，这就是为什么我想从 ckeditor 中删除图像上传功能![在此处输入图像描述](../Images/cd56bb2c6a3f22c4543f93fecd986cf4.png)

现在我面临另一个问题，删除该链接后，我仍然可以在 firfox 中复制粘贴图像，其余浏览器不能这样工作，我也想删除 firefox 中的复制粘贴功能。请帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:12:29.423

您需要从 Config.js 中的 CKEditor 工具栏或使用该工具栏的任何地方将其删除。转到此链接并阅读文档，您将了解工具栏的自定义。[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Toolbar)

# c# - 在实体框架中将 tinyint 字段表示为枚举

> ID：12371445
> 
> 赞同：4
> 
> 时间：2012-09-11T13:58:45.043
> 
> 标签：c#, linq, entity-framework, entity-framework-5

过去几年我一直在使用 Linq2Sql，并习惯了一些特性，比如在 DB 中有一个`int`or`tinyint`字段，我在 DBML 文件中将其重新定义为枚举类型，因此运行 SQL 非常方便直接与枚举进行比较的查询（请参阅[此处](https://stackoverflow.com/q/1007811/7850)了解我 3 年前关于该主题的问题，以及那里的[答案](https://stackoverflow.com/a/1007872/7850)）。

现在我正在使用 Entity Framework 5 开始一个项目，虽然 EF 似乎已经做了很多 L2S 没有做的事情（例如分离/重新连接），但我很沮丧地看到似乎没有任何简单的事情将此类字段的 C# 类型更改为枚举的方法。

有没有人找到一种方法可以干净地做到这一点，以便我可以进行如下查询：

```
var q = entities.Things.Where(t => t.Status == TStatus.Closed); 
```

（不，我不想强​​制转换`int`或`byte`内联）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:24:20.647

**代码优先**

EF5 Code First 支持 .NET 4.5 上的枚举属性。以下实体将`int`在数据库中创建一个字段：

```
public class Event
{
    public int EventId { get; set; }
    public Status Status { get; set; }
}

public enum Status
{
    Open,
    Closed,
    Pending
} 
```

您可以查询：

```
db.Events.Where(e => e.Status == Status.Pending) 
```

**数据库优先**

正如[这篇文章](https://stackoverflow.com/questions/11595008/enums-ef-5-0-database-first)中所解释的，这就是你如何为 Database First 完成同样的事情。

> 转到模型浏览器并创建一个新的枚举类型，然后转到您希望使用它的任何列并将其类型更改为您刚刚创建的枚举。

# php - 知道是否触发一定百分比的机会的任何想法

> ID：12371447
> 
> 赞同：0
> 
> 时间：2012-09-11T13:58:52.147
> 
> 标签：php

我有一个游戏开发项目，我有一个特定的角色，角色的技能之一是它有 10% 的机会使其攻击加倍。

问：如何触发？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:05:05.190

我希望我理解你的问题：

```
<?php
$random = rand(1,10);
if(($random == 1) || ($random == 2) || ($random == 3))
    $value += $value;
?> 
```

在这里，您有 30% 的机会击中 1、2 或 3.. 如果击中，那么您的价值将翻倍。

**好的，现在你的更新你只需要 10% 的机会？不过没关系：**

```
<?php
$random = rand(1,10);
if($random == 1)
    $value += $value;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:10:53.040

```
function doubleHit($percentChance = 30)
{
    if (mt_rand(1,100) <= $percentChance) {
        return true;
    }

    return false;
}

var_dump(doubleHit(35)); // will return either true / false 
```

请注意，这只是伪随机。另请注意，这[比](http://php.net/manual/en/function.mt-rand.php)`rand()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:01:35.593

例如，这段代码理论上会将值加倍三分之一？我很难理解你。

```
$value = 200;
if (rand(1,3)===1) {
   $value*=2;
} 
```

或者也许这个，百分比：

```
$value = 200;
$percent = 30;
$chance = rand(1, 100);
if ($chance <= $percent) {
    $value *= 2;
} 
```

# c - gcc 中的变量参数是如何实现的？

> ID：12371450
> 
> 赞同：27
> 
> 时间：2012-09-11T13:58:55.377
> 
> 标签：c, gcc, variadic-functions, calling-convention

```
int max(int n, ...) 
```

我正在使用`cdecl`调用约定，调用者在被调用者返回后清理变量。

我有兴趣知道宏是如何`va_end`工作`va_start`的`va_arg`？

调用者是否将参数数组的地址作为第二个参数传递给 max？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-11T14:27:07.517

如果您查看 C 语言将参数存储在堆栈上的方式，宏的工作方式应该会变得清晰：-

```
Higher memory address    Last parameter
                         Penultimate parameter
                         ....
                         Second parameter
Lower memory address     First parameter
       StackPointer  ->  Return address 
```

（注意，根据硬件，堆栈指针可能向下一行，并且可能会交换更高和更低的值）

参数总是像这样存储¹，即使没有`...`参数类型。

`va_start`宏只是设置一个指向第一个函数参数的指针，例如：-

```
 void func (int a, ...)
 { 
   // va_start
   char *p = (char *) &a + sizeof a;
 } 
```

这`p`指向第二个参数。`va_arg`宏执行此操作：-

```
 void func (int a, ...)
 { 
   // va_start
   char *p = (char *) &a + sizeof a;

   // va_arg
   int i1 = *((int *)p);
   p += sizeof (int);

   // va_arg
   int i2 = *((int *)p);
   p += sizeof (int);

   // va_arg
   long i2 = *((long *)p);
   p += sizeof (long);
 } 
```

`va_end`宏只是将值`p`设置为`NULL`.

笔记：

1.  优化编译器和一些 RISC CPU 将参数存储在寄存器中，而不是使用堆栈。参数的存在`...`将关闭此功能并让编译器使用堆栈。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T14:13:35.577

当参数在堆栈上传递时，`va_`“函数”（它们大部分时间被实现为宏）只是操纵一个私有堆栈指针。这个私有堆栈指针从传递给的参数中存储`va_start`，然后`va_arg`在迭代参数时从“堆栈”中“弹出”参数。

假设您`max`使用三个参数调用该函数，如下所示：

```
max(a, b, c); 
```

在`max`函数内部，堆栈基本上是这样的：

```
      +-----+
      | c |
      | 乙 |
      | 一个 |
      | 回复 |
SP -> +-----+

```

`SP`是真正的堆栈指针，它不是真的`a`，堆栈上`b`的`c`那个，而是它们的值。`ret`是返回地址，函数完成后跳转到哪里。

什么`va_start(ap, n)`是获取参数的地址（`n`在您的函数原型中）并从中计算下一个参数的位置，因此我们得到一个新的私有堆栈指针：

```
      +-----+
      | c |
ap -> | 乙 |
      | 一个 |
      | 回复 |
SP -> +-----+

```

当您使用`va_arg(ap, int)`它时，它会返回私有堆栈指针指向的内容，然后通过将私有堆栈指针更改为现在指向下一个参数来“弹出”它。堆栈现在看起来像这样：

```
      +-----+
ap -> | c |
      | 乙 |
      | 一个 |
      | 回复 |
SP -> +-----+

```

这个描述当然是简化的，但显示了原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-10T19:24:22.057

通常，我如何理解 target.def，当使用 ( ,...) 声明函数原型时，编译器会设置一个标有 varargs 标志的解析树并引用命名参数的类型。对于严格的 C 一致性，每个命名参数都应该获得附加的任何附加信息，以在该参数是 va_start 的命名字段并作为可能返回到 va_arg() 时附加设置 va_list，但大多数编译器只是为最后一个命名参数生成此信息. 当函数被定义时，它的序言生成器注意到 varargs 标志被设置并添加必要的代码来设置它添加到帧中的任何隐藏字段，这些字段具有 va_start 宏可以引用的已知偏移量。

当它找到对该函数的引用时，它会为表示 ... 的每个参数创建额外的解析和代码生成树，这可能会引入运行时类型信息的额外隐藏字段，例如数组边界，这些字段附加到 va_start 的字段设置和 va_arg 用于命名参数。该组合树确定生成哪些代码以将参数值复制到框架上，序言设置 va_start 创建从任意或最后命名的参数开始的 va_list 所必需的内容，并且每次调用 va_arg() 都会生成引用的内联代码用于在编译时验证预期返回的任何参数特定隐藏字段是与正在编译的表达式用法兼容的赋值，并执行任何所需的参数提升/强制。

Each of these steps has processor and calling convention dependencies, encapsulated in the config/proc/proc.c and proc.h files, that override the simplistic default definitions of va_start() and va_arg() that assume each argument has a fixed size allocated some distance above the first named argument on a stack. For some platforms or languages parameter frames implemented as separate malloc()s are more desirable than a fixed size stack. Also note these usages are not thread safe; it is unsafe to pass a va_list reference to another thread without unspecified means of ensuring the parameter frame is not made invalid due to function return or abort of the thread.

# java - How to detect the button press on a bluetooth headset

> ID：12371453
> 
> 赞同：1
> 
> 时间：2012-09-11T13:59:11.910
> 
> 标签：java, android

I have been trying to achieve this. I have found this but they don't seem to help me:

[http://android.amberfog.com/?p=415](http://android.amberfog.com/?p=415)

[Registering a headset button click with BroadcastReceiver in Android](https://stackoverflow.com/questions/6287116/android-registering-a-headset-button-click-with-broadcastreceiver)

[https://issuetracker.google.com/issues/36910848](https://issuetracker.google.com/issues/36910848)

No matter what I try when I press the button on my head set the phone display the volume level control instead of being catch by my application and do something. Here is some of the code:

```
public class MediaButtonIntentReceiver extends BroadcastReceiver {

public MediaButtonIntentReceiver() {
    super();
}

@Override
public void onReceive(Context context, Intent intent) {
    Log.i("test1'", "test2");
    String intentAction = intent.getAction();
    if (!Intent.ACTION_MEDIA_BUTTON.equals(intentAction)) {
        return;
    }
    KeyEvent event = (KeyEvent) intent
            .getParcelableExtra(Intent.EXTRA_KEY_EVENT);
    if (event == null) {
        Log.i("test3'", "test4");
        return;
    }
    int action = event.getAction();
    if (action == KeyEvent.ACTION_DOWN) {
        // do something
        Log.i("test5'", "test6");
    }
    abortBroadcast();
}
}

public class MainActivity extends Activity {

private static final String TAG = "BTAudioActivity";

private MediaPlayer mPlayer = null;
private AudioManager amanager = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    amanager = (AudioManager) getSystemService(AUDIO_SERVICE);
    amanager.setBluetoothScoOn(true);
    amanager.startBluetoothSco();
    amanager.setMode(2);

    mPlayer = new MediaPlayer();

    try {
        mPlayer.setDataSource(new FileInputStream("/sdcard/sample.wav")
                .getFD());
        mPlayer.prepare();
        mPlayer.setVolume(8,8);

        mPlayer.start();

    } catch (Exception e) {
        Log.e(TAG, e.toString());
    }
}
    @Override
protected void onResume() {
    // TODO Auto-generated method stub
MediaButtonIntentReceiver mMediaButtonReceiver = new MediaButtonIntentReceiver();
IntentFilter mediaFilter = new IntentFilter(Intent.ACTION_MEDIA_BUTTON);
mediaFilter.setPriority(1000);
registerReceiver(mMediaButtonReceiver, mediaFilter);
    super.onResume();
}

@Override
public void onDestroy() {
    mPlayer.stop();
    amanager.setMode(2);
    amanager.setBluetoothScoOn(false);
    super.onDestroy();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T15:10:04.527

[尝试在 onCreate... 中注册并使用它](https://stackoverflow.com/questions/10768407/get-phone-off-sleep-in-receiver)添加电源管理器 wake_lock

# java - HashMap: containsKey() Not true when it should be?

> ID：12371454
> 
> 赞同：5
> 
> 时间：2012-09-11T13:59:17.670
> 
> 标签：java, encryption, jvm, hashmap, obfuscation

I am currently throwing an obfuscation program for school homework together. I am trying to make the program read a file and then create a new file that replaces each letter in the file with some a corresponding value that I pull from a `HashMap`. I set up a whole bunch of keys and values, but later in the process of writing the new file I try to check if the map contains a key before appending to the new `String`. The characters that are checked are in fact in the file that I am reading from to test, and the file is read correctly. Yet it fails with the `encryptionDict.containsKey()` (my hashmap) method.

I hope some Java expert can help me figure this out! I'm pretty clueless, I'm more of a C and D guy. The only thought that struck me was that it would be something like with Strings where `"foo" != "foo"`. But chars aren't objects.

The code is in a pastebin below, the key parts to look at is the class constructor, the method encrypt, and the method `initDictionary`, also can someone tell me why `HashMap<char, String>` is invalid, is it because I have to use an object?

The code: [http://pastebin.com/NcHTHPfw](http://pastebin.com/NcHTHPfw)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:02:02.550

```
 private HashMap<char [], String> initDictionary() {
                HashMap<char [], String> d = new HashMap<char [], String>();

                d.put("a".toCharArray(), "!\"#¤");
                d.put("b".toCharArray(), "¤#\"!");
                d.put("c".toCharArray(), "\"#¤%");
                d.put("d".toCharArray(), "%¤#\"");
                d.put("e".toCharArray(), "#¤%&");
                d.put("f".toCharArray(), "&%¤#");
                d.put("g".toCharArray(), "¤%&/");
                d.put("h".toCharArray(), "/&%¤");
                d.put("i".toCharArray(), "%&/(");
                d.put("j".toCharArray(), "(/&%");
                d.put("k".toCharArray(), "&/()");
                d.put("l".toCharArray(), ")(/&");
                d.put("m".toCharArray(), "/()=");
                d.put("n".toCharArray(), "=)(/");
                d.put("o".toCharArray(), "()=?");
                d.put("p".toCharArray(), "?=)(");
                d.put("q".toCharArray(), ")=?!");
                d.put("r".toCharArray(), "!?=)");
                d.put("s".toCharArray(), "=?!\"");
                d.put("t".toCharArray(), "\"!?=");
                d.put("u".toCharArray(), "?!\"#");
                d.put("v".toCharArray(), "#\"!?");
                d.put("w".toCharArray(), ";:*^");
                d.put("x".toCharArray(), "^*:;");
                d.put("y".toCharArray(), ":*^>");
                d.put("z".toCharArray(), ">^*:");
// etc. 
```

这是有问题的一点。您不能在 Java 中使用数组作为哈希键，因为 Array 不会覆盖 equals() 和 hashCode() 方法。

hashCode 用于查找包含您要查找的对象的正确存储桶，equals() 方法比较实际的对象。要使用 HashMap，您需要以合理的方式覆盖这两个方法，因为数组类是最终的，所以您不能这样做。因此，如果您绝对坚持使用 char 数组，您唯一能做的就是使用包装类作为具有 char 数组的键。

像这样的东西：

```
public class Key {
    private final char[] array;

    public Key(final String string) {
        this(string.toCharArray());
    }
    public Key(final char[] array) {
        this.array = array;
    }

    public char[] getArray() {
        return array;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        Key key = (Key) o;

        if (!Arrays.equals(array, key.array)) return false;

        return true;
    }

    @Override
    public int hashCode() {
        return array != null ? Arrays.hashCode(array) : 0;
    }
} 
```

现在您可以从 a或 a获得 a`Map<Key, String>`和 bould 一个`Key`对象`String``char[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:02:41.027

问题是所有`char[]`内容都是独一无二的，无论其内容如何。看来您真的想使用字符串。通常，您可以编写这样的程序，而无需使用`char[]`

相反，你可以写

```
private Map<Character, String> initDictionary() {
Map<Character, String> d = new HashMap<Character, String>();

d.put('a', "!\"#¤");
// etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:03:47.093

不要使用数组作为键，它们不可比较，所以比较时值不匹配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:10:11.290

您正在使用`HashMap<char [], String>`. 这不起作用`.equals`，`.hashCode`也没有在数组上定义。这个简单的测试程序验证了这一点：

```
public static void main(String[] args) {
  char[] a = String.valueOf('a').toCharArray();
  char[] b = String.valueOf('a').toCharArray();

  System.out.println(a.hashCode() == b.hashCode());
} 
```

您可以将 a`Map<Character, String>`用于您的目的。另一种解决方案是使用索引的数组 String[MAX_INDEX] `filecontent.charAt(index)`- 如果 MAX_INDEX 在您的情况下很小（如“z”），这可能会更简单。

# mysql - MySQL在多行上查询不同的ID

> ID：12371456
> 
> 赞同：0
> 
> 时间：2012-09-11T13:59:19.603
> 
> 标签：mysql

MySQL 表“功能”

```
prop_id    name
----------------------------
1          Wifi
2          Off Road Parking
1          Off Road Parking
2          Close to beach
3          Close to Pub
1          Close to Pub 
```

prop_id 是该属性的另一个表中的 id

我想做的是获取他们拥有“Wifi”和“靠近酒吧”的所有属性的ID

所以在这种情况下，我希望它只返回 1

希望我有道理！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:04:32.237

有几种方法可以实现这一点，一种丑陋的方法是：

```
select prop_id from features
   where name = 'Wifi' and prop_id in (
       select prop_id from features where name = 'Close to Pub'
       ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:00:59.073

使用 SELECT DISTINCT。

```
SELECT DISTINCT prop_id FROM table WHERE name="Wifi" or name="Close to pub" 
```

# c# - Stoping the generation of duplicate of the output file

> ID：12371457
> 
> 赞同：0
> 
> 时间：2012-09-11T13:59:20.713
> 
> 标签：c#, excel, vba, winforms

I have an application where I generate Report at the end of all the materials, by Hitting generate Report button. The report is generated in Excel format. The problem is that whenever I create one report, I can create another report with the same name on the same location. It basically overrides the first report.

I want to give the user a box saying that you can generate a report with the same name or the name already exists and choose a different name.

Thanks for the help!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:04:19.100

就在您保存文件之前，您应该知道要将其保存为的文件名。如果是这样，那么只需测试文件是否已经存在。如果确实如此，则提示用户输入新名称并将其保存为新名称，例如

```
string filename = @"C:\File.txt";

if(File.Exists(filename)){
    // Prompt for new one.
    // save the report to the new name instead.    
}else
{
   // save to filename
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:17:24.147

我总是按照 DarkXphenomenon 的建议做，我在表单的文件名上附加了一个温和的时间戳：

```
<filename>_YYMMDD_HHMMSS.ext 
```

虽然这并不适用于所有情况，但它有很多优点：

1.  它很简单，而且很有效

2.  它使我不必为与用户来回切换名称、覆盖、重命名、取消等而编写各种回转操作。通常深入到从未打算拥有用户界面的代码中。

3.  它使自动化变得更加容易。

4.  它使测试更容易。

5.  它使诊断用户问题变得更容易：文件的创建时间或创建顺序毫无疑问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:03:55.890

在保存文件之前如何检查具有此名称的文件是否已经存在，如果存在，请提供重命名文件。像这样的东西：

```
if(File.Exists(proposedFileName)){
   showDialog("file exists, please choose other name");
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T14:04:38.553

在创建报告之前，您可以遍历现有文件并检查名称是否已经存在并给出正确的错误消息。

```
 string newFileName = "new file";
            string[] fileNames = Directory.GetFiles("path");

            foreach (string file in fileNames)
            {
                if (file == newFileName)
                {
                    MessageBox.Show("Error");
                    break;
                }
            } 
```

# javascript - 基于坐标显示 IMAGE Over IMAGE

> ID：12371461
> 
> 赞同：3
> 
> 时间：2012-09-11T13:59:36.937
> 
> 标签：javascript, jquery, coordinates

![在此处输入图像描述](../Images/78457968e7768ec858491a5d804a9177.png)

我正在根据我已经在数组中添加的 css 位置在地图上一一添加点。

```
var postop =[{'top':'23'},{'top':'84'},{'top':'54'},{'top':'76'},{'top':'103'}];
var posleft =[{'left':'23'},{'left':'34'},{'left':'34'},{'left':'56'},{'left':'103'}]; 
```

但我想根据坐标在地图上一一添加点。

```
var coordsx =[{'x':'155'},{'x':'338'},{'x':'236'},{'x':'196'},{'x':'171'}];    
var coordsy =[{'y':'238'},{'y':'328'},{'y':'488'},{'y':'164'},{'y':'439'}]; 
```

[**我在这里试过**](http://jsfiddle.net/sureshpattu/atqJH/2/)

我的脚本在这里：

```
var position = 0;
var postop =[{'top':'23'},{'top':'84'},{'top':'54'},{'top':'76'},{'top':'103'}];
var posleft =[{'left':'23'},{'left':'34'},{'left':'34'},{'left':'56'},{'left':'103'}];

$(postop).each(function(i){
var dots=$('<img src="http://i.imgur.com/iAfzQ.jpg" />');
        dots.css('position','absolute');
        dots.offset({ top: postop[position].top, left: posleft[position].left });           
        $("#overlay-dots").append(dots);
        position++;
        i++;
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T17:39:11.297

我会将坐标放入数组数组中。此外，您不需要增加变量，因为 jquery`each`会为您执行此操作。简化的代码是这样的：

```
var coords = [[23, 23], [34, 84], [34, 54], [56, 76], [103, 103]];

$(coords).each(function(i){
    var pos = this;
    var dot = $('<img src="http://i.imgur.com/iAfzQ.jpg" />');
    dot.css({
        position: 'absolute',
        left: pos[0] + "px",
        top: pos[1] + "px"
    });
    $("#overlay-dots").append(dot);
});​ 
```

# php - .htaccess 将文件请求重定向到 PHP

> ID：12371464
> 
> 赞同：0
> 
> 时间：2012-09-11T13:59:41.790
> 
> 标签：php, .htaccess, mod-rewrite

我需要将 *.pe 文件的请求重定向到 admin.php 并将请求的文件作为参数传递。

例如：用户请求“site.com/dir/file.pe”，它将被重定向到“admin.php?file=file.pe”

我试过了：

```
<files *.pe> 
ErrorDocument 403 /login/db/admin.php?file=%{REQUEST_FILENAME}
Order allow,deny
Deny from all
Satisfy All
</files> 
```

但 PHP 的 $_GET['file'] 返回 "%{REQUEST_FILENAME}"

.htaccess 没有传递名称，它传递 %{REQUEST_FILENAME} 作为字符串，而不是 var。

我怎样才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:05:20.413

您可以在 .htaccess 中尝试。

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\.pe$ admin.php?file=$1.pe 
```

# css - CSS3 3D关键帧变换不能暂停

> ID：12371465
> 
> 赞同：1
> 
> 时间：2012-09-11T13:59:44.437
> 
> 标签：css

在 Android webkit 浏览器 (4.x) 中触发操作时，我遇到了停止关键帧转换的问题。

假设我们有这个 CSS（使红色框无限旋转）：

```
#test
{
    width:150px;
    height:150px;
    background:red;
    position:absolute;
    -webkit-transform: translate3d(48px,95px,0px);
    top:0px;
    left:0px;
    -webkit-animation-name: mymove;
    -webkit-animation-play-state: running;
    -webkit-animation-timing-function: linear;
    -webkit-animation-duration: 5s; 
    -webkit-animation-iteration-count: infinite ;
    -webkit-animation-fill-mode: forwards; 
}

@-webkit-keyframes mymove 
{
    0%   { -webkit-transform: translate3d( 48px, 95px, 0px ) rotate( 0deg ) ;}
    100% { -webkit-transform: translate3d( 48px, 95px, 0px ) rotate( 360deg ) ;}
} 
```

在 HTML 中，我有 id 为“test”的 div，并且 onTouchStart 操作试图使用 JS 停止旋转（没有运气）

```
this.style.webkitAnimationPlayState = 'paused' 
```

`-webkit-transform: translate3d( 48px, 95px, 0px );` 如果用这个改变这个问题就解决了`-webkit-transform: translate( 48px, 95px );` 虽然，我需要 3D 变换。否则，由于我创建了许多对象，我会遇到许多性能问题。

提前致谢

# c# - 连接到电脑上的蓝牙耳机

> ID：12371467
> 
> 赞同：3
> 
> 时间：2012-09-11T13:59:50.023
> 
> 标签：c#, .net, command-line, bluetooth, headset

我有一个振动耳机，它会在来自移动设备的来电时振动。我想用我的电脑连接这个耳机，并像接到电话一样向它发送“来电信号”。

这如何通过命令行或 .net (C#) 来完成？

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:39:57.867

我发现唯一可能对您有所帮助的是[32Feet 库，](http://inthehand.com/content/32feet.aspx)[那里](http://32feet.codeplex.com/discussions/topics/5276/bluetooth-microsoft)可以找到关于您的问题主题的讨论， 希望对您有所帮助！

# javascript - 重新排序 HTML 元素并更改内容

> ID：12371471
> 
> 赞同：0
> 
> 时间：2012-09-11T13:59:49.930
> 
> 标签：javascript, jquery

我想重新排序显示网页的某些元素。按照[这个问题](https://stackoverflow.com/questions/3071701/change-div-order-with-jquery)的答案，我有以下代码：

```
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

        <script>
        function reorder() {
            var grp = $(".myItems").children();
            var cnt = grp.length;

            var temp,x;
            for (var i = 0; i < cnt; i++) {
                temp = grp[i];
                x = Math.floor(Math.random() * cnt);
                grp[i] = grp[x];
                grp[x] = temp;
            }
            $(grp).remove();
            $(".myItems").append($(grp));
        }
        </script>
    </head>

    <body onload="reorder();">
    <div class="myItems">
     <div class="item" title="Row 1">1</div>
     <div class="item" title="Row 2">2</div>
     <div class="item" title="Row 3">3</div>
    </div>
    </body>
</html> 
```

我遇到的问题是我还需要根据`<div>`标签出现的顺序修改标签的内容。`title`在此示例中，我需要更改标记中的行标识符。

例如，刷新后，可能的结果是：

```
 <div class="myItems">
     <div class="item" title="Row 1">2</div>
     <div class="item" title="Row 2">1</div>
     <div class="item" title="Row 3">3</div>
    </div> 
```

或者

```
 <div class="myItems">
     <div class="item" title="Row 1">3</div>
     <div class="item" title="Row 2">2</div>
     <div class="item" title="Row 3">1</div>
    </div> 
```

请注意，标题的顺序保持不变，而显示的数字会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:04:03.923

`grp`在你随机化它们之后循环遍历，对于每个，将属性重置`title`为`'Row '+i`, where `i = index in array + 1`。
如果您这样做，您可以在随机步骤中执行此操作

```
grp[i].setAttribute('title','Row '+(i+1));
grp[x].setAttribute('title','Row '+(x+1)); 
```

这导致调用`.setAttribute`更多次，但需要少一个循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:05:41.440

在之前添加`$(grp).remove()`：

```
for(var i = 0; i < cnt; i ++) {
    grp[i].title = "Row " + (i + 1);
} 
```

# android - 无法在 Galaxy nexus 果冻豆上播放 mp4

> ID：12371479
> 
> 赞同：1
> 
> 时间：2012-09-11T14:00:14.163
> 
> 标签：android, video-streaming, android-4.2-jelly-bean

我在试图找到一个视频播放器来为我的应用程序在 Galaxy nexus 上播放流时遇到了麻烦。

它适用于除 nexus 之外的所有其他手机。

如果我没有给应用程序添加标签来告诉它它是 url 中的视频，它会给我一个选项屏幕来选择用什么来完成操作，在这个列表中它不会显示视频播放器。（如果我说这是一个视频，我会得到一个找不到类的异常）

有谁知道问题是什么？正如我所说，它可以在除 nexus 之外的其他手机上运行，​​甚至可以在 Galaxy s3 上运行

谢谢

# html - 表格格式困境

> ID：12371480
> 
> 赞同：0
> 
> 时间：2012-09-11T14:00:15.330
> 
> 标签：html

![在此处输入图像描述](../Images/c5fbbc2c4e7ba17372c26d0f7616bbe0.png)

我总是设法把桌子塞满。我想做一个像顶部图像但我得到底部图像：

```
<table>
<tr>
<td>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td></td>
        <td></td>
    </tr>
</td>
<td rowspan="3"></td>
</tr>
</table> 
```

有人可以纠正我的工作。我知道它很懒，但我已经尝试了 6 种组合，但无法找到正确的组合，这变得非常令人沮丧。是否有某种免费工具可用于格式化表格以防止我将来遇到此问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:05:10.473

```
<table border="1">
    <tr>
        <td width="40">&nbsp;</td>
        <td width="40">&nbsp;</td>
        <td width="80" rowspan="3">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <!--<td>&nbsp;</td>-->
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <!--<td>&nbsp;</td>-->
    </tr>
</table> 
```

[**小提琴**](http://jsfiddle.net/xXD3T/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:06:03.753

您的 HTML 无效。您不能`<tr>`作为`<td>`.

试试这个...

```
<table>
  <tr>
    <td></td>
    <td></td>
    <td rowspan="3"></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td></td>
    <td></td>
  </tr>
</table> 
```

# ios - 比较两个文本字段，iOS

> ID：12371482
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:00:20.010
> 
> 标签：ios, cocoa-touch, nsstring, uitextfield

1.  我在一个视图中有两个文本字段。

2.  我保存了一个文本字段`NSSUserDefaults`并加载`NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];`

我尝试用一​​个按钮比较这两个文本字段：

```
if ([st1 isEqualToString: st2])
{
    // do something 
}
else
{
    // do something else
} 
```

当我在我的 iPhone 上运行它进行测试时，我按下按钮，在我写东西之前，他让我 }else} 做一些事情。

当我在写东西之前按下按钮时，我想首先检查这两个文本字段 isEqualToString 。在保存东西之前，在保存之后做

```
if ([st1 isEqualToString: st2])
{
    // do something 
}
else
{
    // do something else
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:23:24.193

```
if([textField1.text isEqualToString:textField2.text])
{
    // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T13:14:17.023

将您的代码替换为：

```
if([str1.text isEqualToString:str2.text])
{
    //do something
}
else
{
    //do something else
} 
```

# apache - 如何使用 htaccess 删除丑陋的 GET 参数？

> ID：12371484
> 
> 赞同：0
> 
> 时间：2012-09-11T14:00:22.893
> 
> 标签：apache, mod-rewrite

我有一个 PHP 网站，它使用 GET 变量来确定它应该做什么......

例如`/index.php?s=about&p=2`

看来我应该能够使用重写规则来更改它，这样我就可以使用如下 URL：

```
/about/2 
```

我怎样才能得到这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:49:56.730

1.  您需要将所有链接更改为`/about/2`.
2.  您需要将任何相对链接调整为绝对链接或将其添加到所有页面的标题中：

    ```
    <base href="/"> 
    ```

3.  将这些规则添加到文档根目录中的 htaccess 文件中，以将漂亮的链接改回丑陋的链接：

    ```
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]+)/([^/]+)/? /index.php?s=$1&p=$2 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]+)/? /index.php?s=$1 [L] 
    ```

4.  为了使搜索引擎可以重新索引您的页面，您需要通过将其添加到同一个 htaccess 文件中来将旧的丑陋的 301 重定向到漂亮的页面：

    ```
    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?s=([^&]+)&p=([^&]+)
    RewriteRule ^index.php$ /%1/%2 [L,R=301]

    RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?s=([^&]+)
    RewriteRule ^index.php$ /%1 [L,R=301] 
    ```

# ruby-on-rails - 使用 ruby on rails 将图像文件上传到 blob 列

> ID：12371486
> 
> 赞同：0
> 
> 时间：2012-09-11T14:00:27.653
> 
> 标签：ruby-on-rails

我的编辑页面中有两个字段 1.domainName 2.logo 当我点击提交按钮时，选择的图片和域名应该更新我尝试下面的表，但它没有更新数据库。

```
<%= form_for(@company, :multipart => true) do |form| %> 
<table style="height: 400px; border: 5px; margin-left: 20px; ">
<tr>
        <td width="40%">
          <%= form.label :domain_name ,"Domain Name"%>
        </td>
        <td>
          <%= form.text_field :domain_name %><%= form.submit "Add Domain" %>
        </td>
  </tr>
<tr>
         <td>
            <%= form.label :company_logo,"Company Logo" %>
         </td>
          <td>
              <%= form.file_field :company_logo %>
          </td>
  </tr>
  </table>

In controller
def update
    @company=Company.find_by_company_id(params[:id])
    if @company.update_attributes(params[:company]) then
      render :text=>"Company Details updated successfully"
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:12:08.937

有什么理由将图像保存在 blob 中吗？您可以使用[回形针](https://github.com/thoughtbot/paperclip)或[carrierwave](https://github.com/jnicklas/carrierwave) gem 上传文件。

可能是它没有更新 blob，因为它需要原始数据，它可能是 tempfile 试试这个

```
company_logo_blob = params[:company][:company_logo].read #or params[:company][:company_logo].tempfile.read    

@company.update_attributes(:domain_name =>params[:company],:company_logo=>company_logo_blob) 
```

# asp.net-mvc-3 - 带有 MVC 3 和 IIS 7 的 elfinder

> ID：12371487
> 
> 赞同：1
> 
> 时间：2012-09-11T14:00:28.963
> 
> 标签：asp.net-mvc-3, iis

我试图在我的 MVC 3 应用程序中使用 elfinder 并使用这个 .NET 连接器：[http](http://elfinderconnectornet.codeplex.com/) : //elfinderconnectornet.codeplex.com/ 用于 elfinder。此连接器与 WebConfig 部分中配置的 http 处理程序一起使用。例如：

对于像这样的网址：192.168.0.17:9002/elfinder.connector?_=1347370006351&cmd=open&target=&init=true&tree=......

我在网络配置中有一个处理程序

```
<system.web>
  <httpHandlers>
    <add verb="*" path="elfinder.connector" type="ElFinder.Connector.Connector" />
  </httpHandlers>
</system.web> 
```

并在 global.asax.cs`routes.IgnoreRoute("elfinder.connector");`中忽略“Controller/Action”路由中的这个 url。

当我在 VisualStudio localhost 中运行此代码时，一切正常，但在 IIS 7 上出现 404 错误。

可能是 IIS 有 httphandlers 的自定义配置？需要检查一些复选框:) 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:22:30.243

我收到了同样的错误，因为我没有对该目录的读取权限。您必须至少授予读取权限才能查看文件夹和文件。

希望能帮助到你。问候。

# iphone - 如何旋转 UIView？

> ID：12371491
> 
> 赞同：2
> 
> 时间：2012-09-11T14:00:52.957
> 
> 标签：iphone, ios, xcode, cocoa-touch, core-animation

Twitter 应用程序是 iPhone 上的标签栏应用程序。任何选项卡中的任何内容都不会旋转，但是，当您单击推文中的链接时，被推到其顶部的视图控制器是允许旋转的。我做过的唯一旋转是倾斜设备、横向或纵向，但我不明白如何使用 2d 转换和动画来旋转视图。

**您如何使用 UIView 的子类旋转任何视图？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T09:24:17.710

您可以使用 UIView 动画和 Transform 方法。对于旋转 90 度：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];

imageView.transform = CGAffineTransformMakeRotation(M_PI_2);

[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:06:11.993

嘿，我在旋转时遇到了类似的问题。我有一个标签栏应用程序，我想保持纵向，但有一个允许所有旋转的视频播放器。

我设法通过对标签栏进行子类化并仅允许纵向旋转，同时将视频播放器连接到允许所有旋转的根视图控制器来相当容易地做到这一点。[在这里](https://stackoverflow.com/questions/8982111/iphone-cannot-rotate-movie-to-landscape-mode-using-mpmovieplayerviewcontroller)查看我的原始帖子。希望对您有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:41:21.360

检查本教程，我认为这就是您想要做的
[http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit](http://www.raywenderlich.com/9864/how-to-create-a-rotating-wheel-control-with-uikit)
[http://www.raywenderlich。 com/5478/uiview-animation-tutorial-practical-recipes](http://www.raywenderlich.com/5478/uiview-animation-tutorial-practical-recipes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-16T09:25:30.413

这对我来说是最好和完美的工作，我认为这是正确的答案。

只需在 toValue 中给出您想要旋转多少次而不是 50 的数字

```
 CABasicAnimation *rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    NSNumber *currentAngle = [CircleView.layer.presentationLayer valueForKeyPath:@"transform.rotation"];
    rotationAnimation.fromValue = currentAngle;
    rotationAnimation.toValue = @(50*M_PI);
    rotationAnimation.duration = 50.0f;             // this might be too fast
    rotationAnimation.repeatCount = HUGE_VALF;     // HUGE_VALF is defined in math.h so import it
    [CircleView.layer addAnimation:rotationAnimation forKey:@"rotationAnimationleft"]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T14:08:42.613

参考 [如何实现 UIViewController 旋转以响应方向变化？](https://stackoverflow.com/questions/2838281/how-to-implement-uiviewcontroller-rotation-in-response-to-orientation-changes)

我通过拥有一个根视图控制器（这可能是一个 UITabBarController）并在它的 viewDidLoad 方法中订阅旋转事件来做到这一点：

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(didRotate:)
                                                  name:@"UIDeviceOrientationDidChangeNotification" 
                                                  object:nil]; 
```

然后在 didRotate: 方法中，我查看旋转发生时哪个视图控制器可见，以及手机的方向：

```
- (void) didRotate:(NSNotification *)notification { 
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];

/*
DEVICE JUST ROTATED TO PORTRAIT MODE

 orientation == UIDeviceOrientationFaceUp ||
orientation == UIDeviceOrientationFaceDown

 */
if(orientation == UIDeviceOrientationPortrait) {

/*
DEVICE JUST ROTATED TO LANDSCAPE MODE
 */
}else if(orientation == UIInterfaceOrientationLandscapeLeft ||
    orientation == UIInterfaceOrientationLandscapeRight) {

}

} 
```

在那个 didRotate: 中，您可以查看哪个是可见的 viewController 并从那里做您想做的事情。

当特定视图控制器可见并且手机旋转为横向时，我会在横向模式下呈现模态视图控制器。如果任何其他视图控制器可见，我将忽略该事件。

我强制我的模态视图控制器在其 viewWillAppear 方法中以横向模式显示 - 如果他们想要，我可以给任何人这个代码。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-11T15:04:53.717

您可以实现**shouldAutorotateToInterfaceOrientation**方法。在 Twitter 应用程序中，我猜他们只允许 tabBarController 的纵向方向，但允许使用此方法在 modalViewController 中横向。在文档中查找它，我认为这很简单。我希望这回答了你的问题！

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-11T14:20:40.857

@Mangesh-Vyas 有一些很好的信息，但并没有完全回答这个问题（正如我所读的那样）。Twitter（以及其他应用程序）呈现的视图可以旋转，而标签栏或导航栏不能旋转的原因是因为它们是以模态方式呈现的。模态呈现的视图不受呈现它们的控制器的允许方向限制。

**编辑：** 也许您期望股票`UIViewController`轮换。如果是这样，那么您将感到失望，因为只有（据我所知）自定义子类可以旋转到任意 interfaceOrientations。以下代码可以解决问题：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOr‌​ientation 
{ 
    return YES;
} 
```

**编辑 2：** 这是使整个事情顺利进行的代码：
AppDelegate.m

```
#import "RotateViewController.h"

@interface AppDelegate () {
    UINavigationController* nc;
}

- (void)pushVC;
- (void)openVC;

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UIViewController* vc = [[UIViewController alloc] init];
    vc.view.backgroundColor = [UIColor blueColor];
    vc.title = @"Root";

    UIButton* b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    b.frame = CGRectMake(50, 150, 220, 40);
    [b.titleLabel setText:@"Push VC"];
    [b addTarget:self action:@selector(pushVC) forControlEvents:UIControlEventTouchUpInside];
    [vc.view addSubview:b];

    b = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    b.frame = CGRectMake(50, 200, 220, 40);
    [b.titleLabel setText:@"Modal VC"];
    [b addTarget:self action:@selector(openVC) forControlEvents:UIControlEventTouchUpInside];
    [vc.view addSubview:b];

    nc = [[UINavigationController alloc] initWithRootViewController:vc];
    UITabBarController* tc = [[UITabBarController alloc] init];
    [tc addChildViewController:nc];

//  uncomment this line to see this work in a nav controller
//  [self.window setRootViewController:nc];
    [self.window setRootViewController:tc];

    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)openVC {
    RotateViewController* rc = [[RotateViewController alloc] init];
    [nc presentModalViewController:rc animated:YES];
}

- (void)pushVC {
    RotateViewController* rc = [[RotateViewController alloc] init];
    [nc pushViewController:rc animated:YES];
} 
```

RotateViewController 是`UIViewController`具有上述`shouldAutorotate`功能的股票子类。 当且仅当它们的每个子视图控制器都返回该方向时，

*Nota bene* 才能旋转到给定的界面方向。 **如果他们的顶**视图控制器返回该界面方向，则可以旋转到给定的界面方向。`UITabBarControllers``YES``UINavigationViewControllers`**`YES`**

# wpf - WPF TreeView - 将展开的项目滚动到视图中

> ID：12371496
> 
> 赞同：3
> 
> 时间：2012-09-11T14:01:14.500
> 
> 标签：wpf, treeview

我正在尝试编写一个自定义 WPF/MVVM TreeView 控件，当父项展开时，它将自动滚动（尽可能多地）子项进入视图。

我发现这篇文章，[WPF TreeView - How to scroll so expand branch is visible](https://stackoverflow.com/questions/2241367/wpf-treeview-how-to-scroll-so-expanded-branch-is-visible)，但似乎只有当树项实际上从 TreeViewItem 下降时才有效。

我的 Tree Item 类只是一个普通的 C# 对象 - 类似于 Josh Smith 的博客[http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)，它们是在 Tree Item 类的 IsExpanded 属性设置器中延迟加载。

进入 OnExpand 事件处理程序，我可以看到原始源是一个 TreeViewItem（由幕后框架创建），它在标题字段中有我的树项对象。此 TreeViewItem 只有 1 个可视子项，即一个网格，而网格又具有 3 个可视子项：ToggleButton、Border 和 ItemsPresenter。

有没有人提示我如何为我的子项目获取相应的视觉组件，然后我可以在其上调用 BringIntoView()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T14:49:37.790

发现了一个非常好的行为，它将所选项目滚动到视图中，位于此处：

不幸的是，这不适用于扩展项目时，但可以根据您的确切要求进行修改。如果您需要任何帮助，请告诉我。

[http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF](http://www.codeproject.com/Articles/28959/Introduction-to-Attached-Behaviors-in-WPF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-05T14:41:52.933

五年在编程方面是很长的时间......

在获得 2500 次观看的徽章后，我最近回到了这个问题。碰巧我不久前在我的博客上发表了一篇关于这些问题的解决方案的帖子 - [http://peregrinesview.uk/wpf-behaviors-part-2-treeview/](http://peregrinesview.uk/wpf-behaviors-part-2-treeview/)。

我知道在 stackoverflow 上通常不会批准仅链接的答案，所以我也会在这里发布关键元素。

1) TreeViewItem 的助手包含两个附加属性，一个用于将所选项目滚动到视图中，另一个用于在项目展开时将尽可能多的子项滚动到视图中。

```
public static class perTreeViewItemHelper
{
    public static bool GetBringSelectedItemIntoView(TreeViewItem treeViewItem)
    {
        return (bool)treeViewItem.GetValue(BringSelectedItemIntoViewProperty);
    }

    public static void SetBringSelectedItemIntoView(TreeViewItem treeViewItem, bool value)
    {
        treeViewItem.SetValue(BringSelectedItemIntoViewProperty, value);
    }

    public static readonly DependencyProperty BringSelectedItemIntoViewProperty =
        DependencyProperty.RegisterAttached(
            "BringSelectedItemIntoView",
            typeof(bool),
            typeof(perTreeViewItemHelper),
            new UIPropertyMetadata(false, BringSelectedItemIntoViewChanged));

    private static void BringSelectedItemIntoViewChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        if (!(args.NewValue is bool))
            return;

        var item = obj as TreeViewItem;

        if (item == null)
            return;

        if ((bool)args.NewValue)
            item.Selected += OnTreeViewItemSelected;
        else
            item.Selected -= OnTreeViewItemSelected;
    }

    private static void OnTreeViewItemSelected(object sender, RoutedEventArgs e)
    {
        var item = e.OriginalSource as TreeViewItem;
        item?.BringIntoView();

        // prevent this event bubbling up to any parent nodes
        e.Handled = true;
    }

    public static bool GetBringExpandedChildrenIntoView(TreeViewItem treeViewItem)
    {
        return (bool)treeViewItem.GetValue(BringExpandedChildrenIntoViewProperty);
    }

    public static void SetBringExpandedChildrenIntoView(TreeViewItem treeViewItem, bool value)
    {
        treeViewItem.SetValue(BringExpandedChildrenIntoViewProperty, value);
    }

    public static readonly DependencyProperty BringExpandedChildrenIntoViewProperty =
        DependencyProperty.RegisterAttached(
            "BringExpandedChildrenIntoView",
            typeof(bool),
            typeof(perTreeViewItemHelper),
            new UIPropertyMetadata(false, BringExpandedChildrenIntoViewChanged));

    private static void BringExpandedChildrenIntoViewChanged(DependencyObject obj, DependencyPropertyChangedEventArgs args)
    {
        if (!(args.NewValue is bool))
            return;

        var item = obj as TreeViewItem;

        if (item == null)
            return;

        if ((bool)args.NewValue)
            item.Expanded += OnTreeViewItemExpanded;
        else
            item.Expanded -= OnTreeViewItemExpanded;
    }

    private static void OnTreeViewItemExpanded(object sender, RoutedEventArgs e)
    {
        var item = e.OriginalSource as TreeViewItem;

        if (item == null)
            return;

        // use DispatcherPriority.ContextIdle, so that we wait for all of the UI elements for any newly visible children to be created

        // first bring the last child into view
        Action action = () =>
        {
            var lastChild = item.ItemContainerGenerator.ContainerFromIndex(item.Items.Count - 1) as TreeViewItem;
            lastChild?.BringIntoView();
        };

        item.Dispatcher.BeginInvoke(action, DispatcherPriority.ContextIdle);

        // then bring the expanded item (back) into view
        action = () => { item.BringIntoView(); };
        item.Dispatcher.BeginInvoke(action, DispatcherPriority.ContextIdle);

        // prevent this event bubbling up to any parent nodes
        e.Handled = true;
    }
} 
```

2) TreeViewItem 的样式包括这些属性

```
<Style x:Key="perExpandCollapseToggleStyle"
       TargetType="ToggleButton">
    <Setter Property="Focusable" Value="False" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ToggleButton">
                <Grid Width="10"
                      Height="10"
                      Background="Transparent">
                    <Path x:Name="ExpanderGlyph"
                          Margin="1"
                          HorizontalAlignment="Left"
                          VerticalAlignment="Center"
                          Data="M 0,3 L 0,5 L 3,5 L 3,8 L 5,8 L 5,5 L 8,5 L 8,3 L 5,3 L 5,0 L 3,0 L 3,3 z"
                          Fill="LightGreen"
                          Stretch="None" />
                </Grid>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="ExpanderGlyph" Property="Data" Value="M 0,0 M 8,8 M 0,3 L 0,5 L 8,5 L 8,3 z" />
                        <Setter TargetName="ExpanderGlyph" Property="Fill" Value="Red" />
                    </Trigger>

                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="ExpanderGlyph" Property="Fill" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="perTreeViewItemContainerStyle"
       TargetType="{x:Type TreeViewItem}">

    <!-- Link the properties of perTreeViewItemViewModelBase to the corresponding ones on the TreeViewItem -->
    <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
    <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
    <Setter Property="IsEnabled" Value="{Binding IsEnabled}" />

    <!-- Include the two "Scroll into View" behaviors -->
    <Setter Property="vhelp:perTreeViewItemHelper.BringSelectedItemIntoView" Value="True" />
    <Setter Property="vhelp:perTreeViewItemHelper.BringExpandedChildrenIntoView" Value="True" />

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TreeViewItem}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"
                                          MinWidth="14" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <ToggleButton x:Name="Expander"
                                  Grid.Row="0"
                                  Grid.Column="0"
                                  ClickMode="Press"
                                  IsChecked="{Binding Path=IsExpanded, RelativeSource={RelativeSource TemplatedParent}}"
                                  Style="{StaticResource perExpandCollapseToggleStyle}" />

                    <Border x:Name="PART_Border"
                            Grid.Row="0"
                            Grid.Column="1"
                            Padding="{TemplateBinding Padding}"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">

                        <ContentPresenter x:Name="PART_Header"
                                          Margin="0,2"
                                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          ContentSource="Header" />

                    </Border>

                    <ItemsPresenter x:Name="ItemsHost"
                                    Grid.Row="1"
                                    Grid.Column="1" />
                </Grid>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="false">
                        <Setter TargetName="ItemsHost" Property="Visibility" Value="Collapsed" />
                    </Trigger>

                    <Trigger Property="HasItems" Value="false">
                        <Setter TargetName="Expander" Property="Visibility" Value="Hidden" />
                    </Trigger>

                    <!--  Use the same colors for a selected item, whether the TreeView is focussed or not  -->
                    <Trigger Property="IsSelected" Value="true">
                        <Setter TargetName="PART_Border" Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}" />
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}" />
                    </Trigger>

                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type TreeView}">
    <Setter Property="ItemContainerStyle" Value="{StaticResource perTreeViewItemContainerStyle}" />
</Style> 
```

# vb.net - 为什么在使用 Worksheets.Visible 时会收到 HRESULT 0x800A03EC？

> ID：12371497
> 
> 赞同：0
> 
> 时间：2012-09-11T14:01:16.500
> 
> 标签：vb.net, excel, excel-interop, worksheet

我一直在试图找出方法来区分加载工作表的excel实例和不加载工作表的excel实例之间的区别

目前我使用代码打开看起来像这样的现有文件：

```
Dim wkbWorkBook as Excel.Workbook
Dim objExcel As Excel.Application

wkbWorkBook = System.Runtime.InteropServices.Marshal.BindToMoniker(filename) 
objExcel = wkbWorkBook.Parent

'To make the excel app visible while working with it: 
objExcel.Visible  = true 
```

我在使用此代码时注意到的是，如果我打开一个存在但未在 excel 中打开的文件，当我使 Excel 应用程序可见时，工作表不可见，但它们确实存在（我可以访问worksheets.count 并且有适当数量的工作表）

我尝试使用 Worksheets.Visible 但我注意到它只有在“可见”值所在的地方有一个 HRESULT 错误。 ![在代码中错误显示在工作表属性中](../Images/627d95e7cb6fdf862f92feb47be7c730.png)

即使工作表可见，当我尝试获取 Visible 属性时也会发生相同的错误（如果我 BindToMoniker() 是当前在 excel 中打开的文件..）

我的部分问题是为什么 BindToMoniker() + Application = workbook.Parent 总是给我一个没有加载任何工作表的 Excel 应用程序。当它像这样时我无法使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:34:06.610

没有保证，但我会说 worksheets.visible -> 不起作用，因为工作表为您提供了工作表列表。

您不能在其上应用 .visible -> 您必须使用 worksheets(1).visible

此外，如果没有任何工作表，这无论如何都会失败。您必须先检查工作表的数量。

另一件事 - 我不知道这是否可以在 vb.net 下使用互操作，但也许你可以通过它们的内部代号访问特定的工作表 - 像这样：

```
pobjExcel.table1.visible 
```

# java - 如何在 FileOutputStream 中使用数组列表

> ID：12371499
> 
> 赞同：1
> 
> 时间：2012-09-11T14:01:19.557
> 
> 标签：java, arrays, arraylist

我有两个字节数组，我把它们放在一个数组列表中。代码在这里：

```
ArrayList al = new ArrayList();    
FileInputStream fis=new FileInputStream(bin);
fis.read(file, 0, 2048);
metas="123456789123";
meta=metas.getBytes();
al.add(meta);
al.add(file); 
```

但是当我尝试把它放在像这样的输出流中时 fos.write(al.toArray());

它给出的错误为

> 没有为 write(Object[]) 方法找到合适的方法 FileOutputStream.write(byte[],int,int) 不适用

可能是什么问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:06:35.580

目前还不清楚你想做什么。如果要在文件中写入两个字节数组，请使用：

```
for(byte[] arr: al) {
    fos.write(arr);
} 
```

# ios - 从 iOS 项目逆向工程的 UML 图

> ID：12371503
> 
> 赞同：5
> 
> 时间：2012-09-11T14:01:31.630
> 
> 标签：ios, xcode, uml, class-diagram

> **可能重复：**
> [如何从 Xcode4 生成 UML 图](https://stackoverflow.com/questions/6079312/how-can-i-generate-uml-diagrams-from-xcode4)

我需要从 iOS 项目创建 UML 图。是否有可以对代码进行逆向工程并创建类图和 UML 的工具。

我有一个我们在过去 1 年中创建的大型项目，现在我们必须创建

文档。

谢谢普拉迪普。

# ios - 在objective-c中查找类的子类

> ID：12371504
> 
> 赞同：9
> 
> 时间：2012-09-11T14:01:32.633
> 
> 标签：ios, objective-c

在 Apple 文档中，有很多类是子类或抽象类。我怎样才能找到哪些类是给定类的子类？

例如：如果我正在查看 UIDummyClassAbstract，我如何找到所有继承 UIDummyClassAbstract 的类？

这将有助于获得更好的概述

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-11T14:09:29.947

它不完全在文档中，但您可以通过这种方式检查类层次结构：

1.  打开“符号导航器”（查找![在此处输入图像描述](../Images/009e3241fe75cd9d872a8109220e4bc7.png)图标）
2.  关闭“仅显示项目定义的符号”选项（![在此处输入图像描述](../Images/04777a65ed552cea2bbd800b79fb91a8.png)窗口底部的图标）
3.  您现在可以检查类树:)

![在此处输入图像描述](../Images/0da6de623e57da1fa00054e49df0123f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:01:57.057

尽管它不是免费产品，但如果您使用 AppCode 而不是 Xcode，这东西相对容易，即使对于您不拥有的类（如在您的示例中）。

**搜索用法**

[![在此处输入图像描述](../Images/3305dba15e75483ddc6c4fc0da293d0a.png)](https://i.stack.imgur.com/eHc7A.png)

# jquery - highcharts 在点击时更改渲染的图像源

> ID：12371506
> 
> 赞同：2
> 
> 时间：2012-09-11T14:01:42.033
> 
> 标签：jquery, highcharts

我创建了一个基于 Highcharts 插件的图表，我在其中渲染了一个图像（一个按钮：“zoom.png”）。

这张图片有一个`onCLick`重置我的`yAxis`价值观的事件。

单击按钮时，我需要更改此图像的来源；然后在第二次单击后将其更改回来。

我设法为第一次单击更改了图像的来源（它更改为“zoom1.png”）；但是当我再次单击该按钮时，它不会恢复为原始源（“zoom.png”）

这是一个示例：**[JsFiddle](http://jsfiddle.net/inadcod/FsLar/)**。

[编辑]：[使用酷 URI 更新 JSFiddle](http://jsfiddle.net/jalbertbowdenii/FsLar/10/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:30:21.137

您正在检查的条件

```
if ($('image').attr('href', 'http://inadcod.com/img/zoom.png')) { 
```

是无效的，因为它前面是

```
chart = new Highcharts.Chart(options); 
```

这将再次使用原始图像（在新创建的图表的加载处理程序中）创建图像，`zoom.png`因此条件始终为真，除了第一次没有图像时。

您需要在此图表之外进行不同的检查，例如布尔变量，您将对其进行检查，然后在每次单击时翻转

[@jsFiddle](http://jsfiddle.net/jugal/z7eyv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:19:23.033

我通过向容器节点添加一个表示缩放的类来作弊。我不确定为什么它不能识别对 href 属性的更新，但这是一种替代方法：

[http://jsfiddle.net/FsLar/4/](http://jsfiddle.net/FsLar/4/)

# php - 长轮询事件

> ID：12371508
> 
> 赞同：0
> 
> 时间：2012-09-11T14:01:59.447
> 
> 标签：php, long-polling

我使用 php 在我的网站上实现长轮询。一切正常，但有一个问题。当我由一个用户打开多个页面时，我无法识别，我应该在该页面上运行什么事件。如果我在某个页面上工作后阻止事件，则该事件在另一个页面上不起作用。如果我不阻止，他们会继续在每一页上无限工作。如果我检查有效页面上的事件，刷新页面后它们仍然可以再次工作。我错过了正确的解决方案，你能帮我吗？

代码不是很好但可以工作

我只需要一个想法如何做到这一点

```
function loadEventAll($uid=0){
    if (isset($_POST['event_log'])){
        $event_log = json_decode($_POST['event_log']); //here event already worked on page
    }
    else $event_log = array();
    for($i=0;$i<25;$i++){            
        $now = time();
        $time = $now;//-$this->triggered_timeout;   

        //sql to cut already worked event
        $noid = array();
        foreach($event_log as $eve){
            if(isset($eve->id)) $noid[] = 'id<>'.$eve->id;
        }
        if (count($noid)) $noid = ' AND ('.implode(' AND ', $noid).') ';
        else $noid = '';   

        //don't try to understand this :)
        $q="SELECT * FROM ig_event WHERE (user_id='$uid' OR user_id=0) AND (((triggered+2>=$time OR triggered=0) AND infinite=0) OR (infinite=1 AND triggered+10<=$time)) AND ($now<time_end or infinite=1) AND time_start<=$time $noid";            
        $link = mysql_query($q); 
        $arr = array();
        if(!$link){ 
            sleep(1);
            continue; // if no event occurring start next iteration
        }
        if (mysql_num_rows($link)){   
            while ($ddd = mysql_fetch_assoc($link)){
                $id = $ddd['id'];
                if ($ddd['direct_call']!=""){ //call js function on page
                    $arr[] = $ddd['direct_call'].':'.$id.':'.$ddd['param'];

                    if ($ddd['success']!=1){
                        if (!$ddd['infinite']) $succ = ' success=1';else $succ='';
                        $ctime = time();
                        $q = "UPDATE ig_event SET $succ,triggered='$ctime' WHERE id='$id'";
                        mysql_query($q);
                    }
                }
                else{ // usually not used
                    if ($this->load->module($ddd['module'])){
                        if (method_exists($this->$ddd['module'], $ddd['action'])){

                            $time = time();                                
                            if (($tarr = $this->$ddd['module']->$ddd['action']($ddd['param'])) and !$ddd['infinite']){                                    
                                $q = "UPDATE ig_event SET success=1 WHERE id='$id'";
                                mysql_query($q);
                            }
                        }
                        else{
                            $q = "UPDATE ig_event SET success=1 WHERE id='$id'";
                            mysql_query($q);
                        }
                        $q = "UPDATE ig_event SET triggered='$time' WHERE id='$id'";
                        mysql_query($q);
                        if (!$ddd['infinite']) $arr[] = 'blank'.':'.$id.':';
                    }    
                }
            }    
            return $arr;
        }  
        sleep(1);
    }  
    return $arr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:42:47.943

这是我们在实时系统中使用的一个想法。当事件发生时，为其添加时间戳。例如

```
id | col1 | col2 | timestamp
------------------------------
 1 | herp | derp | 1347373151
 2 | herp | derp | 1347373152
 3 | herp | derp | 1347373153 
```

现在，当我们开始长轮询时，我们发送我们捕获的最后一个事件的时间，或者它是否是第一个请求 - 当前时间。然后我们构建查询：

```
$q = "SELECT * FROM `table` WHERE `timestamp` < ".$lastCaughtEventTime; 
```

如果你得到任何结果 - 返回它们并退出 php 脚本。js 端应在从结果集中获得具有最高时间戳的答案后立即重复请求。这样，您的查询将最小且快速。示例代码：

```
function poll() {
    $results = [];
    $start = microtime(true);
    $q = "SELECT * FROM `table` WHERE `timestamp` < " . (int) $_POST['timestamp'];
    while (true) {
        $result = mysql_query($q);
        if (mysql_num_rows($result) > 0) {
            $result = returnResults($result);
            break;
        }
        else {
            if (time() - $start > POLLING_TIMEOUT) {
                die('timeout');
            }
            sleep(2);
        }
    }
    echo json_encode($result);
} 
```

# asp.net - 模拟和加密用户帐户以从 ASP.NET 应用程序调用 Web 服务

> ID：12371511
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:05.780
> 
> 标签：asp.net, web-services, encryption, impersonation

我有一个**ASP.NET Web 窗体**应用程序，我需要模拟一个帐户来连接到**Web 服务**。该应用程序始终与同一个帐户连接，并且必须进行加密。

客户是`MyWebServiceClient()`我的代码是：

```
MyWebService.MyWebServiceClient client = new MyWebService.MyWebServiceClient();

client.ClientCredentials.Windows.AllowedImpersonationLevel = System.Security.Principal.TokenImpersonationLevel.Impersonation;
client.ClientCredentials.Windows.ClientCredential = new NetworkCredential(username, password, domain); 
```

而且效果很好。问题是如何加密这些数据。是否可以在 Web 服务绑定中的 web.config 中执行此操作？

```
<security mode="TransportCredentialOnly">
    transport clientCredentialType="Windows" realm="" />
<security> 
```

如果是这种情况，我如何从代码中检索它们？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:12:37.887

Add your credentials to the app settings section. Then encrypt that section using aspnet_regis tool

[How to encrypt one entry in web.config](https://stackoverflow.com/questions/6224732/how-to-encrypt-one-entry-in-web-config)

[http://www.dotnetprofessional.com/blog/post/2008/03/03/Encrypt-sections-of-WebConfig-or-AppConfig.aspx](http://www.dotnetprofessional.com/blog/post/2008/03/03/Encrypt-sections-of-WebConfig-or-AppConfig.aspx)

Best regards asere.

# c++ - 渐进式下载视频流 C++

> ID：12371513
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:15.810
> 
> 标签：c++, video-streaming, progressive-download

有人可以给我一些关于在非 http 应用程序中使用 http 渐进式下载的提示吗？我需要将一些视频帧流式传输到客户端应用程序并显示它们。我需要开发服务器端应用程序和客户端应用程序。我认为服务器端并不太难（我只是收到一个请求并开始传输）。客户端是我的问题。我该如何解决这个问题：

*   缓存（需要在文件中进行某种缓存）
*   索引（用户必须能够加盐到特定时间）
*   清理（​​何时丢弃文件）

很快，我需要一个 C++ 应用程序来复制 Flash 播放器的行为。

# java - 用于对象到对象转换的正确 Spring 集成组件

> ID：12371514
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:24.063
> 
> 标签：java, spring, spring-integration

我目前在集成通道上接收到一个对象，类似于：

```
public class LargeObject {
    private final String name;
    private final Integer id;
} 
```

我想从中获取`name`，将其包装在我自己的对象中并将其发送到另一个通道。

所以通常我想以类似于`<integration:json-to-object-transformer>`.

我可以用 a 来做`<integration:service-activator>`，但是如果有专门用于这项工作的组件，我会徘徊吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:19:45.000

合适的组件是

```
<transformer/> 
```

假设您在新对象上有一个构造函数，在 LargeObject 上有一个 getName() 方法，则可以使用带有表达式的简单转换器...

```
<int:transformer expression="new foo.OtherObject(payload.name)"
    input-channel="foo" output-channel="bar" /> 
```

如果您需要更复杂，只需使用此方法制作一个 POJO...

```
public OtherObject transformIt(LargeObject input) {...} 
```

并使用...

```
<int:transformer ref="transformerPojo"
    input-channel="foo" output-channel="bar" /> 
```

# qt - 如何从 qt 运行 file.m

> ID：12371515
> 
> 赞同：1
> 
> 时间：2012-09-11T14:02:23.473
> 
> 标签：qt, matlab

我有一个 file.m，它是来自 matlab 的文件，我希望它在我运行我的 qt 项目时运行。

我注意到我可以使用这个`-r MATLAB_command - Start MATLAB and execute the MATLAB_command.`

和这个，

```
-nodesktop           - Do not start the MATLAB desktop. Use the current
                           terminal for commands. The Java virtual machine
                           will be started. 
```

来自matlab的帮助，但我不确定我的想法是否正确。

我的 main.cpp

```
#include <QtGui/QApplication>
#include <iostream>
using namespace std;
#include <cmath>

#include <QProcess>
#include "planevolume.h"
#include "dialog.h"

int main(int argc, char *argv[])
{
    // Start MATLAB MAIN.m
    QProcess* p = new QProcess(NULL);
    p->start( QString( "/usr/local/MATLAB/R2011b/bin/matlab"),
              QStringList() << QString("-r /home/matt/Desktop/PlaneVolumeExec/MAIN.m")
                            << QString("-nosplash")
                            << QString("-nodesktop"));

    QApplication app(argc, argv);

    Dialog *dialog= new Dialog;

    if (dialog->exec())
    {
        planevolume mainwindow(dialog->getdirprefix(),dialog->getxpax(), dialog->getypax(), dialog->getzpax(), dialog->getxmmax(), dialog->getymmax(), dialog->getzmmax(), dialog->getintzminp(), dialog->getintzmaxp(), dialog->getintzminm(), dialog->getintzmaxm());
        mainwindow.show();
        return app.exec();
    }

return 0;
} 
```

Matlab 帮助

```
/*-h|-help             - Display arguments.
    -n                   - Display final environment variables,
                           arguments, and other diagnostic
                           information. MATLAB is not run.
    -e                   - Display ALL the environment variables and
                           their values to standard output. MATLAB
                           is not run. If the exit status is not
                           0 on return then the variables and values
                           may not be correct.
    -arch                - Start MATLAB assuming architecture arch.
    v=variant            - Start the version of MATLAB found
                           in bin/glnxa64/variant instead of bin/glnxa64.
    v=arch/variant       - Start the version of MATLAB found
                           in bin/arch/variant instead of bin/glnxa64.
    -c licensefile       - Set location of the license file that MATLAB
                           should use.  It can have the form port@host or
                           be a colon separated list of license files.
                           The LM_LICENSE_FILE and MLM_LICENSE_FILE
                           environment variables will be ignored.
    -display Xdisplay    - Send X commands to X server display, Xdisplay.
    -nodisplay           - Do not display any X commands. The MATLAB
                           desktop will not be started. However, unless
                           -nojvm is also provided the Java virtual machine
                           will be started.
    -nosplash            - Do not display the splash screen during startup.
    -mwvisual visualid   - The default X visual to use for figure windows.
    -debug               - Provide debugging information especially for X
                           based problems.
    -desktop             - Allow the MATLAB desktop to be started by a
                           process without a controlling terminal. This is
                           usually a required command line argument when
                           attempting to start MATLAB from a window manager
                           menu or desktop icon.
    -nodesktop           - Do not start the MATLAB desktop. Use the current
                           terminal for commands. The Java virtual machine
                           will be started.
    -nojvm               - Shut off all Java support by not starting the
                           Java virtual machine. In particular the MATLAB
                           desktop will not be started.
    -jdb [port]          - Enable remote Java debugging on port (default 4444)
    -r MATLAB_command    - Start MATLAB and execute the MATLAB_command.
    -logfile log         - Make a copy of any output to the command window
                           in file log. This includes all crash reports.
    -Ddebugger [options] - Start debugger to debug MATLAB.*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:31:51.697

```
QProcess* p = new QProcess( this );
p->start( "%MATHLAB_EXE_FILE_FULL_PATH%", "%FILE_M_FULL_PATH%" ); 
```

所以它会像：

```
p->start( QString( "C:/Program Files/MatLab 9.0/matlab.exe" ),
          QStringList() << QString( "-r D:/My files/matlab/file.m" )
                        << QString( "-nosplash" ) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T01:05:17.780

尝试这个。有用。

```
QString program = "C:\\Program Files\\MATLAB\\R2017a\\bin\\matlab.exe";
myProcess->start(program, QStringList() << QString("-nodisplay")<< QString("-nodesktop")<<  QString("-nosplash")<<QString("-r")<<QString("run('C:/Users/eleazar.balbon/Documents/MATLAB/Sample.slx');"));
myProcess->waitForFinished(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:31:57.510

下面的答案可能不起作用，因为 QProcess 为 QStringList 中的所有参数添加了引号您应该尝试[QProcess::setNativeArguments ( const QString & arguments )](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html#setNativeArguments)

如果这也不起作用，您可以尝试[QProcess::execute ( const QString & program ) [静态]](http://doc.qt.nokia.com/4.7-snapshot/qprocess.html#execute-2)

```
QProcess::execute("My_programm.bin -arg1 val1 -arg2 val2"); 
```

我认为这是运行不受控制的外部进程的最佳方式。如果您创建一个 QProcess 实例并且不手动删除它，那么它可以很好地让您的程序运行，直到 preces 退出。或者，如果您的应用程序在 kill 或 somethimg 的帮助下退出，您将遇到删除未完成进程的 qDebug 问题（不要记住在 qDebug 中执行此问题的字符串）。在不同的操作系统中，这可能会导致您的应用程序崩溃（例如，我在 Windows XP 上遇到此问题）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-24T17:52:18.963

可能为时已晚。但是，供以后参考。这是你应该做的。

在我的脚本中，我发送的路径是我的 .m 文件中名为 ae_run 的变量。我就是这样做的。

```
QProcess* p = new QProcess(NULL);
QString matlab_exe ="matlab /r -nosplash -nodesktop";
QString fileName_path=matlab_exe +" "+ "rec_path='"+path+"\';ae_run";
p->start(fileName_path);
qDebug()<<p->state()<<endl; 
```

rec_path 是我解析为我的代码的变量，而 fileName 是路径。最后，当我运行它时。看起来像这样。

```
"matlab /r -nosplash -nodesktop rec_path='D:\\robot_IMU_data\\file_data.txt';ae_run" 
```

如果你看到，这就像从命令行运行它一样

# wordpress - 如何在每个页面上为模板定义图像？

> ID：12371516
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:30.163
> 
> 标签：wordpress, wordpress-theming

我建立了一个 wordpress 主题并在其中插入了一个图像滑块。图片仍然是静态的，但我想在每个 wordpress 页面上定义它们。我可以过滤模板标题中的页面 ID 并动态定义图像。

现在我正在寻找一种在 wordpress 后端的 pageeditor 中动态定义它们的方法。这样客户就可以为每一页自己更改它们。是否已经有针对此问题的插件或任何其他简单的解决方案？

感谢和感谢

立体声

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:13:01.387

There is some great slider plugins already out there. [WooThemes's one](http://www.woothemes.com/wooslider/) being one of my favourite. It is $35 though.

If you've already got it all setup though, and just need to be able to do it dynamically, then you could use a plugin like [Attachments](http://wordpress.org/extend/plugins/attachments/faq/). You can just have it call the attachments for the current page/post, and use those images. If you NEED to have a slider on every page, then check for attachments on the current page/post, and if there is none, then request the ones for the home page. Done and done. Well I hope so, not sure if I read your question correctly... Hope this helps but :)

# xml - 如何在 SOAP UI Pro 中使用请求 XML 验证响应 XML

> ID：12371517
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:30.167
> 
> 标签：xml, groovy, soapui, restful-authentication, functional-testing

我们的项目需要彻底的 REST API 测试。因此，我们使用 SOAP-UI Pro 进行 REST Web 服务测试。

我想测试以下场景：

存储“XML”文件并确保获取相同的“XML”文件。

需要使用响应 'XML' 验证 'request-XML'，其中一些 'XML-tags' 是动态的，例如：

请求“XML”是：

```
<c:field xmlns:c="http://iddn.icis.com/ns/core">  
   <c:id>http://iddn.icis.com/fields/low</c:id>   
   <c:version>1</c:version>   
   <c:created-on>2012-08-13T11:01:39Z</c:created-on>   
   <c:type>field</c:type>
   <c:name>low</c:name>
   <c:value type="integer" /> 
   <c:description xml:lang="en">
      <c:name>low</c:name>
   </c:description>
</c:field> 
```

在获取时，我们需要验证我们是否正在获取上述“XML”。

我试图通过使用“断言内容”进行验证，但它失败了，因为`<c:created-on>2012-08-13T11:01:39Z</c:created-on>`每次我们存储它时值都会发生变化。

如何在“SOAP-UI”测试中处理动态响应“XML”标签？

注意：我是 Groovy、x-path 和 X-query 以及 SOAP UI 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T09:27:33.337

您可以尝试使用下一个脚本定义断言测试脚本，也许这会对您有所帮助

```
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def holder = groovyUtils.getXmlHolder( "Request#Request" );
def holder2 = groovyUtils.getXmlHolder("Responses#ResponseAsXml")

def stringList=[]
def stringList2=[]

for( node in holder['//name] )
{  
  stringList =stringList+node 
}

for( node2 in holder2['//name'] )
{ 
  stringList2 =stringList2+node2 
    if (node2 in stringList ) assert true
    else assert null
}

log.info "Request>" + stringList
log.info "result>"+ stringList2 
```

# javascript - 在 jquery 和 javascript 中构建动态 div

> ID：12371523
> 
> 赞同：1
> 
> 时间：2012-09-11T14:02:41.597
> 
> 标签：javascript, jquery

嗯，我在这里看到的所有答案都表明这应该可行，但是......

是...

```
 var qnDivName = "qnDiv" + i;
    var currentQnDiv = document.createElement("div");
    var qnDivId = document.createAttribute("id");
    qnDivId.nodeValue = qnDivName;
    currentQnDiv.setAttributeNode(qnDivId);
    currentQnDiv.className = "questionContainer"; 
```

相当于...

```
 var currentQnDiv = $("<div/>", {
        "class": "questionContainer",
        id: "qnDiv" + i
    });
    alert("qndiv class: " + currentQnDiv.className); 
```

?

警报给出“未定义”。'i' 来自 for 循环。我正在动态创建 div 以附加到页面下方的文档...

```
 testDiv.appendChild(currentQnDiv);      
  } //end for loop 
```

普通的 js 可以工作，但 jQuery 不行。我有其他在调用函数中工作的 jQuery，所以......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:05:07.047

利用

```
alert("qndiv class: " + currentQnDiv.get(0).className); 
```

您的`currentQnDiv`对象是一个 jQuery 集合，而不是一个基本的 Dom 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:12:48.230

otherwise

```
var currentQnDiv = $("<div/>");
currentQnDiv.addClass("questionContainer");
currentQnDiv.attr("qnDiv" + i).appendTo("body"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:05:29.743

`className`不是有效的 jQuery 属性。你应该`currentQnDiv[0].className`改用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:08:15.187

```
$("<div/>").addClass("questionContainer")
           .attr("qnDiv" + i).appendTo("body"); 
```

body 可以替换为要附加此 div 的元素的 id。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:06:48.273

class 真的应该在 "" 中吗？

```
var currentQnDiv = $("<div/>", {
    class: "questionContainer",
    id: "qnDiv" + i
}); 
```

只是我的想法，没有足够的时间自己测试它。

# algorithm - 数字总和直到作为输入给出的数字

> ID：12371524
> 
> 赞同：0
> 
> 时间：2012-09-11T14:02:46.747
> 
> 标签：algorithm

如果给定一个数字作为输入，则查找该数字之前所有数字的总和

例如输入 11 则答案为 1+2....+9+(1+0)+(1+1) number.I 已经实现了该方法，我想知道是否有任何其他方法可以在不实际计算每个数字的数字总和的情况下做到这一点

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T14:19:39.557

您可以更快地做到这一点（在 O(log n) 操作中）。让`S(n)`是所有数字的数字之和`0 <= k < n`。然后

```
S(10*n) = 10*S(n) + 45*n 
```

因为在小于 的数字中`10*n`，每个数字都`k < n`作为数字的开头部分出现 10 次，最后一位是`0, 1, ..., 9`。因此，最后一位数字的总和为 45，是 的数字总和的 10 倍`k`。

反过来，我们发现

```
S(n) = 10*S(n/10) + 45*(n/10) + (n%10)*DS(n/10) + (n%10)*((n%10)-1)/2 
```

`DS(k)`的普通数字总和在哪里`k`。前两项来自上述，其余两项来自 的数字之和`n - n%10, ..., n - n%10 + (n%10 + 1)`。

开始是`S(n) = 0`为了`n <= 1`。

要包括上限，请将其称为`S(n+1)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-07-05T09:43:04.830

让我们举几个例子。

> 总和(9) = 1 + 2 + 3 + 4 .................... + 9 = 9*10/2 = 45
> 
> sum(99) = 45 + (10 + 45) + (20 + 45) + ..... (90 + 45) = 45*10 + (10 + 20 + 30 ... 90) = 45*10 + 10(1 + 2 + ... 9) = 45*10 + 45*10 = 总和(9)*10 + 45*10
> 
> 总和（999）=总和（99）*10 + 45*100

一般来说，我们可以使用以下公式计算 sum(10d – 1)

> 总和(10d - 1) = 总和(10d-1 - 1) * 10 + 45*(10d-1)

在下面的实现中，上面的公式是使用动态规划实现的，因为存在重叠的子问题。上述公式是该想法的核心步骤之一。下面是完整的算法

> 算法：sum(n)
> 
> 1) 求 n 中的位数减一。让这个值是'd'。
> 对于 328，d 为 2。
> 
> 2) 计算从 1 到 10d - 1 的数字中的一些数字。设这个和为 w。对于 328，我们使用上述公式计算 1 到 99 的数字总和。
> 
> 3) 查找 n 中的最高有效位 (msd)。对于 328，msd 为 3。
> 
> 4) 总和是以下各项的总和
> 
> ```
> a) Sum of digits in 1 to "msd * 10d - 1".  For 328, sum of 
>    digits in numbers from 1 to 299.
>     For 328, we compute 3*sum(99) + (1 + 2)*100\.  Note that sum of
>     sum(299) is sum(99) + sum of digits from 100 to 199 + sum of digits
>     from 200 to 299\.  
>     Sum of 100 to 199 is sum(99) + 1*100 and sum of 299 is sum(99) + 2*100.
>     In general, this sum can be computed as w*msd + (msd*(msd-1)/2)*10d
> 
> b) Sum of digits in msd * 10d to n.  For 328, sum of digits in 
>    300 to 328.
>     For 328, this sum is computed as 3*29 + recursive call "sum(28)"
>     In general, this sum can be computed as  msd * (n % (msd*10d) + 1) 
>     + sum(n % (10d)) 
> ```

下面是上述算法的 C++ 实现。

```
// C++ program to compute sum of digits in numbers from 1 to n
#include<bits/stdc++.h>
using namespace std;

// Function to computer sum of digits in numbers from 1 to n
// Comments use example of 328 to explain the code
int sumOfDigitsFrom1ToN(int n)
{
    // base case: if n<10 return sum of
    // first n natural numbers
    if (n<10)
      return n*(n+1)/2;

    // d = number of digits minus one in n. For 328, d is 2
    int d = log10(n);

    // computing sum of digits from 1 to 10^d-1,
    // d=1 a[0]=0;
    // d=2 a[1]=sum of digit from 1 to 9 = 45
    // d=3 a[2]=sum of digit from 1 to 99 = a[1]*10 + 45*10^1 = 900
    // d=4 a[3]=sum of digit from 1 to 999 = a[2]*10 + 45*10^2 = 13500
    int *a = new int[d+1];
    a[0] = 0, a[1] = 45;
    for (int i=2; i<=d; i++)
        a[i] = a[i-1]*10 + 45*ceil(pow(10,i-1));

    // computing 10^d
    int p = ceil(pow(10, d));

    // Most significant digit (msd) of n,
    // For 328, msd is 3 which can be obtained using 328/100
    int msd = n/p;

    // EXPLANATION FOR FIRST and SECOND TERMS IN BELOW LINE OF CODE
    // First two terms compute sum of digits from 1 to 299
    // (sum of digits in range 1-99 stored in a[d]) +
    // (sum of digits in range 100-199, can be calculated as 1*100 + a[d]
    // (sum of digits in range 200-299, can be calculated as 2*100 + a[d]
    //  The above sum can be written as 3*a[d] + (1+2)*100

    // EXPLANATION FOR THIRD AND FOURTH TERMS IN BELOW LINE OF CODE
    // The last two terms compute sum of digits in number from 300 to 328
    // The third term adds 3*29 to sum as digit 3 occurs in all numbers 
    //                from 300 to 328
    // The fourth term recursively calls for 28
    return msd*a[d] + (msd*(msd-1)/2)*p +  
           msd*(1+n%p) + sumOfDigitsFrom1ToN(n%p);
}

// Driver Program
int main()
{
    int n = 328;
    cout << "Sum of digits in numbers from 1 to " << n << " is "
         << sumOfDigitsFrom1ToN(n);
    return 0;
} 
```

输出

```
Sum of digits in numbers from 1 to 328 is 3241 
```

# python - apache背后的瓶ssl

> ID：12371527
> 
> 赞同：2
> 
> 时间：2012-09-11T14:03:02.787
> 
> 标签：python, apache, ssl, bottle

有没有办法在不使用其他服务器的情况下部署`bottle`应用程序？如果是这样，是否有任何指南或教程来做这样的事情？`SSL``Apache``CherryPy`

# hibernate - Hibernate/H2 外键抛出 org.h2.jdbc.JdbcSQLException

> ID：12371531
> 
> 赞同：1
> 
> 时间：2012-09-11T14:03:20.837
> 
> 标签：hibernate, exception, h2

我正在尝试使用 H2 db 进行单元测试。我的实际数据库是 MYSql，所以我将 MYSQL 方言与 H2 一起使用。一旦 hbm 文件被读取/加载，问题似乎就会发生。当 H2 或 Hibernate 尝试更改表时，外键/关联会出现问题。或者看起来如此。

**数据库脚本：**

```
DROP SCHEMA IF EXISTS `amr` ;
CREATE SCHEMA IF NOT EXISTS `amr`;

-- -----------------------------------------------------
-- Table `amr`.`classA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `amr`.`classA` ;CREATE  TABLE IF NOT EXISTS `amr`.`classA` (
  `classA_id` INT(11) NOT NULL ,
  `name` VARCHAR(56) NOT NULL ,
  PRIMARY KEY (`classA_id`) );

-- -----------------------------------------------------
-- Table `amr`.`classB`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `amr`.`classB` ;CREATE  TABLE IF NOT EXISTS `amr`.`classB` (
  `classB_id` INT(11) NOT NULL ,
  `name` VARCHAR(45) NOT NULL ,
  `classA_id` INT(11) NOT NULL ,
  PRIMARY KEY (`classB_id`) ,
  INDEX `fk_classB_service_provider_classA1` (`classA_id` ASC) ,
  CONSTRAINT `fk_classB_service_provider_classA1`
    FOREIGN KEY (`classA_id` )
    REFERENCES `amr`.`classA` (`classA_id` )
    ON DELETE NO ACTION
    ON UPDATE NO ACTION); 
```

**我收到的例外情况：**

```
09-11 08:46:33 jdbc[2]: exception
org.h2.jdbc.JdbcSQLException: Column "FOREIGN" not found; SQL statement:
alter table amr.classB drop foreign key FKAF0F85CABD96B12B [42122-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.table.Table.getColumn(Table.java:605)
    at org.h2.command.Parser.parseAlterTable(Parser.java:4874)
    at org.h2.command.Parser.parseAlter(Parser.java:4315)
    at org.h2.command.Parser.parsePrepared(Parser.java:306)
    at org.h2.command.Parser.parse(Parser.java:279)
    at org.h2.command.Parser.parse(Parser.java:251)
    at org.h2.command.Parser.prepareCommand(Parser.java:217)
    at org.h2.engine.Session.prepareLocal(Session.java:415)
    at org.h2.engine.Session.prepareCommand(Session.java:364)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1109)
    at org.h2.jdbc.JdbcStatement.executeUpdateInternal(JdbcStatement.java:121)
    at org.h2.jdbc.JdbcStatement.executeUpdate(JdbcStatement.java:110)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:421)
    at org.hibernate.tool.hbm2ddl.SchemaExport.drop(SchemaExport.java:396)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:269)
    at org.hibernate.tool.hbm2ddl.SchemaExport.create(SchemaExport.java:219)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:370)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1842)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.newSessionFactory(LocalSessionFactoryBean.java:860)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:779)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:188)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:103)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
09-11 08:46:33 jdbc[2]: exception
org.h2.jdbc.JdbcSQLException: Syntax error in SQL statement "ALTER TABLE AMR.CLASSB ADD INDEX FKAF0F85CABD96B12B (CLASSA_ID),[*] ADD CONSTRAINT FKAF0F85CABD96B12B FOREIGN KEY (CLASSA_ID) REFERENCES AMR.CLASSA (ID) "; SQL statement:
alter table amr.classB add index FKAF0F85CABD96B12B (classA_id), add constraint FKAF0F85CABD96B12B foreign key (classA_id) references amr.classA (id) [42000-168]
09-11 08:46:34 jdbc[2]: exception
org.h2.jdbc.JdbcSQLException: Column "FOREIGN" not found; SQL statement:
alter table amr.classB drop foreign key FKAF0F85CABD96B12B [42122-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.table.Table.getColumn(Table.java:605)
    at org.h2.command.Parser.parseAlterTable(Parser.java:4874)
    at org.h2.command.Parser.parseAlter(Parser.java:4315)
    at org.h2.command.Parser.parsePrepared(Parser.java:306)
    at org.h2.command.Parser.parse(Parser.java:279)
    at org.h2.command.Parser.parse(Parser.java:251)
    at org.h2.command.Parser.prepareCommand(Parser.java:217)
    at org.h2.engine.Session.prepareLocal(Session.java:415)
    at org.h2.engine.Session.prepareCommand(Session.java:364)
    at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1109)
    at org.h2.jdbc.JdbcStatement.executeUpdateInternal(JdbcStatement.java:121)
    at org.h2.jdbc.JdbcStatement.executeUpdate(JdbcStatement.java:110)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:421)
    at org.hibernate.tool.hbm2ddl.SchemaExport.drop(SchemaExport.java:396)
    at org.hibernate.tool.hbm2ddl.SchemaExport.execute(SchemaExport.java:269)
    at org.hibernate.tool.hbm2ddl.SchemaExport.drop(SchemaExport.java:229)
    at org.hibernate.impl.SessionFactoryImpl.close(SessionFactoryImpl.java:959)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.destroy(AbstractSessionFactoryBean.java:228)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.destroy(LocalSessionFactoryBean.java:899)
    at org.springframework.beans.factory.support.DisposableBeanAdapter.destroy(DisposableBeanAdapter.java:211)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroyBean(DefaultSingletonBeanRegistry.java:498)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingleton(DefaultSingletonBeanRegistry.java:474)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.destroySingletons(DefaultSingletonBeanRegistry.java:442)
    at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1066)
    at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1040)
    at org.springframework.context.support.AbstractApplicationContext$1.run(AbstractApplicationContext.java:958) 
```

**hbm 映射：**

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-access="field">
    <class name="ClassA" table="classA">
        <id name="id" type="long">
            <column name="id"/>
        </id>
        <property name="name" type="string">
            <column name="name" length="56" not-null="true"/>
        </property>
        <set name="classBs" table="classB" inverse="true" lazy="true" fetch="select">
            <key>
                <column name="classA_id" not-null="true"/>
            </key>
            <one-to-many class="ClassB"/>
        </set>
    </class>
</hibernate-mapping>

<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping default-access="field">
    <class name="ClassB" table="classB">
        <id name="id" type="long">
            <column name="id"/>
        </id>
        <property name="name" type="string">
            <column name="name" length="56" not-null="true"/>
        </property>
        <many-to-one name="classA" class="ClassA" fetch="select">
            <column name="classA_id" not-null="true"/>
        </many-to-one>
    </class>
</hibernate-mapping> 
```

**H2网址：**

```
jdbc:h2:~/db/amr_test;MODE=MYSQL;INIT=create schema if not exists test_db\\;runscript from 'classpath:amr_test_ddl.sql';DB_CLOSE_ON_EXIT=FALSE 
```

-------------------编辑/发现问题--------------- --------

在几乎从头开始并重新评估所有内容之后，发现我不正确地将以下属性添加到我的上下文文件中：

创建删除

在指导我的 H2 上下文配置的论坛之一中，指出使用它，因为它“在会话关闭后删除模式”。

所以我对这个属性的无知导致了一个教训。

@Thomas Mueller - 非常感谢您在这件事上的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T04:41:04.070

您使用了仅适用于 MySQL 的脚本。以下脚本应该是跨数据库的，根据我的测试它适用于 H2、MySQL 和 PostgreSQL（我没有测试其他数据库）。我还`INT(11)`用`INT`. 该脚本假定架构/数据库`amr`已经存在：

```
drop table if exists amr.classB;
drop table if exists amr.classA;
CREATE TABLE IF NOT EXISTS amr.classA (
    classA_id INT(11) NOT NULL,
    PRIMARY KEY (classA_id)
);
CREATE TABLE IF NOT EXISTS amr.classB ( 
    classB_id INT(11) NOT NULL , 
    name VARCHAR(45) NOT NULL , 
    classA_id INT(11) NOT NULL , 
    PRIMARY KEY (classB_id)
);
CREATE INDEX fk_classB_service_provider_classA1 
    ON amr.classA(classA_id ASC);
ALTER TABLE amr.classB 
    ADD CONSTRAINT fk_classB_service_provider_classA1 
    FOREIGN KEY (classA_id) 
    REFERENCES amr.classA(classA_id)
    ON DELETE NO ACTION ON UPDATE NO ACTION; 
```

然后，在 Hibernate 配置中，为 H2 使用 H2 模式。

# c - 使用带有 malloc 的缓冲区

> ID：12371532
> 
> 赞同：2
> 
> 时间：2012-09-11T14:03:21.863
> 
> 标签：c, malloc, buffer

我正在尝试将三个方形二维数组存储到一个缓冲区中，因此我使用一个连续的内存块。如果数组大小是 rxr，我的公式是：

```
buffer = (double*) malloc((r + r + r) * sizeof(double *) + 
    (r*r + r*r + r*r) * sizeof(double));

  if(buffer == NULL) {
    printf("out of memory\n");
    return 0;
  }

  for(i = 0, j = 0; i < r; i++) {
    a[i] = &buffer[j];
    j+=r;
  }

  for(i = 0; i < r; i++) {
    b[i] = &buffer[j];
    j+=r;
  }

  for(i = 0; i < r; i++) {
    c[i] = &buffer[j];
    j+=r;
  }

  a = buffer[j];
  b = buffer[j + r];
  c = buffer[j + r + r]; 
```

如你所见，我迷路了。a、b、c 被声明为双指针（意味着指向数组数组的指针），所以我希望每个都有一个大小为 r 的数组，每个元素都指向它自己的大小为 r 的单独数组。有任何想法吗...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:06:20.197

您将 malloc'ing 指针与 malloc'ing doubles 本身混淆了。只需像这样分配双打：

```
double* all = (double*) malloc( 3*r*r*sizeof(double)); 
```

那么你的实际矩阵去哪里了？

```
double *p1 = all;
double *p2 = &all[r*r];
double *p3 = &all[2*r*r]; 
```

请检查一个错误:) 但关键是您不需要同时分配双 * 和双。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:39:38.733

因此，如果我理解正确，您想要的是三个`r`x`r`数组（`a`、`b`和`c`），但您希望它们三个都连续存储；本质上，后备存储将是一个 3 x `r`x`r`数组。

如果`r`在编译时大小未知，*并且*您正在使用 C99 或支持可变长度数组的 C11 实现，则可以执行以下操作：

```
size_t r = ...;

double (*a)[r] = NULL;
double (*b)[r] = NULL;
double (*c)[r] = NULL;

double (*backing_store)[r][r] = malloc(3 * sizeof *backing_store);
if (!backing_store)
{
  // panic and exit
}

a = backing_store[0];
b = backing_store[1];
c = backing_store[2]; 
```

然后，您可以使用`a`,`b`和`c`，就好像它们是 的常规`r`x`r`数组一样`double`：

```
a[i][j] = ...;
printf("%f\n", b[x][y]); 
```

等等

完成后，您只需要释放`backing_store`：

```
free(backing_store); 
```

为什么这行得通？

表达式`backing_store`的类型为“指向 的`r`-element 数组的`r`-element 数组的指针`double`。由于表达式`backing_store[i]`等价于`*(backing_store + i)`，下标运算符隐式取消引用指针，因此表达式的类型为“ `r`-element array of `r`-element array of `double`”。每个, `backing_store[0]`,`backing_store[1]`和`backing_store[2]`是 的`r`x`r`数组`double`。

请记住，在大多数情况下，“- `N`element array of `T`”类型的表达式被隐式转换（“decays”）为“pointer to `T`”类型的表达式，其值是数组中第一个元素的地址。

因此，表达式`backing_store[0]`从类型“ `r`-element array `r`of `double`”转换为“pointer to- `r`element array of `double`”，恰好是 的类型`a`，值是第一个子数组的地址（发生与 )相同`backing_store`。同样，应用下标运算符隐式地取消引用指针，因此在之后`a[i][j]`给出第th 数组的`j`第 th 元素。 `i``a`

如果在编译`r` *时*已知（即，它是一个*常量表达式*），那么过程是相同的，您不必声明变量`r`：

```
#define R ...

double (*a)[R] = NULL;
double (*b)[R] = NULL;
double (*c)[R] = NULL;

double (*backing_store)[R][R] = malloc(3 * sizeof *backing_store);
if (!backing_store)
{
  // panic and exit
}

a = backing_store[0];
b = backing_store[1];
c = backing_store[2]; 
```

如果在编译时不知道`r`并且*您**没有*可用的可变长度数组（使用 C89 或不支持 VLA 的 C11 编译器），那么它会变得有点混乱。在这里，我们将`backing_store`其视为一维数组`double`并计算每个子数组的一维下标：

```
double *a = NULL;
double *b = NULL;
double *c = NULL;

double *backing_store = malloc(3 * r * r * sizeof *backing_store);
if (!backing_store)
{
  // panic
}

a = backing_store;
b = backing_store + r * r;
c = backing_store + 2 * r * r;    

a[i*r+j] = ...;
printf("%f\n", b[x*r+y]); 
```

同样，您只需要`backing_store`在完成后释放：

```
free(backing_store); 
```

不如使用二维下标漂亮，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:42:41.893

首先，二维数组通常作为数组的数组而不是作为指向行的指针更好地管理，除非有特别的理由使用指针。为此，我们可以这样做：

```
double (*Memory)[r][r] = malloc(3 * sizeof *Memory);
    // Now Memory points to three r-by-r arrays of double.
double (*a)[r] = Memory[0];
double (*b)[r] = Memory[1];
double (*c)[r] = Memory[2]; 
```

但是，如果您想使用指向行的指针，那么您应该为指针分配空间，而不是为元素分配空间。（如果您不这样做，则存在符合 C 标准的问题，尤其是填充和对齐方面。此外，您的代码被`buffer`视为一种类型的数组，或者`double`或`double *`。但是您需要的地址算术有时需要指向`double`[when setting元素地址]，有时需要指向`double *`[将指针的地址设置为双精度时]。）要使用指向行的指针，您可以使用以下命令进行分配：

```
double *(*PointerMemory)[r] = malloc(3 * sizeof *PointerMemory);
    // PointerMemory points to three arrays of r elements of pointers to double.
double (*ElementMemory)[r][r] = malloc(3 * sizeof *ElementMemory); 
```

然后您可以设置指向行的指针：

```
// Set a to point to the first array of r elements of pointers to double.
double *a[r] = PointerMemory[0];
// Initialize the elements of a to point to rows of the first r-by-r array of double.
for (i = 0; i < r; ++i)
    a[i] = ElementMemory[0][i];

// Set b for the second array of pointers and the second array of double.
double *b[r] = PointerMemory[0];
for (i = 0; i < r; ++i)
    b[i] = ElementMemory[1][i];

// Set c for the third arrays.
double *c[r] = PointerMemory[0];
for (i = 0; i < r; ++i)
    c[i] = ElementMemory[2][i]; 
```

# css - @font-face 导入无法在离线网站/不同主机中使用仅通过 IE 中的 CSS 使用在线字体

> ID：12371533
> 
> 赞同：0
> 
> 时间：2012-09-11T14:03:28.417
> 
> 标签：css, internet-explorer, font-face, eot

IE很奇怪。我查看了 MIME 类型，添加了一个`.htaccess`文件

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch>

AddType application/vnd.ms-fontobject .eot
AddType application/octet-stream .otf .ttf 
```

而 IE9 开发者工具似乎已经注意到它已经到位但又没有任何变化。该网站目前处于离线状态（仅在硬盘驱动器上查看）-尽管当它上传到不同的服务器时它仍然无法正常工作-所有 Javascript 和样式表都从`head`标签内链接。都好。

字体根本没有正确导入。

我在开发者控制台中收到一条错误消息：

```
CSS3117: @font-face failed cross-origin request. Resource access is restricted.
vitesse-bold.eot?#iefix

CSS3117: @font-face failed cross-origin request. Resource access is restricted.
vitesse-bold.woff

CSS3117: @font-face failed cross-origin request. Resource access is restricted.
vitesse-bold.ttf 
```

我已经对此进行了大量研究，并且我了解文档类型可能会阻碍这一点。我正在使用 UTF-8，其中 css 以开头，`@charset "UTF-8";`而我的 HTML 文件也以：

```
<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="UTF-8"> 
```

我认为这与字体转换有关，但如果是这样的话，当您从托管服务器直接查看网站时，字体首先在 IE 中不起作用。

关于如何解决这个问题的任何想法？

同样在 IE 7 和 8 中，他们只使用 EOT 文件，我得到一个不同的错误：

```
CSS3111: @font-face encountered unknown error.
vitesse-bold.eot 
```

字体目录.htaccess：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
  </IfModule>
</FilesMatch>

AddType application/vnd.ms-fontobject .eot
AddType application/octet-stream .otf .ttf 
```

主网站.htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

CSS字体导入：

```
@font-face {
    font-family:'Vitesse-Bold';
    src:url('../includes/fonts/vitesse-bold.eot');
    src:url('../includes/fonts/vitesse-bold.eot?#iefix') format('embedded-opentype'),
            url('../includes/fonts/vitesse-bold.woff') format('woff'),
            url('../includes/fonts/vitesse-bold.ttf') format('truetype'),
            url('../includes/fonts/vitesse-bold.svg#vitesse-bold') format('svg');
    font-weight:normal;
    font-style:normal;
}
@font-face {
    font-family:'Flama-Bold';
    src:url('../includes/fonts/flama-bold.eot');
    src:url('../includes/fonts/flama-bold.eot?#iefix') format('embedded-opentype'),
            url('../includes/fonts/flama-bold.woff') format('woff'),
            url('../includes/fonts/flama-bold.ttf') format('truetype'),
            url('../includes/fonts/flama-bold.svg#flama-bold') format('svg');
    font-weight:normal;
    font-style:normal;
} 
```

截图：

[http://www.titaniumwebdesigns.com/forums/screenshot-a.jpg](http://www.titaniumwebdesigns.com/forums/screenshot-a.jpg) 字体导入`src:url('../includes/fonts/font.eot');`

[http://www.titaniumwebdesigns.com/forums/screenshot-b.jpg](http://www.titaniumwebdesigns.com/forums/screenshot-b.jpg) 字体导入`src:url('http://sub-domain.domain.com/includes/fonts/font.eot');`

[http://www.titaniumwebdesigns.com/forums/screenshot-c.jpg](http://www.titaniumwebdesigns.com/forums/screenshot-c.jpg) 字体导入`src:url('http://www.sub-domain.domain.com/includes/fonts/font.eot');`

不确定 IE 用这两种字体创建两种字体发生了什么`http://www.`，`http://`但它现在似乎已经停止工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:15:37.110

## **实际问题**

我们通过修复 @font-face 代码使字体在 IE9 中工作，并将问题缩小到 EOT 文件。

这里的问题是字体文件本身中设置的字体名称和家族名称。出于某种原因，IE6-8 存在这两个属性不同的问题（尽管并非总是如此，因为我在我的网站上使用的自定义字体对每个属性都有不同的名称，并且它在所有方面都可以正常工作）。

我从他那里得到了原始的 OTF 文件，使用 FontForge 将“fontname”、“family name”和“name for human”设置为相同，然后将字体保存为 TTF，并在线转换为 EOT 格式。

现在效果很好。我们为使 $#!7 在 IE 中工作所做的事情。

注意：我之前曾尝试将文件转换为 EOT（不对文件属性进行编辑），但没有成功。

## **原始答案**

你是如何引用你的字体文件的？听起来好像您没有相对链接到它们，或者它们位于另一个域/主机名上。

如果您绝对链接到它们，例如：`http://www.domain.com/fonts/myfont.eot`并且您通过 访问该站点`http://domain.com`，那么您将遇到 CORS 问题。我遇到了这个问题，我以为是 IE 问题，结果我只是`www`在一个浏览器上查看网站，而没有在 IE 上。

如果字体文件位于另一个主机名或域上，则需要启用 CORS，阅读更多：

[http://enable-cors.org/](http://enable-cors.org/)

[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)

我用于@font-face 的代码：

```
@font-face {
font-family: "Vitesse-Bold";
src: url('../includes/fonts/vitesse-bold.eot');
src: local('(*%$@#@'),
    url('../includes/fonts/vitesse-bold.woff') format('woff'),
    url('../includes/fonts/vitesse-bold.ttf') format('truetype'),
    url('../includes/fonts/vitesse-bold.svg') format('svg');
font-weight: normal;
font-style: normal;
}

@font-face {
font-family: "Flama-Bold";
src:url('../includes/fonts/flama-bold.eot');
src: local('(*%$@#@'),
    url('../includes/fonts/flama-bold.woff') format('woff'),
    url('../includes/fonts/flama-bold.ttf') format('truetype'),
    url('../includes/fonts/flama-bold.svg') format('svg');
font-weight: normal;
font-style: normal;
} 
```

像这样使用：

```
font-family: "Vitesse-Bold", Verdana, sans-serif; 
```

* * *

**注意：** <~4.0 默认安卓浏览器不支持 使用`src: local('(*%$@#@')`，会导致自定义字体完全不起作用。

# ibm-mq - MQ进程amqrmppa的数量是自动增加还是减少？

> ID：12371535
> 
> 赞同：1
> 
> 时间：2012-09-11T14:03:30.740
> 
> 标签：ibm-mq, mq

我对 MQ 进程有疑问**`amqrmppa`**。我知道它用于通道客户端连接，每个进程最多可以运行 64 个线程。当更多连接进入时，此类进程的数量会增加。但是`amqrmppa`当客户端断开连接并且连接消失时，数量会减少吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T16:28:13.210

是的，假设通道定义指定线程而不是进程，进程的数量确实会减少，但不会立即减少。因为启动和关闭进程需要时间和资源，WMQ 将在通道关闭后让通道池进程运行一段时间以重用它们。这优化了性能，但更难预测何时会获得通道池过程。此外，对于任何给定的进程，即使其他线程已关闭，它的一个或多个线程也可能托管一个活动通道。您可能有多个进程正在运行，每个进程托管一个或两个通道，WMQ 不会将打开的连接合并到一个进程中，只是为了减少进程数。（这将需要重新协商通道、SSL 会话等。

最后，请注意此行为未记录在案，因此可能会因版本而异，甚至会因修订包而异。例如，引入对话共享后，渠道代理的行为发生了显着变化。此响应基于我的经验，您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T16:18:15.970

是的，除了一个进程之外的所有进程都会消失。最后一个 amqrmppa 进程被保留以最小化重新建立 amqrmppa 进程的成本。

# spring - spring mvc：上下文根之外的资源路径

> ID：12371537
> 
> 赞同：0
> 
> 时间：2012-09-11T14:03:33.053
> 
> 标签：spring, spring-mvc

我已经在 stackoverflow 上看到了其他解决方案，但它没有帮助。我正在做同样的事情，但我不知道为什么它不适合我。

我正在 ubuntu 机器上的 /home/images 文件夹和 spring-servlet.xml 中上传图像，我写了以下几行

```
 <mvc:resources mapping="/resources/**" location="/resources/" /> 

<mvc:resources mapping="/images/**" location="file:/home/images/"/>
<mvc:default-servlet-handler/> 
```

图片正在上传到 /home/images/ 文件夹，但我无法访问这些图片

在 JSP 中我写过

```
 <img src="/images/image.jpg"/> 
```

但它没有显示这个图像我不明白这里的问题。请让我知道是否需要其他任何内容。

- -更新 - -

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.1.xsd
    http://www.springframework.org/schema/mvc
    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

<context:annotation-config />   

<context:component-scan
    base-package="com.mycom.myproject" />

<!-- Enable annotation driven controllers, validation etc... -->
<mvc:annotation-driven />

<mvc:resources mapping="/resources/**" location="/resources/" /> 

<mvc:resources mapping="/images/**" location="file:/home/images/"/>
<mvc:default-servlet-handler/>

<!-- Declare a datasource that has pooling capabilities -->
<bean id="datasource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
destroy-method="close" p:driverClass="com.mysql.jdbc.Driver"
p:jdbcUrl="jdbc:mysql://localhost/dbtest" p:user="root" p:password="root"
p:acquireIncrement="10" p:idleConnectionTestPeriod="60" p:maxPoolSize="100"
p:maxStatements="50" p:minPoolSize="10" /> 
```

```
<bean id="transactionManager"
class="org.springframework.jdbc.datasource.DataSourceTransactionManager"
p:dataSource-ref="datasource" />

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="datasource" />
</bean>

<!-- scan for mappers and will automatically scan the whole classpath for xmls -->
<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="sqlSessionFactory" ref="sqlSessionFactory" />
    <property name="basePackage" value="com.mycom.myproject.db.mybatis.dao" />
</bean>  

<!-- Configure the multipart resolver -->
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="100000"/>
</bean> 

<bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView"
   p:extractValueFromSingleKeyModel="true" />

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:project-config" />
</bean> 
```

Web.xml

```
 <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/spring-servlet.xml,
        /WEB-INF/spring-security.xml
    </param-value>
</context-param>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

 <session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:37:00.753

oooook，您的调度程序 servlet 已映射到*.htm，因此您的调度程序 servlet 永远不会被调用，因为它处理这些 /resources/* * 请求并调用 ResourceHttpRequestHandler 来写入静态内容。

# php - 使用 PHP 插入表单值

> ID：12371546
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:03:51.740
> 
> 标签：php, session-cookies

所以我有一个网站，用户可以在上面分享内容。我想在用户帖子中添加一个赞按钮。最聪明/最干净的方法是什么？

现在，我知道我可以使用带有两个隐藏表单字段的提交按钮，这些字段的值包含帖子 ID 和海报的用户 ID。然后我会使用 my`$_SESSION['id']`将其插入`LIKES`表中的新行。现在，这不是很有效。我的意思是它可以工作，但我想这样做，以便它在页面和数据库中立即更新。它的逻辑过程是什么？有人可以引导我朝着我需要学习的正确方向前进吗？是javascript吗？阿贾克斯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T23:48:21.667

对于用户，我假设您是指具有**活动会话的****注册**用户。

 **老实说，我知道最好的方法是@DarkXphenomenon 建议的**ajax ，但我不知道怎么做，所以我会把我的方法放在普通的 php 中。**

```
<?php
    if (is_int($_POST['postnumber'])) {
        mysqli_query($connected,"INSERT INTO likes (userid, postid)
        VALUES ('".mysqli_real_escape_string($connected,$_SESSION['userid'])."',".$_POST['postnumber'].")");
        echo "Liked";
    } else {
?>
<form>
    <input type="hidden" name="postnumber" value="3456">
    <input type="submit" value="Like">
</form>
<?php
    }
?> 
```

注意：`$connected`应该是[mysqli_real_escape_string()](http://www.php.net/manual/en/mysqli.real-escape-string.php)和[mysqli_query()](http://php.net/manual/en/mysqli.query.php)中看到的*链接*

PS，我不知道你还想实现什么。当您为单个帖子单击此代码时（仅在您第一次提交时），此代码将显示“喜欢”而不是提交按钮。使用它，您可以尝试考虑如何调整多个帖子的代码，如何[计算每个帖子的总喜欢数](http://www.php.net/manual/en/mysqli-stmt.num-rows.php)，如果您想在[鼠标悬停](http://www.w3schools.com/jquery/event_mouseover.asp)时显示哪些用户喜欢它，添加[删除喜欢](http://www.w3schools.com/php/php_mysql_delete.asp)的功能，任何你想要的。这取决于你。**

# javascript - 在adobe air中更改任务栏中图标的背景颜色

> ID：12371556
> 
> 赞同：0
> 
> 时间：2012-09-11T14:04:25.730
> 
> 标签：javascript, windows, air

是否可以更改 Windows 任务栏中图标的背景颜色？我将使用带有 html/javascript 的 adobe air 构建一个简单的聊天应用程序，并希望将此功能用作新传入消息的通知，例如在 facebook messenger 应用程序中（见图）。

![在此处输入图像描述](../Images/a64acf6e8a272ca6851d78587089f200.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T09:28:46.853

`NativeApplication`您可以通过,`SystemTrayIcon`和`DockIcon`类做几件事来通知用户。

在 Windows 上，您可以在任务栏上闪烁应用程序图标，在 OSX 中，您可以使图标弹跳以通知用户所需的更改/操作。

可以在 Adob​​e 网站上的[使用扩展坞和系统托盘下找到所用方法的摘要](http://www.adobe.com/devnet/air/flash/quickstart/articles/stopwatch_dock_system_tray.html)

虽然这些示例在 as3 中，但它们与 AIR HTML API 参考中的 js 类比较相似

[NativeApplication](http://help.adobe.com/en_US/air/reference/html/flash/desktop/NativeApplication.html)

[系统托盘图标](http://help.adobe.com/en_US/air/reference/html/flash/desktop/SystemTrayIcon.html)

[码头图标](http://help.adobe.com/en_US/air/reference/html/flash/desktop/DockIcon.html)

# string - 在处理中调用 split 后如何比较字符串？

> ID：12371559
> 
> 赞同：1
> 
> 时间：2012-09-11T14:04:29.463
> 
> 标签：string, match, processing

我正在比较文本文件中的字符串，但由于某种原因它们永远不匹配。如果我用红宝石做这很容易，但在处理过程中我无法让它工作。这是有效的红宝石代码：

```
f=File.open("priceMap_current_new.txt")

f.each do |str| 
    arrstr=str.split(";")
    if arrstr.length==1
        puts arrstr[0].inspect if arrstr[0]=="next\n"
    end
end 
```

现在这是不起作用的处理版本，*实际上它甚至在不读取文件的情况下也不起作用*：

```
String[] mystr={"number;zero","number;one","number;two","number;three","number;four"};

for(int i=0;i<mystr.length;i++){
  String[] numbers=split(mystr[i],";");
  if(numbers[0]=="number"){
    println("shoooooooooooooooooout");
  }
} 
```

另外我想问一下是否有一种方法可以检查像 ruby​​ 这样的元素，它非常方便，因为如果我在处理中打印 pts[0] 我会在它实际上是“next\n”时得到“next”，或者如何检查数据类型进行中。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:11:39.447

采用`if (numbers[0].equals("number"))`

来自：[处理 doco](http://processing.org/reference/String.html)

> 要比较两个字符串的内容，请使用 equals() 方法，如“if (a.equals(b))”，而不是“if (a == b)”。

# c# - 如何在 Windows 8 Metro 应用程序中显示用户提示对话框？

> ID：12371566
> 
> 赞同：3
> 
> 时间：2012-09-11T14:04:47.247
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我想从模式窗口中为我的应用程序获取一些用户输入，例如名称、DOB 等
，为此我需要显示一个包含文本框和其他控件的对话框。
通常在 WinForms/WPF 中，我会创建一个从 Form/Window 类继承的类，并使用 Show/ShowDialog 方法向用户呈现表单
如何在使用 XAML/C# 的 Windows 8 Metro 应用程序中实现此行为？
我已经查看了命名空间`MessageDialog`下的类， 但它只显示像经典 MessageBox 这样的消息。 我看过另一门课，也不确定这是否可以用于我期望的行为。`Windows.UI.Popups`

`CoreWindowFlyout`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T14:11:46.533

`UserControl`您可以简单地使用所有必需的输入（例如es）创建一个自定义，`TextBox`然后使用[`Popup`](http://msdn.microsoft.com/en-us/library/windows/apps/BR227842)类显示它。

例如：

```
Popup myPopup = new Popup();
myPopup.Child = new CustomUserControl();
myPopup.IsOpen = true; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T17:57:59.403

根据 MBZ 的回答，您是否尝试过查看[“ **Windows 8 应用程序示例 - C#、VB.NET、C++、JavaScript** ”](http://code.msdn.microsoft.com/windowsapps/Windows-8-Modern-Style-App-Samples) ，尤其是[“ **XAML 弹出示例**](http://code.msdn.microsoft.com/windowsapps/XAML-Popup-sample-5ae00a42)”。

# c++ - 删除未引用的动态内存

> ID：12371568
> 
> 赞同：1
> 
> 时间：2012-09-11T14:04:51.553
> 
> 标签：c++, dynamic, memory-leaks

如果我在 C++ 中有以下部分代码：

```
class X {
   ...
};

class Y {
public:
  Y(X*) {...};
  ...
};

void main () 
{
  X* px = new X;
  new Y(px);
  ... // ***
} 
```

如何删除在 main 中创建的类 Y 的对象？( *** ) 只允许添加新的代码行而不是...，而不是更改现有的代码行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:37:04.343

**免责声明**永远不要写这样的代码；尽可能避免使用动态对象，如果您确实需要它们，请始终使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)以一种直接、异常安全的方式管理它们。

将第一个替换为`...`：

```
#define void int 
```

因为`void main ()`是无效的，我的编译器拒绝它。如果您的编译器功能失调，这可能不是必需的。

将第二个替换为：

```
WTF() = this; 
```

将指向需要删除的对象的指针存储在稍后定义的静态变量中。请注意，这只允许我们一次控制一个这样的对象；但是，考虑到疯狂的要求，我想不出更好的方法来提供它。如果构造函数参数可用，那么我们可以将它存储在一个非静态成员中`X`；但是这个参数是未命名的，所以我们不能用它做任何事情。

将第三个替换为：

```
static Y *& WTF() {static Y * y; return y;} 
```

给我们一个静态变量来存储指针。它不能是全局或静态类成员，因为它们必须在类定义之外定义。

现在我们可以将第四个替换为：

```
delete Y::WTF();
delete px; 
```

如果没有奇怪的要求，您可以将整个混乱替换为：

```
int main() {
    X x;
    Y y(&x);
} 
```

所有这一切的教训是：如果你以正确的方式进行，C++ 中的内存管理非常简单，如果你以错误的方式进行，则非常复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T15:05:44.123

我完全同意 Mike 的回答，但我想举一个*工作*代码的例子，而不是 Luchian 的

```
class X {
public: void*data;
};

class Y {
public:
  Y(X*px)
  { px->data = this; };
};

int main () 
{
  X* px = new X;
  new Y(px);
  delete static_cast<Y*>(px->data);
  return 0;
} 
```

# jquery - 如何在某些事件后（重新加载后）激活 Bootstrap 选项卡？

> ID：12371573
> 
> 赞同：0
> 
> 时间：2012-09-11T14:05:05.767
> 
> 标签：jquery, twitter-bootstrap

我有这种情况：在第二个选项卡上有一个带有提交按钮的表单 - 我希望在提交后激活第二个选项卡，但是默认情况下第一个选项卡是活动的。

我在 Bootstrap 网站上查看了一些东西 - [http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)，但找不到我想找到的信息，

我的 HTML：

```
 <ul id="myTab" class="nav nav-tabs">
    <li class="reports active left"><a href="#home" data-toggle="tab" >Details</a></li>
    <li class="reports right not_active" ><a href="#profile" data-toggle="tab" >Analytics</a></li>
  </ul> 
```

我可以像这样激活标签：

```
 $('#myTab a:last').tab('show'); 
```

单击后我不能简单地调用它，因为页面已重新加载。

我应该添加一些通知程序，该表单已被替换或更好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:07:15.467

如果它是一个选项，您可以使用[$.ajax()](http://api.jquery.com/jQuery.ajax/)发布表单，而不是进行普通的表单发布，并在成功回调中激活按钮。

```
$("#my-form-id").submit(function () {
    $.ajax({
      url: "my-form-handler.php",
      type: "POST",
      data: $("#my-form-id").serialize(),
      success: function(data) {
        $('#myTab a:last').tab('show');
      }
    });
    return false;
}); 
```

# java - 在我自己的班级中调用 clone()

> ID：12371575
> 
> 赞同：0
> 
> 时间：2012-09-11T14:05:12.920
> 
> 标签：java, clone

我知道**Object**类中有一个`clone()`方法被声明为，这意味着我可以在自己的类中调用，因为每个类都继承自**Object**类，例如： **`protected``clone()`**

 ****```
public class CloneTest
{
    public static void main(String args[])
    {
        Employee employee1 = new Employee(...);
        Employee employee2 = employee1.clone(); // but here has 2 errors
    }
}

class Employee
{
    ...
} 
```

第一个错误是关于“对象中的访问保护”
第二个错误是“不兼容的类型”
为什么会发生这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:07:52.520

如果没有被覆盖，[clone 方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#clone%28%29)将返回一个 Object。所以你必须转换结果：

```
Employee employee2 = (Employee) employee1.clone(); 
```

第一个错误与我们看不到的 Employee 类的内容有关。它会覆盖克隆方法吗？它应该，这是从被调用类的其他类访问它的条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:19:48.900

你的`Employee`班级应该看起来像这样`clone()`才能工作：

```
public class Employee implements Cloneable {
    ...

    public Employee clone() {
        try {
            return (Employee) super.clone();
        }
        catch(CloneNotSupportedException e) {
            throe new IllegalStateException("I forgot to implement cloneable");
        }
    }

    ...
} 
```

第一个错误是因为`clone`在类中有受保护的访问，`Object`第二个错误是因为它`Object`默认返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:12:26.547

第一个错误是因为`.clone`在 Object 类中受到保护。它不公开。

访问对象方法的唯一`.clone()`方法是知道它有一个具有公共`.clone()`方法的编译时类型。

类中的覆盖`clone`方法`Employee`

```
 class Employee implements Cloneable
{
   @Override
   protected Employee clone() throws CloneNotSupportedException {
    // TODO Auto-generated method stub
    return (Employee)super.clone();
}
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:14:34.457

您需要做一些事情才能使用克隆方法。见：[http ://www.javapractices.com/topic/TopicAction.do?Id=71](http://www.javapractices.com/topic/TopicAction.do?Id=71)****

# android - Android CameraView 在三星 Galaxy S2 上以低分辨率启动

> ID：12371576
> 
> 赞同：2
> 
> 时间：2012-09-11T14:05:18.973
> 
> 标签：android, android-camera, qr-code, zbar-sdk

我的一个屏幕中有一个 FrameLayout。我在我的代码中这样引用它：

`preview = (FrameLayout)findViewById(R.id.preview);`

我在 FrameLayout 中嵌入了一个 CameraPreview 对象（扩展了 SurfaceView，来自 ZBar SDK 用于 QR 解析），如下所示：

`scanner.setConfig(0, Config.Y_DENSITY, 3);
mPreview = new CameraPreview(this, mCamera, getPreviewCallback(), autoFocusCB);
if(preview.getChildCount()>=1)
preview.removeAllViews();
preview.addView(mPreview);`

现在，当我在我的一款测试手机三星 Galaxy 3(GT-I5801) 上运行它时，一切正常，并且 QR 解析正常。但如果我用三星 Galaxy S2 或三星 Ace 扫描它，该应用程序最初会以低分辨率或无法对焦的相机启动。如果我把它放在一个非常明亮的屏幕上，它也无法自动调整它的白平衡。但是，如果我从“相机”选项卡导航到应用程序中的另一个选项卡并返回，相机就会开始正常工作。

任何解决此问题的帮助将不胜感激。与屏幕或相机分辨率有关吗？或者如果有人知道，ZBar SDK 中的任何内容？或者几乎总是这样，我错过了什么？再次感谢您阅读本文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:04:12.727

我查看了来源，似乎它试图开始连续自动对焦，但这并不适用于任何地方。而我对安卓相机的经验是，即使宣传了功能，也不意味着它可以工作并且可以使用（在分辨率设置上被烧毁了一次）。在配置相机时，您必须尽可能地进行防御并为问题做好准备。

我为 JavaOCR 项目开发了我自己的摄像头管理，它似乎工作正常（虽然 IU 不能保证它可以在任何地方工作，但你可以参考示例）：

[http://javaocr.svn.sourceforge.net/viewvc/javaocr/trunk/demos/](http://javaocr.svn.sourceforge.net/viewvc/javaocr/trunk/demos/)

（如果你不喜欢自己编译，这个应用程序是建立在这个库上的：

[https://play.google.com/store/apps/details?id=de.pribluda.android.ocrcall&feature=search_result#?t=W251bGwsMSwyLDEsImRlLnByaWJsdWRhLmFuZHJvaWQub2NyY2FsbCJd](https://play.google.com/store/apps/details?id=de.pribluda.android.ocrcall&feature=search_result#?t=W251bGwsMSwyLDEsImRlLnByaWJsdWRhLmFuZHJvaWQub2NyY2FsbCJd)）

# android - Android应用内购买：在取消购买中没有收到IN_APP_NOTIFY广播意图

> ID：12371579
> 
> 赞同：0
> 
> 时间：2012-09-11T14:05:27.543
> 
> 标签：android, in-app-purchase, in-app-billing

Android InApp Purchase 当请求购买发送成功时，Google Play 应用程序发送一个 RESPONSE_CODE 广播意图 RESULT_OK 表示请求已成功发送到 Google Play。当请求的交易改变状态时（例如，购买成功地记入信用卡或用户取消购买），Google Play 应用程序根据 google play docs 发送 IN_APP_NOTIFY 广播意图。但是当用户取消购买时，我没有收到 IN_APP_NOTIFY 广播意图。我错了还是谷歌播放文档有任何问题。

请提供解决方案。提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:54:16.273

MarketBillingService 发送

```
public static final String ACTION_NOTIFY = "com.android.vending.billing.IN_APP_NOTIFY"; 
```

当用户取消他的购买时，并且在我的所有应用程序中都正确触发了此事件。您需要提供一些来源和清单文件以获得更多帮助。

# wpf - 元素属性内的 XAML 绑定将不起作用

> ID：12371588
> 
> 赞同：1
> 
> 时间：2012-09-11T14:05:55.323
> 
> 标签：wpf, xaml, binding, properties, element

我也许可以将标题中的描述做得更好一些。

这就是场景。

我有一个继承自 DependencyObject 的类 RecordNavigationDescriptor。里面有一个依赖属性，在这个范围内我们称之为“MyObject”。

我想将此对象分配给我的用户控件的标记属性。我希望'MyObject' dp 应该指向我的用户控件的控件之一。

```
<UserControl x:Class="ucTest"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:local="clr-namespace:Exchange"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Name="MyTextBlock" FontSize="72" FontWeight="ExtraBold" Text="Testing...."/>
        <Button VerticalAlignment="Bottom" Click="Button_Click">Click Me</Button>
        <Grid.Tag>
            <local:RecordNavigationDescriptor MyObject="{Binding ElementName=MyTextBlock}"  FriendlyName="Testing... Testing..."/>
        </Grid.Tag>
    </Grid>
</UserControl> 
```

此绑定将不起作用。因此，“MyObject”将为 Null。

然而，

```
<UserControl x:Class="ucTest"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:local="clr-namespace:Exchange"
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <TextBlock Name="MyTextBlock" FontSize="72" FontWeight="ExtraBold" Text="Testing...."/>
        <Button VerticalAlignment="Bottom" Click="Button_Click">Click Me</Button>
        <local:RecordNavigationDescriptor MyObject="{Binding ElementName=MyTextBlock}" FriendlyName="Testing... Testing..."/>
    </Grid>
</UserControl> 
```

这将起作用。

那么，问题的原因是什么？

我是否必须将我的 RecordNavigationDescriptor 对象实例化为静态资源？然后将其分配给标签属性？

# python - python：用另一个文件的内容替换文件中的字符串

> ID：12371589
> 
> 赞同：-8
> 
> 时间：2012-09-11T14:06:00.023
> 
> 标签：python

我有 2 个文件 src 和 dest

```
#cat src
lundi,mardi,mercredi,jeudi

# cat dest
janvier fevrier 
mars avril mai  
juillet aout  
septembre octobre 
```

使用 python ，我想将文件 dest 中的字符串“mai”替换为文件 src 的内容。结果将是

```
# cat dest
janvier fevrier  
mars avril lundi,mardi,mercredi,jeudi  
juillet aout  
septembre octobre 
```

谢谢你的帮助

我尝试了那些脚本，但它是否定的

1-

```
import os, sys  
    with open("src","r") as s:  
        with open("dst","w") as d:  
            for ligne in dst:  
                sligne=ligne.rstrip().split(" ")  
                for n in sline:  
                    sline=mai  
                    dst.str.replace("mai","src") 
```

2-

```
d = open("dst","w")      
s = open("src","r")  
data=s.read()  
s.close()  
for n in dst:  
    data = data.replace("mai","s")   
    d.write(data)  
    d.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:10:19.230

1.  打开 src 和 dest 进行阅读。
2.  将它们的内容读入变量。
3.  关闭打开的文件。（如果你知道那是什么，也许可以使用上下文管理器......）。
4.  将 dest 中的 'mai' 替换为 src 的内容（使用`string.replace`）。
5.  重新打开 dest 进行写作。
6.  写入新数据。
7.  *微笑。

*可选，但强烈建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:31:25.513

谢谢大家，
我解决了我的问题。这是我的提议

```
with open("src","r") as file1:
     src = file1.read()
     src = src.rstrip()
     with open("dst","r") as file2:
         dst=file2.read()
         resultat=dst.replace('mai',src)
         with open("dst","w") as file2:
             file2.write(resultat) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T17:25:21.500

```
with open("src",'r') as file:
    src = file.read()
    file.close()

with open("dest",'r') as file:
    dest = file.read()
    file.close()

dest.replace('mai',src)

with open("dest",'w') as file:
    file.write(dest)
    file.close() 
```

# cocoa - 可可：NSProgressIndicator 动画后 NSTableview 刷新

> ID：12371591
> 
> 赞同：0
> 
> 时间：2012-09-11T14:06:09.290
> 
> 标签：cocoa, nstableview, nsprogressindicator

我的可可应用需要从网络获取数据，然后在表格视图中显示内容。所以我`NSProgressIndicator`在数据下载时添加了一种旋转样式来制作动画。之后动画`NSProgressIndicator`停止并重新加载`NSTableView`. 奇怪的是表格视图重新加载后，显示的内容没有更新。然后如果你滚动表格视图，内容开始显示，就像：（ ![在此处输入图像描述](../Images/7cd9347e82a88537b50b69a37882322f.png) 上面的小矩形是框架`NSProgressIndicator`）

下面是我的代码：

```
 - (void)loadOperationData
{   
    dispatch_async(dispatch_get_main_queue(), ^{
        [self _showIndicator];
    });

    [NSThread detachNewThreadSelector:@selector(getOperationLogProcess) toTarget:self withObject:nil];
}

- (void)_showIndicator
{
    if (indicator == nil) 
    {
        indicator = [[NSProgressIndicator alloc] init];
        [indicator setStyle:NSProgressIndicatorSpinningStyle];
        [indicator setUsesThreadedAnimation:NO];// I tried to comment this, but no use
        int width = 30;
        CGRect rect = CGRectMake(0, 0, width, width);
        NSRect selfRect = [_coverView frame];
        rect.origin.x = selfRect.size.width/2 - width/2;
        rect.origin.y = selfRect.size.height/2 - width/2;
        indicator.frame = rect;
        [_coverView addSubview:indicator];
    }

    [indicator setHidden:NO];
    [indicator startAnimation:self];
}

-(void)getOperationLogProcess{

    NSDictionary *tempResutDic = [WebServiceManager getOperationLog];//using synchronous ASIHttpRequest to download data
    if ([[tempResutDic objectForKey:@"resultCode"] intValue]==100) {
        self.operationLogArray = [tempResutDic objectForKey:@"items"];

        [self performSelectorOnMainThread:@selector(reloadTableview) withObject:nil waitUntilDone:YES];//refresh UI in main thread
    }
}

-(void)reloadTableview
{
    [indicator stopAnimation:self];
    [indicator setHidden:YES];
    [operationlogTable setEnabled:YES];

    if ([_coverView isHidden])
    {
        return;
    }

    self.lastUpdateDate = [NSDate date];

    [operationlogTable reloadData];
} 
```

由 `-(void)loadOperationData`鼠标单击事件调用。而我之所以把它 `-(void)_showIndicator`放在一个调度块中是因为指标不能显示。我尝试了很多，最后选择了它。

我猜这个问题与显示指标的方式密切相关，因为如果我评论了有关指标的代码，问题就会消失。

我真的需要这个指标来让用户知道他们正在等待。所以请帮助我如何正确使用 NSProgressIndicator。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T09:31:36.727

它是由多线程引起的。

在`- (void)loadOperationData`我使用主块显示进度指示器并创建一个线程以在后台获取数据。该块是异步运行的，有时在 `-(void)reloadTableview`.

最后，我保持`- (void)loadOperationData`在主线程中被调用，并将其置于`- (void)_showIndicator`块外。然后它是固定的。

# mysql - MySQL Workbench 忽略外键

> ID：12371593
> 
> 赞同：2
> 
> 时间：2012-09-11T14:06:21.130
> 
> 标签：mysql, foreign-keys, mysql-workbench

在处理 MySQL Workbench 中的 SQL 编辑器时，我偶然发现了一些奇怪的东西，其中执行似乎忽略了外键约束。这是一个例子：

```
create database testdb;

use testdb;

create table t1 (
 `test` INT,
 PRIMARY KEY (`test`)
) ENGINE = InnoDB;

create table t2 (
`test1` INT,
`test2` INT,
 FOREIGN KEY (`test2`) REFERENCES t1(test),
PRIMARY KEY (`test1`)
) ENGINE = InnoDB;

insert into t1 values (1);

insert into t2 values (1,1);
insert into t2 values (2,2); 
```

在此示例中，`insert into t2 values (2,2);`应该会失败，因为 t1 中没有列 test 为 2 的行。

我已经在 phpMyAdmin 中进行了测试，它正确地失败并给出了违反外键约束的错误，但在 MySQL Workbench 中它没有给出错误，并且它被插入到表中（我已经用 phpMyAdmin 进行了检查） .

对我来说这不是一个大问题，因为我可以使用不同的客户端来输入 SQL，但我对它的工作原理很感兴趣，因为我对外键的理解是该值需要存在于引用的表中。

MySQL 版本是 5.5.16，引擎是 InnoDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T00:09:23.247

我建议你更新工作台，我只有在使用我的 mac 时才会遇到同样的问题，创建的表没有约束，但是如果你运行生成的 sql，它将正确创建所有内容，我使用我的 windows 来创建它，它运行良好，然后经过大量测试，我更新了我的 mac 上的工作台版本，现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:33:03.220

我建议与外键约束分开创建表。根据我使用 Workbench 的经验，使用 fk 约束需要牢记以下几点：

*   两个表都必须`InnoDB`
*   数据类型必须完全匹配（包括默认值）
*   确保外键不存在。

    `SELECT * FROM information_schema.TABLE_CONSTRAINTS WHERE CONSTRAINT_SCHEMA = DATABASE()`

*   引用的键必须是唯一键

*   检查工作台上的输出是否有错误

我会尝试按如下方式创建您的 FK 约束：

```
CREATE TABLE t1 (
 `test` INT,
 PRIMARY KEY (`test`)
) ENGINE = InnoDB;

INSERT INTO t1 VALUES (5);

CREATE TABLE t2 (
`test1` INT,
`test2` INT,
PRIMARY KEY (`test1`)
) ENGINE = InnoDB;

ALTER TABLE t2 ADD CONSTRAINT FOREIGN KEY (test2) REFERENCES t1 (test); 
```

然后我们可以测试：

```
INSERT INTO t2 VALUES (1, 4); 
```

> 无法添加或更新子行：外键约束失败.... CONSTRAINT `t2_ibfk_1`FOREIGN KEY ( `test2`) REFERENCES `t1`( `test`))：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-03T19:50:37.633

在我看来，它与结合 server_system_Variable:"foreign_key_check" 的权限有关。

通常 Workbench 使用 Root 用户连接到数据库。这赋予了他所有的特权。并使他能够在所有查询执行之前设置 foreign_key_check=0 并在执行结束时将其设置回 1。（这在从数据转储重新填充表时很有用，并且您不想关心重新填充表的顺序）。

设置全局系统变量运行时值通常需要 SYSTEM_VARIABLES_ADMIN 或 SUPER 权限。当您创建一个没有所有权限的新用户时，它似乎可以工作。

# php - 替换PHP中每一行的第一个单词

> ID：12371594
> 
> 赞同：0
> 
> 时间：2012-09-11T14:06:21.913
> 
> 标签：php, regex, string

我的 html 视图`.htgroup`在屏幕上显示文件的内容，例如：

```
download: user1 user2 user3
movies: test test2 user1 user2 user3 
```

我想将组名（`download`和`movies`）封装在`<strong>`标签中，以便它们在浏览器中显示为粗体。我怎样才能在 PHP5 中做到这一点？我确信有一种优雅的方法可以使用类似的函数来做到这一点[`preg_replace()`](http://www.php.net/manual/en/function.preg-replace.php)，但我在正则表达式方面非常糟糕。

行分隔符是`\n`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T14:09:17.277

`str_replace`在这种情况下，您可以作弊并使用，例如`$line = "<strong>".str_replace(":", ":</strong>", $line);`，但非混乱且可靠的方法是使用正则表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:11:04.550

您没有详细说明文本的格式，所以也许是这个？

```
$htgroup = preg_replace('/^.*?:/m', '<strong>\0</strong>', $htgroup); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:16:24.217

假设每一行都由 a 分隔`\n`，一个优雅的正则表达式解决方案将是：

```
$str = "download: user1 user2 user3\n".
"movies: test test2 user1 user2 user3";

$rows = explode( "\n", $str );
foreach( $rows as $r ){
    echo preg_replace('/^([^ ]*):/', '<strong>$1</strong>:', $r);
} 
```

如果您想使用 html(-ish) 布局，那么您可能想在每一行之后添加一个换行符。但我把演示部分留给你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:21:16.513

我认为不需要正则表达式。这样的事情应该很容易做到这一点

```
$lines = file('/path/to/.htgroup');

foreach($lines as $line) {
    echo '<strong>' . str_replace(':', ':</strong>', $line) . '<br />';
} 
```

请注意添加换行符以保留浏览器中不同行的输出。

# xml - 如何使用 actionscript 在 xml 中引用相同的名称

> ID：12371595
> 
> 赞同：2
> 
> 时间：2012-09-11T14:06:22.157
> 
> 标签：xml, actionscript-3

我有一个结构像这样的 xml 文件

```
 <display>
     <service>
      <URL></URL>
       <name></name>
       <LayerGroups>
         <id></id>
         <fields>
          <field>
            <attribute>object</attribute>
            <alias>OBJECT</alias>
          </field>
          <field>
            <attribute>name</attribute>
            <alias>NAME</alias>
          </field>
        <fields>
      </LayerGroup>
     </service>
    </display> 
```

我想知道如何引用每个单独的属性。我想这将类似于***_* __ *_* ___** .display.service.LayerGroups.fields.field.attribute，但有两个“字段”和两个“属性”。我该如何区分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:08:13.963

我相信你会用索引来引用父母，所以在你的情况下

```
_______.display.service.LayerGroups.fields.field[0].attribute, 
```

对于第一个，和

```
_______.display.service.LayerGroups.fields.field[1].attribute, 
```

对于第二个。

访问 XML 时，如果有多个同名标签，您将在动作脚本内的标签末尾使用索引。具有相同名称的标签集合中的第一个将是 [0]，对于具有该名称的每个后续标签，递增 1。这是假设所有标签在 XML 文档结构中处于同一级别。

看到[这个](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e6b.html)

# objective-c - 雅虎天气API解析

> ID：12371598
> 
> 赞同：0
> 
> 时间：2012-09-11T14:06:33.980
> 
> 标签：objective-c, ios, json, macos, yahoo-weather-api

如何解析从链接收到的以下 JSON 的风速 `http://weather.yahooapis.com/forecastjson?w=2502265`。我从中得到了一个垃圾值，但正确地得到了其余的值。谁能让我知道我怎样才能摆脱它的风速？

```
{"units":{"temperature":"F","speed":"mph","distance":"mi","pressure":"in"},"location":{"location_id":"USCA1116","city":"Sunnyvale","state_abbreviation":"CA","country_abbreviation":"US","elevation":82,"latitude":37.39,"longitude":-122.03},"wind":{"speed":0,"direction":"CALM"},"atmosphere":{"humidity":"86","visibility":"10","pressure":"30.21","rising":"falling"},"url":"http:\/\/weather.yahoo.com\/forecast\/USCA1116.html","logo":"http:\/\/l.yimg.com\/a\/i\/us\/nt\/ma\/ma_nws-we_1.gif","astronomy":{"sunrise":"06:27","sunset":"18:11"},"condition":{"text":"Fair","code":"33","image":"http:\/\/l.yimg.com\/a\/i\/us\/we\/52\/33.gif","temperature":49},"forecast":[{"day":"Today","condition":"PM Showers","high_temperature":"64","low_temperature":"47"},{"day":"Tomorrow","condition":"Partly Cloudy","high_temperature":"62","low_temperature":"45"}]}

NSString *linkForWoeid = [NSString stringWithFormat:@"http://where.yahooapis.com/geocode?location=%@,%@&flags=J&gflags=R&appid=zHgnBS4m",latitude,longitude];
         NSURL *woeid = [NSURL URLWithString:linkForWoeid];
         NSData *WoeidData = [NSData dataWithContentsOfURL:woeid];
         if (WoeidData != NULL)
         {
             NSError *woeiderr = nil;
             //NSLog(@"linkForWoeid:%@woeid:%@woeidData:%@",linkForWoeid,woeid,WoeidData);
             NSDictionary *response1=[NSJSONSerialization JSONObjectWithData:WoeidData options:NSJSONReadingMutableContainers error:&woeiderr]; 
             NSDictionary *woeidDict = [[[[response1 objectForKey:@"ResultSet"]objectForKey:@"Results"]objectAtIndex:0]objectForKey:@"woeid"];

             NSString *address=[NSString stringWithFormat:@"http://weather.yahooapis.com/forecastjson?w=%@",woeidDict];
             NSURL *url=[NSURL URLWithString:address];
             NSData *data=[NSData dataWithContentsOfURL:url];
             NSError *eqw=nil;
             if (data != NULL)
             {
                 NSDictionary *response=[NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&eqw]; 
                 //NSLog(@"response:%@",response);

                 NSString *highTempDict = [[[response objectForKey:@"forecast"]objectAtIndex:0] objectForKey:@"high_temperature"];
                 NSString *temp = [highTempDict stringByAppendingFormat:@" 'F"];
                          NSString *windSpeed = [[response objectForKey:@"wind"] objectForKey:@"speed"];
                          NSLog(@"wind :%@",windSpeed);
                          if (windSpeed == 0)
                          {
                              NSLog(@"insideif");
                          windSpeed = @"0";
                          }

                 NSString *imageView = [[response objectForKey:@"condition"]objectForKey:@"image" ]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:37:07.930

嗨 Rasi 请使用这里`NSNumber`而不是`NSString`这里

```
NSNumber *windSpeed = [[response objectForKey:@"wind"] objectForKey:@"speed"]; 
```

因为`JSON`它以整数值（不带引号）的形式出现，所以它不是`NSString`但是`NSNumber`

你可以得到它的字符串值`[windSpeed stringValue];`

# c# - 为什么从整数到字节的隐式转换不能与条件运算符一起使用？

> ID：12371601
> 
> 赞同：1
> 
> 时间：2012-09-11T14:06:38.760
> 
> 标签：c#, windows-runtime

byte的[MSDN 页面](http://msdn.microsoft.com/en-us/library/5bdb6693%28v=vs.110%29.aspx)说您可以像这样声明一个字节：

```
byte myByte = 255; 
```

然后

> 在前面的声明中，整数文字 255 隐式地从 int 转换为 byte。如果整型字面量超出字节范围，则会发生编译错误。

所以我很难理解为什么下面给我一个编译错误'不能隐式地将类型'int'转换为'byte'）

```
byte value = on ? 1 : 0; // on is defined as a bool earlier 
```

我在 VS 2012 上将其编译为 Windows Store App 项目，如果这有什么不同的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:09:32.013

因为这：

```
on ? 1 : 0 
```

不是整数*文字*。它是一个返回整数的表达式。此外，直到运行时才能评估此表达式。

当有文字时，编译器可以在编译时评估它并确保它满足任何范围要求 - 正如页面所说，如果值超出范围，则由编译器产生错误。

从您的同一[页面](http://msdn.microsoft.com/en-us/library/5bdb6693%28v=vs.110%29.aspx)：

> 您不能将较大存储大小的非文字数字类型隐式转换为字节。

* * *

根据@Jeppe Stig Nielsen 的评论 - 如果值是常量（它不必是第一页所说的文字），它也可以工作。C# 规范说：

> **6.1.9 隐式常量表达式转换**
> 
> 隐式常量表达式转换允许以下转换：
> 
> *   类型的常量表达式（第 7.19 节）`int`可以转换为 type `sbyte`, `byte`, `short`, `ushort`, `uint`, or `ulong`，前提是常量表达式的值在目标类型的范围内。
>     
>     
> *   type 的常量表达式`long`可以转换为 type `ulong`，前提是常量表达式的值不是负数。

# windows-8 - 必须将 FlagsAttribute 应用于 UInt32 枚举

> ID：12371603
> 
> 赞同：1
> 
> 时间：2012-09-11T14:06:42.343
> 
> 标签：windows-8, microsoft-metro

阅读完 Windows 8 应用程序认证要求后，我想知道他们为什么这么说：

• 必须将 FlagsAttribute 应用于 UInt32 枚举。

•不得将FlagsAttribute 应用于Int32 枚举。

背后的原因是什么？

目前可以在[http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx找到认证要求](http://msdn.microsoft.com/en-us/library/windows/apps/hh694083.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T01:59:32.600

在 WinRT 中使用枚举有两种情况：作为枚举值常量和作为位域值常量。枚举值形式表示为有符号整数（因为它是枚举的），位域形式表示为无符号整数（允许所有 32 位用于标志）。所有位域枚举都必须具有 FlagsAttribute。

验证逻辑中的此规则强制枚举的基础类型在给定 FlagsAttribute 的值的情况下是正确的。

这很重要，因为如果枚举的基础类型已签名，则某些语言投影将无法正确使用带有 FlagsAttribute 的枚举。

# ruby - 如何运行一次 capybara 命令，然后运行一些测试

> ID：12371605
> 
> 赞同：1
> 
> 时间：2012-09-11T14:06:45.403
> 
> 标签：ruby, testing, rspec, capybara, rspec2

我有给定的测试代码：

```
 describe 'A new user', js: true do
  before do
    @new_user = Fabricate.build(:user)
  end

  it 'should sign up' do
    #login code
    visit '/'
    click_link 'Login'
    fill_in 'user[email]', :with => @new_user.email
    fill_in 'user[password]', :with => @new_user.password
    click_button 'Login now'
    #login code end

    page.should have_content("Hello #{@new_user.first_name}!")
    current_path.should == dashboard_path
  end

  it 'should receive a confirmation mail' do
    #same login code again
    visit '/'
    click_link 'Login'
    fill_in 'user[email]', :with => @new_user.email
    fill_in 'user[password]', :with => @new_user.password
    click_button 'Login now'

    mail = ActionMailer::Base.deliveries.last
    assert_equal @new_user.email, mail['to'].to_s
  end
end 
```

现在我想添加更多测试。为避免代码加倍，如何在所有测试之前运行一次水豚登录代码？一种解决方案是将登录代码放在 before 方法中。另一种方法是创建一个方法 do_login，将代码放入其中并像这样运行每个测试：

```
it 'should do something after login' do
  do_login
  #test code here
end 
```

但是对于这两种解决方案，代码都会针对每个测试运行，这不是我想要的。将登录代码放入 a`before(:all)`也不起作用。

我怎样才能运行一些水豚代码，然后在此之后进行所有测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:20:21.827

您不能运行一次 capybara 代码然后运行所有测试。你总是从头开始。您提出的使用 before(:each) 或辅助方法的解决方案是唯一的可能性。（可以在 before(:all) 之前运行一些 ruby​​，例如在此处创建事务[检查](https://www.relishapp.com/rspec/rspec-rails/docs/transactions)之外的对象，但不是 Capybara）

为了加快您的规范，您可以在单独的规范中测试登录功能，然后以某种方式对身份验证进行存根，但这取决于您的实现。

如果您使用的是设计检查设计维基：[https://github.com/plataformatec/devise/wiki/How-To:-Controllers-tests-with-Rails-3-(and-rspec)](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-tests-with-Rails-3-(and-rspec))

# visual-studio - Visual Studio 2012 过时的 DLL

> ID：12371611
> 
> 赞同：3
> 
> 时间：2012-09-11T14:06:59.370
> 
> 标签：visual-studio, dll, deployment, visual-studio-2012, installshield

## 介绍

我不知道这是一个错误还是我完全错过了一些东西。

我有一个项目（Windows 服务），我们称之为 WINSERV。我有 3 个 DLL，它依赖于来自 3 个单独的项目（项目 A、B、C）。但是 A 依赖于 C。而 B 依赖于 A 和 C。

使用 InstallShield LE 构建安装程序时，出于某种原因，我的项目 C 始终是我无法更改的 STALE 版本。我增加版本，“make clean && rebuild”，安装（在远程服务器上）总是包含 STALE 版本。

我将每个依赖于 C 的项目设置为不“复制到本地”，因此允许 Project WinServ 维护“引用”本身，并将其复制到安装程序。

## 问题

但同样，无论我做什么，当我安装它时，它都是过时的版本。几个小时后，我确实设法解决了这个问题，方法是删除项目 WINSERV 上的“复制到本地”，并将项目 C 作为应用程序数据（项目 C 的主要输出）的补充添加到 InstallShield 安装项目。这似乎有效！！！！

## 问题

我确实尝试了一千次“MAKE CLEAN”。我在构建和创建安装程序之前检查了 Project C DLL 版本，它总是陈旧的旧版本。

任何人都可以解释这个吗？还是错误？

PS。InstallShield LE 不提供 Windows 服务，因此如果您阅读本文，请不要被抓住。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:06:15.707

听起来像我遇到的类似问题。

出于某种原因，InstallShield 有时会从临时 ASP.NET 文件夹中获取 DLL（即使您的项目不是 ASP）

尝试清除文件夹：C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:58:47.957

这绝对是 Visual Studio 2012 中的一个错误。我设法以以下方式复制：

在打开一个项目时（参考假设是 MYSQL 5.1.4）。然后我开始卸载 MySQL 连接器并安装 5.1.7。我关闭 Visual Studio 2012 并重新编译，一切正常。

但是，当我使用 InstallShield 构建时，尽管它已被卸载，但它仍然引用 5.1.4。我的想法是它将它缓存在某个地方并在构建过程中稍后访问它。

我如何解决它，是在安装现有 DLL 的新/旧/不同版本之后，然后我重新启动我的机器，现在一切都很好。

希望这可以帮助某人

# time - clock_gettime 机器之间的速度差异

> ID：12371612
> 
> 赞同：1
> 
> 时间：2012-09-11T14:07:00.983
> 
> 标签：time, clock, latency, gettime

我正在尝试使用`clock_gettime(CLOCK_MONOTONIC, &tp)`时间戳，我发现它在各种机器上具有非常不同的性能。例如，在配备 Xeon X5670 处理器、运行内核 2.6.27 的机器上，每次调用需要 682ns，而在另一台使用相同处理器、运行内核 2.6.18 的机器上，每次调用需要 249ns。在具有运行 2.6.27 的 X5472 处理器的第三台机器上，每次调用需要 183ns。

什么可以解释这些差异？我可以使用内核选项或其他设置来改善这些调用的延迟吗？

谢谢。

艾略特

# database - 键值对的算法，其中键是字符串

> ID：12371618
> 
> 赞同：0
> 
> 时间：2012-09-11T14:07:35.650
> 
> 标签：database, algorithm, search, indexing, inverted-index

我有一个问题，其中有大量的字符串或短语，它可能从 100,000 扩展到 100Million。当我搜索一个短语时，如果找到它会给我 ID 或数据库索引以供进一步操作。我知道哈希表可以用于此，但我正在寻找其他算法，它可以为我提供基于字符串生成索引的服务，也可以在自动完成等其他一些功能中有用。

我根据一些 SO 线程读取后缀树/数组，它们服务于目的，但消耗的内存超出了我的承受能力。有什么替代方法吗？

因为我的搜索只在数百万个字符串的巨大列表中。没有文档，没有对 lucene 等搜索引擎不感兴趣的网页。

还阅读倒排索引听起来很有帮助，但我需要学习哪种算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T01:34:31.090

如果此数据库索引在 MS SQL Server 中，您可以使用 SQL 全文索引获得良好的结果。其他 SQL 提供程序可能具有类似的功能，但我无法提供帮助。

查看：[http ://www.simple-talk.com/sql/learn-sql-server/understanding-full-text-indexing-in-sql-server/](http://www.simple-talk.com/sql/learn-sql-server/understanding-full-text-indexing-in-sql-server/)

和

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

# facebook - Sharekit Facebook 打不开

> ID：12371620
> 
> 赞同：1
> 
> 时间：2012-09-11T14:07:43.837
> 
> 标签：facebook, sharekit

我在我的 ios 应用程序中使用 sharekit。Twitter 和电子邮件工作正常，但 Facebook 却不行。当我打开 Facebook 时，它会弹出一个带有蓝色边界的对话框，但里面没有写任何内容。左侧有一个关闭按钮，但对话框为空。有什么问题？请帮我。我还仔细检查了 SHKconfig.h 中的 Facebook APPid 和密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:25:15.587

很多人都有同样的问题。ShareKit 本身是对框架组件的业余尝试，漏洞百出，几乎一文不值。您看到的问题与 ShareKit 使用的 Facebook Connect 框架有关。显然 Facebook 已经停止了对 Connect 框架的所有支持。换句话说，你是 SOL。

# httpwebrequest - 为什么我无法在 HttpWebRequest 上获得超时？（HttpWebRequest 超时噩梦）

> ID：12371621
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:07:45.027
> 
> 标签：httpwebrequest, timeout

我在 Quartz.Net 框架中使用它。每个 Job(thread) 只有一个 Web 请求

这是检查清单：

*   所有一次性物品都用于使用块！

    ```
    using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
            using (Stream stream = response.GetResponseStream())
            using (StreamReader reader = new StreamReader(stream))
                str = reader.ReadToEnd(); 
    ```

*   ServicePointManager.Expect100Continue = false;
*   ServicePointManager.DefaultConnectionLimit = 1000;
*   服务点管理器.MaxServicePoints = 1000;
*   request.KeepAlive=false
*   请求超时 = 5000；
*   请求.ReadWriteTimeout = 5000;
*   request.ServicePoint.ConnectionLeaseTimeout = 5000;
*   request.ServicePoint.MaxIdleTime = 5000;

我正在使用秒表来测量网络请求时间。这些是日志：

异常Web请求时间：16333 ms

异常Web请求时间：8350 ms

异常Web请求时间：9846 ms

异常Web请求时间：7545 ms

异常Web请求时间：6662 ms

异常Web请求时间：18332 ms

**任何的想法？**

PS：这个问题是[Timeout supported Multithreaded Web Request的总结版](https://stackoverflow.com/questions/12353334/timeout-supported-multithreaded-web-request)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T14:00:24.190

我从这个问题中学到的唯一教训：如果您在多个线程中使用 HttpWebRequest，请不要同步使用它！

# java - 根据输入 String 值返回 Class 变量

> ID：12371628
> 
> 赞同：1
> 
> 时间：2012-09-11T14:08:03.580
> 
> 标签：java, class, generics, methods

我想创建一个接受字符串参数并返回该类型的类的方法。

例如，如果我通过`Long`，它应该返回`Long.class`

伪代码：

```
private Class<?> classReturn(String className){
return new Class<className>;
} 
```

**编辑:** : 问题是我只有像这样的值`"String"`。不是`"java.lang.String"`

**Edit2：**我在字符串中有一个变量。我想将它投射到上面的课程中。例如 String value="1"; 字符串类型=“长”；我想要这样的东西（伪代码）：

```
value = (classReturn(type)) value ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:10:19.790

```
return Class.forName(className); 
```

关于您的编辑，您不能将字符串值“转换”为长值。为了将字符串值转换为其他类型，那么您需要更复杂的东西，例如[this](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/ConvertUtils.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:10:27.013

您可以使用

```
Class.forName(className); 
```

如果您使用的是短类名，则需要实现类似的路径

转换字符串最接近的方法是假设一些约定，例如 valueOf 或采用 String 的构造函数。

```
public static <T> T parseAs(String text, String className) {
    Class clazz;
    FOUND:
    {
        ClassNotFoundException e = null;
        for (String pkg : "java.lang.,java.util.,java.math.,".split(",",-1)) {
            try {
                clazz = Class.forName(pkg + className);
                break FOUND;
            } catch (ClassNotFoundException e2) {
                e = e2;
            }
        }
        throw new IllegalArgumentException(e);
    }
    try {
        Method valueOf = clazz.getMethod("valueOf", String.class);
        return (T) valueOf.invoke(null, text);
    } catch (Exception e) {
        try {
            Constructor<T> valueOf = clazz.getConstructor(String.class);
            return (T) valueOf.newInstance(text);
        } catch (Exception e2) {
            throw new IllegalArgumentException(e);
        }
    }
}

enum BuySell {
    BUY, SELL
}
public static void main(String... args) {
    for (String className : "String,Long,Double,BigDecimal".split(",")) {
        Object o = parseAs("1", className);
        System.out.println(className + " => " + o.getClass() + " as " + o);
    }
    Object o = parseAs("BUY", BuySell.class.getName());
    System.out.println("BuySell => " + o.getClass() + " as " + o);
} 
```

印刷

```
String => class java.lang.String as 1
Long => class java.lang.Long as 1
Double => class java.lang.Double as 1.0
BigDecimal => class java.math.BigDecimal as 1
BuySell => class Main$BuySell as BUY 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:10:21.607

你正在寻找`Class.forName()`. 但是，您需要类的完全限定名称以及包。

# android - 不推荐使用/替换的方法，您如何针对所有版本？

> ID：12371629
> 
> 赞同：2
> 
> 时间：2012-09-11T14:08:07.310
> 
> 标签：android

在 Android 中很多时候，您会看到从 3.0 版开始不推荐使用方法，应该使用不同的方法。

如果您针对大多数设备（例如从 2.1 版开始），在编写应用程序时如何处理此类事情。您是否为不同的版本多次编写相同的应用程序？然后在 Google Play 中为每个 APK 创建不同的配置文件？我觉得这有点过分，没有意义。请让我知道处理这种情况的正确方法是什么

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:15:39.880

最简单的方法是简单地检查您的应用程序正在运行的版本，并采取相应的行动。IE

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
   [code for HC and up]
} else {
   [code for older versions]
} 
```

[您可以在此处](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)找到所有版本代码。请记住，您需要将应用程序`targetSdk`设置为可能的最新版本。然而，这是有风险的，因为您可以轻松使用旧平台上不可用的方法，并且您的应用程序会崩溃，因为编译器不会警告您。为了减轻这种情况，通常有助于注意您使用的是什么:)，但也可以将此类“有风险”的代码包装到库或实用程序类中，这样您就可以确定您的其他代码不会自己做这种诡计。它还有助于在[http://d.android.com/](http://d.android.com/)上的文档上设置 API 过滤器（左侧标题栏上的这些小向上/向下箭头，在“Android APIs”旁边）到您计划支持的**最低**版本。以防万一不经常使用，你有机会在那里偷看“视觉上”抓住风险

还有用于 Eclipse 的插件进行此类检查，但我自己不使用它，目前不记得它的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:31:00.420

好吧，不，我们不会创建多个应用程序。

第一个解决方案是检查这是哪个 android 版本并采取相应措施：

```
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB){
    //do something
} else {
    //do something else
} 
```

基于第一个解决方案的第二个解决方案是创建一个定义基本功能的抽象类，以及具有特定于版本实现的子类。抽象类检查版本并创建所需的子实例。您只需在需要时调用抽象方法。 [阅读更多关于它](http://developer.android.com/training/backward-compatible-ui/abstracting.html)的信息。

第一个解决方案适用于小任务。第二个更适合更复杂的情况（例如使用 tabHost 与新的选项卡导航模式）。

# environment-variables - MSBuild 无法查看从构建工作流设置的环境变量

> ID：12371630
> 
> 赞同：3
> 
> 时间：2012-09-11T14:08:13.097
> 
> 标签：environment-variables, workflow-foundation-4, tfsbuild, msbuild-4.0

这与 TFS 2010 构建系统有关。在我们的构建工作流程中，我们使用 System.Environment 类的 SetEnvironmentVariable 方法设置了几个环境变量。我已确认此环境变量已在构建服务器上正确设置，并且已设置为系统范围的环境变量。

问题是，当在此 WF 中调用 MSBuild 并编译解决方案时，我们尝试读取此环境变量的构建后事件会失败，因为它们无法看到此环境变量。

有没有办法强制 MSBuild 重新加载环境变量或强制正在运行的 WF 重新加载环境变量？我的怀疑是，即使 WF 创建了这个变量，它也不会刷新它的环境状态，因此看不到这个变量。此外，由于 WF 调用 MSBuild，它会将相同的环境状态传递给不包含此变量的 MSBuild。

**更新**

在 Visual Studio 中粘贴以下代码并运行它。SendMessageTimeOut 的延迟为 10 秒，因此请耐心等待。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.ComponentModel;

namespace EnvironmentVarTest
{
    class Program
    {
        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool
        SendMessageTimeout(
            IntPtr hWnd,
            int Msg,
            int wParam,
            string lParam,
            int fuFlags,
            int uTimeout,
            out int lpdwResult
        );

        public const int HWND_BROADCAST = 0xffff;
        public const int WM_SETTINGCHANGE = 0x001A;
        public const int SMTO_NORMAL = 0x0000;
        public const int SMTO_BLOCK = 0x0001;
        public const int SMTO_ABORTIFHUNG = 0x0002;
        public const int SMTO_NOTIMEOUTIFNOTHUNG = 0x0008;

        static void Main(string[] args)
        {
            Program p = new Program();
            string environmentVariableValue = DateTime.Now.ToLongTimeString().Replace(":", String.Empty);
            Console.WriteLine("On the CMD window that opens up after about 10 seconds, if you type %samplevar% and hit Enter, you should see: " + environmentVariableValue);
            p.SetEnvironmentVariable(environmentVariableValue);
            RefreshProcessVars();
            p.ReadEnvironmentVariable();

            p.StartCMD();
            Console.ReadLine();
        }

        void SetEnvironmentVariable(string value)
        {
            System.Environment.SetEnvironmentVariable("samplevar", value, EnvironmentVariableTarget.Machine);

        }

        static void RefreshProcessVars()
        {
            int result;
            bool callresult = SendMessageTimeout(
                 (System.IntPtr)HWND_BROADCAST,
                 WM_SETTINGCHANGE,
                 0,
                 "Environment",
                 SMTO_BLOCK | SMTO_ABORTIFHUNG | SMTO_NOTIMEOUTIFNOTHUNG,
                 10000,
                 out result);

            if (!callresult || result == 0)
            {
                int lasterror = Marshal.GetLastWin32Error();
                Win32Exception winex = new Win32Exception(lasterror);
                Console.WriteLine("Exception happened while calling SendMessageTimeOut. The exception message is " + winex.Message);
            }
        }
        void ReadEnvironmentVariable()
        {
            var x = System.Environment.GetEnvironmentVariable("smaplevar", EnvironmentVariableTarget.Machine);

        }

        void StartCMD()
        {
            Process.Start("cmd.exe");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T17:07:25.307

不幸的是，由于`MSBuild`进程在启动时传递了环境变量的缓存版本，因此该进程的命令行功能将无法看到更新的值。在我看来，您最好的选择是在构建后事件中更改该变量，或者将值存储在您可以从构建后事件中读取的介质中。

## 更新

好的，所以下面的声明（可以在[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682653%28v=vs.85%29.aspx)找到）我认为解释**了**环境变量的来源以及**为什么**您没有在`MSBuild`.

> 默认情况下，子进程继承其父进程的环境变量。

所以，两个人可以参加那场比赛，让我们广播已经发生了变化，看看是否会为我们解决这个问题。下面是应该为您执行此操作的代码。

```
[DllImport("user32.dll", CharSet=CharSet.Auto, SetLastError=true)]
[return:MarshalAs(UnmanagedType.Bool)]
public static extern bool
SendMessageTimeout(
    IntPtr hWnd,
    int Msg,
    int wParam,
    string lParam,
    int fuFlags,
    int uTimeout,
    out int lpdwResult
);

public const int HWND_BROADCAST = 0xffff;
public const int WM_SETTINGCHANGE = 0x001A;
public const int SMTO_NORMAL = 0x0000;
public const int SMTO_BLOCK = 0x0001;
public const int SMTO_ABORTIFHUNG = 0x0002;
public const int SMTO_NOTIMEOUTIFNOTHUNG = 0x0008;

int result;
SendMessageTimeout(
    (System.IntPtr)HWND_BROADCAST,
    WM_SETTINGCHANGE,
    0,
    "Environment",
    SMTO_BLOCK | SMTO_ABORTIFHUNG | SMTO_NOTIMEOUTIFNOTHUNG,
    SomeTimeoutValue,
    out result); 
```

# javascript - 如何使用jquery找到div的中心

> ID：12371638
> 
> 赞同：1
> 
> 时间：2012-09-11T14:08:31.547
> 
> 标签：javascript, jquery

我有一个带有 id 容器的 div 标签。如何使用 jquery 或 javascript 找到它的中心？

```
<div id="container"></div> 
```

这是CSS

```
#container {
    width: 300px;
    height: 300px;
    border: 1px solid red;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:11:08.550

是这个吗？

```
var cX = $('#container').offset().left + $('#container').width()/2;
var cY = $('#container').offset().top + $('#container').height()/2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:13:22.363

```
$(function(){
 var $this = $("#container");
 var offset = $this.offset();
 var width = $this.width();
 var height = $this.height();

 var centerX = offset.left + width / 2;
 var centerY = offset.top + height / 2;
 console.log(centerX ,centerY)

}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:11:29.810

你应该检查：

1.  宽度/外宽度
2.  高度/外部高度

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T14:14:50.723

jQuery way:

```
var div = $('#container');
var divCoords = { 
    x : div.width() * 0.5 , 
    y : div.height() * 0.5
}; 
```

# java - 如何避免使用Java在字符串中出现“`”和“~”符号？

> ID：12371639
> 
> 赞同：0
> 
> 时间：2012-09-11T14:08:34.220
> 
> 标签：java, regex, pattern-matching

我想避免在使用 Java 的字符串中出现“`”和“~”符号。

例如：

字符串：大家好

输出：无效

* * *

字符串：大家好~大家

输出：无效

* * *

字符串：大家好

输出：有效

* * *

字符串：大家好~e

输出：无效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:12:15.190

使用java的[`String.matches()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#matches%28java.lang.String%29)方法：

```
String input;
boolean valid = input.matches("^[^`~]*$"); 
```

正则表达式的意思是“任意数量的既不是```也不是`~`”的字符

# html - 如何在html5上制作一个简单的程序？

> ID：12371643
> 
> 赞同：-4
> 
> 时间：2012-09-11T14:08:45.650
> 
> 标签：html, xhtml

我想学习 html5 之类的新东西，请指导我使用 html5 我对 html5 编码一无所知，但我有基本 html 的背景知识，这是我的问题。

1.  html5的扩展名是什么？
2.  记事本++可以用于编码吗？或任何建议？
3.  任何一步一步教授基本 html5 的网站。
4.  请给我以蓝色背景显示 Hello World 的 html5 代码示例。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:21:39.290

HTML 不是一种[“编程语言”](http://en.wikipedia.org/wiki/Programming_language)，而是一种[“标记”语言](http://en.wikipedia.org/wiki/Markup_language)。HTML5 不仅仅是 HTML（它是更广泛的技术集，包括 JavaScript 和 CSS）。我建议熟悉我在下面列出的网站。在那里，您将找到许多学习 HTML5 的好资源。

*   [HTML5 教程](http://www.w3schools.com/html5/default.asp)--> [HTML5 教程介绍](http://www.w3schools.com/html5/html5_intro.asp)
*   [HTML5 Rocks](http://www.html5rocks.com/en/) --> [HTML5 Rocks 幻灯片](http://slides.html5rocks.com/#landing-slide)
*   [HTML5 样板](http://html5boilerplate.com/)

# jquery - 从非 href 属性加载颜色框图像

> ID：12371646
> 
> 赞同：2
> 
> 时间：2012-09-11T14:08:58.853
> 
> 标签：jquery, colorbox

我懂了：

```
$(document).ready(function(){
    $(".top_up").colorbox(
        {
            rel:'group3',
            opacity: '0.2'

        }
        );
}); 
```

然后用这个：

```
<a id="172703536171203_661714" class="top_up" rel="pics" href="FULL_IMAGE_LINK" title=""><img src='THUMBNAIL' style='border: medium solid #1A1A1A;' /></a> 
```

工作得很好..

但我希望 href="" 不是完整的图像链接，并让颜色框在 rel 属性或其他内容中查找完整的图像链接（没关系，除了 href 和 id 属性之外）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T19:42:41.613

你已经有99%了。但是，`rel`除了使用属性，您还可以使用自定义数据属性，使代码更具可读性：

```
<a data-colorbox-href="http://...">
    <img ... />
</a> 
```

然后使用颜色框实例化中的“href”选项，使用回调`data-colorbox-href`从单击的链接中获取（或其他）的值：

```
$(".top_up").colorbox({
    //all the other options you have up there, plus...
    href: function() {
        return $(this).attr("data-colorbox-href");
    }
}); 
```

# performance - 命令式编程和函数式编程的效率

> ID：12371648
> 
> 赞同：-3
> 
> 时间：2012-09-11T14:09:15.280
> 
> 标签：performance, algorithm, functional-programming, asymptotic-complexity, imperative-programming

我有一个关于IP和FP性能的问题。假设我有一个计算第 n 个斐波那契数的函数。

在命令式编程中，我可以选择使用迭代方式、递归或动态编程来计算第 n 个斐波那契数。当然，与渐近递归相比，迭代方式和动态规划会表现得更好。

在函数式编程中，假设不涉及状态，那么我只能以递归方式进行。

在这种情况下，这是否意味着与命令式编程相比，函数式编程在效率（渐近）方面的性能总是相同或更慢？

现实世界的函数式编程如何处理这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:20:03.470

没有一种递归方法可以实现斐波那契数列。您可以轻松编写一个递归函数，在 O(n) 时间内计算第 n 个斐波那契数 - 它的工作方式与迭代版本相同（即它会跟踪您计算的最后两个数字），但使用尾递归而不是命令式循环。由于许多函数式语言需要实现来执行尾调用优化，因此与迭代版本相比，甚至不会有恒定的开销。

当然，甚至还有一些方法可以在亚线性时间内计算第 n 个斐波那契数（使用封闭形式或矩阵乘法），它们在函数式语言和命令式语言中的效果一样好。

关于动态编程：完全可以用函数式语言进行动态编程。由于动态编程算法在第一次编写数组时不会更改数组的字段，因此这里与函数式编程确实没有矛盾。您所需要的只是能够在构造数组时访问数组中已构造的部分。Haskell 中存在的惰性数组可以很好地解决这个问题。

# internet-explorer-6 - MediaElement.js 在 IE6 中变白

> ID：12371652
> 
> 赞同：0
> 
> 时间：2012-09-11T14:09:27.713
> 
> 标签：internet-explorer-6, mediaelement.js

我正在测试在 IE6 中播放的 MediaElement.js。它开始工作正常，视频在那里，在 Flash 播放器中播放。但是，当我将鼠标悬停在视频上时，它会消失（完全变白）。如果我用鼠标在视频所在的位置刷新浏览器并单击它，然后我可以与控件进行一些交互，但是全屏按钮会导致它再次变白。

**编辑：**

其他一些观察：

*   即使视频是白色的，音频也会继续播放
*   如果我选择视频区域，我可以突出视频的形状
*   右键单击白色视频区域并不表示存在 Flash 组件。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:42:12.843

在按照 Paul 的建议使用 CSS 之后，事实证明，环绕视频区域的“位置：相对”样式是原因。

# z3 - Z3 是否使用了用户在“AUFLIA-p”部分中为 smtComp 结果提供的模式？

> ID：12371656
> 
> 赞同：2
> 
> 时间：2012-09-11T14:09:37.940
> 
> 标签：z3, smt

我正在测试一些简化的一般性（主要是：有向部分量词实例化）。因此，我在 smtComp 的“AUFLIA-p”部分运行了一组基准测试，无论是否简化。为了尽可能减少副作用，我有兴趣在没有（用户提供）模式的情况下运行 Z3。

我在“AUFLIA-p”部分检查了一些基准，我想知道为什么这部分的基准包含模式。也许您已经为本节运行了 Z3，并带有禁用模式的选项。最近，我刚刚放弃了一些基准测试中的模式，并观察到性能的急剧下降。

问题：
“AUFLIA-p”和“AUFLIA+p”部分之间有什么区别吗？
我如何告诉 Z3 忽略（用户提供的）模式？

问候，
Aboubakr Achraf El Ghazi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:59:55.480

AUFLIA-p 和 AUFLIA+p 之间的区别在于前者不包含模式，但后者包含。然而，SMTLIB 中只有一类基准，称为 AUFLIA。（一些）这些基准包含在运行工具之前在 SMTCOMP 期间被删除的模式。例如，比较[unscrambled benchmark](http://www.smtexec.org/exec/benchmarkDetail.php?benchmark=2297999)和[scrambled benchmark](http://www.smtexec.org/exec/benchmarkDetail.php?benchmark=2297999&scrambled)，其中第一个确实包含模式，但后者不包含。

我相信模式的去除是通过[基准加扰器](http://smtcomp.sourceforge.net/2012/tools.shtml)完成的。

# performance - 找出我的网站为何运行缓慢的最佳方法是什么？

> ID：12371657
> 
> 赞同：0
> 
> 时间：2012-09-11T14:09:51.927
> 
> 标签：performance, wordpress

> **可能重复：**
> [Wordpress 网站非常缓慢](https://stackoverflow.com/questions/2050329/wordpress-site-painfully-slow)

我的网站很慢。在图像和 javascript 方面发生了很多事情，但我已经浏览并暂时删除了网站的大部分内容并测试了速度以查看它是如何改进的，但并没有太多。我在想它一定是一些不明显可见的东西。找出什么是减慢速度的最佳方法是什么？该网站是[http://www.art-start.org](http://www.art-start.org)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:21:25.093

不是一个编程问题，但可以给你一个很好的洞察力。

我强烈建议您阅读并学习如何使用[Chrome 开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview)（让事情变得更容易）

让我大吃一惊的是您的自定义字体 (HVD_PPoster-webfont.woff) 是 450kb。

我建议做的事情是：

1.  遵循[Google PageSpeed](https://developers.google.com/speed/pagespeed/)所说的你应该做的任何事情
2.  安装其中一个 wordpress 缓存插件（[WP Super Cache](http://wordpress.org/extend/plugins/wp-super-cache/)）
3.  为您的自定义字体找到更好的解决方案

希望这可以帮助！

# iphone - 尝试启动 Boost 线程时出错

> ID：12371665
> 
> 赞同：0
> 
> 时间：2012-09-11T14:10:07.340
> 
> 标签：iphone, xcode, multithreading, boost

我在我的 iPhone 应用程序中使用 Boost 线程已经有一段时间了，只是偶然发现了一个问题。每隔一段时间，当应用程序尝试启动这样的线程时，它会在尝试调用时抛出错误`start_thread()`，并且应用程序崩溃。

我真的不知道从哪里开始调试这个 - 从调试器看来，为什么不能初始化 boost 线程似乎并不明显。需要注意的是，这只发生在应用程序运行了一段时间，并且已经成功启动了几个线程之后。

我最近一直在处理 UI，我一直在使用以下命令来确保 UI 的每次更新都在被调用时立即发生：

```
[myViewController performSelectorOnMainThread : @ selector(show_myButton) withObject:nil waitUntilDone:YES]; 
```

虽然该命令似乎有效，并且 UI 立即更新（在延迟之前），但我担心它可能是我遇到的 boost 线程问题的原因。听起来可能吗？以前有没有人经历过这样的事情，并对可能出现的问题有任何建议？

这是用于启动线程的代码：

```
void ObjectiveCPlusPlusInterface::startMyThread(void* a, myObject* b)
{
 boost::thread AVPlayerThread = boost::thread(&ObjectiveCPlusPlusInterface::myThreadFunction, this, a, b);
} 
```

（其中 a & b 是变量）

```
void ObjectiveCPlusPlusInterface::myThreadFunction(void* a, myObject* b)
{
 ...
} 
```

如您所见，`startMyThread()`尝试启动一个执行函数的 boost 线程`myThreadFunction()`。但是，`myThreadFunction()`未达到，因为启动 boost 线程会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:29:13.307

查看[手册](http://www.boost.org/doc/html/thread/thread_management.html#thread.thread_management.thread.callable_constructor)，我们看到`boost::thread`构造函数可以抛出异常。确保检查：

```
try
{
    boost::thread AVPlayerThread(&ObjectiveCPlusPlusInterface::myThread, this, a, b);

    AVPlayerThread.detach();   // or join()?
}
catch (boost::thread_resource_error const &)
{
    // resource error (print a diagnostic!)
}
catch (...)
{
    // some other exception (print a diagnostic!)
} 
```

* * *

*更新：*编辑后，我看到您没有加入或分离线程！这是不允许的。

You can put the entire block above literally inside your `startMyThread` function.

# javascript - 从 JSON 嵌套数组中检索内容

> ID：12371667
> 
> 赞同：0
> 
> 时间：2012-09-11T14:10:10.927
> 
> 标签：javascript, jquery, json

我有一个看起来像这样的 JSON 响应

```
[
    {
        "alias": "Server1", 
        "hostgroup_worst_service_state": "0", 
        "status_history": {
            "status": [
                "0", 
                "2", 
                "0", 
                "0"
            ]
        }
    }, 
    {
        "alias": "Server2", 
        "hostgroup_worst_service_state": "0", 
        "status_history": {
            "status": [
                "0", 
                "0", 
                "0", 
                "0"
            ]
        }
    }, 
    {
        "alias": "Server3", 
        "hostgroup_worst_service_state": "0", 
        "status_history": {
            "status": [
                "1", 
                "1", 
                "1", 
                "0"
            ]
        }
    }
] 
```

我可以使用 .each 迭代器函数轻松访问别名和 hostgroup_worst_state：

```
 $.each(data, function(i, item) {
   console.log(item.alias)
   console.log(item.hostgroup_worst_service_state)
} 
```

但是我很难访问状态数据。我需要以这种方式显示它们：

```
["0","2","0","0"]
["0","0","0","0"]
["1","1","1","1"] 
```

这些值接下来将用于使用 jQuery Sparklines 显示图形。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:12:07.830

您有一个对象数组，其中每个对象都有一个名为 的属性`status_history`，该属性指向另一个具有名为 的属性的对象，该属性`status`包含您所需的数组。因此，要访问此数组，请使用以下命令：

```
$.each(data, function () { 
  console.log(this.status_history.status); 
}); 
```

请注意，`this`里面`.each()`是指您迭代的*每个*对象/值。这相当于使用以下内容：

```
$.each(data, function (i, item) { 
  console.log(item.status_history.status); 
}); 
```

此外，如果您想要一个具有给定状态数据的数组，您可以使用`$.map()`：

```
var arr = $.map(data, function (el) { 
  return [ el.status_history.status ];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:15:21.070

**结果**将包含所需的数组。

```
var result = [];

for(var i = 0; i < data.length; i++) {
    result.push(data[i].status_history.status);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:16:12.613

将您的数据带到一个元素，然后说数据

```
for(i=0;i<data.length;i++)
{
 console.log(data.status_history.status);
} 
```

# python - Django 和 virtualenv - 添加到 git repo

> ID：12371668
> 
> 赞同：14
> 
> 时间：2012-09-11T14:10:12.410
> 
> 标签：python, django, virtualenv

对于可能第一个 django 应用程序，我使用以下过程创建应用程序。

```
$ virtualenv --no-site-packages django-env
$ source django-env/bin/activate
(django-env)$ pip install django
(django-env)$ django-admin.py startproject myproject 
```

现在我有两个文件夹

```
django-env
myproject 
```

我需要包含`django-env`在 git repo (git init) 中，还是只包含在 myproject.xml 中？部署时，如何处理依赖项。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-11T14:14:34.577

不要将 env 添加到 repo 中。相反，在部署之前，运行命令`pip freeze`并将输出保存在一个文本文件中，比如[requirements.txt](http://www.pip-installer.org/en/latest/requirements.html)。这个文件应该在 repo 中。在部署时在新的 virtualenv 中安装依赖项：

```
pip install -r requirements.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:46:18.313

坏主意包括 .env 在 git 上，bcs 并非所有应用程序都安装在 .env 目录中，其中一部分安装在您的系统目录中

# common-lisp - 在 Common Lisp (SBCL) 中，有没有办法检查原子的各个部分？

> ID：12371670
> 
> 赞同：2
> 
> 时间：2012-09-11T14:10:18.667
> 
> 标签：common-lisp, sbcl

例如，如果我有原子'ABCD，有没有办法确定组成原子的各个字符？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-11T19:09:03.353

这些字符不“组成一个原子”（一个原子是不同的东西；大致“不是一个列表”）。

你所拥有的就是一个*符号*。一个符号有一个名称，它被引用。您可以使用以下函数获取符号的名称`symbol-name`：

```
CL-USER > (symbol-name 'ABCD)
=> "ABCD" 
```

（请注意，两者`symbol-name`和`ABCD`表示符号，但`symbol-name`被评估，而`ABCD`不是由于引用——上面的读法与 相同`(symbol-name (quote ABCD))`。）

符号还具有其他属性，您可以通过函数`symbol-package`、`symbol-plist`、`symbol-value`或获得这些属性`symbol-function`。

有关概述，请查看[Hyperspec 的第 10 章](http://www.lispworks.com/documentation/HyperSpec/Body/10_.htm)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T14:16:59.863

要获取符号中的字符列表：

```
(coerce (string 'ABCD) 'list) ; => (#\A #\B #\C #\D) 
```

如果您首先转换符号，则可以对符号执行任何类型的常用字符串分析：

```
(string 'ABCD)                ; => "ABCD"
(char (string 'ABCD) 0)       ; => #\A
(subseq (string 'ABCD) 0 2)   ; => "AB" 
```

# django - Django：使用正则表达式更新多个对象

> ID：12371675
> 
> 赞同：2
> 
> 时间：2012-09-11T14:10:23.587
> 
> 标签：django, django-queryset

我想根据[这个](https://docs.djangoproject.com/en/dev/topics/db/queries/#updating-multiple-objects-at-once)和[这个](https://docs.djangoproject.com/en/dev/topics/db/queries/#query-expressions)文档`'blog/'`从多个对象的字段中删除子字符串：`slug`

```
>>> import re
>>> from django.db.models import F
>>> p = re.compile('blog/')
>>> Blog.objects.update(slug=p.sub('', F('slug')))
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: expected string or buffer 
```

我试图添加`str()`到最后一个字符串，它通过没有错误：

```
>>> Blog.objects.update(slug=p.sub('', str(F('slug')))) 
```

但它会插入`(DEFAULT: )`到`slug`所有对象的字段中。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2021-07-16T00:00:45.840

要在 Django 中使用查询集上的正则表达式一次更新多个对象，您可以使用[Func 表达式](https://docs.djangoproject.com/en/3.2/ref/models/expressions/#func-expressions)来访问数据库中的正则表达式函数：

```
django.db.models import F, Func, Value

pattern = Value(r'blog(/?)')  # the regex
replacement = Value(r'new-blog-slug\1')  # replacement string
flags = Value('g')  # regex flags

Blog.objects.update(
    slug=Func(
        models.F('slug'),
        pattern, replacement, flags,
        function='REGEXP_REPLACE',
        output_field=models.TextField(),
    )
) 
```

检查您的数据库供应商文档以获取详细信息和特定功能支持。

`r''`在`pattern`and中使用原始字符串`replacement`以避免必须转义反斜杠。

`replacement`使用`\n`从`n`1 到 9引用匹配的子字符串。

您可以使用`F`表达式来提供`pattern`,`replacement`和`flags`from 每个实例的字段：

```
pattern = F('pattern_field')
replacement = F('replacement_field')
flags = F('flags_field') 
```

您还可以使用`Func`表达式进行注释。

目前有一个在 Django 中添加正则表达式数据库函数的[开放拉取请求。](https://github.com/django/django/pull/12438)合并后，您可能会拥有`RegexpReplace`,`RegexpStrIndex`和`RegexpSubstr`函数表达式，`django.db.models.functions`以使您的代码更简洁，并拥有跨数据库供应商统一的单一 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:17:20.627

你不能那样做。更新完全在数据库中完成，因此它必须是可转换为 SQL 的东西，而您的代码不能。您需要遍历和更新：

```
for blog in Blog.objects.filter(slug__startswith='blog/'):
    blog.slug = blog.slug.replace('blog/', '')
    blog.save() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-06T01:27:23.940

有点晚了，但对于那些今天需要解决方案的人 **注意：Django 2.1 中的新功能。**

类替换

[文档](https://docs.djangoproject.com/en/2.2/ref/models/database-functions/)中的用法示例：

```
>>> from django.db.models import Value
>>> from django.db.models.functions import Replace
>>> Author.objects.create(name='Margaret Johnson')
>>> Author.objects.create(name='Margaret Smith')
>>> Author.objects.update(name=Replace('name', Value('Margaret'), Value('Margareth')))
2
>>> Author.objects.values('name')
<QuerySet [{'name': 'Margareth Johnson'}, {'name': 'Margareth Smith'}]> 
```

# objective-c - IOS：如何使用异步 TBXML 调用刷新 UI

> ID：12371676
> 
> 赞同：0
> 
> 时间：2012-09-11T14:10:22.973
> 
> 标签：objective-c, ios, tbxml

我正在使用 TBXML 解析 http-XML 文件并在 UILabel 和 UIImageView 中显示内容。对 XML 的调用是通过异步请求完成的。

当我查看日志时，succesblock 中的最后一个日志元素会立即打印出来。UILabel 和 UIImageview 中的更改仅在几秒钟后可见。

处理完 XML 后，如何让 IOS 直接刷新 UI？

```
// Create a success block to be called when the async request completes
TBXMLSuccessBlock successBlock = ^(TBXML *tbxmlDocument) {
    // If TBXML found a root node, process element and iterate all children
    NSLog(@"PROCESSING ASYNC CALLBACK");
    if (tbxmlDocument.rootXMLElement)
        [self traverseElement:tbxmlDocument.rootXMLElement];

    myArticle.Body = [[StringCleaner sharedInstance] cleanedString:myArticle.Body];
   // myArticle.Body = [myArticle.Body stringByConvertingHTMLToPlainText];
    self.articleBody.text = myArticle.Body;
    self.articleBody.numberOfLines= 0;
    self.articleBody.lineBreakMode = UILineBreakModeWordWrap;
    [self.articleBody sizeToFit];

    // set scroll view size
    self.articleBodyScrollView.contentSize = CGSizeMake(self.articleBodyScrollView.contentSize.width, self.articleBody.frame.size.height);

    NSURL *url = [NSURL URLWithString:myArticle.Photo];
    NSData *data = [NSData dataWithContentsOfURL:url];
    if (data != NULL)
    {
        UIImage *image = [UIImage imageWithData:data];
        // articlePhoto = [[UIImageView alloc] initWithImage:image];
        [self.articlePhoto setImage:image];
    }else {
        NSLog(@"no data");
    }

    NSLog(@"FINISHED PROCESSING ASYNC");

    // [self printArticles];
};

// Create a failure block that gets called if something goes wrong
TBXMLFailureBlock failureBlock = ^(TBXML *tbxmlDocument, NSError * error) {
    NSLog(@"Error! %@ %@", [error localizedDescription], [error userInfo]);
};

// tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:someXML]];
tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:records] 
                           success:successBlock 
                           failure:failureBlock]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:57:22.023

听起来您试图更新 UI，但不是在 UI 线程上。将您的 UILabel 和 UIImageView 更新包装到主线程上的 dispatch_async 中，例如：

```
dispatch_async(dispatch_get_main_queue(), ^
{
 [self.articlePhoto setImage:image];
}); 
```

# c#-4.0 - 我是 nhibernate 流利映射的新手。HasManytoMany 映射是否只能设置在关系的一侧？

> ID：12371680
> 
> 赞同：0
> 
> 时间：2012-09-11T14:10:42.243
> 
> 标签：c#-4.0, fluent-nhibernate, nhibernate-mapping

我为 2 个实体创建了多对多关系。但是映射只设置在一侧。例如 OrderMap 类：

```
 HasManyToMany(x => x.Fields)
            .Access.CamelCaseField(Prefix.Underscore)
            .ChildKeyColumn(ColumnNames.Field_Id)
            .ParentKeyColumn(ColumnNames.Order_Id)
            .LazyLoad()
            .Cascade.All()
            .Table(TableNames.Order_Fields_Join); 
```

但另一方面，即为 FieldMap 类。我没有指定这个映射。截至目前，Nhibernate 正在抛出错误，我不确定是否是因为这个。你能告诉我这是否正确吗？我的休眠错误是：“具有相同标识符值的不同对象已与会话相关联”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:10:22.810

不必在两侧映射多对多，正如您发布的那样，这是完全合法的。您收到的错误是因为您想要保存/更新/删除两个具有相同标识符的不同对象，这表明存在错误，因此 NHibernate 抛出。发布引发异常的代码。

# php - 无法将 PEAR 从 1.9.2 升级到 1.9.4

> ID：12371686
> 
> 赞同：2
> 
> 时间：2012-09-11T14:11:05.467
> 
> 标签：php, ubuntu, pear

我在 Ubuntu 11.10 上并试图从 1.9.2 升级到 1.9.4，但它根本不起作用。这是我按顺序执行的命令

```
$ sudo apt-get install php-pear
Reading package lists... Done
Building dependency tree       
Reading state information... Done
php-pear is already the newest version.
The following packages were automatically installed and are no longer required:
  linux-headers-3.0.0-14-generic-pae libaccess-bridge-java-jni libaccess-bridge-java
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 6 not upgraded.
$ sudo pear channel-update pear.php.net
Updating channel "pear.php.net"
Channel "pear.php.net" is up to date
$ sudo pear upgrade-all
Nothing to upgrade-all
$ sudo pear install –alldeps pear.phpunit.de/PHPUnit 
parsePackageName(): invalid package name "–alldeps" in "–alldeps"
invalid package name/package file "–alldeps"
Did not download optional dependencies: phpunit/PHP_Invoker, use --alldeps to download automatically
phpunit/PHPUnit requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHPUnit can optionally use package "phpunit/PHP_Invoker" (version >= 1.1.0)
phpunit/Text_Template requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHP_CodeCoverage requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHP_CodeCoverage requires package "phpunit/Text_Template" (version >= 1.1.1)
phpunit/PHP_CodeCoverage can optionally use PHP extension "xdebug" (version >= 2.0.5)
phpunit/PHPUnit_MockObject requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
phpunit/PHPUnit_MockObject requires package "phpunit/Text_Template" (version >= 1.1.1)
phpunit/PHP_TokenStream requires PEAR Installer (version >= 1.9.4), installed version is 1.9.2
No valid packages found
install failed 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-11T15:36:55.883

选项前有两个`-`必填`alldeps`项！尝试使用`--alldeps`and `--force`：

```
sudo pear install -–alldeps --force pear.phpunit.de/PHPUnit 
```

# git - Git：访问同事的分支

> ID：12371687
> 
> 赞同：1
> 
> 时间：2012-09-11T14:11:07.503
> 
> 标签：git

我向我们的 GitHub 存储库发出了以下拉取...

```
L.MVC4 (master *)$ git pull
remote: Counting objects: 59, done.
remote: Compressing objects: 100% (9/9), done.
remote: Total 36 (delta 29), reused 34 (delta 27)
Unpacking objects: 100% (36/36), done.
From https://github.com/CM/L.MVC4
   b002a02..82deccf  master     -> origin/master
   e690bc3..d23f567  koprod3    -> origin/koprod3
 * [new branch]      koprod4    -> origin/koprod4
Updating b002a02..82deccf 
```

...并注意到他签入的同事的 2 个分支（**koprod3**，**koprod4**）被拉出。但是，当我做一个 git 分支时，我只会得到我的分支......

```
L.MVC4 (master *)$ git branch
* master
  newbranch
  seeddata 
```

那么我如何访问他的分支机构。看来他们已经被拉走了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:15:16.423

这些是远程分支。要查看它们，请运行`git branch -r`（仅显示远程分支）或`git branch -a`（显示所有分支）。

要检查它们，请使用`git checkout -b koprod3 origin/koprod3`（较新版本的 Git 也只允许`git checkout koprod3`）。要在他们当前指向的提交处创建本地分支，请发出命令`git branch koprod3 origin/koprod3`。

当然，本地分支的名称可以是任何名称，并且不能与远程名称相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T14:14:56.357

您将要创建一个跟踪到他的分支的本地分支，例如：

```
git checkout -b koprod3 origin/koprod3 
```

现在你有一个同名的分支，在起源上跟踪他的分支。上面的语句实际上检查了那个分支，但`git branch koprod3 origin/koprod3`如果你只是想创建它，你可以使用它，然后再检查。

# objective-c - 创建瞬态关系属性

> ID：12371688
> 
> 赞同：0
> 
> 时间：2012-09-11T14:11:08.187
> 
> 标签：objective-c, ios, core-data

我认为这是一个简单的问题，但我以某种方式泄露了核心数据中的对象。我在核心数据中有一个简单的一对一关系。

```
 Person           <-------->         Address

        -name                                -city
        -email                               -country 
```

人物模型相对简单，只有几个属性。但是，我想在 Person 类中添加 getter 以从 person 类本身访问城市和国家。所以，我做了类似的事情，

```
@interface Person:NSManagedObject
    @property(nonatomic, strong) NSString *name;
    @property(nonatomic, strong) NSString *email;
    @property(nonatomic, strong) Address *address;
    -(NSString*)city;
    -(NSString*)country;
@end

@implementation Person
  -(NSString*)city{
     [self willAccessValueForKey:@"address"];
     NSString *c = [self valueForKeyPath:@"address.city"];
     [self didAccessValueForKey:@"address"];
   }

   -(NSString*)country{
     [self willAccessValueForKey:@"address"];
     NSString *c = [self valueForKeyPath:@"address.country"];
     [self didAccessValueForKey:@"address"];
   }

@end 
```

有了这些 getter，我就可以通过 Person 模型中的简单 getter 访问城市；

```
 person.city   and  person.country 
```

但是，我觉得这不是正确的做法。如何实现此功能以确保不泄漏内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:30:32.213

您不能直接从 Person 访问城市或国家/地区，您可以访问...

```
Person.Address.city
Person.Address.country 
```

并且不需要实施：

```
-(NSString*)city;
-(NSString*)country; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:12:02.913

您忘记了代码中的 return 语句，但我猜它们在您使用的实际代码中。

我没有看到代码本身有任何泄漏。但是请记住，您有责任在完成时对所有事情负责，因为核心数据关系会固有地创建保留周期。查看[核心数据和保留周期](https://stackoverflow.com/questions/1789974/core-data-and-retain-cycles)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T16:14:39.870

正如 Ganee 所说，您可以访问

```
person.address.city 
```

但是如果你绝对需要 city 方法，你应该使用生成的属性：

```
- (NSString*)city {
    return address.city;
} 
```

尽管这会隐藏您的关系访问权限，但请确保这是您想要的。

关于您的内存泄漏，您需要一个非常非常非常好的理由不将 ARC 用于新项目。

# .net - 如何将文件拖放到列表框中的 WPF Image 控件上

> ID：12371690
> 
> 赞同：1
> 
> 时间：2012-09-11T14:11:08.843
> 
> 标签：.net, wpf, xaml

我有一个带有这个 xaml 的 WPF 窗口：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <Style TargetType="Border" x:Key="BorderStyle">
            <Setter Property="BorderBrush" Value="Black"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        <Style TargetType="Image" x:Key="ImageStyle">
            <Setter Property="Height" Value="75"/>
            <Setter Property="Width" Value="75"/>
            <Setter Property="AllowDrop" Value="True"/>
        </Style>
    </Window.Resources>
    <Grid>
        <GroupBox>
            <Grid>
                <ListBox x:Name="listbox">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal" >
                                <TextBlock Text="{Binding}"/>
                                <Border Style="{StaticResource BorderStyle}">
                                    <Image Style="{StaticResource ImageStyle}" Drop="ThisDrop"/>
                                </Border>
                                <Border Style="{StaticResource BorderStyle}">
                                    <Image Style="{StaticResource ImageStyle}" Drop="ThatDrop"/>
                                </Border>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </GroupBox>
    </Grid>
</Window> 
```

而这背后的代码：

```
using System.Linq;

namespace WpfApplication2
{
    public partial class MainWindow
    {
        public MainWindow()
        {
            InitializeComponent();
            listbox.ItemsSource = Enumerable.Range(1, 3);
        }

        private void ThisDrop(object sender, System.Windows.DragEventArgs e)
        {
            // do something
        }

        private void ThatDrop(object sender, System.Windows.DragEventArgs e)
        {
            // do something else
        }
    }
} 
```

当我从 Windows 资源管理器将文件拖放到图像控件上时，我很难让这些放置事件触发。

项目： [https ://github.com/ronnieoverby/WpfApplication2](https://github.com/ronnieoverby/WpfApplication2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:51:49.460

看起来问题是尚未设置图像控制源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:42:52.857

这是一个基本的拖放操作：

```
private void Image_DragEnter(object sender, DragEventArgs e)
{
    if (e.Data.GetDataPresent(DataFormats.FileDrop))
    {
        // Signal the user they can copy files here
        e.Effects = DragDropEffects.Copy;
        e.Handled = true;
    }
}

private void Image_Drop(object sender, DragEventArgs e)
{
    string[] fileList = e.Data.GetData(DataFormats.FileDrop) as string[];

    if (fileList != null)
    {
        foreach (string file in fileList)
        {
            // Do stuff
        }

        e.Handled = true;
    }
} 
```

我通常实现 DragOver 并让 DragEnter 简单地调用 DragOver 因为我有时会发现 DragEnter 事件并不总是触发。但那是使用 Windows 窗体，WPF 可能不需要。

设置 DragDropEffects 做了两件事。它会更改图标，以便用户对将要发生的事情（复制、移动等）有一个视觉提示。它还告诉调用者（启动拖放的应用程序）发生了什么，因此它知道如何做出反应。例如，对于移动操作，它可能会删除原始文件。

您使用 e.AllowedEffects 查看调用者应用程序支持的效果。例如，它可能不支持移动，只支持复制。两端的开发人员需要确保他们的应用程序符合链接、移动和复制的含义的约定。就 API 而言，它只影响向用户显示的图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T20:08:43.857

也许您应该创建一个接收 ICommand 的 AttachedProperty，然后（在视图模型中）在此命令中放置代码；在附加属性内部订阅 OnDrag 事件并执行 ICommand，然后在视图（Image）中将附加属性绑定到命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T15:31:48.323

尝试这个 ：

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <!-- Using a StackPanel here since DataTemplate can't contain more than one element-->
            <StackPanel Orientation="Horizontal">
                <Image AllowDrop="True" Drop="ImageDrop1"/>
                <Image AllowDrop="True" Drop="ImageDrop2"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这是`Drop`事件处理程序

```
private void ImageDrop1(object sender, DragEventArgs e)
{
    MessageBox.Show("Dropped onto Image 1");
    e.Handled = true;
}

private void ImageDrop2(object sender, DragEventArgs e)
{
    MessageBox.Show("Dropped onto Image 2");
    e.Handled = true;
} 
```

# visual-studio - 使用 Fake.InitializeFixture 时的警告

> ID：12371693
> 
> 赞同：1
> 
> 时间：2012-09-11T14:11:19.547
> 
> 标签：visual-studio, warnings, fakeiteasy

我正在使用 Fake.InitializeFixture 像这样：

```
[Fake] private ISomeDependency _someDependency;
[UnderTest] private SomethingToTest _somethingToTest;

[SetUp]
public void SetUp()
{
    Fake.InitializeFixture(this);
}

... 
```

运行测试时它工作正常，但问题是 Visual Studio 给了我这些警告：

> 警告 27 字段 '...._someDependency' 从未分配给，并且始终具有其默认值 null

我希望在编译时有零警告。有没有办法摆脱这些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T12:26:08.800

有两种解决方案：

1.  使字段非私有。
2.  在您的测试项目中禁用该警告。

# sql - 如何在特定字符之前替换字符串的子字符串？

> ID：12371701
> 
> 赞同：6
> 
> 时间：2012-09-11T14:11:34.243
> 
> 标签：sql, tsql, replace, substring

表`Email`：

价值观：

```
josh@yahoo.com
carmine32@hotmail.com
zehmaneh@yahoo.com 
```

我想`@`用`test`.

结果：

```
test@yahoo.com
test@hotmail.com
test@yahoo.com 
```

如何根据字符串中的字符使用子字符串和替换？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T14:14:21.303

You don't even need to use `substring` or `replace`, you can use this:

```
SELECT 'test' + RIGHT(email, charindex('@', REVERSE(email)))
FROM YourTable 
```

You can test it out with this:

```
DECLARE @email nvarchar(50)
SET @email = 'carmine32@hotmail.com'
PRINT 'test' + RIGHT(@email, charindex('@', REVERSE(@email))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T14:28:48.803

```
declare @t table(email varchar(30))
insert @t values('josh@yahoo.com'),
                ('carmine32@hotmail.com'),
                ('zehmaneh@yahoo.com') 

select stuff(email, 1, charindex('@', email), 'Test@') 
from @t 
```

结果：

```
Test@yahoo.com
Test@hotmail.com
Test@yahoo.com 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:17:18.620

您可以使用[`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)和[`CHARINDEX`](http://msdn.microsoft.com/en-us/library/ms186323.aspx)：

```
UPDATE Email set email = 
    'test' + SUBSTRING(email, CHARINDEX('@',email), LEN(email)) 
```

小提琴：[http ://sqlfiddle.com/#!3/0face/6/0](http://sqlfiddle.com/#!3/0face/6/0)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T14:15:56.527

你可以

```
select 'test' + substring(fld, charindex('@', fld), len(fld)) 
```

# itextsharp - 使用 iTextSharp 的富文本内容字段

> ID：12371709
> 
> 赞同：5
> 
> 时间：2012-09-11T14:11:54.827
> 
> 标签：itextsharp, richtext

我正在使用 iTextSharp 即时创建 pdf 文件，供我的用户保存在他们的计算机上。目前它的工作方式是我有几个 iTextSharp 打开的 pdf 模板，从数据库中设置字段并保存在用户计算机上。

我在将丰富的内容添加到用户使用富文本编辑器 (NiceEdit) 输入的正文字段中时遇到了真正的问题。它包含非常简单的选项，例如项目符号、粗体、斜体、字体颜色、大小等，这就是他们所需要的。我尝试了所有可能的选择，但似乎没有任何帮助。

```
PdfReader reader = new PdfReader(originalReport.ToString());

PdfStamper stamper = new PdfStamper(reader, new FileStream(report, FileMode.Create));
AcroFields fields = stamper.AcroFields;

fields.SetFieldProperty("body", "setfflags", PdfFormField.FF_RICHTEXT, null);
fields.SetFieldRichValue("body", bodyValue.ToString());

fields.GenerateAppearances = false; 
```

我尝试展平表单，但它根本不显示该字段。如果我没有展平表单，则该字段显示内容但根本没有格式（甚至删除了新行），如果我使用 SetField 选项而不是 SetFieldRichValue 我得到一个 html 内容字符串

我还尝试允许 pdf 模板字段从 acrobat pro 中“允许富文本”，但这会产生异常并停止 pdf :)

另请注意，由于我使用的模板取决于用户的类型，因此使用了 SetField 选项，我不会从头开始创建文档，因此我不会使用如果我使用HTMLWorker 并简单地添加到文档中

请问有什么帮助吗？

# c# - Asp.Net 按钮单击未在远程服务器上启动

> ID：12371713
> 
> 赞同：0
> 
> 时间：2012-09-11T14:12:12.917
> 
> 标签：c#, asp.net, webforms, buttonclick

我有 UserControl，它有几个字段（地址、郊区等）和一个 SubmitButton，一旦按下提交按钮，一个回传将转到服务器，我将输入的详细信息保存到会话中，以便在稍后阶段将其存储到数据库中.

在我的本地机器上一切正常，在我的团队成员机器上也是如此。但是，一旦我部署到服务器，按钮单击不起作用。当我单击该按钮时，它会发回（重新加载页面），但它从未命中我的事件处理程序。

我在页面上几乎没有验证。我尝试将它们全部删除，但仍然没有帮助。我怀疑服务器设置，所以我部署到另一台服务器（GoDaddy 和 CrazyDomains），同样的问题发生了。

为了使它更复杂，在少数情况下，它可以在服务器上正常工作。我正在运行 .NET 4.0 和 VS 2010

任何帮助将不胜感激。谢谢

```
<div class="clear" style="padding-top: 20px;">
  <asp:Button runat="server" 
              ID="SubmitButton" 
              OnClick="SubmitButtonClick" 
              Text="View Plans" 
              Width="150px" 
              CssClass="NextButton CompareButton"/>
</div> 
```

事件处理程序

```
protected void SubmitButtonClick(object sender, EventArgs e)
{
  // doing my form data saving here 
  // not hitting this point
  Response.Redirect("http://google.com");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T00:41:04.153

我发现问题是我们忘记关闭 Web.Config 中的跟踪标记

```
 <trace enabled="true" requestLimit="40" localOnly="false" Output="false" /> 
```

因此，虽然它在本地工作（因为它处于调试模式）但它在服务器上不起作用

另一个问题是，因为我们在 iFrames 中使用这些页面，所以我们需要避免

```
 Response.Redirect() 
```

并且需要向页面添加隐私策略，以便它们可以被 Web 浏览器信任，如下所示：

```
 response.addHeader("P3P","CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\"") 
```

希望这对其他人有帮助

# python - Python：raw_unicode_escape 不会为“é”写入原始值

> ID：12371714
> 
> 赞同：0
> 
> 时间：2012-09-11T14:12:13.410
> 
> 标签：python, unicode, encoding

得到了一个可爱的脚本，它以原始 unicode 打印出一堆文本来处理所有不同的语言。

该脚本在 ascii carater 和非拉丁语言（印地语、中文等）中运行良好

但是，它无法打印出诸如“é”“è”之类的字符的原始值...

而不是在文件中的 print "é" 中打印原始 unicode 值 \u00E9，这反过来会在网页上显示菱形询问标记。

```
f = codecs.open(newFilePathAndName(path,filename,language),encoding='raw_unicode_escape', mode='w')
...
f.write(outputString) 
```

当我在脚本中执行“打印”时，它将字符 é 显示为 \xe9

有任何想法吗 ？

唯一想到的是放置一个将 \xe 替换为 \u00 的正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:21:31.323

`raw_unicode_escape`编码确实不为低于 0xFF 的值提供转义；这些值通常不会在原始 python unicode 文字中转义。

改用`unicode_escape`编码：

```
>>> print u'\u00e9'.encode('unicode_escape')
\xe9 
```

# iphone - Is there any sense on testing apps on old iPhones / iPod Touch

> ID：12371716
> 
> 赞同：4
> 
> 时间：2012-09-11T14:12:15.393
> 
> 标签：iphone, ios, testing

Does make any sense today, with the incoming iPhone 5, to test apps on old 3GS iPhones or older devices?

Is the simulator enough for a basic app not using OpenGL that runs smootly on iPhone 4???

Can you share marketshare or stats about old iphone / ipod models?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:21:13.963

这不是必需的，加上所有新的 API 和功能都出现在新设备上，许多应用程序甚至不太可能支持旧设备，但这并不是说它们不应该，因为仍有大量人使用旧设备。但是，在大多数情况下，只要您在应用程序中使用的所有东西（如框架等）都可以在旧操作系统和设备上使用，那么您的应用程序应该可以正常运行，而无需在旧设备本身上进行测试。

在 Xcode 上，您可以检查哪些功能和框架适用于哪些操作系统/设备，以帮助与不同设备兼容。还设置部署目标以确保只有具有正确操作系统/设备的人才能获取您的应用程序可以阻止兼容性问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:24:00.647

如果您不打算支持旧设备，请务必将您的部署目标设置为与不支持的设备允许的最大 iOS 版本之后的理想版本匹配。这样，它不应该安装在您不支持的设备上。只是我的 0.02 美分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:24:42.270

第三**个问题**无关紧要。您必须自己找到所需的数据。每家公司都会寻找不同的数据。这是一个编程论坛，为什么要打扰市场数据？

关于**第二个问题**，模拟器通常就足够了，但是对于您永远不知道的旧型号（推送通知？某些库不支持但模拟器支持？）。我强烈建议在真实设备上进行测试。

最后，第**一个问题**：对你来说，测试的目的是什么？你想支持旧设备吗？在一个理想的世界里，如果你回答是，你绝对应该对它们进行测试。如果没有......那么你不测试。

但我们并不生活在理想的工作中。测试或不测试通常是一个商业决定。QA 不是为了提供完美的应用程序。QA 是为了让应用程序足够好。你永远无法测试一切。即使您测试所有内容，用户也会发现很多错误。

所以，我最后的建议是：如果你有资源可以测试，那就测试。如果没有，请在模拟器上进行基本测试，然后让用户进行测试。如果他们发现错误，您可以修复它。

# c# - MouseLeftButtonUp 在 WP7 中不会一直触发

> ID：12371719
> 
> 赞同：0
> 
> 时间：2012-09-11T14:12:36.333
> 
> 标签：c#, windows-phone-7, mouseleftbuttonup

在我的应用程序中有一个带有小图像的画布（不占用画布的整个空间）。当用户单击图像并在画布内拖动时，它会用黑线跟踪路径。直到这里一切正常。现在，我希望用户释放鼠标后立即删除路径。我正在使用`MouseLeftButtonUp`来`canvas`检测鼠标释放。现在的问题是这是随机工作的。有时它会触发，有时则不会。请帮忙。

XAML：

```
 <Canvas Height="400" HorizontalAlignment="Center"  Margin="10,10,0,0" Name="canvas1" VerticalAlignment="Center" Background="Aqua"  Width="400">
 <Image Canvas.ZIndex="30" Canvas.Left="10" Canvas.Top="10" Height="20" Name="dot1" Stretch="Uniform" Width="20" Source="/BoxIt;component/Images/dot.png" MouseLeftButtonDown="dot_MouseLeftButtonDown" />
 </Canvas> 
```

C＃：

```
 this.canvas1.MouseMove += new MouseEventHandler(canvas1_MouseMove);
 this.canvas1.MouseLeftButtonUp += new MouseButtonEventHandler(canvas1_MouseLeftButtonUp); 
```

C# 中的事件处理程序：

```
 void canvas1_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
       // code to delete the path
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:18:43.597

在 Windows Phone 中，我们建议使用[Tap](http://msdn.microsoft.com/en-us/library/system.windows.uielement.tap%28v=vs.95%29.aspx)、[Hold](http://msdn.microsoft.com/en-us/library/system.windows.uielement.hold%28v=vs.95%29)和 Manipulation* 方法而不是鼠标相关事件。

请阅读[此](http://msdn.microsoft.com/en-us/library/ff426933%28v=vs.95%29.aspx)内容以获取更多信息。

# asp.net-mvc - 如何使用 global.asax MVC4 将子域重定向到 www 域

> ID：12371726
> 
> 赞同：1
> 
> 时间：2012-09-11T14:12:58.667
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, global-asax

我在 IIS7 下有一个网站，将所有子域都捕获为 *.mydomain.com，但有些网站会随机化子域，例如：

*   www2.mydomain.com
*   wwwmydomain.com
*   etc.mydomain.com

任何子域都可以完美地加载我的 MVC 页面，但是 google 索引会使 url 加倍，因为有两个不同的 url。

我会使用 global.asax 将任何子域永久“301”重定向到 www.mydomain.com，保留 url 和查询字符串。例如

*   www2.mydomain.com/Controller/Action/ID?query=asb TO **www.mydomain.com/Controller/Action/ID?query=asb**

*   wwwmydomain.com/Controller/Action/ID?query=asb TO **www.mydomain.com/Controller/Action/ID?query=asb**

我不想使用 IIS7 重定向，因为我将使用 C# 自定义不应该重定向哪些子域。

我不喜欢为所有控制器创建页面库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:24:48.377

假设您使用的是 IIS，您应该能够使用 ARR 来实现这一点。

例子：

```
<rule name="SubDomain" stopProcessing="false">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTP_HOST}" pattern="^(?!www)(\w+)\.mine\.co\.uk$" />
                    </conditions>
                    <action type="Rewrite" url="{C:1}/{R:1}" />
</rule> 
```

参考：[http ://forums.iis.net/p/1155754/1895646.aspx](http://forums.iis.net/p/1155754/1895646.aspx)

# java - 使用 Spring MVC 3.1.2 重定向

> ID：12371733
> 
> 赞同：2
> 
> 时间：2012-09-11T14:13:17.777
> 
> 标签：java, spring, spring-mvc

在我的控制器中，我正在使用

```
return new ModelAndView( "redirect:new_page" ); 
```

现在我将 Spring 版本从 3.0.6 更改为 3.1.2，我发现它在新版本中不起作用。

我的控制器定义为

```
@Controller
@RequestMapping(value = "/test")
public class MyController { 
```

我试着用

*   `"redirect:/new_page"`
*   `"redirect:/test/new_page"`
*   `"redirect:./new_page"`

没有任何帮助，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:19:17.963

因此，您遇到的问题是使用 Object 作为返回类型，[根据 Spring MVC 参考手册](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-return-types)，它不会作为视图名称或`ModelAndView`：

> *   任何其他返回类型都被认为是要暴露给视图的单个模型属性，使用 `@ModelAttribute`在方法级别指定的属性名称（或基于返回类型类名称的默认属性名称）。该模型隐含地丰富了命令对象和带`@ModelAttribute`注释的参考数据访问器方法的结果。

我猜你使用了 Spring MVC 的一些未记录/内部部分，在新版本中实现了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:07:44.600

我发现在这样的 Spring 3.0.6 控制器中是可以的：

```
@Controller
@RequestMapping(value = "/dialog")
public class DialogController {

    @RequestMapping(value = "/redirected.view")
    public ModelAndView redirected() {
        System.out.println( "DialogController.redirected()" );
        final ModelAndView mav = new ModelAndView( "redirected" );
        return mav;
    }

    @RequestMapping(value = "/form.view")
    public Object form() {
        System.out.println( "DialogController.form()" );
        return createModel();
    }

    private ModelAndView createModel() {
        final ModelAndView mav = new ModelAndView( "redirect:redirected.view" );
        return mav;
    }

} 
```

注意...的`Object`返回类型`form()`

当我将 Spring 版本更改为 3.1.2 时，它返回 404 - 它找不到 `WEB-INF/jsp/dialog/form.jsp`，这很奇怪。

是的，我正在使用 viewResolver

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

原始代码中的方法更复杂

```
@RequestMapping(value = "/search.form", method = RequestMethod.POST)
public Object submit( @Valid @ModelAttribute("sequentialSearch") final SequentialSearchData searchObject,
        final BindingResult bindingResult, final Model model, final HttpSession session ) throws Exception {
    ...
} 
```

可能这就是为什么没有显示错误的原因......

我在那里`Object`，因为我返回了，`String`或者`ModelAndView`，现在我总是返回`ModelAndView`，所以我可以更改返回类型并且它可以工作。

# c# - Is it true that Silverlight will not support OpenGL?

> ID：12371736
> 
> 赞同：3
> 
> 时间：2012-09-11T14:13:22.770
> 
> 标签：c#, wpf, windows, silverlight, opengl

Is there any way to implement the OpenGL on the Silverlight? We need to create a web browser application to load an OpenGL 3D image and to perform rotation and zoom functionality. We can easily load the OpenGL component in a WPF windows application. But it is not allowing to load the OpenGL in to a Silverlight application.

If Silverlight doesn't support OpenGL, what is be the best choice to create the web application with OpenGL 3D?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:15:38.527

Silverlight 不支持它，将来也不支持（Silverlight 已停产！）。对于跨平台图形，您可以使用 WebGL，但它还没有在每个浏览器中实现，但似乎是未来。

澄清一下，Internet Explorer 不支持它（令人震惊！），而 Safari 和 Opera 确实有它，但需要用户在它工作之前启用它。目前还没有其他真正的跨平台方式可以在 Web 上部署 OpenGL。

# lucene - elasticsearch splits by space in facets

> ID：12371738
> 
> 赞同：1
> 
> 时间：2012-09-11T14:13:25.730
> 
> 标签：lucene, elasticsearch

I am trying to do a simple facet request over a field containing more than one word (Eg: 'Name1 Name2', sometimes with dots and commas inside) but what I get is...

```
 "terms" : [{
    "term" : "Name1",
    "count" : 15
},
{
    "term" : "Name2",
    "count" : 15
}] 
```

so my field value is split by spaces and then runs the facet request...

Query example:

```
curl -XGET http://my_server:9200/idx_occurrence/Occurrence/_search?pretty=true -d '{
  "query": {
    "query_string": {
      "fields": [
        "dataset"
      ],
      "query": "2",
      "default_operator": "AND"
    }
  },
  "facets": {
    "test": {
      "terms": {
        "field": [
          "speciesName"
        ],
        "size": 50000
      }
    }
  }
}' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T18:17:50.580

您的字段不应该被分析，或者至少不应该被标记。如果要对字段进行索引而不对其进行标记，则需要更新映射，然后重新索引。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T03:16:47.117

First of all, javanna provided a very good answer from a practical perspective. However, for the sake of completeness, I want to mention that in some cases there is a way to do it without reindexing the data.

If the `speciesName` field is stored and your queries produce relatively small number of results, you can use `script_field` to retrieve stored field values:

```
curl -XGET http://my_server:9200/idx_occurrence/Occurrence/_search?pretty=true -d '{
  "query": {
    "query_string": {
      "fields": ["dataset"],
      "query": "2",
      "default_operator": "AND"
    }
  },
  "facets": {
    "test": {
      "terms": {
        "script_field": "_fields['\''speciesName'\''].value",
        "size": 50000
      }
    }
  }
}
' 
```

As a result of this query, elasticsearch will retrieve the `speciesName` field for every record in your result set and it will construct facets from these values. Needless to say, if your result set contains millions of records, performance of this query might be sluggish.

Similarly, if the field is not stored, but record source is stored, you can use `script_field` facet to retrieve field values from the source:

```
......
"script_field": "_source['\''speciesName'\'']",
...... 
```

Again, source for each record in the result list will be retrieved and parsed, so you might need some patience to run this query on a large set of records.

# html - Make 2 HTML input fields same width as the one on top

> ID：12371742
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:13:44.990
> 
> 标签：html, css, forms

Please see [this little HTML form](http://jsfiddle.net/HSkyq/)

I'd like to have ZIP & city input fields on one line, but on the right have the city input field end with the name input field on one line.

How could I do that? Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:41:50.550

**解决方案1：http:** [//jsfiddle.net/wMUAK/](http://jsfiddle.net/wMUAK/)

CSS

```
label {
    float: left;
    width: 100px;
    padding: 2px;
}

.c1 {
    float: left;
    width: 200px;
}

.c2 {
    float: left;
    width: 40px;
    margin-right: 10px;
}

.c3 {
    float: left;
    width: 150px;
}

.c1 input[type=text],
.c2 input[type=text],
.c3 input[type=text] {
    width: 100%;
}

.clear {
    clear: both;
} 
```

HTML 名称 ZIP 和城市

**解决方案2：http:** [//jsfiddle.net/HSkyq/5/](http://jsfiddle.net/HSkyq/5/)

CSS

```
.table {
    display: table;
}

.table .row {
    display: table-row;
}

.table .cell {
    display: table-cell;
}

.group {
    display: table;
    width: 100%;
}

.group .gcell {
    display: table-cell;
}

.table input {
    width: 100%;
}​ 
```

HTML

```
<div class="table" style="width: 300px;">
  <div class="row">
    <div class="cell" style="width:40%;">
      <label for="name">Name</label>
    </div>
    <div class="cell">
      <input type="text" id="name" name="name" />
    </div>
  </div>
  <div class="row">
    <div class="cell">
      <label for="city">ZIP and city</label>
    </div>
    <div class="cell">
      <div class="group">
        <div class="gcell" style="width: 40%;">
          <input type="text" name="zip" style="width: 90%;" />
        </div>
        <div class="gcell">
          <input type="text" name="city" id="city" />
        </div>
      </div>
    </div>
  </div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:38:55.530

现在查看结果，链接如下——http: [//jsfiddle.net/HSkyq/4/](http://jsfiddle.net/HSkyq/4/)

# windows-runtime - 如何在 WinJS (WinRT) 中创建新线程

> ID：12371743
> 
> 赞同：1
> 
> 时间：2012-09-11T14:13:47.393
> 
> 标签：windows-runtime, winjs

是否可以在 WinJS 中创建一个新线程？我必须连续执行一个 while 循环，但我不希望它占用 UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:44:49.803

你有两个选择：

*   WebWorker（根据乔）。将数据输入和输出网络工作者涉及`post/sendMessage`. MSDN 详细信息[在这里](http://msdn.microsoft.com/en-us/library/ie/hh673568%28v=vs.85%29.aspx)。
*   如果您的操作不是特定于 javascript 的，您可以在 C#/C++ 中创建一个线程，并使用该线程使用 WinRT 事件与 JavaScript 世界进行通信。

# visual-studio - MFC Printing Issue - Access Violation Exception

> ID：12371744
> 
> 赞同：1
> 
> 时间：2012-09-11T14:13:56.483
> 
> 标签：visual-studio, printing, mfc

I'm having an issue with some MFC printing code lately. To describe the issue at a high level, we're getting problems when we try to print the same document twice. (Really, it doesn't have to be the SAME document. It seems that it happens when two documents are printed and the child window isn't destroyed and created between them.) The first time, the document prints fine. The second time, the program crashes with an uncaught exception.

This also only started happening after a recent upgrade. This is code that I've literally never touched. It worked fine in version 5 when we were using VS2005 and MFC8\. But then, when we upgraded to VS2008 and MFC9, this started happening.

Here's the problem code:

```
void CReportWnd::OnPrint() 
{
    CDC dc;
    CPrintDialog dlg (FALSE);
    CPrintDialog defaults(FALSE);
    DEVMODE *ldev_printinfo;
    int li_first = 0;
    int li_last;

    int ret = defaults.GetDefaults();
    ldev_printinfo = defaults.GetDevMode();
    //ldev_printinfo->dmOrientation = DMORIENT_LANDSCAPE;
    dc.Attach (defaults.GetPrinterDC ());
    dc.ResetDC(ldev_printinfo);

    PROPrint(1, NULL, &dc, NULL, &li_last, true);

    dlg.m_pd.hDevMode = ldev_printinfo;
    dlg.m_pd.Flags &= ~PD_NOPAGENUMS;
    dlg.m_pd.nMinPage = 1;
    dlg.m_pd.nFromPage = 1;
    dlg.m_pd.nMaxPage = li_last;
    dlg.m_pd.nToPage = li_last;     

    if (dlg.DoModal () == IDOK) {
        dc.DeleteDC();
        dc.Detach();
        dc.Attach (dlg.GetPrinterDC ());        
    } else {
        return;
    }

    //Set up document info (need to set the name)
    DOCINFO di;
    ::ZeroMemory (&di, sizeof (DOCINFO));
    di.cbSize = sizeof (DOCINFO);
    di.lpszDocName = "Report";

    if(dc.StartDoc(&di) <= 0) {
        return;
    }

    if(dlg.PrintRange()) {
        li_first = dlg.m_pd.nFromPage - 1;
        li_last = dlg.m_pd.nToPage - 1;
    }

    //Now do the actual print job to the printing device
    PROPrint(1, NULL, &dc, &li_first, &li_last, false);
} 
```

On the int ret = ... line near the top is where the exception is thrown. GetDefaults() throws an access violation exception. But again, only the second time that this function is called. It seems to me like it's some sort of resource issue. Like a resource isn't being freed and allocated properly. But I'm so inexperienced with printing that it could be anything.

If anybody could offer any kind of help, I would really appreciate it.

Also, yes, I know that I can just catch the exception. My issue is, how do I handle the exception and still print the document?

EDIT: It seems as if our program is having this issue in multiple places, not just with this particular set of code. It makes me think that the issue might not be in this code specifically. I'm working on it now and I kind of have to get it fixed, so when I figure out the solution, I'll be sure to post back. Until then, I'm always open to suggestions.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:16:36.813

不确定，但可能是因为代码正在删除与默认打印机关联的默认设备上下文？尝试删除该`dc.DeleteDC()`行给您：

```
if (dlg.DoModal() == IDOK) 
{
   dc.Detach();
   dc.Attach(dlg.GetPrinterDC());        
} 
else
   return; 
```

# mysql - 简洁的全文搜索

> ID：12371746
> 
> 赞同：0
> 
> 时间：2012-09-11T14:14:06.937
> 
> 标签：mysql, search, full-text-search, myisam

我一直在尝试寻找有关使用 MySQL 的 FULLTEXT 搜索的帮助。我意识到这已经被讨论到死了，但我不太明白如何获得一组简洁的结果。

我有一个 MyISAM 表，其中包含 500,000 个产品，并在“product_name”表上设置了 FULLTEXT 索引。

一个基本的查询是：

```
SELECT * from products MATCH(product_name) AGAINST ("coffee table") AS relevance 
WHERE MATCH(product_name) AGAINST ("coffee table"). 
```

我得到了一份与咖啡或餐桌相关的数百种产品的清单。这不够具体，意味着有用的结果与太多其他项目混在一起。

我更改了查询以使用 MATCH 为每个结果提供相关性，然后使用 LIKE 执行实际查询。

```
SELECT * from products MATCH(product_name) AGAINST ("coffee table") AS relevance 
WHERE ((product_name like "%coffee%" AND product_name like "%table%") or product_name like "%coffee table%") 
```

我从看到 Wordpress 如何执行搜索中得到这个想法。在有人使用更具体的关键字进行搜索之前，这种方法效果很好。一个真实的例子是搜索“Nike blazer low premium v​​intage”。在这种情况下，没有结果（而使用 MATCH 的第一个方法返回数百个）

我知道我可以使用 IN BOOLEAN MODE，但许多用户不知道使用 +/- 运算符来更改他们的查询。我还没有弄清楚我应该如何使用 HAVING 子句来限制结果。

此外，由于这是共享主机，我无法更改默认的最小字长 - 这意味着缺少关键字，例如颜色“红色”或品牌名称“GAP”。

我已经阅读了一些关于创建关键字索引表的内容，但还没有找到合适的参考资料。

有人可以提供一个解决方案，我可以使用产品搜索词（由 Joe Public 输入），这将给出一组简洁的结果。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:33:26.250

我做了更多的研究，正如许多人所说，对于像搜索这样的“人类”来说，这不是一个好的解决方案——一个例子是它如何处理单词复数（汽车/汽车）。我查看了 Apache Lucene，但它超出了我的设置和配置能力。

目前，“解决方案”一直是坚持`IN BOOLEAN MODE`（正如马修也建议的那样）。

# c# - c# string as column name in sql command 94543

> ID：12371752
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:14:22.643
> 
> 标签：c#

I have two tables:

Table 1:

```
centers machines
------- --------
center1  machine1
center2  machine2
center2  machine3 
```

Table 2:

```
operation center1 center2 center3 ...
--------- ------- ------- ------- ...
oper1     ok       ok
oper2     ok              ok
oper3     ok 
```

Selecting a machine (via combobox) from first table, puts me in a center. The operations from Table 2 are specific to each center as shown. So after selecting the machine from table one, passing the center value to a variable like "center" (by Executescalar() method) I want to do:

```
SELECT operation from dbo.operations where "center" != null 
```

this should return the only the operations from table 2 which are specific to "center". Does anyone know how this can be achieved?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:34:21.697

首先，在我真正回答你的问题之前，我会指出你*真的真的真的*需要研究[normalization](http://databases.about.com/od/specificproducts/a/normalization.htm)的概念，如果可能的话，修复你的表结构。您的操作表应该包含三列 - 操作、中心和状态 - 重复列如 Center1、Center2、Center3 ... 是糟糕设计的一个明显例子。除了更高效、更易于维护之外，规范化表还可以消除您需要更改查询中的列名的整个问题。

话说回来：

如果您正在使用一个`SqlCommand`对象来执行您的查询，并且您正在`CommandText`为该对象分配一个属性，那么您可以使命令文本成为您想要的任何内容。例如，您只需要使用`String.Format`插入正确的列名。您不能使用查询参数来更改列名，因此您只能动态生成 SQL 语句：

```
cmd.CommandText = string.Format("SELECT operation FROM dbo.Operations WHERE {0} IS NOT NULL", center); 
```

请注意，*什么*都不会`!= NULL`：所有与`NULL`SQL 中的比较都返回 false（`1 = NULL`即为 false，`1 != NULL`也为 false）。您需要使用`IS`and`IS NOT`来比较`NULL`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:32:45.050

我不知道您使用的是哪种语言，但我想不出一种可以让您参数化列名的语言。

要执行您想要执行的操作，您必须使用[动态 SQL](http://www.sommarskog.se/dynamic_sql.html)，如果您不知道自己在做什么，这可能会非常危险，因此请自行承担风险。

# java - java 邮件 gmail

> ID：12371761
> 
> 赞同：5
> 
> 时间：2012-09-11T14:14:36.457
> 
> 标签：java, email, gmail

我想通过谷歌的 smtp 服务器在我的 java 程序中发送邮件，但它似乎卡在发送邮件上。有人能告诉我为什么吗？

这是发送邮件的功能：

```
 public void sendMail(){
            String from = "xxx@gmail.com";
    String to = "xxx@hotmail.com";
    String subject = "Test";
    String message = "A test message";

    SendMail sendMail = new SendMail(from, to, subject, message);
    sendMail.send();
} 
```

这就是课堂

```
public class SendMail {
private String from;
private String to;
private String subject;
private String text;

public SendMail(String from, String to, String subject, String text){
    this.from = from;
    this.to = to;
    this.subject = subject;
    this.text = text;
}

public void send(){

    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.auth", "true");
    props.setProperty( "mail.smtp.port", "587" );
    props.put("mail.smtp.starttls.enable", "true");
    Session session = Session.getDefaultInstance(props);

    new javax.mail.Authenticator() {
    protected PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(from, "MyPasswordGoesHere");
    }
      };

  try {
    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));
    message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));
    message.setSubject(subject);
    message.setText(text);

    Transport.send(message);
    System.out.println("message sent successfully");
    } catch (MessagingException e) {
    throw new RuntimeException(e);
     }
      }
        } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:38:34.517

好的，我使用以下代码解决了它： [http ://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/](http://www.mkyong.com/java/javamail-api-sending-email-via-gmail-smtp-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T15:56:37.560

在[我的博客文章](http://www.javacirecep.com/internet/sending-email-using-gmail-smtp-in-java/)中，我尝试举例说明使用 Java 通过 Gmail 的 SMTP 服务器发送电子邮件。这里有 2 个示例代码。其中一个使用 Java Mail API，而另一个利用 Apache Commons Mail 库。

# wcf - 更改 WCF net.tcp 绑定上的套接字选项

> ID：12371768
> 
> 赞同：15
> 
> 时间：2012-09-11T14:14:53.610
> 
> 标签：wcf, sockets, .net-4.0, tcp

我有一个使用 net.tcp 绑定并实现一些服务的 .net 4.0 WCF 应用程序。
我想为该绑定设置一个 TCP 套接字选项（`ReuseAddress`选项。一个[相关问题](https://stackoverflow.com/a/12366947/619493)解释了我为什么要这样做）。
如果我使用的是原始套接字，我可以使用[Socket.SetSocketOption](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.setsocketoption%28v=vs.100%29.aspx)方法。

有没有办法以某种方式从 net.tcp 绑定中提取底层原始套接字以更改其选项？或者其他方式来设置这个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-29T22:56:53.923

Amir，感谢您添加 ReuseAddress 选项的建议。但是，我们需要更好地了解您的具体情况。在相关问题（[更改 WCF net.tcp 绑定上的套接字选项](https://stackoverflow.com/questions/12371768/changing-socket-options-on-wcf-net-tcp-binding)）上下文中，您是否启用了端口共享？似乎移植共享可能会导致类似的症状。基本上，我们需要具体的重现程序和设置步骤来更好地理解问题。如果有人仍然遇到问题或看到需要添加reuseAddress 选项，请在[http://connect.microsoft.com/VisualStudio](http://connect.microsoft.com/VisualStudio)报告错误，并提供repro 程序和repro 步骤。谢谢你。

# c# - 刷新图像jquery

> ID：12371769
> 
> 赞同：0
> 
> 时间：2012-09-11T14:14:53.800
> 
> 标签：c#, jquery, ajax

我在我的 ASp.Net 应用程序中上传了带有 ajax 形式的图像。我需要刷新图像，所以我试试这个：

```
$(function () {
   $(".fileUploadForm").ajaxForm({
      success: function (data, text, xhr, form) {
       var tmp = jQuery(this).closest("img[class=imageResource]").attr('src');
      }
   });
}); 
```

这是我的图像：

```
 <img class="imageResource" alt="picture" src="@Url.Action("Picture", new { id = Model.Id })" /> 
```

如何查找和重写具有相同名称的图像源

**更新**

这是我的html：

```
<div class="thumbnail">
<a target="_blank" href="/Template/OriginalPicture/8b8c824b-9605-4931-9fe2-1f5979baca42">
<img class="imageResource" src="/Template/Picture/8b8c824b-9605-4931-9fe2-1f5979baca42" alt="picture">
</a>
<div class="caption">
<div style="margin-bottom: 5px;">
<form class="form-horizontal fileUploadForm" method="post" enctype="multipart/form-data" action="/Template/PictureResource?resourceId=8b8c824b-9605-4931-9fe2-1f5979baca42&configId=aa383b5a-23b2-4780-965e-ef4e95cd3fa2&pageNumber=1">
<div class="input-append">
<input type="file" name="picture">
<input class="span1" type="text" size="128" style="width: 86px;">
<button class="btn browse" type="button"> ...</button>
<button class="btn" type="submit">Upload</button>
</div>
</form>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:19:36.670

试试这个代码：

```
$(function () {
   $(".fileUploadForm").ajaxForm({
      success: function (data, text, xhr, form) {
       var tmp = form.closest('.thumbnail').find('.imageResource').attr('src');
        form.closest('.thumbnail').find('.imageResource').attr('src', tmp + "?" + (new Date()).getTime());
      }
   });
}); 
```

我不确定 jQuery(this) 是否会返回一个表单（不记得那里的“this”是什么） `(new Date()).getTime()`——只是为了更改图像 URL 并强制浏览器不从缓存中获取图像。呃。并没有注意到`.closest`- 它会搜索最近的父元素，而不是子元素。你可以用`.find`它。

`form`- 这是一个电流来源，根据文档`closest('.thumbnail')`将找到最接近表单的类 .thumbnail 的父级。`.find('.imageResource')`将搜索`imageResource`仅在内部具有类的元素`.thumbnail`。由于缩略图内只有一个带有 imageResource 类的图像标签 - 上面的代码应该可以正常工作

# java - Spring MVC - 检查用户是否已经通过 Spring Security 登录？

> ID：12371770
> 
> 赞同：47
> 
> 时间：2012-09-11T14:14:55.500
> 
> 标签：java, spring, security, spring-mvc, spring-security

我有一个 Spring MVC 应用程序。**它使用自己的自定义登录页面**。成功登录后，会在 HTTPSession 中放置一个“LOGGED_IN_USER”对象。

我想只允许经过身份验证的用户访问 URL。我知道我可以通过使用网络过滤器来实现这一点。但是，这部分我想使用 Spring Security 来完成（我的检查将保持不变 - 在 HTTPSession 中查找“LOGGED_IN_USER”对象，如果您已登录）。

*我的限制是我目前无法更改登录行为 - 还不会使用 Spring Security。*

**我可以使用 Spring Security 的哪个方面来单独实现这部分 - 检查请求是否经过身份验证（来自登录用户）？**

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-09-11T14:54:04.230

至少有4种不同的方式：

## 春季安全 XML 配置

这是最简单的方法

```
<security:http auto-config="true" use-expressions="true" ...>
   ...
  <security:intercept-url pattern="/forAll/**" access="permitAll" />
  <security:intercept-url pattern="/**" access="isAuthenticated()" />
</security:http> 
```

*   @see [Spring Security Reference, Chapter 16.1.1 Common Built-In Expressions](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-common-built-in)
*   @see [Spring Security Reference, Chapter 16.2 Web Security Expressions](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-access-web)

## 根据@Secured 注解

需要`<global-method-security secured-annotations="enabled" />`

```
@Secured("ROLE_ADMIN")
@RequestMapping(params = "onlyForAdmins")    
public ModelAndView onlyForAdmins() {
    ....
} 
```

## 每@PreAuthorize 注解

需要`<global-method-security pre-post-annotations="enabled" />`

```
 @PreAuthorize("isAuthenticated()")
 @RequestMapping(params = "onlyForAuthenticated")
 public ModelAndView onlyForAuthenticatedUsers() {
     ....
 } 
```

## 程序化

```
 SecurityContextHolder.getContext().getAuthentication() != null &&
 SecurityContextHolder.getContext().getAuthentication().isAuthenticated() &&
 //when Anonymous Authentication is enabled
 !(SecurityContextHolder.getContext().getAuthentication() 
          instanceof AnonymousAuthenticationToken) 
```

* * *

## 自定义表达式

如果内置表达式不够用，可以扩展它们。例如，此处讨论了如何扩展方法注释的 SpEL 表达式：

*   [如何创建自定义方法以在 Spring 安全表达式语言注释中使用](https://stackoverflow.com/questions/6632982/how-to-create-custom-methods-for-use-in-spring-security-expression-language-anno)
*   [http://bmchild.blogspot.de/2012/02/creating-custom-regex-spring-security.html](http://bmchild.blogspot.de/2012/02/creating-custom-regex-spring-security.html)

但是对于拦截器`<security:intercept-url ... access="myCustomAuthenticatedExpression" />`，可能有一种稍微不同的方法，它不需要处理私有类问题。--*我只为 Spring Security 3.0 做过，但我希望它也适用于 3.1。*

1.）您需要创建一个从`WebSecurityExpressionRoot`（前缀 Web 是重要部分！）扩展的新类。

```
public class MyCustomWebSecurityExpressionRoot
         extends WebSecurityExpressionRoot {
     public MyCustomWebSecurityExpressionRoot(Authentication a,
                 FilterInvocation f) {
          super(a, f);
     }

     /** That method is the one that does the expression evaluation! */
     public boolean myCustomAuthenticatedExpression() {
        return super.request.getSession().getValue("myFlag") != null;
     }
} 
```

2.) 你需要一个扩展`DefaultWebSecurityExpressionRootHandler`来拥有一个提供你的自定义表达式根的处理程序

```
 public class MyCustomWebSecurityExpressionHandler
              extends DefaultWebSecurityExpressionHandler {

      @Override        
      public EvaluationContext createEvaluationContext(Authentication a,
                FilterInvocation f) {
          StandardEvaluationContext ctx =
                   (StandardEvaluationContext) super.createEvaluationContext(a, f);

           WebSecurityExpressionRoot myRoot =
                    new MyCustomWebSecurityExpressionRoot(a, f);

           ctx.setRootObject(myRoot);
           return ctx;
      }
 } 
```

3.) 然后你需要向选民注册你的处理程序

```
<security:http use-expressions="true"
 access-decision-manager-ref="httpAccessDecisionManager" ...>
      ...
    <security:intercept-url pattern="/restricted/**"
              access="myCustomAuthenticatedExpression" />         
      ...
</security:http>

<bean id="httpAccessDecisionManager"
      class="org.springframework.security.access.vote.AffirmativeBased">
    <constructor-arg name="decisionVoters">
            <list>
                <ref bean="webExpressionVoter" />
            </list>
    </constructor-arg>
</bean>

<bean id="webExpressionVoter"
      class="org.springframework.security.web.access.expression.WebExpressionVoter">
    <property name="expressionHandler"
              ref="myCustomWebSecurityExpressionHandler" />
</bean>

<bean id="myCustomWebSecurityExpressionHandler"
    class="MyCustomWebSecurityExpressionHandler" /> 
```

**Spring Security 3.1 更新**

从 Spring Security 3.1 开始，实现自定义表达式要容易一些。不再需要 sublcas`WebSecurityExpressionHandler`和 override `createEvaluationContext`。而是一个`AbstractSecurityExpressionHandler<FilterInvocation>`子类或其子类`DefaultWebSecurityExpressionHandler`并覆盖`SecurityExpressionOperations createSecurityExpressionRoot(final Authentication a, final FilterInvocation f)`。

```
 public class MyCustomWebSecurityExpressionHandler
              extends DefaultWebSecurityExpressionHandler {

      @Override        
      public SecurityExpressionOperations createSecurityExpressionRoot(
                Authentication a,
                FilterInvocation f) {
           WebSecurityExpressionRoot myRoot =
                    new MyCustomWebSecurityExpressionRoot(a, f);

           myRoot.setPermissionEvaluator(getPermissionEvaluator());
           myRoot.setTrustResolver(this.trustResolver);
           myRoot.setRoleHierarchy(getRoleHierarchy());
           return myRoot;
      }
 } 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-13T22:21:33.663

另一种解决方案，您可以创建类：

```
public class AuthenticationSystem {
    public static boolean isLogged() {
        final Authentication authentication = SecurityContextHolder.getContext().getAuthentication();
        return null != authentication && !("anonymousUser").equals(authentication.getName());
    }
    // ...
    // Any another methods, for example, logout
} 
```

然后，在控制器中：

```
@Controller
@RequestMapping(value = "/promotion")
public final class PromotionController {  
    @RequestMapping(value = {"", "/"}, method = RequestMethod.GET)
    public final String root() {
        if (!AuthenticationSystem.isLogged()) return "login"; // or some logic
        // some logic
        return "promotion/index";
    }
} 
```

**PS**：

以前的解决方案有一个问题，在评论中解释了彼得。

```
@Controller
@RequestMapping(value = "/promotion")
public final class PromotionController {  
    @RequestMapping(value = {"", "/"}, method = RequestMethod.GET)
    public final String root(final Principal principal) {
        if (null == principal) return "login"; // or some logic
        // some logic
        return "promotion/index";
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-05T03:35:46.320

这是你想要达到的目标吗？

```
<c:choose>
  <c:when test="${pageContext.request.userPrincipal.authenticated}">Show something</c:when>
  <c:otherwise>Show something else</c:otherwise>
</c:choose> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-31T10:47:38.123

> 许多身份验证提供程序将创建一个 UserDetails 对象作为主体。

我发现的另一种方法 - 使用 spring-security - 是检查返回值是否`Authentication.getPrincipal()`是`UserDetails`; 该方法默认返回`"anonymousUser"`( `String`)。

```
boolean isUserLoggedIn(){
   return SecurityContextHolder.getContext().getAuthentication().getPrincipal() instanceof UserDetails
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-27T14:10:34.373

您可以简单地创建一个扩展**WebSecurityConfigurerAdapter**的类并在匹配**的 URL**中 添加经过**身份验证的**

 **```
@Override
protected void configure(HttpSecurity http) throws Exception {
    http.authorizeRequests().antMatchers("/User/**").authenticated()
 } 
```

你已准备好出发

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-14T19:17:17.640

我做了一个看起来像这样的端点：

```
 @GetMapping("/api/authorize")
    public boolean isUserLoggedIn() {
        boolean isLoggedIn = false;
        try {
            SecurityContextHolder.getContext().getAuthentication().getPrincipal();
            isLoggedIn = true;
        } catch (Exception e) {
            isLoggedIn = false;
        }
        return isLoggedIn;
    } 
```**

# facebook - 从FB登出后如何检索用户的帖子

> ID：12371782
> 
> 赞同：0
> 
> 时间：2012-09-11T14:15:26.237
> 
> 标签：facebook, facebook-access-token

I'm trying to figure out a core concept in FB that even after reading a lot of FB documentation, couldn't understand. Let's say I'm building an app (that will reside in a tab), in which I want to see the last post of a user. I want to do this approximately one month after the user approved my app, without him using the app again.

I assume I will need to use a long-lived expiration token that will be saved to my DB. A month after I will run a procedure that will use this token and check the user posts.

Is this correct? What about a situation in which the user logged out? The token is no longer valid.. does this mean I will never be able to access user posts unless he will access my app? Isn't this a bit weird (since he already approved my app)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:04:34.240

不必要。

首先，`read_stream`当用户对您的应用进行身份验证时，您需要获得用户的许可。然后，因为您打算将 Facebook 用作应用程序，而不是用户，所以您需要作为应用程序进行身份验证，这是一个简单的过程：

为了获得应用程序的访问令牌，您需要做的就是使用以下 URL： `https://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials`

由于这些令牌是有时间限制的，因此每次使用 Graph API 时请求令牌可能会更容易，而不是将其存储在数据库中并等待它过期。

然后，您需要做的就是使用以下请求： `https://graph.facebook.com/USER_ID/feed?access_token=YOUR_ACCESS_TOKEN`

这样做的好处是，用户是否登录 Facebook 并不重要。

有关更多详细信息，请参见此处： [https ://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

# c# - Entity Framework 4 + 存储过程

> ID：12371784
> 
> 赞同：2
> 
> 时间：2012-09-11T14:15:30.340
> 
> 标签：c#, sql-server, stored-procedures, entity-framework-4

希望你们能帮助我。

这是我的情况。

我有一个存储过程，它返回一个非常动态`#table`的（列数不固定）

它接受 4 个参数。

```
ALTER PROCEDURE cct_AbsHoursPossible
    @_TpCode VarChar(9),
    @_Period VarChar(20),
    @_StartDate DateTime,
    @_EndDate DateTime
AS
    SET NOCOUNT ON
    SET FMTONLY OFF 
```

我在模型中包含了存储过程，并添加了函数导入并创建了复杂类型。

但是当我使用以下代码调用存储过程时

```
ctx.cct_AbsHoursPossible("V109   03", "A%", _start, _end); 
```

它给了我以下错误。

> *过程或函数“cct_AbsHoursPossible”需要参数“@_TpCode”，但未提供。*

我在网上搜索过，无法提出任何解决方案。

我对.net开发很陌生..

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:42:23.950

删除参数名称开头的下划线。

# python - 如何在 Excel 文档单元格中查找文本子集的格式

> ID：12371787
> 
> 赞同：10
> 
> 时间：2012-09-11T14:15:38.303
> 
> 标签：python, xlrd

使用 Python，我需要在给定的 Excel 工作表单元格中查找粗体或斜体的所有子字符串。

我的问题与此类似：

[使用 XLRD 模块和 Python 确定单元格字体样式（斜体与否）](https://stackoverflow.com/questions/6735845/using-xlrd-module-and-python-to-determine-cell-font-style-italics-or-not)

..但是该解决方案不适用于我，因为我不能假设单元格中的**所有**内容都具有相同的格式。单个单元格中的值可能如下所示：

* * *

**1.一些粗体文本**一些普通文本。*一些斜体文字*。

* * *

有没有办法使用 xlrd（或任何其他 Python Excel 模块）在单元格中查找一系列字符的格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-06-12T15:35:26.323

感谢@Vyassa 的所有正确指针，我已经能够编写以下代码，它遍历 XLS 文件中的行并输出具有“单一”样式信息的单元格的样式信息（例如，整个单元格是斜体) 或样式“段”（例如，单元格的一部分是斜体，一部分不是）。

```
import xlrd

# accessing Column 'C' in this example
COL_IDX = 2

book = xlrd.open_workbook('your-file.xls', formatting_info=True)
first_sheet = book.sheet_by_index(0)

for row_idx in range(first_sheet.nrows):
  text_cell = first_sheet.cell_value(row_idx, COL_IDX)
  text_cell_xf = book.xf_list[first_sheet.cell_xf_index(row_idx, COL_IDX)]

  # skip rows where cell is empty
  if not text_cell:
    continue
  print text_cell,

  text_cell_runlist = first_sheet.rich_text_runlist_map.get((row_idx, COL_IDX))
  if text_cell_runlist:
    print '(cell multi style) SEGMENTS:'
    segments = []
    for segment_idx in range(len(text_cell_runlist)):
      start = text_cell_runlist[segment_idx][0]
      # the last segment starts at given 'start' and ends at the end of the string
      end = None
      if segment_idx != len(text_cell_runlist) - 1:
        end = text_cell_runlist[segment_idx + 1][0]
      segment_text = text_cell[start:end]
      segments.append({
        'text': segment_text,
        'font': book.font_list[text_cell_runlist[segment_idx][1]]
      })
    # segments did not start at beginning, assume cell starts with text styled as the cell
    if text_cell_runlist[0][0] != 0:
      segments.insert(0, {
        'text': text_cell[:text_cell_runlist[0][0]],
        'font': book.font_list[text_cell_xf.font_index]
      })

    for segment in segments:
      print segment['text'],
      print 'italic:', segment['font'].italic,
      print 'bold:', segment['font'].bold

  else:
    print '(cell single style)',
    print 'italic:', book.font_list[text_cell_xf.font_index].italic,
    print 'bold:', book.font_list[text_cell_xf.font_index].bold 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-04-10T16:56:50.200

`xlrd`可以做到这一点。您必须`load_workbook()`使用 kwarg调用`formatting_info=True`，然后工作表对象将具有一个属性[rich_text_runlist_map](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html?p=4966#sheet.Sheet.rich_text_runlist_map-attribute)，它是将单元格坐标（`(row, col)`元组）映射到该单元格的*运行列表*的字典。运行列表是一系列`(offset, font_index)`对，其中`offset`告诉您字体在单元格中的哪个位置开始，并`font_index`索引到工作簿对象的`font_list`属性（工作簿对象是返回的内容`load_workbook()`），它为您提供描述字体属性的[Font 对象](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html?p=4966#formatting.Font-class)，包括粗体、斜体、字体、大小等。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-19T15:46:58.210

我不知道您是否可以使用 来做到这一点`xlrd`，但是由于您询问任何其他 Python Excel 模块：在 1.6.1 版`openpyxl` **中无法做到这一点。**

富文本`get_string()`在`openpyxl/reader/strings.py`. 在该模块中设置带有“原始”字符串的第二个表相对容易。

# javascript - 将外部 json 源解析为 html

> ID：12371789
> 
> 赞同：0
> 
> 时间：2012-09-11T14:15:45.713
> 
> 标签：javascript, json, html

我需要从存储在我自己服务器之外的另一台服务器上的 json 文件中获取一些数据。我收到了文件的 url，但必须在下面“匿名化”它，url 与下面完全相同，但域不同。

[http://api.somedomain.com/v1/26963723e61eae69cefd/companies/5565592010/related-articles.json?languages=nor&per_page=10&page=2](http://api.somedomain.com/v1/26963723e61eae69cefd/companies/5565592010/related-articles.json?languages=nor&per_page=10&page=2)

现在我想将该文件中的数据呈现到我的 html 文件中的列表或表结构中，最好是在页面加载之后。如果可以为此使用 jQuery，那就太好了，否则常规的 javascript 就可以了。

除非有人能提出一个解决方案，否则我很乐意在哪里转向以了解如何做到这一点。

# android - 当容器视图缩放centerInside时在android imageview中查找位图的位置

> ID：12371793
> 
> 赞同：4
> 
> 时间：2012-09-11T14:15:58.170
> 
> 标签：android, bitmap, imageview, android-relativelayout

我有一个包含自定义 ImageView、scaleType="centerInside" 的 RelativeLayout，我加载了一个位图（通常小于 imageView）。如何获得绘制位图的顶部/左侧位置？我需要能够在相对于位图的位置上添加视图。

```
 RelativeLayout view = (RelativeLayout) inflater.inflate(R.layout.scroll_scaled, container, false);
ContentImageView image = (ContentImageView) view.findViewById(R.id.base_page);
Bitmap bm = mInterfaceActivity.getPageImage(mPageNumber);
image.setImageBitmap(bm);` 
```

布局文件 scrolled_scaled

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >
<ImageView
    android:scaleType="centerInside"
    android:id="@+id/base_page"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ff00ff00"
    android:contentDescription="@string/product_page"
    android:src="@android:drawable/ic_menu_report_image" >
</ImageView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:41:01.443

您需要使用[Drawable](http://developer.android.com/reference/android/graphics/drawable/Drawable.html)的边界自己进行数学计算。

```
ImageView test = (ImageView) findViewById(R.id.base_page);
Rect bounds = test.getDrawable().getBounds();
int x = (test.getWidth() - bounds.right) / 2;
int y = (test.getHeight() - bounds.bottom) / 2; 
```

首先我们计算[视图](http://developer.android.com/reference/android/view/View.html)中没有被图像使用的空间。然后因为它是居中的，所以额外的空间在图像之前和之后均匀分布，所以它被绘制到`View`.

这些数字与视图的位置相关，但如果需要，您可以添加视图 X 和 Y。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-04T08:18:00.837

此方法返回 imageView 中图像的边界。

```
/**
 * Helper method to get the bounds of image inside the imageView.
 *
 * @param imageView the imageView.
 * @return bounding rectangle of the image.
 */
public static RectF getImageBounds(ImageView imageView) {
    RectF bounds = new RectF();
    Drawable drawable = imageView.getDrawable();
    if (drawable != null) {
        imageView.getImageMatrix().mapRect(bounds, new RectF(drawable.getBounds()));
    }
    return bounds;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:22:14.863

更新 2：如果您使用未指定的宽度和高度（例如 wrap_content），getX 和 getY 将返回 0。而不是`iv.getX()`并`iv.getY()`用这个问题的答案替换它：[获取相对于根布局的视图坐标，](https://stackoverflow.com/questions/3619693/getting-views-coordinates-relative-to-the-root-layout)然后将图像的边界添加到这些值。

您可以通过将 ImageView 的位置添加到内部可绘制对象的左上边界来做到这一点。像这样的东西：

```
ImageView iv = (ImageView)findViewById(R.id.image_view);
Drawable d = iv.getDrawable();
Rect bounds = d.getBounds();
int top = iv.getY() + bounds.top;
int left = iv.getX() + bounds.left; 
```

更新：对于缩放的图像，您必须将顶部和左侧坐标乘以图像比例以获得更准确的定位。你可以这样做：

```
Matrix m = iv.getImageMatrix();
float[] values = new float[9];
m.getValues(values);
float scaleX = values[Matrix.MSCALE_X];
float scaleY = values[Matrix.MSCALE_Y]; 
```

然后你必须将top乘以scaleY，将left乘以scaleX。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:38:20.953

最终得到了一个两部分的解决方案，基于反馈和一些重试。

我创建了子视图并将它们添加到“近似”位置的RelativeLayout，但作为View.INVISIBLE。

我对 RelativeLayout ViewGroup 进行了超分类，在 onLayout 中，我遍历了子视图列表并将它们放在“正确”的位置，因为我现在有了 RelativeLayout 自我意识到它的扩展大小。

看起来很笨重，但它确实有效。

感谢大家的建议，我的解决方案是听取大家的建议。

# symfony - 当 url 包含“e”时，它不再匹配请求的路由

> ID：12371800
> 
> 赞同：1
> 
> 时间：2012-09-11T14:16:40.630
> 
> 标签：symfony, routing, symfony-2.1

不止是解释那个错误的长篇大论，这里有一个解释一切的截图：

**一旦我们**在对应的 url 中输入一个“e” `rss_category`，**它就不再匹配路由**。看 ： ！![在此处输入图像描述](../Images/060092e2b587af127b85a1b2ba2dbafe.png)

**我们通过强制要求`{slugCat}`接受任何东西来解决这个问题`.^`（以前没有要求）**

如果有一天这可以帮助某人，并且如果有人有有效的解释，我会很高兴听到（在 Symfony 2.1.1 下运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:19:26.193

哇，好难的。这是因为在编译路由时，symfony 尝试使用变量名前面的字符作为分隔符。此代码来自 RouteCompiler.php：

```
 // Use the character preceding the variable as a separator
            $separators = array($match[0][0][0]);

            if ($pos !== $len) {
                // Use the character following the variable as the separator when available
                $separators[] = $pattern[$pos];
            }
            $regexp = sprintf('[^%s]+', preg_quote(implode('', array_unique($separators)), self::REGEX_DELIMITER)); 
```

Symfony 这样做是因为通常你会在变量名之前有某种分隔符，像 /upload/rssArticle/{slugCat} 这样的路由，其中​​ '/' 将是分隔符，它试图通过让你使用这个分隔符来提供帮助分隔包含多个变量的路由中的变量。在您的情况下，变量之前的字符是“e”并且该字符成为分隔符，这就是您的路线不匹配的原因。如果您的路线是 /upload/rssArticles{slugCat}，那么“s”将是分隔符，这将是您无法使用的字符。

也许你可以在 symfony 路由器组件上创建一个问题。我认为如果前面的字符是字母或数字，则不应将其用作分隔符。

# c# - 将数据从 Sql Server 推送到桌面应用程序

> ID：12371805
> 
> 赞同：10
> 
> 时间：2012-09-11T14:16:59.897
> 
> 标签：c#, .net, sql-server, sql-server-2005, signalr

我有一个用 c# 编写的非常简单的 .net 4 桌面应用程序，它需要显示一些插入到 SQL Server (2005) 上的表中的数据。数据本身很简单，只有一行大约 10 列，（主要是其他数据的计数）。

我可以每隔 x 间隔从应用程序轮询 sql 服务器，但我的偏好是让 sql 服务器尽可能将数据推送到此应用程序，因为“新数据”的时间通常是不规则的。

简而言之，我想知道这是否可能。在发布这个问题之前做一些研究，我发现了一些可能性。

1) SignalR：我发现[这个](https://stackoverflow.com/questions/11001205/pushing-data-from-sql-server-to-web-application-with-signalr)问题看起来很有希望，但这似乎是在 Web 应用程序而不是桌面应用程序的上下文中。在查看 signalR wiki 后，在我看来，它需要某种 Web 服务或其他我希望避免的 http 连接。

2) Sql server change tracking, from [this](https://stackoverflow.com/questions/6297392/what-is-the-best-way-to-push-inserted-data-out-of-sql-server-to-an-application) question。首先，我不在 sql 2008 上，所以我假设我必须安装或配置它（这不是问题），但我也不确定这是否能满足我的需要。

我还要提到，这个客户端应用程序可能存在于 100 多台不同的电脑上，所有这些电脑都需要在数据更改时得到通知。

那么，这样的事情可能吗？如果问题有点含糊，我深表歉意 - 并提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T14:47:39.273

该`SQLDependency`课程应该迎合您所指的场景。虽然我没有任何使用此的个人经验，[但这篇文章](http://msdn.microsoft.com/en-us/library/a52dhwx7%28v=vs.80%29.aspx)似乎符合您的情况

# java - 发送屏幕图像并连续显示

> ID：12371807
> 
> 赞同：0
> 
> 时间：2012-09-11T14:17:08.760
> 
> 标签：java, image, networking

我正在制作一个用于从网络上的任何其他 PC 控制 PC 的项目。但是当我将图像从服务器发送到客户端时，它没有改变，只显示第一张图像。因此，我使用 GZIP 压缩将捕获的服务器图像发送到客户端。

这是服务器的代码：

```
out = new DataOutputStream(s.getOutputStream());
zipout = new GZIPOutputStream(out);
while(true)
{
img = conn.getScreenImg(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
//Here conn is a Object of Robot Class
ImageIO.write(img, "jpeg", zipout);
Thread.sleep(200);
System.out.println("Success");
} 
```

客户端代码：显示服务器发送的图像。

```
while(true)
{
try 
{
img = ImageIO.read(zipin);
Graphics g = this.getGraphics();
g.drawImage(img, 0, 0, this);
Thread.sleep(100);
} 
catch (Exception e) 
{
e.printStackTrace();
}
} 
```

我需要帮助。客户端上的图像不会改变。我想知道，如果在这里使用 GZIP 压缩图像以通过网络发送是好的，它会加速这个过程。还是我应该使用其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:24:06.370

您在客户端上显示图像的方式对我来说似乎不正确。`JPanel`编写一个覆盖该`paintComponent`方法并处理图像渲染的自定义会好得多。如下所示：

```
 class ImagePanel extends JPanel {

    private BufferedImage image = null;

    private void setImage(BufferedImage img) {
      image = img;
      repaint();
    }

    public void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      if (image != null) {
        g2.drawImage(image, 0, 0, null);
      }
    }    
  } 
```

在您的`while`循环中，您将调用`setImage`面板上的方法。当然，该面板之前已实例化并添加到容器中。

# jquery - 使用正则表达式和 .replace() 时是否可以从解析中排除某些元素？

> ID：12371810
> 
> 赞同：0
> 
> 时间：2012-09-11T14:17:12.240
> 
> 标签：jquery, regex

```
<script language="javascript">
    $("div.post-content , .parsedsig").each(function(){
        if($(this).html().indexOf("[/tabulaScriptum]") != -1) {
             pattern = /\[tabulaScriptum=(.*?)\]([^\[]*)\[\/tabulaScriptum\]/gi
             $(this).html($(this).html().replace(pattern, "<div class='tabulaScriptum'><div class='tabulaNomen'>$1</div><div class='tabulaImpleo'>$2</div></div>")) 
        }
    });
</script> 
```

该脚本运行良好，除了一件事......我不需要替换`[tabulaScriptum=][/tabulaScriptum]`某些元素。例如，我不想替换具有类 .code-box 的元素中的那些“标签”。可能吗？

澄清：元素 .code-box 位于 .post-content 中。

澄清 #2：这个脚本创建了简单的除法剧透。`.tabulaScriptum`是剧透的正文，是剧透的`.tabulaNomen`名称和按钮，依次`.tabulaImpleo`在点击时显示（或隐藏）。Reveal\hide script 位于其他地方，我没有在这里发布它，因为它并不重要。

澄清#3：http: [//jsfiddle.net/PRtsw/1/fiddle](http://jsfiddle.net/PRtsw/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:26:27.940

有很多方法可以做到这一点。首先想到的是使用 jQuery 的`.not(selector)`方法。

[http://jsfiddle.net/nate/2hNEA/](http://jsfiddle.net/nate/2hNEA/)

> $("div.post-content, .parsedsig").not('.code-box').each(function () { ... });

**更新#1**

在我提交这个答案之后，这`.code-box`是一个孩子的澄清。`.post-content`这使问题变得更加有趣！我很想看看比我更聪明的人如何处理这个问题。

我想到的一种解决方案是采用两遍方法。

首先按照你实现它的方式进行更改，然后返回并反转`.code-box`div 的替换。

[http://jsfiddle.net/nate/2hNEA/1/](http://jsfiddle.net/nate/2hNEA/1/)

```
$("div.post-content .code-box .tabulaScriptum").each(function () {
    var $this = $(this);
    $this.before('[tabulaScriptum=]' + $this.text() + '[/tabulascriptum]');
    $this.remove();
}); 
```

我不知道这是否是最好的方法，但它似乎有效。

**更新#2：**

这是另一种更简单的方法：

**小提琴：http:** [//jsfiddle.net/nate/2hNEA/2/](http://jsfiddle.net/nate/2hNEA/2/)

`.code-box`在进行更大的搜索/替换之前，只需在任何无法识别的元素中渲染 tabulaScriptum 文本。完成后，恢复它们。

```
// Temporarily render .code-box contained tabulas unrecognizable
$('.code-box').each(function () {
    var pattern = /\[tabula/gi;
        $(this).html($(this).html().replace(pattern, "[placeholder"));
});

// Search / Replace, as before...

// Restore .code-box contained tabulas
$('.code-box').each(function () {
    var pattern = /\[placeholder/gi;
        $(this).html($(this).html().replace(pattern, "[tabula"));
});​ 
```

**更新#3：**

感谢您提供小提琴！这是您的示例，其中包含我的最后一个解决方案。

[http://jsfiddle.net/nate/PRtsw/2/](http://jsfiddle.net/nate/PRtsw/2/)

# ruby-on-rails - 在 vps 主机上配置 rails 服务器

> ID：12371818
> 
> 赞同：2
> 
> 时间：2012-09-11T14:17:30.760
> 
> 标签：ruby-on-rails, webserver, hosting, vps

我必须为我的 Rails 应用程序配置我的 RoR vps 托管，但是在我的本地机器上我简单地使用 webrick ...有什么方法可以在服务器上执行此操作，这样它会更快，而且，如果它重新启动或内存下降，或者调用服务器关闭的东西，然后它会自动启动？

铁路企业又如何？

现在我有干净的 ubuntu 服务器和 rvm

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:23:29.733

遵循本教程，它非常适合初学者，并将回答您的所有问题：[http ://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications -2/](http://coding.smashingmagazine.com/2011/06/28/setup-a-ubuntu-vps-for-hosting-ruby-on-rails-applications-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:22:34.153

使用哪个网络服务器取决于很多事情。其中包括 Thin、Unicorn、Rainbows、Puma 和counting。

我建议您在 google 上查看（或者甚至在这里，我很高兴这是以前回答过的）以比较 ruby​​ 网络服务器，这样您就可以知道它们每个都适合什么情况，以及哪一个最适合您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:24:37.913

生产部署需要安装**nginx**或**apache**， **nginx**是轻量级的，考虑安装 nginx，

现在有各种简单易安装的方式就是passenger with nginx

或者只是你可以使用**nginx+unicorn**或**nginx+thin**你可以找到各种文章只是谷歌它。

# jsonp - JSON 响应未解析

> ID：12371820
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:17:35.300
> 
> 标签：jsonp, sencha-touch-2

我正在 Sencha Touch 2.0 中开发一个应用程序，它应该通过驻留在不同域中的 Web 服务来解析 JSON。

我被困在解析 JSON 中。如果我使用名称为`title`,`author description link`等的节点，那么它可以完美运行。

但是，如果我对节点使用其他名称，则它不会显示任何内容。

这是我试图解析的 JSON 响应：

[http://stassuet.byethost15.com/services/test/index.php](http://stassuet.byethost15.com/services/test/index.php)

这就是我在 Sencha 应用程序中解析响应的方法：

```
Ext.define('GS.store.MyStore', {
    extend: 'Ext.data.Store',

    requires: [
        'GS.model.MainEvent',
        'Ext.data.proxy.JsonP',
        'Ext.data.proxy.Rest'
        //'GS.util.JsonpX'
    ],

    config: {
        autoLoad: true,
        model: 'GS.model.MainEvent',
        storeId: '55',

        headers: {
            "Accept": "text/xml"
            //"access-control-allow-origin": "*",
            //"Origin": "goodnews.pk",
            //"Referer": "goodnews.pk"
        },

        method: 'GET',
        callbackKey: 'myFunction',

        proxy: {
            type: 'jsonp',
            url: 'http://stassuet.byethost15.com/services/test/index.php',

            reader: {
                type: 'json',
                rootProperty: 'albums.images'
            }
        }
    }
}); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T22:19:01.637

即使您不需要它们，您似乎也设置了很多配置。例如：

*   标题
*   方法
*   回调键

是否有一个原因？

无论如何，使用这个类，一切都应该加载：

```
Ext.define('Example.store.SO', {
    extend: 'Ext.data.Store',

    config: {
        autoLoad: true,
        fields: [
            'name',
            'author',
            'last_modified'
        ],
        proxy: {
            type: 'jsonp',
            url: 'http://stassuet.byethost15.com/services/test/index.php',
            reader: {
                rootProperty: 'albums.images'
            }
        }
    }
}); 
```

# sql - SQL：以 10 分钟为增量计数调用

> ID：12371821
> 
> 赞同：0
> 
> 时间：2012-09-11T14:17:36.493
> 
> 标签：sql, datediff, dateadd

我需要确定每个月以 10 分钟的增量接听多少电话。我有以下 SQL 查询可以在半小时内工作，但我无法让它以 10 分钟为增量工作。我可能缺少一些简单的东西。任何帮助将不胜感激。谢谢

```
select 
    count(*) as Callcount,
    case 
       when datepart(mi, PBXqtime) < 30 
          then dateadd(hh, datediff(hh, 0, PBXqtime) + 0, 0)
          else dateadd(mi, 30, dateadd(hh, datediff(hh, 0, PBXqtime) + 0, 0)) 
    end as time
from 
    callcomplete 
where 
    CustId = '3100472' 
    and PBXQTime between '11/1/11 0:0:00' and '11/30/11 23:59:00'
group by 
    case 
       when datepart(mi, PBXqtime) < 30 
        then dateadd(hh, datediff(hh, 0, PBXqtime) + 0, 0) 
        else dateadd(mi, 30, dateadd(hh, datediff(hh, 0, PBXqtime) + 0, 0)) 
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:54:53.723

我认为这会起作用（但未经测试，因为我没有你的数据）：

```
select 
    count(*) as Callcount,
    DATEADD(minute,(DATEDIFF(minute,'20100101',PBXQTime) / 10)*10,'20100101')
from 
    callcomplete 
where 
    CustId = '3100472' 
    and PBXQTime >= '20111101'
    and PBXQTime < '20111201'
group by 
    DATEADD(minute,(DATEDIFF(minute,'20100101',PBXQTime) / 10)*10,'20100101') 
```

只需取自某个固定时间点以来的分钟数，除以 10（将​​向下舍入到最接近的整数），然后乘以 10 并加回到同一固定时间点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:27:11.843

没有测试，但是：

```
SELECT
    DATEPART(DAY, pbxqtime) AS [day], DATEPART(HOUR, pbxqtime) AS [hour], 
    (DATEPART(MINUTE, pbxqtime) / 10) AS [interval], COUNT(*) AS Callcount
FROM
    callcomplete
WHERE
    custid = '3100472'
    AND pbxqtime BETWEEN '11/1/11 0:0:00' AND '11/30/11 23:59:00'
GROUP BY
    DATEPART(DAY, pbxqtime), DATEPART(HOUR, pbxqtime), 
    (DATEPART(MINUTE, pbxqtime) / 10) 
```

这是假设一个 MSSQL 环境。此外，关于如何指定日期范围，下面还有一场激烈的争论。有人争辩说，使用简单的运算符，例如`>=`and`<=`工作得更好，更干净。因此，您可以选择使用`AND pbxqtime >= '2011-11-01' AND pbxqtime < '2011-12-01'`.

# javascript - 如何在网页中打印适合纸张尺寸（A3、A4、A5 等）的图像？

> ID：12371822
> 
> 赞同：11
> 
> 时间：2012-09-11T14:17:36.390
> 
> 标签：javascript, css, printing, media

我目前正在使用 IE9 和媒体查询，我不需要在其他浏览器上使用它。

我尝试使用一组规则，例如：

```
@page {
    size: auto;
    margin: 10mm 10mm 10mm 10mm;
} 
```

//... 匹配所有 A 格式（A0、A1、A2 等）的毫米数的规则，包括边距和容差

```
/* A4 210x297 mm */
@media print and (min-height: 266mm) and (max-height: 288mm) and
    (min-width: 179mm) and (max-width: 201mm) {
    .img_port {
        height: 267mm !important;
    }
} 
```

// ...

它似乎正在工作，但它并不可靠，因为即使始终选择 A4 格式，传递给 CSS 的尺寸高度和宽度值似乎也取决于打印机。

我想问的是是否有任何其他可能的方式来获得相同的结果（根据纸张尺寸将图像放在一页上）。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:19:13.160

在 IE 中打印的长短是你永远无法准确控制这样的事情。

在物理上，当涉及到多少页面是可打印区域时，打印机具有不同的功能。然后，您还必须处理 IE 从用户打印的最后一页中记住的任何设置，例如缩放、边距、每页页数等。

在为此苦苦挣扎多年之后，我终于放弃了尝试控制 IE 对打印页面所做的事情，并开始将我的打印样式表视为建议。

IE < 9 根本不以任何有意义的方式支持分页符或@page，并且在我的测试中，IE9 几乎忽略了所有@page 规则，而支持用户上次配置的任何设置。

要建议 IE 以页面的全宽和全高打印图像，请尝试[从 HTML 进行横向打印的答案](https://stackoverflow.com/questions/138422/landscape-printing-from-html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T16:32:59.603

听起来这可能是一份工作[`page-break`](http://reference.sitepoint.com/css/page-break-before)：

```
.img_port {
    height: 267mm !important;  /* might also try height: 100%; */
    page-break-after: always;
    page-break-before: always;
    page-break-inside: avoid;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T09:22:06.380

没有任何*可靠*的方法可以这样做AFAIK。
我们让用户选择页面大小/方向并生成包含图像的正确大小的 PDF。实际上，您可以生成高分辨率（更大）图片以获得更好的打印 DPI 并使其适合页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T22:47:22.030

你总是可以这样做：

创建一个新的 CSS 文件，其中仅包含要在打印时应用的 CSS。

```
*{display: hidden;}
img{display: block; width: 100%; height: 100%;} 
```

然后你可以在你的 html 文档中链接到它：

```
<link rel="stylesheet" href="link/to/print.css" media="print" type="text/css" /> 
```

我不是 100% 了解“显示：块；”，您可能需要尝试使用“块”的其他值。我还没有测试过，但如果你这样做了，请告诉我它是否有效！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-11T17:48:24.507

如果您使用分页符，它将显示一个空页面。

```
img{
    page-break-inside: avoid;
    padding:0; margin:0; 
    top:0; left:0; right:0;bottom:0;  border:0;
    /*width:2480px; height:3508px!important;*/ /*a4 size */
    width:100%; height:100%; max-width:100% important!
}
.page-break  { display: block; page-break-before: always; }
@page {
size: landscape;
}
@page :first {
  margin-top: 10cm    /* Top margin on first page 10cm */
} 
```

# sql - SQL检查日期是否在这个或以前的日历年内

> ID：12371824
> 
> 赞同：0
> 
> 时间：2012-09-11T14:17:44.953
> 
> 标签：sql

您如何检查日期是否在本日历年或上一日历年之内。

IE 今年 12 月 31 日 > myDate > 去年 1 月 1 日

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:21:02.900

标准的 SQL 方式是使用 EXTRACT：

```
select *
from t
where extract(year from t.thedate) = extract(year from CURRENT_TIMESTAMP) or
      extract(year from t.thedate) = extract(year from CURRENT_TIMESTAMP) - 1 
```

并非所有数据库都支持这些功能；但所有人都有办法以某种方式提取日期。例如，许多支持该`year`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:21:37.190

你可以做这样的事情

```
SELECT * FROM YourTable
WHERE TO_DATE("FROM-DATE") < DateColumn AND TO_DATE("END-DATE") > DateColumn 
```

这是在Oracle中，很确定MySQL SQLite或其他数据库有这个功能，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:23:40.537

对于 SQL Server，您可以使用`DATEDIFF`：

```
WHERE DATEDIFF(year,myDate,CURRENT_TIMESTAMP) in (0,1) 
```

`DATEDIFF(year,...`有效地计算日期之间的年份转换数（或者换句话说，午夜新年前夜的数量）。

对于索引可能有助于查询的较大表，我们需要转换`CURRENT_TIMESTAMP`并`myDate`与这些计算值进行比较：

```
WHERE myDate >= DATEADD(year,DATEDIFF(year,'20010101',CURRENT_TIMESTAMP),'20000101') AND
      myDate < DATEADD(year,DATEDIFF(year,'20010101',CURRENT_TIMESTAMP),'20020101') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:25:13.450

在 SQL Server 中，您可以这样做：

```
DECLARE @yourDate DATETIME;
SELECT @yourDate = '2012-06-02';

SELECT CASE YEAR(@yourDate)
          WHEN YEAR(GETDATE()) THEN 'Same Year'
          WHEN YEAR(GETDATE()) - 1 THEN 'Last Year'
          ELSE 'Other Year'
       END AS YourColumn; 
```

如果您必须查找未来日期或过去一年多的时间，您也可以轻松扩展此日期。

其他 RDBMS 将提供类似的功能来检查日期的年份。

# c++ - 在 C++ 中放置 const 的最佳位置在哪里？

> ID：12371825
> 
> 赞同：0
> 
> 时间：2012-09-11T14:17:57.100
> 
> 标签：c++, coding-style, constants

我已经完成了 C# 和 C，但是，当我来到这个 C++ 项目时，我对这个小代码风格问题有点卡住了。

我在 C++ 程序中有几个 const 变量（可能是字符串或数字），我想将它们收集在一个地方并从其他类访问它们。

例如，在 C# 和 java 中，我们可以有一个资源文件或一个配置文件来存储所有这些数据，或者可能只是一个单例或静态类。

但是我应该用 C++ 做的最好的方法是什么？我应该将 const 变量放在头文件中还是创建一个像 JAVA 这样的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:21:21.417

IMO 这是 C# 和 Java 的缺点之一 - 一切都必须在一个类中。

在 C++ 中，你有~~二~~三个选项：

*   在一个班级里面
*   在命名空间中
*   自由变量（不要）

如果您的常量在逻辑上与某个类相关，请将它们放在该类中。否则，使用`namespace`.

# java - 渲染 HTML：服务器端与客户端

> ID：12371826
> 
> 赞同：0
> 
> 时间：2012-09-11T14:18:03.920
> 
> 标签：java, jquery, json, jsp

我有一个包含订单项等详细信息的复杂发票页面。我将一直使用这些表格。加载页面时，我正在使用 javacode（for 循环等）并以这种方式编写 html。我可以做的另一件事是返回一个 json 对象并使用 javascript 来构建该表单。什么是更好的做法？

仅供参考，我只使用 Java 、 jsps 、 JQuery 、 json 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:38:07.027

这是两种完全不同的方法。

1.  当您使用 java jsp 技术构建页面时，它是一种**服务器技术**。这意味着您可以控制服务器上将返回给客户端的数据。这个数据的表示是另一个问题。
2.  JavaScript 是**客户端技术**，更灵活，样板更少，速度更快，但页面生成依赖于客户端 javascript 引擎。如果它被禁用，您可能会遇到一些问题。

如果您不受任何技术要求的约束，我建议选择 javascript，因为您有*从服务器获取数据*的情况。

如果*将数据发送到服务器*服务器技术是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:26:55.803

这样做有很多“选择”。对于网络表单，我更喜欢带有 json 对象的 javascript 路由。Node.js 非常灵活，很容易实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T01:33:30.373

客户端渲染通常被认为较慢（就页面加载时间而言），正如最近发现的那样，当[Twitter 从客户端切换回服务器端渲染](http://engineering.twitter.com/2012/05/improving-performance-on-twittercom.html)并发现他们的页面加载时间只有 1/5 时。

当您在具有 16GB RAM 的核心 i7 计算机上运行站点时，这不会有太大的不同。当您在移动设备或旧计算机上运行大量客户端站点时，这很重要。更多的 javascript = 更高的 RAM 使用率和更多的浏览器要做的工作（下载、解析、运行）。

不要误会我的意思，我是客户端渲染的忠实粉丝，因为它让我可以使用很棒的 AngularJS。对我来说，要**在两者之间找到一个很好的平衡点**：我想要一个具有丰富 UI 体验的快速加载页面。

例如，如果我正在创建一个新的列表页面；我可以从服务器获得前 10 个左右的结果，与页面一起加载。然后我会在底部有一个“加载更多新闻文章”按钮或通过一些javascript调用（例如jQuery $.ajax（），AngularJS $http等）异步加载下一个10个新闻项目到JSON的页面服务。

相对于：

*   **仅限客户端**：在您的页面加载时，通过 javascript 和 JSON 加载最初的 10 个新闻项目。单击“加载更多新闻文章”按钮，使用相同的服务然后根据请求加载其他新闻项目。

*   **仅服务器端**：从服务器加载带有页面的最初 10 个新闻项。单击“加载更多新闻文章”按钮会触发页面刷新，然后从服务器返回接下来的 10 篇新闻文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:24:48.563

我建议使用 json、jquery 插件... 更易于管理和更简洁的代码

# ruby-on-rails-3 - 带空格的邮政编码范围

> ID：12371827
> 
> 赞同：0
> 
> 时间：2012-09-11T14:18:06.077
> 
> 标签：ruby-on-rails-3

在荷兰，我们的邮政编码格式如下：“1234 AA”。邮政编码作为“1234AA”存储在数据库中，并使用装饰器在视图中显示空间。我有一个搜索字段，我希望用户能够搜索“1234 AA”以找到“1234AA”的邮政编码。如何在模型中创建搜索范围来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:20:03.097

在您处理与搜索相关的逻辑的控制器中，您不能只删除空格吗？

# html - Adwords 联系表格跟踪

> ID：12371829
> 
> 赞同：0
> 
> 时间：2012-09-11T14:18:12.990
> 
> 标签：html, google-ads-api, pay-per-click

我们有一个 senario，我们通过 Adwords 转换跟踪代码跟踪联系表单提交，并将其分配为 PPC 转换。

这是一个潜在客户生成网站；因此暴露出来的问题是他们有很好的搜索引擎优化并且有机地收到了大量的联系表格提交。

我们需要通过 PPC 找出联系表单转换是否成功，然后将其计入 ROI；因此，我们在联系表单提交中收到 Bc，并想知道是否有一种方法可以标记所有 PPC 联系表单提交的详细信息，即电子邮件地址等，然后我们可以将这些与 SEO 表单提交分开，然后获取它们仅查看那些 PPC 查询和有关成功的反馈。

有谁知道解决方案或攻击此问题的最佳方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T16:32:25.623

您是否听说 AdWords 去年年底推出了转化导入功能和 API？ [https://support.google.com/adwords/answer/2998031?hl=en](https://support.google.com/adwords/answer/2998031?hl=en)

他们经常谈论的案例是潜在客户转化。这是它的工作原理。简而言之，您可以从每次广告点击中获取点击 ID。如果其中一个人继续提交潜在客户，您将点击 ID（称为 GCLID）与潜在客户的信息一起存储。

然后，如果潜在客户成为合格甚至成为客户，您将 GCLID 连同其转换的日期/时间一起发送回 AdWords，AdWords 将其记录为实际转换。他们可以获得报告，或使用他们的出价自动化来优化这些。

这有帮助吗？

乔恩

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T20:52:18.603

你在使用谷歌分析吗？它应该能够确定潜在客户的来源，以便您可以将它们分解为 SEO 的潜在客户和 PPC 的潜在客户。

或者您是否试图找出您在电子邮件中收到的每个潜在客户的确切流量来源。我使用了一个名为[http://convertable.com](http://convertable.com)的工具，它正是这样做的，因为 Google Analytics 在最初的联系表单提交之外并没有真正跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T22:25:29.750

> 我们有一个场景，我们通过 Adwords 转换跟踪代码跟踪联系表单提交，并将其分配为 PPC 转换。

您为什么不将联系表单提交作为分析目标进行跟踪？如果你想给他们增加一个价值，你可以在分析中给出一个固定的金额。

> 这是一个潜在客户生成网站；因此暴露出来的问题是他们有很好的搜索引擎优化并且有机地收到了大量的联系表格提交。我们需要通过 PPC 找出联系表单转换是否成功，然后将其计入 ROI；

您可以在 Acquisition 部分或在 Analytics 的 Conversions 部分查看 Source/Medium，或使用此信息创建自定义报告。

> 因此，我们收到联系表单提交的 Bc，并想知道是否有一种方法可以标记所有 PPC 联系表单提交的详细信息，即电子邮件地址等，然后我们可以将这些与 SEO 表单提交分开，然后获取它们仅查看那些 PPC 查询和有关成功的反馈。

您可以通过在后端跟踪 utm 代码将电子邮件帐户与源/媒体相关联，这样每次提交时，您都会保存 URL 提交请求中的 utm_source 和 utm_medium 参数（[https://support.google.com/analytics /answer/1033867?hl=zh-CN](https://support.google.com/analytics/answer/1033867?hl=en)）。

另一种方法是使用诸如 KISS 指标之类的免费工具 - [https://www.kissmetrics.com/](https://www.kissmetrics.com/)或 mixpanel - [https://mixpanel.com](https://mixpanel.com)

# php - Paypal - 保护非加密按钮

> ID：12371833
> 
> 赞同：0
> 
> 时间：2012-09-11T14:18:25.390
> 
> 标签：php, security, codeigniter, paypal, paypal-ipn

我使用 IPN 实现了一个动态按钮“立即购买”（未保存在我的 PayPal 帐户中），它工作正常（是的！）。

现在我对他的安全性有疑问，因为如果有人用萤火虫（例如）更改金额值，那么如果我的 IPN 侦听器说金额有问题，该交易对贝宝也有效。

我的问题是“我可以使用 php / codeigniter 库加密表单吗？”

因为我尝试在 IPN 侦听器中检查金额，但 paypal 上的交易继续正确，并且没有被 IPN 阻止。

在这里，您可以找到我的侦听器代码的一部分：

```
private function isVerifiedIPN(){

    $req = 'cmd=_notify-validate';
    $posts = $this->input->post();
    foreach ($posts as $key => $value){
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    if($this->config->item('SIMULATION'))
        $url = $this->config->item('SIMULATION_URL');
    else
        $url = $this->config->item('PRODUCTION_URL');

    if(!$this->isVerifiedAmmount() ||
    !$this->isPrimaryPayPalEmail() ||
    !$this->isNotProcessed()){
        $req = '';
    }

    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Host: $url\r\n"; //443
    $header .= "Content-type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-length: " . strlen($req) . "\r\n\r\n";

    $fp = fsockopen ("ssl://$url", 443, $errno, $errstr, 30);

    if (!$fp)
    {
        $this->sendReport("Errore connessione socket");
        return FALSE;
    }
    else
    {
        fputs ($fp, $header . $req);
        while (!feof($fp))
        {
            $res = fgets ($fp, 1024);
            if (strcmp($res, "VERIFIED") == 0)
            {
                // transizione valida
                fclose ($fp);
                return TRUE;
            }
            else if (strcmp ($res, "INVALID") == 0)
            {
                $this->sendReport('Transizione non valida');
                fclose ($fp);
                return FALSE;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:43:07.243

You can dynamically encrypt buttons so that people with Firebug (or similar software) can't edit them. The PayPal API library has an example of this you can use, but I can't find it again right now.

[This PayPal help file](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_encryptedwebpayments#id08A3I0P017Q) explains how to get the various keys you need using your server command line.

I also found [a tutorial](http://www.stellarwebsolutions.com/en/articles/paypal_button_encryption_php.php) and [a certificate builder](http://www.stellarwebsolutions.com/certificates/stellar_cert_builder.php) (I didn't use, so can't confirm how secure it is...)

Once you've generated your key and certificate, you need to put them on your server and set `DEFAULT_EWP_PRIVATE_KEY_PATH` and `DEFAULT_EWP_CERT_PATH` to the relevant files.

Upload the public certificate to PayPal (instructions in linked tutorials), and set `DEFAULT_CERT_ID` to the Cert ID it gives you for that file. It'll also give you a file you can download - add that to your server and set `PAYPAL_CERT_PATH` to the path for that file.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:30:38.130

For those who find it too hard to use a library to get the encryption going, or have hosting requirement issues with getting that working, the other trick is to not encrypt, but create a hash that you pass so that you can detect tampering, and then validate this hash when the IPN comes in for processing. I explain this here:

[How do I make a PayPal encrypted buy now button with custom fields?](https://stackoverflow.com/q/14489512/105539)

# c++ - 与用户构建类字符串类型的字符串比较

> ID：12371834
> 
> 赞同：3
> 
> 时间：2012-09-11T14:18:25.543
> 
> 标签：c++

通常你可以比较字符串..

```
if (var1 == "a string") ... 
```

但是当我使用转换运算符声明自己的类时，如下所示：

```
class my_type {
   operator std::string() const { ... };
   ....
} 
```

现在这个：

```
 std::string var1("a string");
 my_type x("a string");
 if (x == "a string") ....
 if (x == var1) .... 
```

不工作..即...

```
error: no match for ‘operator==’ 
```

当然这有效：

```
 if ((std::string) x == var1) .... 
```

但我希望它在没有明确转换的情况下发生。为什么 c++ 不将 my_type 转换为字符串进行比较。我如何在不实现“==”运算符本身的情况下强制它执行此操作？其他比较运算符也是如此。

谢谢你

PS>顺便说一句，如果我实现将 my_type 转换为数字的运算符（我的类型没问题）...比如：

```
 operator double() const { ... }; 
```

与数字的比较工作正常，我不需要实现 == 等.....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:42:27.927

[正如这里](https://stackoverflow.com/a/12408752/673730)所指出的，这不是关于隐式转换，而是`operator ==`关于字符串的行为方式。

但是，我建议您为您的课程重载`operator ==`，而不是依赖隐式转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T14:36:08.363

转换不起作用，因为字符串的 operator == 是模板化运算符（函数模板），而不是重载（例如，参见[http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp](http://en.cppreference.com/w/cpp/string/basic_string/operator_cmp)运算符 == 声明）。

对于函数模板，参数类型必须完全匹配参数（没有任何隐式转换）。为了说明区别，让我们在字符串上引入一个重载 << 运算符：

```
#include <string>

struct X
{
    operator std::string() {return "X";}
};

std::string operator << (std::string const& s1, std::string const& s2)
{
  return s1+s2;
}

int main()
{
    X x;
    x<<std::string("bla"); // compiles fine
} 
```

它编译得很好。

# powershell - 删除未锁定（使用中）的文件

> ID：12371836
> 
> 赞同：1
> 
> 时间：2012-09-11T14:18:26.043
> 
> 标签：powershell, delete-file, filelock

我正在尝试删除所有`%TEMP%`超过 30 天的文件（不是文件夹）。问题是某些文件正在被程序使用，因此无法删除。我试图解决问题如下：

```
 function IsFileLocked($filePath){
        #write-host $filePath

        Rename-Item $filePath $filePath -ErrorVariable errs -ErrorAction SilentlyContinue
        $errs.Count
        if ($errs.Count -ne 0)
        {
            return $true #File is locked
        }
        else 
        {
            return $false #File is not locked  
        }
    }

 $Path= "$env:temp"
    if ((Test-Path -Path $Path) -ieq $true) 
    {
    $Daysback =  '-30'
    $CurrentDate = Get-Date
    $DatetoDelete = $CurrentDate.AddDays($Daysback) 

    get-childitem $Path -recurse  | Where-Object {$_.LastWriteTime  -lt $DatetoDelete } | 
    Where-Object {$_.PSIsContainer -eq $False }| Where-Object {(IsFileLocked -filePath "($_)") -eq $false }# | remove-item   -force #-WhatIf
    } 
```

问题是 (`IsFileLocked -filePath "($_)") -eq $false`不返回任何元素。

是否有可能`get-childitem`阻止文件，以便在我运行时所有文件都被锁定`get-childitem`？

任何其他想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:03:02.437

如何仅删除 30 天以上的文件并忽略错误：

```
$old = (Get-Date).AddDays(-30)

Get-ChildItem $env:TEMP -Recurse | 
Where-Object {!$_.PSIsContainer -and $_.LastWriteTime -lt $old } | 
Remove-Item -Force -ErrorAction SilentlyContinue 
```

# oracle - 2012 年夏季运动会的名单，每个运动的名称和该运动的项目数量？

> ID：12371837
> 
> 赞同：1
> 
> 时间：2012-09-11T14:18:26.617
> 
> 标签：oracle

2012 年夏季运动会的名单，每个运动的名称和该运动的项目数量？

这就是我得到的，但它返回了一个模棱两可的答案。我究竟做错了什么？请帮忙..

```
SELECT
    sport_name as "Sport Name",
    COUNT(discipline_code) as "Number of Disciplines"
FROM
    GAMES.SPORT,
    GAMES.GAMESDISCIPLINE,
    GAMES.SUMMERGAMES
WHERE
    sg_year = 2012
GROUP BY
    sport_name; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T14:26:05.200

这三个表之间没有任何[连接](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries006.htm)，因此您将获得笛卡尔积。尝试切换到 ANSI 连接语法以使其更清晰。您需要输入构成表之间连接的真实列名，我只是在这里猜测：

```
SELECT
    s.sport_name as "Sport Name",
    COUNT(gs.discipline_code) as "Number of Disciplines"
FROM GAMES.SUMMERGAMES sg
JOIN GAMES.GAMESDISCIPLINE gd ON gd.games_id = sg.games_id
JOIN GAMES.SPORT s ON s.discipline_id = gd.discipline_id
WHERE
    sg.sg_year = 2012
GROUP BY
    s.sport_name; 
```

# ruby-on-rails - 旧版数据库模式 - 键/值表

> ID：12371838
> 
> 赞同：0
> 
> 时间：2012-09-11T14:18:27.180
> 
> 标签：ruby-on-rails, activerecord

我有一个遗留数据库模式，它由类似于以下的对象组成：

```
table=car
oid, something, something_else, ...
has many properties -> car_properties

table=car_properties
oid, car_id, keyname, value, ...
belongs to car 
```

Car 对象实际上（逻辑上）是“car”表中的列和“car_properties”表中的多行的组合。

我正在考虑对使用此架构的应用程序进行并行重写，因此我需要一些方法将此表架构映射回一个不错的 ActiveRecord 对象。理想情况下，我希望 _properties 表中的每个属性都可以作为“Car”类的方法访问，这样我以后可以更改基础表而不会破坏任何东西。

我可以静态定义 Car 类中的方法，但我想确保 ActiveRecord 魔法有效，因此 .save 之类的东西可以工作，并且我可以在以后更改底层架构（意识到这可能会中断应用）。

我将如何在 ActiveRecord 中执行此操作？

澄清：

基本上，我希望以下工作

```
@car = Car.first
@car.something = something
@car.someprop = something 
```

然而在上面，`@code.someprop`实际上是`@car.properties.where( "keyname = ?", "someprop" ).value`

显然，我不想每次都为此做一个 SQL 查询，所以我正在寻找一种很好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:53:43.700

除非我考虑不周，否则它应该很简单：

```
class CarProperty < ActiveRecord::Base
   set_primary_key :oid

   belongs_to :car
end

class Car < ActiveRecord::Base
   set_table_name :car
   set_primary_key :oid

   has_many :car_properties

   accepts_nested_attributes_for :car_properties
end 
```

# php - 只能使用会话变量来实现持久数据吗？

> ID：12371844
> 
> 赞同：1
> 
> 时间：2012-09-11T14:19:02.820
> 
> 标签：php, session, checkout

我正在尝试找出 oldnavy.ca 上的一页结帐系统。

如果你能花时间把一些东西扔进购物车里，看看它是什么样子，我将不胜感激。

让我困惑的是，刷新页面会保存进程的当前状态。因此，如果您创建您的登录名并添加您的送货地址，如果您点击刷新，它将在那里。

阅读很多文章听起来像使用会话变量来存储大量数据并不被认为是好的编程。现在，存储表单数据（如运输信息等）是否被视为“大量”数据？

我只是想知道他们是如何实现这个购物车系统的，因为它无处不在，如果它有效，我不想不愿意使用会话变量。

也许有替代品在使用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:35:37.157

没有硬性和快速的答案，只有指导方针。

如果您使用标准 PHP 会话，它们将保存在服务器磁盘上的纯文件中，每个活动会话一个。这也意味着在每次页面加载时，相关的会话文件都会从磁盘读取到内存中。多少是“太多”取决于许多因素......

*   将文件从磁盘读取到内存需要多长时间？
*   磁盘缓存可以防止每次访问物理磁盘，但是文件越大，磁盘缓存中的文件就越少
*   RAM中的数据占用多少内存？
*   序列化数据并将其写回磁盘需要多长时间？
*   您有多少并发用户需要 PHP 一直读取和写入磁盘？
*   会话活动多​​长时间，即在垃圾收集之前，磁盘周围会散落多少会话文件？

对于典型的小型网上商店（不是亚马逊大小），答案是基于文件的会话通常非常好。您可能会在每个文件中最多存储几十 KB，这对于保存用户的地址数据和购物篮来说已经足够了。你几乎不会遇到这个问题。

或者，只有其他会话处理程序。您可以将它们保存在 memcache 存储或数据库中，这可以缓解许多基于文件的问题。评估哪种解决方案更适合您的情况。

# regex - 在 shell 脚本中使用正则表达式从字符串中提取 url

> ID：12371846
> 
> 赞同：3
> 
> 时间：2012-09-11T14:19:18.707
> 
> 标签：regex, shell, busybox

我需要提取一个带有`<strong>`标签的 URL。这是一个简单的正则表达式，但我不知道如何在 shell 脚本中做到这一点。这是示例：

```
line="<strong>http://www.example.com/index.php</strong>"
url=$(echo $line | sed -n '/strong>(http:\/\/.+)<\/strong/p') 
```

`$url`我需要变量中的“http://www.example.com/index.php” 。

使用忙箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:29:13.047

这可能有效：

```
url=$(echo $line | sed -r 's/<strong>([^<]+)<\/strong>/\1/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:29:13.920

```
url=$(echo $line | sed -n 's!<strong>\(http://[^<]*\)</strong>!\1!p') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:31:48.083

您不必用反斜杠转义正斜杠。只有反斜杠需要在正则表达式中转义。`?`当 HTML 源代码中存在多个强标签时，您还应该使用与 -operator 一起使用的非贪婪匹配来避免获得更多。

```
strong>(http://.+?)</strong 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T15:12:51.333

更新：由于`busybox`uses `ash`，假设`bash`功能的解决方案可能不起作用。稍微长一点但仍然符合 POSIX 标准的东西可以工作：

```
url=${line#<strong>}  # $line minus the initial "<strong>"
url=${url%</strong>}  # Remove the trailing "</strong>" 
```

* * *

如果您正在使用`bash`（或其他具有类似功能的 shell），您可以将扩展模式匹配与参数替换结合起来。（不知道busybox支持哪些功能。）

```
# Turn on extended pattern support
shopt -s extglob

# ?(\/) matches an optional forward slash; like /? in a regex
# Expand $line, but remove all occurrances of <strong> or </strong>
# from the expansion
url=${line//<?(\/)strong>} 
```

# php - 如何将使用 file_get_contents() 获取的图像附加到电子邮件？

> ID：12371851
> 
> 赞同：0
> 
> 时间：2012-09-11T14:19:27.133
> 
> 标签：php, email

我`file_get_contents()`用来获取我的网页并将其通过电子邮件发送给用户

我以这种方式使用它：

```
$html=file_get_contents($path); 
```

它将网页与图像一起带来，但是当我使用它发送电子邮件时，它不会发送图像。

我的代码如下所示。我`$path`在一开始就定义了它，它完美地工作。

```
$html =file_get_contents($path);
$file = $path; 
$crlf = "\r\n"; 
$hdrs = array( 
          "From"    => "members@********.com", 
          "Subject" => "Nice to meet you" 
          ); 

$mime = new Mail_mime($crlf); 

$mime->setTXTBody($text); 
$mime->addHTMLImage ($file, "images/jpeg"); 
$mime->setHTMLBody($html); 

$body = $mime->get(); 
$hdrs = $mime->headers($hdrs); 

$mail =& Mail::factory("mail"); 
$mail->send($contact_email, $hdrs, $body); 
```

我收到一封包含文本和 css 的电子邮件，但图像未加载

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:26:57.973

我假设您的 img 链接具有相对路径，例如

img src='image/image.png' 如果是，则将其更改为

img src='http://yoursite/image_location/image.png'

或者可能是您的电子邮件客户端阻止了图像

# sql - 如何根据开始和结束日期从 sql 搜索中获取价值？

> ID：12371857
> 
> 赞同：0
> 
> 时间：2012-09-11T14:19:44.303
> 
> 标签：sql, sql-server

我有一个人事角色表，其中为员工分配了每日角色或具有特定开始和结束日期的角色。经理们要求提供一种人力计划表，其中列出了员工的日常角色以及我如何生成该表

```
private string CreateHTMLTable(Int32 month)
{
    StringBuilder strBuilder = new StringBuilder();
    System.Data.DataTable dtAllStaff = new System.Data.DataTable();
    //get all staff
    PersonelApplication.Classes.PersonelClass PersonnelClass = new PersonelClass();

    dtAllStaff = PersonnelClass.GetAllPersonel();

    //create manpower data table
    System.Data.DataTable dtManPowerDataTable = new System.Data.DataTable();

    //create montlhy dt
    //get number of days in month
    int daysInMonth = DateTime.DaysInMonth(DateTime.Now.Year, month);
    //get first day in month
    DateTime firstDayInMonth = new DateTime(DateTime.Now.Year, month, 1);
    //get last day in month
    DateTime lastDayInMonth = new DateTime();
    lastDayInMonth = firstDayInMonth.AddMonths(1).AddDays(-1);

    //start table
    strBuilder.Append("<table>");

    //create header based on number of days in the month
    //append tr strat
    strBuilder.Append("<tr>");
    //add name header for personnle
    strBuilder.Append("<th>");
    strBuilder.Append("Staff");
    strBuilder.Append("</th>");
    for (int i = 1; i <= lastDayInMonth.Day; i++)
    {
        strBuilder.Append("<th>");
        strBuilder.Append(i.ToString() + "/" + month.ToString());
        strBuilder.Append("</th>");
    }

    //append tr end to header row
    strBuilder.Append("</tr>");
    System.Data.SqlClient.SqlConnection sqlConn = new System.Data.SqlClient.SqlConnection();

    sqlConn.ConnectionString = ConnectionClass.CreateConnection.getConnectionString();
    using (sqlConn = ConnectionClass.CreateConnection.publicGetConn())
    {
        sqlConn.ConnectionString = ConnectionClass.CreateConnection.getConnectionString();
        try
        {
            sqlConn.Open();
            if (sqlConn.State == ConnectionState.Open)
            {

                foreach (DataRow row in dtAllStaff.Rows)
                {
                    string personnelName = "";
                    string personnelCode = "";

                    Int32 personnelID = 0; ;

                    personnelCode = row[1].ToString();
                    strBuilder.Append("<tr>");
                    strBuilder.Append("<td>");

                    strBuilder.Append(personnelCode);
                    strBuilder.Append("</td>");
                    for (int i = 1; i <= lastDayInMonth.Day; i++)
                    {
                        //here get the each employee's planned role as well
                        //as actual role 
                    }
                    strBuilder.Append("</tr>");
                }

            }
        }
        catch (Exception ex)
        {
            //pouplate later
        }
        finally
        {

        }

    }

    //end table
    strBuilder.Append("</table>");

    return strBuilder.ToString();
} 
```

我的问题是 SQL 函数，它将返回特定日期的员工角色。

```
--actual end date for this role is '08-18-2012'
declare @sdate date
set @sdate= '08-14-2012'
SELECT 
    CONVERT(date,startdate,101)
    ,CONVERT(date,EndDate,101)
    ,StartDate
    ,EndDate
     ,fk_PersonelID
     ,fk_RoleID
  FROM [dbo].JobRolesTable
  where @sdate between StartDate and EndDate 
    and fk_PersonelID = 40 
```

但是如果我搜索第二天是“08-15-2012”，我会得到 nada 基本上我想在一个月中的任何一天返回员工的角色，如果没有我不想要的则返回“na”为此使用光标，但有另一种方法可以实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:25:13.547

```
DECLARE @sdate DATE = '20120814';

SELECT 
    CONVERT(DATE,StartDate,101) -- what is the purpose of 101 here?
    ,CONVERT(DATE,EndDate,101)  -- what is the purpose of 101 here?
    ,StartDate
    ,EndDate
     ,fk_PersonelID
     ,fk_RoleID
  FROM [dbo].JobRolesTable
  WHERE @sdate >= StartDate 
    AND @sdate < DATEADD(DAY, 1, EndDate) 
    AND fk_PersonelID = 40; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:26:42.747

您可能错误地填充了参数。

如果您的查询是形式

```
SELECT * 
FROM Table
WHERE (@SearchDate BETWEEN @StartDate AND @EndDate) AND Id=@Id 
```

（你的似乎是），那么只要正确指定了日期，它就会从数据库返回正确的值。

您能否显示您实际尝试使用您在发布的代码中打开的 SqlConnection 的代码？

# java - 将数组列表转换为单个字符串

> ID：12371859
> 
> 赞同：0
> 
> 时间：2012-09-11T14:19:48.440
> 
> 标签：java, arrays, string, list, compilation

我正在为我在 atm 做的一项任务编写一段代码，但我完全被 1 点困住了。

我需要将数组列表的内容转换为字符串或字符串的形式，以便将其输入 toString() 以便将其打印到屏幕上。

```
public String toString(){
    String full;
    full = (this.name + this.address + "\n" + "Student Number = " + this.studentId);
    for (int i = 0; i < cs.size(); i++) {
        full.append(cs[i]);
    return full; 
```

上面的代码是我尝试将 3 个变量和数组列表的内容组合成具有格式的单个字符串的地方。

不幸的是，它会产生一个错误“表达式的类型必须是数组类型，但它解析为 ArrayList”

谢谢你的帮助。

杰克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:21:05.383

cs 是数组列表，所以你必须做 get 操作，而不是 [] （这是用于数组访问）

它应该是这样的：

```
full.append(cs.get(i)); 
```

不是

```
full.append(cs[i]); 
```

编辑：正如 assylis 所说，`full`不应该`StringBuilder`只是`String`，因为 String 不支持`append()`方法。

`StringBuilder full = new StringBuilder()`;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:22:14.683

您正在尝试访问一个`ArrayList`，就好像它是一个原始数组（使用索引周围的方括号）。尝试改用该`get(int index)`方法。

IE，

```
cs.get(i); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:26:12.130

[Apache Commons StringUtils](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html)有不同种类的[join()](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/StringUtils.html#join%28java.lang.Object%5B%5D,%20char%29)方法，这意味着您不必自己编写。您可以指定分隔符，甚至可以指定前缀/后缀。

我建议你看看 Apache Commons，不仅仅是为了这个，还有很多其他有用的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:49:38.197

请注意，因为您没有在每个元素之间放置任何分隔符，所以`ArrayList`它可能不可读。考虑使用 Guava 的[Joiner](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Joiner.html)类。

所以而不是

```
 for (...)
   s.append(y); 
```

如果会

```
 a.append(Joiner.on(" ").join(yourList)); 
```

Joiner 也比 for 循环更有效，因为它在`StringBuilder`内部使用 a。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:32:32.097

只需使用“cs.get(i)”代替“cs[i]”。因为 cs 是一个 ArrayList 而不是一个数组。

并且还使用 full = full + cs.get(i); 而不是 full.append(cs.get(i));

作为字符串类型没有附加方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T14:23:52.823

你不能索引一个`ArrayList`类似的数组，你需要这个`get(index)`方法。更好的是，使用增强的`for`循环，因为不建议对列表进行索引，因为实现可能会更改为`LinkedList`.

我还建议使用 a`StringBuilder`来提高效率：

```
public String toString() {
    StringBuilder full = new StringBuilder();
    full.append(this.name);
    full.append(this.address);
    full.append("\n");
    full.append("Student Number = ");
    full.append(this.studentId);
    for (String s: cs)
        full.append(s);
    return full.toString();
} 
```

# lucene - 使用 lucene 时确保目录处于打开状态

> ID：12371867
> 
> 赞同：0
> 
> 时间：2012-09-11T14:20:39.197
> 
> 标签：lucene

我正在尝试搜索我创建的索引：

```
 File index = new File("C:/MyIndex");
    Directory indexDir = FSDirectory.open(index);
    StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_36, analyzer);
    IndexWriter writer = new IndexWriter(indexDir, config); 

    Document doc = new Document();
    doc.add(new Field("My Data", Integer.toString(Id) , Field.Store.YES, Field.Index.NO));

indexDir.close(); 
```

使用 Luke（lucene 索引查看器）我可以验证索引是否存在并且我输入的数据是正确的。我的问题是如何检查索引是否打开（目前对该索引的任何搜索都没有匹配）：

```
 File indexDir = new File("C:/CustomerInnovation");
    Directory directory = FSDirectory.open(indexDir);
    IndexReader reader = IndexReader.open(directory);
    IndexSearcher searcher = new IndexSearcher(reader);
    Analyzer analyzer = new StandardAnalyzer(Version.LUCENE_36);
    QueryParser parser = new QueryParser(Version.LUCENE_36, " ", new StandardAnalyzer(Version.LUCENE_36));
    Query query = parser.parse(searchQuery);
    log.debug("searchQuery: " + searchQuery);
    log.debug("query: " + query.toString());
    int hits = 100;
    int hitsPerPage = 10;
    TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
    searcher.search(query, collector);
    int returned = collector.topDocs().totalHits;
    log.debug("returned: " + returned);

    ScoreDoc[] numHits = collector.topDocs().scoreDocs;
    List<Document> results = new ArrayList<Document>();

    for (int i = 0; i < numHits.length; i++) {
        int docId = numHits[i].doc;
        Document d = searcher.doc(docId);
        results.add(d);
        log.debug(d.get("customername"));
    }

    log.debug("Found: " + numHits.length); 
```

如何检查索引是否已打开并准备好进行搜索？我应该提到，这些代码位在不同的类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-08T11:40:06.277

要检查指定目录中是否存在索引，请使用 indexExists 方法。

`IndexReader.indexExists(directory)`

# java - 如何使用 Jython 脚本模拟用户？

> ID：12371880
> 
> 赞同：0
> 
> 时间：2012-09-11T14:21:21.723
> 
> 标签：java, python, jython, grinder

我需要创建一个用户旅程，例如：

用户在主页上 --> 随机点击特定项目 --> 查看该项目停留大约 10 秒 --> 然后再次返回并点击另一个随机项目。

如何使用 jython 生成测试脚本？我正在使用磨床工具

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:32:44.543

沙尚克，

我认为您的问题过于广泛，无法得到详细的答复。如果你问一个更具体的问题，我想你会得到一个更好的答案。

我想说有两种通用方法可以做你想做的事，你可以通过任何一种选择取得成功：

*   直接在 Jython 中编写测试。脚本文档 ( [http://grinder.sourceforge.net/g3/scripts.html](http://grinder.sourceforge.net/g3/scripts.html) ) 和脚本库 ( [http://grinder.sourceforge.net/g3/script-gallery.html](http://grinder.sourceforge.net/g3/script-gallery.html) ) 将对您有所帮助。

*   使用 HTTP 代理，在 Web 浏览器中执行您希望测试执行的操作。( [http://grinder.sourceforge.net/g3/tcpproxy.html](http://grinder.sourceforge.net/g3/tcpproxy.html) ) 代理将捕获您的浏览器操作并将它们转换为 Jython 脚本。发生这种情况后，您需要进行少量额外工作来修改生成的脚本以检测可用项目列表并随机选择一个。

我个人的偏好是从头开始编写 Grinder 脚本。YMMV。

# bash - 使用 bash 从从第 2 个字段开始的行中提取字段以进行查找

> ID：12371881
> 
> 赞同：3
> 
> 时间：2012-09-11T14:21:22.597
> 
> 标签：bash, scripting, awk

我当前的代码：

```
for i  in {0..5}; do
       rate[${i}]="`echo $line| awk -v par=$i '{par=par+2}{print $par}'`"
    done 
```

从第二个开始提取每个字段并将其放入数组中。请告知是否有更优雅的方式来重写它。它不一定需要在 awk 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:34:06.927

用于拆分输入并移位以`set`删除前两个元素：

```
set $line
shift 2
rate=($@) 
```

或`shift`按照 chepner 的建议消除：

```
set $line
rate=("${@:3}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:37:19.823

您可以使用变量替换运算符：

```
linetmp=${line#* } # remove up to the first space
linetmp=${linetmp#* } remove up to the second (now first) space 
```

# c# - 强制刷新 Silverlight 应用程序存储

> ID：12371883
> 
> 赞同：1
> 
> 时间：2012-09-11T14:21:24.797
> 
> 标签：c#, .net, visual-studio-2010, silverlight, caching

我刚刚为数百名客户部署了一个新的 Silverlight 应用程序。然而，许多人报告了同样的问题——应用程序看起来和以前一样——尽管有大量更新。我已经追踪到这是由本地存储的应用程序存储引起的，并告诉我的客户清除它，这不可避免地解决了他们的问题。

如何在以后的版本中解决这个问题？

我已经在 SO 上阅读[了这个](https://stackoverflow.com/questions/1722615/forcing-browsers-to-reload-silverlight-xap-after-an-update)线程，这表明存在类似的问题，但我不相信它是相同的。我已经编辑了我的 index.aspx 文件

```
string strSourceFile = @"ClientBin/MyApp.MyApp.SL.xap?ver=1.2" 
```

而不是

```
string strSourceFile = @"ClientBin/MyApp.MyApp.SL.xap" 
```

据我所知，如果不重新部署，就无法判断此更改是否解决了我的问题——我想避免这种情况！

我如何测试这是否有效/这会解决我的问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T17:10:54.867

事实证明这不是与 XAP 文件相关的问题，而是完全不相关的。这是由于我的 SL 项目中使用了一个插件 - Telerik。我已将序列化标记添加到 xaml 文件中的新 RadPane 元素。这在 Telerik 中没有正确更新，radpanes 保存在隔离存储中。我在这里发布了一个关于这个问题的新问题：[链接](https://stackoverflow.com/questions/12393006/setting-the-panegroup-of-a-radpane-in-the-codebehind)

# python - Ubuntu python-dateutil 安装/升级问题。dateutil.zoneinfo.gettz 返回 NoneType

> ID：12371884
> 
> 赞同：4
> 
> 时间：2012-09-11T14:21:27.480
> 
> 标签：python, linux, ubuntu, ubuntu-11.04

我在使用 python dateutil.zoneinfo 模块时遇到问题。笔记：

*   损坏的 Ubuntu 机器是（Ubuntu 11.04）
*   工作的 Ubuntu 机器是（Ubuntu 11.10）

*损坏的 Ubuntu 机器：*

```
In [1]: from dateutil import zoneinfo`
In [2]: from_zone = zoneinfo.gettz('UTC')
In [3]: from_zone 
```

*从工作的 Ubuntu 机器：*

```
In [1]: from dateutil import zoneinfo
In [2]: from_zone = zoneinfo.gettz('UTC')
In [3]: from_zone
Out[3]: tzfile('Etc/UTC') 
```

一些 Python 内省。

*损坏的 Ubuntu 机器：*

```
In [5]: zoneinfo.ZONEINFOFILE 
```

*从工作的 Ubuntu 机器：*

```
In [4]: zoneinfo.ZONEINFOFILE
Out[4]: '/usr/local/lib/python2.7/dist-packages/python_dateutil-1.5-py2.7.egg/dateutil/zoneinfo/zoneinfo-2010g.tar.gz' 
```

更多信息：损坏的机器，已从 python 2.6 升级到 python 2.7。做一个

```
$ locate zoneinfo
-- snip --
/usr/lib/pymodules/python2.6/dateutil/zoneinfo
/usr/lib/pymodules/python2.6/dateutil/zoneinfo/__init__.py
/usr/lib/pymodules/python2.6/dateutil/zoneinfo/__init__.pyc
/usr/lib/pymodules/python2.7/dateutil/zoneinfo
/usr/lib/pymodules/python2.7/dateutil/zoneinfo/__init__.py
/usr/lib/pymodules/python2.7/dateutil/zoneinfo/__init__.pyc
/usr/local/lib/python2.6/dist-packages/dateutil/zoneinfo
/usr/local/lib/python2.6/dist-packages/dateutil/zoneinfo/__init__.py
/usr/local/lib/python2.6/dist-packages/dateutil/zoneinfo/__init__.pyc
/usr/local/lib/python2.6/dist-packages/dateutil/zoneinfo/zoneinfo-2010g.tar.gz
/usr/local/lib/python2.6/dist-packages/dateutil/zoneinfo/zoneinfo-2011d.tar.gz
/usr/share/zoneinfo
/usr/share/pyshared/dateutil/zoneinfo
-- snip -- 
```

我可以看到这个问题，但我不确定该怎么做。注意：我尝试使用“突触包管理器”重新安装 python-dateutil 无济于事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-05T20:30:50.593

我知道这是 8 个月后，但我遇到了同样的问题。我的解决方案是通过以下方式卸载现有版本：

`sudo pip uninstall python-dateutil`

然后通过重新安装

`sudo easy_install python-dateutil`

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:40:36.600

怎么样

```
from dateutil import tz
from_zone = tz.gettz('UTC')
print(from_zone)
# tzfile('/usr/share/zoneinfo/UTC') 
```

# javascript - 在 javascript 中使用 AND 语句获取错误

> ID：12371887
> 
> 赞同：0
> 
> 时间：2012-09-11T14:21:33.093
> 
> 标签：javascript

您可以在这里理解我的意思[http://jsfiddle.net/ganymedes/eWghm/1/](http://jsfiddle.net/ganymedes/eWghm/1/)请*选择* **1986**然后*选择* **Hello**最后*选择* **test2**。我的意思是当您选择 test2 时，我的脚本将显示“0”文本**，但不会显示。**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script></script>
    <script type="text/javascript">
    var zero="0,00";
    var one="0,01";
    $(document).ready(function() {    
        $('#main').on('change', '.select-box', function() {    
            if ($(".select-box option[value='1']").prop('selected') && $(".select-box option[value='1986']").prop('selected')) {    
                $('#street').html("<option value='2'>test</option><option value='3'>test2</option>");    
            }
            if ($(".select-box option[value='1']").prop('selected') && $(".select-box option[value='1986']").prop('selected') && $(".select-box option[value='3']").prop('selected')) {
                 document.getElementById("demo3").innerHTML=""+zero;
            }    
        });    
      });
</script>    
<script type="text/javascript">    
    var x="",i;
    for(i=1986;i<2013;i++)
    {
        x=x + "<option value='"+i+"'> " + i + "</option>";
    }
    $(document).ready(function() {
        document.getElementById("forloop").innerHTML="<select class='select-box'><option>Empty</option>"+x+"</select>";
    });
</script>  
</head>
<body>  
    <p id="forloop"></p>
        <div id="main">
          <select class="select-box">
             <option>Empty</option>
             <option value="1">Hello</option>    
         </select> 
         <p></p>
         <select class="select-box" id="street">
            <option>Empty<option>
         </select>
      </div>    
    <p id="demo3">    
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:28:21.530

每次您更改任何选择时，都会调用相同的处理程序。第一个条件匹配重置第二个选择的内容。所有这些都应该被重写以更有针对性……但是如果你真的想走这条路，你应该交换 if 语句的顺序，并使第二个语句成为 elseif。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:28:19.470

您的三个选择框具有相同的类，因此当第一个选择框的值为 1 时，您的第二个测试始终为真。使用 id 而不是 classname 来区分您的元素，它将更易于理解（#year、#month、#day）并且更易于维护......

# javascript - parseInt 中的基数是如何工作的？

> ID：12371893
> 
> 赞同：0
> 
> 时间：2012-09-11T14:21:55.997
> 
> 标签：javascript

我想知道基数计算在 parseInt 中是如何工作的。

我想建立一个自己的公式/函数来做与 parseInt 完全相同的事情，这样我就可以把它放到另一种编程语言中，或者告诉我数学课上的学生，这样他们就可以学习它（并不是说我永远不会这样做） .

我只是想知道它是如何工作的。

我整理了一个小小提琴：http: [//jsfiddle.net/Cy6Bx/](http://jsfiddle.net/Cy6Bx/)

**编辑**只是自己弄清楚这是结果：[https ://tinker.io/3ca4c](https://tinker.io/3ca4c)

它没有 parseInt 所具有的所有验证，但它提供了基本的东西来了解发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:26:11.480

> “我想知道基数计算在 parseInt 中是如何工作的。”

事实上，这不是火箭科学，最简单的`parseInt`实现（与语言无关）将迭代字符串（以相反的顺序）并将`radix`因子乘以字符数值（'0' -> 0, '1' -> 1 , ..., 'A' -> 10, ..., 'F' -> 15) 在每次迭代中提高基数

就像是：

```
value = 0
base = 1
for every character c in numeric_string (iterate in backwards) 
   var d = digitValueOf(c)
   value = value + d * base
   base = base * radix
end for 
```

# c# - MVC 3 C# - 部署和 MYSQL 数据库

> ID：12371899
> 
> 赞同：0
> 
> 时间：2012-09-11T14:22:16.553
> 
> 标签：c#, asp.net, mysql, asp.net-mvc-3, visual-studio-2010

Visual Studio 2010 - C# - MVC3

我对 ASP.Net 完全陌生，我一直在工作/练习使用 C# 制作 MVC 3 应用程序。我已经练习过在线获取 MVC 应用程序，它不使用数据库并且成功。我的主机支持 .net 4，这是一个发布文件并上传到我的 FTP 的简单过程。我正在制作一个使用数据库的新应用程序。我已经在服务器资源管理器中建立了一个数据连接并设置了我所有的表和关系。目前一切都按预期工作，我可以从数据库中创建、编辑和删除条目。

我不确定从哪里开始在线获取此信息。我的主机没有提供 MSSQL 数据库，所以我假设我可以使用 MYSQL 数据库？更改我的应用程序以使用位于我的远程主机上的 MYSQL 数据库的过程是什么？另外我正在使用用户可以注册和登录的默认帐户，我是否也必须为此设置一个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:31:08.503

您的主机提供 mysql 托管？您将需要 mysql .net 连接器。

还要检查下一个 asp.net 成员资格，mvc 使用

[http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html](http://dev.mysql.com/doc/refman/5.1/en/connector-net-tutorials-asp-roles.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:24:50.657

您可以在 APP_DATA 文件夹中使用本地数据库，也可以连接到远程数据库。如果您在这两个领域中的任何一个方面需要额外帮助，或者我误解了您的问题，请告诉我。您可能还想加密您的 web.config 文件以更好地保护您的数据库密码。

从我们的聊天中：

试试这个 stackoverflow.com/questions/…</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:12:22.753

SQL CE 支持二进制部署，这意味着您的托管不需要安装任何东西并且您可以获得 SQL 支持，但是没有存储过程支持（如果这对您很重要）此外，您可以将 SQL Compact Toolbox 安装到 Visual Studio [http： //sqlcetoolbox.codeplex.com/](http://sqlcetoolbox.codeplex.com/)

请参阅：http: [//blogs.msdn.com/b/webdev/archive/2011/01/06/how-to-bin-deploy-sql-compact-edition-4-0-and-razor-web-projects。 aspx](http://blogs.msdn.com/b/webdev/archive/2011/01/06/how-to-bin-deploy-sql-compact-edition-4-0-and-razor-web-projects.aspx)

# ios - Xcode - 如果我为我的图像文件创建了一个组并且它们不在项目的基础上，可以吗？

> ID：12371902
> 
> 赞同：0
> 
> 时间：2012-09-11T14:22:27.230
> 
> 标签：ios, xcode, ios5

我正在阅读此处的说明，以了解将应用程序提交到应用商店的正确文件设置：http: [//developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources .html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)

里面有这样一句话：“像所有其他图标文件一样，iTunesArtwork 图像文件必须位于应用程序包的顶层。”

但为了组织起见，我做了一个组，并将所有图像文件放在 root/src/img 组中。那样可以么？还是我应该专门将所有图像文件移动到根目录或项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:25:42.730

你在做什么是好的。当您将资源放入一个组时，Xcode 会在构建应用程序时将它们全部复制到应用程序的根目录中。

# php - 一行总和

> ID：12371903
> 
> 赞同：0
> 
> 时间：2012-09-11T14:22:31.160
> 
> 标签：php, mysql

我有这个查询，它为我提供了一个用户的交易，输出是一个包含信息的表。有一个名为`basket_value`包含一些数字的行，我需要得到这些数字的总和。请你帮助我好吗？

```
$query3 = 'SELECT users.first_name,users.last_name,users.phone,
           retailer.date, SUM(retailer.basket_value), 
           retailer.time,retailer.location,retailer.type_of_payment
           FROM users ,retailer 
           WHERE users.user_id="'.$id_user.'"
           AND users.user_id=retailer.user_id GROUP BY users.user_id';

$result3 = mysql_query($query) or die(mysql_error());

// Print out result
while($row = mysql_fetch_array($result3)) {
    echo "Total ". $row['user_id']. " = $". $row['SUM(basket_value)'];
    echo "<br />";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:25:18.030

您`GROUP BY`的查询中缺少一个。您很可能想要添加`GROUP BY users.user_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:28:16.943

您可以省略选择列表中的所有其他列，并且只在集合上运行 sum() 聚合以避免该`GROUP BY`子句。

```
$query3 = 'SELECT SUM(retailer.basket_value) as total_sum
FROM users ,retailer WHERE users.user_id="'.$id_user.'"
AND users.user_id=retailer.user_id'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T14:29:37.710

我想你的查询也有一些问题，假设你有一个`id`检索用户，我会这样做

```
$query3 = 'SELECT users.user_id,users.first_name,users.last_name,
                  users.phone, retailer.date, 
                  SUM(retailer.basket_value) as total_sum,
                  retailer.time,retailer.location,retailer.type_of_payment
           FROM users ,retailer WHERE users.user_id="'.$id_user.'"
           AND users.user_id=retailer.user_id
           GROUP BY users.user_id,users.first_name,users.last_name,
                    users.phone, retailer.date,retailer.time,retailer.location,
                    retailer.type_of_payment '

$result = $mysqli->query($query3); 
```

现在，如果您想要每个用户的总和：

```
while ($row = $result->fetch_row()) {
        echo "Player: ".$row['user_id']." total: ".$row['total_sum'];
    } 
```

如果你想要整个**全球**总和，你必须这样做：

*   以这种方式修改您的查询：

    ```
    SELECT SUM(retailer.basket_value) as total_sum                 
    FROM retailer 
    ```

*   总结成`while`循环，如：`$total += $row['total_sum'];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:30:21.097

试试这个查询：

```
SELECT u.first_name, u.last_name, u.phone, SUM(r.basket_value) as total_sum
FROM users u
JOIN retailers r
  ON u.user_id = r.user_id
WHERE u.user_id="'.$id_user.'"
GROUP BY u.user_id 
```

# php - 将表单提交到页面并根据输入显示不同的 div

> ID：12371914
> 
> 赞同：0
> 
> 时间：2012-09-11T14:23:17.383
> 
> 标签：php, javascript, jquery, forms

我有一个表单，提交时需要转到页面，然后根据页面显示 4 个隐藏的 div 之一。

这是表格

```
<form>
<input id="place" name="place" type="text">
<input name="datepicker" type="text" id="datepicker">
<input type="submit" name="submit" id="submit" />
</form> 
```

这是页面

```
<div id="brighton">
<p>Brighton</p>
</div>

<div id="devon">
<p>Devon</p>
</div>

<div id="search">
<p>search</p>
</div>

<div id="variety">
<p>variety</p>
</div> 
```

因此，如果在位置输入中输入了 Brighton，我需要提交页面并显示 Brighton div 的表单，如果输入 Devon 以显示 Devon div 等，并且如果在日期选择器输入中输入 2/12/2012 和进入布莱顿的地方输入它会进入页面并显示各种div。

我也需要它，所以如果在日期选择器输入中输入 1/12/2012，页面将重定向到**页面 show.html**。

任何帮助将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:53:05.713

如果您完全了解 PHP，这很容易。看起来你需要一个好的、简单的开始。然后您将能够在几秒钟内实现这一目标。

请参阅[W3SCHOOLS PHP 教程](http://www.w3schools.com/php/php_forms.asp)。

要实现您所提到的，首先在您的表单中进行以下更改：

```
<form action="submit.php" method="post">
<input id="place" name="place" type="text">
<input name="datepicker" type="text" id="datepicker">
<input type="submit" name="submit" id="submit" />
</form> 
```

创建一个名为**submit.php**的新文件并添加以下代码：

```
<?php
$place = $_POST['place'];
$date = $_POST['datepicker'];

if ($date == '1/12/2012') {
  header('Location: show.html');
  exit;
}
?>

<?php if ($place == 'Brighton''): ?>
<div id="brighton">
<p>Brighton</p>
</div>

<?php elseif ($place == 'Devon'): ?>
<div id="devon">
<p>Devon</p>
</div>

<?php elseif ($place == 'search'): ?>
<div id="search">
<p>search</p>
</div>

<?php elseif ($place == 'Variety'): ?>
<div id="variety">
<p>variety</p>
</div>
<?php endif; ?> 
```

现在，上面的示例不是完整的解决方案，但它让您了解如何`if-then-else`在 PHP 中使用构造来比较值并按照需要执行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:00:04.840

将表单发布到 php 页面，然后检查发布的表单参数以确定要显示的 div。

```
<?php 
   if ($_POST["place"] == "Brighton") {
?>
    <div id="brighton">
    <p>Brighton</p>
    </div>

<?php 
  } else if ($_POST["place"] == "Devon") {
?>
    <div id="devon">
    <p>Devon</p>
    </div>

<?php 
  }
?> 
```

对每个 div 和参数组合执行此操作。确保将表单上的“方法”属性设置为“发布”：

```
<form action="somepage.php" method="post">...</form> 
```

在生成的 HTML 中，您只会看到与表单参数匹配的那个。

# switch-statement - 在VHDL中的Case语句中更改控制变量

> ID：12371915
> 
> 赞同：0
> 
> 时间：2012-09-11T14:23:24.463
> 
> 标签：switch-statement, vhdl

```
 case task is

       when 1 => task <= 2;

       when 2 => task <= 3; 

       when other =>...

    end case 
```

我尝试更改 case 内的 switch 变量，但它不会影响 case 子句传递后的值。正确的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:00:49.680

由于您使用信号分配`<=`，我假设这`task`是一个信号，而不是一个变量。任务的新值将在下一个模拟周期（增量周期）中可用。这通常意味着新值将在再次执行该过程时可见，或者在“等待”语句之后（但如果您要合成代码，您可能不需要等待语句）。

作为替代方案，您可以使用*变量*for `task`，并使用变量赋值运算符：`task := 2;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:52:03.630

使用变量，而不是信号 - 这将更新您期望的方式。

信号对于多个进程之间的通信很有用，因为它们的[更新是可控的](http://www.sigasi.com/content/vhdls-crown-jewel)。普通变量不是并且因此仅限于进程范围，因此不能无意中用于进程间通信，这将容易出错。

# android - 自定义视图类的代码结构

> ID：12371919
> 
> 赞同：0
> 
> 时间：2012-09-11T14:23:33.250
> 
> 标签：android, android-activity, android-view

我提前道歉，这是一个有点模糊的话题/问题。

假设我正在为一个常见的棋盘游戏编写活动类。这个类可以命名为 Game.java（一般来说）并扩展 Activity 并维护一些按钮和文本视图以及（更重要的是）一个名为 Board.java 的自定义 View 类（或静态嵌套类），它扩展了 SurfaceView。

现在，所有的绘图基本上都需要在 SurfaceView 类中完成，因为这是 Android 应用程序的本质。出现的问题是，如果这个棋盘游戏的部分（例如英雄和怪物）存储在相关列表中，最佳实践规定这些列表存储在哪里？也就是说，人们会认为这些列表应该由 Game 类维护，因为从技术上讲，这是对正在进行的游戏的更全面的视图。但是，在这种情况下，静态嵌套类（或单独的顶级类）Board 无法访问这些列表，因此出于绘图目的，如果不同时在两个类中维护它，它不知道每块的状态是什么，非常麻烦。在 Board 中维护此列表几乎同样繁琐，

关于如何干净利落地实施的任何总体共识或意见？我个人的想法倾向于在 Board 中维护它，出于记忆和理智的目的，最重要的是，但如果有明显缺失的东西，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:33:54.030

我已经对此进行了一些实验，并且当我的自定义`SurfaceView`类包含`Thread`. 除了处理所有物理和绘图之外，该线程还具有表示绘制对象的内部类，并为我的画布上的所有可见项目维护这些对象的列表。

谷歌在下载 SDK 时包含了一些示例，其中有一些处理在画布上绘图。我发现 LunarLander 示例是如何实现此行为的一个很好的起点。使用 SDK 管理器下载示例后，您可以在`android-sdk/samples`. 希望这可以帮助。

# c# - 如何在 Microsoft.CppBuild.targets 中抑制“命名空间 X 中的元素 X 具有无效的子元素 ...”类型的警告

> ID：12371921
> 
> 赞同：1
> 
> 时间：2012-09-11T14:23:41.690
> 
> 标签：c#, visual-studio-2010, .net-4.0

我有一个非常大的 C# 项目，有超过 100 个警告，全部由文件触发：

```
Microsoft.CppBuild.targets 
```

有没有办法抑制这些类型的警告：

```
The element 'ResourceCompile' in namespace 
'http://schemas.microsoft.com/developer/msbuild/2003' has invalid child element 
'MinimalRebuildFromTracking' in namespace 
'http://schemas.microsoft.com/developer/msbuild/2003'. List of possible elements
expected: 'Culture, PreprocessorDefinitions, UndefinePreprocessorDefinitions,
AdditionalIncludeDirectories, IgnoreStandardIncludePath, ShowProgress,
NullTerminateStrings, SuppressStartupBanner, ResourceOutputFileName' in namespace
'http://schemas.microsoft.com/developer/msbuild/2003'.  C:\Program Files
(x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets 172 10
Miscellaneous Files 
```

其他警告以：

```
The Element 'Midl' ...
The Element 'PropertyGroup' ...
The Element 'Manifest' ...
The Element 'Link' ...
The Element 'ItemGroup' ...
The Element 'ClCompile' ... 
```

## 环境

*   视觉工作室 2010 SP1
*   锐化器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:34:35.940

解决方案是关闭文件“Microsoft.CppBuild.targets”。

# javascript - 构建 chrome 扩展来推文

> ID：12371922
> 
> 赞同：3
> 
> 时间：2012-09-11T13:13:48.787
> 
> 标签：javascript, google-chrome, twitter

我正在尝试构建一个简单的 chrome 扩展，它由一个图标组成，单击该图标会弹出官方 Twitter 窗口（如此[处](https://dev.twitter.com/docs/intents)）。大多数这样做的扩展的问题是窗口在之后仍然打开。但是，如果您包含Twitter 提供的[这个脚本](http://platform.twitter.com/widgets.js)，他们会在几秒钟后关闭窗口，这就是我想要做的，所以我试图注入该代码，然后执行 URL。（请记住，我的 javascript 和 chrome 扩展知识都非常有限）。

这就是我到目前为止所拥有的。

```
function onClicked(tab) {
        var twitterWidgets = document.createElement("script");
        twitterWidgets.type = "text/javascript";
        twitterWidgets.src = "https://platform.twitter.com/widgets.js";
        var head = document.getElementsByTagName("head")[0];
        head.appendChild(twitterWidgets);

        var urlToTweet = "https://twitter.com/intent/tweet?"
    + "text=" + encodeURIComponent(tab.title)
    + "&url=" + encodeURIComponent(tab.url);

        //window.open(urlToTweet);
}

chrome.browserAction.onClicked.addListener(onClicked); 
```

*window.open*不好，因为它会打开一个新标签。*window.location*和变体也不是，它们似乎根本不起作用。我意识到我可能必须向twitterWidgets.src*或类似的东西添加一些**chrome.extension.getURL*，但在这一点上，我越是弄乱脚本，我就越感到困惑。

 *非常感谢您在正确方向上的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-24T17:11:09.530

我真的不知道您要做什么，但是如果您像这样使用 window.open ，它将在同一页面中打开。

```
window.open("http://www.insertUrlHere.com","_self") 
```

希望这会有所帮助并且足够简单*

# c# - 如何使用 SQL 在列表中“全部显示”

> ID：12371925
> 
> 赞同：0
> 
> 时间：2012-09-11T14:23:52.830
> 
> 标签：c#, sql

我有一个从数据库中提取类别的下拉列表。当用户选择一个类别时，转发器只显示那些记录，这是正确的功能。我的问题是如何使第一个选项（--按类别过滤--），它不是数据库中的类别，只需返回所有记录。这是页面背后的代码：

```
protected void PopulateCategories()
{
    category myCategory = new category();
    category[] myCategoryList = myCategory.Listing("title ASC");

    ddlCategories.Items.Add("-- Filter by category --");

    foreach (category category in myCategoryList)
    {
        ListItem item = new ListItem(category.title, category.category_id);
        ddlCategories.Items.Add(item);
    }
}

protected void ListVideos(string inCategoryID)
{
    videoList = new List<video>();
    video v = new video();

    videoList.AddRange(v.ListingByCategory(inCategoryID));
    repeater.DataSource = videoList;
    repeater.DataBind();
}

protected void ddlCategories_SelectedIndexChanged(object sender, EventArgs e)
{
    ListVideos(ddlCategories.SelectedValue);        
} 
```

这是清单的类文件：

```
#region ListingByCategory()
// ****************************
public video[] ListingByCategory(string inCategoryID)
{
    SqlConnection dbconn = BaseClass.ReturnDbConn();

    List<video> listArray = new List<video>();

    try
    {
        dbconn.Open();

        this.SB.Remove(0, this.SB.Length);
        this.SB.Append("SELECT DISTINCT v.*, c.display_name ");
        this.SB.Append("FROM video v ");
        this.SB.Append("INNER JOIN contributor c ON c.contributor_id = v.contributor_id ");
        this.SB.Append("INNER JOIN video_category vc ON vc.video_id = v.video_id ");

        if (!String.IsNullOrEmpty(inCategoryID))
        {
            this.SB.Append("WHERE vc.category_id = " + SQLUtility.SQLPrep(inCategoryID) + " ");
        }

        this.SB.Append("ORDER BY v.video_id ASC");
        this.SQL = this.SB.ToString(); 
```

这只是其中的一部分，我知道不是所有的花括号都在那里，但我不想让整个文件过载。

如果我需要提供额外的代码，请告诉我。这是在 C# 中。我不认为这是一个困难的解决方案，只是一个我现在正在逃避的解决方案。提前致谢。

# symfony - symfony 2中的查找路线

> ID：12371927
> 
> 赞同：13
> 
> 时间：2012-09-11T14:23:59.620
> 
> 标签：symfony, routing

我在我的应用路由文件中定义了一个路由：

```
RouteName:
    pattern:  /some/route
    defaults: { _controller: MyAppBundle:Controller:action } 
```

在控制器中，我可以使用：

```
$this->get('router')->generate('RouteName'); 
```

我将如何简单地从我创建的新类中访问它，例如不扩展任何内容的视图类：

```
namespace My\AppBundle\View;

class ViewClass {
    public function uri()
    {
        return getTheRoute('RouteName');
    }
} 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-11T14:27:41.280

您需要将“路由器”服务注入您的 ViewClass。例如。在您定义 ViewClass 服务的地方：

```
viewclass.service:
    class: Namespace\For\ViewClass
    arguments:
       router: "@router" 
```

然后在你的构造函数中：

```
public function __construct(\Symfony\Bundle\FrameworkBundle\Routing\Router $router)
{
    $this->router = $router;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:28:49.943

线索在于该`$this->generateUrl()`方法在控制器中的工作方式。看：

```
/**
 * Generates a URL from the given parameters.
 *
 * @param string  $route      The name of the route
 * @param mixed   $parameters An array of parameters
 * @param Boolean $absolute   Whether to generate an absolute URL
 *
 * @return string The generated URL
 */
public function generateUrl($route, $parameters = array(), $absolute = false)
{
    return $this->container->get('router')->generate($route, $parameters, $absolute);
} 
```

因此，您需要将您的类定义为服务并注入@router 服务。或者让你的类实现 ContainerAwareInterface，但第一种方法肯定会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:29:29.080

您应该将您的类注册为服务并将路由器作为依赖项插入。

请参阅优秀的 symfony2 文档中[关于服务容器的章节。](http://symfony.com/doc/current/book/service_container.html)

如果您不熟悉服务容器和依赖注入的概念，您可能会感到有些不知所措。但是，请尽量理解它，因为它是 symfony2 架构的重要组成部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T16:00:07.233

您可以在实例化时将整个容器从您的控制器传递给您的视图类。这**不是最佳**做法，也不推荐。

```
class View
{
  protected $container;

  public function __construct(\Symfony\Component\DependencyInjection\Container $container)
  {
    $this->container = $container;
  }
} 
```

然后在你的代码中你可以使用

```
$this->container->get('router')->generate($route, $parameters, $absolute); 
```

# ruby - Ruby Watir：选择特定行

> ID：12371930
> 
> 赞同：1
> 
> 时间：2012-09-11T14:24:02.313
> 
> 标签：ruby, row, watir

考虑以下 html [http://www.carbide-red.com/prog/test_table.html](http://www.carbide-red.com/prog/test_table.html)

我已经确定我可以使用在列上从左到右移动

```
browser.td(:text => "Equipment").parent.td(:index => "2").flash 
```

在包含“设备”的行上闪烁第 3 列

但是我怎样才能向下移动一定数量的行呢？我在使用 .tr 和 .rows 时运气不佳，无论我如何尝试，在使用它们时它都会崩溃。甚至像这样简单的事情

```
browser.tr(:text => "Equipment").flash 
```

我只是误解了 tr/row 的工作原理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T15:10:14.370

**特定行/列**

听起来您已经计算出您想要的行/列。您只需执行以下操作即可获取特定行/列索引处的单元格：

```
browser.table[row_index][column_index] 
```

其中`row_index`和`column_index`是您想要的行和列的整数（请注意，它是从零开始的索引）。

**特定行**

您还可以执行以下操作以根据索引选择行：

```
browser.table.tr(:index, 1).flash 
browser.table.row(:index, 2).flash 
```

请注意，`.tr`包括嵌套表，而`.row`忽略嵌套表。

**更新 - 在特定行之后查找行**

要在包含特定文本的特定行之后查找行，请先确定特定行的索引。然后，您可以找到与其相关的其他行。这里有些例子：

```
#Get the 3rd row down from the row containing the text 'Equipment'
starting_row_index = browser.table.rows.to_a.index{ |row| row.text =~ /Equipment/ }
offset = 3
row = browser.table.row(:index, starting_row_index + offset)
puts row.text
# => CAT03 ...

#Get the 3rd row down from the row containing a cell with yellow background colour
starting_row_index = browser.table.rows.to_a.index{ |row| row.td(:css => "td[bgcolor=yellow]").present? }
offset = 3
row = browser.table.row(:index, starting_row_index + offset)
puts row.text
# => ETS36401 ...

#Output the first column text of each row after the row containing a cell with yellow background colour
starting_row_index = browser.table.rows.to_a.index{ |row| row.td(:css => "td[bgcolor=yellow]").present? }
(starting_row_index + 1).upto(browser.table.rows.length - 1){ |x| puts browser.table[x][0].text }
# => CAT03, CAT08, ..., INTEGRA10, INTEGRA11 
```

让我知道这是否有帮助，或者您是否有想要的特定示例。

# jquery - 无法在此处获取 jquery 切换 - 需要逻辑帮助

> ID：12371942
> 
> 赞同：0
> 
> 时间：2012-09-11T14:24:34.920
> 
> 标签：jquery

关键是切换一些字段集，但根据场景，您可能有一个或两个处于活动状态的字段集。这应该适用于两种情况。

[http://jsfiddle.net/4XQ2u/18/](http://jsfiddle.net/4XQ2u/18/)

这仅在我们出现**一个**字段集时才有效。

如果您复制字段集并再次对其进行测试，您会注意到，如果我们有**两个**字段集，触发的链接也应该发生变化，但它们不会，这使得链接文本变得荒谬。

[http://jsfiddle.net/4XQ2u/40/](http://jsfiddle.net/4XQ2u/40/)

我是否使用了错误的工具来完成这项工作，还是这段代码的逻辑问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:48:13.607

该代码正在侦听某人在执行任何操作之前单击该按钮。最简单的解决方案是在代码底部添加一条 if 语句：

```
if($('#localized fieldset').length > 1)
{
  $(".trigger").toggle();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:46:32.527

你的意思是这样的吗？

[http://jsfiddle.net/4XQ2u/44/](http://jsfiddle.net/4XQ2u/44/)

# r - 按因素或字符汇总？

> ID：12371947
> 
> 赞同：3
> 
> 时间：2012-09-11T14:24:43.773
> 
> 标签：r, aggregate

如果您的唯一列 ID 是字符，您如何使用聚合？

```
aggregate(data, list(data$colID), sum)
Error in Summary.factor(c(1L, 1L), na.rm = FALSE) : 
  sum not meaningful for factors 
```

换个性格..

```
data$colID<-as.character(data$colID)

aggregate(data, list(data$colID), sum)
Error in FUN(X[[1L]], ...) : invalid 'type' (character) of argument

ddply I get a similar error.  
Error in FUN(X[[1L]], ...) : 
  only defined on a data frame with all numeric variables 
```

我只想按 colID 聚合，我不想总结它。我希望所有其他列求和。

```
dput(data)
structure(list(colID = structure(c(1L, 1L, 1L, 2L, 2L), .Label = c("a", 
"b"), class = "factor"), col1 = c(1, 0, 0, 0, 2), col2 = c(0, 
1, 0, 2, 0), col3 = c(0, 0, 1, 0, 0), col4 = c(5, 5, 5, 7, 7)), .Names = c("colID", 
"col1", "col2", "col3", "col4"), row.names = c(NA, -5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T14:28:05.273

这应该工作

```
aggregate(x = DF[, -1], by = list(DF$colID), FUN = "sum") 
```

DF 是你的 data.frame

`ddply`从`plyr`包中使用

```
ddply(DF, .(colID), numcolwise(sum))

   colID col1 col2 col3 col4
1     a    1    1    1   15
2     b    2    2    0   14 
```

使用`acast`或`dcast` 从`reshape2`包中使用

```
acast( melt(DF), variable ~ colID, sum)  # a matrix
dcast( melt(DF), variable ~ colID, sum)  # a data.frame

Using colID as id variables
      a  b
col1  1  2
col2  1  2
col3  1  0
col4 15 14 
```

**编辑** 使用`ddply`. 不是那么优雅，但它的工作原理！

```
 Sums <- ddply(DF[, -5], .(colID), numcolwise(sum))
 Mean <- ddply(DF[, c(1,5)], .(colID), numcolwise(mean))[,-1]
 cbind(Sums, col4_mean=Mean)
  colID col1 col2 col3 col4_mean
1     a    1    1    1         5
2     b    2    2    0         7 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T02:36:48.057

这是一个`data.table`解决方案。by 列是因子还是字符都没有关系。

```
library(data.table)
DT <- as.data.table(data)
# Calculates the sum of columns col1, ..., col3
# and mean of col4
merge(DT[, lapply(.SD, sum),by = colID, .SDcols =paste0('col', 1:3)], 
      DT[, lapply(.SD, mean),by = colID, .SDcols ='col4'], 
  by = 'colID') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:31:07.097

```
library(reshape2)
melted_data <- melt(df, id.vars = "colID")
dcast(melted_data, colID ~ variable, sum) 
```

# drupal - 在 Drupal 中以编程方式启用多语言支持

> ID：12371953
> 
> 赞同：1
> 
> 时间：2012-09-11T14:25:03.510
> 
> 标签：drupal, internationalization

我正在构建一个创建内容类型的模块（[http://yaremchuk.ru/blog/how-create-content-type-drupal-7-programmatically](http://yaremchuk.ru/blog/how-create-content-type-drupal-7-programmatically)）。我想通过 i18n 以编程方式启用多语言支持，但我不知道怎么做？

这与手动转到发布选项 -> 多语言支持 -> “启用，带翻译”相同，但必须在模块安装中完成。

你有想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T08:54:33.537

这是我找到的解决方案：

在 hook_install ：

```
variable_set('language_content_type_<bundle_name>',TRANSLATION_ENABLED); 
```

并在 hook_uninstall ：

```
variable_del('language_content_type_<bundle_name>'); 
```

文档中没有这方面的痕迹。感谢非常好的文档 drupal ！;)

希望我花在这上面的时间能帮助别人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T15:13:00.430

对我来说`TRANSLATION_ENABLED`，虽然没有工作`1`：

```
variable_set('language_content_type_<bundle_name>', 1); 
```

# iphone - 如何在mac（iPhone）中找到设备路径？

> ID：12371964
> 
> 赞同：1
> 
> 时间：2012-09-11T14:25:41.330
> 
> 标签：iphone, ios, file, device

我在 iPhone 应用程序中工作，我已经从 Dropbox 下载了一个文件来存储 iPhone 设备路径`"/Users/govindarajk/Library/Application Support/iPhone Simulator/5.1/Applications/343cc44-024DF2-34qs34-4433243-csafsa42232/Documents/Example.txt"`，但我在我的 Mac 中检查了这个路径，路径文件没有显示它，如何找到这个路径和 Example.txt 文件？请帮我

提前致谢

我必须以这种方式存储文件：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents directory
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Example.txt"];
    NSError *error;

    [self.restClient loadFile:@"/example/Example.txt" intoPath:filePath];

    if (filePath) { // check if file exists - if so load it:
        NSString *tempTextOut = [NSString stringWithContentsOfFile:filePath
                                                          encoding:NSUTF8StringEncoding
                                                             error:&error];
    } 
```

截图供您参考：

User/govindaraj/Library，此处未显示的库文件：

![在此处输入图像描述](../Images/736b947d19cd915f4054d8fbe18c5454.png)

![在此处输入图像描述](../Images/64641fa7d4bc07f62a6d09e6b1f28930.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:37:01.243

该`Library`目录是隐藏的，您可以通过以下操作进入该目录：按`⇧ Shift`+`⌘</kbd>+`G` when in finder. Then a dialog will popup asking to open a directory, just type in `~/Library` and it should open the library directory.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T18:07:25.167

打开终端并输入以下内容

```
defaults write com.apple.Finder AppleShowAllFiles YES 
```

然后从 Apple 菜单上的 Force Quit 选项重新启动 Finder。

如果要重新打开隐藏文件，命令是

```
defaults write com.apple.Finder AppleShowAllFiles NO 
```

# oracle - 获取视图的主键列

> ID：12371966
> 
> 赞同：1
> 
> 时间：2012-09-11T14:25:45.493
> 
> 标签：oracle

如果该视图是使用依赖表的主键列创建的，是否可以检索视图列表以及主键列名称？

例如：

```
Employee(ID PRIMARY KEY, FIRST NAME, LAST NAME, SALARY, DEPARTMENT) 
```

从 Employee 表派生的视图：

```
EMPLOYEEVIEW(ID, FIRST NAME, LAST NAME) 
```

`EMPLOYEEVIEW`满足我的约束。我需要获得这些观点。期望的结果类似于`EMPLOYEEVIEW ID`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T22:08:52.673

要获取当前模式中表的主键约束，可以使用以下查询：

```
select *
from   user_constraints
where  constraint_type = 'P' 
```

所以要在你的视图中搜索主键，我会使用这样的查询

```
select *
from   user_views v
join   user_constraints c on upper(v.text) like '%'||c.table_name||'%'
where  c.constraint_type = 'P'
and    v.view_name = 'YOUR_VIEW_NAME' 
```

不幸的是，user_views 视图中的文本字段是可怕的 LONG 数据类型，因此您需要创建自己的函数（[或谷歌](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:839298816582)函数）来将 LONG 转换为 VARCHAR，因此您可以使用 upper() 并喜欢它。

# javascript - 使用 colspan 创建新表格行会更改 IE 中的单元格大小

> ID：12371967
> 
> 赞同：1
> 
> 时间：2012-09-11T14:25:47.300
> 
> 标签：javascript, jquery, html-table

我正在处理一个相当复杂的问题，并试图将我的问题简化为一个简短的代码示例。

当我`<tr>`使用 jQuery 在表格中创建一个新表格并将 colspan 设置为总列数时，表格单元格的宽度（未在代码中设置）会发生变化。这发生在 IE9 中，但不在 Chrome 中。我知道我可以在代码中明确给出单元格大小，但在我使用的解决方案中我不能真正做到这一点。

这是代码：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript" ></script>

<script type="text/javascript">
    var expanded = false;
    var $detailsRow;
    $(document).ready(function(){
        //toggle the details row
        $(".selectable-row").click(function(){
            if(expanded){
                $detailsRow.remove();
                expanded = false;
            }else{
                $detailsRow = $("<tr class=\"child-row\"><td colspan=\"4\">");
                $detailsRow.find("td").text("Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello Hellohellohellohellohellohello");
                $detailsRow.insertAfter($(this));
                expanded = true;
            }
        });
    });
</script>

<div style="width:1000px">
    <table border="1" style="width:100%">
        <tr class="selectable-row">
            <td>2012-09-03 11:33</td>
            <td>This is the 2nd column</td>
            <td>The 3rd column</td>
            <td>The last one</td>
        </tr>
    </table>
</div> 
```

![请注意，这是一个细微的差别，第二个是展开的，并且 date-cell 稍小一些](../Images/52a857ab841106cf4f18fedf90dfc678.png) 请注意，这是一个细微的差别，第二个是展开的，并且日期单元格略小一些。

有人可以解释为什么会发生这种情况，以及是否有解决办法？也许以某种方式用 div 包裹单元格的内部。我已经尽力了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:53:09.303

您看到的是[像素舍入错误](http://ejohn.org/blog/sub-pixel-problems-in-css/)。 [这里](http://agilewebmasters.com/robert/percentage-rounding-and-sub-pixel-perfection/)有另一个链接在谈论它。

如果您将代码发布到 js fiddle 中，您将收到您谈到的 div 宽度为 1000 的错误，但不是 1001，也不是 1002，而是再次出现 1003、1004，而不是再次出现 1005 ......如果你将列号更改为 3，Chrome 也会显示 1001、1002 的错误。

我不确定添加 col-span 时如何重新计算表格列宽，这首先会导致偏移，因为表格的尺寸本身不会改变。

正如 KK 提到的，设置 width: 25% 也为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:44:28.417

您是否应用了任何 css 来控制单元格宽度？因为在单元格上添加 css 属性后，它会停止变小/变大。

```
<style type="text/css">
    .selectable-row td { width: 25%; }
</style> 
```

# wpf - 离开 Visual Studio 6 世界寻找新事物...从哪里开始

> ID：12371968
> 
> 赞同：0
> 
> 时间：2012-09-11T14:25:51.550
> 
> 标签：wpf, windows-8

不，你没有看错标题......

我的公司已经做了一段时间的**Visual Studio 6/MFC/DCOM**应用程序（记住：*这些在 1998 年很热门*），我现在有机会开始一个新的应用程序，一个新产品。

出于很多原因（好的或坏的或两者兼而有之），我们希望继续使用 Microsoft 技术。我们的最终客户是习惯于使用 Windows 和桌面应用程序的大公司。对于他们中的大多数人来说，他们正在离开（或将在未来一两年内离开）Windows XP for Windows 7（甚至不考虑 Windows 8）。

为了使自己成为“普通开发人员”，我开始玩弄，并通过以下方式构建了一个可行的概念证明：

*   视觉工作室 2010
*   WPF - 在 Telerik Rad Control for WPF 的帮助下（喜欢与否，这不是问题）
*   MVVM
*   棱镜

我对此很满意，但是……即将推出的 Windows 8 带来了一堆新的流行语。

*   WinRT
*   Metro 应用程序（有 Metro 的 Rad 控件的预览）
*   XAML 或 HTML

微软也有很多不好的意图：

*   世界粮食计划署（甚至更多的 Sylverlight）将死去
*   桌面应用程序将不再面向 Web
*   等等

我的问题是：在我的情况下你会怎么做？

我期待以下类型的答案：

*   我肯定会那样*做*
*   您可以这样做*，*因此它不会阻止您稍后更新到其他内容
*   技术 X 让你这样做，而 Y 这样做。在您的情况下，出于这个原因，我会坚持使用 X。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:18:17.463

我自 90 年代中期以来一直在开发，所以我知道你来自哪里。我曾经使用相同的技术堆栈。最近，我的 UI 工作围绕 WPF/Silverlight/Prism/MVVM 和 MVC/HTML/CSS/JQuery 展开。看起来您的组织的技术技能是针对桌面应用程序的，而不是基于浏览器的。我认为自然的进展将是使用基于 XAML 的开发，特别是 WPF。我认为，基于 Web 的开发会延长您的新应用程序的开发时间，因为它引入了许多您的团队可能不熟悉的技术。

正如您所提到的，如今人们担心的是，基于 XAML 的应用程序已濒临死亡。这可能是真的，但短期内不会，如果您相信 Microsoft，您可以选择将它们转换为 WinRT/Metro（C#/XAML 堆栈）。这种方法的一些注意事项：

*   XAML 需要一段时间来学习
*   MVVM 和 PRISM 对许多开发人员来说是困难的概念
*   与网络堆栈相比，拥有这些技能的开发人员并不多

WPF 与 PRISM 以 MVVM 模式配对，是一个功能强大的桌面开发工具包，可以真正让您的新项目取得成功

# javascript - 使用 FileReader 读取文本文件

> ID：12371970
> 
> 赞同：15
> 
> 时间：2012-09-11T14:25:55.733
> 
> 标签：javascript, html

我编写了以下代码以尝试读取 .txt 文件的内容

```
<!DOCTYPE html>
<html>

<input type="file" id="files" name="file" />
<div id="container" style="height: 500px; min-width: 500px"></div>

<script>
    function handleFileSelect(evt) 
    {
        var files = evt.target.files; // FileList object

        // Loop through the FileList and render image files as thumbnails.
        for (var i = 0, f; f = files[i]; i++) 
        {

            var reader = new FileReader();
            reader.onload = (function(theFile) 
            {
                var contents = theFile.target.result;
                    var lines = contents.split('\n');

            })(f);

            reader.readAsText(f);
        }
    }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>
</html> 
```

使用萤火虫我设置了一个休息时间，`var contents = theFile.target.result;`但没有返回任何内容。任何人都可以发现有什么问题吗？

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-11T15:04:13.253

尝试（关闭加载）：

```
function handleFileSelect(evt)
{
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++)
    {

        var reader = new FileReader();
        reader.onload = (function(reader)
        {
            return function()
            {
                var contents = reader.result;
                var lines = contents.split('\n');
                //////
                document.getElementById('container').innerHTML=contents;
            }
        })(reader);

        reader.readAsText(f);
    }
} 
```

或（不关闭）：

```
function handleFileSelect(evt)
{
    var files = evt.target.files; // FileList object

    // Loop through the FileList and render image files as thumbnails.
    for (var i = 0, f; f = files[i]; i++)
    {

        var reader = new FileReader();
        reader.onload = function(event)
        {
            // NOTE: event.target point to FileReader
            var contents = event.target.result;
            var lines = contents.split('\n');
            //////
            document.getElementById('container').innerHTML=contents;
        };

        reader.readAsText(f);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-19T11:09:41.560

我的例子

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
    </head>
    <body>
        <script>
            function PreviewText() {
            var oFReader = new FileReader();
            oFReader.readAsDataURL(document.getElementById("uploadText").files[0]);
            oFReader.onload = function (oFREvent) {
                document.getElementById("uploadTextValue").value = oFREvent.target.result; 
                document.getElementById("obj").data = oFREvent.target.result;
            };
        };
        jQuery(document).ready(function(){
            $('#viewSource').click(function ()
            {
                var text = $('#uploadTextValue').val();
                alert(text);
                //here ajax
            });
        });
        </script>
        <object width="100%" height="400" data="" id="obj"></object>
        <div>
            <input type="hidden" id="uploadTextValue" name="uploadTextValue" value="" />
            <input id="uploadText" style="width:120px" type="file" size="10"  onchange="PreviewText();" />
        </div>
        <a href="#" id="viewSource">Source file</a>
    </body>
</html> 
```

# c# - 如何在列表中查找重复项并按出现次数对其进行排序

> ID：12371975
> 
> 赞同：1
> 
> 时间：2012-09-11T14:26:11.690
> 
> 标签：c#, list, sorting

有没有一种简单的方法可以在列表中找到重复项，然后按出现次数对它们进行排序？此外，应删除重复项。

例如。你有一个`List<String>`这样的：

```
List<String> = new List<String>{"6","1","2","2","4","6","5","1","6","6","2"}; 
```

问题是，如何将此列表转换为 -> “6”、“1”、“2”、“4”、“5”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:28:22.697

我认为最简单的方法是使用 LINQ 方法[`Distinct()`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)：

```
var originalList = …;
vat withoutDuplicates = originalList.Distinct(); 
```

尽管您应该注意，结果的顺序`Distinct()`是明确未记录的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T14:29:46.910

采用`Linq.Distinct()`

```
List<String> list = new List<String>{"6","1","2","2","4","6","5","1","6","6","2"};
list = list.Distinct().ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T14:34:15.567

如果您实际上希望它们从最常见到最少排序-与您的示例不同-

```
var ordered = list
    .GroupBy(i => i)
    .OrderByDescending(g => g.Count())
    .Select(g => g.Key); 
```

应该实现这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T14:31:40.950

```
Using System.Linq;
// Assuming inputList was the original string list
List<String> deDuped = inputList.Distinct().ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T14:36:40.610

由于不清楚您的确切含义，因此这里有两种可能含义的解决方案：

1.  **获取按出现次数排序的唯一列表**：

    对列表进行分组并按以下方式排序`Count()`：

    ```
    List<String> list = new List<String>{"6","1","2","2","4","6","5","1","6","6","2"};

    var q = from s in list
    group s by s into g
    orderby g.Count() descending
    select g.Key; 
    ```

2.  **获取按列表中第一次出现的项目排序的唯一列表**

    已经有几个使用建议`Distinct`，但是[文档](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)不保证它们按照它们在列表中出现的顺序出现（当前的`Enumerable`实现恰好以这种方式对它们进行排序，但对于其他提供者则不能保证）：

    > **备注**
    > 结果序列是无序的。

    为了保证顺序，添加一个 OrderBy 子句：

    ```
    var q = list.Distinct().OrderBy(s => list.IndexOf(s)); 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T14:50:19.170

还不是最干净的，但这提供了正确的结果。

```
var originalData = new List<string>{"6","1","2","2","4","6","5","1","6","6","2"};
var result = new List<string>();

foreach (var myString in originalData)
{
    if (!result.Exists(s => s == myString))
        result.Add(myString);
} 
```

# html - 如何让我的单栏博客内容“缩放”以填充移动浏览器的宽度？

> ID：12371976
> 
> 赞同：2
> 
> 时间：2012-09-11T14:26:12.607
> 
> 标签：html, css, mobile, tumblr

更具体地说，我有一个单列 Tumblr 博客。当有人从移动设备点击它时，我不想使用通用的“移动友好”主题。我希望单列填充宽度而不拉伸内容的宽度或使字体大小变大。

本质上，我想“缩放”到内容，而无需用户双击屏幕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T15:05:38.843

你需要几件事：

1.  您需要一个仅限移动设备的 CSS 文件来更改样式（通常更简单，图像更少或更小）。您可以使用“@media”标签来完成此操作。这里有一篇关于这种方法的好文章：http: [//mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-网站/](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

2.  确保使用“元视口”标签来设置页面的宽度。这将正确“放大”您正在谈论的文本。它告诉移动浏览器页面*应该*有多宽。以下是有关该主题的更多信息（专门针对 iOS，但其他移动浏览器可以读取该标签）：http: [//developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport。 html](http://developer.apple.com/library/ios/#DOCUMENTATION/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:38:41.507

如果您想在移动浏览器上使用不同的行为，您将不得不使用特殊的移动友好 css。不过，它不必位于单独的主题中。

您可以在 css 规则前面加上`@media only handheld`，使其仅针对具有小屏幕的移动设备。

给我们你的css和html，我会给你一个更准确的答案。

# html - 级联列表下拉列表

> ID：12371978
> 
> 赞同：1
> 
> 时间：2012-09-11T14:26:25.277
> 
> 标签：html, list, drop-down-menu, cascade

我如何在HTML中创建级联下拉列表，以便在选择选项时将出现另一个下拉列表，然后将第一个下拉列表显示上面显示的第一个下拉列表？我有四个下拉菜单要显示，一个接一个。一个 jquery 向下滑动也很好。

任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:41:12.610

I looked at jsfiddle link you provided, you should load data from server through ajax when some option is selected. 像这样的东西：

```
$('#state_select).change(function(){
  var stateId = $(this).val();
  $.ajax({
    url:...,
    success: function(response){
      //fill city select with data from server
      //then show city select
    }
  });
}); 
```

应将相同的事件处理程序添加到城市选择等。

# c# - 在您的解决方案 C# 中添加安装项目

> ID：12371979
> 
> 赞同：0
> 
> 时间：2012-09-11T14:26:26.193
> 
> 标签：c#

在您的解决方案中创建安装项目时，如何进行设置以检查您正在安装应用程序的 PC 上是否安装了适当的 .Net Framework

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:30:12.387

有一篇[代码项目文章](http://www.codeproject.com/Articles/35976/Add-Prerequisites-of-NET-Framework-in-Visual-Studi)对此进行了解释。这篇文章可能看起来已经过时了，但想法和位置保持不变。

基本上，您的安装项目属性中有一些选项可以选择要安装的先决条件和添加自定义的先决条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:28:57.443

这取决于安装引擎。如果您使用的是 InstallShield LE，那么可再发行组件（或 mebe 依赖项）部分中有一个选项。

# clojure - 如何在 Clojure 中使用尾递归遍历 AST

> ID：12371986
> 
> 赞同：5
> 
> 时间：2012-09-11T14:26:36.820
> 
> 标签：clojure, functional-programming, antlr, antlr3, tail-recursion

我有一个 ANTLR3 AST，我需要使用后序深度优先遍历来遍历它，我已将其实现为大致以下 Clojure：

```
(defn walk-tree [^CommonTree node]
  (if (zero? (.getChildCount node))
    (read-string (.getText node))
    (execute-node
      (map-action node)
      (map walk-tree (.getChildren node))))))) 
```

我想使用 loop...recur 将其转换为尾递归，但我无法弄清楚如何有效地使用显式堆栈来执行此操作，因为我需要后序遍历。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T23:07:06.557

您可以使用该函数生成**深度优先遍历的惰性序列，**`tree-seq`然后从遍历中的每个对象中获取文本，而不是生成遍历树并访问每个节点的尾递归解决方案。**惰性序列永远不会破坏堆栈**，因为它们将生成序列中的下一项所需的所有状态存储在堆中。它们经常被用来代替像这样的递归解决方案，`loop`而且`recur`更困难。

我不知道你的树是什么样子的，尽管典型的答案看起来像这样。您需要使用“有孩子”“孩子列表”功能

```
(map #(.getText %) ;; Has Children?      List of Children    Input Tree
     (tree-seq #(> (.getChildCount #) 0) #(.getChildren %) my-antlr-ast)) 
```

如果 tree-seq 不适合您的需要，还有其他方法可以从树中生成惰性序列。接下来看看拉链库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T18:10:51.457

正如您所提到的，使用尾递归实现这一点的唯一方法是切换到使用显式堆栈。一种可能的方法是将树结构转换为堆栈结构，该结构本质上是树的逆波兰符号表示（使用循环和中间堆栈来完成此操作）。然后，您将使用另一个循环来遍历堆栈并建立您的结果。

这是我为完成此任务而编写的示例程序，[使用尾递归](https://stackoverflow.com/questions/5450316/postorder-using-tail-recursion)作为灵感，在 postorder 使用 Java 代码。

```
(def op-map {'+ +, '- -, '* *, '/ /})

;; Convert the tree to a linear, postfix notation stack
(defn build-traversal [tree]
  (loop [stack [tree] traversal []]
    (if (empty? stack)
      traversal
      (let [e (peek stack)
            s (pop stack)]
        (if (seq? e)
          (recur (into s (rest e)) 
                 (conj traversal {:op (first e) :count (count (rest e))}))
          (recur s (conj traversal {:arg e})))))))

;; Pop the last n items off the stack, returning a vector with the remaining
;; stack and a list of the last n items in the order they were added to
;; the stack
(defn pop-n [stack n]
  (loop [i n s stack t '()]
    (if (= i 0)
      [s t]
      (recur (dec i) (pop s) (conj t (peek s))))))

;; Evaluate the operations in a depth-first manner, using a temporary stack
;; to hold intermediate results.
(defn eval-traversal [traversal]
  (loop [op-stack traversal arg-stack []]
    (if (empty? op-stack)
      (peek arg-stack)
      (let [o (peek op-stack)
            s (pop op-stack)]
        (if-let [a (:arg o)]
          (recur s (conj arg-stack a))
          (let [[args op-args] (pop-n arg-stack (:count o))]
            (recur s (conj args (apply (op-map (:op o)) op-args)))))))))

(defn eval-tree [tree] (-> tree build-traversal eval-traversal)) 
```

你可以这样称呼它：

```
user> (def t '(* (+ 1 2) (- 4 1 2) (/ 6 3)))
#'user/t
user> (eval-tree t)
6 
```

我将其作为练习留给读者，以将其转换为使用 Antlr AST 结构；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T15:42:07.950

我不擅长clojure，但我想我明白你在找什么。

这是一些伪代码。我的伪代码中的堆栈看起来像一个有状态的对象，但是使用不可变的对象来代替是很可行的。它使用像 O(depth of tree * max children per node) heap 之类的东西。

```
walk_tree(TreeNode node) {
    stack = new Stack<Pair<TreeNode, Boolean>>();
    push(Pair(node, True), stack)
    walk_tree_aux(stack);
}
walk_tree_aux(Stack<Pair<TreeNode, Boolean>> stack) { -- this should be tail-recursive
    if stack is empty, return;
    let (topnode, topflag) = pop(stack);
    if (topflag is true) {
        push Pair(topnode, False) onto stack);
        for each child of topnode, in reverse order:
            push(Pair(child, True)) onto stack
        walk_tree_aux(stack);
    } else { -- topflag is false
        process(topnode)
        walk_tree_aux(stack);
    }
} 
```

# sql - 当@Param = -1 使用 IN 语句过滤时

> ID：12371988
> 
> 赞同：0
> 
> 时间：2012-09-11T14:26:40.227
> 
> 标签：sql, sql-server, sql-server-2008

我的查询需要帮助：

当我向查询发送值为 -1 的参数时，我想使用“IN”语句进行过滤，否则根据该值进行过滤。

我试图做这样的事情：

```
WHERE  (StatusId = CASE WHEN @StatusId = - 1 
        THEN 
        @StatusId IN (1, 2, 3) 
        ELSE 
        StatusId = @StatusId  END) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:28:14.657

我认为您的示例中有错字，如下所示：

```
WHEN @StatusId = - 1 THEN  @StatusId IN (1, 2, 3) 
```

...不会做任何事情，因为如果`@StatusId = -1`，它不会`in (1, 2, 3)`。

Anywhos，您可以使用`OR`嵌套括号：

```
WHERE  (StatusId IN (1, 2, 3)  AND @StatusId = -1)
        OR (StatusId = @StatusId AND @StatusId <> -1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T14:29:03.633

您不需要`CASE`为此声明，您只需使用一个`WHERE`子句：

```
WHERE 
(
    @StatusId = -1 AND StatusId IN (1, 2, 3) 
) 
OR
(
    StatusId = @StatusId AND @StatusId <> -1
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T14:29:14.820

无需使用`CASE`. 你可以直接这样做：

```
WHERE 
(@StatusId = -1 AND StatusId IN (1, 2, 3) ) 
OR
(StatusId = @StatusId AND @StatusId <> -1) 
```

或者，如果您想使用`CASE`，可以这样做：

```
WHERE StatusId IN 
(CASE @StatusId 
 WHEN -1 THEN 1,2,3 
 ELSE @StatusId 
END) 
```

# bash - ffmpeg 似乎限制了我的输出

> ID：12371993
> 
> 赞同：2
> 
> 时间：2012-09-11T14:26:53.263
> 
> 标签：bash, video, ffmpeg

我正在尝试从视频中提取单个帧。

```
ffmpeg -i face_source.wmv face_sourceframes/image%03d.jpg 
```

几乎工作得很好。前六个左右看起来很完美（文件大小大约为 30kB），但随后它们会不断降级（例如 23kB、17kB 等），直到所有帧都为 11kB。当然，这些帧是像素化的，不是我们想要的。

`-b`我尝试使用该选项强制比特率。ffmpeg 告诉我有关 inupt 视频的信息：

```
 Duration: 00:00:10.07, start: 0.000000, bitrate: 781 kb/s 
```

所以我设置比特率，首先使用`-b 781k`，然后，为了安全起见，还尝试将其加倍，以`-b 1562k`. 这些选项都没有对输出产生任何明显的影响。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:45:04.417

尝试`-qscale`使用 1-31 之间的值设置量化器：1 是最好的质量，31 是最差的。

如果它确实正在尝试进行一些速率控制，那应该会有所帮助。

但是，可能是您的输入视频本身质量不好？尝试播放并检查。我怀疑是这样的。

# php - facebook按钮上的一次“分享”

> ID：12371999
> 
> 赞同：-1
> 
> 时间：2012-09-11T14:27:00.593
> 
> 标签：php, facebook, facebook-javascript-sdk, social-networking, facebook-social-plugins

我正在构建一个简单的在线游戏，我希望用户在完成游戏时被提示在 Facebook 上分享他们的分数。我真的不想使 UI 过于复杂，理想情况下希望它类似于 twitter 的推文按钮并具有预定义（可编辑）消息，例如：

“我刚刚在 mygame.com 上获得了 560 分”

我希望将其发布到用户的 Facebook 墙上。

代码和用户最简单的选择是什么？我正在使用 php、mysql、jquery、javascript、ajax

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:34:32.197

假设您手头有 Facebook Javascript SDK，您可以构建一个链接到 的按钮`https://www.facebook.com/dialog/feed?app_id=393236134020452&link=<the url you want to share>&picture=<url of any picture you want to show in the users' status updates>&name=<title of the status update>&caption=<text of the status update>&redirect_uri=<url to redirect users upon completion of the sharing action>`，可能在一个新选项卡中。

如果你想看看，我在[这里](http://raibaz.github.com/wrltzr)使用纯 JS 和 JS SDK做了类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T14:38:59.087

建议您使用 Javascript SDK：[https ://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID - get one at https://developers.facebook.com/apps/
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here - Change fields below to match what you want to share and wrap it inside a function that you trigger on click
    FB.ui({
      method: 'feed',
      name: 'Facebook Dialogs',
      link: 'https://developers.facebook.com/docs/reference/dialogs/',
      picture: 'http://fbrell.com/f8.jpg',
      caption: 'Reference Documentation',
      description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
    },function(response) {
      if (response && response.post_id) {
        alert('Post was published.');
      } else {
        alert('Post was not published.');
      }
    });
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script> 
```

频道文件可以是：

```
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T13:03:09.810

```
 $attachment = array(
     'access_token' => $accessToken,
     'message' => $text,
     'name' => $appName,
     'link' => $appLink,
     'description' => "I have just scored 560 on mygame.com",
    );
    return $response = $facebook->api("/$fbid/feed", 'POST', $attachment); 
```

其中 $facebook 是 Facebook API 对象。您必须创建 facebook 应用程序和权限才能在用户的墙上发帖。