# StackOverflow 问答 11888000-11888999

# python - 带有元数据的python复制文件，shutil vs手动打开和写入重复文件

> ID：11888001
> 
> 赞同：1
> 
> 时间：2012-08-09T16:37:31.043
> 
> 标签：python, shutil, file-copying

根据[http://docs.python.org/library/shutil.html](http://docs.python.org/library/shutil.html)，使用这些方法不会复制元数据，包括所有权、ACL 和资源分叉。使用基本文件读取方法打开文件并将其逐行写回重复文件，保持文件元数据完整吗？我的猜测是肯定的。目标磁盘是否必须与源磁盘的格式相同才能保持原样？我的猜测是否定的。我四处浏览并没有看到任何具体的内容。我想基本上使用 python 将 3 台运行不同操作系统的不同计算机备份到一个中心位置。被复制的文件是相同的，就好像我可以替换原件并且看不到任何差异一样，这是不可或缺的。感谢您的任何见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T01:52:18.177

我有一个类似的问题，我必须在 unix 文件系统上保留所有者和组信息。这些只是整数，但 shutil.copy2 不保留它们。尽管您正在跨系统复制，但您可以修改代码以将元数据存储在某处，然后在完成复制后应用它。

```
import os
import shutil
import stat

def CopyMinusP(src, dest):
  file_stat = os.stat(src)
  owner = file_stat[stat.ST_UID]
  group = file_stat[stat.ST_GID]
  print "Owner: %d  Group: %d" % (owner, group)  # for diagnostics
  shutil.copy2(src, dest)
  os.chown(dest, owner, group) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:41:24.397

不，只需打开源文件进行读取和目标文件进行写入不会复制元数据。操作系统应该如何知道它应该？此外，不同的文件系统支持不同的元数据，并且没有文件系统独立的方式来复制所有元数据。在不同文件系统之间复制时，通常不可能保留元数据。复制到 FAT 文件系统时应如何保留资源分叉？FAT上根本没有这样的东西。所以你的两个猜测都是错误的。

您应该使用一个好的备份解决方案，而不是完全支持您使用的所有文件系统。

# javascript - 防止图像拖动但其他任何事情

> ID：11888004
> 
> 赞同：0
> 
> 时间：2012-08-09T16:37:42.720
> 
> 标签：javascript, dom

在 stackoverflow 上有一个问题，询问如何防止图像拖动。代码是这样的：

```
window.addEventListener('mousedown', function(event){ event.preventDefault() }, false); 
```

问题是这阻止了一切。当我单击输入时，它没有得到焦点。所以我添加了一个条件“if event.target.tagName !== 'INPUT'”。现在我点击输入，它被聚焦，然后我点击其他地方 - 它保持聚焦，没有发生模糊。

如何防止仅拖动图像（即使使用背景图像也会在 FireFox 中发生）并保持所有其他功能正常工作？

编辑：我不能只在图像上注册事件处理程序。我没有任何图像，我有带有背景图像的 div。此外，单击图像也应该模糊输入焦点。

EDIT2：下面是错误的解决方案（简化 - 用 CoffeeScript 编写），但阻止模糊操作然后我自己再做一次是没有意义的。

```
inputs = document.querySelectorAll('input')
for input in inputs
    input.blur() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:45:19.697

Seems like you're on the right track - but excluding input still *includes* everything else. Why not only prevent the mousedown event on images only?

```
window.addEventListener('mousedown', function(event){
    if (event.target.tagName === "IMG") { 
        event.preventDefault(); 
    } 
}, false); 
```

# extjs - 如何更改 Model.load() (ExtJs) 中的参数 id

> ID：11888012
> 
> 赞同：2
> 
> 时间：2012-08-09T16:38:21.963
> 
> 标签：extjs, model, load, extjs4

当我定义一个模型“TeMdl”然后使用 Fn TeMdl.load(1) 时，它将发送一个参数 id=1 的请求。所以..如何更改 id 参数以便请求可以像这样：“......\?uid=1”？我是 extjs 的新手！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:58:53.120

来自 Ext 文档中的评论：

load() 方法将不遵守模型的 idProperty，并假定它是“id”。

以下子类通过使用 idProperty 而不是 id 来修复此行为。

```
Ext.define("Ux.data.Model", {
  extend: "Ext.data.Model",
  statics: {
    load: function(id, config){
      config = Ext.apply({}, config);

      var params={};
      params[this.prototype.idProperty] = id;

      config = Ext.applyIf(config, {
          action: 'read',
          params: params
      });

      var operation  = Ext.create('Ext.data.Operation', config),
          scope      = config.scope || this,
          record     = null,
          callback;

      callback = function(operation) {
          if (operation.wasSuccessful()) {
              record = operation.getRecords()[0];
              Ext.callback(config.success, scope, [record, operation]);
          } else {
              Ext.callback(config.failure, scope, [record, operation]);
          }
          Ext.callback(config.callback, scope, [record, operation]);
      };

      this.proxy.read(operation, callback, this);
    }
  }
}); 
```

# python - 随着时间的推移性能下降（高磁盘使用率）

> ID：11888013
> 
> 赞同：1
> 
> 时间：2012-08-09T16:38:24.223
> 
> 标签：python, performance, redis, hard-drive

我正在编写一个 python 程序来从维基百科转储中解决一些问题。

但是，在处理具有大量磁盘使用量的大型数据集时，我注意到的一件事是性能几乎总是随着时间的推移而下降。

我的电脑是核心 i7 2.6 GHz、16 Gb 内存（使用量达到约 5 Gb），配备 1 Tb 7200 RPM 硬盘。

注意：在这两种情况下，输出都以 10 秒为增量。

这是使用 Redis 和 Python 2.7

```
[ ] T:251.02 articles/second R: 4628 A: 15474
[ ] T:247.13 articles/second R: 5111 A: 17151
[ ] T:246.41 articles/second R: 5487 A: 19177
[ ] T:258.10 articles/second R: 6200 A: 22217
[ ] T:259.90 articles/second R: 6833 A: 24382
[ ] T:265.22 articles/second R: 7685 A: 26864
[ ] T:274.25 articles/second R: 8981 A: 29488
[ ] T:281.50 articles/second R: 10094 A: 32209
[ ] T:286.51 articles/second R: 11283 A: 34639
[ ] T:296.26 articles/second R: 13033 A: 37414
[ ] T:301.68 articles/second R: 14484 A: 39906
[ ] T:289.22 articles/second R: 14704 A: 40333
[ ] T:277.45 articles/second R: 14940 A: 40634
[ ] T:267.82 articles/second R: 15243 A: 41083
[ ] T:259.04 articles/second R: 15502 A: 41570
[ ] T:250.92 articles/second R: 15778 A: 42014
[ ] T:243.67 articles/second R: 16075 A: 42486
[ ] T:236.79 articles/second R: 16356 A: 42924
[ ] T:230.48 articles/second R: 16649 A: 43358
[ ] T:223.89 articles/second R: 16826 A: 43705
[ ] T:218.44 articles/second R: 17039 A: 44205
[ ] T:213.30 articles/second R: 17234 A: 44705
[ ] T:208.41 articles/second R: 17354 A: 45253
[ ] T:203.60 articles/second R: 17473 A: 45725
[ ] T:199.61 articles/second R: 17627 A: 46329
[ ] T:195.65 articles/second R: 17807 A: 46872
[ ] T:191.64 articles/second R: 17875 A: 47398
[ ] T:188.28 articles/second R: 18003 A: 48008
[ ] T:185.11 articles/second R: 18233 A: 48517 
```

显然 Redis 可能是我的问题，这里有一些不使用 Redis 的结果。

```
[ ] T:1636.31 articles/second R:3938 A:12949
[ ] T:3716.77 articles/second R:19834 A:61210
[ ] T:2776.43 articles/second R:20213 A:68211
[ ] T:2128.70 articles/second R:20228 A:68867
[ ] T:1729.78 articles/second R:20251 A:69586
[ ] T:1462.91 articles/second R:20289 A:70338
[ ] T:1270.07 articles/second R:20309 A:71107
[ ] T:1124.34 articles/second R:20330 A:71857
[ ] T:1011.18 articles/second R:20376 A:72669
[ ] T:919.88 articles/second R:20391 A:73464
[ ] T:845.36 articles/second R:20406 A:74304
[ ] T:783.06 articles/second R:20417 A:75158
[ ] T:730.05 articles/second R:20427 A:75984
[ ] T:684.37 articles/second R:20436 A:76798
[ ] T:645.07 articles/second R:20451 A:77661
[ ] T:610.67 articles/second R:20475 A:78518 
```

这不是“真正的”性能，因为我没有将数据存储在任何地方（只是增加文章和重定向的数量）。但随着时间的推移，我们可以看到同样的性能下降。

程序刚启动时的性能是真实的，还是尚未达到稳定？由于我没有写入任何日志文件或任何内容，因此性能似乎应该相对稳定，因为我不断地从硬盘驱动器读取（当然它会跳来跳去访问所有文件）。

我知道将大量数据放入队列中可能是一种糟糕的形式，但我认为让单个进程处理数据读取而不是将文件分发给其他 7 个进程读取会导致搜索风暴。我尝试了两种方式（将文件路径放入队列中，并将实际数据放入队列中）并将数据放入队列中更快一点。

```
from redis import Redis
import time
import re
from multiprocessing import Process, Queue

r = Redis()
r.flushdb()

doubleBrackets = re.compile("\[\[(.*?)\]\]")

def findLinks(q, oq):
    while True:
        if not q.empty():
            title, lines = q.get()
            links = []
            for line in lines:
                for l in doubleBrackets.findall(line):
                    l = l.split('|')[0]
                    l = l.strip('|')
                    links.append(l)
                    #r.rpush(title, l)

            if len(links) == 1:
                oq.put(0)
                #r.incr('Redirects')
            else:
                oq.put(1)
                #r.incr('Articles')

numArticles = 0
numRedirects = 0

print 'Starting'

# This is a 1 Gb file with the paths to all the files I am accessing
linkFile = '/home/andrew/Wikipedia/logFileAll'

q = Queue()
oq = Queue()
processes = []

for i in range(7):
    p = Process(target=findLinks, args=(q,oq))
    processes.append(p)
    p.start()

startTime = time.time()
timer = time.time()

with open(linkFile, 'rb') as f:
    while True:
        line = f.readline()

        # The data is formatted so the title and path are separated by a single space
        title, path = line.split(' ')

        with open(path.strip(), 'rb') as fi:
            # Here we read the article
            lines = fi.readlines()

        # We put the title and the article content in the queue
        q.put((title, lines))

        if time.time() - timer > 10:
            # If using Redis
            #print '[ ] T:%.2f articles/second R: %s A: %s' %((int(r.get('Redirects'))+int(r.get('Articles')))/(time.time()-startTime), r.get('Redirects'), r.get('Articles'))

            # Test for redis dependent performance
            while not oq.empty():
                response = oq.get()
                if response:
                    numArticles += 1
                else:
                    numRedirects += 1    
            print '[ ] T:%.2f articles/second R:%s A:%s' %((numArticles+numRedirects)/(time.time()-startTime), numRedirects, numArticles)
            timer = time.time()

# When we run through the 1 Gb file, we will still have a couple more items to chew through
while True:
    if time.time() - timer > 10:
        print '[ ] R: %s A: %s C:%s' %(r.get('Redirects'), r.get('Articles'), title)
        timer = time.time() 
```

编辑：根据 JF Sebastian 的评论，我添加了哨兵值而不是 q.empty() 检查。似乎有些进程卡在某个地方，但没有抛出异常（会发生这种情况有点奇怪），无论如何，这是性能提升！谢谢！

```
[ ] T:250.88 articles/second R:663 A:1850 Proc:7
[ ] T:257.17 articles/second R:1216 A:3940 Proc:7
[ ] T:259.92 articles/second R:1820 A:6000 Proc:7
[ ] T:251.81 articles/second R:2337 A:7762 Proc:7
[ ] T:250.04 articles/second R:2943 A:9590 Proc:7
[ ] T:248.24 articles/second R:3543 A:11389 Proc:7
[ ] T:246.83 articles/second R:4060 A:13260 Proc:7
[ ] T:247.59 articles/second R:4583 A:15271 Proc:7
[ ] T:243.97 articles/second R:5074 A:16938 Proc:7
[ ] T:242.01 articles/second R:5440 A:18819 Proc:7
[ ] T:252.34 articles/second R:6086 A:21741 Proc:7
[ ] T:255.94 articles/second R:6738 A:24053 Proc:7
[ ] T:261.38 articles/second R:7547 A:26518 Proc:7
[ ] T:268.01 articles/second R:8617 A:29000 Proc:7
[ ] T:276.48 articles/second R:9933 A:31648 Proc:7
[ ] T:283.45 articles/second R:11114 A:34358 Proc:7
[ ] T:293.25 articles/second R:12836 A:37148 Proc:7
[ ] T:302.41 articles/second R:14567 A:40015 Proc:7
[ ] T:313.33 articles/second R:16553 A:43147 Proc:7
[ ] T:320.35 articles/second R:17699 A:46551 Proc:7
[ ] T:328.72 articles/second R:18966 A:50261 Proc:7
[ ] T:337.07 articles/second R:19645 A:54724 Proc:7
[ ] T:349.34 articles/second R:19820 A:60768 Proc:7
[ ] T:364.98 articles/second R:20190 A:67674 Proc:7
[ ] T:373.08 articles/second R:20384 A:73183 Proc:7
[ ] T:381.27 articles/second R:20495 A:78957 Proc:7
[ ] T:391.39 articles/second R:20960 A:85070 Proc:7
[ ] T:394.74 articles/second R:22194 A:88710 Proc:7
[ ] T:397.37 articles/second R:23525 A:92105 Proc:7
[ ] T:397.76 articles/second R:24882 A:94855 Proc:7
[ ] T:397.11 articles/second R:26138 A:97387 Proc:7 
```

# c# - ComboBox.Text = null 字符串而不是实际显示的字符串

> ID：11888014
> 
> 赞同：0
> 
> 时间：2012-08-09T16:38:24.833
> 
> 标签：c#, string, text, combobox, null

免责声明 - 我现在只使用 C# 大约一个星期，所以希望这不是一个 n00b 问题。我确实环顾四周，但找不到有效的解决方案，包括[该](https://stackoverflow.com/questions/315237/get-the-combobox-text-in-c-sharp)线程的结果。

我在 Windows 窗体上有一个组合框。组合框的数据是从 Access 数据库中填充的。我设置的*相关*属性是 - AutoCompleteMode = Append; AutoCompleteSource = ListItems; 下拉样式 = 下拉。用户必须能够输入组合框并自动完成，因此 DropDownList 的 DropDownStyle 将不起作用。我没有使用默认的下拉箭头，而是使用动态 PictureBox 替换它。单击 PictureBox 或触发 Enter 事件会将组合框的 DropDown 属性设置为 true。

就目前而言，用户可以很好地选择项目或输入项目并按回车键或输入项目并离开该字段等......在所有这些不同类型的交互中，我能够确定正确的值在组合框是。我有某些触发器来确保 SelectedValue 和显示的 Text 始终保持同步。

我能够在我能想到的每一种可能的交互下获得正确的值，除了一个。如果用户开始键入字符串（使用 DropDown 属性 = true）并按右箭头键以使字符串自动完成，则组合框中的字符串始终为空字符串。

视觉的：

已选**_文字**

上述字符串中的粗体文本是组合框中突出显示的文本。如果用户然后点击右箭头键使组合框中的文本看起来像

Selected_Text

（请注意，此时 DropDown 仍然为真） ComboBox.Text 值始终为“”。

这是 ComboBoxes 的 DropDownClosed 事件之一的代码，这是用户按下回车后触发的第一件事。

```
private void cmbxYear_DropDownClosed(object sender, EventArgs e)
    {
        try
        {
            if (!cmbxYear.Text.Equals(cmbxYear.SelectedValue.ToString()))
            {
                if (!bUpdated & !bErrorFound)
                {
                    validateData(cmbxYear, clrYear, false, imgFilter1, imgNoFilter1);
                    updateTable();
                }
            }
            imgFilter1.Visible = false;
            imgNoFilter1.Visible = true;
        }
        catch
        {
            imgNoFilter1.Visible = false;
            imgFilter1.Visible = true;
        }
    } 
```

我还刚刚发现，当 DropDown 属性 = true 并且用户输入了某些内容然后按“Enter”时，ComboBox.Text 始终为空字符串。如果 DropDown 属性 = false，则不是这种情况。发生这种情况时，将返回正确的字符串。

我什至尝试让程序选择组合框中的所有文本；但是，为 SelectionLength 提供一个大于 ComboBox.Text.Length 的值似乎不起作用。我也尝试过引用 SelectedValue；但是，SelectedValue 为空。

出于所有密集目的，应用程序确信组合框中有一个空字符串。

如何检索实际的字符串？

* * *

如果这有助于我为以下事件编写代码：Click、DataSourceChanged、DropDown、DropDownClosed、Enter、KeyDown、Leave 和 Validated。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:51:29.907

这可能是一个错误：[Wrong SelectedItem in DropDownClosed event handler of ComboBox when press Tab to leave an open dropdown](https://connect.microsoft.com/VisualStudio/feedback/details/680361/wrong-selecteditem-in-dropdownclosed-event-handler-of-combobox-when-pressing-tab-to-leave-an-opened-dropdown)

我知道这和你的情况不一样。检查解决方法选项卡，看看那里发布的代码是否对您有帮助。这可能只是使用正确事件的问题。

我对某些 Windows 窗体控件的事件顺序和选定属性的体验不太理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:04:15.440

我能够为这个明显的错误创建一个成功的解决方法。以下是我的解决方法；希望此代码对其他人有所帮助。注意：您可能需要添加其他事件处理程序来微调所有 ComoBoxes 的用户交互，但这将适用于我在问题中描述的问题。

要使用此代码，您将需要一个名为 cmbxTest 的表单上的 ComboBox。您还需要添加适当的事件处理程序。假设您的表单名称是 frmMain，如下所示，在 fmrMain.Designer.cs 文件中，添加此代码（注意您也需要其他项目，但这些是需要添加到组合框 cmbxTest的*新*项目，即应该已经在您的测试表格上，frmMain）：

```
this.cmbxTest.AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.Append;
this.cmbxTest.AutoCompleteSource = System.Windows.Forms.AutoCompleteSource.ListItems;
this.cmbxTest.DropDownClosed += new System.EventHandler(this.cmbxTest_DropDownClosed);
this.cmbxTest.KeyUp += new System.Windows.Forms.KeyEventHandler(this.ComboBoxKeyUp);
this.cmbxTest.Text = "Test";  // Used in the below example - The default displayed text 
```

在表单的类文件（本例中为 frmMain.cs）中，使其如下所示：

```
public partial class frmMain : Form
{
    // Intial Declerations and initializations
    Boolean bReady = false;       // Secondary trigger for DataGridView selection
    string clrTest = "Test";      // Default display text - Clear filter text; Used to ignore the setting if this text is visible
    string currentText;           // Comboboxes' currently displayed text

    // Form execution
    public frmMain()
    {
        InitializeComponent();
    }

    // Some code...

    //
    // ComboBoxes on KeyPress event
    //      - Used as a workaround for MS ComboBoxes not updating their text correctly
    //      - Shared across all ComboBoxes (as applied by the individual controls' event handlers)
    //
    private void ComboBoxKeyUp(object sender, KeyEventArgs e)
    {
        ComboBox cmb = (ComboBox)sender;
        currentText = cmb.Text;
    }

    // Any trigger you want that requires the ComboBoxes text
    private void cmbxTest_DropDownClosed(object sender, EventArgs e)
    {
        if (!cmbxTest.Text.Equals(clrTest))
        {
            cmbxTest.Text = currentText;
        }
        // Do any other code that requires the cmbxTest.Text
        Console.WriteLine(cmbxTest.Text);
    }
} 
```

# excel - Access 2010 Excel 导出 1004 错误

> ID：11888018
> 
> 赞同：1
> 
> 时间：2012-08-09T16:38:37.817
> 
> 标签：excel, ms-access, ms-access-2010

我在 Access 2010 中有一些运行查询并将结果导出到 Excel 中的列的 VBA。这里的目标是，当用户按下所需的按钮时，会打开一个 Excel 工作簿，如果它不存在，则创建它。创建新工作簿时，VBA 会按预期执行。我遇到的问题是工作簿已经存在。

因此，在我创建了一组我的 excel 应用程序对象后，我尝试打开工作簿。当它不存在时，会发生 1004 错误，并且我有以下错误处理程序：

```
 Select Case Err
    Case 1004   'Workbook doesn't exist, make it
    xl.Workbooks.Add
    Set wb = xl.ActiveWorkbook
    wb.SaveAs strWorkBook

    Resume Next 
```

当用户打开现有工作簿时，系统会提示他们覆盖是、否、取消选项。除了 yes 之外的任何响应都会生成 1004 错误（似乎奇怪的 2 个不同的错误具有相同的代码 #）。我只是在寻找解决这个问题的方法，无论是我编写一些 VBA 来自动接受还是我有其他东西可以让用户说不/取消。最简单的是首选，我只是不希望它们出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:49:15.217

您不需要依赖错误处理来处理 Excel 文件是否存在。用于`Dir()`检查是否存在，并据此打开或创建。

```
If Len(Dir(strFullPathToWorkbook)) > 0 Then
    ' open the workbook '
Else
    ' create the workbook '
End If 
```

`wb.SaveAs strWorkBook`如果这是一个新工作簿， 请使用。

`wb.Save`如果它是现有工作簿，请使用。

# c# - 在 Windows XP/Vista 上获取包括 SolidWorks 在内的任何文件的缩略图

> ID：11888025
> 
> 赞同：7
> 
> 时间：2012-08-09T16:39:25.653
> 
> 标签：c#, .net, api, thumbnails, solidworks

每个安装的操作系统中都有很多内置的 ThumbnailProviders。由于这些提供程序，Windows 能够显示许多文件的缩略图。例如，Windows 资源管理器可以显示 *.jpg 文件的内容，但也可以显示 Solidworks *.sldprt 文件的内容（如果安装了 SolidWorks）。

但是有没有办法得到这些缩略图？我尝试使用 Windows API CodecPack 来管理它，但我只在 Windows 7 上成功了。

```
ShellFile shellFile = ShellFile.FromFilePath(filePath);                
Bitmap shellThumb = shellFile.Thumbnail.Bitmap; 
```

问题是：在 Windows XP/Vista 上，是否有任何其他可用的方法可以通过注册的缩略图提供程序获取任何文件的缩略图？我真的很绝望...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T13:14:41.900

有几种方法：

1) 使用库[OpenMCDF](http://sourceforge.net/projects/openmcdf/ "开放MCDF")。Solidworks 文件是[复合文档](http://en.wikipedia.org/wiki/Compound_document%20%22%22)，因此访问其内容 - 正在解析文件。

```
 OpenFileDialog dialog = new OpenFileDialog();    
 dialog.InitialDirectory = Application.StartupPath;  
 if (dialog.ShowDialog() == DialogResult.OK)  
 {  
     string STORAGE_NAME = dialog.FileName.ToString();  
     CompoundFile cf = new CompoundFile(STORAGE_NAME);  
     CFStream st = cf.RootStorage.GetStream("PreviewPNG");  
     byte[] buffer = st.GetData();  
     var ms = new MemoryStream(buffer.ToArray());  
     pictureBox1.Image = Image.FromStream(ms);  
  } 
```

2) 将库 EModelView.dll 作为控件添加并放置到窗体中。

```
 OpenFileDialog dialog = new OpenFileDialog();
        if (dialog.ShowDialog() == DialogResult.OK)
        {
            axEModelViewControl1.OpenDoc(dialog.FileName.ToString(), false, false, true, "");
        } 
```

3) 使用 SWExplorer 库 (wpfPreviewFlowControl)

```
 OpenFileDialog dialog = new OpenFileDialog();
        if (dialog.ShowDialog() == DialogResult.OK)
        {
            string sDocFileName = dialog.FileName.ToString();
            wpfThumbnailCreator pvf;
            pvf = new wpfThumbnailCreator();
            System.Drawing.Size size = new Size();
            size.Width = 200;
            size.Height = 200;
            pvf.DesiredSize = size;
            System.Drawing.Bitmap pic = pvf.GetThumbNail(sDocFileName);
            pictureBox1.Image = pic;
        } 
```

3) 带库文档管理器 (SolidWorks.Interop.swdocumentmgr)

```
 OpenFileDialog dialog = new OpenFileDialog();
        if (dialog.ShowDialog() == DialogResult.OK)
        {
            string sDocFileName = dialog.FileName.ToString();
            SwDMClassFactory swClassFact = default(SwDMClassFactory);
            SwDMApplication swDocMgr = default(SwDMApplication);
            SwDMDocument swDoc = default(SwDMDocument);
            SwDMConfigurationMgr swCfgMgr = default(SwDMConfigurationMgr);
            string[] vCfgNameArr = null;
            SwDMConfiguration7 swCfg = default(SwDMConfiguration7);
            IPictureDisp pPreview = default(IPictureDisp);
            SwDmDocumentType nDocType = 0;
            SwDmDocumentOpenError nRetVal = 0;
            SwDmPreviewError nRetVal2 = 0;
            Image image = default(Image);

            //Access to interface
            swClassFact = new SwDMClassFactory();
            swDocMgr = (SwDMApplication)swClassFact.GetApplication("Post your code here");
            swDoc = (SwDMDocument)swDocMgr.GetDocument(sDocFileName, nDocType, false, out nRetVal);
            Debug.Assert(SwDmDocumentOpenError.swDmDocumentOpenErrorNone == nRetVal);
            swCfgMgr = swDoc.ConfigurationManager;

            pathLabel.Text = "Path to file: " + swDoc.FullName;
            configLabel.Text = "Active config: " + swCfgMgr.GetActiveConfigurationName();
            vCfgNameArr = (string[])swCfgMgr.GetConfigurationNames();

            foreach (string vCfgName in vCfgNameArr)
            {
                //get preview
                swCfg = (SwDMConfiguration7)swCfgMgr.GetConfigurationByName(vCfgName);
                pPreview = (IPictureDisp)swCfg.GetPreviewPNGBitmap(out nRetVal2);
                image = Support.IPictureDispToImage(pPreview);
                //insert to picturebox
                pictureBox1.BackgroundImage = image;
            }
            swDoc.CloseDoc();
        } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T19:42:36.963

您可以使用非托管 windows shell 方法来获取缩略图

[这是代码（不是小代码）](http://kodesharp.blogspot.com/2007/12/c-class-for-generating-image-thumbnails.html)

但结果远非完美。

*   调试非常困难，未指明的错误很常见
*   目标机器上必须有特定的文件阅读器可用（例如 pdf-reader for pdfs，没有在 SolidWorks 上尝试过）
*   只能在 Windows 中工作
*   性能问题
*   缩略图质量低（用 pdf 试过）

# javascript - 如何到达这些跨度并连接它们的 id

> ID：11888026
> 
> 赞同：2
> 
> 时间：2012-08-09T16:39:26.480
> 
> 标签：javascript, jquery

所以我有：

```
<li id="foo">
   <span> bar </span>
   <ul>
   <li>
      <span id="1234"></span>
   </li>
   <li>
      <span id="5678"></span>
   </li>

   </ul>
</li> 
```

我需要连接跨度 ID 并使 var foobar = "12345678"

PS 我需要从 ID 为“foo”的顶部 Li 开始工作，因为跨度 ID 可以是动态/未知的。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:43:17.747

尝试这个：

```
var foobar = "";
$('#foo span[id]').each(function(){
   foobar += this.id
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:43:21.190

用这个：

```
var foobar = '';
$('#foo li span').each(function() { 
    foobar += $(this).attr('id'); 
}); 
```

[JSFIDDLE](http://jsfiddle.net/pZDWF/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:57:32.230

其他人都在使用`.each()`. 这有点简单`.map()`...

```
var ids = $.map($("#foo span[id]"), function(el) {
                                       return el.id;
                                    }).join(""); 
```

我还使用了*has-attribute*选择器来确保您只获取`span`具有 ID 属性的元素。

***演示：http:*** [//jsfiddle.net/rgNRH/](http://jsfiddle.net/rgNRH/)

* * *

或者你可以使用原生`Array.prototype.map`...

```
var ids = $("#foo span[id]").toArray()
                            .map(function(el) {
                                    return el.id;
                                 }).join(""); 
```

***演示：http:*** [//jsfiddle.net/rgNRH/1/](http://jsfiddle.net/rgNRH/1/)

* * *

好处`.map()`是它不依赖任何外部变量，因此您可以保存和重用该函数...

```
var mappers = {
    getIDs: function(el, i) { return el.id; }
    /* other mapping functions */
}; 
```

...然后在需要时使用它...

```
var ids = $.map($("#foo span[id]"), mappers.getIDs).join(""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T16:42:30.380

像这样的东西：

```
window.concat = "";
$('#foo li span').each(function () {
  window.concat += $(this).attr('id');
});
console.log(window.concat); 
```

小提琴：http: [//jsfiddle.net/Nfsg5/1/](http://jsfiddle.net/Nfsg5/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T16:43:53.473

```
var ids = '';
$('#foo li span').attr('id',function() {
    ids += this.id;
}); 
```

**[工作样本](http://jsfiddle.net/Cv2Qt/2/)**

# cqrs - 事件溯源命令或来自外部系统的事件？

> ID：11888028
> 
> 赞同：13
> 
> 时间：2012-08-09T16:39:40.030
> 
> 标签：cqrs, event-sourcing

在大多数情况下，我理解 CQRS + ES 系统中命令和事件之间的区别。但是，有一种情况我无法弄清楚。

假设我正在构建一个个人财务跟踪系统，用户可以在其中输入借项/贷项。显然，这些是命令，一旦它们被验证，域模型就会更新并发布一个事件。然而，假设贷记/借记信息也直接来自外部系统，例如，用户的花店发送一条消息，说明他已经从用户的信用卡中收取了他经常性的母亲节递送费用。在这种情况下，消息看起来像是一个事件（收费已经发生），但消息可能格式不正确并被拒绝。那么它真的是一个命令吗？但随后需要一种发送 ACK/NACK 的方法，但这里不是这种情况（花店只有在知道借记发生后才发送消息）。

编辑：澄清一下，我不是在谈论外部系统对我的事件和/或命令一无所知。我有一个组件从外部系统接收数据，然后必须发布事件或发送命令。问题是，我的组件应该使用哪个事件或命令？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T07:55:40.910

这是有界上下文的完美示例。

在表示相同或业务流程步骤的另一个系统（或有界上下文）中发生的事件不应被视为已在接收系统中发生的事件。

花店系统借记事件的结构可能与财务跟踪系统中发生的借记事件不同。

为了解决这个问题，我将有一个端点来监听 Florist System 事件，然后我会让 Finance Tracking System 根据事件中的信息发出命令，并在需要时将其与 Finance Tracking System 中的信息结合起来。发生这种情况的地方可以被认为是财务跟踪系统的客户，或者如果你愿意的话，甚至可能是“域服务”。

在这种特殊情况下，来自 Florist 系统的事件与 Florist 系统中发生的交易信息（有界上下文）一起出现。我不会在域服务中做出任何决定，而是向财务跟踪系统域发出命令，在该域中进行决策并可能发出财务跟踪系统事件。如果 Florist 系统事件在 Finance Tracking System 中出现格式错误，您可能不想以 Request/Response 或 Ack/Nack 的方式告诉 Florist 系统。该事件是从 Florist 发布的，如果您实现类似的东西，您将破坏消息传递模式。您的消息传递基础架构应该允许您重试消息，甚至修复接收代码并使用新代码重试消息。

但是，如果您确实需要回传 Florist 有界上下文，Florist 系统可以订阅来自 Finance Tracking System 的事件，以查明交易是否已成功处理。只有在主系统决定是否发生交易时才需要这样做。

如果您描述的财务跟踪系统更像是一个事务日志，那么您唯一要做的就是不要将花店事件视为财务跟踪系统事件。在导致财务跟踪系统事件的发出命令之间放置一些东西。

编辑：

作为对您的编辑的回应。您接收组件应将命令发送到 Finance Tracking System 域，该域又会发出事件（像往常一样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-24T19:20:07.093

我在想同样的事情时发现了这个问题。

我喜欢 Mikael 的回答并投了赞成票。但是，我在 DDD/CQRS 论坛上找到了另一个采用不同方法的答案，所以我想我会把它贴在这里给其他正在寻找的人。

这是 Greg Young关于跟踪外部状态的类似问题[的引述：](https://groups.google.com/forum/#!msg/dddcqrs/V3Ikh1V3V_c/hRheJkXqttgJ)

> 在大多数库存系统中，没有命令。

或者换个说法：

> 专门跟踪外部状态的系统将没有命令。

让我们回过头来思考一下您的系统可能会如何基于这个想法发展（我们还假设您不是为自己构建它）：

*   您决定创建一个个人财务跟踪器来记录来自外部世界的交易、显示图表、汇总总计等。
*   因为事件用于跟踪状态变化，而不是命令，所以你记录了这些。您还可以在事件处理程序中编写预测，以将事件聚合为总数和图形数据点。
*   然后你得到用户。他们称赞该应用程序，但使用率仍然很低。深入挖掘后，您会发现他们仍然使用其他应用程序来跟踪财务状况，例如，本地卡片商店没有用于定期母亲节卡片的 API，他们想将外部交易“拆分”为多个，他们的银行没有在线访问，他们想要跟踪现金等。
*   因此，您添加了用户输入的交易。为此，您可以添加跟踪用户输入事务的命令。现在我们与您的问题处于同一系统。

请注意，此变体同时接受命令和事件。您不会因为您现在允许用户更改内容而返回并将所有现有事件转换为命令。相反，您有一个系统接受外部事务事件、用户输入事务的命令和事务更正（创建修改*内部*状态的事件），以及将这些内部和外部事件结合起来在应用程序中显示的预测。

不过我很好奇。事后看来，接受的答案最终是否是一个好方法？还是像 Greg 建议的那样直接记录和处理来自花店的事件会更好？

# linux - 如何更改设备的访问权限或将我的用户添加到 VirtualBox 中的磁盘组？

> ID：11888029
> 
> 赞同：2
> 
> 时间：2012-08-09T16:39:42.930
> 
> 标签：linux, virtualbox

Arch noob 在这里希望学习一些有趣的新东西。[这是我正在研究的指南](https://wiki.archlinux.org/index.php/Installing_Arch_Linux_from_VirtualBox)

在此链接中声明“您的用户必须拥有设备的写入权限”。如何在 Windows virtualbox 环境中实现这一点？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:32:43.917

Ubuntu 12.04 中 Virtual Box 的默认安装不知何故忽略了将所有用户添加到 Virtual Box 组，当然您需要拥有它才能完全运行。

但是，很容易将用户添加回 Virtual Box 组。这是您的操作方法：

1.  安装“用户和组”：

    sudo apt-get install gnome-system-tools

2.  启动终端并输入：

    用户管理员

3.  单击“管理组”按钮

4.  向下滚动到名为“vboxusers”的组，选择它并单击“属性”按钮

5.  选中您的用户名旁边的复选框

就是这样。它应该立即工作，但以防万一您可以注销并再次登录。

希望有帮助！

# jquery - Yii 中的 AJAX 事件

> ID：11888037
> 
> 赞同：0
> 
> 时间：2012-08-09T16:40:06.277
> 
> 标签：jquery, ajax, yii

如何将操作附加到复选框或选择，每次单击复选框或选择选项时都会执行该操作？
我需要这个来执行 AJAX 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:43:04.723

用这个：

```
$("input[type='checkbox']").click(function(){
//code for ajax request
}); 
```

在ajax请求的代码中，如果你想知道复选框是否被选中，使用`$(this).is(':checked')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:52:39.063

假设您使用[CHtml::checkBox()](http://www.yiiframework.com/doc/api/1.1/CHtml#checkBox-detail)生成复选框，示例如下：

```
CHtml::checkBox($name, false, array ('ajax'=>array(
                                        'type'=> 'POST',
                                        'url' => $url,
                                        'success'=> 'function(data) {
                                                        // callback function code here
                                                     }'
                ))) 
```

[关于 Yii ajax 数组的详细信息](http://www.yiiframework.com/doc/api/1.1/CHtml#ajax-detail)

# php - PHP CodeIgniter 错误日志无法正常工作

> ID：11888039
> 
> 赞同：5
> 
> 时间：2012-08-09T16:40:14.080
> 
> 标签：php, codeigniter, logging, configuration, error-handling

我在 php.ini- 中进行了以下设置

```
error_reporting = E_ALL | E_NOTICE | E_STRICT|E_WARNING
display_errors = Off
log_errors = On
error_log = "/var/log/php_errors.log" 
```

和 CodeIgniter 中的 config.php-

```
$config['log_threshold'] = 1;
$config['log_path'] = getcwd() . '/' . SYSDIR . '/logs/'; 
```

在 Index.php 文件中-

```
case 'development':
error_reporting(E_ALL);
break;

case 'testing':
case 'production':
     error_reporting(0); 
```

当它在 Index.php 中进行“开发”时，我还会在网页上看到警告和错误消息、PHP 致命错误、php_errors.log 文件中的 PHP Parse 错误。但是，如果我将其设为“生产”，则不会显示任何错误/警告，也不会记录在文件中。如何在不显示的情况下记录所有错误和消息？

（这里只提一下——文件夹 application/logs/ 是 777，我只有 index.html，上面写着“403 Forbidden”。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-09T10:58:54.803

请检查您的 config/config.php 文件并检查您的设置

```
$config['log_threshold'] = 4;

**Note :**  

0 = Disables logging, Error logging TURNED OFF
1 = Error Messages (including PHP errors)
2 = Debug Messages
3 = Informational Messages
4 = All Messages 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:49:00.400

我不完全确定，但我认为您将两件事混合在一起。

**php 设置中的error_reporting**显示了在 php 脚本执行期间创建的错误。如果您使用“desplay_errors”=关闭。PHP 不会显示任何这些错误。您已打开 log_errors 并设置了一个文件夹。所以 PHP 错误会到达 /var/log/php_errors.log 文件。

另一方面 CodeIgniter 使用功能：

```
log_message('level,'message') 
```

它用于将错误/调试/信息存储到日志文件中。如果你打电话

```
log_message('error','I'm an error!') 
```

在你的代码的某个地方，你真的应该在日志目录中有一个新的日志文件。

如果有任何 PHP 错误，内部 CodeIgniter 会使用 log_message()。我真的不确定当 display_error 设置为 Off 时它会如何表现（他会认为没有错误？）。

尝试调用您自己的**log_message**并将**display_errors**设置为**On**。我认为它应该有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-07T08:12:00.250

您必须设置 error_reporting(E_ALL); 在您的 index.php 文件中的案例“生产”下

# java - NetBeans 平台和 TinyLaF 1.4.0

> ID：11888043
> 
> 赞同：2
> 
> 时间：2012-08-09T16:40:23.780
> 
> 标签：java, swing, netbeans-7, look-and-feel

我正在使用 TinyLaF 库来自定义我的 NetBeans 平台应用程序的外观。TinyLaF 还绘制了我的主窗口的框架。当我运行（执行）应用程序时，它有时会绘制框架，有时不会。我无法弄清楚我做错了什么。以下是我的 Installer 类中扩展 ModuleInstall 的代码：

```
 public class Installer extends ModuleInstall {

        @Override
        public void restored() {

            //Set the global LookAndFeel of the application

            try {

                // continuous layout on frame resize
                Toolkit.getDefaultToolkit().setDynamicLayout(true);

                // no flickering on resize
                System.setProperty("sun.awt.noerasebackground", "true");

                // to decorate frames
                JFrame.setDefaultLookAndFeelDecorated(true);

                // to decorate dialogs
                JDialog.setDefaultLookAndFeelDecorated(true);

                File themeFile = InstalledFileLocator.getDefault().locate("Default.theme", "myapp.main", false);

                Theme.loadTheme(themeFile);

                UIManager.setLookAndFeel(new TinyLookAndFeel());

                //Remove the tab from Editor section - using the code from 
                //Geertjan's Netbeans platform tutorials
                UIManager.put("EditorTabDisplayerUI", "myapp.main.NoTabsTabDisplayerUI");

                SwingUtilities.updateComponentTreeUI(frame);

            } catch (HeadlessException | UnsupportedLookAndFeelException ex) {
            }
        }
    } 
```

# maven - Artifactory 虚拟存储库的 Nexus 代理

> ID：11888047
> 
> 赞同：3
> 
> 时间：2012-08-09T16:40:34.030
> 
> 标签：maven, nexus, artifactory

我有 Nexus 作为本地存储库管理器，并且有几个代理存储库到由 Artifactory 管理的远程存储库。除非远程存储库是虚拟存储库，否则一切正常。在这种情况下，nexus 无法在远程仓库中找到 .index。浏览虚拟仓库时确实不存在这样的文件夹。有没有办法让 nexus 管理 Artifactory 管理的虚拟仓库的本地缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:26:54.823

Artifactory 不会以标准 maven 形式 iirc 发布索引。然而，Nexus 不需要这个索引来完成它的工作，它只需要搜索远程存储库的内容。这不会影响代理工件的能力。

# javascript - 将一些参数传递给 WinJs xhr 的回调函数

> ID：11888049
> 
> 赞同：0
> 
> 时间：2012-08-09T16:40:41.823
> 
> 标签：javascript, windows-8, winjs

在 Windows 8 中，我在循环中使用 WinJs.xhr 来下载一些内容，当它到达“完成回调”之后，我想传递一个参数来检索调用 xhr 的元素。

```
 for (var k = 0 ; k < 9; k++) {
                        var title = dataArray[k].name;
                        if (title != null)
                            url = monUrl+ title;

                        WinJS.xhr({ url: url, responseType: "responseXML" })
   .done(function complete(result) {

    //I would like to retrieve the right title here for example
       var dataArray = new Array();
       var xml = result.responseXML;
 }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:31:34.963

您需要在闭包中捕获它，而对于普通的 for 循环/迭代来说，这很痛苦：

```
for (var k = 0 ; k < 9; k++) {
    (function(item) {
        var url;
        var title = item.name;
        if (title != null)
            url = monUrl+ title;

        WinJS.xhr({ url: url, responseType: "responseXML" }).done(function complete(result) {
            // I would like to retrieve the right title here for example
            var dataArray = new Array();
            var xml = result.responseXML;
            /* use your title property here */
        });
    })(dataArray[k]);
} 
```

# file-upload - 我可以为 FileUpload 控件设置默认文件夹吗？

> ID：11888051
> 
> 赞同：2
> 
> 时间：2012-08-09T16:40:50.680
> 
> 标签：file-upload

我有一个`<asp:FileUpload id="FileUpload1" runat="server"> </asp:FileUpload>`文件上传，我希望用户从我们网络上的特定文件夹上传文件。

有没有办法设置文件夹的路径，这样当他们单击浏览按钮时，它会将它们发送到：`\\Txsappblt016v\Shadow\`？

有权访问此驱动器的每个人都可以访问它。所以这是我的第一个目标。

我的第二个目标是不在客户端运行，而是在服务器端运行，因为服务器可以访问该文件夹，但并非所有用户都可以。只是为了看看我是否可以这样做，我正在使用以下代码：

```
<%@ Page Language="VB" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 

<script runat="server">

  Sub UploadButton_Click(ByVal sender As Object, ByVal e As System.EventArgs)

    ' Specify the path on the server to
    ' save the uploaded file to.
    Dim savePath As String = "c:\temp\uploads\"

    ' Before attempting to perform operations
    ' on the file, verify that the FileUpload 
    ' control contains a file.
    If (FileUpload1.HasFile) Then
      ' Get the name of the file to upload.
      Dim fileName As String = FileUpload1.FileName

      ' Append the name of the file to upload to the path.
      savePath += fileName

      ' Call the SaveAs method to save the 
      ' uploaded file to the specified path.
      ' This example does not perform all
      ' the necessary error checking.               
      ' If a file with the same name
      ' already exists in the specified path,  
      ' the uploaded file overwrites it.
      FileUpload1.SaveAs(savePath)

      ' Notify the user of the name the file
      ' was saved under.
      UploadStatusLabel.Text = "Your file was saved as " & fileName

    Else
      ' Notify the user that a file was not uploaded.
      UploadStatusLabel.Text = "You did not specify a file to upload."
    End If

  End Sub

</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>FileUpload Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
       <h4>Select a file to upload:</h4>

       <asp:FileUpload id="FileUpload1"                 
           runat="server">
       </asp:FileUpload>

       <br /><br />

       <asp:Button id="UploadButton" 
           Text="Upload file"
           OnClick="UploadButton_Click"
           runat="server">
       </asp:Button>    

       <hr />

       <asp:Label id="UploadStatusLabel"
           runat="server">
       </asp:Label>        
    </div>
    </form>
</body>
</html> 
```

[资源](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.aspx)

[这个论坛](http://forums.asp.net/t/1273605.aspx)说不能做...

# c# - 在 Objective-C 中将 .NET DateTime.Ticks 属性转换为日期

> ID：11888053
> 
> 赞同：2
> 
> 时间：2012-08-09T16:41:04.490
> 
> 标签：c#, .net, objective-c, ios, date

我有一个时间戳，表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数（根据[http://msdn.microsoft.com/en-us/library/system.日期时间.ticks.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)）。该值由用 C# 编写的服务器生成，但我需要在 iOS 上将其转换为 Objective-C 中的日期。

例如，时间戳 634794644225861250 应该给出 2012 年 8 月 2 日的日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:57:05.880

此 C# 代码可能会对您有所帮助：

```
// The Unix epoch is 1970-01-01 00:00:00.000
DateTime   UNIX_EPOCH = new DateTime( 1970 , 1 , 1 ) ;

// The Unix epoch represented in CLR ticks.
// This is also available as UNIX_EPOCH.Ticks
const long UNIX_EPOCH_IN_CLR_TICKS = 621355968000000000 ;

// A CLR tick is 1/10000000 second (100ns).
// Available as Timespan.TicksPerSecond
const long CLR_TICKS_PER_SECOND = 10000000 ;

DateTime now       = DateTime.Now                        ; // current moment in time
long     ticks_now = now.Ticks                           ; // get its number of tics
long     ticks     = ticks_now - UNIX_EPOCH_IN_CLR_TICKS ; // compute the current moment in time as the number of ticks since the Unix epoch began.
long     time_t    = ticks / CLR_TICKS_PER_SECOND        ; // convert that to a time_t, the number of seconds since the Unix Epoch
DateTime computed  = EPOCH.AddSeconds( time_t )          ; // and convert back to a date time value

// 'computed' is the the current time with 1-second precision. 
```

一旦你有了你的`time_t`值，自 Unix 纪元开始以来的秒数，你应该能够在 Objective-C 中获得一个 NSDATE：

```
NSDate* myNSDate = [NSDate dateWithTimeIntervalSince1970:<my_time_t_value_here> ] ; 
```

参见：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:11:29.333

在 iOS 上，您不能使用 dateWithString，但您仍然可以轻松地做到这一点。此解决方案应该适用于 iOS 和 Mac。（注意：我在这里输入，未经测试）

```
@interface NSDate (CLRTicks)

+(NSDate*)dateWithCLRTicks:(long)ticks;

@end

@implementation NSDate (CLRTicks)

+(NSDate*)dateWithCLRTicks:(long)ticks
{
    return [NSDate dateWithTimeIntervalSince1970: (ticks-621355968000000000L)/10000000.0]
}

@end 
```

它基本上与 Nicholas 发布的解决方案相同，只是形式更好。您可能应该通过象征性地定义常量来使它变得更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T15:30:35.443

为 NSDate 添加一个类别：

```
@implementation NSDate (CLRTicks)

+ (NSDate *)dateWithCLRTicks:(int64_t)ticks {
    return [NSDate dateWithCLRTicks:ticks withTimeIntervalAddition:0.0];
}

+ (NSDate *)dateWithCLRTicks:(int64_t)ticks withTimeIntervalAddition:(NSTimeInterval)timeIntervalAddition {
    const double GMTOffset = [[NSTimeZone defaultTimeZone] secondsFromGMT];
    const int64_t CLROffset = 621355968000000000;
    double timeStamp = ((double)(ticks - CLROffset) / 10000000.0) - GMTOffset + timeIntervalAddition;

    return [NSDate dateWithTimeIntervalSince1970:timeStamp];
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:30:00.143

没有做所有的计算，但你的闰年计算不完整。

每 4 年有一个闰年。但是你每 100 年跳过一次。而且您不会每 400 年跳过一次，这就是为什么 2000 年是闰年而 1900 年不是。

例如：

2012 年是闰年（能被 4 整除但不能被 100 整除）2100 不是闰年（能被 100 但不能被 400 整除）2400 是闰年（能被 400 整除）

在可可中，您可以使用 NSDate。

```
NSDate* reference = [NSDate dateWithString:@"0001-01-01 00:00:00 +0000"];
NSDate* myDate = [NSDate dateWithTimeInterval: (ticks/10000000.0)
                                    sinceDate: reference]; 
```

# android - 将 uuid.h 包含到 Android NDK 项目中

> ID：11888055
> 
> 赞同：5
> 
> 时间：2012-08-09T16:41:09.717
> 
> 标签：android, c, android-ndk, uuid

我正在使用 NDK 将 C 程序移植到 Android 上。该程序使用`uuid.h`或`uuid/uuid.h`库取决于哪个可用。当我编译程序时，给出错误消息`uuid.h: No such file or directory`。

我是 NDK 的新手，所以我不完全确定问题出在哪里。我在 Windows 上使用 cygwin；电脑没有`uuid.h`库还是安卓不支持？是否有解决方法-我可以以某种方式将其包含在编译器设置中吗？

最后，程序只使用这样的库：

```
char     *s;
uuid_t    uu;
uuid_create(&uu, NULL);
uuid_to_string(&uu, &s, 0); 
```

也许我可以用我自己的 C 代码来模拟这种行为？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:08:12.947

`uuid.h`不是 NDK 的一部分。您可以通过运行检查`find /opt/android-ndk-r8b/ -name uuid.h`

您可能可以从 AOSP 中提取您需要的代码。我`external/e2fsprogs/lib/uuid/uuid.h`在master分支中找到了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-03T19:48:25.653

我通过选择[任意](https://android.googlesource.com/platform/external/e2fsprogs/+/android-6.0.1_r81/lib/uuid/)版本的库并将其编译为静态库来解决。我将文件夹中的所有文件放在一个名为`uuid`. 然后我`CMakeLists.txt`在外部目录中添加了以下内容：

```
cmake_minimum_required(VERSION 3.8)

project(uuid)

set(CMAKE_INCLUDE_CURRENT_DIR ON)

set (SOURCE_FILES
    uuid/clear.c
    uuid/compare.c
    uuid/copy.c
    uuid/gen_uuid.c
    uuid/isnull.c
    uuid/pack.c
    uuid/parse.c
    uuid/unpack.c
    uuid/unparse.c
    uuid/uuid_time.c
)

add_definitions(
    -DHAVE_INTTYPES_H
    -DHAVE_UNISTD_H
    -DHAVE_ERRNO_H
    -DHAVE_NETINET_IN_H
    -DHAVE_SYS_IOCTL_H
    -DHAVE_SYS_MMAN_H
    -DHAVE_SYS_MOUNT_H
    -DHAVE_SYS_PRCTL_H
    -DHAVE_SYS_RESOURCE_H
    -DHAVE_SYS_SELECT_H
    -DHAVE_SYS_STAT_H
    -DHAVE_SYS_TYPES_H
    -DHAVE_STDLIB_H
    -DHAVE_STRDUP
    -DHAVE_MMAP
    -DHAVE_UTIME_H
    -DHAVE_GETPAGESIZE
    -DHAVE_LSEEK64
    -DHAVE_LSEEK64_PROTOTYPE
    -DHAVE_EXT2_IOCTLS
    -DHAVE_LINUX_FD_H
    -DHAVE_TYPE_SSIZE_T
    -DHAVE_SYS_TIME_H
    -DHAVE_SYS_PARAM_H
    -DHAVE_SYSCONF
)

add_library(uuid STATIC ${SOURCE_FILES})
install(TARGETS uuid DESTINATION lib) 
```

最后，我确保以 NDK 为目标，向 cmake 发出以下调用：

```
mkdir -p build-android-arm
cd build-android-arm
cmake ANDROID_ARGS="-DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_TOOLCHAIN_FILE=/opt/android-ndk/build/cmake/android.toolchain.cmake \
    -DANDROID_NDK=/opt/android-ndk \
    -DANDROID_NATIVE_API_LEVEL=23 \
    -DANDROID_TOOLCHAIN=clang" \
    -DANDROID_ABI=armeabi-v7a .. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-15T09:06:11.783

文章[UUIDs and Linux: Everything you ever need to know](http://liquidat.wordpress.com/2013/03/13/uuids-and-linux-everything-you-ever-need-to-know/) 建议使用

```
$ cat /proc/sys/kernel/random/uuid
eaf3a162-d770-4ec9-a819-ec96d429ea9f 
```

该命令确实适用于 Android，尽管您的程序必须读取此 ( `/proc/sys/kernel/random/uuid`) 文件而不是调用库。

所以如果你在`String getStringFromFile(String filePath)` [这里](https://stackoverflow.com/a/13357785/755804)，

```
getStringFromFile("/proc/sys/kernel/random/uuid") 
```

将返回一个 uuid，例如，您可以将其打印到日志中：

```
D/~~~     ( 5065): uuid=418ebd25-4f6e-4431-b31e-784703ea6093 
```

（在三星 GS4 上运行）

# node.js - MongoDB Geo 搜索两个集合

> ID：11888056
> 
> 赞同：0
> 
> 时间：2012-08-09T16:41:15.800
> 
> 标签：node.js, mongodb, mongoose

我正在尝试找出一种对两个集合进行地理查询的方法：

1.  `Person {name, age, groupid}`
2.  `Groups (id, name, geoLocation[x,y])`

我需要找到所有附近的团体`age > 18`

知道如何在不必查询每个找到的人的组的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:50:21.220

您在 MongoDB 中没有连接，因此您需要找到另一种解决方法。

我会想到的下一个可行的方法是将一组年龄范围与组记录一起存储：

```
{
    _id: {},
    name: {},
    geoLocation: {},
    age_groups: {
        'gt18': 1
    },
} 
```

然后我会查询那个age_groups.gt18 字段并提取所有记录。当然，这确实意味着您将需要一些东西来使该字段保持最新。有几种方法：

*   MR（Map Reduce）这实际上需要先输出到汇总表，所以我真的不推荐这个。
*   基于事件的预聚合。当用户加入或离开组时，您会得到他们的年龄并相应地更新聚合字段。

我个人会选择基于事件的预先聚合的做事方法

# javascript - javascript条件运算符格式文本

> ID：11888058
> 
> 赞同：0
> 
> 时间：2012-08-09T16:41:19.553
> 
> 标签：javascript, regex, format, conditional, operator-keyword

我正在尝试根据文本数据是否包含字符“-”，有条件地将文本数据格式化为“红色”或“黑色”。文本作为文件生成，并且是 .shtml 文件中的“包含”。

您可以在条件运算符中使用正则表达式模式测试吗？

我究竟做错了什么？

```
function colourful(a,b,c)
{
    var colour, pat, place,label,linkto;
    pat=new RegExp("-");
    place= a;
    label= b;
    linkto=c;
    colour=pat.test(label)?"red":"black";
    document.getElementById(place).innerHTML=label.fontcolor(colour);
    document.getElementById(place).href=linkto;
} 
```

示例函数调用；

```
colourful("in_the_document","£1,199.09","profit.shtml");
colourful("in_the_document","-£1,199.09","profit.shtml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:51:00.133

正如[Christofer Eliasson](https://stackoverflow.com/a/11888105/1529630)所说，您可以使用 indexOf。但如果你想使用`RegExp`，你有[`search`](http://www.w3schools.com/jsref/jsref_search.asp)：

```
colour = label.search(/-/) === -1 ? "red" : "black"; 
```

它也适用于字符串：

```
colour = label.search("-") === -1 ? "red" : "black"; 
```

但`test()`也应该工作。我已经尝试过你的代码，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:43:26.903

您可以[`yourstring.indexOf("-")`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)用来测试字符串是否包含某个字符串/字符。如果返回`-1`字符串中不包含字符，否则返回第一次出现的索引。

我猜你的代码是：

```
colour = label.indexOf("-") === -1 ? "red" : "black"; 
```

# objective-c - 如何在 iOS 中为按钮添加声音？

> ID：11888059
> 
> 赞同：6
> 
> 时间：2012-08-09T16:41:18.913
> 
> 标签：objective-c, ios, nssound

我想在按下按钮时播放声音。此外，还有不止一种声音。我正在使用 Xcode 4.4.1 和 Storyboard。

在 .h 文件中

```
{
    IBOutlet UIButton *playSound;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-09T17:38:47.247

我认为写这种类型的例子会很有趣，所以我写了它。它演示了如何在按下按钮时播放不同的随机声音：

```
-(IBAction)buttonPressedWithSound:(id)sender {

    int randomSoundNumber = arc4random() % 4; //random number from 0 to 3

    NSLog(@"random sound number = %i", randomSoundNumber);

    NSString *effectTitle;

    switch (randomSoundNumber) {
        case 0:
            effectTitle = @"sound1";
            break;
        case 1:
            effectTitle = @"sound2";
            break;
        case 2:
            effectTitle = @"sound3";
            break;
        case 3:
            effectTitle = @"sound4";
            break;

        default:
            break;
    }

    SystemSoundID soundID;

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:effectTitle ofType:@"caf"];
    NSURL *soundUrl = [NSURL fileURLWithPath:soundPath];

    AudioServicesCreateSystemSoundID ((CFURLRef)soundUrl, &soundID);
    AudioServicesPlaySystemSound(soundID);  
} 
```

**解释：**

*   在您的项目中添加四个声音：*sound1.caf*、*sound2.caf*、*sound3.caf*和*sound4.caf*。

*   将 AudioToolbox 框架导入您的项目。并包含在 .h 中`#import <AudioToolbox/AudioToolbox.h>`。

*   不要忘记通过 将您的按钮连接到*buttonPressedWithSound*`IBAction`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-19T06:59:15.847

我找到了这种方式，它对我有用

```
SystemSoundID soundID;
NSString *soundPath = [[NSBundle mainBundle] pathForResource:ClickSoundFile ofType:FileTypemp3];
NSURL *soundUrl = [NSURL fileURLWithPath:soundPath];
AudioServicesCreateSystemSoundID ((__bridge CFURLRef)soundUrl, &soundID);
AudioServicesPlaySystemSound(soundID); 
```

*笔记

ClickSoundFile : 声音文件名 FileTypemp3 : 文件类型 mp3

# html - html5，导航和部分，如何从导航元素单击加载部分中的页面

> ID：11888066
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:41:29.213
> 
> 标签：html, css, layout

我是 html5 的新手。我有一个导航标签。我想用左侧的导航创建一个垂直分割。

如果用户单击导航中的链接，页面将显示在标签的右侧。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:48:16.743

在 jQuery 中，你会做这样的事情：

```
$("nav > a").click(function(){
    var url = $(this).attr("href");
    $("section#content").load(url);
    return false;
}); 
```

# java - 知道文件是否已下载的代码

> ID：11888077
> 
> 赞同：0
> 
> 时间：2012-08-09T16:42:11.567
> 
> 标签：java, php, file, triggers, download

我想知道是否有办法知道文件是否已完全下载。即，下载文件后是否可以触发某些操作（例如向服务器发送消息或提醒用户等）。

可能在java、php中。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:58:27.253

尽管有相反的评论，但这*是*可能的，尽管它不适合胆小的人，因为它需要一些 HTTP 协议知识以及对文件流的理解。

假设 PHP ...

1.  通过 PHP 脚本运行文件下载 - 即不要让 Web 服务器直接从磁盘提供文件，让 php 脚本返回它。
2.  告诉 PHP 脚本`ignore_user_abort()`——这将允许 php 脚本在用户关闭连接后继续运行
3.  发送一个`Connection: close`标头*和*一个`Content-Length: 1234`标头，其中 1234 是所服务文件的大小。
4.  使用 将文件流式传输到客户端`fwrite`，跟踪您输出的字节数。一旦输出字节数达到文件大小，你就知道你已经完成了。客户端将关闭连接，但您的脚本将继续运行。
5.  做任何你想通知自己或数据库或文本日志文件下载成功完成的事情。

不过要小心，因为在 Web SAPI 中，您很容易遇到 PHP 的最大时间限制。

* * *

*更新：*

值得一提的是，如果您这样做，您还应该`connection_aborted`在输出循环中添加一个检查，这样如果客户端在完成传输之前中止连接，您就不会继续流式输出。这应该是常识，但不要说我没有警告过你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:59:12.307

只需通过 phpscript 发送文件.. 例如[http://exmaple.com/download.php?filename=some_filename.txt](http://exmaple.com/download.php?filename=some_filename.txt)

```
$file=$_GET['filename'];
if (file_exist($file)){
 send_message_to_somebody(); //DO what ever you want here and then

 $mime = finfo_file(finfo_open(FILEINFO_MIME_TYPE), $file);
 header("Content-Type: " . $mime);
 header("Content-Transfer-Encoding: binary");
 header('Accept-Ranges: bytes');
 header('Content-Disposition: attachment; filename="' .  basename($file).'"');
 header('Content-Length: ' . filesize($file));
 readfile($file);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:06:32.270

将信息写入数据库，如果下载被取消/中止，“is_downloaded”之类的列将为0，而不是1...描述不佳，没有时间。

这里重要的是**_destruct()**，它是下载完成的触发器。

```
<?php

class Download
{
  protected $file;
  private $session;
  private $_last_insert_id;

  public function __construct($file, $session) 
  {
        $this->file = $file;
        $this->session = $session;
  }

  public function send()
  {

        $info = pathinfo($this->file);

        $query = DB::insert('downloads', array('user_id', 'file', 'path', 'start'))
        ->values(array($this->session->get('id'), $info['basename'], $this->file, DB::expr('NOW()')))
        ->execute();

        $this->_last_insert_id = $query[0];

        $this->session->set('downloading', 1);

        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename="'.$info['basename'].'"');
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($this->file));

        readfile($this->file);
  }

  public function __destruct()
  {
    $aborted = connection_aborted();
    $this->session->set('downloading', 0);
    $query = DB::update('downloads')->set(array('stop' => DB::expr('NOW()')))->where('id', '=', $this->_last_insert_id)->execute();
  }

} 
```

# c - C中的数组和strpbrk

> ID：11888082
> 
> 赞同：0
> 
> 时间：2012-08-09T16:42:25.250
> 
> 标签：c

如果我的数组是：

```
char* String_Buffer = "Hi my name is <&1> and i have <&2> years old."
char* pos = strpbrk(String_buffer, "<"); 
```

现在 pos 是：

> " <&1> 而我有 <&2> 岁。"

但我需要“嗨，我的名字是”。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:43:34.953

首先，确保您正在使用的字符串位于可修改内存¹中：

```
char String_Buffer[] = "Hi my name is <&1> and i have <&2> years old." 
```

然后，在你找到的位置剪断你的绳子`<`：

```
char* pos = strpbrk(String_buffer, "<");
if(pos!=NULL)
{
    /* changing the '<' you found to the null character you are actually
     * cutting the string in that place */
    *pos=0;
} 
```

打印`String_Buffer`现在将输出`Hi my name is`。如果您不想要最后的空间，只需`pos`向后移动一个元素（注意不要在开始之前移动`String_Buffer`）。

* * *

1.  在您的代码中，您声明了一个`char`指针并使其指向一个不可修改的字符串文字（这就是您通常编写的原因；在这种情况下，相反，我们正在初始化一个本地数组，我们可以随意更改它.***`const`*** `char * str = "asdasads";``char`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:47:38.777

如果`start`单独跟踪，则可以“切出”缓冲区的一部分：

```
char *start = String_Buffer;
char *end = strpbrk(String_Buffer, "<");

if (end) {
    /* found it, allocate enough space for it and NUL */
    char *match = malloc(end - start + 1);

    /* copy and NUL terminate */
    strncpy(match, start, end - start);
    match[end - start] = '\0';

    printf("Previous tokens: %s\n", match);
    free(match);
} else {
    /* no match */
} 
```

要遍历缓冲区打印每个令牌，您只需将其提升到一个循环中：

```
char *start = String_Buffer, *end, *match;

while (start) {
    end = strpbrk(start, "<");
    if (!end) {
        printf("Last tokens: %s\n", start);
        break;
    } else if (end - start) {
        match = malloc(end - start + 1);

        /* copy and NUL terminate */
        strncpy(match, start, end - start);
        match[end - start] = '\0';

        printf("Tokens: %s\n", match);
        free(match);

        end++; /* walk past < */
    }

    /* Walk to > */
    start = strpbrk(end, ">");
    if (start) {
        match = malloc(start - end + 1); /* start > end */
        strncpy(match, end, start - end);
        match[start - end] = '\0';

        printf("Bracketed expression: %s\n", match);
        free(match);
        start++; /* walk past > */
    }
} 
```

# wcf - WIF ChannelActingAs 来自 WCF 的访问声明

> ID：11888083
> 
> 赞同：2
> 
> 时间：2012-08-09T16:42:24.893
> 
> 标签：wcf, wif, claims-based-identity

我想从 WCF 服务访问添加到 UI 层中当前主体的自定义声明。我有一个 Web 应用程序，一旦用户通过 STS 身份验证，就会向 CurrentPrincipal 添加声明。这工作正常。

```
 protected void WSFederationAuthenticationModule_SecurityTokenValidated(object sender, SecurityTokenValidatedEventArgs args)
    {
        var customPrincipal = new ClaimsPrincipal(args.ClaimsPrincipal);
        var service = ServiceLocator.Current.GetInstance<IServices>();

        Thread.CurrentPrincipal = customPrincipal;
        var result = service.GetPemissions();

        foreach (var claim in result.Claims)
            customPrincipal.Identities.First().Claims.Add(new Claim(claim.ClaimType, claim.Value));                      

        Thread.CurrentPrincipal = customPrincipal;
        args.ClaimsPrincipal = customPrincipal;
    } 
```

在某些时候，我想向 WCF 服务发出请求，并将声明传递给该服务。如果我使用 CreateChannelActingAS 传入引导令牌，我不会获得从上一步添加到主体的声明。

```
var claimsPrincipal = Thread.CurrentPrincipal as IClaimsPrincipal;
var securityToken = claimsPrincipal.Identities.First().BootstrapToken;
using (var channel = channelFactory.Value.CreateChannelActingAs(securityToken) as IClientChannel)
{
try
  {
      invocation.ReturnValue = invocation.Method.Invoke(channel, invocation.Arguments);
  { ... 
```

有没有办法在 WCF 服务中构造 ClaimsPrincipal 并遇到在 UI 层中添加的其他声明？我可以创建一个新的 securityToken 并通过通道传递它，还是有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:47:03.963

Bootstraptoken 实际上是最初创建 WIF 身份的令牌，因此它不会包含在初始创建后添加或转换的任何声明。WIF 的工作方式（使用安全令牌）实际上意味着调用客户端永远不能以任何方式操纵令牌内容（或者至少接收方不应该能够验证此类恶意令牌）。

根据选择的 IDM 架构，有一些关于如何进行的选项。最简单的选择是再次调用 STS 并在 RequestSecurityToken 请求中指定所需的附加声明。但是，STS 正在考虑接受或拒绝传入的声明，并且在自定义 STS 代码中有多种处理此问题的选项。如果无法控制 STS（并且无法设置中间转发器），那么困难的方法可能是使用额外的 WCF 安全性，例如支持令牌。如果要在 WCF 道路上进一步委派这些，则需要手动配置和操作。

不过需要注意的是，身份管理模型本质上是信任关系的集合，并且通过允许 STS 客户端指定站点范围（或令牌分发/联合/等的任何地方）有效声明是相当阴暗的设计。毕竟，由于声明现在来自 WCF 调用者，因此可以简单地将它们作为 WCF 方法调用中的参数传递，无论如何具有完全相同的安全级别。将它们添加到 WIF 身份令牌（正确）的唯一好处是它们将在 ActAs/OnBehalfOf 情况下自动委托/共享。

# javascript - 多次绘制小位图到 ?

> ID：11888084
> 
> 赞同：1
> 
> 时间：2012-08-09T16:42:26.580
> 
> 标签：javascript, gwt, canvas

我正在使用 gwt 绘制到画布上。每次鼠标移动时，我都会在屏幕上绘制 40 像素 x 40 像素的位图 50 次。看起来像：

```
void onDraw() {
    for (int x = 0; x < 10; x++) {
        for (int y = 0; y < 5; y++) {
            canvasContext.drawImage(srcImage, x, y, ...);
        }
    }
} 
```

这在桌面浏览器和 iphone/ipad 上表现得非常好。在 android 上它基本上无法使用，绘图以大约 2 fps 的速度爬行。

我想知道是否有任何有效的方法可以在 android 上有效地绘制这个小位图。我尝试了一些技巧，但并没有真正改善。android 浏览器的实现真的落后于它的 ios 浏览器吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:28:50.027

这只是由于某种原因直接绘制到画布上的 android 失败。看

[Android上的Html5画布动画慢](https://stackoverflow.com/questions/11557651/html5-canvas-animation-slow-on-android)

一些提高性能的开发技巧

[http://www.html5rocks.com/en/mobile/touch/#toc-foo](http://www.html5rocks.com/en/mobile/touch/#toc-foo)

设备基准测试的一些性能

[http://www.scirra.com/blog/85/the-great-html5-mobile-gaming-performance-comparison](http://www.scirra.com/blog/85/the-great-html5-mobile-gaming-performance-comparison)

如您所见，机器人确实落后很多。

一些解决方法可能是尝试为实体使用动画 div 单元格，而不是直接在画布上绘制。自己没有尝试过，但它可能会表现得更好。

也尝试小跑你的鼠标移动，我怀疑你正在触发许多鼠标移动事件，这些事件实际上可能每帧绘制一次多于一次的 quandangles。您应该有某种类型的更新函数，每帧只调用一次，由某个时间的计时器管理。然后，如果满足应该移动的条件，您的更新应该更新矩形。而不是尝试根据移动鼠标的事件重绘。您的更新函数应该获取鼠标的坐标，并更新矩形对象的位置。然后让你的绘制函数在你的更新函数之后被调用以实际呈现在屏幕上

```
init {  //called once on load
   create array of rectangles 50, with default coordinates
}
update { //called once per frame
   get coordinates of mouse
   iterate though array of rects and update coordinates based on mouse position
}
draw { //called after update
   iterate though array of rects and draw them
}

timer { //manages your fps and calls update and draw
   update()
   draw()
}.scheduleRepeating(1000ms/fpsRate) 
```

现在我知道这是一些 ghetto 伪代码，但这就是你应该如何渲染对象。也不要将 for 嵌套在 for 中...这非常糟糕，因为它效率低下，您应该改为进行调制

```
for(int i =0;i < rectArr.length; i++) {
  x = i%10 * rectW
  y = i%5  * rectH
} 
```

纽瓦斯祝你好运

# powershell - 如何使用powershell从ftp下载多个文件

> ID：11888090
> 
> 赞同：0
> 
> 时间：2012-08-09T16:42:41.397
> 
> 标签：powershell

我已经有一个循环，列出了 FTP 目录中的文件摘要。$outputBuffer 包含

```
/archive/20120806_141250.txt
/archive/20120806_142114.txt
/archive/20120807_090149.txt
/archive/20120808_090348.txt 
```

我有一个 For-EachObject 用完整的 ftp 地址替换 /archive：

```
$outputBuffer | Foreach-Object {
    $_ -replace 'archive/', 'ftp://ftp.test.com/outbound/archive/'
    } 
```

我的结果是：

```
ftp://test.com/outbound/archive/20120806_141250.txt
ftp://test.com/outbound/archive/20120806_142114.txt
ftp://test.com/outbound/archive/20120807_090149.txt
ftp://test.com/outbound/archive/20120808_090348.txt 
```

替换后，如何在此 ForEach-Object 语句中添加一行以下载每个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:16:23.417

尝试这个：

```
$webclient = New-Object System.Net.WebClient
$webclient.credentials = new-object system.net.networkcredential("user", "password")
$outputBuffer | Foreach-Object {
    $filePath = $_ -replace 'archive/', 'ftp://ftp.test.com/outbound/archive/'
    #Adjust D:\local\ to be an actual folder.
    $fileDest = $_ -replace '/archive/', 'D:\local\'
    $uri = New-Object System.Uri($filePath)
    $webclient.DownloadFile($uri, $fileDest)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:06:31.000

```
$links = $outputBuffer | Foreach-Object {
    $_ -replace 'archive/', 'ftp://ftp.test.com/outbound/archive/'
    } 
```

接着

```
foreach($link in $links)
{
Invoke-WebRequest $link
} 
```

这应该下载 PWD 中的文件

# javascript - 获取元素的url

> ID：11888097
> 
> 赞同：0
> 
> 时间：2012-08-09T16:43:07.640
> 
> 标签：javascript, jquery, arrays, url

我做一个脚本。得到元素的href。但我只想要这个网址的最后一部分。我做这个：

```
var newURL = $(".list-portfolio a").attr("href");
    pathArray = newURL.split( '/' ),
        secondLevelLocation = pathArray[0];

    var newPathname = "";
    for ( i = 3; i < pathArray.length; i++ ) {  
      newPathname += "/";
      newPathname += pathArray[i];
    } 
```

这导致`/portfolio/ruimzicht.html`这几乎是好的。我怎样才能删除第一个/。

你有任何改进代码的技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:50:04.777

为什么不使用数组函数？

```
var pathArray = ["portfolio", "ruimzicht.html"];

// build a string by inserting a forward slash between all elements
pathArray.join("/");

// results in: portfolio/ruimzicht.html 
```

如果你只是对最后一部分感兴趣，你可以把它缩小成一个衬里：

```
url.split("/").pop(); // yields "ruimzicht.html" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:46:33.873

尝试使用它来避免第一次连接`/`：

```
for ( i = 3; i < pathArray.length; i++ )
{  
    if(i != 3)
        newPathname+= "/";

    newPathname += pathArray[i];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:50:22.477

```
newPathname = newPathname.trim("/"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:51:51.270

I believe that doing the URL parsing this way makes the code brittle and bug prone. Instead of doing all the string splitting and/or regex operations, you can use a 3rd party plug-in like [jQuery-URL-Parser](https://github.com/allmarkedup/jQuery-URL-Parser), which allows you to get the URL from an element and decomposes it into different parts, so that you can access the filename or the host name etc. Here is an example on how to use it in your case.

```
var url = $.url($(".list-portfolio a").attr("href"));
url.attr('file'); // this will give you ruimzicht.html 
```

It makes the code simpler and easier to read and maintain.

# c++ - 不使用标准函数反转字符串

> ID：11888106
> 
> 赞同：1
> 
> 时间：2012-08-09T16:43:32.010
> 
> 标签：c++, string, recursion, reverse

我最近在一次采访中被问到这个问题。作为一个刚毕业的学生，​​并且只编程了大约 2 年（所有学校工作），我不知所措。我有一个模糊的想法，但我确定我失败了。这是我写的：

```
string Reverse(string word, string reversed)
{
    if(word.length() == 0)
    {
        return reversed;
    }
    else
    {
        string temp;
        reversed = word.substr(0,1) + reversed;
        temp = word.substr(1);
        Reverse(temp, reversed);
    }

    return reversed;
} 
```

现在我到家了，我正在测试它，返回的只是输入中的第一个字母。我对递归的概念模糊熟悉，但我显然在这方面失败了。非常感谢任何帮助/指针/建议。谢谢你。

编辑：在 Dennis Meng 的帖子之后，我做了以下更改：

```
string Reverse(string word, string reversed)
{
    if(word.length() == 0)
    {
        return reversed;
    }
    else
    {
        string temp;
        reversed = word.substr(0,1) + reversed;
        temp = word.substr(1);
        return Reverse(temp, reversed);
    }
} 
```

现在，我得到了正确的返回值。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:56:34.210

出了什么问题：

```
 else
    {
        string temp;
        reversed = word.substr(0,1) + reversed;
        temp = word.substr(1);
        Reverse(temp, reversed); // <-- Here's your problem
    }

    return reversed;
} 
```

你知道调用应该返回正确的答案，那么为什么不直接返回呢？换句话说，如果你这样做了怎么办

```
 else
    {
        string temp;
        reversed = word.substr(0,1) + reversed;
        temp = word.substr(1);
        return Reverse(temp, reversed);
    }
} 
```

反而？为什么你的代码只返回第一个字母的细节涉及按引用/按值传递；由于传递值的东西，你从来没有真正使用过递归调用中所做的事情。（你只是打了电话，然后扔掉了它返回的东西。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:49:59.653

我不确定你为什么在这里使用递归。这真的没有必要：

```
string Reverse(string word)
{
    string reversed = "";

    if(word.length() == 0)
    {
        return reversed;
    } 

    for (int i = word.length()-1; i>=0; i--){
        reversed = reversed+word[i];
    }

    return reversed;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:51:31.383

```
string Reverse(string word, string reversed) 
{
    ...
    Reverse(temp, reversed); 
```

首先，您应该`word`通过 const 引用和`reversed`引用传递。当您调用递归函数时，您正在制作每个字符串的副本，因此最外面的函数看不到它们所做的任何事情。另一种选择是将递归函数的结果分配给`reversed`，但是您仍然到处都有大量的字符串副本。所以：通过引用传递变量。

第二：有更简单的方法来反转字符串：

```
 string Reverse(string word) //caller should _not_ see my changes, so I pass by value
 {
     for(int i=0; i<word.size()/2; ++i) { //for each letter in the first half
         int otherindex = word.size()-1-i; //find the letter on the other half
         char t = word[i];  //and swap them
         word[i] = word[otherindex];
         word[otherindex] = t;
     }
     return word; //return the result
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T16:55:07.100

字符串只不过是一个字符数组。通常在这种情况下，您应该使用一个字符数组来解释算法。这是一个更好的方法。

```
void reverse(char* str, int len)
{
    for (int i = 0, j = len -1 ; i < len / 2; ++i, --j) {
         // Swap the values as i and j.
         int temp = str[i];
         str[i] = str[j];
         str[j] = temp;
    }
} 
```

如果在 Java 中提出同样的问题，您必须确保将字符串转换为 char[] 数组反转它，然后形成一个字符串。这有助于保持创建的对象数量最少。至少，您应该使用 StringBuilder。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T18:48:26.543

这是另一种解决方案（类似于已经发布的解决方案）。但是现在我发现这个解决方案不适合你，因为它使用了 std 的东西。

```
std::string reverse(std::string const& character_queue_) {
    using namespace std;
    string result;
    if(!character_queue_.empty()) {
        vector<char> character_stack;
        std::copy(character_queue_.begin(),character_queue_.end(),std::back_inserter(character_stack));
        while(!character_stack.empty()) {
           result.push_back(character_stack.back());
           character_stack.pop_back();
        }
    }
    return result;
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-28T22:02:51.193

只是为了建议一种更好的处理递归的方法：

在 C++ 中使用递归进行字符串反转：

```
#include <iostream>
#include <string>
using namespace std;

string reverseStringRecursively(string str){
    if (str.length() == 1) {
        return str;
    }else{
        return reverseStringRecursively(str.substr(1,str.length())) + str.at(0);
    }
}

int main()
{
    string str;
    cout<<"Enter the string to reverse : ";
    cin>>str;

    cout<<"The reversed string is : "<<reverseStringRecursively(str);
    return 0;
} 
```

# javascript - 需要 Javascript 重复/循环帮助

> ID：11888113
> 
> 赞同：2
> 
> 时间：2012-08-09T16:43:58.647
> 
> 标签：javascript, jquery

我有以下 javascript

```
$('.goto1').click(function() { 
    $('#mttslider').cycle(0); 
    return false; 
}); 
```

我想要的是它像这样重复：

```
$('.goto1').click(function() { 
    $('#mttslider').cycle(0); 
    return false; 
}); 

$('.goto2').click(function() { 
    $('#mttslider').cycle(1); 
    return false; 
}); 

$('.goto3').click(function() { 
        $('#mttslider').cycle(2); 
        return false; 
    }); 

etc... 
```

这样我就可以让每个触发器 - .goto(n) - 来触发循环功能。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:47:48.543

```
$('[class^=goto]').click(function() { 
    var index = parseInt( this.className.replace('goto',''), 10 );
    $('#mttslider').cycle(index); 
    return false; 
}); 
```

如果您的元素没有`class`例外`goto1, goto2`等，这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:04:34.023

```
var listener = function(index){
 var selector = '.goto'+ index;
 $(selector).click(function() { 
    $('#mttslider').cycle(index-1); 
    return false; 
 }); 
} 
```

现在您可以调用从 i 到 n的*侦听器函数来注册新的事件侦听器并调用具有可变索引值的**循环*函数

例如：

```
listener(3);
listener(5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:41:13.853

好吧，假设您知道`n`开始的范围，我可能会这样做：

```
var slider = $('#mtslider');

for(var i=1; i<=n; i++)
{
    (function(j){ 
        $('.goto' + j).on('click', function(){
            slider.cycle(j)
        });
    })(i);
} 
```

因为`$('#mtslider')`是引用一个 ID，我假设它不会改变，所以你不必多次运行 jquery 选择器。除此之外，只需遍历`int`范围中的每个`[1,n]`并使用闭包来创建点击处理程序。如果您不使用闭包，`i`则单击该项目后的值很可能会有所不同。

如果`n`未知，您可以使用单个选择器，类似于上一个答案，但无需注意必须`goto(n)`是第一类。

```
$('class~="goto"]').on('click', function(){ 
    var i = /goto(\d+)/.exec(this.className)[1];
    slider.cycle(i);
}); 
```

# c# - 在列表中获取唯一索引？

> ID：11888114
> 
> 赞同：0
> 
> 时间：2012-08-09T16:44:04.593
> 
> 标签：c#

简短的版本是这样的：我有一个数据库。我有用于与该数据库交互的 ac# 列表。程序开始，将数据转储到列表中，程序结束，将其保存回数据库。

不过，这是我的问题：当我创建和删除列表项时，我需要确保列表中的一个属性 (id) 始终是唯一的。我在想也许一个列表可能有类似于 SQL 自动增量的东西？或者也许只是哪个项目在哪个位置的数字索引？

```
AddedDependents.Add(new Dependent
                   {
                       IsSpouse = isSpouse,
                       Id = /*unique id/*
                   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:47:10.507

生成一个怎么样`Guid`？

例如

```
AddedDependents.Add(
    new Dependent
    {
        IsSpouse = isSpouse,
        Id = Guid.NewGuid().ToString("N")
     }); 
```

因此暗示您的“Id”是一个字符串，我无法从您的问题中读取这是否可能。

或者，不要将其设为字符串，而是将其设为`Guid`类型，例如：

```
AddedDependents.Add(
    new Dependent
    {
        IsSpouse = isSpouse,
        Id = Guid.NewGuid()
     }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:52:48.067

您可以只使用列表的索引：

```
AddedDependents.Add(new Dependent
               {
                   IsSpouse = isSpouse,
                   Id = AddedDependents.Count
               }); 
```

然后`Dependent`Id 和列表索引是相同的，因此从列表中获取它变得微不足道`Dependent`。

正如评论中提到的，如果您可能会从此列表中删除元素，那么您不能只通过 Id 获取依赖项，`AddedDependents[dependent.Id]`而是需要遍历列表：

```
AddedDependents.Where(d => d.Id == dependent.Id); 
```

# javascript - 追加/前置/ jQuery 问题

> ID：11888116
> 
> 赞同：-1
> 
> 时间：2012-08-09T16:44:07.260
> 
> 标签：javascript, jquery, html, append, prepend

**更新：脚本现在（部分）工作，但它无法加载一些内容中包含 Javascript 的 XML 小工具文件；此外，有些加载得很好，但除内容之外的任何其他内容仍未显示。我想知道这是否只能在 PHP 而不是 jquery 中完成。**

我有用于加载和显示 XML 小工具的代码（例如来自 iGoogle 的那些）。它现在是我的创作，事实上我什至不记得我从哪里得到它。

无论如何，如您所见，代码`Content`从 XML 文件中读取并显示在`combo1`span 中。这按预期工作。

问题是我在跨度之前或之后写的任何东西都没有显示出来。或者它显示一小部分，但立即显示内容并隐藏其他所有内容。我想要**“我希望这个文本可见！！！”** 是，嗯，可见的。我怎样才能做到这一点？我不在乎它是否只是文本，或者 jQuery 也可以做另一个技巧来显示它（我已经尝试了一些，但没有工作），或者“我的”代码可能有问题并且需要一些更改。

我只知道我需要帮助。

PS如果你需要测试这个使用谷歌的hello小工具：[http](http://www.google.com/ig/modules/hello.xml) ://www.google.com/ig/modules/hello.xml - 你必须将它保存在本地，我认为脚本不会读取外部文件。

好的，供您参考，我有这个：

```
<?PHP
$xml = $_GET['xml'];
echo "<html><head></head><body><script src='http://code.jquery.com/jquery.min.js' type='text/javascript'></script>
        <script type='text/javascript'>
        $(document).ready(function(){
    function loadfail(){
        alert('Error: Failed to read file!');
    }
    function parse(document){
        $(document).find('Module').each(function(){
           $('.combo1').append(
            '' + $(this).find('Content').text() +
            ''
           );
        });
    }
    $.ajax({
        url: '$xml',
        dataType: 'xml',
        success: parse,
        error: loadfail
    });
});
</script><span class='combo1'></span>";
?>Text that I'd like to show</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T14:06:27.897

好的，我正在回答我自己的帖子（LOL），也许这个帖子会像这样关闭。上面的代码，在我的第一个问题中，终于起作用了。但是，这取决于 xml 文件*Content*。在我用数十个 xml 文件对其进行测试后，我得出结论，并非所有文件都允许显示其他元素。对于 xml 文件，那些在 Content 中包含 javascript 的脚本将不允许显示其他任何内容，仅显示 xml 文件的 Content，而没有其他内容。我想这些是 javascript 的限制，为了获得更好的结果，应该使用 PHP 来做我所要求的。

# python - MainHandler get(self) 方法中的 Python GAE BadArgumentError。如何解决？

> ID：11888117
> 
> 赞同：0
> 
> 时间：2012-08-09T16:44:08.573
> 
> 标签：python, google-app-engine, handler

这行代码：

```
contract = Contract.get_by_id(contract_id) 
```

从这个块：

```
class MainHandler(webapp2.RequestHandler):
    def get(self):     
        contract_id = self.request.get("contract_id")
        if contract_id is None:
            contract = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC").get()
            if contract == None:
                numBook = 1
                numInitialPage = 1
                numFinalPage = 1            
        else:
            contract = Contract.get_by_id(contract_id)

template_values = {"numBook":numBook,
                           "numInitialPage":numInitialPage,
                           "numFinalPage":numFinalPage}
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values)) 
```

正在产生此错误：

```
 File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "C:\Users\Py\Desktop\contract\main.py", line 277, in get
        contract_id = self.request.get("contract_id")
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\db\__init__.py", line 1292, in get_by_id
    ids, multiple = datastore.NormalizeAndTypeCheck(ids, (int, long))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\api\datastore.py", line 139, in NormalizeAndTypeCheck
    (types, arg, typename(arg)))
BadArgumentError: Expected an instance or iterable of (<type 'int'>, <type 'long'>); received  (a str). 
```

我的目标是：如果在其他处理程序重定向到 MainHandler 时通过变量传递了一个值`contract_id`，则 MainHandler 应该使用它。但是如果 MainHandler 是第一次使用，那么`contract_id`value 应该是`None`并且程序应该是另一件事。但这并没有发生。调用 MainHandler 时，它将“contract_id”（来自`self.request.get("contract_id")`）解释为字符串值。如何解决这个问题并实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:51:01.520

错误告诉您的是它需要一个`int`或一个`int`. 这与[docs](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_id)一致。因此，您需要先转换 `contract_id`为`int`.

```
...
else:
  contract = Contract.get_by_id(int(contract_id)) 
```

此外，您需要更改检查是否`contract_id`通过的方式。`self.request.get`当值未定义时，该方法返回一个空字符串。请参阅[http://webapp-improved.appspot.com/api/webapp2.html#webapp2.Request.get](http://webapp-improved.appspot.com/api/webapp2.html#webapp2.Request.get)。

所以你必须在这里选择替代品：

```
contract_id = self.request.get("contract_id")
if not contract_id: 
```

或者

```
contract_id = self.request.get("contract_id", None)
if contract_id is None: 
```

# version-control - 递归添加到源代码控制的脚本：如何忽略特定文件和文件夹

> ID：11888121
> 
> 赞同：1
> 
> 时间：2012-08-09T16:44:30.837
> 
> 标签：version-control, clearcase, cleartool

我有这个问题一直困扰着我很长一段时间。最好参考以下（众所周知的）脚本来解释它：

```
@rem= 'PERL for Windows NT -- ccperl must be in search path 
@echo off 
ccperl %0 %1 %2 %3 %4 %5 %6 %7 %8 %9 
goto endofperl 
@rem '; 

########################################### 
# Begin of Perl section 

$start_dir = $ARGV[0]; 

# 
# Fixed variable 
# 
$S = "\\"; 
$list_file = "c:".$S."list_file"; 
$list_add = "c:".$S."list_add"; 
$choosed = "c:".$S."choosed"; 

sub clean_file 
{ 
$status = system("del $list_file > NUL 2> NUL"); 
$status = system("del $list_add > NUL 2> NUL"); 
$status = system("del $choosed > NUL 2> NUL"); 
} 

# 
# Start of the script... 
# 

printf("add-to-src-control $start_dir...\n"); 

clean_file(); 
$status = system("cleartool ls -view_only -r -s $start_dir > $list_file"); 
open(LIST_ELEMENT,$list_file); 
while ($element=<LIST_ELEMENT>) 
{ 
chop $element; 
# printf " Processing $element "; 
if ($element =~ /CHECKEDOUT/) 
{ 
# printf(" checkedout file \n"); 
} 
else 
{ 
# printf " view private \n"; 
printf " Processing $element ...\n"; 

# 
# For files with spaces... 
# 
if ($element =~ / /) 
{ 
$status = system("cmd /c echo \"$element\" >> $list_add"); 
} 
else 
{ 
$status = system("cmd /c echo $element >> $list_add"); 
} 
} 
} 
close(LIST_ELEMENT); 

if (-e $list_add) 
{ 
$listelement = `type $list_add`; 
$listelement =~ s/\n/,/g; 
$status = `echo $listelement > $list_add`; 

$status = system("clearprompt list -outfile $choosed -dfile $list_add -choices 
-prompt \"Choose element(s) to put over version control : \" -prefer_gui"); 

if ($status != 0) 
{ 
# printf("\n Aborting ...\n"); 
clean_file(); 
exit $status; 
} 

# 
$listtoadd = `type $choosed`; 
$listtoadd =~ s/\n//g; 
printf("\n cleardlg /addtosrc $listtoadd"); 
$status = system("cleardlg /addtosrc $listtoadd"); 

clean_file(); 
exit $status; 
} 
else 
{ 
# printf("\n No files founded...\n"); 
clean_file(); 
exit $status; 
} 

# End of Perl section 

__END__ 
:endofperl 
```

可以在“ [ClearCase：十佳脚本](http://www.ibm.com/developerworks/rational/library/4687.html)”中找到。
现在，为避免任何误解，脚本运行良好；我按照步骤（在上述网站上概述）重现了递归添加到源代码控制功能。

我的问题（或问题）是这样的：

**我们如何在这里排除具有某些扩展名**（`*.asv`或`*.dll`，例如）**的文件被添加到源代码管理**（更准确地说，被添加到返回的元素列表中；见下面的第二个问题）**？**
（与文件夹类似。）

是行：

```
$status = system("cleartool ls -view_only -r -s $start_dir > $list_file"); 
```

要关注的那个？

我的第二个问题具有相当“化妆品”的性质。
运行脚本后生成的输入框（至少在我的情况下）太小，无法容纳要添加到源代码管理的元素的整个路径。
**有没有办法确保完整路径始终可见？**
会不会是修改的问题

```
$status = system("clearprompt list -outfile $choosed -dfile $list_add -choices 
-prompt \"Choose element(s) to put over version control : \" -prefer_gui"); 
```

还是我完全错了？这就是现在的全部。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:22:25.877

正如这个[旧线程所示](http://www.ibm.com/developerworks/forums/thread.jspa?threadID=147445)，最好将要忽略的文件放在ClearCase 视图*之外*而不是内部；）

话虽如此，您需要将`ct lsview -r`（或该命令的更详细版本，如“[如何确定我的 ClearCase 本地视图中的哪些文件尚未添加到源代码控制？](https://stackoverflow.com/questions/191855/how-do-i-determine-what-files-in-my-clearcase-local-view-have-not-yet-been-added) ”中所示）与**`grep`**.
这意味着您将从参数中读取包含您要忽略的文件的所有 grep 正则表达式的文件的路径，并将 ct lsview -r 的结果放在每个“ `grep -v xxx`”中（以排除任何文件匹配该特定模式）

对于 Windows，GoW（Windows 上的 Gnu）将为您提供功能齐全的`grep`（以及 130 个其他编译为本地 win32 二进制文件的 Unix 命令）。

[行动 Mahyar](https://stackoverflow.com/users/1588116/mahyar)报告：

> 由于某些 UNIX 应用程序（`Gow`在`findstr`.
> 所以，基本上我所做的只是使用

```
cleartool ls -view_only -r -s | findstr /vi "\.asv" f > $list_file. 
```

> 这样`$list_file`就生成了，就像它应该生成的那样（即，包括除 之外的所有 View Private 元素`asv-files`）。
> 此外，当嵌入到 Perl 脚本中时，脚本可以顺利运行到最后，只指出那些已经存在的错误。

* * *

关于第二个问题，我不知道改变**[`clearprompt`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/clearprompt.htm)**or的大小`cleardlg`（一旦创建，它们甚至不能重新调整大小）。

# iphone - 如何通过命令行将 iOS 应用上传到应用商店

> ID：11888122
> 
> 赞同：40
> 
> 时间：2012-08-09T16:44:35.000
> 
> 标签：iphone, macos, app-store

作为我的 iPhone 应用程序的 countinues 集成过程的一部分，我想创建一个将应用程序 (.ipa) 文件自动上传到苹果应用程序商店的过程。我已经设法创建包并验证它。有没有办法通过命令行将 ipa 文件上传到应用商店？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-05T12:41:39.487

1.  确保您的应用程序处于“等待上传”状态。

2.  创建一个名为：Xcode:itunesconnect.apple.com 的新钥匙串项目，将您的凭据提供给 itunes connect。

3.  从命令行：`xcrun -sdk iphoneos Validation -online -upload -verbose "path to ipa"`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-11-26T01:19:40.580

之前的回复不再适用于新的 iTunes Connect。

您需要使用`iTunes Transporter`将您的应用程序上传到 iTunes Connect。在 GitHub 上查看 Deliver 的源代码：[https](https://fastlane.tools/deliver) : [//github.com/fastlane/fastlane/blob/master/fastlane_core/lib/fastlane_core/itunes_transporter.rb](https://github.com/fastlane/fastlane/blob/master/fastlane_core/lib/fastlane_core/itunes_transporter.rb)

您可以使用[Deliver](https://fastlane.tools/deliver)自动将新更新上传到 App Store：[https ://fastlane.tools/deliver](https://fastlane.tools/deliver)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-02-14T13:24:18.543

**将 IPA 上传到 TESTFLIGHT**

```
altool --upload-app -f "${APP_NAME}.ipa" -u $APP_STORE_USERNAME -p $APP_STORE_PASSWORD 
```

> 要`altool`在终端中的任何位置使用，您可以通过输入终端将其添加到 PATH 环境变量中：
> 
> **在 Xcode 11 之前：**
> 
> ```
> MacBook-Pro:~ denis$ export PATH=$PATH:/Applications/Xcode.app/Contents/Applications/Application\ Loader.app/Contents/Frameworks/ITunesSoftwareService.framework/Support/
> MacBook-Pro:~ denis$ source ~/.bash_profile 
> ```
> 
> **从 Xcode 11 及更高版本：（`altool`已更改位置）**
> 
> ```
> MacBook-Pro:~ denis$ export PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin/
> MacBook-Pro:~ denis$ source ~/.bash_profile 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-23T11:01:49.827

您应该使用应用程序加载器工具： altool --upload-app -f 文件 -u 用户名 [-p 密码] [--output-format xml]

如所述： [https ://help.apple.com/itc/apploader/#/apdATD1E53-D1E1A1303-D1E53A1126](https://help.apple.com/itc/apploader/#/apdATD1E53-D1E1A1303-D1E53A1126)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-17T00:18:06.620

如果需要，您可以尝试直接使用[Transporter](https://help.apple.com/itc/transporteruserguide/en.lproj/static.html)离开快车道。它也可以安装在任何操作系统上，因此理论上可以进行基于容器（docker）的上传。

设置完成后，请尝试以下操作：

```
iTMSTransporter -m upload -u <usename_email> -p <password> -k 10000 -itc_provider <provider_id> -assetFile MyApp.ipa -assetDescription AppStoreInfo.plist 
```

提供者 ID 是您需要使用传输器的`-m provider`命令查找的东西

# javascript - this.form.submit() 之后如何保持在同一页面位置？

> ID：11888123
> 
> 赞同：0
> 
> 时间：2012-08-09T16:44:41.300
> 
> 标签：javascript

在我执行 this.form.submit() onchange 事件后，它会重新加载页面并带到页面的最顶部。是否有可能的解决方案可以带到我在 js onchange 调用之前所在的同一页面位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:49:38.363

要么使用 AJAX 以使页面不会重新加载，要么将表单中的操作 URL 更改为使用命名锚 ( `#something`) 以便重新加载到页面上的相应锚点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:46:23.840

You can make an ajax call so that the page is not entirely reloaded (nor scrolled back).

Or you can use anchors to scroll to a specific `div`. To do so append `#theIdOfTheDiv` at the end of the redirection URL.

# rdf - SPARQL 过滤 COUNT

> ID：11888124
> 
> 赞同：2
> 
> 时间：2012-08-09T16:44:42.377
> 
> 标签：rdf, sparql

我想过滤计数结果。我正在使用以下查询：

```
SELECT (COUNT(*) AS ?total)
WHERE {
    ?s sf:RatioSWO ?o .
 }
GROUP BY ?total 
```

这只会给我谓词的总行数。我已经尝试通过在 COUNT(*) 之后放置“< 0.5”来进行过滤，但这只会给我一个“假”的结果，我不知道这意味着什么。我也尝试过 HAVING 和 FILTER 但都没有给我任何结果。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-10T15:01:54.513

如果你想返回 ?total-s 哪里 ?total < 0.5 你可以这样做：

```
SELECT (COUNT(*) AS ?total)
WHERE {
    ?s sf:RatioSWO ?o .
}
GROUP BY ?s
HAVING (?total < 0.5) 
```

从这个问题不清楚你的意思。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T19:18:59.687

我不太确定你想要实现什么，但是这个怎么样：

```
SELECT (COUNT(*) AS ?total)
WHERE {
    ?s sf:RatioSWO ?o .
    FILTER (?o < 0.5)
} 
```

这会计算`sf:RatioSWO`值大于 0.5 的三元组的数量。

# sql - Append summarized data in MS Access

> ID：11888126
> 
> 赞同：1
> 
> 时间：2012-08-09T16:44:43.397
> 
> 标签：sql, ms-access, union, inner-join

I have some data in a table. Some of the data I have summarized in a second table, some more of the data is summarized in a third table.

I want to UNION ALL CORRESPONDING them and then use a WHERE command to exclude the redundant rows from the main table

My issue is that my three tables have *mismatched column numbers*, as some of the data in the summarized tables is redundant to the main table. Clearly I want to use JOIN so that all tables when used together end up with the same columns.

My problem is that I can't wrap my head around how to put the join in the union, or the union in the join or mesh the two together some how, and if so *how*.

The Column names of the two summary tables are *subsets* oft he columnnames in the main table....do I still need a join?

Here is what I have done so far (mostly autogenerated by MS Access, with some addition by me):

```
SELECT 
[QRY7 time report Query].ResID, 
First([QRY7 time report Query].[ResID(T)]) AS [Name], 
[QRY7 time report Query].Baselocation, 
[QRY7 time report Query].Destination,
[QRY7 time report Query].Project, 
[QRY7 time report Query].[Cust_id(T)],
[QRY7 time report Query].[Hrs P1], 
[QRY7 time report Query].[Hrs P2],
[QRY7 time report Query].[Hrs P3], 
[QRY7 time report Query].[Hrs P4], 
[QRY7 time report Query].[Hrs P5], 
[QRY7 time report Query].[Hrs P6]

FROM 
[Qry8a Overhead Summary] 
INNER JOIN 
([Qry8b Work From Base Summary] 
INNER JOIN 
[QRY7 time report Query] 
ON 
[Qry8b Work From Base Summary].ResID = [QRY7 time report Query].ResID
ON[Qry8a Overhead Summary].ResID = [QRY7 time report Query].ResID 

UNION CORRESPONDING
(ResID,[ResID(T)],Baselocation,[Hrs P1],[Hrs P2],[Hrs P3],[Hrs P4],[Hrs P5],[Hrs P6])

SELECT  
[Qry8a Overhead Summary].[ResID(T)],
[Qry8a Overhead Summary].Baselocation,
[Qry8a Overhead Summary].[Hrs P1],
[Qry8a Overhead Summary].[Hrs P2],
[Qry8a Overhead Summary].[Hrs P3],
[Qry8a Overhead Summary].[Hrs P4],
[Qry8a Overhead Summary].[Hrs P5],
[Qry8a Overhead Summary].[Hrs P6]
FROM 
[Qry8a Overhead Summary] 

UNION CORRESPONDING
(ResID,[ResID(T)],Baselocation,[Hrs P1],[Hrs P2],[Hrs P3],[Hrs P4],[Hrs P5],[Hrs P6])

SELECT  
[Qry8b Work From Base Summary] .[ResID(T)],
[Qry8b Work From Base Summary] .Baselocation,
[Qry8b Work From Base Summary].[Hrs P1],
[Qry8b Work From Base Summary].[Hrs P2],
[Qry8b Work From Base Summary].[Hrs P3],
[Qry8b Work From Base Summary].[Hrs P4],
[Qry8b Work From Base Summary].[Hrs P5],
[Qry8b Work From Base Summary].[Hrs P6]
FROM 
[Qry8b Work From Base Summary]
GROUP BY 
[QRY7 time report Query].ResID,
[QRY7 time report Query].Baselocation, 
[QRY7 time report Query].Destination, 
[QRY7 time report Query].Project, 
[QRY7 time report Query].[Cust_id(T)], 
[QRY7 time report Query].[Hrs P1],
[QRY7 time report Query].[Hrs P2], 
[QRY7 time report Query].[Hrs P3],
[QRY7 time report Query].[Hrs P4], 
[QRY7 time report Query].[Hrs P5],
[QRY7 time report Query].[Hrs P6], 
[QRY7 time report Query].Cust_id

HAVING 
((([QRY7 time report Query].Destination)<>"D-" &[QRY7 time report Query].[Baselocation]) 
AND 
(([QRY7 time report Query].Cust_id)<>2))

ORDER BY [QRY7 time report Query].ResID; 
```

So as far as I can tell (still new at SQL) this is saying, pull in data from Time Report, and join the summary tables so that MS Access knows ResID matches up. Then, make a new table of the fields provided, where they correspond, making sure anything from the `QRY7` data HAVING destination <> baselocation (Summarized in Overheads) and Cust_Id <> 2 (summarized in word from base).

Now what it's saying is that I've gotten the From syntax wrong, but I can't tell where this is. I don't even know if I'm doing all of this right

### Edit:

Here is some a sample of the data in the 'Master' table:

```
ResID      Nm    Base     Proj      Destination Cust_id     P1     P2     P3
MJW     Mary  LONDON   Project1              Overhead           
                       Project2  A-LONDON    Overhead                  0.39%
                       Project3  UK          Overhead   1.24%       
                       Project12 B-LONDON    232        19.47% 60.02%  0.82%
                       Project13             232        12.44%      
                       Project16 A-LONDON    56                3.5%    
                       Project17 B-LONDON    56                        9.8% 
```

And the over head summary:

```
ResID Nm     Base    Cust_id    P1    P2     P3
MJW   Mary   LONDON  Overhead   4.61% 2.31%  3.13% 
```

And the Work form base summary

```
ResID Nm     Base    Cust_id    P1    P2     P3
MJW   Mary   LONDON  232        0.43% 5.51%  0.09%
MJW   Mary   LONDON  562        0.43% 5.51%  0.09% 
```

Here is them merged together

```
R_Id Nm      Base    Dest        Proj      Cust_id       P1      P2     P3
MJW Mary    LONDON  UK          Overhead  SumOver       1%      7.4%   4.8% 
                     A-London    Project1  SumBaseCust1  1.68%   0%     24.93%
                     B-London    Project2  SumBaseCust1  2.48%   0%     4.3%
                                 Project13 232           10 %           0
                     B-LONDON    Project16 56            3.5%    
                     B-LONDON    Project17 56                    9.8% 
```

Some of the entries are blank/null.

From memory the two summary tables contain the ResID, ProjectID and percentages, the Work From Base table on contains Customer-Id on top of this. The top two entries for Bob should come from the two summary tables, the third entry is an example entry that **should not be dropped**, the fourth has the *same Destination as the base location* so it **will be dropped** from the resultant table (I've added it so I can point out that some rows will be left out)

I have to JOIN to make the number of columns match (right?), and UNION to stitch the rows together (Right?). How do I combine them?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:44:39.397

使用具有唯一值的附加查询是否有意义？从两个汇总表开始，最后附加第一个表？

附加语句将允许您选择哪些列与哪些列匹配，并且唯一值将防止您复制数据。

或者，您可以追加到一个新表中，在该表中设置了要保持唯一的字段的主键？

# c# - 为什么 AreEquals 说两个值在双引号中时不正确？

> ID：11888129
> 
> 赞同：1
> 
> 时间：2012-08-09T16:44:59.027
> 
> 标签：c#, webdriver, assert

我在我的 WebDriver 脚本中进行了以下检查，我从页面中提取了一个日期字段。

```
IWebElement crInfo = driver.FindElement(By.Id("crInfo"));
string copyDate = crInfo.Text;
// From the converted string now pulling out the year by index and length
string copyYear = copyDate.Substring(2, 4);
// Get the current year
int nowYear = DateTime.Today.Year;
// Converting the year
nowYear.ToString().Trim();
// Make the comparison to be sure the copyright is using the current date
Assert.AreEqual(copyYear,nowYear); 
```

正如片段中所指出的，我想要做的是确认页面中显示的日期是当前年份，这只是一个 Web 前端检查，确保到位的函数返回正确的值。当我运行它时，我在 NUnit 控制台中看到的是：

> 错误：预期：“2012”但是是：2012

我真的不明白两者之间的区别，引用的值是字符串吗？我在我的脚本中添加了转换以确保它们是相同的类型，并添加了修剪以防可能存在空白。

如果我想完成这项工作，我没有做些什么来让资产通过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:47:37.607

查看您的类型和断言：

```
string copyYear = ...
int nowYear = ...
Assert.AreEqual(copyYear,nowYear); 
```

无论价值如何，这种断言永远*不会*通过。在 C# 中，字符串*永远不会*等于整数。虽然有些语言在这种情况下会进行类型强制，但 C# 不是其中之一。

另请注意，此行是无用的：

```
nowYear.ToString().Trim(); 
```

字符串在 .NET 中是不可变的 - 诸如`Trim()`不更改调用它们的字符串之类的方法 - 它们返回一个新字符串。你忽略了那个返回值......无论如何，你在一个你之后完全忽略的字符串上调用它。你可以使用：

```
string nowYearAsString = nowYear.ToString().Trim();
Assert.AreEqual(copyYear, nowYearAsString); 
```

...或者您可以改为解析`copyYear`为`int`第一个，然后进行比较：

```
int copyYearAsInt = int.Parse(copyYear);
Assert.AreEqual(copyYearAsInt, nowYear); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:48:21.273

copyYear 是一个字符串。nowYear 是一个整数。你的线

```
nowYear.ToString().Trim(); 
```

不会以任何方式改变 nowYear。由于此行而要比较的字符串未分配给任何变量。你需要做

```
string nowYearStr =  nowYear.ToString().Trim(); 
```

然后将 nowYearStr 与 copyYear 进行比较。

# sql - 行号 n 和 j 之间的 SQL Select 语句

> ID：11888131
> 
> 赞同：0
> 
> 时间：2012-08-09T16:45:11.773
> 
> 标签：sql, ms-access, select

如何使用 select 语句选择从 500 到 1000 的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:55:23.193

在大多数数据库中，您会使用类似`row_number() over (order by col1, col2)`将行号分配给特定顺序的方法。然后您可以请求行 x 到 y。见[这里](http://msdn.microsoft.com/en-us/library/ms186734.aspx)。

由于 MS-Access 没有类似的分析功能`row_number()`，因此您必须更有创意。这是一篇可能对您有所帮助[的知识库文章。](http://support.microsoft.com/kb/208946)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:58:33.273

如果没有更多信息，我建议选择前 1000 名，然后从中选择后 500 名。

编辑：记录顺序是按名为名称的字段。也许是这样的：

```
select top 500 name
from 
(
select top 24000 name
from table
order by name
)
order by name desc 
```

请注意：名称是保留字，是字段名称的错误选择。

# algorithm - Version control merge algorithm

> ID：11888132
> 
> 赞同：3
> 
> 时间：2012-08-09T16:45:14.673
> 
> 标签：algorithm, merge

> **Possible Duplicate:**
> [Three Way Merge Algorithms for Text](https://stackoverflow.com/questions/1203725/three-way-merge-algorithms-for-text)

I would like to learn what are the standard algorithms used in 3-way merges by common version control systems, like Git or Mercurial. I imagine there should be some common algorithm known by people in the field, but the Wikipedia page about [3-way](http://en.wikipedia.org/wiki/3-way_merge#Three-way_merge) [merge](http://en.wikipedia.org/wiki/Diff3) does not enter into any detail.

# javascript - 移动 safari 上的 touchMove 事件 - 导致整个页面被拖动

> ID：11888133
> 
> 赞同：1
> 
> 时间：2012-08-09T16:45:15.110
> 
> 标签：javascript, ios, html, webkit, touch

根据苹果文档应用触摸事件时

```
element.addEventListener("touchstart", touchStart, false);
element.addEventListener("touchmove", touchMove, false);
element.addEventListener("touchend", touchEnd, false);
element.addEventListener("touchcancel", touchCancel, false); 
```

和拖动，整个 html 页面（在 ipad 或 iphone 上）往往会被拖动。我该如何防止呢？

我尝试添加

```
event.preventDefault(); 
```

到回调，以及

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" /> 
```

没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:05:05.807

您可以尝试使用从处理程序返回 false 来防止默认操作。

```
event.preventDefault();
return false; 
```

你也可以尝试使用`event.stopPropagation();`

我认为其中一个应该有效

# asp.net-mvc - How do I handle collections in a ViewModel?

> ID：11888138
> 
> 赞同：1
> 
> 时间：2012-08-09T16:45:38.973
> 
> 标签：asp.net-mvc, nhibernate, mapping, viewmodel, parent-child

I think I've almost got this all figured out. This question is the context of a .NET MVC application.

**My entity:** (I'll be switching to *Fluent nHibernate* soon)

```
[Serializable]
[Class(Schema = "dbo", Table = "LiveMedia")]
[Cache(1, Usage = CacheUsage.ReadWrite)]
public class Media : NhBase<Media>
{
    [Id(Name = "Id", Column = "ID"), Generator(1, Class = "native")]
    public virtual int Id { get; set; }

    [Property]
    public virtual string Title { get; set; }

    [Property]
    public virtual string Description { get; set; }

    [Property(Column = "TypeID")]
    public virtual MediaType MediaType { get; set; }

    [Property]
    public virtual DateTime CreatedAt { get; set; }

    [Property]
    public virtual DateTime UpdatedAt { get; set; }

    [Property]
    public virtual string EmbedUrl { get; set; }

    [Property]
    public virtual string ThumbnailUrl { get; set; }

    [Property]
    public virtual string S3Filename { get; set; }

    [XmlIgnore, Set(0, Table = "LiveCollectionMedia", Schema = "dbo", Cascade = CascadeStyle.AllDeleteOrphan, Lazy = true, Inverse = true), Key(1, Column = "MediaID"), OneToMany(2, Class = "BanffCentre.Business.Data.Live.MediaCollection, BanffCentre")]
    public virtual ISet<MediaCollection> Collections { get; set; }

    [XmlIgnore, Set(0, Table = "LiveMediaCategory", Schema = "dbo", Cascade = CascadeStyle.SaveUpdate, Lazy = true), Key(1, Column = "MediaID"), ManyToMany(2, Class = "BanffCentre.Business.Data.Live.Tag, BanffCentre", Column = "CategoryID")]
    public virtual ISet<Tag> Tags { get; set; }

    public Media()
    {
        Collections = new HashedSet<MediaCollection>();
        Tags = new HashedSet<Tag>();
    }
} 
```

**My ViewModel:**

```
public class MediaAudioViewModel
{
    public int? Id { get; set; }

    [Required]
    public string Title { get; set; }

    public string Description { get; set; }
    public MediaType MediaType { get; set; }
    public string ThumbnailUrl { get; set; }
    public IList<Tag> Tags { get; set; }
    public string S3Filename { get; set; }
    public HttpPostedFileBase AudioFile { get; set; }
} 
```

**The question:**

I know I shouldn't have a collection of "Tag" entities in my ViewModel:

```
public IList<Tag> Tags { get; set; } 
```

So am I suppose to map a **TagViewModel** to this instead? Like this?

```
public IList<TagViewModel> Tags { get; set; } 
```

And if this is a *many-to-many* relationship am I suppose to map a **MediaViewModel** from the **TagViewModel** when I start creating views for the tags?

I imagine so... I just feel like this abstraction stuff gets a little nutty. Just hoping for a quick confirmation!

Thanks.

**EDIT**

[This post](https://stackoverflow.com/questions/6377524/asp-net-mvc-view-model-best-practices?rq=1) seems to answer my question. I just found it. I'd still be interested in any other thoughts.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:53:05.560

在做了更多阅读之后，我决定我的视图模型*应该*包含其他视图模型的集合。使用*AutoMapper*我通常可以为我完成这项工作。

```
Mapper.CreateMap<MediaDto, MediaVideoViewModel>();
Mapper.CreateMap<TagDto, TagViewModel>();
var videoModel = Mapper.Map<MediaDto, MediaVideoViewModel>(mediaDto); 
```

# asp.net - Invalid XML issues with a link

> ID：11888139
> 
> 赞同：0
> 
> 时间：2012-08-09T16:45:48.137
> 
> 标签：asp.net, xml

I'm trying to drop the following link into an XML file and it is kicking back an error.

```
<link URL="http://hqgoogle1/search?site=bolt_collection&client=bolt_frontend&output=xml_no_dtd&proxystylesheet=bolt_frontend&proxycustom=%3cHOME/" TitleText="" LinkText="BOLT" /> 
```

Error:

This is an unexpected token. The expected token is 'SEMICOLON'. Line 47, position 69\.

I can't for the life of me figure out why this is happening. The link is valid and works fine. Is there something with the "&c" that break the XML?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:55:24.020

这是因为`&`是实体的前缀，必须以 . 结尾`;`。只需将所有`&`s替换`&amp;`为您的属性。`&amp;`表示`&`XML 中的一个。

# sql - SQL: Taking the result of of query and using it another - combine

> ID：11888140
> 
> 赞同：1
> 
> 时间：2012-08-09T16:45:49.647
> 
> 标签：sql, database

I have two SQL queries, one that uses the other after getting its result.

`SELECT users.data from users WHERE users.data2 = value`

`SELECT mods.data FROM mods WHERE mods.data2 = (result of previous query)`

How would I combine these statements? There are similar questions as such, but I'm new to SQL and don't understand them.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:48:16.313

加入它们的最简单方法是使用`IN`操作员：

```
SELECT mods.data FROM mods WHERE mods.data2 IN 
    (SELECT users.data from users WHERE users.data2 = value) 
```

但是还有很多其他的...

例如，您可以加入他们：

```
SELECT mods.data 
FROM mods 
JOIN users ON mods.data2 = users.data
WHERE users.data2 = value 
```

这些可能会产生不同的输出，但这取决于您的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:48:19.290

```
SELECT m.data 
FROM mods m
INNER JOIN users u ON m.data2 = u.data
WHERE u.data2 = value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:56:21.877

根据您的确切 RDBMS，您可以使用最新的 MS SQL 版本中可用的[公用表表达式(CTE)。](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

# c# - Read printable string from AttributeTypeAndValue using BouncyCastle

> ID：11888143
> 
> 赞同：0
> 
> 时间：2012-08-09T16:45:57.447
> 
> 标签：c#, bouncycastle

Trying to read string from `Org.BouncyCastle.Asn1.Crmf.AttributeTypeAndValue`.
The string value read from the `AttributeTypeAndValue` contains the junk value in the beginning.

My code:

```
//create type value
string id = "1.2";
string value = "hello";
var derValue = new DerPrintableString(value);
var typeValue = new Org.BouncyCastle.Asn1.Crmf.AttributeTypeAndValue(id, derValue);

//read type value
var decodedValue = new DerPrintableString(typeValue.Value.GetDerEncoded());
Console.WriteLine("Original: {0}, Decoded: {1}", 
            derValue.GetString(), decodedValue.GetString()); 
```

The output for above code is,
![enter image description here](../Images/b5d36fdaeadb92edf0122fa1200d836f.png)

Please help me extract the original string value from AttributeTypeAndValue without junk characters.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:41:00.600

找到了解决方案。问题在于，

```
var decodedValue = new DerPrintableString(typeValue.Value.GetDerEncoded()); 
```

将其更改为以下内容有助于我提取没有垃圾值的字符串，

```
var decodedValue = DerPrintableString.GetInstance(typeValue.Value); 
```

# c# - Name Variable using string .NET

> ID：11888144
> 
> 赞同：-4
> 
> 时间：2012-08-09T16:45:57.887
> 
> 标签：c#, .net, .net-4.0, deserialization

I'm working on a deserialization class in .NET, I have to develop a method that provides to me with a variable name that is stored in a string.

I have a string such as:

```
string string_name = "this_is_going_to_be_var_name"; 
```

Now what can I do so that my code dynamically declares a variable named this_is_going_to_be_var_name?

So to clear things up: There will be a deserialization class that will declare variables of the same names as strings provided as input with their PARENT TYPES as per wish of the Higher Level Programmer/User.

**For Example: In javascript/jQuery, when I fetch JSON by making a request, the interpreter declares variable(s)/array(s) of the same name and assigns values to them. If {"var_name":"var_value"} is a JSON string, the interpreter will create a variable named var_name and will assign "var_value" to it such as json_data_object.var_name.**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T16:53:38.553

不，你不能。C# 变量都是静态声明的。

您可以做的最好的事情是创建一个字典并使用键而不是变量名。

```
// Replace object with your own type
Dictionary<string, object> myDictionary = new Dictionary<string, object>();
myDictionary.Add("this_is_going_to_be_var_name", value_of_the_variable);
// ...
// This is equivalent to foo($this_is_going_to_be_var_name) in PHP
foo(myDictionary["this_is_going_to_be_var_name"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:54:06.797

这是不可能的，变量名是在编译时定义的，而不是在运行时定义的。一种方法是创建一个字典或哈希表来将字符串名称映射到对象，以实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:53:39.610

不知道你的意思

> 我的代码**动态声明了一个名为** this_is_going_to_be_var_name 的变量？

但是`explode`PHP中的.Net版本是`Split`：

```
string[] zz = "this_is_going_to_be_var_name".Split('_'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T23:30:49.373

我目前唯一能想到的（我没有测试过，所以我不知道是否可能），是拥有一个动态类型的对象，然后尝试在运行时使用反射和 InvokeMember 设置字段（ )，我可以给它一个工作的机会，因为没有对动态类型的对象进行验证。

**更新：** 我已经使用 ExpendoObject 对其进行了测试，但 InvokeMember 似乎无法正常工作（至少没有使用默认活页夹，但我没有使用 DynamicObject 对其进行测试，尽管我没有给它太多工作机会，但你可能仍然试试看，您可以查看[http://msdn.microsoft.com/en-us/library/ee461504.aspx](http://msdn.microsoft.com/en-us/library/ee461504.aspx)了解如何使用 DynamicObject。

看一下[Dynamically added properties to an ExpandoObject](https://stackoverflow.com/questions/4938397/dynamically-adding-properties-to-an-expandoobject?rq=1)它本质上描述了一种方法，其中动态对象被转换为 IDictionary，然后您可以通过使用标准字典访问向它添加属性，而它们实际上正在获取对象的属性.

我在一个示例项目中通过使用 ExpendoObject 类型的动态对象对其进行了测试，然后我添加了另一个使用 IDictionary 类型引用它的变量，然后我尝试在两者上设置和获取属性，如下例所示：

```
dynamic test = new ExpandoObject(); 
//reference the object as a dictionary
var asDictinary = test as IDictionary<string, Object>;

//Test by setting it as property and get as a dictionary
test.testObject = 123;
Console.Write("Testing it by getting the value as if it was a dictionary");
Console.WriteLine(asDictinary["testObject"]);

//Test by setting as dictionary and get as a property
//NOTE: the command line input should be "input", or it will fail with an error
Console.Write("Enter the varible name, ");
Console.Write("note that for the example to work it should the word 'input':");
string variableName = Console.ReadLine();
Console.Write("Enter the varible value, it should be an integer: ");           
int variableValue = int.Parse(Console.ReadLine());
asDictinary.Add(variableName, variableValue);
Console.WriteLine(test.input);//Provided that the command line input was "input" 
```

（但在您的情况下，因为无论如何您都不会直接在代码中访问属性，所以我认为不需要它，您可能可以直接使用 Dictionary，我不明白您为什么需要它们对象的属性，仅当您想在编译时引用它们时才需要。

但也许我误解了你，你正在寻找一个动态变量而不是一个动态属性[在 PHP 中使用 $$ 语法可用的东西]，如果是这种情况，那么请注意在 c# 中根本没有变量因为一切都封装在一个对象中）。

您还可以查看[如何在 C# 中动态地将字段添加到类中以](https://stackoverflow.com/questions/646258/how-can-i-dynamically-add-a-field-to-a-class-in-c-sharp)获得更多答案。

# hibernate - How do I access superclass properties in a Hibernate criteria

> ID：11888146
> 
> 赞同：0
> 
> 时间：2012-08-09T16:46:10.227
> 
> 标签：hibernate, polymorphism, criteria, superclass, joined-subclass

I'm using basic table-per-class polymorphism in Hibernate. So I have:

```
<class name="SuperClass" table="SUPER">
    <id name="anId" type="long">
        <generator class="native"/>
    </id>

    <properties name="uniqueFields" unique="true">
        <property name="one" not-null="true"/>
        <property name="two" not-null="true"/>
    </properties>

    <joined-subclass name="SubClass1" table="SUB1">
        <key column="anId"/>
        <property name="other"/>
    </joined-subclass>

    <joined-subclass name="SubClass2" table="SUB2">
        ...
    </joined-subclass>

    ...

</class> 
```

So, basically I have a bunch of subclasses, each of which is holding some subclass specific data. I have a key, but I also need a compound unique constraint on a couple of other properties.

If a create a criteria:

```
 createCriteria(SubClass1.class).add(Restrictions.eq("one", "VALUE")).list() 
```

I get a stack dump caused by: *Invalid column name 'one'*.

If I create the criteria based on SuperClass.class it works, but a need to add restrictions that apply to both the superclass and the subclass (and this code is actually buried under a whole lot of other stuff).

I can get to the key, but it is declared in both places. Can I not access the global properties from the subclass in a criteria? Do I need to declare them somehow? Or some type of cast?

# sql - 如何将具有相同值的表列传播 600 次

> ID：11888147
> 
> 赞同：0
> 
> 时间：2012-08-09T16:46:15.580
> 
> 标签：sql

如何使用每行中的链接将具有相同值的表列传播 600 次，而不覆盖可能已经存在的某些值。

我不能让它工作：

```
UPDATE TABLE SET column_name = REPLACE ( column_name,'NULL','new values' ) 
```

我知道我必须接近？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:00:44.723

也许这就是你想要的？

```
UPDATE TABLE SET column_name = 'new values' WHERE column_name IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:49:09.583

尝试

`UPDATE TABLE SET column_name = column_name+'new values'`

如果`+`不起作用，请使用适用于您的 RDBMS 的任何连接函数

# c# - 逆变应该允许编译器推断 T=Circle 吗？

> ID：11888148
> 
> 赞同：1
> 
> 时间：2012-08-09T16:46:18.417
> 
> 标签：c#, contravariance, compareto

好的，我被告知，由于逆变，编译器应该能够推断出 T=Circle 并因此允许编译。但是，使用编译器版本 4.0.30319.1 我收到以下错误：

错误 CS0311：类型“Testable.Shape”不能用作泛型类型或方法“Testable.Test.Foo(System.IComparable,T)”中的类型参数“T”。没有从“Testable.Shape”到“Testable.ICircle”的隐式引用转换。

但是，如果我在 Circle 类上实现 IComparable，则代码可以正常编译。这里可能有什么问题？

```
using System; 

namespace Testable 
{ 
    public class Test 
    { 
        public static void Main() 
        { 
            Foo(new Circle(), new Circle()); 
        } 

        public static void Foo<T>(IComparable<T> a, T b) where T : ICircle 
        { 
            a.CompareTo(b); 
        } 
    } 

    public interface ICircle 
    { 
    } 

    public class Shape : IComparable<Shape>
    { 
        public Int32 CompareTo(Shape other) 
        { 
            Console.WriteLine("Called CompareTo(Shape)"); 
            return 0; 
        } 
    } 

    public class Circle : Shape, ICircle 
    { 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:57:31.700

问题是`Circle`implements `IComparable<Shape>`，所以编译器选择`Shape`了 T。但是，`Shape`没有 implements `ICircle`，所以你会看到你看到的错误。

不过，我想这引出了问题。为什么编译器`Circle`在看到`ICircle`约束后不修改它的猜测。答案是[约束不用于帮助类型推断](http://blogs.msdn.com/b/ericlippert/archive/2009/12/10/constraints-are-not-part-of-the-signature.aspx)。他们只能在猜测完成后才能使猜测*无效*。

# javascript - retrieve the height of a table in Firefox in javascript

> ID：11888149
> 
> 赞同：1
> 
> 时间：2012-08-09T16:46:19.043
> 
> 标签：javascript, html, css

I have a dynamic table with height 300 px and overflow-y: scroll such that table will have a vertical scroller. If there are less rows I want to change the height of the table so that there will be no space in the table and a scroll.

I was trying to retrieve the height of the table but it comes as 0\. when I looked into the trace I can see that element has height. I tried

```
document.getElementById("myDiv").style.height  
document.getElementById("myDiv").offsetHeight  
document.getElementById("myDiv").clientHeight 
```

but none of them return a valid value to height.

here is my Css:

```
.tableSroll {    
    overflow: auto;    
}  
.myDiv {  
    display: block;  
    width: 900px;  
    height: 300px;  
    overflow:auto;  
    overflow-y: scroll;  
}  

.ai-table-list-items {  
    pading: 50px;  
    width: 100%;  
} 
```

Here is my HTML:

```
<div class="tableScroll">

    <div class= "myDiv" id= "myDiv" >  

         <table class="ai-table-list-items">.....</table>  

    </div>  

</div> 
```

can anybody please help me to retrieve the height of the div in Firefox? I have been searching for it since a long time..

Thanks in advance,
Pbale

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:53:21.670

为简单起见更改`class`为`id`：

```
<div id="tableScroll"> 
```

JS

```
document.getElementById('tableScroll').style.height; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T16:58:03.380

经常使用`jQuery`大大简化了开发。使用它，您可以通过以下方式实现目标：

```
$(#tableId).height(); 
```

# c# - WCF and error stored procedure

> ID：11888150
> 
> 赞同：1
> 
> 时间：2012-08-09T16:46:20.913
> 
> 标签：c#, stored-procedures, wcf-data-services

I have a stored procedure which returns the status of databasemail in SQL Server, which return string "stopped" or "started". I must use it in C#, Silverlight and WCF Data Service.

Here's my code:

```
contex.BeginExecute<String>(new Uri(uri2), OnQueryComplete3, null);
...
private void OnQueryComplete3(IAsyncResult result)
{
   grLog.ItemsSource = contex.EndExecute<String>(result).ToList<String>();
} 
```

And I have error:

> Error processing response stream. The XML element contains mixed content.

The service operation:

```
[WebGet]
public IQueryable<String> Status_Serwer()
{
return CurrentDataSource
.status_serwer()
.AsQueryable();
} 
```

I find ".NET 4.0 still doesn't support materialization of responses from service operations returning primitive or complex types (or collections of those)." in this duscussion [http://go4answers.webhost4life.com/Example/incoking-webget-throws-exception-56000.aspx](http://go4answers.webhost4life.com/Example/incoking-webget-throws-exception-56000.aspx). Is it true?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:33:38.023

IQueryable 通常用于尚未执行的列表，并且需要交互式迭代。因为您在服务器上将数据拉到一起，所以最好拉出整个状态记录列表，然后将它们发送给您的客户端。尝试在您的回复中使用 List 而不是 IQueryable。请注意，List 是可序列化的。

假设“CurrentDataSource.status_serwer()”返回一个可枚举的字符串列表，这段代码可能会成功：

```
[WebGet]
public List<String> Status_Serwer()
{
    return CurrentDataSource
          .status_serwer()
          .ToList();
} 
```

# php - Magento: adding pdf invoice to invoice email

> ID：11888153
> 
> 赞同：2
> 
> 时间：2012-08-09T16:46:28.137
> 
> 标签：php, email, magento, invoice, magento-1.7

I have been searching for examples the last couple of days and have been trying to do it myself, but I'm stuck at the following.

I'm using Magento 1.7.0.2. I want to add the invoice PDF as an attachment to the transactional email when generating the invoice.

I have tried several things including changing /Mage/Sales/Model/Order/Invoice.php, /Mage/Core/Model/Email/Template.php and /Mage/Core/Model/Email/Template/Mailer.php.

I know which files are involved in the process, I know where to add the attachment, I just can't figure out how to actually generate the PDF and attach it to the email.

It also seems that the way emails are generated has been changed with magento 1.7.0.0 and all explanations are for 1.6.x

I'm also aware that there are several extentions (i.e. FOOMAN's), but I prefer to change the files myself (I want to keep my installation clean of extentions as much as possible).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:08:18.263

我在网上搜索了几个小时，但解决方案是针对旧版本的 Magento，我的版本是 1.7.0.2。Magento 处理电子邮件的方式也发生了变化。以下是我的操作步骤，希望对你有所帮助。

1）更改app/code/core/Mage/Core/Model/Email/Template/Mailer.php

```
Part 1, add protected $emailTemplate; to the top of the class:

class Mage_Core_Model_Email_Template_Mailer extends Varien_Object
{
/**
* List of email infos
* @see Mage_Core_Model_Email_Info
*
* @var array
*/
protected $_emailInfos = array();

// Add the following one line

protected $emailTemplate; 
```

第 2 部分更新函数 send()

```
public function send()
{

// the original was $emailTemplate = Mage::getModel('core/email_template');
// Change it to the following four lines:

if ($this->emailTemplate)
$emailTemplate = $this->emailTemplate;
else
$emailTemplate = Mage::getModel('core/email_template'); 
```

第 3 部分将函数添加到类的末尾：

```
public function addAttachment(Zend_Pdf $pdf, $filename){
$file = $pdf->render();

$this->emailTemplate = Mage::getModel('core/email_template');

$attachment = $this->emailTemplate->getMail()->createAttachment($file);
$attachment->type = 'application/pdf';
$attachment->filename = $filename;
} 
```

2) 更新 app/code/core/Mage/Sales/Model/Order/Invoice.php

```
Update sendEmail function

$mailer = Mage::getModel('core/email_template_mailer');

// the next two lines were added

$pdf = Mage::getModel('sales/order_pdf_invoice')->getPdf(array($this));
$mailer->addAttachment($pdf,'invoice.pdf');

if ($notifyCustomer) {
$emailInfo = Mage::getModel('core/email_info');
$emailInfo->addTo($order- 
```

原始网址在这里： [http ://www.ericpan.com/2013/02/14/add-pdf-attachment-to-invoice-email/#.USPAKR2t2-0](http://www.ericpan.com/2013/02/14/add-pdf-attachment-to-invoice-email/#.USPAKR2t2-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:44:54.607

您可能想查看

```
Mage_Adminhtml_Controller_Sales_Invoice 
```

要查看生成的销售发票 pdf 的示例：

```
$pdf = Mage::getModel('sales/order_pdf_invoice')->getPdf(array($invoice));
$this->_prepareDownloadResponse('invoice'.Mage::getSingleton('core/date')->date('Y-m-d_H-i-s').
    '.pdf', $pdf->render(), 'application/pdf'); 
```

现在这实际上是渲染 PDF 以将其包含在 HTTP 响应中，而不是将其保存为文件，但发票模型或抽象 pdf 模型中应该有一个方法来保存 pdf。

然后，要添加附件，您可能需要查看：

```
Zend_Mail::addAttachment() 
```

我没有方便的示例，实际上搜索了 Magento 1.7 以获取任何参考`addAttachment()`，但没有找到任何参考！有趣的。

但希望这能给你一点方向。

# python - PyWin32、Excel 和对现有系统的“不破坏”

> ID：11888155
> 
> 赞同：2
> 
> 时间：2012-08-09T16:46:34.700
> 
> 标签：python, excel, pywin32

我有一个 Python pyWin32 应用程序打开一个 excel 文件，隐藏 excel 应用程序，并对其进行处理。完成后，它会关闭应用程序。除非我已经运行了一个 Excel 实例，否则一切都很好。在这种情况下，它隐藏了我已经运行的 excel 应用程序，我不得不在任务管理器中找到它，最终用“结束任务”杀死它。有没有办法打开一个单独的 excel 实例并对我当前的环境“不造成损害”。或者也许是另一种方法？

```
excelapp = win32com.client.Dispatch( "Excel.Application" )
app.Visible = 0
exceldoc = excelapp.Workbooks.Open( excel_doc_path )
...
# do work on file
...
exceldoc.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:32:36.027

您可以使用它`DispatchEx()`来启动一个新实例。

# performance - 对于 OpenEJB，什么是最高效、最轻量的传输方式？

> ID：11888161
> 
> 赞同：2
> 
> 时间：2012-08-09T16:47:12.990
> 
> 标签：performance, jakarta-ee, openejb, transport

OpenEJB 4.0.0 有一些可用的传输：

1.  ejbd
2.  ejbds
3.  httpejbd

网络上哪一个更轻？

哪个更快？

选择其中任何一个有什么优点和缺点吗？

我们的应用程序有大约 450 个客户端与 OpenEJB 4.0.0 容器上的远程 EJB 对话。全部在本地 LAN 中（但使用具有一些冗余的级联交换机）。

更新：

这个问题与另一个关于超时的问题无关。我们没有任何可以识别的超时或应用程序问题。当我们的客户端数量有限时，该应用程序运行良好，但当我们尝试使用数百个客户端时，我们面临似乎是网络错误：服务器日志显示重复出现“收到 IoExpcetion 未知字节”。由于据报道 CORBA ORB 存在广播问题，我们怀疑它可能是 RMI over IIOP 类型的问题。我们将尝试其他协议选项来与我们当前的设置进行比较。

更新（2012 年 10 月 8 日）：

我们现在已经运行了数百个测试，一个局域网中有 450 多个客户端。没有一刀切的答案。如果我们的客户很少，EJBD 会更快。如果我们有数百个客户端，EJBD 就会停止工作（这似乎会导致开关饱和）。对于数百个客户端，httpejbd 仍然有效（这似乎与每个远程调用都会创建一个短时间的 http 请求有关）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:20:58.017

带有 Jetty 的 httpejbd 可以为更多的客户（数千个）提供服务，但 ejbd 在 10 秒到数百个范围内的速度要快得多。

从纯粹的性能角度来看，这封电子邮件提供了一些很好的信息：

*   [http://openejb.979440.n4.nabble.com/Remote-client-performance-td987613.html](http://openejb.979440.n4.nabble.com/Remote-client-performance-td987613.html)

我将再次声明您看到的超时与客户端/服务器性能无关。更快的客户端/服务器层实际上会**增加**服务器中的意外事件并使服务器端锁定问题更加明显。

我的建议是消除协议层导致超时问题的想法。更有可能是客户端的数量，而不是它们是远程的事实。可以`@Remote`通过从`LocalInitialContextFactory`. 完成此操作后，您将获得一个遵循远程 EJB 语义但不涉及任何网络管道的客户端引用。

让这个客户端产生 450 个线程，每个线程在一个循环中通过连续的请求访问服务器，并完成常规客户端所做的工作。您会发现，您可以通过可能远少于 450 个线程（即 450 个客户端）达到超时。

这是您可以调用的所有方式的性能分析。这是同一台机器上的同一个对象：

POJO

*   *245,000 TPS——*显示为基线（不比 pojo 调用快）
*   [http://people.apache.org/~dblevins/pojo-performance.png](http://people.apache.org/~dblevins/pojo-performance.png)

`@Local`

*   *212,000 TPS* - 显示以上内容，加上基本“EJB”支持（拦截器、安全性、事务等）的额外成本
*   [http://people.apache.org/~dblevins/openejb-3.1.4-local-performance.png](http://people.apache.org/~dblevins/openejb-3.1.4-local-performance.png)

`@Remote`通过`LocalInitialContextFactory`，服务器端

*   *112,000 TPS* - 显示上述内容，加上序列化和按值传递远程语义的额外成本
*   [http://people.apache.org/~dblevins/openejb-3.1.4-remote-serverside-performance.png](http://people.apache.org/~dblevins/openejb-3.1.4-remote-serverside-performance.png)

`@Remote`通过`RemoteInitialContextFactory`，客户端（ejbd）

*   *31,600 TPS——*显示以上，加上网络层的额外成本
*   [http://people.apache.org/~dblevins/openejb-3.1.4-remote-clientside-performance.png](http://people.apache.org/~dblevins/openejb-3.1.4-remote-clientside-performance.png)

因此，如果您的直觉告诉您是网络层减慢了速度并导致访问超时，请通过创建一个小型性能测试来验证该假设，并同时`LocalInitialContextFactory`使用`RemoteInitialContextFactory`. `LocalInitialContextFactory`它将向您展示您可以从任何远程处理层获得的理论上的最大性能。

如果问题消失，那么您是对的，您可以继续努力调整网络层。如果问题仍然存在或变得更糟，那么您知道问题不在于网络层，您需要改变焦点以取得进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:16:09.483

我没有使用这些协议中的任何一个，但我相信通用视图可以帮助您入门，因为我没有在 Internet 上看到这 3 个协议的性能比较。我相信基本的本机和低级实现大多数时候都比高级协议快。在这种情况下，ejbds 的性能不如 ejbd，因为存在 SSL 握手开销。我也相信 ejbds 的性能不如 httpejbd。

# mysql - 在某个 ID 的 mySQL 查询后获取下 10 批信息？

> ID：11888167
> 
> 赞同：0
> 
> 时间：2012-08-09T16:47:40.410
> 
> 标签：mysql, trending

我正在为 iPhone 应用程序创建视频的趋势提要，并在视图表中计算过去 24 小时内视频的所有视图（每次视图时都会将一行添加到视图表中，并且具有时间戳和 videoid ）。当我对其进行无限滚动时，我会发回最后一个视频观看次数，并使用 mySQL 中的 HAVING 语句来获取下一个视频

`"HAVING COUNT(views.videoid) < 'count of views'" with a "LIMIT 10"`最后一次选择10。

这可行，但是如果一个视频在过去 24 小时内与另一个视频的观看次数相同，那么该视频可能会被跳过，因为它是一个 < 语句。如果我使用 <= 语句，视频将多次显示。

有没有办法让我在 videoid 之后选择视频

```
"ORDER BY COUNT(views.videoid) DESC" 
```

获取下一个视频？可能不会，但有人知道我会怎么做。这是我的查询。

```
SELECT f.userid, f.username, video.videoid, video.videolink, video.timestamp, video.caption, video.tags, video.address, video.likecount, video.commentcount, video.viewcount, video.shareid, CASE WHEN liketable.likekey > 0 THEN 1 ELSE 0 END AS didlike, COUNT(views.videoid) AS trendcount

FROM user AS f

RIGHT JOIN video ON video.userid = f.userid

LEFT JOIN user ON user.token = ?

LEFT JOIN liketable ON liketable.videoid = video.videoid AND liketable.userid = user.userid

RIGHT JOIN views ON views.videoid = video.videoid

WHERE views.timestamp > ?

GROUP BY video.videoid

HAVING COUNT(views.videoid) < ?

ORDER BY COUNT(views.videoid) DESC

LIMIT 10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:05:17.577

您可以使用带有 LIMIT 的偏移量：

```
SELECT [...] LIMIT 20,10; 
```

这将检索 10 行，从结果中的第 20 行开始。

然后，如果您将 ORDER BY 设置为按计数和视频 ID 排序，您将始终以相同的顺序获得结果，并且不应跳过任何结果。

# css - youtube 视频导致 chrome css 固定背景问题

> ID：11888171
> 
> 赞同：0
> 
> 时间：2012-08-09T16:47:45.807
> 
> 标签：css, background, youtube

我有一个固定在顶部的标题，然后内容只是在下面滚动。所以为了防止通过这个标题显示内容，我有一个与主体相同的背景图像，这是固定的。

一切都很好，但在 chrome 中，当我向上滚动内容并且 youtube 视频在此下方时，它会导致标题包含背景向左对齐并缩小，然后你越往上移动它就会消失，这显示了里面的内容该网站，这不是我想要的方式。

关于如何防止这种情况发生的任何想法：

下面的一些代码：

```
 header{
   width:960px;
   position: fixed;
   top: 0px;
   margin:0 auto;
   padding:0;
   text-align:center;
   display: block;
   background: url('../imgs/Background_header.jpg') no-repeat top left fixed;
  } 
```

内容容器 css

```
 .content-container {
   width:960px;
   padding-top:230px;
   z-index:0;
   margin:auto;
   overflow: hidden;
  } 
```

的HTML：

```
 <div class="content-container">
    <header>
 <!-- header stuff -->          
    </header>
    <iframe width="560" height="315" src="......
    .. other stuff. 
```

任何想法都将不胜感激，如果有更好的方法来制作它，那么它也会很棒。

谢谢

编辑：如果不清楚，内容会在标题下方滚动，当它到达 youtube 播放器时，这就是标题背景图像搞砸的时候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T05:24:21.197

这可以通过向YouTube URL添加[wmode opaque 或 transparent来解决。](https://stackoverflow.com/questions/886864/differences-between-using-wmode-transparent-opaque-or-window-for-an-embe)

前任 嵌入这个视频：http: [//youtu.be/qgnvbMwRaf8](http://youtu.be/qgnvbMwRaf8)，你得到的 iframe 是

```
<iframe width="560" height="315" src="//www.youtube.com/embed/qgnvbMwRaf8" frameborder="0" allowfullscreen></iframe> 
```

第一个参数可以在前面添加一个问号。因此，要将 wmode 添加到 URL，您可以更改 src，如下所示：

```
<iframe width="560" height="315" src="//www.youtube.com/embed/qgnvbMwRaf8?wmode=opaque" frameborder="0" allowfullscreen></iframe> 
```

如果 URL 已经有一个参数，您可以添加第二个参数，前面有一个 & 符号，但最好是 html ( `&amp;`) f.ex。

```
<iframe width="560" height="315" src="//www.youtube.com/embed/qgnvbMwRaf8?embedded=true&amp;wmode=opaque" frameborder="0" allowfullscreen></iframe> 
```

**注意**：wmode=opaque 和 mode=transparent 比 wmode=window 慢。wmode=transparent 比 wmode=opaque 慢。- [wmode - 在浏览器的渲染行为中是什么意思？](https://stackoverflow.com/questions/6402262/wmode-what-does-it-mean-in-browsers-rendering-behavior)

有关 YouTube 参数的更多信息，请参见[此处](https://developers.google.com/youtube/player_parameters)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T08:39:31.533

从标题背景中删除“固定”。

尝试“背景：url（'../imgs/Background_header.jpg'）无重复左上角；”。真的不知道为什么，但它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:04:54.460

西蒙，欧盟是否尝试过将 iframe 放置在：

```
position: absolute;
z-index: 9999; 
```

再来一注。Z-INDEX 仅适用于定义了位置的元素。（相对的，绝对的，不胜枚举）。

希望我能帮助你。

# map - 我的程序的 map/zipmap 部分会消耗太多内存吗？

> ID：11888180
> 
> 赞同：2
> 
> 时间：2012-08-09T16:48:17.913
> 
> 标签：map, clojure, sequence, lazy-evaluation

我的问题是，如果 .csv 文件足够大，map/zipmap 步骤（如下）是否存在消耗过多内存的风险？

我有一个从 clojure-csv 返回的序列。为了清楚起见，以下步骤特意分开。换句话说，我会在生产代码中结合其中的一些。

```
; Process the .csv file
(defn fetch-csv-data
    "This function accepts a csv file name, and returns parsed csv data,
     or returns nil if file is not present."

    [csv-file]
        (let [csv-data (ret-csv-data csv-file)]
            csv-data))

(def bene-csv-inp  (fetch-csv-data "benetrak_roster.csv"))

; Pull out the columns/keys, and
(def bene-csv-cols (map #(cstr/trim %1) (first bene-csv-inp)))

; create the keys.
(def bene-csv-keys (map #(keyword %1) bene-csv-cols))

; Make a sequence of just one of the keys:

(def test-ssns2 (map (fn [x] (:GIC-ID x)) 
                (map #(zipmap gic-csv-keys %1) gic-csv-data))) 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:49:49.883

此代码泄漏内存的唯一方法是因为`def`s 将持有惰性序列的头部。如果你用返回序列的函数替换它们，那么实际的头将只存在于调用堆栈中，并由惰性求值正确处理。

```
(defn bene-csv-inp [] (fetch-csv-data "benetrak_roster.csv"))

; Pull out the columns/keys, and
(defn bene-csv-cols [] (map #(cstr/trim %1) (first (bene-csv-inp))))

; create the keys.
(defn bene-csv-keys [] (map #(keyword %1) (bene-csv-cols))) 
```

这是一个粗略的经验法则，虽然有时很有用，但在它们包含无限序列时`defs`用`defn`'s 替换，并使它们在任何地方调用而不是读取（除非你真的想要多个读取器的惰性序列的缓存优势，并且序列是只会读取合理数量的数据）。

一旦热点编译器完成它，使用函数调用而不是在这里读取定义几乎肯定不会对运行时产生任何影响。

# html - xsl 模板和变量与 html 混合使用

> ID：11888186
> 
> 赞同：1
> 
> 时间：2012-08-09T16:48:41.923
> 
> 标签：html, xslt

我的问题是当我在我的 xsl 样式表中混合 html 元素时，我对生成的内容感到困惑，因为 XML 解析只是抱怨：

```
Error on line 1 column 1 
  SXXP0003: Error reported by XML parser: Premature end of file. 
```

这是我的代码

```
<xsl:template match="myTemplate">
    <xsl:variable name="fieldtype" select="Radio"/>

            &lt;td width="100px"&gt;&lt;span style="word-wrap: break-word"&gt;          
             <xsl:value-of select="$fieldtype"/>&lt;/span&gt;&lt;/td&gt;
</xsl:template> 
```

这会显示为

```
<td width="100px"><span style="word-wrap:break word">Radio</span></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:16:44.397

我不确定您为什么需要对 HTML 进行编码。您向我们展示的 HTML 没有什么特别之处可以阻止它被解析为有效的 XHTML。

如果由于某种原因您必须对 HTML 进行编码，则使用`xsl:attribute`.

```
<xsl:template match="myTemplate">
    <xsl:variable name="fieldtype" select="Radio"/>
    <td>
        <xsl:attribute name="width">
            <xsl:text>100px</xsl:text>
        </xsl:attribute>
        <span>
            <xsl:attribute name="style">
                <xsl:text>word-wrap: break-word</xsl:text>
            </xsl:attribute>
            <xsl:value-of select="$fieldtype"/>
        </span>
    </td>
</xsl:template> 
```

# nhibernate - 带有连字符的 NHibernate 查询缓存错误

> ID：11888195
> 
> 赞同：2
> 
> 时间：2012-08-09T16:49:21.443
> 
> 标签：nhibernate, caching, query-cache

我将 NH 3.3.1.4000 与 Oracle 10g 和 SQL Server 2008 一起使用。

我最近遇到了这个可能的错误。考虑以下两个查询：

```
var query1 = session.Query<Content>().Cacheable()
                    .Where(c => c.Name == "test-test").ToList();

var query2 = session.CreateQuery("from Content c where c.Name = :name")
                    .SetString("name", "test-test")
                    .SetCacheable(true); 
var list = query.List<Content>(); 
```

上述任一查询都会产生以下 SQL 查询：

```
select content0_.Id       as Id6_,      
content0_.Name   as Name6_,      
from   Content content0_
where  content0_.Name = '' 
```

任何传入并带有“-”（连字符）的参数都不会出现在实际的 SQL 查询中

如果我删除参数中的 .Cacheable 或 SetCacheable() 或“-”，它可以正常工作。在我开始查看 NH 源代码之前，有什么解决方法的想法吗？谢谢。

**更新** 我可以确认 SQL Server 也存在同样的问题。我猜它与数据库无关，而与查询缓存无关。我应该提到第一次运行查询时，在缓存发生之前，生成的查询是正确的。但是当我第二次运行相同的查询时，这次从查询缓存中加载，可缓存连字符不起作用。请参阅我在 .Net MVC 应用程序上使用 SQL Server 2008 运行的以下测试。

```
var test1 = session.Query<Student>().Cacheable().Where(c => c.Firstname == "first-name").ToList();

var test2 = session.Query<Student>().Where(c => c.Firstname == "first-name").ToList();

var test3 = session.Query<Student>().Cacheable().Where(c => c.Firstname == "firstname").ToList(); 
```

我第一次加载页面时生成了以下查询并且都是正确的：

```
-- statement #1
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = 'first-name'

-- statement #2
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = 'first-name'

-- statement #3
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = 'firstname' 
```

但是在我重新加载页面并让查询缓存做它的事情后，我得到以下三个查询：

```
-- statement #1
Cached query: 
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = ''

-- statement #2
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = 'first-name'

-- statement #3
Cached query: 
select student0_.Id        as Id1_,
   student0_.Firstname as Firstname1_,
   student0_.Lastname  as Lastname1_
from   Students student0_
where  student0_.Firstname = 'firstname' 
```

如您所见，第二次语句#1 中的参数为空。语句#1 和语句#2 之间的唯一区别是查询缓存的使用。只要参数中没有“-”连字符，缓存查询在第二次加载（test3）中工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T15:54:37.617

看来这一定是[NHibernate Profiler](http://www.hibernatingrhinos.com/products/NHProf)中的错误，而不是 NHibernate 或查询缓存中的错误。我已经能够重现您的问题，其中包括缓存查询的连字符在内的参数在分析器中显示为空字符串。

不过，我在测试中总是得到正确的结果集。为 logger 启用调试级别`NHibernate.Cache.StandardQueryCache`还表明查询缓存永远不会看到这些空字符串参数，而是看到带有连字符的实际参数值。

我的结论是，分析器在列出缓存查询时会错误地显示这些参数。

# asp.net-mvc-3 - 'Microsoft.Practices.Unity'。找到的程序集的清单定义与程序集引用不匹配

> ID：11888196
> 
> 赞同：1
> 
> 时间：2012-08-09T16:49:35.293
> 
> 标签：asp.net-mvc-3, dll, unity-container, asp.net-web-api

我正在将 WebApi 添加到现有的 MVC3 应用程序中，在添加 NuGet Web Api 包并获取新的 Unity.dll 后，我遇到了以下问题：

显然，另一个程序集正在引用 Unity.dll（我相信它是 EnterpriseLibrary.Common，不是 100% 确定 - 我确实更新到了最新的 EntLib，但我仍然收到错误消息）。

我已将以下 assemblyBinding 添加到 web.config。但是程序集绑定不起作用，它仍在寻找旧的 Microsoft.Practices.Unity.dll。

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="Microsoft.Practices.Unity" PublicKeyToken="31bf3856ad364e35" Culture="neutral" />
                <bindingRedirect oldVersion="1.0.0.0-2.0.414.0" newVersion="2.1.505.0" />
            </dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="Microsoft.Practices.Unity.Configuration" PublicKeyToken="31bf3856ad364e35" Culture="neutral" />
                <bindingRedirect oldVersion="1.0.0.0-2.0.414.0" newVersion="2.1.505.0" />
            </dependentAssembly>
        </assemblyBinding>
    </runtime> 
```

这是我看到的错误的堆栈跟踪：

```
System.IO.FileLoadException
Could not load file or assembly 'Microsoft.Practices.Unity, Version=1.2.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)</Message><StackTrace>
Server stack trace: 
   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
   at System.Reflection.RuntimeAssembly.GetExportedTypes()
   at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()
   at System.Lazy`1.CreateValue()

Exception rethrown at [0]: 
   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
   at System.Reflection.RuntimeAssembly.GetExportedTypes()
   at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache()
   at System.Lazy`1.CreateValue()

Exception rethrown at [1]: 
   at System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly assembly, ObjectHandleOnStack retTypes)
   at System.Reflection.RuntimeAssembly.GetExportedTypes()
   at System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.WebHost.WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assembliesResolver)
   at System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache()
   at System.Lazy`1.CreateValue()
   at System.Lazy`1.LazyInitValue()
   at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.SelectController(HttpRequestMessage request)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)</StackTrace></Exception> 
```

# google-docs-api - 通过电子邮件访问谷歌文档

> ID：11888199
> 
> 赞同：0
> 
> 时间：2012-08-09T16:49:49.073
> 
> 标签：google-docs-api, google-spreadsheet-api

我们可以使用 URL 中指定的 id 或键访问公共 google 文档和电子表格。但是是否可以仅指定电子邮件来访问、下载这些？

如果我们提供电子邮件，我们可以获取与该电子邮件相关的文档和电子表格吗？

另外，我想知道PHP中有什么可以做到的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:57:00.370

使用 Google Drive API，您可以按所有者搜索文档，如以下查询所示：

```
'test@example.org' in owners 
```

有关更多详细信息，请查看 [https://developers.google.com/drive/search-parameters上的文档](https://developers.google.com/drive/search-parameters)

# matlab - MATLAB 错误：不处理矩阵时“矩阵维度必须一致”

> ID：11888200
> 
> 赞同：1
> 
> 时间：2012-08-09T16:49:51.563
> 
> 标签：matlab

我是 MATLAB 新手，遇到以下困难：我想绘制一个函数图，但我不断收到“矩阵尺寸必须一致”的错误。

我正在使用的代码如下：

```
x = -1.5:0.1:1.5;
y = 1/sqrt(9 - x.^2) + 1/sqrt(4 - x.^2) - 1;
plot(x, y); 
```

命令窗口中出现的错误是：

```
Error using  / 
Matrix dimensions must agree. 
```

可能问题出在我定义的地方`x = -1.5:0.1:1.5;`，这使得 MATLAB 认为这是一个矩阵，但我想要做的就是在和`0.1`之间绘制函数值。`-1.5``1.5`

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:05:49.933

诸如乘法或除法之类的运算对于矩阵可能具有特殊意义。如果您对“正常”的元素操作感兴趣，则需要在运算符之前使用点，即

```
 y = 1./sqrt(9 - x.^2) + 1./sqrt(4 - x.^2) - 1; 
```

# iphone - 标签的自定义 UIColor

> ID：11888205
> 
> 赞同：2
> 
> 时间：2012-08-09T16:50:00.750
> 
> 标签：iphone, ios, text, label, uicolor

我想为我的标签创建自定义颜色。寻找比给出的更深的绿色。

我的代码如下：

```
switch()
{
    case0:
        [answerLabel0 setTextColor:[UIColor greenColor]];
        break;
    case1:
       [answerLabel1 setTextColor:[UIColor greenColor]];
       break;
    case2:
       [answerLabel2 setTextColor:[UIColor greenColor]];
       break;
    case3:
       [answerLabel3 setTextColor:[UIColor greenColor]];
       break;

    default:
       break;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:58:31.867

使用`[UIColor colorWithRed:green:blue:alpha]`方法

例如：

`[UIColor colorWithRed:0.5 green:0.8 blue:0.5 alpha:1.0]`

请注意，RGB 值是从 0 到 1，而不是 0 到 255。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T16:58:11.710

**如果你想用 RGB 着色**

您可以在 switch 语句之前根据自己的规范创建四种颜色，然后在其中使用它们。*请注意，您制作的颜色是带有附加 alpha（透明度）值的 RGB 颜色。您必须自己确定这些值。*

```
UIColor *color1 = [UIColor colorWithRed:(255.0/255.0) green:(255.0/255.0) blue:(255.0/255.0) alpha:(100.0/100.0)];
UIColor *color2 = [UIColor colorWithRed:(255.0/255.0) green:(255.0/255.0) blue:(255.0/255.0) alpha:(100.0/100.0)];
UIColor *color3 = [UIColor colorWithRed:(255.0/255.0) green:(255.0/255.0) blue:(255.0/255.0) alpha:(100.0/100.0)];
UIColor *color4 = [UIColor colorWithRed:(255.0/255.0) green:(255.0/255.0) blue:(255.0/255.0) alpha:(100.0/100.0)];

switch(variable){ 
  case 0: 
    [answerLabel0 setTextColor:color1]; 
    break; 
  case 1: 
    [answerLabel1 setTextColor:color2]; 
    break; 
   case 2: 
    [answerLabel2 setTextColor:color3]; 
    break; 
   case 3: 
    [answerLabel3 setTextColor:color4]; 
    break;
   default: 
     break; 
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T16:57:01.477

您可以通过多种方式创建 UIColor。有关详细信息，请参阅[http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UIColor_Class/Reference/Reference.html](http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UIColor_Class/Reference/Reference.html)。

您可以为绿色声明自定义 UIColor，如下所示：

```
UIColor *greenColor = [UIColor colorWithRed:0.000 green:0.331 blue:0.000 alpha:1.000]; 
```

然后，您可以在条件中使用该颜色，如下所示：

```
[answerLabel2 setTextColor:greenColor]; 
```

# java - AtomicLong.lazySet 的 C++ 端口

> ID：11888210
> 
> 赞同：6
> 
> 时间：2012-08-09T16:50:16.903
> 
> 标签：java, c++, atomic

我正在尝试将一些 Java 代码移植到 Windows C++ 并且对如何实现`AtomicLong.lazySet()`. 我能找到的唯一信息是关于它的作用，而不是如何实现它，并且可用的源代码最终位于 Sun ( `sun.misc.Unsafe.class`) 拥有的私有本地库中。

我目前只是为传递的参数设置了一个成员变量，但我不确定它是否正确。

```
class AtomicLong
{
public:
    inline void LazySet(__int64 aValue)
    {
        // TODO: Is this correct?
        iValue = aValue;
    }

    inline void Set(__int64 aValue)
    {
        ::InterlockedExchange64(&iValue, aValue);
    }

private:
    __declspec(align(64)) volatile __int64 iValue;
}; 
```

我不能使用升压。

编辑：我正在编译到 x64，但也许 32 位代码的解决方案对其他人有帮助。

我无权访问 C++11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:35:38.873

C++11 包含一个原子库，如果可以使用它就很容易：

```
class AtomicLong
{
public:
    inline void LazySet(int64_t aValue)
    {
        iValue.store(aValue, std::memory_order_relaxed);
    }
    inline void Set(int64_t aValue)
    {
        iValue.store(aValue);
    }
private:
    std::atomic<int64_t> iValue;
}; 
```

# jquery - 关于css溢出和平移缩放的一些问题

> ID：11888214
> 
> 赞同：0
> 
> 时间：2012-08-09T16:50:24.493
> 
> 标签：jquery, html, css, google-maps, maps

我已经用 div 和 css 制作了一张地图，您可以从[http://test.rickardp.se/test.html找到一个测试文件](http://test.rickardp.se/test.html)

但是我试图在它上面获得平移和缩放功能，最好的应该是它应该像谷歌地图一样工作，用户可以使用鼠标上的滚轮进行缩放，并通过点击和拖动进行平移。

现在我使用整个浏览器窗口，应该显示地图的区域应该更小。

我已经搜索并尝试了一些带有溢出的代码：隐藏但我没有任何工作，最好的解决方案仅适用于图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:55:31.947

这将是一个很好的起点：

[http://jqueryui.com/demos/draggable/#default](http://jqueryui.com/demos/draggable/#default)

尝试在“查看窗口”内放置一个可拖动元素，并将“查看窗口”溢出设置为隐藏。

**更新**

像这样：

[http://jsfiddle.net/nickaknudson/7fwYK/](http://jsfiddle.net/nickaknudson/7fwYK/)

**资源**

*   [http://jqueryui.com/demos/draggable/#default](http://jqueryui.com/demos/draggable/#default)

# javascript - JavaScript Brightcove API 暂停和播放

> ID：11888216
> 
> 赞同：2
> 
> 时间：2012-08-09T16:50:46.480
> 
> 标签：javascript, api, video-player, brightcove

我很难理解如何做这些简单的动作。我尝试按照 API 和几个论坛的建议进行操作，但结果是 404 页面已不存在，希望您能指导我。

我的页面上有 3 个视频，我正在尝试实现下一个功能：

*   当一个视频结束时，它将播放下一个。
*   当您播放视频时，其他视频将被暂停。

我正在寻找上述内容的参考，因此我可以按照它来构建所需的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:08:08.913

最好的文档位于[http://support.brightcove.com/en/docs/using-smart-player-api](http://support.brightcove.com/en/docs/using-smart-player-api)。

[在http://support.brightcove.com/en/docs/dynamically-loading-videos-using-smart-player-api](http://support.brightcove.com/en/docs/dynamically-loading-videos-using-smart-player-api)有一个在一个视频完成后加载一个视频的示例，以及有关在[http](http://support.brightcove.com/en/docs/listening-events-using-smart-player-api)上监听事件的更多详细信息[://support.brightcove.com/en/docs/listening-events-using-smart-player-api](http://support.brightcove.com/en/docs/listening-events-using-smart-player-api)。

VideoPlayer 模块的 API 文档位于[http://docs.brightcove.com/en/video-cloud/smart-player-api/reference/symbols/brightcove.api.modules.VideoPlayerModule.html](http://docs.brightcove.com/en/video-cloud/smart-player-api/reference/symbols/brightcove.api.modules.VideoPlayerModule.html)。看一下`loadVideoByID()`,`play()`和等方法`pause()`。您可能还想在[http://docs.brightcove.com/en/video-cloud/smart-player-api/references/symbols/brightcove.api.events.MediaEvent.html](http://docs.brightcove.com/en/video-cloud/smart-player-api/references/symbols/brightcove.api.events.MediaEvent.html)查看 MediaEvent API 。

干杯马克

# php - 主机名 -f 主机名：名称或服务未知

> ID：11888217
> 
> 赞同：0
> 
> 时间：2012-08-09T16:50:55.587
> 
> 标签：php, dns, sendmail, hostname, hosts

我很想弄清楚这一点。主要问题是，当我使用 php mailer 循环向我们的用户发送电子邮件时，它只会发送给一些用户，我认为这是一个 DNS 问题。

这是邮件代码

```
function massEmail($from,$subject,$to,$body) {
    require_once('packages/class.phpmailer.php');
    $success = 0;
    foreach($to as $person) {
        usleep(2000);
        $mail = new PHPMailer(); 
        $mail->From = $from;
        $mail->IsHTML(true);
        $mail->FromName = "cmiVFX";
        $mail->Subject = $subject; 
        $mail->Body = $body;
        $mail->AddAddress($person);
        $ret = $mail->Send();
        if($ret) {
            $success++;
        }
    }   
    var_dump($success);
} 
```

运行主机名时，我得到了这个

```
server.cmivfx.com 
```

当运行 hostname -f 或 --fqdn 我得到

```
hostname: Name or service not known 
```

重新启动 sendmail 时我得到

```
hostname: Name or service not known 
```

这是我的主机文件

```
127.0.0.1 localhost.localdomain localhost
127.0.1.1 server.cmivfx.com cmivfx.com
69.162.76.226 server.cmivfx.com cmivfx.com 
```

我的主机名文件是

```
server.cmivfx.com 
```

我的邮件服务器指向谷歌应用程序所以挖掘 cmivfx.com 任何给我

```
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 11895
;; flags: qr rd ra; QUERY: 1, ANSWER: 9, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;cmivfx.com.            IN  ANY

;; ANSWER SECTION:
cmivfx.com.     1553    IN  SOA ns1.limestonenetworks.com. noc.limestonenetworks.com. 1344528611 16384 2048 1048576 2560
cmivfx.com.     1553    IN  NS  ns1.limestonenetworks.com.
cmivfx.com.     1553    IN  NS  ns2.limestonenetworks.com.
cmivfx.com.     1544    IN  MX  1 ASPMX.L.GOOGLE.com.
cmivfx.com.     1544    IN  MX  5 ALT1.ASPMX.L.GOOGLE.com.
cmivfx.com.     1544    IN  MX  10 ASPMX2.GOOGLEMAIL.com.
cmivfx.com.     1544    IN  MX  10 ASPMX3.GOOGLEMAIL.com.
cmivfx.com.     1544    IN  MX  5 ALT2.ASPMX.L.GOOGLE.com.
cmivfx.com.     1519    IN  A   69.162.76.226

;; Query time: 0 msec
;; SERVER: 208.115.254.242#53(208.115.254.242)
;; WHEN: Thu Aug  9 11:48:14 2012
;; MSG SIZE  rcvd: 268 
```

最后，当我用我的 gmail 运行邮件 php 代码时，它很好。和其他一些人我得到

```
Could not instantiate mail function 
```

希望我已经提供了足够的信息，以便了解 sendmail 的人可以帮助我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T02:34:27.487

/etc/hosts 和 /etc/hostname 之间存在冲突：将 /etc/hostname 更改为： `cmivfx.com`

如果有特殊原因需要将主机名保留为`server.cmivfx.com`，则可以使用 `/etc/hostname + /etc/resolv.conf let 'hostname -f'`来获取正确的 FQDN。

您可能会在这里获得一些背景信息：[在多个域上配置 FQDN 支持邮件服务器](http://sowact.com/mutiple-domains-supported-mail-server-with-postfixdevecotmysql-on-ubuntu-12-04-lt1/)

# java - 日期时间格式的正则表达式：“Wednesday, August 08, 2012 9:38:31.113 AM”

> ID：11888220
> 
> 赞同：0
> 
> 时间：2012-08-09T16:51:08.373
> 
> 标签：java, regex

我目前有：

`(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday),?\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+[0-3]?[0-9],?\s+[0-2][0-9][0-9][0-9],?\s+([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-9][0-9][0-9],?\s+(AM|PM)`

...作为我的正则表达式，但是当使用一个小测试工具进行断言时，我发现它失败了。哪里搞砸了？我从网络应用程序获取日期时间文本并断言它与正则表达式匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:01:02.213

### 错误的工作工具

事实上，试图*修复*您的正则表达式的所有其他答案都是关于您错误的正则表达式的不同部分；这应该告诉您它不是适合这项工作的工具。

正则表达式在短而紧凑的情况下很难正确，其中一个长度将是正确的噩梦，然后没有人能够在未来触摸它，因为害怕以某种神秘的方式破坏它。

### 惯用的 Java

`SimpleDateFormat.parse()``String`是在 Java中以格式处理日期信息的惯用方式。

### 正则表达式用于匹配

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题 - Jamie Zawinski

该[报价](https://groups.google.com/forum/?fromgroups#!msg/alt.religion.emacs/DR057Srw5-c/Co-2L2BKn7UJ%5B1-25%5D)来自`alt.religion.emacs`邮件列表！

### 糟糕的解决方案来说明为什么`SimpleDateFormat.parse()`要做正确的事情。

无论如何，你可以用正则表达式匹配你想要的，但你不应该**做**所有你想要做的**验证。**您将验证逻辑与匹配逻辑混为一谈，两者似乎在某些领域重叠，但在这种情况下，验证应该是代码，而不是正则表达式测试。

[`(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday), (January|February|March|April|May|June|July|August|September|October|November|December) (\d{2}), (\d{4}) (\d{1,2}):(\d{2}):(\d{2})\.(\d{3}) (AM|PM)`](http://rubular.com/r/1LXKOkkqdY)

上面的表达式将**匹配**您在标题中请求的字符串。但它不会尝试验证数字的范围，如果你这样做了，你将如何处理**闰年和二月？**，正则表达式维护起来会更糟。

在这种情况下，您应该使用正则表达式对数据进行分类以确保它*与*模式或格式匹配，然后将其传递给真正的解析器或将组传递给实际执行范围验证的方法和其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:58:32.773

正则表达式可能不是解析日期的最佳工具，但这是您的正则表达式中唯一让我印象深刻的东西。

您的时间似乎需要三位数的秒数，并且不包括毫秒：

```
([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-9][0-9][0-9] 
```

尝试将其更改为以下内容：

```
([01]?[0-9]|2[0-3]):[0-5][0-9]:[0-9]{2}\.[0-9]{3} 
```

请注意，如果要保存某些字符，也可以将所有 更改`[0-9]`为。`\d`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:00:26.160

您已经省略了 Seconds 并且您`:`在正则表达式中使用 a 毫秒，但`.`在您的问题标题示例中使用 a 。所以试试：

```
(Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday),?\s+(January|February|March|April|May|June|July|August|September|October|November|December)\s+[0-3]?[0-9],?\s+[0-2][0-9][0-9][0-9],?\s+([01]??[0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9].[0-9][0-9][0-9],?\s+(AM|PM) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:23:18.480

尽管我同意之前的发言者的观点，即正则表达式不适合这项工作，但这里有一个自动生成的片段，它将与您的确切日期相匹配：

```
import java.util.regex.*;

class Main
{
  public static void main(String[] args)
  {
    String txt="Wednesday, August 08, 2012 9:38:31.113 AM";

    String re1="((?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday|Tues|Thur|Thurs|Sun|Mon|Tue|Wed|Thu|Fri|Sat))";    // Day Of Week 1
    String re2=".*?";   // Non-greedy match on filler
    String re3="((?:Jan(?:uary)?|Feb(?:ruary)?|Mar(?:ch)?|Apr(?:il)?|May|Jun(?:e)?|Jul(?:y)?|Aug(?:ust)?|Sep(?:tember)?|Sept|Oct(?:ober)?|Nov(?:ember)?|Dec(?:ember)?))";   // Month 1
    String re4=".*?";   // Non-greedy match on filler
    String re5="((?:(?:[0-2]?\\d{1})|(?:[3][01]{1})))(?![\\d])";    // Day 1
    String re6=".*?";   // Non-greedy match on filler
    String re7="((?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3})))(?![\\d])";  // Year 1
    String re8=".*?";   // Non-greedy match on filler
    String re9="(\\d+)";    // Integer Number 1
    String re10=".*?";  // Non-greedy match on filler
    String re11="(\\d+)";   // Integer Number 2
    String re12=".*?";  // Non-greedy match on filler
    String re13="(\\d+)";   // Integer Number 3
    String re14=".*?";  // Non-greedy match on filler
    String re15="(\\d+)";   // Integer Number 4
    String re16=".*?";  // Non-greedy match on filler
    String re17="((?:[a-z][a-z]+))";    // Word 1

    Pattern p = Pattern.compile(re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11+re12+re13+re14+re15+re16+re17,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
    Matcher m = p.matcher(txt);
    if (m.find())
    {
        String dayofweek1=m.group(1);
        String month1=m.group(2);
        String day1=m.group(3);
        String year1=m.group(4);
        String int1=m.group(5);
        String int2=m.group(6);
        String int3=m.group(7);
        String int4=m.group(8);
        String word1=m.group(9);
        System.out.print("("+dayofweek1.toString()+")"+"("+month1.toString()+")"+"("+day1.toString()+")"+"("+year1.toString()+")"+"("+int1.toString()+")"+"("+int2.toString()+")"+"("+int3.toString()+")"+"("+int4.toString()+")"+"("+word1.toString()+")"+"\n");
    }
  }
} 
```

如果一个人无论如何都故意想要可怕的正则表达式，那么网上有一个很棒的工具：http: [//txt2re.com/](http://txt2re.com/)

# actionscript-3 - 如何更改弹出窗口的显示顺序？

> ID：11888221
> 
> 赞同：2
> 
> 时间：2012-08-09T16:51:10.007
> 
> 标签：actionscript-3, apache-flex

我的应用程序中运行了 30 秒计时器，30 秒后会弹出一个窗口并要求“重置”。在某些页面中，我还有一个自定义弹出窗口来显示一些消息。

当应用程序上没有弹出窗口时，30 秒计时器可以完美运行，但如果页面上同时有一个名为“XYZ”的弹出窗口，则应用程序超时 - 在这种情况下，我的计时器窗口显示在“XYZ”弹出窗口下窗户。

我也试过：`PopUpManager.bringToFront(timeOutWindow);`它没有帮助。

我的问题是如果页面上有多个弹出窗口，如何更改显示顺序？

非常感谢您的帮助，在此先感谢。.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:23:45.400

在使用 addPopup() 创建弹出窗口时，如果您将它们全部放在 PopUpManagerChildList.POPUP 中，那么 BringToFront 应该可以工作。

PopUpManagerChildList.POPUP 是 addPopup 的第四个参数。

# gcc - 通过 macports 安装 libunwind-headers 时遇到问题

> ID：11888222
> 
> 赞同：6
> 
> 时间：2012-08-09T16:51:12.723
> 
> 标签：gcc, macports

**在努力**

```
sudo port install gcc47 
```

**看来我不见了**

*   cctools
*   ld64
*   libunwind-headers

**两者都在哪里**

*   cctools
*   ld64

**取决于**

*   libunwind-headers

**当试图**

```
sudo port install libunwind-headers 
```

**我得到：**

```
--->  Building libunwind-headers
Error: org.macports.build for port libunwind-headers returned: command execution failed
Please see the log file for port libunwind-headers for details:
    /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_libunwind-headers/libunwind-headers/main.log
To report a bug, follow the instructions in the guide:
    http://guide.macports.org/#project.tickets
Error: Processing of port libunwind-headers failed 
```

日志文件说：

```
25 :info:build Command failed: cd "/opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_libunwind-headers    /libunwind-headers/work/libunwind-30" && /usr/bin/xcodebuild  -target "libunwind-ld" -configuration Deployment build OBJROOT=build/ SYMROOT=build/ MACOSX_DEPLO    YMENT_TARGET=10.8 ARCHS= SDKROOT="" GCC_VERSION=com.apple.compilers.llvm.clang.1_0
 26 :info:build Exit code: 69
 27 :error:build org.macports.build for port libunwind-headers returned: command execution failed
 28 :debug:build Error code: NONE
 29 :debug:build Backtrace: command execution failed
 30     while executing
 31 "$procedure $targetname"
 32 :info:build Warning: targets not executed for libunwind-headers: org.macports.activate org.macports.build org.macports.destroot org.macports.install
 33 :notice:build Please see the log file for port libunwind-headers for details:
 34     /opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_libunwind-headers/libunwind-headers/main.log 
```

**请问我该怎么做？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T17:08:41.357

在尝试安装之前，您需要接受 Apple 的许可协议`libunwind-headers`

```
sudo xcodebuild -license agree 
```

# image - layout.phtml 的图片不显示

> ID：11888226
> 
> 赞同：0
> 
> 时间：2012-08-09T16:51:28.157
> 
> 标签：image, zend-framework, layout

> **可能重复：**
> [Zend Framework 布局中的图像](https://stackoverflow.com/questions/3414289/images-in-zend-framework-layout)

我遇到的问题是**layout.phtml**的图像未显示在操作视图中

当我输入这个 url`http://localhost/application/public/controller`时，图像会正确显示，但是当 url 是（例如）**layout.phtml**`http://localhost/application/public/controller/any-action(even the index action)`的图片时，不会显示。

 **我所有的图像都位于`public`应用程序目录中的一个目录中。

我不知道该问题的根源或如何解决，所以请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:05:41.713

你应该使用 URL 助手来处理路径

```
<img src="<?php echo $this->baseUrl('images/logo.png'); ?>" /> 
```**

# objective-c - 在 Objective-C 中基于较小的 PNG 以编程方式创建大的 PNG

> ID：11888228
> 
> 赞同：-2
> 
> 时间：2012-08-09T16:51:29.843
> 
> 标签：objective-c, macos, image, image-processing

我正在尝试基于 Objective-C 中较小的 PNG 以编程方式创建一个大的 PNG。较小的 PNG 是我用作水印的徽标。我想将较小的PNG放在大PNG的右下角。大 PNG 应该是源视频的大小并且具有透明背景。

我在 C# 中有这个工作，但不能完全弄清楚如何在 Objective-C 中工作。我想我应该使用 Image I/O 库。

```
Bitmap bm;
int shortestSide;
if (videoWidth > videoHeight)
    shortestSide = videoHeight;
else
    shortestSide = videoWidth;

var logoDimension = (int)(shortestSide * 0.05);

Image logo;
if (logoDimension <= 16)
    logo = Resources.watermark_16x16;
else if (logoDimension <= 24)
    logo = Resources.watermark_24x24;
else if (logoDimension <= 36)
     logo = Resources.watermark_36x36;
else if (logoDimension <= 48)
     logo = Resources.watermark_48x48;
else if (logoDimension <= 54)
     logo = Resources.watermark_54x54;
else
     logo = Resources.watermark_64x64;

var logoPoint = new Point(videoWidth - logo.Width * 2, videoHeight - logo.Height * 2);

var image = new Bitmap(videoWidth, videoHeight, PixelFormat.Format32bppArgb);
using (var g = Graphics.FromImage(image))
{
    g.DrawImageUnscaled(logo, logoPoint);
}

bm = image;
bm.Save(watermarkPath, ImageFormat.Png); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:48:19.730

这是我为合并图像而写的博客文章的链接。这是一个 UIImage 类别，它将传入的图像覆盖（或覆盖）到现有的 UIImage。

[http://saveme-dot-txt.blogspot.com/2011/06/merge-image-function.html](http://saveme-dot-txt.blogspot.com/2011/06/merge-image-function.html)

基本上关键是创建一个新的图像上下文，将您的第一张图像绘制到上面，然后是第二张，然后返回新图像。

获得新图像后，我认为您可以执行以下操作：

```
 NSData *dataForPNGFile = UIImagePNGRepresentation(yourImage); 
```

获取PNG编码。

# objective-c - iOS 横向和纵 向委托混淆

> ID：11888230
> 
> 赞同：1
> 
> 时间：2012-08-09T16:51:31.997
> 
> 标签：objective-c, ios, uiapplicationdelegate, landscape-portrait

在大多数情况下，我已经把事情弄清楚了。我似乎无法解决一个小问题。我将尽可能地概述这个问题，我认为此时提出我的问题不需要我发布任何代码，但请随时提问。

与大多数应用程序一样，我的应用程序默认为纵向查看。在主交互区域，当用户旋转设备时，我不必提供更改任何主要内容的代码，因为相反，我在视图堆栈顶部放置了一个新视图。这很好用，是用户可以在横向模式下与设备交互的两种方式之一。

第二个是模态显示的屏幕（来自这个主要交互区域），它使用 UIWebView 从应用程序内播放 YouTube 视频，这同样运作良好。

当用户在横向模式下关闭模态视图控制器时，就会出现问题。发生的情况是用户返回主交互区域，内容调整为横向模式，并且没有调用视图控制器通常为该主交互区域调用的委托方法，我使用此委托方法使横向更改正常：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration { } 
```

我将包括确切发生的情况的屏幕截图。

![主要互动区域](../Images/630406e83647d2557486f66663afde97.png)

*纵向模式下主要交互区域的屏幕截图。*

![横向模式](../Images/348c45a1ae1f37f55731b7dcc3a5816d.png)

*横向模式下主要交互区域的屏幕截图。*

![从模式返回时的横向模式](../Images/626fb4bdb3b6fa836313f42c3c0d907d.png)

*在横向模式下关闭模态视图控制器并返回主交互区域后主交互区域的屏幕截图（注意内容已居中并已切断顶部并且没有拉伸（不是我要求它去做）*

理想情况下，我想从横向模式返回主屏幕，让屏幕截图 2 成为用户看到的内容，而不是屏幕截图 3。

有什么建议么？同样，我很高兴发布代码。提前致谢。

*编辑*

回答：

如此简单，我采用了将景观视图放在视图堆栈顶部的代码，当它在它自己的方法中打开时。然后我在它之前休息的委托方法和 ViewWillAppear 中调用该方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:10:08.957

`willRotateToInterfaceOrientation:`如果视图控制器控制屏幕上的顶级视图，系统只会发送到视图控制器。由于您正在呈现模态视图控制器，因此模态视图控制器会得到`willRotateToInterfaceOrientation:`，而您的（隐藏的）视图控制器不会。

`viewWillAppear:`当视图控制器的视图即将重新出现时，系统将发送到视图控制器，因为模态视图控制器正在消失。所以你应该实施`viewWillAppear:`. 在该方法中，检查界面是否为横向。如果是，请显示您的横向视图。否则，隐藏您的横向视图。

# vim - 让 e 表现得像 e！在 vim 中

> ID：11888232
> 
> 赞同：1
> 
> 时间：2012-08-09T16:51:51.430
> 
> 标签：vim, alias

我第一次给 vim 一个旋转。我已经完成了

```
set hidden 
```

在我的 .vimrc 中，因为我不介意留下未保存的文件。`e!`但是现在输入等等似乎有点没有意义，`bnext!`而不仅仅是`e`等等`bnext`。我可以让这些命令暗示覆盖吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:59:49.093

尝试这样做：

```
cabbrev e <c-r>=(getcmdtype()==':' && getcmdpos()==1 ? 'e!' : 'e')<CR> 
```

然后，当你输入`:e`它应该这样做`:e!`

更多信息可以在[这里](http://vim.wikia.com/wiki/Replace_a_builtin_command_using_cabbrev)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:20:58.330

只是做`:cab e e!`，作品`:cab q q!`和未保存的文件被关闭。

# jquery - html5拖放时的谷歌浏览器错误

> ID：11888237
> 
> 赞同：0
> 
> 时间：2012-08-09T16:52:18.070
> 
> 标签：jquery, html, google-chrome, drag-and-drop

我尝试用 jquery 和 html5 原生拖放来实现一些东西。

```
obj.attr("draggable", "true")
        .addClass("initialized")
        .on("dragstart", function(ev) {

            var res = ev.originalEvent.dataTransfer.setData('text/plain', "my text");

            console.log(res, "--", ev.originalEvent.dataTransfer.getData("text/plain"));

            ev.originalEvent.dataTransfer.effectAllowed = 'move';
        }); 
```

在萤火虫控制台中运行此代码后，我有以下输出：

> 真正的“--”“我的文字”

一切正常，但在 chrome 中，输出是

> true "--" 未定义

我真的不明白问题出在哪里。似乎chrome不知道如何读取数据。有没有人有想法在 chrome 上进行这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T19:44:42.607

我遇到了同样的问题，我发现 Drag'n'Drop 的 HTML5 规范令人困惑。

您只能`setData`在`dragstart`

你只能`getData`在 drop中使用

对于其他事件，您应该解析可用（尚未测试）但不包含内容的数据类型。

检查[dndevents](http://developers.whatwg.org/dnd.html#dndevents)和“保护模式”

# jquery - 结合 jquery fadeOut 和 scrollTop: 不完全淡出

> ID：11888238
> 
> 赞同：1
> 
> 时间：2012-08-09T16:52:18.160
> 
> 标签：jquery, fadeout, scrolltop

我在全屏画廊的底部放置了一个“向下滚动”按钮。（全屏图库下方有内容。）

[这是](http://www.matsmithphotography.com/mspv3)我页面的链接，您可以自己查看。

我的问题不是特定的[Galleria](http://galleria.io/docs/)，但这就是我正在使用的。因此，我使用 Galleria API 创建了一个新元素，并将其附加到 Galleria 容器中。

然后我在这个元素上使用 scollTop 然后fadeOut（在向元素添加 ID、进一步的类和一些 HTML 之后）：

```
this.$('scrollnote').attr('id', 'scrollnotecontainer').html("<h6>Scroll down</h6>").addClass('hide-for-touch').click(function(){
    $('html, body').animate({
        scrollTop: $("#scrollnotecontainer").offset().top
    }, 900);        
    $(this).fadeOut();
}); 
```

**问题**：当您单击此“滚动到” div 时，一切都按预期工作，但元素并没有完全淡出。

一旦我删除：

```
$('html, body').animate({
        scrollTop: $("#scrollnotecontainer").offset().top
    }, 900); 
```

从图片中（离开淡出），元素确实完全淡出。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:57:14.753

也许尝试这样做？滚动完成后将发生淡出，以防同时执行两者的操作导致问题：

```
this.$('scrollnote').attr('id', 'scrollnotecontainer').html("<h6>Scroll down</h6>").addClass('hide-for-touch').click(function(){
    $('html, body').animate({
        scrollTop: $("#scrollnotecontainer").offset().top,
        complete: function() { $(this).fadeOut(); }
    }, 900);        
}); 
```

# php - 通过 URL 将数据发送到 php，具有不同数量的变量

> ID：11888239
> 
> 赞同：0
> 
> 时间：2012-08-09T16:52:18.147
> 
> 标签：php, objective-c

我有一个 .php 文件，它从其 URL 中的参数中获取一些信息。这一直很好，直到我意识到每次调用 URL 时，都会有不同数量的变量。

例子：

`www.myurl.com/webserivce?var1=20&var2=30`

`www.myurl.com/webserivce?var1=20&var2=30&var3=40`

如果我的 .php 文件中有 3 个变量，并且只发送带有 2 的 URL，它就会崩溃。

一种可能的解决方法是我有 3 个变量，并且只发送 1 个，我可以用“NULL”或类似的东西填充另外 2 个： `www.myurl.com/webserivce?var1=20&var2=NULL&var3=NULL`

我只是想知道是否有更好的方法。

顺便说一句，我正在从 iOS 应用程序发送此 URL 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:05:27.060

为什么不改为使用 POST 并发送结构化数据格式？

您可以在 Obj-C 中轻松构造一个 JSON 对象，发送它，然后在 PHP 中对其进行解码。它将更加灵活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:55:42.227

您可以在 php 脚本中将变量设置为 null：

```
if(!isset($_GET['var1'])) $_GET['var1']="NULL";
if(!isset($_GET['var2'])) $_GET['var2']="NULL";
if(!isset($_GET['var3'])) $_GET['var3']="NULL"; 
```

因此，发送 www.myurl.com/webserivce?var1=20&var2=30 将与 www.myurl.com/webserivce?var1=20&var2=30&var3=NULL 相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:56:17.080

[这是你的朋友](http://php.net/manual/en/function.isset.php)。您可能没有检查变量是否已设置并尝试对它们进行处理，因此由于访问 NULL 变量而导致崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:03:01.493

我认为最好的方法是预初始化 Web 服务中的所有变量

# ios - 如何将 pickerColumn 的宽度调整为 pickerColumns 内的文本？

> ID：11888240
> 
> 赞同：0
> 
> 时间：2012-08-09T16:52:24.480
> 
> 标签：ios, titanium, appcelerator, picker

到目前为止，我只能通过代码手动调整每个 PickerColumn 的大小，但我希望每个 PickerColumn 根据其中任何一个最大 PickerRow 的内容自动调整。这是因为我正在使用动态 PickerColumns，其 PickerRows 内容根据之前 PickerColumn 的选定值而变化。我发现了如何使用下面的代码来缩放整个 Picker：

```
var transformPicker=Ti.UI.create2DMatrix().scale(0.5);
var picker = Ti.UI.createPicker({
    width:500,
    height:10,
    top:0,
    transform:transformPicker
}); 
```

我试图将转换矩阵应用于 PickerColumn 但它没有做任何事情。有人知道如何调整它们的大小吗？还是我试图调整错误的大小？

提前感谢您可以给我的任何建议，我是在 Titanium 中为 iOS 开发的新手，尽管不难习惯它的 API，但真正的问题是我正在尝试的小技巧弄清楚这会让整个事情变得有点混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T03:58:10.563

如果您使用的转换很可能会被 Apple 拒绝，因为这是 Apple 特定的 UI 元素，因此任何严重的调整大小都会违反人机界面指南。如果您发现屏幕宽度的列太多，那么您可能需要放弃 Picker 元素 :-( 或面对 Apple 的愤怒。

但要回答有关选择器列动态调整大小的问题，只需使用选择器的*reloadColumn( Titanium.UI.PickerColumn column )*方法。这将根据选择器大小和行内容调整大小。还可以考虑使用PickerColumn 的*updateLayout( Dictionary params )*。

[在此处查看文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.Picker)。

# google-chrome - Chrome 主题：将鼠标悬停在网页上的链接上时如何更改 URL 文本的颜色？

> ID：11888241
> 
> 赞同：6
> 
> 时间：2012-08-09T16:52:27.117
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-theme

我对开发 Chrome 主题非常陌生。一切都很顺利，但是当我将鼠标指针悬停在链接上时，由于其字体颜色，显示在左下方的 URL 不可读！如何更改字体颜色？

![网址字体](../Images/252b2e6bdd557414981fa16fe604407a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T16:53:50.550

状态栏的颜色来源于 的`toolbar`颜色，其文本的颜色来源于`tab_text`. 好吧，它在 Chrome 6 中，但我很确定一种颜色来自另一种颜色的东西，而且仍然相同。看看列出这些东西的旧文档....
[https://docs.google.com/document/pub?id=1jt9vdUY9O5IMm6Zoi2Kz0LWFfFZpvP69qjy6PoGsEoA](https://docs.google.com/document/pub?id=1jt9vdUY9O5IMm6Zoi2Kz0LWFfFZpvP69qjy6PoGsEoA)
...就像我说的那样我已经很久没有更新它了（Chrome 6），但是那些东西应该还是一样的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-06T15:55:18.597

这是一个更新的答案：

我发现一些使用 Chrome 应用程序生成的主题，如我的 Chrome 主题，为“工具栏”创建 JSON。默认情况下，它赋予它透明度，如下所示：`"toolbar":[228,228,228, 0.6],`

您需要删除最后一个数字，即 alpha。所以它看起来像这样：`"toolbar":[228,228,228],`

现在它完美地工作了。享受！

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-09T18:19:31.953

`<a>`在 CSS 或内联样式中为标签添加颜色。

> 一个{颜色：#FF0000；文字装饰：无；}

```
 a:hover 
    {
             color:#00FF00; 
             text-decoration:none; 
             cursor:pointer;  
     } 
```

# android - Android：使用jackson逐个对象解析JSON对象

> ID：11888242
> 
> 赞同：3
> 
> 时间：2012-08-09T16:52:27.547
> 
> 标签：android, json, jackson, arrays

我想从我的 android 应用程序中的数据库访问数据。为此，我使用了 PHP 网络服务和 JSON 格式的数据。当我向网络服务询问数据时，我得到如下信息：

```
{"products":
  [
    {"product":["prod_id_1","prod_name_1","prod_barcode_1","prod_brand_1","prod_wrapper_1","12.00000"]},
    {"product":["prod_id_2","prod_name_2","prod_barcode_2","prod_brand_2","prod_wrapper_2","24.00000"]}
  ]
} 
```

但有 1000 多种产品。显然， jsonObject 和 jsonArray 对此无能为力。所以我想使用杰克逊流式 json 解析器。我无法在我的应用程序中保留产品列表，因为这会消耗大量内存。所以我想做的是从json中读取一个产品，将其写入我的android SQLite数据库，读取下一个产品，将其写入数据库等等。

我看过这个[例子](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)，但如果我使用它，我必须使用产品列表。所以我的问题是，如何逐个产品地阅读这个 jsonarray？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:58:30.747

如果有人需要这个，这就是我解决它的方法，从 [这里](http://wiki.fasterxml.com/JacksonInFiveMinutes)学到的。

```
JsonFactory f = new JsonFactory();
JsonParser jp = f.createJsonParser( httpclient.execute(httppost, responseHandler) );

jp.nextToken();

while(jp.nextToken()!=JsonToken.END_OBJECT){
    jp.nextToken();
    while (jp.nextToken()!=JsonToken.END_ARRAY){
        jp.nextToken();
        while(jp.nextToken()!=JsonToken.END_OBJECT){
                String fieldname = jp.getCurrentName();

                while (jp.nextToken()!=JsonToken.END_ARRAY){                            
                       produto p_json = new produto(); //produto is my product class
                        p_json.id = Integer.parseInt(jp.getText());
                    jp.nextToken();
                    p_json.name = jp.getText();
                    jp.nextToken();

                    p_json.cod_barras = jp.getText(); //product barcode
                    jp.nextToken();
                    p_json.marca = jp.getText(); //product brand
                    jp.nextToken();

                    String formato = jp.getText(); //product wrapper
                    jp.nextToken();
                    p_json.formato = formato+"["+jp.getText()+"]"; //formatting as required by my database, as wrapper+"["+number+"]"

                    //The following line writes the product in the database...
                    bd.addProduto(p_json);
                    }
                }
            }
    }

    jp.close(); // ensure resources get cleaned up timely and
                            // properly 
```

# java - Java JDBC 从不同的调用返回重复的结果集

> ID：11888244
> 
> 赞同：0
> 
> 时间：2012-08-09T16:52:40.603
> 
> 标签：java, mysql, jdbc

我正在构建一个与 MYSQL 数据库对话的 Java Web 应用程序。当一个请求进来时，有几件事情要做。

首先，我必须验证一些数据。为此，我有一个静态方法，可以传递一些数据并验证它是否准确。此验证的一部分要求我使用另一个返回 ResultSet 的静态方法查询数据库

即 Web 应用调用 Validate(String data) 调用 queryData()

当我这样做时，它运行良好。

现在，在调用数据之后，我调用另一个静态函数，将一些数据插入到数据库中。此插入函数调用（有时但不总是）完全相同的 queryData 函数来获取数据。

即调用queryData() 的web 应用调用insertData(data)。所以程序流程如下

```
Webapp
|----> Validate()
          |-------->queryData()
           <-----------|
<---------|
|
|------>insertData()
          |-------->queryData()
           <-----------|
<---------| 
```

我正在使用在 queryData 方法中本地定义的 PreparedStatement 查询数据库

正如我所说，验证方法工作正常，但是当涉及到插入方法时，应用程序崩溃了。

我仔细检查了两种情况下的 SQL 语句是否相同，甚至打印出结果集的内存位置，它们位于不同的位置。但是，当我为结果集打印出 isBeforeFirst() 时，它在验证方法中为 true，但在 insert 方法中为 false。

似乎 JDBC 正在返回 ResultSet 的副本（它保存在不同的内存位置），但它实际上并没有创建一个新的 ResultSet ，它将位于第一行之前。

简单的解决方案是先将结果集返回到之前，但这并不能解决问题。它仍然说 resultSet 不是在 first 之前。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:59:48.763

我傻了，我找到了原因。就在调用 queryData 函数之前，我实际上是在修改数据，以便查询函数的结果返回一个空集。在我调用 queryData 后，应用程序将尝试读取数据，导致 SQLException 并将数据库回滚到我修改任何内容之前，因此我从未看到查询之间有任何区别。

感谢所有试图提供帮助的人。

# android - 在 ProgressDialog 运行时运行 Toast

> ID：11888249
> 
> 赞同：1
> 
> 时间：2012-08-09T16:53:01.760
> 
> 标签：android, progressdialog, toast

是否可以在 ProgressDialog 运行时显示 Toast？如果是，有一些关于如何做的例子吗？

谢谢。

我当前的代码不起作用：

```
final ProgressDialog pd = ProgressDialog.show(
                        BotonesServicio.this, "Medidas",
                        "Comprobando datos");
                new Thread(new Runnable() {
                    public void run() {
                    Toast.makeText(FacturasIFirmar.this,
                        "Trying to show toast", Toast.LENGTH_LONG)
                           .show();

                        pd.dismiss();
                    }
                }).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:15:36.000

ProgressDialog “冻结”线程，因此所有其他操作必须在单独的线程中执行。不过，您必须在 UI 线程上创建您的 toast。

尝试这样的事情：

```
 ProgressDialog dialog = new ProgressDialog(context);
    final Toast toast = Toast.makeText(context, "text", Toast.LENGTH_LONG);
    Thread thread = new Thread( new Runnable() {

        public void run() {
            //Calculations here
            try {

                Thread.sleep(2000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            toast.show();
        }

    });
    thread.start();
    dialog.show(); 
```

如果您想与 UI 线程通信，您应该使用 AsyncTask 或将消息发送到处理程序的常规线程，处理程序在 UI 线程上执行操作。

祝你好运！

# iphone - 模拟iphone锁屏

> ID：11888250
> 
> 赞同：1
> 
> 时间：2012-08-09T16:53:11.663
> 
> 标签：iphone, ios, core-animation, lockscreen, core-motion

我正在尝试模拟 ios 锁定屏幕，我已经完成了解锁和锁定屏幕的幻灯片，但我不知道如何在两者之间进行转换，我希望它看起来与真实的动画完全相同，锁定垫从底部出现，推动幻灯片解锁，同时密码字段将幻灯片向左推提前

让我换个问题，我想做与滑动幻灯片以解锁并出现锁定屏幕时发生的动画相同的操作。待解锁的幻灯片从右向左移动，同时文本字段出现替换要解锁的幻灯片，同时出现键盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:12:41.603

参考开源如何实现幻灯片取消。[滑动取消](https://github.com/iosdeveloper/SlideToCancel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-05T13:39:00.697

请查看**WWDC 2013 session 217** “ **Exploring Scroll Views on iOS 7** ”。

他们谈论他们如何在该视频中构建锁定屏幕。

此外，您可能会发现我的模仿锁屏 -> 相机事务的项目很有帮助

[https://github.com/haawa799/iOS7LockScreenCameraLikeTransition](https://github.com/haawa799/iOS7LockScreenCameraLikeTransition)

# embed - 有没有办法通过应用脚本中的面板将 Google Doc 嵌入网站？

> ID：11888254
> 
> 赞同：0
> 
> 时间：2012-08-09T16:53:23.977
> 
> 标签：embed, panel, google-apps-script, google-docs

是否有任何计划通过 Google 应用程序脚本将 Google Docs 嵌入到网站中？如果没有，是否有解决方法 - 这将是一项非常酷（更不用说无价之宝）的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:48:25.820

1.  您可以在没有 Apps 脚本的情况下直接将 Google Doc 嵌入网站。

2.  如果您想将文档嵌入到应用程序脚本中，然后将脚本放入 Google 站点，则无法使用面板。但是，使用[HtmlService](https://developers.google.com/apps-script/service_html)**可能**是可能的。您可以尝试将您从文档中获得的 iframe 代码放入 html 页面。我不确定它是否会通过 Caja 消毒剂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T11:17:54.550

您可以检查该页面：

[https://developers.google.com/apps-script/articles/embedding_docslist_in_sites](https://developers.google.com/apps-script/articles/embedding_docslist_in_sites)

它提供了许多使用 Google 脚本制作应用程序的示例和指南

我试过做一些练习，效果很好！

```
function showFolderInSite() {
  var files = DocsList.getFolderById("FOLDER_ID").getFiles();
  var page = SitesApp.getPageByUrl("PAGE_URL");
   for(i in files){
     page.addWebAttachment(files[i].getName(), '', files[i].getUrl());
  }
} 
```

# c# - ReferenceEquals - true 和 Equals - 错误的预期行为？

> ID：11888259
> 
> 赞同：3
> 
> 时间：2012-08-09T16:53:50.303
> 
> 标签：c#

如果`object.ReferenceEquals`返回 true，是否应该`instance.Equals`始终返回 true？

您会认为下面的输出是通过/失败的意外行为吗？

```
Assert.True(object.ReferenceEquals(obj,obj));
Assert.True(obj.Equals(obj)); 
```

我个人认为它很奇怪，并且不能真正想到一个*很好*的理由，一个实例不应该等于它自己。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T16:58:03.260

有两种方法可以回答您的问题。

*   这是出乎意料的行为，是的。一个设计合理的类`.Equals`如果从`.ReferenceEquals`. 这在 MSDN*开发类库的设计指南*，*[实现 Equals 方法一](http://msdn.microsoft.com/en-us/library/336aedhh.aspx)*文中进行了编纂：

    > 遵循 Object.Equals 方法上定义的约定，如下所示：
    >      `x.Equals(x)`返回 true。

*   但是该要求不是由语言或运行时强制执行的。有问题的类的设计者可以完全自由地定义`Equals`为`{ return false; }`. 反常，但可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T16:55:07.517

是的，如果引用 equals 为 true，则 equals 的正确实现应该返回 true。

# asp.net - https 服务器上的 Silverlight 查看器需要访问 http 服务器上的 xap 文件

> ID：11888260
> 
> 赞同：1
> 
> 时间：2012-08-09T16:54:00.270
> 
> 标签：asp.net, silverlight, iis-7, silverlight-4.0, https

我有一个项目托管在两个单独的 iis 服务器上。站点/服务器 1 包含站点的核心，是使用 https 协议的 asp.net。站点/服务器 2 是第 3 方服务器，其中包含我需要从站点 1 引用的 silverlight 应用程序。

![在此处输入图像描述](../Images/4ec1e3b98c7faa5474ee379925252ec5.png)

站点一有一个用于 silverlight 控件的查看器页面，除了我动态加载 initparams 以指定服务器用户名和一些其他参数之外，这里没有什么特别之处。我遇到问题的地方是在两个服务器都是http的测试环境中，我可以毫无问题地访问xap文件。但是，当我移动到服务器 1（包含查看器）调用服务器 2 上的 xap 文件的开发/生产环境时，silverlight 应用程序将不会加载。我在服务器 2 上有以下 clientaccesspoliy 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*" />
        <domain uri="http://*" />
        <domain uri="https://*" />
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

是否可以进行此调用（https 从 http 中提取 xap 文件）？

我的另一个想法是让两台服务器都使用 https，但是在测试时，因为 iis 服务器证书是自签名的，所以我从 IE 收到一个安全提示，这会导致应用程序超时，因为无法验证信任。

我认为的一个技巧是覆盖证书信任并通过代码将 ti 设置为 true，但我不是这个想法的忠实粉丝。

任何人都可以确认我想要完成的工作是否可行或是否建议不同的实施？

提前致谢

-干杯

**更新**

由于安全性或 Silverlight，这似乎是不可能的。我现在追求的一个选择是将html和xap文件保留在服务器2上。我没有尝试加载xap文件，而是在调用silverlight控件的链接的单击事件上获取参数，将它们序列化并传递它们作为序列化对象发送到辅助服务器。然后我可以将这些值直接传递给 sl 控件。不是最干净的方法，但它似乎有效。

# jquery - 追加后无法选择新的

> ID：11888264
> 
> 赞同：0
> 
> 时间：2012-08-09T16:54:28.373
> 
> 标签：jquery, clone, appendto

我尝试克隆一行，然后将其附加如下：-

```
codeTable.$("tr:first").clone().appendTo(codeTable); 
```

代码成功克隆并附加了`<tr>`元素。但是当我尝试使用 Jquery 进行选择时，结果中不包含新元素。

```
codeTable.$('tr'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:57:04.857

你可以试试：

```
codeTable.find("tr:first").clone().appendTo(codeTable); 
```

并得到`tr`：

```
$(codeTable).find('tr'); 
```

或者

```
$('tr', codeTable); 
```

我假设`codeTable`是 jQuery 对象。如果没有，则将其包装在`$()`like`$(codeTable)`中。

# c++ - 预分配向量是否更有效？

> ID：11888265
> 
> 赞同：43
> 
> 时间：2012-08-09T16:54:29.983
> 
> 标签：c++, stl

在由 Stanley B.Lippman、Josee Lajoie 和 Barbara E. Moo 编写的 C++ Primer 第四版中，它指出：

> 因为向量有效地增长，通常最好通过动态添加元素来让向量增长，因为元素值是已知的。

和

> 习惯使用 c 或 java 的读者可能会期望，由于向量元素是连续存储的，因此最好将向量预分配为其预期大小。事实上，情况恰恰相反……

和

> 尽管我们可以在向量中预先分配给定数量的元素，但通常更有效的是定义一个空向量并向其添加元素。

假设这是正确的（作者和他们一样有声望，一个是 C++ 本身的合著者）那么任何人都可以给我一个证明这个陈述的案例，并解释为什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-09T17:02:15.970

这取决于。

如果您不知道最终大小是多少，则让向量使用其分配方案进行分配（通常每次加倍，或附近的某个地方）。这样可以避免为每个元素重新分配：

```
std::vector<int> v;

// good:
for (/* populate v */) // unknown number of iterations
{
    v.push_back(i); // possible reallocation, but not often
}

// bad:
for (/* populate v */) // unknown number of iterations
{
    v.reserve(v.size() + 1); // definite reallocation, every time
    v.push_back(i); // (no reallocation)
} 
```

但是如果你提前知道你不会重新分配，那么预分配：

```
std::vector<int> v;

// good:
v.reserve(10); 
for (/* populate v */) // only 10 iterations (for example)
{
    v.push_back(i); // no reallocations
}

// not bad, but not the best:
for (/* populate v */) // only 10 iterations (for example)
{
    v.push_back(i); // possible reallocation, but not often (but more than needed!)
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-05-20T17:25:16.247

我为这个简单的例子计时：

```
#include<iostream>
#include<vector>

int main() {

    int limit = 100 * 1000 * 1000;
    std::vector<long> my_vec;
    my_vec.reserve(limit); // comment out this line to not preallocate

    for (int i=0; i < limit; i++) {
        my_vec.push_back(i);
    }

    long my_sum = 0;
    for (int i=0; i < limit; i++) {
        my_sum += my_vec[i];
    }

    std::cout << my_sum << std::endl;
    return 0;
} 
```

符合：

```
g++ -std=c++11 -O2 my_file.cpp -o my_exec 
```

并发现差异很大：

没有预分配：

```
real    0m3.366s
user    0m1.656s
sys     0m1.660s 
```

使用预分配：

```
real    0m1.688s
user    0m0.732s
sys     0m0.936s 
```

我的结论是：如果构建向量是程序的重要组成部分，那么为提高效率而进行预分配是有意义的。然而，一遍又一遍地构建一个更大的向量是不可能的，因此它很少是一个瓶颈。但是，使用`reserve()`除了预分配之外还有其他优点。

C++ 编程语言（第 4 次添加）中的 Bjarne Stroustrup 有这样的说法：

> `reserve()`当我读入向量时，我曾经很小心使用。我惊讶地发现，对于我的所有用途，调用`reserve()`并没有显着影响性能。默认的增长策略和我的估计一样有效，所以我停止尝试使用`reserve()`. 相反，我使用它来增加重新分配延迟的可预测性并防止指针和迭代器失效。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-09T16:57:50.977

有可能。这在很大程度上取决于*元素*是什么，复制或构建它们的工作量以及有多少。

如果您预先分配一个向量，您最终会为每个元素调用默认构造函数以生成空元素，然后稍后将项目复制到空间上。如果您添加元素，它可以只复制或构建元素，这可能更有效。

# visual-studio-2010 - 为什么编译器无法在 Visual Studio 中找到我的文件/类？

> ID：11888266
> 
> 赞同：0
> 
> 时间：2012-08-09T16:54:32.860
> 
> 标签：visual-studio-2010, asp.net-mvc-3, visual-studio

我正在关注使用 Visual Studio 2010，sp1 的 asp.net mvc 3 的 Microsoft 音乐商店教程。[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)我正在将代码翻译成VB。

该教程说在 Global.asax 文件的 application_start 方法中添加以下行，但编译器说它找不到文件示例数据：

```
Sub Application_Start()
    System.Data.Entity.Database.SetInitializer(  //MvcMusicStore.Models.SampleData' is not defined.
           New MvcMusicStore.Models.SampleData())
           ...
End Sub 
```

我很困惑为什么编译器找不到这个文件，因为我在项目的models文件夹下有一个SampleData.vb文件，如下图所示：

![在此处输入图像描述](../Images/b41aa53f71bea300e88ec42ab229a2bf.png)

我错过了什么？- 我在 SampleData 类周围添加了一个命名空间语句，以确保它与整个项目在同一个命名空间中

```
Namespace MvcMusicStore
        Public Class SampleData
            Inherits DropCreateDatabaseIfModelChanges(Of MusicStoreEntities)
    ...
        End Class
    End Namespace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:04:41.003

您的命名空间与您的初始化不匹配。要么将命名空间更改为 read `Namespace MvcMusicStore.Models`，要么将初始化更改为 say`new MvcMusicStore.SampleData()`

实际上，由于您在同一个名称空间中，您应该能够编写

`new SampleData()`

# msbuild - 如何让 TeamCity 充分利用 MSBuild 的增量构建支持？

> ID：11888275
> 
> 赞同：12
> 
> 时间：2012-08-09T16:55:05.837
> 
> 标签：msbuild, teamcity

我正在设置 TeamCity（从 CruiseControl.NET 迁移），我正在努力让它通过 MSBuild 执行增量构建。

我有一个小的 .proj 文件，其中包含一个基本构建脚本，用于调用我的解决方案的构建，其中包含从 TeamCity 提供的一些参数。当我手动调用脚本时，MSBuild 的[增量构建](http://msdn.microsoft.com/en-us/library/ee264087.aspx)功能会启动并在后续运行中完全跳过构建。

通过 Team City 调用此脚本时，构建日志每次都会显示干净编译的输出。我在构建过程中观察了工作目录，并且可以看到之前构建的输出并没有消失。

我还通过远程连接到服务器并从命令提示符运行 MSBuild，从该目录手动调用构建脚本。以这种方式运行它会在第一次调用后触发预期的增量构建。

即使从仪表板开始构建而没有进行任何更改，也会发生完整的重建。

我无法确定原因，但似乎有些东西给 MSBuild 一种印象，即它正在获得新的更改并导致它在每次运行时都执行重建。我在 TeamCity 文档中看不到太多可以解释这一点的内容——我的期望是，如果源代码控制系统没有更改，它就不会更新工作文件夹。

TeamCity 是否将一些参数传递给触发重建的构建过程？我可以查看这些参数吗？

* * *

在检查了详细的 MSBuild 日志（`/v:d`命令行开关）后，发生完全重建的原因是由于每次构建时目录`.NETFramework,Version=v4.0.AssemblyAttributes.cs`中的文件都会更新。`<Agent>\temp\buildTmp`

该文件通常位于`%TMP%\.NETFramework,Version=v4.0.AssemblyAttributes.cs`; TeamCity 正在更改本地临时目录环境变量以引用代理的临时文件夹。不幸的是，这个文件是由`Microsoft.Common.targets`构建过程的一部分在不存在时创建的。在每次构建之前删除“临时”文件会导致每次构建都会创建它，并在每个项目文件的构建中动态引用。

我需要找到一种方法来防止在每次构建时重新创建此文件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-13T12:00:47.267

此问题的解决方法是自定义 MSBuild 过程以设置将创建“目标框架 Moniker 程序集属性”文件（问题中提到的文件的正确名称）的路径。

该`TargetFrameworkMonikerAssemblyAttributesPath`属性在 Microsoft.Common.targets 中定义，确定应在何处创建文件。通过覆盖此属性，可以更改位置以使用不同的位置。

这是一个可用于实现合适替换的脚本：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<PropertyGroup>
    <PrepareForBuildDependsOn>
        $(PrepareForBuildDependsOn);
        _SetTargetFrameworkMonikerAssemblyAttributesPath
    </PrepareForBuildDependsOn>
</PropertyGroup>

<Target 
    Name="_SetTargetFrameworkMonikerAssemblyAttributesPath"
    Condition="'$(TEAMCITY_VERSION)' != ''">

    <PropertyGroup>
        <TargetFrameworkMonikerAssemblyAttributesDir
            Condition="'$(TargetFrameworkMonikerAssemblyAttributesDir)' == ''">
            $([MSBuild]::GetRegistryValue("HKEY_CURRENT_USER\Environment", "TMP"))
        </TargetFrameworkMonikerAssemblyAttributesDir>
        <TargetFrameworkMonikerAssemblyAttributesDir
            Condition="'$(TargetFrameworkMonikerAssemblyAttributesDir)' == ''">
            $([MSBuild]::GetRegistryValue("HKEY_CURRENT_USER\Environment", "TEMP"))
        </TargetFrameworkMonikerAssemblyAttributesDir>
        <TargetFrameworkMonikerAssemblyAttributesDir 
            Condition="'$(TargetFrameworkMonikerAssemblyAttributesDir)' == ''">
            $(USERPROFILE)
        </TargetFrameworkMonikerAssemblyAttributesDir>
        <TargetFrameworkMonikerAssemblyAttributesDir
            Condition="'$(TargetFrameworkMonikerAssemblyAttributesDir)' == ''">
            $([System.IO.Path]::Combine('$(WINDIR)', 'Temp'))
        </TargetFrameworkMonikerAssemblyAttributesDir>
        <TargetFrameworkMonikerAssemblyAttributesPath>
            $([System.IO.Path]::Combine('$(TargetFrameworkMonikerAssemblyAttributesDir)','$(TargetFrameworkMoniker).AssemblyAttributes$(DefaultLanguageSourceExtension)'))
        </TargetFrameworkMonikerAssemblyAttributesPath>
    </PropertyGroup>

    <Message Text="Target Framework Moniker Assembly Attributes path is &quot;$(TargetFrameworkMonikerAssemblyAttributesPath)&quot;" Importance="low" />

</Target> 
```

只有在指定为属性时才会执行目标`TEAMCITY_VERSION`，这应该是在 TeamCity 代理执行构建时。

**注意：**的每个子元素都`PropertyGroup`应该在一行上。它们分布在多行中以增加此处的可读性，但额外的换行符会导致脚本失败。

当目标运行时，它会尝试根据注册表中定义的用户环境变量构建合适的路径，首先查找`TMP`and `TEMP`，然后返回到用户的配置文件文件夹，最后返回`C:\Windows\Temp`目录。这与 System.Path.GetTempPath() 记录的顺序相匹配，并且应该导致行为匹配 TeamCity 之外的 MSBuild 执行。

这应该保存为系统某处的 .targets 文件，并使用`<Import>`元素导入到 TeamCity 服务器正在构建的项目的 .csproj 文件中。我在我的 MSBuild 扩展目录 ( `C:\Program Files\MSBuild\`) 下添加了脚本，并通过添加以下导入元素来引用它：

```
<Import Project="$(MSBuildExtensionsPath)\TeamCity\TeamCity.Incremental.targets" /> 
```

Import 元素的位置/顺序无关紧要，但我建议将它包含在`<Import Project="$(MSBuildBinPath)\Microsoft.CSharp.targets" />`应该出现在每个 .csproj 文件中的之后。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-15T15:51:49.813

正如 Paul Turner 所提到的，调整 TargetFrameworkMonikerAssemblyAttributesPath 可以解决这个问题。我没有在 Microsoft 的构建系统脚本中与 High Magick 作斗争，而是在 TeamCity 项目参数中添加了一个环境变量来设置 TargetFrameworkMonikerAssemblyAttributesPath。

在 TeamCity 的项目设置中，我将**env.TargetFrameworkMonikerAssemblyAttributesDir**设置为**%env.windir%\Temp**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-27T18:18:19.873

TeamCity 2017.3 中仍然存在此问题。

我想找到一种比接受的答案详细说明的更容易跟踪的解决方法，所以我做了以下事情：

1.  我将我的文件副本签入`.NETFramework,Version=v4.7.AssemblyAttributes.cs`到我的 VCS
2.  我向使用具有以下属性的 MSBuild 的构建配置添加了一个新的构建步骤：
    *   **跑步者类型**：命令行
    *   **步骤名称**：CopyAssemblyAttributesFile
    *   **运行**：自定义脚本
    *   **自定义脚本**：`copy "%system.teamcity.build.workingDir%\<path_to_AssemblyAttributes.cs Dir>\." "%env.TEMP%\."`

这将第一次复制我的 AssemblyAttributes 文件版本，其中包含初始 VCS 签出的时间戳，

随后 MSBuild 似乎认为它是同一个文件，因为时间戳将保持一致并且现在将正确执行增量构建，这可以从代理上的构建日志中验证。

# mysql - 选择语句中的子查询的 MySQL 问题

> ID：11888279
> 
> 赞同：0
> 
> 时间：2012-08-09T16:55:25.767
> 
> 标签：mysql, sql, database, subquery

我需要使用子查询来命名查询中的列。我在该`SELECT`部分中编写了带有子查询的语句，但收到以下错误消息（从 Codeigniter 返回）：

> 错误号：1064
> 
> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '(SELECT `ps_url_name`FROM `product_selects`WHERE `ps_id`= '1'), `psc_opt_2`A'附近使用正确的语法

```
SELECT
    `psc_opt_1` AS (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '1'),
    `psc_opt_2` AS (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '2'),
    `psc_opt_3` AS (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '3'),
    `psc_opt_4` AS (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '4'),
    `psc_opt_5` AS (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '5')
FROM (`product_stock_control`)
WHERE `psc_prod_id` = '5' 
```

> 文件名：models/products_model.php
> 
> 行号：602

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:57:18.283

`AS`是列别名运算符，表示您选择这些变量作为标识符。您不能使用运算符来识别带有查询的变量。

**参考**：[http ://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)

相反，您需要反转使用别名运算符的方式，如下所示：

```
SELECT
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '1') AS `psc_opt_1`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '2') AS `psc_opt_2`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '3') AS `psc_opt_3`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '4') AS `psc_opt_4`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '5') AS `psc_opt_5`
FROM (`product_stock_control`)
WHERE `psc_prod_id` = '5' 
```

理想情况下，您应该避免使用子查询（尤其是在这种情况下）以避免表锁定开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T16:58:20.463

正确的格式是

```
(SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '1') As `psc_opt_1` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T16:59:01.450

你试过这个：

```
SELECT
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '1') as `psc_opt_1`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '2') as `psc_opt_2`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '3') as `psc_opt_3`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '4') as `psc_opt_4`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '5') as `psc_opt_5`
FROM (`product_stock_control`)
WHERE `psc_prod_id` = '5' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:03:08.093

您想将此列 psc_opt_1 命名为 psc_opt_1 还是您到底想要什么？

命名将是这样的：

```
SELECT
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '1') AS `psc_opt_1`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '2') AS `psc_opt_2`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '3') AS `psc_opt_3`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '4') AS `psc_opt_4`,
    (SELECT `ps_url_name` FROM `product_selects` WHERE `ps_id` = '5') AS `psc_opt_5`
FROM (`product_stock_control`)
WHERE `psc_prod_id` = '5' 
```

# objective-c - 跟进：类方法和实例方法之间的区别？

> ID：11888282
> 
> 赞同：0
> 
> 时间：2012-08-09T16:55:33.917
> 
> 标签：objective-c, class, methods

这是（用户）micmoo 对[类和实例方法有什么区别的回应的后续问题？](https://stackoverflow.com/questions/1053592/objective-c-class-vs-instance-methods).

如果我将变量 numberOfPeople 从静态更改为类中的局部变量，我会得到 numberOfPeople 为 0。我还添加了一行来显示 numberOfPeople 变量每次递增后的值。为避免混淆，我的代码如下：

```
// Diffrentiating between class method and instance method

#import <Foundation/Foundation.h>

// static int numberOfPeople = 0;

@interface MNPerson : NSObject {
    int age;  //instance variable
    int numberOfPeople;
}

+ (int)population; //class method. Returns how many people have been made.
- (id)init; //instance. Constructs object, increments numberOfPeople by one.
- (int)age; //instance. returns the person age
@end

@implementation MNPerson

int numberOfPeople = 0; 
- (id)init{

    if (self = [super init]){
        numberOfPeople++;
        NSLog(@"Number of people = %i", numberOfPeople);
        age = 0;
    }    
    return self;
}

+ (int)population{ 
    return numberOfPeople;
}

- (int)age{
    return age;
}

@end

int main(int argc, const char *argv[])
{
    @autoreleasepool {

    MNPerson *micmoo = [[MNPerson alloc] init];
    MNPerson *jon = [[MNPerson alloc] init];
    NSLog(@"Age: %d",[micmoo age]);
    NSLog(@"Number Of people: %d",[MNPerson population]);
}

} 
```

输出：

在初始化块中。人数 = 1 在初始化块中。人数 = 1 年龄：0 人数：0

案例 2：如果您将实现中的 numberOfPeople 更改为 5（比如说）。输出仍然没有意义。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:10:12.560

`numberOfPeople`您正在隐藏使用实例级别声明的全局变量`numberOfPeople`。将其中一个名称更改为其他名称以避免此问题

# android - Android TTS - 应用程序意外停止

> ID：11888285
> 
> 赞同：1
> 
> 时间：2012-08-09T16:55:50.667
> 
> 标签：android, nullpointerexception, text-to-speech

我已经从在线教程中实现了一个 android TTS 代码。所有教程都有一个文本框和一个提交按钮来捕获它想要说的文本。我的目标是从文件中获取文本然后说话，不需要用户输入（因为这个模块将作为一个类实现，所有用户输入都将发生在主要活动中）。

我实现的代码是

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MyTextToSpeech extends Activity implements OnInitListener{
    /** Called when the activity is first created. */
    private int MY_DATA_CHECK_CODE = 0;

    private TextToSpeech tts;

    private EditText inputText;
    private Button speakButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //inputText = (EditText) findViewById(R.id.input_text);
       // speakButton = (Button) findViewById(R.id.speak_button);

       // speakButton.setOnClickListener(new OnClickListener() {                     

            //public void onClick(View v) {
             //  String text = inputText.getText().toString();
            //   if (text!=null && text.length()>0) {
                  //  Toast.makeText(MyTextToSpeech.this, "Saying: " + text, Toast.LENGTH_LONG).show();
//tts.speak(text, TextToSpeech.QUEUE_ADD, null);
                 //   
               //}
           // }
        //});
        Intent checkIntent = new Intent();
        checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);
        tts.speak("hi this is a test", TextToSpeech.QUEUE_ADD, null); //Added by me
   }

   protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == MY_DATA_CHECK_CODE) {
            if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) {
                    // success, create the TTS instance
                    tts = new TextToSpeech(this, this);

            }
            else {
                    // missing data, install it
                    Intent installIntent = new Intent();
                    installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                    startActivity(installIntent);
            }
     }
   }

    public void onInit(int status) {               
      if (status == TextToSpeech.SUCCESS) {
            Toast.makeText(MyTextToSpeech.this, "Text-To-Speech engine is initialized", Toast.LENGTH_LONG).show();
      }
      else if (status == TextToSpeech.ERROR) {
            Toast.makeText(MyTextToSpeech.this, "Error occurred while initializing Text-To-Speech engine", Toast.LENGTH_LONG).show();
      }
    }       
} 
```

在上面的代码中，我已经注释掉了从用户那里捕获文本的行。当“tts.speak”方法在 onClick 方法中时，代码运行良好。当我最后把它弄出来时，代码行为不端并给出“空指针异常”并关闭我的应用程序。

我该如何解决上述问题。

提前致谢。

PS：如果我之前使用命令 tts = new TextToSpeech(this, this); 在主要活动中，不存在空指针异常，但应用程序不说话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:35:41.340

`tts`您正在初始化方法中的变量`onActivityResult()`。

`TextToSpeech.Engine.ACTION_CHECK_TTS_DATA`您在您的方法中调用活动`onCreate()`，当该活动完成时，您的`onActivityResult()`方法被调用。

这适用于您已注释掉的代码，因为在 TTS 检查活动完成并返回到您的活动并且您已设置`tts = new TextToSpeech(this, this);`.

在您发布的代码中，您`tts.speak()`在将变量`tts`设置为任何内容之前调用 - 这是获得`NullPointerException`.

此外，您需要确保在您尝试与您的参考`onInit()`说话之前已经进行了回调。`tts`这就是为什么，当您`tts`之前初始化引用时，它`NullPointerException`会消失但它不会说话（因为`onInit()`回调尚未发生）。

# c# - C# 在 timerevent 内重定向

> ID：11888288
> 
> 赞同：0
> 
> 时间：2012-08-09T16:55:57.157
> 
> 标签：c#, redirect, timer

我有一个计时器设置在用户点击按钮后 4 秒触发，但在 OnTimedEvent 中我需要将用户重定向到另一个网页。这是我到目前为止所拥有的：

在`onClick`按钮事件中：

```
System.Timers.Timer aTimer = new System.Timers.Timer();
aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
aTimer.Interval = 4000;
aTimer.Enabled = true; 
```

然后在`OnTimed Event()`我有：

```
private static void OnTimedEvent(object source, ElapsedEventArgs e)
{
    Response.Redirect("~/Account/DeleteAccount.aspx");            
} 
```

我也试过

```
HttpContext.Current.Response.Redirect("~/Account/DeleteAccount.aspx"); 
```

在`OnTimedEvent`没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:18:19.380

一旦你发出了一个页面，发送重定向就太晚了：响应已经发送，所以你拥有的响应对象不再有效。

相反，您需要在客户端脚本代码中使用类似的东西来处理它

```
window.setTimeout(function() { window.location.href = "~/Account/DeleteAccount.aspx"; }, 4000); 
```

或者通过在响应中设置一个 Refresh 标头来告诉客户端它需要在那个时候加载一个不同的页面。

此外，从这样的页面内部实例化 Timer 可能是一个坏主意——除了它持有无效的响应对象之外，即使访问者关闭页面，计时器也会挂起，而且它是一个相当昂贵的对象的系统资源。

Source: [asp.net timer and response.redirect](https://stackoverflow.com/questions/4384847/asp-net-timer-and-response-redirect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:05:29.480

标准异步模型在单个 Web 响应的上下文中并不能很好地工作。当您完成设置计时器时，您所做的方法将继续执行，这意味着它将完成构建响应然后发送它（它很可能有时间在 4 秒内完成所有这些操作）。因此，到计时器触发时，响应已经发送并结束。HTTP 的设计是，一旦请求结束，您就不能再发送更多，它最终会被忽略。

你有几个选择。一是确保在 4 秒内不发送响应。（这意味着不是使用计时器，而是使用类似`Thread.Sleep`的东西来等待 4 秒。）另一个是让响应被发送，但要让 JavaScript 或其他客户端代码设置一个计时器并在 4 秒内完成重定向. 如果您有一个页面要在等待时呈现，则需要第二个选项，如果您只想让用户在服务器正在执行某项操作时观看浏览器旋转，则第一个选项是最好的。

如果您的目标不仅仅是等待 4 秒，而是运行一些长时间运行的任务，并且此计时器试图等待它完成，那么您需要更改该设计。在 Web 环境中，您最好直接在当前线程中运行长时间运行的任务（假设长时间运行是一两秒，而不是几分钟/小时），因为您*想*阻止线程继续其业务。如果您启动一个新线程来完成工作，您就不能依赖能够影响响应（因此如果它从不影响响应，则可以新建一个线程）。如果你的要求*真的*很长，或者您想在客户端完成之前向客户端显示某些内容，那么您需要在长时间运行的任务完成之前使用 AJAX 发送响应，然后让它继续向服务器发送新请求以便它可以更新长时间运行的任务生成结果后的页面。 [这](http://code.msdn.microsoft.com/CSASPNETBackgroundWorker-dda8d7b6/view/SourceCode)是一个很酷的例子，展示了这种技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:08:13.667

据我所知（这部分我可能完全错了）这段代码没有意义。这`HttpContext.Current`让我猜这是与 ASP.NET 相关的，并且看到代码在 c# 中，我也猜测它是服务器代码。

在正常情况下（不使用计时器），如果您在服务器上进行重定向；这大概是发生了什么：

1.  客户端向服务器发送请求
2.  服务器运行页面生命周期
3.  在这个周期的某个时刻，a`Response.Redirect`被称为
4.  服务器返回 http-headers 和信息给客户端，它应该导航到给`Response.Redirect`方法的 url。
5.  连接已关闭。

现在，在第 4 点之后，没有办法告诉浏览器导航到其他任何地方（如果您不使用某种形式的服务器发送事件、长池或一般的 COMET）。

所以，问题来了，不是`Response.Redirect`在第 3 点调用，而是启动一个计时器。会发生什么：

1.  计时器启动
2.  服务器完成页面生命周期，并将内容返回给客户端。
3.  连接已关闭。

一段时间后

1.  计时器滴答作响。
2.  您尝试向客户端发送“重定向”，但客户端早已不复存在。

除非您需要在单击按钮时运行其他一些服务器端代码，否则这可能最容易使用 javascript onclick 实现。像这样的东西：`window.setTimeout(function(){window.location = 'newLocation.aspx....';}, 4000/*4 sec*/);`

# vba - 根据多个工作表条件删除工作表

> ID：11888291
> 
> 赞同：0
> 
> 时间：2012-08-09T16:56:05.270
> 
> 标签：vba, excel

我将继续构建与从大型机检索的数据相关的宏，类似于我[之前的问题](https://stackoverflow.com/questions/11620118/finding-numerical-value-pairs-with-conditionals-and-nested-if-then-statements)中提到的内容。

我正在生成大量工作表，使用基于[此处](https://stackoverflow.com/questions/11872651/filtering-column-based-on-range-vba)讨论的自动过滤器标准的宏扩展。出于参考目的，此代码的精简版本如下：

```
Sub AddSheets()

Dim RngOne As Range, cell As Range

For Each cell In RngOne

Sheets.Add After:=Sheets(1)

Sheets(2).Select

Sheets(2).Name = cell.Value

Next

End Sub 
```

当我处理数据集时，似乎我的用户删除导出到所选目的地后生成的工作表可能是方便的。但是，为了便于使用，我试图保留那些与我的宏相关的工作表。该`OR`条件保留的纸张数量超过 2 张，出于讨论目的，最多可保留 10 张或更多。我当前的代码改编自这个[网站](http://www.ozgrid.com/forum/showthread.php?t=31526)。我还查看了这篇[SO 文章](https://stackoverflow.com/questions/8303821/vba-if-statement-with-multiple-lines)。

我的代码如下：

```
Sub DeleteAllButNotedSheets()

Dim IndividualWorkSheet As Worksheet

Application.DisplayAlerts = False

For Each IndividualWorkSheet In ThisWorkbook.Worksheets

    If IndividualWorkSheet.Name <> "Sheet1" Or "Criteria" Or "TemplateSheet" Or "TemplateSheet2" Then
        IndividualWorkSheet.Delete
    End If

Next

Application.DisplayAlerts = True

End Sub 
```

目前，代码会导致类型不匹配错误。我正在寻求解决这个错误困境的方法。

除此之外，考虑到可能条件的数量，我还试图确定是否可以使用列表、集合甚至数组（给定循环）来代替巨大的`OR`列表，这对我来说似乎很笨拙。我正在寻求解决方案甚至建议以开始处理此列表问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:27:40.973

```
tmp = IndividualWorkSheet.Name  
If tmp <> "Sheet1" And tmp <> "Criteria" And _
   tmp <> "TemplateSheet" And tmp <> "TemplateSheet2" Then 
      IndividualWorkSheet.Delete     
End If 
```

基于数组的方法：

```
Dim arr
arr = Array("Sheet1", "Criteria", "TemplateSheet", "TemplateSheet2")

If IsError(Application.Match(IndividualWorkSheet.Name, arr, 0)) Then
    IndividualWorkSheet.Delete    
End If 
```

# mysql - NoSQL大数据使用哪个项目进行CDR存储？

> ID：11888294
> 
> 赞同：2
> 
> 时间：2012-08-09T16:56:17.080
> 
> 标签：mysql, open-source, nosql, bigdata

我在一家大型电信公司工作，我希望存储许多 CDR（呼叫详细记录）。它应该是一个巨大的数据库。我想尝试推动一些开源解决方案。我对 MySQL 非常熟悉，但我想也许可以尝试一些不同的东西，这些东西应该是健壮且易于扩展的。关于稳定的开源 NoSQL 解决方案有什么建议吗？- MongoDB？Hadoop？卡桑德拉？还有什么想法吗？也许我应该坚持使用 MySQL？

请注意，我需要查询某个特定电话号码通话的分钟数等选项。

什么号码叫得最多。

ETC'。

一个 mysql 表如下所示：

```
 timestamp   TIMESTAMP
   from_number CHAR(12)
   to_number   CHAR(12)
   duration    MEDIUMINT 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:37:01.347

尽管您可能可以使用任何数据库后端构建 CDR 解决方案，但一个挑战将是您如何处理数据建模和查询。与关系数据相比，NoSQL 数据建模需要一种截然不同的方法，并且更类似于非规范化数据仓库（这应该非常适合您的用例！）。

根据您的要求，有许多开源 CDR 项目也可能值得研究。

对于可能有助于您的调查的具体示例，我将查看[CDR-Stats](http://www.cdr-stats.org/)：

*   [它的工作原理](http://www.cdr-stats.org/documentation/how-it-works/)包括对产品架构的高级概述
*   [数据存储架构](http://www.cdr-stats.org/docs/en/latest/html/mongodb-architecture.html)描述了他们使用 MongoDB 进行数据建模和预聚合的方法

进一步查看：

*   [Asterisk 和 Freeswitch 的 CDR-Stats 呼叫数据分析](http://www.slideshare.net/areski/cdrstats-voip-analytics-solution-for-asterisk-and-freeswitch-with-mongodb)
*   [构建 CDR 记录的数据仓库：解决方案注意事项](http://datamgmt.com/building-a-data-warehouse-of-call-data-records-cdr-solution-considerations/)
*   [基于Hadoop的电信行业数据挖掘平台](http://vimeo.com/7671465)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T07:26:58.670

CDR 处理涉及大量记录，这些记录也会随着时间的推移而增加。每年 100% 的增长并不少见。我发现将收集与报告分开并将收集的数据作为记录或聚合转发到适当的报告引擎是个好主意。见[BDsafe](http://www.dt2pte.com/)概览和案例研究。我交付的系统已经运行了几年，每天连续处理数十亿个 CDR。总之，我怀疑你会找到一个系统来满足你的所有需求，但是，我相信你可以通过一点横向思维来实现你的目标。首先，有效地（廉价地）存储您的数据，然后您可以为不同的目的使用不同的报告引擎。如果你能向我提供一些你必须处理的一般情况，我很乐意解释我在这些情况下所做的事情。十多年来，我一直专注于电信公司和 LEA 的这一领域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:26:01.587

CDR 将与到达的呼叫数量成正比。我不认为 MySQL 是最好的解决方案，因为数据会不断增长。随着数据的增长，我真的对性能表示怀疑。这是假设您可能必须将数据存储至少 1 年作为监管规范等。CDR-Stats 的 Stennie 建议看起来不错。他们正在使用 MongoDB

# android - 关于 Android 上 SSL 的几个问题

> ID：11888298
> 
> 赞同：0
> 
> 时间：2012-08-09T16:56:23.413
> 
> 标签：android, ssl

我编写的应用程序需要向 HTTP 服务器发送非常机密的数据。由于这些数据的机密性，我需要尽可能地保护连接。我决定通过 HTTP POST 使用 SSL。我的问题是我在 SSL 保护方面真的是新手，我对在 Android 上创建 SSL 应用程序的过程有些怀疑。谁能告诉我我是否做得很好？

要创建我的应用程序，我执行以下步骤：

1.  我使用 OpenSSL 生成 SSL 密钥和证书，按照本[教程](http://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html) ，我需要将 .key 文件提供给编写 HTTP 服务器的队友，以便他可以配置 apache 并使用此 .key 文件来验证发件人的身份，对吗？

2.  [我按照本教程](http://blog.antoine.li/2010/10/22/android-trusting-ssl-certificates/)创建 .bks 密钥库 然后我使用相同的教程阅读了这个密钥库，然后我可以连接到服务器。然后服务器可以使用 .key 文件验证我的身份，对吗？

这就是在我的应用程序和 HTTP 服务器之间创建安全连接所需的全部内容吗？这会正常工作和安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:40:09.167

1.  错误的。您需要生成一个密钥*对：*将私钥保密，将公钥交给您的*伴侣*。

2.  您似乎没有阅读您引用的教程。它在那里正确地说，您可以使用 keytool 完成整个过程。根本不需要将 OpenSSL 引入其中。

然而，教程中关于 Apache 更快的说法是 A 级的废话。它和 HttpsURLConnection 类都在后台使用 JSSE，后者在后台使用 java.net.Socket，其速度首先是网络绑定的。要是能快点就真的很神奇了。或者更慢。使用它可能还有其他原因（我从来没有），但这不是其中之一。恕我直言，更快的是设置几个系统属性并使用内置的东西，而不是编写几码代码。

# android - 如何停止 Android MapView 的自动重绘？

> ID：11888304
> 
> 赞同：0
> 
> 时间：2012-08-09T16:56:44.380
> 
> 标签：android, android-mapview

我有一个基于 Google MapView 的应用程序，其中包含许多大型矢量叠加层。屏幕上一次最多可以有 500 个复杂多边形。在我的手机（Android 2.3.4）上，无论是否需要，都会在短时间内自动触发 MapView 的重绘。

**问题：**
由于大地图重绘时间UI响应可能很慢。例如，打开一个菜单可能需要大约一秒钟。任何对话框的响应也很差。

**问题：**
是否可以关闭 MapView 的自动重绘？或任何其他想法如何改善 UI 响应？

*MapView.SetEnabled(false) 不会这样做，MapView 只会变得不可点击。MapView.setWillNotDraw(true) 让我黑屏。

*据我所知，在 Android 2.2 上不会发生自动重绘（需要 MapView.Invalidate() 才能查看任何更改）。也许不仅是操作系统/库版本，还有硬件问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T02:21:57.997

据我对 MapView 的了解，只有当您拖动地图或放大/缩小或调用 map.postInvalidate() 时，才会重新绘制地图。现在回答你的问题：

“是否可以关闭 MapView 的自动重绘？” 是的。您将不得不覆盖 MapView 的 onDraw() 方法，因为它是在绘制/重绘地图时调用的 onDraw() 方法，基本上，您将需要一个布尔控制变量，您可以使用它来更改整个应该绘制地图（默认绘制是通过使用 super.onDraw() 调用完成的）或者如果您只需要专门绘制一些叠加层等。

# jquery - 触发可放置悬停类时隐藏可排序占位符

> ID：11888307
> 
> 赞同：2
> 
> 时间：2012-08-09T16:56:59.767
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, nested-sortable

我已经建立了自己的嵌套 ul-tree 菜单。树 li-items 是可排序的，甚至使用 jQuery sortable() 和 droppable() 在多个级别中也是如此。您只需拖放即可。

所以，我现在的问题是，当将一个项目拖到其他项目 droppable() 的区域上时，“sortable() placeholder”和“droppable() hoverClass”都会突出显示。

这是我当前的代码：

[http://jsfiddle.net/PeterWesterlund/8KDur/89/](http://jsfiddle.net/PeterWesterlund/8KDur/89/)

**问题：**当触发 droppable() 悬停时，如何使可排序占位符**不突出显示？**

因此，仅突出显示将放置所选项目的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T14:45:36.687

有完全相同的问题。我的解决方案是

### 可排序

```
$(".scrollPane", ui).sortable({
    //...
    placeholder: "ui-state-highlight myPlaceholder"
}) 
```

### 可丢弃

```
$( container ).droppable({
    //...
    over: function( event, ui ){
        $(this).parent().addClass("hide-placeholder")
    },
    out: function( event, ui ){
        $(this).parent().removeClass("hide-placeholder")
    }
}) 
```

### CSS（少）

```
.hide-placeholder{
    .myPlaceholder {
        visibility:hidden;/*display:none*/
    }
} 
```

希望这些不同的 d&d 概念之间也有某种整合/交流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T16:21:13.500

我现在遇到了这个问题，我制作了这个 gif 来说明：

![可排序 + 可放置](../Images/3ebdeb6e8164fe8b307704fbc56c5e4e.png)

当拖到第一个连接的 Sortable 上方（也可能在最后一个下方）时，占位符不会消失真的很烦人，但我认为这是设计使然。如果我在顶部的 Droppable 上释放拖动的项目，它将在视觉上作为 Culture 部分中的第一个项目结束，但通过编程它将设置为 Issue Cover 并恢复到其在 People 部分中的原始位置。

使用 CSS 隐藏占位符，或使用 JS 将其删除，只会创建一个偏移量，甚至无法使用 hack 进行纠正，例如利用 jQUI 的内部结构：`$.ui.ddmanager.prepareOffsets($.ui.ddmanager.current, null);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T17:53:21.877

我不确定我是否完全理解您的要求，但通过使用该属性：`tolerance: "fit"`您可以为处理跌落的方式设置不同的容差。

[JSFiddle](http://jsfiddle.net/8KDur/157/)

以下是可能的选项列表：

> 宽容
> 
> 指定用于测试可拖动对象是否“越过”可放置对象的模式。可能的值：'fit'、'intersect'、'pointer'、'touch'。
> 
> fit：可拖动与可放置完全重叠 intersect：可拖动与可放置至少重叠 50% 指针：鼠标指针与可放置重叠 触摸：可拖动与可放置任意重叠
> 
> 代码示例
> 
> 使用指定的容差选项初始化一个 droppable。 `$( ".selector" ).droppable({ tolerance: "fit" });` 在 init 之后获取或设置容差选项。

`//getter`

`var tolerance = $( ".selector" ).droppable( "option", "tolerance" );`

`//setter`

`$( ".selector" ).droppable( "option", "tolerance", "fit" );`

可以在选项下找到更多[信息](http://jqueryui.com/demos/droppable/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T11:12:00.577

解决方案是，将其放入您的可排序选项列表中：

```
refreshPositions: true 
```

现在你不必再隐藏任何东西了！

# c# - 使用 Aggregate 连接 linq 将结果放入 POCO

> ID：11888311
> 
> 赞同：1
> 
> 时间：2012-08-09T16:57:05.237
> 
> 标签：c#, linq, entity-framework, poco, aggregate

使用 EF4，我试图想出一种将数据从实体聚合到业务对象的更智能的方法，即连接 linq 以将数据直接传递到我的 BE，从而节省了在 linq 之后从 IEnumerable 复制的步骤。我一直在尝试使用以下内容，但似乎无法正确使用语法。CustomerBE 是一个普通的 POCO。

```
 var customers = uow
               .GetAllCustomers()
               .Aggregate((list,obj) => new List<CustomerBE>()
               {
                  var beo = new CustomerBE { FirstName = obj.Firstname,
                                             Id = obj.Id
                                              ...
                                           };
                  list.Add(beo);
                  return list; 
               }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:59:08.953

为什么不在`Select`声明中这样做呢？ `Select`旨在从一种类型映射到另一种类型：

```
var customers = uow
           .GetAllCustomers()
           .AsEnumerable()
           .Select(c => new CustomerBE { FirstName = c.Firstname,
                                         Id = c.Id
                                          // ...
                                       }
                  )
           .ToList(); 
```

# c++ - 数据类型与模板参数不同的模板对象

> ID：11888314
> 
> 赞同：2
> 
> 时间：2012-08-09T16:57:10.003
> 
> 标签：c++

我有一个模板类，我想要一个成员函数接受该类的任何模板参数的对象。所以它应该能够运行类似的东西：

```
main(){
     A<double> object1;
     A<double> object2;
     A<int> object3;

     object1.f(object2);
     object1.f(object3);
} 
```

这是我到目前为止所拥有的，但它似乎不起作用，因为它假定参数必须与调用对象的类型完全相同：

```
template<typename T>
class A
{
    void f(A<T> &a);
} 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T16:59:28.063

`f`本身需要是一个模板，有自己的模板参数：

```
template<typename T>
class A
{
    template <typename U>
    void f(A<U>& a);
} 
```

当你调用`object1.f(object2)`,`f`将被实例化为`U`= `double`; 当您调用时`object1.f(object3)`，`f`将使用`U`=实例化`int`。

在这两种情况下`T`=`double`因为`object1`是类型`A<double>`并且`T`是类模板的模板参数`A`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:00:30.163

您需要一个成员函数模板：

```
template <typename T>
class A
{
    template <typename U>
    void f(A<U>& a)
    {
        //...
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:00:32.523

> 但它似乎不起作用，因为它假定参数必须与调用对象的类型完全相同：

当然可以，因为这是您指示它执行的操作：

```
template<typename T>
class A
{
    void f(A<T> &a);
} 
```

也许您想自己制作`f`模板：

```
template<typename T>
class A
{
    template <typename T1>   //<--- different type
    void f(A<T1> &a);
} 
```

# javascript - 容器内的固定 div

> ID：11888317
> 
> 赞同：0
> 
> 时间：2012-08-09T16:57:18.077
> 
> 标签：javascript, jquery, html, css

所以我有以下内容：

```
<div id="TwoColumns">

    <div id="LeftColumn">
        <div id="navigation">
            /*This is a fixed navigation*/
            Anchor link here to PointOne
            Anchor link here to PointTwo
            Anchor link here to PointThree
        </div>
    </div>

    <div id="RightColumn>
        <div id="PointOne">
            Point One
        </div> 
        <div id="PointTwo">
            Point Two
        </div> 
        <div id="PointThree">
            Point Three
        </div> 
    </div>

</div> 
```

1）我想要做的是，当用户滚动导航在 LeftColumn 内移动并跟随用户向下时，固定元素通常会但仅限于容器内。

2) 当一个锚链接被点击时，重新定位导航以与相关点内联。

所以我正在做的是设置单击锚链接`top:0;`的`navigation`时间，这样做的问题是当我滚动到顶部时，固定的 div 现在离开它的容器是`LeftColumn`.

我不介意使用 javascript 和 jquery。

更新

好的，所以 Oswaldo Acauan html/css 解决方案得到了我的第一点。

第二个问题仍然是一个问题。当我单击链接时，导航与右侧的内容不一致。

## ![在此处输入图像描述](../Images/bf267a699dfa10061d65c1b0ca315ff7.png)

我现在得到`WRONG`了，并希望有这样的`CORRECT`愿景。我这辈子都想不通。

[http://jsfiddle.net/BbAck/1/](http://jsfiddle.net/BbAck/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:01:32.990

你可以试试TwitterBootstrap 的[Scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)，或者用 CSS/HTML 和一点 Javascript/jQuery 来做。

**[在这里](http://jsfiddle.net/BbAck/3)演示**

HTML：

```
<div id="Container">
Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
<div id="TwoColumns">

    <div id="LeftColumn">
        <div id="navigation">
            This should be in line with the top of the point
            <a href="#PointOne">Anchor link here to PointOne</a>
            <a href="#PointTwo">Anchor link here to PointTwo</a>
            <a href="#PointThree">Anchor link here to PointThree</a>
        </div>
    </div>

    <div id="RightColumn">
        <div id="PointOne">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div> 
        <div id="PointTwo">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div> 
        <div id="PointThree">
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </div> 
    </div>

</div> 
```

​ CSS：

```
html,body { height: 100%; }

#Container { overflow: hidden; }

#LeftColumn {
    float: left;
    width: 50%;
}

#navigation.fix {
    position: fixed;
    top: 0;
}

#navigation a {
    display: block; 
}

#RightColumn {
    width: 50%;
    float: right;
}

#PointOne { 
    background-color: red;
    height: 159px;
}

#PointTwo { 
    background-color: green;
    height: 400px;
}

#PointThree { 
    background-color: purple;
    height: 650px;
} 
```

​ JS：

```
$(window).scroll(function() {
    yOffset = window.pageYOffset;
    yContainer = $('#Container').height() - $('#RightColumn').height();
    if (yOffset >= yContainer) {
        $('#navigation').addClass('fix');
    } else {
        $('#navigation').removeClass('fix');
    }
});​ 
```

# javascript - 如何检查我的单选按钮是否在 ONE div 中被选中？

> ID：11888326
> 
> 赞同：1
> 
> 时间：2012-08-09T16:57:43.903
> 
> 标签：javascript, jquery

我有很多名为“each_item”的div，一个接一个。我正在尝试检查是否在这个 div 中检查了收音机。

我的问题是，使用我的 jquery 代码（见下文），所有“each_item”div 的所有单选按钮都经过测试。我可能需要使用`$(this)`，但我不知道如何在我下面使用的选择器中使用它（即`$('input:radio[name=gender]:checked')`）

```
<div class='each_item'>
<input type='radio' name='gender' value='m'>
<input type='radio' name='gender' value='f'>

<input type='button' id='btn'>
</div> 
```

我试过的jquery是这样的：

```
$('#btn').click(function(){

    if ($('input:radio[name=gender]:checked').length < 1)
        alert('nothing was checked');
    }); 
```

如果你能帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T16:59:45.677

您可以使用[find](http://api.jquery.com/find/)仅在 div 内查找。 [最接近](http://api.jquery.com/closest/)的将找到与该类（包含 div）最近的祖先。

```
$('#btn').click(function(){

    if ($(this).closest(".each_item").find('input:radio[name=gender]:checked').length < 1)
        alert('nothing was checked');
    });

}); 
```

另请注意，如果您有多个相同的按钮`id`，那是无效的，并且可能会导致您出现问题。 `id`s 应该始终是唯一的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:02:27.387

采用[`.siblings()`](http://api.jquery.com/siblings/)

```
$('#btn').on('click', function() {
    if ($(this).siblings('input:checked').length < 1) {
        alert('nothing was checked');
    }
}); 
```

您可以从选择器中删除`:radio`and `[name=gender]`，因为它们过度定义了您实际搜索的内容。

# spring - Spring and Tiles - 手动渲染 JSP 文件

> ID：11888335
> 
> 赞同：1
> 
> 时间：2012-08-09T16:58:23.297
> 
> 标签：spring, jsp, tiles

我们正在使用 Spring 3 和 Apache Tiles 创建在 Tomcat 7 上运行的 Web 应用程序。

是否有可能在运行时使用这些工具从 Java 代码中的 JSP 文件手动生成 HTML？

例如，我有`sample.jsp`一些基于传递模型的内容动态生成的内容。我想将 JSP 中呈现的 HTML 存储在 String 对象中。

在非常高的抽象层次上：

```
String renderedHtml=renderHtmlFromJSP(jspName,model); 
```

如果没有，是否可以动态更改 Tiles 元素的定义？例如

```
<put-attribute name="headerRight" value="dynamically_set_value" /> 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:39:04.557

这个问题可以与这个问题相结合：[Execute and render JSP inside a Filter](https://stackoverflow.com/questions/5983361/execute-and-render-jsp-inside-a-filter) 所以你`renderHtmlFromJSP`可以看起来像：

```
String renderHtmlFromJSP(
      String fileName, 
      ???? dataModel, 
      HttpServletRequest sourceRequest){
   //you need emulate response to produce output in string (see bellow)
   MyStringResponse resp = new MyStringResponse();
   sourceRequest
        .getRequestDispatcher("/WEB-INF/header.jsp")
        .include(request, resp);
   resp.flushBuffer();
   return resp.getMyInternalBufferContent(); 
} 
```

要实现 MyStringResponse 使用[HttpServletResponseWrapper](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponseWrapper.html)覆盖方法[getOutputStream()](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletResponseWrapper.html#getOutputStream%28%29)并返回 ByteArrayOutputStream 的实例

# powershell - 如何在 PowerShell 中向 .NET 对象添加事件处理程序？

> ID：11888342
> 
> 赞同：7
> 
> 时间：2012-08-09T16:58:33.287
> 
> 标签：powershell

我正在编写一个使用第三方库的 PowerShell 脚本。我正在使用的对象之一需要我添加一个事件处理程序。 [事件委托如下所示](http://www.eldos.com/documentation/sbb/documentation/ref_cl_pgpreader_evt_oncreateoutputstream.html)：

```
public delegate void TSBPGPCreateOutputStreamEvent(object Sender, 
                                                   string Filename, 
                                                   System.DateTime TimeStamp, 
                                                   ref System.IO.Stream Stream, 
                                                   ref bool FreeOnExit) 
```

在 PowerShell 中，我尝试这样做：

```
$reader.Add_OnCreateOutputStream( {
    param(
        $sender,
        $fileName,
        $timestamp,
        [ref]
        $stream,
        [ref]
        $freeOnExit
    )
    $stream = New-Object IO.MemoryStream
} ) 
```

但我收到此错误消息：

```
 Cannot convert value "
    param(
        $sender,
        $fileName,
        $timestamp,
        [ref]
        $stream,
        [ref]
        $freeOnExit
    )
$stream = New-Object IO.MemoryStream
" to type "SBPGP.TSBPGPCreateOutputStreamEvent". 
Error: "The type 'System.IO.Stream&' may not be used as a type argument." 
```

有没有更好的订阅事件的方法？为什么不能将 Stream 类型用作类型参数？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-13T13:13:24.003

您应该使用[Register-ObjectEvent](http://technet.microsoft.com/library/hh849929.aspx) cmdlet，使用以下命令查看您自己系统上的示例：

```
PS> Get-Help Register-ObjectEvent -full 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-05T01:45:09.987

```
Add-Type -AssemblyName System.Windows.Forms
[reflection.assembly]::loadwithpartialname("System.Drawing") | Out-Null
$form = New-Object Windows.Forms.Form
$form.add_mousedown($handler_form_mousedown)
$handler_form_Mousedown=
{
param([object]$sender, [System.EventArgs]$e)
write-host $e.x
write-host $e.y
$sender.text="if ya think your so noble answer the question"
$sender.text = "Nobles Oblige"
# PS HELP IS USELESS FOR THIS    
}

$App = $form.ShowDialog() 
```

# ruby - 如何在 LIKE 和 Datamapper 之间建立 OR 条件？

> ID：11888343
> 
> 赞同：3
> 
> 时间：2012-08-09T16:58:34.583
> 
> 标签：ruby, sinatra, datamapper

我有3个相关模型：

```
class Transaction
  include DataMapper::Resource    
  property :id, Serial     
  property :volume, Float
  property :deal_date, Date  
  belongs_to :buyer
  belongs_to :seller
end

class Seller
  include DataMapper::Resource    
  property :id,         Serial
  property :name,   String      
  has n, :transactions
end

class Buyer
  include DataMapper::Resource    
  property :id, Serial
  property :name,   String, :length => 255, :index => true, :unique => true
  has n, :transactions
end 
```

我想对具有某些条件的交易进行查询：

```
x < volume < y
and
a < deal_date < b
and
( buyer.name like key_word OR seller.name like key_word ) 
```

如何使用 Datamapper 在两个 LIKE 之间创建 OR 条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:00:01.047

简单地查询`Transaction`，但查询路径到`buyer.name`和`seller.name`。

```
Transaction.all('buyer.name.like' => 关键字) | Transaction.all('seller.name.like' => 关键字)

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T22:28:15.510

也许这会做：

```
key_word = '%blabla%'
trs = Transaction.all condition: [
        '   buyer_id IN (SELECT id FROM buyer WHERE name LIKE ?) 
         OR seller_id IN (SELECT id FROM seller WHERE name LIKE ?)', 
      key_word, key_word] 
```

# python - 如何为我的任务创建适当的元类？

> ID：11888348
> 
> 赞同：1
> 
> 时间：2012-08-09T16:59:05.767
> 
> 标签：python, weak-references, metaclass

我有创建一个可迭代类的任务，该类在**iter**上返回已经从此类创建的实例列表上的迭代器，例如：

```
x = SomeClass()
y = SomeClass()
for obj in SomeClass:
    print obj
>><__main__.SomeClass object at .......> and etc 
```

我通过元类和 globals() 实现了它。它看起来很糟糕，但它确实有效。我想找到一种更优雅和pythonic的方式；起初我想通过一个弱引用来做到这一点，但我不明白如何从我的元类中从工作类中获取一些变量，当我尝试将引用存储在我的元类中的对象上时，它正在为我的对象创建一个引用类，所以这是我的实现：

```
class ObjectsInMemory(object):

    class __metaclass__(type):
       def __init__(self, *args, **kwargs):
            self.name = args[0]
       def __iter__(self):
            glob = globals().copy()
            cls_inst = []
            for _, v in glob.iteritems():
                try:
                    if self.name in v.__repr__():
                        cls_inst.append(v)
                except TypeError:
                    pass
            yield cls_inst 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:15:37.987

如果您想跟踪某个类的实例，我建议为此使用弱引用容器，例如`weakref.WeakSet`. 这样一个容器类的代码草图：

```
import weakref

class InstanceTracker(object):
    def __init__(self):
        self.instances = {}
    def new(self, cls, *args, **kwargs):
        instance = cls(*args, **kwargs)
        self.instances.setdefault(cls, weakref.WeakSet()).add(instance)
        return instance
    def iter_instances(cls):
        return iter(self.instances[cls]) 
```

您现在可以为 instance 创建新的`SomeClass`with实例。`tracker.new(SomeClass)``InstanceTracker``tracker`

这样，您不必依赖全局状态，您的函数不会有奇怪的副作用，并且您不需要修改一个类来跟踪它的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:12:57.810

老实说，我认为你对你正在寻找的功能有错误的方法。

首先，全局变量很糟糕——如果可以的话，尽量避免使用它们。其次，您确实不需要创建元类来创建全局可迭代对象。而是尝试以下操作：

```
class SomeClass():
    ALL_INSTANCES = set()
    def __init__(self):
        self.ALL_INSTANCES.add(self)

for obj in SomeClass.ALL_INSTANCES:
    print obj 
```

这为您提供了相同的可迭代功能，而没有可怕的元类混乱。它还将全局定义隐藏在 SomeClass 范围内，因此您不必担心全局变量（尽管不是全部，因为它仍然保持全局状态）。

请注意，您无法轻松删除 ALL_INSTANCES`__del__`中的对象，因为只要 Class 类型存在，您就固有地引用该对象，因此不会自动调用。使用定义的手动`del`调用`__del__`将从全局集中删除对象（一旦最后一个引用消失 - 除非存在循环引用），但这依赖于用户记住这样做。话虽如此，您应该假设所有对象都无限期地存在。

或者您可以在 WeakSet 中使用弱引用，并确保`__del__`实际从工作集中删除。但是由于循环引用（至少），它仍然不能保证被调用，所以“死”对象可能仍然存在于全局的活动实例中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:18:25.900

这是一个有趣的元类需求，但在 Python 3 中编写起来相当简单（花了几分钟）。

* * *

**代码：**

```
import weakref

class InstanceIter(type):

    def __new__(cls, name, bases, class_dict):
        new_class = super().__new__(cls, name, bases, class_dict)
        new_class.__instances = weakref.WeakSet()
        return new_class

    def __call__(self, *args, **kwargs):
        instance = super().__call__(*args, **kwargs)
        self.__instances.add(instance)
        return instance

    def __iter__(self):
        return iter(self.__instances)

class SomeClass(metaclass=InstanceIter):

    def __init__(self, name):
        self.name = name

    def __repr__(self):
        return '{!s}({!r})'.format(self.__class__.__name__, self.name) 
```

测试以确保代码正常工作也很容易。弱引用有助于记忆。

* * *

**测试：**

```
>>> a, b, c, d, e = (SomeClass(name) for name in 'vwxyz')
>>> tuple(SomeClass)
(SomeClass('v'), SomeClass('y'), SomeClass('x'), SomeClass('z'), SomeClass('w'))
>>> 
```

# java - 使用泛型限制传递给参数的类类型而不进行强制转换

> ID：11888354
> 
> 赞同：0
> 
> 时间：2012-08-09T16:59:35.257
> 
> 标签：java, generics

假设我有一个实现，能够将某种格式的字符串转换为指定类的对象......

```
public interface Translator {
    <T> T convertToObject(Class<T> clazz, String msg);
} 
```

我有一个使用它的类，如下所示：

```
public <T> T proccessMessage(Class<? extends Response> responseCls,String msg) {
    return (T) translator.convertToObject(responseCls, msg); 
} 
```

有没有办法做到这一点而不铸造？我的意图是将 processMessage 限制为仅接受 Response 类型。响应类型是标记接口。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:09:41.767

对于作为参数传递给翻译器的类和返回的类型，您必须使用相同的类型，因为它是在接口中定义的：

```
public <T extends Response> T proccessMessage(Class<T> responseCls,String msg) {
    return translator.convertToObject(responseCls, msg); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:07:41.793

由于您将类参数限制为 的子类`Response`，我相信您的方法签名应该如下所示：

```
public <T extends Response>
    T proccessMessage(Class<? extends T> responseCls, String msg)
{
    return translator.convertToObject(responseCls, msg);
} 
```

通过这种方式，您可以获得正确的返回类型，并且无需类型转换即可编译。

# c++ - 如何读取 C++ 中的嵌入式代码签名签名？

> ID：11888358
> 
> 赞同：1
> 
> 时间：2012-08-09T16:59:39.450
> 
> 标签：c++, digital-signature

我用我的数字签名签署了文件，我怎样才能从这个文件中读取这个签名？

签名是可信的（Globalsign）。加密 RSA/SHA1。签名文件为 .exe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:12:17.970

首先，您需要指定您正在处理的证书类型。如果您谈论的是 CLI 程序集，那么您可能正在处理 StrongName 签名，它们是完全不同的野兽，旨在防止 CLR 的全局程序集缓存中的名称冲突。

这听起来更像是您想阅读 Authenticode 签名，它们用于本机和 CLI 应用程序。如果您想阅读证书本身，那么您需要掌握 PE/COFF 规范，并为 PE（Portable Executable）文件格式实现解析器，这是 Windows NT 及其衍生文件使用的格式。如果您希望能够实际*验证*该证书，则需要调用[WinVerifyTrust 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa388208.aspx)，该函数将为您执行 Authenticode 验证。

当然，如果您只想检查您的证书是否有效，而不需要编写自己的应用程序来执行此操作，您可以右键单击该文件并在 Windows 资源管理器中选择 Properties...，它应该会显示您的签名状态文件。否则，您可以使用命令行实用程序[SigCheck](http://technet.microsoft.com/en-us/sysinternals/bb897441.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:18:20.020

下面的代码应该做你想做的事。它取自安装程序应用程序以提取其自己的证书并将其安装到本地证书存储中。

```
bool driver_setup::install_embeded_cert_to_lm( const std::wstring& filepath )
{

    bool rval = false;

    DWORD dwEncoding = 0;
    DWORD dwContentType = 0;
    DWORD dwFormatType = 0;
    HCERTSTORE hStore = NULL;
    HCRYPTMSG hMsg = NULL;

    // Get message handle and store handle from the signed file.
    BOOL fResult = CryptQueryObject(CERT_QUERY_OBJECT_FILE,
        filepath.c_str(),
        CERT_QUERY_CONTENT_FLAG_PKCS7_SIGNED_EMBED,
        CERT_QUERY_FORMAT_FLAG_BINARY,
        0,
        &dwEncoding,
        &dwContentType,
        &dwFormatType,
        &hStore,
        &hMsg,
        NULL);
    if (!fResult)
    {
        return false;
    }

    DWORD singer_info_size = 0;
    // Get signer information size.
    fResult = CryptMsgGetParam(hMsg, CMSG_SIGNER_INFO_PARAM, 0, NULL, &singer_info_size);
    if (!fResult)
    {
        CryptMsgClose(hMsg);
        CertCloseStore(hStore, 0);
        return false;
    }

    // Allocate memory for signer information.
    std::vector<byte> signer_info_data( singer_info_size );
    PCMSG_SIGNER_INFO pSignerInfo = reinterpret_cast<PCMSG_SIGNER_INFO>(signer_info_data.data());

    // Get Signer Information.
    fResult = CryptMsgGetParam(hMsg, CMSG_SIGNER_INFO_PARAM, 0, (PVOID)pSignerInfo, &singer_info_size);
    if( fResult )
    {
        CERT_INFO CertInfo = {};
        CertInfo.Issuer = pSignerInfo->Issuer;
        CertInfo.SerialNumber = pSignerInfo->SerialNumber;

        PCCERT_CONTEXT pCertContext = CertFindCertificateInStore(hStore,dwEncoding,0,CERT_FIND_SUBJECT_CERT,(PVOID)&CertInfo,NULL);
        if( pCertContext != 0 )
        {
            // rval = add_cert_to_lm_trustedpublishers( pCertContext );

            CertFreeCertificateContext(pCertContext);
        }
    }

    CryptMsgClose(hMsg);
    CertCloseStore(hStore, 0);
    return rval;
} 
```

# android - Edittext里面的复选框如何？

> ID：11888360
> 
> 赞同：1
> 
> 时间：2012-08-09T16:59:40.917
> 
> 标签：android, checkbox, android-edittext, evernote

我正在为我的论文在 android 中创建一个笔记应用程序，只是想问一下如何将复选框放入 EditText 以及如何将其保存在数据库中并保持格式。我在evernote上看到了这个，我真的不知道。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:28:26.900

尝试在 RelativeLayout 中将 EditText 与 CheckBox 重叠：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:inputType="text"
        />

    <CheckBox
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="the checkbox" />    
</RelativeLayout> 
```

您究竟想将什么保存到数据库中并保持格式？如果它只是文本，则应将其保存在文本类型的列中。可以在此处找到有关数据库的指南：[http](http://www.vogella.com/articles/AndroidSQLite/article.html) ://www.vogella.com/articles/AndroidSQLite/article.html 。

# .htaccess - .htaccess 将所有子域重写为 root

> ID：11888364
> 
> 赞同：0
> 
> 时间：2012-08-09T16:59:53.333
> 
> 标签：.htaccess, rewrite

这可能会在其他地方被问到，但无法真正找到这个问题的答案。

我想使用 htaccess 将所有子域（*.domain.com）重定向到根（即 domain.com）。简而言之：

```
test.domain.com -> domain.com
asdasdasd.domain.com -> domain.com
etc. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:09:42.463

尝试以下，它应该工作

```
RewriteCond %{HTTP_HOST} ([^.]+)\.domain.com [NC]
RewriteRule ^(.*) http://domain.com/ 
```

# oracle - Oracle PL/SQL 中是否有用于拆分文件和父目录的库函数？

> ID：11888365
> 
> 赞同：1
> 
> 时间：2012-08-09T17:00:00.533
> 
> 标签：oracle, plsql

给定一个文件路径，我试图在 Oracle PL/SQL 中分隔文件名和父目录。我想知道 PL/SQL 库中是否已经有可用的函数

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:08:48.167

没有真正的需要，如果您使用的是 10g 或更高版本，它只需要一些正则表达式技巧，这取决于您的操作系统，可能如下所示：

```
with filepaths as (
  select '/home/oracle/somedir/blah.sql' as linux
       , 'c:\home\oracle\somedir\blah.sql' as windows
    from dual
         )
select regexp_substr(linux, '[^/]+', 1
                     , regexp_count(linux,'/')) as linux
     , regexp_substr(windows, '[^\]+', 1
                     , regexp_count(windows,'[^\]+')) as windows
  from filepaths
       ;

LINUX    WINDOWS
-------- --------
blah.sql blah.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:01:13.483

INSTR 和 SUBSTR 字符串函数可用于执行此操作，如下所示：

```
WITH filepaths AS
  (SELECT '/home/oracle/somedir/blah.sql' AS LINUX,
          'c:\home\oracle\somedir\blah.sql' AS WINDOWS
     FROM DUAL)
SELECT LINUX,
       SUBSTR(LINUX, 1, INSTR(LINUX, '/', -1)) AS LINUX_PATH,
       SUBSTR(LINUX, INSTR(LINUX, '/', -1)+1) AS LINUX_FILE,
       WINDOWS,
       SUBSTR(WINDOWS, 1, INSTR(WINDOWS, '\', -1)) AS WINDOWS_PATH,
       SUBSTR(WINDOWS, INSTR(WINDOWS, '\', -1)+1) AS WINDOWS_FILE
FROM filepaths;

LINUX         /home/oracle/somedir/blah.sql
LINUX_PATH    /home/oracle/somedir/
LINUX_FILE    blah.sql
WINDOWS       c:\home\oracle\somedir\blah.sql
WINDOWS_PATH  c:\home\oracle\somedir\
WINDOWS_FILE  blah.sql 
```

分享和享受。

# jquery - 某个类的远亲的jquery id

> ID：11888367
> 
> 赞同：1
> 
> 时间：2012-08-09T17:00:05.400
> 
> 标签：jquery

假设我有这个 HTML：

```
<div class="SomeParent" id="BlueParent">
  <div>
     <div class="Test">test</div>
  <div>
</div> 
```

class 的 div`Test`实际上是深深嵌套在`SomeParent`容器中的。获取Test 是其后代的类的 id的**最快方法是什么。**`SomeParent`是`.parent()`最好的方法吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:04:38.577

也许

```
$('.Test').closest('.SomeParent').attr('id'); 
```

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

但是，我不知道它是否会比 codeparadox 的解决方案更快或更慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:01:23.497

你可以试试：

```
$('div.SomeParent').has('div.Test').attr('id'); 
```

**[演示](http://jsfiddle.net/PGqR4/)**

您可以使用**[`.has()`](http://api.jquery.com/has/)**.

另一种选择是**[`closest()`](http://api.jquery.com/closest/)**：

```
$('.Test').closest('.SomeParent').attr('id') 
```

**[演示](http://jsfiddle.net/PGqR4/3/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T17:05:29.697

如果您已经拥有`<div.Test>`jQuery 对象，那么您可以使用`.closest()`而不是使用`.parents()`. `.closest()`一旦它遇到你给它的选择器的第一次出现，它将停止。`.parents()`另一方面，遍历到 dom 的根并返回所有找到的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T17:29:48.223

您可以使用 parents() 而不是 parent() 来指定您在父 DOM 树中搜索的父元素的类。

```
$(".Test").parents(".SomeParent").attr("id") 
```

# c# - 声明字符串变量时有括号是什么意思？

> ID：11888369
> 
> 赞同：3
> 
> 时间：2012-08-09T17:00:09.130
> 
> 标签：c#, vb6

我正在将 VB6 转换为 C#。我没有使用VB6的经验。有什么区别：

`sWords() As String`

和

`sWords As String`

很容易看出我可以将第二个转换为`string sWords`C#，但第一个我不知道这意味着什么..array？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T17:01:14.253

第一个是字符串类型的数组，第二个只是一个字符串。

所以等价物是

```
string[] swords 
```

和

```
string swords 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T17:01:28.653

第一个是一个数组，其边界在运行时确定。

所以你可以这样做：

```
Dim arr() As String
arr = Array("love","to","code") 
```

您还可以在运行时调整数组的大小：

```
ReDim arr(1 To 50) 
```

# asp.net - MVC3 ASP.NET 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的

> ID：11888370
> 
> 赞同：1
> 
> 时间：2012-08-09T17:00:14.480
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, virtual

我已经查找了解决方案，但我还没有找到解决这个问题的正确解决方案。我会用来清理我的 VS 并修复它，但现在它继续出现。谢谢！

> 在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由未在 IIS 中配置为应用程序的虚拟目录引起的。C:\Users\atruong0\Documents\Visual Studio 2010\Projects\TubeRecord\TubeRecord\cathodeassembly\web.config

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:22:09.237

在为我的解决方案启用视图编译后，我遇到了同样的问题。我尝试了很多很多解决方案，但不幸的是它们都不适合我。

您要做的第一件事是安装[ASP.NET MVC 3 工具更新](http://haacked.com/archive/2011/04/12/introducing-asp-net-mvc-3-tools-update.aspx)（如果您还没有的话）。这应该可以解决问题，但对我来说，至少对于 VS Web Developer Express 2010，它没有帮助。

我偶然发现了[这个问题](https://stackoverflow.com/questions/2566215/allowdefinition-machinetoapplication-error-when-publishing-from-vs2010-but-on)，那里有很多可能的解决方案。在我发现工具更新之前，我尝试了所有这些，但是很遗憾，没有快乐。我绝对建议先尝试更新工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:29:12.687

哈哈，所以我想出了我的简单问题。我刚刚有另一个文件夹，里面有重复的文件 x_x。谢谢你们的帮助。

# c# - 带有 Ria 服务的接口的替代方案

> ID：11888372
> 
> 赞同：2
> 
> 时间：2012-08-09T17:00:16.627
> 
> 标签：c#, silverlight, entity-framework, wcf-ria-services

我所有的实体都将具有以下属性：

```
Employee CreatedBy { get; set; }
Employee ModifiedBy { get; set; }
DateTime CreatedDate { get; set; }
DateTime ModifiedDate { get; set; } 
```

这适用于一个非常大的应用程序，实体都来自不同的数据库，因此位于不同的`.edmx`文件中。

大多数情况下，这些将显示在 a 中`DataGrid`，我希望有一个工具提示显示所有这些信息。 `Employee`是每个数据库中的视图。

我通常会做的是创建一个接口，每个命名空间`IEmployee`中的`Employee`实体将实现该接口。`IToolTipEnabled`然后，我将使用上面列出的属性创建一个接口，并在需要的地方实现它。

然后，我将能够在 Silverlight 端使用单个转换器来获取工具提示内容。事实上，我基本上必须为每种实体类型创建一个新的转换器，以便正确地进行转换。

**有没有好的方法来做到这一点？**

感谢您花时间阅读本文以及您可能提供的任何帮助/见解！

**编辑：ken2k 的解决方案绝对是正确的，只需将接口放在“.shared.cs”文件中，然后在同一个共享文件（或另一个*共享*文件）中放置实现接口的类的部分类定义。这就是它所需要的。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:10:54.947

如果您的某些实体共享公共属性并且您需要获取这些属性而不必知道实体的类型，那么接口确实是一个好主意。

例如：

```
public interface IDatedEntity
{
    DateTime CreationDate { get; set; }
    DateTime UpdateDate { get; set; }
}

public partial class User : IDatedEntity
{
    public DateTime CreationDate { get; set; }
    public DateTime UpdateDate { get; set; }
    ...
}
...
public partial class Customer : IDatedEntity
{
    public DateTime CreationDate { get; set; }
    public DateTime UpdateDate { get; set; }
    ...
} 
```

因此，您可以使用单个转换器而无需知道实际实体：

```
// Returns the number of days since last update of an entity
public class DateConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {       
        if (value is IDatedEntity)
        {
            return DateTime.UtcNow.Substract(((IDatedEntity)value).UpdateDate).TotalDays;
        }

        return 0;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# grails - 使用 Netbeans 和 Grails 未解决的依赖关系

> ID：11888373
> 
> 赞同：1
> 
> 时间：2012-08-09T17:00:19.327
> 
> 标签：grails

使用 NetBeans 在 Grails 中编译脚本时遇到此问题：

:: 未解决的依赖 ::

```
 ::::::::::::::::::::::::::::::::::::::::::::::

    :: org.grails.plugins#springws;0.5.0: not found

    :::::::::::::::::::::::::::::::::::::::::::::: 
```

| 错误无法解决依赖关系

我已经尝试卸载插件并重新安装它但没有任何成功。任何想法都会很棒！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:08:21.223

看看[http://jira.grails.org/browse/GRAILS-6427](http://jira.grails.org/browse/GRAILS-6427)。

*“作为一种解决方法，我发现您可以简单地重新安装无法解析的插件。从 application.properties 的插件引用中删除并运行 install-plugin 命令。”*

# backbone.js - 如何填充包含对象作为元素的集合，并为对象的元素传递参数？

> ID：11888374
> 
> 赞同：0
> 
> 时间：2012-08-09T17:00:22.037
> 
> 标签：backbone.js

我的网络服务返回一些类似的东西：（对象列表，比如ageList）

```
 id : 1,
  age : 20,
  reference : {
     id : 1,
     reference_type : CURRENT,
  }, 
```

其中reference是一个对象。我有可供参考和年龄列表的模型和集合

如何定义一个方法，最好是在 ageList 集合中，以便我可以获得所有那些我想作为参数传递的**reference.id为“1”的对象？**我还能采取什么其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:34:57.527

你可以这样做：

```
ageListCollection.filter(
  function(ageListModel) {
    ageListModel.get('reference').get('id') === 1
  }
); 
```

在根据 web 服务返回的数据创建您的集合 ( `AgeList`) 和`Reference`每个模型的模型之后。

例如：[jsfiddle.net/xiris/yftUN/9](http://jsfiddle.net/xiris/yftUN/9)

查看[Backbone doc](http://backbonejs.org/#Collection-Underscore-Methods)和[Underscore doc](http://documentcloud.github.com/underscore/#filter)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:30:11.657

你可以从阅读[Backbone-relational](https://github.com/PaulUithol/Backbone-relational/)开始，如果你用一些关系定义你的模型，它将为你做这件事

# objective-c - 在自定义 NSError 上的“NSError *”类型的对象上找不到属性“代码”

> ID：11888381
> 
> 赞同：0
> 
> 时间：2012-08-09T17:00:31.993
> 
> 标签：objective-c, ios

我需要另一双眼睛。

奇怪的是，我似乎无法访问自定义 NSError 上的属性。我不断收到 EXC_BAD_ACCESS 错误。这是我的代码：

```
 if (response.isUnauthorized)
        {
            NSDictionary *userInfo = [NSDictionary dictionaryWithObject:response.bodyAsString forKey:@"Error Message"];

            NSError *unAuthorizedError = [NSError errorWithDomain:@"MyApp" code: [response statusCode]  userInfo:userInfo];
            [delegate dataControllerLoadFailed:unAuthorizedError];
            [ErrorHandler logError:unAuthorizedError fromClassName:NSStringFromClass([self class]) fromSelectorName:NSStringFromSelector(_cmd) ]; 
        } 
```

这调用：

```
-(void)dataControllerLoadFailed:(NSError *)error
{
    NSString *message = [NSString stringWithFormat:@"Encountered an error: %@ - ", error.code];

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp"
                                                    message:message
                                                   delegate:nil
                                          cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];
    [alert show];
    [activityIndicator stopAnimating];

} 
```

在 dataControllerLoadFailed 中创建消息 NSString 时出现错误访问错误，无论是使用 error.code 还是错误对象上的任何其他成员...

所以这失败了：

```
NSString *message = [NSString stringWithFormat:@"Encountered an error: %@ - ", error.code]; 
```

但奇怪的是，这成功了：

```
NSString *message = [NSString stringWithFormat:@"Encountered an error: %@ - ", error]; 
```

感谢任何给这个时间的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:06:10.687

`code`是一个`NSInteger`，它只是一个 typedef'd `int`。你需要使用`%d`不`%@`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:08:48.080

`EXC_BAD_ACCESS`错误通常意味着您的代码期望具有有效的objective-c 对象而您没有它。

在您的情况下，您在 NSLog 中使用了错误的格式说明符： NSError 中的代码属性是普通的 NSInteger 因此您需要使用 %d 说明符，而不是 %@

```
[NSString stringWithFormat:@"Encountered an error: %d - ", error.code]; 
```

另请记住，如果您想向用户显示错误信息，则错误代码可能没有意义，您可以使用`localizedDescription`,`localizedFailureReason`方法获取人类可读的错误信息

# php - 是否可以显示喜欢 Facebook 页面的用户？（类似于like box）

> ID：11888385
> 
> 赞同：0
> 
> 时间：2012-08-09T17:00:53.193
> 
> 标签：php, facebook, api, facebook-like, facebook-page

只是想澄清一下：（我对 Facebook API 不太熟悉）

我想**显示所有喜欢特定`Facebook Page`类似`Facebook Like Box`.** 许多问题倾向于说由于“隐私原因”而无法获得有关用户喜欢的信息。

我知道你可以获得类似的数量，`videos, photos, etc..`但我不确定`Pages`。

**我想验证：是否可以`Facebook Individual User Likes (Page)`通过或不通过身份验证？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:08:04.533

您将使用 FQL（Facebook 查询语言）进行以下查询：

```
SELECT uid FROM page_fan WHERE page_id = YOUR_PAGE_ID_HERE 
```

**FQL 参考**：http: [//developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

**FQL 资源管理器**：http : [//developers.facebook.com/tools/explorer/](http://developers.facebook.com/tools/explorer/)

# ruby-on-rails - 如何循环遍历控制器中的一些嵌套参数？导轨 3

> ID：11888386
> 
> 赞同：4
> 
> 时间：2012-08-09T17:00:54.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, params

我有一个“运行”对象，其中可以容纳许多“层”。Runs 接受层的嵌套属性，但 rails 无法确保嵌套对象的参数在各种坏事发生之前是有效的。我正在尝试检查任何图层上的“deposition_source_id”参数是否为空。如何循环遍历图层？
此行可以从 ONE 或任何层获取参数。“0”指定层。
`params[:run][:layers_attributes]["0"][:deposition_source_id]`

如何检查每一层？这些是参数：

```
 => {"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"T+X6sSda5vV19hpMZEAdf5RWSKPhJrm/q9+NXxTC5G8=",
 "run"=>
  {"number"=>"31310.0",
   "start_time_string"=>"08/08/2012 at 11:08 AM",
   "system_id"=>"4",
   "technician_id"=>"4",
   "duration"=>"",
   "base_pressure"=>"",
   "platters"=>"Apples",
   "overcoats_string"=>"",
   "planetary"=>"",
   "layers_attributes"=>
    {"0"=>
      {"deposition_source_id"=>"",
       "material_id"=>"60",
       "lot_id"=>"118",
       "thickness_goal"=>"32",
       "measured_thickness"=>"3",
       "tooling_factor"=>"",
       "sensor_number"=>"",
       "xtal_life"=>"",
       "release_agent"=>"0",
       "_destroy"=>"false",
       "id"=>"3401"}}},
 "commit"=>"Update Run",
 "action"=>"update",
 "controller"=>"runs",
 "id"=>"2319"} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:06:20.383

你可以这样做：

```
params[:run][:layers_attributes].each do |layer_number, params|
  # do your validation here on params[:deposition_source_id]
end 
```

如果您要做的只是确保 deposit_source_id 始终为空，我会这样做：

```
deposition_source_id_is_empty = true
params[:run][:layers_attributes].each do |layer_number, params|
  if params[:deposition_source_id].present?
    deposition_source_id_is_empty = false
    break
  end
end
if deposition_source_id_is_empty
  # do the things you'd do here if the parameters pass validation
end 
```

# android - 在两个或多个不同的自定义视图上应用相同的双击触摸监听器的 Android 代码

> ID：11888388
> 
> 赞同：1
> 
> 时间：2012-08-09T17:01:01.947
> 
> 标签：android, ontouchlistener

如何在两个或多个不同的自定义视图上应用相同的双击触摸监听器？

```
view1.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return mGestureDetector.onTouchEvent(event);
    }
});
view2.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        return mGestureDetector.onTouchEvent(event);
    }
});
mGestureDetector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() {
    @Override
    public void onLongPress(MotionEvent e) 
    {
        displayPTZControlsPopup(corresponding view id); 
    }

    @Override
    public boolean onDoubleTap(MotionEvent e) 
    {
        Intent intent = new Intent(VideoView.this,FullScreenVideo.class);
        startActivity(intent);
        return true;
    }

    @Override
    public boolean onDown(MotionEvent e) 
    {
        return true;
    }
});
mGestureDetector.setIsLongpressEnabled(true); 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:18:53.093

这样做：

```
view1.setOnTouchListener(this);
view2.setOnTouchListener(this);

@Override
public boolean onTouch(final View view, MotionEvent event) {
    if(view.getId() == idOfYourView1 || view.getId() == idOfYourView2) {
        //Apply the method to one of the view touched
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-04T13:10:26.600

试试这个代码：

```
 GestureDetectorCompat gdc = new GestureDetectorCompat(this,new SimpleOnGestureListener(){
        @Override
        public boolean onDoubleTap(MotionEvent e) { 
        /*Your block of code*/
        /*(In my Case)*/
        startActivity(new Intent(getApplicationContext(),Your_activity.class));
            return false;
        }
    }); 
```

然后将代码分配给您的视图：

```
 myview = (TextView)findViewById(R.id.txtview);
    myview.setOnTouchListener(new View.OnTouchListener() {
       @Override
       public boolean onTouch(View v, MotionEvent event) {
            gdc.onTouchEvent(event);
           return true;
       }
   }); 
```

它只是为我工作......

# php - 来自数据库的随机 url

> ID：11888390
> 
> 赞同：0
> 
> 时间：2012-08-09T17:01:06.360
> 
> 标签：php

我在我的 mysql 中存储了几个 url，但我想从这些网站回显随机 url。这看起来很简单，但事实并非如此。假设我已将 www.xyz.com 存储在 mysql 中，那么我不想回显 www.xyz.com 。如果该网站由 10000 个 url 组成，那么每次我回显该网站时，我想显示来自这 10000 个而不是主页的随机 url。

例如 mysql 由

```
www.a1.com
www.a2.com
www.a2.com 
```

等如果在特定情况下回显尝试显示 www.a1.comm 那么它应该从 www.a1.com 获取任何随机 url 并显示它但是该 url 在 mysql 中不存在。

在 mysql 中只存储主页。

我已经搜索了几页，但到处都在找到如何从 mysql 显示随机 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:03:14.597

```
SELECT   *
FROM     table
ORDER BY RAND()
LIMIT    0,1; 
```

`ORDER BY RAND()`用来混合它们，然后用来从桌子上`LIMIT`弹出一个条目。

`WHERE`如果您希望按特定列属性进行过滤，也可以添加子句。

参考：

*   [`RAND()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)
*   [`SELECT ... LIMIT offset,row_count`](http://dev.mysql.com/doc/refman/5.0/en/select.html)

# android - 使用 Eclipse + ADT 创建 Android 应用程序的“最小”源文件

> ID：11888398
> 
> 赞同：8
> 
> 时间：2012-08-09T17:01:41.540
> 
> 标签：android

我正在尝试使用 Eclipse + ADT（Android 开发工具包）来了解 MINIMAL Android 应用程序的结构。

请您告知我需要的最小源文件集是什么，例如：-

```
src / package / MainActivity.java
res / layout / activity_main.xml
res / menu / activity_main.xml  (??)
AndroidManifest.xml
(any other source files needed?) 
```

请您告知我需要放入每个文件以使其在 AVD（Android 虚拟设备）上运行的 MINIMAL 是什么？

例如，这些文件中的哪些需要包含对哪些其他文件的引用等？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T17:40:42.850

严格来说，显示*Hello World*的最小项目是

```
.
├── AndroidManifest.xml
├── res
└── src
    └── com
        └── example
            └── minimal
                └── Minimal.java 
```

## 最小的.java

```
package com.example.minimal;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Minimal extends Activity {

    /* (non-Javadoc)
     * @see android.app.Activity#onCreate(android.os.Bundle)
     */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final TextView tv = new TextView(this);
        tv.setText("Hello World!");
        setContentView(tv);
    }

} 
```

## AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.minimal"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="15" android:targetSdkVersion="15" />

    <application android:label="Minimal">
        <activity android:name="Minimal">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:38:23.553

如果您以编程方式扩展布局，您实际上可以只使用一个 MyActivity.java 和清单文件。以后 Eclipse Tools 将默认创建更多文件（在 ..drawables、布局、菜单、值中）。但是，如果您确保清单不引用任何图标或字符串，则可以将它们全部删除。我想这不是很好的做法，但可以做到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-25T20:03:10.163

**一个`build.xml`**可以构建和安装[dtmilano 代码的最小值](https://stackoverflow.com/a/11888991/895245)：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="MyName" default="help">
    <property environment="env" />
    <condition property="sdk.dir" value="${env.ANDROID_HOME}">
        <isset property="env.ANDROID_HOME" />
    </condition>
    <loadproperties srcFile="project.properties" />
    <import file="${sdk.dir}/tools/ant/build.xml" />
</project> 
```

然后：

```
ant clean
ant debug
ant install 
```

在 Android 23、Ubuntu 15.10 上测试。`adb install`在运行它之前确保它有效。

[在一个 repo](https://github.com/cirosantilli/android-cheat/tree/8fef86f1b4707b8834991ba151131d10a3a3ba64/min)上，以使获取代码更容易。

# javascript - 在 jsTestDriver 中递归查找文件

> ID：11888399
> 
> 赞同：0
> 
> 时间：2012-08-09T17:01:43.350
> 
> 标签：javascript, testing, qunit, js-test-driver

有没有人想出解决 jsTestDriver 无法递归查找文件以从配置进行测试的方法。它记录在这里：[http ://code.google.com/p/js-test-driver/issues/detail?id=6](http://code.google.com/p/js-test-driver/issues/detail?id=6)

目前我们无法在 jsTestDriver 配置中提供 /root/module/** 之类的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T20:21:30.800

[它现在已在JsTestDriver-1.3.5](http://code.google.com/p/js-test-driver/downloads/list)中修复，所以现在您可以执行以下操作：

```
load:
  - js/**/*.js
  - data/**/*.json 
```

干杯

# css - Css : img 边框和文字装饰

> ID：11888400
> 
> 赞同：0
> 
> 时间：2012-08-09T17:01:46.840
> 
> 标签：css, image, hyperlink, border

我正在尝试修复 IE 图像边框问题，同时在链接悬停时进行文本装饰。边界问题已解决，但装饰消失了。

```
<a href="home.php" class="menu-links">
<div class="menu-home">Home</div>
<img class="menu-home-logo" src="images/home.png" width="32" height="32">
</a> 
```

CSS：

```
.menu-links {
    color:#000;
    text-decoration:none;
}
.menu-links:hover {
    text-decoration:underline;
}
.menu-links img {border: none; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:18:17.820

您包含的代码在 Internet Explorer 和 Firefox 中正常运行。悬停时主页带有下划线并且图像没有边框。如果您希望图像和文本都带有下划线，则需要在悬停时添加`border-bottom`而不是添加到图像中：`text-decoration`

```
<html>
    <head>
        <title>Test</title>
        <style type="text/css">
            .menu-links { color:#000; text-decoration:none; }
            .menu-links:hover { text-decoration:underline; }
            .menu-links img { border: none; }
            .menu-links:hover img { border-bottom: 1px solid #000; }
        </style>
    </head>

    <body>
        <a href="home.php" class="menu-links">
            <div class="menu-home">Home</div>
            <img class="menu-home-logo" src="images/home.png" width="32" height="32">
        </a>
    </body>
</html> 
```

如果显示不正确，则可能是其他一些 CSS 干扰了您在上面发布的样式。使用像 Firebug 这样的调试器来分析控件并查看是什么阻止了下划线出现。

# linux - 如何调试 Linux 内核模块的 init_module() 调用？

> ID：11888412
> 
> 赞同：3
> 
> 时间：2012-08-09T17:03:03.897
> 
> 标签：linux, debugging, linux-kernel, kernel-module

我正在迈出 Linux 内核开发的第一步。我有一些代码生成`.ko`我安装的内核模块`insmod`。我想要一种方法来调试安装模块时发生的事情，但我遇到了一些困难。

1.  我需要调试对`init_module`. 我运行时是否调用了此函数`insmode`？

2.  我尝试用它`insmod "/my/url/fil.ko" -m`来调试发生的事情，但每次我在里面遇到错误`-1 Unknown symbol in module`时，`/cat/log/message`我都能看到错误`unknown parameter -m`

3.  你知道是否有办法用 GDB 进行调试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:26:32.457

是的，一旦您使用 insmod 将 init_module 函数加载到内核，它就会被调用。您只需添加一行 printk 并在插入模块后立即验证它是否正在打印。

您不能传递诸如 -m 之类的参数来调试内核模块。

您只能使用 MODULE_PARAMS 传递打算在您编写的内核模块中处理的参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-15T10:46:38.530

**QEMU + GDB 分步调试`module_init`**

在尝试之前首先让内核模块 QEMU + GDB 调试正常工作`module_init`：[如何使用 QEMU 调试 Linux 内核模块？](https://stackoverflow.com/questions/28607538/how-to-debug-linux-kernel-modules-with-qemu/44095831#44095831)

`module_init`更难，因为我们不知道内核模块将在哪里加载。

然后，这里有两种非理想但可用的技术来闯入`module_init`：

1.  找到模块加载地址，以后再使用。

    每次启动后模块加载位置是确定的，因此我们可以找到：

    *   该`.text`部分的基地址：[如何获取使用 insmod 插入的内核模块的地址？](https://stackoverflow.com/questions/6384605/how-to-get-the-address-of-a-kernel-module-that-was-using-insmod)

    *   `module_init`部分内符号的位置`.text`：

        ```
        ./readelf -s fops.ko | grep myinit 
        ```

    然后，把它们加起来，然后告诉 GDB 在那个时候中断。

2.  进入`module_init`通话。

    在内核 4.16 上，首先中断：

    ```
    do_init_module 
    ```

    然后一步直到：

    ```
    ret = fn(); 
    ```

    然后踏入其中，您就会陷入该`module_init`功能。

此[QEMU + Buildroot 设置](https://github.com/cirosantilli/linux-kernel-module-cheat/tree/ae780f6750b98051bdb0ee1b33b5808ded17bd35#gdb-module_init)可用于方便地测试这两种方法。

# javascript - FireBreath插件通过多个页面

> ID：11888416
> 
> 赞同：0
> 
> 时间：2012-08-09T17:03:39.160
> 
> 标签：javascript, plugins, npapi, firebreath

我正在使用 FireBreath 开发网络插件，我在这方面还是个新手。到目前为止，我已经开发了相当复杂的插件 API 类（带有注册的方法、属性和一些其他变量和结构）。
我正在使用 javascript 和默认对象 id="plugin0" type="application/x-myapp> 标签将其加载到页面上。
但是现在我需要重定向到另一个 html 页面，并且我需要保留以前填充的所有变量页面。使用带有 OBJECT 标记的相同模型，我想我创建了插件的另一个实例，因为所有变量都未定义。所以我的问题是如何保留一个插件实例并使其在多个 html 页面中可访问？
具体来说，我有一个页面，我在带有登录屏幕的插件 API 类中存储变量和指针，登录后我需要重定向到另一个页面并能够访问以前填充的变量和指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:19:36.930

简单的答案？你不能。插件特定于单个页面。任何给定的插件实例都将被销毁，其中包含它的对象标记被销毁 -*句号*。这条规定没有例外。

也就是说，您可以尝试以下几种选择：

1) 将您的网站重写为 AJAX 和 javascript 驱动，以便所有页面实际上是具有不同主题标签等的同一页面。请参阅[http://backbonejs.org/](http://backbonejs.org/)以获得有助于此的一个框架。从插件的角度来看，这绝对是最简单的解决方案，但它可能需要重写整个网站，这可能会出现问题。

2) 使用您的 Web 应用程序维护状态并将数据传递回每个页面上的插件。插件实例化后，您可以通过参数标签或函数调用来做到这一点

3) 使用您的插件创建某种“会话”，并将数据存储在全局内存空间中；然后，您可以在另一个页面上恢复“会话”。例如：

```
if (!plugin.restoreSession("userid")) {
    plugin.createSession("userid");
} 
```

在此示例中，createSession 和 restoreSession 将用于初始化或恢复给定会话。这样做的挑战是您不知道使用您的插件打开了多少选项卡或页面，因此您很容易在访问相同全局数据的页面之间发生冲突。此外，有人可能会创建另一个网页来使用您的插件并恢复会话并更改或访问数据，因此存在安全风险。您可以通过将域名与会话一起存储并仅允许从同一域访问会话来缓解这种情况，但是……好吧，现在您基本上只是重新创建了 cookie。

另外，浏览器实际上并不能保证你的插件模块会被加载多久；如果没有活动实例（在页面请求之间），它可以随时将其卸载给您。实际上，在浏览器关闭之前，插件模块更有可能不会被卸载，这意味着您在插件中存储在全局内存中的任何数据都不会被释放，并且会继续占用内存，直到您关闭浏览器。

4) 创建一个使用您的插件并跨多个页面请求工作的浏览器扩展程序。我不知道如何做到这一点，但我从其他人那里听到的事情让我相信这是可能的。请记住，您必须为每个支持的浏览器制作一个，这在 IE 上可能是不可能的；可能只在 Firefox/Chrome 上。

由于您是 StackOverflow 的新手，因此我欢迎您访问该站点，并在您发布问题（不仅仅是这个问题！）时提醒您，为有用的答案投票并尝试始终将其标记为正确。

# java - Java：绝对值的最大值和最小值

> ID：11888417
> 
> 赞同：3
> 
> 时间：2012-08-09T17:03:39.683
> 
> 标签：java

我正在寻找一种方法，给定 2 个浮点数 A 和 B 返回绝对值较低的值（A 或 B）。

最初我尝试过

```
Math.min(Math.abs(A),Math.abs(B)); 
```

但这是不正确的，因为例如对于 (-9,-2) 返回 +2 并且我正在寻找的返回值是 -2。

是否有一些本机/内置的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T17:08:21.090

```
Math.abs(A) < Math.abs(B) ? A : B; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T17:10:22.370

我不赞成对局部变量使用大写，但是

```
 (Math.abs(A) < Math.abs(B)) ? A : B 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T17:08:20.883

`Math.min()`返回传递给它的两个参数中的最小值。在上面的示例中，您为其提供了参数`999`和`2`（由`Math.abs()`.

您可以将`Math.min()`呼叫替换为以下内容：

```
Math.abs(A) < Math.abs(B) ? A : B; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T17:10:09.017

```
val = (Math.abs(A) < Math.abs(B)) ? A : B; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-09T17:07:54.917

嗯，这是一个正确的行为。

您将在 Min 函数中获得两个数字的绝对值，该函数返回两者的最小值。在您的情况下，这是 2，因为您正在比较 9 和 2。

**编辑**

AFAIK 没有内置的方法来做你想做的事。正如其他人所建议的那样，您必须自己进行比较，例如：

```
Math.abs(A) < Math.abs(B) ? A : B 
```

请记住要小心您比较的类型和结果。

# regex - Perl：当 subexpr 有捕获时通过插值组成正则表达式

> ID：11888419
> 
> 赞同：0
> 
> 时间：2012-08-09T17:03:52.100
> 
> 标签：regex, perl, assertions

我是 Perl 的新手，但我想知道如果我创建一个带有捕获的正则表达式变量，甚至是代码断言等其他类型的副作用，然后使用插值将此正则表达式插入到更大的正则表达式组合中，然后再次重复这个过程？

就副作用行为而言，控制最终组合的真正作用是否会变得一团糟，甚至可能？有这方面的文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:09:21.480

有很多关于这方面的[文档](http://perldoc.perl.org)，并且它随 Perl 一起提供。:)

首先，插值发生在 Perl 处理模式的字符之前。[了解双引号上下文中的操作顺序](http://www.effectiveperlprogramming.com/blog/1496)。内插字符串中的任何特殊字符仍然是特殊的。

要回答您的问题，您只需尝试一下即可。

```
use v5.10;

my $start = qr/(Buster|Mimi)/;  
say "Starting regex --> $start";

my $middle = qr/My (cat is $start)/i;   
say "Middle regex --> $middle";

my $end = qr/Find \s+ "$middle"/x;  
say "End regex --> $end"; 
```

这表明每个正则表达式都嵌入到较大的正则表达式中，保留了它的选项。

```
Starting regex --> (?^:(Buster|Mimi))
Middle regex --> (?^i:My (cat is (?^:(Buster|Mimi))))
End regex --> (?^x:Find \s+ "(?^i:My (cat is (?^:(Buster|Mimi))))") 
```

每个级别的捕获规则都是相同的。它们由开始捕获括号的顺序决定。Perl 不会让您跟踪任何类型的嵌套或“谁先到那里”。如果您不想跟踪编号的捕获变量，可以使用命名捕获。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T17:57:55.300

你的意思是这样吗？

```
my $name = "bob";
while ($name_from_file = <STDIN>) {
   chomp $name_from_file;
   if ($name_from_file =~ /^$name\n/i)
   print "I got something for $name!\n";
} 
```

是的，你可以。

但是，更好的方法是使用`qr`来帮助构建正则表达式：

```
my $re_name = qr(^) . qr(bob) . qr(\s);
while ($name_from_file = <STDIN>) {
   chomp $name_from_file;
   if ($name_from_file =~ /$re_name/i)
   print "I got something for $name!\n";
} 
```

这样，您的正则表达式可以更轻松地插入变量。

# java - 如何用java创建写作模拟？

> ID：11888425
> 
> 赞同：-1
> 
> 时间：2012-08-09T17:04:31.290
> 
> 标签：java, swing, fonts, paintcomponent, alphabetic

我需要想出一种方法，让三个大字母看起来像是在打字/书写。我可以用`paintComponent();`

**我需要有关如何实现此目的的想法/示例？**

这是我已经做过的。

```
public class LetterWriter extends JPanel {
   private String[] alphabets;
private Font font;

public LetterWriter() {
    createComponents();
    layoutComponents();
}

public void createComponents() {
    alphabets = new String[]{"A","B","C"};
    String[] fonts = GraphicsEnvironment.getLocalGraphicsEnvironment().getAvailableFontFamilyNames();
    font = new Font(fonts[7],1,500);
}

public void layoutComponents() {
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2d = (Graphics2D) g.create();
    g2d.setFont(font);
    g2d.drawString(alphabets[0],getWidth()/7,getHeight()-50);
}

public static void main(String[] args) {
    LetterWriter demo = new LetterWriter();
    JFrame frame = new JFrame();
    Container cp = frame.getContentPane();
    cp.add(demo);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(500, 500);
    frame.setLocation(500, 500);
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:34:03.093

如果你真的想显示文本，就像有人在打字一样，你可以使用[javax.swing.Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)，为此，只需使用 a`JLabel`来显示文本`JPanel`而不是在 上绘制它`JPanel`，因为在绘制时，您必须担心字体度量和所述字符在给定位置的放置，这可能很麻烦。虽然如果您打算做一些与我在这里介绍的不同的事情，请同样回复。

这是一个示例代码供您参考：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TypingLetters
{
    private String text;
    private JLabel letterLabel;
    private int counter = 0;
    private Timer timer;
    private ActionListener timerAction = new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent ae)
        {
            if (counter <= text.length())
            {
                letterLabel.setText(text.substring(0, counter));
                counter++;
            }
            else
                timer.stop();
        }
    };

    public TypingLetters()
    {
        text = "A long text that I want to" +
                    " appear as being TYPED :-)";
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("Typing Letters Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        letterLabel = new JLabel();
        contentPane.add(letterLabel);

        frame.setContentPane(contentPane);
        frame.setSize(500, 200);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
        timer = new Timer(250, timerAction);
        timer.start();
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new TypingLetters().displayGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:12:01.787

一些想法：

*   制作视频并播放（例如，与 .gif 相同）

*   把信分成小块，然后把这些小块一个接一个地涂上

*   定义路径并让“铅笔”在动态创建的图像上绘制自己

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:12:05.240

选项1：

1.  在一张纸上绘制图像
2.  拍一张照片保存到你的电脑里
3.  使用 g.drawImage("TheImageYouTook",0,0,sizex,sizey);

选项 2：

您可以选择 java 字体，但这会有点复杂，如果上述选项不适合您，请参阅此页面，[http://docs.oracle.com/javase/6/docs/api/java/awt/Font。 html](http://docs.oracle.com/javase/6/docs/api/java/awt/Font.html)

# oracle - SQLPlus 的假脱机速度

> ID：11888431
> 
> 赞同：0
> 
> 时间：2012-08-09T17:04:54.073
> 
> 标签：oracle, sqlplus

我有一个包含 70000 行的表 MYPROMPT varchar2(100)、Mystring1 varchar2(100)、Mystring2 varchar2(100)

因此，数据可能如下所示：

```
 'GREETING','Hello there','Joe' 
 'GREETING','Hello there','Mike'
 'GREETING','Hi','Steve' 
 'FIRING','You are fired','Dave'
 'FIRING','Outta here','Bob' 
```

我需要把它放到一个像这样的文件中

```
GREETING
Hello there Joe
Hello there Mike
Hi Steve
FIRING
You are fired Dave
Outta here Bob 
```

我有一个处理这个的脚本，为每个 MYPROMPT 做一个选择，这很好用。它根据 MYPROMPT 的各种值运行一系列查询。问题是假脱机到我需要的输出文件需要很长时间（超过一个小时）。我可以在 SQLPlus 中还是在数据库中设置一些东西来加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:21:09.717

我的错。不是 SQLPlus 导致了问题，而是我的查询出现了问题。

# html - html：在没有动作的情况下使用表单中的按钮

> ID：11888445
> 
> 赞同：0
> 
> 时间：2012-08-09T17:06:07.670
> 
> 标签：html, forms, button

我将链接样式设置为按钮，并注意到链接操作被表单操作覆盖。所以取消按钮实际上会更新。有没有办法从按钮中轻松可靠地（在所有浏览器中）删除此行为，同时将其保留在表单元素中？还是我需要重新设计按钮？

* * *

更新：

```
<form>
 <input type='text'>
 <a href="cancel"><button>cancel</button></a>
 <input type="submit">
</form> 
```

现在`a>button`有相同的动作`input(submit)`

* * *

最终重新设计并删除了`button`标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:18:46.197

抱歉，如果我在这里用错了，但我不完全确定我是否理解您的问题，因为取消按钮不应该提交您的表单，但是您使用的按钮不正确，这可能是您问题的根源。

我认为，如果您按照自己的方式进行操作，它们将无法在 IE 中工作：

```
<input type="button" value="Cancel" onClick="window.location='http://www.yoursite.com/cancellink'" /> 
```

如果您按照上述方式执行这些操作，则应该在所有浏览器中执行您想要的任何操作，除非禁用 js - 希望这会有所帮助您可以调用任何 js 函数来清除表单或您想要的任何内容，而不是链接到页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:19:12.070

您需要设置按钮的类型，如果未设置类型属性，则默认情况下按钮充当表单内的提交按钮。

```
<a href="cancel"><button type="button">cancel</button></a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:15:16.533

由于链接的工作方式，当您单击 时`<a href="cancel">`，它将尝试将浏览器导航到该资源。（例如[http://yoursite.com/cancel](http://yoursite.com/cancel)）。

如果您希望您的按钮执行一些 JS 操作，请删除`<a>`. 在这种情况下，这只是多余的。设计`<button>`你想要的样式。

如果您希望您的按钮导航到页面，请`<button>`删除`<a>`.

# c++ - 图中边的顶点之间的最短路径不应该是边本身

> ID：11888452
> 
> 赞同：1
> 
> 时间：2012-08-09T17:06:22.060
> 
> 标签：c++, c, algorithm, graph

我需要在加权无向图中找到每条边的最短替代路径，即假设我在图中有一个 egde (a,b)，那么我想计算顶点 a 和 b 之间的最短路径跳过直接路径，即 edge(a,b) 。如果没有替代路径，那么距离应该是无限的。我想对图的每条边都这样做。我尝试过使用 dijkstras 算法（遇到目标顶点时会中断），但是为每条边单独计算路径需要太多时间，特别是在没有替代方案的情况下路径是可能的（在这种情况下，必须遍历整个图）。您能否为此提出任何其他替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:40:11.053

我想我要做的是调整 Dijkstra 的算法，以便我最初用长度为 2 且不使用该边的所有路径填充堆/优先队列（感谢titus 发现我之前的错误）。这样，您获得的结果将排除恰好包含一条边的路径。然后，结果将为您提供一个特定来源的所有内容，您可以对所有可能的来源重复此操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T21:43:46.457

建议的解决方案`Dennis Meng`是我的想法。但是有一些优化（预处理）可以使您的实现更快。

1.  将图分离为一组连通组件（树）[提示：使用 DFS 查找连通组件]。-- 这样，如果您在`tree`有节点中找不到对 (u,v) 的最短路径，`u`那么您可以跳出（内部）循环。

2.  维护每个节点与其对应的树之间的映射。-- 这将有助于实施第 1 步

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T17:27:25.217

[这](http://infoarena.ro/job_detail/575826?action=view-source)是我前段时间写的一个 dijkstra 实现，它使用[stl make_heap](http://www.cplusplus.com/reference/algorithm/make_heap/)更有效地查找下一个节点。实施很可能是正确的。
**编辑：**在从文件读取的示例中，`n`是顶点数，`m`是边数，`a`并且`b`是边顶点，方向是从`a`到`b`，`c`是权重。
正如[没人](https://stackoverflow.com/users/760746/nobody)提到的那样，您应该删除边缘，然后将其添加回来，以保持算法不变。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T04:39:58.037

在对它执行 dijkstras 之前，您只需要简单地从图中删除目标边......

# perl - 为什么 `Cvs` CPAN 模块不能正确识别已签出文件的状态？

> ID：11888453
> 
> 赞同：2
> 
> 时间：2012-08-09T17:06:26.127
> 
> 标签：perl, cvs

为什么[`Cvs`](http://search.cpan.org/perldoc?Cvs)CPAN 模块（perl5.8，Cvs 模块版本 0.06）不能正确识别已签出文件的状态？

```
$ echo $CVSROOT
:pserver:MYUSER@pserver.COMPANY.com:/u1/cvs_root

$ cvs co dev/script1.pl
U dev/script1.pl

$ cvs status dev/script1.pl | grep Status
File: script1.pl          Status: Up-to-date

$ cat cvs.pl

use Cvs; 
my $cvs = new Cvs("/u1/cvs_root",cvsroot => $ENV{CVSROOT}, password =>"****")
     or die $Cvs::ERROR; 
my $status = $cvs->status("dev/script1.pl"); 
print "STATUS: " . $status->status() . "\n"'

$ ./cvs.pl
STATUS: Needs Checkout 
```

“需要签出”是 CVS 针对尚未签出的有效 CVS 文件返回的状态。是什么赋予了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:36:11.810

`cvs 0.06`是一个真正（> 8 岁）的模块。即使是 0.07 版本也快 8 年了。
我自己不使用 cvs，但我可以想象这样一个旧模块有很多问题......

# php - SoapClient 中的命名空间问题

> ID：11888457
> 
> 赞同：1
> 
> 时间：2012-08-09T17:06:34.707
> 
> 标签：php, soap, soap-client

我无法发出 SOAP 请求。我正在使用生成的客户端代码，而这些代码又在 WSDL 模式下使用 SoapClient。我可以进行初始会话开始调用，但是当我进行另一个调用时，命名空间似乎不正常。

这是来自 SoapUI 的有效 SOAP 请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:wsdl="http://vendor_uri/">
   <soapenv:Header/>
   <soapenv:Body>
      <wsdl:GetProducts>
         <GetProductsRequest>
            <UserInfo Token="XXXXX"/>
            <ClientReferenceData Service="pinless_dialing"/>
         </GetProductsRequest>
      </wsdl:GetProducts>
   </soapenv:Body>
</soapenv:Envelope> 
```

这是 SoapClient 生成的 XML 请求（通过 Wireshark）：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="" xmlns:ns2="http://vendor_uri/">
    <SOAP-ENV:Body>
        <ns2:GetProducts>
            <GetProductsRequest>
                <ns1:UserInfo Token="XXXXX"/>
                <ns1:ClientReferenceData Service="pinless_dialing"/>
            </GetProductsRequest>
        </ns2:GetProducts>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

问题似乎出在 ns1 命名空间中。如果我接受同样的请求，并去掉那个命名空间，调用就会顺利通过 SoapUI。

同样，这是由 SoapClient 直接生成的。以下是生成代码中的相关代码：

```
class B2BServiceSoapClient{
    /**
     * The WSDL URI
     *
     * @var string
     */
    public static $_WsdlUri='http://vendor_wsdl_uri';
    /**
     * The PHP SoapClient object
     *
     * @var object
     */
    public static $_Server=null;

    /**
     * Send a SOAP request to the server
     *
     * @param string $method The method name
     * @param array $param The parameters
     * @return mixed The server response
     */
    public static function _Call($method,$param){
        if(is_null(self::$_Server))
            self::$_Server=new SoapClient(self::$_WsdlUri);
        return self::$_Server->__soapCall($method,$param);
    } 
```

该类的其余部分由镜像 WSDL 的类型定义组成。

这是我用来练习课程的代码：

```
<pre>
<?php
ini_set('soap.wsdl_cache_enabled',0);

require_once('BossILDClient.php');

$client = new B2BServiceSoapClient();
$sessionToken = new UserInfoType();
$parameters = new SessionStart();
$parameters->UserInfo = new UserInfoType();
$parameters->UserInfo->UserName = 'username';
$parameters->UserInfo->Password = 'password';

echo "Calling SessionStart(" . print_r($parameters, true) . ")" . PHP_EOL . PHP_EOL;

$result = $client->SessionStart($parameters);
$sessionToken->Token = $result->SessionStartResponse->Result->Token; 

echo "REQUEST HEADER:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastRequestHeaders()) . "\n";
echo "REQUEST:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastRequest()) . "\n";
echo "RESPONSE HEADER:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastResponseHeaders()) . "\n";
echo "RESPONSE:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastResponse()) . "\n";

$getProducts = new GetProducts();
$getProducts->GetProductsRequest = new GetProductsRequestType();
$getProducts->GetProductsRequest->ClientReferenceData = new ClientReferenceDataType();
$getProducts->GetProductsRequest->ClientReferenceData->Service = 'pinless_dialing';
$getProducts->GetProductsRequest->UserInfo = $sessionToken;

echo "Calling GetProducts(" . print_r($getProducts, true) . ")" . PHP_EOL . PHP_EOL;

try {
    $result = $client->GetProducts($getProducts);
} catch(SoapFault $sf) {
    echo "SOAP Fault error!!!" . PHP_EOL . PHP_EOL;
}

echo "REQUEST HEADER:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastRequestHeaders()) . "\n";
echo "REQUEST:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastRequest()) . "\n";
echo "RESPONSE HEADER:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastResponseHeaders()) . "\n";
echo "RESPONSE:\n" . htmlentities(B2BServiceSoapClient::$_Server->__getLastResponse()) . "\n";
?>
</pre> 
```

我已经用尽了我的疯狂猜测并考虑了无济于事的想法。我怎样才能防止那个“内部”命名空间？

这是上面代码的直接输出：

```
Calling SessionStart(SessionStart Object
(
    [UserInfo] => UserInfoType Object
        (
            [UserName] => username
            [Password] => password
            [Token] => 
        )

)
)

REQUEST HEADER:
POST /b2bapi/b2bservice.asmx HTTP/1.1
Host: 169.132.165.178
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.4.4
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://wsdl.idt.b2bapi.net/SessionStart"
Content-Length: 300

REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://wsdl.idt.b2bapi.net/">
  <SOAP-ENV:Body>
    <ns1:SessionStart>
      <UserInfo UserName="username" Password="password"/>
    </ns1:SessionStart>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope>

RESPONSE HEADER:
HTTP/1.1 200 OK
Cache-Control: private, max-age=0
Content-Length: 494
Content-Type: text/xml; charset=utf-8
Server: Microsoft-IIS/7.0
X-AspNet-Version: 4.0.30319
Set-Cookie: PSFSecKeyPart=XXXXXX; expires=Thu, 09-Aug-2012 19:56:39 GMT; path=/
X-Powered-By: ASP.NET
Date: Thu, 09 Aug 2012 19:36:39 GMT

RESPONSE:
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <soap:Body>
    <SessionStartResponse xmlns="http://wsdl.idt.b2bapi.net/">
      <SessionStartResponse xmlns="">
        <ResponseReferenceData Success="Y">
          <MessageList />
        </ResponseReferenceData>
        <Result Token="XXXXXX" />
      </SessionStartResponse>
    </SessionStartResponse>
  </soap:Body>
</soap:Envelope>

Calling GetProducts(GetProducts Object
(
    [GetProductsRequest] => GetProductsRequestType Object
        (
            [UserInfo] => UserInfoType Object
                (
                    [UserName] => 
                    [Password] => 
                    [Token] => XXXXXX
                )

            [ClientReferenceData] => ClientReferenceDataType Object
                (
                    [ClientTransactionID] => 
                    [Service] => pinless_dialing
                    [IP] => 
                    [TimeStamp] => 
                )

            [Parameters] => 
        )

)
)

SOAP Fault error!!!

REQUEST HEADER:
POST /b2bapi/b2bservice.asmx HTTP/1.1
Host: 169.132.165.178
Connection: Keep-Alive
User-Agent: PHP-SOAP/5.4.4
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://wsdl.idt.b2bapi.net/GetProducts"
Content-Length: 394
Cookie: PSFSecKeyPart=XXXXXX;

REQUEST:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="" xmlns:ns2="http://wsdl.idt.b2bapi.net/">
  <SOAP-ENV:Body>
    <ns2:GetProducts>
      <GetProductsRequest>
        <ns1:UserInfo Token="XXXXXX"/>
        <ns1:ClientReferenceData Service="pinless_dialing"/>
      </GetProductsRequest>
    </ns2:GetProducts>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope>

RESPONSE HEADER:
HTTP/1.1 400 Bad Request
Cache-Control: private
Transfer-Encoding: chunked
Content-Type: text/html
Server: Microsoft-IIS/7.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 09 Aug 2012 19:36:39 GMT

RESPONSE: 
```

这是精简的 WSDL：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions targetNamespace="http://wsdl.idt.b2bapi.net/" xmlns:s="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://wsdl.idt.b2bapi.net/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
   <wsdl:documentation>IDT B2BService</wsdl:documentation>
   <wsdl:types>
      <s:schema elementFormDefault="qualified" targetNamespace="http://wsdl.idt.b2bapi.net/">
         <s:import/>
         <s:element name="GetProducts">
            <s:complexType>
               <s:sequence>
                  <s:element minOccurs="0" maxOccurs="1" ref="GetProductsRequest"/>
               </s:sequence>
            </s:complexType>
         </s:element>
         <s:element name="GetProductsResponse">
            <s:complexType>
               <s:sequence>
                  <s:element minOccurs="0" maxOccurs="1" ref="GetProductsResponse"/>
               </s:sequence>
            </s:complexType>
         </s:element>
         <s:element name="SessionStart">
            <s:complexType>
               <s:sequence>
                  <s:element minOccurs="0" maxOccurs="1" ref="UserInfo"/>
               </s:sequence>
            </s:complexType>
         </s:element>
         <s:element name="SessionStartResponse">
            <s:complexType>
               <s:sequence>
                  <s:element minOccurs="0" maxOccurs="1" ref="SessionStartResponse"/>
               </s:sequence>
            </s:complexType>
         </s:element>
      </s:schema>
      <s:schema elementFormDefault="qualified">
         <s:complexType name="UserInfoType">
            <s:attribute name="UserName" type="s:string"/>
            <s:attribute name="Password" type="s:string"/>
            <s:attribute name="Token" type="s:string"/>
         </s:complexType>
         <s:complexType name="ClientReferenceDataType">
            <s:attribute name="ClientTransactionID" type="s:string"/>
            <s:attribute name="Service" type="enumService" use="required"/>
            <s:attribute name="IP" type="s:string"/>
            <s:attribute name="TimeStamp" type="s:dateTime" use="required"/>
         </s:complexType>
         <s:simpleType name="enumService">
            <s:restriction base="s:string">
               <s:enumeration value="pinless_dialing"/>
               <s:enumeration value="imtu"/>
               <s:enumeration value="remittance"/>
               <s:enumeration value="virtual_visa"/>
            </s:restriction>
         </s:simpleType>
         <s:complexType name="ResponseReferenceDataType">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="1" name="MessageList" type="ArrayOfMessageType"/>
            </s:sequence>
            <s:attribute name="Success" type="s:string"/>
            <s:attribute name="TransactionID" type="s:string"/>
            <s:attribute name="ClientTransactionID" type="s:string"/>
         </s:complexType>
         <s:complexType name="ArrayOfMessageType">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="unbounded" name="Message" type="MessageType"/>
            </s:sequence>
         </s:complexType>
         <s:complexType name="MessageType">
            <s:attribute name="PlatformCode" type="s:string"/>
            <s:attribute name="Service" type="s:string"/>
            <s:attribute name="Command" type="s:string"/>
            <s:attribute name="StatusCode" type="s:string"/>
            <s:attribute name="StatusText" type="s:string"/>
         </s:complexType>
         <s:element name="GetProductsRequest" type="GetProductsRequestType"/>
         <s:complexType name="GetProductsRequestType">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="1" name="UserInfo" type="UserInfoType"/>
               <s:element minOccurs="0" maxOccurs="1" name="ClientReferenceData" type="ClientReferenceDataType"/>
               <s:element minOccurs="0" maxOccurs="1" name="Parameters" type="GetProductsParametersType"/>
            </s:sequence>
         </s:complexType>
         <s:complexType name="GetProductsParametersType">
            <s:attribute name="DataType" type="s:string"/>
         </s:complexType>
         <s:element name="GetProductsResponse" type="GetProductsResponseType"/>
         <s:complexType name="GetProductsResponseType">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="1" name="ResponseReferenceData" type="ResponseReferenceDataType"/>
               <s:element minOccurs="0" maxOccurs="1" name="ProductList" type="ArrayOfProductListTypeProduct"/>
            </s:sequence>
         </s:complexType>
         <s:complexType name="ArrayOfProductListTypeProduct">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="unbounded" name="Product">
                  <s:complexType>
                     <s:sequence>
                        <s:element minOccurs="0" maxOccurs="1" name="ProductCountryList" type="ArrayOfProductCountryTypeProductCountry"/>
                     </s:sequence>
                     <s:attribute name="Code" type="s:string"/>
                     <s:attribute name="Name" type="s:string"/>
                     <s:attribute name="DisplayName" type="s:string"/>
                     <s:attribute default="0" name="Denomination" type="s:integer"/>
                     <s:attribute name="Default" type="s:string"/>
                  </s:complexType>
               </s:element>
            </s:sequence>
         </s:complexType>
         <s:complexType name="ArrayOfProductCountryTypeProductCountry">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="unbounded" name="ProductCountry">
                  <s:complexType>
                     <s:sequence>
                        <s:element minOccurs="0" maxOccurs="1" name="CarrierList" type="ArrayOfCarrierTypeCarrier"/>
                     </s:sequence>
                     <s:attribute name="CountryCode" type="s:string"/>
                     <s:attribute name="CountryName" type="s:string"/>
                  </s:complexType>
               </s:element>
            </s:sequence>
         </s:complexType>
         <s:complexType name="ArrayOfCarrierTypeCarrier">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="unbounded" name="Carrier">
                  <s:complexType>
                     <s:attribute name="CarrierCode" type="s:string"/>
                     <s:attribute name="CarrierName" type="s:string"/>
                  </s:complexType>
               </s:element>
            </s:sequence>
         </s:complexType>
         <s:element name="UserInfo" type="UserInfoType"/>
         <s:element name="SessionStartResponse" type="SessionStartResponseType"/>
         <s:complexType name="SessionStartResponseType">
            <s:sequence>
               <s:element minOccurs="0" maxOccurs="1" name="ResponseReferenceData" type="ResponseReferenceDataType"/>
               <s:element minOccurs="0" maxOccurs="1" name="Result" type="SessionStartResultType"/>
            </s:sequence>
         </s:complexType>
         <s:complexType name="SessionStartResultType">
            <s:attribute name="Token" type="s:string"/>
         </s:complexType>
         <s:element name="ResponseReferenceData" type="ResponseReferenceDataType"/>
      </s:schema>
   </wsdl:types>
   <wsdl:message name="GetProductsSoapIn">
      <wsdl:part name="parameters" element="tns:GetProducts"/>
   </wsdl:message>
   <wsdl:message name="GetProductsSoapOut">
      <wsdl:part name="parameters" element="tns:GetProductsResponse"/>
   </wsdl:message>
   <wsdl:message name="SessionStartSoapIn">
      <wsdl:part name="parameters" element="tns:SessionStart"/>
   </wsdl:message>
   <wsdl:message name="SessionStartSoapOut">
      <wsdl:part name="parameters" element="tns:SessionStartResponse"/>
   </wsdl:message>
   <wsdl:portType name="B2BServiceSoap">
      <wsdl:operation name="GetProducts">
         <wsdl:input message="tns:GetProductsSoapIn"/>
         <wsdl:output message="tns:GetProductsSoapOut"/>
      </wsdl:operation>
      <wsdl:operation name="SessionStart">
         <wsdl:input message="tns:SessionStartSoapIn"/>
         <wsdl:output message="tns:SessionStartSoapOut"/>
      </wsdl:operation>
   </wsdl:portType>
   <wsdl:binding name="B2BServiceSoap" type="tns:B2BServiceSoap">
      <soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
      <wsdl:operation name="GetProducts">
         <soap:operation soapAction="http://wsdl.idt.b2bapi.net/GetProducts" style="document"/>
         <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
         <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
      </wsdl:operation>
      <wsdl:operation name="SessionStart">
         <soap:operation soapAction="http://wsdl.idt.b2bapi.net/SessionStart" style="document"/>
         <wsdl:input>
            <soap:body use="literal"/>
         </wsdl:input>
         <wsdl:output>
            <soap:body use="literal"/>
         </wsdl:output>
      </wsdl:operation>
   </wsdl:binding>
   <wsdl:binding name="B2BServiceSoap12" type="tns:B2BServiceSoap">
      <soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
      <wsdl:operation name="GetProducts">
         <soap12:operation soapAction="http://wsdl.idt.b2bapi.net/GetProducts" style="document"/>
         <wsdl:input>
            <soap12:body use="literal"/>
         </wsdl:input>
         <wsdl:output>
            <soap12:body use="literal"/>
         </wsdl:output>
      </wsdl:operation>
      <wsdl:operation name="SessionStart">
         <soap12:operation soapAction="http://wsdl.idt.b2bapi.net/SessionStart" style="document"/>
         <wsdl:input>
            <soap12:body use="literal"/>
         </wsdl:input>
         <wsdl:output>
            <soap12:body use="literal"/>
         </wsdl:output>
      </wsdl:operation>
   </wsdl:binding>
   <wsdl:service name="B2BService">
      <wsdl:documentation>IDT B2BService</wsdl:documentation>
      <wsdl:port name="B2BServiceSoap" binding="tns:B2BServiceSoap">
         <soap:address location="http://169.132.165.178/b2bapi/b2bservice.asmx"/>
      </wsdl:port>
      <wsdl:port name="B2BServiceSoap12" binding="tns:B2BServiceSoap12">
         <soap12:address location="http://169.132.165.178/b2bapi/b2bservice.asmx"/>
      </wsdl:port>
   </wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:46:13.087

我的猜测是这`SoapClient`很困惑，因为它`elementFormDefault="qualified"`在架构上看到但没有命名空间。将 WSDL 保存到您的本地计算机并尝试`<xsd:schema>`通过删除所有以下内容使所有内容成为 WSDL 中第一个元素的一部分：

```
</s:schema>
<s:schema elementFormDefault="qualified"> 
```

之后将您的本地 WSDL 传递给`SoapClient`. WSDL 中的端点应该足以告诉它将消息发送到哪里。

# jquery - 如何在项目中添加链接以打开另一个在同位素中动态添加的项目？

> ID：11888459
> 
> 赞同：1
> 
> 时间：2012-08-09T17:06:46.073
> 
> 标签：jquery, jquery-isotope

我目前正在试用 David DeSandro 的 Isotope jQuery 插件：我正在将项目动态添加到容器中。

我还使用[了这个小提琴](http://jsfiddle.net/desandro/8QkEw/)中使用的技术，对容器左上角的点击项进行排序。

我的同位素项目应包含一些文字。单击此文本中的链接，应将另一个项目排序并放置在右上角，而不是单击的项目。

知道这些项目是动态添加的，如何`<a href="...`在一个项目中创建链接以触发对另一项目左上角的排序？

非常感谢您的回答，非常感谢 David De Sandro 的工作；一旦我能做到这一点，我肯定会尽快获得商业许可证......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:51:50.353

如果根据我的评论，我理解你的意思（？），你点击元素 A 的链接需要在另一个元素 B 上设置 .selected 类，然后调用 sortBy 将元素 B 移动到左上角。**这意味着您不应**将触发单击功能分配给整个同位素元素 A（通常是这种情况），而应仅分配给该元素 A 内部包含的链接。然后，不是元素 A 被排序到左上角，而是元素B（并单击 E 中的链接将 P 排序到左上角，G 将 W 排序到左上角，依此类推）。这可能是一个开始：

据我了解，您想要像这样的所有元素之间的交叉链接：

```
<div id="container">
  <div class="item">A <a href="#" id="element-G">link to element G</a></div>
  <div class="item">B <a href="#" id="element-F">link to element F</a></div>
  <div class="item">C <a href="#" id="element-E">link to element E</a></div>
  ...
  ..
  .
</div> 
```

然后你可以[继续使用这个小提琴](http://jsfiddle.net/djKBC/)，你可以看到现在你 1\. 仅通过单击其中的链接对同位素元素进行排序，并且 2\. 你可以提取另一个同位素元素的 id - 一个然后用 .selected 分类以在左上角排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:07:16.100

非常感谢，这给了我缺失的想法（为链接和 div 分配一个 ID）。这是工作示例：

> [http://jsfiddle.net/vpxavier/QRy9W/23/](http://jsfiddle.net/vpxavier/QRy9W/23/)

现在我只需要动态管理添加 ID。再次感谢。

# ssl - 通配符 SSL 和 CNAME

> ID：11888461
> 
> 赞同：3
> 
> 时间：2012-08-09T17:06:48.043
> 
> 标签：ssl, amazon-ec2, cname, wildcard-subdomain

我正在使用 Amazon EC2 ELB 并遵循他们使用 CNAME 来引用 ELB 的公共 DNS 的建议：

```
$ nslookup qa.mydomain.com
Server:     192.168.1.1
Address:    192.168.1.1#53

Non-authoritative answer:
qa.mydomain.com canonical name = mydomain-20530xxxx.us-west-1.elb.amazonaws.com.
Name:   mydomain-20530xxxx.us-west-1.elb.amazonaws.com
Address: 50.18.xxx.yyy 
```

我购买了通配符 SSL 证书来保护我的所有子域。所以证书是为`*.mydomain.com`. 但是，当我访问 时`qa.mydomain.com`，所有浏览器都在尖叫安全。当我尝试访问[https://qa.mydomain.com](https://qa.mydomain.com)时，Google Chrome 上的消息是：

Chrome 说：您试图访问 mydomain-20530xxxx.us-west-1.elb.amazonaws.com，但实际上您访问了一个自称为 *.mydomain.com 的服务器。这可能是由于服务器上的配置错误或更严重的原因造成的。

我是不是走错了路？CNAME 的使用本质上与 PKI/SSL 不兼容吗？我有哪些选择？

谢谢。

PS：这是`dig`对地址执行的报告：`qa.mydomain.com`。显然，为了安全起见，实际的域名和结果已被掩盖。

```
$ dig qa.mydomain.com

; <<>> DiG 9.8.1-P1 <<>> qa.mydomain.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 961
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;qa.mydomain.com.       IN  A

;; ANSWER SECTION:
qa.mydomain.com.    1670    IN  CNAME   mydomain-205300xxxx.us-west-1.elb.amazonaws.com.
mydomain-205300xxxx.us-west-1.elb.amazonaws.com. 60 IN A 50.18.xxx.yyy

;; Query time: 105 msec
;; SERVER: 192.168.1.1#53(192.168.1.1)
;; WHEN: Thu Aug  9 14:05:31 2012
;; MSG SIZE  rcvd: 121 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:52:09.103

IP 地址解析来自 CNAME 还是 A DNS 条目对证书名称验证没有影响。

重要的是，您在 URL 中请求的名称与证书中的条目之一匹配。

简而言之，如果证书有 Subject Alternative Name 条目，其中之一必须与您请求的主机名匹配；如果没有 SAN DNS 条目，主题 DN 的公用名 (CN) 必须与主机名匹配。

# graphviz - GraphViz：压缩自动生成的图形

> ID：11888462
> 
> 赞同：3
> 
> 时间：2012-08-09T17:06:52.823
> 
> 标签：graphviz

我正在尝试可视化 Excel 文件的两列：A 列包含类别，而 B 列包含单个条目。点文件由 Excel 使用以下公式生成：

```
=IFERROR(CONCATENATE("subgraph cluster_",A2,"{""",B2,"""","; label =""",A2,"""}"),"") 
```

然后使用“unflatten”实用程序更均匀地分布节点，最后使用“dot”生成图形

```
unflatten.exe -f -l 4 -c 6 -o FLATTENED.dot INPUTFILE.dot
dot -Tpng FLATTENED.dot > FLATTENED.png 
```

生成[如下](http://imgur.com/Z1puA)图

我想让图表更紧凑，并将类别与页面的上边缘对齐，我应该查看哪些命令来改进结果输出？

我已附上[点文件](http://pastebin.com/JZw1zgH1)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:08:50.623

这是一个想法：

*   而不是一个带有 x 个簇的图创建一个带有 x 个图的点文件
*   展开它们
*   然后用于[`gvpack`](https://graphviz.org/pdf/gvpack.1.pdf)将所有图形打包在一起
*   和整洁的布局

基本思想是使用图表而不是集群，以便您可以使用`gvpack`来打包图表。

就像是：

```
unflatten -f -l 4 -c 6 input.dot | dot | gvpack -array_t6 | neato -s -n2 -Tpng -o output.png 
```

不确定是否 unflatten 处理带有多个图形的文件。

（对不起，没有时间检查它）。

# java - Java 在单独的类上添加 ActionListener

> ID：11888463
> 
> 赞同：4
> 
> 时间：2012-08-09T17:06:54.807
> 
> 标签：java, swing, jframe, actionlistener

这是我想要做的，其中一个类是包含所有 JButtons 的 JFrame，我想要另一个类来监听对 JFrame 类所做的操作。请看下面的代码：

```
public class Frame extends JFrame{
    //all the jcomponents in here

}

public class listener implements ActionListener{
    //listen to the actions made by the Frame class

} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:18:44.323

只需将侦听器的新实例添加到您想要侦听的任何组件中。任何实现的类`ActionListener`都可以作为侦听器添加到您的组件中。

```
public class Frame extends JFrame {
    JButton testButton;

    public Frame() {
        testButton = new JButton();
        testButton.addActionListener(new listener());

        this.add(testButton);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T17:35:36.953

**1.**您可以使用`Inner Class`, 或`Anonymous Inner Class`来解决这个问题......

**例如：**

**内部类**

```
public class Test{

 Button b = new Button();

 class MyListener implements ActionListener{

       public void actionPerformed(ActionEvent e) {

                    // Do whatever you want to do on the button click.
      } 

   }
} 
```

**例如：**

**匿名内部类**

```
public class Test{

     Button b = new Button();

     b.addActionListener(new ActionListener(){

        public void actionPerformed(ActionEvent e) {

                        // Do whatever you want to do on the button click.
          } 

   });

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:28:34.293

如果您想要一个相同的实例`listener`来监听框架中的所有按钮，则必须使 actionPerformed 方法收集所有点击并根据命令进行委托：

```
public class listener extends ActionListener{
    public void actionPerformed(ActionEvent e){
        String command = e.getActionCommand();
        if (command.equals("foo")) {
            handleFoo(e);
        } else if (command.equals("bar")) {
            handleBar(e);
        }
    }

    private void handleFoo(ActionEvent e) {...}
    private void handleBar(ActionEvent e) {...}
} 
```

在 Java 7 中这将变得更容易，您可以在其中切换字符串！`Text`按钮单击的ActionCommand将是 的-`JButton`属性，除非您另外设置

# ember.js - Ember 路由器动态段通配

> ID：11888465
> 
> 赞同：2
> 
> 时间：2012-08-09T17:07:07.050
> 
> 标签：ember.js, ember-old-router, glob

我正在寻找一种在 Ember.Router (1.0pre) 中使用[类似 Rails 路由的方法。](http://guides.rubyonrails.org/routing.html#route-globbing)
我的目标是将路径匹配为动态段。

我想要这样的路线（CoffeeScript）：

```
App.Router = Ember.Router.extend
    location: 'hash'
    enableLogging: true
    root: Ember.Route.extend
        myRoute: Ember.Route.extend
            route: '/:path*'
            connectOutlets: (router, context) ->
                { ... something here ... } 
```

不幸的是，Ember._RouteMatcher 似乎不支持这种语法（路由中的尾随星号），所以我无法创建一个匹配动态段（如“/long/path/to/something”）的路由。

有没有人设法做到这一点（或找到某种解决方法）？

# php - 验证此图像验证码。jQuery PHP & javascript

> ID：11888466
> 
> 赞同：0
> 
> 时间：2012-08-09T17:07:13.653
> 
> 标签：php, javascript, jquery, image, captcha

我有验证码在 captcha.php 中创建图像。在我的联系 php 页面上，它需要图像并重新加载并且一切正常。我似乎无法找到一种方法来验证它。

这是创建验证码图像的代码：

```
<?php
session_start();

$word_1 = '';
$word_2 = '';

for ($i = 0; $i < 4; $i++) 
{
    $word_1 .= chr(rand(97, 122));
}
for ($i = 0; $i < 4; $i++) 
{
    $word_2 .= chr(rand(97, 122));
}

$_SESSION['random_number'] = $word_1.' '.$word_2;

$dir = '/addons/fonts/';

$image = imagecreatetruecolor(165, 50);

$font = "recaptchaFont.ttf"; // font style

$color = imagecolorallocate($image, 0, 0, 0);// color

$white = imagecolorallocate($image, 255, 255, 255); // background color white

imagefilledrectangle($image, 0,0, 709, 99, $white);

imagettftext ($image, 22, 0, 5, 30, $color, $dir.$font, $_SESSION['random_number']);

header("Content-type: image/png");

imagepng($image); 

?> 
```

这就是该文件中的全部内容。

接下来是我实际表单中的代码（联系我们页面）：

```
<form id="contactForm" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
<table>
<tr>
    <td><span class="greyText">Enter text shown:</span></td>
    <td>
        <div id="captcha-wrap">
            <div class="captcha-box">
                <img src="captcha.php" alt="" id="captcha" />
            </div>
            <div class="text-box">
                <label>Type the two words:</label>
                <input name="captcha-code" type="text" id="captcha-code">
            </div>
            <div class="captcha-action">
                <img src="./images/captcha-refresh.png"  alt="" id="captcha-refresh" />
            </div>
        </div>
        <span id="captchaInfo">*</span>  
    </td>
</tr>
<tr>
    <td colspan="2">
            <div class="seperator">&nbsp;</div>

            <input type="submit" name="submit" class="styleButton" style="float:right;margin-right:10px" value="SUBMIT" /></td>
</tr>
</table>
</form> 
```

我在该表中还有其他行用于姓名、电子邮件等，但我只是将其删除以使其更短。

＆在联系页面的文档准备功能中，我有此代码在单击按钮时刷新验证码：

```
 // refresh captcha
 $('img#captcha-refresh').click(function() {  

        change_captcha();
 });

 function change_captcha()
 {
    document.getElementById('captcha').src='jquery-captcha.php?rnd=' + Math.random();
 } 
```

接下来是我对整个表单本身的验证。它适用于除验证码以外的所有内容：

```
$(document).ready(function(){
    //global vars
    var form = $("#contactForm");
    var name = $("#name");
    var nameInfo = $("#nameInfo");
    var telephone = $("#telephone");
    var telephoneInfo = $("#telephoneInfo");
    var email = $("#email");
    var emailInfo = $("#emailInfo");
    var message = $("#message");
    var messageInfo = $("#messageInfo");
    var captcha = $("#captcha-code");
    var captchaInfo = $("#captchaInfo");

    //On blur
    name.blur(validateName);
    telephone.blur(validatePhone);
    email.blur(validateEmail);
    message.blur(validateMessage);
    captcha.blur(validateCaptcha);
    //On key press
    name.keyup(validateName);
    telephone.keyup(validatePhone);
    message.keyup(validateMessage);
    captcha.keyup(validateCaptcha);
    //On Submitting
    form.submit(function(){
        if(validateName() & validateEmail() & validatePhone() & validateMessage() & validateCaptcha())
            return true
        else
            return false;
    });

    function validateName(){
        //if it's NOT valid
        if(name.val().length < 4){
            name.addClass("error");
            nameInfo.text("* Name Required");
            nameInfo.addClass("error");
            return false;
        }
        //if it's valid
        else{
            name.removeClass("error");
            nameInfo.text("*");
            nameInfo.removeClass("error");
            return true;
        }
    }
    function validateCaptcha(){

        $.post("captchaValidate.php?"+$("#contactForm").serialize(), {

            }, function(response){

            if(response==1)
            {
                captcha.removeClass("error");
                captchaInfo.text("*");
                captchaInfo.removeClass("error");
                return true;
            }
            else
            {
                captchaInfo.text("* Please enter the words you see in the box above. If you are having trouble seeing it, click the refresh button.");
                captchaInfo.addClass("error");
                captchaInfo.css({'float': 'left', 'margin-left': '5px'});
                return false;
            }

        });
    }
}); 
```

我再次删除了上面的一些代码以使其更短，但我留下了 validateName 函数，这样您就可以看到我是如何完成其​​余部分的。

在 validateCaptcha 代码中，它指向此页面/代码：

```
<?php
session_start();

if(@strtolower($_REQUEST['captcha-code']) == strtolower($_SESSION['random_number']))
{

    echo 1;// YAY!

}
else
{
    echo 0; // invalid code
}
?> 
```

对此的任何帮助将不胜感激，我已经被困了这么久！我已经尝试了一些东西，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:11:16.967

读这个： -

PHP jQuery 验证 CAPTCHA 代码示例

[http://captcha.biz/doc/php/samples/php-jquery-validation-captcha-sample.html](http://captcha.biz/doc/php/samples/php-jquery-validation-captcha-sample.html)

PHP验证码

[http://www.9lessons.info/2011/01/php-captcha-code.html](http://www.9lessons.info/2011/01/php-captcha-code.html)

jquery-validation / 演示 / 验证码

[https://github.com/jzaefferer/jquery-validation/blob/master/demo/captcha/index.php](https://github.com/jzaefferer/jquery-validation/blob/master/demo/captcha/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T22:02:02.200

如果您不介意使用简单的数学验证码，这个很容易集成到您自己的代码中。它同时使用 PHP 和 jQuery，因此无论是否启用 Javascript 都可以使用。我为此编写了一个教程，并提供了一个项目下载，其中包含所有开箱即用的项目文件。

使用 jQuery 和 PHP 制作简单的数学验证码 [http://www.sinawiwebdesign.com/blog/topics/programming/jquery-and-php-and-catcha-tutorial/](http://www.sinawiwebdesign.com/blog/topics/programming/jquery-and-php-and-catcha-tutorial/)

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T11:38:11.203

如果您对此有任何帮助，请在 php 中使用 jquery 验证示例创建简单的验证码

创建验证码需要三个文件

```
capcha.php
form.php
check-capcha.php 
```

下载字体 arial.ttf 添加到字体文件夹[http://www5.miele.nl/apps/vg/nl/miele/mielea02.nsf/0e87ea0c369c2704c12568ac005c1831/07583f73269e053ac1257274003344e0?OpenDocument](http://www5.miele.nl/apps/vg/nl/miele/mielea02.nsf/0e87ea0c369c2704c12568ac005c1831/07583f73269e053ac1257274003344e0?OpenDocument)

```
<?php

session_start();

$string = '';

for ($i = 0; $i < 5; $i++) {
    // this numbers refer to numbers of the ascii table (lower case)
    $string .= chr(rand(97, 122));
}

 $_SESSION['random_code'] = $string;

 $data['code'] = $string;
$dir = 'fonts/';

if(!is_dir($dir)){
mkdir($dir);
}

$image = imagecreatetruecolor(170, 60);
$black = imagecolorallocate($image, 0, 0, 0);
$color = imagecolorallocate($image, 200, 100, 90); // red
$white = imagecolorallocate($image, 255, 255, 255);

imagefilledrectangle($image,0,0,399,99,$white);
imagettftext ($image, 30, 0, 10, 40, $color, $dir."arial.ttf", $_SESSION['random_code']);

$save= "test.png";
  imagepng($image,$save);
  ob_start();
    imagedestroy($image);
echo json_encode($data);
?>

 form.php

 <script src="https://code.jquery.com/jquery-1.12.3.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.15.0/jquery.validate.js"></script>
<script type="application/javascript">
$(document).ready(function(e) {

$('#test').validate({
rules:{
capcha:{required: true,
remote: {
                    url: "check-capcha.php",
                    type: "post",
data:{hiddencapcha:function(){return $('#hidden_capcha').val()}}
                 }
}
},
messages:{
capcha:{
remote:"invalid capcha"
}
}
});
$.ajax({
url: "capcha.php",
success: function( result ) {
var newd = JSON.parse(result);

$('input[name=hidden_capcha]').val(newd.code);

$('#capchas').attr('src',"test.png?"+ new Date().getTime());
},error: function(){ alert(result)}
});

$('#generate_capcha').click(function(){

$.ajax({
url: "capcha.php",
success: function( result ) {
var newd = JSON.parse(result);

$('input[name=hidden_capcha]').val(newd.code);

$('#capchas').attr('src',"test.png?"+ new Date().getTime());
},error: function(){ alert(result)}
});
});

});

</script>

<form name="test" id="test">

<span id="capchas_images"><img id="capchas" src="test.png" /></span> <a href="javascript:void(0)" id="generate_capcha">Refresh</a>
<input type="text" name="capcha" />
<input type="hidden" name="hidden_capcha" id="hidden_capcha" />
</form>

check-capch.php

<?php

if($_POST['capcha']==$_POST['hiddencapcha'])
{
echo "true";
}else{
echo "false";
    }
?> 
```

[http://myphpinformation.blogspot.in/2016/05/create-simple-capcha-in-php-with-jquery-validation.html](http://myphpinformation.blogspot.in/2016/05/create-simple-capcha-in-php-with-jquery-validation.html)

# php - 可以存在在 php 中加载动态类的最佳实践/方法吗？

> ID：11888469
> 
> 赞同：7
> 
> 时间：2012-08-09T17:07:29.547
> 
> 标签：php, class, load

拥有一个任何代码都可以访问的主类，一些代码可以类似，但具有加载动态类的最佳实践吗？

**候选代码：**

```
static public function __callStatic($mtd,$arg){

    // using spl_autoload_register()
    $class = '\\framework\\libs\\'.$mtd;  

    $inst = new $class($arg);

} 
```

**句法：**

```
main::dinamicu($data); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T17:58:29.460

对于这种情况，我使用控制反转容器。

我从一个门面类开始：

```
class IoC
{
  private static $container;

  public static function Initialize ( IContainer $Container )
  {
    self::$container = $Container;
  }

  public static function Resolve( $type, array $parameters = array() )
  {
    return self::$container->Resolve( $type, $parameters );
  }
} 
```

然后，我的引导程序，我用依赖注入容器初始化外观类：

```
$container = new Container();
$container->Register( 'Logger', function() { return new Logger('somefile.log'); } );
IoC::Initialize ( $container ); 
```

然后在我的代码中的某个地方，当我想获取一个对象时：

```
$log = IoC::Resolve( 'Logger' ); 
```

通过使用这种方法，我可以完全自由地实现我的依赖注入容器。我可以以任何方式更改它，而不会破坏我的应用程序中的代码。

只需创建一个新容器，我就可以在没有任何静态参数的情况下测试容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T11:18:52.573

我的两分钱：

由于您提到了“最佳实践”，假设您正在谈论类似于服务定位器模式（这是您的`main::dinamicu($data);`）的东西，当假设是测试驱动开发时，[有些人会认为](http://youtu.be/RlfLCWKxHJ0)这不是一个好的模式。最好是依赖注入容器，而不是服务定位器。

在某些方面类似于工厂类，容器将负责类的实例化。要清楚地了解并查看有关如何处理对象创建的示例，请参阅下面的示例（Symfony 服务容器）：

[http://fabien.potencier.org/article/13/introduction-to-the-symfony-service-container](http://fabien.potencier.org/article/13/introduction-to-the-symfony-service-container)

（symfony 服务容器，尽管采用了依赖注入容器，但它仍然用作控制器上的服务定位器，如您发布的代码中所示）

# maven - Maven 不应增加项目版本

> ID：11888471
> 
> 赞同：1
> 
> 时间：2012-08-09T17:07:48.377
> 
> 标签：maven

**maven**中是否有一个选项或插件可以保持项目版本相同？我查看了版本插件，但没有那个选项。

现在，它将项目的版本号从 0.0.1-SNAPSHOT ==> 0.0.2-SNAPSHOT 更新。

有没有办法保持版本相同？（原因是我想对 pom 做一些后期构建更新，但又不想更新项目版本号）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:44:31.480

通常maven不会那样做。您可能正在使用[autoincrement-versions-maven-plugin](http://code.google.com/p/autoincrement-versions-maven-plugin/)。从您的 pom.xml 中删除它，它应该停止。如果不是问题，请将您的 pom.xml 文件添加到您的帖子中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T08:57:41.670

只需告诉发布插件保持版本相同，例如

```
mvn -B -DreleaseVersion=0.0.1.7 -DdevelopmentVersion=0.0.1-SNAPSHOT 
```

和下一个版本

```
mvn -B -DreleaseVersion=0.0.1.8 -DdevelopmentVersion=0.0.1-SNAPSHOT 
```

缺点是你需要记住你发布了哪些版本。

好的一面是，这对于通过 CI 系统（例如 jenkins）进行持续部署非常有效

因此，例如，您可以设置运行的 Jenkins 夜间作业

```
mvn -B -DreleaseVersion=0.1.$BUILD_NUMBER -DdevelopmentVersion=0.1-SNAPSHOT 
```

这将使您的开发人员在发布之后运行时保持良好的 SNAPSHOT。

一些花哨的 shell 脚本可以从 pom 中提取当前版本并将 -SNAPSHOT 替换为`.$BUILD_NUMBER`，然后用该版本调用 maven 以提供一个不断前进的解决方案......但这留给读者作为练习

# javascript - 如何使用dojo在不冻结浏览器的情况下下载文件？

> ID：11888476
> 
> 赞同：0
> 
> 时间：2012-08-09T17:08:06.427
> 
> 标签：javascript, ajax, dojo

就是这样了。

我正在使用一个 spring MVC 控制器，它从服务 bean 获取字节 [] 中的文件。该服务只是从磁盘读取文件。

到目前为止没问题，我只需要将 bytes[] 写入 ResponseBody 并手动设置响应内容类型。（这里没问题，或者我错过了什么）。

我的疑问来自我的javascript代码。我正在使用dojo 1.7.2。进行快速研究似乎我可以使用 dojo.io.IFrame 来实现“异步”下载行为。

有没有另一种方法可以用 dojo 做到这一点？或者 IFrame 是要走的路？

此外，我们将不胜感激有关此主题的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-21T07:46:38.713

```
function downloadExcel(urlParm){        
    var xhr = new XMLHttpRequest();
    xhr.open('POST', urlParm);
    xhr.responseType = 'blob';
    xhr.send();   
    xhr.onreadystatechange = function(){
        if (xhr.readyState == 4){
            // $.unblockUI();
            if(xhr.status == 200) {
                var blob = new Blob([xhr.response], { type: 'application/vnd.ms-excel' });
                if (navigator.msSaveOrOpenBlob)
                    navigator.msSaveOrOpenBlob(blob, 'excelFile1.xls');
                else {
                    var link = document.createElement('a');                     
                    var URL = window.URL || window.webkitURL;
                    var downloadUrl = URL.createObjectURL(blob);
                    link.href = downloadUrl;
                    link.style = "display: none";
                    link.download = 'excelFile1.xls';
                    document.body.appendChild(link);
                    link.click();
                    setTimeout(function(){
                        document.body.removeChild(link);
                        window.URL.revokeObjectURL(downloadUrl);  
                    }, 100);
                }
            }
            else
                alert("HTTP return status: " + xhr.status);
        }            
    }
} 
```

# sql - 如何查询不包括特定时间范围的特定日期范围

> ID：11888485
> 
> 赞同：0
> 
> 时间：2012-08-09T17:08:27.427
> 
> 标签：sql, sql-server, vb.net, datetime

我有一个使用 Windows 调度程序自动运行的程序。该程序所做的是运行“昨天”结果的查询......然后过滤结果，不包括特定时间范围内的任何内容。我现在遇到的问题是我必须在查询中指定日期......我怎样才能让查询自动排除时间（早上 5:30 到早上 6:15）

```
SELECT  Store_Id, DM_Corp_Received_Date
FROM    Register_Till_Count_Tb
WHERE   (DM_Corp_Received_Date >= DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0)) 
    AND (Register_Transaction_Type = 'sod') 
    AND (DM_Corp_Received_Date < DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)) 
    AND (DM_Corp_Received_Date NOT BETWEEN CONVERT(datetime, '2012-08-08 05:30:00', 102) AND CONVERT(Datetime, '2012-08-08 06:15:00', 102)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:22:55.733

```
DECLARE @Yesterday DATETIME = DATEADD(day, DATEDIFF(day, 0, GETDATE()) - 1, 0));
DECLARE @Today DATETIME = DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0));

SELECT  Store_Id, DM_Corp_Received_Date
FROM    Register_Till_Count_Tb
WHERE   (DM_Corp_Received_Date >= @Yesterday
    AND (Register_Transaction_Type = 'sod') 
    AND (DM_Corp_Received_Date < @Today
    AND (DM_Corp_Received_Date NOT BETWEEN DATEADD(minute, 5*60+30, @Yesterday) AND   
         DATEADD(minute, 6*60+15, @Yesterday)) 
```

请注意，这`BETWEEN`是包容性的，所以要小心你的界限。

# database - 创建空间数据库时出错。错误：无法加载库“/usr/pgsql-9.1/lib/rtpostgis-2.0.so”

> ID：11888487
> 
> 赞同：1
> 
> 时间：2012-08-09T17:08:46.650
> 
> 标签：database, postgresql, geospatial, postgis, postgresql-9.1

我正在`PostgreSQL 9.1`运行`Postgis 2.0`on `Fedora 15`。

尝试安装光栅支持时，

```
psql -d database -f rtpostgis.sql -v ON_ERROR_STOP=1 
```

我收到以下错误

```
psql:rtpostgis.sql:46: ERROR:  
     could not load library "/usr/pgsql-9.1/lib/rtpostgis-2.0.so": libhdf5.so.6: 
     cannot open shared object file: No such file or directory 
```

A`locate libhdf5.so.6`给出以下路径。

```
/usr/lib64/mpich2/lib/libhdf5.so.6
/usr/lib64/mpich2/lib/libhdf5.so.6.0.4 
```

从存储库重新安装`GDAL`并没有解决问题。安装的版本`GDAL`。

```
gdal.x86_64                                1.7.3-14.fc15                @updates 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:32:30.553

检查是否`/etc/ld.so.conf`有对路径的引用`/usr/lib64/mpich2/lib`。

通过做 `ldconfig -p | grep libhdf5`.

哪个没有输出任何东西。

在检查时`/etc/ld.so.conf`有 `include ld.so.conf.d/*.conf`。

检查目录中的文件`ld.so.conf.d`。其中一个 conf文件包含`include ld.so.conf.d`.`/etc/ld.so.conf.d/atlas-x8664.conf``/usr/lib64/atlas`

所以我，

*   在目录中创建了一个名为`gdal.conf`的文件`ld.so.conf.d`。
*   将字符串添加`/usr/lib64/mpich2/lib`到文件中。
*   冉[`ldconfig`](http://linux.die.net/man/8/ldconfig)。
*   现在，`ldconfig -p | grep libhdf5`有了`llibhdf5`文件的路径。

完成上述操作后，postgis 光栅支持安装顺利进行。

# haskell - CHSC 的代码或可执行文件在哪里？

> ID：11888491
> 
> 赞同：2
> 
> 时间：2012-08-09T17:08:54.603
> 
> 标签：haskell, compiler-optimization

[我已经阅读了许多有关剑桥 Haskell 超级](https://research.microsoft.com/en-us/um/people/simonpj/papers/supercompilation/)编译器开发的论文，并想尝试一下并查看代码以进一步理解它，但除了论文之外，我似乎找不到任何关于它的信息。GHC wiki 上有[一些页面](http://hackage.haskell.org/trac/ghc/wiki/Supercompilation)，但这些页面似乎已经过时。[由于票 6070](http://hackage.haskell.org/trac/ghc/ticket/6070)，我知道工作仍在进行中。

有没有什么地方可以得到源代码，甚至是可以试用的可执行文件？如果没有，什么时候？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T23:19:31.240

假设 Simon 指的是 Max Bollingbroke，那么他的[Github](https://github.com/batterseapower/chsc)上有一个 CHSC repo 。我以前没有使用过它，但它似乎是你正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:26:17.490

[在https://github.com/ghc/ghc/tree/supercompiler](https://github.com/ghc/ghc/tree/supercompiler)似乎有一个相当定期更新的存储库。不幸的是，除了股票 GHC 之外，似乎几乎没有文档。这意味着很难弄清楚如何使用超级编译器。也就是说，我还没有尝试过，所以它可能比看起来更容易。

# regex - 推荐 - SED 中正则表达式的资源/书籍/袖珍本

> ID：11888493
> 
> 赞同：-1
> 
> 时间：2012-08-09T17:08:56.173
> 
> 标签：regex, vim, scripting, sed, awk

再会，

我通常会定期编写相当简单的 BASH 脚本。`cut`我可以通过、`echo`、`sed`和其他用于解析文本、列表等的命令行应用程序来完成我的大部分任务。

在使用 SED 和 VIM 时，我对一些简单的正则表达式有基本的了解，但我对 AWK 完全陌生，我觉得我应该提高对正则表达式的理解。

任何人都可以推荐有关此主题的任何资源吗？我的大部分谷歌搜索都没有结果，或者主要是一些现有的例子。我主要关心的是获得对正则表达式的全面掌握，然后我可以专注于 SED、VIM 和 AWK。我已经在 Google 上搜索了许多关于该主题的书籍，但它们似乎都专注于特定应用程序的来龙去脉，而很少强调正则表达式，而我在正则表达式上找到的书籍似乎没有提到 SED或 VIM，而是专注于 Perl、Python 和 Ruby。

最终目标是，我希望能够像我在[sed one-liner - Find delimiter pair around keyword](https://stackoverflow.com/questions/11587919/sed-one-liner-find-delimiter-pair-surrounding-keyword/11588345#11588345)中的上一个问题中创建的另一张慷慨的海报一样，提出单行，甚至比这更复杂。

任何材料都会有所帮助。一本书，袖珍参考书，一个有详尽教程的网站等。我个人更喜欢小书，因为我可以随身携带，并且有硬拷贝。

提前感谢大家的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:12:17.053

据我说，这是网上最好的正则表达式教程

[正则表达式教程](http://www.regular-expressions.info/tutorial.html)

对于`sed`和`awk`, 可能是这个-

[Sed 和 Awk 一个内衬](http://www.osnews.com/story/21004/Awk_and_Sed_One-Liners_Explained/)

一些可以尝试正则表达式的正则表达式引擎是 -

[正则表达式](http://regexpal.com)

[正则表达式](http://www.gskinner.com/RegExr/)

# java - 文件编写器不起作用

> ID：11888496
> 
> 赞同：4
> 
> 时间：2012-08-09T17:09:30.500
> 
> 标签：java, file

我使用 FileWriter 和 BufferWriter 写入文件。创建了文件“test.txt”，但里面没有写入任何内容。

该文件应该写在我的按钮的 ActionEvent 中。这就是原因吗？

那是我的代码：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;  
import java.util.UUID;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JTextField;

class Cadre_fenetreA2 extends JFrame            
{
    JLabel phrase = new JLabel("Veuillez indiquer le nom de chaque groupe de generalisation pour chaque Niveau");
    JButton boutonOK = new JButton ("OK");
    public Cadre_fenetreA2 (String nom,int X, int Y, int lo, int la, int Na, int [] nbGrpGen,int maxnbGrpGen, File file)        
    {
        super(nom);                     
        setBounds(X,Y,lo,la);       
        setVisible(true);                   

        JTextField[][] allField = new JTextField [Na][maxnbGrpGen];
        JLabel phrases[] = new JLabel [Na];
        String[][] nomGrpGen = new String [Na][maxnbGrpGen];

        setLayout(null);
        for(int i = 0;i < Na;i++)
        {
            for(int j = 0;j<nbGrpGen[i];j++)
            {
                String uuid = UUID.randomUUID().toString();

                 allField[i][j] = new JTextField(uuid.substring(0,8));
                 allField[i][j].setBounds(150+j * 60, 75 + i * 25, 50, 20);
                 add(allField[i][j]);
            }

           phrases[i] = new JLabel("Niveau "+String.valueOf(i+1));
           phrases[i].setBounds(5, 75 + i * 25, 200, 20);

           add( phrases[i]);
        }
        phrase.setBounds(0,0,1000,50);
        add(phrase);
        boutonOK.setBounds(250+maxnbGrpGen*50,25*(Na),60,60);
        add(boutonOK);
        boutonOK.addActionListener(new ecout(Na,nbGrpGen,allField,nomGrpGen, file));
    }

    class ecout implements ActionListener 
    {   
        private int Na;
        private String [][] nomGrpGen ;
        private JTextField[][] allField;
        boolean correct=true;
        private int[] nbGrpGen;
        String chaine;
        File file;

        public ecout(int Na,int[] nbGrpGen, JTextField[][] allField, String[][] nomGrpGen, File file)
        {
            this.file = file;
            this.Na = Na;
            this.nbGrpGen =nbGrpGen;
            this.allField =allField;
            this.nomGrpGen =nomGrpGen;
        }

        public void actionPerformed(ActionEvent evt)
        {
            for(int i = 0;i < Na ;i++)
            {
                for(int j = 0;j < nbGrpGen[i] ;j++)
                {
                nomGrpGen[i][j] = allField[i][j].getText();
                    //chaine=allField[i][j].getText();
                    //nomGrpGen[i][j] ="A";
                  if(nomGrpGen[i][j]=="")
                  {
                      correct=false;
                  }
                }
            } 
            if(correct)
            {
                int i=0;
                int j=0;
                int nbElement;
                JOptionPane jop = new JOptionPane();
                String res;
                do
                {
                    res= jop.showInputDialog(null, "Veuillez indiquer le nombre d'attribut present au depart", "nombre d'attribut",JOptionPane.QUESTION_MESSAGE);
                }
                while(! isInteger(res));
                nbElement =Integer.parseInt(res); 

                int largeur=150+nbElement*30+80;
                int hauteur=30*(nbGrpGen[i])+100;
                if(largeur<600)
                {
                    largeur=600;
                }

                try 
                {
                    FileWriter fw = new FileWriter("test.txt");
                            BufferedWriter out = new BufferedWriter(fw);
                            out.write("aString");
                } 
                catch (IOException e) 
                {
                    e.printStackTrace();
                }
                dispose();
                i=0;
                j=0;
                new Cadre_fenetreA3 ("initialisation du groupe"+nomGrpGen[i][j],5,5,largeur, hauteur, nbGrpGen[i], nbElement,nomGrpGen[i], i+1); 
            }
        }
    }
    public boolean isInteger( String input )  
    {  
       try  
       {  
          Integer.parseInt( input );  
          return true;  
       }  
       catch( Exception e)  
       {  
          return false;  
       }  
    }  

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T17:14:25.837

这里，

```
try 
{
    FileWriter fw = new FileWriter("test.txt");
            BufferedWriter out = new BufferedWriter(fw);
            out.write("aString");
} 
catch (IOException e) 
{
    e.printStackTrace();
} 
```

您将它包装在`BufferedWriter`一个默认缓冲区大小为 8KB 的文件中。所以只要你不写超过 8KB 并且不刷新/关闭它，那么它就不会出现在目标文件中。

完成后，您需要关闭编写器。这将刷新所有缓冲区并释放文件上的所有锁。正常的习惯用法是在与创建它`finally`的位置相同的`try`块中关闭它。这样您就可以保证在出现异常时也将其关闭，从而防止资源泄漏和永远锁定的文件。

```
Writer writer = null;

try {
    writer = new BufferedWriter(new FileWriter("test.txt"));
    writer.write("aString");
} catch (IOException e) {
    e.printStackTrace();
} finally {
    if (writer != null) try { writer.close(); } catch (IOException ignore) {}
} 
```

或者，如果您已经使用 Java 7，那么您也可以使用新的[try-with-resources 语句](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。当您离开`try`块时，它会自动关闭资源，从而减少样板代码。

```
try (Writer writer = new BufferedWriter(new FileWriter("test.txt"))) {
    writer.write("aString");
} catch (IOException e) {
    e.printStackTrace();
} 
```

顺便说一句，我也会处理异常处理。而是向最终用户显示一些合理的错误消息，而不是将其简单地打印到标准输出并进一步忽略它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T17:14:15.413

关闭或刷新 writer：

```
FileWriter fw = new FileWriter("test.txt");
BufferedWriter out = new BufferedWriter(fw);
out.write("aString");
out.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T17:14:57.093

你必须冲洗你的作家。

```
out.flush();
out.close(); 
```

在完成所有写入后放置这两行以关闭文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T17:25:16.213

**按照这些序列成功写入文件....**

```
File f = new File("d:\\test.txt");

FileWriter fw = new FileWriter(f);

BufferedWriter bw = new BufferedWriter(fw);

bw.write("Hello........");        // Writing to the file

bw.close();                       // Close the BufferedWriter

fw.close();                       // Close the FileWriter 
```

**关闭流很重要....**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T18:04:46.567

```
 import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;

public class TestAndDelete {

    public static void main(String[] args) throws IOException {

        String test="hi how are you";
        File file =new File("D:/abcd/ravi.json");
        FileWriter fw=new FileWriter(file.getAbsoluteFile());
        BufferedWriter bw=new BufferedWriter(fw);
        bw.append(test);
        bw.close();
        }
} 
```

# jquery - 对象不淡出

> ID：11888497
> 
> 赞同：1
> 
> 时间：2012-08-09T17:09:31.100
> 
> 标签：jquery

我正在重新使用以下 JavaScript 使对象在单击时淡出，但该对象不会产生淡出动画。任何人都可以帮助我吗？

```
<script type="text/javascript">
    $(document).ready(function() {

        $curtainopen = false;

        $(".sticker").click(function(){
            $(this).blur();
            if ($curtainopen == false){ 
                $(this).stop().fadeOut(1600, "linear", complete); 
                $(".leftcurtain").stop().animate({top:'-2000px'}, 6000 );
                $(".rightcurtain").stop().animate({bottom:'-2000px'},6000 );
                $curtainopen = true;
            }else{
                $(this).stop().animate({top: '-40px' }, {queue:false, duration:350, easing:'easeOutBounce'}); 
                $(".leftcurtain").stop().animate({width:'50%'}, 2000 );
                $(".rightcurtain").stop().animate({width:'51%'}, 2000 );
                $curtainopen = false;
            }
            return false;
        });

    }); 
</script> 
```

这是原始的javascript：

```
<script type="text/javascript">
    $(document).ready(function() {

        $curtainopen = false;

        $(".sticker").click(function(){
            $(this).blur();
            if ($curtainopen == false){ 
                $(this).stop().animate({top: '-300px' }, {queue:false, duration:1000, easing:'easeOutBounce'}); 
                $(".leftcurtain").stop().animate({top:'-2000px'}, 6000 );
                $(".rightcurtain").stop().animate({bottom:'-2000px'},6000 );
                $curtainopen = true;
            }else{
                $(this).stop().animate({top: '-40px' }, {queue:false, duration:350, easing:'easeOutBounce'}); 
                $(".leftcurtain").stop().animate({width:'50%'}, 2000 );
                $(".rightcurtain").stop().animate({width:'51%'}, 2000 );
                $curtainopen = false;
            }
            return false;
        });

    }); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:23:54.840

您需要做的就是：

```
$(this).fadeOut(); 
```

代替

```
$(this).stop().fadeOut(1600, "linear", complete); 
```

# c++ - 在 Doxygen 中将文本映射到 HTML 实体

> ID：11888502
> 
> 赞同：2
> 
> 时间：2012-08-09T17:09:50.187
> 
> 标签：c++, documentation, comments, doxygen

在 Doxygen 中，要在 HTML 输出中获取版权符号，文档必须使用`&copy;`，如：

```
/// @copyright Copyright &copy; 2012 
```

在这种情况下，我更喜欢这样输入：

```
/// @copyright Copyright (c) 2012 
```

在后一个示例中，它看起来更好一些，并且可能会更好地转换为纯文本和 RTF 输出。是否可以在 Doxygen 中创建文本到实体的映射？例如，`(c)`将映射到`&copy;`，并且 doxygen 将简单地将所有`(c)`出现的地方替换为`&copy;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:06:30.813

一般来说，我认为输入过滤器可以更好地处理此类替换。这是一个简单的过滤器，它将替换 a`(c)`后跟一些数字`&copy;`，然后是相同的数字：

```
#!/bin/perl
open(F,"<$ARGV[0]") || die("Failed to open file $ARGV[0]: $!");
while (<F>)
{
  s/\([cC]\)(\s*\d+)/&copy;\1/g;
  print $_;
}
close(F); 
```

要使用此过滤器，请在配置文件中添加以下内容：

```
INPUT_FILTER = "perl filter.pl" 
```

**注 1**过滤器将处理整个文件。允许仅应用于评论的过滤器可能是一个有用的功能。

**注 2**如果您使用支持 UTF-8 的编辑器和相应的编码 (INPUT_ENCODING)，您也可以直接插入版权字符（代码 C2 A9 hex）

# json - 需要将 POST 重定向到另一个域的 API 调用

> ID：11888506
> 
> 赞同：4
> 
> 时间：2012-08-09T17:09:58.290
> 
> 标签：json, api, http, magento, post

因此，我将在以下位置收到 API 调用：

```
POST http://olddomain.com/api/call
    Post contents in Raw Body 
```

我需要将其重定向到

```
POST http:://newdomain.com/api/call 
```

具有相同的原始正文内容。似乎没有办法重定向 POST 服务器端，唯一的方法是生成一个 HTML 表单并通过 JS 提交该表单。因此，鉴于此，我什至不确定我们的 API 客户端是否有可能期望 JSON 返回给他们以呈现并提交该 HTML/JS 以重定向 POST。

所以现在我在想我可能需要将 POST 原始正文内容转换为查询字符串变量——调用中的数据量可能足够低，我们可以摆脱它——然后可能更新 API 调用处理程序在这种情况下接受 GET 参数。

这一切似乎都不干净。请告诉我有更好的方法。

更新：实现需要`curl`兼容性，因为 API 客户端使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:21:57.990

要从 PHP 重定向常规页面，您可以运行如下代码：

```
header("Location: http://newdomain.com/api/call");
exit; 
```

但我不确定大多数客户端是否会自动传递相同的 POST 数据（根据上面的 Jay 所说，这*不会*携带 POST 数据）。无论如何，这是假设客户端本地处理 HTTP 重定向，如果客户端在其他人的机器上运行，出于安​​全原因，您不能依赖它。例如，PHP 的`open_basedir`设置将不允许`curl`遵循 HTTP 重定向。

因此，您不能指望客户端*为*您执行重定向。你将不得不成为一个中间人，在内部对 newdomain.com 进行新的调用，然后将响应传回给客户端。这可能不是一个理想的解决方案，但是当您托管 API 时，您必须小心您假设客户端可以或将要做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:21:56.517

我知道有两种方法可以做到这一点。您可以 (a) 从 .htaccess 重定向 HTTP 标头（来自 PHP 代码的标头重定向不会携带 POST），或者您可以使用一些简单的 curl 代码重新移植到 PHP 代码中的新页面。

这两种方法都在本文中得到了很好的总结： [重定向 HTTP POST](https://stackoverflow.com/questions/4939195/redirecting-an-http-post)

希望有帮助！

# css - CSS线性渐变X到Y然后Y回到X

> ID：11888515
> 
> 赞同：1
> 
> 时间：2012-08-09T17:10:40.920
> 
> 标签：css, gradient, linear-gradients

我使用以下 CSS 代码为线性渐变创建了一个线性渐变：

```
background-color: #2c2c2c;
background-image: -moz-linear-gradient(top, #444444, #222222);
background-image: -ms-linear-gradient(top, #444444, #222222);
background-image: -webkit-gradient(linear, 0 0, 0 0, from(#444444), to(#222222));
background-image: -webkit-linear-gradient(top, #444444, #222222);
background-image: -o-linear-gradient(top, #444444, #222222);
background-image: linear-gradient(top, #444444, #222222);
background-repeat: repeat-x;
filter: progid:dximagetransform.microsoft.gradient(startColorstr='#444444', endColorstr='#222222', GradientType=0); 
```

![在此处输入图像描述](../Images/6d8f43512e8b7d91d7c852a5944318df.png)

我想知道如何获得相同的渐变，从 #444444 到 #222222，向上直到白色箭头，停止，然后从 #222222 开始以与上面相同的方式返回到 #444444 的底部边缘.

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:16:15.780

```
background: #000000; /* Old browsers */
background: -moz-linear-gradient(top, #000000 0%, #ff3033 50%, #000000 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#000000), color-stop(50%,#ff3033), color-stop(100%,#000000)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #000000 0%,#ff3033 50%,#000000 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #000000 0%,#ff3033 50%,#000000 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #000000 0%,#ff3033 50%,#000000 100%); /* IE10+ */
background: linear-gradient(to bottom, #000000 0%,#ff3033 50%,#000000 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#000000', endColorstr='#000000',GradientType=0 ); /* IE6-9 */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:16:10.140

你应该能够做这样的事情：

```
background: #444444; /* Old browsers */
background: -moz-linear-gradient(top,  #444444 0%, #222222 50%, #444444 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#444444), color- stop(50%,#222222), color-stop(100%,#444444)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #444444 0%,#222222 50%,#444444 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #444444 0%,#222222 50%,#444444 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #444444 0%,#222222 50%,#444444 100%); /* IE10+ */
background: linear-gradient(to bottom,  #444444 0%,#222222 50%,#444444 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#444444', endColorstr='#444444',GradientType=0 ); /* IE6-9 */ 
```

[在这里](http://www.colorzilla.com/gradient-editor/)可以找到一个很棒的学习工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:17:37.593

您需要指定颜色停止看到 50% 部分的位置。

```
background: #444444; /* Old browsers */
background: -moz-linear-gradient(top, #444444 0%, #222222 50%, #444444 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#444444), color-stop(50%,#222222), color-stop(100%,#444444)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #444444 0%,#222222 50%,#444444 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #444444 0%,#222222 50%,#444444 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #444444 0%,#222222 50%,#444444 100%); /* IE10+ */
background: linear-gradient(to bottom, #444444 0%,#222222 50%,#444444 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#444444', endColorstr='#444444',GradientType=0 ); /* IE6-9 */ 
```

查看[Ultimate CSS Gradient Generator](http://www.colorzilla.com/gradient-editor/)了解更多信息。

# symfony - 什么是 symfony 桥接器、捆绑包和供应商？

> ID：11888522
> 
> 赞同：16
> 
> 时间：2012-08-09T17:11:03.530
> 
> 标签：symfony

Symfony 的捆绑包、供应商和网桥是什么意思？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-08-17T08:31:04.590

### 小贩

通常，`vendor`是您的项目的依赖项（也称为第三方库）。这在 Symfony2 中是相同的含义。

### 捆

从[有关 bundles 的文档中](http://symfony.com/doc/master/cookbook/bundles/index.html)：

> 捆绑包是一个具有良好定义结构的目录，可以托管从类到控制器和 Web 资源的任何内容。

换句话说，它是你的应用程序的一部分，它拥有一个逻辑（控制器、视图、模型）。Bundles 也可以包装一个库。例如，[BazingaGeocoderBundle](https://github.com/willdurand/BazingaGeocoderBundle)包装了[Geocoder](https://github.com/willdurand/Geocoder)库。它提供了面向 Symfony2 的特性，以简化 Symfony2 项目中库的使用。此外，它可以是组件之间的粘合剂。

### 桥

桥接器是一组旨在将库扩展到 Symfony2 的类。桥梁是核心的一部分。您可以为可能位于核心中的第三个库（Twig、Doctrine、Propel、Monolog 等）找到一座桥梁。如果您不想将 Doctrine 用作 ORM，那么您不必关心`EntityType`. 这就是为什么这门课在桥上。

总而言之，桥扩展了一些组件，捆绑包为应用程序添加了功能。

# javascript - javascript stopPropagation() 阻止函数触发

> ID：11888523
> 
> 赞同：1
> 
> 时间：2012-08-09T17:11:09.210
> 
> 标签：javascript, jquery, stoppropagation

我有一个带有 class 的子 div，`body_left_details`它位于带有 class 的父 div 中`body_left_bar`。两个 div 都附加了一个 onclick 事件，但我想防止`body_left_bar`当您单击`body_left_details`. 以下是相关代码：

```
$(function() {
    $('.body_left_bar').click(function() {
        body_right_load('parent');
    })
    $('.body_left_details').click(function(e) {
        e.stopPropagation();
        body_right_load('child');
    })
})
function body_right_load(str) {
    alert(str);
}​ 
```

很简单。但是为什么当我点击时`body_left_details`，没有调用 body_right_load('child') 呢？我在 e.stopPropagation() 之后直接使用 alert() 进行了测试，效果很好。stopPropagation 后是否不允许使用外部函数？这会被认为是冒泡吗？

在 Chrome 中在 Windows 7 wamp 上进行测试。任何见解表示赞赏！

编辑：[相关的 jsfiddle](http://jsfiddle.net/teGPX/2/)。单击父 div 将导致警报，但单击“阅读它”不会产生任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:31:54.537

```
$(function() {
    $('.body_left_bar').on('click', function() {
        body_right_load('parent');
    })
    $('.body_left_details').on('click', function(e) {
        e.stopImmediatePropagation();
        body_right_load('child');
    })
})
function body_right_load(str) {
    alert(str);
}​ 
```

# php - 查找与一组数字特定匹配的行数

> ID：11888524
> 
> 赞同：0
> 
> 时间：2012-08-09T17:11:09.773
> 
> 标签：php

我有一个棘手的问题，我自己找不到答案。我正在使用带有 MySQL v5.0.92-50-log 和 PHP v5.2.17 的 Web 主机。

我有一个表，在每一行中，单独的列中有 6 个数字，还有更多的列 - 名称等。

我知道如何做两件事：

1.如何遍历所有行并检查与特定数字集的匹配情况，如下所示：

```
$query = "SELECT * FROM tablename";
$result = mysql_query($query) or die();
$matchValues = array(1,2,3);
while($row = mysql_fetch_array($result)){
$counter = 0;
foreach($matchValues as $value)
{
    if(in_array($value, $row))
    {
        $counter++;
    }
} 
```

然后我可以输出“名称”字段和它的“计数器”结果（1 个匹配，2 个匹配或 3 个）。

2.我知道如何找到如下的行数：

`$result = mysql_query("SELECT * FROM $tablename WHERE status='Approved'"); $num_rows = mysql_num_rows($result);`

诀窍是如何将它们结合起来。我需要按照 1 进行搜索，然后输出名称字段和匹配数，我需要知道有多少行有 1 匹配，有多少行有 2，有多少行有 3。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:13:51.567

为了结合这两个任务，只需使用`SELECT * FROM $tablename`然后调用一个计数器`$approved_cntr`，它会在您查看结果时累积，检查 if `$row['status'] == 'Approved'`。这将为您提供已批准状态行数的等效值。

`mysqli`此外，查看或`mysql_PDO`库符合您的最大利益，因为`mysql_*`您似乎正在使用的功能已被弃用。

**MySQL (PDO) 参考**： http: [//php.net/manual/en/ref.pdo-mysql.php](http://php.net/manual/en/ref.pdo-mysql.php)

**mysqli 参考**： http: [//php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)

# python - 如何使用 Python 将文件导出到不同的目录？

> ID：11888525
> 
> 赞同：1
> 
> 时间：2012-08-09T17:11:10.383
> 
> 标签：python, path, export

在保存 Python 生成的文件时，我试图让自己免于执行旧的复制和过去的技巧。默认保存到 Python 目录，但我希望它是：C:\Program Files\Vixen\Vixen 2.1.1.0\Routines

我试过这个：

```
import os
filename = raw_input('What would you like to name the file? ')
filepath = os.path.join("C:\Program Files\Vixen\Vixen 2.1.1.0\Routines",filename)
with open(filename, 'wb') as out:
    for frame in frames:
        out.write(' '.join(str(num) for num in frame))
        out.write(' ')
        out.write('\n') 
```

我得到的错误是：

```
Traceback (most recent call last):
  File "(stdin)", line 1 in (module)
  File "comet.py", line 169, in (module)
    filepath= os.path.join("C:\Program Files\Vixen\Vixen 2.1.1.0\Routines",filename)
NameError: name 'os' is not defined 
```

如何让 Python 将文件直接保存到所需的路径中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:12:57.147

您忘记加载 os 库。您可以`import os`在代码之前执行此操作。

编辑：另一个问题是您正在定义路径变量，但除了分配之外没有在任何地方使用它。
尝试更改以下内容：

`with open(filename, 'wb') as out:`到`with open(filepath, 'wb') as out:`

# c++ - 在 XCode 中创建要在 Obj-C 中使用的 C++ 库

> ID：11888526
> 
> 赞同：2
> 
> 时间：2012-08-09T17:11:13.600
> 
> 标签：c++, wrapper, objective-c++

我正在尝试在 XCode 中用 C++ 创建一个库，并尝试在 iPhone 项目中使用它。我正在使用 XCode 4.3.2。由于 iOS 开发中没有现成的模板可用于创建 C++ 库，因此我使用 Mac OSX - Framework & Library -> C/C++ Library 选项。

在这个项目中，我有 .h 和 .cpp 文件。我有意将我的 C++ 代码保存在 .cpp 文件中，因为它以后可能会在 Android 或 Windows 8 上使用。为了让它链接到示例 iPhone 项目，我已修改项目的目标以指向最新的 SDK iOS 5.1 ，并使用架构 armv6 和 armv7。

以下是我的 .h 文件

```
#ifndef Test_Test_h
#define Test_Test_h
class Test {   --> I get the error here saying unknown type 'class'; did you mean 'Class'?

public:
Test();
~Test();
int addTwoNums(int a, int b);
};

#endif 
```

以下是我的 C++ 库中的 .cpp 文件

```
#include <iostream>
#include "Test.h"
Test::Test(){}
Test::~Test(){}
int Test::addTwoNums(int a, int b)
{
return (a + b);
} 
```

现在，为了在我的 iPhone 项目中启用函数调用，我创建了一个将 C++ 对象嵌入到 .mm 类中的包装层，由本文提供： [http ://www.philjordan.eu/article/mixing-objective-c- c++-and-objective-c++](http://www.philjordan.eu/article/mixing-objective-c-c++-and-objective-c++)

以下是我的包装头文件的实现，它是我单独的 iPhone 项目的一部分

```
#import <Foundation/Foundation.h>
@interface TestWrapper : NSObject
-(id)init;
-(int)returnSumFromCpluspus:(int) a b:(int) b;
@end 
```

以下是我的单独 iPhone 的包装器 .mm 文件部分的实现

```
#import "TestWrapper.h"
#import "Test.h"
@implementation testWrapper
{
Test *tst;
}

-(id) init
{
self = [super init];
    if (self) {
    tst = new tst();
    if(!tst)
        self = nil;
}
return self;
}

-(int)returnSumFromCpluspus:(int) a b:(int)b
{
int result = 0;
if(tst)
    result = tst->addTwoNums(a,b);
return result;
}

- (void)dealloc
{   
 if(tst)
 delete tst;
}
@end 
```

现在在我的 iPhone 项目中，我已经将它与这个静态库链接起来。只有当我在我的 iPhone 项目的目标中选择“编译源为：Objective-C++”而不是我的 C++ 静态库项目时，我才能很好地编译和调试。如果我将编译源更改为：根据文件类型”，我会收到编译错误：

未知类型名称“类”；您的意思是“类”吗？预期 ';" 在顶级装饰器之后。

我的问题是必须将我的 iPhone 项目属性目标编译类型更改为 Objective-C++，而不是我的静态库 C++ 项目，或者是否有其他方式，我可能会丢失并且不知道？

在这方面的任何帮助将不胜感激！

谢谢，阿希什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T17:21:37.697

如果您编辑您的问题以包含一些编译器不喜欢的实际源代码，这将有助于我们理解您的问题。

也就是说，我认为您正在尝试`#include`（或`#import`）在`.h`文件中包含 C++ 类定义的`.m`文件。

文件`.m`（默认情况下）是 Objective-C 文件，而不是 Objective-C++ 文件，因此编译器将拒绝`.m`文件中的 C++ 构造。如果`.m`文件包含/导入`.h`文件，则该`.h`文件还必须仅包含 Objective-C 代码 - 而不是 C++ 或 Objective-C++ 代码。

您说您已经使用 Objective-C++ 编写了一个包装层。因此，您可能有一个名为的文件`Wrapper.h`，它声明了`@interface`您的包装类的，并且您有一个`Wrapper.mm`包含包装类的`@implementation`（在 Objective-C++ 中）。

您需要确保其中不`Wrapper.h`包含**C++ 代码**。它只能包含 Objective-C，因为您将`Wrapper.h`在`.m`文件中包含/导入。

如果您`Wrapper.h`从 C++ 库中包含/导入头文件，则需要将其取出。您只能将 C++ 库头文件直接包含在您的`.mm`文件中，或者包含在`.h`您**仅从**文件中包含的其他文件中`.mm`。

# c - 如何在 Codeblock 10.05 中使用命令行参数？

> ID：11888528
> 
> 赞同：28
> 
> 时间：2012-08-09T17:11:35.670
> 
> 标签：c, environment

我正在代码块版本 10.05 中编写 C 代码。

该程序是：

```
int main(int argc , char *argv[])
{
    printf("Entered number is %s \n", argv[1]);
    return 0;
} 
```

但是，当我编译当前文件，然后运行程序时，会出现一个终端。但是，终端不等待命令行输入而是直接输出

```
<null> 
```

请注意，在上面的程序中，我省略了处理零个命令行参数的代码。我如何提供命令行参数？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-09T17:19:15.220

使用 code::blocks 您可以在菜单中设置命令行参数，如下所示：

`Project > Set programs' arguments...`

这将打开一个窗口，您可以在其中插入参数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-06T19:55:53.690

如果需要，您需要在代码之前创建一个项目，您可以单击 Project -> Set Program Arguments。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-21T19:03:23.277

代码块的项目 - 设置程序的参数（然后在弹出对话框的下部文本框中键入参数）应该在程序启动时提供您键入的内容。（CodeBlocks 也可以在 Ubuntu 和 Windows 上运行，顺便说一句。）为了确保您的代码正在处理参数，您可以在 Win 下开始 - CMD.EXE，导航（例如： cd \homework\projectname ）到您的项目目录，然后 cd bin\调试。做一个DIR，你会看到一个EXE文件。那是你的程序运行的部分。在按 ENTER 之前键入它的名称、空格和一些参数。查看您的代码是否正在处理 args OK。（确保 main 看起来像： int main(int argc, char *argv[]) 然后在 main() 中有一个语句： cout << argv[1] << endl ；应该打印您在名称之后键入的第一个单词的EXE文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:13:05.010

中的命令行参数`argv`是程序*执行*时在命令行上传递给程序的参数。为了在程序执行*期间*接受用户输入，您需要使用更多代码，例如`scanf`或`fgets`.

如果您从 IDE 运行程序，应该有一些方法，例如项目属性，在您运行程序时将参数传递给程序。对于 CodeBlocks，检查项目菜单：*Project->Set Program Arguments*。

如果您可以在终端中运行程序，您可以自己传递参数，例如：

```
$ myProgram argument1 
```

然后在您的代码中，`argv[1]`将包含字符串：`"argument1"`。

# regex - 正则表达式延迟匹配+分组

> ID：11888535
> 
> 赞同：0
> 
> 时间：2012-08-09T17:12:04.583
> 
> 标签：regex

我在使用正则表达式延迟匹配时遇到问题。没有例子很难解释：

我的正则表达式：`A\d*?(88)?\d*?B`

* * *

示例 1：`A12388456B`

我想要的：匹配字符串，第 1 组匹配“88”

会发生什么：匹配字符串，但组 1 不匹配。

* * *

示例 2：`A123B`

我想要的：匹配字符串，组 1 不匹配。

会发生什么：工作正常

* * *

基本上我希望第 1 组匹配出现的“88”，但我也想匹配任何模式`A\d+B`。

这似乎应该很简单，但我遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:24:28.830

在 Javascript 中尝试这个正则表达式：

```
 'A12388456B'.match(/A(?:\d*?(88))?\d*?B/);
 > ["A12388456B", "88"]  // Matches string and 88.

 'A123B'.match(/A(?:\d*?(88))?\d*?B/);
 > ["A123B", undefined]  // Matches string but nothing else. 
```

在第一个示例中，组 1 捕获 88。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:19:14.370

您要匹配的第一个组未标记为组。

你会想要：

~~(A\d*)?(88)?\d*?B~~

然后你有两个子组和主匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:21:14.693

使用正则表达式，如果找到匹配`A(?=\d*(88))\d*B`，组 1 将包含。`88`

# ruby-on-rails - 是独角兽还是硒问题？

> ID：11888537
> 
> 赞同：0
> 
> 时间：2012-08-09T17:12:06.790
> 
> 标签：ruby-on-rails, ruby, unix, selenium, unicorn

Unicorn HTTP 服务器的一个实例在我的服务器上运行。它在此目录中加载一些文件：

```
~/apps/myapp/current/ 
```

此路径是此路径中最后一个版本的符号链接：

```
~/apps/myapp/releases/234234532/ 
```

这是 Capistrano 在部署时配置的。为了确保 Unicorn 能够很好地重新启动，即使我的 deploy.rb 包含最后调用的 deploy:restart 任务，我也会手动执行它，因为我读到 Capistrano 对 Unicorn 会有一些问题。

我的应用程序即将通过 Selenium WebDriver 启动一个 Selenium 实例。然而，这就是我的问题，Selenium 似乎指向一个旧版本。

可以肯定的是，我选择删除我的进程的关键文件，以查看我的应用程序是否仍然可以正常启动，这是我所期望的真正好的发布。希望我的应用程序没有启动并且出现了一些逻辑错误。

所以现在我确定我指向了好的版本，我不理解 Selenium 的行为。我在解释：

日志中出现的错误是：

```
invalid page structure: Unable to locate element: {"method":"id","selector":"sectionSearch"}
Command duration or timeout: 1.02 seconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.21.0', revision: '16552', time: '2012-04-11 19:08:38'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '3.2.13-grsec-xxxx-grs-ipv6-64', java.version: '1.7.0_147-icedtea'
Driver info: driver.version: EventFiringWebDriver (org.openqa.selenium.NoSuchElementException) 
```

总而言之，Selenium 抱怨 id 元素：`sectionSearch`在相关的 HTML 页面中缺失。

因此，正如这篇文章所建议的那样： http: [//seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)，我在通知特定的 html 元素不存在之前增加了超时时间：

```
wait {driver.find_element(:id, 'sectionSearch')} 
```

有关信息，wait 是一种自定义方法：

```
def wait(timeout = 50, &block)
    Selenium::WebDriver::Wait.new(timeout: timeout).until(&block)
end 
```

在本地计算机（开发环境）中，这可能是因为我使用了另一个 SeleniumDriver：FirefoxDriver

```
def driver
    @driver ||= begin
      if Rails.env.production?
        driver = Selenium::WebDriver.for :remote, url: 'http://localhost:4444/wd/hub'
      else
        driver = Selenium::WebDriver.for :firefox
      end
      driver.manage.timeouts.implicit_wait = 20
      driver
    end
  end 
```

但即使杀死并重新启动独角兽，我的服务器仍然存在同样的问题：

```
invalid page structure: Unable to locate element: {"method":"id","selector":"sectionSearch"}
    Command duration or timeout: 1.02 seconds 
```

因此，我的最后一个操作是在服务器的应用程序当前文件夹中手动更改以下行：

```
wait {driver.find_element(:id, 'sectionSearch')} 
```

经过

```
wait {driver.find_element(:id, 'sectionSearchhhhhhhh')} 
```

现在我的期望是看到 Selenium 抱怨这个缺失的元素，所以这个错误是合乎逻辑的。为什么要这样做？因为我想确保 Selenium 采用更新的源文件。

似乎情况并非如此，因为......出现了与前一个相同的错误。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:06:48.167

这是一个 selenium 错误，无论是因为您的 webdriver 在到达元素之前超时，还是因为您指定了错误的选择器（即 --> 您收到错误元素未找到），您都会得到它。如果我是你，我会使用 xpath 作为选择器，因为它似乎是最可靠的定位器。让我们以谷歌的搜索框作为一个元素为例。您有以下用于该框的 html 代码：

`<input type="text" name="q" value="" id="searchText" maxlength="256"/>`

使用上面的 html 代码形成 selenium 元素定位器的方式将如下所示..：

`driver.find_element(:xpath, "//input[@name='q']")`

但是，正如我在您上面的描述中注意到的那样，这还不够；您已尝试设置隐式等待。实现您想要的效果的更好方法是这个..

`!30.times { if (driver.find_element(:xpath, "//input[@name='q']") rescue false) then break else sleep 1; end }`

上面的代码将尝试 30 次，每次尝试到达所需元素之前等待 1 秒（如果失败，您可以使用 begin/rescue 子句捕获错误，如下所示：

```
begin
   .    
   .
 [your code]
   .
   .
!30.times { if (driver.find_element(:xpath, "//input[@name='q']") rescue false) then break else sleep 1; end }    
   .
   .
driver.find_element(:xpath, "//input[@name='q']") #so you cause an error that u can capture
   .
   .
rescue    
puts "A time-out error occurred or you have used an invalid element locator"
   .
   .
end 
```

希望有帮助！

# svn - 添加外部非svn资源到svn

> ID：11888540
> 
> 赞同：0
> 
> 时间：2012-08-09T17:12:15.010
> 
> 标签：svn, svn-externals

我有一个需要大量数据才能正常运行的项目。代码在 svn 上，但这些数据不在。现在我已经写入 REAME：

```
you need to download the data from http://... into share
for example:
  wget http://... share/... 
```

我想用svn自动化它。我希望当用户执行`svn co svn+ssh://...`该 svn 时自动下载数据文件。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:24:29.307

Subversion 无法在简单结帐时自动下载其他文件。

我通常建议将您的*要求*视为构建问题。在开发中，您通常会运行某种构建脚本以使用您的程序。为什么不把这部分作为*构建*的一部分？

你没说什么项目吧。然而，即使是不需要编译的项目（一堆 Python 脚本、PHP 代码、JaveScript 也可以经历一个构建阶段，这可以帮助您准备结帐以进行测试。您目前有某种构建过程吗？

# vb.net - vb.net datagrid 查看多个数据源

> ID：11888544
> 
> 赞同：0
> 
> 时间：2012-08-09T17:12:24.583
> 
> 标签：vb.net, data-binding

我有 4 个要绑定到 datagridview 的数据源，所以它会像

```
 datasource Me.DataGridView1.DataSource = Me.bindingSource1 'rows 0 to 500
 datasource Me.DataGridView1.DataSource = Me.bindingSource2 'rows 501 to 1000 
 datasource Me.DataGridView1.DataSource = Me.bindingSource3 'rows 1001 to 1500
 datasource Me.DataGridView1.DataSource = Me.bindingSource4 'rows 1501 to 2000 
```

怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:16:43.763

你不能。一个 DataGridView 一次只能有一个 DataSource。

我知道这与您之前尝试使用多个线程来更新网格的问题有关，但是如果您对使用多个线程写入网格一无所知，那么您将不得不锁定数据源才能进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:24:08.643

如果你必须结合这些，那么你应该使用数据表的[Merge](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)功能。

```
Dim aggregateTable as New DataTable("AggTbl")
aggregateTable.Merge(Me.bindingSource1)
aggregateTable.Merge(Me.bindingSource2)
aggregateTable.Merge(Me.bindingSource3)
aggregateTable.Merge(Me.bindingSource4)

Me.DataGridView1.DataSource = aggregateTable 
```

# javascript - 编写 jQuery 插件以进行外部 Ajax 调用时，这是一个坏主意吗？

> ID：11888548
> 
> 赞同：-2
> 
> 时间：2012-08-09T17:12:50.153
> 
> 标签：javascript, jquery, ajax, uri

所以我正在编写一个 jQuery 插件，它可以与 IE 和其他浏览器不同地工作。它将`data:`用于文件下载，IE 7 及以下版本不支持（我认为？）。因此，对于那些浏览器上的文件下载，我会使用 PHP 并发送标头。很明显，问题是我必须从外部站点加载 Ajax 请求，很可能是我自己的站点。这是不好的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:21:20.053

这不仅是不好的做法，而且是被禁止的。

使用 AJAX，您有相同的域策略，这意味着如果您尝试对未托管脚本的网站执行常规 AJAX 调用，它将失败。例如，如果您使用 IE7 并且您的文件托管在 上`somedomain.com`，并且您尝试向 发出请求`someotherdomain.com`，浏览器将阻止您。这是一个安全功能，主要用于防止 XSS（Cross Site Scripting）。[您可以在此处](http://en.wikipedia.org/wiki/Same_origin_policy)和[此处](http://en.wikipedia.org/wiki/Cross-site_scripting)阅读有关同域策略和 XSS 的更多信息。

# django - Django - ImproperlyConfiguredError，Guardian 的 ANONYMOUS_USER_ID

> ID：11888551
> 
> 赞同：0
> 
> 时间：2012-08-09T17:13:02.447
> 
> 标签：django, django-settings

我正在使用 django-guardian 来处理对象权限。在我的 settings.py 中：

```
ANONYMOUS_USER_ID = -1 
```

但是，当我尝试运行服务器时，我得到一个配置不正确的错误：

```
django.core.exceptions.ImproperlyConfigured: In order to use django-guardian's ObjectPermissionBackend authorization backend you have to configure ANONYMOUS_USER_ID at your settings module 
```

我怀疑这可能是由于我`from guardian.shortcuts import assign`在 settings.py 的顶部执行的，但我不确定。注释掉导入会导致服务器启动成功，但尝试访问任何页面都会`AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF'`提示设置完全有问题（也许没有正确找到它们？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:01:22.560

我刚刚确定，在遵循[http://packages.python.org/django-guardian/configuration.html](http://packages.python.org/django-guardian/configuration.html)项目的配置说明后，项目与 Guardian 顺利运行（使用 Django 1.4）。

...并回答您的问题：

1.  尽量避免在设置模块中导入东西。如果这样做，请绝对确保没有循环导入问题。实际上，您确实有这个问题。如果需要，您可以使用 *post_syncdb* 信号：（https://docs.djangoproject.com/en/dev/ref/signals/#post-syncdb）。但是，在您的情况下，它不应该是必需的，因为您已经说过删除该导入解决了运行命令的问题（因此设置模块`assign`无论如何都没有使用快捷方式）。

2.  `ROOT_URLCONF`绝对应该设置属性（如果您使用 Django 的内置命令（即`django-admin.py startproject myproject`）生成项目。如果它丢失，那么是的，您的配置已损坏。尝试将属性设置为类似`'myproject.urls'`（或您的主要网址所在的任何位置）和检查是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T18:50:15.293

作为记录，我在上次正式发布时遇到了同样的问题（使用简单的 pip install django-guardian 安装）

[当您从lukaszb 的 git 存储库](https://github.com/lukaszb/django-guardian)安装版本时不会发生这种情况，我仔细检查了源代码

# java - 检查两个集合是否包含相同元素的方法，与顺序无关？

> ID：11888554
> 
> 赞同：13
> 
> 时间：2012-08-09T17:13:04.600
> 
> 标签：java, collections, hashset

假设我有两个不同的哈希集，如下所示如何检查两个哈希集是否包含相同的元素并且这两个哈希集相等，与集合中元素的顺序无关，请告知..!!

```
Set set1=new HashSet();
          set.add(new Emp("Ram","Trainer",34000));
          set.add(new Emp("LalRam","Trainer",34000)); 
```

另一个是..

```
Set set2=new HashSet();
          set.add(new Emp("LalRam","Trainer",34000));
          set.add(new Emp("Ram","Trainer",34000)); 
```

员工 pojo 是...

```
class Emp //implements Comparable
{
      String name,job;
      public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getJob() {
        return job;
    }
    public void setJob(String job) {
        this.job = job;
    }
    public int getSalary() {
        return salary;
    }
    public void setSalary(int salary) {
        this.salary = salary;
    }
    int salary;
      public Emp(String n,String j,int sal)
      {
         name=n;
         job=j;
         salary=sal;
       }
      public void display()
      {
        System.out.println(name+"\t"+job+"\t"+salary);
       }

  public boolean equals(Object o)
      {

         Emp p=(Emp)o;
          return this.name.equals(p.name)&&this.job.equals(p.job) &&this.salary==p.salary;
       }
   public int hashCode()
       {
          return name.hashCode()+job.hashCode()+salary;
       }

      /* public int compareTo(Object o)
       {
          Emp e=(Emp)o;
          return this.name.compareTo(e.name);
           //return this.job.compareTo(e.job);
        //   return this.salary-e.salary;

        }*/
} 
```

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-08-09T17:23:24.777

引用[AbstractSet.equals(Object)](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractSet.html#equals(java.lang.Object)) javadoc：

> 如果给定对象也是一个集合，则返回 true，这两个集合具有相同的大小，并且给定集合的每个成员都包含在该集合中。这确保了 equals 方法在 Set 接口的不同实现中正常工作。

因此，只需调用`set1.equals(set2)`. 当且仅当集合包含相同的元素时，它将返回`true`（假设您已正确定义集合`equals`中`hashCode`的对象）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T17:17:14.120

假设您已经定义了 equals 和 hashcode，这是一种方法。对于大会员来说效率不是很高。

1.  检查每个元素的#。如果他们不相等，你就完成了[不相等]。
2.  循环通过 Set1。检查 Set2 是否包含每个元素，如果没有，则完成 [不等于]。否则，如果你通过整套，你是平等的

更新：我不知道 containsAll，它省了很多麻烦，基本上就是那个算法

```
int s1 = set1.size();
int s2 = set2.size();
if (s1 !=s2) return false;
return set1.containsAll(set2); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-09T17:22:49.080

使用下面的表达式。

```
set1.containsAll(set2) && set2.containsAll(set1) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T17:19:43.287

如果您想要数据相等，则正确实现`equals()`，`hashCode()`然后您可以使用[Collection.containsAll(...)](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html#containsAll%28java.util.Collection%29)。当然，您需要确保仅在两个集合具有相同数量的元素时才调用它，否则您只能说它们不相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T17:20:01.913

做：

```
 setResult = set2.clone();

  if ( setResult.retainAll( set1 ) ){

   //do something with results, since the collection had differences

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-02T08:19:48.533

1 - 获取一个集合（我们将其命名为“差异”），其中将包含一个集合具有而另一个集合没有的项目 -

集合差异 = CollectionUtils.subtract(Collection1, Collection2);

2 - 检查大小 == 0；

如果是这样 - 两个集合具有相同的元素；如果否 - 存在一些差异，然后您必须打印“差异”具有的所有项目。

不确定它是否取决于物品顺序。我正在以这种方式比较集合

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-11T12:48:47.580

当您不知道集合的类型时，一个冗长但（希望）有效的解决方案：

```
public static <T> boolean equalIgnoreOrder(Collection<T> c1, Collection<T> c2) {
    int size1 = c1.size();  // O(1) for most implementations, but we cache for the exceptions.
    if (size1 != c2.size()) {
        return false;
    }
    Set<T> set;
    Collection<T> other;
    if (c1 instanceof Set) {
        set = (Set<T>) c1;
        other = c2;
    } else if (c2 instanceof Set) {
        set = (Set<T>) c2;
        other = c1;
    } else if (size1 < 12 ) { // N^2 operation OK for small N
        return c1.containsAll(c2);
    } else {
        set = new HashSet<>(c1);
        other = c2;
    }
    return set.containsAll(other);  // O(N) for sets
} 
```

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2012-08-09T17:23:59.403

> 除非您出于某种原因需要实现自己的方法，否则只需使用`h1.equals(h2)`. 下面描述一种可能的实现方式。

1.  检查元素的 # 是否相同。如果不是，则返回 false。
2.  克隆第 2 组（如果之后需要保留第 2 组）
3.  遍历集合 1，检查是否在克隆集合 2 中找到每个元素。如果找到，则从集合 2 中删除。如果没有找到，则返回 false。
4.  如果您到达迭代的末尾并且匹配了集合 1 的每个元素，则集合是相等的（因为您已经比较了 2 个集合的大小）。

例子：

```
public boolean isIdenticalHashSet <A> (HashSet h1, HashSet h2) {
    if ( h1.size() != h2.size() ) {
        return false;
    }
    HashSet<A> clone = new HashSet<A>(h2); // just use h2 if you don't need to save the original h2
    Iterator it = h1.iterator();
    while (it.hasNext() ){
        A = it.next();
        if (clone.contains(A)){ // replace clone with h2 if not concerned with saving data from h2
            clone.remove(A);
        } else {
            return false;
        }
    }
    return true; // will only return true if sets are equal
} 
```

# .net - 如何在 Sitecore 中创建调查？

> ID：11888555
> 
> 赞同：1
> 
> 时间：2012-08-09T17:13:09.450
> 
> 标签：.net, content-management-system, sitecore, survey

我们需要一个接一个地向用户展示一组问题。根据结果​​，将向用户展示一组产品。

这可以通过 Sitecore 完成（除了使用自定义布局）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:33:26.967

您可能会发现[Poll 共享源模块](http://trac.sitecore.net/Poll)很有用。它已升级到 Sitecore 的最新主要版本，并且似乎也与 DMS 集成。此外，[它已经过测试并得到 Sitecore 的支持](http://trac.sitecore.net/Index/wiki/Better)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T20:38:47.053

默认情况下，Sitecore 没有此功能。它基本上是一个网站开发框架，默认不包含很多模块，但是您可以通过编程创建一个调查应用程序。

如果您拥有 DMS 模块（数字营销系统）和营销人员 Web 表单模块的许可证，那么您可以使用这些模块创建调查。Web 表单可用于创建调查表，DMS 可用于跟踪结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T19:48:49.077

我已经在生产环境中使用[营销人员 Web 表单(WFFM) 成功实施了调查。](http://sdn.sitecore.net/upload/sdn5/products/web_forms2/web_forms_for_marketers_v2_reference_usletter.pdf)默认情况下，数据收集在本地 SQLite 数据库中，但是，如果您的生产环境有多个 CD 实例，Sitecore 提供了一个 SQL 数据库和数据提供程序，这很方便。

表单可以附加到您指定的任何占位符，就像您使用渲染和子布局一样。

关于您的条件逻辑......就像 Sitecore 的所有东西一样，WFFM 提供了几个可以“挂钩”的地方。以下是自定义“提交”操作的示例。您可以将自定义操作与 Sitecore 提供的任何“开箱即用”操作相结合。

```
class RedirectToRegistrationForm : BaseSaveAction
{
    public override void Execute(ID formid, AdaptedResultList fields, params object[] data)
    {
        AdaptedControlResult result = fields.GetEntryByName("Entry Name");
        switch(result.Value)
        {
            case "Condition 1":
                // do something...
                break;

            case "Condition 2":
                // do something else...
                break;
        }
    }
} 
```

# jquery - jQuery 在多个级别上解析 JSON

> ID：11888558
> 
> 赞同：1
> 
> 时间：2012-08-09T17:13:26.487
> 
> 标签：jquery, json, parsing

我正在尝试解析以下内容并显示一个显示“城市，州”的简单输出列表：

```
{
"status":"success",
"data":[
    {"city":"Brooklyn Park","state":"MN"},
    {"city":"Campbellsport","state":"WI"},
    {"city":"Wauwatosa","state":"WI"},
            ...
    ]
} 
```

这是我到目前为止所拥有的：

```
var output = $.parseJSON(data);
var list = output.data;
$.each(list,function(){
    item = $.parseJSON(list);
    console.log(list.city);
}); 
```

原始数据来自回调。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:16:34.190

`$.parseJSON`将解析整个对象，您不需要解析每个元素。

```
var output = $.parseJSON(data);
var list = output.data;

$.each(list,function(i,item){
    console.log(item.city);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T17:15:12.960

```
var output = $.parseJSON(data);
var list = output.data;
$.each(list,function(index, val){

    // within val you'll get each 
    // data object

    console.log( val.city );
}); 
```

您无需在`$.each()`. 因为，`output`已经被解析，所以你可以得到`list`using `output.data`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:19:03.233

data 是一个数组，所以只需使用 for 循环

```
var output = $.parseJSON(data);
var list = output.data;
for (var i=0; i<list.length; i++){
    var city = list[i].city;
    var state = list[i].state;
    console.log(city + "," + state);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T19:30:56.633

```
success: function (response) {

                       var output = response[0].City;

                       alert(output);

                   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-06T10:36:44.890

这可能会有所帮助。

```
var json = [
    {"id":"1","tagName":"apple"},
    {"id":"2","tagName":"orange"},
    {"id":"3","tagName":"banana"},
    {"id":"4","tagName":"watermelon"},
    {"id":"5","tagName":"pineapple"}
];

$.each(json, function(idx, obj) {
    alert(obj.tagName);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T17:25:01.280

尝试这个：

```
var output = $.parseJSON(data);
var list = output.data;

$.each(list, function() {
  console.log(this['city']); // could also be this.city
}); 
```

当您跳入像 jQuery 内部的任何函数时，您会切换到“this” - 每个“列表”中的数据都没有正确保存到项目中。

# extjs - 分页现在在 extjs 4.1 网格分页中显示 Total

> ID：11888559
> 
> 赞同：1
> 
> 时间：2012-08-09T17:13:28.810
> 
> 标签：extjs, extjs4.1

我注意到在某些或我的网格上没有显示“displayMsg”。即右下角的文字。

如果你看下面的屏幕截图，我已经设置了 pageSize： 4\. 总共有“33”条记录，所以应该开始分页。一般来说，分页不显示记录总数的原因是什么。

![在此处输入图像描述](../Images/49db2ddd40eae7897feb0de12bdf6646.png)

![在此处输入图像描述](../Images/c489cd71db43913e2f64de7b320fd4d3.png)

```
Ext.define('Mis.view.PurchaseOrder', {
extend: 'Ext.grid.Panel',
alias:'widget.purchaseorder',
title:'Purchase Order',
store:'MaterialPurchaseOrders',
height: 235,
dockedItems:[
    {
        xtype: 'pagingtoolbar',
        store:'MaterialPurchaseOrders',
        dock: 'bottom',
        displayInfo: true,
        displayMsg:'Displaying records {0} - {1} of {2} &nbsp;',
        emptyMsg:"No records to display&nbsp;",
        flex:1
    }
],
columns:[
    {
        xtype:'gridcolumn',
        dataIndex:'PartName',
        name:'PartName',
        text:'Part',
        flex:1
    },
    {
        xtype:'gridcolumn',
        text:'PO ID',
        dataIndex:'PoNumber',
        name:'PoNumber',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Material',
        dataIndex:'Name',
        name:'Name',
        flex:1
    },
    {
        xtype:'gridcolumn',
        text:'Total',
        dataIndex:'Total',
        name:'Total',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Size / Ref',
        dataIndex:'SizeReference',
        name:'SizeReference',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Size L',
        dataIndex:'SizeLength',
        name:'SizeLength',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Size W',
        dataIndex:'SizeWidth',
        name:'SizeWidth',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Quantity',
        dataIndex:'Quantity',
        name:'Quantity',
        width: 80,
        align: 'center'
    },
    {
        xtype:'gridcolumn',
        text:'Meterage',
        dataIndex:'Meterage',
        name:'Meterage',
        width: 80,
        align: 'center'
    }
],

initComponent:function () {
    this.callParent();
} 
```

});

我的模型。

```
 Ext.define('Mis.model.MaterialPurchaseOrder', {
    extend: 'Ext.data.Model',
    idProperty: 'Id',
    fields: [
                {
                    mapping: 'Id',
                    name: 'Id'
                },
                {
                    mapping: 'Name',
                    name: 'Name'
                },
                {
                    mapping: 'SizeReference',
                    name: 'SizeReference'
                },
                {
                    mapping: 'SizeLength',
                    name: 'SizeLength'
                },
                {
                    mapping: 'SizeWidth',
                    name: 'SizeWidth'
                },
                {
                    mapping: 'Quantity',
                    name: 'Quantity'
                },
                {
                    mapping: 'Meterage',
                    name: 'Meterage'
                },
                {
                    mapping: 'PoNumber',
                    name: 'PoNumber'
                },
                {
                    mapping: 'PartId',
                    name: 'PartId'
                },
                {
                    mapping: 'PartName',
                    name: 'PartName'
                },
                {
                    mapping: 'Total',
                    name: 'Total'
                },
                {
                    mapping: 'MaterialType',
                    name: 'MaterialType'
                },
                {
                    mapping: 'MaterialTypeId',
                    name: 'MaterialTypeId'
                }
    ],
    proxy: {
        type: 'ajax',
        url: '',
        api:
               {
                   read: '/Material/ReadAssignedPurchaseOrder/',
                   update: '/Material/Update',
                   create: '/Material/Update',
                   destroy: '/Material/Remove'
               },
        reader: {
            type: 'json',
            root: 'Materials',
            successProperty: 'Success',
            totalProperty: 'Total'
        },
            writer:{
            type:'json',
            allowSingle:true
        }
    }
}); 
```

店铺

```
Ext.define('Mis.store.MaterialPurchaseOrders', {
extend: 'Ext.data.Store',
requires: 'Mis.model.MaterialPurchaseOrder',
model: 'Mis.model.MaterialPurchaseOrder',
pageSize: 4 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:09:32.783

尝试为您的商店创建一个实例，这样做从来都不是坏事。使用您的示例（按字符串存储），如果您打开了 2 个网格并对它们进行排序，它们将排序相同，等等...

```
Ext.define('Mis.view.PurchaseOrder', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.purchaseorder',
    title: 'Purchase Order',
    height: 235,
    columns: [
        {
        xtype: 'gridcolumn',
        dataIndex: 'PartName',
        name: 'PartName',
        text: 'Part',
        flex: 1},
    {
        xtype: 'gridcolumn',
        text: 'PO ID',
        dataIndex: 'PoNumber',
        name: 'PoNumber',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Material',
        dataIndex: 'Name',
        name: 'Name',
        flex: 1},
    {
        xtype: 'gridcolumn',
        text: 'Total',
        dataIndex: 'Total',
        name: 'Total',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Size / Ref',
        dataIndex: 'SizeReference',
        name: 'SizeReference',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Size L',
        dataIndex: 'SizeLength',
        name: 'SizeLength',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Size W',
        dataIndex: 'SizeWidth',
        name: 'SizeWidth',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Quantity',
        dataIndex: 'Quantity',
        name: 'Quantity',
        width: 80,
        align: 'center'},
    {
        xtype: 'gridcolumn',
        text: 'Meterage',
        dataIndex: 'Meterage',
        name: 'Meterage',
        width: 80,
        align: 'center'}
    ],
    initComponent: function() {
        var me = this;
        var store = Ext.create('Mis.store.MaterialPurchaseOrders');

        Ext.applyIf(me, {
            store: store,
            dockedItems: [{
                xtype: 'pagingtoolbar',
                store: store,
                dock: 'bottom',
                displayInfo: true,
                displayMsg: 'Displaying records {0} - {1} of {2} &nbsp;',
                emptyMsg: "No records to display&nbsp;",
                flex: 1}]
        });
        me.callParent();
    }
});​ 
```

# mysql - Mysql唯一值或空字符串

> ID：11888560
> 
> 赞同：3
> 
> 时间：2012-08-09T17:13:28.757
> 
> 标签：mysql, sql, unique

我有一个电子邮件邮寄列表。每个注册的用户都有一个激活密钥。激活密钥最初是在注册时创建的。每把钥匙都是独一无二的。

一旦用户确认注册，这就是数据库中的一个空字符串。

如果字段中有空值，我有没有办法创建一个独特的约束。

换句话说，如果不是 null 或唯一的空字符串，则所有值都是允许的。

我设置为唯一并允许为空，但这不起作用。我无法输入 null 和唯一值，即设置为 null 唯一时多次输入 null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:17:46.250

不，您将无法创建这样的唯一约束，因为唯一约束就是唯一的，并且具有 NULL 或空字符串的多行将是重复的行。但是，我建议您**不要**清空此列，而是使用指示注册已确认的布尔字段 - 它更直接，然后您可以在该字段上使用唯一约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-09T09:18:00.290

在mysql中

当所有值都没有空值填充时，列或唯一索引仅检查约束

# silverlight - 如何为标签添加下划线？

> ID：11888561
> 
> 赞同：2
> 
> 时间：2012-08-09T17:13:28.347
> 
> 标签：silverlight

我的 xaml 中有一个 System.Windows.Controls.Label，我正在尝试添加下划线样式。我似乎无法弄清楚要添加到我的样式中以使其成为下划线。当我搜索这个问题时，我只看到 TextBox 解决方案。这是获得下划线的唯一方法吗？

XAML：

```
<sdk:Label Content="Show Data in Grid" Name="lblShowGridData" Style="{StaticResource UnderlineLabel}"/> 
```

风格：

```
<Style x:Key="UnderlineLabel" TargetType="sdk:Label">
    <Setter Property="FontWeight" Value="Bold"/>
</Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:24:15.183

A`Label`是 a `ContentControl`，所以你可以在 a`TextBlock`里面加上下划线：

```
 <sdk:Label>
        <TextBlock Text="This is underlined" TextDecorations="Underline" />
    </sdk:Label> 
```

# jquery - 将事件处理程序添加到新创建的元素

> ID：11888570
> 
> 赞同：5
> 
> 时间：2012-08-09T17:14:09.357
> 
> 标签：jquery, dom

我正在尝试将新元素添加到带有链接的有序列表中以将其删除：

```
$('#list ol').append('<li>' + label + ' <a href="#remove_'+id+'">[remove]</a></li>'); 
```

但这不起作用：

```
$('a[href^="#remove"]').on('click', function(event){
    alert('Removing: '+$(this).attr('href').substr(8));
    event.preventDefault();
}); 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T17:15:47.430

将新元素包裹在 jQuery 标记中并在那时应用事件处理程序。与在元素已插入 DOM 后使用有些复杂的 jQuery 选择器来分配事件处理程序相比，这是一种更简洁、更有效的方法：

```
//this line will create your element in memory, but not insert it to the DOM
var newElmt = $('<li>' + label + ' <a href="#remove_'+id+'">[remove]</a></li>');

//you can apply jQuery style event handlers at this point
newElmt.on('click',function(e) {

    alert('Removing: '+$(this).attr('href').substr(8));
    event.preventDefault();
});

//insert the element as you were before
$('#list ol').append(newElmt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:17:15.720

```
$('#list').on('click', 'a[href^="#remove"]', function(event){
    alert('Removing: '+$(this).attr('href').substr(8));
    event.preventDefault();
}); 
```

由于您是`li`动态追加的，因此您需要使用`.on()`委托处理程序来处理委托事件。

# outlook - 如何修复 Outlook 2013 中的图像显示？

> ID：11888571
> 
> 赞同：14
> 
> 时间：2012-08-09T17:14:13.480
> 
> 标签：outlook, html-email

在 Outlook 2013 的试用版中，HTML 电子邮件中的图像显示非常奇怪。据我通过测试得出的结论，看起来低于 20 像素高的图像添加了填充以使它们高 20 像素。我能做些什么来改变它吗？这些电子邮件在 Outlook 2010 和我一直在测试它们的其他任何地方看起来都很好。

我尝试更改它们所在的表格单元格的高度（*通过`height="13"`以及内联 css*）以及它们所在的表格和表格行，但均无济于事。以下代码是触发此问题的一个简单示例，您将能够看到图像上方单元格的红色背景：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="195" style="background-color:#ff0000;"><img src="image url here" alt="" width="195" height="13" style="display: block" /></td>
  </tr>
</table>
</body>
</html> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-18T15:54:46.327

向标签添加`line-height`样式`td`（为了更好地衡量，`height`也向标签添加属性`td`）。

```
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td width="195" height="13" style="background-color:#ff0000; line-height:13px;">
      <img src="..." alt="" width="195" height="13" style="display:block;" />
    </td>
  </tr>
</table> 
```

修改后的代码在 Litmus 中针对所有 Outlook 版本进行了良好测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:01:13.080

删除单元格填充，您不会看到那个红色背景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T18:13:28.140

我发现添加`<font size="1"><img /></font>`也可以解决问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-10T00:11:04.973

添加 `style="display:block;"`到任何图像标签。 `<img src="/img/s.gif" width="1" height="1" alt="" style="display:block;">`

这将删除额外的填充。

# java - 将画布保存到位图，然后保存位图

> ID：11888573
> 
> 赞同：1
> 
> 时间：2012-08-09T17:14:16.723
> 
> 标签：java, android

这被包围在 try, catch 中，用于编写部分，但如果它不在 try catch 方法中，则应用程序似乎在模拟器中崩溃。我正在尝试将画布保存为位图，然后将位图保存到存储...

```
screenshot = Bitmap.createBitmap(screenshot, 0, 0, 0, 0);
Canvas can = new Canvas(screenshot);
int i = 0;
String filename = "EnderShot";
while (new File(filename + i + ".png") != null){
    FileOutputStream fos = null;
    fos = openFileOutput(filename + i + ".png", Context.MODE_PRIVATE);
    fos.write(screenshot.getByteCount());
    fos.close();
} 
```

这也节省了它......所以如果有人能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:16:50.960

您在画布上绘制的任何内容实际上都将绘制在底层位图上。

在这种情况下：`screenshot`

所以你已经有了画布的位图，不需要将画布转换为位图。

将位图保存到文件中

```
try {
   FileOutputStream out = new FileOutputStream(filename + i + ".png");
   screenshot.compress(Bitmap.CompressFormat.PNG, 90, out);
   out.flush();
   out.close();
} catch (Exception e) {
   e.printStackTrace();
} 
```

# xcode4 - Xcode：SDWebImage 清除单个图像的缓存

> ID：11888578
> 
> 赞同：15
> 
> 时间：2012-08-09T17:14:38.143
> 
> 标签：xcode4, uiimageview, sdwebimage

我正在使用[SDWebImage](https://github.com/rs/SDWebImage)到具有缓存支持的异步图像下载器。

它工作得很好，只是有时图像在服务器上以相同的名称更新，因此我需要从客户端设备缓存中清除它但没有成功！

我在[这里](https://github.com/rs/SDWebImage/issues/111)发现我必须使用“removeImageForKey”，但 Xcode 无法识别它！

我正在使用以下代码来设置图像：

```
[imgPic setImageWithURL:[NSURL URLWithString:@"http://domain.com/image.jpg"] placeholderImage:[UIImage imageNamed:@"tmpPic.png"]]; 
```

调用 removeImageForKey 的正确方法是什么？我必须导入什么而不是 UIImageView+WebCache.h？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-22T18:15:36.647

```
- (void)removeImageForKey:(NSString *)key fromDisk:(BOOL)fromDisk; 
```

API 是对的。它对我有用。你知道 api 在类 SDImageCache 中，这是一个单例类。
你可以像这样使用它：

```
[[SDImageCache sharedImageCache] removeImageForKey:image_url fromDisk:YES]; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-29T18:15:29.430

```
#import "SDImageCache.h"

....

[[SDImageCache sharedImageCache] removeImageForKey:@"http://domain.com/image.jpg" fromDisk:YES]; 
```

# c++ - 我可以将 0 分配给 shared_ptr 吗？为什么？

> ID：11888581
> 
> 赞同：12
> 
> 时间：2012-08-09T17:14:45.830
> 
> 标签：c++, null, c++11

我意识到以下在 GCC 4.7 中编译得很好：

```
#include <memory>

int main() {
    std::shared_ptr<int> p;
    p = 0;
} 
```

但是，没有来自`int`或来自的赋值运算符，也没有来自任何一个或任何一个`int*`的隐式构造函数。有一个构造函数，但该构造函数是显式的。我检查了标准库的实现，构造函数确实是显式的，并且看不到任何可疑的赋值运算符。`int``int*``int*`

该程序实际上是格式良好的还是 GCC 惹恼了我？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T17:19:39.737

这样做的原因是标准中的这个简短引用：

`§4.10 [conv.ptr] p1`

> 空指针常量是整数类型的整数**常量表达式**(5.19) 纯右值**，其计算结果为零**或类型的纯右值`std::nullptr_t`。[...] 整数类型的空指针常量可以转换为 prvalue 类型`std::nullptr_t`。[...]

`std::shared_ptr`并且具有来自的隐式构造函数的事实`std::nullptr_t`：

`§20.7.2.2 [util.smartptr.shared] p1`

> `constexpr shared_ptr(nullptr_t) : shared_ptr() { }`

这也允许像这样的奇怪：

```
#include <memory>

void f(std::shared_ptr<int>){}

int main(){
  f(42 - 42);
} 
```

[活生生的例子。](http://liveworkspace.org/code/b30bc04ae80b59ed9639f77cba7fc0aa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:20:19.317

您只能将共享指针分配给共享指针的另一个实例。无法分配 shared_pointer 持有的类型。Afaik 这是运算符的唯一重载：

`shared_ptr& operator=(const shared_ptr& r);`

您正在做的是将 0（在这种情况下等于 NULL）分配给指针，而不是类型的值。此时您的类型甚至没有在代码中初始化。

# android - Eclipse Android 插件不会创建所有必需的文件夹

> ID：11888584
> 
> 赞同：0
> 
> 时间：2012-08-09T17:14:58.847
> 
> 标签：android

我正在使用 eclipse 插件来尝试编写一个 android 应用程序。我在网上查看了一些文件夹，eclipse 没有创建（特别是 res/）。因此，我永远无法运行该程序。任何想法? 我也得到这些错误：

```
[2012-08-09 12:17:08 - WifiCheck] Could not find WifiCheck.apk!
[2012-08-09 12:17:16 - Wififind] res\layout\activity_wifi_find.xml:0: error: Resource      entry activity_wifi_find is already defined.
[2012-08-09 12:17:16 - Wififind] res\layout\activity_wifi_find.out.xml:0: Originally defined here.
[2012-08-09 12:17:16 - Wififind]       C:\Users\Law\workspace\Wififind\res\layout\activity_wifi_find.out.xml:1: error: Error parsing XML: no element found
[2012-08-09 12:17:18 - Wififind] res\layout\activity_wifi_find.xml:0: error: Resource entry activity_wifi_find is already defined.
[2012-08-09 12:17:18 - Wififind] res\layout\activity_wifi_find.out.xml:0: Originally defined here.
[2012-08-09 12:17:18 - Wififind] C:\Users\Law\workspace\Wififind\res\layout\activity_wifi_find.out.xml:1: error: Error parsing XML: no element found
[2012-08-09 12:18:04 - Wififind] R.java was removed! Recreating R.java!
[2012-08-09 12:18:04 - Wififind] res\layout\activity_wifi_find.xml:0: error: Resource entry activity_wifi_find is already defined.
[2012-08-09 12:18:04 - Wififind] res\layout\activity_wifi_find.out.xml:0: Originally defined here.
[2012-08-09 12:18:04 - Wififind] C:\Users\Law\workspace\Wififind\res\layout\activity_wifi_find.out.xml:1: error: Error parsing XML: no element found
[2012-08-09 12:18:46 - Wififind] res\layout\activity_wifi_find.xml:0: error: Resource entry activity_wifi_find is already defined.
[2012-08-09 12:18:46 - Wififind] res\layout\activity_wifi_find.out.xml:0: Originally defined here.
[2012-08-09 12:18:46 - Wififind] C:\Users\Law\workspace\Wififind\res\layout\activity_wifi_find.out.xml:1: error: Error parsing XML: no element found
[2012-08-09 12:18:47 - Wififind] res\layout\activity_wifi_find.xml:0: error: Resource entry activity_wifi_find is already defined.
[2012-08-09 12:18:47 - Wififind] res\layout\activity_wifi_find.out.xml:0: Originally defined here.
[2012-08-09 12:18:47 - Wififind] C:\Users\Law\workspace\Wififind\res\layout\activity_wifi_find.out.xml:1: error: Error parsing XML: no element found
[2012-08-09 12:32:55 - WifiCheck] ------------------------------
[2012-08-09 12:32:55 - WifiCheck] Android Launch!
[2012-08-09 12:32:55 - WifiCheck] adb is running normally.
[2012-08-09 12:32:55 - WifiCheck] Could not find WifiCheck.apk! 
```

编辑：没有xml文件。只有名为 R、MainActivity 和 BuildConfig 的 java 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:17:49.033

> Eclipse 没有创建一些文件夹（特别是 res/）

根据您的错误日志输出，`res/`存在。删除`res\layout\activity_wifi_find.out.xml`文件，日志中显示的错误就会消失。

# iphone - Appcelerator - Ad-Hoc 分发崩溃，但使用有线连接在设备上成功运行

> ID：11888585
> 
> 赞同：1
> 
> 时间：2012-08-09T17:14:59.340
> 
> 标签：iphone, crash, titanium, appcelerator, ad-hoc-distribution

这个问题与 iPhone 上的 Appcelerator Titanium 开发有关。

我能够在直接连接到我的 mac 的设备上运行该应用程序，但每次我进行临时分发时，该应用程序都会崩溃。

崩溃总是在应用程序启动画面弹出后发生。

我还注意到，当使用有线连接直接从 Titanium Studio 安装到设备时，应用程序的大小会更大。当我进行临时分发然后通过 iTunes 手动安装分发 IPA 时，它会更小。

我使用 iOS 5.1 SDK、Titanium SDK 2.1.1.GA、Mountain Lion OSX。

我怀疑代码签名有问题。有没有人遇到过类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:38:20.793

当我进行临时构建时，我几乎从不使用 TiStudio 来执行此操作。以下是我在创建 Ad-Hoc 时执行的步骤：

1.  在会员中心创建开发者分发配置文件（确保捆绑包 ID 与您的项目匹配）。选择 Ad-Hoc 而不是应用商店，并确保包含您的所有设备。
2.  运行你的钛项目，这只是为了确保项目“build”文件夹中有一些东西。
3.  转到 YOUR_PROJECT/build/iphone/ 并打开 XCode 项目。
4.  从本质上讲，您可以像其他所有 XCode 开发人员一样遵循确切的分发方法。[请参阅此文档链接](https://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/YourFirstAppStoreSubmission/TestYourApponManyDevicesandiOSVersions/TestYourApponManyDevicesandiOSVersions.html)。
5.  简而言之，上面的链接告诉您执行“产品->存档”，然后从“存档”选项卡上的“组织者”窗口单击“分发...”按钮，然后选择“保存为企业或广告”选项-Hoc 部署”

正如我之前提到的，在测试中的所有重要步骤中使用 Apple 工作流程可能会更好。

# html - （软连字符）和 Chrome 和 Safari

> ID：11888586
> 
> 赞同：2
> 
> 时间：2012-08-09T17:15:00.053
> 
> 标签：html, css, google-chrome, web, soft-hyphen

我有一个网站，我更喜欢使用 ­ ; （软连字符）按我想要的方式断词。

[单击此处查看 Chrome 的屏幕截图](https://img.skitch.com/20120809-88amqbwq9734gpdbwt4menu89m.jpg)

问题计算机运行 OS X（多个版本），并且问题出现在 Chrome 和 Safari（多个版本）中。具有完全相同操作系统和浏览器版本的计算机可以以不同的方式显示这一点。屏幕截图是在 OS 10.8 上使用 Chrome v. 21.0.1180.75 拍摄的。

它看起来像软连字符一样有效，因为它分割了单词，并插入了一个连字符“-”，但它也会生成带有十字的矩形。

该网站使用@fontface，如果这与它有任何关系的话。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-14T13:31:35.660

我已经对[Webkit 中的软连字符错误进行了](http://clagnut.com/blog/2377/)详细调查。简而言之，问题似乎是 Helvetica Light（和其他一些字体，如 Avenir）中的错误和 Webkit 中的字体堆栈错误的组合。您可以通过在字体堆栈中包含 Arial 来修复它，例如。

font-family:"Apercu Light", Arial, sans-serif;

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-12T15:42:24.950

我在 webkit/mac 上发生了同样的问题。创建字体的代工厂帮助了我并提供了有效的解决方案（添加 Arial）

```
font-family:"Apercu Light", Arial, Calibri, sans-serif; 
```

代替

```
font-family:"Apercu Light", Calibri, sans-serif; 
```

在字体文件更新之前，这是一个临时解决方案。对于这种特殊情况，我认为 Arial 比 webkit/mac 上的 helvetica 有更好的支持。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T22:06:37.197

特别是考虑到您的[fonttest website](http://bit.ly/QKaPSP)，问题似乎是由两个因素引起的：OS X 上的一些 WebKit 浏览器的一个错误使它们在一行文本中使用字形呈现软连字符，而不是仅仅将其视为控制字符；StagSansWeb 字体要么没有字形（使浏览器使用虚拟字形），要么有一个奇怪的字形。如果这些浏览器另外将软连字符视为允许连字符，这将解释这些症状，前提是 Helvetica 有一个用于软连字符的空字形。

这是高度推测或推测的。

在更坚实的基础上，标准中没有严格定义发生连字符的文本的呈现。如果浏览器在 上应用连字符`foo&shy;bar`，它们应该在行尾呈现“foo”，后跟连字符，但标准没有说明是哪个连字符。它可以是 HYPHEN-MINUS（即 Ascii 连字符），或者 HYPHEN，甚至是 SOFT HYPHEN，如果它有一个字形的话。也许甚至是别的东西。它甚至可能取决于语言，因为某些语言有自己的连字符。

所以 WebKit 浏览器已经开始支持专有属性是可以理解的`-webkit-hyphenate-character`。但是，它似乎没有得到正确实施。在 Windows 7 上的 Chrome 和 Safari 上进行测试`-webkit-hyphenate-character: "\00AD"`，我注意到它们在没有添加*任何*连字符的情况下“连字符”单词（包含软连字符）（就像它们使用空字形一样），即使该属性的其他值工作正常。

总而言之，我希望您可以通过避免使用 StagSansWeb 之类的字体来处理可能连字符的文本来避免这个问题。可以通过修改字体来解决问题。

# ruby-on-rails - 在 Rails 中显示某些用户的博客文章

> ID：11888587
> 
> 赞同：4
> 
> 时间：2012-08-09T17:15:03.167
> 
> 标签：ruby-on-rails, ruby, model-view-controller, devise, blogs

好吧，开始学习 Rails，当然是从编写个人博客服务开始（比如 livejournal）。我有帖子脚手架和用户模型（感谢设计）。现在我试图在 url 中显示某个用户的所有帖子，例如 /username/posts ，但真的不明白如何制作这种rails-way。已经在路由中创建了嵌套资源

```
resources :users do 
  resources :posts 
end 
```

并连接用户和帖子模型

```
has_many :posts 
```

和

```
belongs_to :user 
```

我应该为用户创建控制器吗？有什么合适的方法吗？

PS谢谢你的回答。尝试学习rails，但我发现的几乎所有教程都以脚手架结尾，这不是很有帮助。

编辑1：多亏了“匹配”的想法，我解决了一半的问题。另一半（未解决）是选择某个用户写的帖子

编辑2：添加

```
@user = User.where(:username => params[:username])
@posts = @user.posts 
```

到控制器，但我在帖子控制器中有“未定义的方法`posts'”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:54:34.830

使用时，`where`您会从查询中获取对象数组，而不是单个对象。因此，您的变量
没有`posts`方法。 也许你应该改成这样，只检索一个： `@user`
`user`

```
@user = User.find_by_username(params[:username]) 
```

这样你只有一个`user`查询，你可以使用`.posts`relashionship 而不会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:23:04.737

使用时

```
resources :users do
   resources :posts 
end 
```

你最终会得到像'/users/1/posts'这样的网址

首先要有用户名，如果你需要写 id

```
def to_param
  self.username 
end 
```

在您的用户模型中。

或者，如果您不希望您的 url 是 /users/:id/posts ，您可以使用 match 创建一个路由 url

```
match ':username/posts' ,'posts#show' 
```

这将带您到帖子控制器并显示操作。

# java - 绘制到画布 - 不绘制其他项目

> ID：11888590
> 
> 赞同：0
> 
> 时间：2012-08-09T17:15:21.547
> 
> 标签：java, android, android-canvas

我想我的问题很简单。

我想在触摸它时立即在画布上画一个点。点将被绘制到我触摸的位置。接下来我想在屏幕上绘制另一个点，但不是在第一个点的位置。意味着我想防止在另一个图像上绘制图像。

我试图用以下代码归档：

活动课

```
 public class Draw extends Activity {
    DrawView drawView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Set full screen view
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                                         WindowManager.LayoutParams.FLAG_FULLSCREEN);
        requestWindowFeature(Window.FEATURE_NO_TITLE);

        drawView = new DrawView(this);
        setContentView(drawView);
        drawView.requestFocus();
    }
} 
```

帆布类

```
 public class DrawView extends View implements OnTouchListener {
    private static final String TAG = "DrawView";

    List<Point> points = new ArrayList<Point>();
    Vector<Bitmap> bitmaps = new Vector<Bitmap>();
    Paint paint = new Paint();

    public DrawView(Context context) {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);

        this.setOnTouchListener(this);
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawColor(Color.WHITE);
        for (Point point : points) {
            canvas.drawBitmap(bitmaps.get(point.i), point.x, point.y, paint);
        }
    }

    public boolean onTouch(View view, MotionEvent event) {
        Log.d("Touch","Touch");
        Log.d("Points", "" + points.size());
        Log.d("Bitmaps", "" + bitmaps.size());

        int i = 0;
        for (Point point : points) {
            int height = bitmaps.get(i).getHeight();
            int width = bitmaps.get(i).getWidth();
            //Log.d("dimensions", height + ", " + width);

            for (int x = 0; x <= width; x++) {
                if (Math.floor(point.x + x) == Math.floor(event.getX())) {
                    points.get(i).isTaken = true;
                    Log.d("isTakenX", "" + point.isTaken);
                    break;
                }
                for (int y = 0; y <= height; y++) {
                    if (Math.floor(point.y + y) == Math.floor(event.getY())) {
                        points.get(i).isTaken = true;
                        Log.d("isTakenY", "" + point.isTaken);
                        break;
                    }
                }
            }
            i++;
        }
        if (event.getAction() == MotionEvent.ACTION_DOWN) {
            Log.d("EventDown","DOWN");
            boolean isTaken = false;
            for (Point point : points) {
                if (point.isTaken) {
                    isTaken = true;
                }
            }
            if (!isTaken) {
                bitmaps.add(BitmapFactory.decodeResource(getResources(), R.drawable.greenstar));
                Point point = new Point();
                point.x = event.getX();
                point.y = event.getY();
                point.i = bitmaps.size() - 1;
                points.add(point);
                //Log.d("pointClick",point.toString());
                invalidate();
                return true;
            }
        }
        return false ;
    }
}

    class Point {
        float x, y;
        int i;
        boolean isTaken = false;

        @Override
        public String toString() {
            return i + ": " + x + ", " + y;
        }
    } 
```

在 onTouch 方法中，您可以看到我如何确定我不想过度绘制的图像的位置。我将所有图像及其绘制的点保存到列表中，以便能够修改它们。接下来，我检查图像在屏幕上占用了多少空间，以及我是否只是单击了该空间。

但是，在将第一张图像绘制到画布上后，我无法再绘制另一张图像。似乎程序卡在“isTaken”上。可能我关于如何检查空间是否被占用的对数是错误的。但是，无法弄清楚出了什么问题。

你有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:06:10.583

好的几点。一个逻辑错误和几项改进。（代码和想法）

第一：当您使用`foreach`构造时，使用循环中的变量（例如点）从您正在循环的列表中访问实例。所以`points.get(i)`用一个简单的`point`.

第二：因为你有圆圈，所以你不必检查点是否在矩形中（我想这就是你想要实现的）。检查两点中心的距离（已经绘制的和要绘制的新点）是否足够大。为此使用毕达哥拉斯方程 (c^2 = a^2 * b^2)。

第三（实际错误）：您两个 for 循环的逻辑是错误的，您分别处理 x 和 y 但您必须一起检查它们。你不需要循环来实现你想要的。

将您的 for 循环更改为：

```
if(Math.pow(radius*2,2) > Math.pow(event.getX-point.x,2)+Math.pow(event.getY-point.Y, 2))
        point.isTaken = true; 
```

其中radius是绘制圆的半径。如果您有更多问题，请尝试并报告。

# nhibernate - FluentNHibernate AutoMapping 中的忽略属性

> ID：11888592
> 
> 赞同：0
> 
> 时间：2012-08-09T17:15:26.233
> 
> 标签：nhibernate, fluent-nhibernate, automapping

我为每个实体都有一个 BaseClass 和一个具体的类。

例如：

联系基地

接触

Contact 继承 ContactBase。在 Contact 中，我可以覆盖 ContactBase 的属性。现在的问题是，FluentNHibernate 将映射此属性两次。如何避免这种情况来映射具体类中的属性并覆盖基类中的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:11:08.947

在不了解您的模型和映射尝试的情况下......也许[这篇文章](https://stackoverflow.com/questions/11693497/fluent-nhibernate-ignore-interfaces-abstract-classes-during-buildschema-or-upda)可能有用。问题似乎不同，但解决方案可能相同。

# c - 忽略 C 中的返回值

> ID：11888594
> 
> 赞同：49
> 
> 时间：2012-08-09T17:15:27.630
> 
> 标签：c, coding-style, return-value, lint

最近，我开始使用 lint 进行静态代码分析。我有时收到的警告之一是关于这个问题。例如，假设我有以下功能：

```
uint32_t foo( void ); 
```

假设我故意忽略了函数的返回值。为了使警告消失，可以写

```
(void) foo(); 
```

我的问题是，编写这样的代码的“正确”方式是什么，我应该像往常一样继续，因为编译器不会抱怨它，还是应该使用 void 来清楚地说明，所以其他代码维护者会知道我故意忽略了返回值。

当我查看这样的代码（带有 void ）时，我觉得它看起来很奇怪......

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-08-09T17:24:31.253

常见的方法是直接调用`foo();`而不转换为`(void)`.

从来不忽略`printf()`' 的返回值的人，是第一块石头。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-22T02:11:11.193

I personally like the "unused" warnings, but on occasion there are instances where I have to ignore them (e.g., the `write()` to user, or `fscanf(...,"%*s\n")` or `strtol()` where the return value is unimportant and I just want the side effect of [maybe] moving the file pointer along.)

With gcc 4.6, it's getting quite tricky.

*   Casting to `(void)` no longer works.
*   Re-writing functions (especially variadic) is tedious and clumsy.
*   `{ssize_t ignore; ignore=write(...);}` throws up another warning (assigned-not-used).
*   `write(...)+1` throws up yet another warning (computed-value-not-used).

The only good (if ugly) way to suppress these is to convert the return value into something that the compiler agrees that you can ignore.

E.g., `(void)(write(...)+1)`.

This is apparently progress. (And `+0` does not work, BTW.)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-11-11T00:12:48.803

使用 Clang 和 GCC 编译器执行此操作的一种方法是使用`pragma`：

```
 /* ... */

#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wunused-result" 

    foo(); /* this specific unused-result warning gets ignored during compilation */

#pragma GCC diagnostic pop 

    /* ... */ 
```

-组合包装了指令`push`，以便可以在代码的其他地方触发警告。以后阅读您的源代码的任何人都应该更容易看到此代码块的作用。`pop``ignored`

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-05-07T11:25:40.387

指示未使用结果的一种稍微“漂亮”的方式是：

```
/**
 * Wrapping your function call with ignore_result makes it more clear to
 * readers, compilers and linters that you are, in fact, ignoring the
 * function's return value on purpose.
 */
static inline void ignore_result(long long int unused_result) {
    (void) unused_result;
}

...

ignore_result(foo()); 
```

随着`C++`，这可以扩展到：

```
template<typename T>
inline void ignore_result(const T & /* unused result */) {} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-08-09T17:28:36.650

为了使静态代码检查器有用，它还应该报告被忽略的返回值，这通常会导致难以跟踪错误 - 或丢失错误处理。

因此，您应该保留`(void)`或停用对`printf`. 现在您有几个选项可以以可读的方式执行此操作。我用来将函数包装在一个新函数中，例如

```
void printf_unchecked(const char* format, ...) 
```

不那么好的演员发生的地方。由于可变参数，在这种情况下使用预处理器宏可能更实用......

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-06-23T05:02:54.650

我喜欢用标志编译我的代码：

```
$gcc prog1.c -o prog1.x -Wall -Wextra -ansi -pedantic-errors -g -O0 -DDEBUG=1 
```

并且为了避免`-Wunused-result`我不喜欢添加另一个标志的想法：（`-Wno-unused-result`如果你这样做，那就是一个解决方案）。

我曾经`(void)`对某些函数进行转换（不是`printf`或其他著名的，因为编译器不会警告它们，只是那些奇怪的）。现在投射到`(void)`不再起作用（GCC 4.7.2）

有趣的夹板建议：

```
Result returned by function call is not used. If this is intended,
can cast result to (void) to eliminate message. (Use -retvalother to
inhibit warning) 
```

但这不再是解决方案。Splint 需要有关此问题的更新。

因此，要以非常兼容的方式消除警告，这里有一个很好的方法`MACRO`：

```
/** Turn off -Wunused-result for a specific function call */
#define igr(M) if(1==((long)M)){;} 
```

并这样称呼它：

```
igr(PL_get_chars(t, &s, CVT_VARIABLE)); 
```

它看起来很干净，任何编译器都会消除代码。下面是我喜欢的编辑器的图片`vi`：左窗口，没有`igr()`；中间窗口，使用`igr()`; 右侧窗口，来源。

![在此处输入图像描述](../Images/169b4cf6511daccdd3924dcf5f57a70b.png)

你可以看到，它完全一样，一个完全无害的代码让 C 做 gcc 不允许做的事情：忽略返回码。

比较`1==...`是必要的，只是为了避免这个条件为 no 的夹板警告`BOOL`。GCC 不在乎。根据功能，您可能会收到`cast`警告。我用这个 MACRO 做了一个忽略 a 的测试`double`，这很好，但不知何故我并不完全相信。特别是如果函数返回一个指针或更复杂的东西。

在这种情况下，您还需要：

```
#define pigr(M) if(NULL==((void *)M)){;} 
```

最后一件事：`{;}`由于警告，这是必要的`-Wempty-body`（建议在“if”语句中用大括号括住空主体）。

并且（现在是最后一件事）`;`函数调用之后不是（严格）必要的，而是它的好习惯。使您的代码行更加同质，所有代码行都以`;`. （翻译成`NOP`助记词，优化后消失）。

* * *

运行编译器不会给出警告或错误。运行`splint`给出：

```
$ splint ./teste.c -I/usr/lib/swi-prolog/include/ -strict-lib
Splint 3.1.2 --- 20 Feb 2009

Finished checking --- no warnings 
```

* * *

另请参阅[此答案](https://stackoverflow.com/a/42757205/670521)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-09-21T14:03:52.477

gnulib 有这个： [http ://git.savannah.gnu.org/cgit/gnulib.git/tree/lib/ignore-value.h](http://git.savannah.gnu.org/cgit/gnulib.git/tree/lib/ignore-value.h)

```
/* Normally casting an expression to void discards its value, but GCC
   versions 3.4 and newer have __attribute__ ((__warn_unused_result__))
   which may cause unwanted diagnostics in that case.  Use __typeof__
   and __extension__ to work around the problem, if the workaround is
   known to be needed.  */
#if 3 < __GNUC__ + (4 <= __GNUC_MINOR__)
# define ignore_value(x) \
    (__extension__ ({ __typeof__ (x) __x = (x); (void) __x; }))
#else
# define ignore_value(x) ((void) (x))
#endif 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-09T17:43:02.103

通常没有太多你想忽略的函数的值。*例如， Splint*允许添加一个特殊的注释，让它知道某个特定函数的返回值*可能会*被忽略。不幸的是，这实际上禁用了与该特定函数相关的所有“忽略返回值”警告。

以下是*Splint-clean*程序的示例：

```
#include <stdio.h>

FILE /*@alt void@*/ *fopen(const char *path, const char *mode);

static int /*@alt void@*/ test(void)
{
   printf( "test called\n" );

   fopen( "test", "a" );

   return 0;
}

int main(void)
{  
   test();

   return 0;
} 
```

不愉快的部分是您需要在某处带有注释的系统函数中添加一个额外的原型。

顺便说一句，默认情况下，*Splint*不会抱怨`printf`未使用的其他一些 libc 函数的返回值。但是，可以激活更严格的模式。

LINT 允许类似的东西，但我从未使用过它。这是文档所说的。

> LINT 允许您通过使用类似于 C 预处理器的 #directives 的指令来标记具有可选返回值的函数。
> 
> #pragma optresult
> 
> 可以直接放在返回可选结果的函数定义之前。LINT 然后识别出这个函数返回一个可以忽略的结果；如果忽略结果，LINT 不会给出错误消息。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-03-21T16:54:25.890

其他解决方案是实际使用一个值。然后您可以使用宏删除`unused variable`警告。

```
#define _unused(x) ((void)(x)) 
```

然后在您的示例中，您将拥有：

```
val = foo();
_unused(val); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-08-09T17:20:55.360

在某些情况下编写忽略返回值的代码是完全合法和可接受的。下面的程序几乎没有理由检查 printf() 的返回值。

```
int main(void) {
  printf("Hello world\n");
  return 0;
} 
```

# python - Python pandas 部分折叠二维矩阵

> ID：11888599
> 
> 赞同：2
> 
> 时间：2012-08-09T17:15:40.833
> 
> 标签：python, grouping, pivot-table, pandas, crosstab

我想部分“折叠”一个`DataFrame`/matrix 并通过对压缩值求和来保持结构完整。例如，我有这个：

```
CHROM     POS     GENE     DESC     JOE      FRED   BILLY    SUSAN    TONY
10        1442    LOXL4    bad      1        0      0        1        0
10        335     LOXL4    bad      1        0      0        0        0
10        3438    LOXL4    good     0        0      1        0        0
10        4819    PYROXD2  bad      0        1      0        0        0
10        4829    PYROXD2  bad      0        1      0        1        0
10        9851    HPS1     good     1        0      0        0        0 
```

前 4 列是描述符，后 4 列是人员/观察。最终目标是计算每人每个基因的“好”和“坏”观察总数。因此，我想要这个：

```
GENE     DESC     JOE      FRED   BILLY    SUSAN    TONY
LOXL4    bad      2        0      0        1        0
LOXL4    good     0        0      1        0        0
PYROXD2  bad      0        2      0        1        0
HPS1     good     1        0      0        0        0 
```

以下代码折叠了所有单独的观察结果（Joe、Fred 等），我怎样才能将它们分开？我还希望足够灵活，以便将来容纳更多人（保持相同的 4 个描述符列）

```
mytable.groupby(['GENE','DESC']).size() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:26:24.697

只需使用 groupby 对象的聚合方法：

```
In [156]: df
Out[156]: 
   CHROM   POS     GENE  DESC  JOE  FRED  BILLY  SUSAN  TONY
0     10  1442    LOXL4   bad    1     0      0      1     0
1     10   335    LOXL4   bad    1     0      0      0     0
2     10  3438    LOXL4  good    0     0      1      0     0
3     10  4819  PYROXD2   bad    0     1      0      0     0
4     10  4829  PYROXD2   bad    0     1      0      1     0
5     10  9851     HPS1  good    1     0      0      0     0

In [157]: grouped = df.groupby(['GENE', 'DESC'])

In [158]: grouped.agg(np.sum) # agg is a shortcut for aggregate
Out[158]: 
              CHROM   POS  JOE  FRED  BILLY  SUSAN  TONY
GENE    DESC                                            
HPS1    good     10  9851    1     0      0      0     0
LOXL4   bad      20  1777    2     0      0      1     0
        good     10  3438    0     0      1      0     0
PYROXD2 bad      20  9648    0     2      0      1     0 
```

正如 Daniel Velkow 在评论中提到的那样， groupby 对象具有一些用于简单聚合的“内置”方法，例如`sum`, `mean`, ... （类似于`ufuncs`numpy 中的方法，可用作 numpy 数组的方法）。所以最后一步可以进一步简化为

```
In [159]: grouped.sum()
Out[159]: 
              CHROM   POS  JOE  FRED  BILLY  SUSAN  TONY
GENE    DESC                                            
HPS1    good     10  9851    1     0      0      0     0
LOXL4   bad      20  1777    2     0      0      1     0
        good     10  3438    0     0      1      0     0
PYROXD2 bad      20  9648    0     2      0      1     0 
```

如果您想对每一列进行不同的操作，根据[文档](http://pandas.sourceforge.net/groupby.html#applying-different-functions-to-dataframe-columns)，您可以将 a 传递`dict`给`aggregate`.

但是，我发现无法为单个列指定函数并为其他列使用默认值。所以一种方法是定义一个自定义聚合函数：

```
def custom_agg(s, default=np.sum, other={}):
    if s.name in other.keys():
        return other[s.name](s)
    else:
        return default(s) 
```

而不是通过将函数和参数传递给来应用它`agg`：

```
In [59]: grouped.agg(custom_agg, default=np.sum, other={'CHROM': np.mean})
Out[59]: 
              CHROM   POS  JOE  FRED  BILLY  SUSAN  TONY
GENE    DESC                                            
HPS1    good     10  9851    1     0      0      0     0
LOXL4   bad      10  1777    2     0      0      1     0
        good     10  3438    0     0      1      0     0
PYROXD2 bad      10  9648    0     2      0      1     0 
```

# c# - 在应用程序变量中存储用户详细信息

> ID：11888603
> 
> 赞同：2
> 
> 时间：2012-08-09T17:15:48.543
> 
> 标签：c#, asp.net

如何在应用程序变量中存储大约 100 个用户详细信息（用户名）？我知道如何使用会话，但我不知道如何使用应用程序变量以及如何存储在 global.asax 文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:19:29.463

使用 Application 绝对像使用 Session。但是这个值是为所有用户共享的。

**global.asax 中的**更新：****

 **```
void Application_Start(object sender, EventArgs e)
{
    var userList = new List<string>();
    Application["UserList"] = userList;
}
void Session_Start(object sender, EventArgs e)
{
    var userName = Membership.GetUser().UserName;

    List<string> userList;
    if(Application["UserList"]!=null)
    {
        userList = (List<string>)Application["UserList"];
    }
    else
        userList = new List<string>();
    userList.Add(userName);
    Application["UserList"] = userList;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:17:49.537

```
var users = new List<string>(){
    "mary", "bob"
};
HttpContext.Current.Application["users"] = users; 
```**

# mongodb - MongoDB 事务和索引

> ID：11888604
> 
> 赞同：2
> 
> 时间：2012-08-09T17:15:49.420
> 
> 标签：mongodb

我对 MongoDB 比较陌生，并且在尝试实现受这种技术启发的事务：

[http://cookbook.mongodb.org/patterns/perform-two-phase-commits/](http://cookbook.mongodb.org/patterns/perform-two-phase-commits/)

我正在考虑如何阻止给定源/目标帐户的同时交易。例如，我可以通过将源声明为唯一索引来阻止同一源上的同时事务：

```
transactionsCollection.ensureIndex({"source":1}, {unique: true});
var newDoc = {source: sourceID, destination: destinationID, 
              amount: 100, state:"pending"}
transactionsCollection.save(newDoc, {safe:true}, function(error, t) {
    if (error.name == "MongoError" && error.code == 11001)
        // duplicate index, so I'm locked out
} 
```

但是，如果源或目标已经在事务表中（作为源或目标），我真正想要的是被锁定。

所以我的问题是是否有可能以允许上述方式的方式设置索引，或者如果没有其他方式来实现这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:19:53.453

在记录内的数组（`tags`下面）上使用唯一索引应该可以完成这个技巧。例子：

```
db.test.save({ name: 'one', tags: [1, 2] });
db.test.save({ name: 'two', tags: [3, 4] });
db.test.ensureIndex({ tags: 1 }, {unique: 1});

db.test.save({ name: 'three', tags: [4, 5] });
E11000 duplicate key error index: test.test.$tags_1  dup key: { : 4 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:27:53.033

要实际放置一个确实回答了您将在评论中看到的问题的答案，我建议在子文档上放置一个唯一索引，以便文档看起来像：

```
{
    _id:{},
    accounts: [1,2],
    source: 1,
    destination: 2
} 
```

在帐户字段上放置唯一索引将在帐户 1 和帐户 2 上生成任何未决交易的锁定，以便停止进一步的交易，直到完成。因此，这意味着如果存在待处理的事务，那么无论源还是目标是 1 还是 2，它都会退出。

但是，在某些情况下，您无法保证子文档的顺序，因此对于像这样的整体交易，我不会使用子文档来判断交易的方向，例如：

```
dest_source: [1,2] 
```

为了表示帐户 1 正在支付帐户 2，因为此索引的顺序可能会随着您保存的方式而改变，因此我将仅使用子文档来创建一个索引类型，该索引类型在使用`source`and`destination`字段实际时考虑索引内的排列了解交易的方向，因为即使文档更改顺序，您仍然可以通过命名字段了解方向。

我相信这是 OP 真正想要的。

# windows - 在 Windows 上从 WebStorm 编译 Coffeescript

> ID：11888605
> 
> 赞同：0
> 
> 时间：2012-08-09T17:15:59.247
> 
> 标签：windows, coffeescript, webstorm

我知道还有其他一些与此相关的问题和答案，但我没有找到任何特定于我的问题的东西。

平台：Windows/nodejs/coffeescript/WebStorm

我已经能够通过外部工具使用适当的参数调用 coffee.cmd 来设置 Coffeescript 编译。但是，并非所有输出最终都显示在“运行”窗口中。例如，如果有解析错误并且编译失败，它会默默地这样做。

我希望能够在 WebStorm 中按下热键并编译我的 CoffeeScript，而不是保持打开控制台窗口来执行此操作。

有什么方法可以将语法错误转发到“运行”窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:41:03.297

Webstorm 有一个用于 coffescript 的内联 lint。因此，您可以在代码窗口中看到带下划线的错误。

WebStorm 的 CoffeeScript 编译器设置 [http://zsitro.com/coffeescript-compiler-setup-for-webstorm/](http://zsitro.com/coffeescript-compiler-setup-for-webstorm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T00:24:41.043

显然这是 WebStorm 和 StdErr 的问题，并且已作为错误提交。请参阅[http://youtrack.jetbrains.com/issue/IDEA-90129](http://youtrack.jetbrains.com/issue/IDEA-90129)

# .net - 如何找出正在调试我的 .NET 应用程序的调试器？

> ID：11888607
> 
> 赞同：5
> 
> 时间：2012-08-09T17:16:00.573
> 
> 标签：.net, debugging, windbg, visual-studio-debugging

我已经知道如何`Debugger.IsAttached`确定我的应用程序当前是否正在运行时进行调试。如何确定更多关于调试器本身的信息？

例如，如何区分从 Visual Studio 调试的应用程序和由 WinDbg 调试的应用程序？

在我的场景中，应用程序不是从 Visual Studio 启动的。调试器可以附加到已经运行的进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:06:16.277

我能想到的一种方法是枚举机器上的现有进程，然后枚举每个进程的句柄。因此，如果您发现 WinDbg.exe 实例正在运行并且它具有您的进程的句柄，那么您很可能正在被 WinDbg.exe 调试。

请记住，尽管调试器可能已“非侵入式”附加，因此您实际上可能附加了多个调试器。或者您可能正在远程调试，或者通过串行端口或 USB 连接的内核调试器。

有关调试器的大量有用信息，您可以查看[反调试技术](http://pferrie.host22.com/papers/antidebug.pdf)。

# extjs - 创建商店时 extjs 4 me.model 未定义错误

> ID：11888610
> 
> 赞同：-3
> 
> 时间：2012-08-09T17:16:09.797
> 
> 标签：extjs, model, extjs4, store

尝试创建这个非常简单的存储时出现错误。我想知道是什么原因造成的以及如何解决。任何帮助表示赞赏：

me.model 未定义

```
var sortAvailable = Ext.create('Ext.data.Store', {
  model: 'model_Im_Using',
  storeId:'sortAvailable'

}); 
```

下面是模型的代码，虽然我不认为这是问题的一部分

```
Ext.define('APPNAME.model.model_Im_Using', {
  extend: 'Ext.data.Model',
  modelID: 'BrField',

  fields:[
    {name:'displayName', type:'string'},
    {name:'databaseName', type:'string'}
  ]

}); 
```

该模型在 model/model_Im_using.js 下的自己的文件中定义我在同一个文件中使用了这个模型和一些树存储

我确定我遗漏了一些明显的东西。该商店旨在仅将模型实例放入其中/从本地获取。与服务器端没有通信。

编辑：错误所在的行是：

me.setProxy(me.proxy || me.model.getProxy());

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:39:00.993

1.  如果使用命名空间，则必须使用命名空间。你不能混搭。更改`store.model`为`APPNAME.model.model_Im_Using`，您应该没问题。

2.  什么是`model.modelID?`

3.  您应该遵循 Sencha[命名约定](http://docs.sencha.com/ext-js/4-1/#!/guide/class_system)。

这是一个使用正确命名空间的示例，而没有命名空间则无法工作：

> [http://jsfiddle.net/UMXNZ/](http://jsfiddle.net/UMXNZ/)

```
Ext.define('APPNAME.model.model_Im_Using', {
  extend: 'Ext.data.Model',
  modelID: 'BrField',

  fields:[
    {name:'displayName', type:'string'},
    {name:'databaseName', type:'string'}
  ]

});

var sortAvailable = Ext.create('Ext.data.Store', {
  model: 'APPNAME.model.model_Im_Using',
  storeId:'sortAvailable'

});
console.log('ok');

var sortAvailable2 = Ext.create('Ext.data.Store', {
  model: 'model_Im_Using',
  storeId:'sortAvailable'

});
console.log('ok'); 
```

使用短名称时的错误消息是：

> 没有模型定义的商店。您可能输入了错误的型号名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T15:02:37.313

对于我的 mvc 项目（使用 extjs 4.2），我遇到了同样的问题，但这不是因为我输入错误的模型名称。

您还必须在控制器的开头添加一个要求：

```
 requires:
    [
        'dashboard.model.Column' // > my model
    ], 
```

然后您可以在控制器的新功能中以编程方式创建一个新商店，如下所示：

```
 Ext.create('Ext.data.Store',{
             model:'dashboard.model.Column',
             storeId:'myStoreId'
        }); 
```

也许它可以帮助一些人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:34:49.103

将下面的配置行添加到商店处理了错误

```
proxy: {type: 'memory'} 
```

# ios - 在横向模式下锁定 Ipad 应用程序

> ID：11888612
> 
> 赞同：1
> 
> 时间：2012-08-09T17:16:14.637
> 
> 标签：ios, ipad

我对iOS开发很陌生，所以请多多包涵。

我正在创建一个我想严格在横向模式下使用的应用程序。

我已经编辑了 .plist 文件以包含这两个键：

初始界面方向：横向（右主页按钮）和支持的界面方向：横向（右主页按钮）

我在 ViewController.m 中添加了以下代码：

```
 }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
      return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    } 
```

该应用程序当前在模拟器中按应有的方式启动。它以横向模式启动，一切正常。但是，当按下将我带到另一个“场景”的按钮时，我的问题就出现了。横向模式不会贯穿其余应用程序。

所以我的问题是，如何在整个应用程序中强制使用横向模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:19:18.013

你想`shouldAutorotateToInterfaceOrientation:`在每个 ViewController 中都有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:21:04.650

我遇到了同样的问题，您需要做的是将此代码放入您拥有的每个 ViewController 中。

# plone - GetTabObject 未定义

> ID：11888619
> 
> 赞同：1
> 
> 时间：2012-08-09T17:16:44.607
> 
> 标签：plone

我正在尝试自定义 plone.global.sections (webcouturier.dropdownmenu.browser.interfaces.IDropdownSpecific)，即使当我点击自定义按钮时我没有对 pt 文件进行任何更改，我也会收到此错误：GetTabObject 未定义：

```
Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module Shared.DC.Scripts.Bindings, line 322, in __call__
  Module Shared.DC.Scripts.Bindings, line 359, in _bindAndExec
  Module Products.PageTemplates.ZopePageTemplate, line 334, in _exec
  Module Products.PageTemplates.ZopePageTemplate, line 431, in pt_render
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 888, in do_useMacro
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 852, in do_condition
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 531, in do_optTag_tal
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 742, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 218, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: file:/usr/local/Plone/buildout-cache/eggs/plonetheme.sunburst-1.1.5-py2.6.egg/plonetheme/sunburst/skins/sunburst_templates/main_template.pt
   - Line 68, Column 12
   - Expression: <StringExpr u'plone.portaltop'>
   - Names:
      {'container': <PloneSite at /asianam/asianam>,
       'context': <ATDocument at /asianam/asianam/front-page>,
       'default': <object object at 0x2b93133d8b20>,
       'here': <ATDocument at /asianam/asianam/front-page>,
       'loop': {},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x1ff0f578>,
       'request': <HTTPRequest, URL=http://plone4d.sscnet.ucla.edu:8080/asianam/asianam/front-page/hide_title>,
       'root': <Application at >,
       'template': <ZopePageTemplate at /asianam/asianam/hide_title used for /asianam/asianam/front-page>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'elaine'>}
  Module zope.contentprovider.tales, line 80, in __call__
  Module plone.app.viewletmanager.manager, line 154, in render
  Module plone.app.viewletmanager.manager, line 85, in render
  Module zope.browserpage.simpleviewclass, line 44, in __call__
  Module Products.Five.browser.pagetemplatefile, line 125, in __call__
  Module Products.Five.browser.pagetemplatefile, line 59, in __call__
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 531, in do_optTag_tal
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 742, in do_insertStructure_tal
  Module Products.PageTemplates.Expressions, line 218, in evaluateStructure
  Module zope.tales.tales, line 696, in evaluate
   - URL: /usr/local/Plone/buildout-cache/eggs/plone.app.layout-2.1.12-py2.6.egg/plone/app/layout/viewlets/portal_header.pt
   - Line 2, Column 4
   - Expression: <StringExpr u'plone.portalheader'>
   - Names:
      {'args': (),
       'container': <ATDocument at /asianam/asianam/front-page>,
       'context': <ATDocument at /asianam/asianam/front-page>,
       'default': <object object at 0x2b93133d8b20>,
       'here': <ATDocument at /asianam/asianam/front-page>,
       'loop': {},
       'nothing': None,
       'options': {},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x23374f70>,
       'request': <HTTPRequest, URL=http://plone4d.sscnet.ucla.edu:8080/asianam/asianam/front-page/hide_title>,
       'root': <Application at >,
       'template': <Products.Five.browser.pagetemplatefile.ViewPageTemplateFile object at 0x110a3c10>,
       'traverse_subpath': [],
       'user': <PropertiedUser 'elaine'>,
       'view': <Products.Five.viewlet.viewlet.SimpleViewletClass from /usr/local/Plone/buildout-cache/eggs/plone.app.layout-2.1.12-py2.6.egg/plone/app/layout/viewlets/portal_header.pt object at 0x2333cd90>,
       'views': <Products.Five.browser.pagetemplatefile.ViewMapper object at 0x21d56350>}
  Module zope.contentprovider.tales, line 80, in __call__
  Module plone.app.viewletmanager.manager, line 154, in render
  Module plone.app.viewletmanager.manager, line 85, in render
  Module five.customerize.zpt, line 143, in render
  Module Products.PageTemplates.ZopePageTemplate, line 334, in _exec
  Module Products.PageTemplates.ZopePageTemplate, line 431, in pt_render
  Module Products.PageTemplates.PageTemplate, line 79, in pt_render
  Module zope.pagetemplate.pagetemplate, line 113, in pt_render
  Module zope.tal.talinterpreter, line 271, in __call__
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 852, in do_condition
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 821, in do_loop_tal
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 533, in do_optTag_tal
  Module zope.tal.talinterpreter, line 518, in do_optTag
  Module zope.tal.talinterpreter, line 513, in no_tag
  Module zope.tal.talinterpreter, line 343, in interpret
  Module zope.tal.talinterpreter, line 583, in do_setLocal_tal
  Module zope.tales.tales, line 696, in evaluate
   - URL: /asianam/asianam/portal_view_customizations/zope.interface.interface-plone.global_sections
   - Line 9, Column 9
   - Expression: <PythonExpr view.getTabObject(tabUrl = tab['url'], tabPath = tab.get('path'))>
   - Names:
      {'container': <ViewTemplateContainer at /asianam/asianam/portal_view_customizations>,
       'context': <ATDocument at /asianam/asianam/front-page>,
       'default': <object object at 0x2b93133d8b20>,
       'here': <ATDocument at /asianam/asianam/front-page>,
       'loop': {u'tab': <Products.PageTemplates.Expressions.PathIterator object at 0x23350310>},
       'nothing': None,
       'options': {'args': ()},
       'repeat': <Products.PageTemplates.Expressions.SafeMapping object at 0x23351af8>,
       'request': <HTTPRequest, URL=http://plone4d.sscnet.ucla.edu:8080/asianam/asianam/front-page/hide_title>,
       'root': <Application at >,
       'template': <TTWViewTemplate at /asianam/asianam/portal_view_customizations/zope.interface.interface-plone.global_sections used for /asianam/asianam/front-page>,
       'user': <PropertiedUser 'elaine'>,
       'view': <five.customerize.zpt.TTWViewlet object at 0x23350050>}
  Module Products.PageTemplates.ZRPythonExpr, line 48, in __call__
   - __traceback_info__: view.getTabObject(tabUrl = tab['url'], tabPath = tab.get('path'))
  Module PythonExpr, line 1, in <expression>
AttributeError: 'TTWViewlet' object has no attribute 'getTabObject' 
```

我读过`main_template.pt`Plone 4.1 中不再使用全局定义（），但我不知道如何将定义添加到 pt 文件中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:30:49.363

这只是我的开发服务器上的一个问题，适用于本地主机和产品，去图

# c++ - C++中的不可中断函数

> ID：11888620
> 
> 赞同：0
> 
> 时间：2012-08-09T17:16:46.330
> 
> 标签：c++, android-ndk

我有几个使用 ioctl 调用通过 SPI 进行异步通信的函数。

这些函数执行速度非常快，因为数据有效负载只有几个字节 - 但是 - 必须不中断计时。

我注意到这些功能有时会在 CPU 服务其他线程时被中断——这最终会破坏异步通信；它改变了时间。

对于这两个功能，我如何指定它们不能被中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:36:59.423

我认为您无法在大多数普通操作系统（如 Windows、OsX、Linux）上使用常规程序来做到这一点。如果可以，那么恶意软件可以通过简单地声明无限循环不可中断来锁定您的机器。在设备驱动程序中可能会执行类似的操作。如果您真的需要这种级别的控制，那么可以使用实时操作系统。

我认为您可以在 Linux 的内核模块中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:34:10.833

禁用所有中断既困难又危险（并且会因内核更新而中断）——除非绝对必要，否则您应该避免这样做。对于 SPI，您应该依赖处理时序和内核配置的驱动程序，如 Android 串行库。

我已经尝试在微控制器上实现协议和时序（当我需要在两组引脚上同时具有不同速度的不同 SPI 时）——即使没有多线程问题，也很难做到完美。所以你真的应该问问自己，我是否应该自己实现低级通信调用。

我意识到这实际上并没有回答你关于如何禁用所有中断的问题，但我觉得它同样解决了你的最终目标。

# c++ - C++ 令人困惑的编译错误

> ID：11888622
> 
> 赞同：0
> 
> 时间：2012-08-09T17:16:48.193
> 
> 标签：c++

下面是我得到的编译错误以及与 em 一起出现的 header/cpp 文件。如果有人有几分钟的时间和更好的眼睛来捕捉我无法捕捉到的东西，我会永远爱他们。这可以追溯到要测试的 a3main.cpp，因此，如果您还需要该文件的参考，请大声告诉我。再次感谢！

```
a3.cpp: In constructor 'disk::disk(int, const char*)': 
a3.cpp:12: error: invalid conversion from 'const char*' to 'char*' 
a3.cpp:12: error:   initializing argument 1 of 'char* strcpy(char*, const char*)' 
a3.cpp: In member function 'void disk::memory(int)': 
a3.cpp:26: error: expected unqualified-id before '=' token 
a3.cpp:28: error: expected primary-expression before '==' token 
a3.cpp: At global scope: 
a3.cpp:37: error: expected initializer before 'mode' 
a3.cpp:42: error: expected initializer before '*' token 
a3.cpp:47: error: expected initializer before 'get_segment' 
```

* * *

```
//a3.cpp
#include <iostream>
#include "disk.h"
#include <iomanip>
#include <cstring>
#include <stdlib.h>
using namespace std;

disk::disk(int num_of_segments, const char* mode)
{
    memory(num_of_segments);
    if(strcmp(mode, "w") || !strcmp(mode, "a"))
        strcpy(mode, mode);

    else
        strcpy(mod, "w");
}   

disk::disk()
{
    memory(20);
    strcpy(mod, "w");
}

void disk::memory(int num)          //private, see header file
{
    segment = new segment[num];
// (nothrow) - page 80 in the text
    if(segment == NULL)
    {
        cerr << "Could not find any data in class ";
        exit(0);
    }
    total = num;
    count = 0;
}

const char* disk::get mode() const
{
    return mode;
}

segment segment* disk::get_all_segment() const
{
    return sgmt;
}

int disk::segment get_segment(int pos) const
{
    segment temp;
    if(pos > 0 && pos < count)
    {
        temp = segment[pos];
    }
    return temp;
}

int disk::get_segment_count() const
{
    return count;
}

disk disk::operator+=(const segment &r)
{
    if(count < total)
    {
        sgmt[count] = r;
        count++;
    }
    return *this;
}

void disk::operator=(const disk &r)
{
    if(*this != &r)
    {
        if(sgmt != NULL)
            delete[] sgmt;
        memory(r.total);
        for(int i=0; i < r.count; i++)
        {
            sgmt[i] = r.sgmt[i];
        }
        count = r.count;
        strcpy(mod, r.mod);
    }
}   

disk::disk(const disk& copy)            //copy constructor
{
    memory(copy.total);
    for(int i=0; i<copy.count; i++)
    {
        sgmt[i] = copy.sgmt[i];
    }
    count = copy.count;
    strcpy(mod, copy.mod);
}

disk::~disk()
{
    if(*sgmt != NULL)
    {
        delete[] sgmt;
    }
}

//disk.h
#include "segment.h"
#include <iomanip>
#include <cstring> class disk {
    private:
        segment *sgmt;
        char mod[3];
        int count, total;
        void memory(int);
    public:
        disk(int, const char *);
        disk( );
        const char* get_mode( ) const;
        segment get_segment(int) const;
        int get_segment_count( ) const;
        const segment* get_all_segments( ) const;
        int access(const char [ ]);
        disk operator+=(const segment &);
        void operator=(const disk &);
        disk(const disk &);
        ~disk( ); };

//segment.h
class segment
{
    private:
        char data[SIZE][41];
    public:
        void initialize(const char [][2000], int);
        void initialize();
        int match(const char []);
        void sort();
        void get_word(char [], int);
        int set_word(const char [], int);
        int set_char(int, int, char);
        char get_char(int, int);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:23:39.133

您需要从顶部开始，一一解决错误。

第一个错误是：

```
a3.cpp:12: error: invalid conversion from 'const char*' to 'char*' 
a3.cpp:12: error:   initializing argument 1 of 'char* strcpy(char*, const char*)' 
```

引用的第 12 行是：

```
strcpy(mode, mode); 
```

您声明`mode`为`const char*`并且错误说作为`strcpy`它`char*`的第一个参数。该错误表示转换`const char*`为无效`char*`。所以应该清楚，错误是你不能`mode`作为第一个参数传递给`strcpy`.

`strcpy(mode, mode);`没有意义，也是不允许的。`mode`无法修改，但 strcpy 会修改它。此外，您正试图将其复制到自身之上，如果它有效，它将无济于事。

* * *

AndreyT 对这些最后的错误是正确的；你必须学会​​回去重新阅读他们指向的代码，看看你做错了什么。

`segement`in`segment = new segment[num];`是一个类型名称，在这种情况下，您不能像这样分配给它，也不能像 in 那样获取它的值`if(segment == NULL)`。你可能的意思是`sgmt`。

在`const char* disk::get mode() const`你忘记了一个下划线。

在`segment segment* disk::get_all_segment() const`并且`int disk::segment get_segment(int pos) const`你有一个额外`segment`的s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:22:29.993

您正在传递`mode`给`strcpy`但`const`修饰符 on`mode`阻止内容被修改。除非在某处的头文件中定义，否则您还有几个拼写错误（`mod`vs. `mode`） 。`mod`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:25:40.113

第一个参数（模式）`strcpy`应该是 type `char*`，而不是`const char*`

`segment = new segment[num];`无效，因为`segment`它是一种类型。您需要特定段的名称。尝试类似：

`segment* my_seg = new segment[num];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:32:18.820

在第 12 行，您传递`mode`了 a`const char*`作为 的第一个参数`strcpy()`，它需要 a `char*`。`strcpy()`将修改指向的内存，因此您不能传递 const 指针。顺便说一句，这条线几乎肯定是错误的，你为什么要复制`mode`到它自己？这是无手术。你可能的意思是`strcpy(mod, mode)`。

在第 26 和 28 行，您将`segment`其用作变量，但它是一个类型 ( `class segment`)。你可能的意思是`sgmt`。

在第 37 行，您写的是`get mode()`（带*空格*）而不是`get_mode()`（带*下划线*_）。

在第 42 行，你写了`segment segment* disk::get_all_segment() const`而不是`const segment* disk::get_all_segment() const`.

在第 47 行你写了`int disk::segment get_segment(int pos) const`. 应该是`segment disk::get_segment(int pos) const`。

一般来说，签名是

```
returned_value class_name::function_name(parameters) const 
```

# flash - FlashTable 不适用于 Flash Player 9

> ID：11888627
> 
> 赞同：0
> 
> 时间：2012-08-09T17:17:10.300
> 
> 标签：flash, actionscript

我下载了一个flash文件以在我的项目中使用它的html表，表文件中的目标flash player是flash player 6，在我的项目中是flash player 9。

当目标 Flash 播放器高于 6 时，Flash 表文件显示空表

[http://www.flash-db.com/FlashTable/](http://www.flash-db.com/FlashTable/)

下载[http://www.flash-db.com/FlashTable/FlashTable.zip](http://www.flash-db.com/FlashTable/FlashTable.zip)

-请将 Example1.html 重命名为 Table.html 然后运行 ​​FlashTable.swf

# python - Python脚本在创建字典时为字典的每个键敲击，有多个值（300个条目）列表

> ID：11888630
> 
> 赞同：1
> 
> 时间：2012-08-09T17:17:15.643
> 
> 标签：python, dictionary, python-3.x

我是初学者。我编写了一个脚本，它接受 1000 万个条目的输入列表（以 a:b 的形式，其中 a 和 b 是字母数字）。

现在我想从这些条目中创建一个字典。对于很多列表条目，第二部分（冒号之后）很常见。（例如 a:b、f:b、k:b——在这种情况下，我的键是 b，值是列表 [a,f,k]）。

但不知何故，我的剧本被击中了。我可以从日志中看到脚本被触发并且日志大小没有增加。（对于我字典的每个键，都有一个大小在 400 到 500 之间的列表。这可能是个问题吗？）

如果我的输入列表包含较少的条目，我的脚本工作正常。

列表名称匹配

```
print 'match2 list: %s' % match2 # it shows the 10 million entries in form of a:b as expected 
for i in xrange(len(match2)):
    print 'Before Splitted variable : %s' % match2[i] # this print is for information
    templist = re.split(':', '%s' % match2[i])
    print 'Splitted list : %s' % templist # this print is for information
    length3 = len(templist)
    print "Length3 :%d" %length3
    key1 = templist[1]
    value1 = templist[0]
    if example.has_key(key1):
       example[key1].append(value1)
    else:
       example[key1] = value1 
```

请提出您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:18:05.490

I suspect the problem is here:

```
if example.has_key(key1):
   example[key1].append(value1)
else:
   example[key1] = value1 
```

When `example` does not contain `key1`, it creates a new entry for it, whose value is the string `value1`. If example *does* contain `key1`, it attempts to append the string `value1` to whatever is already there. However, this does not make sense. You can't use `append` to append two strings.

You probably want:

```
if example.has_key(key1):
   example[key1].append(value1)
else:
   example[key1] = [value1] #the value is a list containing one string 
```

# python - 右键单击 QTableWidget 获取标题列

> ID：11888635
> 
> 赞同：6
> 
> 时间：2012-08-09T17:17:40.040
> 
> 标签：python, qt, pyqt, pyqt4, qtablewidget

我有一个 QTableWidget ，其中有许多列只是复选框（有些不是）。我正在尝试实现一项功能，以便当用户右键单击与“仅复选框”列相关的标题项时，会显示“取消选中全部”或“全部选中”的选项。

到目前为止，我已经设法`customContextMenu`通过以下信号实现了 a：

```
self.headers = self.tblData.horizontalHeader()
self.headers.setContextMenuPolicy(Qt.CustomContextMenu)
self.headers.customContextMenuRequested.connect(self.show_header_context_menu)
self.headers.setSelectionMode(QAbstractItemView.SingleSelection) 
```

这导致以下上下文菜单调用：

```
def show_header_context_menu(self, position):
    menu = QMenu()
    deselect = menu.addAction("Clear Checked")
    ac = menu.exec_(self.tblData.mapToGlobal(position))
    if ac == deselect:
        pass
        #Actually do stuff here, of course 
```

这会弹出一个上下文菜单，但是我找不到任何方法来获取右键单击的标题的索引，我也试过`self.headers.selectedIndexes()`了，`self.headers.currentIndex()`但这些似乎只与实际的表格选择有关，而不是标题。

一旦我设法获得右键单击的标题索引，我可以轻松地将菜单限制为仅在选择正确的索引时显示（那些只有复选框的列），所以这真的是另外一件事。

我错过了什么？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T00:12:58.277

该`customContextMenuRequested`信号将上下文菜单事件的位置作为`QPoint`. 方便的是，表的标题有一个[logicalIndexAt](http://doc-snapshot.qt-project.org/4.8/qheaderview.html#logicalIndexAt-3)的重载，可以直接利用它，所以你可以简单地做：

```
def show_header_context_menu(self, position):
    column = self.headers.logicalIndexAt(position) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:28:15.037

我看到你正在使用 python，但我认为这应该仍然有效。

尝试创建一个`QHeaderView`派生类并尝试覆盖

```
void QHeaderView::mousePressEvent ( QMouseEvent * e ) 
```

获取右键单击鼠标事件，然后使用

```
int QHeaderView::logicalIndexAt ( int x, int y ) const 
```

获取被右键单击的列的逻辑索引。最后显示您的上下文菜单。

请参阅[http://doc.qt.nokia.com/4.7-snapshot/qheaderview.html](http://doc.qt.nokia.com/4.7-snapshot/qheaderview.html)

# ios - 使用核心图形和使用 CALayer 绘制阴影

> ID：11888636
> 
> 赞同：1
> 
> 时间：2012-08-09T17:17:40.870
> 
> 标签：ios, core-graphics, calayer

据我所知，我们可以使用核心图形`CGContextSetShadowWithColor`来绘制阴影。但是，我们也可以使用 CALayer 来显示阴影。

**问题 ：**

其中2个有什么区别。是否有任何规则来确定我们何时使用核心图形绘制或何时使用 CALayer 来完成工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:11:51.927

我不得不说 using`CoreAnimation`总是优先于`CoreGraphics`，因为它更高级，并且抽象了绘制阴影的低级细节。（它也可以让苹果优化阴影绘制而不损害你的代码语法）。

但是，有时您`drawRect:`无论如何都会覆盖，并且您对阴影有非常特定的用途，而不是整个视图的图层。你可能想`CoreGraphics`在这里使用阴影。

最后一点，`CoreAnimation`渲染时渐变要快得多，相信我的话。我在 上使用它`UITableViewCell`，与使用`CoreGraphics`渐变相比，滚动性能显着提高。[不过，这是有代价的。有点难看啊](https://stackoverflow.com/a/4676479/456434)

# view - 是否可以将 EditorArea 插入到 Eclipse RCP 中的视图中？

> ID：11888637
> 
> 赞同：0
> 
> 时间：2012-08-09T17:17:42.243
> 
> 标签：view, editor, eclipse-rcp

是否可以将 EditorArea 插入到 Eclipse RCP 中的视图中？
我想定义一个限制区域，编辑器可以在其中移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T03:52:36.297

不容易——一般来说，Eclipse 应用程序有“一个”EditorArea。

您可以使用自定义[表示层](http://wiki.eclipse.org/RCP_Custom_Look_and_Feel)将该 EditorArea 放在您的一个视图上，但就是这样。

潜在的（高级）解决方案可能涉及将`EditorPart`实例传递给自定义视图，然后调用该实例以在视图`createPartControl`中呈现编辑器内容，并管理编辑器的任何必要初始化。

由于此编辑器将是视图的子控件，因此您可能还需要对选择/编辑器站点/操作栏/快捷键等进行特殊连接，以便在从视图中运行该编辑器时它们继续工作。

# c - 使程序读取文件的某些部分

> ID：11888642
> 
> 赞同：1
> 
> 时间：2012-08-09T17:17:51.790
> 
> 标签：c, file, sorting

我有一个包含学生姓名和成绩的文件，我想编写一个程序，可以根据用户选择对他们的成绩进行排序（如期中 1、期中 2）。我写了选择部分并打开文件，但我不知道如何让程序只读取文件的某些部分（例如，只有期中 1 年级）并只对它们进行排序。这是我到目前为止所写的；

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
int number;
char name[30];
char surname[30];
int midterm1,midterm2,midterm3;
} Student;

int main()
{
int choice,studentnumber,midterm1,midterm2,midterm3;
char surname;
FILE *cfPtr;

struct student *name;
name = malloc( 10 * sizeof(Student));

if ((cfPtr = fopen("grades.txt", "r")) == NULL)
printf("File cannot be opened.\n");
else {

const int STUDENTSMAX = 100;

Student students[STUDENTSMAX];
int i = 0;

while (!feof(cfPtr))

{
fscanf(cfPtr, "%d%s%s%d%d%d", &students[i].number,  &students[i].name,&students[i].surname, &students[i].midterm1, &students[i].midterm2, &students[i].midterm3);
 printf("%4d%15s%15s%10d%10d%10d\n", students[i].number, students[i].name,students[i].surname, students[i].midterm1, students[i].midterm2, students[i].midterm3);
 i++;
 }

 printf("What would you like to do? \n"
 "1- Sort according to midterm 1\n"
 "2- Sort according to midterm 2\n"
 "3- Sort according to midterm 3\n"
 "4- Exit\n");
  scanf("%d",&choice);

  while (choice != 4);{

  switch (choice) {

       case 1:
            qsort(students,10,sizeof(int),comp);
            for (i=0; i<9; i++)      
   printf("%4d%15s%15s%10d%10d%10d\n", students[i].number,  students[i].name,students[i].surname, students[i].midterm1);

    fclose(cfPtr);
   }

   system("PAUSE"); 
   return 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:45:42.750

鉴于可能是一个有点自由格式的文本文件（基于显示的代码），阅读整个文件（有点像你已经在做的）并且只使用你需要的部分可能是有意义的。如果文本文件具有具有固定偏移量的非常特定的格式，您可以查找文件中的某些位置并读取特定列值，然后查找下一个偏移量并从下一行读取列值。但这可能比它的价值更麻烦，并且不会更有效率（如果有的话）。

话虽如此，要对结果进行排序，您可能仍然需要整个文件。例如，如果您只是读取并排序“期中 1”值，那么结果将只是排序的成绩，没有任何关联的姓名和学号。因此，在不了解目标的更多信息的情况下，您可能会考虑创建一个`struct`可以容纳单行（学号、姓名、姓氏、midterm1 等）的。然后创建一个数组并将每一行读入数组的一个元素。如果您知道预先存在多少行，则可以将数组分配在一个块中，否则您可能需要在增长时重新分配它。

读取整个数组后，您可以根据所需的值进行排序（例如，使用[`qsort`](http://linux.die.net/man/3/qsort).

提到这一点，现有显示的代码存在一些问题/问题：

*   第二个 printf 的格式说明符 (%s) 少于参数。
*   带有“您想做什么”问题的第三个 printf 缺少结束括号。
*   fprintf 不正确；它应该有一个文件句柄作为第一个参数。不过，我怀疑这可能是故意的`printf`？
*   最后一个`while`循环在它的右括号后面有一个无关的分号 (;)，这意味着它有一个空的主体，而不是明显的预期`printf`和`switch`语句。
*   这`switch`句话写得有点奇怪。我认为这是“未完成”的部分。但包括在内`fclose`似乎很奇怪。它可能应该在 main 的末尾`else`。
*   使用`system("PAUSE");`可能不是最好的选择。也许使用`getch`暂停输入会更有意义。

**编辑** 这里是一些附加信息，以回应您要求更多详细信息的评论。这对我来说听起来像是家庭作业，所以仅仅给出答案似乎并不正确。但这是一种方法：

*   使用文件中的 6 个项目定义 a `struct`（基本上放入您当前已定义为局部变量的 6 个变量）。
*   将局部变量（例如`grades`）声明为`pointer`您定义的 to 结构。
*   用于`malloc`分配内存并将其分配给刚刚提到的指针。内存量可能是整个事情中最棘手的部分。的大小参数`malloc`将类似于`numRecs * sizeof( yourstruct )`. 问题是`numRecs`应该是什么。如果这是一项任务，并且您被告知将有多少条记录（最多），那么就使用它。但是，如果它是“未知的”，那么有几种处理方法。一种是只猜测一个数字（例如，100），然后在循环中读取它们时，`realloc`如果超过 100，则使用它们。另一种选择（可能效率较低）是使用两个循环 - 读取它们一次而不存储它们但是只需计算它们，然后分配已知大小并再次读取它们。我会使用 realloc 版本。
*   将局部变量的使用替换为数组（即`malloc`ed）。例如，`studentnumber`您可以使用`grades[arraypos].studentnumber`. 当您阅读它们时，请记下有多少。然后，您可以使用`qsort`对数组进行排序。

**编辑 2**

*   您的结构定义看起来是正确的，只是`FILE *cfPtr;`成员不应该在其中。它仍然应该是一个局部变量。
*   为了便于使用，您可以将结构定义为`typedef struct { ... } Student;`. 这样你就可以在代码中使用`Student`而不是。`struct Student`请注意，我将名称大写（个人偏好的命名使其看起来不像变量名）。
*   对于 malloc，您已经很接近了。但正如所写，它为单个记录分配空间。您将需要这样的东西：（ `name = malloc( 50 * sizeof( struct student ));` 或者`malloc( 50 * sizeof( Student ));`如果您将其更改为使用 typedef。假设从文件中读取的记录不超过 50 条或更少。

# php - 检查字符串中相邻的小写和大写字母？

> ID：11888644
> 
> 赞同：1
> 
> 时间：2012-08-09T17:17:59.213
> 
> 标签：php, mysql, regex

我可以在 PHP 或 MySQL 中使用某种正则表达式/函数来检查彼此相邻的小写和大写字母吗？

我想检测“腹腔镜”和“白内障手术”之间的“y”和“C”。

```
LaparoscopyCataract Surgery 
```

更多示例...

```
TracheostomyThoracotomy
TracheostomyAmniocentesis
Total Knee ReplacementBarium 
```

ETC...

我需要用逗号分解/分隔所有这些类型的实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:26:43.823

`$string = preg_replace("/([a-z])([A-Z])/", "\$1, \$2", $string);`应该这样做

编辑：无论如何为时已晚：p

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:28:01.327

```
preg_replace("/([a-z])([A-Z])/", "$1,$2", $yourString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:27:22.943

我认为

```
preg_replace("/[a-z][A-Z])/", "/1, /2", $str); 
```

可以根据您的要求工作。

# php - 检查数据库中是否存在ID

> ID：11888645
> 
> 赞同：0
> 
> 时间：2012-08-09T17:18:01.163
> 
> 标签：php, mysql

我如何检查 mysql 数据库中是否存在 id，如果存在：创建一个新 id 并再次检查。我有以下代码来创建一个ID：

```
$length = 10;
$id = '';
for ($i = 0; $i < $length; $i++) {
    $id .= chr(rand(ord('0'), ord('9')));
} 
```

要检查 id 是否存在，我使用以下代码：

```
$database->query('SELECT user_id FROM users 
                  WHERE public_id = ':public_id',array(':public_id' => $public_id)');

if($database->count() >= '1') { 
//create a new id 
} else { } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:30:42.410

您尝试做的事情不被视为“最佳实践”，因为（理论上）您可以创建一个无限循环（创建一个随机 ID，然后检查是否存在可能会在每次迭代中“命中”）。

创建唯一 ID 的更好解决方案是将列设置为主键，并在每次新插入时递增。

如果您希望另一列是唯一的，您也可以将该列定义为唯一的，但您不必依赖“随机”字符串。

# php - 在 PHP 中重命名 jpg 文件

> ID：11888649
> 
> 赞同：0
> 
> 时间：2012-08-09T17:18:18.147
> 
> 标签：php

我有一个上传功能，我想检查数据库中是否有重复的文件名。如果有，我想重命名 jpg 以便上传的照片仍会上传。

这是我想出的代码行：

```
$shuffled = "qwertyuiopasdfghjkZxcvbnm";
$shuffled = str_shuffle($shuffled); 
$shuffled = $shuffled.".jpg";
rename($this->filename,$shuffled); 
```

我在这里使用 shuffle 函数以某种方式给出一个随机的新文件名，我尝试使用其他一些步骤，如 preg_replace，但 jpg 文件本身已损坏。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:48:22.183

你的代码是：

```
$shuffled = "qwertyuiopasdfghjkZxcvbnm";
$shuffled = str_shuffle($shuffled); 
$shuffled = $shuffle.".jpg";
rename($this->filename,$shuffled); 
```

第三行看起来应该是 $shuffled = $shuffled.".jpg";

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:21:19.013

用这个：

```
copy($oldfilename,rand(10000000000,99999999999).".jpeg");
unlink($oldfilename); 
```

文件名（不带扩展名）将是大于 10000000000 且小于 99999999999 的数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:21:31.173

新文件名的扩展名在哪里？？？

示例

```
rename("/tmp/tmp_file.txt", "/home/user/login/docs/my_file.txt"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:45:22.823

如果要使用随机文件名，请使用 microtime() 生成随机字符串。一个更好的解决方案是：

```
if(is_file($filename))
{
$filenameSplit = explode('.', $filename);
$i = 1;
while(is_file($filenameSplit[0] . "($i)." . $filenameSplit[1]))
{
$i++;
}
$newFilename = $filenameSplit[0] . "($i)." . $filenameSplit[1];
rename($filename, $newFilename);
} 
```

# ruby-on-rails - 第一次 Capistrano User.have 问题（Net::SSH::Disconnect：连接被远程主机关闭）

> ID：11888652
> 
> 赞同：0
> 
> 时间：2012-08-09T17:18:26.190
> 
> 标签：ruby-on-rails, ruby, deployment, gem, capistrano

我得到这样的问题。

```
$ cap deploy:setup

  * executing `deploy:setup'
  * executing "sudo -p 'XXXXXXXXX' mkdir -p /home/railsu/bianbian.com /home/railsu/bianbian.com/releases /home/railsu/bianbian.com/shared /home/railsu/bianbian.com/shared/system /home/railsu/bianbian.com/shared/log /home/railsu/bianbian.com/shared/pids"
    servers: ["74.207.243.205"]
connection failed for: 74.207.243.205 (Net::SSH::Disconnect: connection closed by remote host) 
```

我已经将我的计算机的公钥添加到了 git 中。

```
/.ssh/authorized_keys 
```

在 deploy.rb

```
set :application, "mini-saler"
set :repository,  "git@74.207.243.205:mini-saler.git"

set :scm, :git
# Or: `accurev`, `bzr`, `cvs`, `darcs`, `git`, `mercurial`, `perforce`, `subversion` or `none`

role :web, "74.207.243.205"                          # Your HTTP server, Apache/etc
role :app, "74.207.243.205"                          # This may be the same as your `Web` server

set :deploy_to, "/home/railsu/bianbian.com" 

# if you want to clean up old releases on each deploy uncomment this:
# after "deploy:restart", "deploy:cleanup"

set :user, "railsu"
set :password, "XXXXXXXXXX"
set :sudo_prompt, "XXXXXXXXXX" 
```

我的 VPS 是 Linode。

我很确定这是错误的地方。任何想法这是什么样的错误？

感谢大家！！

我在这里看到几个特殊的错误：

# java - 具有 @Deprecated 等语义的代码样式的 Java 注释

> ID：11888654
> 
> 赞同：2
> 
> 时间：2012-08-09T17:18:28.620
> 
> 标签：java, coding-style, annotations

是否有人在项目中有某种“代码样式”注释，例如：@OverEngineered 用于过度复杂的代码或 @Duplicated... 等。

理想情况下，我会为 @Deprecated 子类化（@OverEngineered 扩展 @Deprecated）以使 IDE 突出显示它，但[java 注释不是继承的](https://stackoverflow.com/questions/1624084/why-is-not-possible-to-extend-annotations-in-java)。

所以我想知道是否有一些解决方法可以让 IDE 突出显示已弃用的代码样式自定义注释？或者这通常是错误的方式或错误的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:20:43.953

您可以编写一系列这些注释，然后将它们与`@Deprecated`. 后者为您提供警告，前者向人类读者提供详细信息。你可以编写一个[Checkstyle](http://checkstyle.sourceforge.net/)规则来要求每个弃用的东西都有一个解释性注释，和/或每个解释都伴随一个弃用。

不过，我不会写几个注释，而是写一个，它将解释性标签作为参数。我会调用它`@BecauseItIs`。所以：

```
@Deprecated @BecauseItIs("overengineered")
public void calculateSumOfTwoIntegersUsingSurfaceIntegrals(int a, int b) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:49:02.740

解决方法将使用您为 Eclipse 开发的插件来实现。然而，我想说，没有什么比代码中好的书面注释更符合语义的了。

毕竟这取决于目的。但我认为一个好的评论比任何人都必须安装的插件要好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T00:42:40.737

我不清楚除了在 IDE 中引起注意之外，您是否还有其他目标。您提到`@Deprecated`这也出现在 Javadoc、IDE 文档弹出窗口和编译器输出中。

对于简单的 IDE 突出显示而没有其他可能性，您可以利用大多数 IDE 支持的 FIXME / TODO 类型的注释标签（至少是我使用过的那些）。只需添加您自己的标签`OVERENGINEERED: this is too ...`等。

Eclipse 还允许您指定是否要匹配大小写，因此可以是`OverEngineered:`

# ios - 自定义 segue 类中的视图控制器获取方向为时已晚

> ID：11888656
> 
> 赞同：1
> 
> 时间：2012-08-09T17:18:31.400
> 
> 标签：ios, uiviewcontroller, orientation, segue, viewdidappear

我觉得我错过了一些明显的东西。

我有一个自定义的 segue 类。它做了一些动画。如果当前方向与笔尖的方向相同，它就可以正常工作，但如果当前方向与笔尖不匹配（即当前方向是横向但笔尖是纵向），我无法使其工作。

问题是目标视图控制器的框架和方向是错误的，直到`viewDidAppear`. 但`viewDidAppear`为时已晚。任何在自定义 segue 中做动画的尝试都必须在`viewDidAppear`.

奇怪的是，`viewDidLoad`并`viewWillAppear`报告了正确的`self.interfaceOrientation`（虽然不幸的是报告了错误的帧），但任何尝试在这些方法中绘制都会以错误的方向绘制。

有人想称我为白痴并指出我正在犯的明显错误吗？我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T23:18:00.323

为了回答我自己的问题，我最终放弃了自定义 segue 并选择使用自定义容器控制器。这并没有解决视图控制器在出现之前不知道其正确框架的问题，但确实简化了问题。

我的问题的一个更直接的答案是容器控制器（或呈现控制器）有责任更改呈现控制器的框架。我发现，做到这一点的“最佳”方法是使用呈现/容器控制器`bounds`作为起点。呈现/容器`frame`不会准确反映方向的变化。

作为代码示例，来自我的自定义容器控制器：

```
- (void)slideToEdit {

  // add edit to container and prep home for removal from container
  [self.home willMoveToParentViewController:nil];
  [self addChildViewController:self.edit];

  // the vital frame setting <- this is the bit that solves the problem
  self.edit.view.frame = self.view.bounds;

  // prep the animation
  __block CGRect frame = self.edit.view.frame;
  frame.origin.x += frame.size.width;
  self.edit.view.frame = frame;

  // animate
  [self transitionFromViewController:self.home toViewController:self.edit
    duration:SLIDE_SPEED options:UIViewAnimationCurveLinear animations:^{

    // slide animation
    frame.origin.x -= frame.size.width;
    self.edit.view.frame = frame;

  } completion:^(BOOL done) {
    [self.home.view removeFromSuperview];

    // finalise container heirarchy
    [self.home removeFromParentViewController];
    [self.edit didMoveToParentViewController:self];
  }];
} 
```

这感觉并不理想，因为当可以从笔尖 + 当前方向推断时，必须手动修改框架似乎是错误的。但这至少有效。

# javascript - 使用 z-index 更改类

> ID：11888658
> 
> 赞同：1
> 
> 时间：2012-08-09T17:18:36.187
> 
> 标签：javascript, html

我还在学习 JavaScript 的过程中。我想只使用 JavaScript 而不是 Jquery 来完成任务。

我有多个 div/图像，我正在尝试使用 z-index 进行操作，以及一个将图像随机化到前面的按钮。

我得到了随机图像数组，但正如你在 image[1] 中看到的那样……设置每个 changeZ 索引会很费力。所以我正在着手改变类的（如 image[0] 所示，所以我可以将 current 添加到新图像并在下一次将 current 发送到背景，然后删除 class 属性。我已经得到了元素单独工作，但无法将其放在一个数组中。

```
function changeZIndex(i,id) { 
    document.getElementById(id).style.zIndex=i;}; 

function changeClassZIndex(i,tagName){
    document.getElementsByTagName("*").style.zIndex=i;};

function getImage(){ 

var whichImage=Math.floor(Math.random()*3); 

var image=new Array() 

var currentPhoto = div.current

image[0]=function() { 
    changeZIndex(5,"scene1"); 
    changeClassZIndex(-5,"current"); 
    currentPhoto.removeClass('current')
    document.getElementById("scene1").className += "current"; };

image[1]=function() { 
    changeZIndex(5,"scene2"); 
    changeZIndex(-5,"scene1");
    changeZIndex(-5,"scene3");
    changeZIndex(-5,"scene");  
}; 

image[2]=function() { 
    changeZIndex(5,"scene3"); 
    changeZIndex(-5,"scene");
    changeZIndex(-5,"scene2"); 
    changeZIndex(-5,"scene1");
}; 

image[whichImage].apply(undefined);}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:45:48.483

首先，我相信您的问题可能出在 changeClassZIndex(i,tagName) 中，它可能看起来像这样：

```
if (document.getElementsByClassName == undefined) {
    document.getElementsByClassName = function(className)
    {
        var hasClassName = new RegExp("(?:^|\\s)" + className + "(?:$|\\s)");
        var allElements = document.getElementsByTagName("*");
        var results = [];

        var element;
        for (var i = 0; (element = allElements[i]) != null; i++) {
            var elementClass = element.className;
            if (elementClass && elementClass.indexOf(className) != -1 && hasClassName.test(elementClass))
                results.push(element);
        }

        return results;
    }
}

function changeClassZIndex(z,className) {
    var e = document.getElementsByClassName(className);
    for(var i = 0; i < e.length; i++) {
        e[i].style.zIndex = z;
    }
}; 
```

如果 getElementsByClassName 函数不存在，我将定义它，因为某些浏览器可能不支持它。

但是，我可能建议对您的问题采取不同的方法：

```
var images = new Array("scene1", "scene2", "scene3");

var currentPhoto = div.current
var whichImage = Math.floor(Math.random()*images.length);

// change all images to the background
for(var i = 0; i < images.length; i++)
{
    changeZIndex(-5, images[i]);
}
// change the one you want to the top
changeZIndex(5, images[whichImage]); 
```

这样您就不必为每个图像编写函数，并且添加图像就像添加到数组一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:59:11.590

这是因为 document.getElementsByTagName() 返回一个`array`元素，你不能对它做这样的操作。相反，您需要枚举它们并单独执行操作。

这是一个有效的 jsfiddle，它准确地显示了如何做到这一点：[jsfiddle](http://jsfiddle.net/YAeZu/20/)

* * *

作为旁注：如果有很多网络编程会教你一件事，那就是：

***永远**不要排除 jQuery 作为选项。*

JQuery 是您最好的朋友，在这种情况下使用它可以将您的代码行数减少一半以上。

# extjs4 - 所需EXTJS4教程资料

> ID：11888661
> 
> 赞同：1
> 
> 时间：2012-08-09T17:18:50.540
> 
> 标签：extjs4, sencha-architect

详细寻找 EXTJS4/senchaArchitect 教程，我浏览了 sencha 文档，但我想获得更多信息或示例。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:40:02.280

煎茶教程是我所知道的关于煎茶的最完整的教程。

一般来说，它们会给你一个方向，并且 api 文档中散布着足够多的例子来让东西正常工作。

但是，您也可以查看他们的视频频道[http://vimeo.com/channels/sencha](http://vimeo.com/channels/sencha)。

# perforce - 是否有可能找到谁对 P4 做了什么？

> ID：11888671
> 
> 赞同：0
> 
> 时间：2012-08-09T17:19:18.747
> 
> 标签：perforce

我想知道是否有可能找到谁对 P4 做了什么。

最好的办法是：

```
user committed: com/app/Class.java, com/class/Class2.java etc.. 
```

编辑：

好的，我可以使用：

```
p4 changes -m 5 -u user //dev/project/... 
```

但这并没有告诉我哪些文件已提交。

有什么想法吗？

非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T17:50:20.017

如果您想识别最后一个修改文件的用户，您可以使用以下内容：

```
p4 filelog -m 1 //dev/project/... 
```

这将提供有关每个文件的最后更改的信息，包括提交更改的用户的名称。

# delphi - 是否可以购买/下载/试用 Adob e 产品中使用的组件，例如 (Adobe Encore) for delphi？

> ID：11888676
> 
> 赞同：1
> 
> 时间：2012-08-09T17:19:48.290
> 
> 标签：delphi, delphi-7

这是 Adob​​e Encore 程序的屏幕截图。

在这里，您可以看到一组深色组件。

可以购买，下载等吗？它们是从 Adob​​e Cor. 公开的吗？

谢谢

![在此处输入图像描述](../Images/d7bfef4e10176f2246c0e50452381096.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:37:29.010

实现这种外观和感觉的最简单方法是：

1.  要购买启用了皮肤的皮肤引擎或组件库，如果您必须使用 XE2 之前的旧版 Delphi。

2.  但首选方法是仅使用 Delphi XE2 中的 VCL 皮肤库，称为 VCL Styles。不幸的是，它有错误，但所有其他皮肤库也是如此。您还可以使用 Firemonkey 框架在 Delphi XE2 中获得类似的结果，该框架与 Adob​​e 产品中使用的任何非 Delphi 技术一样，避开了本机控件，以实现完全独立的环境，该环境可以看起来像您想要的任何方式。

如果您想要时髦/漂亮的用户界面，我个人建议您使用 Delphi XE2。如果您坚持“尝试/购买/组件”，那么我建议您查看 Developer Express 组件套件，或[此问题](https://stackoverflow.com/questions/1969847/delphi-skinning-libraries)中列出的组件套件之一，例如 VCLSkin。

# javascript - 包含大量数据的直方图上的 JavaScript 性能

> ID：11888678
> 
> 赞同：0
> 
> 时间：2012-08-09T17:19:57.910
> 
> 标签：javascript, performance, histogram, jqplot

我想使用一些 JavaScript 图表库制作直方图，但数据有超过 100 万个数字。我会通过 Ajax 调用检索数据并使用 jqPlot 之类的东西绘制它，但我想知道是否有人做过任何性能测试，试图创建一个包含大量数据的图表。

# c - 理解 C 中函数的 typedef

> ID：11888681
> 
> 赞同：0
> 
> 时间：2012-08-09T17:20:09.217
> 
> 标签：c, typedef

我遇到了以下函数声明，但我无法理解它是如何工作的：该函数在文件中声明如下：

```
struct newtype {
  /* some definition */
};

typedef void function1 (int* a, newtype* p); 
```

然后在上面的另一个C代码中声明用于声明另一个function2，如下所示：

```
function1 function2;

void function2(int* a, newtype* p)
{ 
  /* function definition */  
} 
```

那么function2的使用方式如下：

```
int function3 (int, char, function1* );

/* definition */
function3(int a, char c, function2 )
{ 
  /* function definition */
} 
```

我无法理解语句：function1 function2; typedef void function1 (arguments) 是什么意思，因为 function1 没有声明为指针。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:26:02.093

function1 被声明为不返回任何内容并将指向 int 的指针和指向 newtype 的指针作为参数的函数的类型。

这种方式有助于确保获得符合特定格式的函数，尤其是在使用回调函数/函数指针时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:33:44.350

```
 typedef void function1 (int* a, newtype* p); 
```

将名称*function1*`void ()(int *, newtype *)`定义为类型即函数的别名。

因此`function1 function2;`与此原型相同：

```
void function2 (int* a, newtype* p); 
```

该名称`function1`还可以用于声明一个指针，从而产生一个熟悉的“函数指针”。这就是function3在声明时所做的事情`int function3 (int, char, function1* );`——它的最后一个参数是一个指向带有签名的函数的指针`void ()(int *, newtype *)`

# php - 将 JSON 对象存储在临时文件中

> ID：11888682
> 
> 赞同：0
> 
> 时间：2012-08-09T17:20:09.190
> 
> 标签：php, ajax, json, mobile

我有一个项目，我从 JSON 数组中提取大量内容，一次只显示一点点。JSON 数组可以包含视频或音频文件，因此我想避免加载整个数组，因为它将加载到移动设备上。

我希望将数组加载到临时文件或某种本地存储中，以便我可以预加载内容。或者，如果有一种方法可以使用 AJAX 快速迭代存储在位于 MongoDB 上的数组中的每个项目，那么它也可以工作。

对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:30:42.713

我想你需要将json分成块，

1.  服务器端：

    客户端只请求信息的第 1 页，当信息很快消失时，它会请求第 2 页，依此类推……这样您就不必处理大量信息，服务器也不必给您大量信息您甚至可能不会使用的信息。

2.  客户：

    您可以存储在许多文件中，也可以根据需要将 json 加载到页面中。

# excel - 如果 50 个不同的变量满足 3 个条件，则复制 Excel 行

> ID：11888683
> 
> 赞同：0
> 
> 时间：2012-08-09T17:20:12.217
> 
> 标签：excel, rows, vba

我正在尝试编写一个宏，如果满足 3 个条件，它将复制行。如：

如果 "A" = B 且 "D" = E 且 "F" = G 然后将行复制到工作表 2 上的下一个可用行

如果 "A" = C 和 "D" = F 和 "F" = H 然后将行复制到工作表 2 上的下一个可用行

我需要重复上述步骤最多 50 次。列不会改变

这是我到目前为止所拥有的：

```
`Sub SearchForString()

Dim LSearchRow As Integer
Dim LCopyToRow As Integer

On Error GoTo Err_Execute

'Start search in row 4
LSearchRow = 4

'Start copying data to row 2 in Sheet2 (row counter variable)
LCopyToRow = 2

While Len(Range("A" & CStr(LSearchRow)).Value) > 0

    'If value in column E = "Mail Box", copy entire row to Sheet2
    'If value in column D = "0", copy entire row to Sheet2
    'If value in column A = "5", copy entire row to Sheet2
    'If Range("E" & CStr(LSearchRow)).Value = "Mail Box" Then
    If Range("F" & CStr(LSearchRow)).Value = "Mail Box" And _
        Range("E" & CStr(LSearchRow)).Value = "0" And _
        Range("A" & CStr(LSearchRow)).Value = "5" Then

 'If Range("E" & CStr(LSearchRow)).Value = "Mail Box" Then

        'Select row in Sheet1 to copy
        Rows(CStr(LSearchRow) & ":" & CStr(LSearchRow)).Select
        Selection.Copy

        'Paste row into Sheet2 in next row
        Sheets("Sheet2").Select
        Rows(CStr(LCopyToRow) & ":" & CStr(LCopyToRow)).Select
        ActiveSheet.Paste

        'Move counter to next row
        LCopyToRow = LCopyToRow + 1

        'Go back to Sheet1 to continue searching
        Sheets("Sheet1").Select

        End If

    LSearchRow = LSearchRow + 1

    Wend

'Position on cell A3
Application.CutCopyMode = False
Range("A3").Select

'MsgBox "All matching data has been copied."

'Exit Sub

        'Search 2

         'Start search in row 4
LSearchRow = 4

'Start copying data to row 3 in Sheet2 (row counter variable)
LCopyToRow = 3

While Len(Range("A" & CStr(LSearchRow)).Value) > 0

    'If value in column E = "Mail Box", copy entire row to Sheet2
    'If value in column D = "1", copy entire row to Sheet2
    'If value in column A = "5", copy entire row to Sheet2
    'If Range("E" & CStr(LSearchRow)).Value = "Mail Box" Then
    If Range("F" & CStr(LSearchRow)).Value = "Mail Box" And _
        Range("E" & CStr(LSearchRow)).Value = "1" And _
        Range("A" & CStr(LSearchRow)).Value = "5" Then

 'If Range("E" & CStr(LSearchRow)).Value = "Mail Box" Then

        'Select row in Sheet1 to copy
        Rows(CStr(LSearchRow) & ":" & CStr(LSearchRow)).Select
        Selection.Copy

        'Paste row into Sheet2 in next row
        Sheets("Sheet2").Select
        Rows(CStr(LCopyToRow) & ":" & CStr(LCopyToRow)).Select
        ActiveSheet.Paste

        'Move counter to next row
        LCopyToRow = LCopyToRow + 1

        'Go back to Sheet1 to continue searching
        Sheets("Sheet1").Select

    End If

    LSearchRow = LSearchRow + 1

Wend

'Position on cell A3
Application.CutCopyMode = False
Range("A3").Select

MsgBox "All matching data has been copied."

Exit Sub

 Err_Execute:
MsgBox "An error occurred."

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:15:55.533

我认为可能有更好的方法来做你想要实现的目标，但也许这会帮助你......

```
Sub Tester()
    SearchForString "5", "0", "Mail Box"
    SearchForString "5", "1", "Mail Box"
End Sub

Sub SearchForString(ColA, ColE, ColF)

Dim LSearchRow As Long
Dim shtSearch As Worksheet
Dim shtCopyTo As Worksheet
Dim rw As Range

    LSearchRow = 4 'Start search in row 4

    Set shtSearch = Sheets("Sheet1")
    Set shtCopyTo = Sheets("Sheet2")

    Do While Len(shtSearch.Cells(LSearchRow, 1).Value) > 0

        Set rw = shtSearch.Rows(LSearchRow)

        If rw.Cells(6).Value = ColF And rw.Cells(5).Value = ColE And _
                                        rw.Cells(1).Value = ColA Then

            rw.Copy shtCopyTo.Cells(Rows.Count, 1).End(xlUp).Offset(1, 0)
            Exit Do '? you say there's only one result to find
        End If
        LSearchRow = LSearchRow + 1
    Loop
End Sub 
```

# jquery - 其他事件完成后如何触发我的事件

> ID：11888686
> 
> 赞同：2
> 
> 时间：2012-08-09T17:20:26.413
> 
> 标签：jquery, twitter-bootstrap, jquery-events

我正在使用 Bootstrap 的[按钮](http://twitter.github.com/bootstrap/javascript.html#buttons)

我在按钮上附加了一个自定义事件

```
$('.btn').bind('update', function(){
  // here I check if the button has the "Active" class and do something
});

$('.btn').click(function(){
  // here I trigger my event
  $(this).trigger('update');
}); 
```

所以 Bootstrap 的点击事件应该添加活动类，但它似乎在我的事件之后这样做，所以我的活动类似乎没有在我的事件中设置：|

我可以在引导程序的点击事件之后以某种方式运行我的点击事件吗？

* * *

测试：

[http://jsfiddle.net/V55ZH/](http://jsfiddle.net/V55ZH/)

如您所见，警报在设置“活动”类之前触发，因此在 Bootstrap 的点击事件运行之前（从我的事件来看，类状态对我来说是不可靠的）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-09T18:52:26.120

快速浏览一下 bootstrap 的 JS 代码（[https://github.com/twitter/bootstrap/blob/master/js/bootstrap-button.js](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-button.js)） - 您可以注意到事件实际上不是直接附加在按钮元素上，而是在它的容器上。在您的示例中实际发生的是，引导程序使用“btn-group”类的容器 DIV 和属性 data-toggle="buttons-checkbox" 包装按钮。单击后，事件处理程序将被触发，您可以使用事件对象获取单击的按钮。

HTML

```
<div class="btn-group" data-toggle="buttons-checkbox">
  <button class="btn active">A</button>
  <button class="btn active">B</button>
  <button class="btn active">C</button>
  <button class="btn">D</button>
</div> 
```

JS

```
$(document).ready(function(){
  $('body').on('click', '[data-toggle^=button]', function(e) {
      var btn = $(e.target);
      if (btn.hasClass('btn')) {
          alert(btn.hasClass('active'));
      }
  });
}); 
```

# c# - 安全地将补丁应用到 COM+ 应用程序

> ID：11888697
> 
> 赞同：3
> 
> 时间：2012-08-09T17:21:22.910
> 
> 标签：c#, .net-4.0, patch, windows-server-2008-r2, com+

我们有一些`COM+ Application`由几个`DLL`s 组成，每个包含几个服务组件（用 C# 编写），在 Windows Server 2003/2008R2 操作系统上运行。

在某些情况下（我们尽量避免），我们有义务应用补丁来纠正错误。为了实现这一点，我们目前所做的是（当然假设我们在目标服务器上拥有所有需要的东西）：

1.  **禁用**COM+ 应用程序。
2.  **关闭**COM+ 应用程序。
3.  **注销**涉及要替换的 DLL。
4.  **替换**DLL。
5.  **再次注册**所涉及的 DLL。
6.  **启用**COM+ 应用程序。

上面提到的步骤没有问题，我们`COM+ Application Catalog`通过命令行构建了一个用于以编程方式管理的小应用程序，因此我们可以更新一些 DLL 并使服务的组件生活在大约。2 秒... 这对我们来说并不算多，我们可以负担这个（离线）时间，但我想通过编写一个补丁工具来改进和自动化整个过程。

我想弄清楚的是：

*   我怎么知道我的所有服务组件`COM+ Application`都已完成工作（所有请求/调用都已完成），以便我可以安全地进行第 2 点？
*   更详细地说，有没有我可以用来获取`Serviced Components`某个状态的库`COM+ Application`？

***注意***：如果您习惯使用**dcomcnfg**，我需要访问的数据与您在展开`COM+ Application`文件夹`Console Root\Computers\My Computer\<MyComPlusApp>`，然后展开文件夹`Components`并转到菜单`View`并选择`Status`菜单项。Windows 当然能够知道`COM+ Serviced Component`屏幕上显示它的每一个状态，所以这正是我需要访问的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T01:57:06.283

> 我怎么知道我的 COM+ 应用程序的所有服务组件都已完成工作（所有请求/调用都已完成），以便我可以安全地进行第 2 点？

您可以使用[COM+ Instrumentation Interfaces](http://msdn.microsoft.com/en-us/library/windows/desktop/ms678825%28v=vs.85%29.aspx)或[COM+ Tracking](http://msdn.microsoft.com/en-us/library/windows/desktop/dd179218%28v=vs.85%29.aspx)来接收有关您的组件的信息。

> 更详细地说，是否有任何库可用于获取某个 COM+ 应用程序的服务组件的状态？

[IGetAppTrackerData 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd179223%28v=vs.85%29.aspx)应该让您获得所需的信息。

一些警告：不要忘记关闭应用程序时需要小心，因为组件不能处于调用状态，但在关闭之前，另一个调用会被服务。此外，根据我使用 COM+ API 的经验，有时会变得混乱，并且有时缺少文档（尤其是在示例方面）。

节省 2 秒似乎需要做一些工作。:)

# objective-c - 返回不兼容类型的变量

> ID：11888713
> 
> 赞同：0
> 
> 时间：2012-08-09T17:22:12.077
> 
> 标签：objective-c, ios, cocoa-touch, pointers, ios-simulator

**你好！**

我尝试从该网站创建一个应用程序：http: [//www.appcoda.com/customize-table-view-cells-for-uitableview/](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)

在那里，我们创建了一个包含食谱的表格，每个单元格中有 1 个食谱。我们总共有 16 个细胞/食谱。

我有麻烦。当我尝试运行我的应用程序时，出现 2 个错误：

1)

```
2012-08-09 21:12:17.332 Simple table[8886:f803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Could not load NIB in bundle: 'NSBundle </Users/.../Library/Application Support/iPhone Simulator/5.1/Applications/1BA2DE48-7DEB-4564-BA33-A709412EB582/Simple table.app> (loaded)' with name 'SimpleTableCell''
*** First throw call stack:
(0x14b5022 0xeb5cd6 0x145da48 0x145d9b9 0x239638 0x23aeb7 0x23c8 0xb2c54 0xb33ce 0x9ecbd 0xad6f1 0x56d42 0x14b6e42 0x1d86679 0x1d90579 0x1d154f7 0x1d173f6 0x1da4160 0x16e84 0x17767 0x26183 0x26c38 0x1a634 0x139fef5 0x1489195 0x13edff2 0x13ec8da 0x13ebd84 0x13ebc9b 0x16c65 0x18626 0x1d1d 0x1c85)
terminate called throwing an exception(lldb) 
```

2)

```
Incompatible pointer types returning 'SimpleTableCell*_strong' from a function with result type 'UITableViewCell *' 
```

在这里，指针单元格给出了一个错误：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableCell";

    SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.nameLabel.text = [tableData objectAtIndex:indexPath.row];
    cell.thumbnailImageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];
    cell.prepTimeLabel.text = [prepTime objectAtIndex:indexPath.row];

    return cell;
} 
```

**完整文件（Simple_tableViewController.m）**

```
#import "Simple_tableViewController.h"
#import "SimpleTableCell.h"

@interface Simple_tableViewController ()

@end

@implementation Simple_tableViewController

{
    NSArray *tableData;
    NSArray *thumbnails;
    NSArray *prepTime;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"SimpleTableCell";

    SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.nameLabel.text = [tableData objectAtIndex:indexPath.row];
    cell.thumbnailImageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];
    cell.prepTimeLabel.text = [prepTime objectAtIndex:indexPath.row];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 78;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Initialize table data
    tableData = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", @"Full Breakfast", @"Hamburger", @"Ham and Egg Sandwich", @"Creme Brelee", @"White Chocolate Donut", @"Starbucks Coffee", @"Vegetable Curry", @"Instant Noodle with Egg", @"Noodle with BBQ Pork", @"Japanese Noodle with Pork", @"Green Tea", @"Thai Shrimp Cake", @"Angry Birds Cake", @"Ham and Cheese Panini", nil];

    // Initialize thumbnails
    thumbnails = [NSArray arrayWithObjects:@"egg_benedict.jpg", @"mushroom_risotto.jpg", @"full_breakfast.jpg", @"hamburger.jpg", @"ham_and_egg_sandwich.jpg", @"creme_brelee.jpg", @"white_chocolate_donut.jpg", @"starbucks_coffee.jpg", @"vegetable_curry.jpg", @"instant_noodle_with_egg.jpg", @"noodle_with_bbq_pork.jpg", @"japanese_noodle_with_pork.jpg", @"green_tea.jpg", @"thai_shrimp_cake.jpg", @"angry_birds_cake.jpg", @"ham_and_cheese_panini.jpg", nil];

    //initialize prep time
    prepTime=[NSArray arrayWithObjects:@"60", @"45", @"30", @"20", @"15", @"10", nil];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

为什么 'cell' 指针返回 'SimpleTableCell*_strong' 类型以及为什么会出现第一个错误？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:40:05.110

我对无法加载 xib 并不肯定，但我的猜测是您忘记在 SimpleTableCell.h 类定义中对 UITableViewCell 进行子类化。这可以解释为什么你得到一个不正确的返回值。这也可能解决您无法加载笔尖的问题。

如果不是，请确保您的 nib 文件的名称与您在文件中加载的名称完全相同。拼写错误的文件可能会导致此问题。

# insert - 在 Oracle 表中插入具有不同语言值的记录

> ID：11888715
> 
> 赞同：0
> 
> 时间：2012-08-09T17:22:17.773
> 
> 标签：insert, oracle10g, multilingual

我在 Oracle 数据库表中插入记录时遇到问题。

我有一个字段名称为西班牙语“RÃ“TULO”的表。仅仅因为字段和值带有一些特殊字符，我不能使用以下简单的插入命令。对于具有特殊字符的字段，我也有价值。

我很确定 Oracle 中有一些设置允许我接受不同的语言（西班牙语）。有人可以指出我可以了解设置的网址吗？

INSERT INTO "MyTable" ("RIDCODE" , "RÃ“TULO" ) 值 ('LVL1', 'Some Value with special characters');

我收到以下错误 SQL 错误：ORA-01747: invalid user.table.column, table.column, or column specification 01747\. 00000 - “invalid user.table.column, table.column, or column specification”

*原因：
*措施：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:35:40.873

尝试这个

```
SET ESCAPE '\'
INSERT INTO "MyTable" ("RIDCODE" , "RÃ\"TULO" ) 
values ('LVL1', 'Some Value with special characters'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:28:57.760

通过在运行插入时关闭以下选项并在完成插入后将其重新打开，我能够解决已声明的问题。

设置定义关闭；设置扫描关闭；

INSERT INTO "MyTable" ("RIDCODE" , "RÃ“TULO" ) 值 ('LVL1', 'Some Value with special characters');

设置定义；设置 SCN 开启；

# ruby-on-rails-3 - Active Record 查询数组字段中的值

> ID：11888725
> 
> 赞同：4
> 
> 时间：2012-08-09T17:22:51.940
> 
> 标签：ruby-on-rails-3, mongodb, activerecord

我在 Rails 3 的 MongoDB 数据库中有一个名为“Stat”的表。

在该表中，有一个名为 "services" 的数组字段。

我想找到所有具有包含值 "lights" 的 services 数组的 Stats 。

我想做这样的事情：

```
@stats = Stat.all
@stats1 =  @stats.where("services contains lights")
Rails.logger.info "result:  #{@stats1.count}  " 
```

我尝试了各种方法并在 Google 上进行了广泛搜索，找到了一些线索，但似乎没有任何效果。我有四个记录应该匹配这个查询，但上面返回一个零集。

我想在 rails 3 / mongo 做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-04T08:58:52.237

试试这个，

```
@stats = Stat.all

@stats1 =  @stats.where("'lights' = ANY (services)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:14:13.003

好的，我找到了这个问题的答案：

```
@stats =  @stats.where(:services.in =>['lights'] ) 
```

而且我还通过四处寻找发现相反的是：

```
@stats =  @stats.where(:services.nin =>['lights'] ) 
```

`nin`代替`in`

# iphone - Iphone：使用表格自定义单元格

> ID：11888731
> 
> 赞同：0
> 
> 时间：2012-08-09T17:23:08.117
> 
> 标签：iphone, objective-c, ios, custom-cell

我正在使用我在（[本网站](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)）中学到的自定义单元格。它在我的旧应用程序中工作，但在这个应用程序中我不知道为什么它没有工作，当我运行上面的代码时，他在行 ( `NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];`) 中出现绿色错误。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    CellIdentifier = @"CustomCell";
    PCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil){
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (PCustomCell *) currentObject;
                break;
            }
        }
    }
    P2Dict = [P2Rows objectAtIndex: indexPath.row];
    cell.Contracts.text = [P2Dict objectForKey:@"Contracts"];
    return cell;
} 
```

[http://ar2.co/SS2.png](http://ar2.co/SS2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:59:37.723

自定义单元 xib .file 采用 tablecell.and 在 custom.m 文件中实现。在视图控制器中，通过 viewcontroller xib 或以编程方式设置整个 tableview。作为您的选择。并设置委托和数据源方法。在数据源方法中编写自定义单元格。下面写的代码

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Custom";

CustomTableCell *cell = (CustomTableCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell)
{
    UINib *nib = [UINib nibWithNibName:@"CustomTableCell" bundle:nil];
    NSArray *arr = [nib instantiateWithOwner:nil options:nil];
    cell = [arr objectAtIndex:0];
}

cell.textLabel.text =[arr objectAtIndex:indexPath.row]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:37:51.667

您的错误状态：“无法在名为“CustomCell”的包中加载 NIB”。所以这就是你的问题......你的xib是什么名字？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:29:14.263

你在 CustomCell.xib 有 UITableviewCell(PCustomCell) 吗？您应该在此处显示错误的屏幕截图。这会很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:30:27.023

参考以下流程。如何创建自定义表格单元格是一种。

VocaTableCell 就是我的例子。制作一个您的 CustomTableCell。

![在此处输入图像描述](../Images/cfa4d4227e22a86f93fd43be24ab17d2.png) ![在此处输入图像描述](../Images/11a2df72228f6372ce61a031616c4ccb.png)

* * *

```
#import <UIKit/UIKit.h>

@interface VocaTableCell : UITableViewCell 
{
    UILabel *vocaLabel;
}
@property (nonatomic, retain) IBOutlet UILabel *vocaLabel;

@end 
```

* * *

```
#import "VocaTableCell.h"

@implementation VocaTableCell
@synthesize vocaLabel;

- (void)dealloc {
    [vocaLabel release];
    [super dealloc];
}
@end 
```

下面的代码参考Befoe，您是否正确制作了customTableCell？下面的列表检查请。

有几种方法可以创建关于 customTablecell。

我的方式很受欢迎。

1.  文件所有者的 CustomTabelCell 应该是**NSObject**。（非常重要的默认值是 Maybe UITableCell。你必须是更改文件的所有者 NSObject（NSObject 的意思是 id 类型！））

2.  CustomTableCell 将对象类链接到您的 CustomTableCell 类。

3.  引用 Outlets 链接不是 File's Owner，必须是您的直接链接 CustomTableCell。

* * *

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Custom";

    CustomTableCell *cell = (CustomTableCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell)
    {
        UINib *nib = [UINib nibWithNibName:@"CustomTableCell" bundle:nil];
        NSArray *arr = [nib instantiateWithOwner:nil options:nil];
        cell = [arr objectAtIndex:0];
    }

    cell.textLabel.text =[arr objectAtIndex:indexPath.row];
} 
```

# javascript - 我可以从 javascript 伪造 CE-HTML 密钥常量吗？

> ID：11888734
> 
> 赞同：0
> 
> 时间：2012-08-09T17:23:20.710
> 
> 标签：javascript, keycode

我想伪造即触发一个与 NetTV 的 CE-HTML 标准中定义的自定义键码匹配的键码事件。这可以从chrome / firefox 中**的 javascript 控制台进行吗？**我试过：

```
var e = jQuery.Event("keydown");
e.which = 406; // this is the custom keycode value for constant VK_BLUE (blue button on remote control)
$("input").trigger(e); 
```

但它没有效果。我有一种感觉，这可能会受到限制。

如果不可能，我可以通过以某种方式触发该键码事件从我的操作系统（OSX）发送类似的代码吗？或者 406 在 NetTV 环境之外完全没有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:27:08.127

您应该能够像这样伪造事件对象：

```
var e = jQuery.Event("keydown", { keyCode: 64 });
$("input").trigger(e); 
```

[文件](http://api.jquery.com/category/events/event-object/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:21:44.733

您可以使用 Applescript 向您发送密钥代码：

```
tell application "yourApplication"
    activate
    tell application "System Events" to key code 406
end tell 
```

# sharepoint - 在 SharePoint 中通过没有列表的 Guid 获取列表项

> ID：11888738
> 
> 赞同：5
> 
> 时间：2012-08-09T17:23:31.763
> 
> 标签：sharepoint, listitem, unique-id

任何人都可以帮助我在不使用列表的情况下通过 SharePoint 中的唯一 ID 获取列表项吗？我知道列表项的唯一 ID，但我没有关于列表的信息。使用客户端对象模型，我可以执行以下操作：

```
using (SP.ClientContext clientContext = new SP.ClientContext(...))
{
    **SP.List list = clientContext.Web.Lists.GetById(listId);**
    SP.ListItem listItem = list.GetItemById(listItemId);
    clientContext.Load(listItem);
    clientContext.ExecuteQuery();
    ...
} 
```

不幸的是，在这段代码中我使用了 listId，但问题是在我的任务中我不知道 listId，我只有 ListItem Guid。由于我有唯一的 ID，我相信必须有一种方法可以在不使用任何附加信息的情况下获取此项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:32:28.333

您已经发布了一个带有客户端对象模型的片段，所以我认为它是解决方案的首选对象模型。但是，如果您可以接受，我已经找到了一些有关如何使用服务器端对象模型实现此目的的信息，您可能会发现这些信息很有帮助。

`SPWeb.GetFile(Guid itemGuid)`如果该项目存在于根站点中，这似乎可以完成。

如果您希望它也适用于子站点，您可以使用[SPWeb.GetSiteData](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spweb.getsitedata.aspx)方法来调用 caml 检索项目，如本文所述：http: [//www.chakkaradeep.com/post/Retrieving-an-Item-from-the -RootWeb-and-Subwebs-using-its-UniqueId.aspx](http://www.chakkaradeep.com/post/Retrieving-an-Item-from-the-RootWeb-and-Subwebs-using-its-UniqueId.aspx)。

您还可以查看 SO 上的此线程以获取更多信息： [SharePoint: Get SPListItem by Unique ID](https://stackoverflow.com/questions/8181506/sharepoint-get-splistitem-by-unique-id)。

如果您在使用这些方法时遇到任何问题，请告诉我。我还将寻找与客户端对象模型一起运行的替代方案，如果我发现一些，我会发布它们，但是，它似乎更难以实现。

# css - IE9 @font-face 蓝调

> ID：11888748
> 
> 赞同：1
> 
> 时间：2012-08-09T17:24:01.083
> 
> 标签：css, internet-explorer-9, font-face

所以 IE9 在使用谷歌字体时会吐出一个错误，包括如下：

```
<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet" type="text/css" /> 
```

IE9 吐出一个错误，即使字体仍然可以正常加载：

```
CSS3111: @font-face encountered unknown error. 
```

如果我不是在其他人的网页上编写 iframe 的内容，我很乐意忽略此错误。:(

在本地托管 EOT 文件可以解决 IE 的问题：

```
< !--[if IE 9]>
< link rel="stylesheet" href="/survey/css/lato-ie.css" type="text/css" />
< ![endif]--> 
```

在那个文件中..

```
@font-face {
    font-family: "Lato";
    font-style: normal;
    font-weight: 400;
    src: url("/Lato-Reg-webfont.eot") format("embedded-opentype");
}
@font-face {
    font-family: "Lato";
    font-style: normal;
    font-weight: 900;
    src: url("/Lato-Bla-webfont.eot") format("embedded-opentype");
} 
```

将它包含在 IE9 中，错误消失了，效果很好。

现在我的问题是，我需要为除 IE9 之外的所有人包含谷歌字体样式表。例如，我不能这样做：

```
< !--[if !IE 9]>
< link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet" type="text/css" />
< ![endif]--> 
```

或者 Firefox 甚至不会看到该死的包含。

IE 的开发者是否在密谋浪费我们所有的时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T01:32:20.770

你在正确的轨道上，你只需要使用一个[底层显示的条件注释](http://en.wikipedia.org/wiki/Conditional_comment#Downlevel-revealed_conditional_comment)：它会在 IE 中隐藏它，但会被其他浏览器拾取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:00:06.710

一个问题，您是否尝试在本地查看文件？

谷歌字体不会在本地呈现，即使它们链接到绝对外部链接。（如果是 IE）

```
localhost/project/index.html = good
C:\Project\index.html = bad 
```

# sencha-touch-2 - 如何在 Sencha Touch 应用程序（javascript 文件）中使用 RhoElements 功能（调用 Rho API）

> ID：11888764
> 
> 赞同：0
> 
> 时间：2012-08-09T17:25:09.150
> 
> 标签：sencha-touch-2, rhomobile

我正在使用与 RhoElements 打包的 Sencha Touch 2（用于 UI）开发移动应用程序。如何在 Sencha Touch UI（Java 脚本文件）中访问 Rho 功能。例如，如果我想在 UI 中使用 Rho 的扫描仪/相机功能，那是如何完成的？有代码示例吗？

查看 RhoElements 示例应用程序，所有扫描仪/相机调用都是在 Ruby 控制器中进行的。所以不知道如何把它们绑起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:07:43.807

我同时做Rho和Sencha。RhoMobile 网站上有许多示例可以引导您完成集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T12:45:00.880

这是 JS 客户端的 API 参考文档。还有一些例子

[罗莫比尔](http://docs.rhomobile.com/rhoconnectjs/reference)

# visual-studio-2010 - ReSharper：如何恢复特定的 vs2010 快捷键？

> ID：11888765
> 
> 赞同：1
> 
> 时间：2012-08-09T17:25:13.737
> 
> 标签：visual-studio-2010, resharper

vs2010自带了一个很棒的ctrl+快捷键。它被 ReSharper 劫持。我想把它带回来而不必带回所有 vs2010 设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:28:45.307

工具->选项->环境->键盘

将 Edit.NavigateTo 更改为 Ctrl+,

将“当前使用的快捷方式”更改为另一个键。

# java - Java中的高优先级线程

> ID：11888767
> 
> 赞同：0
> 
> 时间：2012-08-09T17:25:20.843
> 
> 标签：java, multithreading, scheduling

我目前正在研究分布式应用程序的性能。我的目标是一个网络组件。当前，对于每个连接，都有一个专用线程以阻塞模式处理套接字。我的目标是减少线程数（不降低性能），并尽可能提高性能。

我重新设计了网络组件以使用异步通信，并尝试使用 1 到 2 个线程进行整个网络处理。我做了一个简单的测试，我从一个节点循环写入并在另一个节点上读取，这是为了测试最大 nw 线程能力，我发现我的繁忙循环实现正在消耗 100% 的 cpu 并且每秒获得更多的操作，然后我们要求。所以我在现有的应用程序中集成了这个繁忙的循环实现。

我发现的问题是其他线程不允许这些异步 nw 线程获取完整的 cpu，即使我有一个 8 核系统并且我们使用的 cpu 不超过 400%。基本上，作为一名 C 程序员，我可以通过将我的 nw 线程绑定到一个核心并提高其调度优先级来解决这个问题，这样其他线程仍然可以在其他核心上运行。我无法在 Java 中做类似的事情。关于 Java 线程优先级的评论存在冲突。此外，我不想降低其他线程的优先级，因为它可能有其自身的副作用。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:44:15.467

我有一个库来支持 Linux 和 Windows 上的 Java 中的线程亲和性。[https://github.com/peter-lawrey/Java-Thread-Affinity](https://github.com/peter-lawrey/Java-Thread-Affinity)

如果您隔离 CPU，您可以确保您分配的 CPU 不会用于其他任何事情（除了不可屏蔽的中断）这在 Linux AFAIK 中效果最好。

* * *

如果您使用非阻塞 NIO 的忙等待而不是阻塞 IO，您可以获得更低的延迟结果。后者在负载下工作得最好，在较低的负载下，延迟会增加。

您可能会发现这个库很有趣[https://github.com/peter-lawrey/Java-Chronicle](https://github.com/peter-lawrey/Java-Chronicle)它允许您每秒保存数百万条消息，可选地保存到第二个进程。

顺便说一句：线程优先级只是一个提示，操作系统可以自由地忽略它（并且经常这样做）

* * *

一个比较暖代码和冷代码的简单示例。它所做的只是重复复制一个数组并对其计时。一旦代码和数据升温，您就不会期望它会变慢，但即使在一台相当安静的机器上，它所需要的只是 10 毫秒的延迟，以显着减慢复制所需的时间。

```
public static void main(String... args) throws InterruptedException {
    int[] from = new int[60000], to = new int[60000];
    for (int i = 0; i < 10; i++)
        copy(from, to); // warm up
    for (int i = 0; i < 10; i++) {
        long start = System.nanoTime();
        copy(from, to);
        long time = System.nanoTime() - start;
        System.out.printf("Warm copy %,d us%n", time / 1000);
    }
    for (int i = 0; i < 10; i++) {
        Thread.sleep(10);
        long start = System.nanoTime();
        copy(from, to);
        long time = System.nanoTime() - start;
        System.out.printf("Cold copy %,d us%n", time / 1000);
    }
}

private static void copy(int[] a, int[] b) {
    for (int i = 0, len = a.length; i < len; i++)
        b[i] = a[i];
} 
```

印刷

```
Warm copy 20 us
Warm copy 20 us
Warm copy 19 us
Warm copy 23 us
Warm copy 20 us
Warm copy 20 us
Cold copy 100 us
Cold copy 80 us
Cold copy 89 us
Cold copy 92 us
Cold copy 80 us
Cold copy 112 us 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:10:48.180

这对我来说确实有点过早的优化。你有一个 8 核系统，只使用 400% 的 CPU。是什么让您认为这不是 IO 绑定程序的教科书示例？是什么让您认为您的网络 IO 链没有达到极限？

@Peter 知道他的东西，我相信您可以破解处理器关联性并将您的关键线程强制到单个 CPU，但问题是它会让您的程序运行得更快吗？我真诚地怀疑它。模型 Java VM 在线程调度方面*非常*聪明，我建议它正在适当地完成它的工作。除非你有很好的相反证据，否则我会让它处理日程安排。如果大多数线程都在等待 IO，那么即使是优先级也没什么意义。

此外，是什么让您认为减少线程数会更好。这将大量代码从本机领域（即线程多路复用）转移到 Java 领域（即 NIO 代码）。如果您谈论的是 1000 个线程，那么我同意，但即使是 100 个线程也应该是处理连接的有效方法。

二十多年来，我已经进行了大量的线程编程，而且我从来没有强制线程亲和性。当然，确定线程池的大小并正确决定在何处应用线程池与专用线程是一门艺术，但强制 VM 以您认为应该的方式调度线程并不是很好地利用您的时间。花一些时间与分析器一起找出您的程序将时间花在哪里将是一个更好的投资恕我直言。

# iphone - Sqlite：使用特殊字符进行排序丹麦语 æ ø å

> ID：11888769
> 
> 赞同：0
> 
> 时间：2012-08-09T17:25:37.753
> 
> 标签：iphone, sqlite, sorting

我的 Iphone 应用程序中有一个 sqlite 数据库。在 tableView 中使用 sectionIndexTitlesForTableView 时，我有一个名称需要排序的表。

sql语句为“ `SELECT * FROM buildings ORDER BY name ASC`”。这给出了一个排序的结果，但不知何故，特殊字符的排序失败了 - 丹麦 æ ø å。喜欢：

*   奥胡斯大学
*   奥胡斯
*   Øer Maritime Ferieby

Å 应该在 Ø 之后。

我已经尝试阅读 COLLATE，但对在这里做什么感到很茫然。请注意，sqlite 似乎工作正常 - 使用 UTF8 编码，应用程序中的一切看起来都很好。除了字母排序。

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:36:40.020

由于我只需要对 sectionForSectionIndexTitle 中使用的数组进行正确排序 - 表视图数据源我通过执行以下操作绕过了 sqlite 中的排序问题：

`NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"da_DK"]; sections = [sections sortedArrayUsingComparator:^(NSDictionary *first, NSDictionary *second) { NSString *str1 = [first objectForKey:@"section"]; NSString *str2 = [second objectForKey:@"section"];`

 ````
 return [str1 compare:str2
                  options:0
                    range:NSMakeRange(0, [str1 length])
                   locale:locale]; 
```` 

`}];`
我认为这样做是可以的，因为节数组中的条目数不会超过字母表中的字符数。

# cuda - 何时调用 cudaDeviceSynchronize？

> ID：11888772
> 
> 赞同：77
> 
> 时间：2012-08-09T17:25:41.857
> 
> 标签：cuda, gpu, gpgpu

何时`cudaDeviceSynchronize`真正需要调用该函数？

据我从 CUDA 文档中了解到，CUDA 内核是异步的，所以似乎我们应该`cudaDeviceSynchronize`在每次内核启动后调用。但是，我尝试了相同的代码（训练神经网络），有和没有任何`cudaDeviceSynchronize`，除了时间测量之前的一个。我发现我得到了相同的结果，但速度提高了 7-12 倍（取决于矩阵大小）。

所以，问题是是否有任何理由使用`cudaDeviceSynchronize`时间间隔测量。

例如：

*   在将数据从 GPU 复制回主机之前是否需要`cudaMemcpy`？

*   如果我做矩阵乘法，比如

    ```
    C = A * B
    D = C * F 
    ```

我应该放在`cudaDeviceSynchronize`两者之间吗？

从我的实验看来我没有。

为什么`cudaDeviceSynchronize`程序这么慢？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-08-09T18:22:48.273

尽管 CUDA 内核启动是异步的，但所有放在一个流中的与 GPU 相关的任务（这是默认行为）都是按顺序执行的。

所以，例如，

```
kernel1<<<X,Y>>>(...); // kernel start execution, CPU continues to next statement
kernel2<<<X,Y>>>(...); // kernel is placed in queue and will start after kernel1 finishes, CPU continues to next statement
cudaMemcpy(...); // CPU blocks until memory is copied, memory copy starts only after kernel2 finishes 
```

因此，在您的示例中，不需要`cudaDeviceSynchronize`. 但是，它可能对调试有用，以检测哪个内核导致了错误（如果有的话）。

`cudaDeviceSynchronize`可能会导致一些减速，但 7-12x 似乎太多了。可能是时间测量存在问题，或者内核速度非常快，并且显式同步的开销相对于实际计算时间来说是巨大的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-09T18:20:20.807

适合使用的一种情况`cudaDeviceSynchronize()`是当您`cudaStream`运行多个 s 时，您希望它们交换一些信息。一个真实的例子是量子蒙特卡罗模拟中的并行回火。在这种情况下，我们希望确保每个流在开始相互传递消息之前已经完成了一组指令的运行并获得了一些结果，否则我们最终会传递垃圾信息。使用此命令会大大降低程序速度的原因是`cudaDeviceSynchronize()`强制程序在继续之前等待设备上所有流中所有先前发出的命令完成（来自 CUDA C 编程指南）。正如您所说，内核执行通常是异步的，因此当 GPU 设备正在执行您的内核时，CPU 可以继续处理一些其他命令，向设备发出更多指令等，而不是等待。但是，当您使用此同步命令时，CPU 会被迫闲置，直到所有 GPU 工作完成后才能执行任何其他操作。这种行为在调试时很有用，因为由于设备代码的异步执行（无论是在一个流中还是在多个流中），您可能会在看似“随机”的时间发生段错误。`cudaDeviceSynchronize()`将强制程序在继续之前确保流的内核/memcpys 是完整的，这样可以更容易地找出发生非法访问的位置（因为在同步期间会出现故障）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-01-20T16:45:14.303

当您希望您的 GPU 开始处理一些数据时，您通常会执行内核调用。当您这样做时，您的设备（GPU）将开始执行您告诉它执行的任何操作。但是，与主机（CPU）上的正常顺序程序不同，它将继续执行程序中的下一行代码。cudaDeviceSynchronize 使主机（CPU）等待，直到设备（GPU）完成执行您已启动的所有线程，因此您的程序将继续执行，就好像它是一个正常的顺序程序一样。

在小型简单程序中，当您使用 GPU 进行计算时，您通常会使用 cudaDeviceSynchronize，以避免请求结果的 CPU 和完成计算的 GPU 之间的时序不匹配。使用 cudaDeviceSynchronize 可以更轻松地编写程序，但有一个主要缺点：您的 CPU 一直处于空闲状态，而 GPU 进行计算。因此，在高性能计算中，您通常会努力让 CPU 在等待 GPU 完成时进行计算。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-04T22:16:25.317

您可能还需要`cudaDeviceSynchronize()`在从内核启动内核后调用（动态并行）。

从这篇文章[CUDA 动态并行 API 和原则](https://developer.nvidia.com/blog/cuda-dynamic-parallelism-api-principles/)：

如果父内核需要子内核计算的结果来完成自己的工作，则必须通过显式同步 using 来确保子网格已完成执行，然后再继续`cudaDeviceSynchronize(void)`。该函数等待之前由调用它的线程块启动的所有网格完成。由于嵌套，它还确保线程块启动的网格的任何后代都已完成。

...

请注意，执行内核启动构造时，全局内存的视图是不一致的。这意味着在下面的代码示例中，没有定义子内核是读取并打印值 1 还是 2。为了避免竞争条件，子内核可以读取的内存不应在内核启动后由父内核写入，而是在显式同步之前。

```
__device__ int v = 0;

__global__ void child_k(void) {
  printf("v = %d\n", v);
}

__global__ void parent_k(void) {
  v = 1;
  child_k <<< 1, 1 >>>> ();
  v = 2; // RACE CONDITION
  cudaDeviceSynchronize();
} 
```

# css - 属性“名称”的正确替代方法是什么？

> ID：11888773
> 
> 赞同：2
> 
> 时间：2012-08-09T17:25:45.437
> 
> 标签：css, html

当我使用 w3c 验证器验证此页面时，我被告知“名称属性已过时”，但是，我找不到替代方法。我能找到的关于页面内链接的每篇文章似乎仍然使用 name 属性来指定。验证器上提到的方法（链接到“id”）似乎对我不起作用。

任何人都知道正确的替代方案，或者如何正确链接到 id？

另外，我希望能够链接到当前锚点所在位置上方的特定点......有没有办法更具体地了解页面滚动/跳转到的位置？

[http://firewalkcreative.com/2012/2012.html](http://firewalkcreative.com/2012/2012.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:31:04.880

您可以跳到具有指定标识符的任何元素，如下所示：

```
<div id="navigation"></div>

<div id="content"></div>

<div id="footer"></div>

<a href="#navigation">Skip to navigation</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:29:58.443

您可以使用类名或 id：

```
<a id="top"></a>

<a class="top"></a> 
```

或者您可以分配多个类以使其更具体

```
<a class="link top"></a> 
```

或者使用 html5 你可以这样做：

```
<a data-name="top" ></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:32:46.423

在过去，speek html 4，您可以访问内部链接，例如：

```
<a href="#bottom">link</a> 
```

目标是

```
<a name="bottom"></a> 
```

现在我们这样做：

```
<a href="#bottom">link</a> 
```

目标：

```
<foo id="bottom"></foo> 
```

你看我用 foo，因为它可以是你喜欢的任何元素

# php - 我应该对 Codeigniter 中的帖子内容进行什么样的验证？

> ID：11888781
> 
> 赞同：1
> 
> 时间：2012-08-09T17:26:05.933
> 
> 标签：php, validation, codeigniter

我正在使用 Codeigniter 开发 CMS，目前正在为我的所有字段设置一些验证规则。

我启用了 XSS 过滤和 CSRF 保护。我也在使用活动记录。

内容字段允许 HTML 字符，但我不想执行 JS/PHP 代码（XSS 过滤会阻止这种情况？）。

有了我目前设置的保护措施，我还有什么容易受到影响的吗？我应该采取哪些预防措施？我应该采用什么验证规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:28:19.670

您需要编写一个自定义回调函数来剥离 php/js 标记。

[http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:23:00.823

当 Javascript 事件不在脚本标签内时，CI 的 XSS 过滤器会漏掉它们。我不建议你关闭过滤器，但另外你应该在输入之后对数据进行编码，至少使用 PHP 内置函数，并在输出之前解码。

# linux - 手动安装 gcc

> ID：11888782
> 
> 赞同：0
> 
> 时间：2012-08-09T17:26:10.190
> 
> 标签：linux, ubuntu, installation, archlinux

我没有互联网连接，所以我通过它的 debian 包在我的 linux 系统上手动安装了 gcc。但我无法编译任何 c 代码。这是我的示例 c 代码。

```
#include <stdio.h>
main()
{
printf("Hellp world");
return 0;
} 
```

它显示的错误：

```
ocpe@blrkec241972d:~$ gcc -o hello hello.c
hello.c:1:19: error: stdio.h: No such file or directory
hello.c: In function âmainâ:
hello.c:4: warning: incompatible implicit declaration of built-in function âprintfâ 
```

我想我还没有安装编译器的所有依赖项。请建议我正确安装它的描述性方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:51:24.993

假设通过“手动安装”，您的意思是“使用`dpkg -i`”，那么您还需要安装`libc6-dev`. 我建议至少进一步安装`build-essential`它所依赖的一切。

Debian 实际上有一些程序可以帮助离线安装软件包。一种选择当然是使用 CD/DVD 映像。另一种是使用类似 apt-offline 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:35:25.790

这个`gcc -Wall hello.c -o hello -I/usr/include/stdio.h`呢？

您可以使用以下命令查看包含搜索路径：

```
echo | gcc -v -x c -E - 
```

在我的 Ubuntu Linux 机器上，我可以看到上一个命令的输出：

```
#include \"...\" search starts here:
/usr/lib/gcc/i686-linux-gnu/4.6.1/include
/usr/local/include
/usr/lib/gcc/i686-linux-gnu/4.6.1/include-fixed
/usr/include/i386-linux-gnu
/usr/include 
```

**编辑**：

安装`build-essential`

从这里下载：[http](http://packages.debian.org/squeeze/i386/build-essential/download) ://packages.debian.org/squeeze/i386/build-essential/download （假设你是 32 位），然后像这样安装下载的包：

```
dpkg -i build-essential.deb 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:58:48.520

在我的 Debian 系统上，头文件在另一个包中`libc6-dev`。您可能错过了这一点（我猜还有其他一些人）。

# api - Disqus API 请求查找用户未答复的评论

> ID：11888783
> 
> 赞同：2
> 
> 时间：2012-08-09T17:26:14.467
> 
> 标签：api, request, disqus

我正在尝试构建 Disqus API 请求以查找用户未答复的评论（例如，过去 5 天）。

因此，响应应该是带有时间框架的帖子/列表（因为）。问题是我怎样才能对这个请求提出另外两个条件： - 帖子作者不是版主 - 帖子没有答案（回复）

我将非常感谢您的帮助

# selenium - 如何通过 Java 中的 Selenium/Webdriver 从复选框列表中单击一个复选框？

> ID：11888786
> 
> 赞同：2
> 
> 时间：2012-08-09T17:26:28.040
> 
> 标签：selenium, webdriver, selenium-webdriver

我正在使用 Selenium 2 (Webdriver) 对网页进行自动化测试。但是我想知道是否有办法使用 webdriver 框架从复选框列表中检查复选框？

我尝试了这段代码，但无济于事：

```
IWebElement box = ffDriver.FindElement(By.XPath("//*[@id='ctl00_ContentPlaceHolder1_Adde_div']"));
List<IWebElement> chkbox = box.FindElements(By.TagName("input"));
ffDriver.FindElement(By.Id("ctl00_ContentPlaceHolder1_Add_lstCategory_0"));         
//chkbox.g(2).click(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:56:28.713

如果您已经知道复选框的 id，您可以使用此方法单击选择它：

```
string checkboxXPath = "//input[contains(@id, 'lstCategory_0')]"
IWebElement elementToClick = driver.FindElement(By.XPath(checkboxXPath));
elementToClick.Click(); 
```

假设您在页面上有多个具有相似 ID 的复选框，您可能需要将“lstCategory_0”更改为更具体的内容。

这是用 C# 编写的，但适应其他语言应该不难。此外，如果您使用更多信息编辑您的帖子，我可以更好地微调这个示例。

让我知道这个是否奏效！

* * *

我已经访问了该站点并使用以下代码成功地与下拉小部件中的复选框进行了交互：

```
/** Set XPath Variables **/
string dropdownWidgetXPath = "//span[contains(@id, 'selInd')]";
string checkboxXPath = "//input[contains(@id, 'selInd')]";

/** Navigate to the page **/
driver.Navigate().GoToUrl("http://www.jobserve.com/us/en/Job-Search/");

/** Click the dropdown widget **/
IWebElement dropdownWidgetElement = driver.FindElement(By.XPath(dropdownWidgetXPath));
dropdownWidgetElement.Click();

/** Identify all checkboxes present **/
var allCheckboxes = driver.FindElements(By.XPath(checkboxXPath));

/** Click each checkbox and wait so that results are visible **/
foreach(IWebElement checkbox in allCheckboxes)
{
     checkbox.Click();
     System.Threading.Thread.Sleep(500);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T13:35:08.197

在 Selenium webdriver 中，您可以这样做：

所有的复选框都必须有一些唯一的标识符，然后你可以简单地通过 Id 找到它或其他一些属性）。

然后你可以试试这个：

```
driver = new FirefoxDriver(); 
driver.findElement(By.xpath("//input[@name='mycheckboxgroup' and @title='movies']")).click();    
driver.findElement(By.xpath("//input[@name='mycheckboxgroup' and @title='songs']")).click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T13:09:48.523

> 通过复选框的 id，您可以使用以下代码：

```
IWebElement elementToClick = driver.FindElement(By.ID(ctl00_ContentPlaceHolder1_Add_lstCategory_0));
elementToClick.Click(); 
```

如果您不知道 id，请通过 xpath 使用以下代码：

```
String checkbox = "//input[@type='checkbox']"
IWebElement elementToClick = driver.FindElement(By.XPath(checkbox ));
elementToClick.Click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T14:42:57.367

里面的代码`selenium`很简单：

```
new WebDriverWait(driver, TimeSpan.FromSeconds(timeToHoldOn)).Until(ExpectedConditions.ElementExists((By.ClassName("ckb"))));
IWebElement dropdownWidgetElement = driver.FindElement(By.ClassName("ckb"));
dropdownWidgetElement.Click();
Thread.Sleep(1000);
var allCheckboxes = driver.FindElements(By.ClassName("ckb"));
foreach (IWebElement checkbox in allCheckboxes) {
  checkbox.Click();
  System.Threading.Thread.Sleep(250);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-23T16:21:10.420

这就是我检查和取消选中所有框的方式，它必须有一个 ID 或类。

身份证示例：

```
driver.FindElement(By.Id("someid")).click(); 
```

类名示例：

```
driver.FindElement(By.ClassName("someid")).click(); 
```

它简短，甜蜜，更重要的是它有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-04T06:42:52.423

尝试使用这段用java编写的代码

```
String checkboxes = "//*[@type='checkbox']";
List<WebElement> elementToClick = driver.findElements(By.xpath(checkboxes));
for (WebElement AllCheck : elementToClick) {
    AllCheck.click();
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-10T14:03:49.800

**Java，使用循环一次单击多个复选框。**

```
**Sample Xpath :**

CheckBox1 Xpath : //input[@class='mycheck' and @id='1']
CheckBox2 Xpath : //input[@class='mycheck' and @id='2'] 
```

> 使用 findelements 获取所有元素复选框：
> 
> List WebElement ele = driver.findElements(By.xpath("//input[@class='mycheck']"));

通过保留 ID 将 Xpath 设为字符串并将 ID 分配为 i。

```
for(int i=1; i<=ele.size(); i++) { driver.findElement(By.xpath("//input[@class='mycheck' and @id='" +  + i + "']")).click(); } 
```

我获取每个循环的值，xpath 匹配复选框并单击它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-21T15:43:58.260

您可以通过选择包含它们的元素并像数组一样遍历每个单选按钮/复选框来选择每个单选按钮/复选框。

例如，这里的 ul 元素包含一些单选按钮。我先选择 ul 元素，然后我可以使用正确的索引（在 [] 内）选择每个收音机

```
 //Select the ul containing the radio buttons I want to click/select

   var ul = driver.FindElement(By.Id("ul_containing_radio_buttons"));

   //use forloop to click each button in turn         
   for (var i = 2; i <= 0; i--)
         {
            var button= ul.FindElements(By.TagName("input"))[i];
            //i is the index of the radio button in out ul element
            button.Click();
         } 
```

# c# - 如何显示当前的动画 gif 速度？

> ID：11888788
> 
> 赞同：0
> 
> 时间：2012-08-09T17:26:32.060
> 
> 标签：c#

我有这个类，我从动画 gif 中获取信息：

```
using System;
using System.Drawing;
using System.Drawing.Imaging;
using System.Collections.Generic;
using System.IO;

public class AnimatedGif
{
    private List<AnimatedGifFrame> mImages = new List<AnimatedGifFrame>();
    public AnimatedGif(string path)
    {
        Image img = Image.FromFile(path);
        int frames = img.GetFrameCount(FrameDimension.Time);
        if (frames <= 1) throw new ArgumentException("Image not animated");
        byte[] times = img.GetPropertyItem(0x5100).Value;
        int frame = 0;
        for (; ; )
        {
            int dur = BitConverter.ToInt32(times, 4 * frame);
            mImages.Add(new AnimatedGifFrame(new Bitmap(img), dur));
            if (++frame >= frames) break;
            img.SelectActiveFrame(FrameDimension.Time, frame);
        }
        img.Dispose();
    }
    public List<AnimatedGifFrame> Images { get { return mImages; } }
}

public class AnimatedGifFrame
{
    private int mDuration;
    private Image mImage;
    internal AnimatedGifFrame(Image img, int duration)
    {
        mImage = img; mDuration = duration;
    }
    public Image Image { get { return mImage; } }
    public int Duration { get { return mDuration; } }
} 
```

然后在构造函数中的 Form1 中循环图像列表并获取每个图像的持续时间。因此，在这种情况下的列表中有 4 张图像，每张图像的持续时间为 1。

因此，当我显示动画 gif 时，我试图在标签中显示速度。但是有两个问题：

1.  最后的循环告诉我速度现在是 2 而不是 4。
2.  结果的标签一直是 0 和 2/100 不是 0。

我想要做的是显示实际速度。就像在程序 Easy gif animator 5 中一样：

如果我站在 4 的一张图像上，我看到它的速度是 0.01 秒，延迟 1 是 1/100 秒。

如果我在程序中标记所有图像，我会得到 0.04 秒的速度。

也许我在速度和持续时间之间感到困惑。

我想获得动画 gif 的速度。

这是我在 Form1 中的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MyAnimatedGifEditor
{

    public partial class Form1 : Form
    {
        int speed;
        Image myImage;
        AnimatedGif myGif;

        public Form1()
        {
            InitializeComponent();

            myImage = Image.FromFile(@"D:\fananimation.gif");
            myGif = new AnimatedGif(@"D:\fananimation.gif");
            for (int i = 0; i < myGif.Images.Count; i++)
            {

                speed = myGif.Images[i].Duration;
                speed++;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void openToolStripMenuItem_Click(object sender, EventArgs e)
        {
            pictureBox1.Image = myImage;
            label2.Text = (speed / 100).ToString();
        }
    }
} 
```

选择所有图像后来自easy gif animator的图像：

![在此处输入图像描述](../Images/da3de50a9d32c66392ccbf7bac1975df.png)

最后，我想在两个标签上显示动画 gif 的持续时间和速度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:01:56.440

循环浏览动画 gif 图像的代码部分存在问题。您可能在这里需要两个单独的变量，而不仅仅是`speed`.

所以像

```
for (int i = 0; i < myGif.Images.Count; i++)
{
    totalDuration += myGif.Images[i].Duration;
    count++;
} 
```

为了解决你的整数数学问题，除以 100.0 而不是 100：

```
label2.Text = (totalDuration / 100.0).ToString(); 
```

# android - 通过按钮在 listView 内编辑 TextView 文本

> ID：11888791
> 
> 赞同：0
> 
> 时间：2012-08-09T17:26:48.927
> 
> 标签：android, android-listview, android-arrayadapter

我有 ListView。我也有按钮。它们位于RelativeLayout 内部。我希望能够通过按钮 onClick(View v) 更改所选 ListView 项目的 TexView 文本。列表视图布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/icon"
        android:layout_width="22px"
        android:layout_height="22px"
        android:layout_marginLeft="4px"
        android:layout_marginRight="10px"
        android:layout_marginTop="4px"
        android:src="@drawable/ic_launcher" >
    </ImageView>

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+id/label"
        android:textSize="20px" >
    </TextView>

</LinearLayout> 
```

主要活动：

```
public class MainActivity extends Activity {
    private TextView mTextView;
    private ListView my_list;
    private MyArrayAdapter adapt;
    Button mybutton;

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle); 

        String[] mContacts = {
                "Jacob Anderson dsfd sdfdf sdfsd sdfds", "Emily Duncan", "Michael Fuller", 
                "Emma Greenman", "Joshua Harrison", "Madison Johnson",
                "Matthew Cotman", "Olivia Lawson", "Andrew Chapman", 
                "Daniel Honeyman", "Isabella Jackson", "William Patterson", 
                "Joseph Godwin", "Samantha Bush", "Christopher Gatema55"};

        setContentView(R.layout.activity_main);
        my_list=(ListView)findViewById(R.id.listView1);
        adapt=new MyArrayAdapter(this, mContacts, 0);
        my_list.setAdapter(adapt);

        mybutton = (Button)findViewById(R.id.button1);
        mybutton.setOnClickListener(new OnClickListener() {     
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

如果我想像这样编辑 TextView 应该怎么做：

```
 SpannableString text = new SpannableString("Lorem ipsum dolor sit amet");
    text.setSpan(new ForegroundColorSpan(Color.RED), 0, 5, 0);
    TextViewOfSelectedItem.setText(text, BufferType.SPANNABLE); 
```

如何通过项目位置获取 ListView 项目的 TextViewOfSelectedItem 或 TextView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T23:24:16.443

您可以使用 获取所选项目的文本`setOnItemClickListener()`。你可以使用这种方式。

```
 my_list.setOnItemClickListener(new OnItemClickListener() {

  public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
 long arg3) {
         // TODO Auto-generated method stub
    String  getSelectedTextOfList = yourList.get(pos); // here you can get selected item.
 }
}); 
```

# asp-classic - 如何知道被点击的网页地址？

> ID：11888800
> 
> 赞同：2
> 
> 时间：2012-08-09T17:28:05.147
> 
> 标签：asp-classic

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:35:32.197

您必须抓住`referrer`用户重定向到登录页面的时间。存储它并在登录过程后将用户重定向回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:19:35.090

你可以将他重定向到

```
/login.asp?next=url-of-where-the-user-tried-to-go 
```

一旦他登录，将他重定向到参数`next`。这是非常常见的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-28T17:50:51.273

# android - 意图服务未填充屏幕

> ID：11888801
> 
> 赞同：0
> 
> 时间：2012-08-09T17:28:14.070
> 
> 标签：android, android-intent, timer, intentservice

我已经设置好了，当用户点击“打卡”时，它会启动 IntentService，然后 Intent 服务会更新 UI，唯一的问题是它不工作....这是我的主要活动页面代码：

```
 package com.famousmods.payme;

    import java.util.Timer;
    import java.util.TimerTask;

    import android.os.Bundle;
    import android.app.Activity;
    import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.graphics.Color;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;
import android.graphics.PorterDuff;

public class PayTracker extends Activity {
private ResponseReceiver receiver;
private static double Reserve;
private static int Reserve1;
public static double money;
public static double counter;
private static int go;
private static int countdown;
public static int convert;
public static double HW;
public static double OTW;
public static double HPD;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pay_tracker);
    getActionBar().setDisplayHomeAsUpEnabled(true);
 // register reciver
    IntentFilter filter = new IntentFilter(ResponseReceiver.ACTION_RESP);
    filter.addCategory(Intent.CATEGORY_DEFAULT);
    receiver = new ResponseReceiver();
    registerReceiver(receiver, filter);
 // Receive messages from options page
   double pHW, pOTW, pHPD;
    Intent intent = getIntent();
    pHW = intent.getDoubleExtra(Options.MESSAGE_HW, 0);
    pOTW = intent.getDoubleExtra(Options.MESSAGE_OTW, 0);
    pHPD = intent.getDoubleExtra(Options.MESSAGE_HPD, 0);
    if(pHW != 0){
        HW = pHW;
        OTW = pOTW;
        HPD = pHPD;
    }
 // Color buttons
    Button buttonc = (Button) findViewById(R.id.clockin);
    buttonc.getBackground().setColorFilter(0xFF00FF00, PorterDuff.Mode.MULTIPLY);
    Button buttond = (Button) findViewById(R.id.clockout);
    buttond.getBackground().setColorFilter(0xFFFF0000, PorterDuff.Mode.MULTIPLY);

     final Button b = (Button) findViewById(R.id.clockout);
     b.setOnClickListener(new OnClickListener() {
         public void onClick(View v) {

             }
     });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_pay_tracker, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    };
    return super.onOptionsItemSelected(item);
}

public void sendMessage(View view) {

    //Start IntentService
    Intent msgIntent = new Intent(this, SimpleIntentService.class);
    msgIntent.putExtra(SimpleIntentService.PARAM_IN_HW, HW);
    msgIntent.putExtra(SimpleIntentService.PARAM_IN_OTW, OTW);
    msgIntent.putExtra(SimpleIntentService.PARAM_IN_HPD, HPD);
    startService(msgIntent);//}   
}

public class ResponseReceiver extends BroadcastReceiver {
    public static final String ACTION_RESP = "com.famousmods.payme.action.MESSAGE_PROCESSED";
    @Override
    public void onReceive(Context context, Intent intent) {

        // Update UI, new "message" processed by SimpleIntentService
        final TextView t1 = (TextView) findViewById(R.id.yourpay);
        t1.setTextColor(Color.parseColor("#008000"));
        final TextView t2 = (TextView) findViewById(R.id.payper);
       String end = intent.getStringExtra(SimpleIntentService.PARAM_OUT_END);
       String result = intent.getStringExtra(SimpleIntentService.PARAM_OUT_RESULT);
       t2.setText(result);
       t1.setText(end);
    }

}

@Override
public void onDestroy() {
    this.unregisterReceiver(receiver);
    super.onDestroy();  

} 
```

}

这是我的意图服务页面，它的设置是为了在意图启动时启动一个计时器，每 20 毫秒应该将新意图发送回活动页面，这是代码：

```
 package com.famousmods.payme;

import java.util.Timer;
import java.util.TimerTask;

import com.famousmods.payme.PayTracker.ResponseReceiver;

import android.app.IntentService;
import android.content.Intent;

public class SimpleIntentService extends IntentService {

public static final String PARAM_OUT_END = "end";
public static final String PARAM_OUT_RESULT = "result";
public static final String PARAM_IN_HW = "hourly wage";
public static final String PARAM_IN_OTW = "overtime";
public static final String PARAM_IN_HPD = "hours per day";
public static String end;
public static String result;
private static double Reserve;
private static int Reserve1;
public static double money;
public static double counter;
private static int go;
private static int countdown;
public static int convert;

public SimpleIntentService() {
    super("SimpleIntentService");

}

@Override
protected void onHandleIntent(Intent intent) {
    // recieve from paytracker
    double HW = intent.getDoubleExtra(PARAM_IN_HW, 1);
    double OTW = intent.getDoubleExtra(PARAM_IN_OTW, 1);
    double HPD = intent.getDoubleExtra(PARAM_IN_HPD, 1);
    // Calculate pay per second
    final double PPS = (HW/3600);
    final double DPPS = (PPS/50);
    final double OTPPS = (OTW/3600);
    final double DOTPPS = (OTPPS/50);
    final double HPDPS = (HPD*3600);
    final double DHPDPS = (HPDPS*50);

    Timer t = new Timer();
    t.schedule(new TimerTask() {
        @Override
        public void run() {
            new Runnable() {

                public void run() {
                    if(DHPDPS==0){
                        money = (DPPS+Reserve);
                        Reserve = (money);
                        end = String.format("%1f", money);
                       //t1.setText("$" + end);
                    }else if(counter > DHPDPS && DOTPPS != 0 && DHPDPS != 0){
                        money = (DOTPPS+Reserve);
                        Reserve = (money);
                        end = String.format("%1f", money);
                        //t1.setText("$" + end);
                    } else{

                        money = (DPPS+Reserve);
                        Reserve = (money);
                        end = String.format("%1f", money);
                        //t1.setText("$" + end);
                    }
                    counter++;
                    //if(counter == 3000)
                    //   t.cancel();

                    // Display pay per second
                    if(counter <= DHPDPS || DHPDPS == 0){
                        result = String.format("%.8f", PPS);
                    }else{
                    //  t2.setText("Your pay per second is: $"+result2);
                        result = String.format("%.8f", OTPPS);
                    }

                 // Broadcast intent
                    Intent broadcastIntent = new Intent();
                    broadcastIntent.setAction(ResponseReceiver.ACTION_RESP);
                    broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);
                    broadcastIntent.putExtra(PARAM_OUT_END, end);
                    broadcastIntent.putExtra(PARAM_OUT_RESULT, result);
                    sendBroadcast(broadcastIntent);
                }
            }; 
        }
    }, 20, 20);
}

} 
```

谢谢大家！

# doctrine - 获取关联是否存在

> ID：11888804
> 
> 赞同：0
> 
> 时间：2012-08-09T17:28:24.370
> 
> 标签：doctrine, doctrine-orm

我像这样执行一个简单的查询，但会丢失所有与剧集没有关联的对象：

```
$query = $this->getEntityManager()
            ->createQuery('
        SELECT p,e
        FROM AcmeDemoBundle:Place p
        JOIN p.episodes e
        WHERE p.id = :id'
        )
            ->setParameter('id',$id); 
```

**这是一个简单的组合：**

```
 /**
 * @ORM\OneToMany(targetEntity="Episode", mappedBy="place")
 */
protected $episodes; 
```

我的查询会自动丢弃具有空 $episodes 集合的对象。有谁知道为什么？我确信这是有道理的，但我无法弄清楚。不管有没有asso剧集，有没有办法获取对象？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:33:17.970

我认为你想要 a`LEFT JOIN`而不仅仅是 a `JOIN`。

JOIN 只给出左边的记录，右边也有记录。
LEFT JOIN 从左侧给出记录，无论它们是否在右侧也有记录。

# asp.net - Windows 7机器无法识别本地主机

> ID：11888807
> 
> 赞同：1
> 
> 时间：2012-08-09T17:28:30.520
> 
> 标签：asp.net, iis, localhost, port

我在我的 Windows 7 机器上安装了 IIS。

但是当我尝试浏览本地主机时，我得到了 404。

我试着把 netstat 我看到了

```
Proto  Local Address          Foreign Address        State 
 TCP    127.0.0.1:80           ABCHOME:49466        TIME_WAIT
 TCP    127.0.0.1:80           ABCHOME:49468        TIME_WAIT 
```

ABCHOME 是计算机名称。知道如何找到那个外国地址以及如何停止监听端口 80？

我尝试卸载并重新安装 IIS，但没有运气。

谢谢你的帮助。

编辑：我已经在主机文件 127.0.0.1 localhost 中有以下条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:34:36.593

外部地址只是您自己的机器试图访问自己。该端口是半随机的，由浏览器从可用端口池中获取。

要从 80 更改 IIS 侦听端口，请尝试：http: [//support.microsoft.com/kb/149605](http://support.microsoft.com/kb/149605)

> “微软互联网信息服务 7.0
> 
> 打开 Internet 信息服务 (IIS) 管理器。选择您要配置的网站。在操作窗格中，单击绑定。单击添加以添加新的站点绑定，或单击编辑以更改现有绑定。单击确定以应用更改。”

# azure - Azure 表存储中属性的默认值

> ID：11888812
> 
> 赞同：0
> 
> 时间：2012-08-09T17:28:51.917
> 
> 标签：azure

我正在使用 Azure 表存储，并且对实体的空值和默认值如何工作有疑问。

具体来说，我有一个扩展类`TableServiceEntity`。此类的默认构造函数为各种属性设置默认值，如下所示：

```
public class MyEntity: TableServiceEntry
{
    public MyEntity() : MyEntity("invalid", "invalid") {}
    public MyEntity(string f1, string f2) 
    {
        Field1 = f1;
        Field2 = f2;
    }

    public string Field1 { get; set; }
    public string Field2 { get; set; }
 } 
```

我通过构建以下实体在本地（在模拟器上）测试了这个类：

```
MyEntity e = new MyEntity("hello", null); 
```

我上传了实体，然后在本地检索它，这两个字段分别设置为“hello”和 null，正如预期的那样。

但是，当我将同一个实体上传到 Azure 云时，我收到的回复分别是两个属性的“hello”和“invalid”。

我保存实体的代码如下：

```
public class MyTable : TableServiceContext
{
    ...
    public void AddEntry(MyEntity e)
    {
        this.AddObject("MyTable", e);
        this.SaveChangesWithRetries(SaveChangesOptions.ReplaceOnUpdate);
    }
} 
```

我可以通过使默认构造函数不带参数来解决这个问题，但现在我觉得我对表存储的工作原理有一个基本的误解。当您为 TableServiceEntry 的属性指定默认值时，这些属性是否会成为云中表中每一行的默认值，而不是在模拟器中（即云与 SQL Express）？如果是这样，为什么我不能`null`在云中覆盖这些默认值？是否有任何文档解释默认构造函数和`null`s 如何在 Azure 表存储中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:44:15.457

是的，表存储在模拟器和云中的行为方式有所不同。SQL Server 中实现的模拟器返回为表定义的所有列，即使没有为行定义，与列值（空/非空）无关。在云中，设置为 null 的属性既不会存储也不会在 REST 调用中返回。

一个快速的解决方法是检查属性集中的空值，并且仅在传入的值不为空时才改变属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:24:30.590

在某些情况下，Devstorage 和实际存储的行为不同，但我从未见过它们以不同的方式处理 NULL 值。而且我当然从未见过它将值从 NULL 更改为“无效”，正如您所暗示的那样。您确定您没有不小心将错误的值上传到云端吗？您可能想再试一次，并使用 Fiddler 查看实际的请求和响应值。

# nancy - NancyFx 使用嵌入式视图

> ID：11888813
> 
> 赞同：5
> 
> 时间：2012-08-09T17:28:56.707
> 
> 标签：nancy

我正在尝试利用 NancyFX 的嵌入式视图功能，但无法实现。我用过那个[例子](http://simoncropp.com/embeddingviewsasresourcesinnancyfx)。但是，看起来南希并没有`ResourceViewLocationProvider`用来定位我的视图。

我的引导程序配置，

```
 protected override void ConfigureApplicationContainer(IKernel existingContainer)
    {
        base.ConfigureApplicationContainer(existingContainer);

        var currentAssembly = GetType().Assembly;
        ResourceViewLocationProvider.RootNamespaces.Add(currentAssembly, "Candidate.Nancy.SelfHosted.Views");
    }

    protected override NancyInternalConfiguration InternalConfiguration
    {
        get { return NancyInternalConfiguration.WithOverrides(x => x.ViewLocationProvider = typeof(ResourceViewLocationProvider)); }
    } 
```

我的模块，

```
public class AccountModule : NancyModule
{
    private readonly IUserManagement _userManagement;

    public AccountModule(IUserManagement userManagement) : base("/account")
    {
        _userManagement = userManagement;
        Get["/login"] = p => View["Login.cshtml"];
    }
} 
```

Login.cshtml 放在 /Views/Account/Login.cshtml 下并标记为嵌入资源。

如果我运行应用程序，我会得到 HTTP 500。在我看来，它试图在文件系统而不是程序集资源上找到它。

> Nancy.RequestExecutionException：哦，不！---> Nancy.ViewEngines.ViewNotFoundException：无法找到视图“Login.cshtml”当前可用的视图引擎扩展：sshtml、html、htm、cshtml、vbhtml 检查的位置：Login.cshtml、views/Login.cshtml、views/account /Login.cshtml,account/Login.cshtml,views/Account/Login.cshtml,Account/Login.cshtml 根路径：D:\Development\Projects\candidate.net\src\Candidate.Nancy.Selfhosted\bin\Debug at Nancy.ViewEngines.DefaultViewFactory.GetRenderedView(String viewName, Object model, ViewLocationContext viewLocationContext) at System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,Tret](CallSite 站点, T0 arg0, T1 arg1, T2 arg2, T3 arg3) 在 Nancy.ViewEngines.DefaultViewFactory.RenderView(String viewName, Object model,
> 在 Nancy.NancyEngine.ResolveAndInvokeRoute(NancyContext context) 在 Nancy.NancyEngine.InvokeRequestLifeCycle(NancyContext context, IPipelines pipelines) --- 内部异常堆栈跟踪结束 ---
> 在 Nancy.NancyEngine.InvokeOnErrorHook(NancyContext context, ErrorPipeline pipeline, Exception ex )

**更新：**此问题已在 Nancy 0.12.1.0 中[解决。](https://github.com/NancyFx/Nancy/issues/705#issuecomment-8808424)

# qt4 - 在 QT c++ 中使对话框窗口持久化

> ID：11888818
> 
> 赞同：0
> 
> 时间：2012-08-09T17:29:17.183
> 
> 标签：qt4

我在 QT 中有一个主窗口和一个对话框窗口。我希望用户在进入主窗口之前先登录。哦，是的，对话窗口是我的登录页面。可以建议如何进行。我有一个按钮 btnSubmit，它连接到一个名为 getLoginDetails() 的插槽。在进入主窗口之前，我如何确保用户已登录。当我输入这个时，没有错误，但没有出现登录表单。

```
int main (){

QApplication app(argc, argv);

    LoginAccess objLA;
bool status;
status = objLA.getLoginDetails2();
if (status==false){
    LoginForm objL;
    objL.show();
}else{
 mainForm objM;
 objM.show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:53:29.747

你需要一个 application.exec() 来启动事件循环——即使你先做一个模态对话框

```
int main(int argc, char *argv[])
{
QApplication app(argc, argv);

MainWindow win;

LoginAccess objLA;
    if ( ! objLA.getLoginDetails2() ) {
         exit(1);
    }

    win.show();
    return app.exec();  
} 
```

# iphone - 自动调整标签，CGSize 给出零值

> ID：11888819
> 
> 赞同：0
> 
> 时间：2012-08-09T17:29:25.403
> 
> 标签：iphone, ios, xcode, uilabel

我想根据标签的大小更改标签的大小。我在第一行设置了一个断点，当我往下走时，当我到达以 CGSize 开头的行时，我看到“tagsSize”实际上有一个值，然后在该行之后将其更改为零。我实际上在同一个项目的不同类中使用了相同的代码，当然还有变化，它工作正常。我可能正在查看一些东西。请看一下，让我知道我做错了什么。

```
_tagsArray = [[NSMutableArray alloc] initWithObjects:@"Astronaut", @"iPhone", @"iOS", @"Software Engineer", @"Carpentry", @"Landscape Design", @"Doctor", @"Actor", @"CEO", @"iOS Developer", @"Software Engineer", @"Carpentry", @"Landscape Design", @"Doctor", @"Actor", @"CEO", @"iOS Developer", nil];
_tagsString = [_tagsArray componentsJoinedByString:@", "];

_tagsLbl.font = [UIFont fontWithName:@"Helvetica" size:18];
CGSize tagsSize = [_tagsString sizeWithFont:[_tagsLbl font]];

NSLog(@"%f", tagsSize.width);
CGFloat tagsWidth = tagsSize.width; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:35:33.950

你在哪里分配 UILabel？我认为当你使用它时它是 nil ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:36:24.140

试试这个：

```
CGSize size = [string sizeWithFont:[UIFont boldSystemFontOfSize:fontb]
                        constrainedToSize:CGSizeMake(TEXTLABEL_WIDTH, 1000) 
                               lineBreakMode:UILineBreakModeCharacterWrap]; 
```

# c# - MVC3 C# Razorview 使用 Javascript 打印 PartialView

> ID：11888820
> 
> 赞同：0
> 
> 时间：2012-08-09T17:29:26.707
> 
> 标签：c#, javascript, asp.net-mvc-3, razor, partial-views

我正在尝试让按钮打印部分视图。

| 主视图 | 部分视图 |

| 用户 | 简介 |

在用户之上，我有链接，用户可以单击以访问他的个人资料或他的报告等...我创建了一个链接来使用 Media Print CSS 打印他们的个人资料，使其在纸上看起来很完美。

我遇到的问题是让它工作。

```
function print_url () {
  location: url;
  print();
}
<li data-username="@Model.UserName"><a href="javascript:print_url('URL/Home/ContentView?username=@Model.UserName')">Print Profile</a></li> 
```

这必须适用于所有浏览器。Chrome 只是说没有可用的视图，firefox 没有响应，IE 什么也没有 :(。

如果您有任何想法，那就太好了。

AJAX

```
getUserData: function (elem) {
  $elem = $(elem).closest("[data-username]");
  var username = $elem.data("username");
  var profile = $elem.data("profile");
  var directReport = $elem.data("direct-report");
  $.ajax({
    url: 'Home/ContentView?username=' + username,
    type: 'GET',
    data: username,
    data: profile,
    data: directReport,
    beforeSend: function () {
      $('#loader').css('display', 'block');
    },
    success: function (result) {
      $("#content").html(result).scrollTop(result);
      //$("#tabs").fadeIn('1500');
      //console.log(result + '\n\n DONE');
    },
    error: function (e, msg) {
      //console.log(e, msg);
    }
  }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:32:53.780

弃儿，

好的，你输入一个`location: url`，然后（一旦我想象它已经转到 url），你调用 print()。但是，该语句将永远不会被命中，因为更改位置类似于返回语句，即所有执行都在该点终止。

是否有可能对您有用的替代方案，即执行 jquery ajax 调用，或者 jquery 不适用（我看不到标签）。我们在这里快速行动！:-)

另外，顺便说一句，您的 URL 定义非常脆弱，您至少应该考虑使用`@Url.Action()`ie：

```
<a href="javascript:print_url('@Url.Action("action", "controller, new {username=@Model.UserName}, null)'"> 
```

...相反，无论您的托管配置如何，这都将保证保真度。Tho'，我坚定的建议是使用 ajax 来调用你的`partialview`; 根据您提供的信息，没有其他方法可以为您工作。

# javascript - 选择下拉选项时显示文本

> ID：11888823
> 
> 赞同：2
> 
> 时间：2012-08-09T17:29:42.157
> 
> 标签：javascript

我试图找出一种方法来根据用户选择的下拉项目在下面的“结果”div中显示一些文本。我知道如何使用普通输入字段执行此操作，但我无法理解如何将“选项值”传递到 javascript 函数中。这是我到目前为止尝试过的......

在下面的代码中，我只是试图成功地将选择的任何下拉项值传递到 javascript 函数中，并在“结果”div 中打印出该值的名称......一旦我能够做到这一点，我会实现上述的“提示”功能。

我的标记：

```
<select onChange="dropdownTip(this.value)" name="search_type" style="margin-right:10px; margin-top:2px;">
    <option selected="selected" value="fruit_search">fruits</option>    
    <option value="veggies_search">veggies</option>
    <option value="animals_search">animals</option>
    <option value="all_search">all</option>
</select>

<div id="result"></div> 
```

我的 JavaScript：

```
<script type="text/javascript">
    function dropdownTip(value){
        document.getElementByID("result").innerHTML = value;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:46:28.547

这是你想要的吗？检查下面的小提琴

> [http://jsfiddle.net/b6ydm/](http://jsfiddle.net/b6ydm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:42:29.760

尝试这个：

```
<select onChange="dropdownTip()" id="select" name="search_type" style="margin-right:10px; margin-top:2px;">
    <option selected="selected" value="fruit_search">fruits</option>    
    <option value="veggies_search">veggies</option>
    <option value="animals_search">animals</option>
    <option value="all_search">all</option>
</select>

<div id="result"></div>

<script type="text/javascript">
    function dropdownTip(){
        var value = document.getElementById('select').value;
        document.getElementByID("result").innerHTML = value;
    }
</script> 
```

# php - 我想定义列数而不是行数

> ID：11888827
> 
> 赞同：1
> 
> 时间：2012-08-09T17:29:50.220
> 
> 标签：php, arrays

我希望能够定义列数，但是，这并没有定义列。当您看到输出时，您会注意到它更改了行数而不是列数。

我已经尽可能详细地记录了，感谢您的所有帮助！第一次发帖，如有错误请多多包涵：）

```
public function SplitIntoColumns(array $arrayTranspose=array(), $no_of_cols=3,$min=0) {
    $result = '<div class="column">'."\n";
    // The 2D array
    $colArr = array();
    // The tmpArray
    $tmpArray = array();
    if (count($arrayTranspose) <= $min) {
        $result .= implode("\n", $arrayTranspose);
    }
    else {
        // Set size of the array    
        $cnt = intval(floor(count($arrayTranspose)));
        $row = 0;
        $col = 0;
        // Create Multidimensional array from Single dimensional array
        foreach($arrayTranspose as $key => $val){
            $colArr[$col][$row] = $arrayTranspose[$key];
            // Store the data from the array
            $result .= $colArr[$col][$row]." ";
            $col++;
            // If columns are equal to the set value then start
            // From the beginning on a new row
            if($col == $no_of_cols) {
                $col = 0;
                $row++;
                // create columns
                $result .= '</div><div class="column">'."\n";   
            }
        }
    }
    // This says numberOfRows, but it is actually the number of columns
    $numberOfRows = intval((floor($cnt) / $no_of_cols));
    // A loop to transpose into columns
    for($i = 0; $i <= $no_of_cols; $i++) {
        for($j = 0; $j <= $numberOfRows; $j++){
            $tmpArray[$j][$i] = $colArr[$i][$j];
            $result2 .= $tmpArray[$j][$i].' ';  
        }
        $result2 .= '</div><div class="column">'."\n";
    }
    // return stuff
    $result2 .= "</div> <!-- /.column -->\n";
    return $result2;
}
}
$Util = new SplitColumns();
$content = array('Lorem ipsum','elit sed do','labore et dolore', 'dolor sit amet', 'eiusmod tempor', 'magna aliqua',  'consectetur adipisicing', 'incididunt ut');
// This is where you can define the number of columns you want
// However, this does not define columns.  You will notice when
// You see the output that it changes the number of rows
echo $Util->SplitIntoColumns($content, 4); 
```

输出：

```
Lorem ipsum eiusmod tempor
elit sed do magna aliqua
labore et dolore consectetur adipisicing
dolor sit amet incididunt ut 
```

所需的输出应该是：

```
Lorem ipsum labore et dolore eiusmod tempor consectetur adipisicing
elit sed do dolor sit amet magna aliqua incididunt ut 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:15:14.203

你把事情复杂化了！结合`array_chunk()`一些简单的数学来正确格式化数据：

```
function splitIntoColumns($array, $columns=3)
{
    $numberOfRows = ceil(count($array) / $columns);
    return array_chunk($array, $numberOfRows);
} 
```

这为您留下了一个列数组 - $returnValue[0] 是第 0 列中的元素数组，依此类推，直到列限制。示例输出（4 列）：

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    string(11) "Lorem ipsum"
    [1]=>
    string(11) "elit sed do"
  }
  [1]=>
  array(2) {
    [0]=>
    string(16) "labore et dolore"
    [1]=>
    string(14) "dolor sit amet"
  }
  [2]=>
  array(2) {
    [0]=>
    string(14) "eiusmod tempor"
    [1]=>
    string(12) "magna aliqua"
  }
  [3]=>
  array(2) {
    [0]=>
    string(23) "consectetur adipisicing"
    [1]=>
    string(13) "incididunt ut"
  }
} 
```

从那里添加 HTML 应该相当简单，并且可以通过多种方式完成，例如：

```
$result = splitIntoColumns($inputArray, 3);

foreach($result as $column => $columnMembers)
{
    echo '<div class="column">';
    foreach($columnMembers as $key => $val)
    {
        echo $val; 
        //or whatever else you want to do in here
    }
    echo '</div> <!-- /column -->';
} 
```

**编辑：** [带有 html 输出的示例](http://codepad.viper-7.com/TKaDXJ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:29:01.797

您可以通过更简单的方式获得预期的输出：

```
$content = array('Lorem ipsum','elit sed do','labore et dolore', 'dolor sit amet', 'eiusmod tempor', 'magna aliqua',  'consectetur adipisicing', 'incididunt ut');    
for($i = 0; $i<count($content); $i++){
    if($i % 2 == 0){
        $col1 .= $content[$i] . ' ';
    }
    else{
        $col2 .= $content[$i] . ' ';
    }
}    
echo $col1 . "\n" . $col2; 
```

**输出：**

```
Lorem ipsum labore et dolore eiusmod tempor consectetur adipisicing
elit sed do dolor sit amet magna aliqua incididunt ut 
```

# c# - ps3奖杯计算器

> ID：11888828
> 
> 赞同：0
> 
> 时间：2012-08-09T17:29:54.013
> 
> 标签：c#, windows-phone-7

我决定做一个 windows phone 7 ps3 trophy calc 应用程序。要点如下

*   青铜奖杯价值：15 分
*   银奖杯价值：30 分
*   金奖杯价值：90 分
*   白金奖杯价值：180 积分

每个级别的细分是

*   2 级为 200 点
*   3 级为 600 点
*   4 级为 1200 点
*   5 级为 2400 点
*   6 级为 4000 点

之后每级上升 2000，直到 12 级，达到 16000 点。在 13 级，它达到 24000，并且随着每个后续级别增加 8000。

我能够确定直到 12 级的水平...如果点 > = 16000 我在确定水平时遇到问题...你能解释一下确定点 > 16000 水平的逻辑吗？12级之后的等级上限是恒定的8000....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:38:41.543

这是一个非常嵌套的循环，因此如果点数仅够第 2 级，它会检查第 3 级，当它认为它为假时，它会逃避整个事情。

```
int const level = 1;
int const level2 = 200;
int const level6 = 4000;
int const level12 = 16000;

if (points >= level2)
    level = 2;
    if (points >= 3*level2)
        level = 3;
        if (points >= 6*level2)
           level = 4;
           if (points >= 12*level2)
                level = 5;
                if ((points >= level6) && (points < level12))
                    // because you're dividing integer by integer,
                    // 39999/2000 should = 1, correct?
                    level = ((points - level6) / 2000) + 6;
                else if (points >= level12)
                    level = ((points - level12 / 8000) + 12; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:41:26.840

如果我理解正确，它将类似于

```
int levelCap = (8000 * (level % 12)) + 16000; 
```

请注意，此逻辑仅适用于 12 级或以上

# c# - 带有水平条的 ASP.NET 图表 DataBindCrossTable

> ID：11888829
> 
> 赞同：1
> 
> 时间：2012-08-09T17:29:55.090
> 
> 标签：c#, asp.net, .net, .net-4.0, charts

我正在使用 .net 4 图表，我需要绘制一个必须将多个列组合在一起的图表。解决方法是使用DataBindCrossTable函数，非常适合我的需求；但是，图表需要绘制为线而不是列。DataBindCrossTable 似乎不适用于条形图，只能用于列。

有没有办法水平旋转列或任何其他解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T22:17:27.133

在代码隐藏文件中，将每个系列的 Series.ChartType 值更改为 StackedBar。

C＃：

```
foreach (Series data in chtChartControl.Series)
{
    data.ChartType = SeriesChartType.StackedBar;
} 
```

# asp.net - 在 ASP.NET WebApi 中格式化 uri 模板字符串值

> ID：11888844
> 
> 赞同：0
> 
> 时间：2012-08-09T17:31:40.987
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我有一个 ASP.NET WebApi 应用程序，它有一些控制器方法，这些方法期望某些字符串作为方法参数传入（声明为路由模板的一部分）。

在所有方法中，传入的字符串都是 base64 编码的——这意味着每个控制器方法都必须在对它们进行任何操作之前对它们进行 base64 解码。虽然我显然可以让每个方法很容易地做到这一点，但我想知道是否有一种方法可以在字符串实际传递给控制器​​方法之前执行解码。我认为这是类似于动作过滤器或自定义格式化程序的东西，但我对 asp.net web api 不够熟悉，不知道从哪里开始？

摘要：我有类似的路由模板：`{controller}/{encodedString}/whatever` where`{encodedString}`总是一个 base64 编码的字符串。和具有类似方法的控制器

```
GetWhatever(string encodedString)
{
  Base64Decode(encodedString);
  // do other stuff...
} 
```

我想`{encodedString}`在实际调用控制器方法之前使用 asp.net webapi 管道的某些部分进行解码。为了做到这一点，我应该从什么路径开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:31:43.753

您可以创建自定义模型绑定器并将其附加到使用[`ModelBinderAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.modelbinderattribute.aspx). 然后在模型绑定器中进行 base64 解码。

有关 Web API 检查中参数绑定的参考：

[WebAPI如何做参数绑定](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)

# html - HTML5 视频一一缓冲，无缝播放

> ID：11888848
> 
> 赞同：1
> 
> 时间：2012-08-09T17:31:48.397
> 
> 标签：html, video, html5-video

在 iOS 上，我认为是 Safari，我们有 Apple 的 HTTP Live 流，它可以获取特定格式的视频文件的播放列表，一个一个地缓冲它们，然后无缝地背靠背播放。

有没有办法在其他浏览器中实现这一点？我当然可以检测到视频结束，然后开始缓冲并播放下一个，但我想通过在每个较早的视频结束时下载后续视频来消除缓冲。我不想通过堆叠视频元素并在它们之间切换来破解它。这种方法有各种严重的后果。

也许如果有一种方法可以使用 javascript 将文件下载到内存缓冲区并以某种方式将视频元素指向从这些缓冲区播放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:23:09.523

我已经看到为每个尝试的片段交换视频元素，而且它从来都不是流畅的。

作品中有一个 HTML 规范准确定义了您所描述的过程，将媒体段连接到可以馈送到媒体元素的缓冲区中。 [http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html](http://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html)

这在今天的浏览器中不可用，但正在进入 Chrome/Safari。即使是这样，实施这个过程也需要大量的工作。

如果您现在需要它，最好的选择是使用可以处理 HLS 的 Flash 播放器，例如 OSMF、JWplayer 和很快的 Video.js。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:11:00.887

在 html5 中，您可以预加载视频、预加载元信息或根本不预加载。当然，唯一的问题是 Internet Explorer，它会下载所有内容或什么都不下载（甚至不显示控件）。

这也可以用 javascript 控制。但是，如果您想自动连续播放它们，则需要使用 javascript 或某些第三方工具来完成。可以通过 API 读取文件正在播放的位置。

# php - 将 Web 应用程序转换为 iPhone 应用程序

> ID：11888856
> 
> 赞同：3
> 
> 时间：2012-08-09T17:32:33.007
> 
> 标签：php, iphone, ios, ipad, mobile

我有一个现有的 Web 应用程序 (PHP/MySQL)，我想将其“包装”到本机 iOS 应用程序中并发布。有什么东西可以轻松做到这一点吗？我花了很多时间试图找到一些东西来做这件事，我认为我在[phonegap](http://phonegap.com/)中找到了一些有用的东西，但它需要在 Apple 操作系统上使用该应用程序，而且他们的在线版本只需要 HTML。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:34:12.210

对于一个基本的网站，Twitter Bootstrap 就足够了。事实上，Bootstrap 3 的方向是移动优先，使其成为移动网络的更好选择之一。

**引导**： http: [//getbootstrap.com/2.3.2/](http://getbootstrap.com/2.3.2/)

您可以考虑使用`responsive-design`Javascript 库，例如`SenchaTouch`或`jQuery Mobile`。

**SenchaTouch**：[http ://www.sencha.com/products/touch/](http://www.sencha.com/products/touch/)

**jQuery 移动**：http: [//jquerymobile.com/](http://jquerymobile.com/)

它们专为多浏览器查看目的而设计，允许客户通过移动设备在线查看您的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T17:39:37.890

正如@NSpunk 的评论中所述，您需要在 mac os x 平台上开发原生 iOS 应用程序。据说最简单的方法是使用 UIWebView 类，它允许您将 Web 内容嵌入到本机应用程序中。但正如评论中所指出的，除非您在此 Web 视图中添加功能，否则 Apple 很可能会拒绝将其包含在应用商店中。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

除此之外，您可以使用元标记制作特定于您网站的 iOS 设备的移动版本，如下所示

```
<meta name="viewport" content="width=320px" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<link rel="apple-touch-icon-precomposed" href="./apple-touch-icon.png" /> 
```

这提供了原生体验，而无需实际通过应用商店。对我来说，如果你想做的只是利用你现有的 php/mysql 知识让你的 web 应用程序对 iOS 更友好，我会这样做。

[http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)

如果你决定走这条路，我发现这是一个很好的 php 类来检测 iOS 设备。

[php MobileDetect](http://code.google.com/p/php-mobile-detect/)

# c# - db4o：抽象类类型查询：无结果

> ID：11888861
> 
> 赞同：0
> 
> 时间：2012-08-09T17:32:55.737
> 
> 标签：c#, linq, db4o

我存储了一堆继承自抽象类的各种类的对象`Creative`。我想看看存储了什么，所以我写了一个这样的方法：

```
 public void GetCreativeTypes()
    {
        var types = from Creative c in original.AsQueryable<Creative>()
                    select string.Format("{0}: {1}", c.CreativeType, c.GetType());

        foreach (var type in types.Distinct())
        {
            Debug.WriteLine(type);
        }

        return;
    } 
```

...但这不会返回任何结果。我也试过：

```
 public void GetCreativeTypes()
    {
        var types = from Creative c in original
                    select string.Format("{0}: {1}", c.CreativeType, c.GetType());

        foreach (var type in types.Distinct())
        {
            Debug.WriteLine(type);
        }

        return;
    } 
```

结果相同。我怎样才能得到我想要的结果？

原始集合中的对象就像

```
public class ImageCreative : Creative{}
public class FlashCreative : Creative{} 
```

...ETC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:50:06.627

我怀疑这里还有其他事情而不是您的查询，例如`Debug.WriteLine`（尝试`Console.WriteLine`甚至`Trace.WriteLine`）没有输出到您的输出窗口，或者您的收藏正在重新创建，或者首先添加到您的收藏有问题，等等。

至于您的查询，看起来您使用的是 Linq-to-Objects 所以这个查询应该没问题，您不需要指定类型：

```
var types = from c in original 
            select string.Format("{0}: {1}", c.CreativeType, c.GetType()); 
```

不需要，`AsQueryable()`因为您不需要使用表达式或远程数据源。

当你这样做时，看看你是否得到结果也很好：

```
Console.WriteLine(string.Format("Count: {0}", original.Count ())); 
```

最后，您可能只需要从您的集合中访问某个派生类型，所以这里有一个小技巧：

```
// returns only the objects in the collection that are type ImageCreative
var onlyImage = from c in original.OfType<ImageCreative>()
            select c; 
```

同样，要仅获取 FlashCreative，您将执行以下操作：

```
// returns only the objects in the collection that are type FlashCreative
var onlyFlash = from c in original.OfType<FlashCreative>()
            select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:33:40.413

原来与查询无关。文档指出不需要提交记录（只需关闭容器），但是一旦我提交了它们，它们就可以查询了。这对我来说是个头疼的事。

# android - Eclipse 在 Windows 7 64 位上找不到我的 Nexus S

> ID：11888864
> 
> 赞同：3
> 
> 时间：2012-08-09T17:33:13.277
> 
> 标签：android, windows, eclipse

[我从这里](http://developer.android.com/training/basics/firstapp/running-app.html)开始遵循“MyFirstApp”的教程，并能够在模拟器上启动并运行“hello world”。但是，当需要在设备上运行应用程序时，Eclipse 和 adb 无法在 Windows 7 64 位机器上检测到 Nexus S。我按照说明使用 Android SDK 管理器安装了 google USB 驱动程序。

如何使用 Eclipse 将应用程序部署到我的 Nexus S？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T17:33:13.277

Android 教程忘记包含一个非常重要的细节，让 Nexus S 与 Windows 7 64 位一起工作。按照[此链接](http://kaustubhghanekar.blogspot.com/2012/05/installing-64-bit-drivers-on-windows-7.html)的说明进行操作。下载 Google USB 驱动程序后，您需要在设备管理器中安装它。

根据链接，

> 右键单击计算机 -> 管理 -> 设备管理器 -> 右键单击​​ Nexus -> 更新驱动程序 -> “浏览我的计算机以查找驱动程序软件” -> 浏览路径“C:\Program Files (x86)\Android\android-sdk\ extras\google\usb_driver”也勾选“包括子文件夹”

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T12:27:13.167

非常感谢各位。

对于其他使用 Nexus 7 的人。除了 Eclipse 'MyFirst.App' 教程中的说明。即使您认为自己拥有最新的谷歌驱动程序，也请去获取它。

[http://developer.android.com/sdk/win-usb.html#top](http://developer.android.com/sdk/win-usb.html#top)

然后为您的设备 Nexus 从更新驱动程序中浏览到它。如果您的 Nexus 已连接，您将在其 USB 端口上看到一个询问新设备的弹出窗口。

它没有立即出现在 Eclipse 中，但无论如何按“运行”，现在它出现在设备列表中，因此您可以选择它。它从那里成功运行。

# sql - 为什么这个查询运行缓慢？

> ID：11888865
> 
> 赞同：3
> 
> 时间：2012-08-09T17:33:13.953
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql

我想知道为什么这样做

```
UserView.where(:user_viewable_type => 'Song').order('created_at desc').limit(5) 
```

运行需要 1213 毫秒。有点慢 innit？

在 schema.rb`user_viewable_type`中被索引：

```
add_index "user_views", ["user_viewable_type"], :name => "index_views_on_viewable_type" 
```

即使在 psql 中：

```
"index_views_on_viewable_type" btree (user_viewable_type) 
```

运行`.explain`返回：

```
UserView.where(:user_viewable_type => 'Song').order('created_at desc').limit(5).explain
  UserView Load (1801.4ms)  SELECT "user_views".* FROM "user_views" WHERE "user_views"."user_viewable_type" = 'Song' ORDER BY created_at desc LIMIT 5
  EXPLAIN (1.6ms)  EXPLAIN SELECT "user_views".* FROM "user_views" WHERE "user_views"."user_viewable_type" = 'Song' ORDER BY created_at desc LIMIT 5
=> "EXPLAIN for: SELECT  \"user_views\".* FROM \"user_views\"  WHERE \"user_views\".\"user_viewable_type\" = 'Song' ORDER BY created_at desc LIMIT 5\n                                  QUERY PLAN\n-------------------------------------------------------------------------------\n Limit  (cost=17113.28..17113.28 rows=5 width=37)\n   ->  Sort  (cost=17113.28..17147.82 rows=69085 width=37)\n         Sort Key: created_at\n         ->  Seq Scan on user_views  (cost=0.00..16883.78 rows=69085 width=37)\n               Filter: ((user_viewable_type)::text = 'Song'::text)\n(5 rows)\n" 
```

所以我决定分解查询并删除`order`，我得到：

```
UserView.where(:user_viewable_type => 'Song').limit(5).explain
UserView Load (1.6ms)  SELECT "user_views".* FROM "user_views" WHERE "user_views"."user_viewable_type" = 'Song' LIMIT 5 
```

似乎`order('created_at desc')`是导致查询变慢。但为什么？不能快速订购吗？

`order`我在`id`专栏上试过：

```
UserView.where(:user_viewable_type => 'Song').order('id desc').limit(5).explain
UserView Load (44.8ms)  SELECT "user_views".* FROM "user_views" WHERE "user_views"."user_viewable_type" = 'Song' ORDER BY id desc LIMIT 5 
```

这么快！有什么问题？

我应该提几点：

1.  如果您还没有注意到，这是一个多态表。
2.  过去，我通过 Rails 迁移重命名`:live_viewable_type`为. 但是，我不认为这应该是问题，因为索引仍然在右列。`:user_viewable_type``t.rename :live_viewable_type, :user_viewable_type`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:42:27.610

据我所知，这个问题可能是：

a) 你没有被索引`created_at`

或者：

b) 数据库正在选择一个索引或另一个（即要么使用`created_at`索引，要么使`user_viewable_type`规范变慢，反之亦然）。

如果您经常进行这些调用，则可能值得研究一个组合索引`[created_at, user_viewable_type]`（或其他方式：`[user_viewable_type, created_at]`，取决于哪个会更快地缩小您的结果）。

# windows - 桌面发布平台与PhoneGap紧密相连？

> ID：11888874
> 
> 赞同：1
> 
> 时间：2012-08-09T17:33:45.560
> 
> 标签：windows, linux, macos, cordova, tidesdk

我正在寻找一个在概念上与 PhoneGap 紧密相关的 Mac、Windows 和 Linux 桌面发布平台。我知道有 Titanium for Desktop（TideSDK？），但就我之前使用过的而言，它需要最终用户下载一次 70mb 的大运行时文件。我喜欢 PhoneGap 的地方在于它不需要任何这些（开箱即用）。我正在寻找类似的东西，只是它不是针对移动开发的，而是针对桌面应用程序开发的。

也许我没有提到它，但如果你不知道我具体在说什么，我说的是一种环境，它可以让我通过 HTML 基础进行编码并为所述平台输出本机。TideSDK 和 PhoneGap 都是这样做的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:28:50.693

我强烈建议[再给 TideSDK 一次机会](http://www.tidesdk.org/)，我过去曾在其上开发过大型数据驱动的应用程序，并部署到 OSX 和 Windows 上，我个人对此非常满意。此外，它现在是一个开源项目，由一个非常优秀的团队管理和维护，并得到了 Appcelerator（原始创建者）的一些监督和帮助。

在我看来，TideSDk 有两个好处：

1.  许可证 - [TideSDK 是](https://github.com/TideSDK/TideSDK)在自由 Apache 2.0 许可证下获得许可的开源软件。与受限制性 GNU Lesser Public 和商业许可的 QT 不同。
2.  Power - TideSDK 允许您利用原生 API（如 phonegap），但可以使用您最喜欢的编程语言（嗯，在 Ruby、PHP 和 Python 之间进行选择）访问它们。QT 的唯一选择是 C++。

至于你所说的 70MB 运行时，这不是真的，我在上一个项目中构建了运行时，而我给我的客户（OSX）的二进制文件只有 15.3MB。

希望这可以帮助您做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T23:41:25.117

有一种方法可以在 Adob​​e AIR 的帮助下在桌面上运行 PhoneGap HTML5 应用程序，如下所述：[http ://www.tricedesigns.com/2012/02/17/repurposing-phonegap-apps-as-desktop-apps /](http://www.tricedesigns.com/2012/02/17/repurposing-phonegap-apps-as-desktop-apps/)

但我也在寻找一种不那么臃肿的方法。也许基于 Xulrunner/Prism/WebRT 事物（或 Chrome）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T04:24:42.040

Tidsdk 是最简单的，xml 文件几乎与 phonegap 相同，提供了强大的 api 和最好的部分，你可以用运行时打包你的应用程序。我认为你应该坚持使用潮汐dk。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-26T13:58:49.710

我一直在寻找相同的东西，并找到了适用于 windows 的这个实现：[https ://github.com/davejohnson/phonegap-windows](https://github.com/davejohnson/phonegap-windows)

我没有尝试过。

# mercurial - 跨多个分支机构的 HG 多个负责人

> ID：11888875
> 
> 赞同：0
> 
> 时间：2012-08-09T17:33:46.737
> 
> 标签：mercurial

我在 mercurial 中有几个分支，都表明有多个头。当我尝试执行`hg merge -r $x -r $y`以尝试合并我收到的两个修订时，错误表明存在未完成的未提交合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:31:35.043

这可能是因为您之前开始了合并但没有提交它。您可以通过运行来撤消工作目录中的先前合并`hg update -C`。

# cdn - 用户头像应该保存在私有目录中吗？

> ID：11888877
> 
> 赞同：0
> 
> 时间：2012-08-09T17:33:49.977
> 
> 标签：cdn, file-storage, avatars

我正在建立一个社区站点，我目前正在编写一个脚本来生成缩略图并将它们存储在我们的文件系统中。

我应该将头像存储在私人目录中吗？或者这种类型的文件可以放在像 CDN 这样的公共资产目录中吗？

为什么或者为什么不？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:58:51.343

在搜索并查看其他站点之后。尤其是 Google Plus 不会将他们的头像保存在私人目录中。

事实上，他们的头像是从公共 CDN 访问的，并被提供并与实际搜索结果混合。

所以我想答案是否定的，没有必要将头像设为私有

# eclipse - 将jar源添加到主项目

> ID：11888879
> 
> 赞同：0
> 
> 时间：2012-08-09T17:33:57.727
> 
> 标签：eclipse

在我的工作区中，我有我的主要项目，它使用了几个罐子。我需要对其中一个罐子进行更改。我将该 jar 的源代码添加到我的工作区并进行了更改，在命令行中创建了一个新 jar，将其复制到我的主项目，启动应用程序服务器并尝试一下。有没有办法将我的项目指向 jar 源而不是 jar 文件？我希望更改 jar 源，Eclipse 会像我的主项目一样自动构建，我只需要重新启动我的应用程序服务器即可进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:37:43.843

您可以添加外部 jar，然后您可以构建 jar，将其保护在您的应用服务器可访问的某个位置并重新启动服务器，它将使用新的 jar，一切都应该没问题。

对于更大的范围，有许多使用 maven 的解决方案，例如一次构建多个项目并根据需要合并它们，但这对于单个 jar 来说太多了。

# mongodb - 地图功能中推荐的最大发射量是多少？

> ID：11888881
> 
> 赞同：0
> 
> 时间：2012-08-09T17:34:06.690
> 
> 标签：mongodb, mapreduce, pymongo

我是 mongoDb 的新手，并计划使用 map reduce 来计算大量数据。如您所知，我们有 map 函数来匹配标准，然后为给定的字段发出所需的数据。在我的地图功能中，我有多个发射。截至目前，我从一个文档中发出了 50 个字段。这意味着从集合中的单个文档会爆炸到临时表中的 40 个文档。因此，如果我有 100 万个文档要处理，则在 map 函数结束时临时表中将有 100 万 * 40 个文档。

下一步是对该集合进行排序。（我没有使用 map 的排序参数会有帮助吗？）

考虑将 map 函数一分为二……但是还有一个问题……在执行 map 函数时，如果我偶然遇到一个异常，想跳过整个文档数据（即不从该文档发出任何数据），但是如果我拆分我将无法……

在 mongoDB.org 我发现一条评论说...“当我运行 MR 作业时，排序 - 在 MR 的第一阶段需要 1.5 天才能达到 23%。当我运行 MR 作业时，没有排序，大约需要 24所有工作 -36 小时。此外，当关闭 jsMode 时，我的 MR 会加速两次（在我关闭排序之前）“

启用排序有帮助吗？或者关闭 jsmode 有帮助吗？我正在使用 mongo 2.0.5

有什么建议吗？

在此先感谢.G

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:50:42.230

> 下一步是对该集合进行排序。（我没有使用 map 的排序参数会有帮助吗？）

不知道你的意思，MR没有排序参数，只有传入的查询有排序参数。传入查询的排序参数仅对传入的数据进行排序。除非您正在寻找一些特定行为，以避免使用传入排序对最终输出进行排序，否则您通常不需要排序。

你打算如何使用这个 MR。显然它不会是实时的，否则你只会杀死你的服务器，所以我猜它是一个后台进程，可以按照你想要的方式运行和格式化数据。我建议研究增量 MR，以便您全天进行增量更新，以限制在任何给定时间使用的资源量。

> 因此，如果我有 100 万个文档要处理，则在 map 函数结束时临时表中将有 100 万 * 40 个文档。

你是多次发射吗？如果不是，那么临时表每行应该只有一个键，文档格式如下：

{ _id: emit_id [{ //您发出的每个文档 }] }

这显示： http: [//kylebanker.com/blog/2009/12/mongodb-map-reduce-basics/](http://kylebanker.com/blog/2009/12/mongodb-map-reduce-basics/)

> 或者关闭 jsmode 有帮助吗？我正在使用 mongo 2.0.5

关闭 jsmode 不太可能做任何重要的事情，并且结果各不相同。

# php - 上传和下载图像到 php 服务器进行一些处理

> ID：11888882
> 
> 赞同：0
> 
> 时间：2012-08-09T17:34:09.423
> 
> 标签：php, iphone, objective-c, ios, nsurlconnection

我需要将图像从 iphone 应用程序上传到 PHP 服务器，以便在服务器上对该图像进行一些处理，然后在服务器完成处理后，我想将结果图像返回给 iphone 应用程序。

我已经有上传代码，但我无法从 php 服务器获取结果图像并将其显示在 iphone 应用程序中

请帮忙

这些是这里的代码：

上传的objective-c代码：

```
NSString *urlString =[NSString stringWithFormat:@"http://192.168.1.3/TEST%20IPHONE/upload.php"] ;
    NSURL *nsurl =[NSURL URLWithString:urlString];  
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:nsurl cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];   
    [request setURL:nsurl];  
    [request setHTTPMethod:@"POST"];

    self.editingImageView.image = nil;
  NSString * filename =  @"cartoonize.png";

    NSMutableData *body = [NSMutableData data];

    NSString *boundary = [NSString stringWithString:@"---------------------------14737809831466499882746641449"];
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

    // file
    NSData *imageData = UIImageJPEGRepresentation(self.EditingImage, 90);

    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

     [body appendData:[[NSString stringWithString:[NSString stringWithFormat:@"Content-Disposition: attachment; name=\"userfile\"; filename=\"%@\"\r\n",filename]] dataUsingEncoding:NSUTF8StringEncoding]];

    [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];

    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // set request body
    [request setHTTPBody:body];

    //return and test

    NSURLConnection * connection = [[NSURLConnection alloc] 
                                    initWithRequest:request
                                    delegate:self startImmediately:NO];

    [connection scheduleInRunLoop:[NSRunLoop mainRunLoop] 
                          forMode:NSDefaultRunLoopMode];
    [connection start]; 
```

这里的PHP代码：

```
<?php
//echo $_FILES["userfile"]["size"];
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["userfile"]["name"]));

if ( ($_FILES["userfile"]["size"] < 200000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["userfile"]["error"] > 0)
    {
    //echo "Return Code: " . $_FILES["userfile"]["error"] . "<br />";
    }
  else
    {

      move_uploaded_file($_FILES["userfile"]["tmp_name"],
      "upload/" . $_FILES["userfile"]["name"]);

// some processing on the image and result image will be saved on this path upload/test.jpg

$file = "upload/test.JPG" ; 
$imageData = utf8_encode(file_get_contents($file));

echo $imageData;

}

  }
else
  {
  echo "Invalid file";
  }

?> 
```

我从 NSUrlConnection 委托方法中获取数据，所以结果在我的 Objective-C 代码中的 NSData 对象中，但是我无法从这个 NSData 对象中获取图像，你们觉得呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:44:18.767

您是否实现了`NSURLConnection`允许您读取请求响应的委托方法？如果是这样，您应该使用 an`NSMutableData`来累积从服务器返回的数据（这可能会被拆分为多个委托调用），然后使用`UIImage`诸如`imageWithData:`在客户端上创建图像之类的方法。例如：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    self.receivedImageData = [NSMutableData dataWithCapacity:[response expectedContentLength]];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.receivedImageData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    UIImage *finishedImage = [UIImage imageWithData:self.receivedImageData];
    self.receivedImageData = nil;
} 
```

# android - Viewpager 适配器不改变视图

> ID：11888886
> 
> 赞同：1
> 
> 时间：2012-08-09T17:34:19.200
> 
> 标签：android, android-viewpager

我有一个带有 actionbarsherlock TabsNavigation（3 个标签）的活动，当我按下一个标签时，我更改了相应片段的 viewpager 适配器。它工作正常，问题是当我单击除第一个创建的选项卡之外的另一个选项卡时，第一页始终是第一个选项卡中的一个。我试图在更改适配器之前放置 invalidate() ，但它不起作用。有人知道吗？这是代码：

```
public class Tabsteste2 extends SherlockFragmentActivity implements TabListener {

static AdapterOpiniao mOdapter;
static  AdapterDados mDdapter;
static  AdapterFoto mFdapter;
Bundle extras;
JSONParser jsonParser = new JSONParser();
SharedPreferences mPrefs;

static   ViewPager mPager;
static  int countopiniao;
static int countdados;
static int countfoto;
JSONArray perguntas = null;
PageIndicator mIndicator;
static ArrayList<HashMap<String, String>> opiniaolist;
static ArrayList<HashMap<String, String>> dadoslist;
static ArrayList<HashMap<String, String>> fotolist;
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tabsteste2);
    opiniaolist = new ArrayList<HashMap<String, String>>();
    dadoslist = new ArrayList<HashMap<String, String>>();
    fotolist = new ArrayList<HashMap<String, String>>();
    mPager = (ViewPager)findViewById(R.id.pager);
    extras = getIntent().getExtras();

    Boolean opiniaoflag = extras.getBoolean("opiniaoflag");
    Boolean dadosflag = extras.getBoolean("dadosflag");
    Boolean fotoflag = extras.getBoolean("fotoflag");
    countdados= extras.getInt("countdados");
    countopiniao=extras.getInt("countopiniao");
    countfoto=extras.getInt("countfoto");
    mPrefs = getSharedPreferences("mPrefs1",MODE_PRIVATE);
    Log.d("countdados",""+countdados);
    Log.d("countfoto",""+countfoto);
    Log.d("countopiniao",""+countopiniao);

getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    if(opiniaoflag==true){
    ActionBar.Tab opiniaotab = getSupportActionBar().newTab();
    opiniaotab.setText("Opinião");
    opiniaotab.setTag("op");
    opiniaotab.setTabListener(this);
    mOdapter = new AdapterOpiniao(getSupportFragmentManager());
    Log.d("Opiniao",""+opiniaotab.getTag());
    getSupportActionBar().addTab(opiniaotab);
    }if(dadosflag == true){
    ActionBar.Tab dadostab = getSupportActionBar().newTab();
    dadostab.setText("Dados");
    dadostab.setTag("dd");

    mDdapter = new AdapterDados(getSupportFragmentManager());
    dadostab.setTabListener(this);
    Log.d("Dados",""+dadostab.getTag());
    getSupportActionBar().addTab(dadostab);
    }
 //   mDdapter = new AdapterDados(getSupportFragmentManager());
    if(fotoflag==true){
    ActionBar.Tab fotostab = getSupportActionBar().newTab();
    fotostab.setText("Fotos");
    fotostab.setTag("ft");        
    mFdapter = new AdapterFoto(getSupportFragmentManager());
    fotostab.setTabListener(this);
    Log.d("Foto",""+fotostab.getTag());
    getSupportActionBar().addTab(fotostab);
    }

   new getpergunta().execute();

}
@Override
public void onTabReselected(Tab tab, FragmentTransaction transaction) {
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {
if(tab.getTag().equals("op")){
   mPager.invalidate();
   mPager.setAdapter(mOdapter);
   mIndicator = (UnderlinePageIndicator)findViewById(R.id.indicator);
   mIndicator.setViewPager(mPager);

}else if (tab.getTag().equals("dd")){
   mPager.invalidate();
   mPager.setAdapter(mDdapter);
   mIndicator = (UnderlinePageIndicator)findViewById(R.id.indicator);
   mIndicator.setViewPager(mPager);
   }else if(tab.getTag().equals("ft")){
       mPager.invalidate();
       mPager.setAdapter(mFdapter);
       mIndicator = (UnderlinePageIndicator)findViewById(R.id.indicator);
       mIndicator.setViewPager(mPager);
   }
 }

@Override
public void onTabUnselected(Tab tab, FragmentTransaction transaction) {
}
public static class AdapterOpiniao extends FragmentPagerAdapter {
    public AdapterOpiniao(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return countopiniao;
    }

    @Override
    public Fragment getItem(int position) {
        return FragmentOpinioes.newInstance(position);
    }
}
public static class AdapterDados extends FragmentPagerAdapter {
    public AdapterDados(FragmentManager fm) {
        super(fm);
    }
    @Override
    public int getCount() {
        return countdados;
    }
    @Override
    public Fragment getItem(int position) {
        return FragmentDados.newInstance(position);
    }
}   
public static class AdapterFoto extends FragmentPagerAdapter {
    public AdapterFoto(FragmentManager fm) {
        super(fm);
    }
    @Override
    public int getCount() {
        return countfoto;
    }
    @Override
    public Fragment getItem(int position) {
        return FragmentFotos.newInstance(position);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T23:21:28.550

为了解决您的问题，我使用了：

```
@Override
public void onTabSelected(Tab tab, FragmentTransaction transaction) {   
    this.mPager.setCurrentItem(tab.getPosition());
} 
```

单击选项卡时，相应选项卡的视图会自动更改。

**编辑：**我必须承认我很难真正理解你的代码和你想要做什么，所以我添加了更多的代码来解释我认为你需要什么。

在我的选择中，ViewPager 只需要一个适配器，然后如果我是对的，你会这样做：

```
// I took some personal code for my example
private ViewPager mPager;
private PageIndicator mIndicator;
private TabsExampleSectionsAdapter mAdapter;

// Inside the onCreate method
this.mPager = (ViewPager) findViewById(R.id.pager);
this.mIndicator = new TabPageIndicator(this);
this.mAdapter = new TabsExampleSectionsAdapter(this.getSupportFragmentManager());

this.mPager.setAdapter(this.mAdapter);
this.mIndicator.setViewPager(this.mPager); 
```

一切初始化后，这就是如何构建选项卡和分页器视图的说明（两者是相关的）。另外，不要介意 Section 类，它是一个自定义数据模型对象，其中包含您需要的标签数据，但它与 actionbarsherlock 无关。

```
private void buildTabs(Section[] sections) {

    if (sections != null) {

        for (Section section : sections) {

            ActionBar.Tab sectionTab = getSupportActionBar().newTab();
            sectionTab.setText(section.name);
            sectionTab.setTabListener(this);
            getSupportActionBar().addTab(sectionTab);

            // The tag ("op" or "dd" in your case for example) is contained somewhere in the section object
            this.mAdapter.getSections().add(section);
        }
    }
} 
```

最后，这是视图寻呼机适配器。它将根据您为每个选项卡位置定义的标签选择要返回的片段类型：

```
public class TabsExampleSectionsAdapter extends FragmentPagerAdapter {

    private ArrayList<Section> mSectionsList = new ArrayList<Section>();

    public TabsExampleSectionsAdapter(FragmentManager fragmentManager) {
        super(fragmentManager);
    }

    @Override
    public Fragment getItem(int position) {

            // Retrieving the cooresponding tag of position
            Section section = this.mSectionsList.get(position % getCount());

            // Here, you check the tag to know what type of fragment you must return
            if (section.getTag().equals("dd")) {
                return FragmentDados.newInstance(position);
            } else if (section.getTag.equals("op")) {
                return FragmentOp.newInstance(position);
            }
    }

    @Override
    public int getCount() {
        return this.mSectionsList.size();
    }

    @Override
        public CharSequence getPageTitle(int position) {
        return this.mSectionsList.get(position % getCount()).name.toUpperCase();
    }

    public ArrayList<Section> getSections() {
        return this.mSectionsList;
    }
} 
```

总之，当一切都设置好后，更改视图不必通过更改适配器和调用 invalidate() 手动完成。您可以通过简单的条件从适配器返回不同类型的片段。然后，通过调用：

```
this.mPager.setCurrentItem(position); 
```

它通过传入适配器的 getItem(position) 方法自动更改当前视图。基本上，您只需要协调标签位置和标签即可获得正确类型的片段。

随时询问更多细节。

# xml - 使用 XML::Parser 时如何忽略 CDATA 内容？

> ID：11888890
> 
> 赞同：0
> 
> 时间：2012-08-09T17:34:29.077
> 
> 标签：xml, perl

我正在解析一些外部方提供给我的 XML，他们肯定不会改变它们；这些讨厌的 XML 包含 CDATA 部分中的 HTML，并且 XML::Parser 阻塞了它们。

除了完全剥离 CDATA 之外，还有什么方法可以克服这个问题？

**编辑：**

原始错误是“格式不正确（无效令牌）”。

很抱歉我没有立即发布测试用例。经过一些研究，我出于某种原因确信内部 CDATA 应该是有效的 XML，所以我发布了这个问题。

感谢@ikegami 提供工作测试用例，感谢@mirod 提供这种行为的非常可能且不明显的原因——编码不匹配。

下面发布的真实原因作为答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:02:21.940

XML::Parser 不应该在正确的 CDATA 部分中阻塞。基本上任何东西都在 CDATA 中，除了`]]>`,**只要它是字符数据**，这意味着没有随机二进制文件，这似乎不是你的情况，并且没有与声明的编码不兼容的数据（显式或隐式) 用于文档。这可能是这里的问题。

如果您的问题是文档中没有编码声明，我不会感到惊讶，因此解析器假定它是 UTF-8 格式，但 HTML 数据是 latin-1 或 windows-1252 格式，这会产生读取为 UTF-8 时无效的字符。

根据您的数据，您可以强制编码为 latin1，如果 XML 数据本身不是 UTF-8，使用 XML::Parser 选项`ProtocolEncoding => 'ISO-8859-1'`，或者您可能需要在 CDATA 中转换文本的编码部分，预解析。

请注意，使用不同的解析器可能没有帮助，因为按照设计，XML 解析器应该在遇到非格式良好的 XML 时停止

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T17:59:12.707

XML::Parser 可以很好地处理 CDATA 块。也许您需要更新 XML::Parser 或底层`expat`库，或者您的问题可能出在其他地方。很难说，因为你没有证明你的问题。

```
use strict;
use warnings;
use feature qw( say );

use Data::Dumper qw( Dumper );
use XML::Parser  qw( );

sub f {
   local $Data::Dumper::Indent = 0;
   local $Data::Dumper::Terse  = 1;
   local $Data::Dumper::Useqq  = 1;
   return Dumper($_[0]);
}

my $parser = XML::Parser->new(
   Handlers => {
      Start => sub { say "Start of $_[1]"; },
      End   => sub { say "End of $_[1]"; },
      Char  => sub { say "Char: " . f($_[1]); },
   },
);

$parser->parse(<<'__EOI__');
<root>
<![CDATA[
   <html>
   <foo>test > test</foo><br>
   </html>
]]>
</root>
__EOI__ 
```

```
Start of root
Char: "\n"
Char: "\n"
Char: "   <html>"
Char: "\n"
Char: "   <foo>test > test</foo><br>"
Char: "\n"
Char: "   </html>"
Char: "\n"
Char: "\n"
End of root 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:00:44.873

好吧，在最小化我的 XML 之后，我能够跟踪这些错误的原因：它是一个垂直制表符特殊符号。

疯狂的！

我能够用这个片段修复我的文件：

```
perl -CSDA -pe 'tr/\x00-\x08\x0B\x0C\x0E-\x19//d' bad.xml > good.xml 
```

# ios - 如何向 UIGestureRecognizer 添加 segue

> ID：11888891
> 
> 赞同：6
> 
> 时间：2012-08-09T17:34:30.713
> 
> 标签：ios, uigesturerecognizer, segue

我第一次使用 Storyboards 构建应用程序。我有一个场景，当长按特定按钮时，我想打开另一个场景。我可以`UILongPressGestureRecognizer`毫无问题地添加，但我不知道如何让那个手势成为另一个场景的延续。Ctrl-Drag 似乎无关紧要，没有任何效果。

我错过了一些明显的东西吗？

谢谢，肯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T17:43:16.047

您可以从第一个控制器的窗口控制拖动到您的第二个控制器以创建 segue，然后您可以调用`performSegueWithIdentifier`您的`GestureRecognizer`方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-20T15:16:52.327

现在可以在 Storyboard 中直观地完成所有操作。每个手势识别器都在 Connections Inspector 中触发了 Segue。

# c# - 在新标签 asp.net 中打开页面

> ID：11888892
> 
> 赞同：1
> 
> 时间：2012-08-09T17:34:32.650
> 
> 标签：c#, asp.net, redirect, response

我正在使用 ASP.NET C# 编写一个项目。

我想实现链接按钮单击事件以在新选项卡中打开新页面，但在我必须创建新的会话变量之前。我试过这个：

```
protected void LinkButton_Click3(Object sender, EventArgs e)
        {
            string p_id = (sender as LinkButton).CommandArgument;
            Session["p_id"] = p_id;
            Response.Write("<script type='text/javascript'> window.open('details.aspx','_blank'); </script>");

        } 
```

但无论如何它都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:49:16.557

根据您的评论，您应该禁用弹出窗口阻止程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T19:01:18.173

有时，我只需将我将从管理代码中动态调用的任何内容声明为 javascript 函数，然后使用 ClientScript 类中的 RegisterClientScriptBlock 方法从内部调用它即可：

Daclare window.open 函数：

```
 <script type="text/javascript">
        function SetRedirect(URI) {
           window.open(URI, "Details", "menubar=no, location=no, resizable=yes, scrollbars=yes, status=yes, width = 1200, height = 600");
        }
    </script> 
```

在类后面的代码中，只是一个网关调用者到这个函数，比如：

```
void MessageGateway(string URI)
{
    this.Page.ClientScript.RegisterClientScriptBlock(this.GetType(),
        "logCallBack", @"<script type=""text/javascript"">SetRedirect('" + URI + "');</script>");
} 
```

就是这样，你可以像往常一样用你的东西调用这个网关，

```
MessageGateway(string.Format("../IRMQueryPO.aspx?id={0}", e.Item.Cells[2].Text)); 
```

您可以尝试使用“_blank”来调整“目标”参数以打开选项卡而不是窗口，这只是解决方案所指向的风格问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:40:11.367

试试这个，在按钮单击或 document.ready 上调用此函数，仅在您要重定向的页面上。

```
<script type="text/javascript">
function newTab() 
{
  if (opener.document.getElementById("aspnetForm").target != "_blank") return;   

opener.document.getElementById("aspnetForm").target = "";
opener.document.getElementById("aspnetForm").action = opener.location.href;

}

</script 
```

或将此添加到链接按钮 html

```
OnClientClick="aspnetForm.target ='_blank';" 
```

# android - 如何断开 HTC（Froyo 及以下）手机上的 HttpUrlConnection？

> ID：11888895
> 
> 赞同：5
> 
> 时间：2012-08-09T17:34:54.980
> 
> 标签：android, httpurlconnection, android-2.2-froyo, disconnect

在某些情况下，我需要从客户端断开长轮询 http 请求。我对服务器进行的 HttpUrlConnection 的相关部分如下（以下所有代码都在 Thread 的 run() 方法中）：

```
try {
    URL url = new URL(requestURL);

    connection = (HttpURLConnection) url.openConnection();
    connection.setRequestProperty("Accept-Charset", "UTF-8");
    connection.setConnectTimeout(5 * 1000);
    connection.setReadTimeout(60 * 1000);
    connection.setRequestMethod("GET");

    // read the output from the server
    reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
    StringBuilder stringBuilder = new StringBuilder();

    String line = null;
    while ((line = reader.readLine()) != null) {
        stringBuilder.append(line + "\n");
    }
    Log.d(TAG, stringBuilder);
} catch (IOException ioe) {
    Log.e(TAG, ioe);
} finally {
    if (reader != null) {
        try {
            reader.close();
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
    }
} 
```

这是我第一次启动的方式，然后（经过第二次延迟）尝试取消请求：

```
pollThread = new PollThread();
pollThread.start();
Log.d(TAG, "pollThread started");

new Handler().postDelayed(new Runnable() {
    @Override
    public void run() {
        pollThread.cancelRequest();
        Log.d(TAG, "pollThread presumably cancelled");
    }
}, 1000); 
```

这就是 cancelRequest() 方法的样子：

```
public void cancelRequest() {
    if (connection != null) {
        connection.disconnect();
    }
} 
```

所以本质上，

1.  我使用 get 请求启动 HttpUrlConnection，读取超时时间为 1 分钟
2.  然后一秒钟后，我尝试取消之前的请求
3.  预期的结果是，当我调用 connection.disconnect() 时，连接应该抛出 IOException

这正是各种模拟器 (2.2 - 4.0.3)、摩托罗拉 Atrix (2.3.7) 和三星 Note (4.0.1) 上发生的情况。但是在一些运行 2.2 的 HTC 设备上，尽管我明确终止了连接，但请求将保持活动状态并收到响应。我用 HTC Desire 和 HTC Wildfire 验证了这一点。

这里发生了什么？如何在所有运行 2.2+ 的设备上安全地取消此类请求？

为了您的方便，这里提供了整个代码，如果您想自己进行试驾：[https ://gist.github.com/3306225](https://gist.github.com/3306225)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T03:41:38.750

### 这里发生了什么？

这是早期 android 版本 (Froyo 2.2) 中的一个已知错误，在排序上，套接字不能被其他线程异步关闭，并已在 Gingerbread 2.3 中修复：

[问题 11705：无法使用 HttpURLConnection 关闭 HTTP 连接](http://code.google.com/p/android/issues/detail?id=11705&can=1&q=HttpUrlConnection%20disconnect&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

### 如何在所有运行 2.2+ 的设备上安全地取消此类请求？

该链接中项目成员的评论：

> 在当前版本中工作的最佳近似值是在 HTTP 连接上设置读取和连接超时。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:55:06.890

实际上，我建议您使用 Apache HttpClient lib，而不是 android 提供的默认值。

您可以从以下网址下载：[http ://code.google.com/p/httpclientandroidlib/](http://code.google.com/p/httpclientandroidlib/)

如果你想“一路走来”，你也可以使用AndroidHttpClient“配置合理的默认设置和Android注册方案”，还可以支持cookie。[你可以从这里](http://code.google.com/r/fredsa-playn/source/browse/android/src/playn/android/AndroidHttpClient.java?r=c97ee9f4042d8b813cc8fcd9ee59cbb59d28f7c4&spec=svn5192b4283aed2f6f2aade1006d4efa560f30e393)下载它（我不记得我是什么时候找到原始的......）

这就是你使用“Get”调用的方式，我想你可以弄清楚其余的：

```
 InputStream isResponse = null;

    HttpGet httpget = new HttpGet(strUrl);
    HttpResponse response = getHttpClient().execute(httpget);

    HttpEntity entity = response.getEntity();
    isResponse = entity.getContent();
    responseBody = convertStreamToString(isResponse); 
```

和

```
 /**
 * @return the mClient
 */
protected AndroidHttpClient getHttpClient() {
    if (mClient == null)
        mClient = AndroidHttpClient.newInstance(mCookieStore);
    return mClient;
} 
```

要关闭连接：

```
getHttpClient().close(); 
```

# php - 禁用所有 html 标签，除了我想允许的一些标签

> ID：11888901
> 
> 赞同：3
> 
> 时间：2012-08-09T17:35:18.093
> 
> 标签：php, html, tags

我想`<b>, <h1>, <h2>`在帖子中允许标签，但仍然禁用 HTML。我怎样才能做到这一点？我可以用 htmlspecialchars 来做吗？

感谢您的帮助，该网站和用户真的很有帮助:)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T17:38:46.063

您可以使用 strip_tags [http://fr.php.net/manual/en/function.strip-tags.php](http://fr.php.net/manual/en/function.strip-tags.php)第二个参数允许一些标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:40:06.250

使用`strip_tags()`.

[http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

```
$stripped = strip_tags($text, "<b><h1><h2>"); 
```

买者自负。那里可能存在一些安全隐患。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:37:51.723

有一个很棒的工具叫做 HTML Purifier 可以完全满足你的要求:) 你应该检查一下：[http ://htmlpurifier.org/](http://htmlpurifier.org/)

另一种选择是使用可以在这里找到的 BBCode：http: [//nbbc.sourceforge.net/](http://nbbc.sourceforge.net/)

祝你好运：D

# javascript - 将 html 数据从 Internet Explorer 导出到 excel？

> ID：11888904
> 
> 赞同：2
> 
> 时间：2012-08-09T17:35:25.267
> 
> 标签：javascript, excel, internet-explorer

所以我正在尝试使用 Internet Explorer 将 html 数据导出到 excel（参见[这个](http://jsfiddle.net/BqDUF)小提琴）。它似乎不起作用，因为据我所知，IE 出于安全原因阻止了下载。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:02:05.867

最好使用 excel mime 类型 (application/excel) 从服务器提供数据。这将使解决方案浏览器不可知。

# firefox - 使用Firefox进行动态开发

> ID：11888915
> 
> 赞同：1
> 
> 时间：2012-08-09T17:35:44.237
> 
> 标签：firefox, firefox-addon

我正在关注 Firefox 的工具栏教程，但我无法动态开发。我已将“install.rdf”文件名更改为 .com 而没有“.com”。我也创建了一个单独的开发配置文件。我在标签中创建了一个具有匹配名称的文本文件。文本文件内容具有文件夹的绝对路径。我将它放入位于配置文件中的扩展文件夹中。我启动了Firefox，但什么也没发生。能乐工具栏被显示出来。有人可以帮忙吗？我正在关注的教程的链接是[http://www.borngeek.com/firefox/toolbar-tutorial/chapter-4/](http://www.borngeek.com/firefox/toolbar-tutorial/chapter-4/) 如果没有这个工作我就无法前进

# mysql - 加载数据infile mysql空值输入错误

> ID：11888916
> 
> 赞同：1
> 
> 时间：2012-08-09T17:35:52.010
> 
> 标签：mysql

我正在尝试通过发出以下命令将文本文件加载到现有表中

```
load data infile "test.txt" into table m_c; 
```

该表有 5 列：id、title、official、genre 和 platform，其中 id 是设置了 auto_increment 的主键。

该文件已添加到表中，但内容未添加。相反，我将 NULL 作为所有列的值。

我真的需要知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:38:02.543

您的文本文件中不需要 ID 字段，系统会自动为您插入的每一行提供一个新的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:42:22.473

```
LOAD DATA INFILE 'test.txt'
  INTO TABLE m_c
  (title, genre, platform, official)
SET gameid = NULL; 
```

[参考](https://stackoverflow.com/questions/6017032/how-to-load-data-infile-in-mysql-with-first-col-being-auto-increment)

另外，您的文件是如何格式化的？制表符分隔？CSV？您可能需要文件或行终止符。

请参阅[手册](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。

# spring - Spring应用程序的字符编码问题

> ID：11888917
> 
> 赞同：0
> 
> 时间：2012-08-09T17:36:00.950
> 
> 标签：spring, jboss

我正在使用 Eclipse IDE 中的 jboss7 和 mysql 使用 spring mvc 和 jpa 构建应用程序。我有一个奇怪的问题。我所有的 jsp 页面都用 charset: utf8 编码，我认为它工作正常。但是每当我尝试将数据从 jsp 发布到控制器时，我的数据都会以不同的编码风格进行编码。我尝试使用 firebug 查找标头，并惊讶地发现 post 请求具有 content-type 的标头：“text/plain;charset=ISO-8859-1”。我已经在 web.xml 中为 UTF-8 配置了 SetCharacterEncodingFilter（它是第一个过滤器）。但问题仍然存在。

我还将“org.apache.catalina.connector.URI_ENCODING”设置为 value="UTF-8"。但徒劳无功。

我还添加`messageSource`了属性 defaultEncoding 设置为“UTF-8”的bean。

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource" > 
```

问题依然存在。请帮忙

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T08:03:22.690

*请求*头是由浏览器设置的，所以你的应用程序无法控制它。通常，在您的 HTML 表单中，您可以放置​​一个`accept-charset=utf-8`属性来指定编码，但这并不一定有效。请参阅此问题[Setting the character encoding in form submit for Internet Explorer](https://stackoverflow.com/q/153527/116509)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T23:43:28.460

您应该需要设置 JVM 的编码，如下所示：

```
-Dfile.encoding=UTF-8 -Dfile.io.encoding=UTF-8 -DjavaEncoding=UTF-8 
```

因此根本不会有任何疑问。

# php - /}/ 有时不匹配 }

> ID：11888921
> 
> 赞同：0
> 
> 时间：2012-08-09T17:36:13.023
> 
> 标签：php, regex

正则表达式模式 /}/ 有时匹配 } 有时不匹配。

PHP中有任何已知的错误吗？我正在使用 PHP 5.40

我假设 } 不需要为匹配而转义。虽然`/\}/`总是匹配 } 但这种行为似乎是错误的。

该[链接](http://www.regular-expressions.info/characters.html)还显示了 11 个只需要转义的元字符。

有 11 个具有特殊含义的字符：左方括号 [、反斜杠 \、插入符号 ^、美元符号 $、句点或点 .、竖线或管道符号 |、问号 ?、星号或星号*、加号 +、左圆括号（和右圆括号）。这些特殊字符通常称为“元字符”。

例如，根据[PHP 文档](http://www.php.net/manual/en/regexp.reference.meta.php)`-`，它是一个元字符，但它不需要转义并且在 PHP 中可以正常工作，为什么不呢？`/-/``}`

```
$subject = 'find me}';
$pattern = '/}/';
$isMatch = preg_match($pattern,$subject,$matches);

echo 'Match Found = ' . $isMatch . '<br />';
print_r($matches); 
```

有时我会关注

```
Match Found = 0
Array ( ) 
```

有时我会关注

```
Match Found = 1
Array ( [0] => } ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:42:14.237

[http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)根据那个 { 和 } 是正则表达式字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:41:37.920

不知道为什么有时会`/}/`起作用，但有时却不起作用-我知道在 Java 中它*（*的正则表达式引擎，但我很确定逃避它几乎适用于所有口味或正则表达式 - 我所知道的唯一会破坏的是POSIX BRE，如果你*坚持*使用它:-P，但那是因为所有元字符都必须转义 IIRC`"}"`

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T17:42:06.880

某些字符必须转义，} 是其中之一，- 另一方面不是这里是必须转义的列表[http://php.net/manual/en/function.preg-quote.php](http://php.net/manual/en/function.preg-quote.php)：

```
. \ + * ? ^ $ [ ] ( ) { } < > = ! | : 
```

如您所见`-`，它不属于此列表，因此不需要对其进行转义。

所以正确的代码是：

```
$subject = 'find me}';
$pattern = '/\}/';
$isMatch = preg_match($pattern,$subject,$matches);

echo 'Match Found = ' . $isMatch . '<br />';
print_r($matches); 
```

希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:38:18.387

在 PCRE 中，`}`需要转义，用于表示匹配的数量：

```
/x{4}/ 
```

它也可以用来表示一个范围：

```
/x{1,4}/ 
```**

# google-apps-script - 什么可能导致“左侧分配无效”。不显示行号的错误消息？

> ID：11888923
> 
> 赞同：0
> 
> 时间：2012-08-09T17:36:14.503
> 
> 标签：google-apps-script

当运行自上次成功运行后未更改的函数时出现此错误，并且在移动到另一个项目时运行时未生成任何错误消息。

无论运行哪个函数，错误消息都会出现，甚至当我进入从项目中删除除以下简单函数之外的所有函数的阶段时，错误消息仍然存在：

```
function foo() {
Logger.log('bar');
} 
```

通常，该错误消息会给出行号，但在这种情况下没有。是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T20:01:57.923

就我而言，这是 if 语句中的错误分配

**错误代码**

```
if (tasks[ti].hasOwnProperty("category") && tasks[ti].hasOwnProperty("opportunityId") && tasks[ti].category="Meeting" && now.getYear()==closingYear && now.getMonth()==closingMonth ){
                                                                                                       // ^^ right there, should be comparison
      closedMeetings.push(tasks[ti]);
    } 
```

**正确的代码**

```
if (tasks[ti].hasOwnProperty("category") && tasks[ti].hasOwnProperty("opportunityId") && tasks[ti].category=="Meeting" && now.getYear()==closingYear && now.getMonth()==closingMonth ){
      closedMeetings.push(tasks[ti]);
    } 
```

可怕的部分是它说错误出现了，`Line 1`而这段代码在`line 236`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:36:14.503

该错误实际上是在项目作为资源引用的库中。我最初以为我已经通过注释掉库函数来排除这种情况，但事实并非如此。

据推测，缺少行号应该暗示错误出在外部资源中。我以后会知道的。

我正在回答我自己的问题，希望它可以节省一些人浪费我刚刚浪费的时间试图找到问题的根源。

# android - Android：实现联系人应用布局

> ID：11888926
> 
> 赞同：3
> 
> 时间：2012-08-09T17:36:22.513
> 
> 标签：android, layout

有没有人有教程或链接到 android 源或任何我可以用来学习 android 如何创建他们的联系人应用程序的东西。我正在研究创建一个小应用程序，它可以显示一些类似于联系人应用程序显示其联系人的数据。它似乎是某种带有用于操作的图像按钮的列表视图。

******编辑* *** *** 让这更容易一点，任何人都知道如何在 Android 2.1 和到目前为止的 2.3 上，联系人选项卡和收藏夹选项卡可以显示联系人并在其旁边显示一个按钮。我原以为这是在列表视图中以某种方式完成的，但根据我读过的内容，列表项上不可能有可点击的列表视图加按钮。所以我假设正在以某种方式创建一个列表视图，并在列表视图旁边添加了一个按钮。我试过在 github 上查看股票 android 源代码，但我就是不明白。**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T18:00:12.173

这是 Android 联系人应用程序的 git 中心： [https ://github.com/android/platform_packages_apps_contacts](https://github.com/android/platform_packages_apps_contacts)**

# sql - 转置表 Oracle 10

> ID：11888928
> 
> 赞同：1
> 
> 时间：2012-08-09T17:36:23.833
> 
> 标签：sql, oracle10g

我读过一些问题，但对我来说不清楚，我不能使用枢轴

我有下一张桌子：

```
ID AREA CAR
1   A1   A
1   A2   B
1   A3   C
2   A1   D
2   A2   E
3   A2   F
3   A3   G 
```

我想要一些像

```
ID  AREA1  CAR1  AREA2  CAR2  AREA3  CAR3
1     A1     A    A2     B      A3    C         
2     A1     D    A2     D     null  null                   
3    null   null  A2     F      A3    G 
```

区域的数量是固定的，只有 A1,A2,A3。

我试过了

```
SELECT     id, area1,car1,area2,car2
FROM       (  SELECT        id,
                        case when AREA='A1' then AREA else NULL end area1,
                        case when AREA='A1' then CAR else NULL end car1,   
                        case when AREA='A2' then AREA else NULL end area2,
                        case when AREA='A2' then CAR else NULL end car2,
                        case when AREA='A3' then AREA else NULL end area3,
                        case when AREA='A3' then CAR else NULL end car3
          FROM        TABLA
          GROUP BY    id ); 
```

但我得到：

```
"not a GROUP BY expression" 
```

我该怎么做才能拥有正确的 GROUP BY 表达式并正确转置我的表格？有更好的解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T17:45:49.520

不幸的是，Oracle 10 上没有 PIVOT 函数。您的查询很接近，但无需将其包装在另一个查询中：

```
select id,
  min(case when area = 'A1' then area end) area1,
  min(case when area = 'A1' then car end) car1,
  min(case when area = 'A2' then area end) area2,
  min(case when area = 'A2' then car end) car2,
  min(case when area = 'A3' then area end) area3,
  min(case when area = 'A3' then car end) car3
from yourTable
group by id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:40:58.527

当您执行 a`GROUP BY`时，您需要聚合您未分组的所有列。你可能想要类似的东西

```
SELECT     id, area1,car1,area2,car2
FROM       (  SELECT        id,
                        max( case when AREA='A1' then AREA else NULL end) area1,
                        max( case when AREA='A1' then CAR else NULL end) car1,   
                        max( case when AREA='A2' then AREA else NULL end) area2,
                        max( case when AREA='A2' then CAR else NULL end) car2,
                        max( case when AREA='A3' then AREA else NULL end) area3,
                        max( case when AREA='A3' then CAR else NULL end) car3
          FROM        TABLA
          GROUP BY    id ); 
```

您还可以将聚合和 移动`GROUP BY`到外部查询

```
SELECT     id, max(area1),max(car1),max(area2),max(car2)
FROM       (  SELECT        id,
                        case when AREA='A1' then AREA else NULL end area1,
                        case when AREA='A1' then CAR else NULL end car1,   
                        case when AREA='A2' then AREA else NULL end area2,
                        case when AREA='A2' then CAR else NULL end car2,
                        case when AREA='A3' then AREA else NULL end area3,
                        case when AREA='A3' then CAR else NULL end car3
          FROM        TABLA)
GROUP BY    id; 
```

# db2 - 验证用户、密码并打开 rpgs 菜单

> ID：11888930
> 
> 赞同：0
> 
> 时间：2012-08-09T17:36:29.827
> 
> 标签：db2, ibm-midrange, rpgle, rpg

我的 AS400(rpg400) 应用程序中有一个登录模块。这里验证了用户名和密码，并且只有当密码匹配时，用户才能访问菜单屏幕，该屏幕进一步包含 rpg 程序以导航到后续模块。

我现在想要实现的是当用户被验证时，登录的用户名必须出现在每个屏幕上，或者更确切地说是每个被调用的 rpg 屏幕上。（即必须维护用户会话）请不要指导管理属性。这是来自低水平的工作点。

以下是关于用户的 PF：

```
 USER PF

A          R USRREC                
A            USER          10A     
A            PWD           10A     
A            USRTYP         2A     
A          K USRTYP 
```

键入用户类型。如何允许所有 pgms 访问已登录人员的变量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T18:49:00.697

5250 显示器与 HTML 不同。没有可用作标准模板的 CSS。您将需要专门设计每个显示器，使其看起来像您想要的那样。对于这个特定的问题，这意味着您将在每个要查看的显示面板上放置一个用户 ID 字段。

如果我正在设计这个，我可能会将用户 ID 作为参数传递给每个 RPG 程序，但是有很多方法可以传递信息。

*   QTEMP 中的数据区
*   QTEMP 中的数据库文件
*   低密度脂蛋白
*   QTEMP 中的用户空间
*   环境变量 (*JOB)

将用户 ID 作为参数传递的优点是永远不会有需要清理的陈旧对象。如果一个人有两个用户 ID——比如她在会计和应付账款部门工作——并且需要注销并重新登录到这个内部安全系统，那么后续的 CALL 只需传递正确的参数。

如果系统可以使用内置的 IBM 安全性，所有这些都可以避免。然后，您可以使用作为作业名称一部分的用户配置文件 - 请参阅[程序状态数据结构](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc092508150.htm)，位置 254-263 以在 RPG 程序中获取它。如果您可以使用 IBM 用户配置文件，您就不必传递任何东西；每个程序都能够自行检索该信息；我会将其放入服务程序中，以便于重用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:28:28.710

如果您使用的用户 ID 与他们用于登录系统的用户 ID 相同，那么您可以`USER`在显示文件中使用关键字。

您真的需要将用户 ID 和密码存储在本质上不如操作系统安全的文件中吗？这会打开一系列您可能不需要接触的问题。

您可以调用可以使用该`CHKPWD`命令输入系统密码的 CL 程序或过程。监视错误，并在出现问题时将其注销。他们的密码是安全的（假设您使用的是 SSL 连接）。

如果您非常强烈地认为您必须有一个单独的密码，请考虑存储密码的安全单向哈希。当他们稍后输入密码时，计算他们输入的哈希值并将其与存储的哈希值进行比较。

如果您要求用户在他们已经登录后输入密码，那么假设您正在尝试解决一些安全问题似乎是安全的，因此尝试以安全的方式帮助您这样做似乎是合理的。这是一个开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:06:24.540

听起来像是[本地数据区](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rbam6/lclda.htm)或在 QTEMP 中创建的常规数据区的理想用途。

*   [RPG：数据区数据结构](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508193.htm)
*   [RPG：数据区域操作](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzasd/sc092508767.htm)

# c - 结构成员对齐混乱

> ID：11888933
> 
> 赞同：2
> 
> 时间：2012-08-09T17:36:49.947
> 
> 标签：c, memory-management, struct

```
typedef struct structc_tag
{
   char        c;
   double      d;
   int         s;
} structc_t; 
```

我在博客中读到这将需要 24 个字节的数据：

sizeof(char) + 7 字节填充 + sizeof(double) + sizeof(int) + 4 字节填充 = 1 + 7 + 8 + 4 + 4 = 24 字节。

我的问题是为什么 7 字节的填充，为什么我们不能在那里使用 3 字节的填充并利用接下来的 8 字节进行加倍？最后 4 个字节需要什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T04:41:36.500

您需要考虑如果使用以下结构分配这些结构的数组会发生什么`malloc()`：

```
structc_t *p = malloc(2 * sizeof *p); 
```

考虑一个平台，其中`sizeof(double) == 8`和`sizeof(int) == 4`所需的对齐方式`double`是 8。`malloc()`始终返回正确对齐的地址以存储任何 C 类型 - 因此在这种情况下`a`将是 8 字节对齐的。然后填充要求自然会下降：

*   为了实现`a[0].d`8 字节对齐，在 ; 之后必须有 7 个字节的填充`a[0].c`。

*   为了实现`a[1].d`8 字节对齐，整个结构体的大小必须是 8 的倍数，因此 . 之后必须有 4 个字节的填充`a[0].s`。

如果您从大到小重新排序`struct`：

```
typedef struct structc_tag
{
   double      d;
   int         s;
   char        c;
} structc_t; 
```

...然后唯一需要的填充是 3 个字节之后`.c`，使结构大小为 8 的倍数。这导致结构的总大小为 16，而不是 24。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:38:35.420

它取决于平台，但取决于与之`double`对齐的内容。如果它与 8 字节对齐，这似乎是这种情况，3 字节的填充不会削减它。

如果`double`对齐到 4 个字节，那么您是对的，将使用 3 个字节的填充。

# c++ - 在 C++ 中进行多线程时出错

> ID：11888938
> 
> 赞同：0
> 
> 时间：2012-08-09T17:37:22.023
> 
> 标签：c++, multithreading, winapi

我正在写一个将利用多线程的程序。我尝试阅读有关多线程的信息，并且能够使示例程序正常工作。但是我遇到了一个小故障，我不确定出了什么问题。我正在发布示例程序，并将突出显示我遇到问题的地方。

```
#include <Windows.h>
#include <process.h>
#include <iostream>
#include <cassert>
#include <ctime>

#import "calc.dll" \
auto_rename no_namespace no_smart_pointers \
raw_native_types named_guids

using namespace std;

HANDLE  th_mutex;

struct  Arguments
{
    string  case_id;

    string  file;
};
//____________________________________

unsigned int __stdcall TestThread(void *args)
{
    int i   =   0,
        j   =   0;

    cout << "Inside thread" << endl;

    for (i = 0; i <= 10000; i++)
    {
        for (j = 0; j <= 100000; j++)
        {
        }

        if (i == 10000)
            cout << "The value of i inside the thread = " << i << endl;
    }

    return  EXIT_SUCCESS;
}
//____________________________________

unsigned int __stdcall Thread(void *args)
{
    CoInitialize(0);
    {
        Arguments   *input;

        input   =   (Arguments *) args;

        time_t  current_time;
        time(&current_time);
        cout << ctime(&current_time) << endl;

        IHeatExchangerNetwork   *hxNetwork  =   0;
        IDispatchPtr        theUnit     =   0;
        IHeatTransferUnit   *unit       =   0;

        VARIANT vAppend;

        _bstr_t filename,
            output;

        filename    =   input->file.c_str();
        filename    +=  input->case_id.c_str();
        filename    +=  ".dat";

        output      =   input->file.c_str();
        output      +=  input->case_id.c_str();
        output      +=  ".dbo";

        cout << filename << endl;
        cout << output << endl;

        HRESULT hr  =   CoCreateInstance(CLSID_HeatExchangerNetwork,
                             0,
                             CLSCTX_ALL,
                             DIID_IHeatExchangerNetwork,
                             reinterpret_cast<void**>(&hxNetwork));

        theUnit     =   hxNetwork->LoadHeatTransferUnit(filename, HxUnitTypeKey::HxUnitTypeCrossflow);

        hr  =   theUnit->QueryInterface(DIID_IHeatTransferUnit, reinterpret_cast<void**>(&unit));

        hxNetwork->Run(0, 0);

        vAppend.boolVal = false;
        unit->WriteDBOFile(output, OutputData, vAppend);

        time(&current_time);
        cout << ctime(&current_time) << endl;
    }

    CoUninitialize();

    return  EXIT_SUCCESS;
}
//____________________________________

int main()
{
    DWORD   retval;

    Arguments   args[2];

    args[0].case_id =   "1";
    args[0].file    =   "C:\\Documents and Settings\\User\\My Documents\\Test Cases\\1\\";

    args[1].case_id =   "2";
    args[1].file    =   "C:\\Documents and Settings\\User\\My Documents\\Test Cases\\2\\";

    th_mutex    =   CreateMutex(NULL, FALSE, NULL);

    if (th_mutex == NULL) 
    {
        printf("CreateMutex error: %d\n", GetLastError());
        return 1;
    }

//  ================================
//  Basic testing of calling threads
//  ================================
    HANDLE  hnd1;

    cout << "Before creating new thread" << endl;

    hnd1    =   (HANDLE) _beginthreadex(NULL, 0, &TestThread, NULL, 0, 0);

    cout << "After creating thread" << endl;

//  ====================================
//  Calling Calc routine through threads
//  ====================================
    HANDLE  hnd2,
        hnd3;

    hnd2    =   (HANDLE) _beginthreadex(NULL,
                                        0, 
                                        &Thread,
                                        (void *)&args[0],
                                        0,
                                        0);
    hnd3    =   (HANDLE) _beginthreadex(NULL,
                                        0,
                                        &Thread,
                                        (void *)&args[1],
                                        0,
                                        0);

    WaitForSingleObject(hnd1, INFINITE);
    WaitForSingleObject(hnd2, INFINITE);
    WaitForSingleObject(hnd3, INFINITE);

    GetExitCodeThread(hnd1, &retval); // Gets the return value from the function
    CloseHandle(hnd1);
    CloseHandle(hnd2);
    CloseHandle(hnd3);

    return EXIT_SUCCESS;
} 
```

我面临的问题是当我执行程序时，我得到以下输出

```
Before creating new thread
After creating threadInside thread

Thu Aug 09 10:56:58 2012
Thu Aug 09 10:56:58 2012

C:\Documents and Settings\User\My Documents\Test Cases\1\1.datC:\Documents and Settings\User
\My Documents\Test Cases\2\2.dat

C:\Documents and Settings\kcomandur\My Documents\Test Cases\1\1.dboC:\Documents and Settings\User
\My Documents\Test Cases\2\2.dbo

The value of i inside the thread = 10000
Thu Aug 09 10:57:08 2012 
```

然后程序崩溃。我收到以下错误

```
Debug Error!
Program: ...MultiThreading.exe
R6010
-abort() has been called
(Press Retry to debug the application) 
```

当我重试时，中断发生在以下位置中生成的 .tli 文件中，以 _com_dispatch_method 开头

```
#pragma implementation_key(723)
inline IDispatch * IHeatExchangerNetwork::LoadHeatTransferUnit ( BSTR filename, enum HxUnitTypeKey unitType ) {
    IDispatch * _result = 0;
    _com_dispatch_method(this, 0x20, DISPATCH_METHOD, VT_DISPATCH, (void*)&_result, 
        L"\x0008\x0003", filename, unitType);
    return _result;
} 
```

文件名变量具有值

```
C:\Documents and Settings\User\My Documents\Test Cases\2\2.dat 
```

我尝试使用互斥锁并修改了线程函数

```
unsigned int __stdcall Thread(void *args)
{
    CoInitialize(0);
    {
        WaitForSingleObject(th_mutex, INFINITE);

        // Same content as original Thread function. 
        // Not writing it again to minimize space

        ReleaseMutex(th_mutex);
    }

    CoUninitialize();

    return  EXIT_SUCCESS;
}
//____________________________________ 
```

这次程序在 .tli 文件中的以下位置 _com_dispatch_method 崩溃

```
#pragma implementation_key(966)
inline long IHeatTransferUnit::WriteDBOFile ( BSTR filename, short io, const VARIANT & vAppend ) {
    long _result = 0;
    _com_dispatch_method(this, 0x32, DISPATCH_METHOD, VT_I4, (void*)&_result, 
        L"\x0008\x0002\x080c", filename, io, &vAppend);
    return _result;
} 
```

通过使用互斥锁，错误是由具有 HANDLE hnd3 的线程生成的。变量文件名具有值

```
C:\Documents and Settings\User\My Documents\Test Cases\2\2.dbo 
```

同样通过使用互斥体，我能够越过以前的错误位置。

我不确定我是否真的需要一个互斥锁作为以下调用

```
hxNetwork->Run(0, 0); 
```

适用于彼此毫无关联的两个不同文件。这也是程序中最耗时的部分，因此我想同时运行 2 个案例。

通过像我一样使用互斥锁，它运行第一种情况，然后运行第二种情况。

此外，我无法控制 calc.dll。它是第三方软件，我不确定是否支持多线程。

所以我想知道我需要做什么才能让两个运行都进行并能够输出 2 个文件

提前致谢

# css - 仅应用于文本的文本框的 CSS 背景颜色

> ID：11888939
> 
> 赞同：1
> 
> 时间：2012-08-09T17:37:25.187
> 
> 标签：css, colors, background, textbox

我有两个相互重叠的文本框。第一个文本框“TextBox1”由用户输入定义。第二个“TextBox2”由自动完成功能填充。我的目标是让第一个文本框的背景仅为已键入的文本为白色，以便生成的“TextBox2”仅显示返回的帐户名称的其余部分。

示例：用户键入“ut tr”，存储在“TextBox2”中的自动完成变为：“UT Training”。我有一个文本转换来大写每个单词的第一个字母，所以在转换之后（当用户键入）“Ut Tr”。

当输入与“TextBox2”中的结果重叠时，由于字母大小写的不同，两者不匹配。在其他示例中，这可能会导致严重的外观问题。

因此，如果输入文本框“TextBox1”的文本背景可能是白色的，那么用户将只能看到他们输入的内容以及自动完成的其余部分。

谢谢你的帮助！这是我的第一篇文章，所以如果我在不知不觉中做了任何禁忌，我深表歉意。

这是一个视频链接，展示了它的外观：[http ://screencast.com/t/ef6dBJyU2X14](http://screencast.com/t/ef6dBJyU2X14)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:51:54.650

您可以在输入中添加一个类并为其应用 CSS 样式；

```
.someclass{
    color:#FFF;
    background-color:#FFF;
    border: solid 1px #000;
}
<input type="text" class="someclass"> 
```

***[这](http://jsfiddle.net/blasteralfred/svPPp/)***是一个有效的现场演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:38:36.933

您可以检查用户现在输入了多少个字符，方法类似于：

```
$('#myInput').on('keydown', function() {
    inputLength = $(this).val().length
}); 
```

`N = inputLength`然后将自动完成中第一个字符的颜色更改为白色。可能，使用子字符串：

```
substring(0, inputLength); 
```

# c# - 无法将 JSON 作为 Dictionary<> 以外的任何内容发送到 ASMX

> ID：11888941
> 
> 赞同：0
> 
> 时间：2012-08-09T17:37:33.107
> 
> 标签：c#, asp.net, ajax, json, web-services

我正在编写一个在客户端和服务器之间传输 JSON 的 ASP.NET Web 应用程序。我几乎完成了一切，除了我似乎无法从客户端将 JSON 传输到 ASMX 并将其解释为除了`Dictionary<string>`

在服务器端，我有

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ToolboxItem(false)]
[ScriptService]
public class WebService1: System.Web.Services.WebService
{
    [WebMethod(EnableSession = true)]
    public bool SaveExpression(ExpressionStructure Expression) {
        return true;
    }
} 
```

在客户端，我使用 发送数据`$.ajax()`，其中是客户端之前收到`expressionObject.expression`的 .NET 类的对象：`ExpressionStructure`

```
var dataSubmit = { Expression: expressionObject.expression };
$.ajax({
    url: "WebService.asmx/SaveExpression",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    type: 'POST',
    data: JSON.stringify(dataSubmit),
    success: function (msg) {
        alert(msg.d);
    },
    error: function (obj, status, msg) { ajaxServerError(obj, status, msg); }
}); 
```

当`SaveExpression`方法接受`Object`时，我得到一个字符串字典。当我使用`ExpressionStructure`时，我得到一个`500 Internal Server Error`.

发送的表达式是从这个 MVC3 控制器方法接收到的内容的未修改版本。

```
public ActionResult Expression(int ExpressionID) {
    ExpressionStructure es = GetExpressionFromDatabase(ExpressionID);

    return new JsonResult {
        Data = new {
            expression = es,
            view = this.RenderPartialView("_Expression_Statement", es)
        }, 
        JsonRequestBehavior = System.Web.Mvc.JsonRequestBehavior.AllowGet
    };
} 
```

表达式本身如下所示：

```
{
    "Expression": 
    {
        "Name":"Status Desc",
        "Type":0,
        "Statement": 
        {
            "FormulaItem": 
            {
                "Type":"Replace",
                "Parameters": 
                [
                    {
                        "Type":"Char",
                        "Value": 
                        {
                            "Value":"[Status]"
                        },
                        "Source":"picker"
                    },
                    {
                        "Type":"input",
                        "Value":
                        {
                            "Value":"0,1,2;Home,Driving,Away"
                        },
                        "Source":"inputBox"
                    }
                ]
            }
        }
    }
} 
```

我尝试将 ASMX 方法更改为 take `string`，`ExpressionStructure`但都返回一个`500 Internal Server Error`. 我还尝试修改来自客户端的 JSON，进行各种包装（包括`"Expression"`用方括号包装最外层）。

**我遗漏了哪些关键元素阻止 ASMX 正确获取 JSON 并获取`ExpressionStructure`?** 或者，我怎样才能直接或从字典中获取字符串，以便手动执行 JSON 转换（我不想这样做）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:00:20.077

在构建了一个与主项目分开的小测试用例后，我能够更好地了解服务器返回的原因`500 Internal Server Error`。碰巧的是，Web 应用程序正在捕获反序列化错误并尝试将请求重定向到错误处理程序页面。由于它不是一个实际的页面请求，重定向引发了一个错误，这迫使重定向到错误处理程序页面......直到太多的重定向踢出一个错误。

根本问题在于将 JSON 反序列化为 .NET 端相当复杂的（集合）类。用 XML 属性装饰器完美装饰的类在模式中有选择时使用抽象类（即一个元素或另一个元素）。没有类似的 JSON 装饰器，反序列化不知道如何将 JSON 反序列化到哪个类。

# python - 如何将路径字符串的格式更改为不同的操作系统？

> ID：11888943
> 
> 赞同：3
> 
> 时间：2012-08-09T17:37:38.167
> 
> 标签：python, path, operating-system

我需要将文件路径从 MAC 更改为 Windows，我正打算做一个简单`.replace()`的操作`/`，`\`但我突然想到可能有更好的方法。所以例如我需要改变：

```
foo/bar/file.txt 
```

至：

```
foo\bar\file.txt 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:27:49.840

你可以使用这个：

```
>>> s = '/foo/bar/zoo/file.ext'
>>> import ntpath
>>> import os
>>> s.replace(os.sep,ntpath.sep)
'\\foo\\bar\\zoo\\file.ext' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-08T22:15:00.373

**转换为 Unix：**

```
import os
import posixpath
p = "G:\Engineering\Software_Development\python\Tool"
p.replace(os.sep, posixpath.sep) 
```

这会将 used-os 分隔符替换为 Unix 分隔符。

**转换为 Windows：**

```
import os
import ntpath
p = "G:\Engineering\Software_Development\python\Tool"
p.replace(os.sep, ntpath.sep) 
```

这会将 used-os 分隔符替换为 Windows 分隔符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-26T11:50:41.417

该[`pathlib`](https://docs.python.org/3/library/pathlib.html)模块（在 Python 3.4 中引入）对此提供支持：

```
from pathlib import PureWindowsPath, PurePosixPath

# Windows -> Posix
win = r'foo\bar\file.txt'
posix = str(PurePosixPath(PureWindowsPath(win)))
print(posix)  # foo/bar/file.txt

# Posix -> Windows
posix = 'foo/bar/file.txt'
win = str(PureWindowsPath(PurePosixPath(posix)))
print(win)  # foo\bar\file.txt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T17:40:51.333

`os.path.join`将根据您的操作系统类型（`POSIX`、`Windows`、`Mac OS`等）智能地连接字符串以形成文件路径

**参考**：[http ://docs.python.org/library/os.path.html#os.path.join](http://docs.python.org/library/os.path.html#os.path.join)

对于您的示例：

```
import os

print os.path.join("foo", "bar", "file.txt") 
```

# wpf - 获取修正符号 xaml 的 path.data

> ID：11888949
> 
> 赞同：0
> 
> 时间：2012-08-09T17:38:12.287
> 
> 标签：wpf, xaml

我正在学习在 XAML 中创建自定义控件。我想在我的一个按钮上显示正确的符号，如下所示

![在此处输入图像描述](../Images/2419ed97719c1131ca2e7ac69684b270.png)

如何使用 Path.Data/Geometry 获得它？是否有任何工具可以生成此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:29:00.893

就我个人而言，我更喜欢将 Adob​​e Illustrator 或 Fireworks 与免费在线提供的 XAML 导出插件一起使用，例如 Mike Swanson 的[http://www.mikeswanson.com/xamlexport/](http://www.mikeswanson.com/xamlexport/)

或者，如果您熟悉 Expression Blend，那么钢笔工具可以轻松完成这样的路径。要么给你非常干净的结果 xaml。

现在虽然为了让你通过，这里有一个你的复选标记的例子，但你可能会使用颜色值来使它看起来与我没有花一分钟制作它的完全一样。

```
<Path StrokeThickness="1.0" Stroke="#ff009344" StrokeMiterLimit="1.0" Data="F1 M 0.500,5.574 L 0.500,9.324 L 4.333,12.823 L 6.000,12.823 L 13.583,4.907 L 13.583,1.241 L 6.000,9.116 L 4.292,9.157 L 0.500,5.574 Z">
    <Path.Fill>
      <LinearGradientBrush MappingMode="Absolute" StartPoint="306.048,-391.325" EndPoint="307.800,-401.261">
        <LinearGradientBrush.GradientStops>
          <GradientStop Offset="0.00" Color="#ff8cc63e"/>
          <GradientStop Offset="1.00" Color="#ff38b449"/>
        </LinearGradientBrush.GradientStops>
        <LinearGradientBrush.Transform>
          <MatrixTransform Matrix="1.000,0.000,-0.000,-1.000,-299.500,-388.843" />
        </LinearGradientBrush.Transform>
      </LinearGradientBrush>
    </Path.Fill>
  </Path> 
```

如果您要经常使用路径和控件的设计部分，Expression Blend 是 SL4/WPF 的最佳选择，但 Blend 5 仍然缺乏一些功能。希望这可以帮助。

# c++ - 导致链接器错误的宏

> ID：11888951
> 
> 赞同：0
> 
> 时间：2012-08-09T17:38:14.657
> 
> 标签：c++, macros, linker-errors

我在一个库中定义了一堆宏，例如`MY_LIB.so`我构建并成功编译了它。例子：

```
#define DOSOMETHING() function()

#define ANOTHER() function2() 
```

当我在另一个项目中使用它时，我将它链接到我的 Makefile 中`-lMY_LIB`，并且我得到一个未定义的函数引用错误（）。我点击它，它把我带到了`DOSOMETHING()`宏。如何解决宏中的链接器错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:39:25.573

`Macro`无非就是将它的内容复制到代码中。未实施的`linker`sais 。`function`所以只需提供一个实现

# java - 如何正确转义推文以作为 JSON 发送到 socket.io？

> ID：11888955
> 
> 赞同：1
> 
> 时间：2012-08-09T17:38:24.417
> 
> 标签：java, regex, twitter, socket.io

我正在使用[socket.io-java-client](https://github.com/Gottox/socket.io-java-client)将我正在监听的推文的 JSON 对象发送到我的 node.js 服务器。一段时间后，套接字断开连接，我收到此错误：

```
io.socket.SocketIOException: 1+0
at io.socket.IOConnection.transportMessage(IOConnection.java:725)
at io.socket.WebsocketTransport.onMessage(WebsocketTransport.java:117)
at de.roderick.weberknecht.WebSocketReceiver.run(WebSocketReceiver.java:57)
Aug 9, 2012 10:05:45 AM io.socket.IOConnection cleanup
INFO: Cleanup 
```

该问题似乎是由某些带有问题字符的推文引起的。我的程序尝试发送的 JSON：

```
Aug 9, 2012 10:05:43 AM io.socket.IOConnection sendPlain
INFO: > 5:::{"args":[{"message":"#TBT #WatchTheThrone #Yeezy #JayZ #LA One of the most epic concerts of my life. ? http://t.co/6WVaZgIM","user":"ElleBxo"}],"name":"p5tweet"}
Aug 9, 2012 10:05:45 AM io.socket.IOConnection sendPlain 
```

与推特上的实际推文相比：“#TBT #WatchTheThrone #Yeezy #JayZ #LA 我一生中最史诗般的音乐会之一。http: [//instagr.am/p/OHXPQxxUe7/](http://instagr.am/p/OHXPQxxUe7/) ” [https://twitter.com/ ElleBxo/状态/233610010066821121](https://twitter.com/ElleBxo/status/233610010066821121)

我的 JSON 在 Instagram 链接前面看到的“？”似乎有一个奇怪的差异，而在 Twitter 上它只是“”。下面是我有问题的代码。我尝试在字符串上执行 replaceAll()，但它不能保证抛出和断开我的套接字的错误。我还看到其他字符导致此错误，所以我不确定它们都是什么。

```
Map<String,String> mp=new HashMap<String, String>();
Status tweet = (Status)queue.get(0);
String safeTweet = tweet.text().replaceAll(" ? ", " ");
mp.put("user",tweet.user().screenName());
mp.put("message",safeTweet);
JSONObject tweetJSON = new JSONObject(mp);
socket.emit("p5tweet", tweetJSON); 
```

如何正确转义推文字符串以防止这种情况发生？谢谢！！:)

编辑：另一条断开连接的推文。似乎链接通常会导致它：

```
 {"args":[{"message":"RT @Olympics: Congrats to the first woman ever to win an Olympic #Boxing gold medal - Nicola Adams of Team GBR #olympics http://t.co/Jab ...","user":"GlockQueen31"}],"name":"p5tweet"} 
```

在推特上：“恭喜第一位获得奥运会拳击金牌的女性——GBR 队的尼古拉·亚当斯 #olympics pic.twitter.com/JabAjIrl”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:47:38.680

看起来像 Tweet Stream 中的错误。第 242 行

[https://github.com/mccv/processing-tweet-stream/blob/master/src/main/scala/com/twitter/processing/TweetStream.scala](https://github.com/mccv/processing-tweet-stream/blob/master/src/main/scala/com/twitter/processing/TweetStream.scala)

`reader = new BufferedReader(new InputStreamReader(stream))`

这不考虑编码，并使用平台默认值。如果 HTTP 响应的编码与您的平台匹配，则可以，否则它将破坏非 ASCII 字符。

# java - 扫描 S3 以获取最新文件

> ID：11888956
> 
> 赞同：1
> 
> 时间：2012-08-09T17:38:28.040
> 
> 标签：java, amazon-s3

我们有一些数据要存储在 S3 上，并且希望能够获取最近上传的文件。

关于实现这一目标的最佳方法的任何建议？

我们目前正在使用[jets3t](http://www.jets3t.org/api/org/jets3t/service/model/S3Object.html)库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-05T15:24:34.250

使用 Spring Boot：

```
@Service
public class AWSS3Service {

private static final Logger LOGGER = LogManager.getLogger(AWSS3Service.class);

@Autowired
private AmazonS3 amazonS3;

@Value("${aws.s3.bucket}")
private String bucketName;

@Value("${aws.s3.folder.download}")
private String foldernameDownload;

public byte[] downloadFile(final String typeName) {

    byte[] content = null;
    LOGGER.info("Downloading most recent file from {}",  typeName);

    ObjectListing objects = amazonS3.listObjects(bucketName,foldernameDownload+"/"+ typeName+"/");

    Date tempDate = null;
    S3ObjectSummary recentObj = null;

    List<S3ObjectSummary> objectSummaries = objects.getObjectSummaries();
    for (S3ObjectSummary objectSummary : objectSummaries) {

        if (objectSummary.getSize()<=0)
            continue;

        Date modifiedDate = objectSummary.getLastModified();

        if(tempDate == null || modifiedDate.compareTo(tempDate) > 0) {
            tempDate = modifiedDate;
            recentObj = objectSummary;
        } 
    }

    String obKey ="";
    if(recentObj != null)
        obKey = recentObj.getKey();
    else
        return content;//no files found

    S3Object s3Object = amazonS3.getObject(bucketName,obKey);
    S3ObjectInputStream stream = s3Object.getObjectContent();
    try {
        content = IOUtils.toByteArray(stream);
        LOGGER.info("File downloaded successfully.");
        s3Object.close();
    } catch(final IOException ex) {
        LOGGER.error("IO Error Message= {}", ex.getMessage());
    }
    return content;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T08:09:17.310

这可能有帮助..

```
S3Service s3Service = new S3Service(providerCredentials);

Date tempDate = null;
S3Object recentObj = null;

for(S3Object object : s3Service.listObjects("bucketName")) {
    modifiedDate =(Date)object.getMetadata(BaseStorageItem.METADATA_HEADER_LAST_MODIFIED_DATE); 
    if(tempDate == null) {
        tempDate = modifiedDate;
    } else {
        if(modifiedDate.compareTo(tempDate) < 0) {
             tempDate = modifiedDate;
             recentObj = object;
    }
    }
 } 
```

我没有测试过这段代码。希望这可以帮助..

# eclipse - Eclipse 中的 PerlUnit

> ID：11888968
> 
> 赞同：4
> 
> 时间：2012-08-09T17:39:20.390
> 
> 标签：eclipse, perl, unit-testing, junit, eclipse-plugin

如果我们在 Eclipse 中单击 Java 透视图并右键单击一个 Java 项目，我们会看到“新建”一个 JUnit 文件。在 JUnit 中执行测试用例时，我们会看到红/绿条显示测试用例的失败/成功。

我正在尝试找到一个可以添加这两个功能的插件：

*   在 perl 透视图中（由 EPIC 提供），右键单击 Perl 项目应该会列出一个新的“t”文件。

*   在执行 perl 单元时，应使用 Reed/Green 条显示测试用例的状态。

如果没有插件，我们可以做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T12:14:58.223

据我所知，没有用于此的 EPIC 插件，甚至没有更通用的基于 TAP 的 Eclipse 测试运行器。有这样的东西就好了。

从网页上获取某种关于测试成功的报告是很常见的。这可以使用像[Test::Harness](https://metacpan.org/module/Test%3a%3aHarness)这样的工具来完成，该工具可用于运行您的一个或多个测试，并返回或输出您的测试运行情况的报告。

从那里开始，将其变成红色/绿色进度条。

如果您想在测试运行期间看到不断更新的进度，则必须在测试文件运行时更直接地运行和解析它们。所有 Perl 测试都输出 TAP 格式，这是一种标准格式，此处提供了规范：

*   [http://testanything.org](http://testanything.org)

# sql-server - 查询 SQL Server Reporting Services 数据库、ReportServer.Catalog 表以分析报表参数

> ID：11888969
> 
> 赞同：0
> 
> 时间：2012-08-09T17:39:24.600
> 
> 标签：sql-server, ssrs-2008, xquery

我正在尝试编写一个查询来提取我的报表服务器中所有参数的名称。参数数据作为 XML 存储在 ntext 字段中，因此我认为我不能在其上使用 xquery。

我最初开始做的是为我希望找到的每个参数名称制作案例陈述，但这将是乏味的，我不认为报告开发人员与参数名称完全一致（事实上这是我的原因之一想要查询）。

这是我到目前为止所拥有的，非常简单：

```
SELECT [Path], [Name], CreationDate, ModifiedDate, Parameter, 
CASE WHEN Parameter LIKE '%<Name>UserId</Name>%' THEN 'Yes' ELSE 'No' END AS  'UserId', 
CASE WHEN Parameter LIKE '%<Name>Country</Name>%' THEN 'Yes' ELSE 'No' END AS 'Country',
CASE WHEN Parameter LIKE '%<Name>Office</Name>%' THEN 'Yes' ELSE 'No' END AS 'Office'
FROM dbo.Catalog
WHERE type IN (2, 4)
AND [path] NOT LIKE '/Enterprise Reports%' 
AND [Path] NOT LIKE '/Email Subscription%'
ORDER BY [Path] 
```

我想我想要的是更像这样的东西：

```
SELECT [Path], [Name], CreationDate, ModifiedDate, Parameter.query(/Parameters/Parameter/Name)
FROM dbo.Catalog
WHERE type IN (2, 4)
AND [path] NOT LIKE '/Enterprise Reports%' 
AND [Path] NOT LIKE '/Email Subscription%'
ORDER BY [Path] 
```

问题是，它是 ntext，而不是 xml。我可以在上面使用转换吗？

另一个问题是，我不知道用于提取 XML 中许多参数的名称字段的 xquery 语法。

文档的架构非常简单：

```
<Parameters>
   <Parameter>
      <Name>Some name</Name>
      ...some more fields i don't care about...
   </Parameter>
   <Parameter>
      <Name>Another name</Name>
   </Parameter>
   ...more parameters, etc.
</Parameters> 
```

我只想列出名称中的内容。

可以有许多节点，每个节点都有一个子节点。

更新：

似乎 Nodes() 应该对我有所帮助，但我正在努力将在线图书和 Simple Talk 文章中的示例应用于我的情况。这是我到目前为止所拥有的：

```
SELECT [Path], [Name], CreationDate, ModifiedDate, Parameter, 
CASE WHEN Parameter LIKE '%<Name>UserId</Name>%' THEN 'Yes' ELSE 'No' END AS 'UserId', 
CASE WHEN Parameter LIKE '%<Name>Country</Name>%' THEN 'Yes' ELSE 'No' END AS 'Country',
CASE WHEN Parameter LIKE '%<Name>Office</Name>%' THEN 'Yes' ELSE 'No' END AS 'Office'
, CAST(Parameter AS XML).nodes('/Parameters/Parameter/Name')
FROM dbo.Catalog
WHERE type IN (2, 4)
AND [path] NOT LIKE '/Enterprise Reports%' 
AND [Path] NOT LIKE '/Email Subscription%'
ORDER BY [Path] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:31:02.527

第一个问题的答案是：是的，它就像 CONVERT(xml, Parameter) 一样简单。假设它是格式良好的 XML，它会转换得很好

第二个问题将涉及 XML 数据类型的 nodes() 方法。阅读所有相关信息：[nodes()](http://msdn.microsoft.com/en-us/library/ms188282.aspx)。

***编辑：***

现在我可以测试了，这就是我想出的：

```
WITH cte AS (
    SELECT   CAST(parameter AS XML) AS parameter
    FROM     [dbo].[Catalog] AS c
)
SELECT  p.value('(./Name)[1]', 'nvarchar(50)')
FROM    cte AS c
CROSS APPLY c.Parameter.nodes('/Parameters/Parameter') AS T ( p ) 
```

# excel - 在 Excel 2007 中创建自删除宏

> ID：11888972
> 
> 赞同：2
> 
> 时间：2012-08-09T17:39:35.320
> 
> 标签：excel, excel-2007, vba

我正在尝试在 Excel 2007 中创建一个宏，该宏将在完成运行并关闭 Excel 时自行删除。我想这样做的原因是我要将工作簿发送给其他人，我不希望他们看到有关宏的安全警告。将生成此工作簿的多个版本，因此我不想手动运行并删除每个版本的宏。

我试过下面的代码。它运行没有错误，但实际上并没有删除宏。如果我删除“ActiveWorkbook.Close SaveChanges:=True”行，宏将被删除，但这会提示用户在 Excel 关闭时保存工作簿。有没有办法在没有用户交互的情况下做到这一点？

```
Dim ActiveComponent
Set ActiveComponent = ActiveWorkbook.VBProject.VBComponents("ModuleName")
ActiveWorkbook.VBProject.VBComponents.Remove (ActiveComponent)
ActiveWorkbook.Save
Application.Quit
ActiveWorkbook.Close SaveChanges:=True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:01:09.820

为什么不将您的宏移动到另一个工作簿并让它们在您发送的工作簿上运行？

# php - 无法使用 PHP 获取记录以插入 mysql 数据

> ID：11888981
> 
> 赞同：2
> 
> 时间：2012-08-09T17:40:15.020
> 
> 标签：php, mysql

我正在使用 PHP 来填充公司记录的数据库。我有一个公司名称和他们使用的货币类型的字段。
但是当我使用 PHP 时，如果货币是英语英镑符号 (£)，则永远不会插入记录。美元符号 ($) 或任何其他正常字符都没有问题。当我运行 sql 语句并将其直接输入 MySQL 查询浏览器时，带有井号的记录插入得很好。但是当我在 PHP 中运行完全相同的 INSERT 语句时，它就不起作用了。

```
$sql = "INSERT INTO company_test (name, currency) VALUES ('ABC Widgets', '£')";   
$rs = mysql_query($sql, $conn);
//Does not insert a record

$sql = "INSERT INTO company_test (name, currency) VALUES ('ABC Widgets', '$')";   
$rs = mysql_query($sql, $conn);
//A record inserts just fine

//My MySQL version is 5.5.11\.  PHP is version 5.3.6\.  
//The MySQL table looks like this:
TABLE company_test
FIELD | id       | INTEGER(10) | not null | auto increment
FIELD | name     | VARCHAR(45) | not null
FIELD | currency | VARCHAR(3) 
```

在 MySQL 查询浏览器中，“表选项”选项卡显示，对于这个 company_test 表，我的字符集是 utf8。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:47:05.887

检查错误：

```
$rs = mysql_query($sql, $conn) or die(mysql_error());
                               ^^^^^^^^^^^^^^^^^^^^^ 
```

永远不要假设查询成功。即使您的 sql 语法是完美的，也有太多其他原因导致无法检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:28:16.333

经过一番谷歌搜索，我终于找到了一些有用的东西。类似的人可能创建了一个转换 sql 语句字符集的 PHP 函数。
现在我的查询在插入之前看起来像这样： INSERT INTO company_test (name, currency) VALUES ('ABC Widgets', 'Â£') 注意井号之前的有趣小字符。

无论如何，这里是功能：

```
function TtoUtf8( &$string, $encType = 'ISO-8859-1' ) 
{ 
    $enc    = mb_detect_encoding( $string ); 
    $enc ? 
        $enc = $enc : 
        $enc = $encType; 
    if ( $enc == 'UTF-8' ) 
    { 
        return $string; 

        // end if $enc == UTF-8 
    } else 
    { 
        $conv = iconv( $enc, 'UTF-8//TRANSLIT', $string ); 
        $conv ? 
            $ret = &$conv : 
            $ret = &$string; 
        return $ret; 
    } 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T17:49:01.437

为什么不先将其转换为 htmlentities 或 htmlspecialchar：

```
$currency = htmlspecialchars('£');
$sql = "INSERT INTO company_test (name, currency) VALUES ('ABC Widgets', '{$currency}')"; 
```

另外，您的货币字段是什么类型的数据类型？

# variables - 你如何改变makefile变量的文件扩展名？

> ID：11888983
> 
> 赞同：11
> 
> 时间：2012-08-09T17:40:24.847
> 
> 标签：variables, makefile, file-extension

例如，我有一个包含依赖项列表的变量

```
BOARDS:=lance.mcm light.mcm sac.mcm 
```

我需要另一个名为 NET 的变量，这样

```
NET:=lance.net light.net sac.net 
```

它应该设置成当我改变 BOARDS 变量时，NET 也应该改变。例如，如果我将新的 zor.mcm 添加到 BOARDS 变量中，它应该会自动将 zor.net 添加到 NET 变量中。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-09T17:41:28.577

我发现的最佳解决方案是使用以下语法：

```
NET:=$(BOARDS:.mcm=.net) 
```

这将查看 BOARDS 并将 .mcm 更改为 .net

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T17:49:41.773

作为备选：

```
BOARDS:=lance.mcm light.mcm sac.mcm
NET:= $(addsuffix .net, $(basename $(BOARDS))) 
```

如果它们匹配模式，这将保留文件路径名中的内容

# javascript - 如何在嵌套母版页中放置 javascript

> ID：11888984
> 
> 赞同：0
> 
> 时间：2012-08-09T17:40:26.217
> 
> 标签：javascript, asp.net

我有一种情况，在具有嵌套母版页的页面上需要有一段 java 脚本。而且我真的不确定在哪里/如何添加 javascript。

我的布局如下： Master.masterpage(top master page); Client.MasterPage(继承Master.masterpage) assort.aspx(继承client.masterpage);

在 assort.aspx 中，我需要有以下可用的 javascript，因此在单击时它会弹出一个新窗口。

```
function ShowPopUpDialog(url) {
    window.open(url, 'MyPopUpWindow', 'height = 300px, width = 300px', true);
} 
```

我在哪里/如何放置 javascript。我只希望它在 assort.aspx 上处于活动状态，所以我应该只将它放在 Client.Masterpage 上，对吗？如果不是，我应该把它放在 assort.aspx 的什么地方？没有头部部分。

这是我的 Client.MasterPage：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <link href="css/valet.css" rel="stylesheet" type="text/css" />
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContactPlaceHolder_Header" runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder_Navigation" runat="Server">
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="ContentPlaceHolder_Content" runat="Server">
    <div class="InfoContainer">
        <asp:ContentPlaceHolder ID="ContentInfo" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    <div class="CRadGrid">
        <asp:ContentPlaceHolder ID="RadGridPlaceHolder" runat="server">
        </asp:ContentPlaceHolder>
    </div>
    <div class="MultiPage">
    <asp:ContentPlaceHolder ID="MultiPageContainer" runat="server">
        </asp:ContentPlaceHolder>
    </div>
</asp:Content> 
```

我的 assort.aspx：

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentInfo" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="RadGridPlaceHolder" Runat="Server">
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="MultiPageContainer" Runat="Server">
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:02:59.750

如果这个页面是一个例外，我会建议 KISS 原则，即将一个脚本标签放置在将要使用它的地方。如果您需要更多页面上的更多脚本，那么内容占位符可能更适合。

客户端主页面：

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <link href="css/valet.css" rel="stylesheet" type="text/css" />

    <asp:ContentPlaceHolder ID="ClientHead" runat="server">

    </asp:ContentPlaceHolder>
</asp:Content> 
```

分类.aspx

```
<asp:Content ID="Content5" ContentPlaceHolderID="ClientHead" Runat="Server">        
   <script>
       function ShowPopUpDialog(url) {
          window.open(url, 'MyPopUpWindow', 'height = 300px, width = 300px', true);
       }
   </script>
</asp:Content> 
```

# php - PHP - 检查 if 语句中的返回值

> ID：11888985
> 
> 赞同：1
> 
> 时间：2012-08-09T17:40:29.883
> 
> 标签：php

我见过可以从函数返回字符串或布尔值的编程实践。在这种情况下，是否建议在 if 循环中检查 empty() 和 isset()，或者像 if($returnvar) 这样的检查是否有效。

这是我正在玩的一段代码。您认为输出应该是什么？在 if 条件下检查是否正确？

谢谢，

```
<?php

function testMe()
{
 try
 {
  $returnText = 'John King Rocks';
  return $returnText;
 }
 catch (Exception $e)
 {
  return false;
 }
}

$str = testMe();
if ($str)
{
  echo $str;
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:43:38.383

这段代码应该可以工作（对于这个特定的例子`$str`），但是正如您所建议的那样，在 PHP 中检查布尔值是有风险的，并且应该谨慎进行，我建议（通常）按如下方式检查它：

```
if ($str !== false)
{
  echo $str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:43:58.417

将会发生的事情是`$str`将[类型转换为 boolean](http://www.php.net/manual/en/language.types.boolean.php)。因此，字符串将评估`false`为：

1.  空字符串
2.  字符串“0”

考虑所有其他值`true`，这可能不是您想要的行为。所以，回答你的问题：

> 你认为应该输出什么？

好吧，返回字符串与这两个条件中的任何一个都不匹配，因此该`if`语句将评估为`true`，并且`$str`将是`echo()`'d。（更不用说上面的代码永远不会产生异常）。

> if中的检查是否正确？

这取决于您正在寻找的功能。如果你想考虑所有字符串（包括“”和“0”）都是有效的，并且`echo()`只在函数返回时跳过`false`，那么你应该检查返回值是否与 相等`!== false`。否则，如果上面这两个条件都可以接受`false`，你应该没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T17:45:56.293

`if`不是一个循环。是有条件的。 `echo false`将被强制为`echo '0'`，因此`if`仅当您不想打印零时才需要进行检查。但是，`echo null`根本不会打印任何内容。更好的是返回空字符串。您应该避免混合返回类型。许多其他语言甚至不允许它。

顺便说一句，您的异常处理什么都不做.. 的内容`try`不能引发异常。吞咽异常也很糟糕，你需要`$`在`e`.

在回答您的问题时，有一句话“偏执的编程是专业的编程”。也就是说，如果您希望应用程序始终如一地工作（在这种情况下检查很好），您应该尽可能多地进行检查`if`，但了解您正在使用的方法和预期结果也很重要。`testMe`如果是假的，你想要一些其他的处理吗？或者你不想打印任何东西？

# ruby - 如何找到与 Nokogiri 的兄弟组

> ID：11888986
> 
> 赞同：0
> 
> 时间：2012-08-09T17:40:34.883
> 
> 标签：ruby, xml, nokogiri

例如我有这个 XML：

```
<root>
  <group>
    <person gender="male" name="Daniel" />
  </group>
  <group>
    <person gender="male" name="Peter" />
    <person gender="female" name="Claudia" />
  </group>
  <group>
    <person gender="female" name="Andrea" />
  </group>
</root> 
```

我只想找到有男性和女性的组。我只想找到：

```
 <group>
    <person gender="male" name="Peter" />
    <person gender="female" name="Claudia" />
  </group> 
```

因为在那个组里面有一个男性和一个女性。

我不想找到：

```
 <group>
    <person gender="female" name="Andrea" />
  </group>
  <group>
    <person gender="male" name="Daniel" />
  </group> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:05:30.143

我对 Nokogiri 并不完全熟悉，但我确实知道 xpath。如果你想选择只有男性和女性的组，你可以这样做

```
//group[person/@gender='male' and person/@gender = 'female'] 
```

它应该返回

```
<group> 
  <person gender="male" name="Peter"/>  
  <person gender="female" name="Claudia"/> 
</group> 
```

# c++ - 如何使用 OpenSSL 将 {D,E,N} RSA 密钥扩展为 {D,E,N,p,q,etc.}？

> ID：11888989
> 
> 赞同：11
> 
> 时间：2012-08-09T17:40:37.467
> 
> 标签：c++, c, cryptography, openssl, rsa

我有一个 RSA 密钥，由公共和私有因素以及模数 D 组成。（我目前正在生成并使用带有 JavaScript 库的密钥。）我想使用相同的密钥通过 OpenSSL 执行加密和解密。我可以将我的因素插入 OpenSSL RSA 密钥，一切正常，但我想让 OpenSSL 计算它使用的辅助因素（如果可用）来加速操作。

我不确定从数学上是否可以从 {D,E,N} 回到这些因素，但如果是的话，我想知道如何让 libopenssl 去做。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T18:44:35.207

从秘密*d*导出*p*和*q*的算法非常简单快速，尽管是概率性的。[在“应用密码学手册”第 8 章](http://cacr.uwaterloo.ca/hac/about/chap8.pdf)第 8.2.2 节或 Boneh 的文章[“对 RSA 密码系统的二十年攻击”](http://www.ams.org/notices/199902/boneh.pdf)第 205 页中对此进行了非常简要的解释。

 *您可以首先找到使用高级语言的算法实现（例如在 Python 中，检查[PyCrypto](https://github.com/dlitz/pycrypto/blob/master/lib/Crypto/PublicKey/_slowmath.py#L82)`rsa_construct`中的函数）。从那里，您可以通过 OpenSSL 使用其[多精度 API](http://www.openssl.org/docs/crypto/bn.html)来实现它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T05:07:30.297

```
/* crypto/rsa/rsa_aug_key.c  -*- Mode: C; c-file-style: "eay" -*- */
/* ====================================================================
 * Copyright (c) 1999 The OpenSSL Project.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1\. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer. 
 *
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in
 *    the documentation and/or other materials provided with the
 *    distribution.
 *
 * 3\. All advertising materials mentioning features or use of this
 *    software must display the following acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit. (http://www.OpenSSL.org/)"
 *
 * 4\. The names "OpenSSL Toolkit" and "OpenSSL Project" must not be used to
 *    endorse or promote products derived from this software without
 *    prior written permission. For written permission, please contact
 *    openssl-core@OpenSSL.org.
 *
 * 5\. Products derived from this software may not be called "OpenSSL"
 *    nor may "OpenSSL" appear in their names without prior written
 *    permission of the OpenSSL Project.
 *
 * 6\. Redistributions of any form whatsoever must retain the following
 *    acknowledgment:
 *    "This product includes software developed by the OpenSSL Project
 *    for use in the OpenSSL Toolkit (http://www.OpenSSL.org/)"
 *
 * THIS SOFTWARE IS PROVIDED BY THE OpenSSL PROJECT ``AS IS'' AND ANY
 * EXPRESSED OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE OpenSSL PROJECT OR
 * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
 * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT,
 * STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * ====================================================================
 */

#include <openssl/bn.h>
#include <openssl/err.h>
#include <openssl/rsa.h>

/*
 * If key has d, e and n, but not p, q, dmp1, dmq1 and iqmp, try
 * to calculate these extra factors.  Return 1 on success or 0
 * on failure.  (The key may still be useable even if this fails.)
 */
int RSA_augment_key(RSA *key)
{
    int      spotted;
    BN_CTX  *ctx;
    BIGNUM  *ktot;
    BIGNUM  *t;
    BIGNUM  *tmp;
    BIGNUM  *a;
    BIGNUM  *two;
    BIGNUM  *l00;
    BIGNUM  *cand;
    BIGNUM  *k;
    BIGNUM  *n_1;

    if (!key || !key->d || !key->e || !key->n) return 0;

    spotted = 0;

    ctx    = BN_CTX_new( );
    ktot   = BN_new( );
    t      = BN_new( );
    tmp    = BN_new( );
    a      = 0; BN_dec2bn( &a,   "2" );
    two    = 0; BN_dec2bn( &two, "2" );
    l00    = 0; BN_dec2bn( &l00, "100" );
    cand   = BN_new( );
    k      = BN_new( );
    n_1    = BN_new( ); if (!BN_sub( n_1, key->n, BN_value_one( ) )) goto fail;

/* Python-code comments from PyCrypto
// ------------------------------------------------------------------
//      # Compute factors p and q from the private exponent d.
//      # We assume that n has no more than two factors.
//      # See 8.2.2(i) in Handbook of Applied Cryptography.
//      ktot = d*e-1*/

    if (!BN_mul( tmp, key->d, key->e, ctx ))    goto fail;
    if (!BN_sub( ktot, tmp, BN_value_one( ) ))  goto fail;

/*      # The quantity d*e-1 is a multiple of phi(n), even,
//      # and can be represented as t*2^s.
//      t = ktot */

    if (!BN_copy( t, ktot ))                    goto fail;

/*      while t%2==0:
//          t=divmod(t,2)[0] */

    while (!BN_is_odd( t ))
        if (!BN_rshift1( t, t ))                goto fail;

/*      # Cycle through all multiplicative inverses in Zn.
//      # The algorithm is non-deterministic, but there is a 50% chance
//      # any candidate a leads to successful factoring.
//      # See "Digitalized Signatures and Public Key Functions as Intractable
//      # as Factorization", M. Rabin, 1979
//      spotted = 0
//      a = 2

//      while not spotted and a<100: */
    while (!spotted && BN_cmp( a, l00 ) < 0) {

/*          k = t */
        if (!BN_copy( k, t ))                   goto fail;

/*          # Cycle through all values a^{t*2^i}=a^k
//          while k<ktot: */
        while (BN_cmp( k, ktot ) < 0) {

/*              cand = pow(a,k,n) */
            if (!BN_mod_exp( cand, a, k, key->n, ctx ))         goto fail;

/*              # Check if a^k is a non-trivial root of unity (mod n)
//              if cand!=1 and cand!=(n-1) and pow(cand,2,n)==1: */
            if (BN_cmp( cand, BN_value_one( ) ) && BN_cmp( cand, n_1 )) {
                if (!BN_mod_exp( tmp, cand, two, key->n, ctx )) goto fail;
                if (BN_cmp( tmp, BN_value_one( )) == 0) {
/*                  # We have found a number such that (cand-1)(cand+1)=0 (mod n).
//                  # Either of the terms divides n.
//                  obj.p = GCD(cand+1,n)
//                  spotted = 1
//                  break */
                    key->p = BN_new( );
                    if (!BN_add( tmp, cand, BN_value_one( ) ))  goto fail;
                    if (!BN_gcd( key->p, tmp, key->n, ctx ))    goto fail;
                    spotted = 1;
                    break;
                }
            }

//              k = k*2
            if (!BN_lshift1( k, k ))          goto fail;
        }

/*          # This value was not any good... let's try another!
//          a = a+2 */
        if (!BN_add( a, a, two ))               goto fail;
    }

    if (!spotted) {
        /* Unable to compute factors P and Q from exponent D */
        goto fail;
    }

    key->q = BN_new( );
    if (!BN_div( key->q, tmp, key->n, key->p, ctx ))    goto fail;
    if (!BN_is_zero( tmp )) {
        /* Curses!  Tricked with a bogus P! */
        goto fail;
    }

    key->dmp1 = BN_new( );
    key->dmq1 = BN_new( );
    key->iqmp = BN_new( );

    if (!BN_sub( tmp, key->p, BN_value_one( ) ))            goto fail;
    if (!BN_mod( key->dmp1, key->d, tmp, ctx ))             goto fail;
    if (!BN_sub( tmp, key->q, BN_value_one( ) ))            goto fail;
    if (!BN_mod( key->dmq1, key->d, tmp, ctx ))             goto fail;
    if (!BN_mod_inverse( key->iqmp, key->q, key->p, ctx ))  goto fail;

    if (RSA_check_key( key ) == 1)                          goto cleanup;

  fail:
    BN_free( key->p );     key->p = 0;
    BN_free( key->q );     key->q = 0;
    BN_free( key->dmp1 );  key->dmp1 = 0;
    BN_free( key->dmq1 );  key->dmq1 = 0;
    BN_free( key->iqmp );  key->iqmp = 0;
    spotted = 0;

  cleanup:
    BN_free( k );
    BN_free( cand );

    BN_free( n_1 );
    BN_free( l00 );
    BN_free( two );

    BN_free( a );

    BN_free( tmp );
    BN_free( t );
    BN_free( ktot );

    BN_CTX_free( ctx );

    return spotted;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T18:17:56.167

Hard problem. To find *p* and *q* from *n*, you need to factor *n*, which is hard. Given that you know both `d` and `e`, you could instead look for a large factor of *de-1*, which would be *phi(n)*. Once you have that you can take advantage of the fact that, *n* - *phi(n)* = *p* + *q* - *1* for RSA keys, and thus find *p* and *q*

So the process is roughly:

*   Try to guess *x* in *de-1* = *x phi(n)*. Sine *e* = 65537 for RSA, this shouldn't be too bad -- x has to be somewhere in the range 50000..200000 or so, so it should only require 100K or so trial divisions.

*   Now find *y* = (*p* + *q*)/2 = (*n* + *phi(n)* + *1*)/2 and *z* = *sqrt(yy - n)*, which gives you *p* = *y+z* and *q* = *y-z*

Relatively straight-forward, but there's no built-in way of doing this with openssl or any other library I'm aware of.*

# jquery - 使用类型数组输入从 serializeArray 获取值

> ID：11888990
> 
> 赞同：0
> 
> 时间：2012-08-09T17:40:38.603
> 
> 标签：jquery, serializearray

我有这样的输入：

```
<input name="val[test]" value="..."> 
```

我正在尝试使用 jQuery 的 serializeArray 获取所有值，但它不起作用。

我在做：

```
var test = $('#myForm').serializeArray();
debug(test.val[test]); 
```

它不工作，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T20:16:58.763

改用这个：

```
console.log( test[ index ] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T17:44:15.880

```
var test = $('#myForm').serializeArray();
$.each(test, function(index, val) {
  console.log( val.test );
}); 
```

### 笔记

`serializeArray()`给出如下输出：

```
[
 {
   test: 1
 },
 {
   test: 2
 },
 ...
] 
```

# javascript - 确定元素的宽度和高度：真实和正常

> ID：11888992
> 
> 赞同：0
> 
> 时间：2012-08-09T17:40:43.040
> 
> 标签：javascript, jquery

我想知道使用 Jquery/Javascript（或任何其他可能更准确的方法）计算元素宽度和高度的最佳方法是什么。目前，我正在使用这个 Jquery 方法：

Jquery：见我的例子：http: [//jsfiddle.net/AwkF5/1/](http://jsfiddle.net/AwkF5/1/)

```
var w = $("#wrapper"); //The element dimensions to calculate
$("#displayW").text( "outerWidth:" + w.outerWidth()+ " , outerWidth(true):" + w.outerWidth(true) ); // Displaying the width in the #displayW div
$("#displayH").text( "outerHeight:" + w.outerHeight()+ " , outerHeight(true):" + w.outerHeight(true) ); // Displaying the height in the #displayH div 
```

现在这是计算元素的宽度/高度（包括内容、填充和边框）和真正的宽度/高度（（包括内容、填充、边框和边距）的最准确方法吗？

什么是普通的javascript方法？

我问是因为我想为 div 制作背景图像，并且我想知道它应该是什么大小......请注意，不同浏览器之间的宽度和高度会有所不同......显然

谢谢你

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:47:30.623

这应该适合你：

```
var realWidth = $("#yourBlockId").outerWidth();
realWidth += parseInt($("#yourBlockId").css("margin-left"), 10);
realWidth += parseInt($("#yourBlockId").css("margin-right"), 10); 
```

高度的方法相同。

# c# - C# 中的文件分块性能

> ID：11888997
> 
> 赞同：2
> 
> 时间：2012-08-09T17:41:02.723
> 
> 标签：c#, file, chunking

我正在尝试授权用户上传大文件。在我上传文件之前，我想把它分块。每个块都需要是一个 C# 对象。原因是为了记录目的。说来话长，但我需要创建代表每个文件块的实际 C# 对象。无论如何，我正在尝试以下方法：

```
public static List<FileChunk> GetAllForFile(byte[] fileBytes)
{
  List<FileChunk> chunks = new List<FileChunk>();
  if (fileBytes.Length > 0)
  {
    FileChunk chunk = new FileChunk();
    for (int i = 0; i < (fileBytes.Length / 512); i++)
    {
      chunk.Number = (i + 1);
      chunk.Offset = (i * 512);
      chunk.Bytes = fileBytes.Skip(chunk.Offset).Take(512).ToArray();

      chunks.Add(chunk);
      chunk = new FileChunk();
    }
  }
  return chunks;
} 
```

不幸的是，这种方法似乎非常缓慢。有谁知道如何在为每个块创建对象的同时提高性能？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T17:51:58.263

我怀疑这会有点伤害：

```
chunk.Bytes = fileBytes.Skip(chunk.Offset).Take(512).ToArray(); 
```

试试这个：

```
byte buffer = new byte[512];
Buffer.BlockCopy(fileBytes, chunk.Offset, buffer, 0, 512);
chunk.Bytes = buffer; 
```

（代码未测试）

这段代码可能很慢的原因是因为 Skip 没有为数组做任何特殊的事情（尽管它可以）。这意味着每次通过循环都会迭代数组中的前 512*n 个项目，这会导致 O(n^2) 性能，而您应该只看到 O(n)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T17:52:08.740

尝试这样的事情（未经测试的代码）：

```
public static List<FileChunk> GetAllForFile(string fileName, FileMode.Open)
{
  var chunks = new List<FileChunk>();
  using (FileStream stream = new FileStream(fileName))
  {
      int i = 0;
      while (stream.Position <= stream.Length)
      {
          var chunk = new FileChunk();
          chunk.Number = (i);
          chunk.Offset = (i * 512);
          Stream.Read(chunk.Bytes, 0, 512);
          chunks.Add(chunk);
          i++;
      }
  }
  return chunks;
} 
```

上面的代码跳过了你的过程中的几个步骤，更喜欢直接从文件中读取字节。

请注意，如果文件不是 512 的偶数倍，则最后一个块将包含少于 512 个字节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:12:01.870

与罗伯特哈维的回答相同，但使用 BinaryReader，这样我就不需要指定偏移量。如果您在另一端使用 BinaryWriter 重新组装文件，则不需要 FileChunk 的 Offset 成员。

```
public static List<FileChunk> GetAllForFile(string fileName) {
    var chunks = new List<FileChunk>();
    using (FileStream stream = new FileStream(fileName)) {
        BinaryReader reader = new BinaryReader(stream);
        int i = 0;
        bool eof = false;
        while (!eof) {
            var chunk = new FileChunk();
            chunk.Number = i;
            chunk.Offset = (i * 512);
            chunk.Bytes = reader.ReadBytes(512);
            chunks.Add(chunk);
            i++;
            if (chunk.Bytes.Length < 512) { eof = true; }
        }
    }
    return chunks;
} 
```

你有没有想过你要做什么来弥补数据包丢失和数据损坏？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:31:33.840

既然您提到加载需要很长时间，那么我将使用异步文件读取来加快加载过程。硬盘是计算机中最慢的组件。谷歌在谷歌浏览器上进行异步读写以缩短加载时间。在以前的工作中，我不得不在 C# 中做这样的事情。

这个想法是在文件的不同部分产生几个异步请求。然后，当请求进来时，获取字节数组并创建一次占用 512 个字节的 FileChunk 对象。这样做有几个好处：

1.  如果您在单独的线程中运行此程序，那么您将不会让整个程序等待加载您拥有的大文件。
2.  您可以处理字节数组，创建 FileChunk 对象，而硬盘仍在尝试填充文件其他部分的读取请求。
3.  如果您限制可以拥有的待处理读取请求的数量，您将节省 RAM 空间。这样可以减少硬盘的页面错误并更有效地使用 RAM 和 CPU 缓存，从而进一步加快处理速度。

您可能希望在 FileStream 类中使用以下方法。

```
[HostProtectionAttribute(SecurityAction.LinkDemand, ExternalThreading = true)]
public virtual IAsyncResult BeginRead(
    byte[] buffer,
    int offset,
    int count,
    AsyncCallback callback,
    Object state
)

public virtual int EndRead(
    IAsyncResult asyncResult
) 
```

这也是你将在 asyncResult 中得到的：

```
// Extract the FileStream (state) out of the IAsyncResult object
FileStream fs = (FileStream) ar.AsyncState;

// Get the result
Int32 bytesRead = fs.EndRead(ar); 
```

这里有一些参考资料供您阅读。

这是使用[异步文件 I/O 模型](http://www.codeproject.com/Articles/37244/Understanding-the-Asynchronous-Programming-Model "我会考虑使用 APM 的方法回调集合技术")的代码示例。

这是[异步文件 I/O](http://msdn.microsoft.com/en-us/library/kztecsys.aspx "这包含您需要使用的所有方法和流类")的 MS 文档参考。