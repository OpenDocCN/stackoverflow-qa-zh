# StackOverflow 问答 10725000-10725999

# vba - HTA 如何获取当前用户的用户名？

> ID：10725000
> 
> 赞同：2
> 
> 时间：2012-05-23T17:32:14.007
> 
> 标签：vba, vbscript, hta

我想获取当前用户的用户名，然后在我的应用程序名称中创建一个链接

链接看起来像

```
http://localhost/?id=username 
```

我试过

```
Dim objNetworkSet 
objNetwork = CreateObject("WScript.Network") 
```

但它在 HTA 应用程序中不受支持

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:59:13.347

正如它的前缀所示，“objNetwork”是一个对象。所以使用“Set”来分配给变量。

```
 Dim objNetwork : Set objNetwork = CreateObject("WScript.Network")
   MsgBox objNetwork.UserName 
```

假设您想在运行时/动态设置链接：

```
<html>
 <head>
  <title>SetLink HTA</title>
  <HTA:APPLICATION
    APPLICATIONNAME="SetLink HTA"
  >
  <SCRIPT Language="VBScript">
   Sub SetLink()
     Dim oWNet : Set oWNet = CreateObject("WScript.Network")
     MsgBox oWNet.UserName
     LinkToBeDone.href = "http://gent/~" & oWNet.UserName
   End Sub
  </SCRIPT>
 </head>
  <body onLoad="SetLink">
   <a id="LinkToBeDone" href="!somewhere!">To your home at a real computer</a>
 </body>
</html> 
```

PS[在这里](https://stackoverflow.com/questions/10727047/error-reported-on-a-blank-line)寻找同样的错误。对于 VBScript 的这一特性来说，这似乎是糟糕的一天。

# asp.net-mvc - 让多个 ASP.NET MVC3 项目共享一个公共布局

> ID：10725001
> 
> 赞同：2
> 
> 时间：2012-05-23T17:32:18.943
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我对 ASP.NET、C# 和 MVC 框架的世界完全陌生。在我工作的公司，我们终于从 ASP Classic 环境升级到可以在 ASP.NET 中开发的环境。目前有两个开发人员在这个 Intranet 站点上工作。不幸的是，至少现在使用任何类型的版本/源代码控制都是不可能的。

我们两个支持许多不同的部门，每个部门都有自己的网页和在线表格。所有这些部门共享一个共同的布局、css 和一些 javascript。

我的思考过程是将每个部门设置为一个单独的 MVC 项目，并尝试以这种方式将它们分开。在这样做时，我如何设置将在每个项目之间共享的布局、css 和 javascipt 组件？我仍然希望能够对颜色等进行全局更改，而无需修改 50 个不同项目中的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:42:25.907

您需要的是 MVC 区域：它们“允许您将大型项目组织成多个较小的部分，以管理大型 Web 应用程序的复杂性。” ([一](http://www.asp.net/whitepapers/what-is-new-in-aspnet-mvc#_TOC3_2))

查看此[演练](http://msdn.microsoft.com/en-us/library/ee307987%28VS.100%29.aspx)以熟悉区域和相关概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:57:34.547

我的 Intranet 模型（适用于我，您的里程可能会有所不同）是创建一个通用布局并将其放在共享文件夹中。此布局看起来像一个母版页

对于我们支持的每个应用程序，我们都会创建一个母版页，通常称为 global.master，其中包含一行 `。然后我们创建另一个使用 global.master 作为母版页的母版页，我们在其中重新声明内容部分并添加任何 css、javscript。布局等特定于相关应用程序。

这种使用服务器端包含的方法允许我通过更改父文件对整个站点进行全局更改，同时将各个应用程序本身保留在它们自己的应用程序池中。

服务器端包含是老派，但对我们来说效果很好。

# java - 比较 Java 子类

> ID：10725007
> 
> 赞同：2
> 
> 时间：2012-05-23T17:32:27.647
> 
> 标签：java

我的应用程序可以比较同一抽象父类的任何两个子类的实例。我希望它们进行如下比较：

1.  如果它们是不同的子类，则应由父类进行比较。
2.  如果它们是相同的子类，则子类应该进行比较。

这些类将通过 TreeMap 进行比较，因此我可以选择使用 Comparator 或实现 Comparable（或两者兼而有之？）。

我可以想到几种方法来做到这一点，但它们都有些混乱且容易出错。有没有优雅的解决方案？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:47:53.947

你可以试试

```
// Parent:
@Override
public final int compareTo(Parent other)
{
  if (getClass() == other.getClasss()) {
    // same type -> pass it to subclass implementation
    return this.subCompare(other)
  }

  // different type -> do the comparison here based on Parent's logic
  // ...
}

protected int subCompare(Parent other)
{
  // this should not be called directly
  return 0; // could throw an exception here too
}

// Derived1:
@Override
protected int subCompare(Parent other)
{
  // this method is only called from Parent
  Derived1 other1 = (Derived1) other;
  // do the comparison based on Derived1's logic
} 
```

对于其他派生类也是如此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:48:46.470

这不是您问题的直接答案，但是：
我相信您所做的事情容易出错且有问题。
方法强加的相等性测试`compareTo`通常应该返回与方法相同的结果`equals`。即`compareTo`方法强加的排序*应该*与 一致`equals`。
如果违反此合同，您可能会遇到排序集合（您正在使用）的问题。
为什么我这样说：
在某些情况下您希望将比较委托给父类这一事实向我表明您在子类中添加了一个值组件。
如果你这样做了，那么就没有办法保存`equals`合同，您可能会遇到排序容器的问题（见上文）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:49:57.763

无论哪种方式，它都容易出错。你可以在你的子类中做这样的事情：

类子类1 ... {

```
public boolean equals(Object o) {
  if(o instanceof Subclass1) {
    return super.equals(o);
  }

  ... compare subclasses
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T17:57:53.310

类层次结构是否应该可扩展？
=> 如果它不可扩展（或很少会扩展），您可以实现一个 Comperator 以便所有比较代码都在一个地方。

订购对象的方法不止一种吗？=> 如果是这样，那么您将不得不为每个订单使用一个比较器。

`compareTo(other)`（或`compare(o1, o2)`）从三种情况中调用：

1.  `this instanceof other.class`（即`o1 instanceof o2.class`）：
    *   this.class 应该比较`this`，`o2`因为它比 other.class 有更多的信息；
2.  `other instanceof this.class`（即`o2 instanceof o1.class`）：
    *   other.class 应该比较`other`并且`this`this.class.compareTo 应该翻转结果并返回它。
3.  存在第一个共同祖先 P 使得`this instanceof P`&& `other instanceof P`：
    *   P 应该比较`this`and `other`: 递归调用 super.compareTo(other) 并返回结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:33:00.333

这就是我现在的做法。我认为这将变得非常优雅：

```
public abstract class ParentClass implements Comparable<ParentClass> {
    // compareTo(ParentClass) is implicitly abstract
}

public class SubClass1 extends ParentClass /* Comparable<> is implicitly implemented */ {
    @Override
    public int compareTo(ParentClass another) {
        SubClass1 subAnother = (SubClass1) another;
        return /* result of sub-class comparison */;
    }
}

public class MyComparator implements Comparator<ParentClass> {
    @Override
    public int compare(ParentClass lhs, ParentClass rhs) {

        // Are lhs and rhs instances of the same sub-class?
        if(!lhs.getClass().equals(rhs.getClass()))
            // They are different. Use parent class comparison.
            return /* result of parent class comparison */;

        // They are the same. Use sub-class comparison.
        return lhs.compareTo(rhs);
    }
} 
```

然后我只是将一个实例传递`MyComparator`给`TreeMap`. 它处理不同子类的比较，或者如果它们相同，则将比较传递给子类。

我不喜欢的是它`SubClass1.compareTo()`会抛出一个`ClassCastException`if`another`是另一个子类的实例。但是，只要我确保子类仅按`MyComparator`.

# php - PHP 会话变量未设置

> ID：10725009
> 
> 赞同：9
> 
> 时间：2012-05-23T17:32:30.190
> 
> 标签：php, session

在我们网站的一页中，我有以下代码：

```
$_SESSION['returnURL'] = "/store/checkout/onepage"; 
```

再往下，这个按钮控制：

```
<button type="button" title="Register Today" class="button" onclick="window.location = '/register/';" id="BecomeMember"><span><span>Become a Member Today</span></span></button> 
```

现在，在注册模板中，我有以下代码：

```
<input type="hidden" name="returnURL" id="returnURL" value="<?php if(isset($_SESSION['returnURL'])) { echo $_SESSION['returnURL']; } else { echo '/'; } ?>" /> 
```

但它仅将值显示为 /。

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T17:40:09.557

第一个.php

```
<?php
session_start();
$_SESSION['returnURL'] = "/store/checkout/onepage";
echo '<a href="second.php">Pass session to another page</a>';
?> 
```

第二个.php

```
<?php
session_start();
echo 'returnURL = ' . $_SESSION['returnURL'];
?> 
```

所以你需要写`session_start()`在你的两个文件中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T17:41:15.633

要解决此问题，您需要：

1) 确保`session_start()`在脚本开头调用它，然后再调用它。

2）没有什么是不安`$_SESSION`或`$_SESSION['returnURL']`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:16:22.403

我能够让它像这样工作

```
session_start();
$returnurl = "/store/checkout/onepage";
$_SESSION['returnURL'] = $returnurl; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T18:04:25.397

我最终做的是向页面发送一个 post 变量。ExpressionEngine 和 Magento 之间的会话差异使得使用会话变量和 cookie 变得令人望而却步。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-30T22:37:37.393

我只是资助我遇到了同样的问题，会话在 Firefox 中运行良好但不是 chrome，我创建了一个测试脚本，它只会创建一个会话，然后打印出 session_id() 以查看它是否正在创建，运行此脚本后，我注意到 session_id() 会在每次页面加载时发生变化，并且 php 会发出有关未设置日期/时间的警告。然后我添加了

date_default_timezone_set('America/Los_Angeles');

在脚本的开头，这阻止了在每次页面加载时生成新的 session_id() 并解决了问题。（可能值得注意的是，我的问题似乎只出现在我的子域而不是顶级域上）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-22T19:50:27.450

我正在使用的服务器已满，因此会话无法正常工作，因为没有空间来存储值。确保您的服务器有空间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-21T12:11:01.897

```
 <!--First Line like as-->
 <?php session_start();?>
 <!-- Now, your php or html codes-->
<html>
  <head>
   .....
   ..... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-20T08:52:35.143

session_start() 函数必须是文档中的第一件事。在任何 HTML 标记之前。

```
session_start(); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-02-22T13:46:25.217

我见过许多 CMS 和框架以不同的方式处理常规会话。如果上述基本的两行代码不起作用（因为它会干扰当前的软件），您仍然可以将 cookie 用于相同的功能。请记住，关闭浏览器时不会删除 cookie，因此您需要明确告诉它何时释放变量（使用 unset）。

```
$_COOKIE["something"] = 'value';
echo $_COOKIE["something"];
unset($_COOKIE["something"]); 
```

# java - 正则表达式匹配，如果模式在句首，句尾被空格包围

> ID：10725012
> 
> 赞同：0
> 
> 时间：2012-05-23T17:32:33.493
> 
> 标签：java, regex

我在 java 中使用以下正则表达式来尝试查找模式是在字符串的开头、字符串的结尾还是被空格包围但它不起作用。

如果我这样做，`\\Wmypattern\\W`它会发现被空白包围的图案。

但如果我这样做`[^\\W]mypattern[\\W$]`，它不会。如果模式存在于字符串的开头、字符串的结尾或从字符串的开头或结尾，则后一个正则表达式是我尝试让它匹配。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:36:44.807

你想用

```
(^|\\W)mypattern(\\W|$) 
```

这将匹配模式开头的非单词字符*或*字符串的开头，以及模式末尾的非单词字符或字符串的结尾*。*

您当前的模式匹配一​​个不是非单词字符 ( `[^\\W]`) 的单个字符，后跟您的模式，后跟非单词字符或文字字符`$`( `[\\W$]`)

[这个页面](http://www.regular-expressions.info/reference.html)是正则表达式语法的一个很好的参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:34:09.243

你必须把`^`和放在`$`外面`[]`。你现在正在逃避它。

通过指定`[\\W]mypattern[\\W]`它意味着被非单词字符包围。我想你想使用`[\\s]`, 一个空格字符。有关更多信息，请参阅[正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)。

如果要在开头或结尾匹配，则必须执行以下操作：

```
^mypattern: beginning of the string
mypattern$: end of the string 
```

# macos - 从下载到在 OS X 上执行的最少步骤？

> ID：10725017
> 
> 赞同：2
> 
> 时间：2012-05-23T17:32:51.267
> 
> 标签：macos

我想在下载后以最少的用户交互在 OS X 上运行已编译的程序。

在Windows上，您可以下载一个.exe，然后直接选择“运行”，即1单击。

我对 OS X 不是很熟悉，并且不确定我是否需要 PKG、DMG，或者是否有某种方法可以执行相当于“单次拍摄”.exe 的操作。

我不关心应用程序是否正确安装等。实际上，如果它可以在执行后自行删除，那将是可取的，但这不是必需的。如果用户需要再次运行它，他们可以重复下载和运行过程。

我了解运行从 Internet 下载的程序很危险。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:25:21.933

您可以使用所谓的“支持 Internet 的”磁盘映像：然后 Safari 会将内容复制到下载文件夹并丢弃该映像，而无需用户摆弄安装和卸载它。`hdiutil internet-enable -yes YourDiskImage.dmg`

但我可能会使用一个简单的 zip 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:57:41.007

分发不需要安装程序的应用程序的典型方法是 DMG。但是，我也看到了将 .app 文件夹直接放在 zip 文件中的示例。如果您下载这样一个仅包含 .app 的 zip 文件，Safari 似乎会自动提取 zip 文件并将其替换为 .app。然后，用户只需从 Finder 或直接从“下载”对话框运行应用程序，并确认有关运行下载代码的问题。

其他浏览器似乎不会自动进行提取，但即便如此，它也非常简单，因为提取 zip 文件就像运行应用程序本身一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T02:02:01.520

这可能不是你想要的，但是……我不能 100% 确定，所以如果它*是*你想要的：

“single-shot .exe”的等价物是单次可执行文件。您实际上不必拥有 .app 包；您可以从 Finder（或从 Dock，或“打开”命令或其他）启动命令行可执行文件，它将通过在终端中打开一个窗口来运行。输出将如下所示：

```
Last login: Wed May 23 18:52:23 on ttys000
MyMac:~me$ /Users/me/Downloads/myexecutable ; exit;
logout
[Process completed] 
```

任何在 Windows 中构建和运行命令行可执行文件的人都应该熟悉这一点。

如果您使用 Xcode，只需创建一个“命令行工具”而不是“Cocoa 应用程序”。如果您不使用 Xcode，只需像在 Linux 上一样编译即可。

如果您确实需要创建 GUI 窗口、与菜单栏交互、发送和接收 Apple 事件或类似的东西，这不是正确的答案。但是，如果您正在为自己或其他精通技术的用户寻找快速而肮脏的东西，它可能是。

# javascript - 20thingsi用HTML5学会了双面翻页

> ID：10725018
> 
> 赞同：0
> 
> 时间：2012-05-23T17:32:53.537
> 
> 标签：javascript, html, css, canvas

[我正在尝试开发类似http://www.20thingsilearned.com/en-US](http://www.20thingsilearned.com/en-US)的翻页功能。我在 html5rocks [http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/](http://www.html5rocks.com/en/tutorials/casestudies/20things_pageflip/)上找到了案例研究。

很多人已经在这个网站上问过，如何使用左侧页面。不幸的是，似乎没有人有一个方便的答案。

所以我的问题是：必须以什么方式调整代码才能使用左页？

提前谢谢了。

艾米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:16:29.577

当有很多这些插件可用时，为什么要开发。当我即将做同样的事情时，我遇到的第一个是[TurnJS](http://www.turnjs.com/#home)，它也有左翻页功能。你可以查看它的来源。

# powershell - 使用 Power Shell 在 Word 文档中插入水平线

> ID：10725021
> 
> 赞同：1
> 
> 时间：2012-05-23T17:32:57.690
> 
> 标签：powershell, scripting, ms-word

有没有办法在 Power Shell 生成的 MS Word 文档中插入一条水平线？如果是这样，执行此操作所需的代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:59:59.707

```
$Document = "c:\temp\tralala.doc" #Must exist

$Word = New-Object -Com Word.Application
$Word.Visible = $true
$ExistingDoc = $Word.Documents.Open($Document)
$ExistingDoc.Shapes.AddLine(0,0,1000,1000)
$ExistingDoc.Save()
$Word.Quit() 
```

`WordDocument.Shapes.AddLine(BeginX, BeginY, EndX, EndY, Anchor)`是绘制线条的调用，其中 BeginX、BeginY 是线条起点相对于锚点的位置（以磅为单位）。EndX、EndY 是线的终点相对于锚点的位置（以磅为单位）。如果省略了锚点，则该行相对于页面的顶部和左侧边缘定位。

# c# - 从 ASP.NET 到 jsp 的 HTTP 发布

> ID：10725024
> 
> 赞同：0
> 
> 时间：2012-05-23T17:33:15.963
> 
> 标签：c#, jsp, httpwebrequest, http-post

我正在尝试从 ASP.NET 和 JSP 执行 HTTP POST，但它不工作。

我一直在阅读有关如何在 C# 中执行 HTTP POST 的文章，并且遇到了代码片段，例如我在下面使用 HttpWebRequest 编写的示例：

```
Stream stream = null;
byte[] bytes = Encoding.ASCII.GetBytes(RendercXMLForPosting(cXMLContent));
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(ConfigurationManager.AppSettings["Address"]);

webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.Method = "POST";
webRequest.ContentLength = bytes.Length;
webRequest.CookieContainer = new CookieContainer();
webRequest.CookieContainer.Add(new Cookie("BuyerCoookie", punchOutSession.BuyerCookieID, "/", ConfigurationManager.AppSettings["Domain"]));

try
{
    stream = webRequest.GetRequestStream();
    stream.Write(bytes, 0, bytes.Length);
}
catch (Exception)
{
    throw;
}
finally
{
    if (stream != null)
        stream.Close();
} 
```

当我尝试这个时，没有抛出错误，但第 3 方站点无法识别 POST，第 3 方站点是 JSP 站点。

这是从 ASP.NET 发布到 JSP 站点的错误方式吗？有什么我想念的吗？提前致谢

**编辑！！！** 帖子完成后，我需要将用户重定向到 POSTing 页面，有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:41:12.583

尝试刷新请求流，并从请求中获取响应，即：

```
stream = webRequest.GetRequestStream();
stream.Write(bytes, 0, bytes.Length);
stream.Flush
var rsp = webRequest.GetResponse();
using(var sr = new StreamReader(rsp.GetResponseStream())
    var result = sr.ReadToEnd(); // you might want to see what this is to debug 
```

# css - Sass 指令 mixin、include、= 和 +

> ID：10725027
> 
> 赞同：0
> 
> 时间：2012-05-23T17:33:25.800
> 
> 标签：css, stylesheet, sass

当我进行我正在从事的项目并注意到`@mixin`并分别`@include`被替换为`=`和时，我一直在使用 Sass `+`。我似乎找不到关于这些符号作为指令的任何信息，sass-lang.com 只提到了 @ 前缀指令。

看到这些提出了一些我似乎无法在这里、在谷歌或[http://www.sass-lang.com](http://www.sass-lang.com)上找到答案的问题。

1.  `=`使用和`+`超过它们更长的等效项是一种好习惯吗？
2.  使用它们和 @ 指令之间有什么区别吗？
3.  是否还有更多的指令被替换为类似的符号`@extend`？
4.  这些是否适用于 sass 和 scss / 即使可以，哪种风格在哪种 sass 风格中更常见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:52:55.317

这是 .sass 文件的旧语法（Pre SASS3）

请参阅“混合”下的此处：http: [//sass-lang.com/docs/yardoc/file.SCSS_FOR_SASS_USERS.html](http://sass-lang.com/docs/yardoc/file.SCSS_FOR_SASS_USERS.html)

展望未来，您应该使用@mixin 和@include，除非您有理由继续使用旧格式。

# macros - 根据滚动条的大小查找数据集的大小

> ID：10725029
> 
> 赞同：0
> 
> 时间：2012-05-23T17:33:27.783
> 
> 标签：macros, size, scrollbar, autohotkey

因此，这是一个与语言无关的问题，我真的不知道使用哪种标签对其进行排序....

本质上，我有一个自动填充到 flex 应用程序的程序。flex 应用程序基本上是一个框架，其中包含在主要内容区域中加载的选项。您可以点击的数量取决于多种因素，根据这些因素，范围可以从 1 到 13000。

我正在使用 AHK 编写一个宏来对所有这些项目执行操作。但在不知道列表中项目的确切数量的情况下，我无能为力。更糟糕的是，我完全无法在其他任何地方找到任何关于此的文档。

下面的例子：http: [//imgur.com/v8u0h](http://imgur.com/v8u0h)

我将在宏下归档这个文件，如果有人可以帮助我处理其他标签，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:40:09.313

我当然不会根据滚动条的大小进行计算。如果没有滚动条怎么办？很可能只有少数项目没有滚动条。

如果可以通过编程确定滚动条的大小，为什么不能通过编程确定网格中有多少行？

# haskell - Parsec 的类型错误

> ID：10725031
> 
> 赞同：2
> 
> 时间：2012-05-23T17:33:35.520
> 
> 标签：haskell, parsec

我正在使用 Parsec 3.1.2 和 GHC 7.4.1 来尝试为有点毛茸茸的数据文件格式编写解析器。我认为这是一个非常微不足道的案例，但我遇到了类型错误。我正在尝试遵循 Real World Haskell 中的应用函子示例。

```
import Text.ParserCombinators.Parsec hiding (many, optional, (<|>))
import Text.ParserCombinators.Parsec.Char
import Text.Parsec.String
import Control.Applicative
p_int = many char ' ' *> many1 digit <* many char ' ' 
```

现在，最初我收到以下类型错误：

```
Couldn't match expected type `[Char]'
            with actual type `Text.Parsec.Prim.ParsecT s0 u0 m0 [a0]'
In the return type of a call of `many1'
In the second argument of `(*>)', namely `many1 digit'
In the first argument of `(<*)', namely
  `many char ' ' *> many1 digit' 
```

基于[Trivial parsec example 产生类型错误](https://stackoverflow.com/questions/6723208/trivial-parsec-example-produces-a-type-error)我尝试添加`NoMonomorphismRestriction`语言 pragma，但这没有帮助。

我承认，我发现 Parsec 的学习曲线相当陡峭，尽管我有一点 Haskell 经验。Real World Haskell 书中的示例基于 Parsec 2 并没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:38:41.327

您正在编写此代码：

```
many char ' ' 
```

这会将 2 个参数传递给`many`函数：`char`和`' '`. 你想要做的是将结果传递`char ' '`给`many`函数，它是这样完成的：

```
many (char ' ') 
```

# java - 关于 If Else 的最小使用

> ID：10725033
> 
> 赞同：0
> 
> 时间：2012-05-23T17:33:41.203
> 
> 标签：java

> **可能重复：**
> [过度使用 If else 语句](https://stackoverflow.com/questions/10724506/excessive-use-of-if-else-staements)

我有下面一段过度使用 if else 语句的代码......

```
 if (cardType == AARP_CARD_TYPE) {
  userResponse = messageBox.showMessage("CandidateAARPCardAttachCardToExistingTransaction",
      null, IMessageBox.YESNO); // MSG:31.59
  transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
      WalgreensRewardsConstants.ATTACH_CANDIDATE_AARP_CARD);
} else if ((cardType == PSC_CARD_TYPE) && ((!PosHelper.isRunningAsService()))) {
  userResponse = messageBox.showMessage("PendingPSCCardAttachCardToExistingTransaction", null,
      IMessageBox.YESNO); // MSG:31.60
  transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
      WalgreensRewardsConstants.ATTACH_PENDING_PSC_CARD);

} else if ((cardType == DR_CARD_TYPE) && ((!PosHelper.isRunningAsService()))) {
  userResponse = messageBox.showMessage("PendingDRCardAttachCardToExistingTransaction", null,
      IMessageBox.YESNO); // MSG:31.63
  transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
      WalgreensRewardsConstants.ATTACH_PENDING_DR_CARD);

} else if ((cardType == WAG_LOYALTY_CARD_TYPE)){
            transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
              WalgreensRewardsConstants.ATTACH_NOT_ON_FILE);

        if((!PosHelper.isRunningAsService())) {
  userResponse = messageBox.showMessage("CardNotOnFileToAttach", null, IMessageBox.YESNO); // MSG:31.32
  // BUC
  // 1.22.1
}

} else { // If the device is neither of these, POS displays Message 1
  // Button, MSG 31.14\. [BUC
  // 1.23.2]
  displayMessage("InvalidLoyaltyCard");
  transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
      NOT_VALID_LOYALTY_CARD);
  userResponse = -1;
} 
```

我想删除过度使用 if else 语句，所以我在下面的表格中做了一点改动

```
byte cardType ;

    switch (cardType) {
    case  AARP_CARD_TYPE:
         userResponse = messageBox.showMessage("CandidateAARPCardAttachCardToExistingTransaction",
                  null, IMessageBox.YESNO); // MSG:31.59
              transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
                  WalgreensRewardsConstants.ATTACH_CANDIDATE_AARP_CARD);
                    // blah
        break;

    case PSC_CARD_TYPE:
        if ((!PosHelper.isRunningAsService())
                {

             userResponse = messageBox.showMessage("PendingPSCCardAttachCardToExistingTransaction", null,
                      IMessageBox.YESNO); // MSG:31.60
                  transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
                      WalgreensRewardsConstants.ATTACH_PENDING_PSC_CARD);
                }   
        // blah
        break;

        case  DR_CARD_TYPE :                
            if ((!PosHelper.isRunningAsService())
                    {                   
                userResponse = messageBox.showMessage("PendingDRCardAttachCardToExistingTransaction", null,
                          IMessageBox.YESNO); // MSG:31.63
                      transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
                          WalgreensRewardsConstants.ATTACH_PENDING_DR_CARD);
            // blah
            break;

                    case   WAG_LOYALTY_CARD_TYPE :

                        transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
                                  WalgreensRewardsConstants.ATTACH_NOT_ON_FILE);
                        if((!PosHelper.isRunningAsService())) {
                              userResponse = messageBox.showMessage("CardNotOnFileToAttach", null, IMessageBox.YESNO); // MSG:31.32
                              // BUC
                              // 1.22.1
                            }
                        // blah
                        break;                  

    // ...

    default:
         displayMessage("InvalidLoyaltyCard");
          transaction.setValue(ITransactionHashtableWag.LOYALTY_MESSAGE_DISPLAYED,
              NOT_VALID_LOYALTY_CARD);
          userResponse = -1;
        break;
    } 
```

请指教是否正确..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:46:46.143

而不是 if else 语句或 switch case，我更喜欢使用键到委托的映射。您可以创建一个包含所有代表的哈希图，然后调用正确的代表。请参阅[有关委派的 StackOverflow 问题](https://stackoverflow.com/questions/44912/java-delegates)。

这会给你一个干净的代码

`PointersToMethods.get(key).call();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:36:03.763

它有效吗？你修改它的方式肯定看起来更干净

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T17:36:36.673

两种方法不等价。在第一种情况下，`if (cardType == PSC_CARD_TYPE && PosHelper.isRunningAsService())`代码转到默认的 else 子句，而在第二种情况下，它什么也不做 ( `break;`)。

ps：您是否没有要运行的单元测试以查看它是否按预期工作？

# ipad - 正式将 iOS 降级到以前的版本

> ID：10725034
> 
> 赞同：2
> 
> 时间：2012-05-23T17:33:44.607
> 
> 标签：ipad, ios5, xcode4.2, downgrade

我有 iPad 3、iOS 5.1 并且我安装了最新的 Lion 版本和 X-code。但是当我连接设备时，X-code 找不到我的设备。

但是我有另一个安装了 Snow Leopard 10.6.8 和 X-code 4.2 的系统（iOS 5 SDK）可以正确找到我的设备但问题是它不支持版本。它要求设备 iOS 降级到测试。

所以我想在旧的 ios 版本（iOS 5）上测试我的应用程序，所以我的问题是：

1.  是否有任何标准方法可以将设备 iOS 5.1 降级到 iOS 5.0 或更早版本以便我可以测试我的应用程序？

2.  完成任务后我可以再次恢复/升级吗？

    任何指向官方页面的链接都会很棒。请帮助提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:03:05.420

据我所知，官方没有办法降级。苹果不允许降级您的 iOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:41:15.820

每当我更新我的开发设备时，我都会更新我计算机的 iOS SDK，你可以在 iOS 开发中心主页的底部获取它

# php - Phpunit - 我如何注释测试？

> ID：10725035
> 
> 赞同：2
> 
> 时间：2012-05-23T17:33:45.790
> 
> 标签：php, unit-testing, annotations, phpunit

我想在不同的进程中运行我的测试。因此，我想用“@runTestsInSeparateProcesses”注释我的测试。但是，我以前从未注释过 Phpunit 测试，也无法找到关于实际放置注释的位置的良好描述。我已经看到了不同的注释做了什么，只是没有把它们放在哪里。有人可以给我一个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T17:40:35.220

注释应用于您的测试用例的文档块：

```
/**
 * Short Description
 * 
 * @param string $input The test input
 * 
 * @return bool The result
 * 
 * @runTestsInSeparateProcesses
 */
public function test_myMethod ($input) {
  // Test code here
} 
```

阅读有关 DocBlocks 的更多信息：[https ://docs.phpdoc.org/](https://docs.phpdoc.org/)

# spotify - Spotify 获取用户的播放列表

> ID：10725036
> 
> 赞同：1
> 
> 时间：2012-05-23T17:33:49.543
> 
> 标签：spotify

开发一个 Spotify 应用程序，我想向用户添加动态播放列表，但我需要确保它不是已经存在的情况。

有没有办法使用 Spotify javascript API 获取当前用户的播放列表？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:03:29.320

不幸的是，此时不是。

# dynamic - jQuery Isotope：通过用户控件调整元素大小？

> ID：10725043
> 
> 赞同：0
> 
> 时间：2012-05-23T17:34:11.453
> 
> 标签：dynamic, resize, slider, jquery-isotope

我正在使用[jQuery Isotope](http://isotope.metafizzy.co/index.html)，我想知道是否有一种内置（或至少“简单”）的方法可以通过用户控件（如滑块）动态调整元素的大小。

文档中有一个[流畅/响应](http://isotope.metafizzy.co/demos/fluid-responsive.html)式演示，但它会根据浏览器窗口的大小调整元素的大小。我正在寻找窗口/容器保持相同大小的东西，*用户*可以通过拖动滑块来控制元素的大小（如 iPhoto 中的缩略图大小滑块）。

这甚至可能吗？我还没有找到任何以这种方式使用的同位素的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:16:59.460

你应该试试这个链接： http: [//isotope.metafizzy.co/demos/relayout.html](http://isotope.metafizzy.co/demos/relayout.html)这个示例向你展示了一个项目如何在点击时调整大小，但是你可以传输这个代码来使它与滑块一起工作。但据我所知，该插件通过 css-classes 为其动画使用预定义的宽度和高度，因此您可能会添加许多不同大小的 css-classes，它不会无阶段工作，但我对此不安全。您可能需要动态设置元素的大小。例如，您可以使用以下代码将项目的大小在宽度和高度上增加 5px：

```
 /* resizing and relayouting the list */
$container.on('click', '.item', function(){
    $this = $(this);
    $this.width( $this.width() + 5);
    $this.height( $this.height() + 5);
    //reorganizes the elements in the list
    $container.isotope('reLayout'); 
```

});

$container 是您的包装元素，“.item”是项目的类。您可能应该为此事件处理程序使用命名函数来绑定并使用滚动条调用它。希望有帮助。

# git - GIT_PS1_SHOWUPSTREAM 不显示信息

> ID：10725044
> 
> 赞同：2
> 
> 时间：2012-05-23T17:34:13.263
> 
> 标签：git, bash

在我的`.bashrc`文件中，我包含以下内容：

```
GIT_PS1_SHOWDIRTYSTATE=true
GIT_PS1_SHOWUNTRACKEDFILES=true
GIT_PS1_SHOWUPSTREAM="verbose git"

export PS1="\t]\[\e[${ps_color}m\]\h:\w\[\e[0m\] \$(__git_ps1 '(%s)')> " 
```

这给了我这样的东西：

```
11:31:12]boxname:~/deploy/config/deploy (master %)> 
```

现在同时我从一个`git status`

```
# On branch master
# Your branch is ahead of 'origin/master' by 3 commits. 
```

这会让我相信我的提示应该是

```
11:31:12]boxname:~/deploy/config/deploy (master % +3)> 
```

任何想法为什么我不能让它正常工作？我在一个运行 gnome-terminal 的 centos6 机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:51:14.970

在我的系统中，正在访问 git 完成脚本

```
/etc/git.bash 
```

我能够通过链接更新到最新版本的 git 补全

```
/etc/bash_completion.d/git 
```

用一个简单的

```
$ ln -s /etc/bash_completion.d/git git.bash 
```

# javascript - 使用 javascript/jquery 拨打号码

> ID：10725045
> 
> 赞同：5
> 
> 时间：2012-05-23T17:34:16.117
> 
> 标签：javascript, jquery, ios5, jquery-mobile, cordova

有谁知道我如何使用 javascript 拨打电话？我尝试了以下方法：

```
window.location.href = 'tel:7178081998'; 
```

该按钮注册一次点击，但在 ios 环境中不执行任何操作。

我遇到了一个问题，因为我有一个脚本（FastClick），我的“电话”链接不起作用。我已经尝试了我能想到的一切，这就是为什么我在我现在的位置。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T08:37:13.200

`<a href="tel:5558675309">555-867-5309</a>`这应该有效。

如果需要弹出一个对话框询问用户“你确定要打电话吗”以防他/她无意中点击了它。

`<a id="call" href="">555-867-5309</a>`

使用 call id 打开一个对话框，点击 ok，将数据动态放入 href 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T08:42:09.337

听起来像是沙盒问题。为什么不使用 iframe 突破限制？将其动态添加到 DOM 并让它拨打号码。

[通过 Javascript 将 IFRAME 添加到 DOM](https://stackoverflow.com/questions/6319514/adding-iframe-to-dom-by-javascript)

# rally - Lookback API：有没有办法在单个查询中包含多个工件类型？

> ID：10725046
> 
> 赞同：1
> 
> 时间：2012-05-23T17:34:23.367
> 
> 标签：rally, lookbackapi

在传统的 Rally Webservices REST 中，如果我想修改自某个日期以来的所有缺陷和故事，我需要针对每个端点发出两个单独的 REST GET 请求：

[https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement](https://rally1.rallydev.com/slm/webservice/1.33/hierarchicalrequirement)

和

[https://rally1.rallydev.com/slm/webservice/1.33/defect/](https://rally1.rallydev.com/slm/webservice/1.33/defect/)

有没有办法利用 Lookback API 将这些组合成一个 REST 请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:08:41.043

当然，只需添加`_Type:{$in:["Defect","HierarchicalRequirement"]}`到查询中。所有工作项类型都存储在同一个集合中。您还可以取回后代任务和测试用例。

# php - 我返回的数组没有作为对象返回

> ID：10725047
> 
> 赞同：0
> 
> 时间：2012-05-23T17:34:24.757
> 
> 标签：php, ajax, json, pdo

我返回的数组以这种无效的奇怪格式返回。至少在我的 AJAX 经验中没有。

```
function get_within($latitude, $longitude) { 
global $pdo;

  // $lat = $latitude;
  // $long = $longitude;
  // $long = '-70.98245279999999';
  // $lat = '41.98156549999999';

    $stmt = $pdo->prepare("SELECT menu_id, latitude, longitude ( acos(
          cos( radians(".$latitude."   ) ) *
            cos( radians( latitude) ) * 
            cos( radians(".$longitude.") - radians(longitude)) +
            sin( radians(".$latitude.") ) * sin( radians(latitude) ) ))*.621371192
as dis from pages where 1 ORDER BY `dis` ASC LIMIT 10");

$stmt->execute( array() );

return $stmt->fetchAll( PDO::FETCH_OBJ ); 
```

我使用上述函数发出了 AJAX 请求。我需要它返回一个对象，但它只返回一个这样的数组：

> `[{"id":"26","subject_id":"5","menu_name":"Bobby Byrne's Food & Pub\u200e","position":"1","visible":"1","content":"Bobby Byrne's Restaurant & Pub\u200e\r\n65 Massachusetts 6A, Sandwich, MA\r\n(508) 888-6088","longitude":"-70.508598","latitude":" 41.765754","dis":"0.00245126419033985"}]`

出了什么问题，如何正确取回对象中的查询以供使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:36:32.773

您的响应是一个 JSON 编码的对象。您需要将 JSON 解码为对象。

请参阅： http: [//php.net/manual/en/ref.json.php](http://php.net/manual/en/ref.json.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:09:53.727

正如@DanArmstrong 指出的那样，返回的 JSON 数组没有什么奇怪或无效的。[根据文档](http://us3.php.net/manual/en/pdostatement.fetchall.php) `PDOStatement::fetchAll`应该返回一个数组——它是——当你将一个数组编码为 JSON 时，它使用[数组表示法](http://www.json.org/)，这是有效的 JSON 和你在这里看到的。

如果你想要一个 JSON 对象而不是数组，你需要：

1.  在服务器端从返回的数组中获取一个项目`fetchAll`并对该值进行编码（例如`json_encode( $results[0] )`），而不是对整个返回的数组进行编码，或者
2.  在客户端从解码的数组中获取一个项目，例如`JSON.parse( data )[0]`。

# ruby-on-rails - act_as_taggable_on 标签添加了两次

> ID：10725048
> 
> 赞同：2
> 
> 时间：2012-05-23T17:34:31.230
> 
> 标签：ruby-on-rails, ruby-on-rails-3, tags, acts-as-taggable-on, tag-it

我有一个 RoR 应用程序，允许用户标记他们收藏中的项目。我使用 tag-it.js Jquery 插件并使用 Ajax 调用来添加和删除 ItemsController 中的标签。我的问题是每个标签都添加了两次，因此当我执行@item.tags.each 时，所有标签都会显示两次。

**物品控制器：**

```
 def add_tag 
    @collection = current_user.collections.find(params[:collection_id])    
    @item = @collection.items.find(params[:id])
    @item.tag_list.add(params[:tag])   
    current_user.tag(@item, :with => @item.tag_list.to_s, :on => :tags)          
    @item.save   

    render nothing: true 
  end 

  def remove_tag 
    @item = current_user.items.find_by_id(params[:id])       
    @item.tag_list.remove(params[:tag]) 
    current_user.tag(@item, :with => @item.tag_list.to_s, :on => :tags)          
    @item.save 

    render nothing: true 
  end 
```

**使用 Tag-it.js 处理 AJAX 标记的 Javascript：**

```
$('#item_tags').tagit({
      onTagAdded: function(event, tag) {          
       var add_url = $('#item_tags').attr("data-add-url");              
        $.ajax({
          url: add_url,                      
          data: {tag: tag.text().substring(0, tag.text().length-1)},                                   
        })             
      }, 
      onTagRemoved: function(event, tag) {
        var remove_url = $('#item_tags').attr("data-remove-url"); 
        $.ajax({
          url: remove_url,  
          type: 'DELETE',                        
          data: {tag: tag.text().substring(0, tag.text().length-1)},                                  
        })
      },
      tagSource: function(search, showChoices) {
        var autocomplete_url = $('#item_tags').attr("data-auctocomplete-url");             
        $.ajax({
          url: autocomplete_url,        
          data: {term: search.term},                              
          success: function(choices) {
            showChoices(choices);
          }
        })           
      }
}); 
```

**用户添加/删除标签的 item#_form 视图：**

```
<ul id='item_tags' class='tagit' data-remove-url="<%= remove_tag_collection_item_path %>" data-add-url="<%= add_tag_collection_item_path %>" data-auctocomplete-url="/collections/<%=@collection.id %>/items/autocomplete_tag_name"> 
      <% @item.tags.each do |tag| %>   
        <li><%= tag.name %></li>            
      <% end %>                   
</ul> 
```

我必须注意，有必要拥有标签所有权（由 current_user），以便 Jquery 自动完成仅基于当前用户的先前标签而不是所有用户完成。我认为问题在于我必须将标签添加到 tag_list 中，然后将 tag_list 添加到用户项目标记中。我找不到解决这个问题的方法，因为 current_user.tag() 方法似乎在调用 current_user.tag() 时覆盖了以前的项目标签，所以我必须将新标签添加到以前的标签以保留它们。

此外，当我提交 item#_form 时，我需要以某种方式让 update 方法忽略 tags 属性，因为它试图将它们保存到 item 但它们已经通过 AJAX 调用保存，所以我收到此错误：

```
ActiveRecord::AssociationTypeMismatch in ItemsController#update
ActsAsTaggableOn::Tag(#82082080) expected, got String(#72294010) 
```

提前致谢。

PS。以下是我如何在 ItemsController 中自动完成工作：

```
def get_autocomplete_items(parameters)
    tags = current_user.owned_tags.named_like(parameters[:term])   
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T11:54:38.053

你是对的：

> 我认为问题在于我必须将标签添加到 tag_list 中，然后将 tag_list 添加到用户项目标记中。我找不到解决这个问题的方法，因为 current_user.tag() 方法似乎在调用 current_user.tag() 时覆盖了以前的项目标签，所以我必须将新标签添加到以前的标签以保留它们。

该`.tag`方法使用给定列表覆盖现有标签。因此，如果您想添加新标签，您似乎需要将新标签附加到现有标签，然后传入该新列表。但是，`.tag_list.add`实际上也会创建标签。

所以，当你这样做时：

```
 @item.tag_list.add(params[:tag])   
  current_user.tag(@item, :with => @item.tag_list.to_s, :on => :tags) 
```

您确实添加了两次新标签。

当我这样做时：

```
tag_list = profile.tag_list // oops!
tag_list.add(tags)
self.tag(profile, with: tag_list, on: :tags) 
```

我正在创建对 tag_list 的引用，然后在其上调用 add。我们需要做的是：

```
tag_list = profile.tags.map(&:name) 
```

为我们正在标记的对象创建一个标记名称数组。然后我们就可以在列表的副本上调用 add 了，没问题！不再有重复的标签。

我很高兴遇到您的问题，因为它使我得到了对我有用的答案。但是，如果图书馆提供了一种很好的方法，我会更加高兴。仅仅通过阅读文档，我无法找到一个好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T07:07:32.323

你做得很好，但是，只是一个小错误。

这里`tag_list`得到重复的标签，一个有**所有者**，另一个**没有所有者**

您的线路正在添加**没有所有者**`@item.tag_list.add(params[:tag])`的标签

 **并且行正在添加**与所有者**`current_user.tag(@item, :with => @item.tag_list.to_s, :on => :tags)`相同的标签

 **后来，当您保存对象时，由于`tag_list`其行为是对对象的*未拥有*标签的引用，因此两者都被保存

以下代码应该可以正常工作。

```
 def add_tag 
    @collection = current_user.collections.find(params[:collection_id])    
    @item = @collection.items.find(params[:id])
    tag_list = @item.all_tag_list.dup # Reference to original tag_list avoided
    # Also instead of "tag_list", use "all_tag_list" method, as "tag_list" only return tags without owner
    # Link(go to last line og Tag Ownership topic) : "https://github.com/mbleigh/acts-as-taggable-on#tag-ownership"
    tag_list.add(params[:tag])   
    current_user.tag(@item, :with => tag_list.to_s, :on => :tags)          
    @item.save   

    render nothing: true 
  end 

  def remove_tag 
    @item = current_user.items.find_by_id(params[:id])
    tag_list = @item.all_tag_list.dup # Reference to original tag_list avoided      
    tag_list.remove(params[:tag]) 
    current_user.tag(@item, :with => tag_list.to_s, :on => :tags)          
    @item.save 

    render nothing: true 
  end 
```

**改良版**

```
def add_owned_tag 
    @some_item = Item.find(params[:id])
    owned_tag_list = @some_item.all_tag_list - @some_item.tag_list
    owned_tag_list += [(params[:tag])]
    @tag_owner.tag(@some_item, :with => stringify(owned_tag_list), :on => :tags)
    @some_item.save   
end

def stringify(tag_list)
    tag_list.inject('') { |memo, tag| memo += (tag + ',') }[0..-1]
end

def remove_owned_tag 
    @some_item = Item.find(params[:id])
    owned_tag_list = @some_item.all_tag_list - @some_item.tag_list
    owned_tag_list -= [(params[:tag])]
    @tag_owner.tag(@some_item, :with => stringify(owned_tag_list), :on => :tags)
    @some_item.save   
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-01T22:46:42.847

注意页面加载时触发的 onTagAdded 事件。在此处查看事件示例[http://aehlke.github.com/tag-it/examples.html](http://aehlke.github.com/tag-it/examples.html)

```
//-------------------------------
// Tag events
//-------------------------------
var eventTags = $('#eventTags');
eventTags.tagit({
     availableTags: sampleTags,
     onTagRemoved: function(evt, tag) {
        console.log(evt);
        alert('This tag is being removed: ' + eventTags.tagit('tagLabel', tag));
    },
    onTagClicked: function(evt, tag) {
        console.log(tag);
        alert('This tag was clicked: ' + eventTags.tagit('tagLabel', tag));
    }
 }).tagit('option', 'onTagAdded', function(evt, tag) {
    // Add this callbackafter we initialize the widget,
    // so that onTagAdded doesn't get called on page load.
    alert('This tag is being added: ' + eventTags.tagit('tagLabel', tag));
 }); 
```****

# linux - 使用“mem”环境变量限制内核可以管理多少物理内存

> ID：10725054
> 
> 赞同：2
> 
> 时间：2012-05-23T17:34:49.983
> 
> 标签：linux, memory-management

我继承了对一些 linux 内核驱动程序的支持（我的经验非常有限）。我的问题如下。这是一个嵌入式环境，硬件有 512MB 的物理内存。但是，传递给内核的引导参数通过使用变量 linuxMem=mem=256M 将内存限制为 256MB。在我对这个环境变量的研究中，我了解到这将内核可以管理的内存量限制为 256MB。然而，在我的目标上运行的一些应用程序代码中，我看到了 /dev/mem 的打开和返回的文件描述符的后续 mmap，并且 mmap 调用的偏移参数位于物理内存的上部 256MB 中。事情似乎运作良好。所以我的问题是“如果内核不知道上面的 256MB，为什么它会起作用？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T21:48:04.623

严格来说，mem=256M 是内核参数，不是环境变量。这个参数只是告诉内核使用这么多内存，但不会让系统对机器中安装的物理芯片完全视而不见。它可以用来模拟一个物理内存比实际可用内存少的系统，但它并不完全等同于打开你的盒子并拉出其中一个内存芯片。

查看[此参数的文档](http://www.mjmwired.net/kernel/Documentation/kernel-parameters.txt#1578)，您可以明确地看到在某些情况下可以使用超出限制范围的地址，这就是他们建议`memmap=`在某些情况下也使用的原因。因此，您不能为您的应用程序分配超出限制的内存，但您可以查看在某个物理地址找到的内容，并且似乎某些设备驱动程序利用了这种可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T19:58:20.800

`mmap()`返回虚拟地址，而不是物理地址。

一台设备完全有可能只有 64MB 的内存并`mmap()`映射大约 1GB 的东西。

# python - 扩展 int 的 Python 类的行为并不完全像 int

> ID：10725057
> 
> 赞同：16
> 
> 时间：2012-05-23T17:34:55.830
> 
> 标签：python

尝试将字符串转换为我编写的扩展类时，我看到了一些奇怪的行为`int`。这是一个演示我的问题的简单程序：

```
class MyInt(int):
    pass

toInt = '123456789123456789123456789'

print "\nConverting to int..."
print type(int(toInt))

print "\nConverting to MyInt..."
print type(MyInt(toInt)) 
```

由于`MyInt`是空的，我希望它的行为与`int`. 相反，这是我从上面的程序中得到的输出：

```
Converting to int...
<type 'long'>

Converting to MyInt...
Traceback (most recent call last):
  File "int.py", line 9, in <module>
    print type(MyInt(toInt))
OverflowError: long int too large to convert to int 
```

字符串无法转换为`MyInt`! 我写的方式`MyInt`导致它的行为与它的基类不同呢？在这种情况下，似乎有某种最大值`MyInt`; 当在 Python 中扩展内置类时，是否还有其他像这样隐式强加的属性？最后，有没有办法改变`MyInt`它，使它不再有这个最大值？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-24T00:27:06.230

秘诀在于`__new__()`方法：

```
>>> class MyInt(int): pass
>>> MyInt.__new__ == int.__new__
True
>>> MyInt.__new__(MyInt, '123456789101234567890')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
OverflowError: Python int too large to convert to C long
>>> MyInt.__new__(int, '123456789101234567890')
123456789101234567890L 
```

`__init__(self, *args)`基本上，当您实例化一个类时（之前）发生的第一件事就是`__new__(cls, *args)`被调用。它作为第一个参数传递给类对象。（由 继承）的`__new__`方法仅在其传递的类是时才执行转换为。我认为这是为了避免弄乱子类，因为转换为会删除您添加的所有特殊功能。`int``MyInt``long``int``MyInt``long`

`long`如果你想要大于`int`可以处理的整数，你应该使用你的基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:46:17.757

希望与口译员的这次会议将提供一些关于正在发生的事情的见解：

```
>>> i = 1
>>> print type(i), i
<type 'int'> 1
>>> i = int((i << 31) - 1)
>>> print type(i), i
<type 'int'> 2147483647
>>> i += 1
>>> print type(i), i
<type 'long'> 2147483648
>>> 
```

您的类没有继承这种行为，因为 Python 可能将`int`对象视为一种特殊情况。

# node.js - Node.js 集群模块

> ID：10725060
> 
> 赞同：2
> 
> 时间：2012-05-23T17:35:03.427
> 
> 标签：node.js, cluster-computing

请帮忙。我正在使用 nodejs 集群模块：[http](http://nodejs.org/docs/v0.6.18/api/cluster.html) ://nodejs.org/docs/v0.6.18/api/cluster.html 。我有以下代码：

运行.js

```
var cluster = require('cluster');

if (cluster.isMaster) {
    require('os').cpus().forEach(function () {
        cluster.fork();
    });
} else {
    require('./worker.js');
} 
```

worker.js

```
var http = require('http'),
    connect = require('connect'),
    sio = require('socket.io'),
    // create server
    app = connect(),
    server = http.createServer(app);

server.listenPort(80);

var io = sio.listen(server);
// io.sockets.on .... 
```

所有工作人员都监听 80 端口。每个连接都服务于一个随机工作人员（？）。我可以在用户连接的地方切换工作人员吗？

*对不起我的英语不好*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:39:50.860

如果你真的需要切换，你可以使用 sockets / socket.io 在你的集群之间进行通信并发送你的工作。

否则，你不能。但只是好奇——你为什么要这么做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-05T07:18:24.577

您应该研究 WebRTC，它支持点对点连接，这对于多人游戏非常有用。

我的 2 美分。

# javascript - PHP 上的 Javascript 函数返回结果，重复 ID 问题

> ID：10725061
> 
> 赞同：0
> 
> 时间：2012-05-23T17:35:06.613
> 
> 标签：javascript, php, function

我想知道是否有人可以帮助我或引导我朝着正确的方向前进......基本上我有一个Javascript函数，可以计算票价（来自mysql数据库）和数量（来自drop-下菜单）。Javascript 和 PHP 工作正常……但仅针对第一个结果，该功能不是动态的，确实需要帮助来解决这个问题。

在我的 PHP 中，从 SQL 语句返回一个表：

```
$postCodeSQL = "SELECT * FROM ticket WHERE locationID IN (SELECT locationID FROM location WHERE postCode LIKE '$pcSearch') ";

$postCoderesult = mysql_query($postCodeSQL) or die(mysql_error());

  while ($pcRow = mysql_fetch_assoc($postCoderesult)) {
                                $ID = $pcRow['ticketID']; //row in ticket table on database
                                $venue = $pcRow['venue'];
                                $ticketPrice = $pcRow['tPrice'];
                                $date = $pcRow['date'];
                                $time= $pcRow['time'];

                        echo "<tr>\n";
                                echo "<td id=\"venuePlace\">$venue <input type='hidden' id='venuePlaceHidden' class='venuePlaceHidden' value='".$venue."'></td>\n";
                                echo "<td id=\"ticketprice\">&pound;$ticketPrice <input type='hidden' id='ticketPriceHidden' class='ticketPriceHidden' value='".$ticketPrice."'></td>\n";
                                echo "<td >
                                        <select name =\"showQuantity\" id=\"showQuantity\" class =\"showQuantity\" onChange=\"calculateCost()\" >
                                                <option value=\"Select\">Select...</option>
                                                <option value=\"1\">1</option>
                                                <option value=\"2\">2</option>
                                                <option value=\"3\">3</option>
                                                <option value=\"4\">4</option>
                                                <option value=\"5\">5</option>
                                        </select>

                                    </td>\n";
                                echo "<td id=\"date\">$date <input type='hidden' id='dateHidden' class='dateHidden' value='".$date."'></td>\n";
                                echo "<td id=\"time\">$time <input type='hidden' id='timeHidden' class='timeHidden' value='".$time."'></td>\n";

                                echo "<td> <input type= \"button\" class= \"buyMe\" value= \"Buy\" name=\"buyMe\" onclick=\"grandTotal()\" > 
                                      </td>\n";

                        echo "</tr>\n";

                        } 
```

隐藏字段被插入，因此 Javascript 函数可以解析这些值。JS 函数解析这些值并乘以票的成本 ($ticketPrice) 并将其乘以交付值：

```
function quantityChange() {
//Select the value of the drop down list       
var quantity = $('.showQuantity option:selected').val();
//get the value of the number from the tPrice column in 'ticket' table
var ticket = parseInt(document.getElementById('ticketPriceHidden').value);
//get the venue value
var venue = document.getElementById('venuePlaceHidden').value;
var date = document.getElementById('dateHidden').value;
var time = document.getElementById('timeHidden').value;
//multiply them together
var total = quantity * ticket;

return {
    venue: venue,
    quantity: quantity,
    ticket: ticket,
    date: date,
    time: time,
    total: total
};
}

function calculateCost () {
var data = quantityChange();

$('#summary').html('You have chosen '+ ' '  + data.quantity  + ' ' + 'tickets @' + ' ' + data.venue + ' = '  + ' ' +  '&pound;' + data.total);
} 
```

如前所述，此函数适用于表返回的顶部结果，但是在我的表中返回的结果不止一个，JS 不适用于这些值。我的问题与重复 ID 有关，因为返回的每个结果都具有相同的 ID。

我给每个结果一个类，但我不能做一个“getElementByClass”方法。请问有人知道如何编辑此代码，以便 JS 函数适用于返回的其他结果吗？我有一种感觉，我可能需要一个 foreach() 循环来声明“对于返回的每个值，应用 JS 函数......”或类似的东西？

非常感谢任何帮助，我正在努力提高我的接受率！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:20:23.243

用动态 ID 试试这段代码......

```
<script>
function quantityChange(id) {
//Select the value of the drop down list       
var quantity = $('.showQuantity_'+id+'option:selected').val();
//get the value of the number from the tPrice column in 'ticket' table
var ticket = parseInt(document.getElementById('ticketPriceHidden_'+id).value);
//get the venue value
var venue = document.getElementById('venuePlaceHidden_'+id).value;
var date = document.getElementById('dateHidden_'+id).value;
var time = document.getElementById('timeHidden_'+id).value;
//multiply them together
var total = quantity * ticket;

    $('#summary_'+id).html('You have chosen '+ ' '  + quantity  + ' ' + 'tickets @' + ' ' + venue + ' = '  + ' ' +  '&pound;' + total);
}

</script>

<?php 

$postCodeSQL = "SELECT * FROM ticket WHERE locationID IN (SELECT locationID FROM location WHERE postCode LIKE '$pcSearch') ";
$postCoderesult = mysql_query($postCodeSQL) or die(mysql_error());

$i=0;
while ($pcRow = mysql_fetch_assoc($postCoderesult)) {
    $ID = $pcRow['ticketID']; //row in ticket table on database
    $venue = $pcRow['venue'];
    $ticketPrice = $pcRow['tPrice'];
    $date = $pcRow['date'];
    $time= $pcRow['time'];

echo "<tr>\n";
echo "<td id=\"venuePlace\">$venue <input type='hidden' id='venuePlaceHidden_$i' class='venuePlaceHidden' value='".$venue."'></td>\n";
echo "<td id=\"ticketprice\">&pound;$ticketPrice <input type='hidden' id='ticketPriceHidden_$i' class='ticketPriceHidden' value='".$ticketPrice."'></td>\n";
echo "<td >
<select name =\"showQuantity\" id=\"showQuantity_$i\" class =\"showQuantity\" onChange=\"quantityChange($i)\" >
<option value=\"Select\">Select...</option>
<option value=\"1\">1</option>
<option value=\"2\">2</option>
<option value=\"3\">3</option>
<option value=\"4\">4</option>
<option value=\"5\">5</option>
</select>

</td>\n";
echo "<td id=\"date\">$date <input type='hidden' id='dateHidden_$i' class='dateHidden' value='".$date."'></td>\n";
echo "<td id=\"time\">$time <input type='hidden' id='timeHidden_$i' class='timeHidden' value='".$time."'></td>\n";

echo "<td> <input type= \"button\" class= \"buyMe\" value= \"Buy\" name=\"buyMe\" onclick=\"grandTotal()\" > 
</td>\n";

echo "</tr>\n";
$i++;
echo "<div id = 'summary_$i'></div>";
}
?> 
```

> 解释

```
<script>
function abc(id){
  alert('#ticketPriceHidden_'+id);
  var tph =  document.getElementById('ticketPriceHidden_'+id).value;

 if(tph == ''){
     alert('this field is required......');
 }

}
</script>

<a href="javascript:;" onclick="abc(1);">1</a>
<a href="javascript:;" onclick="abc(2);">2</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:01:28.580

如果您有超过一组相同的 ID（用于不同的结果），那么最好将它们与数字一起使用：`venuePlaceHidden_01, venuePlaceHidden_02`

因此，您需要`$num`在创建表格的代码中以及在 JS 中分析值的代码中添加圆和递增变量。

# version-control - 在 Visual Studio TFS 中将一个分支的差异作为补丁应用到另一个分支

> ID：10725064
> 
> 赞同：7
> 
> 时间：2012-05-23T17:35:13.823
> 
> 标签：version-control, tfs, diff, patch

我们有一个项目，我们一直在分支中为 6.1 版做一些工作。在 6.1 分支（变更集 1800）中所做的更改之一是错误修复，有人认为它足够紧急，值得为我们的 6.0 生产版本提供补丁。

现在，在变更集 1800 之前和之后都对相关文件进行了更改。他们想要的只是将补丁应用于 6.0。

根据[http://linux.die.net/man/1/patch](http://linux.die.net/man/1/patch)，似乎最好的办法是通过比较变更集 1800 和 1799**创建一个差异文件**，然后**将该差异文件作为补丁应用**到6.0。我什至不知道从哪里开始在 TFS 中执行此操作。

作为一个后备计划，我总是可以手动检查变更集 1800 中的差异并将它们复制到最新版本的生产中来修补它，但如果可能的话，我想正确地做到这一点。

*旁白*：我知道，如果只应用一个差异，您可能会冒这样的风险，即 1799>1800 差异中涉及的一些代码依赖于仅在当前生产版本和变更集 1799 之间建立的代码，但可以通过以下方式轻松验证应用差异补丁后快速构建和测试生产。我们对此并不担心。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T18:50:19.217

好的，我不确定我是否完全理解，但这里是：

TFS 中的变更集不存储文件的绝对内容，而是存储差异（添加、删除、更改的行）。

如果您想报告从 6.1 版到 6.0 版的错误修复，并且此修复包含在变更集 1800 中（仅此修复），那么只需将给定的变更集合并到 6.0 版即可。在变更集 1800 之前所做的所有更改都不会在 6.0 中合并，只会合并您在此变更集中所做的更改。

当您进行合并时，您有两个选择：

1.  合并从源分支到目标分支的所有更改
2.  将选定的变更集从源合并到目标。

使用第二个并指定变更集 1800 就可以了。

一些图片：

![在此处输入图像描述](../Images/ec8e3dc8015176309ad98076b95cef4b.png)

![在此处输入图像描述](../Images/ae92ecfb8f7dd677e2cb61cd9909f23e.png)

**只有**选定的变更集将被合并。

# vba - For Each 循环：循环通过 Outlook 邮箱删除项目时，某些项目会被跳过

> ID：10725068
> 
> 赞同：14
> 
> 时间：2012-05-23T17:35:46.773
> 
> 标签：vba, for-loop, outlook

我想开发 VBA 代码：

1.  循环浏览邮箱中的所有电子邮件项目
2.  如果有任何类型的其他项目说“日历邀请”跳过该项目。
3.  找出带有附件的电子邮件
4.  如果附件具有“.xml”扩展名和特定标题，则将其保存到目录中，否则继续搜索
5.  执行步骤 4 后，将所有包含 .xml 附件的电子邮件放入“已删除邮件”文件夹，并通过循环删除该文件夹中的所有电子邮件。

代码运行完美，除了；例如

1.  在您的邮箱中收到了 8 封电子邮件，其中每封都附有“.xml”文件。
2.  运行代码
3.  您将看到 8 个项目中只有 4 个已成功处理，其他 4 个保留在其位置。
4.  如果再次运行代码，现在将成功处理 2 个项目，另外 2 个保留在您的邮箱中。

问题：运行代码后，它应该处理所有文件并将它们全部删除，而不是每次运行中的一半。我希望它一次处理所有项目。

顺便说一句，每次我打开 Outlook 时都会运行此代码。

```
Private Sub Application_Startup()
'Initializing Application_Startup forces the macros to be accessible from other offic apps

'Process XML emails

Dim InboxMsg As Object

Dim DeletedItems As Outlook.Folder
Dim MsgAttachment As Outlook.Attachment
Dim ns As Outlook.NameSpace
Dim Inbox As Outlook.Folder

Dim fPathTemp As String
Dim fPathXML_SEM As String
Dim fPathEmail_SEM As String
Dim i As Long
Dim xmlDoc As New MSXML2.DOMDocument60
Dim xmlTitle As MSXML2.IXMLDOMNode
Dim xmlSupNum As MSXML2.IXMLDOMNode

    'Specify the folder where the attachments will be saved
    fPathTemp = "some directory, doesn't matter"
    fPathXML_SEM = "some directory, doesn't matter"
    fPathEmail_SEM = "some directory, doesn't matter"

    'Setup Outlook
    Set ns = GetNamespace("MAPI")
    Set Inbox = ns.Folders.Item("mailbox-name").Folders("Inbox")
    Set DeletedItems = ns.Folders.Item("mailbox-name").Folders("Deleted Items")

    'Loop through all Items in Inbox, find the xml attachements and process if they are the matching reponses
    'On Error Resume Next
    For Each InboxMsg In Inbox.Items
        If InboxMsg.Class = olMail Then 'if it is a mail item

            'Check for xml attachement
            For Each MsgAttachment In InboxMsg.Attachments

                If Right(MsgAttachment.DisplayName, 3) = "xml" Then

                    'Load XML and test for the title of the file
                    MsgAttachment.SaveAsFile fPathTemp & MsgAttachment.FileName
                    xmlDoc.Load fPathTemp & MsgAttachment.FileName
                    Set xmlTitle = xmlDoc.SelectSingleNode("//title")
                    Select Case xmlTitle.Text
                        Case "specific title"
                            'Get supplier number
                            Set xmlSupNum = xmlDoc.SelectSingleNode("//supplierNum")
                            'Save the XML to the correct folder
                            MsgAttachment.SaveAsFile fPathXML_SEM & xmlSupNum.Text & "_" & Format(Date, "yyyy-mm-dd") & ".xml"
                            'Save the email to the correct folder
                            InboxMsg.SaveAs fPathEmail_SEM & xmlSupNum.Text & "_" & Format(Date, "yyyy-mm-dd") & ".msg"
                            'Delete the message
                            InboxMsg.Move DeletedItems
                        Case Else

                    End Select
                    'Delete the temp file
                    On Error Resume Next
                    Kill fPathTemp & MsgAttachment.FileName
                    On Error GoTo 0
                    'Unload xmldoc
                    Set xmlDoc = Nothing
                    Set xmlTitle = Nothing
                    Set xmlSupNum = Nothing
                End If
            Next
        End If
    Next

    'Loop through deleted items and delete
    For Each InboxMsg In DeletedItems.Items
        InboxMsg.Delete
    Next

    'Clean-up
    Set InboxMsg = Nothing
    Set DeletedItems = Nothing
    Set MsgAttachment = Nothing
    Set ns = Nothing
    Set Inbox = Nothing
    i = 0

End Sub 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T18:57:55.330

可能的原因：当您执行此操作`InboxMsg.Move`时，收件箱中的所有邮件在被移动的邮件之后都会在列表中上升一个位置。所以你最终会跳过其中的一些。这是 VBA`For Each`构造的一个主要烦恼（而且它似乎也不一致）。

可能的解决方案：更换

```
For Each InboxMsg In Inbox.Items 
```

和

```
For i = Inbox.Items.Count To 1 Step -1 'Iterates from the end backwards
    Set InboxMsg = Inbox.Items(i) 
```

这样，您就可以从列表的末尾向后迭代。当您将消息移动到已删除的项目时，列表中的以下项目何时增加一个并不重要，因为您已经处理了它们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T18:36:39.723

在循环访问一组（子）项时修改它们的内容通常不是一个好主意。您可以修改您的代码，使其首先识别所有需要处理的项目，然后将它们添加到`Collection`. 然后处理该集合中的所有项目。

基本上，当您循环浏览收件箱的内容时，您不应该从收件箱中删除项目。首先收集您要处理的所有项目（在您的收件箱循环中），然后当您完成循环时，处理该项目集合。

这是一些演示此的伪代码：

```
Private Sub Application_Startup()

    Dim collItems As New Collection

    'Start by identifying messages of interest and add them to a collection
    For Each InboxMsg In Inbox.Items
        If InboxMsg.Class = olMail Then 'if it is a mail item
            For Each MsgAttachment In InboxMsg.Attachments
                If Right(MsgAttachment.DisplayName, 3) = "xml" Then
                    collItems.Add InboxMsg
                    Exit For
                End If
            Next
        End If
    Next

    'now deal with the identified messages
    For Each InboxMsg In collItems
        ProcessMessage InboxMsg
    Next InboxMsg

    'Loop through deleted items and delete
    For Each InboxMsg In DeletedItems.Items
        InboxMsg.Delete
    Next

End Sub

Sub ProcessMessage(InboxMsg As Object)
    'deal with attachment(s) and delete message
End Sub 
```

# c# - 如何将我的代码隐藏绑定更改为 XAML 绑定

> ID：10725083
> 
> 赞同：0
> 
> 时间：2012-05-23T17:37:09.310
> 
> 标签：c#, wpf, data-binding

我是 C# 和 WPF 的新手。我写了一个简单的程序。我有一个名为 的类`Counter`，它公开了一个从 0 开始的只读属性`Count`，以及一个`Increment`简单地将计数加一的公共方法。`Counter`实现`INotifyPropertyChanged`。

我有一个 Window 类（代码如下）。我将一个`Counter`对象的实例传递给构造函数并执行绑定。该窗口有一个按钮和一个标签。标签绑定到计数器的`Count`属性，按钮调用`Increment`.

这一切都有效。

但是，我在网络和 MSDN 上看到的大多数示例主要处理在 XAML 中定义绑定。如何在此处修改我的示例以将绑定操作从代码后面移到标记中？VS2010的Properties窗口中的Binding属性好像不知道怎么做我想做的。也许这是不可能的？

另一个问题：我认为这个示例不适合 MVVM……我的 Counter 类是独立的，除了通过其属性之外，它不与任何地方的视图相关联。但是，CounterWindow 类持有对它的引用。这是此参考的正确位置吗？我也认为也许我应该创建窗口，然后设置`CounterObject`我将使用的属性（例如），而不是通过构造函数传递。

```
public partial class CounterWindow : Window {
    Counter ctr;

    public CounterWindow(Counter ctr) {
        InitializeComponent();

        this.ctr = ctr;
        Binding b = new Binding("Count");
        b.Source = ctr;
        CounterLabel.SetBinding(Label.ContentProperty, b);
    }

    private void IncrementButton_Click(object sender, RoutedEventArgs e) {
        ctr.Increment();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:44:17.220

像这样的东西：

```
public CounterWindow(Counter ctr) 
{
    InitializeComponent();
    DataContext = ctr;
} 
```

标记：

```
<Label Content="{Binding Count}" /> 
```

**升级版**。MVVM 中有两种常见的方法：视图优先和模型优先。
View first 意味着您最初创建了视图，然后视图创建​​了它所绑定的视图模型。
模型优先意味着首先创建视图模型，然后视图模型创建其视图并将其自身（通过构造函数或通过 DataContext 属性设置器）作为视图的数据上下文传递。

希望这对您有所帮助。

# android - 编辑 SharedPreferences 值？

> ID：10725084
> 
> 赞同：2
> 
> 时间：2012-05-23T17:37:11.533
> 
> 标签：android

我无法理解共享偏好。我有用户将插入密码、起始价格、等待价格等的活动。我的计划是设置起始值，然后用户可以根据需要更改该值。我的问题是：如果我在 onCreate() 方法中创建首选项，那么每次运行应用程序时如何应用更改（使用 SharedPreferences.Editor）它应该在首选项中创建新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:39:48.643

不，它会一键更改前一个....

[http://mobile.tutsplus.com/tutorials/android/android-application-preferences/](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:44:07.017

**要获得共享偏好，请在您的活动中使用以下方法：**

```
 SharedPreferences prefs = this.getSharedPreferences(
          "com.example.app", Context.MODE_PRIVATE); 
```

**阅读偏好：**

```
String dateTimeKey = "com.example.app.datetime";

// use a default value using new Date()
long l = prefs.getLong(dateTimeKey, new Date().getTime()); 
```

**编辑和保存首选项**

```
 Date dt = getSomeDate();
    prefs.edit().putLong(dateTimeKey, dt.getTime()).commit(); 
```

# git - 如何在 github for mac 中取消提交？

> ID：10725085
> 
> 赞同：8
> 
> 时间：2012-05-23T17:37:27.610
> 
> 标签：git, github-for-mac

我正在使用 github for mac，github 提供的 git 的 GUI，并且我恢复了历史中的提交。然后我决定我想再次恢复它，并且.... 长话短说，我有一堆不必要的恢复，不想与 github 同步，但它们是自动提交的，所以我唯一的选择是同步。

有没有办法忽略这些变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T22:17:15.430

看起来目前无法通过 GUI... 希望 Github 的好人能看到这一点并将其作为功能建议。

目前我们只能按照塔斯社在上面评论中的建议去做。`git reset <commit you want to reset to>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-14T17:16:55.753

以下是您可以使用 GitHub for Mac GUI 执行的一些操作：

A.*在本地 repo 中进行提交后，同步之前*，GitHub for Mac 将允许您**撤消上一次提交**。使用“更改”窗格底部的“撤消”按钮。这是我最常使用的。

B. 同步后，您可以从 GUI**恢复提交**，如下所示：选择您的存储库，然后选择“历史记录”。最后选择最后一次提交。在顶部提交的详细（文件差异）视图中，您将看到一个“设置”齿轮图标。它是一个带有“Revert this Commit”条目的下拉菜单。见下文。请注意，这不会删除您的提交，但它会有效地撤消您的提交引入的更改。

C. 如果选择较早的提交（即比上一次更早），您可以使用相同的菜单“**回滚到此提交**”。同样，这不会删除您的提交，但会引入具有撤消它们的效果的更改。

这仍然是可以通过 GUI 完成的最好的。如果您真的想从历史记录中删除您过去的提交，您仍然需要使用命令行：例如`git rebase -i HEAD~2`，将允许您将最后两个提交压缩为一个。请参阅[此问题的答案以](https://stackoverflow.com/questions/5189560/squash-my-last-x-commits-together-using-git)获得指导。

D. 请注意，一旦您从命令行压缩了提交，您就可以使用 (A) 从 GUI 重新打开最后一次提交（即压缩的结果）。

* * *

![在此处输入图像描述](../Images/7fc887fdd6e49a633735723ef844e99e.png)

# iphone - 在 settings.bundle 中指定不可编辑的字符串？

> ID：10725088
> 
> 赞同：7
> 
> 时间：2012-05-23T17:37:54.493
> 
> 标签：iphone, objective-c, cocoa-touch

我注意到一些应用程序将条目添加到 settings.bundle 中，这些条目仅表示固定/不可编辑的字符串。

![在此处输入图像描述](../Images/207ce769fc604cc10fe91b4ba4d853c1.png)

我只在列表中看到这些，唯一关闭的是“文本字段”，但这是可编辑的。

![在此处输入图像描述](../Images/3e63c7813bba4a40f54cee06aa75523e.png)

有没有办法在 Root.plist 中指定这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-28T19:27:28.167

实际上，您必须使用 title 而不是 textField ，更具体地说，为了生成您提到的示例，请使用以下提示：

*   在 Root.plist 下的设置包中添加一个新的类型标题
*   将标题值设置为“版本”
*   在同一项目中添加一个新行并将其设置为“默认值”
*   将默认值设置为“1.1.1”

这将生成一个不可编辑的文本字段，左侧为标题值，右侧为默认值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T17:54:13.030

而不是选择 TextField 使用 Title

# javascript - javascript文件何时链接到rails视图？

> ID：10725098
> 
> 赞同：0
> 
> 时间：2012-05-23T17:38:49.683
> 
> 标签：javascript, ruby-on-rails

在我的 rails 应用程序中，在 assets/javascripts 的一个 javascript 文件中，第一行是 `console.log("This javascript file is included")`. 在我的 application.html 中，我将其包含在头部之后：

```
<script type = "text/javascript">
console.log("Logging from the application.html")
</script> 
```

我没有在我的任何视图中明确包含 javascript 文件，但控制台会打印：

```
This javascript file is included.
Logging from the application.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:00:18.393

你的 application.js 可能看起来像：

//= 要求树。

“require_tree 指令告诉 Sprockets 以递归方式将指定目录中的所有 JavaScript 文件包含到输出中。这些路径必须相对于清单文件指定。您也可以使用 require_directory 指令，该指令仅包含指定目录中的所有 JavaScript 文件，而无需递归。”

[http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:58:22.653

听起来您`<% javascript_include_tag :all %>`在其中一个视图或布局中，这会导致`public/javascripts`包含所有文件。[文档在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/AssetTagHelper/JavascriptTagHelpers.html#method-i-javascript_include_tag)。

有问题的文件也可能已添加到`config.action_view.javascript_expansions[:defaults]`in `config/application.rb`，如果您有某个地方，这将导致它被加载`<% javascript_include_tag :defaults %>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:02:05.943

您的 layout/application.html.erb 是您的任何视图的基础（请参阅 yield 指令）。在任何视图（任何 controller#method 调用）上，rails 都会在 yield 中渲染当前视图文件的布局。很明显，js`"Logging from the application.html"`在每个刷新页面（不是 AJAX）上运行。

关于包含外部 JS，见上一篇。如果您想获取特定于页面的 js，请阅读[在 Rails 3 应用程序中添加特定于页面的 javascript 的最佳方式？](https://stackoverflow.com/questions/3437585/best-way-to-add-page-specific-javascript-in-a-rails-3-app)

# ms-access - Access 2010 字符串比较无效的过程调用

> ID：10725100
> 
> 赞同：1
> 
> 时间：2012-05-23T17:39:12.073
> 
> 标签：ms-access, ms-access-2010

我们刚刚从 Access 2003 升级到 Access 2010，当使用默认条件时，字符串比较失败并出现无效的过程调用错误。我在一个只包含默认表的新 Access 2007 格式数据库中重新创建了两个可能相关的问题，一个带有下面 SQL 的查询和一个只包含下面代码的模块，所以我严重怀疑这是一个损坏问题。首先，以下子在 If Then 行上失败并出现运行时错误 5：无效的过程调用或参数

```
Option Compare Database
Option Explicit
Sub checkStrCmp()
     Dim str As String
     str = "s"
     If str = "s" Then
         MsgBox "works"
     End If
End Sub 
```

如果我将 Option Compare Database 更改为 Option Compare Text，则 sub 按预期工作，但这似乎是个坏主意，因为我可能想在单个 sub 中执行文本和数字比较。

我还在 SQL 中的字符串比较函数中收到“无效的过程调用”错误。Replace 函数需要所谓的可选比较参数。

```
Select replace("foo-bar-baz", "-", "|", 1,-1); 
```

生成“无效的过程调用”错误

将 compare 参数设置为任何可用值 (0 -3) 可以按预期工作：

```
SELECT replace("foo-bar-baz", "-", "|", 1,-1, 0); 
```

产生“foo|bar|baz”</p>

有没有其他人看过这个？是否有需要调整的设置？除了“数据库损坏”之外的任何其他想法，我都可以通过谷歌找到。TIA

为草率的代码块道歉，我一辈子都无法让它们正常工作。

**更新：** 我应该提到我正在运行 XP Pro sp3。

这个问题似乎仅限于我在我的盒子上创建的数据库。当我从我们网络上的其他工作站打开我在我的盒子上创建的测试数据库时，我看到了这个问题，但是在这些工作站上创建如上所述的新数据库时无法重新创建它。我在另外两个工作站上创建的数据库（安装了相同的操作系统和 MS Office 版本）在我的机器上打开时也可以正常工作。当我从我的机器将新模块插入这些数据库时，我也无法重新创建该问题。

简而言之，这个问题似乎只存在于我的机器上创建的数据库中（在旧的 2003 格式数据库中，我已在我的机器上转换为 2007 格式）。我最好的猜测是，我的安装已经失败，但我想知道如何以及为什么在我向 IT 部门提出重新安装 Office 的请求之前。我还想排除与我盒子上其他软件的冲突。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:13:58.957

您的代码模块并不都需要共享相同的`Option Compare`设置。因此，您可以将那些应该使用文本比较的过程放置`Option Compare Text`在其声明部分中的模块中。

但是，我不明白您的说法，“*我可能想在单个子项中执行文本和数字比较。* ”根据 Access 的帮助主题，`Option Compare Statement`“*在模块级别使用”来声明要使用的默认比较方法当比较字符串数据时*“。换句话说，`Option Compare`对数值的比较没有影响。

**编辑**：由于问题仅限`Option Compare Database`于仅在一台机器上创建的数据库文件，我建议您在该机器上检查 Access 的“新数据库排序顺序”设置。如果设置为其他任何内容，请将其更改为以“常规”开头的选项。然后新建一个数据库，看看是否还有问题。

此建议的原因是`Option Compare Database`告诉 Access 使用数据库的代码页设置进行排序。并且“新数据库排序顺序”可以将代码页设置为永远不会给我带来麻烦的代码页。但是，我对代码页细节的理解很肤浅；我从不改变它，也不知道其他设置的后果是什么。

# vb6 - 如何正确地将字节数组的内容写入 VB6 中的文件？

> ID：10725102
> 
> 赞同：1
> 
> 时间：2012-05-23T17:39:14.897
> 
> 标签：vb6

我有一个变量声明如下 -

```
Public CA() As Byte 
```

当我想将其内容写入文件时，我执行以下操作 -

```
myStr = StrConv(CA, vbUnicode)        
intFileHandle = FreeFile
Open "myFile.txt" For Output As #intFileHandle
Print #intFileHandle, myStr
Close #intFileHandle 
```

但是，我不确定这是否是正确的方法。您能否推荐一种将字节数组的内容写入文件的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T22:31:48.467

```
fnum = FreeFile
Open "myFile.txt" For Binary As #fnum
Put #fnum, 1, CA
Close fnum 
```

# php - PHP 插入 MYSQL 表单

> ID：10725106
> 
> 赞同：0
> 
> 时间：2012-05-23T17:39:44.213
> 
> 标签：php, mysql

你好，我的第一个 php 项目有问题，我正在做这个项目来教我自己一点。所以我在这里做了一个表格是代码：

**vpis.html**

```
<html>
    <head>
        <title>Php-Web Page - Input</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <div id="glava">
            <center>Php Spletna Stran</center>
            <hr/>
        </div>

        <div id="menu">
            <center>
                <a href="index.php">NAZAJ</a>
                <a href="bris.html">BRISANJE</a>
            </center>
            <hr/>
        </div>

        <div id ="vsebina">

            <div div="vpisigr">
                <form action="insert.php" method="post">
                    Vpisovanje igralca<br/>
                    ID:<input type="text" name="pid" size="20"/><br/>
                    Ime:<input type="text" name="pime" size="20"/><br/>
                    Priimek:<input type="text" name="ppriimek" size="20"/><br/>
                    Starost:<input type="text" name="pstarost" size="20"/><br/>
                    Velikost:<input type="text" name="pvelikost" size="20"/><br/>
                    Polozaj:<input type="text" name="ppolozaj" size="20"/><br/>
                    ID Kluba:<input type="text" name="ppid" size="20"/><br/>
                    <input type="submit" value="Shrani"/>
                    <input type="reset" value="Reset"/>
                </form>
            </div>
        </div>

        <hr/>

        <div id="footer">
            <center>Vse pravice pridržane </center>
        </div>
    </body>
<html> 
```

所以在这里我要求用户输入所有数据以插入数据库。这是数据库的屏幕截图：

![数据库映像](../Images/86c9397ee77e868a57ef0fdc8d0d3a94.png)

这是**insert.php**，它被称为表单操作

```
<?php
header("Content-type: text/html; charset=utf-8");
$con = mysql_connect("localhost","username","pass");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("php", $con);
//hmmmm ne dela
$sql="INSERT INTO Igralec (iID, iIME, iPRIIMEK, iSTAROST, iVELIKOST, iPOLOZAJ, ID)
VALUES ('$_POST[pid]', '$_POST[pime]', '$_POST[ppriimek]', '$_POST[pstarost]', '$_POST[pvelikost]', '$_POST[ppolozaj]', '$_POST[ppid]')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

//die(print_r($_POST));
echo "Dodana je ena nova vrstica";

mysql_close($con);
?> 
```

问题是每次我提交数据时，它都会以 0--0-0-00 或类似的格式将错误数据写入数据库。但是在写入之前的数组中，它包含正确的数据，但不知何故它写入了数据库错误数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:48:47.430

试试这个作为你的查询：

```
$sql="INSERT INTO Igralec (iID, iIME, iPRIIMEK, iSTAROST, iVELIKOST, iPOLOZAJ, ID)
VALUES ('".$_POST['pid']."', '".$_POST['pime']."', '".$_POST['ppriimek']."', '".$_POST['pstarost']."', '".$_POST['pvelikost']."', '".$_POST['ppolozaj']."', '".$_POST['ppid']."')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:46:57.667

尝试将您的 $sql 变量编辑为此：

```
 $sql="INSERT INTO Igralec (iID, iIME, iPRIIMEK, iSTAROST, iVELIKOST, iPOLOZAJ, ID)
VALUES ('".$_POST[pid]."', '".$_POST[pime]."', '".$_POST[ppriimek]."', '".$_POST[pstarost]."', '".$_POST[pvelikost]."', '".$_POST[ppolozaj]."', '".$_POST[ppid]."')"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T18:02:59.567

在处理关联数组时，键就像字符串。

```
$_POST['ppolozaj'] 
```

您应该将变量放在大括号中，以便于解析。

```
$sql="INSERT INTO Igralec (iID, iIME, iPRIIMEK, iSTAROST, iVELIKOST, iPOLOZAJ, ID)
VALUES ('{$_POST['pid']}', '{$_POST['pime']}', '{$_POST['ppriimek']}', '{$_POST['pstarost']}', '{$_POST['pvelikost']}', '{$_POST['ppolozaj']}', '{$_POST['ppid']}')"; 
```

我知道这是出于学习目的。最好是现在学习最佳实践，而不是以后。此语句中有助于提高安全性的两件事是[sprintf](http://php.net/manual/en/function.sprintf.php)函数和[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)函数。

# c# - 将 wsdl Fedex 文件添加到 c# .Net

> ID：10725110
> 
> 赞同：1
> 
> 时间：2012-05-23T17:39:51.297
> 
> 标签：c#, asp.net, wsdl, fedex

我正在尝试开始使用 FedEx 网络服务并下载了 wsdl 文件。我不知道如何将其添加到项目中。MSDN 根本没有帮助。如果我尝试“添加引用”，它将不允许 .wsdl 文件，如果我尝试“添加服务引用”，它也将不允许 .wsdl 文件。我试图让 VS 找到 wsdl，以便我可以开始使用智能感知编写对 Web 服务的 SOAP 调用。我已经看到其他问题的答案是简单地“添加网络参考”，但这也不允许 wsdl 文件。

我知道有一种方法可以将 .wsdl 文件转换为 ac# class ，但也不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:49:32.367

添加网络参考就是这样。它读取 wsdl 并生成存根类

我刚刚在 VS2010 中尝试过这个。将 Java Web 服务的 WSDL 保存到磁盘。添加服务参考，然后单击高级，然后单击添加 Web 参考。

在出现的框中键入 file:// 然后单击绿色箭头和宾果游戏，找到并添加了 Web 服务。

如果 Visual Studio 无法识别 WSDL 可能无效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:51:53.153

为什么必须下载 WSDL 文件，为什么不在“添加 Web 引用”中给出 WSDL 文件的 URL？我在这里错过了什么吗？

# c - 将字符/宽字符附加到 c 字符串

> ID：10725114
> 
> 赞同：-1
> 
> 时间：2012-05-23T17:40:20.090
> 
> 标签：c

```
#ifndef UNICODE
#define UNICODE
#endif

#include <stdio.h>
#include <Windows.h>

int main(void)
{
   TCHAR greeting[50] = L"Hello world"; 
   TCHAR exclamation=L'!';

 //????

wprintf("%s",greeting);

return 0;
} 
```

应该怎么做，这样输出就会带有感叹号？指令 `greeting[wcslen(greeting)]=exclamation;` 用汉字完成数组的剩余部分。
PS。我只需要输出“greeting”变量，所以除了 of 之外的代码`//????`是不可更改的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:43:20.397

处有`greeting[wcslen(greeting)]`一个空终止符`L'\0'`，表示字符串的结尾。除此以外的任何内容都是未定义的（您的情况似乎是中文字符）。您需要做的是*将*这样的空终止符移动到数组中的下一个位置。

```
TCHAR greeting[50] = L"Hello world"; 
TCHAR exclamation=L'!';

greeting[wcslen(greeting)+1] = L'\0';        
greeting[wcslen(greeting)] = exclamation; 
```

请注意，您必须按该顺序执行此操作，否则`wcslen`会给出不同的（不确定的）值。如果您使用标准的附加功能，这将为您完成。

# sql - SSDT，如果我需要将相同的数据库部署到 SQL Server 2008 和 2012，是否需要不同的 dacpac？

> ID：10725120
> 
> 赞同：5
> 
> 时间：2012-05-23T17:40:39.530
> 
> 标签：sql, sql-server-2008, deployment, sql-server-2012, sql-server-data-tools

在将数据库项目转换为 SSDT 并升级到 SQL Server 2012 时，我需要部署脚本才能同时用于 SQL Server 2008 和 2012。

我`sqlpackage.exe /Action:Publish`用来部署最新的数据库位。

在 sqlproj 项目属性中，我确实看到了一个带有选项 2005/2008/2012 sql server的**目标平台下拉列表。**如果我更改此目标平台，它会生成不同的 dacpac 吗？每个sql server版本需要带两个版本的dacpac吗？

或者相同的 dacpac 是否适用于任何版本的 sql server？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-03T12:08:09.603

我知道这已经 11 个月大了，但是当您专门针对这种情况进行部署时，有一个选项 - AllowIncompatiblePlatform。

```
//Set Deployment Options
DacDeployOptions dacOptions = new DacDeployOptions();
dacOptions.AllowIncompatiblePlatform = true; 
```

如果不设置该选项，我可以将 2008 dac 部署到 sql2012，但如果我将 2012 dac 部署到 sql2008 会出错：

```
Microsoft.Data.Tools.Schema.Sql.Deployment.DeploymentCompatibilityException: 
A project which specifies SQL Server 2012 as the target platform cannot be published to SQL Server 2008. 
```

设置该选项意味着我不会收到此错误并且可以部署到以前的版本（我相信回到 2005 年）。注意您可能还需要将选项 TreatVerificationErrorsAsWarnings 设置为 true - YMMV。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T23:30:35.100

简短的回答是肯定的 - 不同的 DACPAC 用于不同的 SQL Server 版本。Bob Beuachemin 写了一篇关于 DAC Fx3.0 与 DAC 2.0的有用[博文](http://www.sqlskills.com/BLOGS/BOBB/category/SQL-Server-2012.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-31T17:50:16.157

从命令行使用`SqlPackage.exe`，使用`p:AllowIncompatiblePlatform`选项。仍然会显示警告，但会继续。这适用于从 SQL Server 2012 dacpac 到 SQL Sever 2008 R2。

```
SqlPackage.exe /Action:Publish 
   /SourceFile:"testdb.dacpac" 
   /TargetDatabaseName:testDb 
   /p:AllowIncompatiblePlatform=true
   /TargetServerName:"testserver" 
```

# perl - Perl - Spreadsheet::XLSX 引用工作簿中的特定工作表

> ID：10725122
> 
> 赞同：3
> 
> 时间：2012-05-23T17:40:41.447
> 
> 标签：perl

还在 Perl 中学习走路（爬行？）。

我有 Perl 代码，我基本上是在尝试遍历数组字符串并在我的工作簿中找到这些工作表（现在，我 100% 肯定会有一个工作簿中提供的名称的工作表）。$worksheet 变量似乎被分配给工作表就好了，基于

```
print $worksheet->(Name); 
```

测试线。然而，下一行

```
my $cell = $worksheet->get_cell(1,1); 
```

似乎没有设置单元格，因为以下行不打印单元格值（我知道这是为这种情况设置的）。我知道这一点，因为如果我注释掉“if ($cell)”

```
my $value = $cell->value() if ($cell); 
```

我得到错误：

```
Can't call method "value" on an undefined value at script.pl line 14 
```

完整代码在这里：

```
use strict;
use warnings;
use Spreadsheet::XLSX;

my $excel = Spreadsheet::XLSX -> new ('C:\Scott.xlsm',);
my @sheets = qw(Fund_Data GL_Data);

foreach my $sheet (@sheets) {
    my $worksheet = $excel->Worksheet($sheet);
    print $worksheet->{Name}, "\n"; #just a test to make it is being set to worksheet
    my $cell = $worksheet->get_cell(1,1);
    my $value = $cell->value() if ($cell);
    print $value, "\n" if ($value);
} 
```

我的结果很简单：

```
Fund_Data
GL_Data 
```

他们应该在什么时候

```
Fund_Data
you '--> (Range("A1").Value in Sheet("Fund_Data"))
GL_Data
me '--> (Range("A1").Value in Sheet("GL_Data")) 
```

另外，我构建上面代码的基础是下面的代码，这是经过试验和测试的。上面代码的主要区别是，我不是循环遍历每个工作表，而是尝试根据数组值分配我想要的工作表。

```
use strict;
use warnings;
use Spreadsheet::XLSX;

my $excel = Spreadsheet::XLSX -> new ('P:\VBA\Help\Book3.xlsx',);

foreach my $sheet (@{$excel -> {Worksheet}}) {
    printf("Sheet:  %s\n", $sheet->{Name});
    my $cell = $sheet->get_cell(2,1);
    my $value = $cell->value();
    printf("Cell value is: $value");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:32:43.760

根据上面@JackManey 的评论，我在 $Worksheet 上使用了 Data::Dumper 并得到以下结果（部分结果）：

```
$VAR1 = bless( {
                 'DefColWidth' => '8.43
                 'MinCol' => 0,
                 'MaxRow' => 25,
                 'MinRow' => 0,
                 'path' => 'worksheets/
                 'MaxCol' => 0,
                 'Name' => 'Fund_Data', 
```

'MinCol' => 0, 'MinRow' => 0，让我知道我的单元格引用是从零开始的。当我改变

```
my $cell = $worksheet->get_cell(1,1); 
```

到

```
my $cell = $worksheet->get_cell(0,0); 
```

我得到了我想要的结果！

我不仅回答了我的问题，而且还学习了一个很棒的内置 PERL 函数！

# mercurial - Mercurial，检查文件的特定版本之前是否存在于历史记录中？

> ID：10725123
> 
> 赞同：2
> 
> 时间：2012-05-23T17:40:42.740
> 
> 标签：mercurial, tortoisehg

为了稍微详细说明一下标题问题，有没有办法让 Mercurial 在存储库历史中搜索给定文件的特定版本，并显示包含该版本的所有修订（或仅显示最新修订）？

例如，假设当前的工作修订版是，比方说，`300`一个文件被恢复到早期版本（比如，修订版`200`）。我不知道这一点 - 我可以很容易地看到新文件与`300`版本“有多么不同”。我怎样才能找出它可以恢复到的所有可能的修订？

如果 Mercurial 本身无法做到这一点，还有其他工具可以做到吗？（乌龟HG？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:30:32.357

我*认为*hg 的任何内置功能都不可能做到这一点，但是您可以通过明智的 xargs 和 md5sum 应用程序获得类似的东西：

```
hg log --template "{rev}\\n" | xargs -I "{}" /bin/bash -c 'echo $(hg cat -r {} <filename> | md5sum) {}' 
```

这将为您提供带有修订号的 md5 校验和列表，当您对其进行排序时，它将为您提供文件的修订共享版本。

# python - 在字符串python中找到一个模式

> ID：10725124
> 
> 赞同：2
> 
> 时间：2012-05-23T17:40:51.823
> 
> 标签：python

我有一个非常嘈杂的字符串输入，我正在尝试清理它..

因此，嘈杂字符串的一部分可能类似于：

```
"big $price chair, 5x10" 
```

现在删除符号和其他东西就完成了！但我也想删除

```
 5x10 
```

为此，我这样做了：

```
 def remove_numerics(self,string):
    return ' '.join([term for term in string.split() if not term[0].isdigit()]) 
```

解决了这个案子

但如果我的字符串是：

```
 "big $price chair, x10" 
```

然后失败了？什么是解决这种情况的好pythonic方法。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T17:44:12.073

```
re.sub(r'\b[\dx]+\b', '', "big $price chair, 5x10") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T17:44:58.073

```
import re
new_string = re.sub(r', \d*x\d+', '', old_string) 
```

# crash - Erlang/OTP，如何在不崩溃的情况下发出应用程序启动错误信号

> ID：10725132
> 
> 赞同：2
> 
> 时间：2012-05-23T17:41:15.117
> 
> 标签：crash, erlang, erlang-otp

所以我有这个应用程序，它有一个进程，需要一些 gen_servers 在集群的其他地方存活。
如果它们启动它就可以工作，如果它们不是，我的 gen_server 在 init 中失败`{error,Reason}`，这会通过我的主管传播到我的应用程序`start`函数中。
问题是，如果我返回 {ok,Pid} 以外的任何内容，我会收到崩溃报告。

我的意图是以某种方式表明应用程序无法正常启动并且所有进程都已关闭，因此不应将应用程序视为处于活动状态，但是，我只能选择返回 {ok, self()}并查看我的应用程序未列出的`active`情况，或返回 {error, Error} 并查看它是如何崩溃的：

```
{gen_server,init_it,6},{proc_lib,init_p_do_apply,3}]}},{ancestors,[rtb_sup,<0.134.0>]},
{messages,[]},{links,[<0.135.0>]},{dictionary,[]},{trap_exit,false},{status,running},
{heap_size,377},{stack_size,24},{reductions,255}],[]]:\n" 
```

问题似乎比这更大，基本上没有办法告诉应用程序框架应用程序失败了。它可能看起来像是在 erlang 中处理的这些事情之一`let the process die`，但允许`{error, }`返回值`application:start`似乎是一个很好的权衡。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T04:55:45.537

应用程序随时都会崩溃，因此应用程序在启动时的依赖关系无法提供有用的动态崩溃信息。

之前看过部分`rabbitmq`项目源码，也是一个基于集群的程序。

我认为`rabbitmq`您遇到了您所说的类似问题，因为集群需要收集相关`nodes's`的应用程序“在线”信息`memory water highmark information`然后做出决定。

它的解决方案是

1.  将应用程序的第一个主进程注册到本地，在rabbitmq系统中名为“rabbit”，可以找到它是`rabbit.erl`file，在函数“start/2”中。

    `start(normal, []) -> case erts_version_check() of ok -> {ok, SupPid} = rabbit_sup:start_link(), true = register(rabbit, self()), print_banner(), [ok = run_boot_step(Step) || Step <- boot_steps()], io:format("~nbroker running~n"), {ok, SupPid}; Error -> Error end.`

2.  其他4个模块，`rabbit_node_monitor.erl, rabbit_memory_monitor.erl, vm_memory_monitor.erl, rabbit_alarm.erl`使用两种erlang技术，一个是监控进程以获取注册进程的“DOWN”消息，另一个是警报处理程序收集这些信息。

# android - 无法安装 ADT 插件

> ID：10725135
> 
> 赞同：1
> 
> 时间：2012-05-23T17:41:16.563
> 
> 标签：android, eclipse, adt

我按照这里的说明进行操作：http: [//developer.android.com/sdk/eclipse-adt.html#installing](http://developer.android.com/sdk/eclipse-adt.html#installing) 但安装冻结了，所以我停止了它并尝试重新安装。

该软件包未安装（即使在重新启动 Eclipse 之后），当我再次尝试执行此操作时，会出现重复的位置错误（当我尝试使用“ADT 插件”和“https://dl-ssl.google.xml”添加存储库时）。 com/android/eclipse/")

我该去哪里完成我中断的安装，或者删除我部分安装的？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:44:47.037

转到可用插件，然后删除 ADT 条目。尝试再次添加它并查看错误消息。您的 Eclipse 版本可能没有 ADT 具有的某些依赖项。如果可能，请获取错误消息并将其发布在此处。

转到安装新插件 -> 可用软件站点。

![在此处输入图像描述](../Images/8c8b878759ee6ae048f0fe48dd680151.png)

# ruby - Ruby正则表达式插值/字符类/全局变量语法冲突？

> ID：10725139
> 
> 赞同：5
> 
> 时间：2012-05-23T17:41:38.020
> 
> 标签：ruby, regex

为什么会出现这个错误？

```
 Regexp.new("[#$]")
    # => SyntaxError: (irb):1: syntax error, unexpected $undefined
    # => Regexp.new("[#$]")
    #              ^
    # (irb):1: unterminated string meets end of file
    #     from ~/.rvm/rubies/ruby-1.9.3-p194/bin/irb:1:in `<main>' 
```

这应该从字面上描述由单个`$`or组成的字符串子集。`#`而且，AFAIU [Ruby 的 Regexp 引擎](https://github.com/ruby/ruby/blob/trunk/doc/re.rdoc)，即使它们通常是元字符，也不需要在字符类`#`中`$` [进行转义。](http://ruby-doc.org/docs/ProgrammingRuby/html/language.html#UK)

我会从错误消息中猜出 Ruby 试图在双引号内进行插值，但是......为什么`$`？`#`订购很重要。和字符有多个重载行为`$`，`#`所以我不知道是什么触发了这个。

PS，仅供参考：

```
 /[#$]/
    # => SyntaxError: (irb):1: syntax error, unexpected $undefined
    /[$#]/
    # => /[$#]/
    Regexp.new '[$#]'
    # => /[$#]/
    Regexp.new '[#$]'
    # => /[#$]/
    Regexp.new "[#$]"
    # => SyntaxError: (irb):1: syntax error, unexpected $undefined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T18:01:10.957

问题不是`$`, 而是`#`，因为`#...`它通常用于双引号字符串中的变量扩展。喜欢`"#{x}"`。

但问题是你也可以直接使用扩展全局变量`#$global`，这就解释了你的问题：

```
$global = "hello"
"#$global"
=> "hello" 
```

所以解决方案是转义*or* `#` *，* `$`因为这将破坏字符串插值状态机，使其无法将构造解释为插值：

```
puts "\#$global"
=> #$global
puts "#\$global"
=> #$global 
```

**编辑**

只是为了说清楚:)问题不在于`Regexp`，而是您试图扩展一个`$]`在键入时命名的全局变量`"#$]"`：

```
puts "#$]"
SyntaxError: (irb):22: syntax error, unexpected $undefined 
```

要修复它，您需要逃避一些东西：

```
puts "\#$]"
=> #$] 
```

# javascript - 替代默认好友选择器？

> ID：10725142
> 
> 赞同：0
> 
> 时间：2012-05-23T17:41:41.747
> 
> 标签：javascript, facebook, facebook-javascript-sdk

FB好友选择器有替代版本吗？我注意到一些 FB 游戏使用的界面类似于我附在这篇文章中的界面。这是一个标准的 FB 选择器还是 FB 开发人员刚刚决定了一种风格并且都在互相借鉴？谢谢。![朋友选择器](../Images/c546adc307a0c66c10d74ab7403e202d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:53:02.323

您发布的对话框是许多应用程序包含在其应用程序中的自定义解决方案，
我不知道在哪里可以找到它，但您可以通过 Graph API 调用所有朋友来构建自己的解决方案，

或者你可以使用这样的东西：
[http ://www.emposha.com/javascript/fcbklistselection-like-facebook-friends-selector.html](http://www.emposha.com/javascript/fcbklistselection-like-facebook-friends-selector.html)
[http://www.emposha.com/javascript/fcbkcomplete.html](http://www.emposha.com/javascript/fcbkcomplete.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:33:26.323

我认为您已连接到该应用程序并且该应用程序有权读取您的好友列表以手动显示此类列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:35:22.963

这看起来像是一个旧的、已弃用的选择器，它发送旧样式的请求——这些是超级弃用的，很快就会被删除

当前唯一支持的方法是[请求对话框](https://developers.facebook.com/docs/reference/dialogs/requests/)，如下所示： ![在此处输入图像描述](../Images/f64bf4d061e1ba384ffcbd388d2d030e.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T11:24:29.233

您可以通过几个步骤创建自定义朋友选择器。

1.  调用 API 获取用户好友列表
2.  向用户显示列表并让他们选择他们想要邀请的朋友（您可以使用复选框或其他方法来执行此操作）。
3.  使用此处描述的单/多请求 JavaScript 函数发送请求：http: [//developers.facebook.com/docs/reference/dialogs/requests/#direct_request](http://developers.facebook.com/docs/reference/dialogs/requests/#direct_request)

这将让您根据需要显示朋友列表，但仍使用 API 正确发送请求。

# c++ - 如何求和和减去 char* 数字？

> ID：10725146
> 
> 赞同：1
> 
> 时间：2012-05-23T17:41:59.883
> 
> 标签：c++, pointers, operators, char

我的问题是我不知道如何对大量数字求和（如“172839023498234792834798237494”或“-172839023498234792834798237494”）。所以我做`char* m_value`了我将存储这种对象的地方。现在我想做的是做一些基本的算术运算。我应该先转换它还是使用类似的东西`itoa`？在我的情况下，除了 char* 之外没有其他选项来存储数字。

**主文件**

```
int main(int argc, char *argv[])
{
    LargeNumber l1;
    LargeNumber l3("172839023498234792834798237494"); 
    LargeNumber l7("-172839023498234792834798237494"); 

    l1 = l3 + l7;  //How to do it ?

    return 0;
} 
```

**大数.h**

```
class LargeNumber{

      public:
      LargeNumber(char* value):m_value(value)
      {}

      LargeNumber operator+(const LargeNumber&);
      private:
      char* m_value;
} 
```

**大数.cpp**

```
LargeNumber LargeNumber ::operator+(const LargeNumber &b)
{
        return LargeNumber ( ... );  //Sum both LargeNumber ???
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:48:52.623

您将需要使用大量的算术库。[GMP](http://gmplib.org/)是一个不错的选择。您的处理器本身无法对这种大小的数字执行操作，因此这些库在软件中为您处理所有老式数学。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T17:50:13.953

不要重新发明，你应该使用[BigInteger](https://mattmccutchen.net/bigint/)库。

无论如何，C 字符串并不是最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:51:49.103

我不使用字符串，而是将其作为 int（或 long）数组来执行。运算符的算法将与您手动执行的操作差不多。

# c# - 寻找两个标记之间的角度以用于数学优化

> ID：10725153
> 
> 赞同：0
> 
> 时间：2012-05-23T17:42:23.707
> 
> 标签：c#, math, geometry, computer-vision, mathematical-optimization

我正在尝试使用一组未知参数来最小化 3d 空间中的方形标记集之间的差异。

我有一组这些方形标记（由 3d 位置和旋转表示）的模型集，它应该在优化结束时与一组观察到的方形标记相匹配。

我正在使用[Levenberg-Marquardt](http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm) 优化未知参数集，这些参数将改变模型 3d 标记的位置和旋转，直到它们（或多或少）与观察到的 3d 标记位置匹配。

观察到的 3d 标记来自计算机视觉标记检测算法。它给出了每帧中看到的标记的 id 以及每个标记的相机转换（[使用 Coplanar posit](http://www.cfar.umd.edu/~daniel/daniel_papersfordownload/CoplanarPts.pdf)）。每个“帧”只能看到整个标记集中的少量标记，转换也会有不准确的地方。

我已经考虑过如何构建我的最小化函数，并且我想尝试比较相对旋转并最小化 LM 优化的每次迭代中旋转之间的差异。

*本质上：*

```
 foreach (Marker m1 in markers)
        {
            foreach (Marker m2 in markers)
            {
                Vector3 eulerRotation = getRotation(m1, m2);
                ObservedMarker observed1 = getMatchingObserved(m1);
                ObservedMarker observed2 = getMatchingObserved(m2);
                Vector3 eulerRotationObserved = getRotation(observed1, observed2);

                double diffX = Math.Abs(eulerRotation.X - eulerRotationObserved.X);
                double diffY = Math.Abs(eulerRotation.Y - eulerRotationObserved.Y);
                double diffZ = Math.Abs(eulerRotation.Z - eulerRotationObserved.Z);
            }
        } 
```

其中 diffX、diffY 和 diffZ 是要最小化的值。

我正在使用以下方法来计算角度：

```
Vector3 axis = Vector3.Cross(getNormal(m1), getNormal(m2));
axis.Normalize();
double angle = Math.Acos(Vector3.Dot(getNormal(m1), getNormal(m2)));
Vector3 modelRotation = calculateEulerAngle(axis, angle); 
```

getNormal(Marker m) 计算方形标记所在平面的法线。

我确定我在这里做错了什么。将这一切都投入 LM 优化器（我正在使用[ALGLib](http://www.alglib.net/)）似乎没有做任何事情，它经历了 1 次迭代并在不更改任何未知参数的情况下完成（最初全部为 0）。

我认为我试图最小化的功能有问题。有时计算的角度（第 3 行）似乎返回 NaN（我目前将这种情况设置为返回 diffX、diffY、diffZ 为 0）。如上所述比较欧拉角是否有效？

任何帮助将不胜感激。

**更多信息：**

*   程序是用 C# 编写的，我也在使用 XNA。
*   模型标记由 3D 坐标中的四个角表示
*   所有模型标记都在同一个坐标空间中。
*   观察到的标记是四个角，作为相机坐标空间中相机位置的平移
*   如果 m1 和 m2 标记是相同的标记 id，或者如果没有观察到 m1 或 m2，我将所有差异设置为 0（无差异）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:06:25.037

起初我认为这可能是一个错字，但后来我意识到这可能是一个错误，我过去曾是类似案例的受害者。

diffY 和 diffZ 不应该是：

```
double diffY = Math.Abs(eulerRotation.Y - eulerRotationObserved.Y);
double diffZ = Math.Abs(eulerRotation.Z - eulerRotationObserved.Z); 
```

我没有足够的声誉将其发布为评论，因此将其发布为答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:04:58.790

这有什么好运气吗？假设您想最小化所有标记组合上所有差异的“总和”是否正确？我认为如果你想使用 LM 你不应该使用`Math.Abs`.

一种替代方法是手动制定目标函数并使用另一个优化器。我最近将两个非线性优化器移植到 C#，它们甚至不需要计算导数：

*   [COBYLA2](https://github.com/cureos/cscobyla)，支持非线性约束，但需要更多迭代。
*   [BOBYQA](https://github.com/cureos/csbobyqa)，仅限于可变边界约束，但提供了相当有效的迭代方案。

# c# - 如何通过设置容器控件依赖属性来修改内部控件属性？

> ID：10725160
> 
> 赞同：0
> 
> 时间：2012-05-23T17:43:26.700
> 
> 标签：c#, wpf, properties, wpf-controls

我正在 WPF 中创建一个控件，该控件具有一个标签，并且我创建了一个依赖属性以修改标签的可见性属性。

我的问题是我找不到在分配依赖属性的同时更改标签的可见性属性的方法。

我的代码如下：

```
public static readonly DependencyProperty captionVisibleProperty = DependencyProperty.Register(
                                                                            "CaptionVisible",
                                                                            typeof(bool),
                                                                            typeof(MyCustomControl));

    public bool CaptionVisible
    {
        get
        {
            return (bool)GetValue(captionVisibleProperty);
        }
        set
        {
            SetValue(captionVisibleProperty, value);
            ShowCaption();
        }
    }

    private void ShowCaption()
    {
        if (CaptionVisible)
        {
            captionLabel.Visibility = System.Windows.Visibility.Visible;
        }
        else
        {
            captionLabel.Visibility = System.Windows.Visibility.Collapsed;
        }
    } 
```

如您所见，我尝试在设置属性时调用 ShowCaption() 方法，但没有任何反应。

那么，我应该怎么做才能完成它？

希望可以有人帮帮我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:56:08.363

`ShowCaption()`不应该。相反，只需将标签的`Visibility`属性绑定到您`CaptionVisible`在 xaml 中的属性。最好遵循[Model-View-ViewModel](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)设计模式来保持您的代码井井有条。这意味着将用于控制用户界面（视图）的逻辑放在单独的 ViewModel 类中，然后将 ViewModel 分配给该 View 的`DataContext`属性。

这将使绑定更容易。在 WPF 中引用属于用户界面元素的属性有时会有点麻烦。按照约定，WPF 的绑定系统是专门设计用于轻松获取用户界面元素的`DataContext`.

您还需要使用方便的花花公子`BooleanToVisiblityConverter`来进行绑定，因为`Visibility`属性的类型不是`bool`. 我喜欢把它放在窗口（或控件）的资源字典中以便于访问：

```
<Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
</Window.Resources>

<Label Visibility="{Binding Path=CaptionVisible, 
                            Converter={StaticResource BooleanToVisibilityConverter}}"> 
    <!-- label content -->
</Label> 
```

附带说明一下，除非 CaptionVisible 将成为绑定的*目标*，否则将其作为依赖属性是矫枉过正的。在此绑定中，它只是源，因此只需实现`INotifyPropertyChanged`就足够了：

```
class MyViewModel : INotifyPropertyChanged
{

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }

    private bool _captionVisible;
    public bool CaptionVisible
    {
        get { return _captionVisible; }
        set
        {
            if(_captionVisible != value)
            {
                _captionVisible = value;
                RaisePropertyChanged("CaptionVisible");
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:07:29.627

我找到了解决这个问题的方法：

如果您需要将嵌套控件依赖属性链接到容器控件依赖属性，您可以执行以下操作：

```
 public static readonly DependencyProperty captionLabelVisibilityProperty = DependencyProperty.Register(
                                                                                    "CaptionVisibility",
                                                                                    typeof(Visibility),
                                                                                    typeof(MyContainerControl),
                                                                                    new FrameworkPropertyMetadata(
                                                                                        VisibilityPropertyChangedCallback));

    public Visibility CaptionVisibility
    {
        get
        { return (Visibility)GetValue(captionLabelVisibilityProperty); }

        set
        { SetValue(captionLabelVisibilityProperty, value); }
    }

    private static void VisibilityPropertyChangedCallback(DependencyObject controlInstance, DependencyPropertyChangedEventArgs args)
    {
        MyContainerControl myContainerControlInstance = (MyContainerControl)controlInstance;
        myContainerControlInstance.myLabel.Visibility = (Visibility)args.NewValue;
    } 
```

# regex - 正则表达式匹配 1 但不匹配 10、11、12 等或 21、31 等

> ID：10725168
> 
> 赞同：2
> 
> 时间：2012-05-23T17:44:02.197
> 
> 标签：regex

我正在尝试找到合适的正则表达式来匹配：

`?page=1`

但我不想匹配`?page=10`or `?page=11`or `?page=12`..etc`?page=19`

而且我不想匹配`?page=21`或`?page=31`...等

我只想能够匹配`?page=1`

我已经尝试过`?page=1[^0123456789]` ，但它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:48:11.287

page=2 可以吗？如果不是，我不明白你为什么要使用正则表达式。使用 substr/strpos/strcmp 等效函数会更合适。

在这些示例中，我假设这`?page=1`是字符串的结尾。

如果 page=(a number from 0 to 9) 可以，你需要使用`\?page=\d$`( `\d means "a digit"`)

如果页面应该只有 1，那么它是`\?page=1$`

`$ = End of string`

问题是`?`在正则表达式中有特殊含义，需要转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:45:24.187

你需要逃脱`?`：

```
\?page=1 
```

[**javascript 中的演示**](http://jsfiddle.net/SgsYd/)。

如果您只想匹配这是其值的字符串：

```
^\?page=1$ // '^'- starts with ...  '$' - ends with... 
```

如果您想要任何一位数字，而不仅仅是`1`：

```
^\?page=\d$
\?page=\d // Or this 
```

# php - 解析网站图标位置的策略？

> ID：10725175
> 
> 赞同：1
> 
> 时间：2012-05-23T17:44:40.500
> 
> 标签：php

**链接到**

```
No link...Use default location.
http://www.linkedin.com/favicon.ico 
```

**推特**

```
 <link href="/phoenix/favicon.ico" rel="shortcut icon" type="image/x-icon" /> 
```

**Pinterest**

```
<link rel="icon" href="http://passets-cdn.pinterest.com/images/favicon.png" type="image/x-icon" /> 
```

**Facebook**

```
<link rel="shortcut icon" href="https://s-static.ak.facebook.com/rsrc.php/yi/r/q9U99v3_saj.ico" /> 
```

我已经确定，找到一个网站图标的唯一 100% 方法是检查源并查看链接在哪里。

*   并不总是使用默认位置。注意前两个例子。
*   Google API 仅在大约 85% 的时间内工作。 [试试看](http://www.google.com/s2/favicons?domain=%27path.com%27)

是否有可以解析此信息的功能？或者是否有使用正则表达式手动将其拉出的好策略。

我将解析 html 服务器端以获取此信息。

**想法：**

正则表达式示例：[在这里尝试](http://regexpal.com/)。似乎很容易......但这是一个起点。

```
<link\srel="[Ss]hortcut [Ii]con"\shref="(.+)"(.+)> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:01:42.400

使用解析器：

```
$dom = new DOMDocument();
@$dom->loadHTML($input);
$links = $dom->getElementsByTagName('link');
$l = $links->length;
$favicon = "/favicon.ico";
for( $i=0; $i<$l; $i++) {
    $item = $links->item($i);
    if( strcasecmp($item->getAttribute("rel"),"shortcut icon") === 0) {
        $favicon = $item->getAttribute("href");
        break;
    }
}
// You now have your $favicon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:07:23.063

PHP 5 DOMDocument 的替代方案：原始正则表达式

到目前为止，这适用于所有情况。

```
 $pattern = '#<link\s+(?=[^>]*rel="(?:shortcut\s)?icon"\s+)(?:[^>]*href="(.+?)").*>#i'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T18:25:55.227

您将不得不解决几个问题，例如站点重定向和各种警告。以下是我为收获 90% 的网站提供 favicon 所做的工作：

```
<?
/*
  nws-favicon : Get site's favicon using various strategies

  This script is part of NWS
  https://github.com/xaccrocheur/nws/

*/

function CheckImageExists($imgUrl) {
    if (@GetImageSize($imgUrl)) {
        return true;
    } else {
        return false;
    };
};

function getFavicon ($url) {

$fallback_favicon = "/var/www/favicon.ico";

    $dom = new DOMDocument();
    @$dom->loadHTML($url);
    $links = $dom->getElementsByTagName('link');
    $l = $links->length;
    $favicon = "/favicon.ico";
    for( $i=0; $i<$l; $i++) {
        $item = $links->item($i);
        if( strcasecmp($item->getAttribute("rel"),"shortcut icon") === 0) {
            $favicon = $item->getAttribute("href");
            break;
        }
    }

    $u = parse_url($url);

    $subs = explode( '.', $u['host']);
    $domain = $subs[count($subs) -2].'.'.$subs[count($subs) -1];

    $file = "http://".$domain."/favicon.ico";
    $file_headers = @get_headers($file);

    if($file_headers[0] == 'HTTP/1.1 404 Not Found' || $file_headers[0] == 'HTTP/1.1 404 NOT FOUND' || $file_headers[0] == 'HTTP/1.1 301 Moved Permanently') {

        $fileContent = @file_get_contents("http://".$domain);

        $dom = @DOMDocument::loadHTML($fileContent);
        $xpath = new DOMXpath($dom);

        $elements = $xpath->query("head/link//@href");

        $hrefs = array();

        foreach ($elements as $link) {
            $hrefs[] = $link->value;
        }

        $found_favicon = array();
        foreach ( $hrefs as $key => $value ) {
            if( substr_count($value, 'favicon.ico') > 0 ) {
                $found_favicon[] = $value;
                $icon_key = $key;
            }
        }

        $found_http = array();
        foreach ( $found_favicon as $key => $value ) {
            if( substr_count($value, 'http') > 0 ) {
                $found_http[] = $value;
                $favicon = $hrefs[$icon_key];
                $method = "xpath";
            } else {
                $favicon = $domain.$hrefs[$icon_key];
                if (substr($favicon, 0, 4) != 'http') {
                    $favicon = 'http://' . $favicon;
                    $method = "xpath+http";
                }
            }
        }

        if (isset($favicon)) {
            if (!CheckImageExists($favicon)) {
                $favicon = $fallback_favicon;
                $method = "fallback";
            }
        } else {
            $favicon = $fallback_favicon;
            $method = "fallback";
        }

    } else {
        $favicon = $file;
        $method = "classic";

        if (!CheckImageExists($file)) {
            $favicon = $fallback_favicon;
            $method = "fallback";
        }

    }
    return $favicon;
}

?> 
```

# ios - zipArchive 解压到 iOS 上的文档文件夹

> ID：10725176
> 
> 赞同：2
> 
> 时间：2012-05-23T17:44:41.527
> 
> 标签：ios, unzip, ziparchive

我正在使用 ZipArchive 解压缩，但它会将 zip 的内容解压缩到以 zip 文件命名的文档的子目录中，而不是直接解压缩到我的文档文件夹中。有谁知道我可以更改什么以确保将其保存到我想要的目录中？

```
-(void) unZipUpdateArchiveAtPath: (NSString *)zipPath {
NSLog(@"UNZIP Update PATH: %@", zipPath);
ZipArchive *zipArchive = [[ZipArchive alloc] init];
if ([zipArchive UnzipOpenFile:zipPath])
{
    if ([zipArchive UnzipFileTo:[self documentDirectory]  overWrite:YES])
    {
        NSLog(@"Archive unzip success");
        [zipArchive UnzipCloseFile];
    }
    else
    {
        NSLog(@"Failure to unzip archive");
    }
}
else
{
    NSLog(@"Failure to open archive");
}
}

#pragma mark - Application's Documents directory
-(NSString *)documentDirectory
{
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
    NSString *documentDirectory = [documentDirectories objectAtIndex:0];
    NSLog(@"docDirectory IS  %@", documentDirectory);
    return documentDirectory;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T20:38:52.993

您需要将自定义路径附加到文档目录。

```
[zipArchive UnzipFileTo:[[self documentDirectory] stringByAppendingPathComponent:@"My folder"] overWrite:YES]; 
```

# android - 如何为 android 制作 Instagram 动作栏样式？

> ID：10725180
> 
> 赞同：1
> 
> 时间：2012-05-23T17:45:03.767
> 
> 标签：android, android-actionbar, instagram

我知道如何制作渐变和徽标。但我不知道如何添加所有不同的边框以及如何添加刷新图标（它周围也有一些自定义边框）。

Instagram 操作栏：
![http://img155.imageshack.us/img155/1738/instagramactionbar.png](../Images/3b50ca2bd638236fca0fd844eceab90f.png)

这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:56:41.740

您可以通过使用具有 2 个子项的水平 LinearLayout 来实现，左侧列带有徽标，右侧列带有刷新按钮。您可以使用 Shape XML 创建背景可绘制对象：

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:01:14.027

我会查看提供的[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)和[ActionBarCompat](http://developer.android.com/resources/samples/ActionBarCompat/index.html)。它具有用于制作基本动作条和复杂动作条的钩子。

# c++ - 发送数据问题 TCP/IP

> ID：10725184
> 
> 赞同：0
> 
> 时间：2012-05-23T17:45:19.570
> 
> 标签：c++, tcp

```
//------------------------------
    //creating dynamic array to send
    std::list<char> list;
    char in=NULL;
    while(1)
    {
        scanf("%c",&in);
        if(in=='\n') break;
        list.push_back(in);
    }
    //char *sendbuf=NULL;
    char* sendbuf=new char[list.size()]; // create a dynamic array   

        std::copy(list.begin(),list.end(),sendbuf); // copy the data 
        //sendbuf=array;
        iResult_send = send( ConnectSocket, sendbuf, (int)strlen(sendbuf), 0 );
        delete [] sendbuf; // destroy the dynamic array
        list.clear();
}
//------------------------------------------- 
```

大家好，我正在尝试通过我正在创建的动态数组向客户端发送数据。当我使用静态数组 char 类型发送数据时，客户端得到它就好了。但是当我这样发送时，他在消息后会收到很多垃圾。我的阵列有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:52:12.380

`iResult_send = send( ConnectSocket, sendbuf,` **(int)strlen(sendbuf)**`, 0 );`

消息大小确定是错误的。尝试对它使用 list.size() 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:00:35.087

问题是：您的数据不是以空值结尾的，因此 strlen() 不会产生正确的大小。（大概是一种实现大价值的方法）。

正确的是：

```
 iResult_send = send( ConnectSocket, sendbuf, sizeof(char) * list.size(), 0 ); 
```

顺便说一句：你可以省略

```
 list.clear(); 
    } 
```

变量在块的末尾被破坏。

# objective-c - 特定格式的 NSString 到 NSDate 转换

> ID：10725187
> 
> 赞同：2
> 
> 时间：2012-05-23T17:45:46.850
> 
> 标签：objective-c, ios, nsstring, nsdate

我收到以下格式的 NSString(s)：

```
2013-05-18T17:37:06.9419518Z 
```

如何正确将日期转换为 NSDate，以便可以将其与包含当前日期/时间的另一个 NSDate 进行比较

这就是我现在所拥有的：

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

        [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSSZ"];

        NSDate *dateFromString = [[NSDate alloc] init];
        dateFromString = [dateFormatter dateFromString:extractString];

        NSLog (@"dateFromString: %@", dateFromString);

        [dateFormatter release];
        [dateFromString release]; 
```

但我在日志中得到一个（空）输出

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:57:54.980

如果“Z”在您的时间结束时是一个常数，那么您需要将它放在日期格式的单引号中。

```
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSSSSSS'Z'"]; 
```

# java - 如何在 Android jni 中释放字符串？

> ID：10725189
> 
> 赞同：1
> 
> 时间：2012-05-23T17:45:52.027
> 
> 标签：java, android, cordova, java-native-interface

我看到很多关于 Android Jni 的帖子，但我仍然不清楚如何编辑它。我有一个 Phonegap 应用程序在加载某个页面时出现 JNI 错误。

根据我在研究期间阅读的内容，我需要释放本地存储。我该怎么做，我想知道。

我所看到的只是去做，但没有真正明确的路径。

如果您要发布 localRef 字符串或创建 globalRef 字符串，您会怎么做？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:06:01.693

因此，您已经创建了 512 个本地引用，还需要创建更多。`DeleteLocalRef()`如果这在您的代码中有意义，您要么必须通过 via 释放您已经创建的一些插槽，要么通过 via`EnsureLocalCapacity()`或请求更多本地插槽`PushLocalFrame()`。我更喜欢后者与`PopLocalFrame()`: 许多编码模式适合它，也许是你的。

# spring - 从 Spring 自动装配中排除子包？

> ID：10725192
> 
> 赞同：93
> 
> 时间：2012-05-23T17:46:05.677
> 
> 标签：spring, autowired

有没有一种简单的方法可以在 Spring 3.1 中从自动装配中排除包/子包？

例如，如果我想包含一个带有基本包的组件扫描，`com.example`是否有一种简单的排除方法`com.example.ignore`？

（为什么？我想从我的集成测试中排除一些组件）

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-23T18:11:01.920

我不确定您是否可以使用 <exclude-filter> 显式排除软件包，但我敢打赌，使用正则表达式过滤器可以有效地将您带到那里：

```
 <context:component-scan base-package="com.example">
    <context:exclude-filter type="regex" expression="com\.example\.ignore\..*"/>
 </context:component-scan> 
```

要使其基于注释，您需要使用@com.example.annotation.ExcludedFromITests 之类的内容来注释您希望排除在集成测试中的每个类。然后组件扫描将如下所示：

```
 <context:component-scan base-package="com.example">
    <context:exclude-filter type="annotation" expression="com.example.annotation.ExcludedFromITests"/>
 </context:component-scan> 
```

这更清楚了，因为现在您已经在源代码本身中记录了该类不打算包含在集成测试的应用程序上下文中。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2015-05-12T19:27:29.703

对于相同的用例，我使用`@ComponentScan`如下。这与[BenSchro10 的](https://stackoverflow.com/users/1403498/benschro10)XML 答案相同，但它使用注释。两者都使用过滤器`type=AspectJ`

```
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;
import org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration;
import org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration;
import org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.FilterType;
import org.springframework.context.annotation.ImportResource;

@SpringBootApplication
@EnableAutoConfiguration
@ComponentScan(basePackages = { "com.example" },
    excludeFilters = @ComponentScan.Filter(type = FilterType.ASPECTJ, pattern = "com.example.ignore.*"))
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
} 
```

* * *

## 回答 #3

> 赞同：46
> 
> 时间：2017-01-11T11:19:14.973

对于**Spring 4**，我使用以下内容
（我发布它是因为问题是 4 岁，使用 Spring 4 的人多于 Spring 3.1）：

```
@Configuration
@ComponentScan(basePackages = "com.example", 
  excludeFilters = @Filter(type=FilterType.REGEX,pattern="com\\.example\\.ignore\\..*")) 
public class RootConfig {
    // ...
} 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-08-10T18:47:26.450

看来您已经通过 XML 完成了这项工作，但如果您使用新的 Spring 最佳实践，您的配置将使用 Java，您可以将它们排除在外：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "net.example.tool",
  excludeFilters = {@ComponentScan.Filter(
    type = FilterType.ASSIGNABLE_TYPE,
    value = {JPAConfiguration.class, SecurityConfig.class})
  }) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-05-23T18:05:55.780

这适用于 Spring 3.0.5。所以，我认为它会在 3.1 中工作

```
<context:component-scan base-package="com.example">  
    <context:exclude-filter type="aspectj" expression="com.example.dontscanme.*" />  
</context:component-scan> 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-05-23T18:10:36.267

我认为您应该以更方便的层次结构重构您的包，因此它们不在基本包中。

但是，如果您不能这样做，请尝试：

```
<context:component-scan base-package="com.example">
    ...
    <context:exclude-filter type="regex" expression="com\.example\.ignore.*"/>
</context:component-scan> 
```

在这里您可以找到更多示例：[使用过滤器自定义扫描](http://docs.spring.io/spring/docs/current/spring-framework-reference/htmlsingle/#beans-scanning-filters)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-04-27T14:28:05.140

似乎对我有用的一件事是：

```
@ComponentScan(basePackageClasses = {SomeTypeInYourPackage.class}, resourcePattern = "*.class") 
```

或者在 XML 中：

```
<context:component-scan base-package="com.example" resource-pattern="*.class"/> 
```

这会覆盖默认值`resourcePattern`，即`"**/*.class"`.

这似乎是仅包含您的基本包的最安全的方法，因为该 resourcePattern 将始终相同并且相对于您的基本包。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-09T15:20:23.013

您还可以使用[**@SpringBootApplication**](https://docs.spring.io/spring-boot/docs/current/reference/html/using-boot-using-springbootapplication-annotation.html)，根据 Spring 文档，它与以下三个注解具有相同的功能： **@Configuration**， @ **EnableAutoConfiguration** **@ComponentScan** 在一个注解中。

```
@SpringBootApplication(exclude= {Foo.class})
public class MySpringConfiguration {} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-23T20:15:05.060

您还可以包含特定的包并排除它们，例如：

**包括和排除（两者）**

```
 @SpringBootApplication
        (
                scanBasePackages = {
                        "com.package1",
                        "com.package2"
                },
                exclude = {org.springframework.boot.sample.class}
        ) 
```

**只是排除**

```
@SpringBootApplication(exclude= {com.package1.class})
public class MySpringConfiguration {} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-08-12T06:42:21.250

只是对现有答案的补充。
如果要从子包中排除类而不是从基础包中排除类，则可以`"com.example.ignore.*`更改`"com.example.ignore.*..*"`如下

在 spring-boot 中验证了这一点：2.4.1

[从这个](https://stackoverflow.com/a/30199808/2987755)答案中获取代码片段

```
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.EnableAutoConfiguration;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration;
import org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration;
import org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration;
import org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.FilterType;
import org.springframework.context.annotation.ImportResource;

@SpringBootApplication
@EnableAutoConfiguration
@ComponentScan(basePackages = { "com.example" },
    excludeFilters = @ComponentScan.Filter(type = FilterType.ASPECTJ, pattern = "com.example.ignore.*..*"))
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }
} 
```

# cuda - CUDA 线程执行顺序

> ID：10725197
> 
> 赞同：2
> 
> 时间：2012-05-23T17:46:16.100
> 
> 标签：cuda

> 在 CUDA 中，当我们谈论执行相同代码的并行线程时，它们的执行有什么顺序吗？

## 例如：

如果，我有 4 个线程，对于 4 个元素的一维数组。所有四个线程都对数组的某个索引执行一些操作。线程 4 是否总是在线程 3 之后执行，或者执行过程中没有特定的顺序？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T17:55:50.970

通常，线程执行没有顺序。依赖设计算法的线程顺序是错误的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:00:43.313

线程的执行没有确定的顺序，如果您需要特定的顺序，那么您应该按顺序对其进行编程，而不是使用并行执行模型。

不过，关于线程执行有*一些话*可以说。在 CUDA 的执行模型中，线程被分组在“warp”中。根据底层设备的计算能力，每个扭曲（或半扭曲）是同时执行的——实际上是同时执行。执行继续进行，直到代码由于等待内存转移而锁定，并且计划运行另一个扭曲（或半扭曲）。

但是，文档非常具体地说明了您可以对此事做出哪些假设：您拥有的最佳执行障碍是内核调用结束。

# ios - 子视图访问superview

> ID：10725198
> 
> 赞同：1
> 
> 时间：2012-05-23T17:46:20.667
> 
> 标签：ios, uiview, uiscrollview, superview

我有一个带有内容视图的滚动视图，最后是内容视图的子视图。我想停止`[scrollView scrollEnabled:NO]`从子视图滚动。我可以了解方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:50:32.453

我面前没有 Xcode，但你不能`self.superview`从你的子视图代码中获得超级视图吗？

例如，像这样：

```
[subview.superview scrollEnabled:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T17:50:46.963

停止`[scrollView scrollEnabled:NO]`从子视图滚动？也许您需要一个控制视图的 viewController。你清楚MVC吗？

# lisp - 第一个更大的（常见的）lisp 程序 -> 'random' 没有按预期工作

> ID：10725200
> 
> 赞同：1
> 
> 时间：2012-05-23T17:46:37.657
> 
> 标签：lisp, common-lisp, clisp, sbcl

只是为了好玩，我用 Python 写了一个模拟[“蒙蒂霍尔问题”](http://en.wikipedia.org/wiki/Monty_Hall_problem "蒙蒂大厅")。后来我对 Lua 进行了实验，并决定在 Lua 中再次编写它，看看对比起来会是什么样子。尽管程序看起来非常相似（Lua 版本略短），但这是一次非常有趣的体验。最近我开始用 CL 做实验，并想再次做同样的事情。但是，当我运行它时，它的行为并不像预期的那样。由于某种原因，不稳定的玩家（应该有 66% 的获胜机会）与天真的玩家（有 50% 的获胜机会）几乎相同。

有人可以给我一个提示出了什么问题吗？这不是作业或类似的东西，只是我第一次尝试用 CL 编写一个更大的程序。除了关于上述问题的提示外，我还欢迎有关如何改进我的风格的建议。我想它仍然很像 Python （它或多或少是直接翻译）。

```
(defun choose-one (l)
  "Ramdomly chooses one element of the given list"
  (nth (random (length l)) l))

(defun remove-one (l)
  "Randomly removes one element of the given list"
  (remove (choose-one l) l))

(defun naive-player (initial-choice possible-choices)
  "The naive player randomly picks one choice. Should have a 50% chance to win."
  initial-choice ;keep compiler happy
  (choose-one possible-choices))

(defun stubborn-player (initial-choice possible-choices)
  "The stubborn player sticks with his initial choice. Should have a 33% chance to win."
  possible-choices ;keep compiler happy
  initial-choice)

(defun erratic-player (initial-choice possible-choices)
  "The erratic player will always change his choice. Should have a 66% chance to win."
  (choose-one (remove initial-choice possible-choices)))

(defun host-offer (prize possible-choices)
  "The host reveals one wrong choice."
  (let ((remaining (remove prize possible-choices)))
    (remove (choose-one remaining) possible-choices)))

(defun one-game (playerfn choices)
  "Simulates a single game with the given player. Evaluates to T if the player won."
  (let ((prize (choose-one choices))
        (player-choice (choose-one choices)))
    (eq (funcall playerfn player-choice (host-offer prize choices)) prize)))

(defun multiple-games (num-games)
  "Simulates the given number of games with all players. Evaluates to a result list."
  (let ((choices '(door_a door_b door_c))
        (naive-score 0)
        (stubborn-score 0)
        (erratic-score 0))
    ;(progn
      (dotimes (i num-games)
        ;(progn
          (if (one-game #'naive-player choices)
              (incf naive-score))
          (if (one-game #'stubborn-player choices)
              (incf stubborn-score)) 
          (if (one-game #'erratic-player choices)
              (incf erratic-score)));)
      (list 
       (list 'naive-player naive-score) 
       (list 'stubborn-player stubborn-score)
       (list 'erratic-player erratic-score))));)

;; Run simulation and display results
(defparameter *num-games* 10000)
(format *standard-output* "--- Monty Hall ---~%")
(format *standard-output* "Simulating ~D games...~%" *num-games*)
(let ((result (multiple-games *num-games*)))
  (format *standard-output* "~{~{~A score: ~D~}~%~}" result)) 
```

输出（例如）：

```
--- Monty Hall ---
Simulating 10000 games...
NAIVE-PLAYER score: 5014
STUBBORN-PLAYER score: 3333
ERRATIC-PLAYER score: 4968 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:05:36.567

主机报价功能错误。在定义的蒙蒂霍尔问题中，主机永远不会打开玩家选择的门，但您的程序没有考虑到这一点。如果这是固定的程序返回预期的结果。

# c# - 我如何将验证属性应用于 WPF

> ID：10725204
> 
> 赞同：6
> 
> 时间：2012-05-23T17:46:56.237
> 
> 标签：c#, wpf, validation, viewmodel, data-annotations

在我的项目中，我有这个窗口来添加新`Contact`对象

我的问题是我如何将此验证属性应用于 WPF 窗口，就像我在 Asp.net MVC 中所做的那样`[Required]`。`[ReularExpression()]`

```
<Window x:Class="WPFClient.AddNewContact"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="AddNewContact" Height="401" Width="496" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:my="clr-namespace:WPFClient.PhoneBookServiceReference" Loaded="Window_Loaded">
    <Window.Resources>
    </Window.Resources>
    <Grid Height="355" Width="474">
        <GroupBox Header="Add Contact" Margin="0,0,0,49">
            <Grid HorizontalAlignment="Left" Margin="21,21,0,0" Name="grid1" VerticalAlignment="Top" Height="198" Width="365">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="194" />
                    <ColumnDefinition Width="64*" />
                </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="53" />
                    <RowDefinition Height="17*" />
                </Grid.RowDefinitions>

                <Label Content="Name:" Grid.Column="0" Grid.Row="0" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" Grid.Row="0" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="nameTextBox" VerticalAlignment="Center" Width="120" />

                <Label Content="Email:" Grid.Column="0" Grid.Row="1" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" Grid.Row="1" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="emailTextBox" VerticalAlignment="Center" Width="120" />

                <Label Content="Phone Number:" Grid.Column="0" Grid.Row="2" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" Grid.Row="2" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="phoneNumberTextBox" VerticalAlignment="Center" Width="120" />

                <Label Content="Mobil:" Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                <TextBox Grid.Column="1" Grid.Row="3" Height="23" HorizontalAlignment="Left" Margin="0,3,0,6" Name="mobilTextBox" VerticalAlignment="Center" Width="120" />

                <Label Content="Address:" Grid.Column="0" Grid.Row="4" HorizontalAlignment="Left" Margin="3" VerticalAlignment="Center" />
                <TextBox  Grid.Row="4" Grid.Column="1" Height="39" HorizontalAlignment="Left" Margin="0,0,0,14" Name="addressTextBox" 
                             VerticalAlignment="Center" Width="194" TextWrapping="Wrap" VerticalScrollBarVisibility="Visible" AcceptsReturn="True"  />
            </Grid>
        </GroupBox>
             <Button Content="Add" Height="23" HorizontalAlignment="Left" Margin="24,273,0,0" Name="btnAdd" VerticalAlignment="Top" Width="75" Click="btnAdd_Click" />
        <Button Content="Cancel" Height="23" HorizontalAlignment="Left" Margin="123,273,0,0" Name="btnCancel" VerticalAlignment="Top" Width="75" Click="btnCancel_Click" />

    </Grid>
</Window> 
```

我有这个 ModelView 类来映射联系人对象

```
 public class MContact
 {
      [Required(ErrorMessage = " Name is required.")]
      [StringLength(50, ErrorMessage = "No more than 50 characters")]
      [Display(Name = "Name")]
      public string Name { get; set; }

      [Required(ErrorMessage = "Email is required.")]
      [StringLength(50, ErrorMessage = "No more than 50 characters")]
      [RegularExpression(".+\\@.+\\..+", ErrorMessage = "Valid email required e.g. abc@xyz.com")]
      public string Email { get; set; }

      [Display(Name = "Phone Number")]
      [Required]
      [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$",
            ErrorMessage = "Entered phone format is not valid.")]
      public string PhoneNumber { get; set; }

      public string Address { get; set; }
      [RegularExpression(@"^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$",
    ErrorMessage = "Entered phone format is not valid.")]
      public string Mobil { get; set; }

 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-02T20:41:24.127

1.  创建**ValidatorBase**

    它实现了标准的 .net **IDataErrorInfo**。它在**WPF**下工作，但也应该与**Windows Forms**一起工作。

```
public abstract class ValidatorBase : IDataErrorInfo
{
  string IDataErrorInfo.Error
  {
    get
    {
      throw new NotSupportedException("IDataErrorInfo.Error is not supported, use IDataErrorInfo.this[propertyName] instead.");
    }
  }
  string IDataErrorInfo.this[string propertyName]
  {
    get
    {
      if (string.IsNullOrEmpty(propertyName))
      {
        throw new ArgumentException("Invalid property name", propertyName);
      }
      string error = string.Empty;
      var value = GetValue(propertyName);
      var results = new List<System.ComponentModel.DataAnnotations.ValidationResult>(1);
      var result = Validator.TryValidateProperty(
          value,
          new ValidationContext(this, null, null)
          {
            MemberName = propertyName
          },
          results);
      if (!result)
      {
        var validationResult = results.First();
        error = validationResult.ErrorMessage;
      }
      return error;
    }
  }
  private object GetValue(string propertyName)
  {
    PropertyInfo propInfo = GetType().GetProperty(propertyName);
    return propInfo.GetValue(this);
  }
} 
```

2.  联系ValidatorBase的继承

```
public class MContact : ValidatorBase
{
    [Required(ErrorMessage = " Name is required.")]
    [StringLength(50, ErrorMessage = "No more than 50 characters")]
    [Display(Name = "Name")]
    public string Name { get; set; } 
```

3.  不要忘记在要验证的控件上放置一些验证触发器

```
<TextBox Text="{Binding Path=Address,
                        UpdateSourceTrigger=PropertyChanged,                 
                        ValidatesOnDataErrors=True}" /> 
```

4.  添加一些样式以在所有文本框上显示错误工具提示

```
<Window.Resources>
    <Style TargetType="{x:Type TextBox}">
        <Setter Property="ToolTip">
            <Setter.Value>
                <Binding RelativeSource="{RelativeSource Self}" Path="(Validation.Errors)[0].ErrorContent" />
            </Setter.Value>
        </Setter>
        <Setter Property="Margin" Value="4,4" />
    </Style>
</Window.Resources> 
```

代码在 Github 上：

[https://github.com/EmmanuelDURIN/wpf-attribute-validation](https://github.com/EmmanuelDURIN/wpf-attribute-validation)

灵感来自：

[https://code.msdn.microsoft.com/windowsdesktop/Validation-in-MVVM-using-12dafef3](https://code.msdn.microsoft.com/windowsdesktop/Validation-in-MVVM-using-12dafef3)

快乐的实施:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:26:30.083

如果你想走这条路，我建议你看看下面的文章。这一切都以[`IDataErrorInfo`](http://msdn.microsoft.com/en-us/library/system.componentmodel.idataerrorinfo.aspx).

[MSDN：如何：在自定义对象上实现验证逻辑](http://msdn.microsoft.com/en-us/library/bb909868.aspx)

[CodeProject：WPF MVVM 中基于属性的验证](http://www.codeproject.com/Articles/97564/Attributes-based-Validation-in-a-WPF-MVVM-Applicat)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T15:37:28.650

从 WPF 4.5 开始，您可以`INotifyDataErrorInfo`在模型上实现，WPF 控件将绑定到验证消息。

# vb.net - vb.net 中的全局类

> ID：10725206
> 
> 赞同：0
> 
> 时间：2012-05-23T17:47:06.713
> 
> 标签：vb.net, class, global, declaration

我的 vb.net 2008 项目中有 Errorlog.vb。这是公共课。

> 公共类ErrorLogger

我想在任何地方调用这个公共课程。所以在我使用的每个 vb 文件上

> 导入“主项目名称”.ErrorLogger

我怎样才能在开始的某个地方声明一次，并且该类将在整个项目中可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T17:55:48.257

在解决方案资源管理器中，右键单击您的项目并选择“属性”选项。然后单击“参考”选项卡。在此选项卡中，您可以添加项目宽度的新导入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:33:08.843

转到您的项目属性，打开“引用”选项卡，然后从页面底部的“导入的命名空间”列表中选择命名空间。

# c++ - 关于运算符重载的一个例子

> ID：10725207
> 
> 赞同：0
> 
> 时间：2012-05-23T17:47:13.507
> 
> 标签：c++

以下是从 C++ 编程语言重载运算符的示例：

```
struct X{
     int I;
     X(int);
     X operator+(int);
};

struct Y{
    int I;
    Y(X);
    Y operator+(X);
    operator  int();
} 
```

我不清楚“int I”在X和Y的定义中做了什么。此外，我不明白如何分析X定义中“operator int()”的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:50:41.720

我假设这`int I`两个结构都代表对象的内部状态。

```
Y operator+(X); 
```

这是一个用于`y + x`返回类型的新对象的运算符`Y`。

```
operator  int(); 
```

这是一个转换运算符，这意味着`Y`可以将 an 转换为`int`。

运算符没有定义，因此它们的实际语义是未知的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:50:20.063

`operator int()`提供`int`从结构到的转换，因此您可以编写：

```
X(4);
Y y(x);
int a = y; // calls Y::operator int() 
```

该转换的确切*含义*取决于运算符的实现方式

结构中`int I`的声明成员变量，（都）命名`I`和类型`int`

# mysql - 在 mysqldump 命令行上指定单独的配置文件

> ID：10725209
> 
> 赞同：13
> 
> 时间：2012-05-23T17:47:23.250
> 
> 标签：mysql, mysqldump

我的主要 MySQL 用户的 /home//my.cnf 文件如下所示（Linux 系统）：

```
[client]
host=localhost
user=<user>
password=********
database=h2o_amr 
```

我想将 mysqldump 指向这个配置文件，该文件位于将写入 mysqldump 文件的目录中：

```
[client]
host=localhost
user=<user>
password=******** 
```

如何将 mysqldump 指向此配置文件？在发布此问题之前，我已在手册页和 Internet 中搜索了此问题的答案。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-23T18:14:54.637

有三个选项可以更改默认行为：

*   `--no-defaults`: 不要从任何选项文件中读取默认选项。
*   `--defaults-file=#`：仅从给定文件中读取默认选项 #.
*   `--defaults-extra-file=#`: 读取全局文件后读取此文件。

此信息是从集成手册中复制的，即
`mysqldump --help | grep -A7 'Default options'`.

**注意**：如果添加其他参数，则该参数需要在第一位，否则将无法识别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:14:25.443

[根据文档](http://dev.mysql.com/doc/refman/5.5/en/option-files.html#option_general_defaults-file)，有一个`--defaults-file=PATH`选项可以完全满足您的需求。我自己用 mysqldump 试过了，它似乎奏效了。

还有其他方法可以让 MySQL 在不使用该参数的情况下读取选项文件：使用 MySQL 客户端搜索的默认路径来编译选项列表（[第一个和第二个表](http://dev.mysql.com/doc/refman/5.5/en/option-files.html)）。

# html - Firefox 中图像后的空格字符

> ID：10725212
> 
> 赞同：3
> 
> 时间：2012-05-23T17:47:42.550
> 
> 标签：html, css, firefox

我在 Firefox 12 中偶然发现了一些奇怪的行为。考虑以下 HTML：

```
<!DOCTYPE html>
<img src="resources/csv.png">
<img src="resources/globe.png">
<img src="resources/clock.png">
<img src="resources/key.png">
<img src="resources/delete.png"> 
```

渲染时，我注意到第一张和第二张图像之间有一个小空间。如果我围绕所有图像进行“文本选择”，我会看到它们之间有一个偷偷摸摸的小空白字符：

![世界空间](../Images/06685c09a9279df8c464e91b7ae7a287.png)

我想不出任何理由，但我的目的是让我所有的按钮链接，所以我也尝试过，看看它是否有任何效果。这是新代码：

```
<!DOCTYPE html>
<a><img src="resources/csv.png"></a>
<a><img src="resources/globe.png"></a>
<a><img src="resources/clock.png"></a>
<a><img src="resources/key.png"></a>
<a><img src="resources/delete.png"></a> 
```

再一次，这里是渲染的输出，已被选中。注意现在每张图片后面都有一个空格：

![在此处输入图像描述](../Images/73d325953783cbe5f6e90782332ac8ca.png)

谁能想到这个怪癖的合乎逻辑的解释？这是我的 HTML 中的问题，还是 Firefox 中的错误？谁能想到一个解决方法，也许是 CSS？我的第一直觉是使用边距，但我需要兼容 IE7，如果我没记错的话，我认为它不适用于负边距。非常感谢。

编辑：哎呀。我忘了回车会变成 HTML 中的空格字符。尽管如此，还是非常感谢回答者。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:58:48.270

将它们全部放在一条线上将解决它。

```
<img src="resources/csv.png"/><img src="resources/globe.png"/><img src="resources/clock.png"/><img src="resources/key.png"/><img src="resources/delete.png"/> 
```

但这可能很麻烦。如果您想保留一些可读性，您可能会执行类似...

```
 <img src="resources/csv.png"/><!--
--><img src="resources/globe.png"/><!--
--><img src="resources/clock.png"/><!--
--><img src="resources/key.png"/><!--
--><img src="resources/delete.png"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T17:49:52.443

空格是回车符。删除它，你会是金色的！

```
<img src="one.jpg"><img src="two.jpg"> 
```

或者

```
<a href="#"><img src="one.jpg"></a><a 
href="#"><img src="two.jpg"></a> 
```

当我需要摆脱那个空白时，通常是我在我的 html 中标记它的方式。

# objective-c - 当目标c中的.h文件为空时怎么办？

> ID：10725214
> 
> 赞同：1
> 
> 时间：2012-05-23T17:47:44.790
> 
> 标签：objective-c, ios, xcode

我有一个类层次结构，其中有一个超类，然后是一大堆扩展它的子类。但问题是这些子类永远不会添加新的方法或属性。相反，它们只是覆盖超类方法之一（本质上使其抽象）。这使得子类的 .h 文件完全为空（@interface 和 @end 行除外）。

什么是最合适的行动？我应该留下这些实际上是空的 .h 文件还是有更好的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T17:49:37.513

把它们留空，这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T17:52:39.037

您可以将头文件留空，或者您可以将它们全部删除，并拥有 1 个同时包含头文件和实现的文件，如下所示。

```
@interface BaseClass: MySuperClass {
}
@end

@implementation BaseClass

@end 
```

# zepto - Zepto 关于 Focus 和 Blur 事件的实现

> ID：10725216
> 
> 赞同：0
> 
> 时间：2012-05-23T17:47:48.853
> 
> 标签：zepto

我需要在页面加载后注入 DOM 的元素上运行一些关于焦点和模糊事件的代码。所以我使用 Zepto `on`（[Zepto's on link](http://zeptojs.com/#on)）来运行代码，但它对我不起作用。

这是我的 jsfiddle，我试图让它工作 - [http://jsfiddle.net/ashfame/zR2xL/](http://jsfiddle.net/ashfame/zR2xL/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T22:28:56.993

您的 on 声明在原始 JSFiddle 中有点偏离。当您使用`.live()`“版本”时，`.on()`您使用 Zepto 选择文档（因为我相信，这就是该`.live()`函数在幕后所做的）然后应用该`.on()`方法并将参数传递给它`event`,`selector`和`function`. 它看起来像这样：

```
$(document).on(event, selector, function); 
```

查看这个[JSFiddle](http://jsfiddle.net/zR2xL/7/)，我对您在评论中发布的内容做了一些修改。

我所做的更改是：

*   重新排列 on 函数
*   注释掉 jQuery 测试通过`console.log()`以阻止错误被抛出
*   阻止锚元素上的默认点击事件
*   切换`document.write`到一个`$('body').append()`

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T16:41:31.653

您的小提琴中的问题是，不知何故，小提琴搞砸了整个文档的编写工作。

不过你很亲近。您无法将事件侦听器附加到您尝试使用的不存在的节点`$(node).on()`。

但是，从链接的文档中，您应该像这样使用它：

```
$(document).on("click", "selector", fn); 
```

我已经更新了您的小提琴以使用 Zepto 而不是 jQuery，并将其设置为在 domReady 上运行，这使得您的代码中的 ready 事件变得不必要。

[http://jsfiddle.net/zR2xL/3/](http://jsfiddle.net/zR2xL/3/)

# sql-server - ADO 参数化查询出现“必须声明变量 @myvariable”错误

> ID：10725222
> 
> 赞同：5
> 
> 时间：2012-05-23T17:48:11.233
> 
> 标签：sql-server, delphi, ado, parameterized-query

我正在尝试将参数化查询与 ADO 一起使用。执行`Command`对象会引发错误：

> 必须声明变量'@filename'

`@filename`我使用以下方法声明参数`CreateParameter/Append`：

```
sql := 'INSERT INTO Sqm(Filename, data) VALUES(@filename, @data)';

command := CoCommand.Create;
command.Set_ActiveConnection(Connection.ConnectionObject);
command.Set_CommandText(sql);
command.Set_CommandType(adCmdText);
command.Parameters.Append(Command.CreateParameter('@filename', adLongVarWChar, adParamInput, -1, Filename));
command.Parameters.Append(Command.CreateParameter('@data', adLongVarWChar, adParamInput, -1, xml);

command.Execute({out}recordsAffected, EmptyParam, adCmdText or adExecuteNoRecords); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T18:16:31.367

据我所知，ADO 不支持 SQL 语句中的命名参数（SELECT、INSERT、UPDATE），因此您必须使用`?`char 来指示参数

```
sql := 'INSERT INTO Sqm(Filename, data) VALUES(?, ?)'; 
```

然后按照与 sql 语句中使用的顺序相同的顺序分配参数值。

ADO 2.6 引入了该[`NamedParameters`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675840%28v=vs.85%29.aspx)属性，但它似乎只适用于存储过程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T09:22:59.300

尝试这个

```
uses ADODB, DB;
...
...
... and then in some event handler (e.g. button click),
var 
  aCommand :TADOCommand;
begin
  aCommand := TADOCommand.create(self);
  aCommand.ConnectionString := 'build the connection string or use TADOConnection and assign to Connection property instead of ConnectionString property';
  aCommand.commandText := 'INSERT INTO Sqm(Filename, data) VALUES(:filename, :data);';
  aCommand.parameters.paramByName('filename').value := 'test';
  aCommand.parameters.paramByName('data').value := 'some data';
  aCommand.execute;
  aCommand.free;
end; 
```

我一直在以这种方式对 TADOCommand 和 TADOQuery 使用名称参数，没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:55:28.797

使用 Parameters.AddWithValue 如下所示

```
 connectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Jet OLEDB:Database Password=RainbowTrout;";
  InsertQry = "Insert into Sections(Name, PartNumber, VersionNumber, Channel, Address, Status, IPAddr) "
        + "values(@SectionName, @PartNumber, @VersionNumber, @Channel, @Address, @Status, @IPAddr)";

  NewCfgConnection.ConnectionString = string.Format(connectionString, ConfigFN);
  NewCfgCommand.Connection = NewCfgConnection;
  NewCfgCommand.CommandText = InsertQry;
  NewCfgConnection.Open();

  // Clear parameter values from last record
  NewCfgCommand.Parameters.Clear();

  // Insert record into sections table - set parameters
  NewCfgCommand.Parameters.AddWithValue("@SectionName", sSectionName);
  NewCfgCommand.Parameters.AddWithValue("@PartNumber", sPartNumber);
  NewCfgCommand.Parameters.AddWithValue("@VersionNumber", sVersionNumber);
  NewCfgCommand.Parameters.AddWithValue("@Channel", iChannel);
  NewCfgCommand.Parameters.AddWithValue("@Address", iAddress);
  NewCfgCommand.Parameters.AddWithValue("@Status", iStatus);
  NewCfgCommand.Parameters.AddWithValue("@IPAddr", iIP);

  NewCfgCommand.ExecuteNonQuery(); 
```

# ffmpeg - drawtext中的ffmpeg单引号

> ID：10725225
> 
> 赞同：12
> 
> 时间：2012-05-23T17:48:20.933
> 
> 标签：ffmpeg, escaping, drawtext

当它们在drawtext的“text =”参数中时，即使我转义它们，我也无法让ffmpeg的drawtext视频过滤器绘制撇号/单引号。双引号工作正常，从文件加载的文本中的撇号（例如 textfile="example.txt"）工作正常。这是一个错误吗？

例如

```
ffmpeg -i test.mpg -vf drawtext="apostrophes don't print" ...
ffmpeg -i test.mpg -vf drawtext="even when they\'re escaped" ... 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-24T00:08:23.290

特殊字符逃逸就像暴力：如果它们不能解决您的问题，那么您使用的不够多。

```
ffmpeg -i test.mpg -vf drawtext=text="It\\\\\'s so easy" 
```

生成包含撇号的文本覆盖。文本被解析了几次，所以你不仅要转义引号，还必须转义转义引号的斜线。两次。

在这种情况下，您使用文本文件的替代方法*可能*是更好的方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-16T22:51:27.227

我能够将 Unicode **\u2019**插入参数字符串，它适用于单右引号。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-10T03:55:39.840

如果有人需要这个 python，这个转义函数对我有用（基于[https://ffmpeg.org/ffmpeg-utils.html#Quoting-and-escaping](https://ffmpeg.org/ffmpeg-utils.html#Quoting-and-escaping) + 上面的多转义建议）：

返回 "'" + text.replace(":", "\\:").replace("'", "'\\\\\\''") + "'"

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-18T05:39:46.433

// 这对我有用

```
public function replaceSpecialFfmpegChars($text)
    {
        return str_replace(
            ":",
            "\\\\\\\\\\\:",
            str_replace(
                "%",
                "\\\\\\\\\\\%",
                str_replace(
                    "'",
                    "'\\\\\\\\\\\\''",
                    str_replace(
                        "\"",
                        "\\\\\\\\\\\"",
                        str_replace(
                            "\\",
                            "\\\\\\\\\\\\\\\\",
                            $text
                        )
                    )
                )
            )
        );
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T20:45:38.143

这可能与魔术引号有关。通过我刚刚在 Windows 上使用 Windows 命令行和 MinGW 进行的一系列测试，我每次都遇到同样的问题。由于 ffmpeg drawtext 使用 Freetype（我猜这是启用魔术引号的地方），我怀疑要禁用魔术引号还有很多工作要做。我也不确定是否有办法删除命令行中添加的斜杠，因为我所看到的所有内容都涉及 PHP 脚本。我可能是错的，因为我不是 PHP 专家，但我不知道如何将它们集成到 ffmpeg 命令中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-01T07:54:54.563

在 node.js 中，我可以在这一行的文本中添加一个冒号。

```
let surahTxt = "QURAN " + chapterNo + "\\:"+ from + "-" + to ; 
```

后来这个变量与drawtext一起使用

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-27T16:11:23.817

只需将您的文本放入文件中，例如 myText.txt 并使用`textfile`选项：

`->myText.txt` 这是我的带有特殊字符的文本 :,(,),'

然后代替使用：

`ffmpeg -i test.mpg -vf drawtext="This is my text with special characters :,(,),'"`

使用以下命令：

`ffmpeg -i test.mpg -vf textfile=textFile.txt`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-17T12:46:39.173

如果您通过 传递字符串`Python`，则以下内容对我有用：

```
txt = 'it\'s good!'
txt = txt.replace('\'', '\'\\\\\\\\\\\'\'') 
```

# ruby-on-rails - Rails 模板标签文档

> ID：10725227
> 
> 赞同：1
> 
> 时间：2012-05-23T17:48:36.893
> 
> 标签：ruby-on-rails

我在哪里可以找到 Rails 模板/布局标签的文档？我想找到我可以使用的标签的完整列表。

如果文档可用于 2.3.X，则加分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:23:36.863

<% if、<% else 等不是 rails 定义的标签。

相反，erb 允许您使用 <% 和 <%= 将任意 ruby​​ 代码嵌入到模板中

# java - JFreeChart 时间序列

> ID：10725231
> 
> 赞同：2
> 
> 时间：2012-05-23T17:48:42.393
> 
> 标签：java, jfreechart, epoch

我正在尝试生成我拥有的价格数据集的时间序列。所有时间都保留为 posix 时间，因此是 1970 年之后的毫秒数，因此它们需要实例化可以传递给 TimeSeries 的适当对象。是否有任何特定对象可以用作构造函数参数毫秒，并且仍然提供诸如日/月/年等信息，有点像 Java.util.Date 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:00:38.797

当您填充 时`TimeSeries`，您可以使用该`add(RegularTimePeriod, Number)`方法。

有多种实现`RegularTimePeriod`，包括`Day`和`Millisecond`，具体取决于数据的结构。

这些都是 jfreechart 类。

但是，我们发现在我们的一些应用程序中，创建`TimeSeries`的`RegularTimePeriod`内存效率很低 - 因为您必须为系列中的每个时间点创建一个新对象。因此，我发现最好的方法是编写我们自己的实现`AbstractXYDataset`，我们可以在其中添加我们自己的时间序列对象。我应该补充一点，我们然后使用`ChartFactory.createTimeSeriesChart(...)`，传入我们的实现`AbstractXYDataset`；这具有使用 a`DateAxis`作为 x 轴的优点。

# linux - Opening default text editor in bash?

> ID：10725238
> 
> 赞同：27
> 
> 时间：2012-05-23T17:49:07.697
> 
> 标签：linux, bash, shell

I was writing a shell script and ran into a problem. Is there a way to open a file using the user's specified text editor?

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-23T17:51:40.137

The user's chosen editor should be in `$EDITOR`, but you must still choose a sane default.

```
"${EDITOR:-vi}" file.txt 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T18:10:49.480

Ignacio's right (though arguably, the fallback should be `ed`, which POSIX requires to be present, although it's essentially only useful to old-timers).

If you're thinking about graphical editors, `xdg-open file.txt` is what you're after.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-23T22:05:44.647

note: `xdg-open file.xml` will open in a Web-Browser, most likely. So, try;

```
 # select your default sensible-editor from all installed editors, or not.
    select-editor
    # Open Default Text Editor
    sensible-editor file.xml 
```

# xna-4.0 - 平台游戏瓦片引擎——关于如何处理长瓦片的建议

> ID：10725240
> 
> 赞同：1
> 
> 时间：2012-05-23T17:49:11.737
> 
> 标签：xna-4.0, tile-engine

我正在寻找建议而不是直接帮助。

我正在 XNA 中开发一个 8 位平台游戏。我可能已经投入了 160 个小时，而且我开始遇到我所拥有的引擎的问题。它基本上是 XNA 平台游戏演示的改编/修改版本。我的所有或大部分瓷砖都是 32x32，但有些是 64 宽和 32 像素高，就像一张桌子。有些像植物一样宽32，高64。

我一次只将它们发送到 gpu 一个 .png，类似于 XNA 教程的作者进行平铺映射的方式。对于动画精灵，我确实使用角色不同帧的平铺贴图。对于瓦片地图数据，我读取了一个文本文件，就像 XNA 教程一样。

我应该如何适应又宽又高的瓷砖？我应该制作一个两层的瓷砖系统（我想我应该遵守保持简单愚蠢的规则）吗？

现在我正在使用透明瓷砖来扩展宽瓷砖。

桌椅：

[椅子 http://dl.dropbox.com/u/8446900/game_screen_desk.png](http://dl.dropbox.com/u/8446900/game_screen_desk.png)

```
.....
...h.
..d".
##### 
```

植物和椅子：

[办公桌 http://dl.dropbox.com/u/8446900/game_screen_plant.png](http://dl.dropbox.com/u/8446900/game_screen_plant.png)

```
..p...h.
..,...,.
######## 
```

椅子是“h”，“d”是桌子，“p”是植物，“,”是透明背景图块（不与用户交互）。'"' 用于用户可以站立的透明瓷砖（延伸桌子）。问题是，如您所见，背景似乎有一个洞。

我应该制作一张实际的平铺地图并将所有内容组合成一个大 png 吗？我可以采取的另一个选择是将每个宽或高的瓷砖实际切割成两个不同的瓷砖。专业人士将如何做到这一点？我不是在寻找一个快速而肮脏的修复，而是现代平台游戏的运行方式。

更新：查看答案后，我发现了一个非常有用的工具，可以将精灵打包到一张表中。

[http://spritesheetpacker.codeplex.com/](http://spritesheetpacker.codeplex.com/)

更新：我新升级的磁贴引擎速度更快，几乎同样简单。下面的建议很棒。强力推荐。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:00:14.717

首先 - 不要引入特殊宽度/高度的瓷砖。让艺术家将大对象切成单个图块（并因此在地图编辑器上重新组合它们）。每个图块都应该是带有 alpha 通道的 PNG，以便它们可以正确组合。

牢记这一点，我的建议是：

1.  您的瓷砖应该只包含预先组合了不同对象部分的单个瓷砖，例如桌子的左侧是单个瓷砖，没有椅子的右侧是另一块瓷砖，后面还有一把椅子。（tilevalue =“dc”，也许？）

2.  您可以定义多个层的单个图块并将它们从后到前渲染。您还可以为多个图层定义视差因子，从而很容易地在两个图层之间获得良好的视差效果。当然，玩家必须一次“存在”在一层中，否则您将不知道要为他/她的当前位置使用什么碰撞几何体。

您也不应该为每个图块创建一个纹理 - 而是一个已编译的图块表（完全像一个精灵表），以便最小化您所做的渲染状态更改的数量。每次绘制调用进行许多更改是不好的，因为每次您进行更改（当前纹理、绘制颜色或影响该绘制调用的其他内容）时，API、驱动程序以及可能的 GPU 本身都必须进行工作以更新其状态 - 这加起来很快。

请注意，这并不意味着您应该将角色和关卡放入一个巨大的精灵表中 - 由于其他原因，这很糟糕。例如，您可以：将所有与关卡相关的图块放在一个图块中，将英雄的动画图块放在另一个图块上，将所有敌人放在一个（一起）或类似的东西上。

希望这会有所帮助，否则我很乐意进一步解释。

# nhibernate - 即使 ORDER BY 子句不同，NHibernate 也会检索缓存的查询结果

> ID：10725241
> 
> 赞同：2
> 
> 时间：2012-05-23T17:49:26.953
> 
> 标签：nhibernate, sql-order-by, query-cache

我正在使用查询缓存和 ORDER BY 子句看到我称之为 NHibernate 中的错误...

当我运行以下查询时...

```
SELECT this_.Id          as y0_,
       this_.Name        as y1_
FROM   Products this_
WHERE  this_.IsActive = 1
ORDER BY this_.IsPremium desc 
```

...如果我打开了查询缓存，NHibernate 会成功缓存它的结果，并且我告诉它缓存这个查询（使用 eg `criteria.SetCacheable(true)`）。

不幸的是，正如精彩的[NHProf](http://nhprof.com/)告诉我的那样，NHibernate 在运行此查询时也使用缓存的查询结果：

```
SELECT this_.Id          as y0_,
       this_.Name        as y1_
FROM   Products this_
WHERE  this_.IsActive = 1
ORDER BY this_.IsPremium desc,
         this_.Name 
```

任何人都可以解释为什么或向我指出有关此“功能”的一些深入文档吗？或者，更好的是，有没有人能**解决**这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T07:41:22.547

NHibernate 使用第一级缓存（由身份映射实现）来缓存您查询的每个对象。NHibernate 适用于单个实体，即使您查询对象列表也是如此。

让我解释一些东西：
您查询是否执行此查询并尝试获取 id 为 1 的实体：

```
session.get<SomeEntity>(1); 
```

NHibernate 将检查缓存以查看它是否已经包含 id 1。如果是这样，缓存的对象将被返回并且它不会运行查询。如果没有，则执行查询，选择记录，将其放入缓存并将其返回给您。如果您再次执行查询，它会被缓存并且对象将在没有新查询的情况下返回。

现在，如果您查询这样的列表：

```
session.QueryOver<SomeEntity>().List(); 
```

nhibernate 不知道将获取哪个 id，因此即使您运行两次查询，它也会查询所有记录并逐一检查缓存结果。假设您的数据库中有 2 条记录（id 1 和 2）。当您的缓存仍然为空时，您可以通过查询获取它们。两条记录都被提取，放入缓存并返回给您。现在您插入记录 3、4 和 5，当您插入时，您也将更新记录 1。现在，如果再次运行查询，它将读取所有 5 条记录，但现在也缓存记录 3、4 和 5。您将获得一个包含 5 个对象的列表，其中 3、4、5 是刚刚读取的对象，但会返回 1 和 2 的缓存版本。你不会得到 id 1 的更新版本。

因此回答您的问题：更改顺序无关紧要。您的查询将生成一组记录，这些记录将逐一检查缓存，如果其中一个已经存在，则返回此缓存版本。

您的问题的解决方案可能是：

*   使用 session.Refresh(obj); 如果您知道哪些已更新。
*   从会话中驱逐部分或所有实体（这意味着它们将被抛出缓存并可以通过查询重新获取）。注意：如果您驱逐它们，更改将不会被保存。
*   您可以使用无状态会话，正如无状态名称所暗示的那样，它没有缓存。

# rally - Lookback API：查找已知父节点下的所有叶节点故事

> ID：10725244
> 
> 赞同：2
> 
> 时间：2012-05-23T17:49:36.277
> 
> 标签：rally, lookbackapi

在 Rally Webservices API 中，如果我想遍历 Story 层次结构，则有必要对父故事进行查询，然后从返回的 Stories 中获取 Children 集合，然后递归查询每个 Child，直到流程到达叶节点结果。

问题 - 通过在 Lookback API 中使用单个查询，有没有一种方便的方法可以在不迭代的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T23:35:03.057

这是 Lookback API 的最佳功能之一。

假设你有这个层次结构：

*   第444话
    *   第555话
        *   第666话
            *   缺陷 777（通过要求字段）
                *   任务 12
            *   任务 13
    *   第888话

任务 12 的文档如下所示：

```
{
  ObjectID: 12,
  _Type: "Task",
  WorkProduct: 777,
  _ItemHierarchy: [444, 555, 666, 777, 12],
  ...
} 
```

因此，当您针对具有数组值（如_ItemHierarchy）的字段提交查询时，它将匹配数组的任何成员。

要获取从 444 下降的所有内容，您的 find 子句将包括`_ItemHierarchy: 444`. 看看它如何匹配`_ItemHierarchy`任务 12 的值？

要获得从 333 下降的所有内容，您的 find 子句将包括`_ItemHierarchy: 333`. 这也与任务 12 匹配。

要仅获取来自 444（所有故事）的故事，您的 find 子句将包括：

```
 _ItemHierarchy: 444,
  _Type: "HierarchicalRequirement" 
```

要获得**叶子**Stories 只需添加子句`Children: null`。

_ItemHierarchy 也一直到 PortfolioItems。

`_ItemHierarchy`已编入索引，因此这些查询应该非常有效。

# java - Java/Android - 将 GMT 时间字符串转换为本地时间

> ID：10725246
> 
> 赞同：14
> 
> 时间：2012-05-23T17:49:40.287
> 
> 标签：java, android, datetime, simpledateformat

好的，所以我有一个字符串，比如“Tue May 21 14:32:00 GMT 2012”我想将此字符串转换为当地时间，格式为 2012 年 5 月 21 日下午 2:32。我尝试了 SimpleDateFormat("MM dd, yyyy hh:mm a").parse()，但它引发了异常。所以我该怎么做？

异常是“未报告的异常 java.text.ParseException；必须被捕获或声明为抛出”。

在行中`Date date = inputFormat.parse(inputText);`

我在 TextMate 上运行的代码：

```
public class test{
    public static void main(String arg[]) {
        String inputText = "Tue May 22 14:52:00 GMT 2012";
        SimpleDateFormat inputFormat = new SimpleDateFormat(
            "EEE MMM dd HH:mm:ss 'GMT' yyyy", Locale.US);
        inputFormat.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));
        SimpleDateFormat out = new SimpleDateFormat("MMM dd, yyyy h:mm a");
        Date date = inputFormat.parse(inputText);
        String output = out.format(date);
       System.out.println(output);
    }
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-23T17:54:22.210

*您为解析*提供的格式字符串与您实际获得的文本格式不对应。你需要先解析，然后格式化。看起来你想要：

```
SimpleDateFormat inputFormat = new SimpleDateFormat(
    "EEE MMM dd HH:mm:ss 'GMT' yyyy", Locale.US);
inputFormat.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));

SimpleDateFormat outputFormat = new SimpleDateFormat("MMM dd, yyyy h:mm a");
// Adjust locale and zone appropriately

Date date = inputFormat.parse(inputText);
String outputText = outputFormat.format(date); 
```

编辑：这是一个简短但完整的程序形式的相同代码，您的示例输入：

```
import java.util.*;
import java.text.*;

public class Test {
    public static void main(String[] args) throws ParseException {
        String inputText = "Tue May 21 14:32:00 GMT 2012";
        SimpleDateFormat inputFormat = new SimpleDateFormat
            ("EEE MMM dd HH:mm:ss 'GMT' yyyy", Locale.US);
        inputFormat.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));

        SimpleDateFormat outputFormat =
            new SimpleDateFormat("MMM dd, yyyy h:mm a");
        // Adjust locale and zone appropriately
        Date date = inputFormat.parse(inputText);
        String outputText = outputFormat.format(date);
        System.out.println(outputText);
    }
} 
```

你能编译并运行*那个确切的代码*吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:05:01.410

您用来解析的格式化程序必须定义为您期望的格式。这是一个适用于您提供的值的示例，但是您可能需要根据某些极端情况对输入的作用进行更改：

```
String date = "Tue May 21 14:32:00 GMT 2012";
DateFormat inputFormat = new SimpleDateFormat("EE MMM dd HH:mm:ss zz yyy");
Date d = inputFormat.parse(date);
DateFormat outputFormat = new SimpleDateFormat("MMM dd, yyy h:mm a zz");
System.out.println(outputFormat.format(d)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:54:34.023

SimpleDateFormat.parse 方法引发解析异常。

你得到的例外是告诉你这个......

> 异常是“未报告的异常 java.text.ParseException；**必须被捕获或声明为抛出。** ”

用 try-catch 换行进行解析，你应该是金色的..

```
Date d=null;
try{
    d = inputFormat.parse(date);
catch(ParseException e){
   // handle the error here....
} 
```

R

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-23T21:21:04.180

# postgresql - Postgres hstore 是否支持每个元素的原子更新？

> ID：10725251
> 
> 赞同：1
> 
> 时间：2012-05-23T17:50:08.560
> 
> 标签：postgresql, sql-update, atomic, hstore

或者您是否必须更新让我们说 hstore 列中的整个集合/数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T01:56:23.033

是的，在这两个方面。

在 ACID 意义上，第一次更新是“原子的”。其次，您可以在新定义中引用旧变量值，所以是的。

唯一需要注意的是，由于 MVCC 的工作方式，每次更新都会创建一个*副本*，该副本仅在事务提交后可见。不过，在我看来，这似乎并不违背原子性。

# objective-c - 核心数据查询中的 fetchLimit 和 fetchOffset 可能存在问题

> ID：10725252
> 
> 赞同：11
> 
> 时间：2012-05-23T17:50:09.660
> 
> 标签：objective-c, ios, core-data

我有一个包含 fetchLimit 和 fetchOffset 的核心数据查询的零星错误。很久很久以前（我见过它发生过一次，另一位测试人员也是如此）， fetchOffset 似乎被忽略了。查询如下所示：

```
NSFetchRequest *fetch = [[NSFetchRequest alloc] initWithEntityName:@"MyEntity"];
NSSortDescriptor *dateDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timestamp" ascending:NO];
NSArray *sortDescriptors = [NSArray arrayWithObject:dateDescriptor];
[fetch setSortDescriptors:sortDescriptors];

fetch.fetchOffset = 500;
fetch.fetchLimit = 1;

NSError *error = nil;
NSArray *objects = [self.managedObjectContext executeFetchRequest:fetch error:&error];
if (objects.count) {
    MyEntity *objectAtLimit = [objects objectAtIndex:0];
} 
```

这几乎总是根据需要返回第 501 个对象，但是在它破坏的那两次它返回第一个对象。

除非数据库中有 >500 行，否则查询永远不会运行。我正在使用iOS5。managedObjectContext 有一个 mainQueueConcurrencyType。

它似乎与此问题中报告的行为相同：[Paging results from Core Data requests](https://stackoverflow.com/questions/7955486/paging-results-from-core-data-requests)，从未解决（或至少不在列表中。）在这种情况下，基于数据模型，fetchOffset 似乎被忽略或尊重正在接受测试。

我可能会在没有 fetchOffset 的情况下重写查询，以防万一出现问题，因为性能不应该成为问题。但我想知道是否有人对错误可能在哪里有想法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T11:51:31.180

今天早上遇到了一个类似的问题，并注意到如果我的 NSManagedObjectContext 有未保存的更改，那么无论出于何种原因都可能会忽略 fetchOffset。保存上下文后，正确解释 fetchOffset。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-28T15:37:18.417

这个问题确实似乎与 NSManagedObjectContext 中未保存的更改有关。如果您将[includesPendingChanges](https://developer.apple.com/documentation/coredata/nsfetchrequest/1506724-includespendingchanges)属性设置为`false`具有限制 + 偏移量的 NSFetchRequest 将按预期工作。

```
fetchRequest.includesPendingChanges = false 
```

# statistics - 在这个机器学习中如何评估和解释训练好的模型？

> ID：10725256
> 
> 赞同：0
> 
> 时间：2012-05-23T17:50:22.187
> 
> 标签：statistics, nlp, machine-learning, artificial-intelligence, data-mining

我是机器学习的新手。我做了一个测试，但不知道如何解释和评估。

情况1：

我首先将数据（数据A，约8000字）随机分成10组（a1..a10）。在每个组中，我使用 90% 的数据来构建 ngram 模型。然后在同一组的其他 10% 数据上测试这个 ngram 模型。结果低于 10% 的准确度。其他 9 组以同样的方式完成（分别建立模型并分别在该组剩余的 10% 数据上进行测试）。所有结果的准确率约为 10%。（这是 10 折交叉验证吗？）

案例二：

我首先基于大约 8000 个单词的**整个**数据集（数据 A）构建了一个 ngram 模型。然后我把这个A分成10组（a1，a2，a3..a10），当然是随机的。然后我使用这个 ngram 分别测试 a1,a2..a10。我发现该模型在所有组中的准确率几乎达到 96%。

如何解释这种情况。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:02:12.297

1.  是的，10 倍交叉验证。

2.  这种测试方法有在训练集上测试的共同缺陷。这就是准确性被夸大的原因。这是不现实的，因为在现实生活中，您的测试实例是新颖的，并且系统以前看不到。

N 折交叉验证是许多作品中使用的有效评估方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T20:43:37.693

您需要阅读**过度拟合**的主题。

您描述的情况给人的印象是您的 ngram 模型严重过度拟合：它可以“记住” 96% 的训练数据。但是当在适当的子集上训练时，它只能实现对*未知*数据 10% 的预测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T12:20:43.893

1.  这称为 10 折交叉验证

# c# - 替换函数在 C# 中不起作用，但在 SQL Server 2008 中起作用

> ID：10725263
> 
> 赞同：0
> 
> 时间：2012-05-23T17:50:54.863
> 
> 标签：c#, sql, sql-server, replace

使用命令时替换功能工作

```
exec MyStoredProcedure param1, param2, 
```

等等...，但是当通过 C# 代码运行它时，它没有正确替换文本，所以我最终收到一封电子邮件，上面仍然写着@@Comments，而不是实际的评论。我尝试在 SQL Server 2008 中检查它，但它工作正常并且电子邮件正常通过。有什么需要我检查的吗？

这是我的 C# 代码：

```
public static void SetRequestStatusChange(int reqID, int newStatus, string assignTo)
{
    SqlConnection con = new SqlConnection(connectionString);
    SqlCommand cmd = new SqlCommand("spUpdateRequest", con);
    cmd.CommandType = CommandType.StoredProcedure;

    // Status
    cmd.Parameters.Add(new SqlParameter("@RequestNo", SqlDbType.Int, 4));
    cmd.Parameters["@RequestNo"].Value = 276;

    // Queue
    cmd.Parameters.Add(new SqlParameter("@userID", SqlDbType.NVarChar, 12));
    cmd.Parameters["@userID"].Value = "1091912";

    // State
    cmd.Parameters.Add(new SqlParameter("@RequestStatus", SqlDbType.Int, 4));
    cmd.Parameters["@RequestStatus"].Value = 2;

    // Buyer Emp ID
    cmd.Parameters.Add(new SqlParameter("@assignedTo", SqlDbType.NVarChar, 12));
    cmd.Parameters["@assignedTo"].Value = "1091912";

    try
    {
        con.Open();
        cmd.ExecuteNonQuery();
    }
    catch (SqlException err)
    {
        throw new ApplicationException("Data Error." + err.ToString());
    }
    finally
    {
        //close the connection 
        con.Close();
    }
} 
```

这是实际执行替换的存储过程的一部分。实际的存储过程很长，调用了很多其他的存储过程（我没写），读起来会非常麻烦。

```
select @html = replace(replace(replace(@html, '@@COMMENTS', case when @activityID <> 20 then  'The following comments were noted when the Request' else '' end +

   case @ActivityID when  2 then ' was submitted: ' +  case when requestorComments > '' then requestorComments  else 'None' end
   when 0 then '' 
   when  4 then ' was edited: ' + isnull(L.Comments,  'None') 
   when  15 then ' was edited: ' + isnull(LL.Comments,  'None') 
   when  20 then ''
   when  21 then  ' material was returned: ' + case when dbo.fnLastComment(lamSpecRecallComments) > '' then replace(dbo.fnLastComment(lamSpecRecallComments),':',':  ') else 'None' end
   when  -21 then  ' material was returned: ' + case when dbo.fnLastComment(lamSpecRecallComments) > '' then replace(dbo.fnLastComment(lamSpecRecallComments),':',':  ') else 'None' end
   when  8 then ' was approved: ' + case when ccMgrCOmments > '' then ccMgrCOmments  else 'None' end
   when  9 then ' was approved: ' + case when lamAprCOmments > '' then lamAprCOmments  else 'None' end
   when 13 then ' was stored: ' + case when dbo.fnLastComment(lamSpecCOmments) > '' then dbo.fnLastComment(lamSpecCOmments)  else 'None' end
   when -8 then ' was closed: ' + case when ccMgrCOmments > '' then ccMgrCOmments  else 'None' end
   when -9 then ' was closed: ' + case when lamAprCOmments > '' then lamAprCOmments  else 'None' end
   else '' end), 

   '@@PLEASE',
   case when @activityID =  8 or @activityID = 9 or @activityID = 20 or @activityID = 2  then 'Please click the link below to view the Request and ensure it is worked expeditiously.'
   else '' end),'@@RECALL',@list)  

   from (select * from strgRequests where requestNumber = @requestID) r
   left join (select * from  ActivityLog  where TransactionID = @transactionID) L on 1 = 1
   left join (select * from  ActivityLineItemLog where TransactionID = @transactionID) LL on 1 = 1 
```

@@Comments、@@RECALL 和@@请来自一个表。这允许自定义电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:14:22.753

“@@”通常用于全局/默认变量。“@”通常用于参数。

我必须查看更多代码才能确定。我的直觉告诉我，将你的 @@ 换成 @ 是你应该采取的下一个方向来解决这个问题。

此外，如果字段的值为“@@Comments”，您可能在某处有如下代码：

设置@cmd=`insert into Table (field,field,field) 值（'somethinguseful','@@Comments','more stuff'）

执行（@cmd）

这有两个问题。

1.  你没有翻译@@Comments
2.  你容易注射。

使用类似的东西：

执行 sp_executesql N'insert into Table (field,field,field) 值 (@var1,@var2,@var3)' ,N'@var1 varchar(256)' , @var1=@Comments ...

# php - 值不必要地四舍五入

> ID：10725264
> 
> 赞同：0
> 
> 时间：2012-05-23T17:50:55.003
> 
> 标签：php, number-formatting

我有一些数据库数据，我正在做一些简单的数学运算。出于某种原因，我无法将总数四舍五入到最接近的美元。不过，我还需要包含美分信息。我很肯定每个 itemPrice 条目在数据库中包含两个小数位。

```
if (strpos($row2["itemDiscount"],'%') !== false) {
    $itemDiscount = $row2["itemDiscount"];
    $itemDetailTotalUnformatted = $row2["itemQuantity"]*($itemPrice*(1-($itemDiscount/100)));
}
else {
    $itemDetailTotalUnformatted = $row2["itemQuantity"]*($row2["itemPrice"]-$row2["itemDiscount"]);
}
$itemDetailTotal = number_format($itemDetailTotalUnformatted, 2, '.', '');
echo $itemDetailTotal; 
```

var_dump($row2):

```
50.00array(6) {
[0]=>
string(1) "2"
"itemQuantity"]=>
string(1) "2"
[1]=>
string(5) "30.00"
[itemPrice]=>
string(1) "30.00"
[2]=>
string(4) "5.00"
[itemPrice]=>
string(4) "5.00" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:05:18.703

在处理货币时，总是以整数工作。以美分保存价格，以美分处理价格，只有在最后除以 100 以呈现结果。

这样做的原因是 int 具有完美的精度（直到非常高的值，它们被作为浮点数处理），而浮点数没有。PHP 中没有定点类型。

一旦你这样做了，你的舍入问题可能会消失。

# javascript - 您将如何根据背景图像更改 div 的高度？

> ID：10725275
> 
> 赞同：0
> 
> 时间：2012-05-23T17:52:02.647
> 
> 标签：javascript, jquery, height

我正在设置页面以显示已创建的 jpg 的组合，它们都有不同的高度。使用 javascript 或 jquery 如何根据背景图像的高度自动调整 div 的高度？html 的布局如下：

```
<body>
     <div id="comp"></div>
</body> 
```

我意识到您可以将其设置为 CSS，但我希望它是动态的，而不必每次都添加高度。非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:00:46.567

也许这个（未经测试的）代码将帮助您了解它是如何完成的：

```
// taken from the link in my comment to OP
var url = $('body').css('background-image').replace('url(', '').replace(')', '').replace("'", '').replace('"', '');
var bgImg = $('<img />');
bgImg.hide();
bgImg.attr('src', url);
bgImg.bind('load', function()
{
    var height = $(this).height();
    $('#comp').height( height );
}); 
```

# algorithm - 在代码中实现常见白皮书数学习语的常用方法是什么

> ID：10725279
> 
> 赞同：1
> 
> 时间：2012-05-23T17:52:31.393
> 
> 标签：algorithm, design-patterns, math, implementation, notation

我正在寻找一种资源，该资源可以解释白皮书中常见的数学运算，即具有最少数学背景的编码人员可以理解编码习语——for循环等。

我经常在不同的方程中看到相同类型的符号，这通常会导致易于理解的算法。对符号含义的概述将大大有助于使学术论文更易于理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:58:31.733

我一直使用这个站点来将复杂的数学运算转换为代码。我从来没有高中毕业。

```
http://www.wolframalpha.com/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:59:11.257

我能想到的唯一不明显（算术，三角函数等）并且在代码中具有直接等价物的是 sum `Σ`, 和 product `Π`。

所以类似`Σ a[i]`的是：

```
 sum = 0;
 for (i = 0; i < len(a); ++i) sum += a[i]; 
```

和一些相关细节：下标（行下方的小数字）通常与数组索引相同（因此`i`in`Σ a[i]`可能写得很小，在 的下方和右侧`a`）。类似地，`i`值的范围（这里`0`是 的长度`a`）可以作为两个小数字给出，就在`Σ`（开始值，，`0`在底部，结束值，，，`n`在顶部）的右侧。

等效产品是`Π a[i]`：

```
product = 1;
for (i = 0; i < len(a); ++i) product *= a[i]; 
```

*评论中的更新*xan 建议也覆盖矩阵。这些变得复杂，但在最简单的情况下，您可能会看到如下内容：

```
a[i] = M[i][j] b[j] 
```

（如上所述，`i`and更有可能是下标）。`j`这有*隐含的*循环：

```
for (i = 0; i < len(a); ++i) {
    a[i] = 0;
    for (j = 0; j < len(b); ++j) a[i] += M[i][j] * b[j]
} 
```

更糟糕的是，这通常会被简单地写成，`a = M b`并且您需要自己填写所有内容....

*更新 2*[您在下面引用的论文](http://www.iiia.csic.es/~mantaras/MIREX.pdf)中的第一个等式是`w(s[i],0) = alpha[d] * Size(s[i])`. 据我所知，这无非是：

```
double Size(struct s) { ... }

double w(struct s, int x) {
    if (x == 0) return alpha[d] * Size(s);
    ...
} 
```

和其他术语同样看起来很花哨，但实际上并不复杂的函数调用和乘法。请注意， “点”`|...|`是`abs(...)`乘法（我认为）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T17:55:35.200

“通用数学运算”取决于您习惯解决的问题类型。它们的范围可以从简单的算术（+、-、*、/）到微积分（积分、求和、导数、偏微分方程、矩阵等）

“共同”对您和您的开发团队意味着什么？

# objective-c - 目标 c 代表理解

> ID：10725286
> 
> 赞同：0
> 
> 时间：2012-05-23T17:53:01.593
> 
> 标签：objective-c

我有一个 ApiClient 类，它使用 NSURLConnection 从服务器获取一些数据并将其发送回其委托

我有另一个名为 Fetcher.h 的类，它调用 ApiClient 上的某个函数并在其中实现委托方法。

我有第三个类（视图控制器），它调用 Fetcher.h executeCall() 并触发整个过程。

```
 Fetcher *fetcher = [[Fetcher alloc] init];
    [fetcher getData]; 
```

如果我直接在 View 控制器中调用 ApiClient 代码，它工作正常。为什么它不能从 Fetcher 类工作？我究竟做错了什么？

在 Fetcher getData 我有这个代码

```
APIClient* client = [APIClient sharedInstance];
[client setDelegate:self];
[client getData]; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:10:22.010

试试这个...

```
@protocol APIClientProtocol <NSObject>
@optional
- (void) handleMessage;
@end

@interface APIClient : NSObject
@property (readwrite, nonatomic, strong) id<APIClientProtocol> delegate;
@end

@implementation APIClient
@synthesize delegate;

- (void) someAPIClientWork 
{

   // Do some client work here

   if ( [self.delegate respondsToSelector:@selector(handleMessage)] )
      [self.delegate performSelector:@selector(handleMessage)];
}

@end 
```

.h 的 Fetcher

```
@interface Fetcher : NSObject <APIClientProtocol>
@end 
```

.m 的 Fetcher

```
@implementation Fetcher

- (void) someInit 
{
   APIClient *client = [APIClient sharedInstance];
   client.delegate = self;
}

- (void) handleMessage 
{

   // Something in APIClient was called
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:00:07.857

由于您没有将`Fetcher`在视图控制器中创建的对象分配给任何属性或任何东西，因此可能会在您分配它的任何方法结束时释放它。尝试将其添加到您的视图控制器：

。H

```
@interface ViewController

@property (strong, nonatomic) Fetcher *myFetcher; //Add this line in your view controller's interface
... 
```

.m

```
@implementation ViewController

@synthesize myFetcher;
...
Fetcher *fetcher = [[Fetcher alloc] init];
[fetcher getData];
self.myFetcher = fetcher;//Add this line in your code as well 
```

# jquery - jquery自定义事件附加到显示和隐藏（包括孩子）

> ID：10725288
> 
> 赞同：0
> 
> 时间：2012-05-23T17:53:06.920
> 
> 标签：jquery

好的，所以我已经为此工作了太长时间。请帮助我理解为什么它会这样。

我之前在这里发布了一个类似但不一样的问题：[jquery custom events attach to .show and .hide](https://stackoverflow.com/questions/10709364/jquery-custom-events-attached-to-show-and-hide)

我收到了对该问题的回复，其中包含一些有效的代码，但没有任何解释。

在所需功能方面，我已继续进行下一步，并且该帖子中提供的解决方案不满足这些扩展要求。我在尝试调整该代码时遇到了很多麻烦，但我不明白它为什么会这样。

我希望脚本在任何观察到的元素改变可见性时触发一个事件。该元素是否是显式显示/隐藏的元素，或者该元素是否具有正在显示/隐藏的祖先。

因此，如果我修改包含我正在观看的其他两个 div 的 div 的可见性，那么我希望这两个内部 div 中的每一个都触发一个事件，表明它们的可见性已经改变，即使我已经调用了 show/隐藏在祖先 div 上。

理想情况下，我希望在回调之前触发这些事件，以便我可以在用户看到任何更改之前执行任何受影响的代码。

听起来很简单吧.?!?

我注意到的问题之一是这两个示例的行为不同。对“question2”的操纵似乎根本不会触发“madeHidden”。这两个示例的行为不同。

这是我到目前为止不起作用的代码。请帮忙。

```
<script type="text/javascript">
    var hiddenBefore;
    var visibleBefore;
    function processRadioButtonASD1() {
        var isChecked = ($("input[name='question1']:checked").val() == "question1.Vermont");
        if (isChecked == true) {
            $("[data-uniquename='question2']").show(250);
        } else {
            $("[data-uniquename='question2']").hide(250);
        }
    }
    function watchVisibilityChange(uniqueName) {
        $("[data-uniquename='" + uniqueName + "']").bind("madeVisible", function () {
            alert($(this).attr("data-uniquename") + " was made visible");
        });
        $("[data-uniquename='" + uniqueName + "']").bind("madeHidden", function () {
            alert($(this).attr("data-uniquename") + " was made hidden");
        });
    }
    function processRadioButtonASD2() {
        var isChecked = ($("input[name='question5']:checked").val() == "question5.Vermont");
        if (isChecked == true) {
            $("[data-uniquename='c']").show(250);
        } else {
            $("[data-uniquename='c']").hide(250);
        }
    }
    $(function () {
        $.each(["show", "hide"], function () {
            var _oldFn = $.fn[this];
            $.fn[this] = function () {
                var _name = $(this).attr("data-uniquename");

                hiddenBefore = $(this).parent().find(":hidden");
                visibleBefore = $(this).parent().find(":visible");

                var result = _oldFn.apply(this, arguments);

                //trigger handler on newly visible elements                    
                hiddenBefore.filter(":visible").each(function () {
                    $(this).triggerHandler("madeVisible");
                });

                //trigger handler on newly hidden elements
                visibleBefore.filter(":hidden").each(function () {
                    $(this).triggerHandler("madeHidden");
                });
                return result;
            }
        });
    });
    $(document).ready(function () {

        watchVisibilityChange("question2");
        watchVisibilityChange("c.question6");
        watchVisibilityChange("c.question7");

        processRadioButtonASD1();
        processRadioButtonASD2();

        //hook up behavior to the appropriate change events
        $("input[name='question1']").change(function () {
            processRadioButtonASD1();
        });
        $("input[name='question5']").change(function () {
            processRadioButtonASD2();
        });
    });
</script> 
```

这是html。

```
 <div runat="server" id="promptContent">
    <div id="radioButtonASD" class="oneExample">
        <h2>
            radio button trigger one</h2>
        <div data-uniquename="question1" class="question">
            <label for="question1">
                Question 1) (select Vermont to show question2)
            </label>
            <br />
            <label data-uniquename="question1.Maine">
                <input name="question1" data-uniquename="question1.Maine" type="radio" value="me" />Maine</label><br />
            <label data-uniquename="question1.Vermont">
                <input name="question1" data-uniquename="question1.Vermont" type="radio" value="question1.Vermont" />Vermont</label><br />
            <label data-uniquename="question1.NewHampshire">
                <input name="question1" data-uniquename="question1.NewHampshire" type="radio" value="question1.NewHampshire" />New
                Hampshire</label><br />
            <label data-uniquename="question1.Conneticut">
                <input name="question1" data-uniquename="question1.Conneticut" type="radio" value="question1.Conneticut" />Conneticut</label><br />
            <label data-uniquename="question1.Massachusetts">
                <input name="question1" data-uniquename="question1.Massachusetts" type="radio" value="question1.Massachusetts" />Massachusetts
            </label>
        </div>
        <div data-uniquename="question2" class="question">
            <label>
                Question 2)
            </label>
            <br />
            <select>
                <option data-uniquename="question2.honda" value="honda">Honda</option>
                <option data-uniquename="question2.volvo" value="volvo">Volvo</option>
                <option data-uniquename="question2.saab" value="saab">Saab</option>
                <option data-uniquename="question2.mercedes" value="mercedes">Mercedes</option>
                <option data-uniquename="question2.audi" value="audi">Audi</option>
            </select>
        </div>
    </div>
    <div id="cascadingASD" class="oneExample">
        <h2>
            radio button trigger multiple</h2>
        <div data-uniquename="question1" class="question">
            <label for="question1">
                Question 5) (select Vermont to show question6)
            </label>
            <br />
            <label data-uniquename="question5.Maine">
                <input name="question5" data-uniquename="question5.Maine" type="radio" value="me" />Maine</label><br />
            <label data-uniquename="question5.Vermont">
                <input name="question5" data-uniquename="question5.Vermont" type="radio" value="question5.Vermont" />Vermont</label><br />
            <label data-uniquename="question5.NewHampshire">
                <input name="question5" data-uniquename="question5.NewHampshire" type="radio" value="question5.NewHampshire" />New
                Hampshire</label><br />
            <label data-uniquename="question5.Conneticut">
                <input name="question5" data-uniquename="question5.Conneticut" type="radio" value="question5.Conneticut" />Conneticut</label><br />
            <label data-uniquename="question5.Massachusetts">
                <input name="question5" data-uniquename="question5.Massachusetts" type="radio" value="question5.Massachusetts" />Massachusetts
            </label>
        </div>
        <div data-uniquename="c">
            <div data-uniquename="c.question6" class="question">
                <label>
                    Container Question 6)
                </label>
                <br />
                <select>
                    <option data-uniquename="c.question6.honda" value="honda">Honda</option>
                    <option data-uniquename="c.question6.volvo" value="volvo">Volvo</option>
                    <option data-uniquename="c.question6.saab" value="saab">Saab</option>
                    <option data-uniquename="c.question6.mercedes" value="mercedes">Mercedes</option>
                    <option data-uniquename="c.question6.audi" value="audi">Audi</option>
                </select>
            </div>
            <div data-uniquename="c.question7" class="question">
                <label>
                    Container Question 7)
                </label>
                <br />
                <select>
                    <option data-uniquename="c.question7.honda" value="honda">Honda</option>
                    <option data-uniquename="c.question7.volvo" value="volvo">Volvo</option>
                    <option data-uniquename="c.question7.saab" value="saab">Saab</option>
                    <option data-uniquename="c.question7.mercedes" value="mercedes">Mercedes</option>
                    <option data-uniquename="c.question7.audi" value="audi">Audi</option>
                </select>
            </div>
        </div>
    </div>
</div> 
```

我真的很喜欢一个解决方案，但大多数时候我很想知道为什么这不能按预期工作。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T14:45:54.713

我很确定我想通了。我确实提高了我的理解力，拔了一些头发，似乎已经达到了我的目标。

```
 $.each(["hide"], function () {
        var effect = $.fn[this];
        $.fn[this] = function (duration, move, callback) {
            var speed = duration;
            var easing = callback && move || move && !jQuery.isFunction(move) && move;
            var _mainElement = $(this);
            var _mainElementOriginallyVisible = $(this).is(":visible");
            var _visibleChildrenBefore = $(this).find(":visible");
            return effect.call(this, speed, easing, function () {
                if (_mainElementOriginallyVisible == true) { _mainElement.triggerHandler("madeHidden"); }
                _visibleChildrenBefore.each(function () {
                    if (!($(this).is(":visible"))) {
                        if ($(this).attr("data-un") !== undefined) { $(this).triggerHandler("madeHidden"); }
                    }
                });
            });
        };
    });
    $.each(["show"], function () {
        var effect = $.fn[this];
        $.fn[this] = function (duration, move, callback) {
            var speed = duration;
            var easing = callback && move || move && !jQuery.isFunction(move) && move;
            var _mainElement = $(this);
            var _mainElementOriginallyVisible = $(this).is(":visible");
            var _hiddenChildrenBefore = $(this).find(":hidden");
            return effect.call(this, speed, easing, function () {
                if (_mainElementOriginallyVisible == false) { _mainElement.triggerHandler("madeVisible"); }
                _hiddenChildrenBefore.each(function () {
                    if (!($(this).is(":hidden"))) {
                        if ($(this).attr("data-un") !== undefined) { $(this).triggerHandler("madeVisible"); }
                    }
                });
            });
        };
    }); 
```

我在原始代码中遇到的最值得注意的问题似乎与异步动画有关。我的代码在触发动画后立即执行，并且没有等待它完成，所以我试图隐藏的元素实际上并没有隐藏在后续的代码行中......等等。

在继续执行之前，我必须利用回调参数等待动画完成。

这是我得到的代码。我相信它可以被提炼。 **请毫不犹豫地提供有关如何收紧此代码的建议**。我只有一周左右的时间进入 jQuery 并且我想学习。

我认识到除了显示/隐藏之外还有其他方法可以改变元素的可见性，我对必须使用这些方法来触发自定义事件的限制感到满意。我还故意应用了一个限制，即只有具有我的自定义属性*data-un*（曾经是*data-uniquename*）的项目才会触发事件。

-托德

# facebook-php-sdk - 从 facebook 应用程序中检索 appdata

> ID：10725294
> 
> 赞同：0
> 
> 时间：2012-05-23T17:53:39.147
> 
> 标签：facebook-php-sdk, facebook-apps

经过近 2 小时的尝试，我将其发布在这里，

我正在尝试检索传递给我的 facebook 应用程序的参数列表。这是我的应用程序，[https://apps.facebook.com/takeflights/index.php](https://apps.facebook.com/takeflights/index.php)

当我使用此 URL [https://apps.facebook.com/takeflights/index.php?id=5](https://apps.facebook.com/takeflights/index.php?id=5)加载应用程序时， $signed_request['app_data'] 没有返回任何内容，

以下是我的代码的一部分：

```
$facebook = new Facebook(array(
                'appId' => 'xxxxxxxxxxxx',
                'secret' => 'xxxxxxxxxx',
        ));

        $signed_request = $facebook->getSignedRequest();
        print_r($signed_request['app_data']); 
```

我也在应用程序设置中搜索“允许签名请求”，但没有找到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:28:02.860

您的查询仅打印`app_data`签名请求的一部分。这必须由您的应用程序通过查询字符串手动填充。

为此，您的查询应如下所示：

[https://apps.facebook.com/takeflights/index.php?appdata=id%3D5%26page%3D1](https://apps.facebook.com/takeflights/index.php?appdata=id%3D5%26page%3D1)

# c++ - 了解移动语义与模板元编程的好处

> ID：10725299
> 
> 赞同：17
> 
> 时间：2012-05-23T17:54:09.790
> 
> 标签：c++, templates, c++11, move-semantics

我已经阅读了一些关于 C++11 中移动语义的描述，我想知道它可以在什么上下文中使用。目前，许多 C++ 数学库使用模板元编程来延迟评估。

如果 M = A + B + C*D，其中 M、A、B、C 和 D 是矩阵，则模板元编程允许避免无用的副本。移动语义是一种更方便的方式来做这些事情吗？

如果不是，在什么上下文中使用移动语义。如果是，与模板元编程相比，这种用途有什么区别/限制？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-23T18:12:19.263

我相信您所说的“模板元编程”的更准确术语是[表达式模板](http://en.wikipedia.org/wiki/Expression_templates)。

如果您的矩阵动态分配其数据，则移动语义可以帮助将数据从对象传输到对象（包括到/从临时对象）在表达式期间生成，例如：

```
M = A + B + C*D 
```

另一方面，表达式模板将完全消除临时变量。

如果您的矩阵没有动态分配它们的数据（例如，如果它们是固定大小且很小的），则移动语义根本不会帮助您的性能。

将表达式模板应用于矩阵库将获得最高性能。这也是一个非常困难的实现技术。移动语义实现起来要容易*得多*，并且可以在表达式模板之外完成（如果有可以转移的内存等资源）。

总之：

移动语义不会消除临时内存，而是会在临时内存之间传输动态分配的内存，而不是重新分配内存。

表达式模板消除了临时性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-23T18:19:45.217

我不是这些优化方面的专家，但据我了解，您正在谈论的延迟评估技术通过在矩阵类型上定义算术运算符来工作，例如`A+B+C*D`不返回矩阵，它返回一个代理对象可以*转换*成矩阵。当它被分配给 时会发生这种情况`M`，并且转换代码将通过库设计者可以想出的最有效的方式计算结果矩阵的每个单元格，避免临时矩阵对象。

所以，假设程序包含`M = A + B + C * D;`

如果您除了`operator+`使用 以通常的方式实现之外没有做任何聪明的`operator+=`事情，那么一旦正常，您就会得到类似的东西，C++03 风格的复制省略已经开始了：

```
Matrix tmp1 = C;
tmp1 *= D;
Matrix tmp2 = A;
tmp2 += B;
tmp2 += tmp1;
M = tmp2; 
```

通过延迟评估，您可能会得到更多类似的信息：

```
for (int i = 0; i < M.rows; ++i) {
    for (int j = 0; j < M.cols; ++j) {
        /* not necessarily the best matrix multiplication, but serves to illustrate */
        c_times_d = 0;
        for (int k = 0; k < C.cols; ++k) {
            c_times_d += C[i][k] * D[k][j];
        }
        M[i][j] = A[i][j] + B[i][j] + c_times_d;
    }
} 
```

而“没什么聪明”的代码会做几个单独的加法循环和更多的分配。

据我所知，在这种情况下，移动语义没有多大帮助。您所写的内容中没有任何内容允许我们从 、 或 移动`A`，所以`B`我们最终会得到相当于：`C``D`

```
Matrix tmp1 = C;
tmp1 *= D;
Matrix tmp2 = A;
tmp2 += B;
tmp2 += std::move(tmp1);
M = std::move(tmp2); 
```

所以移动语义除了最后一点之外没有任何帮助，也许右值版本的操作符比普通的更好。如果你写了，还有更多可用的`std::move(A) + std::move(B) + std::move(C) * std::move(D)`，因为我们不必从`C`or复制`A`，但我仍然认为结果不如延迟评估代码好。

基本上，移动语义对延迟评估提供的优化的一些重要部分没有帮助：

1）通过延迟评估，中间结果永远不需要作为完整矩阵实际存在。移动语义不会使编译器免于`A+B`在某些时候在内存中创建完整的矩阵。

2）通过延迟评估，我们可以`M`在计算完整个表达式之前开始修改。移动语义并不能帮助编译器重新排序修改：即使编译器足够聪明，可以发现潜在的机会，如果有任何抛出异常的危险，对非临时变量的修改也*必须*保持正确的顺序，因为如果有`A + B + C * D`投掷的一部分，然后`M`必须保持原样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T18:02:08.533

他们是两种不同的野兽。移动语义是关于从将要被销毁的值中分配资源。当与大整数（需要动态内存分配）的表达式模板混合时，人们会简单地使用这样的内存，而不是复制即将被销毁的东西。

移动语义对于本质上不可复制的对象（如 fstreams）也很重要，*但*使其*可移动*是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T18:02:29.553

移动语义适用于对象内管理的资源，用于避免在创建临时对象时不必要地获取/释放资源（即动态分配的内存是一种资源）。

模板元编程对结构进行操作，这些结构在堆栈上分配（因为它需要对操作数进行编译时评估）。您可以使用它来避免可以在编译时计算的操作的运行时计算

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T19:01:07.060

移动语义是动态的，表达式模板不是。您不能对分布在多个语句中的表达式进行表达式模板化，并且其中一些仅在月亮是蓝色时才被评估，而移动语义可以。

# c# - 如何创建具有 3 个组合框和每个组合框不同的数据绑定的用户控件？

> ID：10725304
> 
> 赞同：0
> 
> 时间：2012-05-23T17:54:26.230
> 
> 标签：c#, data-binding, controls, combobox

在最终决定问这个问题之前，我做了一些广泛的搜索。我按照 MSDN 教程创建了使用简单、复杂和查找数据绑定的用户控件。

*   [演练：创建支持简单数据绑定的用户控件](http://msdn.microsoft.com/en-us/library/ms171926%28v=vs.80%29.aspx)
*   [演练：创建支持复杂数据绑定的用户控件](http://msdn.microsoft.com/en-us/library/ms233813%28v=vs.80%29.aspx)
*   [演练：创建支持查找数据绑定的用户控件](http://msdn.microsoft.com/en-us/library/ms233787%28v=vs.80%29.aspx)

而且它们工作得很好……对于只使用单个 Combobox 或 Gridview 的用户控件。

现在我想用三个不同的组合框创建一个用户控件。我想将每个绑定到不同的表。这些表是“名称”、“类型”和“产品”。

MSDN 教程涉及为单个 Combobox 创建 DataBindingProperties，但没有展示如何为包含多个 Combobox 的用户控件执行相同操作。

```
using System.Windows.Forms;
namespace CS
{
    [System.ComponentModel.LookupBindingProperties(
       "DataSource", "DisplayMember", "ValueMember", "LookupMember")]
    public partial class LookupBox : UserControl
    {
        public object DataSource
        {
            get{ return comboBox1.DataSource; }
            set{ comboBox1.DataSource = value; }
        }

        public string DisplayMember
        {
            get{ return comboBox1.DisplayMember; }
            set{ comboBox1.DisplayMember = value; }
        }

        public string ValueMember
        {
            get{ return comboBox1.ValueMember; }
            set{ comboBox1.ValueMember = value; }
        }

        public string LookupMember
        {
            get{ return comboBox1.SelectedValue.ToString(); }
            set{ comboBox1.SelectedValue = value; }
        }

        public LookupBox()
        {
            InitializeComponent();
        }
    }
} 
```

现在，如您所见，代码中只提到了一个 Combobox。我需要三个组合框，每个组合框都绑定到上面提到的不同表。

拜托，我正在用头撞墙。我不太精通用户控件（尽管我在 ASP.NET 中使用过它们），但制作一个似乎是个好主意，因为我将在不同的地方大量使用这三个组合框我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T17:57:21.843

你可以简单地用你所需要的来推断你所知道的：

```
public object DataSource1
{
    get{ return comboBox1.DataSource; }
    set{ comboBox1.DataSource = value; }
}
public object DataSource2
{
    get{ return comboBox2.DataSource; }
    set{ comboBox2.DataSource = value; }
}
public object DataSource3
{
    get{ return comboBox3.DataSource; }
    set{ comboBox3.DataSource = value; }
} 
```

尽管您可能希望使用比 ..1、..2、..3 更好的描述性名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:02:48.007

我会创建一个`UserControl`包含你`LookupBox`的三个的。例如：

```
public partial class MyLookupBoxes : UserControl
{
    public LookupBox()
    {
        // Add the 3 LookupBox to this UserControl using the designer
        InitializeComponent();
        SetupDataSources();
    }

    private void SetupDataSources()
    {
        namesLookupBox1.DataSource = names_data_source_1;
        // ...
        typesLookupBox2.DataSource = types_data_srouce_2;
        // ...
        productsLookupBox3.DataSource = products_data_srouce_2;
        // ...
    }
} 
```

# asp.net-mvc - 保存更改后依赖字段不刷新

> ID：10725305
> 
> 赞同：0
> 
> 时间：2012-05-23T17:54:27.150
> 
> 标签：asp.net-mvc

我有一个显示 StartDate 和 EndDate 的视图，以及一个显示两个日期之间天数的只读字段。所有这些字段都使用剃刀视图定义中的标准 @Html.EditorFor() 方法绑定到我的模型。当我更改其中一个日期并单击保存时，

```
[HttpPost]
ViewResult Edit([modeltype] editedModel){
 ... } 
```

方法在将新日期和计算值保存到数据库之前计算并设置计算字段的新值，然后返回具有更新模型的视图。我遇到的问题是视图没有显示新的计算值（而是根据初始页面加载显示原始计算值）。直到我离开并返回该视图 - 然后它会正确显示计算值。知道我错过了什么吗？浏览器是否可能在我的 HttpPost 之后显示页面的缓存版本？如果是这样，我可以禁用该行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:19:54.503

Html 助手更喜欢`ModelStateCollection`实际的`Model`. 这意味着它们将显示发布的值，而不是您在控制器中更新的值。

因此，如果您想返回与您的操作相同的模型，并且您已经更改了一些值，您需要`ModelState`在返回模型之前清除：

```
[HttpPost]
public ViewResult Edit(MyModel editedModel)
{

   //set some properties on editedModel

   ModelState.Clear();
   return View(editedModel);
} 
```

# audio-recording - Etiam cursus semper leo vel facilisis。sed 障碍

> ID：10725313
> 
> 赞同：0
> 
> 时间：2012-05-23T17:55:42.487
> 
> 标签：audio-recording, volume, coronasdk

Etiam cursus semper leo vel facilisis。sed imperdiet, nisi nec vulputate fringilla, neque nulla gravida risus, vitae scelerisque turpis augue ut felis。整数 ultrices auctor nunc id volutpat。Curabitur dapibus sagittis ante et ornare。Praesent dapibus consectetur massa, vel faucibus lectus rut​​rum vel。Maecenas imperdiet, massa vitae consequat tempus, odio velit gravida magna, ac porttitor odio elit sit amet dui。Nunc sem leo，pretium eu tempus vel，auctor eget enim。sed bibendum ipsum eu sem ultricies sed fringilla mauris condimentum。Suspendisse in ipsum semper ante auctor consectetur eget fringilla elit。Nullam dictum faucibus enim。

# hibernate - Hibernate 工具 - 配置 JNDI 连接

> ID：10725317
> 
> 赞同：3
> 
> 时间：2012-05-23T17:55:52.753
> 
> 标签：hibernate, eclipse-plugin, hibernate-tools

我已经为 Eclipse Indigo 安装了 Hibernate Tools Eclipse 插件，因为我想使用该功能来测试我的 HQL 查询并尝试针对我的数据库运行它们并“实时”解析结果。

在我的`hibernate.cfg.xml`文件中，我定义了一个 JNDI 连接，如下所示：

```
<property name="connection.datasource">java:/comp/env/jdbc/acertDB</property> 
```

因为我有一个 JNDI 文件，所以我正在使用一个`context.xml`定义连接并存在于我的 META-INF 文件夹中的文件。该文件的全部内容如下。

```
 <Context crossContext="true" docBase="acert" path="/acert" reloadable="false" useHttpOnly="true">
    <ResourceLink global="jdbc/acertDB" name="jdbc/acertDB" type="javax.sql.DataSource" />
    </Context> 
```

我正在使用 Tomcat 通过以下条目管理我的数据库连接。

我的网络应用程序运行良好。只有为 Hibernate Tools 配置连接是我的问题。

我的问题是如何与 Hibernate Tools 建立连接，而不必创建包含所有连接信息或将所有连接信息放入的附加属性文件`hibernate.cfg.xml`？

# java - Ruby 中的 Java 兼容 REST 客户端

> ID：10725318
> 
> 赞同：0
> 
> 时间：2012-05-23T17:55:55.993
> 
> 标签：java, ruby, rest, jruby, client-library

我需要创建一个客户端库来通过 HTTPS 访问基于 REST 的 Web 服务。

不太熟悉 Java，我想在 Ruby 中执行此操作，然后编译为 jar。

我将发送的有效负载将（以 JSON 格式）类似于：

```
{
  "api-token": "12345",
  "org_number": 5,
  "name": "ABC corp",
  "users": {
    "employee_number": 1,
    "name": "bob jones",
    "email": "bob@abc.com"
  }
} 
```

我假设客户端库需要：

*   使用 API 令牌初始化一个新的 API 接口实例
*   提供实例组织信息和用户集
*   告诉实例将组织和用户序列化为 JSON，并 POST 到网络服务 /org/new

所以我的问题是：

*   如何构建我的 Ruby 类以生成 Java 程序员会熟悉的接口（例如[http://twitter4j.org/en/code-examples.html](http://twitter4j.org/en/code-examples.html)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T20:19:23.877

你考虑过JRuby吗？

[https://github.com/jruby/jruby/wiki](https://github.com/jruby/jruby/wiki)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:25:17.460

你听说过[ApiClient](https://github.com/zertico/api-client/)吗？

它在导轨内运行良好，使您的控制器尽可能薄。但它也适用于非 Rails 应用程序。

它为每种类型的 http 代码响应引发不同的异常，以便您轻松控制基于服务器响应的客户端逻辑。

它使用 api 响应为您自动初始化一个对象，并通过 json 发送所有请求。

它仍在开发中，因此请告诉我您可能需要的任何功能。

我用它来访问需要 OAUTH2 令牌的 API，到目前为止它工作得很好。

希望你喜欢。=)

# jquery - 使用 Ajaxify 和 history.js，滑块脚本现在不会在状态更改时加载

> ID：10725319
> 
> 赞同：0
> 
> 时间：2012-05-23T17:56:05.810
> 
> 标签：jquery, ajax, jquery-ui-slider

我将 Ajaxify 与 history.js 结合使用（在[此处](https://gist.github.com/854622)找到）我的网站现在是 ajax，并且我的网站的正确部分会随着状态变化而改变，但是当我返回索引页面时，我使用的特色滑块（Anything Slider）是'不加载所需的脚本，从而使其显示为帖子列表，直到页面刷新。

我对 js 很陌生，所以请放轻松；）

谢谢

如果您需要任何东西的粘贴箱，请告诉我。

# apache-flex - Flex 4、AdvancedDataGrid：初始列宽

> ID：10725320
> 
> 赞同：0
> 
> 时间：2012-05-23T17:56:08.443
> 
> 标签：apache-flex, advanceddatagrid, column-width

我遇到了高级数据网格列的宽度问题。首先，我的布局是一个HDvidedBox，左边是导航，右边是模块，里面有advanceddatagrid。

左侧：导航

右侧：模块（例如高级数据网格）

大多数列都有固定的宽度，有些是 minWidth。现在，最初列的宽度是正确的。

所以问题是，每当我加载一个新模块然后重新加载高级数据网格时，列的初始宽度是不同的，尽管我在加载模块的过程中没有任何改变。固定宽度和 minWidths 最初都不正确。我最近看到有一个错误宽度的列的解决方案，它看起来像这样：

```
var oldPolicy:String = advanceddatagrid.myScrollPolicy;
advanceddatagrid.myScrollPolicy = ScrollPolicy.ON;

for(var i:int = 0; i < advanceddatagrid.columns.length; i++) {
    var column:AdvancedDataGridColumn = advanceddatagrid.columns[i] as AdvancedDataGridColumn;
    advanceddatagrid.column.width = column.width;
}
advanceddatagrid.validateNow();             
advanceddatagrid.myScrollPolicy = oldPolicy;                
advanceddatagrid.validateNow(); 
```

总的来说，这只是 ScrollPolicy 的临时更改，重新设置列宽，然后再改回来。但是，它仍然不起作用。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:23:56.817

一些可能有帮助的相关参考资料（第一个对我有用）：

[http://userflex.wordpress.com/2011/04/14/force-resize-datagrid/](http://userflex.wordpress.com/2011/04/14/force-resize-datagrid/)

[http://forums.adobe.com/message/4285461](http://forums.adobe.com/message/4285461)

总结第一篇文章（感谢 Nick Schneble）：

```
public function resizeColumns () : void
{
    grid.validateNow ();
    // forces the columns to size themselves properly
    for each (var column : AdvancedDataGridColumn in grid.columns)
    {
        column.width = column.width;
    } 
} 
```

这可能看起来有点荒谬，但如果您在数据网格中的基础数据发生变化时执行此方法，您将拥有精美的列布局。

# python - python中元组拆包的语义

> ID：10725322
> 
> 赞同：28
> 
> 时间：2012-05-23T17:56:09.080
> 
> 标签：python, tuples, iterable-unpacking

为什么 python 在函数调用中只允许命名参数跟随元组解包表达式？

```
>>> def f(a,b,c):
...     print a, b, c
... 
>>> f(*(1,2),3)
  File "<stdin>", line 1
SyntaxError: only named arguments may follow *expression 
```

这仅仅是一种审美选择，还是在某些情况下允许这样做会导致一些歧义？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T22:10:55.393

我很确定人们“自然”不喜欢这个的原因是因为它使后面的论点的含义模棱两可，具体取决于插值序列的长度：

```
def dangerbaby(a, b, *c):
    hug(a)
    kill(b) 

>>> dangerbaby('puppy', 'bug')
killed bug
>>> cuddles = ['puppy']
>>> dangerbaby(*cuddles, 'bug')
killed bug
>>> cuddles.append('kitten')
>>> dangerbaby(*cuddles, 'bug')
killed kitten 
```

仅查看最后两个调用，您无法分辨出`dangerbaby`哪一个按预期工作，哪一个杀死了小猫毛茸茸的小猫。

当然，在最后进行插值时，也存在一些不确定性。但混淆仅限于插值序列 - 它不会影响其他参数，例如`bug`.

[我快速搜索了一下是否可以找到任何官方信息。似乎[在 python 0.9.8 中引入](http://www.python.org/search/hypermail/python-1993/0001.html)了 varags 的 * 前缀。前面的语法[在这里讨论](http://www.python.org/search/hypermail/python-1992/0260.html)，它的工作规则相当复杂。由于在没有 * 标记的情况下“必须”添加额外的参数，因此似乎只是延续了。最后这里[提到](http://www.python.org/search/hypermail/python-1992/0292.html)了关于参数列表的长时间讨论，而不是通过电子邮件。]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T23:22:47.907

我怀疑这是为了与函数定义中的星号保持一致，毕竟这是函数调用中星号的模型。

在下面的定义中，参数`*c`将 slurp 所有后续的非关键字参数，所以很明显，当`f`被调用时，传递值的唯一方法`d`是作为关键字参数。

```
def f(a, b, *c, d=1):
    print "slurped", len(c) 
```

（这种“仅关键字参数”仅在 Python 3 中受支持。在 Python 2 中，*无法*在带星号的参数之后分配值，因此上述内容是非法的。）

因此，在函数*定义*中，带星号的参数必须跟在所有普通的位置参数之后。您观察到的是，相同的规则已扩展到函数调用。这样，星型语法对于函数声明和函数调用是一致的。

另一个并行性是在函数调用中只能有一个（单）星号参数。以下是非法的，尽管人们很容易想象它是被允许的。

```
f(*(1,2), *(3,4)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:20:16.287

首先，使用包装函数自己提供一个非常相似的接口很简单：

```
def applylast(func, arglist, *literalargs):
  return func(*(literalargs + arglist))

applylast(f, (1, 2), 3)  # equivalent to f(3, 1, 2) 
```

其次，增强解释器以原生支持您的语法可能会增加函数应用程序对性能非常关键的活动的开销。即使它只需要编译代码中的一些额外指令，由于这些例程的高使用率，这可能构成不可接受的性能损失，以换取用户库中不经常调用且容易容纳的特性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-12T19:16:01.697

一些观察：

1.  Python 在关键字参数之前处理位置参数（`f(c=3, *(1, 2))`在您的示例中仍然打印`1 2 3`）。这是有道理的，因为 (i) 函数调用中的大多数参数都是位置参数，并且 (ii) 编程语言的语义需要明确（即，需要根据处理位置参数和关键字参数的顺序进行选择） ）。
2.  如果我们在函数调用中确实有一个位于右侧的位置参数，那么很难定义它的含义。如果我们打电话`f(*(1, 2), 3)`，那应该是，`f(1, 2, 3)`还是`f(3, 1, 2)`为什么任何一个选择比另一个更有意义？
3.  对于官方解释，[PEP 3102](http://www.python.org/dev/peps/pep-3102/)提供了很多关于函数定义如何工作的见解。*函数定义*中的星号 (*)表示位置参数的结束（*规范*部分）。要了解原因，请考虑`def g(a, b, *c, d)`：`d`除了作为关键字参数之外，没有其他方法可以提供值（位置参数将被 '抓住' `c`）。
4.  重要的是要意识到这意味着什么：因为星号标志着位置参数的结束，这意味着所有位置参数都必须在那个位置或者在它的左边。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:01:22.730

更改顺序：

```
def f(c,a,b):
    print(a,b,c)
f(3,*(1,2)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T20:51:58.833

如果你有一个 Python 3 关键字参数，比如

```
def f(*a, b=1):
    ... 
```

那么您可能希望`f(*(1, 2), 3)`设置`a`为`(1 , 2)`和`b`to之类的东西`3`，但是当然，即使您想要的语法被允许，它也不会，因为仅关键字参数必须是仅关键字参数，例如`f(*(1, 2), b=3)`. 如果允许，我想它必须设置`a`为`(1, 2, 3)`并保留`b`为默认值`1`。因此，可能与其说是语法上的歧义，不如说是在预期中的歧义，这是 Python 极力避免的。

# android - 存储和查看图像 blob html.fromhtml android

> ID：10725324
> 
> 赞同：0
> 
> 时间：2012-05-23T17:56:21.083
> 
> 标签：android, blob, ormlite

我正在尝试在我的数据库中显示保存为 blob 的图像。我正在使用 ORMLite 和 Android 1.6。我创建了一个显示 'html.FromHtml' 的 textView

这是代码：

```
//Save the image in DB.
    ...
    Bitmap myBitmap = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory().toString()+"/images/imagem.png");
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    myBitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] byteArray = stream.toByteArray();
    glossary.setImageBytes(byteArray); 
```

“词汇表”是词汇表的一个实例。谁拥有“imageBytes”字段：

```
@DatabaseField(dataType = DataType.BYTE_ARRAY)  
private byte[] imageBytes; 
```

在我的活动中，我将此“imageBytes”传递给字符串以使用“html.FromHtml”：

```
//Activity
...
String htmlContent = "<h1> Title </h1> 
                      <img src=\""+glossary.getImageBytes.toString()+"\" />" 
```

现在在我的适配器中，我尝试显示“htmlContent”的内容：

```
//Adapter
...
holder.tvContent.setText(Html.fromHtml(htmlContent, new Html.ImageGetter() {
            @Override
            public Drawable getDrawable(String source) {  
                    byte[] data;
                    data = source.getBytes();
                    Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
                    //Log.i("bitmap", "bitmap height:" + String.valueOf(bitmap.getHeight) );
                    //THIS LOG RETURN NPE
                    Drawable d = null;  
                    d = new BitmapDrawable(getResources(),bitmap);
                    d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
                    return d;   
                }
            }, null));
... 
```

我认为问题在于当我将字节更改为字符串并将字符串更改为字节时。因为“BitmapFactory.decodeFile()”创建的位图返回一个 NPE。

但我不知道如何解决。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:02:36.987

当然，您的第一个问题是您不应该这样做：

```
glossary.getImageBytes().toString() 
```

要将 a`byte[]`变成 a`String`你应该这样做：

```
new String(glossary.getImageBytes()) 
```

如果你这样做`byte[].toString()`，它将被设置为：

```
[B@3487a5cc 
```

而不是`String`由数组中的字节组成。

也就是说，我不确定您是否可以将`PNG`文件中的字节放入`byte[]`数组中以打印为`String`. 听起来您将在 HTML 中打印二进制信息，我认为这些信息不会正确转换。此外，看起来您正在将`PNG`字节放入`src="..."`HTML 部分。AFAIK 也行不通。

# google-contacts-api - Google Contacts API 3.0 的详尽、准确和完整的描述在哪里？

> ID：10725325
> 
> 赞同：1
> 
> 时间：2012-05-23T17:56:31.690
> 
> 标签：google-contacts-api

此处描述了 Google Contacts API 3.0： [https](https://developers.google.com/google-apps/contacts/v3/reference) ://developers.google.com/google-apps/contacts/v3/reference但此文档并不完整。

在谷歌联系人表单中，我可以输入用于归档记录的名称，而不是联系人全名。我可以通过 XML 或 JSON 访问记录，并将此字段作为`gContact:fileAs`. 但参考文档不包含`gContact:fileAs`.

此参考文档中还缺少什么？

另一方面，描述包含 gContact:billingInformation 或 gContact:jot 或 gContact:mileage 等字段，这些字段似乎在联系表单中没有位置。所以对我来说似乎没有办法在这些字段之一中输入值，所以它们永远不会包含任何东西，所以它们永远不会出现在我可以从谷歌获得的 xml 或 json 文件中。所以我认为没有必要在我的应用程序中实现这些字段。- 还是我错了？

## 所以，请：

Google Contacts API 3.0的详尽、准确和***完整的描述在哪里？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T01:55:54.153

目前最好的资源是：[https](https://developers.google.com/google-apps/contacts/v3/) ://developers.google.com/google-apps/contacts/v3/ & [https://developers.google.com/google-apps/contacts/v3/reference](https://developers.google.com/google-apps/contacts/v3/reference)，这是最准确的以及目前可用的最新资源。

我意识到这不是您想要的答案，但它仍然是正确的答案。

# actionscript-3 - ActionScript 3.0 错误 #1010 - 预加载器功能

> ID：10725327
> 
> 赞同：0
> 
> 时间：2012-05-23T17:56:45.120
> 
> 标签：actionscript-3

我是 Flash 和 ActionScript 新手。我正在尝试按照[视频教程](http://www.youtube.com/watch?v=oC31Pc5SCHM)制作预加载器，但我遇到了视频似乎没有解决的问题。我相信我已经从视频中正确输入了所有代码。就是这个：

```
stop();

addEventListener(Event.ENTER_FRAME, loaderF);

function loaderF(e:Event):void{
    var toLoad:Number = loaderInfo.bytesTotal;
    var loaded:Number = loaderInfo.bytesLoaded;
    var total:Number = loaded/toLoad;
    if( loaded == toLoad ){
        removeEventListener(Event.ENTER_FRAME, loaderF);
        gotoAndStop(2);
    } else {
        preloader_mc.preloaderFill_mc.scaleX = total;
        preloader_mc.percent_txt.text = Math.floor( total * 100 ) + "%";
        preloader_mc.ofBytes_txt.text = loaded + "bytes";
        preloader_mc.totalBytes_txt.text = toLoad + "bytes";
    }
} 
```

我输入的内容不会产生编译器错误，但输出告诉我：

```
TypeError: Error #1010: A term is undefined and has no properties.
at preloader_fla::MainTimeline/loaderF() 
```

而且由于除了从本教程系列中学到的东西之外，我真的没有任何经验，所以我不知道该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:13:01.327

我不使用 Flash CS5，但我相信，通过按 CTRL+SHIFT+ENTER 执行 SWF，您应该能够获得错误发生位置的 # 行。

获得行号后，您应该会看到该行上的某些内容为空或未定义。该错误表示它发生在 function`loaderF()`中，并且查看该代码，唯一可能发生此类错误的地方是 else 块：

```
} else {
        preloader_mc.preloaderFill_mc.scaleX = total;
        preloader_mc.percent_txt.text = Math.floor( total * 100 ) + "%";
        preloader_mc.ofBytes_txt.text = loaded + "bytes";
        preloader_mc.totalBytes_txt.text = toLoad + "bytes";
    } 
```

在上面的代码块中，未定义以下内容之一： `preloader_mc.preloaderFill_mc`, `preloader_mc.percent_txt`, `preloader_mc.ofBytes_txt`, `preloader_mc.totalBytes_txt`

也许您的预加载器影片剪辑缺少这些对象之一...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:20:48.063

首先，您需要打开在`(File > Publish Settings > Flash (.swf) > Permit Debugging)`. 这将提供行号并允许进行额外的调试以帮助追踪错误。

其次，在您提供的代码示例中，您没有声明加载程序，因此当您调用时`loaderInfo`，flash 抱怨“一个术语未定义”是有道理的。尽管从技术上讲，loaderInfo 对象是事件对象的子对象。因此，假设您将事件侦听器添加到加载器对象，`loaderInfo.bytesTotal`将变为`e.loaderInfo.bytesTotal`；目前您的已添加到时间线中。

为 Adob​​e 的[Actionscript 3.0 参考添加](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/index.html)书签。用它。当您开始您的 Flash 之旅时，这将是您学习 AS3 不可或缺的手册。具体来说，您需要参考[Loader 类](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)。

以下是您的代码中可能缺少的内容：

```
var myLoader:Loader = new Loader();
myLoader.load(new URLRequest("path/to/my/file")); 
```

`loaderF`在屏幕的每一帧更新期间（可能每 0.034 秒）都会调用您的函数。你可能会更高兴`ProgressEvent.PROGRESS`而不是`Event.ENTER_FRAME`. 如果是这样，您还需要捕获完整的事件，看起来像这样：

```
myLoader.addEventListener(Event.COMPLETE, loadComplete);
myLoader.addEventListener(ProgressEvent.PROGRESS, loadProgress);

function loadComplete(e:Event):void {
    // Stuff to do when the file finishes loading.
}

function loadProgress(e:Event):void {
    var current:int = e.bytesLoaded;
    var total:int = e.bytesTotal;
    var percent:Number = current/total;

    // Update the readout of your loading progress.
} 
```

希望这会为您指明正确的方向。:)

# asp.net-mvc - 分析、站点地图、路由多合一的 Asp.Net Mvc 解决方案

> ID：10725329
> 
> 赞同：1
> 
> 时间：2012-05-23T17:56:47.683
> 
> 标签：asp.net-mvc, analytics, servicestack, asp.net-mvc-sitemap

我正在计划用于分析、站点地图和路由的一站式解决方案。

我必须使用 Asp.Net mvc 中的哪个扩展机制？一些站点地图和分析问题可以在路由级别解决。我认为使用 3rd 方站点地图解决方案存在开销。（https://github.com/maartenba/MvcSiteMapProvider）。更集成的解决方案会更好。

（例如，我会将所有 Url、Controller、Action 信息存储在 Pagedb 上，可能会有正则表达式，但我也会将它们存储在 db 和缓存中）

Ps：我会用ServiceStack Mvc框架：）和asp.net mvc 4

设想：

*   App_Start

    通过 PageProvider 准备所有 url（类似于 MvcSitemapProvider 中的 DynamicSiteMap 功能）

    所有 URL 都使用 Controller、Action、Parameters 作为对象存储和缓存（Sitemap 也已准备好）

*   App_BeginRequest

    检查 URL 是 PageCache

    *   如果存在*更新分析*并通过强类型参数运行

    *   如果不存在，则检查有效并添加到 PageCache 转到前一个选项

# sql - 如何修剪在访问表单上的组合框中选择的值或文本

> ID：10725330
> 
> 赞同：1
> 
> 时间：2012-05-23T17:57:04.437
> 
> 标签：sql, ms-access-2007

我在 Access 2007 表单上有一个 ComboBox。我创建了一个表格，其中包含输入 ComboBox 的文本值。

文本太长，所以我希望在选择任何值时将文本修剪为最后 5 个字符。

**示例：在 ComboBox 中是：我最喜欢的颜色是绿色 - 10001**

但是如果用户选择绿色，我只想在使用修剪的查询中插入代码**10001**。

如何修剪选择的值/文本，以便仅将代码传递给查询的其余部分？

```
PARAMETERS [Forms].[ExampleForm]![cboColor] Text ( 255 );

SELECT FavColor
FROM COLOR
WHERE FavColor IS NOT NULL
HAVING (MAX(FavColorCode)=Forms.ExampleForm!Right(Trim([cboColor]),5)) 
```

我收到***Undefined Function***的错误消息。

感谢大家！

盖伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:21:57.967

只是一个提示，可能是：

```
PARAMETERS [Forms].[ExampleForm]![cboColor] Text ( 255 );

SELECT FavColor
FROM COLOR
WHERE FavColor IS NOT NULL
AND (MAX(FavColorCode)=Right(Trim([Forms].[ExampleForm]![cboColor]),5)) 
```

您的 SQL 语句不正确，请立即尝试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:42:41.917

看起来@Luka 向您展示了如何正确使用这些函数以及 from 的值`cboColor`。但是，在修复了查询的那部分之后，我怀疑数据库引擎会抛出一个不同的错误：

*您尝试执行的查询不包含指定表达式“FavColorCode”作为聚合函数的一部分。*

我认为您需要做其他事情而不是`HAVING`子句，或者将`GROUP BY`子句和聚合表达式添加到您的`SELECT`字段列表中。但是我不知道如何修复查询，因为我不明白它应该做什么。

# image - 将 .eps 文件转换为 .gif - 大小问题

> ID：10725331
> 
> 赞同：-1
> 
> 时间：2012-05-23T17:57:15.697
> 
> 标签：image, gif, postscript, eps

我一直在尝试将一些 .eps 文件转换为 .gif。.eps 文件非常宽。当我使用 ps2img 转换它们时，生成的 .gif 文件仅包含图像的一部分。当我使用“xv”打开 .eps 文件并尝试将其保存为 .jpg 时，也会出现同样的问题。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:12:07.610

你试过[imagemagick](http://www.imagemagick.org/)吗？

```
convert your.eps new.gif 
```

# jquery - jQuery .css() 和 CSS 悬停属性之间的冲突

> ID：10725333
> 
> 赞同：4
> 
> 时间：2012-05-23T17:57:22.890
> 
> 标签：jquery, html, css, hover

基本上我有 3 个链接，当用户进入/离开链接区域时，我使用 hover css 属性使它们变成白色/红色：

```
<div id="nav-glob">
    <ul>
        <!--menu-->
        <li class="nav-home"><a href="#content">Home</a></li>
        <li class="nav-portfolio"><a href="#lavori">Portfolio</a></li>
        <li class="nav-contact"><a href="#footer">Contact</a></li>
    </ul>
</div>

.nav-glob a:hover {
    color: red;
} 
```

然后在 jQuery 中，我使用`click()`函数将 css`color`属性设置为红色：

```
$('.nav-home > a').click(function(){
    $(".nav-home a").css("color", "red");
    $(".nav-contact a").css("color", "white");
    $(".nav-portfolio a").css("color", "white");
});

$('.nav-portfolio > a').click(function(){
    $(".nav-home a").css("color", "white");
    $(".nav-contact a").css("color", "white");
    $(".nav-portfolio a").css("color", "red");
});

$('.nav-contact > a').click(function(){
    $(".nav-home a").css("color", "white");
    $(".nav-contact a").css("color", "red");
    $(".nav-portfolio a").css("color", "white");
}); 
```

问题是**第**一次运行良好：单击一个链接后，`hover`CSS 属性被忽略！单击后似乎`hover`已禁用该功能。非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T17:59:42.720

`a`为不同的标签状态尝试一些 CSS ：

```
a.clicked {
    color: #f00;
}
a.hovered{
   color: #f00 !important;
}
a.faded {
    color: #fff
}

$('#nav-glob ul li a').hover(function() {
    $(this).parent().siblings('li').find('a').removeClass('hovered');
    $(this).addClass('hovered');
}, function() {
    $(this).parent().siblings('li').find('a').removeClass('hovered');
    $(this).removeClass('hovered');
}).click(function(e) {
    e.preventDefault();
    $('#nav-glob ul li a').removeClass('faded');
    $(this).parent().siblings('li').find('a').addClass('faded');
    $(this).addClass('clicked');
}); 
```

**[演示](http://jsfiddle.net/QStkd/55/)**

或者就像@Blazemonger 说的那样

```
a.faded {
    color: #fff
}
a.clicked {
    color: #f00;
}
a:hover{
   color: #f00 !important;
}

$('#nav-glob ul li a').click(function(e) {
    e.preventDefault();
    $('#nav-glob ul li a').removeClass('faded');
    $(this).parent().siblings('li').find('a').addClass('faded');
    $(this).addClass('clicked');
}); 
```

**[演示](http://jsfiddle.net/fLuyu/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:00:37.817

尝试将您的`:hover`属性设置为`!important`，它们应该覆盖内联样式。

或者，如果您不喜欢使用`!important`，您可以使用`.toggleClass()`来添加和删除特定类，而不是直接更改内联 CSS 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:03:17.783

内联样式覆盖样式表样式。这是预期的行为。不要将颜色设置回默认值，而是删除样式属性，以便重新控制样式表。

```
$('#nav-glob a').click(function(){
    var $this = $(this);
    $this.parent().siblings().children('a').removeAttr("style");
    $this.css("color", "red");
}); 
```

# android - YUV色彩空间中的图像处理？

> ID：10725334
> 
> 赞同：2
> 
> 时间：2012-05-23T17:57:24.547
> 
> 标签：android, yuv

我需要的是来自预览相机（android）的帧上的图像处理（对比度/亮度）。

```
public void onPreviewFrame(final byte[] data, Camera camera) { 
```

数据是 YUV 颜色空间。

我可以直接在这个颜色空间中处理这些位吗（比如对比度/亮度操作 Y 值）？我尝试过这种方式，但到目前为止没有成功，[请参见此处](https://stackoverflow.com/questions/10684220/manipulating-luma-in-yuv-color-space)，并且我找不到任何示例/直接信息如何在 YUV 上进行操作。有没有身体体验？

或者图像处理应该在 RGB 中完成，所以我需要先转换 YUV-->RGB ？

感谢您的帮助！

# c++ - 未找到架构 x86_64 os x lion 的符号

> ID：10725339
> 
> 赞同：4
> 
> 时间：2012-05-23T17:57:40.910
> 
> 标签：c++, macos, compilation, linker, cmake

当尝试使用 opencv 2.3.1 作为第三个库编译一个简单的 c++ test.cpp 代码时，我收到以下错误消息：

> 架构 x86_64 的未定义符号：
> 
> “_cvLoadImage”，引用自：
> 
> test.cpp.o 中的 _main
> 
> ld：未找到架构 x86_64 的符号

有关信息，我正在使用 CMake 进行链接，以及从 Xcode 4.2 获得的 gcc 4.2.1 i686-apple-darwin11。OpenCV 已使用 CMake 安装：

ccmake ../源代码

请注意，在尝试编译 SoQt (coin3D) 时，在命令 ./configure & sudo make 之后，我收到了类似的消息：

> . . .
> 
> “QWidget 的 typeinfo”，引用自：SoQtThumbWheelin SoQtThumbWheel.o 的 typeinfo “QWidget::staticMetaObject”，引用自：SoQtThumbWheel.o 中的 SoQtThumbWheel::staticMetaObject
> 
> ld：未找到架构 x86_64 的符号
> 
> collect2: ld 返回 1 个退出状态

主项目的CMakeLists.txt是：

```
cmake_minimum_required(VERSION 2.8)    
PROJECT(TOTO )

FIND_PACKAGE(OpenCV)

INCLUDE_DIRECTORIES(${TOTO_SOURCE_DIR}/src/control)

SET(ALL_LIB_RAF  ${OPENCV_LIBRARIES}             
         Hello
          )

# FILEs to consider
ADD_SUBDIRECTORY(main) 
ADD_SUBDIRECTORY( src ) 
```

而 test.cpp 的 CMakeLists.txt 是：

```
ADD_EXECUTABLE(helloWorld test)
TARGET_LINK_LIBRARIES(helloWorld ${ALL_LIB_RAF} ) 
```

也许问题在于 OpenCV 需要以 64 位（？）编译。我发现了一个有趣的[链接](https://stackoverflow.com/questions/5781198/compiling-opencv-code-on-a-64-bit-mac)。但我想知道如何将其应用于 CMake。

请问有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:44:48.487

这看起来像您没有正确链接到库。stackoverflow 上至少有两个类似的问题可以解决这个问题，即[this one](https://stackoverflow.com/questions/8014334)和[that one](https://stackoverflow.com/questions/7854798)。你看过他们吗？此外，请提供有关您*如何*编译的更多信息。你能编译一个简单的 OpenCV 测试程序，比如这个（取自[他们的 wiki](http://opencv.willowgarage.com/wiki/Getting_started)）：

```
#include <cv.h>
#include <highgui.h>

int main ( int argc, char **argv )
{
  cvNamedWindow( "My Window", 1 );
  IplImage *img = cvCreateImage( cvSize( 640, 480 ), IPL_DEPTH_8U, 1 );
  CvFont font;
  double hScale = 1.0;
  double vScale = 1.0;
  int lineWidth = 1;
  cvInitFont( &font, CV_FONT_HERSHEY_SIMPLEX | CV_FONT_ITALIC,
              hScale, vScale, 0, lineWidth );
  cvPutText( img, "Hello World!", cvPoint( 200, 400 ), &font,
             cvScalar( 255, 255, 0 ) );
  cvShowImage( "My Window", img );
  cvWaitKey();
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T14:21:00.307

当我在使用 cmake 编译时不小心在我的 CMakeLists.txt 文件中组合了单独的 target_link_libraries() 时产生了这个错误。

具体来说，我选择了正确的：

```
target_link_libraries(
GradientComputer
)

target_link_libraries(
Overlap
PointAreaComputer
) 
```

并将它们结合起来创建不正确的：

```
target_link_libraries(
GradientComputer
Overlap
PointAreaComputer
) 
```

# twitter-bootstrap - 如何在 Yii 框架中使用 Bootstrap 编辑变量和编译 .less？

> ID：10725349
> 
> 赞同：4
> 
> 时间：2012-05-23T17:58:12.450
> 
> 标签：twitter-bootstrap, compilation, yii, less, yii-extensions

我正在使用 php 框架 Yii，我想将它与 Twitter Bootstrap 框架结合使用。

我做了与这里完全相同的步骤：[http](http://www.cniska.net/yii-bootstrap/setup.html) ://www.cniska.net/yii-bootstrap/setup.html进行设置。

如何更改所有颜色的默认值等等？我在“variables.less”中对其进行了更改，它甚至成功编译了 bootstrap.less 和 style.less，但没有任何改变。

对不起，我是个新手，但你能告诉我必须更改和编译哪个文件以更改设计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T15:51:46.737

从[Yii-Bootstrap 版本 1.2.0](http://www.yiiframework.com/extension/bootstrap/ "http://www.yiiframework.com/extension/bootstrap/")开始，css 文件取自*path/to/bootstrap-extension/assets/css/*文件夹，因此您对基本*.less*文件所做的任何更改都应编译并存储在该文件夹中。检查[源代码中的这一行](https://bitbucket.org/Crisu83/yii-bootstrap/src/1edf79f3dd08cd144b79948d681f1246061a95d1/components/Bootstrap.php?at=default#cl-103 "https://bitbucket.org/Crisu83/yii-bootstrap/src/1edf79f3dd08cd144b79948d681f1246061a95d1/components/Bootstrap.php?at=default#cl-103")：

```
Yii::app()->clientScript->registerCssFile($this->getAssetsUrl().'/css/bootstrap.css'); 
```

例如：

*   扩展的css文件夹是：*项目名称/保护/扩展/bootstrap/assets/css/*
*   *项目名称/protected/extensions/bootstrap/lib/bootstrap/less/ 中的*基本*.less*文件
**   在*project-name/protected/extensions/bootstrap/lib/bootstrap/less/variables.less*中进行更改：

    ```
    @white:                 #ffe;// changed from #fff 
    ```

    *   备份原始 bootstrap.css 以防万一。

    *   编译*protected/extensions/bootstrap/lib/bootstrap/less/bootstrap.less*文件。
    示例（服务器端命令行编译 & while 在*项目名称*文件夹中）：

    ```
    $lessc protected/extensions/bootstrap/lib/bootstrap/less/bootstrap.less > protected/extensions/bootstrap/assets/css/bootstrap.css 
    ```

    *   清除浏览器中的缓存，刷新以查看更改。* 

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T04:19:55.323

假设您的 less 文件正在正确编译，则编译后的 CSS 文件中的颜色应该会发生变化。此时，您需要确保您的 HTML 文件链接到新编译的 CSS 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T11:03:11.960

我知道将引导程序的 less 文件复制到根目录中的 less 文件夹中并在那里编辑和编译它们是一个好主意。通过这种方式，很容易更新引导框架。

在这个 less 文件夹中，我有一个 style.less 文件，它导入 extensions/bootstrap/ 文件夹的 bootstrap.less 和我的单个编辑文件。当我使用其他文件的变量时，我必须注意，然后我需要导入一些定义变量的较少文件。*

# php - 具有命名空间和 PHP 的相同嵌套 XML 元素

> ID：10725355
> 
> 赞同：1
> 
> 时间：2012-05-23T17:58:31.873
> 
> 标签：php, xml

尽我所能，我似乎无法在第 12 行的嵌套 apcm:Property 元素中获取“Id”属性的值，其中“Name”属性等于“sequenceNumber”。如您所见，有感兴趣的元素被埋在具有相同名称和命名空间的其他元素的嵌套中。

使用 PHP，我很难理解如何获取 Id 值。

```
<?xml version="1.0" encoding="utf-8" ?>
<feed xmlns="http://www.w3.org/2005/Atom" xmlns:apcm="http://ap.org/schemas/03/2005/apcm" xmlns:apnm="http://ap.org/schemas/03/2005/apnm" xmlns:georss="http://www.georss.org/georss">
    <id>urn:publicid:ap.org:30085</id>
<title type="xhtml">
    <apxh:div xmlns:apxh="http://www.w3.org/1999/xhtml">
        <apxh:span>AP New York State News - No Weather</apxh:span>
    </apxh:div>
</title>
<apcm:Property Name="FeedProperties">
    <apcm:Property Name="Entitlement" Id="urn:publicid:ap.org:product:30085" Value="AP New York State News - No Weather" />
    <apcm:Property Name="FeedSequencing">
            <apcm:Property Name="sequenceNumber" Id="169310964" />
            <apcm:Property Name="minDateTime" Value="2012-05-22T18:04:18.913Z" />
    </apcm:Property>
</apcm:Property>
<updated>2012-05-22T18:04:18.913Z</updated>
<author>
    <name>The Associated Press</name>
    <uri>http://www.ap.org</uri>
</author>
<rights>Copyright 2012 The Associated Press. All rights reserved. This material may not be published, broadcast, rewritten or redistributed.</rights>
<link rel="self" href="http://syndication.ap.org/AP.Distro.Feed/GetFeed.aspx?idList=30085&amp;idListType=products&amp;maxItems=20" />
<entry>
...
</entry>
</feed> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:17:50.513

您必须注册命名空间，并使用`[]`谓词来确定您感兴趣的 Property 元素。如果您不使用双斜杠，即从文档元素开始查找，这是最安全的。

```
<?php

$xml = <<<EOD
...
EOD;

$sxe = new SimpleXMLElement($xml);

$sxe->registerXPathNamespace('apcm', 'http://ap.org/schemas/03/2005/apcm');
$sxe->registerXPathNamespace('atom', 'http://www.w3.org/2005/Atom');

$result = $sxe->xpath('/atom:feed/acpm:Property[@Name=\'FeedProperties\']/acpm:Property[@Name=\'FeedSequencing\']/acpm:Property[@Name=\'sequenceNumber\']/@Id');

foreach ($result as $sequenceNumber) {
  echo $sequenceNumber . "\n";
}

?> 
```

Note that there may theoretically be multiple sibling Property elements with the same `@Name` and so this Xpath may produce multiple nodes (`@Id` values).

# python - python导入两个目录文件中的一个

> ID：10725356
> 
> 赞同：4
> 
> 时间：2012-05-23T17:58:43.797
> 
> 标签：python, import

例如：

```
 Files/ 
    main.py
    SubFileA/
        __init__.py              "from util1 import help"
        util1.py                 "def help(): print ...A..."
    SubFileB/
        __init__.py              "from util1 import help"
        util1.py                 "def help(): print ...B..." 
```

并且 SubFileA 和 SubFileB 中的 util1.py 有不同的内容。

我希望有某种方式用户可以指定要导入的 util1.py。

我期待类似的东西：

```
 if subFileA:
       from SubFileA import *
  else:
       from SubFileB import * 
```

util1.py 具有相同的 API，但实现不同。

我这样做的原因是，如果我将两个 util1.py 组合在一起，代码会变得丑陋且难以维护。希望任何人都可以给我一个解决方案，或者任何建议都会很棒！

我尝试了这些代码，但收到了警告（它确实有效，但警告令人尴尬）：

```
main.py:4: SyntaxWarning: import * only allowed at module level
   def main():
main.py:4: SyntaxWarning: import * only allowed at module level
   def main(): 
```

* * *

每个人。我想我找到了解决方案。但我认为这不是好的编程风格。

```
Files/
   main.py                              "from directory import *"
   directory/
       __init__.py                      
                                        "user=raw_input() 
                                        if user: 
                                              from directoryA import *
                                        else
                                              from directoryB import * "
       directoryA/
           __init__.py                   "from util1 import help1()"
           util1.py 
       directoryB/
           __init__.py                   "from util1 import help1()"
           util1.py 
```

确实，这看起来很奇怪。但它完成了这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:32:36.040

您需要将每个目录制作成一个包才能使`from <package> import ...`语法正常工作。要告诉 Python 一个目录是一个包，只需在每个目录中创建一个空`__init__.py`文件。

如果您希望根据导入的版本进行特定行为，您可以在每个文件`util1`中编写初始化代码。`__init__.py`

有关更多信息，请查看[有关 packages 的官方文档](http://docs.python.org/tutorial/modules.html#packages)。

* * *

最终，您的新项目目录树应如下所示：

```
Files/ 
    main.py
    SubFileA/
        __init__.py
        util1.py
    SubFileB/
        __init__.py
        util1.py 
```

# .htaccess - 将 https 重定向到非 www 和 http 到 www

> ID：10725357
> 
> 赞同：7
> 
> 时间：2012-05-23T17:58:47.070
> 
> 标签：.htaccess, redirect, https, no-www

我需要重定向组合来实现以下目标：

重定向`http://example.com`到`http://www.example.com`，同时重定向`https://www.example.com`到`https://example.com`。

我想在`www`访问站点时强制前缀做域名`http`。

但是 SSL 证书仅在没有`www`.

访问时`https`，我不希望域名有`www`前缀。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T18:57:04.717

`https://www.mysite.com`从to的重定向`https://mysite.com`只能在客户端向 发出初始请求后发生`https://www.mysite.com`。

为了使这个初始连接正常工作，服务器`https://www.mysite.com`必须有一个有效的证书`www.mysite.com`，否则，这个连接甚至不会发生（并且服务器不会发送重定向响应）。

如果您仍需要重定向，在同一台服务器上，您的服务器必须提供对您要服务的主机名有效的证书。您应该获得包含两个主题备用名称 DNS 条目的证书：`mysite.com`和`www.mysite.com`; 这将允许您使用相同的证书为两个主机提供服务（然后在需要时使用重写规则）。

（如果您希望客户端支持它，您也可以将服务器名称指示与两个不同的证书一起使用，但这通常用于完全不同的主机名。）

CA 颁发对两者都有效的证书是很常见的`mysite.com`，`www.mysite.com`当您申请其中一个时，有时无需额外费用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:14:53.800

**将其放入非 HTTPS**文档根目录中的 .htaccess 文件中：

```
RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R] 
```

这在您的 HTTPS 文档根目录中：

```
RewriteCond %{HTTPS} =on
RewriteCond %{HTTP_HOST} ^www.mysite.com$
RewriteRule ^(.*)$ https://mysite.com/$1 [R] 
```

# c# - 是否有特定原因在类中不允许使用同名属性和方法，但允许作为扩展方法？

> ID：10725359
> 
> 赞同：3
> 
> 时间：2012-05-23T17:58:52.910
> 
> 标签：c#, compiler-construction, properties, methods, extension-methods

当我错误地假设我可以编写一个具有相同命名属性和方法的类时，我正在考虑 List 的功能，而不是考虑 Count() 是一个扩展方法这一事实。当时我的想法是我可以为特殊情况“参数化一个属性”。

我现在意识到我*可以做到*，只要我使用扩展方法。

这是故意在类中不允许但在扩展中允许的，还是只是一个不存在的功能？

```
void Main()
{
    var list = new List<string>();

    // You compile code that gets the property named Count
    // and calls the method named Count()
    list.Add("x");
    Console.WriteLine (list.Count);
    list.Add("x");
    Console.WriteLine (list.Count());

    var c = new C();
    Console.WriteLine (c.Count);
    Console.WriteLine (c.Count());
}

public class C
{
    public int Count { get { return 3; } }

    // But you cannot compile a class that contains both a property
    // named Count and a method named Count()
    //public int Count () { return 0; } // <-- does not compile
}

public static class X 
{
    public static int Count(this C c)
    {
        return 4;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:12:02.123

我记得 10 年前在微软的一个小组中问过这个问题：

[http://www.developmentnow.com/g/36_2003_9_0_0_195928/methods-and-properties-of-the-same-name.htm](http://www.developmentnow.com/g/36_2003_9_0_0_195928/methods-and-properties-of-the-same-name.htm)

正如你所看到的，没有令人信服的答案。

这在 CIL 中当然很容易实现，因为属性转换为`getXX`/`setXX`方法的巴黎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:01:34.483

这是因为`Count(this C c)`它是一种扩展方法，实际上并不构成该类型的一部分。

这意味着您可以`Count()`在`C`+ extension 中有一个方法`Count()`。如果调用它，将调用实例方法。

因此，如果我们考虑一个属性，那么问题就更少了。

# java - 如何使用 Java 查找远程机器的 JMX 端口

> ID：10725360
> 
> 赞同：2
> 
> 时间：2012-05-23T17:58:59.490
> 
> 标签：java, cassandra, jmx

我目前正在开发一种工具，可以远程修复和压缩 Cassandra 集群中的节点。我意识到为了实现这一点，我需要拥有 IP 地址和 JMX 端口才能远程访问该节点。

虽然我们定义了一个默认的 JMX 端口，但我们也允许用户手动更改该端口。由于该节点不是本地节点，因此我无法仅使用 System.getProperty() 获取端口号。当集群中的节点具有不同的 JMX 端口号时，似乎无法通过 JMX 访问其他节点。

有没有办法只使用 Java 从另一个节点获取 JMX 端口号？

如果这不可能，有没有办法在不知道该节点的 JMX 端口的情况下修复和压缩远程 Cassandra 节点。

# c# - 如何将浮点数转换为 BCD

> ID：10725361
> 
> 赞同：1
> 
> 时间：2012-05-23T17:58:59.770
> 
> 标签：c#, floating-point, ieee-754, bcd

如何在 C# 中将正浮点数（ieee 754，单精度 32 位）转换为 BCD？

**更新**

如果我没记错的话，我需要的是所谓的打包 BCD。我已经在进行 int 到 BCD 的转换。以我正在做的方式，数字 1234 将导致以下字节数组：

```
{0x00, 0x00, 0x12, 0x34} 
```

我使用的方法（这可能不是最好的方法）是：

```
public byte[] ToBCD(long num) {
    long bcd = 0;
    int i = 0;
    while (num > 9) {
        bcd |= ((num % 10) << i);
        num /= 10;
        i += 4;
    }
    byte[] bytes = BitConverter.GetBytes(bcd | (num << i));
    Array.Reverse(bytes);
    return bytes;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T21:22:09.623

BCD 不是为存储浮点数而设计的。但是，您可以做的是使用您自己的自定义类 BCD 模式对其进行编码和解码。例如，我会取你的号码并删除小数点。然后我会将每个数字编码为 BCD，就像平常一样。然后添加额外的 4 位来确定小数点的位置。例如，对数字进行编码`15.101`：

`15.101 -> 15101`-- 去掉小数点

`15101 -> 0001 0101 0001 0000 0001`-- 转换为 BCD

现在我们只需在末尾添加额外的 4 位来确定小数位：

`0001 0101 0001 0000 0001 -> 0001 0101 0001 0000 0001 0011`

`0011`是`3`。那是因为小数点向左移动了 3 位。

就您的功能而言，只需选择最右边的 4 位并保存以备后用。然后正常运行您的功能。然后将您保存的正确 4 位转换为十进制数。然后除以`(10*number)`..就是这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:52:05.987

不知道如何处理这个问题，但这是我发现的：

由于协议文档很烂，我搜索了一些旧代码并发现证据表明即使其他数据被编码为 BCD，浮点数也不是。所以，BitConverter.GetBytes 会做我需要的。

# java - 为什么我进行更改时没有出现 WebSphere 7 控制台“_Save_directly to master configuration”？

> ID：10725362
> 
> 赞同：0
> 
> 时间：2012-05-23T17:59:01.173
> 
> 标签：java, security, jakarta-ee, websphere

我正在使用 WebSphere 7（在 IBM RAD 7 中运行我的 Web 应用程序）。

我正在尝试为我的 Web 应用程序启用应用程序安全性。

在控制台中，当我选择“安全”>“全局安全”>“管理安全”时，选中“启用管理安全”并单击“应用”......控制台顶部会出现一个框，上面写着（除其他外）“直接*保存*到主配置”。我单击“保存”并保存更改。

但是，当我选择应用程序 > 应用程序类型 > WebSphere 企业应用程序 > “MyAppEAR” > 安全角色到用户/组映射，并将我的用户组映射到我的用户时，“直接*保存*...”链接永远不会出现。

我不知道如何保存我的用户到组的映射。当它们出现在屏幕上的映射表中时，只要我点击离开并返回，它们就消失了。

非常感谢您对此的任何帮助，谢谢！

抢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:07:54.147

在 RAD 中，编辑您的服务器定义（在 Servers 视图中双击 WebSphere Application Server）。在“WebSphere Application Server 的发布设置”部分下，选中“Run server with Resources on Server”（相对于工作空间内）。

重新启动一切并重试您的角色映射。

另请注意，通过 WebSphere 控制台进行用户/组映射是一个多步骤过程。从您实际映射角色的面板返回后，您必须在“安全角色到用户/组映射”上单击确定。（也就是说，您必须单击确定两次才能使角色映射保持不变。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T23:50:46.247

我想不出任何答案。我可以建议您尝试其他浏览器吗（您可能认为我疯了，但是当我看到事情没有按预期工作时，我会尝试这样的事情）。

如果您进行了更改并且服务器已经识别出有更改，它应该为您提供保存选项。

在这种情况下，它不提供此信息意味着服务器没有收到更改，因此建议尝试使用其他浏览器。

当我使用 Chrome（这是我的首选浏览器）时，我看到了一些疯狂的东西，当 Web 应用程序行为异常时，我切换到 FF。

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:35:32.877

原来我的问题与这个人的问题完全相同：

[WebSphere 7 中使用基于文件的用户注册表的安全角色到用户/组的映射](https://stackoverflow.com/questions/7387261/security-role-to-user-group-mapping-in-websphere-7-with-file-based-user-registry)

我使用他的解决方案来解决丢失的“确定”/“保存”按钮。

# c# - 谷歌提醒帖子参数

> ID：10725363
> 
> 赞同：0
> 
> 时间：2012-05-23T17:59:03.750
> 
> 标签：c#, post, cookies, sessionid

我正在尝试自动化谷歌警报。我正在使用 c# 来执行此操作，我发现需要“发布”某些参数才能成功创建警报。我将这些参数粘贴在这里：-

```
x:AMJHsmXPXoR-3tIdZfsQJXzLJEI55G189A:1337777808728

q:test

t:7

f:1

l:0

e:abc@gmail.com 
```

q：是我想要警报的搜索字符串的名称。

e: 是我的电子邮件 ID

我想不通别人是干什么用的。你能提出一些建议吗？尤其是 x 我怀疑它真的很重要 :)

编辑：-

我需要自动创建警报，因此每次创建新警报时都需要发布数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:06:33.013

您正在寻找的是用于 google 警报的 API。

这已经被问过了： [Google Alerts API？](https://stackoverflow.com/questions/860442/google-alerts-api)

接受的答案在[这里](https://stackoverflow.com/a/860927/444610)。

听起来您可以只使用 RSS 提要，但听起来您不能发布任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T13:06:53.640

有一个[c# lib api 可以读取、创建和删除 google alerts](http://coders11.com/googlealertsapi)。

缺点是它最近开始商业化。

# asp.net-mvc - Telerik MVC Grid Delete 问题，Delete 不会将字符串键值传递给控制器

> ID：10725367
> 
> 赞同：1
> 
> 时间：2012-05-23T17:59:16.667
> 
> 标签：asp.net-mvc, telerik, grid

我不知道以下问题是我的代码还是 Telerik 错误。谢谢你的帮助。

我的 Telerik .cshtml 代码如下所示。请注意，这`s.ID`是一个字符串而不是整数。

```
...
.ToolBar(commands => commands.Insert())
.DataKeys(keys => keys.Add(s => s.ID))
.DataBinding(dataBinding =>
    {
        dataBinding.Server()
        .Select("Edit", "DataImport")
        .Insert("Insert", "DataImport")
        .Update("Save", "DataImport")
        .Delete("Delete", "DataImport");
    })
.Columns(columns =>
... 
```

在控制器端：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Delete(string key) // Here, the key comes in as null 
```

但是，使用 Save 方法它可以工作。下面的“key”正确设置为行的字符串键值。

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Save(string key, Model model) // Here, the key is correct 
```

在这两种情况下，URL 看起来都是正确的，例如 .../Delete/keyHere

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T05:47:23.410

我同意 CD Smith 的观点，请仔细检查您的数据类型。如果您想将您的“ID”字段传递给变量名称“Key”下的控制器。您需要使用 RouteKey() 方法。

```
.DataKeys(keys => keys.Add(s => s.ID).RouteKey("Key")) 
```

# java - 比较字符串的不同方法

> ID：10725368
> 
> 赞同：1
> 
> 时间：2012-05-23T17:59:19.910
> 
> 标签：java, string

> **可能重复：**
> [用“==”比较两个字符串：什么时候可以工作？](https://stackoverflow.com/questions/7479334/comparing-two-strings-with-when-will-it-work)

我有以下代码：

```
String s1 = new String("Test");
String s2 = new String("Test");

String s3 = "Test";
String s4 = "Test";

System.out.println(s1 == s2);
System.out.println(s3 == s4); 
```

我得到以下输出：

```
false
true 
```

为什么要打印第二个比较`true`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:05:24.333

比较 a 的正确方法`String`是

```
 s1.equals(s2) 
```

1.  `System.out.println(s1==s2)`prints `false`，因为`s1`和`s2`指向堆上的不同对象。

2.  `System.out.println(s3==s4)`prints `true`, 因为`s3`和`s4`是指向堆上同一个对象的对象引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:13:22.737

不确定它是否回答了问题，但是：

`==`用于比较引用（指针）

所以`s1==s2`不要检查字符串是否相同，但 s1 和 s2 是否是同一个`String`实例。

要检查相等性，您必须使用以下`equals`功能：`s1.equals(s2)`

由于字符串被内部化，行为取决于 jvm 并且无法预测（即使大多数实现都是相同的）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T18:18:38.477

在Java中，重要的是要注意，`==`总是意味着“如果这两个东西引用内存中对象的同一个实例，则返回true”

当您使用构造函数声明字符串时：

```
String s1 = new String("Foo");
String s2 = new String("Foo"); 
```

总是会创建一个***新的字符串实例。***这意味着即使它们具有相同的值，`s1`并且`s2`永远不会是相同的对象，因此`==`返回 false。

但是，常量字符串有一种特殊情况。当你这样声明一个字符串时：

```
String s3 = "Foo";
String s4 = "Foo"; 
```

然后在字符串池中创建单个常量字符串，变量 s3 和 s4 都指向它作为内存优化。然而，这应该被视为一个实现细节。仍应始终使用 Equals 方法进行比较。

# mysql - 使用 MySQL 作为网站框架选择的 ASP.NET MVC

> ID：10725373
> 
> 赞同：1
> 
> 时间：2012-05-23T17:59:54.907
> 
> 标签：mysql, asp.net-mvc

我想学习 ASP.NET MVC，同时创建一个我想到的网站项目。

我正在考虑的网站就像根据用户的选择，按类别等显示图片列表。所以链接上会有下钻。显然，该列表将来自数据库。

MVC + MySQL 会是一个很好的框架吗？

我是一名使用 Web 表单的 C# 程序员。只是想学习一门新技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:17:47.823

不是设备，是程序员。只要适合您的需求，您选择哪种数据库或方法并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:09:50.697

祝你涉足 MVC 好运。一旦你克服了理解路由、控制器、动作和视图模型的初始学习曲线，你就会看到好处。

MySQL 和大多数现代数据库平台（关系或其他）可以处理您存储简单文本数据和相关 blob 对象的直接要求。

不过，当您处于学习模式时，我也会借此机会了解如何与更适合非结构化二进制数据的基于云的 blob 数据存储进行交互。我的首选是 Amazon 的 S3，但 Azure 和其他存在，用于存储二进制图像数据。我仍然会将事务数据存储在关系数据库中，而 MySQL 会在那里做得很好。（如果需要可扩展性，Amazon 的 RDS 也是云中的 MySQL 5.1……）

# php - 组合框 php mysql 删除值

> ID：10725376
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:00:12.823
> 
> 标签：php, mysql, combobox, sql-delete

> 需要'open.php'；$query4 = "SELECT * FROM posto_emissao,cliente, conta WHERE idCliente = '".$_SESSION['usuarioClienteID']."' AND conta.Cliente_idCliente = cliente.idCliente AND cliente.idCliente = posto_emissao.Cliente_idCliente"; $resultado = @mysql_query($query4,$dbConnect); $resultado2 = @mysql_query($query4,$dbConnect);

这个 conn 一切正常！我的问题来了： **我想从填充的组合框中选择一个 ID 并从 DB 中删除它们**

这是我的表格：（部分）

```
echo '<form name ="apagar" method="post" action="apagape.php" id="peform">';
        echo '<fieldset>';
        echo' <li class="category">';
        echo '<label>Posto de emissão:</label>';
        echo '<select name="eliminar_PE">';
        echo '<option value="0" selected="selected">Seleccione um posto</option>';
    if ($resultado2 === FALSE)
            echo "<p>Não foi possivel resolver a query.</p>" . "<p> Erro: " . mysql_errno($dbConnect) . ": " . mysql_error($dbConnect) . "</p>";
            else 
            {
            while($row2 = mysql_fetch_array($resultado2))
            {                  
            echo'<option value="'.$row2['idPosto_Emissao'].'">'.$row2['idPosto_Emissao'].'</option>';
            } 
```

> 回声''; 回声'
> '; 回声'
> '; 回声'
> 
> '; 回声''; 回声''; 回声''; mysql_close($dbConnect);

这是我的 apagape.php：（部分）

> 需要'open.php'；$query5 = "从 posto_emissao 中删除 idPosto_Emissao = '".$_POST['IdPosto_Emissao']."'"; $result5=@mysql_query($query5,$dbConnect); if ($result5 === FALSE) { echo "
> 
> Não foi possivel resolver 一个查询。
> 
> “。”
> 
> 错误：“。mysql_errno($dbConnect)。”：“。mysql_error($dbConnect)。”
> 
> "; } else { header("位置：index.php"); } mysql_close($dbConnect);

**问题：没有任何反应，删除失败：|**

我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:57:40.087

创建删除变量。我通过创建动态 url 来删除这样的数据库条目

```
<a href="delete.php?=<?php echo $var;?>">click</a> 
```

*然后我会在我的delete.php*页面上拉下一个数组，让它查找那个 url 变量，匹配记录并删除它。回到原来的页面。

# xcode - 打开通过 Xcode 创建的 RTF 文件时出错

> ID：10725381
> 
> 赞同：0
> 
> 时间：2012-05-23T18:00:28.423
> 
> 标签：xcode, macos, cocoa, document, rtf

我正在尝试从字符串创建一个 rtf 文件。rtf 文件已成功创建，但是当我尝试打开文件时出现以下警报（类似于）：

> 无法打开文档“aa.rtf”。

我的项目中有以下代码：

```
NSString* lol = @"sasasafagagsadfsada";
    NSSavePanel *panel = [NSSavePanel savePanel];

    [panel setAllowedFileTypes:[NSArray arrayWithObject:@"rtf"]];
    if ([panel runModal] == NSOKButton){
        [lol writeToURL:[panel URL] atomically:YES encoding:NSUTF8StringEncoding error:NULL];
    } 
```

怎么了？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:32:12.460

您应该使用`NSAttributedString`而不是`NSString`富文本。随意格式化文本，然后使用以下命令写入 RTF：

```
NSAttributedString *str = ...;
NSData *rtfData = [str RTFFromRange:NSMakeRange(0, [str length]) documentAttributes:nil];
[rtfData writeToFile:destinationPath atomically:YES]; 
```

要了解如何创建和操作属性字符串，请参阅 Apple 的[属性字符串编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/AttributedStrings/AttributedStrings.html#//apple_ref/doc/uid/10000036i)。

# qt - PyQt：如何在 itemmodel 中编辑项目？

> ID：10725389
> 
> 赞同：1
> 
> 时间：2012-05-23T18:00:51.537
> 
> 标签：qt, qt4, pyqt

我在树中有 QStandardItemModel，我需要编辑一些项目。我需要做同样的动作，用户可以通过双击来做。

项目是可编辑的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:17:30.810

要**开始编辑**项目，您需要调用视图的此插槽（而不是模型！）：

```
myView.edit(index); 
```

您也可以通过 直接**设置新值**`QAbstractItemModel.setData`。此默认`Qt.EditRole`角色与编辑完成时视图使用的角色相同：

```
myModel.setData(index, newValue); 
```

where`index`引用您要编辑的项目。

您可以通过询问模型来**创建这样的：`QModelIndex`**

```
myModel.index(row, column); # for a root item
myModel.index(row, column, parent); # for a children of "parent" 
```

因此，例如，如果要将第二个根项中的第三项设置为“foo”，请编写：

```
index1 = myModel.index(2, 1);
index2 = myModel.index(3, 1, index1);
myModel.setData(index2, "foo"); 
```

# c# - 动态设置 TextBoxFor 的 Text 和 Value

> ID：10725390
> 
> 赞同：0
> 
> 时间：2012-05-23T18:00:55.093
> 
> 标签：c#, asp.net-mvc, razor, html.textboxfor

我遇到了一些问题，希望能得到一些帮助。

我有一个带有属性 ID 和 NAME 的用户对象，需要在只读文本框中显示。我想用 ID 填充 texbox 的值，用名称填充文本。

提交给 Formcollection 时，我需要使用以下命令检索输入的数据：

```
collection.Get("User") 
```

我知道这不是正确的语法，但我正在尝试实现以下目标：

```
@Html.TextBoxFor(model => model.User, new { @readonly="readonly",@Value = model.Id , @Text=model.Name }) 
```

我需要做什么来纠正这个问题？在文本框中如何显示用户名，提交时返回用户 ID 和 collection.Get("User") ？

先感谢您。

ps 标准

```
 @Html.TextBoxFor(model => model.User.Name) 
```

对我不起作用，因为它不存储价值和

```
@Html.TextBoxFor(model => model.User, new { @readonly="readonly",@Value = Model.User.Id}) 
```

当 User.Id 为空时（在我的情况下是可能的），由于明显的原因而失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:08:32.990

您需要将 Id 存储在隐藏的输入字段中。

```
@Html.HiddenFor(x => x.User.Id)
@Html.TextBoxFor(x => x.User.Name, new { @readonly = "readonly" }) 
```

请记住，只要您使用只读，该值将是模型绑定的。但是一旦该字段被禁用，它就不会。因此，您将在 Controller 中收到空值。

在控制器中，您可以使用模型绑定而不是访问 FormCollection。

```
public ActionResult Whatever(User user)
{
    // user.Id
    // user.Name 
    // should be filled.
} 
```

**更新：**

为什么你一开始就不想在视图中包含这些值？

如果您需要它们进行模型绑定，您应该知道即使它们是只读的（Firebug，来自其他脚本的 POST 请求），人们仍然可以操作它们。

如果您需要它们以使您的模型有效，我建议您使用隐藏的输入字段。在服务器端，请确保您只保存用户实际应该更改的值。

# ios - 修改谁有权访问 OTA 应用程序

> ID：10725391
> 
> 赞同：0
> 
> 时间：2012-05-23T18:00:55.467
> 
> 标签：ios, provisioning-profile, ota

我正在为 iPad 开发许多应用程序。我们有许多开发测试人员，但我只想允许某些测试人员访问某些应用程序。我的网站上隐藏了一个开发版本，我的测试人员可以通过他们的 iPad 访问。我想知道的是，如果设置我的配置文件以允许他们的设备允许他们下载和测试应用程序。如果是这样，有没有一种方法可以让我只使用某些测试人员来构建某些应用程序。我不想继续从配置文件中删除设备 ID，因为我知道这只会浪费我可以分配的用户数量。

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:25:46.213

如果您只询问 Apple 供应系统提供的工具，那么可以，您可以准确指定哪些设备可以运行您开发的每个应用程序。每个应用程序都可以有一组可能不同的（最多 100 个）允许运行它的设备。

您只需为每个应用程序创建单独的配置文件。当您在 iOS 开发人员门户中为这些应用程序创建配置文件时，您必须创建一个开发配置文件，或者使用*Ad Hoc*分发方法创建一个分发配置文件。

一旦您创建了一个 Ad Hoc 配置文件（或一个开发配置文件），它的设置允许您（通过简单的复选框）选择您希望允许运行该应用程序的设备。每个单独的配置文件都有自己的一组复选框，这些复选框可能与其他复选框不同。

然后在 Xcode 中，更改项目的设置，以便使用不同的配置文件构建应用程序。

旁注：据我所知，没有办法将现有的配置文件从“内部”转换为“临时”。因此，如果您当前的配置文件是“内部”，您可能需要创建一个新的配置文件。奇怪的是，您可以将“Ad Hoc”转换为“In House”。

旁注 #2：您的 Apple 开发者帐户只能与总共 100 台设备关联（每台设备由其 UDID 指定）。但是我猜想对于您所描述的基本测试，这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:05:36.783

您应该尝试[https://testflightapp.com/](https://testflightapp.com/)这是用于 beta 测试的。

当您将构建上传到 Testflight 时，您可以更改可以使用该应用程序的权限。

也许这对你有点帮助。

# css - 字体缩放 Chrome 不起作用

> ID：10725395
> 
> 赞同：0
> 
> 时间：2012-05-23T18:01:05.710
> 
> 标签：css, font-size

鉴于这个 CSS

```
body {
    font-size: 62.5%;
    font-family: Arial,sans-serif;
    line-height: 2em;
    color:#333
}

.post_text p {
    font-size: 1.2em
} 
```

为什么`.post_text p`当我单击 Ctrl-+ 时，Chrome 上的文本没有按比例缩放？

它在 Firefox 上运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:38:55.610

它**确实可以**正确扩展，我已经使用 Chrome 21.0.1145.0 dev-m 在这里使用这个 jsFiddle 进行了检查：http: [//jsfiddle.net/9yuPN/](http://jsfiddle.net/9yuPN/)

我猜您可能有其他一些冲突的样式规则或您的浏览器有问题？尝试查看上面的 jsFiddle，看看当您使用 Ctrl + '+' 和 Ctrl + '-' 时示例是否可以缩放。如果这对您不起作用，则问题不是代码，而可能是您的浏览器/操作系统或其他东西，如果 jsFiddle 对您有用，则问题出在代码中的其他地方。

正如您所写的，它应该在 Chrome 中正确缩放（对我来说也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T19:27:45.000

我发现这埋在我的CSS中

```
-webkit-text-size-adjust:none 
```

这显然会导致我在 OP 中描述的行为。

# r - 用于非二元因变量的 R 快速 AUC 函数

> ID：10725396
> 
> 赞同：0
> 
> 时间：2012-05-23T18:01:08.863
> 
> 标签：r, roc

我正在尝试计算`AUC`一个大型数据集，并且无法找到一个既能处理不仅仅是 0 或 1 的值又能合理快速地工作的数据集。

到目前为止，我已经尝试过这个`ROCR`包，但它只处理 0 和 1，`pROC`包会给我一个答案，但可能需要 5-10 分钟来计算 100 万行。

请注意，我的所有值都介于 0 - 1 之间，但不一定是 1 或 0。

编辑：答案和预测都在 0 - 1 之间。

有什么建议么？

编辑2：

`ROCR`可以处理这样的情况：

```
Ex.1
actual   prediction
  1         0
  1         1
  0         1
  0         1 
  1         0 
```

或像这样：

```
Ex.2
actual   prediction
  1         .25
  1         .1
  0         .9
  0         .01
  1         .88 
```

但不是这样的情况：

```
Ex.3
actual   prediction
  .2         .25
  .6         .1
  .98        .9
  .05        .01
  .72        .88 
```

`pROC`可以处理Ex.3，但计算时间很长。我希望对于像 Ex.3 这样的情况有更快的实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:25:05.890

> 到目前为止，我已经尝试过 ROCR 包，但它只处理 0 和 1

您是在谈论参考类成员还是预测类成员？后者在 ROCR 中可以介于 0 和 1 之间，看看它的示例数据集`ROCR.simple`。

如果您的参考文献在 [0, 1] 中，您可以查看（免责声明：我的）软件包 softclassval。不过，您必须根据敏感性和特异性计算来构建 ROC/AUC。因此，除非您想到优化算法（如 ROCR 开发人员所做的那样），否则它也可能需要很长时间。在这种情况下，您还必须考虑敏感性和特异性究竟应该意味着什么，因为这与 (0, 1) 中的参考成员资格不明确。

**澄清问题后更新**

您需要注意将参考或实际组合在一起会丢失信息。例如，如果您有实际 = 0.5 和预测 = 0.8，那应该是什么意思？假设这些值真的是实际的 = 5/10 和预测 = 5/10。通过将 10 个测试汇总为两个数字，您会失去关于 10 个测试中*相同*的5 个是否有意义的信息。没有这个，实际 = 5/10 和预测 = 8/10 与 30 % 到 70 % 的正确识别率一致！

这是讨论敏感性的示例（即正确识别，例如点击）：

![柔软而](../Images/680d6a7ba0ffaea29cccd9cf46a81cc7.png)

[您可以在softclassval.r-forge.r-project.org](http://softclassval.r-forge.r-project.org/#About%20softclassval)的“关于 softclassval”部分找到讨论此类问题的完整海报和两个演示文稿。

继续这些想法，也可以使用平均绝对值、均方、均方根等误差的加权版本。

然而，所有这些表达模型相同性能特征的不同方式（例如，灵敏度 = 对实际点击事件的正确识别率）确实具有不同的含义，尽管它们与明确的参考和预测情况下的通常计算一致，他们会对不明确的引用/部分引用类成员做出不同的反应。

另请注意，当您将 [0, 1] 中的连续值用于参考/实际和预测时，整个测试将被压缩为 ROC 或特异性敏感性图中的一个点（而不是一条线！）。

**底线：**数据的分组给你带来了麻烦。因此，如果您能以某种方式通过单击获取信息，那就去获取吧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:43:47.047

您可以使用其他误差度量来评估方法性能吗？（例如平均绝对误差、均方根误差）？

这篇文章也可能对您有所帮助，但如果您对观察值和预测值有不同数量的类，那么您可能会遇到一些问题。

[https://stat.ethz.ch/pipermail/r-help/2008-September/172537.html](https://stat.ethz.ch/pipermail/r-help/2008-September/172537.html)

# c++ - C++11：谁能推荐一些书籍和编译器？在我的项目中使用 c++11 是个好主意吗？qt creator 2.5 支持 c++11 吗？

> ID：10725399
> 
> 赞同：3
> 
> 时间：2012-05-23T18:01:18.493
> 
> 标签：c++, c++11

截至 2012 年 5 月 23 日，我想开始使用 C++11 进行编码并在我的所有项目中使用它，因为我看到了许多我非常喜欢的新功能。但是，我所拥有的编译器都不支持 C++11 的任何内容。谁能推荐一些书籍和编译器？在我的项目中使用 c++11 是个好主意吗？qt creator 2.5 支持 c++11 吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T19:52:04.893

您选择的编译器将取决于您正在开发的平台。

Gcc 4.7 和 Clang 似乎支持最多的 C++11 功能，但我认为他们的 Windows 支持主要限于 mingw，我相信即使在那里也有限。英特尔 C++ 对 C++11 的支持不如 gcc 或 clang，但比 VC++ 多，而且它对 Windows 的支持很好。VC++ 11 是一个出色的编译器，并具有出色的 Windows 支持，但不幸的是，它在今天的 C++11 特性、缺少可变参数模板、初始化列表和统一初始化、用户定义的文字、constexpr、新的字符串文字、默认/删除函数、委托/继承 ctor、模板类型别名等。

如果你的目标是 Linux，那么 gcc 显然对此有很好的支持，而且我认为 clang 并不算太早。如果您的目标是 BSD 或 OS X，那么 Clang 是显而易见的选择。

如果您面向多个平台，那么您只需将自己限制在适用于所有编译器的 C++11 子集。

C++11 编译器支持：[http ://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport](http://wiki.apache.org/stdcxx/C%2B%2B0xCompilerSupport)

* * *

C++11 书籍刚刚开始问世。有一个新版本的*C++ 标准库：教程和参考*。*C++ Concurrency In Action*相当彻底地涵盖了新的内存模型、多线程和原子的东西。据我所知，到目前为止，这些是唯一的。不过网上有很多文章和东西，应该足够入门了：

### 文章和论文

*   [C++11 常见问题解答](http://www2.research.att.com/~bs/C++11FAQ.html)
*   [现代 C++ 风格的元素](http://herbsutter.com/elements-of-modern-c-style/)
*   [GitHub 上的 C++ 标准草案](https://github.com/cplusplus/draft/tree/master/papers)

### 会议

*   [走向本土 2012](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012)
*   [C++现在！](http://cppnow.org/schedule-table/)

* * *

使用 C++11 是个好主意，只要缺乏支持不会阻止您这样做。

* * *

Qt Creator 2.5 确实支持 C++11： http: [//labs.qt.nokia.com/2012/03/15/qt-creator-2-5-beta/](http://labs.qt.nokia.com/2012/03/15/qt-creator-2-5-beta/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:56:06.610

我从[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)获得了 gcc 4.7 二进制文件，这让我可以使用大部分 C++11 功能。它非常容易安装和设置（我在 Windows 7 上使用 Code::Blocks 10.05）。唯一的小问题是它没有随 gdb 一起提供，但很容易找到、下载和安装。

# java - 来自 log4j.Logger 的 getLogger 通用方式

> ID：10725402
> 
> 赞同：18
> 
> 时间：2012-05-23T18:01:25.117
> 
> 标签：java, log4j

而不是在每个类上指定类名：

```
log = Logger.getLogger(Foo.class);
log = Logger.getLogger(Bar.class);
log = Logger.getLogger(Test.class); 
```

可以使用吗：

```
log = Logger.getLogger(this.getClass()); 
```

会有什么影响？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T18:08:11.017

如果您创建子类，日志消息将被记录到子类的记录器中。

```
package pkgone;
public class SuperType {
    private Logger log = Logger.getLogger(this.getClass());
    public void someAction() {
        log.info("Doing something");
    }
} 
```

.

```
package pkgtwo;
import pkgone.SuperType;
public class SubType extends SuperType {
    // for instances of SubType, the log object in SuperType
    // will get initialized with SubType's class object
} 
```

.

```
// some code somewhere that uses SubType
SubType obj = new SubType();
obj.someAction(); 
```

在上面的示例中，“做某事”将被记录到 pkgtwo.SubType 记录器而不是 pkgone.SuperType 记录器，这可能是也可能不是您想要的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-30T21:53:50.913

尝试以这种方式查找泛型类...

```
private static final Log LOGGER = Logger.getLogger(MethodHandles.lookup().lookupClass()); 
```

最好的部分是您可以静态使用此方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-21T05:48:18.240

如果您不想重复制作`logger`并想避免编写错误的类名，那么可以使用[Project Lombok的](https://projectlombok.org/)[@Log](https://projectlombok.org/features/Log.html)。

如果您不介意在项目中再使用一个库，您可以简单地添加一个带有简单注释的记录器。

```
import lombok.extern.java.Log;
import lombok.extern.slf4j.Slf4j;

@Log
public class LogExample {    
  public static void main(String... args) {
    log.error("Something's wrong here");
  }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T18:04:50.380

当然，这看起来不错。

请注意，其中一个含义是，如果您在使用静态上下文中的日志时可能遇到问题 - 它可能未初始化或可能不可见

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T14:15:39.847

+1 对于调用超级方法的子类实例，记录器将是子类。

此外，如果您将此作为类的日志记录模板应用，如果您的类是抽象的 - 您的 this.getClass 将失败，因为您没有此类的实例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-28T18:33:04.987

使用来自 Apache commons 的日志工厂：

```
import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.apache.log4j.Logger;

public class SomeNewClass {
...
private final Log logger = LogFactory.getLog(this.getClass());
...
} 
```

不必做任何其他事情。在问题发布时不确定 LogFactory 是否可用。如果您不想使用 LogFactory，您也可以简单地将私有 final 与 getClass() 一起使用。

```
private final Logger log = Logger.getLogger(this.getClass()); 
```

没有理由创建子类，除非您想要日志的层次结构，这也可以通过操作日志配置文件（如果您使用的是 log4j.xml）来完成。当记录器定义为静态时，您不能使用 this.getClass() 。如果没有 static 或 private final，您会使记录器对您不想要的危险可能更改开放。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-03T09:06:07.680

```
public final class AppLogger {

    private AppLogger() {}

    public static final void logInfo(Class<?> clazz, String logMessage) {
        Logger logger = Logger.getLogger(clazz);
        if (logger.isInfoEnabled()) {
            logger.info(logMessage);
        }
    }

    public static final void logInfo(Class<?> clazz, String logMessage, Throwable th) {
        Logger logger = Logger.getLogger(clazz);
        if (logger.isInfoEnabled()) {
            logger.info(logMessage, th);
        }
    }
} 
```

创建此类，然后将其添加到您的调用类中：

```
Applogger.logInfo(Class.class,String var); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-23T18:30:45.017

据我所知，没有任何影响。根据马特的评论，我猜这是每个人都想要的正确行为。

# c# - 来自特定值的 LINQ orderby

> ID：10725406
> 
> 赞同：-4
> 
> 时间：2012-05-23T18:01:36.200
> 
> 标签：c#, linq, sorting, sql-order-by

样本：

```
var aux = new int[] { -1,0,1,-1,2,3,4,5,6,7 } 
```

预期结果：

```
{ 2,3,4,5,6,7,1,0,-1,-1 } 
```

如何？

--

编辑：对不起这个可怜的问题。我想从值 2 中订购所有商品，以及其他放在低端的商品（我修复了文本）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:07:10.300

```
var query = aux
  .OrderBy(i => i < 2 ? 2 : 1) //small numbers last
  .ThenBy(i => i < 2 ? -i : i); //large numbers asc, small numbers desc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:04:32.437

```
var res = aux.Where(a => a>=2 ).OrderBy (a => a)
             .Concat(aux.Where (a => a <2).OrderByDescending (a => a)) 
```

# iphone - CGAffineTransform 将 [_] 等距变换为 /_/ 的 iPhone iOS

> ID：10725407
> 
> 赞同：1
> 
> 时间：2012-05-23T18:01:36.400
> 
> 标签：iphone, objective-c, ios, uiview, cgaffinetransform

我需要使一个矩形视图 [ ] 看起来好像它的顶部被旋转回来，而底部被固定到位： / \ 。生成的图像是等距的，底部比顶部宽。

**我需要哪个 CGAffineTransform 来实现这个目标？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T22:56:02.463

正如其他人指出的那样，您不能使用 CGAffineTransform 来执行此操作。

但是，正如我在[此答案](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview/353611#353611)中所描述的，使用 CATransform3D 相对容易。您需要调整`m34`CATransform3D 的组件以赋予变换某种程度的透视，围绕 X 轴旋转视图，并可能对其进行缩放，以使底边保持与原始未旋转视图相同的宽度。

或者，您可以将`anchorPoint`视图的底层调整为底部，而不是中心。然后将从该边缘应用旋转，这应保持底部边缘长度不变，并为您提供视图的后退透视效果。我相信 (0.5, 1.0) 的值会将 设置`anchorPoint`为下边缘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:33:37.213

布拉德，我找到了这个关于如何进行透视转换的示例（由您提供！）：

[http://www.sunsetlakesoftware.com/2008/10/22/3-d-rotation-without-trackball](http://www.sunsetlakesoftware.com/2008/10/22/3-d-rotation-without-trackball)

由于某种原因，它在我的代码中不起作用。我的按钮应用了 3d 变换，但没有应用缩放效果。

# java - 使用 Netbeans 时的位置属性 New -> Webservice from WSDL using XMLSpy

> ID：10725409
> 
> 赞同：0
> 
> 时间：2012-05-23T18:01:44.140
> 
> 标签：java, web-services, netbeans, wsdl, xmlspy

我正在尝试使用 Netbeans 7.1.2 中来自 WSDL 的 New -> Web Service 创建一个 Web 服务。

我继续使用 XML spy 创建了一个 WSDL。这是我创建的基本 WSDL：

```
<wsdl:definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
xmlns:wsp="http://www.w3.org/ns/ws-policy" 
xmlns:wsp1_2="http://schemas.xmlsoap.org/ws/2004/09/policy" 
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:tns="http://planningservice.ohs.com/" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns="http://docs.oasis-open.org/wsn/t-1" xmlns:ns1="http://www.isotc211.org/2005/gco" xmlns:ns2="http://www.isotc211.org/2005/gmd" xmlns:ns3="http://www.isotc211.org/2005/gsr" xmlns:ns4="http://www.isotc211.org/2005/gss" xmlns:ns5="http://www.isotc211.org/2005/gts" xmlns:ns6="http://www.opengis.net/gml/3.2" xmlns:ns7="http://www.opengis.net/ows/1.1" xmlns:ns8="http://www.opengis.net/sps/2.0" xmlns:ns9="http://www.opengis.net/swe/2.0" xmlns:ns10="http://www.opengis.net/swes/2.0" xmlns:ns11="http://www.w3.org/2005/08/addressing" name="PlanningService" targetNamespace="http://planningservice.ohs.com/">
<wsdl:import namespace="http://www.opengis.net/sps/2.0" location="http://schemas.opengis.net/sps/2.0/spsGetFeasibility.xsd"/>
<wsdl:types>
    <xsd:schema>
        <xsd:import namespace="http://ps.ca"/>
    </xsd:schema>
</wsdl:types>
<wsdl:message name="GetFeasibility">
    <wsdl:part name="parameters" type="ns8:GetFeasibilityType"/>
</wsdl:message>
<wsdl:message name="GetFeasibilityResponse">
    <wsdl:part name="parameters" type="ns8:GetFeasibilityResponseType"/>
</wsdl:message>
<wsdl:portType name="PlanningService">
    <wsdl:operation name="GetFeasibility">
        <wsdl:input message="tns:GetFeasibility" wsam:Action="http://planningservice.ohs.com/PlanningService/getFeasibility"/>
        <wsdl:output message="tns:GetFeasibilityResponse" wsam:Action="http://planningservice.ohs.com/PlanningService/getFeasibilityResponse"/>
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="PlanningSerivcePortBinding" type="tns:PlanningService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="GetFeasibility">
        <soap:operation soapAction="' '"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="PlanningSerivce">
    <wsdl:port name="PlanningService" binding="tns:PlanningSerivcePortBinding">
        <soap:address location="http://localhost:8080/PlanningService/"/>
    </wsdl:port>
</wsdl:service> 
```

当我尝试使用上述内容时，“来自 WSDL 的新 Web 服务”向导显示“指定的 WSDL 文件中没有服务”。

如果我不指定 location 属性，如下所示：

```
<wsdl:service name="PlanningSerivce">
    <wsdl:port name="PlanningService" binding="tns:PlanningSerivcePortBinding">
        <soap:address/>
    </wsdl:port>
</wsdl:service> 
```

我没有那个通知，但是在创建 Web 服务期间，我收到一个错误，指出该属性丢失。

所以我的问题是我应该在 location 属性中添加什么来让 Netbeans 识别出定义了一个服务，因为它没有部署在任何地方！

谢谢大家！

~D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T03:46:10.300

所提供的 WSDL 文档并不完全有效。

第一个问题是文档样式的声明，但是rpc样式的消息声明。Rpc 使用根据“类型”定义的消息部分。文档使用根据“元素”定义的消息部分。我查看了导入到 WSDL 中的 XSD，发现那里定义了 'GetFeasibility' 和 'GetFeasibilityResponse' 元素。因此，将 wsdl:message 节点更改为

```
 <wsdl:message name="GetFeasibility">
    <wsdl:part name="parameters" element="ns8:GetFeasibility"/>
  </wsdl:message>
  <wsdl:message name="GetFeasibilityResponse">
    <wsdl:part name="parameters" element="ns8:GetFeasibilityResponse"/>
  </wsdl:message> 
```

通过使消息定义与文档样式服务保持一致来提供帮助。[在http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)上有一篇很好的文章，关于 wsdl 构造 wrt 声明的样式。

下一个问题是模式导入。wsdl:import 语句有特殊限制。通常，提取模式的适当位置是 wsdl:types 部分。如果你使用类似的东西

```
 <wsdl:types>
    <xsd:schema>
      <xsd:import namespace="http://www.opengis.net/sps/2.0" 
      schemaLocation="http://schemas.opengis.net/sps/2.0/spsGetFeasibility.xsd"/>
      <xsd:import namespace="http://ps.ca"/>
    </xsd:schema>
  </wsdl:types> 
```

（不确定 ps.ca 导入的值），相关类型可用于 wsdl 导入机制。wsdl 导入的文章位于[http://scn.sap.com/people/kevin.liu/blog/2004/06/28/a-note-on-wsdl-and-xsd-imports](http://scn.sap.com/people/kevin.liu/blog/2004/06/28/a-note-on-wsdl-and-xsd-imports)

一旦进行了这些修改，wsimport 仍然会在 opengis.net 的支持模式中看到名称冲突形式的错误，但希望这足以让您继续推进我们的项目，并且您可以专注于名称冲突而不是与wsdl建设作斗争。

# ruby-on-rails - 我可以在 Rails 3 的控制器中使用方法吗

> ID：10725414
> 
> 赞同：0
> 
> 时间：2012-05-23T18:02:03.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的成员模型中有一个方法来确定成员是否是管理员：

```
 def is_admin?; self.member_role.admin == true; end 
```

如何在我的控制器中使用它来查找所有不是管理员的用户？

我的控制器已经很紧凑了：

```
 @names = Member.where("fullname LIKE ?", "#{params[:letter]}%").order("fullname ASC").page(params[:page]).per(18) 
```

我不想在我的视图中使用拒绝{}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:17:18.760

您可以在模型中创建一个范围，例如：

```
scope :non_admins, where(:admin => false) 
```

在你的控制器中：

```
@names = Member.where("fullname LIKE ?", "#{params[:letter]}%").non_admins.order("fullname ASC").page(params[:page]).per(18) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:11:43.257

最好的方法——在你的模型中使用范围[Ruby 指南——范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)

将您的过滤器和订单放在范围声明中并在控制器中使用范围

# android - JQuery Mobile 使按钮更高

> ID：10725416
> 
> 赞同：0
> 
> 时间：2012-05-23T18:02:07.737
> 
> 标签：android, user-interface, jquery-mobile

我正在尝试在不增加厚度的情况下在 JQuery Mobile 中制作比普通按钮高约 5 倍的按钮。

所以当然我有通常的链接作为按钮代码：我需要添加什么？

另外，我如何将这些按钮中间的文本居中？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:57:16.813

这是你想要的？

预览：http: [//jsbin.com/ikuvav/](http://jsbin.com/ikuvav/)

代码：http: [//jsbin.com/ikuvav/edit](http://jsbin.com/ikuvav/edit)

只需添加一些自定义 css 覆盖按钮的 css

```
.ui-btn-inner {
    padding: 5em 20px;
} 
```

# ruby-on-rails-3 - Rails 3.2.3，Windows Server 2003 R2 SP2 上的 Mongrel，send_file

> ID：10725421
> 
> 赞同：0
> 
> 时间：2012-05-23T18:02:30.687
> 
> 标签：ruby-on-rails-3, mongrel

我在 Windows 2003 R2 SP2 服务器上部署了一个 Rails 3.2.3 应用程序（ruby 1.9.3p125）（不要问）。这是我的 Gemfile：

```
gem 'mysql2'
gem 'tiny_tds'
gem 'activerecord-sqlserver-adapter'
gem 'pdf-toolkit', "~> 1.0.0.rc1"
gem 'mongrel', '>= 1.2.0.pre2'
gem 'dispatcher' 
```

我运行 Apache 2.2，并有两个杂种作为 Windows 服务运行。Apache 启动正常，没有报告错误。应用程序正在运行。它简单地做一些pdftk表格填写并发送一个pdf文件，即：

```
send_file(....) 
```

在开发中，我得到了正确的 pdf，在 Windows 上的生产中，我得到了一个空的 pdf，这在我的 error.log 中：

```
2012-05-23 10:08:42 -0700: Error calling Dispatcher.dispatch #<NameError: uninitialized constant   ActionController::CgiRequest>
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:76:in `block in process'
<internal:prelude>:10:in `synchronize'
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel/rails.rb:74:in `process'
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:165:in `block in process_client'
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:164:in `each'
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:164:in `process_client'
c:/ruby193/lib/ruby/gems/1.9.1/gems/mongrel-1.2.0.pre2-x86-mingw32/lib/mongrel.rb:291:in `block (2 levels) in run' 
```

我在 Rails 2.3.8 和 Ruby 1.8.7 上运行了这个，Apache 配置没有改变，因为它运行正确，所以我不认为它与 Apache 配置有关，我确定它与新的配置有关由于 Rails 3，我不得不添加杂种东西。

更新：

我放弃了，并尝试使用薄，效果很好。

看到大多数关于在 Windows 上安装 Thin 的帖子都来自 3.0.x 时间范围。从 3.2.3 和 Ruby 1.9.3 开始，我会稍微复习一下。

您仍然需要分两遍安装薄

```
gem install eventmachine --pre
gem install thin 
```

您必须安装 ruby​​ 安装程序 DevKit

测试后，我重新做了我的 Apache 配置以使用瘦：

```
NameVirtualHost *:80
<VirtualHost *:80>
  ServerName pdftk.neeis.com
  DocumentRoot E:/Apache/pdftk/public/
  RewriteEngine On
  <Proxy balancer://thinservers>
    BalancerMember http://127.0.0.1:3005
    BalancerMember http://127.0.0.1:3006
  </Proxy>
  RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
  RewriteRule ^/(.*) balancer://thinservers%{REQUEST_URI} [P,QSA,L]
  ProxyPass / balancer://thinservers/
  ProxyPassReverse / balancer://thinservers/
  ProxyPreserveHost On
  ProxyPass /images !
  ProxyPass /stylesheets !
  ProxyPass /javascripts !      
  <Proxy * >
    Order Deny,Allow
    Allow from all
  </Proxy>
  ErrorLog E:/Apache/Logs/error.log
  CustomLog E:/Apache/Logs/access.log combined
  LogLevel debug
</VirtualHost> 
```

接下来就是将瘦身变成windows服务的繁琐任务，必须安装windows 2003 Resource Kit，将svrany.exe复制到System32，使用sc命令创建服务，然后做一些regedt32hackery。但是，它有效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:06:11.877

编辑：

有些 gem 还不支持 Rails 3，试试 Thin。

> 据我所知，mongrel_cluster 还不支持 Rails 3。最快的解决方案是切换到 Thin，它支持多个 Rails 实例，其配置文件与 Mongrel 的配置文件非常相似。

信用：[https ://stackoverflow.com/a/5660824/643500](https://stackoverflow.com/a/5660824/643500)

# linux - 将本地机器上的文件（代码）与远程服务器同步

> ID：10725424
> 
> 赞同：3
> 
> 时间：2012-05-23T18:02:44.180
> 
> 标签：linux, macos, ubuntu, sync, dropbox

我编写的几乎所有代码通常都在高性能服务器上运行。最近我只是通过 NoMachine NX（类似于 VNC）远程桌面进行远程编码，滚动代码和打字的延迟变得难以忍受。

关于如何在本地设置一个文件夹，每次保存文件时与高性能服务器同步的文件夹有什么建议吗？类似于 Dropbox 但我可以应用于任何文件夹。

需要使用 Mac OS X 和 Linux Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T19:56:10.227

在本地计算机上安装远程驱动器。

如果您的工作机器是 osx 并且您对终端没有信心，那么[http://panic.com/transmit/](http://panic.com/transmit/)可能是一个不错的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:05:13.297

> 每次我保存文件时都会与高性能服务器同步

你不想要这个。相反，您应该做的是在双方都使用 DVCS，然后在测试完成后将更改推送到服务器。makefile 可以帮助执行实际的推送操作（等等）。

# winforms - 如何在 Telerik radlistview 中获取选定项目

> ID：10725426
> 
> 赞同：1
> 
> 时间：2012-05-23T18:02:55.803
> 
> 标签：winforms, telerik

使用普通的 winform 控件，我会执行以下操作：

```
 ListView.SelectedListViewItemCollection col = listView1.SelectedItems;

        foreach (ListViewItem item in col)
        {
            label8.Text = item.SubItems[1].Text;
            label9.Text = item.SubItems[3].Text;
        } 
```

但我似乎无法用telerik radlistview 创建相同的东西，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:30:35.880

您应该可以使用 radlistview 执行类似的操作。您需要使用的类是 Telerik.WinControls.UI.ListViewDataItem。

```
 Telerik.WinControls.UI.ListViewSelectedItemCollection col = listView1.SelectedItems

    foreach (ListViewDataItem item in col)
    {
        label8.Text = item[1].ToString();
        label9.Text = item[3].ToString();
    } 
```

我不确定 ToString() 是否必要。我在没有 ToString() 的情况下尝试了它，它对我来说效果很好，但我的对象是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T11:18:22.457

关注Telerik[文档](http://www.telerik.com/help/winforms/listview-programatically-populating-with-data.html)

您可以选择以下三种方法之一来获取或设置 RadListView 子项中的值： - 使用列索引 - 使用列名 - 使用列引用

例子：

```
 item[0] = "CellValue1";
 item["Column2"] = "CellValue2";
 item[radListView1.Columns[2]] = "CellValue3"; 
```

# asp.net - HTML Doctype 差异

> ID：10725427
> 
> 赞同：1
> 
> 时间：2012-05-23T18:02:56.457
> 
> 标签：asp.net, html

我一直在使用带有站点管理员的 vs2010 中的默认模板在 ASP.net 中创建一个网站。我得到了奇怪的结果，其中带有跨度的图像不会对齐，因为它们之间总是有空格。我花了几个小时查看标记，最后绝望地创建了一个普通的 .htm 文件并将我的 html 复制到其中。令我惊讶的是，这实际上奏效了，所以在比较差异又一个小时后，我注意到模板创建了 site.master

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

而它创建 .htm 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

谁能解释 Strict（这会导致我的布局出现错误）和 Transitional（这意味着布局与我预期的一样）之间的区别，如果在我的 aspx 页面中使用 Transitional 会在未来给我带来任何困难？

我在 VS 中有一个警告，指出

```
validation (xhtml 1.0 transitional): element 'h2' cannot be nested within element 'span' 
```

我想这可能是使用 Strict 时错误的根源，但我不确定如何解决它。

编辑：这是导致错误的有问题的块

```
<a href="http://somelink.com">
    <img src="Images/test.png alt="Test" />
    <span class="Styling for hovering">
        <h2>
            Test
        </h2>
        <p>
            This Is A Test
        </p>
    </span>
</a> 
```

我正在尝试创建一个由图像及其下方的文本激活的链接。我想将文本保存在容器中。将鼠标悬停在该容器背景上时会发生变化。我还为跨度设置了固定大小。这是我需要在它们周围放置某种容器的主要原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:05:42.670

无论您使用哪种 DOCTYPE，都不能将块级元素 ( `<h2>`) 放在行内元素 ( `<span>`) 内。这就是您收到该错误的原因。由于`<span>`通常用于样式，我怀疑您可以删除它`<span>`并使用 CSS 来设置样式`<h2>`以显示您想要的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:59:59.493

简短的回答？

传统 = 允许旧式[不推荐使用](http://reference.sitepoint.com/html/elements-deprecated)的 HTML 标签，如 <font>、<center>、<s>，并对 HTML 中我们不应该再做的事情非常宽容。

Strict = 使用 css 替换大多数这些标签，并按照 W3C 定义的方式执行规则。

长答案：您可以阅读 W3C 中每种 HTML 规范类型的 25 多个页面[规范](http://www.w3.org/TR/html401/struct/global.html#h-7.2)，但是如果您正在创建新页面，您可能应该尝试坚持使用**XHTML 1.0 Strict**，因为它是未来和过渡性让一些平面设计师喜出望外。:)

[W3schools](http://www.w3schools.com/tags/tag_doctype.asp)对每种类型或多或少的含义进行了很好的细分：

> **XHTML 1.0 Strict**此 DTD 包含所有 HTML 元素和属性，但不包括展示性或不推荐使用的元素（如字体）。不允许使用框架集。标记还必须编写为格式正确的 XML。
> 
> **XHTML 1.0 过渡**此 DTD 包含所有 HTML 元素和属性，包括表现性元素和不推荐使用的元素（如字体）。不允许使用框架集。标记还必须编写为格式正确的 XML。

# c# - LINQ to SQL 是否可以使用其他语言？

> ID：10725428
> 
> 赞同：0
> 
> 时间：2012-05-23T18:02:57.103
> 
> 标签：c#, linq, haskell, f#, lisp

我很想知道在其他语言中是否可以使用 LINQ to SQL 之类的东西（跳过 .Net），这样可以编写转换为 SQL 的声明性和编译时检查查询：

*   强类型语言
*   对 lambdas/clousures 有很好的支持
*   能够生成表达式树/引用

IE：在 Lisp、Haskell、F# 等中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:04:54.110

是的，例如对于 Haskell，有一些用于类型检查 SQL 生成的嵌入式 DSL：

*   查询推导
*   [DSH](http://hackage.haskell.org/package/DSH)

回想一下，LINQ 的灵感来自于[monad 推导。](https://stackoverflow.com/questions/4683506/are-there-any-connections-between-haskell-and-linq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:04:28.553

对于 Haskell 来说，已经有了这样的东西 - [Persistent](http://www.yesodweb.com/book/persistent)。

# jquery - 让jQuery识别页面完成后加载的内容

> ID：10725431
> 
> 赞同：0
> 
> 时间：2012-05-23T18:03:12.090
> 
> 标签：jquery

我有一个标签，当单击它时，它会加载到一个列表中，每个列表都有不同的 id，这一切都在一个单独的 php 文件中完成，并通过 $.post 加载。

我现在遇到的问题是，因为当我尝试将 jQuery 分配给加载的内容时它没有加载页面，所以它没有拾取它？

所有 jQuery 都在加载内容的初始索引页面上。

如果我不清楚或者您需要更多信息，请告诉我，

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:14:32.547

如果它只是您缺少的事件绑定，那么使用`.on`. 它看起来像这样：

```
 $('#loadContainer').on('click', '#loadedElement', function(){
      //will work even if called before elements are loaded
  }); 
```

但是，如果它不仅仅是事件绑定，您需要将相关代码包装在一个函数中，并在使用内置回调的 ajax 加载之后调用它。像这样的东西：

```
 function relevantStuff(){
     //things needed by loaded content
 }

 relevantStuff(); // run right away incase you need parts or all of this before the content is loaded as well

 $.post('yourUrl.php', function(result){
      $('#loadContainer').append(result); //inject html into page
      relevantStuff(); //do the stuff after load
 }); 
```

此外，如果您使用 ajax 来“获取”html 并将其“加载”到页面中，请考虑使用`.get`or `.load`。

# c# - 将txt转换为rtf

> ID：10725438
> 
> 赞同：5
> 
> 时间：2012-05-23T18:03:33.733
> 
> 标签：c#, wpf, rtf

我有一堆要转换为 rtf 的文本文件。仅更改代码中的扩展名是行不通的，底层文件是相同的。我需要文本为 rtf 格式。有谁知道我该怎么做？

问题是当我加载纯文本文件时，RichTextBox 没有格式化新行，因此它将它作为一个连续的文本块加载，而不是插入新行。

唯一的解决方案是打开纯文本文件并“另存为”一个 rtf。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T18:10:04.917

只需将文本添加到空的 RTF 模板中，纯文本无论如何都没有任何格式，所以假设 rtf 模板看起来像这样（来自维基百科示例）：

```
{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard _TEXT_CONTENT_HERE_ } 
```

**更新：**我忘记了新行、大括号和反斜杠 :)

```
public static string PlainTextToRtf(string plainText)
{
  string escapedPlainText = plainText.Replace(@"\", @"\\").Replace("{", @"\{").Replace("}", @"\}");
  string rtf = @"{\rtf1\ansi{\fonttbl\f0\fswiss Helvetica;}\f0\pard ";
  rtf += escapedPlainText.Replace(Environment.NewLine, @" \par ");
  rtf += " }";
  return rtf;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T09:10:37.973

Antonio 的改进方法（注意我定义了一个代码页 \ansicpg1250）：

```
public static string PlainTextToRtf(string plainText)
{
    if (string.IsNullOrEmpty(plainText))
        return "";

    string escapedPlainText = plainText.Replace(@"\", @"\\").Replace("{", @"\{").Replace("}", @"\}");
    escapedPlainText = EncodeCharacters(escapedPlainText);

    string rtf = @"{\rtf1\ansi\ansicpg1250\deff0{\fonttbl\f0\fswiss Helvetica;}\f0\pard ";
    rtf += escapedPlainText.Replace(Environment.NewLine, "\\par\r\n ") + ;
    rtf += " }";
    return rtf;
} 
```

.

编码字符（波兰语）方法：

```
private static string EncodeCharacters(string text)
{
    if (string.IsNullOrEmpty(text))
        return "";

    return text
        .Replace("ą", @"\'b9")
        .Replace("ć", @"\'e6")
        .Replace("ę", @"\'ea")
        .Replace("ł", @"\'b3")
        .Replace("ń", @"\'f1")
        .Replace("ó", @"\'f3")
        .Replace("ś", @"\'9c")
        .Replace("ź", @"\'9f")
        .Replace("ż", @"\'bf")
        .Replace("Ą", @"\'a5")
        .Replace("Ć", @"\'c6")
        .Replace("Ę", @"\'ca")
        .Replace("Ł", @"\'a3")
        .Replace("Ń", @"\'d1")
        .Replace("Ó", @"\'d3")
        .Replace("Ś", @"\'8c")
        .Replace("Ź", @"\'8f")
        .Replace("Ż", @"\'af");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T13:01:37.380

这是完整的工作功能：

它涵盖了所有特殊字符（不仅是波兰语......）

```
public static string ConvertToRtf(string text)
{
    // using default template from wiki
    StringBuilder sb = new StringBuilder(@"{\rtf1\ansi\ansicpg1250\deff0{\fonttbl\f0\fswiss Helvetica;}\f0\pard ");
    foreach (char character in text)
    {
        if (character <= 0x7f)
        {
            // escaping rtf characters
            switch (character)
            {
                case '\\':
                case '{':
                case '}':
                    sb.Append('\\');
                    break;
                case '\r':
                    sb.Append("\\par");
                    break;
            }

            sb.Append(character);
        }
        // converting special characters
        else
        {
            sb.Append("\\u" + Convert.ToUInt32(character) + "?");
        }
    }
    sb.Append("}");
    return sb.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-27T15:21:41.617

我找到了一种应该有效的方法。使用 TextEdit 打开纯文本文件 (.txt)。单击左上角菜单栏中的格式下拉菜单。应该有一个名为 Make Rich Text 的按钮。当您单击它时，它应该将您的所有文本格式化为丰富。切换按钮使其成为纯文本。它还将文件类型更改为 .rtf。除非您有 Windows，否则这应该适用于最新的操作系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-17T07:13:06.367

Zbignew Wiadro 的答案的一个版本（减去波兰字符），它试图避免多个字符串分配。

```
 public static string Convert(string s)
{
  var ret = new StringBuilder((int) (71 + (s.Length * 1.1)));
  ret.Append(@"{\rtf1\ansi\ansicpg1250\deff0{\fonttbl\f0\fswiss Helvetica;}\f0\pard ");
  foreach (var letter in s)
  {
    switch (letter)
    {
      case '\\':
      case '{':
      case '}':
        ret.Append('\\');
        break;
      case '\r':
        ret.Append("\\par");
        break;
    }
    ret.Append(letter);
  }
  ret.Append(" }");
  return ret.ToString();
} 
```

设计很简单。

*   从 StringBuilder 开始，猜测最终的字符串将包括标题、原始文本和 10% 的扩展缓冲区，因此随着字符串构建器的增长，我们不会有多个数组副本。（如果我们的 gess 很低，它仍然可以工作，但代价是一个数组副本（很可能。）
*   写出标题
*   循环遍历字符串并一次执行所有转义。
*   如果您想重新添加波兰语转换，那么在 switch 语句中只会有更多的情况，而不是更多的字符串副本。
*   写出大括号。
*   将字符串生成器转储为字符串。

# sql - MySQL 客户端库版本不正确

> ID：10725439
> 
> 赞同：8
> 
> 时间：2012-05-23T18:03:38.160
> 
> 标签：sql, ruby-on-rails, dll

我创建了一个新的 Rails 项目调用

```
rails new simple_cms 
```

然后在我运行的目录中

```
rails s 
```

我收到以下错误

```
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/l
ib/mysql2/mysql2.rb:2:in `require': Incorrect MySQL client library version! This
gem was compiled for 6.0.0 but the client library is 5.5.24\. (RuntimeError)
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-
x86-mingw32/lib/mysql2/mysql2.rb:2:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-
x86-mingw32/lib/mysql2.rb:9:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-
x86-mingw32/lib/mysql2.rb:9:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:68:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:66:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:66:in `block in require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:55:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler/runtime.rb:55:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/bundler-1.1.3/
lib/bundler.rb:119:in `require'
    from c:/development/ruby/simple_cms/config/application.rb:7:in `<top (re
quired)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:53:in `require'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:53:in `block in <top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:50:in `tap'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.3
/lib/rails/commands.rb:50:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我见过其他人有这个错误，但他们往往是 linux 用户，我正在运行 windows。我试图重新安装 rails (railsinstaller.org) 和 mysql 5.5。32位版本和64位版本我都用过

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T18:18:57.610

这里似乎已经有几个关于这个的问题。您尝试过他们的解决方案吗？

最清楚的可能是这个： [mysql2 gemcompiled for wrong mysql client library](https://stackoverflow.com/questions/8740868/mysql2-gem-compiled-for-wrong-mysql-client-library)

相关部分在这里：

```
At the time of building this gem, the necessary DLL files where available
in the following download:

http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick

And put lib\libmysql.dll file in your Ruby bin directory, for example
C:\Ruby\bin 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-12T19:45:49.737

这将删除 gem 及其依赖项。然后重新安装将重新编译自身和所有依赖项。

```
gem uninstall mysql2
bundle install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T11:26:35.020

我在一个正在处理的新项目中遇到了这个错误，该项目突然停止在一台已经有工作轨道项目的 Windows 机器上工作，所以这显然不是安装问题。

导致问题的原因是一个`bundle update`命令，它决定重新下载 mysql2 gem（原因不明）并忽略了我的 Gemfile 行 gem `'mysql2', '~> 0.2.6'`。

问题是捆绑更新获得了 mysql 版本 0.2.18，如 Gemfile.lock 中所示，在以下行中：

```
 mysql2 (0.2.18-x86-mingw32) 
```

我注意到符号的含义，但我在我的 gemfile 中替换了以下行

```
gem 'mysql2', '~> 0.2.6' 
```

为了

```
gem 'mysql2', '0.2.6' 
```

现在一切正常，包括`bundle update`.

# session - 哪个是mongoose在mongodb中存储会话的更好模块

> ID：10725441
> 
> 赞同：0
> 
> 时间：2012-05-23T18:03:44.447
> 
> 标签：session, node.js, mongodb, mongoose

题目中的问题。我在[connect-mongodb](https://github.com/masylum/connect-mongodb)和[connect-mongo](https://github.com/marfalkov/connect-mongo)之间选择 ，最大的区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:07:16.977

我会推荐后者——它的更新日期要近得多。

节点有很多废弃的项目，所以查看文件修改日期总是好的

# php - 将关联数组推入另一个数组

> ID：10725444
> 
> 赞同：2
> 
> 时间：2012-05-23T18:04:15.490
> 
> 标签：php, arrays, multidimensional-array, associative-array

我想将一个关联数组推入另一个数组，但我不知道该怎么做。目前我有以下内容：

```
$rate_info = array(
    "hotel_rating" => $hotel->{'hotelRating'},
    "room_rate" => $hotel->{'RoomRateDetailsList'}->{'RoomRateDetails'}->{'RateInfo'}->{'ChargeableRateInfo'}->{'@total'},
    "currency" => $hotel->{'RoomRateDetailsList'}->{'RoomRateDetails'}->{'RateInfo'}->{'ChargeableRateInfo'}->{'@currencyCode'},
    "deep_link" => $hotel->{'deepLink'}
);

array_push($hotel_array[$hotel->{'name'}]["offers"],  "expedia" => $rate_info ); 
```

“Offers”是一个数组，我要做的就是在其中添加一个带有数组的键值。有什么想法吗？我现在似乎得到的只是解析错误。

更新

这是到目前为止数组的输出

```
["offers"]=>
array(2) {
  ["LateRooms"]=>
  array(4) {
    ["hotel_rating"]=>
    int(4)
    ["room_rate"]=>
    string(6) "225.06"
    ["currency"]=>
    string(3) "USD"
  }
  [0]=>
  string(4) "test"
} 
```

正如你所看到的 [0] 我想要 ["site"]=>array()

谢谢

奥利弗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:08:43.553

你第一次这样做吗？

```
$hotel_array[$hotel->{'name'}] = array(); 
```

然后你可以这样做：

```
array_push($hotel_array[$hotel->{'name'}]["offers"],  "expedia" => $rate_info ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:21:13.507

我会为数组分配这样做：

```
$hotel_array[$hotel->name]['offers']['expedia'] = $rate_info; 
```

确保启用警告，以便在使用数组（和子数组）之前知道它们已设置。

# sql-server-2008 - 更新大表中的随机样本

> ID：10725448
> 
> 赞同：1
> 
> 时间：2012-05-23T18:04:34.280
> 
> 标签：sql-server-2008, random, sql-server-2012, newid

使用 SQL Server 2012，我有一个包含 700 万行的表。PK 列是一个 GUID（COMB GUID）。我正在尝试测试查询的性能，首先需要更新数据的随机抽样，我想更改 50,000 行的列值（不是 PK）。

通过 NEWID() 选择前 50,000 个订单需要的时间太长，我认为 SQL Server 正在扫描整个表。我似乎无法为 TABLESAMPLE 找到正确的语法，它返回一个空集。

让它发挥作用的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:58:54.063

并将其视为更新：

```
;WITH x AS
(
  SELECT TOP (50000) col 
  FROM dbo.table TABLESAMPLE (50000 ROWS)
)
UPDATE x SET col = 'something else'; 
```

但有几点注意事项：

1.  您可能不会在`ORDER BY NEWID()`. 在一张有 1MM 行的桌子上，这在我的机器上花了一分钟。
2.  TOP 存在是因为 TABLESAMPLE 不保证确切的行数 - 它基于粗略计算可能包含 50,000 行的页面数。根据您的填充因子、可变长度列的数量、NULL 值的数量等，您最终可能会得到更少或更多。当估计导致读取更多页面时，上面的 TOP 将有助于将其限制为 50,000，但是如果估计低于，那将无济于事。

现在[在另一个问题中对此进行了一些讨论](https://stackoverflow.com/questions/10725839/tablesample-returns-wrong-number-of-rows/)。

# java - 同步的 Android 表面视图

> ID：10725453
> 
> 赞同：1
> 
> 时间：2012-05-23T18:04:48.983
> 
> 标签：java, android, android-canvas, surfaceview, synchronized

我对java和android有点陌生。现在我使用画布在表面视图上绘制，因为速度比客户视图快。但是当谈到在android中同步表面视图时，我有点困惑

我将此链接作为参考 [http://android-er.blogspot.com/2010/05/android-surfaceview.html](http://android-er.blogspot.com/2010/05/android-surfaceview.html) 也是 android 月球着陆器

当我编写surfaceview渲染线程运行方法部分时，我有两个版本稍微修改了表单示例，但我不确定哪一个在概念上更正确。它们都有效，但我只想澄清我的概念。

感谢您提供任何帮助和建议，如果我以错误的方式提出问题，请纠正我:)

版本1：

```
protected void run()
{
  while (isRunning) 
 {       
          if(RenderThreadSurfaceHolder.getSurface().isValid())
          {  
            Canvas Draw = null;
            try 
            {
              Draw =RenderThreadSurfaceHolder.lockCanvas(null);
              synchronized (RenderThreadSurfaceHolder){     
                  if(Draw!=null)
                  {                                                                       
                       RenderThreadSurfaceView.onDraw(Draw);
                  }  
              }
            }
            finally{                    
              if(Draw!=null) 
              {                                                    
                      RenderThreadSurfaceHolder.unlockCanvasAndPost(Draw);
              }
            }
        }
    }
} 
```

版本 2：

```
protected void run()
{
  while (isRunning) 
 {       
          Canvas Draw = null;  
                try 
                {    

                     synchronized (RenderThreadSurfaceHolder) 
                     {       
                             if(RenderThreadSurfaceHolder.getSurface().isValid())
                             { 

                                   Draw=RenderThreadSurfaceHolder.lockCanvas(null);
                                   if(Draw!=null)
                                   {   
                                      RenderThreadSurfaceView.onDraw(Draw);
                                   } 

                             }  
                     }
                 }   
                 finally 
                 {

                             if (Draw != null) 
                             {
                                 RenderThreadSurfaceHolder.unlockCanvasAndPost(Draw);
                             }
                 }
    }
} 
```

**编辑**

在额外同步的表面视图中，我还想添加一个锁来控制在 Activity 和 OnDraw 方法之间共享数据的数据因为我认为同步大量数据和大量处理函数开销太大所以我只想同步一个布尔值，但是我在互联网上所做的研究说同步布尔真的不是一个好主意//仍然让我很困惑，例如

```
synchronized (Check) 
{
   Check=true;   
} 
```

但是，如果我做类似下面的事情

```
private static lock Lock; //declare in the Activity

public synchronized void setlock(boolean newlock) 
{
  if (newlock!=lock){
    lock = newlock;
  } 
}

public synchronized boolean isTrue() {
    return lock;
} 
```

这仍然不是一个好主意吗？

我的概念是想在流程函数和 OnDraw 方法之间添加锁：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:18:22.030

这是一个非常主观的问题，但我会选择 1。

第一种方法更严格`synchronized(RenderThreadSurfaceHolder)`；更少的代码需要同步，这有助于避免阻塞问题。

除此之外，它似乎主要是订购。`if(RenderThreadSurfaceHolder.getSurface().isValid())`在解决方案 1 中，尽快调用也是有意义 的，因为如果表面无效，那么无论如何都不会发生任何事情。这避免了不必要的 if/else 检查。

是的，同步在布尔值上不起作用。原因是 BOOLEAN.TRUE 和 BOOLEAN.FALSE 是静态常量。

这个想法是，当您同步引用变量时，任何其他尝试使用该变量的线程都必须等到当前运行的同步块结束。当您的布尔值引用 BOOLEAN.TRUE 或 BOOLEAN.FALSE 时，一旦您在第二个布尔值上同步，您就会开始看到问题。

继续在 上同步`RenderThreadSurfaceHolder`，这就是我的做法以及我所看到的做法。

为什么要在绘图和更新之间添加一个锁？也许如果我知道原因，我可以用另一种方法帮助你。另外，这只会增加开销，请记住，您希望游戏循环尽可能紧凑。

# mysql - 将参数传递给 MySQL 例程

> ID：10725457
> 
> 赞同：0
> 
> 时间：2012-05-23T18:04:58.770
> 
> 标签：mysql

我想用 MySQL 例程做这样的事情

```
PROCEDURE `abc`(t1 varchar(50), t2 varchar(50))
BEGIN

    DECLARE myCursor CURSOR FOR
       SELECT * FROM t2

    CREATE TABLE t2 SELECT * FROM t1;

    OPEN...FETCH...CLOSE CURSOR

END 
```

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:21:21.497

```
DELIMITER //
 CREATE PROCEDURE GetOfficeByCountry(IN countryName VARCHAR(255))
    BEGIN
        SELECT city, phone 
        FROM countryName
        WHERE country = "uk";
    END //
 DELIMITER ; 
```

这是我发现的一个例子

# android - 检测用户来自欧洲或美国

> ID：10725460
> 
> 赞同：3
> 
> 时间：2012-05-23T18:05:06.643
> 
> 标签：android, location

有什么快速稳定的方法来检测用户是来自美国、亚洲还是欧洲？

我想在我的应用中展示广告，所以我需要它。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T18:08:56.600

**选项1**

```
//Returns the ISO country code equivalent of the current 
//registered operator's MCC (Mobile Country Code).
  android.telephony.TelephonyManager.getNetworkCountryIso() 
```

**选项 2**

```
//Returns a constant indicating the device phone type.
android.telephony.TelephonyManager.getPhoneType() 
```

**选项 3**

```
//Returns the name of this locale's country, localized to locale.
context.getResources().getConfiguration().locale.getDisplayCountry(Locale locale); 
```

前两个，依赖网络或电话类型。第三个依赖于手机的配置，假设即使来自美国的人在欧洲，仍然会有来自美国的手机设置，其他方式它应该被视为欧洲人。

顺便说一句，美国是一个国家，欧洲和亚洲是大陆，你可能指的是美国，或者无论如何都是北美。

也就是说，假设您不希望 GPS 避开没有它的设备

# java - 如何在jpa中编写order by和limit查询

> ID：10725469
> 
> 赞同：37
> 
> 时间：2012-05-23T18:05:51.650
> 
> 标签：java, jpa, persistence

> **可能重复：**
> [使用 JPA 选择前 1 个结果](https://stackoverflow.com/questions/6708085/select-top-1-result-using-jpa)

当我编写以下查询时，我希望根据我的表“MasterScrip”的“totalTradedVolume”字段获取前 10 个结果：

```
Collection<MasterScrip> sm=null;
   sm=em.createQuery("select m from MasterScrip m where m.type = :type order by m.totalTradedVolume limit 2").setParameter("type", type).getResultList(); 
```

我得到以下异常：

```
Caused by: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [select m from MasterScrip m where m.type = :type order by m.totalTradedVolume limit 2], line 1, column 78: unexpected token [limit].
Internal Exception: NoViableAltException(80@[]) 
```

我的 jpa 查询有问题。谁能纠正我？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-23T18:09:07.343

`limit`在 JPA 中不被识别。您可以改为使用以下`query.setMaxResults`方法：

```
sm = em.createQuery("select m from MasterScrip m where m.type = :type 
        order by m.totalTradedVolume")
    .setParameter("type", type)
    .setMaxResults(2).getResultList() 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-23T18:10:42.530

你可以用`Query setFirstResult and setMaxResult`方法来解决

# scala - 调用 time(() => {}) 和 time {} 有什么区别？

> ID：10725473
> 
> 赞同：1
> 
> 时间：2012-05-23T18:06:05.910
> 
> 标签：scala, higher-order-functions

我正在使用 metrics-scala 库，但不明白为什么下面的两个调用的行为完全不同

```
// method 1
writeTimer.time(() => {
  // expensive operation
})

// method 2
writeTimer.time {
  // expensive operation
} 
```

在方法 1 的情况下，从不调用昂贵的操作，而在方法 2 中，它是。

`writeTimer`是 的一个实例[`com.yammer.metrics.Timer`](https://github.com/codahale/metrics/blob/master/metrics-scala_2.9.1/src/main/scala/com/yammer/metrics/scala/Timer.scala#L14)，其中`time`方法声明为：

```
/**
 * Runs f, recording its duration, and returns the result of f.
 */
def time[A](f: => A): A 
```

我刚刚解决了我的代码中的一个错误，我必须使用方法 2 才能让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T18:11:45.743

在我看来，在第一种情况下，您正在计时*声明计算昂贵操作的函数*的操作，而在第二种情况下，您实际上是在计时昂贵操作本身。

# regex - 正则表达式错误

> ID：10725481
> 
> 赞同：3
> 
> 时间：2012-05-23T18:06:55.230
> 
> 标签：regex, find, posix

我有一个可以在 Javascript 中工作的正则表达式，但不适用于 Linux find 命令。目的是收集过去 90 天内已更新的文件列表，不包括特定目录（例如，假设我想包含目录`/data/safe/23/test`，但不包含`/data/safe/23/skip1`）。这是正则表达式：

```
^/data/safe/\d{1,4}/(?:(?!skip1|skip2).*) 
```

这是 find 命令（注意我使用的是 posix-extended；这可能是问题所在）：

```
find /data/safe -regextype posix-extended -regex '^/data/safe/\d{1,4}/(?:(?!skip1|skip2).*)' -mtime -90 
```

最后这是生成的错误：

```
find: Invalid preceding regular expression 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:20:08.547

我认为 posix-extended 不支持“？：”和“？！”。

无论如何，使用 find 会更容易使用类似的东西：

```
find /data/safe -regextype posix-extended -regex '^/data/safe/[0-9]{1,4}/.*' ! -regex '^/data/safe/[0-9]{1,4}/(skip1|skip2).*' -mtime -90 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:15:47.223

你这样做是错的。您需要用星号替换大括号。此外，您应该通过 tar 或 touch 命令来传递整个内容。

# nhibernate - 如何创建使用 FetchMode.Select 的 Fluent NHibernate 查询

> ID：10725485
> 
> 赞同：0
> 
> 时间：2012-05-23T18:07:10.877
> 
> 标签：nhibernate, fluent-nhibernate

我只是想编写一个看起来像这样并渴望加载的查询：

```
Select * from Users where Id IN (1,2,3)
Select * from Bids where UserId in (1,2,3) 
```

现在它正在引起问题，因为联接返回了太多结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T20:11:49.267

尝试使用多标准（或本例中的 Future），应该在 1 个批次中发出 2 个查询并为您提供急切加载：

```
 var bids = Session.QueryOver<Bid>()
            .JoinQueryOver(b => b.User)
            .WhereRestrictionOn(u => u.Id).IsIn(ids)
            .Future<Bid>();
        var users = Session.QueryOver<User>()
            .WhereRestrictionOn(u => u.Id).IsIn(ids)
            .List<User>(); 
```

唯一的问题是它将加入 Bid -> User，以避免您可以使用 HQL：

```
 var bids = Session.CreateQuery("from Bid b where b.User.id in (:userIds)")
            .SetParameterList("userIds", ids)
            .Future<Bid>();
        var users = Session.QueryOver<User>()
            .WhereRestrictionOn(u => u.Id).IsIn(ids)
            .List<User>(); 
```

# c# - 保持客户端对象模型连接打开

> ID：10725486
> 
> 赞同：1
> 
> 时间：2012-05-23T18:07:15.903
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-clientobject

我正在编写一个 WPF 应用程序，它需要大约每分钟检查一次 SharePoint 列表。它将在大约一千台机器上执行此操作。我可能会尝试在其中添加一些智能以减少进行更新的机器数量（如果可能，请检查屏幕保护程序是否正在运行。检查计算机是否处于空闲状态。在这两种情况下都不要更新)

让一千台计算机通过客户端对象模型连接访问 SP2010 服务器的负载是多少？我是否应该让它们都建立连接，然后不断保持打开状态？还是我应该每分钟重新建立一个连接，下载数据，然后关闭连接？我无法确定这些操作的成本将是大规模的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T09:50:00.170

SP2010 客户端对象模型使用可扩展性良好的 OOBT 服务，在中继它们时您不必担心太多。[从这里开始详细分析](http://technet.microsoft.com/en-us/sharepoint/ff601870.aspx)

要考虑的其他解决方案：考虑[双工服务](http://msdn.microsoft.com/en-us/library/ms731064.aspx)，您可以通过该服务将轮询机制转换为推送。有一定的限制，请确保它在您的场景中有用。以下是供您参考的其他链接：

[http://www.eggheadcafe.com/tutorials/wcf/b5ada8df-58c5-492f-b368-457b3a4f137c/notify-client-applications-using-wcf-callbacks.aspx](http://www.eggheadcafe.com/tutorials/wcf/b5ada8df-58c5-492f-b368-457b3a4f137c/notify-client-) _

# php - 在 PHP 中重用 PDOStatements 进行数据库调用的效率

> ID：10725489
> 
> 赞同：1
> 
> 时间：2012-05-23T18:07:20.387
> 
> 标签：php, mysql, database, pdo, pdostatement

将 prepare() 返回的 PDOStatement 保存到某个类变量然后重用该语句对象而不是在执行相同调用时重新准备是否有效？

```
Class QueryClass {
    public static $getSomeData;
}

Class Foo {

    $pdo = $pdo (PDO)
    $id;
    $first_name;
    $last_name;
    $email;
    $city;

    public function __construct(PDO $pdo, $id) {
        $this->pdo = $pdo;
        $this->id  = $id;
    }

    public function searchDB(Array $find) {

        $query  = "SELECT " . prepare_array($find);
        $query .= "FROM some_database ";
        $query .= "WHERE id = ?";

        // Option 1.) Prepare Normally
        $statement = $this->pdo->prepare($query);

        // Option 2.) Prepare conditionally depending on what the query
        // was the last time the method was called. So it should only be called
        // when either (A) The method has never been called OR (B) The user
        // has changed the query string by entering different data in the
        // $find parameter

        if (!QueryClass::$getSomeData instanceof PDOStatement
            || QueryClas::$getSomeData->queryString != $query)
        {
            QueryClass::$getSomeData = $this->pdo->prepare($query);
        }

        // Executing Option 1
        $statement->execute(Array($this->id));

        // Exectuting Option 2
        QueryClass::$getSomeData->execute(Array($this->id));  
    }
}

// And then using like this (I know that I havent actually created the PDO, just assume
// that I'm providing it). The second searchDB() call should use the same PDOStatement
// object created when the first object used it

$var  = new Foo($pdo, 5);
$var2 = new Foo($pdo, 10); 

$var->searchDB(Array('first_name', 'last_name', 'email'));
$var2->searchDB(Array('first_name', 'last_name', 'email'));

// Then makeing a call like this would cause the method to re-prepare the
// PDOStatement because the params provided are different

$var2->searchDB(Array('first_name', 'city')); 
```

这是否比每次调用查询或方法时都准备一条新语句更有效？

# perl - 将多个值分配给哈希引用 - 数组

> ID：10725493
> 
> 赞同：1
> 
> 时间：2012-05-23T18:07:28.070
> 
> 标签：perl

我声明了以下子项（实际上，这些值来自数据库 - 所以我简化了它）：

```
sub get_date {
 my ($ref_last)=@_;
 $$ref_last->{duration}='24,0,4';
 ($$ref_last->{duration}->{d},
  $$ref_last->{duration}->{h},
  $$ref_last->{duration}->{m})
   = split(/\,/, $$ref_last->{duration});
} 
```

这个 sub 是从脚本的 main-Part 调用的，如下所示：

```
my $hashy;
get_date(\$hashy);
print $hashy->{duration}->{d}; 
```

一切都很好，并且像魅力一样工作，直到我使用严格：

```
use strict;
my $hashy;
get_date(\$hashy);
print $hashy->{duration}->{d}; 
```

在这种情况下，perl 说“*不能使用字符串 ("24,0,4") 作为 HASH 引用，而 "strict refs" 正在使用*"

我已经尝试过了`ref($ref_last)`——但`ref`它是一个只读函数。

任何建议，为什么会发生这种情况-也许是更好的解决方案？

这是完整的（非）工作脚本：

```
#!/usr/bin/perl -w
use strict;
my $hashy;
get_date(\$hashy);
print $hashy->{duration}->{d};

sub get_date {
        my ($ref_last)=@_;
        $$ref_last->{duration}='24,0,4';
        ($$ref_last->{duration}->{d},
         $$ref_last->{duration}->{h},
         $$ref_last->{duration}->{m})
                = split(/\,/, $$ref_last->{duration});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:40:18.943

根据评论，您正在尝试更改现有哈希值的格式（从 « `24,0,4`» 到 « `{ d=>24, h=>0, m=>4 }`»）。这就是我的做法。

```
sub split_duration {  # Changes in-place.
    my ($duration) = @_;
    my %split;
    @split{qw( d h m )} = split(/,/, $duration);
    $_[0] = \%split;
}

my $row = $sth->fetchrow_hashref();
split_duration( $row->{duration} ); 
```

或者

```
sub split_duration {
    my ($duration) = @_;
    my %split;
    @split{qw( d h m )} = split(/,/, $duration);
    return \%split;
}

my $row = $sth->fetchrow_hashref();
$row->{duration} = split_duration( $row->{duration} ); 
```

下面解释问题和初步解决方案。

* * *

如果没有严格，`24,0,4`则被视为哈希引用，这意味着 Perl 正在创建一个名为`$24,0,4`!!!的变量 这很糟糕，这就是为什么要`use strict 'refs';`阻止它。

根本问题是您尝试将两个值分配给`$$ref_last->{duration}`：字符串

```
'24,0,4' 
```

以及对哈希的引用

```
 { d => 24, h => 0, m => 4 } 
```

它不能同时容纳两者。您需要重新排列数据。

我怀疑您拆分后实际上并没有使用`24,0,4`，因此您可以按如下方式修复代码：

```
sub get_date {
    my ($ref_last)=@_;
    my $duration = '24,0,4';
    @{ $$ref_last->{duration} }{qw( d h m )} =
        split(/,/, $duration);
} 
```

如果你需要`24,0,4`，你可以重建它。或者，您可以将组合持续时间与 d、h、m 一起存储。

```
sub get_date {
    my ($ref_last)=@_;
    my $duration = '24,0,4';
    $$ref_last->{duration}{full} = $duration;
    @{ $$ref_last->{duration} }{qw( d h m )} =
        split(/,/, $duration);
} 
```

或者在一个单独的元素中更高的散列。

```
sub get_date {
    my ($ref_last)=@_;
    my $duration = '24,0,4';
    $$ref_last->{full_duration} = $duration;
    @{ $$ref_last->{duration} }{qw( d h m )} =
        split(/,/, $duration);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:56:58.237

在内部`get_date`，您分配一个字符串，`$ref_last->{duration}`然后尝试像 hashref 一样访问它。您还有额外的美元符号试图取消引用从哈希中提取的单个值。

我会把它写成

```
sub get_date {
  my($ref_last) = @_;
  my $duration = '24,0,4';
  @{ $ref_last->{duration} }{qw/ d h m /} = split /\,/, $duration;
} 
```

最后一行是一个[*哈希切片*](http://perldoc.perl.org/perldata.html#Slices)，允许您在单个列表分配中为 、 和 键`d`分配`h`值。`m`

在调用者的上下文中，您需要设置一些脚手架。

```
my $hashy = {};
get_date($hashy); 
```

没有初始化`$hashy`以包含一个新的空 hashref，`get_date`它的所有分配，然后扔掉新建的大厦。这是因为当您从 中复制参数时`@_`，您使用的是按值传递语义。

Perl 也将支持按引用传递。Perl 有一个称为[*autovivification*](http://perldoc.perl.org/perlglossary.html#autovivification)的功能，该语言根据需要为您构建必要的脚手架。要使用这种风格，你会写

```
my $hashy;
get_date($hashy);

sub get_date {
  my($ref_last) = @_;
  my $duration = '24,0,4';
  @{ $_[0]->{duration} }{qw/ d h m /} = split(/\,/, $duration);
} 
```

注意使用`$_[0]`直接访问第一个参数，在这种情况下是*别名。*`$hashy`也就是直接`get_date`修改`$hashy`。

无论哪种方式，假设我们打印内容

```
print "[", join("][" => %{ $hashy->{duration} }), "]\n"; 
```

在这种情况下，输出是一些排列

```
[h][0][m][4][d][24]
```

用 Perl 构建复杂的数据结构并不难，但你必须学习规则。

*   [Perl 引用和嵌套数据结构](http://perldoc.perl.org/perlref.html)，`man perlref`
*   [Perl 数据结构食谱](http://perldoc.perl.org/perldsc.html)，`perldoc perldsc`
*   [在 Perl 中操作数组的数组](http://perldoc.perl.org/perllol.html)，`perldoc perllol`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:17:30.947

发生这种情况是因为您的哈希引用语法很奇怪。

```
#!/usr/bin/perl -w
use strict;

my $hashref = {};
get_date($hashref);

print $hashref->{duration}->{d};

sub get_date {
    my ($ref_last) = @_;
    $tmp = '24,0,4';

    ($ref_last->{duration}->{d},
     $ref_last->{duration}->{h},
     $ref_last->{duration}->{m})
            = split(/,/, $tmp);
} 
```

并在您的子例程中使用`$ref_last->{duration}`，不使用`$$`.

# android - 当有空间时，上下文操作栏菜单强制项目进入溢出菜单

> ID：10725496
> 
> 赞同：2
> 
> 时间：2012-05-23T18:07:44.597
> 
> 标签：android

我有一个带有三个菜单项的上下文操作栏，所以只有三个图标。驾驶室肯定有空间，但只有一个图标显示，另外两个被强制进入 oveflow 菜单。如果我在所有三个菜单项中使用 android:showAsAction="always" 那么它们都会显示并且有空间。但是，我宁愿使用 android:showAsAction="ifRoom" 来显示所有三个图标的结果。已尝试在每个项目上删除 android:title ，但这仍然导致 oveflow 菜单，所以我知道它并没有尝试将标题放入。

```
<item android:id="@+id/delete_quiz"
    android:title="DeleteQuiz"
    android:icon="@drawable/ic_menu_close_clear_cancel"
    android:showAsAction="ifRoom"
    />
<item android:id="@+id/load_quiz"
    android:title="LoadQuiz"
    android:icon="@drawable/ic_menu_close_clear_cancel"
    android:showAsAction="ifRoom"
    />
<item android:id="@+id/start_quiz"
    android:title="StartQuiz"
    android:icon="@drawable/ic_menu_close_clear_cancel"
    android:showAsAction="ifRoom"
    /> 
```

我使用的图标是每个菜单项的 ic_menu_close_clear_cancel。

有没有人有类似的经历？你做了什么？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:15:19.787

尝试使用 layoutWeight 属性。layoutWeight 不适用于相对布局。

将 layoutWeight 的值设置在 0 到 1 之间

0 - 贪婪（将占据全部空间）

1 - 慷慨（只需要尽可能多的量）

尝试在 0 到 1 之间摆弄，你会成功的，尝试 0.25 或 0.5 为所有这些。

# onclick - getElementById("id").value

> ID：10725497
> 
> 赞同：0
> 
> 时间：2012-05-23T18:07:54.707
> 
> 标签：onclick, onchange, getelementbyid

因此，我在自定义弹出 div 中有一个输入框，该输入框位于页面上的隐藏 div 中，直到用户单击激活弹出框的内容。当用户单击时，我们获取隐藏 div 的 html 并将其添加到位于母版页（MVC）中的弹出框 div 中。

```
<input type="text" id="from" name="from" value="MM/DD/YYYY" style="width: 90px;" />&nbsp; 
```

如果我更改此字段并在提交表单时运行脚本

```
var fromDate = document.getElementById("from").value; 
```

我仍然得到 MM/DD/YYYY 默认值，而不是我输入的值。更奇怪的是，我在 from 字段上做了一个 onchange 事件，但我仍然得到 MM/DD/YYYY。

任何帮助将不胜感激，我不知道发生了什么。难道它仍然从隐藏的 div 中获取值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:09:34.493

你不是说

```
document.getElementById("from").value 
```

代替

```
document.getElementById("to").value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:10:29.243

我希望你的代码应该像

> var fromDate = document.getElementById("from").value;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T17:06:56.833

我在页面上用隐藏的 div 填充这个临时元素。因此，我没有返回临时弹出窗口中的值，而是返回隐藏 div 中的值。我需要重新安排以使其正常工作。

# jsp - tomcat - 定时器内存泄漏

> ID：10725498
> 
> 赞同：1
> 
> 时间：2012-05-23T18:07:55.177
> 
> 标签：jsp, tomcat, servlets, memory-leaks

我目前正在使用 tomcat7 。我的 Web 应用程序在停止时导致了 Timer 内存泄漏。日志是：

```
 SEVERE: A web application appears to have started a TimerThread     
   named [Timer-5] via the java.util.Timer API but has failed to stop it. 
   To prevent a memory leak, the timer (and hence the associated thread) 
   has been forcibly cancelled. 
```

我没有`ava.util.Timer`在我的网络应用程序中使用 j。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T00:14:29.247

这并不一定表明*您的*代码正在使用`java.util.Timer`（顺便说一下，这在 Java EE webapp 中是一个非常糟糕的主意，原因[这里](https://stackoverflow.com/questions/2248971/running-periodic-task-at-server-side-for-servlet-jsp-mvc-website/2249068#2249068)提到了）。这`Timer`也可以作为 webapp`/WEB-INF/lib`文件夹中提供的任何库的一部分包含在内。显然，一些库已经自动注册了一个`ServletContextListener`或`ServletContainerInitializer`在 webapp 的启动时`Timer`创建了。

您需要调查它是哪个库，然后相应地修复/删除它。提取 JAR 以检查随附的代码，或将它们一一删除。一旦找到罪魁祸首，我肯定会向库的维护人员报告，`Timer`在 Java EE webapp 中绝对不推荐使用，他们必须修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T15:04:50.460

在[tomcat wiki](http://wiki.apache.org/tomcat/MemoryLeakProtection%20)中有一个解释（种类）和一个指向[commons-pool 中这个错误](https://issues.apache.org/jira/browse/POOL-161)的链接。

定时器停止在 tomcat >6.0.27 中是可选的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T05:18:46.557

这个我不太确定。似乎有一个 RMI 超时计时器，但所有这些都是 Tomcat 的一部分，所以它不应该是泄漏

# webgl - 如何检测网格上亮面的数量？

> ID：10725501
> 
> 赞同：4
> 
> 时间：2012-05-23T18:08:29.573
> 
> 标签：webgl, three.js

我有许多对象排列在 a`THREE.scene`中，我想计算或检索一个相对值，该值指示每个对象从单个光源接收到多少光`PointLight`。简化示例：

![块示例](../Images/5398c0061e0d4db471c84aa90528ed38.png)

将光定位在相机上时，块**1**的值可能为 0.50，因为 6 个面中有 3 个完全曝光，而**2**为 ~0.33，3**为**~1.67。

我可以通过从光线向每个面的中心绘制一条光线并查看相交点来实现这一点，但我假设可以直接检索每个面的光照水平。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T21:12:02.523

此代码考虑了对象的全局矩阵。

```
var amount = 0;

var rotationMatrix = new THREE.Matrix4();
var vector = new THREE.Vector3();
var centroid = new THREE.Vector3();
var normal = new THREE.Vector3();

for ( var i = 0; i < objects.length; i ++ ) {

    var object = objects[ i ];

    rotationMatrix.extractRotation( object.matrixWorld );

    for ( var j = 0; j < object.geometry.faces.length; j ++ ) {

        var face = object.geometry.faces[ j ];

        centroid.copy( face.centroid );
        object.matrixWorld.multiplyVector3( centroid );

        normal.copy( face.normal );
        rotationMatrix.multiplyVector3( normal );

        vector.sub( light.position, centroid ).normalize();

        if ( normal.dot( vector ) > 0 ) amount ++;

    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T17:54:02.257

我认为这样的事情应该可以解决问题。

```
var amount = 0;
var faces = mesh.geometry.faces;
for ( var i = 0; i < geometry.faces.length; i ++ ) {

    if ( geometry.faces[ i ].normal.dot( light.position ) > 0 ) amount ++;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T17:09:44.657

（警告：蛮力方法！）

我将其包括在内以供参考，因为它是我目前用来满足问题中描述的所有要求的东西。如果从灯光的位置不能直接看到其中心，则此函数认为该面未点亮。

对于我的应用程序，我没有要考虑的旋转矩阵。

```
function getLightLevel(obj) {
    /* Return percentage of obj.geometry faces exposed to light */
    var litCount = 0;

    var faces = obj.geometry.faces;
    var faceCount = faces.length; 
    var direction = new THREE.Vector3();
    var centroid = new THREE.Vector3();

    for (var i=0; i < faceCount; i++) {
        // Test only light-facing faces (from mrdoob's first answer).
        if (faces[i].normal.dot(light.position) > 0) {
            centroid.add(obj.position, faces[i].centroid);
            direction.sub(centroid, light.position).normalize();

            // Exclude face if centroid is obscured by another object.
            var ray = new THREE.Ray(light.position, direction);
            var intersects = ray.intersectObjects(objects);

            if (intersects.length > 0 && intersects[0].face === faces[i]) {
                litCount ++;
            }
        }
    }
    return litCount / faceCount;
} 
```

# c# - 如何删除/更新 cookie 容器 c# 中的 cookie？

> ID：10725503
> 
> 赞同：4
> 
> 时间：2012-05-23T18:08:36.107
> 
> 标签：c#, visual-studio-2010, cookies, httpwebrequest, httpwebresponse

我使用 webbrowser 控件打开一个网站，然后将 cookie 保存在 cookieContainer 中，然后使用 HTTPwebrequest 处理转发浏览页面等。

问题出现了，当我进行搜索并返回 100 页时，在第一页上，它保存了一个名为：ABC 的 cookie，我将其添加到 cookiecontainer 并移至下一页，在第二页上再次使用相同的 Cookie 命名： ABC 被赋予了一些价值，但现在我在 cookiecontainer 中有两个相同的 cookie，当我移动到下一页时它不起作用，因为它采用了第一个 cookie，这会弄乱一切。

如何解决这个问题？

HttpWEBREQUEST 功能：

```
 public string getHtmlCookies(string url)
    {
        string responseData = "";
        try
        {
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Accept = "*/*";
            request.AllowAutoRedirect = true;
            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
            request.Timeout = 30000;
            request.Method = "GET";
            request.CookieContainer = yummycookies;

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                foreach (Cookie cookie in response.Cookies)
                {
                    string name = string.Empty;
                    name = cookie.Name;
                    string value = cookie.Value;
                    string path = "/";
                    string domain = "www.example.com";
                    yummycookies.Add(new Cookie(name.Trim(), value.Trim(), path, domain));

                }

                Stream responseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(responseStream);
                responseData = myStreamReader.ReadToEnd();
            }
            response.Close();

        }
        catch (Exception e)
        {
            responseData = "An error occurred: " + e.Message;
        }

        return responseData;

    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:19:52.790

你可以使用[`SetCookies`](http://msdn.microsoft.com/en-us/library/system.net.cookiecontainer.setcookies)方法。

```
var container = new System.Net.CookieContainer();
var uri = new Uri("http://www.example.com");
container.SetCookies(uri,"name=value");
container.SetCookies(uri,"name=value1"); 
```

调用`GetCookies(uri)`将给出一个带有`Value=value1`.

在您的情况下，代码将类似于

```
var uri = new Uri("http://www.example.com");
yummycookies.SetCookies(uri, response.Headers[HttpResponseHeader.SetCookie]); 
```

# asp.net - 识别 iis 7 中消耗内存最多的 Web 应用程序

> ID：10725505
> 
> 赞同：0
> 
> 时间：2012-05-23T18:08:42.643
> 
> 标签：asp.net, asp.net-mvc-3, iis, iis-7, iis-7.5

如何识别默认应用程序池中使用大量内存的 Web 应用程序？

**编辑** 我的应用程序池包含许多应用程序，我无法分离或停止它们，我能否知道我的多应用程序应用程序池中的某些特定应用程序使用了哪些资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:17:39.123

您可以使用性能监视器，打开它，然后单击“添加计数器”，然后选择“Asp.Net 应用程序”或“ASP.Net 应用程序 vx.xxxxx”，然后选择您的计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:22:30.123

我*认为*在 IIS 中，如果您有多个 Web 应用程序共享 1 个应用程序池，则 w3wp.exe 进程会将每个网站隔离到自己的 AppDomain 中。如果您使用的是 .NET 4，看起来[每个 AppDomain 都可以读取一些性能指标。](http://www.c-sharpcorner.com/UploadFile/hasansheik/diagnostic-and-performance-monitoring-in-dotnet-4-0/)

这意味着您可以在应用程序中添加一些代码，这些代码会转储出它们自己的 AppDomain 的统计信息，然后您可以对其进行汇总和报告。

我自己没有尝试过，但似乎它可能会有所帮助......

* * *

这样做的一个非常简单的形式可能是在你的`Application_Start()`方法中，设置`AppDomain.MonitoringIsEnabled = true;`

然后有一个“stats.aspx”页面将`AppDomain.CurrentDomain.MonitoringTotalProcessorTime`任何其他统计信息转储到标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T18:14:58.247

对于运行多个应用程序池的 Web 服务器，我过去也需要这样做。根据[这篇文章](http://learn.iis.net/page.aspx/1211/troubleshooting-high-cpu-in-an-iis-7x-application-pool/)：“如果您需要确定哪个应用程序池与特定 w3wp.exe 进程相关联，请打开管理命令提示符，切换到 %windir%\System32\inetsrv 文件夹（cd %windir%\System32\inetsrv ) 并运行 appcmd list wp。这将在引号中显示 w3wp.exe 进程的进程标识符 (PID)。您可以将该 PID 与任务管理器中可用的 PID 匹配。

这正是我所做的。

# perl - 在 Perl 中复制二维数组

> ID：10725508
> 
> 赞同：2
> 
> 时间：2012-05-23T18:08:52.163
> 
> 标签：perl

我正在尝试将二维数组复制到另一个数组中。但是，我遇到了一个奇怪的问题，即我的函数没有打印第一行。但是，值是存在的，因为当我单独打印第一行时，它确实会被打印出来。

这是我的 perl 代码：

```
#!/usr/bin/perl
use UNIVERSAL 'isa';

#Function to print the contents of an array
sub printArray {
    my ($vHash) = @_;
    if (isa($vHash, 'ARRAY')) {
        foreach my $el (@$vHash) {
            print "A: $el\n";
            printArray($el);
        }
    } else {
        return;
    }
    return;
}

my @array = "";
my @line1 = (1, 2, 3);
my @line2 = (3, 4, 5);
my @line3 = (6, 7, 8);

#Creating a 2D array
@array = (\@line1, \@line2, \@line3);

my @array2 = "";
my $row_size = @array;
print "ROW SIZE: $row_size\n";
my $column_size = @{$array[0]};
print "COL Size: $column_size\n\n\n";

#Copying over the 2D array...element by element
for (my $i=0; $i<$row_size; ++$i) {
    for (my $j=0; $j<$column_size; ++$j) {
        $array2[$i][$j] = $array[$i][$j];
    }
}

print "\n\nORIG ARRAY\n\n";
printArray(\@array);
print "\n\nCOPY ARRAY\n";
printArray(\@array2);

print "\n\n";

#Printing the first row separately
foreach my $ele (@{$array2[0]}) {
    print "V: $ele\n";
} 
```

这是程序的输出：

```
ROW SIZE: 3
COL Size: 3

ORIG ARRAY

A: ARRAY(0x65b110)
A: 1
A: 2
A: 3
A: ARRAY(0x65b170)
A: 3
A: 4
A: 5
A: ARRAY(0x65b1d0)
A: 6
A: 7
A: 8

COPY ARRAY
A:                                                     #WHY THIS IS MISSING
A: ARRAY(0x6d1f00)
A: 3
A: 4
A: 5
A: ARRAY(0x6d1f50)
A: 6
A: 7
A: 8

V: 1                                                  #THESE VALUES ARE COMING FINE
V: 2
V: 3 
```

我真的很困惑我在这里做错了什么！为什么函数 printArray 不打印第一行？任何帮助将不胜感激。谢谢，新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:56:36.590

顺便说一句，您不需要编写像这样的复制函数。

```
use Storable qw(dclone);
my @array2 = @{ dclone(\@array) }; 
```

`dclone`将制作任何 perl 数据结构的深层副本。

此外，如果您只需要打印这些数据，您可以使用`Data::Dumper`它。

```
use Data::Dumper;
print Dumper(\@array), "\n" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:22:06.220

您必须*始终* `use strict`并且`use warnings`在程序开始时，尤其是在寻求代码帮助之前。

如果你在这种情况下这样做了，你会被警告你不能分配给`$array2[0][0]`etc。

您已使用初始化数组

```
@array2 = ""; 
```

它创建一个数组，其中一个元素等于空字符串`("")`。现在它有了一个值，Perl 不能为您自动激活第一个元素中的数组引用，因此您的分配失败。

如果您启用了`strict`. 错误消息将准确解释出了什么问题。

如果您希望它为空，则无需初始化新数组，但正确的方法是

```
@array = (); 
```

# c++ - C ++对数据类型问题

> ID：10725513
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:09:13.777
> 
> 标签：c++, data-structures, std-pair

我正在编写一个朋友推荐算法，其中一部分我必须使用`std::pair`C++ 中的数据类型存储 350 个随机友谊。我基本上使用邻接列表（实现为*向量的向量*）。我创建了一个存储数据类型的向量`pair<int,int>`。我从邻接列表中选择一个随机值并随机选择它的一个朋友，但是，即使我很确定我将数据类型作为对推送，但我无法遍历它。

可能的原因是什么？

```
int FRIENDS_AND_UNFRIENDS_TO_STORE=350,randomNode=rand()%adjacencyList.size(),randomFriend;
vector< pair<int,int> >listForPR;
listForPR.resize(FRIENDS_AND_UNFRIENDS_TO_STORE*2);

for(int i=0;i<FRIENDS_AND_UNFRIENDS_TO_STORE;i++) {
    while(adjacencyList[randomNode].size()<1)
        randomNode=rand()%adjacencyList.size();
    randomFriend=rand()%adjacencyList[randomNode].size();
    listForPR.push_back(make_pair(randomNode,adjacencyList[randomNode][randomFriend]));
}

for(int i=0;i<350;i++)
    cout<<"Node #"<<listForPR[i].first<<" & It's Friend: "<<listForPR[i].second<<endl; 
```

添加了这个并且！神秘地解决了这个问题；

```
for(int i=0;i<FRIENDS_AND_UNFRIENDS_TO_STORE;i++) {
    while(adjacencyList[randomNode].size()<1)
        randomNode=rand()%adjacencyList.size();
    randomFriend=rand()%adjacencyList[randomNode].size();
    pair<int,int> temp=make_pair(randomNode,adjacencyList[randomNode][randomFriend]);//added
    listForPR.push_back(temp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:15:51.510

您的向量包含您在循环期间推入的 350/2 = 175 个元素，但在迭代时您将经历 350 个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:01:51.913

你不应该混合调整大小和 push_back。

第一次调整大小用 350 个零项填充 listForPR。然后 push_back 将项目添加到向量的末尾。

删除调整大小语句应该可以解决问题。更好的解决方案是使用保留（它只是在向量中准备缓冲区以进行插入）。

# encryption - 如何使用 PowerShell 指定 Amazon S3 对象的服务器端加密？

> ID：10725517
> 
> 赞同：1
> 
> 时间：2012-05-23T18:09:26.143
> 
> 标签：encryption, powershell, amazon-s3, amazon-web-services, server-side

有人能解释一下如何在 PowerShell 脚本中启用 Amazon S3 服务器端加密吗？我正在使用下面的示例代码，但是当我在 AWS 控制台或 Cloudberry S3 Explorer Pro 中检查加密时，加密类型仍设置为“无”。在文件上传后使用 AWS / Cloudberry 手动执行此操作是不可行的，因为该脚本将部署到 200 多台服务器，每台服务器在 S3 中都有自己的存储桶。这是脚本中的一段代码：

```
$TestFile="testfile.7z"
$S3ObjectKey = "mytestfile.7z"
#Create Amazon PutObjectRequest.
$AmazonS3 = [Amazon.AWSClientFactory]::CreateAmazonS3Client($S3AccessKeyID,$S3SecretKeyID)
$S3PutRequest = New-Object Amazon.S3.Model.PutObjectRequest 
$S3PutRequest.BucketName = $S3BucketName
$S3PutRequest.Key = $S3ObjectKey
$S3PutRequest.FilePath = $TestFile
$S3Response = $AmazonS3.PutObject($S3PutRequest) 
```

我尝试插入以下内容但没有成功（在 $S3Response 行之前）：

```
$S3PutRequest.ServerSideEncryption 
```

添加上述内容后，我在输出中收到此消息，但该文件仍未在 S3 上标记为加密：

```
MemberType          : Method
OverloadDefinitions : {Amazon.S3.Model.PutObjectRequest WithServerSideEncryptionMethod(Amazon.S3.Model.ServerSideEncryptionMethod encryption)}
TypeNameOfValue     : System.Management.Automation.PSMethod
Value               : Amazon.S3.Model.PutObjectRequest WithServerSideEncryptionMethod(Amazon.S3.Model.ServerSideEncryptionMethod encryption)
Name                : WithServerSideEncryptionMethod
IsInstance          : True 
```

谁能告诉我我做错了什么？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:43:43.570

您应该添加：

```
$S3PutRequest.WithServerSideEncryptionMethod([Amazon.S3.Model.ServerSideEncryptionMethod]::AES256) 
```

或者：

```
$S3PutRequest.ServerSideEncryptionMethod = [Amazon.S3.Model.ServerSideEncryptionMethod]::AES256 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T12:00:56.720

如果您使用 CloudBerry，它有自己的 PowerShell 管理单元

```
Add-PSSnapin CloudBerryLab.Explorer.PSSnapin

$s3 = Get-CloudS3Connection -Key XXXXXXX -Secret YYYYYYY
$destFolder = $s3 | Select-CloudFolder -path "mybucket"
$local = Get-CloudFilesystemConnection
$srcFolder = $local | Select-CloudFolder -path "c:\myzips"
$srcFolder | Copy-CloudItem $destFolder -filter "testfile.7z" -SSE 
```

注意*Copy-CloudItem*命令中的*-SSE*参数。可以在他们的博客上找到一些有用的示例：http: [//blog.cloudberrylab.com/search ?q=powershell](http://blog.cloudberrylab.com/search?q=powershell)

# yii - Yii CGridView 使用关系表排序和搜索

> ID：10725520
> 
> 赞同：5
> 
> 时间：2012-05-23T18:09:36.327
> 
> 标签：yii

我的数据库中有 3 个表，

图片如下，我关注了[http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/](http://www.yiiframework.com/wiki/281/searching-and-sorting-by-related-model-in-cgridview/)

获得具有搜索和排序目的的最终网格。所以我在`search()`功能上连接了 2 个表

> ```
>  public function search()
>   {
>       // Warning: Please modify the following code to remove attributes that
>       // should not be searched.
> 
>       $criteria=new CDbCriteria;
> 
>                 $criteria->with = array( 'bposite' );
>                 $criteria->together = false;
>                 $criteria->with = array( 'client' );
>       $criteria->compare('id',$this->id);
> //        $criteria->compare('client_id',$this->client_id);
> //        $criteria->compare('bposite_id',$this->bposite_id);
>       $criteria->compare('userid',$this->userid,true);
>       $criteria->compare('password',$this->password,true);
>                 $criteria->compare( 'bposite.name', $this->bposite_search, true );                
>                 $criteria->compare( 'client.name', $this->client_search, true );
> 
>       return new CActiveDataProvider($this, array(
>           'criteria'=>$criteria,
>                             'sort'=>array(
>                                 'attributes'=>array(
>                                     'client_search'=>array(
>                                         'asc'=>'client.name',
>                                         'desc'=>'client.name DESC',
>                                     ),
>                                     'bposite_search'=>array(
>                                         'asc'=>'bposite.name',
>                                         'desc'=>'bposite.name DESC',
>                                     ),
>                                     '*',
>                                 ),
>                             ),
>       ));
>   }
> } 
> ```

但是我得到了客户的结果，bposite seach 和 sort 出现了类似的问题

```
>     Error 500: <h1>CDbException</h1>
>     <p>CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'bposite.name'
> in 'where clause'. The SQL statement executed was: SELECT
> COUNT(DISTINCT `t`.`id`) FROM `clientbposites` `t`  LEFT OUTER JOIN
> `client` `client` ON (`t`.`client_id`=`client`.`id`)  WHERE
> (bposite.name LIKE :ycp0)
> (D:\wamp\www\yi\framework\db\CDbCommand.php:516)</p><pre>#0
> D:\wamp\www\yi\framework\db\CDbCommand.php(411):
> CDbCommand->queryInternal('fetchColumn', 0, Array)

how can implement non-related table with cgridview search and sort options. 
```

![我的数据库表和结果 girdview](../Images/040488a83378a8d8800af88b89f199fc.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T07:51:01.010

我已经对此进行了逐步的博客文章。如果您遇到困难，请随意阅读并提出问题。而不是在这里写所有东西来重复自己，这里是链接：[http ://www.mrsoundless.com/post/2011/05/09/Searching-and-sorting-a-column-from-a-related-table-在-a-CGridView.aspx](http://www.mrsoundless.com/post/2011/05/09/Searching-and-sorting-a-column-from-a-related-table-in-a-CGridView.aspx)

它似乎帮助了很多人。希望它也能帮助你:)

# python - 平方根的任意精度

> ID：10725522
> 
> 赞同：26
> 
> 时间：2012-05-23T18:09:46.093
> 
> 标签：python, math

`decimal.Decimal(math.sqrt(2))`屈服时我很失望

```
Decimal('1.4142135623730951454746218587388284504413604736328125') 
```

并且小数点后 15 位之后的数字是错误的。（尽管很高兴给你超过 15 位数！）

如何在 Python的十进制扩展中获得第一个`m` *正确的数字？*`sqrt(n)`

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-23T18:16:38.873

使用[`sqrt`Decimal 上的方法](https://docs.python.org/3/library/decimal.html#decimal.Decimal.sqrt)

```
>>> from decimal import *
>>> getcontext().prec = 100  # Change the precision
>>> Decimal(2).sqrt()
Decimal('1.414213562373095048801688724209698078569671875376948073176679737990732478462107038850387534327641573') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T18:12:34.577

你可以试试[bigfloat](http://packages.python.org/bigfloat/)。项目页面的示例：

```
from bigfloat import *
sqrt(2, precision(100))  # compute sqrt(2) with 100 bits of precision 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T18:12:03.320

IEEE 标准双精度浮点数只有 16 位精度。任何使用 IEEE 的软件/硬件都不能做得更好：

[http://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)

您需要一个特殊的 BigDecimal 类实现，并实现所有数学函数来使用它。Python有这样一个东西：

[https://literateprograms.org/arbitrary-precision_elementary_mathematical_functions__python_.html](https://literateprograms.org/arbitrary-precision_elementary_mathematical_functions__python_.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-18T12:02:53.397

> 如何在 Python 中获取 sqrt(n) 的十进制扩展中的前 m 个正确数字？

一种方法是计算数字的[整数平方根](https://en.wikipedia.org/wiki/Integer_square_root)乘以所需的 10 次方。例如，要查看 的前 20 位小数`sqrt(2)`，您可以执行以下操作：

```
>>> from gmpy2 import isqrt
>>> num = 2
>>> prec = 20
>>> isqrt(num * 10**(2*prec)))
mpz(141421356237309504880) 
```

`isqrt`使用维基百科页面上提供的算法，该功能实际上很容易实现。

# c# - 如何在 C# 中远程执行另一台 PC 上的进程

> ID：10725527
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:10:03.870
> 
> 标签：c#, process, local

我想在远程电脑上调用一个进程。以下代码适用于本地，但我无法使其适用于远程电脑

```
Process proc1 = new Process();

if (File.Exists("C:\\myApp.exe"))
{
    proc1.StartInfo.FileName = "C:\\myApp.exe";
    proc1.Start();
    proc1.Close();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:13:09.173

这里也问了一个类似的问题：

[如何在远程计算机上执行命令？](https://stackoverflow.com/questions/428276/how-to-execute-a-command-in-a-remote-computer)

答案之一是使用 sysinternals [psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

另一个答案是使用[WMI](http://msdn.microsoft.com/en-us/library/bb404655.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:28:19.150

我同意 Seth Flowers 的观​​点 - psexec 是一个很好的方法。

--

由于您将问题标记为 C#，因此我将添加：

如果您之所以问是因为您正在创建一个分布式系统，其中主机在子计算机上产生作业，那么您可以创建一个 C# 主机应用程序和一个 C# 客户端应用程序，并使用 Windows Communication Foundation (WCF) 将它们链接在一起。这将给你一个服务类来与主机上的其他机器进行通信。一旦你可以在机器之间进行通信，你可以简单地让主机告诉孩子“运行这个应用程序”，你可以在孩子端使用你的进程代码。

这是一篇很好的文章，解释了这个概念，我以前用过（旁注，如果你使用这个，请以管理员身份运行 VS，否则 metadataBehavior 对象会抛出异常）： http: [//www.codeproject.com/Articles/16765 /WCF-Windows-通信-基础-示例](http://www.codeproject.com/Articles/16765/WCF-Windows-Communication-Foundation-Example)

# perl - 用反引号调用的外部程序仍然产生输出

> ID：10725533
> 
> 赞同：5
> 
> 时间：2012-05-23T18:10:28.530
> 
> 标签：perl, backticks

所以我在 perl 中调用了一个外部程序并想要捕获它的输出：

```
my @RNAalifoldOut = `RNAalifold some parameters`; 
```

如果从命令行调用，则输出由三行组成，例如：

```
4 sequences; length of alignment 48.
__GCCGA_UGUAGCUCAGUUGGG_AGAGCGCCAGACUGAAAAUCAGA 
...((((.....((((.........)))).(((((.......))))) 
```

但是，我的数组`@RNAalifoldOut`仅包含最后两行，并且在执行该行时第一行直接出现在屏幕上。

怎么会这样？我想也许程序将第一行写入`STDERR`，但是反引号运算符不是将其丢弃了吗？我能做些什么来隐藏这个输出？

问候尼克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T18:21:23.947

您可能会看到来自*RNAalifold*的标准错误。反引号仅捕获标准输出。

通过将代码更改为来捕获标准输出和标准错误

```
my @RNAalifoldOut = `RNAalifold some parameters 2>&1`; 
```

要丢弃标准错误，请使用

```
my @RNAalifoldOut = `RNAalifold some parameters 2>/dev/null`; 
```

在类 Unix 平台上。在 Windows 上，使用

```
my @RNAalifoldOut = `RNAalifold some parameters 2>nul`; 
```

# jquery - css高度问题

> ID：10725535
> 
> 赞同：0
> 
> 时间：2012-05-23T18:10:33.160
> 
> 标签：jquery, html, css

我对侧边栏的高度有疑问。我使用**jQuery**来测量内容的高度，然后将此高度添加到侧边栏以显示*侧边栏的阴影*。但它在 IE 中出现问题。

该网站的链接是：[http ://www.norwichkitty.com/business-directory/](http://www.norwichkitty.com/business-directory/)

请检查左侧边栏阴影问题..

```
$(document).ready(function() { 
    var blockheight = $('.right-content').height();
    $('.sidebar').css('height', blockheight);
}); 
```

它的**CSS**视图是

```
element.style {
    height: 1592px;
}
.sidebar {
    background: url("../img/sidebar-shadow.png") repeat-y scroll right center transparent;
    float: left;
    height: 100%;
    overflow-y: auto;
    position: relative;
    width: 305px;
    z-index: 999999;
} 
```

如果有任何 CSS 解决方案来解决这个问题.. 请让我知道..

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:42:51.533

您可以将图像加宽到侧边栏的宽度，然后使其成为整个表格的背景图像然后无论内容的高度如何，侧边栏图像在 y 轴上重复。

```
background: url(LINK_TO_IMAGE.png) repeat-y; 
```

（ps。有什么理由必须是一张桌子吗？）

# java - 如何合并多个类并避免instanceof？

> ID：10725540
> 
> 赞同：4
> 
> 时间：2012-05-23T18:10:58.057
> 
> 标签：java

我正在帮助开发的程序应该输出几个动态生成的问题供用户回答。这些问题有不同的类型，并有一个相应的类`Constraint`，它们用用户给定的信息填充。我的问题是如何为不同的约束创建统一的行为。

```
 ---->Constraint<--------------------
                    |                  |               |
                  FConstraint        PConstraint    TConstraint
                  |         |
            UConstraint AConstraint 
```

基类`Constraint`是空的，TConstraint 也是如此。

`UConstraint`，`PConstraint`并`AConstraint`共享三个变量。但是，`UConstraint`还有`AConstraint`一个`PConstraint`没有的附加变量。

我觉得我正试图用一些钳子锤穿一堵砖墙。我的一个想法是为带有签名的约束提供一种抽象方法：

```
// All answers are of type string.
abstract void setValue(string variable, string answer); 
```

每个`Constraint`子类都实现了这些。但是，传递一个字符串来确定要设置哪个变量似乎很容易出错，而且代码味道也很糟糕。

第二个选项是将三个相似的变量向上移动到约束中，但这仍然留下`UConstraint, AConstraint`了我可能需要设置的额外信息。`TConstraint`不需要任何这些都无济于事。

我目前的蛮力“搞砸了这个设计”。解决方案是一个`instanceof`汤，我在其中检查并填写缺少的特定于约束的信息。

```
Object constraint = item.getConstraint();

if (constraint instanceof AConstraint) {
    AConstraint constraint = (AConstraint) constraint;

    if (constraint.getValue() == null) {
        constraint.setValue(string);
    } else if (constraint.getKey() == null) {
        constraint.setKey(string);
    } // More of the same.
} else if (constraint instanceof PConstraint) {
    // As the above if() group.
} // etc. 
```

这个设计有比抽象函数更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:33:44.230

使用这个原则

在接口中编程，将不断变化的行为封装在抽象类或接口中。

例如：对于您上面给出的示例

接口 - 约束

抽象类 - FConstraint

具体类 - PConstraint, TConstraint, UConstraint, AConstraint

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:34:37.880

您的问题没有足够的信息来说明您在每种情况下需要做的实际工作，但通常是这样的代码：

```
Object constraint = item.getConstraint();

if (constraint instanceof AConstraint) {
    // Work
} else if (constraint instanceof PConstraint) {
    // Work
} // etc. 
```

使用[多态性](http://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29)并重构为这样的东西是一种强烈的气味：

```
Constraint constraint = item.getConstraint();
constraint.doWork(...); 
```

其中特定的类看起来像这样：

```
public class AConstraint {
  public ... doWork(...) {
    if (getValue() == null) {
      setValue(string);
    } else if (getKey() == null) {
      setKey(string);
    } // More of the same.      
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T18:19:28.107

你可以这样做：

```
public interface Constraint{}

public abstract class VariableConstraint implements Constraint 
{ 
  /* hold 3 shared variables here */
}

public class UConstraint extends VariableConstraint{}
public class PConstraint extends VariableConstraint{}
public class AConstraint extends VariableConstraint{}

public abstract class EmptyConstraint implements Constraint {}

public class TConstraint extends EmptyConstraint {} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T18:19:15.377

在中指定通用功能`Constraint`：您希望能够对`Constraint`对象（实际上可能是其中一种子类型的对象）执行的任何操作，您都有一个用于该功能的方法`Constraint`，您可以在子类中覆盖。

您可以对那些功能没有意义的父类进行简单的（例如空的）实现。

这样你就不需要关心对象的具体类，只需使用超类提供的设施

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T18:26:24.840

有`Constraint`一个接口。定义一个扩展 this 的抽象类，`Constraint`并且 this 应该具有共享变量。`UConstraint`，`AConstraint`应该扩展这个具有共享变量的抽象类。其余类可以直接实现`Constraint`接口。代码实例应更改为

```
Constraint constraint = item.getConstraint();
constraint.doWork(..); 
```

更好的设计总是针对接口编写代码

# php - 在 PHP 脚本中包含来自文本文件的数组

> ID：10725542
> 
> 赞同：0
> 
> 时间：2012-05-23T18:11:03.127
> 
> 标签：php, arrays, include

我正在制作一个脚本，将嵌套数组输出到 PHP 中的文本文件。但是，当我使用时，我正在努力让其他脚本使用该数组`include('array.txt');`

我已经尝试了几种不同的方法，比如`$var = include('array.txt');`或者只是在文本文件中定义了 var 的包含无济于事。

需要注意的是，这个文件只需要生成一次，之后数组不应该改变（因此输出到文本文件的方法）

这是数组文件的示例。

```
array(array('2','30','37','43','104','152','166','193'),array('10','60','95','112','116','163','199','240','242'),array('12','44','80','91','128','138','140','231'),array('19','38','102','111','130','134','175','207','210','246')) 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:13:58.680

使用序列化：

```
file_put_contents ($filename, serialize ($array)); // write to file
$array = unserialize (file_get_contents ($filename)); // retrieve 
```

* * *

或 JSON 编码：

```
file_put_contents ($filename, json_encode ($array)); // write to file
$array = json_decode (file_get_contents ($filename), true); // retrieve 
```

* * *

此外，使用 gzip 编码来节省磁盘空间可能是个好主意。（使用[gzencode()](http://php.net/manual/en/function.gzencode.php)和[gzdecode()](http://www.php.net/manual/en/function.gzdecode.php)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T18:18:41.850

最简单的方法是将输出文件的文件扩展名更改为 .php。.php 只是一个带有 .php 扩展名的文本文件。然后你可以使用 include 函数来包含 php 文件。

# deployment - Netbeans：项目不会突然启动 - Glassfish 问题？

> ID：10725545
> 
> 赞同：2
> 
> 时间：2012-05-23T18:11:31.310
> 
> 标签：deployment, netbeans, glassfish

我是 Netbeans 的第一次用户，只是在玩。我遵循了一个非常基本的教程，当我第一次运行该项目时，它打开了我的浏览器（Chrome）并显示了它应该显示的内容。

第二天，我想把它展示给我的小伙伴们，但项目无法启动。

项目选项卡显示以下内容：

```
init:
deps-module-jar:
deps-ear-jar:
deps-jar:
library-inclusion-in-archive:
library-inclusion-in-manifest:
compile:
compile-jsps:
Starting GlassFish Server 3.1.2 
```

另一个选项卡“Java DB 数据库进程”给了我以下信息：

```
Wed May 23 19:52:45 CEST 2012 : Sicherheitsmanager mit einfacher Server-Sicherheitsrichtlinie installiert.
Wed May 23 19:52:46 CEST 2012 : Apache Derby Network Server 10.8.1.2 - (1095077) wurde gestartet und ist bereit, Verbindungen am Port 1527 zu akzeptieren. 
```

（最后一行翻译为“服务器已启动并准备好接受端口 1527 中的连接”）

当我尝试时，唯一不同的是我在大学的公共无线网络中，而不是在家里。Windows 防火墙询问我是否要授予权限，我说“是”

所以基本上 Netbeans 告诉我，我的项目目前正在启动中，但是很长一段时间都没有发生任何事情。

有什么想法我可能做错了吗？我用谷歌搜索了它，但一无所获。

编辑： 20 分钟后，我收到超时和无法启动服务器的消息。我一无所知...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:20:47.010

不同的网络配置确实可能是导致此问题的原因。

您可以通过检查以下 server.log 来验证这一点：

> *glassfish-install-dir/glassfish/domains/domain1/config/server.log*

向下滚动到服务器启动停止之前的最后一个日志条目。

或者您可以在详细模式下手动启动服务器。然后您将在控制台中看到所有日志消息：

打开控制台窗口并切换到以下目录：

> *glassfish-安装目录/bin*

然后输入以下命令：

> asadmin 起始域 --verbose=true

# freemarker - 在 FTL 模板中按索引访问元素

> ID：10725547
> 
> 赞同：8
> 
> 时间：2012-05-23T18:11:38.450
> 
> 标签：freemarker

需要访问模板中列表的第一个和第二个元素。

我的Java代码：

```
myMap.put("key", Arrays.asList("val1", "val2"); 
```

我的 FTL 模板：

```
<#list myMap?keys as key> 
${myMap[key][0]}, ${myMap[key][1]} 
```

<-- 上面的行因 myMap[key][0] 上的未定义表达式而失败。我检查了一下，myMap[key] 是一个 SimpleSequence。另外，尝试了 ${myMap[key]?first} 并且失败并出现同样的错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T23:38:31.260

`[0]`并且`[1]`对此很好，但看起来序列有 0 个元素，或者这些元素是`null`. `${myMap[key]?size}`打印什么？顺便说一句，`${myMap[key][0]!'some default'}`如果您想获得一个值，即使该项目不存在或`null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T10:59:37.593

您的问题是您使用键将列表放入您的“myMap”对象：“key”然后尝试使用它们的键访问它：“keys”。

这就是为什么你得到一个未定义的表达式，来纠正它：

```
<#list myMap?key as k> 
${myMap[k][0]}, ${myMap[k][1]} 
```

或者当然你可以将你的java代码更改为

```
myMap.put("keys", Arrays.asList("val1", "val2"); 
```

并按原样使用 ftl 代码。

# java - android发送和接收TCP包

> ID：10725549
> 
> 赞同：0
> 
> 时间：2012-05-23T18:11:45.670
> 
> 标签：java, android, sockets, package

我刚收到一个简短的问题。我正在尝试制作一个可以通过发送 TCP 包与服务器通信的应用程序，然后服务器将 TCP 包发送回或发送到其他设备。但是，当设备上接收到 TCP 包时，我如何提供服务来发出通知？

我试过这个；

```
 extends Service {
Thread henk;

private static final String TAG = "Service";

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    Toast.makeText(this, "My Service Created", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onCreate");
    henk = new Thread(new Runnable(){

        public void run() {
            // TODO Auto-generated method stub
            try {
                Boolean end = false;
                ServerSocket ss = new ServerSocket(1337);
                while(!end){
                        //Server is waiting for client here, if needed
                        Socket s = ss.accept();
                        BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));

                        String st = input.readLine();
                        Log.d("Tcp Example", "From client: "+st);

                        s.close();

                }
        ss.close();

        } catch (UnknownHostException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
        }
        }

    });

}

@Override
public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onDestroy");

}

@Override
public void onStart(Intent intent, int startid) {
    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Log.d(TAG, "onStart");

    henk.run();

} 
```

但这只会使我的应用程序崩溃。请帮忙？

堆栈跟踪：

```
 E/ActivityManager(  240): ANR in tictactoe.elqauto
E/ActivityManager(  240): Reason: Executing service tictactoe.elqauto/.servicere
cieve
E/ActivityManager(  240): Load: 7.09 / 7.29 / 7.5
E/ActivityManager(  240): CPU usage from 9411ms to 3791ms ago:
E/ActivityManager(  240):   1.2% 3857/de.devmil.minimaltext: 1.1% user + 0.1% ke
rnel / faults: 191 minor
E/ActivityManager(  240):   2.5% 240/system_server: 1.9% user + 0.5% kernel / fa
ults: 20 minor
E/ActivityManager(  240):   0.1% 4797/tiwlan_wq: 0% user + 0.1% kernel
E/ActivityManager(  240):   0% 16322/org.adwfreak.launcher: 0% user + 0% kernel
/ faults: 226 minor 1 major
E/ActivityManager(  240):   0% 19108/com.aricent.mtp: 0% user + 0% kernel / faul
ts: 16 minor
E/ActivityManager(  240):   0% 30600/com.google.process.gapps: 0% user + 0% kern
el / faults: 20 minor 5 major
E/ActivityManager(  240): 11% TOTAL: 8% user + 3% kernel + 0.1% iowait
E/ActivityManager(  240): CPU usage from 368ms to 884ms later:
E/ActivityManager(  240):   5.6% 240/system_server: 1.8% user + 3.7% kernel / fa
ults: 15 minor
E/ActivityManager(  240):     5.6% 266/ActivityManager: 1.8% user + 3.7% kernel
E/ActivityManager(  240): 44% TOTAL: 1.9% user + 1.9% kernel + 40% iowait 
```

**概括：**

所以我要做的是向服务器发送一个带有名称的 TCP 包，服务器将从数据库中获取属于该名称的 IP，并向它发送一个带有一些信息的 TCP 包。由于我没有找到解决方案，我尝试了套接字，但现在我被困在接收部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:13:07.040

在 android 设备上运行 TCP 服务器没有多大意义，因为您通常不知道它的地址。

另一种解决方案是保持客户端与服务器的连接，然后将包推送回应该接收包的任何设备。

更省电的解决方案是使用 Google 的 C2DM。但是，这确实需要使用 Google 帐户登录设备。

# c++ - 未解决的外部

> ID：10725559
> 
> 赞同：2
> 
> 时间：2012-05-23T18:12:23.190
> 
> 标签：c++, linker

我正在开发一个简单的自上而下的射击游戏，并希望将我的船移动到一个单独的 ShipManager 类，在那里我可以从一个位置管理所有它们。但是，在开始此操作时，我的 playerShip 上出现链接器错误：

错误 LNK2001：未解析的外部符号“公共：静态类 Ship * ShipManager::playerShip”

ShipManager.h 看起来像这样：

```
class Ship;

class ShipManager
{
public:
static Ship*    playerShip;
}; 
```

我在 ShipManager .cpp 中还没有任何内容。我错过了什么？我使用此代码的唯一其他地方是在我实际调用 ShipManager::playerShip 的游戏类中，并且在那里我没有收到任何错误。

我在我的 game.cpp 中包含“ShipManager.h”，所以它应该找到它吗？我有一种感觉，我在这门课上忘记了一些简单的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:13:14.657

静态成员必须在某处定义。您正在声明`playerShip`，但没有定义它。您需要在某处添加，*必须且只有一个 cpp 文件*：

```
Ship* ShipManager::playerShip; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T18:13:35.367

您只声明了静态成员，还需要在（仅）一个 cpp 文件中定义它：

```
Ship* ShipManager::playerShip; 
```

**好读：**
[定义和声明有什么区别？](https://stackoverflow.com/questions/1410563/what-is-the-difference-between-a-definition-and-a-declaration)

# java - Web 服务和 IIS 传递/重定向

> ID：10725563
> 
> 赞同：1
> 
> 时间：2012-05-23T18:12:49.627
> 
> 标签：java, web-services, iis, redirect, proxy

我们在客户的一台服务器上的 JBoss 中部署了一个 java 应用程序。应用程序必须向完全在网络之外的服务器发出 Web 服务调用。
不幸的是，我们客户的服务器没有暴露给外界，也无法发出 Web 服务请求。客户端在另一台服务器上运行 IIS，我们想通过 IIS 路由我们的 Web 服务调用。

我们不是微软商店，所以对如何做到这一点知之甚少。我们设置了重定向，但不幸的是，一旦我们的 Web 服务访问 IIS，它就会自动发出 302 响应。这不是我们想要的，我们只是希望 Web 服务调用通过 IIS 并转发到托管 Web 服务的服务器。然后，我们希望从服务器返回的响应通过 IIS 转发到客户端的应用程序服务器。本质上，我们希望 IIS 充当传递代理。有没有办法设置这样的东西？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-30T01:14:22.947

如果您正在运行 IIS 7 或更高版本，应用程序请求路由绝对是您的最佳选择。我们使用它在我们的系统中广泛实现代理和反向代理，处理正常的 http 和 web 服务请求（web 服务的缓存有点棘手）。

Ruslan Yakushev 的以下文章是一个很好的起点：[http ://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request -路由](http://www.iis.net/learn/extensions/url-rewrite-module/reverse-proxy-with-url-rewrite-v2-and-application-request-routing)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T21:02:51.480

我认为您想将 IIS 设置为内部服务器的反向代理。我有同样的问题，并且在反向代理信息下查找更好。

我们正在使用 IIS 8.5 和“应用程序请求路由”和“URL 重写”所需的 IIS 扩展。不像听起来那么可怕，这些不是不寻常的 IIS 功能安装。该文档很少专门提到 Web 服务，但它似乎适用于 Web 服务，就像它适用于其他网站一样。

祝你好运！

# r - 查找列中的值之间具有给定差异的行

> ID：10725564
> 
> 赞同：5
> 
> 时间：2012-05-23T18:12:52.753
> 
> 标签：r, dataframe, data.table

对于R中的data.table（或data.frame），我希望找到所有包含“值”列中的值的行，这些行与具有相同键的行中的另一个值的给定距离“距离”。因此，鉴于以下情况：

```
distance <- 22
   key value
   A     1
   B     1
   C     1
   D     1
   A     4
   B     4
   A    23
   B    23
   B    26
   B    26
   C    30 
```

我想用相同的键存在多少行的计数来注释原始表，以及从它的 +22 的值：

```
 key value count
  A     1     1
  B     1     1
  C     1     0
  D     1     0
  A     4     0
  B     4     2
  A    23     0
  B    23     0
  B    26     0
  B    26     0
  C    30     0 
```

我真的不知道从哪里开始使用这种在 R 中操作数据的自引用方法。我最初的尝试涉及创建第二个表并尝试与之匹配，但这似乎是一种奇怪且糟糕的方法。

注意：我正在使用该`data.table`包，但我很乐意在这种情况下使用 data.frame 工作，如果这样可以让事情变得更容易。

可重现：

```
require(data.table)
source <- data.table(data.frame(key=c("A","B","C","D","A","B","A","B","B","B", "C"),value=c(1,1,1,1,4,4,23,23,26,26,30)))
result <- data.table(data.frame(key=c("A","B","C","D","A","B","A","B","B","B","C"),value=c(1,1,1,1,4,4,23,23,26,26,30),count=c(1,1,0,0,0,2,0,0,0,0,0))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:29:20.883

这是一个`data.table`基于的解决方案。我有兴趣了解可以对其进行哪些改进（如果有的话）。

```
# Your code
library(data.table)
source <- 
data.table(data.frame(key = c("A","B","C","D","A","B","A","B","B","B", "C"),
                      value = c(1,1,1,1,4,4,23,23,26,26,30))) 
```

这很奇怪`data.table(data.frame(...`，因为`data.table()`也有一个名为 的参数`key`。`data.table`这是使用名为 的列创建 a 的一种方法`"key"`。大写以避免参数名称冲突说明了更标准的语法：

```
source <- data.table(Key = c("A","B","C","D","A","B","A","B","B","B","C"),
                     Value = c(1,1,1,1,4,4,23,23,26,26,30)) 
```

接下来为了避免`as.integer()`以后需要，我们将从现在更改列`Value`的类型。请记住，R 中的不是，就是。将数据存储为,通常比as更有效率。下一行比在上面输入很多 s 更容易。`numeric``integer``1``numeric``1L``integer``integer``integer``integer``numeric``L`

```
source[,Value:=as.integer(Value)]   # change type from `numeric` to `integer` 
```

现在继续

```
distance <- 22L
setkey(source, Key, Value)

# Heart of the solution (following a few explanatory comments):
#  "J()"   : shorthand for 'data.table()'
#  ".N"    : returns the number of rows that matched a line (see ?data.table)
#  "[[3]]" : as with simple data.frames, extracts the vector in column 3

source[,count:=source[J(Key,Value+distance),.N][[3]]]
source
      key value count
 [1,]   A     1     1
 [2,]   A     4     0
 [3,]   A    23     0
 [4,]   B     1     1
 [5,]   B     4     2
 [6,]   B    23     0
 [7,]   B    26     0
 [8,]   B    26     0
 [9,]   C     1     0
[10,]   C    30     0
[11,]   D     1     0 
```

请注意，直接通过引用`:=`更改`source`，就是这样。而且`setkey()`还改变了原始数据的顺序。如果需要保留原始订单，则：

```
source <- data.table(Key = c("A","B","C","D","A","B","A","B","B","B","C"),
                     Value = c(1,1,1,1,4,4,23,23,26,26,30))
source[,Value:=as.integer(Value)]   
source[,count:=setkey(copy(source))[source[,list(Key,Value+distance)],.N][[3]]]

      Key Value count
 [1,]   A     1     1
 [2,]   B     1     1
 [3,]   C     1     0
 [4,]   D     1     0
 [5,]   A     4     0
 [6,]   B     4     2
 [7,]   A    23     0
 [8,]   B    23     0
 [9,]   B    26     0
[10,]   B    26     0
[11,]   C    30     0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:31:09.503

您可以使用`mapply`循环键和值的所有组合：

```
data.table(t(mapply(function(key,val) 
      c(key=key,value=val,count=length(source$value[source$key==key & source$value>(val+distance)]) )
   , as.character(source$key),source$value))) 
```

# android - 如何检查旋转是否在Android上被锁定

> ID：10725565
> 
> 赞同：0
> 
> 时间：2012-05-23T18:12:58.690
> 
> 标签：android

我有一个应用程序，我希望我的应用程序尊重旋转磨刀器。但是如何检查旋转是否在Android上被锁定？当然以编程方式:)

==================

感[谢伊姆兰](https://stackoverflow.com/users/1202025/imran-khan)的回答。我把它放在这里是因为我找不到任何关于 DEFAULT_ACCELEROMETER_ROTATION 的信息，而且如果你只想读取系统设置，也不需要更改用户权限。干杯!

[http://developer.android.com/reference/android/provider/Settings.System.html#getInt(android.content.ContentResolver](http://developer.android.com/reference/android/provider/Settings.System.html#getInt(android.content.ContentResolver) , java.lang.String)

int str = Settings.System.getInt(Context.getContentResolver(),
Settings.System.ACCELEROMETER_ROTATION, DEFAULT_ACCELEROMETER_ROTATION);

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-22T11:37:33.613

ρяσѕρєя K 解决方案有效，但此回复是一个更漂亮且固定的解决方案：

```
boolean isOrientationEnabled;

try {
    isOrientationEnabled = Settings.System.getInt(getContentResolver(),                                    
        Settings.System.ACCELEROMETER_ROTATION) == 1;
} catch (SettingNotFoundException e) {
    isOrientationEnabled = false;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T18:31:42.603

您可以使用系统设置检查旋转是否锁定：

```
 int str = Settings.System.getInt(context.getContentResolver(),                                    
             Settings.System.ACCELEROMETER_ROTATION, 
             DEFAULT_ACCELEROMETER_ROTATION); 

   if(str==1) 
   {
      // rotation is Unlocked
   } else {
      // rotation is Locked
   } 
```

**AndroidManifest.xml：**

```
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/> 
```

# ssl - 双向 SSL 说明

> ID：10725572
> 
> 赞同：82
> 
> 时间：2012-05-23T18:13:42.957
> 
> 标签：ssl, two-way

我对双向 SSL 如何工作感到有些困惑。客户端如何创建其证书以发送到服务器？它是从服务器生成并分发给客户端的吗？

另外，双向 SSL 相对于单向 SSL 的优势是什么？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-23T18:42:06.860

两个证书都应该在连接之前存在。它们通常由证书颁发机构创建（不一定相同）。（在其他情况下，可以以不同的方式进行验证，但需要进行一些验证*。*）

服务器证书应由客户端信任的 CA 创建（并遵循[RFC 6125](https://www.rfc-editor.org/rfc/rfc6125)中定义的命名约定）。

客户端证书应由服务器信任的 CA 创建。

由每一方来选择它信任的东西。

有在线 CA 工具可让您在浏览器中申请证书，并在 CA 颁发证书后将其安装在那里。它们不必位于请求客户端证书身份验证的服务器上。

证书分发和信任管理是公钥基础设施 (PKI) 的角色，通过 CA 实现。SSL/TLS 客户端和服务器，然后只是该 PKI 的用户。

当客户端连接到请求客户端证书身份验证的服务器时，服务器会发送一个它愿意接受的 CA 列表作为客户端证书请求的一部分。然后，如果客户愿意并且有合适的证书可用，客户就可以发送其客户证书。

客户端证书身份验证的主要优点是：

*   私人信息（私钥）永远不会发送到服务器。客户端在身份验证期间根本不会泄露其秘密。
*   不知道具有该证书的用户的服务器仍然可以对该用户进行身份验证，前提是它信任颁发该证书的 CA（并且该证书是有效的）。这与使用护照的方式非常相似：您可能从未见过向您出示护照的人，但由于您信任签发机构，您可以将身份与此人联系起来。

您可能对[*客户端证书对客户端身份验证的优势感兴趣？*（在 Security.SE 上）](https://security.stackexchange.com/q/14589/2435)。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-04-21T17:58:32.847

您所谓的“双向 SSL”通常称为带有客户端证书身份验证的 TLS/SSL。

在与 example.com 的“正常”TLS 连接中，只有客户端验证它确实与 example.com 的服务器通信。服务器不知道客户端是谁。如果服务器想要对客户端进行身份验证，通常的做法是使用密码，因此客户端需要向服务器发送用户名和密码，但这发生在 TLS 连接内部，作为内部协议（例如 HTTP）的一部分，它不是TLS 协议本身的一部分。缺点是每个站点都需要一个单独的密码，因为您将密码发送到服务器。因此，如果您在例如 PayPal 和 MyPonyForum 上使用相同的密码，那么每次您登录 MyPonyForum 时，您都会将此密码发送到 MyPonyForum 的服务器，以便该服务器的操作员可以拦截它并在 PayPal 上尝试并可以以您的名义付款.

客户端证书身份验证提供了另一种在 TLS 连接中对客户端进行身份验证的方法。与密码登录相比，客户端证书身份验证被指定为 TLS 协议的一部分。它的工作方式类似于客户端验证服务器的方式：客户端生成一个公钥私钥对并将公钥提交给受信任的 CA 进行签名。CA 返回一个可用于对客户端进行身份验证的客户端证书。客户端现在可以使用相同的证书对不同的服务器进行身份验证（即，您可以为 PayPal 和 MyPonyForum 使用相同的证书，而不会有被滥用的风险）。它的工作方式是在服务器发送其证书后，它要求客户端也提供证书。然后会发生一些公钥魔术（如果您想知道阅读的详细信息[RFC 5246](https://tools.ietf.org/rfcmarkup/5246)），现在客户端知道它与正确的服务器通信，服务器知道它与正确的客户端通信，并且两者都有一些共同的密钥材料来加密和验证连接。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-13T10:00:31.193

以两种方式 ssl 客户端向服务器请求数字证书，服务器向客户端请求相同的数字证书。它更安全，因为它是双向的，虽然它有点慢。通常我们不遵循它，因为服务器不关心客户端的身份，但是客户端需要确保它所连接的服务器的完整性。

# java - 拆分，第一个字符不起作用

> ID：10725574
> 
> 赞同：1
> 
> 时间：2012-05-23T18:13:52.787
> 
> 标签：java, regex, split

我的方法有问题`split`。我有这个正则表达式：

```
String regex = "[\s|\,]+"; 
```

我有这两个字符串：

```
String s1 = "19/2009 , 34.40";

String s2 = ",19/2009 , 34.40";   // this is the same string wiht "," in the start 
```

我将正则表达式应用于两个字符串：

```
String r1[] = s1.split(regex);  
String r2[] = s2.split(regex); 
```

在第一种情况下，我得到`r1[0]="19/2009"`and `r1[1]="34.40"`，这是正确的结果。但在第二种情况下，我`r2[0]=""`得到`r2[1]="19/2009"`和`r2[2]="34.40"`。这是错误的，第二个字符串的结果应该与第一个字符串相同，没有空字符串。我需要为此改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:18:34.400

由于您`,`作为正则表达式给出，因此将您的字符串分成两部分`,`，因此您的字符串`,19/2009` 分为两部分。第一部分在之前`,`，不是这样`""`，第二部分，也就是`19/2009`，在`r2[1]`，第三部分，被另一个分开`,`，在`r2[2]=34.40`。一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:04:58.487

使用[Apache Commons 的 StringUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html) ...

```
String r2[] = StringUtils.strip(s2, ", ").split(regex); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:05:00.097

我会保留正则表达式并执行此操作

```
List<String> list = new ArrayList<String>(Arrays.asList(splitArray));
for (Iterator<String> iterator = list.iterator(); iterator.hasNext();) {
    if (iterator.next().isEmpty()) { // remove empty indexes
        iterator.remove();
    }
} 
```

它有点长，但它为您提供了`List`一个比数组更好的输出。

# php - 在 Max OS Lion 上使用 XAMPP 安装 MongoDb PHP 驱动程序时出错

> ID：10725577
> 
> 赞同：3
> 
> 时间：2012-05-23T18:14:00.047
> 
> 标签：php, macos, mongodb, xampp

当我尝试运行以下命令时出现此错误 sudo pecl install mongo

错误：

```
...php_mongo.c:22:10: fatal error: 'php.h' 
file not found 
  #include <php.h> 
         ^ 
  1 error generated. 
  make: *** [php_mongo.lo] Error 1 
  ERROR: `make' failed 
```

我是 MAC 新手，请帮我解决这个问题并让 Mongo 使用 PHP。

我已经安装了 MacPorts 和 autoconf

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T12:38:09.637

看来，您没有安装构建附加 php 扩展所需的 xampp“开发人员包”。您可以从以下位置下载“开发人员包”：

[http://www.apachefriends.org/en/xampp-macosx.html#849](http://www.apachefriends.org/en/xampp-macosx.html#849)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:48:38.907

这已经得到了回答。

请按照此答案中概述的过程 -[在 Mac OS X 10.6 上安装 PECL](https://stackoverflow.com/questions/5536195/install-pecl-on-mac-os-x-10-6)。

我遵循了此处概述的过程[http://akrabat.com/php/setting-up-php-mysql-on-os-x-10-7-lion/](http://akrabat.com/php/setting-up-php-mysql-on-os-x-10-7-lion/)，上面的 Stackoverflow 链接和安装梨的过程引用了，其次是 pecl 和随后 -

sudo pecl 安装 mongo

在 OSX Lion 上完美运行。

您可能需要修改 /etc/php.ini 中的扩展名，但是，安装 php mongo 驱动程序后的输出中对此进行了说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T15:18:18.453

我花了一整天的时间才找到这个答案，我已经尝试了一切，但这终于奏效了：

```
 sudo C_INCLUDE_PATH=/usr/local/opt/openssl/include /Applications/XAMPP/xamppfiles/bin/pecl install mongodb 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-25T06:55:55.903

我发现[这篇文章很有帮助](http://lukepeters.me/blog/setting-up-mongodb-with-php-and-mamp)。在我浪费了很多时间检查其他链接之后节省了很多时间。我为 MAMP 做过，并且认为也适用于 XAMPP。

问题是 MAMP 没有附带所有 PHP 源来编译 pecl mongo 文件并创建 mongo.so。您所需要的只是为您正在使用的相应版本下载 php。我使用的是 php 版本`5.6.10`。我检查了有`5.6.13`版本的 php.net 站点。[我从PhP.net](http://www.php.net/downloads.php)下载了这个版本的源代码。再次执行“ `sudo pecl install mongo`”，它工作。

# ios - 除了使用核心动画感知渲染缓冲区之外，还有另一种显示 OpenGL 内容的方法吗？

> ID：10725578
> 
> 赞同：0
> 
> 时间：2012-05-23T18:14:04.207
> 
> 标签：ios, opengl-es, opengl-es-2.0

根据[Apple 的 OpenGL ES Programming Guide](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html#//apple_ref/doc/uid/TP40008793-CH103-SW1)，“如果 [a] 帧缓冲区旨在显示给用户，请使用特殊的 Core Animation-aware 渲染缓冲区。”

文本继续说，要让这个 Core Animation 感知渲染缓冲区，需要使用以下代码“子类 UIView 为 [the] iOS 应用程序 [and] Override the layerClass”创建一个 OpenGL ES 视图：

```
+ (Class) layerClass
{
    return [CAEAGLLayer class];
} 
```

但是，如果查看向最终用户显示 OpenGL 的[Apple GLCameraRipple 示例](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Listings/GLCameraRipple_RippleViewController_m.html#//apple_ref/doc/uid/DTS40011222-GLCameraRipple_RippleViewController_m-DontLinkElementID_8)，layerClass 似乎永远不会被覆盖。对 layerClass 或 CAEAGLLayer 的文本搜索显示它们丢失了。

如果您寻找其他直接向用户显示的方法，Apple 提供了另外两种 OpenGL 方法，但两者似乎都暗示它们不是用于直接向用户显示，而是用于离屏渲染。（即“如果帧缓冲区用于执行屏幕外图像处理，则附加渲染缓冲区。如果将帧缓冲区图像用作稍后渲染步骤的输入，则附加纹理。”）

除了使用支持 Core Animation 的渲染缓冲区之外，还有另一种显示 OpenGL 内容的方法 - 或者 Apple 是否以某种方式覆盖了图层类，因此 OpenGL 内容以另一种方式成为 Core Animation 感知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:10:16.337

在 GLCameraRipple 示例中，您没有看到带有 CAEAGLLayer 支持的子类 UIView 的原因是它使用了 GLKView。GLKView 是 iOS 5.0 中作为 GLKit 的一部分引入的一个类，它封装了一些通用代码，例如使用 CAEAGLLayer 的显式覆盖及其匹配渲染缓冲区的设置。

这仍在进行中，只是从您那里抽象出来。为了在屏幕上显示 OpenGL ES 内容，您仍然需要以一种或另一种方式通过 CAEAGLLayer。

屏幕外渲染是另一种动物，因为您没有附加到图层进行显示，因此不需要图层。如果要渲染到纹理，请将纹理附加为 FBO 的目标，仅此而已。

# regex - 带有可能连字符的正则表达式，然后是有限数量的单词字符

> ID：10725579
> 
> 赞同：0
> 
> 时间：2012-05-23T18:14:05.710
> 
> 标签：regex

我需要一个正则表达式来匹配包含字符串 OKAY 的表达式，然后是一个可能的连字符，然后是零个或一个单词字符。在此之后，任何非单词字符都被接受，然后是任何东西。对于匹配的表达式，如果后面没有单词字符，则 OKAY 将更改为 OK，如果后面的字母是 A，则更改为 eg：OA。如果连字符存在，则将其删除。

```
OKAY         =>       OK
OKAY-        =>       OK
OKAYA        =>       OA
OKAY-A       =>       OA
OKAYAB       =>       OKAYAB          (no-match)
OKAY-AB      =>       OKAY-AB         (no-match) 
```

示例后面可以跟 eg: .CD 而不改变结果

```
OKAY.CD         =>       OK.CD
OKAY-.CD        =>       OK.CD
OKAYA.CD        =>       OA.CD
OKAY-A.CD       =>       OA.CD
OKAYAB.CD       =>       OKAYAB.CD          (no-match)
OKAY-AB.CD      =>       OKAY-AB.CD         (no-match) 
```

我实现这一点的问题是，由于连字符和单词字符都是可选的，我得到“惰性”匹配，它也匹配不需要的情况。为了教育起见，我会欣赏有和没有前瞻的例子（如果可能的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:40:00.450

这是一个适合您的正则表达式：

```
\bOKAY(?>-?)(\w)?([^\w\s]\S*)?(?!\S) 
```

由于尚不清楚您使用的是哪种语言，因此这里是您将如何进行替换的伪代码。

```
"O" + (match.group(1) if match.group(1) else "K") + match.group(2) 
```

这是一个rubular：[http ://www.rubular.com/r/SE8MBkUUUo](http://www.rubular.com/r/SE8MBkUUUo)

* * *

**编辑：**我在评论后对上述正则表达式进行了一些更改，但下面的描述并未反映这些更改。以下是原始正则表达式的更改：

*   更改`^`为`\b`不需要从行首开始
*   `\W`变成了`[^\w\s]`，这可以防止`OKAY OKAY`成为一场比赛
*   更改`.*`为`\S*`，匹配将在空格处结束
*   改为`$`,表示“仅当我们在字符串末尾或下一个字符是空格时才匹配” `(?!\S)`，`(?!\S)`也可以写成`(?=\s|\z)`

* * *

这里真正棘手的部分是，像这样的正则表达式`^OKAY-?(\w)?(\W.*)?$`看起来会起作用，但它不适用于像这样的情况，`OKAY-AB`因为最终 the`-?`和 the`(\w)?`都不匹配，然后`(\W.*)?`将匹配字符串的其余部分。

我们需要做的是解决这个问题，使其`-?`不会回溯。[如果 .NET 支持所有格量​​词](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFAQFjAA&url=http://www.regular-expressions.info/possessive.html&ei=QDC9T6DTF8WTiQKSs5WPDg&usg=AFQjCNG_uUyN-AGGcy7-8dfAnE4DhRIErQ&sig2=_ETtI54xJnRH-xdM0_QGIQ)，这将很简单，那么我们可以将其更改为`-?+`.

不幸的是，它们不受支持，因此我们需要使用[原子分组](http://www.regular-expressions.info/atomic.html)。 `(?>-?)`可以选择匹配 a `-`，但一旦退出组就会忘记所有回溯信息。请注意，原子组不捕获，`(\w)?`捕获组 1 也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:18:35.973

要在没有前瞻的情况下执行此操作，您可以使用

```
^(OKAY)(((-\w?|\w)(\W.*)?)|[^-\w].*)?$ 
```

这匹配单词“OKAY”，然后是一个可选组，该组包含*一个*可选`-`的单词字符，然后是一个可选的非单词字符，后跟任何组，*或者*不是一个字符，也不是`-`单词字符，后跟任何字符。`^`和分别匹配字符串的`$`开头和结尾，因此它只会完全匹配可接受的字符串。

前瞻几乎不会有所作为。`(?=...)`唯一的改变是在 "OKAY" 组之后的所有内容上放置一个前瞻 ( )。

要将其与.net 一起使用，唯一需要的更改是转义`\`字符串中的所有内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T18:49:32.377

不知道 .NET 正则表达式，但这是从 preg 样式匹配开始：

`OKAY-?(\w?)([^\w-]\w+)?\s*$`

如果 $1 为空，则输出为 OK$2

否则，输出为 1 美元 2 美元。

# visual-studio-2010 - Visual Studio 2010 挥之不去的工具窗口

> ID：10725581
> 
> 赞同：0
> 
> 时间：2012-05-23T18:14:22.310
> 
> 标签：visual-studio-2010

我在 VS 2010 中有两个奇怪的问题。

在家里，每次我启动 Visual Studio 时，我都有一个处于活动状态的错误窗口，尽管我每次退出时都会关闭它。我在工作中没有这个问题。

在工作中，我在启动应用程序时打开了一个挥之不去的服务器工具窗口，但是一旦 VS 完全启动它就会消失，但是当我手动打开它时，这不是工具窗口所在的位置。

我不太关心第二个问题，但我很想知道是否有设置不让错误窗口一直打开。

谢谢，

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:18:02.320

尝试以下步骤：

*   关闭错误窗口
*   将此设置导出到磁盘上的文件（工具>导入/导出设置）
*   导入此设置文件并查看启动时是否再次出现错误窗口

# d3.js - 子弹图示例

> ID：10725588
> 
> 赞同：3
> 
> 时间：2012-05-23T18:14:47.983
> 
> 标签：d3.js, bullet-chart

我[在 D3 v2.4.2 github 存储库中引用了子弹图示例](https://github.com/mbostock/d3/tree/v2.4.2/examples/bullet/bullet.js)。

我有几个问题可以帮助澄清这个例子中发生了什么。

**1)**在 bulletChart 函数中有 8 个声明，形式为 bullet.ranges = function(x) {}、bullet.markers = function(x) {} 等。这个子弹对象来自哪里？它是内置在库中的吗？我以为我们已经将变量范围设置为函数 bulletRanges，或者这两个不同的范围变量？

**2）**这些函数内部实际发生了什么？

**3）**最后一个问题。当 bulletChart 函数开始执行时，它是在执行时开始执行子弹函数还是等待显式调用？因为我从来没有真正看到过明确调用的 bullet(g) ？

这个库可能真的很混乱。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T21:15:34.277

1)`bullet`名称开头的 是指在第 70 行创建的同名函数。调用将成员添加到对象，该对象也是可调用的。它基本上是一种允许自定义返回对象的方法。在 OO 术语中，`bullet`是一个对象，函数为其成员定义访问器。函数`bulletRanges`等为外部`bulletChart`函数提供了类似的功能。在 OO 术语中，考虑嵌套对象。

2) 见 1。函数是函数内部定义的变量的访问器`bullet`，允许以这种方式自定义行为。同样，OO 等价物将是通过访问器公开的对象的私有成员。

3）函数的返回值`bullet`是可调用对象。这就是`bulletChart`回报。因此，示例中的函数调用发生在第 19 行和第 36 行（通过 d3 函数），通过将变量传递`chart`给`.call`函数。第 5 行的赋值`chart`是调用构造对象和可调用闭包的代码。

如果您不熟悉 Javascript，那么查找一些有关其更奇特功能（例如闭包）的教程材料可能会有所帮助。

# ios - Sencha touch2和PhoneGap原生封装的区别

> ID：10725591
> 
> 赞同：13
> 
> 时间：2012-05-23T18:14:54.617
> 
> 标签：ios, cordova, sencha-touch, sencha-touch-2, packager

Sencha touch2和PhoneGap原生封装有什么区别？

很多人使用PhoneGap基于Sencha touch对app进行原生打包，但我发现Sencha touch 2新增了原生打包的功能。

那么哪种原生包在性能、可扩展性、功能性、成熟度等方面更好呢？

你如何选择？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T18:43:46.473

**PhoneGap**是一个中间平台，可以访问许多平台上的一些原生 API，它的界面语言是 Javascript。这意味着 PhoneGap 能够与许多跨平台的移动 web 框架一起工作，例如：Sencha Touch、Titanium、jQuery Mobile 等。

**Sencha Touch 2**还通过其 SDK 提供了一些原生 API（目前在 iOS、Android 上可用）。

如果您不打算使用任何本机 API，那么它们在性能和功能上没有任何重大差异，因为唯一要做的工作就是将您的 Javascript 代码包装到相应设备上的 webview 本机组件中。

最后，两个主要区别是：

*   PhoneGap 提供了比 Sencha Touch SDK 更多的 API。
*   PhoneGap 支持 7 个平台，而 Sencha Touch SDK 仅支持 2 个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T20:30:22.297

我也有同样的问题，我同意乍一看确实是一团糟。[这](http://beautyindesign.com/blog/titanium-phonegap-sencha-touch-jquery-mobile-clearing-up-confusion/)是一篇非常好的文章，可以很好地“消除混乱”。

引用文章的要点：

> Sencha Touch（和 jQuery Mobile）是移动 Web 框架。您可以使用这些技术来创建基于 Web 的移动应用程序。他们无权访问任何本机 API。
> 
> 您可以在 PhoneGap 和 Titanium 中使用 Sencha Touch 和 jQuery Mobile。如果您认为您的 html/js 作为原生应用程序也很酷，您可以使用 PhoneGap 或 Titanium 将浏览器包裹在您的应用程序周围，并将其放入应用商店或市场。我认为，这就是混乱来的地方。将您的 Sencha Touch 或 jQuery Mobile 应用程序放入本机包装器并不能使其成为本机应用程序。它使它看起来好像是一个本机应用程序。您可能会从 PhoneGap 或 Titanium API 获得一些额外的功能，但它仍然不一定是“本机”应用程序。它是在设备上本地运行的 Web 应用程序。这是在类本地区域内使用 Web 技术的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T08:30:03.230

不同之处在于，Sencha Touch 甚至允许您在 Windows 上构建原生 iOS 应用程序，而 PhoneGap “仅”将您的 HTML 文件捆绑到 XCode 项目中，该项目还需要在 OSX 上编译以进行分发/打包。

# ruby - Ruby 中的通用方法/默认方法，当某些方法未定义时

> ID：10725593
> 
> 赞同：2
> 
> 时间：2012-05-23T18:15:01.273
> 
> 标签：ruby, oop, metaprogramming

我想做点什么，但不确定是否可行。如果调用了某些方法但未定义，我想使用“通用方法”或“默认方法”。这是一个简单的示例，因此您可以理解我的观点：

这是课程：

```
class XYZ

    def a
        #...
    end

    def b
        #...
    end
end 
```

XYZ 类的实例：

```
n = XYZ.new
n.a
n.b
n.c 
```

如您所见，我正在调用未定义的方法“c”，它将引发错误。我可以在类 XYZ 中做某事，因此当有人调用未定义的方法时，获取该方法的名称并根据该方法的名称做某事？而且，这在其他语言中是否可能（不制作编译器）？如果这是可能的，它怎么称呼（理论上）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:26:49.027

使用[`method_missing`](http://ruby-doc.org/core-1.9.3/BasicObject.html#method-i-method_missing)：

```
class XYZ
  def a; end
  def b; end

  def method_missing(name, *args)
    "Called #{name} with args: #{args}"
  end
end

XYZ.new.c #=> "Called c" 
```

您还应该定义在 1.9.2+ 中更好地工作[`respond_to_missing?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-respond_to_missing-3F)。[`respond_to?`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-respond_to-3F)你应该[阅读更多关于`respond_to?`/`respond_to_missing?`使用时`method_missing`](http://blog.marc-andre.ca/2010/11/methodmissing-politely.html).

顺便说一句，这将被认为是*元编程*。这在编译语言中通常是不可能的，因为它们调用函数的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:28:00.523

它称为method_missing。当您调用未在对象上定义的方法时，ruby 会将调用重定向到 method_missing 方法，这会为您引发错误。

你可以这样做：

```
class XYZ
  def method_missing(method, *args, &blck)
    puts "called #{method} with arguments #{args.join(',')}"
  end
end 
```

现在，您将得到控制台的输出而不是错误。

# javascript - jQuery 1.7.2 - selector.val() 在 IE 8 中中断

> ID：10725597
> 
> 赞同：2
> 
> 时间：2012-05-23T18:15:24.190
> 
> 标签：javascript, jquery, internet-explorer-8

我的 HTML 中有以下块

```
<div class="selection">
  <p><input name="custrecord_npsdtl_decision" id="custrecord_npsdtl_decision" type="radio" value="I am solely responsible for the decision">I am solely responsible for the decision </p>   
  <p><input name="custrecord_npsdtl_decision" id="custrecord_npsdtl_decision" type="radio" value="I am partially responsible for or influence the decision">I am partially responsible for or influence the decision </p>
  <p><input name="custrecord_npsdtl_decision" id="custrecord_npsdtl_decision" type="radio" value="I am not involved in the decision">I am not involved in the decision </p>
  <p><input name="custrecord_npsdtl_decision" id="custrecord_npsdtl_decision" type="radio" value="Don't know">Don't know </p>
</div> 
```

还有一个基于所选选项检查表单进度的功能，其中包含以下代码段：

```
var decisionmaker = $('#custrecord_npsdtl_decision:checked').val();
if (decisionmaker == elements['customlist_nps_decision'][2] || decisionmaker == elements['customlist_nps_decision'][3]) {
  redirect();
} 
```

这在 Chrome、Firefox 中按预期工作，但在 Internet Explorer(8) 中不起作用。做一些检查我发现

```
$('#custrecord_npsdtl_decision:checked') 
```

如预期的那样返回一个对象，但在该对象上调用 val() 返回未定义。

我完全不知所措。如何从 IE 的单选列表中获取选定的选项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:20:39.943

ID 必须是唯一的。我很惊讶这在 Chrome 和 Firefox 中完全有效。

删除 id 属性并按名称选择。

```
$('input[name="custrecord_npsdtl_decision"]:checked').val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:21:01.333

您不应该为每个单选按钮使用相同的 ID，您可以使用名称选择器来获取组选择

```
$('input[name=custrecord_npsdtl_decision]:checked').val(); 
```

# sencha-touch - Sencha Touch 2中的图像360°旋转？

> ID：10725598
> 
> 赞同：1
> 
> 时间：2012-05-23T18:15:27.777
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我需要知道这种效果是否可以在 Sencha Touch 2 中实现/模仿？

[http://lukedurrant.com/threesixty/index.htm](http://lukedurrant.com/threesixty/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T22:23:59.770

这并不完美，但效果很好（在 iPad 2 上试过）。如果有人想改善动态，请成为我的客人。我很讨厌它。

[**项目**](https://github.com/TitouanVanBelle/Sencha/tree/master/Ext.ux.ThreeSixtyView)

[**工作示例**](http://titouanvanbelle.fr/GitHub/Sencha/Ext.ux.ThreeSixtyView/)

希望它适合您的需求

# javascript - 无法在兄弟姐妹 tr（表行）上应用 jquery slice 方法

> ID：10725599
> 
> 赞同：2
> 
> 时间：2012-05-23T18:15:32.710
> 
> 标签：javascript, jquery, visibility, slice

以下代码是自动解释的：

HTML：

```
<table cellspacing="1" class="CRMP_WP_QUICKADS_PLUGIN">
    <tr id="CRMP_WP_QUICKADS_tr_in_content">
        <td>
            <table>
                <tr>
                    <td>
                        <input type="radio" name="in_content" value="1">
                    </td>
                    <td>
                        Enabled
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="radio" name="in_content" value="0">
                    </td>
                    <td>
                        Disabled
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <th colspan="2">
            Hover Ads
        </th>
    </tr>
    <tr>
        <td>
            ...
        </td>
    </tr>
...
</table> 
```

javascript:

```
$("input[name='in_content']").click(function(){
    if ($(this).val()){
        $("#CRMP_WP_QUICKADS_tr_in_content").nextAll().slice(0,6).show();
    } else{
        $("#CRMP_WP_QUICKADS_tr_in_content").nextAll().slice(0,6).hide();
    }
}); 
```

隐藏/显示效果未运行。-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:04:10.003

这行得通吗？

```
$("#CRMP_WP_QUICKADS_tr_in_content").nextAll()
   .slice(0,6)
   .each(function(index, element) {
       element.hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T20:44:15.540

```
// is not enough:

    if ($(this).val())

// it must be:

    if ($(this).val() == 1) 
```

# php - 时间戳 YYYY-MM-DDTHH:MM:SS+00:00

> ID：10725604
> 
> 赞同：0
> 
> 时间：2012-05-23T18:16:03.737
> 
> 标签：php, date, iso

**如何从这个时间偏移中获取“UTC、PST、EST 等”名称？** 您可以将其复制/粘贴到任何 PHP 文件中，它就会运行。

```
<?php

date_default_timezone_set('UTC');

$time = '2012-01-01T21:15:00+00:00';

echo '<pre>';
echo "<b>Step 1 (Have the date now)</b>\n";
$time = explode('T', $time);
print_r($time);

echo "\n\n<b>Step 2 (Get the offset)</b>\n";
$offset = explode('+', $time[1]);
$time[1] = $offset[0];
print_r($offset);

echo "\n\n";

echo date('l F jS', strtotime($time[0])) . ', at ' . date('g:ia', strtotime($time[1]));

echo "\n\n";
//
// How do I matchup the offset in this list? 
// The values are -18000, -7200
//
$b = timezone_abbreviations_list();
print_r($b); 
```

注意：我也尝试过使用`echo date('c', $time);`，但也许我有问题，它给了我一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:18:14.600

在 PHP 5.1.0+`echo date('e', $time);`中将返回时区信息。

# java - 在Java中将GUI窗口焦点设置在行上

> ID：10725609
> 
> 赞同：1
> 
> 时间：2012-05-23T18:16:35.737
> 
> 标签：java, user-interface, focus

我有一个 GUI，它显示了一个包含数千行和几列的表。当客户端使用我的搜索功能时，我正在尝试逐行迭代在 GUI 中找到的一些匹配项。我可以选择行来突出显示匹配，但我不知道使用什么方法来移动 GUI 窗口的焦点以移到下一个查找。

在下面的代码中，my_model 被实例化为一个扩展 AbstractTableModel 的简单类，my_table 是一个标准的 JTable。每当找到匹配项时，我希望能够将选定的间隔设置为下一个查找，并且我还希望将窗口焦点转移到中间有下一个查找。

```
 int i, ln;
    for ( i = 0, ln = my_model.getRowCount(); i < ln; i++ )
    {
        String cur_entry = (String)my_model.getValueAt(i, 1);

        if ( ! cur_entry.contains(search_query) ) continue;

        my_table.setRowSelectionInterval(i, i);

        // This is where I'd like to focus the GUI window on row i.

        String options[] = new String[]{"Find Next","Done"};
        String initialValue = options[0];

        int code = JOptionPane.showOptionDialog(null, "Continue Searching", "Find", 0, JOptionPane.QUESTION_MESSAGE, null, options, initialValue);

        if ( code != 0 )
            return;

    } 
```

让我知道是否需要任何进一步的信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:27:32.460

尝试这个，

row.requestFocusInWindow();

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:33:18.417

用这个：

```
my_table.scrollRectToVisible(my_table.getCellRect(i, 1, true)); 
```

# loops - Excel VBA中的循环

> ID：10725612
> 
> 赞同：3
> 
> 时间：2012-05-23T18:16:53.807
> 
> 标签：loops, excel, excel-formula, vba

我有一个逻辑，但不知道如何在 Excel 中执行/编码。逻辑如下：

在办公室，我需要根据它们的购买价值和年龄来找出许多旧物品的价值。我不想使用 VDB 或其他内置函数。

在我的电子表格中：

```
A1 = "Table" (Name of the article)  
B1 = "01/01/2005" (Date of purchase in MM/DD/YYYY format)  
C1 = "1000" (Purchase value)  
D1 = "=DATEDIF(B1,TODAY(),"Y")" (Gives the age of article in years)  
E1 = "20" (Percentage depreciation for first year, which varies based on article)  
F1 = "=C1*10%" '(Depreciated value should not be less than 10% of purchase value) 
```

现在，在`G1`我想计算物品的折旧价值“ `A1`”与购买价值“ `C1`”为“ `D1`”年数，@flat“ `E1`”第一年的百分比和后续年份的 10%。

```
H1 = "=C1-G1" (Value of the article after depreciation)  
I1 = "=IF(H1<=F1,F1,H1)" 
```

请帮助我使用宏或公式循环并找出`G1`.

另外，我想将此应用于“n”行，因为有“n”篇文章。

**编辑**

@assylias[感谢](https://stackoverflow.com/users/829571/assylias)您启发我了解[SO 政策](https://meta.stackexchange.com/a/128553/179508)，让我自己努力寻找答案。

经过大约 30 分钟的谷歌搜索和反复试验，我成功编写了一个宏来做我想做的事。它是这样的：

```
Sub DepVal()
'
' DepVal Macro
' Macro by Prashanth JC
'
' Keyboard Shortcut: Ctrl+d
'
fYear = 0
dVal = 0
tYear = ActiveCell.Offset(0, -3)
purVal = ActiveCell.Offset(0, -4)
depFirst = ActiveCell.Offset(0, -2)
depOther = 10

If tYear >= 1 Then
    Do
        If fYear = 0 Then
            dVal = purVal - (purVal * depFirst) / 100
        Else
            dVal = dVal - (dVal * depOther) / 100
        End If

        fYear = fYear + 1

    Loop Until fYear = tYear

    ActiveCell.Value = dVal

Else
    ActiveCell.Value = purVal

End If

End Sub 
```

最后，我将 G1 单元格格式化为小数点为零的数字。现在一切都很完美！

再次感谢 SO 和[assylias](https://stackoverflow.com/users/829571/assylias)！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T03:57:33.220

您不需要宏，这是简单的数学运算。

假设您的百分比 (in `E1`) 存储为`.2`(for 20%)，而不是实际`20`，则此公式将起作用：

```
=MAX(F1,C1*(1-E1)-(C1*0.1*(D1-1))) 
```

# c# - 如何分离几个“有点连接”的项目？

> ID：10725620
> 
> 赞同：0
> 
> 时间：2012-05-23T18:17:33.427
> 
> 标签：c#

我程序中的主要课程`OrderBook`有一些库存。

*   我的程序的一部分，我们称之为，从一些股票中`NYSE Connector`读取数据`NYSE`并构建`OrderBook`
*   我的程序的第二部分，我们称它为其他股票的`LSE Connector`构造`OrderBook`，但来自不同的交易所和完全不同的算法
*   我的程序的第三部分管理所有集合`OrderBook`并为不同的连接器产生不同的信号（在伦敦证券交易所购买此类股票在纽约证券交易所出售另一只等）

我的程序的所有部分共享相同的`OrderBook`. 但零件本身是相当独立的。例如，我可以只运行`NYSE Connector`而不运行其他任何东西。那我就收了`OrderBook`。没有多大意义，但可能。

我也需要一切尽快工作，因为即使是 1 毫秒对我来说也非常重要。

所以现在我只是将所有内容放在一个项目中（但在不同的文件夹中），但我认为它不是很好。如果我需要另一个连接器 - 我将创建另一个文件夹。

我怎样才能更好地分离我的零件？但请记住，我需要共享相同的`OrderBook`实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:35:19.407

这将是一个模糊的答案，因为这是一个模糊的问题。根据您的名字（javapowered），我将假设您来自 java 背景，因此我将尝试用 java 等效性来表达我的答案。

在 .NET 中，您的编译代码单元是程序集。解决方案中每个项目的输出通常恰好是一个程序集（并非总是如此，但出于讨论的目的，我们可以说它只是一个程序集）。程序集大致类似于 Java jar 文件，因为它们包含已编译类的字节码。它们实际上比 jar 文件复杂得多，但这或多或少与这个答案无关。

程序集可以包含对其他程序集的引用（阅读：依赖）。与 java 中隐式的逐类依赖不同，.NET 程序集依赖是显式的并且在程序集级别，例如程序集 foo.bar 依赖于程序集 foo.bat。.NET 程序集引用必须是有向无环图，这意味着您不能有任何循环，其中程序集 A 依赖于 B，而 B 又依赖于 A。运行时必须能够加载程序集的所有依赖项。

就您而言，我希望看到的是 4 个或更多项目：

1.  一个主要项目。可能是您的可执行文件。这将引用（取决于）所有其他项目。
2.  一个图书馆项目。这不会引用解决方案中的其他项目。
3.  NYSE 的连接器项目，引用库项目。
4.  LSE 的连接器项目，引用库项目。

所有项目通用的所有类（`OrderBook`、其他数据结构等）都将进入库，在那里它们可以在需要的任何地方进行引用。

所有特定于交换的实现都将放在它们自己的特定于交换的程序集中。这可能包括特定于交换的协议处理程序、 的子类`OrderBook`等等。如果它特定于交易所，则在上面的 3 或 4 中。

最后，所有用户交互逻辑、控制流等都将进入主可执行文件。

# php - 混合数组和对象

> ID：10725622
> 
> 赞同：0
> 
> 时间：2012-05-23T18:17:49.463
> 
> 标签：php

我有一个这样的数组：

```
Array
(
    [count] => 2
    [0] => stdClass Object
        (
            [term_id] => 3109
            [name] => Aliens: Colonial Marines
            [slug] => aliens-colonial-marines
        )

    [1] => stdClass Object
        (
            [term_id] => 228
            [name] => Dragon Quest X: Rise of the Five Tribes
            [slug] => dragon-quest-x-rise-of-the-five-tribes
        )

) 
```

我需要运行一个从每个元素中获取“slug”值的循环。我怎样才能完成这个结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:20:34.507

```
foreach ($array as $key => $value) {
    if (is_object ($value)) echo $value->slug;
} 
```

它只是循环遍历数组`$array`，如果元素是一个对象（所以它不会尝试解析`count`），它会回显`slug`。

# ruby-on-rails - Omniauth 与 Facebook 和 Twitter 从头开始 的身份验证

> ID：10725623
> 
> 赞同：2
> 
> 时间：2012-05-23T18:17:57.147
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, omniauth

[我使用 Hartl 的 Railstutorial http://ruby.railstutorial.org/chapters/modeling-users#sec:user_model](http://ruby.railstutorial.org/chapters/modeling-users#sec:user_model)从头开始​​创建身份验证。

我想为我的网站项目实现 Facebook 和 Twitter 登录。[在观看 Railscasts Simple Omniauth http://railscasts.com/episodes/241-simple-omniauth?view=comments](http://railscasts.com/episodes/241-simple-omniauth?view=comments)后，我正在考虑使用 OmniAuth 。

在视频中，我们被指示生成一个用户模型：

```
rails generate model user provider:string uid:string name:string 
```

uid 是 Twitter 和 Facebook 登录所独有的，还是与我的 User 模型中的 id 属性相同？

**简单地说，我是否需要在我的用户模型中添加一个 uid 列来实现 OmniAuth？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:44:05.277

UID 是 facebook 或 twitter 登录的用户 ID。它与 User 模型中的 'id' 字段不同。

Omniauth 使用环境变量来设置哈希。在这个散列中是一个 'uid' 键，您将要使用它来在您的数据库中查找您的用户。它还设置了一个'provider'键，因此'uid'键和'provider'键的组合使您能够查找您的用户记录，例如

```
auth = request.env["omniauth.auth"]
user = User.find_by_provider_and_uid(auth["provider"], auth["uid"]) 
```

因此，您的模型（用户）需要同时具有 'provider' 和 'uid' 列才能正常工作。

# wordpress - 向 wp_nav_menu 中的链接添加一个类

> ID：10725631
> 
> 赞同：1
> 
> 时间：2012-05-23T18:18:26.300
> 
> 标签：wordpress, zurb-foundation

我正在开发一个新的 wordpress 站点，并且正在使用[Foundation 框架](http://foundation.zurb.com/docs/ui.php)构建它。我想将“main”类添加到使用 wp_nav_menu 构建的导航中的链接中。最终，我可能想将“has-flyout”类添加给其他人。关于如何做到这一点的任何想法？我假设我需要扩展 Walker（或者我可以使用 'items_wrap' 来做到这一点吗？），但这似乎有点矫枉过正。

目前，我有：

```
wp_nav_menu( array(
    'theme_location' => 'primary_navigation',
    'container' =>false,
    'menu_class' => '',
    'echo' => true,
    'before' => '',
    'after' => '',
    'link_before' => '',
    'link_after' => '',
    'depth' => 0,
    'items_wrap' => '<ul class="nav-bar">%3$s</ul>'
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:44:04.257

你可以使用：

```
wp_nav_menu( array(
...
'menu_class' => 'main-menu',
... 
```

并在您的 CSS（如果这是您想要的）中访问它，如下所示：

```
ul.main-menu li { background: white; } 
```

要添加您的“弹出”列表项，也许您可​​以查看[superfish](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)？该系统会自动将“sf-with-ul”类添加到包含下拉列表的列表项中。

# c# - Windows 窗体使 datagridview 保持最新

> ID：10725633
> 
> 赞同：1
> 
> 时间：2012-05-23T18:18:32.930
> 
> 标签：c#, forms, datagridview

我有一个连接到表的 datagridview。当执行某些操作时，datagridview 会发生变化，但我希望它刷新（即从我创建的数据表中重新加载网格），即使用户没有做任何事情，所以用户看到的数据是最新的。做这个的最好方式是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:38:16.833

尝试使用这样的计时器

```
private void Form1_Load(object sender, EventArgs e)
    {
        Timer timer = new Timer();
        timer.Interval=1000; // time in milliseconds
        timer.Tick+=new EventHandler(timer_Tick);
    }

    void timer_Tick(object sender, EventArgs e)
    {
       //Do your update here
    } 
```

# python - gtk.StatusIcon() 不接受给定的标题（Python）

> ID：10725642
> 
> 赞同：2
> 
> 时间：2012-05-23T18:19:06.950
> 
> 标签：python, gtk, pygtk

我已经阅读[了这个问题](https://stackoverflow.com/questions/7966414/gtkstatusicon-label-in-gnome3)，但它的答案对我不起作用，所以这不是它的重复。

这个问题发生在我的一个项目上，我基本上已经将 GUI 模块和主模块分开了。从主模块中，我初始化了 GUI，它应该反过来制作状态图标（即设置图标和标题），但尽管我努力，它的标签总是读取 python 脚本的名称。

该项目的错误代码类似于以下内容：

```
import gtk

class Main:

    def __init__(self):
        self.statusicon = gtk.StatusIcon()
        self.statusicon.set_from_icon_name('call-end-symbolic')
        self.statusicon.set_title('Title reads')

        self.cb = gtk.combo_box_new_text() # Faulty line

        gtk.main()

if __name__ == '__main__':
    instance = Main() 
```

尽管看起来很荒谬，但通过删除“错误行”，代码可以完美运行，即设置了标题。但是，如果不删除该行，则不会设置标题，并且脚本名称仍保留为标题。

我阅读了 PyGTK 文档，它说[在错误行中调用的 gtk 方法已被弃用](http://developer.gnome.org/pygtk/stable/class-gtkcombobox.html#function-gtk--combo-box-new-text)- 我应该`gtk.ComboBoxText()`改用它；`gtk.ComboBoxText`但是，我在我的`gtk`模块中找不到：

```
>>> dir(gtk.ComboBoxText)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'ComboBoxText' 
```

我想这个问题比答案更需要错误报告，但如果我错了，请纠正我。

# php - class.phpmailer.php SMTP -> 错误：无法连接到服务器

> ID：10725645
> 
> 赞同：0
> 
> 时间：2012-05-23T18:19:17.703
> 
> 标签：php, smtp, phpmailer

我一直在使用**class.phpmailer.php**一段时间，但最近它停止在我的网络服务器上工作。

它仍在我的家用计算机上运行，​​但我想这是因为我没有更新 xampp。

返回的错误是：

> php SMTP -> ERROR: Failed to connect to server: 连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。(10060)

我也使用了这个类[eukhost](http://forums.eukhost.com/f15/php-class-send-mail-via-smtp-auth-14644/)并且它发送的电子邮件没有错误。

我现在要调试**class.phpmailer.php**看看有什么问题。

但在我开始之前，我想知道是否有人遇到了这个问题并解决了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T00:24:48.273

如果这一直有效，但最近停止了，这可能是一个临时问题，或者邮件服务器的某些设置已更改，您现在需要更新您的设置。

错误消息告诉您它无法连接到邮件服务器。套接字错误 10060 是一般操作超时消息。

您需要验证 phpmailer 使用的 SMTP 主机和端口号是否正确。您应该能够从另一台机器（或运行 PHP 的同一系统）`telnet your-mail-server-here.com 25`中获取 25 代表的端口号。

如果您无法连接到服务器，则说明邮件服务器已关闭或主机名或端口已更改。如果您可以从其他系统连接但不能从您的 PHP 服务器连接，则您的 IP 可能已被邮件服务器阻止，或者本地/远程防火墙阻止了您的连接。

希望有帮助。

# asp.net-mvc-3 - 在类库中使用 Autofac

> ID：10725646
> 
> 赞同：2
> 
> 时间：2012-05-23T18:19:22.123
> 
> 标签：asp.net-mvc-3, ioc-container, autofac

我正在尝试解决 Autofac IoC 容器的问题。

我的 Web 应用程序包含以下部分：

1.  Web应用程序
2.  核心（共享）库。
3.  模块

每个模块都有对核心库的引用（包括下面的代码），并且每个模块都必须能够注册自己的类型。因此我需要在应用程序和模块之间有一个共享容器。

我有以下容器的代码：

```
public static class DependencyContainer
    {
        public static IContainer Container { get; private set; }

        public static ContainerBuilder Builder { get; private set; }

        public static void RegisterType<TFrom, TTo>() where TTo : TFrom
        {
            Builder.RegisterType<TTo>().As<TFrom>();
        }

        public static T ResolveType<T>()
        {
            return Container.Resolve<T>();
        }

        public static void InitContainer()
        {
            Builder = new ContainerBuilder();
            Container = Builder.Build();
        }
    } 
```

此容器位于主（核心）库中。当应用程序启动时，它会从 global.asax 调用 InitContainer()。在此之后，我尝试使用 RegisterType() 方法从我的应用程序模块中注册一个新类型。

但在此之后我无法解析任何类型。它只是抛出此类型未注册的异常。

这段代码的主要思想是，我将能够仅使用一个共享容器从任何模块和 Web 应用程序中解析任何类型。

有人可以帮我解决这个问题吗？在多个库之间使用一个共享的 IoC 容器是否有更优雅的架构解决方案？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T11:07:37.937

您的设计导致[Service Locator 反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)。防止在核心库中定义容器并让每个人都引用它。[使用依赖注入并在Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中配置容器，即应用程序的启动路径（在您的情况下，组合根将成为 Web 应用程序的一部分）。

您可以利用[Autofac 模块功能](http://code.google.com/p/autofac/wiki/StructuringWithModules)，并在组合根目录中注册此模块。

```
builder.RegisterModule(new CarTransportModule()); 
```

但是你也可以将你的模块注册类定义为静态的，这更简单：

```
MyApp.SomeModule.SomeModuleBootstrapper.Register(builder); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T06:00:32.277

问题解决了——我们只需要在注册所有依赖项之后调用 container.Build() ......

# javascript - Chrome 插件开发：谷歌浏览器不再支持 user:pass@url？

> ID：10725654
> 
> 赞同：3
> 
> 时间：2012-05-23T18:19:58.337
> 
> 标签：javascript, google-chrome, plugins, xmlhttprequest, basic-authentication

我开发了一个 Chrome 插件，它使用 XMLHttpRequest 将带有用户名/密码的 GET HTTP 请求发送到基本身份验证保护的 URL，以便之后可以“自动登录”到它（因为 Chrome 缓存了 HTTP 基本的凭据-授权）。

这是我使用的代码：

```
 var xml = new XMLHttpRequest();
  xml.open('GET',<url>,false,<username>,<password>)
  xml.send(''); 
```

它曾经可以正常工作很长一段时间，但前一段时间开始失败。插件代码没有改变，所以我认为它可能与 Chrome 本身有关。我下载了 OSX (17) 和 BAM 的早期版本，**它又可以工作了。**

经过一些额外的研究，我发现这可能与 Chrome 19 不支持用于对基本身份验证保护的 URL 进行身份验证的用户名：pwd@url 语法有关，因为当我发送 XMLHttpRequest 时，我在 Google Chrome 的 js 控制台中看到了这一点：

> GET [http://user:pass@domain.com](http://user:pass@domain.com) 401（未经授权）

有谁知道这是一个错误还是 Chrome 停止支持此功能？

谢谢，

马塞洛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:26:11.240

您不是唯一[遇到此问题](http://code.google.com/p/chromium/issues/detail?id=123150)的人。它激怒了其他几个人的羽毛。

但是，鉴于 Chromium 开发人员的评论：

> 有意弃用了对 URL 中嵌入身份验证的支持。

好像是故意删的。

# javascript - Javascript,设置onclick方法语法

> ID：10725655
> 
> 赞同：2
> 
> 时间：2012-05-23T18:20:00.450
> 
> 标签：javascript, onclick

我正在查看一个操作 HTML A 标记的 javascript 代码，但我无法理解它如何设置“onclick”属性。似乎是在告诉它用索引变量 j 更新 ytplayer_playitem 然后调用 ytplayer_playlazy(1000)

但是所有括号是怎么回事？javascript 语法中的哪些细节允许这样设置？

```
var a = document.createElement("a");
a.href = "#ytplayer";
a.onclick = (function (j) {
    return function () {
        ytplayer_playitem = j;
        ytplayer_playlazy(1000);
    };
})(i); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:30:01.177

好吧，基本上， 的值`onclick`是一个在单击元素时将被调用的函数。当用户单击元素时，您希望发生的任何事情都会进入函数的主体。

您可以创建一个命名函数，然后将其分配给元素的 onclick 属性：

```
function youClickedMe() {
  ...
}
a.onclick = youClickedMe 
```

但这会使命名空间混乱，其函数名称从未在其他任何地方引用。在你需要的地方创建一个匿名函数会更干净。通常，这看起来像这样：

```
a.onclick = function() { ... } 
```

但是，如果我们用您的具体示例进行尝试：

```
a.onclick = function() { 
  ytplayer_playitem = something; // ??
  ytplayer_playlazy(1000); 
} 
```

我们看到它对`something`播放的内容进行了硬编码。我假设原始代码是从一个循环中获取的，该循环会生成几个可点击的链接来播放；使用上面的代码，所有这些链接都会播放相同的内容，这可能不是您想要的。

到目前为止，一切都很简单，但下一个飞跃是棘手的地方。解决方案似乎很明显：如果你在一个循环中，为什​​么不在函数体内使用循环变量呢？

```
// THIS DOESN'T WORK
a.onclick = function() { 
  ytplayer_playitem = i; 
  ytplayer_playlazy(1000); 
} 
```

看起来它应该可以工作，但不幸的`i`是，函数内部是指*调用*`i`函数时变量的值，而不是*创建*函数时的值。当用户单击链接时，创建所有链接的循环将完成并具有其最终值 - 可能是列表中的最后一项或大于该项目的索引，具体取决于循环的编写方式. 无论它的价值是多少，您都会再次遇到所有链接都播放相同项目的情况。**`i`**

 **通过使用返回值是另一个函数的函数，您的代码中的解决方案得到了一些元数据。如果将循环控制变量作为参数传递给生成函数，则它创建的新函数可以引用该参数并始终获取最初传入的值，无论外部参数变量的值发生了什么，因为：

```
function generate_onclick(j) {
    // no matter when the returned function is called, its "j" will be 
    // the value passed into this call of "generate_onclick"
    return function() { ytplayer_playitem = j; ytplayer_playlazy(1000); }
} 
```

要使用它，请在循环中调用它，如下所示：

```
a.onclick = generate_onclick(i); 
```

每个生成的函数都有自己的`j`变量，它永远保持它的值，而不是什么时候改变`i`。因此，每个链接都发挥了正确的作用；任务完成！

这正是您发布的原始代码正在做的事情，有一个小区别：就像我解释的第一步一样，作者选择使用匿名函数而不是定义一个命名函数。这里的另一个区别是他们也在定义匿名函数后立即*调用*它。这段代码：

```
a.onclick = (function (j) { ... })(i) 
```

是这段代码的匿名版本：

```
function gen(j) { ... }
a.onclick = gen(i) 
```

由于 JavaScript 的分号插入规则，匿名版本周围需要额外的括号；`function (y) {...}(blah)`编译为独立函数定义，后跟括号中的独立表达式，而不是函数调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:24:14.763

> *“但是所有的括号是怎么回事？”*

大多数括号只是在做你所期望的。

有一个额外的集合在技术上不是必需的，但通常用作函数正在被调用的提示。

```
 // v-v---these are part of the function definition like normal
    a.onclick = (function (j) {
           //   ^-----------this and...v
        return function () {
            ytplayer_playitem = j;
            ytplayer_playlazy(1000);
        };
 //  v---...this are technically not needed here, but are used as a hint
    })(i);
 //   ^-^---these invoked the function like normal 
```

* * *

> *“javascript语法中的哪些细节允许这样设置？”*

结果是该函数被立即调用，并被传递`i`，以便它的值被`j`立即调用的函数中的参数引用。

这将创建一个变量范围，*返回*的函数将继续访问该范围。这样它总是可以访问`j`变量，而不是`i`在循环中被覆盖的变量。

* * *

这些内联函数被滥用了一点IMO。如果您简单地将其设为命名函数，它会变得更加清晰。

```
for(var i = 0; i < 10; i++) {
    // create the new element
    a.onclick = createHandler(i);
    // append it somewhere
}

function createHandler (j) {
    return function () {
        ytplayer_playitem = j;
        ytplayer_playlazy(1000);
    };
} 
```

生成的处理程序完全相同，但代码不那么神秘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T18:23:44.723

```
a.onclick = (function (j) {
    return function () {
        ytplayer_playitem = j;
        ytplayer_playlazy(1000);
    };
})(i); 
```

这会创建一个“闭包”，以确保`i`绑定到处理程序的值是`i`“当时”的值，而不是`i`一般情况下的值。

在您的代码中， 中的函数`()`是一个表达式，执行并传递了变量`i`。这是`(i)`你在最后看到的部分。在这个执行的函数表达式中，`i`成为局部变量`j`。这个执行的函数表达式返回要绑定的处理函数，该`onclick`事件携带的值`j`是`i`“当时”

* * *

如果我没有使用闭包：

```
//suppose i is 1
var i = 1;

a.onclick = function () {
    ytplayer_playitem = i;
    ytplayer_playlazy(1000);
};

//and changed i
i = 2;

//if you clicked the <a>, it would not be 1 onclick but 2 because you 
//did not assign the value of i "at that time". i is "tangible" this way 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T18:27:49.430

对，我猜周围的代码是这样的：

```
for (var i = 0; i < playitems.length; i++) {
    // above code here
} 
```

现在，您可以在这里做显而易见的事情，并`onclick`像这样分配属性：

```
a.onclick = function() {
    ytplayer_playitem = i;
    ytplayer_playlazy(1000);
}; 
```

*然而*，这不会很好地工作，因为值的`i`变化。无论单击哪个链接，最后一个链接都会被激活，因为此时的值`i`将是列表中的最后一个链接。

所以你需要防止这种情况发生。您需要通过创建一个新作用域来做到这一点，这是通过创建一个额外的函数来完成的，该函数会立即被调用：

```
(function (j) {
    // some code here
})(i); 
```

因为`i`已经被传递到函数中，所以传递的是值而不是被保留的变量的引用。这意味着您现在可以定义一个引用正确值的函数。所以你得到了额外的函数来返回点击处理函数：

```
a.onclick = (function (j) { // j is the right number and always will be
   return function () { // this function is the click handler
       ytplayer_playitem = j;
       ytplayer_playlazy(1000);
   };
})(i); 
```

所以每个`a`元素都有自己的点击处理函数，每个元素都有自己的独立`j`变量，即正确的数字。因此，单击链接时，它们将执行您希望它们执行的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T18:49:48.933

> ```
> a.onclick = (function (j) {
>   return function () {
>       ytplayer_playitem = j;
>       ytplayer_playlazy(1000);
>   };
> })(i); 
> ```

您在这里拥有的是一个*自调用匿名函数*。让我们分解一下，首先用更简单的 ( `return j + 1;`) 替换函数的主体：

```
function( j ) { return j + 1; } 
```

这是一个普通的匿名函数或*闭包*。这行代码是一个表达式，所以它有一个值，这个值就是一个函数。现在我们可以这样做：

```
var foo = function( j ) { return j + 1; }

foo( 5 );  // => 6 
```

你知道这一点，我敢肯定——我们将匿名函数分配给变量`foo`，然后通过名称和参数调用函数`i`。但是，不是创建一个新变量，因为闭包是一个表达式，我们可以这样称呼它：

```
( function( j ) { return j + 1; } )( 5 );  // => 6 
```

结果相同。现在，它只是返回`j + 1`，但在您的代码中它返回其他内容：另一个匿名函数：

```
return function() { /* ... */ } 
```

当我们有一个返回函数的自调用匿名函数时会发生什么？结果是返回的“内部”函数：

```
a.onclick = ( function( j ) {
    return function() {
             ytplayer_playitem = j;
             ytplayer_playlazy( 1000 );
           }
  }
)( i ); 
```

If `i`is equal to `9`then`a.onclick`现在将拥有一个与此等效的函数：

```
function() {
  ytplayer_playitem = 9;
  ytplayer_playlazy( 1000 );
} 
```

正如其他人所指出的那样，这样做的用处在于，当`( function( j ) { /* ... */ } )( i )`被调用时，您正在捕获当时的*值*并将*其*放入而不是创建对值的*引用*，这可能（并且可能会）在以后发生变化。`i` *`j`*`i`****

# php - 跨多个页面显示标记图像失败

> ID：10725657
> 
> 赞同：0
> 
> 时间：2012-05-23T18:20:20.047
> 
> 标签：php, mysql, image, pagination

我觉得这是一个比任何事情都更逻辑的问题。数据库具有通过源引用保存的图片和标签的布尔值，例如 isLandscape=1。我已经建立了一个系统来根据所询问的类型遍历结果页面。以下是我所面临的一个例子。我从第 0 页 -> 第 22 页只看到相同的 12 张图片。然后我开始看到新的。我想我只是忽略了这个错误，因为直到现在我才注意到它。我注意到的一件事是 page22*12pictures = 264，这与看到的第一个新图片 id 相同。[您可以在此处](http://phoenixprints.org/viewpicture.php?sec=6&p=0)看到错误（只需将 p 更改为不同的页面）。

```
<?php
$pictureid   = -1;
$startpage   = 0;
$viewsection = -1;
$uid         = -1;  //user id

$amntperrow  = 4; //how many pictures per row, must correlate with doThumb()'s switch case amounts
$maxrows     = 3;    //how many rows of pictures to drop

if(isset($_GET['pid']) && is_int(intval($_GET['pid']))) $pictureid   = clean($_GET['pid']);
if(isset($_GET['sec']) && is_int(intval($_GET['sec']))) $viewsection = clean($_GET['sec']);
if(isset($_GET['p'])   && is_int(intval($_GET['p'])))   $startpage   = clean($_GET['p']);

$result = generateResult(array("isFlowers"), $startpage);
//**snip** -- drawing thumbnails would happen here

function generateResult($types, $page) {
    global $amntperrow;
    global $maxrows;

    $sqlWheres = "";
    $idAmnt = ($amntperrow*$maxrows)*$page;

    if(isset($types) && !empty($types)) {
        if(count($types) >= 1) {
            for($i = 0; $i<count($types); $i++) {
                $sqlWheres .= $types[$i] . "='1'";
                if($i < count($types)-1) $sqlWheres .= " AND ";
            }
        }
    }        

    $result = "SELECT * FROM pictures WHERE ";
    if(!empty($sqlWheres)) $result .= $sqlWheres . " AND " ;
    $result .= " private='0' AND id >='" . $idAmnt . "' LIMIT " . ($amntperrow*$maxrows);

    return $result;
}
?> 
```

这似乎是一个我忽略的明显错误。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:28:44.627

这两个查询有什么区别？

```
SELECT *
FROM pictures
WHERE private = '0' AND id >= '24'
LIMIT 12; 
```

和

```
SELECT *
FROM pictures
WHERE private = '0' AND id >= '36'
LIMIT 12; 
```

答：**可能根本没有区别**。数据库引擎可以在任何一种情况下决定它想要返回`id`s 100 到 111 的图片 - 结果集满足任一查询的所有条件。

请尝试这样的查询：

```
"SELECT *
FROM pictures
WHERE private = '0'
ORDER BY id
LIMIT " . $idAmnt . ", " . ($amntperrow * $maxrows) 
```

`ORDER BY id`真的是关键。对数据库结果进行分页通常使用 和 的组合来`ORDER BY`完成`LIMIT`。

# java - Java - 避免使用一组超类对象进行强制转换

> ID：10725665
> 
> 赞同：2
> 
> 时间：2012-05-23T18:21:13.557
> 
> 标签：java, arrays, casting, clone, subclass

我有许多子类实现超类动物（狗、猫、老鼠等）

所以我这样做：

```
Animal[] arrayOfAnimals = new Animal[100]; 
```

我把狗、猫等物体放进去。

当我从中得到一些东西时，我会做

```
If(arrayOfAnimals[1] instanceof Dog) {
    ((Dog)(arrayOfAnimals[1])).speak();
}

else if(arrayOfAnimals[1] instanceof Cat) {
    ((Cat)(arrayOfAnimals[1])).speak();
} 
```

因为我需要知道那个动物是猫还是狗，因为例如，每个人的说话方式都不一样。

现在假设我有很多 Animals 子类，我会连续得到很多“else if...”

我的问题是：有没有办法避免这种情况？我已经尝试过使用接口（Animal -> 接口、Dog、Cat 等实现动物），但在我的项目中，数组必须是可克隆的，如果 Animal 是接口（该数组内的对象不会被克隆）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T18:23:16.453

> 因为我需要知道那个动物是猫还是狗，因为例如，每个人的说话方式都不一样。

这听起来像是一个*实现*细节——如果每只动物都能以某种形式说话，你应该把这个`speak()`方法`Animal`作为一个抽象方法。然后每个子类将覆盖它以提供实现。然后你可以使用

```
arrayOfAnimals[1].speak(); 
```

...并且多态性将负责使用正确的实现。

您*可以*克隆接口类型的数组，顺便说一句：

```
interface Foo {
}

class FooImpl implements Foo {
}

public class Test {
    public static void main(String[] args) {
        Foo[] foos = { new FooImpl() };

        Foo[] clone = (Foo[]) foos.clone();
        System.out.println(foos[0] == clone[0]); // true
    }
} 
```

请注意，无论涉及哪种类型，调用`clone()`数组都不会克隆每个元素 - 新数组将包含与旧数组相同的引用。这是一个浅拷贝。如果您想这样做，您必须自己编写代码（或查找第三方库）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:23:50.230

为什么不将 speak() 移到超类并让子类覆盖它？

# android - 在android中解析twitter json响应时出错

> ID：10725666
> 
> 赞同：1
> 
> 时间：2012-05-23T18:21:17.167
> 
> 标签：android, json, twitter, lookup

我尝试使用 Twitter Get users/lookup 来查找用户信息。但是我在解析响应 json 文件时遇到了一些错误。请求 URI 为：“https://api.twitter.com/1/users/lookup.json?screen_name=nba”。我的代码是：

```
public String getInternetData() throws Exception{
    String data = null;
    try {
        URI website = new URI("https://api.twitter.com/1/users/lookup.json?screen_name=nba");
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        String str = EntityUtils.toString(entity);
        try {
            JSONObject jouser = new JSONObject(str);
            data = jouser.getString("followers_count");
        } catch (JSONException e) {
            e.printStackTrace();
        }

    }catch(Exception e){
        Log.e("log_tag", "Error in http connection: " +e.toString());
    }
    return data;
} 
```

响应 JSON 内容是

```
[
   {
      "notifications":false,
      "id":19923144,
      "profile_link_color":"177BC7",
      "profile_image_url_https":"https:\/\/si0.twimg.com\/profile_images\/1787324427\/National-Basketball-Association_normal.jpg",
      "profile_background_image_url_https":"https:\/\/si0.twimg.com\/profile_background_images\/559347559\/12twitter_playoffs_0523.jpg",
      "id_str":"19923144",
      "following":false,
      "profile_use_background_image":true,
      "profile_image_url":"http:\/\/a0.twimg.com\/profile_images\/1787324427\/National-Basketball-Association_normal.jpg",
      "utc_offset":-18000,
      "friends_count":988,
      "profile_text_color":"333333",
      "time_zone":"Eastern Time (US & Canada)",
      "default_profile":false,
      "followers_count":5095414,
      "name":"NBA",
      "profile_banner_url":"https:\/\/si0.twimg.com\/brand_banners\/NBA\/1335482314\/live",
      "url":"http:\/\/www.nba.com",
      "profile_sidebar_border_color":"eeeeee",
      "created_at":"Mon Feb 02 19:04:42 +0000 2009",
      "protected":false,
      "listed_count":28499,
      "profile_background_tile":false,
      "contributors_enabled":true,
      "profile_sidebar_fill_color":"ffffff",
      "geo_enabled":false,
      "description":"News and notes directly from the NBA.",
      "location":"New York, NY",
      "is_translator":false,
      "show_all_inline_media":true,
      "statuses_count":28818,
      "follow_request_sent":false,
      "lang":"en",
      "profile_background_color":"000000",
      "default_profile_image":false,
      "verified":true,
      "favourites_count":15,
      "screen_name":"NBA",
      "profile_background_image_url":"http:\/\/a0.twimg.com\/profile_background_images\/559347559\/12twitter_playoffs_0523.jpg"
   }
] 
```

然后我得到了错误： *Error parsing data: org.json.JSONException: Value [{"location"...... 有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:25:55.283

如果响应以`[`它开头意味着它实际上是一个 JSON 数组，而不是一个对象。然后，您将不得不执行以下操作：

```
JSONArray array = new JSONArray(str);
JSONObject jsonObject = array.getJSONObject(0);
String followersCount = jsonObject.getString("followers_count"); 
```

# facebook - 从 Graph API 获取会话密钥

> ID：10725669
> 
> 赞同：1
> 
> 时间：2012-05-23T18:21:24.783
> 
> 标签：facebook, api, facebook-graph-api

我使用 Graph API:`https://www.facebook.com/dialog/oauth?client_id=aap_id&redirect_uri=url&response_type=token`并获得了访问令牌。

*我如何从它或从图表中获取会话密钥？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:24:45.393

你不能，但你也没有理由需要会话密钥。所有过去需要会话密钥的旧 API 都已停用或更新以获取访问令牌。

# iphone - 在 iPhone 中发送彩色短信

> ID：10725671
> 
> 赞同：-2
> 
> 时间：2012-05-23T18:21:38.687
> 
> 标签：iphone

我正在开发类似于 Pimp 的 iPhone 应用程序我的文本可在此处获得：http: [//itunes.apple.com/us/app/pimp-my-text-send-color-text/id489972714 ?mt=8](http://itunes.apple.com/us/app/pimp-my-text-send-color-text/id489972714?mt=8)

我正在尝试找到一种方法来像应用程序一样发送彩色和动画消息。我已经通过使用 UIWebview 进行了尝试，但似乎在应用程序中使用了粘贴板来发送 iMessage，但它不起作用。粘贴板从消息的编辑器屏幕复制消息并将其粘贴到默认的 iMessage 控制器。但我不确定它是如何在应用程序中完成的。

任何人都可以建议任何方式来发送带有效果的彩色动画文本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:57:05.910

I have fixed this by following code:

```
 UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
           pasteboard.persistent = YES;
           NSString *imagefile =app.strimagepath;

           ///  
           BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:imagefile];

           if (fileExists)
           {    
               NSData *data = UIImagePNGRepresentation([UIImage imageWithContentsOfFile:imagefile]);
               pasteboard.image = [UIImage imageWithData:data];
           }
           NSString *phoneToCall = @"sms: 123-456-7890";
           NSString *phoneToCallEncoded = [phoneToCall stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding];
           NSURL *url = [[NSURL alloc] initWithString:phoneToCallEncoded];

           [[UIApplication sharedApplication] openURL:url]; 
```

Here app.strimgPath is the path of image stored in document directory. when the MessageView is opened. Longpress and click on Paste and message will be pasted.

May be the question I asked did not clarified correctly as what I want. But the above was something that solved my purpose.

# java - 单击按钮重新初始化小程序

> ID：10725672
> 
> 赞同：0
> 
> 时间：2012-05-23T18:21:41.243
> 
> 标签：java, applet, japplet

如何通过单击小程序中的按钮（`JButton`）重新初始化完整的 Java 小程序？

我希望小程序的行为就像它第一次的行为一样。我在我的小程序中获得了扫描仪，但我不知道释放它的功能。而销毁和重新启动小程序会自动执行此操作。有什么方法可以让我看到这个 Java 小程序使用什么函数来释放那个扫描器资源？所以我可以用同样的方式调用那个方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:25:03.303

通常这个调用序列应该可以解决问题：

```
stop();
destroy();
init();
start(); 
```

# jquery - 带有jquery css的整页背景

> ID：10725673
> 
> 赞同：1
> 
> 时间：2012-05-23T18:21:47.530
> 
> 标签：jquery, css

我让它正常运行，给我的包装器一个黑色的背景，上面有一个不透明的。当我尝试将背景颜色更改为没有不透明度时，问题就出现了，我的内容似乎落后于背景图像。

编码

```
<img src="bg.jpg" id="bg" alt="">
<div class="wrapper">
    <div class="main">
        <h1>Full Screen</h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce tempus, sem id feugiat lobortis, felis velit dignissim sem, et pretium orci est et magna. Nunc non massa id odio ultrices varius. Nulla consequat sollicitudin erat sed condimentum. Cras vel magna ut tellus rhoncus dictum. Nulla dictum adipiscing quam vel condimentum. Aliquam accumsan quam in libero vehicula vel sodales justo tempus. Duis mattis leo a urna feugiat eleifend. Suspendisse cursus molestie est ornare sodales. Sed justo risus, mattis a tincidunt facilisis, mattis porta tortor. Nunc ac quam justo.</p>
    </div>
</div> 
```

的CSS

```
#bg { 
    position: fixed; top: 0; left: 0; 
}
.bgwidth {
    width: 100%;
}
.bgheight {
    height: 100%; 
}
.wrapper{
    width:960px;
    /*border-radius: 10px;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    box-shadow: 0px 0px 10px #000;
    background-color:#000;
    filter: alpha(opacity=30);
    opacity: 0.3;*/
    background-color:#000;
    margin-left:auto;
    margin-right:auto;
} 
```

js

```
$(window).load(function() {    

    var theWindow        = $(window),
        $bg              = $("#bg"),
        aspectRatio      = $bg.width() / $bg.height();

    function resizeBg() {

        if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
            $bg
                .removeClass()
                .addClass('bgheight');
        } else {
            $bg
                .removeClass()
                .addClass('bgwidth');
        }

        var newWidth = theWindow.width()-$bg.width();
        var newHeight = theWindow.height()-$bg.height();
        //alert(newWidth + "-"+ newHeight);
        $bg.css("left",(newWidth/2)+"px");
        $bg.css("top",(newHeight/2)+"px");
    }

    theWindow.resize(function() {
        resizeBg();
    }).trigger("resize");

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:02:56.950

我已经更新了@deltree 的 jsfiddle。[http://jsfiddle.net/trickeedickee/79aXy/2/](http://jsfiddle.net/trickeedickee/79aXy/2/)

当您删除不透明度时，您需要添加`position: relative;`到您`.wrapper`的，它会为您工作。

```
.wrapper {
    position: relative;
    } 
```

我希望这有帮助。

# linux - Bash - 在没有文件的情况下使用 AT 命令

> ID：10725676
> 
> 赞同：0
> 
> 时间：2012-05-23T18:21:58.470
> 
> 标签：linux, shell, at-job

听起来可能很奇怪，但我需要运行**AT**命令并安排一个命令，但我不想制作一个文件并使用**-f**选项将其发送到 AT。是否有可能将整个内容写在一行中。假设我想在 13:10 运行**“gnome-terminal”**。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:27:05.127

`at`默认情况下从标准输入读取，即如果`-f`不使用。您可以通过多种方式传递多行，例如使用此处的文档：

```
at << EOF
first line
second line
EOF 
```

或者在一行中（特定于 bash）：

```
at <<< $'first line\nsecond line' 
```

# sublimetext2 - 突出显示与 Sublimetext 中的正则表达式匹配的行

> ID：10725677
> 
> 赞同：0
> 
> 时间：2012-05-23T18:22:04.037
> 
> 标签：sublimetext2

如何让 SublimeText 突出显示与某个正则表达式匹配的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:04:14.380

如果您执行`ctrl+f`（`cmd+f`如果在 Mac 上），您会在查找器文本框旁边看到一个图标，该图标已`.*`单击该切换按钮，然后放置在您的正则表达式中，您将与被概述的匹配。

# php - 除非数据库已更改，否则使用 php 页面的缓存版本

> ID：10725681
> 
> 赞同：1
> 
> 时间：2012-05-23T18:22:17.127
> 
> 标签：php, database, caching, http-headers, etag

我已经查看了有关 PHP 中缓存的类似问题，但我仍然对如何检查数据库是否已更改而不对数据库进行新调用感到困惑，这会破坏缓存的意义。

我从技术上了解如何在 PHP 中实现缓存——使用 ETag 和 Last Modified 标头、输出缓冲、存储静态文件等。让我感到困惑的是如何确定*何时*提供新版本的页面而不是缓存版本。如果数据库内容发生了变化，我想显示新版本而不是缓存版本。

例如，假设我有一个显示产品详细信息的页面。一般来说，产品信息一旦存入数据库，就不会发生太大变化。但有时可能会对产品描述进行编辑或价格更改。如果产品有新价格，我不想通过使用页面的缓存版本向用户显示旧价格。出于这个原因，每小时更新缓存的内容似乎还不够。更不用说对于没有变化的内容来说太频繁了，真正的问题是当有变化时它不会足够快地更新内容。

那么，每次通过应用程序管理区域中的表单更新产品数据库时，我是否应该存储一些内容（例如，ETag 值或静态 html 文件）？我在这里想念什么？

[注意：对在这里使用缓存库不感兴趣。我现在想学习如何直接使用 PHP。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T20:07:23.857

缓存是一个相当复杂的话题，因为你可以在不同的地方缓存各种数据。通常，您实施缓存以缓解服务器结构中的瓶颈。

在您的设置中，您可以在三个不同的位置缓存数据：

1) 客户端，在客户端和服务器之间您将使用这种方法来节省带宽并缩短用户的加载时间。您可以通过在 http 标头中设置缓存相关字段（Cache-Control、Expires、ETag 等）来实现这一点。

如果您使用 Cache-Control 或 Expires，是否从服务器加载更新版本的决定完全取决于客户端。因此，即使有可用的新版本，用户也不会看到它。从好的方面来说，您在服务器上节省了大量的 cpu 周期，因为您的 php 脚本不会被执行。

如果您使用 ETag，您可以在每次请求时通知客户端，如果请求内容的版本已更改。但是您的 php 脚本将在每个请求上执行，即使 ETag 未更改。

2) 服务器端，在客户端和服务器之间 这种缓存主要减少服务器上的高 CPU 负载。它不会影响客户端和服务器之间产生的流量。

您可以使用 Varnish 之类的客户端代理在服务器端存储呈现的响应。好消息是，您可以完全控制缓存。如果请求内容的更新版本可用，您可以简单地从缓存中清除旧版本，以便从您的 php 脚本生成新版本并存储在缓存中。

每个可缓存的响应只会生成一次，然后从缓存中提供给客户端。

3) 在您的应用程序中如果您大量使用数据库，您应该考虑使用像 memcached 这样的快速键值存储来缓存查询结果。当然你必须为此调整你的数据库类（首先询问 memcached，如果 memcached 没有结果询问数据库并将结果存储到 memcached 中），但性能提升会非常可观，因为 memcached 真的很快。

有时，如果不必永久保存数据（例如 php 会话），将数据单独存储在 memcached 中甚至是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:28:23.233

很久以前我也遇到过同样的问题（我不知道你是否会找到我的方法是正确的）。

**为什么我需要缓存：-** 我的网站用来做的是，它用于通过在 cron.php 文件和 index.php 上运行脚本来更新数据库，用于显示来自数据库的列表（这种使用需要很长时间才能加载）

**我的解决方案**：-

每次创建或更新新列表时，我都会取消链接缓存文件，然后在 index.php 页面上检查缓存文件是否存在加载缓存或从数据库加载内容同时将这些数据写入缓存文件，以便下次用户对 index.php 文件的请求

# wordpress - Wordpress 主题兼容性问题

> ID：10725682
> 
> 赞同：0
> 
> 时间：2012-05-23T18:22:20.757
> 
> 标签：wordpress, content-management-system, themes, admin, compatibility

我正在为客户开发 WP 主题，但遇到了一些麻烦。

当我的主题被激活时：

我编辑帖子或页面（或其他几个区域），单击更新、发布等 - 我得到一个空白页。

当我回去时，帖子已经更新 - 所以系统正在运行，它只是没有将我重定向回编辑页面。

激活默认模板后一切正常。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:25:53.723

要跟踪错误，请将 WP_DEBUG 设置为 true

参考： http: [//www.wprecipes.com/how-to-easily-enabledisable-debug-mode-in-wordpress](http://www.wprecipes.com/how-to-easily-enabledisable-debug-mode-in-wordpress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:26:13.170

更改`WP_DEBUG`为`true`位于`wp-config.php`WordPress 根文件夹中的文件，然后您将能够看到即将出现的错误。修复这些错误将解决您的问题。

# android - parse.com 保存图片

> ID：10725686
> 
> 赞同：1
> 
> 时间：2012-05-23T18:23:11.243
> 
> 标签：android, save, save-image, parse-platform

我正在尝试使用 parse.com 为 Android 制作平板电脑应用程序。我还不擅长Android，但我正在尝试使用它来获取和反对：

```
ParseFile applicantResume = (ParseFile)anotherApplication.get("applicantResumeFile");
applicantResume.getDataInBackground(new GetDataCallback() {
  public void done(byte[] data, ParseException e) {
    if (e == null) {
       // data has the bytes for the resume
    } else {
       // something went wrong
    }
  }
}); 
```

似乎我需要保存刚刚获得的新对象，但是以这种方式保存它时遇到问题：

```
FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(data.getBytes());
fos.close(); 
```

知道如何保存数据吗？解析 API 说它是 byte[]，不能让它工作:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T00:42:09.513

您需要将图像转换为字节 []。这就是我能够做到的方式；[我的代码](https://stackoverflow.com/questions/16381100/java-io-filenotfoundexception-file-path-jpg-open-failed-enoent-no-such-file)。只要确保你了解你的照片的真正位置。使用正确`filepath`是我的麻烦。

在 Parse.com 上发送了许多电子邮件和问题后，我意识到它们对**android 不友好**。一旦我对这一切有了更好的了解，我计划在 YouTube 上发布一些教程。

祝你好运！

# regex - 拆分文本文件，使每行不超过 50 个字符

> ID：10725691
> 
> 赞同：0
> 
> 时间：2012-05-23T18:23:38.593
> 
> 标签：regex, vb.net, text, split, lines

我正在阅读一个主要包含字母字符的文本文件。内容并不真正相关，但每行的大小非常重要。我将提供此文本的过程将要求每行不超过 50 个字符。所以我将预处理文本并添加换行符以确保发生这种情况。

我尝试了几个 VB.NET 正则表达式，例如 ^.*$ 但这并没有真正将行分解为 50 个字符。我会获取结果并遍历每个匹配项，然后将其切分并将其写入内存中的对象。这可以通过单个正则表达式完成吗？

否则，我将使用流式读取器并在每一行检查长度，如果 <=50 则使用流式写入器将其写出。如果 >50 将其分成 50 个部分，然后使用 streamwriter。

我的文字的一个简短示例：

```
 119  SMITH KATY AAAA  F   ZZZ     X NB SX ET
          MILES,200/LM450                       
 120  JONES  THOMAS      W   QQQ  66-W NB OS SC LW EP       
                                              ET
          L/G/B/MAY20-2010/JONES/THOMAS/KEITH      121  BUBBA BILLY  HH4  S   XQT 2PA-F  1 IP SC LH ET
                                              DOCC
 122  NEWTON   IAASAC      S   FTY 240-U NB QC LF KD EE 
```

只是寻找有关如何有效地做到这一点的提示。

更新：我最终使用了 SSS 建议的流式阅读器方法。但是，我试图避免使用旧的 Mid 函数并坚持使用 Substring。因此，我不得不进行一些检查并使用另一篇 SO 帖子中的一些代码，但不记得是哪一个。无论如何，它是：

```
 Dim reader As New StringReader(aSource)
    Dim line As String = Nothing
    Dim writer As New StringWriter
    Dim chunkSize As Integer = 50
    Dim chunk As String

    Do
        line = reader.ReadLine()
        If Not String.IsNullOrEmpty(line) Then
            Debug.WriteLine(line.Length & "-->" & line)
            'if line length is less than or equal to chunk size then write it out, otherwise cut it up and then write the chunks out
            If line.Length <= chunkSize Then
                writer.WriteLine(line)
            Else
                Debug.WriteLine("---------------------")
                For i = 0 To line.Length Step chunkSize
                    Debug.WriteLine("i  =" & i)
                    Debug.WriteLine("i+c=" & i + chunkSize)
                    Debug.WriteLine("L  =" & line.Length)
                    If i + chunkSize > line.Length Then
                        chunk = line.Substring(i, line.Length - i)
                    Else
                        chunk = line.Substring(i, chunkSize)
                    End If
                    Debug.WriteLine("  " & chunk.Length & "-->" & chunk)
                    writer.WriteLine(chunk)
                Next i
                Debug.WriteLine("---------------------")
            End If
        End If
    Loop While (line IsNot Nothing)
    reader.Close()
    reader.Dispose()

    'this cut string now becomes our source
    Debug.WriteLine("==>" & writer.ToString)
    sourceText = writer.ToString

    writer.Close()
    writer.Dispose() 
```

希望能帮助有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:02:39.217

```
Imports System.IO
Public Class Form1

  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim strFilenameIn As String = "C:\Junk\Input.TXT"
    Dim strFilenameOut As String = "C:\Junk\Output.TXT"
    Try
      Using sr As New StreamReader(strFilenameIn)
        Using sw As New StreamWriter(strFilenameOut)
          Do
            Dim strLine As String = sr.ReadLine()
            If strLine Is Nothing Then Exit Do 'EOF
            For i As Integer = 1 To strLine.Length Step 50
              sw.WriteLine(Mid(strLine, i, 50))
            Next i
          Loop
        End Using
      End Using
    Catch ex As Exception
      MsgBox(ex.Message)
      Exit Sub
    End Try
    MsgBox(strfilenameout & " written")
  End Sub
End Class 
```

# mysql - 在 mysql 中连接 3 个表，其中数据不在两个连接中

> ID：10725692
> 
> 赞同：1
> 
> 时间：2012-05-23T18:23:41.270
> 
> 标签：mysql, inner-join

我在加入 3 个表时遇到问题，其中我需要的数据是两个表之一，但不是两个表。

因此，假设我们有表“客户”，列“id”，“城市”，“州”，以及 2 个数据表 data_a 和 data_b，列“id”和我想要的数据。

现在我有一个类似于下面的声明。

```
SELECT cust.id, cust.city, cust.state, a.info as infoa, b.info as infob
  FROM customers cust
  INNER JOIN data_a a 
    ON cust.id = a.id
  INNER JOIN data_b b
    ON cust.id = b.id
  WHERE cust.city = 'mytown'; 
```

这需要很长时间才能运行，并且我没有从查询中得到任何响应，因为我会在它完成之前杀死它（如果它真的完成的话）。

如果我删除第二个数据表，该语句工作正常，只有当我添加它时，我才会遇到问题。所有 id 列以及 city 列都被索引。

还是我最好创建一个临时表并执行 2 个连接，将它们插入临时表并从临时表中读取？

编辑：修正错字

如果我确实离开了连接，则查询将处于执行状态，大概是无限期的。使用内连接时，我会得到一个空集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:36:00.623

如果联接将在一个表上，但不是同时在两个表上，那么您需要 LEFT JOIN：

```
SELECT cust.id, cust.city, cust.state, a.info as infoa, b.info as infob
  FROM customers cust
  LEFT JOIN data_a a 
    ON a.id = cust.id
  LEFT JOIN data_b b
    ON b.id = cust.id
  WHERE cust.city = 'mytown'; 
```

确保您具有以下索引：

```
cust: ('city')
data_a: ('id')
data_b: ('id') 
```

# variables - 如何在 Sybase 更新语句中使用变量

> ID：10725696
> 
> 赞同：1
> 
> 时间：2012-05-23T18:24:01.860
> 
> 标签：variables, sybase

这个查询是为了证明一个概念，我最终将使用它来定位具有特定值的所有列，然后创建一个名称/值对以导出到 JSON。但我被困住了。

我从 sql 表中查询所有列的列表。然后，我想逐行浏览 Table1 中的列，并使用变量更新值来构造查询。例如，如果 Col4 = "Old text" 读取列表，那么我想设置 Col 4 = "New Text" 的值

```
DECLARE @c varCHAR(100)
DECLARE ReadData CURSOR
FOR SELECT cname FROM sys.syscolumns WHERE creator = 'dbserver' AND tname = 'Table1' 
    DECLARE @RowCount INT

SET @RowCount = (SELECT COUNT(cname) FROM sys.syscolumns WHERE creator = 'dbserver' AND tname = 'Table1')
OPEN ReadData

DECLARE @I INT // iterator

SET @I = 1 // initialize
WHILE (@I <= @RowCount)
BEGIN
FETCH NEXT ReadData INTO @c

INSERT INTO serverdb.Table2 (cname)VALUES(@c)// this works inserting all 100 columns in the cname column of Table 2

UPDATE serverdb.Table1 SET @c = 'New text' WHERE @c = 'Old text'// this fails with a syntax error. @c is not being interpreted for the query. Note: If I hard code the @c var (for testing)to a known column name, the query works as well

SET @I = @I  + 1
END; 
```

为什么更新语句不能识别变量？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T03:52:55.243

当您使用下面提到的 varibale 时，它​​被视为字符串。

```
UPDATE serverdb.Table1 SET @c = 'New text' WHERE @c = 'Old text' 
```

您需要创建一个动态查询。使用 execute 方法来执行你的动态查询

```
declare @sql varchar(999)
SELECT @sql = 'UPDATE serverdb.Table1 SET '+ @c + '= ''New text'' WHERE '+ @c+ ' = ''Old text'' '
execute(@sql) 
```

希望这可以帮助

# c - 舍入误差：总和

> ID：10725698
> 
> 赞同：1
> 
> 时间：2012-05-23T18:24:04.377
> 
> 标签：c, math, floating-point

我有一张大学幻灯片，声称做一个连续的总和，比如

1 / i^2

索引“i”从 0 到 2260，不同于对相同数字求和，而是从最大到最小（从 1/ 2260^2 到 1/0^2）。

尝试在 C 上执行此操作，我得到以下结果：

```
Increasing Order Sum: 1.644491e+00.
Decreasing Order Sum: 1.644491e+00.
Relative Error (abs(Incr. Sum - Decr. Sum) / abs(Incr. Sum)) : 2.700465e-15. 
```

有人可以解释一下为什么会这样吗？我在这些幻灯片上没有解决方案。

提前致谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:26:27.477

因为浮点加法通常不是[关联](http://en.wikipedia.org/wiki/Associative)的。换句话说，`(a + b) + c`不一定与 相同`a + (b + c)`。

要查看原因，请尝试运行以下代码：

```
float a = 1e9;
float b = 1;
a += b;
printf("%f\n", a); 
```

然后考虑如果`b`加到`a`100 万次会发生什么。然后考虑如果交换操作会发生什么（即最后添加 1e9）。

# sql - 如何使用标识列创建表

> ID：10725705
> 
> 赞同：118
> 
> 时间：2012-05-23T18:24:54.240
> 
> 标签：sql, sql-server, tsql

我有一个现有的表，因为我没有创建它并将`ID`列设置为表的标识列，所以我将要删除它。

使用**SQL Server Management Studio**，我编写了现有表的*“创建到...”*脚本并得到了这个：

```
CREATE TABLE [dbo].[History](
    [ID] [int] NOT NULL,
    [RequestID] [int] NOT NULL,
    [EmployeeID] [varchar](50) NOT NULL,
    [DateStamp] [datetime] NOT NULL,
 CONSTRAINT [PK_History] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

我的问题是，我将如何修改它`SQL`以便我的结果表将`ID`列设置为**Identity**？

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-05-23T18:28:23.180

```
CREATE TABLE [dbo].[History](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [RequestID] [int] NOT NULL,
    [EmployeeID] [varchar](50) NOT NULL,
    [DateStamp] [datetime] NOT NULL,
 CONSTRAINT [PK_History] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
) ON [PRIMARY] 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-23T19:19:21.680

这已经得到回答，但我认为最简单的语法是：

```
CREATE TABLE History (
    ID int primary key IDENTITY(1,1) NOT NULL,
    . . . 
```

当您真正想要更改选项时，更复杂的约束索引很有用。

顺便说一句，我更喜欢将这样的列命名为 HistoryId，因此它与外键关系中的列的名称相匹配。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-23T18:27:48.150

```
[id] [int] IDENTITY(1,1) NOT NULL, 
```

当然，由于您是在 SQL Server Management Studio 中创建表，因此您可以使用表设计器来设置标识规范。

![在此处输入图像描述](../Images/414d7ef9218de4855321d1907c399652.png)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-03-29T10:34:51.340

唯一键最多允许 2 个 NULL 值。解释：

```
create table teppp
(
id int identity(1,1) primary key,
name varchar(10 )unique,
addresss varchar(10)
)

insert into teppp ( name,addresss) values ('','address1')
insert into teppp ( name,addresss) values ('NULL','address2')
insert into teppp ( addresss) values ('address3')

select * from teppp
null string , address1
NULL,address2
NULL,address3 
```

如果您尝试插入与以下相同的值：

```
insert into teppp ( name,addresss) values ('','address4')
insert into teppp ( name,addresss) values ('NULL','address5')
insert into teppp ( addresss) values ('address6') 
```

每次你都会得到如下错误：

> 违反 UNIQUE KEY 约束“UQ__teppp__72E12F1B2E1BDC42”。无法在对象“dbo.teppp”中插入重复键。
> 该语句已终止。

# ios - iOS (Xcode 4.3) postNotificatioName:object:userInfo: 失败并出现 EXC_BAD_ACCESS

> ID：10725706
> 
> 赞同：0
> 
> 时间：2012-05-23T18:24:57.250
> 
> 标签：ios, xcode, events, notifications, exc-bad-access

我在尝试发布通知时收到 EXC_BAD_ACCESS (code=2, address=0x8) 错误。

偶尔我会看到：

```
-[__NSMallocBlock__ handleMessagesReceived:]: unrecognized selector sent to instance 0x9855cd0 
```

通知邮政编码如下所示：

```
NSDictionary *notificationInfo = [NSDictionary dictionaryWithObject:outputArray forKey:@"messages"];
[[NSNotificationCenter defaultCenter] postNotificationName:kMESocialHeatmapMessagesReceivedNotification object:nil userInfo:notificationInfo]; 
```

观察者代码如下所示（这是该通知的唯一处理程序）：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleMessagesReceived:) name:kMESocialHeatmapMessagesReceivedNotification object:nil]; 
```

和处理程序代码：

```
- (void)handleMessagesReceived:(NSNotification *)notification {...} 
```

我已经清理了项目（CMD-SHIF-K、CMD-ALT-SHIFT-K 并从 Organizer 中删除了派生数据），重新启动了 Xcode 和我的机器，甚至重新编写了相关代码。同样的问题，我只是没有看到这个问题。

任何见解都非常感谢。

干杯，

克里斯

========== 更新（无法回答我自己的问题...）============

干杯，菲利普和响，这为我指明了正确的方向。

我确实理解 EXC_BAD_ACCESS 表示一个已解除分配的对象，但在这种情况下，这是不可能的，因为系统的主类正在持有有问题的对象（热图）。

这个问题原来是热图的创建和它共享的数据模型的填充之间的竞争条件。填充偶尔会在热图创建完成之前发生（两者都是事件驱动的）。

我最终重新编写了代码，以便保存热图的类在热图更清晰后进行同步调用以填充数据。

感谢您的输入，它让我头疼。:)

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:57:08.390

这个问题原来是热图的创建和它共享的数据模型的填充之间的竞争条件。填充偶尔会在热图创建完成之前发生（两者都是事件驱动的）。

我最终重新编写了代码，以便保存热图的类在热图更清晰后进行同步调用以填充数据。

感谢您的输入，它让我头疼。:)

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:34:39.937

错误`EXC_BAD_ACCESS`是在没有初始化或向已释放对象发送消息的情况下释放对象时出现的错误，请查看[此问题](https://stackoverflow.com/questions/327082/exc-bad-access-signal-received)以获取有关 EXC_BAD_ACCESS 的更多信息

# android - 在待机模式下如何不让线程自己停止？

> ID：10725711
> 
> 赞同：2
> 
> 时间：2012-05-23T18:25:17.080
> 
> 标签：android, multithreading, background

在我的应用程序中，我在与主线程（UI）不同的线程中创建了一项服务。然后，在服务中，我创建了 3 个无限期在后台执行的线程。但是一旦手机进入待机模式，这些线程就会暂停执行！

相反，如果我通过 USB 电缆将手机连接到电脑，我会看到线程正常工作，即使在待机模式下也不会暂停自己。

但是如何不让线程在正常执行中出现这种行为呢？

tnx

解决了：

我设法通过使用 PowerManager 对象简单地实现了这一点，该对象获取了一个 PARTIAL_WAKE_LOCK，使 cpu 从acquire() 到release() 保持活动状态。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
 wl.acquire();
   ..CPU will stay on during this section..
 wl.release(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T14:37:46.303

我设法通过使用 PowerManager 对象简单地实现了这一点，该对象获取了一个 PARTIAL_WAKE_LOCK ，使 cpu 从 acquire() 调用直到 release() 调用保持活动状态。

这样，即使手机进入待机模式，线程也一定会运行。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
 wl.acquire();
   ..CPU will stay on during this section..
 wl.release(); 
```

# entity-framework-5 - 如何在 EF 5.0 中禁用自动表创建？

> ID：10725712
> 
> 赞同：15
> 
> 时间：2012-05-23T18:25:23.997
> 
> 标签：entity-framework-5

我在我的项目中为 Framework 4.0 安装了 Entity Framework 5.0 RC。但是当我尝试从视图中获取数据时，我得到了错误。EF 尝试为此实体创建表。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-24T08:48:14.220

在应用程序启动时使用它来关闭数据库初始化和迁移：

```
Database.SetInitializer<YourContextType>(null); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-30T22:06:34.437

如果您想完全关闭数据库初始化/迁移，无论您在哪个项目中使用您的 Context，您都可以在您的上下文中添加一个静态构造函数来调用初始化程序。这确保 SetInitializer 将在第一次构造/使用您的上下文之前被调用一次。

```
public class YourContext : DbContext
{
    static YourContext()
    {
        // don't let EF modify the database schema...
        Database.SetInitializer<YourContext >(null);
    }

    public YourContext() : base("name=YourContext")
    {}
    ...
} 
```

但是，如果您只想在少数几个项目中执行此操作，则最好通过应用程序启动明确地执行此操作 - 例如，在您的正常 IoC 设置期间，如 Ladislav 建议的那样。

# actionscript-3 - 通过 appendBytes 将本地 flv 文件发布到 Flash Media Server

> ID：10725713
> 
> 赞同：0
> 
> 时间：2012-05-23T18:25:28.593
> 
> 标签：actionscript-3, apache-flex, flash-media-server

由于我正在为 FMS 负载均衡器创建压力测试器，因此我需要发布尽可能多的流，以查看系统是否能够承受负载。

有什么方法可以通过 NetStream.publish 方法发送本地 flv 文件？经过一番研究，我发现只有 appendBytes 解决方案，但它似乎不起作用。

有人有这方面的例子吗？或者可能是关于如何伪造网络摄像头以便发送一些数据的解决方案。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:11:02.350

不确定这是否会对您有所帮助，但您可以调用服务器上的函数并将大字节数组（文件、字符串等）作为参数传递。

当然，这并不能真正算作流，但会给您的服务器带来负载。

```
netConnection.call("functionName", responder(may be null), largeData) 
```

# php - 如何拥有 Web 服务器

> ID：10725728
> 
> 赞同：1
> 
> 时间：2012-05-23T18:26:31.377
> 
> 标签：php, android, cordova, upload, webserver

我正在尝试构建一个移动应用程序，允许用户将照片上传到网络服务器，然后让用户在手机和在线查看它们。我正在使用 phonegap 并为 Android 开发，我非常了解在 phonegap 方面要做什么，但我不知道如何创建网络服务器。

有没有网站可以为我托管它，我需要做什么样的编码？我知道相当数量的 PHP，但我只是不知道从哪里开始。我想从很小的开始，所以说每天上传 50 次左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:28:35.617

查看[Google 的 App Engine](https://developers.google.com/appengine/)，它是开始使用此类东西的好地方。尽管它要求您使用 Java、Python 或 Go 而不是 php 进行编程。

如果您真的想在 php 中编写代码，任何 Web 服务器提供商都应该足够了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:39:30.110

您需要： 1) 具有 root 访问权限或至少 FTP 访问权限的 php Web 服务器 2) 用于保存上传文件的后端 php 代码 3) 用于上传文件的 Android 客户端代码

这个链接在这里：

[http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)

显示 2) 和 3) 的答案。祝你好运！

# git - 无需应用即可查看存储中的内容

> ID：10725729
> 
> 赞同：2280
> 
> 时间：2012-05-23T18:26:39.847
> 
> 标签：git, git-stash

我[在这里](http://git-scm.com/book/en/Git-Tools-Stashing)看到您可以应用/取消应用存储，甚至可以从存储中创建一个新分支。是否可以在不实际应用的情况下简单地查看存储中的内容？

* * *

## 回答 #1

> 赞同：3167
> 
> 时间：2012-05-23T18:58:49.773

从`man git-stash`（也可以通过 获得`git help stash`）：

> 此命令隐藏的修改可以用 列出，用和...`git stash list`进行检查`git stash show`

```
show [<stash>]
    Show the changes recorded in the stash as a diff between the stashed
    state and its original parent. When no <stash> is given, shows the
    latest one. By default, the command shows the diffstat, but it will
    accept any format known to git diff (e.g., git stash show -p stash@{1}
    to view the second most recent stash in patch form). 
```

注意：根据文档，该`-p`选项会生成一个*补丁。*`git-diff`

列出存储：

```
git stash list 
```

显示最新存储中的*文件：*

```
git stash show 
```

显示最近存储的*更改：*

```
git stash show -p 
```

显示命名存储的*更改*：

```
git stash show -p stash@{1} 
```

# c# - 序列化对象中带有 bashslash 的 Json 解析错误

> ID：10725734
> 
> 赞同：0
> 
> 时间：2012-05-23T18:27:26.353
> 
> 标签：c#, javascript, jquery, ajax, json

我正在调用服务器端函数以返回 json 格式字符串并使用 javascript 和 ajax 在客户端进行解析。我在 javascript 中遇到了解析错误。我认为这是 JavaScriptSerializer 添加到序列化对象的反斜杠。这是我从萤火虫看到的响应： {"d":"{\"Item\":\"Testing\"}"} ，我知道反斜杠是为了逃避双引号，但我如何让 json 来解决这个问题问题？？我花了 3 天时间在 google 上进行所有搜索。看来我的做法和其他人一样。感谢帮助。

服务器端代码：

```
[System.Web.Services.WebMethod]
public static string testmethod(string serial)
{ 
    ItemList itemlist = new ItemList();
    itemlist.Item = "Testing";     
    return new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(itemlist);
}

[System.Runtime.Serialization.DataContract]
public class ItemList
{
    [System.Runtime.Serialization.DataMember]
    public string Item { get; set; }
} 
```

带有ajax的客户端Javascript：

```
function PassParemeterToAspxUsingJquery(serial)
{               
    var sn = "test";//serial;
    $.ajax({
    type: "POST",
    url: "test.aspx/testmethod",
    contentType: "application/json; charset=utf-8",
    data: "{serial:'" + sn+"'}" ,
    dataType: "json",
    success: function(msg) {           
       alert(msg.d);             
    },
    error: function(jqXHR, textStatus, errorThrown){
       alert("The following error occured: "+ textStatus, errorThrown);
       alert(jqXHR.responseText);
    }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:46:31.263

`WebMethod`不会将该值作为 JSON 文本的一部分*嵌入。*如果您希望将其序列化为 JSON 对象而不是 JSON 字符串，则必须返回 an`Object`而不是 a `String`：

```
[System.Web.Services.WebMethod]
public static object testmethod(string serial)
{
    ItemList itemlist = new ItemList();
    itemlist.Item = "Testing";
    return itemList;
} 
```

不过，这可能需要 .NET 3.5 和[`ScriptMethodAttribute`](http://msdn.microsoft.com/en-us/library/system.web.script.services.scriptmethodattribute.aspx)：

```
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static object testmethod(string serial)
{ ... } 
```

然后只是：

```
success: function(msg) {
   alert(msg.d.Item);
} 
```

* * *

或者，您应该能够通过解析按原样使用它`msg.d`：

```
success: function(msg) {
    var data = $.parseJSON(msg.d);

    alert(data.Item);
} 
```

# android - 如何向 Android 发送短信并启动应用程序或应用程序活动

> ID：10725736
> 
> 赞同：0
> 
> 时间：2012-05-23T18:27:47.920
> 
> 标签：android, gps, java-web-start

我的问题很简单，我知道可以执行该功能。我想通过诸如“我的机器人在哪里”之类的短信开始活动，该怎么做？请提供任何信息。我认为 SMSReceiver BroadcastReceiver 方向正确，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:38:25.083

看看这家伙截取短信的示例代码[http://imran-android-sms.blogspot.com/2011/03/receive-sms-on-android.html#more](http://imran-android-sms.blogspot.com/2011/03/receive-sms-on-android.html#more)

从那里你只想激发你的新活动的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:47:44.480

您需要在 AndroidManifest.xml 中注册一个广播接收器以接收 SMS_RECIVERD 广播：

```
<receiver android:name=".SMSReceiver">
        <intent-filter>
            <action android:name=
                "android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver> 
```

在 AndroidManifest 中添加权限：

```
<uses-permission android:name="android.permission.RECEIVE_SMS"/> 
```

在您的广播接收器代码中启动您的应用程序：

```
public class SMSReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){      
   //context.startService(new Intent(context, YourService.class));

   //Start activity as:
    Intent intent24 = new Intent(Intent.ACTION_MAIN).addCategory(
    Intent.CATEGORY_LAUNCHER).setClassName("YOUR_PACKAGE_NAME",
    "com.YOUR_PACKAGE_NAME..YOURACTIVITY_NAME").addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
    .addFlags(Intent.FLAG_FROM_BACKGROUND).setComponent(new ComponentName("YOUR_PACKAGE_NAME",
    "com.YOUR_PACKAGE_NAME..YOURACTIVITY_NAME"));
    context.startActivity(intent24);
   }
 }
} 
```

**注意：**要从后台启动 Activity，您需要设置`Intent.FLAG_ACTIVITY_NEW_TASK`和`Intent.FLAG_FROM_BACKGROUND`标记意图以从后台启动 Activity。

# html - 当锚标记在块元素中首先出现时，ie8 中的奇怪行为

> ID：10725739
> 
> 赞同：3
> 
> 时间：2012-05-23T18:27:54.843
> 
> 标签：html, internet-explorer-8, anchor, block

在 ie8 中，当我在块元素中首先有一个锚时，您可以将鼠标悬停在块元素的末尾并链接到该锚。这很烦人，我不知道如何解决它。在以下示例中，我删除了所有 javascript 和 css。

```
<p><a href="http://www.gamefaqs.com/-/199180-">Vandal Hearts II</a> is a turn-based strategy RPG for PlayStation that was released in 1999.</p> 
```

[（示例图像）](http://www.heresmary.com/Untitled.png)

更多信息：当我在它之前放置一个角色时，它没有这种行为。我尝试使用空格并将代码放在不同的行等上，但都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:03:56.997

它必须是`p`标签吗？[正如你在这个 Fiddle HERE](http://jsfiddle.net/gmUe3/)中看到的那样，作为一个`span`标签会更适合这里，而且它解决了这个问题。

# jquery - jQuery 自定义小部件：如何包含 html 模板？

> ID：10725742
> 
> 赞同：2
> 
> 时间：2012-05-23T18:28:07.310
> 
> 标签：jquery, templates, jquery-plugins, jquery-widgets

我必须在这里遗漏一些基本的东西，但是在开发自定义 jQuery 小部件时，我们如何像使用 dojo 自定义小部件一样将 html 模板作为小部件的一部分包含在内？目前，我的 jQuery 自定义小部件正在 JavaScript 中生成所需的 html，我正在尝试将其放入 html 模板并将其包含在自定义小部件中。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:40:32.360

你可以看看[Handlebars.js](http://handlebarsjs.com/)。这是一个 jQuery 模板插件，语法很简单

`script`用标签声明一个模板

```
 <script id="entry-template" type="text/x-handlebars-template">
    <div class="entry">
        <h1>{{title}}</h1>
        <div class="body">
           {{body}}
        </div>
    </div>
  </script> 
```

然后像这样获取并编译该模板

```
 var source   = $("#entry-template").html();
  var template = Handlebars.compile(source); 
```

`palceholders`然后你可以通过像这样传递数据来呈现该模板

```
 var context = {title: "My New Post", body: "This is my first post!"}
 var html    = template(context); 
```

在此之后，您将拥有可以在任何 jQuery DOM 操作方法中使用的 ful `html`in变量，例如.`html``$.append`

[工作小提琴](http://jsfiddle.net/joycse06/4BLgj/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:38:45.103

你真的不需要插件或任何花哨的东西来做你想做的事。只需使用适当的标记和所需的任何 jQuery 调用创建 html 文件，即可轻松创建小部件。例如，您可以像这样创建一个主页：

```
<html>
<head>
<!-- reference jquery library here -->
<script>
    $(document).ready(function() {
        $("#wdg1").load("mywidget.html");
        $("#wdg2").load("mywidget.html");
    });
</script>
</head>
<body>
<div id="wdg1"></div>
<div id="wdg2"></div>
</body>
</html> 
```

然后您的`mywidget.html`文件将如下所示：

```
<script>
    $(document).ready(function() {
        alert("Widget loaded.");
        // run whatever code you want here.
    });
</script>
<span>This span was loaded as a widget.</span> 
```

# php - Javascript 代码在没有警告的情况下无法运行，否则它可以完美运行

> ID：10725746
> 
> 赞同：0
> 
> 时间：2012-05-23T18:28:24.690
> 
> 标签：php, javascript, html5-audio

在提出问题之前，我已经尝试过真正查看这个问题，但看起来我在这里陷入困境，想看看是否有人知道这个问题的明确答案。我见过一两个类似的问题，但他们似乎没有指出我的问题，或者至少我不明白他们的目的。

我正在开发一个 RPG 系统音频 PHP 函数，该函数在被调用时播放音乐，如果用户没有静音音乐选项，它会使用音频标签。（在函数 $song 中是第一个参数中的歌曲。）现在，如果调用此函数以使 resume 为真，那么它使用一些 javascript。请原谅代码，因为它有点乱（对我来说），但这是包含 javascript 代码的以下代码：

```
function playmusic($song, $resume=false, $loop=true)
 {
  global $baseurl, $loggeduser;

 if ($resume == true)
  {
   $buttons = "
    <button onclick=\"resetplaytime()\" type=\"button\">Reset</button>
    <button onclick=\"alertplaytime()\" type=\"button\">Alert Time</button>";
   $resume = "
    <script type=\"text/javascript\">
      var curmusic_$song = document.getElementById(\"music_$song\");
      var musictime = getcookie(\"musicplaytime_$song\");

     if (musictime != null && musictime != \"\")
      {
       alert(musictime);
       curmusic_$song.currentTime = musictime; 
      }

      window.onload=settimecookie();

     function getcookie(c_name)
      {
       var i,x,y,ARRcookies=document.cookie.split(\";\");
      for (i=0;i<ARRcookies.length;i++)
       {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf(\"=\"));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf(\"=\")+1);
        x=x.replace(/^\s+|\s+$/g,\"\");
       if (x==c_name)
        {
         return unescape(y);
        }
       }
      }

     function settimecookie()
      {
       var playtime = curmusic_$song.currentTime;
      if (playtime != null && playtime != \"\")
       {
        document.cookie = 'musicplaytime_$song=' + playtime;
       }

       setTimeout(\"settimecookie()\", 50);
      }

     function alertplaytime()
      {
       alert(musictime);
      }

     function resetplaytime()
      {
       curmusic_$song.currentTime=0;
      }

    </script>";
  }

 if ($loop == true)
  {
   $songloop = " loop=\"true\"";
  }

 if ($loggeduser['mutemusic'] == 0)
  {
   return "
    </table>
    $buttons
    <audio id=\"music_$song\" autoplay=\"true\"$songloop preload=\"true\">
      <source src=\"$baseurl/boardfiles/effects/$song.ogg\" type=\"audio/ogg\" />
      <source src=\"$baseurl/boardfiles/effects/$song.mp3\" type=\"audio/mp3\" />
    </audio>
    $resume
    <table class=\"brdr\" cellpadding=\"0\">";
  }
 } 
```

现在，如果我将警报从将音频标签的播放时间设置为 cookie 值的循环中取出，整个脚本将不起作用（因为没有做任何事情），除非您使用按钮直接调用其中一个函数然后功能有效。

我已经尝试了一些方法，使其成为一个函数并直接调用它（它似乎只适用于 onclick 事件，但如果你希望它在 onload 或某些自动事件时运行，那么它会失败。），稍后在函数（连同 settimecookie() 的 onload，因为它必须在此之后，因为它将 cookie 设置为当前的播放时间），现在我没有想法了。

我希望能得到答案，因为我确信这段代码可以帮助那些试图获得某种不笨重或使用不便的恢复音频功能的人。:) 我一直在努力寻找解决方案，但从未如此接近。感谢您的阅读。如果您想要整个 PHP 函数，那么我也会展示它，但是除了两个调试按钮（重置和警报 cookie）和带有 id 'music_$song' 的音频标签之外，真的什么都看不到。

**编辑：为了清楚起见，在代码中，双引号前有转义，因为 javascript 是在 PHP 函数中返回的。**

编辑2：现在加粗了这个编辑，因为有些人错过了它。此外，我还添加了 PHP 部分。

最后编辑：我现在似乎想出了一些让我更接近我希望实现的东西。我将上面的代码更改为以下代码，它对我来说完美无缺。

```
function playmusic($song, $resume=false, $loop=true)
 {
  global $baseurl, $loggeduser;

 if ($resume == true)
  {
   $resume = "
    <!--
    <button onclick=\"resetplaytime();\" type=\"button\">Reset</button>
    <button onclick=\"alertplaytime();\" type=\"button\">Alert Time</button>
    <button onclick=\"settimecookie();\" type=\"button\">Start Cookie tracking</button>
    -->

    <script type=\"text/javascript\">
     function getcookie(c_name)
      {
       var i,x,y,ARRcookies=document.cookie.split(\";\");
      for (i=0;i<ARRcookies.length;i++)
       {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf(\"=\"));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf(\"=\")+1);
        x=x.replace(/^\s+|\s+$/g,\"\");
       if (x==c_name)
        {
         return unescape(y);
        }
       }
      }

     function settimecookie()
      {
       var curmusic_$song = document.getElementById(\"music_$song\");
       var playtime = curmusic_$song.currentTime;
      if (playtime != null && playtime != \"\")
       {
        document.cookie = \"musicplaytime_$song=\" + playtime;
       }

       setTimeout(\"settimecookie()\", 50);
      }

     function resumeplaytime()
      {
       var curmusic_$song = document.getElementById(\"music_$song\");
       var musictime = getcookie(\"musicplaytime_$song\");
      if (musictime != null && musictime != \"\")
       {
        curmusic_$song.currentTime = musictime; 
       }
       curmusic_$song.play(); 

       settimecookie();
      }

      window.onload=resumeplaytime;

     function alertplaytime()
      {
       var musictime = getcookie(\"musicplaytime_$song\");
       alert(musictime);
      }

     function resetplaytime()
      {
       var curmusic_$song = document.getElementById(\"music_$song\");
       curmusic_$song.currentTime=0;
      }

    </script>";
  }
 else
  {
   $autoplay = "autoplay=\"true\"";
  }

 if ($loop == true)
  {
   $songloop = " loop=\"true\"";
  }

 if ($loggeduser['mutemusic'] == 0)
  {
   return "
    </table>
    $resume
    <audio id=\"music_$song\" $autoplay$songloop preload=\"true\">
      <source src=\"$baseurl/boardfiles/effects/$song.ogg\" type=\"audio/ogg\" />
      <source src=\"$baseurl/boardfiles/effects/$song.mp3\" type=\"audio/mp3\" />
    </audio>
    <table class=\"brdr\" cellpadding=\"0\">";
  }
 } 
```

它现在似乎工作得很好。我改变了一些东西，现在可以按我的意愿工作。谢谢您的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:41:36.913

看起来您尝试`document.getElementById("music_$song")`在 DOM 可用之前执行。为此使用 onload 处理程序。

然而，我找不到任何调用`alert()`或`alertplaytime()`让那个等待 - 尤其是不像你所描述的那样在循环中。

另外，线路`window.onload=settimecookie();`有问题。`settimecookie`执行时不返回事件处理函数。

# php - php脚本验证错误

> ID：10725748
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:28:27.820
> 
> 标签：php, w3c-validation

我在 xhtml 文件中使用 php 脚本时遇到问题 从 W3C 检查验证时，它一直显示这个烦人的消息：

```
character "<" is the first character of a delimiter but occurred as data 
```

这是我的代码

```
 <tr>
        <td scope="row"><?php echo $prod_id; ?></td>
        <td><?php echo $prod_name; ?></td>
        <td><?php echo $prod_date; ?></td>
        <td><?php echo $prod_price; ?></td>
        <td> 
            <form action="./prod_edit.php" method="get" >
                <input type="hidden" name="query_access" value="1" />
                <input type="hidden" name="product_id" value="<?php echo $prod_id; ?>" />
                <input type="hidden" name="product_name" value="<?php echo $prod_name; ?>" />
                <input type="hidden" name="product_date" value="<?php echo $prod_date; ?>" />   
                <input type="hidden" name="product_price" value="<?php echo $prod_price; ?>" />
                <input type="submit" name="edit_button" value="Edit"  />
            </form>
        </td>
        <td> 
            <form action="./prod_delete.php" method="get">
                <input type="hidden" name="query_access" value="1" />
                <input type="hidden" name="product_id" value="<?php echo $prod_id; ?>" />                  
                <input type="hidden" name="product_name" value="<?php echo $prod_name; ?>" />
                <input type="hidden" name="product_date" value="<?php echo $prod_date; ?>" />   
                <input type="hidden" name="product_price" value="<?php echo $prod_price; ?>" />
                <input type="submit" name="delete_button" value="Delete"  />
            </form>
    </td>
</tr> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:31:41.630

您正在验证错误的代码。您的最终代码不会在内部未执行 php。据我所知，用示例 echo 替换 php 部分`$prod_id`应该会给您想要的结果。

你想验证**浏览器得到**了什么，而不是服务器做了什么。

# wordpress - Zend 框架已安装。Wordpress 安装在子文件夹中。如何将 Zend 用户身份验证转移到 WP 页面？

> ID：10725752
> 
> 赞同：2
> 
> 时间：2012-05-23T18:28:44.180
> 
> 标签：wordpress, zend-framework, authentication

我正在一个安装了 Zend 框架的网站上工作。Zend 控制用户身份验证（登录、注销、他们是谁等）。

我想将 Wordpress 安装到子文件夹中，并在查看由 Wordpress 创建的页面/帖子时访问正确的用户数据（用户名、登录/退出状态等）。

我需要采取哪些步骤来做到这一点？

注意：我之前的程序员安装并使用过 Zend，我对 Zend 很熟悉，但不是很了解细节，所以您可能需要用更外行的术语来解释。我已经使用过 Wordpress 很多次并且非常了解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T06:07:57.080

在 Wordpress 中的某个地方（您可能知道在哪里，因为您熟悉 Wordpress），您将使用以下 Zend Framework 代码：

```
$auth = Zend_Auth::getInstance();
if ($auth->hasIdentity()) {
  // Identity exists; get it
  $identity = $auth->getIdentity();
} 
```

上面的代码正在检查会话命名空间并确定是否已存储身份。如果存储了身份，则表明有人已通过身份验证，您可以检索该授权身份。

上面的代码假设您可以从 wordpress 加载带有 Zend_ 命名空间前缀的类（autoload、include_path 等）。

# forms - Excel中用VBA访问表单控件的事件过程

> ID：10725754
> 
> 赞同：0
> 
> 时间：2012-05-23T18:28:46.213
> 
> 标签：forms, events, vba, global

有没有办法为窗体控件定义事件过程，例如 ActiveX 对象的情况？

我有一个 GUI，当前由用户添加/删除 ActiveX 命令按钮，但在尝试将项目添加到全局集合并添加每个按钮时遇到[错误 91 。](http://msdn.microsoft.com/en-us/library/aa264506%28v=vs.60%29.aspx)我最好的猜测是因为[这种令人讨厌的现象](http://www.pcreview.co.uk/forums/dynamically-adding-activex-controls-via-vba-kills-global-vba-heap-t3763287.html)。在项目的当前状态下，如果我能够定义它们的事件过程，我最好的选择是切换到使用表单控制按钮。如果没有，我可能需要以某种方式保存全局变量并在操作 ActiveX 控件对象后将它们读回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:01:44.017

如果您只想添加按钮并捕获点击，您可以为它们分配一个通用宏，并根据按钮的名称切换执行的操作（您将在创建它时设置它，并且可以通过`Application.Caller`in访问被调用的过程）

```
Sub AddButtons()

    With ActiveSheet.Buttons.Add(100, 100, 50, 50)
        .Name = "button1"
        .OnAction = "ClickHandler"
    End With
    With ActiveSheet.Buttons.Add(200, 100, 50, 50)
        .Name = "button2"
        .OnAction = "ClickHandler"
    End With

End Sub

Sub ClickHandler()
    Dim bName As String

    bName = Application.Caller
    Select Case bName
        Case "button1": MsgBox "Clicked First button"
        Case "button2": AnotherSub 
    End Select

End Sub 
```

# opencl - Opencl：GPU执行时间始终为零

> ID：10725758
> 
> 赞同：0
> 
> 时间：2012-05-23T18:28:51.937
> 
> 标签：opencl, gpu, gpgpu, pyopencl

我正在尝试打印 GPU 上某些功能的执行时间。但是 GPU 上的时间总是为 0。此外，当我在下面选择 CL_DEVICE_TYPE_CPU 时，它工作正常。

```
 errcode = clGetDeviceIDs( platform_id, CL_DEVICE_TYPE_CPU, 1, &device_id, &ret_num_devices); 
```

这工作正常，并显示非零值的执行时间，但如果我选择 CL_DEVICE_TYPE_GPU，那么它总是显示 0，不管总数。数据点和线程。请注意，在这两种情况下（CL_DEVICE_TYPE_CPU 和 CL_DEVICE_TYPE_GPU），我都以相同的方式打印执行时间。那是我的主机代码，我的内核代码在这两种情况下都是相同的（这就是 openCL ！）。以下是部分代码部分：

```
 // openCL code to get platform and device ids
errcode = clGetPlatformIDs(1, &platform_id, &ret_num_platforms);
  errcode = clGetDeviceIDs( platform_id, CL_DEVICE_TYPE_GPU, 1, &device_id, &ret_num_devices);

// to create context

   clGPUContext = clCreateContext( NULL, 1, &device_id, NULL, NULL, &errcode);
   //Create a command-queue
   clCommandQue = clCreateCommandQueue(clGPUContext, 
              device_id, CL_QUEUE_PROFILING_ENABLE, &errcode);

// Setup device memory
   d_instances= clCreateBuffer(clGPUContext,CL_MEM_READ_ONLY |    
  CL_MEM_COPY_HOST_PTR,mem_size_i,instances->data, &errcode);
  d_centroids = clCreateBuffer(clGPUContext,CL_MEM_READ_WRITE,mem_size_c, NULL, &errcode);
  d_distance = clCreateBuffer(clGPUContext,CL_MEM_READ_WRITE,mem_size_d,NULL, &errcode);
// d_dist_X = clCreateBuffer(clGPUContext,CL_MEM_READ_WRITE,mem_size4,NULL, &errcode);
//d_dist_Y = clCreateBuffer(clGPUContext,CL_MEM_READ_WRITE,mem_size4,NULL, &errcode);

//to build program
clProgram = clCreateProgramWithSource(clGPUContext,1, (const char **)&source_str,(const 
  size_t*)&source_size, &errcode);

  errcode = clBuildProgram(clProgram, 0,NULL, NULL, NULL, NULL);

  if (errcode == CL_BUILD_PROGRAM_FAILURE) 
{
    // Determine the size of the log
    size_t log_size;
    clGetProgramBuildInfo(clProgram, device_id, CL_PROGRAM_BUILD_LOG, 0, NULL, 
  &log_size);

    // Allocate memory for the log
    char *log = (char *) malloc(log_size);

    // Get the log
    clGetProgramBuildInfo(clProgram, device_id, CL_PROGRAM_BUILD_LOG, log_size, log, 

 NULL);

    // Print the log
    printf("%s\n", log);
}
clKernel = clCreateKernel(clProgram,"distance_finding", &errcode);

// Launch OpenCL kernel
size_t localWorkSize[1], globalWorkSize[1];
if(num_instances >= 500)
{
    localWorkSize[0] = 500;
    float block1=num_instances/localWorkSize[0];
    int block= (int)(ceil(block1));
    globalWorkSize[0] = block*localWorkSize[0];
}
else
{
    localWorkSize[0]=num_instances;
    globalWorkSize[0]=num_instances;
}

int iteration=1;
while(iteration < MAX_ITERATIONS)
{
    errcode = clEnqueueWriteBuffer(clCommandQue,d_centroids , CL_TRUE, 0, 
 mem_size_c, (void*)centroids->data, 0, NULL, NULL);
    errcode = clEnqueueWriteBuffer(clCommandQue,d_distance , CL_TRUE, 0, mem_size_d, 

 (void*)distance->data, 0, NULL, NULL);

    //set kernel arguments
    errcode = clSetKernelArg(clKernel, 0,sizeof(cl_mem), (void *)&d_instances);
    errcode = clSetKernelArg(clKernel, 1,sizeof(cl_mem), (void *)&d_centroids);
    errcode = clSetKernelArg(clKernel, 2,sizeof(cl_mem), (void *)&d_distance);
    errcode = clSetKernelArg(clKernel, 3,sizeof(unsigned int), (void *)

  &num_instances);
    errcode = clSetKernelArg(clKernel,4,sizeof(unsigned int),(void *)&clusters);
    errcode = clSetKernelArg(clKernel,5,sizeof(unsigned int),(void *)&dimensions);

    errcode = clEnqueueNDRangeKernel(clCommandQue,clKernel, 1, NULL, 
  globalWorkSize,localWorkSize, 0, NULL, &myEvent);

    clFinish(clCommandQue); // wait for all events to finish
    clGetEventProfilingInfo(myEvent, CL_PROFILING_COMMAND_START,sizeof(cl_ulong), 

 &startTime, NULL);
    clGetEventProfilingInfo(myEvent, CL_PROFILING_COMMAND_END,sizeof(cl_ulong), 

 &endTime, NULL);
    kernelExecTimeNs = endTime-startTime;
    gpu_time+= kernelExecTimeNs;

    // Retrieve result from device
    errcode = clEnqueueReadBuffer(clCommandQue,d_distance, CL_TRUE, 0, 
 mem_size_d,distance->data, 0, NULL, NULL); 
```

以毫秒为单位打印时间

```
printf("\n\n Time taken by GPU is %llu ms",gpu_time/1000000); 
```

如果我计算 GPU 时序的方式是错误的，为什么它会在 CPU 上工作（通过更改为 CL_DEVICE_TYPE_CPU）？这里有什么问题？

编辑：

**系统信息**

AMD APP SDK 2.4 AMD ATI FirePro GL 3D，拥有 800 个内核

**内核**

```
 #pragma OPENCL EXTENSION cl_khr_fp64:enable
double distance_cal(__local float* cent,float* data,int dimensions)
{
float dist1=0.00;
for(int i=0;i<dimensions;i++)
    dist1 += ((data[i]-cent[i]) * (data[i]-cent[i]));
double sq_dist=sqrt(dist1);
return sq_dist;
}
void fetch_col(float* data,__constant float* x,int col,int dimension,int len)
{
//hari[i]=8;
for(int i=0;i<dimension;i++)
{
data[i]=x[col];
    col=col+len;
}
}
void fetch_col_cen(__local float* data,__global float* x,int col,int dimension,int len)
{
//hari[i]=8;
for(int i=0;i<dimension;i++)
{
data[i]=x[col];
    col=col+len;
}
}

 __kernel void distance_finding(__constant float* data,__global float* cen,__global float* 
 dist,int       inst,int clus,const int dimensions)
  {
int idx=get_global_id(0);
float data_col[4];
fetch_col(  data_col,data,idx,dimensions,inst);

for(int i=0;i<clus;i++)
{
    int k=i*inst; // take each dimension value for each cluster data

    __local float cent[4];
    barrier(CLK_LOCAL_MEM_FENCE | CLK_GLOBAL_MEM_FENCE);
    fetch_col_cen(cent,cen,i,dimensions,clus);

    dist[idx+k]=distance_cal(cent,data_col,dimensions);// calculate distance wrt     
 each data n each centroid

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:35:22.707

`clEnqueueNDRangeKernel()`如果它使用 GPU，则它是异步的，因此您只能看到将请求排入队列而不是执行它所花费的时间。

也就是说，我可能是错的，但我通常编写 c++ 代码来进行计时并将指令放在`start_time`指令之前和`end_time`之后

```
clFinish(cmd_queue); 
```

就像你对 C++ 计时代码所做的那样，如果你确定你的 GPU 不应该在`0`几秒钟内完成，那将是一个很好的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:40:38.787

一个简单的检查方法是在内核中引入异常长的操作。如果在实际执行中有明显的滞后时 THAT 显示为零 - 那么您就有了答案。

也就是说，我[相信](http://forums.developer.nvidia.com/devforum/discussion/5256/instrumented-driver-for-profiling-on-linux/p1)（即使指定的线程适用于 Linux，它也可能在 Windows 上也适用）您可能需要安装检测驱动程序才能让系统写入性能计数器。您还可以在 nVidia 的 OpenCL 实现中使用 CUDA 分析器，因为它位于 CUDA 之上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T13:52:20.437

改成

```
clFinish(clCommandQue); // wait for all events to finish

// add this after clFinish()
// Ensure kernel execution is finished
clWaitForEvents(1 , &myEvent);

..

double gpu_time = endTime-startTime;

..

printf("\n\n Time taken by GPU is %0.3f ms", gpu_time/1000000.0); 
```

# mysql - 数据库 read_timeout 和 write_timeout 是 ActiveRecord 独有的还是 mysql 原生的？

> ID：10725759
> 
> 赞同：1
> 
> 时间：2012-05-23T18:28:58.307
> 
> 标签：mysql, activerecord, timeout

ActiveRecord 允许您配置数据库 read_timeout 和 write_timeout 值，例如：

```
production:
  adapter: mysql
  encoding: utf8
  database: mydb
  pool: 5
  username: myuser
  password: mypass
  host: myhost
  write_timeout: 2
  read_timeout: 10 
```

read_timeout 和 write_timeout 是 ActiveRecord 独有的，还是 mysql 规范的一部分？我知道 mysql 有[innodb_lock_wait_timeout](http://dev.mysql.com/doc/refman/5.0/en/innodb-parameters.html#sysvar_innodb_lock_wait_timeout)的概念，但我不认为这与查询超时相同。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-13T11:57:32.253

我从未使用过 mysql gem。但我认为您可以像这样看到 ActiveRecord 使用的 mysql 变量。

```
> ActiveRecord::Base.connection.execute('show variables like "%timeout%"').to_a
=> [["connect_timeout", "10"],
 ["delayed_insert_timeout", "300"],
 ["innodb_flush_log_at_timeout", "1"],
 ["innodb_lock_wait_timeout", "50"],
 ["innodb_rollback_on_timeout", "OFF"],
 ["interactive_timeout", "28800"],
 ["lock_wait_timeout", "31536000"],
 ["net_read_timeout", "30"],
 ["net_write_timeout", "60"],
 ["rpl_stop_slave_timeout", "31536000"],
 ["slave_net_timeout", "3600"],
 ["wait_timeout", "2147483"]] 
```

# php - Zend 自定义模块路由

> ID：10725764
> 
> 赞同：0
> 
> 时间：2012-05-23T18:29:32.450
> 
> 标签：php, zend-framework, module, routes

我有这个设置：

```
 application
    ---admin
    -----controllers
    -------IndexController.php
    ---public
    -----controllers
    ---modules
    -----users
    -------controllers
    -----pages
    -------controllers 
```

我想要这条路线：

```
www.domain.com/admin/modulename/controller/action/ 
```

或者如果模块不存在我使用管理控制器

```
www.domain.com/admin/controller/action/ 
```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:39:47.810

在您的引导文件中编写以下代码：

```
$router = Zend_Controller_Front::getInstance()->getRouter();
if($moduleName){
$route = new Zend_Controller_Router_Route(
                  ':module/:controller/:action/',
                  array(
                      'controller' => $ControllerName,
                      'module' => '$moduleName',
                      'action'     => $ActionName
                  )
              );
}else{
$route = new Zend_Controller_Router_Route(
                  ':controller/:action/',
                  array(
                      'controller' => $ControllerName,
                      'action'     => $ActionName
                  )
              );
}

$router->addRoute('default', $route); 
```

# design-patterns - 并行来源/材料/论文/书籍/博客？

> ID：10725765
> 
> 赞同：0
> 
> 时间：2012-05-23T18:29:38.010
> 
> 标签：design-patterns, parallel-processing, transactional

我想开始学习并行性。适当地，

1.  编写实现并行性的程序的方法
2.  为多核架构编写代码的问题
3.  并行设计模式
4.  多核架构的程序优化技术
5.  还有一些关于事务内存的事情[在搜索并行性时，我遇到了这个术语]。

我正在收集资源来做同样的事情。这是我发现的一些东西：

[http://www.cse.wustl.edu/~schmidt/patterns-ace.html](http://www.cse.wustl.edu/~schmidt/patterns-ace.html)
[并行编程模式](https://rads.stackoverflow.com/amzn/click/com/0321228111)

只是请求分享您的资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T13:32:19.057

您应该首先了解不同的并行架构是如何工作的。互联网上有大量可免费获得的优质材料。

## 教程和课程资料

**劳伦斯利弗莫尔国家实验室**(LLNL) 提供了一套很好的[HPC 教程](https://computing.llnl.gov/?set=training&page=index)。

**爱丁堡并行计算中心**（EPCC）还免费提供大量[课程培训资料](http://www.epcc.ed.ac.uk/library/training/)。

我将此答案保留为社区 wiki，因此任何人都可以修改它并添加其他来源。

# php - 用于解析 html 标签的正则表达式的替代方法 - 你如何在纯代码中做到这一点？

> ID：10725766
> 
> 赞同：0
> 
> 时间：2012-05-23T18:29:40.373
> 
> 标签：php, regex

最近阅读了这篇[SO Post](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454) ...第一个答案是 nutz。基本上，由于乔姆斯基语法类型，大型模型在理论上是不可能的。

它有什么替代方案？我不想使用像 DOMDocument 这样的库对象，我想了解使用纯代码执行此操作的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:31:01.847

如果您不想使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)（尽管我敦促您再次查看它，它并没有那么糟糕 - 特别是与[DOMXPath](http://php.net/manual/en/class.domxpath.php)结合使用），您也可以使用[PHPQuery](http://code.google.com/p/phpquery/)或[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。

# ruby - 安装 Jekyll 时出错 - 本机扩展构建

> ID：10725767
> 
> 赞同：65
> 
> 时间：2012-05-23T18:29:41.283
> 
> 标签：ruby, macos, rubygems, installation, jekyll

我在安装 jekyll 时遇到了一些问题。无法完全弄清楚如何修补丢失的链接。我认为这是对 Ruby 的更新，但 RVM 在安装 ruby​​ 的替代版本时也遇到了问题。

这是完整的帖子：

```
$ sudo gem install jekyll    

ERROR:  Error installing jekyll:
ERROR: Failed to build gem native extension.

    /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
mkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/fast-stemmer-1.0.1 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/fast-stemmer-1.0.1/ext/gem_make.out 
```

这是否意味着我需要通过 rvm 更新我正在使用的 ruby​​ 版本？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-07-28T09:08:07.140

# Ubuntu

1.  `sudo apt-get install ruby-dev`
2.  `gem install jekyll`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T20:58:58.480

您的问题是您的系统不知道 make 位于何处，或者您没有安装它。解决此问题的最简单方法（以及您在尝试启动和运行 ruby​​ 系统时可能会遇到的其他问题）是安装 xcode。

您可以在[http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12](http://itunes.apple.com/us/app/xcode/id497799835?ls=1&mt=12)获得狮子。或者它与您的计算机一起以 CD 的形式提供早期版本。

如果您使用的是 Lion，请参阅下面的评论以获取如何在 Lion 上安装开发人员工具的链接。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-06-10T13:41:42.267

我在 Ubuntu 上遇到了同样的错误，[这](https://github.com/jekyll/jekyll-help/issues/209)帮助我解决了问题。

你必须安装 ruby​​-dev

```
apt-get install ruby-dev 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-07T10:14:05.170

如果您安装了 XCode 并且**仍然**缺少命令行工具，请转到终端并

`xcode-select --install`

它会提示您安装这些工具。之后，只需按照[SrBlanco 的](https://stackoverflow.com/a/23298734/4008608)回答即可。这为我解决了问题。

祝你好运。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-17T04:33:18.327

需要安装“make”。我正在使用 Ubuntu 12.10。 `sudo apt-get install make` 应该适用于任何基于 Debian 的发行版。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-25T16:44:33.037

注意：此问题也出现在预装 Mavericks 的较新 MacBook Pro 机型上。我用我自己的完全不涉及 Xcode 的解决方案更新了另一篇文章。当我拿到机器时，我的系统已经安装了 Xcode 开发者工具。

[错误：安装 jekyll 时出错：错误：无法构建 gem 原生扩展](https://stackoverflow.com/questions/22460117/error-error-installing-jekyll-error-failed-to-build-gem-native-extension/23298607#23298607)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-03-17T15:26:42.357

如果您还没有安装 Xcode（[https://developer.apple.com/xcode/](https://developer.apple.com/xcode/)），请按照所述安装 Xcode。**另外**，您需要命令行工具。

打开 Xcode。去`Preferences > Downloads > Install Command Line Tools`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-20T17:27:22.757

为 Xcode 安装命令行工具解决了我在 Mac 上的问题

`xcode-select --install`.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-27T09:34:44.730

*   sudo apt-get install ruby​​-dev
*   须藤宝石安装jekyll

希望这会有所帮助，它适用于我。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-02-14T17:06:50.500

我在尝试安装 Jekyll 时遇到了同样的错误，此链接中的以下步骤对我有帮助。以防万一其他人遇到这个！

[http://davidensinger.com/2013/03/installing-jekyll/](http://davidensinger.com/2013/03/installing-jekyll/)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-12-25T12:15:15.567

我在我的 Fedora 22 设置中遇到了同样的问题。我已经`ruby`安装但没有`ruby-devel`。安装`ruby-devel`为我解决了这个问题。

```
dnf install -y ruby-devel 
```

对于旧系统：

```
yum install -y ruby-devel 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-08-22T15:42:03.917

# 我在 Ubuntu/Linux Mint 上关注了这个

1.  `sudo apt install build-essential`
2.  `sudo apt install ruby-dev`
3.  `sudo gem install jekyll`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-18T20:25:43.890

附录：您现在可以从Mountain Lion 上**的 App Store 安装 XCode 。**这个过程是透明的，而且非常快。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-08-05T16:25:18.103

我和你有同样的问题。

我使用的是 Mac OS X 10.9 开发预览版，我已经安装了 gcc 和 Xcode。

但我的 Xcode 版本是 4.6。

然后我安装 Xcode 5.0

之后，我`sudo gem install jekyll`再次输入终端。然后它工作。

希望它可以帮助某人。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-10T01:55:21.720

安装 Xcode 并转到 perferencs > 下载 > 安装命令行工具 WORKS！

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-01-26T19:05:46.040

同样的问题在 Debian 上，我忘了运行这个命令：

```
~/.rvm/scripts/rvm 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-03-23T22:29:02.377

所有这些答案都对我不起作用。

如果您正在 ubuntu 14.04 上寻找解决方案，请执行以下操作：

```
sudo apt-get install ruby1.9.1-dev zlib1g-dev nodejs
sudo gem install jekyll -v 2.5.3 
```

不幸的是，nodejs 是必需的，因为 Jekyll 中的一个错误强制运行时 JS 引擎的存在，即使它不需要。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-02-11T01:54:06.330

对于 Ubuntu，这对我有帮助：

```
apt-get install libffi-dev 
```

一般建议是按照显示的错误原因进行操作，希望您会获得一个日志文件，其中第一行建议应该安装哪个包，在我的情况下：

```
To see why this extension failed to compile, please check the mkmf.log which can be found here:

  /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/ffi-1.9.21/mkmf.log 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-04-29T02:38:49.013

# 苹果系统

我对这个问题的解决方案

1.  安装 xcode
2.  `xcode-select --install`在命令行中输入
3.  `sudo gem install jekyll`在命令行中输入

PS：是这个问题的两个答案的组合。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-02-05T14:19:17.277

您缺少 ruby​​-dev 文件，请继续运行此命令 -`sudo apt-get install ruby-dev`

希望这可以帮助！！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-02-14T03:58:15.827

我在我的 macOS(10.14.2) 上遇到了同样的问题，原因可能是：

> 显然，在 OSX el Capitan 中，有一个新的安全功能可以防止您修改名为 Rootless 的系统文件。

我的解决方案是使用 rvm：

1.  [使用 RVM 在 Mac OS X 上安装 ruby](https://usabilityetc.com/articles/ruby-on-mac-os-x-with-rvm/)
2.  宝石安装 jekyll

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-06-05T09:05:28.077

在 Windows 上我有这个问题

我实际上安装了 ruby​​ 的版本 ruby​​installer-devkit-2.6.3-1-x64

我已经完全删除了 ruby​​ 并安装了 ruby​​installer-devkit-2.5.5-1-x64

并在powershell上发出以下命令

```
gem install bundler
gem install jekyll 
```

这次没有发现任何错误

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-09-29T02:45:36.053

我遇到了这个问题，最重要的是，发生错误是因为我没有同意 xcode 中的一些更新的服务条款。运行以下命令对我有用。去搞清楚。

```
sudo xcodebuild -license accept 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-11-11T21:09:29.117

对我来说，我必须升级自制软件并安装`rbenv`到最新的 ruby​​ 版本。之后，我按照[jekyll 网站上](https://jekyllrb.com/docs/installation/macos/)的说明进行操作。我的操作系统是 Catalina 2019，我无法安装 Xcode，它还不兼容！

> 您必须在您的路径中设置路径，`.bash_profile`以确保它`rbenv`在您重新启动终端时初始化。

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

然后

```
$ rbenv version
2.2.3 (set by /Users/mislav/.rbenv/version)
$ rbenv shell
rbenv: no shell-specific version configured 
```

希望有帮助！

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-05-21T22:16:07.447

# 这是（唯一？）在 macOS 上安装 Jekyll 的可靠且简单的方法

1.  安装 UTM
2.  安装 Ubuntu 服务器
3.  [在https://jekyllrb.com/docs/installation/ubuntu/](https://jekyllrb.com/docs/installation/ubuntu/)使用 Ubuntu 说明安装 Jekyll
4.  在虚拟机设置中转发端口 22 (22->localhost->22)
5.  在 macOS 主机上使用 VS Code
6.  安装远程 SSH
7.  连接到 USER@localhost
8.  将 Mac 上的文件夹拖放到 VS Code 中（这会将文件传输到远程）
9.  为 4000 启用端口转发（VS Code 的底部栏）
10.  在您的网站上工作
11.  在文件资源管理器上右键单击您的网站，然后单击下载

如果您还没有完成这些步骤，您可能会很高兴：

1.  Ubuntu 从 GitHub 导入你的公共 SSH 密钥
2.  VS Code 神奇地处理文件的传入和传出
3.  VS Code 神奇地将您的 VS Code 扩展安装到远程服务器上，并允许在远程主机上进行文件搜索

# c++ - 在没有 static_cast<> 的派生类中重载 std::ostream& operator<<

> ID：10725772
> 
> 赞同：2
> 
> 时间：2012-05-23T18:30:02.317
> 
> 标签：c++

这是在`ostream& operator<<`不复制基类代码的情况下为派生类重载的唯一方法吗？演员表不是应该避免的吗？

我没有看到任何其他方式，除了在基类中定义某种函数，它将基类的数据表示为 std::operator<< 可以“吃掉”（如字符串？）的东西，对派生类做同样的事情（在派生类流中调用基类流表示函数。当然是代表函数）。

这个问题的理想解决方案是什么？

```
#include <iostream>

class Base
{
    private: 
        int b_;
    public: 
        Base()
            :
                b_()
        {};

        Base (int b)
            : 
                b_(b)
        {};

        friend std::ostream& operator<<(std::ostream& os, const Base& b);
};

std::ostream& operator<< (std::ostream& os, const Base& b)
{
    os << b.b_; 
    return os;
}

class Derived
:
    public Base
{
    private: 
        int d_;
    public: 
        Derived()
            :
                d_()
        {};

        Derived (int b, int d)
            : 
                Base(b), 
                d_(d)
        {};

        friend std::ostream& operator<<(std::ostream& os, const Derived& b);
};

std::ostream& operator<< (std::ostream& os, const Derived& b)
{
    os << static_cast<const Base&>(b) << " " << b.d_; 
    return os;
}

using namespace std;

int main(int argc, const char *argv[])
{
    Base b(4);

    cout << b << endl;

    Derived d(4,5);

    cout << d << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T19:01:49.683

好吧...如果在结果未正确定义的情况下进行转换，则应避免转换，但转换为基础始终是安全的。

可以通过考虑派生引用衰减到基引用来避免显式转换，因此您可以使用隐式转换，例如在这种情况下：

```
std::ostream& operator<< (std::ostream& os, const Derived& b)
{
    const Base& bs = b;
    os << bs << " " << b.d_; 
    return os;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T18:33:18.070

```
static_cast<const Base&>(b) 
```

是安全的，没有什么不正确的，因为每个派生类对象也是一个基类对象，可以像一个对象一样对待。

强制转换只有在鲁莽使用时才是危险的，您必须在需要的地方以正确的方式使用强制转换，这正是语言标准提供它们的目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T19:09:21.403

你可以改变这样的事情：

```
struct Base {
    int b_;
    void print(ostream &o) { o << b_; }
};

struct Derived : Base {
    int d_;
    void print(ostream &o) {
        Base::print(o);
        o << ' ' << d_;
   }
};

ostream &operator<<(ostream &o, Base &b) {
    b.print(o);
    return o;
}

ostream &operator<<(ostream &o, Derived &d) {
    d.print(o);
    return o;
} 
```

如果`Base`有虚函数（在这个例子中没有），那么`print`可能是其中之一，你可以摆脱`operator<<`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T19:14:06.687

如果您不喜欢强制转换，您可以让您的操作员调用`writeTo`使用模板方法模式实现的函数。

例如

```
class Base {
   public:
       std::ostream& writeTo(std::ostream& ostr) const { os << b_; return this->doWriteTo(os); }
   private:
       int b_;

       virtual std::ostream& doWriteTo(std::ostream& ostr) const = 0; // pure virtual
};

class Derived {
    private:
        int d_;
        virtual std::ostream& doWriteTo(std::ostream& ostr) const {return ostr << d_;}
};

std::ostream& operator<<(std::ostream& ostr, const Derived& d) {
  return d.writeTo(ostr); 
```

}

实际上，使用这种模式，您可以`operator<<`一劳永逸地编写`Base`：

```
std::ostream& operator<<(std::ostream& ostr, const Base& b) {
  return b.writeTo(ostr); 
```

}

这种模式也消除了`operator<<`制作`friend`.

# joomla - 如何使 joomla 头版上的栏目正常工作？

> ID：10725775
> 
> 赞同：0
> 
> 时间：2012-05-23T18:30:06.413
> 
> 标签：joomla, frontpage

我目前正在 joomla 中开发一个网站，虽然我学到了很多东西，但我需要帮助：

我想知道如何使列在 joomla 主页上工作，如果我转到主菜单-> 主页-> 参数（基本）并将介绍设置为 '6' 并将列设置为 2，我没有得到结果文章，它们仍然和以前一样，即使我发布另一篇文章也可以正常工作，我怎样才能让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T21:53:26.017

我通过研究模板并重新创建 joomla 主页解决了我的问题，之后我可以通过在 dpi 中获取 CSS 高度和宽度并在模块属性上进行编辑来设置列

# linux - kmalloc：只分配 4 个字节

> ID：10725777
> 
> 赞同：1
> 
> 时间：2012-05-23T18:30:34.183
> 
> 标签：linux, kernel

所以我试图在模块初始化时动态分配一个缓冲区。缓冲区需要始终在范围内，因为它存储用户空间程序与之交互的数据。所以这是我的代码：

```
static char* file_data
#define MAX_SIZE 256
.
.
.
{
   file_data = kzalloc(MAX_SIZE, GFP_KERNEL)

.
.
.
} 
```

但是，当我这样做时，`sizeof file_data`它总是返回 4。我做错了什么？

编辑：缓冲区存储来自用户空间程序的输入，但可以存储 4 个字符。

```
size_t read_file(char* __user buf, size_t count)
{
    unsigned int len = 0;
    len = copy_to_user(buf, file_data, count);
    return count;
}

ssize_t write_file(char* __user buf, size_t count)
{
    if(count >= MAX_SIZE)
        return -EINVAL;
    copy_from_user(file_data, buf,count)
    return count;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:32:38.287

`file_data`是一个指针。在 32 位平台上，它的大小为 32 位或 4 个字节。您想知道的是**指向的数据`file_data`**的大小。您不能`sizeof`为此使用运算符，因为`sizeof`它是编译时操作。你不能在运行时动态分配的东西上使用它。

（此外，您已经知道所指向的数据的大小`file_data`——它是`MAX_SIZE`？）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:34:51.017

`char *file_data`是一个指向字符的指针。显然，您使用的是 32 位系统，因此任何指针都是 4 个字节。编译器（它处理`sizeof`）不知道或关心您要分配多少内存`file_data`来指向，它只知道您要询问指针的大小（无论您是否有意）。如果您想要它指向的内存大小，您必须自己跟踪它。

# assembly - 有什么方法可以判断变量是否已优化？

> ID：10725781
> 
> 赞同：2
> 
> 时间：2012-05-23T18:30:42.203
> 
> 标签：assembly, memory, fortran, heap-memory, stack-memory

我有一些看起来像这样的 fortran 代码：

```
 subroutine foo(mx,my,mz)
    real pts(3,mx,my,mz)
 end 
```

数组 pts 从未在子例程中实际使用过——我只是在重构代码时忘记删除它。现在，由于 fortran 没有堆栈与堆的概念，这取决于编译器在哪里分配 pts - 这是 gfortran 中数组大小的函数，但我无法弄清楚波特兰组编译器如何处理这个。

是否可以判断 pts 是否分配在堆栈、堆上，或者是否完全优化（可能应该如此）？是否有可能有一个 stackoverflow 并且不知道它（即没有运行时错误）？我的直觉是，应该可以通过查看编译器生成的程序集来判断，但我不知道我会在那里看什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T20:11:16.230

最简单的方法是查看编译器在编译时提供的汇编代码`-S`或使用调试器查找符号。如果数组是在堆上分配的，很可能会调用分配函数：

*   **gfortran**插入调用`malloc`
*   **ifort**默认分配堆栈上的所有数组。如果您启用自动堆数组，`-heap-arrays <size>`它将生成`for_alloc`对堆分配的调用
*   **PGI**编译器生成调用，`pgf90_auto_alloc`但我没有使用此编译器及其分配数组的方式的经验

顺便说一句，即使使用默认优化级别，**gfortran**也会在未引用数组时删除该数组。我猜其他编译器也会这样做，但我不会打赌。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T19:41:36.963

我认为这是一个高度特定于编译器的问题，从某种意义上说，与死代码消除相关的行为并不普遍，不仅是编译器特定的，而且是特定于案例的。启用优化的现代编译器肯定会消除所有无法访问的代码，或者在程序状态方面没有实现任何目标的代码。未使用的变量和数组根本不会出现在最终的可执行文件中。

正如您所提到的，最好的办法是查看已编译二进制文件的汇编代码，看看它做了什么。

# excel - 在其中复制工作表数据并粘贴它的脚本，但在粘贴时

> ID：10725783
> 
> 赞同：0
> 
> 时间：2012-05-23T18:30:48.540
> 
> 标签：excel, vba

这是我的脚本。

```
Sub Update_OOR()

    Dim wsTNO As Worksheet
    Dim wsTND As Worksheet
    Dim wsTNA As Worksheet
    Dim lastrow As Long, fstcell As Long

    Set wsTNO = Sheets("Tel-Nexx OOR")
    Set wsTND = Sheets("Tel-Nexx Data")
    Set wsTNA = Sheets("Tel-Nexx Archive")

    With Application
        .ScreenUpdating = False
        .DisplayAlerts = False
        .EnableEvents = False
    End With

    With Intersect(wsTNO.UsedRange, wsTNO.Columns("S"))
        .AutoFilter 1, "<>Same"
        With Intersect(.Offset(2).EntireRow, .Parent.Range("B:P"))
            .Copy wsTNA.Cells(Rows.Count, "B").End(xlUp).Offset(1)
            .EntireRow.Delete
        End With
        .AutoFilter
    End With

'Blow away rows that are useless
    lastrow = wsTND.Range("A2").End(xlDown).Row
    wsTND.Range("O1:P1").Copy wsTND.Range("O2:P" & lastrow)
    wsTND.UsedRange.Copy Sheets.Add.Range("A1")

    With Intersect(ActiveSheet.UsedRange, ActiveSheet.Columns("P"))
        ActiveSheet.Range("O:P").Calculate
        .AutoFilter 1, "<>Different"
        .SpecialCells(xlCellTypeVisible).EntireRow.Delete
    End With

    With ActiveSheet
        lastrow = wsTND.Range("A2").End(xlDown).Row
        Intersect(.UsedRange, .Range("A2:M" & lastrow)).Copy wsTNO.Cells(Rows.Count, "B").End(xlUp).Offset(1)
        .Delete
    End With

    With wsTNO
        lastrow = wsTNO.Cells(Rows.Count, "B").End(xlUp).Row
        wsTNO.Range("T1:AD1").Copy
        wsTNO.Range("B3:N" & lastrow).PasteSpecial xlPasteFormats
        lastrow = wsTNO.Cells(Rows.Count, "R").End(xlUp).Row
        fstcell = wsTNO.Cells(Rows.Count, "N").End(xlUp).Row
        wsTNO.Range("AE1:AI1").Copy wsTNO.Range("O" & fstcell & ":S" & lastrow).Offset(1, 0)
    End With

    With Application
        .ScreenUpdating = True
        .DisplayAlerts = True
        .EnableEvents = True
    End With

End Sub 
```

它在技术上完美地工作到这里：

```
With wsTNO
        lastrow = wsTNO.Cells(Rows.Count, "B").End(xlUp).Row
        wsTNO.Range("T1:AD1").Copy
        wsTNO.Range("B3:N" & lastrow).PasteSpecial xlPasteFormats
        lastrow = wsTNO.Cells(Rows.Count, "R").End(xlUp).Row
        fstcell = wsTNO.Cells(Rows.Count, "N").End(xlUp).Row
        wsTNO.Range("AE1:AI1").Copy wsTNO.Range("O" & fstcell & ":S" & lastrow).Offset(1, 0)
End With 
```

现在从技术上讲，这部分中的所有内容都可以正常工作，但是代码中的最后一行，它正确地传递了所有内容，然后又向前迈出了一步。我想知道为什么。如果我摆脱偏移量，它会覆盖 O 到 S 中上面单元格中的内容。我需要知道第一个和最后一个单元格，因为数据只需要写入特定的单元格范围。

如果有更简单的方法可以做到这一点，如果有人可以告诉我，将不胜感激，如果没有，那么有人可以告诉我如何解决这个问题吗？

谢谢。

附上工作簿。

[http://dl.dropbox.com/u/3327208/Excel/First%26LastRows.xlsm](http://dl.dropbox.com/u/3327208/Excel/First%26LastRows.xlsm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:40:37.627

在您的第二段代码中添加 + 1 到

```
 lastrow = wsTNO.Cells(Rows.Count, "R").End(xlUp).Row 
```

所以你有了

```
 lastrow = wsTNO.Cells(Rows.Count, "R").End(xlUp).Row + 1 
```

前者为您提供第 2 行，即您的标题行。您想要的是第 3 行，即标题之后的行。

**更新：展示如何在未来进行测试**

尽管**.Select**方法通常不受欢迎。它非常适合测试/调试。我跑了

```
wsTNO.Range("O" & fstcell & ":S" & lastrow).Select 
```

在我设置 lastrow 和 fstcell 后的即时窗口中找到设置的范围。因此我知道你不想复制你的标题。从那里您可以找出是什么推动了该范围的设置并相应地进行调整。

# rally - 回溯 API：调度状态 ObjectID 到字符串的映射

> ID：10725784
> 
> 赞同：1
> 
> 时间：2012-05-23T18:30:57.460
> 
> 标签：rally, lookbackapi

我注意到当我执行如下查询时：

```
 https://rally1.rallydev.com/analytics/1.27/41529001/artifact/snapshot/query.js?find={ _Type: "HierarchicalRequirement",ScheduleState:"In-Progress",__At:"current"},fields=true 
```

我的结果集合回来了：

```
 {"_rallyAPIMajor":"1","_rallyAPIMinor":"27","Errors":[],"Warnings":[],"ThreadStats":{"elapsedCpu":"10.0","waitTime":"0","blockedTime":"0","waitCount":"0","blockedCount":"0"},"Timings":{"preProcess":10.0,"findEtlDate":0.0,"allowedValuesDisambiguation":0.0,"mongoQuery":0.0,"authorization":0.0,"postProcess":0.0,"other":0.0,"TOTAL":10.0},"GeneratedQuery":{"find":{"ScheduleState":{"$in":[41529076]},"$and":[{"_ValidFrom":{"$lte":"2012-05-23T18:25:41.363Z"},"_ValidTo":{"$gt":"2012-05-23T18:25:41.363Z"}}],"_ValidFrom":{"$lte":"2012-05-23T18:25:41.363Z"}},"workspace":41529001},"TotalResultCount":2205,"StartIndex":0,"PageSize":100,"ETLDate":"2012-05-23T18:25:41.363Z","Results": ... RESULTS HERE 
```

我对这方面很好奇：

```
 "ScheduleState":{"$in":[41529076]} 
```

其中显示了计划状态的 ObjectID (OID)，而不是字符串值。有没有一种简单的方法可以取回 Schedule State 字符串而不是 OID？查找从调度状态 OID 到字符串的映射的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T23:36:50.013

更新：Lookback API 最近已升级为包含水合物功能以解决此问题。这是它的工作原理...

**水合物**

默认情况下，在响应期间，此 API 不会尝试将下拉字段值从其本机 ObjectID 整数形式消歧为字符串。但是，您可以使用以下语法指定一些要水合的字段：

```
hydrate: ["State", "ScheduleState"] 
```

这会将 State 和 ScheduleState 字段消歧回字符串。请注意，Analytics API 使用当前允许的值来消除歧义。快照中可能引用了较旧的值。这些 OID 不会被消除歧义。

# clojure - Emacs 中的 Datomic 和 Clojure 入门

> ID：10725785
> 
> 赞同：4
> 
> 时间：2012-05-23T18:30:57.823
> 
> 标签：clojure, leiningen, swank, swank-clojure, datomic

我的 project.clj 文件看起来像这样

```
(defproject cljs-template "0.1.0-SNAPSHOT"
  :description "FIXME: write this!"
  :url "http://example.com/FIXME"
  :dependencies [[org.clojure/clojure "1.4.0-beta4"]
                 [noir-cljs "0.3.0"]
                 [fetch "0.1.0-alpha2"]
                 [noir "1.3.0-beta2"]
                 [org.clojure/core.cache "0.5.0"]
                 [com.datomic/datomic "0.1.3142"
                  :exclusions [org.slf4j/slf4j-nop org.slf4j/slf4j-log4j12]]
                 [ch.qos.logback/logback-classic "1.0.1"]]
  :plugins [[lein-swank "1.4.3"]]
  ;:cljsbuild {:builds [{}]}
  :main ^{:skip-aot true} cljs-template.server) 
```

我的 /src/cljs_template/server.clj 开头如下：

```
(ns cljs-template.server
  (:require [noir.server :as server]
            [noir.cljs.core :as cljs]
            [cljs-template.tree :as tree])
  (:use [datomic.api :only [db q] :as d])) 
```

然后我启动 swank，在其中运行 (in-ns 'cljs-template.server)，将光标移动到 (ns) 函数调用的末尾，并尝试使用 Ctrl-x Ctrl- 运行 (ns) 方法e. 当我这样做时，我收到以下错误。

```
No message.
  [Thrown class java.lang.ExceptionInInitializerError]

Restarts:
 0: [QUIT] Quit to the SLIME top level
 1: [CAUSE1] Invoke debugger on cause  org.apache.lucene.index.IndexWriterConfig [Thrown class java.lang.ClassNotFoundException]

Backtrace:
  0:    (Unknown Source) java.lang.Class.forName0
  1:      Class.java:247 java.lang.Class.forName
  2:        RT.java:2030 clojure.lang.RT.loadClassForName
  3:         RT.java:417 clojure.lang.RT.load
  4:         RT.java:398 clojure.lang.RT.load
  5:       core.clj:5386 clojure.core/load[fn]
  6:       core.clj:5385 clojure.core/load
  7:     RestFn.java:408 clojure.lang.RestFn.invoke
  8:       core.clj:5200 clojure.core/load-one
  9:       core.clj:5237 clojure.core/load-lib
 10:     RestFn.java:142 clojure.lang.RestFn.applyTo
 11:        core.clj:602 clojure.core/apply
 12:       core.clj:5271 clojure.core/load-libs
 13:     RestFn.java:137 clojure.lang.RestFn.applyTo
 14:        core.clj:602 clojure.core/apply
 15:       core.clj:5352 clojure.core/require
 16:     RestFn.java:436 clojure.lang.RestFn.invoke
 17: fulltext_index.clj:4 datomic.fulltext-index/loading
 18:    (Unknown Source) datomic.fulltext_index__init.load
 19:    (Unknown Source) datomic.fulltext_index__init.<clinit>
 20:    (Unknown Source) java.lang.Class.forName0
 21:      Class.java:247 java.lang.Class.forName
 22:        RT.java:2030 clojure.lang.RT.loadClassForName
 23:         RT.java:417 clojure.lang.RT.load
 24:         RT.java:398 clojure.lang.RT.load
 25:       core.clj:5386 clojure.core/load[fn]
 26:       core.clj:5385 clojure.core/load
 27:     RestFn.java:408 clojure.lang.RestFn.invoke
 28:       core.clj:5200 clojure.core/load-one
 29:       core.clj:5237 clojure.core/load-lib
 30:     RestFn.java:142 clojure.lang.RestFn.applyTo
 31:        core.clj:602 clojure.core/apply
 32:       core.clj:5271 clojure.core/load-libs
 33:     RestFn.java:137 clojure.lang.RestFn.applyTo
 34:        core.clj:602 clojure.core/apply
 35:       core.clj:5352 clojure.core/require
 36:     RestFn.java:703 clojure.lang.RestFn.invoke
 37:            db.clj:4 datomic.db/loading
 38:    (Unknown Source) datomic.db__init.load
 39:    (Unknown Source) datomic.db__init.<clinit>
 40:    (Unknown Source) java.lang.Class.forName0
 41:      Class.java:247 java.lang.Class.forName
 42:        RT.java:2030 clojure.lang.RT.loadClassForName
 43:         RT.java:417 clojure.lang.RT.load
 44:         RT.java:398 clojure.lang.RT.load
 45:       core.clj:5386 clojure.core/load[fn]
 46:       core.clj:5385 clojure.core/load
 47:     RestFn.java:408 clojure.lang.RestFn.invoke
 48:       core.clj:5200 clojure.core/load-one
 49:       core.clj:5237 clojure.core/load-lib
 50:     RestFn.java:142 clojure.lang.RestFn.applyTo
 51:        core.clj:602 clojure.core/apply
 52:       core.clj:5271 clojure.core/load-libs
 53:     RestFn.java:137 clojure.lang.RestFn.applyTo
 54:        core.clj:602 clojure.core/apply
 55:       core.clj:5352 clojure.core/require
 56:     RestFn.java:703 clojure.lang.RestFn.invoke
 57:         query.clj:4 datomic.query/loading
 58:    (Unknown Source) datomic.query__init.load
 59:    (Unknown Source) datomic.query__init.<clinit>
 60:    (Unknown Source) java.lang.Class.forName0
 61:      Class.java:247 java.lang.Class.forName
 62:        RT.java:2030 clojure.lang.RT.loadClassForName
 63:         RT.java:417 clojure.lang.RT.load
 64:         RT.java:398 clojure.lang.RT.load
 65:       core.clj:5386 clojure.core/load[fn]
 66:       core.clj:5385 clojure.core/load
 67:     RestFn.java:408 clojure.lang.RestFn.invoke
 68:       core.clj:5200 clojure.core/load-one
 69:       core.clj:5237 clojure.core/load-lib
 70:     RestFn.java:142 clojure.lang.RestFn.applyTo
 71:        core.clj:602 clojure.core/apply
 72:       core.clj:5271 clojure.core/load-libs
 73:     RestFn.java:137 clojure.lang.RestFn.applyTo
 74:        core.clj:602 clojure.core/apply
 75:       core.clj:5352 clojure.core/require
 76:     RestFn.java:421 clojure.lang.RestFn.invoke
 77:           api.clj:6 datomic.api/loading
 78:    (Unknown Source) datomic.api__init.load
 79:    (Unknown Source) datomic.api__init.<clinit>
 80:    (Unknown Source) java.lang.Class.forName0
 81:      Class.java:247 java.lang.Class.forName
 82:        RT.java:2030 clojure.lang.RT.loadClassForName
 83:         RT.java:417 clojure.lang.RT.load
 84:         RT.java:398 clojure.lang.RT.load
 85:       core.clj:5386 clojure.core/load[fn]
 86:       core.clj:5385 clojure.core/load
 87:     RestFn.java:408 clojure.lang.RestFn.invoke
 88:       core.clj:5200 clojure.core/load-one
 89:       core.clj:5237 clojure.core/load-lib
 90:     RestFn.java:142 clojure.lang.RestFn.applyTo
 91:        core.clj:602 clojure.core/apply
 92:       core.clj:5271 clojure.core/load-libs
 93:     RestFn.java:137 clojure.lang.RestFn.applyTo
 94:        core.clj:604 clojure.core/apply
 95:       core.clj:5363 clojure.core/use
 96:     RestFn.java:408 clojure.lang.RestFn.invoke
 97:    NO_SOURCE_FILE:1 cljs-template.server/eval1941[fn]
 98:    NO_SOURCE_FILE:1 cljs-template.server/eval1941
 99:  Compiler.java:6465 clojure.lang.Compiler.eval
 100:  Compiler.java:6455 clojure.lang.Compiler.eval
 101:  Compiler.java:6431 clojure.lang.Compiler.eval
 102:       core.clj:2795 clojure.core/eval
 103:        core.clj:532 swank.core/eval782[fn]
 104:    MultiFn.java:163 clojure.lang.MultiFn.invoke
 105:        basic.clj:54 swank.commands.basic/eval-region
 106:        basic.clj:44 swank.commands.basic/eval-region
 107:        basic.clj:73 swank.commands.basic/eval968[fn]
 108:        Var.java:401 clojure.lang.Var.invoke
 109:    (Unknown Source) user/eval1937
 110:  Compiler.java:6465 clojure.lang.Compiler.eval
 111:  Compiler.java:6431 clojure.lang.Compiler.eval
 112:       core.clj:2795 clojure.core/eval
 113:        core.clj:100 swank.core/eval-in-emacs-package
 114:        core.clj:256 swank.core/eval-for-emacs
 115:        Var.java:409 clojure.lang.Var.invoke
 116:        AFn.java:167 clojure.lang.AFn.applyToHelper
 117:        Var.java:518 clojure.lang.Var.applyTo
 118:        core.clj:600 clojure.core/apply
 119:        core.clj:107 swank.core/eval-from-control
 120:        core.clj:330 swank.core/spawn-worker-thread[fn]
 121:        AFn.java:159 clojure.lang.AFn.applyToHelper
 122:        AFn.java:151 clojure.lang.AFn.applyTo
 123:        core.clj:600 clojure.core/apply
 124:        core.clj:326 swank.core/spawn-worker-thread[fn]
 125:     RestFn.java:397 clojure.lang.RestFn.invoke
 126:         AFn.java:24 clojure.lang.AFn.run
 127:     Thread.java:662 java.lang.Thread.run 
```

然后我按 0 关闭堆栈跟踪，然后在 (ns) 调用上再次按 Ctrl-x Ctrl-e，现在我的错误是：

```
Could not initialize class datomic.api__init
  [Thrown class java.lang.NoClassDefFoundError]

Restarts:
 0: [QUIT] Quit to the SLIME top level

Backtrace:
  0:    (Unknown Source) java.lang.Class.forName0
  1:      Class.java:247 java.lang.Class.forName
  2:        RT.java:2030 clojure.lang.RT.loadClassForName
  3:         RT.java:417 clojure.lang.RT.load
  4:         RT.java:398 clojure.lang.RT.load
  5:       core.clj:5386 clojure.core/load[fn]
  6:       core.clj:5385 clojure.core/load
  7:     RestFn.java:408 clojure.lang.RestFn.invoke
  8:       core.clj:5200 clojure.core/load-one
  9:       core.clj:5237 clojure.core/load-lib
 10:     RestFn.java:142 clojure.lang.RestFn.applyTo
 11:        core.clj:602 clojure.core/apply
 12:       core.clj:5271 clojure.core/load-libs
 13:     RestFn.java:137 clojure.lang.RestFn.applyTo
 14:        core.clj:604 clojure.core/apply
 15:       core.clj:5363 clojure.core/use
 16:     RestFn.java:408 clojure.lang.RestFn.invoke
 17:    NO_SOURCE_FILE:1 cljs-template.server/eval6292[fn]
 18:    NO_SOURCE_FILE:1 cljs-template.server/eval6292
 19:  Compiler.java:6465 clojure.lang.Compiler.eval
 20:  Compiler.java:6455 clojure.lang.Compiler.eval
 21:  Compiler.java:6431 clojure.lang.Compiler.eval
 22:       core.clj:2795 clojure.core/eval
 23:        core.clj:532 swank.core/eval782[fn]
 24:    MultiFn.java:163 clojure.lang.MultiFn.invoke
 25:        basic.clj:54 swank.commands.basic/eval-region
 26:        basic.clj:44 swank.commands.basic/eval-region
 27:        basic.clj:73 swank.commands.basic/eval968[fn]
 28:        Var.java:401 clojure.lang.Var.invoke
 29:    (Unknown Source) cljs-template.server/eval6288
 30:  Compiler.java:6465 clojure.lang.Compiler.eval
 31:  Compiler.java:6431 clojure.lang.Compiler.eval
 32:       core.clj:2795 clojure.core/eval
 33:        core.clj:100 swank.core/eval-in-emacs-package
 34:        core.clj:256 swank.core/eval-for-emacs
 35:        Var.java:409 clojure.lang.Var.invoke
 36:        AFn.java:167 clojure.lang.AFn.applyToHelper
 37:        Var.java:518 clojure.lang.Var.applyTo
 38:        core.clj:600 clojure.core/apply
 39:        core.clj:107 swank.core/eval-from-control
 40:        core.clj:330 swank.core/spawn-worker-thread[fn]
 41:        AFn.java:159 clojure.lang.AFn.applyToHelper
 42:        AFn.java:151 clojure.lang.AFn.applyTo
 43:        core.clj:600 clojure.core/apply
 44:        core.clj:326 swank.core/spawn-worker-thread[fn]
 45:     RestFn.java:397 clojure.lang.RestFn.invoke
 46:         AFn.java:24 clojure.lang.AFn.run
 47:     Thread.java:662 java.lang.Thread.run 
```

我究竟做错了什么？如何使用 swank/slime 在我的 emacs 中进行 datomic 工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T19:41:31.143

原来我执行了错误的命令。

我正在运行 lein deps 并收到以下错误。

```
...
Try downloading the file manually from the project website.

  Then, install it using the command: 
      mvn install:install-file -DgroupId=com.datomic -DartifactId=datomic -Dversion=0.1.3157 -Dpackaging=jar -Dfile=/path/to/file

  Alternatively, if you host your own repository you can deploy the file there: 
      mvn deploy:deploy-file -DgroupId=com.datomic -DartifactId=datomic -Dversion=0.1.3157 -Dpackaging=jar -Dfile=/path/to/file -Durl=[url] -DrepositoryId=[id]

  Path to dependency: 
    1) org.apache.maven:super-pom:pom:2.0
    2) com.datomic:datomic:jar:0.1.3157 
```

我看到下载的 datomic 代码中的 README 文件还提到了将 datomic 添加到我的 mvn。自然地（这是愚蠢的部分）我认为他们说了同样的话。

lein 会告诉你你应该执行

```
mvn install:install-file -DgroupId=com.datomic -DartifactId=datomic -Dversion=0.1.3157 -Dpackaging=jar -Dfile=/path/to/file 
```

自述文件说你应该执行

```
mvn install:install-file -DgroupId=com.datomic -DartifactId=datomic -Dfile=datomic-${DATOMIC-VERSION}.jar -DpomFile=pom.xml 
```

您是否注意到 README 说明还包含一个 pom.xml 文件？我也不！是的，这很重要。

无论如何，一定要包括 pom.xml 文件。如果您尝试将 datomic 0.1.3157 添加到您的 mvn 存储库，您将在下载的 datomic 目录中执行以下命令。

```
mvn install:install-file -DgroupId=com.datomic -DartifactId=datomic -Dfile=datomic-0.1.3157.jar -DpomFile=pom.xml 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:59:27.743

我在[这里发布了一个工作项目](https://github.com/thearthur/datomic-from-clojure-example)

我通常在调试 swank 问题时的嫌疑人是：

*   莱宁根是最新的
*   lein-swank 的版本
*   emacs 版本（Emacs 24，我发现它更可靠）
*   lib 目录中剩余的旧依赖项

编辑：获取 datomic jar 的正确方法是 Stephen Cagle 说的，从他下面的评论中复制：

```
 mvn install:install-file -DgroupId=com.datomic -DartifactId=datomic -Dfile=datomic-${DATOMIC-VERSION}.jar 
```

# linq - 如何从文本中提取带有 .txt 的文件名？

> ID：10725786
> 
> 赞同：0
> 
> 时间：2012-05-23T18:31:00.990
> 
> 标签：linq, c#-4.0

我有如下文字，

Lorem ipsum dolor sit amet，consectetur **sample1.txt** adipiscing elit。Morbi nec urna non ante varius semper eget vitae ipsum。Pellentesque 居民**sample2.txt** morbi tristique senectus et netus et malesuada 名声。

我在上面的文本中有 sample1.txt 和 sample2.txt。名称与 sample1 和 sample2 不同。我只需要使用 c# 获取文件名。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:34:29.813

由于您将其标记为 LINQ：

```
var filesnames = text.Split(new char[] { }) // split on whitespace into words
                     .Where(word => word.EndsWith(".txt")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:38:14.567

尝试这样的事情

```
var filesnames = text.Split(' ')
                 .Where(o => o.EndsWith(".txt")).Select(o => o.SubString(o.LastIndexOf('.'))).ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T18:35:55.867

如果有一种很好的方法可以捕获文件名的外观，则可以使用正则表达式。我假设这里总是`blah.txt`带有字母数字字符：

```
var matches = Regex.Matches(input, @"\b[a-zA-Z0-9]+\.txt\b"); 
```

# ruby-on-rails-3 - rspec 电子邮件验证

> ID：10725788
> 
> 赞同：0
> 
> 时间：2012-05-23T18:31:04.157
> 
> 标签：ruby-on-rails-3, email-validation

我正在学习 Rspec。当我运行我的测试用例进行电子邮件验证时，我收到一个无法理解的错误。请解释一下。

```
 1) User should check for email validation
     Failure/Error: @test_user.should have(1).errors_on(:email)
       expected 1 errors on :email, got 2
     # ./spec/models/user_spec.rb:17:in `block (2 levels) in <top (required)>'

Finished in 0.12903 seconds
2 examples, 1 failure 
```

我的测试用例如下：

```
 it"should check whether name is present or not" do
    @test_user.name = nil
    @test_user.should have(1).errors_on(:name)
  end

  it "should check for email validation"do
    @test_user.email = nil
    @test_user.should have(2).errors_on(:email)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:28:49.273

如果您同时使用存在验证器和某种格式验证器来验证电子邮件属性，那么将属性设置为 nil 会出现两个错误。

也许尝试类似：

```
validates :email, presence: true, 
                  format: { with: %r\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/,
                            allow_nil: true  } 
```

# python - Python - 图像拼接和混合

> ID：10725793
> 
> 赞同：0
> 
> 时间：2012-05-23T18:31:36.083
> 
> 标签：python, image, python-imaging-library, image-stitching

如何将两个图像的小块混合在一起？

我正在做的是将两个有一些重叠的图像拼接在一起。我有将图像与给定偏移量拼接在一起的代码，我只需要将其平滑并使其看起来像一张漂亮的图片。据我了解，PIL blend 仅在它们具有相同尺寸时才有效，我觉得应该有一种简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:31:17.103

OpenCV 中有代码可以执行此操作，但使用 C++ .. 还有一个命令行应用程序，您可以从 Python 代码中调用它。

[OpenCV 拼接](http://opencv.willowgarage.com/wiki/opencv_stitching)

# android - Android 动态 RadioGroup

> ID：10725802
> 
> 赞同：3
> 
> 时间：2012-05-23T18:32:23.173
> 
> 标签：android, dynamic, radio-group

我正在尝试制作均衡器 RadioGroup。而且我想为预设动态添加单选按钮。

这是我的布局 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RadioGroup
        android:id="@+id/rgEqualizerPreset"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    </RadioGroup>

</LinearLayout> 
```

这是Java代码：

```
RadioGroup rgEqualizer;
List<RadioButton> radioButtonList;
MediaPlayer mPlayer;
Equalizer mEqualizer;
LinearLayout.LayoutParams layoutParams;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.equalizer);
    rgEqualizer = (RadioGroup) findViewById(R.id.rgEqualizerPreset);

    mPlayer = new MediaPlayer();
    mEqualizer = new Equalizer(0, mPlayer.getAudioSessionId());
    rgEqualizer = new RadioGroup(this);
    radioButtonList = new ArrayList<RadioButton>();

    fillRadioGroupWithRadioButtons();
    rgEqualizer.setOnCheckedChangeListener(this);
}

private void fillRadioGroupWithRadioButtons() {

    Short noPresets = mEqualizer.getNumberOfPresets();
    int i = 0;
    while (i < noPresets) {
        RadioButton rb = new RadioButton(this);
        rb.setText(mEqualizer.getPresetName((short) i));
        layoutParams = new RadioGroup.LayoutParams(
                RadioGroup.LayoutParams.FILL_PARENT,
                RadioGroup.LayoutParams.FILL_PARENT);
        rgEqualizer.addView(rb, layoutParams);
        i++;
    }
}

@Override
public void onCheckedChanged(RadioGroup arg0, int arg1) {
    // TODO Auto-generated method stub

} 
```

当此活动打开时，仅显示空白布局屏幕。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T16:57:22.523

问题是 rgEqualizer 实际上不是您布局中的 RadioGroup。你可能的意思是：

```
rgEqualizer = (RadioGroup) this.findViewById(R.id.rgEqualizerPreset); 
```

代替：

```
rgEqualizer = new RadioGroup(this); 
```

所以你的单选按钮被添加得很好，它们与你的布局无关。我感觉到你的痛苦。

# c - 使用 select(...) 作为事件驱动循环？

> ID：10725804
> 
> 赞同：1
> 
> 时间：2012-05-23T18:32:32.910
> 
> 标签：c, select

```
...
/* Initialize the input set */
FD_ZERO(&input);
FD_SET(fd, &input);
FD_SET(sock, &input);

max_fd = (sock > fd ? sock : fd) + 1;

/* Do the select */
n = select(max_fd, &input, NULL, NULL, NULL);

/* See if there was an error */
if (n < 0)
  perror("select failed");
else if (n == 0)
  puts("TIMEOUT");
else
{
  /* We have input */
  if (FD_ISSET(fd, &input))
process_fd();
  if (FD_ISSET(sock, &input))
process_socket();
} 
```

我想知道一旦描述符之一准备好，这种方法不会退出。
如果我想读取两个描述符怎么办？

我还是想`select(...)`用去弄清楚哪个先准备好先处理。我试着把整个事情放在一个循环中，但它会永远阻塞。

* * *

更新

```
 328     fd_set readfds; FD_ZERO(&readfds);
  329     int waiting = 2;
  330     while(waiting) {
  331 
  332       FD_SET(sockv4query, &readfds);
  333       FD_SET(sockv6query, &readfds);
  334 
  335       /* one greater than the highest fd number */
  336       int nfds = (sockv4query > sockv6query ? sockv4query : sockv6query) + 1;
  337 
  338       if (
  339          select(
  340                  nfds,         /* number of fds */
  341                  &readfds,     /* set of read fds */
  342                  NULL,         /* set of write fds */
  343                  NULL,         /* set of exception fds */
  344                  NULL          /* maximum wait interval */
  345                ) < 0
  346        ) {
  347         perror("select(...)");
  348         continue;
  349       } else {
  350 
  351         /* one or more descriptors is ready */
  352         if(FD_ISSET(sockv4query, &readfds)) {
  353           receive_response_and_echo(sockv4query);
  354           waiting -= 1;
  355         }
  356         if(FD_ISSET(sockv6query, &readfds)) {
  357           receive_response_and_echo(sockv6query);
  358           waiting -= 1;
  359         }
  360       }
  361     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:54:45.123

我会做类似的事情。

```
 328     fd_set readfds; FD_ZERO(&readfds);
      329     int process_fd1 = 1,process_fd2 = 1;
      330     while(process_fd1 || process_fd2) {
      331 
      332       FD_SET(sockv4query, &readfds);
      333       FD_SET(sockv6query, &readfds);
      334 
      335       /* one greater than the highest fd number */
      336       int nfds = (sockv4query > sockv6query ? sockv4query : sockv6query) + 1;
      337 
      338       if (
      339          select(
      340                  nfds,         /* number of fds */
      341                  &readfds,     /* set of read fds */
      342                  NULL,         /* set of write fds */
      343                  NULL,         /* set of exception fds */
      344                  NULL          /* maximum wait interval */
      345                ) < 0
      346        ) {
      347         perror("select(...)");
      348         continue;
      349       } else {
      350 
      351         /* one or more descriptors is ready */
      352         if(FD_ISSET(sockv4query, &readfds)) {
      353           receive_response_and_echo(sockv4query);
      354           process_fd1 = 0;
      355         }
      356         if(FD_ISSET(sockv6query, &readfds)) {
      357           receive_response_and_echo(sockv6query);
      358           process_fd2 = 0;
      359         }
      360       }
      361     } 
```

# android - android.mk arm-linux-androideabi-g++ 异常和 __cxa_allocate_exception

> ID：10725810
> 
> 赞同：42
> 
> 时间：2012-05-23T18:32:53.293
> 
> 标签：android, exception

我正在从源代码重建 Android（以闪存到设备上，现在使用模拟器），试图添加一个命令行工具。我已经把我的源代码放在 repo/exernal/... 中并写了`Android.mk`.

我得到以下未定义：

```
__cxa_allocate_exception
__cxa_begin_catch
__cxa_end_catch
__cxa_end_cleanup
__cxa_free_exception
__cxa_get_exception_ptr
__cxa_rethrow
__cxa_throw
__gxx_personality_v0 
```

我在这里搜索了具有相同未定义的其他问题，但似乎无法找到适用于 Android 的解决方案。

最终的链接命令生成为：

```
prebuilt/darwin-x86/toolchain/arm-linux-androideabi-4.4.x/bin/arm-linux-androideabi-g++ -nostdlib -Bdynamic -Wl,-T,build/core/armelf.x -Wl,-dynamic-linker,/system/bin/linker -Wl,--gc-sections -Wl,-z,nocopyreloc -o out/target/product/generic/obj/EXECUTABLES/wavsender_intermediates/LINKED/wavsender -Lout/target/product/generic/obj/lib -Wl,-rpath-link=out/target/product/generic/obj/lib -lc -llog -lcutils -lnetutils -lc -lstdc++ -lm  out/target/product/generic/obj/lib/crtbegin_dynamic.o    out/target/product/generic/obj/EXECUTABLES/wavsender_intermediates/ohSongcast/WavSender/WavSender.o              out/target/product/generic/obj/STATIC_LIBRARIES/liblog_intermediates/liblog.a out/target/product/generic/obj/STATIC_LIBRARIES/libcutils_intermediates/libcutils.a out/target/product/generic/obj/STATIC_LIBRARIES/libopenhome_intermediates/libopenhome.a out/target/product/generic/obj/STATIC_LIBRARIES/libgtest_intermediates/libgtest.a out/target/product/generic/obj/STATIC_LIBRARIES/libstlport_static_intermediates/libstlport_static.a out/target/product/generic/obj/STATIC_LIBRARIES/libstdc++_intermediates/libstdc++.a out/target/product/generic/obj/STATIC_LIBRARIES/libgabi++_intermediates/libgabi++.a   -Wl,-z,noexecstack -Wl,--icf=safe -Wl,--fix-cortex-a8 prebuilt/darwin-x86/toolchain/arm-linux-androideabi-4.4.x/bin/../lib/gcc/arm-linux-androideabi/4.4.3/armv7-a/libgcc.a out/target/product/generic/obj/lib/crtend_android.o 
```

Android.mk 是：

```
include $(CLEAR_VARS)
LOCAL_MODULE := wavsender
LOCAL_MODULE_TAGS := eng
LOCAL_CFLAGS += -fexceptions -D_GNU_SOURCE -DPLATFORM_ANDROID
LOCAL_SRC_FILES += WavSender.cpp
LOCAL_SHARED_LIBRARIES := libc libcutils libnetutils
LOCAL_STATIC_LIBRARIES := libcutils libopenhome
LOCAL_STATIC_LIBRARIES += libopenhome libgtest libstlport_static libstdc++ libgabi++
LOCAL_LDLIBS += -lstdc++
include external/stlport/libstlport.mk
include $(BUILD_EXECUTABLE) 
```

谁能看到问题或指出我从 arm-linux-androideabi-g++ 获得正确行为的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T22:12:35.423

考虑删除 libstd++ 作为 Android.mk 中的静态它应该默认为标准的 Android 实现，你应该没问题

实际上，我看到您将它添加为静态库和动态库。

删除静态 libstdc++ 或动态的。如果不这样做，请尝试同时删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T09:10:25.773

您所有的未定义都来自 libstdc++。

当您有不同的 libstdc++ 版本并使用某个版本编译并与另一个版本链接或忘记链接时，通常会发生这种情况。

有时，如果链接是在需要它的库之后完成的，它甚至会发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T19:10:55.813

由于构建了一个正在拉入库/共享对象的项目，其中一些定义了 APP_STL := gnustl_shared 而其他人在其 Application.mk 文件中声明了 gnustl_static，我不久前遇到了类似的 __cxa undefines。

也许你可能会遇到类似的事情？如果是这样，我建议在组合解决方案中使用一种或另一种，但不要同时使用两者。

# c# - 如何在 C# 中使用天气 API

> ID：10725812
> 
> 赞同：3
> 
> 时间：2012-05-23T18:33:07.737
> 
> 标签：c#, coordinates, weather-api

我想实现天气信息，它将向我显示取决于我的经度和纬度的结果。

我的应用程序正在从 GPS 获取坐标，因此获取它们不是问题。唯一的事情是，我想显示离我最近的城市的一些天气信息，并且它有天气信息。

你能给我一些想法和解决方案。

您如何看待谷歌天气 API？

如何使它搜索最近的以及如何赋予此代码经纬度。

```
public static void GoogleWeather(string location)  
    {  
        HttpWebRequest GoogleRequest;  
        HttpWebResponse GoogleResponse = null;  
        XmlDocument GoogleXMLdoc = null;  
        try  
        {  
            GoogleRequest = (HttpWebRequest)WebRequest.Create("http://www.google.com/ig/api?weather=" + string.Format(location));  
            GoogleResponse = (HttpWebResponse)GoogleRequest.GetResponse();  
            GoogleXMLdoc = new XmlDocument();  
            GoogleXMLdoc.Load(GoogleResponse.GetResponseStream());  

            XmlNode root = GoogleXMLdoc.DocumentElement;  

            XmlNodeList nodeList1 = root.SelectNodes("weather/forecast_information");  
            HttpContext.Current.Response.Write("<b>City : " + nodeList1.Item(0).SelectSingleNode("city").Attributes["data"].InnerText + "</b>");  

            XmlNodeList nodeList = root.SelectNodes("weather/current_conditions");  
            HttpContext.Current.Response.Write(" 
");  
            HttpContext.Current.Response.Write(" 
<table class="bordered" cellpadding="5"> 
<tbody><tr><td><b><big><nobr>" + nodeList.Item(0).SelectSingleNode("temp_c").Attributes["data"].InnerText + " °C | " + nodeList.Item(0).SelectSingleNode("temp_f").Attributes["data"].InnerText + " °F</nobr></big></b>");  
            HttpContext.Current.Response.Write("<b>Current:</b> " + nodeList.Item(0).SelectSingleNode("condition").Attributes["data"].InnerText + "");  
            HttpContext.Current.Response.Write("" + nodeList.Item(0).SelectSingleNode("wind_condition").Attributes["data"].InnerText + "");  
            HttpContext.Current.Response.Write(nodeList.Item(0).SelectSingleNode("humidity").Attributes["data"].InnerText);  
            nodeList = root.SelectNodes("descendant::weather/forecast_conditions");  
            foreach (XmlNode nod in nodeList)  
            {  
                HttpContext.Current.Response.Write("</td> 
<td align="center">" + nod.SelectSingleNode("day_of_week").Attributes["data"].InnerText+ "");  
                HttpContext.Current.Response.Write("<img src="http://www.google.com" + nod.SelectSingleNode("icon").Attributes["data"].InnerText + "" alt="" + nod.SelectSingleNode("condition").Attributes["data"].InnerText + "">");  
                HttpContext.Current.Response.Write(nod.SelectSingleNode("low").Attributes["data"].InnerText + "°F | ");  
                HttpContext.Current.Response.Write(nod.SelectSingleNode("high").Attributes["data"].InnerText + "°F");  
            }  
            HttpContext.Current.Response.Write("</td> 
</tr> 
</tbody></table> 

");  
        }  
        catch (System.Exception ex)  
        {  
            HttpContext.Current.Response.Write(ex.Message);  
        }  
        finally  
        {  
            GoogleResponse.Close();  
        }  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T19:14:03.037

实际上，我不久前也遇到过类似的问题。

我决定选择 Wunderground，因为我在使用 Google Weather 时遇到了太多问题。*编辑，我在 wunderground 下方添加了一个有效的 google 示例。google api 似乎需要城市名称或邮政编码。

这是我的例子，请原谅我草率的代码，从记忆中输入。

```
public static DayOfWeek Wunderground(string latlong)
    {
        //Insert your API key in the below URL
        //string latlong = "37.8,-122.4";
        string url = "http://api.wunderground.com/api/*insertyourapikeyhere*/geolookup/conditions/forecast/q/"+latlong+".xml";

        HttpWebRequest web = (HttpWebRequest)WebRequest.Create(url);
        web.UseDefaultCredentials = true;
        web.PreAuthenticate = true;
        web.UserAgent = "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.168 Safari/535.19";
        web.GetResponse();
        //Get Dopplar Image
        var dop = "http://api.wunderground.com/api/7dca468f5dd2ff1b/animatedradar/q/TX/Houston.gif?newmaps=1&timelabel=1&width=640&height=480&timelabel.y=10&num=15&delay=50";
        WebClient wc = new WebClient();
        wc.DownloadFile(dop, "dop.gif");

        //Prepare my custom property
        var d = new WeatherLib.DayOfWeek();
        d.Current = new WDay();
        WDay forecast = new WDay();
        var conditions = d;
        var xmlConditions = new XmlDocument();

        //download the api xml
        XDocument api = XDocument.Load(url);
        api.Save("api.xml");
        xmlConditions.Load(string.Format(@"api.xml"));

        XmlNodeList list = xmlConditions.SelectNodes("/response/current_observation");
        WDay current = d.Current;

        //Parse out the XML data
        foreach (XmlNode node in list)
        {
            current.WeatherText = node.SelectSingleNode("weather").InnerText;
            current.TempCurrentF = node.SelectSingleNode("temp_f").InnerText;
            current.TempCurrentC = node.SelectSingleNode("temp_c").InnerText;
            current.Humidity = node.SelectSingleNode("relative_humidity").InnerText;
            current.WindDirection = node.SelectSingleNode("wind_dir").InnerText;
            current.WindSpeedM = node.SelectSingleNode("wind_mph").InnerText;
            current.WindSpeedK = node.SelectSingleNode("wind_kph").InnerText;
            current.Barometer = node.SelectSingleNode("pressure_mb").InnerText;
            current.HeatIndexF = node.SelectSingleNode("heat_index_f").InnerText;
            current.HeatIndexC = node.SelectSingleNode("heat_index_c").InnerText;
            current.WindChill = node.SelectSingleNode("windchill_string").InnerText;
            current.UVIndex = node.SelectSingleNode("UV").InnerText;
            current.RainAmount = node.SelectSingleNode("precip_today_in").InnerText;
            current.Visibility = node.SelectSingleNode("visibility_mi").InnerText;
            current.DewPoint = node.SelectSingleNode("dewpoint_f").InnerText;

        }return d;
    } 
```

谷歌示例

```
public static DayOfWeek Google(string zip)
    {
        string urlstring = "http://www.google.com/ig/api?weather="+zip;
        var d = new WeatherLib.DayOfWeek();
        d.Monday = new WDay();
        d.Tuesday = new WDay();
        d.Wednesday = new WDay();
        d.Thursday = new WDay();
        d.Friday = new WDay();
        d.Saturday = new WDay();
        d.Sunday = new WDay();
        d.Current = new WDay();

        WDay forecast = new WDay();
        var conditions = d;
        var xmlConditions = new XmlDocument();
        XDocument api = XDocument.Load(urlstring);
        api.Save("api.xml");
        xmlConditions.Load(string.Format(@"api.xml"));
        if (xmlConditions.SelectSingleNode("xml_api_reply/weather/problem_cause") != null)
        {
            conditions = null;
        }
        else
        {

            var singleNode = xmlConditions.SelectSingleNode("xml_api_reply/weather/current_conditions/condition");
            if (singleNode != null)
                if (singleNode.Attributes != null)
                    conditions.Current.WeatherText =
                        singleNode.Attributes[
                            "data"].InnerText;
            var node = xmlConditions.SelectSingleNode("xml_api_reply/weather/current_conditions/temp_c");
            if (node != null)
                if (node.Attributes != null)
                    conditions.Current.TempCurrentC =
                        node.Attributes["data"]
                            .InnerText;
            var selectSingleNode1 = xmlConditions.SelectSingleNode("xml_api_reply/weather/current_conditions/temp_f");
            if (selectSingleNode1 != null)
                if (selectSingleNode1.Attributes != null)
                    conditions.Current.TempCurrentF =
                        selectSingleNode1.Attributes["data"]
                            .InnerText;
            var singleNode1 = xmlConditions.SelectSingleNode("xml_api_reply/weather/current_conditions/humidity");
            if (singleNode1 != null)
                if (singleNode1.Attributes != null)
                    conditions.Current.Humidity =
                        singleNode1.Attributes[
                            "data"].InnerText;
            var xmlNode1 = xmlConditions.SelectSingleNode("xml_api_reply/weather/current_conditions/wind_condition");
            if (xmlNode1 != null)
                if (xmlNode1.Attributes != null)
                    conditions.Current.WindSpeedM =
                        xmlNode1.Attributes
                            ["data"].InnerText;

            if (xmlConditions.SelectSingleNode("xml_api_reply/weather/problem_cause") != null)
            {
                conditions = null;
            }
            else
            {
                XmlNodeList list = xmlConditions.SelectNodes("/xml_api_reply/weather");
                foreach(XmlNode node1 in list)
                {
                    XmlNodeList days = node1.SelectNodes("forecast_conditions");
                    foreach (XmlNode doo in days)
                    {
                        string dow = doo.SelectSingleNode("day_of_week").Attributes["data"].InnerText;
                        switch (dow)
                        {
                            case "Mon":
                                forecast = d.Monday;
                                break;
                            case "Tue":
                                forecast = d.Tuesday;
                                break;
                            case "Wed":
                                forecast = d.Wednesday;
                                break;
                            case "Thu":
                                forecast = d.Thursday;
                                break;
                            case "Fri":
                                forecast = d.Friday;
                                break;
                            case "Sat":
                                forecast = d.Saturday;
                                break;
                            case "Sun":
                                forecast = d.Sunday;
                                break;
                        }
                        forecast.WeatherText = doo.SelectSingleNode("condition").Attributes["data"].InnerText;
                        forecast.TempHiF = doo.SelectSingleNode("high").Attributes["data"].InnerText;                         
                    }
                }       
            }
            } 
```

# xml - How do I get the value from a specific node in an XML file?

> ID：10725820
> 
> 赞同：6
> 
> 时间：2012-05-23T18:33:18.540
> 
> 标签：xml, vb.net, linq, xpath, xml-serialization

From this XML code:

```
<?xml version="1.0" encoding="utf-8"?>
<Tabel>
  <Member>
    <Naam>Cruciatum</Naam>
    <Kills>1000</Kills>
    <Deaths>10</Deaths>
    <KD>100</KD>
  </Member>
  <Member>
    <Naam>Ghostbullet93</Naam>
    <Kills>10</Kills>
    <Deaths>1</Deaths>
    <KD>10</KD>
  </Member>
</Tabel> 
```

How can I get (for example) the 10 next to `<Kills>` ?

I've tried multiple things without any success. One of the ideas I had was using this code:

```
Dim doc = XDocument.Load("C:\members.xml")
        Dim members = From m In doc.Element("Tabel").Elements("Member")
                      Select naam = m.Element("Naam").Value
        For Each member In members
            lstmembers.Items.Add(member)
        Next 
```

But I can't figure out how to edit that snippet to work with what I need it to do now.

(The above code works perfectly for where it's used.)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T18:37:12.527

You can also use XPath to read the element's value:

```
Dim doc As XmlDocument = New XmlDocument()
doc.Load("C:\members.xml")
Dim kills As String = doc.SelectNode("Tabel/Member[Naam='Ghostbullet93']/Kills").InnerText 
```

If, however, you intend to load and use all the data, it would be far easier to use serialization. To do that, you first need to create classes that mimic the XML structure (for simplicity sake I'll just use public string fields, but it would be better to use properties):

```
Public Class Member
    Public Naam As String
    Public Kills As Integer
    Public Deaths As Integer
    Public KD As Integer
End Class

Public Class Tabel
    <XmlElement("Member")> _
    Public Members As List(Of Member)
End Class 
```

Then deserialize the XML like this:

```
Dim serializer As XmlSerializer = New XmlSerializer(GetType(Tabel))
Dim tabel As Tabel = CType(serializer.Deserialize(File.OpenRead("C:\members.xml")), Tabel)
For Each member As Member in tabel
    Dim kills As Integer = member.Kills
Next 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:49:57.930

`XPath` or `XmlDeserialization` a recommended by Steve are excellent options, but for a pure `LINQ` solution, you just need to add an appropriate `Where` clause to your query.

```
Dim doc = XDocument.Load("C:\members.xml")
Dim members = From m In doc.Element("Tabel").Elements("Member")
              Where m.Element("Naam").Value = "Ghostbullet93"
              Select kills = m.Element("Kills").Value 
```

`members` will still be an `IEnumerable<String>` in this example, so if you only have 1 object, you need to do something like:

```
Dim member = members.First()  // will throw exception if collection is empty 
```

or

```
Dim member = members.Single()  // will throw exception if collection is empty or has 2 or more elements 
```

(My vb.NET is extremely rusty, so please forgive any syntax errors).

# php - PHP电子邮件发送错误

> ID：10725821
> 
> 赞同：1
> 
> 时间：2012-05-23T18:33:20.127
> 
> 标签：php, sockets, email, pear

我正在尝试编辑使用 PEAR 发送电子邮件的 PHP 代码。以下代码已在公司服务器上运行，但在我使用 localhost 时似乎无法在我的计算机上运行。

```
 $headers = array ('From' => $from,

        'To' => $to,

            'Subject' => $subject);     

    //Send the Actual Mail

    $smtp = Mail::factory('smtp',

        array ( 'host' => $host,

            'auth' => false,

            'username' => $username,

            'password' => $password));

    $mail = $smtp->send($to, $headers, $body);

    if (PEAR::isError($mail)) 

    {

        echo($mail->getMessage());

    }

    else 

    { 

        echo("<p>Message successfully sent!<p>");

    } 
```

$headers 中的项目是前面定义的，不用担心。echo($mail->getMessage()); 返回的错误 如下：

无法连接到本地主机：25 [SMTP：无法连接套接字：连接被拒绝（代码：-1，响应：）]

我在运行 Ubuntu 的机器上。不确定是否需要任何其他信息。

# objective-c - 如何确定 box2d 主体是否接触传感器的中心？

> ID：10725822
> 
> 赞同：0
> 
> 时间：2012-05-23T18:33:24.460
> 
> 标签：objective-c, cocos2d-iphone, box2d

我有一个传感器，它对在其范围内移动的物体施加力。我想确定一个身体是否正在接触该传感器的中心。

我可以轻松检测物体是否在传感器内部/接触传感器或另一个物体，但我不确定如何检查物体是否在给定传感器的中心。

编辑：传感器实际上是我在[这个问题](https://stackoverflow.com/q/10670991/459116)中询问的涡流。当物体接触（或实际上在其中或之上）传感器时，它会向其自身的中点施加力。当物体到达中点时，我希望它们做一些事情，但我不确定如何检查给定的身体是否在接触/在传感器的边界内并接触到它的中点。

在下面的（画得非常好）图中，蓝色圆圈是传感器，绿色圆圈是身体，小蓝点是中点。

![在此处输入图像描述](../Images/26e87d6c346693477d237fa4ae033556.png)

更新：最后我在中间放了一个传感器并检查了它——这是最简单的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:04:36.180

我认为这会奏效。

1.  将传感器的世界位置转换为您要测试的身体的局部点。
2.  循环遍历 body 的所有夹具，并检查您转换的本地点是否在夹具中。
3.  如果你找到一个，打破。否则它不会接触到身体的中心。

我的Objective-C不好，所以我会用C++写一个代码示例：

```
bool checkForTouchingCenter(b2Body *sensorBody, b2Body *bodyToTest)
{

    b2Vec2 sensorPosition = sensorBody->GetPosition();
    b2Vec2 localPosition = bodyToTest->GetLocalPoint(sensorPosition);

    // An AABB check would be nice here, unless you test only the bodies that
    // are already touching the sensor.

    for (b2Fixture *fixture = bodyToTest->GetFixtureList(); fixture != 0; fixture = fixture->GetNext())
    {
        if (fixture->TestPoint(localPosition))
        {
            return true;
        }
    }
    return false;

} 
```

提示：仅测试已经接触传感器的物体。

# ruby - 正则表达式捕获存储过程定义

> ID：10725824
> 
> 赞同：0
> 
> 时间：2012-05-23T18:33:29.657
> 
> 标签：ruby, regex

我有一个定义了存储过程的文件，如下所示：

```
CREATE        PROCEDURE [XXXX].[procedure_name_here] 
```

到目前为止，我的正则表达式是：

```
\.\[.*\]+.* 
```

参考：[http ://rubular.com/r/Z0FiI78bqF](http://rubular.com/r/Z0FiI78bqF)

我需要一些帮助，因为它似乎不是 100% 正确的。

注：[xxxx]。部分可能存在也可能不存在（可选），但必须存在 CREATE 一词，否则它将是另一个调用存储过程的存储过程，我只是在寻找实际定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:40:20.127

如果您可以依靠点后立即在方括号之间的过程名称，那么您可以编写

```
\.\[(.*?)\] 
```

括号将为您捕获过程名称字符串。

如果点是可选的，或者您需要更多验证该行是过程定义，则使用

```
CREATE\s+PROCEDURE\s+(?:\[.*?\]\.)?\[(.*?)\] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T18:49:31.163

SQL 不是常规语言。这意味着它不能用正则表达式正确解析。为 SQL 编写正确的解析器当然是可能的，当然也可以为您关心的 SQL 子集编写正确的解析器。但是仅使用正则表达式是不可能的。

您可以使用正则表达式作为猜测。但是，根据正则表达式的选择，您会得到误报（正则表达式表示某些文本不是有效的 SQL）和误报（正则表达式表示某些文本实际上是无效的 SQL）完全有效。

所以你只剩下：要么为 SQL 编写一个正确的解析器，要么编写一个能够做出最佳猜测的正则表达式——并确保你所有的 SQL 文件都被编写为传递该正则表达式。

# jquery - 只追加一次 html 的最佳方法是什么？

> ID：10725826
> 
> 赞同：0
> 
> 时间：2012-05-23T18:33:34.983
> 
> 标签：jquery, append, toggle

当我单击“显示评论”链接时，我想打开一个 Div 并附加 Facebook 评论框。但我只想附加一次 FB-Comments，然后只需使用链接来切换该 Div。

我正在尝试这样的事情，但每次点击链接时它都会附加它，当然......

[http://jsfiddle.net/4LnzD/](http://jsfiddle.net/4LnzD/)

谢谢！！

**更新：**

[http://jsfiddle.net/4LnzD/4/](http://jsfiddle.net/4LnzD/4/)

现在它工作得很好，但如果有人知道最有效的方法，不客气！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:36:04.967

添加内容后，为目标元素添加类名。在第二次添加之前检查类名是否存在。

1）添加类

```
$('#target').addClass("done") 
```

2）检查类

```
if($('#target').hasClass("done")) {
 ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:45:51.590

检查评论 div 是否已经存在于 DOM 中，如果不存在则追加：

```
if( ! $('#fb_comments_' + uid).children(".fb-comments").length ){
  $('#fb_comments_' + uid).append(commentBox);
}

$('#fb_comments_' + uid).toggle(); 
```

.length 将返回在 DOM 中匹配该选择器的元素实例的数量。由于 0 相当于 javascript 中的 false，我们可以将其视为条件中的布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:37:46.177

采用：

```
$(document).load( function() {
    //Load comments section here
    $('.fb_comments').hide(); 
}) 
```

这将创建评论，但随后隐藏它们。然后创建按钮，并`onClick`（或绑定一个`.click()`）调用它：

```
$('.fb_comments').toggle(); 
```

# gwt - 使用 gwtquery，我们如何选择属性值包含多个单词的元素？

> ID：10725827
> 
> 赞同：1
> 
> 时间：2012-05-23T18:33:35.713
> 
> 标签：gwt, css-selectors, gwtquery

假设我想选择一个元素，例如

```
<div class="my class">InnerHTML</div> 
```

虽然这可以使用带有 的 CSS 选择器轻松完成`[class="my class"]`，[但 gwtquery](http://code.google.com/p/gwtquery/)的不同之处在于它不使用输入中的引号。它只接受像`[attribute=attributevalue]`.

当我在 GQuery 中应用相同的选择器并且中间有空格时，它没有返回任何匹配项。我有一种感觉，这可能是因为库中对这种情况的一些不正确的解析。是这样吗？

如果是这样，有没有其他方法可以使用 GQuery 选择这些元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T21:17:53.280

它对我有用（至少使用 gwtquery-1.1.0 和 gwt 2.4.0）

```
GQuery myClassDivs = $("div[class=\"my class\"]"); 
```

返回匹配项`<div class="my class"/>`。

* * *

但是，对于该`class`属性，通常最好使用`~=`选择器来代替，因为通常应该将`<div class="my class"/>`and`<div class="class my"/>`视为等效。

所以我建议使用

```
GQuery myClassDivs = $("div[class~=my][class~=class]"); 
```

这也将选择类似的东西`<div class="my class special"/>`，这通常是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T05:23:24.840

通常，要选择以空格分隔的单词的属性，您将使用[Chris Lercher 提到](https://stackoverflow.com/a/10727990/106224)`[att~=val]`的选择器。

或者，你知道，既然你是按`class`属性选择的，你可以只使用类选择器：

```
GQuery myClassDivs = $("div.my.class"); 
```

关于这一点：

> 当我在 GQuery 中应用相同的选择器并且中间有空格时，它没有返回任何匹配项。我有一种感觉，这可能是因为库中对这种情况的一些不正确的解析。是这样吗？

如果您指的是在未引用的属性值中添加空格，则这不是库中的解析错误。选择器本身是无效的，因为未加引号的属性值中的空格是显式无效的。

如果无法识别引用的属性值，则*这*是库中的解析错误。

# sql-server - TABLESAMPLE 返回错误的行数？

> ID：10725839
> 
> 赞同：11
> 
> 时间：2012-05-23T18:34:20.310
> 
> 标签：sql-server, tsql, sql-server-2005

我刚刚发现了该[`TABLESAMPLE`](http://msdn.microsoft.com/en-us/library/ms189108%28v=sql.90%29.aspx)子句，但令人惊讶的是它没有返回我指定的行数。

我使用的表有约 1400 万行，我想要一个 10000 行的任意样本。

```
select * from tabData TABLESAMPLE(10000 ROWS) 
```

每次执行时，我得到的不是 10000，而是不同的数字（在 8000 到 14000 之间）。

这是怎么回事，我是否误解了 的预期目的`TABLESAMPLE`？

**编辑**：

[大卫的链接](http://www.mssqltips.com/sqlservertip/1308/retrieving-random-data-from-sql-server-with-tablesample/)很好地解释了它。

这以一种有效的方式总是返回 10000 个大致随机的行：

```
select TOP 10000 * from tabData TABLESAMPLE(20000 ROWS); 
```

并且该`REPEATABLE`选项有助于始终保持不变（除非数据已更改）

```
select TOP 10000 * from tabData TABLESAMPLE(10000 ROWS) REPEATABLE(100); 
```

因为我想知道使用`TABLESAMPLE`大量行来确保（？）我得到正确的行号是否更昂贵，所以我测量了它；

1.循环（20次）：

```
select TOP 10000 * from tabData TABLESAMPLE(10000 ROWS);

(9938 row(s) affected)
(10000 row(s) affected)
(9383 row(s) affected)
(9526 row(s) affected)
(10000 row(s) affected)
(9545 row(s) affected)
(9560 row(s) affected)
(9673 row(s) affected)
(9608 row(s) affected)
(9476 row(s) affected)
(9766 row(s) affected)
(10000 row(s) affected)
(9500 row(s) affected)
(9941 row(s) affected)
(9769 row(s) affected)
(9547 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(9478 row(s) affected)
First batch(only 10000 rows) completed in: 14 seconds! 
```

2.循环（20次）：

```
select TOP 10000 * from tabData TABLESAMPLE(10000000 ROWS);

(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
(10000 row(s) affected)
Second batch(max rows) completed in: 13 seconds! 
```

3.loop：使用 ORDER BY NEWID() 对 100% 随机行进行反检查：

```
select TOP 10000 * from tabData ORDER BY NEWID();

(10000 row(s) affected) 
```

**在持续23 分钟**的一次执行后取消

 ****结论**：

令人惊讶的是，具有精确`TOP`子句和大量 in`TABLESAMPLE`的方法**并不**慢。因此，`ORDER BY NEWID()`如果行不是每行随机而是每页级别无关紧要（表的每个 8K 页被赋予一个随机值），这是一个非常有效的替代方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:39:42.633

请参阅[此处的文章](http://www.mssqltips.com/sqlservertip/1308/retrieving-random-data-from-sql-server-with-tablesample/)。您需要添加一个 top 子句和/或使用可重复选项来获取您想要的行数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T18:59:23.717

从文档。

> 返回的实际行数可能会有很大差异。如果您指定一个较小的数字，例如 5，您可能不会在样本中收到结果。

[http://msdn.microsoft.com/en-us/library/ms189108(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms189108(v=sql.90).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T18:39:33.683

此行为之前已记录在案。[这里](http://blog.sqlauthority.com/2007/05/27/sql-server-2005-limiting-result-sets-by-using-tablesample-examples/)有一篇很好的文章。

我相信您可以通过每次使用相同的种子传递 REPEATABLE 来修复它。以下是文章的摘录：

> ...您会注意到每次都返回不同数量的行。在没有任何数据更改的情况下，重新运行相同的查询会不断给出不同的结果。这是 TABLESAMEPLE 子句的非确定性因素。如果表是静态的并且行未更改，则可能是在每次执行中返回不同数量的行的原因。系数为 10 PERCENT 不是表行或表记录的百分比，而是表数据页的百分比。一旦选定数据的样本页，则返回选定页中的所有行，它不会限制从该页中采样的行数。所有页面的填充因子取决于表的数据。这使得脚本每次执行时都会在结果集中返回不同的行数。REPEATABLE 选项使选定的样本再次返回。当 REPEATABLE 使用相同的 repeat_seed 值指定时，只要没有对表进行任何更改，SQL Server 就会返回相同的行子集。当 REPEATABLE 使用不同的 repeat_seed 值指定时，SQL Server 通常会返回表中行的不同样本。.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T18:54:14.297

我观察到了同样的情况。

页面解释绝对有意义并敲响了警钟 - 当您的行大小固定时，您应该看到更多可预测的行数。在没有可为空或可变长度列的表上尝试它。

事实上，我只是用它来证明一个关于用它来更新的理论（你可能被我提出的同一个问题所激发），而选择 TABLESAMPLE (50000 ROWS) 实际上影响了 49,849 行。**

# sql - SUM 直到某个点

> ID：10725846
> 
> 赞同：0
> 
> 时间：2012-05-23T18:34:52.597
> 
> 标签：sql, sql-server, tsql

我有一张库存交易表。我需要选择最后几笔交易的日期，直到调整后的数量大于当前库存中的数量。

我正在处理三列：`item, transaction_date, adj_qty`. 每个项目将有多个交易日期和调整数量。

如何返回每个项目的所有 transaction_dates，直到项目达到某个阈值（即累积 100）。假设第一个项目有 2000 笔交易，最后五笔交易的数量均为 21。我希望查询返回最后 5 笔交易，因为那是该项目达到 100 的时候。

如果可能的话，我想在没有循环或光标的情况下执行此操作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:44:43.927

您需要的是累积总和。这是内置在 SQL Server 2012 中的。

唉，有了这个，你需要通过自我加入来做到这一点：

```
select t.item, t.transaction_date, t.adj_qty, 
       sum(tprev.adj_qty) as CumSum
from t t join
     t tprev
     on t.item = tprev.item and
        t.transaction_date >= tprev.transaction_date
group by t.item, t.transaction_date, t.adj_qty
having 100 between sum(tprev.adj_qty) -t.adj_qty + 1 and sum(tprev.adj_qty) 
```

注意使用 self join 和 group by 来做累计和。不愉快，但没有 SUM() over (partition by) 函数中的 order 子句是必要的。此累积总和将从项目的第一条记录（按交易日期）到任何其他记录相加。

HAVING 子句然后选择您正在查找的行，其中累积总和已超过某个阈值。

# css - css @font-face 根本不起作用

> ID：10725849
> 
> 赞同：1
> 
> 时间：2012-05-23T18:35:23.373
> 
> 标签：css, font-face

我需要通过`@font-face`. 我遵循了一些教程，结果它对我不起作用。

**CSS：**

```
@font-face{
    font-family:'GESSTwoLightRegular';
    src:url('../fonts/ge_ss_two_light-webfont.eot'); 
    src: url('../fonts/ge_ss_two_light-webfont.eot?#iefix') format('embedded-opentype'), 
         url('../fonts/ge_ss_two_light-webfont.woff') format('woff'), 
         url('../fonts/ge_ss_two_light-webfont.ttf') format('truetype'), 
         url('../fonts/ge_ss_two_light-webfont.svg#gess') format('svg'), 
         url(ge_ss_two_light-webfont.otf) format('opentype');
    font-weight:normal;
    font-style:normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:45:44.017

试试这个[http://fontface.codeandmore.com/](http://fontface.codeandmore.com/)

上传要在字体中使用的字体，然后该程序将生成 css 和所有字体类型。

# file - 在 Magento 中禁用和删除项目的文件/代码位置？

> ID：10725852
> 
> 赞同：0
> 
> 时间：2012-05-23T18:35:40.530
> 
> 标签：file, magento, product

我正在寻找在 magento中**禁用**产品的**代码位置**以及从 Magento中**删除项目？**

 ****相同的**文件/函数**名称是什么？

我们如何在该页面上禁用或删除产品 ID？

在后端，我们可以通过**两种方式删除产品**-：

1.  通过选择多个项目然后将操作提交为删除
2.  打开每个单独的项目，然后删除该项目

这两个代码/功能是否相同？如果没有，请为我提供两种方式的代码/文件位置..

请指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T17:41:46.663

对于海量删除产品功能，你可以在类中找到这个函数：Mage_Adminhtml_Catalog_ProductController，动作：massDeleteAction()。

您还可以在同一控制器中找到 deleteAction() 来删除单个产品。

希望这对你有帮助。****

# gwt - GWT MouseClickEvent 与 MouseDownEvent

> ID：10725854
> 
> 赞同：0
> 
> 时间：2012-05-23T18:35:49.177
> 
> 标签：gwt

有没有标准的方法来分离 GWT 中的 MouseClick 和 MouseDown 事件？

如果我单击并按住按钮，我仍然会与 MouseUp 一起获得 MouseClick 事件。

如果我只是单击，我仍然会与 MouseClick 一起获得 MouseDown 事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T01:52:48.850

这些事件有一些不同。处理您在特定情况下需要的事件。

问题是，在一般情况下，`ClickEvent`包括`MouseDownEvent`并且 `MouseUpEvent` 没有它们就不能发生。`MouseDownEvent`和`MouseUpEvent`前面`ClickEvent`。`ClickEvent`方法同上`DoubleClickEvent`。但`MouseDownEvent`不保证`ClickEvent`会发生。

*   `MouseDownEvent`每次用户按下任何元素内的鼠标按钮之一时都会发生。

*   `MouseUpEvent`当用户释放任一鼠标按钮时发生。

*   并由`ClickEvent`这两个事件组成。`ClickEvent`当同一元素上同时存在这两个事件时发生。它类似于鼠标按下和鼠标按下事件的组合。与和不同，`ClickEvent`仅针对鼠标左键生成。`MouseDownEvent``MouseUpEvent`

这`ClickEvent`是当鼠标在元素上向下然后向上时生成的。但是，鼠标必须停留在同一个元素内，否则不会发生。

例如，您按下鼠标并移出元素并释放它。`ClickEvent`不会生成，但`MouseDownEvent`在这种情况下会生成。

如果您按下鼠标并移出元素，然后移回，然后释放它。`ClickEvent`会发生。也`MouseDownEvent`有`MouseUpEvent`意志。

如果用户确实点击了，那么这是事件序列：

1.  鼠标按下事件
2.  MouseUp事件
3.  点击事件

`ClickEvent`仅在用户释放鼠标按钮后触发。

Butt 有一种方法可以在`ClickEvent`不生成`MouseDownEvent`and的情况下创建`MouseUpEvent`：

*   如果用户使用 Tab 键将焦点移动到链接并按 Enter 键，则会触发 click 事件，但不会触发 MouseDown 和 MouseUp 事件。

或者，您可以打开链接而不生成`ClickEvent`：

*   单击链接上的右键并选择下拉列表中的一项（仅在这种情况下`MouseDownEvent`会`MouseUpEvent`触发）
*   您也可以拿起一个链接并将其拖动到新标签

# android - 视图翻转器不翻转

> ID：10725855
> 
> 赞同：0
> 
> 时间：2012-05-23T18:35:50.563
> 
> 标签：android, viewflipper

这甚至可能吗？我创建了这个视图翻转器，我从 xml 布局内部的 onClick 调用视图翻转器。我之前创建了一个视图翻转器，但由于某种原因它不起作用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:cacheColorHint="@android:color/transparent"
    android:orientation="vertical" >

    <ViewFlipper
        android:id="@+id/viewFlipper1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@null"
        android:cacheColorHint="@android:color/transparent" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/vf_sample1_main"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:cacheColorHint="@android:color/transparent"
            android:orientation="vertical" >

            <include layout="@layout/headers_main" />

            <include layout="@layout/searchbar" />

            <TextView
                android:id="@+id/sdfsd"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:gravity="center_horizontal"
                android:maxHeight="85dp"
                android:paddingBottom="10dp"
                android:paddingTop="10dp"
                onClick="gotoSomething"
                android:singleLine="false" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="@color/aquablue"
                android:textSize="15dp"
                android:textStyle="bold" />

            <include layout="@layout/listview_item_row_now_playing_info" />

            <TextView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="@color/aquablue"
                android:textSize="15dp"
                android:textStyle="bold" />

            <include layout="@layout/container_listview" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/vf_sdfsdfadf"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@null"
            android:cacheColorHint="@android:color/transparent"
            android:orientation="vertical" >

            <include layout="@layout/header_vf_asdfasdfadadafsd" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/vf_adsfasdfadsfasd"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="@null"
            android:cacheColorHint="@android:color/transparent"
            android:orientation="vertical" >
        </LinearLayout>

    </ViewFlipper>

</LinearLayout> 
```

代码：

```
 public class BeatSpotPrototypeActivity extends BaseListActivity {
        private final String TAG = BeatSpotPrototypeActivity.class.getSimpleName();
        private ApplicationStateManager mAppStateMananger = ApplicationStateManager.GetInstance();
        private Context mCtx = null;
        private boolean mIsInitalized = false;
        private boolean mDataChanded= false;
        private ViewFlipper mViewFlipper= null;
        private DrawableManager mDrawManager = new DrawableManager();
        private enum ViewFlipperModes {
            MAIN (0),
            NOW_PLAYING (1),
            SONG_INFORMATION (2);

            private final int index;   

            ViewFlipperModes(int index) {
                this.index = index;
            }

            public int index() { 
                return index; 
            }
        }
        </code>
    <code>
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main_beatspot_activity);

            if (!mIsInitalized)
                init();
            else
                mDataChanded = true;
            showLoading(false);

        }

        private void init() {
            mCtx                                            = this;
            mIsInitalized                                   = true;
            mViewFlipper                                    = (ViewFlipper)findViewById(R.id.viewFlipper);
            fadeDrawables();
        }

        public void gotoBeatspotMain(View v) {
            mViewFlipper.setDisplayedChild(ViewFlipperModes.MAIN.index());
        }

        public void gotoNowPlaying(View v) {
            Log.d(TAG, mViewFlipper.getCurrentView().toString());
            mViewFlipper.setDisplayedChild(ViewFlipperModes.NOW_PLAYING.index());
        }

        public void gotoSongDetails(View v) {
            mViewFlipper.setDisplayedChild(ViewFlipperModes.SONG_INFORMATION.index());
            Log.d(TAG, String.valueOf(ViewFlipperModes.SONG_INFORMATION.index()));
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:39:52.820

`setDisplayedChild`需要一个索引，而不是一个 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T16:59:41.967

在创建之前

```
ViewFlipper mViewFlipper = (ViewFlipper)findViewbyId(location); 
```

在你的 onCreate() 或 onStart

> 确保您在 setcontentView(R.layout.something) 上的任何布局都包含视图翻转器

也给我试试这个。在此行之前 mViewFlipper.setDisplayedChild(ViewFlipperModes.MAIN.index()); 输入：

```
int i = (ViewFlipperModes.MAIN.index()); place a debug point here
mViewFlipper.setDisplayedChild(i); 
```

我还建议使用调试器来尝试确定您的翻转视图事件是否在调试器中被调用。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/book_as_whole_Layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#FFFFFF">

    <ViewFlipper 
            android:layout_marginTop="20dip"
            android:layout_marginLeft="20dip"
            android:layout_marginRight="20dip"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/ViewFlipper">
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <TextView 
            android:id="@+id/page1"
            android:text="@string/loading_string"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textColor="#000000"
            android:typeface="serif"/>  

        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        <TextView 
            android:id="@+id/page2"
            android:text="@string/loading_string"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:textColor="#000000"
            android:typeface="serif" />  
        </LinearLayout>

    </ViewFlipper>

</LinearLayout> 
```

# r - ggplot2 dotplot with facet_grid，顶部有标签 ala facet_wrap（但带有空格 =“free_x”）？

> ID：10725856
> 
> 赞同：2
> 
> 时间：2012-05-23T18:35:52.247
> 
> 标签：r, ggplot2

我真的很喜欢我的 dotplot 与 facet_wrap （顶部的 facet 标签）的外观，但理想情况下，我希望能够传递一个空格 = "free_x"，以便调整 facet 的大小。facet_grid 的问题是构面标签移动到绘图的一侧，在这种情况下效果不佳，因为我希望每个面板都分开。

代码如下：

```
# load data
plotdat <- structure(list(level = c("Lost (N =328)", "Won (N =75)", "Lost (N =10)", 
                        "Won (N =65)", "Challenger (N =318)", "Incumbent (N =85)", "Arab (N =7)", 
                        "Black (N =222)", "East Asian (N =40)", "Latino (N =107)", "Other (N =10)", 
                        "South Asian (N =17)", "Not (N =252)", "Statewide (N =151)"), 
                mean = c(0.59834264517378, 0.645308353066667, 0.6382179387, 
                        0.646399186046154, 0.595756747751572, 0.649457274258823, 
                        0.682776774142857, 0.557334915725225, 0.6654738063, 0.68260777364486, 
                        0.6061308922, 0.613378378411765, 0.616298597519841, 0.591703758423841
                ), se = c(0.00597842210656315, 0.0113080614816089, 0.044927778673023, 
                        0.011274258338002, 0.00622316181664198, 0.00900474213888581, 
                        0.0247451786416615, 0.00690804451732034, 0.0116899960061005, 
                        0.00777478853477299, 0.0183766282892234, 0.0166464474073244, 
                        0.00669527297092827, 0.00887170639612841), N = c(328L, 75L, 
                        10L, 65L, 318L, 85L, 7L, 222L, 40L, 107L, 10L, 17L, 252L, 
                        151L), var = structure(c(1L, 1L, 2L, 2L, 3L, 3L, 4L, 4L, 
                                4L, 4L, 4L, 4L, 5L, 5L), .Label = c("Primary Election", "General Election", 
                                "Incumbency", "Race", "Statewide District"), class = "factor")), .Names = c("level", 
                "mean", "se", "N", "var"), row.names = c(NA, 14L), class = "data.frame")
library('ggplot2')

# with facet_wrap:
ggplot(plotdat, aes(x = mean, xmin = mean-se, xmax = mean+se, y = level)) + 
    geom_point() + geom_segment( aes(x = mean-se, xend = mean+se, 
                    y = level, yend=level)) +
    facet_wrap(~var, ncol=1, scales = "free_y") +
    theme_bw() + opts(axis.title.x = theme_text(size = 12, vjust = .25))+ 
    xlab("Mean V (Brightness) for Candidate's Face") + ylab("") +
    opts(title = expression("Skin Complexion for 2010 Minority Candidates"))

# with facet_grid:
ggplot(plotdat, aes(x = mean, xmin = mean-se, xmax = mean+se, y = level)) + 
    geom_point() + geom_segment( aes(x = mean-se, xend = mean+se, 
                    y = level, yend=level)) +
    facet_grid(var~., scales = "free_y", space = "free_y") +
    theme_bw() + opts(axis.title.x = theme_text(size = 12, vjust = .25))+ 
    xlab("Mean V (Brightness) for Candidate's Face") + ylab("") +
    opts(title = expression("Skin Complexion for 2010 Minority Candidates")) 
```

有什么建议么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T19:33:12.863

**更新** 使用 ggplot grob，这很容易做到。看[这里](https://stackoverflow.com/questions/20638294/geom-tile-and-facet-grid-facet-wrap-for-same-height-of-tiles/20639481#20639481)或[这里](https://stackoverflow.com/questions/28093412/labels-on-top-with-facet-grid-or-space-option-with-facet-wrap/28099801#28099801)

**ggplot grob 版本**

```
library(ggplot2)
library(dplyr)
library(grid)

# Get the plot; plotdat data frame is below
p = ggplot(plotdat, aes(x = mean, xmin = mean-se, xmax = mean+se, y = level)) + 
    geom_point() + geom_segment( aes(x = mean-se, xend = mean+se, 
                    y = level, yend=level)) +
    facet_wrap(~var, ncol=1, scales = "free_y") +
    theme_bw() + theme(axis.title.x = element_text(size = 12, vjust = .25))+ 
    xlab("Mean V (Brightness) for Candidate's Face") + ylab("") +
    ggtitle("Skin Complexion for 2010 Minority Candidates")

# From 'plotdat', get the number of 'levels' for each 'var'.
# That is, the number y-breaks in each panel.
N <- plotdat %>% group_by(var) %>% 
   summarise(count = n()) %>% 
   `[[`(2)

# Get the ggplot grob
gt = ggplotGrob(p) 

# Get the locations of the panels in the gtable layout.
panels <- gt$layout$t[grepl("panel", gt$layout$name)]

# Replace the default panel heights with relative heights
gt$heights[panels] <- unit(N, "null")

## Draw gt
grid.newpage()
grid.draw(gt) 
```

![在此处输入图像描述](../Images/bee413c93ac8b55c7b772091a08dfa02.png)

**原始答案** **编辑：**更新到`ggplot2`版本 0.9.3.1

这不会回答你的问题。它调整了`facet_grid`外观。

我不确定“每个面板都分开”是什么意思。如果您担心`facet_grid`绘图中的条形文本超出条形边界，可以使用 旋转文本`theme(strip.text.y = element_text(angle = 0))`。`str_wrap`此外，可以使用包中的文本将文本环绕成多行`stingr`。

```
# load data
plotdat <- structure(list(level = c("Lost (N =328)", "Won (N =75)", "Lost (N =10)", 
                        "Won (N =65)", "Challenger (N =318)", "Incumbent (N =85)", "Arab (N =7)", 
                        "Black (N =222)", "East Asian (N =40)", "Latino (N =107)", "Other (N =10)", 
                        "South Asian (N =17)", "Not (N =252)", "Statewide (N =151)"), 
                mean = c(0.59834264517378, 0.645308353066667, 0.6382179387, 
                        0.646399186046154, 0.595756747751572, 0.649457274258823, 
                        0.682776774142857, 0.557334915725225, 0.6654738063, 0.68260777364486, 
                        0.6061308922, 0.613378378411765, 0.616298597519841, 0.591703758423841
                ), se = c(0.00597842210656315, 0.0113080614816089, 0.044927778673023, 
                        0.011274258338002, 0.00622316181664198, 0.00900474213888581, 
                        0.0247451786416615, 0.00690804451732034, 0.0116899960061005, 
                        0.00777478853477299, 0.0183766282892234, 0.0166464474073244, 
                        0.00669527297092827, 0.00887170639612841), N = c(328L, 75L, 
                        10L, 65L, 318L, 85L, 7L, 222L, 40L, 107L, 10L, 17L, 252L, 
                        151L), var = structure(c(1L, 1L, 2L, 2L, 3L, 3L, 4L, 4L, 
                                4L, 4L, 4L, 4L, 5L, 5L), .Label = c("Primary Election", "General Election", 
                                "Incumbency", "Race", "Statewide District"), class = "factor")), .Names = c("level", 
                "mean", "se", "N", "var"), row.names = c(NA, 14L), class = "data.frame")
library('ggplot2')
library(stringr)

plotdat$var = str_wrap(plotdat$var, width = 10)

# with facet_grid:
ggplot(plotdat, aes(x = mean, xmin = mean-se, xmax = mean+se, y = level)) + 
    geom_point() + geom_segment( aes(x = mean-se, xend = mean+se, 
                    y = level, yend=level)) +
    facet_grid(var~., scales = "free_y", space = "free_y") +
    theme_bw() + 
    ggtitle("Skin Complexion for 2010 Minority Candidates") +
    xlab("Mean V (Brightness) for Candidate's Face") + ylab("") +
    theme(axis.title.x = element_text(size = 12, vjust = .25), 
          strip.text.y = element_text(angle = 0)) 
```

如果“要分离的面板”表示“面板之间的额外空间” ，请`theme(panel.margin = unit(2, "line")`在加载后使用 , `grid`。

```
library(grid)
ggplot(plotdat, aes(x = mean, xmin = mean-se, xmax = mean+se, y = level)) + 
    geom_point() + geom_segment( aes(x = mean-se, xend = mean+se, 
                    y = level, yend=level)) +
    facet_grid(var~., scales = "free_y", space = "free_y") +
    theme_bw() + 
    ggtitle("Skin Complexion for 2010 Minority Candidates") +
    xlab("Mean V (Brightness) for Candidate's Face") + ylab("") +
    theme(axis.title.x = element_text(size = 12, vjust = .25), 
          strip.text.y = element_text(angle = 0),
          panel.margin = unit(2, "lines")) 
```

![在此处输入图像描述](../Images/f3331b633bc0c120f4906fd032905123.png)

# java - 在 Java 中合并 2 个 HashMap

> ID：10725862
> 
> 赞同：0
> 
> 时间：2012-05-23T18:36:11.700
> 
> 标签：java, android, dictionary, hashmap

我有一个程序需要合并两个`HashMap`. 哈希映射有一个键 a`String`和一个值 a `Integer`。合并的特殊条件是，如果键已经在字典中，则`Integer`需要将其添加到现有值中而不是替换它。这是我到目前为止抛出的代码`NullPointerException`。

```
public void addDictionary(HashMap<String, Integer> incomingDictionary) {
        for (String key : incomingDictionary.keySet()) {
            if (totalDictionary.containsKey(key)) {
                Integer newValue = incomingDictionary.get(key) + totalDictionary.get(key);
                totalDictionary.put(key, newValue);
            } else {
                totalDictionary.put(key, incomingDictionary.get(key));
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:46:43.150

如果你的代码不能保证`incomingDictionary`在它到达这个方法之前会被初始化，你将不得不做一个空检查，没有出路

```
public void addDictionary(HashMap<String, Integer> incomingDictionary) {
    if (incomingDictionary == null) {
        return; // or throw runtime exception
    }
    if (totalDictionary == null) {
        return;// or throw runtime exception
    }
    if (totalDictionary.isEmpty()) {
        totalDictionary.putAll(incomingDictionary);
    } else {
        for (Entry<String, Integer> incomingIter : incomingDictionary.entrySet()) {
            String incomingKey = incomingIter.getKey();
            Integer incomingValue = incomingIter.getValue();
            Integer totalValue = totalDictionary.get(incomingKey);
            // If total dictionary contains null for the incoming key it is
            // as good as replacing it with incoming value.
            Integer sum = (totalValue == null ? 
                                            incomingValue : incomingValue == null ? 
                                                    totalValue : totalValue + incomingValue
                          );
            totalDictionary.put(incomingKey, sum);
        }
    }
} 
```

考虑到 HashMap 允许 null 作为值，代码中另一个容易出现 NPE 的地方是

```
Integer newValue = incomingDictionary.get(key) + totalDictionary.get(key); 
```

如果这两个中的任何一个为空，您将获得 NPE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:57:45.100

您可能有一个未初始化的字典。这是一种解决方案：

```
public void addDictionary(HashMap<String, Integer> incomingDictionary) {
    if (incomingDictionary == null) {
        throw new IllegalArgumentException("incomingDictionary cannot be null.");
    }
    if (totalDictionary == null) {
        throw new IllegalArgumentException("totalDictionary cannot be null.");
        // or another solution:
        // totalDictionary = new HashMap<String, Integer>();
        // totalDictionary.putAll(incomingDictionary);
        // return;
    }

    for (Map.Entry<String, Integer> entry : incomingDictionary.entrySet()) {
        Integer oldValue = totalDictionary.get(entry.getKey());
        if (oldValue != null){
            // here entry.getValue() could be null!
            // Never put a null value in your Map, or add a test here
            Integer newValue = entry.getValue() + oldValue;
            totalDictionary.put(entry.getKey(), newValue);
        } else {
            totalDictionary.put(entry.getKey(), entry.getValue());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:45:55.907

考虑到`totalDictionary`正确初始化，在：

```
Integer newValue = incomingDictionary.get(key) + totalDictionary.get(key); 
```

`totalDictionary.get(key)`无法返回`null`。
也许你需要在之前添加这样的东西：

```
if(totalDictionary.get(key) == null)
  totalDictionary.put(key, 0); 
```

# iphone - 我应该买 2-3 岁的核心动画书吗？

> ID：10725864
> 
> 赞同：2
> 
> 时间：2012-05-23T18:36:20.050
> 
> 标签：iphone, core-animation

我想知道是否 a) 以 34 美元的价格从亚马逊购买“Core Animation：Mac 和 iPhone 开发的简化动画技术”，Marcus Zarra（作者），Matt Long，或者 b) 假设 iPhone 5 或 Xcode 6 或其他东西将在接下来的一两个月内发生（提示：WWDC），这可能表明我应该推迟并从 2012 年开始购买一本书，而不是 2009 年 12 月。

你有什么想法和/或猜测？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:47:14.063

我更喜欢你遵循[核心动画编程指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html)，因为 Apple 会每月更新它。如果您阅读并理解了所有内容，则无需去 2009 年或等待 3 或 4 个月，我也可以向您推荐[Core Animation CookBook](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreAnimation_Cookbook/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005406)以获得更好的参考和参考所有动画类型，如果您想玩，我更喜欢[这个](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Animation_Types_Timing/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006166)带图像，检查[这个](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html#//apple_ref/doc/uid/TP30001185)，如果你对 Quartz 2 Dimensional 和 3 Dimensional 感兴趣，检查[这个](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP30001066)

# javascript - 为什么 Firefox 允许禁用确认框？

> ID：10725865
> 
> 赞同：0
> 
> 时间：2012-05-23T18:36:27.273
> 
> 标签：javascript, firefox, confirm

在我的 Mac 上的 Firefox 上运行此示例[http://jsfiddle.net/yxzqY/](http://jsfiddle.net/yxzqY/)，大约一半的确认提示出现“防止此窗口创建更多对话框”复选框。我理解允许用户禁用警报，但确认框是控制流的一部分——单击确定或取消指示下一个事件序列——禁用它们会破坏应用程序。

我看到很多依赖于确认提示的应用程序，并且从未见过 Firefox 或任何其他浏览器这样做（目击者试图删除 StackOverflow 上的问题）——那么为什么会出现在这里？为什么它只是偶尔发生？我们如何才能完全防止它发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:47:13.927

据我所知，“阻止进一步对话”复选框的标准是在短时间内（在当前版本的 Firefox 中可能是 5 秒左右； Chrome 中的一两秒）。

在这些情况下添加它的原因是为了防止恶意页面将用户与无休止的对话序列捆绑在一起：

```
while(1) {
    alert("Is this annoying yet?");
} 
```

如果您希望您的应用程序将使用大量这样的确认对话框，我建议您使用 DOM 对话框（例如， http: [//jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)）而不是原生的`alert()`或`confirm()`.

# javascript - 滚动条的 Jquery Fancybox 可拖动问题

> ID：10725866
> 
> 赞同：3
> 
> 时间：2012-05-23T18:36:28.530
> 
> 标签：javascript, jquery, fancybox

我正在使用带有插件的 fancybox `jquery.easydrag.js`。这样做的原因是能够拖动fancybox。

它似乎工作正常，但是当花式框有滚动条时问题就来了。即，例如，当单击提交而不输入任何字段时，屏幕上的验证会导致滚动条。这通常很好，但滚动条会导致可拖动功能出现各种问题，因此当我尝试上下单击滚动条时，它实际上会移动整个窗口。因此，对于可以移动哪些内容以及如何处理滚动条似乎感到困惑。

```
 claimLink.fancybox({
        'width': 500,
        'height': 590,
        'autoDimensions': false,
        'onCleanup': function (e) {

            var modelClaimFormId = $j(e).attr("href").replace("body", "");
            var modalClaimForm = $j(modelClaimFormId);

            if (!($j(modalClaimForm).valid())) {
                $j(claimForm).remove();
                $j(e).parents("tr").remove();
            }

        }
    });

    $j("#fancybox-wrap").easydrag(true); 
```

编辑 ：

我设法为 input 和 textareas 添加了一些东西来忽略下面的滚动……只是想知道我可以为滚动条做什么。

```
 $j("#fancybox-wrap").easydrag(true);

            $j("#fancybox-wrap input,textarea").click(function(){
                $j("#fancybox-wrap").dragOff();
            });
            $j("#fancybox-wrap input,textarea").mouseover(function () {
                $j("#fancybox-wrap").dragOff();
            });
            $j("#fancybox-wrap input,textarea").blur(function () {
                $j("#fancybox-wrap").dragOn();
            });
            $j("#fancybox-wrap input,textarea").mouseout(function () {
                $j("#fancybox-wrap").dragOn();
            }); 
```

[这](http://fromvega.com/code/easydrag/jquery.easydrag.handler.beta2.js)是easydrag插件的JS链接

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T09:00:32.790

我在 2009 年为 v1.2.1 发布了关于如何使 fancybox 可拖动的[第一个示例。](http://jquery.diaz-cornen.com/fancybox/index_dragfancybox.html)然后我发布了一些注释以使其与 v1.3.1 一起使用[，如此处所示，](http://groups.google.com/group/fancybox/browse_thread/thread/9988b208404066b9/)但是当引入 fancybox v1.3.4 时，该`easyDrag`插件不像以前的版本那样流畅，并且开始出现错误。我没有时间找到解决方法......所以我放弃了它。

解决方案很简单：该`easyDrag`插件提供了一种设置“**处理程序**”的方法，如此处[所述，](http://fromvega.com/wordpress/2007/07/14/easydrag-jquery-plugin/)因此无需按住并拖动整个`#fancybox-wrap`容器，这会阻止访问滚动条（如果有），您只需从特定定义的元素拖动灯箱. 这样的**处理程序**可以附加到选择器并使用回调 API 选项`#fancybox-wrap`在 EasyDrag 插件中设置它，例如：`onComplete`

```
'onComplete': function(){
  // append the handler on the top-left corner of fancybox
   $("#fancybox-wrap").append("<button id='handler'>Drag me</button>");
  // set the handler using the handler's element ID
   $("#fancybox-wrap").setHandler('handler');
} 
```

请注意，您可以使用任何元素作为处理程序，在我的示例中，我使用了一个 html 按钮，但如果愿意，您可以使用图像。重要的是为处理程序分配最少的重要`css`属性，以便可以将其附加到`#fancybox-wrap`容器而不会出现以下问题：

```
width: 80px; /* or whatever needed */
height: 24px;
position: absolute; /* important to position the handler into the fancybox wrap */
top: 0; /* top-left corner of the box but can be anywhere */
left: 0;
display: block;
z-index: 1120; /* important to be over the box */ 
```

其他属性可以是化妆品。

看到它[在这里工作](http://www.picssel.com/playground/jquery/fancyboxDraggableScrollBars_25may12BIS.html)！

完成并提交表单后，响应将是一个带有滚动条的新花式框，您可以独立于 easyDrag 处理程序使用它。

请随时分析代码并根据自己的需要对其进行自定义（别忘了给我赏金；）

**更新**`#fancybox-wrap`：请注意，由于我们每次触发fancybox时都会将处理程序附加到容器中，因此我们需要在使用`onClosed`回调关闭fancybox时将其删除，否则如果再次打开fancybox并出现意外结果，我们将复制处理程序：

```
'onClosed' : function() {
  $("#fancybox-wrap #handler").remove();
} 
```

我也更新[了我的 DEMO](http://www.picssel.com/playground/jquery/fancyboxDraggableScrollBars_25may12BIS.html)。

**最后说明**：此解决方案适用于 fancybox *v1.3.4*。

我没有用*v2.x*测试过它，但我不明白为什么它不起作用。只需确保`EasyDrag`将处理程序绑定并附加到`.fancybox-wrap`选择器即可

```
$(".fancybox-wrap").easydrag(); 
```

您可以使用`afterShow`回调将处理程序附加到它并`afterClose`删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-14T21:19:09.503

使用上述解决方案为#fancybox-wrap 选择器添加处理程序以及使用onComplete 回调API 的EasyDrag 插件，我发现这与fancybox 1.3.4 标题元素很好地配合，以创建具有滚动功能的可拖动fancybox。使用标题，关闭后无需删除。

```
 <script type="text/javascript" src="@Url.Content("~/fancybox/jquery.mousewheel-3.0.4.pack.js")"></script>
 <script type="text/javascript" src="@Url.Content("~/fancybox/jquery.fancybox-1.3.4.pack.js")"></script> 
 <script src="@Url.Content("~/Scripts/jquery.easydrag.handler.beta2.js")" type="text/javascript"></script> 
 <script>    
     //Fancybox
     $(document).ready(function () {            
         $("#iframeVideoPop").fancybox({
             'width': 890,
             'height': 595,
             'type': 'iframe',
             'autoScale': 'false',
             'hideOnContentClick': false,
             'onComplete': function() {
                  //Style the title where and how you want it
                  $("#fancybox-title").css({'top':'-20px', 'bottom':'auto'});
                  //Set the fancybox-title as the handler
                  $("#fancybox-wrap").setHandler('fancybox-title');
               }
         });

        $("#fancybox-wrap").easydrag();

     }); //ready
 <script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T02:43:52.333

在测试了这些解决方案后，我遇到了拖动 iframe 的问题。为了解决这个问题，我切换到用于拖动的[jQuery 1.9.1 UI](http://jqueryui.com/draggable/)插件，并在拖动时创建了一个透明图像。拖动后删除图像以访问内容。与fancybox iframe 配合使用非常好，并且可以在iframe 上快速拖动。请参阅下面的示例代码。

```
$("#iframePop").fancybox({
             'width': 890,
             'height': 430,
             'type': 'iframe',
             'autoScale': 'false',
             'hideOnContentClick': false,
             'onComplete': function() {
                  $("#fancybox-title").css({'top':'-2px', 'left':'15px', 'bottom':'auto', 'cursor':'move'});                       
                  $("#fancybox-wrap" ).draggable({ handle: "fancybox-title", iframeFix: true, 
                        start: function(ev,ui){$("#fancybox-wrap").append("<img src='@Url.Content("~/Content/Images/transparent.png")' id='hidenImg' style='border: 1px solid black; width: 640px; height: 400px; top: 20px; position: absolute; z-index: 10000;' />")}, 
                        drag: function(ev,ui){}, 
                        stop: function(ev, ui){$("#fancybox-wrap #hidenDiv").remove()} 
                  });  
                }
         }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T03:50:22.837

为了消除将 Easydrag 与 Fancybox 结合使用引起的滚动条问题，您需要消除滚动条。默认情况下，Fancybox CSS 样式表将`overflow:auto`规则应用于由 Fancybox 生成的元素，该元素环绕 Fancybox 内显示的内容。

要覆盖它，请包含您自己的 CSS 规则，以取代 Fancybox 应用于包装器的规则。将此样式块放在`<head>`网页的部分中：

```
<style>

    /* id of the element generated and used by Fancybox as a wrapper around
       the generated content. */
    #fancy_ajax {
        /* Use the important identifier to ensure the overflow:auto is suppressed */
        overflow:none !important;

    }
</style> 
```

这将消除滚动条并允许轻松拖动插件顺利工作。

# javascript - 我可以在 mySQL 数据库中存储 JavaScript 对象吗？

> ID：10725870
> 
> 赞同：12
> 
> 时间：2012-05-23T18:36:37.150
> 
> 标签：javascript, database

我正在从网页访问者那里收集数据并将其放入我创建的 JavaScript 对象中。但后来我希望能够引用他们输入的数据。

我可以访问 MySQL 数据库，那么有没有办法将这个对象存储在那里？

我想尝试将其保留为对象格式，而不是将其分解为单独的部分。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T18:40:19.393

将对象的一个`JSON.stringified`​​版本存储在数据库中，然后`JSON.parse`在您再次想要该对象时存储它。它看起来像这样：

```
var myObj = {some: data, other: stuff};
var myObjString = JSON.stringify(myObj);
// store string in mySQL database here

// load string from database
var myJSONString = //mySQL database call
var myLoadedObj = JSON.parse(myJSONString); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-23T18:40:04.973

不，你不能，至少不能。

您可能可以将其序列化为字符串。如果它完全由数组、简单对象和[JSON 格式](http://json.org/)支持的其他数据类型组成（如果它是用户提供的数据，它可能会这样做（主要的例外是上传二进制文件），那么你可以使用JSON 序列化器这样做。现代浏览器为此提供了[JSON 对象，而](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON)[json2.js](https://github.com/douglascrockford/JSON-js)将为旧浏览器提供 polyfill。然后，您可以将字符串存储在数据库中。

但是，不将其分解为单独的部分确实会抛弃使用关系数据库的许多优点（即关系和执行有用搜索的能力）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T18:39:47.813

只需将其作为 JSON 对象存储在使用 varchar 或 text 数据类型的字段中即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T18:39:40.387

看看[JSON。](http://en.wikipedia.org/wiki/JSON) 您可以使用[jQuery](http://jquery.com/)之类的东西来序列化表单数据并将其发送到服务器。您也可以只使用普通的旧表单，并在服务器端处理输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-04T09:24:58.950

是的，实际上它可以做到。

```
con.connect(function(err){
var sql = "INSERT INTO books SET ?";  //books -- <tablename>
if(err) console.dir("Error: "+err.message);
var values = {
    "bname": "Elon Musk: Tesla, SpaceX, and the Quest for a Fantastic Future",
    "author": "Elon Musk",
    "genre": "Technology",
    "bookcount": "5"
};
con.query(sql, [values], function(err, result){
   if (err) throw err;
   else console.dir("Successfully inserted the row in table.");
      console.log(result);
});
}); 
```

但是，除此之外，您还必须满足这些要点，

*   `value`应该是对象，即 value={ "name":"property" }
*   它不应该是一个数组，即 values = [ {}, {} ]
*   **小鬼。**- 它不应该有主 id 列。

希望能帮助到你。

# google-maps - 如何在 Google maps API v3 中的街道图层下放置一个多边形图层

> ID：10725873
> 
> 赞同：1
> 
> 时间：2012-05-23T18:36:47.447
> 
> 标签：google-maps, google-maps-api-3

你好。我对 Google 地图 v3 中的多边形有疑问。如何将它们放在 Google maps API v3 的街道图层下？

这是我的地图： http: [//gidzior.net/map/](http://gidzior.net/map/)如您所见，较暗的区域位于街道上方。有没有办法把它放在街道下面？

谷歌地图脚本：

```
var map;
  var directionDisplay;
  var directionsService;
  var stepDisplay;
  var markerArray = [];
  var position;
  var marker = null;
  var polyline = null;
  var poly2 = null;
  var speed = 0.0000005, wait = 1;
  var infowindow = null;
  var zoomed;
  var zoomedd;
  var zoomeddd;

  var step = 50; // 5; // metres

  var myPano;   
  var panoClient;
  var nextPanoId;
  var timerHandle = null;

  var size = new google.maps.Size(26,25);
  var start_point = new google.maps.Point(0,0);
  var foothold = new google.maps.Point(13,15);

  var car_icon = new google.maps.MarkerImage("http://fama.net.pl/echo/www/img/map/car.png", size, start_point, foothold);

  var size2 = new google.maps.Size(87,87);
  var start_point2 = new google.maps.Point(0,0);
  var foothold2 = new google.maps.Point(43,87);

  var endIcon = new google.maps.MarkerImage("http://fama.net.pl/echo/www/img/map/end.png", size2, start_point2, foothold2);

function createMarker(latlng, label, html) {
// alert("createMarker("+latlng+","+label+","+html+","+color+")");
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: car_icon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function createEndMarker(latlng, label, html) {
    var contentString = '<b>'+label+'</b><br>'+html;
    var marker = new google.maps.Marker({
        position: latlng,
        map: map,
        icon: endIcon,
        clickable: false,
        zIndex: Math.round(latlng.lat()*-100000)<<5
        });
    return marker;
}

function initialize() {
  infowindow = new google.maps.InfoWindow(
    { 
      size: new google.maps.Size(150,50)
    });
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService();
    var pinkParksStyles = [ { featureType: "road", stylers: [ { lightness: 100 } ] },{ featureType: "landscape", elementType: "geometry", stylers: [ { hue: "#0091ff" }, { saturation: 42 }, { lightness: -44 } ] },{ featureType: "landscape", stylers: [ { visibility: "off" }, { saturation: 32 } ] },{ featureType: "transit", stylers: [ { lightness: 100 } ] },{ featureType: "road.local", stylers: [ { visibility: "simplified" } ] },{ featureType: "poi", stylers: [ { visibility: "off" } ] },{ featureType: "road", elementType: "labels", stylers: [ { visibility: "off" } ] },{ } ]

    var pinkMapType = new google.maps.StyledMapType(pinkParksStyles,
    {name: "Mapa Echo"});

    // Create a map and center it on Warszawa.
    var myOptions = {
      zoom: 12,
      mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'pink_parks']
    },
      navigationControlOptions: 
        {
            style: google.maps.NavigationControlStyle.SMALL 
        }
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    map.mapTypes.set('pink_parks', pinkMapType);
    map.setMapTypeId('pink_parks');

    var myCoordinates = [
new google.maps.LatLng(52.179774,21.022171),
new google.maps.LatLng(52.182773,21.023030),
new google.maps.LatLng(52.186562,21.024403),
new google.maps.LatLng(52.194324,21.023974),
new google.maps.LatLng(52.200111,21.023416),
new google.maps.LatLng(52.205423,21.022558),
new google.maps.LatLng(52.211498,21.020069),
new google.maps.LatLng(52.217152,21.016807),
new google.maps.LatLng(52.216915,21.015691),
new google.maps.LatLng(52.216810,21.014747),
new google.maps.LatLng(52.216968,21.011657),
new google.maps.LatLng(52.217125,21.008868),
new google.maps.LatLng(52.216968,21.004748),
new google.maps.LatLng(52.216231,20.990543),
new google.maps.LatLng(52.214864,20.988998),
new google.maps.LatLng(52.213497,20.988955),
new google.maps.LatLng(52.211604,20.988740),
new google.maps.LatLng(52.202793,20.985736),
new google.maps.LatLng(52.194008,20.982732),
new google.maps.LatLng(52.198190,20.984191),
new google.maps.LatLng(52.193061,20.982432),
new google.maps.LatLng(52.192035,20.984964),
new google.maps.LatLng(52.190562,20.986423),
new google.maps.LatLng(52.187220,20.986938),
new google.maps.LatLng(52.171747,20.987367),
new google.maps.LatLng(52.166167,21.016979),
new google.maps.LatLng(52.179774,21.022171)
];
var polyOptions = new google.maps.Polygon({
path: myCoordinates,
strokeColor: "#FF0000",
      strokeOpacity: 0,
      strokeWeight: 3,
      fillColor: "#005f8c",
      fillOpacity: 0.5
});
var it = new google.maps.Polyline(polyOptions);
it.setMap(map);

    address = 'warszawa'
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
       map.setCenter(results[0].geometry.location);
    });

    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
    }
    directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

    // Instantiate an info window to hold step text.
    stepDisplay = new google.maps.InfoWindow();

    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
  }

    var steps = []

    function calcRoute(){

if (timerHandle) { clearTimeout(timerHandle); }
if (marker) { marker.setMap(null);}
polyline.setMap(null);
poly2.setMap(null);
directionsDisplay.setMap(null);
    polyline = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    poly2 = new google.maps.Polyline({
    path: [],
    strokeColor: '#FF0000',
    strokeWeight: 3
    });
    // Create a renderer for directions and bind it to the map.
    var rendererOptions = {
      map: map,
      suppressMarkers:true,
      polylineOptions:{strokeColor:'#96C11F'}
    }
directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var travelMode = google.maps.DirectionsTravelMode.DRIVING

        var request = {
            origin: start,
            destination: end,
            travelMode: travelMode,
            waypoints: [{
                location:new google.maps.LatLng(52.185570, 20.997255),
                stopover:false}],
            optimizeWaypoints: false
        };

        // Route the directions and pass the response to a
        // function to create markers for each step.
    directionsService.route(request, function(response, status) {
        if (status == google.maps.DirectionsStatus.OK){
        directionsDisplay.setDirections(response);

            var bounds = new google.maps.LatLngBounds();
            var route = response.routes[0];
            startLocation = new Object();
            endLocation = new Object();

            // For each route, display summary information.
        var path = response.routes[0].overview_path;
        var legs = response.routes[0].legs;
            for (i=0;i<legs.length;i++) {
              if (i == 0) { 
                startLocation.latlng = legs[i].start_location;
                startLocation.address = legs[i].start_address;
                //marker = google.maps.Marker({map:map,position: startLocation.latlng});
                marker = createMarker(legs[i].start_location,"start",legs[i].start_address,"green");
              }
              endLocation.latlng = legs[i].end_location;
              endLocation.address = legs[i].end_address;
              var steps = legs[i].steps;
              for (j=0;j<steps.length;j++) {
                var nextSegment = steps[j].path;
                for (k=0;k<nextSegment.length;k++) {
                  polyline.getPath().push(nextSegment[k]);
                  bounds.extend(nextSegment[k]);
                }
              }
            }

            polyline.setMap(map);
            document.getElementById("distance").innerHTML = (polyline.Distance()/1000).toFixed(2)+" km";
            map.fitBounds(bounds);
            createEndMarker(endLocation.latlng,"end",endLocation.address,"red");
            map.setZoom(18);
            startAnimation();
            zoomed=false;
            zoomedd=false;
            zoomeddd=false;
            step = 50;
            }                                                    
        });
    }

      var tick = 100; // milliseconds
      var eol;
      var k=0;
      var stepnum=0;
      var speed = "";
      var lastVertex = 1;

//=============== animation functions ======================
      function updatePoly(d) {
        // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
        if (poly2.getPath().getLength() > 20) {
          poly2=new google.maps.Polyline([polyline.getPath().getAt(lastVertex-1)]);
          // map.addOverlay(poly2)
        }

        if (polyline.GetIndexAtDistance(d) < lastVertex+2) {
           if (poly2.getPath().getLength()>1) {
             poly2.getPath().removeAt(poly2.getPath().getLength()-1)
           }
           poly2.getPath().insertAt(poly2.getPath().getLength(),polyline.GetPointAtDistance(d));
        } else {
          poly2.getPath().insertAt(poly2.getPath().getLength(),endLocation.latlng);
        }
      }

      function animate(d) {
// alert("animate("+d+")");
        if (d>eol) {;
          map.panTo(endLocation.latlng);
          marker.setPosition(endLocation.latlng);
          return;
        }
        if (d>eol-20000 && zoomeddd!=true) {
          map.setZoom(12); // or whatever value
          zoomeddd=true;
        }
        if (d>eol-10000 && zoomedd!=true) {
          map.setZoom(13); // or whatever value
          zoomedd=true;
        }
        if (d>eol-1500 && zoomed!=true) {
          map.setZoom(15); // or whatever value
          step = 15;
          zoomed=true;
        }
        var p = polyline.GetPointAtDistance(d);
        map.panTo(p);
        marker.setPosition(p);
        updatePoly(d);
        timerHandle = setTimeout("animate("+(d+step)+")", tick);
      }

function startAnimation() {
        eol=polyline.Distance();
        map.setCenter(polyline.getPath().getAt(0));
        // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
        // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
        // map.addOverlay(marker);
        poly2 = new google.maps.Polyline({path: [polyline.getPath().getAt(0)], strokeColor:"#0000FF", strokeWeight:10});
        // map.addOverlay(poly2);
        setTimeout("animate(50)",2000);  // Allow time for the initial map display
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T23:53:42.127

我知道这不是您希望的答案，但是没有直接的方法可以使用开箱即用的 API 提供的覆盖来做到这一点，例如：`Circle`、`GroundOverlay`、`InfoWindow`、`Marker`、`Polygon`或`Polyline`。在这组叠加层中甚至存在限制。例如，没有办法让 a`Polyline`出现在 a 之上`Marker`。如果您希望看到其工作方式的一些变化，您现在唯一的选择是在[gmaps-api-issues](http://code.google.com/p/gmaps-api-issues/)提出增强请求。

顺便说一句，我认为在道路标记下方添加内容往往会使它看起来实际上是 Google 地图内容的一部分，而不是添加的自定义内容，而且很可能会导致混淆。

# css - MonoTouch css 样式

> ID：10725874
> 
> 赞同：2
> 
> 时间：2012-05-23T18:36:48.397
> 
> 标签：css, xamarin.ios

我是 monotouch 的新手，想知道是否有一种简单的方法可以在任何类型的视图/视图控制器中实现 css 样式？我已经阅读了有关 WebViews 的信息，与 UIViewControllers 一起工作，但我想构建一个现在是基本样式的应用程序，以后可以使用设计组织的 css 样式进行更新。有人知道这是什么一回事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:40:38.233

iOS 5 对全局样式的支持有限。Miguel 有一篇[文章解释了如何](http://tirania.org/monomac/archive/2011/Oct-14.html)在 MonoTouch 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T05:41:48.083

有趣的是，Kickstarter.com 上有一个项目最终获得了资助，它允许你使用 CSS3 来设计 iOS 和 Android 应用程序的样式。它实际上工作得很好。 [Pixate.com](http://www.pixate.com)

# python - 如何在python中使用开始字符和结束字符获取字符串的一部分

> ID：10725878
> 
> 赞同：0
> 
> 时间：2012-05-23T18:36:59.423
> 
> 标签：python, string, replace

我实际上有一个带有 html 的字符串。我想使用 xmlparser 解析它。pb 是我的字符串的某些标签不正确。特别是`<img />`标签。所以我需要替换那些标签，因为它错过了最后的`/`. 我想检索所有`img`标签并`/`在最后添加一个。为此，我需要找到`<img`我的文本中的所有内容，直到下一个`>`替换它`/>`以解析我的字符串。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:40:37.040

你在自找各种麻烦。尝试一个更适合该任务的库。看起来`BeautifulSoup`可能是你想要的。

如果你对 using 死心塌地`xmlparser`，那么你可能想先用 use`BeautifulSoup`来清理 HTML。请参阅： [如何修复错误嵌套/未闭合的 HTML 标记？](https://stackoverflow.com/questions/293482/how-do-i-fix-wrongly-nested-unclosed-html-tags)

# java - Jersey & Jackson - 修改 Jackson 输出的资源

> ID：10725879
> 
> 赞同：7
> 
> 时间：2012-05-23T18:37:11.560
> 
> 标签：java, rest, jersey, jax-rs, jackson

我目前正在使用 Jersey & Jackson 创建 REST 服务。现在，当 Resource 方法生成 application/json 并返回 POJO 时，它会将对象正确序列化为 JSON 并将响应返回给客户端。

我现在要做的是设置 Jersey，所以当查询参数进入时（让我们说“缩进”），我可以告诉杰克逊以“更漂亮的格式，也就是缩进”序列化 JSON。您可以通过使用 SerializationConfig.Feature.INDENT_OUTPUT 配置 JSON 映射器来轻松地告诉 Jackson 执行此操作。

问题是，我如何根据每个请求获取查询参数并使用它来修改杰克逊的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T09:05:50.740

像这样的东西：

```
@GET
@Path("path/to/rest/service")
@Produces("application/json")
public Response getSomething(
      @DefaultValue("false") @QueryParam("indent") boolean indent, ...) {
   ...
   if (indent) {
      objectMapper.configure(SerializationConfig.Feature.INDENT_OUTPUT, true);
   }
   ...
} 
```

你在找什么？

# c# - 将一个 DataTable 拆分为多个 DataTable

> ID：10725881
> 
> 赞同：1
> 
> 时间：2012-05-23T18:37:40.080
> 
> 标签：c#, winforms, datatable

所有，我有一个实用程序可以将 DataTables 导出到 Excel（到*.xls*和 .xlsx 文件类型）。`DataTable`当我达到（从 SQL Server 中提取的）的列或行限制时，我想将其拆分`DataTable`为子项，每个子项都遵守限制（对于 .xls 256 列和 65,536 行和 .xlsx 16,384 列和 1,048,576 行）。

到目前为止，我已经编写了以下方法来做我想做的事

```
public static List<DataTable> SplitDataTable(DataTable mother, int nColLimit)
{
    List<int[]> rangeList = new List<int[]>();
    int primaryCols = mother.Columns.Count;
    int nSplitCount = Convert.ToInt32(primaryCols / nColLimit);
    int max = -1;

    // Get the child ranges.
    int tmpSup = 0;
    for (int splits = 0; splits < nSplitCount; splits++)
    {
        if (rangeList.Count == 0)
            tmpSup = (splits + 1) * (nColLimit - 1);
        else
            tmpSup = rangeList[splits - 1][1] + nColLimit;
        rangeList.Add(new int[2] { splits * nColLimit, tmpSup });
        if (max < tmpSup)
            max = tmpSup;
    }
    rangeList.Add(new int[2] { ++max, primaryCols });

    // Build child DataTables.
    List<DataTable> childList = new List<DataTable>();
    int childIndex = 0;
    foreach (int[] range in rangeList)
    {
        childList.Add(new DataTable());
        for (int i = range[0]; i < range[1]; i++)
            for (int j = 0; j < mother.Rows.Count; j++)
                childList[childIndex].Rows[j][i] = mother.Rows[j][i];
        childIndex++;
    }
    return childList;
} 
```

但是，这会引发一条`indexOutOfRangeException`消息“位置 0 处没有行。”。我很欣赏错误来自哪里，但是将完整列从 复制`mother`到孩子的最佳方法是什么？

我也试过

```
List<DataTable> childList = new List<DataTable>();
int childIndex = 0;
foreach (int[] range in rangeList)
{
    childList.Add(new DataTable());
    foreach(DataRow row in mother.Rows)
    {
        DataRow tmpRow = childList[childIndex].NewRow();
        for (int i = range[0]; i < range[1]; i++)
            tmpRow[i + 1] = row[i + 1];
    }
    childIndex++;
} 
```

这给出了相同的范围例外。

谢谢你的时间。

*编辑：我是如何做这个短期的*

```
foreach (int[] range in rangeList)
{
    childList.Add(new DataTable());
    string strSqlTmp =
    String.Format("declare @columns varchar(max) " +
        "select  @columns = case when @columns is null " +
        "then '' " +
        "else @columns + ', ' " +
        "end + name " +
             "from sys.columns " +
             "where object_id = object_id('{0}') and name in " +
                 "(SELECT COLUMN_NAME " +
                     "FROM [{1}].INFORMATION_SCHEMA.COLUMNS " +
                     "WHERE TABLE_NAME = N'{0}' " +
                     "AND ORDINAL_POSITION > {2} AND ORDINAL_POSITION < {3}) " +
        "declare @query varchar(max) " +
        "set @query = 'select ' + @columns + ' from {0}' " +
        "exec (@query);
    // Then get each DataTable from SQL Server and fill the child list... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:42:06.713

您收到`IndexOutOfRange`异常的原因是因为您试图`Column`在 new`DataTable`中引用不存在的 s 。这一行：

```
childList.Add(new DataTable()); 
```

确实添加了一个新`DataTable`的`childList`，但它`DataTable`没有列和行。

通常我可能会使用该[`DataTable.Clone()`](http://msdn.microsoft.com/en-us/library/system.data.datatable.clone.aspx)方法创建一个与调用该方法`DataTable`具有相同结构的新`DataTable`方法，但显然这对您不起作用。在您的情况下，您必须使用该方法 显式添加`DataColumn`s 。[`DataTable.Columns.Add`](http://msdn.microsoft.com/en-us/library/system.data.datacolumncollection.add.aspx)

就像是：

```
for (int i = 0; i < numberOfColumns; i++) {
    dataTable.Columns.Add(string.Format("Column {0}", i));
} 
```

上面的片段非常简单。由于您将`DataColumn`自己创建 s，因此您需要自己命名和键入每个`DataColumn`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T08:11:05.573

我刚刚创建了一个拆分数据表的方法。“.Batch”方法引用自 MoreLinq。

```
private static List<DataTable> SplitTable(DataTable originalTable, int batchSize)
        {
            List<DataTable> tables = new List<DataTable>();

            foreach (var rowBatch in originalTable.Rows.Cast<DataRow>().Batch(batchSize))
            {
                var batchTable = new DataTable(originalTable.TableName);

                foreach (DataColumn column in originalTable.Columns)
                    batchTable.Columns.Add(column.ColumnName, column.DataType);

                foreach (DataRow row in rowBatch)
                    batchTable.Rows.Add(row.ItemArray);

                tables.Add(batchTable);
            }
            return tables;
        } 
```

以防万一这对任何人都有帮助:)

# jquery - Javascript - 找不到函数？！从onClick调用，功能在同一页面

> ID：10725887
> 
> 赞同：2
> 
> 时间：2012-05-23T18:37:54.193
> 
> 标签：jquery, javascript

我有一个非常奇怪和令人困惑的错误。

这是我的代码：

```
{if="$pjax === false"}{include="header"}{/if}
<script type="text/javascript">
    $(document).ready(function() {
        function clickclear(thisfield, defaulttext) {
            if (thisfield.value == defaulttext) {
                thisfield.value = "";
            }
        }
        function clickrecall(thisfield, defaulttext) {
            if (thisfield.value == "") {
                thisfield.value = defaulttext;
            }
        }
    });
</script>
<form action='./login' method='post' name='form'>
<ul class="form">
    <li><input type="text" name="username" value="Username" id="username" onclick="clickclear(this, 'Username')" onblur="clickrecall(this,'Username')"  /></li>
    <li><input type="password" name="password" value="Password" id="password" onclick="clickclear(this, 'Password')" onblur="clickrecall(this,'Password')" /></li>
    <li><span style='display:block;height:27px;float:left;line-height:27px;'>Remember Me</span> <div id='itoggle' style='float:right;'><input type="checkbox" id="remember" class='itoggle' /></div><div class='clearfix'></div></li>
</ul>
</form>
<a href="javascript: form.submit()" class="button white">Login</a>
{if="$pjax === false"}{include="footer"}{/if} 
```

可以看到有两个函数，`clickclear`和`clickrecall`。这些从 和 上的表单输入中`onClick`调用`onBlur`。但是，当我运行它们时，我得到了这些 javascript 错误：

> 未捕获的 ReferenceError：未定义 clickclear
> 
> 未捕获的 ReferenceError：未定义 clickrecall

有任何想法吗？我知道这可能很简单，但我看不到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:40:47.273

这是因为您的函数在`.ready()`回调中。这些在全局范围内是不可见的（这很好）。

最好使用 jQuery 的事件附件方法，例如`.on()`：

```
$(document).ready(function(){

    //your code
    function clickclear(){...}
    function clickrecall(){...}

    //the handlers
    $('#username').on('click',function(){ //bind click handler
        clickclear(this,'Username');      //things to do on click
    }).on('blur',function(){              //chain blur handler
        clickrecall(this,'Username');     //things to do on blur
    });

    $('#password').on('click',function(){ //bind click handler
        clickclear(this,'Password');      //things to do on click
    }).on('blur',function(){              //chain blur handler
        clickrecall(this,'Password');     //things to do on blur
    });

    ...other handlers...

}); 
```

附带说明一下，Chrome 有一个`placeholder`属性，其作用类似于占位符文本：

```
<input type="text" placeholder="username" />
<input type="password" placeholder="password" /> 
```

# oracle - 带有 oracle apex 的 twitter 引导程序

> ID：10725889
> 
> 赞同：0
> 
> 时间：2012-05-23T18:38:08.660
> 
> 标签：oracle, twitter-bootstrap, oracle-apex

有没有人成功地将 oracle apex 应用程序与 twitter bootstrap 集成在一起？为了正确引用所有内容（例如我的 css 和 javascript），有什么特别之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:47:42.030

我在我的一个内部应用程序中使用 Twitter Bootstrap。工作得很好，没有什么特别的事情要做，只是标准包含所需文件。

# java - 使用 Procrun 安装的 Windows 服务在 //TS 模式下工作，但不会作为 Windows 服务启动，说它“启动然后停止”

> ID：10725890
> 
> 赞同：13
> 
> 时间：2012-05-23T18:38:10.217
> 
> 标签：java, windows-services, executable-jar, procrun

我通过运行以下命令将标准可执行 jar 文件安装为 Windows 服务：

```
> prunsrv.exe //IS//"My Service" --Install="C:\path-to-prunsrv.exe" --Jvm=auto \
  --Startup=auto --StartMode=jvm --Classpath="C:\path-to-MyService.jar" \
  --StartClass=com.mydomain.MyService 
```

我现在可以通过运行以下命令（我使用的是 Java 1.6）在控制台模式下正常运行我的程序：

```
> prunsrv.exe //TS//"My Service" 
```

当我尝试通过标准 Windows 服务接口启动服务时，我收到以下错误消息：

*本地计算机上的 MyService 服务启动然后停止。如果某些服务没有被其他服务或程序使用，它们会自动停止。*

当我尝试以这种方式启动服务时，我的应用程序的日志文件中没有输出。Window 的事件日志（Windows 7 64 位）中也没有输出。我可以做些什么来尝试找出为什么此服务无法运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T14:14:21.323

**不要在服务名称中使用任何空格！**

经过数小时的测试和拆解 Tomcat 并复制它的引导过程后，我的问题的修复最终是当 Windows 服务的名称中有空格时 Apache Commons Daemon (Procrun) 无法正常工作。

当服务名称中有空格时，它似乎正确地安装并注册了 Windows 服务。Windows 注册表项甚至看起来正确。该服务甚至可以在调试（又名 TS 或控制台）模式下运行。但是，在运行时，作为由 Windows 启动的实际服务，如果该服务安装时服务名称中包含空格，则会失败。

我当然希望 Procrun 在失败时有某种类型的日志输出！良好的日志记录可以使调试问题变得轻而易举。

我确实需要在我的服务名称中有多个单词，所以我用一个单词命名我的服务并使用“DisplayName”参数更改名称：

```
> prunsrv.exe //IS//MyService --Install="C:\path-to-prunsrv.exe" --Jvm=auto \
  --Startup=auto --StartMode=jvm --Classpath="C:\path-to-MyService.jar" \
  --StartClass=com.mydomain.MyService --DisplayName="My Service" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T22:42:58.843

我想就上面所说的“11101101b”提供一些额外的信息。（这是我的第一篇文章，所以请温柔！）

**通过将他的命令的//IS//MyService**部分更改为以下内容，我能够使用服务名称中的空格正确安装服务，我怀疑这也是他所做的。（如果我的假设不正确，我深表歉意。）请注意，开始的双引号位于字符串的开头而不是服务名称的开头。

> “//IS//我的服务”

与他的情况一样，该服务安装正确并且看起来正确，但它无法启动。我可以通过更改注册表中服务的 ImagePath 值数据设置来解决此问题，以便对命令的**//RS//My Service**部分进行相同的更改。因此，注册表值在其数据设置中具有以下内容：

> “//RS//我的服务”

一切似乎都在正常工作，没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T13:49:27.903

此服务器启动和停止是因为该服务已完成任务，因此它会自动停止。如果你有一个长时间运行的逻辑，它就不会停止。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-08T11:42:03.980

我遇到了同样的问题......在我的本地机器下，在服务器上一切正常，同样的问题 => 问题是未设置工作路径。愿它的人……成为你的力量

[![在此处输入图像描述](../Images/f2905c6faac2e8994002bd8fd8517a5a.png)](https://i.stack.imgur.com/f7l5h.png)

# python - 使用 python-ldap 向 Active Directory 进行身份验证总是返回 (97, [])

> ID：10725891
> 
> 赞同：14
> 
> 时间：2012-05-23T18:38:11.637
> 
> 标签：python, authentication, active-directory, python-ldap

与[这个问题](https://stackoverflow.com/questions/140439/authenticating-against-active-directory-using-python-ldap)类似，我正在尝试使用 python ldap（CentOS 6.2 x86_64、Python 2.6.6、python-ldap 2.3.10）对 2003 Active Directory 执行简单的身份验证。

尽管遵循 init 中的所有常规步骤，包括

```
conn.set_option(ldap.OPT_REFERRALS, 0) 
```

如果我通过了正确的凭据，我*总是*会得到一个`(97, [])`返回：

```
>>> import ldap
>>> conn = ldap.initialize('ldap://ad.server.domain.com')
>>> conn.protocol_version = 3
>>> conn.set_option(ldap.OPT_REFERRALS, 0)
>>> conn.simple_bind_s('user@domain.com', 'WrongPassword')
ldap.INVALID_CREDENTIALS: {'info': '80090308: LdapErr: DSID-0C090334, comment: AcceptSecurityContext error, data 52e, vece', 'desc': 'Invalid credentials'}
>>> conn.simple_bind_s('user@domain.com', 'CorrectPassword')
(97, []) 
```

错误代码 97 不成功；这`LDAP_REFERRAL_LIMIT_EXCEEDED`是从 AD 返回的错误。我也不能将其用作*事实上的*成功指标，因为：

```
>>> conn.simple_bind_s('', 'CorrectPassword')
(97, [])
>>> conn.simple_bind_s('', '')
(97, []) 
```

更令人沮丧的是，这个脚本是从使用 Net::LDAP 的旧 Perl 脚本迁移而来的，如果成功通过身份验证绑定到同一个 AD 和服务器，它*会*返回 0。

我可以在 python-ldap 上找到的所有信息都表明我正在做的事情应该只是工作；我倾向于认为 AD 服务器有问题，但 Perl 脚本在成功绑定时确实返回了正确的 LDAP 代码。

我在一个旧的 CentOS 5.5 机器上测试了 python-ldap 2.2.0 和 python 2.4.4，它以完全相同的方式“失败”。

有谁知道我错过了什么？

编辑：根据请求，这是有效的 Perl 脚本。 `Net::LDAP`从 LDAP 服务器返回返回码，AD 服务器返回 0x00, "Successful request", AFAICT。

```
#!/usr/bin/perl -w
use strict;
use Net::LDAP;

## Corporate subdomains
my @domains = ("americas", "asia", "europe");

# AD connect timeout
my $timeout = 10;
# Set AD server info.
my $port = "389";
my $host = "server.domain.com";

my $user = shift @ARGV;
chomp $user;

my $password = <STDIN>;
$password =~ s/\r\n//;
chomp $password;

my $ldap = Net::LDAP->new($host, port => $port, timeout => $timeout ) ||
        die "Unable to connect to LDAP server";

my $bind_return = 1;
foreach (@domains) {
        my $result = $ldap->bind( "$user\@$_.domain.com", password => $password );
        if( $result->code == 0) {
                $bind_return = 0;
                last;
        }
}

## Unbind and return
$ldap->unbind;

if ($bind_return) { print "Authentication Failed.  Access Denied\n" }
exit $bind_return; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T19:06:00.010

python-ldap 库的作者 Michael Ströder 这样启发了我：

> 97 不是 LDAP 结果代码。它是结果类型 ldap.RES_BIND。通常您不必查看 LDAPObject.simple_bind_s() 返回的结果（除非您想提取绑定响应控件）。
> 
> 如果 LDAP 结果代码不是 0，则会引发随附的异常，例如您的示例中的 ldap.INVALID_CREDENTIALS。
> 
> 所以你的代码应该是这样的：

```
try:
  conn.simple_bind_s('user@domain.com', 'WrongPassword')
except ldap.INVALID_CREDENTIALS:
  user_error_msg('wrong password provided') 
```

这些结果的原因：

```
>>> conn.simple_bind_s('', 'CorrectPassword')
(97, [])
>>> conn.simple_bind_s('', '')
(97, []) 
```

是开箱即用的 2003 Active Directory[允许匿名绑定](http://www.petri.co.il/anonymous_ldap_operations_in_windows_2003_ad.htm)。因此，如果唯一要测试的是是否`simple_bind_s()`抛出错误，那么根本不提供用户 ID 仍然会通过简单的绑定检查。

2003 Active Directory*确实*需要对不属于 rootDSE 属性的任何搜索进行身份验证，因此出于内部目的，我们在`try:`块中添加了一个简单的搜索：

```
try:
  conn.simple_bind_s('user@domain.com', 'SubmittedPassword')
  conn.search_st('DC=domain,DC=com', ldap.SCOPE_SUBTREE, '(objectClass=container)', 'name', 0, 30)
except ldap.INVALID_CREDENTIALS:
  user_error_msg('wrong password provided') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T16:50:35.380

此错误意味着您`conn.set_option(ldap.OPT_REFERRALS, 0)`没有受到影响。

因此，试试这个：

```
import ldap

ldap.set_option(ldap.OPT_REFERRALS,0)
ldap.protocol_version = 3
conn = ldap.initialize('ldap://....')
conn.simple_bind_s('user@domain.com', 'RightPassword') 
```

# c# - 获取异常：此处给定的 DataRow 不在当前 DataRowCollection 中

> ID：10725895
> 
> 赞同：0
> 
> 时间：2012-05-23T18:38:27.100
> 
> 标签：c#, ado.net

我面临问题..

```
DataTable Dt1 = table1;
DataTable Dt2 =  Dt1.Copy();
DataRow[] row =  Dt1.Select("Name = 'Test'");

foreach (DataRow row in Dt2)
{
  Dt2.Rows.Remove(row); // Here The given DataRow is not in the current DataRowCollection
} 
```

它给出了例外，因为我从不同的行中过滤日期并从不同的行中删除它。

谢谢， 希瓦姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:43:55.150

您当前的代码从 Dt2 数据表中删除所有行，因为您在循环执行 foreach 语句时覆盖了 Dt1 中的选定行。

# sql - 使用 in 子句按字段对选择查询

> ID：10725901
> 
> 赞同：35
> 
> 时间：2012-05-23T18:38:51.330
> 
> 标签：sql, database, db2, in-clause

我有一张名为 player 的桌子，如下所示：

```
First_Id    Second_Id     Name
1           1             Durant
2           1             Kobe
1           2             Lebron
2           2             Dwight
1           3             Dirk 
```

我希望在该表上编写一个 select 语句来检索其第一个 id 和第二个 id 与一组指定的第一个和第二个 id 匹配的所有行。

因此，例如，我希望选择第一个和第二个 id 如下的所有行：(1,1)、(1,2) 和 (1,3)。这将检索以下 3 行：

```
First_Id    Second_Id    Name
1           1            Durant
1           2            Lebron
1           3            Dirk 
```

是否可以通过以下方式编写选择查询：

```
SELECT * 
FROM PLAYERS
WHERE (First_Id, Second_Id) IN ((1,1), (1,2) and (1,3))? 
```

如果有办法编写类似于上面的SQL我想知道。有没有办法为表示多行的 IN 子句指定值，如图所示。

我正在使用 DB2。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-23T18:45:14.650

这适用于我的 DB2（Linux/Unix/Windows 上的 9.7 版），使用以下语法：

```
SELECT *
FROM PLAYERS
WHERE (First_Id, Second_Id) IN (VALUES (1,1), (1,2), (1,3)) 
```

此语法不适用于 Mainframe 上的 DB2（至少在 9.1 版中），因为您不能用 VALUES 表达式替换子选择。此语法将起作用：

```
SELECT *
FROM PLAYERS
WHERE (First_Id, Second_Id) IN (SELECT 1, 1 FROM SYSIBM.SYSDUMMY1 UNION ALL
                                SELECT 1, 2 FROM SYSIBM.SYSDUMMY1 UNION ALL
                                SELECT 1, 3 FROM SYSIBM.SYSDUMMY1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T16:05:02.637

这是 postgresql 中一个非常相似的解决方案：

```
SELECT tmp_table.val1, tmp_table.val2
FROM tmp_table
WHERE (tmp_table.val1, tmp_table.val2) not in (select tmp_table2.val1, tmp_table2.val2 from tmp_table2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T19:08:27.773

使用复合主键，我将连接两个 id 并匹配复合字符串。

```
select id1 + id2 as FullKey, *
from players
where FullKey in ('11','12','13') 
```

（如果 id 不是字符串，只需将它们转换为此类。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-17T14:22:01.580

此语法适用于 MySQL：

```
SELECT *
FROM PLAYERS
WHERE (First_Id, Second_Id) IN ((1,1), (1,2), (1,3)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-28T07:22:15.847

```
SELECT * FROM <your table> where (<field1>, <field2>, ...) in (SELECT <field1>, <field2>, ... FROM <your table> where <your condition>) 
```

这对我来说很神奇。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-13T17:18:51.900

这种类型的查询适用于 DB2。

```
SELECT * FROM A
WHERE (C1, C2) IN (SELECT B1, B2 FROM B WHERE B3=1); 
```

# php - Joomla 开发文件处理

> ID：10725902
> 
> 赞同：0
> 
> 时间：2012-05-23T18:38:57.127
> 
> 标签：php, model-view-controller, file-upload, joomla, file-handling

我正在为 joomla 制作一个简单的 MVC 组件，大部分都遵循 hello world 教程，其中包含一些文本字段和图像。

文本字段保存但“文件”字段不保存，有什么想法吗？

```
**Controller:**
    <?php
    // No direct access to this file
    defined('_JEXEC') or die('Restricted access');

    // import Joomla controllerform library
    jimport('joomla.application.component.controllerform');

    /**
     * MJob Controller
     */
    class MJobsControllerMJob extends JControllerForm
    {
    }

**Model:**

    <?php
    // No direct access to this file
    defined('_JEXEC') or die('Restricted access');

    // import Joomla modelform library
    jimport('joomla.application.component.modeladmin');

    class MJobsModelMJob extends JModelAdmin
    {
        public function getTable($type = 'MJob', $prefix = 'MJobsTable', $config = array()) 
        {
            return JTable::getInstance($type, $prefix, $config);
        }

        public function getForm($data = array(), $loadData = true) 
        {
            // Get the form.
            $form = $this->loadForm('com_mjobs.mjob', 'mjob', array('control' => 'jform', 'load_data' => $loadData));

            if (empty($form)) 
            {
                return false;
            }
            return $form;
        }

        protected function loadFormData() 
        {
            // Check the session for previously entered form data.
            $data = JFactory::getApplication()->getUserState('com_mjobs.edit.mjob.data', array());
            if (empty($data)) 
            {
                $data = $this->getItem();
            }
            return $data;
        }
    }

**view.html.php:**

    <?php
    // No direct access to this file
    defined('_JEXEC') or die('Restricted access');

    // import Joomla view library
    jimport('joomla.application.component.view');

    class MJobsViewMJob extends JView
    {

        public function display($tpl = null) 
        {
            // get the Data
            $form = $this->get('Form');
            $item = $this->get('Item');

            // Check for errors.
            if (count($errors = $this->get('Errors'))) 
            {
                JError::raiseError(500, implode('<br />', $errors));
                return false;
            }
            // Assign the Data
            $this->form = $form;
            $this->item = $item;

            // Set the toolbar
            $this->addToolBar();

            // Display the template
            parent::display($tpl);
        }

        protected function addToolBar() 
        {
            JRequest::setVar('hidemainmenu', true);
            $isNew = ($this->item->id == 0);
            JToolBarHelper::title($isNew ? JText::_('COM_MJOBS_MANAGER_MJOB_NEW') : JText::_('COM_MJOBS_MANAGER_MJOB_EDIT'));
            JToolBarHelper::apply('mjob.apply');
            JToolBarHelper::save('mjob.save');
            JToolBarHelper::save2new('mjob.save2new');
            JToolBarHelper::cancel('mjob.cancel', $isNew ? 'JTOOLBAR_CANCEL' : 'JTOOLBAR_CLOSE');
        }
    }

**VIEW (tmpl/edit.php):**
<?php
// No direct access
defined('_JEXEC') or die('Restricted access');
JHtml::_('behavior.tooltip');
echo "<b>MJOB EDIT START</b><br>";
?>
<form action="<?php echo JRoute::_('index.php?option=com_mjobs&layout=edit&id='.(int) $this->item->id); ?>"
      method="post" enctype="multipart/form-data" name="adminForm" id="mjob-form">
    <fieldset class="adminform">
        <legend><?php echo JText::_( 'COM_MJOBS_MJOB_DETAILS' ); ?></legend>
        <ul class="adminformlist">
            <?php foreach($this->form->getFieldset('details') as $field): ?>
                <li><?php echo $field->label;echo $field->input;?></li>
            <?php endforeach; ?>
        </ul>
    </fieldset>
    <div>
        <input type="hidden" name="task" value="mjob.edit" />
        <?php echo JHtml::_('form.token'); ?>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T22:11:35.160

我猜你正在使用 Joomla！2.5 基于提供的代码。

因此，要检索已上传的文件，您需要执行以下操作：

```
$jFileInput = new JInput($_FILES);
$theFile = $jFileInput->get('jform',array(),'array');

// If there is no uploaded file, we have a problem...
if (!is_array($theFile)) {
    JError::raiseWarning('', 'No file was selected.');
    return false;
}

// Build the paths for our file to move to the components 'upload' directory
$theFileName = $theFile['name']['tablefile'];
$tmp_src    = $theFile['tmp_name']['tablefile'];
$tmp_dest   = JPATH_COMPONENT_ADMINISTRATOR . '/uploads/' . $theFileName;
$this->dataFile = $theFileName;

// Move uploaded file
jimport('joomla.filesystem.file');
$uploaded = JFile::upload($tmp_src, $tmp_dest);
// $uploaded contains boolean indicating success or failure
// $tmp_dest will contain final location of file if successful. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:39:11.173

还要确保在你的 html 表单中你有

enctype="多部分/表单数据"

启用，否则您将不会收到 php.ini 中的任何文件。

# process - 自动管理进程的多个实例

> ID：10725905
> 
> 赞同：0
> 
> 时间：2012-05-23T18:39:16.503
> 
> 标签：process, distributed-computing, process-management

我有一个程序需要大约 1 秒才能运行，并将一个文件作为输入并生成另一个文件作为输出。问题是我必须能够每秒处理大约 30 个文件。要处理的文件将作为队列提供（通过 memcached 实现）并且不必完全按顺序处理，因此基本上程序的一个实例会检出要处理的文件并这样做。我可以使用进程管理器，在系统资源可用时自动启动程序实例。

在简单的结尾，“系统资源”将简单地表示“一次最多两个进程”，但如果我移动到另一台机器，这可能是 2 或 10 或 100 或其他任何东西。至少我可以使用一个实用程序来处理这个问题。在复杂的一端，我想在 CPU 可用时启动另一个进程，因为这些机器将是专用的。CPU 时间似乎是限制资源——程序不是内存密集型的。

有什么工具可以完成这种流程管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:06:08.417

Storm - 在不知道更多细节的情况下，我建议[Backtype Storm](https://github.com/nathanmarz/storm/wiki)。但这可能意味着彻底重写您当前的代码。:-)

更多细节在[Tutorial](https://github.com/nathanmarz/storm/wiki/Tutorial)，但它基本上需要工作元组并通过工作节点的拓扑分布它们。“spout”将工作发送到拓扑中，“'bolt”是图中发生一些工作的步骤/任务。当一个螺栓完成它的工作时，它会将相同/新的元组发送回拓扑。螺栓可以并行或串联工作。

# javascript - 如何判断用户是刚刚导航到页面还是在页面上等待？

> ID：10725907
> 
> 赞同：0
> 
> 时间：2012-05-23T18:39:25.150
> 
> 标签：javascript, jquery, ruby-on-rails

如果用户已经在页面上停留了一段时间（等待某些内容加载）或刚刚进入页面，我想注册.. 最好的方法是什么？我正在使用 Rails 和 jquery。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:42:18.700

所有用户都会“来到”页面，但如果您想在他们在那里停留特定时间后收到警报，您可以设置一个计时器以在几秒钟后发送一个 ajax 请求。

例如，以下代码将`inform`每 5 秒执行一次函数。通知您用户仍在等待...

```
setTimeout("inform()",5000); 
```

该函数`inform`将是一个 AJAX 请求，通知后端用户正在等待。如果您只希望请求触发一次或在多次运行后停止触发，那么您可以使用`clearTimeout()`.

如果您希望超时仅在用户等待加载特定内容时运行。`clearTimeout()`当您期望的内容将延迟返回时，您可以执行。

您可以在此处找到有关超时的更多信息[。](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:41:59.970

Javascript setTimeout 适合你吗？

无论您设置多久，它都会启动一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:47:50.120

> 您可以观看[鼠标移动](http://docs.jquery.com/Events/mousemove#fn)，但这大约是您在不听点击事件的情况下指示用户仍然在那里的最好情况。但是 javascript 无法判断它是否是活动选项卡，或者浏览器是否已打开。（嗯，你可以得到浏览器的宽度和高度，这会告诉你它是否被最小化）

来自[https://stackoverflow.com/a/1009268/744255](https://stackoverflow.com/a/1009268/744255)

# java - JAVA：了解有多少对象符合 GC 条件

> ID：10725908
> 
> 赞同：-3
> 
> 时间：2012-05-23T18:39:26.477
> 
> 标签：java, garbage-collection

SCJP第三章有个问题……看下面代码……

```
class Beta{

}

class Alpha extends  Beta{
    static Beta b1;
    Beta b2;
}

class Tester{
    public static void main(String a[]){
        Beta b1 = new Beta();
        Beta b2 = new Beta();

        Alpha a1 = new Alpha();
        Alpha a2 = new Alpha();

        a1.b1 = b1;
        a1.b2 = b1;
        a2.b2 = b2;

        a1 = null;
        b1 = null;
        b2 = null;

        //DO STUFF
        //HOW MANY OBJECTS ARE ELIGIBE FOR GC AT THIS LINE..

    }
} 
```

Q : 有多少对象符合 GC @ line //DO STUFF

选项 ：

```
Option-1> 0
Option-2> 1
Option-3> 2
Option-4> 3
Option-5> 4
Option-6> 5 
```

书上说：正确的断言是 2：**只有一个对象符合 GC 条件。**

仍然无法理解这个答案。如何只有一个对象有资格进行 GC？

任何想法 ？？谢谢，Gunjan。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:46:05.737

可能因为`a2.b1`仍然包含对的引用，`b1`因为它是静态的。它也有`a1.b2`引用`b2`。所以 b1、b2 和 a2 非常活跃。只有`a1`有资格进行垃圾收集。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T10:36:10.600

这里 ...a1.b1 或 a2.b1 是静态的。所以它不能被GCed。但是 a1 有资格进行 GC，因为它没有被使用。a2.b1 指向 b1。所以 b1 不能被 GCed。我们正在清空 b2，因此它也可以添加到 GC 管道中。所以只有两个对象 a1 和 b2 符合 GC 条件。

# ruby-on-rails - 如何在 Rails 3 上使用 ruby 获取带有其他参数的请求对象？

> ID：10725909
> 
> 赞同：2
> 
> 时间：2012-05-23T18:39:29.403
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

目前我正在使用rails 3.2.3进行网络分析等项目

我有两台服务器，一台正在运行`port 3001`，另一台正在运行`port 3000`。

这里**端口 3001 是服务器（假设这是 Google 网络分析服务器）**，**端口 3000 服务器是最终用户（假设这是您的站点）**。现在我需要从端口 3000 获取请求对象。

如果我写下面的代码，我可以获得浏览器的详细信息。

application.html.erb - 这是用户端代码。

```
<script type="text/javascript" 
        src="http://localhost:3001/tracks/track_client?bwname=<%= request.env["HTTP_USER_AGENT"]  %>">
</script> 
```

这是服务器端coce

```
def track_client
 params.each do |key,value|
  Rails.logger.warn "Param #{key}: #{value}"
 end
end

{bwname=>Mozilla/5.0 (Windows NT 6.1", " WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2} 
```

**但我需要用户的请求对象，其所有属性都不是特定的。**就像我也需要其他属性一样

```
"GATEWAY_INTERFACE", "PATH_INFO", "QUERY_STRING", "REMOTE_ADDR", "REMOTE_HOST", "REQUEST_METHOD", "REQUEST_URI", "SCRIPT_NAME", "SERVER_NAME", "SERVER_PORT", "SERVER_PROTOCOL", "SERVER_SOFTWARE", "HTTP_HOST", "HTTP_USER_AGENT",
"HTTP_ACCEPT",  "HTTP_ACCEPT_LANGUAGE",  "HTTP_ACCEPT_ENCODING",  "HTTP_DNT"=>"1",  "HTTP_CONNECTION", "HTTP_COOKIE", "HTTP_IF_NONE_MATCH", "HTTP_CACHE_CONTROL" 
```

除此之外，我还需要一些其他参数，就像这样

```
<script type="text/javascript" 
        src="http://localhost:3001/tracks/track_client?userid=1234&bwname=<%= request.env %>">
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:49:46.997

你在找`request`对象吗？

请在此处查看 [http://techoctave.com/c7/posts/25-rails-request-environment-variables](http://techoctave.com/c7/posts/25-rails-request-environment-variables)

# bash - 使用 lftp 获得继续行为（不重新下载已经存在的文件）。

> ID：10725920
> 
> 赞同：1
> 
> 时间：2012-05-23T18:39:58.437
> 
> 标签：bash, lftp

所以，我有一个从种子箱下载东西的脚本。它适用于远程服务器中的新文件，然后镜像到我的本地服务器上。问题是，例如，当我想要删除不必要的文件时，再次运行脚本会再次重新下载相同的文件。我尝试进入 mirror 的手册页，但没有帮助。这是镜像文件的脚本：

```
#!/bin/bash

login=XXXX
pass=XXXXXX
host=XXXXX
remote_dir=/files/
local_dir=/home/XXX/XXX

trap "rm -f /tmp/seedroots.lock" SIGINT SIGTERM

if [ -e /tmp/seedroots.lock ]; then
   echo "Synctorrent is running already."
   exit 1
else
   touch /tmp/seedroots.lock
   lftp -p 21 -u $login,$pass $host << EOF
   set ftp:ssl-allow no
   set mirror:use-pget-n 5
   mirror -c -P5 --log=synctorrents.log $remote_dir $local_dir

   EOF

   rm -f /tmp/seedroots.lock
   exit 0
fi 
```

是否有一个我缺少的镜像选项不会再次重新下载本地删除的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:29:16.020

lftp 中的`mirror`命令有一个`--continue`标志，它将导致您想要的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:14:44.693

您应该尝试我的脚本版本（未经测试）：

```
#!/bin/bash

login=XXXX
pass=XXXXXX
host=XXXXX
remote_dir=/files/
local_dir=/home/XXX/XXX
files=$local_dir/*

trap "rmdir /tmp/seedroots.lock" 0 1 2 3 15

if [[ -d /tmp/seedroots.lock ]]; then
    echo "Synctorrent is running already."
    exit 1
else
    mkdir /tmp/seedroots.lock

    lftp -p 21 -u $login,$pass $host << EOF
    set ftp:ssl-allow no
    set mirror:use-pget-n 5
    mget $files

    EOF

fi 
```

它能做什么 ：

*   我构建了一个本地文件列表，然后，在 ftp 服务器上使用变量 .mget 所有这些文件`$files`。
*   我用 dir 替换了 lock 文件：search web about **atomicity**。
    文件不是原子的，而目录是原子的。
*   陷阱在正常退出和其他信号上运行
*   如果您使用的是 bash，`[[ ]]`测试会更强大。
*   缩进不仅仅是一种选择；）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-29T14:26:11.267

如果您只是在提取文件（而不是播种），则可以使用 lftp 镜像`--Remove-source-files`选项在传输后从源中删除文件（这样就不会重复，重新下载）。

# c# - jquery更改后如何获取HtmlDocument？(HTMLAgilityPack)

> ID：10725922
> 
> 赞同：1
> 
> 时间：2012-05-23T18:40:04.633
> 
> 标签：c#, jquery, html-agility-pack

jQuery更改后是否可以获取HtmlDocument？例如，在下一次更改后通过 'myId' 获取元素。

js代码：

```
$(document).ready(function () 
{
    $("#myContainer").html("<div id='myId'></div>");
}); 
```

C# 代码：

```
var doc = new HtmlDocument();
...
doc.GetElementbyId("myId"); 
```

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T18:53:27.187

您可能可以使用 HtmlAgilityPack 和[`WebBrowser`](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)控件的组合来做到这一点。我认为值得一看。您将使用加载 html `WebBrowser`并使用`HtmlDocument`.

[这篇](http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET)代码项目文章可能是一个很好的起点

# facebook - 如何在 facebook 个人/人物资料页面上添加联系表格？

> ID：10725924
> 
> 赞同：0
> 
> 时间：2012-05-23T18:40:17.080
> 
> 标签：facebook, forms, profile

我发现了几个允许我们在 facebook FAN 页面中添加联系表格的应用程序。

但我找不到任何适用于个人/人员个人资料页面的内容。

那么，有没有办法在我的个人资料页面上添加表单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:47:12.140

不，谢天谢地，没有 API 可以像这样将数据包含到用户的个人资料页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:43:35.383

我认为您不能在个人页面中执行此操作！

# php - Joomla PHP：复选框不会取消选中

> ID：10725937
> 
> 赞同：3
> 
> 时间：2012-05-23T18:40:56.190
> 
> 标签：php, joomla, joomla1.7, joomla1.6, joomla2.5

制作一个简单的组件。如果我在选中该框的情况下保存新记录，则保存良好。如果我返回并取消选中以前选中的项目，它会恢复为选中状态。我认为它与隐藏字段有关，手动将其中一个放入其中但也没有解决它，所以将其取出。

这是我所在的位置：一个 xml 片段：

```
<fieldset name="checks">
  <field name="checkbox1"
    type="checkbox"
    label="First Checkbox"
    value="1"
    filter="intval"         
  /> 

   <field name="checkbox2"
    type="checkbox"
    label="Second Checkbox"
    value="1"
    filter="intval"         
  /> 

 ...

</fieldset> 
```

edit.php 文件：

```
<div class="width-45 fltlft">
  <fieldset class="adminform">
    <legend>Checkboxes</legend>
    <ul class="adminformlist">
      <?php foreach ($this->form->getFieldset('checks') as $field): ?>
        <li>
          <?php echo $field->label; ?>
          <?php echo $field->input; ?>
        </li>
      <?php endforeach ?>
    </ul>
  </fieldset>
</div> 
```

还在form.token之前添加了这个：

```
<input type="hidden" name="task" id="task" value="completion.edit" /> 
```

我尝试删除 xml 中的 value="1" 但后来我遇到了相反的问题，即支票根本无法保存。

有任何想法吗？

谢谢！

==============================

编辑：

模型：

```
<?php
defined( '_JEXEC' ) or die;

jimport('joomla.application.component.modeladmin');

class AssessModelCompletion extends JModelAdmin
{
//tells it what kind of record and the prefix

    public function getTable($type = 'Completion', $prefix = 'AssessTable', $config = array())
    {
        return JTable::getInstance($type, $prefix, $config);
    }

    //Load the data into the edit form
    protected function loadFormData()
    {
        $data = JFactory::getApplication()->getUserState('com_assess.edit.completion.data', array()); //first try to get the data from the session, not db

        if (empty($data)) {
            $data = $this->getItem(); //this gets the data
        }

        return $data;

    }

    //Stores data in a session in case a field is missed
    public function getForm($data = array(), $loadData = true)
    {
        $form = $this->loadForm('com_assess.completion', 'completion', array('control' => 'jform', 'load_data' => $loadData));

        return $form;
    }
} 
```

和表：

```
<?php 
defined ( '_JEXEC' ) or die;

class AssessTableCompletion extends JTable
{
    public function __construct(&$db)
    {
        parent::__construct('#__tablename_completions', 'completion_id', $db);
    }
} 
```

=======================================

参考资料： [https ://stackoverflow.com/questions/6964333/joomla-1-6-admin-form-processing-grouped-checkboxes-in-form](https://stackoverflow.com/questions/6964333/joomla-1-6-admin-form-processing-grouped-checkboxes-in-form)

[教程代码在 Joomla 2.5 中不再起作用](https://stackoverflow.com/questions/9017599/tutorial-code-is-not-working-any-more-in-joomla-2-5)

[http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!1.7_-_Part_09#Adding_a_toolbar](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!1.7_-_Part_09#Adding_a_toolbar)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T02:34:25.810

因此，这是一种奇怪的情况，因为您列出的文档使您似乎不必编写任何代码来处理复选框（因为您指出复选框与复选框不同）。但由于 html 复选框的提交方式，情况似乎并非如此。

可以在此处找到此问题的快速概述和一种解决方案：[http](http://planetozh.com/blog/2008/09/posting-unchecked-checkboxes-in-html-forms/) ://planetozh.com/blog/2008/09/posting-unchecked-checkboxes-in-html-forms/ 。

要使用它，您需要从 $field 变量中获取字段的名称（我不确定它是否易于访问），然后放置`<input type=hidden name='name' value=0>`before `<?php echo $field->input; ?>`。

解决此问题的另一种方法是在保存和覆盖元素期间处理表单数据。Joomla 有一个 prepareTable 功能，您可以将其添加到模型中，以便在保存期间根据需要编辑数据。下面的示例假定您的表单元素被包装在一个 jform 数组中。（通过查看生成的 html 中的名称字段来确认这一点，它们应该是 'jform[checkbox1]'）

```
protected function prepareTable(&$table)
{
    $jform = JRequest::getVar('jform'); // load all submitted data
    if (!isset($jform['checkbox1'])) { // see if the checkbox has been submitted
        $table->checkbox1 = 0; // if it has not been submitted, mark the field unchecked
    }
    if (!isset($jform['checkbox2'])) { // likewise for other checkboxes
        $table->checkbox2 = 0;
    }
} 
```

在这种情况下，您可能希望在您的 xml 字段文件中保留“value=1”。

问题最终是 Joomla 在保存期间从数据库加载当前数据，然后将发布的数据绑定到它的顶部。由于未选中的框未在发布数据中提交，因此它不会覆盖数据库信息，因此不会保存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T23:40:31.133

由于您没有显示任何模型/表格代码，我认为您可能误会`JForm`了 的目的 - 它纯粹是为了呈现表单。您仍然必须在模型/表中拥有一些东西来处理为多值字段返回的数组。

正如[Sam Moffat 所说](https://groups.google.com/d/msg/joomla-dev-general/SVZxhtQN_II/dSjMz6YOFJQJ)：

> *用于呈现数据的表单定义与用于持久化数据的模型和表结构之间没有耦合*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T13:55:46.667

尽管文档声明您不必对复选框进行任何手动处理，但事实并非如此。

由于未选中复选框时不会在 $_POST 数组中发送任何值，因此该值不会被覆盖，因此不会被保存，这使得无法取消选中该复选框。要解决此问题，您必须在表 bind() 函数中为复选框编写特殊处理，如下所示：

```
class YourcomponentTableYourview extends JTable 
{ 
    /** 
     * Constructor 
     * 
     * @param JDatabase A database connector object 
     */ 
    public function __construct(&$db) 
    { 
        parent::__construct('#__your_table_name', 'id', $db); 
    } 

    public function bind($array, $ignore = '') 
    { 
        if (!isset($array['name_of_field'])) 
                    $array['name_of_field'] = 0 ; 

        return parent::bind($array, $ignore); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T02:25:54.830

所以我有很多字段，想简单地在我的 edit.php 字段中循环它们以保持干净。虽然提供的所有答案都是正确的，但它们并不容易实施——很快就变得非常混乱，难以让它工作，或者无法找到更清洁的解决方法。我对此进行了一段时间的研究，然后今天遇到了基本上是[字段覆盖](http://docs.joomla.org/Creating_a_custom_form_field_type)的内容。

钥匙：

> 标准表单字段类型位于 joomla/libraries/joomla/form/fields/。您不应该在其中存储自定义字段，也不应该在自己的代码中使用此路径，但标准类型通常是很好的示例。
> 
> 属于您的组件的自定义字段类型通常位于管理员/组件//模型/字段中。您可以在代码中指定此路径或其他路径

所以，我将 checkbox.php 复制到模型/字段。然后，在文件的末尾，我在复选框标记之前添加了空字段：

```
<input type="hidden" name="'.$this->name.'" id="'.$this->id.'" value="0" /><input type="checkbox" ..... 
```

现在，每当我需要一个复选框时，也会写入空字段。可能不是最有效的解决方案，但易于实施，并有望帮助其他人。

[编辑]

请注意，每次 Joomla 更新时，您可能都需要比较核心中的版本以防发生变化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T16:55:47.173

我知道这是一个老问题，但官方的回答很啰嗦，我认为我有更好的解决方案。

尝试将复选框的默认值设置为，`0`而不是`1`像这样在您的 xml 中：

```
<fieldset name="checks">
  <field name="checkbox1"
    type="checkbox"
    label="First Checkbox"
    value="0"
    filter="intval"         
  /> 

   <field name="checkbox2"
    type="checkbox"
    label="Second Checkbox"
    value="0"
    filter="intval"         
  /> 

 ...

</fieldset> 
```

我刚刚遇到您的问题并尝试将其设置为，`0`因为我不想篡改核心，嘿，它可以工作。

我的猜测是 Joomla 看不到任何价值，因此设置了默认值。

# ios - UITableViewCell 中的自定义 UIView 阻止 uitableviewcell 接收事件

> ID：10725938
> 
> 赞同：0
> 
> 时间：2012-05-23T18:40:57.407
> 
> 标签：ios, uitableview, uiview, touch-event, touchesbegan

我有一个自定义 UITableViewCell，即在填充 uitableview 的每个单元格（或行）时，我对 UITableViewCell 类进行了子类化，我正在创建我的自定义 UITableViewCell，它由图像和一些标签组成。

现在，当我在自定义“UITableViewCell”类中覆盖以下方法时，

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    NSLog(@"CLICKED CLICKED CELL CLICKED CLICKED");
    [super touchesBegan:touches withEvent:event];
 } 
```

如果我单击添加到自定义 uitableviecell 的自定义视图，它永远不会被调用，但是当我单击顶部没有自定义视图的区域时，它很好（事件触发）。

我的目标很简单，我想检测 uitableview 中每一行（uitableviewcell）中的任何触摸。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:40:19.457

我今天遇到了类似的问题，我无法选择单元格，因为它有一个带有滚动视图的自定义 UIView。尝试设置`userInteractionIsEnabled = false`UIView 的子视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:12:24.817

请尝试覆盖此方法

```
 - (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event {} 
```

# c++ - 将赋值运算符绑定到 boost::function 对象

> ID：10725939
> 
> 赞同：2
> 
> 时间：2012-05-23T18:40:57.827
> 
> 标签：c++, boost-bind

我有一个 Visual Studio 2008 C++03 项目，我想在其中使用一个`boost::function`对象来设置指针的值。像这样的东西：

```
boost::function< void( int* ) > SetValue;
boost::function< int*() > GetValue;

int* my_value_;
SetValue = boost::bind( my_value_, _1 ); // how should this look?
GetValue = boost::bind( my_value_ ); // and this?

int v;
SetValue( &v );
assert( my_value_ == &v );

int* t = GetValue();
assert( t == my_value_ ); 
```

有没有办法做到这一点，或者我需要一个中间函数，比如：

```
void DoSetValue( int* s, int* v ) { s = v; };
SetValue = boost::bind( DoSetValue, my_value_, _1 ); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:31:27.803

使用 Boost.Lambda 库：

```
#include <boost/function.hpp>
#include <boost/lambda/lambda.hpp>

int main()
{
    boost::function<void(int*)> SetValue = (boost::lambda::var(my_value) = boost::lambda::_1);
    boost::function<int*()> GetValue = boost::lambda::var(my_value);
} 
```

[您可以在其文档](http://www.boost.org/doc/libs/1_49_0/doc/html/lambda/le_in_details.html#lambda.delaying_constants_and_variables)中找到有关使用变量的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:44:24.620

您的第一次尝试不会像`bind()`需要的函数（或函子）那样工作，但是您正在传递一个数据指针，因此您需要提供一个函数来完成您所寻求的工作。

*注意*：如果你使用 C++11，你可以使用 lambdas，以避免创建一个命名函数

*注意*：您需要取消引用中的指针`DoSetValue`或使用引用（在这种情况下，您还需要更改的声明`SetValue`）-否则更改将在函数调用之外不可见

```
void DoSetValue( int& s, int& v ) { s = v; }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:44:29.853

为了`bind`以这种方式工作，您需要一个指向`operator=( int* )`. 当然，没有这样的东西，所以你需要一个中间函数。

如果您可以使用`lambda`or `phoenix`，则有一些方法可以创建一个函数对象，将某些东西分配给其他东西。这取决于您使用的库，但看起来有点像这样：

```
bl::var( my_value_ ) = bl::_1; 
```

# javascript - 尽管包装器/父元素，jQuery 获取元素索引？

> ID：10725941
> 
> 赞同：2
> 
> 时间：2012-05-23T18:41:12.570
> 
> 标签：javascript, jquery

我有相同类的 div，但每个 3 都包含在一个父 div 中。我无法按照我想要的方式获取索引。很抱歉，当我单击任何元素时，谁能帮我将索引作为从 0 到 8 的数字？尽管有父元素。

这是我用于测试的完整代码。

```
<div class="more-content">
    <div class="post">post 1</div>
    <div class="post">post 2</div>
    <div class="post">post 3</div>
</div>
<div class="more-content">
    <div class="post">post 4</div>
    <div class="post">post 5</div>
    <div class="post">post 6</div>
</div>
<div class="more-content">
    <div class="post">post 7</div>
    <div class="post">post 8</div>
    <div class="post">post 9</div>
</div>

<script type="text/javascript">
$(function() {

    // navigate posts with next/prev buttons
    $(".post").click(function(){
        alert($(this).index());
    });

});
</script> 
```

如果我单击我会得到索引 0、1、2 ..我认为是因为每 3 个项目都包含在父项中？我是 jquery 的新手，任何帮助表示赞赏。我需要的是获取具有相同类别的帖子的索引.. 说帖子 6 = 索引 5.. 等等

**更新如果单击的元素是帖子 div 中的子锚点而不是帖子 div 直接，我如何获得相同的结果？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T18:44:53.800

尝试`index`方法`this`作为参数：

```
$(".post").click(function() {
    alert($(".post").index(this));
});​ 
```

**演示：http:** [//jsfiddle.net/Nryf3/](http://jsfiddle.net/Nryf3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:43:35.970

```
var posts = $('.post').click(function(){
    alert(posts.index(this));
}); 
```

***演示：http:*** [//jsfiddle.net/paZ2e/](http://jsfiddle.net/paZ2e/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T18:45:01.157

您可以遍历所有标记为 post 的元素并增加一个计数器，直到找到您要查找的对象，如下所示：

```
$(".post").click(function() {
    var counter = 0;
    var that = this;

    $(".post").each(function() {
        if(that == this) break;
        counter++;
    }

    // counter now equals the index of the post element out of all posts on the page
}); 
```

# sockets - Node.js TCP 客户端的行为与 Netcat/Telnet 不同

> ID：10725943
> 
> 赞同：1
> 
> 时间：2012-05-23T18:41:16.210
> 
> 标签：sockets, node.js, tcp, telnet, netcat

我正在向自定义协议 TCP 服务器发出换行符分隔的文本命令。在下面的示例中，我发出 2 个命令并收到回写的响应。它在 telnet 和 netcat 中按预期工作：

```
$ nc localhost 1234
command1
command2
theresponse 
```

与 Node.js 连接时，相同的工作流程不起作用：

```
var net = require('net');
var client = net.connect(1234, 'localhost');

client.on('data', function(data) {
    console.log('data:', data.toString());
});

client.on('error', function(err) {
    console.log('error:', err.message);
});

client.write('command1\n');
client.write('command2\n'); 
```

我希望在运行该程序后，我会看到“数据：响应”写入控制台，但是，没有打印任何内容。我也尝试在“连接”回调中执行写入，但结果相同。奇怪的是，当我在 Node REPL 中尝试这个时......它可以工作：

```
$ node
> var net = require('net')
undefined
> var client = net.connect(1234, 'localhost')
undefined
> client.on('data', function(data) { console.log('data:', data.toString()); })
{ ... }
> client.write('command1\n')
true
> client.write('command2\n')
true
> data: theresponse 
```

有人对这种奇怪的行为有想法吗？

谢谢。

-斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:09:07.550

在不测试代码的情况下，我假设是 Node.js 的异步特性让您感到厌烦。在 REPL 中，连接发生在您输入另一个命令之前。在上面的代码中，您是在连接之前编写的。

把上面的代码改成这样：

```
var net = require('net');
var client = net.connect(1234, function(){
   client.on('data', function(data) {
     console.log('data:', data.toString());
   });

   client.on('error', function(err) {
     console.log('error:', err.message);
   });

   client.write('command1\n');
   client.write('command2\n');
}); 
```

# animation - 从头开始学习 Maya 还是跳入 Maya 中的索具？

> ID：10725944
> 
> 赞同：-1
> 
> 时间：2012-05-23T18:41:18.303
> 
> 标签：animation, maya

我一直在一家拥有自己专有软件的公司工作，并且我已经学会了操纵。我已经习惯了这样的索具，以至于当我尝试在 Maya 中进行一些索具时，我发现它完全不同。我在网上浏览了很多教程，但我发现它们的方法不是很合乎逻辑，还没有找到一个合乎逻辑且不涉及不必要的复杂方法的教程。我已经掌握了如何装配角色的逻辑，但我正在努力在 Maya 中实现它。从头开始学习 Maya 有意义吗？或者有人可以指导我更好地学习索具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:52:18.493

> 从头开始学习 Maya 有意义吗？

可能，您在 Maya 中所做的一切最终都会成为节点网络中的节点。每个节点网络都是一个钻机，通常不称为钻机。因此，您在 Maya 中所做的一切都是某种绑定，直到您决定将其清除为止。除非您从非常基本的东西开始，否则您无法真正欣赏系统，因为系统的美从那里开始。

因此，首先制作一个多边形立方体，然后打开绑定器主工具*超图*（或 Maya 2012 中的节点编辑器，适用于小图）。观察它实际上已经是一个由 3 个节点组成的钻机：

polyCube 节点连接到形状和变换节点（形状节点的父节点在这里不可见，因为它们驻留在单独的数据结构中）。

所有 Maya 装备看起来都像这样，只是更复杂。现在，您可以将任何箭头重定向到几乎任何具有兼容类型的节点属性。尝试用鼠标中键从变换拖动到多边形立方体：您现在可以通过变换的属性来驱动多边形立方体的属性。

现在很多人不觉得这个直观，所以 Maya 在这个层次之上多了一层。菜单建立在这些东西上，而不向您展示。因此，您可以例如进行骨架和平滑绑定到网格，而无需担心节点网络。但是，如果您真的想学习在 Maya 中进行装配，那么您必须不断观察节点网络并最终学会阅读[节点参考](http://download.autodesk.com/global/docs/maya2012/en_us/Nodes/index.html)。因为一旦你开始做一些事情，比如这个节点的大小取决于这个定位器的位置，你就需要了解节点和属性。

如果我不查看超图，我个人会觉得 Maya 令人困惑。

# javascript - Facebook Javascript 函数嵌套循环

> ID：10725945
> 
> 赞同：0
> 
> 时间：2012-05-23T18:41:20.220
> 
> 标签：javascript, dom-events, facebook-javascript-sdk

我需要做一个循环来首先检索我的朋友 id，然后使用这些 id 我得到每个用户喜欢的页面的 id。我有这个功能，但它只会让我得到第一个用户的喜欢，而不是所有用户都喜欢......

我究竟做错了什么？

```
 FB.api('/me/friends', function(response) {
        friendCount = response.data.length;
        for( i=0; i<response.data.length; i++) {
          friendId = response.data[i].id;
          FB.api('/'+friendId+'/likes', function(response) {
                         var testdiv = document.getElementById("test");
        for(i=0;i<response.data.length;i++)
            {
                 testdiv.innerHTML +=  response.data[i].id + '<br/>' ;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T19:14:04.240

您正在覆盖“响应”的值 - 在重用“响应”之前将用户 ID 保存到另一个变量中

编辑：将前几行更改为：

```
 FB.api('/me/friends', function(response) {
        friendCount = response.data.length;
        friendData = response.data;
        for( i=0; i<friendCount; i++) {
          friendId = friendData[i].id; 
```

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:21:57.140

```
 FB.api('/me/friends', function(response) {
        friendCount = response.data.length;
        for( i=0; i<response.data.length; i++) {
          friendId = response.data[i].id;
          FB.api('/'+friendId+'/likes', function(response2) { // use another variable
          var testdiv = document.getElementById("test");
        for(j=0;j<response2.data.length;j++) // use another var here also
            {
                 testdiv.innerHTML +=  response2.data[i].id + '<br/>' ;
            } 
```

# javascript - 向 JSP 提交 JavaScript 数组

> ID：10725947
> 
> 赞同：1
> 
> 时间：2012-05-23T18:41:31.837
> 
> 标签：javascript, arrays, json, jsp

我正在开发一个 webapp，它通过 JS API 连接到其他网站。我想在我的 Java 应用程序中使用从这个 API 获得的 JSON 对象数组。

是否有可能提交数组，例如使用表单？

干杯多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:35:15.613

*   创建一个新数组
*   创建一个循环
*   在循环中的当前索引上使用[JSON.stringify](http://cjihrig.com/blog/native-browser-support-for-json-part-2-of-2/)
*   将字符串推入新数组
*   在循环之后，使用 join() 对新数组进行字符串化
*   将新字符串复制到隐藏的表单域中
*   提交

# wpf - WPF窗口边框问题

> ID：10725952
> 
> 赞同：0
> 
> 时间：2012-05-23T18:41:42.540
> 
> 标签：wpf, xaml

我有以下主窗口

```
 <Window x:Uid="Window_1" x:Class="App1.MainWindow"  
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"     
            Title="MainWindow" Height="350" Width="525" Loaded="Window_Loaded" Closing="Window_Closing" 
            SizeChanged="Window_SizeChanged" Topmost="True" AllowsTransparency="True"  Opacity="1"
            WindowStyle="None" ResizeMode="CanMinimize"  WindowStartupLocation="CenterScreen"   
            WindowState="Maximized" KeyDown="Window_KeyDown" MouseDoubleClick="Window_MouseDoubleClick"  Background="Black"
            MouseLeftButtonDown="Window_MouseLeftButtonDown" MouseMove="Window_MouseMove"  >

 <Viewbox x:Uid="Viewbox_1" Stretch="Uniform" StretchDirection="Both" SnapsToDevicePixels="True" >
        <Grid  x:Uid="MainLayout"   Name="MainLayout" SnapsToDevicePixels="True">
            <Canvas x:Uid="MainCanvas" Name="MainCanvas" SnapsToDevicePixels="True">

            </Canvas>
        </Grid>
    </Viewbox> 
```

但不知何故在窗口的正常模式下会出现一些填充（由于窗口背景颜色，它是黑色的）

任何线索如何取出它？

![在此处输入图像描述](../Images/0df839fa2629579b0cbc5af911bc1fbf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:21:01.817

在您的根窗口上：`Background="Transparent"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:21:09.290

我试图复制你的问题，但没有完整的代码，它似乎不会发生。我使用了这段代码：

```
<Window x:Class="WpfApplication2.MainWindow"
        x:Uid="Window_1"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"      
            Title="MainWindow" Height="350" Width="525" Topmost="True" AllowsTransparency="True"  Opacity="1" 
            WindowStyle="None" ResizeMode="CanMinimize"  WindowStartupLocation="CenterScreen"  Background="Black" >

    <Grid Background="Green">
        <Viewbox x:Uid="Viewbox_1" Stretch="Uniform" StretchDirection="Both" SnapsToDevicePixels="True" >
            <Grid Background="Red"  x:Uid="MainLayout"   Name="MainLayout" SnapsToDevicePixels="True">
                <Canvas x:Uid="MainCanvas" Name="MainCanvas" SnapsToDevicePixels="True" Background="Blue">

                </Canvas>
            </Grid>
        </Viewbox>

    </Grid>
</Window> 
```

只是想看看会发生什么。显然，没有图像，内部画布、网格和视图框不会占用任何空间，因此您得到的只是一个纯绿色窗口（主网格中的绿色与窗口的黑色完全重叠）。

我唯一的想法是：当 Viewbox 使用均匀拉伸时，它与图像的纵横比与窗口的纵横比有关吗？

# devise - Twitter 不提供用于 Rails 集成的电子邮件地址

> ID：10725954
> 
> 赞同：1
> 
> 时间：2012-05-23T18:41:45.863
> 
> 标签：devise, oauth-2.0, twitter-oauth, ruby-on-rails-3.2

我已经使用 Devise 和 OAuth 将社交登录（Facebook、Twitter 等）与 Rails 应用程序集成。请求和回调都运行良好，用户能够有效地验证应用程序并登录。

我的问题是这样的：

使用 Devise，我的网站将用户的电子邮件地址作为用户名。因此，每当用户第一次通过社交网站登录时，都会为他们的帐户存储“连接”记录，以显示他们登录过哪些社交网站。如果他们在我的站点上还没有帐户，则使用回调数组中的电子邮件地址创建一个帐户。然后将连接与返回的令牌和机密一起存储以供以后使用（FB 帖子、推文等）。

不幸的是，Twitter 不提供电子邮件地址。为了避免这种情况，我要求首次使用 Twitter 登录的用户只需提供一个电子邮件地址，以便创建一个帐户。但是，如果他们已经在我的网站上有一个帐户，我不知道该怎么办。我无法检查他们是否已经这样做了，因为我没有得到匹配的电子邮件地址。这最终可能导致用户拥有多个帐户。

所以，我有点不知所措，如果有人有任何建议，那将非常有帮助。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T07:48:32.923

您还需要将一些 oauth 提供者信息（例如 {provider, twitter identifier}）存储到您的数据库中，然后根据该信息而不是电子邮件 ID 检查 twitter oauth。

如果登录是通过 twitter，最简单的方法是添加一个稍微不同的流程。向首次登录 Twitter 的用户询问电子邮件 ID。在您的用户表中，添加一个名为 tw_id 的列并添加用户 Twitter 标识符。下一次，如果通过 Twitter 登录，您检查 tw_id 而不是提供商电子邮件并继续正常的应用程序流程。

# http - 通过 HTTP 传输文件

> ID：10725959
> 
> 赞同：7
> 
> 时间：2012-05-23T18:42:13.337
> 
> 标签：http, http-headers, httpwebresponse

据我所知，可以通过 HTTP 协议传输二进制文件。但是 HTTP 是基于文本的协议，典型的 HTTP 响应帧如下所示：

```
HTTP/1.1 200 OK
Date: Wed, 23 May 2012 22:38:34 GMT
Content-Length: 438
Content-Type: text/html; charset=UTF-8

Here goes content 
```

如果是这样，二进制文件应该如何在这个帧中编码？什么是内容类型？使用 base64 编码的内容是否与 POP3 协议中的附件相同？或者它是原始数据（如果是这样，是否可能不会引起问题？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T20:29:37.047

标头字段是基于文本的，但实际有效负载是二进制的。你可以转移任何你想要的东西。

不，它与 Content-Type 没有任何关系。那只是一个标签，以便接收者知道如何处理数据；它不会影响协议本身的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:12:08.437

二进制文件通常使用 Application/octet-stream mimetype 传输（当然，除非它们匹配另一个更具体的 mimetype）。对于传输，您使用原始数据 - 不需要 base64。

# emacs - 在 emacs 编译模式下正确处理并行构建错误

> ID：10725966
> 
> 赞同：5
> 
> 时间：2012-05-23T18:42:39.753
> 
> 标签：emacs, compilation

当我使用`M-x compile`make -jn 为多（级别）目录项目进行并行编译时，当我遇到错误时，我无法使用`next-error`东西到达正确的位置。Emacs 总是为有问题的文件进入错误的目录。但是如果我不使用-jn 就没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T14:34:55.207

`next-error`使用编译的文本输出来确定去哪里。但是对于并行编译，这个文本输出可能会被破坏，即使它没有被破坏，它也可能并且经常是模棱两可的（想想一个任务编译 foo/bar 而另一个任务编译 toto/titi，输出看起来像“进入目录 foo；进入目录 toto；bar 中的错误：20；titi 中的错误：69")。

我只能想到以下方法来解决这个问题：

*   构建你的make文件，这样你就永远不会改变目录（所以所有的文件名都是相对于同一个当前工作目录的）。
*   更改您的 make 文件以便将绝对文件名传递给您的编译器，因此错误消息中的所有文件名都是绝对的。
*   破解 Emacs`compile.el`以便在查找“bar”时，它会在之前提到的所有目录中获取它。

最后一个更改可能是一个不错的更改（即欢迎补丁），但请注意，如果“bar”同时存在于“foo”和“toto”中，它仍然会遇到问题。另外两个更改也可能会遇到问题，因为输出也可能最终看起来像 "Entering directory foEntering directory toto; o;"; 而且我不知道可以做些什么来避免这个问题。

# php - 单击按钮时运行 php 函数

> ID：10725967
> 
> 赞同：0
> 
> 时间：2012-05-23T18:42:41.430
> 
> 标签：php

我有一个 php 脚本页面，其形式如下：

```
<form method="post" action="clientmanager.php">
<input type="text" name="code_client" id="code_client" />
<input type="submit" value="Save" />
</form> 
```

在我的文件“clientmanager.php”中，我有一个函数，例如“addClient()”。我想点击按钮，只调用文件“clientmanager.php”中的函数“addClient()”，而不是调用整个文件“clientmanager.php”，那我该怎么办？谢谢！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T18:46:23.160

将此添加到文件顶部：

```
if (isset ($_POST ['code_client'])) addClient(); 
```

但是，您应该考虑使用不同的设置处理表单，这样被认为是**不好的做法**。也许创建一个单独的文件，使用 OOP、MVC、框架，除此之外的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:52:11.253

你可以通过 jquery (ajax) 做到这一点。

1.  在头部调用 jquery 库

2.  通过此代码调用 clientmanager.php：

**my_form.php**

```
....
<script type="text/javascript" src="jquery.js"></script>
...

<form method="post" action="">
<input type="text" name="code_client" id="code_client" />
<input id="my_button" type="button" value="Save" />
</form>

<div id="response_div"></div>

<script type="text/javascript">

    $(document).ready(function(){

        $("#my_button").click(function(){

                $.post("clientmanager.php", {code_client: $('#code_client').val()}, function(data){

                    if(data.length >0) {

                        $('#response_div').html(data);

                    }//end if
                });

        });

    });

</script> 
```

**客户端管理器.php**

```
<?php

echo $_POST['code_client'];

?> 
```

# java - 如何在 java 中对这个方法进行单元测试？

> ID：10725969
> 
> 赞同：3
> 
> 时间：2012-05-23T18:42:48.333
> 
> 标签：java, spring, unit-testing, dao

我正在使用 Struts2 框架，并希望对`execute`以下方法进行单元测试：

```
public String execute() {
    setDao((MyDAO) ApplicationInitializer.getApplicationContext().getBean("MyDAO"));
    setUserPrincipal(); //fetches attribute from request and stores it in a var
    setGroupValue(); //
    setResults(getMyDao().getReportResults(getActionValue(), getTabName());
    setFirstResultSet((List) getResults()[0]);
    setSecondResultSet((List) getResults()[1]);
    return SUCCESS;
} 
```

如您所见，大部分逻辑与数据库相关。那么我将如何对这个功能进行单元测试呢？我想通过模拟`HTTPServletRequest`其中的几个请求变量来进行单元测试。

我的问题是：

*   我如何伪造/模拟请求变量，就好像它来自浏览器一样
*   我的单元测试是否应该调用实际的 DAO 并确保数据返回？
*   如果是这样，我如何从单元测试中调用 DAO，因为 DAO 绑定到服务器，因为 jndi 池设置驻留在应用程序服务器上。

我很感激任何展示如何真正做到这一点的书/文章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T18:55:13.873

您向我们展示的代码不足以完全回答您的问题。

# 逐行

```
setDao((MyDAO) ApplicationInitializer.getApplicationContext().getBean("MyDAO")); 
```

这是最难的路线，因为它使用静态方法。我们需要看看是如何`ApplicationInitializer`工作的。在理想世界中，该`getApplicationContext()`方法应该返回模拟的`ApplicationContext`. 这个模拟应该在何时`MyDAO`返回`getBean("MyDAO")`。[mockito](/questions/tagged/mockito "显示标记为“mockito”的问题")完全有能力处理这个问题，以及所有其他模拟框架。

* * *

```
setUserPrincipal(); //fetches attribute from request and stores it in a var 
```

请求从何而来？它是否注入到动作类中？如果是这样，只需注入模拟请求对象，例如[`MockHttpServletRequest`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/mock/web/MockHttpServletRequest.html).

* * *

```
setGroupValue(); // 
```

和上面一样吗？请提供更多详细信息，这种方法实际上是做什么的？

* * *

```
setResults(getMyDao().getReportResults(getActionValue(), getTabName()); 
```

`getReportResults()`当使用给定的参数调用时，您之前创建的模拟应该返回一些东西。

* * *

```
setFirstResultSet((List) getResults()[0]);
setSecondResultSet((List) getResults()[1]); 
```

我猜下面的方法在动作类上设置了一些字段。因为您可以完全控制从 mocked 返回的内容`getReportResults()`，所以这不是问题。

* * *

```
return SUCCESS; 
```

您可以断言是否`SUCCESS`是执行结果。

* * *

# 现在一般

> 我如何伪造/模拟请求变量，就好像它来自浏览器一样

见上文，Spring 中内置了一个 mock。

> 我的单元测试是否应该调用实际的 DAO 并确保数据返回？

如果你的单元测试调用真正的 DAO，它就不再是单元测试。这是一个集成测试。

> 如果是这样，我如何从单元测试中调用 DAO，因为 DAO 绑定到服务器，因为 jndi 池设置驻留在应用程序服务器上。

这意味着您正在进行集成测试。在这种情况下，您应该使用像[h2](/questions/tagged/h2 "显示标记为“h2”的问题")这样的内存数据库，这样您仍然可以在[ci](/questions/tagged/ci "显示标记为“ci”的问题")服务器上运行测试。您必须以某种方式配置您的应用程序以`DataSource`从不同的位置获取。

* * *

# 最后说明

本质上，您应该将所有内容的模拟注入到您的 Struts 动作类中。您可以告诉模拟在调用时返回任何值。然后，在调用之后`execute()`，您可以验证给定的方法被调用，字段设置和结果值是否正确。考虑将其拆分为几个测试。

* * *

# 代码审查

*   Struts 2 与 Spring 完美集成。如果您利用该功能，Spring 容器将自动注入`MyDAO`您的操作类。第一行已过时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:53:57.037

这段代码很难进行单元测试，因为你没有按预期使用 Spring（即作为依赖注入框架），而是将它用作工厂。依赖注入正是用于避免您正在执行的这种难以测试的 bean 查找。DAO 应该被注入到您的对象中。这样，您可以在对对象进行单元测试时注入模拟 DAO。

此外，此逻辑根本与数据库无关。DAO 包含与数据库相关的逻辑。此操作*使用*DAO，因此 DAO 是另一个单元（应在其自己的单元测试中进行测试）。因此，您应该注入一个模拟 DAO 来对该方法进行单元测试。

最后，这个方法不使用 HttpServletRequest （至少不直接使用），所以我不明白你为什么需要使用假请求。您可以模拟使用请求的 setXxx 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T19:01:49.087

1.  与其简单地模拟`HTTPServletRequest`，不如模拟对应用程序本身的实际自动目标请求？查看[Selenium](http://seleniumhq.org/)，它可以让您做到这一点。

2.  对于测试 DAO（集成测试），您可以使用[HSQLDB](http://hsqldb.org/)在内存中创建数据库，这将允许您从测试中创建/删除对象，并确保它们被正确地持久化/检索。HSQLDB 的优势在于您的测试将比使用实际数据库运行得快得多。当需要提交代码时，您可以针对您的实际数据库运行测试。通常，您会在 IDE 中设置不同的运行配置来促进这一点。

3.  让注入的 daos 可用于测试的最简单方法是让单元测试类扩展`AbstractJUnit4SpringContextTests`. 然后，您可以使用`@ContextConfiguration`注释指向多个 xml 应用程序上下文文件，或者如果您使用基于注释的配置，请将其指向您的上下文文件，其中包含`<context:annotation-config />`声明。

# sql-server - 锁定一个表是否会锁定其他表，以防它们在 sql server 中定义了视图

> ID：10725972
> 
> 赞同：0
> 
> 时间：2012-05-23T18:43:29.370
> 
> 标签：sql-server, sql-server-2008

我有三张桌子：

1.  批量导入
2.  患者图表图像
3.  PatientChartBatchMapping（此表具有 ImportBatch 和 PatientChartImages 的外键）

我有一个未索引的视图，定义了从 3 个表中选择记录。我通过以下命令明确锁定 PatientChartImages 表以生成生产数据库的阻塞场景

```
begin transaction
update PatientChartImages set imagesequence=imagesequence
--Commit transaction 
```

以上查询锁定 PatientChartImages 表。此外，以下查询超时：

```
select * from ImportBatch where importbatchid=@importbatchid 
```

当我删除视图并遵循相同的过程时，ImportBatch 查询不会超时。任何人都可以解释这种行为。这是设计使然还是我在做一些疯狂的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:45:30.297

单独的视图不会导致这种行为。但是索引视图肯定会。或者图像序列上的外键约束（如果存在）。

# oracle - 如何在 Oracle 中做简单的子字符串

> ID：10725976
> 
> 赞同：1
> 
> 时间：2012-05-23T18:43:41.710
> 
> 标签：oracle

如何在 Oracle Query 中执行此操作？这就是说我们想要在该列中最左侧位置为“1”的记录。

* * *

```
AND substring(convert(varchar,TR.MENU_ID_VALUE), 1, 1) = '1' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T18:50:32.510

[`convert`function](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions034.htm#SQLRF00620)函数将字符串从一个*字符集*转换为另一个字符集。语法是`convert(<string>, <to character set>, <from character set>)`

另外，`substring`不是 Oracle 函数，它是[`substr`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions181.htm#SQLRF06114).

如果您不需要转换字符串，那么`and substr(tr.menu_id_value,1,1)`将为您提供最左边的字符。

如果您确实想转换字符集，那么[文档中提供](http://docs.oracle.com/cd/E11882_01/server.112/e10729/applocaledata.htm#i635016)了完整列表，或者您可以查询[`v$nls_valid_values`](http://docs.oracle.com/cd/E11882_01/server.112/e25513/dynviews_2076.htm#REFRN30160)。例如，如果您要从 WE8MSWIN1252 [（Windows 代码页 1252）](http://en.wikipedia.org/wiki/Windows-1252)转换为 AL32UTF8 [（UTF-8）](http://en.wikipedia.org/wiki/UTF-8)，那么您的条件将变为：

```
and substr(convert(tr.menu_id_value,'AL32UTF8','WE8MSWIN1252'),1,1) = '1' 
```

* * *

根据您的评论，我猜这`convert()`是在数据类型之间转换的 SQL-Server 函数。在这种情况下，Oracle 等价物将是[`to_char`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions201.htm#SQLRF06130). 尽管 Oracle 会隐式地进行转换，但最好还是显式*地*使用`to_char`和转换；给你：

```
and substr(to_char(tr.menu_id_value),1,1) = '1' 
```

顺便说一句，*确切的*Oracle 等效项是[`cast()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions023.htm#SQLRF00613). 严格来说，`to_char()`如果你想使用[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#SQLRF00211)，应该使用它，因此在假设长度小于或等于 10`substr(cast tr.menu_id_value as varchar2(10)),1,1)`之后也会给你你想要的东西。`tr.menu_id_value`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T18:51:08.373

利用`SUBSTR`

```
AND substr(tr.menu_id_value,1,1) = '1' 
```

# android - Android - 如何通过 Intent 编辑特定的联系人组？

> ID：10725977
> 
> 赞同：1
> 
> 时间：2012-05-23T18:43:45.853
> 
> 标签：android, android-intent, edit

我想打开系统屏幕来编辑特定的组。

我想，我需要使用和 Intent 与 ACTION_EDIT 动作。但是，我不知道我必须在其中放入哪些其他值才能获得必要的结果。任何人都可以帮助我吗？

# jquery - 在Firefox中使用jquery设置光标文本区域

> ID：10725979
> 
> 赞同：0
> 
> 时间：2012-05-23T18:43:53.257
> 
> 标签：jquery, firefox, cursor, caret

一年前我已经找到了很多很好的答案（当时它仍然在我们的网站上工作），但在 textareas 和输入中设置光标位置或选择时，Firefox 似乎不再按预期工作。

我想做的是专注于文本区域并将光标放在开头。所有这些小提琴在 Chrome 和 IE 中都可以正常工作，但在 FF 中失败。我更喜欢 jQuery 解决方案，但我并没有被简单的 js 冒犯。

小提琴（在 FF 11 或 12 中不起作用）：

*   [$.fn 解决方案](http://jsfiddle.net/trickqba/d5Bb5/ "$.fn 解决方案")
*   [原型解决方案](http://jsfiddle.net/anoop26667/CHrfc/)
*   *$.fn 解决方案*(1)

这与*这个问题*(2) 类似，但我无法对任何答案发表评论，而且它们都较旧。

请帮忙。如果我错过了一些简单的东西，可以加分。我们一半以上的用户都在使用 FF，而我没有想法。

* * *

已达到超链接限制，很抱歉没有帮助。我将对其进行编辑，以便在可以时将它们放回原处。

1.  http://jsfiddle.net/mnbayazit/WpqsN/
2.  http://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:12:35.480

这是我最终为遇到此问题的其他人找到的答案。

过去，动画*CSS:visibility*只会在计时器结束时翻转。然而，在我的例子中，我发现 activeElement 和光标位置不会同时移动。正因为如此，像*setSelection*这样的事情不能按预期工作。

CSS 转换将*可见性*列为受支持的属性，但不要让自己头疼，不要在需要焦点或附加了类似处理程序的元素上使用它。

# java - 解析日期java

> ID：10725983
> 
> 赞同：2
> 
> 时间：2012-05-23T18:44:03.537
> 
> 标签：java, date, format

如何将此日期格式解析为我的意思`Mon May 14 2010 00:00:00 GMT+0100 (Afr. centrale Ouest)`的日期格式`05-14-2010``mm-dd-yyyy`

它告诉我这个错误：

`java.text.ParseException: Unparseable date: "Mon May 14 2010 00:00:00 GMT+0100 (Afr. centrale Ouest)"`

**编辑**

```
SimpleDateFormat formatter = new SimpleDateFormat("M-d-yyyy");
newFirstDate = formatter.parse(""+vo.getFirstDate());  //here the error 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T18:55:31.477

该代码首先对字符串稍作调整，然后继续对其进行解析。它尊重时区，只是删除了“GMT”，因为这就是`SimpleDateFormat`它的喜好。

```
final String date = "Mon May 14 2010 00:00:00 GMT+0100 (Afr. centrale Ouest)"
  .replaceFirst("GMT", "");
System.out.println(
    new SimpleDateFormat("MM-dd-yyyy").format(
        new SimpleDateFormat("EEE MMM dd yyyy HH:mm:ss Z").parse(date))); 
```

印刷：

```
05-14-2010 
```

请记住，输出也是时区敏感的。**您的输入字符串定义的时刻在我的时区**中被解释为属于程序打印的日期。如果您只需要将“May 14 2010”转换为“05-14-2010”，那就是另一回事了，`SimpleDateFormat`不太适合。图书馆`JodaTime`会更干净地处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T18:45:13.573

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class Test
{
    public static void main( String args[] ) throws ParseException
    {
        // Remove GMT from date string.
        String string = "Mon May 14 2010 00:00:00 GMT+0100 (Afr. centrale Ouest)".replace( "GMT" , "" );

        // Parse string to date object.
        Date date = new SimpleDateFormat( "EEE MMM dd yyyy HH:mm:ss Z" ).parse( string );

        // Format date to new format
        System.out.println( new SimpleDateFormat( "MM-dd-yyyy" ).format( date ) );
    }
} 
```

输出：

```
05-13-2010 
```

# c# - 为 SQLDataSource 动态使用 SQL 语句

> ID：10725986
> 
> 赞同：0
> 
> 时间：2012-05-23T18:44:25.160
> 
> 标签：c#, asp.net, oracle, sqldatasource

我可能会或可能不会在这里为你们提出一个非常简单的问题。基于我的 if-else 语句是否存在字符串，我试图调用带有参数的 SELECT 语句，并将它们都传递给相同的结果 GridView。

这是我正在尝试做的事情：

```
 string query;
 if(BadgeNumLabel.Text != "")
 {
     query = "SELECT * FROM AUDITS";
 else
 {
     query = "SELECT * FROM AUDITS WHERE BADGENUM = :BadgeNumLabel";
     GridDataSource.SelectParameters.Add(new Parameter("BadgeNumLabel",TypeCode.String, BadgeNumLabel.Text));
 }

 GridDataSource.SelectCommand = query;
 GridView1.DataBind(); 
```

我的 .aspx 代码如下所示：

```
 <asp:SqlDataSource ID="GridDataSource" runat="server"
            ConnectionString="<%$ ConnectionStrings:OracleConnectionString %>" 
            ProviderName="<%$ ConnectionStrings:OracleConnectionString.ProviderName %>"  
            onselecting="GridDataSource_Selecting">

        </asp:SqlDataSource> 
```

有什么我想念的吗？我很难过。我认为它必须通过传递参数 BadgeNumLabel 来做一些事情，但我不确定。

任何帮助是极大的赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:00:42.343

您需要将结果分配`GridDataSource`给`GridView1.DataSource`

```
SqlConnection sqlConnection1 = new SqlConnection("Your Connection String");
SqlCommand GridDataSource= new SqlCommand();

GridDataSource.CommandText = "SELECT * FROM AUDITS";
GridDataSource.CommandType = CommandType.Text;
GridDataSource.Connection = sqlConnection1;

sqlConnection1.Open();

GridView1.DataSource = GridDataSource.ExecuteReader();
GridView1.DataBind(); 
```

**编辑**

它不是字面上的 ExecuteCommand，我想说的是，您需要将 SqlCommand 的结果分配给`GridView`

# serialization - 从/到文件读取和保存功能 - OpenLayers

> ID：10725989
> 
> 赞同：0
> 
> 时间：2012-05-23T18:44:36.290
> 
> 标签：serialization, deserialization, openlayers

我要疯了。我试图重现 OpenLayers 2.10 初学者指南中的一个示例，我试图在其中显示保存在 json 文件中的功能并在地图上添加功能，并将它们保存到文件中。

```
var map;    
function init(){
            map = new OpenLayers.Map('map');
            var options = {numZoomLevels: 3}
            var floorplan = new OpenLayers.Layer.Image(
            'Floorplan Map',
            'temp_photos/sample-floor-plan.jpg',
            new OpenLayers.Bounds(-180, -88.759, 180, 88.759),
            new OpenLayers.Size(580, 288),
            options
        );
            var roomPolygonLayer = new OpenLayers.Layer.Vector('Rooms', {
                protocol: new OpenLayers.Protocol.HTTP({
                    url: "myFloorPlanData.json", 
                    format: new OpenLayers.Format.GeoJSON({})}),
                strategies: [new OpenLayers.Strategy.Fixed(), new OpenLayers.Strategy.Save()]
            });

            map.addLayers([floorplan, roomPolygonLayer]);
            map.zoomToMaxExtent();
            map.addControl(new OpenLayers.Control.EditingToolbar(roomPolygonLayer));

            map.layers[1].onFeatureInsert = function(feature){
                alert("feature id: "+feature.id);
                alert("feature geometry: "+ feature.geometry);
            };
        } 
```

到目前为止，我的地图已显示，我可以在地图上绘制矢量，但是它拒绝显示我在 json 文件中的两个点，并保存我绘制的新点：

```
{
"type": "FeatureCollection",
"features": [
    {"type":"Feature","properties":{}, "geometry":{"type":"Point", "coordinates":[5, 63]}},
    {"type":"Feature","properties":{}, "geometry":{"type":"Point", "coordinates":[-48, 27]}}
] 
```

}

json 文件与我的 jsp 文件位于同一文件夹中，我正在服务器上运行我的项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T15:11:53.327

OpenLayers.Strategy.Save 不能直接修改 json 文件。它只能通过实现 WFS-T 协议的 Web 服务工作。

您可以安装支持 WFS-T 的软件，例如[Geoserver](http://geoserver.org)。然后您可以在您的 OpenLayers 应用程序中使用 OpenLayers.Strategy.Save。

另一种选择是创建将修改 json 文件的自定义 Web 服务。然后，您将创建某种保存按钮，单击该按钮将调用您的自定义 Web 服务。

# php - 正则表达式替换为条件：仅分隔相邻的数字

> ID：10725990
> 
> 赞同：0
> 
> 时间：2012-05-23T18:44:36.303
> 
> 标签：php, regex

我有一个带有数字的 txt 文件：

```
1-2 c., 3-6 c., 7-8 c., 12-15 c. etc. 
```

我需要用“和”分隔相邻的数字（示例中的 1-2 和 7-8），而其余的数字我想保持原样，这样我就得到了：

```
1 and 2 c., 3-6 c., 7 and 8 c., 12-15 c. etc. 
```

如果我想替换所有连字符，我可以这样做：

```
$newtxt = preg_replace('#(\d+)-(\d+)#', '$1 and $2', $txt); 
```

我可以使用 PHP 的其他方式轻松地做到这一点，但问题是我只需要借助正则表达式来做到这一点。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:02:40.037

您可以使用 preg_replace_callback 并使用该功能。它不是完全正则表达式，但接近它。

```
function myCallback ($match){
   if($match[1] == $match[2]-1){
       return $match[1]." and ".$match[2];
   } else {
       return $match[0];
   }
}
preg_replace_callback(
    '#(\d+)-(\d+)#',"myCallback",$txt
); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T19:07:59.693

您需要`preg_replace_callback`它允许您编写一个函数，该函数根据匹配和捕获的字符串返回所需的替换字符串。

```
$str = '1-2 c., 3-6 c., 7-8 c., 12-15 c. etc. ';

$str = preg_replace_callback(
  '/(\d+)-(\d+)/',
  function($match) {
    return $match[2] == $match[1] + 1 ? "$match[1] and $match[2]" : $match[0];
  },
  $str
);

echo $str; 
```

**输出**

```
1 and 2 c., 3-6 c., 7 and 8 c., 12-15 c. etc. 
```

# c# - 您可以将属性应用于 C# 中的多个字段吗？

> ID：10725998
> 
> 赞同：9
> 
> 时间：2012-05-23T18:45:04.877
> 
> 标签：c#, custom-attributes

这似乎不可能，但无论如何我都会问......在 C# 中是否可以一次将单个属性应用于多个字段？

```
public class MyClass {
     [SomeAttribute]
     public int m_nVar1;
     [SomeAttribute]
     public int m_nVar2;
     public int m_nVar3;
} 
```

是否有一种速记方法可以将“SomeAttribute”放在 m_Var1 和 m_Var2 上，而不是放在 m_nVar3 上？目前，我们将属性放在每个字段之前，但最好将所有使用属性的字段放在块内。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T18:46:51.403

是的，有可能：

```
[SomeAttribute]
public int m_nVar1, m_nVar2; 
```

（但显然只有在类型相同的情况下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:58:04.267

这可以工作吗？，但最终可能会很乏味

```
public class CustomClass
{
 [CustomAttribute]
 public dynamic value { get; set; }
}

public class MyClass
{
    public CustomClass m_nVar1, var2, var3;
    public MyClass()
    {
        m_nVar1.value = (int)m_nVar1.value;
        var2.value = (string)var2.value;
    }
} 
```