# StackOverflow 问答 12459000-12459999

# c++ - C++ 中非常量列表迭代器的奇怪行为

> ID：12459001
> 
> 赞同：0
> 
> 时间：2012-09-17T12:18:02.737
> 
> 标签：c++, list, iterator, segmentation-fault, erase

我有一个代码：

```
it = tableAndHand.begin();
while(++it != tableAndHand.end()) {
 if(*it == *(--it)) {
  ++cardCount;
  ++it;
 } else {
  cardCounts1.insert(pair<int,int>(cardCount,*it));
  while(cardCount > 1) {
   it = tableAndHand.erase(--it);
   --cardCount;
  }
 ++it;
 }
}
cardCounts1.insert(pair<int,int>(cardCount,*(--it)));
while(cardCount > 1) {
 it = tableAndHand.erase(--it);
 --cardCount;
} 
```

tableAndHand 在开始时是 7 个值的列表，在删除一些值后，我在那个有问题的地方得到了分段错误，为什么会这样？

列表中的值已排序，它在列表 {0, 0, 0, 1, 1, 1, 2} 某处迭代 1 时失败（在正确擦除 2 0 之后，因此列表的大小已经是 5 ）。

我只想将唯一值的计数保存到地图 cardCounts1 中并从列表中删除重复的值，我的算法有什么问题？

编辑：看起来问题是 (*it == *(--it)) 没有从左到右进行评估，尽管我在 cplusplus.com 和一些关于运营商的文章中找不到“==”的评估他们说其他网站是从左到右评估的。关于它的一些好的链接？

**EDIT2：好的，它可以工作，我忘记将 tableAndHand.erase(--it) 迭代器分配给它，现在它可以完美快速地工作:)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:35:50.457

在与结尾进行比较之前，您`it`最多可以在循环中增加 3 次。

您擦除而不保存新的迭代器。

很多副作用。

的顺序`if(*it == *(--it)) {`未定义，因此您最终可能会将元素与其自身进行比较。(`==`不是序列点，因此`*it`可以`*(--it)`按任意顺序评估)。

您不检查是否为`tableAndHand`空 - 您`it`在检查之前递增。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:33:53.213

`it`在循环的每次迭代中增加两次：

```
while(++it != tableAndHand.end()) {  // <---- IN THIS LINE
  //HERE IS THE PROBLEM
  if(*it == *(--it)) {
   ++cardCount;
   ++it;      // <----- AND EITHER HERE
  } else {
    cardCounts1.insert(pair<int,int>(cardCount,*it));
    while(cardCount > 1) {
     tableAndHand.erase(--it);
     --cardCount;
    }
    ++it;   // <----- OR HERE
  }
} 
```

这意味着您应该在列表末尾运行，然后在 while 循环中进行比较：

```
while (++it != tableAndHand.end()) 
```

*因为迭代器永远不会准确地*指向容器的末尾，所以永远产生 true 。

如果元素的数量是偶数，它*可能会*起作用（尽管，由于您有时会删除元素，因此很难预测）。

* * *

另一个问题是初始迭代将立即增加`it`一次，如果容器恰好为空，则立即将其推到容器末端之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:09:55.943

```
if(*it == *(--it)) 
```

此代码的行为未指定：编译器可以`--it`先在比较的右侧求值，然后再`it`在左侧求值，也可以反过来进行。

更一般地说，对于一个列表，不要尝试使用同一个迭代器来访问两个相邻的元素；它只会导致混乱的代码。使用两个迭代器：一个当前位置和一个预告片，并且每次循环时都将每个迭代器递增一次且仅递增一次。

# jquery - 将图像以随机组的形式放入容器 div 中，每组 1、2 或 3 个元素

> ID：12459007
> 
> 赞同：1
> 
> 时间：2012-09-17T12:18:15.803
> 
> 标签：jquery

我有一系列图像让我们说

```
<img src="1.jpg" />
<img src="2.jpg" />
<img src="3.jpg" />
<img src="4.jpg" />
<img src="5.jpg" />
<img src="6.jpg" /> 
```

等等等等。

我需要做的是在 div 中包含随机的 1,2 或 3 个元素。所以结果是

```
<div>
 <img src="1.jpg" >
</div>
<div>
 <img src="2.jpg" ><img src="3.jpg"><img src="4.jpg">
</div>
<div>
 <img src="5.jpg" ><img src="6.jpg" >
</div> 
```

任何想法如何做到这一点？

谢谢！

------ 编辑 ------- 如何做同样的事情，但这次图像被包裹在一个 ? 简单地替换 Bojan 中的 img 似乎并不能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:33:23.577

这是一个非常简单的例子

这是html

```
<div id="container">
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
    <img src="" />
</div> 
```

这是javascript

```
function wrapInsideDiv(){
    while($("#container>img").length > 0){
        var images = Math.floor(Math.random() * 4) + 1;
        var div = $("<div/>");
        $("#container").append(div);
        $("#container>img").each(function(index, elem){
            if(index + 1 < images){
             $(elem).appendTo(div);
            }
        });
    }
}
wrapInsideDiv();​ 
```

[演示](http://jsfiddle.net/ZD8JY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:41:42.490

我会这样做（[这里有一个演示](http://jsfiddle.net/VKHTV/2/)，您可能需要检查页面源以查看结果）：

HTML

```
<img src="img.png" />
<img src="img.png" />
<img src="img.png" />
<img src="img.png" />
<!-- etc. ->

<div id="container"></div> 
```

JS

```
var randomNr, currentDiv;

$("img").each(function(){
    // if this is the first iteration, or if randomNr is larger than 3
    if(randomNr == undefined || randomNr > 3){
        // get a new random nr between 1 and 3
        randomNr = randomXToY(1, 3);
        // create a new div to put the images in
        currentDiv = $("<div></div>");
        $("#container").append(currentDiv);
    }

    // move image to currentDiv
    $(this).appendTo(currentDiv);
    randomNr++;   
});

// function to get random number
function randomXToY(minVal,maxVal){
    var randVal = minVal+(Math.random()*(maxVal-minVal));
    return Math.round(randVal);
} 
```

这会生成一个介于 1 和 3 之间的随机 nr，循环遍历所有图像并从该数字计数到 3。每次随机数大于 3 时，都会创建一个新的 div 来放入图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:21:37.493

为每个图像提供一个 id，并使用 javascript 或 jquery，生成一个随机数或一系列随机数，并使用此变量获取它们并将它们推送到您可能想要的某些 div 中。

# java - 打印动作中定义的变量

> ID：12459008
> 
> 赞同：0
> 
> 时间：2012-09-17T12:18:17.430
> 
> 标签：java, jsp, struts

我可以以某种方式打印作为参数传递给jsp的字符串吗？假设我有行动：package com.test;

```
 public class TestAction extends Action {

     String foo="bar";
   @Override
   public ActionForward execute(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
     //request.setParameter("foo", doo); // this does not work, I would like to achieve it. 
     return mapping.findForward("sql");
   }

 } 
```

和jsp文件：

```
 <!DOCTYPE html>
 <%@page contentType="text/html"%>
 <%@page pageEncoding="UTF-8" %>
 <%@page import="com.test.TestAction" %>
 <%= request.getParameter("foo") %> 
```

我在 struts-config.xml 中定义了：

```
 <action     
      name="loginForm"
      path="/login"
      scope="request"
      type="com.test.com.test.TestAction"
      validate="false">
          <forward name="sql" path="/index.jsp" />
 </action> 
```

我可以做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:43:26.957

你需要改变两件事：

```
 request.setParameter("foo", doo); 
```

应该

```
 request.setAttribute("foo", doo); 
```

和

```
<%= request.getParameter("foo") %> 
```

应该

```
<c:out value="${request.foo}"/> 
```

部分是为了可维护性，部分是为了防止注入攻击......除非您实际上希望`doo`包含有效（和安全）的 HTML 标签。（使用`<c:out>`假设你有

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core" %> 
```

在您的 JSP 的开头）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:32:03.797

您是否尝试过使用`set/getAttribute`而不是`set/getParameter`？

# c++builder - 使用 JclWin32.hpp 时 JEDI JCL 运行时编译器错误 E2040

> ID：12459009
> 
> 赞同：2
> 
> 时间：2012-09-17T12:18:18.137
> 
> 标签：c++builder, jedi

我已经在 Windows 7 x32 上的 C++ Builder XE3 中安装了当前稳定的 JEDI 代码库。它工作正常，但只要我不包含 JclFileUtils.hpp 等包含**JclWin32.hpp**的文件。然后我总是得到**编译器错误 E2040：“声明错误地终止”**（在文件 JclWin32.hpp 中，第 682 行，以下代码片段的第二行）：

```
#define NetApi32 L"netapi32.dll"
static const System::Int8 CSIDL_PROGRAM_FILESX86 = System::Int8(0x2a);
#define RT_MANIFEST (System::WideChar *)(0x18) 
```

我不知道这个错误是从哪里来的，我也找不到任何提示。可能是什么原因？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:14:34.483

我得到了帮助和解决这个问题的方法。只需替换静态 const 声明：

```
static const System::Int8 CSIDL_PROGRAM_FILESX86 = System::Int8(0x2a); 
```

使用此宏定义：

```
#define CSIDL_PROGRAM_FILESX86 0x2a 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T17:32:33.780

这是`JclWin32.pas`.

在 C/C++ 中，Win32 API使用预处理器语句`CSIDL`在 Microsoft 的标头中声明值，例如：`shlobj.h``#define`

```
#define CSIDL_PROGRAM_FILESX86 0x002a 
```

在预处理器运行并执行`#define`符号替换后，编译器最终会在 中看到以下*无效*声明`JclWin32.hpp`：

```
static const System::Int8 0x002a = System::Int8(0x2a); 
```

JCL 根本不应该重新声明`CSIDL_PROGRAM_FILESX86`（或任何其他`CSIDL`值）。它应该是：

1.  使用 Delphi 自己的`Winapi.ShlObj`单元，该单元已经声明了`CSIDL`值。

2.  如果不使用该`Winapi.ShlObj`单元，那么它至少应该声明其手动`CSIDL`值，`{$EXTERNALSYM}`以便它们不会出现在生成的`JclWin32.hpp`文件中。如果需要，JCL 可以包含一个`{$HPPEMIT '#include <shlobj.h>'}`语句来拉入现有的 Win32 API 声明以供 C/C++ 项目使用。

# timestamp - 默认情况下可以在 Google 地球中显示所有带有时间戳的地标吗？

> ID：12459014
> 
> 赞同：6
> 
> 时间：2012-09-17T12:18:37.220
> 
> 标签：timestamp, kml, google-earth

我正在考虑使用[Timestamp](https://developers.google.com/kml/documentation/kmlreference#timestamp)元素创建 KML 地标。这本身很容易做到，但我不喜欢 Google 地球在最初加载 KML 时只显示一小段时间的行为。我希望它默认显示整个时间跨度（以及所有地标）。

有没有办法做到这一点？我在 Google 地球中没有看到任何设置，也没有在 KML 文档中看到任何相关设置。

我正在考虑的另一种方法是基本上复制每个地标，并在单独的文件夹中设置 1 个带时间戳和 1 个不带时间戳。文件夹将使用单选按钮选择功能。如果可能的话，我想避免这种情况，因为 KML 可能有数千个地标，并且复制节点似乎是一种浪费。

如果您想查看我所说的行为，这里有一个来自此[来源的](http://earth.google.com/outreach/tutorial_time.html)[示例，其中包含带有地标的 KML。](http://services.google.com/earth/kmz/outreach/time_examples.kmz)

**更新：**我看到的时间滑块未默认为包含的 KML 地标的整个跨度的行为似乎是因为该文件是通过网络链接加载到本地文件的。在这种情况下，我不确定如何控制时间滑块的行为。我可以让链接执行“刷新时飞来查看”，它可以正确设置时间滑块，但我不想将相机移动到纬度/经度，因为我每 4 秒刷新一次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-25T14:03:30.477

默认情况下，Google 地球会显示 KML 的完整时间。但是，一种常见的情况是当多个 KML 文件打开/可见时，Google 地球默认显示**所有**KML 功能中最早和最晚时间的完整时间范围。[此外，通过NetworkLinks](https://developers.google.com/kml/documentation/kmlreference#networklink)加载 KML不会像直接在 Google 地球中打开它那样显示完整的时间范围**。**

为了说明，首先取消选中您保存的位置以禁用其他 KML，然后加载此 KML 文件。您会注意到时间线显示 1787 到 1959 的全部范围。[https://developers.google.com/kml/documentation/us_states.kml](https://developers.google.com/kml/documentation/us_states.kml)

如果您想预先定义一个时间范围，您可以显式添加一个限制时间视图的[Camera](https://developers.google.com/kml/documentation/kmlreference#camera)或[LookAt 。](https://developers.google.com/kml/documentation/kmlreference#lookat)例如，要将视图限制在前 100 年，您可以将`<gx:TimeSpan>`具有年份范围的元素添加到 KML 中的根级元素。请记住包含 lat/lon/range 元素，否则视图将默认为 lat=0、lon=0、range=0。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
<Document>
    ....
    <LookAt>
            <gx:TimeSpan>
                    <begin>1787</begin>
                    <end>1887</end>
            </gx:TimeSpan>
            <longitude>-95.71</longitude>
            <latitude>37.09</latitude>
            <range>4119625</range>
            ...
    </LookAt>
    ...
</Document>
</kml> 
```

如果您在地标或文件夹上单击鼠标右键，然后在 Google 地球中选择“快照视图”，并且计时器滑块可见，则时间范围将在保存的视图中捕获。

因此，您可以做任何您想做的事，而无需随时间复制地标，而是创建一些仅使用受时间范围约束的视图定义的地标。单击这些特殊地标中的每一个都会将时间滑块更改为您要显示的任何时间范围。

[具有通过Networklinks](https://developers.google.com/kml/documentation/kmlreference#networklink)检索的时间的 KML 要素具有不同的行为，并且在时间滑块中仅预先选择了一部分时间范围。您必须将[*flyToView*](https://developers.google.com/kml/documentation/kmlreference#flytoview)添加到 NetworkLink 以使其行为与直接加载 KML 相同。

```
<NetworkLink>
  <flyToView>1</flyToView>
  <Link>
    <href>...</href>
  </Link>
</NetworkLink> 
```

如果您在父 KML 文件中包含多个具有基于时间的功能的 NetworkLink，则最佳做法是`<TimeSpan>`向 NetworkLink 添加一个元素，包括该功能集合的完整时间范围，否则 Google 地球将在启动时自动加载整个文件.

```
<NetworkLink>
  <TimeSpan>
    <begin>1787</begin>
    <end>1887</end>
  </TimeSpan>
  <flyToView>1</flyToView>
  <Link>
    <href>...</href>
  </Link>
</NetworkLink> 
```

参考：
[https ://developers.google.com/kml/documentation/kmlreference#timespan](https://developers.google.com/kml/documentation/kmlreference#timespan)
[https://developers.google.com/kml/documentation/kmlreference#gxtimespan](https://developers.google.com/kml/documentation/kmlreference#gxtimespan)

# javascript - 没有时区的 Javascript 日期格式

> ID：12459017
> 
> 赞同：0
> 
> 时间：2012-09-17T12:18:49.540
> 
> 标签：javascript, date

我有一个从输入值定义的 javascript 变量。

```
$d = $('#date').val();
$myDateParts = $d.split("-");
$dflip = new Date($myDateParts[2], ($myDateParts[1]-1), $myDateParts[0]);
console.log($dflip);

$dflip = Wed Sep 19 00:00:00 UTC+0100 2012 
```

我如何将输出格式化为：

```
Wed Sep 19 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:32:47.197

`substring`您可以使用或使用`toDateString`两者来做某事

例如：

```
var dateString = new Date(2012, 0, 31).toDateString();
var noYear = dateString.substring(0, dateString.length-5);
console.log(noYear); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T15:42:06.227

这可能不是完成您正在寻找的最干净、最有效或最好的方法，但我创建了一个函数来返回没有时区的日期。您可以调整“theDate”变量以仅返回您想要的日期部分。

```
 function properDate(){  

    var d = new Date();

    var DayOfMonth = d.getDate();
    var DayOfWeek = d.getDay();
    var Month = d.getMonth();
    var Year = d.getFullYear();
    var Hours = d.getHours();
    var Minutes = d.getMinutes();
    var Seconds = d.getSeconds();

    switch (DayOfWeek) {
    case 0:
        day = "Sun";
        break;
    case 1:
        day = "Mon";
        break;
    case 2:
        day = "Tue";
        break;
    case 3:
        day = "Wed";
        break;
    case 4:
        day = "Thu";
        break;
    case 5:
        day = "Fri";
        break;
    case 6:
        day = "Sat";
        break;
    }

    switch (Month) {
    case 0:
        month = "Jan";
        break;
    case 1:
        month = "Feb";
        break;
    case 2:
        month = "Mar";
        break;
    case 3:
        month = "Apr";
        break;
    case 4:
        month = "May";
        break;
    case 5:
        month = "Jun";
        break;
    case 6:
        month = "Jul";
        break;
    case 7:
        month = "Aug";
        break;
    case 8:
        month = "Sep";
        break;
    case 9:
        month = "Oct";
        break;
    case 10:
        month = "Nov";
        break;
    case 11:
        month = "Dec";
        break;
    }

    var theDate = day + " " + month + " " + DayOfMonth + "  " + Year + " " + Hours + ":" + Minutes + ":" + Seconds;

    return theDate; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:31:50.893

尝试使用以下代码。

```
<script src="../../ui/jquery.ui.datepicker.js"></script>

$( "#datepicker" ).datepicker( "D M yy", dflip.val()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:35:49.630

我的 DateExtentions 库会这样做——尽管如果你所做的只是一种简单的格式，它可能会有点过分。

[http://depressedpress.com/javascript-extensions/dp_dateextensions/](http://depressedpress.com/javascript-extensions/dp_dateextensions/)

我可以根据传递的掩码解析日期并根据需要格式化输出（它还会执行各种日期数学和实用程序，因此它可能比您需要的要重）。

# lucene - 如何使用 Lucene 查询包含日期的 ravendb 索引？

> ID：12459019
> 
> 赞同：5
> 
> 时间：2012-09-17T12:19:02.510
> 
> 标签：lucene, ravendb

我正在使用 http api 来查询 ravendb（所以 LINQ 查询不是我问题的解决方案）。我的产品文档如下所示：

```
{
  "editDate": "2012-08-29T15:00:00.846Z"
} 
```

我有索引：

```
from doc in docs.Product
select new { doc.editDate } 
```

我想查询某个日期和时间之前的所有文档。我可以使用以下语法查询 DATE：

```
editDate: [NULL TO 2012-09-17] 
```

但是我也不知道如何查询时间组件。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T11:04:46.020

您可以使用以下方法查询：

```
 editDate: [NULL TO 2012-09-17T15:00:00.846Z] 
```

如果您关心其中的一部分，请使用：

```
 editDate: [NULL TO 2012-09-17T15:00] 
```

请注意，您可能必须转义部分查询，如下所示：

```
 editDate: [NULL TO 2012\-09\-17T15\:00] 
```

为此，您还需要确保对该字段进行分析。在 Raven Studio - 添加字段 -> 编辑日期，并将索引设置为已分析。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-18T08:45:39.230

解决此问题的一种方法是将值存储为自 unix 纪元以来的秒数而不是日期。

这会产生一个您可以轻松比较的数字。

我正在使用 javascript 和 moment js 库：

```
{
  "editDate": "2012-08-29T15:00:00.846Z",
  "editDateUnix": moment("2012-08-29T15:00:00.846Z").unix()
} 
```

任何我的索引：

```
from doc in docs.Product
select new { doc.editDate, doc.editDateUnix } 
```

和我的 lucene 查询：

```
"editDate: [NULL TO "+moment("2012-09-17").unix()+"]" 
```

# c# - 如何在单击时获取图像控件上的坐标

> ID：12459022
> 
> 赞同：1
> 
> 时间：2012-09-17T12:19:14.740
> 
> 标签：c#, javascript, asp.net, imagemap

我有一个 ImageMap，一旦用户单击特定区域，我想在其上获取坐标。如何才能做到这一点。我想得到 x,y od 用户点击的每个位置。

后来我想用这个坐标画一个热点。谁能指导我如何做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:46:10.800

您可以使用[图像提交按钮](http://www.w3.org/TR/html-markup/input.image.html)轻松完成此操作。

# xna - 如何使用 Kinect 跟踪头部

> ID：12459025
> 
> 赞同：1
> 
> 时间：2012-09-17T12:19:25.787
> 
> 标签：xna, kinect

我想跟踪玩家的头部，以便在 XNA 中移动相机。当玩家向左或向右旋转时，XNA 内部的相机会响应这个动作，也会随之旋转。

我尝试使用来自 Skeleton Data 的头部关节并获取向量值 X,Y 但这不是一个准确的解决方案。我需要另一种可以在 XNA 内旋转相机的解决方案。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T01:55:35.920

您可以使用[Face Tracking API](http://msdn.microsoft.com/en-us/library/jj130970.aspx)并查看用户面部（如鼻子）上某个点的差异，以确定用户是否朝不同的方向看。用户脸上的点是这样组装的：

![东西](../Images/cfb55039b9327ae7fc9ffac6da654933.png)

然后您可以查看 X 是否更改以及查看旋转效果的量。（你可能想看看[Kinect 的面部识别](https://stackoverflow.com/questions/11263501/facial-recognition-with-kinect)）

# dart - Dart Isolates 是否可以有多个发送和接收端口？

> ID：12459032
> 
> 赞同：1
> 
> 时间：2012-09-17T12:19:52.083
> 
> 标签：dart, dart-isolates

是否可以在 Dart 中为同一个 Isolate 打开多个发送和接收端口？

例如，以下代码示例将创建两个隔离区，每个隔离区都有自己的发送端口。但是，我想知道是否有任何方法可以为同一个隔离创建多个发送/接收端口并选择接收端口来发送消息。

```
 #import('dart:isolate');

    echo() {

    }

    main() {
        var sendPort1 = spawnFunction(echo);
        var sendPort2 = spawnFunction(echo);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:35:53.047

您实际上可以创建任意数量的 ReceivePort，然后正如 Matt 所说，每个 ReceivePort 可以创建任意数量的 SendPort。

默认情况下，一个隔离，包括主隔离，有一个通过`port`getter 创建和可用的 ReceivePort。此 ReceivePort 连接到从`spawnFunction()`和返回的 SendPort `spawnUri()`。但是您可以使用 创建一个新的 ReceivePort `new ReceivePort()`，然后您可以通过创建任意数量的连接 SendPort `toSendPort()`。要使用它们，您可以将新的 SendPort 本身与您从`spawnFunction()`或通过的原始 SendPort 上的消息一起发送`ReceivePort.receive()`。

通过这样做，您可以在两个隔离之间设置多个“通道”。我还没有玩过它，看看它在实践中是如何工作的，我一直在通过一个 SendPort 上的结构化消息多路复用通道。

请注意，您可以在任何隔离中创建 ReceivePort：父隔离或子隔离。因此，如果您希望该部分有两个发送端口给孩子，那么您需要一个来自`spawnFunction()`另一个从孩子传回给父母的消息。

这是您的示例更改为使用多个发送端口。步骤：

1.  主要：产生一个隔离
2.  main：使用 SendPort 发送消息，以便隔离可以发回消息
3.  echo：在隔离中创建第二个 ReceivePort
4.  echo：在隔离区中接收一条带有replyTo SendPort的消息
5.  echo：从 ReceivePort 创建一个 SendPort 并将其发回
6.  main：从echo接收消息和SendPort

现在 main() 有两个独立的发送端口到隔离。

```
#import('dart:isolate');

echo() {
  var port2 = new ReceivePort(); // 3

  port2.receive((m, p) {
    print("two: $m");
  });

  port.receive((m, p) { // 4
    print("one: $m");
    p.send("ack", port2.toSendPort()); // 5
  });
}

main() {
  port.receive((m, sendPort2) { // 6
    sendPort2.send("hello 2");
  });
  var sendPort1 = spawnFunction(echo); // 1
  sendPort1.send("hello 1", port.toSendPort()); // 2
} 
```

这打印：

```
one: hello 1
two: hello 2 
```

哇！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T18:14:31.840

虽然我不确定多个接收端口。您可以为每个接收端口创建多个发送端口。此功能内置于 ReceivePort 类中：[ReceivePort.toSendPort](http://api.dartlang.org/docs/continuous/dart_isolate/ReceivePort.html#toSendPort)

如帮助底部所示：

> 从同一个 ReceivePort 创建多个 SendPort 是合法的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T13:20:29.593

贾斯汀的回答基本上是对的，但给我带来了一些麻烦，因为执行步骤 5 后隔离停止响应。所以这是一个在我的上下文中实际工作的更新版本：

```
import 'dart:isolate';

echo() {
  var port2 = new ReceivePort();

  port2.receive((m, p) {
    print("two: $m");
  });

  port.receive((m, p) {
    print("one: $m");
    p.send(port2.toSendPort());
  });
}

main() {
  var sendPort1 = spawnFunction(echo);
  sendPort1.call("hello 1").then((newPort)=>newPort.send("hello 2"));
} 
```

主要区别只是端口作为消息发送，而不是使用 replyTo 字段。这也允许更紧凑的代码，因为不需要其他接收端口。

# php - PHP 会话和 COOKIE

> ID：12459037
> 
> 赞同：0
> 
> 时间：2012-09-17T12:19:59.757
> 
> 标签：php, session, cookies

我有一个包含以下代码的登录表单

```
if ($does_user == 1)//Als het aantal rijen gelijk is aan 1, zorg wel met registreren dat er geen dubbele gebruikers in de database kunnen worden toegevoegd
        {
            //Extract de array naar strings
            extract($row);

            if ($acces_level == 1)
            {   
                if (isset($_POST["remember"]))
                {
                    //Cookie aanmaken met de id van de gene die inlogt
                    setcookie("user_id", $user_id, time()+60*60*24*100, "/");

                    //Naar de profiel pagina
                    header("location: profile.php?user_id=".$user_id."");
                }
                else
                {
                    //Session aanmaken met de id van de gene die inlogt
                    $_SESSION["user_id"] = $user_id;

                    //Naar de profiel pagina
                    header("location: profile.php?user_id=".$user_id."");
                }
            }
            elseif ($acces_level == 2)
            {
                if (isset($_POST["remember"]))
                {
                    //Cookie aanmaken met de id van de gene die inlogt
                    setcookie("user_id", $user_id, time()+60*60*24*100, "/");

                    //Naar de admin pagina
                    header("location: admin/index.php?user_id=".$user_id."");
                }
                else
                {
                    //Session aanmaken met de id van de gene die inlogt
                    $_SESSION["user_id"] = $user_id;

                    //Naar de admin pagina
                    header("location: admin/index.php?user_id=".$user_id."");
                }
            }
        } 
```

当它进入 profile.php 页面时，它会发送一个带有 url 的 id。因此，当用户在 url 中更改其 id 时，我构建了一个函数，你将前往 404.php 但是这个函数不能很好地工作，我不知道为什么。

```
function user_exists()
{
    if (isset($_SESSION["user_id"]) !== $_GET["user_id"])
    {
        header("location: 404.php");
        exit();
    }
    elseif (isset($_COOKIE["user_id"]) !== $_GET["user_id"])
    {
        header("location: 404.php");
        exit();
    }           
} 
```

$_GET["user_id"] 等于 SESSION 或 COOKIE 但无论如何它都指向 404.php，有人可以向我解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:27:02.030

这应该按预期工作：

```
function user_exists()
{
    if (isset($_SESSION["user_id"]) && ($_SESSION["user_id"] !== $_GET["user_id"])
    {
        header("location: 404.php");
        exit();
    }
    elseif (isset($_COOKIE["user_id"]) && ($_COOKIE["user_id"]) !== $_GET["user_id"])
    {
        header("location: 404.php");
        exit();
    }           
} 
```

首先检查存储的变量是否为空，并将其内容与 $_GET 变量进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:23:10.067

您正在使用*Equal to 和 of the Same Type*比较进行比较。

GET Data 总是作为字符串发布（这就是它的工作方式），因此您可能正在检查一个 int 与一个字符串。切换到`!=`over`!==`可能会为您解决问题，或者您可以在比较测试之前做一些花哨的类型杂耍，以将其隐藏在自己身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:26:35.567

检查是否设置，然后比较...

```
if (isset($_SESSION["user_id"]) && ($_SESSION["user_id"] !== $_GET["user_id"])){... 
```

# .htaccess - 在 Zend Framework 中运行 myBB 论坛

> ID：12459038
> 
> 赞同：1
> 
> 时间：2012-09-17T12:20:00.270
> 
> 标签：.htaccess, zend-framework, frameworks, forum, mybb

我正在开发一个简单的 Zend Framework 站点，另外还有一个用于同一站点的 myBB 论坛。

我放置了论坛（在 Zend 脚手架的公用文件夹中名为“论坛”的文件夹中，但在控制 URL 重写的 .htaccess 导致论坛出现问题时会产生问题。

然后我将论坛放在公用文件夹之外。这只有在我删除 .htaccess 时才能正常工作，但 Zend 显然不起作用。

我怎样才能让 .htaccess 重写工作，以便如果使用 url [http://www.mysite.com/forum](http://www.mysite.com/forum)它不会重写 Zend Framework 的 url，其他任何东西，它应该转发到公共文件夹。

我的 webroot .htaccess 代码是：

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

蒂亚约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:39:56.133

.htaccess 修改如下：

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]

RewriteRule ^(forum)($|/) - [L]

RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:36:31.433

尝试将 htaccess 文件放入您的论坛文件夹中：

```
RewriteEngine On 
```

没有任何规则。这将使父目录中的规则不会被应用。

# c - 检查2个文件c代码

> ID：12459040
> 
> 赞同：-3
> 
> 时间：2012-09-17T12:20:05.477
> 
> 标签：c, file

我在 c 工作。我有两个文件。如果第二个文件中存在，我想问一下在第一个文件的每一行中测试的最佳方法是什么。

我还需要一些示例代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:23:57.867

尝试使用 diffviewer 而不是自己编写代码？

[http://meldmerge.org/](http://meldmerge.org/)

否则，在C中，从头到尾比较字符，记住各个位置的差异并打印出来？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:35:13.760

由于问题有点模糊，“哈希”可能是一个也有点模糊的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:23:25.357

```
#include <stdio.h>
#include <stdbool.h>
#include <stdlib.h>
#include <string.h>
#include <errno.h>

int compareFiles(const char * filename_compared, const char *filename_checked, int *matched)
{
    int matches = 0;
    int lines = 0;
    char compare_line[10000];
    char check_line[10000];

    char *compare;
    char *check;
    FILE *f_compare;
    FILE *f_check;

    f_compare = fopen(filename_compared,"r");
    if ( f_compare == NULL ) 
    {  
        printf("ERROR %d opening %s\n",errno,filename_compared); 
        return EXIT_FAILURE; 
    } else { printf("opened %s\n",filename_compared); }

    f_check = fopen(filename_checked,"r");
    if ( f_check == NULL )  
    {  
        printf("ERROR %d opening %s\n",errno,filename_checked); 
        return EXIT_FAILURE; 
    } else { printf("opened %s\n",filename_checked); }
    compare = fgets(compare_line,sizeof(compare_line),f_compare);
    while (  ! feof(f_compare)  )
    {
       lines++;
       fseek(f_check,0,0);
       check = fgets(check_line,sizeof(check_line),f_check);
       while (  ! feof(f_check) )
       {
          if ( strcmp(compare_line,check_line) == 0 )
          {
             matches++;
             break;
          }
          check = fgets(check_line,sizeof(check_line),f_check);
       }
       compare = fgets(compare_line,sizeof(compare_line),f_compare);  
    } 
    *matched = matches;
    printf("%d lines read in first file and %d lines matched a line in the 2nd file\n",lines,matches);
    fclose(f_check);
    fclose(f_compare);
    return EXIT_SUCCESS;
}

int main(int argc, char *argv[])
{
    int matches;
    if ( argc < 3 )
    {
       printf("ERROR: You must enter the two input filenames\n");
       return EXIT_FAILURE;
    }
    int return_code = compareFiles(argv[1],argv[2],&matches);
    if ( return_code == EXIT_SUCCESS )
        printf("%d lines in %s matched a line in %s\n",matches, argv[1],argv[2]);
    else
       printf("there was an error in processing the files\n");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:36:19.083

只是安吉拉，只要研究一下你指出的做这个家庭作业的 C 书。它很可能有一整章只是关于文件处理的。

对于初学者，您需要熟悉 fopen（和 fclose）、fscanf、fseek 以及可能的 memcmp。

# java - 如何使用嵌套的 for 循环测试方法

> ID：12459041
> 
> 赞同：2
> 
> 时间：2012-09-17T12:20:14.250
> 
> 标签：java, unit-testing, junit, mocking, mockito

我是单元测试的初学者。我使用 JUnit 和 Mockito。这是我要测试的一种示例方法。

```
public List<Person> getPeopleList(List<Aggregate<Person>> aggregateList) {
    List<Person> resultList = new ArrayList<Person>();
    for (Aggregate<Person> aggregate : aggregateList) {
        resultList.add(aggregate);

        for (Person person : aggregate) {
            resultList.add(person);
        }
    }
    return resultList; // the result is person and aggregate list
} 
```

我尝试了很多方法，但我都做不好。例子：

```
@Test
public void getPeopleListTest(){
    ClassUnderTest testedClass = new ClassUnderTest();

    Aggregate aggregate = mock(Aggregate.class);
    Iterator<Aggregate<Person>> aggregateIterator = mock(Iterator.class);
    when(aggregateIterator.hasNext()).thenReturn(true, false);
    when(aggregateIterator.next()).thenReturn(aggregate);

    List<Aggregate<Person>> aggregateList = mock(List.class);

    aggregateList.add(aggregate);

    List<Person> list = testedClass.getPeopleList(aggregateList);

    assertEquals(1, list.size());
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:25:21.113

我不会嘲笑所有可能的事情。我只会模拟您要测试的类并假设 List 行为正确。

```
public class Main {
    interface Person {
    }

    interface Aggregate<T> extends Person, Iterable<T> {
    }

    public static List<Person> getPeopleList(List<Aggregate<Person>> aggregateList) {
        List<Person> resultList = new ArrayList<Person>();
        for (Aggregate<Person> aggregate : aggregateList) {
            resultList.add(aggregate);

            for (Person person : aggregate) {
                resultList.add(person);
            }
        }
        return resultList; // the result is person and aggregate list
    }

    public static void main(String... args) {
        Aggregate<Person> aggregate = mock(Aggregate.class);
        Aggregate<Person> aggregate2 = mock(Aggregate.class);
        Person person = mock(Person.class);
        Person person2 = mock(Person.class);
        when(aggregate.iterator()).thenReturn(Arrays.asList(person).iterator());
        when(aggregate2.iterator()).thenReturn(Arrays.asList(person2).iterator());

        List<Person> list = getPeopleList(
                Arrays.asList(aggregate, aggregate2));
        System.out.println(list);
        System.out.println("size: " + list.size());
    }
} 
```

印刷

```
[Mock for Aggregate, hashCode: 2037567902, Mock for Person, hashCode: 1629493852, Mock for Aggregate, hashCode: 44220373, Mock for Person, hashCode: 182467149]
size: 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:25:30.233

您需要问自己，您要测试的是什么？在示例函数中，您要检查当函数给出聚合列表时，它返回聚合和人员的混合扁平列表。

所以，我不会模拟列表，而是检查结果列表是否包含所有预期的项目：

```
Aggregate aggregate = new Aggregate(...);
//add persons to aggregate.

List<Aggregate<Person>> aggregateList = new ArrayList();
aggregateList.add(aggregate);

List<Person> list = testedClass.getPeopleList(aggregateList);
assertEquals(Collections.singletonList(aggregate), result); 
```

否则，如果您更改迭代参数 List 中所有项目的方式，则需要更新测试。

您可以测试的另一件事：

1.  作为参数给出的列表不会被修改。
2.  函数检查`null`参数。

    ```
    Preconditions.checkNotNull(aggregateList, "AggregateList cannot be null"); 
    ```

3.  空参数导致空结果。

# jsp - 在struts2中连接URL

> ID：12459042
> 
> 赞同：0
> 
> 时间：2012-09-17T12:20:16.517
> 
> 标签：jsp, struts2

我需要连接“/images/”，`s:url value=${Friend.PhotoAdd}`所以它应该是 Friend.PhotoAdd 的 /images/value

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:30:16.770

怎么样`<s:url value="image${Friend.PhotoAdd}"/>`？

# postgresql - PostgreSQL - 获取具有空值的记录

> ID：12459044
> 
> 赞同：1
> 
> 时间：2012-09-17T12:20:22.437
> 
> 标签：postgresql

我正在尝试获取一个查询，该查询将显示 90 天内没有销售任何东西的分销商，但我遇到的问题是 NULL 值。似乎 PostgreSQL 忽略了 null 值，即使我查询显示它（或者我可能以错误的方式这样做）。

假设有 1000 个分销商，但是通过这个查询我只得到 1 个分销商，但应该有更多没有销售任何东西的分销商，因为如果我编写 SQL 查询来显示过去 90 天内销售的任何数量的分销商，它显示大约 500。所以我想知道其他 499 在哪里？如果我理解正确，其他 499 没有任何销售，所以所有记录都是空的，并且不会在查询中显示。

有谁知道如何让它显示一个表的空值，而其他表不为空？（像合作伙伴表（res_partner）不为空，但sales_order表（销售）或对象为空？（我也尝试像so.id IS NULL一样过滤，但这样我得到空查询）

我的查询代码：

```
(
SELECT
    min(f1.id) as id,
    f1.partner as partner,
    f1.sum1
       FROM
    (
       SELECT
          min(f2.id) as id,
          f2.partner as partner,
          sum(f2.null_sum) as sum1
       FROM
    (
    SELECT
          min(rp.id) as id,
          rp.search_name as partner,
     CASE
       WHEN
             sol.price_subtotal IS NULL
       THEN
             0
       ELSE
             sol.price_subtotal
     END as null_sum
    FROM
          sale_order as so,
          sale_order_line as sol,
          res_partner as rp
    WHERE
    sol.order_id=so.id and
    so.partner_id=rp.id
    and
    rp.distributor=TRUE
    and
    so.date_order <= now()::timestamp::date
    and
    so.date_order >= date_trunc('day', now() - '90 day'::interval)::timestamp::date
    and 
    rp.contract_date <= date_trunc('day', now() - '90 day'::interval)::timestamp::date
    GROUP BY
    partner,
    null_sum
   )as f2
   GROUP BY
   partner
  ) as f1
WHERE
sum1=0
GROUP BY
partner,
sum1
)as fld 
```

编辑：2012-09-18 上午 11 点。

我想我明白为什么 Postgresql 会这样。这是因为时间间隔。它检查该 inverval 中是否有任何非空值。所以它只找到了一条记录，因为该记录的销售订单为零（它没有从 null 转换为零），而检查 null 值的部分只是被跳过了。如果我删除时间间隔，那么我会看到所有根本不卖任何东西的分销商。但是由于某种原因，随着时间间隔，它会停止检查空值并查看是否只有空值。

那么有谁知道如何让它在给定的时间间隔内也检查空值？..（准确地说是过去 90 天）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:52:16.327

聚合喜欢`sum()`并且`min()`确实忽略`NULL`值。这是 SQL 标准所要求的，我所知道的每个 DBMS 的行为都是如此。

如果您想将`NULL`值视为零，请使用以下内容：

```
sum(coalesce(f2.null_sum, 0)) as sum1 
```

但据我了解，您的问题和无效查询实际上需要 res_partner 和 sales 表之间的外部连接。

像这样的东西：

```
SELECT min(rp.id) as id,
       rp.search_name as partner,
       sum(coalesce(sol.price_subtotal,0)) as price_subtotal
FROM res_partner as rp 
  LEFT JOIN sale_order as so ON so.partner_id=rp.id and rp.distributor=TRUE
  LEFT JOIN sale_order_line as sol ON sol.order_id=so.id 
WHERE so.date_order <= CURRENT_DATE
  and so.date_order >= date_trunc('day', now() - '90 day'::interval)::timestamp::date
  and rp.contract_date <= date_trunc('day', now() - '90 day'::interval)::timestamp::date
GROUP BY rp.search_name 
```

我不是 100% 确定我正确理解了您的问题，但它可能会给您一个先机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:41:44.233

尝试命名子查询，并使用 col.q1、col.q2 等检索它们的列，以确保您正在处理哪个查询/子查询中的哪一列。也许它有点简单，例如它将一些仅包含 NULL 的行合并为一行？此外，至少出于调试目的，在每个查询/子查询的末尾添加 count(*) 以获取结果返回的隐式行数是明智的。很难猜测到底发生了什么。

# jakarta-ee - Tomcat 多实例

> ID：12459045
> 
> 赞同：0
> 
> 时间：2012-09-17T12:20:24.203
> 
> 标签：jakarta-ee, tomcat

我已经配置了 tomcat 多实例并且它工作正常。在运行时，我想上传一个属性文件，该属性应该由其他用户访问。当我上传时，文件只有一个 tomcat。如何将此文件上传到两个tomcat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:18:09.810

我不知道有任何自动方法可以用 Tomcat 做到这一点。您可以在实例之间实现某种文件复制机制，或者将数据存储在两个实例都可以访问的公共数据库或存储库中。如何做到这一点在很大程度上取决于您的环境和您使用的工具。您必须提供更多详细信息才能获得更具体的帮助。

# android - 如何从 Android 的启动中删除蓝牙应用程序？

> ID：12459046
> 
> 赞同：0
> 
> 时间：2012-09-17T12:20:29.793
> 
> 标签：android, bluetooth, android-service

我正在 Android 上调试蓝牙芯片，默认`Bluetooth`应用程序会干扰用 C 编写的本机测试工具`e.g scotest,hstest`。

所以我想要的是`Android Java Bluetooth`完全禁用该服务，但不禁用本机 blueZ 服务`i.e not being able to interact with Bluetooth from GUI but only from adb`，并确保除了我启动的本机工具之外根本没有运行蓝牙活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:33:08.053

从以下文件中的 product_packages 列表中删除条目：

```
 android_source/build/target/product/generic.mk. 
```

然后编译源代码，并将图像刷到您的设备上。

# javascript - JSON 数据到 JavaScript 数组

> ID：12459048
> 
> 赞同：2
> 
> 时间：2012-09-17T12:20:33.850
> 
> 标签：javascript, jquery, json, api

我在将 JSON 数据作为 JavaScript 中的数组处理时遇到问题。我的 JSON 数组如下所示：

```
 MyArray([['one','two','three'],['four','five','six']]); 
```

在 JS 中，我尝试使用这种方法接收它：

```
 $.getJSON('http://test.com/array.json', function(data) {
        alert(data);
   } 
```

但我没有得到任何数据。如果我正在使用

```
$get('http://test.com/array.json', function(data) 
```

而不是 $getJSON 然后我将我的数据作为字符串接收。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:25:29.767

您的数据不是 JSON，而是[**JSONP**](http://en.wikipedia.org/wiki/JSONP)，`MyArray`JSONP 回调函数在哪里。

从理论上讲，您正在与之交谈的 Web 服务应该支持一个`callback=`参数，该参数将设置`MyArray`名称。

如果你只是添加`&callback=?`，那么 jQuery 应该会自动生成一个随机命名的回调函数，然后它将`success`使用所需的数据调用你的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:21:49.850

这不是 JSON ：

```
 MyArray([['one','two','three'],['four','five','six']]); 
```

JSON 字符串不仅仅是您要评估的一些 javascript，而且必须以`[`or开头`{`。

看看规范： http: [//www.json.org/](http://www.json.org/)

一开始您似乎有一个构造函数，这甚至可能不是 JSONP。

我建议你制作一个标准的 JSON 数组：

```
"[['one','two','three'],['four','five','six']]" 
```

如果需要`MyArray`实例，然后使用构造函数客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:27:06.807

您的 JSON 无效。它的格式仍然可以使用。使用该`get`方法，然后尝试以下操作：

```
$.get('http://test.com/array.json', function(data) {
  data = data.replace("MyArray(", '"');
  data = data.replace(");", '"');
  var myData = JSON.parse(data); // Converted JSON to object.
} 
```

# uiscrollview - 一旦在 Storyboard 中添加了 UILabel / 其他子视图，就无法在 UIScrollView 中滚动

> ID：12459049
> 
> 赞同：6
> 
> 时间：2012-09-17T12:20:34.567
> 
> 标签：uiscrollview, scroll, storyboard, uilabel, scrollview

我遇到了以下问题：一旦我向我的 UIScrollView 添加了一个 UILabel - 使用情节提要 - 滚动视图停止“工作”（我的意思是你根本无法滚动）。然而，以编程方式添加子视图滚动视图工作正常，但由于我更喜欢​​使用情节提要直观地设计我的应用程序，我想解决这个神秘的错误。

有谁知道为什么会发生这个错误？提前致谢 ：）

PS：我确实设置了我的scrollView的contentSize，所以这不是问题！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T21:51:11.407

像这样移动 viewDidAppear 函数中的代码

> -(void)viewDidAppear:(BOOL)动画{
> 
> ```
> [super viewDidAppear:animated];
> self.scrollView.contentSize = CGSizeMake(500.f, 500.f); 
> ```
> 
> }

# c# - 将 Style 属性添加到 UserControl

> ID：12459050
> 
> 赞同：1
> 
> 时间：2012-09-17T12:20:35.350
> 
> 标签：c#, asp.net, asp.net-3.5

我在将 Style 属性添加到 UserControl 时遇到了困难。当我尝试查看消费者页面时出现解析器异常。

```
private Style _headerStyle = new Style();
public Style HeaderStyle
{
    get { return _headerStyle ; }
    set
    {
        _headerStyle .CopyFrom(value);
    }
} 
```

用法：

```
Style="border: 1px solid blue;" 
```

错误：

```
Cannot create an object of type 'System.Web.UI.WebControls.Style' from its string representation ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:35:01.797

实例不是字符串`Style`，反之亦然。[`Style.CopyFrom`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.style.copyfrom%28v=vs.80%29.aspx)期望 a`Style`作为参数，并且您正在传递 a `String`。这就是它无法复制到新样式对象的原因。

如果您想以编程方式为您的 UserControl 提供边框：

```
myControl.HeaderStyle.BorderStyle = BorderStyle.Solid;
myControl.HeaderStyle.BorderWidth = new Unit(1);
myControl.HeaderStyle.BorderColor = System.Drawing.Color.Blue; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:24:23.643

您正在尝试创建一个 ASP.NET[样式](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.style.aspx)但声明一个 CSS 样式，这就是问题所在。如果要应用 ASP.NET 样式，则需要调用 ApplyStyle 方法：

```
control.ApplyStyle(styleName); 
```

# c++ - 在 Visual Studio 中使用 Libcurl 发出 HTTPS 请求时遇到问题

> ID：12459051
> 
> 赞同：0
> 
> 时间：2012-09-17T12:20:36.377
> 
> 标签：c++, ssl, curl, openssl, libcurl

我有一个托管在 Azure 上的 Web 服务，它通过自签名证书在 SSL 下得到保护。

我正在尝试使用以下代码连接到它

```
CURL *curl;
CURLcode res;

curl = curl_easy_init();

curl_easy_setopt(curl, CURLOPT_URL, "https://XXXXXXXX.cloudapp.net/XXXXXX.svc/getFilms");
curl_easy_setopt(curl, CURLOPT_CAPATH, "C:\\Users\\Jordan\\Desktop\\Jordan-8.pem");
curl_easy_setopt(curl, CURLOPT_CAINFO, "C:\\Users\\Jordan\\Desktop\\Jordan-8.pem");
curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

curl_easy_perform(curl); 
```

然后我收到以下错误

```
* Connected to XXXXXXXXX.cloudapp.net
* successfully set certificate verify locations:
* CAfile: C:\Users\Jordan\Desktop\Jordan-8.pem
CApath: C:\Users\Jordan\Desktop\Jordan-8.pem
* SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
* Closing connection #0
* Peer certificate cannot be authenticated with known CA certificates 
```

有什么我做错了吗？我已经在网上研究了很长一段时间，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:24:14.377

通常发生这种情况是因为 libcurl 使用的 SSL 证书已过时。我建议在这里切换到[证书包](http://curl.haxx.se/docs/caextract.html)，看看你是否有更好的运气。

# c++ - QString::number() 'f' 格式没有尾随零

> ID：12459059
> 
> 赞同：15
> 
> 时间：2012-09-17T12:20:56.643
> 
> 标签：c++, qt, qstring

我想将数字转换为`QString`3 位有效数字。

```
QString::number(myNumber,'f',3); 
```

完成这项工作，但仍然尾随零。如何在没有它们的情况下使用它。

我也试过`'g'`了，不应该保持那些零：

```
QString::number(myNumber,'g',3); 
```

但例如 472.76 转换为 473。这让我感到惊讶。为什么`'g'`选项会这样？

**但是我对`'f'`格式感兴趣。所以主要问题是如何在`'f'`没有尾随零的情况下做到这一点？**

输入 -> 所需输出

472.76 -> 472.76

0.0766861 -> 0.077

180.00001 -> 180

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T20:44:15.020

我几乎不好意思发布这个，但它有效：

```
QString toString( qreal num )
{
    QString str = QString::number( num, 'f', 3 );

    str.remove( QRegExp("0+$") ); // Remove any number of trailing 0's
    str.remove( QRegExp("\\.$") ); // If the last character is just a '.' then remove it

    return str;
} 
```

如果您真的担心使用此方法的性能，您可能想要提出不同的解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T13:17:05.613

```
QString::number(myNumber,'g',3); 
```

将转换限制为有效数字。你总是有 3 个数字。

```
472.76 => 472
4.7276 => 4.72 
```

尝试使用格式化打印功能，如`QString::sprintf`. 这应该给你更多的控制权。

```
QString numStr;
numStr.sprintf("f.3f", myNumber); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:22:36.577

```
QString str;
str.setNum(myNumber, 'f', 3); 
```

这将满足您的需求，我对其进行了测试。奇怪的是，“number”的行为与“setNum”不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-23T11:27:34.453

这个怎么样。它可能比带有正则表达式的变体更高效。mynumber() 函数采用一种新格式 char 'h'，它可以完成这项工作。

```
QString mynumber(qreal p_number, char p_format, int p_precision)
{
    if(p_format=='h')
    {
        //like 'f' but removes trailing zeros and the '.' evtl
        QString res=QString::number(p_number,'f',p_precision);
        int countTrailingToRemove=0;
        for(QString::const_reverse_iterator it=res.crbegin();it!=res.crend();it++)
        {
            if(*it=='0') countTrailingToRemove++;
            else
            {
                if(*it=='.') countTrailingToRemove++;
                break;
            }
        }

        return res.mid(0,res.length()-countTrailingToRemove);
    }
    return QString::number(p_number,p_format,p_precision);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-19T10:00:38.803

如果您坚持要小数点后的精度，则必须使用`'f'`. 这是一个删除尾随 zeor 的选项，其性能比仅使用 QString 内置的正则表达式更好：

```
QString str = QString::number(myNumber,'f',3);
while(str.back() =='0')
{
    str.chop(1);
}
if(str.back() =='.')
{
    str.chop(1);
} 
```

这是有效的，因为 f 选项保证输出定义的数字。从另一个答案来看，它比 C sprintf 快 50%，比 QString::sprintf 快 40%。

# android - 禁用edittext并水平滚动

> ID：12459060
> 
> 赞同：3
> 
> 时间：2012-09-17T12:21:11.470
> 
> 标签：android, android-edittext

我想在 EditText 被禁用并且在 1 行中包含大文本时进行滚动。

我试试`edittext.setInputType(InputType.TYPE_NULL)`

**但是背景不会改变**，用户无法区分何时可以编辑。

编辑：我的 xml：

```
<EditText
                android:id="@+id/et_address"
                android:layout_width="0dip"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:inputType="text"
                android:maxLength="120"
                android:maxLines="1"
                android:singleLine="true"
                android:nextFocusDown="@+id/et_name" /> 
```

启用edittext时水平滚动效果很好，我希望禁用edittext时也一样

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T10:49:34.847

更好地使用 textview 并使用 XML 样式设置像 edittext 这样的背景

```
 <TextView
                android:id="@+id/output"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="2dp"
                android:layout_weight="1"
                android:background="@drawable/btnstyle"
                android:hint="@string/convert"
                android:inputType="number"
                android:textColor="#000000"
                android:scrollbars="horizontal"
                android:scrollHorizontally="true"
                android:gravity="left|center"
                android:textSize="18sp"

               /> 
```

并设置

```
 Output = (TextView) findViewById(R.id.output);
        Output.setMovementMethod(new ScrollingMovementMethod()); 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-21T06:55:24.613

您可以在编辑文本中使用以下参数。

```
et.setBackgroundDrawable(new ColorDrawable(Color.WHITE));
et.setHintTextColor(Color.TRANSPARENT);
et.setFocusable(false);
et.setClickable(false);
et.setFocusableInTouchMode(false);
et.setEnabled(true);
et.setKeyListener(null);
et.setHorizontallyScrolling(true); 
```

因此，当按下编辑时，它将作为所需的行为工作，否则将表现为文本视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:29:21.423

在您的 xml 中尝试`android:singleLine="true"` 单行并增加大文本的字体大小。对于滚动，您能准确描述您想要的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T09:04:15.463

简短的回答：

```
 <EditText
            android:id="@+id/et_1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:focusableInTouchMode="false"
            android:scrollHorizontally="true" /> 
```

例如，如何使用 PopUpWindow 代替默认键盘：

```
 //Your Main Layout        
        RelativeLayout mainLayout = (RelativeLayout)findViewById(R.id.activity_rl);

        LayoutInflater layoutInflater = (LayoutInflater)getBaseContext()
                .getSystemService(LAYOUT_INFLATER_SERVICE);
        //Set layout instead keyboard (Linear layout with buttons)  
        View popupView = layoutInflater.inflate(R.layout.keyboard, null);  
        PopupWindow ppwin = new PopupWindow(popupView, LayoutParams.FILL_PARENT,  
        LayoutParams.WRAP_CONTENT);
        //Some Button on that Linear layout
        Button bt = (Button)popupView.findViewById(R.id.button1);
        bt.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    edit_text.setText(edit_text.getText().toString()+"Your text");
                }
        });
       //Your EditText in Main layout 
        EditText edit_text = (EditText)findViewById(R.id.et_1);
        edit_text .setOnTouchListener(new OnTouchListener() {
                @Override public boolean onTouch(View v, MotionEvent event) {
                    //show PopUpWindow with buttons instead default keyboard
                    //or your custom keyboard
                    ppwin.showAtLocation(mainLayout, Gravity.BOTTOM, 0, 0);
                    return false;
                }
       }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-08T11:21:09.390

XML

```
 android:singleLine="true"
 android:scrollHorizontally="true" 
```

代码

```
myEditText.setKeyListener(null); 
```

这样编辑文本没有启用并且滚动工作。您还可以将 editText 的文本颜色更改为`#d3d3d3`. 拥有相同的外观`setEnabled(false)`

为我工作，希望它可以帮助某人

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-14T06:53:17.227

```
EditText et= (EditText) findViewById(R.id.et_address);
et.setMovementMethod(new ScrollingMovementMethod()); 
```

# android - 通过在我的应用程序的任何屏幕中使用特定日期和时间来提醒用户

> ID：12459062
> 
> 赞同：-1
> 
> 时间：2012-09-17T12:21:39.293
> 
> 标签：android, alarmmanager, android-alarms, repeatingalarm

在 Android 4.0.x 中，我们可以使用`CalendarView`. 使用该功能，我需要开发一个提醒任务。

通过单击特定日期，我需要弹出`TimePicker`和选择特定时间后，需要将日期和时间存储在数据库中。

后台进程需要每分钟检查提醒时间与当前时间，如果与当前时间匹配，则需要在正面哪个屏幕上发出警报。

这意味着，如果我的项目包含多个任务并且每个任务都有单独的页面，我可以在设置提醒后在任何页面上工作。在任何情况下，我都需要在屏幕前面显示警报。

如果我的平板电脑处于睡眠或关闭模式，则在我打开平板电脑时必须显示闹钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:58:38.320

您可以将上下文和事件保存在单音中，然后您将可以从在任何给定点运行的活动访问当前上下文。

如果您需要在手机开机后启动您的应用程序，请看这里：[http ://www.androidcompetencycenter.com/2009/06/start-service-at-boot/](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)

如果您需要更具体的内容，请询问，

问候

# javascript - JavaScript 对象 - 调用方法时出错

> ID：12459064
> 
> 赞同：0
> 
> 时间：2012-09-17T12:21:42.757
> 
> 标签：javascript, javascript-objects

在我正在构建的 JavaScript 对象的方法之一 - *open()* - 中，调用了对同一对象先前定义的方法 - *close()*的调用。调用*open()*方法时，出现以下错误：

“ ***Uncaught TypeError: Object [object Object] has no method 'close'*** ”

贝娄是我的代码：

```
var lightbox = {};
lightbox.close = function(){
    // Some code here
};
lightbox.open = function(){
    $("#button").on("click", function(){
        lightbox.close();
    });
} 
```

我做错了什么？

# crystal-reports - C:\documents and settings\user\windows 在 XP 上。它在哪里？找不到

> ID：12459067
> 
> 赞同：-4
> 
> 时间：2012-09-17T12:21:54.323
> 
> 标签：crystal-reports, windows-xp

试图将一些文件复制到 C:\documents and settings\user\windows\crystal\ 但找不到这样的目录 C:\documents and settings\user\windows ???? 帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:28:30.337

尝试在控制面板中启用隐藏文件夹和文件的查看，如果文件夹仍然没有显示它根本不存在

# php - 完全从 wordpress 中注销评论

> ID：12459071
> 
> 赞同：0
> 
> 时间：2012-09-17T12:21:58.960
> 
> 标签：php, wordpress

我试图弄清楚是否有办法从我的主题中删除与 wordpress 管理员的评论有关的所有内容（我猜有一些方法可以通过 functions.php 做到这一点）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:56:14.863

你应该看看[禁用评论](http://wordpress.org/extend/plugins/disable-comments/)插件。

# django - django - 如何在选择字段中取回一个空的选择？

> ID：12459076
> 
> 赞同：1
> 
> 时间：2012-09-17T12:22:13.697
> 
> 标签：django, django-models, django-forms

我在 Django 中有一个如下所示的模型：

```
class Project(models.Model):
    name = models.CharField(max_length=140)
    parent = models.ForeignKey('self', blank=True, null=True) 
```

目标是为此模型制作一个表单，其中包含用于`parent`表示项目层次结构的字段的选择小部件。我尝试通过对查询集进行排序并在每个选项的标签前添加缩进来重新定义该字段的选项对。`(project.id, project.name)`但是当我为表格制作一个配对列表时

```
class ProjectForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(ProjectForm, self).__init__(*args, **kwargs)
        ordered = []
        // ... making ordered list ...
        self.fields['parent'].choices = ordered 
```

该字段的默认空选项会丢失。有谁知道如何找回它？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:03:51.780

在`__init__`中，添加：

```
self.fields['parent'].choices = ordered
self.fields['parent'].choices.append('', u'None) 
```

# windows-8 - Windows 8 中设置窗格的有效宽度

> ID：12459080
> 
> 赞同：0
> 
> 时间：2012-09-17T12:22:38.160
> 
> 标签：windows-8, appsettings

我有一个条件，其中弹出窗口中设置命令的标题文本较大，并且根据规范，完整文本的 346 像素宽度有点短，弹出窗口标题的 646 像素宽度似乎要大得多。我想知道如果我们为设置弹出窗口使用自定义宽度是否可以解决我的问题，如果这不是替代方法，如果建议替代解决方法我会很高兴。

感谢您的建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:33:57.713

你真的应该坚持推荐的 346px 或 646px 的宽度。如果您的标题不合适，为什么不更改字体大小或添加换行符？

# javafx-2 - 如何通过从 JavaFX 2 中的 ListView 中选择一个项目来执行操作

> ID：12459086
> 
> 赞同：15
> 
> 时间：2012-09-17T12:23:11.283
> 
> 标签：javafx-2, javafx

当我从`listview`javafx 2 中选择一个项目时，我想执行一个操作。我使用 Netbeans JavaFX fxml 应用程序和 SceneBuilder。SceneBuilder 中的`OnMouseClicked`方法不起作用。它给了我一个错误，它找不到我已经声明的方法。

有人能告诉我他们是如何设法让它工作的吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-17T12:40:59.690

您不能单独在 FXML 文件中执行此操作。在FXML文件的Controller类中
定义对应的listView（假设为FXML）：`fx:id="myListView"`

```
@FXML
private ListView<MyDataModel> myListView; 
```

在 init/start 方法中添加监听器，它将监听列表视图项目的变化：

```
myListView.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<MyDataModel>() {

    @Override
    public void changed(ObservableValue<? extends MyDataModel> observable, MyDataModel oldValue, MyDataModel newValue) {
        // Your action here
        System.out.println("Selected item: " + newValue);
    }
}); 
```

`MyDataModel`可以是您自己的数据结构模型类，也可以只是一个`String`.
以字符串为例，

```
@FXML
private ListView<String> myListView;

...
...

ObservableList<String> data = FXCollections.observableArrayList("chocolate", "blue");
myListView.setItems(data);

myListView.getSelectionModel().selectedItemProperty().addListener(new ChangeListener<String>() {
    @Override
    public void changed(ObservableValue<? extends String> observable, String oldValue, String newValue) {
        // Your action here
        System.out.println("Selected item: " + newValue);
    }
}); 
```

# java - 如何将 JFormattedTextField 保持在非覆盖模式？

> ID：12459088
> 
> 赞同：5
> 
> 时间：2012-09-17T12:23:17.473
> 
> 标签：java, swing, jformattedtextfield, overwrite

我对 JFormattedTextField 有疑问，即将它保持在非覆盖模式。我发现了如何将其设置为非覆盖，即使用 setOverwriteMode(false)。

然而，虽然这个功能可以让我在没有覆盖的情况下输入字段，但是当失去焦点并且我重新输入字段时，overWriteMode 又会打开！

有没有办法保持 overWriteMode 为假？我更喜欢每次我失去焦点时都不会将其设置为 false 的解决方案，但如果这是唯一可能的解决方案，那就这样吧。

这就是我现在得到的：

```
 DefaultFormatter format = new DefaultFormatter();
    format.setOverwriteMode(false);

    inputField = new JFormattedTextField();
    inputField.setValue("don't overwrite this!");
    inputField.setColumns(20);
    format.install(inputField);// This does the trick only the first time I enter the field! 
```

我希望有一个人可以帮助我！

**Robin 提出的解决方案：**

```
 DefaultFormatter format = new DefaultFormatter();
    format.setOverwriteMode(false);

    inputField = new JFormattedTextField(format); // put the formatter in the constructor
    inputField.setValue("don't overtype this!");
    inputField.setColumns(20); 
```

谢谢您的帮助！问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:52:15.270

拍摄到黑暗，有什么我错过了

```
import java.awt.GridLayout;
import java.math.RoundingMode;
import java.text.NumberFormat;
import javax.swing.JFormattedTextField;
import javax.swing.JFrame;
import javax.swing.text.NumberFormatter;

public class MaskFormatterTest {

    public static void main(String[] args) throws Exception {
        NumberFormat format = NumberFormat.getNumberInstance();
        format.setMaximumFractionDigits(2);
        format.setMinimumFractionDigits(2);
        format.setParseIntegerOnly(true);
        format.setRoundingMode(RoundingMode.HALF_UP);

        NumberFormatter formatter = new NumberFormatter(format);
        formatter.setMaximum(1000);
        formatter.setMinimum(0.0);
        formatter.setAllowsInvalid(false);
        //formatter.setOverwriteMode(false);

        JFormattedTextField tf = new JFormattedTextField(formatter);
        tf.setColumns(10);
        tf.setValue(123456789.99);
        JFormattedTextField tf1 = new JFormattedTextField(formatter);
        tf1.setValue(1234567890.99);
        JFormattedTextField tf2 = new JFormattedTextField(formatter);
        tf2.setValue(1111.1111);
        JFormattedTextField tf3 = new JFormattedTextField(formatter);
        tf3.setValue(-1111.1111);
        JFormattedTextField tf4 = new JFormattedTextField(formatter);
        tf4.setValue(-56);

        JFrame frame = new JFrame("Test");
        frame.setLayout(new GridLayout(5, 0));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(tf);
        frame.add(tf1);
        frame.add(tf2);
        frame.add(tf3);
        frame.add(tf4);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# asp.net - 重新绑定网格时网格显示更改

> ID：12459090
> 
> 赞同：2
> 
> 时间：2012-09-17T12:23:19.823
> 
> 标签：asp.net, .net, gridview

我的aspx页面上有一个网格。我已将其字体属性设置为小..在页面加载时一切正常..但是一旦我执行一些操作，例如网格本身中给出的删除活动..并且网格被绑定再次通过回忆绑定网格的方法..网格似乎更大字体。可能是什么问题？

```
 <asp:GridView ID="grdSMEList" runat="server" Width="100%" BorderWidth="1px" BorderStyle="Solid"
        Font-Size="Small" AutoGenerateColumns="False" BorderColor="#ffcc00" RowStyle-BorderColor="#ffcc00"
        AllowPaging="true" PageSize="10" OnPageIndexChanging="GrdDynamic_PageIndexChanging"
        DataKeyNames="Resource Personnel No" OnRowCommand="GrdDynamic_RowCommand" RowStyle-BorderStyle="Solid"
        RowStyle-BorderWidth="1px" GridLines="Both" Height="104px">
        <PagerSettings NextPageText="&amp;gt;&amp;gt" PageButtonCount="5" PreviousPageText="&amp;lt;&amp;lt"
            FirstPageText="" LastPageText="" Mode="Numeric" />
        <PagerStyle HorizontalAlign="Right" Font-Size="Medium" />
        <Columns>
            <asp:BoundField DataField="Resource Personnel No" HeaderText="Resource Personnel No" ItemStyle-Width="100px" />
            <asp:BoundField DataField="RES Name" HeaderText="ResourceName" ItemStyle-Width="100px" />

            <asp:TemplateField HeaderText="Deactivate" >
                <ItemTemplate>
                    <div style="text-align:center;">
                        <asp:LinkButton ID="linkDeactivate" CommandName="cmdDeactivate" OnRowCommand="GrdDynamic_RowCommand"
                            CommandArgument='<%# Eval("Resource Personnel No") %>' OnClientClick="return confirm('Are you sure you want to Deactivate?');"
                            runat="server">Deactivate</asp:LinkButton>
                    </div>
                </ItemTemplate>
                <ItemStyle HorizontalAlign="Center" Width="2%" />
            </asp:TemplateField>
        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T21:20:28.223

您是否尝试在 ItemTemplate 中指定字体颜色？值得一试。

# c# - UDP广播在Windows 8中的同一台机器上不起作用

> ID：12459091
> 
> 赞同：3
> 
> 时间：2012-09-17T12:23:22.753
> 
> 标签：c#, sockets, windows-8, windows-runtime

我正在开发一个广播是必不可少的应用程序。我创建了两个项目客户端和服务器。我能够发送广播消息，但我没有在服务器项目中接收。我的代码如下

服务器：

```
 private DatagramSocket _udpSocket = new DatagramSocket();
    private async void Button_Click_1(object sender, RoutedEventArgs e)
    {
        _udpSocket.MessageReceived += _udpSocket_MessageReceived;

        await _udpSocket.BindServiceNameAsync("4777");                       
    }

    void _udpSocket_MessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs args)
    {

    } 
```

客户

```
 HostName h = new HostName("255.255.255.255");
        IOutputStream outStream = await _socket.GetOutputStreamAsync(h, "4777");

        DataWriter de = new DataWriter(outStream);
        de.WriteByte(new byte());
        await de.StoreAsync();
        de.DetachBuffer(); 
```

但是如果在客户端我用本地 IPAddress 替换 255.255.255.255，我可以在服务器上接收到消息。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T04:36:42.960

如果我记得我的网络 101 类，当你进行广播时，数据包不会发回给你，只会发给网络上的所有其他计算机（我可能错了）。此外，就像 TimVK 在他的评论中所说，您应该尝试使用您的网络的广播地址而不是一般广播（对于网络`192.168.0.0/24`（掩码`255.255.255.0`），广播将是`192.168.0.255`

# reporting-services - SSRS 2008 - 来自多值参数的每个值的子报表

> ID：12459092
> 
> 赞同：1
> 
> 时间：2012-09-17T12:23:29.737
> 
> 标签：reporting-services, ssrs-2008, subreport

使用 SSRS 2008 R2 并想知道是否可以为多值参数中选择的每个值生成子报告？

假设您有一个多值参数“parameterA”，其中选择了四个值（Value1、Value2、Value3 和 Value4）。我想为这些值中的每一个生成子报告（将值作为单个参数传递）。当然，我可以更改处理多值参数的过程，但由于性能和缓存的原因，我真的不想这样做。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:12:23.440

为此，您必须将子报表放入列表或 tablix 中。据我所知，没有简单的方法让该列表或 tablix 迭代多值参数中的值。它只会接受一个数据集。

因此，我能想到的唯一解决方法是将参数拆分为数据集中的一组行，这对于 SQL 来说是可能的，但并非易事。但是，如果参数的可用值来自数据集，情况会有所改善：您只需将 tablix/list 连接到数据集并过滤参数中未选择的项目。

**编辑：**通过将数据集查询构建为表达式， 我找到了一个稍微笨拙的解决方案，**将多值参数扩展到数据集。**假设一个参数`@MultiParamX`，这个表达式将创建一个查询，在一个列中输出所有选定的值：

```
="SELECT '" 
&
 Join(Parameters!MultiParamX.Value, "' MyParam UNION ALL SELECT '")
&
"' MyParam" 
```

这可能会生成如下查询（重新格式化以提高可读性）：

```
SELECT 'A' MyParam
UNION ALL
SELECT 'B' MyParam
UNION ALL
SELECT 'C' MyParam
-- Etc. for all selected values 
```

这将生成一个结果集，例如：

```
┌─────────┐
│ MyParam │
├─────────┤
│ A       │
│ B       │
│ C       │
│ Etc.    │
└─────────┘ 
```

# r - 匹配和子集

> ID：12459095
> 
> 赞同：0
> 
> 时间：2012-09-17T12:23:37.513
> 
> 标签：r

我有这样的情况：data.frame1（240列和可变行数）：

> ```
>  COL1  COL2  COL3
>   a      e    h
>   b      f    i
>   c      g    l
>   d 
> ```

和data.frame2

> ```
>  Gene  VAL  
>   a    3   
>   b    7   
>   c    0.5   
>   d    3.7
>   e    9.08
>   f    1.3
>  ...   ... 
> ```

我想递归地将第一个 data.frame 的每个 COL 与 data.frame2 （因此与第二个 data.frame 的第一列）匹配和子集化，以便获得以下输出：

出：data.frame3

> ```
>  COL1   VAL      COL2   VAL
>      a     3        e    9.08
>      b     7        f    1.3
>     ...   ...      ....  .... 
> ```

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:47:03.933

这可以通过以下功能完成`lapply`：

```
data.frame1 <- data.frame(COL1 = letters[1:3], COL2 = c(NA, letters[5], NA))
data.frame2 <- data.frame(Gene = letters[1:6], VAL = rnorm(6))

do.call("cbind",
  lapply(data.frame1,
    function(x) { VAL <- rep(NA, ncol(data.frame1));
      VAL[!is.na(x)] <- data.frame2$VAL[data.frame2$Gene %in% na.omit(x)];
      return(data.frame(x, VAL)) }))

#  COL1.x   COL1.VAL COL2.x  COL2.VAL
#1      a  0.1601884   <NA>        NA
#2      b -0.2035409      e -1.535597
#3      c -0.6661004   <NA>        NA 
```

# php - 选择特定的列 Symfony 2 / Doctrine

> ID：12459097
> 
> 赞同：1
> 
> 时间：2012-09-17T12:23:42.030
> 
> 标签：php, sql, doctrine

我是一名 Ruby on Rails 程序员，但我决定开始学习 PHP 的 Symfony 框架。我对 Doctrine 有疑问：

有一个用户模型：

```
id | username | profession | password 
```

在数据库中。我想创建一个方法，它将：

```
SELECT DISTINCT profession FROM user; 
```

所以我写了这样的代码：

```
$connection = Doctrine_Manager::connection();
$query = 'SELECT DISTINCT profession FROM user';
$statement = $connection->execute($query);
$this->professions = $statement->fetch(PDO::FETCH_ASSOC); 
```

但它不能正常工作 - 它只检索第一个而不是所有职业（应该是 6 个）。

请问你能帮帮我吗？有没有更简单的方法可以从表中检索单个特定字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:59:57.903

Fetch 获取下一列，如果你想要一次全部使用 fetchAll。

```
$statement->fetchAll(PDO::FETCH_ASSOC); 
```

或者，如果您想逐个获取和处理（如果您不想将它们存储在数组中），

```
while ($row = $statement->fetch(PDO::FETCH_ASSOC)) {
    echo $row['profession'];
} 
```

# html - HTML td 背景图像不显示

> ID：12459098
> 
> 赞同：-1
> 
> 时间：2012-09-17T12:23:43.327
> 
> 标签：html, css

我的桌子上有`<td>`s。这`<td>`包含一个不显示的背景元素。

下面是我的 HTML 表格。

```
<div class="left">
    <table cellspacing="0" cellpadding="0" border="0">     
        <td class="displayroundtable"></td> <!-- for displaying background image -->
        <td><img src="<?php echo $this->static_address;?>images/MAX-RATING-100.jpg"></td>
    </table> 
```

在 CSS 中，

```
.displayroundtable{
    background-image:url('<?php echo $this->static_address;?>images/2321.png');
} 
```

我不知道为什么我的背景图片永远不会显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:36:34.397

确保在您的空单元格上设置了宽度，否则它将以 0px 结束，因此不会显示任何内容。还要确保浏览器使用`empty-cells:show`表格上的 CSS 规则呈现空单元格。

[http://www.w3schools.com/cssref/pr_tab_empty-cells.asp](http://www.w3schools.com/cssref/pr_tab_empty-cells.asp)

该表需要 TR 符合标准。我认为这不是您的背景未显示的原因，但请确保您在`<tr>`.

# c# - 从文件夹中检索图像文件并显示到图像控制中

> ID：12459101
> 
> 赞同：3
> 
> 时间：2012-09-17T12:24:03.083
> 
> 标签：c#, asp.net, file-upload

我已经使用下面的代码在我的源文件的文件夹中保存了我的图像。现在我必须在我的表单上检索相同的保存图像

```
string filename = Path.GetFileName(fileupload1.PostedFile.FileName);
    string strtemp = System.DateTime.Now.ToString("ddMMyyhhmmss_") + filename;
    fileupload1.SaveAs(Server.MapPath("Image/" + strtemp)); 
```

那么我应该如何为我的图像控件提供路径我已经尝试过这样的方法来获取文件和文件夹的路径，但我无法将图像从中获取到我的图像文件夹中

```
Image2.ImageUrl = (Server.MapPath("Image/" + strtemp)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:25:28.587

像这样使用它：

```
Image2.ImageUrl = "~/Image/" + strtemp; 
```

`Server.MapPath`用于获取服务器资源的物理路径。您需要它来进行保存文件等操作。但是，您的物理路径在网络上无效。您应该使用虚拟路径来指定 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:26:49.660

您可以像这样获取图像。：-

```
Image2.ImageURL = "~/Image/"+strtemp; 
```

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:34:56.963

`Image2.ImageUrl = "~\\Image\\" + strtemp;`

使用上面的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-14T09:42:00.803

```
if(!(DropDownList1.SelectedItem.Text==""))
{
    string a = DropDownList1.SelectedItem.Text;
    string [] q  = a.Split('/');

    string qq  =    q[1];
    Image1.Visible = true;
    Image1.ImageUrl = "~/Images1/" + qq;
} 
```

# excel - 如何保护 MS Excel 中的控件

> ID：12459102
> 
> 赞同：0
> 
> 时间：2012-09-17T12:24:05.310
> 
> 标签：excel, vba

使用 MS Excel 2003，我想保护我创建的一些控件（命令按钮、组合框、标签……）以避免用户修改它们。

我该怎么做？我只找到了保护细胞的方法，但没有找到控件。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:13:49.827

1.  右键单击控件，选择`Format Control`.
2.  在 中`Protection Tab`，确保您已`Locked`检查。
3.  保护工作表（审阅选项卡），确保不允许编辑对象。

# php - MVC 关系和 DRY

> ID：12459104
> 
> 赞同：0
> 
> 时间：2012-09-17T12:24:16.093
> 
> 标签：php, oop, model-view-controller

我正在尝试创建一个用户登录系统。

我有一个名为 AccessControl 的类/控制器，其中包括用于创建、删除和登录用户的所有功能。

我还有一个名为 Users 的模型，其中包含从 AccessControl 类调用的所有数据库函数。

我的访问控制类：

```
include_once('../models/User.php') ;

class AccessControl {
private $_systemKey ;

public function __construct()
{
    $this->_systemKey = 'QA>8fg)@z#t#:E60mj&MzHsm-lUj&b-}R%~<y$|nAuF)C3!r%+rT"Q<r$o?{_XR' ;
}

public function createUser($email, $password, $level)
{           
    $user_salt = $this->randomString() ;

    $password = $user_salt . $password ;
    $password = $this->hashData($password) ;

    if(!is_int($level))
    {
        return false ;
    }

    //Create verification code
    $code = $this->randomString() ;

    //SQL...
    $created = User->insertNewUser($email, $password, $level) ;

    if($created != false){
        return true; 
    }

    return false ;
}
} 
```

在我的模型中：

```
class User extends Core {

public function fetchSalt($username)
{
    $result = $this->db->prepare("SELECT saltword FROM users WHERE username = ?") ;
    $result->execute(array($username)) ;
    return $result->fetchColumn() ;
}

public function insertNewUser($email, $password, $level)
{
    //SQL Insert...
}

} 
```

我不确定我这样做是否正确，因为 createUser 和 insertNewUser 不一样吗？我怎样才能改变事情以使其干燥？

* * *

Core 只是我的 PDO 连接类，我所有的模型都将从它扩展。无论如何，这就是计划。

```
abstract class Core {
protected $db ;

function __construct()
{
    try{
        $this->db = new PDO("mysql:host=localhost;dbname=database", "user", "pass") ;
        $this->db->exec('set names utf8') ;
                    $this->db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
        $this->db->setAttribute(PDO::ATTR_PERSISTENT, TRUE) ;
    }
    catch(PDOEXCEPTION $e)
    {
        echo 'Database error: <i style="color:#993300;">'.$e.'</i>' ;
        die() ;
    }
}

function __destruct()
{
    $this->db = NULL ;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:05:48.193

通常，如果您想在这种情况下将代码重复降至最低，我建议您不要让每个模型都处理数据库工作。

相反，您可以为每个接受和返回模型的模型设置一个网关。通常对于简单的检索，插入、删除和更新查询不会有太大差异。所有通用代码都可以位于所有其他网关扩展的 AbstractGateway 中。然后，特定网关仅处理模型特定的事情，例如定义要使用的表或要返回的模型。

您还可以从中获得一些额外的好处。您可以轻松地将数据库网关换成另一个存储网关。这样，您甚至可以测试您的代码，而不必担心数据库连接。

至于创建和插入用户方法，我认为那里没有问题。从 MVC 的角度来看，createUser 方法是控制器的方法，并且对于您正在执行的操作，它调用模型的方法。

# c# - 访问活动装配资源

> ID：12459105
> 
> 赞同：1
> 
> 时间：2012-09-17T12:24:16.203
> 
> 标签：c#, resources, .net-assembly

我正在尝试从 Resources 文件夹中动态加载图像，但由于某种原因`GetManifestResourceStream`返回 null。这是我写的：

```
System.Reflection.Assembly asm;
asm = System.Reflection.Assembly.GetExecutingAssembly();
Bitmap bmp = new Bitmap(asm.GetManifestResourceStream("MyProject.Properties.Resources.Image.png")); 
```

我已经尝试了在这里找到的所有方法，但它不起作用。路径正确，文件在那里。我需要动态地执行此操作，因为根据用户权限，将加载不同的程序集。所以基本上我需要两件事：

1.  获取所有已加载程序集的列表
2.  将加载的程序集对应的图像加载到Bitmap中

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:27:34.653

这通常意味着资源名称不正确。在 ildasm 中加载程序集，查看“.mresources”部分的清单并找到您要加载的部分。

如果不是，则对[GetExecutingAssembly](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getexecutingassembly.aspx)的调用将返回包含当前正在执行的代码的程序集，该程序集可能与包含该资源的 DLL 不同。改为使用[GetCallingAssembly](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.getcallingassembly.aspx)从单独的 DLL 加载它。

要回答您的上述问题：

> 1.  获取所有已加载程序集的列表

使用[AppDomain.GetAssemblies](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)方法，例如：

```
Assembly[] assemblies = AppDomain.CurrentDomain.GetAssemblies(); 
```

> 1.  将加载的程序集对应的图像加载到Bitmap中

使用 GetManifestResourceStream 遍历程序集以查找资源。

# iphone - 带有分隔符 nsstring 的 iPhone 设备

> ID：12459110
> 
> 赞同：1
> 
> 时间：2012-09-17T12:24:27.893
> 
> 标签：iphone, objective-c, ios, ios-simulator

我正在使用类似 nsstring 的分隔符，但是当我通过带有模拟器的控制台显示时，我的表现很好，但是当我使用 iphone 4S 进行显示时，我会看到其他东西。我尝试解析为 utf8，ascii，但我无法解决它。有人可以告诉我为什么会这样吗？

```
#define SEPARATOR @"ääëëñS0ñççää" 
```

*   iphone模拟器：
    NSLog(@"%@",SEPARATOR); -->终端文本：ääëëñS0ñççää`

*   我的 iPhone 4S：

    NSLog(@"%@",SEPARATOR); -->终端文本：√§√§√´√´√±S0√±√ß√ß√§√§`

    ```
    const char *utf8String = [SEPARADOR UTF8String];

    NSString *stringFromUTFString = [[NSString alloc] initWithUTF8String:utf8String];

    NSLog(@"%@",stringFromUTFString); 
    ```

现在，我这样做了，当我使用模拟器时，我正确地显示了分隔符，但是当我使用我的设备时，他将文本传递给了 NSISOLatin1StringEncoding。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:55:19.950

Xcode 的模拟器使用系统字体（Mac 机器）来渲染文本，但 iPhone 只使用其中嵌入的字体，这意味着模拟器中可用的所有字体在 iPhone 上可能不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:55:54.343

试试这个

```
NSString *SEPARATOR = @"ääëëñS0ñççää";
NSLog(@"%s",[SEPARATOR UTF8String]); 
```

也就是说，您应该在运行模拟器的 Mac 和设备本身上都运行字体，因为您正在处理特定的语言 - Mac 和 iOS 设备都应该安装这种语言。

看来您应该在设备上进行设置并启用您正在处理的任何语言......

# c++ - C++ 多态加载/保存

> ID：12459112
> 
> 赞同：4
> 
> 时间：2012-09-17T12:24:32.640
> 
> 标签：c++, polymorphism

我正在保存并重新加载一堆不同的对象，这些对象都从一个公共基础派生到一个文件中，显然我需要存储类名（或类似的名称）以便在重新加载时创建正确的对象类型。

保存很容易：

```
class Base 
{
  virtual string className() const = 0;

  void saveToFile()
  {
    write(className());
    ... other writing stuff
  }
}

class Derived1: public Base 
{
  string className() const { return "Derived1"; };
  ...
}

class Derived2: public Base 
{
  string className() const { return "Derived2"; };
  ...
} 
```

而且，如果您不介意复制字符串，则加载很容易...

```
static Base * Base::factory(const String &cname)
{
  if (cname == "Derived1")
    return new Derived1; 
  else if (cname == "Derived2")
    return = new Derived2; 
  else ...
}

void load()
{
  String cname = readString();

  Base * obj(Base::factory(cname);

  obj->readIt();
} 
```

但是，重复的字符串冒犯了我对 DRY 的感觉：理想情况下，`className()`可能是这样`static virtual`，但这是不允许的。我有一种感觉，我错过了一个明显的“干净”的方式，但我还看不到它。有什么建议么？

注意：好的，使用工厂方法稍微调整了代码。请注意，这实际上并不能解决问题！

注意#2：上面的代码并没有试图成为最终工厂模式的完美表示。我不关心基类和派生类之间不需要的链接，或者扩展层次结构的潜在困难。我正在寻找可以简化代码而不是使其复杂化的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:27:45.163

这里有两件事。首先，为了避免两次写出名字，我过去使用过类似以下的内容：

```
class Derived : public Base
{
    //  ...
    static char const* className() { return "Derived"; }
    virtual char const* getClassName() const { return className(); }
                 //  overrides virtual function in the base class...
}; 
```

此外，如果您希望能够从外部源读取该类，您将需要某种静态工厂函数，该函数将自己注册到此类函数的映射中。我会继续这样做`Base`：

```
class Base
{
    // ...
protected:
    class Factory
    {
    protected:
        Factory( std::string const& type );
    public:
        virtual Base* constructFromFile( std::istream const& source ) const = 0;
    };
    typedef std::map <std::string, Factory const*> FactoryMap;
    static FactoryMap& factories();

    template <typename Derived>
    class ConcreteFactory : public Factory
    {
    public:
        ConcreteFactory() : Factory( Derived::className() ) {}
        virtual Base* constructFromFile( std::istream const& source ) const
        {
            return new Derived( source );
        }
    };

public:
    static Base* readFromFile( std::istream& source );
};

Base::FactoryMap&
Base::factories()
{
    static FactoryMap theOneAndOnly;
    return theOneAndOnly;
}

Base::Factory::Factory( std::string const& type )
{
    std::pair <FactoryMap::iterator, bool> results 
        = factories().insert( std::make_pair( type, this ) );
    assert (results.second);
}

Base* Base::readFromFile( std::istream& source )
{
    std::string type = readType( source );
    FactoryMap::const_iterator factory = factories().find( type );
    if ( factory == factories().end() ) {
        throw UnknownType(...);
    }
    return factory->second->constructFromFile( std::istream& source );
} 
```

最后，对于每个派生类，您必须定义一个构造函数，该构造函数采用`std::istream&`, 和 `Base::ConcreteFactory <Derived>`. （如上所述，这必须是静态成员。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:26:15.820

这是你能做的最好的事情，你可以通过将它包装`if`在一个工厂类中来清理它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T12:30:13.173

您可以使用工厂方法（AKA 虚拟构造函数） 这在设计模式一书和 Internet 上的许多地方都有说明——您可以在 Google 上搜索这些术语。StackOverflow 中可能已经对此进行了讨论。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T12:26:51.300

您显然需要*工厂*模式。在此处阅读更多信息 [http://www.codeproject.com/Articles/363338/Factory-Pattern-in-Cplusplus](http://www.codeproject.com/Articles/363338/Factory-Pattern-in-Cplusplus)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T13:13:38.877

Id' 将字符串映射到创建类的函数：

```
std::hash_map<std::string, std::function<Base*()> creators; 
```

然后，您可以创建函数来填充地图

```
template <typename T> void add()
{
    creators.insert(std::pair(T::class_name(), []()-> Base* { return new T(); }));
} 
```

用法很简单：

```
//factory constructor
add<Derived1>();
add<Derived2>();

//creation
Base* r = 0;
auto it = creators.find(string);
if (it != creators.end()) {
    r = (*it)();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-18T13:09:53.083

我遇到了同样的问题，并在这篇文章中找到了一个非常简洁的答案： [Industrial Strenght Pluggable Factories](http://adtmag.com/articles/2000/09/25/industrial-strength-pluggable-factories.aspx) Close enough to James Kanze's answer，但我建议你阅读这篇文章并自己尝试一下。

# javascript - 跨 Android 设备的页面缩放问题

> ID：12459118
> 
> 赞同：5
> 
> 时间：2012-09-17T12:24:56.880
> 
> 标签：javascript, android, html, css, viewport

我在具有相同屏幕分辨率的两个不同 Android 设备之间进行缩放时遇到问题。

我的第一台设备是“Nexus 7 Tablet”，第二台是“Samsung Galaxy Note”。两种设备的屏幕分辨率均为 1280x800，并且两种设备都强制网页显示为纵向模式（通过 Dolphin 浏览器）。海豚浏览器也使用“全屏”插件。

为了添加一些上下文来解释为什么我需要在页面加载时正确缩放屏幕尺寸，我正在尝试构建一个电视遥控器 Web 界面以与 Eventghost 一起使用。我一直在努力让“视口”元标记处理大小调整，但我似乎无法让它正常工作（尽管在 Android 方面有所有可用的文档）。

我发现一个页面建议我可以使用 Viewport Meta Tag 和一些 CSS 的组合来处理缩放，并且我只需要为每个设备大小添加一个条目（没问题，因为我的两个设备都有相同的屏幕解析度）。我发现该技术的页面如下：

[http://www.propublica.org/nerds/item/adaptive-design-fixed-widths-and-tablets](http://www.propublica.org/nerds/item/adaptive-design-fixed-widths-and-tablets)

所以在尝试了这个之后，我很高兴。缩放在我的 Nexus 7 上正常工作。但是，当我通过 Galaxy Note 加载同一页面时，缩放不起作用（缩小了一点，但大约一半的页面仍然被截断）。我加载了[www.portvie.ws](http://www.portvie.ws)（来自上面的页面）以查看每个设备显示的屏幕尺寸，两者都是 800x1280。

使用的 HTML 如下：

```
<html>
<head>

<meta name="viewport" content="width=device-width, user-scalable=0"/>
<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="stylesheet" type="text/css" href="style.css" />

<script src="script.js"></script>

</head>

<body onLoad="StartUp()" background="Background.png">
<center>

<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td Width="200" Height="200" Background="A_HOMEBUTTON.png"></td>
<td Width="700" Height="200" Background="A_HOMESCREEN.png"></td>
<td Width="700" Height="200" Background="A_BLANK.png"></td>
</tr>
</table>

<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td Width="1600" Height="50"></td>
</tr>
</table>

<table border="0" cellpadding="0" cellspacing="0">
<tr>
<td Width="1600" Height="2310" Background="B_HOMESCREEN.png"></td>
</tr>
</table>

</body>
</html> 
```

我用来处理缩放的 CSS 如下：

```
@media screen and (device-width: 800px) { html { zoom: 35%; } }
body
{
-webkit-user-select: none;
overflow: hidden;
} 
```

任何有助于理解这种行为的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T02:11:33.367

Well I'm facing the same problem. I guess the problem is with html handling tables. You can go around this if you want too by using instead of table, and set the div width as percentage rather than fixed pixel. And most of the properties you want in tables are available in the divs (css)

and in you css try this

```
@media only screen and (min-device-width: 320px) and (max-device-width: 480px) {
} 
```

with the figures you want.

or use

```
@media only screen and (min-width: 320px) and (max-width: 480px) {
} 
```

some testing needed to find out results :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:19:52.867

尝试

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" / > 
```

# unicode - 卢比符号在Firefox中不起作用

> ID：12459119
> 
> 赞同：7
> 
> 时间：2012-09-17T12:25:14.483
> 
> 标签：unicode, currency, symbols

我将以下货币代码用于印度卢比符号 ( `&#8377`)。但它在 Firefox 中不受支持，但在 chrome 中支持。

所有浏览器都支持其他货币代码。

有没有其他代码可以解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T14:04:02.317

如果`&#x20b9;`您的 FF(Firefox) 浏览器不支持，请使用以下 css

`font-family: DejaVu Sans;`

它肯定会起作用，因为它对我有用......

我已经在 FF (15.0.1)、chrome、IE8、IE9 中测试过它......它工作正常......

例子 ：

`<span style="font-family: DejaVu Sans;">&#x20b9;</span>`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T12:27:43.643

这应该会更好：₹

( `&#x20b9;`)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-28T08:51:49.017

它不仅限于 Firefox。我在这里在所有浏览器上都看到了这一点。

原因是 Windows 7。在 Windows 8 上，它运行良好。

您将需要安装以下更新
[http://support.microsoft.com/kb/2496898](http://support.microsoft.com/kb/2496898)

> 在 Windows Vista、Windows Server 2008、Windows 7 和 Windows Server 2008 R2 中支持印度卢比新货币符号的更新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-09T16:01:35.177

虽然为时已晚，但我觉得值得分享

经过一番努力，我们找到了一个永久且简单的解决方案/修复程序，可以解决在任何 Windows 操作系统（如 XP、Vista、7 或任何其他操作系统）上显示印度卢比符号的问题。

解决方案是，您只需从机器上复制所有符号（可在 Windows 的“控制面板\外观和个性化\字体”文件夹中找到）（大多数较新版本的 Windows，如少数版本的 Windows7 将支持所有 UNI 代码chars)，然后粘贴到您机器的 Fonts 文件夹中。然后重新启动您的机器，启动新更改将需要几分钟。然后立即检查。所有符号都将正确显示。

# c# - 将基于项目的解决方案转换为无项目网站 asp.net

> ID：12459133
> 
> 赞同：0
> 
> 时间：2012-09-17T12:25:51.583
> 
> 标签：c#, asp.net, visual-studio

我有一个相当大的 Web 应用程序，我开始使用 Visual Studio 中的“Web 项目”解决方案类型创建它。

我现在需要将一些遗留的 VB.NET 合并到应用程序中，但是你不能使用“Web 项目”模型混合语言。我必须使用所谓的无项目开发（基本上只是整个网站的一个文件夹）。

关于如何将项目转换为无项目模型的任何想法？

我希望这是有道理的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:40:40.573

从 Web 应用程序创建网站相对简单。

打开一个新的visual studio实例

文件 > 新网站

选择包含您的 Web 应用程序的文件夹。

Visual Studio 将警告您在该位置已经有一个包含文件的网站。

选择在现有位置创建新网站。

它会警告您`Default.aspx`存在一些类似的文件。选择不替换它们。

你完成了。

相反，从网站创建 Web 应用程序很困难。所以在你做出改变之前**一定要确定。**

# xcode - 安装了两个 XCode，协同工作奇怪崩溃 100%。

> ID：12459134
> 
> 赞同：0
> 
> 时间：2012-09-17T12:25:58.007
> 
> 标签：xcode, crash

安装两个XCode v4.3和v4.5，发现一个奇怪的问题，如果项目文件一开始用v4.5打开，然后关闭再用v4.3打开，就会100%崩溃。如何解决？有知道的请分享一下。谢谢。

还有一个问题是如何默认设置v4.3？单击项目文件，它将自动调用 v4.3，而不是当前的 v4.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:00:27.530

通过删除生成的库文件解决 ~/Library/....

# php - Yii - 使用 afterDelete() 更新另一个表中的数据

> ID：12459136
> 
> 赞同：0
> 
> 时间：2012-09-17T12:25:59.790
> 
> 标签：php, yii

我正在使用 Yii afterdelete() 来更新在另一个表中删除的相关数据。这是我在控制器中的代码：

**控制器动作**

```
public function actionDelete($id)
{
    if(Yii::app()->request->isPostRequest)
    {
        // we only allow deletion via POST request
        $this->loadModel($id)->delete();

        // if AJAX request (triggered by deletion via admin grid view), we should not redirect the browser
        if(!isset($_GET['ajax']))
            $this->redirect(isset($_POST['returnUrl']) ? $_POST['returnUrl'] : array('admin'));
    }
    else
        throw new CHttpException(400,'Invalid request. Please do not repeat this request again.');
} 
```

**模型功能**

```
 protected function afterDelete()
   {
        parent::afterDelete();
        $show_model = new Show();
        $show_model = Show::model()->findAll('tbl_season_id='.$this->id);
        $show_model->updateAll('tbl_season_id = NULL, on_season=0');

   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T09:56:31.163

正如@Gregor 所说，充分利用活动记录关系将使工作变得更加容易。因此，在**Show**模型中，您将拥有以下内容：

```
 public function relations()
     {
        return array(
            'season' => array(self::BELONGS_TO, 'Season', 'tbl_season_id'),
        );
     } 
```

在**季节**模型中，您将拥有以下内容：

```
 public function relations()
     {
        return array(
            'shows' => array(self::HAS_MANY, 'Show', 'tbl_show_id'),
        );
     } 
```

定义关系后，您将能够执行此操作：

```
 public function afterDelete()
     {
         parent::afterDelete();
         $season_shows = Season::model()->findByID($id)->shows; //using the shows relation
         foreach($season_shows as $season_show) do
         {
            $season_show->setAttributes('tbl_season_id => NULL, on_season => 0');
            $season_show->save();
         }

     } 
```

嗯，但如果你注意到`afterDelete`which 调用中的第二行`findByID($id)`但我们在里面`afterDelete`，那么记录实际上已经死了（删除）！！

要解决此问题，您可以`id`在模型被删除之前使用 a `variable`& a`beforeDelete`

```
 //at the begining of your model class
    $private = $cached_season_id;
    ...
    //then somewhere at the end
    ... 
    public function beforeDelete()
     {
          $this->cached_tbl_season_id = $this->id;
          return parent::beforeDelete();
     } 
```

现在，如果您将`id`in更改`afterDelete`为`$this->cached_season_id`.. 它应该可以工作。

好吧，这个解决方案是基于这个[yii-fourm-topic](http://www.yiiframework.com/forum/index.php/topic/17589-best-way-to-delete-child-record-in-yii/)，我不太确定它是否会按原样工作！！那么，试一试，让我们知道会发生什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:05:59.170

这看起来很像从 Season 到 Show 的 HAS_MANY 关系，因此您可能希望在未来使用关系来获取相关记录。在 yii-guide 中有一个很好的文档：[http ://www.yiiframework.com/doc/guide/1.1/en/database.arr](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

在我看来，您也有 jQuery 背景。您正在对数组（由 findAll 函数返回）调用 updateAll。正确的 updateAll 调用可能如下所示：

```
Show::model()->updateAll(array("tbl_season_id"=>null, "on_season"=>0), "tbl_season_id = $this->id") 
```

如果有某种限制，这可能会更好，但由于这是我个人喜好的问题，我就这样吧。

# qt - 在 Qt 应用程序中使用 WinAPI 提取图标

> ID：12459145
> 
> 赞同：2
> 
> 时间：2012-09-17T12:26:47.697
> 
> 标签：qt, winapi, icons, exe

我正在尝试使用 WinAPI 从 exe 文件中提取图标，但它不起作用。

**这是代码：**

```
QIcon OSTools::AppsInterface::extractAppIcon(const QString &fileName) const {
    wchar_t *convertedName = new wchar_t[fileName.length() + 1];
    fileName.toWCharArray(convertedName);
    convertedName[fileName.length()] = '\0';
    HICON Icon = ExtractIcon(NULL, convertedName, 0);

    QPixmap pixmap = QPixmap::fromWinHICON(Icon);
    return QIcon(pixmap);
} 
```

代码输出：

```
QPixmap::fromWinHICON(), failed to GetIconInfo() 
```

（[`ExtractIcon`MSDN 上的功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648068%28v=vs.85%29.aspx)）。

我认为问题是我发送 NULL 而不是“*调用函数的应用程序实例的句柄*”。但是，一般来说，我使用 Qt，它只是我的应用程序中的一个 WinAPI 函数。

怎么了？使用 WinAPI 提取图标的正确方法是什么？如果您有其他功能建议，请举个例子。这是我第一次使用 WinAPI。

**更新：**是的，有更好的方法。您可以使用[QFileIconProvider](http://qt-project.org/doc/qt-5.0/qtwidgets/qfileiconprovider.html)类来做这些事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T19:22:12.360

对我有用，即使是 NULL。但是获取HIINSTANCE其实很简单。我猜你在其他地方有问题。你的目标 exe 真的有嵌入的图标吗？

```
#ifdef Q_WS_WIN
#include <qt_windows.h>
#endif

MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  ui(new Ui::MainWindow)
{
  ui->setupUi(this);
#ifdef Q_WS_WIN
  QString fileName("D:\\_dev\\eclipse\\eclipse.exe");
  wchar_t *convertedName = new wchar_t[fileName.length() + 1];
  fileName.toWCharArray(convertedName);
  convertedName[fileName.length()] = '\0';
  HINSTANCE hInstance = ::GetModuleHandle(NULL);
  HICON Icon = ::ExtractIcon(hInstance, convertedName, 0);
  ui->label->setPixmap(QPixmap::fromWinHICON(Icon));
#endif
} 
```

![在此处输入图像描述](../Images/5485c01e004a13ef8930d507f97f6a33.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-12T05:13:18.570

我使用[了 QFileIconProvider](http://doc.qt.io/qt-5/qfileiconprovider.html)，它运行良好。尝试这个 ：

```
QPushButton b;
b.show();

QIcon icon;
QFileIconProvider fileiconpr;
icon = fileIconProvider.icon(QFileInfo("/*file name*/"));

b.setIcon(icon);

// And you can also save it where you want : 
QPixmap pixmap = icon.pixmap( QSize(/*desired size*/)  );
pixmap.save("/Desktop/notepad-icon.png"); 
```

[来源](http://www.qtcentre.org/threads/9890-Retrieving-a-file-s-icon)。祝你今天过得愉快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T14:39:02.287

解决方案非常简单。我只是发送了“.lnk”文件的路径而不是文件的路径。那是我的疏忽。

# sencha-touch - 如何将分段按钮集成到标签栏？

> ID：12459148
> 
> 赞同：0
> 
> 时间：2012-09-17T12:26:52.487
> 
> 标签：sencha-touch, sencha-touch-2, sencha-touch-theming

我正在创建一个煎茶触摸应用程序，该设计需要标签栏中的分段按钮。

有没有一种简单的方法可以使用 sencha 内置功能来做到这一点，还是我必须自己创建（添加带有分段按钮的工具栏作为项目并创建所有控件以实际获得相同的东西）？

```
extend: 'Ext.TabPanel',
requires: [
    'Ext.SegmentedButton',
],
xtype: 'album',
id: 'album',
fullscreen: true,
config: {
    tabBar: {
        layout: {
            pack: 'center',
        },
        items: {
            xtype: 'segmentedbutton',
            allowDepress: false,

            listeners: {
                initialize: function() {
                    Ext.SegmentedButton.implement({
                        setActive: function(activeItem) {
                            this.setActiveItem(activeItem);
                        }
                    });
                }
            }
        }
    },
    autoDestroy: true,
    activeItem: 1,
    items: [
        {
            title: 'HIGHLIGHTS',
            xtype: 'highlightview',
            id: 'highlightView'
        },
        {
            title: 'KATEGORIEN',
            xtype: 'categoryView',
            id: 'categoryView',
        },
        {
            title: 'SUCHE',
            xtype: 'searchView',
            id: 'searchView',
        }
    ],
} 
```

这就是我到目前为止所尝试的。侦听器可以解决 的错误`[Object] Object has no method 'setActive'`，但不会导致我希望它具有的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:53:40.413

```
//take a tap panel and inside the tap panel create panel as a xtype
//give item id to each button in segmented button to create listener and later on assign a //function to it

extend: 'Ext.TabPanel',

requires: [

    'Ext.SegmentedButton'

],

xtype: 'album',

id: 'album',

    enter code here`enter code here`

fullscreen: true,

    config: {
    cls:[
            'styles'
        ],
        scrollable: 'vertical',

        items: [

            {
                xtype: 'panel',
                title: 'Close Case',

                items: [

            {
                        xtype: 'segmentedbutton',
                        allowDepress: true,
                        height: 50,
                        items: [
                            {
                                text: 'Option 1',
                                pressed: true,
                                handler: function() {
                                console.log("Picked #1");
                                alert("foo");
                                itemId: "newButton11"
                                }
                            },
                            {
                                text: 'Option 2',
                                handler: function() {
                                alert("foo");

                                }
                            },
                            {
                                text: 'Option 3',
                                handler: function() {
                                alert("foo");
                                }
                            }
                        ]
                    }
                ]
            }

        ],

        listeners: [

        {

            delegate: "#newButton",
            event: "tap",
            fn: "onNewButtonTap"
        }
    ]

    },

onNewButtonTap: function () {
        //write your function here and it will work
    }

//This is working for me just let me know if it works for you. 
```

![在此处输入图像描述](../Images/17da91e6a5b8e76e9be34a3760db8153.png)

# computational-geometry - 查找所有具有公差的线交点（最好是预先存在的实现）

> ID：12459151
> 
> 赞同：4
> 
> 时间：2012-09-17T12:27:04.530
> 
> 标签：computational-geometry

Bentley-Ottmann 算法可用于及时扫描一组线段中的所有交点`n log n`。但是有没有一个版本可以以可变的精度做到这一点？即，如果它们比某个距离更近，则认为它们相交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:15:22.883

假设您正在谈论 2D 中的线段。

AFAIK，这没什么特别的。您*只需*调整类/对象的`intersects(...)`功能。如果两个线段之间的最小距离低于预定义的阈值，则不会返回指示“真实”交叉点`LineSegment`的（或其他）值，以指示交叉点的定义。算法没有变化。`boolean``true`

* * *

¹见：

*   [两条线段之间的最短距离](https://stackoverflow.com/questions/2824478/shortest-distance-between-two-line-segments)
*   [连接两个线段](https://stackoverflow.com/questions/541150/connect-two-line-segments/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T09:00:24.480

如果 2 个线段不相交，则它们之间的最小距离至少在一个线段端点上。因此，在您的情况下，测试一对线段是否相交或某个线段端点是否靠近其他线段就足够了。

第一个测试是 Bentley-Ottmann 算法的标准测试，第二部分可以在扫描线上添加和删除线段。当段被添加到 SL（左端点）时，足以测试 SL 上靠近左端点的段以及在从 SL 到左的给定距离处结束的段。当从 SL 中删除段时类似。

我认为，由于对称性，仅测试一侧就足够了，例如将段添加到 SL。

由于端点已排序，因此此搜索应该很快。如果有一些关于公差的片段不密集的保证，那么这种变化不会改变`n log n`原始算法的运行时间。

# android - 在android中为数字选择器创建减少和增加按钮侦听器

> ID：12459153
> 
> 赞同：0
> 
> 时间：2012-09-17T12:27:11.030
> 
> 标签：android

我想制作自定义号码选择器。它有两个按钮；上一个和下一个。当用户单击下一个按钮时，数字将增加一个数字，当用户单击上一个按钮时，数字将减少一个数字。

我只用下一个按钮成功，但我不知道用上一个按钮实现它。有没有人有帮助我的想法？

这是我的代码

```
ageEdit = (EditText) findViewById(R.id.editText7);
    ageEdit.setHint("0");
    ageEdit.setHighlightColor(000000);
    ageNext = (Button) findViewById(R.id.button2);
    ageNext.setOnClickListener(new OnClickListener(){   
        int age = 0;
        @Override
        public void onClick(View arg0) {
            age++;
            String ageText = Integer.toString(age);
            ageEdit.setHint(ageText);
        }
    });
    agePrev = (Button) findViewById(R.id.Button1);
    agePrev.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            //what should i put in here
        }
    }); 
```

这就是界面的样子 ![在此处输入图像描述](../Images/8f549c038425f914022376c530d01c88.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:32:36.540

`age`应该是您的 Activity 的字段，而不是侦听器的字段。

它看起来像这样：

```
public class CustomActivity extends Activity {
    int age = 0;
    ...

       ageNext.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                age++;
                String ageText = Integer.toString(age);
                ageEdit.setHint(ageText);
            }
        });

        agePrev.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                age--;
                String ageText = Integer.toString(age);
                ageEdit.setHint(ageText);
            }
        }); 
```

# cron - plesk 上的 cron 作业

> ID：12459154
> 
> 赞同：0
> 
> 时间：2012-09-17T12:27:17.270
> 
> 标签：cron, crontab, cron-task

到目前为止，我已经尝试过：

```
php -q /var/www/vhosts/mediaservises.me/site1/ems/admin/cron/cron.php
php -f /var/www/vhosts/mediaservises.me/site1/ems/admin/cron/cron.php
site1/ems/admin/cron/cron.php 
```

但他们都没有工作`plesk`

我的 cron 作业命令有什么问题？

我想每 5 分钟运行一次 cron.php。

# atk4 - 删除父表中的记录时如何在子表中设置parent_id=NULL？

> ID：12459156
> 
> 赞同：1
> 
> 时间：2012-09-17T12:27:26.773
> 
> 标签：atk4, php

删除父表中的记录时如何在子表中设置parent_id=NULL？

这就像 MySQL INNODB 表中的 ON DELETE = SET NULL 一样，但我想避免在 INNODB 级别使用所有这些（级联、忽略、更新和设置 null）功能，并将其移至 atk4 模型以将所有这些逻辑保留在一个地方。

例如，

```
class Model_Parent extends Model_Table{
  public $table='parent';
  function init(){
    parent::init();
    $this->addField('name');
    $this->hasMany('Child');
    $this->addHook('beforeDelete',$this);
  }
  function beforeDelete($m){
    // I guess here I should somehow set parent_id=NULL in all related Model_Child
    // records, but when I do so, then it's again DB constraint violation of course
    $c = $m->ref('Child');
    foreach($c as $junk){
      $c->set('parent_id',NULL); // this and below is not working
      $c->save();
    }
  }
}

class Model_Child extends Model_Table{
  public $table='child';
  function init(){
    parent::init();
    $this->addField('name');
    $this->hasOne('Parent');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:11:12.263

您正试图通过在代码中执行典型的数据库任务来重新发明轮子。

如果您不希望数据库管理外键关系，则不应使用这些关系。在这种情况下，您可以将列设置为`NULL`或任何其他值。但是没有人能证明你的数据库的一致性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:33:26.307

很简单，你只需要从Model进入DSQL：

```
$m->ref('Child')->dsql()->set('parent_id',null)->update(); 
```

更多信息：[http ://www.youtube.com/watch?v=sSRaYpoJFHk&list=PL7CBF92AB03A1CA3B&index=3&feature=plpp_video](http://www.youtube.com/watch?v=sSRaYpoJFHk&list=PL7CBF92AB03A1CA3B&index=3&feature=plpp_video)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:47:21.747

检查 parent_id 列是否允许 NULL 值。

# c# - 将 long 转换为 object 然后转换为 ulong

> ID：12459160
> 
> 赞同：5
> 
> 时间：2012-09-17T12:27:41.993
> 
> 标签：c#, casting, implicit-conversion

为什么 C# 不能将 long var 隐式转换为 object var 然后再转换为 ulong？

```
 long a = 0;
    Object c = a;
    ulong b = (ulong)c; // throw exception here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T12:29:22.607

您只能拆箱到与装箱完全相同的类型

```
 Object c = a 
```

盒子a很长

```
 ulong b = (ulong)c; 
```

尝试将 c 作为 ulong 拆箱，但它很长，因此失败。

```
 ulong b = (ulong)((long)c); 
```

会起作用，因为它将 c 拆箱很长。c 很长，这将起作用，您可以将 long 转换为 ulong

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T12:34:14.327

如果将值类型 T 装箱，则只能将其拆箱为自身或 Nullable ( T? )。任何其他演员都是无效的。

那是因为对象的强制转换永远不能被解释为转换，而 是 long 和 ulong 之间的转换。

所以这是合法的：

```
var c = (long) b; 
```

这也是合法的：

```
var c = (long?) b; 
```

但这不是：

```
var c = (ulong) b; 
```

要做你想做的，你必须投两次：第一次只是拆箱，第二次是实际的转换：

```
var c = (ulong)(long) b; 
```

有关详细信息，请参阅[Eric Lippert 的这篇博文](http://blogs.msdn.com/b/ericlippert/archive/2009/03/19/representation-and-identity.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-22T13:57:27.347

如果该值大于 a `long`(9,223,372,036,854,775,807) 的最大值，上述所有情况都会导致数据丢失。

`ulong`最小值为零，最大值为 18,446,744,073,709,551,615。

在没有这种风险的情况下进行转换

```
ulong b = Convert.ToUInt64(c); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:29:30.727

简短的回答：因为 long 和 ulong 不是同一类型。一个是有符号长，另一个是无符号长。

# javascript - 为什么我不能在 Javascript 中调用 array.0？

> ID：12459163
> 
> 赞同：1
> 
> 时间：2012-09-17T12:28:01.673
> 
> 标签：javascript

此代码将提醒对象 a 中的所有属性名称。0,1,2，你好。

```
Object.prototype.hello = {};

var a = [1,2,3];

for ( var number in a ) {
    alert( number)
} 
```

我的问题是，我可以通过以下语法访问属性 hello：

```
a.hello 
```

但是为什么我不能访问`a.0`应该等于 1 的值。数组声明不是创建“真实属性”吗？

我知道我可以通过 a[0] 和 a["hello"] 访问属性

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T12:30:32.627

这是语法限制。在 JavaScript 中，标识符不能以数字开头，因此`0`不是有效的。`a.0`然后会产生语法错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:31:06.820

[因为](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals)：

> JavaScript 标识符必须以字母、下划线 (_) 或美元符号 ($) 开头；

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T12:30:38.897

使用语法访问数组中的项目`myArray[index]`。点表示法仅允许您访问名称为有效标识符的属性，并且数组中项目的索引（作为数字）不符合条件。因此，您必须使用更宽松的括号表示法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T12:31:20.800

JavaScript 标识符不能以数字开头。您尝试访问的属性是对象内的标识符。

你会在这里找到[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals)这个片段：

> 变量
> 
> 您在应用程序中使用变量作为值的符号名称。变量的名称，称为标识符，符合一定的规则。
> 
> JavaScript 标识符必须以字母、下划线 (_) 或美元符号 ($) 开头；后续字符也可以是数字 (0-9)。因为 JavaScript 区分大小写，所以字母包括字符“A”到“Z”（大写）和字符“a”到“z”（小写）。
> 
> 从 JavaScript 1.5 开始，您可以在标识符中使用 ISO 8859-1 或 Unicode 字母，例如 å 和 ü。您还可以使用 \uXXXX Unicode 转义序列作为标识符中的字符。
> 
> 合法名称的一些示例包括 Number_hits、temp99 和 _name。

# c# - 如何在其他系统中显示 Reportviewer？

> ID：12459164
> 
> 赞同：0
> 
> 时间：2012-09-17T12:28:04.763
> 
> 标签：c#

我正在使用 WinForm 应用程序。带有 4.0 的 C#2010，在将应用程序部署到另一台计算机后出现错误，我已复制所有引用以及我使用的报告，但在上传报告时仍然出错。“无法加载文件或程序集错误 microsoft.reportviewer.processing 对象模型版本 = 10.0.0.0，文化 = 中立”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:29:35.307

您需要在客户端计算机上安装**Microsoft Report Viewer 2010 Redistributable Package**：

> Microsoft Report Viewer 控件使在 .NET Framework 上运行的应用程序能够显示使用 Microsoft 报告技术设计的报告。此可再发行包包含报表查看器的 Windows 和 Web 版本。

下载链接：

*   [Microsoft Report Viewer 2010 可再发行包](http://www.microsoft.com/en-us/download/details.aspx?id=6442)

# r - 使用 ifelse 从 R 中的数据集中删除不需要的行

> ID：12459169
> 
> 赞同：3
> 
> 时间：2012-09-17T12:28:33.237
> 
> 标签：r, subset, if-statement

我有一个数据集，我想在其中删除我的几个人在第一个观察年中第 11 个月的出现。是否可以用 ifelse 做到这一点？就像是：

```
ifelse(ID=="1" & Month=="11" and Year=="2006", "remove these rows",  
  ifelse(ID=="2" & Month=="11" & Year=="2007", "remove these rows",   
         "nothing")) 
```

一如既往，感谢所有帮助！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T12:33:26.933

`ifelse()`如果您想要的只是要删除或不删除的指示器，您甚至不需要。

```
ind <- (Month == "11") &
           ((ID == "1" & Year == "2006") | (ID == "2" & Year == "2007")) 
```

`ind``Month`如果是`"11"`并且如果其他两个子条款中的任何一个是 ，则将包含一个 TRUE `TRUE`。

然后，您可以通过或`!ind`在任何子集操作中删除这些样本。`[``subset()`

```
dat <- data.frame(ID = rep(c("1","2"), each = 72),
                  Year = rep(c("2006","2007","2008"), each = 24),
                  Month = rep(as.character(1:12), times = 3))
ind <- with(dat, (Month == "11") & ((ID == "1" & Year == "2006") |
                                    (ID == "2" & Year == "2007")))
ind
dat2 <- dat[!ind, ] 
```

这使

```
R> ind
  [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
 [13] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
 [25] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [37] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [49] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [61] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [73] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [85] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
 [97] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
[109] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE
[121] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
[133] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE
R>     dat2 <- dat[!ind, ]
R> nrow(dat)
[1] 144
R> nrow(dat2)
[1] 140 
```

就示例数据而言，这是正确的/

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T23:34:25.733

一种`data.table`解决方案，将节省时间和内存（并且编码*略少）。*它将很好地扩展到*大*数据集。

如果列是整数，而不是因子

```
library(data.table)
DT <- data.table(ID = rep(1:2, each = 72),
          Year = rep(2006:2008, each = 24),
          Month = rep(1:12, times = 3))
# or you could use:   DT <- as.data.table(dat)
setkey(DT,ID,Year,Month)
DT[-DT[J(1:2,2006:2007,11),which=TRUE]] 
```

# android - Android：无法选择自定义列表视图

> ID：12459170
> 
> 赞同：0
> 
> 时间：2012-09-17T12:28:47.523
> 
> 标签：android, listview

我正在使用光标适配器来获取自定义列表视图。我有两个 xml 文件。

a.xml 有一个`Linearlayout`with`Listview`

y.xml 有`Linearlayout`两个`Textview`.

当我看到列表视图时，我无法选择。我正在使用`setOnItemClickListener`从列表视图中选择一个项目。

我试图搜索这个并知道他们中的许多人都有同样的问题。我尝试将它应用于 xml 中的 textview`android:focusable="false`和编程方式。

这个问题的解决方法是什么？

**一个.xml**

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true" >

     <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           />

               <TextView
            android:id="@+id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           />
     </LinearLayout>
    </ScrollView> 
```

**y.xml**

```
LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:35:09.033

也许这个问题是这样的：[button in expandable listview android](https://stackoverflow.com/questions/9880950/button-in-expandable-listview-android/9892402#9892402)

试试这个：

```
mTextView.setFocuseable(false); 
```

在你的 .java 类而不是你的 xml 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:37:39.173

看看这个，希望它能给你一些指导，不幸的是，如果没有看到你的整个 java 就不能做很多事情！：

```
public class CRUDonDB extends ListActivity {

private final String SAMPLE_DB_NAME = "myFriendsDb";
private final String SAMPLE_TABLE_NAME = "friends";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ListView lv = getListView();

    ArrayList<String> results = new ArrayList<String>();
    SQLiteDatabase sampleDB = null;

    try {
        sampleDB =  this.openOrCreateDatabase(SAMPLE_DB_NAME, MODE_PRIVATE, null);

        sampleDB.execSQL("CREATE TABLE IF NOT EXISTS " +
                SAMPLE_TABLE_NAME +
                " (LastName VARCHAR, FirstName VARCHAR," +
                " Country VARCHAR, Age INT(3));");

        sampleDB.execSQL("INSERT INTO " +
                SAMPLE_TABLE_NAME +
                " Values ('Doe','John','UK',22);");
        sampleDB.execSQL("INSERT INTO " +
                SAMPLE_TABLE_NAME +
                " Values ('Smith','Robert','UK',20);");
        sampleDB.execSQL("INSERT INTO " +
                SAMPLE_TABLE_NAME +
                " Values ('Walton','Henry','UK',10);");

        Cursor c = sampleDB.rawQuery("SELECT FirstName, LastName, Country, Age FROM " +
                SAMPLE_TABLE_NAME +
                " where Age >= 10 LIMIT 5", null);

        if (c != null ) {
            if  (c.moveToFirst()) {
                do {
                    String firstName = c.getString(c.getColumnIndex("FirstName"));
                    String lastName = c.getString(c.getColumnIndex("LastName"));
                    String country = c.getString(c.getColumnIndex("Country"));
                    int age = c.getInt(c.getColumnIndex("Age"));
                    results.add("" + firstName + " " + lastName + " " + country + " " +age);
                }while (c.moveToNext());
            } 
        }

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,results));

        lv
        .setOnItemClickListener(mOnItemListViewClickListener);

    } catch (SQLiteException se ) {
        Log.e(getClass().getSimpleName(), "Could not create or Open the database");
    } finally {
        if (sampleDB != null) 
            sampleDB.execSQL("DELETE FROM " + SAMPLE_TABLE_NAME);
            sampleDB.close();
    }
}

private final OnItemClickListener mOnItemListViewClickListener = new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {

        String item = (String) parent.getItemAtPosition(position);
        Toast.makeText(getBaseContext(), "You have chosen " +item, Toast.LENGTH_LONG).show();
};
};

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:56:02.717

删除`<scrollview>`，它就像一个魅力。

# c# - 检查IP地址是否在范围内

> ID：12459174
> 
> 赞同：3
> 
> 时间：2012-09-17T12:28:59.010
> 
> 标签：c#, ip

> **可能重复：**
> [如何检查输入 IP 是否属于特定 IP 范围](https://stackoverflow.com/questions/2138706/how-to-check-a-input-ip-fall-in-a-specific-ip-range)

我想检查一个 IP 地址是否在私有 IP 地址范围内。我在 .NET 中找不到任何方法，而且我不确定如何自己构建它？

例如`CheckIsIpPublic("192.168.0.1", upperIp, lowerIp) //should return false`

例如`CheckIsIpPublic("78.60.143.29", upperIp, lowerIp) //should return true`

```
var upperIp = new List<IPAddress>
             {
               IPAddress.Parse("192.168.0.0"),
               IPAddress.Parse("10.0.0.0"),
               IPAddress.Parse("172.16.0.0"),
               IPAddress.Parse("224.0.0.0")
             };

var lowerIp = new List<IPAddress>
             {
               IPAddress.Parse("192.168.255.255"), 
               IPAddress.Parse("10.255.255.255"), 
               IPAddress.Parse("172.31.255.255"), 
               IPAddress.Parse("255.255.255.255")
             }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T12:44:46.387

使用[Codeplex 中的 IPNetwork 类](http://ipnetwork.codeplex.com/)，您可以执行以下操作：

```
//see http://en.wikipedia.org/wiki/Reserved_IP_addresses#Reserved_IPv4_addresses
ReadOnlyCollection<IPNetwork> reservedNetworks =
    new ReadOnlyCollection<IPNetwork>(new[]
        {
            IPNetwork.Parse("0.0.0.0/8"),
            IPNetwork.Parse("10.0.0.0/8"),
            IPNetwork.Parse("127.0.0.0/8"),
            IPNetwork.Parse("169.254.0.0/16"),
            IPNetwork.Parse("172.16.0.0/12"),
            IPNetwork.Parse("192.0.2.0/24"),
            IPNetwork.Parse("192.88.99.0/24"),
            IPNetwork.Parse("192.168.0.0/16"),
            IPNetwork.Parse("198.18.0.0/15"),
            IPNetwork.Parse("198.51.100.0/24"),
            IPNetwork.Parse("203.0.113.0/24"),
            IPNetwork.Parse("224.0.0.0/4"),
            IPNetwork.Parse("240.0.0.0/4")
        });

var isInRange = 
  !reservedNetworks.Any(n => IPNetwork.Contains(n, suspiciousIpAddress)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:48:01.907

```
public struct IpRange
{
    public IPAddress LowerIP;
    public IPAddress UpperIP;

    public IpRange(IPAddress lowerIP, IPAddress upperIP)
    {
        LowerIP = lowerIP;
        UpperIP = upperIP;
    }
}
    public bool CheckIsIpPublic(string adress, List<IpRange> rangeList)
    {
        foreach (var range in rangeList)
        {
            List<int> adressInt = adress.Split('.').Select(str => int.Parse(str)).ToList();
            List<int> lowerInt = range.LowerIP.ToString().Split('.').Select(str => int.Parse(str)).ToList();
            List<int> upperInt = range.UpperIP.ToString().Split('.').Select(str => int.Parse(str)).ToList();

            if (adressInt[0] >= lowerInt[0] && adressInt[0] < upperInt[0])
            {
                return true;
            }
            else if (adressInt[0] >= lowerInt[0] && adressInt[0] == upperInt[0])
            {
                if (adressInt[1] >= lowerInt[1] && adressInt[1] < upperInt[1])
                {
                    return true;
                }
                else if (adressInt[1] >= lowerInt[1] && adressInt[1] == upperInt[1])
                {
                    if (adressInt[2] >= lowerInt[2] && adressInt[2] < upperInt[2])
                    {
                        return true;
                    }
                    else if (adressInt[2] >= lowerInt[2] && adressInt[2] == upperInt[2])
                    {
                        if (adressInt[3] >= lowerInt[3] && adressInt[3] <= upperInt[3])
                        {
                            return true;
                        }
                    }

                }

            }
        }
        return false;
    } 
```

并运行这个东西你应该使用

```
var rangeList = new List<IpRange>();
rangeList.Add(new IpRange(IPAddress.Parse("192.168.0.0"),IPAddress.Parse("192.168.255.255")));
rangeList.Add(new IpRange(IPAddress.Parse("10.0.0.0"),IPAddress.Parse("10.255.255.255")));
rangeList.Add(new IpRange(IPAddress.Parse("172.16.0.0"),IPAddress.Parse("172.31.255.255")));
rangeList.Add(new IpRange(IPAddress.Parse("224.0.0.0"),IPAddress.Parse("255.255.255.255")));
bool result = CheckIsIpPublic("78.60.143.29", rangeList); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:33:23.213

像下面这样的东西会起作用（未编译）：

```
public bool IsPrivateIp(string ipAddress)
{
    return (ipAddress.StartsWith("192.168") || ipaddress.Equals("127.0.0.1") || ipAddress.StartsWith("10.0")) ;
} 
```

如果您为内部 IP 地址留出整个范围（10.0.0.0 - 10.0.255.255），则效果最佳。

# codeigniter-2 - Codeigniter 使用多个控制器？

> ID：12459175
> 
> 赞同：0
> 
> 时间：2012-09-17T12:28:58.910
> 
> 标签：codeigniter-2, controllers

这更像是一个与代码无关的问题。我想要你在这里的经验和建议。我正在设计这个简单的 Web 应用程序，我可以在其中插入数据，然后确保网站将根据类别查看该数据。

在我的控制器中，我有功能，每个加载都基于从我的主页中选择的类别。

现在我想知道，为说 CRUD 操作、列出记录、搜索功能等创建多个控制器（就像我以前在使用 OO Php 时有单独的类）是否更好。或者只是将它们全部集中在一个控制器中（目前的方法）？如果有多个控制器，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:05:52.517

您应该为您的网站提供的每个单独功能设置一个控制器。例如：

*   用于处理“常规”内容（文章）（显示文章、搜索、评级等）的控制器
*   用于处理用户管理（登录、注销、注册等）的控制器
*   用于“静态”页面的控制器，例如 about、help、tos 等……

您还应该处理模型类中的所有数据库操作，每个操作针对不同的实体（文章模型，用户模型......）

我希望你明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:56:27.923

Codeigniter 使用 MVC 结构，因此您应该实际使用模型进行数据库操作，并以每个模型用于特定功能的方式将它们分开。
如果所有类别都以相同的方式处理，您应该将所有从数据库中检索的代码添加到单个模型中，这样您就可以简化代码，使其更易于维护。

# objective-c - Xcode - 何时使用 UIView 或 UITableView？

> ID：12459177
> 
> 赞同：0
> 
> 时间：2012-09-17T12:29:10.757
> 
> 标签：objective-c, ios, uitableview, uiview, uiviewcontroller

如果我想列出数据库中的一些项目，是否需要将 a`UIView`和 a添加`UITableView`到我的 ViewController 中？或者只是添加`UITableView`到我的`ViewController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:32:14.403

您必须已经将 a`UIView`作为您的一部分`ViewController`，只需将`UITableView`其作为子视图添加到您的`UIView`.

`UIView`a 的可以`ViewController`作为 访问`[self.view];`。所以你需要做的是`[self.view addSubview:yourTableView];`。正确使用`setFrame`将其设置为您需要的 x,y,width,height。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:41:44.090

它只是取决于您的项目布局，如果您想添加 tableview，那么您可以使用预定义的函数，如 didselectrow、moverow、editingrow、willdisplay 等......这完全取决于您的需要和布局规范，最后一件事 tableview 比使用 view 更好在另一个观点上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:33:56.027

只需添加`UITableView`您已经拥有的原因`UIView`，请查看本[教程](http://www.iosdevnotes.com/2011/10/uitableview-tutorial/)以了解如何使用`UITableView`。

# iphone - ios：如何删除导航栏上方的空白栏？

> ID：12459179
> 
> 赞同：0
> 
> 时间：2012-09-17T12:29:14.560
> 
> 标签：iphone, navigation, space

对于自定义导航栏，我想设置背景图像并自定义左键和右键。所以我用没有.xib的代码实例化它。但导航栏上方有一个空白栏。

这是我的代码：

```
-(void) createNavBar:(NSMutableArray *)arguments withDict:(NSMutableDictionary *)options
{
    if (!navBar)
    {
        navBarController = [[[UINavigationController alloc] init] autorelease];
        navBarController.navigationBar.bounds = CGRectMake(0, 0, 320, 40);
        [navBarController.navigationBar  setBackgroundImage:[UIImage imageNamed:@"www/images/header_bg@2x.png"] forBarMetrics:UIBarMetricsDefault];
        [[[self webView] superview] addSubview: navBarController.navigationBar];
    }
} 
```

运行构建，发现导航栏上方有一个空白栏。这是一个截图： ![在此处输入图像描述](../Images/bf0dba50f49278aaa08c2ea93da5b95a.png)

标题栏和蓝色导航栏之间的空格怎么去掉？感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:51:38.497

在 Xib 检查您的视图和 webView`Y`和`height`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T23:09:45.167

尝试使用这个：

```
[[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationSlide]; 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T07:50:28.993

`[self.navigationController.navigationBar.layer setMasksToBounds:NO];`在 viewDidLoad 中插入

# zend-framework2 - Zend FrameWork 2 Get ServiceLocator In Form 并填充下拉列表

> ID：12459180
> 
> 赞同：16
> 
> 时间：2012-09-17T12:29:17.137
> 
> 标签：zend-framework2

我需要从表单中获取适配器，但仍然无法。

在我的控制器中，我可以使用以下方法恢复适配器：

```
// module/Users/src/Users/Controller/UsersController.php
public function getUsersTable ()
{
    if (! $this->usersTable) {
        $sm = $this->getServiceLocator();
        $this->usersTable = $sm->get('Users\Model\UsersTable');
    }
    return $this->usersTable;
} 
```

在我的模块中，我这样做了：

```
// module/Users/Module.php  
public function getServiceConfig()
{
    return array(
            'factories' => array(
                    'Users\Model\UsersTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $uTable     = new UsersTable($dbAdapter);
                        return $uTable;
                    },
                    //I need to get this to the list of groups
                    'Users\Model\GroupsTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $gTable     = new GroupsTable($dbAdapter);
                        return $gTable;
                    },
            ),
    );
} 
```

有人可以给我一个例子，如何将适配器从组表单中获取到表中？

我已经按照这个例子给我的表单用户： http: [//framework.zend.com/manual/2.0/en/modules/zend.form.collections.html](http://framework.zend.com/manual/2.0/en/modules/zend.form.collections.html)

**从这里编辑...**

也许我表达了自己错误地提出这个问题。

我真正需要做的是用我的表组中的信息填充一个选择（下拉）。

因此，我需要通过实现 ServiceLocatorAwareInterface（[请参阅此链接](http://zend-framework-community.634137.n4.nabble.com/ServiceManagerAwareInterface-vs-ServiceLocatorAwareInterface-td4655675.html)）在我的 userForm 类中获取服务，因为默认情况下，Zend Framework MVC 注册了一个初始化器，它将注入到 ServiceManager 实例中 ServiceLocatorAwareInterface 实现任何类。

从表组中检索值并填充选择后。

问题是在我尝试过的所有方法中，getServiceLocator() 返回：

```
Call to a member function get() on a non-object in
D:\WEBSERVER\htdocs\Zend2Control\module\Users\src\Users\Form\UsersForm.php
on line 46 
```

我只是想在我的用户窗体中这样做......

```
namespace Users\Form;

use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Form\Element;
use Zend\Form\Form;

class UsersForm extends Form implements ServiceLocatorAwareInterface
{

    protected $serviceLocator;

    public function getServiceLocator ()
    {
        return $this->serviceLocator;
    }

    public function setServiceLocator (ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function __construct ($name = null)
    {
        parent::__construct('users');

        $this->setAttribute('method', 'post');        

        $sm = $this->getServiceLocator();

        $groups = $sm->get('Users\Model\GroupsTable')->fetchAll(); // line 46       

        $select = new Element\Select('groups');

        $options = array();

        foreach ($groups as $group) {

            $options[$group->id] = $group->name;
        }

        $select->setValueOptions($options);

        $this->add($select);

        // and more elements here... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T00:01:08.003

对于 ZF < 2.1，此处的其他各种答案通常是正确的。

一旦 2.1 出来了，这个框架就有了一个[很好的解决方案](http://zf2.readthedocs.org/en/develop/modules/zend.form.advanced-use-of-forms.html#handling-dependencies)。这或多或少形式化了 DrBeza 的解决方案，即：使用初始化程序，然后将任何表单引导移动到在所有依赖项都已初始化后调用的 init() 方法中。

我一直在玩开发分支，它工作得很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T12:35:20.420

这是我用来解决这个问题的方法。

首先，你想让你的表单像你所做的那样实现 ServiceLocatorInterface。

然后，您仍然需要手动注入服务定位器，并且由于整个表单是在构造函数内部生成的，因此您也需要通过构造函数进行注入（尽管在构造函数中构建它并不理想）

模块.php

```
/**
 * Get the service Config
 * 
 * @return array 
 */
public function getServiceConfig()
{
    return array(
        'factories' => array(
            /**
             * Inject ServiceLocator into our Form
             */
            'MyModule\Form\MyForm' =>  function($sm) {
                $form = new \MyModule\Form\MyFormForm('formname', $sm);
                //$form->setServiceLocator($sm);

                // Alternativly you can inject the adapter/gateway directly
                // just add a setter on your form object...
                //$form->setAdapter($sm->get('Users\Model\GroupsTable')); 

                return $form;
            },
        ),
    );
} 
```

现在在您的控制器中，您将获得如下形式：

```
// Service locator now injected
$form = $this->getServiceLocator()->get('MyModule\Form\MyForm'); 
```

现在您将可以访问表单内的完整服务定位器，以获取任何其他服务等，例如：

```
$groups = $this->getServiceLocator()->get('Users\Model\GroupsTable')->fetchAll(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T12:51:47.943

在 module.php 中，我创建了两个服务。看看我如何将适配器提供给表单。

```
public function getServiceConfig()
{
    return array(
        'factories' => array(
            'db_adapter' =>  function($sm) {
                $config = $sm->get('Configuration');
                $dbAdapter = new \Zend\Db\Adapter\Adapter($config['db']);
                return $dbAdapter;
            },

            'my_amazing_form' => function ($sm) {
                return new \dir\Form\SomeForm($sm->get('db_adapter'));
            },

        ),
    );
} 
```

在表单代码中，我将该提要用于任何内容：

```
namespace ....\Form;

use Zend\Form\Factory as FormFactory;
use Zend\Form\Form;

class SomeForm extends Form
{

    public function __construct($adapter, $name = null)
    {
        parent::__construct($name);
        $factory = new FormFactory();

        if (null === $name) {
            $this->setName('whatever');
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T11:04:16.410

这是我用来解决这个问题的方法。

首先，在 Module.php 中，创建服务（就像您所做的那样）：

```
// module/Users/Module.php  
public function getServiceConfig()
{
    return array(
            'factories' => array(
                    'Users\Model\UsersTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $uTable     = new UsersTable($dbAdapter);
                        return $uTable;
                    },
                    //I need to get this to the list of groups
                    'Users\Model\GroupsTable' =>  function($sm) {
                        $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                        $gTable     = new GroupsTable($dbAdapter);
                        return $gTable;
                    },
            ),
    );
} 
```

然后在控制器中，我得到了对服务的引用：

```
$users = $this->getServiceLocator()->get('Test\Model\TestGroupTable')->fetchAll();
        $options = array();
        foreach ($users as $user)
           $options[$user->id] = $user->name;
        //get the form element
        $form->get('user_id')->setValueOptions($options); 
```

还有中提琴，那工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T15:59:38.200

其他答案的另一种方法是创建一个 ServiceManager Initializer。

如果您的实例实现了 ServiceLocatorAwareInterface，则现有 Initializer 的一个示例是如何注入 ServiceManager。

想法是创建一个您在 Initialiser 中检查的接口，该接口可能如下所示：

```
interface FormServiceAwareInterface
{
    public function init();
    public function setServiceManager(ServiceManager $serviceManager);
} 
```

您的初始化程序可能看起来像的示例：

```
class FormInitializer implements InitializerInterface
{
    public function initialize($instance, ServiceLocatorInterface $serviceLocator)
    {
        if (!$instance instanceof FormServiceAwareInterface)
        {
            return;
        }

        $instance->setServiceManager($serviceLocator);
        $instance->init();
    }
} 
```

发生的任何事情`init()`都可以访问`ServiceManager`. 当然，您需要将初始化程序添加到您的 SM 配置中。

它并不完美，但可以很好地满足我的需求，也可以应用于从 ServiceManager 中提取的任何字段集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-10T21:39:10.720

我们在模型中处理这个问题，通过添加一个接受表单的方法

```
public function buildFormSelectOptions($form, $context = null)
{
    /** 
     * Do this this for each form element that needs options added
     */
    $model = $this->getServiceManager()->get('modelProject');

    if (empty($context)){
        $optionRecords = $model->findAll();
    } else {
        /**
         * other logic for $optionRecords
         */
    }

    $options = array('value'=>'', 'label'=>'Choose a Project');
    foreach ($optionRecords as $option) {
        $options[] = array('value'=>$option->getId(), 'label'=>$option->getName());
    }

    $form->get('project')->setAttribute('options', $options);
} 
```

由于表单是通过引用传递的，我们可以在构建表单的控制器中执行以下操作：

```
 $builder = new AnnotationBuilder();
    $form = $builder->createForm($myEntity);
    $myModel->buildFormSelectOptions($form, $myEntity);

    $form->add(array(
        'name' => 'submitbutton',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Submit',
            'id' => 'submitbutton',
        ),
    ));

    $form->add(array(
        'name' => 'cancel',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Cancel',
            'id' => 'cancel',
        ),
    )); 
```

注意：该示例假定基本表单是通过注释构建的，但您如何创建初始表单并不重要。

# java - 如何使用 apache POI 将新工作表添加到现有的 excel 工作簿？

> ID：12459181
> 
> 赞同：9
> 
> 时间：2012-09-17T12:29:17.087
> 
> 标签：java, apache-poi

我正在尝试将列表数据写入一本工作簿中的多个 excel 表中。与第一个列表一样，代码将创建新工作簿并为列表 [1] 创建新工作表，对于第二个列表，它将在现有工作簿中创建新工作表，依此类推。所以我写了下面的代码。但它不起作用，我只能看到列表 [1] 的第一张表。有人可以帮我提供任何替代解决方案吗？

我写的下面的代码

```
 ArrayList<List<String>> tempresultdata=this.getSummaryList();
    HSSFWorkbook workbook = new HSSFWorkbook();
    String fileName="Path\\To\\XLS";
    File file = new File(fileName);
    FileOutputStream out;           
    if(!file.exists()) // This will create new workbook with new sheet if it doesnt exists{

                HSSFSheet mySheet = workbook.createSheet(sheetname);
                writeExcel(mySheet,tempresultdata);
    } else // This add new sheet to above created workbook {
            try {
                HSSFWorkbook myWorkBook = (HSSFWorkbook) WorkbookFactory.create(file);
                workbook=myWorkBook;
                HSSFSheet mySheet = (HSSFSheet) workbook.createSheet(sheetname);
                writeExcel(mySheet,tempresultdata);                 
            } catch (InvalidFormatException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    }   
    try{
        out = new FileOutputStream(fileName,true);
        workbook.write(out);
        out.close();
        }catch(Exception e){ 
            e.printStackTrace();
        } 
```

谢谢，普里扬克·沙阿

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T23:58:09.223

如果文件不存在，则此代码创建新文件并创建示例 sheet1，但如果文件存在，则它将新工作表添加到现有的 excel 文件中。

```
 HSSFWorkbook workbook = null;
    File file = new File(context.getExternalFilesDir(null), "Sample.xls");
    FileOutputStream fileOut = new FileOutputStream(file);

    if (file.exists()) {
        try {
            workbook = (HSSFWorkbook)WorkbookFactory.create(file);
        } catch (InvalidFormatException e) {
            e.printStackTrace();
        }
        HSSFSheet sheet = workbook.createSheet("Sample sheet2");
    }
    else{
        workbook = new HSSFWorkbook();
        HSSFSheet sheet = workbook.createSheet("Sample sheet1");
    }
    workbook.write(fileOut);
    fileOut.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:58:14.380

看起来你只是写出`sheet`不是`workbook`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T18:22:46.040

在使用现有工作簿时，您不应该创建文件对象，只需向`FileInputStream`对象提供文件位置并将其引用传递给工作簿对象，然后对现有文件执行任何您想做的事情。要添加工作表，只需使用 create Method 命令

```
public void AddsheetintoExistingworkbook(String sheetname) throws IOException, InvalidFormatException{

    //***************************Add a sheet into Existing workbook***********************************************

 String path="C:\\Workspace\\Selenium_2.53\\src\\InputFiles\\Temp.xlsx";
 fileinp = new FileInputStream(path);
 workbook = new XSSFWorkbook(fileinp);
 workbook.createSheet(sheetname);

 fileOut = new FileOutputStream(path);
    workbook.write(fileOut);
    fileOut.close();
 System.out.println("File is written successfully");    
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-23T07:42:13.740

您可以使用 Bhaskar 的代码来解决问题并使用 WorkbookFactory，您可能需要下载 poi-ooxml-3.7.jar 文件。

这是给你的链接：

[http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.poi/poi-ooxml/3.7](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.apache.poi/poi-ooxml/3.7)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-29T09:27:30.757

要将多个 Excel 工作表添加到新的 Excel 文件中，需要从一个工作簿创建这些工作表，并将一次写入文件输出流

```
import java.io.*;
import java.util.*;
import org.apache.poi.ss.usermodel.*;
import org.apache.poi.xssf.usermodel.*;

public class JustATest {
   public static void main(String[] args) throws Exception  {       

        XSSFWorkbook AWorkbook = new XSSFWorkbook(); //Create blank workbook 

        for (int i = 0; i < 10; i++) {
            XSSFSheet spreadsheet = AWorkbook.createSheet(" Employee "+i);

            // the follwing code is to create dummy data in sheets 
            // is similar to the one at tutorialPoint.com
            XSSFRow row;            
            //This data needs to be written (Object[])
            Map < String, Object[] > empinfo =    new TreeMap< String, Object[] >();
            empinfo.put( "1", new Object[] { "EMP ID", "EMP NAME", "DESIGNATION" });
            for (int j = 0; j < i; j++) {
                empinfo.put( j+2+"", new Object[] {  j+2+"", "Fadel K", "Technical Manager" });                
            }          
            //Iterate over data and write to sheet
            Set<String> keyid = empinfo.keySet();
            int rowid = 0;
            for (String key : keyid){
               row = spreadsheet.createRow(rowid++);
               Object [] objectArr = empinfo.get(key);
               int cellid = 0;
               for (Object obj : objectArr){
                  Cell cell = row.createCell(cellid++);
                  cell.setCellValue((String)obj);
               }
            }            
            // dummy data creation over.
        }       

        // here you write all sheets at once, by writing the entier workbook
        FileOutputStream out = new FileOutputStream(new File("AllData.xlsx"));
        AWorkbook.write(out);
        out.close();               
   }
} 
```

# couchbase - 为什么使用 HTTP REST API 访问 Couchbase 视图？

> ID：12459188
> 
> 赞同：0
> 
> 时间：2012-09-17T12:29:38.223
> 
> 标签：couchbase

我已经开始研究 Couchbase 2.0 的特性，而且我知道 CouchDB 只公开了 HTTP API，但我有点惊讶于 Couchbase 2.0（从 1.8 演变而来，你只使用 memcached）以同样的方式公开视图。

这里有哪些考虑？不能使用 memcached 查询视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:24:51.333

在 Couchbase Server 2.0 中，无法使用 Memcached API 查询视图。但是，请记住，视图主要是一个二级索引，将用于检索原始文档的某些投影或从视图查询返回的 ID 中检索原始文档。

换句话说，模式（在本例中为 Python）将是：

```
view = bucket.view("_design/beer/_view/by_name") 
```

然后，当您遍历视图时，您将从每一行获取 ID 并使用 Memcached API 检索原始文档。同样，在 Python 中：

```
for row in view:    
    id = row["id"].__str__()    
    original_doc = bucket.get(id)[2] 
```

# symfony - services.yml 和同一包中的文件路径

> ID：12459193
> 
> 赞同：4
> 
> 时间：2012-09-17T12:30:19.550
> 
> 标签：symfony

如何引用 services.yml 中的数据文件，该文件位于同一包或任何包中？

我运送了一个 csv 文件，我想将其作为参数注入。
当我使用直接路径时它可以工作：

```
mybundle.data.csv: %kernel.root_dir%/../vendor/mybundle/my-bundle/mybundle/MyBundle/Resources/data/data.csv 
```

这非常冗长且不灵活，因此我正在寻找像这样的解析器：

```
data.csv: "@MyBundle/Resources/data/data.csv" 
```

但这不起作用：

> ... 依赖于不存在的服务“mybundle/resources/data/data.csv”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-08T10:51:14.743

现在支持 yaml 中的 @-escaping

[https://github.com/symfony/symfony/issues/4889](https://github.com/symfony/symfony/issues/4889)

你可以像这样使用它

```
data.csv: "@@MyBundle/Resources/data/data.csv" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T16:19:15.113

首先：在 YAML 服务和参数定义中@也指另一个服务。这就是您的代码不起作用的原因。

基本上你有两种可能。第一个也是简单的方法是在包中使用相对路径`services.yml`并将其附加到 CSV 类中。

例如：

```
# src/Acme/DemoBundle/Resources/config/services.yml
parameters:
    data.csv: "Resources/data/data.csv" 
```

在您要阅读 CSV 文件的课程中：

```
// src/Acme/DemoBundle/Import/ReadCsv.php
...
class ReadCsv
{
    ...
    public function __construct($csvFile)
    {
       $this->csvFile = __DIR__.'/../'.$csvFile; 
    }
    ...
} 
```

另一种可能性是使 CSV 文件的文件名可通过`config.yml`（参见[Symfony2 食谱中的这篇文章](http://symfony.com/doc/2.0/cookbook/bundles/extension.html)）配置，并在您在`AcmeDemoBundleExtension`类中替换的配置值中插入一个特殊的占位符：

```
// src/Acme/DemoBundle/DependencyInjection/AcmeDemoBundleExtension.php
...
public function load(array $configs, ContainerBuilder $container)
{
    ...
    $container->setParameter('acme_demo.csv_file', str_replace('__BUNDLE_DIR__', __DIR__'./.., $config['csv_file']);
}
... 
```

你`config.yml`会看起来像：

```
# app/config/config.yml
acme_demo:
    csv_file: __BUNDLE_DIR__/Resources/data/data.csv 
```

# javascript - 如何在asp.net中将值从客户端传递到服务器端？

> ID：12459195
> 
> 赞同：1
> 
> 时间：2012-09-17T12:30:19.580
> 
> 标签：javascript, asp.net, facebook

如何将下面脚本中的值传递到服务器端

```
// listen for and handle auth.statusChange events
FB.Event.subscribe('auth.statusChange', function(response) {
if (response.authResponse) {
FB.api('/me', function(me) {
document.getElementById('auth-displayname').innerHTML = me.name;
document.getElementById('Email').innerHTML = me.email;
document.getElementById('gender').innerHTML = me.gender;
document.getElementById('birth').innerHTML = me.birthday;
document.getElementById('firstname').innerHTML = me.first_name;
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:38:38.460

客户端上存在 Javascript 变量，因此为了将这些值输入服务器，您需要执行来自客户端的请求。您可能需要一种称为 AJAX 的方法。AJAX 涉及 Javascript 在您的页面背景中向服务器发出请求。您将设置一个需要这些后台请求的 C# 网页。如果您使用 GET 请求，则将变量放在您的 AJAX 请求的查询字符串中到您的新 C# 页面。如果您想使用 POST 请求，那么您将在发布到页面的数据中设置参数。

像 jQuery 这样的库使这种事情变得非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T09:43:38.017

在 webform2.aspx

```
 <script type="text/javascript">
        function LoadValues(me) {
                     {

                        var Email = me.email;
                        var Name = me.name;
                        var Id = me.id;
                        var Dob = me.birthday;
                        var Gender = me.gender;
                        alert(Email)

                        document.getElementById('auth-loggedout').style.display = 'none';
                        document.getElementById('auth-loggedin').style.display = 'block';

                          var data2Send = '{"fbemail": '+Email+', "fbname":'+Name+', "fbid":'+Id+',"fbname":'+Dob+',"fbname":'+Name+' }';
        $.ajax({
            type: "POST",
            url: 'webform2.aspx/Testmethod',
            data: data2Send,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (arg) {console.log(arg) //call successfull
            $("#lbltxt").text(arg);
            },
            error: function (xhr) {
              alert(xhr);  //error occurred
            }
        });

          }
</script> 
```

在 webform2.aspx.cs

```
[System.Web.Services.WebMethod]
    public static string TestMethod(string fbid, string fbemail, string fbsex, string fbdob)
    {

        SqlConnection con = new SqlConnection();
        SqlCommand cmd = new SqlCommand();
        SqlDataReader datareader;

        con = new SqlConnection(".......");
        cmd = new SqlCommand("SpFacebookInfo", con);
        con.Open();
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("@FbId", fbid);
        cmd.Parameters.AddWithValue("@FbEmail", fbemail);
        cmd.Parameters.AddWithValue("@FbSex", fbsex);
        cmd.Parameters.AddWithValue("@FbDob", fbdob);
        datareader = cmd.ExecuteReader();
        datareader.Close();

        return fbemail;

    }

            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:35:35.573

像你一样在隐藏变量中设置值，`document.myform.submit();` 然后转到 Page_Load 并读取变量

# joomla - qualitymart onafterConfirmorder , 下单后执行代码

> ID：12459196
> 
> 赞同：1
> 
> 时间：2012-09-17T12:30:29.350
> 
> 标签：joomla, joomla1.5, virtuemart

德行中是否有类似 onafterConfirmorder 的事件？就像在 joomla onAfterRender,onBeforeRender 事件中一样。我想在订单确认后执行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:15:11.270

也许 Joomla 2 或 3 中的路径不同？在 Joomla 1.5 中没有类似的路径：

> ROOT_PATH\folder_name\administrator\components\com_virtuemart\models\order.php

仅存在以下路径：

> ROOT_PATH\folder_name\administrator\components\com_virtuemart\classes\ps_order.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:48:16.847

更好的是，您必须为此概念创建一个插件。

首先，您需要`ORDER`在 Virtumart 中找到该部分。以下模型文件包含所有订单功能。

```
ROOT_PATH\folder_name\administrator\components\com_virtuemart\models\order.php 
```

在此文件中，您必须找到订单完成的位置。在该部分中，一旦订单完成，您必须触发此插件处理您的功能。

您可以调用该插件中定义的任何插件事件。

```
$dispatcher = JDispatcher::getInstance();
$data       = array($argu1, $argu2);   // any number of arguments you want
return $dispatcher->trigger(onAfterRender, $data); 
```

然后它将触发`onAfterRender`您创建的插件中的事件。

```
<?php
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.plugin.plugin' );

/**
 * Example system plugin
 */
class plgSystemExample extends JPlugin
{
/**
* Constructor.
*
* @access protected
* @param object $subject The object to observe
* @param array   $config  An array that holds the plugin configuration
* @since 1.0
*/
public function __construct( &$subject, $config )
{
parent::__construct( $subject, $config );

// Do some extra initialisation in this constructor if required
}
/**
* Do something onAfterRender
*/
function onAfterRender()
{
}
} 
```

像这样你必须创建你的插件..

一切顺利....

# jenkins - 构建永远不会以詹金斯终止

> ID：12459198
> 
> 赞同：1
> 
> 时间：2012-09-17T12:30:34.760
> 
> 标签：jenkins, automated-tests

我在詹金斯创建工作时遇到问题。在“构建”步骤中，我选择构建“执行 windows 批处理命令”，我想在其中启动浏览器，例如 opera、google chrome 便携版或 firefox 便携版，该命令永远不会终止。[查看屏幕截图](http://i.imgur.com/OsqKS.jpg)

对于 IE、firefox 和 chrome 我没有遇到任何问题如果有人有解决方案。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:32:59.330

你能指望什么？您已经启动了一个显示表单的可执行文件，尽管它在一个永远不会附加控制台会话的会话中。

按照设计，Jenkins 将一直坐在那里，直到可执行文件终止——这通常发生在表单被与其交互的用户关闭时。由于没有 GUI，因此只有在有人使用任务管理器将其杀死时，此过程才能终止。

你到底想达到什么目的？几乎可以肯定有一种合理的方法可以做到这一点。

# c# - 一件物品究竟什么时候被处置？

> ID：12459205
> 
> 赞同：2
> 
> 时间：2012-09-17T12:30:54.323
> 
> 标签：c#, oop

我的程序中有以下代码：

```
//Dialog Form Class

public int Age;

private void goButtonClick(object sender, EventArgs e)
{
     Age = trackBar1.Value;
     Close();
}

//Main Form Class

DialogForm df = new DialogForm();
df.ShowDialog();
df.Dispose();
if(df.Age >= 18)
{
    //do stuff
} 
```

令人惊讶的是，我认为我需要一种访问 df.Age 的方法，因为它会被该`Close`方法处理，但令人惊讶的是，我可以访问这个值。我认为这是垃圾收集器的某种智能，所以我`df.Dispose()`在调用 df.Age 之前添加*只是为了看看会发生什么*，但我仍然可以访问它。所以我糊涂了？为什么会这样？一件物品究竟什么时候被处置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:36:07.473

通常，答案是“当你的代码调用时`.Dispose()`”，这*通常*意味着“当它离开`using`块时”，但是有些代码有额外的东西导致它被处理。例如，在一个winform上，如果你使用`Show()`方法来显示它，那么它会在窗体关闭时被释放。

然而！对于通过 显示的表单`ShowDialog()`，**没有**这样做；毕竟是模态的，所以预期寿命是显而易见的：

```
using(var df = new DialogForm())
{
    df.ShowDialog();
    if(df.Age >= 18)
    {
        //do stuff
    }
} 
```

或更好：

```
int age;
using(var df = new DialogForm())
{
    df.ShowDialog();
    age = df.Age;
}
if(age >= 18)
{
    //do stuff
} 
```

您可能还想检查 的返回值`ShowDialog()`以查看它是否被取消等。

但是要直接回答您的问题：您问题中的表格**永远不会**正确处理。该`IDisposable.Dispose()`方法**永远不会**被调用。

垃圾收集器会在某个时候找到它，并调用*finalizer*，这将调用内置`Dispose(bool)`模式，但这是 winforms 的实现细节，不是正确的处理方式。

另请参阅[MSDN`ShowDialog()`](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)：

> 当窗体显示为模式对话框时，单击关闭按钮（窗体右上角带有 X 的按钮）会导致窗体隐藏并且 DialogResult 属性设置为 DialogResult.Cancel。与非模式表单不同，当用户单击对话框的关闭表单按钮或设置 DialogResult 属性的值时，.NET Framework 不会调用 Close 方法。相反，该表单被隐藏并且可以再次显示而无需创建对话框的新实例。因为显示为对话框的窗体是隐藏的而不是关闭的，所以当您的应用程序不再需要该窗体时，您必须调用该窗体的 Dispose 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:35:17.987

如果您能够调用`df.Age`，这意味着您持有对对象的引用（df 只是一个引用）。这反过来意味着垃圾收集器不会收集它，因此价值仍然存在。

并且`Dispose()`不调用垃圾收集器，也不删除引用。Dispose 适用于您的对象需要显式释放某些资源的情况，并且您公开此方法以便可以调用它（而不是通过 GC）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:35:34.527

这是因为您使用`ShowDialog(..)`呼叫。

在这种情况下`Dispose`，CLR 不会调用表单，以便为您提供一种*至少*从表单中检索对话结果的方法。`Dispose(..)`因此，这是您需要在关闭后特别调用的唯一情况。

有关这方面的更多信息，您可以阅读社区内容[Form.ShowDialog](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.showdialog%28v=vs.90%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:35:04.887

垃圾收集器只会收集没有任何东西引用该对象的内存。因此，在您的情况下，您仍然可以在主窗口中引用对话框，直到引用对话框的方法结束为止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T14:16:12.763

Dispose 没有任何魔法。这只是一个方法调用。

# c# - 如何在 Windows 8 上下载任何类型的文件？

> ID：12459206
> 
> 赞同：0
> 
> 时间：2012-09-17T12:30:58.540
> 
> 标签：c#, windows-8

在 Windows 8 应用程序中，我已经知道如何使用浏览器下载文件。我用过`Windows.System.Launcher.LaunchUriAsync(uri)`。浏览器打开并要求用户保存或打开文件。

但我想将文件下载到 Windows 8 应用程序中的磁盘/存储。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:34:03.560

如果要在后台下载文件。请看[这个](http://code.msdn.microsoft.com/windowsapps/Background-Transfer-Sample-d7833f61)样本。

# database - Postgres 加入 LIKE

> ID：12459207
> 
> 赞同：3
> 
> 时间：2012-09-17T12:30:59.883
> 
> 标签：database, postgresql, postgresql-8.4, postgresql-9.0

在 PostgreSQL 我有一张桌子

```
tbl1
id -- RCODE -- COUNTRY --
1     US/MSR   United states of America
2     GY/LSR   Germany
3     CA/FSA   Canada

tbl2
id -- Name -- CCODE
33    T1      US        
44    Y1      CA       
55    W1      GY 
```

**表可以在 tbl1 上的字段 RCODE 上与 tbl2 上的 CCODE 上的 LIKE 条件连接吗？** 这样我得到的结果为

```
id --NAME-- RCODE -- CCODE--- COUNTRY 
```

我将提供 tbl2 的 id 即）当我给 id 44 时，结果将是

```
id --NAME-- RCODE -- CCODE--- COUNTRY
44   Y1     CA/FSA   CA       Canada 
```

谁能帮我解决这个查询，它是 PostgreSQL

***一件事是RCODE中的前两个字符与表2中的CCODE相同。***

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:37:11.190

```
select tbl2.name, tbl1.rcode, tbl2.ccode, tbl1.country
from tbl1 
  join tbl2 on substring(tbl1.rcode, 1, 2) = tbl2.ccode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-23T05:41:52.363

对于类似的问题，我使用了类似的东西：

```
select
tbl2.id as id,
tbl2.name as NAME,
tbl1.rcode as RCODE,
tbl1.ccode as CCODE,
tbl1.country as COUNTRY
from tbl1, tbl2
where substring(tbl1.rcode, 1, 2) = tbl2.ccode; 
```

子字符串表达式中的数字是子字符串第一个字符的从 1 开始的索引，以及子字符串的长度。

其他字符串运算符，例如 trim()、lower() 和 upper() 也很有用。可用字符串运算符的更完整列表位于：

[http://www.postgresql.org/docs/9.3/static/functions-string.html](http://www.postgresql.org/docs/9.3/static/functions-string.html)

# winapi - Win32 应用程序窗口最终停止在 Windows 7 上绘制

> ID：12459213
> 
> 赞同：6
> 
> 时间：2012-09-17T12:31:25.917
> 
> 标签：winapi, user-interface, windows-7, interface, paint

我有一个用 C++（没有 MFC 或 .NET）编写的大型复杂应用程序。最积极地使用该软件的客户端将在启动它的一个小时左右内进入所有窗口停止绘制的状态。我们收到有关应用程序“挂起”的报告，因为据他们所知，没有任何事情发生。实际上，应用程序正在运行，只是没有显示任何内容。

我尝试了很多不同的东西都无济于事。我没主意了...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T12:40:35.513

你可能已经预感到它是什么——你在第一句话中就给出了它

> ... 大型、复杂的应用程序 ...

听起来您在某处有 GDI 资源泄漏。要确认这一点，请尝试在任务管理器中为您的进程查看 GDI 对象。在某些时候，您的应用程序的大多数 GDI 操作都会失败。

确保正确释放所有手柄。请注意，不同的 GDI 对象需要不同的释放对象的方法。例如`GetDC`被 释放`ReleaseDC`，但`CreateDC`被 释放`DeleteDC`。

这就是为什么建议将 RAII 智能对象（如智能指针）用于 C++ 中的资源管理（其中释放由智能对象管理以减少泄漏和错误的可能性）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T12:57:51.940

我敢打赌，应用程序正在泄漏 GDI 对象，并且当此进程的 GDI 专用空间用尽时，它就无法再绘制自己了。

**您可以通过将GDI Objects**列添加到*Windows 任务管理器*（或任何其他进程管理器，例如*Process Monitor* ）来检查是否是这种情况，并查看该数字是否随时间无限增长。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:43:36.137

您的应用程序实际上可能正遭受被忽略的异常。请参阅[Microsoft 知识库文章 976038](http://support.microsoft.com/kb/976038)。**

# macos - 构建 Mac OS X 包时应该交叉编译哪些二进制架构？

> ID：12459219
> 
> 赞同：1
> 
> 时间：2012-09-17T12:31:51.113
> 
> 标签：macos, x86, cross-compiling

目前，Apple 的本机二进制文件和库以 fat 文件的形式分发，同时支持 i386 和 x86_64 架构。SDK（Xcode 4.4 w/命令行工具）不再支持交叉编译powerpc二进制文件，所以我认为可以安全地忽略它们，但似乎没有任何关于英特尔架构的具体指南或建议支持。

那么，当在 OS X 上编译分发代码时，人们仍然为 i386 架构进行交叉编译吗？还是 x86_64 二进制文件是当今唯一值得关注的架构？

# jquery - jQuery 移动 ajax 请求在正文中写入“0”

> ID：12459232
> 
> 赞同：1
> 
> 时间：2012-09-17T12:32:56.663
> 
> 标签：jquery, ajax, ruby-on-rails-3, jquery-mobile

我有一个非常简单的 jQuery Mobile 应用程序，现在让我很头疼。它是使用 'jquery_mobile_rails' gem 用 Ruby on Rails 编写的。

当我使用普通链接切换页面时，jQuery 会在我的正文中添加一个“0”。如果我强制链接不使用 ajax 一切都很好。

我的浏览器 javascript 控制台中没有错误，现在我完全不知道是什么导致了这个错误。这是我的第一个 jQuery Mobile 应用程序，所以也许这只是一个非常常见的错误，但我已经尝试了各种各样的事情： - 更改我的视图中的内容 - 使用我自己下载的 jQuery Mobile 而不是从 gem 下载的

非常感谢任何提示:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:48:36.777

啊，我又傻又瞎——现在似乎已经解决了。我所有的页脚都有相同的 data-id="foo1"

@ryan - 写了一段很长的代码/html 供您查看，但在点击更新按钮之前找到了答案。

# php - 如何检查 $_POST 中传递的输入是否为空？

> ID：12459234
> 
> 赞同：0
> 
> 时间：2012-09-17T12:33:02.110
> 
> 标签：php

> **可能重复：**
> [检查 $_POST-value 是否为空](https://stackoverflow.com/questions/9154719/check-whether-post-value-is-empty)

我正在使用此代码来验证传递的输入是否不为空，但是当我在输入中使用“空白”时这会失败。它确实通过了 empty() 检查。

```
if (empty($_POST['r_user'])) {
    $data['error'] = 'Please pick a username to continue.';
    $data['errorID'] = 'r_user';
} 
```

在 PHP 中检查空字符串的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:37:43.557

您需要`trim function`在检查变量之前使用。

```
$trimUser= trim ($_POST['r_user']); 
```

现在执行空方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:35:52.667

根据[PHP 文档](http://php.net/manual/en/function.empty.php)建议，您的代码将变为：

```
if (trim($_POST['r_user']) == false) {
    $data['error'] = 'Please pick a username to continue.';
    $data['errorID'] = 'r_user';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:34:19.953

您可以 [`trim()`](http://php.net/manual/en/function.trim.php)从字符串的开头和结尾删除空格

工作示例

```
 $test = "      ";
      if(trim($test)){
         if (empty($test))
             echo "true";
         else
             echo "false";
      } 
```

live : 在[键盘上检查](http://codepad.org/MAlHMslu)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:34:04.857

您可以在这里很好地使用[修剪](http://au.php.net/manual/en/function.trim.php)，它会删除前后的空白：

```
if (empty(trim($_POST['r_user']))) { // Incorrect! 
```

编辑，哇，今天学到了新东西。

但是，这将起作用：

```
$var=trim($_POST['r_user']);
if (empty($var)) { 
```

工作示例：

```
 <?php 
    $var='    ';
    $var=trim($var);
    if(empty($var))
        echo "Yay";
    else
        echo "Nay!";

 ?> 
```

输出：

> 耶

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:36:15.247

```
if ( empty( trim( $_POST['r_user'] ))) { 
```

// 错误的！给出一个错误 - 学到了一些新东西 :) // 正确的方法应该是：

```
$myvar = trim( $_POST['r_user'] ); 

if ( empty( $myvar )) { 
```

或者

```
if ( trim( $_POST['r_user'] ) != '' ) { 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T12:36:20.170

您可以使用：

```
$var = '';
if (array_key_exists('r_user', $_POST)) {
  $var = trim($_POST['r_user']);
} 
if (empty($var)) {
   // do some stuffs
} 
```

反而。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-17T12:45:44.900

```
if(isset($_POST['r_user'])){
           // ur code
           } 
```

# android - Android部署速度慢，如何改善？

> ID：12459237
> 
> 赞同：1
> 
> 时间：2012-09-17T12:33:08.117
> 
> 标签：android, testing

我正在开发一个android应用程序，因为有很多资产，生成的apk接近10M。现在将它部署到模拟器上非常慢，经常需要我 3 或 4 分钟，这是不可接受的。

我使用[Robolectric](http://pivotal.github.com/robolectric)测试了大部分逻辑，速度非常快。但有时我仍然需要使用模拟器（例如调整 UI），这浪费了我很多时间。

有没有办法让它快点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:36:59.233

这也是我的经验。用软件模拟器调试很慢。

在调试模式下使用真实设备要快得多。但是，您可能会遇到其他限制

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:05:55.090

好吧，既然有人建议将 Android x86 作为替代测试模拟器，我也会介绍我最喜欢的。这可能不是每个人的选择，但对我来说它是完美的！使用[Bluestacks 播放器](http://bluestacks.com/)。它运行Android 2.3.4，非常流畅和快速。有时甚至比普通设备更快。唯一的缩减是，您可以只在 API 级别 10 上测试应用程序，并且只在一个屏幕尺寸上，但它非常适合测试它是否工作。只需`adb`通过运行连接播放器

```
adb connect 127.0.0.1 
```

编译后立即安装。非常令人印象深刻，考虑到我的计算机硬件相当普通（双核，4 GB RAM）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:40:37.827

实际上，我绝对从不使用模拟器，这在每种情况下都太慢了。

我直接在真实设备上测试和调试我的应用程序（并在我必须对某些屏幕进行像素检查时使用 ADB 屏幕截图功能......）

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T12:46:17.710

我发现 VirtualBox 上的 android-x86 映像的部署速度比在同一台机器上运行的模拟器快很多倍，有时甚至比 USB 设备还要快。

* * *

**编辑**

请使用[vmlite 提供的 android 镜像](http://www.vmlite.com/index.php?option=com_content&view=article&id=69&Itemid=178)，而不是 android-x86 提供的镜像，并参考这个重要问题：[如何更改 vmlite android 的屏幕大小？](https://stackoverflow.com/questions/12493599/how-to-change-the-screen-size-of-vmlite-android)

# java - 在我的 Tomcat Servlet 中实现 Websockets？

> ID：12459239
> 
> 赞同：6
> 
> 时间：2012-09-17T12:33:14.337
> 
> 标签：java, tomcat, servlets, websocket

我正在尝试在我已经工作的 servlet 中使用 websockets。我的问题是我使用“writer”类将 HTML 发布到浏览器上，但我找不到类似的 WebSockets 类。

我的 servlet 如下所示：

```
@WebServlet("/TestServlet")

public class TestServlet extends HttpServlet {
private List<ISort> sortierListe = new ArrayList<ISort>();
private File file1;
private PrintWriter writer2;
private boolean sortFinished;
boolean bSubmitForFilenamePressedCopy;
BufferedReader in;
// private String sEingabe;
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public TestServlet() {
    super();    
    this.initSortierverfahren();
}

private void initSortierverfahren() {
    sortierListe.add(new BubbleSort());
    sortierListe.add(new QuickSort());
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
 *      response)
 */
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

[...]

PrintWriter writer = response.getWriter();
    writer2 = writer;
    writer.println("<html>");
    writer.println("<head><title>Text Sortieren!</title>");
    writer.println("</head>");

    writer.println("<body marginwidth='40' leftmargin='40' bgcolor='#E5E5E5'>");

    writer.println("<table bgcolor='#FFFFFF' height='100%' width='57%' border='0' cellpadding=10>");
    writer.println("<tr height='10%'>");
    writer.println("
[...] 
```

代码太长，无法发布所有内容，但 Servlet 基本上创建了一个表单，我可以在其中输入 .txt 文件的路径。然后，txt 文件将通过冒泡排序或快速排序进行排序。

我的问题是：如何在 WebSocket 中使用此代码而不用 javascript 重写所有内容？我认为只是一些基本的帮助会帮助我很多。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:24:50.317

首先，如果你想使用来自 tomcat 的 websockets，你应该从相应的基类 WebSocketServlet 扩展。

其次，我认为在您的情况下使用 websocket 不值得。Websockets 适用于需要实时交互的应用程序。你的显然不需要它。

如果您仍然想这样做，只需创建一些简单的 javascript 即可将您的 html 写入正文。与以下内容一致：

```
websocket = new WebSocket(wsUri); 
websocket.onmessage = function(evt) { 
  document.body.innerHtml += evt.data
}; 
```

但正如我所说，我认为这样的代码没有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-30T12:21:54.473

Before you make move from normal servlet to websocket there are few things keep in mind.

1.  Use latest apache tomcat version. Plder version won't support websockets. (I used version 7.0.42 in my case)
2.  You can't simply replace your Servlet with WebSocket. Purpose of both is totally different. Google it out for more details.

This **[sample code for WebSocket](https://gist.github.com/chitan/3063774)** provides server side as well as client side sample code. You should refer it to get started with.

# php - 使用php读取xml节点的属性

> ID：12459240
> 
> 赞同：1
> 
> 时间：2012-09-17T12:33:14.403
> 
> 标签：php, xml, xml-parsing, simplexml

我正在尝试使用简单的 xml 阅读器从该文件中读取 xml 节点的属性

```
<songs>
<song title="On Mercury" artist="Red Hot Chili Peppers" path="/red-hot-chili-peppers/on-mercury.mp3" />
<song title="Universally Speaking" artist="Red Hot Chili Peppers" path="/red-hot-chili-peppers/universally-speaking.mp3" />
</songs> 
```

我用那个代码来阅读它，但它给了我 xml 解析错误

```
<?php
$xml = simplexml_load_file("playlist.xml") 
       or die("Error: Cannot create object");

foreach($xml->children() as $data){
      echo $data->song['title'];
      echo "<br />";

}

?> 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:06:37.647

您不需要同时调用`->children()`和`->song`。第一个为您提供特定节点的所有子节点，而不考虑标签名称，第二个为您提供标签名称为“song”的特定节点的所有子节点。

尝试：

```
foreach($xml->song as $song){
    echo $song['title'];
    echo "<br />";
} 
```

这相当于：

```
foreach($xml->children() as $data) {
    if ( $data->getName() == 'song' ) {
        echo $data['title'];
        echo "<br />";
    }
} 
```

# php - 如何在wordpress中获取数据然后回显？

> ID：12459241
> 
> 赞同：0
> 
> 时间：2012-09-17T12:33:14.980
> 
> 标签：php, wordpress, get, fetch

我是wordpress的新手。我不知道从表中获取/获取数据并回显的语法。

请帮助我。

并告诉我使用 mysql 在 php 中获取和回显的语法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:35:01.453

使用`wpdb`类：

```
$myrows = $wpdb->get_results( "SELECT id, name FROM mytable" );
var_export($myrows); 
```

参考[Wordpres.org](http://codex.wordpress.org/Class_Reference/wpdb)

```
$row = $wpdb->get_row("SELECT post_content name FROM bu_posts where ID='56'");
echo $row->post_content; 
```

# c++ - 在 C++ 中导出和导入 dll 接口不起作用

> ID：12459242
> 
> 赞同：0
> 
> 时间：2012-09-17T12:33:17.723
> 
> 标签：c++, winapi, visual-c++, dll

> **可能重复：**
> [通过 C++ 接口导出整个类](https://stackoverflow.com/questions/12455852/export-entire-class-through-c-interface)

从[本](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL#CppMatureApproach)教程开始，我尝试使用 2 个项目（一个 .dll 构建器和一个 .exe 构建器）来做我自己的 VS 解决方案，这里是 .dll 项目标头：libheader.h

```
#pragma once

#ifdef SHREDLIB_EXPORTS
#define SHREDAPI __declspec(dllexport)

#else
#define SHREDAPI __declspec(dllimport)

#endif

struct IShred
{
    virtual int GetStringSize(char*) = 0;
    virtual void Release() = 0;
};

// Handle type. In C++ language the iterface type is used.
typedef IShred* SHREDHANDLE;

#ifdef __cplusplus
#   define EXTERN_C     extern "C"
#else
#   define EXTERN_C
#endif // __cplusplus

EXTERN_C
SHREDAPI 
SHREDHANDLE 
WINAPI 
GetShred(void); 
```

libheader.cpp

```
#include libheader.h
class IShredLib: public IShred {
    int GetStringSize(char*);
    void Release();
};

int IShredLib::GetStringSize(char* s)
{
    return strlen(s);
}
void IShredLib::Release()
{
    delete this;
}
#pragma comment(linker, "/export:GetShred=_GetShred@0")
SHREDAPI SHREDHANDLE APIENTRY
GetShred()
{
    return new IShredLib;
} 
```

这在 main.cpp exe 项目中：

```
#include "libheader.h"

#include <conio.h>
#include <stdio.h>
#include <iostream>
using namespace std;

int main(int argc, char* argv[])
{
    IShred* itf = ::GetShred();

    _getch();
    return 0;
} 
```

现在为什么我会得到这个？ **错误 1 ​​错误 LNK2001：无法解析的外部符号 __imp__GetShred@0** 我还将 SHREDLIB_EXPORTS 定义为 VS .dll 项目属性中定义的 c++ 预处理器。

# ruby-on-rails - Rails 3：如果params [：something] .blank，则Text_field_tag默认值？

> ID：12459247
> 
> 赞同：1
> 
> 时间：2012-09-17T12:33:25.870
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, params

如何做这样的事情：

```
 = f.input_field :age,
                  :collection => 18..60,
                  :id => 'age',
                  :selected => params[:age].blank? or "20" 
```

以上不起作用。*如果该属性没有*可用的参数，我希望能够设置默认值。

任何聪明的方法来做到这一点！

编辑1：完整形式：

```
 = simple_form_for  :people,  :url => request.fullpath, :method => :get,  :html => { :class => 'form-search' } do |f|
    #container_search_small.form-search

      = f.input_field :age,
                      :collection => 18..60,
                      :id => 'age',
                      :selected => params[:people][:age_from] || "20"

      = f.submit "Go »" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:40:32.747

您正在使用从您正在构建表单的对象中获取值的助手。

因此，在您的控制器中，您应该预设对象上的值。

```
def some_action
  @people = People.new
  @people.age = params[:age] || 20
end 
```

然后在表单中，删除该`:selected`选项，它应该没问题。确保为以下内容构建表单`@people`：

```
= simple_form_for  @people,  :url => request.fullpath, :method => :get,  :html => { :class => 'form-search' } do |f|
  #container_search_small.form-search

    = f.input_field :age,
                  :collection => 18..60,
                  :id => 'age'

    = f.submit "Go »" 
```

# .net - 如何使用 NHibernate 转义冒号 (:)？

> ID：12459255
> 
> 赞同：1
> 
> 时间：2012-09-17T12:33:57.647
> 
> 标签：.net, nhibernate

我们正在尝试执行一组 SQL 命令；但是，冒号 (:) 一直被解释为参数占位符。在 NHibernate 中使用 CreateSQLQuery() 方法执行文字 SQL 时是否可以转义冒号 (:)？

我查看了 Java 的 Hibernate 的文档，并且有一些方法可以转义该符号；但我无法为 NHibernate 找到类似的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:32:09.427

根据 NHibernate 文档和一些报告的 Jira 问题，`:`目前不支持转义 a。

# ant - 如何在 ant 脚本中拦截 ivy 依赖项名称

> ID：12459261
> 
> 赞同：1
> 
> 时间：2012-09-17T12:34:26.540
> 
> 标签：ant, ivy

在我的 ant 脚本中，我想截取 ivy 依赖项名称，以便我可以在脚本中使用这些名称。原因是依赖项名称并不总是提前知道。ivy.xml 文件会根据用户选择的依赖项动态更新，并且构建脚本必须使用这些依赖项。

有没有办法使用 ivy:retrieve 拦截 ivy 依赖项名称？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:47:30.487

我们的一个项目正在使用一种解决方法，您可以在其中定义`ivy-tokens.xml`，其中包含预先未知的项目的标记，然后构建脚本将此文件复制到`ivy.xml`，替换标记，然后才启动 Ivy 相关任务。

# windows - 从 shell 或脚本设置 Windows 进程权限

> ID：12459262
> 
> 赞同：2
> 
> 时间：2012-09-17T12:34:28.533
> 
> 标签：windows, scripting, cmd

我很幸运在我的机器上有一些默认情况下我无法杀死的进程 - 任务管理器声称“访问被拒绝”。由于我具有管理员访问权限，因此我*可以在*[Process Explorer](http://technet.microsoft.com/de-de/sysinternals/bb896653.aspx)中通过修改它们的权限并将“完全控制”授予 Administrators 组来 终止这些进程，然后再尝试终止它们。

我想在脚本中自动执行此操作，最好在标准 CMD 中，如有必要，使用 PowerShell 或 .NET 脚本。谁能指出我必要的调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T15:17:47.913

*添加了 npocmaka 的评论作为答案。*

使用以下语句以管理员身份终止进程：

```
runas /user:Administrator taskkill /im processName* /f 
```

# c# - 将 XML 嵌套到 DataTable

> ID：12459263
> 
> 赞同：1
> 
> 时间：2012-09-17T12:34:31.140
> 
> 标签：c#, xml, datatable, nested, zendesk

我有以下 XML：

```
<tickets>
     <ticket>
          <subject>ABC</subject>
          <entries-field>
               <entry-field>
                    <field-id>12345</field-id>
                    <value>New</value>
               </entry-field>
          <entries-field>
     <ticket>
     <ticket>
          <subject>DEF</subject>
          <entries-field>
               <entry-field>
                    <field-id>67890</field-id>
                    <value>category_cc</value>
               </entry-field>
               <entry-field>
                    <field-id>12345</field-id>
                    <value>Pending</value>
               </entry-field>
          <entries-field>
     <ticket>
     <ticket>
          <subject>GHI</subject>
     <ticket>
</tickets> 
```

我需要将其转换为 C# 数据表，如下所示：

```
Subject          Status
------------------------
ABC              New
DEF              Pending
GHI 
```

我尝试了很多方法，但没有运气。如果有人能给出一个好主意，请不胜感激。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:41:38.520

假设您使用的真实 xml 没有像上面那样损坏

```
XDocument xDoc = XDocument.Parse(xml);
var result = xDoc.Descendants("ticket")
                 .Select(n => new
                    {
                        Subject = n.Element("subject").Value,
                        Status = (string)n.Descendants("value").LastOrDefault()
                    })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:41:45.493

这是一个想法：

1.  解析 XML 文件并为每个`ticket`迭代`subject`获取`value`每个`<field-id>12345</field-id>`

2.  `subject`使用as 键和值填充字典中的所有数据`value`，如果找不到，请将其留空

# javascript - JSLint：什么是边缘？

> ID：12459264
> 
> 赞同：0
> 
> 时间：2012-09-17T12:34:32.497
> 
> 标签：javascript, parsing, jslint

我刚刚浏览了 JSLint 的源代码。在语法分析器的树中，一些标记具有`edge`属性。JSLint 中的 edge 属性是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:41:51.410

这些是[抽象语法分析树](https://en.wikipedia.org/wiki/Abstract_syntax_tree)中的边缘。不是节点本身，而是连接节点的元素。

例如，在 if/else 分支中，条件是一个节点，if 分支是另一个节点，else 分支是树中的第三个节点，边缘被注释以标记条件和代码分支。

# playframework - Java中的Akka远程处理：远程没有结果

> ID：12459265
> 
> 赞同：0
> 
> 时间：2012-09-17T12:34:32.123
> 
> 标签：playframework, playframework-2.0, akka

我在 java (1.6) 中运行 akka remoting (2.0.2) 的示例示例，但没有从远程获取结果。看来我的本地节点无法连接到远程笔记。

LocalNodeApplication 代码在本地系统上，RemoteNodeApplication 代码在远程系统上。

请参考代码：

本地节点 -

```
public class LocalNodeApplication extends Controller {

public static Result process(String msg) throws Exception {

    ActorSystem _system = ActorSystem.create("LocalNodeApp", ConfigFactory.load().getConfig("LocalSys"));
    ActorRef localActor = _system.actorOf(new Props(LocalActor.class));

    localActor.tell("Hello");

    Thread.sleep(5000);
    _system.shutdown();

    return ok("success");
} 
```

}

本地演员代码：

```
public class LocalActor extends UntypedActor {
LoggingAdapter log = Logging.getLogger(getContext().system(), this);
Timeout timeout = new Timeout(Duration.parse("5 seconds"));

ActorRef remoteActor;

@Override
public void preStart() {
    //Get a reference to the remote actor

    remoteActor = getContext().actorFor("akka://RemoteNodeApp@192.168.0.85:9002/user/remoteActor");
}

@Override
public void onReceive(Object message) throws Exception {
    Future<Object> future = Patterns.ask(remoteActor, message.toString(), timeout);

    String result = (String) Await.result(future, timeout.duration());

    log.info("Message received from Server -> {}", result);

    /*remoteActor.tell(message.toString());*/
} 
```

}

本地系统配置：

```
LocalSys {
akka {
    actor {
        provider = "akka.remote.RemoteActorRefProvider"
        deployment {
            /remoteActor {
                remote = "akka://RemoteNodeApp@192.168.0.85:9002"
            }
        }
    }
} 
```

}

* * *

远程节点代码 -

远程节点应用

```
public class RemoteNodeApplication implements Bootable {

final ActorSystem system = ActorSystem.create("RemoteNodeApp", ConfigFactory.load().getConfig("RemoteSys"));

public void shutdown() {
    system.shutdown();
}

public void startup() {     
    system.actorOf(new Props(RemoteActor.class), "remoteActor");
} 
```

}

远程演员：

```
public class RemoteActor extends UntypedActor {
@Override
public void onReceive(Object message) throws Exception {
    if (message instanceof String) {
        // Get reference to the message sender and reply back
        getSender().tell(message + " got something");
    }
} 
```

}

远程系统配置 -

```
RemoteSys {
akka {
    actor {
        provider = "akka.remote.RemoteActorRefProvider"
    }
    remote {
        untrusted-mode = on
        transport = "akka.remote.netty.NettyRemoteTransport"
        netty {
            hostname = "192.168.0.85"
            port = 9002
        }
    }
} 
```

}

* * *

我开始在本地节点上播放 "run 9000" 并在远程开始播放 "run 9002" 。

我得到以下提到的异常：

```
[INFO] [09/17/2012 17:42:52.206] [play-akka.actor.actions-dispatcher-1] [ActorSystem(LocalNodeApp)] REMOTE: RemoteServerStarted@akka://LocalNodeApp@127.0.0.1:2552
[INFO] [09/17/2012 17:42:52.406] [LocalNodeApp-akka.actor.default-dispatcher-4] [ActorSystem(LocalNodeApp)] REMOTE: RemoteClientStarted@akka://RemoteNodeApp@192.168.0.85:9002
[INFO] [09/17/2012 17:42:52.438] [LocalNodeApp-akka.actor.default-dispatcher-1] [ActorSystem(LocalNodeApp)] REMOTE: RemoteClientShutdown@akka://RemoteNodeApp@192.168.0.85:9002
[ERROR] [09/17/2012 17:42:57.281] [LocalNodeApp-akka.actor.default-dispatcher-4] [akka://LocalNodeApp/user/$a] Timed out
    akka.pattern.AskTimeoutException: Timed out
        at akka.dispatch.DefaultPromise.result(Future.scala:875)
        at akka.dispatch.Await$.result(Future.scala:74)
        at akka.dispatch.Await.result(Future.scala)
        at com.localNodeApp.LocalActor.onReceive(LocalActor.java:30)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:154)
        at akka.actor.UntypedActor$$anonfun$receive$1.apply(UntypedActor.scala:153)
        at akka.actor.Actor$class.apply(Actor.scala:318)
        at akka.actor.UntypedActor.apply(UntypedActor.scala:93)
        at akka.actor.ActorCell.invoke(ActorCell.scala:626)
        at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197)
        at akka.dispatch.Mailbox.run(Mailbox.scala:179)
        at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:516)
        at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
        at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
        at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
        at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104)
Caused by: akka.pattern.AskTimeoutException: Timed out
        at akka.pattern.PromiseActorRef$$anonfun$1.apply$mcV$sp(AskSupport.scala:274)
        at akka.actor.DefaultScheduler$$anon$6$$anon$7.run(Scheduler.scala:183)
        at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94)
        at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381)
        ... 4 more
 [INFO] [09/17/2012 17:42:57.318] [LocalNodeApp-akka.actor.default-dispatcher-4] [ActorSystem(LocalNodeApp)] REMOTE: RemoteServerShutdown@akka://LocalNodeApp@127.0.0.1:2552 
```

* * *

当我在本地系统上为本地节点和远程节点运行相同的示例时（对于将 IP 地址更改为本地系统），在控制台上得到以下提到的行：

```
[INFO] [09/17/2012 17:42:52.206] [play-akka.actor.actions-dispatcher-1] [ActorSystem(LocalNodeApp)] REMOTE: RemoteServerStarted@akka://LocalNodeApp@127.0.0.1:2552
[INFO] [09/17/2012 17:42:52.406] [LocalNodeApp-akka.actor.default-dispatcher-4] [ActorSystem(LocalNodeApp)] REMOTE: RemoteClientStarted@akka://RemoteNodeApp@192.168.0.85:9002
[INFO] [09/17/2012 17:42:52.438] [LocalNodeApp-akka.actor.default-dispatcher-1] [ActorSystem(LocalNodeApp)] REMOTE: RemoteClientShutdown@akka://RemoteNodeApp@192.168.0.85:9002
[INFO] [09/17/2012 17:42:57.318] [LocalNodeApp-akka.actor.default-dispatcher-4] [ActorSystem(LocalNodeApp)] REMOTE: RemoteServerShutdown@akka://LocalNodeApp@127.0.0.1:2552 
```

请指导我。我是否按照正确的步骤进行 akka 远程处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:54:11.367

远程应用程序需要作为 jar 部署在 akka 微内核中。远程应用程序启动后，您可以运行本地应用程序以连接到远程应用程序。由[write2munish回答](https://github.com/write2munish/Akka-Essentials)

# graph - 表示一个图，其中节点也是权重

> ID：12459268
> 
> 赞同：0
> 
> 时间：2012-09-17T12:34:48.180
> 
> 标签：graph

考虑一个在每个节点上而不是在两个节点之间都有权重的图。因此，前往一个节点的成本将是该节点的权重。

1-我们如何表示这个图？

2- 这种类型的图是否有最小生成路径算法（或者我们可以修改现有算法）？

例如，考虑一个矩阵。什么路径，当从某个数字到另一个数字时，会产生最小和？（请记住，图表必须是有向的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:56:19.110

1.  如果不想调整现有算法并使用面向边缘的方法，可以将节点权重转换为边缘权重。对于节点 v 的每个传入边，将 v 的权重保存到边上。这就是代表。

2.  好吧，使用 1 的方法。现在，使用 MST 等众所周知的算法很容易做到这一点。

您还可以根据需要表示图形并在节点处保持权重。该算法根本没有使用`Weight w = edge.weight();`它会使用`Weight w = edge.target().weight()` 简单的完成。不需要大的调整。

如果必须使用邻接矩阵，则需要第二个具有节点权重的数组，并且在邻接矩阵中只有 0 - 表示没有边或 1 - 表示边​​。

希望有帮助

# android - twitter无法在phonegap android childbrowser上打开

> ID：12459269
> 
> 赞同：1
> 
> 时间：2012-09-17T12:34:49.550
> 
> 标签：android, cordova, twitter, childbrowser

我正在创建一个应用程序，我需要在其中打开一个 twiiter 提要页面。我使用了一个带有cordova cordova-1.7.0.js 链接的chilbrowser 插件，我在childbrowser 上使用它来打开Twitter 提要链接。 [https://mobile.twitter.com/pixtv](https://mobile.twitter.com/pixtv) 我在同一个儿童浏览器中尝试了不同的链接，它们工作正常，只是这个 twitter 没有打开。

**谢谢并恭祝安康**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T12:54:28.133

尝试打开一个意图关注页面，如下所示：http: [//twitter.com/intent/user?screen_name=pixtv](http://twitter.com/intent/user?screen_name=pixtv)

请记住在 config.xml 文件中将此页面列入白名单，如下所示：

```
<gap:plugin name="ChildBrowser" />
<access origin="*" />
<access origin="http://twitter.com/intent/user?screen_name=pixtv"/> 
```

访问源上没有句号，URL 上没有 htpps。希望这会有所帮助，K。

# php - ajax加载PHP文件后javascript命令不执行

> ID：12459274
> 
> 赞同：1
> 
> 时间：2012-09-17T12:34:59.593
> 
> 标签：php, javascript, ajax

我有一个由 AJAX 执行的 PHP 脚本，PHP 脚本加载一切正常，除了我用来关闭 div 的实际 PHP 文件中的 js 脚本（如果 PHP 文件不是通过 AJAX 运行，所有脚本都可以正常工作）。

这是 ajax 没有在 PHP 文件中运行的脚本

```
 echo "<script> closeOne('" . $postid . "'); </script>"; 
```

关闭 div 的 JS 脚本包含在页面的标题中

这是我正在使用的 AJAX 脚本

```
<script type="text/javascript">
function mainload(str)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest(str);
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        document.getElementById("loadmain").innerHTML=xmlhttp.responseText;
        }
      }
    xmlhttp.open("GET","mainload.php?page="+str,true);
    xmlhttp.send();
}
</script> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:50:34.080

如果将 script 元素添加到 DOM 元素的 innerHTML 中，JS 不会立即运行。因为刚刚添加了该脚本元素。

并且该标签根本不会被解析。

理想情况下，您应该以 JSON 包装函数的形式发送响应。

您可以从 PHP 页面发送这样的输出。

```
echo "(function(){ closeOne('" . $postid . "'); })"; 
```

作为回应，您可以使用 eval 评估包含该函数的字符串。

```
 codeToExecute = eval(xmlhttp.responseText); 
```

然后调用函数，

```
 codeToExecute(); 
```

**注意**：从服务器发送函数并使用 eval 直接执行它可能是一个安全问题。小心并更好地使用一些 JS 库函数将字符串评估为 JSON 对象。

jQuery、prototype 和 sencha 的库中将有 String-To-JSON 转换器。更好地使用它们，或者如果浏览器支持，JSON.parse 也是一个不错的选择。

但我希望你对这个概念很清楚。

**或者**，您可以只以 JSON 格式从服务器发送帖子 ID，然后在响应中调用 closeOne，如下所示：

在 PHP 中，

```
echo "{post_id:".$postid."}"; 
```

当回应来临时，

```
responseObject =  eval("("+xmlhttp.responseText+")");

closeOne(responseObject.post_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:45:55.587

默认不执行ajax响应中的JS。您必须解析和识别 JS 语句，然后使用 js 的 eval 函数运行它们。将此代码作为示例来启动您自己的代码：

```
var sc=xmlhttp.responseText;            
sc=sc.replace(/[\n\r\t\v\u00A0\u2028\u2029]{1,}/gm, ''); //Remove all types of White Space
sc=sc.match(/<.*?script.*?>.*?<\/.*?script.*>/gm); //divide into array, all the script tags 
```

然后您将循环每个“sc”并在循环中运行以下命令：

```
abc=loop_var.replace(/<.*?script.*?>(.*?)<\/script>/gm, "$1"); //remove script/open close tags and get JS only
eval(abc); 
```

# iphone - 从联系人获取多个地址？(ABRecordRef)

> ID：12459278
> 
> 赞同：0
> 
> 时间：2012-09-17T12:35:02.673
> 
> 标签：iphone, objective-c, ipad, contacts, abrecord

我正在尝试从我的联系人中获取单个选定个人的地址。

我正在使用`ABPeoplePickerNavigationController`这个委托方法在选择一个人时获取诸如电子邮件和姓名之类的数据：

`- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person`

但是我怎样才能得到一个人的地址（或者一个人的多个地址应该有多个）？我需要单独获取每个地址并将其分成几部分，例如地址行 1、2、城市、州、邮政编码、国家/地区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:47:04.890

这里你如何获得这个人的地址属性。

```
 - (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)
          peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person 
          property:(ABPropertyID)property
          identifier:(ABMultiValueIdentifier)identifier{

           NSString *string = (NSString*)ABRecordCopyValue(person, AddressPropertyHere);
} 
```

地址属性常量列表：

```
const ABPropertyID kABPersonAddressProperty;
const CFStringRef kABPersonAddressStreetKey;
const CFStringRef kABPersonAddressCityKey;
const CFStringRef kABPersonAddressStateKey;
const CFStringRef kABPersonAddressZIPKey;
const CFStringRef kABPersonAddressCountryKey;
const CFStringRef kABPersonAddressCountryCodeKey; 
```

# javascript - 用于验证文本框的 Jquery 代码无法正常工作

> ID：12459280
> 
> 赞同：0
> 
> 时间：2012-09-17T12:35:04.857
> 
> 标签：javascript, jquery, html, textbox

我正在验证文本框，以便它们只能包含字母、数字和这些特殊字符：` 、 - 。'~

我为此使用了 Jquery 'key-down' 事件。如果用户输入了无效字符，我会阻止它出现在文本框中。为了仅启用波浪号并禁用其他特殊字符，我应该检测是否按住了 shift 键。我为此使用了一个布尔变量。

问题是它允许输入其他特殊字符，如！、$、。它没有`isShiftPressed == true`进入`ValidateKeyDown`. 我在里面放了一个警报，但没有执行。

所以这是我的代码：

```
$.fn.ValidateKeyDown = function () {
    return this.each(function () {
        $(this).keydown(function (e) {
            if (e.shiftKey) {
                isShiftPressed = true;
                return;
            }
            else if (isShiftPressed == false) {
                var n = e.keyCode;
                if (!((n == 8)                      // backspace
                        || (n == 9)                 // Tab
                        || (n == 46)                // delete
                        || (n >= 35 && n <= 40)     // arrow keys/home/end
                        || (n >= 65 && n <= 90)     // alphabets
                        || (n >= 48 && n <= 57)     // numbers on keyboard
                        || (n >= 96 && n <= 105)     // number on keypad
                        || (n == 109)                       //(- on Num keys)
                        || (n == 189) || (n == 190) || (n == 222) || (n == 192)             //hypen,period,apostrophe,backtick
                        )
                        ) {
                    e.preventDefault();     // Prevent character input
                    return false;
                }
            }
            else if (isShiftPressed == true) {
                var n = e.keyCode;
                if (n != 192) {
                    e.preventDefault();     // Prevent character input
                    return false;
                }
            }
            return true;
        });
    });
};
$.fn.ValidateKeyUp = function () {
    return this.each(function () {
        $(this).keyup(function (e) {
            if (e.shiftKey) {
                isShiftPressed = false;
            }
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:09:58.990

e.shiftKey 本身会告诉您是否按下了 shift，以便您可以直接使用它。您不需要单独的变量来跟踪它。

```
    $.fn.ValidateKeyDown = 函数 () {
        返回 this.each(function () {
            如果（！e.shiftKey）{
                ...
            }
            别的 {
                ...
            }
    }

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:21:49.767

我注意到 e.shiftKey 仅在按键时返回 true，因此 isShiftPressed 始终为 false。试试这个

```
$.fn.ValidateInput = function () {
return this.each(function () {

    $(this).keydown(function (e) {
        var n = e.keyCode;

        if (n == 16) {
            isShiftPressed = true;
            return;
        }

        if (!isShiftPressed) {
            if (!((n == 8)                      // backspace
                    || (n == 9)                 // Tab
                    || (n == 46)                // delete
                    || (n >= 35 && n <= 40)     // arrow keys/home/end
                    || (n >= 65 && n <= 90)     // alphabets
                    || (n >= 48 && n <= 57)     // numbers on keyboard
                    || (n >= 96 && n <= 105)     // number on keypad
                    || (n == 109)                       //(- on Num keys)
                    || (n == 189) || (n == 190) || (n == 222) || (n == 192)             //hypen,period,apostrophe,backtick
                    )) {
                e.preventDefault();     // Prevent character input
                return false;
            }
        }
        else if (isShiftPressed) {
            if (n != 192) {
                e.preventDefault();     // Prevent character input
                return false;
            }
        }
        return true;
    })
    .keyup(function (e) {
        if (e.keyCode == 16) {
            isShiftPressed = false;
        }
    });
});
}; 
```

注意：我还结合了 ValidateKeyup 和 ValidateKeydown，但这无关紧要。

# c - 了解与现有 C 程序的编译和链接

> ID：12459287
> 
> 赞同：0
> 
> 时间：2012-09-17T12:35:31.720
> 
> 标签：c, linker, building

我为其中一个 AVR32 32 位微处理器继承了一个稍微复杂的 C 程序。

但是，我*没有*关于如何编译它的信息。我一直在尝试为它整理一个make-file，但一直没有成功。希望有人能告诉我哪里出错了。

* * *

基本上，我的项目结构如下所示：

```
/
ControllerR3.c     # This is the main program file
    /FRAMEWORK
        /DRIVERS
            /ADC
                adc.c
                adc.h
            /GPIO
                gpio.c
                gpio.h
            {another 6 hardware drivers}
        /SERVICES
            /DELAY
                delay.c
                delay.h 
```

基本上，`ControllerR3.c`包括`adc.h`、`gpio.h`等，并调用在各种头文件中原型化的函数。各种`FRAMEWORK`头文件中的实际功能实际上是在`.c`文件中定义的。

所有`.h`文件都包含在包含保护中：

```
#ifndef _USART_H_
#define _USART_H_
{snip header file contents}
#endif  // _USART_H_ 
```

现在，据我了解，我必须将各种`.c`文件编译成 object ( `.o`) 文件，然后调用链接器将所有 object 文件合并到最终的可执行文件中（在这种情况下，它是一个`.elf`文件）。
因此，我写了一个小makefile：

```
CC      = avr32-gcc

CFLAGS  = -mpart=uc3a0512 -O1 -ffunction-sections -masm-addr-pseudos -g3 -Wall -c -std=gnu99 
COMP_INC =  -I"./FRAMEWORK/UTILS" \
            -I"./FRAMEWORK/UTILS/PREPROCESSOR"

LIB_INC =   -I"./FRAMEWORK/UTILS/LIBS/NEWLIB_ADDONS/INCLUDE" \
            -I"./FRAMEWORK/SERVICES/DELAY" \
            -I"./FRAMEWORK/DRIVERS/USART" \
            -I"./FRAMEWORK/DRIVERS/TC" \
            -I"./FRAMEWORK/DRIVERS/SPI" \
            -I"./FRAMEWORK/DRIVERS/PWM" \
            -I"./FRAMEWORK/DRIVERS/PM" \
            -I"./FRAMEWORK/DRIVERS/INTC" \
            -I"./FRAMEWORK/DRIVERS/GPIO" \
            -I"./FRAMEWORK/DRIVERS/FLASHC" \
            -I"./FRAMEWORK/DRIVERS/CPU/CYCLE_COUNTER" \
            -I"./FRAMEWORK/BOARDS" \
            -I"./FRAMEWORK/DRIVERS/ADC" 

DRIVER_PATH = ./FRAMEWORK/DRIVERS

all: libraries main

main:
    $(CC) $(CFLAGS) $(COMP_INC) $(LIB_INC) -o"Debug/$@.o" "ControllerR3.c"
    $(CC) "Debug/adc.o" "Debug/flashc.o" "Debug/gpio.o" "Debug/intc.o" "Debug/pm.o" "Debug/pwm.o" "Debug/tc.o" "Debug/usart.o" "Debug/spi.o" "Debug/main.o" "Debug/delay.o" \
        -o Debug/CookerControlR3.elf

libraries: adc.c flashc.c gpio.c intc.c pm.c pwm.c spi.c tc.c usart.c delay.c

adc.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/ADC/$@"

flashc.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/FLASHC/$@"

gpio.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/GPIO/$@"

intc.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/INTC/$@"

pm.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/PM/$@"

pwm.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/PWM/$@"

spi.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/SPI/$@"

tc.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/TC/$@"

usart.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" "$(DRIVER_PATH)/USART/$@"

delay.c: 
    $(CC) $(CFLAGS) $(COMP_INC) -o"Debug/$*.o" -I"FRAMEWORK/DRIVERS/CPU/CYCLE_COUNTER" "FRAMEWORK/SERVICES/DELAY/$@" 
```

这成功构建了所有各种目标文件，然后在链接阶段失败：

```
C:\[snip - private]/./FRAMEWORK/DRIVERS/GPIO/gpio.h:507: multiple definition of `gpio_local_clr_gpio_open_drain_pin'
Debug/gpio.o:C:\[snip - private]/./FRAMEWORK/DRIVERS/GPIO/gpio.h:507: first defined here
Debug/main.o: In function `gpio_local_tgl_gpio_open_drain_pin':
C:\[snip - private]/./FRAMEWORK/DRIVERS/GPIO/gpio.h:525: multiple definition of `gpio_local_tgl_gpio_open_drain_pin'
Debug/gpio.o:C:\[snip - private]/./FRAMEWORK/DRIVERS/GPIO/gpio.h:525: first defined here
Debug/main.o: In function `usart_reset_status':
C:\[snip - private]/./FRAMEWORK/DRIVERS/USART/usart.h:409: multiple definition of `usart_reset_status'
Debug/usart.o:C:\[snip - private]/./FRAMEWORK/DRIVERS/USART/usart.h:409: first defined here
Debug/main.o: In function `usart_parity_error':
[snip a hundred or so lines] 
```

很明显，我有多个定义的问题。

在这一点上，我有点过头了。我在 C 开发方面没有太多经验，只是将 makefile 写到现在需要大量阅读的地步。

是什么导致了我在这里遇到的多个定义问题？我需要对生成文件进行哪些更改以防止这种情况发生？

我知道这个项目在过去是成功构建的，因为我们有一个实际运行它的硬件设备。但是，我需要进行一些更改，因此不再接受仅使用现有的编译版本。

现有版本是由一个不再可用的外部承包商构建的，所以我真的不能问他们是如何让它工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:01:30.953

看起来您在头文件中实现了一个功能。当您编译 object1 和 object2（比如 main.o 和 gpio.o）时，您的代码在两个对象中都重复了，并且它们不能链接在一起。

在这种情况下，我通常将函数的声明留在头文件中，并将其实现移动到一个目标代码中（不管是哪个）。

你能确认在“gpio.h:507”你有实现，而不仅仅是函数的签名吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:55:15.787

好吧，事实证明我使用的 IDE 太新了。

我在正确的 IDE 中打开了项目（在本例中，是基于 eclipse 的旧版 Atmel avr32 studio），它以某种方式自动推断出结构，并将所有内容正确组合在一起。

无论如何，虽然我解决问题并没有解决问题，但我将这个问题标记为已回答。我已经花了太多时间试图弄清楚日食在做什么。

# c++ - 如何在c中使用qsort比较C++字符串？

> ID：12459290
> 
> 赞同：4
> 
> 时间：2012-09-17T12:35:36.473
> 
> 标签：c++, string, qsort

我试图学习 c-library 的 qsort 功能`stdlib`。这甚至在`c++`. 但我不明白如何使用它们对`c++`字符串进行排序。我不确定`sizeof()`操作员的参数应该是什么以及我的`compare_str`代码是否正确。我试过这段代码：

```
 #include<iostream>
    #include<cstdlib>
    using namespace std;
    #include<string>

    int compare_str( const void *a, const void *b){
       string  obj = (const char*)a;
       string obj1 = (const char*)b;
       return obj.compare(obj1);
    }
    int main(){
        string obj[4] = {"fine", "ppoq", "tri", "get"};
        qsort(obj, 4, sizeof(obj[0].length()), compare_str);
        for( int i=0; i<4; i++)
            cout<<obj[i]<<endl;
        return 0;
    } 
```

我的输出是：

```
ppoq
tri
get
fine 
```

我无法找出错误。请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T12:42:37.947

您不能也不得`qsort`在 s 数组上使用`std::string`。元素必须是**普通类型**，而字符串不是，因此行为未定义。从 25.5/4（“qsort”）开始：

> 除非指向的数组中的对象`base`是普通类型，否则行为是未定义的。

原因是周围`qsort`的`memcpy`数组元素，这对于一般的 C++ 对象是不可能的（除非它们足够微不足道）。

* * *

如果你确实有一个平凡的类型，你可以使用这个通用的 qsorter-comarator （但当然这是一个糟糕的想法，并且内联`std::sort`总是更可取的）：

```
template <typename T>
int qsort_comp(void const * pa, void const * pb)
{
    static_assert<std::is_trivial<T>::value, "Can only use qsort with trivial type!");

    T const & a = *static_cast<T const *>(pa);
    T const & b = *static_cast<T const *>(pb);

    if (a < b)  { return -1; }
    if (b < a)  { return +1; }
    return 0;
} 
```

*采用：* `T arr[N]; qsort(arr, N, sizeof *arr, qsort_comp<T>);`

*不要使用这个。改为使用`std::sort`。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T12:41:55.953

最好是面向 C++ 并为您的数组使用 std::sort ：

```
#include <iostream>
#include <string>
#include <iterator>
#include <algorithm>

int main() {

   std::string obj[4] = {"fine", "ppoq", "tri", "get"};
   std::sort(obj, obj + 4);
   std::copy(obj, obj + 4, std::ostream_iterator<std::string>(std::cout, "\n"));
} 
```

AFAIK -`std::sort`使用快速排序。

[更新] 见评论，std::sort 并不总是纯粹的快速排序。

[更新2]

如果您想学习 qsort - 更改`std::string`为`const char*`基于`strcmp`. 请记住， qsort 将指针传递给数组中的元素 - 所以取消引用`const void*`get `const char*`。看：

```
#include <stdlib.h>
#include <string.h>

int compare_cstr(const void* c1, const void* c2) 
{ 
   return strcmp(*(const char**)(c1), *(const char**)(c2)); 
}

int main() {

   const char* obj[4] = {"fine", "ppoq", "tri", "get"};
   qsort(obj, 4, sizeof(obj[0]), compare_cstr);
   std::copy(obj, obj + 4, std::ostream_iterator<const char*>(std::cout, "\n"));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T12:43:07.573

问题是您给 qsort 一个 C++ 字符串数组。在您的比较函数中，您似乎排除了 C 字符串，因为您将它们转换为 (const char*)。

另外，qsort 的第三个参数，数据的大小，你实际上给出了错误的值。sizeof(obj[0].length()) 会导致sizeof(size_t)，这显然是错误的。sizeof(obj[0]) 会更正确，但请记住 qsort 不会调用字符串的复制构造函数，这可能会导致问题。

我建议不要将 qsort 与 C++ 字符串一起使用。

请参阅 PiotrNycz 提供的答案以获得正确的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:47:21.357

您应该使用`std::sort`C++ 标准库（在`<algorithm>`头文件中）提供的模板函数。默认情况下，`std::sort`使用小于比较运算符对元素进行排序（`std::string`已实现`operator<`）。如果需要指定排序条件（例如，不区分大小写的字符串比较），`std::sort`允许指定排序函数对象。

例子：

```
#include <string>
#include <algorithm>

bool caseInsensitiveOrdering(const std::string& lhs, const std::string& rhs)
{
   // return true if lowercase lhs is less than lowercase rhs
}

int main()
{
    std::string names[] = {"chuck", "amy", "bob", "donna"};
    size_t nameCount = sizeof(names) / sizeof(names[0]);

    // Sort using built-in operator<
    std::sort(names, names + nameCount);

    // Sort using comparison function
    std::sort(names, names + nameCount, &caseInsensitiveOrdering);
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T12:43:36.987

您的错误在于`qsort`. 预期的是成员的大小，在您的情况下，它是一个字符串。所以你想使用：

```
qsort(obj, 4, sizeof(string), compare_str); 
```

但是，您需要使用指向字符串的指针，而不是字符串本身。然后，代码应如下所示：

```
int compare_str( const void *a, const void *b){
   const string*  obj = (const string*)a;
   const string* obj1 = (const string*)b;
   return obj->compare(*obj1);
}

// ...

string* obj[4] = { new string("fine"), new string("ppoq"),
                   new string("tri"), new string("get") };
qsort(obj, 4, sizeof(string*), compare_str);
// And delete the objects
for(int i = 0 ; i < 4 ; ++i) delete obj[i]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-17T12:44:42.673

为我工作：

```
#include<iostream>
#include<cstdlib>
using namespace std;
#include<string>

int compare_str( const void *a, const void *b){
   string* obj = (string*)a;
   string* obj1 = (string*)b;
   return obj->compare(*obj1);
}
int main(){
    string obj[4] = {"fine", "ppoq", "tri", "get"};
    qsort(obj, 4, sizeof(string), compare_str);
    for( int i=0; i<4; i++)
        cout<<obj[i]<<endl;
    return 0;
} 
```

# vbscript - VB 脚本 - 不确定如何为 81 个可能的结果编写代码

> ID：12459291
> 
> 赞同：0
> 
> 时间：2012-09-17T12:35:47.727
> 
> 标签：vbscript, word-2003

首先感谢您查看问题，非常感谢您的帮助。

我的问题：我有 9 个字符串变量，如果存在值，我希望这些变量显示在“汇总”字符串中以显示内容。所以我期望我需要多个 If 语句来涵盖所有可能的结果。

例如，如果变量 a= "12/11/11" 和 b ="" c="21/12/12 d= "12/03/11" e ="" 和 f="11/12/13

我有一个显示这些值的 roundUp 字符串变量，但前提是它们有内容。所以我需要照顾所有的组合。最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:39:27.697

如果我正确理解您的问题，您想要检查 9 个变量的状态，然后将它们全部“汇总”到一个字符串变量中输出，在这种情况下，您想要连接输出变量。像下面这样的东西应该可以工作（并且可能有一个更优雅的解决方案）

昏暗的综述

综述=“”

If a="12/11/11" Then Roundup = Roundup + " A value mapped"
End if

If b="" Then Roundup = Roundup + " B 值被困" End If

.. 等等...

# android - 当两个或多个 editTextField 使用相同的事件侦听器时获取当前活动的 editTextField？

> ID：12459297
> 
> 赞同：0
> 
> 时间：2012-09-17T12:36:05.137
> 
> 标签：android, android-edittext

我有两个editTextField，它们都附加了同一个侦听器。我如何在听众中找出点击了哪个？

```
inputStart = (EditText)findViewById(R.id.editText3);
inputStart.setOnClickListener(TimePickerButtonOnClickListener);

inputEnd = (EditText)findViewById(R.id.editText4);
inputEnd.setOnClickListener(TimePickerButtonOnClickListener);

private Button.OnClickListener TimePickerButtonOnClickListener = new Button.OnClickListener() {         
     public void onClick(View v) {       }
}; 
```

我已经检查过了，一个可能的解决方案是在这个[问题](https://stackoverflow.com/questions/5224659/using-same-onclick-listener-with-more-than-one-view)中，但我正在寻找任何类似的属性`EditText gotEditField = (EditText)v.targetEditField;`

有没有这样的财产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:40:34.083

使用**switch case**， in `onClick()`with 参数`View v`using`v.getId()`

```
private Button.OnClickListener TimePickerButtonOnClickListener = new Button.OnClickListener()
{           
  public void onClick(View v) { 
       switch(v.getId){
         case R.id.editText3:
         break;
         .
         .
         .
       }
}; 
```

您还可以使用 Type Casting参数获取**EditText的对象。**`View v`

像`EditText editText = (EditText)v;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:39:38.053

```
public void onClick(View v) 
{
    int id= v.getId();

    switch (id) 
    {
        case R.id.editText3:  
        break;

        case R.id.editText4:    
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:41:12.720

`View v`来自您`onCLick`方法中的参数的是被点击的视图。

```
EditText gotEditField = (EditText) v; 
```

# css - 一个元素上的 CSS 事件，改变另一个

> ID：12459301
> 
> 赞同：3
> 
> 时间：2012-09-17T12:36:19.927
> 
> 标签：css, hover, element

如何使用 CSS 更改元素以及另一个元素上的事件？

```
E.g. <div id="one"> ....., <div id="two">....

<style>
#one:hover
{
changing the visibility of #two...
}
</style> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:41:05.900

在您的情况下，您希望更改的元素位于您悬停的元素*之后*，这意味着您具有如下结构：

```
<div id="one"></div>
<!--you could have some elements between them-->
<div id="two"></div> 
```

或喜欢：

```
<div id="one">
    <!--maybe some elements-->
        <div id="two"></div>
    <!---->
</div> 
```

在第一种情况下（`#one`并且`#two`是*兄弟姐妹*，即它们处于同一级别 = 具有相同的父节点），您可以使用[**通用兄弟组合**](http://www.w3.org/TR/selectors/#general-sibling-combinators)子( `~`)，如下所示：

```
#one:hover ~ #two { /* style changes */ } 
```

[](http://jsfiddle.net/thebabydino/UpXfS/1/)**用于HTML 中何时`#one`和`#two`是兄弟姐妹和`#one`之前[**的情况的演示。**](http://jsfiddle.net/thebabydino/UpXfS/1/)`#two`**

 **在第二种情况下（`#two`是 的后代*）*`#one`，您使用：

```
#one:hover #two { /* style changes */ } 
```

[**DEMO**](http://jsfiddle.net/thebabydino/UpXfS/3/)适用于 when`#two`是`#one`.

但是，如果您希望更改 HTML 中*之前* `#one`的元素，那么目前（[意味着将来可能会更改](http://dev.w3.org/csswg/selectors4/)）仅靠 CSS 是不可能的（如果您想知道原因，那么[本文](http://snook.ca/archives/html_and_css/css-parent-selectors)提供了解释） .

* * *

但在这种情况下，HTML 中的 when`#two`是 before `#one`，您可以使用 JavaScript 来完成。例如，如果`#two`最初的不透明度是`0`，那么您可以`1`在悬停时`#one`使用：

```
var one = document.getElementById('one'),
    two = document.getElementById('two');
one.addEventListener('mouseover', function(){
    two.style.opacity = 1;
}, true);
one.addEventListener('mouseout', function(){
    two.style.opacity = 0;
}, true); 
```

[**演示**](http://jsfiddle.net/thebabydino/UpXfS/4/)

如果你使用像 jQuery 这样的库，那么它会变得更容易：

```
$('#one').hover(function(){
    $('#two').css({'opacity': 1})},
function(){
    $('#two').css({'opacity': 0})
});​​ 
```

[**演示**](http://jsfiddle.net/thebabydino/UpXfS/5/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:39:22.373

使用`:hover`选择器和`~`General Sibling 选择器的组合：

```
div.margin:hover ~.margin2
{
    background: #00f;
} 
```

将鼠标悬停在 div 2 上，您会看到另一个 div 发生变化。

为此，div 必须是兄弟姐妹（具有相同的父元素）。

[http://jsfiddle.net/Kyle_Sevenoaks/mmcRp/](http://jsfiddle.net/Kyle_Sevenoaks/mmcRp/)**

# stored-procedures - Sybase - 获取调用给定过程的过程的名称

> ID：12459302
> 
> 赞同：0
> 
> 时间：2012-09-17T12:36:25.223
> 
> 标签：stored-procedures, sybase

我正在寻找与`sp_depends`. `sp_depends`给出当前对象正在使用的对象的名称.

我想以相反的方式获取信息，即所有对象（在我的情况下为 procs）调用给定的 proc ？

### 笔记

我正在使用 Sybase 12.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:47:44.033

我希望它会帮助你：

```
declare @Proc varchar(30)

select @Proc='ProcName'

select sod.name 
from sysobjects so
join sysdepends sd  on sd.id = so.id
join sysobjects sod on sod.id = sd.depid
where so.name = @Proc
and sod.type = 'P' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-05-05T17:59:36.390

试试这个查询，我修复了上一个答案的查询，它获取存储过程而不是调用给定的存储过程：

```
declare @Proc varchar(30)

select @Proc='procedure name'

select so.name
 from sysobjects so
 join sysdepends sd  on sd.id = so.id
 join sysobjects sod on sod.id = sd.depid
 where sod.name = @Proc
 and sod.type = 'P'; 
```

# c# - 使用 /unsafe 编译的可能缺点

> ID：12459303
> 
> 赞同：4
> 
> 时间：2012-09-17T12:36:26.230
> 
> 标签：c#, visual-studio, .net-assembly, unsafe

我必须用 /unsafe 编译我的程序集才能使用指针。我想知道使用 /unsafe 编译时的差异。请假设没有编程错误，例如指针的无效使用等。如果我使用不安全的编译程序集，我会失去一些性能吗？有什么记忆缺陷吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:45:07.383

好吧，使用“不安全”代码基本上可以提高性能，直接访问内存和指针 ariphmetics 。使用它的通常情况是在专注于高性能的 .NET 代码中，例如`3D`渲染内核引擎。在代码中编写这样的东西`100%` `.NET`会使应用程序太慢，所以指针来拯救，特别是当我们需要处理库之间的“桥梁”时（`C/C++`比如`OpenGL`）

长话短说：如果您编写了良好的非托管代码，您肯定会从中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:41:03.527

不安全的代码可能会通过删除数组边界检查来提高应用程序的性能。

使用不安全的代码会带来安全和稳定性风险。

链接：http: [//msdn.microsoft.com/en-us/library/chfa2zb8.aspx](http://msdn.microsoft.com/en-us/library/chfa2zb8.aspx)

# iphone - 在 viewDidUnload 中将属性设置为 nil 的意义/需要

> ID：12459305
> 
> 赞同：0
> 
> 时间：2012-09-17T12:36:36.057
> 
> 标签：iphone, memory-management, properties, null, significance

*   在这两个方面（即使用 ARC 或不使用 ARC ）将属性设置为`nil`in有什么意义？`viewDidUnload`
*   仅在以下情况下才重要`IBOulets`吗？我们不需要将其他属性（不是`IBOulets`）设置为`nil`吗？
*   如果我不这样做会有什么后果？我之前没有设置它们`nil`，也没有观察到任何后果。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:18:47.317

在 viewDidUnload 中将 IBOutlets 设置为 nil 会告诉编译器在内存警告时释放出口。因为在内存警告时 ..viewDidUnload 和视图控制器的 didReceiveMemoryWarning 会被调用..通常在 ViewDidUnload 中 IBOutlets 设置为 nil 并且在 didReceiveMemoryWarning 属性或对象被释放.因此在这种情况下，内存被重新获得，因此您的应用程序可以继续运行，否则由于内存不足，连续池会导致崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:49:37.147

在网上阅读了很多文章并在 stackoverflow.com 上解决了类似的问题后，我得出了以下理解：

*   `viewDidUnload`在内存不足的情况下由编译器调用。

*   我们应该在方法中将这些属性设置为 nil，这些属性正在重新实例化`viewDidLoad`。几乎所有 IBOutlet 组件都属于该类别。所以最好在方法中将 IBOutlets 声明为 nil。不这样做会导致连续池化，并且将来可能会由于内存不足而导致崩溃（应用程序继续运行的时间）。

*   我还读到我们不应该将 NSString 之类的实例归零（可能导致崩溃），根据我的经验，这是正确的。但原因我不知道。

*   它与ARC无关。将属性设置为 nil 仅意味着该属性不再保留任何内存位置的引用。

每次我对它有更多了解时，我都会继续更新这个答案。

谢谢。

# sencha-touch-2 - 煎茶触摸重复任务

> ID：12459307
> 
> 赞同：0
> 
> 时间：2012-09-17T12:36:43.733
> 
> 标签：sencha-touch-2

我想将面板从下向上移动。顺利。为此，我尝试了这段代码。

```
Ext.define("mathmania.view.Main", {
extend: 'Ext.Panel',
requries: [
    'Ext.util.DelayedTask'
],
xtype: 'panel',
config: {
    autodestory: true,
    border: 1,
    html: 'test panel',
    bottom: 0,
    centered: true,
    padding: 10,
    margin: '2%',
    width: '95%',
    listeners: {
        painted: 'countdown'
    }
},
countdown: function()
{
    var task = Ext.create('Ext.util.DelayedTask', function() {
        this.setBottom(this.getBottom + 5);
        task.delay(100);
    });
    task.delay(0);
} 
```

但每次它只工作一次而不是多次作为重复任务？为了顺利移动这个浮动面板，有没有更好的方法或者我在这段代码中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:38:14.700

我曾尝试使用 do-while 循环，Panel 现在移动了两次，但目标仍未实现。我想我在循环中缺少某个地方。
希望这会有所帮助。

```
 Ext.define("mathmania.view.Main", {
        extend: 'Ext.Panel',
        requries: [
            'Ext.util.DelayedTask'
        ],
        xtype: 'panel',
        config: {
            id: 'main1',
            autodestory: true,
            border: 1,
            html: 'test panel',
            bottom: 0,
            centered: true,
            padding: 10,
            margin: '2%',
            width: '95%',
            listeners: {
                painted: 'countdown'
            }
        },
        countdown: function()
        {
            var a=Ext.getCmp('main1');
            var i=0;
            var j=20;
            do{
              var task = Ext.create('Ext.util.DelayedTask', function() {
              a.setBottom(a.getBottom() + 10);
                task.delay(500);
                    });
               task.delay(1000);
               i++;
            }while(i<j)
        }
     }); 
```

# jquery - ajax 发布错误 - 相同的代码在一台服务器上工作，但在另一台服务器上不起作用

> ID：12459315
> 
> 赞同：1
> 
> 时间：2012-09-17T12:37:12.390
> 
> 标签：jquery, ajax, json

当我在一行中使用 ajax json 发布数据时

```
<p>test</p> 
```

一切都很好，但是当我在两行中发布数据时：

```
<p>test</p>
<p>test</p> 
```

我收到错误 403

使用 FireBug，我看到了以下信息：对于一行：sastojci=%3Cp%3Efasdfasd%3C%2Fp%3E

对于两行：sastojci=%3Cp%3Efasdfasd%3C%2Fp%3E%0A%3Cp%3Efasdfasd%3C%2Fp%3E

这是 json 的代码：//#sastojci 是 textarea

```
$('#update').submit(function(){

$sastojci = $('#sastojci').val();

$.ajax({
    type: "POST",
    dataType: "json",
    data: { sastojci : $sastojci},

    url: 'updatedata.php',
    success: function(data) {

        alert(data.poruka);

    },
    error: function (data, textStatus, jqXHR) { 
        alert(data.status); 

    } 

});

return false;
}); 
```

* * *

这是我的问题的更新：

如果我使用 textarea 的输入，错误又是 403

如果我发布：

```
<p>test</p>p>test</p> 
```

一切都很好。

如果我发布：

```
 <p>test</p><p>test</p> 
```

错误是 403 禁止：您无权访问此服务器上的 updatedata.php。

唯一的区别是“<”？？？我不知道这里发生了什么！！！

# html - 为什么我的 CSS 边框会到页面末尾？

> ID：12459316
> 
> 赞同：2
> 
> 时间：2012-09-17T12:37:13.950
> 
> 标签：html, css, border, center

我一直在用 codecademy 学习 HTML/CSS，我的 CSS 边框有这个问题。我需要我的 h1 以边框为中心，但我不希望该边框到达页面的末尾。这是我的代码

```
<h1 style="color:#0034ff; padding:20px; border-style:ridge; border-width:5px; text-align:center;">HTML Testing Page</h1> 
```

我计划很快制作一个单独的样式表，我只是将 CSS 放在 HTML 文档中进行测试。此边框到达页面的末尾，如果我放置 display:inline 或 display:inline-block 我的文本不再居中。我怎样才能在不牺牲居中文本的情况下使边框紧挨着文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:38:48.953

添加`display:inline-block`

h1 标签是块元素，所以它占据了整个空间。

演示[http://jsfiddle.net/rm3Fk/](http://jsfiddle.net/rm3Fk/)

如果您希望 h1 标签与页面居中对齐，则可以使用`display:table; margin:0 auto`

演示[http://jsfiddle.net/rm3Fk/17/](http://jsfiddle.net/rm3Fk/17/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:38:54.290

嗨，现在习惯于 `display:inline-block;`在您的**h1 标签中**

```
<h1 style="color:#0034ff; padding:20px; border-style:ridge; border-width:5px;display:inline-block; text-align:center;">HTML Testing Page</h1> 
```

所有标题元素都是**块**元素

***[演示](http://tinkerbin.com/r5C5mDtx)***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:51:12.153

事实上，这`h1`是一个[块元素](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)，但我认为你正在寻找这个：

```
h1 {
    color:#0034ff;
    padding:20px;
    border-style:ridge;
    border-width:5px;
    margin: 0 auto; /* <--- */
    display: table; /* <--- */ 
}​ 
```

这将使标题居中而不占用父级的整个宽度。

[http://jsfiddle.net/rm3Fk/11/](http://jsfiddle.net/rm3Fk/11/)

# c# - 面临使用 System.Web.Routing 的问题

> ID：12459321
> 
> 赞同：1
> 
> 时间：2012-09-17T12:37:29.903
> 
> 标签：c#, javascript, asp.net, web, url-routing

我在我的网站上使用幻灯片。当我禁用网络路由时，它工作正常。当我在 aspx 页面上启用 Web 路由时，幻灯片工作停止。我猜想启用 Web 路由后 javascript 不起作用。

```
 protected void Application_Start(object sender, EventArgs e)
 {
       RegisterRoutes(RouteTable.Routes);
 }

  public static void RegisterRoutes(RouteCollection routes)
 {
    routes.MapPageRoute("CategoryRoute", "Category/{sCatId}", "~/Category.aspx",true);
    routes.MapPageRoute("SubCategoryRoute", "SubCategory/{catid}",   "~/SubCategory.aspx");
 } 
```

当我使用它时路由工作正常，但工作幻灯片停止。下面我粘贴幻灯片代码。

```
<div id="slider">
            <div id="items">
                <div>
                    <div style="width: 100%; margin: 0 0; height: 250px">
                        <img src="http://www.yepme.com/slider/1.jpg" alt="" width="100%" height="100%" />
                    </div>
                </div>
                <div>
                    <div style="width: 100%; margin: 0 0; height: 250px">
                        <img src="http://www.yepme.com/slider/2.jpg" alt="" width="100%" height="100%" />
                    </div>
                </div>
                <div>
                    <div style="width: 100%; margin: 0 0; height: 250px;">
                        <img src="http://www.yepme.com/slider/3.jpg" alt="" width="100%" height="100%" />
                    </div>
                </div>
                <div>
                    <div style="width: 100%; margin: 0 0; height: 250px;">
                        <img src="http://www.yepme.com/slider/4.jpg" alt="" width="100%" height="100%" />
                    </div>
                </div>

            </div>
</div> 
```

不知道是什么问题？如何解决。

我也用过

```
<img src= '<%= Page.ResolveUrl("http://www.yepme.com/slider/4.jpg") %>' alt="" width="100%" height="100%" /> 
```

但这对我不起作用。伙计们帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:28:43.000

您的 jpeg 文件是通过自定义处理程序传递的吗？

如果是这样，您是否尝试为幻灯片添加一些特定的忽略？就像是 ：

```
public static void RegisterRoutes(RouteCollection routes)
{

 routes.Ignore("{*sliderimages}", new { sliderimages =@"slider/\d+\.jpg"});

 routes.MapPageRoute("CategoryRoute", "Category/{sCatId}", "~/Category.aspx",true);
 routes.MapPageRoute("SubCategoryRoute", "SubCategory/{catid}",   "~/SubCategory.aspx");
} 
```

# chef-infra - Chef Knife Rackspace OpenSSL::SSL::SSLSocket 错误

> ID：12459326
> 
> 赞同：1
> 
> 时间：2012-09-17T12:38:04.613
> 
> 标签：chef-infra, rackspace-cloud

我正在尝试通过我的刀工具访问我的托管云实例。每当我执行刀架空间命令时，在列出响应之前，以下行会多次输出到我的控制台：“您的 OpenSSL::SSL::SSLSocket 不支持 Excon nonblock”

有没有其他人遇到过这个问题，或者有人知道为什么或如何解决这个问题吗？

我遇到的第二个问题是，当我做刀“机架空间服务器列表”时，即使我在云中有一个活动服务器，返回的列表也是空的。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T23:42:48.703

从[这个页面](https://github.com/geemus/excon/issues/13)：

有两种解决方法。如果您可以管理，第一选择比第二选择更好。

1) 将 ca_path 修复为证书路径：`Excon.ssl_ca_path = '/path/to/certs'`

2）关闭对等验证：`Excon.ssl_verify_peer = false`

两者都适用于您的`knife.rb`文件。

您还可以查看：[此 README](https://github.com/opscode/knife-rackspace/blob/master/README.rdoc)和[此 wiki 条目](http://wiki.opscode.com/display/chef/Launch+Cloud+Instances+with+Knife)

# oracle11g - 从 toad 中选择 Oracle 表而不指定模式

> ID：12459331
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:20.190
> 
> 标签：oracle11g

嗨，伙计们，我正在运行一个 Oracle 数据库，我必须在选择表之前编写模式（所有者）名称。我发现这是非常不必要的，尤其是当我以表所有者身份登录时：

```
select * from MUNGAI.Employees; 
```

当我实际上以用户 MUNGAI 身份登录时，与创建表的人相同。我希望能够选择：

```
select * from Empployees; 
```

从这里我得到了 Toad 上的错误....在 SQLDEVELOPER 上我没有得到任何错误，我想使用 TOAD

```
ORA-00942: table or view does not exist 
```

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:41:22.893

> *在选择表之前，我必须编写架构（所有者）名称。*

不，你不必。你为什么这么认为？你甚至尝试过吗？

当您以表的所有者身份登录时，您不必指定架构。

> *关于如何实现这一点的任何想法？*

是的，简单地写

```
select * from Employees; 
```

再次重申：**当**且仅当^(1)) ) - 您以`MUNGAI`.

^(1）抛开公共同义词之类的东西)

# c# - 在c#中删除字符串的一部分（多次出现）

> ID：12459332
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:22.917
> 
> 标签：c#, regex, string

我正在使用 StreamReader 读取 HTML 文件。我想删除以 . 开头`@*`和结尾的字符串的一部分`*@`。可能有多次出现，我想将它们全部删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:44:27.647

使用正则表达式，如：

```
string input; // string containing data to be replaced
Regex regex = new Regex("[@][*].*?[*][@]", RegexOptions.Multiline);
string replaced = regex.Replace(input, string.Empty); 
```

这会找到所有以开头`@*`和结尾`*@`的字符串，并将它们替换为空字符串，从而有效地删除它们。

请注意，这需要将整个文件作为字符串加载。更好的解决方案可能是创建一个简单的状态机，它读取一个流并将其复制到另一个流中，直到`@*`找到字符串，然后停止复制到另一个字符串，直到`*@`找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:29:24.090

更新*akton*正则表达式：

```
Regex regex = new Regex(@"@\*(?:[^*]+|\*[^@])*\*@"); 
```

如果我们使用`"[@][*].*[*][@]"`那么 next 将无法正常工作

```
"@* That was 2 *@  THIS WILL BE DELETED TOO!  @* 2\. *@" 
```

作为奖金`(?: )`用于删除内部回点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:41:48.620

`@\*.*?\*@`用空字符串替换所有匹配项。

```
str = Regex.Replace(str, @"@\*.*?\*@", "", RegexOptions.Singleline); 
```

# java - 使用 Spring MVC 和自行实现的拦截器强制下载文件会产生一个奇怪的问题

> ID：12459334
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:28.883
> 
> 标签：java, spring-mvc, httpresponse, interceptor, force-download

我所有的控制器都扩展了以下抽象类：

```
public abstract class AbstractController {

    public HttpServletRequest request;
    public HttpServletResponse response;
    public ModelMap model;

} 
```

此外，我实现了以下拦截器：

```
public class HttpRequestInterceptor implements HandlerInterceptor {

    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws ServletException {
        if (handler instanceof AbstractController) {
            AbstractController controller = (AbstractController) handler;
            controller.request = request;
            controller.response = response;
            controller.model = new ModelMap();
        }
        return true;
    }

    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) {
        if (handler instanceof AbstractController && modelAndView != null) {
            AbstractController controller = (AbstractController) handler;
            modelAndView.addAllObjects(controller.model);
        }
    }

    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
    }

} 
```

这是我发现的改进代码分解的解决方案，因为您不需要在控制器中传递`request`、 the`response`和`model`as 方法参数。该解决方案工作正常，直到我发现这个问题：

```
public class HomeController extends AbstractController {

    @RequestMapping
    public void download1() {
        // use the parent attribute response
        File file = new File(MY_FILE_PATH);
        InputStream in = new BufferedInputStream(new FileInputStream(file));
        ServletOutputStream out = response.getOutputStream();
        IOUtils.copy(in, out);
        response.flushBuffer();
    }

    @RequestMapping
    public void download2(HttpServletResponse response) {
        // use the response passed as parameter
        File file = new File(MY_FILE_PATH);
        InputStream in = new BufferedInputStream(new FileInputStream(file));
        ServletOutputStream out = response.getOutputStream();
        IOUtils.copy(in, out);
        response.flushBuffer();
    }

} 
```

上述两种方法都使浏览器下载文件，但是`download1`一种生成了一个空文件，而`download2`生成了应有的原始文件。知道为什么吗？

感谢调试器，我注意到在`postHandle`拦截器的方法中，该`download2`方法生成了一个`modelAndView`which equals `null`，而该方法生成了`download1`一个实例化的。这应该对这个问题意味着什么，但我找不到什么。

`response`当作为控制器方法的参数传递时如何获得实例化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:02:45.443

不要这样做：

```
public abstract class AbstractController {

    public HttpServletRequest request;
    public HttpServletResponse response;
    public ModelMap model;

} 
```

控制器中的实例变量（其默认范围为单例）是个坏主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T19:03:32.547

做这样的事情（到一个txt文件）：

```
@RequestMapping(value="/download", method=RequestMethod.GET, produces=MediaType.APPLICATION_OCTET_STREAM_VALUE)
@ResponseBody
public String download(HttpServletResponse response) throws IOException {
    response.setContentType("application/force-download");
    FileReader fr = new FileReader("/folder/file.extension");
    return IOUtils.toString(fr); // IOUtils come from Apache Commons IO
} 
```

# windows - 用户在下载我的安装程序 .exe 时收到“发布者未验证”消息 - 我该如何避免这种情况？

> ID：12459335
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:32.227
> 
> 标签：windows, security, visual-c++, installation, code-signing

我为我的应用程序创建了一个安装程序 .exe 并可供下载。当用户下载它时，他们最终会从 Windows 收到一条关于“发布者未验证”的消息。我想看看摆脱这个需要什么。

我发现文章表明不同的系统设置会避免它，但是，我不想要求用户更改任何设置。我宁愿看看我需要做些什么来避免他们首先看到消息。

我确信答案与代码签名有关，但是，为了签署我的代码，这是否也意味着我必须获得 Windows 徽标认证？不确定我想经历那个。还是那是一个单独的东西？有没有办法在没有标志认证的情况下签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:53:49.103

“徽标认证”涉及获得代码签名证书，但在您的情况下，不需要徽标认证。您只需从证书颁发机构之一购买代码签名证书（不，自签名证书不起作用）就是这样。

# wpf - 覆盖图片的可拉伸直方图

> ID：12459337
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:39.613
> 
> 标签：wpf, c#-4.0, wpf-controls

我正在制作一个 WPF 程序：

1.  可以逐像素扫描位图图像，并为其分配数据值（0-255）
2.  设计一个允许平移和缩放图片的类
3.  根据数据值创建覆盖位图图像的直方图。

我能够做到这三个，但是我遇到的问题是，当我重新调整主窗口的大小时，直方图不会动态地拉伸（我认为这就是它的意思）。实际上，在主窗口中没有任何东西伸展到正确的大小（位图图像​​只是重新居中，同时保持相同的大小）。直方图最初是作为一个透明画布开始的，它有许多矩形子节点。我将其更改为网格，但得到的结果与画布相同；矩形不想水平或垂直拉伸。如果我确实设置了水平/垂直对齐，直方图将完全消失。任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T18:14:59.303

我最终创建了一个类，它是画布类的派生类，我为它提供了一些渲染覆盖和一个考虑到窗口实际宽度和高度的绘制方法。

# sql - 在实体框架中锁定表

> ID：12459338
> 
> 赞同：7
> 
> 时间：2012-09-17T12:38:46.017
> 
> 标签：sql, entity-framework, locking

我有一个带有要锁定的表的 SQL 数据库。我正在使用实体框架。基本上，有许多进程都想同时写入数据库。他们每个人都想更新某个表中的一行。但是，我只希望其中一个能够同时执行此操作。

有没有办法锁定整个表，例如防止任何人放置新行或更新行？

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:07:00.840

我不清楚你*为什么*想要这个，但如果你真的想锁定整个表，你可以：

*   关闭行和页锁定，以便一切升级为表锁定

改编自[此处](https://stackoverflow.com/questions/14779358/how-to-i-force-lock-escalation-to-flush-out-deadlock-issues-during-testing)的示例：

```
ALTER INDEX [MyIndexName] ON [dbo].[MyTableName] SET ( ALLOW_ROW_LOCKS = OFF, ALLOW_PAGE_LOCKS = OFF) 
```

*注意：这假设您的应用程序完全“拥有”这些表 - 不想应用它并破坏其他一些应用程序*

*   将查询设置为使用 Serializable 隔离级别

改编自[此处](http://social.technet.microsoft.com/wiki/contents/articles/3740.entity-framework-faq-connections-and-transactions.aspx#How_do_I_set_IsolationLevel_Lock_Hints_on_single_queries_Is_it_possible_to_set_NOLOCK_on_a_query)的示例：

```
TransactionOptions topt = new TransactionOptions();   
topt.IsolationLevel = System.Transactions.IsolationLevel.Serializable;
using (var tran = new TransactionScope(TransactionScopeOption.Required, topt)) {
   //do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T21:06:33.917

从简短的描述来看，表锁是否真的是解决这个问题所需要的，这是值得怀疑的。一些更具可扩展性的常见解决方案包括：

> 1）创建一个可序列化的事务，读取或更新感兴趣的记录作为第一条语句。所有更新都应尝试遵循此模式。
> 
> 2) 创建一个类似于 (1) 的 read_committed 事务，但包括对并发异常的重读/重试能力。

很少有人需要锁定一张桌子。在一种情况下，当涉及手动确定的身份字段值的一些计算以及与另一个会话发生冲突的机会时，可能需要这样做。

对于*这个调用*，可以创建一个事务并在开始时锁定表。锁可以是“X”（独占）以防止读取和写入，也可以是非独占以仅防止写入。这个答案使用了一个 SP：

[所以#3662766](https://stackoverflow.com/questions/3662766/sql-server-how-to-lock-a-table-until-a-stored-procedure-finishes/3662820#3662820)

作为替代方案，也可以使用应用程序锁。

[sp_getapplock](https://msdn.microsoft.com/en-us/library/ms189823.aspx)

# c# - 在绑定事件之前？

> ID：12459339
> 
> 赞同：1
> 
> 时间：2012-09-17T12:38:46.400
> 
> 标签：c#, wpf

是否有在窗口加载之前和任何绑定发生之前触发的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:13:47.660

您可以使用 Window 的构造函数在窗口加载和绑定发生之前运行代码。但是，如果您需要一个事件 Initialized 窗口的事件将为您工作。

```
public MainWindow()
{
    // Here it is...

    InitializeComponent();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:51:43.583

您没有特定的事件，但您仍然可以捕获控件值更改的事件。例如`TextBox`，您可以订阅`OnTextChanged`. 他在更新源之前被执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:53:27.793

您可以尝试[Window.Initialized](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.initialized.aspx)事件。

# mysql - 自定义行编号

> ID：12459340
> 
> 赞同：0
> 
> 时间：2012-09-17T12:38:46.880
> 
> 标签：mysql

我想要从表中选择后编号的数据行。问题是，我不需要顺序编号，但它应该从 1 到 3 编号，直到最后，如下所示：

```
1 | first row
2 | second row
3 | third row 
1 | fourth row
2 | and
3 | ....
1
2
3 
```

我正在尝试这个查询，但它不能正常工作：

```
mysql -> SET @n = 0;
-> SELECT 
CASE 
    WHEN nnn = 3 THEN  @n := 0
        ELSE nnn
    END
FROM  (
    SELECT @n := @n + 1 AS nnn FROM mytable
) AS t; 
```

如何使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:46:49.017

改编自这个答案： [使用 MySQL，如何在表中生成包含记录索引的列？](https://stackoverflow.com/questions/3126972/mysql-row-number)

```
SELECT  MOD(@curRow := @curRow + 1, 3) AS row_number
FROM    mytable m
JOIN    (SELECT @curRow := 0) r; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:26:24.290

如果您只需要选择并假设有列，比如“id”，那是顺序的，那么下面的查询应该会有所帮助：

```
SELECT IF ((id%3) = 0, 3 , (id%3)) AS new_id, <other columns> FROM <table_name>; 
```

希望能帮助到你...

# android - 使用 twitter API 1.1 在 Android 应用程序中显示 twitter 提要

> ID：12459344
> 
> 赞同：2
> 
> 时间：2012-09-17T12:38:52.650
> 
> 标签：android, twitter, oauth

基本上我想在我的应用程序中显示这个提要：[https](https://en.twitter.com/epl_live) ://en.twitter.com/epl_live 。由于 twitter 更改了它的 api 1.1，每次调用都必须经过授权，并且我发现的所有示例都是一次，用户必须登录到 twitter 并授权我的应用程序。

仅显示提要是愚蠢且耗时的，因为除了推文之外我不想要任何个人信息。

有没有一种简单的方法可以做到这一点？有人有任何工作脚本可以从 twitter 中获取信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:16:53.593

使用 1.1 版的 Twitter API 在未经用户授权的情况下进行调用是不可能的，但[很快就会](https://dev.twitter.com/docs/api/1.1/overview#Authentication_required_on_all_endpoints)：

> 目前，所有身份验证都需要用户上下文，但在接下来的几周内，我们将推出对一种不需要用户上下文的身份验证形式的支持。

他们可能会发布一些方法来让您的应用程序直接进行身份验证，而无需涉及任何用户登录。

目前，您必须依赖 API 的 1.0 版，它[仍然受支持](https://dev.twitter.com/docs/api/1.1/overview#Deprecation_of_v1.0_of_the_API)：

> 我们将在关闭 v1.0 之前提供 6 个月的窗口期。从 2013 年 3 月 5 日开始，1.0 端点将不再可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T10:11:15.800

使用 API 1.1 集成 Twitter 的完整源代码，查看此代码

[https://github.com/dwivedi/twitter_api_1.1_implementation.git](https://github.com/dwivedi/twitter_api_1.1_implementation.git)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T14:09:44.333

这有效：

[https://api.twitter.com/1/statuses/user_timeline.xml?id=epl_live&count=200&page=3](https://api.twitter.com/1/statuses/user_timeline.xml?id=epl_live&count=200&page=3)，您还可以通过以下方式请求 JSON：

[https://api.twitter.com/1/statuses/user_timeline.json?id=epl_live&count=200&page=3](https://api.twitter.com/1/statuses/user_timeline.json?id=epl_live&count=200&page=3)

我希望这有帮助。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-02T16:53:51.310

你将如何在一个安卓应用程序中构建它？我的布局是按下一个按钮，它会打开应用程序的另一层。在该层上，它应该显示我需要的 Twitter 提要。

# xml - 基于存储为 xsl:param 的节点集构造输出 XML

> ID：12459346
> 
> 赞同：1
> 
> 时间：2012-09-17T12:38:53.663
> 
> 标签：xml, xslt

我有一个需求，我需要使用存储为 XSLT 参数的节点集将一个 XML 文档转换为另一个文档。

输入：

```
<m:addCustomer xmlns:p="http://test.org"/> 
```

预期输出格式：

```
<m:addCustomer xmlns:p="http://test.org"/>
   <m:e1>some_value1</m:e1>
   <m:e2>some_value2</m:e2>
   <m:e3>some_value3</m:e3>
</m:addCustomer> 
```

我面临的问题是，我可以传递“预期输出”格式的内容的唯一方法是通过 XSLT 参数，如下所示。

```
<xsl:param name="testParam" xmlns:m="http://test.org">
    <m:customerData> 
         <m:e1>some_value1</m:e1>
         <m:e2>some_value2</m:e2>
         <m:e3>some_value3</m:e3>
    </m:customerData>
</xsl:param> 
```

到目前为止，我已经尝试了以下 XSLT 配置，但没有任何成功。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" encoding="utf-8" indent="no"/>
    <xsl:param name="testParam">
        <![CDATA[<m:customerData xmlns:m="http://cclk.lk">
    <m:e1>dfdf</m:e1>
    <m:e2>dfdf</m:e2>
    <m:e3>dfdf</m:e3></m:customer>]]>
    </xsl:param>
    <xsl:template match="/" xmlns:m="http://cclk.lk">
        <m:addCustomer>
            <xsl:value-of select="$testParam" disable-output-escaping="yes"/>
            <xsl:apply-templates select="m:customerData"/>
        </m:addCustomer>
    </xsl:template>

    <xsl:template match="m:customerData" xmlns:m="http://cclk.lk">
        <m:addUser>
            <xsl:for-each select="m:customer/*">
                <m:e1>
                    <xsl:value-of select="e1"/>
                </m:e1>
                <m:e2>
                    <xsl:value-of select="e2"/>
                </m:e2>
                <m:e3>
                    <xsl:value-of select="e3"/>
                </m:e3>
            </xsl:for-each>
        </m:addUser>
    </xsl:template>
</xsl:stylesheet> 
```

目前我无法找到一种方法来做到这一点。感谢您对此的任何帮助。

问候， 普拉巴斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:54:55.737

**指定的参数**：

```
<xsl:param name="testParam" xmlns:m="http://test.org">
    <m:customerData> 
         <m:e1>some_value1</m:e1>
         <m:e2>some_value2</m:e2>
         <m:e3>some_value3</m:e3>
    </m:customerData>
</xsl:param> 
```

**在 XSLT 1.0 中创建了一个 RTF（[结果树片段](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Result-Tree-Fragments)）** ——一种非常受限的类型，它几乎禁止任何有意义的 XPath 表达式求值。

**解决方案**：

使用供应商提供的扩展功能`xxx:node-set()`，它将 RTF 转换为常规树。

请注意，此扩展函数名称位于供应商定义的名称空间中，该名称空间因供应商而异。

试图提供一种独立于供应商的实现——在 EXSLT 中定义的实现：

**[`ext:node-set()`](http://www.exslt.org/exsl/functions/node-set/index.html)**

其中前缀`ext`绑定到命名空间`http://exslt.org/common`。

大多数 XSLT 1.0 处理器，包括 .NET XslCompiledTransform，都实现了`ext:node-set()`.

* * *

**如果您不想要任何扩展功能，那么解决方案是使用标准的 XSLT 1.0 功能[`document()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-document)**，如下所示：

```
document('')/*/xsl:param[@name='testParam'] 
```

# android - Android activity.onPause() 然后 activity.onResume() 重启应用

> ID：12459347
> 
> 赞同：-1
> 
> 时间：2012-09-17T12:38:56.090
> 
> 标签：android, onresume, onpause

我可以成功调用 activity.onPause() 来暂停应用程序。但是当我调用 activity.onResume() 时，应用程序会重新启动。

有没有办法避免这种情况？

**已编辑**

我实际上想使用暂停按钮暂停我的应用程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T12:41:45.093

你永远不应该自己调用`Activity`生命周期的方法！所以没有调用`onPause()` `onResume()` `onDestroy()` `onCreate()` `onStop()`or `onStart()`。

编辑以适合您编辑的问题：

您应该暂停游戏，而不是 Activity。你必须有一个线程来处理你的游戏逻辑。该线程需要暂停，而不是游戏。所以考虑在那里处理暂停逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:46:46.733

我可以猜到没有。所有活动都使用以下流程：http: [//developer.android.com/images/activity_lifecycle.png](http://developer.android.com/images/activity_lifecycle.png)

您应该保存活动状态，然后恢复它。

如上所述，您不应该自己调用它......只需覆盖/实现它并让 Android 完成这项工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:50:09.697

将活动生命周期视为

```
protected void onCreate(...) {
   // do Your work here
}

protected void onStart() {
   //       do Your work here
}

protected void onResume() {
        //  do Your work here
}

protected void onPause() {
               //  do Your work here
}

protected void onStop() {
               //  do Your work here
}

protected void onDestroy() {
              //  do Your work here
}

protected void onRestart() {
               //  do Your work here
} 
```

了解这种方法，您应该保存活动状态，然后恢复它。

# xcode - 如何找到 xcode 系统头文件？

> ID：12459349
> 
> 赞同：0
> 
> 时间：2012-09-17T12:39:00.007
> 
> 标签：xcode, frameworks, header

我有一个想要移植到 IOS 的 Mac 项目，但我无法解析某些类。除了 Ios 不使用的 Cocoa.h 之外，源代码中不包含任何头文件。找到正确的头文件或框架的方法是什么？

这些类是 SecExternalFormat、SecExternalItemType 和 SecKeychainAttrType

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:27:49.550

我总是做的第一件事是[谷歌搜索](http://www.google.com/search?q=site%3adeveloper.apple.com%20SecKeychainAttrType)。例如，在你的情况下，我可能已经做了：

`site:developer.apple.com SecKeychainAttrType`

这产生[了这个页面](http://developer.apple.com/library/mac/#documentation/Security/Reference/keychainservices/Reference/reference.html)，然后你就知道你需要了`Security/Security.h`。

如果您下载了文档（我认为它与 Xcode 一起提供），您也可以离线搜索它。

至于为什么 API 发生了变化，我认为这超出了您的问题范围。

# android - SpeechRecognizer 始终以英语识别（在 4.0.3 版上）

> ID：12459354
> 
> 赞同：1
> 
> 时间：2012-09-17T12:39:45.150
> 
> 标签：android

我对 Android SpeechRecognizer 有疑问。它在具有英语 (en-GB) 和德语 (de-DE) 的 Android 版本 2.3.5 上完美运行，但在版本 4.0.3 上，尽管指定的语言是德语，但它始终可以识别英语语音。

这是我传递给 SpeechRecognizer 的意图。

```
Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE, language);
intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,
        mContext.getPackageName());
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
        RecognizerIntent.LANGUAGE_MODEL_WEB_SEARCH);
intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 1);

mRecognizer.startListening(intent); 
```

我确信这个变量总是好的（当我想要德语等时 de-DE）。

我还尝试添加：

```
intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_PREFERENCE, language); 
```

但它也不起作用。

我也确信 SpeechRecognizer 支持德语。我正在使用此 BroadcastReceiver 来获取可用语言的列表。

```
public class AndroidAvailableLanguagesChecker extends BroadcastReceiver {

    private List<String> supportedLanguages;

    public AndroidAvailableLanguagesChecker() {
        supportedLanguages = new ArrayList<String>();
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle results = getResultExtras(true);
        if (results.containsKey(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES)) {
            supportedLanguages = results
                .getStringArrayList(RecognizerIntent.EXTRA_SUPPORTED_LANGUAGES);
        }
    }

    public List<String> getSupportedLanguages() {
        return supportedLanguages;
    }
}

// using broadcast receiver
Intent detailsIntent = new Intent(
        RecognizerIntent.ACTION_GET_LANGUAGE_DETAILS);
mChecker = new AndroidAvailableLanguagesChecker();
context.sendOrderedBroadcast(detailsIntent, null, mChecker, null,
        Activity.RESULT_OK, null, null); 
```

有谁知道为什么这不起作用？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:45:21.340

这只是一个假设，不是现在测试它，但也许语言必须是“de_DE”而不是“de-DE”，请尝试一下......

# jquery - jQuery tablesorter 有问题的动态结果集

> ID：12459356
> 
> 赞同：1
> 
> 时间：2012-09-17T12:39:45.880
> 
> 标签：jquery, ajax, tablesorter

我已经尝试多次编写和重写，以保持简短，但包括“相关”背景。没有运气，所以我将给出当前情况并按要求回答问题。

我有两个问题，所以我将把一个放在这篇文章中，另一个放在另一篇文章中。

我的问题是，我的表格，一直到 tbody 标记，都被硬编码到我的 JSP 中。tbody 标记中的行是根据用户输入从 AJAX 调用返回的。当用户进行多次搜索时，我得到了我期望的行，但是当对表进行排序时，tablesorter 排序的行包括来自所有搜索的所有行。因此，tablesorter 正在缓存和附加行 - 为用户创造了非常不可接受的体验，对我来说是一场噩梦。

有没有办法将每个排序的 tablesorter 缓存重置为当前在表中的内容？否则，我相信我将不得不编写自己的表格排序脚本。这周我的“想做”清单上没有什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:46:27.813

***我相信我已经解决了***

这是我最终使用的代码：

```
$("#resultsTbody").html(response);
$(".stripeMe").tablesorter({widgets: ['zebra'] });
$(".stripeMe").trigger("update"); 
```

显然，使用*.trigger("update");* 调用清除缓存。做了一些工作，但我终于在论坛和文档中找到了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:55:01.557

这对我有用：

```
.trigger("update"); 
```

`widgetOptions : { filter_reset : '.reset' }`即使您在使用 Ajax 调用加载页面后更新表也无济于事。

# jquery - mousedown=点击。释放呢？

> ID：12459359
> 
> 赞同：2
> 
> 时间：2012-09-17T12:39:48.490
> 
> 标签：jquery

当我单击（不释放按钮）时，我可以使用`mousedown()`：

```
$('.myClass').mousedown(function (e) {

}); 
```

但是当我释放按钮时我可以使用什么？`mouserelease()`不存在:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:40:20.613

有[`mouseup`](http://api.jquery.com/mouseup/)事件：

```
$(".myClass").mouseup(function(e) {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:50:43.180

我喜欢[这个](http://jsbin.com/oyinaj/1/edit)：

```
$(".myClass").on('mousedown mouseup',function( e ){
    if(e.type == 'mousedown'){
         // Do my stuff on mousedown
    }else{
         // Do my stuff on mouseup
    }
}); 
```

# php - 是否可以在不登录 facebook 的情况下从我的网站将故事发布到 facebook 页面墙上？

> ID：12459367
> 
> 赞同：0
> 
> 时间：2012-09-17T12:40:00.787
> 
> 标签：php, facebook, facebook-graph-api, facebook-login

这是我用来从我的网站将故事发布到 Facebook 页面墙上的代码。我已经安装了 facebook sdk，如 facebook.php 和 base_facebook.php 等文件。我的要求是在不登录 facebook 的情况下发布故事。我已经阅读了许多教程，但我找不到任何解决方案。你能帮我解决这个问题吗？这是我正在使用的代码。

```
$appid = 'xxxxx'; //Application ID
$appsec = 'xxxxx'; // Application secret
$redirectUrl = 'http://test.com/admin/'; //Facebook redirects back to this page
$permissions = 'publish_stream'; // Permissions we will need

 if(isset($_POST['FacebookPageID']) && strlen($_POST['FacebookPageID'])>10)
 {

 $_SESSION['FacebookPageID']=$_POST['FacebookPageID'];
 $_SESSION['FacebookMessage']=$_POST['FacebookMessage'];
 $_SESSION['FacebookTitle']=$_POST['FacebookTitle'];

 }

 if(!is_numeric($_SESSION['FacebookPageID']) || strlen($_SESSION['FacebookPageID'])<5)
 {

  die("<meta http-equiv=\"refresh\" content=\"2;URL=".$redirectUrl."\" />");
  }
 else
 {

 if(!isset($_GET["code"]))
 {

  $_SESSION['state'] = md5(uniqid(rand(), TRUE));

  $RedirectToFacebook = "https://www.facebook.com/dialog/oauth?client_id=".$appid;
  $RedirectToFacebook .="&redirect_uri=".urlencode($redirectUrl.'test.php');

     die("<script type=\"text/javascript\">top.location.href='" . $RedirectToFacebook .                 </script>
  <noscript><a href='".$RedirectToFacebook."'>Needs Permissioins</a></noscript>");
}
else
{

############## Facebook Page ID ############
$facebookPageID = $_SESSION['FacebookPageID']; 

############## Wall Message ############
$facebookMessage = (empty($_SESSION['FacebookMessage']) ||    s      trlen($_SESSION['FacebookMessage'])<5)?"Nice Facebook Wall Posting     Script!":$_SESSION['FacebookMessage'];

 $facebookTitle = (empty($_SESSION['FacebookTitle']) ||     strlen($_SESSION['FacebookTitle'])<5)?"Nice Facebook Wall Posting  Script!":$_SESSION['FacebookTitle'];

 if($_SESSION['state'] !="")
{
echo $_SESSION['state'];

  // $siteurl=$_GET['realurl'];
  $AccessTokenUrl = "https://graph.facebook.com/oauth/access_token?client_id=".$appid;
  $AccessTokenUrl .="&redirect_uri=".urlencode($redirectUrl.'test.php');
 $AccessTokenUrl .="&client_secret=".$appsec;
 $AccessTokenUrl .="&code=".$_GET["code"];
 $ReturnedString = file_get_contents($AccessTokenUrl);
 $params=null;
 parse_str($ReturnedString, $params);
 $OurAccessToken = $params['access_token']; //access token

 //---------------
 require_once('src/facebook.php' ); //Include our facebook Php Sdk

$post_url = '/'.$facebookPageID.'/feed';
$facebook = new Facebook(array(
'appId' => $appid,
'secret' => $appsec,
 ));

 //the Posting Parameters
$PostData = array(
'message' =>$facebookMessage,
'name' => $_SESSION['title'],
'caption' => "testcom",
'link' => 'from tranz',
'description' => $facebookMessage,
' picture' => "http://test/uploads/".$_SESSION['imageshare']."",
'access_token' =>$OurAccessToken,
'actions' => array(
 array(
'name' => 'Saaraan',
'link' => 'http://www.saaraan.com'
 )
 )
 );

 //print_r($PostData); exit;

 try {
$result = $facebook->api($post_url, 'post', $PostData);
 //$result = $facebook->api('me/feed','post', $PostData);
 if($result)
 {
// session_destroy();
 echo 'Done..';
 die("<meta http-equiv=\"refresh\" content=\"2;URL=".$redirectUrl."?  success=1&fbp=".$facebookPageID."\" />");
  }
 }
 catch (Exception $e)
 {
echo 'Facebook could be experiencing some problem! Try again later <br />Facebook   Says: '. $e->getMessage();
 }
 //--------------
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:42:03.207

Facebook 要求用户通过身份验证才能发布内容。不，如果身份验证就是您所说的“登录”，则无法在没有身份验证的情况下发布。

# javascript - Internet Explorer 7 和 8 冻结加载 MVC3 应用程序

> ID：12459368
> 
> 赞同：1
> 
> 时间：2012-09-17T12:40:01.890
> 
> 标签：javascript, asp.net-mvc-3, internet-explorer-8, internet-explorer-7

我遇到了**Internet Explorer 8 和 7**的间歇性问题。我已经测试了这几天了。我的猜测是它与`JavaScript`.

在我的`MVC 3`应用程序中随机数次页面查看/刷新后，我得到以下之一：

1.  一个空白的白色屏幕

2.  先前渲染的页面，没有任何与页面交互的能力（有时包括滚动）

我已经尝试注释掉我所有的`JavaScript`，结果没有任何变化。我尝试部署到不同的服务器，但没有任何结果。我尝试了不同的客户，但没有任何结果。我试图在客户端和服务器上搜索日志，但没有任何结果。**Internet Explorer 9**、**Chrome**和**Firefox**似乎不受影响。该应用程序将主要用于**Internet Explorer 7 和 8**。

我将不胜感激有关下一步尝试的任何和所有建议。

项目中的 Javascript 库：

```
jquery-1.5.1-vsdoc.js
jquery-1.5.1.js
jquery-1.5.1.min.js
jquery-ui-1.8.11.js
jquery-ui-1.8.11.min.js
jquery-ui-1.8.20.custom.min.js
jquery.min.js
jquery.unobtrusive-ajax.js
jquery.unobtrusive-ajax.min.js
jquery.validate-vsdoc.js
jquery.validate.js
jquery.validate.min.js
jquery.validate.unobtrusive.js
jquery.validate.unobtrusive.min.js
MicrosoftAjax.debug.js
MicrosoftAjax.js
MicrosoftMvcAjax.debug.js
MicrosoftMvcAjax.js
MicrosoftMvcValidation.debug.js
MicrosoftMvcValidation.js
modernizr-1.7.js
modernizr-1.7.min.js
pngfix.js 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:25:04.797

删除以下内容似乎已解决了该问题：

```
<!--[if lte IE 7.]>
    <script type="text/javascript" src="@Url.Content("~/Scripts/pngfix.js")"></script>
<![endif]-->    

<!--[if (gte IE 6)&(lte IE 8)]>
    <script type="text/javascript" src="@Url.Content("~/Scripts/IE9_fix.js")"></script>
<![endif]--> 

<!--[if lt IE 9.]>
    <script src="@Url.Content("~/Scripts/html5.js")" type="text/javascript"></script>
<![endif]--> 
```

# php - Symfony2 使用 EAV 返回值形成动态选择字段

> ID：12459379
> 
> 赞同：15
> 
> 时间：2012-09-17T12:40:39.893
> 
> 标签：php, oop, symfony, symfony-forms

我正在使用 Symfony2 和 Doctrine2 创建一个电子商务捆绑包。我正在将 EAV 方法应用于产品功能和无限功能的产品价值。为此，我有三个基本实体：Product、FeatureKind 和 FeatureValues。

*   FeatureKind 与具有 OneToMany 单向关系的 FeatureValues 连接。
*   产品通过多对多关系连接到 FeatureKind。

问题是我需要 FeatureType 作为标签，它的各种值作为产品表单中的选择字段。我已经设法在产品表单中获得了特征种类和相关值，但我不知道如何将它们变成选择字段。

以下是所有三个实体、控制器和表单代码以及我的代码的结果。

**注意：**我已经从代码中删除了多余的东西以保持简短。

产品.php

```
namespace Webmuch\ProductBundle\Entity;

/**
 * @ORM\Table()
 * @ORM\Entity
 */
class Product
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @ORM\ManyToMany(targetEntity="FeatureKind", inversedBy="product", cascade={"persist"})
     * @ORM\JoinTable(name="product_featurekind")
     **/
    private $featurekind;
} 
```

FeatureKind.php

```
namespace Webmuch\ProductBundle\Entity;

/**
 * @ORM\Table(name="feature_kind")
 * @ORM\Entity
 */
class FeatureKind
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="name", type="string", length=50)
     */
    protected $name;

    /**
     * @ORM\ManyToMany(targetEntity="FeatureValue")
     * @ORM\JoinTable(name="feature_kind_value",
     *      joinColumns={@ORM\JoinColumn(name="kind_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="value_id", referencedColumnName="id", unique=true)}
     *      )
     **/
    protected $values;   
} 
```

特征值.php

```
namespace Webmuch\ProductBundle\Entity;

/**
 * @ORM\Table()
 * @ORM\Entity
 */
class FeatureValue
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(name="value", type="string", length=100)
     */
    protected $value;
} 
```

产品控制器.php

```
public function newAction(Request $request)
{
    $entity = new Product();
    $em = $this->getDoctrine()->getEntityManager();
    $features = $em->getRepository('ProductBundle:FeatureKind')->findAll();

    foreach($features as $feature)
    {
        $featurekind = new FeatureKind();
        $featurekind->setTitle($feature->getTitle());
        foreach($feature->getValue() as $value ){
            $featurekind->getValue()->add($value);
        }
        $entity->getFeaturekind()->add($featurekind);   
    }

    $form = $this->createForm(new ProductType(), $entity);

     if ('POST' === $request->getMethod()) {
        $form->bindRequest($request);
        if ($form->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('product_show', array(
                'id' => $entity->getId()
            )));
        }
    }
    return $this->render('ProductBundle:Product:new.html.twig', array(
       'form'   => $form->createView()
    ));
} 
```

产品类型.php

```
namespace Webmuch\ProductBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class ProductType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('featurekind', 'collection', array('type' => new FeatureKindType()))
            ->getForm();
        }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Webmuch\ProductBundle\Entity\Product',
            'required' => true
        );
    }

    public function getName()
    {
        return 'product';
    }
} 
```

FeatureKindType.php

```
namespace Webmuch\ProductBundle\Form;

class FeatureKindType extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('title')
            ->add('value','collection', array(
                                               'type' => new FeatureValueType(),
                                               'allow_add'=>true))
            ->getForm();
    }

    public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Webmuch\ProductBundle\Entity\FeatureKind',
        );
    }

    public function getName()
    {
        return 'featurekind';
    }
} 
```

![这是我的表单结果。](../Images/3b630377f5aab35bd761faa48fc3f8a0.png)

**编辑：**

经过几天的工作，我现在陷入了一系列简单的功能及其各自的多个值：

```
Array
(
    [Color] => Array
        (
            [Red] => Red
            [Green] => Green
        )

    [Size] => Array
        (
            [Large] => Large
            [Medium] => Medium
            [Small] => Small
        )

    [Sleeve Style] => Array
        (
            [Half Sleeved] => Half Sleeved
            [Full Sleeved] => Full Sleeved
            [Cut Sleeves] => Cut Sleeves
        )

) 
```

我尝试按如下方式创建表单：**$this->choices**包含数组。

```
$builder
    ->add('name')
    ->add('slug')
    ->add('active')
;

foreach ($this->choices as $choice) {
    $builder->add('featurekind', 'choice', array(
        'required' => 'false',
        'choices' => $choice,
        'empty_value' => 'Choose an option',
        'empty_data'  => null
    ));
}

$builder->getForm(); 
```

以上不适用于属性**$featurekind**。我得到错误：

```
Notice: Object of class Doctrine\Common\Collections\ArrayCollection could not be converted to int in /vagrant/project/vendor/symfony/symfony/src/Symfony/Component/Form/Extension/Core/ChoiceList/ChoiceList.php line 457 
```

尽管如果表单字段附加到任何未关联的属性，例如：$name，它仍然只为循环的最后一次迭代创建一个表单字段。

我没有选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T19:39:34.077

您想要做的事情无法用您当前的结构完成。让我试着解释一下：FeatureKind 与 FeatureValue 是一对多的关系。这意味着您可以拥有一种“颜色”类型，其值可以是“红色”、“粉红色”等。这很好。但是你的产品实体有一个 FeatureKind 对象的集合，所以它可以有一个像“颜色”、“尺寸”等的列表......但是（这是最重要的部分）它无法将特定的值分配给任何这些种类中的：没有任何属性具有每种种类的特定值。我希望你能理解这一点，这有点难以解释。

你需要做什么：

按原样定义您的 FeatureValue 和 FeatureKind 类。

定义一个新实体来处理产品的种类和值之间的关联：

```
namespace Webmuch\ProductBundle\Entity;

/**
 * @ORM\Table()
 * @ORM\Entity
 */
class FeatureKindValue
{
    /**
     * @ORM\Id
     * @ORM\Column(name="id", type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ManyToOne(targetEntity="Product", inversedBy="features")
     **/
    private $product;

    /**
     * @ORM\ManyToOne(targetEntity="FeatureKind")
     **/
    protected $kind;   

    /**
     * @ORM\ManyToOne(targetEntity="FeatureValue")
     **/
    protected $value;   
} 
```

该实体处理成对的 kind:value，例如 color:red

最后，您的产品实体具有这种新类型的属性：

```
namespace Webmuch\ProductBundle\Entity;

/**
 * @ORM\Table()
 * @ORM\Entity
 */
class Product
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\Column(name="title", type="string", length=255)
     */
    private $title;

    /**
     * @ORM\OneToMany(targetEntity="FeatureKindValue", mappedBy="product")
     **/
    private $features;
} 
```

然后，为了根据需要呈现表单，请执行类似于此 stackoverflow[问题的答案中给出的说明的操作](https://stackoverflow.com/questions/7316461/symfony2-how-to-create-form-based-on-dynamic-parameters-from-db-eav)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:59:30.767

这种东西可能很棘手，但你可以在课堂上使用[这种方法](https://stackoverflow.com/questions/9723713/access-entity-data-inside-formtype-for-a-child-in-a-collection-in-symfony2)`FeatureKindType`：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->addEventListener(
        FormEvents::PRE_SET_DATA,
        function (DataEvent $event) use ($builder) {
            /* @var FormBuilderInterface $builder */
            $form = $event->getForm();
            /* @var FeatureKind $data */
            $data = $event->getData();
            if ($data !== null) {
                $form->add(
                    $builder->getFormFactory()->createNamed(
                        'values',
                        'entity',
                        null,
                        array(
                            'label' => $data->getName(),
                            'class' => 'WebmuchProductBundle:FeatureValue',
                        )
                    )
                );
            }
        }
    );
} 
```

请注意，我没有尝试在您的案例中发布表单并保存实体，但表单现在显示`FeatureKind`as 标签的名称和包含相应`FeatureKindValues`.

我在我的一个项目中使用这种方法，它对我有用。

# java - 在 MongoDB 中查询唯一性，如果唯一则插入

> ID：12459383
> 
> 赞同：0
> 
> 时间：2012-09-17T12:40:44.673
> 
> 标签：java, mongodb, morphia, atomic

我对 MongoDB 完全陌生。我正在使用 Morphia 从 Java 访问它。我需要按照以下方式做一些事情：

public boolean isUnique(short s){
//OPERATION 1: 检查 mongo 是否存在带有字段 "id" = s 的对象
//如果存在则返回 false
//else,
//OPERATION 2: 在数据库中创建这个对象
//并返回真
}

我要掌握的问题不是实际的语法，而是原子性的问题。我如何确保只有一个线程/进程可以访问文档，以便 OP1 和 OP2 是原子的？我认为这必须在数据库级别进行管理，因为 Java 服务器处于集群环境中。

问候，安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:21:22.363

[您可以用 {id: s} 文档的一个upsert](http://www.mongodb.org/display/DOCS/Updating#Updating-%7B%7Bupserts%7D%7D)替换这两个操作，如果文档已经存在，则变为无操作，如果不存在则插入。调用[`getLastError`](http://www.mongodb.org/display/DOCS/getLastError+Command)命令（驱动程序可以为您执行此操作）将告诉您是否创建了新文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:49:58.910

我正在使用 Java 和 Morphia，所以这就是实际代码的样子，如果将来有人想要实现同样的目标的话。这是在告诉 Mongo 这是一个 upsert`true`的调用：`updateFirst`

```
public boolean checkIfExistsAndInsertOtherwise(short id){
    Datastore datastore = getDatastore();
    Query<OrganizationId> updateQuery = datastore.createQuery(OrganizationId.class).field("identificationNumber").equal(id);

    //Bogus operation, just set id to itself
    UpdateOperations<OrganizationId> ops = datastore.createUpdateOperations(OrganizationId.class).set("identificationNumber", id);

    UpdateResults<OrganizationId> result = datastore.updateFirst(updateQuery, ops, true,WriteConcern.SAFE);

    return result.getInsertedCount() == 0;
  } 
```

# jquery - Jquery：在 1 个表格单元格内切换 2 个 div 高度

> ID：12459386
> 
> 赞同：0
> 
> 时间：2012-09-17T12:40:57.323
> 
> 标签：jquery, html, jquery-animate, height, toggle

[示例图](http://imgur.com/iubmP "示例图")

所以我在一个表格单元格中有 2 个 div。1个div在上面，1个在下面。底部的那个是不可见的，所以顶部的 div 占据了表格单元格的整个高度。单击按钮时，底部 div 变为可见，顶部 div 降低其高度以为底部 div 腾出空间。因此，当再次单击按钮时，底部 div 隐藏，顶部 div 占据单元格高度。

这就是我所拥有的，但它失败了：

```
 $('#button').click(function(){

   $('#bottomdiv').toggle(function(){
      $("#topdiv").animate({height:250},200);
   },function(){
      $("#topdiv").animate({height:400},200);
   });

}); 
```

感谢您的帮助，非常感谢 jsfiddle 演示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:55:08.863

你很接近 - 我认为你只需要将“点击”处理程序更改为“切换”。例如：[（JS 小提琴）](http://jsfiddle.net/quant/ZNcgF/)

```
jQuery(document).ready(function($) {
     $('#button').toggle(function () {
         // Show bottom
         $("#topdiv").animate({
             height: 400
         }, 200);
         $("#bottomdiv").slideUp();
         //console.log("bottom shown:", $("#bottomdiv"));
     }, function () {
         // Hide bottom
         $("#topdiv").animate({
             height: 250
         }, 200);
         $("#bottomdiv").slideDown();
         //console.log("bottom hidden:", $("#bottomdiv"));
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:51:47.203

```
$('body').on('click', '#button', function(){
  $('#topdiv').animate({
    height : '250px'
  }, {
     duration : 200,
     complete : function(){
       $('#bottomdiv').animate({
          height: '400px'
       }, 200);
     }
  });
}); 
```

# c# - 从证书导入公共 RSA 密钥

> ID：12459390
> 
> 赞同：0
> 
> 时间：2012-09-17T12:41:11.843
> 
> 标签：c#, windows-8, windows-runtime

我们的客户将其公共 RSA 密钥存储在证书中。

我们需要在我们的 WinRT 应用程序中硬编码这个密钥，以便我们可以加密客户端。但是，我们在将密钥导入 CryptographicKey 类的实例时遇到了问题。

我们在 RSAProvider 上使用 ImportPublicKey：

```
rsaProvider = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);
key = rsaProvider.ImportPublicKey(publicKeyBuffer); 
```

我们已经尝试将一些东西加载到 publicKeyBuffer 中：证书，从证书中以多种格式导出的公钥。

我们如何加载他们的公钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T09:34:33.157

我发现 MSDN 论坛中的这篇文章很有帮助。Carlos Lopez 发布了一些代码以从 Base64 编码的证书中获取公钥。

[http://social.msdn.microsoft.com/Forums/en-US/17e1467a-2de7-47d2-8d8c-130518eaac68/how-to-use-a-x509-certificate-not-a-pfx-to-verify-一个签名](http://social.msdn.microsoft.com/Forums/en-US/17e1467a-2de7-47d2-8d8c-130518eaac68/how-to-use-a-x509-certificate-not-a-pfx-to-verify-a-signature)

这里的代码：

```
public static CryptographicKey GetCryptographicPublicKeyFromCert(string strCert)
    {
        int length;
        CryptographicKey CryptKey = null;

        byte[] bCert = Convert.FromBase64String(strCert);

        // Assume Cert contains RSA public key 
        // Find matching OID in the certificate and return public key
        byte[] rsaOID = EncodeOID("1.2.840.113549.1.1.1");
        int index = FindX509PubKeyIndex(bCert, rsaOID, out length);

        // Found X509PublicKey in certificate so copy it.
        if (index > -1)
        {
            byte[] X509PublicKey = new byte[length];
            Array.Copy(bCert, index, X509PublicKey, 0, length);

            AsymmetricKeyAlgorithmProvider AlgProvider = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaPkcs1);
            CryptKey = AlgProvider.ImportPublicKey(CryptographicBuffer.CreateFromByteArray(X509PublicKey));
        }

        return CryptKey;
    }

    static int FindX509PubKeyIndex(byte[] Reference, byte[] value, out int length)
    {
        int index = -1;
        bool found;
        length = 0;

        for (int n = 0; n < Reference.Length; n++)
        {
            if ((Reference[n] == value[0]) && (n + value.Length < Reference.Length))
            {
                index = n;
                found = true;

                for (int m = 1; m < value.Length; m++)
                {
                    if (Reference[n + m] != value[m])
                    {
                        found = false;
                        break;
                    }
                }

                if (found) break;
                else index = -1;
            }
        }

        if (index > -1)
        {
            // Find outer Sequence
            while (index > 0 && Reference[index] != 0x30) index--;
            index--;
            while (index > 0 && Reference[index] != 0x30) index--;
        }

        if (index > -1)
        {
            // Find the length of encoded Public Key
            if ((Reference[index + 1] & 0x80) == 0x80)
            {
                int numBytes = Reference[index + 1] & 0x7F;
                for (int m = 0; m < numBytes; m++)
                {
                    length += (Reference[index + 2 + m] << ((numBytes - 1 - m) * 8));
                }

                length += 4;
            }
            else
            {
                length = Reference[index + 1] + 2;
            }
        }

        return index;
    }

    static public byte[] EncodeOID(string szOID)
    {
        int[] OIDNums;
        byte[] pbEncodedTemp = new byte[64];
        byte[] pbEncoded = null;
        int n, index, num, count;

        OIDNums = ParseOID(szOID);

        pbEncodedTemp[0] = 6;

        pbEncodedTemp[2] = Convert.ToByte(OIDNums[0] * 40 + OIDNums[1]);
        count = 1;

        for (n = 2, index = 3; n < OIDNums.Length; n++)
        {
            num = OIDNums[n];

            if (num >= 16384)
            {
                pbEncodedTemp[index++] = Convert.ToByte(num / 16384 | 0x80);
                num = num % 16384;

                count++;
            }

            if (num >= 128)
            {
                pbEncodedTemp[index++] = Convert.ToByte(num / 128 | 0x80);
                num = num % 128;

                count++;
            }

            pbEncodedTemp[index++] = Convert.ToByte(num);
            count++;
        }

        pbEncodedTemp[1] = Convert.ToByte(count);

        pbEncoded = new byte[count + 2];
        Array.Copy(pbEncodedTemp, 0, pbEncoded, 0, count + 2);

        return pbEncoded;
    }

    static public int[] ParseOID(string szOID)
    {
        int nlast, n = 0;
        bool fFinished = false;
        int count = 0;
        int[] dwNums = null;

        do
        {
            nlast = n;
            n = szOID.IndexOf(".", nlast);
            if (n == -1) fFinished = true;
            count++;
            n++;
        } while (fFinished == false);

        dwNums = new int[count];

        count = 0;
        fFinished = false;

        do
        {
            nlast = n;
            n = szOID.IndexOf(".", nlast);
            if (n != -1)
            {
                dwNums[count] = Convert.ToInt32(szOID.Substring(nlast, n - nlast), 10);
            }
            else
            {
                fFinished = true;
                dwNums[count] = Convert.ToInt32(szOID.Substring(nlast, szOID.Length - nlast), 10);
            }

            n++;
            count++;
        } while (fFinished == false);

        return dwNums;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T19:31:45.827

对于那些想知道如何使用存储在 WinRT 应用程序证书中的公钥的人，让我减轻您的痛苦：您不能，至少不能直接使用。

该`AsymmetricKeyAlgorithmProvider.ImportPublicKey`函数接受一个 IBuffer 和一个 CryptographicPublicKeyBlobType，keyBlob (IBuffer) 参数是证书的公钥，不是完整的证书，只是它的公钥。

但是如果不先解析它就无法获得证书的公钥，这就是问题所在，没有办法在 WinRT 上解析证书，因为此任务最常用的类 X509Certificate 不是可用，它的命名空间也不可用，并且证书工具仅用于 Web 服务连接。

解决此问题的唯一方法是实现证书解析器，或从开源项目（如[Bouncy Castle](http://www.bouncycastle.org/) ）移植此类功能。所以，如果你知道一个，请在评论中留下它。

顺便说一句，要以可在 WinRT 应用程序中使用的格式从证书（纯 .NET）中导出公钥，请使用以下命令：

```
X509Certificate2 Certificate;
....
byte[] CertificatePublicKey = Certificate.PublicKey.EncodedKeyValue.RawData; 
```

然后在 WinRT 应用程序中使用：

```
AsymmetricKeyAlgorithmProvider algorithm = AsymmetricKeyAlgorithmProvider.OpenAlgorithm(AsymmetricAlgorithmNames.RsaSignPkcs1Sha1);
IBuffer KeyBuffer = CryptographicBuffer.DecodeFromBase64String(CertificatePublicKeyContent);
CryptographicKey key = algorithm.ImportPublicKey(KeyBuffer, CryptographicPublicKeyBlobType.Pkcs1RsaPublicKey); 
```

请注意，我首先在 base 64 中对公钥进行了编码，但您可以使用原始二进制数据代替（CryptographicBuffer 类为此目的提供了更多方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:11:39.690

两件事情：

1.  ImportPublicKey 键的参数是一个 IBuffer。最简单的方法是使用 byte[] 的 ToBuffer 扩展方法。
2.  使用同时采用 IBuffer 和[CryptographicPublicKeyBlobType的](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.cryptographicpublickeyblobtype.aspx)[ImportPublicKey](http://msdn.microsoft.com/en-us/library/windows/apps/windows.security.cryptography.core.cryptographicpublickeyblobtype.aspx)的覆盖，特别是 CryptographicPublicKeyBlobType.X509SubjectPublicKeyInfo。从证书中传入主题公钥信息字段。

# maven - 将 JMeter 集成为 Maven 项目的一部分

> ID：12459394
> 
> 赞同：3
> 
> 时间：2012-09-17T12:41:14.807
> 
> 标签：maven, ant, jmeter

我正在开始我的项目工作，该项目与创建一些自定义 jmeter 组件集相关，这些组件将捆绑在我的自定义 jmeter 发行版中。

这些自定义组件是 Maven 项目的一部分，我想做的是尝试将此 maven 项目与最新的 jmeter 项目集成，以便能够构建和交付包含我的自定义组件集和所有相关依赖 jar 的 jmeter 构建。

问题是 jmeter 项目是 ant 项目。我遇到了这个：[http](http://maven.apache.org/guides/mini/guide-using-ant.html) : //maven.apache.org/guides/mini/guide-using-ant.html，maven-antrun-plugin，它可以在 maven pom 中嵌入 ant 任务。

由于我从未使用过 ant（仅使用过 maven），我在 pom 中使用这个插件的想法是定义以下目标：

1.  从 svn 存储库下载 jmeter 源
2.  构建jmeter分布
3.  在构建 maven 项目之后（安装阶段之后），将 jars（组件和依赖 jars）复制到 jmeter lib 以使用我的自定义组件形成最终的 jmeter 分发。

我的问题是：您是否认为这种方法是正确的（这样做时是否需要考虑一些事情），如果不是，您能否建议我实现相同目标的其他方法？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:28:28.253

从 JMeter 2.6 开始，Apache JMeter 工件发布在 maven2 存储库上。

看：

*   [http://mvnrepository.com/artifact/org.apache.jmeter/](http://mvnrepository.com/artifact/org.apache.jmeter/)

请参阅示例：

*   [https://github.com/Ronnie76er/jmeter-maven-plugin/wiki](https://github.com/Ronnie76er/jmeter-maven-plugin/wiki)

因此，您可以做的是让您的 Maven 项目将这些工件作为依赖项引用。

如果你想生成一个包含 JMETER+You 插件的完整包，那么使用 AntRunner 来：

*   解压官方发行版
*   复制 jmeter/lib/ext 中的工件和 jmeter/lib 中的依赖项
*   重新压缩它

# string - 在 Perl 中将字符串变量附加到固定字符串

> ID：12459395
> 
> 赞同：12
> 
> 时间：2012-09-17T12:41:19.353
> 
> 标签：string, perl, append

我有一个在提示符下输入的变量：

```
my $name = <>; 
```

我想为此附加一个固定字符串`'_one'`（在一个单独的变量中）。

例如，如果`$name = Smith`它变成`'Smith_one'`

我尝试了几种不同的方法，但都没有给我正确的结果，例如：

```
my $one = "${name}_one"; 
```

^`_one`当我打印出来时出现在下一行，当我使用它时，_one 根本不包括在内。

还：

```
my $one = $name."_one"; 
```

^`'_one'`出现在字符串的*开头*。

和：

```
my $end = '_one';
my $one = $name.$end;
or 
my $one = "$name$end"; 
```

这些都没有产生我想要的结果，所以我可能错过了一些与提示中的输入格式有关的东西。想法赞赏！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-17T12:49:14.397

您的问题与字符串附加无关：当您读取一行（例如 via `<>`）时，记录输入分隔符*包含*在该字符串中；这通常是换行符`\n`。要删除换行符，`chomp`变量：

```
 my $name = <STDIN>; # better use explicit filehandle unless you know what you are doing
    # now $name eq "Smith\n"
    chomp $name;
    # now $name eq "Smith" 
```

要将变量插入字符串，通常不需要`${name}`使用的语法。这些行都将附加`_one`到您的字符串并创建一个新字符串：

```
 "${name}_one"  # what you used
    "$name\_one"   # _ must be escaped, else the variable $name_one would be interpolated
    $name . "_one"
    sprintf "%s_one", $name
    # etc. 
```

这将附加`_one`到您的字符串并仍将其存储在`$name`：

```
 $name .= "_one" 
```

# mysql - 将 localhost MySQL 迁移到 AWS Oracle 似乎要等四个小时

> ID：12459396
> 
> 赞同：2
> 
> 时间：2012-09-17T12:41:20.317
> 
> 标签：mysql, oracle, migration, amazon-rds

我目前正在将相当大的 localhost [MySQL](http://en.wikipedia.org/wiki/MySQL)数据库迁移到带有 Oracle的[AWS服务器。](http://en.wikipedia.org/wiki/Amazon_Web_Services)我正在使用带有已安装附加功能的 SQL Developer 工具来支持 MySQL。迁移过程非常缓慢，从诊断工具看来，服务器上的空间每四个小时就会减少一次（数据传输的迹象）。

1.  这是由于诊断工具还是添加到服务器的任何约束？
2.  如果它是对服务器的限制，我该如何删除它以便更快地传输数据？

我现在已经迁移了大约 40 个小时，只迁移了 2 GB。似乎每四个小时进行一次传输。

![在此处输入图像描述](../Images/dfdbfc06fb4642d9549624dd6c0cb570.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T12:36:10.387

很难从您的帖子中看出，但您是否使用 SQL Developer 中的迁移向导？是在线迁移还是离线迁移？

大型数据库的在线迁移将非常缓慢，因为它实际上是一次重建数据库，包括完整性检查、重做生成、索引构建等。

# iphone - 如何在表格视图中有效地从服务器获取图像

> ID：12459401
> 
> 赞同：-2
> 
> 时间：2012-09-17T12:41:31.340
> 
> 标签：iphone, uitableview

我有 5000 张图像作为视频的缩略图，它必须显示在表格视图中，最好的方法是什么？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:44:22.467

你可以使用延迟加载的概念，看看苹果[示例代码](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)来演示延迟加载`UITableView`。

**更新**

这是在使用服务器端托管图像的情况下（这是您的应用程序的最佳解决方案，因为在应用程序中保存大量图像（5000 张图像）是错误的。

# java - 抽象类，将实现发送到方法

> ID：12459404
> 
> 赞同：0
> 
> 时间：2012-09-17T12:41:38.717
> 
> 标签：java, abstract

我有2个课程如下。

```
public absract class myAbstracClass{

//various methods and stuff.

}

public class myImplmentationOfAbstractClass extends myAbstractClass {

//just implments a call to the abstract class in the constructor.
//no extrac functionality is added in this instance.
} 
```

在第三堂课中，我有一个方法

```
public class someFunctionality{//

//default constructor

public static void myMethod(myAbstractClass abc)
//do stuff with abc

} 
```

然后在我的代码中调用此方法

```
public class doWork{

    public static void main(){

    //create my implmented class
    myImplmentationOfAbstractClass myABC = new myImplmentationOfAbstractClass();

    //send this class to my function

    someFunctionality.myMethod(myABC);//this causes an NPE

    }

    } 
```

我显然错过了一些东西，我在谷歌上找不到它。

现在我已经改变了我的方法来接受一个 myImplementationOfAbstractClass 对象。但这似乎很糟糕，因为我预计需要再次使用抽象类，并将其扩展为特定实例。

我是否会错误地处理这个问题，或者我不能将超类的子类发送到期望超类副本的方法？

提前致谢。

大卫。

编辑：

我只想对所有花时间回答的人表示感谢。你们都是对的。问题出在其他地方。

事实证明，在我的函数中，我声明了另一个“临时对象”，并且我以错误的顺序声明了它的成员......花了一段时间才找到那个！

再次感谢大家，写这个问题的过程和回答一样有帮助。大约在同一时间，我们都得出了相同的结论（我意识到这一点，就像你在我猜的回复中发布的那样）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:47:08.397

你的方法有误`myMethod`。
这段代码

```
myImplmentationOfAbstractClass myABC = new myImplmentationOfAbstractClass();
someFunctionality.myMethod(myABC);//this causes an NPE 
```

不能扔 NPE

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:49:57.480

> 您提供的代码片段没有任何问题，空指针异常的原因是其他原因......可能是如果您检查堆栈跟踪或者您可以准确识别导致问题的行，它将更好地帮助识别问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:51:15.603

第一个猜测：您的问题出在其他地方：如果参数类型应该是实现的超类或接口，则将实现作为参数提供没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:53:40.490

我刚刚意识到其中包含该函数的类没有正确构建，所以 NPE 是由于我在使用它之前没有将变量设置为 null 的愚蠢的方法！

所以对所有愿意回答的人+1。我在你们写作的时候意识到了这一点。

# vba - 从 Excel VBA 更新访问 - 非常慢

> ID：12459411
> 
> 赞同：0
> 
> 时间：2012-09-17T12:41:53.187
> 
> 标签：vba, ms-access, excel

我有下面的代码将新数据附加到现有的 Access 表中。

我上传大约 6000 条记录大约需要 35-40 分钟...

感谢任何帮助...

```
Sub Upload(Process_ID)

Dim Conn_DB As ADODB.Connection, CmdQuery As ADODB.Command, RecSet As ADODB.Recordset, StrSQL As String
Dim LastColumn As Integer, LastRow As Integer, ImportData(), I As Integer, ArrayRow As Integer

WS_Source.Select
LastRow = WS_Source.Cells(Rows.Count, 1).End(xlUp).Row
LastColumn = WS_Source.Cells(1, Columns.Count).End(xlToLeft).Column

'Load source data to array
ReDim ImportData(LastRow - 2, 25)
Select Case Process_ID
    Case 1, 2, 3
        For I = 2 To LastRow
            ImportData(ArrayRow, 0) = Cells(I, 1) 'username
            ImportData(ArrayRow, 1) = Cells(I, 2) 'creid
            ImportData(ArrayRow, 2) = Cells(I, 3) 'roleid
            ImportData(ArrayRow, 3) = Cells(I, 4) 'webtraceid
            ImportData(ArrayRow, 4) = Cells(I, 5) 'timestamp
            ImportData(ArrayRow, 5) = Cells(I, 6) 'action
            ImportData(ArrayRow, 6) = Cells(I, 7) 'Anti Fact
            ImportData(ArrayRow, 7) = Cells(I, 8) 'sourceid
            ImportData(ArrayRow, 8) = Cells(I, 9) 'source
            ImportData(ArrayRow, 9) = Cells(I, 10) 'personid
            ImportData(ArrayRow, 10) = Cells(I, 11) 'personname
            ImportData(ArrayRow, 11) = Cells(I, 12) 'orgid
            ImportData(ArrayRow, 12) = Cells(I, 13) 'orgname
            ImportData(ArrayRow, 13) = Cells(I, 14) 'rel type
            ImportData(ArrayRow, 14) = Cells(I, 15) 'oldvalue
            ImportData(ArrayRow, 15) = Cells(I, 16) 'new value
            ImportData(ArrayRow, 16) = Cells(I, 17) 'startdate
            ImportData(ArrayRow, 17) = Cells(I, 18) 'enddate
            ImportData(ArrayRow, 18) = Cells(I, 19) 'status
            ImportData(ArrayRow, 19) = Cells(I, 20) 'sourcetype
            ImportData(ArrayRow, 20) = Cells(I, 21) 'final score
            ImportData(ArrayRow, 21) = Cells(I, 22) 'ben
            ImportData(ArrayRow, 22) = Cells(I, 23) 'wpc
            ImportData(ArrayRow, 23) = Cells(I, 24) 'prw
            ImportData(ArrayRow, 24) = Cells(I, 26) 'serial
            ImportData(ArrayRow, 25) = Cells(I, 28) 'sample

            ArrayRow = ArrayRow + 1
        Next I
    Case Else: Exit Sub
End Select

'Load array data to database
Set Conn_DB = New ADODB.Connection
With Conn_DB
    .Provider = "microsoft.ACE.OLEDB.12.0"
    .ConnectionString = Location_DataBase
End With
Conn_DB.Open

StrSQL = "SELECT *"
Set CmdQuery = New ADODB.Command
With CmdQuery
    .ActiveConnection = Conn_DB
    .CommandText = StrSQL
    .CommandType = adCmdText
End With

For I = 0 To ArrayRow - 1
    Set RecSet = New ADODB.Recordset
    With RecSet
        Set .Source = CmdQuery
        .CursorType = adOpenKeyset
        .CursorLocation = adUseClient
        .LockType = adLockOptimistic
        .Open "tbl_crereport"
    End With
    If RecSet.State = adStateOpen Then
        With RecSet
            .AddNew
            Select Case Process_ID
                Case 1, 2, 3
                    .Fields("processedby") = ImportData(I, 0)
                    .Fields("creid") = ImportData(I, 1)
                    .Fields("roleid") = ImportData(I, 2)
                    .Fields("webtraceid") = ImportData(I, 3)
                    .Fields("processeddate") = ImportData(I, 4)
                    .Fields("action") = ImportData(I, 5)
                    .Fields("antifact") = ImportData(I, 6)
                    .Fields("sourceid") = ImportData(I, 7)
                    .Fields("source") = ImportData(I, 8)
                    .Fields("personid") = ImportData(I, 9)
                    .Fields("personname") = ImportData(I, 10)
                    .Fields("orgid") = ImportData(I, 11)
                    .Fields("orgname") = ImportData(I, 12)
                    .Fields("relationshiptype") = ImportData(I, 13)
                    .Fields("oldvalue") = ImportData(I, 14)
                    .Fields("newvalue") = ImportData(I, 15)
                    .Fields("startdate") = ImportData(I, 16)
                    .Fields("enddate") = ImportData(I, 17)
                    .Fields("crestatus") = ImportData(I, 18)
                    .Fields("sourcetype") = ImportData(I, 19)
                    .Fields("finalscore") = ImportData(I, 20)
                    .Fields("ben") = ImportData(I, 21)
                    .Fields("wpc") = ImportData(I, 22)
                    .Fields("prw") = ImportData(I, 23)
                    .Fields("Serial") = ImportData(I, 24)
                    .Fields("sample") = ImportData(I, 25)

                    .Fields("allocatedto") = User_ID
                    .Fields("allocationdate") = Now()
                    .Fields("updatedby") = User_ID
                    .Fields("updatedate") = Now()
                    .Fields("status") = 1
                Case Else: Exit Sub
            End Select
            .Update
        End With
    End If
    RecSet.Close
    Set RecSet = Nothing
Next I

'Close database
On Error Resume Next
RecSet.Close
Conn_DB.Close
Set CmdQuery = Nothing
Set RecSet = Nothing
Set Conn_DB = Nothing

End Sub 
```

感谢任何有助于加速代码的帮助。

我无法以目前的速度使用它。

谢谢，克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:50:39.987

3个小技巧：

*   如果您在 Access 中有索引，则追加/更新可能会比您预期的要慢得多。您可能希望在添加数据时删除这些索引。

*   您是否尝试过在 Access 中编写 VBA？这样您就可以批量导入 Excel 文件，进行必要的数据操作并将其一次性加载到您需要的表中（而不是逐条记录）。

*   我的 VBA 可能生锈了，但我认为您不必为每个要附加的新记录创建记录集。在循环之前创建一次，并且在加载所有记录之前不要关闭它。

问候，

# django - 如何在 Django 中使用 unicode 字符生成 pdf？

> ID：12459420
> 
> 赞同：2
> 
> 时间：2012-09-17T12:42:07.330
> 
> 标签：django, django-templates

我有模板：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>PRINT FILE</title>
    </head>
    <body>
        <center>ąśżźćę</center>
    </body>
</html> 
```

并查看：

```
@login_required
def print_to_pdf(request):
    data = dict()
    return render_to_pdf('print.html', { 'pagesize':'A4', 'pdf': '1', 'data': data }) 
```

和render_to_pdf：

```
def render_to_pdf(template_src, context_dict):
    template = get_template(template_src)
    context = Context(context_dict)
    html  = template.render(context)

    result = StringIO.StringIO()

    pdf = pisa.pisaDocument(StringIO.StringIO(html.encode('utf-8')), result, link_callback=fetch_resources, encoding='utf-8')
    if not pdf.err:
        return HttpResponse(result.getvalue(), mimetype='application/pdf')
    return HttpResponse('We had some errors<pre>%s</pre>' % escape(html))

def fetch_resources(uri, rel):
    path = os.path.join(settings.MEDIA_ROOT, uri.replace(settings.MEDIA_URL, ""))
    return path 
```

但是pdf没有特殊字符。我也试过字体。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:50:45.603

您可以使用**[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)**从 Html 生成 pdf 文件，它支持 Unicode 字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:53:47.607

我写（修改：[http](http://boris.kodmasin.net/python:djangoandwkhtmltopdf) ://boris.kodmasin.net/python:djangoandwkhtmltopdf ）这个函数：

```
def get_pdf(template_src, context_dict):
    template = get_template(template_src)
    context = Context(context_dict)
    html  = template.render(context)

    import subprocess
    wkhtml2pdf = subprocess.Popen((settings.WKHTML2PDF_COMMAND,
                                   "--footer-right",
                                   "[page]/[toPage]",
                                   "--print-media-type",
                                   "--encoding",
                                   "UTF-8",
                                   "-",
                                   "-"),
                                  stdin=subprocess.PIPE,
                                  stdout=subprocess.PIPE)
    wkdata = wkhtml2pdf.communicate(html.encode('utf8'))
    pdf = wkdata[0];

    response = HttpResponse(mimetype='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=printfile.pdf'
    response.write(pdf)
    return response 
```

并查看：

```
@login_required
def print_to_pdf(request):
    data = dict()
    return get_pdf('print.html', { 'data': data }) 
```

在 settings.py 中，您必须设置 WKHTML2PDF_COMMAND 变量（程序名称和路径）。

wkhtml 在这里：[http ://code.google.com/p/wkhtmltopdf/downloads/list](http://code.google.com/p/wkhtmltopdf/downloads/list)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T19:20:52.567

解决方案之一是使用[code2000](http://www-sul.stanford.edu/depts/sysdept/info/CODE2000.TTF)字体

*   下载“wget [http://www-sul.stanford.edu/depts/sysdept/info/CODE2000.TTF](http://www-sul.stanford.edu/depts/sysdept/info/CODE2000.TTF) ”
*   cp CODE2000.TTF ~/.fonts
*   sudo fc-cache -fv

这适用于所有 unicode 字符。

# php - 提供图像？htaccess 重定向图像文件夹？

> ID：12459423
> 
> 赞同：1
> 
> 时间：2012-09-17T12:42:22.397
> 
> 标签：php, image, .htaccess, hash, serving

我有一个上传图像的 php 脚本，将其重命名为随机散列，根据散列创建文件夹，将原始图像存储在最后创建的文件夹中，最后为它创建 2 个其他缩略图...

常规图像...`images/a3c/65c/297/108_a3c65c2974270fd093ee8a9bf8ae7d0b.jpg`

缩略图...`images/a3c/65c/297/108_a3c65c2974270fd093ee8a9bf8ae7d0b_t.jpg`

较小的缩略图...`images/a3c/65c/297/108_a3c65c2974270fd093ee8a9bf8ae7d0b_sm.jpg`

对于上传的每张照片，它将在数据库中存储一条新记录，其中包含照片 ID 和此信息

```
/a3c/65c/297/108_a3c65c2974270fd093ee8a9bf8ae7d0b 
```

（注意我没有存储“.jpg”或“_t.jpg”等）

现在为了让我提供图像（我不知道这是否是一个好习惯），目前我有这个返回图像的 php 函数......

```
function get_image($image_id,$type = '')
{
    $sql = "SELECT * FROM photos where photo_id = {$image_id}";
    $query = $this->db->query($sql);
    $r = $query->row();

    $image = base_url().'images/'.$r->dir_1 . '/' . $r->dir_2 . '/' . $r->dir_3 . '/'.$image_id.'_'.$r->img_hash;

    if($type == 'small')
        return $image.'_sm.jpg';
    if($type == 'reg_thumb')
        return $image.'_t.jpg';
    if($type == '' || $type == 'original')
        return $image.'.jpg';

} 
```

基本上，我想做一些像推特这样的图片网址看起来像这样的事情

```
https://twimg0-a.akamaihd.net/profile_images/2392722244/blah.jpg 
```

**问题...**

1.  我怎样才能实现这种类型的 url 结构？访问？
2.  我是否以正确的方式返回图像？
3.  我在做什么是安全、聪明和好的做法吗？如果没有，有更好的方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:23:46.827

IMO，您确实可以通过 url 重写来做到这一点。在 /etc/apache2/sites-available/yoursite ，

```
 <Directory />

            RewriteEngine On
            RewriteCond %{HTTP_REFERER}          profile_images/(\w+)/(\w+|.)+$

            RewriteRule ^/profile_images/(\w+)/         index.php?image_id=$1 [L,QSA]

            Options Indexes FollowSymLinks MultiViews
            AllowOverride None

            Order allow,deny
            allow from all
    </Directory> 
```

尝试解决这个问题。我认为它与 htaccess 中的指令非常相似。

```
Am I returning the images the right way? 
```

你是什​​么意思 ？你的“回报”会起作用。我会使用 switch/case 语句而不是 ifs。

```
is what im doing safe, smart, and a good practice? if not is there a better method? 
```

安全：你应该逃避你的输入。但是，如果您仅重定向图像名称为字母数字的图像，则应该不是问题

我不知道你为什么分解成这么多目录。每个图像+缩略图一个目录就足够了。不要担心使用 b-tree 或类似的东西进行索引，仅在您的数据库中使用索引就足够了。

最后但同样重要的是，如果我不需要在用户和图像之间建立链接，我只会使用 apache 的重写规则来实现这一点。

RewriteRule ^/profile_images/(\w+)(_\w+)?.(jpg|png)/images/$1/$1$2.$3

它不涉及 php 也不涉及 db，并且是在一行中完成的。

[https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

我不确定这是否有帮助，但你可能已经学到了一些东西。至少，你有另一个观点:)

# c# - 生成 AES 密钥并将其编码为 Base 64 字符串

> ID：12459424
> 
> 赞同：0
> 
> 时间：2012-09-17T12:42:24.853
> 
> 标签：c#, windows-8, windows-runtime

我需要生成一个 AES 密钥并将其发送到服务器。

创建密钥似乎不是问题：

```
 var aesProvider = SymmetricKeyAlgorithmProvider.OpenAlgorithm(SymmetricAlgorithmNames.AesEcbPkcs7);

   var aesKey = aesProvider.CreateSymmetricKey(CryptographicBuffer.GenerateRandom(16)); 
```

但是，将 AES 密钥导出为 base64 编码的字符串似乎是不可能的；

我尝试使用密钥对象上的 Export/ExportPublic 方法将其导出，但它们都抛出 NotImplemented 异常：

```
 aesKey.ExportPublicKey(); not implemented
 aesKey.ExportPublicKey(CryptographicPublicKeyBlobType.BCryptPublicKey);
 aesKey.ExportPublicKey(CryptographicPublicKeyBlobType.Capi1PublicKey);
 aesKey.Export();
 aesKey.Export(CryptographicPrivateKeyBlobType.BCryptPrivateKey);
 aesKey.Export(CryptographicPrivateKeyBlobType.Pkcs1RsaPrivateKey);
 aesKey.Export(CryptographicPrivateKeyBlobType.Pkcs8RawPrivateKeyInfo);
 aesKey.Export(CryptographicPrivateKeyBlobType.Capi1PrivateKey); 
```

# sql-server-2008 - SQL - 将存储过程多个记录集获取到临时表变量

> ID：12459428
> 
> 赞同：2
> 
> 时间：2012-09-17T12:42:40.770
> 
> 标签：sql-server-2008

是否可以将存储过程的多个结果集设置为临时表变量？

我写了一个存储过程，例如，

```
Create proc test1
(
 @param1 int,
 @param2 int
)
as
Begin
     Select Id, Name from Table1 where column1=@param1;
     Select Id, Age, Address from Table2 where column1=@param2;
End 
```

当我执行此 sp 时，它将返回 2 个表（记录集）。

现在，我想将这 2 个记录集设置为 2 个临时表变量。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:44:55.870

我不相信存储过程可以像您希望的那样返回多个结果集。我可能建议让存储过程将结果存储在两个全局临时表中，然后让调用进程（无论调用你的存储过程）查询两个全局临时表并将结果放入你的临时表变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:16:57.330

我知道这是一个老问题，也许我误解了你想要什么，但如果你只想把这两个记录集放入临时表中，你不能这样做：

```
Create proc test1
(
 @param1 int,
 @param2 int
)
as
Begin
     Select Id, Name 
          into #temp1
          from Table1 where column1=@param1;
     Select Id, Age, Address 
          into #temp2
          from Table2 where column1=@param2;
End 
```

现在，我不知道你想用这个实现什么，但取决于你如何调用那个 sp，#temp 表可能无法从 sp 外部访问。

# sql - QUERY 和 IF 函数

> ID：12459434
> 
> 赞同：0
> 
> 时间：2012-09-17T12:43:16.013
> 
> 标签：sql, if-statement, google-sheets, google-sheets-formula

我有一个长长的查询函数到三个单元格的 if 函数（下面是一个包含两个单元格的简单版本）：

```
=IF(B2="All";Query(Sheet!1:100000;"select B,C,F"); Query(Sheet!1:100000;"select B,C,F where C contains """&B2&""" and B contains """&D2&"""  ") 
```

B2 和 D2 是我有填写查询的项目列表的单元格

现在我想要：在查询的开头插入一个空白值。我可以用：

```
if (isblank(B2);iferror(1/0) 
```

但不与两个或更多细胞一起使用。

```
=if (isblank(B2);iferror(1/0), if(isblank(D2);iferror(1/0),,IF(B2="All";Query(Sheet1!1:100000;"select B,C,F"); Query(Sheet1!1:100000;"select B,C,F, where C contains """&B2&""" and B contains """&D2&""" ")))) 
```

此外，我想学习使用不同的条件（使用 OR 和 AND）。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T18:52:45.720

我也不知道你想要什么，但我猜它可能是：

```
=IF(or(ISBLANK(B2),isblank(D2)),iferror(1/0),if(B2="All",Query(Sheet4!1:100000,"select B,C,F"), Query(Sheet4!1:100000,"select B,C,F where C contains """&B2&""" and B contains """&D2&""" ",C9))) 
```

# data-structures - 在这种情况下如何将递归修改为循环版本？

> ID：12459435
> 
> 赞同：1
> 
> 时间：2012-09-17T12:43:15.303
> 
> 标签：data-structures, compiler-construction, recursion, binary-tree, tail-recursion

我想修改下面的 c++ 代码，使用循环而不是递归。我知道修改它的两种方法：

1.  从代码中学习并制作循环算法。在这种情况下，我认为代码的含义是按级别顺序打印B（叶子除外）和打印A（期望根）。对于二叉（搜索）树，如何在循环中从叶子到根遍历它（没有指向父级的指针）？

2.  使用栈来模仿栈上的进程。在这种情况下，我做不到，你能帮我说一些有用的想法吗？

    ```
    void func(const Node& node) {

        if (ShouldReturn(node)) {
            return;
        }

        for (int i = 0; i < node.children_size(); ++i) {
            const Node& child_node = node.child(i);
            func(child_node);
            PrintA();
        }

        PrintB();
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:22:33.340

假设您使用的是 C++

对于堆栈部分，可以说，代码执行以下操作。

1.  如果 Node 是叶子，什么都没有。
2.  否则对每个孩子做同样的事情，然后在每个孩子之后打印A。
3.  然后打印B。

那么如果我稍微调整一下代码会怎样。调整只适合迭代方式。

```
void func(const Node& node) {
    if(ShouldReturn(node)) return;
    PrintB();
    for(int i = 0; i < node.children_size(); ++i) {
        printA();
        const Node& child_node = node.child(i);
        func(child_node, false);
    }
}
// This way should make it print As & Bs in reverse direction.
// Lets re-adjust the code even further.

void func(const Node& node, bool firstCall = true) {
    if(!firstCall) printA; //Placed that here, as printA is always called if a new Node is called, but not for the root Node, that's why I added the firstCall.
    if(ShouldReturn(node)) return;
    PrintB();
    for(int i = 0; i < node.children_size(); ++i) {
        const Node& child_node = node.child(i);
        func(child_node, false);
    }
} 
```

那应该颠倒打印 A 和 B 的顺序，我希望我没有错 :D 所以，现在我想要 2 个向量。

```
// Lets define an enum
typedef enum{fprintA, fprintB} printType;

void func(const Node& node){
     vector<printType> stackOfPrints;
     vector<Node*> stackOfNodes; stackOfNodes.push_back(node);
     bool first = true; //As we don't need to printA before the root.
     while ((int)stackOfNodes.size() > 0){
         const Node& fNode = stackOfNodes.back();
         stackOfNodes.pop_back();
         if (!first) stackOfPrints.push_back(fprintA); // If not root printA.
         first = false;
         if(ShouldReturn(fNode)) continue;
         stackOfPrints.push_back(fprintB);
         // here pushing the Nodes in a reverse order so that to be processed in the stack in the correct order.
         for(int i = (int)fNode.children_size() - 1; i >= 0; --i){
               stackOfNodes.push_back(fNode.child(i));
         }
     }

     // Printing the stackOfPrints in reverse order (remember we changed the code, to initially print As & Bs in reverse direction) 
     // this way, it will make the function print them in the correct required order
     while((int)stackOfPrints.size() > 0){
         switch(stackOfPrints.back()){
            case fprintA: printA(); break;
            case fprintB: printB(); break;
            default: break;
         };
         stackOfPrints.pop_back();
     }
} 
```

让我们希望我正确地编写代码。:) 我希望它有所帮助。

# c - 结构上的memcpy错误

> ID：12459436
> 
> 赞同：0
> 
> 时间：2012-09-17T12:43:17.980
> 
> 标签：c, struct, memcpy

memcpy 出现以下错误。它没有给出编译错误，但没有给出我想象的结果。我以前从未使用过 memcpy，所以我确定我犯了一个简单的错误。我已经查看了以前的问题，但找不到具有结构的问题。我可以在自变量上使用 memcpy，但不能在结构上使用。

如果有人能指出我的错误，那就太好了。

```
#include <stdio.h>
#include <string.h>

int main() {
 struct st{
 char c1[12];
 char c2[32];
 char c3[3];
 char c4[7];
 char c5[13];
 char c6[5];
 char c7[10];
 };
 struct st s;
 char s1[] = "part number";
 char s2[] = "j9uijd9d09fj";
 char s3[] = "abc";
 char s4[] = "seven";
 char s5[] = "aaaaaaaa";
 char s6[] = "ptype";
 char s7[] = "user";
 memcpy(s.c1,s1,sizeof(s.c1));
 memcpy(s.c2,s2,sizeof(s.c2));
 memcpy(s.c3,s3,sizeof(s.c3));
 memcpy(s.c4,s4,sizeof(s.c4));
 memcpy(s.c5,s5,sizeof(s.c5));
 memcpy(s.c6,s6,sizeof(s.c6));
 memcpy(s.c7,s7,sizeof(s.c7));
 printf("%s\n",s.c1);
 printf("%s\n",s.c2);
 printf("%s\n",s.c3);
 printf("%s\n",s.c4);
 printf("%s\n",s.c5);
 printf("%s\n",s.c6);
 printf("%s\n",s.c7);
 return 0;
} 
```

输出我得到：

```
part number
j9uijd9d09fj
abcseven
seven
aaaaaaaa
ptypeuser
user 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:46:00.977

`c3`将结构中的大小更改为`4`和`c6`以`6`允许`NULL`终止符。

```
struct st{
    char c1[12];
    char c2[32];
    char c3[4]; /* putting 'abc' which is 4 chars */
    char c4[7];
    char c5[13];
    char c6[6]; /* putting 'ptype' which is 6 chars */
    char c7[10];
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:46:52.177

`printf`with`%s`打印一个以 null 结尾的字符串。`s3`(and `s6`) 在这种情况下，空终止字符被覆盖，`c`所以`printf`当它到达下一个字符时停止打印，即 after `seven`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:51:06.547

您的代码在两件事上是错误的：

1.  `s.c3`长度为 3 个字符，因此没有多余的 NUL 字节空间。这就是为什么你在打印时将它与下一个连接起来。
2.  在某些情况下，您复制的字节数比原始字符串中的字节数多：`memcpy(s.c2,s2,sizeof(s.c2))`复制 32 个字节，但原始字符串要短得多。那是未定义的行为。

可能你想使用`strcpy()`.

甚至`strncpy`，但要小心！这个功能并没有像大多数人想象的那样......在使用它之前至少阅读文档两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:48:09.733

在结构中，成员`c3`是三个字符的数组。然后你把*四个*字符复制进去！请记住，字符串有一个结束字符串的额外字符，因此字符串`"abc"`实际上是四个字符：`'a'`、`'b'`和`'c'`终止符`'\0'`。

对于`c6`结构的成员也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:53:32.927

您面临的问题是缺少字符序列的 NUL 终止符。

构造它们时的字符序列总是比您输入的字符数长一个字符。末尾的附加字符是 NUL 终止符。

因此，您复制内容的数组需要比您要复制的字符数长一个字符。因为`c3`字符数太少，导致 NUL 终止符丢失。

`printf`然后逐个字符打印您的字符串，直到它看到 NUL 终止符。如果它丢失，`printf`只需继续读取内存，直到它到达第一个`0x00`字节。在这种情况下，您很幸运，因为您使用的是结构。结构被写入一个内存块，因此`printf`只需放入下一个字段。

您只需确保结构中的数组大小始终大于您要复制的字符序列即可解决您的问题。

# asp.net - 如何在 ASP.Net 中创建 FaceBook 和 Gmail 类型的基于网络的聊天

> ID：12459439
> 
> 赞同：0
> 
> 时间：2012-09-17T12:43:31.583
> 
> 标签：asp.net, facebook

如何在 ASP.Net 中创建 FaceBook 和 Gmail 类型的基于网络的聊天？

我认为它称为一对一聊天。

我尝试过 XMPP 但需要基本示例代码

我已经安装了明火。任何人都可以有这种类型的示例代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:45:15.270

看看[SignalR](http://signalr.net/)是构建聊天应用程序的好选择。

# git - 搜索特定的提交

> ID：12459440
> 
> 赞同：2
> 
> 时间：2012-09-17T12:43:33.687
> 
> 标签：git

我正在处理一个混合 C++ 代码和 HTML 模板文件的大型项目。

我今天了解到，我应该将我对 C++ 文件（*并且只有那些*）所做的更改合并到另一个分支上，但正如您可能猜到的那样：我不记得我所做的所有提交。

有没有办法让我通过 git 历史搜索符合**所有这些条件**的所有提交？

*   是我写的
*   位于commit`A`和commit之间`B`
*   包含对或文件的更改（如果有帮助`.cpp`，它们位于特定的子目录中）。`.c``.h`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:15:19.017

我终于想出了如何做到这一点：

要搜索与特定作者匹配的提交，您可以使用以下`--author`选项：

```
git log --author=ereOn 
```

要搜索从 commit`A`到的提交`B`，请使用以下`A..B`形式：

```
git log 9223253452..HEAD 
```

最后，只关心涉及特定文件或路径的提交：

```
git log -- path_or_file 
```

`--`用于指示可选参数的结束和位置参数的开始。

所有结合起来，这给出了：

```
git log --author=ereOn 9223a6d916c034345..HEAD -- cpp_folder/* 
```

这就像一个魅力:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:00:18.717

查看`git log`，运行`git log --stat`将显示您正在寻找的许多详细信息，您可以通过管道将其搜索为 grep like `git log --stat | grep searchterm`，但这只会为您提供与您的搜索词相关的行。

您可以使用此标志将其限制为作者`--author "your name"`

在我的机器上`git log`的输出是通过 vim/less 运行的，你可以使用 vim 的搜索命令搜索日志`/searchterm`，找到所有出现的术语，转到下一个命中`n`转到上一个命中`N`

查看手册页[`git log`](http://csurs.csr.uky.edu/cgi-bin/man/man2html?1+git-log)

# php - 中止AJAX连接后PHP执行代码

> ID：12459449
> 
> 赞同：0
> 
> 时间：2012-09-17T12:43:58.530
> 
> 标签：php, ajax, connection

我目前正在研究使用网络前端编辑文章的锁定/解锁功能。作为在编辑、关闭浏览器或离开页面后解锁文章的可靠技术，我开发了以下概念：

1.  访问编辑页面时锁定文章
2.  立即向解锁操作发送 AJAX 请求而不超时

解锁操作具有以下代码。在取消 ajax 请求之前，它应该什么都不做。

```
ignore_user_abort(true);
set_time_limit(0);

while (!connection_aborted()) {

    usleep(100000);
}

// do database operations to unlock the article 
```

但是在 ajax 请求被 ie 取消之后。离开页面，它永远不会离开while循环。我也试过这个来测试一个中止的连接：

```
while (connection_status() === CONNECTION_NORMAL) 
```

但结果相同，它永远不会离开循环。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:54:47.307

引用自 PHP 手册

> > 在尝试向客户端发送信息之前，PHP 不会检测到用户已中止连接。简单地使用 echo 语句并不能保证发送信息，请参见 flush()。

因此，在您的 while 循环中，您应该向客户端发送虚拟数据：

```
ignore_user_abort(true);
set_time_limit(0);

while (!connection_aborted()) {
    echo "null"; @flush(); @ob_flush();
    usleep(100000);
}

// do database operations to unlock the article 
```

# c++ - 就地数据操作

> ID：12459452
> 
> 赞同：0
> 
> 时间：2012-09-17T12:44:17.697
> 
> 标签：c++, memory

一旦你声明了一个变量，你就开始操作它。我的问题是关于操纵的速度，如果这很重要的话。
假设您有一个变量`total`，它是数组中所有值的总和。你想找到平均值，所以你会这样做`total / length`。您是更快地声明一个新值（即`double avg = total / length`），还是更快地“就地”完成所有事情（`total \= length`），这当然会忽略`total`平均值的一个糟糕的变量名称这一事实，但这只是为了明白我的意思

我怀疑处理器需要从 RAM 中复制数据以在 ALU 中进行计算，甚至通过位移在 CPU 中进行硬连线计算，但我不太确定 C++ 如何处理内存，我很好奇它是如何工作的在后端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:50:23.707

假设您的意思是`total /= length`，您只会看到重要的差异（即，当您实际上需要同时使用`total`和`avg`时，在这种情况下，您无论如何都不能使用第二个版本）。

我反对使用`total /= length`，因为`total`它变成了一个平均值，并且在语义上不再正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:55:43.350

这取决于您使用平均值的频率。如果只使用几次，则可以忽略不计，但如果您需要使用该平均值数百或数千次，那么使用变量*可能*会“更快”，因为您不必一直进行计算。然而，今天的编译器在优化方面非常好，所以实际上它可能并不重要。

唯一可以确定的是对其进行测试，进行一些分析和测量。在考虑手动优化之前您应该*始终*做的事情（我怀疑计算平均值，甚至更复杂的事情会成为瓶颈。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T12:47:52.693

这取决于打开优化后编译器会做什么。

# javascript - 跨域请求和纯 JavaScript

> ID：12459454
> 
> 赞同：1
> 
> 时间：2012-09-17T12:44:24.590
> 
> 标签：javascript, cross-domain, jsonp

在网站`AAA.com`上将包含来自网站的 javascript，`BBB.com`它必须是非阻塞执行脚本。

抓取的 javascript`BBB.com`将提取`meta keywords`, `meta title`from`AAA.com`并将这些数据发送到特定的 url 到网站`BBB.com`

该`BBB.com`网站将发回视频播放器的网址。

我想我会遇到问题，因为这显然是一个跨域请求，我想通过`JSON-P`请求来解决，但问题是我们不能使用`jQuery`.

请问您将如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:54:03.287

BBB.com 的第一个脚本必须解析关键字，将它们序列化为 URL 查询，并动态创建第二个`<script>`标签，从 BBB.com 加载内容（这是您绕过 SOP 限制的方法）。

来自 BBB.com 的内容通常是对第一个知道如何使用内容的脚本中的某个函数的调用。

例如，第一个脚本可能看起来像

```
function showVideoPlayer(parameters) {
   // ...
}

var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'http://bbb.com/crossdomain?'; // includes serialized meta keywords
// and now append script to e.g. the body so that the request is made 
```

返回的内容将是

```
showVideoPlayer({param1: "value1", param2: "value2"}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:51:53.077

JSON-P 和 CORS 都与 jQuery 没有任何关系。它也恰好是用 Javascript 编写的库，因此永远不可能做 Javascript 本身不能做的任何事情。

此外，您的方案看起来根本不需要任何跨域请求。只需在您的 AAA.com 页面上添加类似的`<script src="http://BBB.com/script.js"></script>`内容，它就会起作用，因为`<script>`标签不会施加任何来源限制，而且从来没有这样做过。使用动态创建`<iframe>`和/或`<form>`标签将结果异步提交回 BBB.com，`POST`或几乎任何带有`src`( `<img>`, `<script>`) 的东西将它们提交为`GET`.

# java - Firefox中的WebSocket建立两个连接

> ID：12459457
> 
> 赞同：5
> 
> 时间：2012-09-17T12:44:35.280
> 
> 标签：java, javascript, firefox, websocket

我正在用 Java 编写 WebSocket 服务器。当我在firefox中使用WebSocket连接服务器时，我发现有两个连接建立了，其中一个从来没有发送任何数据...
我的firefox版本是15.0.1
相同的代码在Chrome中运行是可以的，连接一次，建立只有一个连接。
有没有人有这样的烦恼？

有服务器的代码：

```
ServerSocket svrSock = new ServerSocket();
svrSock.bind(new InetSocketAddress("0.0.0.0", 11111));
while(true) {
    try {
        // accept connection
        Socket clientSock = svrSock.accept();
        // print the socket which connected to this server
        System.out.println("accept socket: " + clientSock);

        // run a thread for client
        new ClientThread(clientSock).start();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

还有js代码：

```
var url = 'ws://localhost:11111/test/';
var ws = new WebSocket(url);
ws.onopen = function(){
    console.log('connected!');
    ws.send(11111);
    ws.close();
};
ws.onclose = function(){
    console.log('closed!');
}; 
```

当我在 Firefox 中运行这个 js 代码时，我在我的服务器控制台中得到了这个：

> 接受套接字：Socket[addr=/127.0.0.1,port=56935,localport=11111]
> 接受套接字：Socket[addr=/127.0.0.1,port=56936,localport=11111]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T14:37:50.117

这是 Firefox 15 中的一个问题，将在 Firefox 16 中修复：[https ://bugzilla.mozilla.org/show_bug.cgi?id=789018](https://bugzilla.mozilla.org/show_bug.cgi?id=789018)

Firefox 15 正在做一个推测连接，这对 HTTP/SPDY 来说很好，但因为 WebSocket 握手是 HTTP 1.0（而不是 1.1），它不能重用推测连接，必须建立第二个连接。

如果您的服务器是正确的多线程并且可以接受多个连接，这不是一个关键问题，但这很烦人。

# jquery - 隐藏具有公共类 Jquery 的下拉元素

> ID：12459460
> 
> 赞同：1
> 
> 时间：2012-09-17T12:44:42.720
> 
> 标签：jquery, drop-down-menu

我有 2 个下拉菜单，我希望第二个下拉菜单在`$('#first_dropdown').change()`发生时隐藏/显示某些元素（有一个类）

我尝试了同样的方法，但收效甚微，我怎样才能达到同样的效果，我想`<option>`在我的第二个下拉列表中隐藏一大块我该怎么做？

我尝试过的代码：

```
var a = $('#first_dd').val(); //first dropdown - dd value
$('#first_dd').change(function(){
$('.a').hide();        //iv given a class to all elements of second dropdown
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:02:02.583

您无法在所有浏览器的选择框中隐藏选项。您需要将您的选项存储在一个数组中，并从选择元素中实际删除它们。当第一个选择元素发生变化时，重建第二个选择元素可能更容易，而忽略了您不想要的选项。

使用 Kakarott 的小提琴作为基础，我会这样做：

[演示](http://jsfiddle.net/PnSCL/58/)

这应该适用于所有浏览器。

**如果您尚未在 select1 中选择任何内容，则更新小提琴以不显示任何选项**。****

 ****最终代码：**

HTML

```
<select name="select1" id="category">
    <option value="0">None</option>
    <option value="1">First</option>
    <option value="2">Second</option>
</select>

<select name="items" id="select2">
    <option value="0" class="1">Item 1</option>
    <option value="1" class="1">Item 2</option>
    <option value="2" class="2">Item 3</option>
    <option value="3" class="2">Item 4</option>
</select> 
```

JS

```
/* Taking an array of all options-2 and save it on select1 */
$("#category").data('options',$('#select2 option').clone());
$("#select2").html("");

$("#category").change(function() { 
    var itemClass = $(this).val();
    var options = $(this).data('options').filter('.' + itemClass);
    $('#select2').html(options);
}); 
```

​更新 **：额外说明**

这一行：

```
$("#category").data('options',$('#select2 option').clone()); 
```

选择第一个选择框，并使用`.data`方法将一些数据附加到该选择框。**哪些数据？**选择框 2 包含的所有选项。**如何？**通过选择所有选项选择框 2 包含，并克隆它们（复制它们）。

它保存了这组选项，因为这样我们可以一次又一次地使用这个集合，使用选择框 1 中的选定值对其进行过滤，并将其余选项设置为选择框 2 的内容，替换之前的任何选项。这发生在这一行：

```
var options = $(this).data('options').filter('.' + itemClass); 
```

所以我们不必隐藏任何选项，我们只需每次都用过滤后的所有可用选项集*替换它们。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T13:03:27.777

因此，您正在尝试根据第一个下拉菜单的更改来更改第二个下拉菜单。

这个小提琴可以帮助你：

[**jsFiddle**](http://jsfiddle.net/PnSCL/2/)**

# entity-framework - 为什么实体框架缺少以“状态”结尾的表中的最后一个 s

> ID：12459466
> 
> 赞同：8
> 
> 时间：2012-09-17T12:44:55.460
> 
> 标签：entity-framework

这是一个非常奇怪的错误，我在网上查看过，看不到任何明显的原因。

我正在使用 Database First Entity Framework 版本 5 并添加了 4 个名为：

*   工作状态
*   工作现状
*   子作业状态
*   子工作阶段状态

JobStatus、SubJobStatus 和 SubJobStageStatus 各有一个对 WorkStatus 的外键约束。

我已经更新了我的 edmx 以包含这些表，但由于某种原因，每个表都缺少单词 Status 中的最后一个 s。所以现在调用表格及其导航属性：

*   工作状态
*   工作状态
*   子作业状态
*   子工作阶段状态

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T12:50:51.453

“-Status”被解释为复数形式，而实体框架通过去复数化来“有帮助”。

例如，如果您有一个名为“Customers”的表，EF 将生成一个名为“Customer”的实体，这实际上在代码中更好：

```
var customer = new Customer(); 
```

在您的情况下效果不佳；你的桌子已经是单数了。

您可以将表重命名为“-Statuses”或更新设计器中的名称或禁用复数：

在下面`Tools > Options` [![在此处输入图像描述](../Images/8d87ebf64569b24dd1f9845127ed8212.png)](https://i.stack.imgur.com/egmHj.jpg)

# c++ - Qt：派生 QList 中的 QMutex 成员 , 无法访问 QMutex 成员编译错误

> ID：12459470
> 
> 赞同：0
> 
> 时间：2012-09-17T12:45:08.473
> 
> 标签：c++, qt4

我有一个派生`QList<MyClass>`，有一个成员`QMutex`。

```
class WaypointList : public QList<Waypoint> {
private:
    mutable QMutex _mutex; /*!< Mutex for thread safety */
    ..
} // HERE COMPILE ERROR, in this line 
```

编译，我得到`C2248: 'QMutex::operator =' : cannot access private member declared in class 'QMutex'`

原因是`QMutex`不可复制（`Q_DISABLE_COPY`相关的[SO Question](https://stackoverflow.com/questions/2652504/how-do-i-copy-object-in-qt)）。这里建议[将成员设为指针](https://stackoverflow.com/questions/9507604/cannot-access-private-member-declared-in-class-qreadwritelockerror1error-c22)。**这是最好的方法吗？**

评论：

1.  当我`QMutex _mutex`在派生`Q_OBJECT`类中使用时，它工作正常。知道为什么我在这里得到错误而不是在`Q_OBJECT`课堂上吗？
2.  在其他语言中，我将成员声明为瞬态。其实我**不想**复制它。是否有忽略它的声明？
3.  还是编写赋值/复制运算符是更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:33:11.720

QObject 没有问题的原因是 QObject 也是不可复制的，所以这不是问题。

在您的情况下，正确的答案是定义您自己的复制和赋值运算符，以便它们复制/分配列表，但对象有它自己的互斥锁。这样，它的行为就会如您所愿。C++ 中没有关键字告诉编译器你想要这种行为，你必须自己做。在这种情况下，由于它是互斥体，您可能希望正确使用互斥体以确保副本是原子的。

另一种选择是禁用新课程的复制/分配，但从你的问题来看，我不相信这是你想要做的。最后，如果您决定使用指向 QMutex 的指针，您可能需要创建自己的复制/赋值运算符来正确处理原始指针，以防止泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:32:10.473

`Q_OBJECT`是一个必须出现在类定义的私有部分中的宏，它声明它自己的信号和槽，或者使用 Qt 的元对象系统（[这里](http://doc.qt.io/archives/qt-4.8/qobject.html#Q_OBJECT)）提供的其他服务。此宏要求该类是`QObject`. `QObject`既没有复制构造函数也没有赋值运算符（[看看这里](http://doc.qt.io/archives/qt-4.8/qobject.html#no-copy-constructor-or-assignment-operator)）。

对不起，如果我重复你知道的事情。我建议使用`Q_DISABLE_COPY`宏显式禁用类的复制构造函数和赋值运算符：

```
class WaypointList : public QList<Waypoint> {
private:
    Q_DISABLE_COPY(WaypointList)
    mutable QMutex _mutex; /*!< Mutex for thread safety */
    ..
}; 
```

希望，这会有所帮助。

# jquery - 如何编写一个菜单ul li a的Click函数？

> ID：12459476
> 
> 赞同：0
> 
> 时间：2012-09-17T12:45:28.973
> 
> 标签：jquery, css, asp.net-web-api, jquery-events, getjson

我正在研究**webapi**。我需要获得子菜单。

我从数据库（动态）获取数据作为参数。

我需要“主页”的点击功能。如果我单击主菜单，我应该让光标移动到控制器。

**代码**

```
<script type="text/javascript">
    var Url = "/api/MenuItem";
    (function ($) {
        $.buildMenu = function (MenuId, CurrentPage) {
            $.getJSON(Url, function (data) {
                alert(data);
                var item = data;

                alert(item.toString());
                $('.' + MenuId).append("<ul>");
                for (var i = 0; i < item.length; i++) {
                    if (CurrentPage == item[i].MenuName)
                        $('.' + MenuId).append('<li><a href="#" class="parent"><span>' + item[i].MenuName + '</span></a></li>');
                    //$('.' + MenuId).append("<li><a  class='main_menu_active'>" + item[i] + "</a></li>");
                    else $('.' + MenuId).append('<li><a href="#" class="parent"><span>' + item[i].MenuName + '</span></a></li>');
                }
            });
        }
    })(jQuery);
    </script>

 // click function
    <script type="text/javascript">
    $(function() {
 // run the currently selected 
      $(".menu li a").click(function(){ 
      alert('1');
            var prodcuts = $(".parent").val();
            $.get("/api/MenuItem", { submenu: prodcuts }, function (data) {
                alert('submenu');
            });
        }); 
        });  
    </script>

//calling script
<script type="text/javascript">
    $(document).ready($.buildMenu("menu", ''));
   </script> 
```

**HTML**

```
<div id="menu">
 <ul class="menu">
   </ul>
</div> 
```

我需要创建一个点击功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:09:29.860

创建菜单后试试这个

```
$(".menu li a").bind("click", function_name); 
```

# php - Phonegap 文件上传适用于本地服务器，但不适用于远程服务器

> ID：12459478
> 
> 赞同：0
> 
> 时间：2012-09-17T12:45:35.870
> 
> 标签：php, android, ajax, cordova, file-upload

在 Android 上，我使用的是 Phonegap

```
var ft = new FileTransfer();

ft.upload(pic_to_upload, "http://" + app_domain + "/test_phonegap.php/",
          success, failure, options); 
```

如果我将域设置为 localhost 或 127.0.0.1 或 10.0.0.6（内部 IP），它可以工作，但如果我使用网站的实际域，它就不起作用。

更具体地说，发生的是执行 php 脚本（服务器是 Apache），但是如果我查看 $_REQUEST 或 $_FILE 变量它们是空的，而使用 localhost 它接收一切都很好。

我已经放入了我的 xml/config.xml：

```
<access origin="http://127.0.0.1*"/> <!-- allow local pages -->
<access origin="http://www.domain.com/"/> 
```

其中 domain.com 是我向其发送请求的域，同样，它确实收到了请求，但没有 $_REQUEST 或 $_FILE 变量（也没有 $_GET 和 $_POST，所有这些变量都是空的）

可能出了什么问题？我完全感到困惑。

我所做的所有其他 AJAX 请求都是 JSONP 并且可以正常工作，但是对于文件上传，它就无法正常工作。

此外，我在上周的 Apache 错误日志中什么也看不到，因此错误日志中没有任何关于此的内容。

感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:54:45.230

将您的域添加到 phonegap/cordova 白名单，除非您将域添加到白名单 phonegap 将阻止任何访问它们以获取更多信息的尝试：

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

# active-directory - 获取 Active Directory 中安全组而不是文件夹文本文件的访问权限列表的示例

> ID：12459482
> 
> 赞同：0
> 
> 时间：2012-09-17T12:45:40.250
> 
> 标签：active-directory

我需要一个示例（代码片段）来获取 Active Directory 中安全组的访问权限列表，而不是 Windows XP 中的文本文件/文件夹。

是否可以给我一个代码片段，以获得安全组的**所有**安全权限（读取、写入、完全控制）例如：`Domain Controllers`在`ACTIVE DIRECTORY`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:07:23.310

权限存储在单独的文件系统项目上，例如文件和/或目录 - 或其他对象（如注册表项等）。当您拥有 AD 组或用户帐户时，您可以读取它的 SID（安全标识符）属性 - 该 SID 将显示在整个 Windows 的 ACL（访问控制列表）中 - 但从用户或组，没有机制可以获取所有它可能在机器/服务器的任何地方拥有权限。

例如，可以使用 FileInfo 和 DirectoryInfo 类上的 .GetAccessControl() 方法检索文件和目录的权限：

```
FileInfo info = new FileInfo(@"D:\test.txt");
FileSecurity fs = info.GetAccessControl();

DirectoryInfo dir = new DirectoryInfo(@"D:\test\");
DirectorySecurity ds = dir.GetAccessControl(); 
```

# symfony1 - Symfony 1.4 ghost user - 当前用户更改为不同用户

> ID：12459483
> 
> 赞同：0
> 
> 时间：2012-09-17T12:45:43.487
> 
> 标签：symfony1, symfony-1.4, sfguard

我有以下代码在我的应用程序中显示当前登录的用户。奇怪的是，当用户从一个页面浏览到另一个页面时，登录用户的用户名会偶尔更改为数据库中的另一个用户。注销并重新登录然后显示当前用户名。

```
 <? if ($sf_user->isAuthenticated()){?>
  <div id="welcome">
   You are signed in as <strong><?php echo sfContext::getInstance()->getUser()->
   getGuardUser()->getName()?></strong> <a href="/logout" class="button">Logout</a>
  </div>
  <div class="clear"></div>
 <? } ?> 
```

任何想法可能导致的事情？

我可以确认两个用户都在同一天登录但在不同的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:49:33.187

`$sf_user`改为在您的视图中使用`sfContext`

像：

```
<? if ($sf_user->isAuthenticated()){?>
       <div id="welcome">
              You are signed in as <strong><?php echo $sf_user->getName()?></strong> <a href="/logout" class="button">Logout</a>
        </div>
        <div class="clear"></div>
<? } ?> 
```

# php - 下面的 curl 方法需要实现 Zend_Rest_Client

> ID：12459493
> 
> 赞同：0
> 
> 时间：2012-09-17T12:46:10.597
> 
> 标签：php, zend-framework, curl, zend-rest

我通常使用 curl 来调用 rest api 像这样

```
$user_data = array("userName" => "myuser@mydomain.com" ,"password" => "mydomain123" );
$data = json_encode($user_data);
$headers = array('Accept: application/json', 'Content-Type: application/json',);
$handle = curl_init();
curl_setopt($handle, CURLOPT_URL, 'http://myursl.com/myapi/v1/Api.svc/something/someother');
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_setopt($handle, CURLOPT_RETURNTRANSFER, true);
curl_setopt($handle, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($handle, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($handle, CURLOPT_POST, true);
curl_setopt($handle, CURLOPT_POSTFIELDS, $data);
$response = curl_exec($handle);
$code = curl_getinfo($handle, CURLINFO_HTTP_CODE);
curl_close($handle);
print_r($response); 
```

上面的代码在 API 上运行良好并打印了预期的响应，当我使用 Zend Framework 的 Zend_Rest_client 做同样的事情时

像这样

```
$base_url = 'http://myursl.com/myapi/v1_0/Api.svc';
$endpoint = '/something/someother';
$user_data = array("userName" => "myuser@mydomain.com" ,"password" => "mydomain123" );
$client = new Zend_Rest_Client($base_url);
$response = $client->restPost($endpoint, $user_data); 
```

我收到这样的 404 错误

```
(Zend_Http_Response)#62 (5) { ["version":protected]=> string(3) "1.1" ["code":protected]=> int(404) ["message":protected]=> string(9) "Not Found"] } 
```

实际上我在实现 Zend Rest Client 时错在哪里

提前感谢您回复此帖子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T16:12:05.657

虽然它可能不是最好的解决方案，但我最终还是继承了 Zend_Rest_Client 并重写了 _performPost() ，如下所示：

```
class My_Rest_Client extends Zend_Rest_Client {
    protected function _performPost($method, $data = null)
    {
        $client = self::getHttpClient();
        if (is_string($data)) {
            $client->setRawData($data, 'application/json');
        } elseif (is_array($data) || is_object($data)) {
            $client->setParameterPost((array) $data);
        }
        return $client->request($method);
    }
} 
```

接着：

```
$rest = new My_Rest_Client('http://my.rest.url');
$rest->restPost('post-path', $data); 
```

# php - 显示日期和时间限制的结果

> ID：12459495
> 
> 赞同：0
> 
> 时间：2012-09-17T12:46:19.163
> 
> 标签：php, mysql, date, filter

我有一个列表，其中显示了从一开始就向公司下达的所有订单。用于此的 php 脚本如下所示：

```
<?php
    if (isset($HTTP_GET_VARS['cID'])) {
      $cID = tep_db_prepare_input($HTTP_GET_VARS['cID']);
      $orders_query_raw = "select o.orders_id, o.customers_id, o.customers_name, o.customers_id, o.payment_method, o.date_purchased, o.franchise_id, o.last_modified, o.date_allocated, o.currency, o.currency_value, s.orders_status_name, ot.text as order_total from " . TABLE_ORDERS . " o left join " . TABLE_ORDERS_TOTAL . " ot on (o.orders_id = ot.orders_id), " . TABLE_ORDERS_STATUS . " s where o.customers_id = '" . (int)$cID . "' and o.orders_status = s.orders_status_id and s.language_id = '" . (int)$languages_id . "' and ot.class = 'ot_total' order by orders_id DESC where date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00')";
    } elseif (isset($HTTP_GET_VARS['status']) && is_numeric($HTTP_GET_VARS['status']) && ($HTTP_GET_VARS['status'] > 0)) {
      $status = tep_db_prepare_input($HTTP_GET_VARS['status']);
      $orders_query_raw = "select o.orders_id, o.customers_id, o.customers_name, o.payment_method, o.franchise_id,o.date_purchased, o.last_modified, o.currency, o.currency_value, o.date_allocated, s.orders_status_name, ot.text as order_total from " . TABLE_ORDERS . " o left join " . TABLE_ORDERS_TOTAL . " ot on (o.orders_id = ot.orders_id), " . TABLE_ORDERS_STATUS . " s where o.orders_status = s.orders_status_id and s.language_id = '" . (int)$languages_id . "' and s.orders_status_id = '" . (int)$status . "' and ot.class = 'ot_total' order by o.orders_id DESC where date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00') ";
    } else {
      $orders_query_raw = "select o.orders_id, o.customers_id, o.customers_name, o.payment_method, o.date_purchased, o.franchise_id, o.last_modified, o.date_allocated, o.currency, o.currency_value, s.orders_status_name, ot.text as order_total from " . TABLE_ORDERS . " o left join " . TABLE_ORDERS_TOTAL . " ot on (o.orders_id = ot.orders_id), " . TABLE_ORDERS_STATUS . " s where o.orders_status = s.orders_status_id and s.language_id = '" . (int)$languages_id . "' and ot.class = 'ot_total' order by o.orders_id DESC where date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00')";
    }
    $orders_split = new splitPageResults($HTTP_GET_VARS['page'], MAX_DISPLAY_SEARCH_RESULTS, $orders_query_raw, $orders_query_numrows);
    $orders_query = tep_db_query($orders_query_raw);
    while ($orders = tep_db_fetch_array($orders_query)) {
    if ((!isset($HTTP_GET_VARS['oID']) || (isset($HTTP_GET_VARS['oID']) && ($HTTP_GET_VARS['oID'] == $orders['orders_id']))) && !isset($oInfo)) {
        $oInfo = new objectInfo($orders);
      }

      if (isset($oInfo) && is_object($oInfo) && ($orders['orders_id'] == $oInfo->orders_id)) {
        echo '              <tr id="defaultSelected" class="dataTableRowSelected" onmouseover="rowOverEffect(this)" onmouseout="rowOutEffect(this)" onclick="document.location.href=\'' . tep_href_link(FILENAME_ORDERS, tep_get_all_get_params(array('oID', 'action')) . 'oID=' . $oInfo->orders_id . '&action=edit') . '\'">' . "\n";
      } else {
        echo '              <tr class="dataTableRow" onmouseover="rowOverEffect(this)" onmouseout="rowOutEffect(this)" onclick="document.location.href=\'' . tep_href_link(FILENAME_ORDERS, tep_get_all_get_params(array('oID')) . 'oID=' . $orders['orders_id']) . '\'">' . "\n";
      }
?>
                <td class="dataTableContent"><?php echo '<a href="' . tep_href_link(FILENAME_ORDERS, tep_get_all_get_params(array('oID', 'action')) . 'oID=' . $orders['orders_id'] . '&action=edit') . '">' . tep_image(DIR_WS_ICONS . 'preview.gif', ICON_PREVIEW) . '</a>&nbsp;' . $orders['customers_name']; ?></td>
                <td class="dataTableContent" align="right"><?php echo strip_tags($orders['order_total']); ?></td>
                <td class="dataTableContent" align="center"><?php echo tep_datetime_short($orders['date_purchased']); ?></td>
                <td class="dataTableContent" align="right"><?php echo $orders['orders_status_name'].' '.'['.$orders ['franchise_id'].']'; ?></td>
                <td class="dataTableContent" align="right"><?php if (isset($oInfo) && is_object($oInfo) && ($orders['orders_id'] == $oInfo->orders_id)) { echo tep_image(DIR_WS_IMAGES . 'icon_arrow_right.gif', ''); } else { echo '<a href="' . tep_href_link(FILENAME_ORDERS, tep_get_all_get_params(array('oID')) . 'oID=' . $orders['orders_id']) . '">' . tep_image(DIR_WS_IMAGES . 'icon_info.gif', IMAGE_ICON_INFO) . '</a>'; } ?>&nbsp;</td>
              </tr>
<?php
    }
?> 
```

我尝试使用`where date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00')`仅显示前一天 17:00:00 到当天 17:00:00 之后的订单。上面的代码显示错误。对修复有任何帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:59:32.317

检查变量的值，`TABLE_ORDERS`它需要是`o.date_purchased`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:26:28.517

这是您查询的一部分：

```
where o.orders_status = s.orders_status_id and s.language_id = '" . (int)$languages_id . "' and ot.class = 'ot_total' order by o.orders_id DESC where date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00')"; 
```

排序不正确。 `ORDER BY`总是最后一个，此外你不能有多个“ `WHERE`”语句，在第一个之后它变成 AND/OR 取决于你的逻辑。

将这两个并排比较，`WHERE`改为`AND`，并`ORDER BY`放在最后。

```
where o.orders_status = s.orders_status_id and s.language_id = '" . (int)$languages_id . "' and ot.class = 'ot_total' AND date_purchased = CONCAT(date(date_sub(now(), interval 1 day)), '17:00:00') order by o.orders_id DESC "; 
```

干杯，

韦斯

# wpf - datagrid 当前单元格值到文本框

> ID：12459505
> 
> 赞同：0
> 
> 时间：2012-09-17T12:47:17.083
> 
> 标签：wpf, datagrid

我有一个包含一列的数据网格，我正在尝试获取当前单元格的值。如果我使用下面的代码，文本框的值将是 System.Data.DataRowView 而不是单元格的值。知道有什么问题吗？

```
 private void dgOrgcode_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        textBox1.Text = dgOrgcode.SelectedItem.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:13:25.117

您是否尝试过从 DataGrid 中的对象获取所需的值？

如果您有带有 Code 属性的“Orgcode”对象，您可以这样做：

```
private void dgOrgcode_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    textBox1.Text = (dgOrgcode.SelectedItem as Orgcode).Code.ToString();
} 
```

# android - 更改选择/单击列表视图项的背景 - Android

> ID：12459507
> 
> 赞同：1
> 
> 时间：2012-09-17T12:47:18.780
> 
> 标签：android, listview, background

我正在研究`quiz application`。对于我正在使用`listview for the dispaly the answers options`的，我想在用户选择列表视图项目时更改列表视图背景颜色，如果答案是`correct`然后设置`green background`然后`wrong`设置`red background`

我很努力，但我没有得到解决方案。

适配器类

```
public class ListviewAdapter extends BaseAdapter{

public List<String> Questions;  

public Activity context;  
public LayoutInflater inflater;
private int[] colors = new int[] { 0x30505050, 0x30808080 };

private String[] opt_no;
public static View change_color;

public ListviewAdapter(Activity context,List<String> answers, String[] que_opt_no) {  
    super();  

    this.context = context;  
    this.Questions = answers; 
    this.opt_no = que_opt_no;

    //this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
}  

@Override  
public int getCount() {  
    // TODO Auto-generated method stub  
    return Questions.size();  
}  

@Override  
public Object getItem(int position) {  
    // TODO Auto-generated method stub  
     return Questions.get(position);  
}  

@Override  
public long getItemId(int position) {  
    // TODO Auto-generated method stub  
    return 0;  
}  

public static class ViewHolder  
{  

    TextView txtquestion;  
    TextView txtquestion_no;  
}  

@Override  
public View getView(int position, View convertView, ViewGroup parent) {  
    // TODO Auto-generated method stub  

    ViewHolder holder; 

    LayoutInflater inflater = context.getLayoutInflater();
   // this.inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    String fontPath = "fonts/Face Your Fears.ttf";

    if(convertView==null)  
    {  
        holder = new ViewHolder();  
        convertView = inflater.inflate(R.layout.quiz_questions_listitem, null);  

        holder.txtquestion = (TextView) convertView.findViewById(R.id.textView_option);
        holder.txtquestion_no = (TextView) convertView.findViewById(R.id.textView_option_no);

       // holder.txtquestion .setTypeface(Typeface.createFromAsset(convertView.getContext().getAssets(),fontPath));

        convertView.setTag(holder);  

    }  
    else  
        holder=(ViewHolder)convertView.getTag(); 

   /* int colorPos = position % colors.length;
    convertView.setBackgroundColor(colors[colorPos]); */

    change_color = convertView;

   // convertView.setBackgroundResource(R.drawable.listview_background);

    holder.txtquestion.setText(Questions.get(position)); 
    holder.txtquestion_no.setText(opt_no[position]); 

    return convertView;  
}  

/*public static void setbackground(){

    String answer = SelectedAnswer.getAnswer();
       if (Display_questions.currentQ.getAnswer().trim().equals(answer.trim()))
    { 

          Toast.makeText(change_color.getContext(), "red",Toast.LENGTH_SHORT).show();
         change_color.setBackgroundResource(R.drawable.listview_background);
        //ListviewAdapter.change_color.setBackgroundResource(R.drawable.listview_background);
        //Display_questions.currentGame.incrementRightAnswers();
    }
    else{

        Toast.makeText(change_color.getContext(), "Blue",Toast.LENGTH_SHORT).show();
        change_color.setBackgroundResource(R.drawable.listview_false_background);
        //Display_questions.currentGame.incrementWrongAnswers();
    }
}*/

} 
```

Java 类

```
 public class Display_questions extends Activity{

 public static Question currentQ;
  public static GamePlay currentGame;
 ListView listview;

ListviewAdapter adapter;

String que_opt_no[] = {"a) ","b)","c) ","d) "};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quiz_questions);

             listview = (ListView) findViewById(R.id.questions_list);
        listview.setItemsCanFocus(false);

        GoToNextQuestion();
}

private void GoToNextQuestion() {
    // TODO Auto-generated method stub

    listview.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> myAdapter, View myView, int pos, long mylng) {

                String  selectedFromList = (String) listview.getItemAtPosition(pos);

                 SelectedAnswer.setAnswer(selectedFromList);

                 if (!checkAnswer(pos)) return;

                if (currentGame.isGameOver()){

                    Intent i = new Intent(Display_questions.this, Display_result.class);
                    i.putExtra("Timer_Value", TimerTime);
                    startActivity(i); 

                    finish();
                }
                else{

                    GoToNextQuestion();

                } 
            }
          });

     setQuestions();
  }

 private void setQuestions() {

    // set the question text from current question

    String question = currentQ.getQuestion().trim();
    TextView qText = (TextView) findViewById(R.id.txt_questions);
    qText.setText(question);

    // set the available options
    List<String> answers = currentQ.getQuestionOptions();

     adapter = new ListviewAdapter(this,answers,que_opt_no);

     listview.setAdapter(adapter);

}

 static boolean checkAnswer(int selectedPosition) {

    String answer = SelectedAnswer.getAnswer();

    if (answer==null){

        return false;
    }
    else {

         AnswerStates state = AnswerStates.NONE;

        if (currentQ.getAnswer().trim().equals(answer.trim()))
        { 

            //listview.setBackgroundResource(R.drawable.listview_background);

            currentGame.incrementRightAnswers();
            state = AnswerStates.RIGHT;

        }
        else{

            //ListviewAdapter.setbackground();
            currentGame.incrementWrongAnswers();
            state = AnswerStates.WRONG;

        }

        adapter.setSelectedAnswerState(selectedPosition, state);
        adapter.notifyDataSetChanged();

        return true;
    }
}

  } 
```

**编辑：** 检查我的图片：1.) ![在此处输入图像描述](../Images/03658e70c31a157c39f11f54d65fa2cf.png) 2.)

![在此处输入图像描述](../Images/cdd7ebe9c5aa4c4f83bfb7b4ac8f8f75.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:54:25.993

选择正确答案时，是否要更改列表视图或所选项目的背景。

```
 @Override
        public void onItemClick(AdapterView<?> myAdapter, View myView, int pos, long mylng) {

             String  selectedFromList = (String) listview.getItemAtPosition(pos);
             if(selectedFromList.equals("your_answer")) {
                   // to change the listview background
                   listview.setBackgroundColor(getResources().getColor(R.color.your_color_id));

                   // to change the selected item background color
                   myView.setBackgroundColor(getResources().getColor(R.color.your_color_id));
             } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T04:52:32.820

我建议采用以下方式：适配器类：添加所选位置及其状态（正确/错误）或颜色的存储，例如：

```
public class ListviewAdapter extends BaseAdapter{

enum AnswerStates {
    // Colors can be provided also for bg
    WRONG(R.drawable.wrong_bg),
    RIGHT(R.drawable.right_bg),
    NONE(R.drawable.list_item_bg);
    /** Drawable id to be used for answer state */
    private int mBg;

    private AnswerStates(int bg) {
        mBg = bg;
    }

    /** getter for drawabale for answer state */
    int getBg() {
        return mBg;
    }
}
...
/** Position of selected answer */
private int mSelectedPosition = -1;
/** State of selected answer */
private AnswerStates mSelectedAnswerState = AnswerStates.NONE;
...
/** Setter for selected answer */
public void setSelectedAnswerState(int selectedPosition, AnswerStates state) {
    mSelectedPosition = selectedPosition;
    mSelectedAnswerState = state;
}    

@Override  
public View getView(int position, View convertView, ViewGroup parent) {
    ...
    // Your stuff
    ...

    if (position == mSelectedPosition) {
        convertView.setBackgroundResource(mSelectedAnswerState.getBg());
    } else {
        // use default bg
        convertView.setBackgroundResource(AnswerStates.NONE.getBg());
    }

    return convertView;
}
...
} 
```

和活动类：

```
public class Display_questions extends Activity{
    ...
    // Added position parameter to the function
    static boolean checkAnswer(int selectedPosition) {
        //getSelectedAnswer();

        String answer = SelectedAnswer.getAnswer();

        if (answer==null){

            return false;
        }
        else {

            AnswerStates state = AnswerStates.NONE;

            if (currentQ.getAnswer().trim().equals(answer.trim()))
            { 
               //   here set the background Green color
               currentGame.incrementRightAnswers();
               state = AnswerStates.RIGHT;
            }
            else{
               //   here set the background red color
               //ListviewAdapter.setbackground();
               currentGame.incrementWrongAnswers();
               state = AnswerStates.WRONG;
            }

            adapter.setSelectedAnswerState(selectedPosition, state);
            adapter.notifyDataSetChanged();

            return true;
        }
     }
} 
```

这种方式比另一个答案更可靠，因为即使带有答案的列表被滚动并且视图被列表视图重用，它也会起作用。

# google-maps - 在地图中显示地址

> ID：12459510
> 
> 赞同：0
> 
> 时间：2012-09-17T12:47:21.477
> 
> 标签：google-maps

我正在寻找可以同时显示多个地址的在线地图。有很多我的意思是接近 1000。
起初我想到了谷歌地图，但是 afaik 这有一个低于 100 的限制，所以这不是解决方案。有人知道替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:31:41.780

我不确定谷歌是否限制了标记的数量，但我认为如果你尝试这样做，首先你的浏览器会慢下来。地图上的 1000 个标记也会给用户带来糟糕的体验。

解决此问题的常用方法是聚类。基本上，您根据它们的接近程度和您使用的缩放级别仅显示一部分标记。一个例子是[MarkerManager](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/docs/examples.html)。然而，在具有大量标记的大型设置中，通常通过 AJAX 使用视口边界查询服务器端 API，并返回视口内标记的位置。

# xpages - 如何将焦点设置到重复控件内的编辑框？

> ID：12459512
> 
> 赞同：2
> 
> 时间：2012-09-17T12:47:26.553
> 
> 标签：xpages

我想将焦点 + 放置光标设置到 repreat 控件中的编辑框（最后一个）。重复在面板（panelRep）内。然后我在面板外有一个按钮。

这是几乎可以工作的按钮的客户端代码。焦点已设置（字段周围的蓝色边框），但光标未放置在字段中。用户仍必须单击该字段才能写入输入。

没有焦点的例子：
![没有焦点](../Images/0208bca5cfa62d4719737bd00354c8dd.png)

重点示例：
![专注](../Images/06995b0ff60b73f75148ec99c898423e.png)

将焦点设置到最后一个编辑框的按钮的客户端代码，其中 id 包含字符串 inputKode：

```
try {
var el = dojo.query('div[id*="inputKode"]');
var node = el[el.length-1];
setTimeout(function() { node.focus(); }, 500);
//node.focus();
} catch (e) { } 
```

panelRep 的代码：

```
<xp:panel id="panelRep">
            <xp:repeat id="repeat1" rows="12" var="row" indexVar="idx"
                value="#{view1}" repeatControls="false">
                <xp:panel id="panelLinje">
                    <xp:this.data>
                        <xp:dominoDocument formName="frmPBudKodeVerdi"
                            var="dsdoc" action="editDocument" computeWithForm="both"
                            documentId="#{javascript:row.getUniversalID();}">                           
                        </xp:dominoDocument>
                    </xp:this.data>
                    <xp:table style="width:800.0px">
                        <xp:tr>
                            <xp:td style="width:100px">
                                <xp:inputText id="inputKode"
                                    value="#{dsdoc.KodeNr}" style="width:62px">
                                    <xp:this.attrs>
                                        <xp:attr name="tabindex"
                                            value="#{javascript:return idx + '1';}">
                                        </xp:attr>
                                    </xp:this.attrs>
                                    <xp:typeAhead mode="partial"
                                        minChars="1" var="lukey" valueMarkup="true" id="typeAhead1">
                                        <xp:this.valueList><![CDATA[#{javascript://var type = compositeData.type;
                                        return TypeAheadKode2(sessionScope.type,lukey);
                                        }]]></xp:this.valueList>    
                                    </xp:typeAhead>
                                    <xp:eventHandler event="onchange"
                                        submit="true" refreshMode="partial" refreshId="panelLinje">
                                        <xp:this.action><![CDATA[#{javascript:onChangeKode();}]]></xp:this.action>
                                    </xp:eventHandler>
                                </xp:inputText>                             
                            </xp:td>
                            <xp:td style="width:450px">
                                <xp:inputText id="inputNavn"
                                    value="#{dsdoc.KodeNavn}" style="width:440px"
                                    readonly="true">
                                </xp:inputText>
                            </xp:td>
                            <xp:td style="width:60px">
                                <xp:inputText id="inputNorm"
                                    style="width:45px" value="#{dsdoc.NormPrProd}"
                                    rendered="#{javascript:viewScope.visNorm}" readonly="true">
                                    <xp:this.attrs>
                                        <xp:attr name="tabindex"
                                            value="#{javascript:return idx + '2';}">
                                        </xp:attr>
                                    </xp:this.attrs>
                                    <xp:this.converter>
                                        <xp:convertNumber
                                            type="number">
                                        </xp:convertNumber>
                                    </xp:this.converter>
                                </xp:inputText>
                            </xp:td>
                            <xp:td style="width:50px">
                                <xp:inputText id="inputAntall"
                                    style="width:45px" value="#{dsdoc.NormAntall}"
                                    rendered="#{javascript:viewScope.visNorm}">
                                    <xp:this.converter>
                                        <xp:convertNumber
                                            type="number">
                                        </xp:convertNumber>
                                    </xp:this.converter>
                                    <xp:eventHandler
                                        event="onchange"
                                        submit="true"
                                        refreshMode="partial"
                                        refreshId="inputTimer">
                                        <xp:this.action><![CDATA[#{javascript:onChangeAntall()}]]></xp:this.action>
                                    </xp:eventHandler>
                                    <xp:this.attrs>
                                        <xp:attr name="tabindex"
                                            value="#{javascript:return idx + '3';}">
                                        </xp:attr>
                                    </xp:this.attrs>
                                </xp:inputText>
                            </xp:td>
                            <xp:td
                                style="width:50px;text-align:right">
                                <xp:inputText id="inputTimer"
                                    value="#{dsdoc.Timer}" style="width:45px;text-align:right">
                                    <xp:this.converter>
                                        <xp:convertNumber
                                            type="number">
                                        </xp:convertNumber>
                                    </xp:this.converter>
                                    <xp:this.attrs>
                                        <xp:attr name="tabindex"
                                            value="#{javascript:return idx + '4';}">
                                        </xp:attr>
                                    </xp:this.attrs>
                                </xp:inputText>
                            </xp:td>
                            <xp:td>                             
                            </xp:td>
                        </xp:tr>
                    </xp:table>
                    <xp:eventHandler event="onClientLoad" submit="true"
                        refreshMode="norefresh">
                    </xp:eventHandler>
                </xp:panel>
            </xp:repeat>
</xp:panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:38:04.613

2012 年 9 月 22 日更新：

@MarkyRoden - 感谢您为我指明正确的方向。

在完善 dojo.query 选择器后，我得到了 1 行代码。

```
var el = dojo.query('div[id*="inputKode"] .dijitInputField > input').at(-1)[0].focus(); 
```

原帖：

我发现被设置焦点的元素**不是**INPUT 元素。元素 id 以**widget_ 开头**

例如**widget_view:_id1:_id2:_id3:repeat1:8:inputKode**如果重复中有 8 行

然后发现元素的nodeType是**DIV** ，查看element.innerHTML，发现它有多个children。

我尝试使用 element.querySelector 或 element.querySelectorAll，但我无法让它们为元素工作，所以我最终循环通过 element.childNodes。不是很漂亮，但它现在可以工作..

我确信通过向 dojo.query 选择器添加元素或使用 jquery 可以做得更好。以后得查。。

好吧，这是我在我的 CC 的 onClientLoad 事件中输入的代码：

```
var el = dojo.query('div[id*="inputKode"]');
var node = el[el.length-1];
node.focus();

var activeElementId = document.activeElement.id;
var activeElement = dojo.byId( activeElementId );
var kids = activeElement.childNodes;

for(var i=0; i < kids.length; i++)
{
    if(kids[i].className == 'dijitReset dijitInputField dijitInputContainer')
    {
    var elementDiv = kids[i];
    var elementDivKids = elementDiv.childNodes;

    for(var j=0; j < elementDivKids.length; j++)
    {
        var elementInput = elementDivKids[j];
        elementInput.focus();
    }
    } 
} 
```

问候，皮特

# sql-server - sql server 2008 合并

> ID：12459514
> 
> 赞同：0
> 
> 时间：2012-09-17T12:47:34.947
> 
> 标签：sql-server, sql-server-2008

考虑下表：

```
Users
----------------------
Id  | 1   | 2
Name| John| Jack

Cars
----------------------
Id  | 14      | 26
Name| Mercedes| BMW

Import
-----------------------
Id         | 12   | 34
UserName   | John | Daniel
UserId     | NULL | NULL
CarName    | BMW  | Mercedes
CarId      | NULL | NULL
SomeOtherId| 45   | 45 
```

我基本上想在其他表中找到 UserId 和 CarId，如果找不到它们，它们仍然为 NULL，

我尝试了类似的东西

```
UPDATE Import i
SET UserId = ( SELECT Id FROM Users WHERE Name=i.UserName ),
    CarId = ( SELECT Id FROM Cars WHERE Name= i.CarName )
WHERE SomeOtherId=45; 
```

在这种情况下，我得到的语法不正确。我该如何解决？在这种情况下，这是一种使用 MERGE 的方法吗？（合并超过 2 个表并使用 WHERE 子句）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:51:22.740

您可以`from`在更新本身中使用子句：

```
UPDATE i
   SET UserId = Users.Id,
       CarId = Cars.Id
  FROM Import i
  LEFT JOIN Users
    ON i.UserName = Users.Name
  LEFT JOIN Cars
    ON i.CarName = Cars.Name
 WHERE i.SomeOtherId=45; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:58:11.617

希望以下内容能解决您的问题

```
UPDATE I
SET UserId = U.Id
FROM IMPORT I
INNER JOIN Users U
  ON I.UserName = U.Name
WHERE UserId is Null

UPDATE I
SET CarId = C.Id
FROM IMPORT I
INNER JOIN Cars C
  ON I.CarName    = C.Name
WHERE CarId is Null 
```

# java - Apache Camel：FTP 轮询器随机杀死

> ID：12459515
> 
> 赞同：0
> 
> 时间：2012-09-17T12:47:48.407
> 
> 标签：java, ftp, apache-camel

我创建了一个带有 ftp 组件轮询文件并将它们写入本地文件系统的小骆驼项目。

我让 jar 在后台运行，但最近它自己杀死了。甚至一天几次。我已经将日志级别提高到调试，但我看不到任何堆栈跟踪或可能表明出现问题的东西。

我还增加了堆和 permgem 空间，但这没有任何区别。这是目前的路线：

```
 onException(SchemaValidationException.class)
            .handled(true)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/SchemaValidationException");

    onException(GenericFileOperationFailedException.class)
            .handled(true)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/GenericFileExceptions");

    from(
            "ftp://"
                    + props.getProperty(RssUtils.FTP_URL)
                    + "?username="
                    + props.getProperty(RssUtils.FTP_USER)
                    + "&password="
                    + props.getProperty(RssUtils.FTP_PWD)
                    + "&disconnect=true&delete=true&exclude=((?i).*pdf$)&delay="
                    + props.getProperty(RssUtils.FTP_DELAY))
            .choice()
            .when(xmlPredicate)
            .to("jms:xmlQueue")
    .to("jms:archiveQueue")
            .when(imgPredicate)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/img")
            .otherwise()
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR)
                    + "/errors/other");

    from("jms:xmlQueue").to("validator:FtpXmlValidator.xsd")
            .to("xslt://XmlToRssConverter.xsl")
            .process(rssFeedProcessor)
            .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/rss/");

from("jms:archiveQueue")
    .to("file://" + props.getProperty(RssUtils.ROOT_DIR) + "/archive/"); 
```

有没有人能发现问题？或者对解决这个问题有什么建议？

# java - Android java枚举在一行上失败

> ID：12459516
> 
> 赞同：1
> 
> 时间：2012-09-17T12:47:48.880
> 
> 标签：java, android, enums

我试图声明很多枚举，但是由于某种原因，其中一个是错误的，我真的不明白为什么。

我的声明：

```
public class Enums {

    public enum MainObjectType {
        Plan = 0
                StationEntrance = 1
                StationConcourse_Hall = 2
                StationPlatform = 3
                StationStairs = 4
                StationEscalator = 5
                StationLift = 6
                StationRamp = 7
                StationSubway = 8
                StationTicket_Gates = 9
                StationOther = 12
                StationCar_Park = 13
                StationToilets = 14
                StationDoors = 15
                StationTravelator = 16
                StationLevel = 17
                StationMulti_stairs = 19
                StationSupervisor = 20
                StationInformation_Stand = 24
                StationTicket_Office = 28
                StationTravel_Info_Office = 30
                StationBabyChange = 50
                StationAccessibleToilets = 57
                StationTicket_Counter = 58
                StationDropOffPoint = 59
                StationStartPoint = 60
                StationToiletArea = 61

                StationTaxi = 250
                StationTaxiDropOffPoint = 259

                CarPark = 501
                Circulation = 502
                Internal_Doors = 503
                Surfaces = 504
                Toilets = 505
                Seating = 506
                Counters_Service_Desks = 507
                Telephones = 508
                Signage = 509
                Lighting = 510

                Acoustics = 511
                Drop_off = 513
                Routes = 514
                Reception = 515
                Consultation_area = 516
                Creche = 518
                Means_of_escape = 519
                Ramp = 523
                Steps = 524
                PassengerLift = 525
                PlatformLift = 526
                SwimmingPool = 527
                ChangingRoom = 528
                VendingMachine = 529
                CashMachine = 530
                Entrance = 531
                Room = 532
                AccessibleWC = 533
                Consultation_Room = 535
                TransportTypes = 536
                Escalator = 537
                Intercomm = 538
                Other = 539
                CorridorRoom = 540
                Approach = 586
                WheelChairStairLift = 587
                MultiRamp = 588
                BusStands = 591
                BusStop = 592
                Level = 594
                FloorPlan = 1001
                WayPoint = 1003
                RoutingArrow = 1004
                Poster = 1005
                GlobalArea = 1007

                ManagersQuestions = 2000
                Knowledgebase = 2001
                SeatingBlock = 2002

                FireExtinguisher = 2006

                HS_StatutoryComplianceDocs = 3003
                HS_WorkplaceQuestions = 3004
                HS_Findings = 3005
                HS_Verification = 3006
                HS_Assessor_Notes = 3008

                FR_Limitations = 3001
                FR_PolicyReview = 3002
                FR_Verification = 3021
                FR_Findings = 3022
                FR_Policies = 3024
                FR_AlarmSystem = 3056
                FR_Assessor_Notes = 3007

                GEN_BuildingQuestions = 3023

                NPM_PolicyReview = 3550
                NPM_ManagerQuestions = 3552
                NPM_Policies = 3551
                NPM_Verification = 3553

                NPM_Findings = 3554
                NPM_Assessor_Notes = 3555
                AssetItem = 3200

                FR_MajorIssues = 3562
                HS_MajorIssues = 3563
                NPM_MajorIssues = 3564
    }

} 
```

错误说：语法错误，插入}来完成类体

![在此处输入图像描述](../Images/f5414b25dafa465956bbe67644b6a55e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:49:29.713

枚举的元素需要用逗号分隔，并且您设置每个元素的值的语法不正确。

首先，您需要使用正确的语法来设置值。语法应该是`EnumValue(value)`您有一个私有构造函数的地方，该构造函数采用您将枚举元素设置为的类型。在这种情况下，您`private MainObjectType(int value)`的枚举中需要一个构造函数。您还需要用逗号分隔每个元素。

查看[枚举类型的 Java 教程以](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)获取一些示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:49:44.470

您的语法无效。你可以写：

```
public enum MainObjectType  {
    StationEntrance,
    StationConcourse_Hall,
    StationPlatform,
    StationStairs,
    // ...
    NPM_MajorIssues;        
} 
```

但这会丢失编号。或者您可以使用以下语法提供一个数字：

```
public enum MainObjectType  {
    StationEntrance(1),
    StationConcourse_Hall(2),
    StationPlatform(3),
    StationStairs(4),
    // ...
    NPM_MajorIssues(3564);        

    private final int id;
    private MainObjectType(int id) {
        this.id = id;
    }

    public int getId() {
        return id;
    }
} 
```

然后你可以写：

```
int id = MainObjectType.StationEntrance.getId(); //id = 1 
```

# redirect - Nginx 从变量或任何字符串中提取值

> ID：12459518
> 
> 赞同：7
> 
> 时间：2012-09-17T12:47:54.350
> 
> 标签：redirect, nginx

是否有使用 If 从 Nginx 配置文件中的变量中提取值的替代方法？

IE

```
 if ($http_referer ~* (?<=url=)([\w-.]*)(?=/) ){
            set $proxied $1;
            rewrite (?<=/)(.+\.(css|jpg|png|gif|js)) http://$proxied/$1 redirect;

     } 
```

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T12:56:05.353

是的。[http://nginx.org/r/map](http://nginx.org/r/map)

```
map $http_referer $proxied {
    default  example.com;
    "~*(?<=url=)(?<p>[\w-.]*)(?=/)" $p;
} 
```

# ios - 同时渲染到纹理和渲染到渲染缓冲区

> ID：12459519
> 
> 赞同：1
> 
> 时间：2012-09-17T12:47:57.723
> 
> 标签：ios, opengl-es, opengl-es-2.0

我使用这样的代码来设置我的帧缓冲区：

```
glGenRenderbuffers(1, &colorBuffer_) ;

glBindRenderbuffer(GL_RENDERBUFFER, colorBuffer_);

if (!colorBuffer_)
{
    NSLog(@"glGenRenderbuffers() failed");
    break;
}

[self.context renderbufferStorage:GL_RENDERBUFFER fromDrawable:drawable_];
glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &width_);
glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &height_);

glGenFramebuffers(1, &fbo);

glBindFramebuffer(GL_FRAMEBUFFER, fbo);

if (!fbo)
{
    NSLog(@"glGenFramebuffers() failed");
    break;
}

CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, self.context, NULL, &textureCache_);
if (err)
{
    NSAssert(NO, @"Error at CVOpenGLESTextureCacheCreate %d", err);
}
CFDictionaryRef empty; // empty value for attr value.
CFMutableDictionaryRef attrs;
empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);
attrs = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                  1,
                                  &kCFTypeDictionaryKeyCallBacks,
                                  &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(attrs,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty);

CVPixelBufferCreate(kCFAllocatorDefault,
                    (int)width_,
                    (int)height_,
                    kCVPixelFormatType_32BGRA,
                    attrs,
                    &renderTarget_);

err = CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                                    textureCache_, renderTarget_,
                                                    NULL, // texture attributes
                                                    GL_TEXTURE_2D,
                                                    GL_RGBA, // opengl format
                                                    (int)width_,
                                                    (int)height_,
                                                    GL_BGRA, // native iOS format
                                                    GL_UNSIGNED_BYTE,
                                                    0,
                                                    &renderTexture_);
if (err)
{
    NSAssert(NO, @"Error at CVOpenGLESTextureCacheCreate %d", err);
}

CFRelease(attrs);
CFRelease(empty);

glBindTexture(CVOpenGLESTextureGetTarget(renderTexture_), CVOpenGLESTextureGetName(renderTexture_));
checkForErrors();

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

NSLog(@"%u", CVOpenGLESTextureGetName(renderTexture_));

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture_), 0);

glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorBuffer_); 
```

我想同时渲染到纹理和渲染到渲染缓冲区（在屏幕上查看渲染结果）。但是这段代码不起作用。我认为我不能同时使用`glFramebufferTexture2D`和`glFramebufferRenderbuffer`。我对吗？我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:29:57.030

您是对的，因为您不能将纹理和渲染缓冲区都附加到同一个附加点以自动渲染到两者中。

只需将其渲染到纹理，然后在屏幕上绘制一个屏幕大小的纹理四边形以显示它。当然，请记住`glBindTexture(GL_TEXTURE_2D, 0)`在渲染到纹理时取消绑定纹理 ( )，目前您不需要这样做。

或者通过像往常一样将结果渲染到屏幕并使用`glCopyTexSubImage2D`. 但最终你不会绕过副本，无论是间接地以绘制纹理四边形或直接帧缓冲区到纹理副本的形式。

**编辑：**您也可以使用多个渲染目标来解决这个问题，方法是将纹理和渲染缓冲区附加到不同的颜色附件，并在片段着色器的多个通道上输出相同的结果颜色（使用`gl_FragData[i]`代替`gl_FragColor`）。但我不确定这是否真的能给你带来任何好处，而且它要求你的着色器知道双重渲染。最后我不确定 ES 是否真的支持多个渲染目标。

# javascript - 使用 jQuery 检查文件（ClickOnce）是否存在

> ID：12459524
> 
> 赞同：0
> 
> 时间：2012-09-17T12:48:03.630
> 
> 标签：javascript, jquery, ajax, clickonce

在尝试下载文件之前，我试图找出文件是否存在。该文件是一个[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序。

我已经尝试过以下代码，但这不起作用（可能是因为 URL 位于不同的服务器和域上？）；

```
$.ajax({
    url: 'http://www.example.com/somefile.ext',
    type: 'HEAD',
    error: function()
    {
        //File does not exist
    },
    success: function()
    {
        // File exists
    }
}); 
```

还有另一种解决方案，还是有办法让这个解决方案起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:51:19.247

是的，如果 URL 位于不同的服务器上，这将不起作用。如果您想完成这项工作，您将需要控制下载 URL 的服务器。如果是这样，您应该将`Access-Control-Allow-Origin`标头设置为加载 JavaScript 的服务器的名称。

有关更多详细信息，请参阅 Stack Overflow 问题*[jQuery AJAX 跨域](https://stackoverflow.com/questions/3506208)*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:52:12.550

你不能轻易地进行跨域调用[（CORS）](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。在您的服务器上调用一个脚本来检查文件是否存在并返回相应的结果会更好、更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:56:43.553

除了其他人所说的之外，您还应该检查`errorThrown`错误函数的参数是否为“未找到”。否则，当真正发生不同的错误时，您可能会假设文件不存在。

> 发生 HTTP 错误时，errorThrown 会接收 HTTP 状态的文本部分，例如“未找到”或“内部服务器错误”。

# c# - Silverlight + Bitmapcache：无法正常工作

> ID：12459526
> 
> 赞同：2
> 
> 时间：2012-09-17T12:48:33.933
> 
> 标签：c#, performance, silverlight, bitmapcache

我正在优化一个使用大量图像（GIS 样式、显示平铺图像、缩放/平移/等）的 silverlight 应用程序，并且我正在考虑使用应该将一堆东西卸载到 GPU 的位图缓存功能。

但是，我似乎无法让它工作。我的主机页面包含正确的参数（我认为？）：

```
 <object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%">
        <param name="EnableCacheVisualization" value="true" />
        <param name="EnableGPUAcceleration" value="true" />
        <param name="EnableFramerateCounter" value="true" />
      <param name="source" value="ClientBin/BitmapCaching.xap"/>
      <param name="onError" value="onSilverlightError" />
      <param name="background" value="white" />
      <param name="minRuntimeVersion" value="5.0.61118.0" />
      <param name="autoUpgrade" value="true" />
      <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">
          <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Get Microsoft Silverlight" style="border-style:none"/>
      </a>
    </object> 
```

我的 xaml 也应该启用缓存：

```
<UserControl x:Class="BitmapCaching.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="300" d:DesignWidth="400">

    <Grid x:Name="LayoutRoot" Background="White" CacheMode="BitmapCache">
        <Rectangle x:Name="img" Width="200" Height="200" Stroke="Black">
            <Rectangle.Fill>
                <ImageBrush ImageSource="/BitmapCaching;component/download.jpg" />
            </Rectangle.Fill>
            <Rectangle.RenderTransform>
                <RotateTransform />
            </Rectangle.RenderTransform>
        </Rectangle>
        <Button Content="Scale" Height="40" Width="100" Click="Button_Click" />
    </Grid>
</UserControl> 
```

（是的，我知道将缓存模式放在根元素上并不明智）

但是，当我启动应用程序时，完整的应用程序显示为带有红色的覆盖层。这应该表明没有缓存任何内容。

我读到您需要一个最新的 GFX 卡驱动程序，但这应该没问题。这台机器有一个带有最新驱动程序的 ATI Radeon HD5450 显卡。我无法想象这还不够吗？

我难住了。如果有人知道如何解决这个问题，请让我免于发疯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T20:19:27.530

我相信 MS 搞砸了有关此属性的文档。

文档指出，如果不加速，则会显示色调，如果加速则不会显示。这是真的，但是对于不同的属性：enableRedrawRegions！

此属性类似于 EnableCacheVisualization，但它会更改每次重绘的颜色。因此，如果您打开 enableRedrawRegions，您将在重绘发生时看到它们。我发现这更容易可视化正在发生的重绘。

通过打开/关闭 GPU Accleration，您将看到在 GPU 开启的情况下，cpu（它由 gpu 完成）对象不会重绘动画。关闭它，您将看到许多重绘。

然后关闭 enableRedrawRegions 并打开 EnableCacheVisualization。您会看到关闭 GPU 加速后，一切看起来都很正常。打开它，一切看起来都是彩色的。这意味着彩色确实意味着加速，与文档所说的相反。

一个很好的测试项目来自这个博客：[http](http://andybeaulieu.com/Home/tabid/67/EntryID/193/Default.aspx) ://andybeaulieu.com/Home/tabid/67/EntryID/193/Default.aspx 。它显示了一个受益于 CPU 加速的旋转电话，通过切换属性，您可以看到 GPU 发生了什么。

格雷格

# java - 如何根据输入正则表达式从字符串中提取子字符串

> ID：12459529
> 
> 赞同：-6
> 
> 时间：2012-09-17T12:48:41.610
> 
> 标签：java, regex

给定一个字符串`s`和一个正则表达式`r`，我们如何从中提取`s`与正则表达式匹配的子字符串`r`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T12:52:55.017

从阅读 javadocs 开始：

[图案](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)

[匹配器](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T12:53:31.697

**像这样构建一个正则表达式：**

> .+?(r).*

你在哪里`r`正则表达式。

**Java 代码**

```
String s;// Your string
String r;// Your regexp
Pattern p = Pattern.compile(String.format(".+?(%s).*",r));
Matcher m = p.matcher(s);

if (m.find()) {
    System.out.println(m.group(1));
} 
```

**注意**
我假设你的正则表达式只会在你的字符串中匹配一次`s`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T12:53:49.633

您可以参考 ReEx 文档中的组：http: [//docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#cg)

```
 CharSequence inputStr = "abbabcd";
String patternStr = "(a(b*))+(c*)";

// Compile and use regular expression
Pattern pattern = Pattern.compile(patternStr);
Matcher matcher = pattern.matcher(inputStr);
boolean matchFound = matcher.find();

if (matchFound) {
    // Get all groups for this match
    for (int i=0; i<=matcher.groupCount(); i++) {
        String groupStr = matcher.group(i);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T12:55:35.923

使用[Matcher.find](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#find%28%29)和[Matcher.group](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28%29)

```
Pattern p = Pattern.compile(r);
Matcher m = p.matcher(s);
if (m.find()) {
   String extracted = m.group();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:53:21.100

在您的模式中使用圆括号并通过`Matcher.find/Matcher.group`. 您将使用数字来处理第 n 个括号。

```
Pattern PATTERN = Pattern.compile("(substring_here)");
String mystr = "substring_here";
String substring;

Matcher m = PATTERN.matcher(mystr); 
while (m.find()) {
    // group(1) will match the first bracket                        
substring = m.group(1);
} 
```

# c# - 用依赖属性替换非平凡的 getter

> ID：12459531
> 
> 赞同：1
> 
> 时间：2012-09-17T12:48:44.930
> 
> 标签：c#, .net, wpf, data-binding, dependency-properties

我最近开始试验 DataBinding 并为我的自定义类实现 DependencyProperties。这一切都很好，而且可能性令人兴奋，但是，我遇到了一个可能只能通过稍微修改整体类设计来解决的问题。我想确保这是唯一的选择，而且我没有遗漏任何东西。

因此，我的班级存储有关用户导入应用程序的视频文件的信息。除其他属性外，它还包含：

```
public class VideoFile {

    public string FilePath { get; protected set; }
    public uint ID { get; protected set; ]
    public string Extension { get { return Path.GetExtension(FilePath); } }
    public string FileName { get { return Path.GetFilename(FilePath); } }

} 
```

所以，我已经成功地将 FilePath 替换为 DependencyProperty。但是，在 UI 中，我主要想只显示文件名，它使用一些逻辑来提供其值。据我所知，这是我的选择：

1.  我可以简单地为 FileName 和 Extension 创建 DependencyProperties，并在构造函数中设置它们的值，但这是多余的；我已经在 FilePath 中有这些信息，所以我想避免这个选项。
2.  创建 ValueConverters，一个用于显示文件名，一个用于显示扩展名，并在我的绑定中使用它们。

我只是简单地遇到了 ValueConverters，所以我不确定。我可以将它们用于此目的吗？或者，我是否刚刚遇到了它们存在的主要原因之一？:)

最后但并非最不重要的一点是，当 ValueConverter 不是正确的方法时，谁能想到类似的情况？我想避免直接跳入它们，只是意识到它不起作用，因为“那个”属性不能以这种方式表达。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:16:24.807

你不需要`DependencyProperties`这个。`DependencyProperty`当您要使用 a 设置属性*时*，您只需要 a `MarkupExtension`，我怀疑您是否使用模型类来执行此操作（因为您不会在 Xaml 中声明此类！）。

一种更轻量级的方法是使用`INotifyPropertyChanged`. 这是一个 .NET 3.5 风格的实现：

```
public class VideoFile : INotifyPropertyChanged
{
    private string _filePath;

    public string FilePath
    {
        get
        {
            return _filePath;
        }
        protected set
        {
            _filePath = value;
            OnPropertyChanged("FilePath");
            OnPropertyChanged("Extension");
            OnPropertyChanged("FileName");
        }
    }

    public uint ID { get; protected set; }
    public string Extension { get { return Path.GetExtension(FilePath); } }
    public string FileName { get { return Path.GetFileName(FilePath); } }

    protected void OnPropertyChanged(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

`[CallerMemberName]`（在 .NET 4.5 中，由于新属性，这可以稍微简化。）

唯一的缺点是您的属性需要支持字段。但是，有一个名为 NotifyPropertyWeaver 的 VS 扩展可以自动完成部分工作，并且也无需显式支持属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:53:52.303

不要重复数据。

Prefer`Binding`和 an `IValueConverter`，因为这样，每当`FilePath`更改时，`Extension`也会`FileName`在 UI 中更新。

当然，您也可以`PropertyChanged`在 's setter 中为他们加注，`FilePath`但这是不好的做法，因为`FilePath`不必关心谁/什么使用它。

然后类看起来像：

```
public class VideoFile : INotifyPropertyChanged {

    string m_FilePath;
    public string FilePath 
    { 
       get { return m_FilePath; } 
       protected set
       {
          if(value != m_FilePath)
          {
             m_FilePath = value;
             RaisePropertyChanged(() => this.FilePath);
          }
       }
    }
    public uint ID { get; protected set; }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;
    protected void RaisePropertyChanged<T>(Expression<Func<T>> _PropertyExpression)
    {
        RaisePropertyChanged(PropertySupport.ExtractPropertyName(_PropertyExpression));
    }

    protected void RaisePropertyChanged(String _Prop)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(_Prop));
        }
    }

    #endregion
} 
```

请注意，它`PropertySupport`是 Prism 的一部分，但您可以通过调用 不使用它，`RaisePropertyChanged("FilePath")`具有类型安全性非常好，因为如果您更改属性的名称，您将遇到编译时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:08:18.770

据我了解，您只想在 UI 上显示文件名。然后，您可以考虑在 FilePath 依赖属性更改时更新 FileName 属性（OnChangedFilePath 方法）。您还可以在 ValidateFilePath 方法中检查 FilePath 是否正常。请注意，FileName 也必须是依赖属性或支持 IPropertyChanged，否则更改时 UI 不会更新。您不需要为此目的使用转换器。

```
public string FilePath
{
    get { return (string)GetValue(FilePathProperty); }
    set { SetValue(FilePathProperty, value); }
}

private static object CoerceFilePath(DependencyObject d, object value)
{
    return value;
}

private static bool ValidateFilePath(object Value)
{
    return true;
}

private static void OnChangedFilePath(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
}

public static readonly DependencyProperty FilePathProperty =
    DependencyProperty.Register("FilePath", typeof(string), typeof(ClassName),
    new PropertyMetadata(@"C:\File.avi", OnChangedFilePath, CoerceFilePath),
    new ValidateValueCallback(ClassName.ValidateFilePath)); 
```

# c# - 需要 NHibernate ID 列吗？

> ID：12459532
> 
> 赞同：1
> 
> 时间：2012-09-17T12:48:45.487
> 
> 标签：c#, nhibernate

我对 Nhibernate 还是很陌生，我对 ID 列有疑问。

让我们考虑下类客户：

```
class customer
{
    public virtual long ID;
    public virtual string Name;

    public customer()
    {

    }

    public customer(string name)
    {
        Name = name;
    }
} 
```

在我定义的映射文件中，正在生成 ID 列。所以我想创建一个新客户：

```
customer c = new customer("Max Mustermann"); 
```

现在一切都好。生成 ID，Max 可以保存到数据库中。但也有可能产生这样的客户：

```
customer c = new customer() { ID = 3, Name= "Max Mustermann"}; 
```

这应该是不可能的，因为我真的不知道客户的 DB-ID（只有他的名字）。此外，我真的不需要我的程序中的 ID，所以我不高兴在我的对象中有 ID。

在我看来，这是 Nhibernate 中一个糟糕的类设计......有没有办法避免这种情况？

谢谢

**编辑1：**

你是这个意思吗？

```
class customer
{
    protected virtual long _ID;
    public virtual string Name;

    public virtual long GetID 
    {
        get { return _ID; } 
    }

    public customer()
    {

    }

    public customer(string name)
    {
        Name = name;
    }
} 
```

那行得通吗？映射文件的外观如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:54:30.760

你说这是“NHibernate 中糟糕的类设计”，但类*必须*这样设计。当 NHibernate 查询您的数据库并将每一行转换为具体类时，它需要能够将`ID`属性设置为数据库给定的值。因此，*需要*该值是可设置的。

也可以将行插入数据库（在大多数数据库引擎中），同时暂时禁用身份约束 - 因此*可以*提前知道 ID。

这是 ORM 必须克服的（许多！）概念上的困难之一，而且经常有一些像这样的“松散边缘”的事实表明这些问题有多复杂。

把问题转过来：你能想出一个类设计来防止 ID 被设置而不损害 NHibernate 提供的其他功能吗？

# iphone - *** -[__NSArrayM release]: 消息发送到释放的实例

> ID：12459537
> 
> 赞同：2
> 
> 时间：2012-09-17T12:49:10.300
> 
> 标签：iphone, xcode4, nsarray, uipagecontrol

我正在开发一个类似于`PageControl`Apple 提供的示例的应用程序。我的应用程序从服务器获取数据并将其存储在`NSMutableArray`本地。**然后通过加载单元格nib**以网格格式显示该数组。

我的应用程序在擦除过程中在模拟器上运行，但当我尝试在设备上运行它时，我的应用程序崩溃了。

此外，当我在使用它的设备上运行它时，`Instruments`它执行得很好。

已启用僵尸并出现以下错误。

```
*** -[__NSArrayM release]: message sent to deallocated instance 0x18aef0 
```

这就是我正在做的事情：

1.  在`didFinishLaunchingWithOptions`我调用两个网络服务时，获取数据并将其存储在本地数组中
2.  推送生成页面的视图控制器

试图解决同样的问题。

* * *

这是我的代码。

```
 //**AppDelegate.h**
    @interface TumBhiAppDelegate : UIResponder  {
    NSMutableArray *arrDetailsByCategory;
    }
    @property (nonatomic, retain) IBOutlet NSMutableArray *arrDetailsByCategory;    
    -(IBAction)doneProcessing:(id)sender;
    @end

    //**AppDelegate.m**
    #import "AppDelegate.h"
    #import "Server.h"

    @implementation AppDelegate
    @synthesize arrDetailsByCategory;
    //Once processing is done push the view
    -(IBAction)doneProcessing:(id)sender
    {    
    BaseContentViewController *baseController = [[BaseContentViewController alloc] initWithNibName:@"BaseContentViewController" bundle:nil];    
    [self.navigationController pushViewController:baseController animated:YES];    
    [baseController release];
    }

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
    arrDetailsByCategory  = [[NSMutableArray alloc] init];
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[TumBhiViewController alloc] initWithNibName:@"TumBhiViewController" bundle:nil];

    self.navigationController = [[UINavigationController alloc]initWithRootViewController:self.viewController];
    [self.navigationController setNavigationBarHidden:YES];

    self.window.rootViewController = self.navigationController;
    [self.window makeKeyAndVisible];
    //getDetails is called 5-6 time
    //arrDetailsByCategory is populated accordingly 
    [Server getDetails:@"ABC"];
    [self doneProcessing:nil];
    return YES;
    }
    @end

    //**Server.h**
    @interface ServerCommunication : NSObject{
    }
    -(BOOL)getDetails:(NSString *)str
    @end

    //**Server.m**
    #import "Server.h"
    #import "AppDelegate.h"
    @implementation ServerCommunication

    -(BOOL)getDetails:(NSString *)str
    {
    NSMutableArray *arrFinal = [NSMutableArray array];
    //call web-service populate arrFinal
    [[[AppDelegate GetAppDelegate] arrDetailsByCategory] addObjectsFromArray:arrFinal];
    }
   @end 

```

**调试器消息**

```
*** -[__NSArrayM release]: message sent to deallocated instance 0x7aa0870
[Switching to process 636 thread 0x15903]
[Switching to process 636 thread 0x15903]
sharedlibrary apply-load-rules all
(gdb) 
```

**堆栈消息：**

```
0x01920db0  <+0096>  testb  $0x1,(%eax)
0x01920db3  <+0099>  je     0x1920ded <___forwarding___+157>
0x01920db5  <+0101>  mov    %edi,0x4(%esp)
0x01920db9  <+0105>  movl   $0x0,0x18(%esp)
0x01920dc1  <+0113>  movl   $0x0,0x14(%esp)
0x01920dc9  <+0121>  movl   $0x0,0x10(%esp)
0x01920dd1  <+0129>  movl   $0x0,0xc(%esp)
0x01920dd9  <+0137>  movl   $0x0,0x8(%esp)
0x01920de1  <+0145>  movl   $0x15,(%esp)
0x01920de8  <+0152>  call   0x198ec10 <__CFRecordAllocationEvent>
0x01920ded  <+0157>  mov    -0x10(%ebp),%eax
0x01920df0  <+0160>  mov    %eax,(%esp)
0x01920df3  <+0163>  call   0x19fcbf6 <dyld_stub_sel_getName>
0x01920df8  <+0168>  mov    %edi,0x10(%esp)
0x01920dfc  <+0172>  mov    %eax,0xc(%esp)
0x01920e00  <+0176>  add    $0xa,%esi
0x01920e03  <+0179>  mov    %esi,0x8(%esp)
0x01920e07  <+0183>  lea    0x12e6aa(%ebx),%eax
0x01920e0d  <+0189>  mov    %eax,0x4(%esp)
0x01920e11  <+0193>  movl   $0x3,(%esp)
0x01920e18  <+0200>  call   0x196bad0 <CFLog>
0x01920e1d  <+0205>  int3   
0x01920e1e  <+0206>  call   0x19fc8b4 <dyld_stub_getpid> //**Dies here with Thread 5**
0x01920e23  <+0211>  mov    %eax,(%esp)
0x01920e26  <+0214>  movl   $0x9,0x4(%esp)
0x01920e2e  <+0222>  call   0x19fc908 <dyld_stub_kill>
0x01920e33  <+0227>  xor    %edi,%edi
0x01920e35  <+0229>  jmp    0x192112e <___forwarding___+990>
0x01920e3a  <+0234>  lea    0xed29f(%ebx),%eax
0x01920e40  <+0240>  mov    %eax,0x4(%esp)
0x01920e44  <+0244>  mov    %esi,(%esp)
0x01920e47  <+0247>  call   0x19fcc56 <dyld_stub_strcmp>
0x01920e4c  <+0252>  test   %eax,%eax
0x01920e4e  <+0254>  mov    %edi,%eax
0x01920e50  <+0256>  mov    %eax,%edi
0x01920e52  <+0258>  mov    %eax,-0x14(%ebp)
0x01920e55  <+0261>  jne    0x1920e63 <___forwarding___+275>
0x01920e57  <+0263>  mov    0x130e5a(%ebx),%eax
0x01920e5d  <+0269>  mov    -0x14(%ebp),%ecx
0x01920e60  <+0272>  mov    (%ecx,%eax,1),%edi
0x01920e63  <+0275>  mov    %edi,(%esp)
0x01920e66  <+0278>  call   0x19fcad6 <dyld_stub_object_getClass>
0x01920e6b  <+0283>  mov    0x1255ee(%ebx),%ecx 
```

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-09-17T13:00:16.407

可能是在将发布消息发送给它之前，您的数据数组可能会因任何逻辑错误而被解除分配

使用断点检查它在哪里被释放

# couchdb - YAWS 页面中的 Couchbeam

> ID：12459539
> 
> 赞同：0
> 
> 时间：2012-09-17T12:49:18.263
> 
> 标签：couchdb, webpage, yaws

我在这里是因为我试图在 YAWS 上使用 Couchbeam 表单。我已经测试了 CB，它在终端上正常工作，使用：

```
erl -pa ebin -pa deps/ibrowse/ebin -s couchbeam 
```

现在我正在尝试在我的网页上复制我在本地所做的事情。我相信问题是我不知道如何告诉 erl 从 yaws 页面执行 'erl -pa ebin -pa deps/ibrowse/ebin -s couchbeam'。

我试图简单地运行所有需要的应用程序，但我得到了这个：

```
Stack: [{ibrowse_lib,url_encode,["test"],[]},
{couchbeam,save_doc,3,[{file,"src/couchbeam.erl"},{line,383}]},
{m50,out,1,
     [{file,"/Users/Nesh/.yaws/yaws/default/m50.erl"},{line,35}]},
{yaws_server,deliver_dyn_part,8,
             [{file,"yaws_server.erl"},{line,2647}]},
{yaws_server,aloop,4,[{file,"yaws_server.erl"},{line,1152}]},
{yaws_server,acceptor0,2,[{file,"yaws_server.erl"},{line,1013}]},
{proc_lib,init_p_do_apply,3,[{file,"proc_lib.erl"},{line,227}]}] 
```

这是我的erl代码：

```
<erl>

 startApp() ->
 application:start(crypto),
 application:start(private_key),
 application:start(ssl),
 application:start(sasl), 
 application:start(ibrowse),
 application:start(couchbeam).

out(Arg) ->
startApp(),

Host = "localhost",
Port = 5984,
Prefix = "",
Options = [],
S = couchbeam:server_connection(Host, Port, Prefix, Options),

Options = [],{ok, Db} = couchbeam:open_db(S, "erlang", Options),

Doc = {[{<<"_id">>, <<"test">>},{<<"content">>, <<"web text">>}]},
{ok, Doc1} = couchbeam:save_doc(Db, Doc).

</erl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:54:17.633

我不建议在这样的 .yaws 页面中运行 Couchbeam。相反，您应该[创建一个 Erlang 版本](http://www.erlang.org/doc/design_principles/release_structure.html)，以便 Couchbeam 和 Yaws 在同一个 Erlang VM 中执行，然后使用[Yaws appmod](http://yaws.hyber.org/appmods.yaws)调用 Couchbeam，或者您应该考虑将 Couchbeam作为 Yaws 的[引导 yapp](http://yaws.hyber.org/yapp_intro.yaws)。

如果你真的认为你有加载路径问题，你可以通过指令在`yaws.conf`文件中指定加载路径。`ebin_dir`例如：

```
ebin_dir = deps/ibrowse/bin
ebin_dir = couchbeam/ebin 
```

但是您显示的堆栈跟踪似乎缺少某些内容，因此很难确切地告诉您出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:36:11.847

我设法修复它这样做：

我在 yaws.conf 中添加了这些行：

```
ebin_dir = /usr/local/var/yaws/couchbeam/deps/ibrowse/ebin
ebin_dir = /usr/local/var/yaws/couchbeam/deps/jiffy/ebin
ebin_dir = /usr/local/var/yaws/couchbeam/deps/mochiweb/ebin
ebin_dir = /usr/local/var/yaws/couchbeam/ebin 
```

注意：我将文件夹“couchbeam”放在 /usr/local/var/yaws/

然后我以这种方式修改了代码：

```
load_deps() ->

application:start(sasl),
application:start(ibrowse),
application:start(jiffy),
application:start(inets),
application:start(xmerl),
application:start(compiler),
application:start(syntax_tools),
application:start(mochiweb),
application:start(couchbeam).

out(Arg) ->

load_deps(),
Host = "localhost",
Port = 5984,
Prefix = "",
Options = [],
S = couchbeam:server_connection(Host, Port, Prefix, Options),

Options = [],{ok, Db} = couchbeam:open_db(S, "erlang", Options),

Doc = {[{<<"content">>, <<"Checking webpage">>}]},
{ok, Doc1} = couchbeam:save_doc(Db, Doc),

{html, "Document has been added"}.

</erl> 
```

# c# - 从 .net 连接到 oracle 数据库时出错

> ID：12459545
> 
> 赞同：0
> 
> 时间：2012-09-17T12:49:37.783
> 
> 标签：c#, .net, oracle10g

我正在使用 System.data.oracleclient 命名空间并将该 dll 放在我的项目的引用中

我使用连接字符串作为

```
SERVER=(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=xxx.xx.x.xxx)(PORT=1521))(CONNECT_DATA=(SERVICE_NAME=xxxx)));uid=xxxx;pwd=xxxx; 
```

在运行应用程序时，我收到响应消息

```
OCIEnvCreate failed with return code -1 but error message text was not available. 
```

我不知道我卡在哪里了......

谁能给我任何指导方针来解决这个问题。

我也护目镜，但没有得到正确的解决方案。

等待您的宝贵建议和意见

更新 1：

我使用的代码是

```
 con = new OracleConnection(conStr);
                con.Open(); // connection must be openned for command
                query = "insert into table1 values ('ss');
                cmd = new OracleCommand(query, con);
               if(cmd.ExecuteNonQuery()>0)
                {
                    Console.WriteLine("insert sucess!");
                }
                con.Close(); 
```

我的堆栈跟踪错误是

```
 at System.Data.OracleClient.OciHandle..ctor(OciHandle parentHandle, HTYPE handleType, MODE ocimode, HANDLEFLAG handleflags)
   at System.Data.OracleClient.OracleInternalConnection.OpenOnLocalTransaction(String userName, String password, String serverName, Boolean integratedSecurity, Boolean unicode, Boolean omitOracleConnectionName)
   at System.Data.OracleClient.OracleInternalConnection..ctor(OracleConnectionString connectionOptions)
   at System.Data.OracleClient.OracleConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OracleClient.OracleConnection.Open()
   at oracleTest.Program.getconnection() in D:\oracle\oracletst[via-oracleclient]\oracletst\Program.cs:line 29
   at oracleTest.Program.Main(String[] args) in D:\oracle\oracletst[via-oracleclient]\oracletst\Program.cs:line 21
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:05:46.873

我看到的两件事可能会导致问题

1.  您没有处理 ado.net 对象
2.  `con`&`cmd`似乎是一个共享变量。

试试这个，看看问题是否仍然存在。

```
using(var con = new OracleConnection(conStr))
using(var cmd = con.CreateCommand())
{
    con.Open(); 
    cmd.CommandText = "insert into table1 values ('ss');
    if(cmd.ExecuteNonQuery() > 0)
    {
        Console.WriteLine("insert sucess!");
    }
} 
```

因为我们使用了`using`关键字，所以当块退出时它会自动调用 con/cmd.Dispose() 。Dispose() 将自动调用 Close()。

**编辑** 确保您的连接字符串格式正确。[http://www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle)

# css - 解决纯 CSS 下拉菜单中的问题

> ID：12459548
> 
> 赞同：2
> 
> 时间：2012-09-17T12:49:43.260
> 
> 标签：css, drop-down-menu

我最近使用 Google 教程创建了一个纯 CSS 下拉菜单。

我有一个问题：

如果我给 2nd level 一个小的边距，当你将鼠标悬停在和 parent下拉菜单`ul`之间的差距上时，它就会消失。`ul``li`

有没有办法解决这个不涉及 Javascript 的问题？

请参阅此处的演示：http: [//jsfiddle.net/ba76n/2/](http://jsfiddle.net/ba76n/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:51:53.210

使用`padding-top`而不是`margin-top`.

看到它工作。[http://jsfiddle.net/ba76n/5/](http://jsfiddle.net/ba76n/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T12:52:53.863

该边距导致鼠标放弃“鼠标悬停”状态，没有它可以正常工作。

如果您切换到`padding-top:.5em;`它应该可以按预期工作。这是因为边距位于块元素的外部，而填充位于内部。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T12:56:01.323

使用`padding-top`而不是`margin-top`因为边距应用在块之外，所以当您尝试选择子菜单时，它会出现在边距上并且块被更改，因此子菜单消失

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:54:15.783

[http://jsfiddle.net/ba76n/9/](http://jsfiddle.net/ba76n/9/)更新了你的小提琴......希望它有帮助:)

（刚刚从下拉 li 中删除了边距顶部并添加了边框）

# android - 如何在 Android ListView 中显示空列表

> ID：12459550
> 
> 赞同：1
> 
> 时间：2012-09-17T12:49:56.420
> 
> 标签：android, android-listview, notepad, empty-list

我目前正在开发应用程序类型的记事本或待办事项列表。但我需要知道如何将空列表显示到列表视图中，我猜安卓默认的 ListView 无法处理空列表视图。基本上我需要显示没有数据的列表视图，稍后我会添加，但最初列表视图的 UI 应该是空的。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T12:55:11.677

当列表中没有数据时，这可能会对您有所帮助

```
listview.setVisibility(View.INVISIBLE);
nodat.setVisibility(View.VISIBLE); 
```

Hre nodata 包含带有 SetText 的空 Textview 你的字符串就像没有数据一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:05:03.043

根据[描述 ListView 的开发人员指南，](http://developer.android.com/reference/android/app/ListActivity.html)您可以轻松设置 TextViev，任何其他小部件也可以。您将在哪里鼓励用户创建 ListItem。

这是一个片段。

```
 <ListView android:id="@android:id/list"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#00FF00"
           android:layout_weight="1"
           android:drawSelectorOnTop="false"/>

 <TextView android:id="@android:id/empty"
           android:layout_width="match_parent"
           android:layout_height="match_parent"
           android:background="#FF0000"
           android:text="No data"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:56:35.933

如果您将空列表添加到适配器中并且该适配器设置为列表视图，那么它将显示空列表视图。将项目添加到列表后，您需要调用适配器的 notifydatasetchanged() 。

ListView 作为显示最初为空，直到您将项目添加到列表并通过适配器通知。

请注意，当您填充列表项以进行添加/编辑/删除时，您必须调用适配器的 notifydatasetchanged() 方法。

# c# - how can display Activity Indicator up to image is loaded into ImageView?

> ID：12459552
> 
> 赞同：2
> 
> 时间：2012-09-17T12:49:56.500
> 
> 标签：c#, ios, ipad, xamarin.ios, uiactivityindicatorview

I am trying to download 5MB `Image` from Server for this I want to display `UIActivityIndicatorView` still Image completely downloaded and display on `UIImageView`, so how can display `Activity Indicator` up to image is loaded into `ImageView`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:20:27.457

Use [AsyncImageView](https://github.com/nicklockwood/AsyncImageView) .It is the better way to load images asynchronously

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:52:59.697

Place an Activity Indicator (via Interface Builder or manually) on your view. Set the property to "hide when not animating".

When doing server call, call [activityIndicator startAnimating] (IBOutlet property). When returning with actual image, call [activityIndicator stopAnimating]. When stopping, it wil automatically hide.

You can also use the activity indicator in the iPhon/Pad status bar. To do this, use [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES]; Set to NO for hiding it ... (obviously)

Take a look at [http://blog.sallarp.com/iphone-uiimage-asynchronously/](http://blog.sallarp.com/iphone-uiimage-asynchronously/) for a sample of dl'ing an image. You would stop the activity indicator in the didReceiveData function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T14:09:04.730

MonoTouch.Dialog uses a `UIActivityIndicatorView` when loading new web pages into an `UIWebView`. It's fairly easy to use, see the corresponding source code [here](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L591).

# javascript - jQuery UI datepicker：配置键盘快捷键

> ID：12459562
> 
> 赞同：13
> 
> 时间：2012-09-17T12:50:34.820
> 
> 标签：javascript, jquery, jquery-ui

我使用[jQuery UI datepicker](http://jqueryui.com/demos/datepicker/)让用户选择一个日期。它有一些快捷方式，因此可以使用键盘进行控制：

```
page up/down      - previous/next month
ctrl+page up/down - previous/next year
ctrl+home         - current month or open when closed
ctrl+left/right   - previous/next day
ctrl+up/down      - previous/next week
enter             - accept the selected date
ctrl+end          - close and erase the date
escape            - close the datepicker without selection 
```

但这对我来说似乎不是用户友好的。在我阅读文档之前，我没有发现自己如何使用键盘选择日期。我想只有少数用户会发现他们必须按“CTRL + 箭头键”来选择日期。

因此，我想用其他一些快捷键替换键盘快捷键。特别是我希望用户在几天和几周之间使用箭头键导航时不必按下“控制”键。

因为我在文档中没有找到任何关于此的配置，[所以我尝试使用一些自定义 javascript 来实现此目标](http://jsfiddle.net/vH5SX/1/)，我在其中侦听键盘事件并手动设置日期。但它会从一个问题引向另一个问题：

*   只有在选择第一个日期后才能正常工作
*   当用户仅使用箭头键导航后使用“CTRL + 箭头键”时，它会干扰
*   输入字段中的日期会立即更新，这与使用日期选择器原始键盘控件的“CTRL + 箭头键”导航时不同
*   浏览器的其他快捷方式不起作用，因为`event.preventDefault()`

我知道所有这些问题都可以通过额外的 Javascript 再次解决，但如果我能以某种方式配置它，我会更喜欢它。

是否可以配置 jQuery UI 日期选择器的快捷方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T22:09:40.683

这不能通过 datepicker 进行配置。您必须在此处更改`_doKeyDown`方法 [源](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.datepicker.js#L524)。

最简单的方法是扩展小部件。它看起来像这样：

```
$.extend($.datepicker, {
     _doKeyDown: function(event){
           //copy original source here with different
           //values and conditions in the switch statement
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T15:16:34.760

你可以检查这个插件： [http ://hanshillen.github.io/jqtest/#goto_datepicker](http://hanshillen.github.io/jqtest/#goto_datepicker)

更多可访问性选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T10:31:20.170

如果它是一个`Jquery date picker`那么默认情况下它将支持所有这些快捷方式。可能存在一个问题，即`Theme`. 您可以使用站点本身`CSS CDN`中的给定值。`Jquery`然后，焦点将是可见的。这是可访问性的一个很好的点击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-27T13:22:19.660

如果您想替换其中一个快捷方式并且不喜欢在更新 jquery ui 库的情况下从存储库中处理代码，请使用：

```
// original key down callback
var doKeyDown = $.datepicker._doKeyDown;
$.extend($.datepicker, {
    _doKeyDown: function(event){

        if(event.which !== $.ui.keyCode.ENTER) {
            doKeyDown(event);
        }
        else {
            //do something else
        }
    }
}); 
```

在覆盖它之前保留**_doKeyDown**的引用，并为所有其他快捷方式调用它。

# c++ - C ++中bitset的大小是多少

> ID：12459563
> 
> 赞同：16
> 
> 时间：2012-09-17T12:50:37.630
> 
> 标签：c++, memory-management, bitset

我想知道 bitset 是如何实际分配内存的。我从一些博客中读到它会占用内存。但是，当我运行以下代码时：

```
 bitset<3> bits = 001;
   cout<<sizeof(bits); 
```

我得到的输出为 4。它背后的解释是什么？

还有一种方法可以在 C++ 中以位为单位分配空间吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T13:14:02.310

您可以近似`sizeof(bitset<N>)`为：

1.  如果内部表示是 32 位（如 32 位系统上的无符号），则为`4 * ((N + 31) / 32)`
2.  如果内部表示是 64 位（如 64 位系统上的 unsigned long ），则为`8 * ((N + 63) / 64)`

似乎第一个是真的：`4 * ((3 + 31) / 32)`是`4`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T12:53:43.800

> 我得到的输出为 4。它背后的解释是什么？

标准中没有关于`bitset`应该如何实现的信息。它是实现定义的，看看`bitset header`你的编译器。

> 还有一种方法可以在 C++ 中以位为单位分配空间吗？

不，在 C++ 中没有按位分配空间的方法。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-17T12:53:54.800

您的 CPU 不使用单个位，而是使用字节和字。在您的情况下， sizeof(bits) 导致 4 因为编译器决定将此数据结构对齐到 4 个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T12:54:56.357

通常在 32 位处理器上，编译器会将分配的内存大小设为 4 字节的倍数，因此大于 3/8 的最接近的 4 倍数是 4 字节。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T12:53:19.003

您不能寻址单独的位，最低可寻址单位是字节。所以不，你不能精确地分配位。

另一件事是填充 - 您几乎总是会分配更多您要求的字节，这是出于优化目的。寻址不在 32b 边界上的字节通常很昂贵，在 x64 CPU 上寻址不在 64b 边界上的字节会导致异常。（说到英特尔平台。）

# javascript - 选中单选按钮时 Rails 显示字段

> ID：12459574
> 
> 赞同：5
> 
> 时间：2012-09-17T12:51:09.773
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在开发一个 Rails 应用程序，我需要在单击单选按钮时显示/隐藏某个字段。

我正在使用javascript，但似乎无法正常工作。

关于如何解决这个问题的任何提示？

**单选按钮代码**

```
<%= radio_button 'relat', 'atu', 'yes' %>   ATU
<%= radio_button 'relat', 'atu', 'no' %>    No ATU 
```

**选中第一个按钮时将显示的字段**

```
<div id="esatu" style="display:none">
<p>
    <label for="relat_tipus_atu">
    Tipus ATU
    </label>
    <%= select_tag :tipus_id, "<option value=''></option>".html_safe + options_from_collection_for_select(@tipus, :id, :codi) %>
</p> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T13:14:07.287

首先，给你的单选按钮一些类名，这样你就可以更容易地在 javascript 中使用它们。

```
<%= radio_button 'relat', 'atu', 'yes', {:class => "relat__atu relat__atu_yes"} %>   ATU
<%= radio_button 'relat', 'atu', 'no', {:class => "relat__atu relat__atu_no"} %>    No ATU 
```

现在您将事件处理程序附加到更改事件。并切换其他元素的显示，具体取决于单选按钮是否为“是”按钮。

```
$(".relat__atu").on("change", function(){
  $("#esatu").toggle($(this).hasClass("relat__atu_yes"));
}); 
```

# asp.net - 来自 4 个表 MVC 3 的显示列有问题

> ID：12459579
> 
> 赞同：0
> 
> 时间：2012-09-17T12:51:16.653
> 
> 标签：asp.net, asp.net-mvc-3

我有一个模型如下，想显示来自 4 个不同表的项目。

```
public class AuctionViewer
{
 public int AuctionId { get; set; }
public string ProductName { get; set; }
public int Price { get; set; }
public DateTime  startTime { get; set; }
public DateTime  EndTime { get; set; }
public string Category { get; set; }
public int ExpectedHit { get; set; }
public string Status { get; set; }
} 
```

下面是我的控制器代码。

```
 public ActionResult Index()
       {
      MightyMouseContainer ctx = new MightyMouseContainer();

       var  NewList = new AuctionViewer
             { 
                     from CT in ctx.Categories 
                     join PD in ctx.Items on CT.Category_ID equals PD.Category_ID
                     join AU in ctx.Auction_Schedule on PD.Item_ID equals AU.Item_ID 
                     join ST in ctx.Status on AU.Status_ID equals ST.Status1
                     orderby AU.Auction_ID
                     select new
                     {
                       AuctionId = AU.Auction_ID, 
                       ProductName = PD.Item_name,
                       Price= PD.Item_Value,
                       startTime = AU.Start_Time,
                       EndTime = AU.End_Time,
                       Category = CT.Category_Description,
                       Status = ST.Description
                    };

    }

        return View(NewList);
    } 
```

我想知道为什么会出现错误。请指教。我已经为此工作了很长一段时间，并意识到我需要一些帮助才能继续前进。我将感谢其他人的迅速反应以继续前进。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:54:23.670

假设您的视图接受 的模型`IEnumerable<AuctionViewer>`，您应该更改选择以返回强类型集合，例如：

```
var  NewList = from CT in ctx.Categories 
                     join PD in ctx.Items on CT.Category_ID equals PD.Category_ID
                     join AU in ctx.Auction_Schedule on PD.Item_ID equals AU.Item_ID 
                     join ST in ctx.Status on AU.Status_ID equals ST.Status1
                     orderby AU.Auction_ID
                     select new AuctionViewer
                     {
                       AuctionId = AU.Auction_ID, 
                       ProductName = PD.Item_name,
                       Price= PD.Item_Value,
                       startTime = AU.Start_Time,
                       EndTime = AU.End_Time,
                       Category = CT.Category_Description,
                       Status = ST.Description
                    };

return View(NewList); 
```

**编辑**从您的第二条错误消息来看，该视图似乎需要一个`List<AuctionViewer>`. 您可以更改控制器方法以实现 IQueryable，`List`如下所示：

```
var  NewList = (from CT in ctx.Categories 
                     join PD in ctx.Items on CT.Category_ID equals PD.Category_ID
                     join AU in ctx.Auction_Schedule on PD.Item_ID equals AU.Item_ID 
                     join ST in ctx.Status on AU.Status_ID equals ST.Status1
                     orderby AU.Auction_ID
                     select new AuctionViewer
                     {
                       AuctionId = AU.Auction_ID, 
                       ProductName = PD.Item_name,
                       Price= PD.Item_Value,
                       startTime = AU.Start_Time,
                       EndTime = AU.End_Time,
                       Category = CT.Category_Description,
                       Status = ST.Description
                    }).ToList();

return View(NewList); 
```

# winforms - 从 windows 窗体中删除焦点

> ID：12459584
> 
> 赞同：2
> 
> 时间：2012-09-17T12:51:26.663
> 
> 标签：winforms

我开发了一个 Windows 应用程序。在哪个通知表单中每隔 5 分钟显示一次窗口的右下角。如果在我使用记事本/excel 时打开通知表单，焦点会自动转移到 Windows 表单。我想防止这种形式的焦点。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:13:30.967

下面的代码工作正常..谢谢大家..

[DllImport("User32.dll")] public extern static int ShowWindow(IntPtr hWnd, Int32 cmdShow);

```
 const Int32 SW_SHOWNOACTIVATE = 4;
    const Int32 SWP_NOACTIVATE = 0x0010;
    const Int32 HWND_TOPMOST = -1;

    [DllImport("User32.dll")]
    public extern static bool SetWindowPos(
        IntPtr hWnd, // handle to window
        Int32 hWndInsertAfter, // placement-order handle
        Int32 X, // horizontal position
        Int32 Y, // vertical position
        Int32 cx, // width
        Int32 cy, // height
        Int32 uFlags // window-positioning options
        ); 
```

当您显示弹出窗口时，请调用以下方法：

ShowWindow(this.Handle, SW_SHOWNOACTIVATE);

# php - 当标头有附件时，PHP Sendmail 发件人名称始终为 Apache

> ID：12459585
> 
> 赞同：2
> 
> 时间：2012-09-17T12:51:35.003
> 
> 标签：php, apache, sendmail

我们正在尝试使用 sendmail 发送电子邮件。正常的标头一切正常，但是当我们在标头中添加附件时，发件人名称为 Apache。这是我们的代码片段

```
$from_email = "noreply@domain.com";
$separator = md5(time());
$eol = PHP_EOL;
$filename = "attachment.pdf";
$attachment = chunk_split(base64_encode(file_get_contents($filename)));
$text = "Hi!";

// main header (multipart mandatory)
$headers  = "From:".$from_email.$eol;
$headers  = "Bcc:user@domain.com".$eol;
$headers .= "MIME-Version: 1.0".$eol;
$headers .= "Content-Type: multipart/mixed; boundary=\"".$separator."\"".$eol.$eol;
$headers .= "Content-Transfer-Encoding: 7bit".$eol;
$headers .= "This is a MIME encoded message.".$eol.$eol;
// message
$message .= "--".$separator.$eol;
$message .= "Content-Type: text/html; charset=\"iso-8859-1\"".$eol;
$message .= "Content-Transfer-Encoding: 8bit".$eol.$eol;
$message .= $text.$eol.$eol;

// attachment
$message .= "--".$separator.$eol;
$message .= "Content-Type: application/pdf".$eol;
$message .= "Content-Transfer-Encoding: base64".$eol;
$message .= "Content-Disposition: attachment; filename=\"".$filename."\"".$eol;
$message .= $attachment.$eol;
$message .= "--".$separator."--".$eol;

$b = mail($email, "Your Issue of the STQ",$message, $headers, "-fnoreply@domain.com"); 
```

通过添加 -fnoreply@domain.com，我们在来自：noreply@domain.com (Apache) 的电子邮件标题中得到了这样的结果。不确定这个 Apache 来自哪里？

这里可能是什么问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:53:37.793

您需要在第二行添加一个点。

```
$headers  = "From:".$from_email.$eol;
$headers  .= "Bcc:user@domain.com".$eol; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:55:05.657

像这样制作标题：

```
$headers .= 'From: <webmaster@example.com>' . "\r\n"; 
```

xyzz 指出的第二行也缺少点

# task - 如何在没有 CancellationToken.IsCancellationRequested 的情况下取消任务？

> ID：12459586
> 
> 赞同：2
> 
> 时间：2012-09-17T12:51:40.400
> 
> 标签：task, appdomain, cancellation

我正在使用 C# 4.0 开发一个 WPF 应用程序，其中一些用户特定的代码将在运行时编译，然后在 AppDomain 中执行。该过程可能需要 10 毫秒或 5 分钟。AppDomain 将由*Task.Factory.StartNew()*创建。工作正常。

现在我希望能够取消/中断执行。我可以在代码执行时按下停止按钮，但如何取消任务？我知道：有*CancellationToken.IsCancellationRequested*属性，但我无法遍历某些内容。这就是为什么我在执行（原子）代码时无法检查该值的原因。并且卸载 AppDomain 不会停止任务。

仅供参考：我参加了*Task*课程，因为它易于使用。如果*线程*有用：没问题。

有人能帮我吗？一个简短的代码片段会很好:)。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T01:45:30.053

中止线程或任务是**设计糟糕的解决方案**的代码味道。

如果这是您的决定，您应该考虑每一行代码都可能是最后执行的代码，并考虑释放任何可能使系统处于不一致状态的非托管资源、锁等。从理论上讲，我们应该始终如此小心，但在实践中，这并不成立。

如果您尝试使用*Thread*和邀请*.Abort()*方法，则应考虑*ThreadAbortException*是*try-catch*和*finally*块方面的特殊异常。此外，您甚至无法确定线程将被中止。

关于使用任务，AFAIK（我不是 TPL 专家）恐怕你不能做你想做的事。您应该以某种方式重新设计您的逻辑以考虑取消令牌并彻底停止您的计算。

# jsoup - Jsoup.connect(string) 编码问题

> ID：12459590
> 
> 赞同：6
> 
> 时间：2012-09-17T12:51:50.773
> 
> 标签：jsoup

我有几个特殊字符 url，我必须使用 Jsoup.connect(string) 连接，但它无法加载页面（出现错误 500）。我不太喜欢 URL 等，但我认为这与 JSoup.connect 使用的编码有关

无论如何，我将如何进行以允许链接具有特殊字符，例如：ÆØÅè等，我得到的例外是：

```
java.io.IOException: 500 error loading URL https://maps.googleapis.com/maps/api/place/textsearch/xml?query=Averøy%20restaurant%20og%20Pizzeria,%20Norge&sensor=false&key=xx&radius=10
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:414)
at org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:391)
at org.jsoup.helper.HttpConnection.execute(HttpConnection.java:157)
at org.jsoup.helper.HttpConnection.get(HttpConnection.java:146)
at HTMLParser.doParsing(HTMLParser.java:122)
at HTMLParser.initParser(HTMLParser.java:50)
at Main.main(Main.java:15) 
```

产生此错误的代码是：

```
Document gDoc = Jsoup.connect(placesURL).get(); 
```

placesURL 字符串在哪里：

```
https://maps.googleapis.com/maps/api/place/textsearch/xml?query=%s&sensor=false&key=XX&radius=10 
```

任何人有任何想法来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T20:49:56.097

遇到 URL 编码问题，我建议您首先使用 URL 编码器工具解析您的请求（[有关这些的 StackOverflow 答案](https://stackoverflow.com/questions/6096550/utf-8-encode-urls)）。Java 已经自带了一个。

```
URLEncoder.encode(stringToBeEncoded, "UTF-8") 
```

在上面的未格式化字符串上使用它，它应该看起来像：

```
Document gDoc = JSoup.connect(placesURL.format(URLEncoder.encode(queryString, "UTF-8")); 
```

...至于不对您的整个 URL 进行 URL 编码，只是您需要符合 UTF-8（或 UTF-16）的查询的一部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T12:01:20.247

我多么愚蠢，我不仅对查询字符串进行编码，还对整个 URL 进行了编码。

通过这样做解决：

```
String placesUrl = String.format("https://maps.googleapis.com/maps/api/place/textsearch/xml?query=%s&sensor=false&key=XX&radius=10",URLEncoder.encode(restaurantListe[i][0],"UTF-8")); 
```

谢谢您的帮助！

# java - 根据列之一将输入文件划分为多个文件

> ID：12459593
> 
> 赞同：0
> 
> 时间：2012-09-17T12:51:57.970
> 
> 标签：java, string, file

我有一个分号分隔的输入文件，其中第一列是 3 个字符的固定宽度代码，而其余列是一些字符串数据。

```
001;first_data_str;second_data_str;third_data_str;fourth_data_str
001;first_data_str;second_data_str;third_data_str;fourth_data_str
002;first_data_str;second_data_str;third_data_str;fourth_data_str
003;first_data_str;second_data_str;third_data_str;fourth_data_str
001;first_data_str;second_data_str;third_data_str;fourth_data_str
003;first_data_str;second_data_str;third_data_str;fourth_data_str
001;first_data_str;second_data_str;third_data_str;fourth_data_str
002;first_data_str;second_data_str;third_data_str;fourth_data_str
002;first_data_str;second_data_str;third_data_str;fourth_data_str
003;first_data_str;second_data_str;third_data_str;fourth_data_str
003;first_data_str;second_data_str;third_data_str;fourth_data_str
003;first_data_str;second_data_str;third_data_str;fourth_data_str
002;first_data_str;second_data_str;third_data_str;fourth_data_str
001;first_data_str;second_data_str;third_data_str;fourth_data_str 
```

我想根据第一列的不同值将上述文件划分为多个文件。

例如在上面的例子中，第一列有三个不同的值，所以我将文件分成三个文件，即。001.txt、002.txt、003.txt

输出文件应包含作为第一行的项目计数和作为剩余行的数据。

所以有 5 001 行，所以 001.txt 将是：

```
5
first_data_str;second_data_str;third_data_str;fourth_data_str
first_data_str;second_data_str;third_data_str;fourth_data_str
first_data_str;second_data_str;third_data_str;fourth_data_str
first_data_str;second_data_str;third_data_str;fourth_data_str
first_data_str;second_data_str;third_data_str;fourth_data_str 
```

同样，002 文件的第一行为 4，然后是 4 行数据，003 文件的第一行为 5，然后是 5 行数据。

**考虑到超过 100,000 行**的非常大的输入文件，实现这一目标的最有效方法是什么？

我写了下面的代码来从文件中读取行：

```
try{
          FileInputStream fstream = new FileInputStream(this.inputFilePath);
          DataInputStream in = new DataInputStream(fstream);
          BufferedReader br = new BufferedReader(new InputStreamReader(in));
          String strLine;

          while ((strLine = br.readLine()) != null)   {
              String[] tokens = strLine.split(";");
         }

          in.close();
    }catch(IOException e){
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:02:35.043

*   对于每一行
*   提取块名称，例如 001
*   查找名为“001-tmp.txt”的文件
*   如果存在，请读取第一行 - 它会给您行数，然后使用带有参数 0 的[seek](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html#seek(long))函数增加值并写入同一个文件，然后使用[writeUTF](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/RandomAccessFile.html#writeUTF(java.lang.String))覆盖字符串。也许这里必须应用一些字符串长度计算，例如留 10 个空格的占位符。
*   如果一个不存在，则创建一个并写 1 作为第一行，用 10 个空格填充
*   将当前行追加到文件中
*   关闭当前文件
*   继续下一行源文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:02:56.663

想到的解决方案之一是保留“地图”并且每个文件只打开一次。但是你不能这样做，因为你有大约 1 lac 行，所以没有操作系统会允许你打开那么多文件描述符。

因此，一种方法是以附加模式打开文件并继续写入并关闭它。但是由于大量文件的打开关闭调用，该过程可能会变慢。不过你可以自己测试一下。

如果以上没有提供令人满意的结果，您可以尝试方法 1 和 2 的混合，在这种方法中，您随时只打开 100 个打开的文件，并且只有在需要写入尚未打开的新文件时才关闭文件……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:06:13.657

首先，创建`HashMap<String, ArrayList<String>> map`以收集文件中的所有数据。其次，使用`strLine.split(";",2)`代替`strLine.split(";")`. 结果将是长度为 2 的数组，第一个元素是代码，第二个元素是数据。然后，将解码后的字符串添加到地图中：

```
ArrayList<String> list=map.get(tokens[0]);
if (list==null) {
   map.put(tokens[0], list=new ArrayList<String>();
}
list.add(tokens[1]); 
```

最后，扫描`map.keySet()`每个键的和，创建一个名为该键的文件，并将列表的大小和列表的内容写入其中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:00:56.243

对于每三个字符的代码，您将有一个输入行列表。对我来说，显而易见的解决方案是使用`Map`,`String`键（您的三个字符代码）指向`List`包含所有行的对应项。

对于这些键中的每一个，您将创建一个具有相关名称的文件，第一行将是列表的大小，然后您将对其进行迭代以写入剩余的行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:01:44.333

我猜您并没有固定在三个文件中，所以我建议您创建一个编写器映射，将您的三个字符代码作为键，编写器作为值。

对于您阅读的每一行，您选择或创建所需的阅读器并将这些行写入。您还需要第二张地图来维护所有文件的行数值。

读取完源文件后，刷新并关闭所有写入器并再次读取文件。这次您只需在文件前面添加行数。据我所知，除了重写整个文件之外别无他法，因为在不缓冲和重写整个文件的情况下，不可能直接将任何内容添加到文件的开头。我建议您为此使用一个临时文件。

此答案仅适用于您的文件太大而无法完全存储在内存中的情况。如果可以存储，则有更快的解决方案。`StringBuffer`就像在将文件内容写入文件之前将其完全存储在对象中一样。

# maven - rpm-maven-plugin 截断 rpm 版本

> ID：12459595
> 
> 赞同：3
> 
> 时间：2012-09-17T12:52:01.647
> 
> 标签：maven, rpm-maven-plugin

我正在使用 rpm-maven-plugin 构建三个软件包。一个父级和两个需要相同版本的父级的插件。一切正常，直到我用`XY-SNAPSHOT`版本构建它。然后我的 rpm 版本被截断为`XY`部分，但值`${project.version}`仍然是 XY-SNAPSHOT。它导致插件需要`XY-SNAPSHOT`父版本，而我已经安装了`XY`版本。

我想知道我是否可以在“要求”部分使用“截断”版本或强制插件**不**截断我的版本......

这是我的配置：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>rpm-maven-plugin</artifactId>
    <version>2.0.1</version>
    <executions>
        <execution>
            <id>parent-package</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>parent-package</name>
                <mappings>
                    (...)
                </mappings>
            </configuration>
        </execution>
        <execution>
            <id>first-plugin</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>first-plugin</name>
                <mappings>
                    (...)
                </mappings>
                <requires>
                    <require>parent-package = ${project.version}</require>
                </requires>
            </configuration>
        </execution>
        <execution>
            <id>second-plugin</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>second-plugin</name>
                <mappings>
                    (...)
                </mappings>
                <requires>
                    <require>parent-package = ${project.version}</require>
                </requires>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T14:23:07.347

RPM 规范将 a`-`视为特殊字符。看看[这是我在谷歌能找到的最好的](http://docs.fedoraproject.org/en-US/Fedora_Draft_Documentation/0.1/html/RPM_Guide/ch09s03.html)

```
The version number is used in version comparisons. The RPM comparison algorithm 
is fairly complex, but can get fooled by strange version numbers. So, your best 
bet is to stick to dotted numerics, such as 1.5 or 2.3.1.1.4 or 1.0\. Version 
numbers such as these will compare best from within the RPM system. For example:
    Version: 1.1.2
You cannot use a dash in the version number, as RPM uses the dash to separate 
the Name-Version-Release elements. 
```

因此，诸如 Maven 版本之类的`1.0-SNAPSHOT`将不是有效的 RPM 版本号。

Mojo 的 RPM Maven 插件对版本号进行了一些转换以“帮助”您。具体来说，它会`-SNAPSHOT`像您发现的那样去除，如果有，`-SNAPSHOT`它将 rpm 版本设置为`SNAPSHOTyyyymmddHHMMSS`（请注意，该版本用于区分同一 RPM 版本的两个不同版本）

您需要做的是将一些属性设置为*转换*后的版本。有很多方法可以做到这一点。正如我在评论中建议的那样，您可以使用它[`build-helper:regex-property`](http://mojo.codehaus.org/build-helper-maven-plugin/regex-property-mojo.html)来转换属性。这种方法的缺点是，如果 RPM 插件修改了它用于版本转换的规则，您的正则表达式可能会使您不同步。

正确的解决方案是使用[`rpm:version`](http://mojo.codehaus.org/rpm-maven-plugin/version-mojo.html)目标`rpm.version`为您设置属性，因此您的配置变为：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>rpm-maven-plugin</artifactId>
    <version>2.0.1</version>
    <executions>
        <execution>
            <id>properties</id>
            <goals>
                <goal>version</goal>
            </goals>
        </execution>
        <execution>
            <id>parent-package</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>parent-package</name>
                <mappings>
                    (...)
                </mappings>
            </configuration>
        </execution>
        <execution>
            <id>first-plugin</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>first-plugin</name>
                <mappings>
                    (...)
                </mappings>
                <requires>
                    <require>parent-package = ${rpm.version}</require>
                </requires>
            </configuration>
        </execution>
        <execution>
            <id>second-plugin</id>
            <goals>
                <goal>rpm</goal>
            </goals>
            <configuration>
                <name>second-plugin</name>
                <mappings>
                    (...)
                </mappings>
                <requires>
                    <require>parent-package = ${rpm.version}</require>
                </requires>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

如果您需要属性具有不同的名称，只需使用`versionProperty`配置参数，但请记住，对于多次执行，您可能希望将其保留为默认值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-02T15:14:01.990

为了扩展@StephenConnolly 的出色答案，[maven](http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-syntax.html)和[rpm](https://fedoraproject.org/wiki/Archive:Tools/RPM/VersionComparison?rd=Tools/RPM/VersionComparison)版本控制策略有一些特定的差异。差异主要在于 maven 的版本限定符和 rpm 的构建（或发布）属性。

Maven 将任何没有限定符的版本视为比没有限定符的版本更新。Maven 还对任何以 SNAPSHOT 结尾的限定符进行特殊处理。另一方面，RPM 需要一个内部版本号并比较该值。毫不奇怪，rpm 对 SNAPSHOT 没有特殊的逻辑。

由于我们在 maven 中工作，我们需要遵循 maven 的规则/行为并确定如何在 rpm 中按摩值以使其工作。这意味着我们需要建立规则来按摩 rpm 释放值，以基于 maven 限定符实现以下目标：

*   1.0-alpha-1-SNAPSHOT
*   1.0-alpha-1
*   1.0-alpha-2
*   1.0-beta-1
*   1.0-快照
*   1.0

此外，我们希望 rpm 的多个 SNAPSHOT 构建能够识别更新（按构建日期）并正确升级。

[release 属性](http://www.mojohaus.org/rpm-maven-plugin/rpm-mojo.html#release)的文档描述了实现此所需行为的规则。

欢迎您覆盖此默认行为，但我提醒您要非常小心，确保使用相同元数据（arch、os、version、release）构建的 rpm 包含相同的内容。

# php - PHP中的选择操作

> ID：12459601
> 
> 赞同：0
> 
> 时间：2012-09-17T12:52:37.207
> 
> 标签：php, forms, wordpress

```
$checkbox_field = "<select name='subscribe-reloaded' id='subscribe-reloaded'>
                <option value='none'>".__("Don't subscribe",'subscribe-reloaded')."</option>
                <option value='yes'".((get_option('subscribe_reloaded_checked_by_default', 'no') == 'yes')?" selected='selected'":'').">".__('All','subscribe-reloaded')."</option>
                <option value='replies'>".__('Replies to my comments','subscribe-reloaded')."</option>
                <!-- option value='digest'>".__('Daily digest','subscribe-reloaded')."</option -->
            </select>"; 
```

这是我正在使用的一个插件，它默认设置为“全部”，我不太清楚如何将“仅回复我的评论”设置为默认设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:55:09.213

尝试这个：

```
$checkbox_field = "<select name='subscribe-reloaded' id='subscribe-reloaded'>
                <option value='none'>".__("Don't subscribe",'subscribe-reloaded')."</option>
                <option value='yes'>".__('All','subscribe-reloaded')."</option>
                <option value='replies'".((get_option('subscribe_reloaded_checked_by_default', 'no') == 'replies')?" selected='selected'":'').">".__('Replies to my comments','subscribe-reloaded')."</option>
                <!-- option value='digest'>".__('Daily digest','subscribe-reloaded')."</option -->
            </select>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:57:29.130

```
$checkbox_field = "<select name='subscribe-reloaded' id='subscribe-reloaded'> 
            <option value='none'>".__("Don't subscribe",'subscribe-reloaded')."</option> 
            <option value='yes'>".__('All','subscribe-reloaded')."</option> 
            <option value='replies'".((get_option('subscribe_reloaded_checked_by_default', 'no') == 'yes')?" selected='selected'":'').">".__('Replies to my comments','subscribe-reloaded')."</option> 
            <!-- option value='digest'>".__('Daily digest','subscribe-reloaded')."</option --> 
        </select>"; 
```

只是将选定的逻辑向下移动了一步，假设其他一切都正确并按预期工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:55:52.587

```
$checkbox_field = "<select name='subscribe-reloaded' id='subscribe-reloaded'>
            <option value='none'>".__("Don't subscribe",'subscribe-reloaded')."</option>
            <option value='yes'".((get_option('subscribe_reloaded_checked_by_default', 'no') == 'yes')?" selected='selected'":'').">".__('All','subscribe-reloaded')."</option>
            <option value='replies' selected>".__('Replies to my comments','subscribe-reloaded')."</option>
            <!-- option value='digest'>".__('Daily digest','subscribe-reloaded')."</option -->
        </select>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:56:12.197

只需将您在 ALL 行上的代码放在另一行上...

```
$checkbox_field = "<select name='subscribe-reloaded' id='subscribe-reloaded'>
                <option value='none'>".__("Don't subscribe",'subscribe-reloaded')."</option>
                <option value='yes'>".__('All','subscribe-reloaded')."</option>
                <option value='replies'".((get_option('subscribe_reloaded_checked_by_default', 'no') == 'yes')?" selected='selected'":'').">".__('Replies to my comments','subscribe-reloaded')."</option>
                <!-- option value='digest'>".__('Daily digest','subscribe-reloaded')."</option -->
            </select>"; 
```

# c# - 如何在表单上设置焦点？

> ID：12459602
> 
> 赞同：2
> 
> 时间：2012-09-17T12:52:41.057
> 
> 标签：c#, winforms

我正在尝试从用户那里获取输入的值并将其保存在 char 变量中，但问题是什么都没有发生，**我认为问题出在 Form Focus**上，这是代码，当我运行它时没有发生错误，但也没有任何反应。我做错了什么？

```
 char keyPressed;

        public FrmZigndSC()
        {
            InitializeComponent();
            this.Focus();
        }

        private void FrmZigndSC_KeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e)
        {
            keyPressed = e.KeyChar;

            LblResult.Text += Convert.ToString(keyPressed);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:59:18.340

您可以尝试使用此代码 - 基于[`KeyPressEventHandler`](http://msdn.microsoft.com/en-us/library/system.windows.forms.keypresseventargs.handled.aspx)

```
public FrmZigndSC()
{
       InitializeComponent();
       this.Focus();

       //Subscribe to event
       this.KeyPress += new KeyPressEventHandler(FrmZigndSC_KeyPress);
}

private void FrmZigndSC_KeyPress(object sender, System.Windows.Forms.KeyPressEventArgs e)
{
        keyPressed = e.KeyChar;
        LblResult.Text += Convert.ToString(keyPressed);

        // Indicate the event is handled.
        e.Handled = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:00:03.753

我试图在一个空的小 Windows 窗体项目中重现它。`Shown`这段代码在没有事件处理程序的情况下工作得很好：

```
public partial class FrmZigndSC : Form
{
    public FrmZigndSC()
    {
        InitializeComponent();

        this.KeyPress += (s, e) => this.LblResult.Text += e.KeyChar.ToString();

        // this might be a solution, but i did not need it
        this.Shown += (s, e) => this.Activate();
    }
} 
```

无论如何，您都可以尝试使用`this.Activate()`，看看是否有帮助。如果您的表单上有**其他输入控件**（例如**文本框**），请尝试将表单的`KeyPreview`属性设置为 true。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:00:16.913

如果您想从应用程序的消息管道接收关键通知，中继元素的焦点，在这种情况下，会使架构变得脆弱。您无法从应用程序中的其他表单中保证其中一个会被聚焦，或者该表单未被吸收该事件的某些控件所覆盖。你不能坚持一个有焦点的形式，因为它是完全糟糕的 UX 设计（即使这可能以 100% 的工作方式实现，也不是很确定）。

相反，您*可以*做的是声明派生自[IMessageFilter](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)的类：

```
public class MessageFilter : IMessageFilter
{
        const int WM_KEYDOWN = 0x100;
        const int WM_KEYUP = 0x101;

        public bool PreFilterMessage(ref Message m)
        {
            // Intercept KEY down message
            Keys keyCode = (Keys)(int)m.WParam & Keys.KeyCode;

            if ((m.Msg == WM_KEYDOWN)
            {
                 //get key pressed  

                 return true;
            }        
            else
            {
                return false;
            }

        }
} 
```

*在您的应用程序中注册*后：

```
MessageFilter filter = new MessageFilter(); //init somewhere 

Application.AddMessageFilter(filter ); // add 

..... 

//on application end don't forget to remove it 
Application.RemoveMessageFilter(filter ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:54:35.203

使用 FocusManager 而不是 this.Focus() 应该可以解决问题！

[http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.focusmanager.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:00:04.963

我认为问题在于，当您的表单上有不同的控件时，它们会被按下。我的控件上的 DateTimePicker 也有同样的问题。

尝试删除所有这些，然后尝试它，它会工作。从那时起，再次添加控件以查看问题所在。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T13:01:50.823

您提供的代码对我来说很好用。将启动页面设置为 FrmZigndSC 并重试。

# bash - 如何使用 Bash 脚本或 awk 提取文件名

> ID：12459603
> 
> 赞同：0
> 
> 时间：2012-09-17T12:52:51.040
> 
> 标签：bash, awk

我收到具有以下格式的名称的文件

```
[2letters e.g.AF][6-digit-number sequence][Date in ccyymmdd][Time in hhmmss] 
```

例如：

```
AF00010720120917144500.csv 
```

我想使用文件的日期部分自动将此类文件加载到我的数据库中。

可能是这样开始的：

```
#!/bin/bash
filename_datepart=$(echo `date -d "1 day ago" +"%d%m%Y"`)
filename="/home/hlosi/AF000107"$filename_datepart".csv" 
```

但请记住，该部分`000107`会随着每个新文件而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:09:03.590

您可以使用通配符来填写未知值

```
#!/bin/bash
file=/home/hlosi/AF??????`date -d "1 day ago" +"%d%m%Y"`??????.csv
echo $file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:01:53.737

这是一个 BASH 解决方案：

```
#!/bin/bash

#The full name
fullname="/home/hlosi/AF00010720120917144500.csv"

#Rip off the directory
file=$(basename "$fullname")

#Now pull out just the characters that we want
extract=$(echo "$file" | cut -c3-8)
echo "You want: $extract" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:54:07.233

原谅我的无知 -atime -ctime -mtime 我认为它是 -ctime

```
find  -ctime 1  -name \*.csv -print 
```

-mtime 匹配 csv 的结尾并且正好是 1 天，问题是它在 24 小时内工作，所以文件少于 24 小时但昨天仍然不会显示

这将是一种更简单的处理方式，因为并且不会关心文件名格式的更改以供将来校对。

```
cd pathtcsv;
d=`date -d "1 day ago" +"%d"`
d=$d find . -type f -name \*.csv -ctime 1 -exec ls -l {} \;|awk '$7 ~ d'|awk '{print $NF}'|  awk '{ print substr( $0, length($0) - 1, length($0) ) }' 
```

# D = $d 设置为昨天的日期，它从 yseterday 中查找以 csv 结尾的文件，然后执行 ls，通过管道进入 awk 并根据昨天的日期检查值 7，其中 $7 是 ls -l 上的日期值，它最终将最后一个字段和管道打印到最终的 awk 中，该 awk 打印字符串并从 char 位置拆分为您想要的 char 位置？你需要弄清楚你需要什么字符是上面的另一个例子，用于 0 到 10 的字符位置。

```
 d=$d find . -type f  -ctime 1 -name \*.csv -exec ls -l {} \;|awk '$7 ~ d'|awk '{print $NF}'|  awk '{ print substr( $0, 0, 10)}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:11:29.957

我想你想要这个。如果您必须处理多个文件。

```
#!/bin/bash
fpath=/home/hlosi/
filename_datepart=$(echo `date -d "1 day ago" +"%d%m%Y"`)
files=$(find $fpath -iname "*$filename_datepart.csv")
for file in $files
do
    echo "found file: " $file
done 
```

# apache-poi - 使用 apache POI 将数字保存在数字类别中

> ID：12459608
> 
> 赞同：0
> 
> 时间：2012-09-17T12:53:08.583
> 
> 标签：apache-poi

我需要将数字存储在数字类别中（右键单击->类别=数字）。我试过使用下面的代码，但它以一般格式保存。

```
 String valueAsString = "2345";          
        HSSFCell cellE1 = row1.createCell((short) 4);
        cellE1.setCellValue(new BigDecimal(valueAsString).doubleValue()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T14:53:01.530

您需要为单元格设置单元格样式，以根据需要对其进行格式化。就像是

```
Worbook wb = new HSSFWorkbook();

DataFormat fmts = wb.getCreationHelper().createDataFormat();

// Cell Styles apply to the whole workbook, only create once
CellStyle numericStyle = wb.createCellStyle();
numericStyle.setDataFormat(fmts.getFormat("0")); // Format string

....

// Apply to the cells
Row r = sheet.createRow(0);
Cell c = r.createCell(0); // A1
c.setCellStyle(numericStyle);
c.setCellValue(Double.parseDouble("12345")); 
```

# java - java中的NSIS脚本错误

> ID：12459611
> 
> 赞同：-1
> 
> 时间：2012-09-17T12:53:13.793
> 
> 标签：java, nsis

我已经在我的 Eclipse 中安装了[NSIS](http://eclipsensis.sourceforge.net/help/eclipsensis/installation.html)插件。我已按照此[站点](http://eclipsensis.sourceforge.net/help/index.html)的步骤进行操作。运行 NSIS 脚本后，我收到以下错误：

```
File "..\src\main\sample\test.java"-> no files found.    
Error in script "C:\\Documents and Settings\\workspace\\setup.nsi" on line 47 -- aborting creation process 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:27:24.353

```
File "test.java" 
```

如果我删除绝对路径，那么它工作正常。所以我们将只给出项目中应该出现的文件名。

# java - 我如何告诉 Maven 搜索只在 Intranet Repository(Artifactoy) 而不是 Internet

> ID：12459614
> 
> 赞同：0
> 
> 时间：2012-09-17T12:53:22.550
> 
> 标签：java, maven, configuration, repository, artifactory

我安装了 Maven 和 Artifactory。

Artifactory 有互联网连接。

我以这种方式配置了 Maven。

```
<?xml version="1.0" encoding="UTF-8"?>
<settings
    xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"
    xmlns="http://maven.apache.org/SETTINGS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<localRepository>X:/.m2/repository</localRepository>
<interactiveMode>true</interactiveMode>
<usePluginRegistry>false</usePluginRegistry>
<offline>false</offline>

<profiles>
    <profile>
        <id>dev</id>
        <repositories>
            <repository>
                <id>MY_Artifactory</id>
                <url>http://myServer/artifactory/repo</url>
            </repository>
        </repositories>
        <pluginRepositories>
            <pluginRepository>
                <id>MY_Artifactory</id>
                <url>http://myServer/artifactory/repo</url>
            </pluginRepository>
        </pluginRepositories>
    </profile>
</profiles>

<activeProfiles>
    <activeProfile>dev</activeProfile>
</activeProfiles> 
```

我如何告诉 Maven 它只在 Artifactory 中搜索并且它应该直接尝试使用本地互联网？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:10:46.473

```
<mirrors>
    <mirror>
      <id>local</id>
      <name>Local Artifactory</name>
      <url>http://url/for/artifactory</url>
      <mirrorOf>central</mirrorOf>
    </mirror>
 </mirrors> 
```

将此添加到 settings.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:02:26.253

如果您已经使用以下命令配置了配置文件，则可以调用它们。

```
 mvn clean install -P dev 
```

以上将使用`dev`profile 。

**编辑：**其他方式是您可以覆盖 built-in repositories 。

请通过[这个，](http://wiki.jfrog.org/confluence/display/RTF20/Configuring+Artifacts+Resolution)我觉得它很有帮助。

[http://wiki.jfrog.org/confluence/display/RTF20/Configuring+Artifacts+Resolution](http://wiki.jfrog.org/confluence/display/RTF20/Configuring+Artifacts+Resolution)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:15:02.493

我建议使用：

```
<mirrorOf>*</mirrorOf> 
```

因为您只想解决 Intranet 中的依赖关系，所以只有所有配置的存储库（以及传递依赖项和奇怪的 pom.xml 中的那些）都应该使用您的内部存储库。不仅中央。

# iphone - 从 JSON 服务器获取数据并自动存储到 sqlite

> ID：12459617
> 
> 赞同：1
> 
> 时间：2012-09-17T12:53:28.997
> 
> 标签：iphone, json, sqlite

我想从 JSON 中获取数据并将其自动存储到 sqlite，只要程序运行，服务器上的任何更新都会自动更新到数据库。任何人都可以帮我解决这个问题。如果我的问题不足以回答，请提出任何要求。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:29:16.103

我会研究[RestKit](http://restkit.org/ "休息套件")框架。它负责低级 API 调用、对象映射、SQLite 持久性等。它有很好的文档记录和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:24:52.967

如果您支持 iOS 5+，则默认为您添加 JSON，并且可以使用[此处](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)给出的方法使用它，并且在获取对象字典后，您可以按照将它们添加到 sqlite 的正常过程或使用 @ 所说的核心数据帕拉斯乔希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:56:55.203

你可以从这里开始[http://www.raywenderlich.com/5492/working-with-json-in-ios-5](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)

阅读本文后，您可以使用这个类，[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)。它简单实用！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:01:34.260

**[使用AFNetworking](https://github.com/johnezang/JSONKit)**下载 JSON 数据并使用**[JSONKit](https://github.com/AFNetworking/AFNetworking)**解码，然后您可以使用此包装器**[FMDB](https://github.com/ccgus/fmdb)**保存到 SQLite 。

# javascript - 从数组/对象键是日期的 json 对象中获取今天和昨天的数据

> ID：12459628
> 
> 赞同：1
> 
> 时间：2012-09-17T12:53:54.893
> 
> 标签：javascript

我正在使用 ajax 来获取每天的销售列表，下面是返回给我的 ajax 示例（我完全控制了前端和后端，所以让我知道是否可以更好地改进数组结构以适应任务);

```
{

"map": [ … ],
"salesCount": {
    "ins_1": {
        "17/09/2012": 5,
        "16/09/2012": 32,
        "15/09/2012": 75,
        "14/09/2012": 78,
        "13/09/2012": 79,
        "12/09/2012": 83,
        "11/09/2012": 74,
 ...
    "ins_2": {
        etc 
```

我想获得今天和昨天的销售额（17/09/2012）。到目前为止，我有这个：

```
$.ajax({
    url:        appPath+'application/sale/json',
    type:       'POST',
    dataType:   'json',
    success:    function(response) 
    {
        var keys = null;

        // Get and organise our sales data
        jQuery.each(response.salesCount, function(insurer, dayList) 
        {
            controller.salesData[insurer] = {"days": dayList};

            keys = Object.keys(controller.salesData[insurer].days);
            controller.salesData[insurer].today = controller.salesData[insurer].days[keys[0]];

            // Update sales totals
            $('#'+insurer+' p.today').html(controller.salesData[insurer].today); 
```

这工作正常，但正如您可以想象的那样，它不是很灵活（我猜想尝试依赖对象不存在的顺序是个坏主意）。

因此，我试图根据日期引用销售数组。我试过了：

```
// Work out todays date and sales
var today = new Date();
var todayString = today.getDate()+'/'+today.getMonth()+'/'+today.getFullYear();

console.log(todayString)
console.log(controller.salesData[insurer].days[todayString]);

// outputs: 17/8/2012 and "85"(which is wrong, no idea where it gets that value) 
```

我尝试更改数组键以删除正斜杠等，但没有任何乐趣。当然有更好的方法来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:31:25.977

要返回今天日期的销售数量，您可以像这样查询 JSON 对象：

```
var json =
{
    "salesCount": {
        "ins_1": {
            "17/09/2012": 5,
            "16/09/2012": 32,
            "15/09/2012": 75,
            "14/09/2012": 78,
            "13/09/2012": 79,
            "12/09/2012": 83,
            "11/09/2012": 74
        }
    }
};

var today = new Date();
var month = today.getMonth() + 1;
var dateString = today.getDate() + '/' + (month < 10 ? '0' + month : month) + '/' + today.getFullYear();
var totalSales = json['salesCount']['ins_1'][dateString];

console.log(totalSales); // outputs 5 
```

# java - 用于调试目的的简单 Java 警报

> ID：12459633
> 
> 赞同：0
> 
> 时间：2012-09-17T12:54:25.357
> 
> 标签：java

我正在尝试调试/跟踪一些 Java 代码是如何执行的（或者即使是这样）。我想要一种简单的方法来发出警报，这样我就可以知道代码是如何执行的。就像是：

```
alert ("do we get here"); 
```

在 javascript 中，或者：

```
echo ("do we get here"); 
```

在 php.ini 中。

我用谷歌搜索了它，但很多方法似乎相当复杂并且代码量过多。我是java新手，有什么办法可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:57:38.913

```
JOptionPane.showMessageDialog(null, "Your Message"); 
```

null 部分实际上可以由适当的父组件切换，如果有的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:58:33.717

您可以使用

```
System.out.println("Here we are"); 
```

但如果你想知道我们是如何到达那里的，你可以使用

```
new Throwable("Here we are").printStackTrace(System.out); 
```

它也会打印调用 stacka 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T12:56:44.897

`Sytem.out.println("do we get here");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T12:57:37.407

如果您只想将文本输出到屏幕，您可以使用`System.out.println("Point 1");`. 如果你想要更直观的东西（我假设你是这样），你可以看看这个课程，[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)`JOptionPane`有更多信息。

一种更传统（最有可能是首选）的方法是使用 Loggin。[`SLF4J`](http://www.slf4j.org/)是在 Java 应用程序中进行日志记录的一种相对流行的方式。

# windows-8 - d3dx11.h 不在 Windows 8.0 工具包中

> ID：12459635
> 
> 赞同：15
> 
> 时间：2012-09-17T12:54:29.197
> 
> 标签：windows-8, directx, visual-studio-2012, winapi

我的开发平台是windows 7 x64。我已经安装了 VS2012，我想编译一个包含一些 Dx11 代码的项目。

具体来说，它包括以下文件：

```
#include <d3dx11.h>
#include <d3dx10.h> 
```

和链接到

```
#pragma comment (lib, "d3dx11.lib")
#pragma comment (lib, "d3dx10.lib") 
```

我已经在我的开发机器上安装了 VS2011，但我想尝试 VS2012 中用于原生 C++ 的单元测试工具。

由于安装了 VS2011 并使用 DirectShow 代码，我安装了 Windows 7.1 SDK。

VS2012 选择了这个并引用了 7.1 SDK，但是在 VS2012 下编译我的项目并引用了 7.1 SDK 给出了错误：

```
"warning C4005: '__useHeader' : macro redefinition" 
```

[我用谷歌搜索了这个，并在 social.msdn.microsoft.com 上](http://social.msdn.microsoft.com/Forums/sv-SE/vcgeneral/thread/a7fd6119-825a-4d9a-9570-7b9cf6ed1bc6)找到了一个类似我的查询。并且解决方案建议与 Windows 8 工具包而不是 7.1 SDK 链接以解决此问题。

Windows 8 工具包包含 d3d11.h 等标头，但不包含 d3dx11.h。

如何在 Windows 8 套件中包含 d3dx11（来自 Dx SDK），但不会出现多个“宏重新定义”错误？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T13:11:41.593

[我在这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ee663275%28v=vs.85%29.aspx)中找到了以下相当烦人的引用。

> D3DX 不被视为在 Windows 8 中使用 Direct3D 的规范 API，因此不包含在相应的 Windows SDK 中。研究使用 Direct3D API 的替代解决方案。
> 
> 对于旧项目，例如 Windows 7（和更早版本）DirectX SDK 示例，以下步骤对于使用 DirectX SDK 构建具有 D3DX 的应用程序是必需的：
> 
> * * *
> 
> 如下修改项目的 VC++ 目录，以使用正确的 SDK 头文件和库顺序。
> 
> 一世。打开项目的属性并选择 VC++ 目录页面。
> ii. 选择所有配置和所有平台。
> iii. 如下设置这些目录：
> 
> > > 可执行目录：（在右侧下拉菜单中）
> > > 
> > > 包含目录：$(IncludePath);$(DXSDK_DIR)Include
> > > 
> > > 包括库目录：$(LibraryPath);$(DXSDK_DIR)Lib\x86
> 
> iv. 单击应用。
> v. 选择 x64 平台。六。设置库目录如下：
> 
> > > 库目录：$(LibraryPath);$(DXSDK_DIR)Lib\x64
> 
> 无论您的项目中包含“d3dx9.h”、“d3dx10.h”还是“d3dx11.h”，请务必明确包含“d3d9.h”、“d3d10.h”和“dxgi.h”，或“ d3d11.h" 和 "dxgi.h" 首先确保您选择的是较新的版本。
> 
> 如果需要，您可以禁用警告 C4005；但是，此警告表明您正在使用这些标头的旧版本。
> 
> 删除项目中对 DXGIType.h 的所有引用。Windows SDK 中不存在此标头，并且 DirectX SDK 版本与新的 winerror.h 冲突。
> 
> 所有 D3DX DLL 都通过 DirectX SDK 安装安装到您的开发计算机上。确保必要的 D3DX 依赖项与任何示例或您的应用程序（如果它被移动到另一台机器）一起重新分发。
> 
> 请注意，当前使用 D3DX11 的替代技术包括 DirectXTex 和 DirectXTK。D3DXMath 被 DirectXMath 取代。

FFS 微软，请不要这样更改 API 的中间版本！！！

# r - Remove rows that are assoicated to certain columns value

> ID：12459636
> 
> 赞同：1
> 
> 时间：2012-09-17T12:54:29.773
> 
> 标签：r

I am new to R, I have 0's and 1's X matrix and associated with y's as the data. I need to remove the observations that have less than 10 one's so I add the columns for x and i return the column name to a vector. then drop the y's that associated with the one's then I need to remove the columns because it will be column with zero. so I am getting this error and I dont know how to fix and improve the code Error in -Col[i] : invalid argument to unary operator

Here is the code

```
a0=rep(1,40)
a=rep(0:1,20)
b=c(rep(1,20),rep(0,20))
c0=c(rep(0,12),rep(1,28))
c1=c(rep(1,5),rep(0,35))
c2=c(rep(1,8),rep(0,32))
c3=c(rep(1,23),rep(0,17))
x=matrix(cbind(a0,a,b,c0,c1,c2,c3),nrow=40,ncol=7)
nam <- paste("V",1:7,sep="")
colnames(x)<-nam
dat <- cbind(y=rnorm(40,50,7),x)
#===================================
toSum <- apply(dat,2,sum)
Col <- Val <- NULL
for(i in 1:length(toSum)){
if(toSum[i]<10){
Col <- c(Col,colnames(dat)[i])
Val <- c(Val,toSum[i])}
}

for(i in 1:length(Col)){
indx <- dat[,Col[i]]==0
datnw <- dat[indx,]
datnw2 <- datnw[,-Col[i]]
} 
```

Can some one help please? I am not sure if there is a way to get the position for the columns in Col vector. I have around 1500 columns on my original data.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:06:20.200

This should do the trick

```
 datnw2 <- dat[, -which(toSum<10)] 
```

This allows you to avoid the loop

```
 head(datnw2)
            y V1 V2 V3 V4 V7
[1,] 60.88166  1  0  1  0  1
[2,] 54.35388  1  1  1  0  1
[3,] 39.78881  1  0  1  0  1
[4,] 44.20074  1  1  1  0  1
[5,] 42.27351  1  0  1  0  1
[6,] 43.52390  1  1  1  0  1 
```

**Edit**: Some pointers

`toSum<10` will give a logical vector to you, the length of this vector is the same as `length(toSum)` `which(toSum<10)` will give you the positions of those elements meeting the condition

Since you want to select those columns from `dat` which the associated `toSum<10` is `FALSE`, then you have to left those columns out by doing `dat[, -which(toSum<10)]`, this means: chose all columns but 6 and 7 which are the ones meeting condition `toSum<10`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:23:41.650

Using your example data, if you want to find which rows (i.e. observations) have fewer than 10 `1`s

```
rs <- rowSums(dat[, -1]) < 10 
```

If you want to know which columns (i.e. variables) have less than 10 "presences" then

```
cs <- colSums(dat[, -1]) < 10

R> cs
   V1    V2    V3    V4    V5    V6    V7 
FALSE FALSE FALSE FALSE  TRUE  TRUE FALSE 
```

Both `rs` and `cs` are logical variables that can be used to index to remove rows/columns.

To get rid of the columns we use:

```
dat2 <- dat
dat2 <- dat2[, !cs]
head(dat2)

R> head(dat2)
            y V1 V2 V3 V6 V7
[1,] 47.61253  1  0  1  1  1
[2,] 60.51697  1  1  1  1  1
[3,] 53.69815  1  0  1  1  1
[4,] 53.79534  1  1  1  1  1
[5,] 49.04329  1  0  1  1  1
[6,] 42.04286  1  1  1  1  1 
```

Next it seems that you are concerned that some rows will now be all zero? Is that what you are trying to do with the final step? That doesn't appear to be the case here, so perhaps the way or removing the columns I show has solved that problem too?

```
R> rowSums(dat2[,-1])
 [1] 4 5 4 5 4 5 4 5 3 4 3 4 3 4 3 4 3 4 3 4 2 3 2 2 1 2 1 2 1 2 1 2 1 2 1 2 1 2
[39] 1 2 
```

# multidimensional-array - Java中的递增多维数组

> ID：12459643
> 
> 赞同：0
> 
> 时间：2012-09-17T12:54:41.847
> 
> 标签：multidimensional-array

我有一个要放入多维数组的文件。我必须将日期（长）放入 [0] 并且必须根据第二个令牌的值增加其中一个维度。

这是代码：

```
BufferedReader bufStatsFile  = new BufferedReader(new FileReader(statsFile));

String line = null;
List<Long[]> stats = new ArrayList<Long[]>();
stats.add(new Long[11]);
int i = 0; // will be in a loop later

while((line = bufStatsFile.readLine()) != null) {
    StringTokenizer st = new StringTokenizer(line,";");
    while(st.hasMoreTokens()) {
        stats.get(i)[0] = Long.parseLong(st.nextToken());
        stats.get(i)[Integer.parseInt(st.nextToken())]++; // Here is the problematic line.
    }
}
bufStatsFile.close(); 
```

但是增量不起作用。也许是因为我的数组可能不正确，但我没有找到另一种正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:39:15.150

行。我发现了，这当然是愚蠢的。

问题出在我的数组声明中。我是这样做的：

```
 List<Long[]> stats = new ArrayList<Long[]>();
    stats.add(new Long[11]); 
```

然后，我尝试增加一个对象而不是一个长数字。

所以现在，我只是这样做：

```
 List<long[]> stats = new ArrayList<>();
    stats.add(new long[11]); 
```

它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:08:51.427

检查文件中的元素是否是从 0 到 10 的数字。如果您只处理第 0 行，为什么还要有一个 List？

您的代码丢弃了哪个异常？

# c++ - 带有 BASS 库的多扬声器选项

> ID：12459648
> 
> 赞同：0
> 
> 时间：2012-09-17T12:54:54.023
> 
> 标签：c++, visual-studio-2010, speaker, bass

我正在做一个声化项目，我必须从我的相机中跟踪一个有色物体并在该物体移动到不同位置时播放音乐，例如：如果物体向右移动，则在右扬声器上播放音乐。

我一直在互联网上寻找音频库，但没有找到解决方案。我尝试使用 BASS 音频库，但找不到任何教程。我需要使用 BASS，因为我读到它有一个多扬声器选项。

有谁知道如何使用这个多扬声器选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:22:15.250

我找到了使用 IrrKlang 的解决方案。有了这个库，我可以管理 3D 声音跟踪项目......我建议使用这个库，它是我发现的最准确和最有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:18:01.767

有很多选择。我个人建议您使用[OpenAL](http://connect.creativelabs.com/openal/default.aspx)或[fmod](http://www.fmod.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T12:24:21.050

我建议您从查看库提供的示例开始。当您遇到不理解的内容时，请尝试转到文档页面并搜索功能：[http](http://www.un4seen.com/doc/) ://www.un4seen.com/doc/ 。

如果一切都失败了，请尝试在 BASS 论坛上四处看看。

# testing - 如何在 Windows 7 的 IE10 中测试网站？

> ID：12459655
> 
> 赞同：2
> 
> 时间：2012-09-17T12:55:04.627
> 
> 标签：testing, web, windows-8, internet-explorer-10

我需要在 Windows 7 上的 IE10 中测试网站。不安装 Windows 8 发布预览版是否可行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:02:43.233

如果您只需要测试网站的外观，您可以尝试类似[browsershots.org](http://browsershots.org/)的服务（类似的服务很少，但我现在不记得了）。其他选择是在虚拟机上安装 Win8 并在那里进行测试。据我所知，IE10 在 Win7 上不可用（还没有？）。

# python - 具有两个条件的列表中的最大值

> ID：12459656
> 
> 赞同：8
> 
> 时间：2012-09-17T12:55:06.297
> 
> 标签：python, list, max

我在 Python 中有一个列表，其中每个元素都是这样的元组：

```
(attr1, attr2, attr3) 
```

我想找到最大的元组`attr2`，但有`attr3 >= 100`。

对此的pythonic方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T12:56:27.903

您必须过滤并使用`key`max 的参数：

```
from operator import itemgetter

max(filter(lambda a: a[2] >= 100, yourlist), key=itemgetter(1)) 
```

过滤器也可以表示为生成器表达式：

```
max((t for t in yourlist if t[2] >= 100), key=itemgetter(1)) 
```

演示：

```
>>> yourlist = [(1, 2, 300), (2, 3, 400), (3, 6, 50)]
>>> max((t for t in yourlist if t[2] >= 100), key=itemgetter(1))
(2, 3, 400)
>>> max(filter(lambda a: a[2] >= 100, yourlist), key=itemgetter(1))
(2, 3, 400) 
```

请注意，由于您进行过滤，很容易得到一个空列表来从中选择最大值，因此您可能需要 catch `ValueError`s ，除非您需要该异常来传播调用堆栈：

```
try:
    return max(filter(lambda a: a[2] >= 100, yourlist), key=itemgetter(1))
except ValueError:
    # Return a default
    return (0, 0, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T16:37:38.707

如果您还想要最大值的索引，您可以这样做：

```
 max(filter(lambda a: a[1][2] >= 100, enumerate(yourlist)), key=lambda x:x[1][1])` 
```

尽管我不得不承认它有点难以理解。

# java - Tomcat7：等待WAR文件的多线程部署完成时出错

> ID：12459666
> 
> 赞同：8
> 
> 时间：2012-09-17T12:55:51.743
> 
> 标签：java, tomcat, tomcat7

Tomcat **7.0.30**在启动时失败（无法启动），但有以下异常：

```
SEVERE: Error waiting for multi-thread deployment of WAR files to complete 
```

以下是异常的完整堆栈跟踪：

```
==> /usr/share/tomcat7/logs/catalina.out <==

Sep 17, 2012 2:43:22 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive /usr/share/tomcat7/webapps/cfwd.war
Sep 17, 2012 2:43:22 PM org.apache.catalina.startup.HostConfig deployWARs
SEVERE: Error waiting for multi-thread deployment of WAR files to complete
java.lang.InterruptedException
    at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1302)
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:248)
    at java.util.concurrent.FutureTask.get(FutureTask.java:111)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:752)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1454)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:296)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1374)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)
    at java.lang.Thread.run(Thread.java:679) 
```

请注意，这`cfwd.war`是`webapps`目录中唯一的 war 文件（除了通常的默认内容，如`examples`、`manager`等）。

关于可能的原因有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T17:43:31.653

这通常是由应用程序类层次结构的问题引起的。我见过的一个例子是过时的类引入了循环继承。

如果您升级到 7.0.47，您将收到关于问题所在的更多信息错误消息。或者，您的应用程序的干净构建可能足以清理内容。

# django - 如何“管理”bitnami pootle 堆栈

> ID：12459668
> 
> 赞同：0
> 
> 时间：2012-09-17T12:55:52.690
> 
> 标签：django, bitnami

我对安装的 bitnami pootle 堆栈有疑问。如何配置 django-admin.py --settings=pootle.settings 以启用 pootle 命令：[pootle:commands](http://translate.sourceforge.net/wiki/pootle/commands)

设置文件的正确路径是哪个？/opt/pootle-2.1.6-1/apps/pootle/etc/pootle/localsettings.py? /opt/pootle-2.1.6-1/apps/pootle/lib/pootle/settings.py?

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T17:25:53.167

这已经在 BitNami 论坛中得到回复，但我也在这里回复以供参考（我刚刚找到了问题）：

您可以运行管理命令来管理来自 django-admin.py 的 pootle。为此，您必须在执行 django-admin.py 时指定 pootle 设置和路径。因此，您可以检查您可用的 pootle 命令正在运行：

```
cd /your_installdir/
./use_pootle
django-admin.py help --settings=pootle.settings --pythonpath=/your_installdir/apps/pootle/lib/ 
```

例如，您可以使用 refresh_stats 执行以下操作：

```
cd /your_installdir/
./use_pootle
django-admin.py refresh_stats --settings=pootle.settings --pythonpath=/your_installdir/apps/pootle/lib/ 
```

如果要创建 cron 任务，可以指定捆绑的 Python：

```
/your_installdir/python/bin/python /your_installdir/apps/django/bin/django-admin.py 
```

# asp.net - MVC4，两种不同的母版

> ID：12459669
> 
> 赞同：3
> 
> 时间：2012-09-17T12:55:53.860
> 
> 标签：asp.net, layout, asp.net-mvc-4, master-pages

如何使用 mvc4 在我的 Web 项目中使用两个不同的母版页或布局？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T09:33:20.240

您创建 2 个不同的布局，然后在您的视图中，您可以选择要使用的布局：

```
@{ 
    Layout = "~/Views/Shared/MyLayout.cshtml";
} 
```

这也可以在渲染视图的控制器动作中完成：

```
return View("Index", "MyLayout", myViewModel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-21T21:11:20.003

我并不声称自己是 MVC 方面的专家。事实上，我刚开始使用它。这就是我所做的。我使用 Windows 资源管理器复制了 Site.Master，对其进行了重命名，将其添加到共享视图中，对其进行了编辑，然后开始使用它。为我工作。

# php - 身份验证 codeigniter-restserver

> ID：12459677
> 
> 赞同：0
> 
> 时间：2012-09-17T12:56:32.320
> 
> 标签：php, codeigniter, rest, digest

我在 codeigniter-restserver 中的身份验证遇到问题。

当我将 config: 设置`$config['rest_auth']`为`basic`or`digest`时，我似乎无法使用标准登录通过验证。

还有什么我需要考虑的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T20:32:21.730

**我认为您必须在/application/config/rest.php 中**填充允许的用户名和密码：

```
$config['rest_valid_logins'] = array('user1' => 'password'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T12:52:27.957

对于基本，您需要在**/application/config/rest.php中将 rest_auth 设置为基本**

`$config['rest_auth'] = 'basic';`

然后在同一个文件中设置用户名和密码，为此，请转到**/application/config/rest.php 中**的 rest_valid_logins 配置并将密钥设置为用户名并将密码设置为该密钥的值。请记住，它是一个关联数组，因此您可以使用多个值键对。

`$config['rest_valid_logins'] = ['admin' => '1234'];`

然后使用 HTTP 基本身份验证进行调用。为此，请使用以下格式： `https://username:password@domain/path/to/api`

例如，它可能是 `https://admin:1234@localhost/api/users`

# facebook - Facebook 应用程序限制

> ID：12459681
> 
> 赞同：0
> 
> 时间：2012-09-17T12:56:41.633
> 
> 标签：facebook, facebook-graph-api

我尝试使用 facebook apprequest api (http://developers.facebook.com/docs/reference/api/user/#apprequests) 向我的 facebook 应用程序的用户发送通知。没关系。用户收到我的通知。我有一个问题：apprequest 发送是否有限制？文档中没有。也许在一次通知发送或通知计数中限制用户计数到一个用户或其他什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:07:28.090

是的，您可以发送多个应用程序请求，但一次您可以发送超过 50 个，因此，**我建议您 **每次发送 49 个应用程序请求****

如果您想发送超过 49 个，您可以再次显示应用请求对话框并再次发送其他 50 个请求。

# c# - 将结构从 C# 编组到 C++ DLL

> ID：12459691
> 
> 赞同：2
> 
> 时间：2012-09-17T12:57:17.403
> 
> 标签：c#, c, interop

我有一个访问专有数据库的 C DLL。我想从 C# 应用程序中访问它，该应用程序将用于将数据转换为 SQL 数据库。

目前，我正忙于从 C# 编组一个特别复杂的结构。

我的 C 结构定义如下

```
typedef struct iseg {
    short   soffset;        /* segment offset   */
    short   slength;        /* segment length   */
    short   segmode;        /* segment mode     */
} ISEG, *LPISEG;

typedef struct iidx {
    short     ikeylen;        /* key length     */
    short     ikeytyp;        /* key type       */
    short     ikeydup;        /* duplicate flag */
    short     inumseg;        /* number of segments */
    LPISEG    seg;            /* segment information    */
    char      *ridxnam;       /* r-tree symbolic name   */
} IIDX, *LPIIDX;

typedef struct ifil {
    char        *pfilnam;       /* file name (w/o ext)  */
    char        *pfildes;       /* file description     */
    unsigned short  dreclen;        /* data record length   */
    unsigned short  dxtdsiz;        /* data file ext size   */
    short       dfilmod;        /* data file mode   */
    short       dnumidx;        /* number of indices    */
    unsigned short  ixtdsiz;        /* index file ext size  */
    short       ifilmod;        /* index file mode  */
    LPIIDX      ix;             /* index information    */
    unsigned short  rfstfld;        /* r-tree 1st fld name  */
    unsigned short  rlstfld;        /* r-tree last fld name */
    int     tfilno;         /* temporary file number*/
    char        datetime;       /* Update Date & Time Fields */ 
} IFIL, *LPIFIL; 
```

我尝试了一堆不同的变体，但这就是我的 C# 结构的样子

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential, Pack=1)]
public unsafe struct iseg
{
    public short soffset;
    public short slength;
    public short segmode;
}

[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential, Pack=1)]
public unsafe struct iidx
{
    public short ikeylen;
    public short ikeytyp;
    public short ikeydup;
    public short inumseg;

    [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.ByValArray, ArraySubType = System.Runtime.InteropServices.UnmanagedType.Struct)]
    public iseg[] seg;

    [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)]
    public string ridxnam;
}

[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential, Pack=1)]
public unsafe struct ifil
{
    [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)]
    public string pfilnam;

    [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)]
    public string pfildes;

    public ushort dreclen;
    public ushort dxtdsiz;
    public short dfilmod;
    public short dnumidx;
    public ushort ixtdsiz;
    public short ifilmod;

    [System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.ByValArray, ArraySubType = System.Runtime.InteropServices.UnmanagedType.Struct)]
    public iidx[] ix;
    public ushort rfstfld;
    public ushort rlstfld;
    public int tfilno;
    public byte datetime;
} 
```

我收到以下异常

Conversion.dll 中出现“System.AccessViolationException”类型的第一次机会异常 Conversion.dll 中出现“System.AccessViolationException”类型的未处理异常

附加信息：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

我无法调试 C DLL，即使我在项目中选择了调试非托管代码选项。也许问题出现在编组代码中？

我对 c 代码的调用是

```
public class NativeMethods
{
    /// Return Type: int
    ///lpIfil: LPIFIL->IFIL*
    [System.Runtime.InteropServices.DllImportAttribute(@"c:\db\debug\db.dll", EntryPoint = "OPNIFIL")]
    public static extern int OPNIFIL(ref ifil lpIfil);
}

if (NativeMethods.OPNIFIL(ref ifil) == 0)
{
    // No error occured
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:50:41.703

抱歉，我没有足够的代表发表评论。

但：

你用C初始化这个结构吗？由于您的字符串只是指针，请检查您的 C 代码是否正在为要填充的字符串分配内存。也许您只是在 C 中检查它们不是 NULL 并试图找到字符串的结尾......如果是这样，在将结构传递给 C 代码之前对其进行初始化。

解决此类互操作问题的一种有效方法是编写一个非常简单的 C 程序或 dll，它打印您正在传递的结构的每个字段。当您弄清楚结构是如何到达 C 中的时，您可以将 DLL 替换为真实的。

要尝试的另一件事是在 C 中获取字符串的 sizeof，并与 C# 上报告的 sizeof 进行比较。即使是一个字节的偏移量也会导致很多问题。编写一个 sanity 函数并将其导出到 DLL 中：

```
int sanity()
{
    return sizeof(IIDX);
} 
```

然后，您可以在 C# 中进行 sanity 检查，使用在 C# 上计算的结构大小测试 sanity 返回的值。对齐问题可能很难看到，如果将来结构尺寸发生变化，您可能会收到警告消息。

此外，如果字符串是在 C 中分配的，请考虑稍后如何释放这些字符串。

参考： http: [//msdn.microsoft.com/en-us/library/s9ts558h (v=vs.100).aspx#cpcondefaultmarshalingforstringsanchor2](http://msdn.microsoft.com/en-us/library/s9ts558h(v=vs.100).aspx#cpcondefaultmarshalingforstringsanchor2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:21:53.110

You've incorrectly declared the members iidx.seg and ifil.ix¹. You've declared them both as byval, or static, arrays. Because you haven't initialized SizeConst, I think the runtime marshals them as single-element arrays.

This means that the C# runtime thinks that you have a field 6 bytes wide for iidx.seg (the size of one iseg), and 18 or 22 bytes wide (depending on platform) for ifil.ix. But the size of both fields in your C structures is the size of a pointer (4 or 8 bytes, depending on platform).

By the way, you don't need to use the `unsafe` keyword. You only need that when using pointers, `fixed`, and `sizeof`. Marshaling, in general, keeps you from having to use unsafe code.

[¹ Have you considered using names that bear a stronger resemblance to actual words?]

# android - 我已经在 MapActivity 中实现了功能，但它使用的是网络，所以我需要在 doInbackground 中放入 Asynctask

> ID：12459692
> 
> 赞同：0
> 
> 时间：2012-09-17T12:57:21.290
> 
> 标签：android, android-asynctask

我有 Hesham Saeed 编写的代码。我想将方向函数放在 AsyncTask 中，因为它正在使用 Network。我怎么能做到这一点，因为我是 Android 新手。我需要在 AsyncTask 中移动方向..

主要活动代码。

```
package com.example.googlemaptst;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

import android.app.ProgressDialog;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.widget.Button;

public class MapsActivity extends MapActivity
{    

/** Called when the activity is first created. */
Button b;
private ProgressDialog pDialog;
private  Route directions(final GeoPoint start, final GeoPoint dest)  {
   Parser parser;
    String jsonURL = "http://maps.google.com/maps/api/directions/json?";
    final StringBuffer sBuf = new StringBuffer(jsonURL);
    sBuf.append("origin=");
    sBuf.append(start.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(start.getLongitudeE6()/1E6);
    sBuf.append("&destination=");
    sBuf.append(dest.getLatitudeE6()/1E6);
    sBuf.append(',');
    sBuf.append(dest.getLongitudeE6()/1E6);
    sBuf.append("&sensor=true&mode=driving");
    Log.v("I came in URL", sBuf.toString());
    parser = new GoogleParser(sBuf.toString());
    Route r =  parser.parse();
    return r;
}

@Override
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_map);
     MapView mapView = (MapView) findViewById(R.id.mapView); //or you can declare it directly with the API key
     Route route = directions(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));
     RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
     mapView.getOverlays().add(routeOverlay);

}

@Override
protected boolean isRouteDisplayed() {

    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:28:28.973

好的，这是你必须做的：

```
 MapView mapView = null;
@Override
public void onCreate(Bundle savedInstanceState)
{
     super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_map);
     mapView = (MapView) findViewById(R.id.mapView); //or you can declare it directly with the API key
     DirectionsTask getDirectionsTask = new DirectionsTask();
     getDirectionsTask.execute(new GeoPoint((int)(26.2*1E6),(int)(50.6*1E6)), new GeoPoint((int)(26.3*1E6),(int)(50.7*1E6)));

}

private class DirectionsTask extends AsyncTask<GeoPoint, Void, Route> {

    protected Route doInBackground(GeoPoint... geoPointParams) {
        GeoPoint start = geoPointParams[0];
        GeoPoint dest = geoPoint[1];

           Parser parser;
            String jsonURL = "http://maps.google.com/maps/api/directions/json?";
            final StringBuffer sBuf = new StringBuffer(jsonURL);
            sBuf.append("origin=");
            sBuf.append(start.getLatitudeE6()/1E6);
            sBuf.append(',');
            sBuf.append(start.getLongitudeE6()/1E6);
            sBuf.append("&destination=");
            sBuf.append(dest.getLatitudeE6()/1E6);
            sBuf.append(',');
            sBuf.append(dest.getLongitudeE6()/1E6);
            sBuf.append("&sensor=true&mode=driving");
            Log.v("I came in URL", sBuf.toString());
            parser = new GoogleParser(sBuf.toString());
            Route r =  parser.parse();
            return r;
    }

}

protected void onPostExecute(Route route) {
    RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
     mapView.getOverlays().add(routeOverlay);
} 
```

一些评论。将 mapView 放在 OnCreate 之外，以便 onPostExecute 可以访问它。请注意，onPostExecute 在 UI 线程中被调用，所以没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:18:03.837

```
package Logic;

public class ReadConfig extends AsyncTask<String, Integer, String> {

    public ReadConfig(Context context) {
        this.context = context; 
    }

    protected void onPreExecute() {

        //initialize progressbar
    }

    @Override
    protected String doInBackground(String... params) {

        //do you processing here, or call a method to do it for you.
        return "";
    }

    protected void onPostExecute(String result) {

      //cancel progressdialog and do whatever you need to do after background job has completed
    }
} 
```

这样调用`AsyncTask`：

```
new ReadConfig(getApplicationContext()).execute(""); 
```

# java - 如何使用 Java 在 Windows 上获取卷 ID？

> ID：12459697
> 
> 赞同：1
> 
> 时间：2012-09-17T12:57:35.987
> 
> 标签：java, windows, system, system-information

我正在开发一个 java 桌面应用程序来访问信息、格式、更改标签和卷 ID。此应用程序的目标是主要使用 Windows XP 或 Windows 7 的 Windows 用户。

我正在使用 java 的 File 和 FileSystemView 获取基本信息；我正在使用 Runtime.getRuntime().exec() 来执行外部 Windows 应用程序来执行其他任务。

我尝试使用“vol”和“dir”来获取 volumeId 信息，但出现以下错误：

```
Starting: vol E:
java.io.IOException: Cannot run program "vol": CreateProcess error=2, O sistema não pode  encontrar o arquivo especificado
        at java.lang.ProcessBuilder.start(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at java.lang.Runtime.exec(Unknown Source)
        at app.CommandRunnerWithReturn.run(CommandRunnerWithReturn.java:24)
Caused by: java.io.IOException: CreateProcess error=2, O sistema não pode encontrar o arquivo especificado
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(Unknown Source)
        at java.lang.ProcessImpl.start(Unknown Source)
        ... 5 more 
```

是否有可用于获取 volumeid 信息的 Java API 或 Windows 程序？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:21:59.730

一些命令内置在 shell 中。要运行这些命令，您需要运行 shell 来运行命令。对于 CMD 你需要类似的东西

```
CMD /C VOL 
```

对于 unix shell，你需要类似的东西

```
sh -c "cd /path ; command > file" 
```

# c# - 必填字段验证正在做回发页面如何防止 MVC2 中的回发？

> ID：12459704
> 
> 赞同：1
> 
> 时间：2012-09-17T12:58:06.430
> 
> 标签：c#, asp.net-mvc-2

复选框列表和必填字段验证的代码。必填字段验证是回发页面如何防止回发。

我的查看代码：

```
 <% int cnt = 0; foreach (var value in Enum.GetValues(typeof(ColList)))
       {
           cnt++; %>
    <% var name = Enum.GetName(typeof(ColList), value); %>

    <input type="checkbox" id="ColList" name="ColList" value="<%=value %>" />
    <fieldset>
        <label for="ColList<%=value %>">
            <%=name %>
        </label>
    </fieldset>
    <% if ((cnt % 4) == 0)
       { %>
    <br />
    <% }

       } %>
    <%:Html.ValidationMessageFor(model => model.ColList)%> 
```

型号代码为：

```
[Required(AllowEmptyStrings = false, ErrorMessage = "Select at least one Column")]
public ColList[] ColList { get; set; } 
```

我能够获得选定的列列表，其代码是：

```
//Selected Columns
string selectedColumns = string.Empty;
for (int i = 0; i < ((reportCriteria.ColList == null) ? 0 : reportCriteria.ColList.Length); i++)
{
    selectedColumns += "&C=" + reportCriteria.ColList[i].ToString();
} 
```

# javascript - AJAX 回调中的“递归”超时会填满内存。我怎样才能避免这种情况？

> ID：12459706
> 
> 赞同：0
> 
> 时间：2012-09-17T12:58:12.563
> 
> 标签：javascript, memory-leaks, settimeout

我正在开发一个仪表板项目，其中需要每 5 秒左右通过 AJAX 源更新多个小部件（如十几个）。我目前正在使用`setTimeout`排队小部件更新，每次实际更新小部件时都会调用它（从技术上讲不是递归，但是......）。这就是代码的样子

```
var update;
(update = function() {
  $.get(source, function() {
    // Do something
    setTimeout(update, 5000);
  });
})(); 
```

在页面运行几个小时后（Chromium 21），它可以轻松 OOM 我的 8GB RAM。由于客户端在非常小的配置（< 1GB RAM）上使用 IE6，因此问题更加重要。

我怎样才能避免这种怪癖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:39:16.693

好的，感谢freakish & Pointy，泄漏确实是由jqPlot 引起的。问题是，您必须`.destroy()`在所述图上使用该方法，然后删除（而不是清空）其 DOM 容器，然后再创建另一个并重新绘制图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:05:56.250

请改用 setInterval。这样，您只需生成一个计时器，而无需每五秒启动一个新计时器，这可能会消耗浏览器中的某种句柄。

我实际上不会想到 setTimeout 泄漏，但是有一个 clearTimeout 函数。仅出于研究目的，您可以尝试保存 setTimeout 的返回值并将其清除，然后再开始下一个。

# php - 为什么这个递归示例不起作用？

> ID：12459709
> 
> 赞同：0
> 
> 时间：2012-09-17T12:58:25.437
> 
> 标签：php, recursion

我正在编写一个用于探索 XML 文档的函数，并且需要使用递归。这不是*我*想要的，所以开始运行一些测试。

```
<?php

$i=0;
function recursion(){
    $i++;
    if($i < 10){recursion();}
    echo $i;
    }
recursion();
?> 
```

这会生成 500 内部服务器错误。好像我处理不当 - 有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T12:59:40.853

`$i`函数内部不引用全局变量`$i`，所以它总是1，脚本溢出堆栈。

您可以`$i`将其设为全局，但最好将其作为参数传递：

```
function recursion($i){
    $i++;
    if($i < 10){recursion($i);}
    echo $i;
}

recursion(0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:00:52.240

```
<?php

 function recursion($i = 0){
   $i++;
   if($i < 10){recursion($i);}
   echo $i;
  }
recursion(); 
```

?>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:00:36.353

你错过了论点

```
$i=0;
function recursion($i){
    $i++;
    if($i < 10){recursion($i);}
    echo $i;
    }
recursion($i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:00:38.043

尝试`i`递增后作为参数传递给函数，否则无法识别

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T13:04:09.600

您在函数内部将 $i 引用为局部变量。如果要引用全局变量，请使用保留字 global：

```
<?php
    $i=0;
    function recursion(){
        global $i;
        $i++;
        if($i < 10){recursion();}
        echo $i;
    }
recursion();
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T13:09:47.210

其他答案可以正常工作，但没有人提到这个选项，所以我就把它扔在那里。

您还可以使用`static`关键字：

```
function recursion(){
    static $i = 0;
    $i++;
    if($i < 10){recursion();}
    echo $i;
}

recursion(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T13:10:51.560

$i 的范围在您的示例中是本地的， $i 在每次调用时都会被初始化并成为无限循环。PHP 通过在达到 200 调用后产生致命错误来中止脚本

*致命错误：达到“200”的最大函数嵌套级别，正在中止！*

请试试，

```
$i = 0;
function recursion() {
    global $i;
    $i++;
    echo $i;
    if ($i < 10) {
        recursion();
    }
}

recursion(); 
```

# java - 使用 xPath 修改 XML 文件

> ID：12459712
> 
> 赞同：6
> 
> 时间：2012-09-17T12:58:34.637
> 
> 标签：java, xml, file, xslt, xpath

我想使用 xPath 修改现有的 XML 文件。如果节点不存在，则应创建它（如果需要，还应创建它的父节点）。一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <param0>true</param0>
  <param1>1.0</param1>
</configuration> 
```

这里有几个我想插入/修改的 xPath：

```
/configuration/param1/text()         -> 4.0
/configuration/param2/text()         -> "asdf"
/configuration/test/param3/text()    -> true 
```

之后的 XML 文件应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <param0>true</param0>
  <param1>4.0</param1>
  <param2>asdf</param2>
  <test>
    <param3>true</param3>
  </test>
</configuration> 
```

我试过这个：

```
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathFactory;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

try {
  DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
  Document doc = domFactory.newDocumentBuilder().parse(file.getAbsolutePath());
  XPath xpath = XPathFactory.newInstance().newXPath();

  String xPathStr = "/configuration/param1/text()";
  Node node = ((NodeList) xpath.compile(xPathStr).evaluate(doc, XPathConstants.NODESET)).item(0);
  System.out.printf("node value: %s\n", node.getNodeValue());
  node.setNodeValue("4.0");

  TransformerFactory transformerFactory = TransformerFactory.newInstance();
  Transformer transformer = transformerFactory.newTransformer();
  transformer.transform(new DOMSource(doc), new StreamResult(file));
} catch (Exception e) {
  e.printStackTrace();
} 
```

运行此代码后，文件中的节点发生了变化。正是我想要的。但是，如果我使用以下路径之一，`node`则为 null （因此`NullPointerException`抛出 a ）：

```
/configuration/param2/text()
/configuration/test/param3/text() 
```

如何更改此代码以便创建节点（以及不存在的父节点）？

**编辑**：好的，澄清一下：我有一组要保存到 XML 的参数。在开发过程中，这个集合可以改变（一些参数被添加，一些被移动，一些被删除）。所以我基本上想要一个函数来将当前的参数集写入一个已经存在的文件。它应该覆盖文件中已经存在的参数，添加新参数并将旧参数保留在其中。

阅读也一样，我可以只使用 xPath 或其他一些坐标并从 XML 中获取值。如果不存在，则返回空字符串。

我对如何实现它没有任何限制，xPath、DOM、SAX、XSLT...一旦编写了功能（如 BeniBela 的解决方案），它应该很容易使用。

因此，如果我要设置以下参数：

```
/configuration/param1/text()         -> 4.0
/configuration/param2/text()         -> "asdf"
/configuration/test/param3/text()    -> true 
```

结果应该是起始 XML + 那些参数。如果它们已经存在于该 xPath 中，则它们将被替换，否则它们将在该点插入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:15:50.267

**这是一个简单的 XSLT 解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="param1/text()">4.0</xsl:template>

 <xsl:template match="/*">
  <xsl:copy>
   <xsl:apply-templates select="@*|node()"/>
     <param2>asdf</param2>
     <test><param3>true</param3></test>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<configuration>
    <param0>true</param0>
    <param1>1.0</param1>
</configuration> 
```

**产生了想要的正确结果：**

```
<configuration>
   <param0>true</param0>
   <param1>4.0</param1>
   <param2>asdf</param2>
   <test><param3>true</param3></test>
</configuration> 
```

**请注意**：

XSLT 转换永远不会“就地更新”。它总是创建一个新的结果树。因此，如果要修改同一个文件，通常将转换结果保存在另一个名称下，然后删除原始文件并将结果重命名为原始名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T16:10:31.533

如果您想要一个没有依赖关系的解决方案，您可以只使用 DOM 而无需 XPath/XSLT。

Node.getChildNodes|getNodeName / NodeList.* 可用于查找节点，Document.createElement|createTextNode, Node.appendChild 可用于创建新节点。

然后，您可以编写自己的简单“XPath”解释器，在路径中创建缺失节点，如下所示：

```
public static void update(Document doc, String path, String def){
  String p[] = path.split("/");
  //search nodes or create them if they do not exist
  Node n = doc;
  for (int i=0;i < p.length;i++){
    NodeList kids = n.getChildNodes();
    Node nfound = null;
    for (int j=0;j<kids.getLength();j++) 
      if (kids.item(j).getNodeName().equals(p[i])) {
    nfound = kids.item(j);
    break;
      }
    if (nfound == null) { 
      nfound = doc.createElement(p[i]);
      n.appendChild(nfound);
      n.appendChild(doc.createTextNode("\n")); //add whitespace, so the result looks nicer. Not really needed
    }
    n = nfound;
  }
  NodeList kids = n.getChildNodes();
  for (int i=0;i<kids.getLength();i++)
    if (kids.item(i).getNodeType() == Node.TEXT_NODE) {
      //text node exists
      kids.item(i).setNodeValue(def); //override
      return;
    }

  n.appendChild(doc.createTextNode(def));    
} 
```

然后，如果您只想更新 text() 节点，则可以将其用作：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
Document doc = domFactory.newDocumentBuilder().parse(file.getAbsolutePath());

update(doc, "configuration/param1", "4.0");
update(doc, "configuration/param2", "asdf");
update(doc, "configuration/test/param3", "true"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-28T05:37:35.330

我创建了一个使用 XPATH 创建/更新 XML 的小项目：[https](https://github.com/shenghai/xmodifier) ://github.com/shenghai/xmodifier 更改 xml 的代码如下：

```
DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
builderFactory.setNamespaceAware(true);
DocumentBuilder documentBuilder = builderFactory.newDocumentBuilder();
Document document = documentBuilder.parse(xmlfile);

XModifier modifier = new XModifier(document);
modifier.addModify("/configuration/param1", "asdf");
modifier.addModify("/configuration/param2", "asdf");
modifier.addModify("/configuration/test/param3", "true");
modifier.modify(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-27T00:28:42.630

[我会通过使用VTD-XML](http://vtd-xml.sf.net)为您指出一种新的/新颖的方式来做您所描述的事情......有很多原因表明 VTD-XML 比为这个问题提供的所有其他解决方案要好得多......这里有一些链接...

*   [使用 vtd-xml 简化 XML 处理](http://www.javaworld.com/article/2071745/soa/simplify-xml-processing-with-vtd-xml.html)
*   [以 Ximple 方式操作 XML](http://www.devx.com/xml/Article/36379)
*   [使用 Java 处理 XML – 性能基准](https://www.researchgate.net/profile/Vasco_Santos/publication/260247328_Processing_XML_with_Java_-_A_Performance_Benchmark/links/00b495304e2aba5dcc000000/Processing-XML-with-Java-A-Performance-Benchmark.pdf)

dfs

```
 import com.ximpleware.*;
    import java.io.*;
    public class modifyXML {
            public static void main(String[] s) throws VTDException, IOException{
                VTDGen vg = new VTDGen();
                if (!vg.parseFile("input.xml", false))
                    return;
                VTDNav vn = vg.getNav();
                AutoPilot ap = new AutoPilot(vn);
                ap.selectXPath("/configuration/param1/text()");
                XMLModifier xm = new XMLModifier(vn);
                // using XPath
                int i=ap.evalXPath();
                if(i!=-1){
                    xm.updateToken(i, "4.0");
                }
                String s1 ="<param2>asdf</param2>/n<test>/n<param3>true</param3>/n</test>";
                xm.insertAfterElement(s1);
                xm.output("output.xml");
            }
        } 
```

# android - Proguard混淆时生成重复的R.java文件

> ID：12459713
> 
> 赞同：0
> 
> 时间：2012-09-17T12:58:38.170
> 
> 标签：android, obfuscation, proguard

当我运行我的 config.xml 文件的 ant 构建时，我收到编译器错误消息：

编译失败；有关详细信息，请参阅编译器错误输出。

E:\workspace\USSDHandlingDemo\src\com\et\ussdhandling\R.java:10：

重复类：com.et.ussdhandling.R

公共最终类 R

2 个错误

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T13:59:32.773

知道了..！

我必须先从资源管理器（在 Eclipse 之外）中删除 R.java 文件，然后再进行 ant 构建。

这可能会帮助某人。

# android - 标签导航问题

> ID：12459718
> 
> 赞同：0
> 
> 时间：2012-09-17T12:59:04.620
> 
> 标签：android, android-layout, android-widget, android-tabhost, android-view

我正在使用 TabHost 的活动类中使用选项卡。

```
TabHost tabHost=(TabHost)findViewById(R.id.tabHost);
tabHost.setup();
Test testObj = new Test(this);
spec2=tabHost.newTabSpec("Tab 2");
spec2.setIndicator("Tab 2");
spec2.setContent(testObj); 
```

并且每个视图都分配给一个实现 TabFactory 的视图。

```
public class Test implements TabContentFactory {
@Override
public View createTabContent(String arg0) {

    v = mInflater.inflate(R.layout.activity_tab1, null);

    /**
     * Add your code here for buttons/list etc
     * An object lookup for your Button: 
     */
    b = (Button)v.findViewById(R.id.button1);

    b.setOnClickListener(this);
    return v;
}
public void setListViewNames() {
   //create a custom list view
}
public void setDetailedView() {
   //opens another detailed view when user clicks on any item on the list
   //here i use ViewGroup to remove the first view created in setListViewNames()
}
} 
```

单击按钮时，将创建一个 listView。单击任何项​​目将转到另一个列表视图。第一个 listView 被删除为：

```
ViewGroup viewGroup = (ViewGroup) v.getParent();
viewGroup.removeView(v);
View v1 = mInflater.inflate(R.layout.custom_fullpicture, null);
viewGroup.addView(v1); 
```

但是当我转到选项卡一然后单击选项卡二时，会引发以下错误。

```
E/AndroidRuntime(1668): at android.widget.TabHost$FactoryContentStrategy.tabClosed        
(TabHost.java:658) 
```

如何有效地在选项卡中导航？每次单击时，我都找不到重新加载选项卡视图的方法。

有什么想法吗？

提前致谢！

# android - 为什么我收到错误“通道已不可恢复地损坏，将被处理！”

> ID：12459719
> 
> 赞同：132
> 
> 时间：2012-09-17T12:59:06.417
> 
> 标签：android, andengine

当我尝试启动**AndEngine Activity**时，出现此错误：

```
ERROR/InputDispatcher(21374): channel '4122e148 my.package.AcGame (server)' ~ Channel is unrecoverably broken and will be disposed! 
```

该应用程序不会崩溃，但会出现黑屏，并且设备对按下“返回”或“主页”按钮没有反应。

有谁知道问题是什么？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-18T06:56:28.790

我看到该错误的最常见原因之一是当我尝试在不在前台的活动中显示警报对话框或进度对话框时。就像显示对话框的后台线程在暂停的活动中运行时一样。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-06T11:18:01.780

我认为您在某处有内存泄漏。[您可以在此处](http://android-developers.blogspot.ru/2009/01/avoiding-memory-leaks.html)找到避免内存泄漏的提示。[你也可以在这里](http://android-developers.blogspot.ru/2011/03/memory-analysis-for-android.html)了解追踪它的工具。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-14T04:38:58.393

您是否使用过另一个 UI 线程？你不应该使用超过 1 个 UI 线程并让它看起来像一个三明治。这样做会导致内存泄漏。

两天前我已经解决了类似的问题...

简而言之：主线程可以有许多 UI 线程来执行多项工作，但如果其中有一个包含 UI 线程的子线程，则 UI 线程可能还没有完成它的工作，而它的父线程已经完成了它的工作。工作，这会导致内存泄漏。

**例如...对于 Fragment & UI 应用程序...这将导致内存泄漏。**

```
getActivity().runOnUiThread(new Runnable(){

   public void run() {//No.1

  ShowDataScreen();

getActivity().runOnUiThread(new Runnable(){

    public void run() {//No.2

Toast.makeText(getActivity(), "This is error way",Toast.LENGTH_SHORT).show();

    }});// end of No.2 UI new thread

}});// end of No.1 UI new thread 
```

**我的解决方案重新排列如下：**

```
getActivity().runOnUiThread(new Runnable(){

   public void run() {//No.1

ShowDataScreen();

}});// end of No.1 UI new thread        

getActivity().runOnUiThread(new Runnable(){

   public void run() {//No.2

Toast.makeText(getActivity(), "This is correct way",Toast.LENGTH_SHORT).show();

}});// end of No.2 UI new thread 
```

供你参考。

我是台湾人，很高兴再次在这里回答。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-31T02:34:38.267

在我重命名某些`strings.xml`内容并忘记修改其他文件（首选项 xml 资源文件和 java 代码）后，我遇到了类似的错误（我的应用程序崩溃）。

IDE (android studio) 没有显示任何错误。但是，在我修复了我的 xml 文件和 java 代码之后，应用程序运行正常。因此，您的 xml 文件或常量中可能存在一些小错误。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-03-13T07:43:23.253

[您可以在此处](https://android.googlesource.com/platform/frameworks/base/+/android-4.2.1_r1/services/input/InputDispatcher.cpp)查看有关此输出的源代码：

```
void InputDispatcher::onDispatchCycleBrokenLocked(
        nsecs_t currentTime, const sp<Connection>& connection) {
    ALOGE("channel '%s' ~ Channel is unrecoverably broken and will be disposed!",
            connection->getInputChannelName());
    CommandEntry* commandEntry = postCommandLocked(
            & InputDispatcher::doNotifyInputChannelBrokenLockedInterruptible);
    commandEntry->connection = connection;
} 
```

这是由于循环断开锁定...

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-03T04:26:31.297

我有同样的问题。解决错误：在模拟器上关闭它，然后使用 Android Studio 运行它。

当应用程序已经在模拟器上运行时，当您尝试重新运行应用程序时会发生错误。

基本上，错误说 - *“我不再拥有现有频道并处理已建立的连接”*，因为您再次从 Android Studio 运行该应用程序。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-27T11:53:05.273

我有同样的问题，但我的问题是由于 Android 数据库内存泄漏。我跳过了一个光标。因此设备崩溃以修复该内存泄漏。如果您正在使用 Android 数据库，请检查您在从数据库中检索时是否跳过了游标

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-22T09:14:58.683

我有同样的问题。我的是由于第三个 jar，但 logcat 没有捕获异常，我通过更新第三个 jar 解决了，希望这些会有所帮助。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-02-04T12:17:10.920

当我遇到这个错误时，在你的代码中的某个地方，你使用的函数或库在不同的线程上运行，所以尝试在同一个线程上调用所有代码，它解决了我的问题。

> 如果您从应用程序的 UI 线程以外的任何线程调用 WebView 上的方法，则可能会导致意外结果。例如，如果您的应用程序使用多个线程，您可以使用 runOnUiThread() 方法来确保您的代码在 UI 线程上执行：

[谷歌参考链接](https://developer.android.com/guide/webapps/migrating)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-10-20T13:40:45.613

很明显，由于许多问题，这令人毛骨悚然。对我来说，我发布了几个 OneTimeWorkRequest，每个都访问一个房间数据库，并插入到一个表中。

使 DAO 函数暂停，并在工作人员的协程范围内调用它们为我解决了这个问题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-15T20:17:11.210

在使用 and-engine 运行游戏时，它也发生在我身上。在我将以下代码添加到 manifest.xml 后，它已修复。此代码应添加到您的 mainactivity。

```
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize|mcc|mnc" 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-19T15:53:59.533

我也有同样的问题。在我的情况下，是在尝试复制编码不佳的视频（需要太多内存）时引起的。 [这](https://stackoverflow.com/a/11986400/2508527)有助于我发现错误并请求同一视频的另一个版本。 [https://stackoverflow.com/a/11986400/2508527](https://stackoverflow.com/a/11986400/2508527)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-05-16T14:53:50.350

只需尝试使缓存的 IDE 无效并重新启动。这不会解决问题。但在我的情况下，这样做揭示了可能的崩溃

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-12-06T16:33:05.847

阅读所有贡献，看起来许多不同的起源都表现出同样的问题症状。

以我为例 - 我一添加就遇到了这个问题

```
android:progressBackgroundTintMode="src_over" 
```

到我的进度条属性。我认为 ADT 的 GUI 设计器以几个错误而闻名。因此，我认为这是其中之一。因此，如果您在使用您的 GUI 设置后遇到类似的问题症状（只是没有意义），只需尝试回滚您所做的并撤消您最后一次 GUI 修改。

只需在屏幕上显示最近修改的文件时按 Ctrl+z。

或者：

版本控制工具可能会有所帮助。打开版本控制面板 - 选择本地更改选项卡并查看最近修改的（可能是 .xml）文件。

右键单击一些最可疑的，然后单击显示差异。然后只需猜测可能是哪条修改后的行。

祝你好运 ：）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2018-01-30T01:32:37.463

就我而言，这两个问题在某些情况下会发生，例如当我尝试在不在前台的活动中显示进度对话框时。因此，我在活动生命周期的**onPause**中关闭了进度对话框。问题就解决了。

**无法在分离视图上启动此动画师！显示效果BUG**

**回答：** [无法在分离视图上启动此动画制作器！显露效果](https://stackoverflow.com/questions/26819429/cannot-start-this-animator-on-a-detached-view-reveal-effect)

**为什么我收到错误'频道已不可恢复地损坏，将被处理！**

**回答：** [为什么我收到错误“通道已不可恢复地损坏，将被处置！”](https://stackoverflow.com/questions/12459719/why-i-am-getting-error-channel-is-unrecoverably-broken-and-will-be-disposed)

```
@Override
protected void onPause() {
    super.onPause();
    dismissProgressDialog();

}

private void dismissProgressDialog() {
    if(progressDialog != null && progressDialog.isShowing())
        progressDialog.dismiss();
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-11-21T15:49:31.253

对我来说，这是由太大的初始屏幕图像（超过 4000x2000）引起的。缩小尺寸后问题就消失了。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-05-30T20:14:27.437

此错误发生在内存泄漏的情况下。例如，如果您有任何 Android 组件（活动/服务/等）的静态上下文并且它被系统杀死。

**示例：**通知区域中的音乐播放器控件。使用前台服务并通过 PendingIntent 在通知通道中设置操作，如下所示。

```
Intent notificationIntent = new Intent(this, MainActivity.class);
        notificationIntent.setAction(AppConstants.ACTION.MAIN_ACTION);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK
                | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0,
                notificationIntent, 0);

        Intent previousIntent = new Intent(this, ForegroundService.class);
        previousIntent.setAction(AppConstants.ACTION.PREV_ACTION);
        PendingIntent ppreviousIntent = PendingIntent.getService(this, 0,
                previousIntent, 0);

        Intent playIntent = new Intent(this, ForegroundService.class);
        playIntent.setAction(AppConstants.ACTION.PLAY_ACTION);
        PendingIntent pplayIntent = PendingIntent.getService(this, 0,
                playIntent, 0);

        Intent nextIntent = new Intent(this, ForegroundService.class);
        nextIntent.setAction(AppConstants.ACTION.NEXT_ACTION);

        Bitmap icon = BitmapFactory.decodeResource(getResources(),
                R.drawable.ic_launcher);

        NotificationManager notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        String NOTIFICATION_CHANNEL_ID = "my_channel_id_01";

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            NotificationChannel notificationChannel = new NotificationChannel(NOTIFICATION_CHANNEL_ID, "My Notifications", NotificationManager.IMPORTANCE_HIGH);

            // Configure the notification channel.
            notificationChannel.setDescription("Channel description");
            notificationChannel.enableLights(true);
            notificationChannel.setLightColor(Color.RED);
            notificationChannel.setLockscreenVisibility(Notification.VISIBILITY_PRIVATE);
            notificationChannel.setVibrationPattern(new long[]{0, 1000, 500, 1000});
            notificationChannel.enableVibration(true);
            notificationManager.createNotificationChannel(notificationChannel);
        }

        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(this, NOTIFICATION_CHANNEL_ID);
        Notification notification = notificationBuilder
                .setOngoing(true)
                .setAutoCancel(true)
                .setWhen(System.currentTimeMillis())
                .setContentTitle("Foreground Service")
                .setContentText("Foreground Service Running")
                .setSmallIcon(R.drawable.ic_launcher)
                .setLargeIcon(Bitmap.createScaledBitmap(icon, 128, 128, false))
                .setContentIntent(pendingIntent)
                .setPriority(NotificationManager.IMPORTANCE_MAX)
                .setCategory(Notification.CATEGORY_SERVICE)
                .setTicker("Hearty365")
                .build();
        startForeground(AppConstants.NOTIFICATION_ID.FOREGROUND_SERVICE,
                notification); 
```

如果这个通知通道突然中断（可能是系统造成的，比如在小米设备中我们清理后台应用程序时），那么由于内存泄漏，系统会抛出这个错误。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-08-05T12:40:34.517

请检查您的 Realm 实体类。

如果您将变量声明为 lateinit`var`并尝试检查未初始化的变量检查并`isNullOrEmpty()`返回“通道已不可恢复地损坏并将被处置！”

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-07-25T09:14:47.980

我遇到了这个问题，原因实际上是 NullPointerException。但它并没有作为一个呈现给我！

我的输出：屏幕卡住了很长时间并且 ANR

我的状态：布局 xml 文件包含在另一个布局中，但在附加布局中引用了包含的视图而没有提供 id。（我有两个相同子视图的类似实现，所以资源 id 是用给定名称创建的）

注意：这是一个自定义对话框布局，所以首先检查对话框可能会有所帮助

结论：在搜索子视图的 id 时发生了一些内存泄漏。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-03-03T15:45:56.903

检查您的 ViewModel 类并没有发现任何问题，然后尝试在您使用启动或 withContext 的位置注释代码。

就我而言，我评论了我正在使用启动或 withContext 的代码，并且我的应用程序运行正常。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-06-08T00:23:34.397

我得到了相同的 logcat 消息，只是意识到数组的 string.xml 值不能是数字/数字，但只允许文本/字母。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-01-04T14:16:17.960

就我而言，我使用的是 Glide 库，传递给它的图像为空。所以它抛出了这个错误。我做了这样的检查：

```
if (imageData != null) {
    // add value in View here 
} 
```

它工作得很好。希望这可以帮助某人。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-29T12:46:56.157

我有一个你描述的问题。就我而言，它只发生在发布版本中。这是由混淆引起的：本机方法在 FindClass 或 GetMethodID 调用上静默崩溃，因为名称被混淆了。编辑 proguard-rules 成功了！

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-08-22T07:57:17.630

在我的情况下，发生此错误是因为未连接到 firebase firestore 但使用相同。

要解决此问题，请转到***工具-> Firebase***

当在 RHS 上打开一个窗口时，选择以下选项 -> 将您的应用连接到 Firebase -> 将 Cloud Firestore 添加到您的应用

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-12-03T12:20:31.270

对我来说，问题是我还没有定义 Activity 的实例。

例如：

> 我的班级我的；
> 
> onCreate() {
> 
> 我的.getData(); }

代替：

> 我的班级我的；
> 
> onCreate() {
> 
> 我的 = 新的 Myclass(); 我的.getData(); }

这很奇怪，因为 Studio 必须给出一些好的定义错误信息。

# php - 如果 URl 不存在，mod_rewrite .htaccess 会导致 500 服务器错误

> ID：12459720
> 
> 赞同：2
> 
> 时间：2012-09-17T12:59:08.840
> 
> 标签：php, .htaccess, mod-rewrite, webserver

我刚刚开始使用 mod_rewrite，这是我用于具有多种语言支持的非常基本的结构化网站：

```
RewriteEngine on
ErrorDocument 404 /error404.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]{2})/([^/]+)$ $2.php?lang=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]{2})/$ index.php?lang=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]{2})$ index.php?lang=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ $1.php [L] 
```

我的想法是语言在 URl 的开头指示并且需要是两个字符（az 或 AZ）。之后会有一个字符串引用一个 php 文件，该文件与该字符串具有相同的文件名，只是附加了 .php。语言将作为 GET-Variable ( `?lang=en`) 添加。

所以，一个 URl 可能看起来像这样：`/en/index`然后应该被重定向到`index.php?lang=en`.

如果 URl 不是以语言开头，而是直接以字符串开头，则不会将 GET 变量附加到字符串。例如`/index`应该参考`index.php`。如果没有字符串，则应使用索引作为默认值。

到现在为止还挺好。工作正常。只要我输入一个字符串（无论我是否使用 2 个字符作为语言），该站点总是显示 500 Internal Server Error，而不是转到`error404.php`. 另外，如果我在.htaccess 中删除这一行（404），它仍然是同样的错误。

所以，我假设 .htaccess 中的其他行有问题导致此错误，有人知道这可能是什么吗？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:45:48.453

你的规则是循环的。乍一看，它看起来像你的最后一个：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ $1.php [L] 
```

假设我有这个 URL，`http://your.domain.com/blah`并且该文件`blah.php`不存在。这就是正在发生的事情。

1.  URI = `blah`, !-f 为真，它不是文件
2.  URI = `blah`, !-d 为真，它不是目录
3.  URI = `blah`，内部重写为`blah.php`
4.  `blah`!= `blah.php`，重写规则循环
5.  URI = `blah.php`!-f 为真，它不是文件
6.  URI = `blah.php`!-d 为真，它不是目录
7.  URI = `blah.php`，内部重写为`blah.php.php`
8.  `blah.php`!= `blah.php.php`，重写规则循环

这一直持续到重写引擎受够并返回 500 服务器错误。

你可以在这里做两件事之一：

1.  添加一个指令以使**所有循环停止无论如何**，这很容易解决这类问题。但它会破坏需要循环的规则。我在您的规则中没有看到类似的内容，因此（至少目前）这样做是安全的。只需将其添加到规则的顶部：

    ```
    RewriteCond %{ENV:REDIRECT_STATUS} 200
    RewriteRule ^ - [L] 
    ```

2.  做一个先发制人的检查，看看 php 文件是否真的存在：

    ```
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME}.php -f
    RewriteRule ^([^/]+)$ $1.php [L] 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:44:19.707

Helmut，试试这个（最后一条规则是 500 内部错误的原因，这也包括@DaveRandom 合并规则 2 和 3 的建议）：

```
RewriteEngine on
ErrorDocument 404 /error404.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]{2})/([^/]+)$ $2.php?lang=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z]{2})/?$ index.php?lang=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9]+)$ $1.php [L] 
```

# variables - gdb 的奇怪变量

> ID：12459721
> 
> 赞同：1
> 
> 时间：2012-09-17T12:59:14.387
> 
> 标签：variables, assembly, gdb

我正在使用 gdb 调试 x86 程序集中的程序。虽然我对某些变量有奇怪的行为，但我不明白为什么。

这就是我定义和查看它们的方式：

```
section .data
CountDied: dd 0000
OnesFound: db 00

section .text
global _start
_start:
nop
... code 
```

当我逐步运行 gdb 时，我会在第一条指令中检查变量是否具有正确的值，然后得到以下信息：

```
print CountDied
$1=0
print OnesFound
$2=167772672 
```

尽管在接下来的说明中，OnesFound 似乎以正确的方式行事。我真的很困惑。感谢您的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:32:17.547

程序集“变量”只是内存中特定点的标签。GDB 不知道它应该有多大，它只是假设它是一个 32 位的值。

你得到的数字的十六进制表示是 0x0A000200。x86 是一个 little endian 平台，因此它实际上会以`00 02 00 0A`. 只有第一个字节实际上是您设置的值的一部分，并且设置正确。

`x/b &OnesFound`您可以使用命令而不是使用 print来查看您想要的特定字节。

# matlab - matlab插值用于计算给定区域内的体积

> ID：12459724
> 
> 赞同：0
> 
> 时间：2012-09-17T12:59:21.540
> 
> 标签：matlab

我在水柱的每个深度都有一些深度测量值和相应的区域：

```
depth = [0,2,4,6,7,9,10];
Area = [2000,1890,1873,1654,1523,1433,1200];

figure(1);
plot(Area,depth);set(gca,'ydir','reverse'); 
```

我想计算指示的每个深度之间的水量，然后从中计算整个水量。首先，我插入了深度和面积值以提高计算的准确性：

```
dz = 0.1;
newD = min(depth):dz:max(depth);
newA = interp1(depth,Area,newD);

figure(2);
plot(newA,newD);set(gca,'ydir','reverse'); 
```

我从哪里开始计算每个深度之间的水量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:16:23.163

要获得体积，您将面积乘以高度。因此，由于您的 dz 是恒定的，要获得所选深度的水量，您需要乘以

```
newA*dz 
```

要获得总成交量，您可以将其相加

```
sum(newA*dz) 
```

您的计算是在假设水域随深度线性变化的情况下完成的（这就是您使用 interp1 实现的）。我相信您可以设法以分析方式集成线性函数，而不是使用您当前的方法。您可以轻松获得准确的数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:52:05.783

您实际上想将面积乘以总深度，而不是深度步长：

```
volume = newA.*newD;
totalVolume = sum(volume); 
```

# c# - 正确处理用户控件及其子控件

> ID：12459725
> 
> 赞同：0
> 
> 时间：2012-09-17T12:59:23.950
> 
> 标签：c#, wpf, dispose, idisposable

我一直在寻找超过 30 分钟，但我根本无法弄清楚问题是什么。我有一个`TabControl`，它的项目将由用户关闭。由于每个`TabItem`都以某种方式连接到自定义控件和多个对象，每个对象都使用大量内存，因此我想处置与 this 一起使用的所有对象`TabItem`。

为了更清楚并在这里为您节省大量代码，简化情况：

```
<UserControl x:Class="myProject.GridFour"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
        <ScrollViewer Height="Auto" Margin="0" Name="scrollViewer11" Width="Auto" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"></ScrollViewer>
        <ScrollViewer Grid.Column="1" Height="Auto" Name="scrollViewer12" Width="Auto"  Margin="0" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"></ScrollViewer>
        <ScrollViewer Grid.Row="1"> Height="Auto" Name="scrollViewer21" Width="Auto" Margin="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"></ScrollViewer>
        <ScrollViewer Height="Auto" Name="scrollViewer22" Width="Auto" Grid.Column="1" Margin="0" Grid.Row="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto"></ScrollViewer>
    </Grid>
</UserControl> 
```

现在我设置对应的tabitem的内容：

```
GridFour myControl = new GridFour();
myTabItem.Content = myControl; 
```

我也有自定义对象，每个对象都包含一个网格，它作为内容添加到我的用户控件的滚动查看器中：

```
class MyClass
{
    internal Grid _grid = new Grid();
    internal Image _image = new Image() {Width = Double.NaN, Height = Double.NaN HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center, Stretch = Stretch.Fill};
    //... a lot of variables, data, images and methods...
}

MyClass[] myObject = new MyClass[4];

for(int i = 0; i < 4; i++)
{
    myObject[i] = new MyClass();
    myObject[i]._grid.Children.Add(_image); //that actually happens when I initialise the object, it is just to show how everything is connected
}

myControl.scrollViewer11.Content = myObject[0]._grid;
myControl.scrollViewer12.Content = myObject[1]._grid;
myControl.scrollViewer21.Content = myObject[2]._grid;
myControl.scrollViewer22.Content = myObject[3]._grid; 
```

现在，当用户想要关闭 tabitem 时，显然我也想摆脱 myControl 和每个对象 myObject。我试图通过 IDisposable 对它们调用 Dispose 方法，但这总是抛出 NullReferenceException ，我根本不知道为什么。

我可能应该提到每个 myObject 都在 a`Dictionary<string, MyClass>`中，但是在调用 dispose 之前我从那里删除了该对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:14:38.127

```
class MyClass : IDisposable
{ 
    internal Grid _grid = new Grid(); 
    internal Image _image = new Image() {Width = Double.NaN, Height = Double.NaN HorizontalAlignment = HorizontalAlignment.Center, VerticalAlignment = VerticalAlignment.Center, Stretch = Stretch.Fill}; 
    //... a lot of variables, data, images and methods... 

    public void Dispose()
    {
        // your custom disposing 
        _image = null; //or something like that
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:06:46.850

因此，您要删除 UI 元素，然后尝试更新模型，而不是：

为什么不将 UI 绑定到`ObservableCollection`对象列表。然后要删除，您只需要从模型中的列表中删除（如果您愿意，可以处理），但让 UI 完成它的工作，只需将更改反映到列表中。这就是 WPF 工作得最好的方式。

阅读`TabControl.ItemsSource`喜欢[这里。](https://stackoverflow.com/questions/589802/how-can-i-bind-a-list-collection-to-tabcontrol-headers-in-wpf)

# linux - 如何避免不适合缓冲区的标准输入被发送到 Linux 64 位 Intel (x86-64) 程序集中的 shell

> ID：12459729
> 
> 赞同：4
> 
> 时间：2012-09-17T12:59:48.963
> 
> 标签：linux, assembly, x86-64, nasm, yasm

**编辑：**标题已更改，正如@Gunner 指出的那样，这不是缓冲区溢出。

在从 Linux 64 位 Intel 程序集中读取用户输入时`stdin`，`NR_read`我想知道如何避免将不适合输入缓冲区的输入发送到 Linux shell，例如。重击？例如，在这个示例程序中，我定义了一个 255 字节的输入缓冲区（缓冲区的大小可以是 >= 1）。超过 255 字节的输入的其余部分被发送到 bash（如果从 bash 运行），这显然是一个严重的漏洞。应该如何在 Linux 64 位汇编中读取输入以避免此漏洞？

这是我的代码：

```
[bits 64]

section .text
global _start

; can be compiled eg. with nasm or yasm.
; nasm:
; nasm -f elf64 read_stdin_64.asm; ld read_stdin_64.o -o read_stdin_64
; yasm:
; yasm -f elf64 -m amd64 read_stdin_64.asm -o read_stdin_64.o; ld read_stdin_64.o -o read_stdin_64

NR_read     equ 0
NR_exit     equ 60

STDIN       equ 1

; input:
; rax   number of syscall
; rdi   parameter 1
; rsi   parameter 2
; rdx   parameter 3
; r10   parameter 4
; r8    parameter 5
; r9    parameter 6
;
; output:
; rax   syscall's output
@do_syscall:
    push    rcx
    push    r11
    syscall      ; 64-bit syscall, overwrites rcx and r11
    pop     r11  ; syscall's return value in rax
    pop     rcx
    ret

@read_stdin:
    push    rdi
    push    rsi
    push    rdx
    mov     rdi,STDIN                ; file handle to read. STDIN = 1.
    lea     rsi,[input_buffer]
    mov     rdx,input_buffer_length  ; length of string
    mov     rax,NR_read              ; number of syscall (0)
    call    @do_syscall
    sub     rax,1                    ; get the number of writable characters.
    pop     rdx
    pop     rsi
    pop     rdi
    ret

_start:     ; linker entry point
    call    @read_stdin

@end_program:
    xor     rdi,rdi
    mov     rax,NR_exit  ; number of syscall (60)
    syscall

section .data

input_buffer         times 255 db 0
input_buffer_length  equ $-input_buffer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:19:35.833

read 系统调用已经内置了这种保护。不过还有一件事：你不应该明确地使用`syscall`. 如果您的代码被带到 x86-64 机器（使用`sysenter`）怎么办？您应该使用 Linux 的 VDSO（虚拟动态共享对象），它包含在所有架构上执行系统调用的代码，无论它们是否支持`syscall`、`sysenter`或仅`int`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T21:38:01.157

这不是其他人所说的缓冲区溢出。我写了一篇关于在 Linux 中从终端读取的教程，其中还展示了如何处理这个问题。它使用 32 位 Int 0x80，但您可以轻松更改它以满足您的需要。

[http://www.dreamincode.net/forums/topic/286248-nasm-linux-terminal-inputoutput-wint-80h/](http://www.dreamincode.net/forums/topic/286248-nasm-linux-terminal-inputoutput-wint-80h/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:13:44.883

您可以读取输入，直到找到换行符。

# jquery - 突出显示字符串中的单词

> ID：12459734
> 
> 赞同：0
> 
> 时间：2012-09-17T13:00:10.907
> 
> 标签：jquery, css, string, highlight

我得到了某个字符串，我想突出显示在文本输入中键入的子字符串。

这是一个小提琴：http: [//jsfiddle.net/rFGWZ/17/](http://jsfiddle.net/rFGWZ/17/)

只有当我输入初始字符串时，它才能正常工作，但当我输入 fe 时。`15`在输入中，它没有突出显示，`15`而是`21`......它总是突出显示开头的数字，所以有人可以帮我修改它，所以它会突出显示我在文本输入中键入的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:03:17.927

你可以使用这个：

```
firstCell.html(id.replace(value, '<span class=highlight>'+value+'</span>')); 
```

代替

```
firstCell.html($("<span />").addClass("highlight").text(id.slice(0, value.length)));
firstCell.append(id.slice(value.length, id.length)); 
```

演示：http: [//jsfiddle.net/qgBt8/](http://jsfiddle.net/qgBt8/)

编辑：[不区分大小写的版本](http://jsfiddle.net/SVgL4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:17:07.937

我会使用正则表达式来解决这个问题。这也考虑了字符的大小写。

[jsFiddle](http://jsfiddle.net/rFGWZ/20/)

```
$("#search").on("keyup", function() {
    var value = $(this).val();

    $("table tr").each(function(index) {
        if (index !== 0) {

            $row = $(this);
            var firstCell = $row.children("td:first");

            var id = $row.children("td:first").text();
            if (id.indexOf(value) === -1) {
                $row.children("td:first").text(id);
                $row.hide();
            }
            else {
                var re = new RegExp(value, "g"); //global replace
                firstCell.html(id.replace(re, "<span class=\"highlight\">" + value + "</span>"));//replace all instances of the characters
                $row.show();
            }
        }
    });
});​ 
```

# gwt - 具有值系列的 GFlot 条形图中的大间隙

> ID：12459748
> 
> 赞同：0
> 
> 时间：2012-09-17T13:00:48.240
> 
> 标签：gwt, flot

我将 GFLot 2.4.3 与 GWT 2.4 一起使用，并且在一系列值方面存在问题，而不是时间序列。x 轴显示几个 ID，y 轴将相应的值显示为条形。

问题是这些 ID 在编号方面有很大的差距，例如 1、9、47 或 128 以及高达 4000 以上。在条形图中绘制如下图所示：

![有间隙的条形图](../Images/168bd75bcbfa4168ac02daa664556248.png)

我可以以某种方式停用这些点插值并使所有条形图彼此对齐而没有间隙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T19:41:46.223

我能找到的唯一解决方案是使用 TickFormatter。使用恒定间隙作为 x 轴（1、2、3、4、5 等）将您的点添加到模型中，并将 TickFormatter 添加到 x 轴选项：

```
plotOptions.addXAxisOptions( new AxisOptions().setTickFormatter( new TickFormatter() {
  @Override
  public String formatTickValue( double tickValue, Axis axis )
  {
    // return the label you want ("1", "9", "47", "128", "4000", etc.) for the tickValue (1, 2, 3, 4, 5, etc.)
  }
} ) ); 
```

# asp.net-mvc-3 - 证书身份验证失败时的替代身份验证（IIS、C#、ASP.NET MVC3）

> ID：12459753
> 
> 赞同：0
> 
> 时间：2012-09-17T13:00:59.893
> 
> 标签：asp.net-mvc-3, c#-4.0, authentication, iis-7.5

我们的项目（网络应用程序`C# ASP.NET MVC3`）托管在上面`IIS 7.5`，我们使用证书身份验证。所以我们配置了 SSL-require `IIS`。

现在我们有一个业务任务允许一些用户使用我们的系统。并且没有办法为他们提供客户端证书。在这种情况下，我们需要使用一些额外的身份验证模型（基于用户密码或 ntdomain）。

我不知道如何实现这样的模型：

1.  用户访问我们的项目 url；
2.  如果他有有效的客户证书——我们让他迭代我们的应用程序；
3.  如果他没有证书，我们会向他展示一个带有“用户密码”的登录表单；

如果我们使用需要 SSL 的配置`IIS`用户将无法在没有有效证书的情况下与应用程序进行迭代，对吗？如果`IIS`配置了 SSL-Accept，如何使用证书进行身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:10:04.353

也许您可以在 IIS 上配置两个站点？一个有 SSL，另一个没有？您的 url 将指向启用 SSL 的站点，当没有有效证书的用户到达时，您使用一些备用代码将他发送到 SSL 免费站点？

实际上只是猜测......我认为这可能值得一个更深思熟虑的答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:20:55.723

问题并没有我之前想的那么大。即使组合框（在 Web 应用程序的 SSL 选项中）设置为接受而不是要求，IIS 也提供了一个要求证书的复选框。在这种情况下，IIS 首先尝试获取证书。如果没有证书，它可以让用户与应用程序进行迭代。我们可以在该级别上进行自定义身份验证。

使用 MVC (v.3+)，在这种情况下使用 IAuthorizationFilter 有很好的方法

# java - 关于 Eclipse 的几个愚蠢问题

> ID：12459754
> 
> 赞同：1
> 
> 时间：2012-09-17T13:01:03.510
> 
> 标签：java, eclipse, netbeans-7

有人使用 Eclipse IDE 进行 Java EE 开发吗？如果有人这样做，你能回答我这个问题吗？

1.  如何创建“beans.xml”、“sun-web.xml”等文件。一些 XML 是在项目创建过程中创建的，但没有用于创建其他的特殊模板。我认为，我应该创建“XML文件”并手动编写适当的名称和内容。我对吗？我认为 NetBeans 有更多的模板。
2.  使用 NetBeans 后，我很难理解“Java Build Path”属性中库配置的原理。如果我使用 GlassFish 或 JBoss - 我应该使用“Mojarra”还是“MyFaces”JSF 实现作为用户库？我认为，在 GlassFish 的情况下 - 我不是，因为应用程序服务器已经有这个库。
3.  你推荐我读什么书来为我的愚蠢问题找到答案？我尝试阅读 eclipse.org 中的帮助中心，但大多数都准备好使用没有答案的示例。

PS 我使用的是 Eclipse 的 Juno 版本，似乎它与 GF 3.1.2 和 JBoss AS 7.1 一起使用比 NetBeans 7.2 更好。这就是为什么我对用于 EE 开发的 Eclipse IDE 感兴趣。

感谢您帮助我并浪费您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:27:16.820

1.  这是 glassfish 特有的，所以eclipse默认不会生成它们。[如果您安装Eclipse Glassfish 插件](http://glassfishplugins.java.net/)，这些可能会生成

2.  即使应用程序服务器有这些库，您也应该将它们添加到构建路径中，以便 eclipse 在编译时知道要使用什么。如果您正在使用 glassfish，请在构建路径选项的库选项卡中，单击添加库 -> 服务器运行时 -> Glassfish（您必须先安装 glassfish 插件）

3.  我相信您可以在互联网上找到大多数这些答案，我已经使用 eclipse 开发了 +5 年，并且从未检查过一本书。

# terminal - ZSH iterm2 增加行数历史

> ID：12459755
> 
> 赞同：122
> 
> 时间：2012-09-17T13:01:09.097
> 
> 标签：terminal, zsh, iterm, iterm2

不确定这是 zsh、iterm2 还是它们之间的交互。尝试更改终端中可调用的行数 - 而不是命令历史记录，输出历史记录。

在 .zshrc 我有：

```
HISTFILE=~/.histfile
HISTSIZE=100000
SAVEHIST=100000 
```

这似乎被忽略了=（

不确定谷歌的正确术语，“终端输出历史？”

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2015-02-19T14:07:45.107

[在iTerm2 文档](https://www.iterm2.com/documentation.html)中如何更改它并不是很明显。

*   打开 iTerm2 首选项`⌘</kbd> + `,``
*   选择`Profiles`标签
*   然后选择`Terminal`子选项卡
*   **请注意，对`Scrollback lines`值的更改会立即生效，因此请立即检查`Unlimited scrollback`您是否不想删除当前缓冲区**
*   将值更改为`Scrollback Lines`您想要的任何值
*   `Unlimited scrollback`如果您想使用您的`Scrollback lines`值，请取消选中该选项

[![在此处输入图像描述](../Images/ffb3865ef66464ba4d5fdafb2c570257.png)](https://i.stack.imgur.com/TtFkQ.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T15:16:34.287

这不是外壳问题，而是与您的终端仿真器有关。
您必须在配置/选项/工具/任何东西中找到选项，以便记住行数。

显然你知道你的终端模拟器是 iterm2。

在google上找iterm2会带你到官网，然后到'Documentation'，Ctrl+F'number'找到

***回滚行 保持在屏幕可见部分上方的回滚缓冲区的行数****。***** 

 **** * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-10-31T21:48:11.507

使用 zsh 和 iTerm2 Build 3.2.5，需要一个额外的步骤：Preferences->Profiles->terminal->check `UnlimitedScrollback`->Check`save lines to scrollback when an app status bar is present`

如果没有最后一个，滚动对我来说很糟糕。***

# java - 与数组索引相关的错误

> ID：12459756
> 
> 赞同：1
> 
> 时间：2012-09-17T13:01:13.927
> 
> 标签：java, split

下面的代码有变量“名称”。这可能包含名字和姓氏或仅包含名字。此代码检查变量“名称”中是否有空格。如果空间存在，那么它会分裂。

但是，在以下情况下，我收到“错误：线程“main”java.lang.ArrayIndexOutOfBoundsException：1 at Space.main(Space.java:9) 中的异常”

*   如果“Richard”之前有一个空格
*   如果“Richard”后面有一个空格，没有第二个单词或第二个字符串。
*   如果我在“Richard”之后有两个空格，那么它不会将名称保存在 lname 变量中。

如何解决此错误。

```
public class Space {
    public static void main(String[] args) {
    String name = "Richard  rinse ";
    if(name.indexOf(' ') >= 0) {
        String[] temp;
        temp = name.split(" ");
        String fname = temp[0];
        String lname = temp[1];
        System.out.println(fname);
        System.out.println(lname);
    } else {
        System.out.println("Space does not exists");}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:05:04.807

你必须像这样使用“\s”分割一个字符串

```
name.split("\\s+"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:07:52.047

如果有两个空格 temp[1] 将是空的，给定“Richard flush”，数组以这种方式拆分

1 理查德

2

3 冲洗

你应该`trim()`字符串并做类似的事情

```
while(name.contains("  "))
    name=name.replace("  "," "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:16:37.973

```
String[] parts = name.trim().split("\\s+");

if (parts.length == 2) {
    // print names out
} else {
    // either less than 2 names or more than 2 names
} 
```

`trim`删除前导和尾随空格，因为这会导致数组中的前导或尾随空字符串

要拆分的标记是正则表达式，表示由一个或多个空白字符（空格、制表符等）组成的任何一系列字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:14:10.217

也许这样：

```
public class Space {
    public static void main(String[] args) {
        String name = "Richard  rinse ";
        String tname = name.trim().replace("/(\\s\\s+)/g", " ");
        String[] temp;
        temp = name.split(" ");
        String fname = (temp.length > 0) ? temp[0] : null;
        String lname = (temp.length > 1) ? temp[1] : null;
        if (fname != null) System.out.println(fname);
        if (lname != null) System.out.println(lname);
    } else {
        System.out.println("Space does not exists");
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T13:13:52.820

要修剪空白，请使用它。

```
public String trimSpaces(String s){
    String str = "";
    boolean spacesOmitted = false;
    for (int i=0; i<s.length; i++){
        char ch = s.chatAt(i);
        if (ch!=' '){
            spacesOmitted = true;
        }
        if (spacesOmitted){
            str+=ch;
        }
    }
    return str;
} 
```

然后使用修剪后的字符串代替名称。

# c# - ProjectGuid 的 C# 项目类型描述

> ID：12459758
> 
> 赞同：1
> 
> 时间：2012-09-17T13:01:25.593
> 
> 标签：c#

我在文件中找到了`ProjectGuid`我的 Visual Studio 项目`.csproj`。我可以使用这个值来确定项目的类型吗？

即我可以使用`ProjectGuid`这样的`FAE04EC0-301F-11D3-BF4B-00C04F79EFBC`来确定类型`Windows C# Application`吗？或任何其他项目类型，如`Database`项目等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:08:55.290

您可以在[http://www.mztools.com/articles/2008/mz2008017.aspx](http://www.mztools.com/articles/2008/mz2008017.aspx)查看项目类型列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-01T04:36:08.347

有些在这里。

复制自[Julien Hoarau 关于 Visual Studio 项目文件中 ProjectTypeGuids 标记的意义​​是什么的答案](https://stackoverflow.com/a/2911651/5858238)

```
Windows (C#)           {FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}
Windows (VB.NET)       {F184B08F-C81C-45F6-A57F-5ABD9991F28F}
Windows (Visual C++)   {8BC9CEB8-8B4A-11D0-8D11-00A0C91BC942}
Web Application        {349C5851-65DF-11DA-9384-00065B846F21}
Web Site               {E24C65DC-7377-472B-9ABA-BC803B73C61A}
WCF                    {3D9AD99F-2412-4246-B90B-4EAA41C64699}
WPF                    {60DC8134-EBA5-43B8-BCC9-BB4BC16C2548}
XNA (Windows)          {6D335F3A-9D43-41b4-9D22-F6F17C4BE596}
XNA (XBox)             {2DF5C3F4-5A5F-47a9-8E94-23B4456F55E2}
XNA (Zune)             {D399B71A-8929-442a-A9AC-8BEC78BB2433}
Silverlight            {A1591282-1198-4647-A2B1-27E5FF5F6F3B}
ASP.NET MVC            {F85E285D-A4E0-4152-9332-AB1D724D3325}
ASP.NET MVC 4          {E3E379DF-F4C6-4180-9B81-6769533ABE47}
Test                   {3AC096D0-A1C2-E12C-1390-A8335801FDAB}
Solution Folder        {2150E333-8FDC-42A3-9474-1A3956D46DE8} 
```

# actionscript-3 - IEEE 双精度格式数字的二进制表示

> ID：12459764
> 
> 赞同：0
> 
> 时间：2012-09-17T13:01:43.533
> 
> 标签：actionscript-3, binary, numbers

我需要 Number 实例的二进制表示。首先，我尝试`toString()`了带参数的 Number 类的方法`2`。结果是 14 位。（对于数字 9878.658456）然后，我尝试将 Number 实例添加到 ByteArray，如下所示：

```
 var b:ByteArray = new ByteArray();
    var n :Number = 9878.658456;
    trace(uint(n).toString(2));
    b.writeDouble(n); 
```

然后我尝试读取 8 个字节：

```
 trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2));
    trace((b.readByte() ).toString(2)); 
```

结果真的很有趣，有一些我不知道该怎么处理的二进制值。我想我还没有理解 toString 方法，API 解释对我来说还不够。对检索 Number 实例的 IEEE 表示有任何帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:25:10.433

最好的解决方案是您自己的解决方案。我想出了这个：

```
 var b:ByteArray = new ByteArray();
    var n :Number = 9878.658456;
    b.writeDouble(n);
    b.position=0;
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2));
    trace((b.readByte() & 0xFF).toString(2)); 
```

你可以从[这里](http://babbage.cs.qc.cuny.edu/IEEE-754.old/Decimal.html)检查结果，它工作正常。

# android - Android：为什么 webview 不开始加载 url，除非它对用户可见？

> ID：12459768
> 
> 赞同：2
> 
> 时间：2012-09-17T13:01:49.070
> 
> 标签：android, webview

我的 webview（最初不可见）获取要加载的 url：

```
@Override
public void onCreate(Bundle savedInstanceState){
    ...
    webView.loadUrl("some url");
    ...
} 
```

然后，在 onClickListener 中，我将其可见性更改为可见，并且看不到任何加载。如果我将可见性设置为可见然后加载 url，它可以正常工作，但用户应该在加载 url 时等待一段时间。我想预加载所有内容并显示已经加载的网页。怎么做？Webview 加载一些东西，如果它是可见的......

PS顺便说一句，我尝试使webview可见并将translationY设置为足够大以使视图位于屏幕下方-仍然，除非我调用setTranslationY（0），否则它不会加载任何内容；... 该怎么办？

PPS 我尝试调用 webView.loadData - 效果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:15:46.440

试试这个：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screen_web);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://www.google.co.uk");
    mWebView.setWebViewClient(new HelloWebViewClient());
}

public void testing (View view){
    mWebView.setVisibility(View.VISIBLE);
} 
```

screen_web.xml 中的按钮：

```
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="testing"
    android:text="Button" /> 
```

screen_web.xml 中的 WebView：

```
 <WebView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="0.32"
    android:visibility="invisible" /> 
```

这对我来说很有用。

# iphone - NSString+EncodeURIComponent

> ID：12459774
> 
> 赞同：0
> 
> 时间：2012-09-17T13:01:58.380
> 
> 标签：iphone, objective-c, xcode4.3

Below code is NON ARC code, can some one tell me how can i convert it to ARC one, it has a memory leak when i am using it, to encode url.

```
#import "NSString+EncodeURIComponent.h"

@implementation NSString (EncodeURIComponent)

+ (NSString*)stringEncodeURIComponent:(NSString *)string {
    return [((NSString*)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                (CFStringRef)string,
                                                                NULL,
                                                                (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                                                                kCFStringEncodingUTF8)) autorelease];
}

@end 
```

Thanks in advance..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:29:35.673

```
return CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                            (__bridge CFStringRef)string,
                                            NULL,
                                            CFSTR("!*'();:@&=+$,/?%#[]"),
                                            kCFStringEncodingUTF8)); 
```

This does the followng:

*   Remove the `autorelease`
*   Pass the Core Foundation object to ARC using `CFBridgingRelease()`. This balances the `Create`. In principle (though not implementation), Core Foundation performs a `CFRelease()` and ARC performs an `objc_retain()`.
*   Add a `_bridge` case to your use of `string`. This tells the compiler that you are not transferring ownership between ARC and Core Foundation. You just want Core Foundation to use an ARC variable.
*   Use `CFSTR()` to create a constant Core Foundation string. This is more convenient than creating a constant `NSString` and then bridge casting it to Core Foundation.

See "Managing Toll-Free Bridging" in the [Transitioning to ARC Release Notes](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html).

# php - 将 cURL 命令行翻译成 PHP cURL

> ID：12459778
> 
> 赞同：5
> 
> 时间：2012-09-17T13:02:11.230
> 
> 标签：php, curl

我需要将此 cURL 命令翻译成 PHP cURL 代码：

> ```
> > curl --get 'https://api.twitter.com/1/followers/ids.json' --data
> > 'cursor=-1&screen_name=somename' --header 'Authorization: OAuth
> > oauth_consumer_key="key", oauth_nonce="nonce",
> > oauth_signature="signature", oauth_signature_method="HMAC-SHA1",
> > oauth_timestamp="timestamp", oauth_token="token", oauth_version="1.0"'
> > --verbose 
> ```

我已经尝试过了，但它似乎不起作用：

```
> $ch = curl_init();
> curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: OAuth oauth_consumer_key="key", oauth_nonce="nonce", oauth_signature="signature", oauth_signature_method="HMAC-SHA1", oauth_timestamp="timestamp", oauth_token="token", oauth_version="1.0"'));
> curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
> curl_setopt($ch, CURLOPT_VERBOSE, 1);
> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
> curl_setopt($ch, CURLOPT_HTTPGET, 1);
> curl_setopt($ch, CURLOPT_URL, 'https://api.twitter.com/1/users/show.json?cursor=-1&screen_name=somename');
> $page = curl_exec($ch);
> curl_close($ch); 
```

我得到的错误

> SSL证书问题，验证CA证书是否OK。详细信息：错误：14090086：SSL 例程：SSL3_GET_SERVER_CERTIFICATE：证书验证失败

但是它适用于标准 curl 命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:17:48.597

您需要向 curl 提供证书链，以使其能够验证 Twitter 的 SSL 证书是否有效。为此，请[从此处](https://github.com/themattharris/tmhOAuth/blob/master/cacert.pem)下载必要的证书签名并将它们保存到一个纯文件中（我假设您命名它`cacert.pem`）。

然后，在发出请求之前，设置`CURLOPT_CAINFO`指向这个文件：

```
// assumes file in same directory as script
curl_setopt($ch, CURLOPT_CAINFO, 'cacert.pem'); 
```

显式启用 SSL 证书验证而不是依赖默认设置也是一个好主意：

```
curl_setopt($ch, CURLOPT_VERIFYPEER, true); 
```

# hibernate - 查询指定连接提取，但提取关联的所有者不在选择列表中

> ID：12459779
> 
> 赞同：107
> 
> 时间：2012-09-17T13:02:15.167
> 
> 标签：hibernate, join, fetch

我选择了两个 id 列，但指定了错误：

```
org.hibernate.QueryException: **query specified join fetching, but the owner of the fetched association was not present in the select list** 

[FromElement{explicit,not a collection join,fetch join,fetch non-lazy properties,classAlias=r,role=null,tableName=REVISIONS,tableAlias=revision1_,origin=ENTITY_CHANGED_IN_REVISION entitychan0_,columns={entitychan0_.REV_ID ,className=ru.csbi.registry.domain.envers.Revision}}] [ select ec.id as entityChangeId, r.id as revisionId from ru.csbi.registry.domain.envers.EntityChange as ec  inner join fetch ec.revision as r  where ec.groupEntityId = :groupEntityId and ec.groupName = :groupName  and r.timestamp < :entityDateFrom  and r.timestamp > :entityDateTo  and (        ec.revisionType in (0, 5, 1, 4, 2 )       and not ( ec.otherGroupEntityModified = false and ec.thisGroupEntityModified = true and ec.rowDataModified = false and ec.collectionOfNotGroupEntityModified = false   )      )  group by ec.id, r.id  having count(*) > :start order by r.id desc] 
```

一些代码：

```
String hql = " select ec.id as entityChangeId, r.id as revisionId from EntityChange as ec " +
            " inner join fetch ec.revision as r " +
            " where ec.groupEntityId = :groupEntityId" +
            " and ec.groupName = :groupName " +
            " and r.timestamp < :entityDateFrom " +
            " and r.timestamp > :entityDateTo " +
            " and ( " +
            "       ec.revisionType in (" + 
                        RevisionType.ADD.getRepresentation() + ", " + 
                        RevisionType.ONLY_DATA_PROPERTY_MOD.getRepresentation() + ", " +
                        RevisionType.BOTH_COLLECTION_AND_PROPERTY_MOD.getRepresentation() + ", " +
                        RevisionType.ONLY_COLLECTION_PROPERTY_MOD.getRepresentation() + ", " +
                        RevisionType.DEL.getRepresentation() +
                    " ) " +
            "     and not ( "+
                    "ec.otherGroupEntityModified = false and " +
                    "ec.thisGroupEntityModified = true and " +
                    "ec.rowDataModified = false and " +
                    "ec.collectionOfNotGroupEntityModified = false " +
                "  ) " +
            "     ) " +
            " group by ec.id, r.id " +
            " having count(*) > :start" +
            " order by r.id desc"; 
```

如何修复错误，我做错了什么？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-09-17T13:09:40.950

使用常规`join`而不是`join fetch`（顺便说一下，`inner`默认情况下）：

```
String hql = " select ec.id as entityChangeId, r.id as revisionId from EntityChange as ec " + 
        " join ec.revision as r " + ... 
```

正如错误消息告诉你的那样，`join fetch`这里没有意义，因为它是一个强制加载集合的性能提示。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2019-02-07T22:57:05.153

根据您的需要`join fetch`，删除`fetch`将无法满足您的需求。

您应该做的是与它一起指定一个计数查询。

假设您正在对结果进行分页，下面是一个 JPA 查询，它将 id 作为 a`param`并将导致您指定的问题，第二个查询通过向其添加计数查询来解决此问题。

注意：`fk_field`是`tableA`具有*一对多*rln 的属性。计数查询不使用`join fetch`.

```
@Query(value = "from TableA a LEFT JOIN FETCH a.fk_field where a.id = :id") 

@Query(value = "from TableA a LEFT JOIN FETCH a.fk_field where a.id = :id", 
  countQuery = " select  count(a) from TableA a left join a.fk_field where a.id = :id") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-02T22:58:38.437

您必须将相关项目列放入选择子句

```
select ec.id as entityChangeId, r.id as revisionId, **r.revision** 
from EntityChange as ec " +
        " inner join fetch ec.revision as r " + 
```

# makefile - 从 git bash 编译 Visual Studio 6 C 项目

> ID：12459782
> 
> 赞同：1
> 
> 时间：2012-09-17T13:02:31.687
> 
> 标签：makefile, git-bash, visual-studio-6

我正在尝试自动构建 Visual Studio 6 项目（用 C 编写）。我可以从 Windows 控制台使用以下命令构建项目 (.dsp)：

```
msdev reg.dsp /make "reg - Win32 Release" 
```

但我不能从 GIT bash 中做到这一点。它所做的只是在visual studio中打开项目，并报告以下错误：

```
C:/Program Files/Git/make
File not found.
Please verify that the path and the file name are correct. 
```

sh --version 说明如下：

```
GNU bash, version 3.1.0(1)-release (i686-pc-msys)
Copyright (C) 2005 Free Software Foundation, Inc. 
```

那么，如何在 GIT Bash 控制台中构建 Visual Studio 6 C 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:35:53.260

我猜当我`/`在 Windows 上的 git bash 中发送（斜线）参数时会发生一些奇怪的事情。我用`-`（破折号/减号）替换了那些，所以构建命令如下所示，它终于起作用了：

```
msdev reg.dsp -make "reg - Win32 Release" 
```

在 shell 脚本中，它看起来像这样（以防有人发现这很有用）：

```
command="msdev ../reg.dsp -MAKE \"reg - Win32 Release\""
eval $command 
```

# php - 对于每个 div 标签，获取其内容

> ID：12459783
> 
> 赞同：1
> 
> 时间：2012-09-17T13:02:32.830
> 
> 标签：php, html

我正在尝试遍历 HTML 页面的代码并重新格式化它的内容。它在 div 中有几个 div，我想提取它们。我尝试了各种形式的爆炸、正则表达式和 DOM，但找不到确切的方法。

例子：

```
<div class="section1">
 <div class="section2">number 1</div>
</div>
<div class="section1">
 <div class="section2">number 2</div>
</div> 
```

我正在寻找的结果基本上是，对于每个第 1 节，从第 2 节获取内容，所以输出将是：数字 1，数字 2

有谁知道如何做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:07:00.543

应该很容易[`DOMXPath`](http://www.php.net/manual/en/class.domxpath.php)：

```
$doc = new DOMDocument;
$doc->loadHTML(/*...*/); // load the HTML here
$xpath = new DOMXPath($doc);
$result = $xpath->query("//div[@class='section1']/div[@class='section2']/text()");

foreach ($result as $item) {
    echo "$item->wholeText\n";
} 
```

[**看到它在行动**](http://codepad.viper-7.com/KE77pA)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:04:30.453

这是一个**jQuery**解决方案，而不是**PHP**：

```
$('.section1).each(function() {
    return $(this).html();
}); 
```

# struts2 - struts2中字段验证器的动态字段名称

> ID：12459784
> 
> 赞同：0
> 
> 时间：2012-09-17T13:02:33.413
> 
> 标签：struts2, struts-validation

我有这门课

```
public Class Employee
{
    String name;
    List<Address> listOfAddress;
}

public Class Address
{
    String location;
    String streetName;
} 
```

在我的 JSP 页面中，我这样填写

```
 <s:textfield id="streetName" name="listOfAddress[%{listOfAddress.size()}].streetName" size="20" maxlength="24" cssStyle="width: 100px" /> 
```

每次我提交页面时，都会将时间地址对象添加到列表中，因此大小将增加一。当我查看上一个textField的源HTML时，它的名字看起来像这样 listOfAddress[0].streetName ，如果我在添加成功后提交JSP页面，它将返回相同的页面，这个文本字段的名称将是 listOfAddress[ 1].streetName 如果您查看其 HTML 源代码

像这样我可以向同一个 Employee 对象添加尽可能多的地址。

到目前为止一切正常。问题是当我想验证此字段时，因为它是动态的，如果我进行此验证，它将仅在第一次验证它。

```
 <field name="listOfAddress[0].streetName">
        <field-validator type="requiredstring" short-circuit="true">
           <param name="trim">true</param>
           <message>sorry this field is required field</message>
       </field-validator>
    </field> 
```

我想要的是根据列表的大小使列表“listOfAddress”的索引动态化。

我不知道如何从jsp动态传递它

我可以做这样的事情吗？

```
 <field name="listOfAddress[**${dynamic index value}**].streetName">
        <field-validator type="requiredstring" short-circuit="true">
           <param name="trim">true</param>

           **<param name="myIndex">${dynamic index value}</param>**

           <message>sorry this field is required field</message>
       </field-validator>
    </field> 
```

或将动态值传递给自定义验证器？

请帮助我，当索引是动态的时如何验证列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:25:16.490

使用访客验证器。请参阅[http://struts.apache.org/2.x/docs/using-visitor-field-validator.html](http://struts.apache.org/2.x/docs/using-visitor-field-validator.html)。

# c# - 在 C# 上通过 Socket 发送 FileStream

> ID：12459791
> 
> 赞同：0
> 
> 时间：2012-09-17T13:03:10.340
> 
> 标签：c#, sockets, filestream

我一直在寻找一种通过 C# 上的 Socket 发送文件的方法，但我没有找到示例代码或......正如你在 Socket 中所知道的，我们应该发送一个字节数组，数组长度为 MaxInt，文件大于 MaxInt . 有没有办法通过 C# 上的 windows Socket 发送 FileStream ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:06:32.873

分块读取文件（例如一次 64KB）。单独发送每个夹头。这使您可以流式传输任意大的文件。

从 .NET 4.0 开始，您可以使用它`Stream.CopyTo(Stream)`来使其成为单线。

# ios6 - 我可以为我的企业获取 ios6 的 udid

> ID：12459793
> 
> 赞同：1
> 
> 时间：2012-09-17T13:03:20.660
> 
> 标签：ios6, udid

我的公司使用 UDID 来保存 iphone 并确定他们是否有权使用某些应用程序。听说在 IOS 6 上，Apple 会移除 UDID。

我可以继续使用这个系统吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:22:06.423

您不应该再使用 UDID。您仍然可以从管理器/iTunes 中获取它，但您应该升级您的应用程序以使用替换 ID 之一。

> 唯一标识符
> 
> 基于各种硬件细节的每个设备唯一的字母数字字符串。（只读）（iOS 5.0 已弃用。酌情使用此类的 identifierForVendor 属性或 ASIdentifierManager 类的 adsIdentifier 属性，或使用 NSUUID 类的 UUID 方法创建 UUID 并将其写入用户默认数据库。）

# iis-7 - 带有 IIS 7 的客户端证书

> ID：12459797
> 
> 赞同：5
> 
> 时间：2012-09-17T13:03:37.970
> 
> 标签：iis-7, ssl-certificate

我有一个客户想要使用客户端证书来保护与他的应用程序的连接。他不想将证书映射到登录名。

他不想从受信任的 CA 购买证书，并希望我向他提供我自己的自签名证书。

我按照这篇文章中的步骤操作：http: [//asoftwaredeveloper.wordpress.com/2011/12/30/x-509-certificate/](http://asoftwaredeveloper.wordpress.com/2011/12/30/x-509-certificate/) （每次我在谷歌上搜索我都会结束）

我设法生成了这两个证书并将它们都设置在客户端和服务器中。

但是，我仍然收到相同的 403.7 错误。

有人有所有步骤的真正分步指南吗？只有我一个人想做这么简单的事情吗？为什么文档中没有明确描述？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T18:10:06.807

这是一步一步的：

1.  生成您的 CA
2.  生成您的客户端证书并使用 CA 对其进行签名
3.  打开 MMC（Windows 7 只需在对话框中键入 MMC）
4.  单击文件>添加/删除管理单元...
5.  点击证书然后添加
6.  出现提示时选择计算机帐户
7.  再次提示时选择本地计算机
8.  双击证书
9.  单击受信任的根证书颁发机构
10.  点击证书
11.  单击更多操作 > 导入
12.  查找并选择您的根 CA 证书 13 打开 Internet 信息服务管理器
13.  点击你的服务器
14.  单击服务器证书
15.  导入您的 CA 证书
16.  点击您的网站
17.  点击绑定
18.  为 https 添加一个新的
19.  确保选择您的 CA 证书
20.  单击确定。
21.  返回您的站点菜单
22.  单击 SSL 设置
23.  检查需要 SSL
24.  单击单选按钮中的要求
25.  返回网站菜单
26.  点击认证
27.  启用匿名身份验证（它仍然会要求提供证书）
28.  重新启动 IIS（所有这些，而不仅仅是站点）
29.  将客户端证书安装到浏览器中
30.  使用 https:// 而不是 http:// 访问该站点
31.  浏览器应根据设置提示

    *   每个客户都必须信任 CA，因此您必须说服每个用户将您的 CA 证书安装到他们的计算机上。

# email - 添加新帖子时，如何从私人 Blogger 博客发送电子邮件更新？

> ID：12459799
> 
> 赞同：0
> 
> 时间：2012-09-17T13:04:04.327
> 
> 标签：email, notifications, blogger, google-groups

我正在使用需要保持私密的 Blogger 设置博客。我了解私人博客不能有 RSS 提要或使用 feedburner 来发送电子邮件通知。

我想知道我还有哪些其他选项可以让用户接收博客上新帖子的电子邮件通知。我发现一个网站建议我可以建立一个 Google 组并使用该组的电子邮件地址向用户发送帖子，但我尝试了这个并没有发送任何电子邮件，即我将 Google 组的电子邮件地址添加到Settings/Mobile 和 Email/Email Posts to in Blogger，但 Google 群组的成员没有收到电子邮件。

我想知道是否还有其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T19:09:27.237

1.Sign in to Blogger

2.Click on your Blog Name

3.Click on `Settings`

4.Click on `Mobile and Email`

5.On the bottom click on `Add`,where it says `Email posts to`

6.Type the Email Address

7.On the top left,click on "Save Settings"

8.Create a new post and it shall take less than 48 hours for the email alert

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T14:21:06.967

在 Google 中创建一个群组，让任何人在其中发帖（但不要阅读）。

然后配置 Blogger 以向该组发送电子邮件。

这种方式可以添加10个以上的用户（博主限制）

# node.js - 为 tls 服务器使用多个 ssl 证书？

> ID：12459804
> 
> 赞同：0
> 
> 时间：2012-09-17T13:04:25.737
> 
> 标签：node.js, https, ssl

我有多个页面的多个 ssl 证书。我想在同一端口上的同一台服务器上运行所有页面，因此我需要创建一个单独的 https 服务器，然后将基于主机名的请求代理到站点。

这里的问题是，我不知道如何使用多个 ssl 证书并使用正确的证书。

这甚至可能吗？

顺便说一下，将证书与通配符组合是不可能的，因为我为站点使用了不同的顶级域。例如：

*   www.a.xx
*   www.a.yy
*   www.b.xx
*   www.b.yy
*   c.xx
*   c.yy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:08:32.633

您只能为支持[Server Name Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)的浏览器（在您的情况下是代理）执行此操作。但并非所有浏览器都[受支持](http://www.digicert.com/ssl-support/apache-secure-multiple-sites-sni.htm)，因此如果您希望它完全“通用”，则需要为不同的站点使用单独的 IP。

（当然，大多数现代浏览器都支持它，因此这取决于您对站点的“支持矩阵”）

# iphone - 如何加载包含标签栏控制器的 .xib 文件

> ID：12459806
> 
> 赞同：0
> 
> 时间：2012-09-17T13:04:30.547
> 
> 标签：iphone, objective-c, ios

我有一个由标签栏控制器组成的 .xib 文件，我想在我的 didselect 行中使用导航控制器加载它。我的父视图是一个标签栏控制器。如何隐藏我当前的标签栏控制器并显示新的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:22:10.510

您可以使用以下代码以编程方式隐藏您的 UITabBar 控制器：

```
AppDelegateFileName *appDelegate = (AppDelegateFileName *) [[UIApplication sharedApplication] delegate];
[appDelegate.tabbarController.tabBar setHidden:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:16:00.280

您可以尝试在您的应用程序中使用[自定义的单个标签栏控制器](https://github.com/briancollins/BCTabBarController)。当用户单击 UItableView 的单元格时，一个选项卡会导致一组新的选项卡，替换单选项卡栏控制器中的所有选项卡。

现在用户导航回来，然后将其更改为旧标签到标签栏控制器。

我认为这不是最好的用户界面。但根据您的要求，它应该可以工作。

# php - 如何在不编辑库的情况下覆盖 PHPExcel 方法？

> ID：12459807
> 
> 赞同：3
> 
> 时间：2012-09-17T13:04:34.507
> 
> 标签：php, oop, phpexcel, overwrite

我想在`PHPExcel_Cell_DefaultValueBinder::dataTypeForValue()`不接触 PHPExcel 库的情况下覆盖该方法，这样以后升级库就不会出现问题。

事实上，我这样做是为了解决将数字转换为字符串的问题，我只是想知道如何覆盖一个方法，以便我可以继续使用该库而不会出现任何问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:07:11.137

您可以创建一个**继承**自的新类`PHPExcel_Cell_DefaultValueBinder`，并**覆盖**该函数`dataTypeForValue`。

```
<?php
class PHPExcel_Cell_MyValueBinder extends PHPExcel_Cell_DefaultValueBinder {

    public static function dataTypeForValue($pValue = null) {
        if (/* your condition */) {
            // if you want to return a value, and i guess it's what you want, you can
            return PHPExcel_Cell_DataType::YOUR_TYPE;
        }
        // you call the fonction PHPExcel_Cell_DefaultValueBinder::dataTypeForValue();
        // so the already existant conditions are still working.
        return parent::dataTypeForValue($pValue);
    }

}
?> 
```

之后，只需在代码顶部使用`PHPExcel_Cell_MyValueBinder`而不是使用：`PHPExcel_Cell_DefaultValueBinder`

```
PHPExcel_Cell::setValueBinder(new PHPExcel_Cell_MyValueBinder()); 
```

所以`PHPExcel`将使用你自己的 ValueBinder 来完成其余的执行:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T13:11:35.227

```
class PHPExcel_Cell_MyValueBinder extends PHPExcel_Cell_DefaultValueBinder implements PHPExcel_Cell_IValueBinder
{
    public function bindValue(PHPExcel_Cell $cell, $value = null)
    {
        // sanitize UTF-8 strings
        if (is_string($value)) {
            $value = PHPExcel_Shared_String::SanitizeUTF8($value);
        }

        // Implement your own override logic
        if (is_string($value) && $value[0] == '0') {
            $cell->setValueExplicit($value, PHPExcel_Cell_DataType::TYPE_STRING);
            return true;
        }

        // Not bound yet? Use default value parent...
        return parent::bindValue($cell, $value);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T13:10:51.403

您可以扩展类并覆盖您希望扩展其功能的方法。[这遵循了SOLID 编程](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)的开放/封闭原则（对扩展开放但对修改封闭），您无需对 PHPExcel 进行任何更改。你只需要在扩展类上使用你的新类。

```
namespace MyPHPExcel;

class MyDataValueBinder extends \PHPExcel_Cell_DefaultValueBinder 
{
    public static function dataTypeForValue($pValue = null)
    {
      ...method body
    }
}

$returnValue = \MYPHPExcel\MyDataValueBinder::dataTypeForValue( $someValue ); 
```

# php - 有没有人用 silverstripe 建立单页网站的经验？

> ID：12459810
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:04:38.770
> 
> 标签：php, silverstripe

是否可以使用 silverstripe 构建单页网站？这是一个坏主意 - 看到银条？

在 silverstripe 中加载来自多个类别和子类别的所有文章的模板看起来如何？

感谢您提供任何指向教程、代码片段等的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T01:18:59.653

我已经用 SilverStripe 构建了主干.js“应用程序”。您可以像加载任何其他 SS 项目一样加载前端资源。我不喜欢使用 SS 模板变量来包含资产（js/css），因为 js 应用程序需要严格的放置准则（尽管可以使用Requirements 类加载所有内容）。

查看[RESTful 服务器文档](http://doc.silverstripe.org/framework/en/reference/restfulservice)，了解使用 SilverStripe CMS 来控制您的数据并使用 API 端点从前端访问这些数据的示例。事实上，在这种场景下，SS后端和单页应用前端不需要在同一台服务器上，这就是REST的美妙之处。

对于单页应用程序中的链接处理，您可以使用 PushState 或侦听哈希更改事件。无论哪种方式，都是前端 JS 处理路由，而不是使用 SS 的 Director 类。

如果您需要更具体的帮助，请提供有关您尝试执行的操作的更多详细信息。

# python - 如何在 pyqt 中嵌入 matplotlib - For Dummies

> ID：12459811
> 
> 赞同：82
> 
> 时间：2012-09-17T13:04:39.180
> 
> 标签：python, matplotlib, pyqt4

我目前正在尝试在我设计的 pyqt4 用户界面中嵌入我想要绘制的图表。因为我对编程几乎是全新的 - 我不明白人们是如何在我发现的示例中进行嵌入的 -[这个（在底部）](http://www.python-forum.de/viewtopic.php?f=24&t=22673) 和[那个](http://eli.thegreenplace.net/files/prog_code/qt_mpl_bars.py.txt)。

如果有人可以发布一步一步的解释，或者至少是一个非常小的、非常简单的代码，只在一个 pyqt4 GUI 中创建一个图形和一个按钮，那就太棒了。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-09-17T19:26:05.727

实际上并没有那么复杂。相关的 Qt 小部件位于[`matplotlib.backends.backend_qt4agg`](http://matplotlib.org/api/backend_qt4agg_api.html). `FigureCanvasQTAgg`并且`NavigationToolbar2QT`通常是您需要的。这些是常规的 Qt 小部件。您将它们视为任何其他小部件。下面是一个非常简单的示例，其中包含一个`Figure`,`Navigation`和一个绘制一些随机数据的按钮。我添加了评论来解释事情。

```
import sys
from PyQt4 import QtGui

from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.backends.backend_qt4agg import NavigationToolbar2QT as NavigationToolbar
from matplotlib.figure import Figure

import random

class Window(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        # a figure instance to plot on
        self.figure = Figure()

        # this is the Canvas Widget that displays the `figure`
        # it takes the `figure` instance as a parameter to __init__
        self.canvas = FigureCanvas(self.figure)

        # this is the Navigation widget
        # it takes the Canvas widget and a parent
        self.toolbar = NavigationToolbar(self.canvas, self)

        # Just some button connected to `plot` method
        self.button = QtGui.QPushButton('Plot')
        self.button.clicked.connect(self.plot)

        # set the layout
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.toolbar)
        layout.addWidget(self.canvas)
        layout.addWidget(self.button)
        self.setLayout(layout)

    def plot(self):
        ''' plot some random stuff '''
        # random data
        data = [random.random() for i in range(10)]

        # create an axis
        ax = self.figure.add_subplot(111)

        # discards the old graph
        ax.clear()

        # plot data
        ax.plot(data, '*-')

        # refresh canvas
        self.canvas.draw()

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    main = Window()
    main.show()

    sys.exit(app.exec_()) 
```

**编辑**：

更新以反映评论和 API 更改。

*   `NavigationToolbar2QTAgg`更改为`NavigationToolbar2QT`
*   直接导入`Figure`而不是`pyplot`
*   将弃用的替换`ax.hold(False)`为`ax.clear()`

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2017-03-13T22:08:05.250

下面是在**PyQt5**和**Matplotlib 2.0**下使用的先前代码的改编。有一些小的变化：PyQt 子模块的结构，matplotlib 中的其他子模块，已弃用的方法已被替换......

```
 import sys
from PyQt5.QtWidgets import QDialog, QApplication, QPushButton, QVBoxLayout

from matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib.backends.backend_qt5agg import NavigationToolbar2QT as NavigationToolbar
import matplotlib.pyplot as plt

import random

class Window(QDialog):
    def __init__(self, parent=None):
        super(Window, self).__init__(parent)

        # a figure instance to plot on
        self.figure = plt.figure()

        # this is the Canvas Widget that displays the `figure`
        # it takes the `figure` instance as a parameter to __init__
        self.canvas = FigureCanvas(self.figure)

        # this is the Navigation widget
        # it takes the Canvas widget and a parent
        self.toolbar = NavigationToolbar(self.canvas, self)

        # Just some button connected to `plot` method
        self.button = QPushButton('Plot')
        self.button.clicked.connect(self.plot)

        # set the layout
        layout = QVBoxLayout()
        layout.addWidget(self.toolbar)
        layout.addWidget(self.canvas)
        layout.addWidget(self.button)
        self.setLayout(layout)

    def plot(self):
        ''' plot some random stuff '''
        # random data
        data = [random.random() for i in range(10)]

        # instead of ax.hold(False)
        self.figure.clear()

        # create an axis
        ax = self.figure.add_subplot(111)

        # discards the old graph
        # ax.hold(False) # deprecated, see above

        # plot data
        ax.plot(data, '*-')

        # refresh canvas
        self.canvas.draw()

if __name__ == '__main__':
    app = QApplication(sys.argv)

    main = Window()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-10-02T01:17:01.173

对于那些寻找在 PyQt5 中嵌入 Matplotlib 的动态解决方案的人（甚至使用拖放绘制数据）。在 PyQt5 中，您需要在主窗口类上使用 super 来接受 drop。dropevent 函数可用于获取文件名，其余的很简单：

```
def dropEvent(self,e):
        """
        This function will enable the drop file directly on to the 
        main window. The file location will be stored in the self.filename
        """
        if e.mimeData().hasUrls:
            e.setDropAction(QtCore.Qt.CopyAction)
            e.accept()
            for url in e.mimeData().urls():
                if op_sys == 'Darwin':
                    fname = str(NSURL.URLWithString_(str(url.toString())).filePathURL().path())
                else:
                    fname = str(url.toLocalFile())
            self.filename = fname
            print("GOT ADDRESS:",self.filename)
            self.readData()
        else:
            e.ignore() # just like above functions 
```

对于初学者，参考完整[代码](https://youtu.be/1q3Z2clyIEQ)给出了以下输出： [![在此处输入图像描述](../Images/b642649720e6db1eb3efcb693175956b.png)](https://i.stack.imgur.com/LvI1D.gif)

# ruby - 在短语中添加数字

> ID：12459812
> 
> 赞同：1
> 
> 时间：2012-09-17T13:04:41.737
> 
> 标签：ruby

我可以使用以下代码打印原始数字：

```
puts 'Please enter your favorite number'
favNumber = gets.chomp
betterNumber  = favNumber.to_i 
puts betterNumber + 1 
```

但我需要设置一条包含号码的消息。我把最后两行改成了这个，但这是错误的。

```
betterNumber  = favNumber.to_i + 1
puts 'Your favorite number sucks, a better number is '+ betterNumber + '!' 
```

帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:08:02.467

`betterNumber`是一流的`Fixnum`，你的字符串当然是一流的`String`。您不能添加字符串和 Fixnum，您需要使用 . 将您的 Fixnum 转换为字符串`to_s`。

```
"Your favorite number sucks, a better number is " + betterNumber.to_s + "!" 
```

`to_s`此外，对任何被插值的对象使用插值调用。所以这也有效（并且更常见）：

```
"Your favorite number sucks, a better number is #{betterNumber}!" 
```

此外，在 Ruby 中，我们通常使用`snake_case`变量而不是`camelCase`变量。所以我建议使用`better_number`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:07:47.550

`betterNumber`打印时需要转换为字符串，如下所示： `betterNumber.to_s`.

# php - CakePHP 私人消息系统

> ID：12459815
> 
> 赞同：3
> 
> 时间：2012-09-17T13:05:22.880
> 
> 标签：php, cakephp, private-messaging

我只是想知道是否有人可以让我开始在 CakePHP 框架上编写私人消息传递系统。我的目标是类似于 Facebook 收件箱系统。当然不必那么复杂！

我目前有一个 AUTH 系统，用户可以登录和注销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:25:23.437

The simplest way would be to just create a `messages` database table with at the very least, five columns: `id`, `sender_id`, `recipient_id`, `subject`, `body`. You can then also add other columns you desire, such as `created`.

You can then set up your controller as follows:

```
<?php
class MessagesController extends AppController {

    public function inbox() {
        $messages = $this->Message->find('all', array(
            'conditions' => array(
                'recipient_id' => $this->Auth->user('id')
            )
        ));
    }

    public function outbox() {
        $messages = $this->Message->find('all', array(
            'conditions' => array(
                'sender_id' => $this->Auth->user('id')
            )
        ));
    }

    public function compose() {
        if ($this->request->is('post')) {
            $this->request->data['Message']['sender_id'] = $this->Auth->user('id');
            if ($this->Message->save($this->request->data)) {
                $this->Session->setFlash('Message successfully sent.');
                $this->redirect(array('action' => 'outbox'));
            }
        }
    }
} 
```

Obviously you'll need to flesh this example out, and change anything that may not apply to your application. You'll also need to add in checks for if the user is friends with the person they're trying to message if you want that as well.

# php - php mysql 按获取的顺序对结果进行排序

> ID：12459816
> 
> 赞同：1
> 
> 时间：2012-09-17T13:05:27.083
> 
> 标签：php, mysql

使用 IN 语句时，如何按数组中 id 的顺序对得到的结果进行排序：

> SELECT id,name from table WHERE id IN (23, 33, 55, 2)

我想得到：

```
+----+---------+
| id | name    |
+----+---------+
| 23 | name1   |
| 33 | name2   |
| 55 | name3   |
|  2 | name4   |
+----+---------+ 
```

按此顺序

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:12:16.070

只需在查询末尾添加：

```
order by field(id, 23, 33, 55, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:09:37.097

您可以尝试使用 JOIN。不能保证按此顺序返回，但对于 MySQL，这在大多数情况下都是正确的：

```
SELECT table.id, table.name
FROM ( 
  SELECT 23 id UNION SELECT 33 id UNION SELECT 55 id UNION SELECT 2
) a
JOIN table
ON a.id = table.id 
```

您的订单是如何确定的？如果您可以提供排序功能，它就会变得容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T13:10:34.337

SELECT id,name from table WHERE id IN (23, 33, 55, 2) ORDER BY FIELD (id, 2, 23, 33, 55)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:06:47.507

你可以尝试这样的事情：

```
SELECT t.id,t.name 
from 
    (select 23 as id,1 as rnk union all 
     select 33 as id,2 union all
     select 55 as id,3 union all
     select 2 as id,4 )input
join table t 
on   t.id=input.id
order by input.rnk 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T13:08:57.213

`SELECT id,name from table WHERE id IN (23, 33, 55, 2) ORDER BY id = 23 DESC, id = 33 DESC, id = 55 DESC, id = 2 DESC`不是特定于数据库的解决方案，但仍然有效

# java - 如何弄清楚为什么 Eclipse 启动 JVM 很慢？

> ID：12459818
> 
> 赞同：0
> 
> 时间：2012-09-17T13:05:41.727
> 
> 标签：java, eclipse, jvm

在过去的一两周内，当我在 Eclipse Juno 中运行 Java 代码时，它需要 2-3 秒才能开始执行。我知道这听起来并不长，但它加起来真的很烦人。（当我运行 JUnit 测试时也会发生同样的事情）。

过去没有花这么长时间。它过去几乎是瞬时的。我无法弄清楚我的系统配置发生了什么变化以及如何将其更改回来。

在环境方面，我唯一能想到的是我最近在 Chrome 中安装了一个 Java 插件，但我看不出这会如何影响 Eclipse，因为它使用的是不同的 JDK（而不是我安装的 JRE ）。

我的下一步应该是什么？我怎样才能缩小导致它的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:10:44.073

我敢打赌，这是因为工作区中有这么多打开的项目！您可以通过右键单击关闭任何未使用的项目，然后选择`Close Project`。

# c# - 如何让按钮占据其整个包含表单？

> ID：12459822
> 
> 赞同：0
> 
> 时间：2012-09-17T13:05:50.767
> 
> 标签：c#, button

我做了一个浮动按钮。我希望它占据它包含的整个表单，但下面的代码在按钮右侧和表单右侧之间有一个边距。

```
 public FloatButton()
   {
        InitializeComponents();
        int width = (int)((double)Screen.PrimaryScreen.Bounds.Width / 20);
        int height = (int)((double)Screen.PrimaryScreen.Bounds.Height / 20);
        this.WindowState = FormWindowState.Normal;
        FormBorderStyle = FormBorderStyle.None;
        int x_pos = Screen.PrimaryScreen.Bounds.Width - width; 
        int y_pos = Screen.PrimaryScreen.Bounds.Height / 2 - height / 2;
        this.Location = new Point(x_pos,y_pos);
        this.Height = height;
        this.Width = width;
        this.button.Width = width;
        this.button.Height = height;
    } 
```

编辑：大约 40 像素，如果我让按钮文本更长（文本换行），它不会改变

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:11:51.267

对接对您有用吗？

```
 this.button.Dock = System.Windows.Forms.DockStyle.Fill; 
```

只需将 Dock 设置为 Fill 即可使按钮填满其父级的整个区域。

# php - PHP正则表达式：匹配所有ul html标签中的所有星号

> ID：12459828
> 
> 赞同：0
> 
> 时间：2012-09-17T13:06:00.890
> 
> 标签：php, html, regex, match

我想从某个 html 文档中删除所有星号。但只有在 ul-tag 中的那些。其中一些 ul-tags 也有一个类。经过几个小时的尝试，我决定问。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:33:57.683

这是您需要的：

```
<?php

// a function to remove any asterisks from a string
function replace_asterisks($replace){
    return str_replace('*', '', $replace[0]);
}

$html = '* blah blah * * <ul>blah<li>*</li>*</ul> sad sad <ul>**</ul>';

// if found any <ul> with asterisks, pas the part to that function to remove asterisks from it
$html = preg_replace_callback('/<ul.*?>.*?\*.*?.*?<\/ul>/', 'replace_asterisks', $html);

echo $html;

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:09:18.037

你可以试试这个：

```
<ul[^>]*?>(.*?[*]+.*?)*</ul> 
```

# android - /system/bin/cat /dev/graphics/fb0 > 不是所有的安卓手机都可以用，为什么？

> ID：12459833
> 
> 赞同：0
> 
> 时间：2012-09-17T13:06:14.737
> 
> 标签：android, root

我正在尝试使用以下命令仅用于 Rooted 手机的屏幕截图应用程序。 **/system/bin/cat /dev/graphics/fb0 >** 但它不适用于所有 android 手机。为什么 ？请给我建议..

谢谢，拉杰什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:18:45.133

这取决于安卓版本。AFAIK，它在 3.x 版本上进行了更改（至少我无法在 Xoom 设备上使用 /system/bin/cat /dev/graphics/fb0）。您可能需要检查该方法是否可用，如果没有，请使用另一种方法。

我建议[通过 oNaiPs 检查这个项目，](https://github.com/oNaiPs/droid-VNC-server/tree/master/jni/vnc/screenMethods)它使用了许多不同的屏幕捕获方法。

# actionscript-3 - 如何设置鼠标点击不击中透明像素

> ID：12459839
> 
> 赞同：1
> 
> 时间：2012-09-17T13:06:33.187
> 
> 标签：actionscript-3, apache-flex

想象一个绘画程序。我有两个相互重叠的图像。如果我点击上面图片的透明部分，我必须能够点击后面的图片。

我在每个图像上添加了一个事件侦听器。所以我必须阻止第一个发送点击事件，以便后面的发送它。

（我的意思是，我已经检查了透明像素，但我无法取消该事件以发送给其他图像。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:11:35.597

有一些肮脏的解决方案。假设您的“图像”封装在 Sprites 中，否则您无法将侦听器附加到 Bitmap 对象或 Shape 对象。MovieClips - 嗯，应该仍然可以工作，虽然检查 alpha 要困难得多。您将听众附加到这些精灵上。首先，该精灵本身可以检查透明度，如果不透明，则继续该事件。要了解后面的内容，您可以调用`stage.getObjectsUnderPoint()`，这将返回一个 DisplayObjects 数组，前景位于顶部。因此，您可能只有一个侦听器会调用它来枚举重点内容，然后按照 Roman Trofimov 的建议来确定该对象的透明度。一旦你找到一个不透明的物体，你可以：

```
// "b" is a non-transparent DisplayObject found beforehand
while (b && (!(b is InteractiveObject))) b = b.parent;
if (b) {
    var p:Point = new Point(e.stageX, e.stageY);
    p = b.globalToLocal(p);
    b.dispatchEvent(new MouseEvent('click', true, true, p.x, p.y)); 
} 
```

这将向能够接收事件的对象分派一个点击事件，并且足够不透明以掩盖背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:45:39.113

在 flex 中，您可以将 mouseEnabledWhereTransparent="false" 添加到组件中。不完全确定该变量是否对您可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:34:20.670

MovieClip 属性 'mouseEnabled' 可以防止点击事件在其他对象前面的对象上触发，例如，取两个相同大小和相同位置的影片剪辑：

```
mc1.addEventListener(MouseEvent.CLICK, click1);
function click1(e:MouseEvent) : void
{
  trace("1");
}

mc2.addEventListener(MouseEvent.CLICK, click2);
function click2(e:MouseEvent) : void
{
  trace("2");
}

mc1.mouseEnabled = false; 
```

输出将是“2”，因为点击基本上会“通过”mc1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:56:04.927

通常，您总是会从第一个精灵获得第一个事件（如果它不是捕获阶段或优先级更改）。但据我了解，您需要检查它是否透明，如果不是，请停止冒泡此事件。

停止事件 -`event.stopImmediatePropagation()`在事件处理程序中使用。

要确定透明度：

1）如果它只是一个位图，你可以`.bitmapData`用方法检查它`.getPixel32`，它会返回你的alpha值。

2）如果是组合精灵（矢量和位图），则需要手动将其渲染为位图`BitmapData.draw`，然后使用第二种情况的解决方案

3）要了解是否是绝对错过点击，你可以试试这个方法：[检查透明度](https://stackoverflow.com/questions/7147323/check-transparency/7153288#7153288)

# .htaccess - 使用 htaccess 加载特定域的页面

> ID：12459841
> 
> 赞同：0
> 
> 时间：2012-09-17T13:06:41.963
> 
> 标签：.htaccess

我有一个域 example.com 和 mainexample.com-我希望 example.com 指向已经由 htaccess 文件驱动的 mainexample.com/social/pre/register/121。

我不知道该怎么做。我已将两个域指向同一个目录。我在一个虚拟共享服务器上，所以我将 directadmin 与 php/codeigniter 一起使用。

该站点使用下面列出的 codeigniter 的标准 htaccess 文件

```
RewriteEngine On
RewriteBase /upd8r_jul

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:39:00.450

您将要在行中添加斜杠`%{REQUEST_URI}`，因为它们看起来都像`/something`而`something`不像 URI 用于匹配`RewriteRule`'s 中的匹配项。但这确实会影响您提出的问题。

如果要重定向`http://example.com/`到，`http://mainexample.com/social/pre/register/121`则将这些规则添加到htaccess 文件中已有的规则**之上：**

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?example\.com$ [NC]
RewriteRule ^$ http://mainexample.com/social/pre/register/121 [L,R=301] 
```

# java - java ME中的异常

> ID：12459843
> 
> 赞同：0
> 
> 时间：2012-09-17T13:06:46.570
> 
> 标签：java, android

我想在用户单击按钮获得结果之前测试编辑文本框是否为空，我希望应用程序通知用户特定文本框不能为空并返回到应用程序而不是抛出异常. 我尝试使用 try 和 catch 语句，但 catch 总是出错。请帮忙

```
 public void onClick(View v) {
            // TODO Auto-generated method stub

                EditText locName = (EditText)findViewById(R.id.address);
                String textName = locName.getText().toString();

                if (textName != null){
                    getAddress();
                }else if (textName == null)
                    {
                        Toast.makeText(getBaseContext(), "Enter a destination address", Toast.LENGTH_LONG).show();
                    }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:10:02.920

捕获异常，然后在捕获部分向用户提供消息并且不要再次抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:08:58.500

在此之后：`String textName = locName.getText().toString();`您可以确保该`.length`属性不等于零。如果是，则显示通知并通过`return`语句从事件处理程序中退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:11:53.027

试试这样......

```
 public void onClick(View v) {

            EditText locName = (EditText)findViewById(R.id.address);

            if (locName.getText().toString().length() > 0) {
                getAddress();
            }
            else if(locName.getText().toString().length() == 0)
            {
                Toast.makeText(getBaseContext(), "Enter a destination address", Toast.LENGTH_LONG).show();
            }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:22:26.357

使用它来验证`EditText`

```
if(sUserName.trim().length()==0 || sPassword.trim().length()==0){
        MsgBox(ctx,"Please enter Login credentials to activate !");
        return;
    } 
```

# optimization - 为什么 GCC 出于神秘的原因需要清除 edx？

> ID：12459846
> 
> 赞同：3
> 
> 时间：2012-09-17T13:06:53.547
> 
> 标签：optimization, gcc, assembly

考虑以下代码：

```
int isqrt(int x) {
    unsigned int r;

    r = x >> 7;

    r += x / r;
    r >>= 1;
    r += x / r;
    r >>= 1;
    r += x / r;
    r >>= 1;

    return r;
} 
```

`gcc -O3 isqrt.c -S`生成这个：

```
_isqrt:
    pushl   %ebx
    movl    8(%esp), %ecx
    movl    %ecx, %ebx
    sarl    $7, %ebx
    movl    %ecx, %eax
    xorl    %edx, %edx  ; huh?
    divl    %ebx
    addl    %eax, %ebx
    shrl    %ebx
    movl    %ecx, %eax
    xorl    %edx, %edx  ; huh?
    divl    %ebx
    addl    %eax, %ebx
    shrl    %ebx
    movl    %ecx, %eax
    xorl    %edx, %edx  ; huh?
    divl    %ebx
    addl    %ebx, %eax
    shrl    %eax
    popl    %ebx
    ret 
```

为什么`%edx`接缝无故清除3次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:16:16.580

`divl x`除以`%edx:%eax`，`x`所以`%edx`应该是有意义的（通常为零）。它还将剩余部分放入，`%edx`因此必须再次清除它，而不仅仅是一次。

# jquery - jquery css更改导致typeError为null

> ID：12459848
> 
> 赞同：2
> 
> 时间：2012-09-17T13:06:57.803
> 
> 标签：jquery, css, forms

嘿，我想知道为什么我使用以下代码收到此错误：

的JavaScript：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
 <script src="http://max.jotfor.ms/min/g=jotform?3.0.3359" type="text/javascript"></script>

 function checkInput() {
if ($("#input_3") === null) {
    $('#error1').css('display', 'block');
        $('#error1').css('visibility', 'visible');
}
 .... 
```

CSS：

```
 .ErrorBlock1 {
    display: none;
    visibility: hidden;     
    background-color:#F00;
    color:#FFF;
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
 } 
```

的HTML：

```
 <div id="cid_3" class="form-input-wide">
    <input name="q3_firstName3" type="text" class="form-textbox validate[required, Alphabetic]" id="input_3" size="25" style="width: 265px; height: 25px; background: transparent url(textfield.png) no-repeat center center; border: none;" onBlur="checkInput();" />
 <div class="ErrorBlock1" id="error1">First Name Req.</div>
 </div> 
```

运行时出现此错误：

```
Timestamp: 9/17/2012 9:10:15 AM
Error: TypeError: $("#error1") is null 
```

为什么我会得到这个？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:10:53.483

`$('#input_3')`永远不会返回null。它总是一个 jQuery 对象。

用 来检查它的存在`$('#input_3').length != 0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:08:18.100

为您同时使用`display`and `visibility`：

## *[jsBin 演示](http://jsbin.com/umoliz/5/edit)*

CSS：

```
.ErrorBlock1 {
    display: none; 
    visibility: hidden;
    background-color:#F00;
    color:#FFF;
    font-family:Arial, Helvetica, sans-serif;
    font-size:10px;
 } 
```

查询：

```
function checkInput() {
  if ($("#input_3").val().length) {
      $('#error1').show().css({visibility:'visible'});
  }else{
      $('#error1').hide().css({visibility:'hidden'});
  }
} 
```

# google-maps - 谷歌地图：路径公差范围内的点

> ID：12459854
> 
> 赞同：1
> 
> 时间：2012-09-17T13:07:11.780
> 
> 标签：google-maps, distance, geodesic-sphere

我尝试使用该`google.maps.geometry.poly.isLocationOnEdge(position, path, tolerance)`函数来确定`position`(lat,lon) 对是否在距指定路径一定距离内（测地线距离）。API 说容差是指以度为单位的测量值，因此一种简单的方法是找到，比方说，距离某个路径 50 公里的缓冲区半径内的点，将*容差*提供为 50/111 度（因为可以假设度对应于 111 公里作为球体上的行进距离）。不幸的是，这是非常不稳定的，即使它们距离路径 200 公里，也会产生许多误报。我是否误解了该功能的作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:33:45.920

111km 是零纬度的经度长度，但这个距离会因不同位置的几个因素而有所不同。您需要一个函数来计算两个 LatLng 之间的距离（以度为单位）。

有关示例实现，请参阅[此问题](https://stackoverflow.com/a/2908919/425834)中的最佳答案。

# android - 按 HomeButton 返回活动后未显示软键盘

> ID：12459857
> 
> 赞同：1
> 
> 时间：2012-09-17T13:07:21.547
> 
> 标签：android, android-alertdialog, soft-keyboard

我有一个活动在警报对话框下方显示软键盘，问题是当我通过按主页按钮返回主屏幕时，我将再次通过长按 Homekey 按钮启动活动，只有对话框可见但软键盘不可见.??

我也检查了下面的链接，但没有用

[关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

[android：返回活动后未显示软键盘，布局保持平移](https://stackoverflow.com/questions/8135323/android-softkeyboard-not-shown-after-return-to-activity-layout-remains-panned)

# java - Java（Web 服务 - SOAP） - 如何在客户端添加 SOAP 处理程序并正确启用 MTOM？

> ID：12459859
> 
> 赞同：5
> 
> 时间：2012-09-17T13:07:25.647
> 
> 标签：java, soap, jax-ws, attachment, mtom

Java - JDK 1.6.0.7 - WSGEN -版本：JAX-WS RI 2.2.3-b01-

* * *

我有以下问题：

```
SOAPBinding binding = (SOAPBinding)((BindingProvider)port).getBinding();
binding.setMTOMEnabled(true);

List<Handler> handlerChain = new ArrayList<Handler>();
handlerChain.addAll(binding.getHandlerChain());
handlerChain.add(new MyHandlerSecurity("admin", "admin"));
binding.setHandlerChain(handlerChain); 
```

使用此代码，SoapHeader 是正确的，但附件始终是内联 base64 文本。

```
//List<Handler> handlerChain = new ArrayList<Handler>();
//handlerChain.addAll(binding.getHandlerChain());
//handlerChain.add(new MyHandlerSecurity("admin", "admin"));
//binding.setHandlerChain(handlerChain); 
```

当 handlerChain 被注释掉时，您将看到附件作为 xop 引用，但没有 SoapHeader，因此，客户端没有经过身份验证......

如何在客户端添加处理程序并正确启用 MTOM？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T13:36:07.960

我不确定我的问题是否正确，但我想几个月前我遇到了同样的问题，所以这是我的解决方案：

首先你需要一个 HeaderHandler 类，它创建了soap header 元素，它应该是这样的：

* * *

```
 import javax.xml.namespace.QName;
    import javax.xml.soap.SOAPElement;
    import javax.xml.soap.SOAPEnvelope;
    import javax.xml.soap.SOAPHeader;
    import javax.xml.ws.handler.MessageContext;
    import javax.xml.ws.handler.soap.SOAPHandler;
    import javax.xml.ws.handler.soap.SOAPMessageContext;

    public class HeaderHandler implements SOAPHandler<SOAPMessageContext> {

        public boolean handleMessage(SOAPMessageContext smc) {
            Boolean outboundProperty = (Boolean) smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
            String AUTH_TK = "http://www.myurl.com:port/subdir/etc/";
            String NOPREFIX="";//no prefix
            String PREFIX_XMLNS="xmlns";
            String value =  "123456";
            if (outboundProperty.booleanValue()) {
                try {
                    SOAPEnvelope envelope = smc.getMessage().getSOAPPart().getEnvelope();
                    SOAPHeader header = envelope.addHeader();
                    //<AuthorizationToken xmlns="http://www.myurl.com:port/subdir/etc/">
                    SOAPElement authorizationToken = header.addChildElement("AuthorizationToken", PREFIX_XMLNS, AUTH_TK);
                    //<Token>value</Token>
                    SOAPElement usernameToken =
                        authorizationToken.addChildElement("Token", NOPREFIX);
                        usernameToken.addTextNode(value);
                        //<Token>value</Token>
                    SOAPElement usernameToken =
                        authorizationToken.addChildElement("Token", PREFIX);
                        usernameToken.addTextNode(value);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return outboundProperty;
        }

        public Set<QName> getHeaders() {
            return null;
        }

        public void close(MessageContext arg0) {

        }

        public boolean handleFault(SOAPMessageContext arg0) {
            return false;
        }
    } 
```

之后，您创建一个 HeaderHandlerResolver 来处理标头创建并将其插入到处理程序链中：

* * *

```
 import java.util.ArrayList;
    import java.util.List;
    import javax.xml.ws.handler.Handler;
    import javax.xml.ws.handler.HandlerResolver;
    import javax.xml.ws.handler.PortInfo;

    public class HeaderHandlerResolver implements HandlerResolver {

    @SuppressWarnings("unchecked")
    public List<Handler> getHandlerChain(PortInfo portInfo) {
          List<Handler> handlerChain = new ArrayList<Handler>();
          HeaderHandler hh = new HeaderHandler();
          handlerChain.add(hh);
          return handlerChain;
       }
    } 
```

之后，您在客户端中添加：

* * *

```
 try{
            //new service instance (your service should be extending javax.xml.ws.Service;)
            YourServiceProxy service = new YourServiceProxy();
            //calls the header handler resolver ;)
            service.setHandlerResolver(new HeaderHandlerResolver());
            //get the service
            YourService port = (YourService)service.getYourService();
            //call the service 
            port.yourMethod()   
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

顺便说一句，我没有测试这个特定的头文件，我修改了我以前的头文件处理程序，所以它可能不准确，但我认为它非常接近，我真的希望它对你有帮助，试试看并告诉我们如何它来了，如果它仍然不起作用，我会尽力帮助你。

# arrays - 如何在 PostgreSQL 中以数组为参数进行递归选择

> ID：12459862
> 
> 赞同：3
> 
> 时间：2012-09-17T13:07:28.147
> 
> 标签：arrays, postgresql, select, recursion

我正在尝试在 PostgreSQL 中实现简单的递归函数，但我无法完成它......

我有表 MyTable，其中包括列 Col1 和 Col2。里面的数据是这样的：

```
Col1 | Col2

1 | 2  
2 | 5 
2 | 6
3 | 7
4 | 5
4 | 2
5 | 3 
```

我想编写一个函数，它将 Col1 fe (1,2) 的参数数组作为参数数组，并从 Col2 中返回值，如下所示：

```
1 | 2
2 | 5
2 | 6 
```

之后，再次执行结果： (2, 5, 6) 所以：

```
1 | 2
2 | 5
2 | 6
5 | 3 
```

（2 已经存在，并且键 '6' 不存在）和再次 (3)：

```
1 | 2
2 | 5
2 | 6
5 | 3
3 | 7 
```

对于 (7) 什么都没有，因为 Col1 中不存在值“7”。

这是一个简单的递归，但我不知道如何实现它。到目前为止，我已经得到了这样的东西：

```
with recursive aaa(params) as (
    select Col1, Col2
    from MyTable
    where Col1 = params -- I need an array here
    union all
    select Col1, Col2
    from aaa
)
select * from aaa; 
```

但这当然行不通

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T13:49:03.677

递归的基本模式是将基本情况作为联合的第一部分，在第二部分中将递归结果与产生下一级结果所需的内容结合起来。在您的情况下，它看起来像这样：

```
WITH RECURSIVE aaa(col1, col2) AS (
        SELECT col1, col2 FROM mytable
            WHERE col1 = ANY (ARRAY[1,2]) -- initial case based on an array
    UNION -- regular union because we only want new values
        SELECT child.col1, child.col2
            FROM aaa, mytable AS child -- join the source table to the result
            WHERE aaa.col2 = child.col1 -- the recursion condition
) 
SELECT * FROM aaa; 
```

# asp.net-mvc-3 - 如何在 MVC3 中发布 aspx 页面参数？

> ID：12459867
> 
> 赞同：0
> 
> 时间：2012-09-17T13:07:37.383
> 
> 标签：asp.net-mvc-3

如何将 aspx 页面的参数发布到 aspx 方法。不在 MVC 控制器方法中。这是我的视图，名称为 ViewController.ascx：

```
 <%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
        <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
        <html xmlns="http://www.w3.org/1999/xhtml">

        <script runat="server">

            protected void btnSubmit_Click(object sender, EventArgs e)
            {
     string postData = String.Empty;

            postData += "pan=" + txtCardNumber.Text + "&";
}

</head>
<body>
    <form id="paymentForm" runat="server">
    <center>
 <table class="tableClass">
            <tr class="trHeader">
                <td>
                    Kredi Kartı Numarası:
                </td>
                <td>
                    <asp:TextBox ID="txtCardNumber" runat="server" MaxLength="20" AutoCompleteType="None"></asp:TextBox>
                    <asp:RequiredFieldValidator ID="rfvCreditCardNumber" runat="server" ControlToValidate="txtCardNumber"
                        Display="Dynamic" Text="*"></asp:RequiredFieldValidator>
                </td>
            </tr>
    <tr>
                <td align="center" colspan="2">
                    <asp:Button ID="btnSubmit" runat="server" CssClass="buttonClass" Text="Gönder" CausesValidation="true"
                        OnClick="btnSubmit_Click" />
                </td>
            </tr>
            </table>
</body>
</html> 
```

因此，当我发布数据时，我的参数转到控制器操作方法，如何将这些参数发送到 aspx 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:12:11.977

如果您在使用 webforms 和 MVC 的混合项目中工作，那么要忽略对 aspx 页面的请求，您必须在 Global.asax.cs 中定义一个忽略路由。

```
routes.IgnoreRoute("{*allaspx}", new {allaspx=@".*\.aspx(/.*)?"}); 
```

在映射所有路线之前。

# php - PHP：在编写将所有 GET 变量存储在数组中并返回它的方法时需要帮助

> ID：12459869
> 
> 赞同：0
> 
> 时间：2012-09-17T13:07:40.957
> 
> 标签：php, get

所以我正在构建一个帮助类，它将存储来自 url 的所有 get 变量，删除尾随空格并将其返回，以便其他方法可以使用它们。

问题是只有第一个值被存储。

网址如下所示： [https ://pay.paymentgateway.com/index.php?name=xyz&amount=10.30&checksum=abcd](https://pay.paymentgateway.com/index.php?name=xyz&amount=10.30&checksum=abcd)

我的代码输出： Array ( [name] => xyz )

我的代码：

```
class helperboy
{

  protected $cleanvariables = array(); 

  public function store_get_variables($_GET)
    {

       foreach ($_GET as $key => $value)
          {
            return $this->cleanvalues[$key] = trim($value);
           }
    }

  protected function display_variables()
    {
      echo "<pre>";
      print_r($this->cleanvalues);
    }
 } 
```

我知道我在做一些愚蠢的事情，我将不胜感激。

另外，我如何在我的其他方法中访问这样的特定变量。：

```
$this->cleanvalues['name'];
$this->cleanvalues['amount'];
$this->cleanvalues['checksum']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:12:43.307

你的退货声明是问题....

```
class helperboy
{

  protected $cleanvariables = array(); 

  public function store_get_variables($_GET)
  {

   foreach ($_GET as $key => $value)
      {
         $this->cleanvalues[$key] = trim($value);
       }
   return $this->cleanvalues;
  }

 protected function display_variables()
  {
  echo "<pre>";
  print_r($this->cleanvalues);
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:12:15.790

嗯，问题是……

```
public function store_get_variables($_GET)
{
  foreach ($_GET as $key => $value)
  {
    return $this->cleanvalues[$key] = trim($value);
  }
} 
```

...这里的循环将只执行一次。一旦函数命中`return`语句，它将中止此循环 - 并立即返回。

然而，我认为这里存在一些更大的问题。首先，我不赞成某个无所不能的助手类的想法，它了解每个人的一切。如果您打算使用一些`cleaner`请求参数，为什么不只是“对象化”它：

```
class My_Http_Request
{
  private $request;
  protected function fillGetParams() {
    $this->request['get'] = array_map('trim', $_GET);
  }
  public function getTrimmedParam($name) {
    return $this->request['get'][$name];
  }
  public function __construct() {
    $this->fillGetParams();
  }
} 
```

这只是一个想法，而不是现成的实现（不检查丢失的元素，如果在没有任何参数的情况下调用 'getTrimmedParam' 方法，则不返回所有参数等。

# javascript - 从 Chrome 扩展程序触发本机键盘事件

> ID：12459874
> 
> 赞同：2
> 
> 时间：2012-09-17T13:07:54.140
> 
> 标签：javascript, dom, javascript-events, google-chrome-extension

Facebook 有文本区域，它们在其中扩展/缩小到其中的文本大小。在我的 Chrome 扩展程序中，我将 textarea 中的文本更改为多行。但是，textareas 扩展/收缩方法仅适用于键盘事件，所以我必须触发一个。

```
var event = document.createEvent('KeyboardEvent');

event.initEvent('keyup', true, true, window, false, false, false, false, 38, 38);
this.dispatchEvent(event); // this is the textarea 
```

（它对所有的 keyup、keydown、keypress 执行此操作）

但这不起作用。现在，我知道它为什么不起作用，但不知道如何解决它。我已将处理程序附加到元素以查看发生了什么：

```
$('[role=dialog] .MessagingComposerForm textarea').on('keyup', function(e) {
    console.log(e);
}); 
```

当 Chrome 扩展程序触发它的 keyup 事件时，我在控制台中看到的对象是一个普通的 Event 对象，除了两件事：keyCode=0 和 view=null。

当我通过按键盘上的一个键触发 keyup 事件时，我可以看到 keyCode=38 和 view=Window。

有谁知道如何做到这一点？

添加：

我发现了一些东西。如果我在调度事件之前对其进行控制台记录，它仍然不包含正确的信息。这里：

```
var event = document.createEvent('KeyboardEvent');

event.initKeyboardEvent('keydown', true, true, window, false, false, false, false, 65, 65);
event.keyCode = 65;
event.which = 65;
event.charCode = 65;

console.log(event);

this.dispatchEvent(event); // this is the textarea 
```

输出这个对象：

```
KeyboardEvent: {
    ...
    charCode: 0,
    keyCode: 0,
    view: Window,
    which: 0
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T02:39:16.963

这是 WebKit 中的一个错误：[https ://bugs.webkit.org/show_bug.cgi?id=16735](https://bugs.webkit.org/show_bug.cgi?id=16735)

30个字符

# sql - 加入sql还是ms-access？

> ID：12459875
> 
> 赞同：1
> 
> 时间：2012-09-17T13:07:58.130
> 
> 标签：sql, ms-access, join

SQL 或 ms-access 格式有一个这样的表。

样本

```
ID  ID2 name    class   example
1   10  John    main    
2   10          
3   10          
4   10                  ~ is look at me.
5   20  Candice main    
6   20          
7   20                  ~ is in Japan.
8   20                  ~ is reading a book.
9   20 
```

我需要将示例字段（A）中的“~”替换为与 A 具有相同 ID2 且 class =“main”的名称字段的值。如何制作连接语法？

结果

```
ID  ID2 name    class   example
1   10  John    main    
2   10          
3   10          
4   10                  John is look at me.
5   20  Candice main    
6   20          
7   20                  Candice is in Japan.
8   20                  Candice is reading a book.
9   20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:15:43.600

我认为您的表配置不正确。

您使用的 ID 字段的值在表上重复的事实表明数据库设计有些糟糕。

我认为您可能会得到更好的结果，将数据拆分到两个表中，一个带有示例，另一个带有“主”类。然后，您将能够通过使用 ID2 字段的简单连接来连接两个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:17:17.127

```
select m.[name] & replace(b.example, "~", "") as combined
from sample as m
inner join sample as b on m.id2 = b.id2
where m.[class] = "main"
and b.example not null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T08:48:14.577

尽管数据结构非常糟糕（无论出于何种原因），但要回答您的问题，您可以这样做：

```
SELECT 
   T1.[ID],
   T1.[ID2],
   T1.[name],
   T1.[class],
   iif(not isnull(T1.[Example]) and not isnull(T2.[Name]), Replace(T1.[Example], "~", T2.[Name]), null) As [Example]
FROM
   Data T1
LEFT JOIN Data T2 ON (T1.[ID2] = T2.[ID2] AND T2.[Class]="main") 
```

这依赖于这样一个假设：对于 ID2 的每个唯一值，只有一个 class=main 的记录（否则您将获得重复的行）。

如果不需要使用 JOIN，另一种方法是：

```
SELECT 
   [ID],
   [ID2],
   [name],
   [class],
   (iif(not isnull([example]), Replace([example], "~", nz((select top 1 [name] from Data T2 where T2.ID2 = T1.ID2 and T2.[class]="main" order by T2.[ID2]),"")),null)) as [ExampleNew]
FROM Data T1 
```

# ruby - 在指定目录创建文件

> ID：12459879
> 
> 赞同：7
> 
> 时间：2012-09-17T13:08:12.877
> 
> 标签：ruby, file-io

如何在特定目录中创建新文件。我创建了这个类：

```
class FileManager

    def initialize()

    end

    def createFile(name,extension)
        return File.new(name <<"."<<extension, "w+")
    end
end 
```

我想指定创建文件的目录（路径）。如果这个不存在，他将被创造出来。那么我是否必须在创建文件后立即使用[此处](https://stackoverflow.com/questions/403239/how-do-i-move-a-file-with-ruby)`fileutils`显示的内容，还是可以在创建时直接指定创建文件的位置？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-17T13:18:36.437

以下代码检查您传入的目录是否存在（使用从路径中提取目录`File.dirname`），如果不存在则创建它。然后它像以前一样创建文件。

```
require 'fileutils'

def create_file(path, extension)
  dir = File.dirname(path)

  unless File.directory?(dir)
    FileUtils.mkdir_p(dir)
  end

  path << ".#{extension}"
  File.new(path, 'w')
end 
```

# sql - 选择引发 ORA-01858 异常

> ID：12459880
> 
> 赞同：0
> 
> 时间：2012-09-17T13:08:17.790
> 
> 标签：sql, oracle, oracle10g

使用以下查询，将引发 Oracle 异常。但是，我不明白为什么。任何人都可以解释一下吗？

```
select visit_id, to_date(response, 'DD/MM/YYYY') as convertedDate from 
(
select *
from dat_results_ext
where item_name = 'CALLBACKDATE'
)
where to_date(response, 'DD/MM/YYYY')  > sysdate 
```

我理解这个例外意味着它试图转换“响应”字段，但它遇到了一个非数字。问题是它应该带回的行具有正确格式的所有内容。

'response' 字段是一个 varchar 字段，但所有以 'item_name = 'CALLBACKDATE' 子句返回的行都是正确的格式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:53:29.577

优化器可以在尝试找到最佳执行计划之前重写您的查询。在您的情况下，由于您没有阻止优化器执行此操作的提示，它可能会[取消您的子查询](http://docs.oracle.com/cd/E11882_01/server.112/e26088/queries008.htm#SQLRF52358)并将您的查询重写为：

```
SELECT *
  FROM dat_results_ext
 WHERE item_name = 'CALLBACKDATE'
   AND to_date(response, 'DD/MM/YYYY') > sysdate 
```

您无法控制 WHERE 子句中语句的评估顺序，因此 Oracle 可能`to_date`首先在不可转换为日期的行上评估函数，因此出现错误。

我看到两个选项可以强制 Oracle 按您想要的顺序评估语句：

1.  使用行号。Rownum 将实现子查询，防止 Oracle 将其与外部查询合并：

    ```
    SELECT visit_id, to_date(response, 'DD/MM/YYYY') AS convertedDate
      FROM (SELECT r.*, 
                   rownum /* will materialize the subquery */
              FROM dat_results_ext r
             WHERE item_name = 'CALLBACKDATE')
     WHERE to_date(response, 'DD/MM/YYYY') > sysdate 
    ```

2.  使用[`NO_MERGE`提示](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#SQLRF50507)：

    ```
    SELECT visit_id, to_date(response, 'DD/MM/YYYY') AS convertedDate
      FROM (SELECT /*+ NO_MERGE */ *
              FROM dat_results_ext
             WHERE item_name = 'CALLBACKDATE')
     WHERE to_date(response, 'DD/MM/YYYY') > sysdate 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:26:15.617

The TO_DATE clause has to be evaluated before the truth of the WHERE clause can be determined. If you have values of response that can't be evaluated in the TO_DATE function, you'll see the error.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:32:11.020

准确地说，这是因为 的某些值`response`与 的格式掩码不匹配造成的`DD/MM/YYYY`。例如，如果您的会话设置为默认日期格式`DD-MON-YY`，请执行以下操作，您将收到错误消息：-

```
select to_date('17/SEP/2012','DD/MM/YYYY') from dual;
ERROR:
ORA-01858: a non-numeric character was found where a numeric was expected 
```

由于您在月份字段中传递了一个字符，而 Oracle 需要一个数字。

# oracle - Oracle：在可更新视图上插入

> ID：12459883
> 
> 赞同：-2
> 
> 时间：2012-09-17T13:08:20.393
> 
> 标签：oracle, view

是否可以使用视图来修改连接中的一个或多个表？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:41:56.177

是的，它是，但有限制和警告。一般只能更新关系`many`表。`one to many`

您应该阅读 oracle 文档中的“保留密钥”。 [Ask Tom 上的这个问题](http://asktom.oracle.com/pls/asktom/f?p=100:11%3a%3a%3a%3a%3aP11_QUESTION_ID:548422757486)让我们一窥可更新视图的世界。

就个人而言，我一直远离更新视图。

# c# - Fluent NHibernate 映射到 Oracle 11G 和 SQLite

> ID：12459889
> 
> 赞同：0
> 
> 时间：2012-09-17T13:08:40.647
> 
> 标签：c#, sqlite, nhibernate, oracle11g, fluent-nhibernate-mapping

在数据库中已经存在的表上，我们正在尝试为 CreationDate 添加一列

```
mapping.Map(x => x.CreationDate)
            .Not.Nullable()
            .Default("to_date('01-01-0001','dd-MM-yyyy')") 
```

这在 oracle 上工作得很好，但 SQLite 无法理解这一点，这是完全正常的，因为它不知道 to_date() 函数。

如果我使用

```
DateTime.MinValue.ToString() 
```

用于带或不带特定格式的默认值。然后它将在 SQLite 中工作，但在 Oracle 中不起作用。

有人知道解决此问题的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:19:00.283

省略默认值并编写约定

```
class CreationDateConvention  : IPropertyConvention
{
    public CreationDateConvention(string default)
    {
        _default = default;
    }

    public void Apply(... instance)
    {
        if (instance.Name == "CreationDate")
            instance.Default(_default)
    }
}

// and while configuring
...FluentMappings.AddFromAssemblyOf<>().Conventions.Add(new CreationDateConvention(isOracle ? "to_date..." : Datetime.Minvalue.ToString()) 
```

# php - 旧 php 版本的 password_compat

> ID：12459896
> 
> 赞同：12
> 
> 时间：2012-09-17T13:09:09.907
> 
> 标签：php, security, hash, passwords, php-password-hash

PHP 5.5 将[支持](https://wiki.php.net/rfc/password_hash)密码功能`password_hash()`和`password_verify()`. 还有一个[文件](https://github.com/ircmaxell/password_compat)可以在 >5.3.7 中添加此功能。

我的问题是我目前正在运行 debian 包 5.3.3-7+squeeze14。

有没有办法让这个函数在这个旧的 PHP 版本中可用？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-17T14:22:28.330

所以，在开始之前，让我先澄清一件事。我是相关库的作者（以及 5.5 的补丁）。

话虽如此，其他人所说的绝对正确。5.3.7 是最低版本的原因是之前的所有版本在 bcrypt 实现中都有一个错误，这可能导致使用高字节字符（代码点 >= 128）的密码中的熵丢失。

这就是 5.3.7 成为最低版本的主要原因。我**强烈**建议至少升级到 5.3.7，但最好是最新的（在不太旧的版本中发现了许多重要的安全问题）。

现在，如果您卡在较低的版本上，该怎么办？您*可以*分叉库并调整`$2y$`为`$2a$`. 这至少会让你工作。以这种方式生成的密码将可移植到未来的版本中（该库旨在能够验证旧`crypt()`密码）。

但是，我建议您不要这样做。只需升级到较新版本的 PHP。这并不难（有来自[dotdeb](http://www.dotdeb.org/instructions/)的 deb 包可以为您完成）。

如果您真的卡在旧版本上，我建议您使用为此设计的库。像我的[PasswordLib](https://github.com/ircmaxell/PHP-PasswordLib)或[PhPass 之](http://www.openwall.com/phpass/)类的东西（请注意，您应该只使用该库的链接版本，github 上还有其他几个完全不同的版本）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T13:27:14.043

将 5.3.7 设为最低版本的原因是，`crypt()`在早期版本的 PHP 中使用 bcrypt 的函数输出的结果与当前版本大不相同。

您可以自己查看结果：http: [//3v4l.org/3cAZf](http://3v4l.org/3cAZf)

使用以下代码：

```
<?php
var_dump(crypt('rasmuslerdorf', '$2y$07$usesomesillystringforsalt$')); 
```

### 5.3.7 - 5.3.16、5.4.0 - 5.4.6 的输出

> 字符串（60）“$2y$07$usesomesillystringfore2uDLvp1Ii2e./U9C8sBjqp8I90dH6hi”

### 4.3.0 - 4.3.11、4.4.0 - 4.4.9、5.0.0 - 5.0.5、5.1.0 - 5.1.6、5.2.0 - 5.2.17、5.3.2 - 5.3.6 的输出

> 字符串（13）“$25di0cl7EYZA”

### 5.3.0 - 5.3.1 的输出

> 字符串（13）“$2v4FKr10WzJ2”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T13:27:54.053

`2y`需要 PHP >= 5.3.7，因为该版本中包含了固定的 bcrypt 算法。对于字节超出 US-ASCII 范围的密码，之前的`2a`算法被破坏了。

您的 5.3.3-7+squeeze14 版本很可能也包含此修复程序。发行版通常保留在某个特定版本，但向后移植安全修复程序（例如这个）。

因此，您应该只检查该算法是否可用，如果可用，您可以安全地使用 password_compat。

包的[更新日志](http://packages.debian.org/changelogs/pool/main/p/php5/php5_5.3.3-7+squeeze14/changelog)有点不清楚。它提到`2x`已添加，但没有说明是否`2y`也添加了（但可能是）。

# ios - 如何在iphone中相对于屏幕定位标签

> ID：12459900
> 
> 赞同：1
> 
> 时间：2012-09-17T13:09:18.427
> 
> 标签：ios, ios5, ios4, ios6

我有一个横向模式的屏幕。例如，我通过代码添加了 3 个标签。

```
 UILabel *x1 = [UILabel allow]initwithframe:CGRectMake(10, 150, 100, 40)];
 UILabel *x2 = [UILabel allow]initwithframe:CGRectMake(110, 150, 100, 40)];
 UILabel *x2 = [UILabel allow]initwithframe:CGRectMake(210, 150, 100, 40)]; 
```

现在使用 iOS6 和 4 英寸屏幕，标签非常靠左。

有没有一种巧妙的方法可以通过一些百分比技巧相对对齐标签，这将在 iphone 4 和 iphone 5 中相应地定位我的标签？

请注意上面只是一个例子，我实际上有很多标签需要相对于彼此和屏幕大小进行定位和间隔。

**笔记**

我也不想调整标签的大小，我想将它们隔开并相应地移动它们

# moq - 通过带有 AutoMoq 的 AutoFixture 注入的模拟对象，意外行为

> ID：12459901
> 
> 赞同：1
> 
> 时间：2012-09-17T13:09:21.797
> 
> 标签：moq, autofixture

我刚刚使用 AutoFixture 创建了我的第一个测试。SUT 具有以下构造函数。

```
public LoggingService(
    IClientDataProvider clientDataProvider, ... other dependencies...) 
```

测试设置具有以下代码。

```
var fixture = new Fixture().Customize(new AutoMoqCustomization());

string ipAddress = "whatever";// fixture.CreateAnonymous<string>();

var clientDataProviderMock = fixture.Freeze<Mock<IClientDataProvider>>();
clientDataProviderMock.Setup(cdp => cdp.IpAddress).Returns(ipAddress);

LoggingService sut = fixture.CreateAnonymous<LoggingService>(); 
```

现在，当我检查 的内容时`sut`，我看到`IpAddress`注入的实例的属性`IClientDataProvider`返回 null 而不是“whatever”。

我做错什么了？

* * *

我将服务和必要的接口复制到一个空项目中，然后模拟按预期工作。

作为实际项目中服务的构造函数参数类型的接口在 3 个单独的程序集中定义，这些程序集具有进一步的依赖关系。我在测试开始时遇到了几个意外的“无法加载程序集”错误，因为那些直接引用的程序集需要更多的程序集。所以这似乎是一个程序集加载问题。

但是，我尝试了测试的变体，手动创建 SUT 实例，使用 Moq 手动创建模拟对象，测试按预期工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:45:05.120

解决方案非常令人惊讶。在创建单元测试项目时，我首先添加了对 Moq 4.0 的引用。后来添加了 AutoFixture，因为它似乎需要 Moq 3.1，所以我将该 dll 直接复制到 bin\Debug。但是，项目文件中对应的 HintPath 元素仍然指向 4.0 dll。一旦我将 HintPath 更改为指向 Moq 3.1 所在的位置，测试就开始正常工作。所以马克的建议是对的，但症状却大不相同。

# python - 如何将 MPI 信息传递给 python 中的 ctypes

> ID：12459906
> 
> 赞同：4
> 
> 时间：2012-09-17T13:09:35.367
> 
> 标签：python, mpi, ctypes

我的动机是将 MPI 信息从 python 有效地传递给通过 ctypes 调用的 C 函数。我在 python 中使用 mpi4py 进行 MPI 绑定。我想通过一个用 C 编写并通过 python 中的 ctypes 调用的简单示例 MPI 代码来学习它。我已经详细说明了在下面运行时遇到的步骤和错误。

**C 代码**[ *passMpi4Py.c* ]

```
#include <stdio.h>
#include <mpi.h>

void sayhello(MPI_Comm comm)
{
  int size, rank;
  MPI_Comm_size(comm, &size);
  MPI_Comm_rank(comm, &rank);
  printf("Hello, World! "
         "I am process %d of %d.\n",
         rank, size);
} 
```

我用gcc/openmpi-1.6编译了上面的c代码如下：

*mpicc -shared -Wl,-soname,passMpi4Py -o passMpi4Py.so -fPIC passMpi4Py.c*

**Python 包装器**[ *passMpi4PyWrapper.py* ]

```
import ctypes
from mpi4py import MPI
testlib = ctypes.CDLL('path-to-file/passMpi4Py/passMpi4Py.so')

testlib.sayhello(MPI.COMM_WORLD) 
```

当我尝试使用运行上述代码时

*mpirun -np 4 python passMpi4PyWrapper.py*

我收到以下错误

```
Traceback (most recent call last):
Traceback (most recent call last):
  File "passMpi4PyWrapper.py", line 5, in <module>
Traceback (most recent call last):
  File "passMpi4PyWrapper.py", line 5, in <module>
  File "passMpi4PyWrapper.py", line 5, in <module>
Traceback (most recent call last):
    testlib.sayhello(MPI.COMM_WORLD)
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: Don't know how to convert parameter 1
    testlib.sayhello(MPI.COMM_WORLD)
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: Don't know how to convert parameter 1
    testlib.sayhello(MPI.COMM_WORLD)
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: Don't know how to convert parameter 1
  File "passMpi4PyWrapper.py", line 5, in <module>
    testlib.sayhello(MPI.COMM_WORLD)
ctypes.ArgumentError: argument 1: <type 'exceptions.TypeError'>: Don't know how to convert parameter 1 
```

**更新：**

在 C 程序 MPI 函数中使用 *MPI_COMM_WORLD* 而不是*comm*可以帮助我消除错误。但是我仍然想知道这是否是将 MPI 信息传递给 C 程序的最佳方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T05:47:12.457

您缺少将 Python 的 MPI.COMM_WORLD（它是 mpi4py 的 Comm 类的一个实例）映射到 MPI_COMM_WORLD（它是一个`int`句柄）的方法。这可以通过使用 SWIG 生成包装器来完成。[mpi4py 教程](http://mpi4py.scipy.org/docs/usrman/tutorial.html#wrapping-with-swig)与您的示例基本相同，但添加了 SWIG 接口文件。

如果您不想使用 SWIG，可以在 C 代码中执行转换。如果您查看 SWIG 示例正在导入的文件 mpi4py.i，您可以看到转换是使用`PyMPIComm_Get`. `mpi4py`source 附带[一个不使用 SWIG 的示例](https://bitbucket.org/mpi4py/mpi4py/src/73129d2c792291a735c47bca51684ae1d524a4aa/demo/wrap-c/?at=master)。

# python - 如何使用多个特征进行 NLTK 文本分类

> ID：12459908
> 
> 赞同：0
> 
> 时间：2012-09-17T13:09:36.347
> 
> 标签：python, nlp, nltk

我正在尝试调整此代码：[http](http://snipperize.todayclose.com/snippet/py/Use-NLTK-Toolkit-to-Classify-Documents--5671027/) ://snipperize.todayclose.com/snippet/py/Use-NLTK-Toolkit-to-Classify-Documents--5671027/以接受一些附加功能。它似乎是根据为单独的信息类别提供单独的文件来确定其类别，这很好。但我还希望能够添加一些额外的数据供它查找。需要修改什么？有什么好的资源吗？关于 NLTK/Python 的书没有解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:23:11.063

你说的功能是什么意思？在我看来，您只想添加更多数据，而不是功能。

如果您想考虑新功能，您必须根据您的需要修改提取词。

如果您只需要更多可能存储在不同文件中的数据，您应该编辑主代码以考虑文件名集而不是单个文件的功能。这当然意味着对第 74 行的循环进行修改。您必须添加另一个内部循环来迭代集合中的所有文件名

# web-services - 如何使用 UML 绘制 Web 服务

> ID：12459912
> 
> 赞同：3
> 
> 时间：2012-09-17T13:09:46.133
> 
> 标签：web-services, uml, soa, class-diagram

使用 UML 类图表示 Web 服务接口的最佳和最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:52:39.817

好吧，这只是一个帮助传递一点的图表，所以一切都很清楚。一种选择是使用构造型将“合同”放在接口上并将“Web 服务”放在类上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:09:59.417

我会使用[序列图](http://en.wikipedia.org/wiki/Sequence_diagram)而不是[类图](https://en.wikipedia.org/wiki/Class_diagram)。

[使用 UML 的 Web 服务](http://www.ibm.com/developerworks/webservices/library/ws-restemp/)

# javascript - 为图像平移添加缓动

> ID：12459913
> 
> 赞同：0
> 
> 时间：2012-09-17T13:09:50.637
> 
> 标签：javascript, html, css

我正在使用一些 JavaScript 和 jQuery（带有缓动插件）来创建一个虚拟游览；真的只是一个可以左右平移的长图像。我发现这是完美的原因：http: [//jsfiddle.net/MvRdD/1/](http://jsfiddle.net/MvRdD/1/)。有没有办法给动画添加缓动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:30:12.367

[http://jsfiddle.net/ARTsinn/MvRdD/890/](http://jsfiddle.net/ARTsinn/MvRdD/890/)

```
$(document).ready(function() {
    $.getScript("https://raw.github.com/danro/easing-js/master/easing.min.js");
    var animateTime = 10,
        offsetStep = 5,
        scrollWrapper = $('#wrap');

    //event handling for buttons "left", "right"
    var aktiv;
    $('.bttL, .bttR').mousedown(function(e) {
        if (e.target.className === 'bttR') {
            aktiv = window.setInterval(function() {
                scrollWrapper.animate({
                    scrollLeft: '+=' + 20
                }, {
                    duration: 600,
                    queue: false,
                    easing: 'easeOutCirc'
                });
            }, 10);
        } else if (e.target.className === 'bttL') {
            aktiv = window.setInterval(function() {

                scrollWrapper.animate({
                    scrollLeft: '-=' + 20
                }, {
                    duration: 1200,
                    queue: false,
                    easing: 'easeOutCirc'
                });
            }, 10);

        }
    }).mouseup(function() {
        window.clearInterval(aktiv);
    });

    scrollWrapper.mousedown(function(event) {
        $(this).data('down', true).data('x', event.clientX).data('scrollLeft', this.scrollLeft);
        return false;
    }).mouseup(function(event) {
        $(this).data('down', false);
    }).mousemove(function(event) {
        if ($(this).data('down')) {
            $(this).stop(false, true).animate({
                scrollLeft: $(this).data('scrollLeft') + ($(this).data('x') - event.clientX) * 2
            }, {
                duration: 600,
                queue: false,
                easing: 'easeOutCirc'
            });
        }
    }).mousewheel(function(event, delta) {
        $(this).stop(false, true).animate({
            scrollLeft: '-=' + delta * 60
        }, {
            duration: 400,
            queue: false,
            easing: 'easeOutCirc'
        });
        event.preventDefault();
    }).css({
        'overflow': 'hidden',
        'cursor': '-moz-grab'
    });
}); 
```

# cxf - 动态调用 Web 服务的简单方法（无需 JDK 或代理类）

> ID：12459914
> 
> 赞同：4
> 
> 时间：2012-09-17T13:09:53.337
> 
> 标签：cxf, java, webservice-client, proxy-classes

在 Python 中，我可以很容易地使用 Web 服务：

```
from suds.client import Client
client = Client('http://www.example.org/MyService/wsdl/myservice.wsdl') #create client
result = client.service.myWSMethod("Bubi", 15)  #invoke method
print result    #print the result returned by the WS method 
```

**我想用Java实现这样一个简单的用法。**

使用 Axis 或 CXF，您必须创建一个 Web 服务客户端，即复制所有 Web 服务方法的包，以便我们可以像调用普通方法一样调用它们。我们称之为***代理类***；通常它们是由 wsdl2java 工具生成的。

有用且用户友好。但是任何时候我添加/修改一个 Web 服务方法并且我想在客户端程序中使用它，我都需要**重新生成代理类**。

所以我找到了**CXF`DynamicClientFactory`**，这种技术避免了使用代理类：

```
import org.apache.cxf.endpoint.Client;
import org.apache.cxf.endpoint.dynamic.DynamicClientFactory;
//...
//create client
DynamicClientFactory dcf = DynamicClientFactory.newInstance();
Client client = dcf.createClient("http://www.example.org/MyService/wsdl/myservice.wsdl");
//invoke method
Object[] res = client.invoke("myWSMethod", "Bubi");
//print the result
System.out.println("Response:\n" + res[0]); 
```

但不幸的是，它会创建和编译代理类运行时，因此**需要在生产机器上安装 JDK**。我必须避免这种情况，或者至少我不能依赖它。

**我的问题**：

是否有另一种方法可以在 Java 中动态调用 Web 服务的任何方法，而不需要在运行时使用 JDK 并且不生成“静态”代理类？也许有不同的图书馆？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T15:54:26.260

我知道这是一个非常古老的问题，但如果您仍然感兴趣，您可以使用**soap-ws** github 项目：[https ://github.com/reficio/soap-ws](https://github.com/reficio/soap-ws)

在这里，您有一个非常简单的示例用法：

```
Wsdl wsdl = Wsdl.parse("http://www.webservicex.net/CurrencyConvertor.asmx?WSDL");

SoapBuilder builder = wsdl.binding()
    .localPart("CurrencyConvertorSoap")
    .find();
SoapOperation operation = builder.operation()
    .soapAction("http://www.webserviceX.NET/ConversionRate")
    .find();
Request request = builder.buildInputMessage(operation)

SoapClient client = SoapClient.builder()
    .endpointUrl("http://www.webservicex.net/CurrencyConvertor.asmx")
    .build();
String response = client.post(request); 
```

如您所见，它非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T21:41:03.500

在 CXF 3.x 中，这可以通过[StaxDataBinding 实现](https://cxf.apache.org/javadoc/latest-3.0.x/org/apache/cxf/databinding/stax/StaxDataBinding.html)。请按照以下步骤获取基础知识。当然，这可以根据您的需要进行增强。

1.  创建 StaxDataBinding 如下所示。请注意，下面的代码可以增强您的复杂性。

    ```
    class StaxDataBinding extends AbstractInterceptorProvidingDataBinding {

        private XMLStreamDataReader xsrReader;
        private XMLStreamDataWriter xswWriter;

        public StaxDataBinding() {
            super();
            this.xsrReader = new XMLStreamDataReader();
            this.xswWriter = new XMLStreamDataWriter();
            inInterceptors.add(new StaxInEndingInterceptor(Phase.POST_INVOKE));
            inFaultInterceptors.add(new StaxInEndingInterceptor(Phase.POST_INVOKE));

            inInterceptors.add(RemoveStaxInEndingInterceptor.INSTANCE);
            inFaultInterceptors.add(RemoveStaxInEndingInterceptor.INSTANCE);
        }

        static class RemoveStaxInEndingInterceptor
                extends AbstractPhaseInterceptor<Message> {
            static final RemoveStaxInEndingInterceptor INSTANCE = new RemoveStaxInEndingInterceptor();

            public RemoveStaxInEndingInterceptor() {
                super(Phase.PRE_INVOKE);
                addBefore(StaxInEndingInterceptor.class.getName());
            }

            public void handleMessage(Message message) throws Fault {
                message.getInterceptorChain().remove(StaxInEndingInterceptor.INSTANCE);
            }
        }

        public void initialize(Service service) {
            for (ServiceInfo serviceInfo : service.getServiceInfos()) {
                SchemaCollection schemaCollection = serviceInfo.getXmlSchemaCollection();
                if (schemaCollection.getXmlSchemas().length > 1) {
                    // Schemas are already populated.
                    continue;
                }
                new ServiceModelVisitor(serviceInfo) {
                    public void begin(MessagePartInfo part) {
                        if (part.getTypeQName() != null
                                || part.getElementQName() != null) {
                            return;
                        }
                        part.setTypeQName(Constants.XSD_ANYTYPE);
                    }
                }.walk();
            }
        }

        @SuppressWarnings("unchecked")
        public <T> DataReader<T> createReader(Class<T> cls) {
            if (cls == XMLStreamReader.class) {
                return (DataReader<T>) xsrReader;
            }
            else {
                throw new UnsupportedOperationException(
                        "The type " + cls.getName() + " is not supported.");
            }
        }

        public Class<?>[] getSupportedReaderFormats() {
            return new Class[] { XMLStreamReader.class };
        }

        @SuppressWarnings("unchecked")
        public <T> DataWriter<T> createWriter(Class<T> cls) {
            if (cls == XMLStreamWriter.class) {
                return (DataWriter<T>) xswWriter;
            }
            else {
                throw new UnsupportedOperationException(
                        "The type " + cls.getName() + " is not supported.");
            }
        }

        public Class<?>[] getSupportedWriterFormats() {
            return new Class[] { XMLStreamWriter.class, Node.class };
        }

        public static class XMLStreamDataReader implements DataReader<XMLStreamReader> {

            public Object read(MessagePartInfo part, XMLStreamReader input) {
                return read(null, input, part.getTypeClass());
            }

            public Object read(QName name, XMLStreamReader input, Class<?> type) {
                return input;
            }

            public Object read(XMLStreamReader reader) {
                return reader;
            }

            public void setSchema(Schema s) {
            }

            public void setAttachments(Collection<Attachment> attachments) {
            }

            public void setProperty(String prop, Object value) {
            }
        }

        public static class XMLStreamDataWriter implements DataWriter<XMLStreamWriter> {
            private static final Logger LOG = LogUtils
                    .getL7dLogger(XMLStreamDataWriter.class);

            public void write(Object obj, MessagePartInfo part, XMLStreamWriter writer) {
                try {
                    if (!doWrite(obj, writer)) {

                        // WRITE YOUR LOGIC HOW you WANT TO HANDLE THE INPUT DATA
                        //BELOW CODE JUST CALLS toString() METHOD
                        if (part.isElement()) {
                            QName element = part.getElementQName();
                            writer.writeStartElement(element.getNamespaceURI(),
                                    element.getLocalPart());
                            if (obj != null) {
                                writer.writeCharacters(obj.toString());
                            }
                            writer.writeEndElement();
                        }
                    }
                }
                catch (XMLStreamException e) {
                    throw new Fault("COULD_NOT_READ_XML_STREAM", LOG, e);
                }
            }

            public void write(Object obj, XMLStreamWriter writer) {
                try {
                    if (!doWrite(obj, writer)) {
                        throw new UnsupportedOperationException("Data types of "
                                + obj.getClass() + " are not supported.");
                    }
                }
                catch (XMLStreamException e) {
                    throw new Fault("COULD_NOT_READ_XML_STREAM", LOG, e);
                }
            }

            private boolean doWrite(Object obj, XMLStreamWriter writer)
                    throws XMLStreamException {
                if (obj instanceof XMLStreamReader) {
                    XMLStreamReader xmlStreamReader = (XMLStreamReader) obj;
                    StaxUtils.copy(xmlStreamReader, writer);
                    xmlStreamReader.close();
                    return true;
                }
                else if (obj instanceof XMLStreamWriterCallback) {
                    ((XMLStreamWriterCallback) obj).write(writer);
                    return true;
                }
                return false;
            }

            public void setSchema(Schema s) {
            }

            public void setAttachments(Collection<Attachment> attachments) {
            }

            public void setProperty(String key, Object value) {
            }

        }
    } 
    ```

2.  准备您的输入以匹配预期的输入，如下所示

    ```
    private Object[] prepareInput(BindingOperationInfo operInfo, String[] paramNames,
                String[] paramValues) {
        List<Object> inputs = new ArrayList<Object>();

        List<MessagePartInfo> parts = operInfo.getInput().getMessageParts();
        if (parts != null && parts.size() > 0) {
            for (MessagePartInfo partInfo : parts) {
                QName element = partInfo.getElementQName();
                String localPart = element.getLocalPart();

                // whatever your input data you need to match data value for given element
                // below code assumes names are paramNames variable and value in paramValues
                for (int i = 0; i < paramNames.length; i++) {
                    if (paramNames[i].equals(localPart)) {
                        inputs.add(findParamValue(paramNames, paramValues, localPart));
                    }
                }

            }
        }

        return inputs.toArray();
    } 
    ```

3.  现在设置正确的数据绑定并传递数据

    ```
    Bus bus = CXFBusFactory.getThreadDefaultBus();
    WSDLServiceFactory sf = new WSDLServiceFactory(bus, wsdl);
    sf.setAllowElementRefs(false);
    Service svc = sf.create();

    Client client = new ClientImpl(bus, svc, null,
            SimpleEndpointImplFactory.getSingleton());

    StaxDataBinding databinding = new StaxDataBinding();
    svc.setDataBinding(databinding);
    bus.getFeatures().add(new StaxDataBindingFeature());
    BindingOperationInfo operInfo = ...//find the operation you need (see below)
    Object[] inputs = prepareInput(operInfo, paramNames, paramValues);
    client.invoke("operationname", inputs); 
    ```

4.  如果需要，您可以匹配操作名称，如下所示

    ```
    private BindingOperationInfo findBindingOperation(Service service,
                String operationName) {
        for (ServiceInfo serviceInfo : service.getServiceInfos()) {
            Collection<BindingInfo> bindingInfos = serviceInfo.getBindings();
            for (BindingInfo bindingInfo : bindingInfos) {
                Collection<BindingOperationInfo> operInfos = bindingInfo.getOperations();
                for (BindingOperationInfo operInfo : operInfos) {
                    if (operInfo.getName().getLocalPart().equals(operationName)) {

                        if (operInfo.isUnwrappedCapable()) {
                            return operInfo.getUnwrappedOperation();
                        }

                        return operInfo;
                    }
                }
            }
        }
        return null;
    } 
    ```

# intellij-idea - 防止 Webstorm 中不必要的空白

> ID：12459917
> 
> 赞同：1
> 
> 时间：2012-09-17T13:10:00.173
> 
> 标签：intellij-idea, code-formatting, webstorm

有没有办法删除不必要的空白，例如，当在 Webstorm 中自动格式化 JavaScript 文件时，两个空格而不是一个空格

**前**

```
function   test () {
  return  'test'  ;
} 
```

**后**

```
function test() {
  return 'test';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:00:13.593

目前它的格式为：

```
function test() {
  return  'test';
} 
```

正如我所看到的，唯一的问题是`return`. 我为它创建了一个新问题，请[星/投票](http://youtrack.jetbrains.com/issue/WI-13337)。如果您发现格式化无法按预期工作的其他情况，请随时[直接向 YouTrack 报告](http://youtrack.jetbrains.com/issues/WI#newissue=yes)。

# javascript - 可以直接包含（r.js）优化文件吗？

> ID：12459922
> 
> 赞同：1
> 
> 时间：2012-09-17T13:10:20.300
> 
> 标签：javascript, optimization, requirejs, dynamic-loading, r.js

在优化 require.js 项目（将所有内容都放入一个“大”`.js`文件）之后，有没有办法解决需要包含 require.js 文件（然后只加载一个`.js`文件）并直接加载编译文件的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:57:46.780

[您可以使用像Almond](https://github.com/jrburke/almond)这样的轻量级 AMD 加载程序。无论如何，您仍然需要一个加载器，因为您编译的 JavaScript 仍然使用`define`和`require`.

# android - 我想为按钮设置动画然后更改它的值，但不能在 android 中

> ID：12459923
> 
> 赞同：0
> 
> 时间：2012-09-17T13:10:20.800
> 
> 标签：android, animation

我想为按钮设置动画（即；旋转、平移）然后更改按钮的文本。不幸的是，它总是先更改按钮的文本，然后再做动画。

我怎样才能实现我的目标？

请帮助我

我的代码是这样的；

```
AnimationSet set = new AnimationSet(true);

                    Animation anim1 = new RotateAnimation(0, 360, 500, 750);
                    anim1.setDuration(3000);
                    anim1.setFillAfter(true);
                    set.addAnimation(anim1);

                    Animation anim2 = new RotateAnimation(0, 360, 1024, 824);
                    anim2.setDuration(3000);
                    anim2.setFillAfter(true);
                    set.addAnimation(anim2);

                    anim2.setStartOffset(3000);

                    first.clearAnimation();
                    set.setFillAfter(true);
                    first.startAnimation(set);      

                    numbers[0]=min + (int)(Math.random() * ((max - min) + 1)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:29:22.347

A better solution is to add an AnimationListener to the animation, or if you are on JB use the view property animators and the `withEndAction()` method. You should avoid the old animation framework if possible. It doesn't actually change the properties, it just draw the view with a transformation.

```
set.setAnimationListener(new AnimationListener() {
    public void onAnimationEnd() {
        // ...
    }

    public void onAnimationStart() {
    }

    public void onAnimationRepeat() {
    }
} 
```

But I recommend the view property animations if you can use them. They are much better to work with.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:18:58.003

您的代码启动动画但没有阻塞：一旦启动动画，程序就会继续。

您可以尝试获取处理程序并在正确的时间发布更改文本事件：

```
Handler mHandler=new Handler();
Runnable lRunnable =new Runnable()
{
    public void run() 
    {
    //Your change text code                       
    }
};
mHandler.postDelayed(lRunnable , 3000); // Or any other duration so you have the right effect 
```

# java - 获取当月事件时出现 NullPointerException

> ID：12459924
> 
> 赞同：0
> 
> 时间：2012-09-17T13:10:20.950
> 
> 标签：java, android, events, listview, calendar

我有一个月视图日历应用程序，其中有突出显示的事件。我想使用 ListView 以列表格式显示所有事件。

使用[本教程](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)，我设法实现了适配器。但是，我无法遍历月份来检查哪些日期是假期并将它们显示在列表视图中。

代码：

**片段.java**

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    //initialize calendar 
    .....

   //loop through the month to get the events
    for(int i = 0; i < _calendar.getActualMaximum(Calendar.DAY_OF_MONTH); i++){
            if(isHoliday(day, month, year))
            {
                Log.d("Calendar", "Events");
                CalendarEvents events = new CalendarEvents();
                final ArrayList<Event> e = new ArrayList<Event>();
                e.addAll(events.eventDetails(month, day));

                for (int j = 0; j < e.size(); j++)
                {
                   Event event = e.get(i);
                   summary_data = new Summary[]
                    {
                       new Summary("EVENT 1", "Event")
                    };
                } 
            }
        }

       //this code works:
        /*summary_data = new Summary[]
        {
             new Summary("Cloudy", "Cloudy"),
             new Summary("Showers", "Showers"),
             new Summary("Snow", "Snow"),
             new Summary("Storm", "Storm"),
             new Summary("Sunny", "Sunny")
        };*/

        summaryAdapter = new SummaryAdapter(this.getActivity().getApplicationContext(), R.layout.listview_item_row, summary_data);

        calendarSummary = (ListView) v.findViewById(R.id.calendarSummary);
        calendarSummary.setAdapter(summaryAdapter);
} 
```

**摘要Adapter.java：**

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    SummaryHolder holder = null;

    if(row == null)
    {

        row = mInflater.inflate(layoutResourceId, parent, false);

        holder = new SummaryHolder();
        holder.summaryDate = (TextView)row.findViewById(R.id.summaryDate);
        holder.summaryDetail = (TextView)row.findViewById(R.id.summaryDetail);

        row.setTag(holder);
    }
    else
    {
        holder = (SummaryHolder)row.getTag();
    }

    Summary summary = data[position];
    holder.summaryDate.setText(summary.summaryDate); //throws NullPointerException
    holder.summaryDetail.setText(summary.summaryDetail);

    return row;
} 
```

在`holder.summaryDate.setText(summary.summaryDate);`它抛出`NullPointerException`。

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:26:42.263

Did you debug it? Try to add a break point and double check if all of your variables have been initialized, for what I see I would go straight to the variable "data", check if it has values.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:21:54.893

将验证设置为

```
 if(data != null) {
    Summary summary = data[position];
 } 
```

在列表视图构建期间可能会引发这些错误。

# python - 混合格式 CSV

> ID：12459925
> 
> 赞同：0
> 
> 时间：2012-09-17T13:10:32.997
> 
> 标签：python, regex, csv

我有以下（样本数据）

```
name,phone,"addres 1, address 2",foo,bar 
```

我在这里遇到了一种类似的问题（有解决方案）： [Python Regex - Find numbers with comma in string](https://stackoverflow.com/questions/11870399/python-regex-find-numbers-with-comma-in-string)

我想要的是进行拆分并使数组看起来像

```
['name', 'phone', 'addres 1, address 2' ,'foo', 'bar'] 
```

我对正则表达式并不出色，所以希望有人能提供帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T13:13:32.043

这不是正则表达式形状的钉子，所以请放下那把锤子。Python 有一个用于此类数据的[`csv`模块](http://docs.python.org/library/csv.html)。

```
>>> from cStringIO import StringIO
>>> import csv
>>> data = StringIO('name,phone,"addres 1, address 2",foo,bar')
>>> for row in csv.reader(data):
...     print row
... 
['name', 'phone', 'addres 1, address 2', 'foo', 'bar'] 
```

# postgresql - 双重类型的琐碎订单：性能崩溃

> ID：12459929
> 
> 赞同：1
> 
> 时间：2012-09-17T13:10:47.597
> 
> 标签：postgresql

人物：

*   **id** BIGINT
*   **geo_point** POINT (PostGIS)
*   **stroke_when** TIMESTAMPTZ（索引！）
*   **stroke_when_second**双精度

PostgeSQL 9.1，PostGIS 2.0。

**1.**查询：

```
SELECT ST_AsText(geo_point) 
FROM lightnings 
ORDER BY stroke_when DESC, stroke_when_second DESC 
LIMIT 1 
```

总运行时间：**31100.911 毫秒**！

解释（ANALYZE on、VERBOSE off、COSTS on、BUFFERS on）：

```
Limit  (cost=169529.67..169529.67 rows=1 width=144) (actual time=31100.869..31100.869 rows=1 loops=1)
  Buffers: shared hit=3343 read=120342
  ->  Sort  (cost=169529.67..176079.48 rows=2619924 width=144) (actual time=31100.865..31100.865 rows=1 loops=1)
        Sort Key: stroke_when, stroke_when_second
        Sort Method: top-N heapsort  Memory: 17kB
        Buffers: shared hit=3343 read=120342
        ->  Seq Scan on lightnings  (cost=0.00..156430.05 rows=2619924 width=144) (actual time=1.589..29983.410 rows=2619924 loops=1)
              Buffers: shared hit=3339 read=120342 
```

**2.**选择另一个字段：

```
SELECT id 
FROM lightnings 
ORDER BY stroke_when DESC, stroke_when_second DESC 
LIMIT 1 
```

总运行时间：**2144.057 毫秒**。

解释（ANALYZE on、VERBOSE off、COSTS on、BUFFERS on）：

```
Limit  (cost=162979.86..162979.86 rows=1 width=24) (actual time=2144.013..2144.014 rows=1 loops=1)
  Buffers: shared hit=3513 read=120172
  ->  Sort  (cost=162979.86..169529.67 rows=2619924 width=24) (actual time=2144.011..2144.011 rows=1 loops=1)
        Sort Key: stroke_when, stroke_when_second
        Sort Method: top-N heapsort  Memory: 17kB
        Buffers: shared hit=3513 read=120172
        ->  Seq Scan on lightnings  (cost=0.00..149880.24 rows=2619924 width=24) (actual time=0.056..1464.904 rows=2619924 loops=1)
              Buffers: shared hit=3509 read=120172 
```

**3.**正确优化：

```
SELECT id 
FROM lightnings 
ORDER BY stroke_when DESC 
LIMIT 1 
```

总运行时间：**0.044 毫秒**

解释（ANALYZE on、VERBOSE off、COSTS on、BUFFERS on）：

```
Limit  (cost=0.00..3.52 rows=1 width=16) (actual time=0.020..0.020 rows=1 loops=1)
  Buffers: shared hit=5
  ->  Index Scan Backward using lightnings_idx on lightnings  (cost=0.00..9233232.80 rows=2619924 width=16) (actual time=0.018..0.018 rows=1 loops=1)
        Buffers: shared hit=5 
```

正如您所看到的，尽管当 SQL 优化器使用索引时查询是一个非常原始的查询，但存在两个糟糕且非常不同的冲突：

1.  即使优化器不使用索引，为什么使用 As_Text(geo_point) 而不是 id 需要这么多时间？结果只有一行！
2.  当 ORDER BY 中显示未索引的字段时，无法使用一阶索引。提到在实践中，DB 中每秒只显示几行。

当然，上面是一个简化的查询，是从更复杂的结构中提取的。通常我会按日期范围选择行，应用复杂的过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:30:25.137

PostgreSQL 无法使用您的索引为前两个查询按所需顺序生成值。当两个或更多行具有相同`store_when`的相同时，它们会以任意顺序从索引扫描中返回。要确定行的正确顺序将需要二次排序。因为 PostgreSQL 执行器没有执行二级排序的工具，所以它回退到完全排序方法。

如果您经常需要按该顺序查询表，则将当前索引替换为包含两列的复合索引。

您可以将当前查询转换为仅对 的最大值明确指定二级排序的形式`store_when`：

```
 SELECT ST_AsText(geo_point) FROM lightnings
 WHERE store_when = (SELECT max(store_when) FROM lightnings)
 ORDER BY stroke_when_second DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:27:43.257

第一步可能是：在 {stroke_when, stroke_when_second} 上创建一个复合索引

# java - 通过 Netty 并行发送可能较大的消息

> ID：12459930
> 
> 赞同：1
> 
> 时间：2012-09-17T13:10:48.517
> 
> 标签：java, netty

我想使用 Netty 实现一个服务器/客户端应用程序。例如，假设它需要上传和下载文件并在上传新文件时接收通知。问题是客户端即使在下载（或上传）文件时也必须接收通知。我可以看到几个选项：

1.  仅通过 TCP 发送包含文件 URL 的小消息，通过 HTTP 下载和上传。

2.  通过 TCP 打开多个并行连接，一个用于小消息，一个用于大消息（或一个用于每个大消息）。

3.  编写一个分块处理程序，自动将消息拆分为 64Kb 以下的块（例如），并允许来自不同消息的块交错。从文档来看，似乎[`ChunkedWriteHandler`](http://static.netty.io/3.5/api/org/jboss/netty/handler/stream/ChunkedWriteHandler.html)没有*这样*做。

我在选项 3 中喜欢的是客户端只需要验证一次，不可能一个连接断开而另一个连接被维护，等等。但这合理吗？如果是，这样的解决方案是否已经存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:08:05.863

块只不过是 http 消息，尝试使用一个套接字客户端，它缓冲然后在一个连接中将文件逐块写入 netty，然后使用 netty http 块聚合器处理程序来解码块。客户端实现非常简单。大多数服务器端实现都可以在 org.jboss.netty.example.http.upload 下找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T22:13:45.660

如果您可以同时控制客户端和服务器，请使用 websockets。您可以在其之上自由发明自己的文件传输协议，包括通知和诸如此类的东西。Kermit 使用 websocket ;-)

# php - jqGrid：如何将单一搜索与联合查询一起使用？

> ID：12459934
> 
> 赞同：0
> 
> 时间：2012-09-17T13:10:53.027
> 
> 标签：php, jquery, mysql, jqgrid

我使用 jQgrid 中的 Position 表作为我的主要数据源。

```
Department

id | department
1  | field
2  | IT
3  | Marketing

Position

id | position    | department
5  | interviewee | 1
9  | advertiser  | 3
8  | developer   | 2 
```

当我搜索 ID & Position 时，我得到了结果，但是当我搜索部门时，除非我使用 ids (1, 2, 3)，否则它将不起作用

我已经尝试实施 if 语句，其中搜索 ID、职位和部门有不同的查询。

我的问题是如果我使用更多列，那么我将不得不为我使用的每个数据库表创建查询。

有没有替代方案？

编辑：

这是我当前的查询。

```
SELECT p.id AS id, p.position AS position, d.department AS department FROM position p LEFT JOIN department d ON p.department = d.id " . $where ." ORDER BY $sidx $sord LIMIT $start , $limit 
```

`$where`变量是通过...

```
function getWhereClause($col, $oper, $val){
    global $ops;
    if($oper == 'bw' || $oper == 'bn') $val .= '%';
    if($oper == 'ew' || $oper == 'en' ) $val = '%'.$val;
    if($oper == 'cn' || $oper == 'nc' || $oper == 'in' || $oper == 'ni') $val = '%'.$val.'%';
    return " WHERE p.$col {$ops[$oper]} '$val' ";
} 
```

...请注意，我必须添加 p。到 $col 以使搜索功能正常工作。

我试过这个

```
if($col == 'Department'){
    return " WHERE d.$col {$ops[$oper]} '$val' ";
    }
    else{
    return " WHERE p.$col {$ops[$oper]} '$val' ";
    } 
```

但由于某种原因`if($col == 'Department')`没有被识别并跳到 else 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:18:19.750

如果您想要一个只有职位 ID、职位和部门名称的表格，您可以使用：

```
SELECT position.id, position.position, department.department
FROM Position 
INNER JOIN department on position.department = department.id 
```

这样您就可以搜索职位 ID、职位和部门名称，而不是 ID。

# c# - 如何录制正在运行的音乐 Windows 8 Metro 应用程序

> ID：12459937
> 
> 赞同：2
> 
> 时间：2012-09-17T13:11:06.213
> 
> 标签：c#, xaml, windows-8, microsoft-metro, audio-recording

我正在制作一个基于音乐的应用程序。该应用程序具有从用户的音乐库播放音乐的功能，并且用户有机会演奏不同类型的乐器，即与正在播放的音乐平行的鼓。

我想要做的是，开始一个录音会话并记录从音乐应用程序中发出的声音，即背景歌曲以及用户正在制作的鼓声。

我如何在 C#/xaml 中做到这一点？

我用谷歌搜索了一下，没有发现任何有用的东西:(

谢谢

# c# - 如何使用 MVVM 在 WPF 应用程序中访问另一个 ViewModel 中的一个 ViewModel 对象

> ID：12459940
> 
> 赞同：5
> 
> 时间：2012-09-17T13:11:17.300
> 
> 标签：c#, wpf, mvvm

我在 WPF 应用程序中使用 mvvm 模式而不使用任何数据库。我遇到了一个问题，我有一个视图 UploadView，其中用户上传了一些 excel 文件及其名为 UploadViewModel 的视图模型，我读取上传的文件数据并将其保存在一些数据表对象中，该对象是 UploadvViewModals 类的对象，它工作正常但是我的问题是，现在我必须在具有不同 Viewmodal 的某些 ItemsControl 中的另一个视图上显示上传的数据（数据表对象）。作为 WPF 和 windows 的新手。我不知道如何进行。有哪些可能的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:14:04.837

您可以在[EventAggregation](http://msdn.microsoft.com/en-us/library/ff921173%28v=pandp.20%29.aspx)（中介模式）中获得战利品

其他一些[教程](http://joyfulwpf.blogspot.nl/2009/05/mvvm-communication-among-viewmodels.html)开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:15:56.990

有几种方法可以做到这一点，具体取决于两个视图模型的松散耦合程度。如果您在上传视图模型中直接引用了第二个视图模型，那么您可以在显示此视图模型/视图时传递数据。

如果 a) 数据是第二个视图模型的要求，并且 b) 上传视图模型负责创建第二个视图模型，这似乎是最明智的选择。在这种情况下，您可以将数据作为依赖项传递到第二个视图模型的构造函数中。

替代方法包括使用事件聚合器作为中介在两个视图模型之间传递数据，但我会采用第一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:16:38.050

如果您使用的是 MVVM，那么您确实应该在 Model 类中访问 Excel 文件。ViewModel 通常用于将模型数据转换为 View 可以显示的格式，而不是用于访问数据。

# java - 使用 log4j 将不同的日志级别记录到不同的文件

> ID：12459943
> 
> 赞同：1
> 
> 时间：2012-09-17T13:11:21.153
> 
> 标签：java, logging, log4j

我正在使用 log4j 登录我的应用程序。我正在尝试在不同的文件中记录不同级别的日志，但是出了点问题。任何重新分级此问题的帮助将不胜感激。

```
 <?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

<appender name="console" class="org.apache.log4j.ConsoleAppender"> 
    <param name="Target" value="System.out"/> 
    <layout class="org.apache.log4j.PatternLayout"> 
      <param name="ConversionPattern" value="%-5p %c{1} - %m%n"/> 
    </layout> 
</appender> 

<appender name="DEBUG" class="org.apache.log4j.RollingFileAppender">
  <param name="File" value="TCS_patch_9/log/retailer_debug.log" />
  <param name="Threshold" value="DEBUG" />
  <param name="MaxFileSize" value="2MB"/>
  <param name="MaxBackupIndex" value="3"/>
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%d{ISO8601} %-5p %c - %m%n"/>
  </layout>
</appender>

<appender name="INFO" class="org.apache.log4j.RollingFileAppender">
  <param name="File" value="TCS_patch_9/log/retailer_info.log" />
  <param name="Threshold" value="INFO" />
  <param name="MaxFileSize" value="2MB"/>
  <param name="MaxBackupIndex" value="3"/>
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%d{ISO8601} %-5p %c - %m%n"/>
  </layout>
</appender>
<appender name="ERROR" class="org.apache.log4j.RollingFileAppender">
  <param name="File" value="TCS_patch_9/log/retailer_error.log" />
  <param name="Threshold" value="ERROR" />
  <param name="MaxFileSize" value="2MB"/>
  <param name="MaxBackupIndex" value="3"/>
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%d{ISO8601} %-5p %c - %m%n"/>
  </layout>
</appender>
<appender name="FATAL" class="org.apache.log4j.RollingFileAppender">
  <param name="File" value="TCS_patch_9/log/retailer_repeat_delay.log" />
  <param name="Threshold" value="FATAL" />
  <param name="MaxFileSize" value="2MB"/>
  <param name="MaxBackupIndex" value="3"/>
  <layout class="org.apache.log4j.PatternLayout">
    <param name="ConversionPattern" value="%d{ISO8601} %-5p %c - %m%n"/>
  </layout>
</appender>

  <root> 
    <priority value ="error" /> 
    <appender-ref ref="console"/> 
    <appender-ref ref="DEBUG"/> 
    <appender-ref ref="INFO"/> 
    <appender-ref ref="ERROR"/>
    <appender-ref ref="FATAL"/> 
  </root>

</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T13:41:25.443

log4j appender 的标准行为是它们在其阈值级别*或更高*级别记录所有消息，即具有阈值 INFO 的 appender 将记录 INFO、WARN、ERROR 和 FATAL 消息，但不记录 DEBUG。如果您只想记录INFO 消息*而*不是 WARN 及以上消息，那么[您需要使用 LevelMatchFilter](http://logging.apache.org/log4j/1.2/faq.html#a2.9)。

您还需要将根记录器优先级设置为 DEBUG，否则它只会向其附加程序发送 ERROR 和 FATAL 消息，并且您的 DEBUG 和 INFO 文件将为空。

# java - 如何实现多父多子映射？

> ID：12459946
> 
> 赞同：0
> 
> 时间：2012-09-17T13:11:31.667
> 
> 标签：java, hibernate, orm

我有`Category`每个类别可以有多个孩子（下级类别）和多个父母（上级类别）的地方。

我映射这是以下方式：

```
@Entity
public class Category {

@Id
public String Url;

@OneToMany
private Set<Category> childs = new HashSet<Category>();

@OneToMany
private Set<Category> parents = new HashSet<Category>();

@OneToMany(cascade=CascadeType.ALL)
private Set<Person> persons = new HashSet<Person>();

public String Title;

public boolean Done; 
```

我发现 Hibernate 使用下表对这个实体进行了编码

```
CREATE TABLE
category_category
(
    Category_Url VARCHAR(255) NOT NULL,
    parents_Url VARCHAR(255) NOT NULL,
    childs_Url VARCHAR(255) NOT NULL,
    PRIMARY KEY (Category_Url, childs_Url),
    CONSTRAINT FK8635931F3275D6D7 FOREIGN KEY (Category_Url) REFERENCES category (Url) ,
    CONSTRAINT FK8635931F569C2962 FOREIGN KEY (parents_Url) REFERENCES category (Url) ,
    CONSTRAINT FK8635931F6ADF3430 FOREIGN KEY (childs_Url) REFERENCES category (Url),
    CONSTRAINT parents_Url UNIQUE (parents_Url),
    CONSTRAINT childs_Url UNIQUE (childs_Url), 
```

这是绝对错误的，因为某行的孩子和父母彼此不相关，不应该包含在一个元组中。

我想 Hibernate 会创建两个表`category_category_1(Category_Url,childs_Url)`，并`category_category_2(Category_Url,parents_Url)`与子关联`this`和另一个关联 - 从`this`与父母关联。

为什么 Hibernate 会这样做，以及如何让它正确执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:23:51.127

您可以使用以下方法为链接表指定不同的名称`@JoinTable`：

```
@OneToMany @JoinTable(name = "category_category_1")
private Set<Category> childs = new HashSet<Category>();

@OneToMany @JoinTable(name = "category_category_2")
private Set<Category> parents = new HashSet<Category>(); 
```

# zend-framework - 无法从 Zend 注册表读取缓存对象

> ID：12459955
> 
> 赞同：-1
> 
> 时间：2012-09-17T13:12:10.173
> 
> 标签：zend-framework, zend-cache

在引导程序中，我正在注册缓存 obj

```
$cache = Zend_Cache::factory('Core','File',$frontendOptions,$backendOptions);
Zend_Registry::set('cache',$cache); 
```

当我尝试在模型类中检索时，它返回对象但我无法在我的 IDE 中获取与缓存相关的函数列表。我在想至少公共方法会被列出..

```
$this->_cache->load return false ! 
```

你能帮忙看看可能有什么问题吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:47:56.300

它是什么？

```
$this->_cache->load return false ! 
```

您可以像这样从模型中检索注册表元素：

```
$cache = Zend_Registry::get('cache'); 
```

# php - PHP 会话和包括

> ID：12459956
> 
> 赞同：1
> 
> 时间：2012-09-17T13:12:11.657
> 
> 标签：php, html

我在 PHP`sessions`中遇到了一个非常讨厌的问题。`includes`我有一个页面调用，我在不同页面之间`index.php`有一个函数：`switch`

```
<?php $p=(isset($_GET["p"])?$p=intval($_GET["p"]):$p=1); switch($p) {
case 1: $pagina = "login_and_registration.php";
break;
case 2: $pagina = "admin/registrazione.php";
break;
case 3: $pagina = "admin/login_test.php";
break;
case 4: $pagina = "logged_gym.php";
break;
case 5: $pagina = "logged_trainer.php";
break;
case 7: $pagina = "logout.php";
break;
case 8: $pagina = "admin/completa_profilo_trainer_sql.php";
break;
case 10: $pagina = "error.php";
break;
case 12: $pagina = "profilo_min.php";
break;
case 13: $pagina = "splash.php";
break;
default: $pagina = "index.php";
break;} ?> 
```

然后在文件正文中的代码我有一些包括：

```
<header class="container_12">
    <?php include("login_errors.php")?>
    <div id="logo_container" class="grid_4 push_4"></div></header > 
```

和这个：

```
<section>
    <?php include_once($pagina);?>
</section> 
```

当我填写此页面中的表单时，对应于 switch 功能中的第 1 页，我在登录时收到此错误（我开始一个带有名称的新会话）：

`Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /Applications/MAMP/htdocs/FitnessOptimize/index.php:63) in /Applications/MAMP/htdocs/FitnessOptimize/admin/login_test.php on line 73`

在第 63 行的 index.php 中，我有`include`我刚刚发布的第一个。关于如何避免这个错误的任何想法？也是我的`header ("Location: ")`；不工作我认为出于同样的原因。任何帮助将不胜感激！谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:14:22.913

发送标头之前没有输出！

如果您在 header 之前输入了任何内容，则会导致 header 错误，即使之前的 white spave`<?php`也会导致错误

有关更多信息，请检查stackoverfow 上 PHP 问题[已发送的 Headers](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

检查此链接到[在同一个域中有两个不同的会话](https://stackoverflow.com/questions/1348555/having-two-different-sessions-in-same-domain)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T13:15:50.967

使用`session_start();` 您正在使用的页面顶部的功能。请`$_SESSION` 确保您之前没有一个空格`session_start()`

在php中首先传输所有标题，然后如果存在单个空格，则将文本发送到浏览器，您的会话将不会启动并且您无法使用`$_SESSION[]`，因此请将其写在页面顶部

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:15:54.347

```
session_start(); 
```

应该在页面的开头

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T13:18:40.390

问题可能是由代码开头的不可打印字符引起的，或者您在标题中写入了一些值。

# c++ - cin.get() 没有按预期运行

> ID：12459960
> 
> 赞同：0
> 
> 时间：2012-09-17T13:12:39.017
> 
> 标签：c++, input, blocking, cin

> **可能重复：**
> [程序不等待 cin](https://stackoverflow.com/questions/12272277/program-not-waiting-for-cin)

我写了以下代码：

```
#include <iostream>
using namespace std;

void search(int pre, int a, int b, int x) {
    char c;
    cout << "Is the number " << ((x == 2) ? b : a) << endl;
    c = cin.get(); ////// this does not block
    if (c == 'y') return;

    else {
        cout << "Is the number " << ((x == 2) ? b : a) << " closer to your number than " << pre;
        c = cin.get();

        if (c == 'y') {
            search(a, a, (a + b) / 2, 2);
        } //c=='y'
        else search(a, (a + b) / 2, b, 1);
    }
}

int main() {
    int N;
    cout << "Enter N? ";
    cin >> N;

    search(N, 1, N, 1);
    return 0;
} 
```

如果您不理解逻辑，则无需担心，因为我的问题与此无关。

在搜索功能中，有两个 cin.get()，我需要用户输入一个字符。我的问题是程序仅在第二个 cin.get() 之后才阻止输入。

例如：

```
 Is the number 7  //program doesn't wait after this
 Is the number 7 closer to your number than 8  //program blocks here for an input 
```

为什么会这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:40:37.190

您的代码中至少存在两个问题。首先是您在输入后将字符留在缓冲区中`N`。最简单的解决方案是添加对`std::cin.ignore( INT_MAX, '\n' );` after的调用`std::cin >> N;`；一个更好的解决方案（因为它允许更多的错误检查）是使用`std::getline`读取完整的行，然后使用`std::istringstream`.

第二个问题是您将结果分配 `std::cin.get()`到`char`. `std::cin.get()`返回一个`int`，可能是`EOF`。`EOF` 而且你真的想在转换为之前`int`检查它是否是`char`：你不能在之后检查，因为要么一些合法的`char`比较等于`EOF`（plain`char`是有符号的），要么`char`永远不会比较等于`EOF`（plain`char` 是无符号的）。另一种选择是执行以下操作：

```
if ( !std::cin.get( c ) ) {
    //  EOF or error seen...
} 
```

每次你想读一个`char`。（在您的情况下这可能会更好，因为如果您确实 read `EOF`，所有进一步的调用都`std::cin.get()` 将返回`EOF`。）

# c++ - 在宏定义中连接两个字符串（Clang）

> ID：12459964
> 
> 赞同：0
> 
> 时间：2012-09-17T13:12:48.953
> 
> 标签：c++, xcode4, macros, clang

我正在处理一些最初在 MSVC 中制作的代码，我正试图让它在 Clang 上编译（使用 Xcode）。我得到的代码是这样的：

```
#define DO_MAPPING(x,y,z)\
    myMaps[map##x] = GetTex( #x##"Map" );\
    myRemaps[map##x] = GetHandle( #x##"Remap" ); 
```

目前我收到一个构建错误，说粘贴形成了`"Height""Map"`我真正想要的字符串`"HeightMap"`。这段代码适用于 MSVC，Clang 的宏语法是否意味着这种东西需要以不同的方式编写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T13:16:59.487

在 C 中，`"X""Y"`等价于`"XY"`。但是，当您在宏中编写这样的内容时：

```
str1##str2 
```

您是在告诉词法分析器*将两者结合为**一个**标记*。`"X""Y"`实际上是由词法分析器¹连接的两个标记，而`"X"##"Y"`应该是一个标记（这不是有效标记）。

您需要的是简单地删除`##`：

```
#define DO_MAPPING(x,y,z)\
    myMaps[map##x] = GetTex( #x "Map" );\
    myRemaps[map##x] = GetHandle( #x "Remap" ); 
```

¹或语义分析器，取决于实现

* * *

通常，匹配字符串的正则表达式如下所示（简化）：

```
"(a|\b)*" 
```

（假设`a`是不需要转义的所有字符的列表，并且 `b`是其他字符）。对于 MSVC，可能是这样定义的：

```
"(a|\b)*"s*+ 
```

（`s`是空格）

这意味着 MSVC 可能将`"X" "Y"`其视为一个令牌而不是两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T13:17:00.510

只需使用`(#x "Map")`. `#x##"Map"`它应该在 C++ 中工作。例如，这是完全有效的：`("B" "Map")`并且计算结果为`"BMap"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T13:16:04.383

请注意，实际上与解析时`"Height""Map"`相同。`"HeightMap"`所以你可以简单地使用这个：

```
#define DO_MAPPING(x,y,z)\
    myMaps[map##x] = GetTex( #x "Map" );\
    myRemaps[map##x] = GetHandle( #x "Remap" ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T13:16:14.927

试试这个：

```
#define DO_MAPPING(x,y,z)\
    myMaps[map##x] = GetTex( #x "Map" );\
    myRemaps[map##x] = GetHandle( #x "Remap" ); 
```

编译器会自动连接两个字符串。

# apache-flex - 在 Flex 组合框中添加水平分隔符和自动完成功能

> ID：12459966
> 
> 赞同：0
> 
> 时间：2012-09-17T13:13:08.330
> 
> 标签：apache-flex, photoshop

我正在用 Flex 开发一个面板。面板有一个显示系统字体的组合框。我创建了一个数组集合并用可用的系统字体填充它，并将这个数组集合设置为组合框的数据提供者。我想做以下但不能这样做：

1.  **在组合框中添加不可点击的水平分隔符 -** 我想在某些特定位置的组合框的下拉列表中显示水平分隔符。但我找到了在弹出按钮控件中添加水平分隔符的示例。

2.  **组合框中的自动完成功能-** 我想实现组合框的自动完成功能，就像在 Photoshop 中字符面板的“字体系列”组合框中所做的那样。

有人可以为我提供一些示例代码或指导来实现上述目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:09:47.380

> 我想实现组合框的自动完成功能

好吧，我有偏见，但我强烈建议您查看我们的[AutoComplete 组件](https://www.flextras.com/index.cfm?event=ProductHome&productID=19)。我们有 MX 版本、Spark 版本和移动版本。它也可免费用于开发/生产使用。

除此之外; [Hillel Coren 的](http://hillelcoren.com/flex-autocomplete/)AutoComplete 受到许多开发人员的高度评价。

[我遇到的所有其他 Flex AutoComplete 组件似乎都是半生不熟]

# php - 在 PHP 中创建通货膨胀计算器

> ID：12459967
> 
> 赞同：0
> 
> 时间：2012-09-17T13:13:10.700
> 
> 标签：php, cumulative-sum

这是我目前拥有的代码，它都按预期工作，但是，累计总数不起作用，我很肯定我在做一些绝对愚蠢的事情。

```
assume period = 20
assume inflation = 3
assume nightlycost = 100
assume nights = 7

$yearlycost = $nightlycost*$nights;
while ($period > 0) {
    $period = $period-1;
    $yearlyincrease = ($inflation / 100) * $yearlycost;
    $nightlyincrease = ($inflation / 100) * $nightlycost;
    $nightlycost = $nightlycost + $nightlyincrease;
    $yearlycost = ($yearlycost + $yearlyincrease) + $yearlycost;
}

Result:
Nightly Hotel Rate in 20 years: $180.61 - <?php echo round($nightlycost, 2); ?> correct

Weekly Hotel Rate in 20 years: $1264.27 - <?php echo round($nightlycost, 2) * 7; ?> correct

Total cost to you over 20 years: $988595884.74 - <?php echo round($yearlycost, 2); ?> incorrect 
```

除了每年的累积成本外，一切都按预期正确输出。它应该采用前一年的成本并加上该年的成本+通货膨胀。

示例：第一年是 700，所以第二年应该是 700 + 700 + 21（21 是 3%，即当年的通货膨胀率）。因此，第二年的累计总数为：1421。第三年将是 1421 + 721（去年的总数）+ 721 的 3%。

希望这足够清楚，您可以看到我哪里出错了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:31:55.967

我发现很难理解你的代码哪里出错了，但我的直觉是你的循环体的最后一行应该有一个乘法。

基本上，你有一个时期 0 的基本成本。然后你想计算 X 年后给定通货膨胀的累积成本。那个成本是（伪代码）

```
base = nightlycost + nights
infl = 1.03
cumulative = base + base*infl + base*infl^2 + base*infl^3 + ... + base*infl^periods 
```

最后一个表达式可以简化为

```
cumulative = base*((1-infl^periods)/(1-infl)) 
```

（这根据公式 4 成立：http: [//mathworld.wolfram.com/ExponentialSumFormulas.html](http://mathworld.wolfram.com/ExponentialSumFormulas.html)）

例子：

```
$base = 100*7;
$infl = 1.03; // 3% of inflation/year

$periods = 2;
$cumulative = $base * (1-pow($infl, $periods))/(1-$infl);
print "Cumulative cost after $periods is $cumulative\n";

// Let's try with three periods.
$periods = 3;
$cumulative = $base * (1-pow($infl, $periods))/(1-$infl);
print "Cumulative cost after $periods is $cumulative\n"; 
```

输出：

```
Cumulative cost after 2 is 1421
Cumulative cost after 3 is 2163.63 
```

# c - C 中的反转函数不起作用。位运算符

> ID：12459971
> 
> 赞同：1
> 
> 时间：2012-09-17T13:13:27.690
> 
> 标签：c

我正在实现一个 C 函数`unsigned invert(unsigned x, int p, int n)` ，该函数返回 x ，其中从位置 p 开始的 n 位反转，而其他位保持不变。

```
#include <stdio.h>

unsigned invert(unsigned x, int p, int n);

int main()
{
    printf("%u\n", invert(11111111, 5, 4));
    printf("%u\n", invert(10, 2, 2));

    return 0;
}

unsigned invert(unsigned x, int p, int n)
{   
    return x^(~(~0<<n)<<p+1-n);
} 
```

这就是我到目前为止所得到的，如果我通过它跟踪函数应该是正确的，但我不断得到第一次测试的 11111163 和第二次测试的 12。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T13:20:06.360

我认为您的程序正在运行。您唯一需要做的就是用二进制表示数字。

```
unsigned invert(unsigned x, int p, int n); 

int main()
{
    printf("%x\n", invert(0b11111111, 5, 4));
    printf("%x\n", invert(0b10, 2, 2));

return 0;

}

unsigned invert(unsigned x, int p, int n)

{   
     return x^(~(~0<<n)<<p+1-n);
} 
```

这是你想要的吗？

# apache - 自签名证书能否在 Apache 反向代理后面工作？

> ID：12459975
> 
> 赞同：7
> 
> 时间：2012-09-17T13:13:33.387
> 
> 标签：apache, ssl

我们想使用 Apache 作为我们对一组应用服务器的反向代理。我们计划在 Apache 实例上使用 CA 签名的 SSL 证书，但希望在应用服务器实例上使用自签名证书（这样 Apache 到应用服务器的连接也被加密了）。如果不需要，我们不想在应用服务器实例上安装 CA 签名的 SSL 证书。

Apache 是否允许在应用服务器实例上配置自签名证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T15:01:40.233

如果您有大量应用服务器，那么拥有自己的内部 CA 可能更有意义，而不是必须一个一个地管理每个自签名证书。

如果您希望 Apache Httpd 反向代理及其工作节点之间的连接使用 HTTPS，您可以使用 Apache Httpd 的`SSLProxy*`指令`mod_ssl`（如文档介绍中所述`mod_proxy`）配置受 Apache Httpd 信任的证书，特别是`SSLProxyCACertificateFile`.

您需要使用`mod_proxy_http`它，因为 AJP 连接不是通过 SSL/TLS 建立的。

# asp.net - Web Config 中的运行时错误

> ID：12459977
> 
> 赞同：0
> 
> 时间：2012-09-17T13:13:40.297
> 
> 标签：asp.net, .net, web-config-transform

我有一个在 ASP.NET 4.0 和 SQL server 2008 R2 下开发的 IIS 7.5 中的 Web 应用程序。现在我正在测试应用程序，在我单击表单中“提交”按钮的最后阶段后突然出现一个错误，最多 10 个条目工作正常（在应用程序在登录表单中正常工作之前！！！）。如何为了克服这个问题，请帮助我。![网页配置错误](../Images/11bad273cd82d4d4b69d7f22f5833bdf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:15:32.917

您的应用程序有异常，但您必须转向`CustomError="On"`，以便可视化您的异常消息。

你无法想象你的错误，因为`CustomError="Off"`

链接： http: [//msdn.microsoft.com/en-us/library/h0hfz6fc (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/h0hfz6fc(v=vs.71).aspx)

# android - Android 4.1 SuperSU Shell 不授予 root 访问权限

> ID：12459981
> 
> 赞同：1
> 
> 时间：2012-09-17T13:13:50.360
> 
> 标签：android, root, android-4.2-jelly-bean, su

我最近在我的变压器 tf101 上升级了 Stock Android 4.1。在我的应用程序中，我需要对插入设​​备的 USB 摄像头进行 root 访问。到目前为止，我已经通过以下代码做到了这一点：

```
 Runtime.getRuntime().exec("su");
        DataOutputStream oOutSream = new DataOutputStream( process.getOutputStream());
        oOutSream.writeBytes( "chmod -R 777 /dev/bus/usb/* \n" );
        oOutSream.flush();
        oOutSream.writeBytes("exit\n");
        oOutSream.flush(); 
```

我知道， chmod 777 不是一个好主意，但到目前为止我还没有找到任何其他解决方案。好吧，升级到 4.1 后，这不再起作用了。SuperSU 提示一个消息框，通知我该应用程序已请求 root 访问权限，但它不会工作。奇怪的是..当我从电脑打开 adb shell 并输入这些命令时，它完美无缺。

如果我通过 pc 授予 su 访问权限，我的应用程序可以正常工作，尽管出现随机 toast 通知我“授予 root 访问权限”或“拒绝 root 访问权限”。这可能是 SuperSU 中的错误吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T18:22:24.723

一个更好的主意是查看您想要访问的 USB 设备具有哪些权限。

例如`ls`在您的手机上使用：

```
$ ls -l /dev/bus/usb/001/
crw-rw---- system   usb      189,   1 2012-09-15 19:18 002
crw-rw---- system   usb      189,   0 2012-09-15 19:18 001 
```

我在这里可能错了，但我认为在每个 android 版本中，usb 组都具有`rw`所有 USB 设备的权限。您想要做的是，使用`usb`组 ID 启动您的应用程序。

您可以这样做，例如，使用`su`将您的进程提升为 root，然后使用`setgid`. 之后，您可以在没有那种`chmod`真正不好的情况下向您的 USB 设备写入数据。

**编辑**：另外，不要忘记在`setuid(whateverAppUID)`设置组 ID 后使用删除 root 权限！

# asp.net-mvc-3 - MVC3 内网成员资格

> ID：12459994
> 
> 赞同：4
> 
> 时间：2012-09-17T13:14:17.490
> 
> 标签：asp.net-mvc-3, asp.net-membership, windows-authentication, intranet

我正在使用连接到 SQL Server dB 的默认 MembershipProvider、ProfileProvider 和 RoleProvider 构建 MVC3 **Intranet**应用程序。如果我使用表单身份验证，角色提供程序会正确填充。当我切换到 Windows 身份验证时，不再填充角色提供程序。这是通过在代码中放置断点并查看“Roles.GetRolesForUser()”来测试的。我怀疑正在发生的事情是传递给数据库的用户 ID 是“DOMAIN\USERID”（这是 User.Identity.Name 中的内容），而数据库中的只是用户 ID。

由于一切都是默认的，所以没有太多代码可以发布。

```
<authentication mode="Windows" />
<authorization>
  <deny users="?"/>
</authorization>
  <membership defaultProvider="AspNetSqlMembershipProvider">
    <providers>
    <clear />
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<profile>
  <providers>
    <clear />
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/" />
  </providers>
  <properties></properties>
</profile>
  <roleManager enabled="true" defaultProvider="AspNetSqlRoleProvider" cacheRolesInCookie="true">
    <providers>
    <clear />
    <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" />
    <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" />
  </providers>
</roleManager> 
```

我的第一个想法是，我们是否可以在将身份传递给会员提供者之前删除域，但 User.Identity.Name 只能获取。

纠正此问题的最佳途径是什么，而不必将我的整个数据库更改为具有域 \ 用户 ID 而不仅仅是用户 ID？这可以在不必编写自定义会员/个人资料/角色提供者的情况下完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T23:21:36.603

如果您只想使用 Windows 身份验证，那么您不想使用 SqlRoleProvider，而是想使用 WindowsTokenRoleProvider，它将返回他们的 AD 角色。（没有理由使用会员提供程序，因为在使用 Windows 身份验证时，如果没有经过身份验证，您将无法访问该站点）

如果您想使用 Windows 身份验证，但使用 SqlRoles，那么您可能想要执行以下操作：

[http://weblogs.asp.net/scottgu/pages/Recipe_3A00_-Implementing-Role_2D00_Based-Security-with-ASP.NET-2.0-using-Windows-Authentication-and-SQL-Server.aspx](http://weblogs.asp.net/scottgu/pages/Recipe_3A00_-Implementing-Role_2D00_Based-Security-with-ASP.NET-2.0-using-Windows-Authentication-and-SQL-Server.aspx)

# cordova - 整合 UrbanAirship

> ID：12459999
> 
> 赞同：1
> 
> 时间：2012-09-17T13:14:52.637
> 
> 标签：cordova, urbanairship.com

我正在尝试将城市飞艇推送通知集成到我的 phonegap iOS 应用程序中。我已按照[说明](https://docs.urbanairship.com/display/DOCS/Client:+PhoneGap:+iOS+Plugin)进行操作，但在构建项目时，我不断收到“找不到词法或预处理器问题 'UAGlobal.h' 文件”。

我找到[了这个](https://support.urbanairship.com/customer/portal/questions/450206-lexical-or-preprocessor-issue-uaglobal-h-file-not-found-phonegap-cordova-2-urban-airship)，但修复没有帮助。我觉得我的问题可能在于标题搜索路径，但我不完全确定。有没有人遇到过类似的问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:44:58.920

我也遇到了这个问题，经过大量研究，我能够让它工作。我只是在尝试存档应用程序以进行临时测试时才收到错误消息。据我回忆，我不得不在标题搜索路径中添加额外的条目。这是我的标题搜索路径。根据我在网上找到的一篇文章，我添加了 4 个条目。虽然不记得在哪里了。

```
$(SRCROOT)/Airship
$(TARGET_BUILD_DIR)/usr/local/lib/include
$(OBJROOT)/UninstalledProducts/include
$(BUILT_PRODUCTS_DIR) 
```

确保它们位于添加它们的弹出框中的单独行上，并且每个复选框都被选中。

我将这些添加到 Debug 和 Release 搜索路径中，然后它就起作用了。确保将它们添加到目标下。当您单击左侧文件树中的主项目时，然后单击目标下的应用程序名称，然后转到构建设置。那是我添加它们的地方。我想这就是我为让它工作所做的一切。

如果这不起作用，我将需要记住我还做了什么。