# StackOverflow 问答 12155000-12155999

# android - ListView 中的 Admob 不可点击

> ID：12155002
> 
> 赞同：1
> 
> 时间：2012-08-28T07:56:43.753
> 
> 标签：android, listview, admob

这是我的设置：我有一个自定义列表适配器。第三项是 admob 横幅。此列表视图有一个 onclicklistener，它覆盖 admob 横幅的侦听器。（这是我的第一个问题）。如果我将此 onclicklistener 设置在注释括号中并单击广告，则会收到此错误：尝试使用不同的 AdManager 启动新的 AdActivity。（第 2 期）。我希望有人可以帮助:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:52:32.793

如果您有多个进程正在运行，则会收到此错误

# c# - 从 c# 中的 wav 文件渲染 wav 文件

> ID：12155003
> 
> 赞同：1
> 
> 时间：2012-08-28T07:56:43.327
> 
> 标签：c#, rendering, wav

我得到了一些简短的 .wav 文件，在我获得了应该如何及时播放的序列之后，我需要“渲染”一个包含该 .wav 文件的 wav 文件。我知道我可以附加它，但问题是应该一次播放一些 wav 文件，而且它还需要有节奏（精确的空格）。

如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T07:58:59.930

您将需要使用一些库，如 ffmpeg 或 SoX 来执行此操作。

参考： http: [//ffmpeg.org、http](http://ffmpeg.org) : [//sox.sourceforge.net](http://sox.sourceforge.net)

# twig - 引用 twig 中的资源字段时如何转义 %？

> ID：12155004
> 
> 赞同：1
> 
> 时间：2012-08-28T07:56:49.350
> 
> 标签：twig

我正在使用 twig 并且需要访问名为“%”的资源字段。当我在树枝模板中尝试此操作时，出现错误：

```
{{ something.something2.%}} 
```

有什么办法可以逃脱`%`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:16:16.897

所以我意识到这是一个老问题，但我刚刚找到了答案。

您必须使用属性函数：

```
{{ attribute(something.something2, '%') }} 
```

这用于获取带有任何特殊字符的属性的值，这些特殊字符会使我在其他情况下解释为其他含义。

您可以在此处查看该函数的文档：http: [//twig.sensiolabs.org/doc/functions/attribute.html](http://twig.sensiolabs.org/doc/functions/attribute.html)

# php - 全局 $CONF 与配置文件

> ID：12155012
> 
> 赞同：0
> 
> 时间：2012-08-28T07:57:23.140
> 
> 标签：php, memory, global

我对 php 比较陌生。所以请原谅我，如果我的问题似乎是错误的。

最近我们开始为我们的客户开发一个CMS。系统将大部分配置细节存储在 global 中`$CONF`。例如，系统将站点名称、站点管理员电子邮件、站点统计信息等存储在此变量中。当我使用 a`print_r($CONF)`时，它的长度超过一页。

我的问题是，将这些值作为数组保存在 php 文件中并包含它，比将所有这些值保存在内存中更好吗？两者的优缺点是什么？

# php - 实时共享 Excel 数据？

> ID：12155016
> 
> 赞同：0
> 
> 时间：2012-08-28T07:57:38.800
> 
> 标签：php, excel

我开发了一个 VBA 电子表格，可以在本地运行并不断从其他来源获取数据。

我想找到一种方法来通过 php 提取/访问此电子表格中的数据，然后使用浏览器输出一些处理过的数据，这些数据将随着电子表格本身的更新而相应更新。

任何人都可以告诉我如何实现这一目标？如果这更容易的话，电子表格和 php 都将在 Windows 机器上本地运行......

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:09:51.287

我刚刚开发了一个应用程序，它的想法是在电子表格中使用 http 请求 on_change 事件。

excel中请求的vba代码

```
Function httpRequest(ByVal path As String) As String
  Set HttpReq = CreateObject("MSXML2.ServerXMLHTTP")
  HttpReq.Open "GET", path, False
  HttpReq.Send
   httpRequest = HttpReq.ResponseText
End Function 
```

在您的 php 方面，您必须开发数据在数据库中映射的部分。当然还有数据视图。至于实时，您必须使用更精细的东西，例如保存最新更改的表格，并不时检查此类更改，除非有某种机制可以这样做。

在 excel 中存在计时器来完成轮询检查网络更新，您应该使用 ajax 进行无缝更新，请查看[http://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:00:20.260

您可以使用[PHP Excel Reader](http://code.google.com/p/php-excel-reader/)轻松地从电子表格中显示数据 - 我认为这是最简单的 PHP Excel 库，它可以满足您的需求，只需将页面设置为定期刷新。

使用这个库就像这样简单：

```
<?php echo $data->dump(true,true); ?> 
```

一旦你告诉它文件在哪里显示输出，就像预期在 Excel 工作簿中看到的那样。（这是他们在线运行[的示例的链接）](http://www.mattkruse.com/php-excel-reader/example.php)

这意味着您不会遇到任何锁定问题，因为读取完成得相当快（假设文件大小合理并且用户不会真正落后几分钟/秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:39:27.737

您希望 PHP 仅从 Excel 工作表生成 HTML？Excel 本身支持 HTML 生成。

尝试另存为网页以测试 Excel 生成的 HTML 的质量。如果没问题，那么您所要做的就是编写一小段 VBA，它将自动从您的电子表格中生成 HTML。

Excel中构建的CMS排序。

# jboss - 如何更改首选项以使每个窗口显示不同的内容？

> ID：12155018
> 
> 赞同：0
> 
> 时间：2012-08-28T07:57:42.890
> 
> 标签：jboss, preferences, portlet, jsr286, jboss-portal

我正在尝试覆盖首选项的值，但没有任何覆盖。有谁知道如何解决这一问题？

portlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<portlet-app xmlns="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0" xsi:schemaLocation="http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd http://java.sun.com/xml/ns/portlet/portlet-app_2_0.xsd">
    <portlet>
        <portlet-name>cool_portlet</portlet-name>
        <portlet-class>org.springframework.web.portlet.DispatcherPortlet</portlet-class>
        <supports>
            <mime-type>text/html</mime-type>
            <portlet-mode>view</portlet-mode>
        </supports>
        <supported-locale>en</supported-locale>
        <resource-bundle>com.app.portlet.cool_portlet</resource-bundle>
        <portlet-info>
            <title>Cool Portlet</title>
        </portlet-info>     
        <portlet-preferences>
            <preference>
                <name>KEY</name>
                <value>TEST</value>
                <read-only>false</read-only>
            </preference>
        </portlet-preferences>
    </portlet>
</portlet-app> 
```

portlet-instances.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE deployments PUBLIC "-//JBoss Portal//DTD Portlet Instances 2.6//EN" "http://www.jboss.org/portal/dtd/portlet-instances_2_6.dtd">
<deployments>
   <deployment>
      <instance>
         <instance-id>coolPortlet_IMPORT_newInstance</instance-id>
         <portlet-ref>cool_portlet</portlet-ref>
          <preferences>
              <name>KEY</name>
              <value>IMPORT</value>
          </preferences>
      </instance>
   </deployment>
    <deployment>
        <instance>
            <instance-id>coolPortlet_EXPORT_newInstance</instance-id>
            <portlet-ref>cool_portlet</portlet-ref>
            <preferences>
                <name>KEY</name>
                <value>EXPORT</value>
            </preferences>
        </instance>
    </deployment>
</deployments> 
```

cool_portlet-object.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE deployments PUBLIC "-//JBoss Portal//DTD Portlet Instances 2.6//EN" "http://www.jboss.org/portal/dtd/portlet-instances_2_6.dtd">
<deployments>
    <deployment>
        <parent-ref>comportal.import</parent-ref>
        <if-exists>overwrite</if-exists>
        <window>
            <window-name>impWindow</window-name>
            <content>
                <content-type>portlet</content-type>
                <content-uri>coolPortlet_IMPORT_newInstance</content-uri>
            </content>
            <region>center</region>
            <height>1</height>
            <supported-window-states>
                <window-state>normal</window-state>
                <window-state>maximized</window-state>
                <window-state>minimized</window-state>
            </supported-window-states>
            <initial-window-state>normal</initial-window-state>
        </window>
    </deployment>
    <deployment>
        <parent-ref>comportal.export</parent-ref>
        <if-exists>overwrite</if-exists>
        <window>
            <window-name>expWindow</window-name>
            <content>
                <content-type>portlet</content-type>
                <content-uri>coolPortlet_EXPORT_newInstance</content-uri>
            </content>
            <region>center</region>
            <height>1</height>
            <supported-window-states>
                <window-state>normal</window-state>
                <window-state>maximized</window-state>
                <window-state>minimized</window-state>
            </supported-window-states>
            <initial-window-state>normal</initial-window-state>
        </window>
    </deployment>
</deployments> 
```

主控制器.java

```
@RequestMapping(value = "VIEW")
@Controller(value = "mainController")
public class MainController {
    @RenderMapping
    public String init(@RequestParam(value = "key", required = false) String key, Model model, PortletRequest request) throws Exception {
        PortletPreferences preferences = request.getPreferences();
        String preferencesKey = preferences.getValue("KEY", "Not Found!!!");
        System.out.println("KEY is : " + preferencesKey);
        model.addAttribute("preferencesKey", preferencesKey);
        return "index";
    }
} 
```

输出：

```
13:49:54,860 INFO  [STDOUT] KEY is : TEST
13:50:21,088 INFO  [STDOUT] KEY is : TEST 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:20:34.240

您需要调用 setValue 然后存储您的 PortletPreferences 对象。请注意，偏好只能存储在操作阶段。[访问](http://publib.boulder.ibm.com/infocenter/wpdoc/v510/index.jsp?topic=/com.ibm.wp.zos.doc/wps/wpsbspers.html)

# asp.net-mvc - LINQ to Entities 仅支持无参数构造函数和初始化程序

> ID：12155019
> 
> 赞同：-1
> 
> 时间：2012-08-28T07:57:53.913
> 
> 标签：asp.net-mvc, linq, linq-to-entities

有几个相同的问题有相同的问题。但我找不到适合我的解决方案。

**林奇**

```
var result = (from a in entity.TblAnalizorReadings
             group a by new { date = new DateTime(((DateTime)a.okuma_tarihi).Year, ((DateTime)a.okuma_tarihi).Month, ((DateTime)a.okuma_tarihi).Day, ((DateTime)a.okuma_tarihi).Hour, 0, 0) } into g
             select new AnalizorPivotChartModel
             {
                  okuma_tarihi = g.Key.date,
                  Gerilim_Faz1 = g.Max(x => x.Gerilim_Faz1),
                  Gerilim_Faz2 = g.Max(x => x.Gerilim_Faz2),
                  Gerilim_Faz3 = g.Max(x => x.Gerilim_Faz3)
              }).ToList(); 
```

**模型**

```
public class AnalizorPivotChartModel
{
    public Nullable<System.DateTime> okuma_tarihi { get; set; }
    public Nullable<decimal> Gerilim_Faz1 { get; set; }
    public Nullable<decimal> Gerilim_Faz2 { get; set; }
    public Nullable<decimal> Gerilim_Faz3 { get; set; }
} 
```

我收到错误消息作为这个问题的标题。如果需要，我可以编写更多代码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:11:02.607

```
var result = entity.TblAnalizorReadings
    .GroupBy(a =>
        new {
            ((DateTime)a.okuma_tarihi).Year,
            ((DateTime)a.okuma_tarihi).Month,
            ((DateTime)a.okuma_tarihi).Day,
            ((DateTime)a.okuma_tarihi).Hour
        },
        (k, g) => new {
            okuma_tarihi = k,
            Gerilim_Faz1 = g.Max(x => x.Gerilim_Faz1),
            Gerilim_Faz2 = g.Max(x => x.Gerilim_Faz2),
            Gerilim_Faz3 = g.Max(x => x.Gerilim_Faz3)
        })
    .AsEnumerable()
    .Select(g => new AnalizorPivotChartModel
         {
              okuma_tarihi = new DateTime(okuma_tarihi.Year, okuma_tarihi.Month, okuma_tarihi.Day, okuma_tarihi.Hour, 0, 0),
              Gerilim_Faz1 = g.Gerilim_Faz1,
              Gerilim_Faz2 = g.Gerilim_Faz2,
              Gerilim_Faz3 = g.Gerilim_Faz3
          })
    .ToList(); 
```

# mysql - Django 将不正确的查询结果传递给模板

> ID：12155031
> 
> 赞同：0
> 
> 时间：2012-08-28T07:59:01.900
> 
> 标签：mysql, django, web

我正在编写一个显示用户配置文件的网络应用程序。

配置文件包括用户`interest`在其他用户中的显示，可以是单向或双向的。我正在使用 django 包含的`User`模型来处理身份验证和授权。

我遇到的问题是，在某些情况下，呈现的页面会呈现来自之前执行的查询的数据。具体来说，当我在同一台计算机上以不同浏览器（OS X 上的 Chrome 和 Safari；使用 django 开发 Web 服务器）上作为两个不同用户使用该应用程序时，就会发生这种情况。在我为用户 1 加载页面后，如果我为用户 2 重新加载页面，我会看到用户 1 的查询结果。

我通过将它们打印到控制台来确认我的查询是正确的。我认为问题可能出在网络服务器上，因为页面在服务器重新启动后立即加载了正确的查询。

有任何想法吗？

** 编辑：正如 Daniel 指出的那样，问题在于 interest_view 函数有一个字典作为默认参数。**

* * *

**相关代码片段：**

`models.py`

```
class Profile(UserenaBaseProfile):
    user = models.OneToOneField(User, unique=True)

class Interest(models.Model):
    user = models.ForeignKey(User, related_name=u'interests')
    interest = models.ForeignKey(User) 
```

* * *

`views.py`

```
from django.http import HttpResponseForbidden
from django.shortcuts import get_object_or_404, render_to_response
from django.template import RequestContext

def interest_view(request, username, extra_context={}):
    user = get_object_or_404(User, username__iexact=username)

    profile = user.get_profile()
    if not profile.can_view_profile(request.user):
        return HttpResponseForbidden("You can't view this page.")

    interests = Interest.objects.filter(user=user)
    if len(interests) > 0:
        extra_context['active_interests'] = interests

    return render_to_response('interest_detail.html',
                              extra_context,
                              context_instance=RequestContext(request)
    ) 
```

* * *

`interest_detail.html`

```
{% if active_interests %}
    {% for interest in active_interests %}
        <li>
            {{ interest.interest.first_name }} {{ interest.interest.last_name }}
        </li>
    {% endfor %}
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:08:27.240

您没有显示任何代码，因此无法调试。但问题几乎可以肯定是您在模块级别定义查询，它们在进程的生命周期内持续存在（这是许多请求）。

**编辑：**

好吧，我几乎是对的 - 这是在模块级别定义的东西的问题，尽管在你的情况下它是 Python 默认参数陷阱。请参阅[effbot](http://effbot.org/zone/default-values.htm)以获得很好的解释，尽管对此的默认 SO 问题是：[Least astonishment in Python](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)。

# java - Spring Data MongoDB Cross-Store 插件和 JPA PrePersist 和 PreUpdate

> ID：12155032
> 
> 赞同：0
> 
> 时间：2012-08-28T07:59:02.477
> 
> 标签：java, spring-data, spring-data-jpa, spring-data-mongodb

我们有一个具有以下设置的应用程序：

Java 6.0 Spring Data JPA 1.1.0.RELEASE Spring Data MongoDB 1.0.2.RELEASE Spring Data MongoDB Cross-Store 1.0.2.RELEASE Hibernate JPA 2.0

我们在这个应用程序中有几个使用 JPA PrePersist、PreUpdate、PostPersist 和 PostUpdate 注释的类。下面给出一个例子。

```
@Entity
public class Person
{
    private String password;

    @PrePersist
    @PreUpdate
    public void beforeSave()
    {
        if(!Security.isEncrypted(this.password))
        {
            this.password = Security.encrypt(this.password);
        }
    }
} 
```

一旦我们为跨存储插件打开 AspectJ weaving，Spring 应用程序上下文就无法加载并出现错误：

```
Caused by: javax.persistence.PersistenceException: You can only annotate one callback method with javax.persistence.PrePersist in bean class: org.example.domain.Person
    at org.hibernate.ejb.event.CallbackResolver.resolveCallback(CallbackResolver.java:110)
    at org.hibernate.ejb.event.EntityCallbackHandler.addCallback(EntityCallbackHandler.java:123)
    at org.hibernate.ejb.event.EntityCallbackHandler.add(EntityCallbackHandler.java:61)
    at org.hibernate.ejb.event.JpaIntegrator.integrate(JpaIntegrator.java:151)
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:306)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1744)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:94)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:268)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:310)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452) 
```

我发现错误的根本原因是 Aspect MongoDocumentBacking 将额外的 PrePersist 和 PreUpdate 方法编织到实体类中。由于这些类已经有带有这些注释的方法，Hibernate Entity Manager 无法验证这些类。

是否有关于跨商店插件应如何与具有使用 JPA 注释的现有代码的应用程序一起使用的任何指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T12:31:18.043

@PreUpdate 和@PostLoad 我也面临同样的问题。

在 springsource 中打开了一个关于此的错误： [https ://jira.springsource.org/browse/DATAMONGO-519](https://jira.springsource.org/browse/DATAMONGO-519)

他们给出了以下解决方案：

1.  创建 JPA 实体事件侦听器类并将 PrePersist、PreUpdate 等代码移动到这些侦听器中。
2.  将方面更改为首先搜索实体类是否具有注释为 RelatedDocument 的任何字段。
3.  如果一个实体类有一个或多个注解为 RelatedDocument 的字段，请检查该类是否已经有 EventListeners 注解。
4.  如果 EventListeners 注释已存在，请将跨商店事件侦听器添加到列表中。如果没有，请将 EventListeners 注释添加到类中。

我将所有注释移至实体侦听器，它立即工作，无需更改任何其他内容。看看下面的链接，好像只能在实体级别添加一个同一时间的注解，但是可以使用实体监听器添加很多：http: [//docs.jboss.org/hibernate/stable/entitymanager /reference/en/html/listeners.html](http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html/listeners.html)

```
@Entity
@EntityListeners(ProductEntityListener.class)
public class Product {
}

public class ProductEntityListener {
    @PrePersist
    @PreUpdate
    protected void prePersist(Product entity) {
    }
    @PostLoad
    protected void postLoad(Product entity){
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-06T09:45:58.787

我们在这里遇到了同样的问题：

一个*EntityListener*实现了一个带有通用参数的接口。在调试引发异常的 Hibernate 代码后，发现无法在此侦听器接口中为实体类型使用泛型。删除通用参数后，它起作用了。

原因：当在接口中使用泛型参数时，java 编译器（例如）为实现类（具体类型）和接口（超类型）创建一个*postUpdate(...)方法。*Hibernate 检测到这 2 个，但只需要一个。因此，它会引发异常。

# javascript - javascript函数不起作用但不显示任何错误

> ID：12155036
> 
> 赞同：1
> 
> 时间：2012-08-28T07:59:11.550
> 
> 标签：javascript, function

我在 roder 的 javascript 中完成了一个函数来计算辩护人内阁的费用。

他们要求我这样做，实际上它与文件的数量成正比。它是递减的。

金额越多，百分比就越少，但对于每个 .

事实上，当我没有首期付款时，它计算得很好。当我注册付款时，它不显示任何内容而且我在控制台中没有错误错误。

这是我完成的功能。

```
<script type="text/javascript">

function hono(p1,p2,p3,p4,t1,t2,t3,type,versement,montantacompte)
     {
         var p1             = 5000.00;
         var p2             = 5000.01;
         var p3             = 8000.00;
         var p4             = 8000.01;
         var t1             = 17.00;
         var t2             = 10.00;
         var t3             = 6.00;
         var type           = "d";
         var versement      = 150.00;
         var montantacompte = document.getElementById("montantacompte").value;

         if (type== "d")
            {
                if(versement== 0.00 && montantacompte <= p1)
                {
                    reste1= montantacompte;
                    pc= t1/100;
                    taux1= pc+1;
                    h1=((reste1*taux1)-reste1);
                    honoraires=h1;
                    document.getElementById('taux-1').value=t1;
                    document.getElementById('palier1').value=Math.round(h1*100)/100;
                    document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
                }
                else if(versement < p1 && (versement + montantacompte) <= p1)
                {
                    reste1= montantacompte;
                    pc= t1/100;
                    taux1= pc+1;
                    h1= (reste1*taux1)-reste1;
                    honoraires= h1;
                    document.getElementById('taux-1').value=t1;
                    document.getElementById('palier1').value=Math.round(h1*100)/100;
                    document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
                }
                else if(versement <= p1 && (versement+montantacompte)>= p2 && (versement+montantacompte)<=p3)
                {
                    reste1=p1-versement;
                    pc=t1/100;
                    taux1=pc+1;
                    h1=(reste1*taux1)-reste1;
                    reste2=montantacompte-reste1;
                    pc2=t2/100;
                    taux2=pc2+1;
                    h2=(reste2*taux2)-reste2;
                    honoraires=h1+h2;
                    document.getElementById('taux-1').value=t1;
                    document.getElementById('palier1').value=Math.round(h1*100)/100;
                    document.getElementById('taux-2').value=t2;
                    document.getElementById('palier2').value=Math.round(h2*100)/100;
                    document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
                }
                else if (versement==0.00 && montantacompte>=p2 && montantacompte <=p3)
                {
                    reste2=montantacompte-p1;
                    reste1=p1;
                    pc=(t1/100);
                    taux1=pc+1;
                    h1=((reste1*taux1)-reste1);
                    pc2=(t2/100);
                    taux2=pc2+1;
                    h2=((reste2*taux2)-reste2);
                    honoraires=(h1+h2);
                    document.getElementById('taux-1').value=t1;
                    document.getElementById('palier1').value=Math.round(h1*100)/100;
                    document.getElementById('taux-2').value=t2;
                    document.getElementById('palier2').value=Math.round(h2*100)/100;
                    document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
                }
                else if(versement<=p3 && versement>=p2 && (versement+montantacompte)>=p2 && (versement+montantacompte)<=p3)
                {
                reste1=montantacompte;
                pc=(t2/100);
                taux1=pc+1;
                h1=((reste1*taux1)-reste1);
                honoraires=h1;  
                document.getElementById('taux-1').value=t1;
                document.getElementById('palier1').value=Math.round(h1*100)/100;
                document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
                }
                else if(versement>=p2 && versement<=p3 && (versement+montantacompte)>=p4)
                {
                reste1=p4-versement;
                pc=(t2/100);
                taux2=pc+1;
                h2=((reste1*taux2)-reste1);
                reste2=montantacompte-reste1;
                pc2=(t3/100);
                taux3=pc2+1;
                h3=((reste2*taux3)-reste2);
                honoraires=(h2+h3);
                document.getElementById('taux-3').value=t3;
                document.getElementById('palier3').value=Math.round(h3*100)/100;
                document.getElementById('taux-2').value=t2;
                document.getElementById('palier2').value=Math.round(h2*100)/100;
                document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
            }
            else if(versement==0.00 && montantacompte>=p4)
            {
                reste1=p1;
                reste2=p3-p2;
                pc=(t1/100);
                taux1=pc+1;
                h1=((reste1*taux1)-reste1);
                pc2=(t2/100);
                taux2=pc2+1;
                h2=((reste2*taux2)-reste2);
                reste3=(montantacompte-reste1-reste2);
                pc3=(t3/100);
                taux3=pc3+1;
                h3=((reste3*taux3)-reste3);
                honoraires=(h1+h2+h3);
                document.getElementById('taux-1').value=t1;
                document.getElementById('palier1').value=Math.round(h1*100)/100;
                document.getElementById('taux-2').value=t2;
                document.getElementById('palier2').value=Math.round(h2*100)/100;
                document.getElementById('taux-3').value=t3;
                document.getElementById('palier3').value=Math.round(h3*100)/100;
                document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
            }
        else if(versement>=p4)
            {
                reste3=montantacompte;
                pc3=(t3/100);
                taux3=pc3+1;
                h3=((reste3*taux3)-reste3);
                honoraires=(h3);

                document.getElementById('taux-3').value=t3;
                document.getElementById('palier3').value=Math.round(h3*100)/100;
                document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
            }
        }
        if (type=="l")
        {
        pc1=(t1/100);
        taux1=pc1+1;
        honoraires=montantacompte*taux1;
        document.getElementById('taux-1').value=t1;
        document.getElementById('palier1').value=Math.round(h1*100)/100;
        document.getElementById('sommehonoraires').value=Math.round(honoraires*100)/100;
        }
    </script> 
```

此外，所有函数都使用 case`if(versement== 0.00 && montantacompte <= p1)`和 after，以此类推`else if(versement < p1 && (versement + montantacompte) <= p1)`直到结束。

我不明白为什么它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:15:21.690

尝试通过替换来“修复”它：

```
var montantacompte = document.getElementById("montantacompte").value; 
```

经过

```
var montantacompte = parseFloat(document.getElementById("montantacompte").value); 
```

似乎类型很混乱-当您获取字段值时，它是字符串，因此任何其他操作（例如 (versement+montantacompte) ）都将使用字符串而不是数字来完成。

# flyway - flyway：没有maven的db init？

> ID：12155037
> 
> 赞同：2
> 
> 时间：2012-08-28T07:59:20.090
> 
> 标签：flyway

恕我直言，使用 maven 进行迁移仅适用于开发机器。在服务器上，您通常没有可用的 Maven（并且可能无法将其安装在那里）。

那么：如何在没有 maven 的情况下初始化数据库？我只是调用 flyway.init() 吗？如果数据库已经被初始化了怎么办？

我可以执行 sql 语句来初始化数据库吗？我的外键和索引在不同的数据库实例之间是不同的/混乱的，所以我已经制作了一个完整的模式脚本，并通过数据导出、模式删除、模式重新创建和数据恢复对其进行了测试。我将在所有数据库上执行此操作，以确保它们完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:54:14.127

是的，您可以简单地调用 flyway.init()

您可以使用 flyway.status() 检查数据库是否已启动。

使用 Flyway 1.8，此过程将变得更加容易，其中引入了一个名为 initOnMigrate 的新属性。第一次运行时，它将在您运行 migrate 或仅在空数据库 (DEV) 上迁移时初始化现有的非空数据库 (PROD)。

# php - 如何在mysql数据库上传输条码号

> ID：12155041
> 
> 赞同：0
> 
> 时间：2012-08-28T07:59:32.153
> 
> 标签：php, jquery, ajax

我想在我的 mysql 数据库上发送我的产品条形码编号。当有人扫描产品条形码时，会自动在 mysql 数据库上传输条形码编号。有任何方法可以完成这项工作。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:07:45.803

我相信当条形码阅读器读取条形码时，表格会自动提交。所以最后添加输入。或者使用 javascript 捕获提交事件，并且在您实际点击提交之前不要提交。

这是一个让您入门的示例。

提交.php

```
<html>
    <head>
        <title>Insert product</title>
    </head>
    <body>
        <form method="post" action="insert.php">
            Product: <input type="text" name="product" /><br />
            Barcode: <input type="text" name="barcode" /><br />
            <input type="submit" value="Insert barcode" />
        </form>
    </body>
</html> 
```

插入.php

```
<?php
$db = new PDO('mysql:host=localhost;dbname=myDatabase', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false));

$barcode = $_POST['barcode'];
$product = $_POST['product'];

try {
    $db->beginTransaction();
    $stmt = $db->prepare("INSERT INTO `barcodes` (`barcode`, `product`) VALUES (:barcode, :product)");
    $stmt->execute(array(':barcode' => $barcode, ':product' => $product));
    $db->commit();
} catch(PDOException $ex) {
    $db->rollBack();
    echo $ex->getMessage();
}
?> 
```

# javascript - google.setOnLoadCallback() 不适用于单独的 JS 文件

> ID：12155047
> 
> 赞同：7
> 
> 时间：2012-08-28T08:00:03.083
> 
> 标签：javascript, google-visualization

我想使用 google api 在我的网站上绘制图表。但是，我的`google.setOnLoadCallback`功能有问题。这是我的代码（简化）：

尝试1：（工作正常）

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="js/styling.js"></script>
<script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(helloWorld);

    function helloWorld() {
        alert("Hello World");
    }

</script> 
```

尝试2：（工作正常）

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="js/styling.js"></script>
<script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(helloWorld);

</script> 
```

在 style.js 中我写道：

```
function helloWorld() {
    alert("Hello World");
} 
```

在这种情况下，一切正常。

然而......尝试3（失败！）

```
<script type="text/javascript" src="js/styling.js"></script> 
```

在 style.js 中，我写道：

```
 window.onload = function() {
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(helloWorld);
}   

function helloWorld() {
    alert("Hello World");
} 
```

这个不行。似乎`helloWorld()`根本没有调用。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T21:29:34.547

我会说该`setOnLoadCallback`事件根本没有被触发，因为当页面加载事件已经被触发时，您正在定义它的回调。

只需将页面加载的回调上下文保持在外部（两者都有，否则您会遇到上下文问题）`google.setOnLoadCallback(helloWorld);`。 `function helloWorld() {...}`

# jquery - jquery e.target.hasClass 不工作

> ID：12155050
> 
> 赞同：60
> 
> 时间：2012-08-28T08:00:09.670
> 
> 标签：jquery, events, onclick, classname

我动态创建了一个新的`div`（带有“文本框”类和 ID）以及其中的一些其他元素，稍后在我的代码中我将其绑定`div`到单击事件，并显示单击的元素，如下所示：

```
$('#textbox_'+i).bind('click', function(event){
    alert(event.target.className);
} 
```

这很好，它会给我`textbox`作为显示的课程之一。但`event.target.hasClass()`似乎不起作用。因此，当我执行以下操作时，没有任何反应：

```
$('#textbox_'+i).bind('click', function(event){
    if(event.target.hasClass('textbox')) { alert('got it!'); }
} 
```

我尝试了几种不同的方法，但在我看来这`event.target.hasClass()`不起作用。还有另一种处理事件的方法还是我做错了什么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-28T08:00:48.867

您正在尝试`hasClass()`在标准 DOM 元素上使用 jQuery 方法。您需要将普通的 JS DOM 元素`e.target`转换为 jQuery 对象，如下所示：

```
$(event.target).hasClass('textbox') 
```

你最终得到：

```
$('#textbox_'+i).on('click', function(event){
     if( $(event.target).hasClass('textbox')) alert('got it!');
}); 
```

注意函数的使用`on()`，函数的正确关闭，`click`如果你只执行一个简单的警报，你的 if 语句中不需要大括号。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2017-05-19T09:49:03.423

如果你想在不使用 jQuery 的情况下保持你的 JS DOM 元素简单......

```
event.target.classList.contains('textbox') 
```

# powershell-2.0 - 内容清晰的 Powershell 不起作用

> ID：12155052
> 
> 赞同：0
> 
> 时间：2012-08-28T08:00:13.947
> 
> 标签：powershell-2.0

我是 Powershell 的新手。我指的是[此链接中提到的 Clear-Content 示例](http://www.activexperts.com/network-monitor/windowsmanagement/powershell10/0026/)

我有一个目录`d:\data\lab.` 内部实验室不同的目录和子目录。每个目录和子目录都包含`*.txt file`.

我想写一个powershell命令，它会清空里面所有txt文件的内容`d:\data\lab`

我正在使用以下命令

```
Clear-Content D:\data\Lab\* -Filter *.txt 
```

我尝试了很多排列和组合，但它没有删除文件`d:\data\lab`夹内文本文件的内容。

有人可以帮忙吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:36:34.170

该函数似乎不支持递归到子目录的选项。所以它只会清除指定顶级目录中的日志内容。

您可以使用此单线递归清除日志内容（将文件保留在原处，但清除所有内容）：

```
dir d:\data\lab -recurse -filter *.txt |%{ Set-Content -Path $_.FullName -Value $null } 
```

# php - 如何在 PHP 代码和 OSX apache 的终端中获得相同的“安全”命令结果？

> ID：12155053
> 
> 赞同：3
> 
> 时间：2012-08-28T08:00:13.147
> 
> 标签：php, ios, xcode, xcodebuild

我在 OSX 的终端中得到了以下结果

> macpro-terminal$ whoami
> testuser
> 
> macpro-terminal$ groups
> staff com.apple.access_screensharing everyone _appstore localaccounts _appserverusr admin _appserveradm _lpadmin _lpoperator _developer com.apple.sharepoint.group.1
> 
> macpro-terminal$ security list-keychains
> "/Users/testuser/Library /Keychains/login.keychain" "/Library/Keychains/System.keychain"
> 
> macpro-terminal$ xcodebuild -project my.xcodeproj ......
> ......（构建结果）...... ......
> 建立成功

但是，我在 OSX apache 上的 PHP 代码中得到了不同的结果

# 测试.php

```
    $cpCommand = "whoami";
    $output = shell_exec($cpCommand);
    回声$输出；

    $cpCommand = "组";
    $output = shell_exec($cpCommand);
    回声$输出；

    $cpCommand = "安全列表-钥匙串";
    $output = shell_exec($cpCommand);
    回声$输出；

    $cpCommand = "xcodebuild -project my.xcodeproj ......";
    $output = shell_exec($cpCommand);
    回声$输出；

```

结果

> testuser
> 
> 员工 com.apple.access_screensharing 所有人 _appstore localaccounts _appserverusr admin _appserveradm _lpadmin _lpoperator _developer com.apple.sharepoint.group.1
> 
> "/Library/Keychains/System.keychain"
> "/Library/Keychains/apsd.keychain"
> "/Library/Keychains /System.keychain”
> （注释：/Users/testuser/Library/Keychains/login.keychain -> 不存在）
> 
> [BEROR]代码签名错误：身份'iPhone Distribution：testuser Co.,Ltd'不匹配任何钥匙串中有效、未过期的证书/私钥对
> 
> 构建失败

我尝试了 OS X 10.8（山狮），内置 apache2 和 PHP。
什么问题？
如何在 PHP 代码和 OSX apache 的终端中获得相同的“安全”命令结果？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T02:04:30.130

我遇到了非常相似的问题，但就我而言，它试图在 Bamboo 下进行构建。

我不能告诉你在你的情况下你需要做什么，但另一个问题的答案应该为你指明正确的方向。

[从分叉终端运行 xcodebuild](https://stackoverflow.com/questions/577750/running-xcodebuild-from-a-forked-terminal)

# objective-c - AVPlayer 不在 iOS 文档目录中播放 MP3 音频文件

> ID：12155055
> 
> 赞同：3
> 
> 时间：2012-08-28T08:00:16.943
> 
> 标签：objective-c, ios, avfoundation, avplayer

我正在使用 AVPlayer 播放位于文档目录中的 MP3（文件已确认在其中） - 我加载`AVPlayerItem`等待`AVPlayerItemStatusReadyToPlay`然后用该项目实例化`AVPlayer`并播放。

确实被调用了`AVPlayerItemStatusReadyToPlay`，但实际上没有播放音频，有人知道为什么吗？

```
- (void)checkFileExists {
    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.urlForEightBarAudioFile path]]) {
        [self beginEightBarDownload];
    } else {
        // set up audio
        [self setupAudio];

        //NSLog(@"file %@ already exists", [self.urlForEightBarAudioFile path]);
    }
}

- (void)setupAudio
{
    AVAsset *eightBarAsset = [AVAsset assetWithURL:self.urlForEightBarAudioFile];
    self.eightBarsPlayerItem = [[AVPlayerItem alloc] initWithAsset:eightBarAsset];
    [self.eightBarsPlayerItem addObserver:self forKeyPath:@"status" options:0 context:nil];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([object isKindOfClass:[AVPlayerItem class]])
    {
        AVPlayerItem *item = (AVPlayerItem *)object;

        if ([keyPath isEqualToString:@"status"])
        {
            switch(item.status)
            {
                case AVPlayerItemStatusFailed:
                    break;
                case AVPlayerItemStatusReadyToPlay:
                    self.player = [[AVPlayer alloc] initWithPlayerItem:self.eightBarsPlayerItem];
                    [self.player play];
                    NSLog(@"player item status is ready to play");
                    break;
                case AVPlayerItemStatusUnknown:
                    NSLog(@"player item status is unknown");
                    break;
            }
        }
        else if ([keyPath isEqualToString:@"playbackBufferEmpty"])
        {
            if (item.playbackBufferEmpty)
            {
                NSLog(@"player item playback buffer is empty");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:24:09.227

做这个：

```
- (void)setupAudio
{
 if([NSFileManager defaultManager] fileExistsAtPath:[self.urlForEightBarAudioFile absoluteString]])
 {
   AVAsset *eightBarAsset = [AVAsset assetWithURL:self.urlForEightBarAudioFile];
   self.eightBarsPlayerItem = [[AVPlayerItem alloc] initWithAsset:eightBarAsset];
   self.eightBarsPlayer = [AVPlayer playerWithPlayerItem:self.eightBarsPlayerItem]; //forgot this line
   [self.eightBarsPlayer addObserver:self forKeyPath:@"status" options:0 context:nil]; // add observer for player not item
 }
} 
```

参考[avplayer-and-local-files](https://stackoverflow.com/questions/9577471/avplayer-and-local-files)链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T10:03:29.173

迅速

```
func setupAudio() {
 if NSFileManager.defaultManager().fileExistsAtPath(self.urlForEightBarAudioFile.absoluteString) {
   self.eightBarsPlayerItem = AVPlayerItem(asset: AVAsset(URL: self.urlForEightBarAudioFile))
   self.eightBarsPlayer = AVPlayer(playerItem: self.eightBarsPlayerItem)
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-13T15:13:13.317

```
- (void)setupAudio
{
  dispatch_async(dispatch_get_main_queue(), ^{ 
  AVAsset *eightBarAsset = [AVAsset   assetWithURL:self.urlForEightBarAudioFile];
  self.eightBarsPlayerItem = [[AVPlayerItem alloc] initWithAsset:eightBarAsset];
  self.eightBarsPlayer = [AVPlayer  playerWithPlayerItem:self.eightBarsPlayerItem]; //forgot this line
  [self.eightBarsPlayer addObserver:self forKeyPath:@"status" options:0 context:nil]; // add observer for player not item
}); 
```

}

# sql - 多个表上连接的 SQL 查询性能

> ID：12155058
> 
> 赞同：2
> 
> 时间：2012-08-28T08:00:32.420
> 
> 标签：sql, oracle, oracle9i, sql-tuning

当我们在一个查询中连接超过 2-3 个表时，如果我们在所有表中都有一个公共列，那么我们在执行时会不会有什么不同？

1.  为所有表中的公共列指定值。

    例如：

    ```
    select e.*
    from emp e, dept d
    where e.deptno = 10
    and d.deptno = 10; 
    ```

2.  为其中一个公用列赋予价值并与另一列连接

    例如：

    ```
    select e.*
    from emp e, dept d
    where e.deptno = 10
    and d.deptno = e.deptno; 
    ```

问这个问题的原因是，我有一个查询（成本为 17），它在我指定示例 1 中的值时执行，但如果我加入示例 2 中的列，它会挂起并且永远不会执行。

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:06:48.590

这取决于索引。如果您在两个表中的该列上都有索引，则应该没有区别。但如果没有，第二个可能会慢得多。

deptno 是唯一的吗？（在任何一个表中。）如果是 make CERTAIN，您可以这样设置索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:40:43.487

我不同意唯一性问题。DEPTNO 在任一表上都不必是唯一的 - 但如果不是，查询可能会非常缓慢地响应。关于索引 - 是的，应该有一个单独的 DEPTNO 索引，或者将 DEPTNO 作为两个表的第一个字段。如果没有这样的索引，查询将非常慢。

关于查询结构 - 我更喜欢 ANSI 查询语法：

```
SELECT e.*
  FROM EMP e
  INNER JOIN DEPT d
    ON (d.DEPTNO = e.DEPTNO)
  WHERE e.DEPTNO = 10 
```

我不明白为什么要连接 DEPT 表，因为您没有使用其中的任何数据，除非 DEPT 中可能没有 DEPTNO=10 的行。假设 DEPT 中存在 DEPTNO=10 的行，您将通过执行获得相同的结果

```
SELECT e.*
  FROM EMP e
  WHERE e.DEPTNO = 10 
```

无需支付将 DEPT 加入 EMP 的每个结果行的成本 - 然后转身丢弃来自 DEPT 的数据。

分享和享受。

# javascript - 无法在第一次单击时禁用链接并在动画完成时重新启用

> ID：12155060
> 
> 赞同：2
> 
> 时间：2012-08-28T08:00:51.280
> 
> 标签：javascript, jquery, html, animation

我正在尝试在单击链接时执行一个简单的动画。我希望链接在第一次点击后被禁用，并且只有在动画完成后才重新启用，该动画是第一次调用的结果。

HTML：

```
<a id="link" href="#">Click</a>    
<div id="test" style="float:left;border:1px solid #000;width:100px;height:100px;">Test</div>
<div id="test2"></div>
​ 
```

jQuery：

```
$('#link').click(function(e){
  $('#link').bind('click', disableLink);
  ht = $('#test').height();
  $('#test').animate({height:'+=50'},5000,function(){$('#link').unbind('click', disableLink);});
  $('#test2').html(ht);
});

function disableLink(e) {
    e.preventDefault();
    return false;
} 
```

小提琴：http: [//jsfiddle.net/uHR7a/2/](http://jsfiddle.net/uHR7a/)

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:05:10.497

在您使用 jquery 时使用此代码：

```
 $('#link').click(function(e){
      $('#link').removeAttr('href');
      ht = $('#test').height();
      $('#test').animate({height:'+=50'},5000,function(){$('#link').attr('href', '#')});
      $('#test2').html(ht);
    });

    function disableLink(e) {
        e.preventDefault();
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:13:58.823

您可以在声明变量的地方使用匿名函数，`in_process`并取决于它是否启动新动画。

演示：http: [//jsfiddle.net/dUarG/1/](http://jsfiddle.net/dUarG/1/)

```
(function () {
    var in_process = false;

    $('#link').click(function (e) {
        e.preventDefault();

        if (!in_process) {
            in_process = true;

            $('#test').animate({height: '+=50'}, 2000, function () {
                in_process = false;
            });
        }  
    });
})();
​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:12:39.637

您可以为此使用`on()`和：`off()`

```
$('#link').on('click', anim); //bind click

function anim(e) {
    $(e.target).off('click'); //unbind click when animating
    ht = $('#test').height();
    $('#test').animate({
        height: '+=50'
    }, 5000, function() {
        $(e.target).on('click', anim); //rebind when done
    });
    $('#test2').html(ht);
}​ 
```

[**小提琴**](http://jsfiddle.net/4yE3t/1/)

# android - SimpleFramework 和 ORMLite - 外部集合 - 无法实例化

> ID：12155061
> 
> 赞同：0
> 
> 时间：2012-08-28T08:01:01.233
> 
> 标签：android, ormlite, foreign-collection

我们在我们的 Android 应用程序中使用 ORMLite 4.41 并面临这个问题：

在 A 类中定义了一列：

```
@Element(required = false)
@ForeignCollectionField(eager=true, orderColumnName="Name",
    columnName="TestItems")
public ForeignCollection<TestItem> Test 
```

在 B 类中，我们定义了外部列：

```
@DatabaseField(foreign=true, foreignAutoRefresh=true,
    columnName="TestItems")
public TestSummary TestItemId; 
```

当我们运行它并且它接收输入 XML 时，将调用 Serializer.read 方法，其中输出应该是填充了正在初始化的外键的类。

不幸的是，它总是停止，但有例外：

```
org.simpleframework.xml.core.InstantiationException: Cannot instantiate interface
    com.j256.ormlite.dao.ForeignCollection for field 'Test' public
    com.j256.ormlite.dao.ForeignCollection xxxxxxxx.TestModel$TestSummary.Test 
```

有什么方法可以`ForeignCollection`与 SimpleFramework 一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T01:03:27.880

尝试使用`Collection`代替，我认为你应该使用`ElementList`代替`Element`.

```
@ForeignCollectionField(eager=true, orderColumnName="Name",
    columnName="TestItems")
@ElementList(required = false)
public Collection<TestItem> Test 
```

# kinect - Kinect：如何从一些深度数据中获取骨架数据（从 kinect 获取，但我修改了一些地方）

> ID：12155062
> 
> 赞同：5
> 
> 时间：2012-08-28T08:01:02.653
> 
> 标签：kinect, depth

我可以从我的 Kinect 获取深度帧，然后修改帧中的数据。现在我想使用修改后的深度框架来获取骨架数据。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:45:30.197

好吧，我发现没有办法用 microsoft kinect sdks 做到这一点。现在，我发现使用 OpenNI 是可以的，它是 Primesense 的开源 API。

# tridion - Tridion 2011 CoreService 中的 BasedOnSchemas 选项

> ID：12155065
> 
> 赞同：9
> 
> 时间：2012-08-28T08:01:27.083
> 
> 标签：tridion, tridion-2011

我试图了解 OrganizationalItemItemsFilterData 过滤器中 BasedOnSchemas 选项的用途。

文档清楚地指出：“获取或设置 BasedOnSchemas 条件以仅返回使用给定模式的项目”所以应该可以只检索特定模式的组件，对吧？

这是我的代码：

```
LinkToSchemaData[] schemaLinks = new[] { 
        new LinkToSchemaData { IdRef = "tcm:113-362325-8" } 
    };

OrganizationalItemItemsFilterData filter = 
    new OrganizationalItemItemsFilterData();

filter.BaseColumns = ListBaseColumns.Extended;
filter.ItemTypes = new ItemType[] { ItemType.Component };
filter.Recursive = true;
filter.BasedOnSchemas = schemaLinks;

XElement items = client.GetListXml("tcm:113-14192-2", filter); 
```

然而， XElement`items`将包含多种类型的组件，而不仅仅是模式 tcm:113-362325-8 的组件

如何仅检索基于我的架构的那些组件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T08:18:57.537

不支持同时使用`BasedOnSchemas`和。`Recursive = true`去掉递归，你会发现模式过滤器起作用了。

如果您想获得某个 Schema 的所有组件的“递归”列表，请考虑在 Schema 上执行 WhereUsed。

```
GetListXml("tcm:5-59-8", new UsingItemsFilterData()) 
```

# algorithm - 可理解的聚类

> ID：12155068
> 
> 赞同：14
> 
> 时间：2012-08-28T08:01:44.133
> 
> 标签：algorithm, machine-learning, computer-science, data-mining, cluster-analysis

我有一个数据集。该集合的每个元素都由数字和分类变量组成。分类变量是名义变量和有序变量。这个数据集中有一些自然的结构。通常，专家使用他们的“专业知识”对我的数据集进行聚类，但我想自动化这个聚类过程。

大多数聚类算法使用对象之间的距离（欧几里得、马氏距离等）将它们分组到集群中。但是**很难为混合数据类型找到一些合理的度量标准**，即我们无法找到“玻璃”和“钢”之间的距离。所以我得出结论，我必须使用**条件概率** `P(feature = 'something' | Class)`和一些依赖于它们的效用函数。这对于分类变量是合理的，并且假设它们是正态分布的，它适用于数值变量。

所以我很清楚，像**K-means**这样的算法不会产生好的结果。

此时我尝试使用**COBWEB**算法，这完全符合我使用条件概率的想法。但是我遇到了另一个障碍：**集群化的结果真的很难解释**，如果不是不可能的话。结果，我想得到一组描述每个集群的规则（例如`if feature1 = 'a' and feature2 in [30, 60], it is cluster1`），比如用于分类的决策树。

**所以，我的问题是：**

是否有任何现有的聚类算法适用于混合数据类型并产生可理解的（并且对人类来说是合理的）集群描述。

**附加信息：**

据我了解，我的任务是在概念聚类领域。由于研究领域的原因，我无法像建议的那样定义相似函数（它是整个项目的最终目标） - 它在形式化方面非常复杂且无情。据我了解，最合理的方法是COBWEB中使用的方法，但我不确定如何适应它，所以我可以得到一个难以理解的集群描述。

**决策树**

正如建议的那样，我尝试在聚类输出上训练决策树，从而将聚类描述为一组规则。但不幸的是，对这条规则的解释几乎和原始聚类输出一样难。首先，来自根节点的一些第一级规则确实有意义：更接近叶 - 我们拥有的意义较小。其次，这些规则不符合任何专业知识。

因此，我得出结论，聚类是一个黑箱，不值得尝试解释其结果。

**还**

我有一个有趣的想法，以某种方式修改“回归决策树”算法：而不是计算组内方差，而是计算[类别效用函数](http://en.wikipedia.org/wiki/Category_utility)并将其用作**分割标准**。因此，我们应该有一个开箱即用的带有叶子集群和集群描述的决策树。但我没有尝试这样做，我不确定准确性和其他一切。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T16:35:07.683

对于大多数算法，您**需要定义相似性**。它不需要是适当的距离函数（例如满足三角不等式）。

K-means 特别糟糕，因为它还需要计算*均值*。因此，如果您无法计算均值，或者使用与欧几里得不同的距离函数，最好远离它。

但是，请考虑定义一个距离函数来捕获您的相似性领域知识。它可以由其他距离函数组成，比如您使用欧几里德距离的调和平均值（可能使用一些比例因子加权）和类别相似度函数。

一旦你有了一个不错的相似度函数，你就可以使用一大堆算法。例如[DBSCAN（维基百科）](http://en.wikipedia.org/wiki/DBSCAN)或[OPTICS（维基百科）](http://en.wikipedia.org/wiki/OPTICS_algorithm)。你可能对 ELKI 感兴趣，他们有一个[关于编写自定义距离函数的教程](http://elki.dbs.ifi.lmu.de/wiki/Tutorial/DistanceFunctions)。

**解释**是另一回事。*不幸*的是，很少有聚类算法会给你一个人类可读的他们发现的解释。它们可能会给您诸如代表之类的东西（例如，k-means 中集群的平均值），但仅此而已。但是当然，您接下来可以**在聚类输出上训练决策树，**并尝试**解释从聚类中学习到的决策树**。因为决策树的一个*非常好的特性是它们在某种程度上是人类可以理解的。*但是就像支持向量机不会给你解释一样，大多数（如果不是全部）聚类算法也不会这样做，对不起，除非你做这种后处理。另外，它实际上可以与*任何*聚类算法，如果您想比较多种算法，这是一个很好的属性。

去年有一个相关的出版物。它有点晦涩和实验性（在 ECML-PKDD 的一个研讨会上），并且要求数据集以排名的形式具有相当广泛的基本事实。在示例中，他们使用了颜色相似度排名和一些标签。关键思想是**分析集群并使用给定的基本事实找到最佳解释**。他们试图用它来例如说“发现的这个集群主要基于这个特定的绿色阴影，所以它不是很有趣，但是另一个集群不能很好地解释，你需要更仔细地研究它——也许是算法在这里发现了一些*新*东西”。但这是非常实验性的（研讨会是针对正在进行的研究类型的）。你*可能*只需将您的特征用作基本事实，就可以使用它。然后它应该检测一个集群*是否*可以很容易地用诸如“attribute5 is about. 0.4 with low variance”之类的东西来解释。但它不会*强行*创建这样的解释！

*   生命值。Kriegel, E. Schubert, A. Zimek在第二届 MultiClust 研讨会上
    **评估多个聚类解决方案**
    ：发现、总结和使用与 ECML PKDD 2011 结合举行的多个聚类。http: [//dme.rwth-aachen.de/en/MultiClust2011](http://dme.rwth-aachen.de/en/MultiClust2011)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T22:31:22.383

解决此类聚类问题的一种常用方法是定义一个统计模型来捕获数据的相关特征。可以通过使用混合模型（如在高斯混合模型中）得出聚类分配，然后找到特定数据点概率最高的混合分量。

在您的情况下，每个示例都是一个具有实数和分类分量的向量。一种简单的方法是分别对向量的每个分量进行建模。

我生成了一个小的示例数据集，其中每个示例都是二维向量。第一个维度是一个正态分布的变量，第二个维度是五个类别的选择（见图）：

![在此处输入图像描述](../Images/c44bf6e0aedb52585aee72ea58007fda.png)

有许多框架可用于为统计模型运行蒙特卡罗推理。BUGS 可能是最受欢迎的（[http://www.mrc-bsu.cam.ac.uk/bugs/](http://www.mrc-bsu.cam.ac.uk/bugs/)）。我在 Stan ( [http://mc-stan.org/](http://mc-stan.org/) ) 中创建了这个模型，它使用了不同于 BUG 的采样技术，并且对于许多问题更有效：

```
data {
  int<lower=0>  N; //number of data points
  int<lower=0>  C; //number of categories

  real x[N]; // normally distributed component data
  int y[N];  // categorical component data
}
parameters {
  real<lower=0,upper=1> theta; // mixture probability
  real mu[2]; // means for the normal component
  simplex[C] phi[2]; // categorical distributions for the categorical component
}

transformed parameters {
  real log_theta;
  real log_one_minus_theta;
  vector[C] log_phi[2];
  vector[C] alpha;

  log_theta <- log(theta);
  log_one_minus_theta <- log(1.0 - theta);

  for( c in 1:C)
    alpha[c] <- .5;

  for( k in 1:2)
    for( c in 1:C)
        log_phi[k,c] <- log(phi[k,c]);
}
model {
  theta ~ uniform(0,1); // equivalently, ~ beta(1,1);
  for (k in 1:2){
    mu[k] ~ normal(0,10);
    phi[k] ~ dirichlet(alpha);
  }

  for (n in 1:N) {
    lp__ <- lp__ + log_sum_exp(log_theta + normal_log(x[n],mu[1],1) + log_phi[1,y[n]],
                               log_one_minus_theta + normal_log(x[n],mu[2],1) + log_phi[2,y[n]]);
  }
} 
```

我编译并运行了 Stan 模型，并使用最终样本中的参数来计算每个混合分量下每个数据点的概率。然后，我将每个数据点分配给混合组件（集群），以恢复以下集群分配的概率更高：

![在此处输入图像描述](../Images/fb7f04d31566bb7241ee3a736da38af3.png)

基本上，如果您创建了适合您的数据集的模型，则每个混合组件的参数将为您提供每个集群的核心特征。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T15:55:40.220

对于您描述的异构、非欧几里得数据向量，[层次聚类算法](http://en.wikipedia.org/wiki/Hierarchical_clustering)通常效果最好。您描述的条件概率条件可以合并为用于执行集群聚集或划分的属性排序。生成的集群的语义很容易描述。

# android - 设置可展开列表的样式

> ID：12155070
> 
> 赞同：1
> 
> 时间：2012-08-28T08:02:01.203
> 
> 标签：android, listview, expandablelistview

我想在我的 Android 应用程序中为可扩展列表视图设置新样式。我正在 drawable 文件夹中创建一个*group_indicator.xml*文件，我正在其中编写代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_empty="true" android:drawable="@drawable/arrowright1">
    <item android:state_expanded="true" android:drawable="@drawable/arrowdown1">
    <item android:drawable="@drawable/arrowright1">
</item></item></item></selector> 
```

然后我`ExpandableList`在主文件的视图中使用这个 XML 文件：

```
<ExpandableListView
        android:id="@+id/android:list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:groupIndicator="@drawable/group_indicator"
        android:layout_weight="1" >
    </ExpandableListView> 
```

现在我想为我的可扩展列表设置更多样式，我想更改父节点和子节点的外观。

有没有其他方法可以做到这一点？我听说文件夹中有一些*style.xml*文件`res->values`，但我不知道如何实现它。请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T06:25:47.493

您需要使用实现自定义[ExpandableListAdapter](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html)

覆盖以下方法：

[getChildView](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html#getChildView%28int,%20int,%20boolean,%20android.view.View,%20android.view.ViewGroup%29) to override child view and inflate your own custom view. [getGroupView](http://developer.android.com/reference/android/widget/ExpandableListAdapter.html#getGroupView%28int,%20boolean,%20android.view.View,%20android.view.ViewGroup%29) to override group header view and inflate your own custom view.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T06:01:12.127

使用[ExpandableListView#setGroupIndicator(Drawable)](http://developer.android.com/reference/android/widget/ExpandableListView.html#setGroupIndicator%28android.graphics.drawable.Drawable%29)方法。它对我有用。希望它会帮助你。

# java - 使用java基本脚本在excel表中搜索

> ID：12155074
> 
> 赞同：0
> 
> 时间：2012-08-28T08:02:15.920
> 
> 标签：java, excel

我不知道如何进行这项任务。所以我将详细说明在这种情况下我需要/想要的东西..

1.  我想根据某些条件（指定 4 个条件）在 excel 表中搜索记录

2.  所以基于它我可能会找到 4 到 5 条符合条件的记录。我想在搜索窗口本身中逐行显示这些记录（如果我没记错的话，就像添加一个 excel 对象）

3.  然后，当我从搜索窗口的搜索结果中单击特定记录时，tat 记录的完整详细信息应显示在主屏幕中（即，它应将整个记录从 excel 表中检索到 GUI 控制台中。）

这就是任务。知道怎么做吗？如果可以将 excel 行添加为 excel 对象，那我该怎么做？任何教程..建议都会非常有帮助。

顺便说一句，我使用 java swing 和 excel 表作为后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:08:32.163

[Apache POI](http://poi.apache.org/)是用于处理 Office 文件（word、excel、powerpoint）的流行框架。一探究竟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:09:54.033

为了阅读 Java 中的 Excel 文档，我建议您使用[Apache POI](http://poi.apache.org/)等第三方库。

您必须从 Excel 中读取记录，并可能为这些记录创建您自己的模型实例。根据条件构建一些用于搜索的模型逻辑。将符合条件的那些放入`JTable`模型中。

处理表格中的鼠标事件或选择事件并再次使用您的模型来定位所选记录并在您必须的位置显示完整记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:12:11.880

看起来您需要一些库来在 Java 中即时读取和搜索 Excel 文件。

我推荐使用[Apache POI](http://poi.apache.org/spreadsheet/index.html)。

查看[快速指南](http://poi.apache.org/spreadsheet/quick-guide.html)和[获取单元格内容](http://poi.apache.org/spreadsheet/quick-guide.html#CellContents)。

# android - 从 android 平板电脑访问 FAT32 和 NTFS 格式的 USB Pendrive

> ID：12155076
> 
> 赞同：4
> 
> 时间：2012-08-28T08:02:45.997
> 
> 标签：android, usb, ntfs, fat32

我们的安卓平板电脑（版本 4.0.3）中有一个 USB 端口。

Pendrive 文件系统格式是

1.  NTFS
2.  FAT32

当 Pendrive 文件系统格式为`FAT32`文件已成功创建时。但是当文件系统格式`NTFS`为`open failed: EACCESS (Permission denied)`.

我需要从 USB Pendrive 中创建一个新文件。我试过我的示例代码是

```
Button createFile = (Button) findViewById(R.id.createFile);
createFile.setOnClickListener(new OnClickListener() 
{
    public void onClick(View v) 
    {
        try 
        {
            File root = new File("/mnt/usbhost1");
            Runtime.getRuntime().exec("chmod 777 " + root.getAbsolutePath());
            File myFile = new File(root,"createNew.txt");
            myFile.createNewFile();
            Toast.makeText(getBaseContext(), "Done Creating File", Toast.LENGTH_SHORT).show();
        } 
        catch (Exception e) 
        {
            Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
        }
    }
}); 
```

这`/usbhost1`是一个 Android 平板电脑 USB 路径。我在哪里弄错了。如何从`NTFS`文件系统格式创建新文件。

提前致谢。

问候
巴拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:27:35.753

您需要的是一种在您设备的内核中启用对 NTFS 支持的方法。这可以通过将 ntfs 驱动程序构建为可加载模块（.ko 文件）来动态实现。这需要针对您设备上运行的特定版本的内核来完成。

接下来，您需要一种在每次系统重新启动时自动加载模块的方法。这在 Android 中也是“可行的”。您可能想试试这个[**应用程序**](http://forum.xda-developers.com/showthread.php?t=1228605)正是这样做的。即加载一个或多个位于 Android 设备上任何位置的内核模块。

在此之后，每当插入具有 ntfs 分区的外部设备（USB 驱动器）时，内核将能够正确识别和挂载它。因此，应用程序可以在其适当的位置访问它，例如“/mnt/usbhost1”等。

# objective-c - 解释处理嵌套托管对象上下文时的“传递接力棒”方法

> ID：12155078
> 
> 赞同：0
> 
> 时间：2012-08-28T08:02:58.120
> 
> 标签：objective-c, core-data, nsmanagedobjectcontext

在有关嵌套上下文的 Apple 文档中，明确指出：

> 嵌套上下文比以往任何时候都更重要的是，采用“传递接力棒”的方法来访问上下文（通过将上下文从一个视图控制器传递到下一个视图控制器）而不是直接从应用程序委托中检索它。

具有 Java 背景的我习惯于在处理和传递对象时使用“传递引用的副本”。那么，您能否解释一下为什么强烈建议使用“接力棒”方法。

[OS X v10.7 和 iOS 5.0](http://developer.apple.com/library/mac/#releasenotes/DataManagement/RN-CoreData/_index.html)文档核心数据发行说明的链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:32:05.123

> 具有 Java 背景的我习惯于在处理和传递对象时使用“传递引用的副本”。那么，您能否解释一下为什么强烈建议使用“接力棒”方法。

这意味着同样的事情。Apple 建议您将指向视图控制器的指针传递给`NSManagedObjectContext`下一个视图控制器，以便让单例类拥有该指针，并且所有视图控制器都直接从该类中请求它（不必要的强耦合）。

# android - 进程中的意图解析为不同的进程

> ID：12155081
> 
> 赞同：1
> 
> 时间：2012-08-28T08:03:18.453
> 
> 标签：android, unit-testing, process

我的应用程序 A 和 B 中有两个活动，活动 A 是主要活动。在`androidmanifest.xml`文件中，活动 B 使用 android:process 属性进行描述，例如`android:process=":C"`.

在我的单元测试项目中，我想测试活动 B，我使用 startActivitySync 方法启动活动 B，但我得到了一个`java.lang.runtimexception:Intent in process A resolved to different process A:C.`

我不知道如何解决它，有人帮助我吗？

# android - 禁用标准 Android 键盘后 EditText 尺寸出现奇怪错误

> ID：12155082
> 
> 赞同：0
> 
> 时间：2012-08-28T08:03:25.487
> 
> 标签：android, android-layout, android-intent, android-widget

在我的应用程序中，我为每个 EditText 禁用了标准的 Android 键盘

```
myEditText.setInputType(0); 
```

但现在当我使用指令时：

```
myEditText.setText("string"); 
```

我的 EditText 的大小不适合您输入的文本的大小；所以文本没有全部显示。

我怎样才能解决这个问题？

这是我的xml：

```
<LinearLayout
    android:layout_width="305dp"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="DECIMAL:"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="25sp"
        android:textStyle="bold" android:textColor="#000000"/>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_weight="1"
        android:ems="10"
         >

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:07:50.493

如果你想禁用 editText，那么我建议使用 editText.setEnabled(false)。在您真正需要它之前，隐藏键盘不是正确的解决方案。但是如果你禁用了edittext，那么即使你专注于它，键盘也不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:39:37.260

我不认为问题是因为键盘。我在您的代码中观察到的一件事是，您正在`ems`设置`editText`. 我认为因为`ems`，editText 的大小始终是恒定的。检查[此](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3aems)链接以获取更多信息。

# android - 使用操作栏即时“复制”片段

> ID：12155084
> 
> 赞同：2
> 
> 时间：2012-08-28T08:03:29.247
> 
> 标签：android, android-fragments, android-actionbar

我在这里阅读了几篇关于分离和附加的帖子。但这应该没问题，因为我正在运行 API 15。

我从一开始就得到了一个双重列表，就像你在这张照片上看到的那样： ![活动图片](../Images/a14b51a8cfcbc76ccf1df3db91e9120a.png)

我有以下代码：（MainActivity）

```
 package dk.metnik.fragmentandactionbar;

import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.ActionBar.TabListener;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;
import android.os.Bundle;
import dk.metnik.fragmentandactionbar.fragments.DCIMFragment;
import dk.metnik.fragmentandactionbar.fragments.ESSFragment;
import dk.metnik.fragmentandactionbar.fragments.TeamshareFragment;

public class FragAndBarActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        setupTabs();
    }

    private void setupTabs() {
        // setup action bar for tabs
        ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        actionBar.setDisplayShowTitleEnabled(false);

        Tab tab = actionBar
                .newTab()
                .setText("DCIM")
                .setTabListener(
                        new MyTabListener<DCIMFragment>(this, "DCIM",
                                DCIMFragment.class));
        actionBar.addTab(tab);

        tab = actionBar
                .newTab()
                .setText("ESS")
                .setTabListener(
                        new MyTabListener<ESSFragment>(this, "ESS",
                                ESSFragment.class));
        actionBar.addTab(tab);

        tab = actionBar
                .newTab()
                .setText("TeamShare")
                .setTabListener(
                        new MyTabListener<TeamshareFragment>(this, "TeamShare",
                                TeamshareFragment.class));
        actionBar.addTab(tab);
    }

    public static class MyTabListener<T extends Fragment> implements
            TabListener {
        private Fragment mFragment;
        private final Activity mActivity;
        private final String mTag;
        private final Class<T> mClass;

        /**
         * Constructor used each time a new tab is created.
         * 
         * @param activity
         *            The host Activity, used to instantiate the fragment
         * @param tag
         *            The identifier tag for the fragment
         * @param clz
         *            The fragment's Class, used to instantiate the fragment
         */

        public MyTabListener(Activity activity, String tag, Class<T> clz) {
            mActivity = activity;
            mTag = tag;
            mClass = clz;

            mFragment = mActivity.getFragmentManager().findFragmentByTag(mTag);
            if (mFragment != null) { // && !mFragment.isDetached()) {
                FragmentTransaction ft = mActivity.getFragmentManager()
                        .beginTransaction();
                // ft.detach(mFragment);
                ft.remove(mFragment);
                ft.commit();
            }
        }

        /* The following are each of the ActionBar.TabListener callbacks */

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // Check if the fragment is already initialized
            if (mFragment == null) {
                // If not, instantiate and add it to the activity
                mFragment = Fragment.instantiate(mActivity, mClass.getName());
                ft.add(R.id.listFragment, mFragment, mTag);
            } else {
                ft.attach(mFragment);
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (mFragment != null) {
                ft.detach(mFragment);
            }
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
        }
    }
} 
```

还有我的 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:35:29.410

您正在通过 layout.xml 使用 Fragment 实例化视图：

```
<fragment
    android:id="@+id/listFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="dk.metnik.fragmentandactionbar.fragments.TeamshareFragment" /> 
```

然后，您将创建一个选项卡系统，其中将选择第一个选项卡，并在顶部添加另一个片段（我猜是透明背景）。

删除`class=""`并将您的更改`<fragment>`为`<FrameLayout>`. 这将停止初始片段加载，同时为您提供定义的视图来容纳您的片段。

此外，您正在将新片段添加到 Android 基础 View`android.R.id.content`中。这取决于您的功能是合理的，但如果您希望 Fragment 占用元素的空间，您应该使用它的 id。改变：

```
ft.add(android.R.id.content, mFragment, mTag); 
```

到

```
ft.add(R.id.listFragment, mFragment, mTag); 
```

# visual-studio-2012 - Visual Studio 2012 + 商业智能模板

> ID：12155085
> 
> 赞同：14
> 
> 时间：2012-08-28T08:03:30.000
> 
> 标签：visual-studio-2012, sql-server-data-tools

我在我的机器上安装了 SQL Server 2012，并且我有 SSDT 来创建 BI 项目。

今天我安装了 Visual Studio 2012；但我无法在 Visual Studio 2012 中创建任何 BI 项目。有没有办法可以在 VS 2012 中打开 BI (SSIS/SSAS/SSRS) 项目，或者我是否必须始终返回 SSDT 才能打开它们。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T13:15:37.463

SSRS 开发功能于 2013 年 3 月可用于[Visual Studio 2012](http://visualstudiomagazine.com/blogs/data-driver/2013/03/bids-templates-added-to-visual-studio-2012.aspx "BIDS 模板在 SSDT 更新中加入 Visual Studio 2012 -- Visual Studio Magazine")。并且微软开始区分 SSDT 和 SSDT-BI（其中包含 BI 工具）。它们是互补的安装，必须安装两者，Visual Studio 才能愉快地使用 SSRS 报告。

[SSRS开发所需](http://msdn.microsoft.com/en-us/data/hh297027 "SQL Server 数据工具下载")的组件如下：

*   [下载适用于 Visual Studio 2012 的 SSDT](http://go.microsoft.com/fwlink/?LinkID=274984 "下载适用于 Visual Studio 2012 的 SSDT")
*   [下载适用于 Visual Studio 2012 的 SSDT-BI](http://www.microsoft.com/en-us/download/details.aspx?id=36843 "下载适用于 Visual Studio 2012 的 SSDT-BI")
*   [下载数据层应用程序框架（2013 年 3 月）](http://www.microsoft.com/en-us/download/details.aspx?id=36842 "下载数据层应用程序框架（2013 年 3 月）")

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-28T17:46:38.047

看看[这篇](http://www.jamesserra.com/archive/2012/04/ssdt-installation-confusion/)博文。基本上，有两个版本的 SSDT（尽管 Microsoft 从未明确说明这一点），并且根据您安装 SSDT 的方式，您会得到一个或另一个版本。进一步说明，SSDT 仅适用于 SQL Server 2012 中的 BIDS，不适用于 2008R2。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T20:42:11.877

除此之外，只有 SQL Server Data Tools 2010/VS2010 可以访问整个 BI 套件。这对于 VS2012/SQL Server Data Tools 2012 尚不可用，它只能访问 SQL 数据库项目。幸运的是（或者可能不是），两者都可以安装到同一个系统中而不会发生系统冲突。至于你的精神冲突，你的里程可能会有所不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T08:35:55.077

现在可以在[http://www.microsoft.com/en-us/download/details.aspx?id=36843作为附加下载](http://www.microsoft.com/en-us/download/details.aspx?id=36843)

# c++ - Boost asio - udp 服务器

> ID：12155086
> 
> 赞同：3
> 
> 时间：2012-08-28T08:03:33.050
> 
> 标签：c++, networking, boost, boost-asio

我从 boost doc 中看到了官方的异步 udp 服务器示例。在那里，您创建一个 udp 套接字，将其绑定到本地端口并执行以下操作：

```
socket(ioService, boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(), port))

socket.async_receive_from(buffer(data, max_length), senderEndpoint, boost::bind(&Request::HandleReceiveFrom, this,
    boost::asio::placeholders::error,
      boost::asio::placeholders::bytes_transferred)); 
```

如何处理来自客户端的多个并发 udp 连接，因为如果我尝试使用创建另一个套接字

```
socket(ioService, boost::asio::ip::udp::endpoint(boost::asio::ip::udp::v4(), port)) 
```

我收到绑定错误，因为我已经有一个绑定到同一个端口的套接字。

**编辑** 我可以使用不同的服务器源端口向客户端发送回响应，但即使我将响应发送回相同的客户端 ip/客户端目标端口，它们也不会识别响应。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:28:05.253

UDP 是一种无连接传输，因此就 UDP 而言，连接的概念毫无意义。

如果要将数据发送回消息的发起者，则需要保留 async_receive_from 回调中返回的 sender_endpoint 的副本，并将其传递回 async_send_to。

这也假设客户端也在轮询/阅读并期待回复。它不需要侦听与服务器相同的绑定端口（您不需要在客户端绑定 UDP）。

我建议您阅读 Beej 的网络编程指南，以帮助您了解 boost ASIO 的幕后工作。Boost ASIO 使事情复杂化了很多恕我直言。

[http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#sendtorecv](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html#sendtorecv)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:39:57.660

如果您的客户端将他们的消息发送到您服务器上的同一端口，那么区分它们的唯一方法是通过远程端口或远程端口和远程 ip 的组合。

您创建某种从客户端 ID（例如`pair<remote_ip, remote_port>`）到调度程序类型（例如`map< pair<remote_ip, remote_port>, dispatcher>`）的映射。然后由您决定使其线程化以支持并发请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T18:02:00.700

看起来解决方案可以是使用相同的套接字将响应发送回客户端。看看这个问题的回复：[Use same udp socket for async receive/send](https://stackoverflow.com/questions/12252822/use-same-udp-socket-for-async-receive-send/12272053#comment16486980_12272053)

# testing - 在虚拟机上执行测试时找不到静态文本控件

> ID：12155088
> 
> 赞同：0
> 
> 时间：2012-08-28T08:03:48.980
> 
> 标签：testing, ui-automation, coded-ui-tests

我正在使用 Microsoft 自动化 UI 框架来开发我的自动化测试用例。我面临的问题与与静态文本控件的交互有关。我只是想获取控件的文本。当我在本地机器上运行测试时，测试工作完美。问题是当我通过测试控制器在（无论哪个）测试代理上运行测试时。出现的错误是找不到静态控件文本。

Theis 是我尝试初始化要与之交互的控件的代码的一部分：

```
 private void Init(TreeScope treeScope, params Condition[] properties)
    {
        try
        {
            List<Condition> propertiesList = properties.ToList();
            propertiesList.Add(Condition.TrueCondition);

            bool controlFound = Wait.ForCondition(
                () =>
                {
                    try
                    {
                        TestControl = Parent.FindFirst(treeScope,
                            new System.Windows.Automation.AndCondition(propertiesList.ToArray()));
                        return !TestControl.Current.IsOffscreen;
                    }
                    catch
                    {
                        return false;
                    }
                });

            if (!controlFound)
            {
                throw new ElementNotAvailableException(DescriptiveName + "Control is NOT found");
            }

            this.GetItAsUITestControl().WaitForControlReady(Playback.PlaybackSettings.WaitForReadyTimeout);
            if (TestControl.Current.IsKeyboardFocusable)
            {
                TestControl.SetFocus();
            }

            string controlFullName = this.TestControl.Current.ControlType.ProgrammaticName;
            DescriptiveName = "< " + DescriptiveName + " " + controlFullName.Substring(controlFullName.LastIndexOf(".")) + " >";

        }
        catch (ElementNotAvailableException ex)
        {
            Report.Error(ex.Message);
        }
        catch (Exception ex)
        {
            Report.Error(ex.Message);
        }
    } 
```

有任何想法吗？

我正在使用 Microsoft System Center Virtual Machine Manager 2008 R2 来管理我的虚拟机（我认为所有机器都是 vmware）。但从我的角度来看，问题不在于虚拟机，因为除了验证静态文本控件内容的测试之外，所有测试都在虚拟机上执行，没有任何问题。我 100% 确定执行测试的 VM 的桌面是活动的，因为我可以使用 VMWare 远程控制台查看它。

在远程机器上执行测试方面，我使用的是 Visual Studio 附带的测试控制器和测试代理。

# asp.net-mvc-3 - 如何对特殊符号进行验证？

> ID：12155091
> 
> 赞同：0
> 
> 时间：2012-08-28T08:03:53.923
> 
> 标签：asp.net-mvc-3, entity-framework-4

我正在开发 MVC 应用程序。

在应用程序中有一个移动领域。我想允许插入数字和 +,-,(,) 字符。如何为此编写验证？

现在我只有下面的代码。

```
 [StringLength(15, ErrorMessage = "Mobile can accept maximum 15 characters.")]
   public string Mobile { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T12:04:18.590

就像是

```
^[\+\-\(\)0-9]{10,15}$ 
```

应该做的伎俩。

将该模式与正则表达式属性一起使用

问候

硅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:10:09.523

使用正则表达式验证器。

```
[RegularExpression(@"Pattern", ErrorMessage = "Error Message")] 
```

# windows - SHFileOperation FOF_ALLOWUNDO 在长文件名上失败

> ID：12155094
> 
> 赞同：3
> 
> 时间：2012-08-28T08:04:10.930
> 
> 标签：windows, mfc, shfileoperation

我正在使用以下函数将文件删除到回收站：（C++、MFC、Unicode）

```
bool DeleteFileToPaperbasket (CString filename)
{
   TCHAR Buffer[2048+4];

   _tcsncpy_s (Buffer, 2048+4, filename, 2048);
   Buffer[_tcslen(Buffer)+1]=0; //Double-Null-Termination

   SHFILEOPSTRUCT s;
   s.hwnd                  = NULL;
   s.wFunc                 = FO_DELETE;
   s.pFrom                 = Buffer;
   s.pTo                   = NULL;
   s.fFlags                = FOF_ALLOWUNDO | FOF_SILENT | FOF_NOERRORUI;
   s.fAnyOperationsAborted = false;
   s.hNameMappings         = NULL;
   s.lpszProgressTitle     = NULL;

   int rc = SHFileOperation(&s);

   return (rc==0);
} 
```

这适用于大多数文件。但是如果路径+文件名超过 255 个字符（并且仍然比 2048 个字符短得多），SHFileOperation 返回 124。即 DE_INVALIDFILES。

但是怎么了？我检查了一切一百万次。路径是双空终止的，我没有使用 \\?\ 它适用于短文件名。

我完全没有想法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T22:05:03.010

我认为向后可比性以多种方式让您陷入困境，我需要实际查看您使用的路径并实施一些错误检查代码来提供帮助。但这里有一些提示。

1.  您不会得到 DE_INVALIDFILES 0x7C “源或目标或两者中的路径无效。” 对于最大路径违规，你会得到一个 DE_PATHTOODEEP 0x79“源或目标路径超过或将超过 MAX_PATH。”

2.  这些错误代码（返回值）确实，可以并且随着时间的推移而改变，要确定您的特定错误代码是什么意思，您需要使用[GetLastError 函数（msdn）检查它](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx)

3.  此外，取自[SHFileOperation 函数文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)：“如果您不检查 fAnyOperationsAborted 以及返回值，则您无法知道该函数完成了您要求它完成的全部任务，您可能会在不正确的假设下继续进行。”

4.  您不应该将此 API 用于极长的路径名，它已在 vista+ 中被[IFileOperation 接口替换](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775771%28v=vs.85%29.aspx)

5.  为什么它可以在资源管理器中工作而不是通过这个**LEGACY** api 的解释是——取自关于[命名文件、路径和命名空间的 msdn 页面](http://msdn.microsoft.com/en-us/library/aa365247.aspx)

> shell 和文件系统有不同的要求。可以使用 shell 用户界面无法正确解释的 Windows API 创建路径。

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:21:29.923

回收站不支持路径长度超过 MAX_PATH 的文件。您可以通过尝试在资源管理器中回收此类文件来自己验证这一点 - 您将收到有关路径太长的错误消息。

# iphone - 如何在iphone中单击segmentControl时更改标签文本

> ID：12155098
> 
> 赞同：0
> 
> 时间：2012-08-28T08:04:43.270
> 
> 标签：iphone, xcode, uisegmentedcontrol

我在 iphone 应用程序中使用 segmentedControl 我想要什么时候

是和否

我也有一个lable，我希望在选择“是”时应显示是的，是其他明智的明智

但它并没有随着我的代码而改变

```
 -(IBAction)segmentedControlIndexChanged{

   switch (self.segmentedControl.selectedSegmentIndex) {
    case 0:
        self.segmentLabel.text =@"YES";
        break;
    case 1:
        self.segmentLabel.text =@"NO";
        break;

    default:
        break;

}

   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:11:01.303

非常简单的使用 setTitle:forSegmentAtIndex:

所以代码应该看起来像

```
NSString *str;
switch (self.segmentedControl.selectedSegmentIndex) {
case 0: {
    str = @"YES";
    break;
}
case 1: {
    str = @"NO";
    break;
}
default:
    break;

[self.segmentedControll setTitle:str forSegmentAtIndex:self.segmentedControl.selectedSegmentIndex] 
```

或更简单的版本

```
if (self.segmentedControl.selectedSegmentIndex == 0) {
    [self.segmentedControll setTitle:@"YES" forSegmentAtIndex:self.segmentedControl.selectedSegmentIndex]
}
else if (self.segmentedControl.selectedSegmentIndex == 1) {
    [self.segmentedControll setTitle:@"NO" forSegmentAtIndex:self.segmentedControl.selectedSegmentIndex]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:53:56.923

![在此处输入图像描述](../Images/0d46198f387e7502589d5c41d31a147c.png)

查看图片并按照图片进行正确接线（选择 Value changed 选项）。

```
-(IBAction)valueChanged:(id)sender
{

if (self.segmentedControl.selectedSegmentIndex == 0) {
    [self.segmentedControll setTitle:@"YES" forSegmentAtIndex:self.segmentedControl.selectedSegmentIndex]
}
else if (self.segmentedControl.selectedSegmentIndex == 1) {
    [self.segmentedControll setTitle:@"NO" forSegmentAtIndex:self.segmentedControl.selectedSegmentIndex]
}

} 
```

# xmpp - Nimbuzz 是加密的？

> ID：12155099
> 
> 赞同：0
> 
> 时间：2012-08-28T08:04:58.323
> 
> 标签：xmpp, nimbuzz

我在 ipad Galaxy 和 pc 上捕获 nimbuzz 流量，有时 xmpp 中的流量似乎是一些二进制文件？它是加密的吗？有人知道怎么读吗？它不是纯文本.. 数据包文本示例：它可能是压缩的吗？有谁知道怎么解压？

```
\262\311,\004\371E\311\320\300\330$>\263 #?/53%^I\241\244\262 \325V\t\250\2424\247D\211D\327\331\331de\246\330\025\344\224\002\2238(\225\033: \205\213>\304\022SKc#`v\002)\264\321\a\351\002R\231\205v\000\000\000\000\377\377 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:56:13.993

它可能既压缩又加密。请先阅读[RFC 6120](https://www.rfc-editor.org/rfc/rfc6120)，然后可能是[XEP-0138](http://xmpp.org/extensions/xep-0138.html)。

# c# - 使用 Visual Studio 安装项目安装后删除特定文件

> ID：12155101
> 
> 赞同：1
> 
> 时间：2012-08-28T08:05:06.187
> 
> 标签：c#, visual-studio-2008, installation, setup-project

我有这个问题。我想为我的 c# 解决方案构建一个安装程序，它将与其他安装文件夹和需要复制到已安装文件夹的文件一起放置在一个文件夹中。这很简单，我只需将它们复制到我使用我想要的文件夹结构创建的文件夹中。

现在，我还想安装另一个程序并运行我创建的 .exe 文件来为我解压缩一些文件。为此，我需要将 2 个 .exe 文件和 2 个 dll（用于 exe）复制到我要安装的文件夹中，并创建 2 个将使用它们的自定义操作。我已经做到了。

之后我想删除这 4 个额外的文件，因为用户不需要它们，甚至不应该知道它们在那里。怎么做？我在内置的安装项目首选项中找不到方法+我不知道如何制作自定义安装程序类。

一个额外的问题是，如何让其他安装程序（其中一个 .exe 文件只是一个普通的安装程序）安静地安装到任何路径？我不希望用户看到安装程序从我的程序安装程序中弹出。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:37:38.650

不。尝试自动修复您的应用程序等问题的 Windows Installer 会遇到很多问题。您也许可以使用更高级的安装程序创建器（例如[WiX](http://wix.sourceforge.net/) ）来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T13:21:18.813

一些商业设置创作工具支持临时文件。它们在安装开始时被提取，并在安装结束时自动删除。它们从未向 Windows Installer 注册。

您可以在此处找到安装工具列表： [http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

关于先决条件，它取决于它的安装包。只有当它通过命令行支持时，您才能静默安装它。

# c# - 验证转发器的输出

> ID：12155104
> 
> 赞同：0
> 
> 时间：2012-08-28T08:05:14.333
> 
> 标签：c#, asp.net, repeater

我是 ASP.net 的新手，我正在尝试验证我的 SQL DB 的一些输出。

我想测试我的数据库中的“img”是否设置为 somthing，如果我不想输出它。

```
<asp:SqlDataSource ID="selectFromNews" runat="server" ConnectionString="<%$ ConnectionStrings:DatabaseConnectionString1 %>"
    ProviderName="<%$ ConnectionStrings:DatabaseConnectionString1.ProviderName %>"    
    SelectCommand="SELECT * FROM [news] ORDER BY [time] DESC">
</asp:SqlDataSource>

<asp:Repeater ID="newsRepeater" runat="server" DataSourceID="selectFromNews" onitemcommand="newsRepeater_ItemCommand">
    <HeaderTemplate></HeaderTemplate>
    <ItemTemplate>
        <div class="newsBox">
            <h1><%# Eval("title") %></h1>
            /* Test if "img" is set to somthing, and output it here, if not, do somthing else */
            <p><%# Eval("text") %></p>
        </div>
    </ItemTemplate>
    <FooterTemplate></FooterTemplate>
</asp:Repeater> 
```

我正在考虑从后面的代码中获取数据，然后测试并将输出发送回文字，但不知道如何从那里访问转发器数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:13:32.707

首先在Repeater中添加图像控件为

```
 <asp:Image ID="ImageID" runat="server" ImageUrl='<%# Eval("img")%>' Visible="false" /> 
```

然后在中继器的 ItemDataBound 事件中获取此图像控件

```
 protected void YourRepeater_ItemDataBound(object sender, RepeaterItemEventArgs e)
      {
           if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
            {
               Image ImageID= e.Item.FindControl("ImageID") as Image;
              // now play with your ImageID control..
            }
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:10:51.717

不幸的是，`<% If ... Else ... End %>`中继器中的块的使用不可用（相信我，我已经想要它们很多次了）。

最简单的方法是调用代码隐藏函数。例如...

```
protected string MyFunction(RepeaterItem row)
{
   // return based on row.DataItem value
   return (row.DataItem.ImgExists ? "Image" : "No Image");
} 
```

然后在标记中，您只需传递`Container`对象...

```
<%#MyFunction(Container)%> 
```

**编辑**......虽然对于更复杂的视觉变化，我会推荐`ItemDataBound`蒂姆和乌斯曼（和尼基尔）提供的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:12:18.540

您应该使用中继器的[`ItemDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)事件：

```
protected void Repeater1_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    RepeaterItem ri = e.Item;
    DataRowView dr = (DataRowView)ri.DataItem;
    Panel Panel1 = (Panel)ri.FindControl("Panel1");
    // do your evaluation here according the values in the DataRowView     
    // use ri.FindControl("ID") to find controls in the Itemtemplate
} 
```

aspx：

```
<ItemTemplate>
    <asp:Panel id="Panel1" runat="server" class="newsBox">
        <h1><%# Eval("title") %></h1>
         add controls here with runat=server, then you can find them from codebehind
        <p><%# Eval("text") %></p>
    </asp:Panel>
</ItemTemplate> 
```

# c# - Twitterizer on Mono - call to UpdateWithMedia hangs

> ID：12155105
> 
> 赞同：0
> 
> 时间：2012-08-28T08:05:17.233
> 
> 标签：c#, mono, twitterizer, raspberry-pi

I have been using mono and the excellent Twitterizer libraries to post tweets from my Raspberry Pi. The goal being to tweet pictures captured by a webcam periodically.

The problem I have is that when I make a call to "UpdateWithMedia" on mono it just hangs - seemingly forever. Works fine on Windows.

I've created the following unit tests to demonstrate. Both pass on Windows. On Mono/linux "SimpleTwitterPost" passes but "ImagePost" hangs just after writing the filename to the console.

```
[Test]
public void SimpleTwitterPost()
{
    var response = TwitterStatus.Update(tokens, "Here's an automated tweet from my new Raspberry Pi Brain");
    Console.WriteLine(response.ErrorMessage);
    Assert.That(response.Result, Is.EqualTo(RequestResult.Success));
}

[Test]
public void ImagePost()
{
    string filename = "Pics" + Path.DirectorySeparatorChar + "DukeInABush.jpg";

    Assert.That(File.Exists(filename));
    Console.WriteLine("File to open: {0}", filename);

    var response = TwitterStatus.UpdateWithMedia(tokens, "Me in a bush", filename);

    Console.WriteLine("Did it!");
    Assert.That(response.Result, Is.EqualTo(RequestResult.Success));
} 
```

I have tried the overload of "UpdateWithMedia" which takes a byte array but no luck. I can read the file into the byte array fine but the call to "UpdateWithMedia" hangs as before.

For ref, using mono/.NET 4.0 on Archlinux on raspberry pi (arm).

Anyone got any experience with Twitterizer on this platform?

# python - Python中具有一些固定元素的排列方法

> ID：12155111
> 
> 赞同：4
> 
> 时间：2012-08-28T08:05:40.930
> 
> 标签：python, permutation, restrictions

现在花了相当多的时间试图想出一种方法（我认为）应该是一个相对简单的过程，我设法编写了将产生结果的代码（感谢这个精彩论坛上的建议！） ，但根据我的计算，计算所有可能性需要几年时间，所以我拼命寻求帮助，因为我担心我的电脑可能活不到那一天。:) 任何输入将不胜感激！

我想要实现的是来自 10 个唯一条目的列表（例如 ['A','B','C','D','E','F','G',H','I ','J'])，获取长度为 10 的字符串上的所有排列，但要求元素中的 1 个（例如 'C'）应恰好出现 3 次，并且出现在所有可能的位置。

现在我正在使用：

```
options = ['A','B','C','D','E','F','G','H','I','J']
def combos(options,n):
    if (n <= 0): return
    for s in options:
        if len(s) <= n: yield s
        for t in combos(options,n-len(s)): yield s+t

for x in combos(options,10):
    if x.count("C") == 3 and len(x) == 10:
        print x 
```

这样，它正在计算所有可能的排列并选择具有 3 个“Cs”的排列，因此会生成大量不包含 3 个“Cs”的不必要排列，因此它花费的时间比必要的要长。有人对我如何让 Python 在生成排列时遵守 3x 'C' 限制有任何建议吗？

很多，非常感谢提前！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:08:04.800

最简单的方法是使用其他字母生成 7 个元素的排列，然后将三个 C 插入其中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T08:13:18.590

[`itertools`](http://docs.python.org/library/itertools.html)是你的朋友：

```
from itertools import chain, imap, permutations, combinations, repeat
others = [o for o in options if o != 'C']
chain.from_iterable(permutations(*chain(repeat('C', 3), x))
                    for x in combinations(others, 7)) 
```

编辑：这将给出排列，而不是组合；如果你想要结果，`AAAAAAACCC .. CCCJJJJJJJ`那么它必须略有不同。这是一个相当有效的产品/过滤器解决方案：

```
from itertools import product
(x for x in product(options, repeat=10) if x.count('C') == 3) 
```

这是一种使用 BrenBarn 建议的交错的方法：

```
from itertools import product
others = [o for o in options if o != 'C']
(r[:i] + ('C',) + r[i:j] + ('C',) + r[j:k] + ('C',) + r[k:]
 for r in product(others, repeat=7)
 for i in range(8) for j in range(i, 8) for k in range(j, 8)) 
```

您需要自己测试，但对我来说，交错方法要快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:45:44.320

BrenBarn 的建议可以给出：

```
from itertools import product, combinations

otheroptions = ['A','B',   'D','E','F','G','H','I','J']
c = "C"
l = 10
nc = 3

for t in product(otheroptions, repeat=l-nc):
    for p in combinations(range(l), nc):
        r = list(t)
        for i in p:
            r[i:i] = [c]
        print "".join(r) 
```

# android-gridview - 避免在android gridview中重复视图

> ID：12155113
> 
> 赞同：0
> 
> 时间：2012-08-28T08:05:49.930
> 
> 标签：android-gridview

我被困在gridview。我想要一个 Gridview 下面的 imageview 来处理它的点击事件。基本上我需要的是当点击这个imageview按钮（这里是imageView_uparrow）时，它会向上滑动包含这个gridview的布局，但是当我在xml中的gridview（imageView_uparrow）下面添加imageview（imageView_uparrow）并运行项目时；gridview 在每个网格图标上重复该 imageview。我希望该图像视图在底部出现一次。这是我的 XML。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top" >

    <GridView
        android:id="@+id/inside_gridView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="50dp"
        android:layout_marginLeft="14dp"
        android:layout_marginRight="14dp"
        android:layout_marginTop="58dp"
        android:alpha="0.1"
        android:background="#696969"
        android:columnWidth="10dp"
        android:gravity="center"
        android:numColumns="3"
        android:padding="4dp"
        android:scrollbars="vertical"
        android:stretchMode="columnWidth" >
    </GridView>

    <ImageView
        android:id="@+id/image_insidegrid"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="5dp"
        android:contentDescription="@string/hello_world" />

    <ImageView
        android:id="@+id/imageView_uparrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="22dp"
        android:layout_marginRight="20dp"
        android:contentDescription="@string/hello_world"
        android:src="@drawable/drop_down_top_arrow" />

</RelativeLayout> 
```

最后一个 imageview 即 imageView_uparrow 继续与 gridview 项目重复。请帮帮我..提前谢谢.!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:52:48.693

嘿，我得到了解决方案.. 我将 imageView_uparrow 保存在单独的 xml 和图像中，我曾经将其设置为我的网格单独 xml 的图标。然后膨胀并将其添加到布局中。

我修改后的 Grid Xml 在这里

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="top"
    android:id="@+id/parentRel"
    >

    <GridView
        android:id="@+id/inside_gridView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginBottom="50dp"
        android:layout_marginLeft="14dp"
        android:layout_marginRight="14dp"
        android:layout_marginTop="42dp"
        android:background="@drawable/transperant_background"
        android:gravity="center"
        android:numColumns="3"
        android:padding="0dp"
        android:scrollbars="vertical"
         >
    </GridView>

</RelativeLayout> 
```

这是我的 ImageView(imageView_uparrow) 的 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_up_arrow_for_gridView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageview_up_arrow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="14dp"
        android:contentDescription="@string/app_name"

         />

</RelativeLayout> 
```

我用来膨胀的代码

```
Context context;
RelativeLayout rel;
ImageView upArrowImage;

LayoutInflater inflator = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        context=this;
    View grid2;

    rel=(RelativeLayout)findViewById(R.id.parentRel);

    animate = AnimationUtils.loadAnimation(this, R.anim.slide_up);
    animate.setAnimationListener(this);

    LayoutParams lp = new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    lp.setMargins(14, 400, 0, 20);

    grid2=new View(context);
    grid2=inflator.inflate(R.layout.gridview_up_arrow_button,null);

    upArrowImage=(ImageView)grid2.findViewById(R.id.imageview_up_arrow);

    ((ViewGroup)upArrowImage.getParent()).removeView(upArrowImage);

    rel.addView(upArrowImage);
    upArrowImage.setImageResource(R.drawable.drop_down_arrow4);
    upArrowImage.setLayoutParams(lp); 
```

# jax-ws - 使用 jax-ws 生成存根失败

> ID：12155114
> 
> 赞同：6
> 
> 时间：2012-08-28T08:05:53.627
> 
> 标签：jax-ws, wso2

我正在尝试使用 jax-ws 为 WSO2 身份服务器管理服务[https://xx.xx.xx.xx:9447/services/RemoteUserStoreManagerService?wsdl](https://xx.xx.xx.xx:9447/services/RemoteUserStoreManagerService?wsdl)生成存根。

我已经下载了 wsdl，但是当我运行时：

```
wsimport -p org.wso2 RemoteUserStoreManagerService.xml 
```

我收到以下错误

```
 [ERROR] operation "updateCredential" has an invalid style
  line 679 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValue" has an invalid style
  line 683 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValues" has an invalid style
  line 692 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValue" has an invalid style
  line 696 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateCredentialByAdmin" has an invalid style
  line 705 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteRole" has an invalid style
  line 739 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUser" has an invalid style
  line 748 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleName" has an invalid style
  line 762 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleListOfUser" has an invalid style
  line 766 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addUser" has an invalid style
  line 780 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addRole" has an invalid style
  line 784 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateUserListOfRole" has an invalid style
  line 788 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValues" has an invalid style
  line 797 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateCredential" has an invalid style
  line 857 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValue" has an invalid style
  line 878 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValues" has an invalid style
  line 887 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValue" has an invalid style
  line 908 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateCredentialByAdmin" has an invalid style
  line 917 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteRole" has an invalid style
  line 1010 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUser" has an invalid style
  line 1019 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleName" has an invalid style
  line 1040 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleListOfUser" has an invalid style
  line 1061 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addUser" has an invalid style
  line 1094 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addRole" has an invalid style
  line 1103 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateUserListOfRole" has an invalid style
  line 1112 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValues" has an invalid style
  line 1121 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateCredential" has an invalid style
  line 1205 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValue" has an invalid style
  line 1226 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValues" has an invalid style
  line 1235 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUserClaimValue" has an invalid style
  line 1256 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateCredentialByAdmin" has an invalid style
  line 1265 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteRole" has an invalid style
  line 1358 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "deleteUser" has an invalid style
  line 1367 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleName" has an invalid style
  line 1388 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateRoleListOfUser" has an invalid style
  line 1409 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addUser" has an invalid style
  line 1442 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "addRole" has an invalid style
  line 1451 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "updateUserListOfRole" has an invalid style
  line 1460 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] operation "setUserClaimValues" has an invalid style
  line 1469 of file:/C:/tmp/RemoteUserStoreManagerService.xml

[ERROR] missing required property "style" of element "operation"

        Failed to parse the WSDL. 
```

这是出现第一个错误的文件第 679 行周围的 wsdl 模式（不发布整个模式，因为它相当大）：

```
 <wsdl:operation name="updateCredential">
        <wsdl:input message="ns:updateCredentialRequest" wsaw:Action="urn:updateCredential"/>
        <wsdl:fault message="ns:RemoteUserStoreManagerServiceUserStoreException" name="RemoteUserStoreManagerServiceUserStoreException" wsaw:Action="urn:updateCredentialRemoteUserStoreManagerServiceUserStoreException"/>
    </wsdl:operation>
    <wsdl:operation name="setUserClaimValue">
        <wsdl:input message="ns:setUserClaimValueRequest" wsaw:Action="urn:setUserClaimValue"/>
        <wsdl:fault message="ns:RemoteUserStoreManagerServiceUserStoreException" name="RemoteUserStoreManagerServiceUserStoreException" wsaw:Action="urn:setUserClaimValueRemoteUserStoreManagerServiceUserStoreException"/>
    </wsdl:operation>
    <wsdl:operation name="getUserClaimValuesForClaims">
        <wsdl:input message="ns:getUserClaimValuesForClaimsRequest" wsaw:Action="urn:getUserClaimValuesForClaims"/>
        <wsdl:output message="ns:getUserClaimValuesForClaimsResponse" wsaw:Action="urn:getUserClaimValuesForClaimsResponse"/>
        <wsdl:fault message="ns:RemoteUserStoreManagerServiceUserStoreException" name="RemoteUserStoreManagerServiceUserStoreException" wsaw:Action="urn:getUserClaimValuesForClaimsRemoteUserStoreManagerServiceUserStoreException"/>
    </wsdl:operation> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T06:57:30.607

尝试在所有 wsdl 操作中添加输出消息。有趣的是，`wsimport`它不会抱怨`getUserClaimValuesForClaims`操作，并且该方法已定义输出消息。

**编辑**：您可以毫无顾忌地编辑 wsdl，因为这些有问题的方法具有 void 返回类型，因此您可以将任何您想要的作为返回类型并忽略它。换句话说，当调用 Web 服务时，您只对输入参数感兴趣，因为这些方法实际上不返回任何内容。因此，请执行以下操作：

1.  制作 wsdl 的副本，例如命名它`client.wsdl`
2.  将输出消息添加到所有没有它的操作
3.  生成一个 Web 服务客户端`client.wsdl`（**不要**更改服务！）
4.  调用 Web 服务方法并忽略这些“有问题的”方法的返回类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-20T13:31:51.343

Miljen Mikic 的回答非常好，让我找到了正确的解决方案。我想我会举一个例子来说明如何按照他的建议去做。请注意错误列表中的错误是成对出现的：

```
[ERROR] operation "updateCredential" has an invalid style
line 679 of file:/C:/tmp/RemoteUserStoreManagerService.xml
.
.
.
[ERROR] operation "updateCredential" has an invalid style
line 1205 of file:/C:/tmp/RemoteUserStoreManagerService.xml
.
.
. 
```

OP 的 wsdl 示例仅包含前 2 个错误，但解决方案对所有人都相似。结果变为：

```
<wsdl:operation name="updateCredential">
    <wsdl:input message="ns:updateCredentialRequest" wsaw:Action="urn:updateCredential"/>
    <wsdl:output message="" />
    <wsdl:fault message="ns:RemoteUserStoreManagerServiceUserStoreException" name="RemoteUserStoreManagerServiceUserStoreException" wsaw:Action="urn:updateCredentialRemoteUserStoreManagerServiceUserStoreException"/>
</wsdl:operation>
<wsdl:operation name="setUserClaimValue">
    <wsdl:input message="ns:setUserClaimValueRequest" wsaw:Action="urn:setUserClaimValue"/>
    <wsdl:output message="" />
    <wsdl:fault message="ns:RemoteUserStoreManagerServiceUserStoreException" name="RemoteUserStoreManagerServiceUserStoreException" wsaw:Action="urn:setUserClaimValueRemoteUserStoreManagerServiceUserStoreException"/>
</wsdl:operation> 
```

# java - 比较运算符在java中是如何工作的？

> ID：12155117
> 
> 赞同：1
> 
> 时间：2012-08-28T08:06:13.787
> 
> 标签：java, performance, comparison

最近有人告诉我，涉及较小整数的比较会更快，例如，

```
// Case 1
int i = 0;
int j = 1000;
if(i<j) {//do something}

// Case 2
int j = 6000000;
int i = 500000;
if(i<j){//do something else} 
```

因此，案例 1 中的比较（`if`条件）应该比案例 2 中的更快。在案例 2 中，整数将占用更多空间来存储，但这会影响比较，我不确定。

**编辑 1：** *我在考虑 i 和 j 的二进制表示，例如，对于 i=0，它将是 0，对于 j=1000，它的 1111101000（在 32 位表示中它应该是：22 个零后跟 1111101000，完全忘记了关于 32 位或 64 位表示，我的错！）*

我试图查看一个简单的比较程序的 JVM 规范和字节码，对我来说没有什么意义。现在的问题是java中数字的比较如何工作？我想这也将回答为什么（或为什么不）任何情况都会更快。

**编辑2：** *我只是在寻找一个详细的解释，我并不担心微优化*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:37:26.240

如果您关心性能，您实际上只需要考虑将代码编译为本机代码时会发生什么。在这种情况下，重要的是 CPU 的行为。对于简单的操作，几乎所有 CPU 的工作方式都相同。

> 因此，案例 1 中的比较（如果条件）应该比案例 2 中的更快。在案例 2 中，整数将占用更多空间来存储，但这会影响比较，我不确定。

在 Java 中， An`int`始终是 32 位的。这意味着它总是占用相同的空间。在任何情况下，数据类型的大小都不是很重要，例如`short`并且`byte`通常*较慢*，因为本机字大小是 32 位和/或 64 位，它必须从更大的类型中提取正确的数据并对其进行符号扩展.

> 我试图查看一个简单的比较程序的 JVM 规范和字节码，对我来说没有什么意义。

JLS 指定行为，而不是性能特征。

> 现在的问题是java中数字的比较如何工作？

它的工作方式与几乎所有其他编译语言中的工作方式相同。它使用单个机器代码指令来比较这两个值，并根据需要使用另一个执行条件分支。

> 我想这也将回答为什么（或为什么不）任何情况都会更快。

大多数现代 CPU 使用分支预测。为了保持 CPU 流水线充满，它会尝试预测将采用哪个分支（在它知道它是正确的分支之前），因此执行的指令不会中断。当这运作良好时，分支几乎没有成本。当它预测错误时，管道可能会被错误猜测的分支指令填充，这可能会导致明显的延迟，因为它会清除管道并采用正确的分支。在最坏的情况下，这可能意味着 100 秒的时钟周期延迟。例如

考虑以下。

```
int i; // happens to be 0

if (i > 0) {
   int j = 100 / i; 
```

假设分支通常被占用。这意味着管道可以在知道不会采用分支之前加载触发中断（或 Java 中的错误）的指令。这可能会导致复杂的情况，需要一段时间才能正确展开。

这些被称为[错误预测的分支](http://igoro.com/archive/fast-and-slow-if-statements-branch-prediction-in-modern-processors/)简而言之，每次/大部分时间都以相同方式运行的分支更快，突然改变或非常随机的分支（例如在排序和树数据结构中）将更慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:33:01.817

Int 在 32 位系统上可能更快，而 long 在 64 位系统上可能更快。我应该为此烦恼吗？不，您不会为系统配置编码，而是根据您的要求进行编码。微优化永远不会起作用，它们可能会引入一些前所未有的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:36:19.657

Small Integer 对象可以更快，因为 java 对待它们是特定的。

-128 && i <= 127 的所有整数值都存储在 IntegerCache 中，这是 Integer 的内部类

# assembly - 加载词和移动之间的区别？

> ID：12155118
> 
> 赞同：12
> 
> 时间：2012-08-28T08:06:22.527
> 
> 标签：assembly, mips, nios

和有什么区别

`ldw r8,0(r4)`

和

`mov r8, r4`

加载字说“从内存复制”，但是当从 r4 加载字复制时，它是从寄存器复制而不是从内存复制，对吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-28T08:15:24.233

该`lw`指令（我假设这就是您的意思，因为`ldw`它不是标准的 MIPS 指令，尽管在此答案的上下文中所有负载都相似）从指定的*内存地址*`0 + r4`加载一个单词，而`move`¹只是将值传输`r4`到`r8`.

例如，假设`r4`是当前并且存储在内存中`1234`的单词是。`1234``5678`

区别在于：

```
move r8, r4            ; r8 is now 1234
lw   r8, 0(r4)         ; r8 is now 5678 
```

* * *

¹ “`move`指令”实际上是一个伪指令，`move $rt, $rs`编码为`addi $rt, $rs, 0`.

# python - 蟒蛇抓取

> ID：12155119
> 
> 赞同：0
> 
> 时间：2012-08-28T08:06:24.067
> 
> 标签：python, web-scraping

我正在尝试获取餐馆的名称、地址和电话号码。

我的代码一直卡在第二个定义中。第一个 def 工作正常。我不知道为什么，因为我无法识别任何错误。循环只是没有通过。

如果我犯了一个明显的错误，我会很感激有人发表评论。

谢谢

```
from urllib2 import urlopen
from csv import writer

def get_urls_of_restaurant():
    list_urls = []
    n = 0
    nn = 0
    for i in range(6):
        url = urlopen('http://www.go.co.tz/index.php/restaurants/masaki?start=' +     str(nn)).readlines() #open URL whis lists restaurants
        while n < len(url):
            if '<h2 class="contentheading">' in url[n]:
                list_urls.append(url[n+1].split('"')[1])
            n += 1
        n = 0
        nn += 3
    list_urls.reverse()
    print "Geting urls done! Get %s" %len(list_urls) + ' urls.'
    return list_urls

def open_url_and_write_data(list_urls):
    n = len(list_urls)-1
    csv_file = open('restdar_guide.csv', 'wb')
    file_writer = writer(csv_file, delimiter=';')
    file_writer.writerow(['Name'] + ['address'] + ['phone'])
    while n >= 0:
        print 'Reading %s' % str(int(len(list_urls))-n) + " element of %s" % len(list_urls) + " element's..."
        url = urlopen('http://www.go.co.tz' + list_urls[n]).readlines()
        num_str = 0
        list_write = []
        while num_str < len(url):
            if '<title>' in url[num_str]:
                list_write.append(url[num_str].split('<')[0][7:])
            if 'Location:</strong>' in url[num_str]:
                list_write.append(url[num_str].split('<')[1][9:])
            else:
                list_write.append('unknown')
            if '<li><strong>Tel:</strong>' in url[num_str]:
                list_write.append(url[num_str].split('<')[2][10:])
            else:
                list_write.append('unknown')
            file_writer.writerow([list_write[0]] + [list_write[1]] + [list_write[2]])
        n -= 1
    csv_file.close()
    print 'Done!'

list_urls = get_urls_of_restaurant()
open_url_and_write_data(list_urls) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:21:37.953

[BeautifulSoup](http://pypi.python.org/pypi/BeautifulSoup/3.2.1)可能会让你的生活更轻松一些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T14:31:54.990

好吧，如果你中止程序，你只会得到 KeyboardInterrupt 错误。根据时间的不同，您可能会在该 while 循环中的任何行上发生错误 - 无论您最终崩溃并中止时它正在执行的指令是什么。

由于以下原因，您的程序进入了非终止循环：

```
num_str = 0
...
while num_str < len(url): 
```

You never change the value of num_str, so this is equivalent to `while True:`, for any value of `len(url)` greater than 0\. This is, btw, a great place for a for loop.

That said, as others have noted, this is very much a non-optimal way to do HTML parsing / web scraping. There are a number of scraping utilities and HTML parsers available, and I think you might be better off doing so.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:15:18.340

" " 的缩进`n = len(list_urls)-1`好像太远了，试着和下一行对齐。

# javascript - Javascript图像数组

> ID：12155123
> 
> 赞同：1
> 
> 时间：2012-08-28T08:06:44.257
> 
> 标签：javascript

需要一些帮助。我有两个需要填充图像的 div。图像不能是随机的，因为 div 1 的图像需要与 div 2 对应。我一直在玩，并设法让 javascript 工作到这一点。问题是我需要脚本写入 div 背景，而不是用图像填充 div。

```
<script>
var random = Math.random();
function random_imglink(arr){
var ry = Math.floor(random*arr.length);
document.write(
'<img src="'+arr[ry]+'" border=0 class="two">'
);
}
var myimages = [
"img1.jpg", "img2.jpg","img3.jpg"
 ],
myimagesA = [
"img1b.jpg","img2b.jpg","img3b.jpg"];

</script>
<div><script>random_imglink(myimages);</script> </div>

<DIV><script>random_imglink(myimagesA);</script></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:13:19.217

您的代码需要大修。这是修复后的样子：

```
<div id='a'>A</div>

<div id='b'>B</div>​
<script>
var random = Math.random();
function random_imglink(arr, id){
    var ry = Math.floor(random*arr.length);
    document.getElementById(id).style.backgroundImage = "url('" + arr[ry] + "')";
}
var myimages = [
    "http://img1.jpg.to"],
    myimagesA = ["http://img1b.jpg.to"];

random_imglink(myimages, 'a');
random_imglink(myimages, 'b');
</script> 
```

[演示](http://jsfiddle.net/KMZy7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:10:24.283

要将图像设置为元素的背景，您可以使用以下命令：

```
document.getElementById("myDivId").style.backgroundImage = "url(/path/to/img)"; 
```

在您的代码中，您可以执行以下操作：

```
var random = Math.random();

function random_imglink(divId, arr){
    var ry = Math.floor(random*arr.length);
    document.getElementById(divId).style.backgroundImage = "url(" + arr[ry] + ")";
}

var myimages = ["img1.jpg", "img2.jpg","img3.jpg"],
   myimagesA = ["img1b.jpg","img2b.jpg","img3b.jpg"];

random_imglink("firstDiv", myimages);
random_imglink("secondDiv", myimagesA); 
```

html:

```
<div id="firstDiv"></div>
<div id="secondDiv"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:19:11.117

当前代码的最小可能更改；使函数编写一个带有样式属性的 div 标签而不是图像标签：

```
document.write('<div style="background:url('+arr[ry]+')">'); 
```

将脚本放在您想要开始标记的位置：

```
<script>random_imglink(myimages);</script> </div> 
```

# git - 在我已经提交更改后如何返回到以前的位置

> ID：12155124
> 
> 赞同：2
> 
> 时间：2012-08-28T08:06:44.537
> 
> 标签：git

我刚刚使用了 Git 编程。问题案例如下：

“我刚刚在主分支上提交了我的更改，并在上面生成了一个补丁。实际上我只是想保存补丁并返回到我提交之前的位置？我该怎么做？”

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:10:55.623

你运行`git log`，你找到你想要去的提交的 sha1，然后你运行

```
git checkout <sha1> 
```

如果您想从此时开始提交，请在此时创建一​​个新分支

```
git checkout -b <branchname> 
```

或者你可以移动`master`到这个 sha1

```
git br -f master <sha1>; git checkout master 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:11:16.947

您检索您的提交 SHA，即您运行`git show`并查看您想要的，然后从它分支：

`git checkout -b yournewbranch commitSHA`

# php - 几句话的正则表达式

> ID：12155127
> 
> 赞同：2
> 
> 时间：2012-08-28T08:06:52.850
> 
> 标签：php, regex, preg-match

我有几句话：

```
put
returns 
between 
4paragraphs 
```

我该如何为此做正则表达式？我在 PHP 中使用函数 preg_match。这四个字我只能用一个字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:08:49.823

使用单词列表：

```
\^[put|returns|between|4paragraphs]\$ 
```

# ruby-on-rails - rails中的salesforce沙箱集成，错误过期访问

> ID：12155128
> 
> 赞同：0
> 
> 时间：2012-08-28T08:06:54.770
> 
> 标签：ruby-on-rails, salesforce, databasedotcom-gem

我正在使用 Ruby Gem“databascdotcom”将 Salesforce 集成到 Rails 应用程序中，并且一切正常，直到我尝试使用沙盒帐户类型“仅配置”。

当我与 salesforce 产品帐户一起使用时，以下代码可以正常工作。这是我的代码

```
def SalesForceFeed
   @oppID = params[:oppid]

    client = Databasedotcom::Client.new client.client_id #=> foo client.client_secret #=> bar
    client.authenticate :username => "foo@bar.com", :password => "ThePasswordTheSecurityToken" #=> "the-oauth-token"
    client.materialize("Opportunity")
    begin
         @client=SalesForce::Connection.new.client
         @opp = Opportunity.find_by_Id(@oppID)
    rescue Exception=>e
end 
```

但是，当我尝试将其与用户名如“foo@bar.com.sandbox”的 salesforce 沙盒帐户一起使用时，我收到以下错误“过期访问/刷新令牌”

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:47:04.163

得到了问题。

只需要添加

主机=“test.salesforce.com”

谢谢大家

# c# - 目录中的文件按文件名升序排序

> ID：12155131
> 
> 赞同：3
> 
> 时间：2012-08-28T08:07:02.253
> 
> 标签：c#, .net, linq, sql-order-by

我有一个目录中的文件列表，我想按文件名对其进行排序。

这是主要代码：

```
var localPath = this.Server.MapPath("~/Content/Img/" + type + "/");
var directory = new DirectoryInfo(localPath);
isDirectory = directory.Exists;

if (isDirectory)
{
    foreach (FileInfo f in directory.GetFiles())
    {
        Picture picture = new Picture();

        picture.ImagePath = path;
        picture.CreationDate = f.CreationTime;
        picture.FileName = f.Name;
        listPictures.Add(picture);
    }
} 
```

这是存储所有文件的类图片：

```
public class Picture
{
    public string ImagePath { get; set; }
    public string FileName { get; set; }
    public DateTime CreationDate { get; set; }
} 
```

你如何按文件名的顺序对文件列表进行排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T08:09:16.183

只需更改您的 for 循环：

```
foreach (FileInfo f in directory.GetFiles().OrderBy(fi=>fi.FileName))
{

} 
```

或者，您可以使用以下代码重写整个循环：

```
var sortedFiles = from fi in directory.GetFiles()
                  order by fi.FileName
                  select new Picture { ImagePath = path, CreationDate = f.CreationTime, FileName = f.FileName };

listPictures.AddRange(sortedFiles); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:09:07.050

```
listPictures = listPictures.OrderBy(x => x.FileName).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:09:55.593

您可以使用 lambda 表达式和/或扩展方法。例如：

```
listPictures.OrderBy(p => p.FileName).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:17:58.837

您可以从一开始就使用 LINQ：

```
var files = from f in directory.EnumerateFiles()
    let pic = new Picture(){
        ImagePath = path;
        CreationDate = f.CreationTime;
        FileName = f.Name;
    }
    orderby pic.FileName
    select pic; 
```

请注意，[`Directory.EnumerateFiles(path)`](http://msdn.microsoft.com/en-us/library/dd383458.aspx)如果仅使用 ，则效率会更高`FileName`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T08:10:37.107

请注意，[EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd413232.aspx)执行延迟加载，并且对于较大的目录可能更有效，因此：

```
dir.EnumerateFiles().OrderBy(f => f.FileName)) 
```

# php - 固定弹出框内的背景图像大小以用于不同的分辨率

> ID：12155134
> 
> 赞同：1
> 
> 时间：2012-08-28T08:07:15.613
> 
> 标签：php, javascript, jquery, joomla

我创建了一个在页面加载时打开的弹出框，该弹出框包含一张图片。弹出框是根据图像的分辨率调整大小，但弹出框内的图像没有调整大小。我正在为此使用 Joomla 插件（[简单弹出窗口](http://extensions.joomla.org/extensions/style-a-design/popups-a-iframes/17214)）。我正在尝试将图像手风琴更改为分辨率，但它没有反映。

这是弹出框的代码：

```
<div style="background:url('guntavnuk.pixabytes.co.in/guntavnuk/…; 
<div style=" padding-left: 647px; padding-top: 13px;background:none repeat scroll 0 0 transparent;" > 
<iframe src="guntavnuk.pixabytes.co.in/guntavnuk/email.php"; width="300px;" height="190px;" style="overflow:hidden;margin-top:41px;" > </iframe> 
</div> 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:34:40.657

我在网站上看不到问题。似乎图像以全分辨率显示，因此除非您设计具有更大尺寸的图像，否则您不会得到比这更大的图像。然后，您可以将图像的宽度设置为 100%，将高度设置为自动。但是，由于它们变化很大，您将无法适应所有屏幕分辨率。

# python - pyqt : 将 numpy 数组转换为 QImage

> ID：12155137
> 
> 赞同：1
> 
> 时间：2012-08-28T08:07:26.780
> 
> 标签：python, qt, numpy, pyqt, easy-install

我需要将 numpy 数组转换为 QtGui.QImage。但我不知道该怎么做。我找到了这个： http: [//kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray/](http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray/)但是当我尝试安装它时出现错误：

```
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ easy_install
error: No urls, filenames, or requirements specified (see --help)
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ easy_install qimage2ndarraySearching for qimage2ndarray
Reading http://pypi.python.org/simple/qimage2ndarray/
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray/dist
Best match: qimage2ndarray 1.0
Downloading http://pypi.python.org/packages/source/q/qimage2ndarray/qimage2ndarray-1.0.zip#md5=5e79e1b45b87aa8e18490162adcce8e4
Processing qimage2ndarray-1.0.zip
Writing /tmp/easy_install-aWUHHO/qimage2ndarray-1.0/setup.cfg
Running qimage2ndarray-1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-aWUHHO/qimage2ndarray-1.0/egg-dist-tmp-SGavOY
Traceback (most recent call last):
  File "/home/michael/.local/bin/easy_install", line 9, in <module>
    load_entry_point('distribute==0.6.27', 'console_scripts', 'easy_install')()
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 1915, in main
    with_ei_usage(lambda:
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 1896, in with_ei_usage
    return f()
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 1919, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "/opt/ActivePython-2.7/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/opt/ActivePython-2.7/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/opt/ActivePython-2.7/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 350, in run
    self.easy_install(spec, not self.no_deps)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 590, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 620, in install_item
    dists = self.install_eggs(spec, download, tmpdir)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 814, in install_eggs
    return self.build_and_install(setup_script, setup_base)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 1094, in build_and_install
    self.run_setup(setup_script, setup_base, args)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/command/easy_install.py", line 1080, in run_setup
    run_setup(setup_script, args)
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/sandbox.py", line 30, in run_setup
    lambda: execfile(
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/sandbox.py", line 78, in run
    return func()
  File "/home/michael/.local/lib/python2.7/site-packages/setuptools/sandbox.py", line 32, in <lambda>
    {'__file__':setup_script, '__name__':'__main__'}
  File "setup.py", line 3, in <module>
ImportError: No module named numpy
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
>>> exit

#PythonPath
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> from pprint import pprint as pp
>>> pp(sys.path)
['',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/usr/lib/python2.7/lib-old',
 '/usr/lib/python2.7/lib-dynload',
 '/home/michael/.local/lib/python2.7/site-packages',
 '/home/michael/.local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg-info',
 '/usr/local/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages',
 '/usr/lib/python2.7/dist-packages/PIL',
 '/usr/lib/python2.7/dist-packages/gst-0.10',
 '/usr/lib/python2.7/dist-packages/gtk-2.0',
 '/usr/lib/pymodules/python2.7',
 '/usr/lib/python2.7/dist-packages/ubuntu-sso-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-client',
 '/usr/lib/python2.7/dist-packages/ubuntuone-control-panel',
 '/usr/lib/python2.7/dist-packages/ubuntuone-couch',
 '/usr/lib/python2.7/dist-packages/ubuntuone-installer',
 '/usr/lib/python2.7/dist-packages/ubuntuone-storage-protocol']

michael@michael-laptop-ubuntu:/lib$ python -c "import numpy; print numpy.__file__"
/usr/lib/python2.7/dist-packages/numpy/__init__.pyc 
```

当我尝试修复像 ekhumoro 说的错误时：

```
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ sudo apt-get install python-setuptools
[sudo] password for michael: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
python-setuptools is already the newest version.
python-setuptools set to manually installed.
The following packages were automatically installed and are no longer required:
  language-pack-zh-hans language-pack-kde-zh-hans kde-l10n-engb kde-l10n-zhcn
  language-pack-zh-hans-base language-pack-kde-zh-hans-base
Use 'apt-get autoremove' to remove them.
0 upgraded, 0 newly installed, 0 to remove and 5 not upgraded.
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ /usr/bin/easy_install --user qimage2ndarray
Searching for qimage2ndarray
Reading http://pypi.python.org/simple/qimage2ndarray/
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray/dist
Best match: qimage2ndarray 1.0
Downloading http://pypi.python.org/packages/source/q/qimage2ndarray/qimage2ndarray-1.0.zip#md5=5e79e1b45b87aa8e18490162adcce8e4
Processing qimage2ndarray-1.0.zip
Running qimage2ndarray-1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-WlOZgX/qimage2ndarray-1.0/egg-dist-tmp-YImfzM
sip: Deprecation warning: qimageview.sip:2: %Module version number should be specified using the 'version' argument
sip: Unable to find file "QtGui/QtGuimod.sip"
error: Setup script exited with error: command '/usr/bin/sip' failed with exit status 1
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ sudo /usr/bin/easy_install qimage2ndarray
Searching for qimage2ndarray
Reading http://pypi.python.org/simple/qimage2ndarray/
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray
Reading http://kogs-www.informatik.uni-hamburg.de/~meine/software/qimage2ndarray/dist
Best match: qimage2ndarray 1.0
Downloading http://pypi.python.org/packages/source/q/qimage2ndarray/qimage2ndarray-1.0.zip#md5=5e79e1b45b87aa8e18490162adcce8e4
Processing qimage2ndarray-1.0.zip
Running qimage2ndarray-1.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-cVFRpr/qimage2ndarray-1.0/egg-dist-tmp-Dll6jK
sip: Deprecation warning: qimageview.sip:2: %Module version number should be specified using the 'version' argument
sip: Unable to find file "QtGui/QtGuimod.sip"
error: Setup script exited with error: command '/usr/bin/sip' failed with exit status 1
michael@michael-laptop-ubuntu:~/rubyWorkSpace/pymcs$ 
```

我不明白这个错误，因为显然 import numpy 有效......

如果有人知道将 numpy 数组转换为 QImage 的另一种方法，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T20:47:01.080

回溯显示您正在尝试使用 目录 ( )`easy_install`下的安装包来安装包。[`USER_BASE`](http://docs.python.org/library/site.html#site.USER_BASE)`~/.local/bin/easy_install`

这又是使用安装在 下的 python `/opt/ActivePython-2.7`，它可能没有`numpy`安装包。

但是，您的系统 python ( `/usr/lib/python2.7`)*似乎确实*安装了该`numpy`软件包。

所以要修复错误，首先安装 ubuntu 包，其中包括`easy_install`：

```
sudo apt-get install python-setuptools 
```

然后执行以下任一操作：

```
/usr/bin/easy_install --user qimage2ndarray 
```

安装`qimage2ndarray`到您的[`USER_SITE`](http://docs.python.org/library/site.html#site.USER_SITE)目录，或者：

```
sudo /usr/bin/easy_install qimage2ndarray 
```

安装它，使其在系统范围内可用。

# java - 从 Solr Servlet 获取数据时出现编码问题

> ID：12155143
> 
> 赞同：0
> 
> 时间：2012-08-28T08:07:43.057
> 
> 标签：java, utf-8, solr

我有一个包含 600.000 个文档的 Solr-Servlet，每个文档包含大约 10-30 个多值字段。为了更新文档，我遇到了一些问题，因为 Solr 在 3.6 版中没有任何更新功能。我想做的事情：我想做的事情：我想要一个应用程序，它只需要应该插入到文档中的字段。例如：

> 文档 1（字段 1 / 值 1，字段 2 / 值 2）

我想在这个文档中插入一个 field3 / value3。现在，有必要这样做：

> 文档 1（字段 1 / 值 1，字段 2 / 值 2，字段 3 / 值 3）

每个文档中的字段数量较多的原因，我只想添加 field3 / value3，而不需要编写知道所有其他字段，如上图所示：

> 文档 1（字段 3 / 值 3）

这就是为什么我编写了一个应用程序，它首先自动从 Solr 获取所有数据，然后添加一个应该插入到文档中的字段。一切都很顺利，直到我处理文档，其中字段的值如 'ä' 'ö' 'ü' 等等。Solr 比返回错误：

> org.apache.solr.common.SolrException：无效的 UTF-8 起始字节 0xfc

我想通了，这是由上面张贴的字符引起的。因此我想知道我的输入流是哪种编码（我为此使用了juniversalchardet），它指出编码是WINDOWS-1252。我的应用程序是用 Java 编写的，没有任何 Solr 库（只有标准的 http 库和用于 xml 处理的 javax）。您知道编码更改的位置以及如何避免它吗？是 Java 还是它，因为 servlet 在 Windows 机器上运行？

谢谢你的帮助！

编辑：我应该使用 Solrj 库吗？有谁知道这是否可以避免我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:44:32.863

经过一番研究，我发现了我的问题，我想把它分享给所有可能有同样问题的人。输入流似乎取决于您正在运行的系统。正如您可能猜到的，我使用的是 Windows 机器。您唯一需要做的就是将您的输出流设置为 UTF-8，Solr 将使用它来重新索引您的文档。我使用了 FileOutputStream，因为我需要记录更改。所以我缺少的代码是：

```
OutputStreamWriter out = new OutputStreamWriter(new FileOutputStream("Updatefiles/"+uuid+".xml"),"UTF-8"); 
```

您可以选择几乎所有流的编码。我不知道这个参数，所以对于所有将面临这个问题的人 -> 只需设置输出流的编码。

# php - 尝试在 jquery 中解析 json 对象时出错

> ID：12155144
> 
> 赞同：0
> 
> 时间：2012-08-28T08:07:43.880
> 
> 标签：php, jquery, ajax, json

我使用 jquery-ajax 在数据库中搜索特定变量并将其返回，以便我可以将其附加到我的 html 页面上。在数据库中搜索的 php 文件是

```
$q="SELECT abc FROM xyz where axb='".$_GET['var']."'";
$sql = mysql_query($q) or die(mysql_error());

$row = mysql_fetch_array($sql);

$temp=$row['company'];

$k['na'] = $temp;

echo json_encode($k);
 ?> 
```

如果我尝试使用以下 URL，此文件将显示正确的输出

{"na":"微软公司"}

但是应该解析它并附加到 div 的 jquery 返回 null 这是代码

```
function name() {
    $.ajax({
        type: 'GET',
        async: false,
        dataType: "json",
        url: dir + 'name.php?tick=' + $("#tickerid").val(),
        success: function(name) {
            alert("hello");
            alert(name['na']);
            $("#nam").html('<p>' + name['na'] + '</p>');
        }
    });
} 
```

但是如果我在文件中放置一个字符串来代替 $row[''];

```
$temp=$row['company'];
//$k['na'] = $temp;

$k['na'] = "Microsoft";
echo json_encode($k); 
```

url 输出相同 {"na":"Microsoft"} 并且 jquery 成功地将其附加到 html 中。

谁能告诉我出了什么问题，因为 php 为变量和 string 返回相同的东西，我试图检索它的 jquery 代码有什么问题？

# java - 从 Servlet 调用 Web 服务

> ID：12155151
> 
> 赞同：0
> 
> 时间：2012-08-28T08:08:04.797
> 
> 标签：java, web-services

因为我是网络服务的新手。我已经开始开发一个简单的应用程序，它有一个登录页面并且必须进行简单的验证

为此，我创建了一个用于登录验证的简单 Web 服务，我有它的 WSDL 链接并创建了客户端...

现在我想在我的 JSP 页面上使用它。以下是我使用的步骤，

1.  创建了登录 JSP
2.  单击提交按钮时，将调用 Servlet
3.  此 servlet 通过调用其存根然后调用相应的方法来调用 Web 服务（注意：我已将服务和客户端 jar 包含在我的类路径中，这就是我获取服务的方式）

使用的 IDE：Eclipse Indigo
服务器：Tomcat v7
也使用 Apache Axis 2 服务器

我想问一下，这是使用 JSP n SERVLETS 使用 Web 服务的正确方式吗..或者他们还有其他出路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:36:25.670

如果您在 Do-post 中调用 Web 服务或使用从 HTML 表单中获得的参数执行 Get 方法，则不会有问题。您可以根据您的 Web 服务响应继续进行。

唯一的变化是您正在联系 web 服务，而不是连接到 servlet 中的数据库。

# facebook - API 错误代码：100

> ID：12155154
> 
> 赞同：1
> 
> 时间：2012-08-28T08:08:25.843
> 
> 标签：facebook, api

只是想将我的应用安装到粉丝专页，但收到以下消息：

API 错误代码：100 API 错误描述：无效参数错误消息：redirect_uri URL 格式不正确

这是什么意思？我怎样才能解决这个问题？

格雷茨

标记

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-28T08:15:53.877

在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)选择您的应用并单击“编辑设置”。在基本选项卡中，确保您的“画布 URL”设置正确。

我认为这就是问题所在，如果这不能解决它，请尝试寻找其他可能关闭的“URL”属性。

# java - eclipse中的git插件安装

> ID：12155163
> 
> 赞同：1
> 
> 时间：2012-08-28T08:08:59.543
> 
> 标签：java, eclipse, git

我有包含 jar 文件的 GIT 插件文件夹。但不知道如何在eclipse中安装。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:18:56.570

尝试从 Eclipse 市场安装 EGit。可以在[此处](http://obscuredclarity.blogspot.com/2011/04/install-egit-for-eclipse.html)找到对此有用的教程。

安装 EGit 后，您可以克隆远程 git 存储库并将其导入 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:14:13.407

您可能应该转到 Eclipse 顶部菜单中的 Help / Install New Software...。然后，添加一个新的存储库，提供 eGit 的 P2 存储库的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:21:56.403

这是使用存储库方式安装 GIT 插件的更好方法。顺便说一句，如果您有 GIT 插件文件夹，您只需将 features 和 plugins 目录复制到 eclipse 安装目录并重新启动 eclipse。

# android - Android 十六进制颜色

> ID：12155165
> 
> 赞同：0
> 
> 时间：2012-08-28T08:09:03.567
> 
> 标签：android

我在很多地方 Android 需要 HEX 颜色，比如 0X31515724。如何将 #3399ff 之类的颜色转换为此？是否有任何网站或工具可以将颜色代码转换为所需的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:11:46.140

只需在 #3399FF 的开头附加 FF，它就会变成 0xFF3399FF

组件是：

*   Alpha（在许多应用程序/上下文中默认为 FF）
*   红色 (33)
*   绿色 (99)
*   蓝色 (FF)

另一方面，您的 0X31515724 是 #515724 颜色，alpha 为 0x31 (49/255=19%)

# iphone - 从我的 Titanium 项目中的 XML 文件获取值

> ID：12155168
> 
> 赞同：3
> 
> 时间：2012-08-28T08:09:05.407
> 
> 标签：iphone, xml, xcode, titanium, appcelerator

我有以下我在我的 android 项目中使用的 .xml。现在，我正在尝试使用钛在 iPhone 中创建相同的内容。有人可以告诉我如何从 xml 文件中获取这些值并在表格视图中显示它们。 ? 如果我给 MainCategories 中的 3 个值应该出现在表格视图中。有人可以告诉我还有其他更好的选择来实现这一点吗？或者我们可以使用 plist 吗？谢谢。

```
<string-array name="MainCategories">
    <item>Acceleration</item>
    <item>Angle</item>
    <item>Area</item>
</string-array>

<string-array name="Acceleration_array">
    <item>meter/sq sec</item>
    <item>km/sq sec</item>
    <item>mile/sq sec</item>
    <item>yard/sq sec</item>
</string-array>

<string-array name="Angle_array">
    <item>degree</item>
    <item>radian</item>
    <item>grad</item>
    <item>gon</item>
</string-array> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T09:59:18.527

试试这个。

变种结果 = []; var 文件名 = 'arrays1.xml'; //保存xml文件 var tableView = Ti.UI.createTableView({ data : result, width : '100%', height : '100%' });

```
function readXML(fileName)
{

var file = Ti.Filesystem.getFile(Ti.Filesystem.resourcesDirectory, fileName); 
var xmltext = file.read().text; 
var doc = Ti.XML.parseString(xmltext); 

var parentNodeLength = doc.documentElement.getElementsByTagName('string-array').length; 
for (var i = 0; i < parentNodeLength; i++) { 
var attrValue = doc.documentElement.getElementsByTagName('string-array').item(i).attributes.getNamedItem('name').nodeValue;
if (attrValue === 'Angle_array') {

    var parentNode = doc.documentElement.getElementsByTagName('string-array').item(i);
    var subNodeLength = parentNode.getElementsByTagName('item').length;

    for (var j = 0; j < subNodeLength; j++) {

        var title = parentNode.getElementsByTagName('item').item(j).text;
        var row = Ti.UI.createTableViewRow({
            height : 110
        });
        var label = Ti.UI.createLabel({
            height : Ti.UI.SIZE,
            width : Ti.UI.SIZE,
            text : title
        });

        row.add(label);
        result.push(row);
    }
}

}
}
readXML(fileName); 
tableView.setData(result);
win1.add(tableView); 
win1.open(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:19:25.757

我不熟悉钛，但也许这应该可以帮助你：

```
var result = this.responseText;
var xml = Ti.XML.parseString(result);

var params = xml.documentElement.getElementsByTagName("member");
var name = xml.documentElement.getElementsByTagName("name");
var value = xml.documentElement.getElementsByTagName("string");
var data = [];

for (var i=0;i<params.item.length;i++) {
    Ti.API.log('Param '+i+': Name: '+n.item(i).text);
    Ti.API.log('Param '+i+': Value: '+v.item(i).text);

    // Add to array
    data.push({"name":n.item(i).text,"value":v.item(i).text});
} 
```

从此[链接复制](http://developer.appcelerator.com/question/4031/parsing-xml-struct)

要在 uitableview 中显示它，请将您的值保存在 nsarray 中并在 tableview 中显示您的数组。这 是一个[教程](http://adeem.me/blog/2009/05/19/iphone-programming-tutorial-part-1-uitableview-using-nsarray/)。`UITableView`

# hibernate - Hibernate - 加入同一张表的三次

> ID：12155174
> 
> 赞同：2
> 
> 时间：2012-08-28T08:09:21.583
> 
> 标签：hibernate, join, hql, jpql

我有这个问题：

**两张表**：

```
tbl_suppliers
   id* (int), 
   name (string), 
   activity1 (int), 
   activity2 (int), 
   activity3 (int)

tbl_activity 
   id* (int), 
   description (string) 
```

两个表之间存在一种“**一对多**”的关系： `tbl_activity`(one) --> `tbl_suppliers`(many) ；这意味着每个供应商都可以为每个活动或什至没有活动（无 id）填写所有三个 ID。

我需要显示`tbl_suppliers`带有列`name`, `activity1`, `activity2`,的记录`activity3`。

在 SQL 中，可以使用以下查询：

```
SELECT s.id, s.name, a1.description activitystring1, 
    a2.description activitystring2, a3.description activitystring3 
FROM tbl_suppliers s 
LEFT JOIN tbl_activity a1 ON (s.activity1=a1.id) 
LEFT JOIN tbl_activity a2 ON (s.activity2=a2.id) 
LEFT JOIN tbl_activity a3 ON (s.activity3=a3.id) 
```

我不能在 HQL 中做同样的事情。我应该映射三倍“一对多”的活动字段吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:56:54.243

表可以映射如下：

```
@Entity
@Table(name="tbl_activity")
public class Activity {
    @Id private Integer id;

    private String description;
    //getters, setters, etc.
}

@Entity
@Table(name="tbl_suppliers")
public class Supplier {
    @Id private Integer id;

    private String name;

    @JoinColumn(name = "activity1")
    @ManyToOne private Activity activity1;

    @JoinColumn(name = "activity2")
    @ManyToOne private Activity activity2;

    @JoinColumn(name = "activity3")
    @ManyToOne private Activity activity3;
    //getters, setters, etc.
} 
```

然后可以使用以下 JPQL 表示原始 SQL 查询：

```
SELECT s.id, 
       s.name, 
       activity1.description, 
       activity2.description, 
       activity3.description
FROM Supplier s
  LEFT OUTER JOIN s.activity1 activity1
  LEFT OUTER JOIN s.activity2 activity2
  LEFT OUTER JOIN s.activity3 activity3 
```

如果您更喜欢面向对象的方法，您可以通过 getActivity1.getDescription() 简单地查询供应商并访问描述。

# blackberry - 如何知道黑莓中调用的应用程序的当前状态？

> ID：12155175
> 
> 赞同：3
> 
> 时间：2012-08-28T08:09:36.000
> 
> 标签：blackberry, java-me

是否可以知道黑莓中调用的应用程序的状态？例如，如果我们在发送一封电子邮件后调用黑莓电子邮件应用程序，我们是否可以知道该应用程序是否已关闭或仍在运行，以及电子邮件的发送位置、主题、内容等？代码可能是这样的：

```
try {
    Message message = new Message();
    Address address = new Address("email@yahoo.com", "Email");
    Address[] addresses = {address};
    message.addRecipients(RecipientType.TO, addresses);
    message.setContent("Testing email from MyTabViewDemo application");
    message.setSubject("Testing Email");
    Invoke.invokeApplication(Invoke.APP_TYPE_MESSAGES, new MessageArguments(message));
    log.debug(MyApp.GUID_LOG, "Send email action done!");
} catch (Exception e) {
    Dialog.inform(e.toString());
} 
```

以及检索其他应用程序（如电话、短信、相机）的状态如何？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:05:22.540

您可以通过调用查看可见的应用程序

```
ApplicationManager.getApplicationManager().getVisibleApplications(); 
```

这将返回一个应用程序描述符数组。从描述符中，您可以知道名称和 ID。

但是，消息传递应用程序可能始终处于后台并且无法关闭（我在这里不是 100% 确定）

但是您无法知道是否已发送消息或未发送这样的邮件。

# java - android跳来跳去？

> ID：12155176
> 
> 赞同：1
> 
> 时间：2012-08-28T08:09:44.750
> 
> 标签：java, android, zooming, processing.js

当我移开手指并再次放置时，zoom 会跳来跳去！有人知道这个问题吗？

```
boolean surfaceTouchEvent(MotionEvent event) {
  pointNum=event.getPointerCount();
  switch (event.getAction() & MotionEvent.ACTION_MASK) {
  case MotionEvent.ACTION_POINTER_DOWN:
    // User is pressing down another finger.
    float x11 = event.getX(0) - event.getX(1);
    float y22 = event.getY(0) - event.getY(1);
    z4 = sqrt(x11*x11+y22*y22);

    break;
  case MotionEvent.ACTION_POINTER_UP:
    // User is released one of the fingers.
    break;
  case MotionEvent.ACTION_MOVE:
    if (pointNum >= 2 ) {
      x1=event.getX(0);
      x2=event.getX(1);
      y1=event.getY(0);
      y2=event.getY(1);

      float x = event.getX(0) - event.getX(1);
      float y= event.getY(0) - event.getY(1);
      float z3 = sqrt(x*x+y*y);
      if (pointNum >= 2 ) {
        if ( z3 < z4 ) {
          zoom = z3/z4;
        }
        else {
          zoom = z3/z4;
        }
        zoom = constrain(zoom, 0, 100);
      }
      press1=event.getSize(0);
      press2=event.getSize(1);
    }
    break;
  }
  return super.surfaceTouchEvent(event);
} 
```

# codeigniter - 为什么显示此错误

> ID：12155179
> 
> 赞同：0
> 
> 时间：2012-08-28T08:09:49.063
> 
> 标签：codeigniter

我正在为我的网站使用 CI。在为相同的内容编写 CMS 时，我没有遇到任何问题，但是当我为用户端编写相同的内容时，我收到错误消息：“404 Page Not Found The page you request was not found。” 我究竟做错了什么？？热烈欢迎任何帮助/建议。谢谢。

在控制器（model.phpl）中：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Model extends CI_Controller {
    function __construct()
        {
            parent::__construct();
            $this->load->model('user_model');
            $this->load->model('common'); 
            $this->load->model('home_model');
            $this->load->model('page_model');
    }

        function _remap($method , $params = array())
        {
            $this->menu = $this->common->createMenuArr();
            $this->index();
        }
        function index()
        {
            $data['sliderArr'] = $this->user_model->sliders();
            $this->load->view('index', $data);
        }

} 
```

在模型（user_model.php）中：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class User_model extends CI_Model{
    function __construct()
        {
            parent::__construct();
            //$this->load->database(); 
    }
       function sliders()
        {
            $query = $this->db->query("SELECT slider FROM tbl_sliders ORDER BY slider_id DESC")->result_array();
            return $query;
        }

} 
```

最后在视图中（index.php）：

```
<div id="slideContainer">
            <div id="slideShim">
                            <?php
                                if(!empty($sliderArr))
                                {
                                    foreach($sliderArr as $slider)
                                    { ?>
                                        <a href="#"><img src="<?php echo base_url();?>images/sliders/<?php echo $slider['slider'];?>"</a>
                                   <?php }
                                }
                            ?>

        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:53:50.427

转到**应用程序 -> 配置 -> 路由**。

并设置`$route['default_controller'] = "index"; //whatever your controller name is on which you want your application to route by default`

希望这可以帮助。

# nhibernate - QueryOver IN 子句？

> ID：12155189
> 
> 赞同：16
> 
> 时间：2012-08-28T08:10:36.653
> 
> 标签：nhibernate, queryover

我想模拟这个查询：

```
SELECT * FROM FOO WHERE ID IN (1,2,3) 
```

我怎样才能在 FNH 中做到这一点？

```
var ids = new List<int>{1,2,3};
var results = session.QueryOver<Foo>().Where( x=> ids.Contains(x.id) ); 
```

但这不起作用，只是给了我一个“无法识别的方法调用”异常。

有任何想法吗？这一定是一个常见的要求。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-28T08:15:51.643

啊哈——明白了！AddRestrictions 有一个 IsIn 方法：

```
var results = session.QueryOver<Foo>().AndRestrictionOn(x=>x.id).IsIn(ids) 
```

有了这最后一块，我们可能已经准备好抛弃我们多年前的手卷 ORM 了！

# android - ListView 下方的按钮

> ID：12155196
> 
> 赞同：1
> 
> 时间：2012-08-28T08:11:02.647
> 
> 标签：android, listview, button, android-linearlayout, android-relativelayout

我有带有一组项目的 listView。我想在列表下方添加 2 个按钮。但如果我这样做：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout

              xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/fileManager"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:orientation="vertical"
              android:gravity="center" >
     <LinearLayout

              android:orientation="vertical"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <ListView

        android:background="#000000"
        android:id="@+id/fileManagerList"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>
    <CheckedTextView  
             android:id="@+id/checkedTextItem" 
             android:layout_width="fill_parent" 
             android:layout_height="wrap_content" 
             android:gravity="center_vertical" 
             android:clickable="true"
             android:checkMark="?android:attr/listChoiceIndicatorMultiple"
             android:textColor="#000000"
             android:paddingLeft="10dip" 
             android:paddingRight="6dip" 
             android:typeface="sans" android:textSize="16dip"/> 

     </LinearLayout>
            <LinearLayout

              xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/fileManager"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:orientation="horizontal"
              android:gravity="center" 
              android:layout_alignBottom="@+id/fileManagerList">

             <Button
                android:id="@+id/attachFiles"
                android:layout_width="200dp"
                android:layout_height="55dp"
                android:background="#007FFF"
                android:gravity="center|center"

                android:text="Attach files"
                android:layout_alignBottom="@+id/fileManagerList"
                android:textColor="#FFFFFF"
                android:textSize="18dp"
                android:textStyle="bold" />

            <Button
                android:id="@+id/cancelFiles"
                android:layout_width="82dp"
                android:layout_height="55dp"
                android:background="#838B83"
                android:gravity="center|center"  
                android:layout_alignRight="@+id/attachFiles"
                android:layout_alignBottom="@+id/fileManagerList"
                android:text="Do not attach"
                android:textColor="#FFFFFF"
                android:textSize="18dp"
                android:textStyle="bold" />
        </LinearLayout>
</LinearLayout> 
```

我的按钮显示在`ListView`. 我尝试以相同的方式执行此操作，但使用`RelativeLayout`，但我得到了正确的列表，按钮位于底部，但它们覆盖了列表的最后一项。我该如何实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:24:22.707

Try this Layout, You can achieve your goal using the below XML Layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relRingtone"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="wrap_content"> 

            <ListView
             android:id="@+id/fileManagerList"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"   
             android:choiceMode="singleChoice"
             android:contentDescription="@string/ringtone"
             android:layout_marginLeft="3dip" 
             android:textSize="2dp" />

            <LinearLayout
            android:id="@+id/closecalmlayout"
            android:layout_below="@+id/fileManagerList" 
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:weightSum="1.0" >

              <Button
                  android:id="@+id/btnOk"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content" 
                  android:layout_marginLeft="5dip"
                  android:layout_marginTop="5dip"
                  android:layout_weight=".50"
                  />

              <Button
                  android:id="@+id/btnCancel"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content"
                  android:layout_marginLeft="5dip"
                  android:layout_marginRight="5dip"
                  android:layout_marginTop="5dip"
                  android:layout_weight=".50"
                   />

            </LinearLayout>  
     </RelativeLayout> 
```

Hope it helps.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T08:18:45.473

这是因为你在任何地方都使用***@+id***，无论你在哪里引用任何id。前任。：

```
android:layout_alignBottom="@+id/fileManagerList" 
```

请改用“ `@id/`”。

而且，尝试：

`android:layout_below="@id/fileManagerList"`// 在按钮中添加这个属性。

# c - c 获取服务器公网IP

> ID：12155199
> 
> 赞同：0
> 
> 时间：2012-08-28T08:11:16.323
> 
> 标签：c, sockets, ip

我想知道如何使用 C 编程语言获取我的服务器的公共 ip。
我已经知道如何用 libcurl 做到这一点，但现在我想了解如何通过套接字编程*（如果可能的话）*获取这些信息。
我已经尝试过，`struct hostent *hp`但我只得到本地地址`127.0.0.1`
这是我使用的代码：

```
int main(int argc, char *argv[]){
    struct hostent *hp;
    int i=0;
    if((hp=gethostbyname(argv[1])) == NULL){
        herror("gethostbyname()");
        exit(1);
    }
    fprintf(stdout, "Hostname: %s\n", hp->h_name);
    /* fprintf (stdout,"IP server: %s\n",inet_ntoa(*((struct in_addr *)hp->h_addr))); con questa printo solo 1 ip */
    while (hp->h_addr_list[i] != NULL) { /* mentre così printo tutti gli eventuali ip */
        printf("IP: %s\n", inet_ntoa(*(struct in_addr*)(hp->h_addr_list[i])));
        i++;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:51:51.770

你不能自己做，没有可靠的方法。假设您在一个 NAT 盒子后面：您永远无法知道内部全局地址（即 NAT 盒子使用的公共地址）。更重要的是，NAT 盒子可能有多个公共地址。

这是因为您的公共地址**不是您的地址**。公共地址只是海市蜃楼，即**外部主机感知您的方式**。所以这是有道理的：你只能通过询问外部主机才能找到它。

### TLDR

向外部主机发出请求：

```
[cnicutar@fresh ~]$ curl ifconfig.me
192.0.2.42 
```

`libcurl`使用或使用您自己的套接字是微不足道的。

# uitableview - 如何访问 UITableView 的第一个和最后一个单元格

> ID：12155201
> 
> 赞同：0
> 
> 时间：2012-08-28T08:11:17.747
> 
> 标签：uitableview, ios5.1, xcode4.4

我有一个带有自定义单元格的 UITableView，我想设置这些自定义单元格的背景图像。UITableView 的第一个和最后一个单元格的背景图像应该与其他单元格不同。

我已经用来`dequeueReusableCellWithIdentifier:`创建单元格。

设置第一个单元格的背景图像，我写了`

```
 if (indexPath.row==0) {

    cell.cellBackgrounfImage.image=[UIImage imageNamed:@"TopCellImage.png"];
} 
```

`

**1）由于重用单元格，，这将设置中间单元格图像而不是第一个单元格。我该如何克服这个问题**

**2）如何访问UITableView的最后一个单元格来设置其他图像**

请任何人给我这两个问题的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:47:54.137

对于步骤 1)

当您滚动表格视图时，它将始终重新加载数据。所以它可能会为中间生成背景图像。

但是，如果您设置了 indexpath.row == 0 条件，那么它不会影响任何行而不是第一行。

对于第 2 步）

您可以获得没有数组（数组计数）的值。认为`int totalArr = [arr count];`

然后应用与第一行相同的条件，

```
if(indexpath.row == (totalArr - 1) {

 cell.cellBackgrounfImage.image=[UIImage imageNamed:@"BottomCellImage.png"]; } 
```

所以，它也适用于最后一个。谢谢。

# matlab - 比较不同图片中的已知对象以查找位置和方向错误？

> ID：12155204
> 
> 赞同：0
> 
> 时间：2012-08-28T08:11:21.287
> 
> 标签：matlab, image-processing, positioning, computer-vision

我是这个地方的新手。我正在做一个项目，我使用具有已知物体尺寸的 X 射线图像。在我的扫描过程中，我想将图像与第一张图像进行比较，以测量我的机械手运动期间的位置和方向误差。

1) 我使用测量对象旁边的已知对象来检查错误。如何将两个或不同的图像与相同的已知对象进行比较？

2）我打算使用matlab工具箱进行进一步处理。matlab可以做吗？如果是这样，有人可以帮忙

3）是否可以使用 POSIT 算法来查找这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:35:23.950

你问的是一个相当复杂的问题，没有添加很多细节。如果您提供更多上下文，我们只能为您提供适当的帮助，也许是一些图像示例。

听上去：你应该使用[图像处理工具箱](http://www.mathworks.nl/products/image/)。

如果您有多个测试对象的图像，旁边有已知对象，那么它最容易使用`normxcorr2`和朋友（请参阅[此页面](http://www.mathworks.nl/products/demos/image/cross_correlation/imreg.html)以获取已解决的示例）。

如果您有大量相同场景的图片，可能在图像之间存在旋转、缩放、光学失真等，并且您仍然希望对对象的位置进行亚像素精确估计，那么[图像配准](http://www.mathworks.nl/help/toolbox/images/f20-9579.html)可能会更好要走的路。

但同样：您应该提供更多细节。只有这样，我们才能给你一个更好、更不笼统的答案。

# math - Josephus p‌r‌o‌b‌l‌l‌m 中的递归关系

> ID：12155213
> 
> 赞同：3
> 
> 时间：2012-08-28T08:11:56.123
> 
> 标签：math, recurrence, josephus

[约瑟夫斯问题](http://www.geeksforgeeks.org/archives/17229)可以通过以下递归来[解决：](https://en.wikipedia.org/wiki/Josephus_problem)

```
 josephus(n, k) = (josephus(n - 1, k) + k-1) % n + 1
 josephus(1, k) = 1 
```

这种递归关系是如何得出的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T19:50:35.290

约瑟夫斯(n, k) = (约瑟夫斯(n - 1, k) + k-1) % n + 1 ...... (1)

用简单的话来说——从公式中的“+1”开始。这意味着重复的 1 次迭代已经完成。现在，我们将剩下 n-1 个人/元素。我们需要以 k 的间隔递归处理 n-1 个元素。但是，现在，由于要删除的最后一个元素位于第 k 个位置，我们将从那里继续。因此，添加了 k-1。此外，这种添加可能会扰乱数组的索引。因此 %n 完成了将数组索引保持在范围内的操作。希望它足够清晰和详尽:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-23T04:39:50.277

这一段从维基百科就足够了..

> 当索引从 1 开始时，则 s 处的人从第一个人移动到位置 ((s-1)\bmod n)+1，其中 n 是总人数。令 f(n,k) 表示幸存者的位置。在第 k 个人被杀死后，我们剩下一个 n-1 的圈子，我们从原始问题中编号为 (k\bmod n)+1 的人开始下一次计数。如果我们从 1 开始计数，则幸存者在剩余圆圈中的位置将为 f(n-1,k)；将其转移以考虑我们从 (k\bmod n)+1 开始的事实会产生递归
> 
> `f(n,k)=((f(n-1,k)+k-1) \bmod n)+1,\text{ with }f(1,k)=1\,,`

# java - Java - 用户映射部分打开错误

> ID：12155218
> 
> 赞同：3
> 
> 时间：2012-08-28T08:12:23.110
> 
> 标签：java

当我尝试写入指定的文件时，会出现以下错误。我试过关闭 FileInputStream 但我仍然遇到同样的问题。

以下是相关代码：

错误日志：

> 错误：C:\Path\Hours Log.csv（请求的操作无法在打开了用户映射部分的文件上执行）

代码：

创建日志：

```
private void writeLog() throws IOException{

    //set up vars and write directories
    File yearStatDir = new File("C:\\Path);
    File yearStatPath = new File(yearStatDir + "\\" + "Hours Log.csv");
    String yearStatString = yearStatPath.toString();

    //read the files
    String existingYearLog = readLogFile(yearStatString, yearStatPath);

    //write the updated file
    String hoursString = "1";
    String dataYear = existingYearLog + hoursString;
    String folderYear = "Satistics\\Yearly data\\" + yearString;
    writeFile(dataYear, ".csv", folderYear, "Hours Log");
} 
```

编写文件：

```
private void writeFile(String data, String fileType, String folder, String fileName){
    try{
        File fileDir = new File("C:\\Path\\" + folder);
        File filePath = new File(fileDir + "\\"+ fileName + fileType);
        writeDir(fileDir);
        // Create file 
        FileWriter fstream = new FileWriter(filePath);
        try (BufferedWriter out = new BufferedWriter(fstream)) {
            out.write(data);                        
            }
        }catch (Exception e){//Catch exception if any
            System.err.println("Error: " + e.getMessage());
        }
    } 
```

读取文件：

```
private static String readLogFile(String path, File f) throws IOException {
    if (f.exists()){
        try (FileInputStream stream = new FileInputStream(new File(path))) {
            FileChannel fc = stream.getChannel();
    MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
    /* Instead of using default, pass in a decoder. */
    fc.close();
    return Charset.defaultCharset().decode(bb).toString();

        }
    }
    else {
        return "";
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T04:28:36.090

对于遇到此问题的任何人，这是我现在使用的替代代码：

```
private static String readLogFile(String path) throws IOException {
    File f = new File(path);
    if(f.exists()) {
        FileInputStream fis = new FileInputStream(f);
        Integer fileLength = (int) (long) f.length();
        byte[] b = new byte[fileLength];
        int read = 0;
        while (read < b.length) {
            read += fis.read(b, read, b.length - read);
        }
        String text = new String(b);
        return text;
    } else {
        String text = "";
        return text;
    }
} 
```

# python-2.7 - python中的条件退出多进程

> ID：12155223
> 
> 赞同：1
> 
> 时间：2012-08-28T08:12:43.453
> 
> 标签：python-2.7, multiprocessing

我正在尝试构建一个并行运行多个进程的 python 脚本。基本上，这些进程是独立的，在不同的文件夹上工作，并将它们的输出作为文本文件保留在这些文件夹中。但在某些特殊情况下，进程可能会以特殊（布尔）状态终止。如果是这样，我希望所有其他进程立即终止。做这个的最好方式是什么？

在阅读了 Doug Hellmann 的优秀教程后，我已经摆弄了 multiprocessing.condition() 和 multiprocessing.manager：http: [//pymotw.com/2/multiprocessing/communication.html](http://pymotw.com/2/multiprocessing/communication.html) 但是，我似乎不明白如何获得一个多处理进程，用于监视状态指示器并在它采用特殊值时退出。

为了举例说明这一点，我编写了下面的小脚本。它在某种程度上做了我想要的，但以异常结束。非常欢迎就更优雅的方式提出建议：

兄弟，格罗

```
import multiprocessing

def input(i):
    """arbitrary chosen value(8) gives special status = 1"""        
    if i == 8:
        value = 1
    else:
        value = 0
    return value

def sum_list(list):
"""accumulative sum of list"""
    sum = 0
    for x in range(len(list)):
            sum = sum + list[x]
    return sum

def worker(list,i):
    value = input(i)
    list[i] = value
    print 'processname',i

if __name__ == '__main__':
    mgr = multiprocessing.Manager()
    list = mgr.list([0]*20)
    jobs = [ multiprocessing.Process(target=worker, args=(list,i))
                for i in range(20)
        ]
for j in jobs:
    j.start()
    sumlist = sum_list(list)
    print sumlist
    if sumlist == 1:
        break
for j in jobs:
    j.join() 
```

# ruby-on-rails - Twitter bootstrap rails 简单的表单格式

> ID：12155228
> 
> 赞同：0
> 
> 时间：2012-08-28T08:12:59.353
> 
> 标签：ruby-on-rails, forms, twitter-bootstrap, twitter-bootstrap-rails

我正在尝试使用 twitter bootstrap 简单表单重新格式化简单的默认设计登录屏幕，但我遇到了重大问题。

![截屏](../Images/fe201cacf9f14e41e38147db5e4e4823.png)

这是我的代码：

```
<h2>Sign in</h2>

<%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => "form-horizontal"}) do |form| %>

<%= form.input :email, :autofocus => true %>
<%= form.input :password %>
<%= form.input :remember_me, :as => :boolean if devise_mapping.rememberable? %>
<%= form.button :submit, 'Sign in', :class => 'primary'%>
<% end %>

<%= render "links" %> 
```

如果我添加，我可以让标签和输入字段之间的间距正确

```
.form-horizontal .controls {
  margin-left: 160px;
} 
```

到我的 application.css 文件，但我在他们的示例应用程序中的任何地方都看不到这个 [https://github.com/rafaelfranca/simple_form-b​​ootstrap](https://github.com/rafaelfranca/simple_form-bootstrap) 并且我真的很困惑正确格式的来源。

我和这个人的代码几乎相同[https://github.com/rafaelfranca/simple_form-b](https://github.com/rafaelfranca/simple_form-bootstrap/issues/6) ​​ootstrap/issues/6但我认为他的代码更旧。我正在使用简单的表单 2.0.2，并使用 twitter-bootstrap-rails 1.4.3 安装了引导程序。我还安装和卸载了其他几个 twitter bootstrap gem，如果有任何可能把事情搞砸的话。

编辑：如果有帮助，这是我生成的代码

## 登入

```
<form accept-charset="UTF-8" action="/admins/sign_in" class="simple_form form-horizontal" id="new_admin" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="xxx" /></div>

<div class="control-group email optional"><label class="email optional control-label" for="admin_email">Email</label><div class="controls"><input autofocus="autofocus" class="string email optional" id="admin_email" name="admin[email]" size="50" type="email" value="" /></div></div>
<div class="control-group password optional"><label class="password optional control-label" for="admin_password">Password</label><div class="controls"><input class="password optional" id="admin_password" name="admin[password]" size="50" type="password" /></div></div>
<div class="control-group boolean optional"><label class="boolean optional control-label" for="admin_remember_me">Remember me</label><div class="controls"><input name="admin[remember_me]" type="hidden" value="0" /><label class="checkbox"><input class="boolean optional" id="admin_remember_me" name="admin[remember_me]" type="checkbox" value="1" /></label></div></div>
<input class="btn primary" name="commit" type="submit" value="Sign in" />
</form>

<a href="/admins/password/new">Forgot your password?</a><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:14:48.223

哇那是痛苦的。事实证明 twitter-bootstrap-rails gem [https://github.com/seyhunak/twitter-bootstrap-rails/issues/324中有一个错误](https://github.com/seyhunak/twitter-bootstrap-rails/issues/324)

如果您遇到此问题，我建议您卸载该 gem 以及与之相关的所有内容，并按照以下说明操作[http://ruby.railstutorial.org/chapters/filling-in-the-layout?version=3.2#sec-custom_css](http://ruby.railstutorial.org/chapters/filling-in-the-layout?version=3.2#sec-custom_css)

开始。链接摘要：

1.  安装'bootstrap-sass' gem
2.  添加带有“@import 'bootstrap';”的 custom.css.scss 文件 你可以走了。

# asp.net - 我的会话变量在一段时间后失去了它们的值，我可以以某种方式延长时间吗？

> ID：12155229
> 
> 赞同：0
> 
> 时间：2012-08-28T08:13:12.913
> 
> 标签：asp.net, vb.net, visual-studio-2008, session-variables

我的会话变量保存了用户用于登录的值，但如果不使用网站，它们似乎会在五分钟左右后初始化。如果登录详细信息不存在，当系统将用户注销时，有什么办法可以延长这段时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:15:59.083

在 web.config 中更改会话超时；

```
<system.web>
    <sessionState timeout="60"></sessionState>
</system.web> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:20:06.377

您可以通过以下方式增加 IIS 超时

```
<system.web>
    <sessionState timeout="60"></sessionState>
</system.web> 
```

通常有一个很长的会话不是一个好主意。它增加了服务器的负载。

考虑使用 AJAX 调用向服务器发送心跳消息，告诉它保持会话处于活动状态。

这样，您可以在服务器上保持一个小的超时，但对于在浏览器中打开应用程序的客户端来说，一个更长的超时。

# c++ - 关联容器引用

> ID：12155232
> 
> 赞同：1
> 
> 时间：2012-08-28T08:13:15.440
> 
> 标签：c++, c++11

在使用关联容器时，我观察到，至少有时会出现一系列：

```
container[key].field1 = something1;
container[key].field2 = something2;
container[key].field3 = something3; 
```

产生比比如说更小的二进制文件（可执行文件）

```
auto& c(container[key]);

c.field1 = something1;
c.field2 = something2;
c.field3 = something3; 
```

我很困惑。AFAIK，需要为每个`container[key] = ...`语句查找一个值。编译器是否优化了这些查找？最好的事情是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T10:19:51.043

“最好的办法是什么？”

最好的办法是不要看这些细节，因为明天（或者无论何时发布编译器、库或咖啡机的下一个版本）无论如何一切都会有所不同。

最后，“最好的办法”是编写代码

*   可读
*   可维护
*   自我记录
*   作品

因此，比较您的解决方案并保留“感觉更好”或“看起来更好”的解决方案。我可能会保留只进行一次查找的那个，因为它强调了所有事情都发生在同一个对象上的事实。

# java - 附件字体和图标大小

> ID：12155235
> 
> 赞同：1
> 
> 时间：2012-08-28T08:13:31.567
> 
> 标签：java, pdf, itext

我正在使用 IText 向 pdf 文件添加附件，如下所示：

```
document.add(new Paragraph(attac.get(index).toString()));  
            chunk = new Chunk("\u00a0\u00a0");  
            PdfAnnotation annotation = PdfAnnotation.createFileAttachment(writer,rect, "Click to open" , null,  
            attac.get(index),  
            attac.get(index));  
                        annotation.setColor(BaseColor.BLUE);

            annotation.setAppearance(new PdfName(""), template);

            chunk.setAnnotation(annotation);  
            document.add(chunk); 
```

这会在创建的 pdf 上生成一个小回形针图标。

如何使图标变大以使其更明显？我希望它的尺寸​​更大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:56:19.087

根据[文档](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfAnnotation.html#createFileAttachment%28com.itextpdf.text.pdf.PdfWriter,%20com.itextpdf.text.Rectangle,%20java.lang.String,%20byte%5B%5D,%20java.lang.String,%20java.lang.String%29)，第二个参数`rect`设置*注释页面中的尺寸*。您可以使用更大的矩形调用该方法，以使图标更大。

只是为了第一次测试，让它看起来非常大（500x500）：

```
PdfAnnotation annotation = PdfAnnotation.createFileAttachment(writer, new Rectangle(500, 500), "Click to open" , null, attac.get(index),  attac.get(index)); 
```

我希望这将使图标更大。

# c# - C# StylusButtonDown 意外调用

> ID：12155237
> 
> 赞同：1
> 
> 时间：2012-08-28T08:13:44.500
> 
> 标签：c#, stylus-pen

我正在开发平板电脑应用程序，我想在其中处理 StylusButtonDown/Up 事件以指示擦除模式。我将这两种方法放入 StylusHandler 中的 DataInterestMask 中，但结果是如果我**不**按下触控笔上的按钮，这两种方法就会被称为事件！当我触摸屏幕时调用 ButtonDown，当我取下它时调用 ButtonUp（注意：当按下触控笔上的按钮时，当然也会调用 ButtonDown /Up。）这是我在阅读后没想到的： [http://msdn .microsoft.com/en-us/library/bb337400](http://msdn.microsoft.com/en-us/library/bb337400) 知道这怎么会发生？

# node.js - 如何在视图 ejs 中访问会话变量？

> ID：12155240
> 
> 赞同：2
> 
> 时间：2012-08-28T08:13:51.150
> 
> 标签：node.js, geddy

我是 node 和 Geddy 的新用户。

如何在 ejs 视图模板中访问会话变量？

我也在寻找一本好书，可以帮助我用 Geddy 建立会员区的教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:58:58.507

如果您升级到最新版本的 Geddy（明天应该发布），您将能够直接从模板访问会话。只需使用`session`您视图中的对象。

目前还没有任何书籍，但我们在 Geddy wiki 中有一些示例和方法。Geddy 网站也刚刚改版，包含 50 多页的文档，以帮助人们入门。

# android - 不明白 Android 中的 java.lang.ClassCastException 错误

> ID：12155245
> 
> 赞同：1
> 
> 时间：2012-08-28T08:14:12.223
> 
> 标签：android, casting, classcastexception, runtimeexception

我通过 Acra 收到了 Android 应用程序的错误报告。在堆栈跟踪中我的代码中没有对行号的引用。我怎么知道问题出在我的代码上？谁能帮助我。

堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.itse.htsurvey/com.itse.htsurvey.Question2Page2Activity}: java.lang.ClassCastException: android.widget.CompoundButton$SavedState cannot be cast to android.widget.AbsSpinner$SavedState
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3188)
        at android.app.ActivityThread.access$600(ActivityThread.java:122)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1028)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:132)
        at android.app.ActivityThread.main(ActivityThread.java:4123)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:491)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassCastException: android.widget.CompoundButton$SavedState cannot be cast to android.widget.AbsSpinner$SavedState
        at android.widget.AbsSpinner.onRestoreInstanceState(AbsSpinner.java:421)
        at android.view.View.dispatchRestoreInstanceState(View.java:8316)
        at android.view.ViewGroup.dispatchThawSelfOnly(ViewGroup.java:2038)
        at android.widget.AdapterView.dispatchRestoreInstanceState(AdapterView.java:766)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.View.restoreHierarchyState(View.java:8295)
        at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1489)
        at android.app.Activity.onRestoreInstanceState(Activity.java:898)
        at android.app.Activity.performRestoreInstanceState(Activity.java:870)
        at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1099)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1793)
        ... 12 more
java.lang.ClassCastException: android.widget.CompoundButton$SavedState cannot be cast to android.widget.AbsSpinner$SavedState
        at android.widget.AbsSpinner.onRestoreInstanceState(AbsSpinner.java:421)
        at android.view.View.dispatchRestoreInstanceState(View.java:8316)
        at android.view.ViewGroup.dispatchThawSelfOnly(ViewGroup.java:2038)
        at android.widget.AdapterView.dispatchRestoreInstanceState(AdapterView.java:766)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2024)
        at android.view.View.restoreHierarchyState(View.java:8295)
        at com.android.internal.policy.impl.PhoneWindow.restoreHierarchyState(PhoneWindow.java:1489)
        at android.app.Activity.onRestoreInstanceState(Activity.java:898)
        at android.app.Activity.performRestoreInstanceState(Activity.java:870)
        at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1099)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1793)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3188)
        at android.app.ActivityThread.access$600(ActivityThread.java:122)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1028)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:132)
        at android.app.ActivityThread.main(ActivityThread.java:4123)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:491)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
        at dalvik.system.NativeStart.main(Native Method) 
```

我的代码 com.itse.htsurvey.Question2Page2Activity：[http ://pastebin.com/gPYyZ0GH](http://pastebin.com/gPYyZ0GH)

编辑 1：更多信息 - 我认为这可能是因为小部件 ID 冲突。savedState 部分表示这发生在 Activity 重新创建之后？此布局由动态添加的视图/布局组成，它们在运行时被赋予 id。

编辑2：只是为了确认在所有测试中，这是我第一次收到这个错误。我无法重现它。

编辑 3：当我更改设备的方向时，我能够重现该错误。那我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:11:58.157

在阅读了 onSaveInstanceState 和 onRestoreInstanceState 之后。我添加了以下代码。我已经保存了所有视图的状态，因此不需要 onSaveInstanceState 和 onRestoreInstanceStat 的默认实现。

```
@Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        saveEnteredData();  
    }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:32:56.633

令人困惑的一件事是，在代码中，您似乎是通过原始 id int 引用视图。我实际上并不完全确定您的代码做了什么，但是...这可能会很混乱并导致 Android 找到错误的视图（也许这就是为什么您会收到有关您甚至没有使用的视图的一些错误的错误，如 AbsSpinner）。例如，代码使用：

```
CheckBox cb1 = (CheckBox) ll2_8.getChildAt(i).findViewById(R.id.tl1).findViewById(R.id.tr1).findViewById(i); 
```

因此，您的最后一个“findViewById(i)”应该引用通过引用生成的东西，就像您对“findViewById(R.id.tr1)”所做的那样，而不是这样做。

要验证，请删除 Eclipse 中“gen”文件夹中的 R.java，清理项目，构建项目，然后查看是否可以重现错误。你的应用应该（？）崩溃

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:17:34.910

看起来您不能将复合按钮投射到 Spinner。您只能将复合按钮用作 CheckBox、RadioButton、Switch、ToggleButton，但不能用作 Spinner。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:17:59.570

您正在尝试使用

> android.widget.CompoundButton$SavedState

对象而不是

> android.widget.AbsSpinner$SavedState。

只需尝试检查导入的类是否正确导入了适当的类。

# c++ - C++ 存储模板结构

> ID：12155251
> 
> 赞同：0
> 
> 时间：2012-08-28T08:14:48.763
> 
> 标签：c++, class, templates, struct, storage

我有一个基本结构`FooBase`：

```
struct FooBase { }; 
```

然后我创建一个模板结构`Foo`，它是以下的子级`FooBase`：

```
template <typename typeName> struct Foo : public FooBase { typeName* foo }; 
```

在某些类中，我创建了一个向量`FooBase`并在其中添加了实例`Foo`：

```
vector <FooBase> FooVector
...    
Foo <Bar> fooInstance;
fooInstance.foo = new Bar();
FooVector.push_back ( fooInstance ); 
```

然后我需要访问存储的数据，但我得到了关于成员缺席的可预测且明显的`foo`错误`FooBase`

```
FooVector[0].foo 
```

我不能写类似的东西

```
Foo <Bar> fooInstance = FooVector[0] 
```

因为我不知道模板参数。

如何`Foo`在向量中存储实例，以便以后访问它们。**请注意，我不知道最后一步的模板参数 - 从向量中读取数据时。**

**PS不允许提升！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:23:34.147

这里发生的事情是在你的

```
FooVector.push_back ( fooInstance ); 
```

行，C++ 静默调用 的复制构造函数`FooBase`，因为您只能在向量中保留该类型的对象。由于从方法中`Foo`公开继承，因此*可以*使用类型的对象调用。`FooBase``FooBase::FooBase(FooBase const&)` *`Foo`*

 *所以，你并不是真正存储`Foo`s，而是实际上存储`FooBase`s。要做你想做的事，你需要一个`std::vector<FooBase*>`or `std::vector<std::shared_ptr<FooBase> >`。

但是，您的向量的内容*仍然*会缺少一个`foo`成员，因为静态类型仍然不是`Foo`. 为了解决这个问题，您有一些选择。你*可以* `dynamic_cast`或`static_cast`你的`FooBase*`进入一个`Foo*`然后访问它的`foo`成员。但这可能会中断，因为`FooBase*`指针实际上可能包含另一种类型，而不是`Foo`.

你为什么不直接使用 an`std::vector<Foo<Bar> >`呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:22:14.320

你在这里切片：

```
vector <FooBase> FooVector
...    
Foo <Bar> fooInstance;
fooInstance.foo = new Bar();
FooVector.push_back ( fooInstance ); 
```

您正在将 a 推`Foo<Bar>`入向量中，`FooBase`因此您只会`FooBase`存储一个对象。这

```
FooVector[0] 
```

返回对 a`FooBase`一无所知的引用`Foo<Bar>`。您可以`Foo<Bar>`直接存储：

```
vector<Foo<Bar>> FooVector; 
```

或存储指向 的指针或智能指针`FooBase`，但是无论如何您都必须将元素动态转换为`Foo<Bar>*`，这不是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:07:43.913

如前面的答案所述，您将 Bar 切片为 FooBase 对象。您的向量必须存储对 Foo 对象的引用，而不是对象本身。

最简单的方法是使用 boost 库中的 smart_ptr 类型之一。

```
#include <boost/shared_ptr.hpp>
#include <vector>
typedef std::vector< boost::shared_ptr<FooBase> > FooVector;
...
FooVector v;
v.push_back( new Bar() ); 
```

如果您将指针本身存储到向量中，您将遇到内存管理问题，使用 boost shared_ptr 类型将自动为您处理分配。*

# animation - 使用 CSS3 在悬停时淡入淡出

> ID：12155254
> 
> 赞同：0
> 
> 时间：2012-08-28T08:15:19.947
> 
> 标签：animation, css, fade

谁能告诉我为什么我的元素不会淡入？

背景图像正确动画，但 .home 类只是出现而不是淡入？

谢谢，代码片段如下。

```
#home {
                                width:35px;
                                height:35px;
                                float:left;
                                margin:20px 20px 0 20px;
                                transition:background-position .2s ease;
                                -webkit-transition: background-position .2s ease;
                                -moz-transition: background-position .2s ease;
                                background-image:url('images/icons.png');
                        }
#home > .home {
                                position:absolute;
                                display:none;
                                margin-top:40px;
                                opacity:0;
                                transition:opacity 3s linear;
                        }
                        #home:hover > .home {
                                display:block;
                                opacity:1;
                        }
                        #home:hover {
                                background-position:0px 35px;
                        }

<!-- END STYLE START HTML -->
<div id="home"><div class="home">HOME</div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:19:29.743

在悬停时添加过渡。

```
#home:hover > .home {
    display:block;
    opacity:1;
    transition:opacity 3s linear;
} 
```

对于跨浏览过渡添加：

```
-moz-transition ...
-webkit-transition ...
-o-transition ... 
```

不支持 -ms-。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-28T08:19:11.413

来自 W3Schools：“任何浏览器都不支持过渡属性。”。相反，请使用 Firefox、Chrome、Safari 和 Opera 的特定转换属性：http: [//www.w3schools.com/cssref/css3_pr_transition.asp](http://www.w3schools.com/cssref/css3_pr_transition.asp)

IE 根本不支持这个。

如果您想要真正的工作转换，您应该考虑使用支持动画的 JavaScript 库，如 JQuery。

# dotnetnuke - 如何创建模块 DNN 6.0

> ID：12155260
> 
> 赞同：0
> 
> 时间：2012-08-28T08:15:31.660
> 
> 标签：dotnetnuke, dotnetnuke-module, dotnetnuke-5

我创建了一个具有 3 个字段（文本框）的模块。现在我想在数据库表中插入所有这些字段。所以我的问题是如何在 DNN 6.0 中创建表、如何建立连接以及如何编写与插入、更新、删除和选择数据表相关的代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:03:09.230

您可以在安装模块时创建表。在 sql 脚本文件 (01.00.00.SqlDataProvider) 中，您可以编写 sql 脚本（如创建表、创建过程...）。

同样对于您的插入/更新/删除/...，您可以使用[linq](http://en.wikipedia.org/wiki/Language_Integrated_Query)或调用存储过程的控制器。

检查此[链接](http://www.codeproject.com/Articles/12853/Creating-a-DotNetNuke-Module-For-Absolute-Beginner)以获取更多详细信息。

# mysql - 如何使用 SQL 打印数据库列中的前 2 个最大值？

> ID：12155261
> 
> 赞同：0
> 
> 时间：2012-08-28T08:15:34.013
> 
> 标签：mysql, sql, sql-server

如何使用 SQL 在数据库表中的属性（列）下打印前两个最大值？

我有一个名为的列`salary`，其中包含不同的行（大约 10 行）。我们需要打印出前两个最大值。

我知道我们可以通过使用函数来获得第一个最大值`max`，但是如果我需要前两个值该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:18:35.567

也许是这样的？(mysql)

```
select `salary` from `mytable` order by `salary` desc limit 2 
```

根据 Alex 的回答，您可以添加`distinct`关键字以确保获得两个不同的值。

```
select distinct `salary` from `mytable` order by `salary` desc limit 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:18:58.427

在 SQL Server 中

```
SELECT TOP 2 salary
from table
order by salary desc 
```

在 MySQL 中

```
SELECT salary
from table
order by salary desc
limit 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:19:09.217

```
select distinct salary from mytable order by salary desc limit 2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:23:05.820

好的，如果您只需要两个顶部，即使它们相等，其他的也有 rigth，但是如果您需要前 2 个数字（并且您不在乎它们是否有多个实例），您可以使用这个：

```
SELECT 
Salary 
FROM Salaries
GROUP BY Salary
ORDER BY Salary DESC
LIMIT 2 
```

# c# - WebInvoke 返回带有额外引号的 Json 字符串

> ID：12155267
> 
> 赞同：1
> 
> 时间：2012-08-28T08:15:59.583
> 
> 标签：c#, json, wcf, post

我正在开发 WCF 网络服务。我需要创建一个返回 Json 字符串的 Post 服务，服务声明如下：

```
[WebInvoke(UriTemplate = "GetMatAnalysis",  ResponseFormat = WebMessageFormat.Json, 
                                                RequestFormat = WebMessageFormat.Json, 
                                                BodyStyle = WebMessageBodyStyle.WrappedRequest, 
                                                Method = "POST")]
string GetMatAnalysis(Stream image); 
```

在此消息中，我使用 using 序列化对象，`JavaScriptSerializer().Serialize()` 然后将其返回。

但是，当我得到响应时，字符串的开头和结尾有一个额外的双引号。例如我得到：`"{"results" : 10 }"`而不是`{"results" : 10 }`

我试图将返回类型更改为`System.ServiceModel.Channels.Message`出现此错误：

```
An ExceptionDetail, likely created by IncludeExceptionDetailInFaults=true, whose value is:
System.InvalidOperationException: An exception was thrown in a call to a WSDL export extension: System.ServiceModel.Description.DataContractSerializerOperationBehavior contract: http://tempuri.org/:IMyWebServices ----> System.InvalidOperationException: The operation 'GetMatAnalysis' could not be loaded because it has a parameter or return type of type System.ServiceModel.Channels.Message or a type that has MessageContractAttribute and other parameters of different types. When using System.ServiceModel.Channels.Message or types with MessageContractAttribute, the method must not use any other types of parameters. 
```

如何让它返回一个没有双引号的 json 字符串？

**附加信息：**

当我像这样使用 GET 请求时：

```
[OperationContract(Name = "Messages")]
[WebGet(UriTemplate = "Messages/GetMessage", ResponseFormat = WebMessageFormat.Json)]
Message GetAdvertisment(); 
```

返回类型是消息，它工作正常。收到的 Json 字符串是正确的。

任何帮助是极大的赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:42:26.063

由于`ResponseFormat = WebMessageFormat.Json`，WCF 服务将您返回的对象序列化为 Json。您还使用`JavaScriptSerializer().Serialize()`并获得双重序列化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T06:19:41.687

返回 Stream 而不是字符串，并将传出响应的内容类型设置为“application/json; chatset=utf-8”。这将正确返回所有内容。

界面：

```
[ServiceContract]
interface ITestService
{        
    [OperationContract]
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json, UriTemplate = "/GetMatAnalysis")]
    Stream GetMatAnalysis(Stream image);
} 
```

服务：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
public class TestService : ITestService
{
    public Stream GetMatAnalysis(Stream image)
    {
        MatAnalysisResult matAnalysis = new MatAnalysisResult { results = 10 };

        string result = JsonConvert.SerializeObject(matAnalysis);
        WebOperationContext.Current.OutgoingResponse.ContentType = "application/json; charset=utf-8";

        return new MemoryStream(Encoding.UTF8.GetBytes(result));
    }
} 
```

结果将是：

```
{"results":10} 
```

# ruby - Ruby 环境变量？

> ID：12155268
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:16:12.083
> 
> 标签：ruby, windows, environment-variables

我正在学习一些 Ruby，我已经使用[RubyInstaller.org](http://www.rubyinstaller.org)上的安装程序将它安装在 Windows 7 X64 上。

现在我的问题是安装完成了。但是当我尝试在命令提示符中检查 ruby​​ 版本时，例如

```
ruby -v 
```

我只是收到一个错误，说我的系统不知道那是什么。包括 ruby​​ -e 和 ruby​​ -s 等...现在来自 Java 背景，我认为这与可能未为 Ruby 设置的环境变量有关？

究竟是如何做到这一点以快速建立起来的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:19:04.673

尝试编辑您的`PATH`变量。我的`PATH`变量包含`C:\Ruby192\bin`，在这个文件夹中有文件`ruby`和`irb`.

另外我认为安装程序中有一个选项，您可以检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:20:42.550

1.  找到 Ruby 安装路径。也许像“C:\Ruby193 ...”之类的东西。在它下面有一个 bin 目录。
2.  将 bin 目录添加到您的 PATH 环境中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T22:55:27.937

在安装时检查 PATH 选项的建议很好。

帮助我的另一件事是在 Windows 中搜索“使用 Ruby 启动命令提示符”。从该命令行，Ruby 运行良好，我可以查看 XAMPP 目录中的 SASS 更改。使用 Git Bash 或常规的 Windows 命令行，我永远无法让它工作，但是 Ruby 的命令提示符就像一个魅力。

# windows-phone-7 - 在wp7中从墓碑中恢复时慢慢地

> ID：12155269
> 
> 赞同：0
> 
> 时间：2012-08-28T08:16:21.283
> 
> 标签：windows-phone-7, tombstoning

我在项目中遇到了问题。是关于墓碑的。我发现恢复需要很长时间，有时可以长达5分钟而没有出现错误！

我从来没有遇到过这样的问题，谁能告诉我为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:07:46.467

最后，我发现问题出在代码哪里，如果我删除它们，该应用程序运行良好。

```
DeviceNetworkInformation.ResolveHostNameAsync(
         new System.Net.DnsEndPoint("m.baidu.com", 80),
         new NameResolutionCallback(handle =>
         {
             NetworkInterfaceInfo info = handle.NetworkInterface;
             if (info != null)
             {
                 networkType = GetNetType(info);
             }
             else
                 networkType = NetType.NONE;

         }), null); 
```

# php - 如何记录我的网站成员邀请的电子邮件

> ID：12155271
> 
> 赞同：0
> 
> 时间：2012-08-28T08:16:46.330
> 
> 标签：php, email

我们的网站上有一个赞助系统。A 人是我们网站的成员。A可以邀请B。如果B加入我们的网站，我们会给A推荐积分。

我的问题：当 B 加入我们的网站时，我将如何跟踪 B 是由 A 邀请的？

我们正在通过电子邮件通过指向我们网站注册页面的链接发送邀请。

第二个问题：如果 B 已经是我们网站的成员，我如何告诉 A？如果 A 想从任何邮件系统（如 Yahoo 或 Gmail）邀请他的所有朋友怎么办？

我很困惑，所以如果有人能至少澄清一点，这对我来说是一个很大的帮助。非常感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:23:19.633

有两种基本方法：

**第一的**

您创建了一个唯一的推荐 ID，该 ID 与所有数据一起存储在 db 中，这意味着它包含发送电子邮件的人、时间等。之后，您只需将 ID 提供给必须使用的链接

**第二**

这更简单，您只需在发送给 B 的链接中将 user_id 作为您的推荐 ID。这样您就不需要在数据库中存储任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:21:15.490

每个会员都应该有自己的邀请链接，因此每次有新用户通过会员邀请链接注册到您的网站时，脚本都会向邀请链接所有者添加一些积分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:23:07.863

我能想到的两个选择：

1.  告诉成员，如果他们想要积分，他们应该使用为他们生成的特殊 URL。给每个成员一个唯一的代码并将其包含在 url 中，这样当 B 来时，您就知道它来自 A。如果 A 想从不同的系统发送，则应使用特殊生成的链接。
2.  告诉用户仅通过您的系统邀请以获得积分 - 保存哪个成员邀请了哪个电子邮件地址。当 B 使用电子邮件地址注册时，您会知道 A 邀请了他。而且，如果其他成员也发出邀请，你就会知道A是第一个邀请他的。

# cakephp - 开发服务器上的 Cakephp 2.1 白屏

> ID：12155273
> 
> 赞同：0
> 
> 时间：2012-08-28T08:16:56.087
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我们在服务器上创建了一个子域。首先我们测试了 HTML 是否可以正常工作，然后我执行了 phpinfo() 并且一切正常。但是当我将整个 Cakephp 应用程序移动到 devserver 时：

```
dev.lessonshark.com 
```

我得到一个白屏。但我可以去：

```
dev.lessonshark.com/css/front.css 
```

那路线很好。

到目前为止我做了什么：

```
1\. Made debug in core set to 3.
2\. Removed all the cache files in tmp folder. 
```

仍然没有运气，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:32:50.383

首先，检查您的服务器错误日志。白屏通常是以下之一：

*   您没有清除 /app/tmp/cache 中的文件（离开目录，删除所有文件）。

*   您的内存不足（检查服务器日志）

*   mod_rewrite 未在服务器上启用或未正确配置（检查您的 apache 配置中是否设置了 allowOverride，以便读取 Cake 的 .htaccess 文件）

[编辑]

*   你还没有让 web 用户可以写你的 app/tmp 目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T12:25:27.360

我只是被这个问题搞砸了。

如果上述解决方案均无效（调试、清空缓存等），请尝试此解决方案。

打开你的控制器，删除任何不需要的空行，尤其是在文件顶部标签周围的任何地方`<?php`，并确保结束`?>`标签周围也没有无用的空行。

我希望它有所帮助。

# .net - .NET 中的 ActiveMQ 连接启动超时

> ID：12155274
> 
> 赞同：3
> 
> 时间：2012-08-28T08:17:01.600
> 
> 标签：.net, activemq, nms, apache-nms

我有 ActiveMQ 的 .Net 客户端。我正在使用 Apache.NMS 1.5.1.2739 和 Apache.NMS.ActiveMQ 1.5.6.2746

我使用以下代码连接到代理：

```
var connectionFactory = new ConnectionFactory("failover:tcp://127.0.0.1:61616/?transport.timeout=5000");
IConnection connection = connectionFactory.CreateConnection();
connection.Start(); 
```

问题是当没有可用的 ActiveMQ 代理时 connection.Start() 永远挂起。所以 transport.timeout 在这里没有帮助。我想让 Start() 方法超时。因此，在这段时间之后发生异常并且执行可能会进一步进行。如何避免这样的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T11:14:17.433

我找到了正确的 uri 参数。整个 uri 应该看起来像这样

> 故障转移:(tcp://127.0.0.1:61616/)?transport.startupMaxReconnectAttempts=2

但请注意，如果发生异常，ActiveMQ 客户端将不再尝试重新连接，您需要自己进行。

# eclipse - 服务器视图不再显示服务器状态

> ID：12155275
> 
> 赞同：3
> 
> 时间：2012-08-28T08:17:13.060
> 
> 标签：eclipse

在显示服务器视图中，我列出了两台服务器。两者都用于通过显示“[stopped]”或“[started]”来显示服务器状态，以及显示服务器是否以调试模式启动。

今天 - 只有一个服务器正在显示此信息，所以不知何故，我设法关闭了第二个服务器的此信息的显示。

我是如何做到这一点的，更重要的是，我如何重新打开它 - 无法一目了然地看到这些信息是一种痛苦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:27:29.353

要在服务器视图中显示或隐藏服务器的状态和状态：

*   打开标签装饰首选项页面：单击窗口 -> 首选项，展开常规 -> 外观，然后单击标签装饰。
*   选中或清除服务器状态装饰器复选框。默认情况下，此复选框处于选中状态。

请参阅[在服务器视图中显示状态和状态](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.server.ui.doc.user/topics/rwrcview.html)

# java - Java 线程 wait() 和 Notify() 似乎特别有效

> ID：12155278
> 
> 赞同：1
> 
> 时间：2012-08-28T08:17:30.880
> 
> 标签：java, multithreading

```
class myThreadRun implements Runnable
{

    public void run() {
        roo();
    }
    public synchronized void roo()
    {
        System.out.println("In thread before wait " + Thread.currentThread().getName());
        try {
            wait();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        JOptionPane.showMessageDialog(null, "After wait in\n"+Thread.currentThread().getName());
        System.out.println("In thread after wait " + Thread.currentThread().getName());
        //notify();
    }

    public synchronized void foo()
    {
        notify();
    }
}

public class ThreadingDemo {

    public synchronized void Start()
    {
        System.out.println("Labamba");
        myThreadRun mThRun =  new myThreadRun();
        Thread thread =  new Thread(mThRun);
        thread.start();
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        //mThRun.foo(); //This works
        //mThRun.notify(); //crash
        //thread.notify();//crash
        try {
            thread.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
public static  void main(String[] args) {
        new ThreadingDemo().Start();
    } 
```

这是演示 wait() 和 notify() 的简单代码，如果我执行 mThRun.notify( ) 程序崩溃，但 mThRun.foo() 运行顺利并给出了急需的结果。我需要知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:23:13.393

您需要拥有所有对象的监视器`obj.wait()`和`obj.notify()`.

这就是为什么它在`synchronized`块内部`mThRun`而不是外部调用时起作用的原因。所以如果你把它`mThRun.notify();`放在一个同步块中，它就可以工作，就像这样：

```
synchronized (mThRun) {
    mThRun.notify();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:26:06.383

In your case you are getting an [IllegalMonitorStateException](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html).

> Thrown to indicate that a thread has attempted to wait on an object's monitor or to notify other threads waiting on an object's monitor without owning the specified monitor.

Put another way, you don't hold the lock of the object you are trying to notify. Having the lock of a different object doesn't help.

* * *

When you use notify() and wait() you need to change a state and check for it. If you don't do this, you can find that either

*   notify() is called before wait() and the signal is lost
*   wait() wakes prematurely

You cannot assume notify/wait is a reliable messaging protocol.

I suggest you consider using the concurrency library which is a better choice in most cases from Java 5.0 (2004)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T13:42:26.803

可能是您在等待/通知方面非常努力。它非常简单。您需要知道的是哪个对象用于监视器锁定。为了使相同的代码正常工作，我修改了相同的代码：（我在更改代码的地方添加了 MAK 注释，希望对您有所帮助）

```
class MyThreadRun implements Runnable {
    public void run() {
        roo();
    }
    public synchronized void roo() {
        System.out.println("In thread before wait " + this);
        try {
            wait();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        JOptionPane.showMessageDialog(null, "After wait in\n" + Thread.currentThread().getName());
        System.out.println("In thread after wait " + Thread.currentThread().getName());
    }

}

public class ThreadingDemo {

    public static void main(String[] args) {
        MyThreadRun mThRun = new MyThreadRun();
        System.out.println("Labamba: " +mThRun);
        Thread thread = new Thread(mThRun);
        thread.start();
        try {
            Thread.sleep(100);
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        //mThRun.foo(); //This works  //MAK: no sense
        //mThRun.notify(); //crash   //MAK: Need monitor lock
        synchronized (mThRun) {
            mThRun.notify();//crash                  //MAK: will work now
        }
        try {
            thread.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }
} 
```

# iphone - 在平移/缩放时接收委托消息

> ID：12155279
> 
> 赞同：0
> 
> 时间：2012-08-28T08:17:31.630
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个自定义 UIView，它是另一个类的委托，它不断向它发送消息（更新 UILabel 的文本）。这个自定义视图也有一个 UIScrollView 作为子视图。问题是，当我平移/捏住滚动视图时，没有收到任何委托消息（仅在交互完成后）。

我怎样才能让它一直接收消息？

* * *

这是其他类向其委托发送消息的方式：

```
 [NSTimer scheduledTimerWithTimeInterval:1.0
                                    target:self
                                  selector:@selector(onTick:)
                                  userInfo:nil
                                   repeats:YES];

   - (void)onTick:(NSTimer *)timer {
       NSString *label = ...

       if ([delegate respondsToSelector:@selector(updateLabelText:)]) {
           [delegate updateLabelText:label];
           [delegate updateLabelText:label];
       }

       ...

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:44:33.710

将 UIPanGestureRecognizer/UIPinchGestureRecognizer 添加到您的 UIScrollView 并监听委托方法：

```
Regulating Gesture Recognition
– gestureRecognizerShouldBegin:
– gestureRecognizer:shouldReceiveTouch:
Controlling Simultaneous Gesture Recognition
– gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:52:05.543

使用`[[NSRunLoop currentRunLoop] addTimer:timer forMode:UITrackingRunLoopMode];`可以解决问题。谢谢@Jens Kilian！

# php - 从 PDO 返回对象数组

> ID：12155282
> 
> 赞同：7
> 
> 时间：2012-08-28T08:17:39.660
> 
> 标签：php, mysql, pdo

我有一个 PHP 类 ( `POJO_FOO`)，它映射到一个表 ( `TABLE_FOO`)。

例如，一行等于该类的一个对象。

现在我正在编写一个管理器，它返回与特定查询匹配的此类对象的数组。使用`PDO`，我怎样才能返回对象数组？

当我做 simple时，它​​返回关联数组（ => ）`fetchAll`的数组（代表结果数）。有没有一个选项可以让我以对象数组的形式得到结果？`column``value``fetchALL`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T08:21:18.593

您可以使用 PDO::FETCH_CLASS 为您的课程添加数据：

```
return $pdo->query('SELECT * FROM tablefoo')->fetchAll(PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE,'POJO_FOO'); 
```

使用 PDO::FETCH_CLASS|PDO::FETCH_PROPS_LATE 也很有用，因为它使对象的构造更加一致。习惯性地，您的构造函数在一切之前被调用。如果您不使用 FETCH_PROPS_LATE，它将在您的属性水合后调用。

# regex - 密码的正则表达式模式

> ID：12155283
> 
> 赞同：2
> 
> 时间：2012-08-28T08:17:39.847
> 
> 标签：regex, validation, passwords

我需要一个验证密码格式的正则表达式模式。规则是：

*   总共至少 8 个字符
*   至少两个字母
*   至少两个数字或符号

我想出了以下内容： `/((?=.*[0-9\@\&#\$\?\%!\|(){}[]])(?=.*[a-zA-Z]).{8,})/`

如果两者都发生一次，它将查看，但我需要它来验证它们是否至少发生两次。如果我添加`{2,}`这样的： `/((?=.*[0-9\@\&#\$\?\%!\|(){}[]]{2,})(?=.*[a-zA-Z]{2,}).{8,})/`

然后以下不起作用，例如：a1a1a1a1a1

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:25:51.780

这就是你这样做的方式，使用积极的前瞻：[http ://regex101.com/r/uW0yI4](http://regex101.com/r/uW0yI4)

`/^(?=.*[a-z].*[a-z])(?=.*[!"#...\d].*[!"#...\d]).{8,}$/gmi`

只需替换`!"#...`为您要匹配的所有符号。

注意：您的应用程序可能不需要多行标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:34:05.157

这应该给你你所追求的：

```
^((?=(.*[\d0-9\@\&#\$\?\%!\|(){}[\]]){2,})(?=(.*[a-zA-Z]){2,}).{8,})$ 
```

# java - 为什么我无法从 Facebook 在“#”字符后发送的 url 中获取参数

> ID：12155285
> 
> 赞同：0
> 
> 时间：2012-08-28T08:17:42.607
> 
> 标签：java, facebook

我正在尝试根据使用 jsp 和 servlet 的 Facebook 服务器端身份验证流程登录到 facebook。我成功登录到我的 fb 帐户，但是当 fb 重定向到我的应用程序时，它会在字符“#”之后发送参数（状态...）。我在看这个： http: [//facebook.stackoverflow.com/questions/4144878/get-url-parameters-after-in-java](http://facebook.stackoverflow.com/questions/4144878/get-url-parameters-after-in-java)。

但我以与他们不同的方式来做这件事。

这是我的代码：

```
response.sendRedirect(response.encodeRedirectURL("http://www.facebook.com/dialog/oauth/?client_id=343473222406382" +
                "&redirect_uri=http://localhost:8080/accountsLogger&response_type=token&state=logged")); 
```

我正在重定向到：

```
{http://localhost:8080/accountsLogger/#state=logged&access_token=AAAE4YxdpUO4BAILjJoj5GsFZBDir1YmZCy4ZC9BmZAOCAztC2QclKo46OSce7dzObL6lSzrYpRDgQycOzzhfbqThR6kVC16lmurC5X5oV1lIrsvI0h9D&expires_in=4329.} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:28:00.220

FB API（主要）构建为在客户端使用。浏览器永远不会将 URL 的哈希部分（“#”之后的内容）发送到服务器（这就是您无法获取它的原因）。如果您在服务器端需要此信息，则需要在您的 accountsLogger 页面 ( `document.location.hash`) 上使用 javascript 获取它，将“散列参数”转换为另一个 URL 上的“常规”url 参数并将页面重定向到该 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:29:35.550

之后的 URL`#`不会发送到服务器。它最初的目的是作为一个锚点，它是在下载页面上引用的东西。然后浏览器执行：

```
GET /your/url.htm?param1=value&param2=value 
```

如果`#someanchor`最后有，浏览器会尝试定位页面以使该锚可见（如果存在）。

老派主播：

`<a name="someanchor">Hello</a>`

标准 HTML 锚点：

`<p id="someanchor">Hello</p>`（感谢@乔恩汉娜）

# linux - 如何在 openSUSE 11.3 上安装 libgdal？

> ID：12155288
> 
> 赞同：0
> 
> 时间：2012-08-28T08:17:47.367
> 
> 标签：linux, installation, opensuse, gdal

**库达尔**

```
linux-y3pi:~ # rpm -Uvh libgdal1-1.8.0-1.59.src.rpm 
warning: libgdal1-1.8.0-1.59.src.rpm: Header V4 RSA/SHA1 Signature, key ID 1abd1afb: NOKEY
   1:libgdal1               ########################################### [100%]
linux-y3pi:~ # 
```

**libgdal-开发**

```
linux-y3pi:~ # rpm -Uvh libgdal-devel-1.8.0-1.59.x86_64.rpm 
warning: libgdal-devel-1.8.0-1.59.x86_64.rpm: Header V4 RSA/SHA1 Signature, key ID 1abd1afb: NOKEY
error: Failed dependencies:
     libgdal1 = 1.8.0-1.59 is needed by libgdal-devel-1.8.0-1.59.x86_64 
```

当然*libgdal-devel*也需要其他依赖项，但是为什么它不能看到*libgdal*。

```
linux-y3pi:~ # whereis libgdal
libgdal: /usr/local/lib/libgdal.la /usr/local/lib/libgdal.a /usr/local/lib/libgdal.so 
```

当然，这不在路径中：

```
linux-y3pi:~ # $PATH
bash: /home/anisha/qtsdk-2010.05/qt/bin/:/home/anisha/qtsdk-2010.05/bin:/home/anisha/qtsdk-2010.05/qt/bin:/home/anisha/qtsdk-2010.05/qt/bin/:/home/anisha/qtsdk-2010.05/bin:/usr/lib64/mpi/gcc/openmpi/bin:/home/anisha/bin:/usr/local/bin:/usr/bin:/sbin:/usr/sbin:/bin:/usr/bin/X11:/usr/X11R6/bin:/usr/games: No such file or directory 
```

我做到了：`export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH`作为root，没有帮助。
我现在在哪里安装这个`libgdal`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:23:49.737

> ```
> # rpm -Uvh libgdal1-1.8.0-1.59.src.rpm 
> ```

“src”表示它是源 RPM。您需要找到二进制 RPM，特别是（可能）x86_64 RPM。它将具有相似的名称，只是它会改为“x86_64”。

# javascript - 访问 .js 文件中的 JavaScript 变量？

> ID：12155289
> 
> 赞同：-2
> 
> 时间：2012-08-28T08:17:52.733
> 
> 标签：javascript, variables

我有一个普通的 html 站点，它定义了一个名为*myVar*的变量。这是声明：

```
var myVar = something_that_is_set_dynamically; 
```

现在我有一个 js 文件，我需要在该文件中获取 myVar 的值。我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:27:30.430

确保在声明`myVar`.

例如：

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title></title>
</head>
<body>
    <script type="text/javascript">
        var myVar = "foobar";
    </script>

    <script type="text/javascript" src="yourJsFileUses-myVar.js"></script>

    <!-- you cannot declare myVar here, because "yourJsFile.js" is already
         being executed, so you have to declare your myVar before you include
         your javascript file -->
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:20:04.617

在您的脚本中：

```
do_something_with(myVar); 
```

并确保`<script>`使用它的 出现在`<script>`定义它的 之后，或者不在未在定义下运行的函数之外使用它`<script>`已被处理。

将某些东西放在不同的文件（或内联脚本元素）中的唯一影响是它在浏览器解析它的情况下将不可用。第一个脚本将在将提升应用于第二个脚本之前运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:22:16.067

在 HTML 页面的标题中包含该文件：

```
<script type="text/JavaScript" src="yourfile.js"></script> 
```

如果变量是全局变量（即，它没有在函数内声明），它将对您的整个页面可见。

# perl - 编译错误取决于“使用”顺序

> ID：12155290
> 
> 赞同：1
> 
> 时间：2012-08-28T08:17:53.693
> 
> 标签：perl

我有这三个文件

常量/请求.pm

```
#!/usr/bin/perl

use strict;

use base 'Exporter';

use constant MR_NOACTION     =>   0;
use constant MR_START        =>   1;
use constant MR_STOP         =>   2;

our @EXPORT = (
    'MR_NOACTION',
    'MR_START',
    'MR_STOP'
);
1; 
```

JobManDB.pm

```
#!/usr/bin/perl

package JobManDB;

use strict;
use warnings;

use constant WEB_DB_FILE    => "db/web.db";
use constant MASTER_DB_FILE => "db/master.db";

use Constants::Requests;

sub new
{
    print "Ahoj: " . MR_NOACTION . "\n";
    ... 
```

大师.pm

```
#!/usr/bin/perl

package Master;

use strict;
use warnings;

use Time::HiRes qw( usleep );
use Data::Dumper;

use JobManDB;                   # use #1

use Constants::Requests;  # use #2

... 
```

发布的程序正在运行，但如果我`use #1`使用`use #2`编译失败并出现错误：

```
Bareword "MR_NOACTION" not allowed while "strict subs" in use at lib/JobManDB.pm line 26. 
```

（第 26 行是“新”子程序中的行）。我想知道为什么。谢谢你。

编辑：另一个问题是，如果我`package Requests;`在 Requests.pm 的开头添加一行，编译会失败并出现相同的错误，但独立于“使用”的顺序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:36:06.537

该`Requests.pm`文件缺少其包声明，`package Constants::Requests;`.

# apache-flex - 如何将图标添加到 AdvancedDataGrid 列标题并保留文本的自动换行功能

> ID：12155293
> 
> 赞同：2
> 
> 时间：2012-08-28T08:18:01.627
> 
> 标签：apache-flex, header, advanceddatagrid

如前所述，我试图在 flex AdvancedDataGrid 中获取由图标和可换行文本组成的列标题。

（**编辑**：我忘了提到上下文的一个重要部分：列是在动作脚本中动态添加的。这显然会改变行为。）

我尝试过使用自定义 mxml headerRenderer，如下所示：

```
<mx:headerRenderer>
    <fx:Component>
        <mx:HBox width="100%"
                 height="100%"
                 verticalAlign="middle">
            <mx:Image source="<image_url>"
                      width="10%"
                      height="100%"/>
            <mx:Text text="{data.headerText}"
                     width="90%"
                     height="100%"/>
        </mx:HBox>
    </fx:Component>
</mx:headerRenderer> 
```

但由于某种原因，这里的文本被截断而不是包装（它在渲染器之外工作）。

我还尝试创建 AdvancedDataGridHeaderRenderer 的子类并覆盖 createChildren 以添加图标：

```
override protected function createChildren():void
{
    var icon:Image = new Image();
    icon.source = <image_url>;
    icon.width = 16;
    icon.height = 16;
    addChild(icon);

    super.createChildren();
} 
```

但是随后，图标和文本被叠加了。

我对此没有想法。还有谁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:42:38.407

当我从您的 headerRenderer 中删除该`height="100%"`属性时，它对我有用。`mx:Text`

**更新**：*只有当我手动拉伸 AdvancedDataGrid 组件时，它才会像这样工作。我会研究如何让它无条件地工作。*

当 Text 组件的高度设置为 100% 时，它被限制为其父级`HBox`的高度。因此，当一个单词被换行并移动到下一行时，它是不可见的，因为 Text 组件的高度不允许它可见。

如果移除此约束，Text 组件的高度将根据其内容动态确定，headerRenderer 也是如此。还要添加`minHeight`到您的文本中，以便在加载时可见。

这是代码（我还删除了滚动条，因为它们在调整大小时显示）：

```
<mx:headerRenderer>
    <fx:Component>
        <mx:HBox width="100%"
                 height="100%"
                 verticalAlign="middle"
                 horizontalScrollPolicy="off"
                 verticalScrollPolicy="off">
            <mx:Image source="<image_url>"
                      width="10%"
                      height="100%"/>
            <mx:Text text="{data.headerText}"
                     width="90%"
                     minHeight="20"/>
        </mx:HBox>
    </fx:Component>
</mx:headerRenderer> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T08:14:52.797

如果有人对如何使用动态创建的列感兴趣，Hunternif 的渲染器代码和一些添加的列创建代码的组合对我有用：

列需要具有固定宽度，并且需要无效以通知 AdvancedDataGrid 它需要重新呈现：

```
var cols:Array = [];

for each (...) {
    var column:AdvancedDataGridColumn = new AdvancedDataGridColumn();
    ...

    // Fix the width of created columns
    column.width = 150;

    cols.push(column);
}

grid.columns = cols;

// Invalidate columns so that sizes are recalculated
grid.mx_internal::columnsInvalid = true;

// Take changes into account
grid.validateNow(); 
```

# xmpp - 无法在 pubsub xmpp 中发布

> ID：12155294
> 
> 赞同：1
> 
> 时间：2012-08-28T08:18:11.347
> 
> 标签：xmpp, publish-subscribe, ejabberd

创建节点“test1_node1”后，我将以下节发送到 ejabbers 服务器

```
<iq id="publish1" to="pubsub.oomaxmpp.com" type="get" from="admin@oomaxmpp.com/1697575709134613774110793">
<pubsub xmlns="http://jabber.org/protocol/pubsub">
<publish node="test_node1"><item id="qwert12345">
<entry xmlns="http://www.w3.org/2005/Atom">
<title>*publish*</title>
<summary>*1234567890*</summary>
<published>2003-12-13T18:30:02Z</published>
<updated>2003-12-13T18:30:02Z</updated>
</entry>
</item>
</publish>
</pubsub>
</iq> 
```

但我得到以下节的错误结果，

```
<iq id="publish1" xml:lang="en" type="error" to="admin@oomaxmpp.com/1697575709134613774110793" from="pubsub.oomaxmpp.com">
<pubsub xmlns="http://jabber.org/protocol/pubsub"><publish node="test_node1">
<item id="qwert12345"><entry xmlns="http://www.w3.org/2005/Atom">
<title>*publish*</title>
<summary>*1234567890*</summary>
<published>2003-12-13T18:30:02Z</published>
<updated>2003-12-13T18:30:02Z</updated>
</entry>
</item>
</publish>
</pubsub>
<error code="501" type="cancel"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/>
</error>
</iq> 
```

我不明白，如果功能没有实现，节点是如何创建的？为什么我不能发布？

# java - 如何在 restFul 服务 URL 的末尾添加参数？

> ID：12155297
> 
> 赞同：2
> 
> 时间：2012-08-28T08:18:39.973
> 
> 标签：java, xml, json, rest

我正在尝试在 restFul Web 服务 URL 的末尾添加一个参数。

**使用 Spring3**

```
@RequestMapping(value="/searchForXmlFormat/{lastName}*?format=xml"* ,headers="Accept=application/atom+xml",method=RequestMethod.GET) 
```

我想得到这样的东西：

```
rest/name/abcd?format=xml 
```

或者

```
rest/name/abcd?format=json. 
```

我有获取 JSON /XML 格式数据的代码。我需要弄清楚如何在末尾添加`?format=xml` or 。`?format=json`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:24:55.630

Why doesn't the recipient of your request just check what data format you're accepting from your request headers?

Otherwise, I guess you could specify them as query parameters, but this is totally dependant on what language and frameworks you're using.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:27:50.647

如果您使用 JAX-RS，我认为您正在寻找的是 annotation [`QueryParam`](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/QueryParam.html)。这是一个可能适合您情况的示例：

```
@GET
@Produces( { MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON } )
public String doGet(@QueryParam("format") String fmt) {
//...
} 
```

使用上面的代码，您的 URL`fmt`中将包含参数的值`format``rest/name/abcd?format=...`

# android - 如何让我的 Android 应用程序适合任何手机或平板电脑屏幕？

> ID：12155300
> 
> 赞同：1
> 
> 时间：2012-08-28T08:18:52.230
> 
> 标签：android, resize, screen-orientation

每部手机或平板电脑，我应该怎么做才能设计出合适的界面？

用 WVGA 3.7in 编写了运行屏幕的应用程序，但我将屏幕更改为 2.7in QVGA，另一方面，应用程序溢出屏幕，我将屏幕更改为 5.1in WVGA，应用程序在屏幕上保留了一点点。

我可以做些什么来适应任何手机或平板电脑的屏幕？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:28:36.413

如果您想让您的应用全屏显示，除了之前的答案中的内容，您可以考虑添加以下代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:19:30.870

您应该阅读本指南：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:23:01.920

1.  首先使用相对布局

2.  为每个密度制作图形（ldpi、mdpi、hdpi 和 xhdpi）

3.  尝试 9 修补您的图形。

4.  有关详细信息，请参阅[此处](http://developer.android.com/guide/practices/screens_support.html)。

# php - 问题缓存 Zend_Paginator 并启用 DB profiler

> ID：12155304
> 
> 赞同：4
> 
> 时间：2012-08-28T08:19:03.160
> 
> 标签：php, zend-framework, zend-db, zend-paginator

`Zend_Paginator`尝试缓存并`Zend_Db_Adapter`启用探查器时，我遇到了一个奇怪的问题。

它创建一个缓存文件，但每个`ID`都不同，这意味着缓存命中永远不会发生。

禁用分析器后，一切都按预期工作。这里发生了什么？是否可以让缓存与分析器一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T10:49:07.760

有关于 zend 框架的这个问题的错误报告。例如。这个：[ZF Bug 8731](http://framework.zend.com/issues/browse/ZF-8731)。

> 问题是当 Zend_Db_Profiler 启用时，序列化对象（Zend_Paginator_Adapter_DbSelect）还包含一个独特的时间测量查询。所以我们可以 100% 确定函数 md5() 的结果每次都会不同。

此相关错误已在 1.12 中修复：[ZF Bug 6989](http://framework.zend.com/issues/browse/ZF-6989)。如果你可以更新框架，你应该。

# optimization - 有限域约束系统的推导方程

> ID：12155312
> 
> 赞同：2
> 
> 时间：2012-08-28T08:19:28.213
> 
> 标签：optimization, compilation, constraints, constraint-programming

下面的不等式系统在整数上求解 x1 和 x2。

x1 + x2 = l

x1 >= y1

x2 >= y2

x1 <= z1

x2 <= z2

l - z1 <= x2

l - z2 <= x1

l,y1,y2,z1,z2 是任意但固定且 >= 0。

使用示例值

l = 8

y1 = 1

y2 = 2

z1 = z2 = 6

我[求解系统](http://www.wolframalpha.com/input/?i=solve+x_1+%2B+x_2+%3D+8%2C+x_1+%3E%3D+1%2C+x_2+%3E%3D+2%2C+x_1+%3C%3D+6%2C+x_2+%3C%3D+6%2C+2+%3C%3D+x_2%2C+2+%3C%3D+x_1+)并得到以下方程：

2 <= x1 <= 6

x2 = 8 - x1

当我告诉 WolframAlpha 它应该[对整数求解时](http://www.wolframalpha.com/input/?i=solve+x_1+%2B+x_2+%3D+8%2C+x_1+%3E%3D+1%2C+x_2+%3E%3D+2%2C+x_1+%3C%3D+6%2C+x_2+%3C%3D+6%2C+2+%3C%3D+x_2%2C+2+%3C%3D+x_1++over+the+integers)，它只输出所有可能的值。

我的问题是我是否可以以编程方式为任何给定的 l,y1,y2,z1,z2 推导出 x1 和 x2 的方程/范围。这个问题与约束规划有关，我发现了一篇关于这个问题的旧论文： Harvey 等人的[“Compiling Constraint Solveving using Projection”](http://www.cs.washington.edu/research/constraints/solvers/cp97.html)。

这种方法是否用于任何现代约束求解库？

我问这个的原因是我需要用不同的参数来解决像上面这样的系统几千次，如果整个系统被一遍又一遍地读取/优化/解决，这需要很长时间。因此，如果我可以编译一次我的参数化系统，然后只使用编译后的版本，我预计会有巨大的速度提升。

# c# - 在图像文件夹中的水晶报表页面中插入动态图像

> ID：12155317
> 
> 赞同：5
> 
> 时间：2012-08-28T08:20:05.170
> 
> 标签：c#, .net, crystal-reports

有没有办法从图像文件夹在 Crystal Reports 页面中动态插入图像？

确切的要求是在每个水晶报告页面的顶部显示公司的标志，当它们发生变化时，即当你有一个新的标志时，你只需要改变images文件夹中的图像（.jpg）和所有对应的图像报告应该改变。

如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:17:56.073

> 我正在发布我得到的答案，希望这对其他人有帮助。

```
private void getImage()
    {
        FileStream fs;
        fs = new FileStream(AppDomain.CurrentDomain.BaseDirectory + "img\\cube.png", FileMode.Open);
        BinaryReader BinRed = new BinaryReader(fs);
        try
        {
            CreateTable();
            DataRow dr = this.DsImages.Tables["images"].NewRow();
            dr["image"] = BinRed.ReadBytes((int)BinRed.BaseStream.Length);
            this.DsImages.Tables["images"].Rows.Add(dr);

            //FilStr.Close();
            BinRed.Close();

            DynamicImageExample DyImg = new DynamicImageExample();
            DyImg.SetDataSource(this.DsImages);
            this.crystalReportViewer1.ReportSource = DyImg;
        }
        catch (Exception er)
        {
            MessageBox.Show(er.Message, "Error");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:31:24.233

在 CR 中，您可以通过以下方式执行此操作： 在您想要的位置和大小的报表中插入占位符图像。右键单击它并选择“格式化图形”-> 转到“图片”选项卡-> 在“图形位置”中输入一个公式，该公式将返回所需的文件路径。

# tdd - TDD & BDD? Which, Why and How?

> ID：12155319
> 
> 赞同：2
> 
> 时间：2012-08-28T08:20:11.200
> 
> 标签：tdd, bdd

TDD & BDD? Which, Why and How?

Can anyone give a good explanation to justify "Which", "Why" and "How" on both?

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:32:14.190

TDD is used more for unit testing e.g. testing a method on a class. BDD is used for testing the behaviour of a system e.g. Creating a user, or Sending out new product emails.

So for TDD you might see something like.

```
public void Test()
{
    // Arrange.
    var sut = new ClassToTest();

    // Act.
    int result = sut.SoSomething();

    // Assert.
    Assert.Equal(result, 23);
} 
```

With BDD (depending on the tools you're using) you tend to see something like this:

```
Feature: Add a user
    As a system admin
    In order to give a user access to the site
    I want to create a user account

Scenario: Creating a basic user
    Given I have the user's name
    When I create a new user account
    Then that user can log onto the site 
```

As you can, BDD is testing the behaviour of a system rather then single unit. Here is a very good intro to BDD by Dan North - [http://dannorth.net/introducing-bdd/](http://dannorth.net/introducing-bdd/)

I would recommend using TDD when you are building your classes/code and want to testing little bits of it at a time. Use BDD when you want to test more then one of those classes in a test i.e. integration test.

EDIT:

With the how side of things, for BDD I would recommend using [SpecFlow](http://www.specflow.org/specflownew/). This is a popular BDD tool which adds a lot of functionality to Visual Studio for creating feature files (The Feature: stuff I mentioned above) and running and debugging the tests.

Under the hood SpecFlow can use NUnit or MSTest to generate the tests. Other BDD tools include:

*   [MSpec](https://github.com/machine/machine.specifications)
*   [NSpec](http://nspec.org/)
*   [SpecsFor](http://specsfor.com/)
*   [StoryQ](http://storyq.codeplex.com/)

and many others I've forgotten about right now :) I would suggest you try them out and see which one you prefer.

For TDD you have many options including:

*   NUNit
*   xUnit
*   MSTest

A lot of the above tools can installed via NuGet in Visual Studio, which is handy.

# objective-c - IOS：从块调用方法

> ID：12155321
> 
> 赞同：1
> 
> 时间：2012-08-28T08:20:18.230
> 
> 标签：objective-c, ios5, xcode4.3

实际上，我一直在研究如何从块中调用方法。我正在尝试从 iphone 照片应用程序中获取所有图像。这是代码....

```
void (^assetGroupEnumerator)(ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop)   
     if(group != nil) {
        [self.groups addObject:group];
        [group enumerateAssetsUsingBlock:selectionBlock];
    }
};

[library enumerateGroupsWithTypes:groupTypes
                  usingBlock:assetGroupEnumerator
                failureBlock:^(NSError *error) {NSLog(@"A problem occurred");}]; 
```

在 selectionBlock ...我只想在用户单击任何图像时添加一个动作。所以我尝试了这段代码..

```
[imgView addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

buttonPressed 也在同一个 .m 文件中定义。

```
- (void) buttonPressed: (id) sender {
UIAlertView* av = [[UIAlertView alloc] initWithTitle:@"Howdy!"
                                             message:@"You tapped me."
                                            delegate:nil
                                   cancelButtonTitle:@"Cool"
                                   otherButtonTitles:nil];
[av show];
} 
```

但在 selectionBlock 我得到“没有可见的@interface for 'UIImageView' 声明选择器'addTarget:action:forControlEvents'”

我是 iOS 编程的新手。所以任何帮助都会非常非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:24:53.310

`-addTarget:action:forControlEvents:` is a method on `UIControl`. `UIButton`, `UISwitch`, and so on are all subclasses of `UIControl`. `UIImageView`, however, is not, so it does not respond to that selector. Since your `imgView` variable is a `UIImageView`, the compiler won't let you call this method on it. This has nothing to do with calling it in from a block, btw - but only with what methods objects declare they respond to.

Hope this helps!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:27:39.957

Change:

```
[imgView addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchUpInside]; 
```

to:

```
[imgView addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside]; 
```

(with the colon ":" character)

Because buttonPressed has an argument.

# php - 如何使用 php 在 MySQL 数据库中获取枚举可能值？

> ID：12155322
> 
> 赞同：10
> 
> 时间：2012-08-28T08:20:21.743
> 
> 标签：php, mysql, sql, enums

> **可能重复：**
> [Mysql 选择枚举值](https://stackoverflow.com/questions/4644220/mysql-select-enum-values)

我在以下位置设置了一个列`Mysql`：

类型：`ENUM`

`Length/Values: '01','02','03','04','05','06','07','08','09','10','11','12'`

我正在尝试从数据库中检索这些值：

我发现另一个帖子有同样的问题，但我的代码不起作用

```
$type = $mysqli->query( "SHOW COLUMNS FROM {$tableName} WHERE Field = 'type'" )->fetch_object()->Type;
        preg_match('/^enum\((.*)\)$/', $type, $matches);
        foreach( explode(',', $matches[1]) as $value )
        {
             $enum[] = trim( $value, "'" );
        }
        return $enum; 
```

我得到类型`Text`Insted`ENUM`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T08:28:21.503

您应该解析来自`information_schema`. `columns`桌子 -

```
SELECT
  column_type
FROM
  information_schema.columns
WHERE
  table_schema = 'your_schema' AND table_name = 'your_table' AND column_name = 'your_column' 
```

...另一个查询-

```
SELECT
  TRIM(TRAILING ')' FROM TRIM(LEADING '(' FROM TRIM(LEADING 'enum' FROM column_type))) column_type
FROM
  information_schema.columns
WHERE
  table_schema = 'your_schema' AND table_name = 'your_table' AND column_name = 'your_column'; 
```

会有这样的东西 - `enum('01','02','03')`。在 php-application.xml 中解析这个字符串。

# box-api - Box API 2.0 上传具有冲突名称的文件返回 200

> ID：12155323
> 
> 赞同：1
> 
> 时间：2012-08-28T08:20:29.393
> 
> 标签：box-api

上传与现有文件名称冲突的文件后，服​​务器仍以 HTTP 状态代码**201 Created**响应。我必须解析响应正文才能确切知道它是否真的被创建。听起来我应该能够仅通过状态码知道操作的结果。所以我想知道这是否是预期的行为。

以下是我得到的回复

```
{
   "total_count":1,
   "entries":[
      {
     "type":"error",
     "status":409,
     "code":"item_name_in_use",
     "context_info":{
        "conflicts":[
           {
              "type":"file",
              "id":"2990420477",
              "sequence_id":"0",
              "etag":"1f64ca909178de30bc682a4ca2d14444719cf9a2",
              "name":"Extensions.pdf"
           }
        ]
     },
     "help_url":"http:\/\/developers.box.com\/docs\/#errors",
     "message":"Item with the same name already exists",
     "request_id":"1389504407503c7c1e8183c"
      }
   ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:13:27.377

我们正在将其从 200 更改为 202。本周晚些时候（或可能今晚）我们将推出一项更改，将上传状态设为 202，以表明上传请求已被接受。我将在我们的博客上发布更多内容以解释更多细节。

基本逻辑是上传可以批量发送，API 调用必须返回一组上传状态（stati？）。如果你只上传一个文件，你会得到一个 1 的数组，你必须深入数组看看你是否成功。如果您上传一组文件，那么您将深入研究数组以找出每个文件的状态。

你可能会问：当只有一个文件时，为什么不折叠状态呢？我们的想法是，您必须实现 2 种不同的代码路径来处理单次上传和批量上传，并且只编写一次代码来处理上传会更容易。

希望有帮助。在我们将错误代码从 200 翻转到 202 后，如果您看到意外行为，请告诉我们。

# associations - 工厂女孩协会与儿童班，显示 nomethoderror：未定义的方法

> ID：12155324
> 
> 赞同：3
> 
> 时间：2012-08-28T08:20:34.860
> 
> 标签：associations, factory-bot, nomethoderror

```
file 1 . user.rb

factory :user do
  name  "test"
end

factory :admin_user, :parent => user do
  role  "admin"
end

file 2\. manager.rb

factory :manager do
  association :admin_user
  description "manager"
end

and while run FactoryGirl.create(:manager), it will show NoMethodError:
       undefined method `admin_user=' for #<Manager .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:34:06.600

浏览 factorygirl [wiki](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)，在我看来您需要将 manager.rb 代码更改为：

```
factory :manager do
  association :user, :factory => :admin_user
  description "manager"
end 
```

# ios - 在iOS4.0上播放yuv420失败，但在iOS5.0上成功

> ID：12155329
> 
> 赞同：1
> 
> 时间：2012-08-28T08:20:44.953
> 
> 标签：ios, opengl-es, yuv, glteximage2d

在 iOS5.0 上使用以下代码从摄像头拍摄的视频可以正常播放，

```
 glActiveTexture(GL_TEXTURE0);
    CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                       videoTextureCache,
                                                       pixelBuffer,
                                                       NULL,
                                                       GL_TEXTURE_2D,
                                                       GL_RED_EXT,
                                                       videoWidth,
                                                       videoHeight,
                                                       GL_RED_EXT,
                                                       GL_UNSIGNED_BYTE,
                                                       0,
                                                       &lumaTexture);
    if (!lumaTexture || err) {
        NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
        return;
    }

    glBindTexture(CVOpenGLESTextureGetTarget(lumaTexture), CVOpenGLESTextureGetName(lumaTexture));
    // Set texture parameters
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);   

    glActiveTexture(GL_TEXTURE1);
    err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                                videoTextureCache,
                                                                pixelBuffer,
                                                                NULL,
                                                                GL_TEXTURE_2D,
                                                                GL_RG_EXT,
                                                                videoWidth / 2,
                                                                videoHeight / 2,
                                                                GL_RG_EXT,
                                                                GL_UNSIGNED_BYTE,
                                                                1,
                                                                &chromaTexture);
    if (!chromaTexture || err) {
        NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
        return;
    }

    glBindTexture(CVOpenGLESTextureGetTarget(chromaTexture), CVOpenGLESTextureGetName(chromaTexture));
    // Set texture parameters
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

在 iOS4.0 上，以下代码运行良好，

```
 CVPixelBufferLockBaseAddress(pixelBuffer, 0);
    void * baseAddress = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer,0);

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, spriteTexture[0]);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RED_EXT, videoWidth, videoHeight, 0, GL_RED_EXT, GL_UNSIGNED_BYTE, baseAddress);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    void *baseAddress1 = CVPixelBufferGetBaseAddressOfPlane(pixelBuffer,1);

    glActiveTexture(GL_TEXTURE1);
    glBindTexture(GL_TEXTURE_2D, spriteTexture[1]);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RG_EXT, videoWidth / 2, videoHeight / 2, 0, GL_RG_EXT, GL_UNSIGNED_BYTE,baseAddress1);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);   

    CVPixelBufferUnlockBaseAddress(pixelBuffer, 0); 
```

但是当播放从本地mp4文件读取的视频时，第二种方法失败了，第一种方法很好，很奇怪，我是自欺欺人。那么如何解决呢？为什么会这样？

# windows - 参数的 CMD 变量替换

> ID：12155330
> 
> 赞同：5
> 
> 时间：2012-08-28T08:21:04.790
> 
> 标签：windows, shell, cmd

我正在尝试获得与以下`bash`功能等效的 CMD：

```
$ FOO=foo.bar
$ BAR=bar
$ BAZ=baz
$ echo ${FOO/$BAR/$BAZ}
foo.baz 
```

现在，当模式和替换都不变时，CMD 有一些类似的命令替换：

```
C:\>set FOO=foo.bar
C:\>set BAR=bar
C:\>set BAZ=baz
C:\>echo %FOO:bar=baz%
foo.baz 
```

但是，我似乎无法在其中引用变量-

```
C:\>echo %FOO:%BAR%=%BAZ%%
%foo:bar=baz% 
```

我该怎么做？指出`FOR` 在批处理文件的循环内也有效的东西的奖励积分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:29:58.810

以下（批处理文件）应该可以工作并打印“foo.baz”：

```
 setlocal enabledelayedexpansion
  set FOO=foo.bar
  set BAR=bar
  set BAZ=baz

  echo !FOO:%BAR%:%BAZ%! 
```

（关于你提到的 FOR 循环，你需要提供更多关于你的意思的信息。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T11:46:07.427

从命令行：
`call echo %FOO:%bar%=%baz%%`

在批处理和 for 循环中：

```
@echo off
  set FOO=foo.bar
  set BAR=bar
  set BAZ=baz
for %%N in (baz ban bak) do (
 set BAZ=%%N_AndSomething
 call :expand 
)
goto :eof

:expand
call echo %%FOO:%BAR%=%BAZ%%%
goto :eof 
```

您可以通过使用延迟扩展而不是第二次调用来优化它（调用很昂贵），但这已经展示了，所以我把它作为语法示例。如果您不需要在`for`块内设置用于替换的变量，您可以进一步简化它。

# sql - 如何将浮点数据类型转换为字符串

> ID：12155332
> 
> 赞同：1
> 
> 时间：2012-08-28T08:21:06.067
> 
> 标签：sql, sql-server

使用 sql server 2000

表格1

```
id value (float)

001 10.00
002 
003 
004 08.50
... 
```

我想检查值列，如果为空则显示'NA'

尝试查询

```
Select id,
CASE WHEN value  IS NULL then '-' else value end  AS value
from table1 
```

'

```
Select id,
isnull(value, '-') AS value
from table1 
```

两个查询都将错误显示为“将数据类型 varchar 转换为浮点数时出错”。

如何解决这个问题。

需要查询帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:22:20.933

```
Select id, 
isnull(convert(varchar(20),value), '-') AS value 
from table1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:22:52.480

尝试

```
SELECT id, CAST(COALESCE(value, 'NA') as VARCHAR(25)) as [Value]
FROM tableName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:29:11.917

使用以下查询：

```
SELECT id, ISNULL( CAST(value as VARCHAR(25)), 'NA')) as [Value]
FROM tableName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T10:00:15.500

```
select id,cast(isnull(value,'') as varchar(10)) from table 
```

# mysql - 动态sql的过程

> ID：12155333
> 
> 赞同：1
> 
> 时间：2012-08-28T08:21:13.807
> 
> 标签：mysql, sql, dynamic, procedure

我有一个问题，因为我想在 mysql 示例中使用程序：

```
DELIMITER $$

CREATE PROCEDURE `scoreS`()
BEGIN
         PREPARE stmt FROM @scoreS;
           EXECUTE stmt;
           DEALLOCATE PREPARE stmt;
END 
```

以及具有此过程的示例代码：

```
 SET @results2 = 0;
    SET @scoreS = CONCAT("SELECT CommentsId INTO @results2 FROM `",tableName,"`  WHERE CRC32 = ",Crc32," ORDER BY CommentsId DESC LIMIT 1");
    CALL scoreS(); 
```

我想改用这个程序：

```
SET @results2 = 0;
           SET @scoreS = CONCAT("SELECT CommentsId INTO @results2 FROM `",tableName,"` WHERE CRC32 = ",Crc32," ORDER BY CommentsId DESC LIMIT 1");
           PREPARE stmt FROM @scoreS;
           EXECUTE stmt;
           DEALLOCATE PREPARE stmt; 
```

现在我不知道我什么时候使用这个程序动作会更快添加记录？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:07:47.297

我不是 MySQL 或其他程序 SQL 代码方面的专家，但我希望这两种方法之间的性能差别很小（假设 scoreS 过程只创建一次）。

我想说的是，PREPARE 语句中的很多价值在于能够重新使用具有不同参数的准备好的查询，并且不会产生重新处理 SQL 语句的成本。既然你没有这样做（你没有使用参数化并且只是立即破坏准备好的查询），那么使用 PREPARE 有什么意义？（当然，我假设您可以通过其他方式执行查询，而不是在过程中使用 PREPARE 和 EXECUTE ，这可能只是表明我的无知！）

# java - 在路径上移动对象（圆形）

> ID：12155335
> 
> 赞同：2
> 
> 时间：2012-08-28T08:21:18.203
> 
> 标签：java, graphics2d

我需要移动一个对象，在我的例子中是给定路径上的一个字符串。实际上路径可以是半圈。如附图所示，字符串应该出现在另一个对象的后面，沿着路径移动并消失在第二个对象（两个图像）后面。我不知道如何开始......希望有人可以帮助我。提前致谢。

![在此处输入图像描述](../Images/f260b49b0d036f65dc8cad7610ad139c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:26:44.020

创建一个新`Thread`的来处理文本移动的逻辑。在其`run()`方法中，您添加一个循环，该循环将在每次迭代时更改文本位置。此外，在更改文本位置后，您将不得不调用`repaint()`定义您已覆盖的`paint()`或的组件。`paintComponent()`

每次迭代后，线程应该休眠一小段时间。休眠 50 毫秒意味着您将大约每秒获得 20 帧。

现在是数学。假设您知道一个点是圆的中心（位于两幅图像之间的中点下方）和文本的起点。有了这个，您可以将圆半径计算为两点之间的距离：

```
d = Math.sqrt((c.x - p.x) * (c.x - p.x) + (c.y - p.y) * (c.y - p.y)) 
```

为了让文字在圆圈上移动，上述距离需要保持不变。因此，您可以做的是将 x 增加一个常数值并计算文本的新 y。

```
d = Math.sqrt((c.x - p.x) * (c.x - p.x) + (c.y - p.y) * (c.y - p.y)) 
```

在上面的公式中，您知道值`d, c.x, c.y, p.x`（您刚刚计算并增加了它）。您只需要 py 的值，即：

```
p.y = c.y - Math.sqrt(d * d - ((c.x - p.x) * (c.x - p.x)) 
```

# java - 从 web 服务返回图像

> ID：12155338
> 
> 赞同：0
> 
> 时间：2012-08-28T08:21:26.177
> 
> 标签：java, image, web-services

我想向 Web 服务发出请求，该服务将根据请求参数返回图像？对此最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:22:28.847

只需制作一个 Servlet 服务图像，将参数传递给它基于参数的处理图像并作为响应返回，这将作为一个 REST Web 服务，您也可以使用一些标准的 Web 服务实现来实现这一点

* * *

**还要检查**

*   [BalusC的image servlet的实现](http://balusc.blogspot.in/2007/04/imageservlet.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:24:24.617

By web service you mean something in the web, or a Web Service using SOAP over HTTP?

If it's the first thing I should write a Servlet that depending on request parameters write the bytes of the image to the output stream (setting appropiate headers like Content-Type).

```
doGet(...) {
   request.setContentHeader("Content-Type", "image/jpeg");
   // write image bytes to request.getOutputStream()
   ...
} 
```

If it's the second thing simply return a byte[] with the content. Or... if you need also the content-type, return a structure with `content-type: string` and `data: byte[]`.

# c# - 从源代码控制将 Web 角色部署到 azure

> ID：12155340
> 
> 赞同：4
> 
> 时间：2012-08-28T08:21:33.900
> 
> 标签：c#, git, azure, tfs, github

有没有办法从源代码控制部署到 azure webrole。

我不太介意我使用哪个 sc 系统，只希望部署发生在“推送”上，就像在带有 git 的 azure 网站中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:32:36.327

Microsoft提供免费的[托管 TFS 服务](http://aka.ms/tfspreview)，只要在 TFS 团队项目中签入，您就可以将项目从 TFS 自动构建和部署到 Azure。设置非常容易，大约需要 10-15 分钟。它目前处于预览阶段，因此是免费的。我有一篇[博文](http://aka.ms/tfsazwsvsci)和一个[伴随视频](http://aka.ms/tfsazwsvscivid)介绍了这一点。

博客文章和视频适用于“Azure 网站”，但“Azure 云服务”的过程几乎相同（您提到了 Web 角色）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T20:50:53.543

AS Windows Azure Web 角色部署项目严格绑定到特定打包项目您使用的源代码控制必须能够提供机制来收集您的代码，并以可接受的方式打包+部署它。打包确实需要依赖于您选择的特定语言的 Windows Azure SDK 工具。

根据您选择的标签 C#，您似乎正在使用 Visual Studio 和 TFS，您肯定可以创建 MSBUILD 脚本来自动化您的构建和部署过程，该过程可以在您的开发机器之外运行，但在 TFS 的限制范围内。[此处](http://blogs.msdn.com/b/tomholl/archive/2011/02/23/using-msbuild-to-deploy-to-multiple-windows-azure-environments.aspx)描述了此过程。

此外，如果您可以使用 TFS 构建 Server 2010，您可以创建自动构建/部署脚本，如此处所述[，这](http://www.koltovich.com/blog/DeployingAzureProjectFromTFS2010BuildServer.aspx)也将起作用。

底线是您可以使用 SDK 打包您的应用程序并使用 REST API 部署包，因此如果您不使用任何非 TFS 源服务器，则可以非常轻松地构建自定义解决方案以直接从任何非 TFS 源服务器构建和部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:16:52.043

不支持云服务（Web/Worker 角色）上的“Git”持续开发（推送），仅网站（当前），此博客文章提供了一些关于如何为 Web 角色自动化事物的指导（*注日期 SDK） ：“使用 Windows Azure SDK 1.6 自动构建和部署” [http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk- 1-6.aspx](http://blogs.msdn.com/b/tomholl/archive/2011/12/06/automated-build-and-deployment-with-windows-azure-sdk-1-6.aspx)

# php - 不使用 php-android 在 mysql 中插入记录？

> ID：12155345
> 
> 赞同：-3
> 
> 时间：2012-08-28T08:21:49.087
> 
> 标签：php, android, mysql

我可以使用 php 成功地从 MySql 获取数据。但是我在使用 php-android 在 mysql 表中插入记录时遇到了一些问题。

这是我的 .php 文件：

```
 <?php
     mysql_connect("localhost","root","");
     mysql_select_db("database_name");
     $sql=mysql_query("insert into table_name values('".$_REQUEST['s_name']."')");
     $r=mysql_query($sql);
      if(!$r)echo "Error in query: ".mysql_error();mysql_close();
 ?> 
```

这是我的 android 活动的 onCreate 方法的内容。

```
 ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("s_name","StackOver"));

   try{ 
       HttpClient httpclient = new DefaultHttpClient();
       HttpPost httppost = new HttpPost("http://10.124.238.51PH/get_cities_names.php");
       httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
       HttpResponse response = httpclient.execute(httppost);
       HttpEntity entity = response.getEntity();
       is = entity.getContent();

     }catch(Exception e){
          Log.v("log_tag", "Error in http connection "+e);
     } 
```

在这里，我想将 BasicNameValuePair("s_name","StackOver")) s_name 传递给 .php 但它不可能。请给我一些想法或教程链接。我在ner中搜索了很多，但我找不到合适的教程。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:21:12.680

这是保存数据和传递数据的[教程](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。观察它，从中学习，然后创造。

# networking - 说明读取 TCP/IP 时出现问题

> ID：12155347
> 
> 赞同：1
> 
> 时间：2012-08-28T08:21:55.000
> 
> 标签：networking, network-programming, udp

原谅我愚蠢的问题。
我不太明白这些是什么意思。如果有人能解释清楚。非常感谢。

> 为什么在返回 ICMP 消息时，TFTP 客户端不断重传其请求？网络编程的一个元素正在发生，其中 BSD 系统不会通知使用 UDP 的用户进程为该套接字接收到的 ICMP 消息，除非该进程已在该套接字上发出连接。标准 BSD TFTP 客户端不发出连接，因此它永远不会收到 ICMP 错误通知。
> 
> *TCP/IP 图解第 1 卷宪章 6.5*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:13:48.063

ICMP 消息不会返回给应用程序，除非它发出了一个 connect()，但它没有，所以它不知道它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-28T09:27:33.543

通常`ICMP`协议用于故障排除目的，实际上在大多数操作系统上，当您连接到服务器上的关闭端口时，服务器会回复`ICMP`消息类型端口不可达。

# ios - 从 iOS 应用程序/可可安装 .IPA 文件

> ID：12155352
> 
> 赞同：3
> 
> 时间：2012-08-28T08:22:01.980
> 
> 标签：ios, cocoa, ssh, jailbreak, ipa

我正在为 ios 创建一个类似于 Installous 的应用程序（这个项目是公司用户的私有版本）我从 Installous 文件夹中找到了 InstallBash.sh，并从 SSH 尝试了它。它安装 .ipa 文件，但我有 2 个问题：

1.  该图标未显示在弹簧板上，并且 ReSpring 不是我的解决方案（因为它会中断应用程序操作）。我怎样才能让它工作？

2.  如何从我的 iOS 应用程序执行 shell 脚本？

PS：是的，这个应用程序正在创建用于越狱的 iDevices，并且应用程序本身将从 Cydia 安装。

谁可以帮我这个事？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:25:31.060

要在您的应用程序中运行 shell 脚本，请使用 C 标准库函数`system()`：

```
system("/Applications/MyApp.app/installApp.sh someapp.ipa"); 
```

要显示应用程序图标，您可以将 Saurik 的 UIKit 工具包作为应用程序的依赖项并运行 - 作为用户移动设备 - uicache 命令：

```
system("uicache"); 
```

我希望这有帮助。

# android - android中的图例和字段集

> ID：12155353
> 
> 赞同：10
> 
> 时间：2012-08-28T08:22:13.477
> 
> 标签：android, legend, fieldset

我想知道在android中是否可以做这样的表格：

![在此处输入图像描述](../Images/b4c4c7f34395375efcca4c13c82e8893.png)

此刻，我做了一个形状来产生边框（我用这个形状作为我的线性布局的背景，但我不知道如何处理文本）。

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-28T13:18:15.487

我已经设法使用以下技术获得了一个带有标题的框架。

1.  用于`FrameLayout`整体布局。

2.  在里面为你的主要内容添加另一个布局 - 这可以是任何东西。对于此布局的背景，请使用自定义 XML drawable with`stroke`来绘制框架。确保在此布局中添加边距，尤其是`marginTop`，因为您需要一些空间来显示框架的标题。还要添加一些填充以使其看起来更好。

3.  使用`TextView`不透明背景和一些填充作为标题。将`marginLeft`其设置为合理的值以从左侧偏移标题。

这是我的XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent" android:layout_height="fill_parent"
    android:background="@android:color/white">

    <!--  This is the main content -->
    <RelativeLayout
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:layout_margin="15dp" android:background="@drawable/frame"
        android:orientation="vertical" android:padding="20dp">

        <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
            android:text="Main Content" android:layout_centerInParent="true" />

    </RelativeLayout>

    <!--  This is the title label -->
    <TextView android:layout_width="wrap_content" android:layout_height="wrap_content"
        android:background="@android:color/white" android:padding="5dp"
        android:text="Testing"
        android:layout_marginLeft="30dp" android:textColor="@android:color/black" />

</RelativeLayout> 
```

执行时，我在应用程序上得到了这个：

![在此处输入图像描述](../Images/8da9d78c568f458b0449e55b8fe002c0.png)

随意调整边距/填充以按照您需要的方式对齐标题。

# android - 我应该为 Android 中的不同设备创建多少大小的背景图像？

> ID：12155360
> 
> 赞同：0
> 
> 时间：2012-08-28T08:22:31.917
> 
> 标签：android

在这里，我有一个 320X480 的图像（照片），想把它作为我的背景图像放在应用程序中。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="@drawable/background">    

</RelativeLayout> 
```

但是，当我把它放在不同的设备上时，图像会变得很奇怪（我不知道它是否奇怪，因为它重新调整了图像的大小）。
那么，如何解决这个问题呢？？
因为有一张照片，照片里只有一个人。如果这个人在设备 A 中看起来很瘦，但在设备 B 中看起来很胖，那会很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:34:46.773

有很多方法可以为全屏创建背景。我推荐的3个解决方案如下：

一个图像作为背景解决方案是最常用于此工作的解决方案，您必须为每个主要屏幕尺寸制作一个 = ldpi、mdpi、hdpi 和 xhdpi 并制作它：

1.  以与居中图像融合的纯色背景颜色在布局中居中，或
2.  使它成为一个 9-patch 图像，以适当的方式拉伸。
3.  第三种解决方案是创建一个平铺布局，您可以在其中使用一个图像，然后以平铺方式将其复制到整个屏幕上。
4.  在某些情况下可能会起作用的是拥有 1 张图像，然后根据屏幕尺寸将其剪掉。这可能有效，但如果图像太大，它会在小型/旧手机上出现内存不足异常，因此再次为 ldpi、mdpi、hdpi 和 xhdpi 提供 1 个图像。

(1) 的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/black">
    <FrameLayout
        android:background="@drawable/splash"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        >
    </FrameLayout>
</RelativeLayout> 
```

初始图像可以有任何大小，重要的是图像的外部部分与背景颜色混合，这可以通过让图像的背景颜色慢慢混合为与背景相同的颜色来完成。

(4) 的示例：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@android:color/black">
    <ImageView
        android:background="@drawable/splash"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:scaleType="centerCrop"
        >
    </ImageView>
</RelativeLayout> 
```

# python - 我应该在整个代码中继续使用 self.__local_object 吗？

> ID：12155362
> 
> 赞同：0
> 
> 时间：2012-08-28T08:22:36.223
> 
> 标签：python, oop, code-readability

我正在扩展一位前同事的代码（Python3），并亲自发现那些反复`self.__local_object.x=some_result`烦人和阻碍可读性的代码。即代替

```
 self.__local_node.sign("computing partition for joining node %f<?<%f"%(
        self.__local_node.partition_id,next_neighbour.partition_id))
    partition_id = 0
    if(next_neighbour != self.__local_node):
        partition_id = PartitionID.gen_btw(self.__local_node.partition_id, next_neighbour.partition_id) 
```

我宁愿用

```
 ln=self.__local_node
 ln.sign("computing partition for joining node %f<?<%f"%(
     ln.partition_id,next_neighbour.partition_id))
 partition_id = 0
 if(next_neighbour != ln):
     partition_id = PartitionID.gen_btw(ln.partition_id, next_neighbour.partition_id) 
```

但是，我还没有熟悉 Python 开发，如果我为引用的对象引入这样的（希望如此）本地别名，我可能会错过一个黄金准则，这将使进一步的维护成为一场噩梦。

PS：不，`self.__local_node`' 的值在该代码的任何地方都没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:47:45.417

由于`local_node`和`next_neighbour`是对称的，将代码提取到单独的方法中可能是个好主意：

```
def compute_partition(self, a, b):
    a.sign("computing partition for joining node %f<?<%f" % (
        a.partition_id, b.partition_id))
    partition_id = 0
    if a != b:
        partition_id = PartitionID.gen_btw(a.partition_id, b.partition_id)
    etc...

....

self.compute_partition(self.local_node, next_neighbour) 
```

在我看来更具可读性。此外，使用双下划线必须有很好的理由（或借口）。检查是否有可能在您的情况下摆脱它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:28:55.920

如果你真的不改变值，只分配或访问它的属性，这应该是完全可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:40:43.867

**如果__local_node**对象的所有成员都使用属于此处引用为**self**的类，我不会感到惊讶，这是复制和粘贴横冲直撞的产物。

# sql-server - 如何执行非聚集索引查找而不是聚集索引扫描

> ID：12155363
> 
> 赞同：0
> 
> 时间：2012-08-28T08:22:40.733
> 
> 标签：sql-server, database, tsql, indexing

我测试了非聚集索引的好处。

我使用 db AdventureWorks 执行查询时：

```
SELECT [address].City, [address].[AddressLine1] 
FROM [AdventureWorks].[Person].[Address] as [address]
WHERE [address].City = 'Seattle' 
```

我在执行计划选项卡中看到

```
/*
Missing Index Details from SQLQuery3.sql - 
The Query Processor estimates that implementing the following index could improve the query cost by 97.9636%.
*/

/*
USE [AdventureWorks]
GO
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [Person].[Address] ([City])

GO
*/ 
```

我在执行普通选项卡图标中看到“聚集索引扫描”，我知道这很糟糕，因为索引搜索更好

但是当我执行查询时

```
USE [AdventureWorks]
GO
CREATE NONCLUSTERED INDEX CityIdx
ON [Person].[Address] ([City])

GO 
```

**我仍然看到执行中的普通选项卡“聚集索引扫描”。为什么不“聚集索引搜索”？它应该是“聚集索引搜索”吗？在这种情况下，它应该是“聚集索引搜索”。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:34:02.200

您正在达到[索引的临界点](http://www.sqlskills.com/BLOGS/KIMBERLY/category/The-Tipping-Point.aspx)：在聚集索引中，有太多的条目`City = 'Seattle'`需要麻烦地寻找每个条目。`AddressLine1`对于*此*特定查询，一种方法是包含投影列：

```
CREATE NONCLUSTERED INDEX CityIdx
ON [Person].[Address] ([City])
INCLUDE ([AddressLine1]); 
```

但这隐藏了*真正的*问题，即您*为什么*对选择这种非选择性谓词的*所有行感兴趣？*应用程序不应提出此类请求。

# sql - 对数据库条目应用风险评估（供应商）

> ID：12155364
> 
> 赞同：0
> 
> 时间：2012-08-28T08:22:44.210
> 
> 标签：sql, sql-server

我希望根据我的供应商表中的几个标准对供应商进行风险评估。

对于每个供应商，都有所供应产品的总价值，其中，有多少产品质量有保证的总价值，并基于前两个，一个百分比值。

因此，一个例子是；

```
FName / Sname / Total / TotalQA / QA%

John  / Smith  /   60   /   30  /  50 
```

* * *

我想对这些记录应用一个标准，所以例如百分比是；

* * *

<40% - 状态 = 红色

41% - 59% - 状态 = 黄色

->60% - 状态 = 绿色

* * *

我考虑过制作一个新表或者硬编码新变量，什么方法最适合完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:32:12.240

您可以使用该`CASE`语句来执行此操作，例如：

```
SELECT FName, Sname, 
       CASE WHEN QA < 40             THEN 'RED'
            WHEN QA > 40 AND QA < 59 THEN 'YELLOW'
            WHEN QA > 60             THEN 'GREEN'
       END AS 'Status'
FROM Suppliers 
```

# iphone - 通过 VPN 连接到服务器

> ID：12155371
> 
> 赞同：1
> 
> 时间：2012-08-28T08:23:10.700
> 
> 标签：iphone, objective-c, vpn, cisco-ios

我必须开发一个`iPhone`通过`VPN`. 而且我相信没有办法以`VPN connection / check for VPN connection`编程方式进行活动。我知道这是一个很老的问题。而我需要知道的是，

*   有什么方法可以通过`cisco any connect api`或连接到 VPN 服务器`Juniper Clients API`？！

*   或者我们可以以编程方式调用 VPN 设置页面？！

# html - 如何在悬停时更改 SVG 图像的颜色？

> ID：12155374
> 
> 赞同：5
> 
> 时间：2012-08-27T01:40:24.757
> 
> 标签：html, css, javascript, svg

> **可能重复：**
> [使用 javascript 更改 SVG 图像颜色](https://stackoverflow.com/questions/9872947/changing-svg-image-color-with-javascript)

当我将鼠标悬停在 SVG 图像上时，我想更改它的填充。

现在我有一个从 Illustrator 导出到 SVG 的黑色问号。我可以用 img 标签放在我的页面上，它显示得很好，但是我不知道如何更改代码中的颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T11:43:52.017

如果你需要在 svg 中做悬停效果，你不应该使用 <img> 标签。而是使用 <iframe>、<object> 或 <embed> 标签引用 svg。如果要保存 http GET 请求，可以将 svg 标记内嵌在 html 文档中。

这是一个示例，显示了[svg](http://xn--dahlstrm-t4a.net/svg/interactivity/hover-change-fill.svg)中的简单填充悬停效果，以及[另一个](http://xn--dahlstrm-t4a.net/svg/interactivity/transparent-images-pointer-events.svg)（稍微复杂一点，使用过滤器在悬停时创建轮廓）。无论如何，它基本上是关于应用 :hover CSS 规则来设置填充颜色。

可以在[此处查看](http://xn--dahlstrm-t4a.net/svg/interactivity/hover-change-fill-multi-reference.html)所有上述使用 svg 的方式的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:04:39.137

SVG 文件可以直接从 javascript 修改，即“图像”的属性可以从 DOM 中访问。

从堆栈溢出看这篇文章：[用javascript修改svg图像的描边和填充](https://stackoverflow.com/questions/10139460/modify-stroke-and-fill-of-svg-image-with-javascript)

重要的是要记住，要这样做，您不能将 svg 文件包含在通用 HTML < *img/>*标记中，而是使用 < *svg>* ... *<* /svg>，如帖子中所示。

编辑：[w3schools 上的 svg](https://www.w3schools.com/graphics/svg_examples.asp)

我添加了指向 w3schools 的链接，以便您可以查看 svg 对象的更多属性

玩得开心

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-27T04:42:49.937

如果您可以发布您的代码，也许我们可以为您解决问题。

试试这个：[http ://tutorials.jenkov.com/svg/svg-and-css.html](http://tutorials.jenkov.com/svg/svg-and-css.html)

或者（不是 SVG 独有的），将这种类型的代码用于不同的图像：

```
<img src="image1.svg"
onmouseover="this.src='image2.svg'"
onmouseout="this.src='image1.svg'"> 
```

现场演示：http: [//jsfiddle.net/JNChw/](http://jsfiddle.net/JNChw/)

# windows - 避免在 PowerShell 脚本中弹出权限

> ID：12155377
> 
> 赞同：1
> 
> 时间：2012-08-28T08:23:27.247
> 
> 标签：windows, powershell, outlook

我有一个 PowerShell 脚本，它会无意中触发弹出窗口，询问用户是否允许。例如，在代码中：

```
$appt = $outlook.CreateItem("olAppointmentItem")
....
$appt.Send() 
```

我有这个 PowerShell 脚本在创建约会的服务器中运行，并且弹出窗口没有任何作用。如何在没有 Windows 请求许可的情况下运行我的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:29:27.433

FWIW，我找到了一个，公认的次优解决方法来解决这个问题。几乎令人难以置信，但又不是真的有一个工具，只要出现弹出窗口，就会单击“是”，同名的[Click Yes](http://www.contextmagic.com/express-clickyes/)。

# c# - DotNet：DLL 中的静态变量

> ID：12155380
> 
> 赞同：5
> 
> 时间：2012-08-28T08:23:34.380
> 
> 标签：c#, .net, c, dll, static

我正在开发一个包含 DLL 的 Dot Net 项目。此 DLL 使用 .lib（C 代码）。不幸的是，这个.lib 中有很多静态变量。我在这里遇到的问题：

如果两个用户同时执行搜索，我会收到一个错误，因为他们都访问 .lib，其中一个更改了某些内容，而另一个尝试读取数据。

显而易见的解决方案是锁定访问权限，但我真的不想这样做，因为这会大大减慢搜索过程。我宁愿尝试从 lib 中创建一个 DLL，但我不知道这是否会解决问题，因为我不知道静态变量是否会被单独存储，或者两个搜索进程是否会访问相同的变量。

有人对此有经验吗？因为这样做需要相当长的时间，而且我想在开始这样做之前知道它是否有效。

我希望一切都可以理解，因为英语不是我的第一语言，而且我的编程技能非常基础。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:33:14.310

据我了解，当您使用此 .dll 中的现有类从中读取数据时，您将无法同时编辑数据。显然，无论您在做什么花哨的东西，这都行不通。

您可以做的是创建一个[Thunking Layer](http://en.wikipedia.org/wiki/Thunk_%28functional_programming%29)。这将是一种将被调用的包装类，而不是 .dll。此类将通过保存数据的本地副本以供读取，并允许对真实数据进行同步编辑，在这些操作完成时更新本地副本（使用适当的临时锁定等）来处理并发 I/O 请求。可能还有其他我不知道的标准方法，但这就是我要开始的方式。

我希望这有帮助。

# ruby-on-rails - how to get hash values by position in ruby?

> ID：12155383
> 
> 赞同：7
> 
> 时间：2012-08-28T08:23:40.497
> 
> 标签：ruby-on-rails, ruby, hash

I want to get hash values by position like an array.

Example: `h = Hash["a" => 100, "b" => 200]`

In this array when we call h[0], it returns first element in given array.

That same thing possible in hash? If it is, then how ?

Thanks in Advance, Prasad.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T08:52:31.517

如上所述，根据您的用例，您可以这样做：

```
 h.keys[0]
  h.values[0]
  h.to_a[0] 
```

由于 Ruby 1.9.1`Hash`保留了插入顺序。如果你需要 Ruby 1.8 的兼容性`ActiveSupport::OrderedHash`是一个不错的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T08:26:59.120

Well the position is something that is not very well defined in a hash as by definition it is an unordered set. Still if you insist of being able to do such a thing you can convert the hash to array and then proceed the way you know:

```
irb(main):001:0> h = {:a => 1, :b => 2}
=> {:b=>2, :a=>1}
irb(main):002:0> h.to_a
=> [[:b, 2], [:a, 1]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-22T17:40:52.087

您可以扩展 Hash 以获得您需要的内容（ruby 1.9.x）：

```
class Hash
  def last                # first is already defined
    idx = self.keys.last
    [idx , self[idx]]
  end
  def array_index_of(n)   # returns nth data
    idx = self.keys[n]
    self[idx]
  end
end

h = {"a" => 100, "b" => 200}
h.first # ["a", 100]
h.last  # ["b", 200]

h.array_index_of(0) # => 100
h.array_index_of(1) # => 200 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:28:06.313

就像这样：

```
h.values[0]
# or
h.keys[0] 
```

但是元素的顺序是不确定的，也许它们不是你想要的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T08:27:26.247

You can get elements only by keys. Hash is a structure where there is no order, like in a set.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T08:43:41.010

哈希值只能通过键访问，如其他答案中所述。哈希不支持数组的索引属性。如果你想在 ruby​​ 中使用有序哈希，你可以使用 ActiveSupport::OrderedHash，但我认为你不是在寻找这个功能。

# facebook - facebook access_token of user

> ID：12155391
> 
> 赞同：1
> 
> 时间：2012-08-28T08:24:38.627
> 
> 标签：facebook, access-token

Is it possible that we can request for our facebook access_token and then give it to the third party?

I am planning to make a site that the users are able to save favorite facebook post and then I will save that to my site.

What do you think? Is it possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:00:29.690

看，关于使用访问令牌的整个想法是安全性。它们不应该像那样被放弃。

就您可以保存 Facebook 帖子的网站而言 - 这当然是可能的。但是你能详细说明一下你在看什么吗？

# android - 另一个LinearLayout问题中的LinearLayout

> ID：12155400
> 
> 赞同：0
> 
> 时间：2012-08-28T08:25:23.743
> 
> 标签：android

我有一个`LinearLayout`里面另一个`LinearLayout`。我遇到的问题是`ToggleButton`在第二个中不可见`LinearLayout`..这是我的完整 UI。我也想知道这种布局设计是否有效。我知道我可以使用`TableLayout`，但是我在一条线上安装 3 个组件时遇到问题

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dip" >

<TextView
    android:id="@+id/supplierNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/supplierNameTV"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"/>

<LinearLayout android:orientation="horizontal" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"> 

    <AutoCompleteTextView
        android:id="@+id/supplierName_CB"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:checked="false"
        android:text="ToggleButton" />

</LinearLayout>
<TextView
    android:id="@+id/prodNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/prodNameTV"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"
    android:layout_marginBottom="5dip"
    android:layout_marginTop="5dip"/>

<AutoCompleteTextView
    android:id="@+id/prodName_CB"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<Button
    android:id="@+id/add_button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/addproduct_button"
    android:textColor="#372c24" />

<ListView
    android:id="@+id/listview"
    android:layout_height="wrap_content"
    android:layout_width="match_parent">
</ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:29:33.243

使用 LinearLayout，您可以轻松分配布局权重。根布局将具有 100 的权重和，然后布局的其余部分将具有它们的权重。虽然在这种情况下我建议使用相对布局。原因是性能以及对不同屏幕的易于支持，因为布局是相对的。

例如在我的情况下，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:weightSum="100" >

<ListView
    android:id="@+id/mst"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="98" >
</ListView>

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_weight="2" >

    <Button
        android:id="@+id/btnDelete"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="@string/btn_delete" />

    <Button
        android:id="@+id/btnExport"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/btn_export" />

    <Button
        android:id="@+id/btnSelectAll"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/btn_select_all" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:30:52.543

尝试将 layout_weight 分配给您的 AutoCompleteTextView：

```
 <AutoCompleteTextView
    android:id="@+id/supplierName_CB"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:27:31.780

这是因为 AutoCompleteTextView 占据了整个宽度。将其更改为：

```
android:layout_width="wrap_content" 
```

或使用固定尺寸（如 60dp）。

# tfs - 支持 Git 和门控签入的持续集成软件？

> ID：12155401
> 
> 赞同：13
> 
> 时间：2012-08-28T08:25:27.743
> 
> 标签：tfs, continuous-integration, jenkins, teamcity, bamboo

我一直在研究 TFS、TeamCity、Jenkins 和 Bamboo，老实说，它们都没有说服力。我想

*   好报告
*   良好的 Git 支持
*   门控/延迟签入/提交
*   与 Visual Studio 和/或 Atlassian 产品集成
*   该解决方案不应要求常规开发人员使用命令行或终端（Git Extensions FTW）

TFS 通常配置和使用都很混乱，它显然不支持 Git，但它有门控签入（尽管它似乎每次都不必要地签出整个项目，所以它很慢？）。报告部门也确实缺乏。

在 Git 方面，TeamCity 的门控签入支持非常糟糕，否则它是我的最爱。支持很多开箱即用的东西。

Jenkins 的报告很糟糕（历史趋势等），它似乎比其他的有更多的错误，并且插件质量可能令人恐惧。另一方面，它是免费且用途广泛的。对 Git 和门控签到的支持如何？

Bamboo 显然具有出色的 Atlassian 集成，但不支持门控签到。:(

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T06:43:46.167

@arex1337 这里提供的所有答案都有其优点。经验告诉我们，没有一个项目/组织会对单一供应商满足他们的所有需求感到满意。你可能最终拥有的是一个基本的 CI 工具，其中混合了来自拥有 USP 的其他供应商的插件/添加。

* * *

举个例子 ：

**Jenkins**作为基础工具。@Aura 和 @sti 已经提到了所有的好东西；虽然我们可以同意插件开发有点不受控制，但仍然有很多提供出色质量的插件。主要是社区很活跃，非常敏捷（他们通常每周发布 1 个版本），您可能遇到的任何问题都很容易解决。额外的好处是易于插件开发，因此如果迫在眉睫，您可以编写自己的。

@Mark O'Connor 非常赞同**SONAR**的建议。您可以在报告方面获得最好的报告并获得出色的报告之一。@Thomas 已经澄清了有关门控提交的问题

* * *

## 支持詹金斯：

**良好的报告**- 使用 SONAR+Jenkins 即可

**良好的 Git 支持**- Jenkins 提供了

**门控/延迟签入/提交**- [Jenkins Gerrit 插件](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Plugin)

**与 Visual Studio 和/或 Atlassian 产品集成**- Jenkins wiki 本身在 Atlassian 上运行。这是已经存在的一些集成的列表

[三叶草](http://www.atlassian.com/software/clover/overview/continuous-integration)，[人群](https://wiki.jenkins-ci.org/display/JENKINS/Crowd+Plugin)，[汇合](https://wiki.jenkins-ci.org/display/JENKINS/Confluence+Publisher+Plugin)，JIRA：[插件](https://wiki.jenkins-ci.org/display/JENKINS/JIRA+Plugin) [1插件2](https://wiki.jenkins-ci.org/display/JENKINS/Jira+Issue+Updater+Plugin) [插件3](https://marketplace.atlassian.com/plugins/com.marvelution.jira.plugins.hudson)

**不应该要求常规开发人员使用 CLI** - Jenkins 不需要

* * *

现在您可以在上面的示例中将**Jenkins**替换为**Bamboo**，并且可能会接近您想要的。但到目前为止，您最好的选择似乎是詹金斯。

**TFS**和**TeamCity**：Jenkins 和 Bamboo 的联盟中还没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-29T16:26:54.113

1.  [Verigreen](https://github.com/Verigreen/verigreen/wiki)是一种用于验证 git 提交的服务器端解决方案，它在某种程度上类似于 TFS 的 Gated Check in。
    它只会将那些提交推送到成功构建的受保护分支。

2.  [Travis](https://travis-ci.org/)是一种 CI 服务，用于构建和测试您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:32:27.757

你看过[格里特](http://code.google.com/p/gerrit/)吗？

它基于 Git，具有门控提交（至少如果我正确理解了门控提交一词的含义）并且具有非常好的审查功能。

[您可以使用此插件](https://wiki.jenkins-ci.org/display/JENKINS/Gerrit+Plugin)将 Gerrit 集成到 Jenkins 中，但我不确定 Atlassian 和 Visual Studio。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-02T06:58:43.557

**好问题！**广泛广泛。无法比较所有 CI 产品。

因此，据我所知，您正在做决定。因此，让我帮助您提供一些建议。

通过你的问题，你想要的第一件事就是好的报告。

**Jenkins 可用于非常交互式的报告。有几个插件可以让 Jenkins 自定义报告的格式。您还可以定义一个 HTML 模板，然后您可以获得一个自定义的、格式正确的、几乎涵盖您对报告要求的所有方面的内容。这也可以通过电子邮件发送给相关人员/也可以发送给提交者和罪魁祸首！**

接下来你需要良好的 git 支持：Jenkins 提供了很好的 Git 支持。**Git 有几个可用的插件（例如 Github 插件）**。当您担心它有更多错误和插件质量可能会令人恐惧时，**没有软件是没有错误的！**最近 Jenkins 发布了一个稳定版本 1.478，它没有很多以前的错误（我使用的是**1.401**，**在过去的 10 个月里我连一个错误都没有遇到过**）。我相信 Jenkins 正在不断改进，并且新插件的不断开发扩展了它的使用和范围。如果您的**项目将来需要扩展，那么 Jenkins 可能会有很大的用处**。

**门控/延迟签入：**据我所知，Jenkins 可用于门控/延迟签入/提交（不确定，但如果我遇到任何此类信息，我会及时通知您）。|对它做了一些研究，我意识到它是 SVN 的一个属性，它与 Jenkins 无关，所以如果你的 SVN 支持门控/延迟签到，那么你不必担心它，因为 Jenkins 只是访问它的媒介。|

**Jenkins 不要求您使用命令行脚本，除非您的项目需要它。非开发人员也可以“管理 Jenkins”！它易于配置和使用，因为它具有出色的 UI 并且在线提供大量帮助。**

Jenkins是用Java开发的，所以**插件开发也很简单**。根据您的需要，您可以编写自己的插件并扩展其功能。

**Jenkins 也可以很容易地与 Atlassian 产品集成（有几个插件可用于将不同的 Atlassian 产品集成到 Jenkins。例如 JIRA 插件）（还不了解 Visual Studio）。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T21:47:33.810

Jenkins Git 插件可以支持门控提交。检查 Git 插件[wiki 页面上的描述](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin#GitPlugin-UsingGit%2CJenkinsandprebuildbranchmerging)

您正在寻找什么样的报告？Jenkins 有各种 RSS 提要和历史趋势。有一些插件可以添加一些报告。此外，还有一个[Plot 插件](https://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin)，可以轻松（ish）制作自己的图表。或者，来自[警告插件](https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin)的报告可能就是您正在寻找的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T11:05:17.073

我正在使用 TFS 2012 Express。我从来没有使用过以前的 TFS 版本，因为它们在我看来设置和管理都很混乱，但是在这个最新版本中它们改进了很多。请参阅[http://channel9.msdn.com/Events/TechEd/Europe/2012/DEV346上的演示文稿](http://channel9.msdn.com/Events/TechEd/Europe/2012/DEV346)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-05-28T18:43:44.373

晚了这一点，但托管的 TFS 服务在设置方面非常好用，它现在支持 GIT。如果您使用本地 TFS 解决方案并将其连接到 SQL Reporting Services，您将获得比您想象的更多的报告。如果您全力以赴并添加 SharePoint，您也会获得基于项目的 wiki 站点。

如果你全神贯注于 TFS，我认为你很难找到任何可以真正比较的东西，因为每个部分都是主要产品。在 Excel 中创建错误并将其推送到 TFS 主机是最棒的事情之一。不再有挑剔的基于 Web 的 UI。如果那是您的包，您也可以使用 MS Project 进行计划。总而言之，您将拥有用于详细任务创建和管理的 Office（项目、Excel）、用于 Wiki 的 SharePoint、用于报告的 SQL 报告（代码搅动、失败的构建计数等）以及用于源代码控制和粘合的 TFS（带有 GIT）其他部分。

当然，这确实意味着您 100% 处于 MS 生态系统中，而这本身对许多人来说可能是一个非常可怕的因素。如果你只是用拳头滚动虽然我发现它很棒。许多消极情绪是基于旧系统和一般 MS 的看法。

# php - 使用 htaccess 下载控制

> ID：12155402
> 
> 赞同：1
> 
> 时间：2012-08-28T08:25:27.233
> 
> 标签：php, apache, .htaccess

我们的下载服务器有问题，想通过 htaccess 解决。我们的下载服务器是许多带有`zip|rar|mp3|wmv|flv`扩展名的文件的目录，用户不应直接访问它们。

我们想要这样的场景：当每个用户都请求这样的文件时；我们将他重定向到一个页面（例如`download.php`）并更新我们关于该文件的统计信息，然后将他重定向到 url（所以只有这个页面可以下载文件。）

我搜索了一下，发现了一个语法，但似乎有些不对劲！你能帮我吗：

```
RewriteEngine on
# Options +FollowSymlinks
RewriteBase /
# CLOSE HOTLINKS
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?myserver.com/.*$ [NC]
RewriteRule \.(mp3|wmv|flv|exe|rar|zip|jpg)$ http://mydownloadserver.com/download.php?url=$1 [L] 
```

* * *

感谢 Mihai，所以我们可以用这个 htaccess 文件解决我们的问题：

```
RewriteBase /
RewriteCond %{HTTP_REFERER} !^http://(www\.)?anotherAllowedDomain.com/.*$ [NC]
RewriteCond %{HTTP_REFERER} !^http://(www\.)?MyDownloadServer.com/download.php.*$ [NC]
RewriteRule \.*.(mp3|wmv|flv|exe|rar|zip|jpg)$ http://MyDownloadServer.com/download.php?url=%{REQUEST_URI} [L] 
```

最后处理“download.php”中的所有请求..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:33:40.553

也许您忘记了任何文件名：

```
RewriteRule \.*.(mp3|mp4)$ http://mydownloadserver.com/download.php?url=%{REQUEST_URI} [L] 
```

`%{REQUEST_URI}`将返回请求的 uri，您可以从那里处理（[readfile()](http://uk.php.net/readfile)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:30:35.950

尝试使用

```
deny from all 
```

在您的 .htaccess 中。您可以使用您的 php 页面执行某些操作并让用户下载文件。

PS。如果我是你，我不希望这些用户在尝试直接访问文件时重定向到下载页面。如果他们做他们不应该做的事情，在我的情况下它有点非法。因此，如果他们尝试直接访问文件，我将向他们显示禁止页面。

# django - Write comments in Django

> ID：12155407
> 
> 赞同：0
> 
> 时间：2012-08-28T08:25:37.723
> 
> 标签：django, django-comments

These days I started working with Django, it's great!

I wonder if there is a "standard" to write comments in Django, for example, like codeigniter: [http://codeigniter.com/user_guide/general/styleguide.html#commenting](http://codeigniter.com/user_guide/general/styleguide.html#commenting)...

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:28:22.513

我认为遵循[PEP 8](http://www.python.org/dev/peps/pep-0008/#comments)建议来评论您的代码是一个好主意。另请参阅[PEP 257](http://www.python.org/dev/peps/pep-0257/)以获取有关文档字符串的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:31:35.233

对于 Django 视图或任何 python 文件，您可以使用 python 样式注释

喜欢单行评论，您可以尝试使用

#

对于多行注释，您可以使用 `""" """`

在模板中你可以做 html 风格的评论

喜欢`<!-- -->`

# android - Is there a maximum heap size for android emulator - or why i always get GC_CONCURRENT?

> ID：12155411
> 
> 赞同：0
> 
> 时间：2012-08-28T08:26:00.493
> 
> 标签：android, android-emulator

I have created a new android Emulator based on Android 2.3.3 with 512MB RAM and 32/64/128/256/512 Heap Space.

But i still get the same problem all the time i try to install a package with `adb install`:

```
D/dalvikvm(  341): GC_CONCURRENT freed 429K, 41% free 3445K/5767K,
external 716K/1038K, paused 5ms+2ms 
```

i get this twice per second and the emulator fed up all the system resources (CPU and RAM). So is there a bug somewhere in the heap allocation? Or do i need to set the value to something extraordinary high like 65535? This Logoutput does only seems to start when i try to install a package.

Edit: i will specify it a little bit more clearer: it doesnt matter what value i enter in the config.ini file for the `vm.heapSize`, in any case i get the same memory value of `5767K` from the GC Message above. So this is truly a bug of the emulator! And again i didnt programmed anything, i just need my emulator up and running!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:43:24.370

它不是你得到的错误。android正在按照要求收集垃圾数据。请参阅[此](http://codelog.dexetra.com/getting-around-android-memory-blues)链接以获取更多详细信息。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:57:06.257

我认为您的理解有些错误-`5767K`数量是堆的当前大小，而不是您正在更改的堆的最大大小。

Android GC 非常激进——也就是说，当创建新对象时，GC 通常总是更喜欢清理旧对象以释放空间，而不是增加堆大小，这就是您在此处看到的行为。无论您将最大堆设置为什么大小，您都无法达到您正在做的事情，因为在这种情况下，GC 总是能够释放旧内存，所以这就是它要做的事情。

尝试编写一个不断分配`Bitmap`s 的程序（并确保您保留对`Bitmap`您创建的所有 s 的引用，以便 GC 无法收集它们），然后查看您的堆有多大。

设备上的 GC 可能不那么激进，但可能会进行类似的调整。

# php - Getting access token in facebook to access work_history

> ID：12155414
> 
> 赞同：0
> 
> 时间：2012-08-28T08:26:03.697
> 
> 标签：php, javascript, facebook-graph-api

I want to integrate fb into my website and pull work_history. I've literally gone through every forum question and read the fb pages. From what I've read you need a token to access the info. Do you also need to run a fql query? How can I get the token to get friends work_history? Below is what I tried.

```
$user = $facebook->getUser();
$token  = array($facebook->getAccessToken());

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');

    $fql = "SELECT uid, name, work_history, FROM user WHERE 
    uid = ' . $user.'";
        $ret_obj = $facebook->api(array(
                                   'method' => 'fql.query',
                                   'query' => $fql,
                                 ));

    echo '<pre>Pic: ' . $ret_obj[3]['work_history'] .'</pre>';                           

 } catch (FacebookApiException $e) {
    error_log($e);
    $user_profile = null;
  }
}

if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array(
  'scope' => 'user_work_history',
  'redirect_uri' => 'http://www.myweb.com')

  );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:50:48.623

“用户”表文档[https://developers.facebook.com/docs/reference/fql/user/](https://developers.facebook.com/docs/reference/fql/user/)说 work_history 已被弃用，您应该使用列 work 代替。此外，您需要 user_work_history 权限才能访问数据。
FWIW，我运行了这个查询 - SELECT uid, name, work FROM user where uid = me() 它对我有用。

# c# - Select DataTempate in a GridView according to group

> ID：12155424
> 
> 赞同：0
> 
> 时间：2012-08-28T08:27:10.337
> 
> 标签：c#, windows-runtime, datatemplate

I've got a few collections of items. All items has the same type:

```
public class ItemType 
{
   public string Name {get;set;}
} 
```

Some of items are "favorites". They are the same, but I store them in a separate collection. I have a goup of items class:

```
public class ItemsGroup 
{
   public List<ItemType> Items {get;set;}
   public string Title {get;set;}
} 
```

So, some items are in one group, and some items are in "favorites" group. (Title = "Favorives".

Also, I have a page with a `<GridView>`. I want to set different data tempates according to group. (BigItem and SmallItem for example). I can achieve that by adding an extra field to `ItemType`:

```
public enum GroupType { Fav, Other; }

public class ItemType
{
   public string Name {get;set;}
   public GroupType Type {get; set;}
} 
```

and select data template in `DataTemplateSelector` class

```
 protected override DataTemplate SelectTemplateCore(object item, DependencyObject container)
    {
        var x = item as ItemType;
        if(x != null)
        {
            if(x.Type == GroupType.Fav) return FavDataTemplate;
        }
        return DefaultDataTemplate;

    } 
```

But I don't want to add extra fields to ItemType, because it's a shared class (wp7, winrt ect).

I saw a similar [question](https://stackoverflow.com/questions/11418511/how-can-i-make-groups-in-a-metro-gridview-use-different-layouts) , but I have the same problems.

Is there any way to select data template by group?

# asp.net-mvc-3 - 从 MVC3 视图中的 ViewModel 动态设置宽度

> ID：12155430
> 
> 赞同：0
> 
> 时间：2012-08-28T08:27:38.547
> 
> 标签：asp.net-mvc-3, razor, telerik-mvc

我有一个 Telerik DropDown

```
 @(Html.Telerik().DropDownList().Name("DropDownList").HtmlAttributes(new {style = "width:274px"})) 
```

为此，我有一个 Viewmodel，我需要根据规则中的更改动态设置此元素的宽度，例如

```
.HtmlAttributes(new {style = "width:@model.DynamicWidth"})) 
```

这种方法可能吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:31:23.843

它应该是：

```
.HtmlAttributes(new {style = "width:" + @model.DynamicWidth})) 
```

我没有检查它。

# php - 使用 xslt 获取属性节点并打印不同的值

> ID：12155431
> 
> 赞同：4
> 
> 时间：2012-08-28T08:27:38.640
> 
> 标签：php, xml, xslt, xpath

```
<page>
  <tab dim="70"></tab>
  <tab dim="40"></tab>
  <tab dim="30"></tab>
  <tab dim="30"></tab>
  <tab dim="30"></tab>
  <tab dim="70"></tab>
</page> 
```

如何获取选项卡的昏暗属性的值并使用 xslt 取出不同的值。意味着它将打印 30,40,70

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:49:39.557

要选择不同的属性值，可以使用此 XPath：

```
/page/tab[not(@dim=preceding-sibling::tab/@dim)]/@dim 
```

一个可能的 XSLT 模板是

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:template match="/">
        <xsl:for-each select="/page/tab[not(@dim=preceding-sibling::tab/@dim)]/@dim">
            <xsl:sort select="." data-type="number"/>
            <xsl:value-of select="concat(., substring(',', 2 - (position() != last())))"/>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

要使用[PHP 中的样式表转换源文档](http://php.net/manual/en/xsltprocessor.transformtoxml.php)，您可以使用：

```
$xml = new DOMDocument;
$xml->load('collection.xml');
$xsl = new DOMDocument;
$xsl->load('collection.xsl');
$proc = new XSLTProcessor;
$proc->importStyleSheet($xsl);
echo $proc->transformToXML($xml); 
```

这将在输出中给出 30,40,70。

您可以在没有 XSLT 的情况下实现同样的效果，只需执行以下操作：

```
$page = simplexml_load_file('NewFile.xml');
$dims = $page->xpath('/page/tab[not(@dim=preceding-sibling::tab/@dim)]/@dim');
$dims = array_map('strval', $dims);
sort($dims);
echo implode(',', $dims); 
```

另见

*   [http://schlitt.info/opensource/blog/0704_xpath.html](http://schlitt.info/opensource/blog/0704_xpath.html)
*   [如何使用 XSLT/XPath 生成逗号分隔的列表？](https://stackoverflow.com/questions/666584/how-do-i-generate-a-comma-separated-list-with-xslt-xpath)
*   [XPath 1.0 选择兄弟姐妹的不同属性](https://stackoverflow.com/questions/11363678/xpath-1-0-select-distinct-attribute-of-siblings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T11:46:32.217

使用分组`preceding-sibling::someName`是出了名的慢（O(N^2) -- 二次），并且可能禁止在大型节点集上使用。

**这是一个简单且最有效的[Muenchian 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:key name="kTabByDim" match="tab" use="@dim"/>

 <xsl:template match="/*">
  <xsl:apply-templates select=
   "tab[generate-id()=generate-id(key('kTabByDim',@dim)[1])]">
    <xsl:sort select="@dim" data-type="number"/>
  </xsl:apply-templates>
 </xsl:template>
 <xsl:template match="tab">
   <xsl:if test="position() >1">,</xsl:if>
   <xsl:value-of select="@dim"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<page>
  <tab dim="70"></tab>
  <tab dim="40"></tab>
  <tab dim="30"></tab>
  <tab dim="30"></tab>
  <tab dim="30"></tab>
  <tab dim="70"></tab>
</page> 
```

**产生了想要的正确结果：**

```
30,40,70 
```

# cakephp - 使用 firebug 时身份验证会话被破坏

> ID：12155433
> 
> 赞同：0
> 
> 时间：2012-08-28T08:27:41.803
> 
> 标签：cakephp, firebug, cakephp-2.1, cakephp-2.2

我正在使用 CakePHP - 2.1

**每当我尝试使用 firebug 来跟踪网站中的 ajax 请求时，我的 Auth Session 突然被破坏了。这不是某个时候，而是总是。**

要使用萤火虫，我只需要在输入凭据之前打开萤火虫，然后它就可以正常工作，直到我关闭萤火虫面板。我也尝试过使用 CakePHP-2.2.1，但结果相同。

我正在使用 Firefox 14.0.1

这是在最新版本的 CakePHP 中实现的功能，还是有任何启用/禁用选项，以便我可以在网站上的开发工作期间随时使用 firebug，而无需重新输入登录凭据？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:19:09.950

I faced the same problem. You can set the `CakePHP` security level from `HIGH` to `MEDIUM`. You will find this code in `\app\Config\core.php`.

```
Configure::write('Security.level', 'Medium'); 
```

# javascript - Lesscss 不起作用

> ID：12155434
> 
> 赞同：0
> 
> 时间：2012-08-28T08:27:44.923
> 
> 标签：javascript, xmlhttprequest, less

我有这个 html 代码：

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet/less" type="text/css" href="1.less" />
    <script type="text/javascript" src="less-1.3.0.min.js"></script>

    <title></title>
</head>
<body>
    <div id="t1">t1</div>
    <div id="t2">t2</div>
</body>
</html> 
```

这是`1.less`：

```
.transition {
    -ms-transition: all 0.3s ease-in-out;
    -moz-transition: all 0.3s ease-in-out;
    -o-transition: all 0.3s ease-in-out;
    -webkit-transition: all 0.3s ease-in-out;
    transition: all 0.3s ease-in-out;
}

.shadow {
    padding: 10px 10px 10px 10px;
    margin: 10px 10px 10px 10px;
    -moz-box-shadow: 0px 0px 10px #808080;
    -o-box-shadow: 0px 0px 10px #808080;
    -webkit-box-shadow: 0px 0px 10px #808080;
    box-shadow: 0px 0px 10px #808080;
}

    .shadow:hover {
        -moz-box-shadow: 0px 0px 10px #a5a5a5;
        -o-box-shadow: 0px 0px 10px #a5a5a5;
        -webkit-box-shadow: 0px 0px 10px #a5a5a5;
        box-shadow: 0px 0px 10px #a5a5a5;
    }

.radius {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}

header {
    background-color: #e3ffe3;
}

#t1 {
    .shadow;
    .transition;
}

#t2 {
} 
```

但风格不起作用，我不知道为什么。我使用了 chrome 的检查元素工具，发现了这个异常：

```
XMLHttpRequest cannot load file:///E:/Projects/Web/Less%20Learning/1.less. Cross origin requests are only supported for HTTP.
Uncaught Error: NETWORK_ERR: XMLHttpRequest Exception 101 
```

**我不知道这是什么意思。我想知道如何解决我的问题。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:37:11.170

# 1.使用网络服务器

您需要实际运行一个网络服务器（wamp、nginx、apache），并向该服务器上的 URI 发出 get 请求，而不是向文件发出 GET 请求；例如更改行：

```
$.get("E:/Projects/Web/Less Learning/1.less", 
```

阅读类似：

```
$.get("http://localhost/Projects/Web/Less Learning/1.less", 
```

...还可以创建不带空格的文件名以便更好地组织，例如：

```
$.get("http://localhost/Projects/Web/assets/css/1.less", 
```

并且初始请求页面也需要通过 HTTP 进行。

您可能还必须`allow_url_include = On`在 php.ini 中设置服务器配置 - 通常不是 nginx 等的情况。

# 2\. 更干净的文件夹

代替`Projects / Web / Less Learning`

尝试，`Projects / Web / Less`

在里面：

```
 /projects/web/less/assets/css/less.less
 /projects/web/less/assets/css/css.css
 /projects/web/less/assets/js/less-1.3.0.min.js
 /projects/web/less/index.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:40:35.840

如果这个 .net 平台的 web 应用程序可以使用[http://www.dotlesscss.org/](http://www.dotlesscss.org/)。

# c# - .net 秒表的正确性

> ID：12155436
> 
> 赞同：0
> 
> 时间：2012-08-28T08:27:47.247
> 
> 标签：c#, .net, stopwatch

我们正在调试一些性能问题，并注意到秒表的一些奇怪结果。

1.  我们有一个调用 Web 服务的客户端
2.  我们使用秒表在服务层记录时间以及 Web 服务
3.  我们用 datetime.now.ticks 记录下层的时间

第 2 层只是具有 2 行日志记录的传递层。

记录的时间是：

1.  110 毫秒
2.  52125 毫秒
3.  125 毫秒

我们曾预计 2 小于 1，尽管没有 api 精确到 1 毫秒。

我们在每个服务调用中创建一个新的秒表，因此这不是重新启动旧秒表的时间。

有谁知道我们为什么要得到这些数字？

**编辑**

2 和 3 在同一台机器和同一个应用程序域上

秒表代码是：

```
 var sw = new Stopwatch();
            sw.Start();

            //code to call layer 3

            sw.Stop();
            orchestrationContext.LogOperationTime(functionName, sw.ElapsedMilliseconds); 
```

在第 3 层记录时间

```
 protected DateTime StartTime { get; set; }
    StartTime = DateTime.Now;

    // code 

    new TimeSpan(DateTime.Now.Ticks - StartTime.Ticks).Milliseconds 
```

1 的日志记录在单独的机器上，使用 Websphere 进行日志记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:16:18.580

好的，您的第二个代码示例应该返回[`TimeSpan.TotalMilliseconds`](http://msdn.microsoft.com/en-us/library/system.timespan.totalmilliseconds.aspx)，仅使用`Milliseconds`您将获得第二部分。

为什么不在[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)第 3 层代码中使用 a ，与第 2 层代码的样式相同，它更准确？

您的问题标题是“秒表的正确性”，但您似乎正在将香蕉与桃子和苹果进行比较。如果您的硬件或操作系统支持，[`StopWatch`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)将使用计时器，否则它将回退到提供大约 15 毫秒粒度的计时器。`HighResolution``System.Timer`

我无法评论如何或是否使用 WebSphere，但它不会提供比`StopWatch`其他高精度时间源的 API 更准确的计时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:10:18.807

正如我所猜测的：

```
new TimeSpan(DateTime.Now.Ticks - StartTime.Ticks).TotalMilliseconds 
```

TotalMilliseconds 以毫秒为单位获取时间跨度

毫秒获取时间跨度的毫秒*部分*

# java - 换行符缩进？（爪哇）

> ID：12155437
> 
> 赞同：2
> 
> 时间：2012-08-28T08:27:46.973
> 
> 标签：java, string, newline, indentation

我正在尝试使用 \n 创建一个字符串列表，但是每当我添加多个字符串时，字符串都会缩进到前一个字符串的位置，因此示例输出为：

```
0 hello nain
            1 test nain
                       2 huh nain 
```

我不知道它为什么这样做。这是我创建字符串的代码：

```
 String[] posts = currentTopic.getMessages("main");
            //String[] postsOutput = new String[posts.length];
            String postsOutput = "0 " + posts[0];

            for(int i = 1; i < posts.length; i++){
                postsOutput += "\n" + i + " " + posts[i];
                //postsOutput[i] = i + posts[i];
            }

            sc.close();
            return postsOutput; 
```

我也尝试将 \n 移动到附加的末尾，但结果仍然相同。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T08:29:13.360

看起来您在“\n”刚刚下降（换行）并且您缺少所需的回车的系统上。

这不应该是您应该关心的事情： `line.separator`属性正在适应主机操作系统，因此它的行为类似于`System.out.println`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:30:52.013

试试\r\n，即回车换行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:38:34.353

我认为这是使用[String.format](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)的一个很好的例子，因为`%n`总是使用系统特定的行分隔符。在你的循环里面写：

```
postsOutput += String.format("%n%d %d", i, posts[i]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:35:25.840

您应该使用`System.getProperty("line.separator")`包含底层系统换行符的属性。

```
String newline = System.getProperty("line.separator");
String[] posts = currentTopic.getMessages("main");
//String[] postsOutput = new String[posts.length];
String postsOutput = "0 " + posts[0];

for(int i = 1; i < posts.length; i++){
    postsOutput += newline  + i + " " + posts[i];
    //postsOutput[i] = i + posts[i];
}

sc.close();
return postsOutput; 
```

# javascript - 加载页面时“选择”Javascript按钮

> ID：12155440
> 
> 赞同：1
> 
> 时间：2012-08-28T08:27:53.080
> 
> 标签：javascript

我正在使用包含“发送”按钮和“删除”按钮的表单。

一旦页面被加载，这个“删除”按钮似乎被“选中”——即——它被一条蓝线包裹，并且当按下“输入”时，点击该按钮时调用的 js 函数被触发。

在 firefox 和 chrome 中它工作得很好，当页面加载时我该怎么做这个按钮不会处于“选定”模式？

*删除按钮是页面中出现的第一个按钮，我发现IE由于某种原因突出显示了页面中的第一个按钮。我怎么能禁用这个设置？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:55:08.520

尝试将此附加到您的脚本中：

```
(function(w)
{
    if (w.attachEvent)
    {
        w.attachEvent('onload',function tmpLoad()
        {
            document.body.focus();
            //or document.getElementById('submitId').focus(); to focus submit btn
            w.detachEvent('onload',tmpLoad);//detach listener, too
        });
        return;
    }
    //if this issue occurs with IE > 8:
    if (navigator.appName === 'Microsoft Internet Explorer')
    {
        w.addEventListener('load',function tmpLoad()
        {
            document.body.focus();
            w.removeEventListener('load',tmpLoad,false);
        },false);
    }
})(this); 
```

那应该行得通。虽然这并不容易解决，但[这里有一个](http://jsfiddle.net/d8xWB/1/show)，在 IE 中测试，按钮没有被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:07:17.217

尝试这个：

```
<form>
<input name="Delete_btn" type="button" onclick="$(this).parent('form').append('<input type=hidden name=Delete value=Delete />').submit();" value="Delete" id="Delete_btn" />
<input type="text" name="f1" id="f1" />
<input name="Submit" type="submit" value="Submit" id="Submit" />
​&lt;/form> 
```

[http://fiddle.jshell.net/d8xWB/2/show/](http://fiddle.jshell.net/d8xWB/2/show/)

# javascript - 从 javascript Ext.form.FormPanel 获取值并设置为变量

> ID：12155443
> 
> 赞同：1
> 
> 时间：2012-08-28T08:28:16.373
> 
> 标签：javascript, variables, formpanel

我对以下 javascript 有疑问：

```
var stereo_form =new Ext.form.FormPanel({
        id: "stereoInfo_panel",
        autoDestroy:true,
        frame: true,
        width: 410,
        items:[{
            xtype: 'textfield',
            fieldLabel: 'DEM Resolution',
            name: 'resolution',
            value: '0.005' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Pyramid Level',
            name: 'matching',
            value: '0' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Size of DEM',
            name: 'size',
            value: '50.00' //sets a default value

        }],
            buttons: [{
                text: 'Confirm',
                handler: function()
                        {
                               // user1 = value of resolution field
                                                // user2 = value of matching field
                                                // user3 = value of size field
                            w.close();
                        }

        }]
    }); 

    var w =new Ext.Window({
        id: "stereoInfo_win",
        title: "Stereo Reconstruction Parameters",
        layout: 'form',
        height: 152,
        width: 415,
        items: stereo_form

    }); 
```

因此，当按下“确认”按钮时，我需要为三个 user1、user2 和 user3 变量分配表单字段分辨率、匹配和大小的值，我该怎么做？

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:38:13.510

试试这个：

```
var w = new Ext.Window({
        id: "stereoInfo_win",
        title: "Stereo Reconstruction Parameters",
        layout: 'form',
        height: 152,
        width: 415,
      items: {
        xtype: 'form',
        id: "stereoInfo_panel",
        frame: true,
        width: 410,
        items:[{
            xtype: 'textfield',
            fieldLabel: 'DEM Resolution',
            name: 'resolution',
            value: '0.005' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Pyramid Level',
            name: 'matching',
            value: '0' //sets a default value

        },{
            xtype: 'textfield',
            fieldLabel: 'Size of DEM',
            name: 'size',
            value: '50.00' //sets a default value

        }],
            buttons: [{
                text: 'Confirm',
                handler: function(btn)
                 {

                 // console.log(Ext.getVersion()); // uncomment to know your extjs version

                 // traverse to the form object, then get the fields values
                 var values = btn.findParentByType('form').getForm().getValues();

                  user1 = values['resolution'];
                 user2 = values['matching'];
                 user3 = values['size'];

                 // traverse up again to the window object
                 btn.findParentByType('window').close();
             }

        }]
    }

}); 
```

# jquery - jQuery 正则表达式返回 url

> ID：12155455
> 
> 赞同：4
> 
> 时间：2012-08-28T08:29:19.130
> 
> 标签：jquery, regex

> **可能重复：**
> [匹配 URL 的好的正则表达式是什么？](https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url)

我有一个从服务器发送的字符串，如下所示：

“嘿，看看这里的这张照片[http://example.com/fantastic.jpg](http://example.com/fantastic.jpg)，是不是很好看？”

我想要一个执行以下操作的正则表达式函数：

```
function returnUrl(text) {
    regex here ...
    return url;
} 
```

我对正则表达式真的很不好，所以我来这里寻求帮助。请看下面的图片以了解我的意思：

![stackOverflow 自动 url 识别](../Images/bd5149763b7d258dd12f70c2e95e90ee.png)

这是 stackOverflow 自动更改我在可点击 URL 中插入的文本，我想它是 jQuery / regex。

提前致谢。

* * *

编辑：

忘了提一下，这个正则表达式应该只适用于图像（jpg、png 等）而不适用于所有链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:39:17.270

一个简单的将是：

```
https?://[\w-\.\?\#\/]+ 
```

一个完整的（我使用的）将是：

```
[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)? 
```

而最后一个oe恰恰来自于[什么是一个好的正则表达式来匹配一个URL？](https://stackoverflow.com/questions/3809401/what-is-a-good-regular-expression-to-match-a-url)

**编辑**

一个简单的直接图片链接（[见这里](http://regexr.com?31ve5)）

```
https?://[\w-\.\/]+(\.jpg|\.jpeg|\.png|\.bmp) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:41:45.200

你可以这样使用：

```
function returnUrl(text) {
     var reg = /[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;
     var url = text.match(reg).toString();
     return url;
} 
```

这是演示：http: [//jsfiddle.net/4vBLH/](http://jsfiddle.net/4vBLH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:45:03.560

你应该看看[如何模仿 StackOverflow 自动链接行为](https://stackoverflow.com/q/1925455/471214)。

来自 RegexBuddy 库的 URL 正则表达式（用作**不区分大小写**）：

```
\b(https?|ftp|file)://[-A-Z0-9+&@#/%?=~_|$!:,.;]*[A-Z0-9+&@#/%=~_|$] 
```

看到它**[在行动](http://regexr.com?31vdv)**。

# image - CentOS 上的文件扩展名区分大小写

> ID：12155459
> 
> 赞同：1
> 
> 时间：2012-08-28T08:29:36.043
> 
> 标签：image, apache, centos, case-sensitive

我正在使用 CentOS。我的一个文件夹中有超过 1000 万张图像，这些图像被进一步分组到子目录中。

问题是我的一些图像被命名为 abc.jpg 而其他图像被命名为 xyz.JPG。因此，当我尝试访问 xyz.jpg 时，它显示“找不到文件”，因为扩展名区分大小写。

有什么方法可以将所有 JPG 重命名为 jpg，或者一个 httpd 配置可以解决这个问题。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:58:54.227

没有`rename`你可以做`bash`：

```
for f in *.JPG; do mv "$f" "${f%.*}.jpg"; done 
```

# c# - 如果报告进度，BackgroundWorker 会崩溃

> ID：12155463
> 
> 赞同：2
> 
> 时间：2012-08-28T08:30:20.630
> 
> 标签：c#, backgroundworker

我有一个调用类中的方法的 BackgroundWorker。该方法被赋予对 BackgroundWorker 的引用，以便它可以报告其进度。此伪代码显示了大纲：

```
void BackgroundWorker_DoWork( object sender )
{
    BackgroundWorker w = sender as BackgroundWorker;
    var c = new ProcessingClass()
    c.someMethod( w )
}

class ProcessingClass()
{
    someMethod( BackgroundWorker w )
    {
        w.ReportProgress(50)
        //calculations...
    }
} 
```

问题是在报告进度后进行“计算”时，程序会崩溃。调试器跳转到`Application.Run( new frmMain() );`启动“程序”类，原因是“异常已被调用的目标抛出”。

如果我不报告进度，一切正常。有谁知道为什么？我的猜测是这与线程有关，但我不知道如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:36:05.637

只是一些建议：

1.) 检查异常的[`InnerException`属性](http://msdn.microsoft.com/en-us/library/system.exception.innerexception.aspx)。`TargetInvocationException`

2.) 将 Visual Studio 配置为在抛出异常后立即停止：

![在此处输入图像描述](../Images/74198aa521b3e959024afa613004b822.png)

这应该有助于更接近错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:45:29.590

也许您假设 ReportProgress 正在阻塞并准备了代码`// calculations ...`所依赖的某些内容。并不是说它*没有*阻塞：

> 对 ReportProgress 方法的调用是异步的并立即返回。

[http://msdn.microsoft.com/en-us/library/ka89zff4.aspx](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)

# php - PDO：绑定参数和连接字符串之间的区别

> ID：12155465
> 
> 赞同：2
> 
> 时间：2012-08-28T08:30:27.120
> 
> 标签：php, pdo, concatenation

我有这个奇怪的问题。为什么这两个实现返回不同的结果？

```
 $db = DbBase::getInstance();
    $stmt = $db->prepare('SELECT round(round(9.50 * :amount, 2) * 23 * 0.01, 2)');
    $stmt->execute(array(':amount' => 1));
    echo $stmt->fetchColumn();

    Result: 2.18

    $db = DbBase::getInstance();
    $stmt = $db->prepare('SELECT round(round(9.50 * 1, 2) * 23 * 0.01, 2)');
    $stmt->execute();
    echo $stmt->fetchColumn();

    Result: 2.19 
```

当我绑定金额时，它会给我不同的结果。由于 SQL 注入，我宁愿不连接字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:35:19.820

当您使用数组传递数据时，数据作为字符串传递：

从[文档](http://php.net/manual/en/pdostatement.execute.php)：

一个包含与正在执行的 SQL 语句中的绑定参数一样多的元素的值数组。所有值都被视为 PDO::PARAM_STR。

但是，当您直接手动输入`1`查询时，它被视为 int。让我看看我是否可以做一些进一步的挖掘，看看当一个字符串为你转换成一个 int 时内部会发生什么。

编辑：这可能是已提交并接受的[最相似的错误之一：](http://bugs.mysql.com/bug.php?id=62861)

```
1)
SET @a = 1;
SELECT @a;

2)
SET @a = 1.1;
SELECT @a;

.. and this 

3)
SET @a = 1.1;
SELECT @a + 7;
returns '8.100000000000000000000000000000'
(probably the addition will convert "1.1" to a double, the result 
of the addition is also a DOUBLE and finally the DOUBLE is converted 
to a string - that should be OK as well as far as I can understand) 
```

因此，当您将 int 传递给 mysql 时，它看起来就像在内部转换为 double 类型。这将很好地解释您所看到的行为。

以下是您可能感兴趣的其他类似（数字不太正确）错误的列表：

[http://bugs.mysql.com/bug.php?id=46037](http://bugs.mysql.com/bug.php?id=46037)

[http://bugs.mysql.com/bug.php?id=35071](http://bugs.mysql.com/bug.php?id=35071)

[http://bugs.mysql.com/bug.php?id=35071](http://bugs.mysql.com/bug.php?id=35071) <-- 很好的显示 Win 和 Lin 之间的区别

以及我细读的数据类型错误的[过滤列表，这些错误](http://bugs.mysql.com/search.php?search_for=bound+parameter+does+not+give+same+result+as+int&status=Active&severity=&limit=All&order_by=&cmd=display&direction=ASC&bug_type=Server%3A+Types&os=0&phpver=&bug_age=0)使阅读变得有趣。

编辑2：啊哈！

这是一个[可以完美](https://bugs.php.net/bug.php?id=44639)解释您的问题的错误：

```
Reproduce code:
---------------
CREATE TABLE my_db.my_table (
  id int(10) unsigned NOT NULL auto_increment,
  PRIMARY KEY (id)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

<?php
$DB = new PDO('mysql:dbname=my_db;host=localhost', 'user', 'pass');
$stmt = $DB->prepare('select * from my_table where id>?');
$stmt->bindValue(1, 13);
$stmt->execute();
?>

or

<?php
$DB = new PDO('mysql:dbname=my_db;host=localhost', 'user', 'pass');
$stmt = $DB->prepare('select * from my_table where id>?');
$stmt->execute(array(13));
?>

Expected result:
----------------
select * from my_table where id>13

Actual result:
--------------
select * from my_table where id>'13' 
```

# c# - 日期选择器菜鸟

> ID：12155470
> 
> 赞同：-7
> 
> 时间：2012-08-28T08:30:48.300
> 
> 标签：c#, asp.net, datepicker

我不知道去哪里寻求帮助。好吧，让我直截了当。下周我将在我的面板前展示我的项目，这对我来说意义重大。我的系统没有 100% 完成，我被日期选择器卡住了。我确实花了一整天的时间，下载 jquery（我认为它会工作），但我仍然不能。这是我做过的最愚蠢的事情。发布超过 1 个相同的问题，我真的需要帮助。严重地。我需要做日期选择器，使用户能够选择日期，它将存储在数据库中。请。你可能会因为这样做而对我投反对票，但我跪在地上寻求帮助。指南、步骤或任何关于这样做的教程，因为我不是 asp.net 方面的专家，编码的东西。请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:36:29.953

演示在这里[JQueryUI DatePicker](http://jqueryui.com/demos/datepicker) 只需先导入 jquery ，然后再导入 jqueryUI 库。

```
<SCRIPT>
$(function() {
    $("#datepicker" ).datepicker();
});
</SCRIPT>

<DIV class=demo>
    <P>Date: <INPUT id=datepicker type=text></P>
</DIV> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:37:40.687

1：在页面标题中包含 JQuery 和 JQuery UI 库（在 HEAD 和 /HEAD 标签之间）：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script> 
```

1.  将此代码添加到您的页面中的 BODY 标记之后（从 JQuery 的网站复制）：

    ```
    <script>
      $(function() {
        $( "#datepicker" ).datepicker();
      });
    </script>

    <div class="demo"><p>Date: <input type="text" id="datepicker"></p></div> 
    ```

现在，当您单击输入字段时，应该会出现一个日期选择器。

# vba - 运行时错误 1004 无法将工作表从源复制到目标

> ID：12155471
> 
> 赞同：5
> 
> 时间：2012-08-28T08:30:48.183
> 
> 标签：vba, excel

这真的很好奇。让我试着解释发生了什么。我用word写了一个宏，它调用了一个excelfile的宏

```
Set excel = CreateObject("excel.application")
excel.Visible = True
excel.workbooks.Open FileName:=tablePath
IDcolumn = excel.Application.Run("main", generatedExelPath) 
```

从单词宏中调用的“主”函数是“简单地”通过从被调用的 excel 文件中复制特定数据来生成新的 excel 文件。

所以我们得到了 1 个 word 和 2 个 excel 文档。必须将一些 excel1 表复制到 excel2。

因此我使用：

```
For i = 0 To UBound(copySheets)
    Windows(srcWinName).Activate
    Sheets(copySheets(i)).Activate
    Set AcSh = ActiveSheet
    Windows(destWinName).Activate
    If copySheets(i) = "config" Then
        AcSh.Copy Before:=Sheets(1)
    Else
        AcSh.Copy After:=ActiveSheet
    End If
Next i 
```

其中 copySheets 包含需要复制的工作表。但是复制命令会引发错误。诸如“无法从源复制到目标，因为目标的行和列比源文件少”之类的东西

Atm excel1 是一个文件，`xlsm`因为它是一个`xls`没有发生此错误的文件。我想知道添加 excel2 的这条线是否是问题

```
Workbooks.Add Template:="Workbook" 
```

也许我应该使用另一个模板，但我不知道是哪个。

如果我创建一个空文件，请保存它，然后在不发生错误之前`xlsm`使用 open this empty而不是命令。`xlsm`希望可以有人帮帮我。

啊，我应该提到的一件事是：如果我从 word 宏运行上面的 excel 宏，则会发生错误，但是当我关闭 Word 并手动执行 excel 宏时它可以工作。

## 编辑：它有效

正如 Alain 所说，我刚刚更改了 excel 选项。这里是他的帖子。

> 哦，我知道为什么会这样。您必须更改默认的 excel 格式：Orb > Excel 选项 > |保存| > 以这种格式保存文件：“Excel 工作簿 (.xlsx)”。您当前的设置将是 Excel 97-2003 工作簿 (.xls)。– 阿兰 8 月 29 日 12:09

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T15:15:48.177

`.xls`扩展名是 Excel 2003 工作簿格式。这些仅支持 65,536 行和 256 列。

`.xlsx`, `.xlsb`,`.xlsm`是 Excel 2007 工作簿。这些支持多达 1,048,576 行和 16,384 列。

发生此错误是因为您试图将工作表从 2007 工作簿复制到 2003 工作簿。由于行数和列数的限制，这无法完成，即使您实际上并没有使用正在复制的工作表中的所有这些额外的行和列。

解决方案是将`.xlsm`工作簿另存为`.xls`文件，反之亦然，然后将工作表复制过来。或者，您可以仅将 UsedRange 从一个工作表复制到另一个工作表，而不是复制整个工作表，但可能会丢失重要的格式，例如行高和列宽。

* * *

添加新工作簿将以您的默认保存格式创建工作簿。您可以通过强制使用 VBA 中的默认保存格式然后将其更改回来，以确保将其以编程方式设置为 .xlsx 文件，这样您就不会让用户感到不安：

```
Dim prevSaveFormat As Long 
prevSaveFormat = Application.DefaultSaveFormat 
Application.DefaultSaveFormat = 51  'xlsx
Workbooks.Add 
Application.DefaultSaveFormat = prevSaveFormat 
```

[XlFileFormat Enumeration](http://msdn.microsoft.com/en-us/library/office/ff198017.aspx)提供了文件格式常量的完整列表，但以下是常见的：

*   51 = xlOpenXMLWorkbook（2007-2010 年没有宏，**xlsx**）

*   52 = xlOpenXMLWorkbookMacroEnabled（2007-2010 年有或没有宏，**xlsm**）

*   50 = xlExcel12（2007-2010 年的 Excel 二进制工作簿，有或没有宏，**xlsb**）

*   56 = xlExcel8（Excel 2007-2010 中的 97-2003 格式，**xls**）

# sql - 存储过程 SQL Server 参数

> ID：12155480
> 
> 赞同：-2
> 
> 时间：2012-08-28T08:31:30.810
> 
> 标签：sql, sql-server-2005, stored-procedures

我想为以下 SQL Server 表编写一个存储过程：

```
No    Date          Days       Percentage
 1    17-Aug-12      2          -0.34%
 2    3-Aug-12       15         -29.39%
 3    27-Jul-12      22          12.02%
 4    20-Jul-12      29         -0.64%
 5    13-Jul-12      36         -3.45%
 6    6-Jul-12       43         -99.93%
 7    29-Jun-12      50          41.26% 
```

在这里，我想将参数动态传递给百分比列或天数列。

请帮助编写一个存储过程以仅选择“12% - 15%”范围内的百分比</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:49:01.617

简单地检查百分比......

```
CREATE PROCEDURE [GetPercentages]
( @Low INT, @High INT )
AS
BEGIN
    SELECT *
    FROM [MyTable]
    WHERE [Percentage] BETWEEN @Low AND @High
END 
```

对于更复杂的检查（表和/或字段是动态指定的），那么您可以考虑构建一个要运行的 TSQL 字符串`sp_executesql`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:37:39.457

您可以将 minvalue 和 maxvalue 等参数作为两个不同的参数传递，然后将它们用于您的 SP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:42:26.003

尝试类似的东西

```
IF EXISTS (SELECT name 
           FROM sys.procedures 
           WHERE name = N'myspSelectDateRange') 
DROP PROCEDURE myspSelectDateRange;
GO
CREATE PROCEDURE myspSelectDateRange @DateA DATETIME, @DateB DATETIME 
AS
SELECT [SeqNo], [MyDate], [Days], [Percentage] 
FROM MyTable 
WHERE [MyDate] 
BETWEEN @DateA AND @DateB;
GO 
```

我希望这有帮助。

# asp.net - 解决直接 url 复制粘贴问题的登录页面

> ID：12155486
> 
> 赞同：0
> 
> 时间：2012-08-28T08:31:58.957
> 
> 标签：asp.net

我必须在 asp.net 中制作登录页面。

但是，当我在浏览器中复制并粘贴直接 URL 时，这不会发生。我怎样才能做到这一点？

示例：如果我有 project.aspx 和 login.aspx，即使 URL 粘贴在浏览器中，如果没有 Login.aspx 也不应该访问 Project.aspx。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:43:21.250

登录成功后可以设置一个session变量，在每一个页面加载的时候可以检查session是否为null，如果为null可以重定向到登录页面，这样如果用户直接输入URL，session就会为null重定向到登录页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:49:02.360

如果您使用标准 asp.net 身份验证（例如 Forms），您可以在 web.config 中指定需要授权的路径或页面，如果您使用标准登录组件，则 url 重定向到登录并返回到粘贴的 url 将自动工作。

我建议使用标准的 asp.net 机制，甚至更好地查看创建自定义成员资格提供程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-24T16:35:29.527

```
if ((HttpContext.Current.Request.UrlReferrer == null))
{
    Response.Redirect("Default.aspx");
} 
```

# php - 打印长数组中的值

> ID：12155490
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:32:05.523
> 
> 标签：php, arrays

我有一个长数组，如下所示：

```
Kiwwito\TuentiAPI\Object\APIObjectList Object
(
    [objects:protected] => Array
        (
            [0] => Kiwwito\TuentiAPI\Object\User Object
                (
                    [data:protected] => Array
                        (
                            [id] => 60993525
                            [name] => Danny
                            [surname] => Mathews
                            [avatar] => Array
                                (
                                    [0] => http://ak3.img.tuenti.net/HexB8wOXNRSADG6AGQAMgAvAGQ
                                    [1] => 50
                                    [2] => 50
                                )

                            [sex] => 1
                            [phone_number] => 
                            [chat_server] => xmpp4.tuenti.com
                        )

                    [structure:protected] => 
                ) 
```

该数组比这长得多，但它相似，我想在列表中一个接一个地打印数组中所有条目的名称值。希望你能理解。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:47:22.583

var_dump($var) 有什么问题？你试过了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:07:10.997

或者`echo '<pre>',print_r($object, TRUE),'</pre>';`

# android - Android Resource not found异常如何解决

> ID：12155498
> 
> 赞同：1
> 
> 时间：2012-08-28T08:32:28.503
> 
> 标签：android

Settingscreen.xml 没找到 但是项目里已经有 怎么解决

```
08-28 13:52:28.819: E/AndroidRuntime(4258): Caused by: android.content.res.Resources$NotFoundException: File res/layout/settingscreen.xml from xml type layout resource ID #0x7f030017
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1916)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1871)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.Resources.getLayout(Resources.java:731)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:209)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.app.Activity.setContentView(Activity.java:1657)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at com.test.Setting.onCreate(Setting.java:34)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
08-28 13:52:28.819: E/AndroidRuntime(4258):     ... 11 more
08-28 13:52:28.819: E/AndroidRuntime(4258): Caused by: java.io.FileNotFoundException: res/layout/settingscreen.xml
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.AssetManager.openXmlAssetNative(Native Method)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.AssetManager.openXmlBlockAsset(AssetManager.java:486)
08-28 13:52:28.819: E/AndroidRuntime(4258):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1898) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:39:41.487

1.  检查 Settingscreen.xml 是否格式正确。
2.  检查它是否是项目的一部分。
3.  检查apk文件中是否有Settingscreen.xml。

如果这些事情是正确的，那么清理项目并删除 gen 文件夹并再次运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:48:51.603

您必须清理您的项目并再次运行并格式化您的代码

# java - 在 Java 中检查字符串和字符串数组

> ID：12155500
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:32:48.960
> 
> 标签：java, string

我遇到了一个问题。我正在调用方法 A() 。有时返回字符串，有时返回字符串数组 (String[] strArr) 。如何以编程方式处理这种情况？我对方法 A() 的返回类型没有任何控制权。

我必须调用该方法并将返回的值存储在一个变量中。变量的类型需要根据方法的返回值（字符串/字符串数组）来固定。

提前致谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:35:57.147

试试这个

```
Object returnedValue = A();
if (returnedValue instanceof String)
{
    ...
}
else if (returnedValue instanceof String[])
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:18:14.553

我宁愿建议更改 A() 的签名。方法 A() 应始终返回 String[] 并在调用端检查数组的长度并执行必要的操作。

# asp.net - 没有 MVC 问题的 ASP-Url 路由

> ID：12155502
> 
> 赞同：0
> 
> 时间：2012-08-28T08:32:58.253
> 
> 标签：asp.net, url-routing

我在使用 asp 4.0 路由时遇到问题。

我在 Global.cs 中有方法

```
void RegisterRoutes(RouteCollection routes)
{  
    routes.MapPageRoute("cats","Categories/{ct}/{catname}","~/catwise.aspx");  
} 
```

和

```
protected void Application_Start(object sender, EventArgs e)
{  
    RegisterRoutes(RouteTable.Routes);  
} 
```

在我的母版页上

```
<a href="Categories/<%# Eval("Category_Id")%>/<%# Eval("Category_Name")%>"> 
```

这在第一次路由中运行良好，`Categories/1/Apple`但现在在第一次路由之后，所有链接都是双重路由页面`Categories/1/Apple/Categories/2/Banana`。

链接相互攀爬，所以页面显示`Resource not found` 我尝试设置`Base`，但它使事情变得更糟。我没有使用任何自定义处理程序

我应该如何解决这个问题？/为什么它不能正常工作？

尝试`/`在 url like 之前 使用，`<a href="/Categories/<%# Eval("Category_Id")%>/<%# Eval("Category_Name")%>">` 但它说`resource not found`是这样添加`/`的， `routes.MapPageRoute("cats","/Categories/{ct}/{catname}","~/catwise.aspx");`
但它抛出编译时错误，说 url cannot contan `/`or `~`or `?`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:41:54.053

这不是路由问题。问题出在链接上。我不知道这是否是在网页中生成链接的更好方法，但快速解决方法是简单地添加一个`/`：

```
<a href="/Categories/<%# Eval("Category_Id")%>/<%# Eval("Category_Name")%>"> 
```

编辑：

当您在主页中`http://mysite/`并且浏览器看到一个“相对”链接时，`Categories/1/Apple`它会将其添加到当前路径，因此结果是`http://mysite/Categories/1/Apple`. 因为您的链接是相对于页面的，所以下次您点击该链接时，浏览器会再次添加该链接，您将拥有`http://mysite/Categories/1/Apple/Categories/1/Apple`. 我提出的快速解决方法是通过添加前导将您的相对链接更改为绝对链接`/`。

整个问题与 asp.net 及其路由无关。它关于浏览器如何处理相对链接。我认为有更合适的方法来生成链接（使用路由时），比如：

```
<asp:HyperLink ID="HyperLink1" runat="server" 
    NavigateUrl="<%$RouteUrl:ct=1,catname=Apples,routename=cats%>">
    Link Text
</asp:HyperLink> 
```

在数据绑定场景中，您可以尝试：

```
<asp:HyperLink ID="HyperLinkClient" runat="server"  
    NavigateUrl='<%# GetRouteUrl("cats", new {ct = Eval("Category_Id"), catname = Eval("Category_Name")}) %>'> 
     Link Text 
</asp:HyperLink> 
```

[另请参阅此处](http://msdn.microsoft.com/en-us/library/dd329551%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:49:02.190

当您创建的链接`Categories/1/Apple`被视为相对于当前 URL 的链接时，您需要添加一个反斜杠作为 URL 的开头，例如`/Categories/1/Apple`，这可以确保您的 URL 是相对于根的。

**更新**

根据您的评论“*主页网址是`http://localhost:14268/mysite`*”，您的网站似乎正在虚拟目录下运行。因此，简单地添加`/`到 URL 是行不通的，您需要明确地将 VD 的路径添加到 URL 中，例如

```
<% Request.ApplicationPath %>/Categories/... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T10:14:19.290

试试这个例子：

```
<a href="<%=Request.ApplicationPath%>/Categories/<%# Eval("Category_Id")%>/<%# Eval("Category_Name")%>"> 
```

`<%=Request.ApplicationPath%>`应该解析为指向应用程序根目录的相对路径...

# python - 如何使用 Beautiful Soup 提取树结构下的链接

> ID：12155504
> 
> 赞同：-3
> 
> 时间：2012-08-28T08:33:09.843
> 
> 标签：python, beautifulsoup, web-crawler

假设 html 网页是这样的：

```
<html>
    <div id="a">
        <div class="aa">
            <p>
                <a id="ff" href="#">ff</a>
                <a id="gg" href="#">gg</a>
            </p>
        </div>
        <div class="bb">
            <p>
                <a id="ff" href="#">ff</a>
            </p>
        </div>
    </div>
    <div id="b">
    </div>
</html> 
```

使用后

```
soup = BeautifulSoup(webpage.read()) 
```

我有 html 网页，我想获取树结构下的链接：`<html>`-> `<div id="a">`-> `<div class="aa">`。

如何使用 Beautiful Soup 编写以下 Python 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-26T14:21:57.167

我在官方美丽的汤文档中找到了以下信息：

```
for link in soup.find_all('a'):
    print(link.get('href'))
# http://example.com/elsie 
```

你可以在这里看到更多关于美丽汤的信息：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:25:16.423

如果没有有关您的数据的更多信息，很难为您提供涵盖所有可能输入的简洁解决方案。为了帮助您顺利上路，这里有一个演练，希望能引导您找到适合您需求的解决方案。

以下将为我们提供`<div id="a">`（应该只有一个具有特定 id 的元素）：

```
top_div = soup.find('div', {'id':'a'}) 
```

然后我们可以继续检索所有内部 div `class='aa'`（可能有多个）：

```
aa_div = top_div.findAll('div', {'class':'aa'}) 
```

从那里，我们可以返回找到的每个 div 的所有链接：

```
links = [div.findAll('a') for div in aa_div] 
```

请注意，`links`包含嵌套列表，因为`div.findAll('a')`将返回`a`找到的节点列表。有[多种方法可以展平这样的列表](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)。

这是一个遍历列表并打印出各个链接的示例：

```
>>> from itertools import chain
>>> for a in chain.from_iterable(links):
...   print a
... 
<a id="ff" href="#">ff</a>
<a id="gg" href="#">gg</a> 
```

* * *

上面提出的解决方案相当冗长。然而，随着对输入数据的更多了解，更紧凑的解决方案是可能的。例如，如果数据与您显示的完全一样，并且总会有那个数据`div`，`class='aa'`那么解决方案可能只是：

```
>>> soup.find('div', {'class':'aa'}).findAll('a')
[<a id="ff" href="#">ff</a>, <a id="gg" href="#">gg</a>] 
```

* * *

### 将 CSS 选择器与 BeautifulSoup4 一起使用

如果您使用的是较新版本的 BeatifulSoup（版本 4），您还可以使用提供[CSS 选择器](http://www.w3.org/TR/CSS2/selector.html)支持的[`.select()`方法。](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)我在此答案开头提供的详尽解决方案可以重写为：

```
soup.select("div#a div.aa a") 
```

对于 BeautifulSoup v3，您可以使用[soupselect](http://code.google.com/p/soupselect/)添加此功能。

但是，请注意文档中的以下声明（强调我的）：

> 这为了解 CSS 选择器语法的用户提供了便利。您可以使用 Beautiful Soup API 完成所有这些工作。如果**你只需要 CSS 选择器，你还不如直接使用 lxml，因为它更快**。但这可以让您将简单的 CSS 选择器与 Beautiful Soup API 结合起来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-30T14:56:01.343

我会这样做：

```
from BeautifulSoup import BeautifulSoup
import urllib

url = 'http://www.website.com'
file_pointer = urllib.urlopen(url)
html_object = BeautifulSoup(file_pointer)

link_list = []
links = html_object('div',{'class':'aa'})[0]('a')
for href in links:
    link_list.append(href['href']) 
```

这将返回一个可以通过偏移量调用的“链接”列表：

```
link_1 = link_list[0]
link_2 = link_list[1] 
```

或者，如果您想要与链接关联的文本（即“单击此处”与“/Product/Store/Whatever.html”），您可以稍微更改相同的代码并产生所需的结果：

```
link_list = []
links = html_object('div',{'class':'aa'})[0]('a')
for text in links:
    link_list.append(text.contents[0]) 
```

同样，这将返回一个列表，因此您必须调用偏移量：

```
link_1_text = link_list[0]
link_2_text = link_list[1] 
```

# javascript - 如何在当前 UTC 而不是客户端的本地时间上进行此“时间前”功能参考？

> ID：12155512
> 
> 赞同：1
> 
> 时间：2012-08-28T08:33:48.893
> 
> 标签：javascript, function, time, utc

在一个网站上（[http://webdesign.onyou.ch/2010/08/04/javascript-time-ago-pretty-date/](http://webdesign.onyou.ch/2010/08/04/javascript-time-ago-pretty-date/)）我发现这个非常有用的功能，你给它一个 ISO 8601 时间（例如 2010- 08-26T22:24:17Z) 并输出自此时间戳以来经过的时间。但是因为我想使用UTC ISO 8601时间戳，所以我的应用程序可以在国际上使用，例如，如果你在欧洲，它总是说“3小时前”，即使消息已经在几秒钟前发布.

**那么如何让它返回自输入 UTC 时间戳和当前 UTC 时间以来已经过去了多少时间？**

```
 function relativeTime(date_str){
    var time_formats = [
    [60, 'seconds', 1], // 60
    [120, '1 minute ago', '1 minute from now'], // 60*2
    [3600, 'minutes', 60], // 60*60, 60
    [7200, '1 hour ago', '1 hour from now'], // 60*60*2
    [86400, 'hours', 3600], // 60*60*24, 60*60
    [172800, 'yesterday', 'tomorrow'], // 60*60*24*2
    [604800, 'days', 86400], // 60*60*24*7, 60*60*24
    [1209600, 'last week', 'next week'], // 60*60*24*7*4*2
    [2419200, 'weeks', 604800], // 60*60*24*7*4, 60*60*24*7
    [4838400, 'last month', 'next month'], // 60*60*24*7*4*2
    [29030400, 'months', 2419200], // 60*60*24*7*4*12, 60*60*24*7*4
    [58060800, 'last year', 'next year'], // 60*60*24*7*4*12*2
    [2903040000, 'years', 29030400], // 60*60*24*7*4*12*100, 60*60*24*7*4*12
    [5806080000, 'last century', 'next century'], // 60*60*24*7*4*12*100*2
    [58060800000, 'centuries', 2903040000] // 60*60*24*7*4*12*100*20, 60*60*24*7*4*12*100
    ];
    var time = ('' + date_str).replace(/-/g,"/").replace(/[TZ]/g," ").replace(/^\s\s*/, '').replace(/\s\s*$/, '');
    if(time.substr(time.length-4,1)==".") time =time.substr(0,time.length-4);
    var seconds = (new Date - new Date(time)) / 1000;
    var token = 'ago', list_choice = 1;
    if (seconds < 0) {
        seconds = Math.abs(seconds);
        token = 'from now';
        list_choice = 2;
    }
    var i = 0, format;
    while (format = time_formats[i++])
        if (seconds < format[0]) {
            if (typeof format[2] == 'string')
                return format[list_choice];
            else
                return Math.floor(seconds / format[2]) + ' ' + format[1] + ' ' + token;
        }
    return time;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:57:52.930

```
var now = new Date(); 
var utcNow = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(),  now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()); 
```

然后`utcNow`在你当前使用的地方使用`new Date()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:02:27.133

改变

```
var seconds = (new Date - new Date(time)) / 1000; 
```

到

```
var seconds = (new Date - new Date(time)) / 1000 + (new Date).getTimezoneOffset()*60; 
```

在发布之前我没有测试你的代码，所以这里是文档`getTimezoneOffset`： [https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTimezoneOffset)

# wordpress - wordpress 404 - 一次到 404，一次到主页

> ID：12155516
> 
> 赞同：0
> 
> 时间：2012-08-28T08:34:02.517
> 
> 标签：wordpress, http-status-code-404

我的站点中的 404 有问题。我没有建立网站，只是在那里解决了一些问题。

我正在使用默认的永久链接结构，并且在我的主题文件夹中有一个 404.php。我的.htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule> 
```

问题是：当我将 URL 更改为`/?page_id="page number that doesn't exist"`- 我得到 404 页面，但是当我只写一些字母（例如`/sjkhdk`）时，我得到了主页（我希望它们都进入 404 页面）。

有任何想法吗？

谢谢， 塔尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:31:17.237

每当我遇到永久链接问题时，这个过程*通常*都会解决。

1.  确保 .htaccess 可由网络服务器写入。
2.  转到`Settings>Permalinks`并简单地点击保存更改。这将在内部重置 wordpress 永久链接。

让我知道这个是否奏效。

# visual-studio-2010 - 删除未使用的源代码文件

> ID：12155522
> 
> 赞同：2
> 
> 时间：2012-08-28T08:34:30.457
> 
> 标签：visual-studio-2010, clearcase, project-organization, code-cleanup

在 Visual Studio 2010 中，我有一个大型解决方案，其中包含许多不再使用的 .cs 文件（未在 .csproj 中引用），但仍存在于代码存储库（ClearCase）中。您是否知道可以找到所有此类文件的任何工具/扩展程序/脚本？

可以编写一个脚本，遍历所有项目的目录，获取所有签入的文件，然后与项目文件的内容进行比较。它不存在，而不是我们有一个删除的候选者。它不是太奇特，所以我想知道这样的脚本是否已经存在。否则，这将是一个让我的 Python 书尘埃落定的好机会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:00:38.127

在 SO 上已经讨论过的唯一脚本是“ [Visual Studio 宏：查找项目中未包含的文件？](https://stackoverflow.com/questions/2000197/visual-studio-macro-find-files-that-arent-included-in-the-project) ”。

可以使用 cleartool 命令完成，以便：

*   签出父目录
*   `cleartool rmname -force the_file`（[允许强制删除](https://stackoverflow.com/questions/5215467/delete-file-from-clearcase-checked-out-on-another-branch/5215940#5215940)）
*   签入父目录。

由于它有点麻烦，另一种方法是：

*   运行脚本并删除未使用的文件（简单的操作系统删除，与 ClearCase 无关）
*   使用以下选项将结果重新导入 ClearCase（带有[`clearfsimport`](https://stackoverflow.com/a/418196/6309)）`-rmname`：这将自动删除导入源中不再存在的目标文件（即执行清理脚本的文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T05:15:42.333

我另一篇文章中的 PowerShell 脚本将帮助您完成 95% 的工作。它是围绕 TFS 设计的，但它应该很容易根据您的目的进行修改。该脚本将从项目文件中获取包含文件的列表，并将其与磁盘上的文件进行比较。您将获得磁盘上但未包含在项目中的一组文件。您可以删除它们或针对该组文件运行其他命令。

[https://stackoverflow.com/a/23420956/846428](https://stackoverflow.com/a/23420956/846428)

# html - html5 文章或部分

> ID：12155523
> 
> 赞同：1
> 
> 时间：2012-08-28T08:34:36.027
> 
> 标签：html, tags, article

我正在 HTML5 网页上制作“关于”部分，但我不太确定是否使用`<article>`or`<section>`标签。它只是一个包含一些关于信息的页面。标签对`<article>`我来说似乎更合乎逻辑，但我不确定

```
<h1>ABOUT</h1>
<div class="white-box">
    <strong>Lorem Ipsum</strong>

    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam dictum ultricies nisi nec commodo. Sed condimentum dapibus scelerisque. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nam ut ornare lorem. Duis porttitor sagittis accumsan. Morbi non eros augue, quis pellentesque purus. Cras id purus nec nunc ullamcorper fringilla sit amet lobortis quam.
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:40:39.787

节标记标签定义文档中的节。例如章节、页眉、页脚或文档的任何其他部分。

标签指定独立的、自包含的内容。一篇文章本身应该是有意义的，并且应该可以独立于网站的其余部分进行分发。

元素的潜在来源：

*   论坛帖子

*   博文

*   新闻故事

现在这取决于您希望如何显示您的关于我们部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T22:31:20.813

考虑使用备用标签，因为有关文章的信息与网页的主题相关，但不是其主要关注点。

# c# - 客户端脚本显示时正确调整 ModalPopupExtender 大小

> ID：12155524
> 
> 赞同：1
> 
> 时间：2012-08-28T08:34:38.397
> 
> 标签：c#, javascript, webforms

在我的 ASP.NET Web 表单页面中，我有一个`ModalPopupExtender`由 JavaScript 显示的：

```
$.ajax({
    // full ajax request shortened
    type: "POST",
    success: function (msg) {
        $("#profileTitleLabel").html(msg.d.TitleEncoded);
        $("#profileTextLabel").html(msg.d.BodyEncoded);

        $find('profileTextModalPopupExtender').show();
    },
    error: function (jqXHR, textStatus, errorThrown) {
    }
}); 
```

*第一次*它既不是居中也不是大小，但在随后的调用中它很好（在 Chrome、Firefox 和 IE9 中）。我想这与关闭它时完成的回发有关（`UpdatePanel`部分更新）。

现在如何在不使用服务器端调用的情况下手动触发大小以使其第一次正确大小`Show`？`initialize`我之前尝试过调用`show`，我浏览了客户端对象的方法，但我还没有找到解决方案。

以下是与弹出窗口匹配的样式`div`：

```
height: auto;    // matched css classes
width: auto;
max-height: 80%;
max-width: 90%;
min-width: 50%;
overflow: auto;
padding: 10px;
position: fixed; // element CSS
z-index: 100001;
left: 160.5px;
top: 157.5px; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:17:33.070

我找到了使弹出窗口正确显示的解决方法：

```
$find('profileTextModalPopupExtender').show();
$find('profileTextModalPopupExtender')._layout();
$find('profileTextModalPopupExtender').show(); 
```

我同意这有一种代码味道。但是，我找不到更好的解决方案（我仍然愿意接受建议）。我特别不喜欢`_layout`被调用三次，一次由我自己调用，两次（连续！）由`show`.

# c# - win8 应用中的流式布局容器

> ID：12155525
> 
> 赞同：3
> 
> 时间：2012-08-28T08:34:39.207
> 
> 标签：c#, xaml, layout, windows-8, stackpanel

我在 a 中有一些物品`GridView`，我希望它们的位置如下：

```
<-------              fixed size: 600                 --------->
[     Item 1, lengh 300        ][       Item 2, lengh 300      ]
[ Item 3, lengh 200 ][ Item 4, lengh 200 ][ Item 5, length 200 ]
[    Item 6, Length 400                  ][ Item 7, length 200 ] 
```

现在我需要选择一个容器作为`GridView.ItemsPanel`. A`<StackPanel Orientation="Horizontal" />`不会自动开始新行。`VariableSizedWrapGrid`并且`WrapGrid`可以将项目限制在固定宽度，但所有单元格/项目都具有相同的宽度。有没有容器可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:13:02.993

我编写[了自己的 FlowPanel](http://pastebin.com/YDstvwhr)。它工作得很好，并产生以下结果。

![在此处输入图像描述](../Images/d60629006defaf677ccffa1e74ed78bb.png)

如果你很好奇，那就是我的适用于 Windows 8 的 StackOverflow 应用程序，名为 Stackstabilizer，它很快就会发布。

# android - 如何在 7 英寸台式机和 10 英寸平板电脑上运行 Android 应用程序

> ID：12155527
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:34:48.503
> 
> 标签：android, android-emulator

我正在为 10 英寸和 7 英寸平板电脑创建应用程序。

我的问题是，在 10 英寸平板电脑上它不能正常工作。在 7 英寸上它是。我在 hdpi 文件夹中复制了小图像，在 xhdpi 文件夹中复制了大图像。我尝试使用以下方式，但在 10 英寸平板电脑上遇到问题。这里的图像看起来像那样小。我以为 10 英寸平板电脑也在拍摄 hdpi 文件夹图像。该应用程序处于横向模式。

如何为这两款平板电脑制作这个应用程序？

XML 文件：

```
res/layout-large/main.xml  -----7 inch
res/layout-xlarge/main.xml  -----10 inch 
```

图片：

```
res/drawable/hdpi---7 inch images
res/drawable/xhdpi---10 inch images 
```

桌子尺寸 7 英寸：

```
1024 to 600
density 240
ramsize 512
version 3.0 
```

表尺寸 10 英寸：

```
1280 to 800
density 160
ramsize 512
version 3.0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:50:47.337

您必须使用[http://developer.android.com/guide/practices/screens_support.html底部的新限定符](http://developer.android.com/guide/practices/screens_support.html)

例如

```
res/layout/main_activity.xml           # For handsets (smaller than 600dp available width)
res/layout-sw600dp/main_activity.xml   # For 7” tablets (600dp wide and bigger) 
res/layout-sw720dp/main_activity.xml   # For 10” tablets (720dp wide and bigger) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:51:54.947

HDPI 用于密度 ~= 240
XHDPI 用于密度 ~= 300

您的 10 英寸平板电脑的密度为 160，即 MDPI。

LARGE 和 XLARGE 也取决于屏幕尺寸（分辨率），但您的可绘制文件夹取决于屏幕密度，这不是一回事。

以下是您需要的所有信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# php - 将完成的 PDF 作为带有字段值的电子邮件附件发送

> ID：12155529
> 
> 赞同：1
> 
> 时间：2012-08-28T08:35:08.583
> 
> 标签：php, forms, adobe, sendmail

我有一个用户填写的在线 PDF 表单，然后单击提交按钮，该按钮将表单作为附件发送到电子邮件地址，并将数据存储在数据库中。但是，完整的单个字段值在发送到电子邮件地址时不会出现。我怎样才能做到这一点？非常感谢。

```
//define the receiver of the email 
$to = 'test@*****.com'; 
//define the subject of the email 
$subject = 'Completed PDF form'; 
//create a boundary string. It must be unique 
//so we use the MD5 algorithm to generate a random hash 
$random_hash = md5(date('r', time())); 
//define the headers we want passed. Note that they are separated with \r\n 
$headers = "From: noreply@test.com\r\nReply-To: noreply@test.com"; 
//add boundary string and mime type specification 
$headers .= "\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""; 
//read the atachment file contents into a string,
//encode it with MIME base64,
//and split it into smaller chunks
$attachment = chunk_split(base64_encode(file_get_contents('purchase_order_form.pdf'))); 
//define the body of the message. 
ob_start(); //Turn on output buffering  
?> 
--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: multipart/alternative; boundary="PHP-alt-<?php echo $random_hash; ?>" 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/plain; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

Hello World!!! 
This is simple text email message. 

--PHP-alt-<?php echo $random_hash; ?>  
Content-Type: text/html; charset="iso-8859-1" 
Content-Transfer-Encoding: 7bit

--PHP-alt-<?php echo $random_hash; ?>-- 

--PHP-mixed-<?php echo $random_hash; ?>  
Content-Type: application/zip; name="purchase_order_form.pdf"  
Content-Transfer-Encoding: base64  
Content-Disposition: attachment  

<?php echo $attachment; ?> 
--PHP-mixed-<?php echo $random_hash; ?>-- 

<?php 
//copy current buffer contents into $message variable and delete current output buffer 
$message = ob_get_clean(); 
//send the email 
$mail_sent = @mail( $to, $subject, $message, $headers ); 
//if the message is sent successfully print "Mail sent". Otherwise print "Mail failed" 
echo $mail_sent ? "Mail sent" : "Mail failed"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:14:40.420

这是您使用[Swiftmailer](http://swiftmailer.org/)的示例，您会发现它真的很简单！

```
require_once '/path/to/swift-mailer/lib/swift_required.php';

// Create the Transport
$transport = Swift_MailTransport::newInstance();

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create the message
$message = Swift_Message::newInstance()

  // Give the message a subject
  ->setSubject($subject)

  // Set the From address with an associative array
  ->setFrom(array('noreply@test.com'))

  // Set the To addresses with an associative array
  ->setTo(array($to))

  // Give it a body
  ->setBody($message)

  // Optionally add any attachments
  ->attach(Swift_Attachment::fromPath('purchase_order_form.pdf'))
  ;

// Send the message
$result = $mailer->send($message);

echo $mail_sent ? "Mail sent" : "Mail failed"; 
```

# javascript - jQuery getScript vs 在文件中嵌入脚本

> ID：12155532
> 
> 赞同：4
> 
> 时间：2012-08-28T08:35:19.927
> 
> 标签：javascript, jquery, html, getscript

我想知道是否使用 jquery 的[getScript](http://api.jquery.com/jQuery.getScript/)。

我有一个需要包含在我的网站中的 jQuery 插件，但我不确定该怎么做，我想知道这些方法之间是否有区别：

就我而言，我必须包含一个相当大的脚本，但仅适用于 IE 浏览器。此刻我这样做：

```
if($.browser.msie){
 //minifed code
} 
```

现在我想知道这是否：

```
if($.browser.msie){
 $.getScript('link to minified script');
} 
```

会有什么优点/缺点？或者，如果它或多或少是同一件事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:41:40.707

更好用：

```
if($.browser.msie){
 //minifed code
} 
```

因为`.getScript()`永远不会缓存文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:43:52.460

获取外部脚本会有一些缺点。

即 **一个 HTTP 请求**

```
if($.browser.msie){
 //minifed code
} 
```

**两个 HTTP 请求**

```
 if($.browser.msie){
 $.getScript('link to minified script');
} 
```

您的浏览器通常只能同时处理 2 个 http 请求。所以从性能的角度来看，第一个会更快。

**进一步解释**

，`getScript`IE 用户将有一个更小的请求，（-你的“缩小代码”的大小）。但是其他人每次都必须下载外部脚本（+ 外部脚本的大小 * 页面请求数）+ 由于额外的 HTTP 请求而导致响应延迟。

使用缩小代码，每个人都必须下载你的缩小代码大小（+缩小代码大小）。

假设您的 minifed 代码是 5K 并且被访问 10 次，这意味着：

*IE 获取脚本：*

**(5K * 10) + 使用第二个 HTTP 请求的性能 = 50K+**

*非 IE*

**0**

///////////////////////////////////////// //////

*IE 非GetScript*

**5K**

*非 IE*

**5K**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:41:08.110

这是两个完全不同的东西。在一种情况下，您将脚本嵌入到页面中，因此可以立即访问它，并且您不需要任何额外的代码来验证它是否可用。但是，在第二种情况下，您将脚本作为外部资源加载，这意味着您可能需要处理可能的通信错误、脚本错误等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:44:22.407

两种方法之间存在差异。即使浏览器不是 ie，您嵌入的第一种方法也会下载整个脚本。它会增加页面大小，从而影响页面加载性能。

第二个方法会更好，只有在需要时才从外部 js 文件加载脚本，这意味着只有当浏览器是 IE 时。所以在其他浏览器中性能会更好。

您还提到脚本非常大。所以最好将该脚本包含在外部 js 文件中。由于这些文件被缓存在客户端机器中，从而提高了性能。无需一次又一次地获取它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T08:39:47.300

因此，根据您必须[深入研究的](https://github.com/jquery/jquery/blob/master/src/ajax/script.js#L29)[来源](https://github.com/jquery/jquery/blob/master/src/ajax.js#L245)，您可以看到 getScript 正在为您添加脚本标签，因此没有区别。除了启动 jQuery 和处理添加脚本元素的 JavaScript 的（小）处理。我认为最大的区别在于它允许您以编程方式注入脚本标记，以便您可以添加逻辑，如浏览器测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T08:40:39.740

不需要在文件中嵌入脚本，使用其他浏览器的用户不应该得到它。`$.getScript`只是`$.ajax`with的简写`dataType` `script`，所以它只是加载脚本并执行它。

# sql-server - Django SQL Server 错误：“无法创建新连接，因为处于手动或分布式事务模式。”

> ID：12155540
> 
> 赞同：1
> 
> 时间：2012-08-28T08:35:44.807
> 
> 标签：sql-server, django, sql-server-2008, django-models, django-mssql

我从 django 查询 SQL Server 时遇到了一些奇怪的问题。

当我在单个请求中查询 db 两次时，在某些情况下会出现错误。即当第一次数据库查询返回大量数据时，我们在第二次查询数据库时最终会出错。

**细节：**

我们正在为 Windows 上运行的 Django (https://bitbucket.org/Manfre/django-mssql/src) 使用 Microsoft SQL Server 后端。

我们希望允许用户通过表单过滤来自某个表（“活动”）的数据，将其显示在网站的表上，然后在地图上显示来自另一个表（“框架”）的相关数据。

```
class Frames(models.Model):
...

class Activity(models.Model):
frame_from = models.ForeignKey(Frames, ...)
... 
```

问题是：当我们想从 Activity 中过滤大量数据时（比如说 200 行 x 6 列），我们不能在同一个请求中对表 Frames 进行其他查询（在 Django settings.py 中打开了 MARS）：

```
result = Aktywnosci.objects.filter(qset1) 
```

总是好的，但是

```
path = Frames.objects.filter(qset2) 
```

当上一个查询返回大量数据时，引发 OLE DB 错误：

> *“Microsoft OLE DB Provider for SQL Server”错误：无法创建新连接，因为处于手动或分布式事务模式。*

PS。数据库设置来自`settings.py`：

```
# Database for this installation. 
DATABASES = {
'default':{
    'ENGINE': 'django.db.backends.sqlserver_ado', 
    'NAME': '***',                      
    'USER': '***',                      
    'PASSWORD': '***',                  
    'HOST': '***',                      
    'PORT': '',                        
    'OPTIONS' : {
        'provider': 'SQLOLEDB',
        'use_mars': True,                    
          }
}
} 
```

PS2。我在 djang-mssql 的谷歌代码页上遇到了这个问题：[http](http://code.google.com/p/django-mssql/issues/detail?id=79) ://code.google.com/p/django-mssql/issues/detail?id=79 - 但它似乎在新版本中得到了解决包裹...

我能做些什么呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:20:49.437

我们在 bitbucket 获得了解决方案：[https](https://bitbucket.org/Manfre/django-mssql/issue/13/ole-db-provider-for-sql-server-error) : //bitbucket.org/Manfre/django-mssql/issue/13/ole-db-provider-for-sql-server-error 来自 Michael Manfre - 非常感谢。

解决方案如下：

*“`SQLOLEDB`并且`MARS`效果不佳，我打算更改所有文档和默认设置以假设将使用本机客户端驱动程序。尝试使用本*机客户端；`"SQLNCLI10"`或`"SQLNCLI11"`.

```
DATABASES = {
    'default': {
        'ENGINE': 'sqlserver_ado',
        'NAME': 'mydb',
        'HOST': r'localhost',
        'USER': '',
        'PASSWORD': '',
        'OPTIONS': {
            'provider': 'SQLNCLI10',
            'extra_params': 'DataTypeCompatibility=80;MARS Connection=True;',
        },
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:42:03.527

是否在“settings.py”文件中设置了“use_mars=True”？

[http://django-mssql.readthedocs.org/en/latest/settings.html](http://django-mssql.readthedocs.org/en/latest/settings.html)

如果这不起作用，我有一个问题：您在 SQL Server 中的选择是否涉及带有触发器的表（事务 SQL 脚本） - 在这种情况下，SQL Server 将使用静态游标而不是 firehose 游标（这是什么你需要）因此你会得到你的错误。尝试摆脱触发器，使用 SQL Server 中的一些视图并从中选择而不是表。

# machine-learning - 如何在 Weka 中规范化文档的词频

> ID：12155550
> 
> 赞同：1
> 
> 时间：2012-08-28T08:36:19.133
> 
> 标签：machine-learning, weka

在 Weka 中，[StringToWordVector](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/StringToWordVector.html)类定义了一个名为**setNormalizeDocLength**的方法。它标准化文档的词频。我的问题是：

1.  “规范化文档的词频”是什么意思？
2.  威卡是怎么做到的？

一个实际的例子对我有最大的帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:49:32.873

查看 Weka 源代码，这是进行规范化的方法：

```
private void normalizeInstance(Instance inst, int firstCopy) throws Exception 
{
    double docLength = 0;

    if (m_AvgDocLength < 0) 
    {
        throw new Exception("Average document length not set.");
    }

    // Compute length of document vector
    for(int j=0; j<inst.numValues(); j++) 
    {
        if(inst.index(j)>=firstCopy) 
        {
            docLength += inst.valueSparse(j) * inst.valueSparse(j);
        }
    }     
    docLength = Math.sqrt(docLength);

    // Normalize document vector
    for(int j=0; j<inst.numValues(); j++) 
    {
        if(inst.index(j)>=firstCopy) 
        {
            double val = inst.valueSparse(j) * m_AvgDocLength / docLength;
            inst.setValueSparse(j, val);
            if (val == 0)
            {
                System.err.println("setting value "+inst.index(j)+" to zero.");
                j--;
            }
        }
    }
} 
```

看起来最相关的部分是

```
double val = inst.valueSparse(j) * m_AvgDocLength / docLength;
inst.setValueSparse(j, val); 
```

所以看起来标准化是`value = currentValue * averageDocumentLength / actualDocumentLength`.

# asp-classic - 无法正确解析用户环境变量

> ID：12155552
> 
> 赞同：0
> 
> 时间：2012-08-28T08:36:26.260
> 
> 标签：asp-classic, environment-variables, user-profile, wsh

我正在尝试`%USERPROFILE%`使用`WScript.Shell`. 当我创建一个 vbs 文件并直接从 Windows 运行时，我得到了登录用户的正确路径，但是当我在 IIS 上本地计算机上运行的经典 ASP webapp 中使用它时，`C:\Documents and Settings\Administrator`它被解析为而不是登录用户`C:\Documents and Settings\Default User`.

我使用的代码如下

```
var oShell = new ActiveXObject("Wscript.Shell");
var userPath = oShell.ExpandEnvironmentStrings("%USERPROFILE%"); 
```

`USERPROFILE`从 webapp 检索值时，是否需要检查权限/设置以获取正确值？

PS：我正在使用javascript进行编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:08:02.640

ASP 不知道登录的用户是什么，它运行在一个通用的匿名 Internet 用户帐户下。

如果您希望 IIS 知道当前用户，则必须删除匿名用户对您站点目录的权限。这将强制 IIS 向您的用户显示登录屏幕。
他们登录后，该会话的线程将在登录用户下运行（因此请确保该用户具有权限）。您现在可以使用 request.servervariables("AUTH_USER") 来获取用户名。

埃里克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:20:30.453

选择此站点的 Windows 身份验证（IIS 配置）而不是匿名这种安全性在 IIS 中称为 NTLM，并且使用文件夹和文件的标准 NTFS 权限授予权限，当使用 IE 作为浏览器时没有提示登录（单点登录），如果您使用 FF，则每个会话必须登录一次。这是一个 ASP 页面，它显示了服务器端可用的所有变量。如果需要，您可以将这些变量传递给您的客户端代码，最好不要使用 ActiveX 进行身份验证（并且在大多数情况下）。

```
'file servervaraibles.asp
<html>
<%@language=VBScript%>
<%
  With Response
    .Expires=-1
    .Clear
  End With
  dim teller
  response.write "<h1>Servervariables</h1>"
  response.write "<table>"
  teller = 1
  for each subkey in Request.Servervariables
    response.write "<tr><td>"
    response.write teller
    response.write "</td><td>"
    response.write (Request.Servervariables.Key(teller))
    response.write "</td><td>"
    response.write (Request.Servervariables.Item(teller))
    response.write "</td></tr>"
    teller = teller + 1 
  next
  response.write "</table>"
  response.write request.servervariables("path_translated") & "<br>"
  response.write "USER cookie:" & Request.Cookies("USER") & "<br>"
  response.write "USER Sessionvariable:" & Session("USER") & "<br>"
%>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T14:59:12.990

我认为您要问的问题的答案是：不。

ASP 不能按需加载和卸载用户配置文件，甚至可以假设服务器对每个用户都有一个配置文件（每个用户必须至少以交互方式登录到服务器一次）。

您可以做的最好的事情是关闭应用程序的匿名访问，以便服务器变量“AUTH_USER”包含该用户唯一的用户名。为可能出现在 AUTH_USER 中的每个域创建一个公共网络共享（您可能只有一个）。在该网络下为每个用户创建一个共享文件夹并授予适当的访问权限。

现在您可以解析 AUTH_USER 并确定可以为当前请求用户加载和保存文件的根路径。

# android - Android，字体未复制到新油漆中

> ID：12155553
> 
> 赞同：0
> 
> 时间：2012-08-28T08:36:28.863
> 
> 标签：android, paint, typeface

在以下代码中：

```
Paint tPaint = new Paint(aPaint);
tPaint.setTypeface(typeFace);
aPaint =  new Paint(tPaint); 
```

观察到 typeFace 设置为 tPaint，但是 typeFace 没有被复制到 aPaint 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:06:40.307

这不完全是一个答案，而是一种解决方法。

我替换了： aPaint = new Paint(tPaint); 与：aPaint = newPaint(tPaint); 并创建了方法：

```
 public Paint newPaint(Paint fromPaint){
      Typeface tf = fromPaint.getTypeface();
      Paint rPaint = new Paint(fromPaint);
      rPaint.setTypeface(tf);
      return rPaint;
  } 
```

这行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:14:13.017

好的，这就是我的代码的样子。看看能不能找到什么。

**主视图.java**

```
public class MainView extends View {
Context context;

public MainView(Context context) {
    super(context);
    this.context = context;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    Paint apaint = new Paint();
    apaint.setTextSize(100);
    apaint.setTypeface(Typeface.createFromAsset(context.getAssets(), "fonts/sketchblock.ttf"));

    canvas.drawText("Dusean", canvas.getWidth()/2, canvas.getHeight()/2, apaint);
    Paint tpaint = new Paint(apaint);

    canvas.drawText("Dusean", canvas.getWidth()/3, canvas.getHeight()/3, tpaint);
}
} 
```

**MainActivity.java**

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MainView(this));
}
} 
```

和资产文件夹**assets/fonts/font.ttf中的字体**

# emacs - 在左上角初始化 Emacs

> ID：12155557
> 
> 赞同：3
> 
> 时间：2012-08-28T08:37:06.617
> 
> 标签：emacs, screen, frame, init

如何在左上角启动emacs填充一半屏幕？改变帧大小是可行的，但是起始位置呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:40:40.357

我不确定其他操作系统，但至少在 Linux 中，您可以使用`-g`(geometry) 选项启动 emacs：

```
emacs -g WIDTHxHEIGHT+XPOS+YPOS 
```

# c# - 在 MonoTouch 中绑定本地库：可行，但子类化时为什么会出现奇怪的结果？缺少 NullAllowed 属性？

> ID：12155558
> 
> 赞同：1
> 
> 时间：2012-08-28T08:37:08.097
> 
> 标签：c#, objective-c, ios, xamarin.ios, subclass

单触 5.2.13

我正在通过 MonoTouch 绑定使用本机 ObjectiveC 库。该库公开了一个视图控制器。一切正常，直到我子类化视图控制器。然后，我得到 NULL 引用异常或部分 UI 未显示。

我已阅读有关 btouch 工具和“-e”选项的问题。但据我所见，该选项不存在：

> 工具 /Developer/MonoTouch/usr/bin/btouch 使用参数开始执行：/d:DEBUG ApiDefinition.cs /s:StructsAndEnums.cs /tmpdir:obj/Debug/ios/ /sourceonly:obj/Debug/ios//sources。列表

子类（在这个例子中）没有添加任何功能，但使用它就足以打破绑定：

```
// Works.
var contr = new NativeController();

// Fails with various errors. Throws a NULL reference exception about some UIPopoverController being NULL, for instance.
public class SubclassedController : NativeController
{
  public SubclassedController() : base()
  {
  }
}

var contr = new SubclassedController(); 
```

我发现将 [NullAllowed] 添加到属性解决了 NULL 引用异常。

本机控制器公开一个属性`(nonatomic, strong) UIPopoverController *popoverController`。这被绑定为`UIPopoverController PopoveController {get; set;}`- 在`NullAllowed`这里添加解决了这个问题。

但现在我面临图像未显示的问题，并且没有明显的例外。

我认为这些问题也源于使用子类版本时某些内容为 NULL 的事实，但本机代码似乎对 NULL 做出反应并优雅地处理它。

这导致三个问题：

*   为什么使用子类化时行为不同？MonoTouch 正在做些什么来实现这一目标？在我使用派生类的情况下，为什么我会得到一个 NULL 引用？无论哪种情况，我都没有触及 UIPopoverController。
*   如果没有错误，我如何找出问题所在以及如何解决？
*   除了 NullAllowed 之外，还有什么需要注意的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:38:18.543

这个具体问题原来是两件事：

*   a 的缺失`NullAllowed`属性`UIPopoverController`
*   MonoTouch 5.2.13 中的一个错误，**与绑定无关，**但与 CocoaTouch 相关。具体原因不明。

MonoTouch 5.3.6 一切正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T12:56:13.077

> 为什么使用子类化时行为不同？

可能有几个原因，包括实例根据其类名以不同方式初始化自身。在 C#（非常少见，使用继承）或 Objective-C（委托通常用于自定义行为）中，这并不难。

您需要参考本机库的[文档](http://pspdfkit.com/documentation/Classes/PSPDFViewController.html)、[头文件](https://github.com/steipete/PSPDFKit-Demo/blob/master/PSPDFKit.framework/Versions/A/Headers/PSPDFViewController.h#L325)、[示例](https://github.com/steipete/PSPDFKit-Demo/tree/master/Examples/PSPDFKitExample)和产品支持，以了解子类化的工作原理。

> MonoTouch 正在做些什么来实现这一目标？

我认为它与 MonoTouch 无关。MonoTouch 可`btouch`帮助您为 Objective-C 库创建绑定。这与Xamarin 用于进行所有 iOS 绑定的工具**相同。**

还是不确定？编写一个小的 Objective-C 示例来做同样的事情。将结果与 MonoTouch 版本进行比较。

结果不同？用（C# 和 ObjC）测试用例填写[错误报告](http://bugzilla.xamarin.com)，我们将检查发生了什么（如前所述，我们有充分的理由确保`btouch`没有错误 ;-)

> 在我使用派生类的情况下，为什么我会得到一个 NULL 引用？无论哪种情况，我都没有触及 UIPopoverController。
> 
> 如果没有错误，我如何找出问题所在以及如何解决？
> 
> 除了 NullAllowed 之外，还有什么需要注意的？

在这个阶段，您正在运行您绑定的库的本机代码。您需要遵循的*特定*规则是您可以通过以下方式找到的规则：

*   阅读图书馆文档；
*   阅读库源（如果可用）、标题和示例；
*   因为`[NullAllowed]`您可以测试（例如单元测试）是否`null`允许（例如它会崩溃）；

此外，移植现有示例既是一个很好的学习练习（库 API），也是测试绑定错误（例如选择器中的拼写错误、错误参数......）的快速方法。

# android - 没有 CookieManager 的 Android cookie

> ID：12155563
> 
> 赞同：0
> 
> 时间：2012-08-28T08:37:24.633
> 
> 标签：android, cookies, session-cookies

我知道这里发布了一个类似的问题：[Android Session cookies without using CookieManager](https://stackoverflow.com/questions/10502066/android-session-cookies-without-using-cookiemanager) 但是，我无法让它工作。

```
 URL urlObj = new URL(urlPath);
    conn = (HttpURLConnection) urlObj.openConnection();

    if (urlPath.toLowerCase().startsWith("https:")) {
        initializeHttpsConnection((HttpsURLConnection) conn);
    }
    conn.setRequestMethod("POST");

        conn.setDoInput(true);
        conn.setDoOutput(true);
        conn.connect();
        // Send body data
        os = conn.getOutputStream();
        os.write(bodyData);
        // Must flush and close to make sure all the data is sent.
        os.flush();
        os.close();
        // Get response
        in = conn.getInputStream();
        System.out.println("Initial set of cookies:");

        String cookie = conn.getRequestProperty("Cookie"); 
```

// Map> rp = conn.getRequestProperties(); if (cookie != null && cookie.length() > 0) { _cookie = cookie; Log.v("cookie2", _cookie); }

“cookie”始终为空。

但是，如果我确实包含 CookieManger（并使用 2.3.3+ 运行它），那么 cookie 具有所需的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:59:30.443

试试这个 http url con：

```
 while ((headerfields = connection.getHeaderField(i)) != null) {
          String key = connection.getHeaderFieldKey(i);
          if (key.equalsIgnoreCase("SET-COOKIE")) {
         ssss= (((key==null) ? "" : key + ": ") + headerfields);}
          i++;

          } 
```

# ios - 我的朋友可以在不越狱的情况下运行我的 iPhone 应用程序吗？

> ID：12155565
> 
> 赞同：0
> 
> 时间：2012-08-28T08:37:28.567
> 
> 标签：ios, xcode

我已经完成了我的 iOS 应用程序，但我不想提交到 App Store。我应该将它传递给我的朋友并在没有越狱的情况下在他的 iPhone 上运行吗？我听说它有一些特定的证书允许其他人运行它。

我有开发者帐户。

如果有一些方法可以在法律上实现它，请您提供一些材料。

## 编辑我的问题：

在 iPhone 上运行应用程序以使用我的远程设计器进行测试的正确方法是什么？也就是说，他可以通过 itune 传输应用程序，而不是 xcode。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:39:02.153

您必须在苹果开发者门户中注册他的 UDID。然后你可以通过 Xcode 在他的手机上安装你的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:54:19.000

您可以使用标准开发人员帐户证书（99 美元）分发您的应用程序，但仅限于 100 台设备。

以下是来自 Apple 的文档：

> 加入标准计划的 iOS 开发者还可以在 App Store 之外分发应用程序到多达 100 台不同的设备上，仅用于测试目的。要使用临时分发，请为您的应用创建一个存档，或让团队成员向您发送存档应用的 iOS 应用商店包 (.ipa)。
> 
> 您通过提供 .ipa 文件来分发您的应用程序，供用户安装在他们的设备上。由于您选择了有效的临时配置文件来存档应用程序，因此用户无需在其设备上安装配置文件，只需 .ipa 文件即可。用户可以使用 iTunes 在他们的设备上安装该应用程序。如果用户想使用 Xcode 在他们的设备上安装应用程序，请将存档共享为 .xcarchive 文件包。

详细文档可在[此处找到](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html#//apple_ref/doc/uid/TP40011159-CH31-SW1)

# objective-c - 自定义 Tableview 部分标题全黑

> ID：12155568
> 
> 赞同：0
> 
> 时间：2012-08-28T08:37:47.943
> 
> 标签：objective-c, uitableview, view, header

我有一个 tableview 部分标题，我想为其添加一个自定义视图。当 tableview 加载时，它显示为黑色，如下所示：[http://postimage.org/image/luluolc57/](http://postimage.org/image/luluolc57/)当我开始滚动时，标题“粘”到屏幕/导航栏的顶部，它变成了我想要的样子它 - 显示在这里[http://postimage.org/image/lek98nxud/](http://postimage.org/image/lek98nxud/)

基本上，我希望这个视图是透明的，上面有这个灰色的圆圈，所以 tableview 背景显示出来。这是各自的代码。

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    return [[SummaryView alloc] init];
}

- (void)drawRect:(CGRect)rect
{
    CGRect tintSize = CGRectMake(0.0, 0.0, self.bounds.size.height, self.bounds.size.height);
    [[UIImage imageNamed:@"Circular Tint.png"] drawInRect:tintSize];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:26:41.227

使用标准 UILabel 是否可以按预期工作？

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UILabel* label = [[UILabel alloc] init];
    [label setText:@"TEST"];
    return label;
} 
```

如果是这样，您可以慢慢尝试从那里过渡，看看问题出现在什么时候。它可能与您的自定义视图在分配和初始化时的大小有关。也许 initWithFrame 会解决它。

# java - 生成随机纬度

> ID：12155573
> 
> 赞同：0
> 
> 时间：2012-08-28T08:38:25.367
> 
> 标签：java, python, algorithm, google-maps

我需要它来对一些基于位置的 Web 服务进行压力测试。输入是 4 对纬度/经度，定义一个边界矩形或一组定义多边形的点。

是否有用于在地图上生成随机点的库/算法？（Python/Java）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:40:55.730

在java中你可以使用 Math.random()

例如，如果要生成 1 到 10 之间的随机数：

```
int randomNumGenerated = (int)(Math.Random()*10) + 1; 
```

您可以将其应用于您尝试轻松解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:54:35.713

看看这个问题，它处理在任意 4 点凸多边形内生成点。

[4 边多边形内的随机点](https://stackoverflow.com/questions/240778/random-points-inside-a-polygon)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:18:57.817

这篇关于[球体点拾取](http://mathworld.wolfram.com/SpherePointPicking.html)的文章比我解释的要好得多，为什么在区间 [0,1) 上生成 2 个随机数的简单方法会导致球体表面上的点分布不佳。这可能是也可能不是OP的关注点。

然而，OP 应该关心的是，在地球表面随机生成一组 4 个点可能需要一些棘手的编程。考虑由点 (lat/long, all in degree) 定义的“多边形”的情况`(+5,90),(+5,-90),(-5,-90),(-5,90)`。这个点`(0,0)`是在这个多边形里面还是在它外面？重点是什么`(0,180)`？生成这种模棱两可的多边形非常容易——欧几里得平面不能很好地模拟球体的表面。

我会采取完全不同的方法——随机生成 1 个点，然后生成经纬度偏移量。这将在表面上为您提供一个准矩形补丁，您可以调整偏移的生成以避免模糊多边形。如果要生成非准矩形的多边形，请生成一系列点和角度，当它们组合时，定义一个适合您需要的多边形。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T08:43:59.293

为什么不将纬度生成为 -90 到 90 之间的随机数，将经度生成为 -180 到 180 之间的另一个随机数？

那么你有一个观点。然后，你可以根据需要生成尽可能多的点来制作多边形。

`a`您可以在以下之间生成一个随机数`b`：

```
rnum = a + rnd() * (b-a); // where rnd() gives a number from 0 to 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T08:45:37.400

简单：在地图的边界矩形内，为每个点生成两个随机数，一个用于纬度，一个用于经度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T08:49:17.540

双经度 = Math.random() * Math.PI * 2;

或使用

```
public static LatLng random(Random r) {            

return new LatLng((r.nextDouble() * -180.0) + 90.0,
                                (r.nextDouble() * -360.0) + 180.0);
        } 
```

# filter - queryContext - 使用数字过滤 neo4j/lucene

> ID：12155578
> 
> 赞同：0
> 
> 时间：2012-08-28T08:38:37.973
> 
> 标签：filter, lucene, neo4j

我正在尝试使用数字范围过滤 neo/lucene 中的通配符查询。我想搜索具有以“rob”开头且年龄> 20的关键“actor”的所有节点（文档）：

```
WildcardQuery luceneQuery  = new WildcardQuery( new Term("actor", "rob*" ));
QueryContext qx = new QueryContext(luceneQuery)
            .numericRange("age", 20, null)
                .sortNumeric("age", true);      
IndexHits<Node> hits = lucene.query(qx); 
```

一旦我添加了数字范围，通配符查询就不起作用了，它只能按数字范围排序。是否可以同时结合通配符和数字？

谢谢，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:31:11.647

我怀疑您想使用 BooleanQuery 将 WildcardQuery 与数字范围查询结合起来。（我通常自己使用 QueryParser，而不是手动构建查询。）

对于您的示例查询，QueryParser 语法如下所示：

```
+actor:rob* +age:{20 TO 123} 
```

其中*+age:{20 TO 123}*要求 age > 20 AND age < 123（有据可查的最年长的人活到 122 岁）。“+”运算符强制这两个术语出现在文档中。

# ruby-on-rails - 耙子生成 - 不工作

> ID：12155580
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:38:46.277
> 
> 标签：ruby-on-rails, ruby, gem, rake, redmine

我正在安装 redmine1.4 并按照[这些步骤](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)操作。

我处于**安装过程的 5 个步骤中**

当我试图按照`rake generate_session_store`它的说法安装 rdoc 请让我知道我是否真的需要创建文档，我不能跳过它，**或者** 如果我需要创建文档，那么**如何安装**具有正确版本的 rdoc。

我在用 ：

```
 Rails 2.3.14
    RubyGems 1.8
    ruby 1.8.7 
```

![在此处输入图像描述](../Images/27199554e85b6057bcd380f8f50a337f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:51:23.147

这只是一条警告消息，您可以跳过它。即使您可以删除此 rdoc 消息也会消失

如果你有 redmine 的 trunk 版本，编辑 Gemfile 并添加以下行：

```
 gem "rdoc", ">= 2.4.2 
```

然后运行捆绑安装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:51:48.820

这不是一条错误消息，它只是一个烦人的警告 - 您的任务可能已经完成（如 in 的更新所示`session_store.rb`）`config/initializers`。

顺便说一句，这在我看来不像是一个编程问题，为什么不在[Redmine 论坛](http://www.redmine.org)上提问呢？

# wordpress - 在 Wordpress 中显示子页面和孙页面内容

> ID：12155581
> 
> 赞同：1
> 
> 时间：2012-08-28T08:38:53.947
> 
> 标签：wordpress, grandchild

我在 Wordpress 中有这样的页面结构：

*   主页
    *   主页子
        *   主页孙子
        *   主页孙子
        *   主页孙子
        *   主页孙子
    *   主页子
        *   主页孙子
        *   主页孙子
        *   主页孙子
        *   主页孙子

ETC...

我只想在主页上显示每个子页面/孙子页面的标题/内容，请有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:02:43.733

您应该使用`wp_list_pages()`函数，并指定一个*顶级祖先*和`2`.

```
<?php 

  $postid = get_the_ID();
  $topid = get_top_ancestor($postid); 

  $args = array(
          'depth'        => 2,
          'show_date'    => '',
          'date_format'  => get_option('date_format'),
          'child_of'     => $topid,
          'exclude'      => '',
          'include'      => '',
          'title_li'     => '',
          'echo'         => 1,
          'authors'      => '',
          'sort_order'   => 'ASC',
          'link_before'  => '',
          'link_after'   => '',
          'walker'       => '',
          'post_type'    => 'page',
          'post_status'  => 'publish' 
  ); ?>
<ul>
  <?php wp_list_pages( $args ); ?>
</ul> 
```

# javascript - 如何用按钮控制文本区域滚动？

> ID：12155586
> 
> 赞同：0
> 
> 时间：2012-08-28T08:39:05.507
> 
> 标签：javascript, html

我有一个文本区域，我有两个按钮。

我想在单击按钮时水平滚动 10 像素（向右），在单击第二个按钮时向左（也是 10 像素）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:48:15.640

可以使用 doScroll 方法。

[http://www.roseindia.net/javascript/method-doscroll.shtml](http://www.roseindia.net/javascript/method-doscroll.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:56:54.320

文本区域是什么意思？是`<textarea>`元素还是你只有一个 div 或一个带有一些文本的 span？无论如何，如果您只想向左或向右滚动内容，您可能希望`scrollLeft`在容器上使用属性。 `element.scrollLeft += 10;`将滚动到右侧。 `element.scrollLeft -= 10;`将滚动到左侧。

如果您对您正在尝试做的事情给出更清晰的描述，那么也许这里的人们可以更好地帮助您。

# javascript - 在 JS 中传递变量

> ID：12155589
> 
> 赞同：2
> 
> 时间：2012-08-28T08:39:21.893
> 
> 标签：javascript, jquery, html

首先我的代码：

html

```
 <div class="product_image m2" id="m2"><a href="#" id="10" class='multi2'>test..</a></div> 
```

JS

```
 $(document).ready(function(){

     $("#m2 a").bind("click", function() {
        var value = $( this ).attr( 'id' );
        alert(value);
        return false;
    });

    if ($(".multi2").length > 0){

           $(".multi2").yoxview({

                cacheImagesInBackground:true,
                skin: "top_menu",
                lang: "hu",

                images: [

                { media: { src: 'images/galeria/cella/image01'+value+'.JPG', title: 'Cella hegesztő' }},
                { media: { src: 'images/galeria/cella/image015.JPG', title: 'Cella hegesztő' }},
                { media: { src: 'images/galeria/cella/image013.JPG', title: 'Cella hegesztő' }},

            ]
            });
    }

 }); 
```

所以，我使用 Yoxview。Multi2 类定义图像以及当用户单击链接（或缩略图）时。灯箱显示和幻灯片开始。

幻灯片每次都从 JS 中定义的第一个图像开始。我想改变这一点，所以我想将 m2 div 中的 href 的 id 传递给图像列表。

不幸的是我不能这样做。我尝试了这段代码，但是脚本崩溃了。如何将 VALUE 传递给图像列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:45:52.330

试试下面的代码，这可能会起作用，但不是一个好的解决方案。

**编辑**
顺便说一句，Kanishka 提到以数字开头的 ID 是不合法的。您可以将照片 ID 存储为自定义属性`<a href="#"... data-photoid="2" ... />`并使用[jquery data()](http://api.jquery.com/jQuery.data/) `$(this).data('photoid')`获取它。

```
$(document).ready(function(){
     $("#m2 a").bind("click", function() {
        var value = $( this ).attr( 'id' );
            if(!$(this).data('yoxed')) {
                 $(this).yoxview({

                    cacheImagesInBackground:true,
                    skin: "top_menu",
                    lang: "hu",

                    images: [
                       { media: { src: 'images/galeria/cella/image01'+value+'.JPG', title: 'Cella hegeszto' }},
                       { media: { src: 'images/galeria/cella/image015.JPG', title: 'Cella hegeszto' }},
                       { media: { src: 'images/galeria/cella/image013.JPG', title: 'Cella hegeszto' }}
                    ]
                  });
                 $(this).data('yoxed', true).trigger('click');
            }
        }

        return false;
    });
}); 
```

# iphone - SoundManager2 + iPhone - 不加载声音

> ID：12155590
> 
> 赞同：0
> 
> 时间：2012-08-28T08:39:25.290
> 
> 标签：iphone, ios, html, soundmanager2

我正在使用 SoundManager2 在 HTML5 页面上播放 MP3 文件。它在桌面 Safari 上运行良好，但在 iPhone 上不运行。我运行调试控制台，我看到它没有加载文件，它尝试加载文件，但在网络控制台中，文件的状态保持在“待处理”。这是我创建声音的方法：

```
obj = soundManager.createSound({
                        id: path,
                        url: BOOK_PATH +  path,
                        useHTML5Audio: true,
                        preferFlash: false,
                        onload: function () {
                            //do stuff
                        }
                    }); 
```

附上控制台截图。保持待定...![在此处输入图像描述](../Images/e52e68cca11dc13677c43b00da59a841.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:52:33.483

检查[@Tomasz Nazar 的回答](https://stackoverflow.com/questions/11791949/soundmanager2-on-iphone-sound-not-playing-on-jquery-load)soundmanager2-on-iphone-sound-not-playing-on-jquery-load 并检查资源。希望有帮助

# android - 是否可以将air应用程序集成到本机Android应用程序中

> ID：12155597
> 
> 赞同：1
> 
> 时间：2012-08-28T08:39:41.863
> 
> 标签：android, air

Adobe Flash Builder 可以构建一个空中项目到 apk 文件。

但是如何从我的原生应用程序启动一个空中应用程序？

我可以在两个应用程序之间进行通信吗？

我想将 AIR 项目放在我的本机应用程序中并构建为**一个 apk 文件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:43:45.043

不同应用程序/活动之间的通信可以通过 Intents 和 Intent Filters 实现：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

# c++ - C++ 跨文件夹包括失败

> ID：12155598
> 
> 赞同：1
> 
> 时间：2012-08-28T08:39:44.057
> 
> 标签：c++, include

我有一个项目，它有两个源文件夹（main 和 lib）。它生成一个共享库和一个可执行文件。它目前是这样构建的：

*   将两个文件夹中的所有文件复制到一个新的临时文件夹中
*   运行 lib_makefile
*   运行 main_makefile
*   复制二进制文件
*   删除临时文件夹

这让我觉得这是一种奇怪的做事方式，所以我尝试通过添加`-I../main`到 lib_makefile 来就地构建每个（反之亦然）。不幸的是，这似乎不起作用。

说明性示例： foo.cpp（在 lib 中）包括 bar.h（在 main 中），其中包括 baz.h（在 lib 中）。

当我尝试编译共享库时，它在 main/ 中正确定位 bar.h，但随后以“没有这样的文件或目录”退出，声称它找不到 baz.h，即使 baz.h 与lib_makefile！

所有包含都采用#include "xxx.h" 格式（即在包含语句中没有相对路径）。

有没有办法让它工作？我觉得我一定错过了一些明显的东西..

（注意：我无法修改#includes，因为其他人仍然以复制一切的方式构建它）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:52:48.783

您还应该将类似`-I../lib`（或任何您的库路径）添加到库的 makefile 中。

这样做的原因是预处理器查找相对于*当前*文件所在目录的包含文件，而不是*原始*文件所在的目录。

# regex - sed 替换为正则表达式

> ID：12155600
> 
> 赞同：3
> 
> 时间：2012-08-28T08:39:54.087
> 
> 标签：regex, file-io, sed

我无法获得一个简单的正则表达式替换来使用 sed。这是我面临的例子。

我正在尝试替换文件中的行，如下所示：

```
select * from mytable where mytable.s_id=274
select * from mytable where mytable.s_id=275
select * from mytable where mytable.s_id=276
select * from othertable where othertable.id=?
select * from table3 where table3.name=? 
```

对此：

```
select * from mytable where mytable.s_id=?
select * from mytable where mytable.s_id=?
select * from mytable where mytable.s_id=?
select * from othertable where othertable.id=?
select * from table3 where table3.name=? 
```

我现在正在使用 sed：

```
cat log | sed 's/where mytable\.s_id=[0-9]+/where mytable.s_id=/g' | sort 
```

但是我在 sed ( `'s/where mytable\.s_id=[0-9]+/where mytable.s_id=/g'`) 中使用的正则表达式并没有取代任何东西。

我正在阅读尽可能多的文档，但是我阅读的所有内容都不同，做事方式不同，所以我有点迷茫。使用 sed 进行正则表达式替换的规范方法是什么，在我的特殊情况下会是什么样子？

*注意*：我简化了我面临的问题。我*确实*想使用 sed（最终学会使用它）并且我*确实*想通过管道传输输入和输出（而不是就地编辑文件），因为我使用的命令行实际上比这更复杂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:46:32.053

引用`+`：

```
sed 's/where mytable\.s_id=[0-9]\+/where mytable.s_id=?/g' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:49:17.073

```
cat log | sed 's/where mytable\.s_id=[0-9]\+/where mytable.s_id=?/g' 
```

只是 + 之前的反斜杠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:45:42.880

AFAIK，一些 sed 不知道`+`. 因此，试试这个：

```
 cat log | sed 's/where mytable\.s_id=[0-9]*/where mytable.s_id=?/g' | sort 
```

编辑：这`+`是一个 GNU 扩展，如果你使用它（并且你的 sed 知道它）你必须逃避它，就像 choroba 建议的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:57:31.620

如果您对 awk 感兴趣

```
awk -F= '{$2="=?";print}' temp 
```

在下面测试；

```
> cat temp
select * from mytable where mytable.s_id=275
select * from mytable where mytable.s_id=276
select * from othertable where othertable.id=?
select * from table3 where table3.name=?
> awk -F= '{$2="=?";print}' temp
select * from mytable where mytable.s_id =?
select * from mytable where mytable.s_id =?
select * from othertable where othertable.id =?
select * from table3 where table3.name =? 
```

# iphone - 如何使用corebluetooth连接两部iPhone？

> ID：12155602
> 
> 赞同：1
> 
> 时间：2012-08-28T08:40:03.780
> 
> 标签：iphone, ios5, ios6, core-bluetooth

我可以使用核心蓝牙框架连接两个 idevice 吗？我正在使用以下代码片段：

```
cBCM = [[CBCentralManager alloc] initWithDelegate:self queue:nil];

[cBCM scanForPeripheralsWithServices:nil options:nil];

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error {

} 
```

但代表们根本没有开火。任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:14:59.727

与其尝试开火，不如`didDiscoverCharacteristicsForService`尝试使用`didDiscoverPeripheral`which 将在所有外围设备上开火。仅当`didDiscoverChar...`您在外围设备属性中找到特定特征时才会触发。

当`didDiscover...`触发器你可以尝试打印出它的名字

```
// Discovered peripheral
- (void) centralManager:(CBCentralManager *)central 
didDiscoverPeripheral:(CBPeripheral *)peripheral 
  advertisementData:(NSDictionary *)advertisementData 
               RSSI:(NSNumber *)RSSI 
{
    // Print out the name parameter of the discovered peripheral
    @NSSlog ("Discovered peripheral: %@", [peripheral name];
} 
```

# javascript - Indexeddb：如何限制返回的对象数量？

> ID：12155603
> 
> 赞同：8
> 
> 时间：2012-08-28T08:40:06.723
> 
> 标签：javascript, indexeddb

我正在使用带有下限范围查询的游标。我找不到限制返回对象数量的方法，类似于数据库中的“LIMIT n”子句。

```
var keyRange = IDBKeyRange.lowerBound(''); 
```

它不存在吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T21:01:54.720

当您遍历结果时，您可以随时停止。像这样的东西应该工作：

```
var results = [];
var limit = 20;
var i = 0;

objectStore.openCursor().onsuccess = function (event) {
  var cursor = event.target.result;
  if (cursor && i < limit) {
    results.push(cursor.value);
    i += 1;
    cursor.continue();
  }
  else {
    // Do something with results, which has at most 20 entries
    console.log(results);
  }
}; 
```

此外，在您根据由序列号组成的键进行选择的特殊情况下，您可以使用 keyRange 显式地仅返回某个范围。但一般情况并非如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-07T17:10:19.927

一个重要的修复它的替换：

```
if (cursor && i < limit) { 
```

为了

```
if (cursor && results.length < limit) { 
```

请记住，它是一个异步调用，它可能同时在“结果”上添加元素，而“i”将没有正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T13:14:26.033

您甚至可以使用`IDBKeyRange.bound`功能在 indexedDB 中按范围搜索

```
IDBKeyRange.bound(keyValueFrom, keyValueTo, false, true); 
```

您可以设置开始值、结束值以及是否应在返回的项目中包含开始值和结束值。在我的情况下，我想要范围的第一个值，但是我想排除最后一个值。

有关 IDBKeyRange 的详细信息，请访问[W3C IndexedDB 页面](http://www.w3.org/TR/IndexedDB/#range-concept)

# java - Java中的列表列表列表列表

> ID：12155604
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:08.750
> 
> 标签：java, list, linked-list

我正在尝试存储西班牙民法典。

它是这样划分的：

```
Books

----Chapters

--------Articles 
```

或者

```
Books

----Titles

--------Chapters

-------------Articles 
```

或者

```
Books

----Titles

--------Chapters

-------------Sections

-----------------Articles 
```

书籍、标题、章节和章节必须存储 an`int identifier`和 a `String with the name of the book`,`title`等。元素的数量是可变的，因为例如，有些书籍的章节比其他书籍多。

`Articles`必须存储和`int identifier`和一个`String`与文章的内容。

我会欣赏一个结构的`declaration and usage`（输入数据，输出数据）示例，因为（对我而言）它有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:02:00.690

为此使用类呢？好吧，只要使用原始类型和容器，一切都是可行的，但为什么呢？那时它的可读性要差得多。

```
public class Book {
   private int id;
   private List<Chapter> chapters;
   private List<Title> titles;

   // getters/setters/constructor
}

public class Chapter {
   private int id;
   private List<Section> section;
   private List<Article> articles;

   // getters/setters/constructor
}

public class Title {
   private int id;
   private List<Chapter> chapters;

   // getters/setters/constructor
}

public class Section {
   private int id;
   private List<Article> articles;

   // getters/setters/constructor
} 
```

对我来说这是最简单的方法。The Elite Gentleman 的版本稍微复杂一些，但另一方面对领域模型的更改（添加新类型或更改关系）更加健壮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:50:01.477

而是创建节点的树结构，如下所示（这是一个可以帮助您的伪代码）：

```
public interface Node {
    public int getId();
    public String getName();

    public void saveTo(SaveVisitor visitor);
}

public abstract class AbstractNode {
    public List<Node> children;

    //Getters
    public List<Node> getChildren() { return children; }

    public void addChild(Node node) {
        if (children == null) {
            children = new ArrayList<Node>();
        }

        children.add(node);
    }

    @Override
    public void saveTo(SaveVisitor visitor) {
        if (visitor != null) {
            visitor.setId(getId());
            visitor.setName(getName());

            if (children != null) {
                for (Node child: children) {
                    child.saveTo(visitor);
                }
            }
        }
    }
}

public class Book extends AbstractNode {

}

public class Title extends AbstractNode {

}

public class Chapter extends AbstractNode {

}

public class Section extends AbstractNode {

}

public class Article extends AbstractNode {

} 
```

您`SaveVisitor`可以是任何接受`ID`,的访问者`Name`，并且子类可以是任何格式（XML、JSON、结构化纯文本、Excel 等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:53:47.917

我的建议是`Map<Index, Entry>`作为`Entry`文本（可能是一个简单的字符串或类似`Index`的东西）并存储*坐标*：

```
class Index {
  public int book, title, chapter, section, article;
} 
```

然后，您将实现`Index`可比较的 ( `equals()/compareTo()`) 并可能提供一些方法来导航到书 ( `getNextChapter(Index)`,`isLastArticle(Index)`等)

您还可以将这些辅助方法放入一个单独的类（如 a `CivilSpanishCodeHandler`）中以保持其干净。

此外，a`Tree`会浮现在脑海中，因为它是最自然的表示。尽管我建议您编写自己的树结构以将上述所有辅助方法实现到树中。

# c# - 使用助手/扩展方法调试关于方法的输出，其名称和操作时间

> ID：12155605
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:20.083
> 
> 标签：c#, debugging, extension-methods

我正在创建一种“某种”扩展方法，它将帮助我调试我未来的代码

有一个`Listview`带有列的“LV_MyAppLog”

```
record # , MethodName, Method's OutPut, Time. 
```

只是时间部分我无法决定哪个是最简单但不那么专业的实施方式。

这是我已经构建的代码：

```
 public int LogCounter = 1;
        public void AHLog_AddRecord(string FunctionName = "N/A", string FunctionOutPut = "N/A")
        {

            ListViewItem MyItem= new ListViewItem();
            MyItem.Text = LogCounter.ToString();
            Lview_AutomationLog.Items.Insert(0, MyItem);
            MyItem.SubItems.Add(FunctionName);
            MyItem.SubItems.Add(FunctionOutPut);
            //place for the time SubItem(column)
            LogCounter++;

        }

        public void AddToAppLog()
        {
            StackTrace st = new StackTrace(); 
            StackFrame sf = st.GetFrame(1); 
if(Completed)
            AHLog_AddRecord(sf.GetMethod().ToString().Replace("Void", ""), "Success")  ; 
else 
            AHLog_AddRecord(sf.GetMethod().ToString().Replace("Void", ""), "Fail")  ; 

        } 
```

我想添加给定方法发生的时间，

我应该这样做吗`DateTime now`：

```
DateTime now = DateTime.Now;
string theTime = now.ToString();// if so , What is the format to use to get only time h:m:s 
AHLog_AddRecord(sf.GetMethod().ToString().Replace("Void", ""), "Fail" , theTime) 
```

或者我应该使用我根本不熟悉的秒表（：但我很乐意通过我的这个代码示例来学习它，前提是它是更好的方法。

我可以在我的`AddToAppLog()`方法中使用正确的实现来要求正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:47:44.763

Datetime.Now.ToString() 没问题，但我也会记录毫秒。

```
.ToString("hh:mm:ss.fff") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:49:39.020

使用[Stopwatch](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)，如果你想测量一个时间范围，一个*执行**范围*。

相反，在您的情况下，您似乎只需要有关执行发生时间的信息。

`DateTime.Now`以最合适的格式免费填写。

# arrays - 在 Perl 的哈希中遍历哈希数组

> ID：12155607
> 
> 赞同：8
> 
> 时间：2012-08-28T08:40:34.117
> 
> 标签：arrays, perl, loops, hash

我在哈希中有一个哈希数组，如下所示：

```
$VAR1 = {
          'file' => [
                      {
                        'pathname' => './out.log',
                        'size' => '51',
                        'name' => 'out.log',
                        'time' => '1345799296'
                      },
                      {
                        'pathname' => './test.pl',
                        'size' => '2431',
                        'name' => 'test.pl',
                        'time' => '1346080709'
                      },
                      {
                        'pathname' => './foo/bat.txt',
                        'size' => '24',
                        'name' => 'bat.txt',
                        'time' => '1345708287'
                      },
                      {
                        'pathname' => './foo/out.log',
                        'size' => '75',
                        'name' => 'out.log',
                        'time' => '1346063384'
                      }
                    ]
        }; 
```

如何在循环中遍历这些“文件条目”并访问其值？复制是否更容易，`my @array = @{ $filelist{file} };`所以我只有一个哈希数组？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-28T08:44:33.290

无需复制：

```
foreach my $file (@{ $filelist{file} }) {
  print "path: $file->{pathname}; size: $file->{size}; ...\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T18:29:03.923

Perl 中没有哈希数组，只有标量数组。只有在这些标量是对数组或哈希的引用时才会出现一堆语法糖。

在您的示例中， $VAR1 保存对哈希的引用，其中包含对包含哈希引用的数组的引用。是的，有很多嵌套需要处理。另外，外部散列似乎有点没用，因为它只包含一个值。所以是的，我认为给内部数组一个有意义的名字肯定会让事情更清楚。它实际上不是“副本”：只复制了引用，而不是内容。以下所有内容都是等效的：

```
my @files = $VAR1 -> {file} # dereferencing with the -> operator
my @files = ${$VAR1}{file}  # derefencing with the sigil{ref} syntax
my @files = $$VAR1{file}    # same as above with syntactic sugar 
```

请注意，当使用 sigil{ref} 语法时，sigil 遵循与往常相同的规则：`%{$ref}`(or `%$ref`) 是 $ref 引用的哈希，但`%{$ref}`给定的元素`key`是`${$ref}{key}`(or `$$ref{key}`)。大括号可以包含返回引用的任意代码，而短版本只能在标量变量已经持有引用时使用。

一旦您对哈希的引用数组位于变量中，迭代它就像：

```
for (@files) {
    my %file = %$_;
    # do stuff with %file
} 
```

见： http: [//perldoc.perl.org/perlref.html](http://perldoc.perl.org/perlref.html)

# .htaccess - 301 重定向 htaccess 问题

> ID：12155614
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:52.323
> 
> 标签：.htaccess, redirect

我想为我的网站 URL 做一个 301 重定向，比如 [http://example.com/old-folder/allhtmlfiles.html](http://example.com/old-folder/allhtmlfiles.html)到 [http://example.com/new-folder/allhtmlfiles.html](http://example.com/new-folder/allhtmlfiles.html)。

旧文件夹下的所有 html 文件都应该可以通过 /new-folder/ 访问

我该怎么做，我尝试了一些我在这里找到的解决方案，但他们给了我 404 错误。

谢谢你的帮助。

苏西·马茨

* * *

我相应地更改了我的 .htaccess 但不起作用。我想我在上一个问题中没有清楚地提到slug change。

这是这个 wordpress 网站上的实际链接，

[http://dland.in/sale/land-in-madikeri-karnataka-state-india-1750-acre/](http://dland.in/sale/land-in-madikeri-karnataka-state-india-1750-acre/)

现在文件夹名称已更改，这是新链接

[http://dland.in/kerala-real-estate-sale/land-in-madikeri-karnataka-state-india-1750-acre/](http://dland.in/kerala-real-estate-sale/land-in-madikeri-karnataka-state-india-1750-acre/)

**第二个蛞蝓（land-in-madikeri-karnataka-state-india-1750-acre）可以是任何**

所以我想获得一个 301 重定向到新链接。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T17:20:15.183

将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^old-folder/(.*)$ /new-folder/$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:32:55.427

我对您发布的 htaccess 的内容进行了一些更改（删除了重复的重写基础并首先移动了销售规则），试试这个：

```
ErrorDocument 404 /index.php?error=404 

RewriteEngine On 

RewriteBase /

RewriteRule ^sale/(.*)$ dland.in/kerala-real-estate-sale/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . index.php [L] 
```

# objective-c - 新对象的 NSFetchedResultsController

> ID：12155615
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:52.497
> 
> 标签：objective-c, ios, core-data, uitableview, nsfetchedresultscontroller

我有带有静态可编辑单元格的 UITableViewController。在我的 UITableViewController 中，我创建了 CoreData 对象，如下所示：

```
- (User*)user {
    if (_user == nil) {
        _user = [NSEntityDescription insertNewObjectForEntityForName:TABLE_USER inManagedObjectContext:self.managedObjectContext];
        NSError* error;
        [self.managedObjectContext save:&error];
        if (error != nil) {
            abort();
        }
    }
    return _user;
} 
```

我想在 NSFetchedResultsController 中获取将在表中显示其字段的对象，然后保存该对象。我正在尝试做：

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (_fetchedResultsController != nil) {
        return _fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:TABLE_USER_PROFILE inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"lastName" ascending:NO];
    NSArray *sortDescriptors = @[sortDescriptor];

    NSPredicate* pred = [NSPredicate predicateWithFormat:@"%@ = %@", TABLE_USER, self.user];
    [fetchRequest setPredicate:pred];

    [fetchRequest setSortDescriptors:sortDescriptors];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:TABLE_USER];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        abort();
    }

    return _fetchedResultsController;
} 
```

但它没有用。我得到空的 fetchedResultsController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T12:35:14.857

如果`self.user`是 a`NSManagedObject`并且您查询一个`User`实体，您可以尝试编辑您的谓词，如下所示：

```
NSPredicate* pred = [NSPredicate predicateWithFormat:@"self == %@", self.user]; 
```

希望有帮助。

PS如果我的回答不起作用，请尝试提供一些其他详细信息（请参阅我的评论）

# xml - flex中的可变声音

> ID：12155617
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:53.577
> 
> 标签：xml, variables, apache-flex, audio

我有带有两个视图的 Flex 移动应用程序：
**viewONE**具有`s:list`组件，因此当用户单击列表上的一个项目时，会调用**viewTWO**并包含所选项目的详细信息：它显示从**XML**文件中提取的图像和文本 - 这一切都很完美但是没有声音。从 XML 文件加载声音不起作用..所以当我这样做时`[@Embed(source="{data.sound}")]`它不起作用。
有没有办法解决？还是我必须为我的 20 个项目创建 20 个不同的视图`[@Embed(source="sound1.mp3")]`等等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:38:10.897

你的想法是错误的。使用类（或单例）播放声音。还将所有声音嵌入该类中。

例如：

```
class MySoundManager
{

    [Embed(.....)]
    public static var SOUND_1:Class;

    [Embed(.....)]
    public static var SOUND_2:Class;

    //  ... sound 3 and so on

    // use static variables
    private static var soundCh:SoundChannel /// ....

    public static function playSound(theSound:Class):void
    {
         //here put the logic for stopping any running sound and start playing "theSound"
    }
} 
```

用法：

```
// in any of your views, for ex for playing 1st sound
MySoundManager.playSound(MySoundManager.SOUND_1); 
```

# css - 限制按钮的可点击区域

> ID：12155619
> 
> 赞同：0
> 
> 时间：2012-08-28T08:40:58.780
> 
> 标签：css, ruby-on-rails, checkbox

我有以下复选框，上面有一个类，以备将来使用

```
.class{onClick: "doSomething()"}= check_box @var, :var 
```

但是有一个问题。让我们假装|AAAA| 是按钮，如果我点击 ==.. 它仍然会触发 doSomething()。

```
|AAAA| ==================== 
```

我试过了

```
display: block 
```

在css中，但它不起作用

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:51:16.727

这是因为标签和输入区域都包含在`.class`.

相反，通过 js 指定您只希望复选框输入触发您的 JS 操作，而不是标签。

`= check_box @var, :var, id: 'my-id'`

然后：

```
:javascript

   $("input#my-id").click(function() {
       doSomething();
   }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:52:23.483

什么是生成的html？

看起来您已将`onClick`处理程序设置为 external `div`，而不是复选框。

（我假设你有理由在不显眼的地方使用内联 javascript）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:56:18.180

这可能有两个原因：

1：您在复选框周围有一个标签标签以及包含 ==================== 的元素（正如您在问题中所说）

2：您可能没有将类赋予复选框，而是绑定到另一个包含复选框的元素。

# javascript - 如何在 IE 中单击后退按钮时使表单值相同

> ID：12155623
> 
> 赞同：2
> 
> 时间：2012-08-28T08:41:21.260
> 
> 标签：javascript, jquery, html, back-button

如何在 IE 中单击后退按钮时使表单值相同？

当我点击后退按钮时

```
<input type="button" value="Back" onClick="history.go(-1);return true;" class="back-button"> 
```

它不会在 IE 中显示表单值。

当我提交表单时，我有一个带有一些输入的表单转到下一页我有一个后退按钮单击时我进入表单页面但是我有字段的表单上没有值这是 IE 的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T15:53:32.000

在页面之间移动时，通常不会保存表单值。如果您的服务器配置支持页面缓存，则可能是这样。然而，另一种方法是将表单值保存到 cookie 或更新的 html 5 会话存储中。这可以通过触发表单标题中称为 onsubmit 的函数来完成。

IE

```
<form id="[form id]" name="[form name]" action="[some action]" method="[GET or POST]" onsubmit="saveFormValues();"> 
```

在这种情况下，当用户单击提交按钮继续时，这些值将保存到本地浏览器存储中（本质上是本地缓存）。

当单击返回按钮时，页面的 onload 事件可以检查这些值，然后将它们重新分配给适当的字段，从而保留用户先前输入的选项、选择和输入。

要设置 HTML 5 会话存储变量：

```
if(typeof(sessionStorage)!=="undefined")
{
    sessionStorage.[Variable Name]=$([Field Name]).val();
} 
```

返回页面时：

```
if(typeof(sessionStorage)!=="undefined") {
{
    $([Field Name]).val(sessionStorage.[Variable Name]);
} 
```

最后一个块将检索保存的状态值。最终提交完成后，请确保您致电：

```
sessionStorage.clear(); 
```

这将清除会话存储变量，并使表单在用户重新访问页面时显示为新表单。

希望这可以帮助。

# opengl-es - OpenGL ES 2.0 中的 glFenceSync 替代方案

> ID：12155624
> 
> 赞同：2
> 
> 时间：2012-08-28T08:41:24.983
> 
> 标签：opengl-es, synchronization, opengl-es-2.0, gpu

我看到`glFenceSync`OpenGL ES 2.0 中不存在它，它仅在 OpenGL ES 3.0 中添加。

除了残酷的力量之外，OpenGL ES 2.0 是否提供 CPU 和 GPU 之间同步的任何替代方案`glFinish`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:12:28.063

您在 OpenGL ES 2.0 中有不同的调用，可以深入了解有关 GL 的不同问题，但主要是，您只剩下了`glFinish`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T18:28:09.163

在`glext.h`.

```
GL_API GLsync glFenceSyncAPPLE(GLenum condition, GLbitfield flags) __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_6_0); 
```

我很确定这就是你想要的。无论如何仅适用于 iOS 6.0 或更高版本。

# spring - 将 Spring 依赖项注入 JPA EntityListener

> ID：12155632
> 
> 赞同：72
> 
> 时间：2012-08-28T08:42:05.143
> 
> 标签：spring, jpa, dependency-injection, spring-roo, entitylisteners

我正在尝试**将 Spring 依赖**项注入**JPA EntityListener**。这是我的监听器类：

```
@Configurable(autowire = Autowire.BY_TYPE, dependencyCheck = true)
public class PliListener {

    @Autowired
    private EvenementPliRepository evenementPliRepository;

    @PostPersist
    void onPostPersist(Pli pli) {
        EvenementPli ev = new EvenementPli();
        ev.setPli(pli);
        ev.setDateCreation(new Date());
        ev.setType(TypeEvenement.creation);
        ev.setMessage("Création d'un pli");
        System.out.println("evenementPliRepository: " + evenementPliRepository);
        evenementPliRepository.save(ev);
    }

} 
```

这是我的实体类：

```
@RooJavaBean
@RooToString
@RooJpaActiveRecord
@EntityListeners(PliListener.class)
public class Pli implements Serializable{
... 
```

但是，我的依赖项（即`evenementPliRepository`）**始终为 null**。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-03T02:27:09.303

在无状态 bean 上注入依赖项的一个技巧是将依赖项定义为“静态”，创建一个 setter 方法以便 Spring 可以注入依赖项（将其分配给静态依赖项）。

将依赖声明为静态。

```
static private EvenementPliRepository evenementPliRepository; 
```

创建一个方法，以便 Spring 可以注入它。

```
@Autowired
public void init(EvenementPliRepository evenementPliRepository) 
{
    MyListenerClass.evenementPliRepository = evenementPliRepository;
    logger.info("Initializing with dependency ["+ evenementPliRepository +"]"); 
} 
```

更多详情请访问：[http ://blog-en.lineofsightnet.com/2012/08/dependency-injection-on-stateless-beans.html](http://blog-en.lineofsightnet.com/2012/08/dependency-injection-on-stateless-beans.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-11-15T15:35:10.447

这实际上是一个老问题，但我找到了一个替代解决方案：

```
public class MyEntityListener {
    @Autowired
    private ApplicationEventPublisher publisher;

    @PostPersist
    public void postPersist(MyEntity target) {
        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);

        publisher.publishEvent(new OnCreatedEvent<>(this, target));
    }

    @PostUpdate
    public void postUpdate(MyEntity target) {
        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);

        publisher.publishEvent(new OnUpdatedEvent<>(this, target));
    }

    @PostRemove
    public void postDelete(MyEntity target) {
        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this);

        publisher.publishEvent(new OnDeletedEvent<>(this, target));
    }
} 
```

可能不是最好的，但比没有 AOP + 编织的静态变量更好。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-01-02T12:52:28.847

**我用@Component**注解对监听器进行了注解，然后创建了一个**非静态setter**来分配注入的Spring bean，效果很好

我的代码看起来像：

```
@Component
public class EntityListener {

    private static MyService service;

    @Autowired
    public void setMyService (MyService service) {
        this.service=service;
    }

    @PreUpdate
    public void onPreUpdate() {

        service.doThings()

    }

    @PrePersist
    public void onPersist() {
       ...
    }

} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-08-27T08:59:47.407

从 Spring V5.1（和 Hibernate V5.3）开始，它应该开箱即用，因为 Spring 注册为这些类的提供者。查看[SpringBeanContainer的文档](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/orm/hibernate5/SpringBeanContainer.html)

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2015-10-09T14:57:06.133

那么这个解决方案呢？

```
@MappedSuperclass
@EntityListeners(AbstractEntityListener.class)
public abstract class AbstractEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    private Long id;

    @Column(name = "creation_date")
    private Date creationDate;

    @Column(name = "modification_date")
    private Date modificationDate;

} 
```

然后听者...

```
@Component
public class AbstractEntityListener {

    @Autowired
    private DateTimeService dateTimeService;

    @PreUpdate
    public void preUpdate(AbstractEntity abstractEntity) {
        AutowireHelper.autowire(this, this.dateTimeService);
            abstractEntity.setModificationDate(this.dateTimeService.getCurrentDate());
    }

    @PrePersist
    public void prePersist(AbstractEntity abstractEntity) {
        AutowireHelper.autowire(this, this.dateTimeService);
        Date currentDate = this.dateTimeService.getCurrentDate();
        abstractEntity.setCreationDate(currentDate);
        abstractEntity.setModificationDate(currentDate);
    }
} 
```

还有帮手...

```
 /**
     * Helper class which is able to autowire a specified class. It holds a static reference to the {@link org
     * .springframework.context.ApplicationContext}.
     */
    public final class AutowireHelper implements ApplicationContextAware {

        private static final AutowireHelper INSTANCE = new AutowireHelper();
        private static ApplicationContext applicationContext;

        private AutowireHelper() {
        }

        /**
         * Tries to autowire the specified instance of the class if one of the specified beans which need to be autowired
         * are null.
         *
         * @param classToAutowire the instance of the class which holds @Autowire annotations
         * @param beansToAutowireInClass the beans which have the @Autowire annotation in the specified {#classToAutowire}
         */
        public static void autowire(Object classToAutowire, Object... beansToAutowireInClass) {
            for (Object bean : beansToAutowireInClass) {
                if (bean == null) {
                    applicationContext.getAutowireCapableBeanFactory().autowireBean(classToAutowire);
                }
            }
        }

        @Override
        public void setApplicationContext(final ApplicationContext applicationContext) {
            AutowireHelper.applicationContext = applicationContext;
        }

        /**
         * @return the singleton instance.
         */
        public static AutowireHelper getInstance() {
            return INSTANCE;
        }

    } 
```

为我工作。

资料来源： http: [//guylabs.ch/2014/02/22/autowiring-pring-beans-in-hibernate-jpa-entity-listeners/](http://guylabs.ch/2014/02/22/autowiring-pring-beans-in-hibernate-jpa-entity-listeners/)

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2013-05-08T18:23:38.320

我开始走下使用 AOP 将 spring bean 注入实体侦听器的路径。经过一天半的研究和尝试不同的事情，我发现了这个[链接](http://www.simonellistonball.com/technology/injecting-dependencies-into-a-jpa-entitylistener)，上面写着：

> 无法将 spring 托管 bean 注入 JPA EntityListener 类。这是因为 JPA 侦听器机制应该基于无状态类，因此这些方法实际上是静态的，并且与上下文无关。... 再多的 AOP 也救不了你，没有任何东西被注入到代表侦听器的“对象”中，因为实现实际上并不创建实例，而是使用类方法。

在这一点上，我重新组合并偶然发现了 EclipseLink [DescriptorEventAdapter](http://www.eclipse.org/eclipselink/api/2.0/org/eclipse/persistence/descriptors/DescriptorEventAdapter.html)。使用这些信息，我创建了一个扩展描述符适配器的监听器类。

```
public class EntityListener extends DescriptorEventAdapter {
    private String injectedValue;

    public void setInjectedValue(String value){
        this.injectedValue = value;
    }

    @Override
    public void aboutToInsert(DescriptorEvent event) {
       // Do what you need here
    }
} 
```

为了使用该类，我可以在我的实体类上使用 @EntityListeners 注释。不幸的是，这种方法不允许 Spring 控制我的侦听器的创建，因此不允许依赖注入。相反，我在我的类中添加了以下“init”函数：

```
public void init() {
    JpaEntityManager entityManager = null;

    try {
        // Create an entity manager for use in this function
        entityManager = (JpaEntityManager) entityManagerFactory.createEntityManager();
        // Use the entity manager to get a ClassDescriptor for the Entity class
        ClassDescriptor desc = 
            entityManager.getSession().getClassDescriptor(<EntityClass>.class);
        // Add this class as a listener to the class descriptor
        desc.getEventManager().addListener(this);
    } finally {
        if (entityManager != null) {
            // Cleanup the entity manager
            entityManager.close();
        }
    }
} 
```

添加一点 Spring XML 配置

```
<!-- Define listener object -->
<bean id="entityListener" class="EntityListener " init-method="init">
    <property name="injectedValue" value="Hello World"/>
    <property name="entityManagerFactory" ref="emf"/>
</bean> 
```

现在我们遇到了这样一种情况，Spring 创建了一个实体监听器，向它注入所需的任何依赖项，然后监听器对象将自己注册到它打算监听的实体类中。

我希望这有帮助。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2017-08-10T05:30:37.267

我测试了[https://guylabs.ch/2014/02/22/autowiring-pring-beans-in-hibernate-jpa-entity-listeners/](https://guylabs.ch/2014/02/22/autowiring-pring-beans-in-hibernate-jpa-entity-listeners/)中建议的方法并成功了。不是很干净，但可以完成工作。对我来说稍作修改的 AutowireHelper 类看起来像这样：

```
import org.springframework.context.ApplicationContext;
import org.springframework.context.ApplicationContextAware;
import org.springframework.stereotype.Component;

@Component
public class AutowireHelper implements ApplicationContextAware {

    private static ApplicationContext applicationContext;

    private AutowireHelper() {
    }

    public static void autowire(Object classToAutowire) {
        AutowireHelper.applicationContext.getAutowireCapableBeanFactory().autowireBean(classToAutowire);
    }

    @Override
    public void setApplicationContext(final ApplicationContext applicationContext) {
        AutowireHelper.applicationContext = applicationContext;
    }
} 
```

然后像这样从实体侦听器调用它：

```
public class MyEntityAccessListener {

    @Autowired
    private MyService myService;

    @PostLoad
    public void postLoad(Object target) {

        AutowireHelper.autowire(this);

        myService.doThings();
        ...
    }

    public void setMyService(MyService myService) {
        this.myService = myService;
    }
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2020-04-01T10:13:35.267

尝试`ObjectFactory`像这样使用

```
@Configurable
public class YourEntityListener {
    @Autowired
    private ObjectFactory<YourBean> yourBeanProvider;

    @PrePersist
    public void beforePersist(Object target) {
       YourBean yourBean = yourBeanProvider.getObject();
       // do somthing with yourBean here
    }
} 
```

我在`org.springframework.data.jpa.domain.support.AuditingEntityListener`spring-data-jpa 中找到了这个解决方案。

演示：[https ://github.com/eclipseAce/inject-into-entity-listener](https://github.com/eclipseAce/inject-into-entity-listener)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-11-28T22:38:25.290

JPA Listeners 的问题在于：

1.  它们不是由 Spring 管理的（所以没有注入）

2.  它们是（或可能）**在**Spring 的应用程序上下文准备好之前创建的（因此我们不能在构造函数调用中注入 bean）

我处理该问题的解决方法：

1）使用公共静态字段创建`Listener`类：`LISTENERS`

```
public abstract class Listener {
    // for encapsulation purposes we have private modifiable and public non-modifiable lists
    private static final List<Listener> PRIVATE_LISTENERS = new ArrayList<>();
    public static final List<Listener> LISTENERS = Collections.unmodifiableList(PRIVATE_LISTENERS);

    protected Listener() {
        PRIVATE_LISTENERS.add(this);
    }
} 
```

2）我们要添加到的所有 JPA 侦听器`Listener.LISTENERS`都必须扩展此类：

```
public class MyListener extends Listener {

    @PrePersist
    public void onPersist() {
        ...
    }

    ...
} 
```

3) 现在我们可以在 Spring 的 Application Context 准备好之后获取所有侦听器并注入 bean

```
@Component
public class ListenerInjector {

    @Autowired
    private ApplicationContext context;

    @EventListener(ContextRefreshedEvent.class)
    public void contextRefreshed() {
       Listener.LISTENERS.forEach(listener -> context.getAutowireCapableBeanFactory().autowireBean(listener));
    }

} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-28T09:14:47.180

我相信这是因为这个监听器 bean 不受 Spring 的控制。Spring 没有实例化它，Spring 怎么知道如何找到那个 bean 并进行注入？

我还没有尝试过，但似乎您可以使用带有 Spring 的 Configurable 注释的 AspectJ Weaver 来让 Spring 控制非 Spring 实例化的 bean。

[http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/aop.html#aop-using-aspectj](http://static.springsource.org/spring/docs/3.1.2.RELEASE/spring-framework-reference/html/aop.html#aop-using-aspectj)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2018-07-20T10:01:21.673

另外的选择：

创建一个服务以使 AplicationContext 可访问：

```
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.stereotype.Service;

import lombok.Setter;

@Service
class ContextWrapper {

    @Setter
    private static ApplicationContext context;

    @Autowired
    public ContextWrapper(ApplicationContext ac) {
        setContext(ac);
    }

} 
```

用它：

```
...    
public class AuditListener {

    private static final String AUDIT_REPOSITORY = "AuditRepository";

    @PrePersist
    public void beforePersist(Object object){
        //TODO:
    }

    @PreUpdate
    public void beforeUpdate(Object object){
        //TODO:
    }

    @PreRemove
    public void beforeDelete(Object object) {
        getRepo().save(getAuditElement("DEL",object));
    }

    private Audit getAuditElement(String Operation,Object object){

        Audit audit = new Audit();
        audit.setActor("test");
        Timestamp timestamp = new Timestamp(System.currentTimeMillis());
        audit.setDate(timestamp);

        return audit;
    }

    private AuditRepository getRepo(){
        return ContextWrapper.getContext().getBean(AUDIT_REPOSITORY, AuditRepository.class);
    }
} 
```

此类创建为来自 jpa 的侦听器：

```
...
@Entity
@EntityListeners(AuditListener.class)
@NamedQuery(name="Customer.findAll", query="SELECT c FROM Customer c")
public class Customer implements Serializable {
    private static final long serialVersionUID = 1L;
... 
```

由于监听器不受 Spring 的控制，它无法访问上下文 bean。我已经尝试了多个选项（@Configurable (...)），除了创建一个静态访问上下文的类之外，没有一个有效。已经陷入困境，我认为这是一个优雅的选择。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2021-03-12T15:57:00.910

从 Hibernate 5.3 版和 Spring 5.1 版（即 Spring Boot 2.1 版）开始，有一个简单的解决方案。无需 hack，无需使用 AOP，无需辅助类，无需显式自动装配，无需 init 块来强制注入。

你只需要：

1.  像往常一样，使侦听器 a`@Component`并声明自动装配的 bean。
2.  在 Spring 应用程序中配置 JPA 以使用 Spring 作为 bean 提供者。

以下是（在 Kotlin 中）如何...

### 1) 实体监听器

```
@Component
class EntityXyzListener(val mySpringBean: MySpringBean) {

    @PostLoad
    fun afterLoad(entityXyz: EntityXyz) {
        // Injected bean is available here. (In my case the bean is a 
        // domain service that I make available to the entity.)
        entityXyz.mySpringBean= mySpringBean
    }

} 
```

## 2) JPA 数据源配置

在您的应用程序中访问`LocalContainerEntityManagerFactoryBean`。然后添加到`jpaPropertyMap`以下键值对：`AvailableSettings.BEAN_CONTAINER`=> 应用程序上下文的 bean 工厂。

在我的 Spring Boot 应用程序中，我已经有下面的代码来配置数据源（例如，在[此处](https://www.baeldung.com/the-persistence-layer-with-spring-and-jpa#javaconfig)找到的样板代码）。我只需要添加将`BEAN_CONTAINER`属性放入`jpaPropertyMap`.

```
@Resource
lateinit var context: AbstractApplicationContext

@Primary
@Bean
@Qualifier("appDatasource")
@ConfigurationProperties(prefix = "spring.datasource")
fun myAppDatasource(): DataSource {
    return DataSourceBuilder.create().build()
}

@Primary
@Bean(name = ["myAppEntityManagerFactory"])
fun entityManagerFactoryBean(builder: EntityManagerFactoryBuilder): LocalContainerEntityManagerFactoryBean {
    val localContainerEntityManagerFactoryBean =
            builder
                    .dataSource(myAppDatasource())
                    .packages("com.mydomain.myapp")
                    .persistenceUnit("myAppPersistenceUnit")
                    .build()
    // the line below does the trick
    localContainerEntityManagerFactoryBean.jpaPropertyMap.put(
            AvailableSettings.BEAN_CONTAINER, SpringBeanContainer(context.beanFactory))
    return localContainerEntityManagerFactoryBean
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-12T23:46:09.793

在我看来，最自然的方式是干预 EntityListener 的实例化过程。这种方式在 Hibernate 5.3 之前的版本和 5.3 之后的版本中显着不同。

1)**在 5.3 之前的 Hibernate 版本** `org.hibernate.jpa.event.spi.jpa.ListenerFactory`中，负责 EntityListener 的实例化。如果您提供自己的基于 CDI 的`javax.enterprise.inject.spi.BeanManager`. CDI 接口（对于 Spring DI 世界来说是不必要的）冗长，但实现 Spring BeanFactory 支持的 CDI Bean 管理器并不难。

```
@Component
public class SpringCdiBeanManager implements BeanManager {

    @Autowired
    private BeanFactory beanFactory;

    @Override
    public <T> AnnotatedType<T> createAnnotatedType(Class<T> type) {
        return new SpringBeanType<T>(beanFactory, type);
    }

    @Override
    public <T> InjectionTarget<T> createInjectionTarget(AnnotatedType<T> type) {
       return (InjectionTarget<T>) type;
    }
    ...
    // have empty implementation for other methods 
} 
```

类型相关的实现`SpringBeanType<T>`将如下所示：

```
public class  SpringBeanType <T> implements AnnotatedType<T>, InjectionTarget<T>{

    private BeanFactory beanFactory;
    private Class<T> clazz;

    public SpringBeanType(BeanFactory beanFactory, Class<T> clazz) {
        this.beanFactory = beanFactory;
        this.clazz = clazz;
    }

    @Override
    public T produce(CreationalContext<T> ctx) {
        return beanFactory.getBean(clazz);
    }
    ...
    // have empty implementation for other methods 
} 
```

现在，唯一剩下的就是将我们`BeanManager`在属性名下的实现注入到 Hibernate 配置设置中`javax.persistence.bean.manager`。可能有很多方法可以做到这一点，让我只介绍其中一种：

```
@Configuration
public class HibernateConfig {

    @Autowired
    private SpringCdiBeanManager beanManager;

    @Bean
    public JpaVendorAdapter jpaVendorAdapter() {
        HibernateJpaVendorAdapter jpaVendorAdapter = new HibernateJpaVendorAdapter(){
            @Override
            public Map<String, Object> getJpaPropertyMap(){
                Map<String, Object> jpaPropertyMap = super.getJpaPropertyMap();
                jpaPropertyMap.put("javax.persistence.bean.manager", beanManager);
                return jpaPropertyMap;
            }
        };
        // ...
        return jpaVendorAdapter;
    }
} 
```

请记住，有两件事必须是 Spring bean： a) `SpringCdiBeanManager`，以便`BeanFactory`可以注入/自动装配到它；b）您的 EntityListener 类，以便该行`return beanFactory.getBean(clazz);`成功。

2）正如@AdrianShum 非常正确地指出的那样，**在Hibernate 5.3 及更高版本中，Spring bean 的事情要容易得多。**从 5.3 Hibernate 开始使用`org.hibernate.resource.beans.container.spi.BeanContainer`概念，并且有其现成的 Spring Beans 实现，`org.springframework.orm.hibernate5.SpringBeanContainer`. 在这种情况下，只需遵循其[javadoc](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/orm/hibernate5/SpringBeanContainer.html)即可。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-08-19T20:12:25.997

基于 Paulo Merson 的回答，这里是如何通过利用设置 SpringBeanContainer 的变体`JpaBaseConfiguration`。这是两个步骤：

**第 1 步**：将侦听器定义为 Spring 组件。请注意，自动装配通过构造函数注入工作。

```
@Component
public class PliListener {

    private EvenementPliRepository evenementPliRepository;

    public PliListener(EvenementPliRepository repo) {
        this.evenementPliRepository = repo;
    }

    @PrePersist
    public void touchForCreate(Object target) {
        // ...
    }

    @PostPersist
    void onPostPersist(Object target) {
        // ...
    }
} 
```

**第 2 步**：设置`SpringBeanContainer`，在侦听器中启用自动装配。[SpringBeanContainer JavaDoc](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/orm/hibernate5/SpringBeanContainer.html)可能值得一看。

```
@Configuration
public class JpaConfig extends JpaBaseConfiguration {

    @Autowired
    private ConfigurableListableBeanFactory beanFactory;

    protected JpaConfig(DataSource dataSource, JpaProperties properties,
            ObjectProvider<JtaTransactionManager> jtaTransactionManager) {
        super(dataSource, properties, jtaTransactionManager);
    }

    @Override
    protected AbstractJpaVendorAdapter createJpaVendorAdapter() {
        return new HibernateJpaVendorAdapter();
    }

    @Override
    protected Map<String, Object> getVendorProperties() {
        Map<String, Object> props = new HashMap<>();

        // configure use of SpringBeanContainer
        props.put(org.hibernate.cfg.AvailableSettings.BEAN_CONTAINER, 
            new SpringBeanContainer(beanFactory));
        return props;
    }

} 
```

# java - 自边界泛型中的子类化

> ID：12155643
> 
> 赞同：1
> 
> 时间：2012-08-28T08:43:34.217
> 
> 标签：java, generics

我遇到了具有自界泛型子类型的自界泛型类型的问题。

我正在尝试实现某种构建器模式，并且我希望我的陈述或多或少类似于 main 方法。

任何人都可以帮助我找到更好的为什么要声明泛型，这样我就不再需要强制转换并且我不会在语句中遇到编译错误。或者任何人都可以用明文解释为什么这不起作用？

```
import java.util.Date;

public class SelfBoundingGenericTypeTest {
    public static void main(String[] args) {
        ConcreteType type = new ConcreteType().pageSize(1).id(12);

        SubType type2 = (SubType) new SubType().id(10).pageSize(0); // Why do i need the cast?

        SubType type3 = new SubType().pageSize(0).id(10); // Compile error
    }
}

abstract class SuperType<E extends SuperType<E>> {
    private int _pageSize = Integer.MIN_VALUE;
    private int _startIndex = Integer.MIN_VALUE;

    @SuppressWarnings("unchecked")
    public E pageSize(int value) {
        this._pageSize = value;
        return (E) this;
    }

    @SuppressWarnings("unchecked")
    public E startIndex(int value) {
        this._startIndex = value;
        return (E) this;
    }

    public int getPageSize() {
        return _pageSize;
    }

    public int getStartIndex() {
        return _startIndex;
    }
}

class SubType<E extends SubType<E>> extends SuperType<E> {
    private long _id = Long.MIN_VALUE;

    @SuppressWarnings("unchecked")
    public E id(long value) {
        this._id = value;
        return (E) this;
    }

    public long getId() {
        return _id;
    }
}

class ConcreteType extends SubType<ConcreteType> {
    private Date _startDate;

    public Date getStartDate() {
        return _startDate;
    }

    public ConcreteType startDate(Date value) {
        this._startDate = value;
        return this;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:50:39.210

您需要演员阵容，因为`SubType`它是原始类型。因此，它的所有成员都是原始的，包括那些继承自`SuperType`. 的原始签名`SuperType.pageSize`是它的擦除`SuperType pageSize(int)`。所以“修复”是**不使用原始类型**。这一切都将神奇地为`ConcreteType`.

**编辑**：不要使用原始类型。曾经。你应该使用你的`ConcreteType`，但在你使用重新声明每种方法的愚蠢、愚蠢、愚蠢的“解决方案”之前，请`((SubType<?>) new SubType())`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:06:11.657

我不太确定失败的原因，但这是我的理解： abstract class SuperType> { public E pageSize(int value) { ...} }

对于方法 pageSize，因为您将 E 声明为`extends SuperType<E>`，在类型擦除之后，方法签名实际上是`SuperType pageSize(int)`，这导致了问题，`new SubType().pageSize(0).id(10)`因为 pageSize 返回一个 SuperType。

尽管它看起来不像您期望的那么神奇，但使用协变​​返回类型，您可以简单地“重载”继承类中的这些方法：

```
import java.util.Date;

public class SelfBoundingGenericTypeTest {
    public static void main(String[] args) {
        ConcreteType type = new ConcreteType().pageSize(1).id(12);

        SubType type2 = new SubType().id(10).pageSize(0); // works fine now

        SubType type3 = new SubType().pageSize(0).id(10); // works fine too
    }
}

abstract class SuperType {
    private int _pageSize = Integer.MIN_VALUE;
    private int _startIndex = Integer.MIN_VALUE;

    public SuperType pageSize(int value) {
        this._pageSize = value;
        return this;
    }

    public SuperType startIndex(int value) {
        this._startIndex = value;
        return this;
    }

    public int getPageSize() {
        return _pageSize;
    }

    public int getStartIndex() {
        return _startIndex;
    }
}

class SubType extends SuperType {
    private long _id = Long.MIN_VALUE;

    public SubType id(long value) {
        this._id = value;
        return this;
    }

    public SubType pageSize(int value) {
        return (SubType) super.pageSize(value);
    }

    public SuperType startIndex(int value) {
        return (SubType) super.pageSize(value);
    }

    public long getId() {
        return _id;
    }
}

class ConcreteType extends SubType {
    private Date _startDate;

    public Date getStartDate() {
        return _startDate;
    }

    public ConcreteType startDate(Date value) {
        this._startDate = value;
        return this;
    }

    public ConcreteType id(long value) {
        return (ConcreteType) super.id(value);
    }

    public ConcreteType pageSize(int value) {
        return (ConcreteType) super.pageSize(value);
    }

    public ConcreteType startIndex(int value) {
        return (ConcreteType) super.pageSize(value);
    }

} 
```

# postgresql - 如何从 postgresql 获取 TEXT 列值

> ID：12155648
> 
> 赞同：19
> 
> 时间：2012-08-28T08:43:59.153
> 
> 标签：postgresql

我在 postgreSQL 中有一个以下简单的表：

```
CREATE TABLE data ( id bigint NOT NULL, text_column text, ); 
```

我在 phpPgAdmin 网站上看到的 text_column 的值是数字（长）。正如我所读到的，postgreSQL 保留了一个指向实际数据的指针。如何获取 text_column 的实际字符串值？正在做：

```
select text_column from data 
```

返回数字...

谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-05-29T12:15:39.993

以下帮助了我们：

```
select convert_from(loread(lo_open(value::int, x'40000'::int), x'40000'::int),  'UTF8') from t_field; 
```

其中`value`是字段，其中包含`TEXT`，而 t_field 显然是表的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-21T22:58:18.993

从 psql 运行 \lo_export ID FILE，其中 ID 是存储在表中文本列中的数字，FILE 是结果的路径和文件名。该数字是对大对象表的引用。您可以通过运行 \lo_list 查看其内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-18T13:59:18.617

如果它的 text_column 是文本，这意味着它是一个 oid，这也应该有效：

从数据中选择 convert_from(lo_get(text_column::oid), 'UTF8');

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-28T09:00:19.253

工作正常，可能是字段值是数字：

```
 > \d+ type

 Column    | Type    

 name      |  text   

 test_id   | integer 
```

> 从类型中选择名称；

```
 name 

   AAA 
```

# java - 为什么我没有得到一个正常工作的 JScrollPane？

> ID：12155654
> 
> 赞同：3
> 
> 时间：2012-08-28T08:44:28.560
> 
> 标签：java, swing, layout, user-interface, jscrollpane

我有一个 JFrame 窗口，我想在它的中间添加一个可滚动的 JTable。我有一个方法，称为`collectionTableScrollPane()`生成`JScrollPane`（我知道这可以保证工作）。

然后我继续将它添加到我的`mainPanel`面板中。但是，我希望在`JScrollPane`. 从逻辑上讲，我会创建一个`JPanel`居中的馆藏`FlowLayout`，并`Box.createHorizontalStrut(30)`在`JScrollPane`.

```
JPanel tableHolderPanel = new JPanel(new FlowLayout());
mainPanel.add(tableHolderPanel);
tableHolderPanel.add(Box.createHorizontalStrut(30));
tableHolderPanel.add(collectionTableScrollPane());
tableHolderPanel.add(Box.createHorizontalStrut(30)); 
```

但是，我得到了一个奇怪的结果，窗口中间的 JScrollPane（由箭头表示）有点失效。

有谁知道问题是什么？

![1](../Images/db9d2cc3fe357e7033fd0253c7bf06b8.png)

请注意，其中`JTable`包含四行，其中只有两行是可见的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:17:26.010

过去，当我`JScrollPane`在面板内部使用`FlowLayout`. 这种行为可能很棘手，当内容增长时，可能会出现水平滚动条，或者 FlowLayout 应该添加一个新行。

在您的情况下，我将替换为`FlowLayout`a `BorderLayout`：

```
JPanel tableHolderPanel = new JPanel(new BorderLayout());
mainPanel.add(tableHolderPanel);
tableHolderPanel.add(Box.createHorizontalStrut(30), BorderLayout.WEST);
tableHolderPanel.add(collectionTableScrollPane(), BorderLayout.CENTER);
tableHolderPanel.add(Box.createHorizontalStrut(30), BorderLayout.EAST); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:02:34.467

据我所知，`Box`应该与 一起使用`BoxLayout`，这可能会给您带来一些问题。相反，为什么[不在](http://docs.oracle.com/javase/7/docs/api/javax/swing/border/EmptyBorder.html)`tableHolderPane`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:22:13.520

`BoxLayout`接受来自`JComponents`的大小，与默认`FlowLayout`pre_implemented相同的问题`JPanel`

1.  `PreferredSize`你必须通过覆盖`JPanel`嵌套返回`JScrollPane`，

2.  使用另一个`LayoutManager`，例如`GridBagLayout`或今天`MigLayout`

3.  使用`NestedLayout`, 通过使用`BorderLayout`将两个`JLabel`s （返回 的 ei `PreferredSize`）放置到`EAST`and`WEST`区域

4.  一切都取决于您是否真的要创建空白区域以及是否应该调整大小

# android - WebView 中的 Detech 链接

> ID：12155655
> 
> 赞同：0
> 
> 时间：2012-08-28T08:44:29.310
> 
> 标签：android, webview

我的目标是设置`auto detection`和内部`phone number`，例如，如果用户长按数字电话，则会出现一个对话框以确认通话`links``WebView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T08:54:28.207

这可以通过使用以下 coed 行来完成。

```
 mWebView.setWebViewClient(new WebViewClient(){

        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            Log.d(TAG,"shouldOverrideUrlLoading url: "+url);
            if( url.startsWith("http:") || url.startsWith("https:") ) {
                return false;
            }

            // Otherwise allow the OS to handle it
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
            mcContext.startActivity( intent ); 
            return true;

        } 
```

# .htaccess - Apache .htaccess 将规则重写为 IIS web.config 规则

> ID：12155658
> 
> 赞同：0
> 
> 时间：2012-08-28T08:44:33.753
> 
> 标签：.htaccess, iis, url-rewriting, web-config

我正在将 PHP 应用程序从 Apache 移动到 IIS 服务器。我正在尝试翻译以下 .htaccess 规则：

```
RewriteEngine On
RewriteRule ^(.*)$ public/$1?%{QUERY_STRING} [QSA,L] 
```

它只是将所有请求（以及查询字符串）重定向到公共子目录。

我在 web.config 文件中尝试了类似以下的内容-

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
    <rewrite>
        <rules>
            <rule name="Root Hit Redirect" stopProcessing="true">
                <match url="^$" />
                <action type="Redirect" url="/public/index.php" />
            </rule>
        </rules>
    </rewrite>
</system.webServer>
</configuration> 
```

但它一直陷入重定向循环。在这种情况下，正确的 web.config 规则应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:35:06.670

设法通过在 IIS 中导入规则来解决这个问题。

[http://akrabat.com/winphp-challenge/zend-framework-url-rewriting-in-iis7/](http://akrabat.com/winphp-challenge/zend-framework-url-rewriting-in-iis7/)

# mercurial - 子存储库（外部）环境中的 NuGet

> ID：12155660
> 
> 赞同：2
> 
> 时间：2012-08-28T08:44:40.333
> 
> 标签：mercurial, nuget, mercurial-subrepos

我在 Mercurial 中有几个存储库，其结构如下：

*   核
*   一体化
*   行政
*   我的应用

从`MyApp`repo 中，我想包含`Core`and `Integration`。

我将它们作为子存储库添加到`MyApp`，并将其放在`Externals`文件夹中。

文件夹结构`MyApp`大致如下：

MyApp
- BusinessLogic
- DataAccess
- Externals
- 核心
- 集成
- Web
- 包

问题与`packages`文件夹有关。我在所有解决方案中都使用包还原，并且 NuGet 可以正常下载所有包。该文件夹包含我的外部项目所依赖的包。

唯一的问题是，包文件夹的相对路径`Core`现在`Integration`是错误的。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:26:49.533

我认为您可以手动修复它，您的引用应该具有以`../../packages`. 但是为避免将来出现这种情况，**所有**包含此项目的解决方案都必须具有相同的结构。例如，对于其他解决方案，您的结构如下：

```
MyOtherApp
- BusinessLogic
- DataAccess
- Externals
-- SubFolder
--- Core
--- Integration
- Web
- packages 
```

如果在这种情况下您将 nuget 包添加到 Core 项目，则引用将是`../../../packages/...`. 并且`Core`将再次在其他解决方案中被打破。

其他解决方案是从项目中制作包，`Core`并`Integration`通过 nuget 在其他解决方案中使用它们。我的团队使用这个 TeamCity，它可以打包项目、发布 nuget 包并作为 nuget 开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T15:51:52.160

如果您仍想将其保留为子存储库（而不是将项目引用为 NuGet 包），您可以修改提示路径以始终搜索解决方案目录。

例如，我改变了

```
<HintPath>..\..\packages\Moq.4.2.1312.1622\lib\net40\Moq.dll</HintPath> 
```

到

```
<HintPath>$(SolutionDir)packages\Moq.4.2.1312.1622\lib\net40\Moq.dll</HintPath> 
```

# javascript - 为 JS 驱动的常见问题页面推荐的 DB 解决方案

> ID：12155663
> 
> 赞同：0
> 
> 时间：2012-08-28T08:44:50.977
> 
> 标签：javascript, seo, couchdb, angularjs, single-page-application

我想在我们的一个网站中重新开发一个大型常见问题解答页面。

目前，该页面是一个静态 HTML 文档，所有（可扩展的）问题/答案对都在 DL 列表中结构化，每个列表都是一个类别。

但是，这会导致 SEO 问题。我想找到重新开发此部分的最佳方法，以便每个问题都映射到 Google 中的唯一 URL。

这是一个 Java EE、Spring/Hibernate（后台是 Oracle）应用程序。但是，我们不想使用我们的 Oracle DB 来存储常见问题解答。我们希望尽可能多地保持此页面由客户驱动。我读过单页网络应用程序不利于 SEO。

你有什么建议，CouchDB、NoSQL、partials？我们已经在后台使用 jQuery、AngularJS 和 Gson。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:46:54.123

如果您实现了我在评论中写的想法，我认为没有理由不将常见问题解答放在您的 Oracle 数据库中——因为您不再需要将数据库转移给用户。

如果您仍然坚持不使用 Oracle 数据库，我建议您不要使用数据库，而是将问题保存在 XML\JSON 文件中。

如果您需要数据库功能，我通常推荐[SQLite](http://en.wikipedia.org/wiki/Sqlite)，但请使用您最了解的任何工具。

# iphone - 无法使用 __bridge 将 CFStringRef 转换为 NSString

> ID：12155665
> 
> 赞同：1
> 
> 时间：2012-08-28T08:44:58.327
> 
> 标签：iphone, objective-c, ios, ios5

如果这是一个非常基本的问题，请多多包涵。我尝试使用 __bridge 将 CFStringRef 转换为 NSString，因为我启用了 ARC。

```
mydevUUIDString = CFUUIDCreateString(NULL, peripheral.UUID);
 NSString *temp = (__bridge NSString *) devUUIDString; 
```

我仍然收到以下错误：

```
 Incompatible type casting 'CFStringRef' (aka 'const struct __CFString  **) to 'NSString' with _bridge cast. 
```

请教，如何解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T08:56:10.437

我认为问题在于，当您创建时`mydevUUIDString`，您将其创建为指向 CFStringRef 的指针。例如，当我输入以下代码时，Xcode 没有给我任何错误：

```
CFStringRef mydevUUIDString = NULL;
NSString *temp = (__bridge NSString *)(mydevUUIDString); 
```

但是，当我输入此代码时（这很可能是您所做的）：

```
CFStringRef *mydevUUIDString = NULL;
NSString *temp = (__bridge NSString *)(mydevUUIDString); 
```

我得到与您相同的错误：

> 不兼容的类型转换 'CFStringRef' （又名 'const struct __CFString **） 到 'NSString' 与 _bridge 转换。

# linux - tcng - 匹配“if”语句中的端口范围

> ID：12155668
> 
> 赞同：0
> 
> 时间：2012-08-28T08:45:13.723
> 
> 标签：linux, controls, range, traffic

嗨，我需要将指定的端口范围（例如从 16384 到 32768）与 tcng 匹配，以便为从该端口传出的流量提供更高的优先级。

示例文件：

```
#include "fields.tc"
dev "eth0" {
    egress {
        class(<$voip>) if ip_proto == IPPROTO_UDP && udp_sport == ...;
        class(<$other>) if 1;
        prio {
            $voip = class(1) {
                fifo();
            }
            $other = class(2) {
                fifo();
            }
        }
    }
} 
```

我应该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:29:19.707

看起来像一个简单的“udp_sport >= 16384 && udp_sport <= 32768”的作品。
至少在 tcng 版本 10b 中。
所以这样写：

```
#include "fields.tc"
dev "eth0" {
    egress {
        class(<$voip>) if ip_proto == IPPROTO_UDP && udp_sport >= 16384 && udp_sport <= 32768;
        class(<$other>) if 1;
        prio {
            $voip = class(1) {
                fifo();
            }
            $other = class(2) {
                fifo();
            }
        }
    }
} 
```

# iphone - TabBarController + NavigationController：推送和弹出问题

> ID：12155678
> 
> 赞同：4
> 
> 时间：2012-08-28T08:46:13.803
> 
> 标签：iphone, objective-c, ios, ipad, apple-push-notifications

我正在使用包含 Navigation Controller 的初始 Root-View 控制器：

![在此处输入图像描述](../Images/4d2780d4232b5249d362307293396984.png)

现在我想从 uiviewcontroller 1.2.1 导航到 uiviewcontroller 1.1

self.pushview 和 self.popView 等所有常规解决方案都不起作用；他们正在创建包含页面的 UITabBarController 的另一个实例......请大家携手合作.. 任何帮助将不胜感激............

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:02:24.077

您不必对导航控制器层次结构感到惊愕

用于将自导航控制器导航到父导航控制器使用

self.tabBarController.navigationController

使用此代码

```
PUSH : [self.tabBarController.navigationController pushViewController:objNav animated:YES];

POP  : [self.tabBarController.navigationController popViewControllerAnimated:YES]; 
```

谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T19:45:58.970

对于 Swift 3.0

推：

```
self.tabBarController?.navigationController?.pushViewController(ViewControleer, animated: true)
self.tabBarController?.show(ViewControleer, sender: self) 
```

流行音乐：

```
self.tabBarController?.navigationController?.popToRootViewController(animated: true)
self.tabBarController?.navigationController?.popViewController(animated: true)
self.tabBarController?.navigationController?.popToViewController(ViewControleer, animated: true) 
```

# java - 从数据库中读取 zip 存档

> ID：12155681
> 
> 赞同：0
> 
> 时间：2012-08-28T08:46:21.583
> 
> 标签：java, oracle, zip, blob

我有一个 zip 文件，我将它作为 blob 字段存储在数据库中。当我想从中下载它时，zip 文件已损坏。我只能从 7zip 打开它。当我尝试在将文件上传到数据库之前打开它以及何时在数据库中时，该文件是好的。当我从数据库中以 blob 形式检索文件时，尝试在 unix 上解压缩时出现此错误

```
 Archive:  test.zip
      End-of-central-directory signature not found.  Either this file is not
      a zipfile, or it constitutes one disk of a multi-part archive.  In the
      latter case the central directory and zipfile comment will be found on
      the last disk(s) of this archive.
    unzip:  cannot find zipfile directory in one of test.zip or
            test.zip.zip, and cannot find test.zip.ZIP, period. 
```

这是我从数据库中检索 zip 时的代码：

```
 public oracle.sql.BLOB GetBlob(Connection myConn, 
                                       CallableStatement cstmt) throws Exception {
            String strSql = null;

            BLOB tempBlob = null;
            try {

                strSql = .... // Here is the sql procedure which I called to retrieve the blobl field.
                cstmt = myConn.prepareCall(strSql);
                cstmt.registerOutParameter(1, OracleTypes.BLOB);
                cstmt.setLong(2, request_id);
                cstmt.execute();
                tempBlob = (oracle.sql.BLOB)cstmt.getObject(1);
                int bufsize = tempBlob.getBufferSize();

            } catch (Exception e) {
                e.printStackTrace();
                throw e;
            }
            return tempBlob; 
```

这是阅读：

```
 oracle.sql.BLOB tempBlob = null;
            Connection myConn = null;
            CallableStatement cstmt = null;

            try {
                myConn = DBHelper.getConnection();
                if (null == myConn)
                    throw new SQLException();
                tempBlob = GetBlob(myConn, cstmt);

                int bufsize = tempBlob.getBufferSize();
                InputStream in = tempBlob.getBinaryStream();
                int length = 0;

                byte buf[] = new byte[bufsize];
                while ((in != null) && ((length = in.read(buf)) != -1)) {
                    out.write(buf, 0, length);

                }
                in.close();
                //          out.flush();
                //          out.close();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                if (null != myConn) {
                    try {
                        myConn.close();
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
                if (cstmt != null) {
                    try {
                        cstmt.close();
                    } catch (SQLException e) {
                    }
                }

            } 
```

有人可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:07:27.897

比较之前和之后的文件。差异应该会给您一些提示，说明出了什么问题。

可能的罪魁祸首是：

*   最后缺少字节
*   转换后的字节
*   字节顺序混乱

I'd expect looking at the first 10, the last 10 and the total number of bytes should be sufficient to give you a good idea what is going on.

# git - git pull 是否等待文件锁被释放？

> ID：12155682
> 
> 赞同：0
> 
> 时间：2012-08-28T08:46:27.343
> 
> 标签：git, unix, deployment, locking

我最近设置了一个 git deploy。Gitolite 维护裸 git 存储库，并且在触发钩子时，单独的暂存/生产存储库会拉取最近的更改。

这显然发生在网站上有访问者时。理论上会不会发生这样的情况，有很多请求，源文件会被连续锁定，git永远没有机会替换它们，因此不会部署新版本？我应该确保文件没有被使用还是 git 实际上可以替换正在使用的文件？

文件由最近的 nginx 和 php-fpm 提供/读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T20:30:06.703

您没有说明文件是如何提供给用户的吗？假设您使用的是 Apache 之类的东西，那么 unix 不会对正在读取的文件执行任何文件锁定。你应该没事。

# extjs - ExtJs 组合框存储加载和表单

> ID：12155687
> 
> 赞同：0
> 
> 时间：2012-08-28T08:47:13.547
> 
> 标签：extjs, extjs4

我的表单上的组合框有问题。问题是，当我加载表单数据（使用`form.loadRecord`）时，即使我知道模型有数据，**有时组合框也是空的。**

当我查看 Firebug 时，我可以看到组合框存储是在记录加载后加载的。我认为这就是原因 - 组合框存储稍后加载，然后加载记录。

这就是我设置组合框商店的方式：

```
 //All stores have autoload:true configuration.
    var possessionGroundsStore = Ext.create('path.to.store');
    var vehicleTypesStore = Ext.create('path.to.store');
    var usePurposesStore = Ext.create('path.to.store');
    this.editView = Ext.create('path.to.view');
    this.editView.getPossessionGroundsField().store = possessionGroundsStore;
    this.editView.getVehicleTypeIdComboBox().store = vehicleTypesStore;
    this.editView.getUsePurposeField().store = usePurposesStore;

    //later
    this.editView.loadRecord(record); 
```

有没有解决这个问题的通用方法？

我现在能看到的唯一方法是`store.load`在每个组合框存储中使用回调，然后在加载所有存储后执行 loadRecord，但这似乎很复杂。

有什么帮助吗？

**更新：** 当`form.loadRecord`被调用时，它在内部调用`field.setValue()`. 所以，关键是：组合框存储必须在`setValue`被调用之前填充。如果商店未加载，您将看到`valueField`而不是`displayField`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T15:45:10.527

组合框的*默认*配置将在创建后第一次展开时触发存储加载。

除非你给它一个`queryMode: 'local'`配置，否则任何组合框都会发生这种情况。换句话说，默认组合框配置几乎总是在创建组件**后**完成加载它的存储。出于这个原因，我觉得很奇怪你的连击很难加载太晚，也许他们加载得太早了`autoLoad: true`

但是，我不会遇到与您相同的问题，因为我通常会`queryMode: 'local'`在应用程序初始化阶段设置组合框并为它们预加载商店。我这样做是因为我的组合商店通常都是参考商店，可以在我的应用程序的许多不同视图中使用。创建组合组件时，我不会重新创建存储，我只是使用`Ext.getStore('ComboStoreId')`. 您可以尝试像这样设置您的应用程序。

如果您不想这样做，您也可以尝试`autoLoad: true`从组合商店中删除配置，然后在调用`yourComboStore.load()` *后*调用`loadRecord`。

# android - 如何在canvas android上在线查找点列表

> ID：12155688
> 
> 赞同：4
> 
> 时间：2012-08-28T08:47:13.127
> 
> 标签：android, canvas, path

我在画布上画了一条线，通过 drawlinw() 方法的两个点。现在我想获取我绘制的所有点的列表。我这样做的目的是-我想以一定的间隔在线绘制圆圈。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:50:30.267

您可以使用从这两个点的坐标接收的线的解析方程。在这种情况下，您将知道您线上的任何 X 的任何 Y（[请参阅本文](http://www.calcfun.com/calculate-41-equation-of-a-line-given-that-you-know-two-points-it-passes-through.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:50:12.563

我认为您无法从 Canvas 获得此信息：您可能需要手动计算这些点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:50:30.910

好吧，您不能使用 Android API，但您当然可以自己计算间隔，不是吗？

# javascript - Javascript在某个位置后删除数组中的项目

> ID：12155695
> 
> 赞同：1
> 
> 时间：2012-08-28T08:47:37.370
> 
> 标签：javascript, html, arrays, loops, iterator

假设您永远不知道将传递给浏览器的字符串，任何长度的任何字符的任意组合，我想将其限制为 .. 50 个字符。

这就是我目前所拥有的：

```
<script type="text/javascript">
    var x = "Hello this sentance was created in the browser!"
    for(i=0; i<x.length; i++){
        if(i == 50){

        }
    }
</script> 
```

最终 x 将类似于：

```
var x = $('#textBit').html(); 
```

如何在位置 50 之后删除数组（字符串）中的所有内容，我是否需要一个类似这样的新 for 循环（只是想出来可能是错误的）伪代码：

```
loop remainder string{
    do until end of array{
        remove item
    }
} 
```

或者有更好的方法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:50:13.123

使用`string.substring(indexA[, indexB])`方法：

> 返回一个索引和另一个索引之间的字符串子集，或通过字符串的结尾。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substring)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T08:50:31.413

不：

```
if (x.length <= 50)
  return x;
else
   return x.substring(0, 50); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:51:36.730

只需使用`substr()`（[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)）。这将返回符合您条件的子字符串，例如，从开头开始并且最多包含 50 个字符：

```
var x = "Hello this sentance was created in the browser!"

var shortString = x.substr( 0, 50 ); 
```

# c++ - 将任意数量的任意类型的值组合成单个字符串的简单命令

> ID：12155702
> 
> 赞同：0
> 
> 时间：2012-08-28T08:47:52.890
> 
> 标签：c++, c-preprocessor, variadic-functions, boost-preprocessor

考虑以下代码。

```
int id = 666;
stringstream stream(stringstream::in | stringstream::out);
stream << "Object " << id << " active.";
file.write(stream.str()); 
```

它很好地将 << 前面的所有值组合在一个字符串中。我很想发现一个更短、更易于使用且代码重复更少的版本。此外，上面的代码只是一个例子，命令应该接受变量和字符串的任意组合。理想情况下是这样的：

```
int id = 666;
WRITE("Object ", id, " active."); 
```

即使使用 Boost.Preprocessor、内联函数和所有技巧，这在 C++**中是否可能以可移植的方式实现。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T08:55:36.357

您可以在不使用宏进行类型检查的情况下完成此操作：

```
//filewrite.h
#define WRITE(first, second, third) \
{\
   stringstream stream(stringstream::in | stringstream::out);\
   stream << first << second << third;\
   file.write(stream.str());\
} 
```

或者，更简洁，使用模板函数：

```
template<typename T1, typename T2, typename T3>
void WRITE(T1 const& first, T2 const& second, T3 const& third, fstream& file)
{
   stringstream stream(stringstream::in | stringstream::out);
   stream << first << second << third;
   file.write(stream.str());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:05:52.950

如果您真的不想进行类型检查，请不要使用 C++，它是一种静态类型语言！

如果您只是想让它适用于任何类型，请使用宏（*eurgh*）或使用可变参数模板，例如[https://gitlab.com/redistd/redistd/blob/master/include/redi/printers.h](https://gitlab.com/redistd/redistd/blob/master/include/redi/printers.h)支持：

```
#include <redi/printers.h>
using redi::println;
int main()
{
  int id = 666;
  println("Object ", id, " active.");  // write arguments to stdout
} 
```

该`println`函数接受任意数量的参数，并从[Howard Hinnant](https://stackoverflow.com/users/576911/howard-hinnant)的一些示例代码的启发下被~~无耻地窃取~~。

很容易将其调整为写入 an`fstream`而不是`std::cout`例如通过添加

```
inline
void
fprintln()
{ file << std::endl; }

template<typename T0, typename... T>
  inline
  void
  fprintln(const T0& t0, const T&... t)
  {
    print_one(file, t0);
    fprintln(t...);
  } 
```

然后：

```
 fprintln("Object ", id, " active.");  // write arguments to 'file' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:08:46.623

您不需要（也不想要）宏。这就是模板的设计目的：

```
template <typename T>
void
write( std::string const& prefix, T const& value, std::string const& suffix )
{
    std::ostringstream fmt;
    fmt << prefix << value << suffix;
    file.write( fmt.str() );
} 
```

另一方面，何苦呢？为什么不让客户端代码使用惯用语：

```
file << prefix << value << suffix; 
```

# events - Applescript 做任何事情都太慢并且一直超时

> ID：12155704
> 
> 赞同：1
> 
> 时间：2012-08-28T08:47:59.070
> 
> 标签：events, timeout, applescript

任何人都可以解释一下为什么脚本突然变得如此缓慢吗？

即使这个测试脚本在 120 秒超时之前也没有完成。

```
tell application "Mail"
set selectedEmails to get selection -- returns a list
end tell 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T10:57:08.847

这可能是您的系统的问题。该脚本在我的计算机上执行并不需要太多时间。

```
set time1 to do shell script "perl -e 'use Time::HiRes qw(time); print time'"
tell application "Mail" to set selectedEmails to get selection -- returns a list
set time2 to do shell script "perl -e 'use Time::HiRes qw(time); print time'"
set millisec to (round ((time2 - time1) * 1000))
return "Emails:" & (count of selectedEmails) & " Milliseconds:" & millisec 
```

“电子邮件：1000 毫秒：183”

# javascript - 在页面内最后执行 javascript 函数

> ID：12155709
> 
> 赞同：6
> 
> 时间：2012-08-28T08:48:08.280
> 
> 标签：javascript, jquery

我需要确保页面中的某个脚本最后执行。我想到了使用 JQuery

```
$(document).ready( ... ) 
```

但是如果有更多这种类型的函数，实际上是最后执行的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T08:51:25.110

这取决于您注册它们的顺序。

例如：

```
$(document).ready( function() { alert("first"); });
$(document).ready( function() { alert("second"); });
$(document).ready( function() { alert("third"); });​ 
```

会提醒“第一”然后是“第二”然后是“第三”

因此`<script>`，在页面底部添加 a`$(document).ready( yourfunction );`就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T08:51:40.520

有很多方法可以延迟脚本的执行。

没有办法以编程方式检测所有这些。

为了获得可靠的解决方案，您必须对您关心的每个页面的代码进行反向引擎，弄清楚它在做什么（以及何时）并专门为该页面编写延迟脚本。（对于“可靠”的值等于“直到他们更改页面”）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:53:44.263

理论上你可以这样做：

```
// Form array of functions which sould be called with according order
$.readyArray = [function () { ... }, function () { ... }, function () { ... }, ...];

// just execute them in this order when onready event
$(document).ready(function() {
  for (var i = 0; i < $.readyArray.length; i++) {
    //apply, calls function in current context and pass arguments object
    $.readyArray[i].apply(this,[arguments]);
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:51:30.257

```
$(document).ready( ... ) 
```

不是最后执行的。最后执行的函数（因此，在 document ready 之后）是 from 的函数`<body onload>`。

例子 ：`<body onload="myJSfunction();">`

在这里，javascript`myJSfunction`在 $(document).ready( ... ) 之后最后执行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-25T14:40:19.727

如果重构（如[Quentin](https://stackoverflow.com/a/12155771/900880)建议的那样）不是一种选择（例如，您正在更新框架或产品的一部分），您可以使用四种方法，这应该会给您一个很好的机会来实现您所需要的。使用 jQuery 查看以下代码段：

**(1) 等到“文档”准备好**

文档是指可见的 DOM。该脚本将在它应该被渲染的所有内容真正渲染时触发。

```
$(document).ready(function() {
  console.log('Document is ready.');
}); 
```

**(2) 等到顶层 JS (Root) 'window' 对象准备好**

完整的根对象可以（将）在 DOM 准备好后的某个时间准备好。

```
$(window).ready(function() {
  console.log('Window is ready.');
}); 
```

**(3) 等到 'window' 使用 .bind 完全加载**

这会在“窗口”准备好后立即触发，因此您的脚本可以作用于`$(window).ready()`上面渲染的对象（元素）。

```
$(window).bind("load", function() {
  console.log('Window bind is ready.');
}); 
```

**(4)等到Ajax调用完成**

这是你所能做到的——脚本将在“窗口”准备好、加载、所有代码运行和所有 Ajax 操作完成时触发。不幸的是，由于一个 Ajax 可以调用另一个 Ajax，因此它可以在页面加载期间触发多次。

```
$(window).ajaxComplete(function() {
  console.log('Window bind is ready, Ajax finished.');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T08:54:31.417

在简单的 Javascript 解决方案中，您可以在脚本标记内的 HTML 文档末尾调用 javascript 函数。这在您不使用 jQuery 时效果很好。

在 jQuery 的情况下，您可以使用 load 方法。当元素和所有子元素都已完全加载时，将加载事件发送到元素。

有关更多信息，请查看

[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-09T12:39:22.857

试试这个，

```
$(window).bind("load", function() {
    //code here
}); 
```

# objective-c - 来自文档根目录的 Route-Me 离线地图

> ID：12155714
> 
> 赞同：0
> 
> 时间：2012-08-28T08:48:22.797
> 
> 标签：objective-c, ios, route-me

在我的应用程序中，有一个来自 sqlite 文件的离线地图。

```
RMDBMapSource *mapSrc = [[RMDBMapSource alloc] initWithPath:@"map.sqlite"];
RMMapContents *contents = nil;
contents = [[RMMapContents alloc] initWithView:mapView tilesource:mapSrc]; 
```

map.sqlite 文件是从我的资源中加载的，并且所有内容都显示正确。

我的问题：我正在将新版本的 map.sqlite 下载到我的 Apps 文档文件夹中。如何从文档文件夹中的文件加载我的 MapSource？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:28:03.777

你只需要写：

```
RMDBMapSource *mapSrc = [[RMDBMapSource alloc]  initWithPath:@"../Documents/yourdb.sqlite"]; 
```

# php - Mysql Table中的数据只存储一条记录

> ID：12155715
> 
> 赞同：0
> 
> 时间：2012-08-28T08:48:22.547
> 
> 标签：php, mysql

我有 mysql 数据库，我在 mysql 数据库中添加数据，但问题是它只存储一条记录，不超过该记录。

我的表结构是

```
 <?php
    $con =  mysql_connect("example.com","name","password");

    if (!$con)
     {
     die('Could not connect: ' . mysql_error());
     }

     mysql_select_db("surveyipad", $con);

     $response_id=$_POST['response_id'];

     $participant_id=$_POST['participant_id'];

     $question_id=$_POST['question_id'];

     $answer_text=$_POST['answer_text'];

     $answer_option=$_POST['answer_option'];

     $query=("INSERT INTO survey_question_responses (response_id,participant_id,question_id,answer_text,answer_option)

      VALUES ('', '$participant_id','$question_id','$answer_text','$answer_option')");

       mysql_query($query,$con);
       printf("Records inserted: %d\n", mysql_affected_rows());

     echo($response_id)
   ?> 
```

响应 id 是表中的主键，也设置为自动递增

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:02:04.223

像这样试试

```
$query=("INSERT INTO survey_question_responses (participant_id,question_id,answer_text,answer_option)

      VALUES ('$participant_id','$question_id','$answer_text','$answer_option')"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:17:44.770

当您使 id 字段自动递增时，不要通过您的 INSERT 查询插入它。

将查询写为

```
INSERT INTO survey_question_responses (participant_id, question_id, answer_text, answer_option)
VALUES ('$participant_id', '$question_id', '$answer_text', '$answer_option') 
```

您还应该解释或发送表格的结构。

# c++ - 视觉未声明的标识符？

> ID：12155717
> 
> 赞同：1
> 
> 时间：2012-08-28T08:48:43.873
> 
> 标签：c++, visual-c++

我正在使用 Visual Studio 2010，当我做类似的事情时

```
for(int i = 0, j = 0; i < 10; i++)
{
        if(m_Var == 1)
            j++;
}

if(j == 0)//This line errors undeclared identifier
    DoSomething(); 
```

我已经`j`在 for 循环中声明了，为什么它会出错“未声明的标识符”？

另一个例子是

```
for(int i = 0; i < 10; i++)
{
        m_Var1++;
}

for(i = 0; i < 200; i++)//This line errors undeclared identifier
{
        m_Var2++;
} 
```

即使在 for 循环中声明了该代码错误，但为什么呢？有没有办法做到这一点而不必`i`在循环之前声明但在循环中声明它而不是像上面的例子一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:50:53.750

在第一个例子中，`j`只存在于循环的范围内

```
for(int i = 0, j = 0; i < 10; i++)
{
        if(m_Var == 1) j++;
}  // i, j exist no longer 
```

在第二个例子中，同样适用于`i`。它的范围是第一个循环。你甚至可以在没有循环的情况下检查它：

```
{
  int i = 0;
} // end of scope, end of i

i++; // error, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T09:05:48.723

我记得，一些非常早期的 C++ 版本在`for`循环中定义了变量，其作用域是包含循环的块。在现代 C++ 中，范围仅限于`for`循环本身。例如：

```
void foo() {
    for (int i = 0; i < N; i ++) {
        // i is visible here
    }
    // In very old C++, i is visible here.
    // In modern C++, i is not visible here.
} 
```

Visual Studio 实际上有一个启用旧行为的选项；您可以在配置属性 --> C/C++ --> 语言下关闭“For循环范围内的强制一致性”。相应的编译器命令行选项是`/Zc:forScope-`. 但除非你特别需要它来编译你无法修复的旧代码，否则我强烈建议将其保留为默认设置，这符合现代 C++ 规则。如果您正在编写新代码，只需遵循现代 C++ 规则。如果您需要一个变量在循环外可见，则在循环外声明它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T08:51:00.583

因为您在循环中声明它，所以一旦循环完成，您的`j`变量就会超出范围。当您像这样在 for 语句中声明变量时

```
for(int i = 0, j = 0; i < 10; i++) 
```

该变量仅具有循环范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:51:56.290

> 我已经`j`在`for`循环中声明...

是的，你有。而且您只能在该循环中*使用*它`for`，因为它的范围在该循环的右括号处结束。之后您将无法使用它。

如果你以后想使用它，你必须把范围移开一点，但不要太远，以免影响其他东西（本地化仍然是一件好事）。一种方法是使用块范围，例如：

```
{
    int i, j;                          // Scope starts here,
    for (i = 0, j = 0; i < 10; i++)
        if (m_Var == 1)
            j++;
    if (j == 0)                        // still exists here,
        DoSomething();
}                                      // and ends here. 
```

这仍然限制在一个特定的小区域，但允许`i`从声明中“逃脱” 。`j``j``if`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T08:51:46.713

c++ 对该变量使用块范围 - [msdn docs](http://msdn.microsoft.com/en-us/library/b80153d8%28v=vs.71%29.aspx)

# google-analytics - 萤火虫和谷歌分析中的页面加载时间

> ID：12155718
> 
> 赞同：1
> 
> 时间：2012-08-28T08:48:50.680
> 
> 标签：google-analytics, firebug, page-load-time

我知道谷歌分析的平均页面加载速度记录器与我的机器上用萤火虫记录的速度不同，这很明显。这是不同机器、浏览器和宽带速度上页面加载的平均值

但是，为什么谷歌报告会显示主页的加载时间比产品页面的加载时间长，而在 firebug 中则相反？

您对使用其中一种（或两种）工具监控网站速度有何看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T19:58:22.357

您需要忽略 Google Analytics 中的平均值，并查看 Content > Site Speed > Page Timings > Performance 选项卡中的直方图

然后探索时间变化的方式和原因

# iphone - UITableView 滚动时崩溃

> ID：12155722
> 
> 赞同：0
> 
> 时间：2012-08-28T08:49:01.643
> 
> 标签：iphone, ipad, uitableview

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    NSLog(@"Returning num sections");
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    NSLog(@"Returning num rows");
    return 5;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"Trying to return cell");
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell =[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
                                       reuseIdentifier:CellIdentifier] ;
    }
    cell.textLabel.text = @"Hello";
    NSLog(@"Returning cell");
    return cell;
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"Selected row");
}

- (void)viewDidLoad
{
    [super viewDidLoad];

   m_titleTable = [[UITableView alloc] init] ;
    m_titleTable.dataSource = self;
    m_titleTable.delegate = self;
    m_titleTable.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height);
    [self.view addSubview:m_titleTable];
    // Do any additional setup after loading the view from its nib.
}

-(void)titleAction:(id)sender{
    NSLog(@"Calling");

    UIViewController* popoverContent = [[UIViewController alloc]
                                        init];
    TitleViewController *popoverView = [[TitleViewController alloc]initWithNibName:@"TitleViewController" bundle:nil];
    popoverContent.view = popoverView.view;

    //resize the popover view shown
    //in the current view to the view's size
    popoverContent.contentSizeForViewInPopover = CGSizeMake(150, 150);
    //create a popover controller
    self->popoverController = [[UIPopoverController alloc]
                              initWithContentViewController:popoverContent];
    //present the popover view non-modal with a
    //refrence to the button pressed within the current view
    [self->popoverController presentPopoverFromRect:btn_title.frame
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionUp
                                          animated:YES];

} 
```

tableview 崩溃错误信息

```
[__NSCFType tableView:cellForRowAtIndexPath:]: unrecognized selector sent to instance 0x6e7dca0
2012-08-28 14:17:10.539 Demo[2790:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType tableView:cellForRowAtIndexPath:]: unrecognized selector sent to instance 0x6e7dca0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:04:46.010

您的问题是您的视图控制器正在被释放。你不应该做这样的事情：

```
UIViewController* popoverContent = [[UIViewController alloc]
                                    init];
TitleViewController *popoverView = [[TitleViewController alloc]initWithNibName:@"TitleViewController" bundle:nil];
popoverContent.view = popoverView.view; 
```

假设您使用的是 ARC，您的`popoverView`对象将被释放。这也是不正确的。您几乎不应该实例化 UIViewController，并且绝对不应该将一个视图控制器的`view`实例分配给另一个视图控制器！

这是我重写您的方法的`titleAction:`方法：

```
TitleViewController *titleViewController = [[TitleViewController alloc]initWithNibName:@"TitleViewController" bundle:nil];

//resize the popover view shown
//in the current view to the view's size
popoverContent.contentSizeForViewInPopover = CGSizeMake(150, 150);
//create a popover controller
self.popoverController = [[UIPopoverController alloc]
                          initWithContentViewController:titleViewController];
//present the popover view non-modal with a
//refrence to the button pressed within the current view
[self.popoverController presentPopoverFromRect:btn_title.frame
                                        inView:self.view
                      permittedArrowDirections:UIPopoverArrowDirectionUp
                                      animated:YES]; 
```

UIPopoverController 至少应该保持对 titleViewController 的强引用并防止它被释放。

PS我将您的“self->popoverController”更改为self.popoverController，因为->对于您尝试做的事情并不正确。点表示法明确表明您正在为对象设置属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:11:01.530

在`viewDidLoad`你分配和启动一个`UITableView`并将它连接到自我。您没有`UITableView?`在笔尖中定义和连接？如果没有看到你的整个项目，我的猜测是你有`UITableViews`- 这是一个问题，但不一定是崩溃问题。你继承自基`UITableViewController`类吗？

# android - 对于团队来说，最好的 android Log 策略是什么？

> ID：12155737
> 
> 赞同：2
> 
> 时间：2012-08-28T08:50:13.780
> 
> 标签：android, exception, logging, coding-style

我们在开发 Android 应用程序时总是记录异常。并且我们要规范格式和策略以防止打印 e.printStackTrace() 或不必要的日志？

那么最好的策略是什么？

我们要执行 `Log.x(String tag, String msg, Throwable tr)` to `Log.x(tag, msg+tr.toString())`吗？

请给我一些建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T10:58:29.847

*   创建一个自定义`Log`类。
*   让每个类都导入这个而不是`android.util.Log`

    ```
    public class Log{
    public static final boolean enableInfo      = false;
    public static final boolean enableError     = true;
    public static final boolean enableDebug     = true;
    public static final boolean enableVerbose   = false;

    public static void i(String tag, String msg) {
        if(enableInfo) {
            android.util.Log.i(tag,msg);
        }
    }
    public static void e(String tag, String msg) {
        if(enableError) {
            android.util.Log.e(tag,msg);
        }
    }
    public static void e(String tag, String msg, Exception e) {
        if(enableError) {
            android.util.Log.e(tag,msg, e);
        }
    }
    public static void v(String tag, String msg) {
        if(enableVerbose) {
            android.util.Log.v(tag,msg);
        }
    }
    public static void d(String tag, String msg) {
        if(enableDebug) {
            android.util.Log.d(tag,msg);
        }
    } 
    ```

    }

*   使用这种技术，您可以通过更改单个文件中的常量来启用和禁用整个应用程序中的日志，例如当您必须进行构建以发布应用程序时等。

    ```
    public static final boolean enableInfo      = false;
    public static final boolean enableError     = true;
    public static final boolean enableDebug     = true;
    public static final boolean enableVerbose   = false; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:57:07.637

异常是错误，因此为了突出它们，我总是更喜欢在 android 中使用 Log.e。我总是选择 Log.e(LOG_TAG,e.getMessage());。我总是希望我的异常/可抛出消息简短但有意义。有时您可以打印出自己的日志消息，例如 Log.e(LOG_TAG,"除以零错误");

由你决定，哪个更适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:14:00.070

您肯定想使用 Log.e/w/d/i 我将它包装到另一个函数调用中，以便我可以将它们隐藏在发布版本中，但只需在函数调用中测试布尔常量

# android - Android HttpClient 线程安全

> ID：12155740
> 
> 赞同：0
> 
> 时间：2012-08-28T08:50:17.383
> 
> 标签：android, multithreading, httpclient

我正在实现简单的 HttpManager ，它将用作单例，它可以并行执行来自不同线程的多个请求。您能否看一下该代码并告诉我概念是否可行。

```
public class HttpManager implements IHttpManager {

    private static final String TAG = HttpManager.class.getSimpleName();    
    private static final String HOST
    private static final int PORT = 80;

    private Handler mHandler; 
    private HttpClient mHttpClient;

    private static HttpManager sInstance = new HttpManager();

    public static HttpManager instance() {
        return sInstance;
    }

    private HttpManager() {
        mHandler = new Handler();
        mHttpClient = new DefaultHttpClient();
    }

    @Override
    public void execute(final IHttpRequest request) {   
        final String action = request.getAction();
        final List<NameValuePair> params = translateParams(request.getParams());

        (new Thread() {
            public void run() {
                try {                   
                    URI uri =URIUtils.createURI("http",HOST+"/"+action+".php", 
                        PORT, "", URLEncodedUtils.format(params, "UTF-8"), null);                   
                    final HttpGet httpget = new HttpGet(uri);

                    try {
                        HttpResponse response = mHttpClient.execute(httpget);
                        HttpEntity entity = response.getEntity();
                        if (entity != null) {
                            InputStream instream = entity.getContent();
                            final String text = readStream(instream);
                            Log.d(TAG, text);
                            mHandler.post(new Runnable() {
                                public void run() {
                                    request.onCompleted(text);
                                }
                            });
                        }
                    } catch (ClientProtocolException e) {
                        e.printStackTrace();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                } catch (URISyntaxException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:58:12.833

我会这样改变它：

```
private static HttpManager sInstance = null;

public static HttpManager getInstance() {
    if( instance == null)
        sInstance = new HttpManager();

    return sInstance;
}

private HttpManager() {
    mHandler = new Handler();
    mHttpClient = new DefaultHttpClient();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:26:10.577

这会起作用，但线程很昂贵，所以尽量避免创建它们。不要为每个请求创建一个，而是使用[ThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ThreadPoolExecutor.html)。在您的执行方法中，不是创建线程，而是创建一个 Runnable 并将其传递给 Executor。

还要注意您使用的线程池大小。太多的线程会使您的设备陷入困境。此外，太多的同时网络请求可能会导致性能下降，尤其是在移动网络上。

# celery - 想知道 celery 什么时候开始工作

> ID：12155741
> 
> 赞同：0
> 
> 时间：2012-08-28T08:50:18.320
> 
> 标签：celery, celery-task, celerybeat

我是新手`celery`。我有一些配置`celeryconfig.py`如下：

```
from datetime import timedelta

BROKER_URL='redis://localhost:6379/0'
CELERY_RESULT_BACKEND="redis"
CELERY_REDIS_HOST="localhost"
CELERY_REDIS_PORT=6379
CELERY_REDIS_DB=0
CELERY_IMPORT=("mail")

CELERYBEAT_SCHEDULE={'runs-every-30-seconds' :
                        {
                                'task': 'mail.mail',
                                'schedule': timedelta(seconds=30),
                        },
                    } 
```

我已安排作业将在 30 秒内定期运行。现在我希望工作应该从那时开始`29 aug`我`4:00PM`应该如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:03:49.733

您应该使用 Cron 而不是 timedelta。Celery 文档专门讨论了这一点，并提供了一些有用的示例。请参阅[Crontab 计划](http://docs.celeryproject.org/en/latest/userguide/periodic-tasks.html)

这是芹菜的一个例子：

```
from celery.schedules import crontab

CELERYBEAT_SCHEDULE = {
    # Executes every Monday morning at 7:30 A.M
    'every-monday-morning': {
        'task': 'tasks.add',
        'schedule': crontab(hour=7, minute=30, day_of_week=1),
        'args': (16, 16),
    },
} 
```

要使其适合您的条件，您还需要指定 cron`month_of_year`参数。

# jquery - 墙脚本返回评论（FuelPHP）

> ID：12155747
> 
> 赞同：0
> 
> 时间：2012-08-28T08:50:34.967
> 
> 标签：jquery, ajax, fuelphp

我遇到了一个我无法解决的问题。

我创建了一个类似于 Facebook 的墙，一切正常。我从来没有这样做过以这种方式返回评论；我对如何将评论返回到流帖子一无所知。

这是我的代码

该模型

```
class Main extends \Model {

    static function post_stream()
    {
        DB::set_charset('utf8');
        $query = DB::insert('stream_post');

        $query->set(array(
            'stream_text' => \Input::post('stream_post'),
            'user_id' => \Session::get('sentry_user'),
            //'date' => time(),
        ));

        $query->execute();
    }

    static function get_stream()
    {
        $query = DB::select()->from('stream_post');
        $query->join('users_metadata');
        $query->on('stream_post.user_id', '=', 'users_metadata.user_id');
        $query->order_by('stream_post.stream_id', 'DESC');
        $result = $query->execute();
        foreach($result as $row)
        {
            $data[] = $row;
        }
        return $data;
    }

    static function post_stream_comment()
    {
        $query = DB::insert('stream_comment');

        $query->set(array(
            'user_id' => \Session::get('sentry_user'),
            'stream_id' => \Input::post('comment_post'),
            'comment_text' => \Input::post('comment_text'),
            )
        );

        $query->execute();
    } 
```

查看（我用 jQuery 加载这个）

```
<div class="stream-posts">
    <?php foreach($posts as $post): ?>
        <div id="post_<?php echo $post['stream_id']; ?>" class="span6 stream-content">
            <span class="user"><a href="#"><?php echo $post['full_name']; ?></a></span>
            <p><?php echo Input::auto_link(Input::nl2br_limit($post['stream_text'], 2)); ?></p>
            <div class="clear"></div>
            <div class="feedback">
                <a href="#" class="like" rel="nofollow">Tetszik</a> - 
                <a href="#" class="comment" rel="nofollow">Hozzászólás</a>
            </div>
            <div class="clear"></div>
            <div class="stream-comment">
                <form class="stream-comment-form">
                    <input type="hidden" name="comment_post" value="<?php echo $post['stream_id']; ?>">
                    <textarea name="comment_text"></textarea>
                    <button type="submit" class="btn btn-primary btn-mini pull-right">Hozzászólok</button>
                </form>
            </div>
        </div>
        <div class="clear"></div>
    <?php endforeach; ?>
</div> 
```

控制器

```
function action_loadstream()
    {

        $data['posts'] = Main::get_stream();
        $data['comments'] = Main::get_stream_comment();
        return View::forge('main/loadstream', $data);
    } 

    function action_post_stream()
    {

        Main::post_stream();
        $data['get'] = Main::get_stream();
        $stream = json_encode(
            array(
                'full_name' => $data['get'][0]['full_name'],
                'stream_text' => Input::auto_link(Input::nl2br_limit($data['get'][0]['stream_text'], 2)),
                'stream_id' => $data['get'][0]['stream_id'],
                )
            );
        return $stream;
    } 
```

jQuery

```
//stream load
        $('#stream-load').load(site_url + "main/loadstream", function(){
            //oembed();
            $('.stream-comment textarea').elastic();
    }); 

//stream comment send
            $('.stream-comment-form').on('submit', function(){
                var commentData = $(this).serialize();
                $.ajax({
                    type: "post",
                    url: site_url + "main/post_stream_comment",
                    data: commentData,
                    success: function()
                    {
                        alert('yay');
                    }
                });
                return false;
            });

        }, 100000).hide().fadeIn("slow");

    function embedHtml(stream)
    {
        var html = '';
            html += '<div class="span6 stream-content">';
            html += '<p class="stream-user"><a href="#">'+stream.full_name+'</a></p>';
            html += '<p>'+stream.stream_text+'</p>';
            html += '<div class="clear"></div>';
            html += '<div class="feedback">';
            html += '<a href="">Tetszik</a> - ';
            html += '<a href="#" class="comment">Hozzászólás</a>';
            html += '</div>';
            html += '<div class="clear"></div>';
            html += '</div>';
            html += '<div class="clear"></div>';
        return html;
    }

    //stream post send
    $('#stream-form').on('submit', function(){
        var streamData = $(this).serialize();
        $('#stream-submit').attr('disabled', 'disabled');
        $.ajax({
            type: "post",
            url: site_url + "main/post_stream",
            data: streamData,
            dataType: "json",
            success: function(stream)
            {

                $('#stream-submit').removeAttr('disabled', 'disabled');
                $('#stream textarea').val('');
                $('#stream-load').prepend(embedHtml(stream));
                $('.stream-posts:first-child').hide().slideDown("slow");
                //oembed();
            }
        });
        return false;
    }); 
```

首先，我不想让任何人为我写这个，我只是想请一位更有经验的开发人员查看我的代码并给我一些关于返回评论逻辑的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:56:10.023

当您拥有流帖子数组时，您可以从中提取 id，然后对数据库进行一次查询，以获取所有相关评论。循环遍历它，并将其附加到 post 对象/数组。它类似于 ORM 急切加载模式。所以：

```
// get all the post ids
$post_ids = Arr::pluck($result, 'id'); // since 1.3

// fetch all relating comments in one query
$comments = DB::select()
    ->from('stream_comments')
    ->where('post_id', 'in', $post_ids)
    ->execute()
    ->as_array();

// attach them to the original result set.
foreach($comments as $comment)
{
    is_array($result[$comments['post_id']]) or $result[$comments['post_id']] = array();

    $result[$comments['post_id']][] = $comment;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:36:09.713

您应该使用 ORM 在帖子之间建立关系并收集它的相关评论。这就是我会做的。

# c++ - 为什么我不能在 MinGW 中链接 64 位 .lib 文件？

> ID：12155751
> 
> 赞同：3
> 
> 时间：2012-08-28T08:50:46.220
> 
> 标签：c++, eclipse, visual-studio, mingw, eclipse-cdt

我需要在使用 MinGW 的 Eclipse CDT 中的项目中使用第三方 .lib / .dll 文件（可能在 Visual Studio 中编译）。

我可以成功地与 32 位版本（使用 32 位 MinGW）动态链接，但不能与 64 位版本（使用 64 位 MinGW）动态链接。当我运行 64 位版本时，它在调用第三方函数时崩溃。

为了让 64 位工作，我需要做些什么不同的事情吗？

谢谢，艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T09:18:43.123

我的解决方案是针对 32 位构建的 32 位**.lib**文件和 64 位构建的 64 位**.dll**文件链接。

我仍然不确定不一致来自哪里，所以欢迎任何评论。

艾伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:19:53.840

如果与 GCC (MinGW) 相比，Microsoft Visual Studio 使用一组不同的 ABI。

完成这项工作并不容易，许多项目和库为 Windows 提供了 2 个版本的库来解决这个问题，一个用于 MSVS，一个用于 MinGW。

C++ ABI 不同，但有一个与 C 语言通用的 ABI 集，一个技巧在于使用`extern C`关键字并尝试以*C 方式*使用 C++ 代码并将其链接为 C 代码。

您的问题的答案是否定的，您可以尝试一些技巧，但没有标准的 ABI 并且不能保证使其工作。

无论哪种方式，您都需要访问库的源代码以至少尝试某些操作或使用 MinGW 重新编译库，您还可以尝试向可能不知道 Windows 下此问题的开发人员发送电子邮件并要求提供这个库的不同版本。如果没有 Visual Studio，你现在拥有的东西将毫无用处。

# iphone - 任何使用 plist 的演示示例多地图注释？

> ID：12155753
> 
> 赞同：0
> 
> 时间：2012-08-28T08:50:47.710
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我想使用地图注释我有 plist 列表，其中我有数据，我想使用注释在地图上显示数据。我有演示示例 MapCallsout，但我必须阅读地图上的 plist？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:03:22.740

这是从 plist 文件中检索数据的示例，数据将存储到`NSArray`. 您可以使用此数组显示注释。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSString *fooPath = [documentsPath stringByAppendingPathComponent:@"yourPlistFile.plist"];
NSLog(fooPath);
NSArray *contentArray = [NSArray arrayWithContentsOfFile:fooPath];
NSLog(@"%@",contentArray); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:34:21.450

首先从 Plist 中获取所有位置并将它们放入一个数组中。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0];
NSString *fooPath = [documentsPath stringByAppendingPathComponent:@"yourPlistFile.plist"];
NSLog(fooPath);
NSArray *contentArray = [NSArray arrayWithContentsOfFile:fooPath];
NSLog(@"%@",contentArray); 
```

使用下面的代码在地图上显示多个注释。

```
NSMutableArray *toRemove = [NSMutableArray arrayWithCapacity:10];
        for (id annotation in yourMapView.annotations)
            if (annotation != yourMapView.userLocation)
                [toRemove addObject:annotation];
        [yourMapView removeAnnotations:toRemove];

        yourMapView.delegate = self;

        [yourMapView setMapType:MKMapTypeStandard];

        MKCoordinateRegion region;

        MKCoordinateSpan span;
        span.latitudeDelta=0.2;  
        span.longitudeDelta=0.2; 

        LocationClass *locationData=[[LocationClass alloc]init];

        for (int k=0; k<contentArray.count; k++) {

            locationData=[contentArray objectAtIndex:k];

            CLLocationCoordinate2D location; 

            region.span = span;
            region.center = location;

            location.latitude =[locationData.latitude doubleValue];
            location.longitude = [locationData.longitude doubleValue];

            AnnView *mapPoint = [[AnnView alloc] initWithLocation:location];

            mapPoint.title=[NSString stringWithFormat:@"%@ @",locationData.Title];
            mapPoint.subtitle=[NSString stringWithFormat:@"%@ ",locationData.Subtitle];

            [yourMapView addAnnotation:mapPoint];

            mapPoint = nil;

            [yourMapView setRegion:region animated:YES];
            [yourMapView regionThatFits:region];

        }

        [self zoomToFitMapAnnotations:yourMapView]; 
```

然后像下面的代码一样编写委托方法。

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    MKAnnotationView * annotationView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:@"annot"];
    if (!annotationView) {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"annot"] ;
        annotationView.canShowCallout = YES;
    }
    else {
        annotationView.annotation = annotation;
    }

        annotationView.image = [UIImage imageNamed:@"pinimage.png"];

    return annotationView;
} 
```

# c# - 页面可以从 ASP NET 网站中的另一个页面派生吗

> ID：12155765
> 
> 赞同：0
> 
> 时间：2012-08-28T08:51:26.540
> 
> 标签：c#, asp.net, .net

是否有可能在 ASP.NET 网页中某个页面派生自另一个页面？

例如：

*   我有`edit`允许编辑一些内容的页面。
*   我想创建`new`派生自`edit`并仅覆盖 Save 方法的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:16:35.857

如果您想在两个不同的页面中使用相同的功能，为什么不创建一个用户控件并包含在两个页面中，并根据用户控件的某些属性切换保存的逻辑。

例如，您可以检查以下网址

[http://asp-net-example.blogspot.com/2008/10/user-control-example-how-to-create-and.html](http://asp-net-example.blogspot.com/2008/10/user-control-example-how-to-create-and.html)

# c# - 需要.net n 层网站结构建议

> ID：12155768
> 
> 赞同：1
> 
> 时间：2012-08-28T08:51:32.983
> 
> 标签：c#, .net, n-layer

我正在使用 Entity Framework 作为我的数据访问层创建我的第一个 .net/c# 网站。我已将我的项目分成多个层，以便拥有 DataAccess、BusinessLogic、一个单独的 BusinessObjects 层，并且网站本身就是 UI（Pages/UserControls/Appcode 文件夹）。还有一个额外的实用程序插件项目。

EF 模型已进入 DA，而实体创建已进入 BO。一切都感觉很好，但我遇到了 AppCode (UI) 中的逻辑类和 BusinessLogic 中的逻辑类的问题。

是否有任何指导方针可以帮助我确定事情的哪一边？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T11:00:16.697

App_Code 只是方便您运行代码。我建议您避免使用该文件夹。只需为您的所有类创建类库项目，这将构成您的业务逻辑层。在 web 项目中，只放页面和控件（ASCX 和 ASPX 文件）。它使逻辑分离更加清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:58:33.717

Microsoft Spain 有一个参考实现；它采用 EF、Unity、WCF 等。但是，请注意，此实现可能会根据您的需要进行过度设计。在实施之前，与其复制相同的结构，不如让您决定哪些部分、概念、模式对您有用，哪些没有。

[Microsoft N 层参考实现](http://microsoftnlayerapp.codeplex.com/)

# java - 如何用Java解析请求？

> ID：12155770
> 
> 赞同：1
> 
> 时间：2012-08-28T08:51:35.480
> 
> 标签：java, javascript, servlets, extjs

我使用 java servlet 从客户端获取参数。这是我的帖子：

![在此处输入图像描述](../Images/511c7b8ce285acd1179a17adefa9c02b.png)

为了向服务器发送请求，我使用 ExtJs：

```
var x = new Ext.Window({
                                title:'Загрузка файла',
                                items:[
                                    formp = new Ext.FormPanel({
                                        fileUpload: true,
                                        width: 350,
                                        autoHeight: true,
                                        bodyStyle: 'padding: 10px 10px 10px 10px;',
                                        labelWidth: 70,
                                        defaults: {
                                            anchor: '95%',
                                            allowBlank: false,
                                            msgTarget: 'side'
                                        },
                                        items:[{
                                            xtype:"combo",
                                            fieldLabel:'Тип файла ',
                                            name:"cb_file",
                                            id:"cb_file",
                                            mode:"local",
                                            typeAhead: false,
                                            loadingText: 'Загрузка...',
                                            store:new Ext.data.SimpleStore({
                                                fields: ['file_name', 'file_type'],
                                                    data : [['*.MIF/MID', 'mif'],['*.GPX', 'gpx']]
                                                }),
                                            forceSelection:true,
                                            emptyText:'выбирите тип...',
                                            triggerAction:'all',
                                            valueField:'file_type',
                                            displayField:'file_name',
                                            anchor:'60%'
                                        },{
                                            xtype: 'fileuploadfield',
                                            id: 'filedata',
                                            emptyText: 'Выберите файл для загрузки...',
                                            fieldLabel: 'Имя файла',
                                            buttonText: 'Обзор'
                                        }],
                                        buttons: [{
                                            text: 'Загрузить',
                                            handler: function(){
                                                mapinfo="mapinfo";
                                                    formp.getForm().submit({
                                                        url: url_servlet+'uploadfile',
                                                        //params: {file_type: mapinfo},
                                                        success: function(formp, o) {
                                                            alert(o.result.file);
                                                            alert(o.result.success);
                                                            kad_tab.getStore().reload()
                                                            zoom_store.load();
                                                            }
                                                    })
                                            }
                                        }]
                                    })
                                ]   
                             })
                             x.show(); 
```

如果我理解正确：在向服务器发送 2 个参数`cb_file`和`filedata`. 我尝试通过以下方式获得它们：

```
String st = request.getParameter("cb_file"); 
```

但是得到null。

当我尝试获取文件时：

```
list = upload.parseRequest(request); 
```

我也明白`null`。
但是如果我只发送文件（为此我删除带有组合框的行）它工作正常。
如何解析这个请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:52:23.610

那是因为请求是多部分的。您可以阅读请求流并自己解析它或使用 Apache Commons（请使用这个！）。

[在这里，您有一个片段，说明了如何使用Apache Commons fileupload](http://commons.apache.org/fileupload/)执行您想要执行的操作：

```
// Process the uploaded items
List items = upload.parseRequest(request);
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {
        processFormField(item);
    } else {
        processUploadedFile(item);
    }
} 
```

祝你好运！

# jquery - mongo 划分每个领域

> ID：12155773
> 
> 赞同：-1
> 
> 时间：2012-08-28T08:51:47.530
> 
> 标签：jquery, mongodb

如何在集合中的每个 mongo 文档中将字段除以 100。

例如，如果我有文件

```
{
"item":"Shoe",
"cost":100
}
{
"item":"tie",
"cost":1000
} 
```

如何更新除以 100 的每个项目成本

到目前为止我有

```
db.Usage.update({ }, {$set : {'cost': 'cost'/100}}, false, true) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:59:45.830

您必须使用 $set 运算符查找（）每个单独的文档并使用新值更新（）每个文档。

您*不能使用**一个*update() 操作来执行这样的更新。

# sql - postgresql选择查询中的最大表数

> ID：12155777
> 
> 赞同：0
> 
> 时间：2012-08-28T08:51:51.583
> 
> 标签：sql, postgresql, select, join

我有 7 个表可以加入单选查询。但是，当我加入 5 个表中的任何一个时，它工作正常，但加入 7 个表会使查询无响应。而只有大约 2k 条记录可供选择。这是我的查询：

```
select c.i_cdr, v.i_cdrs_connection, c.i_call,
cs.name AS customer_name, a.username AS client_name_id,
con.name AS connection_name, vn.name AS vendor_name_id,
ca.setup_time,
c.remote_ip AS c_remote_ip_id, con.destination AS v_remote_ip_id
FROM cdrs c
JOIN Calls ca using (i_call)
JOIN cdrs_connections v using (i_call)
JOIN accounts a using(i_account)
JOIN customers cs using (i_customer)
JOIN connections con using(i_connection)
JOIN vendors vn using (i_vendor)
where i_cdr>397233018 
```

如果对单个查询中的最大表数或最大列数有任何限制？

我试过减少列但没有用。

postgresql 配置。

```
postgres 8.4
shared_buffers = 128MB
work_mem = 32MB
maintenance_work_mem = 64MB 
```

来电表：

```
Create Table calls
(
i_call serial Not null,
setup_time timestamp Not Null,
cli character varying(64),
cld character varying(64)
) 
```

cdrs 表：

```
Create Table cdrs
(
i_cdr serial Not null,
i_call bigint Not Null,
remote_ip character varying(64),
i_account bigint Not Null
//few more not used fields
) 
```

账户表：

```
Create Table accounts
(
i_account serial Not null,
i_customer bigint Not Null,
username character varying(128)
) 
```

客户表：

```
Create Table customers
(
i_customer serial Not null,
name character varying(128)
) 
```

cdrs_connections：

```
Create Table cdrs_connections
(
i_cdrs_connection serial Not null,
i_call bigint Not null,
i_connection bigint Not null,
connect_time timestamp,
cld_out character varying(64),
cli_out character varying(128)
) 
```

连接：

```
Create Table connections
(
i_connection serial Not null,
i_vendor bigint Not null,
name varying character(64),
destination character varying(64)
) 
```

供应商：

```
Create Table vendors
(
i_vendor serial Not null,
name character varying(64)
); 
```

解释跟踪：

遍历的主要表是分区的，即使我排除具有 500 行的帐户和具有 26 行的客户也可以正常工作。

## 查询计划

```
Nested Loop  (cost=3388.21..3202797988160500.00 rows=6369283937505514496 width=122)
   Join Filter: (c.i_call = ca.i_call)
   ->  Nested Loop  (cost=3388.21..29281315906299.16 rows=12704473261254 width=122)
         ->  Hash Join  (cost=3388.21..310816005731.24 rows=12704473261254 width=121)
               Hash Cond: (c.i_account = a.i_account)
               ->  Nested Loop  (cost=0.00..24965353964.82 rows=12704473261254 width=112)
                     Join Filter: (v.i_call = c.i_call)
                     ->  Nested Loop  (cost=0.00..1708130302.64 rows=61256189 width=69)
                           ->  Nested Loop  (cost=0.00..465977965.21 rows=61256189 width=60)
                                 ->  Append  (cost=0.00..6600178.80 rows=61256189 width=24)
                                       ->  Index Scan using cdrs_connections_i_call on cdrs_connections v  (cost=0.00..22.03 rows=310 width=24)
                                       ->  Index Scan using cdrs_connections1_i_call on cdrs_connections1 v  (cost=0.00..219415.43 rows=568528 width=24)
                                       ->  Index Scan using cdrs_connections2_i_call on cdrs_connections2 v  (cost=0.00..34433.40 rows=536331 width=24)
                                       ->  Index Scan using cdrs_connections3_i_call on cdrs_connections3 v  (cost=0.00..359871.77 rows=885115 width=24)
                                       ->  Index Scan using cdrs_connections4_i_call on cdrs_connections4 v  (cost=0.00..84725.16 rows=1316695 width=24)
                                       ->  Index Scan using cdrs_connections5_i_call on cdrs_connections5 v  (cost=0.00..66291.88 rows=1046102 width=24)
                                       ->  Index Scan using cdrs_connections6_i_call on cdrs_connections6 v  (cost=0.00..74410.59 rows=1043184 width=24)
                                       ->  Index Scan using cdrs_connections7_i_call on cdrs_connections7 v  (cost=0.00..79614.35 rows=1244914 width=24)
                                       ->  Index Scan using cdrs_connections8_i_call on cdrs_connections8 v  (cost=0.00..78292.13 rows=1228840 width=24)
                                       ->  Index Scan using cdrs_connections9_i_call on cdrs_connections9 v  (cost=0.00..23.84 rows=320 width=24)
                                       ->  Index Scan using cdrs_connections10_i_call on cdrs_connections10 v  (cost=0.00..869491.71 rows=1326456 width=24)
                                       ->  Index Scan using cdrs_connections11_i_call on cdrs_connections11 v  (cost=0.00..84478.96 rows=1329600 width=24)
                                       ->  Index Scan using cdrs_connections12_i_call on cdrs_connections12 v  (cost=0.00..34373.13 rows=529498 width=24)
                                       ->  Index Scan using cdrs_connections13_i_call on cdrs_connections13 v  (cost=0.00..47.28 rows=330 width=24)
                                       ->  Index Scan using cdrs_connections14_i_call on cdrs_connections14 v  (cost=0.00..33623.46 rows=506174 width=24)
                                       ->  Index Scan using cdrs_connections15_i_call on cdrs_connections15 v  (cost=0.00..31732.57 rows=485078 width=24)
                                       ->  Index Scan using cdrs_connections16_i_call on cdrs_connections16 v  (cost=0.00..29434.18 rows=460046 width=24)
                                       ->  Index Scan using cdrs_connections17_i_call on cdrs_connections17 v  (cost=0.00..32157.93 rows=500074 width=24)
                                       ->  Index Scan using cdrs_connections18_i_call on cdrs_connections18 v  (cost=0.00..35811.81 rows=561528 width=24)
                                       ->  Index Scan using cdrs_connections19_i_call on cdrs_connections19 v  (cost=0.00..157742.69 rows=835540 width=24)
                                       ->  Index Scan using cdrs_connections20_i_call on cdrs_connections20 v  (cost=0.00..104175.88 rows=1638302 width=24)
                                       ->  Index Scan using cdrs_connections21_i_call on cdrs_connections21 v  (cost=0.00..232173.00 rows=1859055 width=24)
                                       ->  Index Scan using cdrs_connections22_i_call on cdrs_connections22 v  (cost=0.00..99680.31 rows=1549844 width=24)
                                       ->  Index Scan using cdrs_connections23_i_call on cdrs_connections23 v  (cost=0.00..913103.99 rows=1597071 width=24)
                                       ->  Index Scan using cdrs_connections24_i_call on cdrs_connections24 v  (cost=0.00..151771.48 rows=1547203 width=24)
                                       ->  Index Scan using cdrs_connections25_i_call on cdrs_connections25 v  (cost=0.00..48.24 rows=320 width=24)
                                       ->  Index Scan using cdrs_connections26_i_call on cdrs_connections26 v  (cost=0.00..94067.11 rows=1472598 width=24)
                                       ->  Index Scan using cdrs_connections27_i_call on cdrs_connections27 v  (cost=0.00..110525.50 rows=1083587 width=24)
                                       ->  Index Scan using cdrs_connections28_i_call on cdrs_connections28 v  (cost=0.00..352381.02 rows=1068230 width=24)
                                       ->  Index Scan using cdrs_connections29_i_call on cdrs_connections29 v  (cost=0.00..78430.93 rows=1234409 width=24)
                                       ->  Index Scan using cdrs_connections30_i_call on cdrs_connections30 v  (cost=0.00..44659.37 rows=696125 width=24)
                                 ->  Index Scan using connections_pkey on connections con  (cost=0.00..7.49 rows=1 width=52)
                                       Index Cond: (con.i_connection = v.i_connection)
                           ->  Index Scan using vendors_pkey on vendors vn  (cost=0.00..20.27 rows=1 width=25)
                                 Index Cond: (vn.i_vendor = con.i_vendor)
                     ->  Append  (cost=0.00..378.91 rows=61 width=43)
                           ->  Index Scan using cdrs_i_call on cdrs c  (cost=0.00..3.87 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs1_i_call on cdrs1 c  (cost=0.00..8.32 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs2_i_call on cdrs2 c  (cost=0.00..8.32 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs3_i_call on cdrs3 c  (cost=0.00..8.38 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs4_i_call on cdrs4 c  (cost=0.00..8.45 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs5_i_call on cdrs5 c  (cost=0.00..8.42 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs6_i_call on cdrs6 c  (cost=0.00..8.43 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs7_i_call on cdrs7 c  (cost=0.00..8.48 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs8_i_call on cdrs8 c  (cost=0.00..8.44 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs9_i_call on cdrs9 c  (cost=0.00..2.27 rows=1 width=38)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs10_i_call on cdrs10 c  (cost=0.00..8.45 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs11_i_call on cdrs11 c  (cost=0.00..8.44 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs12_i_call on cdrs12 c  (cost=0.00..8.32 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs13_i_call on cdrs13 c  (cost=0.00..3.87 rows=1 width=38)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs14_i_call on cdrs14 c  (cost=0.00..8.32 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs15_i_call on cdrs15 c  (cost=0.00..8.31 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs16_i_call on cdrs16 c  (cost=0.00..8.31 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs17_i_call on cdrs17 c  (cost=0.00..8.32 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs18_i_call on cdrs18 c  (cost=0.00..8.32 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs19_i_call on cdrs19 c  (cost=0.00..8.36 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs20_i_call on cdrs20 c  (cost=0.00..8.48 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs21_i_call on cdrs21 c  (cost=0.00..8.51 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs22_i_call on cdrs22 c  (cost=0.00..8.47 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs23_i_call on cdrs23 c  (cost=0.00..8.47 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs24_i_call on cdrs24 c  (cost=0.00..8.47 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs25_i_call on cdrs25 c  (cost=0.00..3.87 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs26_i_call on cdrs26 c  (cost=0.00..8.49 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs27_i_call on cdrs27 c  (cost=0.00..8.42 rows=1 width=37)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs28_i_call on cdrs28 c  (cost=0.00..8.41 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs29_i_call on cdrs29 c  (cost=0.00..8.43 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
                           ->  Index Scan using cdrs30_i_call on cdrs30 c  (cost=0.00..8.35 rows=1 width=36)
                                 Index Cond: (c.i_call = v.i_call)
                                 Filter: (c.i_cdr > 39726118)
               ->  Hash  (cost=3001.41..3001.41 rows=30944 width=25)
                     ->  Index Scan using accounts_i_customer on accounts a  (cost=0.00..3001.41 rows=30944 width=25)
         ->  Index Scan using customers_pkey on customers cs  (cost=0.00..2.27 rows=1 width=17)
               Index Cond: (cs.i_customer = a.i_customer)
   ->  Append  (cost=0.00..249.41 rows=31 width=16)
         ->  Index Scan using calls_pkey on calls ca  (cost=0.00..3.87 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls1_pkey on calls1 ca  (cost=0.00..8.42 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls2_pkey on calls2 ca  (cost=0.00..8.42 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls3_pkey on calls3 ca  (cost=0.00..8.63 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls4_pkey on calls4 ca  (cost=0.00..9.07 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls5_pkey on calls5 ca  (cost=0.00..8.84 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls6_pkey on calls6 ca  (cost=0.00..8.90 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls7_pkey on calls7 ca  (cost=0.00..8.95 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls8_pkey on calls8 ca  (cost=0.00..8.65 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls9_pkey on calls9 ca  (cost=0.00..3.87 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls10_pkey on calls10 ca  (cost=0.00..8.78 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls11_pkey on calls11 ca  (cost=0.00..8.75 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls12_pkey on calls12 ca  (cost=0.00..8.40 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls13_pkey on calls13 ca  (cost=0.00..3.87 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls14_pkey on calls14 ca  (cost=0.00..8.40 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls15_pkey on calls15 ca  (cost=0.00..8.42 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls16_pkey on calls16 ca  (cost=0.00..8.39 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls17_pkey on calls17 ca  (cost=0.00..8.40 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls18_pkey on calls18 ca  (cost=0.00..8.40 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls19_pkey on calls19 ca  (cost=0.00..8.53 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls20_pkey on calls20 ca  (cost=0.00..8.78 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls21_pkey on calls21 ca  (cost=0.00..8.84 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls22_pkey on calls22 ca  (cost=0.00..8.78 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls23_pkey on calls23 ca  (cost=0.00..8.79 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls24_pkey on calls24 ca  (cost=0.00..8.74 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls25_pkey on calls25 ca  (cost=0.00..3.87 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls26_pkey on calls26 ca  (cost=0.00..9.45 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls27_pkey on calls27 ca  (cost=0.00..8.56 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls28_pkey on calls28 ca  (cost=0.00..8.60 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls29_pkey on calls29 ca  (cost=0.00..8.60 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
         ->  Index Scan using calls30_pkey on calls30 ca  (cost=0.00..8.44 rows=1 width=16)
               Index Cond: (ca.i_call = c.i_call)
(326 rows) 
```

暗示：

我不知道确切原因，但是当我使用给定查询创建视图时没有最后两个表连接和供应商然后加入这个视图与剩余表查询工作得很好。

解决方案：我通过改变加入顺序解决了这个问题。从：

```
select c.i_cdr, v.i_cdrs_connection, c.i_call,
cs.name AS customer_name, a.username AS client_name_id,
con.name AS connection_name, vn.name AS vendor_name_id,
ca.setup_time,
c.remote_ip AS c_remote_ip_id, con.destination AS v_remote_ip_id
FROM cdrs c
JOIN Calls ca using (i_call)
JOIN cdrs_connections v using (i_call)
JOIN accounts a using(i_account)
JOIN customers cs using (i_customer)
JOIN connections con using(i_connection)
JOIN vendors vn using (i_vendor)
where i_cdr>397233018 
```

到：

```
select c.i_cdr, v.i_cdrs_connection, c.i_call,
cs.name AS customer_name, a.username AS client_name_id,
con.name AS connection_name, vn.name AS vendor_name_id,
ca.setup_time,
c.remote_ip AS c_remote_ip_id, con.destination AS v_remote_ip_id
FROM cdrs c
JOIN accounts a using(i_account)
JOIN customers cs using (i_customer)
JOIN Calls ca using (i_call)
JOIN cdrs_connections v using (i_call)
JOIN connections con using(i_connection)
JOIN vendors vn using (i_vendor)
where i_cdr>397233018 
```

这是因为 cdrs 表链接到accounts 表，而accounts 表又连接到customers 表。而 vendor 表通过连接表连接到 cdrs_connections。因此，通过按顺序放置这些表来删除循环。现在响应时间真的很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:14:09.313

请参阅[关于 PostgreSQL 中的限制标题以](http://www.postgresql.org/about/)获取最大列。

我不确定连接中是否有最大数量的表。在实践中，真正的限制将是时间、计算机的性能和 RAM+磁盘空间。

您确实需要检查您正在使用的查询计划，[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/static/sql-explain.html)以了解什么是缓慢的以及为什么。[explain.depesz.com](http://explain.depesz.com)可以帮助使生成的计划更具可读性。

注意确保您没有得到任何不需要的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。不过，您可能没有得到您正在使用的`INNER JOIN ... USING`语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T10:01:46.920

只需将“order by i_cdr”添加到您的查询中

# php - MySQL的性能

> ID：12155779
> 
> 赞同：1
> 
> 时间：2012-08-28T08:51:55.813
> 
> 标签：php, mysql

MyPHP 应用程序使用 HTTPClient 向 MySQL 发送一个 SELECT 语句。

大约需要 20 秒或更长时间。我认为 MySQL 无法立即获得结果，因为 MySQL 管理员在我等待结果期间`sending data`或期间显示 stat 。`copying to tmp table`

但是，当我从另一个应用程序（如 phpMyAdmin 或 jmater）发送相同的 SELECT 语句时，它需要 2 秒或更短时间。快 10 倍！

有谁知道为什么 MySQL 表现如此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:37:20.210

就像@symcbean 已经说过的那样，php 的 mysql 驱动程序缓存查询结果。这也是为什么你可以`mysql_query()`在`while($row=mysql_fetch_array())`循环中再做一次。

MySql Administrator 或 phpMyAdmin 如此快速地显示结果的原因是它们`LIMIT 10`在您背后附加了一个查询。

如果您想快速获得查询结果，我可以提供一些提示。它们涉及仅选择您需要的内容以及何时需要：

*   只选择你需要的列，不要`select *`到处乱扔。当您想要另一列但忘记将其添加到`select`语句时，这可能会咬到您，所以在需要时执行此操作（例如具有 100 列或一百万行的表）。
*   不要在你的用户面前扔一个 20 x 1000 的桌子。无论如何，她在一张巨大的桌子上找不到她要找的东西。提供排序和过滤。作为奖励，找出她通常寻找的内容，并提供一种单击即可显示该记录的方法。
*   对于非常大的表，只选择您需要的记录的主键。`while()`而不是在循环中检索其他详细信息。这可能看起来不合逻辑，因为您进行了更多查询，但是当您处理涉及大约 10 个表、数百个并发用户、锁和查询缓存的查询时；一开始事情并不总是有意义的:)

这些是我从老板和我自己的经验中学到的一些技巧。一如既往，YMMV。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:28:25.533

> 有谁知道为什么 MySQL 表现如此不同？

因为 MySQL[缓存查询](http://dev.mysql.com/doc/refman/5.1/en/query-cache.html)结果，而操作系统缓存磁盘 I/O（Linux 中的进程描述[见此链接）](http://static.usenix.org/event/usenix01/full_papers/kroeger/kroeger_html/node8.html)

# html - 是否可以从广告单元预填充表单？

> ID：12155781
> 
> 赞同：1
> 
> 时间：2012-08-28T08:51:59.073
> 
> 标签：html, forms, iframe, flash, ads

这可能是一个我知道答案的问题，但从后勤的角度来看，我只想确定一下。一位客户询问是否可以有一个包含几个表单字段的广告单元。如果客户填写了这些详细信息的一部分，然后点击“提交”，他们将被带到实际表格，他们之前输入的数据将被预先填充。

以编程方式，我相信这是可能的（使用 iframe？），但由于这将来自广告单元（更具体地说是 SWF 文件），我想知道这是否可能。可以使用 HTML5 完成吗？

我知道这不是很多信息，但目前这是我拥有的所有信息 - 我会尽可能地尝试更新问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T07:37:45.023

使用`externalInterface`：

```
import flash.system.Capabilities;

var playerType:String = ExternalInterface.call("function(){return Capabilities.playerType}") 
```

为此，如以下示例所示：

*   [JavaScript 和 ActionScript 匡威](http://active.tutsplus.com/tutorials/actionscript/javascript-and-actionscript-converse-introduction-to-externalinterface/)

*   [Flash 和 JavaScript 可以交互](http://www.codeweblog.com/flash-and-javascript-can-interact-externalinterface-class/)

*   [Flex 和 JavaScript](http://www.adobe.com/devnet/flex/articles/flex_javascript.html)

# drupal-7 - 如何使用 EntityFieldQuery 应用分类条件？

> ID：12155784
> 
> 赞同：0
> 
> 时间：2012-08-28T08:52:20.363
> 
> 标签：drupal-7, drupal-taxonomy

我有一个内容类型，其中有一个标签字段是分类术语。我想进行查询以获取包含`$tag`用户插入的变量的所有节点。我知道如何使用`db_query`，但如果我使用`EntityFieldQuery`似乎我无法申请加入。

我该怎么做？我必须使用`db_query`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:24:21.080

An`EntityFieldQuery`不允许`IS NOT NULL`或类似条件，因此无法查询包含特定字段值的所有节点。您只能查询对特定字段具有*特定*值的节点。

它们也是自包含的，因此除非`hook_query_alter()`在查询从 an 转换`EntityFieldQuery`为 standard后实现并物理添加连接，否则无法添加额外的连接`SelectQuery`。那，或子类`EntityFieldQuery`并自己添加新逻辑。

也就是说，您需要自己形成查询。但是，如果您只是查询节点，我建议您使用`taxonomy_index`表而不是字段表，因为这将产生更清晰的查询并使生活更轻松。

# c# - 如何实现子类中必须覆盖的 const 字段 .net 4

> ID：12155786
> 
> 赞同：3
> 
> 时间：2012-08-28T08:52:23.967
> 
> 标签：c#, oop, c#-4.0

如何实现子类中的`const field`which 必须被覆盖，我正在使用`.net 4, C#`

因为我有很多类`all have a const field`（具有不同的值）称为“pName”。

所以我想使用接口或抽象类或其他东西作为父类并强制这些类覆盖它。

这是**`CONST`**场

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T08:55:29.810

你不能`override`; 你也`const`不能在那里声明它。您*可以*做的是重新声明它，但这***并不可靠***- 使用哪个版本取决于您要求的版本（完全在编译时 - 与多态性完全无关）：`static``override`

 **```
public new const int Foo = 12; 
```

我建议您使用`virtual`or`abstract`属性：

```
public virtual int Foo { get { return 4; } } // subclasses *can* override
public abstract int Foo { get; } // subclasses *must* override 
```

和`override`：

```
public override int Foo { get { return 12; } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T08:55:05.253

你的要求是矛盾的：你不能定义一个可以覆盖的常量值，所以在派生类中改变。

您*可以*做的是在基类中定义*默认*值，并在派生类中覆盖它。

```
public class Base 
{
    public static reaondly int DEFAULT_BASE_VALUE = 0,
    private int _someValue = DEFAULT_BASE_VALUE;   //ASSIGN DEFAULT VALUE

    public virtual int SomeValue {
        get {
           return _someValue;
        }
    } 
}

public class Derived : Base
{

     public override int SomeValue {
        get {
           return -3;    //CHANGE VALUE OF BASE CLASS 
        }
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T08:55:05.933

你不能，常量不是虚拟成员。

你可以做的是拥有一个*只读*属性，例如

```
public class BaseClass
{
    public BaseClass()
    {
    }

    protected int MyProperty { get { return 10; } }
}

public class DerivedClass : BaseClass
{
    public DerivedClass()
    {
    }

    protected override int MyProperty { get { return 20; } }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T08:56:51.170

你不能。你可以做的是像这样声明一个抽象的只读属性

```
abstract class A
{
        public abstract int ReadOnlyProp {get;}
}

class B : A
{
    public override int ReadOnlyProp
    {
        get { return 42; }
    }
} 
```**

# iphone - 滚动视图 iPhone 内的文本字段

> ID：12155787
> 
> 赞同：1
> 
> 时间：2012-08-28T08:52:25.060
> 
> 标签：iphone, ios, ios5

我是 iPhone 新手，我的应用程序中有 10 个文本字段位于滚动视图中。我需要的是当用户触摸文本字段时，scrollview 应该以这种方式滚动，以便文本字段不应该在键盘后面。

帮我。

谢谢你对我的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:38:02.740

像这样覆盖文本字段委托方法

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    [self scrollViewToCenterOfScreen:textField]; 
} 
```

//该方法将当前选中的文本框移动到可见区域

```
-(void)scrollViewToCenterOfScreen:(UIView *)theView 
{ 
    CGFloat viewCenterY = theView.center.y; 
    CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame]; 

    CGFloat availableHeight = applicationFrame.size.height - 200; // Remove area covered by keyboard  

    CGFloat y = viewCenterY - availableHeight / 2.0; 
    if (y < 0) { 
        y = 0; 
    } 
    [scrollview setContentOffset:CGPointMake(0, y) animated:YES]; 
} 
```

当您想关闭键盘时，请覆盖此委托

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
        [textField resignFirstResponder];
        [self.scrollview setContentOffset:CGPointMake(0, 0) animated:YES];
    return YES;
} 
```

# mysql - 减少mysql查询执行时间

> ID：12155789
> 
> 赞同：4
> 
> 时间：2012-08-28T08:52:29.500
> 
> 标签：mysql

```
SELECT mt.Test_ID,
       mtp.Test_Plan_Doc_No,
       mp.Group_Name,
       mp.Point_Name,
       mp.Limit_1,
       mp.Limit_2,
       mp.Datatype,
       mt.Start_Date,
       mv.Measurement_Value,
       mv.Status_Value
FROM   measurement_test mt
       INNER JOIN measurement_values mv
               ON mt.Test_ID = mv.Test_ID
       INNER JOIN measurement_point mp
               ON mv.Point_ID = mp.Point_ID
       INNER JOIN measurement_test_plan mtp
               ON mtp.Test_ID = mt.Test_ID
WHERE  mtp.Test_Plan_Doc_No IN ( 'test1', 'test2' )
       AND mp.Group_Name = 'gp_name' 
```

大家好。

以上是我为创建视图而执行的查询。

但我有一个问题如下：

测量值表大约有 8200 万行。测量点表有大约 500 万行测量测试计划和测量测试表有大约 9000 - 100000 行。

我的问题是当我执行上述查询时，执行时间为 8 分钟，生成的结果只有 400 行。

有什么方法可以减少上述查询的执行时间？

注意：我在我的网页中使用上述查询

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:03:34.160

首先，为了提高效率`join`，您应该保持表格按行数递增的顺序排列。这大大减少了行扫描的次数。因此，对于您的查询，`join`顺序应该是`measurement_test mt natural join measurement_point mp natural join measurement_values mv`. 还要确保连接列上定义了索引，并且它们具有完全相同的数据类型。`char(15)`和`varchar(15)`在 MySQL 中被认为是相似的，但不是`char(15)`和`varchar(10)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:05:08.507

你的参考@comment 你说你没有在任何表上创建任何索引。所以在**WHERE**和**ON**条件下使用的那些列上[创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

 ****在你的情况下创建索引

```
mt.Test_ID, 
mv.Test_ID, 
mv.Point_ID,
mp.Point_ID, 
mtp.Test_ID ,
mp.group_name ,
mtp.Test_Plan_Doc_No 
```

在这里我重写你的查询：

```
SELECT mt.Test_ID,
       mtp.Test_Plan_Doc_No,
       mp.Group_Name,
       mp.Point_Name,
       mp.Limit_1,
       mp.Limit_2,
       mp.Datatype,
       mt.Start_Date,
       mv.Measurement_Value,
       mv.Status_Value
FROM   measurement_test mt
       INNER JOIN measurement_values mv USING(Test_ID)            
       INNER JOIN measurement_point mp USING (Point_ID)
       INNER JOIN measurement_test_plan mtp USING(Test_ID)
WHERE  mtp.Test_Plan_Doc_No IN ( 'test1', 'test2' )
       AND mp.Group_Name = 'gp_name' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T08:56:56.573

确保在 WHERE 子句中使用的每一列都有正确的索引。

您可以使用查询分析器查看是否使用了索引。****

# python - 拼接不同网格间距的网格

> ID：12155791
> 
> 赞同：0
> 
> 时间：2012-08-28T08:52:31.717
> 
> 标签：python, numpy

我将二进制文件中的数据读入`numpy`带有`np.fromfile`. 这些数据表示网格上的*Z*值，其间距和形状是已知的，因此将 1D 数组重新整形为网格的形状并使用 绘制是没有问题的`plt.imshow`。因此，如果我有*N*个网格，我可以绘制*N*个子图，在一个图中显示所有数据，但我真正想做的是将它们绘制为一张图像。

我不能只是堆叠数组，因为每个数组中的数据间隔不同，而且它们具有不同的形状。

我的想法是将所有网格“超采样”到最好的网格、堆栈和绘图的间距，但我不确定这是一个好主意，因为这些网格文件可能会变得非常大。

顺便说一句：假设我想这样做，我该怎么做：

```
 0, 1, 2
    3, 4, 5 
```

到：

```
 0, 0, 1, 1, 2, 2
    0, 0, 1, 1, 2, 2
    3, 3, 4, 4, 5, 5
    3, 3, 4, 4, 5, 5 
```

我愿意接受任何建议。

谢谢，

沙哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:37:45.267

如果你只是情节，答案是：不要。`plt.imshow`有一个关键字参数`extent`，您可以在绘图时使用它来缩放想象。除此之外，我建议使用 scipy.ndimage.zoom，order=0，它相当于重复值，但是您可以轻松缩放到任何大小或使用不同的顺序来获得一些平滑的插值。`np.tile`也可以是非常简单的缩放选项。

这是一个例子：

```
a = np.arange(9).reshape(3,3)
b = np.arange(36).reshape(6,6)

plt.imshow(a, extent=[0,1,0,1], interpolation='none')
plt.imshow(b, extent=(1,2,0,1), interpolation='none')
# note scaling is "broke"
plt.xlim(0,2) 
```

当然，要获得相同的颜色范围，您应该添加`vim=...`和`vmax`关键字。

# android - Canvas MotionEvent，位图未按预期拖动

> ID：12155795
> 
> 赞同：0
> 
> 时间：2012-08-28T08:52:52.853
> 
> 标签：android, matrix, bitmap, motionevent

我正在使用`MotionEvent`并`Matrix`拖动我的位图，但位图被“翻译”到附近的区域（大多数时候在相反的方向）。我希望能够使用矩阵翻译来拖动它。这是我的代码。

```
switch(action){
        case MotionEvent.ACTION_DOWN: {
            final float touchX = event.getX();
            final float  touchY = event.getY();
          //check to see if the user is pressing  at most 80 pixels far from the bitmap 
            if(((Math.abs(touchX - player.prevX)<=80) && ((Math.abs(touchY - player.prevY)<=80)))){
                 //if so then proceed to drag it to a new location
                player.isDraggable = true;
            }
            break;
        }
        case MotionEvent.ACTION_MOVE: {
            if(player.isDraggable){
                player.x = event.getX();
                player.y = event.getY();                    
                float dx = player.x - player.prevX, dy = player.y - player.prevY;
                player.matrix.postTranslate(dx, dy);
                player.prevX = player.x;
                player.prevY = player.y;
                player.isDraggable = false; 
        }
            break;
        }
    }
public void draw(Canvas canvas) {       
        canvas.drawBitmap(background, 0, 0, null);
        canvas.drawBitmap(player.bmp, player.matrix, null);
       for(int i=0;i<particles.size();i++){
           particles.get(i).drawShower(canvas);
        }    

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:03:05.267

1.  您的`onTouch()`方法应该返回`true`能够从 MotionEvent 连续获取值。
2.  `isDraggable`当出现拖动图像的尝试时，您立即将播放器的属性设置为 false。之后，你每次检查，如果它是真的，但它不会是。我不知道，这背后的逻辑是什么，但试试别的！

# javascript - 收到“jQuery("a.raf_link").fancybox 不是函数”错误？

> ID：12155798
> 
> 赞同：2
> 
> 时间：2012-08-28T08:53:06.617
> 
> 标签：javascript, jquery, wordpress, fancybox

我的网址[http://math.pixelworklab.com/](http://math.pixelworklab.com/)。

在右上角有一个“邀请朋友”链接，它应该打开一个花式框，但会加载一个新页面。

在 Firefox 控制台中，我看到以下内容，但似乎无法解决问题......

```
TypeError: jQuery("a.raf_link").fancybox is not a function
[Break On This Error]   

'titleShow' : false

TypeError: jQuery("a.single_image").fancybox is not a function
[Break On This Error]   

jQuery("a.single_image").fancybox(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:12:00.597

嘿，我看到了您的站点视图源..您两次包含 jquery 库。删除一个，它将起作用

```
<script type='text/javascript' src='http://math.pixelworklab.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script> 
```

和

```
<!-- include jQuery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:12:31.237

由于附加了两个 jQuery 库，您似乎遇到了问题。首先是 jquery 1.7.2，其次是存储在 Google CDN 上，版本 1.5.2。fancybox 在 1.7.2 之后和 1.5.2 之前初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:09:37.570

我认为您必须将代码（raf_script.js）包装在文档就绪函数中：

```
jQuery(document).ready(function() {

  $("a.raf_link").fancybox({
    'titleShow'     : false
  });

  ...

}); 
```

在您的脚本加载之前，可能尚未加载 jQuery。

# emacs - `insert-file` 上的 IDO 完整文件名

> ID：12155799
> 
> 赞同：2
> 
> 时间：2012-08-28T08:53:07.680
> 
> 标签：emacs, ido

是否可以让 ido 提供与`insert-file`它相同的功能`find-file`，即文件名完成？

我试图找到一个相应的变量设置，但到目前为止没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:38:17.473

`ido-insert-file`是`insert-file`什么`ido-find-file`是什么`find-file`。`ido-insert-file`绑定到`C-x i`何时启用`ido-mode`的文件行为：

```
(ido-mode 'files) ; turn on ido file behavior only (finding, writing, inserting, ...) 
```

或者

```
(ido-mode t) ; turn on both ido buffer and file behavior 
```

从`ido-mode`的文档字符串中，

> **`(ido-mode &optional ARG)`**
> 
> 打开或关闭 ido 加速。
> 
> 使用 ARG，如果 arg 为正，则打开 ido 加速，否则关闭。打开 ido-mode 将（通过次要模式键映射）将命令`find-file`和`switch-to-buffer`命令系列的默认键绑定重新映射到这些函数的 ido 版本。
> 
> 但是，如果 ARG arg 等于`'files`，则仅重新映射文​​件的命令，或者如果等于`'buffers`，则仅重新映射用于缓冲区切换的命令。

# java - 如何在 Java 中将 hashmap 转换为 JSON 对象

> ID：12155800
> 
> 赞同：345
> 
> 时间：2012-08-28T08:53:19.597
> 
> 标签：java, json

如何在 Java 中将 hashmap 转换或转换为 JSON 对象，并再次将 JSON 对象转换为 JSON 字符串？

* * *

## 回答 #1

> 赞同：494
> 
> 时间：2012-08-28T08:57:32.193

您可以使用：

```
new JSONObject(map); 
```

**注意：**这仅适用于`Map<String, String>!`

您可以从其文档
[http://stleary.github.io/JSON-java/index.html中获得其他功能](http://stleary.github.io/JSON-java/index.html)

* * *

## 回答 #2

> 赞同：201
> 
> 时间：2012-08-28T09:44:35.503

[Gson](https://code.google.com/p/google-gson/)也可以用来序列化任意复杂的对象。

以下是你如何使用它：

```
Gson gson = new Gson(); 
String json = gson.toJson(myObject); 
```

`Gson`将自动将集合转换为`JSON`数组。Gson 可以序列化私有字段并自动忽略瞬态字段。

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2016-11-30T07:17:08.337

您可以转换`Map`为`JSON`使用`Jackson`如下：

```
Map<String,Object> map = new HashMap<>();
//You can convert any Object.
String[] value1 = new String[] { "value11", "value12", "value13" };
String[] value2 = new String[] { "value21", "value22", "value23" };
map.put("key1", value1);
map.put("key2", value2);
map.put("key3","string1");
map.put("key4","string2");

String json = new ObjectMapper().writeValueAsString(map);
System.out.println(json); 
```

Maven 依赖项`Jackson`：

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.5.3</version>
    <scope>compile</scope>
</dependency>

<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.5.3</version>
    <scope>compile</scope>
</dependency> 
```

如果您使用的是 `JSONObject` 库，则可以将 map 转换为 `JSON`，如下所示：

**JSON对象库：** `import org.json.JSONObject;`

```
Map<String, Object> map = new HashMap<>();
// Convert a map having list of values.
String[] value1 = new String[] { "value11", "value12", "value13" };
String[] value2 = new String[] { "value21", "value22", "value23" };
map.put("key1", value1);
map.put("key2", value2);

JSONObject json = new JSONObject(map);
System.out.println(json); 
```

`JSONObject` 的 Maven 依赖项：

```
<dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20140107</version>
</dependency> 
```

希望这会有所帮助。快乐编码。

* * *

## 回答 #4

> 赞同：66
> 
> 时间：2012-08-28T09:01:28.247

使用 json 的示例

```
Map<String, Object> data = new HashMap<String, Object>();
    data.put( "name", "Mars" );
    data.put( "age", 32 );
    data.put( "city", "NY" );
    JSONObject json = new JSONObject();
    json.putAll( data );
    System.out.printf( "JSON: %s", json.toString(2) ); 
```

输出：：

```
JSON: {
  "age": 32,
  "name": "Mars",
  "city": "NY"
} 
```

您也可以尝试使用 Google 的 GSON。Google 的 GSON 是可用于将 Java 对象转换为其 JSON 表示形式的最佳库。

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-04-29T09:06:32.173

就我而言，我不想要任何依赖。使用 Java 8，您可以像这样简单地获取 JSON 作为字符串：

```
Map<String, Object> map = new HashMap<>();
map.put("key", "value");
map.put("key2", "value2");
String json = "{"+map.entrySet().stream()
    .map(e -> "\""+ e.getKey() + "\":\"" + String.valueOf(e.getValue()) + "\"")
    .collect(Collectors.joining(", "))+"}"; 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-08-31T10:08:56.527

您可以只枚举地图并将键值对添加到 JSONObject

方法 ：

```
private JSONObject getJsonFromMap(Map<String, Object> map) throws JSONException {
    JSONObject jsonData = new JSONObject();
    for (String key : map.keySet()) {
        Object value = map.get(key);
        if (value instanceof Map<?, ?>) {
            value = getJsonFromMap((Map<String, Object>) value);
        }
        jsonData.put(key, value);
    }
    return jsonData;
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-11-13T23:52:31.303

[Underscore-java](https://github.com/javadev/underscore-java)库可以将哈希映射或数组列表转换为 json，反之亦然。

```
import com.github.underscore.U;
import java.util.*;

public class Main {

    public static void main(String[] args) {

        Map<String, Object> map = new LinkedHashMap<>();
        map.put("1", "a");
        map.put("2", "b");

        System.out.println(U.toJson(map));
        // {
        //    "1": "a",
        //    "2": "b"
        // }
    }
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2013-08-26T12:43:30.990

迟到了，但这是我的[GSON 特设](http://code.google.com/p/google-gson/)作家，用于序列化哈希图。我必须将键值对映射写为 json 字符串属性，期望一个特定的整数类型。我不想为这个简单的用例创建自定义 JavaBean 包装器。

GSON JsonWriter 类是易于使用的序列化程序类，包含几个强类型 writer.value() 函数。

```
// write Map as JSON document to http servlet response
Map<String,String> sd = DAO.getSD(123);
res.setContentType("application/json; charset=UTF-8");
res.setCharacterEncoding("UTF-8");
JsonWriter writer = new JsonWriter(new OutputStreamWriter(res.getOutputStream(), "UTF-8"));
writer.beginObject();
for(String key : sd.keySet()) {
    String val = sd.get(key);
    writer.name(key);
    if (key.equals("UniqueID") && val!=null)
        writer.value(Long.parseLong(val));
    else
        writer.value(val);
}
writer.endObject();
writer.close(); 
```

如果不需要任何自定义类型，我可以只使用 toJson() 函数。gson-2.2.4.jar 库不到 190KB，没有任何残酷的依赖。易于在任何自定义 servlet 应用程序或独立应用程序上使用，无需大型框架集成。

```
Gson gson = new Gson(); 
String json = gson.toJson(myMap); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2012-08-28T08:56:27.267

这通常是 Json 库的工作，您不应该尝试自己做。所有 json 库都应实现您的要求，您可以在页面底部的[json.org上找到 Java Json 库列表。](http://www.json.org/)

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-12-11T17:51:41.700

如果您需要在代码中使用它。

```
Gson gsone = new Gson();
JsonObject res = gsone.toJsonTree(sqlParams).getAsJsonObject(); 
```

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2019-06-07T06:55:28.147

迟到总比没有好。如果您想要一个序列化列表，我使用**GSON将 HashMap 列表转换为字符串。**

```
List<HashMap<String, String>> list = new ArrayList<>();
HashMap<String,String> hashMap = new HashMap<>();
hashMap.add("key", "value");
hashMap.add("key", "value");
hashMap.add("key", "value");
list.add(hashMap);

String json = new Gson().toJson(list); 
```

这`json`产生`[{"key":"value","key":"value","key":"value"}]`

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2019-03-18T16:54:06.557

此解决方案适用于复杂的 JSON：

```
public Object toJSON(Object object) throws JSONException {
    if (object instanceof HashMap) {
        JSONObject json = new JSONObject();
        HashMap map = (HashMap) object;
        for (Object key : map.keySet()) {
            json.put(key.toString(), toJSON(map.get(key)));
        }
        return json;
    } else if (object instanceof Iterable) {
        JSONArray json = new JSONArray();
        for (Object value : ((Iterable) object)) {
            json.put(toJSON(value));
        }
        return json;
    }
    else {
        return object;
    }
} 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2018-01-08T21:21:04.310

我找到了另一种处理方式。

```
Map obj=new HashMap();    
obj.put("name","sonoo");    
obj.put("age",new Integer(27));    
obj.put("salary",new Double(600000));   
String jsonText = JSONValue.toJSONString(obj);  
System.out.print(jsonText); 
```

希望这可以帮助。

谢谢。

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2017-04-11T00:39:13.880

对于那些`org.json.simple.JSONObject`使用`JSONObject`.

```
JSONObject object = (JSONObject) new JSONParser().parse(JSONObject.toJSONString(map)); 
```

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2020-03-25T17:42:02.193

我们使用 Gson。

```
Gson gson = new Gson();
Type gsonType = new TypeToken<HashMap>(){}.getType();
String gsonString = gson.toJson(elements,gsonType); 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2017-01-29T15:10:01.737

这是我的 GSON 单线解决方案：

```
myObject = new Gson().fromJson(new Gson().toJson(myHashMap), MyClass.class); 
```

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2018-08-23T14:31:37.623

If you don't really need HashMap then you can do something like that:

```
String jsonString = new JSONObject() {{
  put("firstName", user.firstName);
  put("lastName", user.lastName);
}}.toString(); 
```

Output:

```
{
  "firstName": "John",
  "lastName": "Doe"
} 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2018-12-27T11:52:27.387

我用的是阿里巴巴fastjson，简单易行：

```
<dependency>
    <groupId>com.alibaba</groupId>
    <artifactId>fastjson</artifactId>
    <version>VERSION_CODE</version>
</dependency> 
```

并导入：

```
import com.alibaba.fastjson.JSON; 
```

然后：

```
String text = JSON.toJSONString(obj); // serialize
VO vo = JSON.parseObject("{...}", VO.class); //unserialize 
```

一切都好。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2019-11-18T16:26:38.397

如果您使用 JSR 374: Java API for JSON Processing ( javax json ) 这似乎可以解决问题：

```
 JsonObjectBuilder job = Json.createObjectBuilder((Map<String, Object>) obj);
    JsonObject jsonObject = job.build(); 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2012-08-28T09:03:47.007

您可以使用 XStream - 它真的很方便。[请参阅此处](http://xstream.codehaus.org/json-tutorial.html)的示例

```
package com.thoughtworks.xstream.json.test;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.io.json.JettisonMappedXmlDriver;

public class WriteTest {

    public static void main(String[] args) {

      HashMap<String,String> map = new HashMap<String,String>();
      map.add("1", "a");
      map.add("2", "b");
      XStream xstream = new XStream(new JettisonMappedXmlDriver());

      System.out.println(xstream.toXML(map));       

    }

} 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2014-09-25T13:28:38.783

如果您正在使用，`net.sf.json.JSONObject`那么您将不会在其中找到`JSONObject(map)`构造函数。你必须使用`public static JSONObject fromObject( Object object )`方法。此方法接受 JSON 格式的字符串、地图、DynaBeans 和 JavaBeans。

`JSONObject jsonObject = JSONObject.fromObject(myMap);`

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-05-21T09:05:22.060

使用*TypeToken.getParameterized*方法的更复杂的地图和列表的 Gson 方式：

我们有一个如下所示的地图：

```
Map<Long, List<NewFile>> map; 
```

我们使用上面提到的*getParameterized*方法获取类型，如下所示：

```
Type listOfNewFiles = TypeToken.getParameterized(ArrayList.class, NewFile.class).getType();
Type mapOfList = TypeToken.getParameterized(LinkedHashMap.class, Long.class, listOfNewFiles).getType(); 
```

*然后使用像这样使用mapOfList*对象的 Gson 对象*fromJson*方法，如下所示：

 *```
Map<Long, List<NewFile>> map = new Gson().fromJson(fileContent, mapOfList); 
```

提到的对象*NewFile*如下所示：

```
class NewFile
{
    private long id;
    private String fileName;

    public void setId(final long id)
    {
        this.id = id;
    }

    public void setFileName(final String fileName)
    {
        this.fileName = fileName;
    }
} 
```

反序列化的 JSON 如下所示：

```
{
  "1": [
    {
      "id": 12232,
      "fileName": "test.html"
    },
    {
      "id": 12233,
      "fileName": "file.txt"
    },
    {
      "id": 12234,
      "fileName": "obj.json"
    }
  ],
 "2": [
    {
      "id": 122321,
      "fileName": "test2.html"
    },
    {
      "id": 122332,
      "fileName": "file2.txt"
    },
    {
      "id": 122343,
      "fileName": "obj2.json"
    }
  ]
}
```

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-09-19T17:31:27.770

```
 import org.json.JSONObject;

    HashMap<Object, Object> map = new HashMap<>();
    String[] list={"Grader","Participant"};
    String[] list1={"Assistant","intern"};
    map.put("TeachingAssistant",list);
    map.put("Writer",list1);
    JSONObject jsonObject = new JSONObject(map);
    System.out.printf(jsonObject.toString());

    // Result: {"TeachingAssistant":["Grader","Participant"],"Writer":["Assistant","intern"]} 
```

* * *

## 回答 #24

> 赞同：2
> 
> 时间：2017-03-17T09:22:29.100

**不需要 Gson 或 JSON 解析库。** 只需使用`new JSONObject(Map<String, JSONObject>).toString()`，例如：

```
/**
 * convert target map to JSON string
 *
 * @param map the target map
 * @return JSON string of the map
 */
@NonNull public String toJson(@NonNull Map<String, Target> map) {
    final Map<String, JSONObject> flatMap = new HashMap<>();
    for (String key : map.keySet()) {
        try {
            flatMap.put(key, toJsonObject(map.get(key)));
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }
    try {
        // 2 indentSpaces for pretty printing
        return new JSONObject(flatMap).toString(2);
    } catch (JSONException e) {
        e.printStackTrace();
        return "{}";
    }
} 
```

* * *

## 回答 #25

> 赞同：2
> 
> 时间：2016-08-30T12:15:34.250

如果您使用复杂对象，则应应用**enableComplexMapKeySerialization()**，如[https://stackoverflow.com/a/24635655/2914140](https://stackoverflow.com/a/24635655/2914140)和[https://stackoverflow.com/a/26374888/2914140](https://stackoverflow.com/a/26374888/2914140)中所述。

```
Gson gson = new GsonBuilder().enableComplexMapKeySerialization().create();
Map<Point, String> original = new LinkedHashMap<Point, String>();
original.put(new Point(5, 6), "a");
original.put(new Point(8, 8), "b");
System.out.println(gson.toJson(original)); 
```

输出将是：

```
{
 "(5,6)": "a",
 "(8,8)": "b"
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2018-11-06T06:10:54.990

这对我有用：

```
import groovy.json.JsonBuilder
properties = new Properties()
properties.put("name", "zhangsan")

println new JsonBuilder(properties).toPrettyString() 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-08-22T21:25:40.490

您可以使用[Gson](https://github.com/google/gson)。这个库提供了简单的方法来将 Java 对象转换为 JSON 对象，反之亦然。

例子：

```
GsonBuilder gb = new GsonBuilder();
Gson gson = gb.serializeNulls().create();
gson.toJson(object); 
```

当您需要设置非默认配置选项时，您可以使用 GsonBuilder。在上面的示例中，转换过程还将从 object 中序列化 null 属性。

但是，这种方法仅适用于非泛型类型。对于泛型类型，您需要使用 toJson(object, Type)。

有关 Gson 的更多信息，请[点击此处](https://github.com/google/gson/blob/master/UserGuide.md)。

请记住，对象必须实现**Serializable**接口。

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2016-06-14T16:14:57.350

从 selenium 中的自定义命令反序列化响应时，我遇到了类似的问题。响应是 json，但 selenium 在内部将其转换为 java.util.HashMap[String, Object]

如果您熟悉 scala 并使用 JSON 的 play-API，您可能会从中受益：

```
import play.api.libs.json.{JsValue, Json}
import scala.collection.JavaConversions.mapAsScalaMap

object JsonParser {

  def parse(map: Map[String, Any]): JsValue = {
    val values = for((key, value) <- map) yield {
      value match {
        case m: java.util.Map[String, _] @unchecked => Json.obj(key -> parse(m.toMap))
        case m: Map[String, _] @unchecked => Json.obj(key -> parse(m))
        case int: Int => Json.obj(key -> int)
        case str: String => Json.obj(key -> str)
        case bool: Boolean => Json.obj(key -> bool)
      }
    }

    values.foldLeft(Json.obj())((temp, obj) => {
      temp.deepMerge(obj)
    })
  }
} 
```

小代码说明：

代码递归遍历 HashMap，直到找到基本类型（String、Integer、Boolean）。这些基本类型可以直接包装到一个 JsObject 中。当递归展开时，deepmerge 将创建的对象连接起来。

'@unchecked' 负责类型擦除警告。

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2019-06-07T10:19:47.497

首先将所有对象转换为有效的字符串

```
HashMap<String, String> params = new HashMap<>();
params.put("arg1", "<b>some text</b>");
params.put("arg2", someObject.toString()); 
```

然后将整个地图插入到 org.json.JSONObject

```
JSONObject postData = new JSONObject(params); 
```

现在您可以通过简单地调用对象的 toString 来获取 JSON

```
postData.toString()
//{"arg1":"<b>some text<\/b>" "arg2":"object output"} 
```

创建一个新的 JSONObject

```
JSONObject o = new JSONObject(postData.toString()); 
```

或作为通过 HTTP 发送的字节数组

```
postData.toString().getBytes("UTF-8"); 
```*

# playframework - 应用程序范围的资源线程安全

> ID：12155804
> 
> 赞同：0
> 
> 时间：2012-08-28T08:53:42.173
> 
> 标签：playframework, thread-safety

这是一个关于 Play Framework 线程安全的问题。

对于一个项目，我有一个大型 POJO，其中包含在启动周期中构建的静态域逻辑。这是放入然后放入缓存中。

每个客户端都使用这个应用程序范围的资源来“计算”一些特定的值。我的应用程序范围的资源是否会像控制器一样是线程安全的？还是我必须自己实现线程安全以避免竞争条件？

提前致谢！理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:58:40.017

您可以将其放入缓存中，但缓存可能会将您的数据丢弃。所以这看起来不是一个好主意。您必须确保可以重新初始化缓存。reinit 必须是线程安全的。缓存是线程安全的。因此，只要您只将线程安全对象放入缓存中，一切都会好起来的。希望这可以帮助。

# mysql - 使用过滤器上传 csv 文件

> ID：12155808
> 
> 赞同：0
> 
> 时间：2012-08-28T08:53:52.527
> 
> 标签：mysql, file-upload, csv

我正在尝试使用以下查询将 CSV 数据上传到 MYSQL 表。它运行成功。包含 2000 万条数据的 CSV 文件。但是现在我仍然有上传数据的问题。

我的 CSV 文件结构如下：

```
Name phone_no     DND
xxx  99934034343  A
xxx  99934034345  D
xxx  99934034346  A
xxx  99934034347  D 
```

我只想使用以下命令插入活动的 no “A”。

```
LOAD DATA LOCAL INFILE '/root/782012_23.csv'
INTO TABLE tbl_dndno
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

期待这样的记录

```
Name phone_no     DND
 xxx  99934034343  A
 xxx  99934034346  A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:32:02.243

我猜你的命令工作正常，但是用 4 行而不是预期的 2 行填充你的表。

[LOAD DATA IN FILE 文档](http://dev.mysql.com/doc/refman/5.0/fr/load-data.html)似乎不支持您的要求，它只能逐行排除，因此如果您在创建此 csv 文件时有办法知道行号，则可以使用此功能。否则有两种解决方法：

您可以在加载文件（在 mysql 之外）之前过滤文件（在 Linux 上）

```
grep "D$" /root/782012_23.csv > filteredfile; LOAD DATA LOCAL INFILE 'filteredfile' ... 
```

或通过 SQL 加载后过滤：

```
your_command;mysql -u user -ppassword "DELETE FROM yourtable WHERE DND = 'A'"; 
```

# c - 调整图像二进制大小

> ID：12155809
> 
> 赞同：1
> 
> 时间：2012-08-28T08:53:56.343
> 
> 标签：c, binary, hex, image-resizing

现在，我遇到了一个非常困难的问题，我将字体转换为十六进制代码，并且可以按如下方式调整它的大小：
1\. 我使用 lcd 字体制作软件创建 char A 字体 Arial 大小 18
2\. 然后我转换为十六进制代码
（看图了解）

![1](../Images/8d799230f23e4fd4480199e352400d77.png) ![2](../Images/c507fdbf9f64066b9b11c1735cfbc293.png)

当数据输入是十六进制代码或二进制，结果是十六进制代码或二进制时，如何调整图像大小？请建议我，或与此问题相关的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:27:35.803

**在这里我不知道调整图像大小是**什么意思

 **1> 在 lcd font maker 软件中，您创建了一个图像

2> 现在您已经以数字形式对该图像进行了编码，并制作了十六进制代码数组。

现在我想你想把这个十六进制代码数组传递给其他程序，并想重新创建/解码那个图像？如果那么您可以使用相同的反向逻辑编写一个程序，该程序可以解码该数据并创建原始图像。

如果你想调整图像大小，那么你需要理解/使用像素采样和所有东西的概念

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:46:45.630

[Wiki 页面“图像缩放”](http://en.wikipedia.org/wiki/Image_scaling)可能是一个很好的说明点。有不同缩放方法的列表。

缩放结果可能看起来很难看，特别是如果您有 2 色显示器。因此，请考虑使用两种或多种预定义字体。**

# android - 08-28 NoClassDefFoundError NotificationBuilder

> ID：12155810
> 
> 赞同：3
> 
> 时间：2012-08-28T08:54:00.113
> 
> 标签：android, dialog, android-widget

我正在使用构建器类并使用 android 4.1 版本（API 级别 16）创建通知。但是应用程序正在生成异常，因为 `08-28 12:39:00.321: E/AndroidRuntime(2311): java.lang.NoClassDefFoundError: android.app.Notification$Builder` 已经导入了必要的包。

```
Notification.Builder notification = new Notification.Builder(this);
notification.setSmallIcon(R.drawable.ic_launcher);
notification.setTicker("My Notification");
notification.setContentInfo("New event");
mgr.notify(123, notification.build()); 
```

代码有什么问题吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:35:45.257

您需要在 API 级别 >= 11 的设备/模拟器上运行您的应用程序才能使用[Notification.Builder](https://developer.android.com/reference/android/app/Notification.Builder.html)类。

# c# - 如何将十六进制 #FFFFFF 转换为 System.Drawing.Color

> ID：12155811
> 
> 赞同：107
> 
> 时间：2012-08-28T08:53:59.537
> 
> 标签：c#, asp.net

> **可能重复：**
> [如何使用 .NET 从十六进制颜色代码中获取颜色？](https://stackoverflow.com/questions/2109756/how-to-get-color-from-hex-color-code-using-net)

我想将字符串转换`#FFFFFF`为`System.Drawing.Color`. 你是怎样做的？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2012-08-28T08:58:31.347

```
string hex = "#FFFFFF";
Color _color = System.Drawing.ColorTranslator.FromHtml(hex); 
```

注意：哈希很重要！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-08-28T08:58:34.833

你可以做

```
var color =  System.Drawing.ColorTranslator.FromHtml("#FFFFFF"); 
```

或者这个（你需要`System.Windows.Media`命名空间）

```
var color = (Color)ColorConverter.ConvertFromString("#FFFFFF"); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-28T08:58:30.957

删除“#”并执行

```
Color c = Color.FromArgb(int.Parse("#FFFFFF".Replace("#",""),
                         System.Globalization.NumberStyles.AllowHexSpecifier)); 
```

# jquery - 什么更快？jQuery css(), jQuery addclass() 或者只是 css

> ID：12155817
> 
> 赞同：0
> 
> 时间：2012-08-28T08:54:21.757
> 
> 标签：jquery, css

好的，在这种情况下，我只关注速度。

什么更快？

1.  `$('#header').css({'background':'#ff0000','width':'100px','height':'100px'});`
2.  `$('#header').addClass('header');`
3.  只需在 css 中使用#header

我无法通过使用 FireBug 得到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:21:40.610

只需使用嵌入式 CSS，即`#header`我们页面上的 CSS。如果您尝试使用 JavaScript 应用 CSS，如果禁用浏览器上的 JavaScript，您的页面可能无法正确显示。您可以使用外部 CSS 文件、头部嵌入 CSS 和内联 CSS。

始终优先考虑纯 HTML 和 CSS。相信我，它更快。

# api - 为什么 struts 版本是 2.3.4.1 而不是 2.4？

> ID：12155821
> 
> 赞同：1
> 
> 时间：2012-08-28T08:54:27.817
> 
> 标签：api, struts2, version, versioning, compatibility

与我的团队成员就 api 差异和版本控制发生争执时，当涉及四个句点 2.3.4.1（有点奇怪）的 struts 时，我被卡住了。我想知道为什么它没有选择2.4版本而是2.3.4.1 ?? api差异在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:03:03.090

Apache 有[发布编号指南](http://commons.apache.org/releases/versioning.html)：

> 次要版本
> 
> 次要版本表示不需要主要版本的组件的增强。如果版本至少与先前版本的外部接口兼容，则开发人员可以执行次要版本。
> 
> 点发布
> 
> 单点发布通常涉及不引入新功能的简单错误修复或优化。如果发布至少与之前的版本接口兼容，则开发人员可以执行点发布。

因此，除非有新的 API 添加（我没有看过），否则您不会增加次要版本号。

2.4 将是一个“小版本”。

2.3.4（最后一个版本）[仅列出内部更改](http://struts.apache.org/2.x/docs/version-notes-234.html)。

2.3.4.1 甚至不是一个“点发布”，更像是一个补丁，它似乎与发布说明相匹配，其中说“Struts 2.3.4.1 包含重要的安全修复”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T06:55:09.350

查看所有 struts API 版本的[兼容性表](http://upstream.rosalinux.ru/java/versions/struts.html)。类中的 2.3.4 和 2.3.4.1 之间有一个小的[ABI 中断](http://upstream.rosalinux.ru/java/compat_reports/struts/2.3.4_to_2.3.4.1/bin_compat_report.html#Medium_Risk_Problems)`org.apache.struts2.util.TokenHelper`，但总体兼容性仍然是 99.9%。

[![在此处输入图像描述](../Images/4e301439dea91c6322ae8f89efa2c46c.png)](https://i.stack.imgur.com/mMEx6.jpg)

[![在此处输入图像描述](../Images/917e3d4143424b1c4a0e0e408e1dfac6.png)](https://i.stack.imgur.com/6Rws8.jpg)

# javascript - 将短期访问令牌交换为长期不工作的访问令牌

> ID：12155822
> 
> 赞同：2
> 
> 时间：2012-08-28T08:54:28.847
> 
> 标签：javascript, facebook, access-token

我正在尝试将短期用户访问令牌交换为 ling-lived，但出现错误（在 all.js 中）：

ReferenceError：左侧分配无效

...TZCOZCkuZBxZAzVUSokiOJbXZAHhESJvuA97qXTpVbVj3P7AZDZD&expires=512326

response.error.message：未知错误

代码：

```
window.fbAsyncInit = function () {
           FB.init({
               appId: 'xxx', // App ID
               status: true, // check login status
               cookie: true, // enable cookies to allow the server to access the session
               xfbml: true,  // parse XFBML
               oauth: true
           });

           FB.login(function (response) {
                    if (response) {

                    var accessToken = response.authResponse.accessToken;

                    FB.getLoginStatus(function(response) {
                        if (response.status === 'connected') {

                            var accessToken = response.authResponse.accessToken;

                            var OauthParams = {};
                            OauthParams['client_id'] = 'xxx';
                            OauthParams['client_secret'] = 'xxx';
                            OauthParams['grant_type'] = 'fb_exchange_token';
                            OauthParams['fb_exchange_token'] = accessToken;
                            OauthParams['response_type'] = 'token';
                            console.log(accessToken);

                            FB.api('/oauth/access_token', 'post', OauthParams, function(response) {
                                if (!response || response.error) {
                                    console.log(response.error.message);
                                } 
                                else {
                                    console.log(response.accesstoken);
                                }
                            });        
                        }
                    });
                    };

           }, { scope: 'manage_pages' });

       };

}

(function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
}(document)); 
```

有人有想法吗？

谢谢，/M

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:17:17.203

根据[文档](http://developers.facebook.com/roadmap/offline-access-removal/)的场景 4，您必须`GET`向

```
https://graph.facebook.com/oauth/access_token?
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

也许问题是您正在使用`POST`请求，但我不确定

PS 我不建议在客户端使用 APP_SECRET

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T23:19:41.833

我在从 FB Javascript SDK 客户端运行测试时遇到了类似的问题。我的问题是 SDK 在`fb_exchange_token`. 仅更改此访问令牌字符串中的最后三个字符会使错误消失。当然，这无助于解决问题，但至少这是我的问题所在。

由于无论如何这些调用都必须从服务器进行，​​因此我不会继续对此进行故障排除。

# javascript - 像 jQuery 一样的架构

> ID：12155826
> 
> 赞同：2
> 
> 时间：2012-08-28T08:54:35.967
> 
> 标签：javascript, jquery, architecture, reverse-engineering

我正在尝试在我的应用程序中创建类似 jQuery 的架构，但我无法获得预期的结果。

在 jQuery 中“jQuery 对象实际上只是初始化构造函数'增强'”。

```
jQuery = function( selector, context ) {
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

这意味着当您启动 jQuery 对象时；

```
$('selector') 
```

jQuery 返回

```
new jQuery.fn.init( selector, context, rootjQuery ); 
```

jQuery 原型定义为；

```
jQuery.fn = jQuery.prototype = {
constructor: jQuery,
init: function( selector, context, rootjQuery ) {
    var match, elem, ret, doc;
            ...
            return jQuery.makeArray( selector, this ); // An array
    }
...
size: function() {
    return this.length;
},
... 
```

jQuery 的所有有用属性和方法（如 hide()、show() exct.）都由 jQuery 对象的原型保存。

并将init方法的原型赋值为jQuery的原型；

```
jQuery.fn.init.prototype = jQuery.fn; 
```

好！。我的问题是我尝试使用此架构，但无法获取返回值的属性和方法。

这是我的代码；

```
(function() {

Metinler = function(MetinKodu){
    return new Metinler.sub.baslat( MetinKodu );
}

Metinler.sub = Metinler.prototype = {
    metinKodlari: [],
    constructor: Metinler,
    topla: function(){
        return this.metinKodlari[0] + this.metinKodlari[1];
    },
    baslat: function(MetinKodu) {
        if($.isArray(MetinKodu) && MetinKodu.length > 0) {

            this.metinKodlari = MetinKodu;
        }else{
            this.metinKodlari = (MetinKodu) ? [MetinKodu] : [''];
        }

        return this.metinKodlari;
    }
}
Metinler.sub.baslat.prototype = Metinler.sub;

window.Metinler = Metinler;

})() 
```

[代码](http://jsfiddle.net/NBnR5/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:33:30.553

你的`baslat`功能有问题：

*   你拼错`length`了`MetinKodu.lenght > 0`。
*   您正在返回`metinKodlari`数组，而您应该返回新创建的`this`上下文。jQuery 使用`makeArray`on`this`将传递的 DOM 元素存储在类似数组的 jQuery 对象中。但是，在您的情况下，您只想将传递的元素存储在`metinKodlari`数组中，而不是`this`对象本身。

这应该有效：

```
 baslat: function(MetinKodu) {
        if ($.isArray(MetinKodu) && MetinKodu.length > 0) {
            this.metinKodlari = MetinKodu;
        } else {
            this.metinKodlari = (MetinKodu) ? [MetinKodu] : [''];
        }
        return this;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:35:23.380

您看到的问题是您的构造函数正在返回一个特定值：

```
return this.metinKodlari; 
```

...它返回您的内部数组（嗯，您的数组数组）。

删除此行，您将返回您的`baslat`实例。

# c# - 在 MVC3 项目中更改数据库有多容易？

> ID：12155828
> 
> 赞同：0
> 
> 时间：2012-08-28T08:54:47.387
> 
> 标签：c#, sql-server, asp.net-mvc-3, visual-studio-2012, ef-database-first

基本上，我制作了一个 MVC3 应用程序，它连接并更新服务器上存在的数据库。然而，这个数据库是一个测试数据库，当我实时推出项目时，我需要它来连接到实际的数据库。我的问题是更改项目/应用程序以指向这个新数据库有多难？

我使用了数据库优先方法，并且知道我需要更改我的连接字符串。我觉得不可能这么简单。

任何帮助、提示或教程将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T08:57:52.433

只要数据库结构相同，就*这么*简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:10:49.203

您只需要更改连接字符串。

另外，如果您想部署 2 个版本的网站，每个版本都使用它自己的连接字符串（例如用于开发和生产），您可以创建 2 个 web.config 文件。请参阅此链接[SO问题](https://stackoverflow.com/questions/305447/using-different-web-config-in-development-and-production-environment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:00:33.570

它不应该那么难。您只需要确保您现在正在处理的数据库和您要更改的数据库在表名和列名上相同，否则您将需要将其配置为使用新的数据库表和列。

# css - CSS 选择器（id 包含部分文本）

> ID：12155833
> 
> 赞同：113
> 
> 时间：2012-08-28T08:55:03.610
> 
> 标签：css, css-selectors, webdriver

我有个问题。我有这样的元素：

`<a>`id = someGenerated Some:Same:0:name 的元素

`<a>`id = someGenerated Some:Same:0:surname 的元素

`<a>`id = someGenerated Some:Same:1:name 的元素

`<a>`id = someGenerated Some:Same:1:surname 的元素

我需要 CSS 选择器来获取名称。问题是我不知道如何获得它。我试过`a[id*='Some:Same']`了——它返回了所有`<a>`元素。在我可以获得以名称结尾的元素之后。但我不喜欢这个主意。我认为它可以用其他一些选择器来完成。

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-08-28T10:24:07.623

尝试这个：

```
a[id*='Some:Same'][id$='name'] 
```

这将为您提供所有`a`具有 id 的元素

> 一些相同

并以 id 结尾

> 姓名

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2019-05-08T15:09:44.957

```
<div id='element_123_wrapper_text'>My sample DIV</div> 
```

运算符**^** - 匹配以给定值开头的元素

```
div[id^="element_123"] {

} 
```

运算符 $ - 匹配以给定值结尾的元素

```
div[id$="wrapper_text"] {

} 
```

运算符 * - 匹配具有包含给定值的属性的元素

```
div[id*="123_wrapper"] {

} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-28T09:58:20.293

我看到的唯一选择器是`a[id$="name"]`（所有以“名称”结尾的 id 链接），但它没有应有的限制。

# iphone - 从字典中解析字典数组

> ID：12155839
> 
> 赞同：0
> 
> 时间：2012-08-28T08:55:17.433
> 
> 标签：iphone, objective-c, ios, nsdictionary

解析 XML 文件后，输出在字典中以以下格式出现现在我想将其转换为字典数组
任何人都可以提出正确的解决方案

```
Printing description of rootDictionary:
<CFBasicHash 0x8866000 [0x1078b38]>{type = mutable dict, count = 1,
entries =>
    0 : <CFString 0x8869490 [0x1078b38]>{contents = "Data"} = <CFBasicHash 0x88695c0 [0x1078b38]>{type = mutable dict, count = 1,
entries =>
    0 : <CFString 0x8869610 [0x1078b38]>{contents = "row"} = (
        {
        Address =         {
            text = "Skt. Clemens Torv 2-6";
        };
        City =         {
            text = "Aarhus C";
        };
        Country =         {
            text = Danmark;
        };
        Description =         {
            text = Ottopiste;
        };
        Lat =         {
            text = "56.156818";
        };
        Lon =         {
            text = "10.2092532";
        };
        Name =         {
            text = Ottopisteet;
        };
        Type =         {
            text = 1;
        };
        Zip =         {
            text = 8000;
        };
    },
        {
        Address =         {
            text = "Kauppatie 66";
        };
        City =         {
            text = Kauhava;
        };
        Country =         {
            text = Finland;
        };
        Description =         {
            text = "(null)";
        };
        Lat =         {
            text = "63.1001586";
        };
        Lon =         {
            text = "23.0463634";
        };
        Name =         {
            text = I m Here;
        };
        Type =         {
            text = 2;
        };
        Zip =         {
            text = 62200;
        };
    }
)
}
} 
```

现在输出字典再次采用上述格式我想将其转换为字典数组

```
Actual format of XML for reference:
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Data>
<row>
  <Lat>56.156818</Lat>
  <Lon>10.2092532</Lon>
  <City>Aarhus C</City>
  <Address>Skt. Clemens Torv 2-6</Address>
  <Zip>8000</Zip>
  <Country>Danmark</Country>
  <Name>Ottopisteet</Name>
  <Description>Ottopiste</Description>
  <Type>1</Type>
</row>
<row>
  <Lat>63.1001586</Lat>
  <Lon>23.0463634</Lon>
  <City>Kauhava</City>
  <Address>Kauppatie 66</Address>
  <Zip>62200</Zip>
  <Country>Finland</Country>
  <Name>I am Here</Name>
  <Description>(null)</Description>
  <Type>2</Type>
</row>
</Data> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:05:32.797

做这个：

```
 NSMutableArray *arrData = [[parsedValueDictionary objectForKey:@"Data"]  objectForKey:@"row"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:02:15.423

您可以只迭代行字典并将每个对象添加到数组中：

```
NSMutableArray *arrayOfDictionaries = [[NSMutableArray alloc] init];
NSDictionary *rows = [rootDictionary objectForKey:@"Data"];

[rows enumerateKeysAndObjectsUsingBlock:^(id key, id obj, BOOL *stop){
  [arrayOfDictionaries addObject:obj];
}]; 
```

**更新**：我假设“数据”字典中只有“行”条目。否则，如果之前是“行”，您应该检查 si 的*键。*

# android-fragments - 片段、android:zAdjustment（z 顺序）和动画

> ID：12155845
> 
> 赞同：25
> 
> 时间：2012-08-28T08:55:53.767
> 
> 标签：android-fragments, android-animation

我正在使用支持库。现在，我想让一个片段从底部移入，移过前一个片段。

为此，我使用它来保持前一个片段（正在滑过的片段）可见，直到新片段就位：

```
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
   android:fromAlpha="1.0" android:toAlpha="1.0" 
   android:duration="2500"
   android:zAdjustment="bottom" /> 
```

这是用于新片段从底部滑入的动画：

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
<translate android:fromYDelta="100%p" android:toYDelta="0"
        android:duration="@android:integer/config_mediumAnimTime" 
        android:zAdjustment="top"/> 
```

我已将 z 调整设置为底部和顶部，但“底部”动画仍位于新片段的顶部！我已将持续时间设置为 2500 进行测试，并且它一直保持在顶部。

zAdjustment 不适用于片段动画吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T08:08:27.477

根据[这个](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/2xVkWWY2oBU)google group thread Z 调整仅适用于窗口动画。

“Z 调整仅适用于窗口动画。我认为这已记录在案，但显然没有。” -- Dianne Hackborn（Android 框架工程师）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-10T09:48:58.607

您可以覆盖该`onCreateAnimation`方法，并且对于任何动画，您可以检查当前正在运行的动画，如果您需要它位于顶部，请从那里设置 Z 轴。

```
override fun onCreateAnimation(transit: Int, enter: Boolean, nextAnim: Int): Animation? {
    if (nextAnim == R.anim.enter_from_right || nextAnim == R.anim.exit_to_right) {
        ViewCompat.setTranslationZ(view, 1f)
    } else {
        ViewCompat.setTranslationZ(view, 0f)
    }

    return super.onCreateAnimation(transit, enter, nextAnim)
} 
```

建议将此实现为所有片段的基本片段类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-09T11:39:58.293

我也被这个问题困住了。因此，`transaction.replace(containerId, newFragment)`我没有使用，而是为片段创建了两个容器，现在我的代码看起来像这样

添加第一个片段：

```
transaction.add(containerId1, firstFragment).commit(); 
```

在第一个片段上添加带有动画的第二个片段：

```
findViewById(containerId2).bringToFront();
transaction.setCustomAnimations(R.anim.slide_in_up,
 R.anim.stay).remove(oldFragment).add(containerId2, newFragment).commit() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T04:48:06.870

您可以`androidx.fragment.app.FragmentContainerView`用作片段容器。它会自动处理指定动画的 z 顺序`setCustomAnimations()`

# c# - 在服务器上实例化 WCF 服务对象，而不是客户端？

> ID：12155847
> 
> 赞同：2
> 
> 时间：2012-08-28T08:56:07.670
> 
> 标签：c#, wcf

我正在用 C# 编写两个需要能够通信的应用程序（仅在一个方向上）。这两个应用程序将始终在同一台机器上运行，因此将 WCF 与命名管道一起使用并自托管 WCF 服务似乎是合乎逻辑的选择。

我知道我可以使用**InstanceContextMode**来配置服务实例是在每个会话、每个调用中实例化，还是应该只有一个实例。就我而言，我想要一个实例，因为我将只运行两个应用程序，因此将有一个客户端和一个服务器。

但这就是我卡住的地方。当我的客户拨打服务电话时，我正在这样做：

```
var myServiceFactory = new ChannelFactory<IMyService>(
    new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/MyService"));

IMyService myService = myServiceFactory.CreateChannel();
myService.DoStuff(); 
```

我不希望在服务器上创建新的服务器对象实例。相反，我希望*myService*指向**已经**在服务器上构建的（一个也是唯一的）IMyService 实例。目前，第二个 IMyService 实例被构建。

换句话说，我希望我的服务器对象由服务器构造（当服务器启动时），而不是在客户端第一次调用时。

谁能解释如何做到这一点？据我了解，.NET Remoting 使这很容易，而且 WCF 据说已经取代了 Remoting，所以必须有一个简单的方法......对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:06:01.973

WCF`ServiceHost`有一个构造函数，它采用服务类的单例实例而不是服务类型，正是为了这个目的。如果在服务主机中使用此构造函数，则必须将 InstanceContextMode 设置为 Singleton。

请注意，在您引用的客户端代码中，`IMyService myService`不是您所谓的“服务器对象”......它是客户端代理，WCF 通过它将消息从客户端路由到实际服务。

# sql - 选择性在索引扫描/搜索中的作用

> ID：12155853
> 
> 赞同：11
> 
> 时间：2012-08-28T08:56:21.490
> 
> 标签：sql, indexing, query-optimization

我在许多 SQL 书籍和文章中读到选择性是创建索引的一个重要因素。如果列的选择性较低，则索引查找会造成更大的伤害。但没有一篇文章解释原因。任何人都可以解释为什么会这样，或者提供相关文章的链接吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-28T09:00:10.663

摘自 Robert Sheldon 的 SimpleTalk 文章：[14 个 SQL Server 索引问题你太害羞了](https://www.simple-talk.com/sql/performance/14-sql-server-indexing-questions-you-were-too-shy-to-ask/)

> 键列中唯一值的比率称为索引选择性。值越独特，选择性越高，这意味着唯一索引具有最高可能的选择性。查询引擎喜欢高度选择性的键列，特别是如果这些列在您经常运行的查询的 WHERE 子句中被引用。选择性越高，查询引擎减小结果集大小的速度就越快。当然，另一方面是唯一值相对较少的列很少是索引的好候选者。

还要检查这些文章：

*   检查Pinal Dave的[这篇文章](http://blog.sqlauthority.com/2009/08/24/sql-server-index-seek-vs-index-scan-diffefence-and-usage-a-simple-note/)
*   SQL Serverpedia 上的[另一个](http://sqlserverpedia.com/wiki/Index_Selectivity_and_Column_Order)
*   SqlServerCentral 上[的这个论坛帖子也可以为您提供帮助。](http://www.sqlservercentral.com/Forums/Topic1025396-338-1.aspx#bm1025751)
*   SqlServerCentral 上的[这篇文章也](http://www.sqlservercentral.com/articles/Indexing/68636/)

来自 SqlServerCentral 文章：

> 一般来说，非聚集索引应该是有选择性的。也就是说，列中的值应该是相当唯一的，并且对其进行过滤的查询应该返回表的一小部分。
> 
> 这样做的原因是键/RID 查找是昂贵的操作，如果要使用非聚集索引来评估查询，它需要覆盖或具有足够的选择性，这样查找的成本不会被认为太高。
> 
> 如果 SQL 认为索引（或查询将在其上查找的索引键的子集）的选择性不足，则很可能会忽略索引并将查询作为聚集索引（表）扫描执行。
> 
> 需要注意的是，这不仅仅适用于前导列。在某些情况下，可以将非常非选择性的列用作前导列，而索引中的其他列使其具有足够的选择性以供使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T09:12:58.287

我试着写一个很简单的解释（基于我目前对Sql Server的了解）：

如果索引的选择性较低，则意味着对于相同的值，找到的总行数的百分比更大。（比如 500 行中的 200 具有基于索引的相同值）

通常，如果索引不包含您需要的所有列信息，那么它使用指针，在哪里可以找到物理上连接到索引上的“条目”的行。然后在第二步中，引擎必须读出该行。

因此，当您看到这样的搜索使用两步时。这里有选择性：

由于低选择性，您得到的结果更多，引擎必须做更多的工作。因此，在某些情况下，即使是表扫描也比选择性非常低的索引查找更有效。

# marklogic - 如何在 marklogic 服务器中编写保留策略以将当前版本与其旧版本隔离到不同的集合中？

> ID：12155856
> 
> 赞同：2
> 
> 时间：2012-08-28T08:56:39.403
> 
> 标签：marklogic

我一直在尝试使用 Marklogic 编写保留策略`dls:retention-rule`。问题是`dls:retention-rule`提供了保留版本或删除的选项，在我的情况下，我想保留旧版本但在不同的集合中。假设一个文档有 5 个旧版本。我希望 5 个旧版本在 collection1 中，当前版本在 collection2 中。

我如何使用保留策略来实现这一点。如果没有保留政策，还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T15:06:54.440

正如您已经发现的那样，保留策略仅管理文档保留。

在我看来，你可以编写一个 CPF 管道来做你想做的事。在管道中，您将检查属性`dls:version-id`以查看要在文档上设置的集合。管道将直接更新文档集合，绕过 DLS 功能。

[http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http%3a//pubs/5.0doc/xml/cpf/title.xml](http://docs.marklogic.com/5.0doc/docapp.xqy#display.xqy?fname=http%3a//pubs/5.0doc/xml/cpf/title.xml)有关于 CPF 和自定义管道的文档。

# ruby - Maven 找不到 JRuby mojo 描述符

> ID：12155857
> 
> 赞同：1
> 
> 时间：2012-08-28T08:56:40.370
> 
> 标签：ruby, maven, jruby, mojo, sonatype

我按照[Sonatype 的这篇博](https://support.sonatype.com/entries/20736287-writing-a-maven-plugin-in-ruby)文中关于用 Ruby 编写 Maven 插件的说明进行操作。

当我尝试运行`mvn install`（Maven 3.0.4）时，构建成功，但`maven-plugin-plugin`找不到任何 mojo 描述符：

```
[INFO] ------------------------------------------------------------------------
[INFO] Building Example Ruby Mojo - firstruby-maven-plugin 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[WARNING] The POM for org.jruby:jruby:jar:0.9.9 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
[INFO]
[INFO] --- maven-plugin-plugin:2.4:descriptor (default-descriptor) @ firstruby-maven-plugin ---
[INFO] Using 3 extractors.
[INFO] Applying extractor for language: java
[INFO] Extractor for language: java found 0 mojo descriptors.
[INFO] Applying extractor for language: jruby
[INFO] Extractor for language: jruby found 0 mojo descriptors.
[INFO] Applying extractor for language: bsh
[INFO] Extractor for language: bsh found 0 mojo descriptors. 
```

如果我尝试将`maven-plugin-plugin`版本升级到高于 2.4 的版本，则构建失败并显示以下错误消息：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-plugin-plugin:2.5:descriptor (default-descriptor) on project firstruby-maven-plugin: The API of the mojo scanner is not compatible with this plugin version. Please check the plugin dependencies configured in the POM and ensure the versions match. org.apache.maven.tools.plugin.scanner.MojoScanner.populatePluginDescriptor(Lorg/apache/maven/tools/plugin/PluginToolsRequest;)V -> [Help 1] 
```

这是`tree`显示目录结构正常的输出：

```
firstruby-maven-plugin
├── pom.xml
└── src
    └── main
        └── scripts
            └── echo.rb

3 directories, 2 files 
```

知道为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T09:41:27.317

Codehaus jruby-maven-plugin 似乎在 5 年前就被抛弃了。如果您使用的是 Maven3，您可以尝试使用 Maven2，但我会查看[https://github.com/torquebox/jruby-maven-plugins](https://github.com/torquebox/jruby-maven-plugins)

# c# - C#程序txtbox和combox以及windowform中的一切都不合适？

> ID：12155862
> 
> 赞同：0
> 
> 时间：2012-08-28T08:56:56.840
> 
> 标签：c#, winforms, textbox, label

我创建了一个程序，它在我的电脑上运行流畅，一切都像在 VS 中一样，但是当我在其他电脑上运行它时每个文本框和标签以及所有内容都不在正确的位置，它们似乎不合适他们从哪里来。我厌倦了锁定，但也没有运气，在调试和运行之后，我并没有真正得到我在 Visual Studio 中看到（或制作）的正确位置：（即使在我的电脑上（但它仍然比在其他电脑上运行更好）我完全迷失了我很累重新创建，因为这是我的项目，我的时间不多了。

我只想知道为什么以及如何锁定所有标签和文本框以及我的 Windows 窗体和 usercontorl 中的所有内容。

这是在 VS 中制作时

[http://s9.postimage.org/rvxsa9jul/image.jpg](http://s9.postimage.org/rvxsa9jul/image.jpg)

这是在我在我的电脑上调试之后

[http://s9.postimage.org/ipfhmzem5/image.jpg](http://s9.postimage.org/ipfhmzem5/image.jpg) 我希望你们能理解我的问题

这是 mt usercontrol.cs 上的 Designer.cs

你的意思是designer.cs吗，在这里

```
部分课程预订
    {
        ///  
        /// 必需的设计器变量。
        ///
        私有 System.ComponentModel.IContainer 组件 = null;

 `/// <summary> 
    /// Clean up any resources being used.
    /// </summary>
    /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
    protected override void Dispose(bool disposing)
    {
        if (disposing && (components != null))
        {
            components.Dispose();
        }
        base.Dispose(disposing);
    }

    #region Component Designer generated code

    /// <summary> 
    /// Required method for Designer support - do not modify 
    /// the contents of this method with the code editor.
    /// </summary>
    private void InitializeComponent()
    {
        this.Agetxt = new System.Windows.Forms.TextBox();
        this.label8 = new System.Windows.Forms.Label();
        this.Addresstxt = new System.Windows.Forms.TextBox();
        this.label7 = new System.Windows.Forms.Label();
        this.Occupationtxt = new System.Windows.Forms.TextBox();
        this.label6 = new System.Windows.Forms.Label();
        this.PhoneNoTxt = new System.Windows.Forms.TextBox();
        this.label5 = new System.Windows.Forms.Label();
        this.MarriedcomboBox = new System.Windows.Forms.ComboBox();
        this.label4 = new System.Windows.Forms.Label();
        this.SexComboBox = new System.Windows.Forms.ComboBox();
        this.label3 = new System.Windows.Forms.Label();
        this.LastNametxt = new System.Windows.Forms.TextBox();
        this.label2 = new System.Windows.Forms.Label();
        this.FirstNametxt = new System.Windows.Forms.TextBox();
        this.label1 = new System.Windows.Forms.Label();
        this.label9 = new System.Windows.Forms.Label();
        this.ReasonForStayingtxt = new System.Windows.Forms.TextBox();
        this.label10 = new System.Windows.Forms.Label();
        this.NoOfAdultstxt = new System.Windows.Forms.TextBox();
        this.label11 = new System.Windows.Forms.Label();
        this.NoOfChildrentxt = new System.Windows.Forms.TextBox();
        this.label12 = new System.Windows.Forms.Label();
        this.NoOfDaysToStaytxt = new System.Windows.Forms.TextBox();
        this.label13 = new System.Windows.Forms.Label();
        this.RoomTypeComboBox = new System.Windows.Forms.ComboBox();
        this.label14 = new System.Windows.Forms.Label();
        this.textBox1 = new System.Windows.Forms.TextBox();
        this.SuspendLayout();
        // 
        // Agetxt
        // 
        this.Agetxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.Agetxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.Agetxt.Location = new System.Drawing.Point(70, 162);
        this.Agetxt.MaxLength = 3;
        this.Agetxt.Name = "Agetxt";
        this.Agetxt.Size = new System.Drawing.Size(75, 22);
        this.Agetxt.TabIndex = 15;
        // 
        // label8
        // 
        this.label8.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label8.AutoSize = true;
        this.label8.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label8.Location = new System.Drawing.Point(24, 165);
        this.label8.Name = "label8";
        this.label8.Size = new System.Drawing.Size(33, 16);
        this.label8.TabIndex = 14;
        this.label8.Text = "Age";
        // 
        // Addresstxt
        // 
        this.Addresstxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.Addresstxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.Addresstxt.Location = new System.Drawing.Point(71, 219);
        this.Addresstxt.Multiline = true;
        this.Addresstxt.Name = "Addresstxt";
        this.Addresstxt.Size = new System.Drawing.Size(251, 72);
        this.Addresstxt.TabIndex = 13;
        // 
        // label7
        // 
        this.label7.AutoSize = true;
        this.label7.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label7.Location = new System.Drawing.Point(14, 234);
        this.label7.Name = "label7";
        this.label7.Size = new System.Drawing.Size(59, 16);
        this.label7.TabIndex = 12;
        this.label7.Text = "Address";
        // 
        // Occupationtxt
        // 
        this.Occupationtxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.Occupationtxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.Occupationtxt.Location = new System.Drawing.Point(230, 192);
        this.Occupationtxt.Name = "Occupationtxt";
        this.Occupationtxt.Size = new System.Drawing.Size(92, 22);
        this.Occupationtxt.TabIndex = 11;
        // 
        // label6
        // 
        this.label6.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label6.AutoSize = true;
        this.label6.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label6.Location = new System.Drawing.Point(161, 192);
        this.label6.Name = "label6";
        this.label6.Size = new System.Drawing.Size(76, 16);
        this.label6.TabIndex = 10;
        this.label6.Text = "Occupation";
        // 
        // PhoneNoTxt
        // 
        this.PhoneNoTxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.PhoneNoTxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.PhoneNoTxt.Location = new System.Drawing.Point(71, 189);
        this.PhoneNoTxt.MaxLength = 15;
        this.PhoneNoTxt.Name = "PhoneNoTxt";
        this.PhoneNoTxt.Size = new System.Drawing.Size(74, 22);
        this.PhoneNoTxt.TabIndex = 9;
        // 
        // label5
        // 
        this.label5.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label5.AutoSize = true;
        this.label5.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label5.Location = new System.Drawing.Point(5, 192);
        this.label5.Name = "label5";
        this.label5.Size = new System.Drawing.Size(71, 16);
        this.label5.TabIndex = 8;
        this.label5.Text = "Phone No.";
        // 
        // MarriedcomboBox
        // 
        this.MarriedcomboBox.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.MarriedcomboBox.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
        this.MarriedcomboBox.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.MarriedcomboBox.FormattingEnabled = true;
        this.MarriedcomboBox.Items.AddRange(new object[] {
        "Married",
        "Unmarried"});
        this.MarriedcomboBox.Location = new System.Drawing.Point(230, 130);
        this.MarriedcomboBox.Name = "MarriedcomboBox";
        this.MarriedcomboBox.Size = new System.Drawing.Size(92, 24);
        this.MarriedcomboBox.TabIndex = 7;
        // 
        // label4
        // 
        this.label4.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label4.AutoSize = true;
        this.label4.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label4.Location = new System.Drawing.Point(161, 133);
        this.label4.Name = "label4";
        this.label4.Size = new System.Drawing.Size(102, 16);
        this.label4.TabIndex = 6;
        this.label4.Text = "Marriage Status";
        // 
        // SexComboBox
        // 
        this.SexComboBox.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.SexComboBox.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
        this.SexComboBox.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.SexComboBox.FormattingEnabled = true;
        this.SexComboBox.Items.AddRange(new object[] {
        "Female",
        "Male"});
        this.SexComboBox.Location = new System.Drawing.Point(70, 130);
        this.SexComboBox.Name = "SexComboBox";
        this.SexComboBox.Size = new System.Drawing.Size(74, 24);
        this.SexComboBox.Sorted = true;
        this.SexComboBox.TabIndex = 5;
        // 
        // label3
        // 
        this.label3.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label3.AutoSize = true;
        this.label3.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label3.Location = new System.Drawing.Point(25, 133);
        this.label3.Name = "label3";
        this.label3.Size = new System.Drawing.Size(31, 16);
        this.label3.TabIndex = 4;
        this.label3.Text = "Sex";
        // 
        // LastNametxt
        // 
        this.LastNametxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.LastNametxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.LastNametxt.Location = new System.Drawing.Point(229, 103);
        this.LastNametxt.Name = "LastNametxt";
        this.LastNametxt.Size = new System.Drawing.Size(92, 22);
        this.LastNametxt.TabIndex = 3;
        // 
        // label2
        // 
        this.label2.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label2.AutoSize = true;
        this.label2.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label2.Location = new System.Drawing.Point(162, 103);
        this.label2.Name = "label2";
        this.label2.Size = new System.Drawing.Size(73, 16);
        this.label2.TabIndex = 2;
        this.label2.Text = "Last Name";
        // 
        // FirstNametxt
        // 
        this.FirstNametxt.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.FirstNametxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.FirstNametxt.Location = new System.Drawing.Point(70, 103);
        this.FirstNametxt.Name = "FirstNametxt";
        this.FirstNametxt.Size = new System.Drawing.Size(92, 22);
        this.FirstNametxt.TabIndex = 1;
        // 
        // label1
        // 
        this.label1.Anchor = System.Windows.Forms.AnchorStyles.Left;
        this.label1.AutoSize = true;
        this.label1.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label1.Location = new System.Drawing.Point(3, 103);
        this.label1.Name = "label1";
        this.label1.Size = new System.Drawing.Size(73, 16);
        this.label1.TabIndex = 0;
        this.label1.Text = "First Name";
        // 
        // label9
        // 
        this.label9.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.label9.AutoSize = true;
        this.label9.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label9.Location = new System.Drawing.Point(380, 105);
        this.label9.Name = "label9";
        this.label9.Size = new System.Drawing.Size(122, 16);
        this.label9.TabIndex = 16;
        this.label9.Text = "Reason for Staying";
        // 
        // ReasonForStayingtxt
        // 
        this.ReasonForStayingtxt.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.ReasonForStayingtxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.ReasonForStayingtxt.Location = new System.Drawing.Point(483, 105);
        this.ReasonForStayingtxt.Multiline = true;
        this.ReasonForStayingtxt.Name = "ReasonForStayingtxt";
        this.ReasonForStayingtxt.Size = new System.Drawing.Size(289, 94);
        this.ReasonForStayingtxt.TabIndex = 17;
        // 
        // label10
        // 
        this.label10.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.label10.AutoSize = true;
        this.label10.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label10.Location = new System.Drawing.Point(407, 231);
        this.label10.Name = "label10";
        this.label10.Size = new System.Drawing.Size(85, 16);
        this.label10.TabIndex = 18;
        this.label10.Text = "No. Of Adults";
        // 
        // NoOfAdultstxt
        // 
        this.NoOfAdultstxt.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.NoOfAdultstxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.NoOfAdultstxt.Location = new System.Drawing.Point(483, 224);
        this.NoOfAdultstxt.MaxLength = 3;
        this.NoOfAdultstxt.Name = "NoOfAdultstxt";
        this.NoOfAdultstxt.Size = new System.Drawing.Size(84, 22);
        this.NoOfAdultstxt.TabIndex = 19;
        // 
        // label11
        // 
        this.label11.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.label11.AutoSize = true;
        this.label11.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label11.Location = new System.Drawing.Point(587, 231);
        this.label11.Name = "label11";
        this.label11.Size = new System.Drawing.Size(97, 16);
        this.label11.TabIndex = 20;
        this.label11.Text = "No. Of Children";
        // 
        // NoOfChildrentxt
        // 
        this.NoOfChildrentxt.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.NoOfChildrentxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.NoOfChildrentxt.Location = new System.Drawing.Point(672, 224);
        this.NoOfChildrentxt.MaxLength = 3;
        this.NoOfChildrentxt.Name = "NoOfChildrentxt";
        this.NoOfChildrentxt.Size = new System.Drawing.Size(100, 22);
        this.NoOfChildrentxt.TabIndex = 21;
        // 
        // label12
        // 
        this.label12.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.label12.AutoSize = true;
        this.label12.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label12.Location = new System.Drawing.Point(407, 274);
        this.label12.Name = "label12";
        this.label12.Size = new System.Drawing.Size(124, 16);
        this.label12.TabIndex = 22;
        this.label12.Text = "No. Of Days to Stay";
        // 
        // NoOfDaysToStaytxt
        // 
        this.NoOfDaysToStaytxt.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.NoOfDaysToStaytxt.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.NoOfDaysToStaytxt.Location = new System.Drawing.Point(517, 267);
        this.NoOfDaysToStaytxt.MaxLength = 3;
        this.NoOfDaysToStaytxt.Name = "NoOfDaysToStaytxt";
        this.NoOfDaysToStaytxt.Size = new System.Drawing.Size(50, 22);
        this.NoOfDaysToStaytxt.TabIndex = 23;
        // 
        // label13
        // 
        this.label13.AutoSize = true;
        this.label13.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label13.Location = new System.Drawing.Point(5, 311);
        this.label13.Name = "label13";
        this.label13.Size = new System.Drawing.Size(80, 16);
        this.label13.TabIndex = 24;
        this.label13.Text = "Room Type";
        // 
        // RoomTypeComboBox
        // 
        this.RoomTypeComboBox.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.RoomTypeComboBox.FormattingEnabled = true;
        this.RoomTypeComboBox.Location = new System.Drawing.Point(70, 308);
        this.RoomTypeComboBox.Name = "RoomTypeComboBox";
        this.RoomTypeComboBox.Size = new System.Drawing.Size(121, 24);
        this.RoomTypeComboBox.TabIndex = 25;
        // 
        // label14
        // 
        this.label14.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.label14.AutoSize = true;
        this.label14.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.27F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.label14.Location = new System.Drawing.Point(587, 270);
        this.label14.Name = "label14";
        this.label14.Size = new System.Drawing.Size(86, 16);
        this.label14.TabIndex = 26;
        this.label14.Text = "Passport No.";
        // 
        // textBox1
        // 
        this.textBox1.Anchor = System.Windows.Forms.AnchorStyles.Right;
        this.textBox1.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.27F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
        this.textBox1.Location = new System.Drawing.Point(672, 267);
        this.textBox1.Name = "textBox1";
        this.textBox1.Size = new System.Drawing.Size(100, 21);
        this.textBox1.TabIndex = 27;
        // 
        // Reservation
        // 
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
        this.BackColor = System.Drawing.Color.FromArgb(((int)(((byte)(204)))), ((int)(((byte)(204)))), ((int)(((byte)(255)))));
        this.Controls.Add(this.textBox1);
        this.Controls.Add(this.label14);
        this.Controls.Add(this.RoomTypeComboBox);
        this.Controls.Add(this.label13);
        this.Controls.Add(this.NoOfDaysToStaytxt);
        this.Controls.Add(this.label12);
        this.Controls.Add(this.NoOfChildrentxt);
        this.Controls.Add(this.label11);
        this.Controls.Add(this.NoOfAdultstxt);
        this.Controls.Add(this.label10);
        this.Controls.Add(this.ReasonForStayingtxt);
        this.Controls.Add(this.label9);
        this.Controls.Add(this.LastNametxt);
        this.Controls.Add(this.Agetxt);
        this.Controls.Add(this.label2);
        this.Controls.Add(this.FirstNametxt);
        this.Controls.Add(this.label1);
        this.Controls.Add(this.label8);
        this.Controls.Add(this.Addresstxt);
        this.Controls.Add(this.label3);
        this.Controls.Add(this.label7);
        this.Controls.Add(this.SexComboBox);
        this.Controls.Add(this.Occupationtxt);
        this.Controls.Add(this.label4);
        this.Controls.Add(this.label6);
        this.Controls.Add(this.MarriedcomboBox);
        this.Controls.Add(this.PhoneNoTxt);
        this.Controls.Add(this.label5);
        this.Name = "Reservation";
        this.Size = new System.Drawing.Size(800, 600);
        this.ResumeLayout(false);
        this.PerformLayout();

    }

    #endregion

    private System.Windows.Forms.TextBox PhoneNoTxt;
    private System.Windows.Forms.Label label5;
    private System.Windows.Forms.ComboBox SexComboBox;
    private System.Windows.Forms.Label label3;
    private System.Windows.Forms.TextBox FirstNametxt;
    private System.Windows.Forms.Label label1;
    private System.Windows.Forms.Label label7;
    private System.Windows.Forms.TextBox Agetxt;
    private System.Windows.Forms.Label label8;
    private System.Windows.Forms.ComboBox MarriedcomboBox;
    private System.Windows.Forms.Label label4;
    private System.Windows.Forms.TextBox LastNametxt;
    private System.Windows.Forms.Label label2;
    private System.Windows.Forms.TextBox Occupationtxt;
    private System.Windows.Forms.Label label6;
    private System.Windows.Forms.TextBox Addresstxt;
    private System.Windows.Forms.Label label9;
    private System.Windows.Forms.TextBox ReasonForStayingtxt;
    private System.Windows.Forms.Label label10;
    private System.Windows.Forms.TextBox NoOfAdultstxt;
    private System.Windows.Forms.Label label11;
    private System.Windows.Forms.TextBox NoOfChildrentxt;
    private System.Windows.Forms.Label label12;
    private System.Windows.Forms.TextBox NoOfDaysToStaytxt;
    private System.Windows.Forms.Label label13;
    private System.Windows.Forms.ComboBox RoomTypeComboBox;
    private System.Windows.Forms.Label label14;
    private System.Windows.Forms.TextBox textBox1;

}` 

            回答 #1

赞同：1

时间：2012-08-28T09:11:05.417

看起来您的 Controls 锚点不正确。

您能否在设置锚值/停靠值的位置发布代码。

```

# php - 识别 ANSI 编码的 CSV 中的所有非标准特殊字符

> ID：12155863
> 
> 赞同：0
> 
> 时间：2012-08-28T08:56:59.953
> 
> 标签：php, javascript, csv, utf-8, ansi

我有一个 ANSI 编码的 CSV 文件，其中包含许多“问题”特殊字符。我正在寻找一个脚本（最好是 php 或 javascript），我可以使用它来检查 CSV 中的每条记录并识别那些有问题的字符。

循环遍历 CSV 记录没有问题，所以我只是在寻找一种好方法来确定单个字符串是否包含任何字符，如果该字符串直接插入到 UTF-8 编码文件中会导致问题。

**背景**：我使用脚本将 ANSI CSV 直接转换为 UTF-8 XML，而没有先将 CSV 转换为 UTF-8。我的愚蠢举动。该脚本为包含问题字符的记录创建了 XML 实体，但脚本尝试在其中插入包含问题字符的文本的所有 textNode 最终都为空。我现在正在寻找的是一种解析原始 CSV 文件并识别所有包含问题字符的记录的方法。拥有约 18,000 条记录，这不是我想手动完成的工作 :-)

**澄清** 我应该首先将 ANSI CSV 转换为 UTF-8，然后在 UTF-8 编码的 CSV 文件上运行我的“转换为 XML”脚本。相反，我跳过了第一步，在 ANSI 编码的 CSV 文件上运行了我的“转换为 XML”脚本。为所有单元格创建了 XML 实体，但带有诸如 —（em dash）和 ½（一半）字符的单元格的 XML 实体都是空的。“转换为 XML”脚本无法将这些字符串插入 UTF-8 编码的 XML 文档（在 PHP 中使用 DOMDocument）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:48:22.907

伙计们，这又快又脏，但这是我在这种情况下需要的那种解决方案。我使用以下代码扫描原始 CSV，查看每行中的每个字符。任何带有 字符的行`ord() > 127`，我都插入到第二个 CSV 中。这个新的 CSV 文件仅包含具有“特殊”字符的行。

在这种特殊情况下，我的原始 CSV 大于 5MB，而仅包含带有特殊字符的行的新 CSV 要小得多，大约为几百 KB，这使得使用起来更加容易。

```
$input_file  = fopen($input_filePath, 'rt');
$output_file = fopen($output_filePath, 'w');

// Get the column headers of the file
$headers = fgetcsv($input_file);

// Loop through each row
while (($row = fgetcsv($input_file)) !== FALSE)
{
  // Loop through each cell
  foreach ($headers as $i => $header)
  {
    $cell = $row[$i];
    // Loop through each char until we find a 'special' char
    // or reach the end of the cell, whichever comes first
    for ($j = 0; $j < strlen($cell); $j++)  {   
      if (ord(substr($cell, $j, 1)) > 127) {
        // If we find a special char, add this row to the new CSV file
        fputcsv($output_file, $row);
        break;
      }
    }
  }
} 
```

# sql-server-2008 - 如何比较相同的数据库的模式和表？

> ID：12155864
> 
> 赞同：0
> 
> 时间：2012-08-28T08:57:00.390
> 
> 标签：sql-server-2008, sql-server-2008-r2, database-comparison

我正在使用 SQL SERVER 2008 R2，我有两个相同的数据库，

1.  ABC（只有模式、表等结构，但表中没有数据）
2.  ABC1（表中包含模式、表和数据）

我如何比较 #1 和 #2 的架构和表，我们是否有任何软件，或者我们可以在 SSMS 本身中进行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T10:43:15.300

您可以使用以下软件来比较数据库架构：

1.  [Redgate SQL 比较](http://www.red-gate.com/products/sql-development/sql-compare/)
2.  [用于 SQL Server 的 EMS 数据库比较器](http://www.sqlmanager.net/en/products/mssql/dbcomparer)
3.  [Visual Studio 比较数据库架构](http://msdn.microsoft.com/en-us/library/aa833435%28v=vs.100%29.aspx)

`Redgate SQL Compare`比其他的更用户友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:12:15.853

```
You can write a sproc which will do this for you.

1.Lets get all the tables from ABC into a table variable or temp table.
2.Loop through the temp or table variable and get each table at a time.
3.Get all the column names,datatypes etc for this table and similarly get the same details for the same table from ABC1 database.
4.Also create one final result table where you just update the status against each table as match or nomatch
5.Repeat this for all the tables in the table variable. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T16:14:38.390

您还可以尝试[ApexSQL Diff](http://www.apexsql.com/sql_tools_diff.aspx) - 一种 SQL Server 数据库比较和同步工具，可检测数据库对象之间的差异。它会针对发现的差异生成综合报告，并可以自动执行实时和版本化数据库、备份、快照和脚本文件夹之间的同步过程

视频 - [ApexSQL Diff 简介](http://www.youtube.com/watch?v=l2brXfcSFAA)

*免责声明：我作为支持工程师在 ApexSQL 工作*

# python - Python GAE：即使发生错误，如何返回 JSON 格式的响应？

> ID：12155868
> 
> 赞同：1
> 
> 时间：2012-08-28T08:57:13.433
> 
> 标签：python, json, google-app-engine, error-handling

在我的 GAE 应用程序中，我有几个返回 JSON 格式响应的请求处理程序。当调用其中之一时，如果发生错误（异常或编程错误），则输出不是 JSON：它是堆栈跟踪。

我需要的是：

```
Output without error:
{
    "foo" : 1
    "bar" : 2
    "status" : "OK"
}

Output when an error occurs:
{
    "status" : "ERR"
    "errorMessage" : "An error occurred!"
} 
```

**我的问题是**：确保在任何情况下输出都是 JSON 格式的响应的最佳做法是什么？当然，每个请求处理程序的通用解决方案都会很棒。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:34:23.463

当然 - 使用 ereporter 类（在此处描述：[https](https://stackoverflow.com/a/4296664/336505) ://stackoverflow.com/a/4296664/336505 ），但创建一个自定义 BaseHandler 将未捕获的异常格式化为 JSON 输出：

```
class BaseHandler(webapp.RequestHandler):
    def handle_exception(self, exception, debug_mode):
      self.response.headers['Content-Type'] = 'application/json'
      self.response.out.write(etc, etc) # format the exception 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:01:23.623

如果发生错误，为避免获得堆栈跟踪或其他丑陋的输出，您将需要使用 try ... 除了：[http ://docs.python.org/tutorial/errors.html](http://docs.python.org/tutorial/errors.html)

例如

```
try:
    # ... your code ...
except TypeError as e:
    # ... do something with this error type
except:
    # ... generic exception catchall
    # output that JSON response 
```

# linux - ImageMagick - 使用转换命令在半页上将 GIF 转换为 PDF 肖像（字母）

> ID：12155869
> 
> 赞同：1
> 
> 时间：2012-08-28T08:57:25.870
> 
> 标签：linux, pdf, imagemagick, gif, imagemagick-convert

我有一个尺寸为 1400x800 的图像，我需要将其转换为 PDF，以便 PDF 为纵向格式并包含页面上/下半部分的图像。我需要使用 ImageMagick 6.4.8 2009-09-21，因为这是我的生产服务器上唯一可用的。无法使用 Ghostscript。

图像细节

```
>identify sample.gif
sample.gif GIF 1400x800 1400x800+0+0 8-bit PseudoClass 256c 29.3kb 
```

我已经尝试了我发现的所有选项，但没有任何效果。它始终转换为图像占据整个页面的横向。

以下是我尝试过的一些选项：

```
convert -bordercolor none -border 100x100 -page Letter -density 72 sample.gif -resize 792x612\! sample.pdf

convert -bordercolor none -border 100x100 -page Letter -density 72 sample.gif -resize 612x792\! sample.pdf

convert -density 72 -size 1400x800 sample.gif -page Letter -density 72 -resize 504x288 -bordercolor none -border 11%x14% sample.pdf 
```

和许多这样的组合，但没有任何效果。我使用 -resize 612x792 使其字母大小，但随后图像也会垂直拉伸。是否有可能实现我想要的目标，我错过了哪些选择？

注意：我必须在程序中执行此操作，因此需要使用 convert 的基于命令的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T23:46:07.397

我的猜测是您正在使用它来打印运输标签。无论哪种方式尝试这个

```
convert -size 1700x2200 xc:white sample.gif  -geometry 1400x800+150+150  -composite -page Letter -quality 100 sample.pdf 
```

# apache - 如何使 mod_cache 与动态内容一起正常工作？

> ID：12155876
> 
> 赞同：3
> 
> 时间：2012-08-28T08:57:47.493
> 
> 标签：apache, caching, cgi

我正在尝试使用 mod_cache 来缓存动态生成的内容。这是我的 Apache 配置：

```
CacheEnable mem /
MCacheSize 4096
MCacheMaxObjectCount 100
MCacheMinObjectSize 1
MCacheMaxObjectSize 2048
CacheIgnoreCacheControl On
CacheIgnoreNoLastMod On
CacheStorePrivate On
CacheStoreNoStore On

<Location /cgi-bin>
    SetHandler cgi-script
    Options +ExecCGI
</Location> 
```

这是一个 CGI 脚本（仅用于测试）：

```
#!/opt/app/phantomjs/bin/phantomjs
var date = new Date('Sun, 01 Jan 2012 00:00:00 GMT');
console.log('Last-Modified: '+ date.toUTCString());
console.log('Cache-Control: max-age=' + (365 * 24 * 60 * 60)+ ', public');
date.setDate(date.getDate() + 365);
console.log('Expires: '+ date.toUTCString() + '\n\n');

// lengthy operation here...

console.log(content); 
```

这基本上有效。但是如果客户端请求带有标头的 cgi-bin**会发生什么**`If-Modified-Since`：

1.  CGI 脚本流标头
2.  几秒钟的延迟
3.  CGI 脚本流主体
4.  Apache 发送 304

这对我来说毫无意义。Apache 在发送未修改的响应之前等待整个响应。

**我的期望**：

1.  CGI 脚本流标头
2.  Apache 发送 304
3.  CGI 脚本被取消或 CGI 脚本主体被丢弃

有什么办法可以完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T17:56:24.257

CGI 脚本应更改如下。

1.  不要使用静态的 Last-modified 日期。动态资源的 Last-Modified 应该设置为当前执行时间。

2.  缓存控制指令包含类型错误 'pulic' 应该是 'public'

3.  不需要 Expires 指令，因为 Cache-Control 的优先级高于 Expires。

发送标头后您的预期行为“终止 CGI 脚本”是不可能的。如果您的缓存有效，则在缓存条目无效之前不会执行 CGI 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T15:59:55.557

这是我在上一条评论中所说的解决方案。将 CGI 执行转发到内部虚拟主机。使用此配置 mod_cache 将按预期工作。我在我的机器上用 apache 2.2.21 测试了它。

```
# virtual cgi host - used internally only for cgi execution
<VirtualHost *:8080>
    ##ServerAdmin postmaster@dummy-host.localhost
    DocumentRoot "C:/Project/web"
    ServerName cgi-bin.local
    ErrorLog "logs/cgi-bin-error.log"
    CustomLog "logs/cgi-bin-access.log" combined
    LogLevel debug

    <Location /cgi-bin>
        SetHandler cgi-script
        Options +ExecCGI
    </Location>

</VirtualHost>

# Virtual host used by client
<VirtualHost *:8080>
    ##ServerAdmin postmaster@dummy-host.localhost
    DocumentRoot "C:/Project/web"
    ServerName web.local
    ErrorLog "logs/web-error.log"
    CustomLog "logs/web-access.log" combined

    CacheEnable mem /
    MCacheSize 4096
    MCacheMaxObjectCount 100
    MCacheMinObjectSize 50
    MCacheMaxObjectSize 20480
    MCacheMaxStreamingBuffer 20480
    CacheIgnoreCacheControl On
    CacheIgnoreNoLastMod On
    CacheStorePrivate On
    CacheStoreNoStore On

    ProxyRequests Off
    ProxyPass /cgn-bin http://cgi-bin.local:8080/
    ProxyPassReverse /cgn-bin http://cgi-bin.local:8080/

</VirtualHost> 
```

# servlets - 在 FilterChain.doFilter() - HttpServletResponseWrapper 之后添加 Cookie 以忽略刷新？

> ID：12155879
> 
> 赞同：9
> 
> 时间：2012-08-28T08:58:01.383
> 
> 标签：servlets, cookies, servlet-filters, flush

我想`HttpServletResponse`在其内容（通常是 HTML）被渲染后添加一个 cookie。

正如这里（[http://osdir.com/ml/java.jasig.uportal/2005-10/msg00276.html](http://osdir.com/ml/java.jasig.uportal/2005-10/msg00276.html)）和这里（[在标头被刷新后将cookie添加到Java中的响应中？](https://stackoverflow.com/questions/2158548/adding-a-cookie-to-the-response-in-java-after-the-header-has-been-flushed)），这个通过缓冲响应是可能的，因此它不会被刷新并发送到客户端（因为在将标头发送到客户端之后，响应已提交，并且不再有标头，即 cookie 标头，可以发送到客户端）。

**假设这是手头的目标：**我认为实现此目的的一种可能方法是使用`HttpServletResponseWrapper`，我可以覆盖其`flushBuffer()`方法并防止将 headers\content 实际刷新到客户端：

```
public class BufferedHttpServletResponse extends HttpServletResponseWrapper {

    public BufferedHttpServletResponse(HttpServletResponse response) {
        super(response);
    }

    public void flushBuffer() {
    }

} 
```

并在 a 中应用此缓冲响应，以`Filter`供过滤器链的其余部分使用：

```
public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) {

    HttpServletRequest request = (HttpServletRequest) req;
    HttpServletResponse response = (HttpServletResponse) res;

    BufferedHttpServletResponse bufferedResponse = new BufferedHttpServletResponse(response);

    chain.doFilter(request, bufferedResponse);

    // ... create Cookie and add it to response ... response.addCookie(newCookie)
    // response.flushBuffer() ?        

} 
```

问题：以上是可以的，还是完全关闭了？响应的缓冲区是否会一直充满内容\标题（并且可能会重新调整大小），直到我`doFilter()`退出之后，然后被其他过滤器或 servlet 容器（Tomcat）刷新并发送到客户端？我应该自己刷新响应吗？...这里提到（[应该在 HttpServletResponse.getOutputStream()/.getWriter() 上调用 .close() 吗？](https://stackoverflow.com/questions/1159168/should-one-call-close-on-httpservletresponse-getoutputstream-getwriter)）不应该关闭流，但在这种情况下应该刷新响应吗？

**不一定假设这是手头的目标：**我的一般问题是我需要为客户端浏览器设置一个 cookie，但 cookie 的值取决于呈现响应内容时发生的事情（发生在 Struts 1.0 中的事情）操作，然后在 Velocity 模板中） - 我知道只有在经历了整个（Servlet -> HTML 渲染）流程之后我想要设置的 cookie 值。

请启发我。谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-31T21:15:30.223

看起来没有人准备好接受这个，我会尝试至少提供我的观点。

在我回答你的问题之前首先，让我们看一下 servlet 过滤器的主要任务。

*   查询请求并采取相应措施。
*   阻止请求和响应对进一步传递。
*   修改请求头和数据。您可以通过提供请求的定制版本来做到这一点。
*   修改响应头和数据。**您可以通过提供自定义版本的响应来做到这一点。**

来源：[http ://docs.oracle.com/javaee/6/tutorial/doc/bnagb.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnagb.html)

现在回到您的问题，您可以通过自定义响应 aka 来修改响应标头`ResponseWrapper`。

查看您的代码，您尝试做的是修改原始响应而不是修改自定义响应，并且哪个（将 cookie 添加到原始响应）是**不正常**的。

因此，正确的做法是在您的自定义中添加 cookie，如下例所示。

```
 private class CustomResponseWrapper extends HttpServletResponseWrapper {

        private Collection<Cookie> myCookies = new ArrayList<Cookie>();

        public CustomResponseWrapper(HttpServletResponse response) {
            super(response);
        }

        @Override
        public void addCookie(Cookie cookie) {
            super.addCookie(cookie);
            myCookies.add(cookie);
        }
    } 
```

# spring - Spring 表达式语言 (SpEL) 和统一表达式语言 (UEL) 之间的区别

> ID：12155883
> 
> 赞同：5
> 
> 时间：2012-08-28T08:58:13.093
> 
> 标签：spring, spring-el

Spring 表达式语言 (SpEL) 和统一表达式语言 (UEL) 之间有什么区别？

官方 Spring 文档说：

> “语言语法类似于统一 EL，但提供了附加功能，最显着的是方法调用和基本字符串模板功能。” （见[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/expressions.html)）

方法调用到底有什么区别？

还有一些不同之处吗？

谢谢，马蒂亚斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T23:14:30.873

~~Unified EL 是一种真正的模板语言，它没有提供调用方法的方法。该语言只允许您访问 Java bean 的属性，而不是它们的方法。~~EL 2.2 允许您调用方法，因此该参数不再有效。

Spring El 是一种强大的语言，因为它允许您调用方法和构造函数、进行分配和过滤集合。如果您在 JSP 视图中使用 Spring EL，使用**spring:eval**标记，您还可以自动获得 spring 转换器/格式化程序的好处。它是一个很棒的工具，但应该小心使用，因为它很容易将各种应用程序逻辑放在您的视图中。

除了 JSP 视图之外，Spring EL 还可以用于 Spring 框架的其他部分，例如带有 @PreAuthorize 注释的安全表达式。

# javascript - 此脚本在运行时停止

> ID：12155885
> 
> 赞同：2
> 
> 时间：2012-08-28T08:58:15.483
> 
> 标签：javascript, jquery, html, css, marquee

[http://jsbin.com/uyawi/1879/edit](http://jsbin.com/uyawi/1879/edit)

html部分是

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>
<head>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>

<style type="text/css">
</style>

</head>
<body>

  <div id="marquee"><p>My scrolling text is so freakin' COOL!!!111!</p><p>My scrolling text is so freakin' COOL!!!111!</p
<p>My scrolling text is so freakin' COOL!!!111!</p</div>

</body>
</html> 
```

这是javascript

```
$(function() {

    var marquee = $("#marquee"); 
    marquee.css({"overflow": "hidden", "height": "100%"});

    // wrap "My Text" with a span (IE doesn't like divs inline-block)
    marquee.wrapInner("<span>");
    marquee.find("span").css({ "height": "100%", "display": "inline-block", "text-align":"center" }); 
   marquee.append(marquee.find("span").clone()); // now there are two spans with "My Text"    
    marquee.wrapInner("<div>");
    marquee.find("div").css("height", "100%");    
    var reset = function() {
        $(this).css("margin-top", "100%");
        $(this).animate({ "margin-top": "-100%" }, 5000, 'linear', reset);
    };    
    reset.call(marquee.find("div"));

}); 
```

跑的时候停了一会儿又跑了，你知道怎么解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:03:47.100

```
var reset = function() {
    $(this).css("margin-top", "100%");
    $(this).animate({ "margin-top": "0%" }, 5000, 'linear', reset);
}; 
```

# java - Java：使用 java 和 externam API 的类强制转换异常

> ID：12155887
> 
> 赞同：0
> 
> 时间：2012-08-28T08:58:22.080
> 
> 标签：java, exception, hadoop

我正在编写一个基于 jave 的 hadoop map reduce 代码——。我正在调用一个外部库来处理我的数据。我得到了类转换异常。请告诉我原因和可能的解决方案。

```
public void map(Object key, DocR value, Context context) {

    DataToHdfs test = null;
    try {
        docs = new DocR(new File(AnnotationExtration.INPUT_LOCATION));

     compiledAql=AnnotationExtration.aog;

    SystemX.Single syst = new SystemX.Single(compiledAql, AnnotationExtration.docSchema);
    String combinedResult="";
    while (docs.hasNext()) { 
```

...........做一些处理和发送数据HDFS。

```
if((combinedResult)!=null){

                            test.writToHdfs(combinedResult);
                        }
                System.out.println(combinedResult);

                // Writing to HDFS.
 context.write(new Text("1",),new Text(combinedResult)); 
```

例外是：-

```
java.lang.ClassCastException: org.apache.hadoop.io.Text cannot be cast to com.somepackage.api.DocR
at   com.somePackage.AnnotationExtrationMapper.map(AnnotationExtrationMapper.java:1)
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)
12/08/28 13:02:23 INFO mapred.JobClient:  map 0% reduce 0%
12/08/28 13:02:23 INFO mapred.JobClient: Job complete: job_local_0001 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:28:58.290

该异常通常意味着您正在尝试错误地转换某些内容。如果你这样做：

```
Text foo = new Text("bar");
map(someKey, (DocR) foo, someContext); 
```

然后你会因为 得到一个 ClassCastException `(DocR) foo`，因为`Text`实例绝不是一个`DocR`对象。

我认为你得到了异常发生错误的行。方法声明通常不会导致类转换异常。

在 AnnotationExtrationMapper.java 中搜索`(DocR)`. 该演员表操作员很可能出现在问题所在的任何地方。

# ios - IOS Coreplot散点图动画绘制

> ID：12155888
> 
> 赞同：5
> 
> 时间：2012-08-28T08:58:24.377
> 
> 标签：ios, core-plot, cabasicanimation

我需要在 ios 中为散点图制作动画，以使其像线条绘制一样。[这个网站http://www.highcharts.com](http://www.highcharts.com)也有类似的效果。我尝试了基本动画但没有成功，但无法做出这种效果。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T17:47:29.470

不幸的是，我发现 CorePlot 在这方面的动画功能受到限制。

但是，通过动画扩展封装图形的常规 UIView 的扩展，我已经成功地实现了相同的效果。

我现在没有我的代码，这里有一个图表来突出我是如何做到的：

![在此处输入图像描述](../Images/e1bb89587f2bec79f817ce65f2901ff6.png)

这里的关键是您使用包含图形的 UIView 开始初始动画，并且谁的框架比图形的宽度更小。然后将帧宽度设置为完整的图形大小。

当它动画时，它会逐渐以平滑的动画显示您的图形。

# mysql - 每天计划将本地 Microsoft MySQL 数据库同步到远程 mysql 数据库

> ID：12155889
> 
> 赞同：0
> 
> 时间：2012-08-28T08:58:26.857
> 
> 标签：mysql, sql, database, synchronization, scheduled-tasks

嗨，我有一个本地 mysql 数据库，每天在 Windows 机器上本地更新。归根结底，我希望 Windows 调用一个计划的作业，用所有新数据更新远程 mysql 数据库，即比较和同步。

我已经在远程服务器上创建了测试数据库，并且我允许远程访问。我想要简单的程序/解决方案，我可以在命令行上调用，用新的或更改的记录等更新远程数据库。

本地数据库在 Windows 机器上，远程数据库在带有 debian 的网络服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:00:10.317

MySQL 允许复制：你不需要使用特定的应用程序，你看过[http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

# qt - 在调试模式 windows 7 下运行期间的 Qt、openCV 和错误代码

> ID：12155896
> 
> 赞同：0
> 
> 时间：2012-08-28T08:58:47.137
> 
> 标签：qt, opencv, windows-7

我已经在我的 Windows 7 专业版 64 上安装了 openCV 和 Qt 框架。我已经将带有动态库的路径添加到系统变量 PATH 中。

```
Mat img_1 = imread( "pic.jpg" );
imshow( "Easy sample", img_1 );
waitKey(0); 
```

当我尝试从 OpenCV 页面编译此示例时，它编译时没有错误和警告，但它不显示任何带有 img 的窗口。当我尝试在调试模式下运行它时，我得到错误代码 0xc0000138。

我发现 0xc0000135 在系统中缺少动态库文件，但我找不到 0xc0000138 的含义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T13:52:02.937

我也面临与 opencv 2.4.0 和 opencv 2.4.2 相同的问题...似乎 imread 无法正常工作...

如果您真的需要像 Mat 一样使用图像，您可以执行以下操作....它可以工作...

```
#include "iostream"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;
using namespace std;

int main()
{
    IplImage *image = cvLoadImage("C:\\lena.jpg");
    Mat im(image);
    imshow("TEST",im);
    waitKey();
    return 0;
} 
```

# arraylist - 根据日期属性对列表中的元素进行排序并删除所有旧条目-java

> ID：12155897
> 
> 赞同：0
> 
> 时间：2012-08-28T08:58:51.850
> 
> 标签：arraylist, sorting

需要根据其属性之一从 ArrayList 中删除元素我有一个 arraylist alElement 包含以下元素：

```
 [<?xml version="1.0" encoding="UTF-8"?>
          <SPLSCustnumRel ConID="1961262402" Customer="730206"
           Party="125854302" StartDate="2010-01-20-00.00.00.000000" />
          , <?xml version="1.0" encoding="UTF-8"?>
          <SPLSCustnumRel ConID="1113415796" Customer="730206"
            Party="125854302" StartDate="2011-10-05-00.00.00.000000" />
          , <?xml version="1.0" encoding="UTF-8"?>
            <SPLSCustnumRel ConID="19612402" Customer="730206"
            Party="125854302" StartDate="2012-01-20-00.00.00.000000" />
      ] 
```

这是以前未排序的。我已经根据 StartDate 对这个数组列表进行了排序，例如：

```
 Collections.sort(alElement, new Comparator<YFCElement>() {

                    public int compare(YFCElement o1, YFCElement o2) {
                        // TODO Auto-generated method stub

                        return o1.getAttribute("StartDate").compareToIgnoreCase(o2.getAttribute("StartDate"));
                    }

                }); 
```

不，我想删除除最近开始日期的元素之外的所有元素。我尝试比较排序中的日期，但它不起作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:18:50.517

使用 PriorityQueue 并将尾部出列，然后清除队列并将其重新插入。实际上，你可以用你的列表来做到这一点......它更简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:43:12.367

嗨，实际上我已经想出了一个解决方法。由于我已经使用最近开始日期为最后一个元素的元素对列表进行了排序，因此我只需编写如下一行即可删除列表中除最后一个元素之外的所有元素：

```
 alElement.subList(0, alElement.size()-1).clear(); 
```

这解决了我的目的。

# http - 在 tcl 8.0 中使用 http post 方法获取 url

> ID：12155899
> 
> 赞同：2
> 
> 时间：2012-08-28T08:58:52.877
> 
> 标签：http, post, tcl

我正在尝试使用 tcl 8.0 中的 post 方法获取一些 url。

它不打印任何输出。

这是我的代码块。

```
foreach sKey [array names aQuery] {                                        
    set sValue $aQuery($sKey)                                              
    append sQueryString "[::http::formatQuery $sKey $sValue]&"                                  
}                                                                          

set sQueryString [string trim $sQueryString "&"]                           

set sToken [::http::geturl $sUrl -query $sQueryString -channel stdout] 

::http::wait $sToken                                                   

upvar #0 $sToken state                                                     

foreach sKey [array names state] {                                         
    puts "$sKey $state($sKey)"                                             
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T11:57:32.933

已经升级了。你为什么要使用上个千年发布的版本。

http::formatQuery 过程将一个或多个键值对作为参数，以便该部分可以更好地呈现如下。如果有疑问，最好避免使用 -channel 选项并自己检查状态。所以像：

```
set query [eval ::http::formatQuery [array get aQuery]]
set tok [http::geturl $sUrl -query $query -timeout 10000]
http::wait $tok
if {![string compare [http::status] "ok"]} {
    puts [http::data $tok]
} else {
    puts stderr [http::error $tok]
}
http::cleanup $tok 
```

请注意，在更新的 tcl 版本中，您可以使用`[http::status] eq "ok"`或`[string equal [http::status] "ok"]`. 不要忘记清理 http 令牌。如果您在 GUI 程序中执行此操作，请使用 -command 选项并在回调中完成所有工作，这样您就不会在执行 http::wait 时冻结 UI。

# php - 使用 PHP 创建 windows 媒体播放器播放列表

> ID：12155903
> 
> 赞同：0
> 
> 时间：2012-08-28T08:59:23.430
> 
> 标签：php, playlist, windows-media-player, wpl

我正在尝试制作一个将生成 .WPL 文件的脚本。该脚本扫描文件夹中的所有 .mp3 文件，并将它们包含在 .wpl 文件中。但是它似乎不起作用，因为 Windows 媒体播放器给我一个文件已损坏的错误。

代码有什么问题？:)

```
 $ourFileName = "Playlist.wpl";
    $ourFileHandle = fopen($ourFileName, 'w') or die("can't open file");
    echo "Created the playlist <br />";
    $firsthalf = "
    <?wpl version='1.0'?>
        <smil>
            <head>
                <meta name='Generator' content='Microsoft Windows Media Player -- 12.0.9200.16384'/>
                <meta name='IsNetworkFeed' content='0'/>
                <title>Playlist</title>
            </head>
        <body>
            <seq>";
    $secondhalf = "
        </seq>
        </body>
    </smil>
    ";

    fwrite($ourFileHandle, $firsthalf);

    foreach (glob("*.mp3") as $filename) {
        fwrite($ourFileHandle, "<media src='".$filename."'/>");     
    }       

    fwrite($ourFileHandle, $secondhalf);
    fclose($ourFileHandle); 
```

编辑：生成的 .wpl 文件如下所示：

```
 <?wpl version='1.0'?>
        <smil>
            <head>
                <meta name='Generator' content='Microsoft Windows Media Player -- 12.0.9200.16384'/>
                <meta name='IsNetworkFeed' content='0'/>
                <title>Playlist</title>
            </head>
        <body>
            <seq><media src='FIRST SONG.mp3'/><media src='SECOND SONG.mp3'/>
        </seq>
        </body>
    </smil> 
```

EDIT2：歌曲与播放列表文件位于同一文件夹中。EDIT3：我正在使用 Windows 8 RTM 中包含的最新 Windows Media Player。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:04:55.150

必须是该`media src`歌曲的完整路径或至少相对于`.wpl`文件。

```
<seq><media src='c:\music\FIRST SONG.mp3'/><media src='c:\music\SECOND SONG.mp3'/></seq> 
```

所以你需要：

```
foreach (glob("*.mp3") as $filename) {
    fwrite($ourFileHandle, "<media src='".realpath($filename)."'/>");     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:07:39.253

我的直觉反应是你需要一个项目计数。我制作了一个快速播放列表，最明显的缺失是您的项目数。以及不同线路上的项目，尽管我希望这是一件较小的事情。

```
<?wpl version="1.0"?>
<smil>
    <head>
        <meta name="Generator" content="Microsoft Windows Media Player -- 12.0.7601.17514"/>
        <meta name="ItemCount" content="2"/>
        <title>test</title>
    </head>
    <body>
        <seq>
            <media src="Music\Faves\Dario G - Sunchyme [radio version].mp3" tid="{4B0B7EAC-98F9-4566-9A8C-80E92334D03A}"/>
            <media src="Music\Faves\Dario G - Sunchyme [original].mp3"/>
        </seq>
    </body>
</smil> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T09:54:39.560

为什么不使用 PHP 来动态创建 wpl 文件，我很快把这个功能放在一起，也许它有些兴趣，输出到文件、浏览器或强制下载/发送文件给用户。

```
<?php
create_playlist('./', "Playlist.wpl",'save');

/**
 * Using SimpleXMLElement create wmp playlist
 *
 * @param string $path_to_files - Pathe to mp3 files
 * @param string $save_path - path to save your xml
 * @param string $handle - download || save 
 */
function create_playlist($path_to_files, $save_path=null, $handle='download'){

    $xml = new SimpleXMLElement('<?wpl version="1.0"?><smil/>');
    $node = $xml->addChild('head');

    $meta = $node->addChild('meta', '');
    $meta->addAttribute('name', 'Generator');
    $meta->addAttribute('content', 'Microsoft Windows Media Player -- 12.0.9200.16384');

    $meta = $node->addChild('meta', '');
    $meta->addAttribute('name', 'IsNetworkFeed');
    $meta->addAttribute('content', '0');

    $node->addChild('title', 'Playlist');

    $body = $xml->addChild('body');
    $seq = $body->addChild('seq');

    foreach (glob($path_to_files."*.mp3") as $filename) {
        $media = $seq->addChild('media', "");
        $media->addAttribute('src', realpath($filename));
    }

    ob_start();
    echo $xml->asXML();
    $return = ob_get_contents();
    ob_end_clean();
    $return = trim(str_replace(array('<?xml version="1.0"?>','></media>','></meta>'),array('','/>','/>'),$return));

    if($handle == 'download'){
        //Force a download
        header('Content-Description: File Transfer');
        header('Content-Type: application/vnd.ms-wpl');
        header('Content-Disposition: attachment; filename=our_playlist.wpl');
        header('Content-Transfer-Encoding: binary');
        header('Content-Length: ' . sprintf("%u", strlen($return)));
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Expires: 0');
        header('Pragma: public');
        exit($output);
    }elseif($handle == 'save'){
        file_put_contents($save_path, $return);
        return true;
    }else{
        exit($return);
    }
}

/**
 * Result
 * 
<?wpl version="1.0"?>
<smil>
   <head>
    <meta name="Generator" content="Microsoft Windows Media Player -- 12.0.9200.16384"/>
    <meta name="IsNetworkFeed" content="0"/>
    <title>Playlist</title>
   </head>

   <body>
    <seq>
        <media src="C:\xampp\htdocs\test.mp3"/>
        ...
        ...
    </seq>
   </body>
</smil>
*/ 
```

# cocos2d-iphone - 使用 ccJumpto 跳转精灵主体

> ID：12155905
> 
> 赞同：0
> 
> 时间：2012-08-28T08:59:31.270
> 
> 标签：cocos2d-iphone, box2d-iphone

我有跳跃精灵身体的问题。下面是跳跃精灵体的更新方法

```
-(void) update: (ccTime) dt
{

    world->Step(dt, 10, 10);
    // BOOL worldAsleep=true;
    for(b2Body *b=world->GetBodyList();b;b=b->GetNext())
    {
        if(b->GetUserData() !=NULL)
        {

            CCSprite *myActor=(CCSprite *)b->GetUserData();

            myActor.position=ccp(b->GetPosition().x *PTM_RATIO, b->GetPosition().y *PTM_RATIO);
            b->SetTransform(b2Vec2(b->GetPosition().x,b->GetPosition().y), b->GetAngle());

           if (fire.active==YES) 
            {
                id jump=[CCJumpBy actionWithDuration:1 position:ccp(b->GetPosition().x, b->GetPosition().y) height:100 jumps:1];
                [myActor runAction:jump];
                b2Vec2 force = b2Vec2(0,350);                
            }

        }
    }

} 
```

这里 fire.active 是一个跳跃精灵的按钮，而 ccjumpto 方法用于跳跃精灵，但是如何跳跃身体。对于跳跃精灵主体，我使用了 ApplyLinearImpuls，但它不能像精灵类型那样跳跃。

我想同时跳精灵和身体，就像精灵跳跃一样

感谢重播

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T11:07:44.063

嘿，您根据单击的按钮跳动身体，单击按钮时您输入以下代码：

```
b2Vec2 locationWorld;
 locationWorld = b2Vec2(0.0f,8.0f);
 double Force= _body->GetMass();
  _body->ApplyLinearImpulse(Force*locationWorld, _body->GetWorldCenter()); 
```

# c# - C#：构造函数调用的顺序

> ID：12155906
> 
> 赞同：9
> 
> 时间：2012-08-28T08:59:36.947
> 
> 标签：c#, constructor

考虑以下代码：

**编码**

```
public class RecursiveConstructor
{
   //When this constructor is called 
   public RecursiveConstructor():this(One(), Two())
   {
       Console.WriteLine("Constructor one. Basic.");
   }

   public RecursiveConstructor(int i, int j)
   {
       Console.WriteLine("Constructor two.");
       Console.WriteLine("Total = " + (i+j));
   }

   public static int One()
   {
       return 1;
   }

   public static int Two()
   {
       return 2;
   }
} 
```

**调用方法**

```
public class RecursiveConstructorTest
{
    public static void Main()
    {
        RecursiveConstructor recursiveConstructor = new RecursiveConstructor();

        Console.ReadKey();
    }
} 
```

**结果**

> 构造函数二。
> 
> 总计 = 3
> 
> 构造函数一。基本的。

为什么第二个构造函数首先运行？

我知道在链式构造函数中，我们首先调用基类构造函数，然后沿着链返回，但是当构造函数保存在同一个类中时，为什么我们仍然会看到首先调用额外构造函数的这种行为？

我原以为会首先执行最基本的构造函数内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:07:49.070

我认为编译器运行更安全的场景。如果你在这里调用另一个构造函数，那么这个构造函数很可能是你当前构造函数的*先决条件。*这种行为与调用基本构造函数时暴露的行为一致，并且是可以预料的。

当创建一个类的新实例时，有一系列构造函数被调用，从最不专业的（对象类的构造函数）到最专业的（当前类的构造函数）。

运算符`:`允许您**显式地将构造函数添加**到此链中，因此此顺序看起来很自然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:04:39.770

你自己给出了解释。调用基本构造函数的方式几乎相同。每当在签名中调用构造函数时，例如

```
 public RecursiveConstructor() : this(One(), Two()) 
```

或者

```
 public RecursiveConstructor() : base() 
```

紧随其后的构造函数`:`首先被调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T09:16:07.057

当您考虑到在初始化新对象时总是有一个层次结构的构造函数调用链时，这是有道理的。正如您所说的那样，首先调用基类构造函数。

构造函数初始化器的两种形式，`: base(...)`通常被隐式调用，并且`: this(...)`行为方式相同。

因此，在您的情况下，我们有一个链：

```
Object() 
```

然后...

```
RecursiveConstructor(int i, int j) 
```

然后...

```
RecursiveConstructor() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T09:09:00.877

它首先调用构造函数 1，但*ctor1*在到达 ctor1 代码块之前调用*ctor2 ，因此您会看到输出。*

解决这个问题的一种方法，但要保留 DRY 行为是重构`(int, int)`重载：

```
 //When this constructor is called 
   public RecursiveConstructor()
   {
       Console.WriteLine("Constructor one. Basic.");
       Init(One(), Two());
   }

   public RecursiveConstructor(int i, int j)
   {
       Console.WriteLine("Ctor 2");
       Init(i, j);
   }

   private void Init(int i, int j)
   {
       Console.WriteLine("Refactored");
       Console.WriteLine("Total = " + (i+j));
   } 
```

出于兴趣，以这种方式链接构造函数通常被称为“[委托构造函数](http://en.wikipedia.org/wiki/C++11#Object_construction_improvement)”。

在 Java 中，可以在代码块中调用另一个构造函数（例如，[参见此处](https://stackoverflow.com/questions/474535/best-way-to-represent-a-fraction-in-java/474612)），但它必须是代码块中的第一行

# python - 将自给定日期以来的日期时间转换为分钟

> ID：12155908
> 
> 赞同：8
> 
> 时间：2012-08-28T08:59:42.430
> 
> 标签：python, datetime, int, python-2.6

> **可能重复：**
> [Python 日期时间到 Unix 时间戳](https://stackoverflow.com/questions/2775864/python-datetime-to-unix-timestamp)

有没有办法将 a 转换`datetime`为`int`，表示自 2012 年 1 月以来的分钟数，以便`int`可以对其进行修改、写入数据库、进行比较等等？编辑：我运行它的服务器使用 Python 2.6.6

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T09:07:49.770

减去两个`datetime.datetime`对象会给你一个[`timedelta`object](http://docs.python.org/library/datetime.html#timedelta-objects)，它有一个[`.total_seconds()`方法](http://docs.python.org/library/datetime.html#datetime.timedelta.total_seconds)（在 Python 2.7 中添加）。将其除以 60 并转换`int()`为自参考日期以来的分钟数：

```
import datetime

january1st = datetime.datetime(2012, 01, 01)
timesince = datetime.datetime.now() - january1st
minutessince = int(timesince.total_seconds() / 60) 
```

或在 python shell 中：

```
>>> import datetime
>>> january1st = datetime.datetime(2012, 01, 01)
>>> timesince = datetime.datetime.now() - january1st
>>> minutessince = int(timesince.total_seconds() / 60)
>>> minutessince
346208 
```

对于 python 2.6 及更早版本，您必须使用`.days`and`.seconds`属性来计算分钟数：

```
minutessince = timesince.days * 1440 + timesince.seconds // 60 
```

这也给了你一个整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T09:04:14.823

如果您想要两个日期之间的 delta 分钟，您可以`datetime.timedelta`通过减去两个日期来创建一个对象（请参阅[此处](http://docs.python.org/library/datetime.html#datetime.timedelta)），然后检索分钟，如本问题所示：

[将 timedelta 转换为天、小时和分钟](https://stackoverflow.com/questions/2119472/convert-a-timedelta-to-days-hours-and-minutes)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T09:04:42.280

通过减去日期时间，您可以获得时间增量。这个 timedelta 可以自己划分给你你想要的：

```
(datetime.datetime.now() - datetime.datetime(2012, 1, 1)) // datetime.timedelta(minutes=1) 
```

（此代码仅对 python3 有效，这就是为什么每个人都应该切换到 python3 ;-)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T09:08:09.253

```
>>> import datetime
>>> now = datetime.datetime.now()
>>> then  = datetime.datetime(year=2012, month=1, day=1)
>>> delta=now-then 
```

这是一个表示时间间隔的 timedelta 对象。

```
>>> print delta
240 days, 11:05:25.507000 
```

要计算该间隔内的分钟数，请使用：

```
>>> print delta.total_seconds() / 60
346265.42511666665 
```

# javascript - 在骨干关系中链接模型

> ID：12155910
> 
> 赞同：1
> 
> 时间：2012-08-28T08:59:48.770
> 
> 标签：javascript, backbone.js, backbone-relational

您将如何使用主干-relational.js 链接模型，然后允许特定于关系所键入的 id 的视图？

例如，模型**票**有许多模型票**分配**，模型**票分配**有一个模型**用户**。应用程序的流程是查看完整的工单列表**，**然后单击工单以查看分配的**用户列表。**

我已经尝试遵循主要的骨干关系示例，但似乎无法使其正常工作（让我知道示例代码是否有帮助）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T06:12:13.860

基本上，您所拥有的是与链接模型的多对多关系`ticketAssignment`。您可以查看[Backbone-JJRelational](https://github.com/jj-studio/Backbone-JJRelational)，它提供多对多关系而无需链接模型。按照文档中的描述设置您的模型，然后使用类似这样的方法来获取用户名：

```
ticket.get('users').each(function (user) {
    console.log(user.get('name'));
}); 
```

# vb.net - Listview中的文本对齐列：第一列不能居中

> ID：12155921
> 
> 赞同：8
> 
> 时间：2012-08-28T09:00:51.937
> 
> 标签：vb.net, listview, text-align

我有一个包含 3 列的详细模式列表视图。我想将标题的文本对齐设置为“中心”。这适用于最后两列，但不适用于第一列。如果我想将其更改为“中心”并单击“中心”，则该字段一直设置为“左”。我可以使用属性更改它还是需要对此进行编程？

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-28T09:22:42.957

根据[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.columnheader.textalign%28v=vs.100%29.aspx)：

> 由于底层控件的限制，该属性对 ListView 控件中的第一列没有影响，它总是左对齐。要解决 .NET Framework 2.0 版中的这一限制，您可以自己处理[ListView.DrawColumnHeader](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.drawcolumnheader%28v=vs.100%29.aspx)事件并绘制列标题。

另一种替代解决方法是根本不使用第一列并通过将其[宽度](http://msdn.microsoft.com/en-us/library/system.windows.forms.columnheader.width%28v=vs.100%29)设置为零来隐藏它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-02T12:57:25.843

我有一个简单的解决方案：添加一个新的（不需要的）第一列。将第二列（您真正的第一列）的对齐方式更改为向右或居中（现在可以在设计器中完成）。在 Form-Load-Event 中删除第一（临时）列。瞧 - textalignent 现在应该是正确的。

我在 Windows 7、8.1 和 10 下测试了这种行为。它应该可以工作。

来自德国的问候

# ios - glReadPixels 白点问题

> ID：12155923
> 
> 赞同：2
> 
> 时间：2012-08-28T09:01:08.310
> 
> 标签：ios, opengl-es, opengl-es-2.0, glreadpixels

我正在尝试使用 OpenGL ES 在我的 iPad 上制作屏幕截图。这确实有效，但上面有空白点。这些空白点似乎是渲染的对象。我也尝试过使用其他缓冲区，但它们似乎都不包含实际的 3D 对象？

我正在使用 String SDK 的示例代码。

问题图片：

[![问题](../Images/f11c29e5376d468c48745c57ad80cc5a.png)](https://i.stack.imgur.com/lbtvS.jpg)

*EAGLView.m*

```
- (void)createFramebuffer
{
    if (context && !defaultFramebuffer)
    {
        [EAGLContext setCurrentContext:context];

        // Handle scale
        if ([self respondsToSelector:@selector(setContentScaleFactor:)])
        {
            float screenScale = [UIScreen mainScreen].scale;

            self.contentScaleFactor = screenScale;
        }

        // Create default framebuffer object.
        glGenFramebuffers(1, &defaultFramebuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, defaultFramebuffer);

        // Create color render buffer and allocate backing store.
        glGenRenderbuffers(1, &colorRenderbuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);
        [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:(CAEAGLLayer *)self.layer];
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &framebufferWidth);
        glGetRenderbufferParameteriv(GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &framebufferHeight);

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorRenderbuffer);

        // Create and attach depth buffer
        glGenRenderbuffers(1, &depthRenderbuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, depthRenderbuffer);
        glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, framebufferWidth, framebufferHeight);

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer);

        // Bind color buffer
        glBindRenderbuffer(GL_RENDERBUFFER, colorRenderbuffer);

        if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
            NSLog(@"Failed to make complete framebuffer object %x", glCheckFramebufferStatus(GL_FRAMEBUFFER));
    }
} 
```

*截图代码*

*EAGLView.m*

```
- (UIImage*)snapshot:(UIView*)eaglview
{
    GLint backingWidth, backingHeight;

    // Bind the color renderbuffer used to render the OpenGL ES view
    // If your application only creates a single color renderbuffer which is already bound at this point,
    // this call is redundant, but it is needed if you're dealing with multiple renderbuffers.
    // Note, replace "_colorRenderbuffer" with the actual name of the renderbuffer object defined in your class.
    //glBindRenderbufferOES(GL_RENDERBUFFER_OES, _colorRenderbuffer);

    // Get the size of the backing CAEAGLLayer
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_WIDTH_OES, &backingWidth);
    glGetRenderbufferParameterivOES(GL_RENDERBUFFER_OES, GL_RENDERBUFFER_HEIGHT_OES, &backingHeight);

    NSInteger x = 0, y = 0, width = backingWidth, height = backingHeight;
    NSInteger dataLength = width * height * 4;
    GLubyte *data = (GLubyte*)malloc(dataLength * sizeof(GLubyte));

    // Read pixel data from the framebuffer
    glPixelStorei(GL_PACK_ALIGNMENT, 4);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, data);

    // Create a CGImage with the pixel data
    // If your OpenGL ES content is opaque, use kCGImageAlphaNoneSkipLast to ignore the alpha channel
    // otherwise, use kCGImageAlphaPremultipliedLast
    CGDataProviderRef ref = CGDataProviderCreateWithData(NULL, data, dataLength, NULL);
    CGColorSpaceRef colorspace = CGColorSpaceCreateDeviceRGB();
    CGImageRef iref = CGImageCreate(width, height, 8, 32, width * 4, colorspace, kCGBitmapByteOrder32Big | kCGImageAlphaPremultipliedLast,
                                    ref, NULL, true, kCGRenderingIntentDefault);

    // OpenGL ES measures data in PIXELS
    // Create a graphics context with the target size measured in POINTS
    NSInteger widthInPoints, heightInPoints;
    if (NULL != UIGraphicsBeginImageContextWithOptions) {
        // On iOS 4 and later, use UIGraphicsBeginImageContextWithOptions to take the scale into consideration
        // Set the scale parameter to your OpenGL ES view's contentScaleFactor
        // so that you get a high-resolution snapshot when its value is greater than 1.0
        CGFloat scale = eaglview.contentScaleFactor;
        widthInPoints = width / scale;
        heightInPoints = height / scale;
        UIGraphicsBeginImageContextWithOptions(CGSizeMake(widthInPoints, heightInPoints), NO, scale);
    }
    else {
        // On iOS prior to 4, fall back to use UIGraphicsBeginImageContext
        widthInPoints = width;
        heightInPoints = height;
        UIGraphicsBeginImageContext(CGSizeMake(widthInPoints, heightInPoints));
    }

    CGContextRef cgcontext = UIGraphicsGetCurrentContext();

    // UIKit coordinate system is upside down to GL/Quartz coordinate system
    // Flip the CGImage by rendering it to the flipped bitmap context
    // The size of the destination area is measured in POINTS
    CGContextSetBlendMode(cgcontext, kCGBlendModeCopy);
    CGContextDrawImage(cgcontext, CGRectMake(0.0, 0.0, widthInPoints, heightInPoints), iref);

    // Retrieve the UIImage from the current context
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    // Clean up
    free(data);
    CFRelease(ref);
    CFRelease(colorspace);
    CGImageRelease(iref);

    return image;
} 
```

*String_OGL_TutorialViewController.m*

```
- (void)render
{
    [(EAGLView *)self.view setFramebuffer];

    glDisable(GL_CULL_FACE);
    glEnable(GL_DEPTH_TEST);

    const int maxMarkerCount = 10;
    struct MarkerInfoMatrixBased markerInfo[10];

    int markerCount = [stringOGL getMarkerInfoMatrixBased: markerInfo maxMarkerCount: maxMarkerCount];

    for (int i = 0; i < markerCount; i++)
    {
        float diffuse[4] = {0, 0, 0, 0};
        diffuse[markerInfo[i].imageID % 3] = 1;

        if ([context API] == kEAGLRenderingAPIOpenGLES2)
        {
            glUseProgram(program);
            glUniform4fv(uniforms[UNIFORM_COLOR], 1, diffuse);

            const float translationMatrix[16] = {1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, -cubeScale, 1};
            float modelViewMatrix[16];
            float modelViewProjectionMatrix[16];

            [String_OGL_TutorialViewController multiplyMatrix: translationMatrix withMatrix: markerInfo[i].transform into: modelViewMatrix];
            [String_OGL_TutorialViewController multiplyMatrix: modelViewMatrix withMatrix: projectionMatrix into: modelViewProjectionMatrix];

            glUniformMatrix4fv(uniforms[UNIFORM_MVP], 1, GL_FALSE, modelViewProjectionMatrix);

            glEnableVertexAttribArray(0);
            glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, NULL);
            glEnableVertexAttribArray(1);
            glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, ((float *)NULL) + 6 * 4 * 3);

            // Validate program before drawing. This is a good check, but only really necessary in a debug build.
            // DEBUG macro must be defined in your debug configurations if that's not already the case.
#if defined(DEBUG)
            if (![self validateProgram:program])
            {
                NSLog(@"Failed to validate program: %d", program);
                return;
            }
#endif
            glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, NULL);
        }
        else
        {
            glEnable(GL_LIGHTING);
            glEnable(GL_LIGHT0);
            glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuse);

            glEnableClientState(GL_VERTEX_ARRAY);
            glVertexPointer(3, GL_FLOAT, 12, NULL);
            glEnableClientState(GL_NORMAL_ARRAY);
            glNormalPointer(GL_FLOAT, 12, ((float *)NULL) + 6 * 4 * 3);

            glMatrixMode(GL_PROJECTION);
            glLoadMatrixf(projectionMatrix);

            glMatrixMode(GL_MODELVIEW);

            glLoadIdentity();
            glMultMatrixf(markerInfo[i].transform);
            glTranslatef(0, 0, -cubeScale);

            glDrawElements(GL_TRIANGLES, 36, GL_UNSIGNED_BYTE, NULL);
        }
        UIImage *img = [(EAGLView *)self.view snapshot: self.view];
        UIImageWriteToSavedPhotosAlbum(img, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);
        [stringOGL pause];

    }
} 
```

# django - Django-Haystack：如何将搜索限制为用户拥有的对象？

> ID：12155924
> 
> 赞同：1
> 
> 时间：2012-08-28T09:01:19.833
> 
> 标签：django, elasticsearch, django-haystack

我已经成功地让 django-haystack 与 elasticsearch 一起工作。在下面的示例中，我可以搜索任何销售项目，它会显示在结果中。

我创建了一个索引：

```
class SalesItemIndex(SearchIndex, Indexable):
    text = CharField(document=True, use_template=True)
    item_description = CharField(model_attr='item_description')

    def get_model(self):
        return SalesItem

    def index_queryset(self):
        """Used when the entire index for model is updated."""
        return self.get_model().objects.all() 
```

模型销售项目：

```
class SalesItem(models.Model):        
    item_description    = models.CharField(_(u"Item Description"), max_length=40)
    company             = models.ForeignKey(Company)
    def __unicode__(self):
        return self.item_description 
```

问题是，用户可以搜索所有的销售项目，甚至那些不属于他公司的。

通常，`salesitems = SalesItem.objects.all()`我宁愿使用它来确保用户只看到属于他公司的物品，而不是全部退回：

```
profile = request.user.get_profile() 
sales_items = profile.company.salesitem_set.all() 
```

我可以用这条规则限制我的搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:26:00.813

您也可以将公司 ID 编入索引`SalesItemIndex`：

```
class SalesItemIndex(SearchIndex, Indexable):
    ...
    company = IntegerField(model_attr='company_id') 
```

并直接过滤`SearchQuerySet`：

`sales_items = salesitem_set.filter(company=profile.company_id)`

# jquery - Jquery ajax，在触发功能之前等待图像加载

> ID：12155927
> 
> 赞同：4
> 
> 时间：2012-08-28T09:01:33.283
> 
> 标签：jquery, ajax, load, priority-queue

嗨，我有一个 jquery 内容动画，除了内容加载外，一切正常。

```
$(function() {
var newHash      = "",
    $mainContent = $("#main_content"),
    $pageWrap    = $(".big_col"),
    $main_menu = $("a.main_menu"),
    baseHeight   = 0,
    $el;

$pageWrap.height($pageWrap.height());
baseHeight = $pageWrap.height() - $mainContent.height();

$("body").delegate("a.main_menu", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
});

$(window).bind('hashchange', function(){

    newHash = window.location.hash.substring(1);

    if (newHash) {
        $mainContent
            .fadeOut(200, function() {
                $mainContent.hide(function() {
                    $(".loader").show();
                    var page = newHash.replace(/\..+$/, '');
                    var page = page.replace(/!/, '');
                    var data = 'page=' + page;
                    $.ajax({
                            url: "main_content/action.php", 
                            type: "POST",       
                            data: data + "&request=ajax",
                            cache: false,
                            success: function (html) {

                                    $mainContent.html(html);
                                        $("#main_content").ready(function() {
                                            //var loaded = 0;
                                            $(".loader").hide();
                                    _gaq.push(['_trackPageview', '/it_'+page]);
                                                    $mainContent.fadeIn(200, function() {
                                                    $pageWrap.animate({
                                                    height: baseHeight + $mainContent.height() + "px"
                                                    }, 300);
                                                });

                                        $main_menu.removeClass('current');
                                        $('a[href="#' + newHash + '"]').addClass('current');
                                        return false

                                        });
                                    //});

                              }
                        });

                    });

                });

    };

});

$(window).trigger('hashchange'); 
```

});

这是代码，我几乎尝试了我在堆栈溢出和其他站点上阅读的所有内容，但似乎没有任何效果（您在我粘贴的代码中看到的 .ready 只是我尝试的最后一件事）我尝试使用 .load，绑定加载, live load, img .lenght, .ready, 一切都选择图像或整个 div 但似乎仍然没有任何效果。

有什么建议么？谢谢

编辑的事情是，没有任何功能触发器，脚本工作得很好。如果我使用这些触发器中的任何一个（.ready 除外，但它没有做它应该做的事情），脚本会在那个触发器处停止（我隐藏加载器的地方）它不会再继续下去。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:19:19.483

好的，我整理出来了。问题是我认为 jquery 足够聪明，可以思考“好吧，这个伙伴有一个功能，可以在加载图像时拍摄。即使内容 div 中没有图像，OFC 也会继续”。不幸的是，它不是那样的，如果你写一个像这样的事件

```
$("#mydiv img").on('load', function(){
alert("images loaded");
}); 
```

**仅当**#mydiv 中有图像并且**图像**已加载时才会触发警报。如果#mydiv 只包含文本，该函数也不会被触发。我通过添加解决了

```
if ($("#main_content").find("img").length > 0) {
     $("#main_content img").on('load', function() { 
```

否则正常的ajax加载功能。

感谢您的回复

# c# - 列表中的asp.net树结构

> ID：12155929
> 
> 赞同：0
> 
> 时间：2012-08-28T09:01:38.613
> 
> 标签：c#, asp.net, treeview

我有“人”类型的对象。每个这样的对象都有一个名为 ManagerID 的属性。

在我的数据库中，数据是这样的：

> ID、名称、ManagerId

我需要在 asp.net 上用数据库数据构建一棵树。树应如下所示：

```
John
Lee
David
  William
  Ernest
    Johan
      Red
    George
    Gabriel
      Albert
      Don
        Gabi
  Marry
Helen
......etc 
```

人应该出现在经理下的树上，每个子级别都会增加增量。

现在我将人员加载到列表中：

```
List<People> lst = loadPeople(); 
```

如何转换树中的列表？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:54:16.223

按照以下链接

[http://www.codeproject.com/Articles/10997/Binding-Data-With-TreeView-Control-Asp-net-2-0](http://www.codeproject.com/Articles/10997/Binding-Data-With-TreeView-Control-Asp-net-2-0)

[http://www.codeproject.com/Articles/24534/How-to-load-data-from-database-to-TreeView](http://www.codeproject.com/Articles/24534/How-to-load-data-from-database-to-TreeView)

这个不错。 [从数据库填充 TreeView](https://stackoverflow.com/questions/361661/populate-treeview-from-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T10:34:21.780

您可以按 ManagerID 对列表进行排序，假设没有经理的人的 ManagerID = 0，因为重要的是首先添加“顶级”经理，然后从顶部开始添加并搜索父级，如果没有父母然后人是没有经理的“顶级”经理，并将其添加到树视图的根目录。

像这样的东西：

```
protected void Page_Load(object sender, EventArgs e)
{
  List<People> pplList = LoadPeople();

  foreach (People person in pplList.OrderBy(pp => pp.ManagerID))
  {
    IEnumerable<TreeNode> nodes = Extensions.GetItems<TreeNode>(TreeViewPeople.Nodes, item => item.ChildNodes);
    TreeNode parent = nodes.FirstOrDefault(nn => nn.Value.Equals(person.ManagerID.ToString()));         
    TreeNode newNode = new TreeNode(person.Name, person.ID.ToString());
    if (parent == null)
      TreeViewPeople.Nodes.Add(newNode);
    else
      parent.ChildNodes.Add(newNode);          
  }
} 
```

这是将返回所有树节点的 GetItems 方法，取自此处：[https ://stackoverflow.com/a/1815600/351383](https://stackoverflow.com/a/1815600/351383)

```
 public static class Extensions
  {
    public static IEnumerable<T> GetItems<T>(this IEnumerable collection, Func<T, IEnumerable> selector)
    {
      Stack<IEnumerable<T>> stack = new Stack<IEnumerable<T>>();
      stack.Push(collection.OfType<T>());

      while (stack.Count > 0)
      {
        IEnumerable<T> items = stack.Pop();
        foreach (var item in items)
        {
          yield return item;

          IEnumerable<T> children = selector(item).OfType<T>();
          stack.Push(children);
        }
      }
    }
  } 
```

# python - 如何关闭cherrypy服务器？

> ID：12155930
> 
> 赞同：8
> 
> 时间：2012-08-28T09:01:39.100
> 
> 标签：python, cherrypy

我在win7上，我开始了一个教程helloworld.py，一切都很好，但我不知道如何退出服务。我使用

```
quit() 
```

但命令行给我一条错误消息并退出。但服务仍在运行并占用我的 8080 端口。我还没有找到手动关闭它的方法。

```
 File "C:\python32\lib\site-packages\cherrypy\process\wspbus.py", line 197, in
publish
    output.append(listener(*args, **kwargs))
  File "C:\python32\lib\site-packages\cherrypy\_cpserver.py", line 151, in start

    ServerAdapter.start(self)
  File "C:\python32\lib\site-packages\cherrypy\process\servers.py", line 167, in
 start
    wait_for_free_port(*self.bind_addr)
  File "C:\python32\lib\site-packages\cherrypy\process\servers.py", line 410, in
 wait_for_free_port
    raise IOError("Port %r not free on %r" % (port, host))
IOError: Port 8080 not free on '0.0.0.0' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T09:07:59.450

根据[此页面](http://docs.python.org/library/constants.html#quit)，`quit()`不适合此任务。

根据您运行服务器的方式，您应该考虑使用[`cherrypy.engine.exit`](http://docs.cherrypy.org/stable/refman/process/wspbus.html#cherrypy.process.wspbus.Bus.exit)：

```
>>> help(cherrypy.engine.exit)
exit(self) method of cherrypy.process.win32.Win32Bus instance
    Stop all services and prepare to exit the process. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-23T00:49:54.417

将其包含在您的 python 文件中。

```
@cherrypy.expose

def shutdown(self):  
    cherrypy.engine.exit() 
```

然后在您的页面上添加一个链接。

```
<a id="shutdown"; href="./shutdown">Shutdown Server</a> 
```

# objective-c - 如何在 Objective C 中创建魔法方法

> ID：12155931
> 
> 赞同：0
> 
> 时间：2012-08-28T09:01:48.567
> 
> 标签：objective-c, core-data, magic-methods

我正在尝试`findByX`在通用`Model`类中开发一组魔术方法，最终将使用`NSPredicate`对象向 Core Data 发出查询：

*   `(id)findByName;`
*   `(id)findByCreated;`
*   `...`

根据[先前 SO question](https://stackoverflow.com/q/6939284/592454)的建议，我可以通过覆盖来拦截请求不存在方法的消息`resolveInstanceMethod`：

```
#include <objc/runtime.h>

+ (BOOL) resolveInstanceMethod:(SEL)aSel {
  if (aSel == @selector(resolveThisMethodDynamically)) {
    class_addMethod([self class], aSel, (IMP) dynamicMethodIMP, "v@:");
    return YES;
  }
  return [super resolveInstanceMethod:aSel];
}

void dynamicMethodIMP(id self, SEL _cmd) {
  NSLog(@"Voilà");
} 
```

但是，当我尝试使用`[myObject resolveThisMethodDynamically]`编译器时会引发以下错误：

```
"No visible @interface for 'MyModel' declares the selector 'resolveThisMethodDynamically'" 
```

这是有道理的，因为该方法没有任何声明。那么，我在这里缺少什么？有没有最佳实践来实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:08:45.047

我不确定它是否正是您所追求的，但这里有一些对这种核心数据功能有用的资源：

*   [Core Data 中的超级快乐轻松获取](http://www.cimgf.com/2011/03/13/super-happy-easy-fetching-in-core-data/)
*   [MagicalRecord的来源](https://github.com/magicalpanda/MagicalRecord)

MagicalRecord 是一个用于 Core Data 的小型框架，使其工作起来很像 Ruby 世界中的 ActiveRecord。特别是，我认为它实现了您所追求的许多获取功能。查看它添加到 NSManagedObject 的类别。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:50:50.027

这让我很好奇，所以我四处搜索，有很多选择。[这个线程](https://stackoverflow.com/questions/7702318/objective-c-dynamically-created-methods-and-compiler-warnings)总结了它们。就个人而言，我很赞同这样的论点，即如果您在运行时添加一个方法，您不应该在编译时选择选择器，而是在运行时也这样做。因此，使用 NSSelectorFromString 等，以及一些不同的预处理器指令来抑制这种情况下的警告。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-14T22:28:55.367

采用

```
objc_msgSend( myObject, sel_getUid("yourMethod"), param1, param2...); 
```

不要忘记导入'objc/message.h'

# matlab - 如何提高以下 Matlab 代码的执行时间

> ID：12155933
> 
> 赞同：2
> 
> 时间：2012-08-28T09:01:52.427
> 
> 标签：matlab

请帮助我改进以下 Matlab 代码以缩短执行时间。

实际上我想制作一个随机矩阵（大小`[8,12,10]`），并且在每一行上，只有 和 之间的整`1`数值`12`。我希望随机矩阵具有每列具有值 (1,2,3,4) 的元素的总和等于`2`。

下面的代码会让事情变得更清楚，但速度很慢。谁能给我一个建议？？

```
clc
clear all
jum_kel=8
jum_bag=12
uk_pop=10

for ii=1:uk_pop;    
    for a=1:jum_kel
        krom(a,:,ii)=randperm(jum_bag); %batasan tidak boleh satu kelompok melakukan lebih dari satu aktivitas dalam satu waktu
    end
end

for ii=1:uk_pop;  
gab1(:,:,ii) = sum(krom(:,:,ii)==1)
gab2(:,:,ii) = sum(krom(:,:,ii)==2)
gab3(:,:,ii) = sum(krom(:,:,ii)==3)
gab4(:,:,ii) = sum(krom(:,:,ii)==4)
end

for jj=1:uk_pop;
     gabh1(:,:,jj)=numel(find(gab1(:,:,jj)~=2& gab1(:,:,jj)~=0))
     gabh2(:,:,jj)=numel(find(gab2(:,:,jj)~=2& gab2(:,:,jj)~=0))
     gabh3(:,:,jj)=numel(find(gab3(:,:,jj)~=2& gab3(:,:,jj)~=0))
     gabh4(:,:,jj)=numel(find(gab4(:,:,jj)~=2& gab4(:,:,jj)~=0))
end

for ii=1:uk_pop;
    tot(:,:,ii)=gabh1(:,:,ii)+gabh2(:,:,ii)+gabh3(:,:,ii)+gabh4(:,:,ii)
end

for ii=1:uk_pop;
    while tot(:,:,ii)~=0;
          for a=1:jum_kel
              krom(a,:,ii)=randperm(jum_bag); %batasan tidak boleh satu kelompok melakukan lebih dari satu aktivitas dalam satu waktu
          end
          gabb1 = sum(krom(:,:,ii)==1)
          gabb2 = sum(krom(:,:,ii)==2)
          gabb3 = sum(krom(:,:,ii)==3)
          gabb4 = sum(krom(:,:,ii)==4)

          gabbh1=numel(find(gabb1~=2& gabb1~=0));
          gabbh2=numel(find(gabb2~=2& gabb2~=0));
          gabbh3=numel(find(gabb3~=2& gabb3~=0));
          gabbh4=numel(find(gabb4~=2& gabb4~=0));

          tot(:,:,ii)=gabbh1+gabbh2+gabbh3+gabbh4;
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:44:57.613

一些一般性建议：

*   **用英文**命名变量。如果不是很清楚，请给出简短的解释，它们是为了什么而缩进的。`jum_bag`例如什么？对我来说`uk_pop`是音乐风格。
*   **用英文**写评论，即使你只是为自己开发源代码。如果您不得不与外国人分享您的代码，您将花费大量时间解释或重新翻译。例如，我想知道是什么 `%batasan tidak boleh`意思。可能，您在这里描述这只是一个快速破解，但在投入生产之前，应该有人真的再次检查一下。

特定于您的代码：

*   它很容易`gab1`与`gabh1`or混淆`gabb1`。
*   对我来说，`krom`太类似于内置函数了`kron`。事实上，我首先认为您正在计算大量张量积。
*   `gab1 .. gab4`可能最好组合成一个数组或一个单元格，例如你可以使用

    ```
    gab = cell(1, 4);
    for ii = ...
        gab{1}(:,:,ii) = sum(krom(:,:,ii)==1);
        gab{2}(:,:,ii) = sum(krom(:,:,ii)==2);
        gab{3}(:,:,ii) = sum(krom(:,:,ii)==3);
        gab{4}(:,:,ii) = sum(krom(:,:,ii)==4);
    end 
    ```

    优点是您可以用另一个循环重新编写比较。它在计算`gabh1`时`gabb1`和`tot`以后也有帮助。

    如果您进一步引入一个变量，例如`highestNumberToCompare`，您只需进行一次更改，当您肯定发现检查元素是否也等于 5 和 6 很重要时。

*   在每个命令的末尾添加一个分号。输出过多很烦人，而且速度也很慢。

*   更好地`numel(find(gabb1 ~= 2 & gabb1 ~= 0))`表示为 `sum(gabb1(:) ~= 2 & gabb1(:) ~= 0)`。A`find`不是必需的，因为您不关心索引，而只关心索引的数量，它等于`true`'s 的数量。

*   当然还有：这段代码

    ```
    for ii=1:uk_pop
        gab1(:,:,ii) = sum(krom(:,:,ii)==1)
    end 
    ```

    真的**，真的很**慢。在每次迭代中，您都会增加`gab1` 数组的大小，这意味着您必须 i) 分配更多内存，ii) 复制旧矩阵和 iii) 写入新行。如果 在循环前面设置数组的大小，这会**快得多：**`gab1`

    ```
    gab1 = zeros(... final size ...);
    for ii=1:uk_pop
        gab1(:,:,ii) = sum(krom(:,:,ii)==1)
    end 
    ```

    或许，您还应该重新考虑`gab1`. 我不认为，您在这里需要一个 3D 数组，因为`sum()`已经减少了一维（如果`krom`是 3D，则输出`sum()`最多为 2D）。

    可能，您可以完全跳过循环并使用简单的`sum(krom==1, 3)`代替。但是，在每种情况下，您都应该真正了解结果的大小和形状。

**编辑灵感来自[罗迪奥尔登惠斯](https://stackoverflow.com/users/1085062/rody-oldenhuis)：**

正如罗迪指出的那样，您的代码的“问题”在于，您创建一个通过随机分配数字来满足您的约束的矩阵极不可能（尽管并非不可能）。下面的代码创建了一个`temp`具有以下特征的矩阵：

*   这些数字`1 .. maxNumber`要么每列出现两次，要么根本不出现。
*   所有行都是数字的随机排列`1 .. B`，其中`B`等于行的长度（即列数）。

最后，该`temp`矩阵用于填充一个名为 的 3D 数组`result`。我希望，您可以根据自己的需要进行调整。

```
clear all;
A = 8; B = 12; C = 10;
% The numbers [1 .. maxNumber] have to appear exactly twice in a
% column or not at all.
maxNumber = 4;
result = zeros(A, B, C);
for ii = 1 : C
    temp = zeros(A, B);
    for number = 1 : maxNumber
        forbiddenRows = zeros(1, A);
        forbiddenColumns = zeros(1, A/2);
        for count = 1 : A/2
            illegalIndices = true;
            while illegalIndices
                illegalIndices = false;
                % Draw a column which has not been used for this number.
                randomColumn = randi(B);
                while any(ismember(forbiddenColumns, randomColumn))
                    randomColumn = randi(B);
                end
                % Draw two rows which have not been used for this number.
                randomRows = randi(A, 1, 2);
                while randomRows(1) == randomRows(2)  ...
                      || any(ismember(forbiddenRows, randomRows))
                  randomRows = randi(A, 1, 2);
                end
                % Make sure not to overwrite previous non-zeros.
                if any(temp(randomRows, randomColumn))
                    illegalIndices = true;
                    continue;
                end
            end
            % Mark the rows and column as forbidden for this number.
            forbiddenColumns(count) = randomColumn;
            forbiddenRows((count - 1) * 2 + (1:2)) = randomRows;
            temp(randomRows, randomColumn) = number;
        end
    end

    % Now every row contains the numbers [1 .. maxNumber] by 
    % construction. Fill the zeros with a permutation of the
    % interval [maxNumber + 1 .. B].
    for count = 1 : A
        mask = temp(count, :) == 0;
        temp(count, mask) = maxNumber + randperm(B - maxNumber);
    end

    % Store this page.
    result(:,:,ii) = temp;
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T10:09:22.660

好的，下面的代码将显着改善时序。它还不完美，都可以进一步优化。

但是，在我这样做之前：我认为你想要的基本上是不可能的。

所以你要

*   所有行都包含数字 1 到 12，随机排列
*   1 到 4 之间的任何值必须在任何列中出现两次或根本不出现

我有一种预感，这是**不可能**的（这就是你的代码*永远不会*完成的原因），但让我再考虑一下。

无论如何，我的 5 分钟显而易见的改进版本：

```
clc
clear all

jum_kel  =  8;
jum_bag  =  12;
uk_pop   =  10;

A = jum_kel; % renamed to make language independent 
B = jum_bag; % and a lot shorter for readability
C = uk_pop;

krom = zeros(A, B, C);
for ii = 1:C;
    for a = 1:A
        krom(a,:,ii) = randperm(B);
    end
end

gab1  = sum(krom == 1);
gab2  = sum(krom == 2);
gab3  = sum(krom == 3);
gab4  = sum(krom == 4);

gabh1 = sum( gab1 ~= 2 & gab1 ~= 0 );
gabh2 = sum( gab2 ~= 2 & gab2 ~= 0 );
gabh3 = sum( gab3 ~= 2 & gab3 ~= 0 );
gabh4 = sum( gab4 ~= 2 & gab4 ~= 0 );

tot   = gabh1+gabh2+gabh3+gabh4;

for ii = 1:C
    ii
    while tot(:,:,ii) ~= 0

        for a = 1:A
            krom(a,:,ii) = randperm(B);
        end

        gabb1  =  sum(krom(:,:,ii) == 1);
        gabb2  =  sum(krom(:,:,ii) == 2);
        gabb3  =  sum(krom(:,:,ii) == 3);
        gabb4  =  sum(krom(:,:,ii) == 4);

        gabbh1 = sum(gabb1 ~= 2 & gabb1 ~= 0)
        gabbh2 = sum(gabb2 ~= 2 & gabb2 ~= 0);
        gabbh3 = sum(gabb3 ~= 2 & gabb3 ~= 0);
        gabbh4 = sum(gabb4 ~= 2 & gabb4 ~= 0);

        tot(:,:,ii) = gabbh1+gabbh2+gabbh3+gabbh4;

    end
end 
```

# javascript - 表单的服务器端验证

> ID：12155949
> 
> 赞同：13
> 
> 时间：2012-08-28T09:02:37.930
> 
> 标签：javascript, angularjs

我拥有的表单的默认验证按预期工作。但是，当用户输入有效的电子邮件地址和最少三个字符的密码时，这并不意味着登录凭据有效。

所以我的问题是：

> 如何在**服务器端验证后将模型***电子邮件*和*密码*设置为无效 ，以便输入字段获取类 ng-invalid 而不是 ng-valid。

 ****我当前的代码**

```
function IndexCtrl( $scope, $http )
{
  $scope.form = {};
  $scope.submitLogin = function ()
  {
    $http.post( '/api/auth/login', $scope.form ).success( function( data )
    {
      if ( !data.success )
      {
        $scope.form.errors = [ data ];

        // here I also want to mark the models 'email' and 'password' as invalid, so they both get the class 'ng-invalid'
      }
      else
      {
        $location.path( '/' );
      }
    });
  };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T09:24:25.807

[Tosh shimayama](https://stackoverflow.com/users/1238847/tosh-shimayama)给出了正确的答案。**$setValidity**是一个来自 的方法，它`NgModelController`接受两个参数：`validationErrorKey`和`isValid`。

有关**$setValidity的更多信息**

> 更改有效性状态，并在控件更改有效性时通知表单。（即，如果给定的验证器已被标记为无效，它不会通知表单）。

AngularJS的来源和更多信息[：NgModelController](http://docs.angularjs.org/api/ng.directive:ngModel.NgModelController)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T22:41:46.910

客户端验证很快，但很容易破坏，例如使用 - firebug。您只能坚持使用服务器端验证。验证服务器上的所有内容并返回带有键列表和错误消息的 BODY。Angular 允许您将数据异步发送到服务器，最终用户会将其视为客户端验证，因为没有可见的回发。

查看此示例，尝试单击“保存”，并查看错误消息：[upida.cloudapp.net :8080/org.upida.example.angular/order/create?clientId=1](http://upida.cloudapp.net:8080/org.upida.example.angular/order/create?clientId=1)

你可以下载它： [upida.codeplex.com](https://upida.codeplex.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T20:28:52.457

这是一个很好的验证指令，可能有用[https://groups.google.com/forum/#!msg/angular/6v-AillQboI/D0OaZzV7Me0J](https://groups.google.com/forum/#!msg/angular/6v-AillQboI/D0OaZzV7Me0J)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T15:21:55.970

我做了一些事情，但它的轨道是特定的，也许它可以给某人一个想法，或者朝着正确的方向推进 [https://github.com/fmatosic/bubblemevalid](https://github.com/fmatosic/bubblemevalid)**

# svn - 如何确保我的 SVN 存储库没有损坏

> ID：12155951
> 
> 赞同：1
> 
> 时间：2012-08-28T09:02:37.680
> 
> 标签：svn

我在一家小商店工作，目前我是唯一一个正在开发中的人（这意味着一切，从设置 SVN 和 JBoss 服务器到进行实际编程），除了其他事情。

这导致我是唯一一个使用 SVN 存储库的人，而且通常只是写（有时我需要做一个差异或将一些更改恢复到上一个​​版本）。

我已经在我们的主备份中包含了 SVN 存储库的备份，但我担心 SVN 可能会损坏并且在我尝试检查一个项目之前没有意识到它（即使有备份，从磁带恢复你的工作几个几个月大将意味着大量工作丢失）。

我可以假设，只要我提交到 SVN 没有问题，存储库就可以了吗？否则，我可以做一些操作（如果可以自动化更好）来定期检查它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:41:46.647

> svnadmin 验证 REPOS_PATH

此命令验证存储在存储库中的数据。它应该在存储 SVN 存储库的服务器上执行。

# javascript -   在拉斐尔 JS

> ID：12155954
> 
> 赞同：5
> 
> 时间：2012-08-28T09:02:47.663
> 
> 标签：javascript, raphael

我需要做类似的事情：

```
paper.text(Left, Top, " " + this._p.Label + ":");
paper.text(Left, Top, "&nbsp;" + this._p.Label + ":"); 
```

但是前面的空格不会像`&nbsp;`文本一样显示或显示。

我试过了：

```
label.attr({"xml:space": "preserve"}); 
```

...没有效果。

无论如何可以访问 Raphael JS 中的 SVG 节点，以便我可以设置

```
setAttributeNS("http://www.w3.org/XML/1998/namespace","space","preserve"); 
```

（或者有没有其他方法可以解决这个问题？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T17:58:33.303

是的，您绝对可以将该命名空间属性直接应用于由 Raphael 管理的 SVG 元素。就是这么简单：

```
paper.canvas.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space","preserve"); 
```

[在这里](http://voidblossom.com/testTextSpacing.php)证明是功能性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T10:51:47.583

尽管这似乎在某种程度上^([1])解决了，但我遇到了关于同一问题的[讨论](https://groups.google.com/forum/#!topic/raphaeljs/l_qCMRJIw50)，它建议用`\u00a0`. 这可以通过使用字符串函数轻松实现`.replace(/ /g,'\u00a0')`。

* * *

**¹**给定链接中文本节点的前导空格不适用于 Mac Safari v.6.0.5。我不确定它在其他浏览器和操作系统中的外观。

# delphi - 在Delphi中识别计算机的子网掩码

> ID：12155960
> 
> 赞同：2
> 
> 时间：2012-08-28T09:03:10.877
> 
> 标签：delphi, mask, subnet, identify

我正在寻找一种能够在 Delphi 中在运行时检索我当前正在运行的计算机的 IP 子网掩码的方法。

代码中有没有办法让我检索子网掩码并存储它，以便我可以在其他操作中使用它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T14:57:08.573

您可以使用[Win32_NetworkAdapterConfiguration](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx) WMI 类和`IPSubnet`属性。

试试这个示例代码

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

function VarArrayToStr(const vArray: variant): string;

    function _VarToStr(const V: variant): string;
    var
    Vt: integer;
    begin
    Vt := VarType(V);
        case Vt of
          varSmallint,
          varInteger  : Result := IntToStr(integer(V));
          varSingle,
          varDouble,
          varCurrency : Result := FloatToStr(Double(V));
          varDate     : Result := VarToStr(V);
          varOleStr   : Result := WideString(V);
          varBoolean  : Result := VarToStr(V);
          varVariant  : Result := VarToStr(Variant(V));
          varByte     : Result := char(byte(V));
          varString   : Result := String(V);
          varArray    : Result := VarArrayToStr(Variant(V));
        end;
    end;

var
i : integer;
begin
    Result := '[';
     if (VarType(vArray) and VarArray)=0 then
       Result := _VarToStr(vArray)
    else
    for i := VarArrayLowBound(vArray, 1) to VarArrayHighBound(vArray, 1) do
     if i=VarArrayLowBound(vArray, 1)  then
      Result := Result+_VarToStr(vArray[i])
     else
      Result := Result+'|'+_VarToStr(vArray[i]);

    Result:=Result+']';
end;

procedure  GetWin32_NetworkAdapterConfigurationInfo;
const
  WbemUser            ='';
  WbemPassword        ='';
  WbemComputer        ='localhost';
  wbemFlagForwardOnly = $00000020;
var
  FSWbemLocator : OLEVariant;
  FWMIService   : OLEVariant;
  FWbemObjectSet: OLEVariant;
  FWbemObject   : OLEVariant;
  oEnum         : IEnumvariant;
  iValue        : LongWord;
begin;
  FSWbemLocator := CreateOleObject('WbemScripting.SWbemLocator');
  FWMIService   := FSWbemLocator.ConnectServer(WbemComputer, 'root\CIMV2', WbemUser, WbemPassword);
  FWbemObjectSet:= FWMIService.ExecQuery('SELECT * FROM Win32_NetworkAdapterConfiguration Where IpEnabled=True','WQL',wbemFlagForwardOnly);
  oEnum         := IUnknown(FWbemObjectSet._NewEnum) as IEnumVariant;
  while oEnum.Next(1, FWbemObject, iValue) = 0 do
  begin
    Writeln(Format('Caption       %s',[String(FWbemObject.Caption)]));// String
    if not VarIsNull(FWbemObject.DHCPServer) then
      Writeln(Format('DHCPServer    %s',[String(FWbemObject.DHCPServer)]));// String
    if not VarIsNull(FWbemObject.IPAddress) then
      Writeln(Format('IPAddress     %s',[VarArrayToStr(FWbemObject.IPAddress)]));// array String

    if not VarIsNull(FWbemObject.IPSubnet) then
      Writeln(Format('IPSubnet      %s',[VarArrayToStr(FWbemObject.IPSubnet)]));// array String

    if not VarIsNull(FWbemObject.MACAddress) then
      Writeln(Format('MACAddress     %s',[VarArrayToStr(FWbemObject.MACAddress)]));// array String

    Writeln;
    FWbemObject:=Unassigned;
  end;
end;

begin
 try
    CoInitialize(nil);
    try
      GetWin32_NetworkAdapterConfigurationInfo;
    finally
      CoUninitialize;
    end;
 except
    on E:EOleException do
        Writeln(Format('EOleException %s %x', [E.Message,E.ErrorCode]));
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T12:01:49.857

1) 计算机可能属于不同的网络/子网。每个网络适配器通常都有一些。有时甚至不止一个。

2）即使物理上你只有一张网卡，你也有*环回*网络 - 127.xxx 子网。如果您安装了一些 VPN，例如 Hamachi 或 Comodo - 这将提供一个网络适配器。连接时与电话调制解调器相同。对于 XP 兼容模式等虚拟机也是如此。因此，无论如何您都必须根据某些标准对其进行过滤。

3) 你可以通过WMI的FindAdaptor功能来获取网卡：[http://www.magsys.co.uk/delphi/magwmi.asp](http://www.magsys.co.uk/delphi/magwmi.asp) 然后你可以读取这些适配器的属性。还提到了设置IP的功能，可能还有读取它们的功能。

即使没有，如何读取属性也显示在 URL 的演示中。要读取哪些属性，您可以使用任何 WMI 资源管理器来确定。我个人以 ks-soft.net 的 WMI Explorer 和 Microsoft 的 WMI Tools 结束。您可以像使用 SQLite 一样调试 WMI 请求，然后将其传递给 WMI 包装器并读取结果。然而，回到前面提到的设置 IP 地址函数，它们的源可能已经包含属性名称，只是为了节省探索。

# cakephp - 如何查找与当前票号系统不匹配的蛋糕票的历史信息？

> ID：12155972
> 
> 赞同：0
> 
> 时间：2012-08-28T09:03:47.320
> 
> 标签：cakephp, issue-tracking

这个问题针对丢失的旧 trac 存储库所关注的每个 cakephp 用户。

2008 年产生的票号已在 2011 年重新用于新的票号系统，用于完全不同的票。

旧存储库在某处可用吗？

*   [https://trac.cakephp.org/](https://trac.cakephp.org/)不再可用。
*   [http://cakephp.lighthouseapp.com/](http://cakephp.lighthouseapp.com/)票号与旧存储库的票号不匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:45:28.140

一些票，但可能不是全部，可以通过[Internet Archive](http://archive.org/web/web.php)获得，例如：[http ://web.archive.org/web/20070703220054/https://trac.cakephp.org/report](http://web.archive.org/web/20070703220054/https://trac.cakephp.org/report)

# java - java.util.concurrent.ExecutionException：java.lang.OutOfMemoryError：Java 堆空间

> ID：12155973
> 
> 赞同：1
> 
> 时间：2012-08-28T09:03:52.380
> 
> 标签：java, eclipse, tomcat

我在部署到 Tomcat 7 的 Eclipse Indigo 中创建了一个示例 JSF/JDBC 项目。当我输入`mysql-connector-java-5.1.21.jar`时`/WEB-INF/lib`，出现以下错误：

来自 Eclipse 的一个：

> Server Tomcat v7.0 Server at localhost (8) 无法在 120 秒内启动。如果服务器需要更多时间，请尝试在服务器编辑器中增加超时。

另一个来自 Tomcat：

```
SEVERE: Error waiting for multi-thread deployment of context descriptors to complete
java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError: Java heap space
at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
at java.util.concurrent.FutureTask.get(FutureTask.java:83)
at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:574)
at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470)
at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1413) 
```

它们是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T09:07:36.043

正如错误所说，您的堆空间不足。尝试通过在启动 tomcat 时提供以下 JVM 参数来提供更多堆：

```
java -Xmx1024m 
```

实际的“正确”数量取决于您的硬件设置和应用程序的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T13:11:25.497

Tomcat 是内存不足的进程，而不是 Eclipse。从您的服务器视图中打开 Tomcat 实例并编辑其启动配置。在 Arguments 选项卡中，为其设置更大的最大堆大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:09:56.650

停止 Tomcat v7.0 服务器并再次运行它。你可以尝试改变java堆大小

将 eclipse-home/eclipse.ini 编辑为如下所示并重新启动 Eclipse。-vmargs -Xms256m -Xmx1024m

# oracle - Oracle：必须定义 DatePart...？

> ID：12155974
> 
> 赞同：-1
> 
> 时间：2012-08-28T09:04:13.713
> 
> 标签：oracle

关于为什么以下行抱怨 DATEPART 未定义为标识符的任何想法？

`IF DATEPART(v_ExpireTime, year) = 1899 THEN v_ExpireTime := NULL;`

它返回： `Error(68,10): PLS-00201: identifier 'DATEPART' must be declared`

编辑：没关系，我找到了答案。我现在这样做：

`IF to_number(to_char(v_ExpireTime, 'YY')) = 1899 THEN v_ExpireTime := NULL;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T09:21:21.567

正如您已经发现的那样，`DATEPART`它是一个 SQL Server 函数，而不是 Oracle 函数。您显示的替代方案`to_number(to_char(v_ExpireTime, 'YY'))`, 会给您一个两位数的值，所以如果您的日期的年份部分是`1899`它只会返回`99`，所以您不会得到匹配。您可以使用四位数年份日期格式模型`YYYY`代替`YY`.

另一种选择是使用[提取功能](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions059.htm)：

```
IF extract(year from v_ExpireTime) = 1899 THEN ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T09:17:09.217

如果我是正确的，那是因为 DatePart 不是 PLSQL 库的一部分，所以它不知道你在做什么。第二种方法适用于 PLSQL。

# php - 选择 1 列可以匹配多列

> ID：12155977
> 
> 赞同：-3
> 
> 时间：2012-08-28T09:04:17.060
> 
> 标签：php, mysql, sql, mysqli

我在数据库中有 1 个表（tblcsv），其数据如下：

```
fieldA  fiel B
aaaa    1

aaaa    2

aaaa    4

a       1

aaaa    2

a       3

bbbb    4

b       3

bbbb    4

b       3 
```

**我需要显示的内容：**

```
aaaa        1
            2
            4
            2
a           1
            3
bbbb        4
            4
b           3
            3 
```

我真的不知道如何编写 mysql 以从数据库中查询它以显示我需要的内容。请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:12:39.800

```
 SELECT fieldA, fieldB 
  FROM tblcsv 
  order by feildA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:10:36.140

```
select fieldA , fiel B from table 
order by fieldA ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:58:04.083

我认为你需要**[GROUP_CONCAT](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)**

```
SELECT fieldA, GROUP_CONCAT(fieldB) 
FROM    tblcsv 
```

# configuration - 无法调用 mod_roster_odbc 函数

> ID：12155980
> 
> 赞同：1
> 
> 时间：2012-08-28T09:04:38.730
> 
> 标签：configuration, erlang, xmpp, ejabberd, rostering

我尝试通过集成来使用我自己的自定义名册`mod_roster_odbc`。我也更改了配置文件（注释掉`mod_roster`并为 新建一个条目`mod_roster_odbc`）。使用此设置运行后，`mod_roster_odbc`模块开始启动（我在启动功能中放入了一些日志，我可以看到这些日志）。但是当我改变存在或注销/登录时，没有其他功能没有被调用。

请帮助确定我在哪里犯了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T14:36:55.987

我想我知道这个问题的答案。许多网站告诉您使用`mod_roster_odbc.erl`来创建自己的排班。我相信那是你的问题。许多功能都合并到`mod_roster.erl`文件本身中。我认为这在任何地方都没有提到。

所以你需要做的是`ejabberd.cfg`启用但不要用文件`mod_roster_odbc`删除文件。这个文件会小心的。`mod_roster.erl``odbc`

最后，您需要创建一个`rosterusers`表（或类似的表），以便 ejabber 可以查询好友列表。在这些更改之后，只需重新启动 ejabber 服务器就可以了。希望这可以帮助。

# mysql - Mysql：不能使用子查询字段作为条件？

> ID：12155985
> 
> 赞同：0
> 
> 时间：2012-08-28T09:04:50.080
> 
> 标签：mysql

这段代码运行良好。请特别注意“AS Commercial”子查询字段。有用。

```
选择`联系人`。`id`，
    (
        选择`team_members`.`id`
        FROM team_members
        内部加入 team_categories_team_members 作为 memcat
            ON `team_members`.`id` = `memcat`.`team_member_id`
        WHERE `memcat`.`team_category_id` =3
    ) 作为商业
    FROM `oys001`.`team_members` AS `Contacts`
    加入`oys001`.`brands_team_members` AS `BrandsTeamMember` ON (
        `BrandsTeamMember`.`brand_id` =2
        AND `BrandsTeamMember`.`team_member_id` = `Contacts`.`id`）

```

但是，现在我想对它执行一个条件，所以我只添加了这个：

```
WHERE 商业 > 0

```

它告诉我该字段不存在......这里出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:07:04.440

将您的初始查询括在括号中

```
 SELECT * 
 FROM (yourqueryhere) AS `v`
 WHERE commercial > 0 
```

# java - 增强的 for 循环性能

> ID：12155987
> 
> 赞同：5
> 
> 时间：2012-08-28T09:05:01.153
> 
> 标签：java, performance, for-loop

为此，我和朋友发生了争执。考虑下面的片段，

```
for(i=0; i<someList.size(); i++) {
    //some logic
    } 
```

每次迭代都会执行这里`someList.size()`，因此建议将此大小计算迁移到循环外部（之前）。

现在，当我使用这样的扩展 for 循环时会发生什么，

```
for(SpecialBean bean: someBean.getSpecialList()) {
//some logic
} 
```

是否有必要移到`someBean.getSpecialList()`循环外？`someBean.getSpecialList()`如果我要保留第二个片段，将执行多少次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:11:42.003

重复调用`list.size()`不会导致任何性能损失。JIT 编译器很可能会内联它，即使它没有内联，它仍然会非常便宜，因为它只涉及读取字段的值。

您的第一个示例的一个更严重的问题是循环体必须涉及`list.get(i)`，并且对于 a `LinkedList`，访问第*i*个元素具有 O( *i* ) 成本，并且由于指针追逐而具有相当显着的常数因子，这转化为数据依赖在 CPU 级别上加载。CPU 的预取器无法优化这种访问模式。

这意味着当应用于 a 时，整体计算复杂度将为 O(n ²`LinkedList` ) 。

您的第二个示例通过编译为迭代，`Iterator`并且只会评估`someBean.getSpecialList().iterator()`一次。在所有情况下，成本`iterator.next()`都是恒定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T09:10:12.077

**来自 Joshua Bloch 在 Effective Java 中的第 46 条：**

> 在 1.5 版中引入的 for-each 循环通过完全隐藏迭代器或索引变量来消除混乱和出错的机会。由此产生的习语同样适用于集合和数组：
> 
> // 迭代集合和数组的首选习惯用法 for (Element e : elements) { doSomething(e); } 当您看到冒号 (:) 时，将其读作“in”。因此，上面的循环读作“对于元素中的每个元素 e”。请注意，使用 for-each 循环没有性能损失，即使是数组也是如此。事实上，在某些情况下，它可能比普通的 for 循环提供轻微的性能优势，因为它只计算一次数组索引的限制。虽然您可以手动完成（第 45 条），但程序员并不总是这样做。

另请参阅[is-there-a-performance-difference-between-a-for-loop-and-a-for-each-loop](https://stackoverflow.com/questions/256859/is-there-a-performance-difference-between-a-for-loop-and-a-for-each-loop)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:09:59.713

第一个片段的替代方案是：

```
for(i=0, l=someList.size(); i<l; i++) {
    //some logic
} 
```

对于 for..each 循环，`getSpecialList()`只调用一次（您可以通过在方法中添加一些调试/日志记录来验证这一点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:11:34.010

`someBean.getSpecialList()`由于扩展循环使用从 Iterable 中获取的 Iterator，因此执行多次是不可能或不明智的。将其移出循环不会改变循环的性能，但如果它提高了可读性，您可以这样做。

注意：如果您按索引进行迭代，则对于随机访问集合（例如 ArrayList）可能会更快，因为它不创建迭代器，但对于不支持随机访问的索引集合则较慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T09:07:37.223

`for each`变化将与以下相同

```
for (Iterator i = c.iterator(); i.hasNext(); ) {
doSomething((Element) i.next()); 
} 
```

来自**第 46**条：Effective java 的for-each 循环优于传统的 for 循环

> 与传统的 for 循环相比，for-each 循环在清晰度和错误预防方面提供了引人注目的优势，并且没有性能损失。你应该尽可能地使用它。

`for each`所以我的第一个猜测是错误的，在循环内使用函数没有惩罚。

# apache - 使用多个重写规则？

> ID：12155991
> 
> 赞同：15
> 
> 时间：2012-08-28T09:05:26.327
> 
> 标签：apache, .htaccess, mod-rewrite

我有一个简单的 .htaccess 文件，其内容如下。

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^(.*)$ index.php?s=$1 [L]
</IfModule> 
```

我想添加这个规则。

```
RewriteRule ^p$ index.php?p= 
```

我尝试在下面这样做，但它不起作用。似乎两条规则都在运行。我尝试了几个不同的标志，但再次没有运气。有人可以告诉我如何让这个工作。

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^p$ index.php?p= 
     RewriteRule ^(.*)$ index.php?s=$1 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-28T09:07:43.310

您必须添加`[L]`标志以在一场比赛时停止阅读规则：

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d

     RewriteRule ^p$ index.php?p= [L]
     RewriteRule ^(.*)$ index.php?s=$1 [L]
</IfModule> 
```

`RewriteRule`国旗提醒：

*   L = 最后。一旦这个匹配，停止处理 RewriteRules。订单数！
*   C = 链条。继续处理下一个 RewriteRule。如果此规则不匹配，则不会执行下一条规则。稍后再谈。
*   E = 设置环境变量。Apache 有各种可以影响 Web 服务器行为的环境变量。
*   F = 禁止。如果此规则匹配，则返回 403-Forbidden 错误。
*   G = 消失了。如果此规则匹配，则返回 410-Gone 错误。
*   H = 处理程序。强制处理请​​求，就好像它是指定的 MIME 类型一样。
*   N = 下一个。强制规则重新开始并重新匹配。当心！可能会导致循环。
*   NC = 没有情况。允许 [jpg] 匹配 jpg 和 JPG。
*   NE = 无法逃脱。防止将特殊字符 (. ? # & 等) 重写为其十六进制代码等效项。
*   NS = 无子请求。如果您使用服务器端包含，这将阻止匹配包含的文件。
*   P = 代理。强制规则由 mod_proxy 处理。透明地提供来自其他服务器的内容，因为您的网络服务器会获取并重新提供它。这是一个危险的标志，因为一个写得不好的标志会把你的网络服务器变成一个开放代理，这很糟糕。
*   PT = 通过。考虑 RewriteRule 匹配中的 Alias 语句。
*   QSA = QSAppend。当原始字符串包含查询 ( [http://example.com/thing?asp=foo](http://example.com/thing?asp=foo) ) 时，将原始查询字符串附加到重写的字符串。通常它会被丢弃。对动态内容很重要。
*   R = 重定向。提供到指定 URL 的 HTTP 重定向。还可以提供准确的重定向代码 [R=303]。与 RedirectMatch 非常相似，后者更快，应尽可能使用。
*   S = 跳过。跳过这条规则。
*   T = 类型。指定返回内容的 MIME 类型。非常类似于 AddType 指令。

**摘自这篇（非常）完整的帖子：** [https ://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as](https://serverfault.com/questions/214512/everything-you-ever-wanted-to-know-about-mod-rewrite-rules-but-were-afraid-to-as)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-28T09:17:15.757

您应该首先知道重写条件仅影响以下重写规则，并且您在重写条件和重写规则之间添加了新规则，这意味着它们现在只会影响您的新规则而不是旧规则（您在您的代码是仅在目标 url 不是文件或目录时才执行重写规则），因此如果您希望旧规则仍然受到重写条件的影响，则必须在重写之前添加新规则条件。

对于您的问题，我认为 zessx 已经回答了足够的问题（通过添加`[L]`标志来解决）。

最后你应该有这样的东西：

```
<IfModule mod_rewrite.c>
     RewriteEngine on

     RewriteRule ^p$ index.php?p= [L]

     RewriteCond %{REQUEST_FILENAME} !-f
     RewriteCond %{REQUEST_FILENAME} !-d
     RewriteRule ^(.*)$ index.php?s=$1 [L]
</IfModule> 
```

# c# - 我可以在 NHibernate 中重新附加一个集合吗？

> ID：12155992
> 
> 赞同：2
> 
> 时间：2012-08-28T09:05:30.653
> 
> 标签：c#, nhibernate, lazy-initialization

我有一些对象，其中一些具有文档列表，其他对象，......等等。我不想`lazy=false`在关系上使用，因为它使应用程序非常慢。我可以使用 Lock 重新附加对象，以便在需要时加载其他属性或一对多关系。但是对于集合，如果我尝试访问它们，我总是会得到“无法初始化集合”。`Lock(obj)`如果我调用连接到该位置的对象，它将不起作用。

我希望我的映射看起来像这样：

```
<set name="DocumentList" table="material_document" cascade="all" lazy="true">
  <key column="material_id"/>
  <many-to-many class="Document">
    <column name="document_id"/>
  </many-to-many>
</set> 
```

有没有办法重新连接？还是有映射设置？

**更新1：**

这是物质方面的映射：

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
<class name="Material" table="material">
<!-- Defining PK -->
<id name="Id" type="integer" column="id">
    <generator class="sequence">
      <param name="sequence">material_id_seq</param>
    </generator>
</id>
<!-- Defining Properties -->
<!-- Defining FK-Relations -->
<set name="DocumentList" table="material_document" cascade="all" lazy="false">
  <key column="material_id"/>
  <many-to-many class="Document">
    <column name="document_id"/>
  </many-to-many>
</set> 
```

文档映射文件没有关于关系的任何信息。数据库名称没问题，其他一切正常。这些表称为`material`和。我的课程是和属性。我的实体有什么问题？您的意思是数据有问题还是程序中的对象可能发生了某些事情......？`material_document``document``public``public virtual`

```
List material = LoadAllMaterials();
//some code, that causes the session to be closed, a new session will be opened
foreach (Document d in material.DocumentList) { //causes the exception
    //do something
} 
```

在此之前，我想获取文档，而不是事先加载它们。

**更新 2：** 我目前如何重新附加对象：当我知道有代理并且它不能以另一种方式工作时，我将 force true 设置为……而且我必须检查它是否在会话中，因为如果我调用它，evict 会抛出一个异常在不在会话中的对象上。

```
public void Reattach(Type type, BaseObject o, bool force)
{
    bool inSession = o.IsInSession();

    if (force && inSession)
    {
        GetSession().Evict(o);
        GetSession().Lock(type.ToString(), o, LockMode.None);
    }
    else {

        o = (BaseObject)GetSession().GetSessionImplementation().PersistenceContext.Unproxy(o);

        if (!inSession) {

            GetSession().Lock(type.ToString(), o, LockMode.None);
        }
    }
} 
```

这是我的 IsInSession() 方法：

```
public virtual bool IsInSession() {

    ISession session = HibernateSessionManager.Instance.GetSession();

    var pers = session.GetSessionImplementation()
          .GetEntityPersister(GetType().ToString(), this);

    NHibernate.Engine.EntityKey key = new NHibernate.Engine.EntityKey(Id,
        pers, EntityMode.Poco);

    bool isInSession = false;

    try
    {
        object entity = session.GetSessionImplementation().PersistenceContext.GetEntity(key);

        if (entity != null)
        {
            isInSession = true;
        }
    }
    catch (NonUniqueObjectException) {}

    return isInSession;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:22:41.503

我确实看到您的其中一个映射中有lazy="false" ... NHibernate 默认使用延迟加载，因此我将从您的映射中删除所有lazy="false" 和lazy="true" 语句，然后继续使用 NHibernate 默认值。

我创建了以下 NUnit 测试并且两个测试都通过了，所以我无法复制你的问题，这意味着它要么是你的 lazy="false" 映射的东西，要么是其他一些问题......如果没有完整的诊断这些问题总是很困难应用在你面前...

使用以下测试用例，我能够创建以下错误：“正在初始化 [SampleApplication.Customer#19]-未能延迟初始化角色集合：SampleApplication.Customer.Addresses，没有会话或会话已关闭”

```
[Test]
public void Testing_A_Detached_Entity()
{
    // Arrange
    var sessionFactory = ObjectFactory.GetInstance<ISessionFactory>();

    Customer customer = null;

    using ( ISession session = sessionFactory.OpenSession() )
    {
        using ( ITransaction tx = session.BeginTransaction() )
        {
            customer = session.Query<Customer>()
                .Where( x => x.CustomerNbr == 19 )
                .FirstOrDefault();
        }
    }

    // Act
    TestDelegate actionToPerform = () =>
       {
           // Looping over this child collection should throw an Exception
           // because we no longer have an active NHibernate session
           foreach ( var address in customer.Addresses )
           {

           }
       };

    // Assert
    Assert.Throws<NHibernate.LazyInitializationException>( actionToPerform );
} 
```

使用以下测试用例并使用 NHibernate 的 session.Lock() 方法，我能够成功地重新附加分离的对象并获得我的子集合的计数。

```
[Test]
public void Testing_Reattaching_A_Detached_Entity()
{
    // Arrange
    var sessionFactory = ObjectFactory.GetInstance<ISessionFactory>();

    Customer customer = null;

    using ( ISession session = sessionFactory.OpenSession() )
    {
        using ( ITransaction tx = session.BeginTransaction() )
        {
            customer = session.Query<Customer>()
                .Where( x => x.CustomerNbr == 19 )
                .FirstOrDefault();
        }
    }

    // Act
    ISession newSession = sessionFactory.OpenSession();

    newSession.Lock( customer, LockMode.None );

    // Assert
    Assert.That( customer.Addresses.Count > 0 );
} 
```

# javascript - 保存输入字段 Chrome 扩展

> ID：12155993
> 
> 赞同：2
> 
> 时间：2012-08-28T09:05:31.997
> 
> 标签：javascript, google-chrome-extension

我需要创建一个有两个按钮的扩展：复制和粘贴。复制按钮将选择页面上的文本输入和文本区域的内容并将其保存在存储模块中。粘贴按钮会将保存的文本粘贴到具有相同 id 的输入和文本区域内的另一个页面上。

我设法使用本地 sotrage 使它工作，但它只将内容保存在同一个域中。我尝试使用 chrome.storage 模块来存储和检索数据；我无法让它发挥作用。

你能告诉我解决这个问题的最佳方法是什么吗？

**更新：** 扩展有效，但有一点不便：

```
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {      
        storage.get('form_data', function(item) {
            sendResponse(item);
        });   
    }
}); 
```

这将返回一个错误：*无法发送响应：如果您想在侦听器返回后发送响应，则 chrome.extension.onMessage 侦听器必须返回 true。*

```
var form_data;
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {      
        storage.get('form_data', function(item) {
            form_data = item;
        });   
        sendResponse(form_data);
    }
}); 
```

这可行，但我必须调用该函数两次（单击粘贴按钮），我猜第一个返回未定义并随后获取数据，第二个调用返回存储值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-14T16:06:57.110

我用以下代码解决了这个问题：

```
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) {
    if (request['request_type'] === 'copy') {
      storage.clear();
      storage.set({'form_data' : request['form_data']});
    } else if (request['request_type'] === 'paste') {
        storage.get('form_data', function(item) {
          chrome.tabs.getSelected(null, function(tab) {
            chrome.tabs.sendMessage(tab.id, item['form_data']);
          });
        });
      }
}); 
```

# java - 如何在 android 媒体播放器中从当前位置（停止位置）播放有声读物？

> ID：12155996
> 
> 赞同：0
> 
> 时间：2012-08-28T09:05:45.137
> 
> 标签：java, android

我正在使用 android 应用程序，我想从书籍的当前位置（例如：0:04/6:35）播放有声读物，现在我想播放它并且应该从 0:05 开始而不是从 0:00 开始。我该怎么做实现这一点，请任何人帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T09:12:59.173

如果您已暂停它：

```
Mediaplayer.pause();
length = Mediaplayer.getCurrentPosition();  
Mediaplayer.seekTo(length);
Mediaplayer.start(); 
```

或者，如果您想从一开始就直接开始：

```
length = 4 * 1000; //milliseconds, starts at 0:04
Mediaplayer.seekTo(length);
Mediaplayer.start(); 
```

# c# - 如何将 asp.net 下拉列表中的选定项作为输入传递给 c# 中的存储过程？

> ID：12155999
> 
> 赞同：2
> 
> 时间：2012-08-28T09:05:56.600
> 
> 标签：c#, stored-procedures, drop-down-menu, selecteditem

这是我正在使用的代码..我想将下拉选择的项目作为输入传递给存储过程并执行..我怎么能做到这一点？

```
public class DaysForEvents
{
    public DataSet GetDaysForEvents(//This should be my input to stored procedure (i.e)  dropdownselected value)
    {
        SqlConnection con = new SqlConnection(CommonSettings.GetEventsConnectionString());

        try
        {
            SqlCommand sqlcmd = new SqlCommand("proc_fetch_event_days", con);
            SqlDataAdapter sqlda = new SqlDataAdapter(sqlcmd);
            DataSet ds = new DataSet();
           //DateFilter = 0;
            //StatusFilter = 0;

            sqlcmd.CommandType = CommandType.StoredProcedure;

            sqlcmd.Parameters.AddWithValue("@event_id", Event_id);
            // sqlcmd.Parameters["@UserID"].Value = UserID;

            con.Open();
            sqlda.Fill(ds);
            con.Close();

            return ds;

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T09:09:58.803

据我了解，你想要这个。

```
//get dropdown selected value and store in a variable 
var eventId = dropdown.SelectedValue; 

//pass this variable in the GetDaysForEvents method to get DataSet.
var dataSet = GetDaysForEvents(eventId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T09:11:19.080

调用你的函数

```
string eventId = ddlEvents.SelectedValue;
GetDaysForEvents(eventId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T09:09:00.797

```
sqlcmd.Parameters.AddWithValue("@event_id", yourDropDown.SelectedValue); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T09:16:34.797

-用户`using`声明关闭您的连接并处理您未使用的资源。

-`DataAdapter`自己打开连接，所以不需要`Open()`；

```
public DataSet GetDaysForEvents(string eventId)
{
    var ds = new DataSet();
    using(var connection = new SqlConnection("ConnectionString"))
    {
        using(var cmd = new SqlCommand("storedProcedureName", connection){ CommandType = CommandType.StoredProcedure })
        {
            cmd.Parameters.AddWithValue("@EventId", eventId);
            using(var adapter = new SqlDataAdapter(cmd))
            {
                adapter.Fill(ds);
            }
        }
    }
    return ds;
} 
```

还有别的地方

```
var events = yourClassInstance.GetDaysForEvents(dropDown.SelectedValue); 
```