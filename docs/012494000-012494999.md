# StackOverflow 问答 12494000-12494999

# sql-server - 我有一个用于创建表的存储过程的代码。但是它在执行时返回错误消息。有人可以帮我解决这个问题吗？

> ID：12494002
> 
> 赞同：-5
> 
> 时间：2012-09-19T11:42:46.467
> 
> 标签：sql-server

```
CREATE PROCEDURE new_SP
(
    @tablename varchar(50)
)
AS  
BEGIN
    DECLARE @xxx varchar(50)
    SET  @xxx= 'CREATE TABLE '+@tablename+'( name VARCHAR (50))'
    PRINT @xxx
    EXEC (@xxx) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:45:52.930

至少立即，我注意到您缺少`end`：

```
create procedure new_SP ( @tablename varchar(50)

)
as
  begin
    declare @xxx varchar(50)
    set  @xxx= 'create table '+@tablename+'( name varchar (50))'
    print @xxx
    exec (@xxx)
  end  -- you are missing this 
```

如果您添加`END`，那么这应该可以工作。刚刚在 SQL Server 2008 中对其进行了测试，使用`exec dbo.new_SP test`并生成了一个表。

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8ae11/1)

# java - 使用 EasyMock 测试方法的异常

> ID：12494003
> 
> 赞同：13
> 
> 时间：2012-09-19T11:42:48.873
> 
> 标签：java, exception, testng, easymock

我是单元测试的新手。我正在使用 TestNG 和 MyEclipse 为我的应用程序开发单元测试用例。在这样做时，我遇到了 EasyMock 的一些问题。这是我的代码（出于安全原因更改了类名称、方法名称和返回类型，但您会清楚地了解我在这里想要实现的目标）。

```
 public MyClass
    {
       // This is a method in my class which calls a collaborator which I
       // want to mock in my test case
       public SomeObject findSomething(SomeOtherObject param) throws Exception
       {
          SomeOtherObject param a = myCollaborator.doSomething(param);
          // Do something with the object and then return it 
          return a;
       }
    } 
```

现在这是我的测试。现在我真正想要在我的测试用例中实现的是我想检查我的函数（findSomething）是否正确地抛出异常，以防抛出一些异常。将来，其他一些开发人员可以更改方法的签名（抛出异常实际上不是方法签名的一部分）并从我的方法中删除抛出异常。那么我怎样才能确保没有人改变它呢？

```
@Test(dataProvider="mydataProvider", expectedExceptions=Exception.class)
public void MyTest(SomeOtherObject param) throws Exception {
{
  EasyMock.expect(myCollaboratorMock.doSomething(param)).andThrow(new Exception());
  EasyMock.replay(myCollaboratorMock);
} 
```

我得到了例外

> “java.lang.IllegalArgumentException：在模拟上调用的最后一个方法不能抛出 java.lang.Exception”

我在这里做错了什么？有人可以阐明如何为我的特定场景编写测试用例吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-23T07:07:32.620

协作者的`doSomething()`方法没有声明它可能会抛出异常，而您是在告诉它的模拟抛出一个异常。这是不可能的。

异常是一个检查异常。只有在方法签名中声明它才能被抛出。如果该方法没有`throws`子句，它所能做的就是抛出运行时异常（即`RuntimeException`或任何后代类）。

# ruby-on-rails-3.2 - 如何使用 simple_fields_for 创建多个相同嵌套类型的对象

> ID：12494008
> 
> 赞同：3
> 
> 时间：2012-09-19T11:42:53.207
> 
> 标签：ruby-on-rails-3.2, nested-forms, simple-form

我的模型中有以下内容：

```
company.rb

 has_many :merits
 accepts_nested_attributes_for  :merits 
```

在我的控制器中：

```
def new
   @company = Company.new
   @company.merits.build
 end 
```

在我的表格上：

```
= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|

  = f.simple_fields_for :merits do |m|
    = m.input :description, :required => false
    = m.input :picture, :required => false 
```

这会产生如下哈希：

.`.."merits_attributes"=>{"0"=>{"description"=>"stove", "picture"=>"www.it.com/stove.png"}}...`

我想要的是多个对象，如下所示：

..."merits_attributes"=>{"0"=>{"description"=>"stove", "picture"=>"www.it.com/stove.png"},"1"=>​​{"description "=>"冰箱", "图片"=>"www.it.com/fridge.png"}}...

我可以这样做吗，我该怎么做？如果在控制器中是这样，它将使用以下方法创建多个对象：

```
def create
 @company = Company.new(params[:company])
      if @company.save
        sign_in @company
        redirect_to root_path
      else
        render :new

end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T20:14:38.947

如果你想`merits`在你的表单上有几个，只需在你的控制器中构建相同数量的优点：

```
def new
  @company = Company.new
  3.times { @company.merits.build } # will build 3 merits
end 
```

# javascript - 谷歌地图中的标准标记太小

> ID：12494018
> 
> 赞同：14
> 
> 时间：2012-09-19T11:43:35.360
> 
> 标签：javascript, google-maps, google-maps-markers, zurb-foundation

我正在实施一个像这样的位置选择器： [http://m.rhinvivant-lebendigerrhein.eu/geopick.php ?raz=1](http://m.rhinvivant-lebendigerrhein.eu/geopick.php?raz=1)

但是当我在我的环境中加载代码时，位置标记突然变小并且在加载页面后被压扁（参见图 1）。然后在我拖动标记后，它变得更小（见图2）。

![谷歌地图标记太小](../Images/9c4f4ceb28cbf89d2c34a032fae035ab.png)

有没有人见过这样的东西？这将有助于提示我如何解决这个问题，或者我犯了什么错误。

即我怎样才能固定我的标记的大小？

我的代码如下所示：

```
var marker = new google.maps.Marker({
    title: settings.gMapMarkerTitle,
    map: map,
    position: defaultLocationLatLng,
    draggable: true
}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T14:57:11.580

问题确实是 CSS 设置。我正在使用 zurb 基础框架，它定义了所有图像的最大宽度。

```
max-width: 100%; 
```

通过将我自己的 css 类添加到地图 div 来修复它。它会覆盖最大宽度设置，并且标记恢复正常。

```
<div id="gmap" class="map_canvas" />

.map_canvas img {
    max-width: none; // just in case it does not work... add !important;
} 
```

感谢 Molle 博士的提示...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T19:23:21.953

没有 !important 也可以工作，如果不需要，不应该使用 !important。

```
.map_canvas img {
    max-width: none;
} 
```

# c# - Calendar.SelectedDate response.write in Years, days and hours

> ID：12494021
> 
> 赞同：0
> 
> 时间：2012-09-19T11:44:04.953
> 
> 标签：c#, calendar

我基本上想要的是将 Calender..SelectedDate 转换为年龄是年、日和小时 - 在`Response.Wirte()`.

如果你的生日是：`19-09-1995 (DD/MM/YYYY)` 它会`Response.Write`

```
年龄：18岁
天数：18*365+3 = 6573
天时：6573 * 24 = 157752

```

但它也必须在今年的另一个日期工作，所以如果生日是昨天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:05:44.450

```
 string date = "19-09-1995";
        DateTime birthday = DateTime.ParseExact(date, "d-M-yyyy", CultureInfo.InvariantCulture);
        TimeSpan difference = DateTime.Now.Date - birthday;

        int years = (int)difference.TotalDays / 365;
        int days = (int)difference.TotalDays;
        int hours = (int)difference.TotalHours;
        String answer = String.Format("Age: {0} years", years);
        answer += Environment.NewLine;
        answer += String.Format("Days: {0}*365+{1} = {2}", years, days - years * 365, days);
        answer += Environment.NewLine;
        answer += String.Format("Days Hours: {0}*24 = {1}", hours / 24, hours); 
```

但是这个信息不是真的，因为它不计算闰年

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:25:24.443

这段代码假设世界上没有闰年这样的事情:)

```
private string GetAnswer()
{
    DateTime birthday = calBirthDate.SelectedDate;
    TimeSpan difference = DateTime.Now.Date - birthday;
    int leapYears = CountLeapYears(birthday);

    int days = (int)difference.TotalDays - leapYears;
    int hours = (int)difference.TotalHours - leapYears * 24;

    int years = days / 365;

    String answer = String.Format("Age: {0} years", years);
    answer += Environment.NewLine;
    answer += String.Format("Days: {0}*365+{1} = {2}", years, days - years * 365, days);
    answer += Environment.NewLine;
    answer += String.Format("Days Hours: {0}*24 = {1}", hours / 24, hours);
    return answer;
}

private int CountLeapYears(DateTime startDate)
{
    int count = 0;
    for (int year = startDate.Year; year <= DateTime.Now.Year; year++)
    {
        if (DateTime.IsLeapYear(year))
        {
            DateTime february29 = new DateTime(year, 2, 29);
            if (february29 >= startDate && february29 <= DateTime.Now.Date)
            {
                count++;
            }
        }
    }
    return count;
} 
```

# objective-c - 如何使 NSString 始终使用固定的字体宽度

> ID：12494022
> 
> 赞同：0
> 
> 时间：2012-09-19T11:44:16.073
> 
> 标签：objective-c, ios, nsstring, font-size

我想要一个`NSString`格式为“hh:mm:ss”的像素空间，以使用与字符串“88:88:88”完全相同的像素空间。那可能吗？

现在我正在使用：

```
// ... 
NSMutableString * strS = [[NSMutableString alloc] initWithFormat:@"%d", Seconds];
if (Seconds<10){
  [strS insertString:@"0" atIndex:0];
}

// Make the time to show
[ClocklLabel setText:[NSString stringWithFormat:@"%2@:%2@:%2@", strH,strM,strS]]; 
```

没有成功！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:48:11.747

我认为您正在寻找[等宽字体](http://en.wikipedia.org/wiki/Monospaced_font)。尝试使用 Courier 例如：

```
UIFont *courier = [UIFont fontWithName:@"Courier" size:12.0f];
label.font = courier; 
```

如果您尝试创建数字时钟显示，您也可以简单地为每个数字使用单独的标签，并根据需要放置标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:52:17.947

您可以使用等宽字体。如果您不想这样做，请使用 a`UILabel`并将其设置`adjustsFontSizeToFitWidth`为 YES。但是，在这种情况下，高度会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:05:20.693

你的问题的标题暗示你错过了一个重要的细节。`NSString`仅包含实际文本。

它不是`NSString`决定字体、颜色或其他属性的。正如其他答案所建议的那样，您应该将字体设置为标签/文本字段/按钮或任何应该显示字符串的视觉小工具。

如果您想结合 text 和 text 属性，您可能需要检查`NSAttributedString`.

# ios - 捕获针对父组件中子组件的事件 - iOS Cocoa Touch

> ID：12494027
> 
> 赞同：0
> 
> 时间：2012-09-19T11:44:41.573
> 
> 标签：ios, cocoa-touch, events, event-handling

在 iOS 中是否可以捕获针对父组件中子组件的事件？类似于 DOM 事件模型中的事件捕获阶段。

当用户在键盘外点击时，我试图隐藏键盘。我在主视图中添加了一个事件处理程序。它通常可以正常工作，但是，如果被点击的元素包含自己的事件处理程序，则分配给主视图的事件处理程序不会被执行，因为该事件已经由被点击的组件处理。

任何帮助，将不胜感激。

谢谢， 迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:31:35.303

您要么想在显示键盘时在整个布局上添加一个透明视图，它将接收事件，要么`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`在所有组件中覆盖并在显示键盘时返回 NO

# sql-server - SQL Server CE 到 SQL Server

> ID：12494028
> 
> 赞同：1
> 
> 时间：2012-09-19T11:44:43.677
> 
> 标签：sql-server, sql-server-ce, migrate

我有一个使用 SQL Server CE 数据库的独立 C# 应用程序。另一个使用 SQL Server 数据库在 ASP.NET 上运行的在线程序。现在我想`.sdf`通过浏览器将独立生成的文件上传到我的 ASP.Net 程序，并将数据迁移到 SQL Server。该代码在本地服务器上运行良好。但是当我在 Godaddy 服务器上上传并测试时，我得到了这个错误

> 无法加载文件或程序集“System.Data.SqlServerCe，Version=4.0.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

我已经上传了所有的dll文件。

有时会出现此错误

> 上传状态：无法上传文件。发生以下错误：应用程序无法启动，因为它的并排配置不正确。请参阅应用程序事件日志以获取更多详细信息。（来自 HRESULT 的异常：0x800736B1）

有解决办法吗？

或者如何将sdf文件数据通过代码迁移到xml，然后在线上传xml文件进行解析，并在SQL Server中输入数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:43:56.703

我正在回答我自己的问题，以便对其他人有用。尝试了各种选择。上传 mdb 文件需要在 Godaddy 服务器中安装 Access 驱动程序，这需要升级我的虚拟主机计划。因此，最好的选择是为 sdf 文件上传所需的 dll。将 VS2010 升级到 VS2010SP1 提供了可部署依赖项的选项，可以自动上传 sdf 文件所需的 dll。这是最佳选择，因为在托管环境中正确上传和运行 sdf 文件需要大量 dll。升级VS2010SP1后得到答案。

# gridview - gridview 编辑模式下的屏蔽文本时间（HH.mm.ss）

> ID：12494029
> 
> 赞同：1
> 
> 时间：2012-09-19T11:44:43.940
> 
> 标签：gridview, editmode

我需要限制在gridview编辑模式下只输入时间（HH：mm：ss）我该怎么做？

```
 <asp:GridView runat="server" ID="gvListele" Visible="False"
     CellPadding="4" ForeColor="#333333" GridLines="Horizontal" Width="950px" RowStyle-Height="30px" 
                onselectedindexchanged="gvListele_SelectedIndexChanged" 
                onsorting="gvListele_Sorting" 
                onpageindexchanging="gvListele_PageIndexChanging" 
                onrowcancelingedit="gvListele_RowCancelingEdit" 
                onrowediting="gvListele_RowEditing" 
                onrowupdating="gvListele_RowUpdating" 
                onrowdeleting="gvListele_RowDeleting" 
                onrowdatabound="gvListele_RowDataBound" PageSize="20" 
                EmptyDataText="Görüntülenecek Öğe Bulunmamaktadır....." >
        <RowStyle BackColor="#FFFBD6" ForeColor="#333333" HorizontalAlign="Center"/>
        <Columns>

            <asp:CommandField CancelText="İptal" DeleteText="Sil" EditText="Düzenle" 
                InsertText="Ekle" NewText="Yeni" SelectText="Seç" ShowEditButton="True" 
                UpdateText="Güncelle" />
            <asp:CommandField CancelText="İptal" DeleteText="Sil" EditText="Düzenle" 
                ShowDeleteButton="True" />
        </Columns>
       <FooterStyle BackColor="#29abe2" ForeColor="White" HorizontalAlign="Center" />
        <PagerStyle BackColor="#29abe2" ForeColor="#333333"
         HorizontalAlign="Center" />
        <SelectedRowStyle BackColor="#29abe2" ForeColor="Navy" HorizontalAlign="Center" />
        <HeaderStyle BackColor="#29abe2" ForeColor="White" HorizontalAlign="Center" Font-Size="Small" Height="20px" />
        <AlternatingRowStyle BackColor="White" />

    </asp:GridView> 
```

这是我的 gridview 代码，我只需要在编辑模式下屏蔽 4,5 和 6 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:50:14.680

你可以这样使用；

```
<Columns>
<asp:TemplateField HeaderText="Header Text">
    <ItemTemplate>
        <asp:TextBox ID="txt" runat="server" Width="150" ValidationGroup="MKE" ></asp:TextBox>
        <asp:MaskedEditExtender ID="MaskedEditExtender1" runat="server" 
            TargetControlID="txt" 
            Mask="99,99,9999 99:99"
            MessageValidatorTip="true"
            OnFocusCssClass="MaskedEditFocus"
            OnInvalidCssClass="MaskedEditError"
            MaskType="DateTime"
            AcceptAMPM="True"
            ErrorTooltipEnabled="True"/>
        <asp:MaskedEditValidator ID="MaskedEditValidator1" runat="server" 
            ControlExtender="MaskedEditExtender1"
            ControlToValidate="txt"
            IsValidEmpty="False"
            EmptyValueMessage="EmptyValueMessage"
            InvalidValueMessage="InvalidValueMessage"
            Display="Dynamic"
            TooltipMessage="TooltipMessage"
            EmptyValueBlurredText="EmptyValueBlurredText"
            InvalidValueBlurredMessage="InvalidValueBlurredMessage"
            ValidationGroup="MKE" />
    </ItemTemplate>
</asp:TemplateField> 
```

# webserver - 转到网络服务器：在 http://localhost:8080/handler 上找不到任何东西

> ID：12494033
> 
> 赞同：1
> 
> 时间：2012-09-19T11:45:02.450
> 
> 标签：webserver, go

我正在尝试使用 Go 学习 Web 编程。我盯着一个简单的“hello world”网络服务器：

```
package main

import "fmt"
import "net/http"

func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, "Hello, world")
}

func main() {
    http.HandleFunc("/", handler)
    http.ListenAndServe(":8080", nil)
} 
```

当我去

```
http://localhost:8080/handler 
```

在浏览器中，浏览器似乎找不到任何东西，也没有任何反应。这可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:47:03.577

您将处理程序映射到`"/"`服务器的根 ( )。

在浏览器中这样调用

```
http://localhost:8080/ 
```

如果要将服务映射到特定名称，可以这样做：

```
http.HandleFunc("/something", handler) 
```

然后你会在你的浏览器中输入这个：

```
http://localhost:8080/something 
```

# sql - T-SQL - 获取加入条目的计数

> ID：12494034
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:03.603
> 
> 标签：sql, sql-server, tsql

我想知道如何更好地将以下查询写入 Microsoft SQL Server。

我有三个表`surveys`：`survey_presets`和`survey_scenes`。它们具有以下列：

```
CREATE TABLE [dbo].[surveys](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [caption] [nvarchar](255) NOT NULL,
    [creation_time] [datetime] NOT NULL,
)
CREATE TABLE [dbo].[survey_presets](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [survey_id] [int] NOT NULL,
    [preset_id] [int] NOT NULL,
)
CREATE TABLE [dbo].[survey_scenes](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [survey_id] [int] NOT NULL,
    [scene_id] [int] NOT NULL,
) 
```

两者都在列`survey_presets`上`survey_scenes`有外键。`surveys``survey_id`

现在我想选择所有调查，并为每个调查提供相应的预设和场景的数量。这是我想要的“伪查询”：

```
SELECT
    surveys.*,
    COUNT(survey_presets, where survey_presets.survey_id = surveys.id), 
    COUNT(survey_scenes, where survey_scenes.survey_id = surveys.id)
FROM surveys
ORDER BY suverys.creation_time 
```

我可以弄乱`SELECT DISTINCT`, `JOIN`,`GROUP BY`等，但我是 T-SQL 的新手，我怀疑我的查询在任何意义上都是最佳的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:52:07.770

我会在子查询中进行计数以避免笛卡尔积。因为您可能有一些匹配的行，`presets`并且`scenes`结果计数中的一些可能会成倍增加。您可能会编写简单的连接查询并通过计数来避免`distinct survey_presets.id`乘法`distinct survey_scenes.id`。

```
SELECT
    surveys.*,
    isnull(presets_count, 0) presets_count,
    isnull(scenes_count, 0) scenes_count
FROM surveys
LEFT JOIN 
(
  SELECT survey_id,
         count(*) presets_count
    FROM survey_presets
   GROUP BY survey_id
) presets
  ON surveys.id = presets.survey_id
LEFT JOIN 
(
  SELECT survey_id,
         count(*) scenes_count
    FROM survey_scenes
   GROUP BY survey_id
) scenes
  ON surveys.id = scenes.survey_id
ORDER BY surveys.creation_time 
```

**这个怎么运作**

您可以引入一种特殊的子查询，称为查询`derived table`的 FROM 部分。派生表定义为用括号括起来并后跟表别名的普通查询。它不能使用外部查询中的任何列，但可以公开您在 ON 部分中使用的列，以将派生表连接到查询的主体。

在这种情况下，派生表只计算按 id 分组的行数；连接将计数与调查联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:50:13.760

```
SELECT surveys.ID, surveys.caption, surveys.creation_time,
count(survey_presets.survey_id) as survey_presets,
count(survey_scenes.survey_id)  as survey_scenes
FROM surveys
LEFT OUTER JOIN survey_presets on survey_presets.survey_id = surveys.id 
LEFT OUTER JOIN survey_scenes  on survey_scenes.survey_id  = surveys.id
GROUP BY surveys.ID, surveys.caption, surveys.creation_time
ORDER BY suverys.creation_time 
```

# xamarin.android - 在 MapView 上用 Monondroid 上的特定半径绘制一个圆

> ID：12494036
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:10.693
> 
> 标签：xamarin.android

我正在尝试在特定纬度/经度的 MapView 上绘制一个以公里为单位的特定半径（例如 2 公里）的圆。我找到了一些样本：

[在地图上创建自定义叠加层](https://stackoverflow.com/questions/4428730/creating-custom-overlay-on-the-map)

[在 Android MapView 上画一个圆](https://stackoverflow.com/questions/5293709/draw-a-circle-on-android-mapview)

[在android的地图视图上绘制一定半径的圆](https://stackoverflow.com/questions/6029529/draw-circle-of-certain-radius-on-map-view-in-android)

我认为上面的第一个和第二个很有用，但它们是用 Java 编写的，我需要 Mono for Android (Monodevelop) 的代码。

我在 monodroid 中找不到 Projection 类。并且不能使用`com.google.android.maps.Projection`。有人可以帮我如何在 monodroid 中使用这些代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:23:15.360

[`com.google.android.maps.Projection`](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/Projection) is an interface, so it is made available in Mono for Android as [`Android.GoogleMaps.IProjection`](http://docs.mono-android.net/?link=T%3aAndroid.GoogleMaps.IProjection) to keep with normal C# conventions.

Similarly, where you'd use mapView.getProjection() in Java, in C# it is made available via the [`Projection` property on `MapView`](http://docs.mono-android.net/?link=P%3aAndroid.GoogleMaps.MapView.Projection#).

Xamarin has [some tutorials on their site](http://docs.xamarin.com/android/tutorials/Maps_and_Location/Part_2_-_Maps_API#Custom_Drawn_Overlays) that go over how to use these to create custom overlays, so I'd suggest checking them out.

# asp.net-mvc-3 - 使用 javascript 参数更改按钮单击的视图

> ID：12494038
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:18.047
> 
> 标签：asp.net-mvc-3

说我有以下按钮

```
<button id="CopyUsersRolesButton" type="button" onclick="CopyUsersRoles()" data-url="@Url.Action("CopyUsersRoles", "Index", new {userId = "0" })">
                  Copy Users Roles</button> 
```

我想重定向到由以下操作返回的视图：

```
 public ActionResult CopyUsersRoles(int userId)
    {
        var model = new CopyUsersRolesViewModel
        {
            SelectedUserId = userId
        };

        return View(model);
    } 
```

我需要将 javascript 变量 ( `SelectedUserId`) 传递给操作。

我让它工作的唯一方法是在 URL.Action 方法中保留一个占位符并将其替换如下：

```
function CopyUsersRoles() {
    var url = $('#CopyUsersRolesButton').data('url');
    window.open(url.replace('0', SelectedUserId));       
    return false;
} 
```

这对我来说感觉很hacky，没有更清洁的解决方案吗？我目前在 html 页面上没有表单，并且希望避免使用输入按钮，因为所有其他按钮都有 Jquery UI 图标（请参阅[如何将 jQuery UI 按钮图标添加到输入按钮？](https://stackoverflow.com/questions/2822891/how-to-add-jquery-ui-button-icons-to-input-buttons)）。

# php - 为什么我的数学 if 语句失败？

> ID：12494040
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:19.597
> 
> 标签：php

我正在为玩家 A 与 B 的战斗编写简单的掉落公式 - 等级差异决定了掉落率。我的问题是，`0: > 10 ||| 1 vs. 1 = 10%`它没有给出`0: > 10 ||| 1 vs. 1 = 0%`- 为什么？

PhpFiddle：[http ://www.phpfiddle.org/main/code/n1q-dw7](http://www.phpfiddle.org/main/code/n1q-dw7)

```
<?php

# lets simulate high level player A attacks low level player B
for ($A = 1; $A <= 100; $A++) {
    $B = 1;
    calculateMoneyDrop($A,$B);
}

# lets simulate low level player A attacks high level player B
for ($B = 1; $B <= 100; $B++) {
    $A = 1;
    calculateMoneyDrop($A,$B);
}

function calculateMoneyDrop($A,$B) {
    $X = $A - $B;
    echo '<strong>', $X, '</strong>: ';

    switch ($X) {
        case $X > 10:
            echo "> 10 ||| ";
            $X = 10;
            break;
        case $X < -90:
            echo "< -90 ||| ";
            $X = -90;
            break;
    }

    $dropRate = 10 - $X;
    echo $A, ' vs. ', $B, ' = ', $dropRate, '%<br>';

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:58:09.550

这就是 switch-case 的工作原理。它检查是否`$X`等于您在 中列出的值`case`。由于该值是一个布尔值（比较的结果是一个布尔值！），并且 PHP 有一种[比较不同类型](http://php.net/manual/en/types.comparisons.php)（在本例中为`int`和`bool`）的疯狂方式，因此该块实际上将被执行。

使用`if`语句，或使用`min`and `max`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:47:39.487

如果您将开关更改为

```
 switch (true) { 
```

原始代码运行正确。

也许比我更好的 php 的人可以解释为什么！

[http://www.phpfiddle.org/main/code/6pg-nwc](http://www.phpfiddle.org/main/code/6pg-nwc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:52:44.500

好吧，在您的`$X > 10`情况下，您设置`$X = 10`并稍后计算`$dropRate`为`10 - $X`，即`10 - 10`，即`0`。

如果期望的结果是，则`$dropRate`应该是。输出先说，然后进入开关盒，这也让我感到好笑……您确定要向我们展示所有代码吗？`$X``10``$X == 0``$X > 10`

另外，我认为使用这种`switch`情况不是一个好习惯。这是一个典型的`if`块候选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:05:43.633

您的开关块与以下内容相同：

```
if(($X > 10)==$X){
        echo "> 10 ||| ";
        $X = 10;
}
else if(($X < -90)==$X){
        echo "< -90 ||| ";
        $X = -90;
} 
```

它将“case”中的任何内容与开关括号中的内容进行比较。Switch 仅用于“等于”比较。因此，要使其工作，请使用：

```
if($X > 10){
        echo "> 10 ||| ";
        $X = 10;
}
else if($X < -90){
        echo "< -90 ||| ";
        $X = -90;
} 
```

# php - 如何将 homeUrl 与 createUrl 结合起来？

> ID：12494041
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:21.373
> 
> 标签：php, yii

我有一个不同的`homeUrl`，我希望`createUrl()`在调用该方法时使用它

例如

```
Yii::app()->homeUrl = Yii::app()->params['myurl']; 
```

但是当我这样做时

```
$this->createUrl(Yii::app()->homeUrl.'controller/action'); 
```

我得到两个不同的网址......如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T00:47:25.110

萨索里，

您可能需要执行以下操作：

```
<?php echo Yii::app()->homeUrl.'?r=controller/action';?> 
```

将输出*/app/index.php?r=controller/action*

# iphone - 在 iphone 中自定义 settings.bundle

> ID：12494043
> 
> 赞同：2
> 
> 时间：2012-09-19T11:45:23.453
> 
> 标签：iphone, xcode4.3, ios5.1

我想像 Twitter 应用程序设置一样使用 plist 进行应用程序设置，并让我的应用程序名称的状态显示为“已安装”，就像在 Twitter 中所做的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:41:32.997

Twitter 之所以能够做到这一点，是因为 Apple 已将其作为操作系统核心功能的一部分。换句话说，如果没有安装 Twitter，那么 Twitter 设置仍然可用，因为即使在应用程序中也可以使用 Twitter。

您不能对您的应用执行此操作，因为如果未安装该应用，那么无论如何设置都不会出现。您的设置只会显示应用程序是否已安装，因此说“已安装”是多余且不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:49:46.097

如果我理解正确，您希望您的应用程序位于设置应用程序的 twitter 设置中。好吧，我很抱歉告诉你这是不可能的。

设置中的推特设置是苹果自己构建的，只检测官方推特应用。

如果您只想在设置应用程序下使用应用程序，请阅读以下内容：[实现 iOS 设置包](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# c - 搜索 c 中数字的出现次数

> ID：12494044
> 
> 赞同：1
> 
> 时间：2012-09-19T11:45:24.880
> 
> 标签：c, search, numbers, integer, strstr

我知道如何在 C 中搜索字符串。我使用 for 循环然后使用 strstr 函数来确定是否存在任何事件。但现在我的 int 数字比我想搜索的要多。我确实在互联网上找到了几个例子，但所有这些都搜索了我不想要的确切数字。我需要像“20”这样搜索，如果有数字“2010”，它应该显示它。

我怎么能在c中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:05:17.640

也许我错过了重点......但为什么不继续使用 strstr 呢？

```
int main(){
   char tmpbookyear [] = "this year is 2010";
   char searchCriteria [] = "20";
   char *result;

   if((result = strstr (tmpbookyear, searchCriteria)) != NULL)
       printf ("Returned String: %s\n", result);
   else
       printf("GOT A NULL\n");
}

mike@linux-4puc:~> gcc test.c
mike@linux-4puc:~> ./a.out 
Returned String: 2010 
```

`I need to search like "20" and if there is a number "2010" it should display it.` 这就是你想要它做的对吗？

**编辑：**

```
char year[] = "2012"; 
char search[] = "2";
if(strstr(year, search) != NULL) 
    { printf("result is %s\n",strstr(year, search)); }

mike@linux-4puc:~> gcc test.c
mike@linux-4puc:~> ./a.out 
result is 2012 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:51:39.550

逐个字符扫描字符串，直到找到一个数字（`isdigit()`返回非零）。然后将该位置的字符串转换为 unsigned long with `strtoul()`。进行比较，然后使用转换结束指针 return from`strtoul()`知道从哪里继续扫描。

# c# - 按钮 IsEnabled 触发器不起作用

> ID：12494045
> 
> 赞同：7
> 
> 时间：2012-09-19T11:45:27.067
> 
> 标签：c#, wpf, button, triggers, isenabled

我有一个`Button`和它的风格：

```
<Button Name="MyBtn" Style="{StaticResource ButtonEnabledStyle}"
        IsEnabled="False" Opacity="1" />

<Style x:Key="ButtonEnabledStyle" TargetType="Button">
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="True" >
            <Setter Property="Opacity" Value="0.1" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

但是当我启用 Button ( `MyBtn.IsEnabled = true`) 时，它不会改变它的不透明度。为什么？我怎么解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T11:54:03.140

在元素上设置的本地值（`Opacity="1"`在您的代码中）将始终优先于样式或样式触发值。请查看[Dependency Property Setting Precedence List](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)。

一个简单的解决方法是设置样式的默认值：

```
<Style x:Key="ButtonEnabledStyle" TargetType="Button">
  <Setter Property="Opacity" Value="1.0" />
  <Style.Triggers>
    <Trigger Property="IsEnabled" Value="True" >
      <Setter Property="Opacity" Value="0.1" />
    </Trigger>
  </Style.Triggers>
</Style> 
```

# javascript - javascript正则表达式出现“意外的量词”错误

> ID：12494048
> 
> 赞同：2
> 
> 时间：2012-09-19T11:45:41.177
> 
> 标签：javascript, regex

当我在 javascript 中使用这个正则表达式声明时：

```
var phoneRegExp = /^(\+\s?)?((?<!\+.*)\(\+?\d+([\s\-\.]?\d+)?\)|\d+)([\s\-\.]?(\(\d+([\s\-\.]?\d+)?\)|\d+))*(\s?(x|ext\.?)\s?\d+)?$/i; 
```

它在 IE10 中给了我一个“意外的量词”错误。Chrome 报告“无效组”。据我所见，表达式没问题，我已经用[http://regexhero.net/tester](http://regexhero.net/tester)对其进行了测试，它与.NET4.5 PhoneAttribute 中使用的相同

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:19:51.097

面临同样的问题并通过反转原始正则表达式模式并将lookbehind替换为lookahead来解决它。最后一个技巧是反转将要针对正则表达式进行测试的输入字符串。

这个想法在 Steven Levithan 的 Mimicking Lookbehind [in JavaScript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)博客文章中有很好的描述。

下面是我的测试页面，您可以在其中看到有效的正则表达式：

```
<html>
    <head>
        <title>Phone Number RegExp Test Page</title>
    </head>
    <body>
        <script>
            function validateInput() {              
                var phoneRegex = new RegExp("^(\\d+\\s?(x|\\.txe?)\\s?)?((\\)(\\d+[\\s\\-\\.]?)?\\d+\\(|\\d+)[\\s\\-\\.]?)*(\\)([\\s\\-\\.]?\\d+)?\\d+\\+?\\((?!\\+.*)|\\d+)(\\s?\\+)?$", "i");

                var input = document.getElementById("tbPhone");
                var value = input.value.split("").reverse().join("");
                alert(phoneRegex.test(value));
            }           
        </script>

        <input type="text" id="tbPhone" />
        <button onclick="javascript:testPhone()">Validate</button>
    </body>
</html> 
```

# hibernate - Hibernate 无法保存/更新/删除对象

> ID：12494051
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:44.323
> 
> 标签：hibernate, hibernate3

我对 Hibernate 有一个很大的问题。当我尝试更新或保存表中的元素时，出现此错误：

```
org.hibernate.StaleStateException: Batch update returned unexpected row count from update [0]; actual row count: 0; expected: 1 
```

当我调用我的 DAO 服务时会产生这个错误：

```
Session session = sessionFactory.getCurrentSession();
session.saveOrUpdate(object);
session.flush(); 
```

当我调试时，在 flush() 之后会生成错误。

这里是表的关键：

```
@EmbeddedId
@AttributeOverrides( {
        @AttributeOverride(name = "sysDocId", column = @Column(name = "SYS_DOC_ID", nullable = false)),
        @AttributeOverride(name = "sysDataFile", column = @Column(name = "SYS_DATA_FILE", nullable = false)) })
public RelDocFileId getId() {
    return this.id;
} 
```

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:31:05.867

这意味着 Hibernate 在数据库中找不到这条记录，UPDATE 语句返回结果：0 行受到该更新的影响。

Hibernate 发现您要更新的内容不再存在，这意味着您正在保存过时的数据。

您不应该允许这种情况或适当地处理此异常，关闭会话并向用户说“嘿，您看到了一个过时的数据，它不再存在”。

# asp.net-mvc-3 - 有没有办法在 MVC3 的控制器方法中更改文本颜色？

> ID：12494052
> 
> 赞同：1
> 
> 时间：2012-09-19T11:45:48.260
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试更改控制器中的文本颜色。是的，我做到了，但我必须向我的视图发送两个参数。那么有没有其他方法可以在控制器方法中改变颜色？

这是我的控制器：

```
public action Test ()
{
 ViewBag.stackoverflow = "It's gonna be red";

 ViewBag.color = "red";
} 
```

而我的观点：

```
@{
    ViewBag.Title = "Test me";

}
  <font color="@ViewBag.color">@ViewBag.stackoverflow</font> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T02:42:46.160

我只是想弄清楚同样的事情。我所做的只是用引导类将 ViewBag 包装在视图中：

```
<div class="text-danger">
     @ViewBag.Message     //Message comes out red
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:52:55.890

在 ASP.NET MVC 中，控制器和视图通过您发送给视图的模型进行通信。所以没有办法。但这是好事。MVC 引入了各种关注点的分离。许多优点之一是可测试性。

还有一件事。您在 ViewBag 上的“颜色”属性也不是好主意。尝试描述突出显示值的目的，例如“优先级”或其他内容，稍后您可以决定用于不同优先级的颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T05:18:32.960

我发现将标签与引导程序中的类一起使用很有帮助。很容易：

```
<span class="alert-success">
        @Html.Raw(TempData["Message"])
</span> 
```

# javascript - 使用 angularjs 在开发服务器上运行 $http.delete 时出现 404 错误

> ID：12494053
> 
> 赞同：0
> 
> 时间：2012-09-19T11:45:51.410
> 
> 标签：javascript, iis-7.5

仅当在开发服务器上运行时，我的 $http.delete 调用才以 404 失败 - 从我自己的机器上运行网站很好。

这是我的代码：

```
application.factory('Task', function ($http) {

    var Task = function (data) {
        angular.extend(this, data);
    }

    Task.deleteTask = function (id) {
        return $http.delete('/api/Tasks/' + id).then(function (response) {
            return response.data;
        });
    }

    Task.prototype.create = function () {
        var result = this;
        return result;
    }

    return Task;

}); 
```

有谁知道可能是什么问题？

我在 IIS 7 上远程运行网站并在本地使用 cassini (Visual Studio 2010)。

我正在使用来自谷歌 CDN 的 angularjs (https://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:43:05.723

通过将以下内容添加到我的 web.config 中，我得到了这个工作：

```
<system.webServer>
    <handlers>
      <remove name="ExtensionlessUrl-Integrated-4.0" />
      <add name="ExtensionlessUrl-Integrated-4.0"
           path="*."
           verb="GET,POST,DELETE,PUT"
           type="System.Web.Handlers.TransferRequestHandler"
           preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
</system.webServer> 
```

# asp.net - 删除 SQL Express 2008 并安装 SQL 2008 R2 Enterprise 后如何配置 ASP.NET 成员资格

> ID：12494059
> 
> 赞同：1
> 
> 时间：2012-09-19T11:46:08.967
> 
> 标签：asp.net, sql-server-2008, asp.net-membership

正如标题所说，我曾经在我的机器上安装过 SQL Express 2008。创建新的 Web 应用程序后，Visual Studio 将自动创建**aspnetdb.mdf**数据库并将连接字符串添加到 Web.config 文件。

自从安装完整版后，令我惊讶的是，我发现无法再引用本地 .mdf 数据库了。首先，这是真的吗？

考虑到这一点，我使用 aspnet_regsql.exe 在我的本地服务器上创建了一个**aspnetdb.dbo**数据库。然后，我使用 VisualStudio 中的“服务器资源管理器”将该数据库附加到“数据连接”。

问题是，每次我创建一个新的 Web 应用程序时，它都会将一个本地 SQLExpress 连接字符串粘贴到项目模板中。

我还需要做些什么来纠正这个问题吗？

谢谢

# android - onlocationchanged 未调用

> ID：12494061
> 
> 赞同：1
> 
> 时间：2012-09-19T11:46:12.243
> 
> 标签：android, gps

当我使用 Eclipse DDMS 测试应用程序时 - 它可以工作，调用 onlocationchanged 但是当我在平板电脑上安装应用程序时 - 没有

我的来源

```
public class Fragment_1 extends Fragment{

      final String LOG_TAG = "myLogs";
      private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
        private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds
        private String bestProvider;
        private Context contextActivity;
        private LocationManager locationManager;
        private MyLocationListener locationListener;

      public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        contextActivity = getActivity(); 

        locationManager = (LocationManager)  contextActivity.getSystemService(contextActivity.LOCATION_SERVICE);
        Criteria crit = new Criteria();
        crit.setAccuracy(Criteria.ACCURACY_FINE);
        bestProvider = locationManager.getBestProvider(crit, false);
        locationListener = MyLocationListener.createMyLocationListener(this);
                locationManager.requestLocationUpdates(

                        bestProvider,

                        MINIMUM_TIME_BETWEEN_UPDATES,

                        MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,

                        locationListener);

      } 
```

和我的班级 MyLocationListener

```
ublic class MyLocationListener implements LocationListener {

    private Fragment_1 fragment;
    private static MyLocationListener myLocationListener;

    public MyLocationListener(Fragment_1 fragment_1) {
        // TODO Auto-generated constructor stub
        fragment  = fragment_1;

    }

    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if(fragment.getActivity() !=null) {
        TextView textViev = (TextView)fragment.getActivity().findViewById(R.id.textView1);
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
              textViev.setText(message);}
        }

    public static MyLocationListener createMyLocationListener (Fragment_1 fragment_1) {

        if (myLocationListener == null) {

            myLocationListener = new MyLocationListener(fragment_1);
        } else {

            myLocationListener.setFragment(fragment_1);
        }

        return myLocationListener;

    }
    private void setFragment (Fragment_1 fragment){

        this.fragment = fragment;

    }

} 
```

和清单中的许可

```
 <uses-permission android:name="android.permission.ACCESS_GPS" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

# mysql - 如何使用 max 执行 group by 子句

> ID：12494065
> 
> 赞同：5
> 
> 时间：2012-09-19T11:46:16.143
> 
> 标签：mysql, sql

我有一个看起来像 thos 的查询：

```
SELECT max(insert_date),
       creative_id,
       creative_object
FROM   rtb_creatives
WHERE  adgroup_id = 'agid1608844879'
       AND is_delete IN ( 0 )
GROUP  BY insert_date,
          creative_id,
          creative_object 
```

例如，我有 4 行：insert_date creative_id、creative_object

```
 june 12 a b
 june13 a b
 june 12 c d
 june13 c d 
```

查询返回所有行。

我需要返回

```
june13 a b
 june13 c d 
```

如何修改查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:51:19.160

只需`insert_date`从`GROUP BY`子句中删除：

```
SELECT max(insert_date) AS insert_date, creative_id, creative_object
from rtb_creatives 
where adgroup_id='agid1608844879' and is_delete in (0)
group by creative_id, creative_object 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:52:24.417

```
create table rtb_creatives (insert_date varchar(20), creative_id char(1), creative_object char(1));
insert into rtb_creatives (insert_date, creative_id, creative_object) values
('june 12', 'a', 'b'),
('june 13', 'a', 'b'),
('june 12', 'c', 'd'),
('june 13', 'c', 'd')
;

SELECT insert_date, creative_id, creative_object 
from rtb_creatives 
where 
    adgroup_id='agid1608844879' 
    and is_delete in (0)
    and insert_date = (select max(insert_date) from rtb_creatives)
group by insert_date, creative_id, creative_object
;
+-------------+-------------+-----------------+
| insert_date | creative_id | creative_object |
+-------------+-------------+-----------------+
| june 13     | a           | b               |
| june 13     | c           | d               |
+-------------+-------------+-----------------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:57:50.617

如果您只需要知道特定`creative_id`和的最大日期是多少`creative_object`，您只需从`GROUP BY`子句中删除 insert_date，女巫将导致为每个组选择最大日期，我也会更改 IN 条件以使其更清晰（尽管在这种特殊情况下，它并没有太大的区别），就像这样：

```
SELECT max(insert_date) as insert_date,
       creative_id,
       creative_object
FROM   rtb_creatives
WHERE  adgroup_id = 'agid1608844879'
       AND is_delete =  0
GROUP  BY creative_id,
          creative_object 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:09:09.877

这里的问题是您的插入日期被定义为一个字符串。它应该定义为日期类型，以便 Max() 可以计算正确的顺序。假设有一个其他日期，例如 8 月 5 日作为插入日期，那么 Max 将返回 6 月 13 日。请记住，在字符串排序中，6 月 13 日和 6 月 13 日存在差异。

当您使用 max(an expression) 时，表达式不应出现在 group by 子句中。

`GROUP BY ~~insert_date,~~ creative_id, creative_object`

希望这可以帮助。

# c# - 在 WebApi 控制器中读取 HttpContent

> ID：12494067
> 
> 赞同：84
> 
> 时间：2012-09-19T11:46:27.120
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, httpcontent

如何在 MVC webApi 控制器操作中读取 PUT 请求的内容。

```
[HttpPut]
public HttpResponseMessage Put(int accountId, Contact contact)
{
    var httpContent = Request.Content;
    var asyncContent = httpContent.ReadAsStringAsync().Result;
... 
```

我在这里得到空字符串:(

我需要做的是：找出在初始请求中修改/发送了“哪些属性”（这意味着如果`Contact`对象有 10 个属性，并且我只想更新其中的 2 个，我发送和对象只有两个属性，像这样的东西：

```
{

    "FirstName": null,
    "LastName": null,
    "id": 21
} 
```

预期的最终结果是

```
List<string> modified_properties = {"FirstName", "LastName"} 
```

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-09-19T12:32:28.227

通过设计，ASP.NET Web API 中的正文内容被视为只能读取一次的只进流。

您的案例中的第一次读取是在 Web API 绑定您的模型时完成的，之后`Request.Content`将不会返回任何内容。

您可以`contact`从操作参数中删除 ，获取内容并将其手动反序列化为对象（例如使用 Json.NET）：

```
[HttpPut]
public HttpResponseMessage Put(int accountId)
{
    HttpContent requestContent = Request.Content;
    string jsonContent = requestContent.ReadAsStringAsync().Result;
    CONTACT contact = JsonConvert.DeserializeObject<CONTACT>(jsonContent);
    ...
} 
```

这应该可以解决问题（假设这`accountId`是 URL 参数，因此它不会被视为内容读取）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-03-02T17:00:40.833

您可以使用以下方法保留您的 CONTACT 参数：

```
using (var stream = new MemoryStream())
{
    var context = (HttpContextBase)Request.Properties["MS_HttpContext"];
    context.Request.InputStream.Seek(0, SeekOrigin.Begin);
    context.Request.InputStream.CopyTo(stream);
    string requestBody = Encoding.UTF8.GetString(stream.ToArray());
} 
```

为我返回了参数对象的 json 表示形式，因此我可以将其用于异常处理和日志记录。

[在此处](https://stackoverflow.com/questions/11901906/how-to-get-hold-of-content-that-is-already-read)找到已接受的答案

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-09-28T12:56:19.287

尽管这个解决方案看起来很明显，但我只是想把它贴在这里，以便下一个人能更快地用谷歌搜索它。

如果您仍然希望将模型作为方法中的参数，您可以创建一个`DelegatingHandler`来缓冲内容。

```
internal sealed class BufferizingHandler : DelegatingHandler
{
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        await request.Content.LoadIntoBufferAsync();
        var result = await base.SendAsync(request, cancellationToken);
        return result;
    }
} 
```

并将其添加到全局消息处理程序中：

```
configuration.MessageHandlers.Add(new BufferizingHandler()); 
```

该解决方案基于[Darrel Miller](https://stackoverflow.com/users/6819/darrel-miller)的[回答](https://stackoverflow.com/questions/11901906/how-to-get-hold-of-content-that-is-already-read)。

这样所有的请求都会被缓冲。

# excel - 优雅地在 vba 中编写逗号分隔的文本文件

> ID：12494068
> 
> 赞同：0
> 
> 时间：2012-09-19T11:46:29.340
> 
> 标签：excel, vba

我只需要问一次...

`& "," &`有没有比我们一直使用的久经考验的更优雅的方式让您的输出以逗号分隔？

```
print #myTextFileNumber, myValue1 & "," & myText2 & "," & myValue3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:01:48.013

您正在寻找的命令是`write`

从帮助：

> 在写入文件时，Write # 语句在项目和字符串周围的引号之间插入逗号

在您的示例中，命令将是：

```
write #myTextFileNumber, myValue1 , myText2 , myValue3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:37:41.263

如果将值存储在数组中，则可以使用`join`.

# linux - 使用非标准路径编译 glib

> ID：12494072
> 
> 赞同：16
> 
> 时间：2012-09-19T11:46:48.150
> 
> 标签：linux, gcc, linker

我正在尝试编译`glib-2.32.1`，因此我安装`libffi-3.0.1`到以下路径：

```
~/localroot/lib/ 
```

头文件位于：

```
~/localroot/lib/libffi-3.0.11/include/ 
```

但是，当我进行配置时：

```
~/tmp/build_alot/glib-2.32.1 $ ./configure --prefix=~/localroot 
```

我看到以下错误：

```
checking whether to cache iconv descriptors... no
checking for ZLIB... yes
checking for LIBFFI... no
configure: error: Package requirements (libffi >= 3.0.0) were not met:

No package 'libffi' found

Consider adjusting the PKG_CONFIG_PATH environment variable if you
installed software in a non-standard prefix.

Alternatively, you may set the environment variables LIBFFI_CFLAGS
and LIBFFI_LIBS to avoid the need to call pkg-config.
See the pkg-config man page for more details. 
```

为了成功编译 glib `LIBFFI_LIBS`，我需要设置哪些正确值 ？`LIBFFI_CFLAGS`

### 一点点额外信息：

当我编译 libffi 时，我得到了以下有用的信息：

库已安装在：/home/nahum/localroot/lib

```
If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the `-LLIBDIR'
flag during linking and do at least one of the following:
   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable
     during execution
   - add LIBDIR to the `LD_RUN_PATH' environment variable
     during linking
   - use the `-Wl,-rpath -Wl,LIBDIR' linker flag
   - have your system administrator add LIBDIR to `/etc/ld.so.conf'

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
    ----------------------------------------------------------------------
test -z "/home/user/localroot/share/info" || /bin/mkdir -p "/home/user/localroot/share/info"
 /usr/bin/install -c -m 644 ../doc/libffi.info '/home/nahum/localroot/share/info'
 install-info --info-dir='/home/user/localroot/share/info' '/home/user/localroot/share/info/libffi.info'
test -z "/home/user/localroot/lib/pkgconfig" || /bin/mkdir -p "/home/user/localroot/lib/pkgconfig"
 /usr/bin/install -c -m 644 libffi.pc '/home/user/localroot/lib/pkgconfig'
make[3]: Leaving directory `/home/user/tmp/build_alot/libffi-3.0.11/x86_64-unknown-linux-gnu'
make[2]: Leaving directory `/home/user/tmp/build_alot/libffi-3.0.11/x86_64-unknown-linux-gnu'
make[1]: Leaving directory `/home/user/tmp/build_alot/libffi-3.0.11/x86_64-unknown-linux-gnu' 
```

设置`PKG_CONFIG_PATH`为`/home/user/localroot/lib/pkgconfig`仍然不会带来成功。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-19T12:21:09.083

### 在开悟的路上……

我设法编译了 glib：

```
export LIBFFI_CFLAGS=-I/home/user/localroot/lib/libffi-3.0.11/include
export LIBFFI_LIBS="-L/home/user/localroot/lib -lffi" 
```

现在我必须看看未来的依赖是否都对我编译它的方式感到满意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-08T15:22:37.567

对于像我这样想知道`-I`和`-L`和`-lffi`标志来自哪里的人（Oz123 的回答），我发现它们可以在以下位置找到：

```
/home/user/local-software/libffi-3.1/lib/pkgconfig/libffi.pc 
```

阅读文件给出：

```
...
...
Libs: -L${toolexeclibdir} -lffi
Cflags: -I${includedir} 
```

使用`Libs`和`Cflags`位置分别设置`LIBFFI_LIBS`和`LIBFFI_CFLAGS`变量。现在，如果您运行`./configure`then `make && make install`，事情应该会奏效（至少他们为我做了）。

# android - 需要应用程序在运行和关闭时检测 nfc

> ID：12494073
> 
> 赞同：3
> 
> 时间：2012-09-19T11:46:49.580
> 
> 标签：android, nfc

我目前正在使用 NFC 技术为 Android 构建应用程序。NFC 部分用于登录应用程序。所以这就是交易：我希望应用程序在检测到已经运行的标签时做出不同的响应。以下是两种情况：

1) 当用户扫描带有特定 URI 的标签时，应用程序启动，将 URI 加载到用户名文本字段中。然后用户输入他的密码，按下登录，瞧，魔术。这部分工作正常。

2）现在，我还希望从应用列表中启动应用，显示登录表单。没问题，我为此使用了不同的活动。但是现在，我如何制作某种自定义事件侦听器，使应用程序等待标签被扫描，然后将 URI 放入用户名字段中，然后再次启动应用程序，如中所述情况1？

希望大家能帮帮我，长文见谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:00:14.813

您的应用程序本身只需要知道它自己的当前状态并相应地响应扫描的标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T08:48:06.780

为您的开放活动使用前台模式，它将能够接收所有 NDEF 消息（来自标签或光束）。[检查此](http://code.google.com/p/ndef-tools-for-android/)项目中的样板项目（无耻插件）。

# android - Android：使用文本视图中显示的时间在时间 选择器中设置时间

> ID：12494074
> 
> 赞同：17
> 
> 时间：2012-09-19T11:46:53.917
> 
> 标签：android, time, android-timepicker

在我的应用程序中，我在文本视图中将时间显示为 07:00 PM。单击文本视图时，会弹出一个时间选择器对话框，在该时间选择器中，我必须显示与文本视图中出现的时间完全相同的时间。但是，我不知道该怎么做。

**代码**

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm a");
        //int hr = 0;
        Date date = null;
        try 
        {
            date = sdf.parse(resDateArray[3]);
        } 
        catch (ParseException e) {
            e.printStackTrace();
        }
        final Calendar calendar = Calendar.getInstance();
        calendar.setTime(date);
        //tp is reference variable for time picker

        tp.setCurrentHour(calendar.get(Calendar.HOUR));
        tp.setCurrentMinute(calendar.get(Calendar.MINUTE));

        }//else 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-19T12:02:16.427

您应该使用 a`SimpleDateFormat`从`Date`您的`String`. 然后打电话

```
picker.setCurrentHour(date.getHours()) 
```

和

```
picker.setCurrentMinute(date.getMinutes()) 
```

由于该`Date`对象已被弃用，因此您应该使用 a`Calendar`来代替它。您可以通过这种方式实例化 a `Calendar`：

```
Calendar c = Calendar.getInstance();
c.setTime(date);
picker.setCurrentHour(c.get(Calendar.HOUR_OF_DAY));
picker.setCurrentMinute(c.get(Calendat.MINUTE)); 
```

编辑：完整代码：

```
import java.util.Date;
import java.text.SimpleDateFormat; //Don't use "android.icu.text.SimpleDateFormat"
import java.text.ParseException; //Don't use "android.net.ParseException"

SimpleDateFormat sdf = new SimpleDateFormat("hh:mm");
Date date = null;
try {
    date = sdf.parse("07:00");
} catch (ParseException e) {
}
Calendar c = Calendar.getInstance();
c.setTime(date);

TimePicker picker = new TimePicker(getApplicationContext());
picker.setCurrentHour(c.get(Calendar.HOUR_OF_DAY));
picker.setCurrentMinute(c.get(Calendar.MINUTE)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-11T10:55:16.337

如果有人使用以下格式而不使用 timepicker 小部件，请使用这个..

```
mStartTime.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            new TimePickerDialog(AddAppointmentActivity.this, onStartTimeListener, calendar
                    .get(Calendar.HOUR), calendar.get(Calendar.MINUTE), false).show();

        }
    });

TimePickerDialog.OnTimeSetListener onStartTimeListener = new OnTimeSetListener() {

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        String AM_PM;
        int am_pm;

        mStartTime.setText(hourOfDay + " : " + minute + "  " + AM_PM);
        calendar.set(Calendar.HOUR, hourOfDay);
        calendar.set(Calendar.MINUTE, minute);

    }
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-08T15:40:19.653

我创建了这个辅助函数来获取时间

```
 public static void showTime(final Context context, final TextView textView) {

    final Calendar myCalendar = Calendar.getInstance();
    TimePickerDialog.OnTimeSetListener mTimeSetListener = new TimePickerDialog.OnTimeSetListener() {
        public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
            String am_pm = "";
            myCalendar.set(Calendar.HOUR_OF_DAY, hourOfDay);
            myCalendar.set(Calendar.MINUTE, minute);
            if (myCalendar.get(Calendar.AM_PM) == Calendar.AM)
                am_pm = "AM";
            else if (myCalendar.get(Calendar.AM_PM) == Calendar.PM)
                am_pm = "PM";
            String strHrsToShow = (myCalendar.get(Calendar.HOUR) == 0) ? "12" : myCalendar.get(Calendar.HOUR) + "";
            //UIHelper.showLongToastInCenter(context, strHrsToShow + ":" + myCalendar.get(Calendar.MINUTE) + " " + am_pm);
            textView.setText(strHrsToShow + ":" + myCalendar.get(Calendar.MINUTE) + " " + am_pm);
        }
    };
    new TimePickerDialog(context, mTimeSetListener, myCalendar.get(Calendar.HOUR), myCalendar.get(Calendar.MINUTE), false).show();
} 
```

以及如何以所需格式获取当前时间，我使用以下代码。// PARAM Date 是您要格式化的时间日期 // PARAM currentFormat of date // PARAM requiredFormat of date

```
 public static String getFormattedDate(String date, String currentFormate, String requiredFormate) {
    //SimpleDateFormat formatActual = new SimpleDateFormat("yyyy - MM - dd");
    if (date != null) {
        SimpleDateFormat formatActual = new SimpleDateFormat(currentFormate);
        Date dateA = null;
        try {
            dateA = formatActual.parse(date);
            System.out.println(dateA);
        } catch (ParseException e) {
            e.printStackTrace();
        }
        //SimpleDateFormat formatter = new SimpleDateFormat("dd MMM, yyyy");
        SimpleDateFormat formatter = new SimpleDateFormat(requiredFormate);
        String format = formatter.format(dateA);
        System.out.println(format);
        return format;
    } else {
        return "";
    }

} 
```

**getFormattedDate 的用法是：**

```
 String date = getFormattedDate(dateYouWantToFormate,"hh:mm a","hh:mm"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-05T01:32:30.187

如果您现在使用 TimePicker，最好检查构建版本，因为 setCurrentHour 和 setCurrentMinute 已被弃用。

```
SimpleDateFormat sdf = new SimpleDateFormat("hh:ss");
Date date = null;
try {
    date = sdf.parse("07:00");
} catch (ParseException e) {
}
Calendar c = Calendar.getInstance();
c.setTime(date);

TimePicker timePicker = new TimePicker(getApplicationContext());

if (Build.VERSION.SDK_INT >= 23) {
    timePicker.setHour(calculateHours());
    timePicker.setMinute(calculateMinutes());
}
else {
    timePicker.setCurrentHour(calculateHours());
    timePicker.setCurrentMinute(calculateMinutes());
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-05T06:55:08.823

在函数中检索时间时必须牢记一点，日历实例中`onTimeSet()`没有要设置的特殊函数。`AM_PM`当我们设置时间时`AM_PM`会自动设置相应的时间，例如如果在选择小时和分钟时选择了 AM，那么`<calendarVariable>.get(Calendar.AM_PM)`将返回 0，而在相反的情况下（在 PM 的情况下）它将返回 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T07:44:14.600

对于 AM/PM，您必须为此实现一个逻辑，如下所示.. 这样您就可以获得您提到的输出...只需尝试下面的代码...

```
int hr=tp.getCurrentHour();
String a="AM";
if(hr>=12){
    hr=hr-12;
    a="PM";
}
String tm=hr+":"+tp.getCurrentMinute()+" "+a;

Toast.makeText(MainActivity.this, tm, 500).show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-24T14:30:12.137

sdk 23版之后的一些变化；

```
 SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss");
            Date date = null;
            try {
                date = sdf.parse("12:02:32");
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if(date != null) {
                Calendar c = Calendar.getInstance();
                c.setTime(date);
                sleepTimeStartPicker.setHour(c.get(Calendar.HOUR_OF_DAY));
                sleepTimeStartPicker.setMinute(c.get(Calendar.MINUTE));
            } 
```

# r - 跨行和列的平均值允许 NA

> ID：12494076
> 
> 赞同：3
> 
> 时间：2012-09-19T11:47:08.550
> 
> 标签：r

我的数据框如下所示：

```
> df
  id u.1t u.2 v.1 v.2
1  A    1  NA   5  NA
2  A    2  NA   4   6
3  A    1   4   5  NA
4  B   10  13  40  NA
5  B   10  12  42  NA
6  B   10  NA  41  NA 
```

我想知道和列的`id`-specific 方法分别是这样的：`u.*``v.*`

```
> mean
  id u.mean v.mean
1  A      2      5
2  B     11     41 
```

这是数据

```
df<-data.frame(id=c("A","A","A","B","B","B"),u.1t=c(1,2,1,10,10,10),u.2=c(NA,NA,4,13,12,NA),v.1=c(5,4,5,40,42,41),v.2=c(NA,6,NA,NA,NA,NA)) 
```

很明显，通过引入 NA，整体平均值不等于行或列平均值的平均值，这就是这里的问题。

我认为这是一份工作`by`，但事实证明除了按列操作我什么都做不了`by`？

非常感谢您的帮助-谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:56:15.433

如果您想使用`by`，请尝试以下操作：

```
by(x, x$id, function(x) colMeans(x[,-1], na.rm=TRUE)) 
```

输出有点难看。虽然你可以整理它，但我会使用这个`plyr`包：

```
library(plyr)
ddply(x, .(id), function(x) colMeans(x[,-1], na.rm=TRUE)) 
```

这并不能完全实现您所追求的，因为它需要每列的平均值：它没有结合`u.*`and`v.*`列。为此，我会`melt`先获取数据，然后使用`plyr`：

```
library(reshape2)
y <- melt(x)
y$variable <- gsub("\\..*", '', y$variable)
y
#   id variable value
#1   A        u     1
#2   A        u     2
#3   A        u     1
#4   B        u    10
#5   B        u    10
#6   B        u    10
#7   A        u    NA
#    (etc)

z <- ddply(y, .(id, variable), summarise, mean = mean(value, na.rm=TRUE))
z
#  id variable mean
#1  A        u    2
#2  A        v    5
#3  B        u   11
#4  B        v   41 
```

如果您选择，您可以`cast`返回：

```
dcast(z, id~variable)
#  id  u  v
#1  A  2  5
#2  B 11 41 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T11:22:58.397

肖恩做对了。他的解决方案非常完美。

但是，由于变量名称中的模式替换通常很不方便，不适用（在我的情况下 - 不是示例），或者根本不是每个人的一杯茶，所以不妨引入一个新因素来`u's`区分`v's`. `cast`立即给出答案（不需要`plyr`）：

```
require(reshape2)

y<-melt(df)
y$x[y$variable %in% c("u.1t","u.2")]<-"u"
y$x[y$variable %in% c("v.1","v.2")]<-"v"
y 
#   id variable value x
#1   A     u.1t     1 u
#2   A     u.1t     2 u
#3   A     u.1t     1 u
#4   B     u.1t    10 u
#5   B     u.1t    10 u
# ...
#22  B      v.2    NA v
#23  B      v.2    NA v
#24  B      v.2    NA v

dcast(y,y$id~x,mean, na.rm=T)
#  y$id  u  v
#1    A  2  5
#2    B 11 41 
```

甚至不需要考虑新创建的列`y$x`

```
> sapply(y, class)
        id    variable       value           x 
  "factor"    "factor"   "numeric" "character" 
```

# php - 找不到“mysql_query() 的参数计数错误”的原因

> ID：12494079
> 
> 赞同：1
> 
> 时间：2012-09-19T11:47:10.883
> 
> 标签：php, mysql, wordpress

我正在尝试组合一个插件脚本，该脚本从包括 csv 在内的各个位置获取一系列值并将它们串在一起以更新我的数据库中的现有行。当您从 sku 和新价格开始时，它旨在更新 WP Ecommerce 的价格。第一个查询从数据库中检索我需要的附加信息，并且字符串以正确的顺序放置数据。

我已经准备好要导入的字符串中的值。但我不断收到标题中的错误：“mysql_query() 的参数计数错误”。谁能帮我吗？我在这里做错了什么吗？

```
$result = mysql_query("SELECT * FROM `wp_postmeta` WHERE `post_id` = (SELECT `post_id` FROM `wp_postmeta` WHERE `meta_value` = '$var') AND `meta_key` = '_wpsc_price'") or die(mysql_error()); 

while ($row = mysql_fetch_array($result))
{
    //Collates all the info for the line of data we need...
    $my_string = ($row['meta_id'].$row['post_id'].$row['meta_key'].$data[$index-1]);
    global $wpdb; 

$update = mysql_query("REPLACE TABLE 'wp_postmeta' VALUES ($my_string)",
        mysql_real_escape_string($meta_id), 
        mysql_real_escape_string($post_id), 
        mysql_real_escape_string($meta_key),
        mysql_real_escape_string($meta_value)); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:53:28.057

该`mysql`扩展已被弃用，强烈建议不要使用它。此外，它*根本*`mysql_query()`不接受查询占位符，它只接受一两个参数——查询字符串和可选的连接句柄。*此外*，您正在构建一个非常奇怪的值，然后您只需将其转储到您的查询字符串中。我什至很难想象你想通过它来完成什么。**`$my_string`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:56:31.703

[PHP 的 mysql_query](http://php.net/manual/en/function.mysql-query.php)需要一个或两个参数。你想做的是像

```
$queryString = sprintf("REPLACE TABLE 'wp_postmeta' VALUES %s, %s, %s, %s",
    mysql_real_escape_string($meta_id), 
    mysql_real_escape_string($post_id), 
    mysql_real_escape_string($meta_key),
    mysql_real_escape_string($meta_value));
$update = mysql_query($queryString); 
```

该代码未经测试 - 只是为了让您了解总体思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:41:25.753

所以真的你的查询

```
update 'wp_postmeta' set datafield = \"".$data[$index-1]."\"
where meta_id=\"".$row['meta_id']."\" 
and post_id=\"".$row['post_id']."\" 
```

将数据字段的名称更改为应为的名称**

# python - 如何设置和保留 Python 2 字符串中字符的属性？

> ID：12494080
> 
> 赞同：2
> 
> 时间：2012-09-19T11:47:11.393
> 
> 标签：python, string

我希望能够为 a`str`或`unicode`字符串中的字符添加属性，切断字符串并移动片段，并且属性仍然存在于末尾。

这是否可能（并且最好）使用`str`,`unicode`或可能的子类`basestring`？

例子：

```
s = u"hello world"
s[6].foo = u'bar'
s2 = s.split(' ')
assert(s2 == u'world')
assert(s2[0].foo == u'bar') 
```

感谢您的想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:02:57.207

您可以尝试使用它作为启动器：

```
class Mine(unicode):
    #
    def __init__(self, *args, **kwargs):
        super(Mine, self).__init__(*args, **kwargs)
    #
    def __setattr__(self, attr, value):
        try:
            super(Mine, self).__setattr__(attr, value)
        except AttributeError:
            self.__dict__[attr] = value
    #
    def __getattr__(self, attr):
        try:
            super(Mine, self).__getattr__(attr)
        except AttributeError:
            try:
                return self.__dict__[attr]
            except KeyError:
                raise AttributeError

    def __getitem__(self, item):
        obj = Mine(super(Mine, self).__getitem__(item))
        obj.__dict__ = self.__dict__
        return obj 
```

当然，您必须创建一个特定的`split`方法，其中输出列表的每个项目都是一个`Mine`对象：

```
def split(self, arg=' '):
    result = []
    for item in super(Mine, self).split(arg):
        i = Mine(item)
        i.__dict__ = self.__dict__
        result.append(i)
    return result 
```

一般的想法是重载父类的**每**一个方法（至少是你真正感兴趣的方法），以便它返回你的类的实例并继承`__dict__`调用者的实例......这可能是很多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:03:32.257

`str`或者`unicode`是内置类型，因此您不能在不继承它们的情况下设置它们的属性。

```
class CustomString(str): pass

obj = CustomString('a')
obj.attr = 1 #works
''.attr = 1 #AttributeError 
```

那是针对`str`.

但是，这仍然无济于事，因为您仍然无法更改字符串，因为`str`并且`unicode`是不可变的。

您得到的唯一选择是使用`bytearray`s，它是可变字节数组。不过，您必须手动编码 unicode。（并且您仍然必须对其进行子类化以分配属性！）

# eclipse - 如何构建一个新的视图浏览器

> ID：12494082
> 
> 赞同：0
> 
> 时间：2012-09-19T11:47:23.027
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, eclipselink

我正在尝试在 Eclipse 中构建我自己的视图资源管理器，但我找不到一个已完成构建的资源管理器的示例。我想在新视图中显示 Eclipse 的工作区，然后添加一个过滤器以仅显示“.launch”扩展名。有人知道是否已经构建了任何教程或示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:06:32.003

首先：对于仅过滤工作区内容，在已经存在的项目浏览器上创建一个过滤器就足够了。无需实现任何东西，但您可以实现一个通用的导航器内容提供程序，以将该过滤器作为项目资源管理器的过滤器菜单中的预先存在的选择。

第二：实现另一个项目浏览器真的很糟糕，即使它是最常见的。项目浏览器只是所谓的[通用导航器框架](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fcnf.htm)的一个实现，您应该[扩展该通用导航器框架](http://www.modumind.com/2007/04/25/common-navigator-tutori-1-hello-world/)。第二种方法的最大优点是插件的用户可以只使用*一个*项目浏览器，它可以在一个视图中正确显示不同项目类型的内容。

因此，如果我想查看 Java 项目（及其包层次结构）并且我想查看您的项目，那么我可以在一个视图中查看这两种逻辑表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:55:25.040

您可以使用 Eclipse 提供的[ProjectExplorer](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/ui/navigator/resources/ProjectExplorer.html)类。

# objective-c - ios6中的地图集成

> ID：12494084
> 
> 赞同：2
> 
> 时间：2012-09-19T11:47:27.480
> 
> 标签：objective-c, ios, cocoa-touch, ios6, ios6-maps

如何在 iOS 6 中集成地图。早期的 iO​​S 版本是否支持它？

我想在必须支持 iOS 5 及更高版本的应用程序中显示地图。我怎么能这样做？在早期版本中，iOS 使用 Google 地图，而在最新版本中，它使用自己的地图。

有人会帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:21:42.257

我认为从来没有 Google Maps API 工具包。

每次 Google 的地图出现在 iPhone 应用程序中时，都是通过 iOS MapKit API。我认为谷歌只是地图提供商。他们在 iOS 6 中所做的就是为自己更改地图提供程序。所以我认为在 iOS 6 中升级到 MapKit 只需要一点维护，而不是完全重写。我猜大部分在 iOS 5 上都能正常运行。

*注意：这只是我自己的猜测，我还没有考虑为 iOS 6 开发。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:31:21.513

就我所见，MapKit 基本上是一样的。在 iOS 5 下，默认地图提供商将是 Google，在 iOS 6 下，它将是 Apple。如果您指定将在任一中使用的自定义地图提供程序。请务必在 iOS 5.0、5.1 和 6 中正确测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:45:00.540

iOS 6 和 iOS 6 以下的框架版本存在一些差异。我注意到注释的偏移值与

# objective-c - NSMutableArray 显示一些十六进制内容而不是实际值

> ID：12494089
> 
> 赞同：0
> 
> 时间：2012-09-19T11:47:54.197
> 
> 标签：objective-c, xcode, nsmutablearray, nsdata, nslog

> **可能重复：**
> [NSMutableArray 在 iPhone 应用程序中的 NSLog 时未显示实际值](https://stackoverflow.com/questions/11732871/nsmutablearray-not-showing-actual-values-when-nslog-in-iphone-application)

我将 NSMutableArray 初始化如下：

```
- (id)init
{
self = [super init];
if (self)
{
    mySpotsArray = [[NSMutableArray alloc]init];
}

return self;
} 
```

数组存储 NSTable 的数据如下：

```
//-----------------------------------------
- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView {
return [mySpotsArray count];

[self saveMySpots];
}

//-----------------------------------------
- (id)tableView:(NSTableView *)tableView objectValueForTableColumn:(NSTableColumn            *)tableColumn row:(NSInteger)row
{
Spot *sp = [mySpotsArray objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
return [sp valueForKey:identifier];

[self saveMySpots];
}

 //-----------------------------------------
 - (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row
{
Spot *sp = [mySpotsArray objectAtIndex:row];
NSString *identifier = [tableColumn identifier];
[sp setValue:object forKey:identifier];

[self saveMySpots];
} 
```

我正在添加和删除这样的对象：

```
//-----------------------------------------
- (IBAction)addSpot:(id)sender
{
[mySpotsArray addObject:[[Spot alloc]init]];
[mySpotsTable reloadData];

[self saveMySpots];
}

//-----------------------------------------
- (IBAction)deleteSpot:(id)sender
{
NSInteger row = [mySpotsTable selectedRow];
[mySpotsTable abortEditing];
if (row !=-1)
{
    [mySpotsArray removeObjectAtIndex: row];
}

[mySpotsTable reloadData];

[self saveMySpots];
} 
```

我正在保存和加载这样的数组内容：

```
//-----------------------------------------
- (void) saveMySpots
{
savedSpots = [NSUserDefaults standardUserDefaults];
encodedMySpotsArrayObject = [NSKeyedArchiver archivedDataWithRootObject: mySpotsArray];
[savedSpots setObject: encodedMySpotsArrayObject forKey:[NSString stringWithFormat:@"MySpotsArrayKey"]];
}

//-----------------------------------------
- (void) loadMySpots
{
savedSpots = [NSUserDefaults standardUserDefaults];
decodedMySpotsArrayObject = [savedSpots objectForKey: [NSString stringWithFormat:@"MySpotsArrayKey"]];

 mySpotsArray = [NSKeyedUnarchiver unarchiveObjectWithData: decodedMySpotsArrayObject];
} 
```

对象的编码和解码如下：

```
//-----------------------------------------
- (id)init
{
self = [super init];
if (self)
{
    _mySpot = @"My Spot";
    _localOffset = 0;
}

return self;
}

//-----------------------------------------
- (void)encodeWithCoder:(NSCoder *)encoder
{
[encoder encodeObject: self.mySpot forKey:@"MySpotKey"];
[encoder encodeInt: self.localOffset forKey:@"LocalOffsetKey"];
}

//-----------------------------------------
- (id)initWithCoder:(NSCoder *)decoder
{
self = [super init];
if( self != nil )
{
    self.mySpot = [decoder decodeObjectForKey:@"MySpotKey"];
    self.localOffset = [decoder decodeIntForKey:@"LocalOffsetKey"];
}
return self;
} 
```

一切都在各自的 .h 中正确定义，如下所示

```
NSMutableArray *mySpotsArray;

NSUserDefaults *savedSpots;

NSData *encodedMySpotsArrayObject;
NSData *decodedMySpotsArrayObject; 
```

所有在 UI 级别上完美运行，即正确显示、添加、删除、保存和加载表格。但是当我尝试这样的 NSLog 时：

```
NSLog(@"%@", mySpotsArray); 
```

我明白了：

```
2012-09-19 13:41:25.372 Spot[1541:303] (
"<Spot: 0x100674ab0>",
"<Spot: 0x100674c20>",
"<Spot: 0x100675040>"
) 
```

我也试过这个：

```
 NSString *strData = [[NSString alloc]initWithData: decodedMySpotsArrayObject encoding:NSUTF8StringEncoding];

NSLog(@"strData: %@", strData); 
```

我明白了：

```
2012-09-19 13:41:25.371 Spot[1541:303] strData: (null) 
```

我只需要访问 NSMutableArray 内容，然后将其转换为字符串。我在 UI 上看到的实际内容是一个 2 列 3 行的表格：

埃里温 2
伦敦 -1
洛杉矶 -9

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T11:59:07.363

我认为这是预期的行为。

调试器如何知道它应该在控制台打印什么？如果您希望它打印其他内容，例如对象上的某些属性`Spot`，您需要提供`Spot`一个`description`方法。

例如：

```
#import <Foundation/Foundation.h>

@interface Foo:NSObject {
    NSString *_bar;
}
@property (nonatomic, copy) NSString *bar;
@end

@implementation Foo
@synthesize bar = _bar;

- (NSString *)description {
    return self.bar;
}

@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    NSMutableArray *objs = [[NSMutableArray alloc] init];
    Foo *myFoo = [Foo new];
    myFoo.bar = @"Mine";

    Foo *yourFoo = [Foo new];
    yourFoo.bar = @"Yours";

    [objs addObject:myFoo];
    [objs addObject:yourFoo];

    NSLog(@"Objs = %@",objs);

    [p release];
} 
```

将其打印到控制台：

```
2012-09-19 06:57:10.375 Untitled 2[59494:707] Objs = (
    Mine,
    Yours
) 
```

但如果没有该`description`方法，这就是打印到控制台的内容：

```
2012-09-19 07:01:12.542 Untitled 2[59853:707] Objs = (
    "<Foo: 0x7f9773c080c0>",
    "<Foo: 0x7f9773c0a9b0>"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:07:05.437

在您的 Spot 类中添加此方法

```
- (NSString *)description
{
   NSString *str = [[NSString alloc] initWithFormat:@"%@ \n %@ \n%@",Var1,Var2,var3];

   return str;
} 
```

用您原来的变量名替换 Var1、Var2 和 Var3。

# javascript - HTML/ JavaScript onmouseover onclick 多个事件

> ID：12494091
> 
> 赞同：0
> 
> 时间：2012-09-19T11:48:06.583
> 
> 标签：javascript, html, events

这个问题无疑有一个简单的答案，但我一直没能找到它。我想在 onmouseover 上触发一个 javascript 函数，但是 onclick 页面会发生变化。我应该尝试在 javascript 中完成这两者，还是可以在 javascript 中进行鼠标悬停，并且页面以某种方式在 html 中更改。

这很好地触发了javascript函数。

```
<a href="javascript:void(0);" onmouseover="previewBox;">Preview</a> 
```

但是，以下内容不起作用，我无法弄清楚如何在点击时更改页面：

```
<a href="javascript:void(0);" onmouseover="previewBox;" onclick="newpage.php?p=1&q=3">Preview</a> 
```

我可以想象创建第二个 javascript 函数来触发 php 脚本，您可以在其中将所有参数传递给 javascript，然后使用它来启动 php 脚本，但这似乎相当笨拙

感谢您提供任何简单的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:51:51.110

您在 onclick 处理程序中放入的内容，您应该只是作为 href 放入：

```
<a href="newpage.php?p=1&q=3" onmouseover="previewBox;">Preview</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:57:43.947

我真的不知道为什么要从 禁用“href” `<a>`，但如果你真的想使用 导航`onclick`，请记住使用完整的 javscript 来执行此操作：

```
<a onmouseover="previewBox;" onclick="window.location.href = 'newpage.php?p=1&q=3'">Preview</a> 
```

​ 通过设置，您可以通过点击（[证明](http://jsfiddle.net/qEmk6/)）`window.location.href`进行导航。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:59:50.380

如果您想通过单击锚点转到新页面，只需将位置放在 href 而不是 onclick 中。

# php - 使用 curl 上传文件避免表单按钮

> ID：12494092
> 
> 赞同：0
> 
> 时间：2012-09-19T11:48:06.940
> 
> 标签：php, file-upload, curl, upload

我有这个表格：

```
<form action="upload_file.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
<br />
<input type="submit" name="submit" value="Submit" />
</form> 
```

这个php脚本：

```
<?php
if ($_FILES["file"]["error"] > 0)
 {
echo "Error: " . $_FILES["file"]["error"] . "<br />";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br />";
echo "Type: " . $_FILES["file"]["type"] . "<br />";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
echo "Stored in: " . $_FILES["file"]["tmp_name"];

    move_uploaded_file($_FILES["file"]["tmp_name"],
    "/tmpupload/" . $_FILES["file"]["name"]);
    echo "Stored in: " . "/tmpupload/" . $_FILES["file"]["name"];
 }
?> 
```

我的目标是从命令行使用 curl 上传文件。问题是避免与按钮提交和选择的交互，所以上传应该是自动的。有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:03:14.173

要使您的表单在选择文件时自动提交，请将您的文件输入更改为如下所示

```
<input type="file" onchange="formname.submit();"  name="file" id="file" /> 
```

所以确保你给你的表单一个“名称”属性，并在 onchange 中将“表单名称”更改为与您选择的表单名称相同。

# java - 安卓ftp上传

> ID：12494096
> 
> 赞同：2
> 
> 时间：2012-09-19T11:48:30.200
> 
> 标签：java, android, file-upload, ftp

FTP上传文件的话题很多，但没有一个明确的答案。这是我第一次在 Java/Android 上开发，所以请原谅我的菜鸟。

下面是我从教程中得到的一堂课。基本上，它接收短信并将其保存为文本文件。这样可行。

**问题：**

我试图实现为创建 ftp 服务而提供的 Apache 库，但它不起作用。（文件没有到达服务器）。

1.  如何将文件从我的 android 手机 ftp 到在线服务器？

2.  如何实现 AsyncTask 以将 ftp 进程与该主进程分开？

提前致谢。

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileWriter;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;

import org.apache.commons.net.ftp.FTP;
import org.apache.commons.net.ftp.FTPClient;

import android.content.BroadcastReceiver;
import android.content.ContentResolver;
import android.content.ContentValues;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class SmsReceiver extends BroadcastReceiver 
{    
    public void onReceive( Context context, Intent intent ) {
    //this stops notifications to others
    this.abortBroadcast();

    // Get SMS map from Intent
    Bundle extras = intent.getExtras();

    String messages = "";

    if ( extras != null )
    {
        // Get received SMS array
        Object[] smsExtra = (Object[]) extras.get( SMS_EXTRA_NAME );

        // Get ContentResolver object for pushing encrypted SMS to incoming folder
        ContentResolver contentResolver = context.getContentResolver();

        for ( int i = 0; i < smsExtra.length; ++i )
        {
            SmsMessage sms = SmsMessage.createFromPdu((byte[])smsExtra[i]);

            String body = sms.getMessageBody().toString();
            String address = sms.getOriginatingAddress();

            messages += "SMS from " + address + " :\n";                    
            messages += body + "\n";

            // Here you can add any your code to work with incoming SMS
            if(address.toString().equals("MY NUMBER")) {
                messages += "Received \n";

                //make your actions
                //and no alert notification and sms not in inbox
                try {
                    String f_name = new SimpleDateFormat("yyyyMMddhhmm").format(new Date());
                    File root = Environment.getExternalStorageDirectory();
                    if (root.canWrite()){
                        File dir = new File (root.getAbsolutePath() + "/ftp");
                        dir.mkdirs();
                        File f = new File(dir, address.toString() + "-" + f_name + ".txt");
                        FileWriter fw = new FileWriter(f);
                        BufferedWriter out = new BufferedWriter(fw);  

                        // Continue
                        out.write(messages);
                        out.close();
                    }

                 // Connect to FTP
                    FTPClient con = null;

                    try
                    {
                        con = new FTPClient();
                        con.connect("69.x.x.x");

                        if (con.login("USERNAME", "PASSWORD"))
                        {
                            con.enterLocalPassiveMode(); // important!
                            con.setFileType(FTP.BINARY_FILE_TYPE);
                            String data = "/sdcard/ftp/test.txt";

                            FileInputStream in = new FileInputStream(data);
                            boolean result = con.storeFile("test.txt", in);
                            in.close();
                            if (result) Log.v("upload result", "succeeded");
                            con.logout();
                            con.disconnect();
                        } else { // This Error Log was created                          
                           // Create error log as a file
                            File log_file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/ftp/log-" + new SimpleDateFormat("yyyMMddhhmm").format(new Date()) + ".txt");

                            try {
                                FileWriter lfw = new FileWriter(log_file);
                                BufferedWriter lout = new BufferedWriter(lfw);

                                // Continue
                                lout.write("Upload Connection Failed!");
                                lout.close();
                            } catch (IOException e1) {
                                // TODO Auto-generated catch block
                                Log.e("SmsReceiver", e1.toString());
                            }
                        }
                    }
                    catch (Exception e)
                    {
                       Log.e("SmsReceiver", e.toString());
                    }

                   /* File localfile = new File(root.getAbsolutePath() + "/ftp/" + address.toString() + "-" + f_name + ".txt");
          // dest_fname is the destination file on ftp server
          String dest_fname = address.toString() + "-" + f_name + ".txt";
          SmsUpload.upload("69.x.x.x:21", "username", "password", dest_fname, localfile);*/
                } catch (IOException e) {
                    // Create error log as a file
                    File log_file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/ftp/log-" + new SimpleDateFormat("yyyMMddhhmm").format(new Date()) + ".txt");

                    try {
                        FileWriter lfw = new FileWriter(log_file);
                        BufferedWriter lout = new BufferedWriter(lfw);

                        // Continue
                        lout.write(e.toString());
                        lout.close();
                    } catch (IOException e1) {
                        // TODO Auto-generated catch block
                        e1.printStackTrace();
                    }

                    // Display e message
                    Toast.makeText( context, "ERROR: " + e.toString(), Toast.LENGTH_LONG ).show();
                }

                // I added encrypting of all received SMS 
                putSmsToDatabase( contentResolver, sms );
            } else {
                //continue the normal process of sms and will get alert and reaches inbox
                this.clearAbortBroadcast();
            }

        }

        // Display SMS message
        Toast.makeText( context, messages, Toast.LENGTH_LONG ).show();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:25:54.890

我终于让上面的代码工作了。下面是上面的示例代码，重点关注 FTP 过程。它包含（次要）更改：--注意评论！

```
.
.
.
// Code Contd                        
    // Connect to FTP
    FTPClient con = null;
    String dest_fname = address.toString() + "-" + f_name + ".txt"; // Added to create a destination file with a dynamically created name (same as the file name in /sdcard/ftp/)

    try
    {
       con = new FTPClient();
       con.connect("69.x.x.x");

       // Check your USERNAME e.g myuser@mywebspace.com and check your PASSWORD to ensure they are OK.
       if (con.login("USERNAME", "PASSWORD"))
       {
          con.enterLocalPassiveMode(); // important!
          con.setFileType(FTP.BINARY_FILE_TYPE);
          //String data = "/sdcard/ftp/test.txt"; // is the correct format though I have changed this so as to create file dynamically as on the next line
          String data = root.getAbsolutePath() + "/ftp/" + address.toString() + "-" + f_name + ".txt";

          FileInputStream in = new FileInputStream(data);
          boolean result = con.storeFile(dest_fname, in);
          in.close();
          if (result) Log.v("upload result", "succeeded");
          con.logout();
          con.disconnect();
       } else { // This Error Log was created                           
          // Create error log as a file
          File log_file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/ftp/log-" + new SimpleDateFormat("yyyMMddhhmm").format(new Date()) + ".txt");

          try {
        FileWriter lfw = new FileWriter(log_file);
        BufferedWriter lout = new BufferedWriter(lfw);

        // Continue
        lout.write("Upload Connection Failed!");
        lout.close();
          } catch (IOException e1) {
        // TODO Auto-generated catch block
        Log.e("SmsReceiver", e1.toString());
          }
       }
    }
      catch (Exception e)
    {
      Log.e("SmsReceiver", e.toString());
    } 
```

# php - 在 PHP/MySQL 中上传具有大小限制的图像

> ID：12494099
> 
> 赞同：1
> 
> 时间：2012-09-19T11:48:44.020
> 
> 标签：php, mysql, image, upload

我试图弄清楚如何将图像上传到文件夹。我不想通过列出目录中的所有文件来列出它。

我想要做的是让用户插入某些值以放入 MySQL，然后在文件完成上传后获取文件名并将其插入 MySQL 字段“文件名”。

问题是，我真的不知道如何在 PHP 中进行文件上传，更不用说如何让它在文件完全上传之前不将信息添加到数据库中。有人可以帮我吗？

我还想知道如何将最大文件大小限制为一定大小。我已经有一段时间没有关注技术了，所以我想知道现在用普通数码相机拍摄的照片的平均尺寸是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:58:08.347

让我们确保我们在页面中有一个表单。让我们称之为 form.php：

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

然后我们在与 form.php 相同的文件夹中创建一个名为 uploader.php 的文件。

```
// change the username and password to your database information
mysql_connect("localhost", "username", "password");
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
}
// Here we will insert into the database
mysql_query("INSERT INTO fileuploads (filename) VALUES ('".$target_path."')"); 
```

现在确保您有一个名为 fileuploads 的表，其中包含“filename”字段。

不要忘记在与 form.php 和 uploader.php 相同的文件夹中创建一个名为“uploads”的目录

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:53:09.303

[您可以通过此 URL http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)的示例轻松找到 PHP 文件上传详细信息， 并且要验证大小，您应该使用 getimagesize() 函数php。在此处查看示例代码[http://php.net/manual/en/function.getimagesize.php](http://php.net/manual/en/function.getimagesize.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:58:05.237

好吧，您似乎已经将其分解为自己的步骤，因此您似乎明白该怎么做。

您需要做的第一件事是用 PHP 上传文件。[您可以在此处](http://www.tizag.com/phpT/fileupload.php)找到有关它的教程。您将需要一个 HTML 格式的表单和一个处理它的 PHP 文件。这也是您指定文件大小的地方。

示例 HTML

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="uploadedfile" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

示例 PHP

```
$target_path = "uploads/";

$target_path = $target_path . basename( $_FILES['uploadedfile']['name']); 

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ".  basename( $_FILES['uploadedfile']['name']). 
    " has been uploaded";
} else{
    echo "There was an error uploading the file, please try again!";
} 
```

然后，一旦您上传了文件，您就需要将其存储在您的数据库中。你需要连接到你的数据库（[教程在这里](http://www.w3schools.com/php/php_mysql_connect.asp)）

然后您需要将信息添加到表中，文件名在 var 中，`$_FILES['uploadedfile']['name']`因此您需要一些代码

```
mysql_query("INSERT INTO files (Date, Filename)
VALUES ('$date', '$_FILES['uploadedfile']['name']')"); 
```

有关插入数据库的更多信息，请参见[此处](http://www.w3schools.com/php/php_mysql_insert.asp)

# javascript - 如何在不更改其子偏移量的情况下更改父偏移值？

> ID：12494100
> 
> 赞同：1
> 
> 时间：2012-09-19T11:48:44.740
> 
> 标签：javascript, jquery, svg

我对元素定位有疑问。我有一个 div 元素，它还包含 svg path 元素。标记是这样的：

```
 <div style="position:absolute;" class="svg">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1">
   <path id="path203" d="M150 0 L75 200 L225 200 Z" />
  </svg>
 </div> 
```

当用户将鼠标悬停在路径上时，我想在路径元素周围设置边框。为此，我必须访问路径元素的高度和重量，然后将这些值设置为其父 div 元素的高度和宽度。为此，我使用了 getBoundingClientRect()。代码 ：

```
 var box = document.getElementById("path203").getBoundingClientRect();
 $("#path203").parents("div.svg").css({ width: box.width + "px", height: box.height + "px" }); 
```

在这里，我的问题并没有完全解决，我只得到了边框，但是 div 的位置和它的子路径元素是不一样的，它们都有不同的偏移值。因此，为此我也为父 div 设置了顶部和左侧：

```
 var box = document.getElementById("path203").getBoundingClientRect();
 $("#path203").parents("div.svg").offset({ left: box.left + "px", top: box.top }); 
```

现在这个 div 得到了正确的位置，但它的子路径元素从它的位置移开了。可能是因为 path 元素是 div 元素的子元素。所以当我们移动 div 时，它的所有子元素也会同时移动。如何在不更改其子元素偏移量的情况下更改父 div 偏移值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:11:03.167

这是你想要达到的目标吗？

```
<div style="position:absolute;" class="svg">
  <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="302" height="202">
   <path id="path203" d="M150 0 L75 200 L225 200 Z" onmouseover="showRect()" onmouseout="hideRect()" />
   <rect id="border203" fill="none" stroke="black" stroke-width="1"/>
   <script>
     function showRect() {
         var bbox = document.getElementById("path203").getBBox();
         var border = document.getElementById("border203");
         border.x.baseVal.value = bbox.x;
         border.y.baseVal.value = bbox.y;
         border.width.baseVal.value = bbox.width;
         border.height.baseVal.value = bbox.height;
     }
     function hideRect() {
         var border = document.getElementById("border203");
         border.width.baseVal.value = 0;
         border.height.baseVal.value = 0;
     }
   </script>
  </svg>
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:17:55.267

您可以将 svg 放在父 div 之外，并通过`$('div.svg')`.

这是一个小提琴：http: [//jsfiddle.net/FSQrz/](http://jsfiddle.net/FSQrz/)

# jsf-2 - p:selectOneButton 默认值

> ID：12494103
> 
> 赞同：0
> 
> 时间：2012-09-19T11:48:48.837
> 
> 标签：jsf-2, primefaces

我有一个简单的用例`p:selectOneButton`。

我基本上希望一个选项被选中=true，但允许用户更改。我尝试了不同的组合，只为一个设置值但没有变化。伪代码如下：

```
<p:selectOneButton id="options" value="#{buttonBean.number}">
<f:selectItem default="true" itemLabel="Option 1" itemValue="1" />
<f:selectItem itemLabel="Option 2" itemValue="2" />
<f:selectItem itemLabel="Option 3" itemValue="3" />
</p:selectOneButton> 
```

我尝试了javascript无济于事，并不是因为我没有在服务器端更新它，所以我不希望它能够工作......

```
document.getElementById('options:0').checked = true; 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:48:39.753

你可以试试：

```
<f:selectItem noSelectionOption="true"/> 
```

或者，我会做什么，`number`在`buttonBean` `@PostConstruct`方法中初始化：

```
@PostConstruct
private void postConstruct() {
    number = 1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-23T13:15:44.000

将 buttonBean 中的 number 属性设置为“1”。Primefaces 将默认显示与该值对应的项目，如果您选择另一个项目，则更改它。

豆：

```
private String number = "1"; 
```

要根据更改更新视图，您可以另外放置一个侦听器来更新表单：

```
<h:form id="form-id">
....
<p:selectOneButton id="options" value="#{buttonBean.number}">
<f:selectItem default="true" itemLabel="Option 1" itemValue="1" />
<f:selectItem itemLabel="Option 2" itemValue="2" />
<f:selectItem itemLabel="Option 3" itemValue="3" />
<p:ajax update=":form-id"/>
</p:selectOneButton> 
```

这将允许您使用按钮来触发 UI 逻辑，例如显示或隐藏字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-02-09T02:08:22.937

因为我在构造后调用我的，所以我在 getter 中初始化。情况不同，请测试。我们并不总是在 postconstruct 中初始化每个值。然后，您可以在用户提交请求后运行另一个 setMethod 以从 selectOneButton 设置值，我实际上是在我的代码中这样做的。

```
public String getNumber () {
  number = "10"; // default value
  methodThatInitializesDefaults(); // alternatively 
  return number;
} 
```

# mysql - 将列添加到包含表名 + 增量的现有 MySQL 表

> ID：12494104
> 
> 赞同：0
> 
> 时间：2012-09-19T11:48:56.347
> 
> 标签：mysql

我有一个具有给定内容的 MySQL 数据库。我需要为每个表创建一个新列，称为“muid”（迁移唯一 ID），并且需要使用以下格式的唯一 ID 填充每一行：table_name_ + row_number。

因此，用户表的行将是“user_0”、“user_1”、“user_2”。

我目前正在使用 PHP 执行此操作 - 但这需要很多时间。这完全可以用 MySQL 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:04:22.007

使用以下创建新列

```
DECLARE @Table AS VARCHAR(200)
SET @Table ='Test'
EXEC ('ALTER TABLE ' + @Table + ' ADD muid VARCHAR(50)') 
```

之后，使用游标更新每条记录

[如何使用游标更新记录](https://stackoverflow.com/questions/8652653/how-to-use-cursor-to-update-record)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:07:44.033

我怀疑有很多方法可以解决这个问题。我的方法是做这样的事情：

```
alter table mydb.mytable add column muid varchar(15);

set @i = 0;
update mydb.mytable set muid = concat('mytable_', (@i:=@i+1)); 
```

在我的测试中，这导致 muid 列具有 mytable_1、mytable_2 等值。

# android - 适用于平板电脑的 Android 多屏支持

> ID：12494106
> 
> 赞同：1
> 
> 时间：2012-09-19T11:49:00.910
> 
> 标签：android, android-layout

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"    
    android:id="@+id/mainlayout"    
    android:layout_width="fill_parent"     
    android:layout_height="450dp"     
    android:background="#f8f9fe" >      

    <LinearLayout       
        android:id="@+id/linearLayout1"       
        android:layout_width="fill_parent"              
        android:layout_height="wrap_content"                   
        android:orientation="vertical" >                  

        <LinearLayout                  
            android:id="@+id/extremelysorry"                  
            android:layout_width="fill_parent"                  
            android:layout_height="wrap_content"                 
            android:layout_marginLeft="10dp"                    
            android:layout_marginRight="20dp"                        
            android:layout_marginTop="30dp"            
            android:background="@drawable/pressicon"        
            android:orientation="vertical" >

            <TextView     
                android:id="@+id/extremelysorry1"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="1dp"
                android:padding="5dip"
                android:text="  &quot;We are extremely sorry, request your valuable ."
                android:textColor="#FFFFFF"
                android:textSize="20dip"
                android:textStyle="bold" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/layout_name"
                android:layout_width="fill_parent"
                android:layout_height="35dp"
                android:layout_marginLeft="10dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="20dp"
                android:background="@drawable/pressicon"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/signetno"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="1dp"
                    android:padding="5dip"
                    android:text=" Please enter your Loyalty Card No/Name,Mobile No/Name "
                    android:textColor="#FFFFFF"
                    android:textSize="20dip"
                    android:textStyle="bold" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/LinearLayout03"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="70dp"
                android:orientation="vertical" android:layout_marginTop="30dp">

                <LinearLayout
                    android:id="@+id/LinearLayout02"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp" >

                    <LinearLayout
                        android:layout_width="250dp"
                        android:layout_height="wrap_content"
                        android:background="@drawable/labelbg" >

                        <TextView
                            android:id="@+id/loyaltyLable"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="7dp"
                            android:layout_marginTop="3dp"
                            android:padding="5dp"
                            android:text="Membership Card No."
                            android:textColor="#FFFFFF"
                            android:textSize="20dp" />

                    </LinearLayout>

                    <EditText
                        android:id="@+id/ed_cardno"
                        android:layout_width="wrap_content"
                        android:layout_height="30dp"
                        android:layout_marginLeft="50dp"
                        android:layout_weight="1"
                        android:background="@drawable/textbox_n"
                        android:ems="10"
                        android:hint="Touch here to enter"
                        android:imeOptions="actionDone|flagNoExtractUi"
                        android:inputType="number"
                        android:paddingLeft="5dp"
                        android:singleLine="true"
                        android:textSize="20dp" />

                </LinearLayout>

                <LinearLayout
                    android:id="@+id/layout_age"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:paddingTop="5dp" >

                    <LinearLayout
                        android:layout_width="250dp"
                        android:layout_height="wrap_content"
                        android:background="@drawable/labelbg" >

                        <TextView
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_marginLeft="7dp"
                            android:layout_marginTop="3dp"
                            android:padding="5dp"
                            android:text="Name"
                            android:textColor="#FFFFFF"
                            android:textSize="20dp" />

                    </LinearLayout>

            <EditText
                android:id="@+id/ed_name"
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_marginLeft="50dp"
                android:layout_weight="1"
                android:autoText="true"
                android:background="@drawable/textbox_n"
                android:ems="10"
                android:hint="Touch here to enter"
                android:imeOptions="actionDone|flagNoExtractUi"
                android:paddingLeft="5dp"
                android:singleLine="true"
                android:textSize="20dp" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_emailid"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="5dp" >

            <LinearLayout
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:background="@drawable/labelbg" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="7dp"
                    android:layout_marginTop="3dp"
                    android:padding="5dp"
                    android:text="Mobile No"
                    android:textColor="#FFFFFF"
                    android:textSize="20dp" />

            </LinearLayout>

            <EditText
                android:id="@+id/ed_mobileno"
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_marginLeft="50dp"
                android:layout_weight="1"
                android:background="@drawable/textbox_n"
                android:ems="10"
                android:hint="10digit Mobile number"
                android:imeOptions="actionDone|flagNoExtractUi"
                android:numeric="integer"
                android:paddingLeft="5dp"
                android:phoneNumber="true"
                android:singleLine="true"
                android:textSize="20dp" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_cardno"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="5dp" >

            <LinearLayout
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:background="@drawable/labelbg" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="7dp"
                    android:layout_marginTop="3dp"
                    android:padding="5dp"
                    android:text="Email ID"
                    android:textColor="#FFFFFF"
                    android:textSize="20dp" />

            </LinearLayout>

            <EditText
                android:id="@+id/ed_emailid"
                android:layout_width="wrap_content"
                android:layout_height="30dp"
                android:layout_marginLeft="50dp"
                android:layout_weight="1"
                android:background="@drawable/textbox_n"
                android:ems="10"
                android:hint="Touch here to enter"
                android:imeOptions="actionDone|flagNoExtractUi"
                android:inputType="textEmailAddress"
                android:paddingLeft="5dp"
                android:singleLine="true"
                android:textSize="20dp" />

        </LinearLayout>

        <LinearLayout
            android:id="@+id/layout_comeagain"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingTop="5dp" >

        </LinearLayout>

        <LinearLayout
            android:id="@+id/LinearLayout01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

                <Button
                android:id="@+id/back"
                android:layout_width="250dp"
                android:layout_height="wrap_content"
                android:focusable="true"
                android:background="@drawable/back_button"
                android:textColor="#ff29549f" />

                <Button
                android:id="@+id/comment_next"
                android:layout_width="wrap_content"
                android:layout_height="37dp"
                android:layout_marginLeft="420dp"
                android:background="@drawable/next_button"
                android:focusable="true"
                android:textColor="#ff29549f" />

            <Chronometer
                android:id="@+id/start_quiz_time1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="3.19"
                android:textSize="15sp"
                android:visibility="invisible" />

        </LinearLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="30dp"
        android:background="@drawable/pressicon"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/manadatory"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="1dp"
            android:padding="5dip"
            android:text="  *Mandatory: The information is confidential &amp; will not"
            android:textColor="#FFFFFF"
            android:textSize="20dip" />

        </LinearLayout>

    </LinearLayout>

</RelativeLayout> 
```

这是我的代码，但它不支持多屏。小部件被取代。

如何更改此代码，就好像我在任何平板电脑上运行它一样，它在每个具有不同屏幕尺寸和密度的平板电脑上看起来都一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:53:49.187

在设计应在多个设备上运行的应用程序时，需要注意两个重要参数：

*   尺寸（设备的物理尺寸）
*   设备密度

大小：android 中设备的大小不是定义为唯一的物理值，而是定义为一个范围。
它们是：小、正常、大和超大。

密度：密度也被定义为一个范围。
它们是：ldpi、mdpi、hdpi 和 xhdpi。

![在此处输入图像描述](../Images/b4a6d54e3e277ac71bb631dd1134fde3.png)

对于处理尺寸，您需要使用多个布局，每个类别的尺寸一个，并且您需要为每个布局的视图的高度和宽度使用不同的 dp 值，因为小型和大型设备的尺寸不会一样。

对于处理密度，您需要为不同的屏幕密度使用不同的绘图，即您需要将不同密度的绘图放置在不同的绘图文件夹中。
例如：
这些是特定可绘制对象的分辨率

*   36x36 用于低密度（放置在 drawable-ldpi 中）
*   48x48 用于中等密度（放置在 drawable-mdpi 中）
*   72x72 用于高密度（放置在 drawable-hdpi 中）
*   96x96 用于超高密度（放置在 drawable-xhdpi 中）

这种分辨率变化的比率为 3:4:6:8(ldpi:mdpi:hdpi:xhdpi)

如需进一步阅读，您可以参考这个 android 开发者的链接：http:
[//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:52:26.493

这是因为您在 dp 中设置了布局高度和宽度的大小。

您需要更多地了解重量，您的布局将根据屏幕尺寸进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T11:52:41.270

将以下代码写入您的 Androidmanifest.xml 文件

```
<supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true" /> 
```

有关更多信息，请参见下面的链接。

[屏幕尺寸支持](https://stackoverflow.com/questions/10891486/google-play-is-not-displaying-my-app-for-tablets/10891758#10891758)

# php - 如何在 jQuery 上循环遍历这个 JSON 数组？

> ID：12494117
> 
> 赞同：1
> 
> 时间：2012-09-19T11:50:13.983
> 
> 标签：php, jquery, ajax, json, loops

我有一个通过 jQuery AJAX 调用从 PHP 脚本返回的二维 JSON 数组。我一直在四处浏览，试图找出如何遍历每一行并在 div 中显示每个条目，但我很困惑，不确定如何在这种特殊情况下执行此操作。

以下是服务器返回的 JSON 示例：

```
{"location_id":"505","location_name":"University of the Arts London","location_type":"uni","location_num_listings":"22","location_num_users":"187","relevancy":"2"},
    {"location_id":"592","location_name":"London South Bank University","location_type":"uni","location_num_listings":"1","location_num_users":"1","relevancy":"2"},
    {"location_id":"591","location_name":"London Metropolitan University","location_type":"uni","location_num_listings":"47","location_num_users":"185","relevancy":"2"},
    {"location_id":"590","location_name":"University College London","location_type":"uni","location_num_listings":"29","location_num_users":"176","relevancy":"2"},
    {"location_id":"586","location_name":"St George's, University of London","location_type":"uni","location_num_listings":"9","location_num_users":"4","relevancy":"2"}, 
```

到目前为止，这是我的脚本：

```
<script type="text/javascript">
    $("#directory_search_input").keyup(function() {
        $("#directory_search_results").html('');
        var regionvalue = $(this).val();
        var jsonresult;
        var url = '<?php echo site_url('ajax/ajax_default/directory_search')?>';
        $.post(url,{input_val:regionvalue}, function(data) {
            var results = jQuery.parseJSON(data);
            $.each(results, function() {
                $.each(this, function(index, value) {
                    $("#directory_search_results").append(/*Append a new div for each row returned*/);
                });
            }); }); 
```

示例所需的输出：

地点 ID：505，地点名称：伦敦艺术大学

地点 ID：592，地点名称：伦敦南岸大学

等等等等

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T11:58:04.587

```
var results = $.parseJSON(data);
$.each(results, function(i, result) {
    $("#directory_search_results").append('<div>Location ID: '+result.location_id+' Location Name: '+result.location_name+'</div>');
}); 
```

​<a href="http://jsfiddle.net/JbaJP/">JSFiddle 示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:02:15.207

```
$.each(data, function (index, value) {
            $("#SearchResults").append("<div>").append("Location Id  :" + value.location_id + ", Location Name : " + value.location_name ).append("\div");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:43:33.703

假设您的 json 对象名为`data`，您可以执行以下操作：

```
$.each(data, function(key,value){
    //do all your code with key -> value pairs.
}); 
```

在这里看一个例子：http: [//jsfiddle.net/3muwm/](http://jsfiddle.net/3muwm/)

当然这使用[jQuery](http://api.jquery.com/jQuery.parseJSON/)库

# android - Android：检测设备方向变化

> ID：12494122
> 
> 赞同：0
> 
> 时间：2012-09-19T11:50:26.183
> 
> 标签：android, android-orientation

在我的应用程序中，我需要在 android 设备的方向发生变化时得到通知。我找到了两种方法来做到这一点：

1.  听 onConfigurationChanged - 使用这种方法，当手机从纵向变为横向时，我会收到事件，反之亦然，但当设备从 90 度变为 270 度时，我没有收到事件 - 因为在这两种情况下，方向都是还是风景。

2.  收听 onOrientationChanged (OrientationEventListener) - 此事件被触发太多次。我只需要知道设备何时在 0、90、180 和 270 度之间变化。我尝试对“速率”使用各种值。

有没有第三种方法可以实现我想要的？如果需要，我可以分享代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:48:54.933

```
 if(c.orientation == Configuration.ORIENTATION_PORTRAIT ) 
```

使用此配置类并获取运行时设备方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:20:44.523

我最终通过处理来自 OrientationEventListener 的事件来解决这个问题。它为了舒适而开火太多次，但它达到了目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-26T08:18:28.823

如果客户坚持在旧的 android 上进行测试：

```
<script>
    window.addEventListener("orientationchange", function() {
        location.reload();
    }, false);
</script> 
```

wakawakawaka

# php - 当放置在php中的循环中时，如何为每个文本框分配不同的名称..？

> ID：12494126
> 
> 赞同：0
> 
> 时间：2012-09-19T11:50:29.793
> 
> 标签：php

我在一个循环中生成了几个文本框 n 以不同的方式命名它们..但是从这些框中检索数据不起作用..请帮助我..

创建这些文本框的代码

```
$i=0;  
while($data=mysql_fetch_array( $sql ))
   { 
       echo "<tr><td>".$data['idno']." </td><td>".$data['name'] . " </td><td>
       <input type='text' name='obtmarks".$i."'></td></tr>";  $i++; 
   } 
```

我必须检索该数据并将其放在另一个表中

检索数据的代码

```
$i=0;

while($data=mysql_fetch_array( $sql1 )) 
 { 

    $as=mysql_query("INSERT INTO marks values('".$data['idno']."','".$data['name']."','".mysql_real_escape_string($_POST['obtmarks".$i."'])."')");
 $i++;  } 
```

请帮助我..提前谢谢你..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:55:10.990

假设您在表单中打印文本框，并将表单发送回检索代码：

您需要从 post 数组中获取变量值：

```
$i=0;

while($data=mysql_fetch_array( $sql1 )) 
{ 
    var value = $_POST['obtmarks'.$i];

    // insert into database

    $i++;  
} 
```

*（注意使用完全相同的标签，在您的示例中，您使用 obmarks 和 obtmarks。）*

**警告**不要在没有检查的情况下将值存储在数据库中！！使用准备好的语句！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:55:57.277

那这个呢：

```
$as=mysql_query("INSERT INTO marks values('".$data['idno']."','".$data['name']."','".$_POST['obmarks'.$i]."')"); 
```

这是假设您通过表单提交传递数据。

# jquery - 5秒后jQuery自动隐藏元素，如果没有鼠标悬停

> ID：12494132
> 
> 赞同：1
> 
> 时间：2012-09-19T11:51:05.577
> 
> 标签：jquery

我正在写一个购物车效果。当用户将产品添加到购物车时，浮动购物车会在 5 秒后出现并隐藏。

```
$("#cart").show().delay(5000).hide(); 
```

问题是如果用户想要更改数量之类的东西并且鼠标在购物车上，显然我不希望当用户鼠标在购物车上时购物车消失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T11:58:46.740

解决此问题的两种主要方法

如果用户将鼠标悬停在项目上以停止隐藏，则使用 clearTimeout。

```
var countdown;

$("#cart").show().hover(function() {
    clearTimeout(countdown);
})

countdown = setTimeout(function() {
$('#cart').hide();
}, 5000); 
```

或者

使用布尔值来决定是否进行隐藏

```
mouseOver = false;
$("#cart").show(function() {
  setTimeout(function() {
    if (!mouseOver)
       $('#cart').hide();
   }, 5000)).hover(function() {
    mouseOver = true;
}; 
```

您也可以（这会使项目消失，除非他们每 5 秒将鼠标移到项目上）：

```
var countdown;

$("#cart").show(resetCountdown).mousemove(resetCountdown);

function resetCountdown() {
   clearTimeout(countdown);
   countdown = setTimeout(function() {
      $('#cart').hide();
   }, 5000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:53:31.830

您可以将布尔值设置为 false，然后在鼠标悬停时将其设置为 true。同时，使用 setTimeout 定义一个函数：

```
setTimeout(function() {
if (!mybool)
$('#cart').hide();
}, 5000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:06:11.303

你也可以这样试试

```
$(document).ready(function(){
   $("#cart").show();
   $("#cart").delay(5000).hide();
}); 
```

或者你也可以编辑

```
$("#cart").hide('5000'); 
```

# asp.net-mvc-3 - 如何创建类来管理会话？

> ID：12494135
> 
> 赞同：-1
> 
> 时间：2012-09-19T11:51:20.593
> 
> 标签：asp.net-mvc-3

我有一个班级，想在上面创建、删除和编辑会话，但是当我想向会话中添加数据时出现错误：“object null reference”。如果我从控制器中删除继承，我该如何处理？

我的数据是字符串值，例如“name”，为什么使用这种语法：Session[name]=value; 在控制器中工作正常但在我的班级中不起作用并给我空引用错误？

```
public class StateManager : Controller
    {
       public  void RemoveFromApplication(string name)
     {
         Session.Remove(name);
     }
    public  void AddToApplication(string name, object value)
    { 
       //value like "name"
        Session[name]=value;
      }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:20:42.593

它可能不起作用，因为当控制器与当前路由不匹配时，MVC 没有以相同的方式实例化控制器。

您可以改为创建一个像这样的静态类：

```
public static class SessionManager
{
  public static void RemoveFromApplication(string name)
  {
    HttpContext.Current.Session.Remove(name);
  }

  public static void AddToApplication(string name, object value)
  {
    HttpContext.Current.Session[name] = value;
  }
} 
```

您还可以将方法中的会话作为参数传递：

```
public static class SessionManager
{
  public static void RemoveFromApplication(string name, HttpSessionStateBase session)
  {
    session.Remove(name);
  }

  public static void AddToApplication(string name, object value, HttpSessionStateBase session)
  {
    session[name] = value;
  }
} 
```

如果您不希望它是静态的，则类和方法不需要是静态的。

# html - TYPO3 中的内部锚点不起作用

> ID：12494140
> 
> 赞同：0
> 
> 时间：2012-09-19T11:51:35.197
> 
> 标签：html, hyperlink, anchor, typo3

通常，内部锚点用 定义`<a name="anchorname">Introduction</a>`。如果你链接到一个锚点，你会写类似`<a href="#anchorname">Top</a>`.

TYPO3 在每个元素之前添加一个像`<a id="c118"></a>`. 所以现在我在内容元素（标签：页面）上与 RTE 链接。如果我点击这样的链接`<a class="internal-link" title="Some text" href="index.php?id=24#c118">Some text</a>`，FF 15.0.1 将不会发生任何事情。

*   FF 15.0.1 - 不工作（什么都不做）
*   IE9 - 不工作（跳到错误的位置）
*   Safari 5.1.7 - 有效
*   Opera 12.02 - 不工作（什么都不做）
*   铬 21 - 工作

是否有任何解决方案可以链接到 TYPO3 中同一页面上的内容元素？这是超出规范还是浏览器错误？

**编辑：**

现在我把它放到主设置中：

```
tt_content.stdWrap {
  dataWrap = |
  prepend >
  prepend = COA
  prepend {
    10 = TEXT
    10.dataWrap = <a id="c{field:uid}" name="c{field:uid}"><!-- ANCHOR --></a>
    10.if.isFalse.field = _LOCALIZED_UID
    20 = TEXT
    20.dataWrap = <a id="c{field:_LOCALIZED_UID}" name="c{field:_LOCALIZED_UID}"><!-- ANCHOR --></a>
    20.if.isTrue.field = _LOCALIZED_UID
  }
  prefixComment = 1 | CONTENT ELEMENT,
uid:{field:_LOCALIZED_UID//field:uid}/{field:CType}
} 
```

现在我`<a id="c118" name="c118"></a>`在 HTML 代码中有锚点，但 FF 仍然无法工作......比我发现如果我禁用所有样式（CSS），锚点在 FF 中工作。为什么？

**解决方案：**

以下几行是问题所在：

```
.gallery {
  /* Weird anchor link bug in browsers if activated 
  position:relative;
  float:left;
  */
  width:753px;
  margin-bottom:25px;
} 
```

仍然是为什么这会导致问题的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:20:51.987

从技术上讲，这些锚点*应该*是正确的并且*应该可以*工作。参见**[w3.org](http://www.w3.org/TR/html401/struct/links.html#h-12.2.3)**。`tt_content.stdWrap.prepend.dataWrap`但是，您可以通过在 Typoscript 设置中进行修改来更改这些锚点的生成。使用 Typoscript 对象浏览器检查当前设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-10T21:59:12.573

直到没有任何额外代码的 TYPO3 6.2.25，我使用过：

```
<a name="top"></a>

<a href="/index.php?id=(id-number)#top">Go to Top</a> 
```

我在某处看到的更好的解决方案：

```
<a name="top"/>

<a href="" onclick="javascript:document.location.hash='top'; return false;">Goto top</a> 
```

# iphone - 加载 .RTF 文件时 UIWebView 泄漏内存？

> ID：12494144
> 
> 赞同：2
> 
> 时间：2012-09-19T11:51:57.460
> 
> 标签：iphone, memory, memory-leaks, uiwebview, memory-management

尝试通过 webView 加载 .rtf 文件（2.4 MB），如下所示：

```
 NSURL *docURL = [NSURL fileURLWithPath:docPath];
NSData *data = [NSData dataWithContentsOfURL:docURL];
NSString *mimeType = //receiving proper mime type here
[webView loadData:data MIMEType:mimeType textEncodingName:@"utf-8" baseURL:docURL]; 
```

加载此类文件会导致内存增长，直到应用程序崩溃。根据 Instruments，即使在完全释放包含控制器和 webView 本身的 webView 之后，内存也会继续增长。在应用程序的其他位置，使用其他应用程序功能，内存会增长，就好像我仍在继续浏览该 .RTF 文件一样。

当关闭/关闭控制器时，我也会做所有事情来释放 WebView。即：mainWebview.delegate = nil; [mainWebview 停止加载]; , [mainWebview removeFromSuperview]; , [mainWebview 发布]; . （甚至尝试执行以下操作： [mainWebview loadHTMLString:@"" baseURL:nil]; ）

我在仪器中看到的： ![在此处输入图像描述](../Images/5839de8e383ccb87947f1a1bb3d5834b.png)

有人有什么想法吗？谢谢。

**编辑：**我在 Safari、Chrome、Mercury 浏览器上测试了一些大型 .RTF 文件（700 Kb - 2.4 Mb）。同样的事情在任何地方都会发生，无论是模拟器还是设备。我猜这是WebKit中的一些错误。

一般情况：浏览器使用太多内存来处理这类文件。在 90% 的情况下，只是以“Crash”或“Low Memory”信号异常退出。如果设备在加载文件时处理了峰值内存使用情况，则内存会恢复正常，如果不是 - 它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:59:23.230

在使用`UIWebView`. [就我而言](https://stackoverflow.com/questions/11815294/memory-leaks-with-uiwebview-and-javascript)，我发现行为发生了很大变化，具体取决于我将数据加载到 Web 视图中的方式。在你的情况下，我没有解决方案，但根据我的经验，也许使用：

```
NSURLRequest *req = [NSURLRequest requestWithURL:urlToYourRTFFile];
[webView loadRequest:req]; 
```

可以有所作为

# mysql - 具有距离性能的 MYSQL 地理搜索

> ID：12494146
> 
> 赞同：9
> 
> 时间：2012-09-19T11:51:58.447
> 
> 标签：mysql, geospatial, bounding-box

我有一个 mysql select 语句，用于在我的网站上进行搜索，当网站变得非常繁忙时，它会出现性能问题。下面的查询从具有超过 10 万条记录的表中搜索广告，在给定纬度和经度的 25 英里范围内，并按距离排序。里程数可以不同，因为它是由用户选择的。

问题是我认为它很慢，因为它对表中的所有记录进行计算，而不是对纬度和经度 25 英里范围内的记录进行计算。是否可以修改此查询，以便 where 子句仅选择 25 英里内的广告？我已经阅读了有关边界框和空间索引的信息，但我不确定如何将它们应用于此查询，我是否需要添加一个 where 子句来选择经纬度半径 25 英里的记录，我该怎么做？

```
SELECT 
    adverts.*, 
    round(sqrt((((adverts.latitude - '53.410778') * (adverts.latitude - '53.410778')) * 69.1 * 69.1) + ((adverts.longitude - '-2.97784') * (adverts.longitude - '-2.97784') * 53 * 53)), 1) as distance
FROM 
    adverts
WHERE 
    (adverts.type_id = '3')
HAVING 
    DISTANCE < 25
ORDER BY 
    distance ASC 
LIMIT 120,10 
```

编辑：更新以包括表模式，请注意表更复杂，查询也是如此，但我已经删除了这个问题不需要的东西。

```
CREATE TABLE `adverts` (
`advert_id` int(10) NOT NULL AUTO_INCREMENT,
`type_id` tinyint(1) NOT NULL,
`headline` varchar(50) NOT NULL,
`description` text NOT NULL,
`price` int(4) NOT NULL,
`postcode` varchar(7) NOT NULL,
`latitude` float NOT NULL,
`longitude` float NOT NULL,
PRIMARY KEY (`advert_id`),
KEY `latlon` (`latitude`,`longitude`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

当我对 mysql 语句进行解释时，行数设置为 67900，这比 25 英里半径内的要多得多，额外的设置为“使用 where；使用文件排序”。

查询需要 0.3 秒，这真的很慢，尤其是当网站每秒收到大量请求时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T04:11:37.877

最快的方法是使用 MySQL 的地理空间扩展，这应该很容易，因为您已经在使用 MyISAM 表。这些扩展的文档可以在这里找到：http: [//dev.mysql.com/doc/refman/5.6/en/spatial-extensions.html](http://dev.mysql.com/doc/refman/5.6/en/spatial-extensions.html)

添加具有 POINT 数据类型的新列：

```
ALTER TABLE `adverts` 
ADD COLUMN `geopoint` POINT NOT NULL AFTER `longitude`
ADD SPATIAL KEY `geopoint` (`geopoint`) 
```

然后，您可以从现有的纬度和经度字段填充此列：

```
UPDATE `adverts` 
SET `geopoint` = GeomFromText(CONCAT('POINT(',`latitude`,' ',`longitude`,')')); 
```

下一步是根据输入的纬度和经度创建一个边界框，该边界框将在您的`WHERE`子句中用作`CONTAINS`约束。`POINT`您需要根据所需的搜索区域和给定的起点确定一组满足您要求的 X、Y坐标。

您的最终查询将搜索`POINT`您的搜索范围内的所有数据，`POLYGON`然后您可以使用距离计算来进一步优化和排序您的数据：

```
SELECT a.*, 
    ROUND( SQRT( ( ( (adverts.latitude - '53.410778') * (adverts.latitude - '53.410778') ) * 69.1 * 69.1 ) + ( (adverts.longitude - '-2.97784') * (adverts.longitude - '-2.97784') * 53 * 53 ) ), 1 ) AS distance
FROM adverts a
WHERE a.type_id = 3
AND CONTAINS(a.geopoint, GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))'))
HAVING distance < 25
ORDER BY distance DESC
LIMIT 0, 30 
```

请注意，`GeomFromText('Polygon((0 0,0 3,3 3,3 0,0 0))')`上述方法**不起作用**，您需要将坐标替换为搜索起点周围的有效点。如果您预计纬度/经度会发生变化，您应该考虑使用触发器来保持`POINT`数据和关联`SPATIAL KEY`的最新状态。对于大型数据集，您应该会看到与计算每条记录的距离和使用`HAVING`子句过滤相比，性能得到了极大的提高。我个人定义了用于确定距离和创建边界的函数`POLYGON`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-19T12:55:44.423

有几种方法可以加快您的查询速度，我个人会利用该[`POW`](https://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_pow)功能。

> 返回**X的****Y 次**幂的值。

手动乘法会减慢您对大型表的查询速度，尽管会获得相同的结果。

```
SELECT a .* , 
    round( sqrt( 
        (POW( a.latitude -'53.410778', 2)* 68.1 * 68.1) + 
        (POW(a.latitude -'-2.97784', 2) * 53.1 * 53.1) 
     )) AS distance
 FROM adverts a
     WHERE a.type_id = 3
     HAVING distance < 25
     LIMIT 0 , 30 
```

上面的查询在`0.0008 sec`带有`10,000`记录的表模式上运行（您的查询在同一个表模式上测试`0.0129 sec`），因此性能有了相当大的提高。

**其他优化技巧**

*   ***如果您在 SELECT 语句中使用实际列名而不是`*`.***
*   完全引用表名`mydatabase.mytable`。
*   如果您必须`ORDER BY`使用`primary key`（它是一个字段，或者在您打算使用的字段上`indexed`创建一个）。`index``ORDERING`
*   使用 mysql 框架函数进行数学计算，它将加快计算过程。
*   最后尝试通过这些步骤使您的查询尽可能简单（越简单越快）。

**来源**

*   [http://beginner-sql-tutorial.com/sql-query-tuning.htm](http://beginner-sql-tutorial.com/sql-query-tuning.htm)
*   [http://infolab.stanford.edu/~hyunjung/cs346/ioannidis.pdf](http://infolab.stanford.edu/~hyunjung/cs346/ioannidis.pdf)
*   [http://www.webmasterworld.com/forum112/59.htm](http://www.webmasterworld.com/forum112/59.htm)
*   [http://odetocode.com/code/237.aspx](http://odetocode.com/code/237.aspx)
*   [http://blog.sqlauthority.com/2007/06/14/sql-server-easy-sequence-of-select-from-join-where-group-by-having-order-by/](http://blog.sqlauthority.com/2007/06/14/sql-server-easy-sequence-of-select-from-join-where-group-by-having-order-by/)

# sql - 报告字段上带有条件 IF 的 SQL 查询

> ID：12494148
> 
> 赞同：0
> 
> 时间：2012-09-19T11:52:01.957
> 
> 标签：sql, database, if-statement

我环顾四周，发现了示例查询，其中 IF 构成记录选择的一部分，但我希望它构成输出的一部分。

基本上我有一个产品表，其中包括制造商 ID 和零件 ID 以及唯一的记录号。许多产品都有条形码，但不是全部。我想要做的是创建一个查询以列出所有产品，但如果没有条形码，则根据唯一记录号生成一个供内部使用的条形码。它不需要是用于外部目的的有效条形码，所以我不关心校验位的生成。几年前我在 Excel 中做过类似的事情，但无法弄清楚我如何在 SQL 查询中执行 IF 位。以下是我想做的一个例子，但语法不正确：

```
SELECT manufacturerID, partID, if(barcode is blank, "5000000"+unqueID, barcode)
FROM products 
```

我已经看到提到的 CASE 语句，但无法理解它如何适合这个示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:53:55.540

试试这个：

```
SELECT manufacturerID, partID,
    CASE 
         WHEN barcode = '' OR barcode IS NULL 
         THEN "5000000" + unqueID 
         ELSE barcode 
    END
FROM products 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T11:55:04.560

语句的[`CASE`](http://www.4guysfromrolla.com/webtech/102704-1.shtml)语法如下：

```
SELECT manufacturerID, 
  partID, 
  case 
    when barcode is null or barcode = ''
    then '5000000'+unqueID
    else barcode
  end as barcode
FROM products; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:07:57.027

如果您只是担心空值，则 NVL (oracle) 或 ISNULL (mysql) 可以提供帮助

```
SELECT manufacturerID, partID, NVL(barcode, "5000000"+uniqueID) FROM products; 
```

如果您的比较是标量，那么 decode 也可以提供帮助

[http://www.techonthenet.com/oracle/functions/decode.php](http://www.techonthenet.com/oracle/functions/decode.php)

```
SELECT  manufacturerID, partID,
        DECODE (barcode, '',    5000000+uniqueID, barcode) result
FROM suppliers; 
```

或者最后你总是有案子，最重要的是

```
select manufacturerID, partID,
    CASE 
         WHEN barcode = '' THEN "5000000" + uniqueID 
         ELSE barcode 
    END
from products 
```

# java - ArrayList最终在android中

> ID：12494152
> 
> 赞同：0
> 
> 时间：2012-09-19T11:52:12.827
> 
> 标签：java, android, arraylist, final

我想用自定义对象使我的 ArrayList 成为最终对象，以便对象在设置后无法更改。

我试图这样声明它：

```
private final ArrayList<Datapoint> XML = new ArrayList<Datapoint>(); 
```

我用以下几行填充 ArrayList：

```
FileInputStream fileIn = new FileInputStream(f);
ObjectInputStream in = new ObjectInputStream(fileIn);
XML = (ArrayList<Datapoint>) in.readObject();
in.close();
fileIn.close(); 
```

这个for循环显示对象：

```
for(int i=0;i<XML.size();i++){
                    item = XML.get(i);      
                    parsedData = parsedData + "----->\n";
                    parsedData = parsedData + "Name: " + item.getName() + "\n";
                    parsedData = parsedData + "stateBased: " + item.getStateBased() + "\n";
                    parsedData = parsedData + "mainNumber: " + item.getMainNumber() + "\n";
                    parsedData = parsedData + "dptID: "+ item.getDptID() + "\n";
                    parsedData = parsedData + "Groupadress: "+ item.getGroupadress() + "\n";
                    parsedData = parsedData + "priority: "+ item.getPriority() + "\n";
                } 
```

xmlOutput.setText(parsedData);

但 Eclipse 说`The final field XMLDetailsActivity.XML cannot be assigned`。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T11:54:41.033

`final`关键字只是意味着对对象的引用不能更改。然而，这并不意味着您不能调用对象的方法来更改其状态。

这可以通过使用 list 来实现`Collections.unmodifiableList()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:54:21.910

您的 XML 变量是`final`，但您尝试为其分配另一个值： `XML = ...in.readObject();`您不能这样做。

另外请注意，最终的 ArrayList 意味着您不能替换 ArrayList，您仍然可以调用其方法来修改其内容，final 不是 C++ 的`const`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T11:54:33.123

一旦`final`变量被赋值，就不能再赋值。

成员变量必须在`final`它们所属的类的构造函数完成执行之前被赋值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:54:38.663

您正在尝试为您的 XML 变量分配一个新值。当您在此之前将其声明为 final 时，您无法重新分配它。

# mysql - SQL 查询不在主机服务器上工作，但在本地工作

> ID：12494153
> 
> 赞同：2
> 
> 时间：2012-09-19T11:52:17.430
> 
> 标签：mysql, sql, database, inner-join

此查询在本地运行良好，但在主机服务器 (x10hosting.com) 上创建了确切的数据库后却不行。

```
SELECT (seating_capacity - (IFNULL(SUM(no_of_seats_booked),0))) AS "Seats Available",
       seating_capacity AS "Seating Capacity"
FROM tbl_showing AS h
INNER JOIN tbl_booking AS b
ON h.showing_id = b.showing_id
INNER JOIN tbl_screen AS c
ON h.screen_id = c.screen_id
WHERE h.showing_id = 9; 
```

它所做的是检查屏幕的座位容量，汇总所有预订的座位，然后将其从座位容量中取出。如果没有座位预订返回零。

我认为我的查询是正确的，但是mysql服务器可能不支持某些高级功能。

服务器正在运行： MySQL 服务器版本：5.1.63-rel13.4 MySQL 客户端版本：4.1.22

请问有什么帮助吗？

更新：它不返回错误，而是在应该返回某个整数时返回 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:56:25.367

固定的。那是引擎。它正在使用myisam。更改为 ENGINE=InnoDB CHARSET=utf8。

谢谢大家的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T21:31:11.240

根据您的具体实现中设置的“挑剔”程度……您应该始终在反引号中包含表名（和字段名）。这是键盘左上角的字符（美国）...

如果不这样做，请检查您的错误日志以查看查询失败的原因。它应该返回特定的错误消息和代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:10:53.203

由于 SUM() 是一个聚合函数，我将为查询提供一个 GROUP BY 子句。这可能是主机上查询失败的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T21:27:49.910

您是否检查过在尝试连接主机服务器时没有防火墙或安全问题？那就是我要看的地方。

# c# - C#，如何计算值 > 0 的变量

> ID：12494159
> 
> 赞同：0
> 
> 时间：2012-09-19T11:52:28.987
> 
> 标签：c#, winforms

在 C# 中，我有一些值 > 0 和一些等于 0 的小数变量。我从 C# winform 上的不同文本框的数量中获得这些小数。

计算其中有多少值 > 0 的最佳做法是什么？

如果计数 > 12，则具有最低值的变量（仅非零值）应更改为 0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T11:55:07.943

不要使用一长串小数，使用它们的数组：

```
decimal[] values = new decimal[17];
/*Populate the values array with data*/
int CountOfMoreThanZero = values.Count(v => v > 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:06:12.410

它不是面向对象软件工程的获奖作品，但它应该可以完成这项工作：

```
static void Main(string[] args)
{
    var seq = Enumerable.Range(0, 12).Select(i => (decimal)i);
    Console.WriteLine(GetGreaterThanZero(seq));

    var arr = seq.ToArray();
    SetMinNull(arr);
    foreach(var n in arr)
        Console.WriteLine(n);
}

static int GetGreaterThanZero(IEnumerable<decimal> numbers)
{
    return numbers.Count(n => n > 0);
}

static void SetMinNull(decimal[] numbers)
{
    decimal min = numbers.Min();

    // edit: credits to daniel for this loop
    for(int i = 0; i < numbers.Length; i++)
    {
        if(numbers[i] == min) numbers[i] = 0;
    }
} 
```

它使用集合。但是，我建议您也使用它们。使用大量编号不同的值是一种代码味道，我猜几乎不太方便。

# android - 在 2.3.6 中无法接收 SMS_RECEIVED 监听器

> ID：12494166
> 
> 赞同：0
> 
> 时间：2012-09-19T11:53:19.383
> 
> 标签：android

我已经`SMS_RECEIVED`在应用程序中实现了监听器。它在 android 2.2 中工作，但在 2.3.7 中不工作。

android 2.3.7 是否存在兼容性问题。

我的代码是

```
public class SmsListener extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")) {
      Bundle bundle = intent.getExtras();
      SmsMessage[] msgs = null;
      // String msg_from;
      if (bundle != null) {
        try {
          Object[] pdus = (Object[]) bundle.get("pdus");
          msgs = new SmsMessage[pdus.length];
          for (int i = 0; i < msgs.length; i++) {
            msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
            // msg_from = msgs[i].getOriginatingAddress();
            String msgBody = msgs[i].getMessageBody();
            Toast.makeText(context, msgBody, Toast.LENGTH_LONG).show();
          }
        } catch (Exception e) {

        }
      }
    }
  } 
```

我还在清单文件中添加了相应的条目：

```
<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
```

帮助表示赞赏。

谢谢你。

# java - Tomcat webapp ClassLoader 不适用于运行时编译

> ID：12494167
> 
> 赞同：4
> 
> 时间：2012-09-19T11:53:19.743
> 
> 标签：java, tomcat, maven

我有一些在运行时生成并使用

`JavaCompiler.CompilationTask`.

生成的代码引用了其他项目中的类，这些类是我项目的 Maven 依赖项。一切都在本地运行良好，但是当我部署到我们的开发 Tomcat 服务器时，我得到了一堆

`"package xxx does not exist"`

和

`"cannot find symbol"`

编译任务中的错误。我检查了Tomcat 部署的 webapp 项目的**WEB-INF/lib目录，所有的 jar 都在那里，包括项目依赖项。**目录中的所有内容不`WEB-INF/lib`应该在运行时对 Tomcat 项目可用吗？

编辑：这是我的 context.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
        virtualClasspath="${catalina.home}/webapps/kdweb/WEB-INF/lib/acommons-0.0.1-SNAPSHOT.jar;${catalina.home}/webapps/kdweb/WEB-INF/lib/abizcommons-0.0.1-SNAPSHOT.jar;${catalina.home}/webapps/kdweb/WEB-INF/lib/kd_market_data-common-0.0.1-SNAPSHOT.jar;${catalina.home}/webapps/kdweb/WEB-INF/lib/aggregation-0.0.1-SNAPSHOT.jar;${catalina.home}/webapps/kdweb/WEB-INF/lib/apods-client-0.0.1-SNAPSHOT.jar;${catalina.home}/webapps/kdweb/WEB-INF/lib/framework-common-0.0.1-SNAPSHOT.jar" />
</Context> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:12:51.627

您可以使用[Loader](http://tomcat.apache.org/tomcat-6.0-doc/config/loader.html)并将 reloadable 设置为 true。（[这](https://stackoverflow.com/questions/12317331/reload-class-file-in-tomcat)也可能是相关的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T14:51:44.230

事实证明，我需要在代码中将显式类路径传递给 JavaCompiler.CompilationTask。这是我如何让它工作的：

```
String classPath = "webapps/WEB-INF/lib/jar1.jar;webapps/WEB-INF/lib/jar2.jar";
List<String> options = new ArrayList<String>();
options.addAll(Arrays.asList("-classpath", classPath));
final JavaCompiler.CompilationTask task = compiler.getTask(null, manager, null, options, null, Arrays.asList(source)); 
```

# java - 自定义 ListView 适配器抛出 UnsupportedOperationException

> ID：12494169
> 
> 赞同：4
> 
> 时间：2012-09-19T11:53:23.393
> 
> 标签：java, android, listview, adapter

[这是我](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)使用自定义 Listview 适配器所遵循的教程。我遇到的问题是，当我尝试清除适配器时，应用程序崩溃并抛出`java.lang.UnsupportedOperationException`

```
if(adapter != null) {
    adapter.clear();
} 
```

**更新代码：**

```
private void setListViewAdapterToDate(int month, int year, int dv)
{
     if(summaryAdapter != null) {
        summaryAdapter.clear();
     }

    setListView(month, year, dv);
    summaryList.addAll(Arrays.asList(summary_data));
    summaryAdapter = new SummaryAdapter(this.getActivity().getApplicationContext(), R.layout.listview_item_row, summaryList);

    summaryAdapter.notifyDataSetChanged();
    calendarSummary.setAdapter(summaryAdapter);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:11:59.153

环顾四周，似乎用数组初始化适配器是问题所在。请参阅[带有 ArrayAdapter.remove 的 UnsupportedOperationException](https://stackoverflow.com/questions/7200331/unsupportedoperationexception-with-arrayadapter-remove)和[Unable to modify ArrayAdapter in ListView: UnsupportedOperationException](https://stackoverflow.com/questions/3200551/unable-to-modify-arrayadapter-in-listview)

尝试使用 an`ArrayList`而不是`array`like so

```
ArrayList<Weather> weather_data = new ArrayList<Weather>()
weather_data.add( new Weather(R.drawable.weather_cloudy, "Cloudy") );
// continue for the rest of your Weather items. 
```

如果你觉得懒惰，你可以将你的转换`array`成`ArrayList`这种方式

```
ArrayList<Weather> weatherList = new ArrayList<Weather>();
weatherList.addAll(Arrays.asList(weather_data)); 
```

要`ArrayList`在您的`WeatherAdapter`类中完成转换，您需要删除它`Weather data[] = null;`及其所有引用（例如在构造函数中），因为`ArrayAdapter`为您保存数据，您可以使用[getItem访问它](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getItem(int))

因此，在您的`getView`功能内部，您将更`Weather weather = data[position];`改为`Weather weather = getItem(position);`

**更新** 修改您的更新代码

```
private void setListViewAdapterToDate(int month, int year, int dv)
{
    setListView(month, year, dv); 
     if(summaryAdapter != null) {
        summaryAdapter.clear();
        summaryAdapter.addAll( summaryList );
        summaryAdapter.notifyDataSetChanged();
     } else {
         summaryList.addAll(Arrays.asList(summary_data));
         summaryAdapter = new SummaryAdapter(this.getActivity().getApplicationContext(), R.layout.listview_item_row, summaryList);
     }
    calendarSummary.setAdapter(summaryAdapter);
} 
```

# jquery - jQuery 对话框调整大小事件

> ID：12494170
> 
> 赞同：7
> 
> 时间：2012-09-19T11:53:24.577
> 
> 标签：jquery, jquery-ui, jqgrid, jquery-ui-dialog

我有一个托管 3rd 方插件 (jqGrid) 的对话框。我希望在`jqGrid`调整对话框大小时自动调整大小。我也希望有这个对话框，`width: 'auto'`因为还有一些其他的内容可能会增长。

当对话框因内容而调整大小时，我不会`dialogresize`触发事件。这是一个示例——手动调整对话框的大小会导致`dialogresize`事件触发，但单击按钮不会触发`dialogresize`，即使对话框调整了大小：

[http://jsfiddle.net/LfpC7/](http://jsfiddle.net/LfpC7/)

你知道当对话框调整大小时是否有可能捕获事件`width: 'auto'`？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T12:02:21.180

您可以使用 jQuery UI 对话的[`resize`事件](http://api.jqueryui.com/dialog/#event-resize)。

调整对话框大小时触发此事件。演示代码示例

提供一个回调函数来处理 resize 事件作为一个 init 选项。

```
 $( ".selector" ).dialog({
       resize: function(event, ui) { ... }
    }); 
```

按类型绑定到调整大小事件：dialogresize。

```
 $( ".selector" ).bind( "dialogresize", function(event, ui) {
      ...
    }); 
```

# loops - 缓冲区溢出不应该发生在什么时候？

> ID：12494172
> 
> 赞同：0
> 
> 时间：2012-09-19T11:53:28.443
> 
> 标签：loops, for-loop, overflow, buffer

昨天我在我的 proggy 中遇到了一个我无法确定的错误。在使用该软件数小时后，它突然崩溃并向我显示以下类型的消息（可能不一样，因为我只能重现一次并且没有保存该消息 - 但这是一个 BEX 错误，使用了另一个它的代码片段，请参见下文）：

```
Problemsignatur:
  Problemereignisname:  BEX
  Anwendungsname:   ----.exe
  Anwendungsversion:    0.0.0.0
  Anwendungszeitstempel:    5059a92f
  Fehlermodulname:  ----.exe
  Fehlermodulversion:   0.0.0.0
  Fehlermodulzeitstempel:   5059a92f
  Ausnahmeoffset:   0000cae3
  Ausnahmecode: c0000417
  Ausnahmedaten:    00000000
  Betriebsystemversion: 6.0.6000.2.0.0.---.-
  Gebietsschema-ID: 1031
  Zusatzinformation 1:  d752
  Zusatzinformation 2:  becd3a3c3e2751afee56698a1f79a48e
  Zusatzinformation 3:  4c74
  Zusatzinformation 4:  91af6395315cadbb5a06842f28b0d430 
```

所以当我发现这是一个缓冲区溢出错误时，我试图找出缓冲区溢出会发生在哪里。我想出了一个 for 循环，它不应该工作并导致这样的错误。问题的类型大致如下：

```
int bob=0;int pop;
for(pop=0;pop<bob;pop++){cout<<pop;} 
```

除了使用 pop 值代替 cout 来用元素填充数组。我在这里用零初始化它只是为了演示，在程序中，用户可以将 bob 更改为 >0 的值，但是无论 bob 是零还是 !=0，都会连续调用 for 循环。当我执行上面的代码时，proggy 立即崩溃（如预期的那样），而在实际情况下它没有，只是在很长一段时间后，即使我使用 cout 命令检查 for 循环是否确实执行。也许这是因为代码在函数内部，并且该函数是从 while 循环内部调用的？

所以我的问题是，这是缓冲区溢出的最可能原因还是我应该去其他地方看看。我真的不知道还有什么其他问题会导致这个零星且非常烦人的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:18:33.510

提供的示例中没有无限循环。

第一次迭代前的值为： bob = 0; 流行= 0;

因为 0 (pop) 不小于 0 (bob)，所以 pop < bob 返回 false 并且 for 循环不应执行。如果 for 循环正在执行，请检查 bob 的值。也许您已将 bob 的变量初始化放置在不执行的代码路径中。

我个人建议使用调试器。

# ruby - Ruby - 捕获所有网络异常

> ID：12494176
> 
> 赞同：5
> 
> 时间：2012-09-19T11:53:31.780
> 
> 标签：ruby, networking, rescue

捕获所有网络相关问题的最佳方法是什么？

异常在上面的一些层被处理（它可以从不同的地方抛出，这是处理它的正确位置），我显然不想将它作为通用异常捕获，因为这可能会掩盖其他问题。

我希望有人以前遇到过这个问题。这是我目前的清单（但我担心它不完整）：

```
rescue Timeout::Error, Net::HTTPServerException, Errno::EHOSTUNREACH, Errno::ECONNREFUSED, Errno::ENETUNREACH, Errno::ETIMEDOUT 
```

# java - SWT 浏览器打印预览

> ID：12494180
> 
> 赞同：1
> 
> 时间：2012-09-19T11:53:46.540
> 
> 标签：java, browser, printing, swt, preview

我的应用程序正在使用 SWT 浏览器，我正在尝试添加打印预览功能。没有 javascript 可以为在 SWT 浏览器中打开的特定网页调用打印预览。

我通过这个链接找到了一些希望： [http ://www.java2s.com/Code/Java/SWT-JFace-Eclipse/OLEandActiveXexamplegeteventsfromIEcontrol.htm](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/OLEandActiveXexamplegeteventsfromIEcontrol.htm)

但我仍然无法调用打印预览。有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:04:48.843

Eclipse`org.eclipse.swt.browser`包包含创建浏览器的 Java 代码。

扩展现有代码，或将代码复制到您自己的 Java 包中并进行任何您想要的更改。

# python - eBay API 在沙箱中返回“应用程序 ID 无效”，但在生产中有效

> ID：12494181
> 
> 赞同：1
> 
> 时间：2012-09-19T11:53:47.090
> 
> 标签：python, url, ebay-api

说，我有以下网址：

> [http://open.api.sandbox.ebay.com/shopping?MaxEntries=2&QueryKeywords=pen&AvailableItemsOnly=false&version=681&siteid=0&appid=appid&callname=FindProducts&responseencoding=XML](http://open.api.sandbox.ebay.com/shopping?MaxEntries=2&QueryKeywords=pen&AvailableItemsOnly=false&version=681&siteid=0&appid=appid&callname=FindProducts&responseencoding=XML)

和

> [http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=appid&siteid=0&version=681&QueryKeywords=pen&AvailableItemsOnly=true&MaxEntries=2](http://open.api.ebay.com/shopping?callname=FindProducts&responseencoding=XML&appid=appid&siteid=0&version=681&QueryKeywords=pen&AvailableItemsOnly=true&MaxEntries=2)

第一个产生以下错误：

> 2012-09-19T11:32:33.794Z 失败应用程序 ID 无效。应用程序 ID 无效。1.20 错误请求错误 E791_CORE_BUNDLED_15340089_R1 791

而第二个没有。我已经检查了多次，两个url中的appid都是一样的，所以appid没有问题。

第一个 url 由我的 python 代码形成：

```
import requests
d=dict(appid = app_id, siteid = site_id, version = version)

d.update(user_params)
data = requests.get(endpoint, params=d) 
```

问题的根源可能是什么？为什么两个看似相似的 url 表现不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T14:21:10.030

`http://open.api.sandbox.ebay.com/shopping?` **&** `http://open.api.ebay.com/shopping?`

一个是沙盒，一个是生产

> 当您加入开发者计划时，您将获得应用程序的密钥集。为沙盒设置的密钥与为生产环境设置的密钥不同。（沙盒的密钥不能用于在生产环境中进行 API 调用。相反，生产密钥不能用于在沙盒中进行 API 调用。）

因此，您的问题**是**两个 URL 中的 appID 相同。:) 来自[沙盒和生产密钥](http://developer.ebay.com/DevZone/XML/docs/WebHelp/wwhelp/wwhimpl/js/html/wwhelp.htm?context=eBay_XML_API&topic=DeveloperKeys)

# android - 9Android 切换按钮的补丁图像

> ID：12494185
> 
> 赞同：2
> 
> 时间：2012-09-19T11:53:58.947
> 
> 标签：android

我需要 Android 中的切换按钮。我一直在尝试为我的切换按钮找到 9patch 图像，但到目前为止还没有成功。有人可以帮帮我吗。我没想到会这么难，但在任何地方都找不到任何帮助？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:19:57.243

您对按钮的外观非常不明确......您可以在以下文件夹（mdpi 文件夹和 api lvl 14）中找到 android 本机切换按钮，并查看它们是如何制作的：`C:\Android\android-sdk\platforms\android-14\data\res\drawable-mdpi`

搜索：切换。

还有一个从 api lvl 14 在 android 中实现的开关：

开关图形可以在同一文件夹中找到，只需搜索：switch。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:26:26.933

嘿，当您可以为自己创建一个时，为什么要搜索 9 个补丁图像。创建真的很简单。这是创建 9-patch 的[链接](http://radleymarx.com/blog/simple-guide-to-9-patch/)。这是学习 9-patch 的一个非常好的教程。

# css - 如何使用 CSS 定位语法荧光笔以更改显示代码的字体大小

> ID：12494189
> 
> 赞同：2
> 
> 时间：2012-09-19T11:54:02.847
> 
> 标签：css, wordpress, syntax-highlighting

我正在寻找使用 css 来定位 wordpress 语法 highliter 来更改默认字体大小，我无法向 div 添加任何有用的 css 类，而且如果不全局定位所有 div，我似乎无法定位它！

这是从 g-chrome 开始的完整 css 路径，从自动生成的 div 一直到代码。

```
 div#"individual-ID-for-each-code-example-here".syntaxhighliter div.lines div.line.alt1 table tbody tr td.content code.string 
```

我已经尝试针对 .syntaxhighliter 和所有其他人，包括没有运气的 pre，我在这里缺少一些简单的东西吗？

这是html：

```
<pre class="brush: php; title: ; notranslate" title="">

<!--CODE GOES HERE-->

</pre> 
```

如果有帮助，这里是页面本身：

[http://msc-media.co.uk/blog/](http://msc-media.co.uk/blog/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T14:30:54.753

使用这种方式有什么问题：

```
.syntaxhighliter table tbody tr .code code.string {
    font-size: 12pt !important;
} 
```

### 截屏

![语法高亮](../Images/e449c672976f0c42acbe16d1989b9316.png)

### 全图[在这里](https://i.stack.imgur.com/rqIyt.png)...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T17:06:15.250

感谢 Praveen Kumar 的贡献，但指向的 .css 文件只会更改默认主题的字体大小，如果我将来选择交换主题，字体大小会恢复原状。

我更改了 shCore.css 中的字体大小，因为这将适用于所有主题模板。（语法高亮 2 中的第 56 行）。

CSS提到：

```
.syntaxhighlighter,
.syntaxhighlighter div,
.syntaxhighlighter code,
.syntaxhighlighter table,
.syntaxhighlighter table td,
.syntaxhighlighter table tr,
.syntaxhighlighter table tbody
{
    margin: 0 !important;
    padding: 0 !important;
    border: 0 !important;
    outline: 0 !important;
    background: none !important;
    text-align: left !important;
    float: none !important;
    vertical-align: baseline !important;
    position: static !important;
    left: auto !important;
    top: auto !important;
    right: auto !important;
    bottom: auto !important;
    height: auto !important;
    width: auto !important;
    line-height: 1.1em !important;
    font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace !important;
    font-weight: normal !important;
    font-style: normal !important;

    font-size: 0.98em !important; <- This! (Reduced from 1em, surprisingly this was enough)

    /*min-height: inherit !important; *//* For IE8, FF & WebKit */
    /*min-height: auto !important;*/ /* For IE7 */
    direction: ltr !important;
} 
```

# c# - 如何获得基类？

> ID：12494191
> 
> 赞同：-3
> 
> 时间：2012-09-19T11:54:11.797
> 
> 标签：c#, .net, emgucv

我创建了这种类型：

```
 public class ImageHolder :Image<Bgr,byte>
    {   
        private String imagePath;

        public ImageHolder(String path):base()
        {
           this.imagePath = path;            
        }

        public String imgPathProperty
        {
            get
            {
                return imagePath;
            }
            set
            {
                imagePath = value;
            }
        }
    } 
```

这是该类的实例：

```
ImageHolder sd = new ImageHolder("path"); 
```

我需要获取 SignDetection 类型的基本类型。

```
Image<Bgr,Byte> img = sd.BaseType; 
```

知道如何实施吗？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T11:57:08.963

您不需要强制转换为“基本类型”。您的`ImageHolder`实例*也是*一个`Image<Bgr,Byte>`实例，因此：

`Image<Bgr,Byte> img = sd;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:07:31.160

使用反射`this.GetType().BaseType`

# html - 如何基于移动设备的用户代理替换超链接

> ID：12494193
> 
> 赞同：4
> 
> 时间：2012-09-19T11:54:12.423
> 
> 标签：html, mobile, blackberry, user-agent

我有以下 html 来检测用户代理是否来自黑莓设备。我想知道如何将下载 url 替换为特定于设备的 url，即，如果他的设备是 9800，我想指导用户下载 9800 设备。请有人帮忙吗？

```
<!DOCTYPE html>
<html>
<body>
<script type="text/javascript">
var ua = navigator.userAgent;
document.write("BB OS Version :: " + ua);
if (ua.indexOf("BlackBerry") >= 0) {
    if (ua.indexOf("Version/") >= 0) { // ***User Agent in BlackBerry 6 and BlackBerry 7
        Verposition = ua.indexOf("Version/") + 8;
        TotLenght = ua.length;
        document.write("BB OS Version :: " + ua.substring(Verposition, Verposition + 3));
    }
    else {// ***User Agent in BlackBerry Device Software 4.2 to 5.0
        var SplitUA = ua.split("/");
        document.write("BB OS Version :: " + SplitUA[1].substring(0, 3));
    }
}
</script>
<br>

<a href="http://mysite.com/download">Download</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T22:53:50.267

我希望这会有所帮助，并且我完全理解您的要求。一切顺利。

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>

  <a href="#" id="theLink">Download</a><br>

  <script type="text/javascript">

    function set_url(id, url) {
      document.getElementById(id).href = url; 
    }

    var ua = navigator.userAgent;
    document.write("BB OS Version :: " + ua);
    if (ua.indexOf("BlackBerry") >= 0) {
        if (ua.indexOf("Version/") >= 0) { // ***User Agent in BlackBerry 6 and BlackBerry 7
            Verposition = ua.indexOf("Version/") + 8;
            TotLenght = ua.length;
            document.write("BB OS Version :: " + ua.substring(Verposition, Verposition + 3));
            set_url("theLink", "http://www.google.com"); // go to User Agent in BlackBerry 6 and BlackBerry 7 url
        }
        else {// ***User Agent in BlackBerry Device Software 4.2 to 5.0
            var SplitUA = ua.split("/");
            document.write("BB OS Version :: " + SplitUA[1].substring(0, 3));
            set_url("theLink", "http://www.yahoo.com"); // go to User Agent in BlackBerry Device Software 4.2 to 5.0 url
        }
    }

  </script>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:15:26.553

如果您只想要下载按钮的特定样式，那么如果它是 Blackberry，则只需添加一个类，如果不是，则将其删除。

# android - 如何使用异步任务类设置微调器的适配器

> ID：12494195
> 
> 赞同：0
> 
> 时间：2012-09-19T11:54:24.313
> 
> 标签：android

在我的代码中，我使用异步任务加载微调器适配器在我的情况下，ProgressDialog 没有关闭这是我的代码。我想在适配器加载后显示项目，progressDialog 是关闭请帮助我，谢谢

```
private class LoadMoreVehicals extends AsyncTask<Object, Integer, Object> {

        @Override
        protected void onPreExecute() {

            progressBar = ProgressDialog.show(RegistrationScreen.this, "",
                    "Loading...");
            progressBar.setIndeterminate(true);
            progressBar.setIndeterminateDrawable(getResources().getDrawable(
                    R.anim.progressbar_handler));
            super.onPreExecute();
        }

        @Override
        protected Object doInBackground(Object... params) {
            String countryUrl = ConstantURL.COUNTRY_URL;
            getCounty(countryUrl);

            countrySpinner
            .setAdapter(new MyCustomSpinnerAdapter(
                    RegistrationScreen.this,
                    R.layout.spinner_dropdown,
                    countyList));

                                return null;
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            progressBar.getProgress();

        }

        @Override
        protected void onPostExecute(Object result) {

            progressBar.dismiss();

             Log.e("Im in onPostExecute", "");
            super.onPostExecute(result);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:43:10.523

在 Android 中编程时，您应该记住一件事，任何在屏幕上绘制内容的任务都应该在**主线程**上执行。当您设置适配器时，android 会调用适配器的 getView() 方法并在屏幕上绘制视图。所以你应该在 postExecute() 方法中设置适配器，而不是在 doInBackground() 方法中。
这是一个小样本来澄清我的观点：

```
class MyTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog pd = new ProgressDialog(MainActivity.this);

    @Override
    protected void onPreExecute ( )
    {
        //starting the progress dialogue
        pd.show();
    }

    @Override
    protected Void doInBackground (Void... params)
    {
        //fetch data here
        ...
        ... 
        return null;
    }

            @Override
    protected void onPostExecute (Void result)
    {
        //set adapter here
        ...
        ...
        //dismissing the progress dialogue
        pd.dismiss();
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:05:05.670

首先，您不能在`doInBackground` 以下设计中设置适配器：

```
private class LoadMoreVehicals extends AsyncTask<Object, Integer, Object> 
{
    private ArrayList<Country> countries;
    @Override
    protected void onPreExecute() {
         progressBar = ProgressDialog.show(RegistrationScreen.this, "","Loading...");
         progressBar.setIndeterminate(true);
         progressBar.setIndeterminateDrawable(getResources().getDrawable(R.anim.progressbar_handler));              
         super.onPreExecute();
    }

    @Override
    protected Object doInBackground(Object... params) {
        String countryUrl = ConstantURL.COUNTRY_URL;
        countries = getCounty(countryUrl);
        return null;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progressBar.getProgress();

    }

    @Override
    protected void onPostExecute(Object result) {
        countrySpinner.setAdapter(new MyCustomSpinnerAdapter(RegistrationScreen.this,R.layout.spinner_dropdown,countries));
        progressBar.dismiss();
        Log.e("Im in onPostExecute", "");
        super.onPostExecute(result);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:45:45.487

根据我的经验，我在异步运行和 UI 方面遇到了很多问题，所以现在总是将试图将“职责”放在每个地方的东西分开。所以我做这样的事情：

1.  使用我想要做的过程创建我的 Async 类，并且没有任何东西可以改变其中的 UI
2.  在异步任务完成时修改 UI 的 UI 线程中创建一个函数，例如 OnAsyncTaskComplete(Object response)
3.  保持沟通线程

    ```
    public class MyActivity extends Activity {

    private static MyAsyncClass backgroundTask;
    private static ProgressDialog pleaseWaitDialog; 

    //......activity stuff.......

    @Override
    public void onPause()
    {
        super.onPause();
        //Get rid of progress dialog in the event of a screen rotation or other state change. Prevents a crash.
        if (pleaseWaitDialog != null)
            pleaseWaitDialog.dismiss();
    }
    //Function to avoid lose the async thread if the app interrupts (phone rotation, incoming call, etc) RECOMENDED TO HANDLE THIS!!
    //Sets the current state after app resume
    @Override
    public void onResume()
    {

        super.onResume();
        //If there is a background task set it to the new activity
        if ((backgroundTask != null) && (backgroundTask.getStatus() == Status.RUNNING))
        {
           if (pleaseWaitDialog != null)
             pleaseWaitDialog.show();

           backgroundTask.setActivity(this);
        }
        }
    }

        //Logic business after the web service complete here
    //Do the thing that modify the UI in a function like this
    private void onTaskCompleted(Object _response) 
    { 
        //For example _response can be a new adapter
    MyList.setAdapter((BaseAdapter)_response);
    //or can be a list to create the new adapter
    MyList.setAdapter(new MyAdapter(this, (ArrayList<String>)_response));
    //or can be anything you want, just try to make here the things that you need to change the UI
    }

    /**
     * Class that handle the async task
     */
    public class MyAsyncClass extends AsyncTask<Void, Void, Object>
    {
        //Maintain attached activity for states change propose 
         private MyActivity activity;
         //Keep the response of the async task
         private Object _response;
         //Flag that keep async task completed status
         private boolean completed; 

         //Constructor
         private MyAsyncClass(MyActivity activity) { 
                 this.activity = activity;
         } 

         //Pre execution actions
         @Override 
         protected void onPreExecute() {
                 //Start the splash screen dialog
                 if (pleaseWaitDialog == null)
                     pleaseWaitDialog= ProgressDialog.show(activity.this, 
                                                            "PLEASE WAIT", 
                                                            "Getting results...", 
                                                            false);

         } 

         //Execution of the async task
        protected Object doInBackground(Object...params)
        {
            //return the thing you want or do want you want
            return new ArrayList();
        }

        //Post execution actions
        @Override 
        protected void onPostExecute(Object response) 
        {
            //Set task completed and notify the activity
                completed = true;
                _response = response;
                notifyActivityTaskCompleted();
            //Close the splash screen
            if (pleaseWaitDialog != null)
            {
                pleaseWaitDialog.dismiss();
                pleaseWaitDialog = null;
            }
        } 

        //Notify activity of async task completion
        private void notifyActivityTaskCompleted() 
        { 
            if ( null != activity ) { 
                activity.onTaskCompleted(_response); 
            } 
        } 

    //for maintain attached the async task to the activity in phone states changes
        //Sets the current activity to the async task
        public void setActivity(MyActivity activity) 
        { 
            this.activity = activity; 
            if ( completed ) { 
                notifyActivityTaskCompleted(); 
            } 
        } 

    }
    } 
    ```

希望它对你有帮助

# asp.net - 从 cookie 加载产品的代码放在哪里？

> ID：12494196
> 
> 赞同：0
> 
> 时间：2012-09-19T11:54:28.447
> 
> 标签：asp.net, sharepoint, sharepoint-2010, session-state, microsoft-commerce-server

我们有一个项目，它是与 Commerce Server 相结合的 Sharepoint 解决方案。这是一个网上商店，我们目前正在安装一项功能，使用 cookie 存储购物篮中的产品。

我们通过在 cookie 文件中添加所有产品 guid + 数量来做到这一点。

但是，下次访问时在哪里加载用户购物篮？

在一个普通的 asp.net 网站上，我会使用 Global.asax -> Session_start，但据我所知，Sharepoint 解决方案中没有 Global.asax。

所以我的问题是：有没有办法对 Sharepoint 中的 session_start 事件做出反应？还是有其他更合适的事件/方式？我不太喜欢 Sharepoint，所以很乐意接受任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:17:31.123

我们最终将代码放入购物篮的 Web 部件中。这是一个很好的解决方案，因为它存在于网站的每个页面上。

我更喜欢将代码放在 HttpModule 中，但是在 Sharepoint 中设置它非常烦人。而且它比仅仅将代码放在购物篮中更能减少错误。

# extjs - 如何在extjs的网格中只允许数字过滤器中的正数

> ID：12494203
> 
> 赞同：2
> 
> 时间：2012-09-19T11:55:01.440
> 
> 标签：extjs, extjs4.1

这是我的第一篇文章，所以我可能在错误的线程中发帖，对此感到抱歉。

我想限制数字网格过滤器中的负值，只允许网格中的数字过滤器中的正数，我无法找到如何做到这一点。

这是我的代码

```
var myFilters =
{
    ftype     : 'filters',
    encode    : false,
    local     : false,
    extend    : 'Ext.data.Model',          
    filters    :
    [
        {
            type        : 'numeric',
            dataIndex    : 'utilization_per'
        }
    ]
};

deviceUtilGridPanel = new Ext.grid.GridPanel(
{
    features    : [myFilters],
    columns :
    [
          {id:'ru_utilization_per', header: "Utilization(%) (U)", sortable: true,     dataIndex: 'utilization_per', filterable: true, filter :{type:'numeric'},width:80}
    ]
}); 
```

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T17:19:50.833

您可以使用`menuItemCfgs`过滤器上的配置来修改过滤器菜单使用的表单字段。

```
var myFilters = {
    ftype:   "filters",
    encode:  false,
    local:   false,
    filters: [{
        dataIndex:    "utilization_per",
        type:         "numeric",
        menuItemCfgs: {
            minValue: 1  // Or 0, or whatever you want
        }
    }]
}; 
```

作为旁注（与答案无关），您的代码存在一些问题。您不需要添加`extend`到您的过滤器配置，因为您没有扩展它，并且它不需要了解您的模型。`header`您的列定义中的配置已被弃用，而是支持`text`执行相同的操作。默认情况下，列是可过滤的，因此您不需要`filterable: true`. 如果您在过滤器功能配置中指定列过滤器，则无需在列级别指定它。

# bash - 根据年龄重命名文件

> ID：12494208
> 
> 赞同：1
> 
> 时间：2012-09-19T11:55:23.060
> 
> 标签：bash, shell

我有一个脚本

```
for d in $(find /home/users/*/personal/*/docs/MY -type d); do
    find $d -maxdepth 1 -type f -amin -10
done 
```

它将列出在 Linux 服务器中以 10 分钟为周期创建的 MY 目录中的所有文件。我正在寻找一种方法，通过添加前缀 old_ 来重命名所有这些搜索到的匹配条件的文件。我的意思是如果脚本找到文件`aaaa`and `bbbb`，然后将它们重命名为`old_aaa`and `old_bbbb`。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:47:07.400

让我们`find`为您找到所有文件：

```
find /home/users/*/personal/*/docs/MY -type f -amin +10 -print0 |  
while IFS= read -r -d $'\0' path; do
    dir=$(dirname "$path")
    name=$(basename "$path")
    if [[ $name != old_* ]]; then
        echo mv "$path" "$dir/old_$name"
    fi
done 
```

当您对它的工作感到满意时，删除“回声”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:33:13.333

执行以下操作：

```
for d in $(find /home/users/*/personal/*/docs/MY -type d); do
    find $d -maxdepth 1 -type f -amin -10 | { read bn; basename "$bn"; } | rename "s/()/old_\$1/"
done 
```

另请注意，`-amin -10`指的是过去 10 分钟内访问的文件，包括过去 10 分钟内创建的文件，但也可能包含其他文件。

**更新**：
另一种方法可能比上述方法更快，因为它使用`mv`命令重命名，因此不涉及正则表达式，如下所示：

```
for d in $(find /home/users/*/personal/*/docs/MY -type d); do
    find $d -maxdepth 1 -type f -amin -10 | { read bn; basename "$bn"; } | { read fn; mv "$fn" "old_$fn"; }
done 
```

**更新 2**：
我更新了上面的两个命令以修复 OP 在评论中指出的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:11:21.570

如果您不想要 old_old_old_old_... 文件，您应该尝试以下操作：

```
find "$d" -maxdepth 1 -type f -amin -10  -exec grep -q -v "old_" {} \; -exec mv "{}" "old_{}" \; 
```

PS：我会评论上一篇文章，但我不被允许。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:02:28.377

使用选项`-exec`：

```
find "$d" -maxdepth 1 -type f -amin -10 -exec mv "{}" "old_{}" \; 
```

注释：

1.  使用引号确保空格无关紧要。对于上面的循环，您应该使用

    ```
    find "/home/users/"*"/personal/"*"/docs/MY" -type d 
    ```

    这不是绝对必要的，但最好把它变成一种习惯，这样你就不会在重要的*时候*忘记它。

    另请注意，`*`必须在引号*之外。*

2.  周围的引号`{}`保护特殊字符，以便`find`命令看到它们（否则，shell 会尝试解释它们）。出于同样的原因，`\`在`;`

**[编辑]**您可能想要在查找中添加一个`\! -name "old_*"`，这意味着“不要重命名已经以`_old`”开头的文件。

# java - Sunflow 渲染中的错误

> ID：12494218
> 
> 赞同：1
> 
> 时间：2012-09-19T11:56:00.397
> 
> 标签：java, rendering, raytracing

我一直在使用 Sunflow 渲染引擎源，并注意到使用点光源时出现错误，任何其他灯光类型都不存在错误，所以试图找出它可能是什么以及我是否可以修复它..

如果您查看图像，您会看到球体的左边缘是一个黑暗区域，除了镜子之外的所有着色器都会发生这种情况我只是想知道是否有人看过这个或知道我可以从哪里开始查看代码以尝试修理它。

图像使用 3 点光源，所有颜色都设置为 0,0,255，包括镜面着色器。

看[这里](http://www.flickr.com/photos/79306379@N04/8002781301/in/photostream "渲染对象的图片")的图片。

# windows - 使用 Windows DIR 命令按时间戳对文件进行排序

> ID：12494219
> 
> 赞同：2
> 
> 时间：2012-09-19T11:56:01.373
> 
> 标签：windows, sorting, batch-file, timestamp, dir

我想用 DIR 按它们的时间戳对以下文件进行排序，该时间戳在文件名中定义 - 最早的在前：Timestamp = YYYYDDMM

```
NAME_20121410.dat
NAME_20121509.dat
NAME_20121609.dat 
```

结果应如下所示：

```
NAME_20121509.dat
NAME_20121609.dat
NAME_20121410.dat 
```

我如何通过单线实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:38:36.450

由于日期格式很愚蠢，您需要先拆分文件名并对重新排列的名称进行排序。
不是一个衬里，但它可以工作（在批处理文件中）。

```
@echo off
(
  for %%A in (*_*.dat) do @(
    call set "name=%%A"
    call set "nameDate=%%name:*_=%%"
    call set "Year=%%nameDate:~0,4%%"
    call set "Day=%%nameDate:~4,2%%"
    call set "Month=%%nameDate:~6,2%%"
    call echo %%Year%%%%Month%%%%Day%% %%name%%
  )
) | sort | (
  for /F "tokens=1,*  delims= " %%A in ('more') DO @echo %%B
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T18:11:50.177

如果你可以使用 PowerShell，试试这个：

```
PS II> ls *.dat | sort {$_ -replace '(\d{2})(\d{2})\.*','$2$1'} 
```

# matlab - 获取区域的高程

> ID：12494220
> 
> 赞同：0
> 
> 时间：2012-09-19T11:56:09.787
> 
> 标签：matlab, matrix, area, elevation

我需要以米为单位，以米为单位，在 1 平方公里的地面上的特定点。每个点相距 5 米，这意味着总共有 40,000 个特定点。每个点的高程都将存储在 200x200 矩阵中。

我曾尝试使用 Google Maps Elevation API，但我认为我需要请求的数据量将超过服务条款。我还需要在 Matlab 上使用高程数据，但阅读 Google API 的服务条款，我相信我将仅限于使用 Google Maps 本身中的数据。

请问你能给我建议一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:00:27.423

在阅读了 Google 海拔 API 的所有条款和条件后，我相信您可以在 Metlab 中将其用于个人用途。但是，如果您打算发布结果或从数据中派生的任何内容，则需要在其中包含谷歌地图......但这可能是指向仅绘制 200x200 点的地图的链接形式 - 一个十五分钟的工作敲门;）

去吧 ：）

# php - PHP删除嵌套数组

> ID：12494222
> 
> 赞同：0
> 
> 时间：2012-09-19T11:56:14.453
> 
> 标签：php, arrays

`$templates`我有一个看起来像这样的数组：

```
 Array
(
    [0] => Array
        (
            [displayName] => First Template
            [fileName] => path_to_first_template
        )

    [1] => Array
        (
            [displayName] => Second Template
            [fileName] => path_to_second_template
        )

    [2] => Array
        (
            [displayName] => Third template
            [fileName] => path_to_third_template
        )

) 
```

我想让它看起来像这样：

```
 Array
(
    [path_to_first_template] => First Template
    [path_to_second_template] => Second Template
    [path_to_third_template] => Third Template
) 
```

也就是说，我希望`fileName`嵌套数组的 成为新数组的键并`displayName`成为它的值。

有没有一种漂亮的方法可以做到这一点而不必遍历数组。我没有运气搜索，因为我不知道要搜索什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:01:44.887

这是一个经典`foreach`的行动：

```
$result = array();
foreach($array as $row) {
    $result[$row['fileName']] = $row['displayName'];
}; 
```

这是一种“聪明”的方法：

```
$result = array();
array_walk($array, function($row) use (&$result) {
    $result[$row['fileName']] = $row['displayName'];
}); 
```

如您所见，第二种方法并不比第一种更好。唯一的优点是理论上你可以堆积第二种形式，因为它是一个单一的表达式，但实际上它已经是一个足够长的表达式，所以你不想这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:01:36.847

在您的数组中循环并创建一个新数组：

```
$newArray = array();
foreach($array as $val){
    $newArray[$val['fileName']] = $val['displayName'];
}
print_r($newArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:01:48.687

```
$ret = array()
foreach ($templates as $template) {
    $ret[$template["fileName"]] = $template["displayName"];
} 
```

# javascript - 如果存在具有特定 CSS 类的元素，则执行 Javascript

> ID：12494224
> 
> 赞同：1
> 
> 时间：2012-09-19T11:56:16.043
> 
> 标签：javascript, jquery, html, css, asp.net-mvc

`validation-errors`如果用户在文本框中输入了不正确的值，我有一个页面会显示一个带有“”类的错误 div 。

当显示错误 div 时，有没有办法执行 javascript 函数（它向按钮添加 CSS 属性）？该函数当前在 中调用`window.onload`。

如果窗口已更改/添加了元素，有没有办法执行 javascript 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:02:28.733

```
$('.validation-errors').bind('DOMSubtreeModified', function () {
  if ($('.validation-errors').length) { 
    // code
  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:00:23.250

如果页面上有 jQuery：

```
if ($('.validation-errors').length){ /*your code here */ } 
```

在纯 JS 中会是这样的：

```
if (document.getElementsByClassName("validation-errors").length){ /*your code here */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:02:47.180

如果你可以使用 jQuery，你可以做

```
$(".validation-errors").live(function() {/* do whatever you want when your error div exists */ }); 
```

# extjs - extjs 树空文件夹节点再次显示根

> ID：12494226
> 
> 赞同：0
> 
> 时间：2012-09-19T11:56:20.423
> 
> 标签：extjs, tree, extjs4

我尝试在树面板中显示文件系统。我用 json 数据喂我的树，它工作得很好！

但是当我有一个空文件夹时，树文件夹（当它部署时）再次向我显示完整的树。在我的服务器中，我发送了一个没有子属性的 json 文件。

这是我的树代码

```
Ext.onReady(function () {
    var treeStore = Ext.create('Ext.data.TreeStore', {
        proxy: {
            type: 'ajax',
            url: '/File/Tree'
        },
        root: {
            text: 'Files root',
            id: 'root',
            expanded: true
        }
    });
    var treeUp = Ext.create('Ext.tree.Panel', {
        id: 'TreeFileSystem',
        title: 'TEST',
        useArrows: true,
        store: treeStore,
        rootVisible: false,
        renderTo: 'Tree',
        height: 350,
        listeners: {
            itemClick: function (view, record) {
            }
        }
    });
}); 
```

还有一个我的json代码示例

```
[
{"cls":"first-level","expanded":"false","children":[
    {"cls":"first-level","expanded":"false","children":[
        {"leaf":"true","text":"..."},
        {"leaf":"true","text":"..."}
        ],"text":"..."}
    ],"text":"..."},
{"text":"..."}] 
```

有人有帮助我的想法吗？

谢谢！

大卫

编辑：

我的 JSON 的另一个示例

```
[
{"path":"...","cls":"first-level","expanded":"false","children":[
    {"path":"...","cls":"first-level","expanded":"false","children":[
        {"path":"...","cls":"first-level","expanded":"false","children":[],"text":"BOBFOLDER1"},
        {"path":"...","cls":"first-level","expanded":"false","children":[],"text":"BOBFOLDER2"},
        {"path":"...","cls":"first-level","expanded":"false","children":[],"text":"BOBFOLDER3"}
    ],"text":"BOB"},
    {"path":"...","cls":"first-level","expanded":"false","children":[
        {"path":"...","expanded":"false","text":"OTHERFOLDER1"}
    ],"text":"OTHER"}
],"text":"20508322"}] 
```

我解释说 -> BOBFOLDER1、BOBFOLDER2、BOBFOLDER3 包含文件并且没有箭头（我无法部署它，这是好的行为）。但是 OTHERFOLDER1 不包含文件并且有一个箭头再次显示根目录（与我在评论中给出的图片相同）这是问题所在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:35:11.720

尝试在所有节点中设置 puts loaded: true （或者如果您使用模型配置，请在模型中为“已加载”创建字段并将其默认为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:07:54.860

名为 的节点`OTHER`显示为非叶节点。put`"leaf":"true"`对应的 JSON 数据。

IE

```
[
{"cls":"first-level","expanded":"false","children":[
    {"cls":"first-level","expanded":"false","children":[
        {"leaf":"true","text":"..."},
        {"leaf":"true","text":"..."}
        ],"text":"..."}
    ],"text":"BOB"},
{"text":"OTHER","leaf":"true"}] 
```

# visual-c++ - VC++ DLL（非 MFC）：记录信息的不同可靠方式有哪些

> ID：12494227
> 
> 赞同：0
> 
> 时间：2012-09-19T11:56:21.187
> 
> 标签：visual-c++, logging, trace

我正在为 C# 使用[SWIG](http://www.swig.org/)（简化包装器和接口生成器）的 VC++ DLL。DLL 不使用 ATL 或 MFC，它被设置为仅使用标准 Windows 库。现在由于一些内存问题，我想将格式化消息从函数输出到日志文件。有什么不同的方法来做到这一点？是否有我可以使用的预先存在的跟踪类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:12:09.053

我只知道 3 种不同的方法来做到这一点：

1.  使用[现有的 C++ 日志库之一](https://stackoverflow.com/questions/696321/best-logging-framework-for-native-c)。这是最灵活的方法，因为您可以从许多不错的功能中受益，例如格式化、不同的附加程序等

2.  使用[OutputDebugString](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)函数。此函数将消息发送到调试器，但默认情况下不将其放入任何文件。

3.  实现您自己的简单记录器

我希望这有帮助。

# php - Magento 模块中的 Mydomain 错误

> ID：12494228
> 
> 赞同：7
> 
> 时间：2012-09-19T11:56:27.443
> 
> 标签：php, magento, b2b

我正在本地机器上为 Magento 安装 B2B 扩展，没有任何问题。但是在对客户端服务器执行相同操作时，我收到以下错误：

```
404 Not Found

The server can not find the requested page:

mydomain.com/errors/report.php?id=264218583315&skin=default (port 80)
Please forward this error screen to mydomain.com's WebMaster. 
```

我需要在哪里进行更改？我在 Observer.php 文件中替换了以下第 33 行。

```
 Mage::app()->getResponse()->setRedirect(Mage::helper('adminhtml')->getUrl("customer/account/login")); 
```

和

```
Mage::app()->getResponse()->setRedirect("http://mydomain.com/magento/index.php/customer/account/login")); 
```

当我插入网址时

```
http://mydomain.com/magento/index.php/customer/account/login 
```

直接在浏览器中它工作正常。但这里它重定向到 404 错误页面。

我是否需要对 Magento 中的任何文件或其他配置进行一些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T05:59:58.377

我猜这是配置或 B2B 扩展安装错误。您的配置存储在 core_config 表中，也尝试重新安装 B2B 扩展。正如 LittleBigDev 所提到的，这也可能是访问权限的问题。并检查本地和服务器上的 magento 版本是否相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T00:18:40.020

文件的访问权限应该是 644。对于文件夹应该是 755。对于 Mage 文件夹的文件和 PEAR lib 文件应该是 550

您还应该检查文件所有者设置。

有关更多信息，请查看[http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions/](http://www.magentocommerce.com/wiki/groups/227/resetting_file_permissions/)

# zend-framework - 在模块内自动加载 Zend 表单

> ID：12494237
> 
> 赞同：1
> 
> 时间：2012-09-19T11:57:21.843
> 
> 标签：zend-framework, zend-form

我有一个非常奇怪的问题。我需要加载这两个模块的所有资源。

我在`application.ini`.

```
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] =  "" 
```

问题是它对于我创建的 2 个模块（包括模型和表单）运行良好，加载时没有任何问题。然后我创建了第三个模块，它加载控制器没有任何问题，但是当我尝试在该模块中调用 Form 类时它抛出了致命错误。

```
Fatal error: Class 'Test_Form_Test' not found in /xx/application/modules/test/controllers/IndexController.php on line 14 
```

您可以加载多少个模块资源有任何限制吗？问题是什么？

# zend-framework2 - zend framework 2 简单集成

> ID：12494238
> 
> 赞同：3
> 
> 时间：2012-09-19T11:57:26.447
> 
> 标签：zend-framework2

我计划使用 zend 框架 2 构建一个项目。但我发现设置 zf2 非常困难。设置框架并开始工作并不容易。

我正在寻找的是复制所需的 zf2 文件，放入项目并开始工作。

就像在 cakephp 中一样，您需要更改数据库配置并开始工作。

任何人都可以帮助解决这个问题。这对许多其他开发人员也很有用。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:01:21.387

你试过[SkeletonApplication](https://github.com/zendframework/ZendSkeletonApplication/)吗？它提供了您需要的一切：预设置引导、目录结构、基本应用程序配置。

只需将其克隆到您的 Web 目录并确保它也`vendor/ZF2`被克隆（`--recursive`标志）。

这是目前开始新 ZF2 项目的最简单方法。

如果您需要进一步的帮助，请更具体地说明您的问题。

// 编辑：虽然使用 composer 或至少 git 直接提取所有内容是有意义的，但您可以从 Git 下载项目（SekeletonApplication 和 ZF2）。在我看来，你不应该在这里太懒惰。使用作曲家等将为您节省大量可以花在实施上的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T11:53:19.380

I had the same issue as you. I found the Skeleton application easy and quick to install, but I didn't need the translations that are included. As a result I created a stripped down, bare bones version which you are welcome to use.

You will find the [ZendMinimumApplication](https://github.com/vascowhite/ZendMinimumApplication) on github.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:06:18.600

在不使用命令行的情况下设置 ZF2 比使用它更像是一个皮塔饼。当然，您可以下载 SkeletonApplication，然后您可以下载 ZF2 Core Library 并将其放入您的 include_path，但这不是很好。

我真的建议学习命令行。我自己是 Windows 用户，起初讨厌它，但在解决了第一个问题之后，我 - 现在 - 发现它真的很方便。

如果您在设置或理解所有内容时遇到问题，您可能会发现我的教程很有帮助，您可以在这里找到：[Zend Framework 2 Installation on Xampp for Windows](http://samminds.com/2012/07/zend-framework-2-installation-on-xampp-for-windows/)

# c++ - buffer[index] 与 *buffer 占用相同数量的周期吗？

> ID：12494241
> 
> 赞同：-1
> 
> 时间：2012-09-19T11:57:29.690
> 
> 标签：c++, performance, optimization, low-level

```
char buffer[424242] = {0}; 
```

是`buffer[index]`一样快`*buffer`吗？

```
for (int i = 0; i < SIZE; ++i) {
  buffer[i] = 42;
}

char* end = buffer + SIZE;
for (char* pos = buffer; pos != end; ++pos) {
  *pos = 42;
} 
```

我想我的问题是，是否有任何汇编指令可以在单个周期中将内存中的位置加上和偏移设置为给定值？

LEA 似乎以这种方式加载地址并将其相乘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:19:03.910

不确定这是您期望的答案，但您是否还有任何性能问题需要解决？

您的问题标签列表包含“优化”：如果您的代码中唯一可用的优化是在编写`*buffer`或`buffer[]`.

如果你真的有性能问题，你应该首先分析你的代码来找出瓶颈是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T11:58:53.873

`*buffer`至少和 一样快`buffer[index]`。取决于`index`. 如果`index == 0`，它们将同样快。

根据您的编辑：

```
char& end = buffer + SIZE;
for (char* pos; pos != end; ++pos) {
  *pos = 42;
} 
```

调用未定义的行为，因为您没有初始化`pos`.

根据您的第二次编辑：

首先编写代码以提高可读性，配置文件并可能仅在获得一些具体结果后更改。

```
for (int i = 0; i < SIZE; ++i) {
  buffer[i] = 42;
} 
```

更具可读性，坚持下去。

# xamarin.ios - UIImagePickerController 后 DialogViewController 框架调整大小

> ID：12494242
> 
> 赞同：1
> 
> 时间：2012-09-19T11:57:34.360
> 
> 标签：xamarin.ios, uiimagepickercontroller, dialogviewcontroller

我对 DialogViewController 有一些问题。这是来自 xamarin monotouch examples(BubbleCell) 的修改示例，显示了问题[dowload](http://www.dropbox.com/sh/2ep8ua1bplorj57/4LWXDtaOy-/BubbleCell.zip)。

不久，我有来自[TweetStation](http://github.com/migueldeicaza/TweetStation)的 UIImagePickerController ，它收集个人资料照片的图像。和下面的 DialogViewController，它收集有关用户的一些信息。作为 DVC 的最后一行，我有自定义 UITableViewCell 和文本字段。如果我只是单击该字段，它将正常工作（我将 ContentOffset 设置为一般的 UIScrollView，并且 textfiled 移动到键盘上方）。但是如果我先点击图片（调用UIImagePickerController），然后收集图片（或者不，不管），然后点击textfiled，那么DVC的框架将显示不正确（调整框架大小）。

要查看问题运行项目，请按登录->与机器人聊天->单击最后一行的文本文件->查看正确的动画->单击键盘上的返回->单击图像->选择图片（或不选择，无论如何）->再次单击 textfiled -> 看到错误的动画

DVC 上的 TableView.ScrollEnabled=false 是强制属性。

我怎么解决这个问题 ？

谢谢

# java - 在边框布局中组件的顶部（z 顺序）添加 JComponent

> ID：12494245
> 
> 赞同：1
> 
> 时间：2012-09-19T11:57:40.000
> 
> 标签：java, swing, z-index, z-order, border-layout

边框布局非常流行，因为它可以拉伸其内容以适应父组件。所以我有一些用 布局的 JComponent，`BorderLayout.CENTER`我需要在它的顶部显示另一个 JComponent。作为某种属性窗口或其他东西。有什么常见的方法可以做到这一点，还是我应该重建整个应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:05:17.547

> 我有一些使用 BorderLayout.CENTER 布局的 JComponent，我需要在其顶部显示另一个 JComponent

1.  有两种（三种方式）

    *   利用`GlassPane`

    *   使用`JLayer (Java7)`,基于`JXLayer (Java6)`

    *   在有一些的情况下使用`JViewport`（不是`Component`不是）（需要的数字是- - ）`Container``Swing GUI``JFrame``JScrollPane``JPanel`

2.  用于面积`CardLayout`_`JFrames CENTER`

3.  （拍摄到黑暗）调用`(re)validate`并`repaint()`最接近当前代码块中的最后一个代码行，用于在视图`Container`之间切换`JPanels`

编辑

你也可以使用[OverlayLayout](http://www.java2s.com/Tutorial/Java/0240__Swing/1401__OverlayLayout.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:03:48.923

您可以使用[分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)组件。

# configuration - 如何强制 MSBuild 清理或重建？

> ID：12494248
> 
> 赞同：31
> 
> 时间：2012-09-19T11:57:51.283
> 
> 标签：configuration, msbuild, cruisecontrol.net

我正在使用脚本中的 MSBuild 来编译我的项目。我注意到它只是构建而不是清理/重建。

我有以下内容：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Build" ToolsVersion="4.0">
<Target Name="Build">
    <MSBuild Projects="$(MSBuildProjectDirectory)\myproj.csproj" Targets="Build" Properties="OutputPath=$(MSBuildProjectDirectory)\..\bin\" />
 </Target> 
```

如何强制清理/重建？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2015-05-07T20:58:12.173

> "%windir%\Microsoft.NET\Framework\v4.0.30319\MSBuild" Project.sln /p:Configuration=Release /t:Rebuild

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-19T14:10:14.830

改变

```
<MSBuild Projects="$(MSBuildProjectDirectory)\myproj.csproj"
  Targets="Build"
  Properties="OutputPath=$(MSBuildProjectDirectory)\..\bin\" /> 
```

至

```
<MSBuild Projects="$(MSBuildProjectDirectory)\myproj.csproj"
  Targets="Clean;Build"
  Properties="OutputPath=$(MSBuildProjectDirectory)\..\bin\" /> 
```

或者

```
<MSBuild Projects="$(MSBuildProjectDirectory)\myproj.csproj" Targets="Rebuild"
  Properties="OutputPath=$(MSBuildProjectDirectory)\..\bin\" /> 
```

有关更多详细信息，请查看[MSBuild 任务文档](http://msdn.microsoft.com/en-us/library/z7f65y0d.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-02T07:02:33.497

总是尝试使用

```
<MSBuild Projects="$(MSBuildProjectDirectory)\myproj.csproj"
  Targets="Clean;Build"
  Properties="OutputPath=$(MSBuildProjectDirectory)\..\bin\" /> 
```

因为根据[这篇 MSDN 文章](https://msdn.microsoft.com/en-us/library/5tdasz7h.aspx)，当您的解决方案中有多个项目使用“重建”作为目标时，可能会导致清理和构建以并行方式发生。这可能会导致项目依赖项出现问题。

但是当您使用“Clean and Build”作为目标时，只有在清理完所有项目后才会开始构建。

# java - 如何使用java和jsp和extjs将java arraylist转换为json数组存储数据

> ID：12494254
> 
> 赞同：0
> 
> 时间：2012-09-19T11:58:16.873
> 
> 标签：java, jsp, extjs3

有没有办法使用jsp和java for extjs将数组列表转换为json存储输入数据。意味着我需要从 jsp 页面和 java arraylis 获取 json 存储的数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:37:50.143

在这里，希望这对您有所帮助...我在这里从数据库中获取状态值..

```
 String response = "id,State#";
        List stateList = new ArrayList<>();

        //DB call

        for (int i = 0; i < stateList.size(); i++) {
            response += stateList.get(i).gets_code() + ",";
            response += stateList.get(i).getS_name() + "#";
        }
        StringTokenizer st = new StringTokenizer(response , "|");
        String finalMsg = null;
        String str1 = null;
        while (st.hasMoreElements()) {
            String token = st.nextToken();
            finalMsg = token;
        }
        JSONObject object = new JSONObject();
        stbuffer.append("{\"root\":[");
        String[] data = finalMsg.split("#");
        int len = data.length;
        String[] headings = data[0].split(",");
        for (int x = 1; x < len; x++) {
            String[] data1 = data[x].split(",");
            int len1 = data1.length;
            for (int y = 0; y < len1; y++) {
                object.put(headings[y], data1[y]);

            }
        stbuffer.append(object);
        stbuffer.append(",");

        }
        stbuffer.append("]}");
        String result = stbuffer.toString();
        result = result.replace(",]", "]"); 
```

# php - php yii 从查询中获取列结果

> ID：12494257
> 
> 赞同：0
> 
> 时间：2012-09-19T11:58:22.567
> 
> 标签：php, sql, yii

我做了一个查询，它返回了一个结果。我不知道如何检索这些值。我只需要一列值

```
 //print_r($_POST['Components']);
            $criteria = new CDbCriteria;
            $criteria->condition = "(original_asset_number = '". $_POST['Components']['original_asset_number'] ."')";
            $fixedAsset=FixedAsset::model()->findAll($criteria);
            print_r($fixedAsset);
            //$fixed_asset_id = $fixedAsset->fixed_asset_id; 
```

我将如何从记录中获取 id，因为它只会返回 1 条记录

@GBD

我试过了

```
public function actionCreate()
    {
        $model = new Components;
        $model_fixedAsset = new FixedAsset;
        $model_comAsset = new ComAsset;

        // Uncomment the following line if AJAX validation is needed
        // $this->performAjaxValidation($model);

        if(isset($_POST['Components']))
        {
            $model->attributes=$_POST['Components'];

            // Check if asset exist and get PK
            if( $_POST['Components']['original_asset_number'] != "" ){
                //print_r($_POST['Components']);
                $criteria = new CDbCriteria;
                $criteria->condition = "(original_asset_number = :original_asset_number)";
                $criteria->params = array(":original_asset_number" =>  $_POST['Components']['original_asset_number'] );
                $fixedAsset = FixedAsset::model()->findAll($criteria);
                //print_r($model_fixedAsset);
                $id = $fixedAsset->fixed_asset_id;
                print_r("model:". $id);
            }

            /*if($model->save())
                $this->redirect(array('view','id'=>$model->component_id));*/
        }

        $this->render('create',array(
            'model'=>$model,
            'model_fixedAsset'=>$model_fixedAsset,
            'model_comAsset'=>$model_comAsset,
        ));
    } 
```

但我得到错误

```
2012/09/19 13:49:26 [error] [php] Trying to get property of non-object (/opt/dam/protected/controllers/ComponentsController.php:85)
Stack trace:
#0 /opt/dam/yii-1.1.12.b600af/framework/web/filters/CFilterChain.php(134): ComponentsController->runAction()
#1 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(292): CFilterChain->run()
#2 /opt/dam/yii-1.1.12.b600af/framework/web/CController.php(266): ComponentsController->runActionWithFilters()
#3 /opt/dam/yii-1.1.12.b600af/framework/web/CWebApplication.php(283): ComponentsController->run()
#4 /opt/dam/yii-1.1.12.b600af/framework/web/CWebApplication.php(142): CWebApplication->runController()
#5 /opt/dam/yii-1.1.12.b600af/framework/base/CApplication.php(162): CWebApplication->processRequest()
#6 /opt/dam/index.php(13): CWebApplication->run()
REQUEST_URI=/dam/index.php?r=components/create
in /opt/dam/protected/controllers/ComponentsController.php (85)
in /opt/dam/index.php (13) 
```

我要做的是通过使用该记录中的唯一字段来检索记录的id，即`original_asset_number`id被称为`fixed_asset_id`

print_r(model_fixed_asset);

```
Array ( [0] => FixedAsset Object ( [_md:private] => CActiveRecordMetaData Object ( [tableSchema] => CMysqlTableSchema Object ( [schemaName] => [name] => fixed_asset [rawName] => `fixed_asset` [primaryKey] => fixed_asset_id [sequenceName] => [foreignKeys] => Array ( ) [columns] => Array ( [fixed_asset_id] => CMysqlColumnSchema Object ( [name] => fixed_asset_id [rawName] => `fixed_asset_id` [allowNull] => [dbType] => varchar(20) [type] => string [defaultValue] => [size] => 20 [precision] => 20 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [description] => CMysqlColumnSchema Object ( [name] => description [rawName] => `description` [allowNull] => 1 [dbType] => varchar(30) [type] => string [defaultValue] => [size] => 30 [precision] => 30 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [original_asset_number] => CMysqlColumnSchema Object ( [name] => original_asset_number [rawName] => `original_asset_number` [allowNull] => 1 [dbType] => varchar(30) [type] => string [defaultValue] => [size] => 30 [precision] => 30 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [flag] => CMysqlColumnSchema Object ( [name] => flag [rawName] => `flag` [allowNull] => 1 [dbType] => tinyint(1) [type] => integer [defaultValue] => 0 [size] => 1 [precision] => 1 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [disposal_date] => CMysqlColumnSchema Object ( [name] => disposal_date [rawName] => `disposal_date` [allowNull] => 1 [dbType] => date [type] => string [defaultValue] => [size] => [precision] => [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) ) [_e:private] => [_m:private] => ) [columns] => Array ( [fixed_asset_id] => CMysqlColumnSchema Object ( [name] => fixed_asset_id [rawName] => `fixed_asset_id` [allowNull] => [dbType] => varchar(20) [type] => string [defaultValue] => [size] => 20 [precision] => 20 [scale] => [isPrimaryKey] => 1 [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [description] => CMysqlColumnSchema Object ( [name] => description [rawName] => `description` [allowNull] => 1 [dbType] => varchar(30) [type] => string [defaultValue] => [size] => 30 [precision] => 30 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [original_asset_number] => CMysqlColumnSchema Object ( [name] => original_asset_number [rawName] => `original_asset_number` [allowNull] => 1 [dbType] => varchar(30) [type] => string [defaultValue] => [size] => 30 [precision] => 30 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [flag] => CMysqlColumnSchema Object ( [name] => flag [rawName] => `flag` [allowNull] => 1 [dbType] => tinyint(1) [type] => integer [defaultValue] => 0 [size] => 1 [precision] => 1 [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) [disposal_date] => CMysqlColumnSchema Object ( [name] => disposal_date [rawName] => `disposal_date` [allowNull] => 1 [dbType] => date [type] => string [defaultValue] => [size] => [precision] => [scale] => [isPrimaryKey] => [isForeignKey] => [autoIncrement] => [_e:private] => [_m:private] => ) ) [relations] => Array ( [components] => CManyManyRelation Object ( [_junctionTableName:private] => [_junctionForeignKeys:private] => [limit] => -1 [offset] => -1 [index] => [through] => [joinType] => LEFT OUTER JOIN [on] => [alias] => [with] => Array ( ) [together] => [scopes] => [name] => components [className] => Components [foreignKey] => com_asset(fixed_asset, component) [select] => * [condition] => [params] => Array ( ) [group] => [join] => [having] => [order] => [_e:private] => [_m:private] => ) ) [attributeDefaults] => Array ( [flag] => 0 ) [_model:private] => FixedAsset Object ( [_md:private] => CActiveRecordMetaData Object *RECURSION* [_new:private] => [_attributes:private] => Array ( ) [_related:private] => Array ( ) [_c:private] => [_pk:private] => [_alias:private] => t [_errors:private] => Array ( ) [_validators:private] => [_scenario:private] => [_e:private] => [_m:private] => ) ) [_new:private] => [_attributes:private] => Array ( [fixed_asset_id] => FA0008 [description] => Spectrum House - Exit panel [original_asset_number] => B0795 [flag] => 0 [disposal_date] => 2011-11-04 ) [_related:private] => Array ( ) [_c:private] => [_pk:private] => FA0008 [_alias:private] => t [_errors:private] => Array ( ) [_validators:private] => [_scenario:private] => update [_e:private] => [_m:private] => ) ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:11:35.810

您可以通过以下方式获得价值：

```
 $fixedAsset=FixedAsset::model()->findAll($criteria);
 $id = $fixedAsset[0]->fixed_asset_id; 
```

但是如果你的查询总是返回一条记录，那么最好使用 find 函数

```
$criteria = new CDbCriteria;
$criteria->condition = "(original_asset_number = :original_asset_number')";
$criteria->params = array(
    ':original_asset_number' => $_POST['Components']['original_asset_number'],
);
$fixedAsset=FixedAsset::model()->find($criteria);
if(!is_null($fixedAsset)) {
   $id = $fixedAsset->fixed_asset_id
} 
```

# iphone - ios核心数据NSFetchedResultsControllerDelegate崩溃

> ID：12494260
> 
> 赞同：0
> 
> 时间：2012-09-19T11:58:26.070
> 
> 标签：iphone, ios, core-data

我不断收到 NSFetchedResultsControllerDelegate 的此错误。
不知道如何处理它，因为它偶尔发生。

我确实创建了同步的记录，但仍然..

任何想法为什么会这样？

```
- (Activity *)createActivityWithDictionary:(NSDictionary*)dict
{
    @synchronized([DBController sharedManaged])
    {
        Activity *act = [Activity activityWithDictionary:dict inManagedObjectContext:self.managedObjectContext];
        [self saveContext];
        return act;
    }
}

Date/Time:       2012-09-18 22:55:53.686 -0700
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Last Exception Backtrace:
0   CoreFoundation                 0x3724188f __exceptionPreprocess + 163
1   libobjc.A.dylib                0x34f46259 objc_exception_throw + 33
2   CoreFoundation                 0x37244a9b -[NSObject doesNotRecognizeSelector:] + 175
3   CoreFoundation                 0x37243915 ___forwarding___ + 301
4   CoreFoundation                 0x3719e650 _CF_forwarding_prep_0 + 48
5   CoreData                       0x36a78f4d -[NSFetchedResultsController(PrivateMethods) _managedObjectContextDidChange:] + 2401
6   Foundation                     0x37aa64ff __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 19
7   CoreFoundation                 0x3720d547 ___CFXNotificationPost_block_invoke_0 + 71
8   CoreFoundation                 0x37199097 _CFXNotificationPost + 1407
9   Foundation                     0x37a1a3eb -[NSNotificationCenter postNotificationName:object:userInfo:] + 67
10  CoreData                       0x36a00839 -[NSManagedObjectContext(_NSInternalNotificationHandling) _postObjectsDidChangeNotificationWithUserInfo:] + 77
11  CoreData                       0x36a0031d -[NSManagedObjectContext(_NSInternalChangeProcessing) _createAndPostChangeNotification:withDeletions:withUpdates:withRefreshes:] + 305
12  CoreData                       0x36a09d01 -[NSManagedObjectContext(_NSInternalChangeProcessing) _processRecentChanges:] + 1245
13  CoreData                       0x369fd145 -[NSManagedObjectContext save:] + 201
14  PalFinds                       0x000a57cb -[DBController saveContext] (DBController.m:75)
15  PalFinds                       0x000a8dff -[DBController createActivityWithDictionaries:] (DBController.m:852)
16  PalFinds                       0x00086649 -[PFMe finishRequest:andRestConnection:] (PFMe.m:1986)
17  PalFinds                       0x0002e17d -[RestConnection connectionDidFinishLoading:] (RestConnection.m:326)
18  Foundation                     0x37addc29 __65-[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]_block_invoke_0 + 17
19  Foundation                     0x37a356d9 -[NSURLConnectionInternalConnection invokeForDelegate:] + 29
20  Foundation                     0x37a356a3 -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:] + 199
21  Foundation                     0x37a355c5 -[NSURLConnectionInternal _withActiveConnectionAndDelegate:] + 61
22  CFNetwork                      0x36ed97f5 URLConnectionClient::_clientDidFinishLoading(URLConnectionClient::ClientConnectionEventQueue*) + 193
23  CFNetwork                      0x36ece4a5 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 425
24  CFNetwork                      0x36ece599 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 669
25  CFNetwork                      0x36ece599 URLConnectionClient::ClientConnectionEventQueue::processAllEventsAndConsumePayload(XConnectionEventInfo<XClientEvent, XClientEventParams>*, long) + 669
26  CFNetwork                      0x36ece1a3 URLConnectionClient::processEvents() + 107
27  CFNetwork                      0x36ece0d9 MultiplexerSource::perform() + 157
28  CoreFoundation                 0x37215ad3 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
29  CoreFoundation                 0x3721529f __CFRunLoopDoSources0 + 215
30  CoreFoundation                 0x37214045 __CFRunLoopRun + 653
31  CoreFoundation                 0x371974a5 CFRunLoopRunSpecific + 301
32  CoreFoundation                 0x3719736d CFRunLoopRunInMode + 105
33  GraphicsServices               0x33956439 GSEventRunModal + 137
34  UIKit                          0x30f43cd5 UIApplicationMain + 1081
35  PalFinds                       0x000038bf main (main.mm:14)
36  PalFinds                       0x00003878 start + 40 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:00:46.137

我知道这可能看起来很牵强但是我有一个非常相似的问题并且我已经实现了所有这些方法然后我意识到我已经为 fetchedREsultsController 注释掉了我的版本......一旦我把它放回没有更多的 sigbart 并且像魅力。

我要说的是，有时错误并不总是显而易见的。

我们需要查看更多代码才能弄清楚。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:03:27.417

看起来它正在尝试回调委托，而委托没有实现它应该实现的方法。

我在想`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`要么`controllerDidChangeContent:`

你在你的 中实现了这些方法`NSFetchedResultsControllerDelegate`吗？

# datagrid - 如何禁用 DataGrid 中的内置 ErrorSummary？

> ID：12494263
> 
> 赞同：0
> 
> 时间：2012-09-19T11:58:34.760
> 
> 标签：datagrid, silverlight-5.0

我想禁用`ErrorSummary`我的`DataGrid`，但我找不到一种直观的方法来做到这一点，有人可以指出我该怎么做吗？谢谢埃利奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:58:05.440

没有内置方法可以禁用错误摘要。您必须将样式应用于不包含它的 DataGrid。您可以采用[MSDN 上的默认样式](http://msdn.microsoft.com/en-us/library/cc278066%28v=vs.95%29.aspx)并从 XAML中删除[ValidationSummary元素。](http://msdn.microsoft.com/en-us/library/system.windows.controls.validationsummary%28v=vs.95%29.aspx)

# c - 这是一个clang错误吗？typedef 的匿名结构

> ID：12494267
> 
> 赞同：1
> 
> 时间：2012-09-19T11:58:51.467
> 
> 标签：c, struct, clang, typedef, anonymous-struct

我有一个像这样的结构的typedef

```
typedef struct { double x, y; } ACVector; 
```

当我在调试器中查看此实例时，我会得到非常奇怪的输出，例如

```
(lldb) p _translation
(ACVector) $1 = {
  (double) x = -5503.61
  (double) y = -5503.61
  (CLLocationDegrees) latitude = -5503.61
  (CLLocationDegrees) longitude = -1315.67
}

(lldb) p _translation.x
(double) $2 = -5503.61
(lldb) p _translation.y
(double) $2 = -5503.61 
```

如果我将 ACVector 的定义更改为

```
typedef struct ACVector { double x, y; } ACVector; 
```

并在调试器中做同样的事情我得到了我所期望的

```
(lldb) p _translation
(ACVector) $1 = {
  (double) x = -5503.61
  (double) y = -1315.67
} 
```

对 typedef 使用匿名结构是合法的

## 好的，所以更多的代码

_translation 的声明是作为一个实例变量

```
ACVector    _translation; 
```

我使用这个函数来初始化变量

```
ACVector ACVectorMake( double x, double y )
{
    ACVector    r;
    r.x = x;
    r.y = y;
    return r;
} 
```

像这样

```
_translation = ACVectorMake( d[xp[0]].x-s[xp[0]].x,  d[xp[0]].y-s[xp[0]].y ); 
```

原本是一个

```
ACVector ACVectorMake( double x, double y )
{
    return (ACVector){x,y};
} 
```

以及调试器输出中的纬度和经度元素来自哪里，请注意您无法单独访问它们

## 响应在其他地方定义的 ACVector 的更多信息

我有两个定义

```
#define ACVectorZero        (ACVector){(double)0.0,(double)0.0}
#define ACVectorUnit        (ACVector){(double)1.0,(double)1.0} 
```

有趣的是，紧随其后的是

```
#define ACDegreesFromDegreesMinutesSeconds( d, m, s )                       (CLLocationDegrees)(d+m/60.0+s/3600.0)
#define ACLocationFromDegreesMinutesSeconds( yd, ym, ys, xd, xm, xs )       (CLLocationCoordinate2D){ACDegreesFromDegreesMinutesSeconds( xd, xm, xs ), ACDegreesFromDegreesMinutesSeconds( yd, ym, ys )} 
```

这可以解释也许可以解释 ACVector 中纬度和经度的出现

是否搜索了 ACVector 的每次出现，包括在库中，找不到任何其他出现的 ACVector 正在定义

### 这都是使用Xcode 4.5 Gold Master

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:05:41.317

我敢打赌，您可能会在变量声明中使用`struct ACVector _translation`而不是。`ACVector _translation`

请向我们展示更多代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:17:05.603

根据

[C语言标准n1256](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)

在 6.7.4 函数说明符下

```
12
The one exception allows the value of a restricted pointer to be carried
 out of the block in which it (or, more
precisely, the ordinary identifier used to designate it) is declared when
that block finishes execution. 
```

例如，这允许 new_vector 返回一个向量。

```
typedef struct { int n; float * restrict v; } vector;
vector new_vector(int n)
{
vector t;
t.n = n;
t.v = malloc(n * sizeof (float));
return t;
} 
```

所以是的，现在我们可以说

**对 typedef 使用匿名结构是合法的**

因此，现在您正在做其他事情，这会为您带来意外行为..

# xcode - 当键盘出现在DetailView中时如何禁用MasterView

> ID：12494276
> 
> 赞同：0
> 
> 时间：2012-09-19T11:59:24.430
> 
> 标签：xcode, uisplitviewcontroller, uikeyboard, disabled-control

我想知道当键盘出现在 DetailView 中时是否有可能（以及如何）禁用任何 MasterView 控件，直到它消失。当然，所有这些都发生在基于拆分视图的应用程序中。

---Prince解决方案的更新---

主视图控制器.h

```
@property (strong, nonatomic) UIView *MasterView; 
```

主视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    MasterView=self.view;

    self.detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
    self.detailViewController = (DetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
} 
```

细节视图控制器.m

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    ((MasterViewController *)self.parentViewController).MasterView.userInteractionEnabled=NO;

    return YES;
} 
```

此代码原样使应用程序崩溃，并出现“未知选择器”错误。我如何绑定代表；不知道是不是这个问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:16:31.940

使用 UITextField 的委托并绑定委托：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   MasterView.userInteractionEnabled = NO;

   .......
   return YES;
} 

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
   MasterView.userInteractionEnabled = YES;
   [textField resignFirstResponder];
   return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:58:03.407

我找到了解决方案！

在 MasterView viewDidLoad 中：

```
//---registers the notifications for keyboard---
    // to see if keyboard is shown / not shown
    [[NSNotificationCenter defaultCenter]
     addObserver: self
     selector:@selector(keyboardDidShow:)
     name:UIKeyboardDidShowNotification
     object:self.view.window];

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(keyboardDidHide:)
     name:UIKeyboardDidHideNotification
     object:nil]; 
```

进而...：

```
//----------Handling Keyboard Appearence---
-(void) keyboardDidShow:(NSNotification *) notification {
    [self.tableView setUserInteractionEnabled:NO];
}

//---when the keyboard disappears---
-(void) keyboardDidHide:(NSNotification *) notification {
    [self.tableView setUserInteractionEnabled:YES];
}

//---before the View window disappear---
-(void) viewWillDisappear:(BOOL)animated {
    //---removes the notifications for keyboard---
    [[NSNotificationCenter defaultCenter]
     removeObserver: self
     name:UIKeyboardWillShowNotification
     object:nil];

    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:UIKeyboardWillHideNotification
     object:nil];
} 
```

# python - 解析损坏的 XML 文件并使用 XPATH

> ID：12494277
> 
> 赞同：1
> 
> 时间：2012-09-19T11:59:25.773
> 
> 标签：python, xml

我正在嗅探网络上的数据包并使用 Scapy 和 Python 从原始有效负载中恢复 XML 数据。当我组装框架时，我得到的 XML 数据缺少一些标签。因此，我无法使用 etree.parse() 函数解析 XML 文件。有什么方法可以解析损坏的 XML 文件并使用 XPATH 表达式遍历并获取我想要的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:21:41.620

我确信我的解决方案过于简单，无法涵盖所有​​情况，但是当缺少结束标签时，它应该能够涵盖简单的情况：

```
>>> def fix_xml(string):
    """
    Tries to insert missing closing XML tags
    """
    error = True
    while error:
        try:
            # Put one tag per line
            string = string.replace('>', '>\n').replace('\n\n', '\n')
            root = etree.fromstring(string)
            error = False
        except etree.XMLSyntaxError as exc:
            text = str(exc)
            pattern = "Opening and ending tag mismatch: (\w+) line (\d+) and (\w+), line (\d+), column (\d+)"
            m = re.match(pattern, text)
            if m:
                # Retrieve where error took place
                missing, l1, closing, l2, c2 = m.groups()
                l1, l2, c2 = int(l1), int(l2), int(c2)
                lines = string.split('\n')
                print 'Adding closing tag <{0}> at line {1}'.format(missing, l2)
                missing_line = lines[l2 - 1]
                # Modified line goes back to where it was
                lines[l2 - 1] = missing_line.replace('</{0}>'.format(closing), '</{0}></{1}>'.format(missing, closing))
                string = '\n'.join(lines)
            else:
                raise
    print string 
```

这似乎正确地添加了缺少的标签 B 和 C：

```
>>> s = """<A>
  <B>
    <C>
  </B>
  <B></A>"""
>>> fix_xml(s)
Adding closing tag <C> at line 4
Adding closing tag <B> at line 7
<A>
  <B>
    <C>
  </C>
</B>
  <B>
</B>
</A> 
```

# sql - 如何让非程序员更直观地生成报告？

> ID：12494280
> 
> 赞同：0
> 
> 时间：2012-09-19T11:59:33.417
> 
> 标签：sql, user-interface, charts, reporting

我制作了一个用于生成 SQL 的 GUI，类似于 MS Access 可视化查询设计器，目的是让我们的客户服务团队制作自己的报告。但即使在设计了整个事情之后，我也可以看到他们不确定如何继续生成新报告。

经过长期的经验，SQL 对我来说非常直观，但是对于非程序员来说，分组、聚合函数、各种日期/字符串函数等事情并不容易。

如何让非程序员更容易使用 GUI 构建 SQL？

![http://i45.tinypic.com/345j48k.png](../Images/c2b93d98b906e857d4160bac3ebc05c8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:04:21.913

也许您可以应用 SQL 的简化转录。想想像[https://ifttt.com/wtf](https://ifttt.com/wtf)这样的东西。这与视觉部分相结合可能更容易理解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:09:08.230

```
Please follw up :
1) combo box for selecting database
2) combo box for selecting  table for selected database
3) One Grid is display columns for selecting table.
4) user select,update column display name, order of display, aggregate of column option, group on column option.
5) finally display result in grid as per selection of column setting. 
```

# repository - Artifactory 不会下载 asm-analysis 3.2

> ID：12494283
> 
> 赞同：1
> 
> 时间：2012-09-19T11:59:40.903
> 
> 标签：repository, artifactory

我在使用 Artifactory 2.6.1（和 2.6.4；升级没有帮助）时遇到了一个问题，这让我完全目瞪口呆。

基本上，当在 Netbeans 7.1.2 或 7.2 中启动一个新项目时，它会开始从 Artifactory 服务器下载一大堆文件。所有这些工作，除了 ASM 分析 3.2。

在不详细介绍我尝试过的所有其他事情（例如 zapping 缓存）的情况下，我将其追踪到以下内容：当 Artifactory 尝试下载[http://repo1.maven.org/maven2/asm/asm-analysis/ 3.2/asm-analysis-3.2.pom](http://repo1.maven.org/maven2/asm/asm-analysis/3.2/asm-analysis-3.2.pom)，tcpdump/Wireshark 显示它从未收到“HTTP/1.0 200 OK”；它只接收 TCP ACK。在同一台机器上，从命令行使用 curl 和相同的标头（唯一的区别似乎是 curl 添加了“Accept: */* ”标头），它运行良好。

这台机器背后有一个代理，它可以清除顽皮的内容，它确实有它的特性，但是可以通过任何其他方式下载 POM 文件而没有问题的事实似乎排除了代理作为问题的根源。

Java 版本是 1.5.0，在虚拟服务器上的 Centos 6.0 上运行。

有人知道从哪里开始寻找吗？

谢谢！

# java - 如何级联仅保留新实体

> ID：12494288
> 
> 赞同：6
> 
> 时间：2012-09-19T11:59:51.127
> 
> 标签：java, jpa, many-to-many, persistence, eclipselink

我无法弄清楚如何为以下实体正确设置 JPA 持久性（使用 EclipseLink 和 transaction-type="RESOURCE_LOCAL"）：

```
@Entity
public class User {
    // snip various members

    @ManyToMany
    private List<Company> companies;

    public void setCompanies(List<Company> companies) {
           this.companies = companies;
    }
}

@Entity
public class Company {
    // snip various members
} 
```

我要做的是为公司列表设置级联，这样，如果以前没有保留的新公司在列表中，它将自动与用户一起保留：

```
User newUser = new User();

Company newCompany = new Company();
List<Company> companies = new ArrayList<Company>();
companies.add(newCompany);

newUser.setCompanies(companies);

entityManager.persist(newUser); 
```

通过在@ManyToMany 上设置**cascadeType.PERSIST**，这工作得很好。但是，如果公司列表中包含一个预先保留的公司，我会得到一个 MySQLIntegrityConstraintViolationException，因为它正在尝试使用相同的主键保留（插入）一个新公司：

```
User newUser = new User();

Company oldCompany = companyDAO.find(oldCompanyId);
List<Company> companies = new ArrayList<Company>();
companies.add(oldCompany);

newUser.setCompanies(companies);

entityManager.persist(newUser); 
```

那么应该如何设置，以便新公司自动持久化，而现有公司只是简单地添加到用户-公司映射中呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T12:13:36.513

在休眠中考虑级联的最好方法是，如果您在父级上调用方法 X，那么它将在每个子级上调用方法 X。所以是的，如果您对用户调用persist，那么它将对每个孩子调用persist，无论它们是否已被持久化。

级联不能理想地处理这种情况。Cascade persist 适用于所有子级都由父级创建的情况（例如，如果一个用户有一个“技能”列表），更适用于一对多。

在这种情况下，我个人不会使用级联。在不需要时公然使用级联可能会减慢应用程序的速度。

如果您觉得必须使用级联，则可以使用级联合并。当实体尚未持久化时，Merge 将持久化它们。然而，合并有一些非常奇怪的副作用，这可能是你没有注意到它起作用的原因。考虑以下示例：

```
x = new Foo();
y = new Foo();

em.persist(x);
Foo z = em.merge(y);

//x is associated with the persistence context
//y is NOT associated with the persistence context
//z is associated with the persistence context 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T13:44:57.850

您的问题是您正在破坏持久性上下文。托管对象应该只引用其他托管对象。因此，让您的新对象引用现有的分离对象是错误的。

您需要做的是执行 find() 以获取现有分离对象的托管版本并让您的新对象引用它，然后对其调用 persist。

您也可以使用 merge() 而不是 persist ，它应该解析对象的引用。请注意，合并不会使分离的对象成为托管对象，它会返回托管的分离对象的副本。

# java - 如何制作带有许多复选框的表格

> ID：12494289
> 
> 赞同：1
> 
> 时间：2012-09-19T11:59:51.710
> 
> 标签：java, jsf

我有一个关于 selectManyCheckboxes 的问题。我的意思是，**很多**。我在 bean 中有一个包含 85 个选项的列表，我必须在 4 列中显示，每列应该有大约 25 个选项。我的代码片段是这样的：

```
<p:selectManyCheckbox id="groups" value="#{shareOfferBean.selectedGroupIds}" layout="pageDirection" label="#{amsg.groups}"
                                          converter="groupConverter">
    <f:selectItems value="#{shareOfferBean.groups}" var="g" itemValue="#{g.id}" itemLabel="#{g.name}"/>
</p:selectManyCheckbox> 
```

有了这个，我只得到了 1 列和 85 行中的所有复选框，这在页面上真的很难看。我怎样才能限制行数，以便它们中断并进入另一列？感谢所有尝试提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:20:52.180

如何使用 UI:repeat 循环。

```
<ui:repeat var="x" value="#{tableBean.kList}">
   <p:selectManyCheckbox id="groups" value="#{shareOfferBean.selectedGroupIds}" layout="pageDirection" label="#{amsg.groups}"
                                      converter="groupConverter">
<f:selectItems value="#{shareOfferBean.groups}" var="g" itemValue="#{g.id}" itemLabel="#{g.name}"/>
</p:selectManyCheckbox>
 </ui:repeat> 
```

你可以做这样的事情。我尽力测试它。你可以试一试

# f# - 我们可以在同一个文件中扩展一个模块吗

> ID：12494295
> 
> 赞同：3
> 
> 时间：2012-09-19T12:00:37.153
> 
> 标签：f#

为了与 c# 互操作，我执行以下操作

```
namespace foo

type a = ...

module myhelper =
    let d = ...

open myhelper

type b = ...

module myhelper = // module name duplication error
    ... 
```

我想添加更多可以使用type b的函数，所以我必须在type b声明之后编写它们，但我不想每次都创建一个新模块，我该怎么办？

全局模块可以提供帮助，但是，我不希望我的 c# 代码使用 mymodule.a 访问我的类型。所以我没有使用全局模块，而是使用全局命名空间

有没有更好的结构思路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:31:41.917

这种微妙的相互依赖性往往会使您的库随着它的增长而变得难以处理。F# 有助于防止这种情况发生，或者至少强制它是显式的。

根据您的缩写示例，您可以定义一个接口（`myhelper`目标和`b`实现）或使用相互递归的类型：

```
type MyHelper =
  static member M1() = ()
  static member M2() = let b = B() in b.M4()
and B() =
  member x.M3() = MyHelper.M1()
  member x.M4() = () 
```

# c++ - 将字符串和变量打印到 glwindow

> ID：12494297
> 
> 赞同：1
> 
> 时间：2012-09-19T12:00:50.360
> 
> 标签：c++, screen

我一直在寻找这个问题的答案一段时间，但我真的找不到。我没有使用过剩，所以请不要只回答过剩。

我要做的是将变量和文本发送到游戏屏幕，这样我就可以为玩家制作一个带有一些反馈的 UI，比如他们当时携带的金额。（所以不是调试屏幕）

我正在使用 c++ 和 opengl。

如果我需要向任何人提供更多信息，请询问，我会尽力为您提供。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:45:50.360

如果您可以使用 GL1.x，请使用位图字体的经典参考：http: [//nehe.gamedev.net/tutorial/bitmap_fonts/17002/](http://nehe.gamedev.net/tutorial/bitmap_fonts/17002/)

如果您需要相关内容，请修改上面的示例以使用顶点数组/顶点缓冲区对象而不是 glRasterPos 函数。

高级方式是使用 FreeType 来渲染 truetype 字体。这是一个[示例](http://damianpaz.wordpress.com/2011/10/09/load-truetype-fonts-with-freetype2-and-build-an-opengl-vertex-array-to-render-text/)。

# windows - DebugView 没有输出

> ID：12494300
> 
> 赞同：22
> 
> 时间：2012-09-19T12:01:01.463
> 
> 标签：windows, debugging, debugview

我已经在 Windows 7 和 Windows 8 64 位机器以及 Windows 7 32 位机器上安装了 DebugView 4.79。在所有这些上，当以管理员身份启动时，我都看不到 DebugView 的输出。我正在尝试调试一个使用 CLI/C++ 组件的应用程序，其中包含 ATLTRACE 调用。

我启用了捕获事件、捕获 win32 和捕获全局 win32，但什么也没看到，所以我不确定发生了什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-09T12:59:52.380

默认情况下，在 Vista/Server2008 及更高版本中禁用 DbgPrint() 输出。注册表中的以下设置应启用调试打印。

1.  打开注册表
2.  导航`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Debug Print Filter`
3.  添加以下值`DEFAULT`: `REG_DWORD`:`0xFFFFFFFF`
4.  重启

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-23T13:38:36.943

如果“调试打印过滤器”不存在，您应该手动创建它

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T12:09:58.227

听起来[4.79 中可能存在错误](http://forum.sysinternals.com/dbgviewexe-100cpu_topic28058_post136750.html?KW=DebugView#136750)。

尝试回滚到 4.76

清单：

*   以管理员身份运行/提升权限
*   启用详细内核输出（如果适用）
*   另外，确保 .exe 未被[阻止](https://stackoverflow.com/questions/3072359/unblocking-a-dll-on-a-company-machine-how)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-26T06:04:02.037

您需要确保您的进程是否在同一用户上运行。EX：您的进程正在 SYSTEM 用户中运行。您的调试视图正在当前用户上运行。

如果不是同一个用户，那么您将需要以提升模式启动调试视图。

# tinymce - Tinymce 仅垂直调整大小

> ID：12494306
> 
> 赞同：8
> 
> 时间：2012-09-19T12:01:44.373
> 
> 标签：tinymce

无论如何强制tinymce仅[调整](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_resize_horizontal)垂直大小？水平调整大小时会破坏我的布局。

这样它的工作原理与默认文本区域相同`resize: vertical;`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-10-27T17:53:02.307

```
tinymce.init({
  selector: 'textarea',  // change this value according to your HTML
  resize: true
}); 
```

调整大小选项有 3 个值：

1.  `false`: 禁用。
2.  `true`：仅启用`Vertical`调整大小
3.  `'both'`：启用两个调整大小方向

> 检查[文档](https://www.tinymce.com/docs/configure/editor-appearance/#resize)

**重要说明**：要使其正常工作，您必须启用该`statusbar`选项，默认情况下已启用，但如果将其`statusbar: false`启用，则必须重新启用它`statusbar: true`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T15:09:22.257

您可以使用：

```
tinyMCE.init({
            // other stuff...
            theme_advanced_resizing : true,
            theme_advanced_resize_horizontal : false                       
    }); 
```

# url-rewriting - URL重写以将旧主机重定向到新主机

> ID：12494312
> 
> 赞同：0
> 
> 时间：2012-09-19T12:02:11.973
> 
> 标签：url-rewriting

我对 Url Rewrites 一无所知，但我们最近将域名从 更改`oldcompanyname.co.uk`为`newcompanyname.co.uk`.

我们被告知`oldcompanyname.co.uk`要不再出现在搜索结果中，我们需要将旧网址重定向到新网址。

我已安装`ISAPI_Rewrite 3`但未能成功使重定向工作。

在我们的开发服务器上，我尝试使用以下代码将任何请求重定向`http://tm-devtest2/tmintranet`到`http://tm-devtest2/tmintranet`.

```
# Helicon ISAPI_Rewrite configuration file
# Version 3.1.0.94

RewriteEngine On

RewriteCond %{HTTP_HOST} ^.*internet*$
RewriteRule ^$ http://tm-devtest2/tmintranet/ [R,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:41:05.347

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !newcompanyname.co.uk$ [NC]
RewriteRule ^(.*)$ http://www.newcompanyname.co.uk/$1 [L,R=301] 
```

仅当同一个实例同时服务于两个域时才需要 RewriteCond。L 表示“Last”，即停止重写 NC 表示“no case” R 表示 Redirect 301 表示“Permanently Moved”

# c++ - IBO 比 GL_TRIANGLE_STRIP 更糟？

> ID：12494315
> 
> 赞同：6
> 
> 时间：2012-09-19T12:02:17.753
> 
> 标签：c++, opengl

出于学习目的，我决定使用 3 种方法绘制球体

1.  显示列表
2.  Voa Vbo (GL_TRIANGLE_STRIPE)
3.  Vao Vbo 和 Ibo (GL_TRIANGLES)

我读到使用 ibo 可以使程序运行得更快，但这是真的吗？对于 100 个切片和 100 个堆栈的球体，第 2 种方法产生 40400 个顶点，而第 3 个“仅”产生 19802 个顶点。通过这样做，我每 32 个字节 = 659136 个字节节省 20598 个顶点。

1.  verticesSize=(slices*4)*(stacks+1);

2.  IBO verticesSize=(slices*2)*(stacks-1)+2;

但是，我需要创建索引数组，在这种情况下，索引的大小为 118800（创建所有面所需的索引数）*4（无符号整数的大小）=475200 字节！第二种方法以 15fps 渲染 1000 个球体，而第三种方法以几乎 6pfs 渲染 1000 个球体

1.  将索引数组从 GL_TRIANGLE 转换为 GL_TRIANGLE_STRIP 是否会提供比第二种方法更有效的方法？
2.  使用 ibo 渲染球体是个坏主意吗？
3.  为什么它更慢？索引数组中的顺序有什么问题吗？

或者，也许我写的代码完全错误，这就是为什么它如此挣扎:(如果有人感兴趣，这是我的代码[http://pastebin.com/raw.php?i=74jLKV5M](http://pastebin.com/raw.php?i=74jLKV5M)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:42:57.040

glDrawElements 调用是错误的。count 参数应该是索引的数量，而不是数字乘以 4。尝试更改它。

使用索引而不是三角形条应该几乎总是更快。事实上，如果驱动程序也在幕后使用索引来渲染三角形条带，我不会感到惊讶。

此外，正如我在评论中提到的，您拥有索引的顺序会影响性能。然而，对于您的领域，您使用的索引模式可能是最优化的，即使如此，它所产生的差异也很小。

# android - 在android中获取联系人的公司名称？

> ID：12494322
> 
> 赞同：1
> 
> 时间：2012-09-19T12:02:49.990
> 
> 标签：android, cursor, android-cursoradapter

嗨，我正在联系人应用程序上做一个应用程序我使用下面的代码获得了联系人 ID 和显示名称现在我想要的是公司名称单独与联系人 ID 和显示名称。我怎样才能获得公司名称？

```
 private void populateContactList() {
    // Build adapter with contact entries

    Cursor cursor = getContacts();
    fields = new String[] { ContactsContract.Data.DISPLAY_NAME,
            ContactsContract.Contacts._ID};

    contactqueryAdaptor = new Contactquery_adaptor(this, R.layout.row,
            cursor, fields, new int[] { R.id.applese });

} 
```

//getContacts()

```
 private Cursor getContacts() {
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME};
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
            + (mShowInvisible ? "0" : "1") + "'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
            + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs,
            sortOrder);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:05:33.470

根据此：[Get company name form Content Provider in android using new API's](https://stackoverflow.com/questions/4553044/get-company-name-form-content-provider-in-android-using-new-apis)，您需要查询 ContactsContract.Data 并使用这些别名[http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds。组织.html](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Organization.html)

# ios - Core Plot 1.0 Retina 图像未正确显示

> ID：12494324
> 
> 赞同：2
> 
> 时间：2012-09-19T12:02:57.120
> 
> 标签：ios, core-plot, retina-display

我的应用程序即将完成，并在核心情节和他们敬业的员工的帮助下添加了一些很棒的东西。我的问题与使用带有视网膜显示器的图像有关。我有一个注释，它是一个语音气泡的图片。当我在模拟器中运行应用程序时，它在常规分辨率下显示正常，但是当我切换到视网膜时，图像被裁剪。请参阅下面的图片。我有一个名为 Bubble 的 .png，我添加了另一个名为 Bubble@2x 的文件，它的大小是原来的两倍，我认为这是我需要做的。那没有用。所以我尝试设置view.contentScale，见下面的代码。但似乎没有任何效果。有人知道我忘记做什么了吗？再次感谢。

```
{
    //first annotation
    NSValue *value = [self.myData objectAtIndex:index];
    CGPoint point = [value CGPointValue];
    NSString *number1 = [NSString stringWithFormat:@"(%.2f, ", point.x];
    NSString *number2 = [NSString stringWithFormat:@"%.2f)", point.y];
    NSNumber *x = [NSNumber numberWithFloat:point.x];
    NSNumber *y = [NSNumber numberWithFloat:point.y];    
    NSArray *anchorPoint = [NSArray arrayWithObjects: x, y, nil];
    NSString *final = [number1 stringByAppendingString:number2];

    //second annotation        
    UIImage *bubble = [UIImage imageNamed:@"Bubble.png"];
    CPTImage *fillimage = [CPTImage imageWithCGImage:bubble.CGImage];
    CPTBorderedLayer *imageLayer = [[CPTBorderedLayer alloc] init];
    //imageLayer.contentsScale = [[UIScreen mainScreen] scale]; //tried this
    imageLayer.frame = CGRectMake(0, 0, 150, 80);
    //imageLayer.contentsScale = 2.0f;  //and this

    imageLayer.fill = [CPTFill fillWithImage:fillimage];

    CPTTextLayer *textLayer = [[CPTTextLayer alloc] initWithText:final style:annotationTextStyle];
    _annotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];        
    _annotation.contentLayer = textLayer;        
    _annotation.displacement = CGPointMake(90.0f, 5.0f);
    _annotation.rotation = M_PI * .03f;

    _picAnnotation = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
    _picAnnotation.contentLayer = imageLayer;
    _picAnnotation.displacement = CGPointMake(75.0f, 5.0f);

} 
```

在该代码之后，我放置了两个注释。如您所见，一个有效，另一个无效。![Retina显示屏](../Images/049ce84d4031e2aa16dab2445d7ff90d.png)

![常规展示](../Images/cf6c72b42439ead181f4c1e772cd0f09.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T23:41:09.850

如果您需要支持 Retina 图像，则应`scale`在创建时传递图像。`CPTImage`

```
CPTImage *fillimage = [CPTImage imageWithCGImage:bubble.CGImage
                                           scale:bubble.scale]; 
```

# java - Socket 而不是 ServerSocket

> ID：12494328
> 
> 赞同：2
> 
> 时间：2012-09-19T12:03:13.907
> 
> 标签：java, sockets, serversocket

虽然 ServerSocket 类被设计为一般监听传入的连接，但我可以只使用 Socket 对象并在 java 中检索传入的数据吗？如果是，那么我是否需要采取任何额外的预防措施？

编辑：感谢您的回答......但是虽然在 UDP 中只有一个套接字类——DatagramSocket 对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:07:10.723

`ServerSocket`用于绑定（）和接受（）到本地端口。尽管名称，`ServerSocket`不是一个`Socket`，它只用于接收连接。完成后，您会`Socket`从接受传入请求中获得一个，这是一个通信管道。我不相信您可以在`Socket`不使用某种连接接收器（例如`ServerSocket`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:08:52.080

Socket 不能接收传入的连接：只有 ServerSocket 可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T12:07:41.723

使用套接字时，一端必须伸出并连接到另一端（并且另一端必须监听该连接）。伸出的一端通常称为客户。正在侦听的一端称为服务器。

ServerSocket 表示该侦听行为。一旦你的 ServerSocket 接收到一个连接，它就会创建一个 Socket。所以你实际上需要同时使用两者。服务器首先设置一个 ServerSocket，然后使用 accept() 等待连接。一旦连接到达，这将创建一个 Socket。

在某些应用程序中，服务器一直在等待更多连接，而在其他应用程序中，您可以在此时停用 ServerSocket，而只需担心 Socket。

不幸的是，您不能在双方都有客户端（除非您有第三台服务器，两者都在连接），因为必须有人在监听连接。

# php - Wordpress 的 get_comments() 只返回文本，不返回 HTML

> ID：12494329
> 
> 赞同：0
> 
> 时间：2012-09-19T12:03:24.177
> 
> 标签：php, wordpress, comments, wordpress-theming

我正在使用`get_comments()`在我的自定义主题中检索特定 wordpress 帖子的评论。问题是输出中没有 HTML。

例如，当用户向评论添加 URL 时，在管理控制台中它显示为链接，但使用`get_comments()`它只返回文本。

由于此页面上没有涵盖此内容的过滤器或其他选项：http: [//codex.wordpress.org/Function_Reference/get_comments](http://codex.wordpress.org/Function_Reference/get_comments)我不太清楚出了什么问题。之后我应该用javascript来管理它吗？

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:07:04.673

我猜你可以应用“the_content”过滤器；

```
<?php foreach (get_comments() as $comment): ?>
    <div class="comment">
        <?=apply_filters('the_content', $comment->comment_content) ?>
    </div>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:52:13.567

我建议查看现有主题的`comments.php`模板文件，对其进行修改以适合您的目的，然后通过`comments_template()`.

基于 ZURB 的 Foundation Framework 的主题，[例如](https://github.com/drewsymo/Foundation/blob/master/comments.php)使用`wp_list_comments`：

```
<ol class="commentlist">
    <?php wp_list_comments(); ?>
</ol> 
```

看看这是否会给你一个更格式化的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-08T23:30:07.623

您可以使用它，它会显示用户名、日期、头像及其所有 p 标签。

```
 <div class="comments">
        <?php $comments_args = array(
        // change the title of send button 
        'label_submit'=>'Send',
        // change the title of the reply section
        'title_reply'=>'Write a new comment',
        // remove "Text or HTML to be displayed after the set of comment fields"
        'comment_notes_after' => '',
        // redefine your own textarea (the comment body)
        'comment_field' => '<p class="comment-form-comment"><textarea id="comment" name="comment" aria-required="true" placeholder="Type your comment"></textarea></p>',
        );

        comment_form($comments_args); ?>
      </div>
      <div class="comments-form">
        <?php

        $user_id = get_current_user_id();
        $user_specific_comments = get_comments(
            array(
                'post_id' => YOUR_POST_ID,
            )
        );

        wp_list_comments(
            array(
                'per_page' => 10,
            ),

            $user_specific_comments
        );
        ?>
      </div> 
```

# bash - 使用 sed 将引号插入管道分隔线

> ID：12494334
> 
> 赞同：2
> 
> 时间：2012-09-19T12:03:34.390
> 
> 标签：bash, sed

我有一个定制的工具，它使用 SAX 解析 XML 文件并将它们再现为管道分隔的值，行的示例是：

```
name|lastname|address|telephone|age|other info|other info 
```

我想重写每一行，我将使用 bash 脚本执行此操作，但我遇到了一些困难。基本上我想在引号之间设置每个单词，上面一行的一个例子是：

```
"name"|"lastname"|"address"|"telephone"|"age"|"other info"|"other info" 
```

我正在尝试使用 sed 来做到这一点，并且我在这条 sed 行上取得了部分成功

```
sed 's:|:"|":g' 
```

当我得到输出时：name"|"lastname"|"address"|"telephone"|"age"|"other info"|"other info

但我不知道如何为第一个字符和最后一个字符设置引号，有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:06:22.783

你绝对是在正确的轨道上，以下是如何涵盖行首，行尾的特殊情况：

```
 sed 's:|:"|":g;s/^/"/;s/$/"/' 
```

`^`字符锚搜索到行首，`$`字符锚搜索到行尾。

IHTH

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:09:45.013

```
line='name|lastname|address|telephone|age|other info|other info'

echo $line| sed -e 's/|/"|"/g' -e 's/^/"/' -e 's/$/"/' 
```

给出：

```
"name"|"lastname"|"address"|"telephone"|"age"|"other info"|"other info" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T12:17:51.217

一种使用方式`GNU awk`：

```
awk 'BEGIN { FS=OFS="|"; Q="\"" } { for (i=1; i<=NF; i++) $i = Q $i Q }1' 
```

结果：

```
"name"|"lastname"|"address"|"telephone"|"age"|"other info"|"other info" 
```

# xml - 在 Altova StyleVision 中通过 XPath 动态定位布局框

> ID：12494335
> 
> 赞同：0
> 
> 时间：2012-09-19T12:03:35.997
> 
> 标签：xml, altova

与此问题类似：[使用 Altova Stylevision 固定定位](https://stackoverflow.com/questions/12028195/fixed-positioning-with-altova-stylevision/12493924)

但我想用 XPath 表达式动态定位。这应该是可能的，但我无法让它工作。

我有这个 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<strings>
    <p lp="200">first string</p>
    <p lp="300">second string</p>
</strings> 
```

我在我的设计中添加了用户定义模板的内容`/strings/p`，现在我希望它由“lp”属性定位。

对于该任务，我将 XPath 表达式`/strings/p/@ld`作为值添加到公共子组中的左侧属性，以便布局框指向添加的模板。但结果是布局框定位到左边缘，表明 StyleVision 将其视为 0（零）

我还尝试了这个表达式`/strings/p/concat(@lp,'px')`，以便它评估为附加“px”的数字，因为设计是以像素为单位设置的，但我得到相同的结果 - XPath 表达式被评估为 0。
小屏幕截图：http: [//i.imgur.com /yPzzz.png](https://i.imgur.com/yPzzz.png)

谁能帮助如何使用 XPath 在 StyleVision 中定位模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:21:16.863

It seems that it is not layout box that needs to be positioned, but content inside layout box, whatever that is (depending on design).
In that case, dynamic (and absolute) positioning can be done by setting common positioning style attributes to XPath expression as in later example (by concatenation of unit `/strings/p/concat(@lp,'px')` as that's what program expects). And it is important to set "position" style attribute to "absolute" (which may seem like overkill demand as I initially already set that my design is in "absolute positioning mode")

After being able to see expected result, I was soon disappointed that this kind of style positioning is valid only for HTML output. Other output formats does not respect it, and I would be happy to be proven wrong.

In reality, often HTML is not desired output, but some more flexible format. And in such situations I suggest this excellent tool: [XHTML2RTF](http://www.codeproject.com/Articles/7087/XHTML2RTF-An-HTML-to-RTF-conversion-tool-based-on), which transforms XHTML to RTF in regards to positioning elements in XHTML file. Further RTF can be converted to any common format

As conclusion, for my initial problem, using StyleVision was wrong approach. It complicated things while result was limited. For absolute positioning output from XML source I would suggest either scripting language or simple XSLT if possible, and XHTML2RTF tool afterwards

# javascript - 如何使用 REGEX 从 JavaScript 中的字符串替换标记

> ID：12494343
> 
> 赞同：0
> 
> 时间：2012-09-19T12:04:03.483
> 
> 标签：javascript, regex, string, replace

我有这样的模板“text %variable.key% text”。variable.key 是变量。我需要将这些变量重命名为“text”+variable.key+“text”，以使它们工作。

我试图做这样的事情：

```
var tpl = "text %variable.key% text";
tpl = tpl.replace(/%(.*?)%/, function(a,b) {
    return eval('b');
}); 
```

但它也返回一个字符串。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:10:43.237

完全不使用很容易做到`eval`：

```
function getValue(path) {
    var target = this;
    path.split('.').forEach(function (branch) {
        if (typeof target === "undefined") return;
        target = (typeof target[branch] === "undefined") ? undefined : target[branch];
    });

    return target;
} 
```

如果您想从`window`您开始获取属性，只需调用`getValue("path.to.property")`. 如果您想从其他一些根对象开始，请使用`getValue.call(rootObject, "path.to.property")`.

该函数也可以适用于将根对象作为可选的第一个参数，但想法保持不变。

[**看到它在行动**](http://jsfiddle.net/jA3m9/)。

**重要提示：**这在 Internet Explorer < 9 上不起作用，因为`Array.prototype.forEach`它不存在。你可以用

```
if (!Array.prototype.forEach) {
    Array.prototype.forEach = function(fun /*, thisPointer */) {
        var len = this.length;
        if (typeof fun != "function") throw new TypeError();

        var thisPointer = arguments[1];
        for (var i = 0; i < len; i++) {
            if (i in this) {
                fun.call(thisPointer, this[i], i, this);
            }
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:14:36.250

另一个没有 eval() 的变体适用于简单的变量或对象：

```
var var_name = 'value';

// object
var obj = new Object();
 obj.prop = 'some val';

var tpl = "text %obj.prop% text %var_name% text";
tpl = tpl.replace(/%(.*?)%/gi, function(a,b) {
  var iv = b.split('.');
  return (iv.length == 2) ? window[iv[0]][iv[1]] : window[iv[0]];
});

// test
alert(tpl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:08:20.197

```
var tpl = "text %variable.key% text";
tpl = tpl.replace(/%(.*?)%/, function(a,b) {
    return eval(b);// remove quote.
}); 
```

[jsfiddle](http://jsfiddle.net/58gBF/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:09:28.480

您的代码是正确的，但您需要 eval `b`，而不是`'b'`：

```
var tpl = "text %variable.key% text";
tpl = tpl.replace(/%(.*?)%/, function(a,b) {
    return eval(b);
}); 
```

正如评论中提到的，使用 eval 不是要走的路。您也可以像这样获得变量值：

```
var tpl = "text %variable.key% text";
tpl = tpl.replace(/%(.*?)%/, function(a,b) {
    return window[b];
}); 
```

[演示](http://jsfiddle.net/ChmZy/2/)

# actionscript-3 - 如何从其他组件调用公共函数？

> ID：12494352
> 
> 赞同：0
> 
> 时间：2012-09-19T12:04:42.317
> 
> 标签：actionscript-3, apache-flex, flex4.5

我有两个组件 A 和 B。A 有一个公共函数，即“function_A()”。

我如何在不使其成为静态函数的情况下将其称为 B 形式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T15:08:49.477

组件实例基本上是一个对象。因此，您应该始终让组件相互交互，各种 OOP 范式建议对象应该如何交互。

至于视图组件：尽可能避免交互，并尝试通过 MV* (MVC, MVP, MVVM, ...) 模式来实现您的应用程序。起初这似乎更复杂。但是这些设计方法会随着项目的规模和生命周期而扩展。让对象知道并做太多，不是。

# asp.net-mvc-4 - 通过 Spring.Net 进行 SignalR 依赖注入

> ID：12494355
> 
> 赞同：2
> 
> 时间：2012-09-19T12:04:53.517
> 
> 标签：asp.net-mvc-4, spring.net, signalr

我正在尝试通过 Spring.NET 注入依赖项。

首先我创建了一个自定义的 DependencyResolver：

```
 public class SignalRSpringNetDependencyResolver : DefaultDependencyResolver
{
    private IApplicationContext _context;

    public SignalRSpringNetDependencyResolver(IApplicationContext context) 
    {
        _context = context;
    }

    /// <summary>
    /// Gets the application context.
    /// </summary>
    /// <value>The application context.</value>
    public IApplicationContext ApplicationContext
    {
        get
        {
            if (_context == null || _context.Name != ApplicationContextName)
            {
                if (string.IsNullOrEmpty(ApplicationContextName))
                {
                    _context = ContextRegistry.GetContext();
                }
                else
                {
                    _context = ContextRegistry.GetContext(ApplicationContextName);
                }
            }

            return _context;
        }
    }

    /// <summary>
    /// Gets or sets the name of the application context.
    /// </summary>
    /// <remarks>
    /// Defaults to using the root (default) Application Context.
    /// </remarks>
    /// <value>The name of the application context.</value>
    public static string ApplicationContextName { get; set; }

    /// <summary>
    /// Resolves singly registered services that support arbitrary object creation.
    /// </summary>
    /// <param name="serviceType">The type of the requested service or object.</param>
    /// <returns>The requested service or object.</returns>
    public override object GetService(Type serviceType)
    {

        System.Diagnostics.Debug.WriteLine(serviceType.FullName);

        if (serviceType != null && !serviceType.IsAbstract && !serviceType.IsInterface && serviceType.IsClass)
        {
            var services = ApplicationContext.GetObjectsOfType(serviceType).GetEnumerator();

            services.MoveNext();

            try
            {
                return services.Value;
            }
            catch (InvalidOperationException)
            {
                return null;
            }

        }

        else 
        {
           return base.GetService(serviceType);
        }

    }

    /// <summary>
    /// Resolves multiply registered services.
    /// </summary>
    /// <param name="serviceType">The type of the requested services.</param>
    /// <returns>The requested services.</returns>
    public override IEnumerable<object> GetServices(Type serviceType)
    {
        var services = ApplicationContext.GetObjectsOfType(serviceType).Cast<object>();

        services.Concat(base.GetServices(serviceType));

        return services;
    } 
```

**请注意，我转义了接口和抽象类，以便从基础 DefaultDependencyResolver 获取 SignalR 的默认实现**

在这里，我使用 WebActivator 分配了解析器：

```
 public static void PostStart() 
    {

        // Inject Dependencies to SignalR, should be always come before ASP.NET MVC configuration            
        var dependecyResolver = new SignalRSpringNetDependencyResolver(ContextRegistry.GetContext());
        GlobalHost.DependencyResolver = dependecyResolver;
        RouteTable.Routes.MapHubs();

        AreaRegistration.RegisterAllAreas();
        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

    } 
```

但是，SignalR 总是尝试使用我分配的解析器来解决它自己的依赖关系，并且我收到以下错误：

> 'myhub' 集线器无法解决。

我只需要解析器了解其他依赖项（例如我的存储库）并保留 SignalR 服务的默认实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:53:57.613

我认为很难让 Spring.Net 与 SignalR 一起使用

对于当前版本（Spring.Net 1.3.2），很难支持异步编程。Spring.Net 会话管理不能很好地处理`Task<T>`类型。

我最终分两步注入了我的依赖项：

1- 在 WebActivator PostStart 上注册所需的类型：

```
GlobalHost.DependencyResolver.Register(
    typeof(IUserService), 
    () => (UserService)ctx.GetObject("UserService")) 
```

2- 在我的 Hub 构造函数中获取它们：

```
public MyHub() 
{
    _userService =
        DependencyResolver.Current.GetService<IUserService>();
} 
```

# django - 在会话中保存表单集 - Django

> ID：12494359
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:05:10.397
> 
> 标签：django, django-models, django-forms, django-sessions

这里有什么方法可以将表单集存储到会话中吗？

* * *

我的场景是这样的。我有一个表格来填写用户数据和上传用户证书，在下一页（点击下一步的表格）有一个表格可以输入专业详细信息。

是否可以限制使用表单集生成的表单的最大数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:40:05.140

如果我正确理解您的问题 - 如何在会话中保存 from 的状态，然后从 Django 1.4 开始，它实际上提供了一种开箱即用的方法。

[https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

它允许您将表单拆分为多个部分，然后用户可以单独填写。一旦用户填写了任何一个部分，他/她就会转到下一页，此时表单的状态将保存在会话中。填满所有页面后，所有内容都可以保存到数据库中。

此外，在从一个页面转到另一个页面时，您添加了下一页应该是什么的逻辑。

您有一个向导的图像，它在第一页上询问用户想要上传什么类型的内容。然后转到第二页，然后根据第一页的答案，可以出现适当的上传字段 - 视频、音乐或图形字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:05:59.367

我会回答 FormWizard 但如果您不想使用它，您可以简单地创建两个表单。当用户提交第一个表单时，您将其放入会话中，然后生成第二个表单。当他单击反向链接时，您取消腌制保存的数据并预先填写表格。

```
def submitFirstForm(request):
  data = request.POST['data']
  import cPickle        
  request.session['data'] = cPickle.dumps(data)
  ...

 def backBtn(request):
   import cPickle
   data = cPickle.loads(request.session['page'])
   form = DataForm(data)
   ... 
```

# ffmpeg - 无法为 RTSP 配置 FFserver

> ID：12494360
> 
> 赞同：1
> 
> 时间：2012-09-19T12:05:11.930
> 
> 标签：ffmpeg, rtsp, ffserver

我对流媒体世界有点陌生......所以，如果我问了一种愚蠢的问题，请原谅我。

我正在尝试通过 FFserver 通过 RTSP 流式传输我预先录制的文件。

我的配置文件是：

```
RTSPPort 8544
<Feed feed2.ffm>
    File /home/xyz/tmp/feed2.ffm
    FileMaxSize 200K
    ACL allow 127.0.0.1
</Feed>

<Stream test.sdp>
    Feed feed2.ffm
    Format rtsp
    VideoFrameRate 15
    VideoSize 352x240
    VideoBitRate 256
    VideoBufferSize 40
    VideoGopSize 30
    AudioBitRate 64
    StartSendOnKey
</Stream> 
```

启动服务器后，它会给出以下日志：

```
$ ./ffserver -f doc/ffserver.conf
ffserver version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
built on Sep 17 2012 19:46:38 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
configuration: --enable-gpl --enable-libmp3lame --enable-libtheora --enable-libvo-aacenc 
-enable-libvorbis --enable-libvpx --enable-libx264 --enable-version3
libavutil 51\. 54.100 / 51\. 54.100
libavcodec 54\. 23.100 / 54\. 23.100
libavformat 54\. 6.100 / 54\. 6.100
libavdevice 54\. 0.100 / 54\. 0.100
libavfilter 2\. 77.100 / 2\. 77.100
libswscale 2\. 1.100 / 2\. 1.100
libswresample 0\. 15.100 / 0\. 15.100
libpostproc 52\. 0.100 / 52\. 0.100
Wed Sep 19 17:03:32 2012 FFserver started. 
```

现在从我的 VLC 客户端，我尝试输入 URL：rtsp://xxx.xxx.xxx.xxx:8554/test.sdp

但是，发生的情况是，ffserver 上没有响应。

我不知道可能是什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T09:59:22.560

你没有任何东西可以流式传输。你需要开始

```
ffmpeg -i <source> http://localhost:8090/feed2.ffm 
```

如果您使用指令（在您的配置文件中）为 http 启用端口 8090

```
Port 8090 
```

以前有人问过这个问题，但是标记很糟糕，所以我找不到。如果有人找到它，请在此处链接。因为启动一个空服务器似乎很常见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T15:53:33.053

马蒂亚斯是对的。目前，您没有流式传输任何内容。
并且给定的 ffmpeg-command 应该可以工作，但您可能需要考虑，也许 feed 部分是相反的。

如果视频文件已经存储在服务器上，则不需要提要（因为视频本身将作为一个提要）。

```
<Stream test.sdp>
File "path_to_your_file"   #instead of the Feed
...
</Stream> 
```

如果视频文件位于另一台计算机上，则必须先将其流式传输到服务器（请参阅 Matthias 的回答）。

**编辑**：
如果您想在流式传输之前弄乱流，您还需要提要。

# java - log4j 时区

> ID：12494369
> 
> 赞同：3
> 
> 时间：2012-09-19T12:05:28.400
> 
> 标签：java, timezone, log4j

如何更改日志文件名中的 log4j 时区？

我的 log4j.xml 文件：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"> 
    <appender name="daily" class="org.apache.log4j.DailyRollingFileAppender"> 
    <param name="File" value="logs/cimlib.log" />
    <param name="TimeZone" value="Local" />

    <param name="DatePattern" value=".yyyy-MM-dd HH-mm-ss" />
        <layout class="org.apache.log4j.PatternLayout"> 
            <param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss Z} %p %c: %m%n"/> 
        </layout> 
    </appender>     

    <root> 
        <priority value ="info" /> 
        <appender-ref ref="daily" /> 
   </root> 
</log4j:configuration> 
```

如何将 appender 时区设置为本地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:29:14.590

这不是一个可设置的变量。它使用您机器的日期/时间/区域。

# google-analytics - Google Analytics API 不返回每个维度的流量（例如国家/浏览器）

> ID：12494373
> 
> 赞同：1
> 
> 时间：2012-09-19T12:05:33.517
> 
> 标签：google-analytics, analytics, google-analytics-api, web-analytics, web-analytics-tools

当我在一段时间内（例如 2012 年 8 月 1 日至 2012 年 9 月 1 日）内查询由 ga:userDefinesValue 过滤的流量（ga:visits,ga:pageviews）时，我得到一个结果：

```
Your query matched 1 results and the API only returned the following 1 results:

    ga:visits   ga:pageviews 
    7           21 
```

问题是，当我向查询添加任何维度（例如 ga:country 或 ga:pagePath）时，我得到一个空结果集：

```
(none) 
no results found 
```

这种行为的原因可能是什么？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T15:17:59.097

根据您的描述，您声明您使用国家和页面路径作为指标，这将失败，因为它们是维度。

添加 ga:country 作为维度，报告应该可以工作。

# xml - Xstream 嵌套数组问题

> ID：12494376
> 
> 赞同：0
> 
> 时间：2012-09-19T12:05:39.677
> 
> 标签：xml, xstream

我的 XML 结构如下

```
<PaymentData>
  <reserveData>
     <reserveDto>
        <pNumber>
     </reserveDto>
  </reserveData>
</PaymentData> 
```

我的班级结构如下

```
Class PaymentData                                             
   Private ReserveData reserveData                    
Class ReserveData (Xtream alias “reserveData”)        
  Private ReserveDto lReserveDto[];                   
Class ReserveDto  (Xtream alias “reserveDto”)
  Private String pNumber 
```

当我具有上述结构并且 Xtream.fromXML() 不会为 ReserveData 生成值时。

我知道有使用 Xstream Implicit 和 ArrayList 的替代解决方案，如下所示

```
Class PaymentData                                             
   Private ReserveData reserveData                    
Class ReserveData      
  @XStreamImplicit
  ArrayList<ReserveDto> reserveDto                  
Class ReserveDto 
  Private String pNumber 
```

但是我们不想更改为 ArrayList，因为客户端有只能使用数组的限制。请让我知道是否有人对此有解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:31:53.867

[XStream Annotations Tutorial](http://x-stream.github.io/annotations-tutorial.html)建议您可以在`@XStreamImplicit`数组（和映射）以及列表上使用。

# iphone - Find weeks list between two dates

> ID：12494386
> 
> 赞同：-3
> 
> 时间：2012-09-19T12:06:18.930
> 
> 标签：iphone

I need find the weeks list between 2 dates. I have startdate and enddate and the startdate might be any day(eg.Tuesday or Friday) for that start week, and the end date also the same like any day for the end week. how do i find the weeks list.please help me to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:39:42.183

Use NSDateComponents against the current calendar specifying the fromDate and toDate and a components flag os NSWeekCalendarUnit. Then the *week* property of the returned NSDateComponents object will be the number of weeks between the two dates, e.g.:

```
 NSCalendar *currentCalendar = [NSCalendar currentCalendar];
    NSDateComponents *components = [currentCalendar components:NSWeekCalendarUnit
                                                      fromDate:firstDate
                                                        toDate:secondDate options:0];

    NSInteger weeks = components.week; 
```

where 'firstDate' and 'secondDate' are NSDate objects.

# javascript - 链接到新页面时，让有孩子的父母保持打开状态

> ID：12494387
> 
> 赞同：1
> 
> 时间：2012-09-19T12:06:19.617
> 
> 标签：javascript, jquery, html, css, joomla2.5

我有一个垂直手风琴菜单，在悬停时打开，在其他项目悬停时保持打开和关闭。我从@JDandChips 那里得到了很大的帮助来让它工作。

我现在真正需要的是能够选择一个特定的菜单项（虚拟游览）来打开嵌套列表。然后当浏览这个嵌套列表中的每个链接时，它会加载一个新页面（已经这样做了，因为它是 Joomla！）并且嵌套列表仅在这些页面上保持打开状态。然后，当单击另一个链接时，它会再次关闭。这就是我的工作...

```
 <script type="text/javascript">
 $(function () {
 $("ul.menu-main > li").hover(function () {

    //Don't do this again if the same menu is hovered
    if (!$(this).hasClass('selected')) {
        //Ensure any open sub-menu is closed.
        $("li.selected").children("ul").stop(true, true).slideUp(1000);
        $("li.selected").removeClass('selected');
        //Open sub-menu
        $(this).addClass('selected');
        $(this).children("ul").slideDown(1000);
    }
 });
 });
 </script>

<nav>

<ul class="menu-main">
<li class="item-108"><a href="#">Home</a></li>
<li class="item-111 deeper parent"><a href="#">History and Restoration</a>
<ul>
<li class="item-125"><a href="#">History</a></li>
<li class="item-126"><a href="#">The Connection</a></li>
<li class="item-127"><a href="#">Previous Residents</a></li>
<li class="item-128"><a href="#">Restoration</a></li>
<li class="item-129"><a href="#">Sidmouth / Heritage Coast</a></li>
</ul>
</li>
<li class="item-112"><a href="#">Wedding Venue</a></li>
<li class="item-113"><a href="#">Hiring Rooms</a>       </li>
<li class="item-114 deeper parent"><a href="#/virtual-tour"     >Virtual Tour</a><ul><li class="item-132"><a href="#/virtual-tour/entrance-hall" >Entrance Hall</a></li>
<li class="item-133"><a href="#/virtual-tour/amyatt-room-one" >Amyatt Room One</a></li>
<li class="item-134"><a href="#/virtual-tour/amyatt-room-two" >Amyatt Room Two</a></li>
<li class="item-135"><a href="#/virtual-tour/board-room" >Board Room</a></li><li class="item-136"><a href="#/virtual-tour/captain-phillips-room" >Captain Phillips Room</a></li>
<li class="item-137"><a href="#/virtual-tour/function-room" >Function Room</a></li>
<li class="item-138"><a href="#/virtual-tour/gordon-langford-room" >Gordon Langford Room</a></li>
<li class="item-139"><a href="#/virtual-tour/hatton-wood-room" >Hatton Wood Room</a></li>
<li class="item-140"><a href="#/virtual-tour/meeting-room" >Meeting Room</a></li>
<li class="item-141"><a href="#/virtual-tour/rw-sampson-room" >RW Sampson Room</a></li>
<li class="item-142"><a href="#/virtual-tour/first-floor-reception-hallway" >First Floor Reception Hallway</a></li></ul></li>
<li class="item-115"><a href="#">Art and Exhibitions</a></li>
<li class="item-116"><a href="#">Learning</a></li>
<li class="item-117 deeper parent"><a href="#">How Can I help</a>
<ul>
<li class="item-130"><a href="#">Friends of Kennaway House</a></li>
<li class="item-131"><a href="#">Volunteer Opportunities</a></li></ul></li>
<li class="item-118"><a href="#">Gallery</a></li>
<li class="item-119"><a href="#">Contact</a></li>
</ul>

</nav><!-- #nav -->

nav {
position:absolute;
top:190px;
left:0;
width:200px;
min-width:200px;
height:900px;
background:transparent;
z-index:9999;
}

#nav-bg {
position:absolute;
top:200px;
left:0;
width:200px;
height:80%;
background:<?php echo $contactscheme ?>;
}

nav:before {
content:'';
position:absolute;
top:-10px;
right:0;
width:0;
border-top:10px solid transparent; /* height of right point */
border-right:200px solid #570C2A;
z-index:2;
}

nav:after {
content:'';
position:absolute;
top:0;
left:135px;
width:50px;
height:500px;
background:transparent;
-webkit-transform:rotate(2deg);
-moz-transform:rotate(2deg);
-ms-transform:rotate(2deg);
transform:rotate(2deg);
-webkit-box-shadow:<?php echo $boxshadownav ?>;
-moz-box-shadow:<?php echo $boxshadownav ?>;
box-shadow:<?php echo $boxshadownav ?>;
z-index:-1;
}

.menu-main,
.menu-main ul {
max-height:900px;
margin:0;
padding:0;
list-style:none;
text-align:center;
font-size:1.2em;
background:#570C2A;
}

.menu-main li {
line-height:70px;
margin:0;
padding:0;
   }

.menu-main a {
display:block;
color:beige;
text-decoration:none;
    }

.menu-main a:hover, a:focus {
color:darkslategray;
 text-decoration:none;
text-shadow:none;
outline:0 none;
-webkit-transition:250ms linear 0s;
-moz-transition:250ms linear 0s;
-o-transition:250ms linear 0s;
transition:250ms linear 0s;
}

.menu-main a:hover, a:focus {
color:beige;
text-shadow:1px -1px 14px beige;
}

.menu-main ul {
height:auto;
display:none;
}

.menu-main ul li {
font-size:0.6em;
line-height:30px;
}

.menu-main ul a {
background:transparent;
}

li.item-111.parent {
background:#486060;
line-height:22px;
padding:12px 3%;
}

/* -- sub menu styles for History and Restoration  -- */
.item-125, .item-126, .item-127, .item-128, .item-129 {
background:#486060;
}

.item-125 {
border-top:2px dotted <?php echo $listborders ?>;
}

.item-129 {
    border-bottom:2px dotted <?php echo $listborders ?>;
}

/* -- ===end=== -- */

.item-112 {
background:#557171;
}

.item-113 {
background:#663366;
}

.item-114 {
background:#86ACA8;
}

.item-115 {
background:#CD7F72;
}

.item-116 {
background:#BD8A16;
}

li.item-117.parent {
background:#C59F92;
line-height:50px;
padding:12px 3%;
}

/* -- sub menu styles for How Can I Help -- */
.item-130, .item-131 {
background:#C59F92;
}

.item-130 {
border-top:2px dotted <?php echo $listborders ?>;
}

.item-131 {
border-bottom:2px dotted <?php echo $listborders ?>;
}

/* -- ===end=== -- */

.item-118 {
background:#869175;
}

.item-119 {
background:<?php echo $contactscheme ?>;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T16:04:11.433

您可能会注意到，单击菜单中的某个项目后，该菜单项将加载“活动”类。然后，您可以通过活动定位此菜单项并显示该项目。

这是代码：

```
if($('.active.parent > ul').length > 0)
{
    $('.active.parent > ul').show();
} 
```

第一行只是检查是否存在活动元素，否则我们可能会收到脚本错误。在括号内，代码仅显示元素。试一试，让我知道你的进展如何。

此外，在这种情况下使用开发人员工具栏 (F12) 是个好主意，这样您就可以监视 DOM 并发现活动类之类的东西。

# sql - sql server 将空值批量插入时间列

> ID：12494391
> 
> 赞同：6
> 
> 时间：2012-09-19T12:06:34.173
> 
> 标签：sql, sql-server, nullable, bulkinsert

我在从批量插入语句中插入空值时遇到问题。

两列可以为空，ID 是标识。

可以为`int`空的结果很好，但`time`没有。

*   这里是批量声明：

    ```
    BULK INSERT Circulation 
    FROM '.....file.cs' 
    WITH ( FIRSTROW = 2, MAXERRORS = 0, FIELDTERMINATOR = ',', 
         ROWTERMINATOR = '', KEEPNULLS) 
    ```

*   这是csv的摘录：

    ```
    ID, IDStopLine, IDException, Hour, PositionHour, Day

    ,28, 8, 12:20, 52, 0

    ,29, 163, , 1, 
    ```

这意味着我正在尝试在这两列中插入空值。结果是具有 NULL 的 int 列和具有 00:00:00 的 time 列

![在此处输入图像描述](../Images/0836c8684a6a9e2cc56cca4bb5d072e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T22:12:11.380

我不知道为什么使用 00:00:00 插入时间列，但是如果您需要 NULL，那么可以尝试创建触发器并使用 FIRE_TRIGGER 参数运行 BULK INSERT

```
CREATE TRIGGER dateNull ON dbo.Circulation
INSTEAD OF INSERT
AS
BEGIN
  INSERT dbo.Circulation(IdStopline, IdException, Hour, PositionHour, Day) 
  SELECT IdStopline, IdException, NULLIF(Hour, '00:00:00.0000000'), PositionHour, Day FROM inserted
END      

BULK INSERT dbo.Circulation 
FROM 'you_file.csv' 
WITH (FIRSTROW = 2, 
      MAXERRORS = 0, FIELDTERMINATOR = ',',
      ROWTERMINATOR = '\n', KEEPNULLS, FIRE_TRIGGERS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T10:57:39.167

*要插入“NULL”而不是“Col2 的默认值”，您需要使用 -k 开关或 KEEPNULL 选项，如以下 bcp 和 BULK INSERT 示例所示。*

```
USE AdventureWorks;
GO
BULK INSERT MyTestDefaultCol2
   FROM 'C:\MyTestEmptyField2-c.Dat'
   WITH (
      DATAFILETYPE = 'char',
      FIELDTERMINATOR = ',',
      KEEPNULLS
   );
GO 
```

[http://msdn.microsoft.com/en-us/library/ms187887.aspx](http://msdn.microsoft.com/en-us/library/ms187887.aspx)

# ios - UIPrintInteractionController 错误找不到空印打印机

> ID：12494392
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:06:40.943
> 
> 标签：ios, printing

我正在尝试在 iPad 上使用 UIPrintInteractionController 打印 PDF 文件。但是输入选择打印机时出现错误。[在此处](http://i.imgur.com/u7Bhn.png)查看错误

如何连接到打印机。

请帮我解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:18:32.287

您可以在 iOS Simulator 中启动 AirPrint Simulator，然后选择 File -> Printer Simulator。当您运行程序时，iOS 模拟器会使用 Xcode 启动。他们必须都在同一个网络上。

# c++ - 函数调用与局部变量

> ID：12494401
> 
> 赞同：8
> 
> 时间：2012-09-19T12:07:12.050
> 
> 标签：c++, function, variables, call, local

我经常看到其他函数被多次调用的函数，而不是一次存储函数的结果。

即**（1）**：

```
void ExampleFunction()
{ 
    if (TestFunction() > x || TestFunction() < y || TestFunction() == z)
    {
        a = TestFunction();
        return; 
    }
    b = TestFunction();
} 
```

相反，我会这样写，**(2)**：

```
void ExampleFunction()
{
    int test = TestFunction();
    if (test > x || test < y || test == z)
    {
        a = test;
        return;
    }
    b = test;
} 
```

我认为版本 2 更易于阅读和调试。但我想知道为什么人们会像第一名那样做？有什么我看不到的吗？性能问题？当我查看它时，我在最坏的情况下看到数字 (1) 中的 4 个函数调用而不是数字 (2) 中的 1 个函数调用，所以数字 (1) 的性能应该更差，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:30:56.330

如果我想强调在整个代码中使用相同的值，或者我想强调该值的类型是`int`. 强调真实但不明显的东西可以帮助读者快速理解代码。

如果我不想强调其中任何一个，特别是如果它们不是真的，或者`TestFunction()`由于副作用而调用的次数很重要，我会使用 (1)。

显然，如果您强调*当前*正确的内容，但在未来`TestFunction()`发生变化并变为错误时，那么您就有了错误。所以我也想控制`TestFunction()`自己，或者对作者未来兼容性的计划有一些信心。通常，这种信心很容易：如果`TestFunction()`返回 CPU 的数量，那么您很乐意拍摄该值的快照，并且您也很乐意将其存储在`int`无论它实际返回什么类型。你必须对将来的兼容性有最小的信心才能使用一个函数，例如确信它将来不会返回键盘的数量。但是不同的人有时会有不同的想法，什么是“重大变化”，尤其是当界面没有准确记录时。因此，重复调用`TestFunction()`有时可能是一种防御性编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:31:45.183

当使用临时变量来存储像这样一个非常简单的表达式的结果时，可以说临时变量引入了应该消除的不必要的噪音。

在他的[“重构：改进现有代码的设计”](https://rads.stackoverflow.com/amzn/click/com/0201485672)一书中，Martin Fowler 将这种临时性的消除列为一种可能有益的重构（[`Inline temp`](http://refactoring.com/catalog/inlineTemp.html)）。

这是否是一个好主意取决于许多方面：

*   临时表达式是否提供了比原始表达式更多的信息，例如通过有意义的名称？
*   性能重要吗？正如您所指出的，没有临时的第二个版本*可能*更有效（大多数编译器应该能够优化此类代码，以便该函数只调用一次，假设它没有副作用）。
*   临时在函数后面修改吗？（如果不是，它应该是`const`）
*   等等

最后，选择引入或移除这种临时措施是应根据具体情况做出的决定。如果它使代码更具可读性，请留下它。如果只是噪音，请将其删除。在您的特定示例中，我会说临时不会增加太多，但是如果不知道实际代码中使用的真实名称，这很难说，您可能会有不同的感觉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-29T23:01:46.780

**第二种选择显然更胜一筹。**

您想**强调**并**确保**if 语句中的值是相同值的三倍。

在此示例中，性能不应成为瓶颈。总之，最小化错误的机会并强调相同的值比潜在的小性能提升更重要。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:17:13.120

> 我认为版本 2 更易于阅读和调试。

同意。

> 所以数字（1）的性能应该更差，不是吗？

不必要。如果`TestFunction`足够小，那么编译器可能会决定优化多个调用。在其他情况下，性能是否重要取决于`ExampleFunction`调用频率。如果不经常，则针对可维护性进行优化。

此外，`TestFunction`可能会有副作用，但在这种情况下，代码或注释应该以某种方式说明这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T12:17:44.907

两者不等价。举个例子：

```
int TestFunction()
{
   static int x;
   return x++;
} 
```

但在一个*理智*的世界中，情况并非如此，我同意第二个版本更好。:)

如果函数由于某种原因不能被内联，第二个甚至会更有效。

# asp.net-mvc-3 - 如何在 MVC3 中添加必填字段？（不使用模型）

> ID：12494403
> 
> 赞同：0
> 
> 时间：2012-09-19T12:07:12.307
> 
> 标签：asp.net-mvc-3

我想在文本框上添加必填字段验证，我没有为这些文本框使用任何模型参数（注释）。如何做到这一点？

以下是我的代码：

```
@using (Html.BeginForm())
{
  <h1> 3D Pay Örnek Sayfa</h1>
  <table class="tableClass">
  <tr class="trHeader">
    <td>Test</td>
    <td>@Html.TextBox("TestIt")</td>
  </tr>
  </table>
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:24:49.283

好吧，您确实应该使用模型，但如果您坚持手工操作，我仍然建议使用 jquery 验证插件。

基于[http://docs.jquery.com/Plugins/Validation#Example](http://docs.jquery.com/Plugins/Validation#Example)的示例：

（注意：您正在寻找的位是`@Html.TextBox("TestIt", "", new { @class="required" })`，它将 class="required" 属性添加到文本框，这反过来告诉 jquery 验证它是一个必填字段。）

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
    <style type="text/css">
        * { font-family: Verdana; font-size: 96%; }
        label { width: 10em; float: left; }
        label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
        p { clear: both; }
        .submit { margin-left: 12em; }
        em { font-weight: bold; padding-right: 1em; vertical-align: top; }
    </style>
    <script>
        $(document).ready(function(){
           $("form").validate();
        });
    </script>
</head>
<body>
@using (Html.BeginForm())  
{  
    <center>  
        <h1> 3D Pay Örnek Sayfa</h1>  
            <table class="tableClass">  
                <tr class="trHeader">  

                    <td>Test</td>  
                    <td>@Html.TextBox("TestIt", "", new { @class="required" })</td>  
                </tr>  
            </table>  
    </center>  
    <input type="submit" id="SubmitData" name="SubmitData" value="Submit" />
}
</body>
</html> 
```

请记住，这只是客户端验证——您还需要在服务器端进行验证。由于您没有使用模型，这可能意味着需要一些自定义控制器代码来验证每个输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:22:20.517

即使您说您没有使用模型，我还是强烈建议您使用模型。

模型：

```
public class TestModel
{
    [Required]
    public string TestIt {get; set;}
} 
```

标记：

```
@Html.TextBoxFor(m => m.TestIt)
@Html.ValidationMessageFor(m => m.TestIt) 
```

有关更多信息，请参阅[如何：使用 DataAnnotations 属性验证模型数据](http://msdn.microsoft.com/en-us/library/ee256141%28v=vs.100%29.aspx)。

如果您不使用模型，您可以使用[jQuery Validate](http://docs.jquery.com/Plugins/Validation)验证客户端，但这需要更多代码。

# ruby-on-rails - 将参数传递给所有 Rails 翻译而不修改所有翻译调用

> ID：12494409
> 
> 赞同：1
> 
> 时间：2012-09-19T12:07:39.867
> 
> 标签：ruby-on-rails, ruby, internationalization

将参数传递给单个翻译很容易（来自指南）：

```
# app/views/home/index.html.erb
<%=t 'greet_username', :user => "Bill", :message => "Goodbye" %>

# config/locales/en.yml
en:
  greet_username: "%{message}, %{user}!" 
```

[编辑] 是否可以在不需要修改所有翻译调用的情况下将参数传递给所有翻译？所以我可以在所有翻译中使用 %{my_variable} 但参数只会传递一次，就像全局翻译参数一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:15:25.403

```
# app/views/home/index.html.erb
<%=t 'greet_username', :my_variable=> "Bill Goodbye" %>

# config/locales/en.yml
en:
  greet_username: "%{my_variable} !" 
```

# android - 如何将异常传递给另一个活动？

> ID：12494414
> 
> 赞同：-4
> 
> 时间：2012-09-19T12:07:55.877
> 
> 标签：android

我有一个`class`不扩展的`Activity`. 在那堂课中，我使用一个`try-catch`块来捕捉`exceptions`. 如何将`Exception e`在该块中捕获的任何异常（）传递给另一个`Activity`？我的应用程序使用 a 检查`boolean flag`以显示`toast message`. 但是我如何将此消息传递给另一个活动？

```
public class AgAppHelperMethods   {

  private static AgAppHelperMethods instance = null;
  static boolean flag=true;

 public static   String[][] AgAppXMLParser( String parUrl) {

    String _node,_element;
    String[][] xmlRespone = null;
    try {
  String url = www.xyz.com
            URL finalUrl = new URL(url);

    catch (Exception e)
    {
      flag=false;
      Log.e( "CONNECTION ERROR  SERVER NOT RESPONDING", e);
    } 

          public class LoginScreen extends Activity implements Serializable {

public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    setContentView(R.layout.agapplogin);

       btnClear.setOnClickListener(new OnClickListener() {
        public void onClick(View v)

        {
            postLoginData();
        }

    });

           public void postLoginData()

{
               xmlRespone = AgAppHelperMethods.AgAppXMLParser( url);

        if(!AgAppHelperMethods.flag)
        {
             Toast.makeText(getApplicationContext(), "Error  server 
    not responding " , Toast.LENGTH_SHORT).show();
             myProgressDialog.dismiss();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:27:17.880

```
 catch (Exception e) {        
    flag=false;
    Log.e( "CONNECTION ERROR  SERVER NOT RESPONDING", e);

    String theException = e.getMessage();

    Bundle b = new Bundle();        
    b.putString("Exception", theException); //or you can replace theException with a custom message

    Intent nextActivity = new Intent(MyActivity.this, NewActivity.class);
    nextActivity.putExtras(b);
    startActivity(nextActivity); 
    } 
```

`onCreate`您可以在下一个活动的方法中收到它

```
 Bundle b = getIntent().getExtras();
    String error = b.getString("Exception");
    Toast.makeText(NewActivity.this, error, Toast.LENGTH_SHORT).show(); 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:14:21.643

使用 Intent extras 将额外数据传递给另一个 Activity：

请参阅此处：[如何从 Android 上的意图中获取额外数据？](https://stackoverflow.com/questions/4233873/how-to-get-extra-data-from-intent-in-android) 在这里：[http ://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# gradle - FindBugs 不排除使用 Gradle 过滤的模式

> ID：12494416
> 
> 赞同：0
> 
> 时间：2012-09-19T12:08:04.937
> 
> 标签：gradle, findbugs

我想将[FindBugsExtension](http://www.gradle.org/docs/current/dsl/org.gradle.api.plugins.quality.FindBugsExtension.html)设置为[Gradle](http://www.gradle.org/)。它有效，但我无法使用该`excludeFilter`选项排除特定模式。

我有以下 gradle FindBugs 定义：

```
findbugs {
    toolVersion = "2.0.1"
    reportsDir = file("$project.buildDir/findbugsReports")
    effort = "max"
    reportLevel = "high"
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeFilter.xml")
} 
```

在`excludeFilter.xml`我定义了以下排除：

```
<FindBugsFilter>
  <Match>
    <Bug pattern="NP_PARAMETER_MUST_BE_NONNULL_BUT_MARKED_AS_NULLABLE"/>
  </Match>
</FindBugsFilter> 
```

但是当我运行`gradle findBugsMain`它时它会失败，因为它可以找到 FindBugs 错误：

```
<BugCollection version="2.0.1" sequence="0" timestamp="1348055542169" analysisTimestamp="1348055545581" release="">
  <!-- ... -->
  <BugInstance type="NP_PARAMETER_MUST_BE_NONNULL_BUT_MARKED_AS_NULLABLE" priority="2" abbrev="NP" category="STYLE">
    <!-- ... --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:29:22.463

好的，我从[这里](http://issues.gradle.org//browse/GRADLE-2473)找到了解决方案。

与文档相反，由于Gradle 1.2 版中的[错误](http://www.gradle.org/docs/current/release-notes#configuration-options-for-findbugs-plugin)`excludeFilter`，需要为每个任务定义。

所以 1.2 的完整配置如下所示：

```
findbugs {
    toolVersion = "2.0.1"
    reportsDir = file("$project.buildDir/findbugsReports")
    effort = "max"
    reportLevel = "high"
}

tasks.withType(FindBugs) {
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeFilter.xml")
} 
```

# jquery - jQuery工具提示显示多个项目

> ID：12494419
> 
> 赞同：2
> 
> 时间：2012-09-19T12:08:11.863
> 
> 标签：jquery, tooltip

我正在尝试使用可用的 jQuery 工具提示代码在工具提示中显示多行。我能看到的所有工具提示都只包含一个标题属性。

我在页面上显示一张图片，当我将鼠标悬停在它上面时，我想显示商品的标题、价格和库存编号。

我可以将此添加到我的商店代码中并以 html 格式返回所有这些，例如

```
<div class="image">
<a href="%mylink%" >
<img src="%myimage%" title="%mytitle%"/></a>
</div>

<div class="price">
<a href="%mylink%">%price%</a>
</div>

<div class="sku">
<a href="%mylink%">%SKU%</a>
</div> 
```

我在 title 属性上使用这个工具提示让它工作：

[http://jquerytools.org/demos/tooltip/index.html](http://jquerytools.org/demos/tooltip/index.html)

但看不到如何添加多个项目。这是我使用的代码：

```
<script>
$(function() {
// initialize tooltip
$(".image img[title]").tooltip({

   // tweak the position
   offset: [10, 2],

   // use the "slide" effect
   effect: 'slide'

// add dynamic plugin with optional configuration for bottom edge
}).dynamic({ bottom: { direction: 'down', bounce: true } });
});
</script> 
```

可能吗？提前感谢您的帮助。

# java - 类路径包含多个 SLF4J 绑定

> ID：12494420
> 
> 赞同：22
> 
> 时间：2012-09-19T12:08:19.023
> 
> 标签：java, binding, websphere, slf4j

我的应用服务器 ibm websphere。我在应用程序服务器日志中收到以下错误。我在哪里可以设置 websphere？

> [19.09.2012 14:56:54:940 EEST] 0000000a SystemErr R SLF4J：类路径包含多个 SLF4J 绑定。
> [19.09.2012 14:56:54:940 EEST] 0000000a SystemErr R SLF4J：在 [wsjar:file:/C:/Lib/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder 中找到绑定.class]
> [19.09.2012 14:56:54:941 EEST] 0000000a SystemErr R SLF4J：在 [bundleresource://217.fwk37356669:1/org/slf4j/impl/StaticLoggerBinder.class]
> [19.09.2012 14中找到绑定:56:54:941 EEST] 0000000a SystemErr R SLF4J：有关说明，请参见[http://www.slf4j.org/codes.html#multiple_bindings](http://www.slf4j.org/codes.html#multiple_bindings)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-25T11:50:49.753

不幸的是，websphere 在自己的安装中有很多常用的库。它们经常与您要在应用程序中使用的版本发生冲突。

选项是从应用程序中删除库 jar 并使用 websphere 提供的或将类加载器设置更改为“最后一个父级”以确保首先找到与应用程序捆绑的库。（这不会消除 slf4j 警告，但会确保使用您的实现）。

抱歉，我无法提供更多详细信息（我上次使用 websphere 是几年前的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T09:23:55.543

它使用控制台选项“删除文件”从 ear 中删除一个冲突的类并选择整个 jar (lib/slf4j-log4j12-1.7.2.jar)。应用程序重新启动后它将起作用。

# java - 用于检测前面和后面的小写字母和数字的正则表达式

> ID：12494422
> 
> 赞同：2
> 
> 时间：2012-09-19T12:08:30.473
> 
> 标签：java, regex

我试图在我的字符串中找到一个特定的模式，我对正则表达式的了解非常基础。要查找我可以使用的小写字母，`[a-z0-9]+`但我将如何查找前面和前面的字符？

允许的例子： `(A)`, `AB`, `ABC`, `[ABC]`, `.AB'`, `@ABCD#`. 本质上只有大写字符（任何长度），或带有前面或前面或两者（前面和后面）的大写字母（任何长度），特殊字符。
不允许： `abABCaa`, `ABCaa`, `aaAB`, `123ABC`, `12ABGGabc`,`aaBaa`等。本质上是大写字母（任何长度），前面或前面或两者，字母或数字。

如何编写过滤允许示例或不允许示例的正则表达式？希望我清楚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:17:39.443

这将匹配 3 个组：匹配的大写字母、前面的字符和后面的字符。如果不需要组，只需删除括号。

```
([^a-z0-9]*)([A-Z]+)([^a-z0-9]*) 
```

有关匹配和分组的更多信息，请参阅正确的[Javadoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#matches%28%29)。另外，关于[在线测试正则表达式的建议](http://www.regexplanet.com/advanced/java/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:44:31.250

怎么样简单：

```
\b[A-Z]+\b 
```

这将匹配由其他字符而不是单词字符包围的大写字母

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:01:55.360

这要容易得多。只需检查匹配项：

```
"^\\p{P}*[A-Z]+\\p{P}*$" 
```

`\p{P}`匹配任何标点符号。

`^``$`如果您使用该`.matches()`方法，则可以删除。

所以这匹配`AAB`,和`#A`,和,和.`A.``1A``aAa``aA``Aa`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T12:15:34.073

不确定这可以用正则表达式完成。通过比较在算法上尝试：

*   开始循环字符串的所有字符（字母字符）：

    CurCharIsUpper = (curchar.uppercase == curchar.lower) ？假：真；if (PrevCharIsUpper == CurCharIsUpper) blahblah; PrevCharIsUpper = CurCharIsUpper;

*   结束循环

# google-apps-script - 谷歌网站上次访问日期

> ID：12494424
> 
> 赞同：1
> 
> 时间：2012-09-19T12:08:47.307
> 
> 标签：google-apps-script

我正在尝试创建一个脚本来列出我们域中的谷歌网站，我有一个返回所有网站和所有者的脚本，但我们也想获取网站的最后访问日期，无论如何它都可以从中获取该信息API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:32:40.350

我认为 Google 协作平台不会捕获此信息，但您可能需要调查在您的站点上启用 Google Analytics 并使用 Apps 脚本中的 Analytics 服务来获取访问信息。

# java - JDBC 批量更新和处理异常？

> ID：12494429
> 
> 赞同：2
> 
> 时间：2012-09-19T12:09:27.063
> 
> 标签：java, jdbc, batch-file, updates

在我使用 JDBC 处理超过 40,000 条数据记录的过程中。为了提高性能，我使用 PreparedStatement 和批量更新。

需要建议来处理批量更新中的异常吗？如何处理异常，处理40,000条记录中的5001条记录时如何知道发生了异常？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T09:28:55.220

您可以使用 BatchUpdateException。请参阅以下代码。你可以在这里找出错误。

```
try {
  // statements related to batch updates....
} catch (BatchUpdateException be) {
   //handle batch update exception
   be.printStackTrace();
   int[] counts = be.getUpdateCounts();
   for (int i=0; i<counts.length; i++) {
       System.out.println("Statement["+i+"] :"+counts[i]);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T08:01:14.400

使用 BatchUpdateException 处理批量更新的异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:45:52.543

通过使用 getCause() 和 getNextException() 分析异常，您最终会发现一个 JDBCException/SQLException。

现在，向上转换到 congrete database-depend-exception，当然，您会找到 congrete 问题/congrete 索引的标识符（即 nr 5001）。

还可以尝试具有更高 jdbc 版本（即 jdbc4）的不同 JDBC 驱动程序。

# ruby - 使用 Ruby 从一个子文件夹中删除文件夹内容

> ID：12494433
> 
> 赞同：1
> 
> 时间：2012-09-19T12:09:44.720
> 
> 标签：ruby, rake, fileutils

除了一个子文件夹之外，清除文件夹内容的最佳方法是什么？

**例子：**

输入：

```
Folder_A
| Folder_B
| DoNotDeleteMe
| Folder_C
| Some_File 
```

结果：

```
Folder_A
| DoNotDeleteMe 
```

是否有任何 FileUtils 命令可以帮助我解决这个问题？通配符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:35:45.643

我去了：

```
Dir.foreach(myPath) do |item|
  next if item == '.' or item == '..' or item == mySubDir
  FileUtils.rm_rf File.join(myPath, item)
end 
```

# tomcat - 即时更改tomcat的属性

> ID：12494435
> 
> 赞同：0
> 
> 时间：2012-09-19T12:09:56.860
> 
> 标签：tomcat, configuration, properties

当我们对tomcat中的文件进行一些更改时`.properties`，应该重新启动服务器。

问题是为什么？

如果我想即时更改 tomcat 服务器的属性（即不重新启动 tomcat 服务器），我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:17:32.407

如果将`reloadable`Tomcat 的[Context](https://tomcat.apache.org/tomcat-6.0-doc/config/context.html#Common_Attributes)元素的属性设置为 false，则服务器在运行时发现配置更改时不会重新启动。

然而，这仅适用于`/WEB-INF/classes`and `/WEB-INF/lib`，因此如果您按照评论中的建议指定要更改的属性文件，将会很有帮助。

# visual-studio-2010 - TFS 中的多个文件夹

> ID：12494437
> 
> 赞同：2
> 
> 时间：2012-09-19T12:10:05.250
> 
> 标签：visual-studio-2010, tfs

最初我在本地机器上有一个 windows 窗体项目，代码在根目录下。代码存储库是 TFS 2010。现在我将代码放入不同的文件夹（N-Tier）。

我想检查并返回 TFS 的代码。我应该删除原来的结构并重新映射吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:49:34.830

正确的方法是从源代码管理资源管理器中执行移动操作以移动/重命名文件夹。这样可以确保 TFS 正确处理移动并保留历史记录。

否则，您可以删除旧文件夹，然后添加新文件夹/文件。但是，我会尽量避免这种情况，因为你会失去历史。

# opengl - 光线投射体积渲染中的不透明度校正

> ID：12494439
> 
> 赞同：3
> 
> 时间：2012-09-19T12:10:12.187
> 
> 标签：opengl, graphics, glsl, volume

我想使用 OpenGL、GLSL 和 C++实现高质量的**光线投射体积渲染。**我使用图像顺序体积渲染。**在称为compositing**的光线投射体积渲染步骤中，我使用以下公式（前后顺序）：

![在此处输入图像描述](../Images/3fbd26189dc66cbda0e1b9b1f47e152c.png)

当我阅读《Real-time volume graphics》第 16 页这本书时，我看到如果采样率发生变化，我们需要进行 Opacity Correction：

![在此处输入图像描述](../Images/5ac8049dc57eb4d89493c753b213a778.png)

并用这个不透明度值代替旧的不透明度值。在这个公式中，![在此处输入图像描述](../Images/b21295b85c21421f7e031d00b50198b7.png) 是新的样本距离，而△x是旧的样本距离。

我的问题是：**如何确定程序中的△x**？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:32:25.243

假设您的原始体积的分辨率为 V=(512, 256, 127)，那么当向 (rx, ry, rz) 方向投射光线时，样本距离为 1/|r·V|。但是说在你的光线投射器中你很大程度上是过采样的，假设你以 3× 采样距离 V'=(1526, 768, 384) 采样体积，过采样的采样距离是 1/|r·V'|，因此采样率的比率为 1/3。这是要添加的指数。

请注意，指数仅在低密度体积时才显着，即在医学图像低对比度软组织的情况下。如果您正在对骨骼或致密组织进行成像，那么它几乎没有区别 (BTDT)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-15T20:46:34.217

datenwolf 是正确的，但缺少一条信息。传递函数是标量值和颜色之间的映射。在 RGBA 中，值的范围在 0 和 1 之间。作为实施者，您可以选择不透明度的实际值转换为什么，这就是原始样本距离的来源。

假设您有单位立方体，如果您在与面正交的方向上跟踪光线，则选择 2 个样本，该样本转换为 0.5 的样本距离。如果体积中任何地方的 alpha 值都是 0.1，则生成的 alpha 为 0.1 + 0.1 * (1.0 -0.1) = 0.19。如果您选择 3 个样本，则生成的 alpha 是前一个选择的一个复合值：0.19 + 0.1 * (1-0.19) = 0.271。因此，您对原始样本距离的选择会影响结果。明智地选择。

# ios - iOS 数据库 Sqlite 中的 UIImage 字符串

> ID：12494440
> 
> 赞同：0
> 
> 时间：2012-09-19T12:10:15.510
> 
> 标签：ios, sqlite, persistence

好的，我的应用程序将有一组按钮，其中每个按钮都有自己的`UIImage`相关声音。

我将拥有很多这些按钮，并且正在寻找创建一个 sqlite 3 数据库，该数据库将用于存储每个按钮的字符串位置和声音位置。

这样我可以将所有声音和图像添加到我的项目中，当我从数据库中读取时，它会根据其字符串位置从我的项目文件夹中提取图像和声音。

我有几个问题：

1）这是最好的方法吗？我应该将实际按钮存储在我的数据库中吗？这个怎么做？2) 如何获取 soundURL 的原始字符串位置`UIImage`和关联的 soundURL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:17:30.623

如果是我，我会给图像和声音起相同的名称，例如：giraffe.png giraffe.wav。您可以根据自己的喜好将它们放在单独或相同的目录中。那么你所需要的只是你的名字列表，如果你需要排序/过滤功能，可以在平面文件或数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:38:47.923

“最好”的做事方式没有正确答案。我总是说，如果它有效并且让你满意，那么它就是最好的方法。话虽如此，在数据库中存储大量原始数据通常是不受欢迎的。数据库擅长撕裂大量记录……对它们进行排序……过滤它们……但不擅长返回大型单个对象。

至于第二个问题，你需要更精确。我假设您将存储一个按钮 ID、一个图像的 URL 和一个声音的 URL。然后你可以用“initWithContentsOfURL”初始化它们

# java - Seam 组件未注入到 ExtendedDataModel 子项中

> ID：12494444
> 
> 赞同：0
> 
> 时间：2012-09-19T12:10:36.010
> 
> 标签：java, jsf, dependency-injection, richfaces, seam

我正在尝试使用 Seam 的一个孩子`ExtendedDataModelClass`作为`rich:dataTable`组件的数据源：

```
<rich:dataTable id="docPackList" var="pack" width="100%" rows="25"
    value="#{specDocPackageList.dataModel}">
...
</rich:table> 
```

在这个孩子的`walk`方法中，我调用了`getResultList`从 Seam 派生的控制器方法`EntityQUery`。这个控制器有一些用 Seam 注入的字段：

```
@Name("specDocPackageList")
@Scope(ScopeType.CONVERSATION)
public class SpecDocPackageList extends EntityQuery<DocPackage> {

    @In(create = true, value = "orgunitList")
    private OrgUnitList orgUnitListController;

    public OrgUnitList getOrgUnitListController() {
        return orgUnitListController;
    }

    public void setOrgUnitListController(OrgUnitList orgUnitListController) {
        this.orgUnitListController = orgUnitListController;
    }

    private SelectableQueryDataModel entityQueryDataModel;

    @Override
    public DataModel getDataModel() {
        if (entityQueryDataModel == null) {
            entityQueryDataModel = SelectableQueryDataModel.getInstance(this);
        }
        return entityQueryDataModel;
    }
    ...
}

public class SelectableQueryDataModel<T, K> extends ExtendedDataModel {

    private EntityQuery<T> dataProvider;

    public SelectableQueryDataModel(EntityQuery<T> query) {
        dataProvider = query;
        ...
    }

    public static SelectableQueryDataModel getInstance(EntityQuery query) {
        return new SelectableQueryDataModel(query);
    }

    public void walk(FacesContext facesContext, DataVisitor dataVisitor, Range range, Object o) throws IOException {
        ...
        for (T item : this.dataProvider.getResultList()) {
            ...
        }
        ...
    }
} 
```

问题是我`null`在`specDocPackageList.orgUnitListController`何时从方法`specDocPackageList.getResultList()`调用。`SelectableQueryDataModel.walk`那时不会抛出任何异常。`getResultList()`但是，当被调用以获取以下数据时，该字段以正确的方式注入`rich:dataTable`：

```
<rich:dataTable id="docPackList" var="pack" width="100%" rows="25"
    value="#{specDocPackageList.resultList}">
...
</rich:table> 
```

为什么Seam不在第一种情况下注入这个字段而在第二种情况下这样做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T16:31:54.747

您的问题是由于您`EntityQuery`传入`SelectableQueryDataModel`. 你不应该保留组件引用，如果你做拦截不能正常工作。

您最好传递组件的名称并`Component.getInstance()`从内部使用，`SelectableQueryDataModel`以使 Seam 的拦截器链像宣传的那样工作。或者，您可以传递该类并使用它`Component.getInstance(Class<?>)`来检索所请求的类类型的组件（但后者要求您使用的每个列表都对 EntityQuery 进行子类化）。

# javascript - d3的转场和轮换能很好的配合吗？

> ID：12494447
> 
> 赞同：2
> 
> 时间：2012-09-19T12:10:47.140
> 
> 标签：javascript, rotation, d3.js, transition, jsfiddle

与旋转相结合的过渡会产生奇怪的结果。

这是我的问题： http: [//jsfiddle.net/emperorz/E3G3z/1/](http://jsfiddle.net/emperorz/E3G3z/1/) 尝试单击每个方块以查看不同的行为。

请原谅被黑的代码，但如果我使用带有旋转（和 x/y 放置）的转换，那么它会循环。

我试过了：

1) 全部在变换中（旋转然后平移），这看起来基本没问题。有点摇摇晃晃。

2) 只需在变换中旋转，使用 x/y 属性定位。到处飞，但最终到达正确的位置。很奇怪。

~~3）所有在变换（平移然后旋转），飞走，并最终在（完全）错误的地方。~~

嗯。奇怪的。

是否有使用过渡旋转形状的正确方法？

直观地说，如果第二个选项有效，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T20:59:33.283

要在任意轴上旋转 SVG 对象，您需要两个转换：（`translate`设置轴）和`rotate`. 你真正想要的是先`translate`完全应用然后旋转已经移动的元素，但它看起来是独立和同时操作的`translate`。`rotate`这在正确的位置结束，但动画`translate`基本上是在旋转过程中移动轴，从而产生摆动。您可以通过让它们出现在 SVG 元素层次结构中的不同位置`translate`来隔离它们。`rotate`例如，看看以下内容：

```
<g class="outer">
    <g class="rect-container">
        <rect class="rotate-me" width=200 height=100 />
    </g>
</g> 
```

您可以使用 将`<rect>`(0,0)居中`translate (-100, -50)`。如果您将旋转应用于`<rect>`元素，它将摆动，但如果您`rotate`将`g.rect-container`元素旋转，它将完全旋转。如果您想重新定位、缩放或以其他方式进一步转换元素，请继续`g.outer`。就是这样。您现在可以完全控制您的变换。

找到 a`<rect>`的中心很容易，但要找到 a `<path>`,`<g>`等的中心要困难得多。[幸运的是， .getBBox()](http://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox)方法中提供了一个简单的解决方案（CoffeeScript 中的代码；请参阅下面的 JavaScript 版本*）：

```
centerToOrigin = (el) ->
    boundingBox = el.getBBox()
    return {
        x: -1 * Math.floor(boundingBox.width/2),
        y: -1 * Math.floor(boundingBox.height/2) 
    } 
```

您现在可以通过传递未包装的元素来居中您的元素/组（使用 D3 的`.node()`方法）

```
group = d3.select("g.rotate-me")
center = centerToOrigin(group.node())
group.attr("transform", "translate(#{center.x}, #{center.y})") 
```

对于通过重新定位和缩放在单个`<rect>`和 `<g>`2 s 上实现此功能的代码，[请参阅此 fiddle](http://jsfiddle.net/rdickert/hQBEw/1/)。`rect`

* * *

*以上代码的Javascript：

```
var center, centerToOrigin, group;

centerToOrigin = function(el) {
  var boundingBox;
  boundingBox = el.getBBox();
  return {
    x: -1 * Math.floor(boundingBox.width / 2),
    y: -1 * Math.floor(boundingBox.height / 2)
  };
};

group = d3.select("g.rotate-me");
center = centerToOrigin(group.node());
group.attr("transform", "translate(" + center.x + ", " + center.y + ")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:24:27.163

iirc 平移是相对于 0,0 而旋转是围绕对象的中心点

因此，因为您的形状从 0,0（例如 100,200 或 200,100）偏移，所以它们在翻译时最终会迁移。这可以通过将 Diamond3 的偏移更改为 [50,50] 来看到 - 屏幕周围的迁移要小得多

解决方案是将 0,0 点重新定位到钻石的中心。在 D3 中有一种方法可以做到这一点 - 但我不记得它是什么 :(

# c# - 使用 Xsd 验证 Xml 并更新 Xml

> ID：12494451
> 
> 赞同：0
> 
> 时间：2012-09-19T12:11:12.160
> 
> 标签：c#, xml, xsd

我正在使用现有 Xsd 架构验证 Xml 文件。如果验证失败，是否可以使用 xsd 文件更新 Xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:27:33.980

错误后您可以执行此代码

```
var schemaSet = new XmlSchemaSet();  
schemaSet.Add(null, "schema1.xsd");  
// add further schemas as needed  
schemaSet.Compile();  

var xmlSampleGenerator= new XmlSampleGenerator(schemaSet, new XmlQualifiedName("Test"));  

var doc = new XmlDocument();  
using (XmlWriter writer = doc.CreateNavigator().AppendChild())  
{  
   xmlSampleGenerator.WriteXml(writer);  
} 
```

链接：http: [//msdn.microsoft.com/en-us/library/aa302296.aspx](http://msdn.microsoft.com/en-us/library/aa302296.aspx)

# wpf - 在带有文本块的 xaml 绑定中使用 StringFormat

> ID：12494453
> 
> 赞同：2
> 
> 时间：2012-09-19T12:11:20.477
> 
> 标签：wpf, binding, string-formatting

我有以下 xaml：

```
<Setter Property="Text" Value="{Binding Name, StringFormat='&quot;{0}&quot;'}" />
<Setter Property="Foreground" Value="Black" />

...

<Setter Property="Text" Value="{Binding Name, StringFormat='&lt;{0}&gt;'}" />
<Setter Property="Foreground" Value="Blue" />

...

<Setter Property="Text">
    <Setter.Value>
        <Binding Path="Name" StringFormat="&quot;{0}&quot;" />
    </Setter.Value>
</Setter>
<Setter Property="Foreground" Value="Red" /> 
```

Name 的值以正确的颜色显示，所以我知道设置器正在工作，但 <、> 和 " 从未出现。我缺少什么吗？

任何帮助，将不胜感激。

谢谢

基兰

# javascript - 防止浏览器扩展注入 Javascript 代码

> ID：12494456
> 
> 赞同：31
> 
> 时间：2012-09-19T12:11:28.587
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, browser

浏览器允许扩展注入代码、操作 DOM 等。

多年来，我在我正在观看的网站（应用程序）上注意到许多和各种未捕获的错误（使用 window.onerror），这些错误是由 Firefox、Chrome 和 Internet Explorer（所有版本）上的未知浏览器扩展生成的。

这些错误似乎并没有中断任何事情。现在我想增加这个网站的安全性，因为它将开始处理信用卡。我亲眼看到恶意软件/间谍软件使用修改过的浏览器扩展（无辜的浏览器扩展，修改为向攻击者/脚本小子报告）作为键盘记录器（使用微不足道的 onkey* 事件处理程序，或只是 input.value 检查）感染浏览器。

**有没有办法（元标记等）通知浏览器禁止代码注入或读取标准或非标准 DOM？**该网页已经是 SSL，但这似乎并不重要（如提示浏览器激活更严格的扩展安全性）。

.

其他人建议的或我想到的可能的*解决方法*（一种延伸与简单的元标记）：

*   用于输入数字的虚拟键盘 + 非文本输入（又名 img 用于数字）
*   使用 Flash 的远程桌面（有人建议使用 HTML5，但这并不能解决监听键盘事件的浏览器扩展；只有 Flash、Java 等可以）。
*   非常复杂的基于 Javascript 的保护（删除非白名单事件侦听器、内存中的输入值以及受实际星号字符保护的输入等）（不可行，除非它已经存在）
*   具有防病毒作用或可以以某种方式保护特定网页的浏览器扩展（这是不可行的，甚至可能在不产生大量问题的情况下都不可能）

**编辑**：谷歌浏览器在隐身模式下禁用扩展，但是，没有标准的方法来检测或自动启用隐身模式，因此必须显示永久警告。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T12:21:32.590

能够禁用某人的浏览器扩展通常意味着接管浏览器。我不认为这是可能的。这将是一个巨大的安全风险。您的目的可能是合法的，但请考虑网站管理员以编程方式为用户禁用 addblocker 以让他们查看广告的场景。

最后，用户有责任确保他们在进行网上银行交易时拥有干净的操作系统。用户受到损害不是网站的错

**更新** 我们应该总结一下。就像是：

```
<meta name="disable-extension-feature" content="read-dom" /> 
```

或者

```
<script type="text/javascript">
    Browser.MakeExtension.MallwareLogger.to.not.read.that.user.types(true);
</script> 
```

不存在，我相信在不久的将来不会实施。使用任何必要的手段来最好地利用当前最新的现有技术并尽可能安全地设计您的应用程序。不要浪费你的精力来覆盖那些一开始就没有通过互联网付款的用户

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-28T10:05:42.953

**更新（2019-10-16）：**这不是一个“真正的”解决方案——这意味着你不应该依赖它作为安全策略。事实是，没有“真正的”解决方案，因为恶意插件可以以无法检测到的方式劫持/欺骗 JavaScript。下面的技术对我来说更像是一种练习，以弄清楚如何防止简单的按键记录。您可以扩展此技术以使黑客*更难*[...](https://stackoverflow.com/questions/12494456/protect-against-browser-extension-injected-javascript-code/12637892?noredirect=1#answer-12494594)*第一名。*

* * *

您可以使用 javascript 提示符绕过密钥记录。我写了一个小测试用例（最终有点失控）。此测试用例执行以下操作：

*   使用[prompt()](https://developer.mozilla.org/en-US/docs/DOM/window.prompt)来询问焦点所在的信用卡号。
*   当用户选中“防止附加对话框”或用户能够以某种方式在 CC 字段中键入时提供故障保护
*   定期检查以确保事件处理程序没有被删除或欺骗，并在必要时重新绑定/警告用户。

[http://jsfiddle.net/ryanwheale/wQTtf/](http://jsfiddle.net/ryanwheale/wQTtf/)

```
prompt('Please enter your credit card number'); 
```

在 IE7+、Chrome、FF 3.6+、Android 2.3.5、iPad 2 (iOS 6.0) 中测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T09:19:36.113

您的问题很有趣，也很周到（+1'd），但不幸的是，提议的安全性并没有提供真正的安全性，因此没有浏览器会实现它。

浏览器/网络/网络安全的核心原则之一是抵制实现虚假安全功能的愿望。使用该功能的 Web 将比不使用该功能更不安全！

听我说：

在客户端执行的一切都可以被操纵。浏览器只是另一个与服务器对话的 HTTP 客户端；服务器永远不应该相信计算结果，或者在前端 Javascript 中完成的检查。如果有人可以简单地绕过您在带有扩展程序的浏览器中执行的“安全”检查代码，他们肯定可以将 HTTP 请求直接发送到您的服务器`curl`以执行此操作。至少，在浏览器中，熟练的用户可以转向 Firebug 或 Web Inspector 并绕过您的脚本，就像您在调试网站时所做的那样。

阻止扩展注入的`<meta>`标签确实使网站更健壮，但不是更安全。编写健壮的 JavaScript 有上千种方法，而不是祈祷没有邪恶的扩展。将您的全局函数/对象隐藏为其中之一，并执行环境健全性检查作为另一个。例如，GMail 检查 Firebug。许多网站检测到广告屏蔽。

该`<meta>`标签在隐私方面确实有意义（同样，*不是*安全性）。应该有一种方法可以告诉浏览器当前存在于 DOM 中的信息是敏感的（例如我的银行余额）并且不应该暴露给第三方。然而，如果用户使用供应商 A 的操作系统、供应商 B 的浏览器、供应商 C 的扩展程序而没有阅读其源代码以*确切*知道他们在做什么，则用户已经表明他对这些供应商的信任。您的网站在这里不会出错。真正关心隐私的用户会转向他们信任的操作系统和浏览器，并使用浏览器的其他配置文件或隐私模式来检查他们的敏感信息。

**结论：**如果您（再次）在服务器端进行所有输入检查，您的网站就足够安全，没有任何`<meta>`标签可以使其更安全。做得好！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T00:45:21.373

我看到类似的事情发生了很多次，尽管保护是以另一种方式进行的：相当多的网站，当他们以文本形式提供敏感信息时，会使用 Flash 小部件来显示文本（例如，电子邮件地址，否则会被机器人发现并发送垃圾邮件）。

Flash 小程序可以配置为拒绝来自 HTML 页面的任何代码，实际上，除非您特别期望这是可能的，否则它不会开箱即用。Flash 也不会重新向浏览器发送事件，因此如果键盘记录器在浏览器级别上工作，它将无法记录按下的键。当然，Flash 有其自身的缺点，但考虑到所有其他选项，这似乎是最可行的选项。因此，您不需要通过 Flash 进行远程桌面，简单的嵌入式小程序也一样好。此外，单独使用 Flash 不能用于制作功能齐全的远程桌面客户端，您可能会考虑使用 NaCl 或 JavaFX，这将使其只能由企业用户使用，最终只能由私人用户使用。

其他需要考虑的事情：编写自己的扩展。制作 Firefox 扩展真的很容易 + 你可以重用大量的 JavaScript 代码，因为它也可以使用 JavaScript。我从未编写过 Google Chrome 或 MSIE 扩展程序，但我想这并不难。但是您不需要将其变成防病毒扩展程序。使用可用的工具，您可以做到这一点，这样其他扩展就无法窃听您自己的扩展内部正在发生的事情。我不确定你的听众会多么友好，但如果你的目标是企业部门，那么在某种程度上，这个听众是一个非常好的听众，因为他们无法选择他们的工具......所以你可以强制他们使用扩展名。

还有什么想法吗？- 嗯，这个**非常**直接和高效：让用户打开一个弹出窗口/单独的选项卡并禁用其中的 JavaScript :) 我的意思是，如果 JavaScript 被启用，你可以拒绝接受信用卡信息浏览器 - 显然，它很容易检查。这需要用户付出一些脑力才能找到设置，他们可以在其中禁用它+他们将在弹出窗口中肆虐......但几乎可以肯定这将禁用所有代码注入:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T23:02:14.600

这行不通，但我会尝试一下 document.createElement = function(){}; 这应该会影响客户端脚本（greasemonkey）

您还可以尝试使用隐藏输入提交当前 DOM `myform.onsubmit=function(){myform.hiddeninput.value=document.body.innerHTML;}`并检查服务器端是否存在不需要的 DOM 元素。我想在每个元素上使用服务器端生成的 id/token 会有所帮助（因为注入的 DOM 节点肯定会错过它）

=> 页面应该看起来像

```
<html uniqueid="121234"> <body uniqueid="121234"><form  uniqueid="121234"> ... 
```

因此，在 POST 操作中查找未跟踪的元素应该很容易（例如使用 xpath）

```
<?php
simplexml_load_string($_POST['currentdom'])->xpath("*:not(@uniqueid)") //style 
```

关于 DOM 注入问题的一些东西。

至于键盘记录部分，我认为您无法从客户端的角度阻止键盘记录器（使用虚拟键盘等除外），因为无法从浏览器内部识别它们。如果您是偏执狂，您应该尝试 100% 画布生成设计（模仿 HTML 元素和交互），因为这可能会保护您（没有要绑定的 DOM 元素），但这意味着在浏览器中创建浏览器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-28T05:27:08.707

而且我们都知道我们不能显式阻止代码中的扩展，另一种方法是查找附加到密码、ssn 等关键字段的事件侦听器列表，以及 keypress、keyup、keydown 等主体上的事件，并验证是否侦听器属于您的代码，如果不只是抛出一个 Flash 消息来禁用插件。

您可以将突变事件附加到您的页面，看看是否有一些新节点正在由第三方创建/生成，除了您的代码。

好的，很明显您会遇到性能问题，但这是对您的安全性的权衡。

任何接受者？

# javascript - 记录以对象为参数的 JS 函数

> ID：12494461
> 
> 赞同：3
> 
> 时间：2012-09-19T12:11:57.167
> 
> 标签：javascript, function, object, documentation, arguments

在 JavaScript 或 PHP 等动态语言中，通常只向函数传递一个参数。这个参数是一个封装所有选项的对象。用 ScriptDoc（或类似的）记录这些选项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:34:20.577

使用[JSDoc](http://code.google.com/p/jsdoc-toolkit/)可以如下完成：

```
/**
 * @param {Object} o       Object containing function params.
 * @param {String} o.bar   Example String param.
 * @param {Number} o.baz   Example Number param.
 */
function foo(o) {
} 
```

更多信息可以在JSDoc 的[TagParam 文档的](http://code.google.com/p/jsdoc-toolkit/wiki/TagParam)*带属性的参数*部分中找到。

# python - easy_install2.5 无法在 Ubuntu 12.04 上安装 python-ldap

> ID：12494465
> 
> 赞同：0
> 
> 时间：2012-09-19T12:12:19.537
> 
> 标签：python, ubuntu

```
easy_install-2.5 python-ldap
搜索 python-ldap
阅读 http://pypi.python.org/simple/python-ldap/
阅读 http://www.python-ldap.org/
最佳匹配：python-ldap 2.4.10
下载 http://pypi.python.org/packages/source/p/python-ldap/python-ldap-2.4.10.tar.gz#md5=a15827ca13c90e9101e5e9405c1d83be
处理 python-ldap-2.4.10.tar.gz
运行 python-ldap-2.4.10/setup.py -q bdist_egg --dist-dir /tmp/easy_install-dplmGE/python-ldap-2.4.10/egg-dist-tmp-ZlXBub
定义： HAVE_SASL HAVE_TLS HAVE_LIBLDAP_R
extra_compile_args：
额外对象：
include_dirs: /opt/openldap-RE24/include /usr/include/sasl /usr/include
library_dirs: /opt/openldap-RE24/lib /usr/lib
库：ldap_r
找不到文件 Lib/ldap.py（用于模块 ldap）
找不到文件 Lib/ldap/controls.py（用于模块 ldap.controls）
找不到文件 Lib/ldap/extop.py（用于模块 ldap.extop）
找不到文件 Lib/ldap/schema.py（用于模块 ldap.schema）
警告：找不到与“Makefile”匹配的文件
警告：找不到与“模块/许可证”匹配的文件
找不到文件 Lib/ldap.py（用于模块 ldap）
找不到文件 Lib/ldap/controls.py（用于模块 ldap.controls）
找不到文件 Lib/ldap/extop.py（用于模块 ldap.extop）
找不到文件 Lib/ldap/schema.py（用于模块 ldap.schema）
找不到文件 Lib/ldap.py（用于模块 ldap）
找不到文件 Lib/ldap/controls.py（用于模块 ldap.controls）
找不到文件 Lib/ldap/extop.py（用于模块 ldap.extop）
找不到文件 Lib/ldap/schema.py（用于模块 ldap.schema）
在 Modules/LDAPObject.c:4:0 包含的文件中：
Modules/common.h:10:20：致命错误：Python.h：没有这样的文件或目录
编译终止。
错误：安装脚本退出并出现错误：命令“gcc”失败，退出状态为 1

```

```
能力倾向搜索python2.5
i python2.5 - 一种交互式高级面向对象语言（2.5 版）                                                      
v python2.5-celementtree -                                                                                                                       
v python2.5-cjkcodecs -                                                                                                                       
v python2.5-ctypes -                                                                                                                       
v python2.5-对话框-                                                                                                                       
v python2.5-elementtree -                                                                                                                       
v python2.5-iplib -                                                                                                                       
i A python2.5-minimal - Python 语言的最小子集（2.5 版）                                                                 
v python2.5-plistlib -                                                                                                                       
v python2.5-profiler -                                                                                                                       
v python2.5-reverend-                                                                                                                       
v python2.5-wsgiref                   

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:13:25.670

看起来您需要 python 2.5 头文件。您可能可以在突触下`python2.5-dev`或类似的地方找到它们。

# java - 在 Java 中导出 Jar 库 - 如何捆绑其依赖项，以便在使用时不会出现 NoClassDefFound / ClassNotFound 错误？

> ID：12494466
> 
> 赞同：0
> 
> 时间：2012-09-19T12:12:18.960
> 
> 标签：java, eclipse, jar

我开发了一个`L`使用一些依赖 .jar 文件的库`D`。然后我决定`J`使用 Eclipse 将其导出为 Jar 。

尝试使用时`J`，我得到 java.lang.NoClassDefFound / java.lang.ClassNotFound 错误。

`L`部署我的库的最简单方法是什么？我更愿意将它与其依赖项打包在一起，但将它们与`L`.

我在里面查了一下`L.jar`，依赖关系肯定在那里，所以这似乎是一个文件告诉java在哪里查找它们的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:18:14.140

用户 maven 或 gradle。这 2 个构建工具正是您所需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:22:07.577

如果您想创建和打包 jar 以及依赖项，您可以考虑为此使用一些编程。看看[JBoss ShrinkWrap](https://community.jboss.org/wiki/ShrinkWrap)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:53:31.247

我正在使用 Eclipse Juno Release(4.2)，这样做非常方便。

1.  在eclipse中运行你的主类，看看你的项目是否可以正常运行
2.  右键单击项目名称并选择导出
3.  选择 java->Runnable Jar 文件
4.  接下来选择你的配置，如果不做第1步，就无法选择。选择导出位置并给出文件名，例如 myapp.jar 选择“将所需库打包到生成的 jar 中”
5.  完成

运行命令 java -jar myapp.jar

# linux - 我的电脑是否支持 OpenGL 2.1？

> ID：12494476
> 
> 赞同：1
> 
> 时间：2012-09-19T12:12:53.173
> 
> 标签：linux, opengl, ubuntu

![](../Images/f04bb80bf9acb9f891184a76f3db787a.png)

根据上图，我的电脑可以支持的最大 Opengl 版本是 1.4 吗？这是否意味着我无法使用 Opengl 2.1 编写代码？

我正在使用 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:35:12.183

您在那里看到的是 GLX 版本。GLX 是容器协议，它将 OpenGL 传送到 X11 服务器。您应该查找 OpenGL 版本字符串，该字符串稍后会出现在该输出中。使用 grep 过滤输出，例如在我的笔记本电脑上

```
datenwolf@narfi ~ 
%> glxinfo | grep version
server glx version string: 1.4
client glx version string: 1.4
GLX version: 1.4
OpenGL version string: 2.1 Mesa 8.0.3
OpenGL shading language version string: 1.20 
```

如您所见，我的 GLX 版本也是 1.4，但我的移动机器上支持 OpenGL 2.1 和 GLSL 1.20。

# c# - 在该可枚举的方法中引用源可枚举？

> ID：12494479
> 
> 赞同：1
> 
> 时间：2012-09-19T12:13:18.100
> 
> 标签：c#, .net, ienumerable

有没有办法在同一枚举上运行的方法中引用源枚举？

例如，这段代码重复了原来的可枚举范围 1-6：

```
IEnumerable<int> result = Enumerable.Range(1, 6)
    .Where(a => Enumerable.Range(1, 6).Count() % 2 == 0); 
```

我想知道是否有一种更清洁的方法可以通过重复原始枚举来生成它，例如：

```
IEnumerable<int> result = Enumerable.Range(1, 6)
    .Where(a => [source reference].Count() % 2 == 0); 
```

是的，我知道以下是一个解决方案......但是有没有办法直接引用内存中的可枚举，如上所示？

```
IEnumerable<int> source = Enumerable.Range(1, 6);
IEnumerable<int> result = source.Where(a => source.Count() % 2 == 0); 
```

我不是在寻找上述代码行的具体答案；他们只是展示我想知道的一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:26:44.343

没有一个内置的`IEnumerable`扩展方法可以做你想做的事。它们都接受仅对单个项目进行操作的 lamba 表达式，因此您的表达式无法访问父容器。

然而，没有什么能阻止你自己动手，比如：

```
public static IEnumerable<T> WhereSource<T> ( this IEnumerable<T> source, Func<IEnumerable<T>, T, bool> predicate)
{
  foreach (var item in source)
  {
    if (predicate(source, item))
    {
      yield return item;    
    }
  }
} 
```

就个人而言，我认为您的原始解决方案比制作您自己的自定义扩展方法更清晰、更易于维护并且更好，但这当然是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:23:17.930

你是这个意思吗？

```
IEnumerable<int> source = Enumerable.Range(1, 6); //{1,2,3,4,5,6}
IEnumerable<int> result = source.Where((a, i) => i % 2 == 0); //{1,3,5}
IEnumerable<int> result2 = source.Where(a => a % 2 == 0); //{2,4,6} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:21:01.670

不，你不能，因为那`Enumerable.Range(1, 6))`没有名字。

你将如何称呼一个没有名字的实体。

您的第三个片段是您可以使用的唯一解决方案，因为它没有名称可供参考。

但是你可以做

```
int length = 6; // Here hard-coded but can be passed from a parameter.
IEnumerable<int> source = Enumerable.Range(1, Length);
IEnumerable<int> result = source.Where(a => length % 2 == 0); 
```

# django - Django老师学生轻松解决。使用单独的表，或权限和组？如何？其他想法？

> ID：12494481
> 
> 赞同：2
> 
> 时间：2012-09-19T12:13:23.507
> 
> 标签：django, django-models, relational-database

您将如何应对以下问题？有老师，也有学生。学生无法查看教师专用页面，教师可以查看学生专用页面。教师可以只列出他们教的学生。我希望老师和学生都使用内置用户让他们登录。

我有以下想法：

用外键为教师和学生建立单独的表以在用户中构建？- 但问题是，我能否轻松渲染页面并区分谁是老师和谁是学生。

权限？团体？只有一张表用户？但老实说，我没有找到如何实现我在开头提到的目标的方法。

将不胜感激任何想法、建议和意见，因为我正在考虑 HOURS！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:38:07.513

*作为一个粗略的开始：*

**用户表**

*   用户 ID（主键）
*   详细信息（姓名、地址、电话——即系统用户（无论是学生还是教师）所共有的。）

**学生桌**

*   用户 id（与用户表的外键关系）
*   任何学生的具体细节（入学日期、班主任等）

**教师表**

*   用户 ID（与用户表的外键关系）
*   教师特定的东西（资历、薪水等）

**类表**

*   类 ID（主键）。
*   班级详情

**成绩表**

*   用户 ID（外国）
*   一个类 id (foreign) -> 这两个键用于进行成绩查询。
*   一个品级

（如果一个学生可以多次上课，并且有多个成绩，成绩表将需要有自己的键，可能有序列类型来确定他们收到它们的顺序）。

显示用户的页面可以查询用户表显示该信息，然后是他们的学生或教师的特定信息。如果学生有可能成为老师，那么您也可以做到。

# grails - Grails 和使用 spring 安全核心重定向

> ID：12494487
> 
> 赞同：2
> 
> 时间：2012-09-19T12:13:38.163
> 
> 标签：grails, redirect, spring-security

我正在尝试实现一个登录系统，以便将用户重定向回原始请求 url。例如，如果用户尝试访问 url '/books/list'（需要登录才能访问），那么用户应该被重定向到登录页面，登录后，用户应该被重定向到 '/books/list'，原始请求的网址。我该怎么做呢 ？我的登录控制器看起来像：

```
def index = {
if (springSecurityService.isLoggedIn()) {
    redirect action: 'dashboard'
    //redirect uri: SpringSecurityUtils.securityConfig.login.filterProcessesUrl
}
else {

  redirect action: auth, params: params
}
}

def auth = {

def config = SpringSecurityUtils.securityConfig

if (springSecurityService.isLoggedIn()) {
  redirect uri: config.successHandler.defaultTargetUrl
  return
}

String view = 'auth'
String postUrl = "${request.contextPath}${config.apf.filterProcessesUrl}"
render view: view, model: [postUrl: postUrl,
        rememberMeParameter: config.rememberMe.parameter]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:25:16.813

Spring Security Core 插件默认执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:18:19.220

登录后重定向到请求的 url，您只需在 config.groovy 文件中添加以下内容。

```
grails.plugins.springsecurity.successHandler.alwaysUseDefaultTargetUrl = false
grails.plugins.springsecurity.securityConfigType = "InterceptUrlMap"
grails.plugins.springsecurity.interceptUrlMap = [   
'/**': ["IS_AUTHENTICATED_FULLY"]
] 
```

# objective-c - NSTableView 右击行索引

> ID：12494489
> 
> 赞同：16
> 
> 时间：2012-09-19T12:13:52.723
> 
> 标签：objective-c, cocoa, nstableview

我正在寻找一种从中获取右键单击行索引的方法，`NSTableView`但我找不到任何委托方法或类属性。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T15:42:55.583

使用[NSTableView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html "NSTableView 参考")方法`- (NSInteger)clickedRow`获取最后点击的行的索引。返回的 NSInteger 将是右击行的索引。

您不需要`NSTableView`为此解决方案进行子类化。`clickedRow`也可在`NSOutlineView`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T12:37:26.940

虽然我还没有这样做，但我很确定你可以通过覆盖`NSView`'s `- (NSMenu*)menuForEvent:(NSEvent*)theEvent`。[此链接](http://cocoadev.com/wiki/RightClickSelectInTableView)中的示例进行点转换以确定索引。

```
-(NSMenu*)menuForEvent:(NSEvent*)theEvent
{
    NSPoint mousePoint = [self convertPoint:[theEvent locationInWindow] fromView:nil];
   int row = [self rowAtPoint:mousePoint];
   // Produce the menu here or perform an action like selection of the row.
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-25T11:08:25.037

## 更新的答案

如果您想在打开菜单时获得点击的行索引，答案是`NSTableView.clickedRow`. 无论如何，此属性仅在特定时刻可用，通常只是`-1`.

该索引何时可用？那是`NSMenuDelegate.menuWillOpen`方法。因此，您符合委托并在您的类上实现该方法，并访问该`clickedRow`属性。完成。

```
final class FileNavigatorViewController: NSViewController, NSMenuDelegate {
    let ov = NSOutlineView() // Assumed you setup this properly.
    let ctxm = NSMenu()
    override func viewDidLoad() {
        super.viewDidLoad()
        ov.menu = ctxm
        ctxm.delegate = self
    }
    func menuWillOpen(_ menu: NSMenu) {
        print(outlineView.clickedRow)
    }
} 
```

在您单击菜单中的项目之前，单击的行索引可用。所以这也有效。

```
final class FileNavigatorViewController: NSViewController {
    let ov = NSOutlineView() // Assumed you setup this properly.
    let ctxm = NSMenu()
    let item1 = NSMenuItem()
    override func viewDidLoad() {
        super.viewDidLoad()
        ov.menu = ctxm
        ov.addItem(item1)
        ov.target = self
        ov.action = #selector(onClickItem1(_:))
    }
    @objc
    func onClickItem1(_: NSObject?) {
        print(outlineView.clickedRow)
    }
} 
```

我在 macOS Sierra (10.12.5) 上对此进行了测试。

* * *

## 旧答案

从 OS X 10.11 开始，Apple 终于添加了一种`clickedRow`轻松访问的方法。只需子类`NSTableView`化并覆盖此方法，您就会得到`clickedRow`我所经历的。

```
func willOpenMenu(menu: NSMenu, withEvent event: NSEvent) 
```

这需要子类化，但无论如何，这是访问`clickedRow`.

此外，还有一种配对方法。

```
func didCloseMenu(menu: NSMenu, withEvent event: NSEvent?) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-22T11:06:14.013

`menuForEvent:`只需通过在子类中实现右键单击选择行`NSTableView`：

```
@implementation MyTableView

- (NSMenu *)menuForEvent:(NSEvent *)theEvent
{
    int row = [self rowAtPoint:[self convertPoint:theEvent.locationInWindow fromView:nil]];
    if (row == -1) 
        return nil;
    if (row != self.selectedRow)
        [self selectRowIndexes:[NSIndexSet indexSetWithIndex:row] byExtendingSelection:NO];
    return self.menu;
}

@end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-09T08:13:04.957

如果您不需要打开 NSMenu 但需要知道“带有行号的右键单击操作”，我认为最简单的方法如下。（Swift4 代码）不需要任何其他连接的外部 NSMenu 类。

```
class SomeViewController: NSViewController, NSTableViewDataSource, NSTableViewDelegate {
  @IBOutlet weak var tableView: NSTableView!
  ...

  override func viewDidLoad() {
    ...
    tableView.action = #selector(some method()) // left single click action
    tableView.doubleAction = #selector(someMethod()) // left double click action
  }

  // right click action
  override func rightMouseDown(with theEvent: NSEvent) {
    let point = tableView.convert(theEvent.locationInWindow, from: nil)
    let row = tableView.row(at: point)
    print("right click")
    print(row)
  } 
```

# stringtemplate - 字符串模板：是否可以在模板中获取 Java 列表的第 n 个元素？

> ID：12494491
> 
> 赞同：1
> 
> 时间：2012-09-19T12:13:57.937
> 
> 标签：stringtemplate, stringtemplate-4

在 String Template 中，可以很容易地在模板中获取 Java Map 的元素。是否可以以类似的方式获取数组的第 n 个元素？

根据[字符串模板备忘单](http://www.antlr.org/wiki/display/ST/StringTemplate+cheat+sheet)，您可以轻松获得第一个或第二个元素：

> 您可以结合操作来说出诸如 first(rest(names)) 之类的内容来获取第二个元素。

但似乎不可能轻松获得第 n 个元素。我通常将我的列表转换为以列表索引为键的地图并执行类似的操作

```
map.("25") 
```

有没有更简单/更直接的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:24:39.317

抱歉，没有获取 a[i] 的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:00:39.840

获取列表的第 n 个元素没有简单的方法。

在我看来，这表明您的视图和业务逻辑没有足够分离：关于 25 魔术数字意味着什么的知识在两个层中都传播了。

一种可能的解决方案可能是将值列表转换为为元素提供意义的对象。例如，假设 String 列表表示地址行，在这种情况下，`map.("3")`您可以写`address.street`.

# google-drive-api - Google Drive API中downloadUrl的到期时间是多少

> ID：12494492
> 
> 赞同：1
> 
> 时间：2012-09-19T12:14:04.877
> 
> 标签：google-drive-api

> **可能重复：**
> [Google Drive SDK“短期”下载 URL 存在多长时间？](https://stackoverflow.com/questions/11730648/how-long-does-the-google-drive-sdk-short-lived-download-url-exist-for)

在[Google Drive API 参考中](https://developers.google.com/drive/v2/reference/files#downloadUrl)，它说 downloadUrl 包含短暂的下载 URL。这个链接的平均寿命是多少？

几分钟，几小时，一天？

# sql - 选择任一有条件的行

> ID：12494495
> 
> 赞同：5
> 
> 时间：2012-09-19T12:14:19.130
> 
> 标签：sql, database, oracle, oracle10g

我在[SQL Fiddle中定义了这个 sql 表和行](http://sqlfiddle.com/#!4/0ea65/1)

在**SUPPLIER_DETAILS**表中有一个名为**IS_PAYABLE**的字段，其值为 null 或“Y”。

如果，则每个**PRODUCT_REG**`IS_PAYABLE='Y'`可能有一个或多个记录，但**PRODUCT_NO**不同。例如，有两条记录。****`PRODUCT_REG = 'HP_C20'``IS_PAYABLE='Y'`****

 ****```
HP_C20  FR-A    GB-A128     Y
HP_C20  FR-A    GB-A098     Y 
```

我想要的是，如果一个**PRODUCT_REG**`IS_PAYABLE='Y'`有多个记录，那么我只想要其中一个记录，并且我想要所有记录。**`IS_PAYABLE is null`**

 **我怎样才能做到这一点？如果我没有使我的要求易于理解，我将进一步解释。

任何帮助都是非常可观的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:25:03.213

```
select * from 
   (select a.*, 
         row_number() over (partition by product_reg order by product_no) as rnk 
   from SUPPLIER_DETAILS a
   order by PRODUCT_REG)
where is_payable is null or rnk = 1; 
```

[SQLFIDDLE](http://sqlfiddle.com/#!4/0ea65/50)

在内部查询中，我对具有相同 product_reg 的产品进行了排名。

在外部查询中，每个 product_reg（排名第一）和所有非应付产品只有一个产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:29:05.843

试试这个：

```
SELECT s.* 
FROM   supplier_details s 
WHERE  NOT EXISTS(SELECT s1.* 
                  FROM   supplier_details s1 
                  WHERE  s.is_payable = 'Y' 
                         AND s1.is_payable = 'Y' 
                         AND s.product_reg = s1.product_reg 
                         AND s.product_no < s1.product_no) 
UNION 
SELECT * 
FROM   supplier_details 
WHERE  is_payable IS NULL 
```

[http://sqlfiddle.com/#!4/25c52/2/0](http://sqlfiddle.com/#!4/25c52/2/0)

*编辑：下面的代码也应该工作（联合是多余的）*

```
SELECT s.* 
FROM   supplier_details s 
WHERE  NOT EXISTS(SELECT s1.* 
                  FROM   supplier_details s1 
                  WHERE  s.is_payable = 'Y' 
                         AND s1.is_payable = 'Y' 
                         AND s.product_reg = s1.product_reg 
                         AND s.product_no < s1.product_no) 
```

[http://sqlfiddle.com/#!4/5e69b/1/0](http://sqlfiddle.com/#!4/5e69b/1/0)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T12:30:03.083

在这种情况下`row_number()`，分析功能将派上用场。

```
 select product_reg
        , product_supplier_code
        , product_no
        , is_payable
     from (select t.*
                , row_number() over (partition by product_reg order by product_no) m
             from SUPPLIER_DETAILS t
          )
    where m = 1
       or is_payable is null
    order by product_reg 
```

[**演示#1**](http://sqlfiddle.com/#!4/0ea65/117)

**此外**

似乎是重复的。为了在此处稍微区分答案，您可以使用另一种方法来获得所需的结果

```
select product_reg
    , max(PRODUCT_SUPPLIER_CODE) KEEP (DENSE_RANK FIRST ORDER BY product_reg) PRODUCT_SUPPLIER_CODE
    , max(PRODUCT_NO) KEEP (DENSE_RANK FIRST ORDER BY product_reg) PRODUCT_NO
    , max(IS_PAYABLE) KEEP (DENSE_RANK FIRST ORDER BY product_reg) IS_PAYABLE
from SUPPLIER_DETAILS t
group by product_reg 
order by product_reg 
```

[**演示#2**](http://sqlfiddle.com/#!4/0ea65/119)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T13:03:18.463

您可以使用`UNION ALL`它，但是在返回记录时`where IS_PAYABLE = 'Y'`使用聚合总是返回`MAX()`or`MIN()`值

```
select PRODUCT_REG, PRODUCT_SUPPLIER_CODE, max(PRODUCT_NO) PRODUCT_NO, IS_PAYABLE
from SUPPLIER_DETAILS
where IS_PAYABLE = 'Y'
group by  PRODUCT_REG, PRODUCT_SUPPLIER_CODE, IS_PAYABLE
union all 
select PRODUCT_REG, PRODUCT_SUPPLIER_CODE, PRODUCT_NO, IS_PAYABLE
from SUPPLIER_DETAILS
where IS_PAYABLE is null
order by PRODUCT_REG 
```

# 请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/0ea65/116)******

# sed - 获取模式之间的字符串，复制到行尾，并在复制的字符串中添加另一个字符串

> ID：12494499
> 
> 赞同：0
> 
> 时间：2012-09-19T12:14:33.440
> 
> 标签：sed

我有大量文件要添加到灯箱图库中。我生成了缩略图，我只需要让 sed 抓取从“foto”到“bmp”、“jpeg”或“jpg”或“png”的所有内容（我的一些图像的扩展名已锁定，如 PNG、JPG JPEG BMP) 并`-thumb`在扩展名之前添加到行尾。

做这个

```
<a href="images/foto (1000).jpeg" rel="lightbox[galeria]" title="Description."><img src="images/
<a href="images/foto (950).bmp" rel="lightbox[galeria]" title="Description."><img src="images/
<a href="images/foto (10).png" rel="lightbox[galeria]" title="Description."><img src="images/
<a href="images/foto (100).JPG" rel="lightbox[galeria]" title="Description."><img src="images/ 
```

看起来像这样

```
<a href="images/foto (1000).jpeg" rel="lightbox[galeria]" title="Description."><img src="images/foto (1000)-thumb.jpeg
<a href="images/foto (950).bmp" rel="lightbox[galeria]" title="Description."><img src="images/foto (950)-thumb.bmp
<a href="images/foto (10).png" rel="lightbox[galeria]" title="Description."><img src="images/foto (10)-thumb.png
<a href="images/foto (100).JPG" rel="lightbox[galeria]" title="Description."><img src="images/foto (100)-thumb.JPG 
```

我已经能够在模式之间获取内容，并将内容添加到行尾，但我无法完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:33:14.603

这对于您想要的可能太脏了，但这是使用的一种方法`GNU awk`：

```
awk -F '["./]' '{ print $0 $3 "-thumbs." $4 }' file.txt 
```

结果：

```
<a href="images/foto (1000).jpeg" rel="lightbox[galeria]" title="Description."><img src="images/foto (1000)-thumbs.jpeg
<a href="images/foto (950).bmp" rel="lightbox[galeria]" title="Description."><img src="images/foto (950)-thumbs.bmp
<a href="images/foto (10).png" rel="lightbox[galeria]" title="Description."><img src="images/foto (10)-thumbs.png
<a href="images/foto (100).JPG" rel="lightbox[galeria]" title="Description."><img src="images/foto (100)-thumbs.JPG 
```

# javascript - 库魔法。text/plain 而不是 text/javascript text/css

> ID：12494501
> 
> 赞同：3
> 
> 时间：2012-09-19T12:14:39.930
> 
> 标签：javascript, css, c, libmagic

我使用 libmagic 在我的项目的 Web 界面中获取文件的 mime 类型。我在 css 和 js 文件上获得 text/plain mime 类型。

例如铬显示以下警告：

```
Resource interpreted as Stylesheet but transferred with MIME type text/plain: "http://localhost:8000/jquery-ui.css".
Resource interpreted as Script but transferred with MIME type text/plain: "http://localhost:8000/jquery.timers.js". 
```

Http 对话框

```
alex@alex-laptop ~ $ nc localhost 8000
GET /ui.css HTTP/1.1

HTTP/1.1 200 OK
Connection: close
Content-Length: 699
Content-Type: text/plain; charset=us-ascii
Date: Wed, 19 Sep 2012 11:41:48 GMT

... 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T15:39:07.210

不知道你在做什么需要这个。

通常，您会通过扩展名、目录等知道哪些文件是什么。

最简单的方法是检查扩展——但猜测，出于某种原因，这不是一种选择。

您可以制作自定义函数来解析和检测 ecma 和 css：

```
if (mime==text/plain) { mime = my_parser(data); } 
```

您可以使用验证器并检查它是否验证为 css 或 js。

您可以制作自己的[魔法模式文件](http://linux.die.net/man/5/magic)，在其中测试您想要的东西——这很容易出错；

例如（非常简化）……</p>

文件 my.magic：

```
0        search/4096    =function\ 
>&0      search/128     =)
>>&0     search/128     ={              JavaScript
!:mime   application/javascript

0        search/4096    ={
>&0      search/512     =transition-    CSS3
!:mime   text/css

0        search/4096    ={
>&0      search/512     =background:    CSS
!:mime   text/css

0        search/4096    ={
>&0      search/512     =color:         CSS
!:mime   text/css 
```

然后编译它：

```
$ file -C -m my.magic 
```

并使用：

```
$ file -im my.magic.mgc some_file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:36:12.763

您需要做与 Apache 相同的事情：查阅 MIME 类型的扩展数据库，如果失败，请查阅 libmagic。

文本和 XML 文件通常过于通用，libmagic 无法识别。libmagic 仅用于通过检查几个字节来确定文件类型，因此 CSS 和 JavaScript 的区别不足以确定它们的确切类型。对于 XML，libmagic 必须有相当复杂的规则来确定文件是 XHTML、SVG、XHTML+SVG 还是生成 XHTML 和/或 SVG 的 XSLT。这超出了它的范围。

# log4net - 我想使用 Topshelf 实例名称作为 log4net 日志文件名的一部分

> ID：12494508
> 
> 赞同：5
> 
> 时间：2012-09-19T12:15:25.750
> 
> 标签：log4net, topshelf

使用 TopShelf 创建服务实例时，我希望能够访问服务实例名称（在作为服务安装期间可能已在命令行上设置；这意味着我无法直接访问它）能够将其用作 Log4Net 中日志文件名的属性。

在下面的示例代码中，我们设置了可用于在全局上下文中记录的各种属性。我也希望能够在这里设置服务实例名称；但似乎无法在主机初始化期间访问它。

关于如何在运行时使用 Topshelf 访问服务实例名称值的任何建议。

下面的示例是我们所有服务用来使用 Topshelf 启动服务的通用功能的一部分。

```
public static TopshelfExitCode Run(Func<IConsumerController> controllerFactory,
    string serviceName,
    string serviceDescription)
{
    // Initialise the Global log4net properties so we can use them for log file names and logging when required.
    log4net.GlobalContext.Properties["custom-assembly"] = System.IO.Path.GetFileNameWithoutExtension(System.Reflection.Assembly.GetEntryAssembly().Location);
    log4net.GlobalContext.Properties["custom-processname"] = System.Diagnostics.Process.GetCurrentProcess().ProcessName;
    log4net.GlobalContext.Properties["custom-process-id"] = System.Diagnostics.Process.GetCurrentProcess().Id;
// WOULD LIKE ACCESS TO THE SERVICE INSTANCE NAME HERE
    var logFileInfo = new System.IO.FileInfo(".\\Log.config");
    log4net.Config.XmlConfigurator.Configure(logFileInfo);

    var host = HostFactory.New(r =>
    {
        var controller = controllerFactory();
        r.Service<ConsumerService>( () => new ConsumerService(controller));
        r.SetServiceName(serviceName);
        r.SetDescription(serviceDescription + " © XYZ Ltd. 2012");
        r.SetDisplayName(serviceDescription + " © XYZ Ltd. 2012");
        r.StartAutomatically();
        r.EnablePauseAndContinue();
        r.RunAsLocalSystem();
    });
    return host.Run();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-02T03:50:20.597

被`HostSettings`传递给服务工厂，其中包含`InstanceName`作为属性。您应该使用它来初始化要添加到的日志附加程序`log4net`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T12:54:06.333

实例名称在命令行上传递，您可以访问命令行参数并从那里拉取它。这可能需要稍作调整，但如果您查看 ServiceInstaller，您会看到我们如何在安装服务后通过注册表编辑来调整命令路径。

# php - php exec 在远程服务器上无法正常工作

> ID：12494510
> 
> 赞同：0
> 
> 时间：2012-09-19T12:15:46.213
> 
> 标签：php

像 exec 和 shell_exec 这样的 php 函数在 localhost 上工作正常，但在远程主机上不能正常工作。

```
$output = shell_exec('dir');

echo "<pre>$output</pre>"; 
```

此代码在 localhost 中提供输出，但不在远程服务器上。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:19:16.667

这种 php 命令通常在远程 Web 服务器上被禁用。如果您真的希望它们正常工作，您应该使用专用服务器并自行配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:20:03.030

`dir`命令在windows系统中，那么你的远程服务器也是windows服务器吗？

即使它是 Windows 服务器，配置也可能与禁用的本地计算机不同`shell_exec`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:26:38.967

看看[http://php.net/glob](http://php.net/glob)或[http://php.net/manual/en/class.directoryiterator.php](http://php.net/manual/en/class.directoryiterator.php)对我来说 执行`dir`或`ls`根本没有意义。

# vba - 不同的错误，如语句块外，我的宏中显示变量错误

> ID：12494512
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:15:48.507
> 
> 标签：vba, excel

我是编码新手。我试图制作一个宏来搜索工作表中的图表，搜索图表是否有辉瑞的任何数据，然后将图表中的数据更改为蓝色。所以在这里，我试图搜索 datalabel 是否有辉瑞，然后将文本更改为蓝色。我尝试使用此代码但没有用：-

```
Public Sub chartFormatting()

Dim CTRYname As String
Dim p As Integer
ivalue As String
Dim l As Integer
Dim rownum As Integer

For p = 1 To 13
    CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(p, 0).Value
    rownum = wkbCurr.Sheets(CTRYname).Range("AA25").End(xlDown).Row
    For s = 1 To rownum
        ivalue = wkbCurr.Sheets(CTRYname).Charts(1).SeriesCollection(1).Points(s).DataLabel.Text
        If InStr(ivalue, "Pfizer") <> 0 Then
            With ivalue
                With .Font
                    .Color = -65536
                    .TintAndShade = 0
                 End With
            End With
            wkbCurr.Sheets(CTRYname).Charts(1).SeriesCollection(1).Points(s).DataLabel.Text = ivalue
        End If
    Next s
Next p
End Sub 
```

变量也已在其他地方声明。现在它向我展示了很多错误。请帮助并建议一种更好的方法来格式化图表中的文本和线条。

我的主要挑战是只有在辉瑞存在时才格式化它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:11:38.607

您的问题的根源是导航图表对象层次结构。我发现一个很好的方法是使用宏记录器来记录您想要编码的动作（在这种情况下为标签着色）并检查记录的对象。您只需要忽略`Select`记录器所做的所有错误并进入记录对象的核心。

我使用这种技术来重构您的代码。我还使用中间对象（`sh`在这种情况`chrt`下`dl`是）来帮助分解对象模型：

```
Public Sub chartFormatting()
    Dim CTRYname As String
    Dim p As Integer
    Dim ivalue As String
    Dim l As Integer
    Dim rownum As Integer
    Dim s As Long

    Dim dl As DataLabel
    Dim chrt As Chart
    Dim sh As Worksheet

    For p = 1 To 13
        CTRYname = ThisWorkbook.Sheets("Country lookup").Range("A1").Offset(p, 0).Value
        Set sh = wkbCurr.Worksheets(CTRYname)
        rownum = sh.Range("AA25").End(xlDown).Row
        Set chrt = sh.ChartObjects(1).Chart
        For s = 1 To rownum
            With sh.ChartObjects(1).Chart.SeriesCollection(1).Points(s).DataLabel
                If InStr(.Text, "Pfizer") <> 0 Then
                    With .Format.TextFrame2.TextRange.Font.Fill.ForeColor
                        .SchemeColor = 4
                        .TintAndShade = 0
                    End With
                End If
            End With
        Next s
    Next p
End Sub 
```

# servicestack - 为数组的参数的 ServiceStack 路由定义

> ID：12494513
> 
> 赞同：7
> 
> 时间：2012-09-19T12:15:52.927
> 
> 标签：servicestack

我有一项服务，可以根据一系列不同的标准返回销售额中排名前 N 的商品。那么如果我有一个 GET 路由，我该如何设置路由来处理某个参数的数组呢？

本周 A、C、D、E、F 组的前 100 项。本月商店 1、10、11、18、40 的前 100 项商品。

如何构建路线来处理这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:20:09.957

它已经为你准备好了。对于组示例，路由声明将如下所示：

```
Items/{Groups} 
```

Items DTO 将需要此属性

```
public string[] Groups { get; set; } 
```

然后你可以这样称呼它 /Items/A,C,D,E,F

该数组将被正确填充。

# php - 从路径中删除不必要的斜杠

> ID：12494515
> 
> 赞同：9
> 
> 时间：2012-09-19T12:16:03.420
> 
> 标签：php

```
$path = '/home/to//my///site'; 
```

我正在尝试`/`从上面的路径中删除不必要的正斜杠

我试图得到这个结果

```
/home/to/my/site 
```

我失败了`str_replace`，因为我不知道斜线的数量。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-19T12:17:44.440

## 优雅的解决方案

您可以通过`preg_replace`一行代码获得它：

```
preg_replace('#/+#','/',$str); 
```

该模式`/+`将匹配正斜杠`/`一次或多次，并将其替换为单个`/`.

## 不太优雅的解决方案

当然还有其他方法可以实现这一点，例如使用`while`循环。

```
while( strpos($path, '//') !== false ) {
   $path = str_replace('//','/',$path);
} 
```

这将调用`str_replace`直到所有出现的`//`都被替换。如果您想牺牲可读性（不建议），您也可以在一行代码中编写该循环。

```
while( strpos( ($path=str_replace('//','/',$path)), '//' ) !== false ); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-04-15T10:16:44.343

如果有人想从 URL 中删除多余的斜杠而不删除 http/https 之后的前两个斜杠：

```
$url = preg_replace('/([^:])(\/{2,})/', '$1/', $url); 
```

（感谢 ツ Liverbool [如何使用 'PREG' 或 'HTACCESS' 删除 URI 中的多个斜杠](https://stackoverflow.com/questions/6339145/how-to-remove-multiple-slashes-in-uri-with-preg-or-htaccess)）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T12:38:22.117

您好，这可能会有所帮助

将此代码写入您的 .Htaccess 文件并检查它..

```
# Prevent double slashes in URLs, e.g. //Blog and /Home//About
RewriteCond %{REQUEST_URI} ^(.*)//(.*)$
RewriteRule . %1/%2 [R=301,L] 
```

希望对您有所帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-15T13:10:15.363

您可以使用内置函数[realpath()](http://php.net/manual/en/function.realpath.php)来去除现有文件的斜线。但是你总是会得到一个规范化的绝对​​路径名。

```
<?php
// 2 slashes
echo realpath('/etc//passwd') . PHP_EOL; // prints /etc/password
// 3 slashes
echo realpath('/etc///passwd') . PHP_EOL; // prints /etc/password
// 2 ..
echo realpath('/etc/../etc/passwd') . PHP_EOL; // prints /etc/password
?> 
```

**请注意，如果文件不**存在，此函数将返回错误。

[文档](http://php.net/manual/en/function.realpath.php)中的一些重要评论：

> realpath() 扩展所有符号链接并解析输入路径中对“/./”、“/../”和额外“/”字符的引用，并返回规范化的绝对​​路径名。

和

> 在 windows 上 realpath() 会将 unix 样式路径更改为 windows 样式。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-21T07:31:57.933

它用 DIRECTORY_SEPARATOR 中的任何内容替换（连续）出现的 / 和 \，并处理 /。和 /.. 很好。get_absolute_path() 返回的路径在位置 0（字符串的开头）或位置 -1（结束）处不包含（反）斜杠

```
function get_absolute_path($path) {
    $path = str_replace(array('/', '\\'), DIRECTORY_SEPARATOR, $path);
    $parts = array_filter(explode(DIRECTORY_SEPARATOR, $path), 'strlen');
    $absolutes = array();
    foreach ($parts as $part) {
        if ('.' == $part) continue;
        if ('..' == $part) {
            array_pop($absolutes);
        } else {
            $absolutes[] = $part;
        }
    }
    return implode(DIRECTORY_SEPARATOR, $absolutes);
} 
```

一个测试：

```
var_dump(get_absolute_path('this/is/../a/./test/.///is')); 
```

返回：字符串（14）`"this/a/test/is"`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-17T16:17:07.190

`while(strlen($path) != (strlen($path = str_replace('//','/', $path))));`

这段代码用单斜杠替换双斜杠，只要它改变长度；

# java - 文件中的 JUnit 测试

> ID：12494517
> 
> 赞同：1
> 
> 时间：2012-09-19T12:16:11.643
> 
> 标签：java, junit

我曾经将 JUnit 测试写成方法，例如：

```
public class TextualEntailerTest {
  @Test test1() {...}
  @Test test2() {...}
  @Test test3() {...}
} 
```

由于大部分测试用例的结构都差不多，所以我决定做“数据驱动”，把测试的内容放在 XML 文件中。因此，我创建了一个方法“testFromFile(file)”并将我的测试更改为：

```
public class TextualEntailerTest {
  @Test test1() { testFromFile("test1.xml"); }
  @Test test2() { testFromFile("test2.xml"); }
  @Test test3() { testFromFile("test3.xml"); }
} 
```

随着我添加越来越多的测试，我厌倦了为我添加的每个新测试文件添加一行。当然，我可以将所有文件放在一个测试中：

```
public class TextualEntailerTest {
  @Test testAll() { 
     foreach (String file: filesInFolder) 
       testFromFile(file); 
  }
} 
```

但是，我更喜欢每个文件都是一个单独的测试，因为这样 JUnit 可以很好地统计通过和失败的文件数量。

所以，我的问题是：如何告诉 JUnit 为给定文件夹中的所有文件运行单独的测试，其中每个测试的形式为“testFromFile(file)”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:23:47.030

您可以使用`Theories`文件所在的位置，`@DataPoints`这样您就不需要循环测试，并允许在每个文件之后进行设置和清理。但仍会如此报告。

理论还存在一个问题，即它们会像上面的测试一样快速失败（第一次失败后退出）。我发现这不是一个好习惯，因为它可以隐藏您有多个错误的情况。我建议使用单独的测试或使用带有`ErrorCollector`. 我真的希望`Theories`内置`ErrorCollector`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:34:30.400

不确定，但可能这些可以帮助你。 [参考](http://www.kumaranuj.com/2012/08/junits-parameterized-runner-and-data.html) [1 参考 2](http://junit.org/junit/javadoc/4.5/org/junit/runners/Parameterized.html)。希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:59:01.587

```
@RunWith(value = Parameterized.class)
public class JunitTest {

     private String filename;

     public JunitTest(String filename) {
        this.filename= filename;
     }

     @Parameters
     public static Collection<Object[]> data() {
       Object[][] data = new Object[][] { { "file1.xml" }, { "file2.xml" } };
       return Arrays.asList(data);
     }

     @Test
     public void Test() {
       System.out.println("Test name:" + filename);
     }

} 
```

# php - 如何根据注释从 php symfony 控制器生成文档

> ID：12494523
> 
> 赞同：3
> 
> 时间：2012-09-19T12:16:30.337
> 
> 标签：php, symfony, documentation, annotations, generator

我目前有一个提供 REST API 的控制器，我正在寻找一种基于注释从我的 API 控制器生成文档的惰性方法。就像是

```
@description = "this allow user to do some stuff"
@method POST
@parameters {"foo","bar"}
@return http://myserver/api-doc/views/response.xml 
```

更清楚地说，我不想为我的 php 生成 o 文档。我想在我的 PHP 类中编写注释以生成关于我的 PHP 对我的客户有什么作用以及他们如何将它与 REST API 调用一起使用的文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:22:06.853

**[php 文档类](http://phpdocu.sourceforge.net/howto.php)**将为您提供帮助。

[`apigen`](http://apigen.org/)也看看

# vb.net - 隐藏所有打开的表单，包括 DialogForms

> ID：12494524
> 
> 赞同：0
> 
> 时间：2012-09-19T12:16:44.687
> 
> 标签：vb.net, dialog, hide, minimize, notifyicon

我怎样才能`hide`全部打开表格，包括全部`dialog forms`打开`NotifyIcon`？

我目前使用隐藏主表单

```
 Me.Hide()
        NotifyIcon.Visible = True
        NotifyIcon.ShowBalloonTip(1, "WinVault", "You've been lockout due to innactivity", ToolTipIcon.Info) 
```

并让表格回来显示

```
Private Sub NotifyIcon_MouseDoubleClick(sender As System.Object, e As System.Windows.Forms.MouseEventArgs) Handles NotifyIcon.MouseDoubleClick
    Me.Show()
End Sub 
```

`minimize`我想要所有打开的表单，包括那些对话框表单`NotifyIcon`

使用显示对话框表单`Form.ShowDialog`

# php - 从超链接中删除尾随空格

> ID：12494525
> 
> 赞同：1
> 
> 时间：2012-09-19T12:16:50.417
> 
> 标签：php, regex

我想防止 UGC 网站上的超链接中出现空格。我已经编写了正则表达式，它工作得很好，除了它没有从链接和锚文本中删除尾随空格。

这是我的代码：

```
$text = '< a href =   "   http://www.examplesite.com/       "> Example site   </a>';

$text = preg_replace('#(<(\s+)*a(\s+)*href(\s+)*=(\s+)*("|\')(\s+)*([^"]+)("|\')>(\s+)*([^<]+)(\s+)*</a>)#','<a href="$8">$11</a> ',$text); 
```

## 输出

```
<a href="http://www.examplesite.com/      ">Example site  </a> 
```

URL 还包含空格，即[http://www.examplesite.com/blog/](http://www.examplesite.com/blog/a)带有 space.html 的页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:25:39.833

尝试这个：

```
preg_replace("{<\s*a\s*href\s*=\s*(\"|')\s*([^\s]+)\s*\\1>\s*(.*?)\s+</a>}","<a href='$2'>$3</a>",$text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:17:15.340

我不是正则表达式的专家，但似乎您需要一种回溯的方法，您一直阅读到结束`"`，但您必须回溯到最后一个非空格字符。我不知道该怎么做，所以我会在你拿到半透明的字符串之后做

a) str_replace 或 b) 编写第二个正则表达式

```
$str = str_replace(" '>","'>", $count);
$str = str_replace(" \">","\">", $count); 
$str = str_replace(" </a>","</a>", $count); 
```

递归直到无法进行更多替换为止。我知道它很原始，但应该可以完成这项工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T12:50:50.300

试试这个来删除多余的空格

```
function  RemoveExtraSpaces($str)
{
    while(strpos($str,"  "))
    {
        $str = str_replace("  ", "", $str);
    }
    return $str;
} 
```

# parallel-processing - 同时使用 CUDA 的 GPU 设备和零拷贝固定内存

> ID：12494527
> 
> 赞同：0
> 
> 时间：2012-09-19T12:16:57.713
> 
> 标签：parallel-processing, cuda, sparse-matrix, matrix-multiplication

我在 CUDA 机器上使用 CUSP 库进行稀疏矩阵乘法。我目前的代码是

```
#include <cusp/coo_matrix.h>
#include <cusp/multiply.h>
#include <cusp/print.h>
#include <cusp/transpose.h>
#include<stdio.h>
#define CATAGORY_PER_SCAN 1000
#define TOTAL_CATAGORY 100000
#define MAX_SIZE 1000000
#define ELEMENTS_PER_CATAGORY 10000 
#define ELEMENTS_PER_TEST_CATAGORY 1000
#define INPUT_VECTOR 1000
#define TOTAL_ELEMENTS ELEMENTS_PER_CATAGORY * CATAGORY_PER_SCAN
#define TOTAL_TEST_ELEMENTS ELEMENTS_PER_TEST_CATAGORY * INPUT_VECTOR
int main(void)
{
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);
    cusp::coo_matrix<long long int, double, cusp::host_memory> A(CATAGORY_PER_SCAN,MAX_SIZE,TOTAL_ELEMENTS);
    cusp::coo_matrix<long long int, double, cusp::host_memory> B(MAX_SIZE,INPUT_VECTOR,TOTAL_TEST_ELEMENTS);

    for(int i=0; i< ELEMENTS_PER_TEST_CATAGORY;i++){    
        for(int j = 0;j< INPUT_VECTOR ; j++){
            int index = i * INPUT_VECTOR + j ;
            B.row_indices[index] = i; B.column_indices[ index ] = j; B.values[index ] = i;
        }    
    }
    for(int i = 0;i < CATAGORY_PER_SCAN;  i++){
        for(int j=0; j< ELEMENTS_PER_CATAGORY;j++){     
            int index = i * ELEMENTS_PER_CATAGORY + j ;
            A.row_indices[index] = i; A.column_indices[ index ] = j; A.values[index ] = i;
        }    
    }
    /*cusp::print(A);
    cusp::print(B); */
    //test vector
    cusp::coo_matrix<long int, double, cusp::device_memory> A_d = A;
    cusp::coo_matrix<long int, double, cusp::device_memory> B_d = B;

        // allocate output vector
    cusp::coo_matrix<int, double, cusp::device_memory>  y_d(CATAGORY_PER_SCAN, INPUT_VECTOR ,CATAGORY_PER_SCAN * INPUT_VECTOR);
    cusp::multiply(A_d, B_d, y_d);
    cusp::coo_matrix<int, double, cusp::host_memory> y=y_d;
    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    float elapsedTime;
    cudaEventElapsedTime(&elapsedTime, start, stop); // that's our time!
    printf("time elaplsed %f ms\n",elapsedTime);
    return 0;
} 
```

cusp::multiply 函数仅使用 1 个 GPU（据我了解）。

1.  如何使用 setDevice() 在两个 GPU 上运行相同的程序（每个 GPU 一个 cusp::multiply）。
2.  准确测量总时间。
3.  我如何在这个库中使用零拷贝固定内存，因为我自己可以使用 malloc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:44:18.293

> 1 如何使用 setDevice() 在两个 GPU 上运行相同的程序

如果您的意思是“我如何`cusp::multiply`使用两个 GPU 执行单个操作”，答案是您不能。

* * *

编辑：

如果您想在不同的 GPU 上运行两个单独的 CUSP 稀疏矩阵 - 矩阵产品，可以简单地将操作包装在一个循环中并`cudaSetDevice`在传输和调用之前`cusp::multiply`调用。您可能不会，但是这样做可以加快速度。我认为我说内存传输和`cusp::multiply`操作都是阻塞调用是正确的，因此主机 CPU 将停止直到它们完成。因此，不同 GPU 的调用不能重叠，并且不会比在单个 GPU 上执行两次相同的操作更快。如果您愿意使用多线程应用程序并拥有一个具有多个内核的主机 CPU，您可能仍然可以并行运行它们，但它不会像您希望的那样简单直接的主机代码。

> 2 准确测量总时间

您现在使用的`cuda_event`方法是测量单个内核执行时间的最准确方法。如果您有一个假设的多 GPU 方案，那么来自每个 GPU 上下文的事件的总和将是内核的总执行时间。如果总时间是指完成操作的“挂钟”时间，那么您需要在代码的整个 multigpu 段周围使用主机计时器。我隐约记得，在某些情况下，在最新版本的 CUDA 中，可能会在来自不同上下文的流中的事件之间进行同步，因此在这种情况下，基于 CUDA 事件的计时器可能仍然可用。

> 3 我如何在这个库中使用零拷贝固定内存，因为我自己可以使用 malloc。

据我所知，这是不可能的。CUSP 使用的底层推力库可以支持使用零拷贝内存的容器，但 CUSP 没有在标准矩阵构造函数中公开必要的机制，以便能够在零拷贝内存中分配 CUSP 稀疏矩阵。

# python - kd树构建排序优化

> ID：12494533
> 
> 赞同：0
> 
> 时间：2012-09-19T12:17:24.093
> 
> 标签：python, kdtree

用 Python 编程语言实现的 kd-tree 的算法构建如下（来自[http://en.wikipedia.org/wiki/K-d_tree](http://en.wikipedia.org/wiki/K-d_tree)）：

```
class Node: pass

def kdtree(point_list, depth=0):

  if not point_list:
    return None

  # Select axis based on depth so that axis cycles through all valid values
  k = len(point_list[0]) # assumes all points have the same dimension
  axis = depth % k

  # Sort point list and choose median as pivot element
  point_list.sort(key=lambda point: point[axis])
  median = len(point_list) // 2 # choose median

  # Create node and construct subtrees
  node = Node()
  node.location = point_list[median]
  node.left_child = kdtree(point_list[:median], depth + 1)
  node.right_child = kdtree(point_list[median + 1:], depth + 1)
  return node 
```

每一步都进行排序。如何减少分拣量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:25:59.853

看起来您只是在排序以围绕中位数进行拆分。相反，您可以实现线性时间选择算法，例如[quickselect](https://en.wikipedia.org/wiki/Selection_algorithm#Partition-based_general_selection_algorithm)，然后对`point_list`. 然后，您根本不需要排序。

# android - 具有多个地名的 Google Place 搜索 android

> ID：12494542
> 
> 赞同：0
> 
> 时间：2012-09-19T12:17:55.340
> 
> 标签：android, google-maps, google-maps-api-3, google-places-api

您好，我想根据该地点的纬度、经度、半径和名称来搜索地点。

我试过下面的代码：

```
HttpRequestFactory httpRequestFactory = createRequestFactory(HTTP_TRANSPORT);
HttpRequest request = httpRequestFactory
                .buildGetRequest(new GenericUrl("https://maps.googleapis.com/maps/api/place/search/json?"));
request.getUrl().put("key", API_KEY);
request.getUrl().put("location", _latitude + "," + _longitude);
request.getUrl().put("name", "Pacific Beach");
request.getUrl().put("radius", _radius); // in meters
request.getUrl().put("sensor", "false"); 
```

我已经通过了圣地亚哥的经纬度，并且成功获得了太平洋海滩的位置。

现在我想从 api 地方获取多个名称，例如现在如果我编写上面的代码并进行以下更改：

```
 request.getUrl().put("name","Pacific Beach|Gaslamp|Ocen Beach|Uptown|Hilcrest|Mission Valley|Fashion Valley|North Park"); 
```

在这里，我得到“不是任何位置”。

谁能告诉我应该如何编写上面的代码。

我不知道我是否要写多个搜索结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:24:11.127

我不确定您是否可以为名称指定多种可能性。

要尝试的一件事可能是添加多个`name`参数，表明它们是一个数组 ( `name[]`)。虽然可能根本不起作用，我还没有测试过。

否则，您可能必须获得所有可能的结果，然后在收到它们后对其进行过滤。

# java - 在休眠中延迟加载孩子时使用打印语句

> ID：12494543
> 
> 赞同：0
> 
> 时间：2012-09-19T12:18:06.677
> 
> 标签：java, hibernate

我有一个 Customer 和 Phone 类，其中一对多关联，lazy 设置为 true。

我使用id 加载 Customer 对象为**“101”**

```
Customer cust = (Customer) session.get(Customer.class, 1); -- (1)
cust.getPhoneList();                                       -- (2)
System.out.println(cust.getPhoneList());                   -- (3) 
```

在第 (1) 点，我没有手机列表，因为它们是延迟加载的。

在第 (2) 点，我没有电话列表，也没有进行数据库调用。

在点 (3) 或如果点 (2) 被点 (3) 替换，则进行数据库调用以返回电话号码列表。我一直认为只有在我对列表。例如，`cust.getPhoneList().size()`或迭代它。

我不明白为什么使用 print 语句进行数据库调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:21:16.587

实际上，您对列表**进行**了操作。

```
 System.out.println(cust.getPhoneList()); 
```

做为

```
 System.out.println(cust.getPhoneList().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:23:43.753

在内部，`System.out.println(Object x)`调用`String.valueOf(x)`，女巫然后：

```
 return (obj == null) ? "null" : obj.toString(); 
```

最后，您正在调用一个操作，即`toString()`方法。

由于您的列表由 Hibernate 持久化，因此它是`PersistentList`从数据库中检索的。这里是，方法`PersistentList`的实现`toString()`：

```
public String toString() {
    read();
    return list.toString();
} 
```

您会看到第一个调用是`read()`,witch 是强制列表初始化的方法。

显然，要进行初始化，您必须到数据库中检索所有数据。这触发了数据库调用。

# python - 获取两个（二进制）数字之间不同的位数

> ID：12494545
> 
> 赞同：4
> 
> 时间：2012-09-19T12:18:20.447
> 
> 标签：python, math, binary

我有两个数字（二进制​​或非二进制，没有任何作用），它们只有一位不同，例如（伪代码）

```
a = 11111111
b = 11011111 
```

我想要一个简单的python函数，它返回不同的位位置（给定示例中的“5”，从右到左看）。我的解决方案是（python）

```
math.log(abs(a-b))/math.log(2) 
```

但我想知道是否有更优雅的方式来做到这一点（不使用浮动等）。

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T12:25:54.293

您可以使用二进制独占：

```
a = 0b11111111
b = 0b11011111

diff = a^b  # 0b100000
diff.bit_length()-1 # 5 (the first position (backwards) which differs, 0 if a==b ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:22:54.510

如果不使用按位运算，您可以执行以下操作：

```
In [1]: def difbit(a, b):
   ...:     if a == b: return None
   ...:     i = 0
   ...:     while a%2 == b%2:
   ...:         i += 1
   ...:         a //= 2
   ...:         b //= 2
   ...:     return i
   ...: 

In [2]: difbit(0b11111111, 0b11011111)
Out[2]: 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:27:42.697

除非我错过了什么……

这应该工作：

```
>>> def find_bit(a,b):
    a = a[::-1]
    b = b[::-1]
    for i in xrange(len(a)):
        if a[i] != b[i]:
            return i
    return None

>>> a = "11111111"
>>> b = "11011111"
>>> find_bit(a,b)
5 
```

也许不是那么优雅，但它很容易理解，并且可以完成工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-01T05:56:19.763

使用`(a^b).bit_length()-1`对于只有一个差异位的数字来说是完美的。前任：

```
a = 1000000
b = 1000001
(a^b).bit_length()-1
Output: 0 
```

但是对于具有多个差异位的数字，它给出了最左边差异位的索引。前任：

```
a = 111111111111111111111111111111
b = 111111110111011111111111111111
c = a^b   # 1000100000000000000000
c.bit_length()-1
Output: 21  # Instead of 17\. 21 is the left most difference bit 
```

所以为了解决这个问题，我们需要隔离最正确的设置位，然后获取它的索引。因此， using`((a^b) & (-(a^b))).bit_length()-1`最适合所有输入：

```
c = (a^b) & (-(a^b))   # 100000000000000000 - Isolates the rightmost set bit
c.bit_length()-1
Output: 17
(a^b) & (-(a^b))).bit_length()-1
Output: 17 
```

[从这里](http://www.catonmat.net/blog/low-level-bit-hacks-you-absolutely-must-know/)了解如何隔离最右边的设置位

# android - 如何在 android 中使用 GCM 进行推送通知

> ID：12494546
> 
> 赞同：0
> 
> 时间：2012-09-19T12:18:25.323
> 
> 标签：android, android-intent, client, google-cloud-messaging, user-registration

目前C2DM已经转移到GCM，我在使用GCM的起步阶段，谁能指导我在android中使用GCM的过程是什么，如何注册设备。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:07:14.523

看看这篇文章。它显示了向 Google 注册您的应用程序、设置客户端代码以及通过 GCM 向您的 Android 设备发送通知的端到端流程。

[http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm](http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm)

# android - 动态添加后的Textview样式

> ID：12494554
> 
> 赞同：1
> 
> 时间：2012-09-19T12:18:59.443
> 
> 标签：android, styles, textview

我的问题是如何在动态添加后设置 textView 样式。

这是代码：

```
LinearLayout layout = (LinearLayout)findViewById(R.id.linarLay);
TextView textView = new TextView(this);
textView.setText("TEST1");        
layout.addView(textView); 
```

我可以看到已添加的文本视图，但是.. 我现在需要对其进行样式设置.. 到目前为止，我尝试了这个：

```
textView.setTextAppearance(getApplicationContext(),R.style.textStyle); 
```

我在 layout.addView(textView); 之后尝试了这段代码 在它完全一样之前不会改变任何事情..

任何想法/解决方案将不胜感激......谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:19:15.030

样式不会改变，因为尽管您`TextView`在添加后使用相同的对象设置样式`Layout`，但它不是布局的一部分。您必须使用其 id 从布局中获取`View`添加，并且当您更改其样式时，它将直接影响您对`Layout`.

试试这个：（我没有测试过，但*应该可以）

```
LinearLayout layout = (LinearLayout)findViewById(R.id.linarLay);
TextView textView = new TextView(this);
textView.setText("TEST1");
textView.setId(999);      // give some id  
layout.addView(textView);

TextView tv=(TextView)findViewById(999);
tv.setTextAppearance(getApplicationContext(),R.style.textStyle); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:48:30.687

我有一个类似的问题。我想用一个按钮做同样的事情。您可以以编程方式设置每个属性。

您可以使用一组方法创建一个类，如下所示：

```
private void setButtonStyle(Button b, String text)
{
    LayoutParams param = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT,
            LayoutParams.MATCH_PARENT, 1.0f);

    b.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.blue_button));
    b.setGravity(Gravity.CENTER);
    b.setText(text);
    b.setLayoutParams(param);
    b.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 20);
    b.setTypeface(null, Typeface.BOLD);
    b.setShadowLayer(2, 1, 1, R.color.button_shadow_colour);
    b.setTextColor(context.getResources().getColor(R.color.button_text_colour));
} 
```

如您所见，可以设置所需的一切。例如，param 变量在其构造函数中有 3 个参数，它们是 layout_width、layout_height 和 weight。所以你可以对 TextView 做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-03T11:43:05.240

自 API 23 起已弃用： ~~textView.setTextAppearance(getContext(), R.style.Headline);~~

所以选择：

```
 textView.setTextAppearance(R.style.Headline); 
```

# php - 在单击 x 轴以获取向下钻取报告时，在 highchart 柱向下钻取图表上触发单击事件

> ID：12494560
> 
> 赞同：3
> 
> 时间：2012-09-19T12:19:18.363
> 
> 标签：php, javascript, mysql, charts, highcharts

我想深入研究 highcharts 中的柱形图。我有一个 3 级向下钻取，每个至少有 20 个 x 轴标签。现在向下钻取适用于列单击。我想在 x 轴点击上做同样的事情。

根据我的研究，我发现[了这个可能的解决方案](http://jsfiddle.net/NULTY/279/)。点击 x 轴标签可以在这里看到我想要实现的目标。

我用来实现此功能的功能

```
function(chart) {

   //console.log(chart.xAxis[0].ticks[0]);
   $.each(chart.xAxis[0].ticks, function(i, tick) {
       tick.label.on('click', function() {
           var drilldown = chart.series[0].data[i].drilldown;
           if (drilldown) { // drill down
               chart.setTitle({
                   text: drilldown.name
               });
               setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color, drilldown.level , drilldown.ytitle);

           } else { // restore
               setChart(name, categories, data, null, level , 'Total Agent score');
               chart.setTitle({text: "Agent Performance Drill Down Report"});

               chart.setTitle(undefined, { text: 'Click the Columns to view Drill Down Reports.' });
           }
       });
   });

} 
```

**问题：**它适用于大多数 x-labels 但不是全部。这可以看出[@this fiddle](http://jsfiddle.net/NULTY/288/)标签钻取不适用于所有标签的所有 3 个级别。

另外，这是[我在highchart论坛上发表](http://highslide.com/forum/viewtopic.php?f=9&t=20657)的帖子以供参考

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:04:03.713

您在图表加载时添加处理程序，当时某些轴标签不会出现，因此这些标签不会响应点击事件

作为一个快速（读脏）修复，您可以添加与加载相同的处理程序到重绘，因此创建的新标签将绑定到它。

您可以将相同的函数绑定到重绘（这也发生在 x 轴标签也更改时，您可以替换为适合需要的不太频繁的事件）事件，因此每次重绘图表时您都取消绑定（因为我我不确定 highchart 中标签的生命周期，如果现有标签被重新用于新的向下钻取图表，则删除会更安全）任何现有的点击处理程序如下每个刻度

```
 $(tick.label.element).unbind('click'); 
```

然后添加点击处理程序

```
var bindAxisClick = function() {
    $.each(this.xAxis[0].ticks, function(i, tick) {
        $(tick.label.element).unbind('click');
        $(tick.label.element).click(function() {
            var drilldown = chart.series[0].data[i].drilldown;
            if (drilldown) { // drill down
                chart.setTitle({
                    text: drilldown.name
                });
                setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color, drilldown.level, drilldown.ytitle);

            } else { // restore
                setChart(name, categories, data, null, level, 'Total score');
                chart.setTitle({
                    text: "Drill Down Report"
                });

                chart.setTitle(undefined, {
                    text: 'Click the Columns to view Drill Down Reports.'
                });
            }
        });
    });
}; 
```

修改图表选项以添加重绘和加载处理程序

```
chart :{
    ...
    events: {
            redraw: bindAxisClick ,
            load:bindAxisClick 
    },
    ...
 } 
```

[从 x 轴标签向下钻取 @ jsFiddle](http://jsfiddle.net/jugal/SBkXL/)

# .htaccess - Zend 应用程序没有私有文件夹

> ID：12494561
> 
> 赞同：1
> 
> 时间：2012-09-19T12:19:19.693
> 
> 标签：.htaccess, zend-framework

我在子域 zend.example.com 中托管了一个 Zend 应用程序，我的托管服务提供商在该域的公共文件夹中创建了一个文件夹“zend”，并且无法更改，因此我可以从主域，例如 example.com/application/Bootstrap.php，其中 zend 应用程序的“公共”文件夹将被称为“zend”，以符合托管服务提供商的要求，有没有办法（可能使用 htaccess）我可以阻止访问应用程序文件夹的内容？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:32:27.657

您可以通过以下方式阻止对应用程序、库和任何其他应为私有的文件夹的访问：

```
RewriteEngine on
RewriteRule ^(application|library)(/.*)?$ - [F] 
```

# java - 关于线程和可运行文件

> ID：12494563
> 
> 赞同：0
> 
> 时间：2012-09-19T12:19:22.553
> 
> 标签：java, android, multithreading, handler, runnable

我在理解某些制作胎面环之间的差异时遇到了问题。

一个是（粗略的演示）：

```
Thread thread=new Thread("name") {
public void run()
  {
  // do stuff
  }
}.start(); 
```

第二个是：创建一个可运行的类，创建一个线程：

```
Thread thread = new Thread(this,"name").start(); 
```

第三个（在 android 中，如果它可以以其他方式工作，我不知道）：制作一个 Handler，创建一个 Runnable，并拥有`handler.postDelayed(runnable)`, 或`handler.post(runnable)`.

我不明白有什么区别，我唯一注意到的是制作线程使运行循环比使用处理程序快得多。有人可以向我解释它们之间有什么区别，我应该用什么来做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:25:58.740

第一种方式和第二种方式完全一样。只是不同的结构在不同的情况下更有用。请注意，`Thread`实现`Runnable`并且可能只是在新线程中运行自己。

第三种方式被您误解了一点。在实例化的线程中`Handler`运行（除非您指定另一个循环器）。如果您在 UI 线程中创建了您的，它也将在 UI 线程中运行。因此，它可能会运行得更慢。`Runnable``Handler``Handler``Runnable`

# django - 使用内联表单集更新对象时，django-generic-views + 列表索引超出范围异常

> ID：12494566
> 
> 赞同：1
> 
> 时间：2012-09-19T12:19:40.100
> 
> 标签：django, django-generic-views

谢谢你们的回复。尽管我将代码更改为以下内容，但我仍然遇到相同的异常：

```
class ProjectUpdateView(UpdateView):
form_class = ProjectForm
template_name = 'projects/project_create.html'
success_url = reverse_lazy('projects-list')

def get_object(self, queryset=None):
    obj = Project.objects.get(id=self.kwargs['pk'])
    return obj

def get_context_data(self, **kwargs):
    context = super(ProjectUpdateView, self).get_context_data(**kwargs)
    project = Project.objects.get(id=self.kwargs['pk'])

    if self.request.POST:
        context['reward_formset'] = ProjectRewardFormSet(self.request.POST, self.request.FILES, instance=project)  
    else:
        context['reward_formset'] = ProjectRewardFormSet(instance=project)
    return context

def form_valid(self, form):
    context = self.get_context_data()
    reward_formset = context['reward_formset']
    if reward_formset.is_valid():
        self.object = form.save(commit=False)
        self.object.owner = self.request.user
        self.object.save()
        reward_formset.instance = self.object
        reward_formset.save()
        return HttpResponseRedirect(self.get_success_url())
    else:
        return self.render_to_response(self.get_context_data(form=form)) 
```

以下是回溯：

```
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/core/handlers/base.py in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/contrib/auth/decorators.py in _wrapped_view
20\.                 return view_func(request, *args, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/views/generic/base.py in view
48\.             return self.dispatch(request, *args, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/views/generic/base.py in dispatch
69\.         return handler(request, *args, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/views/generic/edit.py in post
172\.         return super(BaseCreateView, self).post(request, *args, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/views/generic/edit.py in post
138\.             return self.form_valid(form)
...

▶ Local vars
/home/lara/.venv/reztarter/reztarter/../reztarter/projects/views.py in form_valid
22\.         context = self.get_context_data()
...

▶ Local vars
/home/lara/.venv/reztarter/reztarter/../reztarter/projects/views.py in get_context_data
39\.             context['reward_formset'] = ProjectRewardFormSet(self.request.POST)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/models.py in __init__
697\.                                                 queryset=qs, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/models.py in __init__
424\.         super(BaseModelFormSet, self).__init__(**defaults)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/formsets.py in __init__
50\.         self._construct_forms()
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/formsets.py in _construct_forms
115\.             self.forms.append(self._construct_form(i))
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/models.py in _construct_form
706\.         form = super(BaseInlineFormSet, self)._construct_form(i, **kwargs)
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/forms/models.py in _construct_form
451\.             kwargs['instance'] = self.get_queryset()[i]
...

▶ Local vars
/home/lara/.venv/reztarter/lib/python2.7/site-packages/django/db/models/query.py in __getitem__
190\.             return self._result_cache[k]
...

▶ Local vars 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:15:43.170

当有多个同时编辑[https://code.djangoproject.com/ticket/15574](https://code.djangoproject.com/ticket/15574)时，这是 InlineFormSets 的一个已知问题。

> 似乎内联表单集代码有点脆弱。当管理表单中提交的数据与数据库的状态不一致时，会抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:08:14.897

您正在使用基于类的视图很奇怪。我认为将这个逻辑放在 get_context_data 方法中是不行的。你应该只把创建表单集和最重要的东西——get_context_data 应该返回上下文。表单集的验证应该在 form_valid 方法中进行。

# iphone - 如何从 Child UIViewController iPhone 应用程序重命名父 UIViewController 标题？

> ID：12494567
> 
> 赞同：1
> 
> 时间：2012-09-19T12:19:48.930
> 
> 标签：iphone, ios, uiviewcontroller, title, uinavigationitem

我正在使用`UITabBarController`基于 iPhone 的应用程序。我的应用程序有*5 个水龙头*。在我的第四次点击 UIViewController 有一个 Child `UIViewController`。我的第一个`RootViewController`屏幕标题是“所有消息”。我的第二个 UIViewController 名称是“对话”。

屏幕流程是**点击 4 -> 所有消息 -> 对话**

All Messages 包含`UITableView`因此，如果用户单击 tableview 中的任何消息，我们会将用户带到对话屏幕 ( `UIViewController`)。此屏幕显示特定用户消息。

**从这个子 UIViewController 我必须将父视图控制器的标题名称从“所有消息”更新为“新消息（1）”，并且后退按钮名称应该从“所有消息”更改为“新消息（1）”**

我已按照以下代码更新屏幕标题。此代码位于名为 Conversation screen 的子视图控制器中。

```
AllMessagesViewController *mesViewController = [[AllMessagesViewController alloc] init];
mesViewController.navigationItem.title = @"New Messages(1)"; 
```

任何人请帮助我哪里做错了？这种做法正确吗？请帮助我做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:35:21.060

尝试使用`NSNotificationCenter`.

在`AllMessagesViewController`声明一个方法时：

```
- (void)changeTitle:(NSString *)newTitle; 
```

然后为通知事件注册视图控制器

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                             selector:@selector(changeTitle:) 
                                name:@"ChangeTitleEvent" object:nil]; 
```

然后，当您要更改标题时，`ConversationViewController`请发送通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"ChangeTitleEvent"
                                               object:@"New Message (1)"]; 
```

此方法将调用`changeTitle:`方法，`AllMessagesViewController`因此您只需使用参数更改标题`newTitle`：

```
- (void)changeTitle:(NSString *)newTitle
{
   self.title = newTitle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:41:09.080

做这个：

```
NSArray *arrControllers = [self.navigationController viewControllers];
if([[arrControllers objectAtIndex:[arrControllers count]-2] isKindOfClass:[AllMessagesViewController class]])
{
  AllMessagesViewController *objAllMessagesViewController = (AllMessagesViewController *)[arrControllers objectAtIndex:[arrControllers count]-2];
  objAllMessagesViewController.title = @"New Messages(1)";
} 
```

# boolean - 布尔运算符优先级

> ID：12494568
> 
> 赞同：21
> 
> 时间：2012-09-19T12:19:55.860
> 
> 标签：boolean, operator-keyword, operator-precedence

我想知道编程语言中的运算符优先级是否取决于实现，或者是否存在所有语言都遵循的固定规则。如果可能的话，您能否将以下运算符按最高优先级排序：AND、OR、NOT、XOR。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-19T12:35:24.900

我用谷歌搜索并发现[这](http://en.wikipedia.org/wiki/Order_of_operations#Programming_languages)表明某些语言（如 APL 和 SmallTalk）没有运算符优先规则，它们严格地从左到右/从左到右评估表达式。

但是，在大多数语言中，尤其是从 C 派生的语言中，遵循的相对优先顺序是 NOT > XOR > AND > OR

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-10-20T09:06:53.267

您已经看到，当表达式将 && 与 || 混合时 评估必须以正确的顺序进行。括号可用于将操作数与其正确的运算符分组，就像在算术中一样。与算术运算符一样，逻辑运算符具有确定在没有括号的情况下如何分组的优先级。

在表达式中，优先级最高的运算符首先与其操作数分组，然后下一个最高优先级的运算符将与其操作数分组，依此类推。如果有多个具有相同优先级的逻辑运算符，则从左到右检查它们。

程序员通常使用括号将操作数组合在一起以提高可读性，即使单独使用运算符优先级也是如此。

[![在此处输入图像描述](../Images/67deed805edca38414e260c4e6ac73d3.png)](https://i.stack.imgur.com/SUwCq.png)

[资源](https://chortle.ccsu.edu/java5/Notes/chap40/ch40_16.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-21T18:42:29.483

布尔还是按位？没有固定的规则，大多数语言都有类似的规则，但细节不同。在语言定义中查找。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-30T21:38:12.497

有三个基本的布尔运算符：NOT、AND、OR。XOR 只是`A AND NOT B OR NOT A AND B`or的一个简单版本`(A OR NOT B) AND (NOT A OR B)`。所以，只有这三个有共同的优先级：NOT > AND > OR。XOR 在语言中具有不同的地位，但它的优先级肯定不高于 AND 也不低于 OR。大多数语言（例如 C/C++/Javascript 等）在 AND 和 OR 之间都有它，但在其他语言（例如 Perl）中，XOR 与 OR 具有相同的优先级。

（OR 只能用 AND 和 NOT 表示，但它仍然是基本运算符`A OR B = NOT(NOT A AND NOT B)`：）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-03T22:57:52.367

证明 AND 的优先级高于 OR 的明显且简单的方法是比较带括号和不带括号的语句的结果：

```
std::cout << std::boolalpha;
std::cout << ( true || false && false )     << std::endl;   // gives true
std::cout << ( ( true || false ) && false ) << std::endl;   // gives false 
```

# javascript - JQuery - 如何带来 在网页的中心有一个

> ID：12494575
> 
> 赞同：2
> 
> 时间：2012-09-19T12:20:17.400
> 
> 标签：javascript, jquery, html, css

我在将`<p>`标签的背景图片置于网页中心时遇到问题。

脚本

```
$(function() {
    $('ul.nav a').bind('click', function(event) {
        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollLeft: $($anchor.attr('href')).offset().left
        }, 1000, "easeInOutExpo");
        event.preventDefault();
    });
    // $("#logo") = my <p> tag containg the background image
    var imgTop = ($(window).height() - $("#logo").css("height")) / 2;
    var imgLeft = ($(window).width() - $("#logo").css("width")) / 2;

    $("#logo").css({
        "top": imgTop,
        "left": imgLeft
    });

    setInterval(function() {
        $("#logo").fadeTo(2000, 0.7).fadeTo(2000, 1);
    }, 0);
}); 
```

CSS

```
*{
    margin:0;
    padding:0;
}

body{
    background: #100061;
    font-family:Georgia;
    /*font-size: 34px;*/
    letter-spacing:-1px;
    width:16000px;
    position:absolute;
    top:0px;
    left:0px;
    bottom:0px;
    overflow: hidden;
    height: 100%;
}

.section{
    margin:0px;
    bottom:0px;
    width:4000px;
    float:left;
    height:100%;
}
.section h2{
    margin:50px 0px 30px 50px;
}

.section p{
    margin:20px 0px 0px 50px;
    width:600px;
}

.section ul{
    list-style:none;
    margin:20px 0px 0px 300px;
}

#logo{
    width: 500px;
    height: 194px;
    position: absolute;
    top: 0;
    left: 0;
} 
```

HTML

```
<div class="section black" id="home">
    <img src="images/logo.png" id="logo" />
    <ul class="nav">
        <li>
            <a href="#home">Home</a>&nbsp;&nbsp;
            <a href="#aboutUs">About Us</a>&nbsp;&nbsp;
            <a href="#contactUs">Contact Us</a>&nbsp;&nbsp;
            <a href="#products">Products</a>&nbsp;&nbsp;
        </li>
    </ul>
</div>
<div class="section white" id="aboutUs">
    <h2>About Us</h2>
    <p>
        ‘A fathomless and boundless deep,
        There we wander, there we weep;
        On the hungry craving wind
        My Spectre follows thee behind.
    </p>
    <ul class="nav">
        <li>
            <a href="#home">Home</a>&nbsp;&nbsp;
            <a href="#aboutUs">About Us</a>&nbsp;&nbsp;
            <a href="#contactUs">Contact Us</a>&nbsp;&nbsp;
            <a href="#products">Products</a>&nbsp;&nbsp;
        </li>        
    </ul>
</div>
<div class="section black" id="contactUs">
    <h2>Contact Us</h2>
    <p>
        ‘He scents thy footsteps in the snow
        Wheresoever thou dost go,
        Thro’ the wintry hail and rain.
        When wilt thou return again?
    </p>
    <ul class="nav">
        <li>
            <a href="#home">Home</a>&nbsp;&nbsp;
            <a href="#aboutUs">About Us</a>&nbsp;&nbsp;
            <a href="#contactUs">Contact Us</a>&nbsp;&nbsp;
            <a href="#products">Products</a>&nbsp;&nbsp;
        </li>
    </ul>
</div>
<div class="section white" id="products">
    <h2>Products</h2>
    <p>
        ‘He scents thy footsteps in the snow
        Wheresoever thou dost go,
        Thro’ the wintry hail and rain.
        When wilt thou return again?        
    </p>
    <ul class="nav">
        <li>
            <a href="#home">Home</a>&nbsp;&nbsp
            <a href="#aboutUs">About Us</a>&nbsp;&nbsp;
            <a href="#contactUs">Contact Us</a>&nbsp;&nbsp;
            <a href="#products">Products</a>&nbsp;&nbsp;
        </li>
    </ul>
</div>
<!-- The JavaScript -->
<script type="text/javascript" src="jquery.min.js"></script>        
<script type="text/javascript" src="jquery.easing.1.3.js"></script>
<script type="text/javascript" src="script.js"></script> 
```

### [小提琴](http://jsfiddle.net/SYQLa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:23:34.760

如果段落中有图像元素，则需要以不影响段落内容的方式定位图像： p img{ position: absolute; 最高：50%；左：50%；边距：-75px 0 0 -75px；向左飘浮; }

为了绝对定位图像，容器必须使用`position: relative`. 这是一个例子： p{ height: 180px; 宽度：40%；位置：相对；边框：1px 纯红色；}

最后，标记：

```
<p> 
    <img src="http://placekitten.com/150/150" alt="nice kitten" />
</p> 
```

*但是*，更好的方法是使用 css: 显示图像`background: url(http://placekitten.com/150/150) no-repeat center center;`。因此标记会简单得多：

```
<div id="logo"></div> 
```

div 的 CSS：#logo{ background: url(http://placekitten.com/150/150) no-repeat center center; 高度：180px；宽度：40%；边框：1px 纯蓝色；}

...或在[http://jsfiddle.net/Er2Tw/](http://jsfiddle.net/Er2Tw/)

# css - jQuery 移动样式问题考虑以下代码： <select data-inline="true" data-theme="b"><option value="volvo">沃尔沃</option> <option value="saab">萨博</option> ID：12494576 赞同：1 时间：2012-09-19T12:20:21.230 标签：css, jquery-mobile 回答 #1 赞同：2 时间：2012-09-19T12:59:05.427 原因可以在jQm的CSS中找到： @media (min-width: 450px) .ui-field-contain .ui-select { width: 78%; display: inline-block; } 添加自定义样式表并覆盖宽度设置。 回答 #2 赞同：1 时间：2012-09-19T12:54:37.543 我不确定您要的是什么，但是如果您希望“消息”更接近样式选择，请在您的 CSS 中添加此规则： .ui-field-contain .ui-select { width: auto !important; } 只需更改auto为所需的数量。</select>

# windows-phone-7 - 如何在 Windows Phone 中自定义地图控制器以使用我的地图图像

> ID：12494577
> 
> 赞同：0
> 
> 时间：2012-09-19T12:20:24.293
> 
> 标签：windows-phone-7

我正在为我们学校开发一个地图应用程序。我们学校为我提供了自己的地图图像和坐标信息。所以我想用我的地图图像作为地图的来源，并根据用户的位置在地图图像中显示一个点。有人可以给我一些建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:11:03.990

有2种方式：

1.  [可以更改Map Control](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941096%28v=vs.92%29.aspx)的地图图块的来源（例如，从 Bing 到 Nokia 或 Google）。然而，为了使这个工作，map-tiles 源实现像四键这样的机制是很重要的（例如，见[这个](http://msdn.microsoft.com/en-us/library/bb259689.aspx)）。因此，要回答您的问题，如果您想将 Bing 地图控件与您学校的地图一起使用，以便您可以利用控件的定位功能，则需要您有一个正确设计的地图图块服务器才能实现此目的. 并且，如果我没记错的话，更改 Bing 地图控件可能存在一些法律问题。

2.  但是，鉴于您建议使用地图图像然后进行定位，那么我建议您使用地理坐标提供的地理坐标校准地图上的像素 XY 坐标系一样简单。观察者。然后，在您的代码中，您可以在这两个系统之间进行简单的映射，然后在图像上绘制一些东西。对于这一部分，您可以使用`writeablebitmap`或简单地使用您可以使用 silverlight 覆盖 UI 控件的事实。因此，对于后者，有一个带有学校地图图像的画布，然后在该画布上，您可以有一个`<image>`代表设备并将其左上角坐标更改为画布。

    因此，总而言之，当地理观察者为您的代码提供地理 xy 坐标时，像素 XY （您已预先计算）有映射功能，并使用该 XY 来定位叠加层`<image>`或在`writeablebitmap`您之前在哪里绘制了学校地图的图像。当您也想进行缩放时，这种方法会使事情变得复杂，但是这种解决方案很容易扩展。

这有助于澄清一些事情吗？

**在下面的评论中回答第二个问题：**

是的，您可以放大和缩小画布，但您必须自己编程。控件本身，画布没有这个能力。因此，您必须识别缩放操作的触发器（例如，单击 (+) 或 (-) 按钮或捏合和拉伸手势）并通过在画布上重新绘制区域的一部分来对此做出反应画布，以便现在该区域延伸到整个画布。也就是缩放。例如对于缩放情况：您必须确定与缩放因子相对应的几何区域，并且与画布对象的尺寸成比例。然后，您必须放大该部分，以便代表墙壁和它们之间的空间的边缘和空白空间按比例增长。还，您必须确定您在画布上修复的那个区域的中心点，以便一切都远离它。因此，您将获得适当的缩放效果。此时，您必须重新调整地理坐标到像素 XY 的映射函数，以便可以在新渲染的表面上精确且准确地绘制“图钉”或感兴趣的对象。

我知道这可能看起来非常密集，但是一旦您自己了解所需的机制，它就很简单了。

另一个更简单的选择是在 Web 浏览器控件中使用 SVG（可缩放矢量图形）。请注意，您仍然需要像素 xy 系统的地理坐标。但是，通过这种方法，您可以通过 SVG（具有放大和缩小操作的转换功能）和 Web 浏览器的组合来免费缩放，这使您能够渲染 SVG 并执行放大的手势处理到地图。为此，我相信工作成本将是重新创建您学校的地图，该地图是位图到 SVG。有像[Inkscape这样的工具](http://inkscape.org/)您可以使用它来加载地图的图像，然后在其上追踪轮廓。然后，您可以将该大纲文档保存为 SVG。事实上，在解决 Canvas 方法之前，我会推荐这种方法来解决您的问题，因为我认为这将是满足您需求的最简单途径。

# string - Lua - 如何删除字符串中整数周围的引号

> ID：12494579
> 
> 赞同：0
> 
> 时间：2012-09-19T12:20:34.973
> 
> 标签：string, lua

所以我有这个字符串：

```
{"scores":{"1":["John",60],"2":["Jude",60],"3":["Max",60],"4":["Kyle",60],"5":["Smith",60],"6":["Mark",50],"7":["Luke",40],"8":["Anne",30],"9":["Bruce",20],"10":["kazuo",10]}} 
```

那里有许多带有引号的整数，我想摆脱它们。我怎么做？我已经试过了：

```
print(string.gsub(string, '/"(\d)"/', "%1")); 
```

但它不起作用。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:05:14.773

Lua 没有像 Perl 这样的*正则表达式*，相反，它有[*模式*](http://www.lua.org/manual/5.2/manual.html#6.4.1)。这些是相似的，但有一些不同。

不需要分隔斜线`/ /`，转义字符是`%`但不是`\`。否则，您的试验基本上是正确的：

```
print(string.gsub(str, '"(%d+)"', "%1")) 
```

`str`包含输入字符串的变量在哪里。另请注意，[`string.gsub`](http://www.lua.org/manual/5.2/manual.html#pdf-string.gsub)返回**2 个**值，它们都被打印出来，第二个结果是替换的数量。使用一对额外的括号仅保留第一个结果。

您可以使用冒号运算符简化一点符号`:`：

```
print((str:gsub('"(%d+)"', "%1"))) 
```

# javascript - 从第三方代码中暴露未知的 JavaScript 对象方法

> ID：12494580
> 
> 赞同：0
> 
> 时间：2012-09-19T12:20:36.040
> 
> 标签：javascript, object, properties, firebug, inspect

我正在寻找一种方法来公开未知 JavaScript 对象的类型和方法。

我正在实现第三方代码，其方法的文档有限，因此我无权访问任何可以告诉我应该在`response`.

有没有办法确定这是什么类型的对象并公开它包含的方法？

```
for (var i = 0; i <= response.length - 1; i++) {
     console.log(response.i);
} 
```

Firebug 控制台中的输出：

> 响应：[对象对象]，[对象对象]，[对象对象]，....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:33:27.227

You may want to try

```
console.dir(response); 
```

It lists all the object's properties, and their respective types are indicated by colorization:

*   red key: Constructor functions
*   green key: methods
*   black key: other
    *   red value: string
    *   green value: object
    *   blue value: boolean
    *   gray value: `undefined`/`null`

This list is not exhaustive, and I haven't found any documentation on it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:23:34.353

你可以使用

```
 function printProperties(response, path){
      path = path || "";
     for (var prop in  response) {
         if(typeof response[prop] == 'object'){
             printProperties(response[prop], path + prop  + ".");
             continue;
          }

         console(path  + prop + " = " + response[prop]);
    }
} 
```

[jsfiddle](http://jsfiddle.net/mVJCw/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:24:41.623

您可以将其作为属性添加到`window`firebug 中并使用 DOM 浏览器，它允许您检查整个对象树。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:26:05.210

如果您想亲自观看：

1.  打开 Chrome 检查器 -> Web 控制台
2.  `console.log(response);`
3.  Enjoy, there you can view all properties recursively with details

# vb.net - 基于行号的数据表计算方法过滤器

> ID：12494582
> 
> 赞同：0
> 
> 时间：2012-09-19T12:20:41.893
> 
> 标签：vb.net, linq, datatable, aggregate-functions

我使用一个查询来获取 50 条记录并将其传递给数据表。然后，此记录以表格格式显示。显示器使用了分页，一次显示 10 条记录。可以移动到下一组或上一组记录，或者向前或向后移动 1 条记录。

我必须为当前可见的记录集找到列的最小值和最大值。我打算使用 Compute 方法，但我不确定它是否允许过滤除数据表中的列之外的任何内容。

我必须在查询中包含行号还是有更好的解决方案（如下所述）？

```
CType(dtLineup.Compute("Min(ArrivalDate)", dt.row(2) to dt.row(12)), Date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:55:29.453

没有什么像您在[MSDN 上`DataColumn.Expression`](http://msdn.microsoft.com/en-US/library/system.data.datacolumn.expression.aspx)的伪代码那样。正如您所说，您可以在查询中包含一个行号，但另一种方法是在您的数据表中添加一个行号列并在过滤器表达式中使用它。

```
DataColumn col = new DataColumn("rownumber", typeof(int));
col.AutoIncrement = true;
col.AutoIncrementSeed = 1;
datatable.Columns.Add(col); 
```

另一种选择可能是通过 linq (Skip-Take) 进行分页并在返回的行上计算聚合函数。但这可能是您当前应用程序结构的主要偏离。

# azure - WebAuthenticationBroker.AuthenticateAsync 仅返回回调 url

> ID：12494590
> 
> 赞同：3
> 
> 时间：2012-09-19T12:21:13.770
> 
> 标签：azure, windows-8, acs

我有一个简单的 Web API 应用程序，应该从 Metro 应用程序调用。我正在使用 WebAuthenticationBroker 来获取身份验证令牌。

```
var ipUri = new Uri("https://xxx.accesscontrol.windows.net:443/v2/wsfederation?wa=wsignin1.0&wtrealm=http%3a%2f%2fyyy:2858%2f");

var callbackUri = new Uri(http://yyy:2858/);

WebAuthenticationResult webAuthenticationResult = await WebAuthenticationBroker.AuthenticateAsync(
                                                       WebAuthenticationOptions.None,
                                                       ipUri,callbackUri);

if (webAuthenticationResult.ResponseStatus == WebAuthenticationStatus.Success)
{
     tokenBlock.Text = webAuthenticationResult.ResponseData.ToString();
} 
```

问题是在 webAuthenticationResult.ResponseData 我只得到应用程序回调 url（即）而不是令牌。

有任何想法吗？

谢谢

马努

# android - 如何在android的listview中获取mp3文件的缩略图

> ID：12494592
> 
> 赞同：0
> 
> 时间：2012-09-19T12:21:16.353
> 
> 标签：android

我想在listview中获取mp3文件的缩略图以及android中的标题轨道我做了很多但我没有得到适当的答案请给我正确的答案

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:14:46.530

myid3库是一个很好的用于读取和写入 id3-Tag 的 java 库[。](http://www.fightingquaker.com/myid3/)有了它，您可以提取 id3-Pictures。
虽然我还没有在Android上测试过，但至少你可以试一试。

# python - 迭代函数并将所有结果存储在变量中？

> ID：12494595
> 
> 赞同：0
> 
> 时间：2012-09-19T12:21:38.683
> 
> 标签：python, function, variables

这可能是一个非常简单的问题，但是当您迭代一个函数时，如何将所有结果存储在一个变量中，因为每当我这样做时，该变量只存储第一个结果？

```
for a in hometimeline['ids']:
   b = oauth_req(
    'https://api.twitter.com/1.1/statuses/user_timeline.json?count=1&user_id=%s'%a,
   '###########################################',  (these are just tokens)
   '###########################################') 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:23:15.743

使用列表

```
b = []
for a in hometimeline['ids']:
   b.append(oauth_req(
      'https://api.twitter.com/1.1/statuses/user_timeline.json?count=1&user_id=%s'%a,
      '###########################################',  (these are just tokens)
      '###########################################')) 
```

或字典

```
b = {}

for a in hometimeline['ids']:
   b[a] = oauth_req(
      'https://api.twitter.com/1.1/statuses/user_timeline.json?count=1&user_id=%s'%a,
      '###########################################',  (these are just tokens)
      '###########################################') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:24:19.770

使用列表理解：

```
b=[oauth_req("some_parameters_here%s",a) for a in hometimeline['ids']] 
```

# ios - 从一个 pdf 文档链接到另一个 pdf 文档（还有 ios 和 pspdfkit）

> ID：12494596
> 
> 赞同：1
> 
> 时间：2012-09-19T12:21:39.273
> 
> 标签：ios, pdf, hyperlink, pspdfkit

我必须制作一个显示 pdf 文档的应用程序。我将使用 PSPDFKIT。它运作良好。问题是，在这些 PDF 文档中，存在对其他 pdf 文档的引用。所有这些 pdf 文件都是本地的，将捆绑在应用程序中。

我已经尝试了各种导出设置和链接方式，但我无法通过从另一个 pdf 文档链接到它来打开 pdf 文档......不在应用程序中，不在我的 Mac 上。

有谁知道我能做什么？用户可以阅读 pdf 并单击该 pdf 中的链接，以获取其他 pdf 的更多信息，这一点非常重要。

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T23:27:31.743

在 v2.2 中，我添加了对其他文档的 PDF 链接注释的支持。有几种方法可以做到这一点，我已经在我的网站上记录了它们：http: [//pspdfkit.com/documentation.html#annotations](http://pspdfkit.com/documentation.html#annotations)。您还可以在 PSPDFCatalog 项目中找到示例 PDF。

# java - 如何从 HTML 代码中获取价值？

> ID：12494598
> 
> 赞同：0
> 
> 时间：2012-09-19T12:21:47.320
> 
> 标签：java, jsoup

我有这个代码：

```
<div id="g4iloprop">
<h4>HF propagation conditions: <span class="date">2012 Sep 19 1205 UTC</span></h4>
<p><b><span title="10.7cm solar flux">Solar flux:</span></b> 104<img src="nc.gif" alt="no change" hspace="2" /> <b><span title="Mid-latitude A Index">A:</span></b> 8<img 
```

请提示我取标签之间的值 104`</b> 104<img`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:00:21.663

尝试这个：

```
String html = // your html here

Document doc = Jsoup.parse(html);
Elements elements = doc.select("b + img");

for( Element e : elements )
{
    Node value = e.previousSibling();

    // eg. print the node, here the output is 104 and 8
    System.out.println(value.toString());
} 
```

如果您只需要第一个值，则可以将 for-Loop 替换为：

```
Node value = elements.first().previousSibling(); 
```

# java - 使用 Java 来自 Twilio Rest Api 的交付报告

> ID：12494599
> 
> 赞同：2
> 
> 时间：2012-09-19T12:21:59.350
> 
> 标签：java, android, jakarta-ee, sms, twilio

我正在尝试获取报告天气接收器是否收到短信？我可以发送短信，但 Twilio 没有回拨我指定的 URL 以下是我的代码片段：-

```
// Create a rest client
  TwilioRestClient client = new TwilioRestClient(com.main.Constants.ACCOUNT_SID,                    com.main.Constants.AUTH_TOKEN);

 // Get the main account (The one we used to authenticate the client
   Account mainAccount = client.getAccount();

 // Get all accounts including sub accounts
  AccountList accountList = client.getAccounts();

  // Send an sms
  SmsFactory smsFactory = mainAccount.getSmsFactory();
  Map<String, String> smsParams = new HashMap<String, String>();
  smsParams.put("To", number); // Replace with a valid phone

  // number in your account
  smsParams.put("From", com.main.Constants.FROM); // Replace with a valid                                   

  smsParams.put("StatusCallback", com.main.Constants.CALLBACKURL);

  smsParams.put("Body", "Token : " + token);

  sms = smsFactory.create(smsParams); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:47:21.500

Twilio 应使用 SMS 消息的状态向[回调 URL](https://www.twilio.com/docs/api/rest/sending-messages#post-parameters-optional)发出请求。

您能否通过将回调 URL 设置为可以检查传入 HTTP 请求的站点（例如[http://uncurler.heroku.com/](http://uncurler.heroku.com/) ）并发送测试 SMS 来验证回调 URL 是否实际被命中？然后在 Uncurler 上刷新您的示例页面并查找入站 HTTP 请求。

另一种可能性是您的出站 SMS 消息被拒绝，因此 Twilio 永远不会排队发送消息。检查 smsFactory.create() 行引发的异常，并检查那里的错误消息。

# git - 为什么我的 git 不能通过 gitolite 推送到我的服务器使用 git-daemon

> ID：12494607
> 
> 赞同：3
> 
> 时间：2012-09-19T12:22:28.997
> 
> 标签：git, gitolite, git-daemon

当我使用 gitolite 时，忽略`git-daemon`，我可以这样做`git clone git://xxx/xxx`，但是当我推送项目时，它向我显示错误：

```
Total 2 (delta 0), reused 0 (delta 0)
remote: Empty compile time value given to use lib at hooks/update line 6
remote: Use of uninitialized value in require at hooks/update line 7.
remote: Can't locate Gitolite/Hooks/Update.pm in @INC (@INC contains:  /usr/local/lib64/perl5 /usr/local/share/perl5 /usr/lib64/perl5/vendor_perl /usr/share/perl5/vendor_perl /usr/lib64/perl5 /usr/share/perl5 .) at hooks/update line 7.
remote: BEGIN failed--compilation aborted at hooks/update line 7.
remote: error: hook declined to update refs/heads/master
To git://www.54cxy.com/qianfuzi
 ! [remote rejected] master -> master (hook declined) 
```

但是，当我使用`ssh`like `git@xxx:xxx.git`it working时，不仅可以克隆，还可以推送，但是我想使用`git://`克隆和推送，那么我该怎么做才能让它工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:41:32.180

诀窍是，如果您要克隆由 gitolite 管理的 git 存储库，该远程存储库将包含一个`post-update`钩子（[由 Gitolite 保留](http://sitaramc.github.com/gitolite/cust.html#hooks)），它应该由 gitolite 调用。

通常，您应该能够使用本机 git 协议进行推送，前提是用户“守护进程”将 repo 声明为可读（[请参阅语法](http://sitaramc.github.com/gitolite/rules.html)，并参阅GitoliteV3 的“[接口”）`git-daemon`](http://sitaramc.github.com/gitolite/external.html#umask)

```
repo @all
    R   =   gitweb daemon 
```

> 特殊用户可读的任何 repo`daemon`都被认为是可读的`git-daemon`。
> 对于这些存储库中的每一个，`git-daemon-export-ok`都会在存储库中创建一个名为的空文件（即，其中的`repo.git`目录`$HOME/repositories`）。

因此，请检查您的 gitolite.conf 文件是否确实提到了 user `daemon`，以及该文件`$HOME/repositories/git-daemon-export-ok`是否存在。

# c# - 如何在 C# 中使用 (char* param[]) 编组函数

> ID：12494610
> 
> 赞同：0
> 
> 时间：2012-09-19T12:22:34.403
> 
> 标签：c#, char, marshalling, param

我在本机 dll 中有一个函数，其函数如下所示

```
int GetActiveNames(char* names[]); 
```

如何在 C# 中为上述函数创建我的 PInvoke 包装器方法，该函数返回一个字符串/字符数组？

* * *

为了更形象..

我尝试了 P/Invoke 方式并显示以下错误*尝试读取或写入受保护的内存。这通常表明其他内存已损坏。*.

我只是剥离了实际的 C 函数签名以使其变得简单。但是这里是完整的C函数签名和函数参数的描述

```
 int OpalGetActiveProjects(unsigned short allocatedProjects,
unsigned short *numProjects,
unsigned short allocatedModels,
unsigned short *numModels,
unsigned short allocatedProjectsPathLen,
unsigned short *maxProjectPathLen,
unsigned short allocatedModelPathLen,
unsigned short *maxModelPathLen,
unsigned short allocatedMachineNameLen,
unsigned short *maxMachineNameLen,
unsigned short allocatedIpLen,
unsigned short *maxIpLen,
char *projectPaths[],
unsigned short instanceIDs[],
char *machineNames[],
char *controllerIPs[],
char *modelPaths[],
unsigned short numModelsPerProject[]
unsigned short modelIDs[],
unsigned short modelStates[]); 
```

该函数返回活动项目的列表。对于每个项目，此函数返回配置文件的完整路径、打开该项目的机器的名称和 IP 地址、当前项目会话的实例 ID 以及属于该项目的模型列表。对于每个模型，返回路径、ID 和状态。如果分配的存储对于任何参数来说太小，则不返回任何列表，但会设置 numProjects、numModels、maxProjectPathLen、maxModelPathLen、maxMachineNameLen 和 maxIpLen 值，并且返回值为 E2BIG。应用程序可以使用此事实在第一次调用时指定长度为 0，分配所需的存储空间并发出第二次调用以获取信息。

* * *

输入参数

* * *

**已分配**项目：调用者为路径、机器名称、IP 地址和实例 ID 分配存储的项目数。 **已分配**模型：调用者为名称、路径和实例 ID 分配存储的模型数。 **allocateProjectPathLen**：分配的存储长度以接收项目路径 **assignedModelPathLen**：分配的存储长度以接收模型路径 **allocateMachineNameLen**：分配的存储长度以接收机器名称 **allocatedIpLen ：**分配的存储长度以接收IP地址

* * *

输出参数

* * *

**numProjects**：指向 API 将存储实际活动项目数的位置的指针。 **numModels：**指向 API 将存储所有活动项目的实际模型总数的位置的指针。 **maxProjectPathLen：**指向 API 将存储最长项目路径长度的位置的指针。 **maxModelPathLen：**指向 API 将存储最长模型路径长度的位置的指针。 **maxMachineNameLen：**指向 API 将存储最长机器名称长度的位置的指针。 **maxIpLen：**指向 API 将存储最长 IP 地址长度的位置的指针。 **projectPaths：** API 将存储活动项目配置文件路径的字符串数组。 **instanceIDs：** API 将存储活动项目的实例 ID 的数组。 **machineNames：** API 将存储机器名称的数组。 **controllerIPs：** API 将存储 IP 地址的数组。 **modelPaths：** API 将存储所有活动项目的模型路径的数组。 **numModelsPerProject：** API 将存储每个项目的模型数量的数组。使用这些值来确定哪个模型属于哪个项目。 **modelIDs：** API 将存储所有活动项目的模型 ID 的数组。 **modelStates：** API 将存储所有活动项目的模型状态的数组。

还有一个 C 程序使用 OpalGetActiveProjects() 函数来获取 projectPaths、machineNames 等。

```
#include <stdio.h>
#include <stdlib.h>
#include <malloc.h>
#include <string.h>

// Header for getcwd() is platform-dependent
#if defined(WIN32)
#include <direct.h>
#include <windows.h>
#elif defined(__linux__)
#include <unistd.h>
#define _MAX_PATH 256
 #endif
 #include "OpalApi.h"

void    PrintError(int rc, char *funcName);

 #define FALSE 0

 #define TRUE 1

 int main (int argc, char* argv[])
 {
     char                                **projectPath, **modelPath;
     char                                *projectPaths, *modelPaths;
     char                                **loaderMachineName, **controllerIp;
     char                                *loaderMachineNames, *controllerIps;
     int                                         i, rc, projectIdx;
     unsigned short                  *instId;
     int                             *instId2;
     int                                 * modelIds;
     unsigned short             *numModelsPerProject;
     unsigned short             *modelId;
     unsigned short             *modelState;
     unsigned short             allocProjects, numProjects;
     unsigned short             allocModels, numModels;
     unsigned short             allocProjectPathLen, maxProjectPathLen;
     unsigned short             allocModelPathLen, maxModelPathLen;
     unsigned short             allocMachineLen, maxMachineLen;
     unsigned short             allocIpLen, maxIpLen;

     // Obtenir la taille des données.
     allocProjects              =allocModels                 = 0;
     allocProjectPathLen = allocModelPathLen = 0;
     allocMachineLen         = allocIpLen            = 0;

     rc = OpalGetActiveProjects( 0, &allocProjects,
                                                             0, &allocModels,
                                                             0, &allocProjectPathLen,
                                                             0, &allocModelPathLen,
                                                             0, &allocMachineLen,
                                                             0, &allocIpLen,
                                                             NULL, NULL, NULL, NULL,
                                                             NULL, NULL, NULL, NULL );

     if ((rc != 0) && (rc != E2BIG))
     {
         PrintError(rc, "OpalGetActiveProject");
            printf(" -        alGetActiveProjects error output !!!\n");
            printf("\t numProjects - %i \n", allocProjects);
            printf("\t numModels - %i \n", allocModels);
            printf("\t maxProjectPathLen - %i \n", allocProjectPathLen);
            printf("\t maxModelPathLen - %i \n", allocModelPathLen);
            //printf("\t maxMachineNameLen - %i \n", maxMachineNameLen);
            printf("\t maxIpLen - %i \n", allocIpLen);
            return (rc);
             // Erreur
             //return returnInstance;
     }

     projectPath = (char **)_alloca(allocProjects * sizeof(*projectPath));
     projectPaths = (char *)_alloca(allocProjects * (allocProjectPathLen + 1) * sizeof(*projectPaths));

     loaderMachineName = (char **)_alloca(allocProjects * sizeof(*loaderMachineName));
     loaderMachineNames = (char *)_alloca(allocProjects * (allocMachineLen + 1) * sizeof(*loaderMachineNames));

     controllerIp = (char **)_alloca(allocProjects * sizeof(*controllerIp));
     controllerIps = (char *)_alloca(allocProjects * (allocIpLen + 1) * sizeof(*controllerIps));

     numModelsPerProject = (unsigned short*)_alloca(allocProjects * sizeof(*numModelsPerProject));

     modelPath = (char **)_alloca(allocModels * sizeof(*modelPath));
     modelPaths = (char *)_alloca(allocModels * (allocModelPathLen + 1) * sizeof(*modelPaths));

     for (i = 0; i < allocProjects; ++i)
     {
             projectPath[i]                          = &projectPaths[i * (allocProjectPathLen + 1)];
             loaderMachineName[i]        = &loaderMachineNames[i * (allocMachineLen + 1)];
             controllerIp[i]                 = &controllerIps[i * (allocIpLen + 1)];
     }

     for (i = 0; i < allocModels; ++i)
     {
             modelPath[i] = &modelPaths[i * (allocModelPathLen + 1)];
     }

     instId = (unsigned short *)_alloca(allocProjects * sizeof(*instId));
     instId2 = (int *)_alloca(allocProjects * sizeof(*instId2));
     modelId = (unsigned short*)_alloca(allocModels * sizeof(*modelId));
     modelState = (unsigned short *)_alloca(allocModels * sizeof(*modelState));

     rc = OpalGetActiveProjects( allocProjects, &numProjects,
                                                             allocModels, &numModels,
                                                             allocProjectPathLen, &maxProjectPathLen,
                                                             allocModelPathLen, &maxModelPathLen,
                                                             allocMachineLen, &maxMachineLen,
                                                             allocIpLen, &maxIpLen,
                                                             projectPath, instId,
                                                             loaderMachineName, controllerIp, modelPath,
                                                             numModelsPerProject, modelId, modelState);
     printf(" - OpalGetActiveProjects output !!!\n");
            printf("\t numProjects - %i \n", allocProjects);
            printf("\t numModels - %i \n", allocModels);
            printf("\t maxProjectPathLen - %i \n", allocProjectPathLen);
            printf("\t maxModelPathLen - %i \n", allocModelPathLen);
            //printf("\t maxMachineNameLen - %i \n", maxMachineNameLen);
            printf("\t maxIpLen - %i \n", allocIpLen);

    for(i=0; i<numProjects; i++)
    {
        printf("\t \t projectPath[%d] = %s \n", i, *(projectPath +i));
        printf("\t \t instId[%d] = %d \n", i, *(instId + i));
        printf("\t \t loaderMachineName[%d] = %s \n", i, *(loaderMachineName + i));
        printf("\t \t controllerIp[%d] = %s \n", i, *(controllerIp + i));
        printf("\t \t numModelsPerProject[%d] = %d \n", i, *  (numModelsPerProject +i));
    }

    for(i=0; i<numModels; i++)
    {
        printf("\t \t modelPath[%d] = %s \n", i, *(modelPath+i));
        printf("\t \t modelId[%d] = %d \n", i, *(modelId +i));
        printf("\t \t modelState[%d] = %d \n", i, *(modelState+i));
    }
    OpalDisconnect();
    getchar();
 }

 void   PrintError(int rc, char *funcName)
  {
char            buf[512];
unsigned short  len;

OpalGetLastErrMsg(buf, sizeof(buf), &len);
printf("Error !!! \n %s (code %d) from %s\n", buf, rc, funcName);
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:40:57.557

签名太奇怪了，无法翻译成 C#。我试着看看 TlbImp.exe 会将它翻译成什么，它说：

**TlbImp：警告 TI3015：运行时封送处理程序不能封送“Marshal2.IMarshal3.GetActiveNames”的至少一个参数。因此，此类参数将作为指针传递，并且可能需要不安全的代码来操作。**

如果可以，我建议更改函数以返回包含 BSTR 的 SAFEARRAY。在 C# 端，您会看到一个 System.Array，其元素（Object 类型）可以转换为 String。

我还建议让 GetActiveNames 成为 COM 类的方法。P/Invoke 太原始且不安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T18:30:03.283

使用 C# P/Invoke 函数：

```
using System.Runtime.InteropServices;

public class ActiveNames
{
    public string[] ActiveNames { get; set; }

    [DllImport("GetActiveNames.dll")] // replace with the actual name of the DLL
    unsafe private static int GetActiveNames(sbyte** names):

    public void GetActiveNames()
    {
        unsafe
        {
            // I use 100 here as an artificial number. This may not be a reasonable
            // assumption, but I don't know how the actual GetActiveNames works
            sbyte** names = (sbyte**)Marshal.AllocHGlobal(100).ToPointer();

            try
            {
                GetActiveNames(names);

                // fill the ActiveNames property
                ActiveNames = new string[100];

                for (int i = 0; i < 100; ++i)
                    ActiveNames[i] = new string(names[i]);
            }
            finally
            {
                // deallocate the unmanaged names memory
                Marshal.FreeHGlobal(IntPtr((void*)names));
            }
        }
    }
} 
```

并使用 C++/CLI（不需要 P/Invoke）：

```
#include "GetActiveNames.h" // replace with the actual GetActiveNames's header

using namespace System;
using namespace System::Runtime::InteropServices;

public ref class ActiveNames
{
private:
    array<String^>^ m_activeNames;

public:
    property array<String^>^ ActiveNames
    {
        array<String^>^ get()
        {
            return m_activeNames;
        }

        void set(array<String^>^ names)
        {
            m_activeNames = names;
        }
    }

    void GetActiveNames()
    {
        signed char** names = new signed char*[100];

        try
        {
            ::GetActiveNames(reinterpret_cast<char**>(names));

            ActiveNames = gcnew array<String^>(100);

            for (int i = 0; i < 100; ++i)
                ActiveNames[i] = gcnew String(names[i]);
        catch (...)
        {
            delete[] names;
            throw;
        }

        delete[] names;
    }
}; 
```

正如你所看到的，我做了一些不安全的假设，因为我不知道 GetActiveNames 是如何工作的（名称的内存是如何分配和释放的？你怎么知道返回了多少名称？）。如果您需要更多帮助，则必须更具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T01:07:27.137

哇，这真是一个可怕的 API。是否还有其他任何东西甚至远程...哦，我不知道...不错，您可以使用吗？但如果你真的想要...

```
using System;
using System.Runtime.InteropServices;

public class ActiveProjects
{
    public string[] ProjectPaths { get; set; }
    public ushort[] InstanceIds { get; set; }
    public string[] MachineNames { get; set; }
    public string[] ControllerIps { get; set; }
    public string[] ModelPaths { get; set; }
    public ushort[] NumberOfModelsPerProject { get; set; }
    public ushort[] ModelIds { get; set; }
    public ushort[] ModelStates { get; set; }

    [DllImport("<the DLL>")]
    unsafe private static int OpalGetActiveProjects(
        ushort allocatedProjects,
        ushort* numProjects,
        ushort allocatedModels,
        ushort* numModels,
        ushort allocatedProjectsPathLen,
        ushort* maxProjectPathLen,
        ushort allocatedModelPathLen,
        ushort* maxModelPathLen,
        ushort allocatedMachineNameLen,
        ushort* maxMachineNameLen,
        ushort allocatedIpLen,
        ushort* maxIpLen,
        sbyte** projectPaths,
        ushort* instanceIDs,
        sbyte** machineNames,
        sbyte** controllerIPs,
        sbyte** modelPaths,
        ushort* numModelsPerProject,
        ushort* modelIDs,
        ushort* modelStates
        );

    public void GetActiveProjects()
    {
        unsafe
        {
            ushort numberOfProjects = 0;
            ushort numberOfModels = 0;
            ushort maxProjectPathLength = 0;
            ushort maxModelPathLength = 0;
            ushort maxMachineNameLength = 0;
            ushort maxIpLength = 0;

            int result = OpalGetActiveProjects(
                0,
                &numberOfProjects,
                0,
                &numberOfModels,
                0,
                &maxProjectPathLength,
                0,
                &maxModelPathLength,
                0,
                &maxMachineNameLength,
                0,
                &maxIpLength,
                null,
                null,
                null,
                null,
                null,
                null,
                null,
                null
                );

            if (result != 0 && result != 123)
                throw new Exception("Error getting active projects");

            sbyte** projectPaths = null;
            ushort* instanceIds = null;
            sbyte** machineNames = null;
            sbyte** controllerIps = null;
            sbyte** modelPaths = null;
            ushort* numberOfModelsPerProject = null;
            ushort* modelIds = null;
            ushort* modelStates = null;

            try
            {
                projectPaths = (sbyte**)Marshal.AllocHGlobal(numberOfProjects * IntPtr.Size).ToPointer();
                for (int i = 0; i < numberOfProjects; ++i)
                    projectPaths[i] = null;
                for (int i = 0; i < numberOfProjects; ++i)
                    projectPaths[i] = (sbyte*)Marshal.AllocHGlobal(maxProjectPathLength);

                instanceIds = (ushort*)Marshal.AllocHGlobal(numberOfProjects * 2).ToPointer();

                machineNames = (sbyte**)Marshal.AllocHGlobal(numberOfProjects * IntPtr.Size).ToPointer();
                for (int i = 0; i < numberOfProjects; ++i)
                    machineNames[i] = null;
                for (int i = 0; i < numberOfProjects; ++i)
                    machineNames[i] = (sbyte*)Marshal.AllocHGlobal(maxMachineNameLength).ToPointer();

                controllerIps = (sbyte**)Marshal.AllocHGlobal(numberOfProjects * IntPtr.Size).ToPointer();
                for (int i = 0; i < numberOfProjects; ++i)
                    controllerIps[i] = null;
                for (int i = 0; i < numberOfProjects; ++i)
                    controllerIps[i] = (sbyte*)Marshal.AlloHGlobal(maxIpLength).ToPointer();

                modelPaths = (sbyte**)Marshal.AlloHGlobal(numberOfModels * IntPtr.Size).ToPointer();
                for (int i = 0; i < numberOfProjects; ++i)
                    modelPaths = null;
                for (int i = 0; i < numberOfProjects; ++i)
                    modelPaths = (sbyte*)Marshal.AllocHGlobal(maxModelPathLength).ToPointer();

                numberOfModelsPerProject = (ushort*)Marshal.AlloHGlobal(numberOfProjects * 2).ToPointer();
                modelIds = (ushort*)Marshal.AllocHGlobal(numberOfModels * 2).ToPointer();
                modelStates = (ushort*)Marshal.AllocHGlobal(numberOfModels * 2).ToPointer();

                ushort numberOfProjects2 = 0;
                ushort numberOfModels2 = 0;
                ushort maxProjectPathLength2 = 0;
                ushort maxModelPathLength2 = 0;
                ushort maxMachineNameLength2 = 0;
                ushort maxIpLength2 = 0;

                OpalGetActiveProjects(
                    numberOfProjects,
                    &numberOfProjects2,
                    numberOfModels,
                    &numberOfModels2,
                    maxProjectPathLength,
                    &maxProjectPathLength2,
                    maxModelPathLength,
                    &maxModelPathLength2,
                    maxMachineNameLength,
                    &maxMachineNameLength2,
                    maxIpLength,
                    &maxIpLength2,
                    projectPaths,
                    instanceIds,
                    machineNames,
                    controllerIps,
                    modelPaths,
                    numberOfModelsPerProject,
                    modelIds,
                    modelStates
                    );

                ProjectPaths = new string[numberOfProjects2];
                for (int i = 0; i < numberOfProjects2; ++i)
                    ProjectPaths[i] = new string(projectPaths[i]);

                InstanceIds = new ushort[numberOfProjects2];
                for (int i = 0; i < numberOfProjects2; ++i)
                    InstanceIds[i] = instanceIds[i];

                MachineNames = new string[numberOfProjects2];
                for (int i = 0; i < numberOfProjects2; ++i)
                    MachineNames[i] = new string(machineNames[i]);

                ControllerIps = new string[numberOfProjects2];
                for (int i = 0; i < numberOfProjects2; ++i)
                    ControllerIps[i] = new string(controllerIps[i]);

                ModelPaths = new string[numberOfModels2];
                for (int i = 0; i < numberOfModels2; ++i)
                    ModelPaths[i] = new string(modelPaths[i]);

                NumberOfModelsPerProject = new ushort[numberOfProjects2];
                for (int i = 0; i < numberOfProjects2; ++i)
                    NumberOfModelsPerProject[i] = numberOfModelsPerProject[i];

                ModelIds = new ushort[numberOfModels2];
                for (int i = 0; i < numberOfModels2; ++i)
                    ModelIds[i] = modelIds[i];

                ModelStates = new ushort[numberOfModels2];
                for (int i = 0; i < numberOfModels2; ++i)
                    ModelStates[i] = modelStates[i];
            }
            finally
            {
                if (projectPaths != null)
                {
                    for (int i = 0; i < numberOfProjects && projectPaths[i] != null; ++i)
                        Marshal.FreeHGlobal(IntPtr((void*)projectPaths[i]));

                    Marshal.FreeHGlobal(IntPtr((void*)projectPaths));
                }

                if (instanceIds != null)
                    Marshal.FreeHGlobal(IntPtr((void*)instanceIds));

                if (machineNames != null)
                {
                    for (int i = 0; i < numberOfProjects && machineNames[i] != null; ++i)
                        Marshal.FreeHGlobal(IntPtr((void*)machineNames[i]));

                    Marshal.FreeHGlobal(IntPtr((void*)machineIds));
                }

                if (controllerIps != null)
                {
                    for (int i = 0; i < numberOfProjects && controllerIps[i] != null; ++i)
                        Marshal.FreeHGlobal(IntPtr((void*)controllerIps[i]));

                    Marshal.FreeHGlobal(IntPtr((void*)controllerIps));
                }

                if (modelPaths != null)
                {
                    for (int i = 0; i < numberOfModels && modelPaths[i] != null; ++i)
                        Marshal.FreeHGlobal(IntPtr((void*)modelPaths[i]));

                    Marshal.FreeHGlobal(IntPtr((void*)modelPaths));
                }

                if (numberOfModelsPerProject != null)
                    Marshal.FreeHGlobal(IntPtr((void*)numberOfModelsPerProject));

                if (modelIds != null)
                    Marshal.FreeHGlobal(IntPtr((void*)modelIds));

                if (modelStates != null)
                    Marshal.FreeHGlobal(IntPtr((void*)modelStates));
            }
        }
    }
} 
```

# python - SqlAlchemy：将表导出到新数据库

> ID：12494611
> 
> 赞同：6
> 
> 时间：2012-09-19T12:22:35.560
> 
> 标签：python, sql-server, sqlite, sqlalchemy

最近才开始使用python，我喜欢它！但是，我坚持使用 SqlAlchemy。

我正在尝试编写一个脚本来读取 MS SQL 数据库、查询表（所有字段，仅对某些字段进行过滤），并将结果写入本地 SQLite 数据库。

（目的是写一个数据适配器：在将结果导出到另一个数据库之前对 SQLite 数据库执行一些查询。也可以写入目标数据库中的临时表。）

我可以建立连接并获得查询结果 - 我可以打印它们，所以我知道那部分有效。但是如何根据源 SQL Server 的查询结果的结构创建新表？

这有效：

```
import sqlalchemy

esd = sqlalchemy.create_engine( 'mssql+pyodbc://username:passwordSservername/dbname' )
for row in esd.execute( 'select * from ticket_actions where log_dt > \'2012-09-01\''):
    print( row.eFolderID ) 
```

这也有效：

```
import pyodbc
cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=servername;DATABASE=dbname;UID=username;PWD=password')
cursor = cnxn.cursor()
for row in cursor.execute( 'select * from ticket_actions where log_dt > \'2012-09-01\''):
    print( row.eFolderID ) 
```

关于如何创建与查询具有相同结构的新表的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:35:39.027

请参阅[创建和删除数据库表](http://docs.sqlalchemy.org/en/latest/core/metadata.html#creating-and-dropping-database-tables)：

> 创建…单个表可以通过`create()`…的方法来完成`Table`。

要阅读源结构，请参阅[反映数据库对象](http://docs.sqlalchemy.org/en/latest/core/reflection.html)：

> 可以`Table`指示对象从数据库中已经存在的相应数据库模式对象中加载有关其自身的信息。
> […]
> 反射系统也可以反射视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-10T13:01:20.447

测试这个：

```
def copy_table(src_session, src_class, dst_session, dst_class):
    r=src_session.query(src_class).all()
    for i in r:
        j=dst_class()
        [setattr(j, col.name, getattr(i, col.name)) for col in i.__table__.columns]
        dst_session.add(j)

se1=db1.Session()
se2=db2.Session()
copy_table(se1, db1.Book, se2, db2.Book)
se2.commit() 
```

# android - 如何在 Android HTC WildFire S 中添加视频录制限制？

> ID：12494615
> 
> 赞同：3
> 
> 时间：2012-09-19T12:22:48.257
> 
> 标签：android, android-camera

使用下面的代码我设置了视频录制的限制，但它不能工作？

`My Device version is 2.3.3.(Higher than API-8)`我想补充`limit 60 seconds.`

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
cameraIntent.putExtra(android.provider.MediaStore.EXTRA_DURATION_LIMIT,60);

//OR  cameraIntent.putExtra("android.intent.extra.durationLimit",60);  

startActivityForResult(cameraIntent,TAKE_VIDEO); 
```

是否有**任何使用隐式意图的解决方案**？或者我必须使用 Camera 和 SurfaceView For Limit 进行编码。

来自[文档](http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_DURATION_LIMIT)

# jquery - 带有我的标题的外部网站

> ID：12494621
> 
> 赞同：0
> 
> 时间：2012-09-19T12:23:19.130
> 
> 标签：jquery, css

我需要一个带有标题的页面和下面的外部站点。我需要用户能够在我的标题仍然存在时导航下面的外部站点。我不需要显示该外部页面的 URL。

当页面最初加载时，我希望它看起来像一个带有文本输入字段的实体页面，可以在其中加载 URL。提交表单后，我希望我的标题向上滑动到预设宽度，例如 100 像素的高度，并将 URL 加载到下面。

我是否需要使用框架、iframe 或其他东西？

我想我会在点击时使用 jQuery 来调整标题的大小？..

只是想了解这个过程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:28:21.680

是的，如果您想在自己的网站上显示另一个网站，您可以使用 iframe。

或者您可以使用 AJAX (http://api.jquery.com/category/ajax/) 将外部网站加载到您的网站上。

IFrame 将是最容易实现的。

# php - php/mysql 使用邮件配额安排电子邮件

> ID：12494629
> 
> 赞同：1
> 
> 时间：2012-09-19T12:23:51.843
> 
> 标签：php, mysql, email, amazon-ses, quota

我需要在 php/mysql 中编写自己的电子邮件调度程序。我正在使用亚马逊的 SES 发送电子邮件。我在“队列”MySQL 表中记录了需要通过电子邮件发送的人员和内容。成功发送电子邮件后，每条记录都会被删除。我想尽快发送这些电子邮件，但我需要牢记亚马逊的配额。他们限制您允许的电子邮件发送/秒。

我怎样才能安排这个不超过限制？我知道我可以编写一个 php cron 脚本，它只会从队列中提取 X 条记录并发送这些记录，但是如果我的 cron 每分钟只运行一次，就会浪费很多时间。（X 为配额限制/秒）

另一方面，如果我的电子邮件配额被撞到并且我可以每秒发送 1000 封邮件（或者一些荒谬的东西），如果我的脚本需要很长时间才能执行，我可能会遇到问题。cron 可能会再次触发并从 Queue 表中提取相同的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:53:39.790

您应该在执行脚本时创建一个锁定文件，并在执行完成时将其删除。然后，您可以提醒自己是否再次运行脚本而之前的执行尚未完成。

```
$filename = 'sending_emails.txt';
if (file_exists($filename)) {
    mail('your@email.com', 'Execution overlap', 'Adjust script parameters!');
    exit;
}
file_put_contents('sending_emails.txt', '1');
// Send e-mail logic here
unlink($filename); 
```

# wcf - 在 Windows 8 上使用 Microsoft 帐户的 Azure ACS 2.0

> ID：12494633
> 
> 赞同：6
> 
> 时间：2012-09-19T12:24:35.783
> 
> 标签：wcf, azure, windows-8, acs

我正在使用 SSL 保护我的 Windows 8 到 Windows Azure 托管的 WCF 服务连接。我有兴趣验证用户正在使用我的 Windows 8 应用程序，而不仅仅是一些使用 Fiddler 的“黑客”。

我显然不能在 c# 代码中存储用户名和密码，在这种情况下，我真的很想避免在用户每次使用应用程序时（或者永远）都要求用户输入用户名和密码。

我查看了[Azure ACS](http://acs.codeplex.com)，但它看起来仅用于单点登录，并且用户每次都必须输入用户名和密码。

反正有没有：

*   在 ACS 中使用默认 Microsoft 帐户（大多数用户在设置 Windows 8 时会输入该帐户）？
*   加密并存储用户的登录详细信息，以防止用户每次都必须输入登录详细信息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T00:59:53.040

关于您的要求“我有兴趣验证用户正在使用我的 Windows 8 应用程序，而不仅仅是一些使用 Fiddler 的‘黑客’。”，我不确定您会尝试保护您的应用程序的深度，就好像其他人想尝试使用一样您的应用程序不同，它们会找到自己的方式，如果您认为使用 ACS 或 LiveSDK 会增加任何安全性，我不这么认为。

ACS 或 LiveSDK 服务是对特定用户进行身份验证然后允许他们使用您的应用程序的方法。一旦将有关特定用户的身份验证令牌提供给您的应用程序，并且您无法保存并再次验证该信息，那么在您的应用程序中使用基于 ACS/LiveSDK 的身份验证与不使用它没有区别。这些基于 oAuth 的服务只是对用户进行身份验证的一种方式，您仍然需要编写额外的代码层来提供用户特定的服务。

无论您使用 ACS/oAuth/ 还是您自己的会员服务，用户都必须不时输入用户名和密码才能获得身份验证。根据登录时间和类型，您可以让用户在实时会话中保持活跃 x 时间，但是会话将过期，用户必须输入用户名和密码。将用户名和密码存储在本地以避免再次输入凭据不是一个好的应用程序设计。

现在关于您的第一个问题，您应该使用 LiveSDK（不是 Azure ACS）对 Live（Hotmail、Live、Skydrive 和 Outlook 域）用户进行身份验证，因为在 Windows 8 中，大多数服务都使用这些 ID，因此使用其中一个将帮助您申请成为同一生态系统的一部分。您可以使用[这个最新的文档](http://msdn.microsoft.com/en-US/library/live/hh243641)在您的应用程序中使用 Live SDK。如果您将在 Windows 8 应用程序中使用 Live SDK，并且用户在 Windows 8 上为他们的其他应用程序使用相同的 Live ID 并在您的应用程序之前登录，则您的应用程序将已经有一个实时会话可以使用它，具体取决于 Live ID 和应用程序设置.

关于您的第二个问题“加密并存储用户的登录详细信息以防止用户每次都必须输入登录详细信息？” 我不确定你为什么需要它。首先，除了用户名之外，没有 oAuth 服务会为您提供用户登录凭据，您可以保存该凭据以在用户再次访问时验证用户，并且您可以使用该凭据来确保它是正确的用户。您必须需要将此信息存储到云中，然后一旦通过身份验证，就可以做任何您想做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T02:06:11.270

看看这个适用于 Windows 8 现代风格应用程序的凭证存储示例 - [http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a](http://code.msdn.microsoft.com/windowsapps/PasswordVault-f01be74a)。它不是 Azure ACS - 但它应该可以帮助您解决问题。PasswordVault 是一个新的 API (Windows.Security.Credentials.PasswordVault)，它建立在我们看到的 .NET 3 中引入的识别功能之上。它允许您将远程应用程序凭据安全地存储在操作系统中的受保护存储中，并在其中动态访问它们你的申请。用户仍然可以完全控制商店，如果愿意，可以使用控制面板删除数据。目前，这是大多数现代应用程序为远程服务调用（如 Twitter）保存 OAuth 令牌等数据的方式。

这仅适用于第三方身份。如果您想改用 Microsoft 帐户，请按照上面的指导并查看 LiveSDK。

# c# - 从数据库填充组合框

> ID：12494634
> 
> 赞同：11
> 
> 时间：2012-09-19T12:24:39.110
> 
> 标签：c#, data-binding

我有一个组合框错误

我的代码：

```
SqlConnection conn = new SqlConnection();
try
{
    conn = new SqlConnection(@"Data Source=SHARKAWY;Initial Catalog=Booking;Persist Security Info=True;User ID=sa;Password=123456");
    string query = "select FleetName, FleetID from fleets";
    SqlCommand cmd = new SqlCommand(query, conn);
    cmd.CommandText = query;
    conn.Open();
    SqlDataReader drd = cmd.ExecuteReader();
    while (drd.Read())
    {
         cmbTripName.Items.Add(drd["FleetName"].ToString());
         cmbTripName.ValueMember = drd["FleetID"].ToString();
         cmbTripName.DisplayMember = drd["FleetName"].ToString();
    }
}
catch
{
     MessageBox.Show("Error ");
} 
```

数据显示在组合框中，但是当您**更改选择值成员时，显示成员不会改变。**

它现在正在工作，但是当我单击按钮以显示数据时

```
private void button1_Click(object sender, EventArgs e)
{
    label1.Text = cmbTripName.DisplayMember;
    label2.Text = cmbTripName.ValueMember;
} 
```

显示如下：

车队名称 车队
ID

它不显示值

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-19T12:51:35.820

您将不得不完全重写您的代码。**[DisplayMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.displaymember.aspx)**和**[ValueMember](http://msdn.microsoft.com/en-us/library/system.windows.forms.listcontrol.valuemember.aspx)**指向 columnNames！此外，您应该真正使用- 以便在查询执行后*释放*（并*关闭*`using block`）连接。

 **我没有使用**dataReader**来访问值，而是选择了一个**dataTable**并将其作为 dataSource 绑定到组合框上。

```
using (SqlConnection conn = new SqlConnection(@"Data Source=SHARKAWY;Initial Catalog=Booking;Persist Security Info=True;User ID=sa;Password=123456"))
{
    try
    {
        string query = "select FleetName, FleetID from fleets";
        SqlDataAdapter da = new SqlDataAdapter(query, conn);
        conn.Open();
        DataSet ds = new DataSet();
        da.Fill(ds, "Fleet");
        cmbTripName.DisplayMember =  "FleetName";
        cmbTripName.ValueMember = "FleetID";
        cmbTripName.DataSource = ds.Tables["Fleet"];
    }
    catch (Exception ex)
    {
        // write exception info to log or anything else
        MessageBox.Show("Error occured!");
    }               
} 
```

使用*dataTable*可能比*dataReader***慢**一点，但我*不必创建自己的类*。如果您真的**必须/想要**使用*DataReader*，您可以选择**@Nattrass 方法**。无论如何，您应该编写一个**[using 块](http://msdn.microsoft.com/de-de/library/yh598w02%28v=vs.80%29.aspx)**！

 *********编辑**

如果你想获得组合框的当前值试试这个

```
private void cmbTripName_SelectedIndexChanged(object sender, EventArgs e)
{
    if (cmbTripName.SelectedItem != null)
    {
        DataRowView drv = cmbTripName.SelectedItem as DataRowView;

        Debug.WriteLine("Item: " + drv.Row["FleetName"].ToString());
        Debug.WriteLine("Value: " + drv.Row["FleetID"].ToString());
        Debug.WriteLine("Value: " + cmbTripName.SelectedValue.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-19T12:39:14.787

要以`Combobox`您想要的方式使用，您可以将一个对象传递给该`cmbTripName.Items.Add`方法。

该对象应具有`FleetID`和`FleetName`属性：

```
while (drd.Read())
{
    cmbTripName.Items.Add(new Fleet(drd["FleetID"].ToString(), drd["FleetName"].ToString()));
}
cmbTripName.ValueMember = "FleetId";
cmbTripName.DisplayMember = "FleetName"; 
```

`Fleet`班级：

```
class Fleet
{
     public Fleet(string fleetId, string fleetName)
     {
           FleetId = fleetId;
           FleetName = fleetName
     }
     public string FleetId {get;set;}
     public string FleetName {get;set;}
} 
```

或者，您可能可以`Fleet`通过使用匿名类型完全消除对类的需求......

```
while (drd.Read())
{
    cmbTripName.Items.Add(new {FleetId = drd["FleetID"].ToString(), FleetName = drd["FleetName"].ToString()});
}
cmbTripName.ValueMember = "FleetId";
cmbTripName.DisplayMember = "FleetName"; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-05T18:33:24.253

```
void Fillcombobox()
{

    con.Open();
    cmd = new SqlCommand("select ID From Employees",con);
    Sdr = cmd.ExecuteReader();
    while (Sdr.Read())
    {
        for (int i = 0; i < Sdr.FieldCount; i++)
        {
           comboID.Items.Add( Sdr.GetString(i));

        }
    }
    Sdr.Close();
    con.Close();

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:31:18.333

在循环之外，设置以下。

```
cmbTripName.ValueMember = "FleetID"
cmbTripName.DisplayMember = "FleetName" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-20T09:39:00.753

```
private void StudentForm_Load(object sender, EventArgs e)

{
         string q = @"SELECT [BatchID] FROM [Batch]"; //BatchID column name of Batch table
         SqlDataReader reader = DB.Query(q);

         while (reader.Read())
         {
             cbsb.Items.Add(reader["BatchID"].ToString()); //cbsb is the combobox name
         }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T08:56:26.743

```
 SqlConnection conn = new SqlConnection(@"Data Source=TOM-PC\sqlexpress;Initial Catalog=Northwind;User ID=sa;Password=xyz") ;
            conn.Open();
            SqlCommand sc = new SqlCommand("select customerid,contactname from customers", conn);
            SqlDataReader reader;

            reader = sc.ExecuteReader();
            DataTable dt = new DataTable();
            dt.Columns.Add("customerid", typeof(string));
            dt.Columns.Add("contactname", typeof(string));
            dt.Load(reader);

            comboBox1.ValueMember = "customerid";
            comboBox1.DisplayMember = "contactname";
            comboBox1.DataSource = dt;

            conn.Close(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-22T16:07:30.943

```
string query = "SELECT column_name FROM table_name";      //query the database
SqlCommand queryStatus = new SqlCommand(query, myConnection);
sqlDataReader reader = queryStatus.ExecuteReader();                               

while (reader.Read())   //loop reader and fill the combobox
{
ComboBox1.Items.Add(reader["column_name"].ToString());
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-09T21:36:43.983

试试这个：

1.  ```
    using MySql.Data.MySqlClient; 
    ```

2.  写：

    ```
    MySqlConnection con = new MySqlConnection("datasource=172.16.2.104;port=3306;server=localhost;database=DB_Name;uid=root;password=DB_Password;sslmode=none;charset=utf8;");
    MySqlCommand cmd = new MySqlCommand();

    var query2 = "SELECT `salary` FROM `employees_db` ";
    using (var command2 = new MySqlCommand(query2, con))
    {
        using (var reader2 = command2.ExecuteReader())
        {
            while (reader2.Read())
            {
                combox.Text  = reader2.GetString("salary");
            }
        }
    } 
    ```*********

# jquery - 如何正确使用 toggle() 功能

> ID：12494640
> 
> 赞同：0
> 
> 时间：2012-09-19T12:25:00.400
> 
> 标签：jquery

我有一个更改表单的 toggle() 脚本。用户所做的是单击 ID 为“comp”的图像。然后，这会将标签更改为 New Company，并且选择下拉菜单更改为文本输入。但是我该如何让它恢复到原来的状态呢？

```
<script>
$(document).ready(function() {
    $('#newcomp').click(function() {
        $('select#company').toggle(); 
        $('select#company').replaceWith("<input type='text' id='company' name='company' >");
        $('#comp label').replaceWith('<label for="company">New Company</label>')
    });
});
</script> 
```

问候开局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:31:37.553

我想你想做的是 `fadeOut->replace->fadeIn.`

```
$(document).ready(function () {
    $('#newcomp').click(function () {
        $('select#company').fadeOut('slow', function() {
             $('#comp label').replaceWith('<label for="company">New Company</label>');
             $(this).replaceWith("<input type='text' id='company' name='company' >").fadeIn('slow');
         });
    });
}); 
```

# windows - 如何检查无人值守 SQL Server 2008 R2 Express 安装的结果？

> ID：12494645
> 
> 赞同：0
> 
> 时间：2012-09-19T12:25:32.883
> 
> 标签：windows, installation, sql-server-2008-r2

我正在为需要 SQL Server 2008 R2 Express 版本的软件套件创建部署项目。我创建了工作安装配置和脚本，让我可以在安静模式下安装它（无人值守安装） - 并测试，如果安装了先决条件，SQL Server 安装没有问题（在测试系统上）。
问题是：如果我在无人值守模式下安装 SQL Server，如果缺少 Powershell，我不会收到任何错误，安装将在没有提示的情况下中止。
有没有一种方法可以测试它是否成功或获取有关发生的错误的任何信息，但在经典命令提示符的范围内？我试图在其上部署服务器的机器上没有安装 powershell 已经发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:44:17.723

我有一个 NSIS 安装程序脚本，它可以安装 SQL 2008 R2 Express 并且能够执行此操作。sql "setup.exe" 文件使用返回码 0 表示成功。

请注意，如果您使用的文件需要提取安装文件的初始步骤（例如 SQLEXPRADV_x86_ENU.exe），那么我建议您自己提取这些文件并直接调用 setup.exe。可以使用“-x”命令行参数提取这些文件。（即SQLEXPRADV_x86_ENU.exe -x）

# eclipse - 在 ONE 项目中开发和调试 Eclipse Web 应用程序

> ID：12494646
> 
> 赞同：0
> 
> 时间：2012-09-19T12:25:35.307
> 
> 标签：eclipse, debugging, jsp, tomcat

有人知道如何使用 SAME Eclipse 项目进行开发、部署和调试吗？我目前的工作步骤是： - 在 Eclipse 中创建一个动态 Web 应用程序项目 - 创建一个 WAR 文件 - 将其上传到 tomcat - 然后在 tomcat 上调试它这样我就无法开发项目，只能调试。我试图直接在 tomcat 的 webapps 文件夹中创建一个动态 web 应用程序项目，但 Eclipse 总是创建一个不同于 tomcats 想要的结构（例如，没有 Webcontent 文件夹）。有没有可能同时进行开发和调试？我不想在 Eclipse 中启动 tomcat，而是启动正在运行的 tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:59:06.453

Eclipse 包括在各种应用服务器（包括 Tomcat）上发布、运行和调试动态 Web 项目的工具。

不要将您的项目放在 Tomcat 的 webapps 文件夹中。将它放在对您保留源代码有意义的地方。

使用“服务器”视图定义 Tomcat 服务器并将您的项目与其关联。在 Servers 视图中，您将能够启动/停止 Tomcat 并发布您的项目。如果您在当前透视图中没有看到 Servers 视图，请在 Window -> Show View -> Other 下找到它。

您还可以通过右键单击要运行的工件（例如 jsp 文件）并使用 Run As -> Run On Server 或 Debug As -> Debug On Server 直接跳转到调试。

# php - 如何使用 PHP 从文档中获取数字签名

> ID：12494648
> 
> 赞同：3
> 
> 时间：2012-09-19T12:25:38.203
> 
> 标签：php, digital-signature

我对这个数字签名的东西很陌生。

*   我想做的是检查文档是否经过数字签名。
*   如果已签名，则验证签名。

我已经搜索了很多。我发现了一些关于验证签名的有用主题（使用 openssl），但我找不到任何关于：文档是否签名（我还在 stackoverflow 中发现了一些相关问题，但没有以期望的方式回答）我不是寻找任何第三方工具。

是否有任何 openssl 方法或任何其他方法可以知道文档是否使用 php 签名或未签名？

**编辑**

提交文件是 pdf，文件类型是否会影响流程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:29:03.613

你应该从这里开始：

[PHP OpenSSL 函数](http://www.php.net/manual/en/ref.openssl.php)

[openssl_verify](http://www.php.net/manual/en/function.openssl-verify.php)

对于 PDF 文件，我会推荐[TCPDF](http://tcpdf.org)

这是一些与签名相关的[示例](http://www.tcpdf.org/examples/example_052.phps)（这实际上是用于登录，而不是用于验证，但请查看和研究）

# java - 确定应用程序是通过 Java 还是 Javaw 启动的？

> ID：12494649
> 
> 赞同：1
> 
> 时间：2012-09-19T12:25:49.910
> 
> 标签：java, console, javaw

`javaw.exe`我有一个通过使用 Launch4j 创建的启动包装器默认执行的 GUI 程序。

该程序也可以从命令行执行，然后将输出打印到控制台。

如何检测控制台是否可见，因此我输出的文本`System.out.println()`是否可见？

据我了解，这取决于程序是通过 Javaw/wrapper 启动还是直接通过`java -jar myprog.jar`. 有没有办法区分这两种启动方法和程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:31:00.027

如果`System.console()`返回`null`，则没有控制台，当您使用`javaw`而不是启动程序时会发生这种情况`java`。例子：

```
import javax.swing.JOptionPane;

public class Example {
    public static void main(String[] args) {
        if (System.console() != null) {
            System.out.println("Hello on the console");
        } else {
            JOptionPane.showMessageDialog(null, "Hello, there's no console");
        }
    }
} 
```

尝试编译它，然后使用`java Example`or启动它`javaw Example`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T12:27:38.070

$0 是在 shell 中启动最后一个 cmd 的程序。

# c# - 比较数据集中的行数和计数

> ID：12494654
> 
> 赞同：0
> 
> 时间：2012-09-19T12:26:08.393
> 
> 标签：c#, .net, linq

```
DataSet oDs = new DataSet();
DataTable odt = new DataTable();

odt.Columns.Add(new DataColumn("FILE_ID", typeof(string)));
odt.Columns.Add(new DataColumn("ID", typeof(string)));
oDs.Tables.Add(odt);
oDs.AcceptChanges();

for (int i = 1; i < 5; i++)
{
DataRow oDr = oDs.Tables[0].NewRow();
oDr["FILE_ID"] = "a";
oDr["ID"] = "b";
oDs.Tables[0].Rows.Add(oDr);
}
for (int i = 1; i < 5; i++)
{
DataRow oDr = oDs.Tables[0].NewRow();
oDr["FILE_ID"] = "c";
oDr["ID"] = "d";
oDs.Tables[0].Rows.Add(oDr);
}
 oDs.AcceptChanges(); 
```

如何在“if 语句”中使用 linq 比较列“FILE_ID”的行数和不同行数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:31:36.240

你可以试试

```
var allCount = (from row in odt.AsEnumerable() select row).Count(); //Count all rows

var specificCount = (from row in odt.AsEnumerable() select row.Field<string>("FILE_ID")).Distinct().Count(); 
```

# c# - 从程序启动文件的安全性

> ID：12494660
> 
> 赞同：0
> 
> 时间：2012-09-19T12:26:37.687
> 
> 标签：c#, security, process, config, launch

我有一个启动器应用程序，可让用户选择`exe`他们想要快速打开的文件。为此，他们从文件浏览器中选择文件，并将 exe 路径存储在配置文件中。这有安全问题吗？我担心某些恶意软件可能会更改配置文件以将 exe 文件更改为恶意可执行文件，然后应用程序会启动它。这是一个可行的威胁，还是如果恶意软件可以重写文件，它不需要代理应用程序来启动另一个文件？我可以加密文件，但我不介意用户通过文本编辑器手动更改设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:33:02.010

您可以将启动的 exe 文件的哈希存储在配置文件中，并在执行之间哈希更改时通知用户。

计算文件的哈希：

```
public static string ComputeHash(string fileName)
{
    using(FileStream st = File.OpenRead(fileName))
    {
         SHA1CryptoServiceProvider sha1 = new SHA1CryptoServiceProvider());
         byte[] hash = sha1.ComputeHash(st);
         return BitConverter.ToString(hash).Replace("-", "");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:35:07.250

您猜对了：如果恶意软件可以更改您磁盘上文件的内容，那么您已经遇到了麻烦，因为它可以将 exe 替换为另一个版本或格式化磁盘，而不是更改配置文件。

# asp.net-mvc-2 - Uploadify mvc2 HTTP POST notallowed

> ID：12494664
> 
> 赞同：0
> 
> 时间：2012-09-19T12:27:00.100
> 
> 标签：asp.net-mvc-2, uploadify

嗨，我做了本教程中的所有操作，[点击](http://techblog.edwardting.com/2011/05/20/multiple-file-upload-in-mvc-using-uploadify/)

但是当我尝试上传文件时，每次出现 POST not allowed 错误时，我都会检查 fiddler 并且 GET 可以工作，例如：

```
GET /Scripts/uploadify/uploadify.swf?preventswfcaching=1348057301853 HTTP/1.1 
```

但不发布

```
POST /Scripts/uploadify/uploadify.swf HTTP/1.1 
```

我的控制器方法的标题如下所示：

```
[HttpPost]
public string UploadFiles(HttpPostedFileBase FileData, FormCollection forms)
{ 
```

和 jquery 实现，如：

```
$(document).ready(function () {

// Multiple files - single input
var auth = "<% = Request.Cookies[FormsAuthentication.FormsCookieName]==null ? string.Empty : Request.Cookies[FormsAuthentication.FormsCookieName].Value %>";
var ASPSESSID = "dfgdf";
var entryID = "<%= ViewData["EntryID"] %>";

$("#file_upload").uploadify({
'uploader': '<%= Url.Content("~/Scripts/uploadify/uploadify.swf") %>',
'script': '<%= Url.Action("uploadFiles","Home") %>',
'scriptData': { ASPSESSID: ASPSESSID, AUTHID: auth, entryID: entryID },
'fileDataName': 'FileData',
'buttonText': 'Select files',
'multi': true,
'width': 250,
'sizeLimit': 200000000,
'simUploadLimit': 1,
'cancelImg': '<%= Url.Content("~/Scripts/uploadify/uploadify-cancel.png") %>',
'folder': '/Content',
'auto': false,
'removeCompleted' : false,
'onAllComplete' : function(event,data) {
alert(data.filesUploaded + ' files uploaded successfully!');

},
'onSelectOnce' : function(event,data) {
$("#uploadLink").show();
}

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:53:00.140

看起来教程是指一些旧版本的*Uploadify*，现在选项有点不同，你可以在[这里](http://www.uploadify.com/documentation/)找到最新列表。

我已经更新了您的代码（我已经评论了似乎不再存在的选项）：

```
$("#file_upload").uploadify({
    'swf': '<%= Url.Content("~/Scripts/uploadify/uploadify.swf") %>',
    'uploader': '<%= Url.Action("uploadFiles","Home") %>',
    'formData': { ASPSESSID: ASPSESSID, AUTHID: auth, entryID: entryID },
    'fileObjName': 'FileData',
    'buttonText': 'Select files',
    'multi': true,
    'width': 250,
    'fileSizeLimit': 200000000,
    //'simUploadLimit': 1,
    //'cancelImg': '<%= Url.Content("~/Scripts/uploadify/uploadify-cancel.png") %>',
    //'folder': '/Content',
    'auto': false,
    'removeCompleted': false,
    'onQueueComplete': function(event,data) {
        alert(data.filesUploaded + ' files uploaded successfully!');
    },
    'onSelect' : function(event,data) {
        $("#uploadLink").show();
    }
}); 
```

# asp.net - 如何在超时时将 Silverlight 应用程序重定向到 ASP.NET 登录页面？

> ID：12494665
> 
> 赞同：0
> 
> 时间：2012-09-19T12:27:07.313
> 
> 标签：asp.net, silverlight

我对托管在 ASP.NET 站点中的 Silverlight 5 应用程序有一个要求，该应用程序具有 5 分钟超时的 FormAuthentication。我有一个客户端要求，当会话超时发生时，必须将下一个用户请求重定向到 login.aspx 并再次登录。

目前我在`Application_UnhandledException`处理程序中有这个：

```
if (domainException != null && !WebContext.Current.User.IsAuthenticated) {
    e.Handled = true;
    System.Windows.Browser.HtmlPage.Document.Submit(); // redirect to login page
} 
```

谢谢埃利奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:34:02.110

您可以尝试使用 - 基于`Navigate Method`

```
System.Windows.Browser.HtmlPage.Window.Navigate(new Uri("url", UriKind.Absolute)); 
```

链接： http: [//msdn.microsoft.com/fr-fr/library/cc189809 (v=vs.95).aspx](http://msdn.microsoft.com/fr-fr/library/cc189809(v=vs.95).aspx)

# parsing - 我可以将参数传递给我的 fsyacc 解析器吗？

> ID：12494667
> 
> 赞同：3
> 
> 时间：2012-09-19T12:27:17.227
> 
> 标签：parsing, f#, fsyacc, fslex, f#-powerpack

我知道可以将参数传递给词法分析器：

```
rule tokenize scope = parse
  | whitespace       { tokenize scope lexbuf                       }
  | newline          { newline lexbuf; tokenize scope lexbuf       } 
```

但我无法以类似的方式定义我的解析器开始符号。

我试图这样定义它：（感谢[这个](https://stackoverflow.com/questions/11342379/how-to-add-and-use-custom-context-parameters-during-parsing-with-f-fsyacc)问题）

```
%type < (IScope, AST.Script) Fun > Script

// with the following definition in the head section of the parser:
type ('a,'b) Fun = 'a -> 'b 
```

但是我必须像这样定义每个非终端符号，它们都会返回 lambdas。不过，这不是我想要实现的目标，我希望能够`scope`在几个非终端中访问参数并在解析期间执行它们的操作。

我注意到[IParseState](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/fsharp.powerpack/microsoft.fsharp.text.parsing.type_iparsestate.html)`ParserLocalStore`类型中有一个，它只包含（仅通过调试检查）。由于我可以通过每个非终端访问它，我是否可以在其中存储参数，或者这是一个坏主意？`LexBuffer``parseState`

我曾考虑在解析器的头部使用可变变量，但它们将是静态的（我认为？），这将阻止我同时解析多个输入......

**编辑：**

目前我将`scope`参数存储在特定的令牌中：

```
%token <string * IScope> IDENT 
```

我传递`scope`给 Lexer，他在创建相关标记时将其嵌入到相关标记中......我真的不喜欢这个解决方案，但我无法想出更好的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:55:03.723

中有一个`Dictionary<string, obj>`，`LexBuffer`也可以通过 获得`parseState`。没有找到更好的解决方案，我最终将我的参数存储在那里。

我知道这很可能不打算以这种方式使用，并且可能在 fsyacc 的未来版本中不可用，但我现在坚持使用它。如果有人需要做同样的事情，我会在此处留下我创建的两个扩展方法，以便以更简洁的方式访问我的参数：

```
type IParseState with
    member x.LexBuffer() = x.ParserLocalStore.["LexBuffer"] :?> LexBuffer<char>

type LexBuffer<'a> with
    member x.SomeParameter
        with get() = x.BufferLocalStore.["SomeParameter"] :?> SomeParamType
        and set(v) = x.BufferLocalStore.["SomeParameter"] <- v 
```

由于还没有任何答案，我暂时接受这个。随意提出一个更好的解决方案，我会改变接受的答案。

# android - 使用最小宽度配置限定符

> ID：12494670
> 
> 赞同：4
> 
> 时间：2012-09-19T12:27:22.390
> 
> 标签：android, configuration, drawable, qualifiers

使用drawable-swdp-like drawable-sw720dp-xhdpi是否有效？

下面是我的场景： 我的 Acer iconia tab A501 (10") 的分辨率为 1280x800，密度为 mdpi(160dp)。预计从 drawable-sw720dp-mdpi 获取资源。但资源是从 drawable-sw720dp 获取的-xhdpi。

我有以下文件夹：drawable-sw720dp drawable-sw720dp-mdpi drawable-sw720dp-hdpi drawable-sw720dp-xhdpi

这是这个限定词的使用方式吗？

或者在计算最小宽度时是否已经考虑了密度。所以我应该只有一个格式的文件夹：drawable-sw720dp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T22:24:58.157

我遇到了同样的问题并追踪了这个问题。我相信 ICS（对我来说是 Android 4.0.3）中存在一个错误，其中非 XHDPI 设备采用 XHDPI 值。因为大多数 XHDPI 设备都是在 Jelly Bean（Nexus 4、Nexus 10）中开始的，所以在末尾使用 -v16 限定文件夹（而不是什么都没有或 -v14）可以解决问题。运行 Jelly Bean 的 10" 非 XHDPI 设备没有此错误，因此它似乎可以工作。这确实意味着 JB 之前的任何 XHDPI 设备都会损坏，但我可以冒这个风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:45:37.710

如果设备的密度为 hdpi，那么分辨率为 1280x800 的平板电脑当然会从 drawable-xhdpi 获取资源。

因此，为平板电脑设计不同的分辨率，您将必须创建具有适当分辨率名称的不同图像文件夹。

我想这会帮助你更多。 [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

谢谢

# ruby-on-rails - Rails 中的自引用映射表

> ID：12494674
> 
> 赞同：0
> 
> 时间：2012-09-19T12:27:38.860
> 
> 标签：ruby-on-rails

我试图解决在一个小型 Rails 应用程序中创建 Shiping Zones 的问题。

数据库列出了属于用户的项目，这些项目可以出售给其他用户。两者都可以是全球性的，并且它们的原产国列在 location_countries 表中。

我目前看到的方式是会有一个运输区域表 [id, name, description] 和一个映射表 [from_country_id, to_country_id, shipping_zone_id] 两次引用 location_countries 表以确定要使用的区域规则，以及shipping_zones 表（最终参考定价矩阵）。

我遇到的问题是弄清楚这应该如何在模型文件中表示：一个 location_country 可以有多个区域，具体取决于另一个 location_country。

在我看来，这应该是直截了当的，但我也觉得我在解决这一切都是错误的。请对此有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:24:24.770

我建议创建和链接类如下：

```
class Country

  has_many :from_mappings, :class_name => "Mapping", :foreign_key => :from_country_id
  has_many :from_countries, :through => :from_mappings

  has_many :to_mappings, :class_name => "Mapping", :foreign_key => :to_country_id
  has_many :to_countries, :through => :to_mappings
...

class Mapping

  belongs_to :shipping_zone

  belongs_to :from_country, :class_name => "Country", :foreign_key => :to_country_id
  belongs_to :to_country, :class_name => "Country", :foreign_key => :from_country_id
... 
```

我*认为*这应该是您的解决方案，但我可能误解了您问题的某些部分。

# redirect - 删除 PHPFox 中访问者的默认登录/注册页面，并将访问者重定向到特定页面

> ID：12494676
> 
> 赞同：1
> 
> 时间：2012-09-19T12:27:44.620
> 
> 标签：redirect, phpfox

我希望访问者（未注册用户）被重定向到特定页面，例如我的 phpfox 站点的博客或页面（即他们能够看到与所有人共享的内容）。

目前，当访问者访问我的 phpfox 站点时，例如`www.mysite.com`，用户会看到登录/注册表单，我想取消这些表单。我希望访问者被重定向到，比如说，`http://mysite.com/index.php?do=/pages/` 或 `http://mysite.com/index.php?do=/`

我应该查看哪些特定文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:21:59.817

为了将访问者导航到其他页面，您可以使用 phpfox 的默认功能来重定向页面，使用 URL lib ( `Phpfox::getLib('url')->send('pin');`) 的发送功能。

在上面的代码中，我编写了将页面导航到 pin 模块的代码，您可以使用代码将页面重定向到特定目的地。

使用 index-visitor.class 文件 'module\core\include\component\controller\index-visitor.class' 的处理函数顶行的代码

# python - 如何在 python 中制作基于交互式 CLI 的应用程序？

> ID：12494681
> 
> 赞同：0
> 
> 时间：2012-09-19T12:28:04.740
> 
> 标签：python, ipython, raw-input

我正在为我们的手持扫描仪编写一个 python 程序。我们必须扫描大量条形码，但我不喜欢一直按“输入”。

无论如何您可以说：在输入时，如果您输入的字符串正好是 20 个字符，请创建一个新输入？

我可以计算 raw_input() 的返回值，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:53:18.487

您可以使用此[`getch`](http://code.activestate.com/recipes/134892/)功能。

> 一个小型实用程序类，用于在 Windows 和 UNIX 系统上从标准输入读取单个字符。它提供了一个类似 getch() 函数的实例。

然后你可以简单地使用一个循环来获得 20 个字符。

```
import sys
while 1:
    c=''
    while len(c) < 10:
        g = getch()
        sys.stdout.write(g)
        c += g
    print "\nYou said", c 
```

# three.js - 自定义几何颜色

> ID：12494683
> 
> 赞同：3
> 
> 时间：2012-09-19T12:28:09.410
> 
> 标签：three.js

我正在通过构建自定义定位面来创建自定义几何图形。我正在使用`MeshNormalMaterial`for 材料，我想彼此独立地定义面的颜色。但是，无论我设置什么颜色，我仍然得到相同的外观结果。

我的代码如下：

```
var geometry = new THREE.Geometry();
for (var i = 0; i < length - 1; i++) {
  for (var j = 0; j < length - 1; j++) {
    geometry.vertices.push(new THREE.Vector3(x[i][j], y[i][j], z[i][j]));
    geometry.vertices.push(new THREE.Vector3(x[i + 1][j], y[i + 1][j], z[i + 1][j]));
    geometry.vertices.push(new THREE.Vector3(x[i + 1][j + 1], y[i + 1][j + 1], z[i + 1][j + 1]));
    geometry.vertices.push(new THREE.Vector3(x[i][j + 1], y[i][j + 1], z[i][j + 1]));
    var face = new THREE.Face4(index, index + 1, index + 2, index + 3);
    face.color.setHex(color);
    geometry.faces.push(face);
    index += 4;
  }
}

geometry.computeFaceNormals();
var object = new THREE.Mesh(geometry, new MeshNormalMaterial());
parent.add(object); 
```

我应该对上面的代码进行什么更改，例如我可以设置面部颜色并让它们实际显示我设置的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:50:44.183

AFAIK`MeshNormalMaterial`将始终为您提供相同的颜色。

试试这个：

```
new MeshBasicMaterial({ vertexColors : THREE.VertexColors }) 
```

# iphone - 在 iOS 上的 UITabBarController 下方添加 UIViewController，例如 youtube 应用

> ID：12494685
> 
> 赞同：0
> 
> 时间：2012-09-19T12:28:15.477
> 
> 标签：iphone, ios, view, uitabbarcontroller, slide

我有`UITabBarController`几个标签。当我单击`UIButton`第一个视图（选项卡）时，我想整个`UITabBarController`滑出并显示位于下方的新`UIView`视图`UITabBarController`。

当您开始播放视频时，youtube iPhone 应用程序上会发生类似的事情。

我将 UITabBarController 添加到 appDelegate 中的窗口，如下所示：

```
self.window.rootViewController = self.tabBarController; 
```

**解决方案：**

```
[self.view.window insertSubview:welcomeViewController.view atIndex:0];
[UIView animateWithDuration:1.0 delay:0\. options:UIViewAnimationOptionBeginFromCurrentState animations:^{
    CGRect frame = self.tabBarController.view.frame;
    frame.origin.x += 400;
    self.tabBarController.view.frame = frame;
} completion:^(BOOL finished) {
    //
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:32:51.097

`UITabBarController`为单击`UIButton`第一个视图（选项卡）添加一些动画？当调用下一个视图时，只需在按钮的动作中添加动画即可。为此，您还必须设置一个计时器才能`UITabBarController`明显缓解

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:36:27.850

尝试将标签栏控制器框架移出视线：

```
CGRect newFrame = tabBarController.view.frame;
newFrame.origin.y += winHeight;
[UIView
    animateWithDuration:0.5
    animations:^{
        tabBarController.view.frame = newFrame;
    }]; 
```

# jquery - 使用 Ajax 将 $_POST 变量和 $_FILE 变量发送到 .php？

> ID：12494687
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:28:16.550
> 
> 标签：jquery, html, upload

由于某些原因，我需要在我的网站上添加一个 ajax 图片上传系统。（我不想刷新页面...）

一些 jquery 插件非常好，但我通过 id 将图像存储在我的服务器上，我无法告诉我的服务器（使用这些插件）它必须使用哪个 id。所以我需要一种方法来向我的服务器发送一个 int var ($id)，它告诉 upload.php 文件（接收 $_FILE var）它应该存储图像文件的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:07:07.807

没关系，我使用了 $_SESSION 变量，所以我可以知道我是哪个 id :D 无论如何谢谢

# c# - 在 C# 中使用 powershell 的新远程桌面应用程序 - 参数

> ID：12494688
> 
> 赞同：2
> 
> 时间：2012-09-19T12:28:17.693
> 
> 标签：c#, powershell, remote-desktop

使用`System.Management.Automation`我尝试在 C# 中添加新的远程桌面应用程序。

```
pipeline.Commands.AddScript("new-item -path RDS:\\RemoteApp\\RemoteAppPrograms -name         ‘calc2’ -ApplicationPath \"%SYSTEMDRIVE%\\Windows\\system32\\calc.exe\""); 
```

以上是我用来创建应用程序的代码。然而它抛出了一个

```
System.Management.Automation.ParameterBindingException:
  A parameter cannot be found that matches parameter name 'ApplicationPath'. 
```

我的猜测是新项目 cmdlet 没有 ApplicationPath 参数。所以 C# 会抛出一个错误。虽然这在 Powershell 提示符下工作正常。

任何解决方案表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:58:41.987

该`New-Item`cmdlet 有一个`Name`参数，但没有`ApplicationPath`参数，这就是您收到该错误的原因。New-Item 用于创建空的新项目，例如空文件或目录（至少在 FileSystem 提供程序上）。您是否正在尝试创建快捷方式？对于快捷方式，请尝试以下操作：

```
$wshshell = New-Object -ComObject WScript.Shell
$lnk = $wshshell.CreateShortcut("RDS:\\RemoteApp\\RemoteAppPrograms\\calc2.lnk")
$lnk.TargetPath = "\"$env:WINDIR\\system32\\calc.exe\""
$lnk.Save() 
```

在这种情况下，问题在于自定义提供程序提供了 ApplicationPath 动态参数。OP 认为他们正在加载关联的模块，但显然该模块是为 64 位进程安装的，并且托管 C# exe 被编译为 x86（32 位）。一旦模块可用于 32 位 PowerShell，问题就解决了。

# xml - 在 XML/DTD 中指定多字枚举值

> ID：12494690
> 
> 赞同：2
> 
> 时间：2012-09-19T12:28:27.007
> 
> 标签：xml, dtd

在为 DTD 属性定义指定枚举值列表时，是否可以使用多字值？

```
 <!ATTLIST SystemName Case ("MIXED RESPECT"|"MIXED IGNORE"|"LOWER RESPECT"|"LOWER IGNORE"|"UPPER RESPECT"|"UPPER IGNORE") "MIXED IGNORE"> 
```

我尝试将值放在引号中（如图所示），而不是引号。我一直在阅读有关符号和 nmtoken 的信息，但我看到的每个地方似乎都在说“请参阅 blah-blah 规范”，但没有一个例子。示例价值大约一百万页的规范。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T23:45:41.783

不，枚举值不能包含空格；每个枚举值都必须是合法的 NMTOKEN，这意味着它必须是可以出现在 XML 名称中的字符序列。所以 MIXED、Mixed、RESPECT、MIXED-RESPECT 和 MIXED_RESPECT 是枚举中的合法值，但不是“MIXED RESPECT”。对不起。

其价值的原因是历史性的：在 SGML（从中派生出 XML）中，如果使用可能值的枚举列表声明属性名称，则该语言的一个可选特性允许省略属性名称。所以而不是

```
<SystemName Case="MIXED_RESPECT">... 
```

作者可以写

```
<SystemName MIXED_RESPECT>... 
```

而不是`<table border="noborder">`or`<table border="border">`作者可以只写`<table border>`or `<table noborder>`。为了确保这些值在上下文中是可解析的，它们被限制为合法的 NMTOKEN。

该功能的一个缺点是，为了确保这个魔术总是可行的，SGML 禁止任何两个属性的枚举值重叠，所以你不能有两个属性与`yes`和`no`作为合法值（因为那时一个解析器看到`<table yes>`可能不知道它是否意味着`border="yes"`或`compact="yes"`）。

XML 中删除了最小化功能（就像所有其他使编写 SGML 解析器如此冒险的最小化功能一样），但保留了使其成为可能的约束，以确保所有 XML DTD 都作为 SGML 合法DTD。

# c# - 掩码字段选定的值

> ID：12494694
> 
> 赞同：0
> 
> 时间：2012-09-19T12:28:46.413
> 
> 标签：c#, c++, unity3d

我有一个（int）maskfield，其中包含选择列表的选定值。
文档：[MaskField](http://docs.unity3d.com/Documentation/ScriptReference/EditorGUILayout.MaskField.html)
我有一个字符串数组，对应于 maskfield 的条目。

填充此掩码字段后，我想检索我们在数组中选择的选项。
我怎么能用这个 int 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:11:11.720

我找到了怎么做：

```
ArrayList maGroupNames; // This is my array of options (string)
int mCategory; // This is my maskfield's result

for (int i = 0; i < maGroupNames.Count; i++)
{
    int layer = 1 << i;
    if ((mCategory & layer) != 0)
    {
        //This group is selected
    }
} 
```

# mysql - SSH隧道：本地=>网关=> MySQL服务器

> ID：12494695
> 
> 赞同：17
> 
> 时间：2012-09-19T12:28:52.540
> 
> 标签：mysql, linux, ssh-tunnel

我需要访问我实验室远程服务器上的 MySQL 数据库。该服务器只有在我登录到远程网络上的网关服务器后才能访问：

```
local server => gateway server => MySQL server. 
```

我可以使用端口 24222 SSH 到网关。

我正在使用 PERL [DBI](http://dbi.perl.org/)模块。这是我在实验室时用来连接的：

```
my $host="1.2.3.4";
my $database="dbname";
my $user="user";
my $pw="pass";
my $table="table"; 
```

我想我必须建立一条通过网关服务器到数据库服务器的隧道。我该怎么做呢？如果 MySQL 数据库在网关上，我可以像这样打开一个隧道：

```
$ ssh -f user@gateway -L 3307:127.0.0.1:3306 -N 
```

如何修改它以通过网关上的开放端口 24222 通过隧道连接到 1.2.3.4 上的 MySQL 服务器？

* * *

更新：

使用@anttir 的回答我得到了它的工作如下。

1.  设置隧道：

    ```
    $ ssh -fN -p 24222 user1@11.12.13.14 -L 3307:1.2.3.4:3306 
    ```

2.  设置脚本变量：

    ```
    my $host="127.0.0.1";
    my $port = 3307; 
    ```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T12:37:37.093

使用命令：

```
$ ssh -f user@gateway -L 3307:1.2.3.4:3306 -N 
```

这表明到客户端 localhost 3307 的所有连接都将通过 SSH 隧道转发到网关，然后连接到主机 1.2.3.4 到端口 3306。

编辑：如果 SSH 在端口 24222 上，那么

```
$ ssh -f user@gateway -p 24222 -L 3307:1.2.3.4:3306 -N 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-26T07:42:42.483

如果您需要使用多个跃点来访问 MySQL 服务器，我首先建议创建 .ssh/config 文件并像这样使用 ProxyCommand：

```
 Host gateway
     HostName example.com
     User foo
     Port 22
     IdentityFile ~/.ssh/id_rsa.pub

  Host mysql_access_server
      HostName example-web.com
      Port 22
      User foo
      ProxyCommand ssh -A gateway nc %h %p 
```

然后像这样转发端口：

```
ssh -f mysql_access_server -L 3309:sqlmaster.example.com:3306 -N 
```

然后你可以像这样访问 MySQL 服务器：

```
mysql --user=root --host=127.0.0.1 --password=root --port=3309 some_db_name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T12:45:09.320

使用隧道：

```
ssh -f user@gateway -L 3307:1.2.3.4:3306 -N 
```

您将能够连接到本地主机端口 3307 上的数据库

# opengl-es - OpenGL ES：在立方体上映射纹理

> ID：12494702
> 
> 赞同：1
> 
> 时间：2012-09-19T12:29:04.713
> 
> 标签：opengl-es, textures, texture-mapping

我正在制作一个天空盒（在它的 6 个面上每个面都有不同纹理的立方体），这就是我所做的：

我定义我的顶点：

```
const float vertices[8u][3u] = {
    {-1.0f, -1.0f, -1.0f},
    {-1.0f, -1.0f, 1.0f},
    {-1.0f, 1.0f, -1.0f},
    {-1.0f, 1.0f, 1.0f},
    {1.0f, -1.0f, -1.0f},
    {1.0f, -1.0f, 1.0f},
    {1.0f, 1.0f, -1.0f},
    {1.0f, 1.0f, 1.0f}
}; 
```

我根据 vertices 数组定义了我的三角形（四边形在 ES 版本中不可用）：

```
const unsigned short elements[8u][3u] = {
    {4u, 6u, 2u},
    {4u, 0u, 2u},
    {6u, 3u, 2u},
    {6u, 3u, 7u},
    {7u, 1u, 5u},
    {7u, 1u, 3u},
    {5u, 0u, 4u},
    {5u, 0u, 1u}
}; 
```

据我了解，我现在需要定义我的纹理坐标，我尝试了很多不同的东西，现在看起来像这样：

```
float texCoords[4u][2u] = {
    {0.0f, 0.0f},
    {1.0f, 0.0f},
    {1.0f, 1.0f},
    {0.0f, 1.0f}
}; 
```

编辑：天空盒绝对不会显示自己，我只看到一个 2d 平面图像，其中我的纹理以一种奇怪的方式重复。绝对没有立方体

绘图部分正在工作，我认为我的问题是基于纹理坐标，对吗？我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:48:12.063

> 我对吗 ？我做错了什么？

凝视着我的水晶球……不，我不明白你的问题是什么，你也没有告诉我们。

无论如何，你的纹理坐标确实是错误的，你的数组只包含 4 个。但是你有一个 8 个顶点的立方体。然而，要让它成为一个天空盒，您需要一个 24 个顶点的立方体，因为纹理坐标是顶点的一部分，对于由 6 个纹理组成的天空盒，您不能在某些顶点上共享纹理坐标。

但是，我建议您改用立方体贴图纹理，这有很大的好处，您可以使用顶点坐标，因为您已经拥有它们，也可以用于纹理坐标。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-20T07:42:48.417

抱歉，我的问题不清楚。我真的不明白纹理坐标的概念是什么。现在我想我做到了：告诉你希望每张脸都被你的纹理填满多少。我的例子是完全填充。这是我的新（看起来像）工作代码，以防它可以帮助某人：

```
//The 24 vertex of the 3d cube (the skybox)
static const float vertices[24u][3u] = {
        {-1.0f, -1.0f, -1.0f}, //face 1 (front)
        {-1.0f, 1.0f, -1.0f},
        {1.0f, -1.0f, -1.0f},
        {1.0f, 1.0f, -1.0f},

        {1.0f, 1.0f, 1.0f}, //face 2 (back)
        {1.0f, -1.0f, 1.0f},
        {-1.0f, 1.0f, 1.0f},
        {-1.0f, -1.0f, 1.0f},

        {-1.0f, -1.0f, -1.0f}, //face 3 (left)
        {-1.0f, -1.0f, 1.0f},
        {-1.0f, 1.0f, -1.0f},
        {-1.0f, 1.0f, 1.0f}, 

        {1.0f, 1.0f, 1.0f}, //face 4 (right)
        {1.0f, 1.0f, -1.0f},
        {1.0f, -1.0f, 1.0f},
        {1.0f, -1.0f, -1.0f},

        {-1.0f, 1.0f, -1.0f}, // face 5 (up)
        {-1.0f, 1.0f, 1.0f},
        {1.0f, 1.0f, 1.0f},
        {1.0f, 1.0f, -1.0f},

        {1.0f, -1.0f, 1.0f}, //face 6 (bot)
        {1.0f, -1.0f, -1.0f},
        {-1.0f, -1.0f, -1.0f},
        {-1.0f, -1.0f, 1.0f},
};

//Coordinate of the textures
float texCoords[24u][2u] = {
        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},

        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},

        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},

        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},

        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},

        {0.0f, 0.0f},
        {0.0f, 1.0f},
        {1.0f, 1.0f},
        {1.0f, 0.0f},        
};

//Defining triangles based on the vertice array indexes
const unsigned short elements[12u][3u] = {
        {0, 2, 1},
        {2, 1, 3},

        {4, 5, 6},
        {5, 6, 7},

        {8, 9, 10},
        {9, 10, 11},

        {12, 13, 14},
        {13, 14, 15},

        {16, 17, 18},
        {17, 18, 19},

        {20, 21, 22},
        {21, 22, 23}
}; 
```

# windows-phone-7 - Windows phone 7 对推送的反应

> ID：12494705
> 
> 赞同：0
> 
> 时间：2012-09-19T12:29:12.513
> 
> 标签：windows-phone-7, push-notification, mpns

我想向 WP7 设备发送推送通知，并且希望手机立即做出反应。（当推送进来时应用程序没有运行->我写的一些代码将被执行）

我知道有 3 种通知类型，如果我正确理解它们，Raw 根本没有帮助，因为它只有在应用程序正在运行时才会起作用。Tile 和 Toast 只是向用户显示正在发生的事情，但我无法直接执行代码。毕竟，用户必须点击某个地方才能启动应用程序。

那么我是否正确理解这一点？（这意味着没有办法做我想做的事？上下文：mdm）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:54:06.277

是的。你理解正确。

只是为可能想知道的其他人详细说明一下：使用 toast 通知，用户可以通过点击 Toast 来启动应用程序。磁贴通知将使用新数据更新磁贴，用户将点击磁贴。与平铺通知不同，toast 通知即使通过锁定屏幕也会引起用户的注意，因为 Toast 出现在视觉组合的非常高的级别。

# php - 使用 php 提供 CSS 文件

> ID：12494708
> 
> 赞同：4
> 
> 时间：2012-09-19T12:29:20.330
> 
> 标签：php, css, dynamic-css

通过 php 提供 css 文件是个好主意吗？

实际上我有一个包含所有媒体查询的大型 CSS 文件，所以我想根据传递给 php 页面的参数只提供选定的部分例如在我原来的 php 页面中，我会这样做

```
<link rel="stylesheet" type="text/css" href="css.php?<?= "theam=".$theam ."&screen=".$screen ?>"/> 
```

在 css.php 文件中，我将检查条件以仅使用所需的 css 给出响应，这是正确的方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T12:31:32.923

是的，只要添加标题就可以了：

```
header('Content-type: text/css'); 
```

并确保检查`$_GET`正确的值

另一个建议是通过重写将 url 更改为更好的：

```
RewriteRule ^css-(.*)-(.*)\.css$  /css.php?theam=$1&screen=$2 
```

# android - 从 ICS 执行时显示姜饼主题的弹出窗口

> ID：12494711
> 
> 赞同：0
> 
> 时间：2012-09-19T12:29:23.513
> 
> 标签：android

从服务中，无论前台有什么应用程序，我都试图展示敬酒。为此，我使用了一个主题为的活动`Theme.Dialog`

以下是我在清单中声明的​​方式：

```
 <activity android:process="@string/process" 
              android:name="com.android.blesettings.findmeserver.LaunchPopup" 
              android:configChanges="orientation|screenSize"
              android:theme="@android:style/Theme.Dialog" >
    </activity> 
```

除主题外，一切正常。尽管我在 ICS 中运行应用程序，但弹出窗口的主题是 Gingerbread（不确定为什么会发生！）。我该如何解决这个问题，这样弹出的主题是 ICS 而不是 Gingerbread

任何帮助表示赞赏

![弹出显示姜饼主题](../Images/5fc41b768fd281a539779d09cc8f24c3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:16:44.960

您应该使用**Holo**主题来匹配**ICS**样式，如下所示：`Theme.Holo.Dialog`而不是`Theme.dialog`

但较旧的 API 不支持 Holo 主题。因此，为了让您的应用程序与旧版本兼容，您应该在文件夹`styles.xml`下定义文件`values-v14`(v14 = ICS)

**值-v14/styles.xml ：**

```
<style name="DialogTheme" parent="@android:style/Theme.Holo.Dialog">
    <item name="android:windowNoTitle">true</item>      
</style> 
```

**值/样式.xml：**

```
<style name="DialogTheme" parent="@android:style/Theme.Dialog">
    <item name="android:windowNoTitle">true</item>      
</style> 
```

然后，将您的活动定义更改为：

```
<activity android:process="@string/process" 
          android:name="com.android.blesettings.findmeserver.LaunchPopup" 
          android:configChanges="orientation|screenSize"
          android:theme="@style/DialogTheme" >
</activity> 
```

# php - Codeigniter - 在 RESTful 服务器中发送 XML 时不允许使用键字符

> ID：12494713
> 
> 赞同：2
> 
> 时间：2012-09-19T12:29:33.123
> 
> 标签：php, xml, codeigniter, rest

我正在使用 codeigniter 实现一个 REST 服务器，它包含一个函数，其中将发布一些 XML 以检索一些数据。

XML 通过请求正文传递并通过以下方式检索：

```
$xml = file_get_contents('php://input'); 
```

然后通过以下方式验证 XML：

```
try
{
    $doc = new DOMDocument();
    $doc->preserveWhiteSpace = FALSE;
    $doc->loadXML($xml);
    if ($doc->schemaValidate(APPPATH.'views/xml/xmlvalidate.xsd')) {
        //--this is valid
    }
} 
```

这适用于 Firefox 中的 RESTclient，但是当我在 chrome 中使用 Advanced REST Client 时，我得到“不允许的键字符”错误，根据 codeigniter，有问题的字符串是：

```
<?xml version 
```

任何人都知道为什么它只适用于 firefox RESTclient？我需要深入了解问题的原因，以防在测试正常后它可能会在使用中出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:44:06.747

CI 错误通常来自外语字符（即使在 POST 数据中）或右 php 括号后的换行符。

您可以在 CI 配置 (application/config/config.php) 中调整您允许的字符：

改变：`$config['permitted_uri_chars'] = 'a-z 0-9~%.:_=+-';`

进入：`$config['permitted_uri_chars'] = 'a-z 0-9~%.:_=+-<>';`

或使用空字符串进行测试：`$config['permitted_uri_chars'] = ''; // anything goes`

当使用 CI 的自然 url 到控制器映射而不过滤输入时，请注意安全后果。

# php - Yii 框架中的 homeUrl 和 baseUrl 有什么区别？

> ID：12494714
> 
> 赞同：23
> 
> 时间：2012-09-19T12:29:35.650
> 
> 标签：php, yii

Yii 框架中的**homeUrl**和**baseUrl**有什么区别？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-05-08T08:31:51.100

```
Yii::app()->getBaseUrl(true);   // => http://localhost/yii_projects
Yii::app()->getHomeUrl();       // => /yii_projects/index.php
Yii::app()->getBaseUrl(false);  // => /yii_projects 
```

这是指向图像等目录或文件本身的最佳实践，而不是硬编码可以更改名称的路径“

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-19T13:33:43.257

从文档：

**基本网址：**

> 返回应用程序的相对 URL。这与 scriptUrl 类似，只是它没有脚本文件名，并且去掉了结尾的斜线。

而**homeUrl**是

> 主页网址

尝试在您的应用程序的某处回显以自己检查每个：

```
echo Yii::app()->getBaseUrl(true);// true tells to get a relative url, false the other way
echo Yii::app()->getHomeUrl(); 
```

**各怎么用？**

**baseUrl**正如@bcmcfc 所说，可用作应用程序中所有链接的基础。

现在想象一下，如果您想链接到一个图像，`web_root/myapp/img/`例如您使用绝对路径执行此操作，例如`<img src="C:/wwww/myapp/img/somepic.jpg>`假设您完成了所有开发，现在您想要部署到某个`linux`服务器！

你可以看到你所有的链接都将被破坏:(但如果你这样做了：`<img src= <?php Yii::app()->baseUrl() ?> . "/img/somepic.jpg"`一切都应该正常工作:)

**homeUrl**只是您应用的登录页面。好吧，我以前没有使用过这个，但我想你可以在登录后根据用户角色设置不同的 homeurls ！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:34:39.453

一个是应用中链接的基本 URL。另一个是主页 URL。主页 URL 将基于基本 URL，并且将是特定的路由或页面，例如，在登录后被重定向到。

# sql - 基于字段的简单计算

> ID：12494717
> 
> 赞同：0
> 
> 时间：2012-09-19T12:29:50.413
> 
> 标签：sql

所以首先我需要创建一个由 curr_bal - PTP 组成的变量并将结果命名为 curr_bal_pcd

然后我需要对 Curr_bal-curr_bal_pcd/Curr_bal 求和。但是这些值需要除以 100，因为字段中没有小数

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:42:35.063

对于第一个，只需将公式写为列值，并用名称为列起别名

```
SELECT ...
   (curr_bal - PTP) curr_bal_pcd,
   ... 
```

对于第二个，

```
 curr_bal - curr_bal_pcd
=> curr_bal - (curr_bal - PTP)
=> PTP 
```

所以你真的很想求和

```
 PTP/Curr_bal 
```

不确定您的评论回复：`divided by 100`。如果您的意思是基列`curr_bal`并且`PTP`隐含以美分为单位，那么求和的比率无关紧要（将两者除以 100 实现 0 净效果），而您可以`/100.0`使用第一个表达式。

# c# - 如何禁用 VS datagridview 中的第一个自动选择？

> ID：12494719
> 
> 赞同：10
> 
> 时间：2012-09-19T12:29:53.877
> 
> 标签：c#, winforms, visual-studio, datagridview, datasource

我在 Visual Studio (C#) 中创建了一个使用 datagridview 的应用程序。现在，当我分配该 datagridview 的 DataSource 时，它​​会自动选择第一行，并执行我的代码进行选择。由于我经常重新分配该数据源，因此这是不可取的。有什么办法可以改变它，使它不会自动进行第一次选择，而只依赖于用户的选择？

谢谢！

回应 Darshan Joshi 的评论： 除了自动生成的代码，datagridview 上唯一改变的是将 AutoGenerateColumns 设置为 false，并设置 DataSource 属性。我在我的 selectionchanged 委托中放置了一个 MessageBox.Show，似乎每次设置数据源时它都会被调用三次。加载数据之前一次，之后两次。

我无法在加载时将 selected 设置为 false，因为数据源是在某些用户操作后设置的，而不是在初始化时设置的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-13T09:35:13.087

您应该在事件后调用：ClearSelection：DataBindingComplete

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T15:08:07.570

我有同样的问题，这是我的解决方案。

棘手的部分是找到清除选择的位置......我们只能在 DataGridView 设置选择之后清除选择。起初，选择只准备在 Form.Load 事件中清除，但 DataGridView.DataSource 的后续设置已准备好在 DataSource 分配后直接清除选择。

```
public class DataGridView_AutoSelectSuppressed : DataGridView
{
    private bool SuppressAutoSelection { get; set; }

    public DataGridView_AutoSelectSuppressed() : base()
    {
        SuppressAutoSelection = true;
    }

    public new /*shadowing*/ object DataSource
    {
        get
        {
            return base.DataSource;
        }
        set
        {
            SuppressAutoSelection = true;
            Form parent = this.FindForm();

            // Either the selection gets cleared on form load....
            parent.Load -= parent_Load;
            parent.Load += parent_Load;

            base.DataSource = value;

            // ...or it gets cleared straight after the DataSource is set
            ClearSelectionAndResetSuppression();
        }
    }

    protected override void OnSelectionChanged(EventArgs e)
    {
        if (SuppressAutoSelection)
            return;

        base.OnSelectionChanged(e);
    }

    private void ClearSelectionAndResetSuppression()
    {
        if (this.SelectedRows.Count > 0 || this.SelectedCells.Count > 0)
        {
            this.ClearSelection();
            SuppressAutoSelection = false;
        }
    }

    private void parent_Load(object sender, EventArgs e)
    {
        ClearSelectionAndResetSuppression();
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:49:36.443

您可以在 form_load 事件中取消选择它，例如

```
 private void Form1_Load(object sender, EventArgs e)
        {
                dataGridView1.Rows[0].Selected = false;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-25T07:27:38.010

要在不进行任何选择的情况下加载网格，您可以使用此代码段。

```
 GridView.CurrentCell = null; 
```

这将加载它，没有任何选择。在将数据源分配给网格后添加它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-01T19:52:40.650

确保您**没有**调用从表单构造函数加载数据的方法。如果您从 Form.load() 调用它

在加载 myDataGridView 之后也这样做

myDataGridView.Rows[0].Selected = false;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-05T16:51:45.563

这对我有用：

在绑定数据之前取消注册 SelectionChanged 事件，然后重新注册该事件。也许您应该在设计器中删除事件的注册，并在代码中手动注册事件。

`myDGV.SelectionChanged -= new System.EventHandler(this.myDGV_SelectionChanged);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-27T18:12:33.293

您的经验可能会有所不同，但在我的工作中，我经常在第一次加载网格时与之抗争，尽管发现许多解决方案是可以接受的（而且更多的只是荒谬的），但它们并不是在每种情况下都适用。我发现最有效的一个解决方案（对我来说，您的经验和场景可能会有所不同）是处理 DataGridView.VisibleChanged：

```
 public ThingWithGrid() {
        Grid.VisibleChanged += Grid_VisibleChanged;
    }

    private void Grid_VisibleChanged(object sender, EventArgs e)
    {
        UpdateSelectedRows(InitialSelection);
        Grid.VisibleChanged -= Grid_VisibleChanged;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-04T13:23:51.733

我认为最简单的解决方案是删除事件处理程序，分配新的数据源，清除选择并重新分配事件处理程序：

```
private void updateDataGridViewDataSource(%whatevertype% %whatever%) {
    dataGridView1.SelectionChanged -= new System.EventHandler(this.dataGridView1_SelectionChanged);
    dataGridView1.DataSource = %whatever%
    dataGridView1.ClearSelection();
    dataGridView1.SelectionChanged += new System.EventHandler(this.dataGridView1_SelectionChanged);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-13T21:27:04.057

就我而言，在我的`DataGridView_DataBindingComplete`处理程序中，一个更简单的解决方案就足够了：

```
DataGridView.ClearSelection();
if (DataGridView.Focused)
    DataGridView.DataBindingComplete -= DataGridView_DataBindingComplete; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2015-04-09T23:50:06.847

只需添加 SelectedItem="-1"，就可以了

```
<DataGrid Name="dataGrid" SelectedItem="-1" /> 
```

# java - 正则表达式（一个词的三种类型）？

> ID：12494724
> 
> 赞同：0
> 
> 时间：2012-09-19T12:30:21.827
> 
> 标签：java, regex, match

我是正则表达式的新手，需要一些帮助。

我有这些句子：

```
this is a-word
a word this is
aword is this
AWord is this
A-WORD is this 
```

我想知道单词`a word`or `a-word`or `aword`or or `AWord`or`A-WORD`是否在句子中。

我试过这个：

```
String sentence = "AWord is this";
String regex = "(a(\\s,'-','')word)\\i";
if (sentence.matches( regex)){
  .....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:33:11.360

尝试

```
a[^\w]?word 
```

这将匹配任何`a`后跟除字符以外的任何内容，然后是`word`.

要匹配更窄范围的字符串，请使用 [-\s]

放在`(?i)`正则表达式的开头以使其不区分大小写

```
(?i)a[^\w]?word 
```

（[参考](https://stackoverflow.com/questions/3436118/is-java-regex-case-insensitive)，在此处搜索以不区分大小写的方式搜索字符串的其他方式）

并记得逃避`\`to`\\`

然而，“最安全”的方法是使用这个

```
((a word)|(a-word)|(aword)|(AWord)|(A-WORD)) 
```

因为它将完全符合您的需要（如果您知道您要查找的确切域）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:34:25.013

试试这个：`(?:a[ -]?word|A-?W(?:ord|ORD))` 它将匹配您列出的所有单词

# entity-framework - 限制包含实体中返回的行

> ID：12494726
> 
> 赞同：0
> 
> 时间：2012-09-19T12:30:42.827
> 
> 标签：entity-framework, c#-4.0, entity-framework-5

我有简单的数据模型 Project,Member 和 ProjectMember，其中 Project 到 Member 具有多对多关系。因此 ProjectMember 表包含两个外键。

我写代码

```
var result= db.Projects.Include(p=>p.ProjectMembers).Where(p=>p.ProjectMembers.Any(pm=>pm.DeletedUser==1)); 
```

我看到`result.ProjectMembers`count 是 2 。在这里，我得到了 DeletedUser 不等于 1 的附加记录

我在这里做错了吗？

我必须使用什么表达式来获取唯一的一条记录（或许多带有 DeletedUser=1 的记录）`result.ProjectMembers`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T18:42:24.533

您要求`Project`s*至少有一个*（= any）`ProjectMember`with `DeletedUser == 1`。满足这个条件。的其他`ProjectMember`s`Project`可以具有除 1 以外的任何其他值`DeletedUser`。

如果你想要`Project`with *only* `ProjectMember` s with`DeletedUser == 1`你应该在以下位置开始查询`ProjectMember`：

```
ProjectMembers.Include("Project").Where(pm => pm.DeletedUser == 1) 
```

# sql - SQL Join Query - 首先选择特定条目，否则选择 NULL

> ID：12494727
> 
> 赞同：0
> 
> 时间：2012-09-19T12:30:42.680
> 
> 标签：sql, join

我敢肯定这个问题之前已经回答过，但我找不到！

### 表 - 预订 B

```
Customer    Product
Tim         Milk
Bob         Milk 
```

### 表 - 产品 P

```
Customer    Product     Description
Tim         Milk         This is Tim's Milk
NULL        Milk         This is Anybody's Milk 
```

我想加入表格并获得以下输出（为简单起见，显示示例中的所有列）：

```
B.Customer    B.Product   P.Customer     P.Product    P.Description
Tim           MILK        Tim            MILK         This is Tim's Milk
Bob           MILK        NULL           MILK         This is Anybody's Milk 
```

所以，查询应该首先查找是否有特定的客户相关产品，如果有，使用它，否则使用通用产品......

非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:45:35.170

```
 SELECT B.Customer, B.Product,
          ISNULL(C.Customer,P.Customer) Customer,
          CASE WHEN C.Customer IS NULL THEN P.Description
               ELSE C.Description END Description
     FROM B
LEFT JOIN C ON C.Product = B.Product and C.Customer = B.Customer
LEFT JOIN P ON P.Product = B.Product and P.Customer IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:40:00.417

我想我们需要加入两次：首先是客户和产品，然后是产品

```
SELECT
  B.Customer,
  B.Product,
  IFNULL(Pfound.Customer,PnotFound.Customer) AS P_Customer,
  IFNULL(Pfound.Product,PnotFound.Product) AS P_Product,
  IFNULL(Pfound.Description,PnotFound.Description) AS P_Description
FROM B
  LEFT JOIN P AS Pfound
    ON B.Customer=Pfound.Customer
    AND B.Product=Pfound.Product
  LEFT JOIN P AS PnotFound
    ON B.Product=PnotFound.Product
    AND PnotFound.Customer IS NULL 
```

# sql - 数千个数据库表 VS 一个巨大的表

> ID：12494729
> 
> 赞同：3
> 
> 时间：2012-09-19T12:30:47.817
> 
> 标签：sql, database-design, multiple-tables

我正在尝试开发一个跟踪每日库存数据的应用程序。（每天为每只股票创建一个新记录）。将跟踪大约 5000-10000 个库存。然后我需要每天，每月或其他时间分析一些股票数据，并保留它。

我的问题是：为*每只股票*创建一个活动表以保持每日活动（每天一个新行）更好还是拥有一个每天为所有股票插入 10,000 条记录的大表更聪明？请记住，我需要每天对每只股票进行批量计算（计算移动平均线等）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:33:31.950

一张桌子。您可能希望按股票 ID 对其进行分区。

自动创建表几乎总是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:46:11.427

通常，与联接和多个查询相比，您可以更快地查询单个表。

# drupal - 开发多功能商业网站

> ID：12494732
> 
> 赞同：0
> 
> 时间：2012-09-19T12:30:58.083
> 
> 标签：drupal, joomla, content-management-system

我有兴趣开发一个与交易卡收集相关的网站。我可能对以下功能感兴趣：

卡片显示（显示所有存在的卡片）

用户管理（会员账户）

用户库存（从卡片显示中选择的会员卡片）

电子商务（能够销售单个或成套的卡片和配件）

论坛

博客

是否有一个包解决方案（Joomla、Drupal 等）或者我需要使用 HTML5/JavaScript 和 CSS 的组合开发这个解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:21:11.160

认为 Joomla 2.5 可能是实现这一目标的方式。它已经具有用户管理功能，因此涵盖了这一点。

对于论坛，您可以使用完全集成的[Kunena 。](http://kunena.org)

至于[博客](http://extensions.joomla.org/extensions/authoring-a-content/blog)，有很多可供选择的，商业的和非商业的。

对于电子商务方面，我个人建议使用[VirtueMart](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/129)或[JoomShopping](http://extensions.joomla.org/extensions/e-commerce/shopping-cart/5378)

我认为[Community Builder](http://extensions.joomla.org/extensions/clients-a-communities/communities/210)对于用户管理会好得多，因为您可以为配置文件添加自定义字段，并且它与许多扩展程序集成，例如 Kunena 论坛。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:36:50.653

我认为最简单的方法是：

**博客**-> WordPress

**论坛**-> Buddypress（Wordpress 插件）

**电子商务**-> [Zenshop](http://demo.fabthemes.com/zenshop/)

或者对于专业的解决方案，从头开始开发它。

# nosql - 更新数据时，Azure 表或 NoSQL 通常不是那么好

> ID：12494739
> 
> 赞同：0
> 
> 时间：2012-09-19T12:31:26.497
> 
> 标签：nosql, azure-table-storage

我只查看了 Azure 表，但它也可能适用于其他 NoSQL 数据库。如果我有一个由以下属性组成的实体

> 名字 - 姓氏 - 家乡 - 国家

在 Azure 表中没有关系的概念，因此如果我有数千个数据，并且我想将所有包含“加拿大”的实体更改为其他国家/地区。然后在这种情况下，它有可能必须通过数千个数据才能找到带有“加拿大”的实体并将其更改为其他内容。

我想知道，只有当您拥有静态数据且在编写后未更改数据时，NoSQL 的好处是什么？或者这个问题可以通过 NoSQL 解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:46:06.793

在 NoSQL 数据存储的情况下，其优势不同于 SQL 数据库。在像 Azure 表这样的 NoSQL 数据库中，可扩展性或可用性之类的东西可能会更好，但也需要权衡取舍。例如，您通常无法有效地查询记录的任何部分，只能查询键。

在为 Azure Table 设计架构时，您必须考虑数据层的用例并让其决定架构。在这个例子中，如果我认为我必须更新给定国家/地区的所有记录，我会将该部分作为分区或行键。这样，您获取给定国家/地区所有数据的查询速度很快，并且可以快速更新。

# c++ - 使用 boost fibonacci_heap

> ID：12494744
> 
> 赞同：1
> 
> 时间：2012-09-19T12:31:33.450
> 
> 标签：c++, boost

使用`fibonacci_heap`会导致编译错误：

```
struct Less: public binary_function<Node*, Node*, bool>
{
    bool operator()(const Node*& __x,  Node*& __y) const
        { return __x->time < __y->time; }

};

boost::fibonacci_heap<Node*, Less >*    m_heap; 
```

然后

```
Less* ls = new Less;
m_heap = new boost::fibonacci_heap<Node*, Less >(1000, (*ls)); 
```

任何尝试运行都会`m_heap->push(n)`导致

```
no match for call to ‘(TimeSync::Less) (TimeSync::Node* const&, TimeSync::Node*&)’
UnmanagedUtils/Trading/Simulation/TimeSync.h:50: note: candidates are: bool TimeSync::Less::operator()(const TimeSync::Node*&, TimeSync::Node*&) const
/usr/local/include/boost-1_35/boost/property_map.hpp: In function ‘Reference boost::get(const boost::put_get_helper<Reference, PropertyMap>&, const K&) [with PropertyMap = boost::identity_property_map, Reference = unsigned int, K = TimeSync::Node*]’: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:50:03.437

将签名更改为`operator()(Node * const &, Node * const &) const`.

# javascript - Javascript 最佳实践：同步浏览器窗口

> ID：12494751
> 
> 赞同：2
> 
> 时间：2012-09-19T12:31:54.840
> 
> 标签：javascript, ajax, synchronization

我有一个 html5/javascript 应用程序，多个用户可以在其中查看任何给定时间的同一组数据。为了一个真实世界的例子，假设它是一个日历类型的页面。

所以 user1 正在查看是否打开浏览器并查看日历页面，而 user2 也在日历页面上。User2 对日历进行了更改，我希望（尽快）在 user1 的屏幕上识别和刷新这些更改。做这个的最好方式是什么？

我正在考虑为活动用户创建一个 mysql 表，该表存储他们当前所在的页面和上次更新的时间戳，然后使用 ajax 调用每隔几秒 ping 服务器并检查更新的时间戳，如果它比他们有什么客户端，新数据被发送并且页面“重新加载”。我将 reloaded 放在引号中，因为不会刷新实际的浏览器窗口，但是将通过 javascript 调用一个函数来重新加载页面。堆栈溢出执行其更新检查的方式排序，但不是告诉用户页面已更改并提供重新加载按钮，它应该自动发生。如果 user1 正在处理日历，那么 user2 的屏幕不断刷新似乎很烦人......

这是一个可怕的想法吗？每隔几秒钟使用 ajax 请求 ping 服务器会导致严重的速度下降吗？有一个更好的方法吗？我希望任一用户端的视图都是实时的，因为 user1 不能更新 user2 已经更改的日历页面上的元素很重要。

更新：基于一些网络套接字研究，它似乎不是一个合适的解决方案。首先它与旧浏览器不兼容，并且我支持 ie8+，其次我不需要网站上所有用户的实时更新。该站点是一个基于帐户的应用程序，一个帐户可以有多个用户。数据只需要在这些用户之间同步。任何其他建议都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:41:07.480

为此，您需要实时应用程序。你应该看看socketio。每次用户登录时，您都让他监听服务器上的更改。然后，当服务器上发生变化时，会通知每个正在收听的用户。您可以在官方网站上找到示例：http: [//socket.io/](http://socket.io/)

# javascript - jQuery：如何仅复制容器？

> ID：12494754
> 
> 赞同：1
> 
> 时间：2012-09-19T12:32:13.180
> 
> 标签：javascript, jquery, dom

我有 HTML 结构，例如

```
<div id="mydiv" class="some" onclick="alert('Hello!')" style="background:red" >
   <div>aa</div>
   <div style="background:green" >bb</div> 
</div> 
```

[http://jsfiddle.net/Pj5sn/](http://jsfiddle.net/Pj5sn/)

而且我要

```
<div id="mydiv" class="some" onclick="alert('Hello!')" style="background:red" >
</div> 
```

因此。`.clone()`创建一个深拷贝，但我需要浅拷贝。

**编辑** 到目前为止包含的所有答案都做了一个深拷贝和清晰的内容。我打算将它用于几十个容器，每个容器都包含几十个对象。我认为有必要有一些更有效的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T12:33:41.073

先用[`.clone()`](http://api.jquery.com/clone/)，再用[`.empty()`](http://api.jquery.com/empty/)结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:33:36.333

最简单的是`$(this).clone().html('')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:37:17.610

您必须从要克隆的 div 中删除内容。

```
var s = $('#mydiv').clone().html('');
$('#container').append(s); 
```

​简单，但有效！

[http://jsfiddle.net/shannonhochkins/Pj5sn/1/](http://jsfiddle.net/shannonhochkins/Pj5sn/1/)

给你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T13:46:46.080

我使用的解决方案有点不同。首先，我创建一些结构并将`div`内容移动到里面：

```
var $storage=$('<div/>').append($("#mydiv").children()); 
```

现在我可以克隆剩余的“shell”并移动到内容的适当部分：

```
$("#mydiv").clone(true,true).attr("id","d1")
     .appendTo($(document.body))
      .append($(":first-child",$storage)); 
```

[http://jsfiddle.net/KyTZ6/](http://jsfiddle.net/KyTZ6/)

也许它看起来太复杂了，但我的任务是将一个 HTML 表（~30 x 30）分成六个部分，我在建议的克隆和清除​​方面遇到了性能问题。

# git - 我将如何配置 TeamCity 以支持源代码集成的 GitHub 拉取请求模型？

> ID：12494759
> 
> 赞同：12
> 
> 时间：2012-09-19T12:32:34.477
> 
> 标签：git, teamcity, feature-branch, teamcity-7.1

我们使用 TeamCity 和 GitHub Enterprise。我们使用 git 的开源式工作流程：`mainline`每个组件都有一个存储库，当人们想要进行更改时，他们

*   分叉`mainline`到他们自己的账户（所以可能会有很多分叉）
*   在他们的叉子中创建一个分支
*   实施变革
*   及时`mainline/master`了解在此期间发生的变化
*   提交拉取请求`fork/feature-branch`->`mainline/master`

我们对这个工作流程非常满意；它在主线看到任何更改之前强制进行代码审查（嗯，至少是一个手动步骤，希望*涉及*实际阅读代码并运行其测试），这在历史上一直是一个问题。如果作者是查看拉取请求的人，我们想使用 GH Status API（[博客文章](https://github.com/blog/1227-commit-status-api)、[API 文档](http://developer.github.com/v3/repos/statuses/)）将合并按钮变为非绿色，但那是以后的事了。

我们设置了 TeamCity 7.1 来监视主线存储库并在看到更改时进行构建。但是，按照目前的设置方式，CI 仅在看到更改为`mainline/master`.

**我们应该如何在 TeamCity 中配置我们的 VCS 根，以便我们可以拥有相同的工作流程，但 CI 将触发基于主线 repo 分支中的分支的构建？** 最好不需要我们单独注册每个分叉？

我已经阅读了 TeamCity 7.1 的功能分支文档（[博客文章](http://blogs.jetbrains.com/teamcity/2012/08/07/teamcity-7-1-control-the-flow/)、[发行说明](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.1#What%27sNewinTeamCity7.1-FeaturebranchesforGit%26Mercurial)、[文档](http://confluence.jetbrains.net/display/TCD7/Git+%28JetBrains%29)），但我不知道如何将其应用于我们的任意数量的分叉模型，而不是每个人的提交 -到功能分支中的主线。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-06T10:58:49.480

您可以通过 teamcity 监控拉取请求：http: [//blog.jetbrains.com/teamcity/2013/02/automatically-building-pull-requests-from-github-with-teamcity/](http://blog.jetbrains.com/teamcity/2013/02/automatically-building-pull-requests-from-github-with-teamcity/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-02T17:05:06.280

据我所知，TeamCity 不会以任何自动化方式“寻找”您的 github 分叉。

我将通过为每个开发人员的分叉存储库和主线存储库创建一个 vcs 根来解决这个问题。然后将这些根中的每一个附加到构建中。 [文档](http://confluence.jetbrains.net/display/TCD7/What%27s+New+in+TeamCity+7.1#What%27sNewinTeamCity7.1-MultipleVCSroots)。

不幸的是，这是一个手动过程。每个开发人员，每个组件 repo 一次。如果我真的想自动执行此操作，我会结合使用[Github Hooks](http://developer.github.com/v3/repos/hooks/#create-a-hook)并[通过 TeamCity REST Api 添加 vcs 根](http://confluence.jetbrains.net/display/TW/REST+API+Plugin#RESTAPIPlugin-VCSRoots)。

# python - Python import AS 因绝对导入而失败

> ID：12494761
> 
> 赞同：2
> 
> 时间：2012-09-19T12:32:44.630
> 
> 标签：python, import, namespaces, python-2.7

在我长期使用 python 的经验中，我遇到了一个非常奇怪的问题。

提前我想说我想知道**为什么会发生这种情况**，而不是如何更改我的代码或如何修复它，因为我也可以做到。

我正在使用 python2.7.3 并使用该`__future__ absolute_import`功能。我有一个有点复杂的模块结构。我有一个模块`q.x.y.z`。如果在顶部我这样做`import q.x.a.b`它可以工作，但如果我这样做`import q.x.a.b as _b`它失败说 qx 没有“a”（在这个模块之前已经导入了几次）任何人都有足够的经验来知道发生了什么？我很确定这不是循环导入问题，因为我只需要删除“ `as _b`”，它就可以神奇地工作。而且也不是命名问题，因为我对此非常小心。

文件结构如下：

```
q/
+ __init__.py
+ main.py #execution entry point
--- x/
    + __init__
    + a/
      + __init__
      + b.py 
   + y/
      + __init__
      + z.py # import q.x.a.b 
```

它从 q pkg> python q\main.py 的父文件夹运行，它包含以下内容：

```
from __future__ import absolute_import
import sys, os

if __name__=='__main__':
    sys.path[0] = os.getcwd()
    import q
    q.run() 
```

与循环导入有点相关，但主要问题是**为什么当我使用“as”时会发生这种情况？**

回溯是这样的：

```
q/main.py: q.run()
q/x/__init__.py : from q.x import a, y, k
q/x/a/__init__.py : from q.x.a import d, e, f
q/x/a/f.py : from q.x.y import z as _z
q/x/y/__init__.py : from q.x.y import g, h, z
q/x/y/h.py : import q.x.a.d as _d 
```

这有关系吗？ [https://stackoverflow.com/a/1835089/260242](https://stackoverflow.com/a/1835089/260242) 或此 [https://stackoverflow.com/a/11309252/260242](https://stackoverflow.com/a/11309252/260242)

代码示例，实际上失败了...转到 test/q/x/y/h.py 并将 import ... as _d 更改为 import ... 你会看到 [http://puu.sh /16C3j](http://puu.sh/16C3j)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:47:34.607

抱歉，无法重现，至少使用我周围的 Python 2.6.5。

请花时间隔离一个在干净的树中表现出问题的最小案例。我将从您当前树的副本开始，修剪任何不相关的目录并删除函数定义等，所有这些都在不断检查问题是否仍然存在。该过程要么收敛到一个显示错误的最小案例，要么（更有可能）显示一个看似不相关的事情，它确实导致了这种奇怪的行为。

这是我来自 Linux 控制台的工作日志；您可以在一个空目录中重播它。

```
mkdir -p q/{x,y}
echo > q/__init__.py
echo > q/x/__init__.py
echo > q/y/__init__.py
mkdir -p q/x/a
echo > q/x/a/__init__.py
echo "place='This is q.x.a.b'" > q/x/a/b.py
echo -e "import q.x.a.b as _b\n\nprint _b.place" > q/y/z.py
python -c 'from __future__ import absolute_import; import q.y.z' 
```

预计它会打印`This is q.x.a.b`。

# c# - 在 wp7 中的特定时间播放声音

> ID：12494762
> 
> 赞同：0
> 
> 时间：2012-09-19T12:32:50.683
> 
> 标签：c#, windows-phone-7, xaml, push-notification

我想在一天中的某个特定时间播放声音，例如每天下午 5 点。有什么办法可以做这样的事情，或者我们可以修改警报类来做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:33:03.930

据我所知 - 你不能这样做。检查 ScheduledActionService 及其提供的内容。还要检查 BackgroundTask 和 BackgroundAgents。您只能设置提醒或 toast 通知，点击何时可以将您导航到您的应用程序，然后您可以播放声音。在预定的 BackgroundAgents 中，并非所有 API 都可用。

[http://www.abhishekshukla.com/silverlight/windows-phone-7-mango-background/](http://www.abhishekshukla.com/silverlight/windows-phone-7-mango-background/)你需要的都应该在这里

# python-2.7 - Numpy的删除不起作用

> ID：12494768
> 
> 赞同：0
> 
> 时间：2012-09-19T12:33:05.550
> 
> 标签：python-2.7, numpy

我正在使用 pycharm 作为我的 IDE 运行 python 2.7。

关于我正在尝试做的事情的背景信息： [https ://docs.google.com/document/d/1WhKtZVyqMQnqw6wPDn4UfzCy7yPOT9in_k3PVsW896o/edit](https://docs.google.com/document/d/1WhKtZVyqMQnqw6wPDn4UfzCy7yPOT9in_k3PVsW896o/edit)

-

我正在尝试从二维数组中删除行/行。从谷歌搜索看来，删除是我应该使用的命令。但是，当我使用它时没有任何反应。即使我使用与官方示例中相同的代码，也没有任何反应。很奇怪。Numpy 正在工作，因为我在它的帮助下使用了二维数组。我无法弄清楚问题所在。

我的代码在这里： http: [//pastebin.com/Frz7UD6X](http://pastebin.com/Frz7UD6X) 这个想法是，当我检测到无效模式（没有相邻元音的辅音）时，应该从数组中删除该行。因此，删除命令应该在三个 if 语句之后。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:24:13.857

例如，如果您想从形状 (2, 3) 的数组中删除第三列：

```
import numpy as np
a = np.ones((2, 3))
b = np.delete(a, 2, axis=1) 
```

请注意，删除不能就地工作，因此`a`未修改。如果您想继续工作，`a`请执行以下操作：

```
a = np.delete(a, 2, axis=1) 
```

这会将新数组分配给相同的变量。

# wpf - 无法退出 WPF 应用程序

> ID：12494776
> 
> 赞同：0
> 
> 时间：2012-09-19T12:33:15.830
> 
> 标签：wpf, exit

我知道这个问题已经得到解答，但尽管我努力了，我还是无法以编程方式关闭我的应用程序。我试过这个，它不起作用：

```
private void CloseAppCommand_Executed(object sender, ExecutedRoutedEventArgs e)
    {
        System.Windows.Forms.Application.Exit();
    } 
```

这（但 Visual Studio 2010 无法识别）：

```
Application.Current.Shutdown(); 
```

有人知道为什么这些解决方案不起作用吗？我认为这可能是因为 WPF vs WinFOrms，但我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T12:45:39.630

`Application.Current.Shutdown();`是您退出 WPF 应用程序的方式。你可能搞砸了你的项目引用。有关WPF 应用程序所需的参考资料，请参见[此处。](http://msdn.microsoft.com/en-us/library/aa970678%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:25:43.593

找到了 ！我没有使用正确的课程：

```
System.Windows.Application.Current.Shutdown(); 
```

# webgl - 如何在 Three.js 中使用和混合多个纹理与自定义值？

> ID：12494781
> 
> 赞同：7
> 
> 时间：2012-09-19T12:33:31.407
> 
> 标签：webgl, three.js

在 Three.js 中，是否可以创建包含许多纹理的材质（着色器？），每个纹理都有自己的细节，将它们混合在一起并分配给几何体？我想使用多种表面处理技术来模拟纸张表面，例如箔压花或局部 UV 上光。

我想要实现的是具有以下特性的材料：

1.  '基层：
    *   纸张颜色（例如白色、灰白色、米色等）
    *   镜面反射
    *   反射率
    *   凹凸（光滑或有纹理的纸）
2.  “图像”层（可选）：
    *   图像纹理（印刷在纸上的艺术品，与“基础”颜色混合）
3.  “箔”层（可选）：
    *   用于控制图层透明度的黑白图像纹理
    *   颜色（重叠的“基础”层）
    *   镜面反射
    *   反射率
4.  “浮雕/凹凸”层（可选）：
    *   凹凸纹理（提高或降低“基础”凹凸）
5.  “清漆”层（可选）：
    *   用于控制图层透明度的黑白图像纹理
    *   镜面反射
    *   反射率
    *   凹凸（略微提升“基础”凹凸）

所有单独图层的原因是我想单独控制它们（替换不同的纹理并在运行时更改值）。除了“图像”层，我不确定应该为其他层使用什么混合值来实现逼真的模拟。

为了说明应用于纸张的整理技术，请看以下照片（由 PrintHouse Corporation 提供）：

![盲压花（图案）和金箔压花（标志、标题）](../Images/09089f7bcc8ee1dd0979389263a748b3.png) *盲压花（图案）和金箔压花（标志、标题）*

![银箔压纹（徽标）和局部 UV 清漆（照片）](../Images/776792e6e6efb6975b7ebef1be66408c.png) *银箔压纹（徽标）和局部 UV 清漆（照片）*

![现货UV清漆（线）](../Images/fc7879d1191d8a87c24ef3ece3ff047b.png) *现货UV清漆（线）*

有可能吗？我找不到任何可以使用如此复杂材料的 Three.js 示例。如果您能指出一个或解释如何以编程方式处理此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-12-16T21:48:46.673

就像评论说的那样，您可以使用自定义着色器来做到这一点。您只需要考虑如何在着色器中自己组合不同的图层。所以只是给你一个例子，你可以像这样在你的 js 中设置你的着色器：

```
blurTexture360 = new THREE.TextureLoader().load(imgURLBlur);
unblurTexture360 = new THREE.TextureLoader().load(imgURLUnblur);
highlight1Texture360 = new THREE.TextureLoader().load(imgURLHighlight1);
highlight2Texture360 = new THREE.TextureLoader().load(imgURLHighlight2);

blurTexture360.magFilter = THREE.LinearFilter;
blurTexture360.minFilter = THREE.LinearFilter;

const shader = THREE.ShaderLib.equirect;
uniforms = {
  u_resolution: { type: "v2", value: resolution },
  u_blur: { type: "t", value: blurTexture360 },
  u_unblur: { type: "t", value: unblurTexture360 },
  u_highlight1: { type: "t", value: highlight1Texture360 },
  u_highlight2: { type: "t", value: highlight2Texture360 },
  u_mix: { type: "f", value: 0.0 },
  u_highlightAmt: { type: "f", value: 0.0 },
  u_highlight1Bool: { type: "f", value: 1.0 },
  u_highlight2Bool: { type: "f", value: 1.0 }
};
let material360 = new THREE.ShaderMaterial({
  uniforms: uniforms,
  vertexShader: shader.vertexShader,
  fragmentShader: fragmentShader(),
  depthWrite: false,
  side: THREE.BackSide
}); 
```

然后把制服放在别处

```
uniforms.u_highlightAmt.value -= 0.05; 
```

这是当 u_highlight1Bool 或 u_highlight2Bool 设置为 1 或 0 时设置不同纹理的示例。希望这为您提供了一个使用逻辑来影响着色器代码的示例。

```
function fragmentShader() {
    return `        
uniform sampler2D u_blur;
uniform sampler2D u_unblur;
uniform sampler2D u_highlight1;
uniform sampler2D u_highlight2;

uniform vec2 u_resolution;
uniform float u_mix;
uniform float u_highlight1Bool;
uniform float u_highlight2Bool;
uniform float u_highlightAmt;

varying vec3 vWorldDirection;
#define RECIPROCAL_PI2 0.15915494309189535
#define RECIPROCAL_PI 0.3183098861837907

vec2 equirectUv( in vec3 dir ) {
    // dir is assumed to be unit length
    float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
    float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
    return vec2( u, v );
}

void main() {
    vec3 direction = normalize( vWorldDirection );
    vec2 sampleUV = equirectUv( direction );
  vec4 blur =  texture2D(u_blur, sampleUV);
  vec4 unblur =  texture2D(u_unblur,  sampleUV);
  vec4 highlight1 = texture2D(u_highlight1, sampleUV);
  vec4 highlight2 = texture2D(u_highlight2, sampleUV);

    blur = mapTexelToLinear( blur );
  unblur = mapTexelToLinear( unblur );
  highlight1 = mapTexelToLinear(highlight1);
  highlight2 = mapTexelToLinear(highlight2);
  vec4 highlight = (highlight1*u_highlight1Bool) + (highlight2 * u_highlight2Bool);

  vec4 ret = mix(blur, unblur, u_mix);
  float thresh = ceil(highlight.r - 0.09) * u_highlightAmt;
  ret = mix(ret,highlight,thresh);

  gl_FragColor = ret;
}
`; 
```

我从我的代码中得到了这个：[https](https://glitch.com/edit/#!/hostileterrain94?path=script%2FthreeSixtyEnv.js%3A202%3A0) ://glitch.com/edit/#!/hostileterrain94?path=script%2FthreeSixtyEnv.js%3A202%3A0它没有很好的记录，但是如果你想看看它是如何存在的更广泛的项目随时查看。我确实声称这非常有效，但我知道它可以完成工作。

# php - 使用 HTML 文件，是否可以在按下提交时将用户保持在同一页面上？jQuery 和/或 PHP？

> ID：12494785
> 
> 赞同：0
> 
> 时间：2012-09-19T12:33:43.747
> 
> 标签：php, jquery, html

在以下页面上：[http](http://christianselig.com/contact.html) ://christianselig.com/contact.html我想要它，所以当他们单击发送消息时，它将使用 PHP 发送消息并将它们保持在同一页面上，也许将提交按钮更改为成功消息。

这对 PHP 和 jQuery 可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:35:25.227

是的。使用[`Ajax`](http://api.jquery.com/jQuery.ajax/)和[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)提交表单，然后使用[DOM 操作功能](http://docs.jquery.com/DOM/Manipulation)来更新您的页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:36:19.517

看看使用ajax提交页面

```
$.ajax({
        cache: true,
        type: 'post',
        data: { name: $('#Name').val(), email: $('#email').val(), message: $('#Message').val()  },
        url: "/controller/sendMessage",
        success: function (msg) {
            //do something

        }
    }); 
```

确保您的控制器没有响应响应，只需将 Json 包装的成功消息传回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:40:05.923

是的，这是可能的，这是我经验中的两种方式之一。

1.  你当然可以使用 AJAX，这对于用户来说会更流畅，但当然会更难一些。
2.  如果您不介意用户重新加载页面，那么您可以添加一个`action="./contact.html?submit=true`，它只会重新加载页面，然后您让表单检查`submit`变量是否设置在`$_GET`全局变量中。

希望这可以帮助。:) （对不起，如果这属于评论，由于某种原因，我实际上无法在主页的评论中发布。）

# vb.net - 可能与接口的后期绑定技术

> ID：12494786
> 
> 赞同：0
> 
> 时间：2012-09-19T12:33:53.500
> 
> 标签：vb.net, late-binding

请考虑以下场景：

```
Class Class1
 Function Func() as String
 End Function
End Class

Class Class2
 Function Func() as String
 End Function

 Function Func2() as String 
 End Function
End Class 

Class Class3

Function GetClassObject as Object
 If (certain condition meets)
   return new Class1();
 Else
  return new Class2();
 End If
End Function

Main()
Object obj1 = GetClassObject();
obj1.Func(); // Error: obj1.Func() is not defined:
End Main

End Class 
```

问题：如果由于某种原因我无法从公共接口类继承 Class1 和 Class2，如何访问 obj1.Func()？

谢谢

更新：我用来解决问题但失败的一种方法如下：

```
 Interface ICommon
     Function Func() as string
    End Interface

    Class Class3
    ...
        Main()

        Dim obj1 as ICommon = TryCast(GetClassObject(), ICommon); //Error: obj1 is "Nothing"
        obj1.Func()

or simply: 

TryCast(GetClassObject(), ICommon).Func() //Error: obj1 is Nothing

        End Main
    ...
    End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:41:49.583

你可以试试这个

```
Object obj1 = GetClassObject();

If TypeOf obj1 Is Class1 Then 
   DirectCast(obj1 , Class1).Func()
ElseIf TypeOf obj1 Is Class2 Then 
   DirectCast(obj1 , Class2).Func()
End If 
```

或者你也可以试试

```
Dim c1 As Class1 = TryCast(obj1, Class1) 
IF Not c1 Is Nothing Then
    c1.Func()
Else
   Dim c2 As Class2 = TryCast(obj1, Class2) 
   IF Not c2 Is Nothing Then
      c2.Func()
   End If
End If 
```

或者您可以尝试使用反射。

```
Dim result as String = obj1.GetType().GetMethod("Func").Invoke(obj1, null) 
```

# sql-server - 执行创建表的存储过程时出现错误消息

> ID：12494789
> 
> 赞同：0
> 
> 时间：2012-09-19T12:34:18.957
> 
> 标签：sql-server

```
alter procedure SP_employeedetails
(
 @tablename varchar(50),
 @empname varchar(50),
 @age int,
 @address varchar (50)
)
as
begin
declare @xxx varchar(50)
set  @xxx= 'create table '+@tablename+'
( '+@empname+'varchar(50),
   '+@age+' int ,
    '+@address+' varchar(50)
)'
print @xxx
exec (@xxx)
end 
```

当我使用语句执行此操作时

```
exec SP_employeedetails 'Employeedetails', 'jhon', 25, 'cochin' 
```

显示以下错误消息

> 消息 245，级别 16，状态 1，过程 SP_employeedetails，第 11 行将
> varchar 值“create table Employeedetails (jhonvarchar(50),”转换为数据类型 int 时转换失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:42:22.840

几个潜在的问题：

1.  列名和数据类型之间的空格
2.  尝试将 int 添加到字符串
3.  您的字符串几乎可以肯定超过 50 个字符
4.  年龄列名称是一个数字 - 这需要正确转义。为了安全，我逃离了一切。您应该注意`@empname`类似`Jimmy O'Shea`或类似的地址`253 Main Street`- 这些列名在您当前的脚本中无效。
5.  50 个字符显然不足以满足您的字符串。让我们尝试一下：

```
declare @xxx varchar(50)

set  @xxx= 'create table employeedetails
( john varchar(50),
   [25] int ,
    cochin varchar(50)
)'

print @xxx; 
```

结果：

```
create table employeedetails
( john varchar(50), 
```

这是我的做法：

```
ALTER PROCEDURE dbo.SP_employeedetails
(
 @tablename varchar(50),
 @empname varchar(50),
 @age int,
 @address varchar (50)
)
as
begin
  SET NOCOUNT ON;

  DECLARE @sql NVARCHAR(2000); -- 50 is unlikely enough

  SET @sql = N'create table dbo.' + @tablename + '
  ( ' + QUOTENAME(@empname) + ' varchar(50), -- need space here
   '+ QUOTENAME(CONVERT(VARCHAR(12), @age) +' int , -- need to convert this and delimit
    '+ QUOTENAME(@address) + ' varchar(50)
  );';

  PRINT @sql;
  EXEC sp_executesql @sql;
END
GO 
```

但是，正如我在评论中提到的，您是否真的为添加到系统中的每个员工创建了一个新*表？*看起来这应该是在表中插入一行，而不是创建一个全新的表。

最后，[您不应该使用`SP_`存储过程的前缀](http://msdn.microsoft.com/en-us/library/dd172115%28v=vs.100%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T12:39:31.340

您在类型之前缺少一个空格：

```
'+@empname+'varchar(50), 
```

并且您必须将 @age 参数强制转换为`varchar`类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:36:59.310

[[我的回答解释了您遇到的错误，但这是您的问题中最少的 - [Aaron 的回答](https://stackoverflow.com/a/12494937/95)包含对它们的详细分析]]

您需要显式转换`@age`为`varchar`.

[数据类型优先级](http://msdn.microsoft.com/en-us/library/ms190309.aspx)：

> 当运算符组合不同数据类型的两个表达式时，数据类型优先级规则指定将具有较低优先级的数据类型转换为具有较高优先级的数据类型。如果转换不是受支持的隐式转换，则返回错误。当两个操作数表达式具有相同的数据类型时，运算结果具有该数据类型。

数据类型`int`的优先级高于`varchar`，因此 SQL Server 尝试转换`@xxx`为`int`.

# android - 滑动菜单就像 android 上的 spotify

> ID：12494797
> 
> 赞同：0
> 
> 时间：2012-09-19T12:34:48.560
> 
> 标签：android, android-layout, android-intent

我想为我的应用程序实现滑动菜单。我对滑动菜单进行了一些研究，发现[这](https://github.com/jfeinstein10/SlidingMenu)很有用，因此我下载了库并将其导入到我的项目中，但我没有找到任何好的解释来将此滑动菜单与 ActionBarSherlock 一起使用。

是否可以用 ActionBarSherlock 实现滑动菜单并且还支持 Android 2.2 及更高版本？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T12:37:07.533

> 我没有找到任何很好的解释来使用这个带有 SharelockAction 栏的幻灯片菜单

我假设“SharelockAction 栏”是 ActionBarSherlock。如果是这样：

第 1 步：访问您在上面作为 URL 包含[的项目主页。](https://github.com/jfeinstein10/SlidingMenu)

第 2 步：阅读[“使用 ActionBarSherlock 进行设置”部分](https://github.com/jfeinstein10/SlidingMenu#setup-with-actionbarsherlock)。

如果“SharelockAction bar”指的是其他内容，请提供链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:51:18.863

如果您想让 ActionBarSherlock 与 Jeremy Feinsteins 库一起使用，您只需`SherlockActivity`在所有类中扩展而不是 Activity。也将所有替换`FragmentActivities`为`SherlockFragmentActivity`等等。不要忘记将应用程序的主题设置为：`Theme.Sherlock`

# php - 从 facebook 上的封闭组获取事件

> ID：12494799
> 
> 赞同：0
> 
> 时间：2012-09-19T12:34:51.577
> 
> 标签：php, facebook, facebook-graph-api

它适用于开放组，使用 facebook 测试用户的访问密钥，但它不适用于封闭组，尝试将 facebook 测试添加到组中，请求中没有显示。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T09:08:34.660

这似乎是 facebook 上的一个错误，管理员不能接受测试用户对封闭组的请求，即使组说“request(1)”..

# javascript - Facebook js sdk iPhone登录

> ID：12494801
> 
> 赞同：1
> 
> 时间：2012-09-19T12:34:58.903
> 
> 标签：javascript, iphone, facebook-javascript-sdk

我正在尝试使用我的 iPhone 上的 Facebook JS API 登录我的网站。登录在计算机和 iPad 上都可以正常工作。

这是登录屏幕：

![](../Images/6a554bd4cdd5261ee100df90210db9d6.png)

然而，在 iPhone 上，我看到一个如下所示的屏幕：

![](../Images/083c22d95f70df73637c75902fe6ec8d.png)

当我关闭 Facebook 屏幕并显示“返回上一页”消息并重新加载登录页面时，我已成功登录。看起来问题是，iPhone 无法关闭登录弹出屏幕。

这是我的 JavaScript 代码：

```
 <div id="fb-root"></div>
  <script type="text/javascript">
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '', // the app id
        status     : true,
        cookie     : true,
        xfbml      : true
      });
      FB.getLoginStatus(function(response) {
        if (response.status == "connected") {
          // do something
        }
      });

      FB.Event.subscribe("auth.login", function(response) {
        if (response.status == "connected") {
          // do something
        }
      });
    };

    function facebookRedirectLogin(redirect) {
      // do something
    }

    function logout() {
      FB.logout(function(response) {
        // do something
      });
    }
    (function(d){
       var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       d.getElementsByTagName('head')[0].appendChild(js);
     }(document));
  </script>
  <div class="fb-login-button" style="margin-bottom: 20px;">Forbind med Facebook</div> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T10:36:17.533

签出此[网址](https://developers.facebook.com/docs/mobile/web/build/)，

请按照上述 URL 中的说明进行设置，此代码可在移动设备中使用。

```
<html>
<head>
  <title>My Facebook Login Page</title>
</head>
<body>
  <div id="fb-root"></div>
    <div id="login">
        <p><button onClick="loginUser();">Login</button></p>
    </div>
    <div id="logout">
        <p><button  onClick="FB.logout();">Logout</button></p>
    </div>

    <script>
        function loginUser() {    
            FB.login(function(response) { }, {scope:'email'});     
        }
    </script>
  <script>
      (function() {
        var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
            }());
    </script>
    <script>
      window.fbAsyncInit = function() {
        FB.init({ appId: 'xxxxxxxxxxxx', 
          status: true, 
          cookie: true,
          xfbml: true,
          oauth: true});

          FB.Event.subscribe('auth.authResponseChange', handleResponseChange);  
        };
    </script>
    <script>
        function handleReponseChange(response) {
            document.body.className = response.authResponse ? 'connected' : 'not_connected';

            if (response.authResponse) {
                alert(response);
            }
        }
    </script>

</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:40:53.043

我有完全一样的问题。这可能（也可能不是）是一个开放的 Facebook 错误：[https ://developers.facebook.com/bugs/280811108698311](https://developers.facebook.com/bugs/280811108698311)

# memory-management - 使用 mvvmCross 帮助 mono droid 中的 GC

> ID：12494804
> 
> 赞同：0
> 
> 时间：2012-09-19T12:35:02.310
> 
> 标签：memory-management, garbage-collection, xamarin.android, mvvmcross

我正在使用 slodge 提供的 mvvmcross 框架使用单声道机器人。但是我有一些记忆问题。我在 ondestroy 方法的活动中处理位图，我想知道是否可以帮助 GC 收集未使用的视图模型对象。如果您尝试将 Activity 中的视图模型设置为 null，那么一切都会变得糟糕，这显然不是正确的方法。

你们对方法有什么建议吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T07:18:36.167

mvx 框架试图确保活动拥有视图模型。

所以理论上，在你的activity被销毁之后，gc应该能够收集你所有的c#对象——activity、它拥有的视图、视图模型和它拥有的对象。

我看到这个出错的地方是任何“全局”或单例对象都拥有对视图或视图模型对象的引用。例如：

*   如果一个视图用一个单例注册自己——例如一个http图像加载器——然后那个单例保持对视图的引用，防止它被垃圾收集。

*   如果视图模型订阅了中央服务（通常是单例）上的事件并且没有取消订阅 - 那么在这种情况下，视图模型不能被垃圾收集（并且通常这也会阻止其他对象被收集）

通常，这两种类型的错误都可以通过对活动销毁执行清理操作来解决。但是，也可以使用其他方法 - 例如，对于事件订阅，您可以尝试使用弱引用（这也是在其他平台上采用的方法 - 例如 mvvm light 的信使）

根据经验，泄漏最明显的区域是围绕“大物体”（如图像）——它们的大小有助于它们变得引人注目。然而，monodroid 的真正挑战是确定泄漏的位置——修复它们通常相对容易。

遗憾的是，目前没有可用于 droid 的内存分析器。如果您要交叉编译到 wp7，那么对于视图模型对象/泄漏，您当然可以使用它的内存分析器。如果不是，那么我通常尝试解决内存泄漏的方法是放大它们 - 尝试编写一个快速重现它们的示例 - 例如通过向数据元素添加大字节 [] 成员或通过快速重复操作。一旦泄漏很容易重现，那么您可以尝试通过在终结器、事件删除处理程序等中放置跟踪语句来查找泄漏。

# google-maps - gmaps v3 加载事件？

> ID：12494807
> 
> 赞同：3
> 
> 时间：2012-09-19T12:35:08.190
> 
> 标签：google-maps

我想在加载所有数据并放置位置时获得可见的地图。它集成在移动设备程序中，2G 连接速度太慢，所以我想避免部分加载谷歌地图。

加载后，我想收到一条消息-“地图已加载”，然后显示在屏幕上。

我尝试了一些功能

```
<script type="text/javascript">
$(document).ready(function() {

    google.maps.event.bounds_changed(map, 'idle', function(){
    alert("Map is loaded!");
    });
}); 
```

但还是不行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:02:10.120

```
google.maps.event.addListenerOnce(map, 'idle', function(){
  alert("Map is loaded!");
}); 
```

这将添加一个单次触发的侦听器 - 因此地图第一次达到“空闲”状态 - 即当它最初加载时 - 该函数将被执行

**编辑：**

首先，请不要进行“建议的编辑”，而是通过评论回复答案。

其次，你的意思是地图正在一块一块地加载？这就是下载 256x256 平铺图像的方式，对此您无能为力。

第三，您根本没有使用我向您建议的代码。你正在使用这个：

```
 google.maps.event.addListener(map, 'bounds_changed', function() {
     alert("Картата е заредена!");
  }); 
```

当我建议你使用这个时：

```
google.maps.event.addListenerOnce(map, 'idle', function(){
  alert("Map is loaded!");
}); 
```

# gwt - GWT 列表框 onmouseover 工具提示

> ID：12494815
> 
> 赞同：1
> 
> 时间：2012-09-19T12:35:35.463
> 
> 标签：gwt, listbox, tooltip, mouseover

我想为 ListBox 的每个项目添加工具提示吗？

任何想法 ？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T16:32:00.113

由于`ListBox`没有公开它的`OptionElement`列表，我们需要获取底层的`SelectElement`.

```
 SelectElement selectElement = SelectElement.as(listBox.getElement()); 
```

从那里，我们只是设置了`title`each `OptionElement`。

```
 NodeList<OptionElement> options = selectElement.getOptions();
    for (int i = 0; i < options.getLength(); i++) {
        options.getItem(i).setTitle("Hover text for item #" + i);
    } 
```

# ruby-on-rails-3 - ActiveRecord::关系之谜

> ID：12494817
> 
> 赞同：1
> 
> 时间：2012-09-19T12:35:47.487
> 
> 标签：ruby-on-rails-3, activerecord

请解释原因：

```
User.first.comments.class => Array
User.first.comments.missing_method => undefined method `missing_method' for []:ActiveRecord::Relation 
```

为什么第一行类是 Array 而另一个是 Relation？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:29:06.800

`User.first.comments`实际上返回一个 AssociationProxy 对象。调用时您会得到一个数组，`User.first.comments.class`因为该`class`方法未定义并被委托给其他地方。

查看[Rails 关联方法如何工作？](https://stackoverflow.com/questions/1529606/how-do-rails-association-methods-work)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:45:38.037

因为方法 User.first.comments 存在并且它具有返回值数组，并且对于关系注释不存在missing_method。注释是带有返回值数组的 ActiveRecord::Relation 方法。

# python - 将列表写入数组并将其写入文件（Python）

> ID：12494819
> 
> 赞同：1
> 
> 时间：2012-09-19T12:36:13.590
> 
> 标签：python, numpy

我想这很容易，但我无法让它工作。我有一个函数给我一个列表（1x128）。该函数位于循环 (1x32) 内。我想将函数中的所有列表（32x128）写入文件。这是代码：

```
count = 0  
savez =  np.zeros((waveforms.size/len(waveforms),len(waveforms)))

for wvf in waveforms:  # waveforms is an array of 132x128, so wvf is a list of 1x128 
   # some code
       ...
       ...
       ...

    z, maxpeak = get_first_peak(wvf)  #Function giving me z. z is a list of 128 numbers. 

    for index in range(len(z)):
     savez[count,index] = z[index]

     # Some more Code
       ...
       ...
       ...
    count = count + 1   
# Writing z to file
savetxt("logwvf.dat", savez, fmt="%7.1F") 
```

为什么这没有给我一个包含所有 32 个 z 列表的文件？

编辑（如果我包含主要代码有帮助吗？）：

```
if __name__ == '__main__':

print '***********************************************'
print '      CORRECT CS L2 OFF-RANGE WAVEFORMS        '
print '***********************************************'

try:
    ifile  = sys.argv[1]
    ifile2 = sys.argv[2]
    ifile3 = sys.argv[3]
    ofile  = sys.argv[4]

except:
    print "Usage:", sys.argv[0], "ifile"; sys.exit(1)   

# Open and read file from std, and assign first four (orbit, time, lat, lon) columns to four lists, and last 128 columns (waveforms) to an array.

data = np.genfromtxt(ifile, delimiter = ',', dtype = 'float',
             converters = {i:remove_bracket for i in range(132)}
                 )

# Initiating data, the variables are view not copies of data.
orbit = data[:,0]
time  = data[:,1]
lat   = data[:,2]
lon   = data[:,3]
waveforms   = data[:,4:132]

#---------------------------------------------------------------    
# Constants
threshold_coef = 0.50
#---------------------------------------------------------------                
#Getting height of satellite (H_SAT)
count = 0
H_SAT = []

with open(ifile3, 'r') as hsatfile:
    for line in hsatfile:
       col = line.split()
       H_SAT.append(col[4])

#---------------------------------------------------------------
h_corr = [0]*len(waveforms)
#z=np.zeros((len(waveforms),((waveforms.size)/len(waveforms))))
savez = np.zeros((len(waveforms),(waveforms.size/len(waveforms))))
count = 0
#logwvffile=open('logwvf.dat', 'a')
#---------------------------------------------------------------
# Looping over all waveforms:
for wvf in waveforms:  
    print 'Waveform #: ', count+1
    # Getting waveform, log waveform and maxpeak value
    z, maxpeak = get_first_peak(wvf)

    for index in range(len(z)):
        savez[count,index] = z[index]

    print savez

#    savetxt("wvf.dat", wvf, fmt="%7.1F")

    # Max. of first peak 
    peaklogwvf = np.amax(z)

    # Finding the first peak of org. waveform:
    for i in range(len(z)):
        if (z[i]==peaklogwvf):
            gate_firstpeak = i

    firstpeak = wvf[gate_firstpeak]
    print 'First peak at: ', gate_firstpeak,',', firstpeak

    # Retracking gate of first peak
    print 'Using', threshold_coef*100,'% threshold retracker ...'

    Pn = thermalnoise_firstpeak(wvf)
    retrack_gate_first = threshold_retracker(wvf,Pn,threshold_coef,firstpeak)

    #---------------------------------------------------------------
    # Finding the gate of max. peak:
    for i in range(len(z)):
        if (wvf[i]==maxpeak):
            gate_maxpeak = i

    print ''
    print 'Maximum peak at: ', gate_maxpeak,',', maxpeak
        # Retracking gate of max peak
    if (gate_maxpeak-gate_firstpeak > 3):
        Pnmax = thermalnoise_maxpeak(wvf,gate_firstpeak,gate_maxpeak)
    else:
        Pnmax = Pn
        print 'Thermal noise (Max. peak): ', Pnmax

    retrack_gate_max = threshold_retracker(wvf,Pnmax,threshold_coef,maxpeak)

    # Peak 2 peak bin seperation
    peak2peak = retrack_gate_max-retrack_gate_first  

    print ''
    print 'Difference between retracking gates', peak2peak
    print ''

    if (peak2peak > 1 ):
        print 'Range needs to be corrected!'
        h_peak2peak = off_range_calc(peak2peak,float(H_SAT[count]))
    else:
        print 'Range ok, NO correction is needed!'
        h_peak2peak = 0.0

    print '***********************************************'
    print ''

    h_corr[count] =    h_peak2peak 
    count = count + 1   
#---------------------------------------------------------------    
#---------------------------------------------------------------
# Loop is closed
# Height is corrected
print 'The height corrections: ', h_corr
correct_height(ifile2,ofile,lat,h_corr)    

np.savetxt("logwvf.dat", savez, fmt="%7.1F") 
```

编辑#2

哇，这很尴尬。我只是发现了自己的错误。当我需要至少 3 个数字时，我在写入文件时只包含了一个数字。

谢谢你们花时间帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:28:43.727

`(waveforms.size/len(waveforms),len(waveforms))`您可能想要创建`savez`一个基本列表，而不是创建一个零数组`[]`。

然后，当您循环播放时`waveforms`，只需附加新的`z`：

```
savez.append(z) 
```

完成后，只需转换`savez`为数组（例如， with `savez=np.array(savez)`）并将后者用作`np.savetxt`.

这样一来，您就不必将全部内容保存`savez`在内存中。

如果您更喜欢一直保留`savez`为数组，至少要考虑摆脱

```
for index in range(len(z)):
 savez[count,index] = z[index] 
```

这非常浪费：你可以做一个`savez[count][:] = z`

# iphone - 应用程序应在应用程序启动结束时在控制台中显示根视图控制器

> ID：12494823
> 
> 赞同：6
> 
> 时间：2012-09-19T12:36:29.353
> 
> 标签：iphone, ios, uistoryboard

我在控制台中收到“应用程序应该在应用程序启动结束时有一个根视图控制器”语句，而应用程序在显示启动屏幕后没有打开。我的应用程序：didFinishLaunchWithOptions 方法是：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:[NSBundle mainBundle]];
UIViewController *initViewController = [storyboard instantiateViewControllerWithIdentifier:@"FirstInfo"];

[self.window setRootViewController:initViewController];
[self.window makeKeyAndVisible];
[self.window makeKeyWindow];
return YES; 
```

main.m 为：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

    }
} 
```

该应用程序以前运行良好。从今天开始，这只是一个快速不起作用的过程。我在应用程序中使用 ARC 和 Storyboard。请建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-24T09:41:48.323

将“MainStoryboard”添加到您的项目中，并将构建设置中的 Main Storyboard 选项设置为“MainStoryboard”

然后，更新 AppDelegate 方法：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
return YES;
} 
```

有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:39:52.540

确保从情节提要返回的控制器不是`nil`.

**编辑**当你在它......你在哪里创建`self.window`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T20:25:00.067

我会在调试器中逐步完成，并确保像

```
[storyboard instantiateViewControllerWithIdentifier:@"FirstInfo"] 
```

正在返回您所期望的。

我会确保有问题的情节提要视图控制器实际上具有标识符“FirstInfo”而不是“Firstinfo”或“FirstInfo”。

我还要确保故事板是文件检查器中应用程序目标的成员。

希望其中之一是原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T09:50:16.460

在情节提要中，选择 rootViewController 并在左侧实用程序菜单中选中“是初始视图控制器”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:48:42.750

我已在构建设置中将 Main Storyboard 选项设置为“MainStoryboard ![在此处输入图像描述](../Images/dd39c3ccc4406be67c714d719b6f37ee.png)”

它的工作！

# routing - 错误：未知提供者：$elementProvider <- $element

> ID：12494825
> 
> 赞同：6
> 
> 时间：2012-09-19T12:36:36.957
> 
> 标签：routing, angularjs

我正在尝试在 angularjs 应用程序中使用路由，如下所示：

应用程序.js

```
 angular.module('productapp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/productapp', {templateUrl: 'partials/productList.html',   controller: productsCtrl}).
        //~ when('/productapp/:phoneId', {templateUrl: 'partials/phone-detail.html', controller: PhoneDetailCtrl}).
        otherwise({redirectTo: '/productapp'});
}]); 
```

控制器.js

```
function productsCtrl($scope, $http, $element) {
        //~ $scope.url = 'php/search.php'; // The url of our search
        // The function that will be executed on button click (ng-click="search()")
        $http.get('php/products.php').success(function(data){
            alert("hi");
            $scope.products = data;
        });

    $scope.search = function() {
        var elem = angular.element($element);
        var dt = $(elem).serialize();
        dt = dt+"&action=index";
        alert(dt);
        console.log($(elem).serialize());
        $http({
            method: 'POST',
            url: 'php/products.php',
            data: dt,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'}
        }).success(function(data, status) {
            //console.log(data);
            $scope.products = data; // Show result from server in our <pre></pre> element
        }).error(function(data, status) {
            $scope.data = data || "Request failed";
            $scope.status = status;
        });
    }; //.... 
```

索引.html

```
<html ng-app = "productapp">
<head>
<title>Search form with AngualrJS</title>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="js/products.js"></script>
        <script src="js/app.js"></script>
</head>
<body>
    <div ng-view></div>
</body>
</html> 
```

产品列表.html

```
<div>
            <label>Search</label>
            <input type="text" name="searchKeywords" ng-model="keywords" placeholder="enter name..." value="{{rs.name}}">
            <button type="submit" ng-click="search()">Search</button>
            <label>Add New Product:</label>
            <input type="text" name="keywords" ng-model="rs.name" placeholder="enter name..." value="{{rs.name}}">
            <input type="text" name="desc" ng-model="rs.description" placeholder="enter description..." value="{{rs.description}}">
            <button type="submit" ng-click="add()">Add</button>
            <button type="submit" ng-click="save(rs.product_id)">Save</button>

            <p>enter product name...</p>
            <table border='2'>
                <th>Name</th>
                <th>Description</th>
                <th>Edit</th>
                <th>Delete</th>

                <tr ng-repeat="product in products" ng-model = 'products'>
                <td>{{product.name}}</td>
                <td>{{product.description}}</td>
                    <td><a href='' ng-click = "fetch(product.product_id)">edit</a></td>
                    <td> <a href='' ng-click = "del(product.product_id)" ng-hide="isHidden">delete</a></td>
                </tr>
            </table>
</div> 
```

当我运行此代码时，我在控制台（谷歌浏览器）中收到以下错误：

```
Error: Unknown provider: $elementProvider <- $element 
```

我知道发生此错误是因为我`$element`在 productsCtrl 中使用。但那我该怎么办？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T19:17:23.553

~~$element 是不可注入的（它不是在 AngularJS 注入器中注册的东西），所以你不能以这种方式将它传递给你的控制器。~~

您的 productsCtrl 以及您的 search() 方法可以访问所有表单数据，因为 ng-model 指令在表单和控制器之间设置了双向绑定。例如，在您的 search() 方法中，您已经可以访问关键字作为 $scope.keywords。

看看这是否适合你：

```
var dt = $($scope.keywords).serialize();  // or maybe just  $scope.keywords.serialize(); 
```

**更新**：这个小提琴[http://jsfiddle.net/michelpa/NP6Yk/](http://jsfiddle.net/michelpa/NP6Yk/)似乎将 $element 注入控制器。（我不确定它是如何/为什么起作用的......也许是因为控制器附加到表单标签/指令？）

**更新#2**：将 $element 注入控制器是可能的，但这“与角度方式相悖” [——https://groups.google.com/d/msg/angular/SYglWP_x7ew/lFtb75NWNWUJ](https://groups.google.com/d/msg/angular/SYglWP_x7ew/lFtb75NWNWUJ)

正如评论中提到的，我认为您的问题的答案是将您的表单数据放入一个更大的对象中，并将其发送到您的 $http 请求中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-19T15:41:23.443

我认为您不需要将 $element 注入控制器。相反，尝试将它作为参数传递给需要它的函数。我不确定为什么这确实有效：

```
<a ng-click="search($element)"> 
```

# c# - 单元测试重组

> ID：12494829
> 
> 赞同：2
> 
> 时间：2012-09-19T12:36:56.257
> 
> 标签：c#, visual-studio-2010, unit-testing

通常我们使用一个包含产品项目和单元测试项目的 Visual Studio 解决方案。

我们的单元测试项目正在快速增长（2000 多个单元测试），加载/重建变得缓慢并且难以浏览。还要考虑 - AFAIK - 在 Visual Studio 2012 测试类别中不再可见。

我们正在考虑将其拆分为多个单元测试项目：

1.  是否可以在同一个 Visual Studio 解决方案中加载多个单元测试项目？
2.  当单元测试的数量增长如此之多时，最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:41:56.563

> 是否可以在同一个 Visual Studio 解决方案中加载多个单元测试项目？

这个没问题，你可以有多个单元测试项目

> 当单元测试的数量增长如此之多时，最好的方法是什么？

第一种也是自然的方法是为解决方案中的每个项目创建一个单元测试项目。如果您的解决方案只有一个项目，那么也许这就是您需要开始重构的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:45:15.180

我为每个程序集创建单元测试项目。我认为您应该按与它们相关的系统或组件对测试进行分组。在您的测试中实现松散耦合和高内聚。看看这种方法[Structuring Unit Tests](http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx)。

尝试使用[NCrunch](http://www.ncrunch.net/)从测试中获得更好的反馈并避免重新运行测试。

# javascript - Javascript 混淆：对象与数组与对象数组？

> ID：12494831
> 
> 赞同：0
> 
> 时间：2012-09-19T12:36:57.233
> 
> 标签：javascript, arrays, object

我有一个糟糕的编码日。我根本不明白为什么[小提琴上的这段代码](http://jsfiddle.net/vZNKb/1)没有达到我的预期。

```
var masterList = new Array();
var templates = new Array();
templates.push({"name":"name 1", "value":"1234"});
templates.push({"name":"name 2", "value":"2345"});
templates.push({"name":"name 3", "value":"3456"});
templates.push({"name":"name 4", "value":"4567"});
templates.push({"name":"name 1", "value":"5678"});
templates.push({"name":"name 2", "value":"6789"});
templates.push({"name":"name 3", "value":"7890"});
templates.push({"name":"name 4", "value":"8901"});

var addUnique = function(thatObj) {
    var newList = new Array();

    if ( masterList.length == 0 ) {
        // add the first element and return
        masterList.push(thatObj);
        return;
    }

    for (j=0; j<masterList.length; j++) {
        if (masterList[j].name != thatObj.name) {
            newList.push(thatObj);
        }
    }

    // store the new master list
    masterList = newList.splice(0);
}

for (i=0; i<8; i++) {
  addUnique(templates[i]);
}

console.log(masterList);
console.log(masterList.length); 
```

在我的（谦虚）看来，它应该通过模板数组，用模板数组的每个元素填充 masterList，但只会在主数组中产生 4 个元素，因为命名相同的元素应该被“覆盖”，即没有复制到中间数组中，因此没有进行并用新的替换。相反，我在 masterList 中获得了一个条目。

过去的美好时光，强类型语言都去哪儿了。指针。叹。我只是不明白 javascript 正在制造什么样的混乱（好吧，我当然是在制造混乱）但我责怪 JS 不理解我......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:41:40.827

`newList`作用于`addUnique`函数，您在循环中调用 8 次。每次运行此函数时，您都会为 masterList ( `masterList = newList.splice(0);`) 分配一个新值，因此只有最后一个值会显示在`console.log(masterList)`.

这是您的小提琴的固定版本：http: [//jsfiddle.net/vZNKb/2/](http://jsfiddle.net/vZNKb/2/)

```
var addUnique = function(thatObj) {
    if ( masterList.length == 0 ) {
        // add the first element and return
        masterList.push(thatObj);
        return;
    }

    var exists = false;
    for (var j = 0; j < masterList.length; j++) {
        if (masterList[j].name == thatObj.name) {
            exists = true;
            break;
        }
    }

    if (!exists) {
        masterList.push(thatObj);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:41:24.567

您的循环`addUnique`需要首先遍历所有元素...然后如果没有元素匹配则添加

**相关部分**

```
var matchingRecord = false;
for(j=0;j<masterList.length;j++) {
    if (masterList[j].name == thatObj.name){
        matchingRecord = true;
        break;
    }
}
if(!matchingRecord) newList.push(thatObj); 
```

# java - 尝试运行 Google Speedtracer 仪表板

> ID：12494833
> 
> 赞同：1
> 
> 时间：2012-09-19T12:37:05.243
> 
> 标签：java, google-app-engine, speedtracer

[我正在尝试运行Google Speedtracer Headless](http://code.google.com/p/speedtracer/wiki/HeadlessExtension)附带的 Page Startup Latency 示例。
然而，当我在 Eclipse 中运行应用程序并尝试访问调用 speedtracer 扩展的页面时，它给了我这个。

```
java.lang.NoClassDefFoundError: com/google/json/serialization/JsonException
at java.lang.Class.getDeclaredConstructors0(Native Method)
at java.lang.Class.privateGetDeclaredConstructors(Class.java:2406)
at java.lang.Class.getConstructor0(Class.java:2716)
at java.lang.Class.newInstance0(Class.java:343)
at java.lang.Class.newInstance(Class.java:325)
at org.mortbay.jetty.servlet.Holder.newInstance(Holder.java:153)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:428)
at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:370)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)

Caused by: java.lang.ClassNotFoundException: com.google.json.serialization.JsonException
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:207)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
... 37 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:42:25.220

您的类路径中需要 org.json 类。如果需要，gwt-servlet-deps.jar 包含它们。

# mysql - 计算table2的行不包括MySQL中table1的所有行

> ID：12494835
> 
> 赞同：3
> 
> 时间：2012-09-19T12:37:08.300
> 
> 标签：mysql

我有表 1，它表示具有列 ItemID 和列 ItemInfo 的项目。然后，我有表 2，它表示具有列 ItemID（父）、列 SubItemID 和列 SubItemInfo 的子项。

我正在尝试使用以下方法获取每个项目的所有子项目的计数：

```
select items.itemID, count(*) as count 
from items, subItems 
where subItems.itemID=items.itemID group by itemID 
```

除了没有子项目的项目外，它工作正常。该行根本不存在，而不是返回子项计数为 0 的项行。

有没有一种有效的方法来强制选择第一个表（项目）中的所有行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:43:59.477

您需要使用左外连接，对于没有子项的项目，您将得到 0，如下所示：

```
SELECT items.itemid,
       Count(subitems.subitemid) AS count
FROM   items
       LEFT JOIN subitems
              ON ( subitems.itemid = items.itemid )
GROUP  BY items.itemid 
```

如果您想获得更好的性能，可以尝试以下查询：

```
SELECT itemid,
       Count(*) AS count
FROM   subitems
GROUP  BY itemid 
```

BUT, with this one you will not get any info about the items, that have no subitems (they are simply not present within subitems table).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:42:09.177

```
select items.itemID, count(*) as count 
  from items
  left join subItems on (items.itemID=subItems.itemID) 
group by itemID 
```

# cakephp - CakePHP 1.2：是否可以为其 beforeFilter 方法免除特定的控制器操作？

> ID：12494836
> 
> 赞同：1
> 
> 时间：2012-09-19T12:37:14.943
> 
> 标签：cakephp

我知道我正在使用一个古老的版本。不过，提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:54:38.010

IE排除登录动作，在beforefilter中写入：

```
 if ($this->action == 'login')
    {
        // execute beforeFilter logic
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:03:43.297

在任何版本中调用 beforeFilter() 的工作方式都相同。你想达到什么目标？您是否在 AppController 中有一些您不想运行的代码？

只需在调用 parent::beforeFilter() 的情况下实现一个空的 beforeFilter()，或者调用它但将标志设置为 false 以避免运行有问题的微妙代码。

# c# - 如何直接从特定于应用程序的异常映射到 Http 异常？

> ID：12494841
> 
> 赞同：2
> 
> 时间：2012-09-19T12:37:28.050
> 
> 标签：c#, asp.net-mvc, action-filter, custom-error-pages, handleerror

我正在开发一个 ASP.NET MVC 3 应用程序。在我们App所谓的“业务层”中，我们做出了一个决定，总是根据情况**抛出一些特定类型的异常。**当用户试图做他未授权的事情时，我们有一个异常类型层次结构，以及当应用程序找不到给定项目（通过 Id 或名称或其他）时的特殊异常。

这在我们的 C# 代码中看起来像这样：

```
// ... more stuff
public Something GetSomething(int id, User currentUser){
    var theSomething = SomethingRepository.Get(id);
    if(theSomething == null){
        throw new SomethingNotFoundException(id, "more details");
    }

    if(!PermissionService.CanLoadSomething(currentUser)){
        throw new NotAuthorizedException("You shall not pass");
    }

    // the rest of the method etc etc
    // ...
} 
```

... custom s 的位置`SomethingNotFoundException`和位置。`NotAuthorizedException``Exception`

这种异常和 Http 状态码（404 Not Found / 403 Forbidden）之间存在某种**直接映射**，我们希望我们的 Controller 方法相应地处理这些错误（显示 404/403 CustomError 页面和类似的东西） . 现在，我们想要的是避免在我们的控制器操作中这样做：

```
public ViewResult Get(int id){
    try{
        var theSomething = MyService.GetSomething(id, theUser);
    }
    catch(SomethingNotFoundException ex){
        throw new HttpException(404, ex);
    }
    catch(NotAuthorizedExceptionex){
        throw new HttpException(403, ex);
    }
} 
```

我很确定必须有一种方法可以使用自定义 HandleErrorAttribute 或自定义 ActionFilterAttribute 并将其注册到 Global.asax，但我不知道如何让它工作。

**尝试 1：HandleErrorAttribute**

我首先尝试创建一个 HandleErrorAttribute 的子类，并像这样覆盖该`OnException`方法：

```
public override void OnException(ExceptionContext filterContext)
{
    if (filterContext == null)
    {
        throw new ArgumentNullException("filterContext");
    }

    Exception exception = filterContext.Exception;
    // Map some of the Business Exception to correspounding HttpExceptions !
    if (exception is ObjectNotFoundException)
    {
        // consider it as a NotFoundException !
        exception = new HttpException((int)HttpStatusCode.NotFound, "Not found", exception);
        filterContext.Exception = exception;

    }
    else if (exception is NotAuthorizedException)
    {
        // consider it as a ForbiddenException 
        exception = new HttpException((int)HttpStatusCode.Forbidden, "Forbidden", exception);
        filterContext.Exception = exception;
    }

    base.OnException(filterContext);

} 
```

...并将其添加到`GlobalFilterCollection`Global.asax ...但它仍然像通常的 500 错误一样处理，而不是显示 404/403 自定义错误页面...

**尝试 2：ActionFilterAttribute**

我也尝试过使它成为一个`ActionFilterAttribute`并覆盖这样的`OnActionExecuted`方法：

```
public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    if (filterContext == null)
    {
        throw new ArgumentNullException("filterContext");
    }
    Exception exception = filterContext.Exception;
    if(exception!=null)
    {
        // Map some of the Business Exception to correspounding HttpExceptions !
        if (exception is ObjectNotFoundException)
        {
            // consider it as a NotFoundException !
            var wrappingException = new HttpException((int)HttpStatusCode.NotFound, "Not found", exception);
            exception = wrappingException;
            filterContext.Exception = exception;
        }
        else if (exception is NotAuthorizedException)
        {
            // consider it as a ForbiddenException 
            var wrappingException = new HttpException((int)HttpStatusCode.Forbidden, "Forbidden", exception);
            exception = wrappingException;
            filterContext.Exception = exception;
        }
    }

    base.OnActionExecuted(filterContext);
} 
```

...但是，我仍然得到 500 错误页面而不是 404 或 403 ...

**难道我做错了什么 ？有没有更好的方法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T01:29:47.760

那么有几个选择。

你可能想要：[这家伙的](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc)解决方案

你可以这样做[这个家伙](https://stackoverflow.com/questions/6733064/how-do-i-display-custom-error-pages-in-asp-net-mvc-3)。

您可以拥有一个所有类都继承自的基本 Controller 类，并使用以下方法。这就是我上一家公司解决这个问题的方式。

```
protected override void OnException(ExceptionContext filterContext)
{
       Console.WriteLine(filterContext.Exception.ToString());
} 
```

# android - 什么时候注册推送？

> ID：12494842
> 
> 赞同：0
> 
> 时间：2012-09-19T12:37:30.317
> 
> 标签：android, android-c2dm

每次创建应用程序时都需要注册推送吗？或者注册一次就足够了，例如登录后？打电话的最佳点是`C2DMessaging.register(getApplicationContext(), C2DMConstants.SENDER);`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:41:49.603

我认为您应该在每次用户登录时在 GCM 上注册设备，并在用户注销时取消注册设备，因为用户可能会使用他们朋友的设备来访问您的应用程序。因此，最好在每次用户注销时注销设备。每次用户登录或注销时，您还需要更新用户及其设备的映射（很可能在您的应用程序服务器上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:42:08.933

每次应用启动时，检查您保存的令牌：

如果为null，则发送注册push的intent

如果不为null，则可以检查是否已发送到服务器并决定是否发送。

但是，我更喜欢更频繁地发送它，以防万一服务器上发生问题。

一般来说，谷歌要求我们不要多次注册。一旦你有一个令牌，使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:44:50.363

不，不需要每次应用启动时都注册。但是您必须检查您的注册 ID 是否被 GCM 服务器更改。因为有时 GCM 需要更改注册 ID，甚至它不会通知设备。因此，您必须在应用程序中保存您的注册 id，并在应用程序启动时，匹配保存的 id 和 GCMRegistrar.getRegistrationId() 方法返回的 id。如果两者不同，请将其保存并在您的服务器上进行更新。

# json - 使用ajax发送分组的json数据

> ID：12494846
> 
> 赞同：2
> 
> 时间：2012-09-19T12:37:52.660
> 
> 标签：json, extjs

我正在使用 extJS 4.0 版来生成输入表单。在该表单上有一个保存按钮，可通过 ajax 将所有字段数据发送到 php。作为数据本身的传输协议，我使用的是 json。

因为我需要为处理这些数据创建一个动态（通用）例程（因为该表单不是该项目中的唯一表单），所以我需要以某种方式分组该 json 数据。我的要求之一是我需要“字段名”保持原样（因为我使用传输给我的字段名在自动保存例程中访问数据库中的适当列）。

我的问题是有没有办法以某种方式对通过 json 传输的数据进行分组（因此 extJS 将其分组）。作为一个简化的例子：

在 entryform 上，我保存了 2 个表（1\. Person 2\. bankaccount）的数据，这些表在表单上显示了以下字段： -firstname -lastname for person 和 -account number -bank number for bankaccount（相应的商店）

extJS 有没有办法相应地对这些数据进行分组，从而生成这样的东西？

```
{"person":[{"firstname": "Mark", "lastname":"Smith"}],"bankaccount":[{"account number":123112,"bank number":1A22A1}]} 
```

目前我得到这样的东西：

```
{"firstname": "Mark", "lastname":"Smith","account number":123112,"bank number":1A22A1} 
```

个人和银行帐户都在各自的商店中。

肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T13:43:59.127

好吧，您有两家商店：一家用于“person”，一家用于“bankaccount”。

```
Ext.define ('Person', {
    extend: 'Ext.data.Model' ,
    fields: ['firstname', 'lastname']
});

Ext.define ('BankAccount', {
    extend: 'Ext.data.Model' ,
    fields: ['accountnumber', 'banknumber']
});

var personStore = Ext.create ('Ext.data.Store', {
    model: 'Person' ,
    data: [
        {firstname: 'foo', lastname: 'bar'} ,
        {firstname: 'zoo', lastname: 'zar'} ,
        {firstname: 'too', lastname: 'tar'} ,
        {firstname: 'goo', lastname: 'gar'} ,
        {firstname: 'moo', lastname: 'mar'}
    ]
});

var bankAccountStore = Ext.create ('Ext.data.Store', {
    model: 'BankAccount' ,
    data: [
        {accountnumber: 10000, banknumber: 10000} ,
        {accountnumber: 20000, banknumber: 20000} ,
        {accountnumber: 30000, banknumber: 30000} ,
        {accountnumber: 40000, banknumber: 40000} ,
        {accountnumber: 50000, banknumber: 50000}
    ]
}); 
```

然后，您想将这些存储转储为 JSON。没问题！制作一个容器（*jsonData*），然后用您的商店填充它：

```
var jsonData = {
    person: [] ,
    bankaccount: []
};

personStore.each (function (person) {
    jsonData.person.push (person.data);
});

bankAccountStore.each (function (bank) {
    jsonData.bankaccount.push (bank.data);
});

console.log (Ext.JSON.encode (jsonData)); 
```

这是控制台上的输出：

```
{"person":[{"firstname":"foo","lastname":"bar"},{"firstname":"zoo","lastname":"zar"},{"firstname":"too","lastname":"tar"},{"firstname":"goo","lastname":"gar"},{"firstname":"moo","lastname":"mar"}],"bankaccount":[{"accountnumber":10000,"banknumber":10000},{"accountnumber":20000,"banknumber":20000},{"accountnumber":30000,"banknumber":30000},{"accountnumber":40000,"banknumber":40000},{"accountnumber":50000,"banknumber":50000}]} 
```

这是你要求的吗？

**[这是小提琴](http://jsfiddle.net/f5vjt/)**

# jquery - 单击事件在 mozzila 中工作正常，但在 chrome 中不工作

> ID：12494847
> 
> 赞同：0
> 
> 时间：2012-09-19T12:37:58.250
> 
> 标签：jquery

我有一个隐藏文件字段和一个浏览按钮。当我单击浏览按钮时，它将触发单击文件字段的单击事件。我的代码在 mozzila 中运行良好，但在 chrome 中运行良好。代码如下：

```
 $("#upload, #browse_product_detail_file").bind({
    click: function(){
      $('#product_master_csv_file').trigger('click');
      return false;
     }
 }); 
```

我也尝试了以下方法：-

```
 $("#upload, #browse_product_detail_file").bind(
    "click", function(){
      $('#product_master_csv_file').click();
      return false;         
 }); 
```

和

```
$("#upload, #browse_product_detail_file").click(function(){
      $('#product_master_csv_file').trigger('click');
      return false;
     }
 }); 
```

和

```
$("#upload, #browse_product_detail_file").live("click", function(){
      $('#product_master_csv_file').trigger('click');
      return false;
     }
 }); 
```

但这工作正常

```
$("#upload, #browse_product_detail_file").click(function(){
      alert("clicked");
     }
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:45:00.220

而不是使用**bind**，使用**ON**方法

```
 $("#upload, #browse_product_detail_file").on("click", function(event){
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:43:56.537

它的非常古老的方式尝试这种方式。

从 jQuery 1.4 开始，我们可以通过传递事件类型/处理程序对的映射同时绑定多个事件处理程序：

**老的**

```
$('#foo').bind({
  click: function() {
    // do something on click
  },
  mouseenter: function() {
    // do something on mouseenter
  }
}); 
```

**新的**

```
$('#foo').bind('mouseenter mouseleave', function() {
  $(this).toggleClass('entered');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:41:23.290

我可能弄错了，我从未见过 click: 这样写，试试这个：

```
$("#upload, #browse_product_detail_file").bind('click', function(){
    $('#product_master_csv_file').click();
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:41:46.950

[这个网站](http://www.quirksmode.org/dom/events/)看起来很了不起。`bind`也许您还应该考虑使用 'click' jQuery 函数，而不是 obsolete 。

# mysql - 崩溃后的MySQL主从

> ID：12494853
> 
> 赞同：0
> 
> 时间：2012-09-19T12:38:29.933
> 
> 标签：mysql, replication, database-replication, master-slave

这是场景：

1.  我有一个 MySQL Master 和一个 slave。
2.  主从复制已设置并完美运行。
3.  从机崩溃。
4.  主机仍在运行。
5.  主数据库中没有任何变化。
6.  我再次启动从机。
7.  我启动从 MySQL DB。

我需要在从属数据库上**再次调用“启动从属”吗？**

10 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:38:50.990

我相信slave会自动启动，除非你的my.cnf中有skip-slave-start。

运行“显示奴隶状态”，看看它说什么。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-16T08:43:39.280

1.  在 master 中，检查 master 的状态，看看它是否显示 slave 正在运行。
2.  转到从机并重新启动（停止和启动）从机。
3.  重复步骤 1 再次检查

# javascript - 禁用对容器内元素的所有操作

> ID：12494861
> 
> 赞同：1
> 
> 时间：2012-09-19T12:38:47.897
> 
> 标签：javascript, jquery

我正在为一个 js-heavy Web 应用程序实现一个交互式教程。我突出显示了一些容器，并希望用户单击其中的某个元素。同时，我想阻止用户做任何其他事情，例如点击不同的链接。

主要问题是我不想取消绑定任何事件 - 当教程关闭时，应用程序必须像以前一样工作。

我开始在所有容器的后代元素上注册一个处理程序：

```
element.on("click.tutorialLock", function(e){
    e.stopPropagation();
    e.stopImmediatePropagation();
    e.preventDefault();
} 
```

然后我设置它的“优先级”，以便它在任何其他事件之前执行：

```
handlers = element.data("events").click;
our = handlers.pop();
handlers.splice(0, 0, our); 
```

最后，当我想解锁某个元素时，我只是禁用它上面的事件：

```
elementToEnable.off(".tutorialLock") 
```

这行得通，但很重。我尝试仅在定义了一些自定义事件处理程序的元素上注册事件，但它忽略了锚点和其他基本元素。也许你能想出一些好主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:46:55.183

我将获取活动的父元素并将其传递给一个函数，该函数将禁用除父事件之外的所有事件

```
$('.className').live ('click', function (e)
{
if (!$(this).parents('#targetParent').length))
    return false; // same as e.preventDefault() & e.stopPropogation()
}); 
```

希望这与您想要的相似

# c# - 使用泛型基类作为方法的参数

> ID：12494863
> 
> 赞同：6
> 
> 时间：2012-09-19T12:38:57.927
> 
> 标签：c#, .net, mono, derived-class, generic-type-argument

我有以下课程

```
public class A<T>
{
}
public class B<T> : A<T>
{
}
public class C1 : B<string>
{
}
public class C2 : B<int>
{
} 
```

我想要做的是有一个方法，它可以将任何类派生自`B<T>`，喜欢`C1`或`C2`作为参数。但是将方法声明为

```
public void MyMethod(B<T> x) 
```

不起作用，它会产生编译器错误

> 错误 CS0246：找不到类型或命名空间名称“T”。您是否缺少 using 指令或程序集引用？(CS0246)

我被困在这里了。创建一个非泛型基类是`B<T>`行不通的，因为我无法从`A<T>`这种方式派生。我能想到的唯一（丑陋的）解决方案是定义一个空的虚拟接口，由`B<T>`. 有没有更优雅的方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T12:40:55.867

使用通用方法：

```
public void MyMethod<T> (B<T> x) 
```

你可以这样称呼它：

```
MyMethod(new B<string>());
MyMethod(new C1());
MyMethod(new C2()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T12:41:04.937

在方法上指定`T`：

```
public void MyMethod<T>(B<T> x) 
```

或者可能在包含该方法的类上：

```
public class Foo<T>
{
    public void MyMethod(B<T> x){}
} 
```

在这两种情况下，您都需要在原始类上指定相同的类型约束（如果有）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T12:41:42.123

像这样更改方法的签名：

```
public void MyMethod<T>(B<T> x) 
```

# sql - 如何检查sql server中的参数不为空？

> ID：12494869
> 
> 赞同：1
> 
> 时间：2012-09-19T12:39:23.273
> 
> 标签：sql, sql-server, stored-procedures, dataset

我有一个存储过程。在这个存储过程中，我必须检查特定参数是否不为空。我怎样才能做到这一点？我写了这个：

```
ALTER PROCEDURE [dbo].[GetReelListings]
    @locationUrlIdentifier VARCHAR(100)
AS
BEGIN   

SET NOCOUNT ON;

declare @Sql varchar(max)=''

SET @Sql = 'SELECT CategoryName, CategoryUrlIdentifier,  LocationUrlIdentifier, Directory.* FROM (SELECT ROW_NUMBER() OVER (PARTITION BY Category.Name ORDER BY CASE WHEN '''+ @locationUrlIdentifier + ''' = Location.UrlIdentifier THEN 1 ELSE CASE WHEN ''' + @locationUrlIdentifier + ''' IS NULL AND Directory.LocationId IS NULL THEN 0 ELSE 2 END END, Directory.SortOrder ) AS ''RowNo'', Category.Name AS CategoryName, Category.UrlIdentifier AS CategoryUrlIdentifier, dbo.Location.UrlIdentifier AS LocationUrlIdentifier, Directory.DirectoryId, CASE WHEN ''' + @locationUrlIdentifier + ''' = Location.UrlIdentifier THEN 1 ELSE CASE WHEN ''' + @locationUrlIdentifier + ''' IS NULL AND Directory.LocationId IS NULL THEN 0 ELSE 2 END END AS CategoryOrder    FROM dbo.Directory  INNER JOIN dbo.Category ON Directory.CategoryId = Category.CategoryId LEFT OUTER JOIN dbo.Location ON dbo.Directory.LocationId = location.Location_ID ) AS content INNER JOIN dbo.Directory ON content.DirectoryId = Directory.DirectoryId WHERE content.RowNo =1 '

if (@locationUrlIdentifier is null)
begin
SET @Sql = @Sql + ' and 1=1'
end
else
begin
SET @Sql = @Sql + ' and CategoryOrder = 1 '
end

print @SQl
EXECUTE (@Sql)
 END 
```

这将在 SQL 中工作，但这将在 Codebehind 中返回一个空数据集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:48:30.330

每当您将字符串和`NULL`s 连接在一起时，结果就是`NULL`. 当您询问变量是否为`NULL`时，您已经这样做了：

```
' + @locationUrlIdentifier + ' 
```

几次。如果是`NULL`，那么将`@Sql`是。

您可能需要考虑使用合适的替换（例如空字符串）[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)来替换：`NULL`

```
' + COALESCE(@locationUrlIdentifier,'') + ' 
```

您的最终构造仍然存在逻辑错误。如果变量是`NULL`，您将有一个 where 子句说：

```
WHERE content.RowNo =1 1=1 
```

这是无效的。我认为你不应该附加任何东西。

* * *

我也不清楚您为什么将其作为动态 SQL 执行。以下似乎是可以直接执行的等效查询：

```
SELECT
    CategoryName,
    CategoryUrlIdentifier,
    LocationUrlIdentifier,
    Directory.*
FROM
    (SELECT
        ROW_NUMBER() OVER (
            PARTITION BY Category.Name ORDER BY
                CASE
                    WHEN @locationUrlIdentifier  = Location.UrlIdentifier THEN 1
                    WHEN @locationUrlIdentifier IS NULL AND Directory.LocationId IS NULL THEN 0
                    ELSE 2
                END,
                Directory.SortOrder
        ) AS RowNo,
        Category.Name AS CategoryName,
        Category.UrlIdentifier AS CategoryUrlIdentifier,
        dbo.Location.UrlIdentifier AS LocationUrlIdentifier,
        Directory.DirectoryId,
        CASE
            WHEN @locationUrlIdentifier  = Location.UrlIdentifier THEN 1
            WHEN @locationUrlIdentifier IS NULL AND Directory.LocationId IS NULL THEN 0
            ELSE 2
        END AS CategoryOrder
    FROM
        dbo.Directory
            INNER JOIN
        dbo.Category
            ON
                Directory.CategoryId = Category.CategoryId
            LEFT OUTER JOIN
        dbo.Location
            ON
                dbo.Directory.LocationId = location.Location_ID
    ) AS content
        INNER JOIN
    dbo.Directory
        ON
            content.DirectoryId = Directory.DirectoryId
WHERE
    content.RowNo =1 and
    (@locationUrlIdentifier or CategoryOrder = 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:48:07.443

你可以在一个查询中做到这一点：

```
Select Query ...where ... 
  and ((@locationUrlIdentifier is null) or (CategoryOrder = 1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:50:56.460

您可以使用 NULLIF 而不是 IS NULL

参考：[检查存储过程中的参数是否为空或为空](https://stackoverflow.com/questions/9855331/how-to-check-if-a-parameter-is-null-or-empty-sql)

[http://msdn.microsoft.com/en-us/library/ms177562.aspx](http://msdn.microsoft.com/en-us/library/ms177562.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:54:32.450

或者，您可以使用[ISNULL()](http://msdn.microsoft.com/en-us/library/ms184325.aspx)检查，然后将 null 更改为空字符串

```
IF (ISNULL(@locationUrlIdentifier,'') = '') 
```

或者甚至在此检查之前，如果仍然存在问题，您可以使用`ISNULL()`将 from 转换为空字符串`NULL`

# xml - 大型 XML 文件的深度优先读取

> ID：12494870
> 
> 赞同：2
> 
> 时间：2012-09-19T12:39:27.653
> 
> 标签：xml, xslt, sax, depth-first-search

我需要处理一堆非常大的 XML 文件并首先读取每个元素。由于尺寸的原因，任何`DOM`解决方案都是毫无疑问的，而且由于实际需要的元素不是“叶子”而是它的父元素，事情变得更加复杂。

更具体地说，这些文件的结构类似于

```
 <Level 1>
        ...
        <Level 2>
            ...
            <Level N-1>
                <value>...</value>
                <value>...</value>
                ...
                <value>...</value>
            </Level N-1>
            <Level N-1>
                <value>...</value>
                <value>...</value>
                ...
                <value>...</value>
            </Level N-1>
            ...
            <Level N-1>
                <value>...</value>
                <value>...</value>
                ...
                <value>...</value>
            </Level N-1>
            ...
        </Level 2>
    </Level 1> 
```

在上述每个文件中，`<Level N-1>`需要单独读取元素（每个都包括所有相应的`<value>`元素）。深度 ,`N`在每个文件中和文件之间都不同，因此它本质上是未知的，`XML`标签名称也是如此。`<value>`由于元素也存在于更高级别（即，它们不构成`Level N`已达到的保证） ，事情变得更加复杂。

以字符串形式读取特定深度的整个 XML 元素的快速解决方案类似于

```
int level = 0;  // The base level of the element, could be at any depth
Reader in = ... // The reader to the input
ByteArrayOutputStream outStream = new ByteArrayOutputStream();
PrintStream out = new PrintStream(outStream);
XMLEventReader reader = XMLInputFactory.newInstance().createXMLEventReader(in);
XMLEventWriter writer = XMLOutputFactory.newInstance().createXMLEventWriter(out);
XMLEvent event;

while ((level > 0) && reader.hasNext());
{
    event = reader.nextEvent();

    if (event.isStartElement())
    {
        level++;
    }
    else if (event.isEndElement())
    {
        level--;
    }

    writer.add(event);
}

writer.flush();

String element = new String(outStream.toByteArray()); 
```

但是，如果调用代码不知道`Level N-1`已经到达某个元素并且它前进到`Level N`（即，到`<value>`元素），则上述内容没有帮助。

一个`SAX`解决方案将是理想的，但即使通过`XSLT`模板预处理文件也是可以接受的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:03:32.300

想要的 XSLT 预处理在纯 XSLT 1.0 或 XSLT 2.0 中是不可能的，因为 XSLT 处理器（1.0 或 2.0）通常会在内存中生成整个 XML 文档的表示（不一定是 DOM）。

在**[XSLT 3.0](http://www.w3.org/TR/xslt-30/#streaming)**（仍然是 WD）中，流将作为语言的一部分，但是 W3C XSLT WG 仍在积极开发中，规范还不稳定。

Saxon 具有**[流模板形式的流扩展](http://www.saxonica.com/documentation/sourcedocs/streaming/streaming-templates.xml)**，这些模板处于“可流模式”：

```
<xsl:mode name="s" streamable="yes"/> 
```

使用它可以生成 XML 文档，每个文档只包含以“N-1 级”元素为根的子树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:45:36.027

`<value>`如果我正确理解了您的问题，那么当您到达标签并完成关卡标签时，您将难以区分

当您识别出一个事件时，您可以从中获取更多信息，例如名称：

```
 if (event.isStartElement()) {
    StartElement element = (StartElement) event;
    System.out.println("Start Element: " + element.getName());
  } 
```

如果你真正想要的是这之前的最后一个关卡，当然你必须坚持下去。

# iphone - UITableView 上的 pushViewController

> ID：12494873
> 
> 赞同：1
> 
> 时间：2012-09-19T12:39:36.097
> 
> 标签：iphone, objective-c

我有一个带有 3 个视图/选项卡的 TabBarController...在一个选项卡上我有一个 UITableView。现在我想如果用户点击一个单元格切换到一个详细视图......我已经用这个代码试过了：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
DetailViewController *nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"detailView"];

[self.navigationController pushViewController:nextController animated:YES];

} 
```

但它确实有效……有什么想法吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:40:44.570

您需要将表格视图控制器嵌入到导航控制器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:56:06.803

如果您想使用导航控制器，请这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
//for home tab.. u want to add navigation controller 
YourTableViewController *objviewController = [[[YourTableViewController alloc] initWithNibName:@"YourTableViewController_iPhone" bundle:nil] autorelease];
UINavigationController *navCtrl = [[UINavigationController alloc] initRootViewController:objviewController]; 

//for tab2...
YourSecondViewController *objYourSecondViewController =  [[[YourTableViewController alloc] initWithNibName:@"YourSecondViewController_iPhone" bundle:nil] autorelease];

//for  tab3...
YourThirdViewController *objYourThirdViewController =  [[[YourThirdViewController alloc] initWithNibName:@"YourThirdViewController_iPhone" bundle:nil] autorelease];

self.tabBarController = [[[UITabBarController alloc] init] autorelease];
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navCtrl,objYourSecondViewController,objYourThirdViewController,nil];

self.window.rootViewController=self.tabBarController;
  [self.window makeKeyAndVisible];
return YES; 
```

}

* * *

但是如果不需要导航控制器，你也可以添加：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  DetailViewController *nextController = [self.storyboard instantiateViewControllerWithIdentifier:@"detailView"];

  [self.view addSubView:nextController];
} 
```

# sencha-touch-2 - Sencha Touch 2 使用背景图像实例化组件

> ID：12494874
> 
> 赞同：0
> 
> 时间：2012-09-19T12:39:36.597
> 
> 标签：sencha-touch-2, stylesheet, loading, synchronous

我现在正在使用`Sencha Touch 2`组件。

我面临以下问题：

我使用样式表为我的组件设置了背景图像。我的整个场景由几个具有背景图像的组件/容器组成。当我实例化我的场景时——图像加载过程是异步的——即显示我的场景，然后加载并显示场景中的后续图像。

我想知道如何等到我的所有图像都加载完毕后再显示我的场景。事实上，我可以使用`Ext.Img`类及其`load`事件，但这是我不想做的。我需要使用样式表来设置我的图像（作为背景）的样式。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T06:08:01.507

要在不同的组件/容器上添加背景图像，请像这样定义您的**CSS**：-

```
 .x-panel{
   background:url(image.jpg)no-repeat center;
  }

 .x-scroll-container{
  background:url(image.jpg)no-repeat center;
  }
  .x-tab.panel{
   background:url(image.jpg)no-repeat center;
  } 
```

在**head**部分的**index.html**中包含此**CSS**：-

 ****```
 <link rel="stylesheet" type="text/css" href="style.css"/> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:24:35.347

如果图像很小，请尝试将它们嵌入为 base64 编码字符串。并像使用它们一样

```
background: transparent url(data:image/png;base64,LONG-STRING-OF-BASE64-TEXT) 
```

在 CSS 中。****

# python - 混淆矩阵错误：图像数据的尺寸无效

> ID：12494887
> 
> 赞同：1
> 
> 时间：2012-09-19T12:40:26.933
> 
> 标签：python, matplotlib, confusion-matrix

我正在使用混淆矩阵来衡量我的分类器的性能。这个例子对我来说很好用（[它来自这里](https://stackoverflow.com/questions/5821125/how-to-plot-confusion-matrix-with-string-axis-rather-than-integer-in-python)），但我一直都在`TypeError: Invalid dimensions for image data`

```
from numpy import *
import matplotlib.pyplot as plt
from pylab import *

conf_arr = [[50.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [3.0, 26.0, 0.0, 0.0, 0.0, 1.0, 0.0], [0.0, 0.0, 10.0, 0.0, 0.0, 0.0, 0.0], [4.0, 1.0, 0.0, 5.0, 0.0, 0.0, 0.0], [3.0, 0.0, 1.0, 0.0, 6.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 47.0, 0.0], [2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 8.0]]

norm_conf = []
for i in conf_arr:
        a = 0
        tmp_arr = []
        a = sum(i,0)
        for j in i:
                tmp_arr.append(float(j)/float(a))
        norm_conf.append(tmp_arr)

plt.clf()
fig = plt.figure()
ax = fig.add_subplot(111)
res = ax.imshow(array(norm_conf), cmap=cm.jet, interpolation='nearest')
cb = fig.colorbar(res)
savefig("confmat.png", format="png") 
```

我是 python 和 matplotlib 的新手。有什么帮助吗？

Matplot 版本是 1.1.1。这是完整的回溯：

在 res =... 我得到

```
TypeError      Traceback (most recent call last)
    C:\Python27\lib\site-packages\SimpleCV\Shell\Shell.pyc in <module>()
    ----> 1 res = ax.imshow(array(norm_conf), cmap=cm.jet, interpolation='nearest')

C:\Python27\lib\site-packages\matplotlib\axes.pyc in imshow(self, X, cmap, norm, aspect, interpolation, alpha, vmin, vmax, origin, extent, shape, filternorm, filter
rad, imlim, resample, url, **kwargs)
   6794                        filterrad=filterrad, resample=resample, **kwargs)
   6795
-> 6796         im.set_data(X)
   6797         im.set_alpha(alpha)
   6798         self._set_artist_props(im)

C:\Python27\lib\site-packages\matplotlib\image.pyc in set_data(self, A)
    409         if (self._A.ndim not in (2, 3) or
    410             (self._A.ndim == 3 and self._A.shape[-1] not in (3, 4))):
--> 411             raise TypeError("Invalid dimensions for image data")
    412
    413         self._imcache =None

TypeError: Invalid dimensions for image data

SimpleCV:105> cb = fig.colorbar(res) 
```

对于 print norm_conf 我现在得到结果： `[[1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],...]]`。我纠正了缩进问题。但我的困惑 .png 非常扭曲。此外，我应该如何继续标记矩阵中的正方形？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:03:20.273

这对我来说很好（matplotlib 1.1.1rc）。最初我希望你确认你的 matplotlib 版本并发布整个回溯——“回溯”是指 TypeError 行之前的几行，它们显示了导致错误的原因——这仍然是一个好主意，但我想我明白了什么问题可能是。

`norm_conf`如果以某种方式没有被填充，这是你会得到的错误（即`norm_conf = []`）：

```
Traceback (most recent call last):
  File "mdim2.py", line 19, in <module>
    res = ax.imshow(array(norm_conf), cmap=cm.jet, interpolation='nearest')
  File "/usr/lib/pymodules/python2.7/matplotlib/axes.py", line 6796, in imshow
    im.set_data(X)
  File "/usr/lib/pymodules/python2.7/matplotlib/image.py", line 411, in set_data
    raise TypeError("Invalid dimensions for image data")
TypeError: Invalid dimensions for image data 
```

您的代码看起来可能有一些缩进问题，这在使用混合制表符和空格时经常发生。因此，我建议 (1) 尝试`python -tt yourprogramname.py`查看是否存在空格错误，以及 (2) 确保您始终使用 4 空格制表符。

# java - 在Java中查找一个字符串并替换另一个字符串

> ID：12494889
> 
> 赞同：-5
> 
> 时间：2012-09-19T12:40:27.793
> 
> 标签：java, string, replace

我有一个包含以下内容的文本文件

```
{"sno":"1c8d1d7eaa32ff3f58a8822111276d5a","at":"app","tt":{"AppParam1":"AppParamValue1","AppParam2":"AppParamValue2"}},"c":{"dt":"Microsoft XDeviceEmulator","pn":"WP","pv":"8.0.9832.0"} 
```

在java中，我想找到'sno'，'pn'和'pv'并替换（我的意思是）当前上述文本文件的值

```
"sno" has value "1c8d1d7eaa32ff3f58a8822111276d5a"
"pn" has value "WP"
"pv" has value "8.0.9832.0" 
```

新价值观

```
"sno" has to be changed to "637829"
"pn"  has to be changed to "XYZ"
"pv" has to be changed to "2.2.4.0" 
```

非常感谢您的帮助 ！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:44:31.410

那是一个 JSON 对象。

将该字符串转换为 JSON 对象，更改值，然后再次将其转换为字符串。

在这里您可以阅读 Java 中的 JSON 对象：http: [//www.json.org/java/](http://www.json.org/java/)

这里有一个关于如何使用它们的简单教程：http: [//answers.oreilly.com/topic/257-how-to-parse-json-in-java/](http://answers.oreilly.com/topic/257-how-to-parse-json-in-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:46:10.193

您可以将其转换为 JSON，进行更改，然后将其转换回字符串。或者如果你真的想自己替换这些值，你可以使用这些行：

```
yourstring = yourstring.replaceFirst("\"sno\":\"[^\"]+\"", "\"sno\":\"637829\"");
yourstring = yourstring.replaceFirst("\"pn\":\"[^\"]+\"", "\"pn\":\"XYZ\"");
yourstring = yourstring.replaceFirst("\"pv\":\"[^\"]+\"", "\"pv\":\"2.2.4.0\""); 
```

仅当无法在字符串的其他位置找到这些键时

# c# - ASP.net OleDbCommand Oracle SQL 没有返回任何有效查询的结果

> ID：12494890
> 
> 赞同：1
> 
> 时间：2012-09-19T12:40:29.940
> 
> 标签：c#, asp.net, sql, oracle

我正在尝试使用带有 C# 代码隐藏的 ASP.net 中的 OleDbCommand 从 SQL 查询中读取结果。我正在使用以下 Oracle SQL 语句，该语句在 Oracle SQL Developer 中有效且工作正常：

```
WITH "bis" AS
    (SELECT v.name AS "vendor", 
    SUM(CASE WHEN i.bi_rating=5 THEN 1 ELSE 0 END) AS "bi5", 
    SUM(CASE WHEN i.bi_rating=6 THEN 1 ELSE 0 END) AS "bi6", 
    SUM(CASE WHEN i.bi_rating=7 THEN 1 ELSE 0 END) AS "bi7" 
    FROM incident_tbl i, vendor_tbl v 
    WHERE i.vendor_code=v.vendor_code 
    GROUP BY v.name 
    ORDER BY v.name) 
SELECT DISTINCT 
    "bis"."vendor", 
    "bis"."bi5", 
    "bis"."bi6", 
    "bis"."bi7", 
    ("bis"."bi5"+"bis"."bi6"+"bis"."bi7") AS "total" 
FROM "bis" 
WHERE "vendor"!='[No Vendor]' 
ORDER BY "total" DESC 
```

这会产生 92 行的正确结果。但是，当我在 ASP.net 页面上运行它时，它返回零行。我什至将查询隔离到一个测试方法中尝试对其进行排序：（`con`是一个已经存在的工作连接字符串）

```
protected void test()
    {
        OleDbCommand sql = new OleDbCommand("WITH \"bis\" AS (SELECT v.name AS \"vendor\", SUM(CASE WHEN i.bi_rating=5 THEN 1 ELSE 0 END) AS \"bi5\", SUM(CASE WHEN i.bi_rating=6 THEN 1 ELSE 0 END) AS \"bi6\", SUM(CASE WHEN i.bi_rating=7 THEN 1 ELSE 0 END) AS \"bi7\" FROM incident_tbl i, vendor_tbl v WHERE i.vendor_code=v.vendor_code GROUP BY v.name ORDER BY v.name) SELECT DISTINCT \"bis\".\"vendor\", \"bis\".\"bi5\", \"bis\".\"bi6\", \"bis\".\"bi7\", (\"bis\".\"bi5\"+\"bis\".\"bi6\"+\"bis\".\"bi7\") AS \"total\" FROM incident_tbl i, \"bis\" WHERE \"vendor\"!='[No Vendor]' ORDER BY \"total\" DESC", con);
        try
        {
            if (con.State == ConnectionState.Closed)
                con.Open();

            OleDbDataReader reader = sql.ExecuteReader();

            while (reader.Read())
            {
                // Show on a temporary label for testing
                lblDebug.Text += "<br />New row... vendor: " + reader["vendor"].ToString();
            }
        }
        catch (Exception ex)
        {
            lblDebug.Text += "<br />ERROR WITH TEST METHOD: " + ex;
        }
        finally
        {
            if (con.State == ConnectionState.Open)
                con.Close();
        }
    } 
```

问题是，没有抛出异常，只有零结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:01:55.383

尝试

```
SELECT DISTINCT  
  vendor,  
  bi5,  
  bi6,  
  bi7,  
  (bi5+bi6+bi7) total  
FROM  
  (SELECT v.name vendor,  
   SUM(CASE WHEN i.bi_rating=5 THEN 1 ELSE 0 END) bi5,  
   SUM(CASE WHEN i.bi_rating=6 THEN 1 ELSE 0 END) bi6,  
   SUM(CASE WHEN i.bi_rating=7 THEN 1 ELSE 0 END) bi7  
   FROM incident_tbl i, vendor_tbl v  
   WHERE i.vendor_code=v.vendor_code  
   GROUP BY v.name  
   ORDER BY v.name) bis
WHERE vendor!='[No Vendor]'  
ORDER BY total DESC 
```

# testing - 测试 sencha 应用程序

> ID：12494891
> 
> 赞同：0
> 
> 时间：2012-09-19T12:40:35.410
> 
> 标签：testing, mobile, extjs

我想开发一个使用图片并对其进行一些修改的煎茶应用程序。我希望用户能够通过手机摄像头或手机中已有的照片来选择照片。

我搜索了所有 sencha 文档并找到了执行此第一步的解决方案，但我不知道如何测试它。

我的意思是如何在手机上测试我的应用程序？

如果有人能帮助我如何在手机上测试一个简单的 hello world sencha 应用程序，我将非常感激，因为我真的被困在这一步了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:45:05.340

为了在实际设备上对其进行测试，您必须使用 PhoneGap（现在称为 Apache Cordova）。我不确定您拥有哪种设备，但这里有一个教程列表可以帮助您入门：http: [//docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html](http://docs.phonegap.com/en/2.0.0/guide_getting-started_index.md.html)

然后您所要做的就是将 Sencha 生成的任何文件移动到 assets 文件夹中。

如果您正在寻找有关如何开始使用 Sencha 的教程，这里有一个很好的教程： [http ://www.sencha.com/learn/hello-world/](http://www.sencha.com/learn/hello-world/)

# r - 构造条件密度的导数

> ID：12494898
> 
> 赞同：2
> 
> 时间：2012-09-19T12:41:04.410
> 
> 标签：r, derivative

我正在使用`npcdens`from np 包在协变量 x 上构建 y 的条件密度。但是，我需要这个密度的对数关于 y 的导数。R中有什么方法可以得到这个吗？

```
 bw   <- npcdensbw(formula=y ~ x1+x2+x3)
  fhat <- npcdens(bws=bw,gradients=TRUE)
  grad.fhat <- gradients(npcdens(bws=bw,gradients=TRUE)) 
```

它返回关于 的梯度`x1`，`x2`并且`x3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:07:45.703

我们可以使用这个示例数据集吗？

```
dta = data.frame(expand.grid(x1=1:5,x2=2:6,x3=5:10))
dta$y = with(dta,x1+2*x2 + 3*x3^2)
head(dta)
  x1 x2 x3  y
1  1  2  5 80
2  2  2  5 81
3  3  2  5 82
4  4  2  5 83
5  5  2  5 84
6  1  3  5 82 
```

y 是“密度”的值。估计条件带宽对象

```
bw <- npcdensbw(formula = y ~ x1+x2+x3,data=dta) 
```

看看渐变

```
head(gradients(npcdens(bws=bw,gradients=TRUE)))

              [,1]          [,2]           [,3]
[1,] -2.024422e-15 -2.048994e-50 -1.227563e-294
[2,] -1.444541e-15 -1.994174e-50 -1.604693e-294
[3,] -1.017979e-31 -1.201719e-50 -1.743784e-294
[4,]  1.444541e-15 -6.753912e-64 -1.604693e-294
[5,]  2.024422e-15  1.201719e-50 -1.227563e-294
[6,] -2.024422e-15 -3.250713e-50 -1.227563e-294 
```

“关于 y 的导数”是什么意思？这是一个函数 g(x1,x2,x3)，因此您只能对这 3 个维度进行导数。关于您问题的“y 日志”部分，可能是这样吗？

```
bw <- npcdensbw(formula = log(y) ~ x1 + x2 + x3,data=dta) 
```

我从来没有使用过这个包，所以这些是非从业者的想法。我猜你看过 中的例子`help(npcdensbw)`？

# button - 引导不可选择的单选按钮

> ID：12494901
> 
> 赞同：1
> 
> 时间：2012-09-19T12:41:06.840
> 
> 标签：button, twitter-bootstrap, radio

我有这个 btn 组：

```
 <div class="control-group">
                <label class="control-label">Sex</label>
                <div class="controls">
                    <input id="filtro_sexo" type="hidden" />
                    <div class="btn-group" data-toggle-name="filter_sex" data-toggle="buttons-radio">
                        <button value="Male" type="button" class="btn">Male</button>
                        <button value="Female" type="button" class="btn">Female</button>
                    </div>
                </div>
            </div> 
```

问题是我需要用户能够选择或取消选择该选项。用户应该能够选择一个选项，或者没有。但 data-toggle = "buttons-radio" 不会让我取消选择所选选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T19:22:53.707

我通过使用 [data-toggle=buttons-checkbox]、添加自定义属性 [data-single-select] 并编写几行 jQuery 来实现这一点：

HTML：

```
<div class="btn-group" data-toggle="buttons-checkbox" data-single-select>
    <button class="btn">...</button>
    <button class="btn">...</button>
    <button class="btn">...</button>
</div> 
```

jQuery：

```
$("[data-toggle='buttons-checkbox'][data-single-select] .btn").live('click', function(evt){
    $(this).siblings().removeClass('active');
}); 
```

@Rafael 使用 [input type="radio"] 看起来太难看了。这就是我们使用 Bootstrap 的原因。

# android - 网络在 AsyncTask 和 NetworkOnMainThreadException 错误

> ID：12494902
> 
> 赞同：1
> 
> 时间：2012-09-19T12:41:07.140
> 
> 标签：android, android-asynctask, android-networking

我想从远程数据库中获取一些数据，并且我的活动的 AsyncTask 子类中有一些网络，但是当我尝试加载我的程序时，它显示 NetworkOnMainThreadException。

这是我的代码：

```
public class MyMapLocationActivity extends MapActivity {

private MapView mapView;
private static String url_product_details = "http://myurl.com/readfromdb";
private static final String TAG_SUCCESS = "success";
private static final String TAG_LATITUDE = "latitude";
private static final String TAG_LONGITUDE = "longitude";
private static final String TAG_POINT = "point";

    JSONParser jsonParser = new JSONParser();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main); 

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    ReadLocations Read = new ReadLocations();
    Read.execute();
}

//And my networking AsyncTask:

class ReadLocations extends AsyncTask<String, String, String> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

   @Override
    protected String doInBackground(String... args) {
       Log.d("debug", "START DOINBACKGROUND");

       runOnUiThread(new Runnable() {
           public void run() {
               // Check for success tag
               int success;
               try {

                   // Building Parameters
                   List<NameValuePair> params = new ArrayList<NameValuePair>();
                   params.add(new BasicNameValuePair("id", "16"));

                   // getting product details by making HTTP request
                   // Note that product details url will use GET request
                   Log.d("debug", "before http request");

                   JSONObject json = jsonParser.makeHttpRequest(
                           url_product_details, "POST", params);
                   Log.d("debug", "after http request");

                   // json success tag
                   success = json.getInt(TAG_SUCCESS);

                   if (success == 1) {
                       // successfully received product details
                       JSONArray productObj = json
                               .getJSONArray(TAG_POINT); // JSON Array

                       // get first product object from JSON Array
                       JSONObject product = productObj.getJSONObject(0);

                   }else{
                       // product with pid not found
                   }
               } catch (JSONException e) {
                   e.printStackTrace();
               }
           }
       });

        return null; 
    }

  @Override
    protected void onPostExecute(String text) {
        // dismiss the dialog once done
   Log.d("debug", "ONPOSTEXECUTE");

    } 
```

LogCat 显示“http 请求之前”，但不显示我的“http 请求之后”检查。

怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:42:40.773

您的网络代码在应用程序的**MainUiThread**上，而不是在工作线程中......

消除

```
runOnUiThread(new Runnable() {
           public void run() { 
```

从`doInBackground()`

并将**WebRequest**代码仅放在`doInBackground()`AsyncTask..

**更新：**

实际上，您的**AsyncTask**实现`doInBackground()`是错误的。作为 `doInBackground()`在工作线程中运行的冗长和网络相关操作。而且您正在尝试使用不符合规则的**MainUiThread**形式运行它`runOnUiThread()`。如果您想让任何与 UI 相关的工作在`onPostExecute()`ASyncTask`onPreExecute()`和其他方法中进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:45:15.477

试试这个代码：

```
@Override
protected String doInBackground(String... args) {
   Log.d("debug", "START DOINBACKGROUND");

           // Check for success tag
           int success;
           try {

               // Building Parameters
               List<NameValuePair> params = new ArrayList<NameValuePair>();
               params.add(new BasicNameValuePair("id", "16"));

               // getting product details by making HTTP request
               // Note that product details url will use GET request
               Log.d("debug", "before http request");

               JSONObject json = jsonParser.makeHttpRequest(
                       url_product_details, "POST", params);
               Log.d("debug", "after http request");

               // json success tag
               success = json.getInt(TAG_SUCCESS);

               if (success == 1) {
                   // successfully received product details
                   JSONArray productObj = json
                           .getJSONArray(TAG_POINT); // JSON Array

                   // get first product object from JSON Array
                   JSONObject product = productObj.getJSONObject(0);

               }else{
                   // product with pid not found
               }
           } catch (JSONException e) {
               e.printStackTrace();
           }

           return null; 
} 
```

您的代码的问题是您仅在主 UI 线程上运行网络功能，使用 this : `runOnUiThread(new Runnable() {...}`。

doInBackground() 自动在单独的后台非 ui 线程上运行，您无需显式创建线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:43:03.063

那是因为您在 UI 线程上运行网络代码......您在 UI 线程`doInBackground`上显式运行网络代码。

# javascript - 展开维基百科类别树的所有类别

> ID：12494905
> 
> 赞同：2
> 
> 时间：2012-09-19T12:41:09.377
> 
> 标签：javascript, jquery, ajax, firefox, wikipedia

我正在尝试通过 Web 控制台执行此操作（使用 Firefox，但我当然愿意在必要时进行更改）。

我想要做的是基本上一次单击页面上的所有“加号”。例如，请参见此处：[http](http://de.wikipedia.org/wiki/Kategorie:Volkswirtschaftslehre) ://de.wikipedia.org/wiki/Kategorie:Volkswirtschaftslehre （请原谅我链接了一个德国网站，但英文维基百科现在似乎使用了不同的系统，我需要这样做德国人……）

这是我已经走了多远：当我进入时

```
var = document.getElementsByClassName("CategoryTreeToggle"); 
```

我得到了包含 CategoryTreeToggle 的所有元素的变量 test。但是，显然没有为这些定义 onclick 例程。

谁能帮助我并告诉我从那里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:47:44.547

[MediaWiki](http://www.mediawiki.org/)使用[jQuery](http://jquery.com/)，这使得这很容易：

```
$( '.CategoryTreeToggle' ).click(); 
```

或者，如果您只想单击那些尚未展开的切换：

```
$( '.CategoryTreeToggle[title="ausklappen"]' ).click(); 
```

[但是使用CatScan](http://meta.wikimedia.org/wiki/CatScan)不是更容易吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-16T19:44:55.080

对于英文维基百科，您可以输入

```
$( '.CategoryTreeToggle[title="expand"]' ).click(); 
```

# sockets - 操作系统如何在接受同一个套接字的多个进程之间进行负载平衡？

> ID：12494914
> 
> 赞同：8
> 
> 时间：2012-09-19T12:41:41.057
> 
> 标签：sockets, node.js, networking, concurrency

我正在阅读 Node.js 中集群模块的文档：
[http ://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

它声称以下内容：

> 当多个进程都`accept()`在同一个底层资源上运行时，操作系统会非常有效地在它们之间进行负载平衡。

这听起来很合理，但即使经过几个小时的谷歌搜索，我也没有找到任何文章或任何东西可以证实这一点，或者解释这个负载平衡逻辑在操作系统中是如何工作的。

另外，什么操作系统在做这种有效的负载平衡？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T21:00:08.363

“负载平衡”可能是一个有点糟糕的词选择，本质上它只是操作系统如何选择唤醒和/或接下来运行的进程的问题。通常，进程调度程序会尝试根据标准选择要运行的进程，例如将相同份额的 cpu 时间分配给具有相同优先级的进程、cpu/内存位置（不要在 cpu 周围反弹进程）等。无论如何，通过谷歌搜索你会发现很多关于进程调度算法和实现的资料。

现在，对于accept() 的特殊情况，这还取决于操作系统如何实现唤醒等待accept() 的进程。

*   一个简单的实现是唤醒在 accept() 调用中阻塞的每个进程，然后让调度程序选择它们运行的​​顺序。

*   以上很简单，但会导致“雷声”问题，因为只有第一个进程成功接受连接，其他进程又回到阻塞状态。一种更复杂的方法是让操作系统只唤醒一个进程。在这里，可以通过询问调度程序来选择唤醒哪个进程，或者仅通过在接受阻塞时（）-for-this-socket 列表中选择第一个进程来选择。后者是十多年前 Linux 所做的，基于其他人已经发布的[链接。](https://www.citi.umich.edu/u/cel/linux-scalability/reports/accept.html)

*   请注意，这只适用于阻塞 accept(); 对于非阻塞accept()（我确定这是node.js正在做的事情），问题就在于select()/poll()/whatever中哪个进程阻塞了事件。poll()/select() 的语义实际上要求所有这些都被唤醒，所以你又遇到了雷鸣般的羊群问题。对于 Linux，以及可能以类似方式具有系统特定高性能轮询接口的其他系统，可以通过使用单个共享 epoll fd 和边缘触发事件来避免雷鸣般的羊群。在这种情况下，事件将仅传递到 epoll_wait() 上阻塞的进程之一。我认为，类似于阻止accept()，选择将事件传递到的进程，

So at least for Linux, both for the blocking accept() and the non-blocking accept() with edge triggered epoll, there is no scheduling per se when choosing which process to wake. But OTOH, the workload will probably be quite evenly balanced between the processes anyway, as essentially the system will round-robin the processes in the order in which they finish their current work and go back to blocking on epoll_wait().

# extjs3 - Extjs 组合框未在 Internet Explorer 中加载数据

> ID：12494916
> 
> 赞同：0
> 
> 时间：2012-09-19T12:41:43.067
> 
> 标签：extjs3

以下商店在 google chrome 和 firefox 中运行，它不适用于 IE 8

```
 var store = new Ext.data.JsonStore({
 fields: ['productname'],
 url: 'productnames.jsp',

autoLoad: true });new Ext.form.ComboBox({
            fieldLabel: 'Product Name',
            hideTrigger: true, 
            name: 'productname',
            id:'productname',
            mode: 'local',
            store: store,
            displayField: 'productname',
            triggerAction: 'all',
            emptyText:'Select Product',
            allowBlank:     false,
            editable:       false,
            forceSelection: true,

            listeners:{select:{fn:function() {
            var selectvalue=this.getValue();
            store1.load({   params: {productname: selectvalue} });

            } }},
            anchor:'95%'
           }) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:27:04.210

根据您的代码，一切看起来应该可以正常工作。我会看看你返回的 JSON。它的末尾可能有一个额外的“，”或其他东西。通常 Internet Explorer 的最大问题是脚本/返回/等末尾的额外逗号。而 Firefox 和 Chrome 则没有。但是使用上面的代码，看起来一切都应该正常工作。

# c# - 序列化/反序列化双值到/从十六进制格式

> ID：12494917
> 
> 赞同：1
> 
> 时间：2012-09-19T12:41:43.887
> 
> 标签：c#, xml, serialization

`XmlSerializer`我使用and序列化/反序列化包含双精度值的对象`StreamWriter`。在生成的`.xml`文件中，我发现存储为十进制值的双精度值。我有没有办法以十六进制形式生成双精度而不是十进制？

一些代码。

**序列化的类**

```
[Serializable()]  
public class Variable
{        
    public int shift;
    public int size;
    public int min;
    public int max;
    public string name;
    public string del;

    public Variable()
    {
        shift = 26;
        size = 0;
        min = 0;
        max = 0;
        name = "noname";
        del = "-";
    }
} 
```

**序列化器类**

```
/// <summary>
/// class to serialize/deserialize another class
/// </summary>
public class serializator
{
    private serializator()
    {
    }

    /// <summary>
    /// serializator
    /// </summary>
    /// <param name="fname">filename to serialize</param>
    /// <param name="z">object to serialize</param>
    static public void ser(string fname, object z)
    {
        System.Type st = z.GetType();
        XmlSerializer xSer = new XmlSerializer(st);
        StreamWriter sWri = new StreamWriter(fname);
        xSer.Serialize(sWri, z);
        sWri.Close();
    }

    /// <summary>
    /// deserializator
    /// usage: fooclass fc = (fooclass)serializator.dser("fname.xml", fc);
    /// </summary>
    /// <param name="fname">filename to dser</param>
    /// <param name="z">object to grab type</param>
    /// <returns></returns>
    static public object dser(string fname, object z)
    {
        if (fname != null && fname != "" && z != null)
        {
            try
            {
                object rez = new object();
                XmlSerializer xSer = new XmlSerializer(z.GetType());
                StreamReader sRea = new StreamReader(fname);
                rez = xSer.Deserialize(sRea);
                sRea.Close();
                return rez;
            }
            catch(Exception e)
            {
                System.Windows.Forms.MessageBox.Show("config ouch\r\n"+e.Message);
                return null;
            }
        }
        else
        {
            return null;
        }
    }
} 
```

**来自主程序的一段代码**

```
Variable v = new Variable();
serializator.ser("foo.xml", v); 
```

**生成的 xml 文件**

```
<?xml version="1.0" encoding="utf-8"?>
  <Variable>
    <shift>26</shift>
    <size>0</size>
    <min>0</min>
    <max>0</max>
    <name>noname</name>
    <del>-</del>
  </Variable> 
```

在这种特殊情况下，我想看到`<shift>1A</shift>`or 。有可能吗？`<shift>0x1A</shift>``<shift>26</shift>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:00:28.923

您可以使用“变量”类的代码而不是您的代码：

```
[Serializable()]
public class Variable
{
    int _shiftInt;

    public string shift
    {
        get
        {
            return _shiftInt.ToString("X");
        }
        set
        {
            _shiftInt = int.Parse(value, System.Globalization.NumberStyles.HexNumber);
        }
    }

    public int size { get; set; }
    public int min { get; set; }
    public int max { get; set; }
    public string name { get; set; }
    public string del { get; set; }

    public Variable()
    {
        _shiftInt = 26;
        size = 0;
        min = 0;
        max = 0;
        name = "noname";
        del = "-";
    }
} 
```

# python - 在 Django 中为随机单词赋值

> ID：12494926
> 
> 赞同：1
> 
> 时间：2012-09-19T12:41:58.433
> 
> 标签：python, django, view, model

我需要一点帮助来做这件事。我创建了一个随机生成问题的民意调查，说“你喜欢‘蓝色’吗？” 用户将从 1-5 对其进行评分。将出现一个新问题，例如“你觉得‘绿色’怎么样？” 单词是从数组中随机抽取的。

如何开始编写视图/模型来**存储**用户为每个单词选择的值？输出应该是这样的（分数会为每种颜色取平均值）：

```
Blue 3.4
Green 4.1
Red 2.8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:58:18.997

您可以创建一个模型来存储您的颜色：

```
class Color(models.Model):
    name = CharField(...) 
```

并将您的颜色存储在那里。

要使其可评分，只需使用 Django 的出色评分插件之一，例如[django-ratings](https://github.com/dcramer/django-ratings "django-评分")。当然，您也可以创建自己的评分应用程序，但我认为互联网上已经有很多这样的应用程序，那么为什么不使用呢？

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:49:04.870

本质上，您应该将颜色放在隐藏字段中或将其存储在会话中（参见[https://docs.djangoproject.com/en/dev/topics/http/sessions/](https://docs.djangoproject.com/en/dev/topics/http/sessions/)）

为了获得平均值，您的模型必须存储所有投票或存储当前平均值 + 到目前为止的投票数，以便您可以将新平均值计算为

```
new_avg = ((old_avg * votes) + new_vote) / (votes++)) 
```

有关处理 POST 请求，请参阅[https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.POST)

# c - c:cygwin-多重定义

> ID：12494928
> 
> 赞同：1
> 
> 时间：2012-09-19T12:42:02.933
> 
> 标签：c, cygwin, definitions

我有点卡住了。我几乎完成了这段代码，但是在尝试使其与 Windows 和 linux 兼容之后，我遇到了这个我无法解决的问题。我在这方面没有太多经验。以下是错误-

```
$ gcc client.c client.h clientdata.c clientdata.c -o client.exe
/tmp/ccHpxeKs.o:clientdata.c:(.text+0x0): multiple definition of `_handleSendingData'
/tmp/cclpyPee.o:clientdata.c:(.text+0x0): first defined here
/tmp/ccHpxeKs.o:clientdata.c:(.text+0xa9): multiple definition of `_handleRecievingData'
/tmp/cclpyPee.o:clientdata.c:(.text+0xa9): first defined here
/tmp/ccHpxeKs.o:clientdata.c:(.text+0xabb): multiple definition of `_replaceNewLineChar'
/tmp/cclpyPee.o:clientdata.c:(.text+0xabb): first defined here
/tmp/ccHpxeKs.o:clientdata.c:(.text+0xb1c): multiple definition of `_getMyTime' 
```

............

我有 4 个文件-client.c-

```
#include "client.h"
#ifdef _WIN32
#include "clientdata.c"
#endif //win32 
```

客户端.h-

```
#ifndef CLIENT
#define CLIENT

#include <errno.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <stdarg.h>
#include <signal.h>
#include <time.h>

#define MAXSIZE 2048
#define MILLION  1000000.0

#ifdef _WIN32

#include <winsock.h>
#pragma comment(lib, "wsock32.lib")

#else

#include <sys/socket.h>
#include <netdb.h>
#include <dirent.h>
#include <unistd.h>

#endif //win32

typedef enum {false = 0, true = 1, maybe = 2} bool;

struct messageNode
{
    struct timeval  *time1;
    struct timeval  *time2;
    int idNumber;
    char string[MAXSIZE];
    char stringClientArgs[MAXSIZE];
    struct messageNode* next;
    struct messageNode* moreNext;
    char redirectArgs[MAXSIZE];

} *head, *current;

int handleSendingData(struct messageNode *Node);
int handleRecievingData(struct messageNode *Node);
void printNode(struct messageNode *Node);
int setArgs(struct messageNode *Node, int command);
int setNode(struct messageNode* Node, int id);
int getArgs(struct messageNode* Node, char **newArgs);

#endif //CLIENT 
```

客户端数据.c-

```
#include "client.h"
#include "clientdata.h" 
```

客户端数据.h-

```
#ifndef CLIENTDATA
#define CLIENTDATA

#ifdef _WIN32
#include <process.h>
#endif //win32

void replaceNewLineChar(int count, ...);
void copyArray(char* str1, char* str2);
int addId(char *string, int id);
int getId(char *string);
int getReceivedArgs(char *string, char **newArgs, int number);
int getCommand(char* string);
int addToString(char *string, char *text);
int execute(char *cmd, char **args);
int getRedirectArgs(char *string, char **newArgs);
void getMyTime(struct timeval  *time);
double timeDifference(struct timeval  *start, struct timeval  *end);

#endif //CLIENTDATA 
```

我对这个领域非常陌生，并且已经查看了其他问题，但我没有在标题中声明和值，它们都是函数原型。所以迷路了！在我添加#ifdef win32 的东西之前一切正常 :( 但是当我试图将它改回来时，它仍然出现了这些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:51:13.277

仔细查看你的编译命令行：

```
gcc client.c client.h clientdata.c clientdata.c -o client.exe 
```

1.  您不需要将头文件传递给编译器。
2.  您不想两次传递相同的源代码（这会导致多次定义错误，因为其中的所有`extern`函数`clientdata.c`都定义了两次）。

你需要的只是：

```
gcc client.c clientdata.c -o client.exe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:45:46.927

看起来您多次包含相同的标题。我建议你在所有头文件中使用这样的东西：

```
#ifndef UNIQUE_ID_FOR_THIS_HEADER
// All your header code here
#endif 
```

PS：你永远不应该包含 .c 文件。如果该文件没有代码，请将其设为 .h 文件。

# python - 如何在 P4Python 中获取更改的类型

> ID：12494930
> 
> 赞同：2
> 
> 时间：2012-09-19T12:42:05.330
> 
> 标签：python, perforce, p4python

我正在尝试使用 P4Python，并希望找到一种方法来检查更改列表中每个文件的更改类型。我的意思是，我想知道它是否是修改，或者这个文件是否**标记为 Add**或**Marked for Delete**。

我的代码类似于

```
 p4.connect()
    clientSpec = p4.fetch_client()
    depotList = p4.run_opened("-c", changelistNumber)
    p4.disconnect() 
```

因此，我在更改列表中有文件列表，现在我可以遍历它们，例如，我希望删除**标记为删除**的文件。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T06:52:01.213

结果`p4.run_opened`是一个数组，每个打开的文件都有一个映射。此地图具有以下键：

```
'haveRev'
'rev'
'clientFile'
'client'
'user'
'action'
'type'
'depotFile'
'change' 
```

为了找出更改的类型，遍历数组并询问每个项目的“动作”。在我当前的一个更改列表中，打开第一个文件进行“编辑”：

```
import P4
p4 = P4.P4()
p4.connect()
p4.run_opened()[0]['action']
p4.disconnect() 
```

将返回：'编辑'

# php - 如何使用 mpdf 发送 pdf 电子邮件？

> ID：12494934
> 
> 赞同：4
> 
> 时间：2012-09-19T12:42:08.160
> 
> 标签：php, pdf-generation, email, mpdf

我使用 mpdf 创建 pdf 的示例编码是，（它工作正常）

```
 <? require_once('../mpdf.php');

$mpdf = new mPDF();

$mpdf->WriteHTML('<p>Your first taste of creating PDF from HTML</p>');

$mpdf->Output();
exit;

?> 
```

我发送电子邮件的示例编码：

```
 $em =//email address ;
    $subject = //subject;
    $message = //message;

    mail($em, $subject, $message, "From: MyDomain Webmaster<admin@mydomain.com>\nX-Mailer: PHP/" . phpversion()); 
```

我的问题是 pdf 是创建并直接在浏览器中打开的，如何将 pdf 文件作为电子邮件附件发送？

如果可能，请帮助我编写代码或只是帮助我提出一些建议，我将自己编写代码。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-16T09:01:39.950

来自 Wayback 机器（上面的链接）：[https ://web.archive.org/web/20151004121531/http://mpdf1.com/manual/index.php?tid=373](https://web.archive.org/web/20151004121531/http://mpdf1.com/manual/index.php?tid=373)

```
<?php

include("../mpdf.php"); //Include mPDF Class 

$mpdf=new mPDF(); // Create new mPDF Document

//Beginning Buffer to save PHP variables and HTML tags
ob_start(); 

// Function Date
$day = date('d');
$month = date('m');
$year = date('Y');

switch ($month)
{ 
case 1: $month = "January"; break;
case 2: $month = "February"; break;
case 3: $month = "March"; break;
case 4: $month = "April"; break;
case 5: $month = "May"; break;
case 6: $month = "June"; break;
case 7: $month = "July"; break;
case 8: $month = "August"; break;
case 9: $month = "September"; break;
case 10: $month = "October"; break;
case 11: $month = "November"; break;
case 12: $month = "December"; break;
}

echo "Hello World
Today is $month $day, $year";

$html = ob_get_contents();
ob_end_clean();
//Here convert the encode for UTF-8, if you prefer the ISO-8859-1 just change for $mpdf->WriteHTML($html);
$mpdf->WriteHTML(utf8_encode($html)); 

$content = $mpdf->Output('', 'S');

$content = chunk_split(base64_encode($content));
$mailto = 'mailto@mailto.com'; //Mailto here
$from_name = 'ACME Corps Ltd'; //Name of sender mail
$from_mail = 'mailfrom@mailfrom.com'; //Mailfrom here
$subject = 'subjecthere'; 
$message = 'mailmessage';
$filename = "yourfilename-".date("d-m-Y_H-i",time()); //Your Filename with local date and time

//Headers of PDF and e-mail
$boundary = "XYZ-" . date("dmYis") . "-ZYX"; 

$header = "--$boundary\r\n"; 
$header .= "Content-Transfer-Encoding: 8bits\r\n"; 
$header .= "Content-Type: text/html; charset=ISO-8859-1\r\n\r\n"; // or utf-8
$header .= "$message\r\n";
$header .= "--$boundary\r\n";
$header .= "Content-Type: application/pdf; name=\"".$filename."\"\r\n";
$header .= "Content-Disposition: attachment; filename=\"".$filename."\"\r\n";
$header .= "Content-Transfer-Encoding: base64\r\n\r\n";
$header .= "$content\r\n"; 
$header .= "--$boundary--\r\n";

$header2 = "MIME-Version: 1.0\r\n";
$header2 .= "From: ".$from_name." \r\n"; 
$header2 .= "Return-Path: $from_mail\r\n";
$header2 .= "Content-type: multipart/mixed; boundary=\"$boundary\"\r\n";
$header2 .= "$boundary\r\n";

mail($mailto,$subject,$header,$header2, "-r".$from_mail);

$mpdf->Output($filename ,'I');
exit;

?> 
```

# delphi - 如何使用 Align 属性调整 TFlowPanel 内的控件大小？

> ID：12494935
> 
> 赞同：2
> 
> 时间：2012-09-19T12:42:17.247
> 
> 标签：delphi, flowpanel

我`TDBChart`在`TFlowPanel`. 当用户点击其中一个时，我希望它填满整个`flow panel`客户区。但是，在运行时更改子控件的`visible`and属性似乎没有任何效果。这有什么特别的技巧吗？我找到了方法，但它似乎对控件的布局没有任何影响。这是我的活动的代码：`align``flow panel``Realign()``OnClick`

```
var
  AChart: TDBChart;
  V: Boolean;
  i: Integer;
begin
  AChart := TDBChart(Sender);
  if AChart.Align = alNone then
  begin
    V := False;
    AChart.Align := alClient;
  end else begin
    V := True;
    AChart.Align := alNone;
  end;
  for i := 0 to FlowPanel1.ControlCount - 1 do
    if FlowPanel1.Controls[i] is TDBChart then
      if FlowPanel1.Controls[i] <> AChart then
        FlowPanel1.Controls[i].Visible := V;
end; 
```

图表按预期隐藏或显示，但`ADBChart`不会填满整个`flow panel`客户区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:51:22.343

按照设计，`T(Custom)FlowPanel`使用子控件的自定义对齐方式，这是在重写`AlignControls`方法中实现的。

*你可以通过跳过*它来防止这种默认行为，从它的祖先那里退回来。此外，不需要隐藏所有相邻的控件。将点击的图表放在前面就足够了。

```
type
  TFlowPanel = class(Vcl.ExtCtrls.TFlowPanel)
  private
    FFlowDisabled: Boolean;
    procedure SetFlowDisabled(Value: Boolean);
  protected
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
  public
    property FlowDisabled: Boolean read FFlowDisabled write SetFlowDisabled;
  end;

...

{ TFlowPanel }

type
  TWinControlAccess = class(TWinControl);
  TAlignControls = procedure(Instance: TObject; AControl: TControl;
    var Rect: TRect);

procedure TFlowPanel.AlignControls(AControl: TControl; var Rect: TRect);
begin
  if FFlowDisabled then
    // Skip inherited in TCustomFlowPanel:
    TAlignControls(@TWinControlAccess.AlignControls)(Self, AControl, Rect)
  else
    inherited;
end;

procedure TFlowPanel.SetFlowDisabled(Value: Boolean);
begin
  if FFlowDisabled <> Value then
  begin
    FFlowDisabled := Value;
    Realign;
  end;
end;    

{ TForm1 }

procedure TForm1.DBChartClick(Sender: TObject);
const
  FlowAligns: array[Boolean] of TAlign = (alNone, alClient);
var
  Chart: TDBChart;
  Panel: TFlowPanel;
  DisableFlow: Boolean;
begin
  Chart := TDBChart(Sender);
  Panel := Chart.Parent as TFlowPanel;
  DisableFlow := not Panel.FlowDisabled;
  Chart.Align := FlowAligns[DisableFlow];
  Chart.BringToFront;
  Panel.FlowDisabled := DisableFlow;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:07:25.140

FlowPanel 不关心其控件的对齐设置，就像它不关心它们的位置一样 - 它只是为了流动它们而设计的。

一种解决方案可以是派生一个新类并覆盖`AlignControls`，并在其中调整将相应填充表面的控件的大小。举个例子：

```
type
  TFlowPanel = class(extctrls.TFlowPanel)
  protected
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
  end;

..

procedure TFlowPanel.AlignControls(AControl: TControl; var Rect: TRect);
var
  i, VisibleCount, VisibleControl: Integer;
begin
  VisibleCount := 0;
  VisibleControl := 0;
  for i := 0 to ControlCount - 1 do
    if Controls[i].Visible then begin
      Inc(VisibleCount);
      VisibleControl := i;
    end;

  if (VisibleCount = 1) and (Controls[VisibleControl] = AControl) and
      (AControl.Align = alClient) then begin
    // preserve 'Explicit..' settings
    AControl.ControlState := AControl.ControlState + [csAligning];
    AControl.SetBounds(1, 1, ClientWidth - 1, ClientHeight -1);
    AControl.ControlState := AControl.ControlState - [csAligning];
  end;

  inherited;
end; 
```

然后您可以将所有图表的点击事件设置为此处理程序：

```
var
  AChart: TTDBChart;

  procedure SetVisibility(Visible: Boolean);
  var
    i: Integer;
  begin
    for i := 0 to FlowPanel1.ControlCount - 1 do
      if FlowPanel1.Controls[i] is TDBChart then
        if FlowPanel1.Controls[i] <> AChart then
          FlowPanel1.Controls[i].Visible := Visible;
  end;

begin
  AChart := TDBChart(Sender);
  if AChart.Align = alNone then
  begin
    SetVisibility(False);
    AChart.Align := alClient;
  end else begin
    AChart.Align := alNone; // set before changing visible
    SetVisibility(True);
    AChart.SetBounds(0, 0, AChart.ExplicitWidth, AChart.ExplicitHeight);
  end;
end; 
```

我应该注意，这仅适用于固定大小的流程面板。

# visual-studio-2010 - 在 VS2010 项目中使用 Q_OBJECT 会产生未解决的外部问题

> ID：12494938
> 
> 赞同：4
> 
> 时间：2012-09-19T12:42:23.333
> 
> 标签：visual-studio-2010, qt, qmake, unresolved-external, moc

我试图在我的 Visual Studio 2010 Ultimate 项目中使用 Q_OBJECT 宏，它给了我未解决的外部错误：

```
1>Application.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall MyButton::qt_metacall(enum QMetaObject::Call,int,void * *)" (?qt_metacall@MyButton@@UAEHW4Call@QMetaObject@@HPAPAX@Z)
1>Application.obj : error LNK2001: unresolved external symbol "public: virtual void * __thiscall MyButton::qt_metacast(char const *)" (?qt_metacast@MyButton@@UAEPAXPBD@Z)
1>Application.obj : error LNK2001: unresolved external symbol "public: virtual struct QMetaObject const * __thiscall MyButton::metaObject(void)const " (?metaObject@MyButton@@UBEPBUQMetaObject@@XZ) 
```

我有一个使用 QMaker 的类似项目，并通过清理项目并重新运行 qmake 来解决它。问题是，VS 中没有“Qmake”按钮！

我读过几篇像[这样](http://thomasstockx.blogspot.in/2011/03/qt-472-in-visual-studio-2010.html)的文章，并做了他们告诉我的一切。虽然它并没有真正帮助，因为我有一个现有的几个 .cpp 和一些头文件的项目，我想避免创建一个 .pro 文件并将代码移动到其中。

我已经安装了 VS Qt 插件，它在 VS 面板上给了我新的很酷的“Qt”按钮，虽然对未解决的外部没有帮助（可能我不知道如何正确使用它）。

我已经在我的Application.h文件（唯一一个有Q_OBJECT的文件）上通过VS中的自定义构建工具运行了moc，但这仍然没有帮助：

```
C:\Utilities\QtSDK\Desktop\Qt\4.8.1\msvc2010\bin\moc Application.h -o tmp\moc\moc_Application.cpp 
```

什么可能导致我的问题，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T12:52:40.253

我猜您忘记将 MOC 生成的文件（在本例中为 moc_Application.cpp）添加到您的 Visual Studio 项目中。你必须这样做以确保它被构建。我很确定这应该可以解决您看到的链接器错误。

# spring - 从 src/groovy 中的类中获取对 spring bean 的引用

> ID：12494940
> 
> 赞同：2
> 
> 时间：2012-09-19T12:42:34.120
> 
> 标签：spring, grails, groovy, grails-plugin

我正在编写一个 Grails 插件，它在插件描述符中定义了一个 Spring bean

```
def doWithSpring = {
    myBean(MyBean)
} 
```

我需要从插件中的另一个类中获取对这个 bean 的引用。

```
class Something {

  def doIt() {
    // I need to get a reference to myBean here. Is this the best way?
    MyBean myBean = ApplicationHolder.application.mainContext.getBean('myBean')
  }
} 
```

`Something`是在`src/groovy`与 bean 相同的插件中定义的类，但`Something`本身不是 spring bean。在 Grails 1.3.7 中，有没有比上面显示的更好的方法来实现这一点？我正在寻找更好的方法，因为我知道 *Holder 类在 Grails 2.0 中已弃用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:46:57.053

在 Grails 2.x 中存在[Holders](http://grails.org/doc/2.0.1/api/grails/util/Holders.html)实用程序类来获取`grailsApplication`和`applicationContext`.

在 1.3.7 中，我认为选项是创建您自己的持有者，如此[处](http://burtbeckwith.com/blog/?p=1017)所述。

# asp.net-mvc - 在 TransactionScope 内发送 NServiceBus 消息

> ID：12494943
> 
> 赞同：1
> 
> 时间：2012-09-19T12:42:44.407
> 
> 标签：asp.net-mvc, messaging, nservicebus, transactionscope

我正在尝试使用 NHibernate 在与从 MVC 应用程序内部在总线上发送消息相同的事务中保存到数据库：

```
public void DoSomethingToEntity(Guid id)
{
    var session = _sessionFactory.OpenSession();
    CurrentSessionContext.Bind(session);

    using (var transactionScope = new TransactionScope())
    {
        var myEntity = _session.Get(id);
        myEntity.DoSomething();
        _session.Save(myEntity);
        _bus.Send(myMessage);
        transactionScope.Complete();
    }

    session.Dispose();
} 
```

在配置中，.MsmqTransport() 设置为 .IsTransactional(true)。

如果我在消息处理程序中执行此操作（它包含在自己的事务中，因此不需要 TransactionScope），那么一切都按预期工作，如果我包含异常，则两者都失败。

但是，如果我在 MVC 应用程序中自己的事务中执行此操作，则在离开 using 块时，我会在 transactionScope.Complete() 之后收到以下错误：

“该操作对于当前的征募状态无效。”

堆栈跟踪：在 System.Transactions.EnlistmentState.InternalIndoubt(InternalEnlistment enlistment) 在 System.Transactions.VolatileDemultiplexer.BroadcastInDoubt(VolatileEnlistmentSet& volatiles) 在 System.Transactions.TransactionStatePromotedIndoubt.EnterState(InternalTransaction tx) 在 System.Transactions.TransactionStatePromotedBase.InDoubtFromEnlistment(InternalTransaction tx ) 在 System.Transactions.DurableEnlistmentDelegated.InDoubt(InternalEnlistment enlistment, Exception e) 在 System.Transactions.SinglePhaseEnlistment.InDoubt(Exception e) 在 System.Data.SqlClient.SqlDelegatedTransaction.SinglePhaseCommit(SinglePhaseEnlistment enlistment) 在 System.Transactions.TransactionStateDelegatedCommitting.EnterState (InternalTransaction tx) 在 System.Transactions.TransactionStateDelegated。BeginCommit(InternalTransaction tx, Boolean asyncCommit, AsyncCallback asyncCallback, Object asyncState) 在 System.Transactions.CommittableTransaction.Commit() 在 System.Transactions.TransactionScope.InternalDispose() 在 System.Transactions.TransactionScope.Dispose() 在 HumanResources.Application.Implementations C:\Users\paul.davies\Documents\GitHub\EdaCalendarExample\HumanResources.Application\Implementations\HolidayService.cs 中的 .HolidayService.Book（BookHolidayRequest 请求）：HumanResources.UI.Controllers.HolidayController.BookUpdate（BookHolidayViewModel viewModel）的第 76 行在 C:\Users\paul.davies\Documents\GitHub\EdaCalendarExample\HumanResources.UI\Controllers\HolidayController.cs：第 82 行，位于 System.Web.Mvc.ActionMethodDispatcher.Execute( ControllerBase 控制器，System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary 的 Object[] 参数)`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 个参数）在 System.Web.Mvc.ControllerActionInvoker.<> *c_DisplayClass15.b* _12() 在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter（IActionFilter 过滤器，ActionExecutingContext preContext，Func`1 延续）

**最新编辑：**

此代码有效：

```
public void DoSomethingToEntity(Guid id)
{
    var session = _sessionFactory.OpenSession();
    CurrentSessionContext.Bind(session);

    using (var transactionScope = new TransactionScope())
    {
        var myEntity = _session.Get(id);
        _bus.Send(myMessage);
        transactionScope.Complete();
    }

    session.Dispose();
} 
```

此代码会产生错误：

```
public void DoSomethingToEntity(Guid id)
{
    var session = _sessionFactory.OpenSession();
    CurrentSessionContext.Bind(session);

    using (var transactionScope = new TransactionScope())
    {
        var myEntity = _session.Get(id);
        myEntity.AnyField = "a new value";
        _bus.Send(myMessage);
        transactionScope.Complete();
    }

    session.Dispose();
} 
```

请注意，在这两个示例中，我都没有保存实体。不同之处在于第二个示例，我正在修改从 NHibernate 获得的实体。这是 100% 可重现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T14:17:04.460

这可能不相关，但即使会话刷新模式设置为，您仍然必须`_session.Flush()`在提交之前调用- 这仅适用于 NH 提供的事务。`TransactionScope``Commit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T16:22:59.417

据我所知，在创建新 System.Transactions.Transaction 时无法收到通知，并且查看 NHibernate 中的代码，它似乎没有任何代码来处理创建 TransactionScope 的情况创建会话之后。

创建会话时，它会尝试加入当前事务，如果没有，则会话不会加入事务。我怀疑这是导致事务在提交时失败的原因。

我建议在 TransactionScope 内创建会话 - 还要检查您是否在 TransactionScope 之前的某处调用 session.BeginTransaction。

# floating-point - (IBM)-Fortran-IV 中的隐式实数转换为整数

> ID：12494949
> 
> 赞同：0
> 
> 时间：2012-09-19T12:43:18.540
> 
> 标签：floating-point, integer, fortran, type-conversion, fortran77

我正在将一个旧的 IBM-Fortran 程序重写为现代 Fortran-90，我遇到了以下表达式：

```
N1=A/B+1.000001
N2=A/B+1\. -1.E-5
N3=A/B+1.E-05 
```

据我所知，在~~旧~~`I`的 Fortran 隐式声明方式中，以-开头的变量`N`被视为整数。这意味着我们正在研究从浮点数到整数`A`的隐式转换- 。`B``N1``N3`

我现在的问题是，如何使用显式实数转换来翻译这些表达式？我的尝试是：

```
N1=ceiling(A/B+1.)
N2=floor(A/B+1.)
N3=ceiling(A/B) 
```

谁能澄清一下？我在互联网上没有找到任何关于此的提示。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:48:32.423

类型转换内在函数“int”更改值就像分配给整数一样。

PS 虽然仍然支持隐式类型，但我认为它“旧”。最好避免 - 使用“隐式无”。

# javascript - 如何使用 JQuery 检查复选框

> ID：12494950
> 
> 赞同：0
> 
> 时间：2012-09-19T12:43:17.693
> 
> 标签：javascript, jquery, html, checkbox

我已经尝试了一切，但没有任何效果。我有这个复选框

```
<input type="checkbox" onchange="WriteFormSelections('SearchForm', 'AccommodationType', 'AccommodationTypeSelections', 'All', 'AccommodationType-0', false, '_', true);" value="Hotel" name="AccommodationType_Hotel" id="AccommodationType-2">Hotel 
```

我想在页面加载时检查它。我已经尝试了很多东西。我无法解决的一件事是，我应该使用 id 或复选框的名称来检查它吗？

这是我当前的代码。[我曾尝试按照这篇](https://stackoverflow.com/questions/426258/how-do-i-check-a-checkbox-with-jquery-or-javascript)文章的建议使用道具，但这也不起作用。

```
<script type="text/javascript">
   $('AccommodationType-2').attr('checked', true);
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T12:44:57.603

您的选择器前面缺少一个 # 。

`$('AccommodationType-2').attr('checked', true);`

变成

`$('#AccommodationType-2').attr('checked', true);`

...根据您使用的 jQuery 版本，我建议您也查看一下`.prop()`，它用于对象的属性访问。

`document.ready()`此外，正如其他回答者正确指出的那样 - 您确实需要通过将 a 包裹在您的复选框检查行周围来等待 DOM 准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:46:16.917

您在选择器中缺少 # 。此外，最好将代码包装在文档就绪调用中，以确保在运行之前加载 dom：

```
$(document).ready(function() {
    $('#AccommodationType-2').prop('checked', true);
}); 
```

示例 - [http://jsfiddle.net/infernalbadger/vMTvs/](http://jsfiddle.net/infernalbadger/vMTvs/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:46:35.447

您必须使用 jQuery Id Selector（也总是尝试将 jquery 代码封装在文档就绪包装器中）

**正确代码：**

```
$(function(){

$('#AccommodationType-2').attr('checked', true);

}); 
```

using `$("AccommodationType-2")`告诉 jQuery 搜索标签为`<AccommodationType-2>`

# php - 创建新数组以匹配月数

> ID：12494951
> 
> 赞同：0
> 
> 时间：2012-09-19T12:43:22.597
> 
> 标签：php, arrays

我有一个这样的数组

```
Array
(
    [interswitch] => Array
        (
            [0] => Array
                (
                    [month] => 8
                    [transactions] => 5
                )

            [1] => Array
                (
                    [month] => 9
                    [transactions] => 1
                )

        )

    [visa] => Array
        (
            [0] => Array
                (
                    [month] => 8
                    [transactions] => 9
                )

        )

) 
```

该数组由 SQL 查询生成，该查询查询一个表并计算每个月的记录。其中 [month] 表示日历月份。我想将此数据与接受此格式数据的 HighCharts 一起使用

```
{name: 'Tokyo',data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1,95.6, 54.4]} 
```

如何将我的数组转换为更具可读性的数组，然后可以由 JSON 编码并转换为上述格式我已经尝试过

```
$_monthly_gateway_usage = array(
                array(
                    "name"=>"Interswitch",
                    "data"=>$this->parse_monthly_usage_data($monthly_gateway_usage['interswitch'])
                ),
                array(
                    "name"=>"Visa",
                    "data"=>$this->parse_monthly_usage_data($monthly_gateway_usage['visa'])
                )

            );

private function parse_monthly_usage_data($usage_data = array()) {

            $months = array("1","2","3","4","5","6","7","8","9","10","11","12");
            $_d = array();
            foreach ($months as $month) {
                foreach ($usage_data as $key => $d) {
                    if($d['month'] == $month)
                    {
                        $_d[] = $d['transactions'];
                    }
                    else
                    {
                        $_d[] = 0;
                    }
                }
            }

            return $_d;
        } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:52:34.820

这是一个较短的形式：循环索引基于月份

```
$_d = array();
for($i=1;$i<=12;$i++){
    foreach($usage_data as $v){
        $_d[$i] += ($v['month']==$i) ? $v['transactions'] : 0;
    }
} 
```

# vim - 与在插入模式下执行命令相比，在正常模式下插入单词

> ID：12494953
> 
> 赞同：1
> 
> 时间：2012-09-19T12:43:31.037
> 
> 标签：vim

我发现可以在插入模式下执行单个命令并使用 Ctrl-O 返回插入模式。

在正常模式下插入单个单词的可能性如何？

当然，我可以切换到插入模式，写入单词，转义并返回正常模式。

但我想知道是否可以映射一个序列（例如 Ctrl-K），允许在不离开正常模式的情况下快速在光标位置添加一个单词？

我尝试使用提示映射函数（参见[问题 11567596](https://stackoverflow.com/questions/11567596/can-you-do-interactive-macros-or-recordings-in-vim) - Ingo Karkat 的答案 - 和 Wikia 提示 1616）但失败了：该词被附加在行尾...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T17:24:35.903

我最好的建议是采用插入模式；这是*vi 方式* ^(TM)。

说真的，我也有创建映射的想法，让我可以输入一个单词/句子/任何东西，然后自动返回正常模式。但...

1.  无论您使用`input()`来自 romainl 的答案，还是更复杂的方法（例如使用`CursorMovedI`钩子），您都必须按`Enter`或其他键来表示您已完成。这并不比按`Esc`正常方式离开插入模式更好！

2.  您只是让事情变得更复杂：您为此花费了宝贵的（短）键序列，您必须花费大脑周期来在两种方法之间做出决定，您的肌肉记忆必须学会输入文本的方法，而这些特殊功能在其他方法中是不可用的vi 模式（例如在 Bash 中）。

所以，我认为这不值得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:41:02.623

这个*简单的*功能在这里有效：

```
function! InsertWord()
  let l:user_word = input("Type something then hit ENTER: ")
  execute "normal i".l:user_word
endfunction

command! InsertWord call InsertWord()

nnoremap <C-k> :InsertWord<CR> 
```

不过，整个事情可能会缩短为一条直线，但我喜欢这样。

# nhibernate - 使用存储过程休眠。输入参数作为自定义对象

> ID：12494960
> 
> 赞同：0
> 
> 时间：2012-09-19T12:43:57.743
> 
> 标签：nhibernate

它是如何工作的：

```
 return Session
            .GetNamedQuery("Select_Question_Group")
            .SetInt32("QuestionGroupId", QuestionGroupId)
            .UniqueResult<QuestionGroup>(); 
```

是否存在这样的方式：

```
 return Session
            .GetNamedQuery("Select_Question_Group")
            .With(new RequestCustomClass{QuestionGroupId = 1}) // not existent method
            .UniqueResult<QuestionGroup>(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:09:48.153

没有什么能阻止你创建一个扩展方法来做到这一点。

就像是：

```
public IQuery With(this IQuery query, object parameters)
{
    foreach (var property in paramters.GetType().GetProperties())
        query.SetParameter(property.Name, property.GetValue(parameters, null));
    return query;
} 
```

# hierarchical-clustering - 2D ArrayList 中的单链接聚类

> ID：12494965
> 
> 赞同：1
> 
> 时间：2012-09-19T12:44:18.083
> 
> 标签：hierarchical-clustering

您好我正在寻找一种在 Java Netbeans 中使用 2D ArrayList 进行单链接聚类的方法。

然后在图表上可视化结果。

据我所知 - LingPipe 可以做到，但它使用 HashSet 字符串，我认为它可能会准确地显示结果。

有什么建议么？我真的很感激帮助。谢谢！:D

# database - 使用具有“通用”字段的模型来建模继承

> ID：12494966
> 
> 赞同：0
> 
> 时间：2012-09-19T12:44:25.967
> 
> 标签：database, django, django-models

我目前正在开玩笑说如何使用 Django 建模。基本情况是我有一个对象应该作为 a`chassis`并提供一些`sockets`. 然后有很多不同`modules`的东西放在`sockets`a上`chassis`。我想`modules`在 Django 中将这些不同的类建模为不同的类，但在数据库层使用一个公共类，可能涉及一些通用字段。

所以数据库模型可能看起来像这样：

```
class Module(models.model):
    name = models.CharField(max_length=128)
    # Or is there a better way to annotate a type?
    type = models.CharField(max_length=128) 
    string1 = models.CharField(max_length=128)
    string2 = models.CharField(max_length=128)
    ...
    int1 = models.IntegerField()

# Some kind of engine class that derives from Module
# but does nothing else then "mapping" the generic
# fields to something sensible

class Socket(models.Model):
    is_on = models.ForeignKey(Chassis)
    name = models.CharField(max_length=128)
    type = models.CharField(max_length=128)

class Connection(models.Model):
    chassis = models.ForeignKey(Chassis)
    module = models.ForeignKey(Module)
    via = models.ForeignKey(Socket)

class Chassis(models.Model):
    name = models.CharField(max_length=128)
    modules= models.ManyToManyField(Module, through='Connection')

class Group(models.Model):
    name = models.CharField(max_length=128) 
```

当然，我不想用这种非规范化破坏我的逻辑。这就是为什么我暗示某种`engine`应该使用 Module 表的类，但提供“逻辑”getter 和 setter，有效地将“Horsepower”等数据映射到“int1”。

所以我的问题基本上是：

*   我对 Django 所做的事情是否合理？还是有更好的（可能是内置的）方法来处理这个问题？
*   是否可以根据`Module.type`字段自动构建正确的类型，即为非规范化模型提供包装器方法的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:13:58.170

> 我对 Django 所做的事情是否合理？

一般的想法是好的，但非规范化可能会使您的查询不太理想。标准解决方案是`Module`为每种类型的模块进行子类化；这将创建一个`module`表以及每个模块类型的表，其中包含特定于类型的内容。当然，这假设您不会在运行时创建或删除模块类型。

也就是说，您的模型存在一些问题：

```
class Module(models.model):
    name = models.CharField(max_length=128)
    # Or is there a better way to annotate a type?
    type = models.CharField(max_length=128) 
    string1 = models.CharField(max_length=128)
    string2 = models.CharField(max_length=128)
    ...
    int1 = models.IntegerField() 
```

通常，`type`会被标准化以节省空间：

```
class ModuleType(models.model):
    name = models.CharField(max_length=128)
    # Any other type-specific parameters.

class Module(models.model):
    name = models.CharField(max_length=128)
    type = models.ForeignKey(ModuleType, related_name="modules")
    string1 = models.CharField(max_length=128)
    string2 = models.CharField(max_length=128)
    ...
    int1 = models.IntegerField() 
```

* * *

```
class Socket(models.Model):
    is_on = models.ForeignKey(Chassis)
    name = models.CharField(max_length=128)
    type = models.CharField(max_length=128)

class Connection(models.Model):
    chassis = models.ForeignKey(Chassis)
    module = models.ForeignKey(Module)
    via = models.ForeignKey(Socket)

class Chassis(models.Model):
    name = models.CharField(max_length=128)
    sockets = m
    modules= models.ManyToManyField(Model, through='Socket') 
```

`Chassis`是一个烂摊子。您没有定义`sockets`，写`Model`在您可能想要的位置`module`，并且`through`可能应该参考`Connection`（模型必须在链接的两端`through`都有s）。`ForeignKey`但是从你的描述中，我得到了更简单的：

```
class Socket(models.Model):
    chassis = models.ForeignKey(Chassis, related_name="sockets")
    name = models.CharField(max_length=128)
    # Is `type` a ModuleType? If so, use a ForeignKey.
    # If not, create a SocketType model.
    type = models.___
    module = models.ForeignKey(Module, related_name="sockets")

class Chassis(models.Model):
    name = models.CharField(max_length=128)
    sockets = models.IntegerField()
    modules = models.ManyToManyField(Socket) 
```

通过更好地描述您正在建模的内容，可以进一步细化。例如，我不确定 ManyToMany 是您想要的。您可能需要将机箱的*设计*（即给定类型机箱的所有实例共有的东西，包括其插槽）与该机箱的*实例*（将引用该设计，并有另一个表将插槽映射到模块） .

* * *

> 是否可以根据 Module.type 字段自动构造正确的类型？

这就是工厂设计模式。在 Python 中，您可以将其实现为构造函数字典：

```
class Module(models.model):
    # ...
    CONSTRUCTORS = {}

    @staticmethod
    def register_constructor(type_name, constructor):
        Module.CONSTRUCTORS[type_name] = constructor

    def construct(self):
        return Module.CONSTRUCTORS[self.type.name](self) 
```

我认为您不需要特定的引擎类；各种模块类就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:15:07.720

为了定义一个抽象基类，您可以执行以下操作：

```
class Module(models.model):
    name = models.CharField(max_length=128)
    type = models.CharField(max_length=128) 
    string1 = models.CharField(max_length=128)
    string2 = models.CharField(max_length=128)
    ...
    int1 = models.IntegerField()

    class Meta:
        abstract = True

class SpecificModule(Module):
     subClassField = models.CharField(max_length=128) 
```

我建议阅读[这部分](https://docs.djangoproject.com/en/dev/topics/db/models/#meta-inheritance)文档，因为它是处理继承和抽象类的一个非常好的起点。

您还可以定义没有`class Meta: abstract = True`. 唯一的区别是`abstract = True`类的`SpecificModule`所有字段和抽象模块父类的所有字段都将在类SpecificModule的子类表中创建，而没有`abstract = True`定义的类Module的表将被创建，所有“模块表中可用的“通用”字段，以及表中类 SpecificModule 的所有子类特定字段。

编辑：回答关于父母和孩子之间关系的问题。

[由于在子类表 ( docs](https://docs.djangoproject.com/en/dev/topics/db/models/#inheritance-and-reverse-relations) )中创建了一个隐式的一对一字段，因此您可以使用此查询获取子对象。

```
#get the parent
parent = Module.objects.get(name="my first module")
#this is possible
print parent.name
>>> "my first module"
#this is not possible
print parent.subClassField
>>> Traceback (most recent call last):
    File "<console>", line 1, in <module>
    AttributeError: 'Module' object has no attribute 'subClassField'
#get the corresponding child
child = SpecificModule.objects.get(module_ptr_id=parent.pk)
#finally we can print the value
print child.subClassField 
```

我认为Django还应该创建一个默认的related_name，但不确定它是哪个。

请注意，只有在这种情况下才会创建从父级到子级的隐式一对一关系`abstract=False`。但是，如果`abstract = True`您不会将抽象父级作为对象使用，因为它是抽象的..

# java - 作为可执行jar运行时无法打开java应用程序

> ID：12494968
> 
> 赞同：0
> 
> 时间：2012-09-19T12:44:29.460
> 
> 标签：java, error-handling, try-catch, startup, executable-jar

我今天遇到了一个奇怪的问题......我将做一个简化的例子，因为它“值得一千个字”：D

```
public class Application() {
    public static void main(String[] args) {
        try {
            A a = new A(); // this may throw exceptions
                           // (which will cause an ExceptionInInitializerError)
        } catch (Throwable t) {
            JOptionPane.showMessageDialog(null, "Oooops!");
            System.exit(1);
        }
    }
} 
```

由于它是一个带有 Swing GUI 的独立应用程序，我的目标是在出现任何问题时向用户发送消息（在这种情况下是在启动时）......上面的代码在 Eclipse IDE 中*工作*，但是当我导出项目时双击它作为可执行jar，好吧，它只是不会打开。

所以我尝试在 cmd 中执行它，`java -jar application.jar`并在 shell 中打印出一个`ExceptionInInitializerError`.

为什么错误没有被捕获？
即使我指定它也不起作用`catch (ExceptionInInitializerError e)`。

**编辑：** 经过更深入的调试，我发现这个问题只发生在两个特定异常发生并且后者发生在前者的 catch 块中时。我通过更改我在启动时执行的一些检查的顺序来纠正错误。

顺便说一句，这个问题永远不会发生，因为它是由 JDBC 驱动程序类名的自愿错误引起的，以加载到静态块中。

好吧，至少它让我清楚地理解了为什么构造函数和静态初始化块不应该抛出异常：它使得在抛出异常的类被许多类使用的情况下调试几乎是不可能的，因为它可能变得很难找到加载类时退出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:55:36.437

`ExceptionInInitializerError`对于您的示例中没有被捕获的问题，我可以想到三种可能的解释：

*   它可能被抛出`JOptionPane.showMessageDialog(null, "Oooops!");`

*   它可以在`main`被调用之前被抛出。

*   它可以被扔到不同的堆栈上。

事实上，我认为第二个是最有可能的，因为[`ExceptionInInitializerError`](http://docs.oracle.com/javase/7/docs/api/java/lang/ExceptionInInitializerError.html)在类的初始化期间抛出一些未经检查的异常（而不是捕获）时抛出。这很可能在您进入`try`街区之前发生。

# css - 垂直居中百分比

> ID：12494974
> 
> 赞同：1
> 
> 时间：2012-09-19T12:44:38.937
> 
> 标签：css, centering, margins

我正在尝试将一块动态高度居中。我遵循了 Vanseo Design 的优秀指南，并以负利润率实施了解决方案。经过一段时间的调整，我让它在 Chrome 中工作，但是在 IE 和 Firefox 中尝试时，负边距已经很远了！Chrome 和 Safari 按预期处理该位置，但 IE 和 FF 不处理。如果只有 IE，我可以完成经典的 IE-CSS-hack，但也可以使用 Firefox……任何知道如何使用动态元素获得垂直居中以在所有浏览器中工作的人？

Chrome / Safari 的屏幕截图（正确）：

![](../Images/088216dea29519c0143de98e3144351c.png)

来自 Firefox / IE 的屏幕截图（错误）：

![](../Images/a402fc3e1629764b59912db93b32cedd.png)

```
<!DOCTYPE html>
<html>
<head>
<title>Dead Centre</title>

<style type="text/css" media="screen"><!--
body 
    {
    color: white;
    background-color: #000;
    margin: 0px
}

#content
{    
    position: absolute;
    top: 50%;
    left: 0%;
    height: 64%;
    width: 100%;
    margin-top: -32%;
    text-align:center;
    background-color:#339;
}

--></style>
</head>

<body>
    <div id="content">
        <div class="bodytext">This box should be centered vertically</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:08:20.603

好吧，你为你的元素设置了 64% 的高度，所以让我们做垫子:) 100-68 = 36 ,.，所以只剩下 36% 了。

然后除以 2 得到 18

通过将您的内容 ID 从顶部设置为 18% 并删除您的边距，一切都应该正常工作。:)

```
#content
{    
    position: absolute;
    top: 18%;
    left: 0%;
    height: 64%;
    width: 100%;
    text-align:center;
    background-color:#339;
} 
```

# python - 发送邮件错误python

> ID：12494977
> 
> 赞同：1
> 
> 时间：2012-09-19T12:44:43.767
> 
> 标签：python

尝试发送邮件的脚本时出现以下错误

```
 import urllib.request
    import re
    import smtplib
    from email.mime.text import MIMEText
    from bs4 import BeautifulSoup
    page=urllib.request.urlopen("http://www.crummy.com/")
    soup=BeautifulSoup(page)
    v=soup.findAll('a',href=re.compile('http://www.crummy.com/2012/07/24/0'))
    for link in v:

      w=link.get('href')

    server = smtplib.SMTP( "smtp.gmail.com", 587 )
    server.starttls()
    server.login( 'xxxxxxxxxxx', 'xxxxxxx' )
    server.sendmail( 'xxxxxxxxx', 'xxxxxxxxx', "bonus question is up" ) 
```

> 回溯（最后一次调用）：文件“C:\Python32\bonus”，第 14 行，
> 在 server = smtplib.SMTP("smtp.gmail.com", 587) 文件
> “C:\Python32\lib\smtplib.py ”，第 259 行，在**初始化** 文件“C:\Python32\lib\smtplib.py”中，第 319 行，在连接 self.sock = self._get_socket(host, port, self.timeout) 文件中“C:\Python32\lib \smtplib.py”，第 294 行，在 _get_socket 返回 socket.create_connection((host, port), timeout) 文件“C:\Python32\lib\socket.py”，第 386 行，在 getaddrinfo(host,端口，0，SOCK_STREAM）：socket.gaierror：[Errno 11004] getaddrinfo 失败请建议最好的解决方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:55:27.493

该`getaddrinfo`函数有这个目的：

> getaddrinfo 函数提供从 ANSI 主机名到地址的独立于协议的转换。

如果失败，则意味着它无法将您给定的主机名转换为相应的地址。它本质上是在进行 DNS 查询。

您返回的错误号“11004”与`getaddrinfo`此消息相关联：

> 有效名称，没有请求类型的数据记录。请求的名称有效并且在数据库中找到，但它没有正确的关联数据正在解析。通常的示例是使用 DNS（域名服务器）的主机名到地址转换尝试（使用 gethostbyname 或 WSAAsyncGetHostByName）。返回一条 MX 记录，但没有 A 记录——表明主机本身存在，但不能直接访问。

您正在查找的名称似乎没有与之关联的正确数据。

你确定你的网址是正确的吗？

链接：

`getaddrinfo`： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms738520 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738520(v=vs.85).aspx)

WinSock 错误代码： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms740668 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740668(v=vs.85).aspx)

# jquery - TimeGlider addEvent 未读取结束日期

> ID：12494980
> 
> 赞同：0
> 
> 时间：2012-09-19T12:44:52.153
> 
> 标签：jquery

我正在使用 TimeGlider 进行一些时间事件显示..它很棒而且很有趣，但我的问题是我必须动态添加所有事件，而不是通过 JSON 文件..就像所有示例一样显示..问题是 addEvent 方法在添加一个带有“enddate”的事件不显示它应该显示的背景跨度..但是，如果您将相同的事件放在 json 文件中..跨度是可见的..此外，通过 addEvent 添加的事件不会显示结束日期鼠标悬停表示它不考虑 "enddate" 。

```
{
"id":"_now1",
"title": "nowEventere",
"date_display":"ho",
"description": "prttt",
"startdate": "2012-01-01 08:00:00",
"enddate": "2012-04-01 08:00:00",
"high_threshold":60,
"importance":"40",
"icon":"triangle_red.png",
"span_color":"#FF0000"
} 
```

因此，如果在 JSON 文件中，上述事件将显示时间跨度，但

```
var event={
"id":"_now1",
"title": "nowEventere",
"date_display":"ho",
"description": "prttt",
"startdate": "2012-01-01 08:00:00",
"enddate": "2012-04-01 08:00:00",
"high_threshold":60,
"importance":"40",
"icon":"triangle_red.png",
"span_color":"#FF0000",
"timelines":["js_history"]
};
tg_actor.addEvent(event); 
```

只会使用“开始日期”..这可能是一个错误，还是事件中缺少某些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T10:49:55.160

我已经修复了错误..如果您使用的是下载的文件夹..查找 JS 文件 TG_Timeline.js

在文件中查找方法

```
tg.TG_Event = Backbone.Model.extend({ ....... 
```

在初始化方法结束时查找方法调用..

```
this.set(ev); 
```

在此方法调用上方添加以下行

```
/*BUG FIX..Imran (20/09/2012) ..time span events added through addEvent method did not show time span .. span attribute was not being added*/
            if(ev.cache.span) // if span was set to true .. add attribute 
                ev["span"]=ev.cache.span; 
```

它应该看起来像

```
/*BUG FIX..Imran (20/09/2012) ..time span events added through addEvent method did not show time span .. span attribute was not being added*/
            if(ev.cache.span) // if span was set to true .. add attribute 
                ev["span"]=ev.cache.span;

            this.set(ev); 
```

该修复只是将 span 属性添加到对象..由于某种原因没有添加..

# java - Apache POI - 处理数据的部分无效

> ID：12494982
> 
> 赞同：1
> 
> 时间：2012-09-19T12:44:58.910
> 
> 标签：java, apache-poi

我使用 Java Apache POI ( ) 访问 Excel 电子表格`hssf`。我收到以下错误：

```
java.lang.RuntimeException: org.apache.poi.poifs.filesystem.OfficeXmlFileException: The supplied data appears to be in the Office 2007+ XML. You are calling the part of POI that deals with OLE2 Office Documents. You need to call a different part of POI to process this data (eg XSSF instead of HSSF)
at org.testng.internal.MethodInvocationHelper.invokeDataProvider(MethodInvocationHelper.java:143)
at org.testng.internal.Parameters.handleParameters(Parameters.java:426) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T13:07:43.267

要[打开](http://poi.apache.org/spreadsheet/quick-guide.html#NewWorkbook)( `xlsx`Office Open XML) 文件，您应该使用[`XSSFWorkbook`](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html)代替[`HSSFWorkbook`](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html)，它用于`xls`(Excel 97-2003) 文件。

如果您使用的 POI < 3.5，则需要至少升级到 3.5 版本才能读取`xlsx`文件。这是进行转换的[指南](http://poi.apache.org/spreadsheet/converting.html)，但本质上，您需要加载文件，该文件[`WorkbookFactory`](http://poi.apache.org/apidocs/org/apache/poi/ss/usermodel/WorkbookFactory.html#create%28java.io.File%29)负责为您创建`XSSFWorkbook`或创建`HSSFWorkbook`：

```
Workbook workbook = WorkbookFactory.create(new File("file.xlsx")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-22T10:20:29.600

通过打开它，确保 Excel 工作表没有损坏。如果您看到任何错误，请将文件另存为 MS Excel 97-2003 工作表。
还要确保您已将文件名指定为“**.xls”

# macos - 我可以在 Windows 中安装 Mac 系统吗？

> ID：12494995
> 
> 赞同：-6
> 
> 时间：2012-09-19T12:45:42.950
> 
> 标签：macos

请问我有这个技术问题！我需要在 Windows 中安装 MAC 系统。

几个问题：

1.  我可以这样做吗？（我读到我可以使用 VirtualBox 或 smth..）
2.  我可以运行 Xcode 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:48:37.410

有办法做到这一点，但从技术上讲，这是非法的。另外我认为这不值得麻烦。您可以在 ebay 上以 100 美元的价格购买二手 Mac mini。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:13:03.957

是的，你绝对可以。VirtualBox 和 VMWare Player 都可以。谷歌一下，还有工作要做。

根据我的经验，VirtualBox 存在一些问题（例如，单击“关于本机”会导致注销）。在这两种情况下，您都不会拥有加速图形。是的，你可以运行任何 XCode。我使用了 VMWare Player，虽然 Mountain Lion 似乎比 Snow Leopard 更迟钝，但效果很好。

我不确定在非 Apple 硬件上运行 OSX 的合法副本是否*违法*，但 EULA 不允许这样做。(伊纳尔)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:13:26.510

是的，您可以，但您的 BIOS 需要支持 pcvirtualisation

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T12:50:13.747

我很确定有一种方法可以，但是任何可能的方法都是完全非法的。Apple 已确保在非 Apple 硬件上使用 Apple 产品是不合法的。更正了，这不是实际法律，只是 EULA 不允许。

我只是建议您节省几块钱，然后在 eBay 上购买便宜的 Mac Mini 或类似的东西，它可能会比任何 Mac OS X 的虚拟副本更好用。

顺便说一句，用新买的 Mac 写这个。