# StackOverflow 问答 11771000-11771999

# ruby-on-rails - 在 Spree 1.1 中访问普通的旧 ruby 对象

> ID：11771002
> 
> 赞同：0
> 
> 时间：2012-08-02T04:21:29.123
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的 Rails 3.2 应用程序中有一个 Spree 1.1 项目，其中有一个普通的 ruby​​ 对象`app/models/MyObject.rb`

```
class MyObject
  def self.some_method
    # do stuff
  end
end 
```

我正在尝试以覆盖部分访问模型

```
Deface::Override.new(:virtual_path => 'spree/products/show',
                     :name => 'unique_name',
                     :insert_after => "[data-hook='product_description']",
                     :partial => 'shared/product_show_stuff') 
```

这是我的部分

```
<%= MyObject.some_method %> 
```

我得到的错误是

```
uninitialized constant ActionView::CompiledTemplates::MyObject 
```

所以我尝试了以下方法，希望可以通过全局命名空间访问该对象

```
<%= ::MyObject.some_method %> 
```

然后我得到这个错误：

```
uninitialized constant MyObject 
```

**如何访问我新创建的 ruby​​ 对象？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:31:27.887

您的常量应该在一个小写名称的文件中定义：

```
app/models/my_object.rb 
```

不是：

```
app/models/MyObject.rb 
```

这是为了让 Rails 的自动加载能够充分发挥作用。

# linux - 在linux的一个串行重定向控制台中打开多个shell

> ID：11771006
> 
> 赞同：1
> 
> 时间：2012-08-02T04:22:32.133
> 
> 标签：linux, shell, serial-port

因为我们可以通过 ctrl+shift+t 在一个终端中打开多个 shell 会话。有没有办法在一个串行重定向的控制台中打开多个 shell？

我 通过超级终端`ttys0`进行更改`/etc/inittab`并连接到另一台 PC 的 COMPORT，从而通过串行重定向控制台。在超级终端上显示的串行重定向控制台上通过 root 引导和登录后，我想在该 shell 上启动新 shell，以保持旧 shell 的安全。并想在这些 shell 之间切换。

实际上，我在第一个 shell 上运行 APP，并希望将其他 shell 用于 Linux 命令，以便在需要时执行，而无需退出我的第一个 APP。

可能的方法是什么？

# c++ - 加密/解密向量

> ID：11771008
> 
> 赞同：0
> 
> 时间：2012-08-02T04:22:48.857
> 
> 标签：c++

我一直在研究个人序列化过程，但在保存/加载后我一直无法取回解密的向量。它可以很好地保存和加载数据，但是向量清单在转换中失去了它的定义，所以我必须重新制作它，这消除了稍后在程序中使用它的能力。下面的代码片段显示了我如何加密/解密。

```
struct bin{
    map<string, int>::iterator it;
    int modify_string;
    vector<string> uncrypt_vec;
    map<string, int> encryption;
    void set_up_code(){
        string alphabet[] = {"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"};
        int letter_num=1;
        for(int i = 0; i < 27; ++i){
            string letter = alphabet[i]; //Assign each letter to a number
            encryption.insert(pair<string,int>(letter,letter_num));
            letter_num++;
        }
        encryption.insert(pair<string,int>(" ", -1));
    }
    int encrypt_vector(vector<string>& crypt){
        stringstream ssv;
        for(unsigned int i = 0; i < crypt.size(); ++i){
            string word = crypt[i]; //Grab each string
            int mod_word[word.size()];
            for(unsigned int x = 0; x < word.size(); ++x){
                stringstream ssl;
                string letter;
                char let = word[x]; //Convert each letter of the string into an integer
                ssl << let;
                ssl >> letter;
                int num = encryption[letter];
                mod_word[x] = num;
            }
            mod_word[word.size()] = 0; //Include a zero for each word
            copy(mod_word, mod_word+word.size()+1, ostream_iterator<int>(ssv));
        }
        ssv >> modify_string; //Put into int modify_string and return
        return modify_string;
    }
    vector<string> decrypt_vector(int& uncrypt){
        string num;
        stringstream ssn;
        ssn << uncrypt; //Store the numbers in a string
        ssn >> num;
        string mod_word;
        string word;
        for(unsigned int i=0;i<num.size();++i){
            int number;
            char check_num = num[i];
            stringstream ssctn;
            ssctn << check_num; //Kinda stupid way of doing it
            ssctn >> number; //Pulls int from num[i], then checks it against 0
            if(number==0){ //If break point
                uncrypt_vec.push_back(mod_word); //Push back the word
                mod_word.clear();
            }
            int letter;
            stringstream sscn;
            char let = num[i];
            sscn << let; //Pull each letter from uncrypt, change back to letter based on encryption
            sscn >> letter;
            for(it = encryption.begin(); it != encryption.end(); ++it){
                if(it->second == letter){
                    mod_word.append(it->first);
                    break;
                }
            }
        }
        cout << "Done" << endl;
        return uncrypt_vec;
    }
}binary;

struct player{
    vector<string> inventory;
    int inventory_en; //en for encrypted
    void save(){
        inventory_en = binary.encrypt_vector(inventory);
    }

    void load(){
        vector<string> inventory; //Must recreate, type is lost otherwise, crashes
        inventory = binary.decrypt_vector(inventory_en);
        vector<string>::iterator i;
        for(i=inventory.begin();i!=inventory.end();++i){
            cout << *i << endl; //Prints correctly here
        }
    }
}character;

int main(){
    character.inventory.push_back("abc");
    character.inventory.push_back("edf");
    binary.set_up_code();
    character.save();
    character.load();
} 
```

当我稍后尝试打印 character.inventory 时，它崩溃了。如果我没有在 character.load() 函数中将 character.inventory 定义为字符串，它也会崩溃。那么如何将 character.inventory 定义为稍后在程序中可以调用（从结构）的向量？

我使用相同的方式将数据写入文件`output_file.write((char*)&structObj, sizeof(structObj));`并读出（因此需要加密/解密，不能以这种方式保存字符串）。

请不要让我去图书馆为我做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:38:49.357

您正在索引字母 [26]，但最后一个有效索引是 25。

```
 for(int i = 0; i < 27; ++i){
        string letter = alphabet[i]; 
```

# mongodb - 如何在 MongoDB 中的两个圆圈的差异内执行地理搜索=

> ID：11771009
> 
> 赞同：2
> 
> 时间：2012-08-02T04:22:53.270
> 
> 标签：mongodb, mongoid, geospatial

是否可以在 MongoDB 中根据两个圆的差异在结果区域中执行地理空间搜索。假设我有一个半径为 x 的圆 A 和另一个半径为 y 的圆 B，其中 y > x。我需要找到 B - A 内的所有点。这对 MongoDB 是否可行。我知道 MongoDB 支持多边形搜索，但也许有更好的方法。请记住，我在使用 mongoid 的 rails 应用程序中使用 Mongo。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:28:53.763

对的，这是可能的。使用`$within`运算符。

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing/#GeospatialIndexing-Querying](http://www.mongodb.org/display/DOCS/Geospatial+Indexing/#GeospatialIndexing-Querying)

> 边界查询

可以使用 $within 代替 $near 来查找形状内的项目。结果不按距离排序，当不需要这种排序时，这可能会导致更快的查询。支持 $box（矩形）、$center（圆形）和 $polygon（凹凸多边形）类型的形状。所有边界查询都隐含地包括形状的边界作为边界的一部分，尽管由于浮点不准确，这不能严格依赖。

要查询矩形内的所有点，必须指定左下角和右上角： 圆由中心点和半径指定：

> center = [50, 50] 半径 = 10 db.places.find({"loc" : {"$within" : {"$center" : [center, radius]}}})

一种方法是您可以在两个圆内找到点，然后对集合进行交集。如果圆是同心的，或者不是同心但有一些重叠区域，这两种情况都适用。

# visual-studio - Visual Studio 2008 删除我的文件？

> ID：11771014
> 
> 赞同：1
> 
> 时间：2012-08-02T04:24:07.110
> 
> 标签：visual-studio, svn, delete-file

我将 Visual Studio 2008 用于 ASP.NET MVC Web 应用程序项目，并使用 svn 存储库（ankhsvn 插件）。今天我在上午 10:30 签入了我的代码，并继续主要在一个 Javascript 文件上进行开发。当天晚些时候，在尝试保存文件后，Visual Studio 提示我保存文件，这很奇怪，因为我没有尝试更改文件的名称。我以前在 VS 中看到过这样的问题，所以我复制了我试图保存的行，关闭了 IDE 并重新打开它。重新打开 IDE 和解决方案后，Javascript 文件不再位于我机器上的工作副本文件夹中。它完全消失了，VS2008 在项目文件中没有它。

请帮忙，我丢失了很多代码。有什么办法可以恢复这个文件。为什么 Visual Studio 会删除此文件而不留下任何痕迹。

# validation - 有没有办法在没有 .save() 方法的猫鼬中定义模型？

> ID：11771015
> 
> 赞同：2
> 
> 时间：2012-08-02T04:24:10.320
> 
> 标签：validation, node.js, model, mongoose

我想要做的是定义一个学生模型，其中包含一个名为“schedules”的字段，其中包含一个 Schedule 实例数组，但我不希望 Schedule 模型能够保存到它自己的集合中。

这是一些代码，它会更有意义：

```
var ScheduleSchema = new Schema({
    day:    {type: Number, min: 0, max: 6},
    time:   {type: Number, min: 0, max:24}
});

var StudentSchema = new Schema({
    firstName:  String,
    schedule:   [ScheduleSchema]
});

var Schedule = mongoose.model("Schedule", ScheduleSchema);
var Student = mongoose.model(modelName, StudentSchema);
Student.Schedule = Schedule; 
```

我在这段代码中遇到的问题是，当我这样做时：

```
var schedule = new Student.Schedule({day: 3, time: 15}); 
```

当我 console.log 时，我会得到这样的东西

```
{ "day" : 3, "time" : 15, "_id" : ObjectId("5019f34924ee03e20900001a") } 
```

我通过在模式中明确定义_id来绕过_id的自动生成，

```
var ScheduleSchema = new Schema({
    _id:    ObjectIdSchema,
    day:    {type: Number, min: 0, max: 6},
    time:   {type: Number, min: 0, max:24}
}); 
```

现在它只是给了我：

```
{ "day" : 3, "time" : 15} 
```

这可能是一个黑客......而不是我想要依赖的东西。

另一个问题是，如果我这样做

```
schedule.save() 
```

它实际上会创建一个集合并将文档保存到数据库中。

有没有办法为 Schedule 禁用 save()？有正确的方法吗？

我可能会坚持我所拥有的，或者满足于混合类型但在验证上失败了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:25:50.297

你为什么还要这样做`schedule.save()`？您应该保存父对象（即`Student`对象），而不是嵌入文档。如果您保存`schedule`，则`_id`默认情况下将附加。如果您将`Student`对象保存`schedule`为嵌入文档，则不会发生这种情况。

`.save`此外，在您的模型上禁用方法也没有真正的理由`Schedule`（这是一个有趣的功能，它允许您将`Schedule`模型同时用作嵌入式文档的模型和独立文档的模型）。只是不要使用它。做这样的事情：

```
var student = new Student({ firstName: 'John' });
var schedule = new Schedule({ day: 3, time: 15 });
student.schedules.push( schedule );
student.save( ); 
```

# javascript - JavaScript + addEventListener 'click' 在选择 html 对象上被忽略

> ID：11771025
> 
> 赞同：3
> 
> 时间：2012-08-02T04:25:10.787
> 
> 标签：javascript

我在文档上添加了一个 eventListener，希望在单击文档中的任何内容时隐藏 myWidget（当然小部件除外）。

```
myWidget.addEventListener('click', function (e) {
    e.stopPropagation(); 
}, false);

document.addEventListener('click', function (e) {
    myWidget.style.display = 'none';
    console.log(e.target);
}); 
```

现在这似乎适用于除选择 html 对象之外的所有内容。选择一个选择框会显示选择的内容，但小部件不会隐藏，并且 console.log 永远不会触发。有什么理由吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:26:09.197

我想你想要这个`change`活动

```
document.addEventListener('change', function (e) {
    myWidget.style.display = 'none';
    console.log(e.target);
}); 
```

# c# - 实体框架对象具有我想在传递给视图之前将其转换为短日期字符串的日期时间字段（ASP.NET MVC4）

> ID：11771026
> 
> 赞同：0
> 
> 时间：2012-08-02T04:25:19.590
> 
> 标签：c#, asp.net-mvc, entity-framework, type-conversion

我认为这是一个非常简单的问题，我可能想多了，但我不知道如何将日期字符串传递给我的视图。这是实体框架代码第一类：

```
public class Onus
{
public virtual int Id { get; set; }
public virtual string Title { get; set; }
[MaxLength(140)]
public virtual string Description { get; set; }
public virtual string Details { get; set; }
public virtual DateTime? DueDate { get; set; }
public virtual string Status { get; set; }
} 
```

这是我要更改的控制器部分：

```
public Onus GetOnus(int id)
{
var onus = db.Onuses.Find(id);

if (onus == null)
{
    throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
}
return onus;
} 
```

在视图中，我使用了一些 ajax 和 javscript 模板来显示数据。如果您需要该代码，我将添加它。

***编辑

抱歉没有更清楚，我真的没有控制器来操作它，这一切都是用 ajax 完成的：

```
var getOnus = function (id) {
            return $.ajax(onusApiUrl + "/" + id)
        };

var viewOnus = function () {
            var id = getId(this);
            onusServer.getOnus(id).done(viewOnusDetails);
        };

var viewOnusDetails = function (onus) {
            var output = templates.onusDetails(onus);
            $("#onusDetailsOutput").html(output);
        }; 
```

还有比这更多的 javascript，但我相信这就是您应该看到的全部内容。哦，还有标记：

```
<div id="Details">
<div id="detailsLeft">
    <input type="hidden" value="{{Id}}" id="detailsId" />
    <header>
        <p><span class="onusTitleDetails">{{Title}}</span><span id="close">X</span></p>
    </header>
    {{#if DueDate}}
    <p class="detailsLabel">Due Date</p>
    <p class="onusDueDate">{{DueDate}}</p>
    {{/if}}
    <p class="detailsLabel">Description</p>
    <p class="onusDescriptionDetails">{{Description}}</p>
    <p class="detailsLabel">Details</p>
    <p class="onusDetails">{{Details}}</p>
</div>
<div id="detailAction">
    <div class="editOnus hover">Edit</div>
    <div class="deleteOnus hover">Delete</div>
</div>
</div>
<div class="onusStatusDetails">{{Status}}</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:30:18.717

查看调用视图的控制器会很有帮助，但我假设它是这样的：

```
public ActionResult MyController(int id)
{
    Onus onus = GetOnus(int id);
    return View(onus.DueDate.HasValue ? 
                onus.DueDate.Value.ToShortDateString() : 
                "(null)");
} 
```

这只会将短日期字符串传递给您的模型，而模型又应该声明

```
@model string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:29:12.987

将另一个属性添加到您的实体，然后绑定到它呢？

```
 public virtual DateTime? DueDate { get; set; }

 public string DueDateString
        {
            get { return DueDate != null ? DueDate.ToString() : string.Empty; }
        } 
```

# node.js - node.js socket.write() 在 if 条件下不起作用

> ID：11771027
> 
> 赞同：1
> 
> 时间：2012-08-02T04:25:26.110
> 
> 标签：node.js

我有一个问题，就“IF”条件而言，我需要发送消息“socket.write（'11'）”，但如果第二个“socket.write”未打开，它不会发送消息编码。在我的代码上，我不需要第二次写入。为什么会这样？

** 我发现了其他错误，如果我没有将 var“数据”放在 socket.write() 上，它不会向客户端发送任何消息。

问候

```
var net = require('net');
var HOST = '192.168.0.104';
var PORT = 6060;
var connections = 0;

var clients = [];

net.createServer(function (socket) {

// Identify this client
socket.name = socket.remoteAddress + ":" + socket.remotePort

// Put this new client in the list
clients.push(socket);

// Send a nice welcome message and announce
socket.write("Welcome Client: " + socket.name + "\n");
connections++;
console.log('Active connections: ' + connections);
console.log(socket.name + " joined the chat.");

// Handle incoming messages from clients.
socket.on('data', function (data) {
var response = data.toString();
var recv = response.length;

if (recv == 16){
socket.write('11'); //****** First write
console.log("11");
}

console.log(socket.name + "length: " + recv);

socket.write('You said: "' + data); //***** Second write

});

// Remove the client from the list when it leaves
socket.on('end', function () {
clients.splice(clients.indexOf(socket), 1);
console.log(socket.name + " left the chat.");
connections--;
console.log('Active connections: ' + connections);
});

}).listen(PORT, HOST);

 // Put a friendly message on the terminal of the server.
console.log('Server listening on ' + HOST +':'+ PORT); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T11:46:42.893

检查[`socket.setNoDelay`](http://nodejs.org/api/net.html#net_socket_setnodelay_nodelay)方法。

此外，您可以使用 的返回值[`socket.write`](http://nodejs.org/api/net.html#net_socket_write_data_encoding_callback)来检测数据是否已发送到线路。

# tfs - TFS“分配给”显示太多用户

> ID：11771030
> 
> 赞同：26
> 
> 时间：2012-08-02T04:25:35.520
> 
> 标签：tfs

我连接到 TFS 服务器，当我创建一个工作项（错误、任务等）时，“分配给”显示了太多用户。我找不到一种方法来限制显示的用户，这会影响连接到服务器的任何其他人。

例如，我在“分配给”下拉列表下：

```
Administrator
LOCALE SERVICE
User 1
User 2
User 3
User 4
User 5 
```

我希望“分配给”下拉列表仅显示：

```
User 1
User 3
User 5 
```

我将如何做到这一点，以便它在服务器上发生变化，如果有人新连接到服务器，他们只能在“分配给”下拉列表中看到三个用户？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-02T15:06:10.840

这是你应该做的：

1.  打开**Visual Studio 命令提示符**。这将为您提供一个命令行窗口，其中 PATH 设置为运行 VS / TFS 工具
2.  下载您要修改的**工作项类型定义（例如，Bug、Task）：**

    *   `witadmin exportwitd /collection:collectionurl /p:project /n:typename [/f:filename]`

    这将为您提供 XML 格式的 WIT 定义。

3.  打开 XML 文件。您将编辑**分配给**字段的**规则**。找到术语**“System.AssignedTo”**
*****   在**Allowed Values**规则元素中，修改（如果不存在，则添加）您的**List Item**元素以将值限制为一个（或多个）**TFS / Active Directory**组的成员。您的字段定义应如下所示：****

 ****`<FIELD name="Assigned To" refname="System.AssignedTo" type="String" syncnamechanges="true" reportable="dimension">
<HELPTEXT>The person currently working on this bug</HELPTEXT>
<ALLOWEXISTINGVALUE />
<ALLOWEDVALUES expanditems="true" filteritems="excludegroups">
<!-- Below is a TFS group. Note you actually type "[project]" verbatim -->
<LISTITEM value="[project]\Contributors" />
<!-- Below is an AD group. The name and group are examples only -->
<LISTITEM value="MYDOMAIN\Developers" /> </ALLOWEDVALUES>
</FIELD>`

**导入您的更改：**

1.  保存您的文件。
2.  在命令行窗口中键入以下内容：
    `witadmin importwitd /collection:collectionurl /p:project /f:filename`

就是这样。您的工作项类型现在仅限于您想要的人员。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-26T15:03:03.770

请参阅我对 2012 年的回答，可能类似：[Visual Studio - 不要在“分配给”字段中显示所有域用户](https://stackoverflow.com/questions/15578355/visual-studio-dont-display-all-domain-users-in-assign-to-field/15640376#15640376)

> 问题是**[TEAM FOUNDATION]\Valid Users**包括 **[TEAM FOUNDATION]\Team Foundation Administrators**其中包括**[BUILT IN]\Administrators**
> 
> 在**TFS 服务器管理控制台**中，我选择了**Application Tier**并单击了**Group Membership**。然后我双击 **[TEAM FOUNDATION]\Team Foundation Administrators**并删除了**[BUILT IN]\Administrators**。
> 
> 现在我只看到我的团队，而不是所有在服务器上担任本地管理员的 SQL 管理员和工程师。所有这些都没有任何命令行或插件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-26T20:02:11.790

你可以：

1) 到这里[https://teamprojectmanager.codeplex.com/releases](https://teamprojectmanager.codeplex.com/releases)下载最新的 Team Project Manager；

2) 启动它（存档中的 *.exe 文件）；

3）将其连接到您的项目；

4）进入右侧的“工作项配置”；

5）然后到“工作项类型”；

6）选择您的项目类型（例如Product Backlog Item），点击“编辑”；

7）按照上面的 Assaf Stone 建议做，在我的情况下，它只是替换

```
<VALIDUSER /> 
```

和

```
<ALLOWEDVALUES expanditems="true" filteritems="excludegroups">
    <LISTITEM value="[project]\Contributors" />
</ALLOWEDVALUES> 
```

8) 保存您的更改；

就是这样！顺便说一句，该工具也可以用于其他一些自定义。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T03:34:04.950

为 Visual Studio 安装 TFS 电动工具后。

1.  从菜单打开`Tools`--> `Process Editor`--> `Work Item Types`--> `Open WIT (WorkItem) Type from Server`。
2.  选择您需要更改的集合和项目和工作项。
3.  打开`Assigned To`字段并单击`Rules Tab`
4.  编辑有效用户并添加您要显示的“组名”。

然后在 Visual Studio 中通过选择保存来保存工作项。

希望这有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T04:55:26.963

在集合下创建一个单独的组并添加用户。打开流程模板将规则添加到分配给字段分配给“有效用户”并选择您创建的组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T15:02:41.277

因此，在查看了一些来自 hems 的关键字后，我得到了一些不错的谷歌搜索结果。

您需要做的第一件事是进入 Visual Studio，然后选择团队菜单，然后从那里转到集合设置。您将看到流程模板，您可以从那里下载您拥有的流程模板。

下载后，您可以修改所需的任何设置。完成后，转到相同的菜单，这次单击上传。

这就是全部，但请注意，您只能在项目创建时选择这个新的。****

# oracle11g - ORA-24778: 无法打开连接

> ID：11771038
> 
> 赞同：1
> 
> 时间：2012-08-02T04:26:51.967
> 
> 标签：oracle11g, websphere, database-link

我得到了`ORA-24778: cannot open connections`，可能的原因是什么？我们在 WAS7 配置文件中部署了许多应用程序，它们连接到 Oracle 11g 中的许多模式。

其中一种模式是通过公共数据库链接通过其他模式连接。我无法为此原因确定解决方案。

重新启动 WAS7 配置文件后，一段时间就可以了，然后再次开始遇到错误。

请帮忙！！

![在此处输入图像描述](../Images/ae4530ee5780bb5ad34adb316de6321d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:43:27.900

我想你错过了告诉我们一些细节：

*   您正在使用 XA
*   您将 XA 与数据库链接结合使用
*   您正在使用共享数据库链接
*   ora-24778 并非一直发生

要么您没有配置共享服务器选项，要么您没有连接到共享服务器。但是，如果您想使用 XA 和数据库链接，Oracle 要求您使用共享服务器。

或者参数**OPEN_LINKS_PER_INSTANCE**设置不充分。请记住，还有一个**open_links** init.ora 参数。open_links 参数不适用于 XA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T13:45:10.620

当您在现有事务中调用 dblink 时，可能会发生此错误。

# eclipse - EAR 文件位于何处？

> ID：11771040
> 
> 赞同：2
> 
> 时间：2012-08-02T04:26:59.540
> 
> 标签：eclipse, jakarta-ee, ear

我用[Java EE](http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition)创建了一个应用程序，现在想在 Internet 上发布它。出于这个原因，我需要[EAR](http://en.wikipedia.org/wiki/EAR_%28file_format%29)文件。但我没能找到它。

我搜索了每个目录，但我看不到它。文件在`EAR`文件目录中的什么位置？

我使用[Eclipse 4.2](http://en.wikipedia.org/wiki/Eclipse_%28software%29#Releases) (Juno) 和 Apache 服务器制作了我的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:45:02.503

右键单击您的项目。单击导出，然后单击“导出...”。输入“耳朵”。将打开新对话框。给出正确的目的地。你可以走了。:)

# vim - 在 Vim 中的其中一个中使用光标时如何用括号括起来？

> ID：11771041
> 
> 赞同：0
> 
> 时间：2012-08-02T04:27:16.187
> 
> 标签：vim

有没有人遇到过这种情况，当您将光标放在括号对之一（括号也是）时，vim hight 会以相对相同的颜色点亮它们。很多时候我都很难弄清楚我的光标当前所在的那个是哪个，即使有一个闪烁的指示，但仍然很难分辨？

有什么解决办法吗？

![在此处输入图像描述](../Images/aac32caa62b8210da5cb2ff8c7f098d2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:54:40.523

```
:NoMatchParen 
```

^ 来自...的帮助：h matchparen

那个地方还告诉你如何通过把这个东西放在你的vimrc中来禁用它，哇哇哇

```
let loaded_matchparen = 1 
```

# c# - 无法调试后台任务

> ID：11771043
> 
> 赞同：1
> 
> 时间：2012-08-02T04:27:47.563
> 
> 标签：c#, windows, microsoft-metro

我创建了一个计时器后台任务，每 15 分钟运行一次。该任务每 15 分钟运行一次，但在错误日志中显示错误。以下错误显示在错误日志中。

激活应用程序 5ff2e7ca-c909-4a8a-bc6c-199d3bca12d9_cj7gm2frb8y4m！应用程序失败并出现错误：连接到系统的设备无法运行。有关其他信息，请参阅 Microsoft-Windows-TWinUI/操作日志。

无法调试后台任务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T17:00:32.900

同样的问题。我之前能够调试任务，但是在从调试切换到发布模式并返回调试模式并将 WMD 更改为 DLL 到 WMD 期间，出现了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:11:59.850

我遇到了同样的问题并通过“添加参考”解决了它。![显示背景示例中的引用的属性页](../Images/6d94c00578b850eb068c2cdeab443084.png)
我在文档中看到过一次或两次提到这一点，并认为它只是意味着添加一个构建依赖项，但这还不够。您必须将后台任务项目（上面称为“Tasks”）引用显式添加到主项目（上面称为 BackgroundTask）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T06:34:10.713

“后台任务”是什么意思？它是 Windows 服务吗？它只是一个在没有 UI 的情况下在后台运行的非服务应用程序 - 例如 Win32 应用程序吗？哪个操作系统？

有几种方法可以将应用程序连接到调试器。一种是在 Visual Studio 中打开您的项目 - 调试菜单 -> 附加到进程。或者放置一个 DebugBreak，当应用程序显示“中止/重试/取消”对话框时，点击重试并附加到调试器。

# c# - 单个 .cs 文件中的多个类 - 好还是坏？

> ID：11771047
> 
> 赞同：28
> 
> 时间：2012-08-02T04:28:19.513
> 
> 标签：c#, c#-4.0

> **可能重复：**
> [在同一个文件中有多个类是一种不好的做法吗？](https://stackoverflow.com/questions/360643/is-it-a-bad-practice-to-have-multiple-classes-in-the-same-file)

建议在 .cs 文件中创建多个类还是每个 .cs 文件都有一个单独的类？（类文件名也是 Animal.cs）

```
public class Animal
{
}

public class Person
{
}

public class Utility
{
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-02T04:36:13.823

简单地说，好的做法是一个文件中的一类。但是如果您的应用程序非常小，您可以在一个文件中使用多个类。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-02T04:31:16.427

在设计课程时，我们尊重单一职责原则。如果代码的形状遵循其语义，阅读代码会变得容易得多，因此按类拆分文件是明智的。

但是，如果有内部类，将它们保存在同一个文件中是有意义的

资料来源：[旧邮报](https://softwareengineering.stackexchange.com/questions/53088/multiple-classes-in-a-single-cs-file-good-or-bad)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-02T04:30:34.127

为了简单起见，您可能应该将它们放在不同的文件中。我想不出将它们保存在同一个文件中的任何好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T04:32:32.747

这取决于您的应用程序。如果它是一个大型应用程序，我认为这不好。数据必须非常有条理。

我认为最好将它们保存在不同的文件中。

但是，如果您正在为一个小型应用程序工作，最好将它们保存在同一个文件中。

希望我对你有所帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T04:35:12.857

从逻辑上讲，它取决于您的应用范围。但通常最好的做法是在单独的类中进行编码（新文件，新类）

拆分文件会更明智。因为行业遵循这些标准......

# c# - 如何从 ListBox 中获取随机项，然后在 C# 中进行比较？

> ID：11771050
> 
> 赞同：1
> 
> 时间：2012-08-02T04:28:41.590
> 
> 标签：c#, random, listbox, compare

目前，我有这个：

```
Random random = new 
random.Next(1, strings.Items.Count);
strings.Select();
strings.SelectedItem = strings.Items[Convert.ToInt32(random)];
var str = strings.SelectedItem;
if (str == "stuff")
{
  //Here
} 
```

它不会在输出中给出任何错误，但是当我测试它时它不会运行。我得到一个`InvalidCastException`，说它无法将类型的对象`System.Random`转换为类型`System.IConvertible`。

![](../Images/18def7c5b9a908a31eda8b90c8383a60.png)

这个错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:34:38.120

您的原始代码不应编译（您错过`new Random();`了第一行）。它应该是：

```
Random random = new Random();
int randomNumber  = random.Next(1, strings.Items.Count);
strings.Select();
strings.SelectedItem = strings.Items[randomNumber];
var str = strings.SelectedItem;
if (str == "stuff")
{
    //Here
} 
```

您在下一行遇到异常，它试图将`random`object 转换为 int，这是您无法做到的，这就是您遇到异常的原因。

```
strings.Items[Convert.ToInt32(random)] 
```

`string.Items`基于`random`对象索引是错误的。它应该是`random`对象返回的随机数，而不是对象本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:30:33.893

将代码更改为以下内容：

```
Random random = new 
int rnd = random.Next(1, strings.Items.Count);
strings.Select();
strings.SelectedItem = strings.Items[rnd];
var str = strings.SelectedItem;
if (str == "stuff")
{
  //Here
} 
```

# javascript - Jquery 事件处理程序未触发

> ID：11771051
> 
> 赞同：0
> 
> 时间：2012-08-02T04:28:43.750
> 
> 标签：javascript, jquery

我有一个网页有一些 javascript 问题。我已经尝试查看所有内容，但是我有一个用户名字段，当您单击它时 ( `.focus`) 它应该会弹出一个弹出窗口。我在firefox中使用了firebug来放置断点，然后`.focus`调用该函数并且即使我确实专注于用户名字段，它也不会被触发。我还查看了拼写和所有内容。似乎找不到问题。希望有人可以提供帮助。还有一件事，这个问题发生在所有浏览器中。

页面链接：[http ://aliahealthcareer.com/SignUp](http://aliahealthcareer.com/SignUp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:42:53.587

您的页面有两个输入，带有`id="username"`.

重复 ids 是无效的 html，但浏览器会忽略它，除了`$('#username')`只找到第一个，因此您的`.focus()`处理程序绑定到那个。

第一个是隐藏在“login_response”div 中，直到您单击“Login”选项，因此如果您单击“Login”，然后单击出现的“Username/Email”字段，您将看到您的事件处理程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:36:49.077

您在加载该页面时遇到 JS 问题。此后 JS 将无法正常工作。你需要先解决这些问题。

# java - 将两个列表结构链接在一起

> ID：11771053
> 
> 赞同：0
> 
> 时间：2012-08-02T04:28:56.813
> 
> 标签：java, list, hashmap, hash

我有两个清单。`List A`和`List B`。

列表 A 的每个元素都有一个来自 的元素列表`List B`。我已经填充了这两个列表，但列表 A 元素中的列表填充仍有待完成。

它们都具有可以进行链接的属性；说

列表 B 中的一个元素；如果将该字段`1`作为列表 A 中元素的 id，则将其添加到列表 A 中的该元素。

现在我正在使用另一个 for 循环中的 for 循环来执行此操作。像这样的东西

```
for(each A)
{
for(each B)
{
if(fieldsmatch)
{
add B to the List of the element from A
}
} 
```

如果我对列表 A 中的所有元素进行哈希处理，然后在遍历列表 B 中的每个元素时执行查找会更好吗？

谢谢。

我可以为此使用 HashMap 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:35:48.393

我会颠倒逻辑。从 B 创建一个 hashmap，将每个 id 映射到具有该 id 的元素列表。然后对于 A 的每个元素，通过 id 查找列表并将其分配给 A 元素中的字段。

```
Map<IdType, List<B>> map = new HashMap<IdType, List<B>>();
for(each b in B) {
    List<B> list = map.get(b.id);
    if (list == null) {
        list = new ArrayList<B>();
        map.put(b.id, list);
    }
    list.add(b);
}
for(each a in A) {
    a.b_list = map.get(a.id);
    // if you need an empty list instead of null:
    if (a.b_list == null) {
        a.b_list = new ArrayList<B>();
    }
} 
```

# jpa - 如何强制 JPA(eclipselink) 使用连接而不是独立查询？

> ID：11771054
> 
> 赞同：2
> 
> 时间：2012-08-02T04:29:22.300
> 
> 标签：jpa, eclipselink

我在我的项目（eclipselink 提供程序）中使用 JPA 2，我有以下问题：

当我执行以下代码时：

```
em.createQuery("select t from " + entityName  + " t where t.id = ?1"
).setParameter(1, id)
.setHint(QueryHints.REFRESH, HintValues.TRUE)
.setHint(QueryHints.REFRESH_CASCADE, CascadePolicy.CascadeAllParts)
.getSingleResult(); 
```

JPA 生成大量查询来获取所有相关对象（即大约 90 个查询来获取实体）。有什么方法可以强制 JPA 使用连接而不是独立查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T13:06:16.177

您可以使用连接提取或批量提取来优化关系。此外，您应该在您的关系上使用 LAZY 以避免在不需要时加载它们。

见， [http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html](http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:54:28.770

在您的查询中，您可以使用`join`and`fetch`自己构建查询。

因此，例如，如果您的实体 t 有

```
@OneToMany public List<RelatedEntity> things; 
```

那么您的查询可以使用：

```
select t from entityName t join fetch t.things where t.id = ?1 
```

阅读 JPQL（Java 持久性查询语言）的文档。

# ruby-on-rails-3 - 使 URL 成为帖子的标题

> ID：11771059
> 
> 赞同：0
> 
> 时间：2012-08-02T04:29:42.003
> 
> 标签：ruby-on-rails-3, url, routes, format

目前我的 URL 显示为`www.website.com/entries/1`，我想让它们显示为`www.website.com/title-of-entry`. 我一直在搞乱`routes`并且已经能够让标题显示在 URL 中，但是 Rails 在不提供 ID的情况下`entry`无法找到。`entry`如果我将 ID 与参数一起发送，则 URL 将显示为`www.website.com/title-of-entry?=1`. 无论如何我可以传递 ID 而不让它作为参数出现在 URL 中吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:48:37.073

通常，您需要将此部分保存在数据库中`title-of-entry`（调用字段`slug`或其他内容）。您的模型可能如下所示：

```
class Entry < ActiveRecord::Base

  before_validation :set_slug

  def set_slug
    self.slug = self.title.parameterize
  end

  def to_param
    self.slug
  end

end 
```

现在您生成的路线如下所示：`/entries/title-of-entry`

要找到相应的条目，您必须更改控制器：

```
# instad of this
@entry = Entry.find(params[:id]

# use this
@entry = Entry.find_by_slug(params[:id]) 
```

**更新**

需要记住的几件事：

1.  您必须确保它`slug`是唯一的，否则`Entry.find_by_slug(params[:id])`将始终返回带有此 slug 遇到的第一个条目。

2.  `Entry.find_by_slug(params[:id])`不会引发`ActiveRecord::RecordNotFound`异常，而只是 return `nil`。考虑使用`Entry.find_by_slug!(params[:id])`.

3.  如果你真的希望你的路线看起来像这样`/title-of-entry`，你以后可能会遇到问题。如果 entry slug 看起来与另一个控制器的名称相同，路由器可能会得到意想不到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:42:37.853

像大多数事情一样，这有一个宝石。

[友好ID](https://github.com/norman/friendly_id)。

安装很简单，您将在几分钟内启动并运行。试一试。

# php - 给出日期时如何在php中获取该周星期一的日期

> ID：11771062
> 
> 赞同：4
> 
> 时间：2012-08-02T04:30:14.540
> 
> 标签：php, datetime, date

> **可能重复：**
> [在 PHP 中获取一周的第一天？](https://stackoverflow.com/questions/1897727/get-first-day-of-week-in-php)

当给出日期时，我应该得到该周星期一的日期。

当给出 2012-08-08 时，它应该返回 2012-08-06。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T04:42:37.247

```
function last_monday($date) {
    if (!is_numeric($date))
        $date = strtotime($date);
    if (date('w', $date) == 1)
        return $date;
    else
        return strtotime(
            'last monday',
             $date
        );
}

echo date('m/d/y', last_monday('8/14/2012')); // 8/13/2012 (tuesday gives us the previous monday)
echo date('m/d/y', last_monday('8/13/2012')); // 8/13/2012 (monday throws back that day)
echo date('m/d/y', last_monday('8/12/2012')); // 8/06/2012 (sunday goes to previous week) 
```

试试看：[http ://codepad.org/rDAI4Scr](http://codepad.org/rDAI4Scr)

...或具有星期天返回第二天（星期一）而不是前一周的变体，只需添加一行：

```
 elseif (date('w', $date) == 0)
    return strtotime(
        'next monday',
         $date
    ); 
```

试试看：[http ://codepad.org/S2NhrU2Z](http://codepad.org/S2NhrU2Z)

你可以传递一个时间戳或一个字符串，你会得到一个时间戳

**文档**

*   `strtotime`- [http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)
*   `date`- [http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:37:25.490

您可以使用该函数轻松制作时间戳[`strtotime`](http://php.net/manual/en/function.strtotime.php)- 它接受“上周一”之类的短语以及辅助参数，这是您可以从使用的日期轻松制作的时间戳[`mktime`](http://au.php.net/manual/en/function.mktime.php)（请注意，特定日期的输入是`Hour,Minute,Second,Month,Day,Year`）。

```
<?php
    $monday=strtotime("monday this week", mktime(0,0,0, 8, 8, 2012));
    echo date("Y-m-d",$monday);
    // Output: 2012-08-06
?> 
```

*编辑*将“上周一”更改`strtotime`为“本周周一”，现在可以完美运行。

# symfony - 如何在 symfony2 中将数据从一个表插入到另一个表中

> ID：11771065
> 
> 赞同：0
> 
> 时间：2012-08-02T04:30:28.430
> 
> 标签：symfony, doctrine-orm

我有一张桌子叫

`tasks---id ,name,groupid`

`user----id,username , groupid`

现在我有另一张桌子

`userTasks with fields id,name, taskid , userid`

现在我希望当新用户被创建或保存在数据库中时

应插入具有相同 groupid asuser 的所有任务

`usertasks table with taskid and userid`

我怎样才能做到这一点

我正在考虑将逻辑放入`postFlush() event`

但我不知道教义如何首先选择然后在该表中插入记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:09:19.407

如果您在插入数据后立即执行此操作，而不是在 postFlush 函数中执行此操作，可能会更舒适和容易。

```
$om->persist($user);
$om->persist($task);
$om->flush();

$usertask = new UserTask($id, $name, $user->getId(), $task->getId());
$om->flush(); 
```

$om 是对象管理器；EntityManager 在 Doctrine 最新版本中已被弃用。

如果你想使用 postFlush() 函数，可能必须将两个 id 声明为私有变量才能获得信息。

# java - 如何从 EditText 创建自定义控件？

> ID：11771069
> 
> 赞同：0
> 
> 时间：2012-08-02T04:30:35.443
> 
> 标签：java, android, custom-controls, android-edittext

我怀疑这是一个相当简单的概念，但我还没有设法在互联网上找到答案。

我创建了一个主要活动，它使用 TextWatcher 格式化 EditText 内的输入：

```
public class MainActivity extends Activity implements TextWatcher {
EditText text;
int textCount;
String numba1, numba, n;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
text = (EditText)findViewById(R.id.editText1);
text.addTextChangedListener(this);
}

/* TextWatcher Implementation Methods */
public void beforeTextChanged(CharSequence s, int arg1, int arg2, int after) {

// Does Nothing

}

public void onTextChanged(CharSequence s, int start, int before, int end) {

//Does random stuff with text
} 

public void afterTextChanged(Editable s) {
//Does much more random stuff with text

}  

protected void onResume() {
    super.onResume();
    SharedPreferences prefs = getPreferences(0); 
    String restoredText = prefs.getString("text", null);
    if (restoredText != null) {
        text.setText(restoredText, TextView.BufferType.EDITABLE);
        int selectionStart = prefs.getInt("selection-start", -1);
        int selectionEnd = prefs.getInt("selection-end", -1);
        if (selectionStart != -1 && selectionEnd != -1) {
            text.setSelection(selectionStart, selectionEnd);
        }
    }
}
protected void onPause() {
    super.onPause();
    SharedPreferences.Editor editor = getPreferences(0).edit();
    editor.putString("text", text.getText().toString());
    editor.putInt("selection-start", text.getSelectionStart());
    editor.putInt("selection-end", text.getSelectionEnd());
    editor.commit();
 } 
```

接下来，我想在我的项目中多次重复使用它，所以想创建一个自定义的 EditText 控件，它看起来就像原来的一样，但会执行所有的格式设置并保存首选项。

理想情况下，我可以只使用 xml 来显示自定义 EditText：

```
<view
  class="com.android.example.myEditText" 
  id="@+id/editText" /> 
```

我已经阅读了[Android 的自定义组件](http://developer.android.com/guide/topics/ui/custom-components.html)教程，但它主要讨论的是改变组件的外观，而不是它们的行为，所以我不愿意使用画布。

那么，我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:43:21.647

您可以创建一个`MyEditText`扩展该类的 Java`EditText`类。确保提供所有构造函数。

然后让这个类实现`TextWatcher`接口并提供所需的实现。

然后，您可以在您的问题中提到的布局中使用此自定义小部件（自定义 EditText），即使用完整的包名称对其进行限定`com.example.MyEditText`

为了使用 TextWatcher，您还可以使用 AutoCompleteEditText 而不是 EditText，这样您将对此自定义控件具有更大的灵活性。.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:18:41.553

创建一个`MyEditText`扩展`EditText`实现所有构造函数。

然后在类中创建一个实例`TextWatcher`作为属性并使用`addTextChangedListner`添加监听器

代码将是这样的

```
public class MyEditText extends EditText {

    TextWatcher textWatcher = new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    };

    public MyEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        addTextChangedListener(textWatcher);
    }

} 
```

# php - 用php将表单和图像上传到mysql奇怪的错误

> ID：11771071
> 
> 赞同：0
> 
> 时间：2012-08-02T04:30:45.877
> 
> 标签：php, mysql, image, forms

我正在尝试使用 PHP 将带有图像的表单上传到 MySQL。但是，我一直收到此错误-

```
Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE, expecting T_STRING or T_VARIABLE or T_NUM_STRING in /home/content/03/6455003/html/leakfaucet/submitAlbumForm.php on line 17 
```

我已经盯着这个看了很长一段时间了，只是无法弄清楚问题是什么，任何帮助将不胜感激！

形式-

```
<?php include "base.php"; ?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 
Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Submit an Album</title>
</head>
<body>
<table>
  <tr>
    <td align="center">Submit an Album</td>
  </tr>
  <tr>
    <td>
      <table>
        <form enctype="multipart/form-data" action="submitAlbumForm.php" method="post">
        <tr>
          <td>Artist Name</td>
          <td><input type="text" name="artistName" size="20">
          </td>
        </tr>
        <tr>
          <td>Album Name</td>
          <td><input type="text" name="albumName" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Release Date</td>
          <td><input type="text" name="releaseDate" size="20">
          </td>
        </tr>
        <tr>        
        <tr>
          <td>Leak Date</td>
          <td><input type="text" name="leakDate" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Where It Leaked</td>
          <td><input type="text" name="whereItLeaked" size="20">
          </td>
        </tr>
        <tr>
        <tr>
          <td>Album Cover</td>
          <td><input type="file" name="albumCover">
          </td>
        </tr>
        <tr>        
          <td></td>
          <td align="right"><input type="submit" name="submit" value="Add"></td>
        </tr>
        </table>
      </td>
    </tr>
</table>
</body>
</html> 
```

上传脚本

```
<?php
include "base.php";

//Setting up images directory
 $target = "images/"; 
 $target = $target . basename( $_FILES['photo']['name']);

 $albumCover=($_FILES['photo']['name']); 

//inserting data order
$order = "INSERT INTO albums
            (artistName, albumName, releaseDate, leakDate, whereItLeaked, albumCover)
            VALUES
            ('$_POST[artistName]',
            '$_POST[albumName]',
            '$_POST[releaseDate]',
            '$_POST[leakDate]',
            '$_POST[whereItLeaked]',
            '($_FILES['albumCover']['name'])')";  /*this is the line where the error keeps occurring. I've tried a number of variations and still can't seem to get it right*/

  if(move_uploaded_file($_FILES['albumCover']['tmp_name'], $target)) 
 { 

 //Tells you if its all ok 
 echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded, and your information has been added to the directory"; 
 } 
 else { 

 //Gives an error if its not 
 echo "Sorry, there was a problem uploading your file."; 
 } 

//declare in the order variable
$result = mysql_query($order);  //order executes
if($result){
    echo("<br>Thank you for submitting!");
} else{
    echo("<br>Sorry, something went wrong! Please try again!");
}
?> 
```

我的带有连接信息的 base.php 文件

```
<?php
session_start();

$dbhost = "";
$dbname = "";
$dbuser = "";
$dbpass = "";

mysql_connect($dbhost, $dbuser, $dbpass) or die("MySQL Error: " . mysql_error());
mysql_select_db($dbname) or die("MySQL Error: " . mysql_error());
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:46:56.527

试试这个获取值到变量中使用 mysql_real_escape_string

```
 $artist_name =mysql_real_escape_string( $_POST['artistName']);
 $albumname=  mysql_real_escape_string($_POST['albumName'] );
 $releaseDate=  mysql_real_escape_string($_POST['releaseDate']);
...

"INSERT INTO albums
        (artistName, albumName, releaseDate, leakDate, whereItLeaked, albumCover)
        VALUES ( '$artist_name', '$albumname',...)" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:44:55.970

您不能在 PHP 双引号字符串中使用带引号的数组键。它会引发警告。另外，您不能在双引号字符串中使用多维数组。PHP 的解析器不是“贪婪”的，只会看到单层数组，例如

```
$foo = array();
$foo['bar'] = array();
$foo['bar']['baz'] = 'fizzbuzz';
echo "$foo['bar']['baz']"; 
```

将发出有关引用键的警告，输出实际上是：

```
Array['baz'] 
```

因为 PHP 看不到第二级数组。

您需要使用以下`{}`符号：

```
'({$_FILES['albumCover']['name']})')";
  ^---                          ^--- 
```

这两者都允许引用数组键，并强制 PHP 考虑整个数组引用，而不仅仅是第一级。

除此之外，您的代码很容易受到[SQL 注入攻击](http://bobby-tables.com)，您应该阅读并学习如何避免这些攻击，然后再将此代码放在面向公众的网站上，否则请享受您的服务器 pwn3d。

# actionscript-3 - AS3 - 让脚本等待击键

> ID：11771073
> 
> 赞同：0
> 
> 时间：2012-08-02T04:30:58.790
> 
> 标签：actionscript-3, keypress, wait, lag, onkeydown

我需要我的脚本停止并等待，直到按下“输入”键，然后继续，如果不满足要求，则返回并再次等待。

它是我正在开发的游戏的登录屏幕，它需要等待用户按 Enter，然后检查提供的凭据并允许/拒绝它们。

```
 //log-in screen
        loginframe = new Login_Frame();
        addChild(loginframe);

        LoginToServer();

        function LoginToServer():Boolean
            {

                inputname = new TextField;
                inputname.type = TextFieldType.INPUT;
                inputname.border = true;
                inputname.x = 200;
                inputname.y = 200;
                inputname.height = 35;
                inputname.width = 545;
                inputname.multiline = false;
                inputname.text = "example";
                loginframe.addChild(inputname);

                inputpass = new TextField;
                inputpass.type = TextFieldType.INPUT;
                inputpass.border = true;
                inputpass.x = 200;
                inputpass.y = 300;
                inputpass.height = 35;
                inputpass.width = 545;
                inputpass.multiline = false;
                inputpass.text = "example";
                loginframe.addChild(inputpass);

                loginframe.addEventListener(KeyboardEvent.KEY_UP, hwndLogKeyboard);

                while (!loginsucsess)
                    {
                        //do nothing *this halts the compiler, takes 30+ seconds for window to appear after execution*
                        //and causes the debugger to shut off (due to delay fault)
                        //so i have three problems
                        //1\. this is clearly not an accepable way to do this
                        //2\. this code dosnt work, without my debugger i cant fix it
                        //3\. even if the code did work, this is a huge project, i cant be goin without my debugger
                    }

                    return true;
            }

        function hwndLogKeyboard(evt:KeyboardEvent):void
            {
                if (evt.keyCode == 13)
                    {
                        if ((inputname.text == "tyler") && (inputpass.text == "shadowcopy"))
                            loginsucsess = true;
                    }
            } 
```

我来自 C++ 背景，这个解决方案可以很好地工作，但 flash 似乎在旋转拇指时遇到了问题。

当然，我尝试询问 Google，但搜索结果甚至没有接近所需主题（我：AS3 等待按键 - Google：学习 Flash OOP！）<--不，糟糕的 Google。

提前谢谢；泰勒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:37:09.753

阻止 UI 在任何语言中都不是最佳选择，除非您正在制作文本控制台应用程序。

`while()`您的实现在您的语句中无限循环，直到达到最大脚本执行超时。

相反，使用异步设计模式：

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.text.TextField;

    [SWF(percentWidth = 100, percentHeight = 100, backgroundColor = 0xefefef, frameRate = 60)]
    public class LoginForm extends Sprite
    {

        protected var username:TextField;
        protected var password:TextField;

        public function LoginForm()
        {
            super();

            // construct view
            username = new TextField();
            addChild(username);

            password = new TextField();
            addChild(password);

            // listen for change events from the text fields
            username.addEventListener(Event.CHANGE, loginChangeHandler);
            password.addEventListener(Event.CHANGE, loginChangeHandler);
        }

        protected function loginChangeHandler(event:Event):void
        {
            if ((username.text == "tyler") &&
                (password.text == "shadowcopy"))
            {
                // authentication verified - continue
            }
        }

    }
} 
```

当任一文本字段值更改时，将针对您指定的身份验证凭据对它们进行测试。如果满足，可以继续；否则，应用程序在没有任何开销的情况下空闲。

拥有一个登录按钮可能更符合用户体验。

每次调试时，从 Flash Professional 转到“调试”菜单并选择“调试影片”。

在 Flash Builder 中，右键单击项目应用程序并“调试为”或按工具栏中的调试按钮。基于 Eclipse 构建，您可能会发现它在代码编辑、调试和分析方面更加健壮。

# iphone - 如何找出一个人的手指何时离开屏幕？

> ID：11771074
> 
> 赞同：0
> 
> 时间：2012-08-02T04:31:00.023
> 
> 标签：iphone, ios, uigesturerecognizer

这几乎就是我想知道的。有人能快速回答吗？

我希望我的程序在用户停止滚动并抬起手指时执行一些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:10:57.850

如果您使用 scrollView ，最好使用委托：

```
// called on finger up if the user dragged. decelerate is true if it will continue moving afterwards
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:34:35.350

您可以实现以下方法：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

每当您抬起手指时，都会调用它。

# php - PHP 覆盖 AJAX 发布请求

> ID：11771076
> 
> 赞同：2
> 
> 时间：2012-08-02T04:31:25.693
> 
> 标签：php, javascript, jquery, tags, tag-it

在我的代码上我有这个回调

```
 $('#tagList').tagit({
            //Every new dag will be pushed in the list array
            tagsChanged: function(tagValue,action,element){
                list.push(tagValue);
                $.ajax({
                    url: "dostuff.php",
                    type: "POST",
                    data:{ items:list.join("::")},
                    success: function(data){
                        $('#wrap').append(data);
                    }
                });
            }
         }); 
```

每次我添加标签时，新添加的标签都会被推送到数组中，然后它会发出 AJAX 发布请求。

然后我在这里有这些领域

```
<form method = "POST" action = "demo3.php">
News Title <input id = "news_title" type = "text" name = "news_title" /><br>
    <label>Insert Some tags </label>
    <ul id="tagList" data-name="demo2">
    </ul>
        <input type = "submit" name = "submit" id = "submit" value = "Post News" />
</div>
</form> 
```

当我单击提交（它基本上重新加载页面）时，$_POST['items']（这是在每次添加新标签时在 AJAX 请求上创建的）在 POST 全局数组中被删除或删除。因此将我的 $_POST 全局数组留空。

无论如何我可以合并这两个吗？或者无论如何不要让PHP覆盖或删除`$_POST['items']`？因为我需要查询项目

我也在使用一个名为 tagit 的插件

如果你们有兴趣这里是我的整个代码

```
<!doctype html>
<html>
<head>
  <script src="demo/js/jquery.1.7.2.min.js"></script>
  <script src="demo/js/jquery-ui.1.8.20.min.js"></script>
  <script src="js/tagit.js"></script>
  <link rel="stylesheet" type="text/css" href="css/tagit-stylish-yellow.css">
  <script>
    $(document).ready(function () {
    var list = new Array();
         $('#tagList').tagit({
            //Every new dag will be pushed in the list array
            tagsChanged: function(tagValue,action,element){
                list.push(tagValue);
                $.ajax({
                    url: "dostuff.php",
                    type: "POST",
                    data:{ items:list.join("::")},
                    success: function(data){
                        $('#wrap').append(data);
                    }
                });
            }
         });
    });
  </script>
</head>
<body>

<div id="wrap">
<div class="box">
<button class = "viewTags">View Tags</button>
<form method = "POST" action = "demo3.php">
News Title <input id = "news_title" type = "text" name = "news_title" /><br>
    <label>Insert Some tags </label>
    <ul id="tagList" data-name="demo2">
    </ul>
        <input type = "submit" name = "submit" id = "submit" value = "Post News" />
</div>
</form>
</div>
</body>
</html> 
```

这是东西。php

```
 <?php 

        $lis = $_POST['items'];
        $liarray = explode("::", $lis);
        print_r($liarray);
        print_r($_POST);
 ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T06:24:27.507

PHP 处理请求的方式是每个请求都与其他请求完全分离，这有时被称为无共享架构。这就是从`<form>`to生成的请求`demo3.php`不知道 ajax 发送到的其他请求的原因`dostuff.php`是这种分离。这不一定是特定于 php 的，这是因为底层[HTTP 协议](http://www.w3.org/Protocols/)是无状态的。

如果您想在`<form>`提交时生成的请求中包含标签，您需要将这些值添加到表单中。为此，tagit 库有一个由两个配置选项控制的内置方式：

1.  [itemName](https://github.com/aehlke/tag-it#itemname-string)控制参数的名称（默认为`item`）
2.  [fieldName](https://github.com/aehlke/tag-it#fieldname-string)控制调用字段中的内容`itemName`（默认为`tags`）

如果你像这样初始化你的插件（没有样式的[演示）：](http://jsfiddle.net/S3xdC/1/)

```
$('#tagList').tagit({
    itemName: 'article',
    fieldName: 'tags'
}); 
```

然后在提交时，发送到 php 的参数应该是 in `$_POST['article']['tags']`，生成的参数名称看起来像`article[tags][]`. 请参阅插件的[演示](http://aehlke.github.com/tag-it/examples.html)。（页面源有很好的格式化 javasript 示例）。默认情况下，只需调用`$('#tagList').tagit();`而无需所有额外的回调或配置即可。

这就是它应该如何显示在 firebug 的网络面板中（不要介意 demo4.php 不存在） ![点击提交后萤火虫网面板的照片](../Images/9a862b338b71bdc79a2c3ce14f654169.png)

* * *

如果您想手动执行此操作，您可以挂接到这样的`submit`事件`<form>`：

```
$('form').on('submit', function(){
    var $form = $(this), 
        tags = $('#tagList').tagit('assignedTags'); // see the docs https://github.com/aehlke/tag-it/blob/master/README.markdown#assignedtags
    $.each(tags, function(i, tag){
        $('<input type="hidden" name="tags[]">').attr('value', tag).appendTo($form); // using jquery to create new elements
    });
}); 
```

通过使用tagit 插件的[assignTags](https://github.com/aehlke/tag-it/blob/master/README.markdown#assignedtags)方法（使用 jquery ui 调用模式），您可以获得标签名称，并且只需在提交之前添加一个新的隐藏输入`<form>`。如果您甚至可以包含任何可以想象的字符串，那么像这样将它们连接在一起可能不是一个好主意`::`。

在示例中，我为每个标签使用了单独的输入，因此`demo3.php`它们将作为数组到达（以`[]`使 php 结束名称）。

# html - Pre 标签添加新行

> ID：11771078
> 
> 赞同：0
> 
> 时间：2012-08-02T04:31:41.420
> 
> 标签：html, css

段落中有一个表格。表格内的单元格有额外的新行。以下是代码的相关部分。

```
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            div.Page1773023 {}
            .f31 {font-family:Times New Roman;font-size:12.00pt;font-style:normal;font-weight:normal;line-height:114%;}
            .f1 {font-family:Arial;font-size:10.00pt;font-style:normal;font-weight:normal;line-height:114%;}
        </style>
    </head>
    <body>
        <div class="Page1773023" style="height:1056px;width:816px;">
            <p class="normal"><pre>
                <table class="normal" style="width:99.00px;border-spacing:0px;border-collapse:collapse;border:1.00px solid #000000;;">
                    <tr>
                        <td style="height:16.000px;width:96.000px;;;" >
                            <p class="normal"><pre>
                            <span class="f1" style="color:#FF0000;" >11111</span></pre></p>
                        </td>
                    </tr>
                </table><br style="clear:left;"/>
            </pre></p>
        </div>
    </body>
</html> 
```

现在，当我`<pre>`从最外层删除标签时`<p>`，看不到新行。任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:05:32.093

在 firefox 上下载 HTML Tidy Plugin 并修复错误...

顺便说一句，我会尽量减少您使用的标签。为什么需要 p, span, table, div, pre ？

首先决定布局应该是什么，只写你真正需要的代码。

这是一个如何实现相同输出的示例。确保您的浏览器上有 firebug 或一些检查工具。它可以帮助您对边距进行细微更改并找到正确的值。

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
        .box {
            width:104px;
            height:80px;
            border:1px solid;
            margin-top:10px;
        }

        .box td {
            color: red;
            font-family: Arial;
            font-size: 10.00pt;
            font-style: normal;
            font-weight: normal;
            line-height: 114%;
        }
    </style>
  </head>
  <body>
    <table class="box">
        <tr>
            <td>
                11111
            </td>
        </tr>       
    </table>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:40:09.530

`<pre>`和之间的新行在标签`<table>`内显示。`<pre>`这可以通过将它们放在同一行来解决：`<pre><table ...>`

# d - 模板约束内的模式匹配

> ID：11771079
> 
> 赞同：3
> 
> 时间：2012-08-02T04:31:49.613
> 
> 标签：d

这个问题是基于安德烈对[我关于签名约束的问题的回答。](https://stackoverflow.com/questions/11378470/signature-constrait-for-generic-types)

```
struct S(int x, int y) {
  void fun(T)(T t) if (is(T U == S!(a, b), int a, int b)) { }
}

template s(int a, int b) {
  enum result = S!(a,b)();
  alias result s;
}

void main() {

  auto s1 = S!(1, 1)();
  auto s2 = S!(2, 2)();
  auto s3 = s!(3, 3);
  auto s4 = s!(4, 4);

  s1.fun(s1);  // ok
  s1.fun(s2);  // ok
  s1.fun(s3);  // compile error
  s3.fun(s1);  // ok
  s3.fun(s3);  // compile error
  s3.fun(s4);  // compile error
} 
```

我不明白为什么代码会产生编译错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:40:46.033

首先，我不建议使用裸模板来生成对象/结构的实例，因为您本质上要求该对象能够进行 CTFE。如果您需要一个实例，最好的选择是`return`从模板函数中获得它：

```
@property S!(a, b) s(int a, int b)()
{
    return S!(a, b)();
} 
```

但是，这似乎仍然不适用于模板约束。我认为这必须是一个前端错误。据我所知，返回的类型似乎无法在 is() 表达式中正确检查，除非它已经在其他地方实例化，例如：

```
struct S(int x, int y) 
{
    void fun(T)(T t) 
        if (is(T U == S!(a, b), int a, int b))
    {

    }
}

@property S!(a, b) s(int a, int b)()
{
    return S!(a, b)();
}

void main() 
{
    auto s1 = S!(1, 1)();
    auto s2 = S!(2, 2)();  // comment out and you get errors in fun() call
    auto s3 = s!(2, 2);
    s1.fun(s3);
} 
```

我会将此作为错误提交。

编辑：归档为[问题 8493](http://d.puremagic.com/issues/show_bug.cgi?id=8493)。

# java - 计数值通过soap webservice显示在android模拟器上

> ID：11771083
> 
> 赞同：0
> 
> 时间：2012-08-02T04:32:36.670
> 
> 标签：java, android, mysql, soap

我尝试在 Android 中显示一个值，该值是通过肥皂调用检索的。但我不能让它工作。如果我运行我的应用程序，计数值会显示在我的 tomcat-apache 上。但是计数值没有显示在我的安卓模拟器上。为什么这里没有显示计数值。请帮我。我知道原因。但我无法弄清楚代码部分。我的错误是我的 android 代码部分。我可以在哪里更改我的代码。

这是我的网络服务代码：

```
public class RetailerWs {

public String customerData(){
String customerInfo = "";
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart-432pro","root","");
//Find customer information where the customer ID is maximum
PreparedStatement statement =  con.prepareStatement("select * from xcart_orders where status='Q' AND date = CURDATE()");

 ResultSet result = statement.executeQuery();

  int count=0;    
   while(result.next()){

 count++;
 System.out.println(count);
 }
  }

 catch(Exception exc){
    System.out.println(exc.getMessage());
  }

   return customerInfo;
    }

   } 
```

这是我的 android 代码部分：

```
 public class RetailerActivity extends Activity {
   private static final String SOAP_ACTION = "http://xcart.com/customerData";
   private static final String METHOD_NAME = "customerData";
   private static final String NAMESPACE = "http://xcart.com";
   private static final String URL = "http://192.168.1.168:8085/XcartLogin/services/RetailerWs?wsdl";
     /** Called when the activity is first created. */
    @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.retrieve);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array

        TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
       }
      }
      } 
```

我应该在哪里更改我的 android 代码以在 android 模拟器上打印计数值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:08:53.460

你确定你在 TextView 中获得了一些价值吗？您可以通过以下方式在android中设置TextView。

```
 LinearLayout lLayout = (LinearLayout)findViewById(R.id.l_layout); // This is my main layout

 TextView tv = new TextView(this);
 tv.setText("Akshay");  // Here I set the value to TextView
 lLayout.addView(tv);   // Here I am adding this view in main View. 
```

希望这可以帮助 ：）

# entity-framework - ef代码第一种子多对多关系

> ID：11771095
> 
> 赞同：3
> 
> 时间：2012-08-02T04:34:30.063
> 
> 标签：entity-framework, ef-code-first, code-first, entity-framework-migrations

我有一个多对多的关系。

一个标签可以有多个文章，一个文章可以有多个标签。

```
public class Article : Entity
{
    [StringLength(150)]
    public string Name { get; set; } 
    public string Content { get; set; } 
    public ICollection<Tag> Tags { get; set; }
}
public class Tag : Entity
{
    public string Name { get; set; }
    public ICollection<Article> Articles { get; set; }
} 
```

ef codefirst 创建一个`TagArticles`用列调用的表`Tag_Id`和`Article_Id`

我试着像这样播种

```
 protected override void Seed(Context context)
    {
        var articles = new List<Article>();
        for (int i = 0; i < 10; i++)
        {
            articles.Add(new Article { Name = "test " + i,  Content = "lourm ipsum"  });
        }
        var tags = new List<Tag>();
        for (int i = 0; i < 10; i++)
        {
            tags.Add(new Tag { Name = "tag " + i , Articles = new  Article[]{ articles[0] }});
        }
        context.Articles.AddOrUpdate(x => x.Name, articles.ToArray());
        context.Tags.AddOrUpdate(x => x.Name, tags.ToArray());
    } 
```

但是迁移后 TagArticles 表为空，如何为桥表做种？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:11:23.840

当我把它放进去时，你上面的代码对我有用，但我必须添加主键才能真正保存数据库。

你在哪里设置主键？那是在实体继承中吗？

播种后，数据库中是否有文章和标签（在我纠正 PK 问题之前，我没有）

# android - 小部件在 Android 4.0+ 中不显示

> ID：11771099
> 
> 赞同：1
> 
> 时间：2012-08-02T04:35:03.013
> 
> 标签：android, android-widget, adt

我这里有一个基本的时钟小部件，它在 4.0 以下的 android 版本上工作得很好，你可以长按，选择小部件，它就在那里。但是当我尝试在 4.0 或更高版本的模拟器或真实设备上运行它时，它不会仅在设置>存储>应用程序中的小部件部分显示。我尝试添加一个简单的活动，它只是为用户提供有关如何安装小部件的指示，该建议在此处作为答案给出：[Android 4.0：小部件未出现？](https://stackoverflow.com/questions/8794952/android-4-0-widgets-not-appearing) . 除非我做错了，否则小部件仍然不会出现在小部件抽屉中。

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.widgetexample1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="14" />
    <uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
       <activity android:name=".MainActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />                
        </intent-filter>
    </activity>
        <receiver android:name=".ExampleAppWidgetProvider"
            android:label="8-bit cloud widget 1">
            <intent-filter>
                <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

                </intent-filter>
                <meta-data android:name="android.appwidget.provider"
                    android:resource="@xml/widget1_info" />
        </receiver>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T09:25:35.483

在您的 manifest.xml 中添加以下内容。“android:exported="true"。它可能会有所帮助。试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T10:42:58.633

看起来您正在受到我认为发生在 HoneyComb 中的安全升级的打击。

基本上，在较新版本的 Android 中，如果不先启动`Activity`.

所以向项目添加一个活动，首先运行它，我认为你的小部件会更新。

一个很好的例子是使用设置风格的活动，或者可能和关于框类型的东西，告诉用户一些关于你的小部件的信息。（我在我的小部件中使用设置）。

* * *

欲了解更多信息：

*   [Android 4.0：小部件没有出现？](https://stackoverflow.com/questions/8794952/android-4-0-widgets-not-appearing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T21:55:00.850

在您的小部件元数据 xml 文件中，检查标记`<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"`android:xmlns 属性应以`http://`.

# apache - Apache 服务器不会在 MAMP 中启动

> ID：11771105
> 
> 赞同：22
> 
> 时间：2012-08-02T04:35:38.017
> 
> 标签：apache, mamp

在 MAMP 中时，Apache 服务器不会启动。以下是错误日志：

```
[Wed Aug 01 21:07:34 2012] [notice] Digest: generating secret for digest authentication ...
[Wed Aug 01 21:07:34 2012] [notice] Digest: done
[Wed Aug 01 21:07:34 2012] [notice] Apache/2.0.63 (Unix) PHP/5.3.2 DAV/2 configured -- resuming normal operations
[Wed Aug 01 21:08:00 2012] [notice] caught SIGTERM, shutting down
[Wed Aug 01 21:08:01 2012] [notice] Digest: generating secret for digest authentication ...
[Wed Aug 01 21:08:01 2012] [notice] Digest: done
[Wed Aug 01 21:08:01 2012] [notice] Apache/2.0.63 (Unix) PHP/5.3.2 DAV/2 configured -- resuming normal operations
[Wed Aug 01 21:08:51 2012] [notice] caught SIGTERM, shutting down 
```

除了在 htdocs 中创建一个新文件夹之外，我认为我没有做任何普通的事情。有什么建议么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2014-10-19T15:46:09.833

我的解决方案：在 /Applications/Mamp/Library/bin 中，找到文件 envvars 并将其重命名为 _envvars。

现在它可以工作了。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-11-21T17:02:47.010

我在上面的相同日志输出中遇到了同样的问题，但在我的情况下不需要重新安装 MAMP 来解决问题。当我遇到此错误时，它与我设置的主机之一有关。单击主机选项卡，查看是否有任何主机显示为红色：

![在此处输入图像描述](../Images/225bacb09783e2b007f1475b7d1311b4.png)

红色的主机需要 SSL 证书。在我更改应用程序的文件结构后，在配置中我没有对所需证书的有效引用。修复此问题并应用更改后，主机不再以红色突出显示，我能够通过 MAMP 启动 Apache。

此外，您可以通过在终端中运行以下命令来确保问题与您的 Apache 客户端本身无关：

```
sudo /Applications/MAMP/Library/bin/apachectl restart 
```

或者

```
sudo /Applications/MAMP\ PRO/Library/bin/apachectl restart 
```

如果您能够在终端中启动 Apache，则您已排除 MAMP 的 Apache 客户端本身存在错误。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-10-19T15:34:57.303

将文件 envvars 的名称更改为 /Applications/MAMP/Library/bin 中的 _envvars ，就是这样。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-17T13:13:35.380

我没有重新安装 mamp，而是执行了以下操作：

```
1\. Moved back to default mamp ports
2\. Started mamp   
3\. Stopped mamp 
4\. Went back to ports 80 443 3306 
```

它开始工作了。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-08-02T05:43:16.907

刚刚重新安装了 MAMP 并更改了端口。不知道是什么问题，但现在已经解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-21T11:53:50.000

如果您现有的 MAMP PRO 突然不再启动 Apache，则可能是 vhosts 设置中出现不可见的错误。

apache_error.log 中通常没有任何指示 - 它只是带有消息。

```
Apache wasn't able to start. Please check log for more information. 
```

就我而言，这是自定义虚拟主机设置中的错误路径，例如

```
Include /path/to/project/rewrite.conf 
```

Vhost 配置保存在 ~/Library/Application Support/appsolute/MAMP PRO/httpd.conf 中，因此您可以在那里检查设置。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-18T03:12:43.967

## 解决方案：MAMP 4 - 2017 年 12 月，*macOS High Sierra*

MAMP Pro 3.4.1 有这个问题，所以我支付了新的许可证，所以我可以升级到版本 4.2.1，但问题仍然存在。我尝试了上述解决方案，不幸的是没有运气。

然而，我确实通过选择目录指令的**所有**选项让 Apache 再次运行，如下图所示：

[![MAMP Pro 4.2.1 - Apache <目录> 指令](../Images/0a90c0eb2685bab23bb4d8b8c354ab85.png)](https://i.stack.imgur.com/D7sPR.png)

这个问题完全随机发生，有一天一切正常，然后下一个...... Apache 说不。我认为问题在于，就像 Web 浏览器使用缓存并分别保持打开的进程一样，我认为有时当 MAMP 或 MAMP Pro 没有正确关闭时，它可能会搞砸 Apache，因为它没有正确停止。

我希望这个答案可以帮助任何遇到这个问题的人！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-24T00:21:38.490

如果上面的答案没有解决它，您可以检查文档根目录是否未设置在某些不存在的目录上。转到 MAMP 设置 > Web 服务器 > 文档根目录

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-21T13:41:53.040

我找到了一个解决方案：

只是：

在 /Applications/Mamp/Library/bin 中，找到文件**envvars**并将其重命名为**_envvars**。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-10-06T14:14:15.773

今天我遇到了这个问题……在尝试了几种解决方案后，我发现如果 MAMP 不再找到安全 localhost 使用的证书，则可能会出现此对话框消息。所以要小心把它们放在一个你不会移动或删除的地方。

希望能帮助到你

# python - 列出对副作用的理解——惯用正确的还是可憎的？

> ID：11771109
> 
> 赞同：3
> 
> 时间：2012-08-02T04:35:47.337
> 
> 标签：python, idioms

我有一个`cheese`对象列表。`Cheese`有一种方法可以用 db 和诸如此类的东西做很多事情，称为`out_of_stock()`.

所以：

```
[cheese.out_of_stock() for cheese in cheeses] 
```

我觉得很草率。就像我正在为一堆副作用（清零库存）做某事（创建一个列表）。

我是不是很傻？这对方法来说是主观的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T04:44:26.607

列表推导用于创建列表。这不是你在这里做的，所以我会避免它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T04:40:25.907

就个人而言，我会做

```
for cheese in cheeses:
    cheese.out_of_stock() 
```

这对我来说感觉更明确。这是另一行，但我怀疑另一个阅读该代码的程序员会很好地理解它，而列表理解版本可能会有点混乱。此外，我可以想象其他人可能会稍后出现（不知道`out_of_stock`不会返回值）并稍后尝试使用该列表。

不过，我想这并没有什么*问题*。归根结底，这取决于谁将在以后阅读该代码（您自己或其他人）以及他们是否会知道发生了什么。

编辑：另外，您正在使用从 Haskell 中获取的可爱的函数式编程结构来做令人讨厌的有状态的事情......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T04:43:40.523

从语义上讲，如果 cheese.out_of_stock 返回一个布尔值，那就没问题了。但是，如果 cheese.out_of_stock 不返回值，则不太推荐这样做，那么它将非常混乱且无法维护。

```
import this 
```

了解更多信息

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T04:40:13.277

列表推导通常用于过滤（或稍后使用推导结果的类似操作），但不用于替换对迭代数据调用方法的循环。所以这行得通，但它锁得很丑。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T05:26:00.070

如果您正在使用 this 的返回值做某事，那么`cheese.out_of_stock()`这完全是 Pythonic。如果您要丢弃列表理解的结果，那是不好的风格。

创建列表是浪费时间和内存，只需使用[彼得答案](https://stackoverflow.com/a/11771154/174728)`for`中的两行循环

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T06:00:34.997

答案完全取决于您是否想要这份清单。列表推导通常可以很好地替代这样的循环：

```
stock = []
for cheese in cheeses:
   stock.append(cheese.out_of_stock()) 
```

但很少有这样的循环：

```
for cheese in cheeses:
    cheese.out_of_stock() 
```

当人们阅读列表理解时，他们通常不会期望它有副作用——除了像缓存这样不会影响程序含义的东西，当然还有构建列表。当然，对于程序的正确性来说，它的任何副作用都不是必需的——这也意味着如果你使用没有[命令-查询分离](http://en.wikipedia.org/wiki/Command-query_separation)的 API，那么对于第一种类型的循环来说，它们是值得避免的——也就是说，即使你*确实*想要列表，如果`.out_of_stock()` *还*具有您所依赖的副作用，则应考虑使用循环而不是理解。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T06:36:37.073

太丑了，别做

有一种非常相似的方法，它并不难看。它需要一个像这样的预定义函数：

```
def consume(iter):
    for i in iter:
        pass 
```

现在您可以编写如下代码：

```
consume(cheese.out_of_stock() for cheese in cheeses) 
```

所以真的，这只是 Peters 的建议，包装在一个用生成器表达式调用的函数中。虽然比列表理解要好得多，但它仍然不是很漂亮。最好（最明确）直接使用 for 循环。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T04:42:57.060

```
for cheese in cheeses: cheese.out_of_stock() 
```

仍然是一个衬里，避免了创建不必要列表的副作用。

# facebook - 系统未经许可检测您的 Fb 用户详细信息

> ID：11771111
> 
> 赞同：2
> 
> 时间：2012-08-02T04:35:59.600
> 
> 标签：facebook

如果这里有人执行与tripadvisor.com 相同的功能，我不会这样做。基本上，当您访问[http://www.tripadvisor.com](http://www.tripadvisor.com)时，它会自动检测您的 FB 用户详细信息（如果您当前也登录 FB），而不要求您授权他们的应用程序。我试图找出他们是如何做到这一点的将近 4 天，但无济于事。我相信根据 FB OAuth 2.0，您必须先授予/授权应用程序，然后才能获取用户信息/详细信息等。如果有人能在这件事上帮助我，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:51:02.143

作为“即时个性化”试点计划的一部分，Facebook 目前允许 8 家其他公司（包括 TripAdvisor）读取您的公开 Facebook 数据。

Facebook 的常见问题解答： [https ://www.facebook.com/help/?page=202975766411357](https://www.facebook.com/help/?page=202975766411357)

如果您对技术细节感兴趣，您可以从这篇博客文章开始，回顾该程序的安全漏洞： http: [//gdeglin.blogspot.co.uk/2010/09/risks-of-facebooks-instant.html](http://gdeglin.blogspot.co.uk/2010/09/risks-of-facebooks-instant.html)

# objective-c - 在视图控制器之间传递应用程序上下文

> ID：11771113
> 
> 赞同：2
> 
> 时间：2012-08-02T04:36:06.043
> 
> 标签：objective-c, ios, dependency-injection

我看到了在视图控制器（注入）之间传递依赖关系而不是使用全局状态的好处。然而，我很好奇人们如何在实践中实现这一点。

在最简单的情况下，很容易在两个视图控制器之间传递一个模型：

```
MyViewController *vc = [[MyViewController alloc] init];
vc.model = model;
[self.navigationController pushViewController:vc animated:YES]; 
```

但是，我发现扩展这种方法存在两个问题：

1）您可能有一些所有视图控制器都需要的服务（位置管理器、对象存储等）。因此，您最终会得到一个必须记住为每个视图控制器设置的依赖项列表：

```
MyViewController *vc = [[MyViewController alloc] init];
vc.model = model;
vc.locationManager = locationManager;
vc.objectStore = objectStore;
...
[self.navigationController pushViewController:vc animated:YES]; 
```

2）第二个问题与第一个问题有关：您实际上并没有强制在推送视图控制器之前设置这些依赖项。我想您可以编写一个需要所有依赖项的 init 方法，但您仍然无法强制执行它。它也将是冗长的，如果您想稍后添加依赖项，那将是一个巨大的痛苦。

处理这些问题的方法是什么？似乎没有多少 Obj-C 人使用依赖注入框架。我能想到的一种方法是创建一个包含所有共享依赖项的 AppContext 类，然后将其传递给所有视图控制器。

此外，通常您使用接口而不是实现来声明依赖项（至少在 Java 中），因此您可以模拟它们以进行单元测试。我没有看到很多 Obj-C 人以这种方式使用协议。然后你如何模拟单元测试的依赖关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:46:05.857

依赖注入的关键是*所有硬依赖都应该在构造函数中指定！*

因此，您的构造函数应如下所示：

```
- (id)initWithModel:(Model *)model locationManager:(LocationManager *)locationManager objectStore:(ObjectStore *)objectStore; 
```

任何不是可选的并提供类本身不应该负责构造的设施的东西都应该在构造函数中指定。这对测试也有*很大*帮助，因为可以为对象本身提供其依赖项的模拟版本，以隔离网络套接字、存储后端等……

如果这看起来很麻烦并且你觉得构造函数看起来太大或太丑，*这不是因为这些应该是属性或隐式依赖*！这可能意味着该类试图做太多事情，或者它的依赖关系可以被分解为复合对象。

我在一个非常大的（100,000 行）生产 iPhone 应用程序上工作，并且非常坚持测试驱动开发。实际上，我实现依赖注入的方法是通过协议。您的观察完全正确，您在互联网上看到的示例代码很少是这样编写的，但它是 100% 正确和适当的。

我一直使用的一个非常有用的模式是有两个构造函数，一个暴露所有依赖项，一个具有更少的构造函数参数和隐式默认值（用于生产）。

例如：

```
// Fully exposed constructor, for easy unit testing.
- (id)initWithHost:(NSString *)host storageProvider:(id<StorageProvider>)storageProvider socketFactory:(id<SocketFactory>)socketFactory;

// Constructor that calls the former, with fully-functional defaults passed into former constructor implicitly.
- (id)initWithHost; 
```

这种模式与良好的模拟框架（OCMockito 或 OCMock 都很好）相结合，将使您在设计干净、诚实和高度可测试的代码方面走得更远。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T01:24:37.550

[异议](http://objection-framework.org)可能是您正在寻找的答案。[它是一个依赖注入框架，提供了手动](http://en.wikipedia.org/wiki/Dependency_injection#Manually_injected_dependency)依赖注入的替代方案。

例如，

```
@implementation MyViewController
objection_register(MyViewController)
objection_initializer(initWithNibName:bundle:, @"MyNibName")
objection_requires(@"model", @"locationManager", @"objectStore", @"objectFactory")

@synthesize model;
@synthesize locationManager;
@synthesize objectStore;
@synthesize objectFactory;
@end 
```

我们使用注入器对其进行初始化的地方（有关更多信息，请参阅[指南](https://github.com/atomicobject/objection)）：

```
MyViewController *controller = [self.objectFactory getObject:[MyViewController class]];
[self.navigationController pushViewController:controller animated:YES]; 
```

反对意见倾向于使用属性注入而不是“构造函数”注入。主要是因为 Objective-C 没有构造函数作为语言的一部分（它`alloc init`用作约定）。Objective-C 运行时几乎没有提供关于消息参数的*类型*信息。但是，运行时提供了关于属性的大量信息，并且[Key-Value Coding API](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/BasicPrinciples.html#//apple_ref/doc/uid/20002170-BAJEAIEE)比 NSInvocation 更强大且通常更安全。

# c++ - 使用 std::copy 时出错

> ID：11771121
> 
> 赞同：0
> 
> 时间：2012-08-02T04:37:00.147
> 
> 标签：c++, std

嘿伙计们，我在为 .obj 模型解析器编写的一些代码时遇到问题。这是导致问题的代码：

```
std::istringstream iss(line.substr(1));

std::copy(   
std::istream_iterator<float>(iss),     
std::istream_iterator<float>(),    
std::back_inserter<std::vector<float>>(model.chunks.back().vectices)  
); 
```

它基本上将一个字符串作为参数传递，如下所示：

> v -5.000000 -1.000000 1.000000

然后从中获取子字符串，因此只剩下以下内容：

> -5.000000 -1.000000 1.000000

最后我使用 std::copy 并从字符串中获取每组数字：

> 顶点[0] = -5.000000
> 顶点[1] = -1.000000
> 顶点[2] = 1.000000

无论如何，这里的主要问题是我从这行代码中得到一个错误：

```
std::back_inserter<std::vector<float>>(model.chunks.back().vectices)); 
```

它说“预期的令牌';' got float" 我的代码仍然可以完美地编译和运行。

尽管如果我用 std::string's 替换该代码中的浮点数，我就不会再收到错误了。

```
std::copy(  
std::istream_iterator<std::string>(iss),   
std::istream_iterator<std::string>(),   
std::back_inserter<std::vector<std::string>>(model.chunks.back().vectices)  
); 
```

我正在使用 Qt Creator，所以这可能只是一个 IDE 错误吗？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:39:30.930

可能是您的 IDE 不理解`>>`模板规范中的 。旧版本的 C++ 标准要求您在每个之间放置一个空格`>`，`> >`否则可能会与右移运算符混淆`>>`。所以：

```
std::back_inserter<std::vector<float> >(model.chunks.back().vectices)); 
```

# c# - 使用 Microsoft.ACE.OLEDB.12.0 加载到数据集时 Excel 数据列名称发生变化

> ID：11771125
> 
> 赞同：1
> 
> 时间：2012-08-02T04:37:31.890
> 
> 标签：c#, excel, ado.net, excel-2007, import-from-excel

我有一个 18 列的 excel 表。其中 5 列具有相同的列名`CALL_REASON`。但是当我使用 Microsoft.ACE.OLEDB.12.0 将该 Excel 表加载到数据集中时。对于具有相同名称的列，数据集中的列名称会更改。它被加载为`CALL_REASON,CALL_REASON1,CALL_REASON2,CALL_REASON3,CALL_REASON4`. 它们在 excelsheet 中显示为`CALL_REASON,CALL_REASON,CALL_REASON,CALL_REASON,CALL_REASON`

```
String properties = "Excel 8.0; HDR=YES; IMEX=1;";//properties set for connection to excel
string sSourceConstr = @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=C:\uploads\" + fileName + ";Extended Properties=\"" + properties + "\"";

sSourceConnection = new OleDbConnection(sSourceConstr);//creating the OLEDB connection
try
{
    //select statement to select data from the first excel sheet
    string sql = string.Format("Select * FROM [{0}]", "Sheet1$");

    //commands to fill the dataset with excel data
    OleDbDataAdapter excelAdapter = new OleDbDataAdapter();
    OleDbCommand command = new OleDbCommand(sql, sSourceConnection);
    sSourceConnection.Open();
    excelAdapter.SelectCommand = command;
    excelAdapter.Fill(surveyItemDetails, "ExcelDataTable");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:36:33.213

DataTable 中不能有同名的字段。实际上，您甚至不能拥有`CALL_REASON`and `CALL_reason`，例如，请参阅[DataColumnCollection.Add 文档中](http://msdn.microsoft.com/en-us/library/52xzw8tf.aspx)`Exceptions`的部分：

> **重复名称异常**
> 
> 该集合已经有一个具有指定名称的列。（比较不区分大小写。）

列名必须唯一的要求非常合理。`DataRow.Field<String>("CALL_REASON")`如果允许您拥有多个具有该名称的列，应该返回什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:25:46.213

Access 可能正在为您更改列名。您可以在数据库中具有相同名称的字段吗？我不这么认为。当您进行选择时，除非它是*，当有许多具有相同名称的字段时，您将如何选择调用原因。尝试使用excel将数据与列导出到CSV文件。然后尝试将 CSV 文件导入 Access。有一个向导可以逐步询问您是否要保留列名、选择一个字段作为键或让 Access 为您创建一个。要追加或创建表等...Access 会告诉您它是否不能使用列名并为您创建一个。

# ios - 在 UITableView 单元格上显示 UIButton

> ID：11771127
> 
> 赞同：1
> 
> 时间：2012-08-02T04:37:34.367
> 
> 标签：ios, uibutton

我想用“！”显示一个自定义按钮 作为 UITableView 单元格内的文本。代码是这样的：

```
UIButton *informationBtn = [UIButton buttonWithType:UIButtonTypeCustom];
[informationBtn setFrame:CGRectMake(10, 5, 55, 55)];
[informationBtn setTitle:@"!" forState:UIControlStateNormal];
[informationBtn addTarget:self action:@selector(popUpWindowWithMessage:) forControlEvents:UIControlEventTouchUpInside];
[cell.contentView addSubview:informationBtn]; 
```

其中“cell”被定义为 UITableViewCell 实例。

但是该按钮不会出现在单元格上。我应该怎么做才能显示按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:51:29.800

您的代码是正确的，而且按钮似乎在那里。但你看不到它。更改按钮标题的颜色。除了白色。然后检查..

```
[informationBtn setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
```

在设置按钮的标题后添加上面的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T04:39:31.993

如果要将按钮添加到单元格`accessoryView`，则可以执行以下操作：

```
[cell setAccessoryView: informationBtn]; 
```

# objective-c - Objective-c 编码约定？

> ID：11771135
> 
> 赞同：0
> 
> 时间：2012-08-02T04:38:53.347
> 
> 标签：objective-c, coding-style

在objective-c中，我可以声明一个带有类型的UI变量吗？：

```
UIButton *btn_Add,*btn_showMessage or UILabel *lb_Title 
```

怎么样：`UIButton *btnAdd,*btnShowMessage or *lbTitle` 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:41:21.913

我更喜欢`addButton`, `showMessageButton`,`titleLabel`等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:42:44.603

引用[Cocoa 的编码指南：代码命名基础](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-BBCHBFAH)：

*   一般来说，不要缩写事物的名称。把它们拼出来，即使它们很长。
*   对于由多个单词组成的名称，不要使用标点符号作为名称的一部分或分隔符（下划线、破折号等）；取而代之的是，将每个单词的首字母大写，然后将这些单词连在一起（例如 runTheWordsTogether）——这就是所谓的骆驼大小写法。
*   尽可能清晰和简短是件好事，但不应该因为简洁而影响清晰。
*   名称不应该是自我引用的。

所以，是的，无论是 nonamelive 建议的，还是尽可能尝试摆脱“按钮”前缀/后缀。

# android - 为什么我的 OPEN GL ES 纹理没有显示

> ID：11771138
> 
> 赞同：0
> 
> 时间：2012-08-02T04:39:16.943
> 
> 标签：android, graphics, opengl-es

好的，这是代码，它运行得很好，我只是没有看到纹理。我看到的 A White Square 与我指定的大小完全一致，而不是纹理。

```
 public class MeshRect {

MyRect rect;
final int VERTEX_SIZE = (2 + 4 + 2) * 4;
FloatBuffer vertices;
ShortBuffer indices;
long MyID;

public MeshRect(MyRect rect, long ID) {
    super();
    this.rect = rect;
    MyID = ID;

    Assemble();

}

private void Assemble() {
    ByteBuffer byteBuffer = ByteBuffer.allocateDirect(4 * VERTEX_SIZE);
    byteBuffer.order(ByteOrder.nativeOrder());
    vertices = byteBuffer.asFloatBuffer();

    float x1 = (float) rect.BottomLeftCorner.x;
    float x2 = (float) rect.BottomRightCorner.x;
    float x3 = (float) rect.TopRightCorner.x;
    float x4 = (float) rect.TopLeftCorner.x;

    float y1 = (float) rect.BottomLeftCorner.y;
    float y2 = (float) rect.BottomRightCorner.y;
    float y3 = (float) rect.TopRightCorner.y;
    float y4 = (float) rect.TopLeftCorner.y;

    vertices.put(new float[] { x1, y1, 1, 1, 1, 1, 0.0f, 1.0f,
                                x2, y2, 1, 1, 1, 1, 1.0f, 1.0f,
                                x3, y3, 1, 1, 1, 1, 1.0f, 0.0f,
                                x4, y4, 1, 1, 1, 1, 0.0f, 0.0f });
                            //  x   y   r  g  b  A   u|s  v|t
    vertices.flip();

    byteBuffer = ByteBuffer.allocateDirect(6 * 2);
    byteBuffer.order(ByteOrder.nativeOrder());
    indices = byteBuffer.asShortBuffer();
    indices.put(new short[] { 0, 1, 2,
                                2, 3, 0 });
    indices.flip();
}

public FloatBuffer getVertices() {
    return vertices;
}

public ShortBuffer getIndices() {
    return indices;
}

public long getMyID() {
    return MyID;
}

public void Draw(int primitiveType, GL10 gl) {
    int numVertices = 6;

    //set vertex array
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    vertices.position(0);
    gl.glVertexPointer(2, GL10.GL_FLOAT, VERTEX_SIZE, vertices);

    //set color
    gl.glEnableClientState(GL10.GL_COLOR_ARRAY);
    vertices.position(2);
    gl.glColorPointer(4, GL10.GL_FLOAT, VERTEX_SIZE, vertices);

    // set texture coords
    gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    vertices.position(6);
    gl.glTexCoordPointer(2, GL10.GL_FLOAT, VERTEX_SIZE, vertices);

    //set indices
    indices.position(0);
    gl.glDrawElements(primitiveType, numVertices, GL10.GL_UNSIGNED_SHORT, indices);

    //reset
    gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    gl.glDisableClientState(GL10.GL_COLOR_ARRAY);

}

} 
```

和渲染

```
 public void Render(GL10 gl, long deltaTime) {
    //render all
    Log.d("Game", "Render");

    gl.glViewport(0, 0, Screen.SCREEN_WIDTH, Screen.SCREEN_HEIGHT);
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(0, Screen.WIDTH_SCALE, 0, Screen.HEIGHT_SCALE, 1, -1);

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    /**
     * so psuedo would look something like this
     * 
     * *.Update();
     * gl.glEnable(GL10.GL_TEXTURE_2D);
     * Textures.BindTexture(*.getCurrentTextureFileID);
     * MeshRects.draw((*.getMyRect) ,GL10.GL_TRIANGLES, gl);
     * 
     * update();
     * bind texture;
     * draw rect;
     */

    ball.Update(deltaTime);
    gl.glEnable(GL10.GL_TEXTURE_2D);
    texture.bind(gl);
    MeshRect mRect = new MeshRect(ball.getMyRect(), 1);
    mRect.Draw(GL10.GL_TRIANGLES, gl);

} 
```

和纹理绑定方法

```
 public void bind(GL10 gl) {
    Log.d("Texture", "Bind");
    gl.glBindTexture(GL10.GL_TEXTURE_2D, TextureID);
} 
```

我忍不住想我错过了什么。这是我第一次潜入 OPEN GL 的世界，而这一切都是我今天通过阅读和测试来自互联网的所有代码而创造的。没有关于如何做的简单资源，所以我一直在制作自己的 2D 引擎，以便我可以在很长一段时间内重复使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:10:40.003

我没有看到任何纹理设置代码。

glTexImage2D 在哪里？此外，我没有看到设置过滤等的调用。

这是一个设置纹理的片段（它在 C 中，但你需要类似的东西）：

```
 GLubyte tex[] = {255, 0, 0, 255, 0, 255, 0, 255, 0, 255, 0, 255, 255, 0, 0, 255};
    glActiveTexture(GL_TEXTURE0);
    glGenTextures(1, &texId);
    glBindTexture(GL_TEXTURE_2D, texId);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 2, 2, 0, GL_RGBA, GL_UNSIGNED_BYTE, tex);
    glBindTexture(GL_TEXTURE_2D, 0); 
```

# controller - Yii 无法实例化控制器

> ID：11771141
> 
> 赞同：5
> 
> 时间：2012-08-02T04:39:23.040
> 
> 标签：controller, yii

正如我所看到的，如果我们想实例化一个模型（例如命名`Post`），我们只需要调用：

```
$post = new Post(); 
```

现在，我还想实例化一个`Controller`（例如 named`Post`和这个控制器的 php 文件`PostController.php`）。所以我使用这段代码：

```
$postController = new PostController(); 
```

但是，运行此代码时出现错误。

我做了一些搜索，发现实例化应该如下所示：

```
$postController = Yii::app()->createController('post/index'); 
```

它运行正确。但我仍然想知道为什么第一种方法不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T07:46:33.863

Answering your exact question "why the first approach doesn't work". The folder `/protected/controller` is **NOT** in "include path" of the project.

Just add `'import'=>array('application.controllers.*')` into your config file or use `include(Yii::app()->getBasePath().DIRECTORY_SEPARATOR.'controllers'.DIRECTORY_SEPARATOR.'PostController.php');`

just before creating an object of PostController. Ah and creating new controller requires a name for this controller, so it should be something like

`$controller = new PostController('post_controller');`

I would like to point out that this type of controller creation is useless in Yii, as you are creating a controller completely separated from project, so it will be *almost* useless. As you noted, the correct way to create controller is through `Yii::app()->createController()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:28:48.323

只需使用：

```
 $controller = Yii::app()->controller; 
```

这将返回您当前的控制器以供请求。

另请参阅此处的文档：[http ://www.yiiframework.com/doc/api/1.1/CApplication#controller-detail](http://www.yiiframework.com/doc/api/1.1/CApplication#controller-detail)

# javascript - .is(":hover") 的替代方案？在 Opera 中不起作用

> ID：11771153
> 
> 赞同：2
> 
> 时间：2012-08-02T04:40:20.090
> 
> 标签：javascript, jquery, hover, opera, jquery-events

见[http://jsfiddle.net/cgWdF/3/](http://jsfiddle.net/cgWdF/3/)

在所有浏览器中都能正常工作*，最新的 Opera 除外。

*未在 IE9 以下测试

应该指定，它需要返回真或假，我没有用它来绑定事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T04:46:22.940

jQuery[`.hover`](http://api.jquery.com/hover/)在 Opera 12 中的作品。

```
var $sample = $("#sample");
$sample.hover(function() {
   $sample.css("background", "yellow");
}, function() {
    $sample.css("background", "");
}); 
```

[**小提琴**](http://jsfiddle.net/cgWdF/4/)

或者，[`.data`](http://api.jquery.com/data/)用于存储悬停状态并对其进行测试（类似于您原来的小提琴）：

```
var $sample = $("#sample");
$sample.hover(function() {
   $(this).data('hovering', true);
}, function() {
   $(this).data('hovering', false);
});

setInterval(function(){
    var $sample = $("#sample");
    if($sample.data('hovering')) {
       $sample.css("background", "yellow");
    }
    else {
       $sample.css("background", "");
    }
}, 200); 
```

[**小提琴**](http://jsfiddle.net/cgWdF/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:00:11.213

您可以使用 .mouseover() 和 .mouseout() 来达到相同的效果。如果你想延迟动画，你可以在 jQuery UI 中使用 .animate()

```
$('#sample').mouseover(
        function() {
            $(this).stop().animate({
                backgroundColor: "yellow"}, 200);
        });

$('#sample').mouseout(
        function() {
            $(this).stop().animate({
                backgroundColor: "#aaa"}, 200);
        }); 
```

[http://jsfiddle.net/cgWdF/8/](http://jsfiddle.net/cgWdF/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T19:32:29.980

从 jQuery 1.9.1 开始，其他浏览器已经赶上了 Opera——它现在也不再在那里工作了。正如您的小提琴所调查的那样，“它”是.is（“：悬停”）。

我为 .is(":hover") 写了一个解决方法，参见小提琴[http://jsfiddle.net/mathheadinclouds/BxL4w/](http://jsfiddle.net/mathheadinclouds/BxL4w/)

```
function mouseIsOver(what){
    return $(what).is(":hover");
}
function mouseIsOverWorkaround(what){
    var temp = $(what).parent().find(":hover");
    return temp.length == 1 && temp[0] == what;
}
function mo(what){
    return document.getElementById("workaround").checked ? mouseIsOverWorkaround(what) : mouseIsOver(what);
}
setInterval(function(){
    var theBox = $("#theBox");
    if(mo(theBox[0])) {
       theBox.css("background", "yellow");
    } else {
       theBox.css("background", "");
    }
}, 200); 
```

和html

```
<input type="checkbox" id="workaround"/>
<div id="theBox"></div> 
```

# java - 准备使用 Maven 和 Git 发布的库 .jar

> ID：11771158
> 
> 赞同：3
> 
> 时间：2012-08-02T04:41:10.340
> 
> 标签：java, git, maven, open-source, release

假设我有一个项目（`myproject`- 一个构建到 .jar 文件中的库），它使用 Maven 愉快地构建并且我使用 Git 进行版本控制。

它具有相对简单`pom.xml`的几个外部依赖项，所有这些都可以在 Maven 中央存储库中获得。

一切都在开发中运行良好，现在我很满意`myproject-1.0.0-SNAPSHOT`并希望将其发布到适当的版本中，以便我可以将其放入公共（开源）Maven 存储库并让人们使用我出色的新库。特别是，我想让人们尽可能轻松地使用我的库，而无需付出任何努力或可能造成混淆。

制作此版本的推荐步骤/清单是什么？

有什么需要避免的陷阱/错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:05:47.970

最简单的方法是使用 Maven 发布插件。你可以 [在这里阅读](http://maven.apache.org/plugins/maven-release-plugin/)

一般来说，它可以用来发布你的项目（它管理版本，使用一些 VSC 操作，例如，我将它与 SVN 一起使用，它为我创建了 SVN 标签）。它还强制您不依赖 jar 的“SNAPSHOT”版本，否则您将无法重现您的构建等等。最后，它将您的工件上传到存储库。

我不太了解将所有内容上传到中央 maven 存储库所需的权限，我已将它用于我们的私有存储库......

希望这可以帮助

# google-closure - 如何使用 Google Closure 库在文档内移动鼠标时收听？

> ID：11771161
> 
> 赞同：2
> 
> 时间：2012-08-02T04:41:15.347
> 
> 标签：google-closure, google-closure-library

当鼠标在文档正文中移动时，我试图调用一个函数。但是，以下事件处理程序不起作用。

```
goog.events.listen(document,
  'onmousemove',
  function(e) {console.log('foo');}); 
```

为什么它不起作用？我也试过`window`了`document`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:30:31.950

[`onmousemove`](https://developer.mozilla.org/en/DOM/element.onmousemove)是元素属性。您要查找的 DOM 事件是`mousemove`. 请参阅***[MDN DOM 事件参考](https://developer.mozilla.org/en/DOM/DOM_event_reference)***。

```
goog.events.listen(document, 'mousemove', function(e) {
    console.log('foo');
}); 
```

闭包库提供了跨浏览器事件 API [`goog.events.EventType`](https://code.google.com/p/closure-library/source/browse/trunk/closure/goog/events/eventtype.js)，它具有防止拼写错误的额外好处。使用此枚举，您的代码将被编写：

```
goog.events.listen(document, goog.events.EventType.MOUSEMOVE, function(e) {
    console.log('foo');
}); 
```

# c# - Assembly.GetTypes() 生成 LoaderException 错误

> ID：11771165
> 
> 赞同：0
> 
> 时间：2012-08-02T04:42:05.173
> 
> 标签：c#, assemblies, gettype

我尝试了很多谷歌搜索，但未能找到解决方案。

请帮我解决。

我有一个 Windows 应用程序设置向导，它将运行一个安装程序类，其中分配了自定义操作。

该项目具有插件架构。

安装时，我需要安装打印机驱动程序，安装程序类有代码来安装它，通过调用该插件。

但是，当我尝试检索加载的插件的 GetTypes() 属性时，我收到一个加载器异常错误，安装程序将退出。

如果我运行我的 Windows 应用程序，则 GetTypes() 属性工作正常。

这是我的代码。请查看并检查是否有任何问题。

```
 private static List<Assembly> LoadPlugInAssemblies()
    {

        DirectoryInfo dInfo = new DirectoryInfo(Path.Combine(Assembly.GetExecutingAssembly().Location.Replace("PluginSDK.dll", ""), "Plugins")); 

        FileInfo[] files = dInfo.GetFiles("*.dll");

        List<Assembly> plugInAssemblyList = new List<Assembly>();

        if (null != files)
        {
            foreach (FileInfo file in files)
            {
                plugInAssemblyList.Add(Assembly.LoadFile(file.FullName));
            }
        }
        return plugInAssemblyList;
    }

    static List<IUserFunctionPlugin> GetPlugIns(List<Assembly> assemblies)
    {
        List<Type> availableTypes = new List<Type>();

        foreach (Assembly currentAssembly in assemblies)
            availableTypes.AddRange(currentAssembly.GetTypes());

        List<Type> pluginList = availableTypes.FindAll(delegate(Type t)
        {
            List<Type> interfaceTypes = new List<Type>(t.GetInterfaces());
            object[] arr = t.GetCustomAttributes(typeof(PluginAttributes), true);
            return !(arr == null || arr.Length == 0) && interfaceTypes.Contains(typeof(IUserFunctionPlugin));
        });

        // CONVERT THE LIST OF OBJECTS TO AN INSTANTIATED LIST OF IPlugins
        return pluginList.ConvertAll<IUserFunctionPlugin>(delegate(Type t) { return Activator.CreateInstance(t) as IUserFunctionPlugin; });
    } 
```

我尝试使用 Assembly.ReflectionOnlyLoad 但导致同样的错误。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T04:50:55.373

如果这是程序集绑定错误，请尝试运行[Fuslogvw.exe（程序集绑定日志查看器）](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)以收集有关该错误的更多信息。

# c# - 如何让 Dapper.Rainbow 在 SQLite 上使用 AutoIncrement 插入表？

> ID：11771166
> 
> 赞同：5
> 
> 时间：2012-08-02T04:42:08.217
> 
> 标签：c#, sqlite, dapper, dapper-rainbow

我在 SQLite 上创建了一个示例表，该表具有一个自动递增的 Id 列。

```
CREATE TABLE "ESVLIntegration" ("Id" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE , "ProcessId" TEXT NOT NULL , "UserId" INTEGER NOT NULL , "Status" TEXT NOT NULL , "StartDate" DATETIME NOT NULL , "EndDate" DATETIME, "Operation" TEXT NOT NULL , "SNEquip" TEXT NOT NULL , "CardName" TEXT NOT NULL , "FilePath" TEXT NOT NULL , "Processed" BOOL NOT NULL ) 
```

但是当我第二次尝试插入时，出现以下错误：

> 由于违反约束而中止 PRIMARY KEY 必须是唯一的

这是我的代码

```
public class ESVLIntegration
{
    public long Id { get; set; }
    public String ProcessId { get; set; }
    public long UserId { get; set; }
    public String Status { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public String Operation { get; set; }
    public String SNEquip { get; set; }
    public String CardName { get; set; }
    public String FilePath { get; set; }
    public Boolean Processed { get; set; }
}

public class Sample : Database<Sample>
{
    public Table<ESVLIntegration> ESVLIntegration { get; set; }
}

private void WriteParameters()
{
    "Writing sample parameters to SQLite DB".LogDebug();
    var pars = new ESVLIntegration();
    pars.ProcessId = Guid.NewGuid().ToString();
    pars.CardName = "gpp3";
    pars.StartDate = DateTime.Now;
    pars.Status = "Start";
    pars.Operation = VerifyStatus;
    pars.SNEquip = "12345";
    pars.FilePath = @"C:\Folder\FilePath";
    pars.Processed = false;
    using (var conn = new SQLiteConnection(connStr))
    {
       conn.Open();
       var db = Sample.Init(conn, 2);
       db.ESVLIntegration.Insert(pars);
    }
} 
```

关于我在这里做错了什么的任何想法？

***编辑***

SQlite 上的 INTEGER 列的类型为 int64(long)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T04:42:08.217

从我发现的 SQLite FAQ 中：

> 有了这张表，语句
> 
> 插入 t1 值（NULL，123）；
> 
> 逻辑上等同于说：
> 
> 插入 t1 值（（从 t1 中选择最大值（a））+1,123）；

所以我只是将我的班级 ID 更改为可为空

```
public class ESVLIntegration
{
    public long? Id { get; set; }
    public String ProcessId { get; set; }
    public long UserId { get; set; }
    public String Status { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public String Operation { get; set; }
    public String SNEquip { get; set; }
    public String CardName { get; set; }
    public String FilePath { get; set; }
    public Boolean Processed { get; set; }
} 
```

现在效果很好！

# php - 如何将 Facebook 应用程序连接到我自己的 MYSQL 数据库？

> ID：11771172
> 
> 赞同：1
> 
> 时间：2012-08-02T04:42:35.973
> 
> 标签：php, mysql, database, facebook

我是制作 Facebook 应用程序的新手，这是我第一次做，所以请多多包涵。:)

我已经制作了一个 Facebook 应用程序，我“有点尝试”将它连接到 MYSQL 上的本地主机数据库，但失败了。

我现在有两个问题：1）有没有办法将我的 facebook 应用程序连接到我自己的数据库以及如何连接？

2）由于我制作的facebook应用目前只有一页，我不知道如何将它连接到新的。如何将应用程序的页面连接到另一个页面？

哦，我正在使用 Facebook 提供的 heroku 东西。免费的网络托管的东西，我想。我正在使用 PHP SDK。我最喜欢的语言是 PHP，因为我使用 Dreamweaver 来创建这一切。

# content-management-system - Composite C1除了静态网站还支持开发数据交互网站吗？

> ID：11771174
> 
> 赞同：0
> 
> 时间：2012-08-02T04:42:39.853
> 
> 标签：content-management-system, c1-cms

我用Composie C1玩了好几个小时，从Composie C1网站的样本和帮助pdf中，我只看到它可以开发静态网站。

我的问题是它可以用来开发基于数据的网站，是否有像登录模块、数据列表模块、用户访问控制模块这样的组件，它如何处理来自服务器的数据，它是否使用 ORM 等？我希望使用 C1 开发具有用户交互的稍微复杂的网站。它能胜任这项工作吗？如果可以的话，有什么文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:30:35.577

您几乎可以使用 Composite C1 开发任何复杂的网站，因为它与 ASP.NET 用户控件、母版页和 MVC 完美结合。

有关开发人员文档，请参阅[http://docs.composite.net/](http://docs.composite.net/)

我们目前正在开发复合 C1 上的多个复杂解决方案，因此如果您有 ASP.NET 知识，这应该没问题。

尽管 C1 有许多模块并且允许构建相当复杂的站点，但是当您尝试构建一个没有任何编码的站点时，您当然会遇到复杂性的限制，只需使用 CMS 功能。

但也有一些预构建的包用于您要求的某些内容，例如用于访问控制和用户管理的商业[Extranet](http://docs.composite.net/Packages/Community/Extranet)包。

也看看其他[模块](http://docs.composite.net/Packages)。

# ios - 如何在 Flex 库中包含 ANE？

> ID：11771187
> 
> 赞同：2
> 
> 时间：2012-08-02T04:44:07.323
> 
> 标签：ios, actionscript-3, air, air-native-extension

目前我处于一种奇怪的情况，我们已经建立了一个移动代码库，我们正试图将一些本机扩展集成到其中。代码库由几个“Flex 库项目”组成，用于通过 Flash Builder 4.6 编译主应用程序。

我们需要在包含的库之一中使用本机扩展功能，但在最终版本构建编译期间我们不断收到丢失类的错误。

```
Error occurred while packaging the application:
Exception in thread "main" java.lang.Error: Unable to find named traits: *** 
```

缺少的类是包含在扩展的 Actionscript 端的类。

我们尝试了几种引用扩展的方法：

*   在库构建路径中添加类似 swc
*   将 ane 重命名为 swc 并包含在构建路径中
*   尝试链接为外部资源

大多数这些似乎都可以工作，我们甚至可以让调试版本工作，但是一旦我们为 iOS 版本打包，我们就会得到上述错误。

这不是 iOS 框架问题，因为该类是 ANE 中包含的 Actionscript 类。

# iphone - Cocos2d: TileMap : 如何最小化 Tilemap 的内存使用

> ID：11771189
> 
> 赞同：0
> 
> 时间：2012-08-02T04:44:35.827
> 
> 标签：iphone, cocos2d-iphone

我正在使用 CCTMXTiledMap 提取层的 Init 函数中不同位置的对象的属性。我将这些位置存储在一个单独的数组中，不再需要 TileMap。

这是代码：

```
-(void) init{
...
CCTMXTiledMap *tileMap = [CCTMXTiledMap tiledMapWithTMXFile:@"TileMap2.tmx"];
CCTMXLayer *tmxLayer= [tileMap layerNamed:@"Layer1"]; 
for(int i=0;i<9999;i++)
    {
        for(int j=0;j<20;j++)
        {
            int gid = [tmxLayer tileGIDAt:ccp(i,j)];
            properties = [tileMap propertiesForGID:gid];
            _obstacles[m].type = CUBE_; m++;
        }
     }
...
} 
```

在 Init 方法 TileMap 被释放之后。

**问题：**因为 Tilemap 非常大（9999x20），它需要很多内存。因此，在 for 循环运行时，峰值内存高达 18MB。

有没有其他方法可以提取不同位置的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T13:03:55.173

每个图块消耗（大约）100 字节到 500 字节的内存。后者是 cocos2d 必须为 tile 创建 CCSprite 的情况，例如，如果您设置任何 CCSprite 属性（如比例、颜色）或在 tile 上运行操作。

9999x20 意味着您有接近 200,000 个图块。Times 100 Bytes 大约为 19 MB。所以你只是得到了预期的结果。

如果您想减少内存使用量，您将不得不使用不同的实现（[HKTMXTileMap](http://www.cocos2d-iphone.org/forum/topic/17945)是一个竞争者）或推出您自己的实现。

# c# - Microsoft.Office.Interop.Excel.dll - 服务器没有安装 Excel

> ID：11771194
> 
> 赞同：1
> 
> 时间：2012-08-02T04:45:05.483
> 
> 标签：c#, excel, office-interop

我正在使用“Microsoft.Office.Interop.Excel.dll”生成一个 Excel 文件，而我的部署服务器不允许安装 Excel？

我知道必须安装 Excel，所以我的问题是：

有什么方法可以在不安装 Excel 的情况下部署相同的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:47:46.700

> 我知道安装 Excel 是强制性的，所以我的问题是我们可以在不安装 Excel 或建议的任何其他方式的情况下部署相同的代码吗？

不，必须安装 Excel。但是您已经知道了，因为这就是您提出问题的方式。

库的名称 (Microsoft.Office.Interop.Excel.dll) 是一个很好的线索。它说**interop**，它是互操作性的缩写。而且你不能与不存在的东西进行互操作。因此，必须安装 Excel 才能使用便于与 Excel 互操作的 DLL。

即使您忽略所有法律问题，这也没有逻辑意义。

如果您确实无法安装 Excel，则需要找到其他方法来创建 Excel 文件。有一些图书馆声称可以这样做，但它们有其局限性。例如：

*   [http://excelpackage.codeplex.com/](http://excelpackage.codeplex.com/)
*   [http://simpleooxml.codeplex.com/](http://simpleooxml.codeplex.com/)
*   [http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)
*   [http://www.smartxls.com/](http://www.smartxls.com/)
*   [http://code.google.com/p/excellibrary/](http://code.google.com/p/excellibrary/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:49:26.247

try this
[http://epplus.codeplex.com](http://epplus.codeplex.com)

this code is from [http://epplus.codeplex.com](http://epplus.codeplex.com)

you can save byte array into file with extension .xls

```
private void DumpExcel(DataTable tbl)
        {
            using (ExcelPackage pck = new ExcelPackage())
            {
                //Create the worksheet
                ExcelWorksheet ws = pck.Workbook.Worksheets.Add("Demo");

                //Load the datatable into the sheet, starting from cell A1\. Print the column names on row 1
                ws.Cells["A1"].LoadFromDataTable(tbl, true);

                //Format the header for column 1-3
                using (ExcelRange rng = ws.Cells["A1:C1"])
                {
                    rng.Style.Font.Bold = true;
                    rng.Style.Fill.PatternType = ExcelFillStyle.Solid;                      //Set Pattern for the background to Solid
                    rng.Style.Fill.BackgroundColor.SetColor(Color.FromArgb(79, 129, 189));  //Set color to dark blue
                    rng.Style.Font.Color.SetColor(Color.White);
                }

                //Example how to Format Column 1 as numeric 
                using (ExcelRange col = ws.Cells[2, 1, 2 + tbl.Rows.Count, 1])
                {
                    col.Style.Numberformat.Format = "#,##0.00";
                    col.Style.HorizontalAlignment = ExcelHorizontalAlignment.Right;
                }

                //Write it back to the client
                Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
                Response.AddHeader("content-disposition", "attachment;  filename=ExcelDemo.xlsx");
                Response.BinaryWrite(pck.GetAsByteArray());
            }
        } 
```

# sequence - 您是否按照您所处的步骤或要过渡到的步骤来排序序列逻辑？

> ID：11771196
> 
> 赞同：1
> 
> 时间：2012-08-02T04:45:19.827
> 
> 标签：sequence, plc

在关于这个主题的一些内部讨论之后，我正在寻找一些其他的意见。对于一个简单的序列，使用一些标准的梯形逻辑，您可以在梯级的开头设置序列步进位，并让梯级按顺序向下移动。您可以在梯级的末尾进行转换（通常将要进入的步骤编号移动到整数），它们也可以按顺序排列。当您有一个不按顺序流过的非平凡序列时，问题就来了。

您是组织逻辑以使左侧的位（您所处的步骤）井井有条，还是组织逻辑以使右侧的移动（您的转换）井井有条。当您转换到多个步骤时，您是否有从一个步骤位开始的多个移动，或者您是否有多个位触发一个移动？

一个例子：

你在追求什么

```
in 6 and X go to step 10
in 7 and Y go to step 10
in 21 and Z go to step 10 
```

按您所在的步骤排序

```
XIC(step.6) and X mov 10
XIC(step.7) and Y mov 10
XIC(step.8)... 
...
XIC(step.21)and Z mov 10 
```

按过渡排序

```
... mov 9
XIC(step.6)and X,XIC(step.7) and Y),XIC(step.21) and Z mov 10
...mov 11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T10:41:04.130

首先看一下：[http](http://en.wikipedia.org/wiki/Sequential_function_chart) ://en.wikipedia.org/wiki/Sequential_function_chart 切换到该 wiki 页面的意大利语版本，我在其中放置了示例图像和更多解释。

首先在一系列步骤和转换中将您的问题形式化，而不是轻松翻译：

（伪语言只是为了理解逻辑）

如果 (STEP_0 = true) AND (transition_0 = true) -> RESET STEP_0 和 SET STEP_1

如果 (STEP_1 = true) AND (transition_1 = true) -> RESET STEP_1 和 SET STEP_2

等等..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T02:57:14.943

我强烈建议您将顺序功能图或 Grafcet 图视为一种设计工具，然后根据该图实现您的梯形逻辑。如果您查看 SFC 简单转换，您正坐在 STEP 中并等待下一个转换条件进入序列中的下一步。

因此，我建议将梯形逻辑与任何转换条件逻辑一起实现为您所在的“步”，然后在该转换条件为真时将步值设置为下一步。

这样做的好处是，您可以通过查看步骤编号来查看您的“程序”处于什么“状态”，而不是查看步骤编号并确定哪个步骤正在尝试转换到该步骤编号以确定你的序列状态。

# java - 通用搜索条件类型

> ID：11771198
> 
> 赞同：2
> 
> 时间：2012-08-02T04:45:38.150
> 
> 标签：java

我使用表示层、服务层和数据访问层构建了我的应用程序。有多种服务和 API 通常需要从数据访问层检索一些数据。为了获得这样的数据，我经常需要将一些搜索条件从一层传递到另一层。例如，我可以传递 from_date、to_date、email_id、user_id 等属性。现在，我尝试传递一个对象，比如 SearchCriteria，而不是传递很多单独的参数。同样，不同的服务/api 需要不同的 SearchCriterias。

问题是，我如何使其通用，以便所有服务都可以使用它。一种方法是拥有一个 SearchCriteria 对象，该对象包含一个 SEARCH_KEY 到值的映射，其中 SEARCH_KEY 可以是一个枚举（具有 FROM_DATE、TO_DATE 等值）。根据 SEARCH_KEY，我可以检索密钥并使用它。但这仅在您的一层知道从该映射中期望的值的类型（整数，字符串）时才有效。一层耦合到另一层，我认为这不好。我经历了这个问题 -[具有多种值类型的映射，具有](https://stackoverflow.com/questions/10429230/map-with-multiple-value-types-with-advantages-of-generics)解决类似问题的泛型优势。这是一个好的设计吗？有没有更好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T06:31:56.947

如果您使用 JPA 之类的东西，您可能需要查看[JPA Criteria API](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/querycriteria.html)。有了它，您可以编写一个基本的过滤器类：

```
public abstract class AbstractFilter<T> {
    private EntityManager em;
    private Class<T> entityClass;
    private List<Predicate> predicates;
    private CriteriaBuilder cb;

    public AbstractFilter(EntityManager em, Class<T> clazz) {...}

    protected void add(Predicate predicate) {
        if (predicates == null) predicates = new ArrayList<>();
        if (predicate != null) predicates.add(predicate);
    }

    protected <X> void addEqual(Expression<X> expression, X value) {
        if (expression != null && value != null && cb != null)
            add(cb.equal(expression, value));
    }

    protected abstract void buildPredicates(Root<T> root);

    public List<T> getResultList() {
        this.cb = em.getCriteriaBuilder();
        CriteriaQuery<T> query = cb.createCriteria(entityClass);
        Root<T> root = query.from(entityClass);
        buildPredicates(root);
        return em.createQuery(query.select(root).where(predicates)).getResultList();
    }
}

public class UserFilter<User> {
    private String firstName, lastName;  // plus getter and setter
    private Gender gender;               // plus getter and setter

    public UserFilter(EntityManager em) { super(em, User.class); }

    protected void buildPredicates(Root<User> user) {
        addEqual(user.get(User_.firstName), getFirstName());
        addEqual(user.get(User_.lastName), getLastName());
        addEqual(user.get(User_.gender), getGender());
    }
}

------

UserFilter filter = new UserFilter(entityManager);
filter.setFirstName("Joe");
filter.setGender(Gender.Male);
List<User> users = filter.getResultList(); 
```

这只是过滤器类的一个非常基本的示例，您可以向过滤器添加越来越多的`addXXX(Expression, ?)`方法以及排序和分页等功能。请注意，`EntityManager`如果要将其与其他层分开，则应由 DAO 设置，例如作为`getResultList(EntityManager)`方法中的参数。

* * *

另一种解决方案可能是这样的示例对象：

```
User example = new User();
example.setFirstName("J*");
example.setGender(Gender.Male);
List<User> users = userDao.find(example); 
```

您的 DAO 实现本身在哪里进行过滤。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-18T14:15:27.437

我刚刚使用新的条件 API 为 Hibernate 5 上的通用搜索制作了这个解决方案。我得到了一个类似于 JavaIO 的 FileFilter 的解决方案。

在 GenericDAO，我实现了一个通用搜索的方法：

```
public List<T> search(SearchFilter searchFilter) {
    CriteriaBuilder criteriaBuilder = getSession().getCriteriaBuilder();
    CriteriaQuery<T> criteriaQuery = criteriaBuilder.createQuery(getPersistentClass());
    Root<T> entityRoot = criteriaQuery.from(getPersistentClass());
    criteriaQuery.select(entityRoot);
    criteriaQuery.where(searchFilter.buildPredicate(criteriaBuilder, entityRoot));
    Query<T> query = getSession()
            .createQuery(criteriaQuery);
    return query.getResultList();
} 
```

对于 SearchFilter 类（作为 GenericDAO 的嵌套类实现），一个非常简单的代码：

```
abstract class SearchFilter {
    abstract protected Predicate buildPredicate(CriteriaBuilder criteriaBuilder, Root<T> root);
} 
```

现在对于用法，它看起来像这样：

```
public List<Product> findByCategory(ProductCategory productCategory) {
    return search(new SearchFilter() {
        @Override
        protected Predicate buildPredicate(CriteriaBuilder criteriaBuilder, Root<Product> root) {
            return criteriaBuilder.equal(root.get("productCategory"), productCategory);
        }
    });
} 
```

该解决方案允许通过更简单的实现来减少特定 DAO 搜索的代码行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:48:06.740

If handling at Runtime is enough you can try this

```
public enum ParameterKeys {

  SERIAL_NUMBER {
      public Class<?> getType() {
          return Integer.class;
      }
  },
  SEARCH_KEY{
      public Class<?> getType() {
          return String.class;
      }
  },
  FROM_DATE{
      public Class<?> getType() {
          return Date.class;
      }
  },
  ISVALID{
      public Class<?> getType() {
          return Boolean.class;
      }
  };

public abstract Class<?> getType(); 
```

}

```
public class Parameter {

private Object value;
private Class<?> clazz;
private ParameterKeys key;

public Parameter(Object value,ParameterKeys key) throws Exception {
    this.key = key;
    setValue(value);
}

public void setValue(Object value) throws Exception{
    this.value = value;
    this.clazz = value.getClass();
    if(!clazz.getCanonicalName().equals(key.getType().getCanonicalName())) {
        throw new Exception("Type Mismatch between Parameter Key : " + key + " and Value : " + value);
    }
}

public Object getValue() {
    return clazz.cast(value);
} 
```

}

```
public class Main {

public static void main(String[] args) {
    Map<ParameterKeys,Parameter> _params = new HashMap<ParameterKeys, Parameter>();
    try {
    _params.put(ParameterKeys.SERIAL_NUMBER, new Parameter(1,ParameterKeys.SERIAL_NUMBER));
    _params.put(ParameterKeys.SEARCH_KEY, new Parameter("query",ParameterKeys.SEARCH_KEY));
    _params.put(ParameterKeys.FROM_DATE, new Parameter(new Date(),ParameterKeys.FROM_DATE));
    _params.put(ParameterKeys.FROM_DATE, new Parameter(true,ParameterKeys.FROM_DATE));
    } catch(Exception e) {
        System.out.println(e.getMessage());
    }

} 
```

}

This will print out the following exception

**Type Mismatch between Parameter Key : FROM_DATE and Value : true**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:20:22.330

你可以做这样的事情

写枚举来保存你的参数键

```
enum ParameterKeys {

  SERIAL_NUMBER,
  SEARCH_KEY,
  FROM_DATE,
  ISVALID

} 
```

编写一个包含参数值的类

```
public class Parameter {

    private Object value;
    private Class<?> clazz;

    public Parameter(Object value) {
        setValue(value);
    }

    public void setValue(Object value) {
        this.value = value;
        this.clazz = value.getClass();
    }

    public Object getValue() {
        return clazz.cast(value);
    }

} 
```

现在尝试制作参数 Map

```
 public class Main {

        public static void main(String[] args) {
            Map<String,Parameter> _params = new HashMap<String, Parameter>();
            _params.put(ParameterKeys.SERIAL_NUMBER, new Parameter(1));
                 _params.put(ParameterKeys.SEARCH_KEY, new Parameter("query"));
            _params.put(ParameterKeys.FROM_DATE, new Parameter(new Date()));
            _params.put(ParameterKeys.ISVALID, new Parameter(1));
        System.out.println(_params.get(ParameterKeys.SERIAL_NUMBER).getValue().getClass().getCanonicalName());
    System.out.println(_params.get(ParameterKeys.SEARCH_KEY).getValue().getClass().getCanonicalName());     System.out.println(_params.get(ParameterKeys.FROM_DATE).getValue().getClass().getCanonicalName());    System.out.println(_params.get(ParameterKeys.FROM_DATE).getValue().getClass().getCanonicalName());

        }

    } 
```

输出将是：

```
java.lang.Integer
java.lang.String
java.util.Date
java.lang.Boolean 
```

您可以将此地图传递到不同的关卡

# blackberry - x-blackberry-focusable 不起作用

> ID：11771203
> 
> 赞同：0
> 
> 时间：2012-08-02T04:46:23.487
> 
> 标签：blackberry, blackberry-webworks

我创建了一个简单的页面并在 BlackBerry 设备上尝试，但突出显示不起作用，有人可以帮我看看我的代码有什么问题吗？

```
<!DOCTYPE HTML>

<html>
    <head>
    <title>Test Page</title>
    <style>
        .list {
            width: 100%;
            display: block;
            text-decoration: none;
            border-style: solid;
            border-color: #CCC;
            border-width: 1px;
            margin-top: 5px;
            padding: 2px;
        }

        .list:hover {
            background-color: green;
            color: white;
        }
    </style>
    </head>

    <body>
        <div class="list" x-blackberry-initialFocus="true" x-blackberry-focusable="true">List 1</div>
        <div class="list" x-blackberry-focusable="true">List 2</div>
        <div class="list" x-blackberry-focusable="true">List 3</div>
        <div class="list" x-blackberry-focusable="true">List 4</div>
        <div class="list" x-blackberry-focusable="true">List 5</div>
        <div class="list" x-blackberry-focusable="true">List 6</div>
    </body>
</html> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T17:02:54.550

您的 HTML 文件看起来正确。可能是您没有从 config.xml 文件启用焦点模式导航。确保您在 config.xml 中设置了**<rim:navigation mode="focus" />**元素，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<widget xmlns:rim="http://www.blackberry.com/ns/widgets" 
    version="1.0.1" xmlns="http://www.w3.org/ns/widgets">
    <name>Focus demo</name>

    <content src="index.htm" />
    <feature id="blackberry.system" />
    <rim:navigation mode="focus" />

</widget> 
```

# perl - Perl Excel::Writer::XLSX 公式在打开工作簿时不计算

> ID：11771211
> 
> 赞同：1
> 
> 时间：2012-08-02T04:47:52.227
> 
> 标签：perl, excel, xlsx

我正在使用 Excel::Writer::XLSX 将公式写入 xlsx。

当我用 Excel 打开工作簿时，公式的单元格中有一个 0。

Excel 中的计算选项设置为自动。单击“立即计算”按钮或按 F9 无法执行任何操作。

按 CTRL+Alt+F9 有效。

有什么方法可以确保在打开工作簿时计算公式？

编辑：单元格内容示例“=A3+A4”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:21:16.230

Excel 2007 的早期版本中存在一个问题，它以这种方式影响 Excel::Writer::XLSX 文件。

应用最新的 Excel 或 Office 服务包应该可以修复它。

如果不让我知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:35:20.943

Excel::Writer::XLSX 有一个 $worksheet->write_formula 方法，可用作解决方法。如果您的 Excel 版本受上面约翰的回答影响，它有一个值字段来存储公式的结果。

# python - Eric IDE 中的自动完成功能不起作用

> ID：11771213
> 
> 赞同：2
> 
> 时间：2012-08-02T04:47:57.560
> 
> 标签：python, autocomplete, ide, eric-ide

我已经从 Ubuntu 软件中心在 Ubuntu 上安装了 Eric4.4.18。我已经标记了“启用自动完成”选项并将语言设置为 python，但它不起作用。Eric 似乎所做的只是语法高亮。我怎样才能让它工作？

# objective-c - 为什么要在 Xcode 中使用头文件？新手想学点东西

> ID：11771214
> 
> 赞同：0
> 
> 时间：2012-08-02T04:48:10.567
> 
> 标签：objective-c, xcode, header-files

我不明白为什么有一个单独的头文件 .h 用于实例声明和变量声明，然后在类文件 .m 中编写我的类。

为什么不像解释语言那样呢？只需声明一个函数并在需要时引用它。对我来说似乎有很多重复的代码，我希望这对我有意义。

我发现这篇文章[Cost of Include Header Files in Objective-C](https://stackoverflow.com/questions/777405/cost-of-including-header-files-in-objective-c?rq=1)并发现它很有启发性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:58:07.290

这更像是一个好的编程实践/标准，而不是一个硬性规则。您当然可以在 .m 文件中进行声明（尝试一下），就像在解释语言中一样，但通常我们不会这样做，因为它没有那么有条理。

另一个原因是模块化。但这是一条你需要先学习编程基础才能钓到的大鱼；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:04:14.990

这与在 C 中相同，当您想从另一个翻译单元访问一个翻译单元中的某些内容时，必须声明该内容。然后在链接时，链接器将看到您正在访问在另一个翻译单元中定义的对象的声明并修复问题，以便您确实跨翻译单元边界使用该东西。

然而，这取决于翻译单元之间的声明是否相同。如果没有头文件，您将不得不在两个 TU 中写出相同的声明，并且每次您在一个 TU 中更改声明时，您都必须在其他 TU 中更改它。

标题的存在使得声明可以编写一次，然后“包含”在您想要使用该项目的任何翻译单元中，而无需仔细和手动同步文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:15:21.193

其他答案没有提到的一件事是头文件中定义的方法是公共的。头文件公开了允许其他类使用的接口，而在实现文件中，您经常会看到如下内容：

```
@interface MyClass (PrivateAPI)

- (void)myPrivateMethod;

@end

@implementation MyClass

// All of the method implementations.

@end 
```

这样只有在 MyClass 实现范围内的代码才能真正调用 myPrivateMethod。这是*封装*实践中非常普遍和重要的技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:22:02.197

您可以`.h`在其他几个地方包含一个文件，而不必包含`.m`，这会导致每次都重复代码。

总而言之，通过包含头文件 (.h)，您告诉编译器“函数在这里，这是它们的**签名**”（看到这里的关键字？）。通过包含实现 (.m)，您可以告诉编译器“这是前面定义的函数的代码”。

# node.js - 在 OSX 10.7.4 上安装 nodejs 时出错

> ID：11771221
> 
> 赞同：0
> 
> 时间：2012-08-02T04:49:40.163
> 
> 标签：node.js, osx-lion

尝试构建nodejs时，我得到`Build failed: -> task failed (err #2): {task: uv uv.h -> uv.a}`

遵循 [github，在 GNU/Linux 和其他 UNIX 上构建][1] 上的这些说明

跑步：

*   OSX v10.7.4
*   GCC-10.7.pkg
*   XCode 4.3.2（`Command-line Tools`已安装）

构建输出：

```
manzi:node coderama$ git checkout -b v0.8.6
Switched to a new branch 'v0.8.6'
manzi:node coderama$ ./configure --prefix=/Users/coderama/sandbox/installs/node/v0.8.6Checking for program g++ or c++          : /usr/bin/g++ 
Checking for program cpp                 : /usr/bin/cpp 
Checking for program ar                  : /usr/bin/ar 
Checking for program ranlib              : /usr/bin/ranlib 
Checking for g++                         : ok  
Checking for program gcc or cc           : /usr/bin/gcc 
Checking for gcc                         : ok  
Checking for library dl                  : yes 
Checking for openssl                     : not found 
Checking for function SSL_library_init   : yes 
Checking for header openssl/crypto.h     : yes 
Checking for library util                : yes 
Checking for library rt                  : not found 
Checking for fdatasync(2) with c++       : no 
'configure' finished successfully (3.653s)
manzi:node coderama$ make
Waf: Entering directory `/Users/coderama/sandbox/node/out'
DEST_OS: darwin
DEST_CPU: x64
Parallel Jobs: 1
Product type: program
[ 1/35] copy: src/node_config.h.in -> out/Release/src/node_config.h
[ 2/35] cc: deps/http_parser/http_parser.c -> out/Release/deps/http_parser/http_parser_3.o
/usr/bin/gcc -rdynamic -pthread -m64 -arch x86_64 -g -O3 -DHAVE_OPENSSL=1 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -DHAVE_FDATASYNC=0 -DARCH="x64" -DPLATFORM="darwin" -D__POSIX__=1 -Wno-unused-parameter -D_FORTIFY_SOURCE=2 -IRelease/deps/http_parser -I../deps/http_parser ../deps/http_parser/http_parser.c -c -o Release/deps/http_parser/http_parser_3.o
[ 3/35] src/node_natives.h: src/node.js lib/dgram.js lib/console.js lib/buffer.js lib/querystring.js lib/punycode.js lib/http.js lib/net.js lib/stream.js lib/events.js lib/util.js lib/module.js lib/_debugger.js lib/assert.js lib/fs.js lib/child_process.js lib/os.js lib/readline.js lib/vm.js lib/url.js lib/tls.js lib/crypto.js lib/sys.js lib/https.js lib/freelist.js lib/dns.js lib/_linklist.js lib/buffer_ieee754.js lib/tty.js lib/cluster.js lib/repl.js lib/path.js lib/string_decoder.js lib/timers.js lib/zlib.js lib/constants.js -> out/Release/src/node_natives.h
[ 4/35] uv: deps/uv/include/uv.h -> out/Release/deps/uv/uv.a
rm -f src/ares/*.o
rm -f src/unix/ev/*.o
rm -f src/unix/eio/*.o
rm -f src/unix/*.o
rm -rf test/run-tests.dSYM run-benchmarks.dSYM
rm -f -f src/*.o *.a test/run-tests test/run-benchmarks
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/core.c -o src/unix/core.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/dl.c -o src/unix/dl.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/fs.c -o src/unix/fs.o
src/unix/fs.c: In function ‘uv_fs_fdatasync’:
src/unix/fs.c:459: warning: implicit declaration of function ‘fdatasync’
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/cares.c -o src/unix/cares.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/udp.c -o src/unix/udp.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/error.c -o src/unix/error.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/process.c -o src/unix/process.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/tcp.c -o src/unix/tcp.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/pipe.c -o src/unix/pipe.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/tty.c -o src/unix/tty.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/stream.c -o src/unix/stream.o
/usr/bin/gcc --std=c89 -pedantic -Wall -Wextra -Wno-unused-parameter -Iinclude -Iinclude/uv-private -Isrc/unix/ev -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -D_DARWIN_USE_64_BIT_INODE=1 -Isrc/ares/config_darwin -Isrc  -m64 -arch x86_64 -c src/unix/darwin.c -o src/unix/darwin.o
In file included from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:21:19: error: AE/AE.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:25:35: error: CarbonCore/CarbonCore.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:29:35: error: OSServices/OSServices.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:33:43: error: CoreFoundation/CoreFoundation.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:37:33: error: CFNetwork/CFNetwork.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:41:43: error: LaunchServices/LaunchServices.h: No such file or directory
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:30,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:20:35: error: CoreFoundation/CFBase.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:24:34: error: CoreFoundation/CFURL.h: No such file or directory
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:30,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:51: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:67: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:98: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentCreateWithURL’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:116: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentCopyURL’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:157: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentCreate’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:183: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentGetSchemeName’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:206: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentGetName’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKDocument.h:230: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentGetParent’
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:34,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:20:37: error: CoreFoundation/CFString.h: No such file or directory
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:34,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:54: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKMinTermLength’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:71: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKSubstitutions’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:88: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKStopWords’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:107: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKProximityIndexing’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:127: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKMaximumTerms’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:146: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKTermChars’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:165: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKStartTermChars’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:184: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKEndTermChars’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKAnalysis.h:207: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘kSKLanguageTypes’
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:38,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:28:41: error: CoreFoundation/CFDictionary.h: No such file or directory
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:38,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:75: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:99: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexDocumentIteratorGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:215: error: expected ‘)’ before ‘inURL’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:256: error: expected ‘)’ before ‘inURL’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:295: error: expected ‘)’ before ‘inData’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:332: error: expected ‘)’ before ‘inData’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:368: error: expected ‘)’ before ‘inData’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:394: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexFlush’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:411: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:430: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetMaximumBytesBeforeFlush’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:456: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexCompact’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:498: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetAnalysisProperties’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:522: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetDocumentCount’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:543: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:575: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexAddDocumentWithText’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:624: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexAddDocument’

... Similar errors here...
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:888: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexCopyTermIDArrayForDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:905: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetDocumentTermFrequency’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:928: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetMaximumTermID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:943: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetTermDocumentCount’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:963: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexCopyDocumentIDArrayForTermID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:980: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexCopyTermStringForTermID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKIndex.h:1000: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKIndexGetTermIDForTermString’
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:42,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:32:35: error: CoreFoundation/CFDate.h: No such file or directory
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:42,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:79: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:90: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchOptions’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:131: error: expected declaration specifiers or ‘...’ before ‘CFStringRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:132: error: expected declaration specifiers or ‘...’ before ‘SKSearchOptions’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:195: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchFindMatches’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:238: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:239: error: expected declaration specifiers or ‘...’ before ‘SKDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:240: error: expected declaration specifiers or ‘...’ before ‘CFStringRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:241: error: expected declaration specifiers or ‘...’ before ‘SKDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:272: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:273: error: expected declaration specifiers or ‘...’ before ‘SKDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:274: error: expected declaration specifiers or ‘...’ before ‘SKDocumentRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:305: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:306: error: expected declaration specifiers or ‘...’ before ‘SKDocumentID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:307: error: expected declaration specifiers or ‘...’ before ‘CFURLRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:336: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchGroupGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:359: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchResultsGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:411: error: expected declaration specifiers or ‘...’ before ‘SKDocumentRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:411: error: ‘CALLBACK_API_C’ declared as function returning a function
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:435: error: expected ‘)’ before ‘inArrayOfInIndexes’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:453: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchGroupCopyIndexes’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:501: error: expected declaration specifiers or ‘...’ before ‘CFStringRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:503: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:505: error: expected declaration specifiers or ‘...’ before ‘SKSearchResultsFilterCallBack’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:551: error: expected declaration specifiers or ‘...’ before ‘CFArrayRef’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:552: error: expected declaration specifiers or ‘...’ before ‘CFIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:554: error: expected declaration specifiers or ‘...’ before ‘SKSearchResultsFilterCallBack’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:569: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchResultsGetCount’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:618: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchResultsGetInfoInRange’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSearch.h:650: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSearchResultsCopyMatchingTerms’
In file included from /System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SearchKit.h:46,
                 from /System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:45,
                 from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:69: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryGetTypeID’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:97: error: expected ‘)’ before ‘inString’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:117: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryGetSentenceCount’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:137: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryGetParagraphCount’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:160: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryCopySentenceAtIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:185: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryCopyParagraphAtIndex’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:211: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryCopySentenceSummaryString’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:237: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryCopyParagraphSummaryString’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:278: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryGetSentenceSummaryInfo’
/System/Library/Frameworks/CoreServices.framework/Frameworks/SearchKit.framework/Headers/SKSummary.h:318: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘SKSummaryGetParagraphSummaryInfo’
In file included from src/unix/darwin.c:28:
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:48:31: error: Metadata/Metadata.h: No such file or directory
/System/Library/Frameworks/CoreServices.framework/Headers/CoreServices.h:49:51: error: DictionaryServices/DictionaryServices.h: No such file or directory
src/unix/darwin.c: In function ‘uv_hrtime’:
src/unix/darwin.c:39: error: ‘Nanoseconds’ undeclared (first use in this function)
src/unix/darwin.c:39: error: (Each undeclared identifier is reported only once
src/unix/darwin.c:39: error: for each function it appears in.)
src/unix/darwin.c:39: error: expected ‘;’ before ‘enano’
src/unix/darwin.c:41: error: ‘enano’ undeclared (first use in this function)
src/unix/darwin.c:41: warning: implicit declaration of function ‘AbsoluteToNanoseconds’
src/unix/darwin.c:41: error: ‘AbsoluteTime’ undeclared (first use in this function)
src/unix/darwin.c:41: error: expected expression before ‘)’ token
src/unix/darwin.c:43: warning: control reaches end of non-void function
src/unix/darwin.c: In function ‘uv_exepath’:
src/unix/darwin.c:60: warning: implicit declaration of function ‘malloc’
src/unix/darwin.c:60: warning: incompatible implicit declaration of built-in function ‘malloc’
src/unix/darwin.c:61: warning: implicit declaration of function ‘realpath’
src/unix/darwin.c:61: warning: assignment makes pointer from integer without a cast
src/unix/darwin.c:64: warning: implicit declaration of function ‘free’
make[1]: *** [src/unix/darwin.o] Error 1
Waf: Leaving directory `/Users/coderama/sandbox/node/out'
Build failed:  -> task failed (err #2): 
    {task: uv uv.h -> uv.a}
make: *** [program] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T04:24:31.310

通过安装 XCode 的`Command Line Tools`.

这可以通过`Preferences -> Downloads -> Command Line Tools`

# c# - 在 WPF 中加载 BitmapImage 的源？

> ID：11771223
> 
> 赞同：2
> 
> 时间：2012-08-02T04:49:45.097
> 
> 标签：c#, wpf, bitmapimage

在 silverlight 应用程序中，我将 BitmapImage 定义为`System.Windows.Media.Imaging.BitmapImage`，并将其定义为一个名为 " `SetSource`" 的方法，在其中我可以像这样设置源：

```
BitmapImage bitmap = new BitmapImage();
System.IO.Stream stream = _scene.GetStream();
if (stream == null) return;
bitmap.SetSource(stream); 
```

在 WPF 应用程序中，我还定义了一个位图图像，`System.Windows.Media.Imaging.BitmapImage`但没有 SetSource 方法。如何像在 Silverlight 应用程序中一样在 WPF 应用程序中设置源？

此外，它是一个流，而不是一个字符串。它不是 URI。所以“UriSource”方法不起作用。我试过这个：

```
 System.IO.Stream stream = _scene.GetStream();
        if (stream == null) return;
        BitmapImage bitmap = new BitmapImage();

        bitmap.UriSource = new Uri(stream.ToString()); 
```

并且在运行时，它抛出了一个无法确定 URI 的错误。URI 是 Intranet 的标识符吗？你确定这不是银光吗？我正在做一个 WPF 应用程序

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T14:39:29.623

您必须设置[BitmapImage.StreamSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.streamsource)属性：

```
BitmapImage bitmap = new BitmapImage();
bitmap.BeginInit();
bitmap.StreamSource = _scene.GetStream();
bitmap.EndInit(); 
```

如果您想在创建位图后立即关闭流，您还必须设置`BitmapCacheOption.OnLoad`选项：

```
using (Stream stream = _scene.GetStream())
{
    bitmap.BeginInit();
    bitmap.CacheOption = BitmapCacheOption.OnLoad;
    bitmap.StreamSource = stream;
    bitmap.EndInit();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T04:51:58.010

您可以使用[构造函数](http://msdn.microsoft.com/en-us/library/ms602473.aspx)来指定[UriSource](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

```
BitmapImage bmp = new BitmapImage(uriSource: new Uri()); 
```

或者您可以使用[BitmapImage.StreamSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapimage.streamsource.aspx)属性来设置 StreamSource

# audio - 为什么应用程序由于 UIBackgrounds 模式键而被拒绝？

> ID：11771224
> 
> 赞同：8
> 
> 时间：2012-08-02T04:49:53.327
> 
> 标签：audio, appstore-approval

我的应用程序在 Titanium 中完成了。我的应用程序在某些部分有一些音频 mp3 链接。用户可以播放该链接并在后台播放它我添加了一个关键的**所需背景模式**作为“应用程序播放音频”。但苹果拒绝了我的两个即使我使用有声内容并在**Info.Plist**中提供密钥-请有人建议我应该怎么做？我需要在 Itunes 上再次上传新版本吗？ ![在此处输入图像描述](../Images/1480ba7db6d6f3af3437dc25bd59ab50.png)

> **2.16：多任务应用程序只能将后台服务用于其预期目的：VoIP、音频播放、位置、任务完成、本地通知等。**
> 
> 我们发现您的应用使用后台模式，但不包含需要该模式持续运行的功能。此行为不符合 App Store 审核指南。
> 
> 我们注意到您的应用在 Info.plist 的 UIBackgroundModes 键中声明支持音频，但不包含需要持久音频的功能。
> 
> 如 iOS 应用程序编程指南中所述：
> 
> “此密钥旨在供在后台向用户提供可听内容的应用程序使用，例如音乐播放器或流音频应用程序。”
> 
> 因此，在应用程序处于后台时向用户提供可听内容或从 UIBackgroundModes 键中删除“音频”设置是合适的。
> 
> 对于离散代码级别的问题，您可能希望咨询 Apple 开发人员技术支持。请务必：
> 
> *   包括您的拒绝问题的完整详细信息
> *   准备任何符号化的崩溃日志、屏幕截图和步骤，以便在 DTS 工程师跟进时重现问题。
> 
> 有关如何符号化和读取崩溃日志的信息，请参阅技术说明 TN2151 理解和分析 iPhone OS 应用程序崩溃报告。
> 
> 如果您在重现此问题时遇到困难，请尝试按照[https://developer.apple.com/library/ios/qa/qa1764/Testing](https://developer.apple.com/library/ios/qa/qa1764/) Workflow with Xcode's Archive feature 中所述测试工作流程”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T02:42:57.623

您应该在 AppDelegate 的 didFinishLaunchingWithOptions 方法中设置适当的音频会话以支持背景音乐播放。

```
[[AVAudioSession shareInstance] setDelegate:self];
NSError *sessionError = nil;
[[AVAudioSession shareInstance] setCategory:AVAudioSessionCategoryPlayback error:&sessionError];

NSError *activationError = nil;
[[AVAudioSession shareInstance] setActive:YES error:&activationError]; 
```

# ios - NSAtributedString 字体

> ID：11771228
> 
> 赞同：5
> 
> 时间：2012-08-02T04:50:28.667
> 
> 标签：ios, nsattributedstring

如何在 iPhone 上设置 NSAtributedString 的字体。我在网上找到了如何为mac做，但它不一样。当我试图将其转换为 iOS 平台时，它不起作用。我需要设置字体名称和字体大小。

```
 NSDictionary *attributes = [[NSDictionary alloc] initWithObjectsAndKeys:
                                [UIFont fontWithName:@"Helvetica" size:26], kCTFontAttributeName,
                                [UIColor blackColor], kCTForegroundColorAttributeName, nil]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T04:54:25.480

查看代码

```
infoString=@"This is an example of Attributed String";

NSMutableAttributedString *attString=[[NSMutableAttributedString alloc] initWithString:infoString];
NSInteger _stringLength=[infoString length];

UIColor *_black=[UIColor blackColor];
UIFont *font=[UIFont fontWithName:@"Helvetica-Bold" size:30.0f];
[attString addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, _stringLength)];
[attString addAttribute:NSForegroundColorAttributeName value:_black range:NSMakeRange(0, _stringLength)]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T05:07:56.870

的值`kCTFontAttributeName`必须是 a `CTFontRef`，而不是 a `UIFont *`。您不能直接将 a 转换`UIFont`为 a `CTFont`。您应该能够只使用`CTFontCreateWithName`来创建它。完成后您需要使用`CFRelease`它，以避免内存泄漏。查看[*`CTFont`参考资料*](http://developer.apple.com/library/ios/#DOCUMENTATION/Carbon/Reference/CTFontRef/Reference/reference.html)。

此外， for 的值`kCTForegroundColorAttributeName`必须是 a `CGColorRef`，而不是 a `UIColor *`。您可以通过说轻松解决此问题`[UIColor blackColor].CGColor`。

### 更新

如果您使用 UIKit 属性字符串支持（在 iOS 6.0 中添加），您可以使用`NSFontAttributeName`带有 a`UIFont`作为值的键。您还可以将`NSForegroundColorAttributeName`键与`UIColor`值一起使用。请参阅[*NSAttributedString UIKit 添加参考*](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/index.html#//apple_ref/doc/constant_group/Character_Attributes)。

# android - 如何在行中选择复选框单击列表

> ID：11771229
> 
> 赞同：0
> 
> 时间：2012-08-02T04:50:33.957
> 
> 标签：android, list

好的，我正在改写这个问题，

我有一个具有多个布局的自定义 BaseAdaptor，在选择列表行时选择复选框时遇到问题，

实际上它不适用于使用布局的第一行，其他的完全按照我想要的方式工作。

***编辑添加一些代码的时间：在我的主类中：

```
myAdaptor = new ListAdapter(this, myValues);
    listview.setAdapter(myAdaptor);
    Log.d("SettingsScreen", "Setup listview click");
    listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> l, View v, int pos, long arg3) {
            if (pos == 1) {
                myAdaptor.displayNeedle.setChecked(!myAdaptor.displayNeedle
                        .isChecked());
            } else if (pos == 2) {
                accent1st.setChecked(!accent1st.isChecked());
            } else if (pos == 3) {
                myAdaptor.wakeLock.setChecked(!myAdaptor.wakeLock
                        .isChecked());
            } else if (pos == 4) {
                tapTimeSig.setChecked(!tapTimeSig.isChecked());
            }
        }
    });

} 
```

我的自定义适配器：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        int type = layoutType[position];
        holder = null;
        holder = new ViewHolder();

        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
            case 0:
                convertView = mInflater.inflate(R.layout.tickbox, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.label);
                if (position == 1) {
                    displayNeedle = (CheckBox) convertView
                            .findViewById(R.id.mycheckbox);
                    displayNeedle
                            .setOnCheckedChangeListener(new OnCheckedChangeListener() {
                                @Override
                                public void onCheckedChanged(
                                        CompoundButton arg0, boolean arg1) {
                                    getData().setDisplayNeedle(
                                            !getData().getDisplayNeedle());
                                }
                            });
                }
                else if (position == 2) {
                    accent1st = (CheckBox) convertView
                            .findViewById(R.id.mycheckbox);
                    accent1st.setChecked(getData().getAccentBeat(0));
                    accent1st
                            .setOnCheckedChangeListener(new OnCheckedChangeListener() {
                                @Override
                                public void onCheckedChanged(
                                        CompoundButton arg0, boolean arg1) {
                                    getData().setAccentBeat(0,
                                            accent1st.isChecked());
                                }
                            });
                }
                if (position == 3) {
                    wakeLock = (CheckBox) convertView
                            .findViewById(R.id.mycheckbox);
                    wakeLock.setChecked(getData().getWakeLock());
                    if (!getData().getPro()) {
                        wakeLock.setEnabled(false);
                        values[3] += " (Pro version only)";
                    }
                    wakeLock.setOnCheckedChangeListener(new OnCheckedChangeListener() {
                        @Override
                        public void onCheckedChanged(CompoundButton arg0,
                                boolean arg1) {
                            if (getData().getPro())
                                getData().setWakeLock(wakeLock.isChecked());
                        }
                    });
                }
                if (position == 4) {
                    tapTimeSig = (CheckBox) convertView
                            .findViewById(R.id.mycheckbox);
                    tapTimeSig.setChecked(getData().getTapTimeSig());
                    tapTimeSig
                            .setOnCheckedChangeListener(new OnCheckedChangeListener() {
                                @Override
                                public void onCheckedChanged(
                                        CompoundButton arg0, boolean arg1) {
                                    getData().setTapTimeSig(
                                            tapTimeSig.isChecked());
                                }
                            });
                }
                break; 
```

感谢您到目前为止的支持，我已经坚持了太久了，例如几周！我真的很想让它正常运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:34:22.093

我认为你可以这样做：

```
yourListView.setOnItemClickListener(new OnItemClickListener() {
   @Override
    public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
        for(int i=0;i<parent.getCount();i++){
            View v=parent.getChildAt(parent.getCount()-1-i);
            if (position == i) {
                v.setBackgroundColor(Color.RED);//highlight color
            } else {
                v.setBackgroundColor(Color.TRANSPARENT);//not highlight color
            }
        }
    }
}); 
```

希望有帮助。

# php - php + mysql 将多行转换为单行中的列

> ID：11771230
> 
> 赞同：0
> 
> 时间：2012-08-02T04:50:40.677
> 
> 标签：php, mysql, sql

我的数据库表中有以下详细信息，其中包含列：

```
currency code
currency rate
currency trade type 
```

例如，我有以下详细信息（数据库）：

```
USD  3.33  buy 
USD  3.43  sell
SGD  4.33  buy
SGD  4.43  sell 
```

然后，我想将我的数据库表带入 PHP/HTML 表，如下所示：

```
 BUY   SELL
USD  3.33  3.43 
SGD  4.33  4.43 
```

如何使用循环使它们成为那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T04:56:29.630

```
SELECT
    t1.code,
    t1.rate as buy,
    t2.rate as sell
FROM currency t1
JOIN currency t2 ON t2.code = t1.code AND t2.trade_type = 'sell'
WHERE t1.trade_type = 'buy' 
```

假设这是一个货币汇率表，并且任何 (code,trade_type) 对都没有重复项。

# linux - 如何通过 uname -a 命令判断内核是什么？

> ID：11771233
> 
> 赞同：0
> 
> 时间：2012-08-02T04:51:16.510
> 
> 标签：linux, amazon-ec2

我有一个 ec2 实例，我无法说出确切的操作系统。

我输入`uname -a`并显示：

```
2.6.18-274.7.1.el5xen #1 SMP Thu Oct 20 17:06:34 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux

```

它并不表示它是 ubuntu、centOS、debian 还是其他。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:55:58.893

lsb_release 是一个需要研究的命令。这是手册页： http: [//linux.die.net/man/1/lsb_release](http://linux.die.net/man/1/lsb_release)

示例用法：

```
ben@ubuntu:~$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 11.10
Release:    11.10
Codename:   oneiric 
```

或者您可以仅指定分销商 ID：

```
ben@ubuntu:~$ lsb_release -i
Distributor ID: Ubuntu 
```

# php - php日期转换为javascript日期

> ID：11771234
> 
> 赞同：3
> 
> 时间：2012-08-02T04:51:21.753
> 
> 标签：php, javascript

我有一个 php 日期，并希望在 javascript 警报框中回显它：-

```
$day=15;
$month=8;
$year=2012;

$date_display = date("Y-m-d", mktime(0, 0, 0, $month, $day, $year));
echo $date_display; // 2012-08-15 
```

然后，

```
<a href="#" onclick="give_date(<?=$date_display;?>)"><?=$day;?></a> 
```

javascript函数：

```
<script>
function give_date(value){
alert (value);  
}
</script> 
```

有趣的是，警告框给了我“1989”，等于 2012 减 8 减 15！我该怎么办！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T04:56:17.287

现在你得到：`<a href="#" onclick="give_date(2012-08-15)">15</a>`，所以它在浏览器中计算它。

解决方案很简单 - 添加引号：

```
<a href="#" onclick="give_date('<?=$date_display;?>')"><?=$day;?></a> 
```

然后你得到：`<a href="#" onclick="give_date('2012-08-15')">15</a>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:08:40.743

您正在使*客户端代码*显示加载页面时*服务器*`alert`的日期。

 *如果要向用户显示当前时间，请使用以下命令：

**HTML：**

```
<a href="#" id="date">Please enable JavaScript.</a> 
```

**JavaScript：**

```
<script type="text/javascript">
function show_date() {
    alert(new Date());  
}
window.onload = function() {
    document.getElementById('date').innerHTML = new Date().getDay();
};
document.getElementById('date').onclick = show_date;
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T04:55:52.283

如果你愿意的话，你可以使用 jQuery

```
<a href="#" id="<?php echo $date_display; ?>">Click to get date popup</a>

$(function(){

 $('a').click(function(){

       var dt = $(this).attr('id');
       alert(dt);
 });

}); 
```*

# css - CSS 问题导航下拉菜单

> ID：11771243
> 
> 赞同：0
> 
> 时间：2012-08-02T04:52:49.973
> 
> 标签：css, drop-down-menu

我的 CSS 在第一级菜单上运行良好。完全没有问题。自从我开始尝试添加下拉/子菜单以来，我遇到了各种各样的问题。

我能做到的最好的办法是让菜单像我想要的那样在主菜单下方下拉，但子菜单显示为内联而不是垂直列表。此外，菜单和子菜单块似乎比我想要的要高。我在导航容器内的所有东西上都将高度设置为继承，但我仍然得到了 LI 分隔符的这个奇怪的扩展。如果您在 codepen 中翻转主菜单链接，您就会明白我的意思。我已经为此绞尽脑汁太久了，真的可以用全新的眼光来看待它，因为我已经对我的代码尝试了很多不同的调整，现在我迷路了。（注意：我从 Suckerfish 的儿子那里得到了这个下拉菜单的框架。这是我至少到目前为止唯一可以工作的框架。）

![图片](../Images/0a7c18ef528b3192d66caf3885a2a59e.png)

[代码](http://codepen.io/anon/pen/zsIqr)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:15:01.780

你可以添加这个：

```
#navigation ul ul li {
    display: block;
} 
```

它在 codepen 中看起来不正确，因为背景图像没有渲染。此外，锚点右侧的红色边框不会对齐，因为锚点的宽度取决于它们的内容。如果你想让它排成一行，你将不得不稍微摆弄一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:35:05.630

添加宽度：50px；到#navigation li a

# database - 在同一个项目中运行多个数据库是否很好？

> ID：11771244
> 
> 赞同：5
> 
> 时间：2012-08-02T04:52:51.300
> 
> 标签：database, database-design

我读过很多数据库设计书籍，但他们都只使用**一个**数据库来处理**一个项目**。但我想知道让**多个**数据库处理同**一个项目**是个好主意吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T04:58:08.770

一般来说，没有。然而...

您*可能*需要多个数据库的原因：

1.  不同的目标。例如 OLAP 与 OLTP
2.  不同的公司、域或租户，您需要保证域之间的数据永远不会混合。
3.  数据存档。

如果这些条件都不适用，您可能不需要多个数据库。相反，您可以使用诸如 TenantID、CategoryID 等字段 ID 对数据进行分区。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T04:59:57.537

并不真地。

当然，在某些情况下它是必需的，甚至是可取的，但这些是针对特定用例的。

通常，您不希望将关系完整性（难以跨数据库强制执行）和事务完整性结合起来。必须有一个非常令人信服的理由来拆分数据集，以增加单独数据库实例的复杂性和维护。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T04:58:56.257

通常，如果一个项目使用多个数据库，那是因为它必须使用不同的、通常是源自该特定项目之外的遗留信息源。这在企业环境中最为常见。

如果您正在创建一个新项目，请创建一个单独的数据库来表示与该项目关联的数据，除非有特定的、令人信服的论据可以这样做。

# supersized - 我们可以为每个具有超大 3.2.7 版本的背景图像显示预加载器图像吗

> ID：11771246
> 
> 赞同：1
> 
> 时间：2012-08-02T04:53:07.073
> 
> 标签：supersized

我正在使用 Supersized jquery 插件版本：3.2.7，我正在放置 40 张图片作为带有自动播放选项的背景幻灯片。但是在 3 或 4 张图片的幻灯片放映之后，即使下一张背景图片没有完全加载并且有时只显示一半的图片，它也会转到下一张幻灯片。

是否有任何选项可以为每个背景图像显示预加载器图像。

# java - 简单的图形程序

> ID：11771255
> 
> 赞同：1
> 
> 时间：2012-08-02T04:54:37.490
> 
> 标签：java, c++, qt, networking

我制作了一个小型 C++ 网络应用程序。它将数据包交换输出到一个文件中。输出如下所示：

```
From..to..message
1 2 "hi"
2 3 "hi"
3 2 "hi back"
2 1 "hi back" 
```

所以第一个字段是源，第二个是目的地，第三个是消息。我一共有10个节点，全部显示在一行（0...1...2...etc...9），每个输出行对应连续节点之间的一条消息。

我的问题是，随着输出变得越来越大，输出并不那么容易阅读。我想要一个非常小的应用程序（例如，在 java 或 qt 中，无论哪个需要较少的行来实现），它从该输出中读取并从中生成一个小型 GUI 应用程序，以便所有节点都出现在 GUI 中窗口（从 0 到 9，等距，环绕），每次我按右箭头（向前）或左箭头（向后）时，它都会从输出中读取一行，并显示一个从源到目标的箭头，并且在那个箭头上会显示消息。所以是这样的：

```
 hi
0     1     2---->3     4     5     6     7     8     9 
```

我对有关 GUI 描述的其他建议持开放态度，我根本不是图形设计师，我所知道的是我希望 GUI 使我的输出更易于解释。如果输出结构更易于解析，也可以更改为其他结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T09:29:28.733

你可以试试[GraphViz](http://www.graphviz.org/)。

生成一些看起来像

```
 hi
1     2---->3     4     5     6     7     8     9 
```

您应该生成一个纯文本文件：

```
digraph G {
    { rank = same; 1; 2; 3; 4; 5; 6; 7; 8; 9; };
    2 -> 3 [label="hi"];
} 
```

然后，调用`dot -Tpng <text file name> -o <output image file name>`，你可以得到一个看起来像这样的图像：

![示例图](../Images/059cf239ac6399fa6300a82978563505.png)

要制作动画，您可能需要更改输出格式`gif`并使用其他工具来制作动画 GIF。

# directx - 使用 Direct2D 在 Direct3D11 表面上绘图

> ID：11771257
> 
> 赞同：5
> 
> 时间：2012-08-02T04:55:10.160
> 
> 标签：directx, direct3d, direct2d, ms-media-foundation

我正在尝试创建一个使用 D2D 和 D3D11 在视频上绘制文本的媒体基础转换。我正在尝试在 D3D11 资源之上构建 D2D RenderTarget，但不幸的是，大多数 D2D 和 D3D 互操作方法都需要 D3D10，这在此项目中不可用。

我必须使用的参数如下：ID3D11Device *pDevice、ID3D11Texture2D *pInput、UINT uiInIndex、ID3D11Texture2D *pOutput 和 UINT uiOutIndex。

我试图遵循[本教程](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370966%28v=vs.85%29.aspx)的建议，但结果证明它需要一个 ID3D10Texture2D 对象，这对我来说又不是一个选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T13:04:42.603

我之前遇到过同样的问题，这取决于您运行的是哪个系统。

1.  在 Windows 7 上，只有 Direct3D 10 支持与 Direct2D 互操作
2.  在 Windows 8 上，Direct2D 可以与 Direct3D 11 互操作

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T21:25:53.217

本质上，您将帧从输入纹理复制到输出纹理，然后执行以下操作以检索 IDXGI 表面：

```
IDXGISurface *surface;
pOutput->QueryInterface(&surface); 
```

然后，按照[本教程](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370966%28v=vs.85%29.aspx)中的步骤将表面转换为 Direct2D 渲染目标。一旦你有了渲染目标，你就可以像教程中绘制渐变的方式一样在它上面绘制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:21:00.897

你创建一个交换链吗？如果您使用 XAML UI，您可以使用 IDXGIFactory2::CreateSwapChainForCoreWindow 或 CreateSwapChainForComposition 创建一个。然后在渲染 d3d 内容后，您可以创建 d2d 目标并在顶部渲染，就像在这个 d3d 教程示例中一样，查找“sampleOverlay.cpp”

[http://code.msdn.microsoft.com/windowsapps/Direct3D-Tutorial-Sample-08667fb0/sourcecode?fileId=44730&pathId=1319002242](http://code.msdn.microsoft.com/windowsapps/Direct3D-Tutorial-Sample-08667fb0/sourcecode?fileId=44730&pathId=1319002242)

# javascript - Javascript：为元素设置适当的事件处理程序

> ID：11771259
> 
> 赞同：1
> 
> 时间：2012-08-02T04:55:22.047
> 
> 标签：javascript, dom-events

我有一个 DOM 结构，如下所示 -

```
<div id='MyDiv'>
    <span>Hello MyDiv</span>
    <p class='MyClass'>
        <img src='image.png' alt='myImage' width='300px' height='300px' />
        <a href='#goToNextDiv'>Go to next</a>
    </p>
</div> 
```

现在`MyDiv`有一个带有原型库的 click 事件处理程序，我无法访问其源代码。我想从 div 中删除这个处理程序并插入另一个。我为此尝试了以下代码-

```
var content = document.getElementById('MyDiv');
content.addEventListener('click', function(event){
    event.preventDefault();
    event.stopPropagation();

    alert('This is my handler');    

    return false;
}, true); 
```

问题是，这段代码还阻止`click`了锚标记的事件。单击 div 会导致我的事件处理程序执行，这是所需的，但它也会停止锚标记以执行它的正常行为（即跳转到 div `goToNextDiv`）。

现在我尝试注释掉该`event.stopPropagation()`行，这再次启用事件传播并允许锚点相应地运行，但随后它也执行`MyDiv`.

如何从 div 中删除以前的处理程序并附加我的新处理程序，以便 -

1.  没有调用 div 的前一个事件处理程序
2.  我的 div 事件处理程序执行
3.  锚标签也有效（在任何地方，div 内可能有很多锚标签）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:14:17.593

您可以检查点击目标是否是锚点，而不是阻止默认操作。

```
var content = document.getElementById('MyDiv');
content.addEventListener('click', function(event){
    if (event.target.tagName != 'A'){//or some other way to tell if it is a link
        event.preventDefault();
        event.stopPropagation();

        alert('This is my handler');    

        return false;
    }
}, true); 
```

# java - TCP 服务器连接重置

> ID：11771260
> 
> 赞同：-1
> 
> 时间：2012-08-02T04:55:24.780
> 
> 标签：java, sockets, tcp

我有一个服务器如下：

```
import java.io.*;
import java.net.*;
import java.util.StringTokenizer;

public class MyTcpServer {

    static ServerSocket server = null;
    static Socket connectionSocket = null;
    static BufferedReader inFromClient = null;
    static PrintWriter outToClient = null;

    public static void initiateService() {
        try {
            server = new ServerSocket(1234);

            System.out.println("TCPServer Waiting for client on port 1234");
        } catch (IOException e) {
            System.out
                    .println("There is some error!! Please try some other port!");
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public static void awaitRequest() throws IOException {
        String instructionsToClient = null;
        System.out.println("Service Ready");
        while (true) {
            connectionSocket = server.accept();

            inFromClient = new BufferedReader(new InputStreamReader(
                    connectionSocket.getInputStream()));
            outToClient = new PrintWriter(connectionSocket.getOutputStream(),
                    true);

            String messageToClient;
            String messageFromClient = null;

            synchronized (Thread.currentThread()) {

                System.out.println("Client:"
                        + connectionSocket.getInetAddress()
                        + " connected on port :"
                        + connectionSocket.getLocalPort());

                messageToClient = "Welcome!!!! You are now connected to our server!! We ensure a reliable service.\n"
                        + "\n Your IP:"
                        + connectionSocket.getInetAddress()
                        + "  \n"
                        + connectionSocket.getLocalPort()
                        + "::::MESSAGE FROM SERVER::::\n"
                        + "Lets play Water jug puzzel!! You give me sizes of two water Jars\n"
                        + "And a desired level to be achieved! Ill tell you whether the problem\n"
                        + "is solvable or not!!\n"
                        + "Comprande~?\n"
                        + "Enter your choice Y/N \n"
                        + "--------------------------";

                synchronized (outToClient) {

                    outToClient.println(messageToClient);
                    outToClient.flush();

                    System.out.println("invite sent to the client!!");

                }

                synchronized (inFromClient) {

                    messageFromClient = inFromClient.readLine();
                    System.out.println("The user says: " + messageFromClient);

                }

                if (messageFromClient.equalsIgnoreCase("y")) {
                    messageToClient = "Wow!! awesome! Throw a challenge at me!"
                            + "\nEnter Large jug volume,Small jug volume,Desired level in comma separated fashion"
                            + "\nFor example (5,3,2)"
                            + "\n--------------------------";

                } else if (messageFromClient.equalsIgnoreCase("n")) {
                    messageToClient = "Great! we dont have a problem with you not playing the puzzel!"
                            + "Do you wanna exit? press q and smack Enter key!"
                            + "\n--------------------------";
                } else {
                    messageToClient = "psssst!!! Wanna quit??"
                            + "press q and smack Enter key!"
                            + "\n--------------------------";
                }

                synchronized (messageToClient) {

                    outToClient.println(messageToClient);
                    outToClient.flush();

                    System.out.println("reply sent to the client!!");

                }
                messageFromClient = "";
                synchronized (inFromClient) {
                    System.out.println("Entered");

                    messageFromClient = inFromClient.readLine();
                    System.out.println("The user says: " + messageFromClient);

                if (messageFromClient.equalsIgnoreCase("q")) {
                    System.out.println("ui");
                    messageToClient = "Thank you!!"
                            + "\n--------------------------";
                } else {
                    StringTokenizer st = new StringTokenizer(messageFromClient,
                            ",");

                    if (st.countTokens() != 3) {
                        messageToClient = "See! the input you gave has some problem!"
                                + "\n you havent followed the instructions properly"
                                + "\n Thank you!! Bye for now! come back later!"
                                + "\n--------------------------";
                    } else {
                        messageToClient = "Thanks! i am solving it!"
                                + "\n--------------------------";

                    }
                }
                }

                synchronized (messageToClient) {

                    outToClient.println(messageToClient);
                    outToClient.flush();

                    System.out.println("problem answered sent to the client!!");

                }

            }
        }
    }

    public static void main(String[] args) throws IOException {
        initiateService();
        awaitRequest();
    }

} 
```

我有一个客户端访问这个特定的服务器！

```
import java.io.*;
import java.net.*;

public class MyTcpClient {

    static Socket clientSocket;
    static BufferedReader inFromUser;
    static PrintWriter outToServer;
    static BufferedReader inFromServer;

    public static void main(String argv[]) throws Exception {
        String FromServer;
        String ToServer;

        clientSocket = new Socket("localhost", 1234);

        // for user to type messages in client mode
        inFromUser = new BufferedReader(new InputStreamReader(System.in));

        // client program uses this to write on the server
        outToServer = new PrintWriter(clientSocket.getOutputStream(), true);

        // servers talk back to the client
        inFromServer = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));

        FromServer = "";
        while (!FromServer.equals("--------------------------")) {
            FromServer = readFromServer();
            System.out.println(FromServer);

        }

        System.out.println("Enter choice!");
        String choice = "";

        choice = inFromUser.readLine();
        System.out.println("" + choice);

        synchronized (outToServer) {

            outToServer.println(choice);
            outToServer.flush();
        }

        FromServer = "";
        while (!FromServer.equals("--------------------------")) {
            FromServer = readFromServer();
            System.out.println(FromServer);

        }

        choice = inFromUser.readLine();
        System.out.println("" + choice);

        synchronized (outToServer) {

            outToServer.println(choice);
            outToServer.flush();
        }

        FromServer = "";
        while (!FromServer.equals("--------------------------")) {
            FromServer = readFromServer();
            System.out.println(FromServer);
        }

    }

    static String readFromServer() throws IOException {
        String response = inFromServer.readLine();
        return response;
    }

} 
```

在成功运行时，服务器端的输出是这样的：

```
TCPServer Waiting for client on port 1234
Service Ready
Client:/127.0.0.1 connected on port :1234
invite sent to the client!!
The user says: y
reply sent to the client!!
Entered
The user says: 5,3,2 
```

客户端的输出是这样的：

```
Welcome!!!! You are now connected to our server!! We ensure a reliable service.

 Your IP:/127.0.0.1  
1234::::MESSAGE FROM SERVER::::
Lets play Water jug puzzel!! You give me sizes of two water Jars
And a desired level to be achieved! Ill tell you whether the problem
is solvable or not!!
Comprande~?
Enter your choice Y/N 
--------------------------
Enter choice!
y
y
Wow!! awesome! Throw a challenge at me!
Enter Large jug volume,Small jug volume,Desired level in comma separated fashion
For example (5,3,2)
--------------------------
5,3,2
5,3,2
Exception in thread "main" java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at MyTcpClient.readFromServer(MyTcpClient.java:85)
    at MyTcpClient.main(MyTcpClient.java:78) 
```

此处引发的异常仅在提供以逗号分隔的字符串时。不知道出了什么问题，有人可以分享吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:17:47.013

我不打算尝试您的代码，但正如两个人已经尝试过的那样，我认为问题*可能*不在于您的代码。

看看[这个](https://stackoverflow.com/a/585643/1564493)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:54:02.153

您的代码中还有*其他*一些问题：

```
static ServerSocket server = null; 
```

不应该是静态的。

```
static Socket connectionSocket = null; 
```

既不应该是静态的，也不应该是实例成员。它应该是调用accept()的方法中的一个局部变量。

```
static BufferedReader inFromClient = null;
static PrintWriter outToClient = null; 
```

在这种情况下同上，但在一般情况下，它们应该是您为每个新接受的套接字实例化的每个连接类的实例成员。这通常是`Runnable,`其`run()`方法为该客户端执行所有 I/O，或调用执行此操作的方法。

# iphone - iPhone 短时间振动

> ID：11771262
> 
> 赞同：2
> 
> 时间：2012-08-02T04:55:32.407
> 
> 标签：iphone, ios5, short, vibration

我目前正在使用 AudioServicesPlaySystemSound 方法。

```
AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 
```

但不幸的是，对我来说振动太长了。有人知道如何缩短这个吗？

# c++ - 为什么我的服务器不向我的客户端发送任何内容

> ID：11771266
> 
> 赞同：-1
> 
> 时间：2012-08-02T04:56:01.407
> 
> 标签：c++, c, sockets

我已经尝试在后台运行我的服务器，它显示在 ps 下，我可以看到我的服务器正在运行，但是当我尝试运行客户端时，正确的服务器应该写信给客户端说“成功连接到服务器”，但那里没有任何输出。

我的服务器代码

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/un.h>
#include <sys/types.h>
#include <sys/socket.h>

#ifndef AF_LOCAL
#define AF_LOCAL AF_UNIX
#endif
#ifndef PF_LOCAL
#define PF_LOCAL PF_UNIX
#endif

using namespace std;

int main()
{

int serverFd;
int clientFd;
int serverLen;
int clientLen;
string message;
string serverSockAddrPtr;
struct sockaddr* serverSockAddressPnt;
struct sockaddr* clientSockAddressPnt;
struct sockaddr_un serverAddress;
struct sockaddr_un clientAddress;

cout << "" << endl;
cout << "Running server program 'css' ...... " << endl;
cout << "" << endl;

// SOCKET CREATION PART - SERVER
serverFd = socket (AF_LOCAL, SOCK_STREAM, 0);

/* Set domain type */
serverAddress.sun_family = AF_LOCAL;

/* Set name */
strcpy (serverAddress.sun_path, "CServer");

/* GET SIZE OF Server Addres */
serverLen = sizeof serverAddress;
/* GET SIZE OF Client Addres */
clientLen = sizeof clientAddress;

/* Get Server Sock Address Pointer*/
serverSockAddressPnt = (struct sockaddr *) &serverAddress;
/* Get Client Sock Address Pointer*/
clientSockAddressPnt = (struct sockaddr *) &clientAddress;

/* Create file */
bind (serverFd, serverSockAddressPnt , serverLen);

/* listen for connection */
listen (serverFd,5);

cout << "" << endl;
// SOCKET CREATION END - SERVER

while(1)
{
//accept client connection
clientFd = accept(serverFd, clientSockAddressPnt, (socklen_t*)&clientLen);

if(clientFd >= 0)
{
    if(fork() == 0)
    {
        message="Successfully connected to the server";
        write(clientFd,message.c_str(),strlen(message.c_str())+1);
        close(clientFd);
        exit(0);
    }
    else
        close(clientFd);
}

}

return 0;
} 
```

我的客户代码

```
#include <iostream>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <sys/un.h>
#include <sys/types.h>
#include <sys/socket.h>
#define DEFAULT_PROTOCOL 0
#ifndef AF_LOCAL
#define AF_LOCAL AF_UNIX
#endif
#ifndef PF_LOCAL
#define PF_LOCAL PF_UNIX
#endif

using namespace std;

/* READ LINE FUNCTION*/
int readLine (int fd,char* str)
{
    int n;
    do
    {
        n = read(fd,str,1);
    }while(n>0&& *str++ != 0);
    return(n>0);
}
/* READ LINE FUNCTION END*/

/* READ SERVER FUNCTION*/
void readServer (int fd)
{
    char str[500];
    while (readLine(fd,str))
    {
        printf("%s",str);
    }
}
/* READ SERVER FUNCTION END*/

int main()
{

int clientFd,serverLen,result;
struct sockaddr_un serverAddress;
struct sockaddr* serverSockAddressPnt;

/* Get Server Sock Address Pointer*/
serverSockAddressPnt = (struct sockaddr *) &serverAddress;

/* GET SIZE OF Server Addres */
serverLen = sizeof serverAddress;

clientFd = socket (AF_LOCAL, SOCK_STREAM, DEFAULT_PROTOCOL);
serverAddress.sun_family = AF_LOCAL;
strcpy (serverAddress.sun_path,"CServer");

do
{
    // a loop to keep trying till connected.
    result=connect(clientFd,serverSockAddressPnt,serverLen);
    if(result==-1)
    {
        //wait for 1 second to retry
        sleep(1);
    }

}while(result==-1);
readServer (clientFd);
close (clientFd);
exit(0);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:52:34.797

PL。正如 Joachim 建议的那样，为您的代码添加更多错误处理。问题的最可能原因是您正在绑定，但在此之前您没有删除要绑定的套接字文件（假设该文件已经存在，因为您正在试验）（即“CServer”）。

因此，即使绑定失败，但由于错误是热处理的，服务器也会启动（您可以通过 ps 命令看到它）。即使您可以看到使用 ps 运行的服务器，您的客户端也无法连接。因此，您可以通过在绑定之前取消链接（删除）套接字文件来解决此问题。

```
unlink("CServer");
bind (serverFd, serverSockAddressPnt , serverLen); 
```

我希望这能解决你的问题。

分享一个教程的链接，我找到了 [http://tkhanson.net/cgit.cgi/misc.git/plain/unixdomain/Unix_domain_sockets.html](http://tkhanson.net/cgit.cgi/misc.git/plain/unixdomain/Unix_domain_sockets.html)

另一个观察结果是您的代码将产生僵尸（Linux 中的 defunct processes ps 命令将显示已失效的条目），因为您没有添加僵尸处理程序。

我建议一个临时解决方案是 pl。在服务器程序中的套接字调用之前添加以下行（假设是 Linux）（还包括 signal.h）以忽略 SIGCHLD（子信号死亡）。僵尸将不会被看到。

```
signal(SIGCHLD, SIG_IGN); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:18:14.137

您的`serverAddress`变量未初始化。我没有检查这个，但很可能`serverAddress.sun_path`是一个指向 的指针`char`，然后它只是用一个随机值初始化。这个

```
strcpy (serverAddress.sun_path,"CServer"); 
```

然后覆盖一些任意内存。在 C 中执行此操作的正确方法是

```
struct sockaddr_un serverAddress = { 0 }; 
```

一般来说：

*   总是，是的，总是初始化所有变量。不要担心不这样做可能会带来一些小的效率改进。这通常是不值得的，无论如何你还没有到那里。（这里正确的初始化`0`会让你的程序从一开始就很好地崩溃。）

*   始终在打开所有警告选项的情况下进行编译。

*   不要混合 C 和 C++。他们有不值得的细微差别。特别是在这里，您从使用 C++ 中一无所获。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:06:57.083

客户端不知道要连接到哪个服务器。你这样做`struct sockaddr* serverSockAddressPnt;`但这只会定义`serverSockAddressPnt`为指向`struct sockaddr`. 但它应该被初始化或分配要连接的服务器的IP地址。

# entity-framework-5 - Entity Framework 5.0 处理乐观并发异常？

> ID：11771267
> 
> 赞同：18
> 
> 时间：2012-08-02T04:56:07.363
> 
> 标签：entity-framework-5

在处理多个潜在异常时，`context.SaveChanges()`其中一个异常是`OptimisticConcurrency`. 微软在[http://msdn.microsoft.com/en-us/library/bb399228.aspx](http://msdn.microsoft.com/en-us/library/bb399228.aspx)上的文档讨论了 EF 4.x 的这个......

```
try
{
    // Try to save changes, which may cause a conflict.
    int num = context.SaveChanges();
    Console.WriteLine("No conflicts. " +
        num.ToString() + " updates saved.");
}
catch (OptimisticConcurrencyException)
{
    // Resolve the concurrency conflict by refreshing the 
    // object context before re-saving changes. 
    context.Refresh(RefreshMode.ClientWins, orders);

    // Save changes.
    context.SaveChanges();
    Console.WriteLine("OptimisticConcurrencyException "
    + "handled and changes saved");
} 
```

...但是在 EF 5.0 (RC) 上，这似乎不起作用，因为在我的 EF5、代码优先、DbContext 派生类`Refresh()`中不存在。`context`

我确实看到`context.Entry(context.SalesOrderHeaders).Reload();`了-但这似乎是直接从数据库重新加载，而不是刷新/合并（策略客户端获胜）。

任何想法如何处理 EF5 中的乐观并发异常？实际上，即使是关于 SaveChanges() 中异常处理的一般指针也会很好

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-02T07:34:10.067

DbContext API中如何解决并发异常的方法是重新加载原始实体：

```
catch (DbUpdateConcurrencyException ex)
{
    // Get failed entry
    var entry = ex.Entries.Single(...);
    // Overwrite original values with values from database but don't
    // touch current values where changes are held
    entry.OriginalValues.SetValues(entry.GetDatabaseValues());
} 
```

您还应该能够使用提到的代码，但您必须`ObjectContext`从您的实例中获取`DbContext`实例（它只是一个包装器`ObjectContext`）。

```
catch (DbUpdateConcurrencyException ex)
{
    var objContext = ((IObjectContextAdapter)context).ObjectContext;
    // Get failed entry
    var entry = ex.Entries.Single(...);
    // Now call refresh on ObjectContext
    objContext.Refresh(RefreshMode.ClientWins, entry.Entity);        
} 
```

你甚至可以尝试：

```
objContext.Refresh(RefreshMode.ClientWins, ex.Entries.Select(e => e.Entity)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T17:54:37.487

如果您的更改仅针对一个实体（特别是一行，而不是其他表等），并发机制涵盖了您可以通过处理旧实体并创建新实体来刷新上下文。问题是当上下文被释放时，每个已更改且尚未提交的实体都会从上下文中分离出来，并且更改会丢失。所以要小心你单位工作的范围！

```
 catch (DbUpdateConcurrencyException)
    {
        context.Dispose();
        context = new DBContext();
        Entity entity = context.Set<Entity>().Find(entityFromOldContext.Id);

        entity.Property1 = entityFromOldContext.Property1;
        entity.Property2 += 4;

        context.commit();
    } 
```

在实体中，我使用额外的属性来控制并发性，如下所示：

```
[Timestamp]
public Byte[] RowVersion { get; set; } 
```

这可能不是优雅的方式（并且打破了 UnitOfWork 模式），但在某些情况下它可能很有用，最终可以替代上述帖子。

# c# - 按钮是否有右键单击和滚轮单击控件？C＃

> ID：11771268
> 
> 赞同：2
> 
> 时间：2012-08-02T04:56:08.363
> 
> 标签：c#, right-click

好的，我知道这是一个愚蠢的问题，但我在控件中找不到它。普通按钮是否有右键单击和滚动按钮单击控件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:02:52.670

对于鼠标右键单击检查：

```
 private void button1_MouseDown(object sender, MouseEventArgs e) {
      if (e.Button == MouseButtons.Right) {
        // Do something
        //...
      }
    } 
```

对于滚动按钮单击检查：[鼠标滚轮事件（C#）](https://stackoverflow.com/questions/479284/mouse-wheel-event-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:06:49.107

C# 中没有右键单击事件。但是，如果您想在完成右键单击时显示一些自定义项，这在 jQuery 中是可能的。

要禁用整个页面的 jQuery 右键菜单，请执行以下操作：

```
$(document).bind("contextmenu", function(e) {
    return false;
}); 
```

要仅针对特定元素执行此操作，请执行以下操作：

```
$("#myid").bind("contextmenu", function(e) {
    return false;
}); 
```

要显示自定义菜单，您必须定义一个类，然后按如下方式更改绑定函数。

```
#menu {
    display: none;
    position: absolute;
    padding: 10px;
    background-color: #ddd;
    border: 1px solid #000;
}

$(document).bind("contextmenu", function(e) {

    $('#menu').css({
        top: e.pageY+'px',
        left: e.pageX+'px'
    }).show();

    return false;

}); 
```

单击页面或单击菜单时关闭菜单需要以下行：

```
$(document).ready(function() {

    $('#menu').click(function() {
        $('#menu').hide();
    });
    $(document).click(function() {
        $('#menu').hide();
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:01:59.077

您也许可以将这篇文章用于[右键单击](https://stackoverflow.com/questions/6776911/how-to-create-a-right-click-context-menu-for-a-button-in-wpf)和[scollbuttonclick](https://stackoverflow.com/questions/5426232/how-can-i-make-wpf-scrollviewer-middle-click-scroll) 我猜您使用的是 WPF？您的问题没有提及您正在使用的任何内容。

# java - 将Strut2表单中的输入值相乘提交

> ID：11771270
> 
> 赞同：0
> 
> 时间：2012-08-02T04:56:19.097
> 
> 标签：java, struts2, tomcat6

我在struts2 中工作，使用tomcat 服务器。我正在上传一个文件，并且在我的表单提交中有文本输入。

我可以在哪里找到适用于文件上传和文本输入的拦截器，在这里您可以找到我的 struts.xml 用于我的表单操作。

```
<action name="IMageUpload"  class="com.uniphore.action.ManageClientAction" method="Image">
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">1000000</param>
                <param name="allowedTypes">
                    image/png,image/gif,image/jpeg,image/pjpeg,text/plain
                </param>
            </interceptor-ref>
            <interceptor-ref name="workflow">
                <param name="excludeMethods">Image</param>
            </interceptor-ref>
            <interceptor-ref name="basicStack"/>
            <interceptor-ref name="defaultStack"></interceptor-ref>
</action> 
```

## 我的表格如下

```
<s:form action ="ImageUpload">
 <s:file name="upload">
 <s:textfield name"user">
 <s:submit  method="Image"/>
</s:form> 
```

当我提交此表格时，我收到这样的错误

```
ParametersInterceptorUnexpected Exception catched: Error setting expression 'user' with value '[Ljava.lang.String;@322e7d' 
```

# google-fusion-tables - DATETIME 的融合表集格式

> ID：11771273
> 
> 赞同：0
> 
> 时间：2012-08-02T04:56:38.830
> 
> 标签：google-fusion-tables

我正在我的 Android 应用程序中使用 google-api-services-fusiontables-v1-rev1-1.7.2-beta。我正在使用插入原始 sql api service.query().sql("INSERT INTO " + tableId +" (DATE, HOUR, PULS,SYS, DIA) VALUES (long, long, int, int, int) 并且有一些问题。

1.  getDateTime() 是 long 类型，以毫秒为单位。然而，融合表中的数据一直显示 1969 年 12 月 31 日，时间一直是下午 6 点。这是一个已知的问题？

2.  有没有办法从我的应用程序中设置 DATETIME 的格式，我还没有看到 JSON 字段或 api 来设置格式...？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T11:05:39.337

1969 年 12 月 31 日下午 6 点是中部标准时间的 unix epoc。

Fusion Tables 无法将 System.currentTimeMillis() 返回的 UNIX 历元长值识别为日期。它将它们识别为数字。然而，Fusion 会自动识别一组文本格式。您可以在日期格式下的更改列对话框中使用浏览器界面查看支持的格式。例如，我使用格式“2008-12-25 10:30:45”。要将 Java 中的日期格式化为特定的文本格式，您可以使用 SimpleDateFormat。只需将日期的字符串版本插入 SQL。

无法从 API 设置列的格式选项，目前只能从 Google Drive 界面完成。

请记住，Fusion Tables 是实验性的，将来可能会停止使用。另外请注意，您不要将 Fusion Tables 用于纯粹的非营利目的以外的任何用途，因为它实际上仅用于慈善和公共服务用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T21:08:52.193

你能澄清一下你正在使用什么 getDateTime() 方法吗？您能否提供一个代码片段来说明您如何调用 API，以及您在哪里看到 1969 年 12 月 31 日下午 6 点？

此外，目前您无法设置日期格式。随意给以下功能请求加星标：[http ://code.google.com/p/fusion-tables/issues/detail?id=727&q=Type%3DFeature_Request%20format%20date&colspec=ID%20Type%20Status%20Summary%20Stars% 20组分](http://code.google.com/p/fusion-tables/issues/detail?id=727&q=Type%3DFeature_Request%20format%20date&colspec=ID%20Type%20Status%20Summary%20Stars%20Component)

# android - 如何以编程方式更改 ListView 内的 TextView 的背景颜色？

> ID：11771280
> 
> 赞同：2
> 
> 时间：2012-08-02T04:57:33.950
> 
> 标签：android, colors, android-listview, background-color, textview

我有一个包含多个 TextView 项的 ListView。此列表是在运行时创建的，大小可能会有所不同。我想根据运行时生成的浮点值设置 TextView 项的背景。我正在使用 ArrayAdapter。

```
setListAdapter(new ArrayAdapter<String>(this, R.layout.list_fruit,ratios));  
final ListView listView = getListView();
listView.setTextFilterEnabled(true);
listView.setBackgroundColor(Color.LTGRAY);
((TextView) listView.getChildAt(0)).setBackgroundColor(Color.CYAN); 
```

最后一行抛出 NullPointerException。由于某种原因，我无法在 listView 中访问此 TextView。如果直到运行时我才知道颜色，我应该如何动态设置 TextView 的背景颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:25:46.103

只需创建自定义适配器。

参考这个链接，

[如何在 ListView 上更改颜色和字体](https://stackoverflow.com/questions/7361135/how-to-change-color-and-font-on-listview)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:08:13.967

只需找到 TextView 为：

```
TextView myTextView = (TextView)findViewById(R.id.yourTextViewId); 
```

并做任何你想做的事情，例如：

```
myTextView.setTextColor(color); 
myTextView.setBackgroundColor(color); 
```

**编辑**：

请在这个网站上找到如何实现“android自定义适配器”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:11:24.240

CustomAdapter.java：

```
public class CustomAdapter extends ArrayAdapter<String>{

    Context mContext;
    String list[];
    LayoutInflater mInflater;
    public static HashMap<Integer, String> idList=new HashMap<Integer,String>();

    public CustomAdapter(Context context, int textViewResourceId,String[] objects) {
        super(context, textViewResourceId, objects);

        mContext=context;
        list=objects;
        mInflater=LayoutInflater.from(context);
        for(int i=0;i<list.length;i++){
            idList.put(i,"false");
        }
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        final ViewHolder holder;
        if(convertView==null){
            convertView=mInflater.inflate(R.layout.list_fruit,null);
            holder=new ViewHolder();

            holder.mTextView=(TextView)convertView.findViewById(R.id.mTextViewId);  
            convertView.setTag(holder);
        }
        else
            holder=(ViewHolder)convertView.getTag();

        idList.put(position, "true");           

        if(idList.get(position)=="true")
            holder.mTextView.setBackgroundColor(Color.GRAY);
        else
            holder.mTextView.setBackgroundColor(Color.WHITE);

        return convertView;
    }
    class ViewHolder{
        TextView mTextView;
    }
} 
```

list_fruit.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/mTextViewId" 
    android:background="#fff"
    android:textColor="#333"
    android:padding="5dip"/> 
```

现在，

```
setListAdapter(new CustomAdapter(this, R.layout.list_fruit,ratios));  
final ListView listView = getListView();
listView.setTextFilterEnabled(true);
listView.setBackgroundColor(Color.LTGRAY);
((TextView) listView.getChildAt(0)).setBackgroundColor(Color.CYAN); 
```

现在，无论单击哪个文本视图，都将变为灰色，其他为白色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:24:33.040

我假设您想有选择地更改列表项的颜色。为此，您必须编写自己的自定义适配器并覆盖 getView() 方法。在 getView() 中，您可以根据位置更改任何项目的颜色。

此链接可以帮助您编写自定义适配器。

你的 getView() 应该看起来像这样 -

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        StockQuoteView sqView = null;

        if(rowView == null)
        {
            // Get a new instance of the row layout view
            LayoutInflater inflater = activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.stock_quote_list_item, null);

            // Hold the view objects in an object,
            // so they don't need to be re-fetched
            sqView = new StockQuoteView();
            sqView.ticker = (TextView) rowView.findViewById(R.id.ticker_symbol);
            sqView.quote = (TextView) rowView.findViewById(R.id.ticker_price);

            // Cache the view objects in the tag,
            // so they can be re-accessed later
            rowView.setTag(sqView);
        } else {
            sqView = (StockQuoteView) rowView.getTag();
        }

        if(position == 3) {
            rowView.setBackgroundColor(#030303);
        }

        // Transfer the stock data from the data object
        // to the view objects
        StockQuote currentStock = stocks.get(position);
        sqView.ticker.setText(currentStock.getTickerSymbol());
        sqView.quote.setText(currentStock.getQuote().toString());

        return rowView;
    } 
```

希望有帮助。

# android - 如何在android中声明用户定义的权限

> ID：11771285
> 
> 赞同：0
> 
> 时间：2012-08-02T04:58:43.127
> 
> 标签：android, android-permissions

在 android 中，我们使用系统权限，但如何在应用程序中创建新权限，以供其他应用程序使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:02:02.637

您可以`<permission>`为此使用标签。[此页面](http://developer.android.com/guide/topics/security/permissions.html#declaring)清楚地说明了如何做到这一点。

# wordpress - Wordpress Fancybox 导航项

> ID：11771289
> 
> 赞同：1
> 
> 时间：2012-08-02T04:59:22.043
> 
> 标签：wordpress, fancybox

我目前正试图让我的顶级导航链接之一在 Fancybox 中作为 iFrame 打开。

我注意到有一种方法可以使用菜单创建器中的链接关系 (XFN) 选项添加 rel 项，这导致我的链接看起来像：

```
 <a rel="video" href="http://www.google.com">fancy</a> 
```

但是我会要求我的链接打开为：

```
 <a rel="video" class="fancybox" href="http://www.google.com"></a> 
```

偶然我偶然发现了这个建议将其添加到主题functions.php的解决方案，尽管它会导致错误：

```
 function add_menuclass($ulclass) {
    return preg_replace('/<a rel="fancybox"/', '<a rel="fancybox" class="fancybox"', $ulclass, 1);
    }
    add_filter('wp_nav_menu','add_menuclass'); 
```

有谁知道我怎样才能让它正常工作？一些建议将不胜感激。非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:20:02.830

通过安装“Easy FancyBox”插件解决了问题，该插件允许轻松地将 iframe 链接添加到导航中。

# java - 无法在 STS 中导入 JdbcTemplate 类

> ID：11771297
> 
> 赞同：1
> 
> 时间：2012-08-02T05:00:08.227
> 
> 标签：java, spring

当我把这个工件放在我的 pom.xml 文件中时，我无法导入 org.springframework.jdbc 和许多其他包，我做错了什么？

```
<dependency>
 <groupId>org.springframework</groupId>
 <artifactId>spring-context</artifactId>
 <version>3.1.2.RELEASE</version>
</dependency> 
```

当`private JdbcTemplate jdbcTemplate;`我上课时，我无法导入上面的包，我注意到我错过了许多其他包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:55:41.307

JDBC 包是[spring-jdbc](http://mvnrepository.com/artifact/org.springframework/spring-jdbc)的一部分。不是弹簧上下文。

Spring 框架看起来像一个巨大的类集，但它实际上被拆分为各种库：spring-context、spring-jdbc、spring-orm 等。您需要将依赖项声明为您想要的。

# sharepoint - 使用 Sharepoint 的 Glimpse 调试器

> ID：11771300
> 
> 赞同：2
> 
> 时间：2012-08-02T05:00:11.903
> 
> 标签：sharepoint, glimpse

我们可以附加[Glimpse](http://getglimpse.com/ "一瞥")以调试 Sharepoint 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:35:05.940

不久前，我将 glimpse 核心向后移植到 3.5，并开始使用 SharePoint 插件。

不幸的是，由于工作太多，我没有时间完成插件。

我注意到 Glimpse 团队现在已经使用最新版本完成了他们自己的向后移植到 3.5，所以我可能会再次选择这个项目。

很高兴知道人们在显而易见的 SharePoint 插件中寻找什么。

我还可以实现一个插件来使用 SharePoint 2013，因为它支持 4.0 运行时。

请参阅[我在 http://leedale.wordpress.com/2011/10/26/glimpse-web-debugger-with-net-3-5-and-sharepoint-2010/ 上的原始博客文章](http://leedale.wordpress.com/2011/10/26/glimpse-web-debugger-with-net-3-5-and-sharepoint-2010/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:13:31.133

不幸的是，Glimpse 目前不能与 SharePoint 一起使用。

在 1.0 版之前，Glimpse 仅支持 .NET 4.0，而 SharePoint 是针对 .NET 3.5 编写的。

如果你真的想的话，你可以从[https://github.com/glimpse/glimpse](https://github.com/glimpse/glimpse)下载源代码并进行必要的更新。

# jasper-reports - 如何在 JasperReport Server 4.5 中将根名称更改为我们的组织名称？

> ID：11771302
> 
> 赞同：1
> 
> 时间：2012-08-02T05:00:15.633
> 
> 标签：jasper-reports, jasperserver

我正在运行*JasperReport Server 4.5*，现在我想在 JR Server 存储库中将“根”目录名称更改为我们的组织名称，或者它可以是任何东西。

我怎样才能改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T12:47:37.903

在 JasperReports Server 中，我不确定您是否可以更改根文件夹的名称。在 iReport 中，我正在使用存储库插件，并为我的服务器命名（右键单击 > 服务器设置）。但是，在 JasperReports Server 中，它仍然显示“root”。

但是，如果您想更改顶级组织，请从顶部菜单中选择“管理”，然后选择“组织”。单击要编辑的组织，然后单击“编辑”按钮。然后您可以更改组织名称和别名。

# javascript - this.form.reset 清除后剩余的复选框值

> ID：11771303
> 
> 赞同：0
> 
> 时间：2012-08-02T05:00:17.863
> 
> 标签：javascript, checkbox

我有这个脚本来添加一些复选框值

```
<script language="javascript" type="text/javascript">
function initialize() {
    Total = 0;
    totaltest.innerText = Total;
}

function checkoptionone(checkbox) {
    checknum = parseFloat(checkbox.value);
    if (checkbox.checked == true) {
        Total += checknum;
    } else {
        Total -= checknum;
    }
    totaltest.innerText = Total;
}
    </script> 
```

我可以在另一个函数中获取方程式中复选框的值...但是当我清除（我有一个带有 this.for.reset 的按钮）时，选中的值（现在由于清除而取消）仍然存在... .如果我在按下清除之前取消选中该框，它只会消失...我知道问题是什么，我只是不知道如何解决它...我试图向按钮添加一个功能（比如复选框，这样它就可以执行相同的功能而无需检查框来激活该功能）但我认为 this.form.reset 胜过一切......我不知道......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T15:05:25.117

尝试

```
$('form').find('input:checkbox').removeAttr('checked'); 
```

结合 $('form').reset();

# weblogic12c - Weblogic中的Jsession ID和AdminConsoleSessionId

> ID：11771304
> 
> 赞同：1
> 
> 时间：2012-08-02T05:00:22.170
> 
> 标签：weblogic12c

我在 Weblogic 集群中部署了一个购物车应用程序，其中包含 2 个托管服务器。在 weblogic.xml 中，我包含了以下参数：

```
**<!-- Insert session descriptor element here -->
<session-descriptor>
  <persistent-store-type>replicated_if_clustered</persistent-store-type>
</session-descriptor>** 
```

复制在购物车中购买的项目。我的疑问是，当我使用 firebug 工具跟踪请求 ID 时。我看到每个托管服务器有两个不同的请求 ID。

**请求 1：[http://xx.xx.xx.xx:9003/shoppingcart/viewshoppingcart](http://xx.xx.xx.xx:9003/shoppingcart/viewshoppingcart)** **请求 2：[http://xx.xx.xx.xx:9004/shoppingcart/viewshoppingcart](http://xx.xx.xx.xx:9004/shoppingcart/viewshoppingcart)* *

*   请求一个标头：

Host 1xx.xx.xx.xx:9003 User-Agent Mozilla/5.0 (Windows NT 6.0; rv:11.0) Gecko/20100101 Firefox/11.0 Accept text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Accept-Language en-gb,en;q=0.5 Accept-Encoding gzip, deflate Connection keep-alive Cookie **ADMINCONSOLESESSION=5183QZ1Mjy12hZR21cW6CbVyfRj5yh0NThfXJQ2TlkyM0Fv6BJlx!42613329; JSESSIONID=G130QZ8P7fhstLQvFs111J2XXpn33JMsvRF7tT1zpqfYwnXSKBPH!-1346249615!1012537584**

*   请求两个标头：

主机 xx.xx.xx.xx:9004 用户代理 Mozilla/5.0 (Windows NT 6.0; rv:11.0) Gecko/20100101 Firefox/11.0 接受 text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8 Accept-Language en-gb,en;q=0.5 Accept-Encoding gzip, deflate Connection keep-alive Cookie **ADMINCONSOLESESSION=5183QZ1Mjy12hZR21cW6CbVyfRj5yh0NThfXJQ2TlkyM0Fv6BJlx!42613329; JSESSIONID=G130QZ8P7fhstLQvFs111J2XXpn33JMsvRF7tT1zpqfYwnXSKBPH!1012537584!-1346249615** 缓存控制 max-age=0

在两个标头中，JSESSIONID 不同，但 ADMINCONSOLESESSION ID 相同。

这个 ADMINCONSOLESESSION ID 是什么意思？为什么我得到不同的 JSESSION ID？

例子：

jsessionid = g130qz8p7fhstlqvfs111j2xxpn33jmsvrf7tt1zpqfywnxskbph！-1346249615！1012537584 jsessionid = g130qz8p7fhstlqvfs11j2xxpn33jmsvrf7tt1zpqfywnxskbph！1012537584！-1346249615

而在这个会话 ID 中，为什么这个丢失的部分单独修改了？JSESSIONID 有可用的格式吗？

1346249615!1012537584 和 1012537584!-1346249615

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T17:58:11.437

ADMINCONSOLESESSION是 WebLogic 控制台的 cookie 名称**。**

> 会话 cookie的**格式**为：
> 
> *   sessionid!primary_server_id!secondary_server_id

在我看来，您发布的 jsession id 显示了您的会话复制机制的正确行为。

正如预期的那样，两个 jsessionid 中的**sessionid**部分是相同的。

最初的 JSESSIONID 是 G130QZ8P7fhstLQvFs111J2XXpn33JMsvRF7tT1zpqfYwnXSKBPH！**-1346249615!1012537584**显示主要主机服务器 id 是**-1346249615**和辅助主机服务器 id 是**1012537584**。

会话复制后，JSESSIONID 为 G130QZ8P7fhstLQvFs111J2XXpn33JMsvRF7tT1zpqfYwnXSKBPH！**1012537584!-1346249615**表示主服务器主机 ID 为**1012537584**，辅助主机为**-1346249615**。

假设 id **-1346249615**属于**托管服务器 A**并且**1012537584**属于**托管服务器 B**。最初，您对服务器的请求由托管服务器 A 提供服务，在会话复制之后，它们由托管服务器 B 提供服务。

我希望这有帮助。

# javascript - jQuery 限制选择器为其父级

> ID：11771305
> 
> 赞同：0
> 
> 时间：2012-08-02T05:00:24.490
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors

我正在尝试为 jQuery 创建一个上下文菜单，我正在使用 jQuery UI 对话框并对其进行修改以满足我的需要：

```
var menu = $(this);
menu.dialog('option', 'position', [jsEvent.clientX, jsEvent.clientY]);
    menu.unbind('dialogopen');
    menu.bind('dialogopen', function(event, ui) {

        $('.ui-dialog-titlebar').hide();
        $('.ui-widget-overlay').unbind('click');
        $('.ui-widget-overlay').css('opacity', 0);
        $('.ui-widget-overlay').click(function() {
            menu.dialog('close');
        });
    });
    menu.dialog('open'); 
```

现在，这仅在没有使用 UI的情况下才有效，`.ui-dialog-titlebar`因为它们会在上下文菜单触发时消失

我想过这样做：

```
var id = '#'+$(this).attr('id'); 
```

并仅在我的菜单中选择元素

```
$(id+' .ui-dialog-titlebar').hide(); 
```

但它似乎不起作用，`.ui-dialog-titlebar`仍然存在

如何**仅**在菜单中选择元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:03:25.220

```
$('.ui-dialog-titlebart', this).hide() 
```

$('the item you want', this) 是仅当它是当前元素的子元素时才选择该项目的快捷方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:08:22.983

要在另一个元素中查找具有某个类的所有元素，您可以使用`find()`：

```
$(this).find('.ui-dialog-titlebart').hide(); 
```

如果您想隐藏具有特定类的所有元素，除了`UL`元素：

```
$('.ui-dialog-titlebar').not('ul').hide(); 
```

或仅针对`LI`元素

```
$('li.ui-dialog-titlebar').hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:10:23.773

你可以这样试试

```
var menu = $(this);
$(menu).find('.ui-dialog-titlebar').hide(); 
```

你可以参考[jQuery 选择器](http://jquery-this.blogspot.com/2013/06/jquery.html)。如果需要的话..

# android - Dialog显示时，如何忽略Dialog背面的View的触摸事件？

> ID：11771309
> 
> 赞同：0
> 
> 时间：2012-08-02T05:00:41.327
> 
> 标签：android, dialog

Dialog显示时，如何忽略Dialog背面的View的触摸事件？我使用对话框视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:07:05.100

试试这个。它可能会帮助你...

```
<view_in_the_back>.setOnTouchListener(new OnTouchListener() {

@Override
public boolean onTouch(View arg0, MotionEvent arg1) {
    if(flag==true){
                 //code of this touch event...
         return true;
            }  
}
}); 
```

显示对话框时设置 flag=false。设置为真一个它被解雇了。

# apache - htaccess 重写子域的规则

> ID：11771315
> 
> 赞同：0
> 
> 时间：2012-08-02T05:02:02.373
> 
> 标签：apache, .htaccess, mod-rewrite, apache2, rewrite

我添加了 *.domain.com。到我的绑定，所以之后我可以运行链接到我的主页的所有子域，所以 bleble.domain.com 打开主页 domain.com

我的主要目标是使用 htaccess 将 {subdomain_name}.domain.com 链接到 /index.php?/member/{subdomain_name} 而无需重定向 301

到目前为止，我有类似的东西，但它不起作用：

```
RewriteEngine On
RewriteBase /

# sub domains
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-]+).domain.com [NC]
RewriteRule (.+)$ /index.php?/member/$1 [L,P]

# codeigniter
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^core.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

我收到这样的错误

```
Not Found
The requested URL /index.html was not found on this server.

Additionally, a 403 Forbidden error was encountered while trying to use an ErrorDocument to handle the request. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:10:33.640

尝试将您的子域规则更改为：

```
RewriteCond %{HTTP_HOST} ^(www.)?([a-z0-9-]+).domain.com [NC]
RewriteCond %{QUERY_STRING} !^/member/
RewriteRule ^(.*)$ /index.php?/member/%2/$1 [L] 
```

你的条件是正确的，你想匹配`%{HTTP_HOST}`变量。对子域进行分组`([a-z0-9-]+)`，您可以`RewriteRule`通过使用`%2`（`%1`将引用“www.”）在您的中反向引用它。

`$1`反向引用是，`(.*)`因为您还希望能够匹配空白 URI。这样，如果您`http://subdomain.domain.com/`在浏览器中访问，它会在 获得内容`/index.php?/member/subdomain/`，如果您访问，`http://subdomain.domain.com/path/to/a/file`则会在 获得内容`/index.php?/member/subdomain/path/to/a/file`。

您还想丢失`P`标志，因为您不需要任何代理。

# hyperlink - 我想创建一个指向 .ics 文件的链接，但它在 Firefox 和 chrome 中不起作用

> ID：11771316
> 
> 赞同：0
> 
> 时间：2012-08-02T05:02:10.000
> 
> 标签：hyperlink, outlook, icalendar

我在 HTML 网页中链接到从 Outlook 导出的 .ics 文件。

```
 <a href="calendar.ics" >Save the Date</a> 
```

此链接将在浏览器（Chrome 和 Firefox）中以纯文本形式打开“calendar.ics”文件。我想自动下载 .ics 文件。我可以向链接标签添加什么以产生所需的行为？

我试过`webcal://`了，但它会在 Outlook 2010 中添加一个日历标签。这对我来说太多了。

任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:50:05.333

我还没有测试过，但我认为这应该可以。

在您的 .htaccess 文件中：

```
<filesMatch "\.ics$">
<ifModule mod_headers.c>
Header set Content-type "text/calendar"
</ifModule>
</filesMatch> 
```

或者

```
<filesMatch "\.ics$">
ForceType 'text/calendar'
</filesMatch> 
```

或者

```
AddType text/calendar .ics 
```

# css - 第一个 float:left DIV 高于 IE 中的所有其他 DIV

> ID：11771318
> 
> 赞同：0
> 
> 时间：2012-08-02T05:02:36.050
> 
> 标签：css, internet-explorer

我将 3 个 div 设置为 float:left，以便显示为 3 列。Chrome 和 FF 中的一切看起来都不错，但资源管理器将最左侧的 div 弹出到比其他两个 div 更高的位置。

这似乎不是楼梯效果，因为第一个 div 是唯一一个错位的 div。其他两个 div 彼此位于同一行。

这是HTML

```
 <div id="home_bows_container">
        <div id="black_bear" class="home_bows">
            <h4>Black Bear</h4>
            <div id="bow_container">
                <a href=""><img alt="custom traditional longbow" src="images/bows_slider/black-bear.png" class="home_bows left"></a>
            </div>
            <h5>Hybrid Reflex/Deflex Longbow<h5>
            <p class="description">62"-66" 25-70 pounds, Black Limbs, Bamboo core, your choice of riser wood.</p>
        </div>
        <div id="prowler" class="home_bows">
            <h4>Prowler</h4>
            <div id="bow_container">
                <a href=""><img alt="custom traditional longbow" src="images/bows_slider/prowler.png" class="home_bows center"></a>
            </div>
            <h5>3 Piece Take Down Reflex/ Deflex Longbow<h5>
            <p class="description">62"-64" 30-70 pound Clear Glass Veneered Limbs, your choice of veneers and riser wood. </p>
        </div>
        <div id="javalina_two" class="home_bows">
            <h4>Javalina II</h4>
            <div id="bow_container">
                <a href=""><img alt="custom 3 piece longbow" src="images/bows_slider/javalina2.png" class="home_bows right"></a>
            </div>
            <h5>Hybrid Reflex/Deflex Longbow<h5>
            <p class="description">62"-66' 30-70 pound Clear Glass Veneered Limbs, your choice of veneers and riser wood.</p>
        </div>
    </div> 
```

和CSS：

```
 #home_bows_container {
    width:90%;
    min-width:960px;
    text-align:center;
    margin:0 auto;
    overflow:hidden;
    display:inline;
}
.home_bows {
    float:left;
    width:33.33333%;
    text-align:center;
    margin:0 auto;
}
#bow_container {
    display:inline-block;
    margin:0 auto;
    width:102px;
    opacity:0.6;
    filter:alpha(opacity=60); /* For IE8 and earlier */
}
img.home_bows {
    width:102px;
    height:400px;
    margin:0px auto;
} 
```

我在网上看到过类似的问题，答案是将 display:block 添加到我的容器 div 中。但我试过没有用。

也许我只是做错了，我不知道。寻求帮助是我最后的手段。通常我可以在某个地方找到解决方案，但我觉得我已经尝试了一切。

如果你很快看到这个，你可以在 IE 中看到我在说什么：http: [//ihacustombows.com/](http://ihacustombows.com/)

谢谢！

**更新：**我决定只使用 ul 和 li 设置。效果好多了。IE 似乎不能很好地处理浮动 div，但它知道如何很好地显示浮动列表项。

感谢所有的帮助和指点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:16:13.323

如果不深入挖掘，IE 有时会在元素向左浮动时将左边距加倍。只是想知道什么可能会影响您的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:09:56.947

我猜这可能是一个问题，即圆形宽度：33.333%。也许将其更改为 33%，看看是否有帮助。

# mysql - mysql搜索

> ID：11771319
> 
> 赞同：1
> 
> 时间：2012-08-02T05:02:37.200
> 
> 标签：mysql, sql, search

我遇到了一个问题，问题是，我们国家有不同的日期系统。现在我必须选择从一个日期到另一个日期的行，它类似于国际日期系统，但我们的月份有不规则的天数，所以我制作了一个表格，其中涉及日期的一列是年份，另一列是
月份想要选择从第 4 个月的 2069 年到第 3 个月的 2070 年的所有行，这意味着，我们必须选择所有具有 2069 年和 >=4 月份的记录，然后是 2070 年和 2070 年的所有月份<3 所以这是问题所在，抱歉我的语法不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:06:18.730

```
WHERE (year = 2069 and month >= 4)
   OR (year = 2070 and month < 3) 
```

# asp-classic - ASP Classic 对于每个循环

> ID：11771327
> 
> 赞同：-1
> 
> 时间：2012-08-02T05:04:08.223
> 
> 标签：asp-classic

是**对于每个循环**都可以在 asp 经典中使用

如果是这样，如何遍历页面的所有**控件**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:10:11.750

在 ASP 中没有“控件”之类的东西。ASP 是一个脚本，其中所有块之外的内容都`<% %>`被`<script runat="server">`简单地视为一组字节，以便在脚本执行时发送到响应。

ASP 的事实上的脚本语言是 VBScript，它确实有一个`For Each`允许枚举集合的语句，但是您不会在 ASP 中找到控件的集合。

# git - 如何让编码人员有选择地访问我的 Git 存储库中的代码？

> ID：11771330
> 
> 赞同：4
> 
> 时间：2012-08-02T05:04:17.387
> 
> 标签：git, security, repository, versioning, user-permissions

我们正在让一名自由职业者在我们的 web 应用程序的某些部分上工作——我想限制他对我们代码仓库的前端部分的访问——有没有办法在 Git 中做到这一点？我们使用 bitbucket 来托管 repo。我们有很多独特的专有后端代码，我们不希望他看到，他也不需要为了完成工作而看到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:27:55.327

您可以使用`filter branch`仅包含仅包含他的文件的路径的历史记录来创建新分支。将此分支推送到另一个仓库。授予他对该回购协议的权利。从该回购中提取他的更改。将该分支合并到您的原始存储库中，以将他的工作与其余代码合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:27:02.193

或者，如果您的存储库不在 bitbucket 而是在您可以控制的服务器上，您可以将[SubGit](http://subgit.com)安装到 Git 存储库中（它将为其创建一个链接的 SVN 存储库），然后在生成的 SVN 存储库中设置基于路径的身份验证，然后给自由职业者 SVN URL。

但是您仍然可以使用存储库的克隆来做到这一点。

```
$ svnadmin create svn.repo
$ git clone --mirror GIT_URL svn.repo/.git
$ subgit install svn.repo 
```

并[设置](http://svnbook.red-bean.com/nightly/en/svn.serverconfig.pathbasedauthz.html)对 svn.repo 的访问（类似这样）：

```
LoadModule dav_svn_module "/usr/lib/apache2/modules/mod_dav_svn.so"
LoadModule authz_svn_module "/usr/lib/apache2/modules/mod_authz_svn.so"
<Location /repos>                                                                                                                                                                                       
DAV svn                                                                                                                                                                                               
SVNPath "/path/to/svn.repo"                                                                                                     
AuthzSVNAccessFile "path/to/authz"                                                                                                              
Allow from any                                                                                                                                                                                        
AuthType Basic                                                                                                                                                                                        
AuthName "Subversion Repository"                                                                                                                                                                           
AuthUserFile /path/to/htpasswdfile                                                                                                                    
Require valid-user                                                                                           
</Location> 
```

和 path/to/authz （类似这样）：

```
[/]                                                                                                  
*=
[/some/dir]
freelancer=rw 
```

以及自由职业者的 git SVN URL。毕竟，您可能只需要将“svn.repo/.git”存储库的一个分支推送回 GIT_URL。

```
$ cd svn.repo/.git
$ git push origin freelancer_branch 
```

# .net - 如何在工作流基础 4.5 (VS2012) 中创建 .rules 文件

> ID：11771332
> 
> 赞同：4
> 
> 时间：2012-08-02T05:04:53.660
> 
> 标签：.net, workflow-foundation, visual-studio-2012, .net-4.5

我是工作流基础的新手，我正在使用工作流基础 4.5 (VS2012 RC)。我想建立一个工作流，我可以在运行时添加/删除规则。所以我正在考虑在单独的 .rules 文件上使用一组规则，并在需要时更改它。

但是，我在 VS2012 上找不到这个。有什么方法可以在工作流基础 4.5 中使用动态规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T12:20:16.447

此代码块应允许您动态加载和执行规则。[您可以在此处](http://karlreinsch.com/2010/10/18/wf-rules-unleashing-the-rule-engine-within-dot-net/)查看这篇文章的其余部分，其中还将向您展示如何动态保存这些文件。

```
static RuleSet Load(string filename)
{
    XmlTextReader reader = new XmlTextReader(filename);
    WorkflowMarkupSerializer serializer = new WorkflowMarkupSerializer();
    object results = serializer.Deserialize(reader);
    RuleSet ruleset = (RuleSet)results;

    if (ruleset == null)
    {
       Console.WriteLine("The rules file " + filename + " does not appear to contain a valid ruleset.");
    }
    return ruleset;
} 
```

# sos - 了解大对象堆和 DumpHeap 输出的统计信息

> ID：11771333
> 
> 赞同：2
> 
> 时间：2012-08-02T05:05:03.697
> 
> 标签：sos, large-object-heap

假设我有以下课程：

```
Class A
{
 B b;
 C c;
 D d;
} 
```

首先，我分配：

```
var b1 = new B();
var c1 = new C();
var d1 = new D(); 
```

每个`b1, c1, d1`都小于 85K，因此它们被分配在小对象堆上。然后我做：

```
var a1 = new A { b = b1, c = c1, d = d1 }; 
```

问题1：我做`!DumpHeap -stat`的时候mem的使用是否`A`包括其成员变量所占用的内存？如果不是，它实际上包括什么？
编辑：在这篇文章中找到了这个问题的答案：http: [//blogs.msdn.com/b/tess/archive/2005/11/25/dumpheap-stat-explained-debugging-net-leaks.aspx](http://blogs.msdn.com/b/tess/archive/2005/11/25/dumpheap-stat-explained-debugging-net-leaks.aspx)。有意义的是 mem 的使用`A`不包括`b1, c1, d1`. 它包括存储`b1, c1, d1`引用本身所需的内存。

问题2：是否`a1`在大对象堆上分配（假设大小`b1 + c1 + d1`> 85K）？为什么？引用`b1, c1, d1`指向小对象堆上的对象。那为什么会`a1`坐在LOH上呢？

问题3：让我们翻转一下。说大小`b1`超过85K，所以它分配在LOH上。但是要存储对我们的引用，`b1, c1, d1`我们只需要几个字节。我相信`a1`将在小对象堆上分配是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:11:03.197

1）正如您已经发现 A 实例的大小不包括引用对象的大小。但是，如果您想找出大小，请使用该`!objsize`命令。请记住，如果多个对象引用相同的其他对象，则这些对象的大小将被包含多次。

2) 引用的对象`a1`未在 LOH 上分配。对象本身小于 85000 字节，所以它是在常规堆上分配的。使用该`!gcwhere`命令列出给定对象在堆的哪个部分。

`b1`3）如果引用指向一个大对象并不重要。任何实例的大小`A`将只有三个引用加上一些额外的开销（对类型对象的引用和同步块）。即大小将非常远离LOH 限制。

# php - 用于发现表单元素的 PHP 脚本

> ID：11771335
> 
> 赞同：0
> 
> 时间：2012-08-02T05:05:11.563
> 
> 标签：php, javascript, ajax, curl

这是一些奇怪的查询，但我需要一个想法开始......所以这里是..

从我的网站，当我点击一个按钮时，我想去其他网站，比如（facebook），在那里 2 个表单字段 1 将是用户名/电子邮件和其他密码，自动填写我第一页的详细信息...... :)

还有一件事，没有定义的网站，如 facebook ， gmail 等用户可以提供任何网站登录页面链接和用户名并通过并单击提交，登录页面将自动填充....未提交:)

有没有可能:)

# mysql - 与许多不同表的表关系

> ID：11771342
> 
> 赞同：2
> 
> 时间：2012-08-02T05:06:19.560
> 
> 标签：mysql, database

我正在创建一个涉及上传的系统。现在这些上传需要附加到其中一种方式，例如。一条信息，一份合同，一个项目

是否可以有一个附件表然后将它们链接到这些类型 - 需要注意的是它需要链接到这些类型中的每一个的单个 id

例如。在附件表
类型中 - 链接到带有消息合同等
id 列表的表。- 一个 id # 类型的任何 id 所以如果类型是 message 那么它会引用 message.id 如果它是一个合约它会引用 contract.id

但是没有外键检查？但是必须做外键似乎很奇怪，例如。

```
type
message_id (FK)
contract_id (FK)
project_id (FK) 
```

编辑：还有比 3 个多一些的表，比如 5-6 个，将来可能还会更多..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:23:35.457

我会推荐：

1.  附件表（attachment_id + 附件所需的其他列）
2.  对于每种可能的类型（消息、合同、项目），您将拥有一个关系表。

例子：

*   MessageAttachmentTable：message_id (FK)、attachment_id (FK)
*   ContractAttachmentTable：contract_id (FK), attachment_id (FK)

这样，您可以拥有所有数据库完整性约束而没有未使用的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:23:37.427

在我看来，三个具有相应表的外键的 NULLable 字段是最明智的方法。

此外，如果您有三个外键字段，您甚至不必存储“类型”，因为它是由不为 NULL 的外键字段确定的。

# java - Jvm会将编译后的字节码制作成可执行文件吗

> ID：11771343
> 
> 赞同：2
> 
> 时间：2012-08-02T05:06:23.993
> 
> 标签：java, oop, jvm, interpreter

我阅读了以下文章：

[http://searchcio-midmarket.techtarget.com/definition/just-in-time-compiler](http://searchcio-midmarket.techtarget.com/definition/just-in-time-compiler)

[http://javarevisited.blogspot.in/2011/12/jre-jvm-jdk-jit-in-java-programming.html](http://javarevisited.blogspot.in/2011/12/jre-jvm-jdk-jit-in-java-programming.html)

我现在真的很想知道当我上课时会发生什么。JIT 再次编译字节码，然后 ???

这个编译后的代码会被 JVM 转换成 .exe 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:16:27.127

就像其他人所说：JIT 并不意味着将代码编译为二进制可执行文件（.exe）。但是，您可能会考虑一个有趣的应用程序是[Excelsior JET](http://www.excelsior-usa.com/jetinternals.html)。

我没有阅读太多关于它的内容，也没有使用它，所以我不知道它是如何工作的……但是。但根据其网页，它是一个 AOT（Ahead-Of-Time）编译器。这意味着它会将您的 .class 文件编译为系统相关的二进制文件。

你应该试一试，看看它的表现如何。根据该网站，如果您的项目是非商业性质的，您将获得免费许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:10:53.757

Java Compiler 将纯文本 Java 代码编译成 JVM 字节码。[http://en.wikipedia.org/wiki/Java_bytecode](http://en.wikipedia.org/wiki/Java_bytecode)

JVM 有一个 HotSpot 优化器，用于评估“热点”的代码（基本上，将使用最多的代码）并在使用 CPU 缓存时特别注意这些点。它还可以标记这些点，让 JVM 重新编译为本地语言（如汇编），这称为 JIT。

JVM 本质上是一个运行 JVM 字节码解释器的虚拟机。

从来没有直接的.exe。大多数情况下，它是 Windows/C/C++ 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:11:02.623

不，代码**没有**“编译”成“exe”

> 程序以字节码的形式存储在内存中，但当前运行的代码段被预先编译为物理机器码，以便运行得更快。

我会说 JIT 是一种解释器，旨在提高常用代码分支的速度（至少这是我 10 年前的解释）

> JIT 编译器代表了一种混合方法，与解释器一样，翻译是连续发生的，但会缓存已翻译的代码以最大程度地减少性能下降。它还提供了在开发时优于静态编译代码的其他优势，例如处理后期绑定数据类型和强制执行安全保证的能力。

# r - 二因素条形图

> ID：11771344
> 
> 赞同：8
> 
> 时间：2012-08-02T05:06:25.367
> 
> 标签：r, ggplot2

从以下数据框工作：

```
 > foo
        species density day percent  
    1  species1    high   1    0.40  
    2  species1     low   1    0.20  
    3  species1  medium   1    0.40  
    4  species2    high   1    0.35  
    5  species2     low   1    0.10  
    6  species2  medium   1    0.55  
    7  species3    high   1    0.35  
    8  species3     low   1    0.20  
    9  species3  medium   1    0.45  
    10 species4    high   1    0.30  
    11 species4     low   1    0.20  
    12 species4  medium   1    0.50  
    13 species1    high 100    0.50  
    14 species1     low 100    0.40  
    15 species1  medium 100    0.10  
    16 species2    high 100    0.40  
    17 species2     low 100    0.05  
    18 species2  medium 100    0.55  
    19 species3    high 100    0.65  
    20 species3     low 100    0.05  
    21 species3  medium 100    0.30  
    22 species4    high 100    0.40  
    23 species4     low 100    0.20  
    24 species4  medium 100    0.40 
```

我创建了以下多面条形图：

```
require(ggplot2)

foo$density<-factor(foo$density,levels=c('low','medium','high'))

d <- ggplot(foo, aes(x=species, y=percent, fill=density)) +
    geom_bar(aes(width=.65), stat="identity") +
    facet_grid(. ~ day) 
```

![在此处输入图像描述](../Images/c96f7bcd8bee7d9ab351a358e0680db1.png)

但是，我想合并这些图表以创建单个双因素条形图。在 x 轴上，每一天（第 1 天和第 100 天）将按物种分组。关于如何创建它的任何建议？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:24:56.240

试试这个

```
foo$species_day <- with(data = foo, expr = paste(species, day))
d <-ggplot(foo, aes(x=species_day, y=percent, fill=density)) +
      geom_bar(aes(width=.65), stat="identity") 
```

![在此处输入图像描述](../Images/0d5306487a733bb66f5f633cefa8ad25.png) 如果需要，您可以重新排列级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:16:33.743

这是将@Joran 的建议与您的要求结合在一起的另一种方法。

我已更改`day`为一个因子，但还将默认 x 轴标签更改为“物种”。此外，因为`density`显然是一个顺序因素，我使用了来自 Color Brewer ( [http://colorbrewer2.org/](http://colorbrewer2.org/) ) 的顺序色标。`palette`您可以通过更改数字或按名称调用调色板来试验色阶 `scale_fill_brewer(palette="GnBu")`。在 Color Brewer 网页上查找调色板名称。

```
foo <- read.table(header=TRUE,
                 text="species  density day percent  
                    1  species1    high   1    0.40  
                    2  species1     low   1    0.20  
                    3  species1  medium   1    0.40  
                    4  species2    high   1    0.35  
                    5  species2     low   1    0.10  
                    6  species2  medium   1    0.55  
                    7  species3    high   1    0.35  
                    8  species3     low   1    0.20  
                    9  species3  medium   1    0.45  
                    10 species4    high   1    0.30  
                    11 species4     low   1    0.20  
                    12 species4  medium   1    0.50  
                    13 species1    high 100    0.50  
                    14 species1     low 100    0.40  
                    15 species1  medium 100    0.10  
                    16 species2    high 100    0.40  
                    17 species2     low 100    0.05  
                    18 species2  medium 100    0.55  
                    19 species3    high 100    0.65  
                    20 species3     low 100    0.05  
                    21 species3  medium 100    0.30  
                    22 species4    high 100    0.40  
                    23 species4     low 100    0.20  
                    24 species4  medium 100    0.40")

foo$density <- factor(foo$density, levels=c("low", "medium", "high"))
foo$day <- factor(paste("Day", foo$day, sep="_"))

library(ggplot2)

d2 <- ggplot(foo, aes(x=day, y=percent, fill=density)) +
      theme_bw() +
      geom_bar(width=0.95, stat="identity") +
      scale_fill_brewer(type="seq", palette=15) +
      xlab("Species") +
      opts(axis.text.x=theme_text(size=6)) +
      facet_grid(. ~ species)

ggsave("barplot_1.png", d2, width=6, height=4) 
```

![在此处输入图像描述](../Images/1f7a9ddaaf39d5475d82c5b551d023bc.png)

我没有解决的一个问题是水平`density`没有按正确的顺序堆叠（对我来说或在@MYaseen208 的答案中）。原始帖子中的堆叠是正确的。有谁知道问题是什么？

# java - JVM Eager 加载选项

> ID：11771346
> 
> 赞同：1
> 
> 时间：2012-08-02T05:06:53.073
> 
> 标签：java

我只是想知道 SUN (Oracle) JVM 中是否有任何选项可以启用类的急切加载。就像 IBM JVM 有选项 -Dibm.cl.eagerresolution

我想在我的代码中使用反射，并认为在使用反射实例化对象时急切加载类可能会减少查找时间。

请建议使用反射时急切加载是否会受益。

# html - 相对于框的文本对齐方式

> ID：11771350
> 
> 赞同：0
> 
> 时间：2012-08-02T05:07:19.767
> 
> 标签：html, positioning, css, text-alignment

我想根据文本所在的框对齐文本。看下面的html代码。

```
Html:
<div class="box">
    <div class="cont">
        Hello World!!!
    </div>
</div> 
```

现在这是它的css代码

```
CSS:
.box
{
    height:200px;
    width:200px;
    border:1px dashed red;
}
.cont
{
    border:1px solid green;
    position:fixed;
    right:0px;
    width:55px;
} 
```

但是当我保持它固定时，它只会移动到页面的右上角，而我希望它移动到框的角落。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:13:15.070

如果要根据父元素定位内容，请使用 position: absolute。要表示您希望它根据哪个父元素定位，请给父元素一个 position:relative 样式。从 cont 中删除 position:fixed 并添加以下内容，它应该可以工作。

```
.box {
position: relative;
}

.cont {
position: absolute;
} 
```

# javascript - Chrome 实验性扩展给出错误？

> ID：11771352
> 
> 赞同：1
> 
> 时间：2012-08-02T05:07:38.980
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试运行一个实验性的 Chrome 扩展程序（在此处找到：[https](https://github.com/GoogleChrome/chrome-app-samples/tree/master/serial/ledtoggle) ://github.com/GoogleChrome/chrome-app-samples/tree/master/serial/ledtoggle ）并且似乎找不到此错误的原因在“launch.js”中。该应用程序的设置方式与其他成功运行的应用程序完全相同，但这个应用程序似乎特别拒绝。关键文件如下，所有其他文件与您在 repo 中找到的相同。实验性 API 和平台应用程序已启用。任何帮助表示赞赏，我会标记答案！

```
Error in event handler for 'experimental.app.onLaunched': Cannot call method 'create' of undefined TypeError: Cannot call method 'create' of undefined
    at chrome-extension://mkadehbifepfhnemaiighgighppmjgnp/launch.js:2:21
    at chrome.Event.dispatch (event_bindings:237:41)
    at chromeHidden.registerCustomHook.chrome.experimental.app.onLaunched.dispatch (experimental.app:32:39)
    at Object.chromeHidden.Event.dispatchJSON (event_bindings:151:55) 
```

清单.json：

```
{
  "name": "Serial Test",
  "version": "1",
  "manifest_version": 2,
  "app": {
    "background": {
      "scripts": ["launch.js"]
    }
  },  
"icons": {
    "16": "icon_16.png",
    "128": "icon_128.png"
  },
  "permissions": ["experimental"]
} 
```

启动.js：

```
chrome.experimental.app.onLaunched.addListener(function() {
  chrome.app.window.create('index.html', {
    width: 400,
    height: 400

  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:19:50.620

没有`chrome.app.window`属性，它是未定义的。似乎这个想法是打开一个新的浏览器窗口，正确的代码是：

```
chrome.windows.create({
  url: 'index.html',
  width: 400,
  height: 400    
}); 
```

**编辑**：显然[该`chrome.app.window`API](http://developer.chrome.com/trunk/apps/app.window.html)将在未来的 Chrome 版本中可用（我可以在 Canary 中看到它）。然而，它在 Chrome 21 中不存在。

# c - 从内存地址辅助复制单词（汇编）

> ID：11771353
> 
> 赞同：0
> 
> 时间：2012-08-02T05:07:50.270
> 
> 标签：c, assembly, mips, lc3

我正在尝试从内存中复制一些单词并使用程序集将其保存到另一个内存地址。我正在尝试为其编写代码，但我不确定某些部分。我将简要描述我想做什么。

源地址、目标地址和要复制的字数是函数的输入参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:12:03.180

根据您的描述，它听起来像一个常规的 memcpy，除了您指定要复制的字数而不是字节数。不确定整个堆栈缓冲区的想法来自哪里（？）。

像这样的东西会将单词从源地址复制到目标地址：

```
sll $a2,$a2,2
addu $a2,$a1,$a2  ; $a2 = address of first byte past the dest buffer
Loop:
    lw $t0,0($a0)
    sw $t0,0($a1)
    addiu $a0,$a0,4
    addiu $a1,$a1,4
    bne $a1,$a2,Loop
    nop 
```

编辑：如果您的源缓冲区和目标缓冲区未在字边界上对齐，则需要使用 lb/sb 来避免数据对齐异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:21:09.327

编辑：在分支后添加 nops

所以考虑一下你将如何在 C 中做到这一点......在低级别。

```
unsigned int *src,*dst;
unsigned int len;
unsigned int temp;
...
//assume *src, and *dst and len are filled in by this point
top:
  temp=*src;
  *dst=temp;
  src++;
  dst++;
  len--;
  if(len) goto top; 
```

你混合了太多东西，专注于一个计划。首先你说你在两个寄存器中有一个源地址和目标地址，为什么涉及堆栈？您不是在复制或使用堆栈，而是在使用两个地址。

乘以 4 得到字节数是正确的，但是如果一次复制一个单词，则不需要计算字节数，只需计算单词即可。这是假设源地址和目标地址是对齐的，或者您不必对齐。（如果未对齐，则一次做一个字节）。

那么这在汇编中是什么样子的，您可以转换为 mips，这是伪代码：rs 是源寄存器 $a0，rd 是目标寄存器 $a1，rx 是长度寄存器 $a2，rt 是临时寄存器。现在，如果您想从内存中加载一个字，请使用加载字（lw）指令，如果您想加载一个字节，请执行 lb（加载字节）。

```
top:
branch_if_equal rx,0,done
nop
load_word rt,(rs)
store_word rt,(rd)
add rs,rs,4
add rd,rd,4
subtract rx,rx,1
branch top
nop
done: 
```

现在，如果您一次复制字节而不是单词，那么

```
shift_left rx,2
top:
branch_if_equal rx,0,done
nop
load_byte rt,(rs)
store_byte rt,(rd)
add rs,rs,1
add rd,rd,1
subtract rx,rx,1
branch top
nop
done: 
```

# maven - 修改 Maven 的类路径

> ID：11771356
> 
> 赞同：0
> 
> 时间：2012-08-02T05:08:12.860
> 
> 标签：maven, maven-2, classpath, maven-plugin

我正在寻找一种方法来修改 maven 中的类路径。为什么？

我想在不破坏本地存储库的情况下检测 maven 工件，这样当surefire-tests 运行时，它会看到检测的类路径，而不是原始类路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:14:38.153

一般来说，maven 自己管理类路径。话虽如此，您可以在这里尝试几个选项：

*   您可以在 surefire 插件中使用“additionalClassPath”参数。你可以在[这里](http://maven.apache.org/plugins/maven-surefire-plugin/examples/configuring-classpath.html)阅读：

*   您可以生成检测的 jar 并在范围测试中使用它们，根本不要在测试中使用未检测的 jar

希望这可以帮助

# html - 生产站点应该使用 HTML5 还是 XHTML1 Strict？

> ID：11771359
> 
> 赞同：1
> 
> 时间：2012-08-02T05:08:16.103
> 
> 标签：html, xhtml

我正在设计一个小型企业的网站，我正在考虑是否应该使用 HTML5 或 XHTML1。我知道 HTML5 更高级，但它仍然是一个不断变化的规范，而 XHTML1 已经完成，所以将来不会有任何兼容性问题。我应该使用哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:14:35.733

没有大的区别，html5 doctype( `<!doctype html>`) 在所有浏览器中都能正常工作，并且对应旧浏览器中的过渡模式。如果您想知道是否应该使用来自 html5 的新语义标签，我可以说有一个简单的技巧可以让它们在所有浏览器中正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:15:21.463

HTML 4.01 Strict 是最好的玩物。HTML 5 还没有准备好，虽然包含它的一些功能来增强您的网站并没有什么坏处，但它们在某些浏览器中受支持并且不会导致其他浏览器崩溃，但不值得投入太多时间当规范仍然可能发生重大变化时的努力。

除非您知道没有人愿意访问您的站点会使用任何形式的 Internet Explorer（直到并包括 IE8），否则不必担心 XHTML。您只能将其用作 XHTML，因此您无法获得 X 的任何优点，您最终不得不跳过更多的障碍并使用杂乱的代码运行以获得相同的结果。

# php - 如果我在 symfony2 中创建自定义事件，如何访问实体管理器

> ID：11771368
> 
> 赞同：2
> 
> 时间：2012-08-02T05:09:04.013
> 
> 标签：php, events, symfony, doctrine-orm

我已经创建了自定义事件，例如当用户被生成时，事件调度程序将触发该事件。

我正在关注[本教程](http://www.iamproblematic.com/leveraging-the-symfony2-event-dispatcher/)。我想知道他`class CommentListener`如何访问实体管理器，因为我想在数据库中保留一些东西。

类是这样的：

```
class CommentListener
{
    protected $mailer;

    public function __construct(Swift_Mailer $mailer)
    {
        $this->mailer = $mailer;
    }

    public function onCommentEvent(CommentEvent $event)
    {
        $post = $event->getPost();
        $comment = $event->getComment();

        foreach ($post->getSubscribers() as $subscriber) {
            $message = Swift_Message::newInstance()
                ->setSubject('New comment posted on ' . $post->getTitle())
                ->setFrom('send@example.com')
                ->setTo($subscriber->getEmail())
                ->setBody("Hey, somebody left a new comment on a post you're subscribed to! It says: " . $comment->getBody())
            ;
            $this->mailer->send($message);
        }
    }
} 
```

那么我怎样才能访问里面的实体管理器`onCommentEvent`呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T05:21:56.903

侦听器是普通服务。您可以将其与`mailer`. 这些方面的东西：

服务：

```
services:
    foo_bundle.listener.comment:
        class: FooVendorBarBundleEventListenerCommentListener
        arguments:
            mailer: "@mailer"
            entityManager: "@doctrine.orm.entity_manager"
        tags:
            - { name: kernel.event_listener, event: foo_bundle.post.comment_added, method: onCommentEvent } 
```

监听类：

```
class CommentListener
{
    protected $mailer;

    protected $entityManager;

    public function __construct(Swift_Mailer $mailer, $entityManager)
    {
        $this->mailer = $mailer;
        $this->entityManager = $entityManager;
    }

... 
```

如果您需要找出某些服务运行的名称`php app/console container:debug`。

# c# - 如何在wpf中动态添加和删除事件？

> ID：11771372
> 
> 赞同：0
> 
> 时间：2012-08-02T05:09:33.460
> 
> 标签：c#, wpf, textbox, setfocus, repeatbutton

```
 <Grid x:Name="BackSpaceButton">       
    <TextBox x:Name="txt_remove" Height="46" Margin="234,119,225,0" TextWrapping="Wrap" VerticalAlignment="Top" GotFocus="txt_remove_GotFocus" TabIndex="2"/>        
    <RepeatButton x:Name="rbtn_remove" Content="Backspace" Delay="400" Interval="200" Margin="415,124,0,0" RenderTransformOrigin="0.667,0.854" Click="rbtn_remove_Click" LostMouseCapture="rbtn_remove_LostMouseCapture" HorizontalAlignment="Left" Height="41" VerticalAlignment="Top" Width="66" TabIndex="2" />        
</Grid> 
```

这个设计将如下所示

![在此处输入图像描述](../Images/07ce71b7dab3d916858eb5fcf7c3f0cd.png)

```
public partial class Repeate : Window
{
    Control GetTextbox;
    TextBox GetInstance;
    public Repeate()
    {
        this.InitializeComponent();
    }

    private void rbtn_remove_Click(object sender, RoutedEventArgs e)
    {

        GetInstance = GetTextbox as TextBox;
        if (GetTextbox != null)
        {

            string _CurrentValue = GetInstance.Text;
            var _CareIndex = GetInstance.CaretIndex;

            if (_CareIndex > 0)
            {
                string _Backspace = _CurrentValue.Remove(_CareIndex - 1, 1);
                GetInstance.Text = _Backspace; 
                // I want o remove the Gotfocus envet here.  
                GetInstance.Focus(); //If i comment this line cursor will not focus on textbox
                GetInstance.CaretIndex = _CareIndex - 1;
            }
        }
    }

    private void txt_remove_GotFocus(object sender, RoutedEventArgs e)
    {
        GetTextbox = (Control)sender;
    }

    private void rbtn_remove_LostMouseCapture(object sender, MouseEventArgs e)
    {
        GetInstance.Focus();
    }

} 
```

输出将如下所示

![在此处输入图像描述](../Images/8e1265b4e89038fdcb150cccd913c70f.png)

当我单击退格按钮时，文本框将被删除，光标将聚焦在文本框中。问题是，当我单击并按住退格按钮时，文本框的值不会重复删除。如果注释**GetInstance.Focus();** 从上面的代码中，值被重复删除，但在重复删除文本框上的文本值时光标没有聚焦。

但我有一个想法，如果在 GetInstance.Focus(); 之前删除事件（txt_remove_GotFocus **）；**，当单击并按住退格按钮时，文本框值会重复删除。之后将在**rbtn_remove_LostMouseCapture**事件中添加新的事件处理程序。

最后我想实现以下场景。

例如**：**在文本框中输入值，然后单击并按住系统键盘上的退格键，您将获得差价。

如果您对上述情况有任何其他想法，请与我分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:42:51.107

为什么不使用[RepeatButton](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.repeatbutton.aspx)类？

来自 MSDN 的引用：

> 表示一个控件，该控件从按下它到释放它之前反复引发其 Click 事件。

这是 MVVM 方式的代码示例：

1）示例视图模型：

```
public class ViewModel : ViewModelBase
{
    public ViewModel()
    {
        this.text = "Lorem ipsum dolor sit amet, consectetur adipiscing elit.";
        this.backspaceCommand = new RelayCommand(
            () => Text = Text.Substring(0, Text.Length - 1), 
            () => !String.IsNullOrEmpty(Text));
    }

    public String Text
    {
        get { return text; }
        set
        {
            if (text != value)
            {
                text = value;
                OnPropertyChanged("Text");
            }
        }
    }
    private String text;

    public RelayCommand BackspaceCommand
    {
        get { return backspaceCommand; }
    }
    private readonly RelayCommand backspaceCommand;
} 
```

3）窗口标记：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="114" Width="404">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBox Grid.Column="0" Margin="5" x:Name="tbText" Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}"/>
        <RepeatButton Grid.Column="1" Margin="5" Content="Backspace" Command="{Binding BackspaceCommand}"/>
    </Grid>
</Window> 
```

3）窗口代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Loaded += (sender, args) => 
        { 
            tbText.Focus(); 
            tbText.CaretIndex = tbText.Text.Length; 
        };
        DataContext = new ViewModel();
    }
} 
```

这是丑陋的代码隐藏示例：

**更新。** 此示例已更新为在按下按钮时显示插入符号。首先，我们应该禁用对按钮的关注。其次，我们应该在`TextBox`更改文本后修复插入符号的位置。

1) 窗口标记：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="114" Width="404">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBox Grid.Column="0" Margin="5" x:Name="tbText" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit."/>
        <RepeatButton Grid.Column="1" Margin="5" Focusable="False" Content="Backspace" Click="RepeatButton_Click"/>
    </Grid>
</Window> 
```

2）窗口代码隐藏：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Loaded += (sender, args) => 
        { 
            tbText.Focus(); 
            tbText.CaretIndex = tbText.Text.Length; 
        };
    }

    private void RepeatButton_Click(object sender, RoutedEventArgs e)
    {
        if (!string.IsNullOrEmpty(tbText.Text))
        {
            tbText.Text = tbText.Text.Substring(0, tbText.Text.Length - 1);
            tbText.CaretIndex = tbText.Text.Length;
        }
    }
} 
```

# c - 初始化一个变量，同时指定存储地址：有可能吗？

> ID：11771377
> 
> 赞同：6
> 
> 时间：2012-08-02T05:10:06.383
> 
> 标签：c, embedded, avr

在**Atmel处理器的****codevision**编译器中，可以指定全局变量的存储地址，例如

 **```
int a @0x100; // will place the variable at the address 0x100 in RAM 
```

当然，按照标准 C，变量可以在声明时初始化

```
int a=42; 
```

但是，我没有发现任何可能同时做这两个。`int a @0x100 = 42`或者`int a = 42 @0x100;`不工作，它们会导致编译器错误。

你可能会问为什么这样做如此重要，因为一个人可以简单地拥有

```
int a @0x100;

int main()
{
    a = 42;
    //...
} 
```

**但是，如果我在EEPROM**中有变量，我需要初始化它们，因为这是自动生成包含其中值的 eeprom 文件的唯一方法。我以后不能分配这些值，因为在这种情况下，它实际上会在程序的每次启动时将值写入 eeprom。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T13:23:43.113

虽然我不知道如何直接将 EEPROM 变量分配给特定地址并对其进行初始化，但我发现此链接非常有用：[EEPROM data at fixed address](http://www.avrfreaks.net/index.php?name=PNphpBB2&file=viewtopic&t=106223&highlight=eeprom%20address)。

我使用的解决方案是在 EEPROM 中声明一个结构，并使程序中的所有 EEPROM 变量成为该结构的成员。您定义结构成员的顺序将是链接器将它们放置在 EEPROM 地址空间中的顺序。由于该结构将是唯一的全局 EEPROM 声明，因此可以肯定地说它将被寻址到地址 0x0000。因此，您将知道每个 EEPROM 变量的地址。

例子：

```
 typedef eeprom struct EEvars
{
    eeprom char    foo1;   // will be located at EEPROM address 0x0000
    eeprom char    foo2;   // will be located at EEPROM address 0x0001
    eeprom short   foo3;   // will be located at EEPROM address 0x0002
    eeprom long    foo4;   // will be located at EEPROM address 0x0004
    eeprom char[3] fooArr; // fooArr[0] @ 0x0008; fooArr[1] @ 0x0009; 
                           // fooArr[2] @ 0x000A 
} EEVARS; 
```

然后，您可以在结构的声明中初始化变量。编译时，这将创建 .eep 文件，其中包含已知 EEPROM 地址处的初始化值。

```
eeprom EEVARS eepromInit = {0xAA, 0xBB, 0xCCDD, 0xEEEEFFFF, {0xF0, 0xF1, 0xF2}}; 
```

这在 AVR 的引导加载程序部分用于升级 FLASH 并且新程序需要访问存储的 EEPROM 变量的情况下尤其有效。它甚至允许您跨软件更新添加 EEPROM 变量，只要您将它们添加到结构的末尾，以免干扰已经建立的这些变量的地址。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-22T16:26:30.503

我知道你在说什么，我自己也遇到过同样的问题。问题在于，使用带有与变量本身内联的地址的 @ 符号是大多数工具链的附加功能。虽然许多嵌入式工具链都支持它，因此您可以显式调用 SFR 或其他寄存器的位置，但这不是标准 C 的正常行为。

虽然我不熟悉您正在使用的特定编译器，但我知道大多数编译器提供了一种更复杂的方式来指定内存映射。例如，来自 Atmel 的 ATmega 系列提供了在项目设置中指定自定义内存部分的功能。例如，在 GNU 工具链上，这些部分用作变量声明的一部分，方法是使用带有变量的 section 属性：

```
 __attribute__((__section__("<section_name>"))) 
```

对于 ATmega 系列，您可以在 EEPROM 中定位任何内存，方法是在变量声明的同一行（之前或之后，只要它位于赋值中的“=”之前）包含以下文本：

```
__attribute__((__section__(".eeprom"))) 
```

如果您想保证 EEPROM 中的特定内存地址设置为二进制映像的一部分，因此它只在第一次写入映像时被编程一次，您可以在项目设置中声明一个自定义内存部分（如果您在 Atmel Studio 中开发，它位于“工具链”设置的“内存设置”下）。

例如，我通过在内存设置的 EEPROM 部分中声明“.tune_data”部分（遵循提供的地址偏移等文档）然后声明如下变量，完全按照您对数据块的描述：

```
const __attribute__((__section__(".tune_data))) Tune_Data_s as_tune_data = { <all_my_data> }; 
```

显然它会略有不同，因为您没有使用 GNU 编译器，也可能没有使用 Atmel Studio。但是，如果您仔细研究一下，几乎每个嵌入式编程工具链都提供了一些方法来声明自定义内存部分，然后可以通过编译指示（或 GNU 工具链的属性）将其附加到代码中的变量。规范应该可以通过命令行参数和/或使用命令行选项修改标准链接描述文件来指定非默认链接描述文件。我知道第二种方法是在 IAR 提供的工具链上执行此操作的标准方法，也是唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-04T06:05:30.790

只看`CodeVisionAVR`帮助，

`@ operator`“如果在声明期间必须初始化全局变量（使用 放置在特定地址），则必须使用以下过程：

```
/* the variable will be stored in EEPROM at address 0x10 */

eeprom int abc @0x10;

/* and it will be initialized with the value 123 */ 

eeprom int abc=123; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:34:19.000

您可以使用指向绝对地址的指针：

```
volatile int *pa = (int *) 0x100; 
```

然后您可以使用解引用运算符`*`访问该地址的值，如下所示：

```
int value = *pa; 
```

或者

```
*pa = 0x10; 
```

**编辑：**没有办法声明一个变量指向一个特定的区域，同时为该区域分配一个值。除非编译器有允许它的扩展。**

# windows - 'ssh-keygen' 未被识别为内部或外部命令

> ID：11771378
> 
> 赞同：106
> 
> 时间：2012-08-02T05:10:12.783
> 
> 标签：windows, git, ssh, github

我跑`git push -u origin master`

它告诉我“权限被拒绝（公钥）致命：远程端意外挂断”

然后我在网上查了一下，发现我必须在 GitHub 上为我的帐户生成一个 ssh 密钥。但是，这样做后，当我尝试执行 ssh-keygen -t rsa "email@youremail.com" 时，它只是说 ssh-keygen 无法识别。我尝试做 mkdir C:\ssh 但这没有用。如果有帮助，我正在使用 Ruby Rails 并且我在 Windows 计算机上。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2012-08-02T06:07:09.393

2012：
`ssh-keygen.exe`是**[msysgit](http://msysgit.github.io/)**的一部分：

```
 C:\path\to\msysgit1.7.11\bin\ssh-keygen.exe 
```

如果您`%PATH%`包含`C:\path\to\msysgit1.7.11\bin\`，您将拥有`ssh-keygen`。

* * *

2015 年更新：
`ssh-keygen.exe`是**[Git For Windows](http://git-for-windows.github.io/)**的一部分，其**[版本](https://github.com/git-for-windows/git/releases)**包括[**PortableGit-2.4.3.1-2nd-release-candidate-64-bit.7z**](https://github.com/git-for-windows/git/releases/download/v2.4.3.windows.1/PortableGit-2.4.3.1-2nd-release-candidate-64-bit.7z.exe)

```
c:\path\to\PortableGit-2.4.3.1-2nd-release-candidate-64-bit\usr\bin\ssh-keygen.exe 
```

这意味着`%PATH%`必须包括`c:\path\to\PortableGit-2.4.3.1-2nd-release-candidate-64-bit\usr\bin`（没有`ssh-keygen.exe`）

正如[我之前解释](https://stackoverflow.com/a/26826359/6309)的那样，Windows 版 Git 很快就会逐步淘汰 msysgit。
我在“[为什么如果你从网上下载 Git 2.0，你总是得到一个 1.9.4 的安装包？](https://stackoverflow.com/a/26826359/6309) ”中详细介绍了这个新版本是如何基于更新的[msys2 项目](http://sourceforge.net/projects/msys2/)的。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-05-10T22:30:10.767

我刚刚遇到了这个问题，并认为我会分享我认为更简单的解决方法。

打开 git-bash 并添加 -C 运行相同的命令，因为您在您的电子邮件地址中发表评论： `ssh-keygen -t rsa -C "email@youremail.com"`命令。而已。

安装 git 时应该已经安装了 git-bash。如果找不到，可以检查 C:\Program Files\Git\Git Bash

我第一次这样做时，它未能为我创建 .ssh 文件夹，所以我不得不打开一个标准的命令提示符和 mkdir C:\Users\yourusername\.ssh

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-06-14T16:11:30.860

我在windows下面跟着（安装了Git for Windows）

1.  运行“Git Gui”（开始 --> Git --> Git Gui）
2.  单击帮助，然后单击显示 SSH 密钥
3.  如果您还没有密钥，请单击生成密钥

注意：- 这会在您的个人资料文件夹 C:\Users\YourUserID\.ssh\ 下创建密钥文件

[![在此处输入图像描述](../Images/e82fb8e20046d5a58f0b6801291f00a0.png)](https://i.stack.imgur.com/TzDsq.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-07-28T12:07:49.843

无需向环境变量添加任何内容！只需打开 git bash 并在其中执行 ssh-keygen 命令即可。

[在这里](http://msysgit.github.io/)下载 git bash 的链接

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-10T16:50:15.707

我找到了一个简单的解决方案来解决这个问题：

在命令提示符下，转到您的 git\bin 目录，然后从此处执行您的命令

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-09-08T16:21:58.530

如果你已经安装了 Git，并且安装在 C:\Program Files，如下

1.  转到“C:\Program Files\Git”
2.  运行 git-bash.exe，这会打开一个新窗口
3.  在新的 bash 窗口中，运行“ssh-keygen -t rsa -C”
4.  它提示保存密钥的文件，不要输入任何值 - 只需按 enter
5.  密码相同（两次），只需按 Enter
6.  id_rsa 和 id_rsa.pub 将在您的主文件夹中的 .ssh 下生成

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-12-18T11:46:49.070

只需转到 heroku.bat 并添加：

`@SET PATH="D:\Program Files (x86)\Git\bin";%PATH%`后`@SET PATH=%HEROKU_RUBY%;%PATH%`

就我而言，它位于 D:\Program Files (x86)\Git\bin 中，将其更改为您安装 Git 的路径。（我只是把它留在了我的路径上，所以如何写这个会更清楚）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-10-30T13:47:32.803

我认为您可以在 PATH 环境变量中添加文件 ssh-keygen.exe 的位置。请按照以下步骤操作：转到我的电脑->右键单击->属性->高级系统设置->单击环境变量。现在单击 PATH，然后单击 EDIT。在变量值字段中，转到末尾并附加 ';C:\path\to\msysgit1.7.11\bin\ssh-keygen.exe'（不带引号）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-11-07T06:26:44.930

不要做任何事情，只需在命令提示符下输入

```
C:\> sh 
```

然后你得到了这样的

```
sh-4.4$ 
# type here 
ssh-4.4$ ssh-keygen -t rsa -b 4096 -C "example@example.com" 
```

这应该有效。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-10-31T05:24:17.343

对于 Windows，您可以添加以下内容：

```
SET PATH="C:\Program Files\Git\usr\bin";%PATH% 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-02T05:12:08.700

你可能应该检查[这个](http://drupal.org/node/1066762)。Windows 没有内置该命令。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-06-10T07:52:44.200

我通过添加`ssh-keygen`到我的环境变量来修复它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-04-01T17:36:18.487

在我的机器上，`ssh-keygen`可以从 powershell 获得。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-11-17T20:25:34.200

对于那些不选择 BASH HERE 选项的人。在 cmd 中输入 sh 然后他们应该可以访问 ssh-keygen.exe

# oracle - Toad for Oracle 查询格式化程序不格式化具有“？”的查询

> ID：11771379
> 
> 赞同：1
> 
> 时间：2012-08-02T05:10:15.280
> 
> 标签：oracle, toad

`"?"`我在格式化位于条件右侧的查询时遇到问题`where`。

例子

```
Select * 
 From mytable 
 Where column_name = ? 
```

我知道问号“？” 在查询中无效。它给`ORA-00911: invalid character`

但是有没有办法绕过这个检查蟾蜍中的问号并格式化查询？

注意：我使用的是蟾蜍 10.6

# google-apps-script - 我将如何从解析的 json 对象中捕获和处理“未定义”

> ID：11771384
> 
> 赞同：4
> 
> 时间：2012-08-02T05:10:39.030
> 
> 标签：google-apps-script

我正在尝试从 RESTful 服务填充电子表格，有时没有这样的属性，所以我的电子表格中出现“未定义”，脚本停止并给出错误。我不知道如何处理它，或者跳过“未定义”部分。

这是json中的示例查询

{

```
"rel": "self",
"url": "https://www.sciencebase.gov/catalog/items?max=2&s=Search&q=project+
2009+WLCI&format=json&fields=title%2Csummary%2Cspatial%2Cfacets",
"total": 65,
"nextlink": {
    "rel": "next",
    "url": "https://www.sciencebase.gov/catalog/items?max=2&s=
Search&q=project+2009+WLCI&format=json&fields=title%2Csummary%2
Cspatial%2Cfacets&offset=2"
},
"items": [
    {
        "link": {
            "rel": "self",
            "url": "https://www.sciencebase.gov/catalog/item/
             4f4e4ac3e4b07f02db67875f"
        },
        "id": "4f4e4ac3e4b07f02db67875f",
        "title": "Decision-Making and Evaluation - Social and Economic 
        Evaluation Supporting Adaptive Management for WLCI",
        "summary": "Provide information on the social and economic environment 
        for the WLCI area and provide context for the biological and physical 
        aspects of this project.",
        "spatial": {
            "representationalPoint": [
                -108.585,
                42.141
            ]
        },
        "facets": [
            {
                "startDate": "2007-10-01 00:00:00",
                "projectStatus": "Active",
                "facetName": "Project",
                "_class": "ProjectFacet",
                "active": true,
                "className": "gov.sciencebase.catalog.item.facet.ProjectFacet",
                "endDate": null,
                "projectType": "Science",
                "_embeddedClassName": "gov.sciencebase.catalog.item.facet.
                ProjectFacet"
            }
        ]
    },
    {
        "link": {
            "rel": "self",
            "url": "https://www.sciencebase.gov/catalog/item
            /4f4e4ac0e4b07f02db676d57"
        },
        "id": "4f4e4ac0e4b07f02db676d57",
        "title": "Data and Information Management Products for the Wyoming 
        Landscape Conservation Initiative"
    }
] 
```

}

由于第二个项目只有一个标题，之后没有更多内容，如果我尝试使用循环获取项目的摘要或方面等，我会得到“未定义”。我已经想到并尝试使用 if 语句，例如

```
if (parsedResponse.items[i].summary === "undefined") {
    Do something here;
} 
```

但这似乎不起作用。我可以尝试的任何建议表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T06:01:46.597

一个解决方案是

```
if (parsedResponse.items[i].summary == undefined) {
    Do something here;
} 
```

或者

```
if (parsedResponse.items[i].summary == null) {
    Do something here;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:15:16.113

这应该有效：

```
if (typeof(parsedResponse.items[i].summary) === "undefined") { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T11:51:54.220

```
 function getLastNonBlankColCrow(sheet,columnName, maxi) {
  var lastNonBlankColCrow = 0;
  var rangeded = sheet.getRange(columnName+1+":"+columnName+maxi).getValues();
  for (var i=0;i<=maxi; i++)
    {
        if (rangeded[i] == undefined)
         {
         }
      else
     {
       if ( rangeded[i][0]!="" ) 
        { 
        lastNonBlankColCrow = i+1;
         }
      }
   }
   return lastNonBlankColCrow;
  } 
```

# iphone - 非矩形形状的插图

> ID：11771393
> 
> 赞同：0
> 
> 时间：2012-08-02T05:11:51.463
> 
> 标签：iphone, ios, cocoa-touch, core-graphics

我想知道 Core Graphics 中是否有任何功能可以让您为非矩形形状指定一个插图，即类似于 CGRectInset 的东西？我正在创建一条由一堆二次贝塞尔曲线组成的路径，这些曲线构成了一种特殊类型的椭圆，我想在其中放入一种较小类型的椭圆。是的，我知道我可能可以手动执行此操作，但想知道 Apple 是否有简单的方法来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:43:50.900

CoreGraphics 没有指定与***rect** *angles 以外的形状相关的函数，因为它不是必须的。您所做的任何绘图都是您自己的问题，因此需要您自己的解决方案。可以自己准复制一个`CGRectMake()`-esque 元素（它只是 ac 结构）。

```
struct CFIElipseRect {
   CGPoint origin;
   CGSize size;
   CGFloat arcLength;
   CGFloat vertices;
   CGFloat cornerRadius; //optional, just a thought.
};
typedef struct CFIElipseRect CFIElipseRect;

CFIElipseRect CFIElipseRectMake(CGPoint origin, CGSize size, CGFloat arcLength, CGFloat vertices, CGFloat cornerRadius) {
    CFIElipseRect rect;
    rect.origin = origin;
    rect.size = size;
    rect.arcLength = arcLength;
    rect.vertices = vertices;
    rect.cornerRadius = cornerRadius;
    return rect;
}

CFIElipseRect CFIElipseRectInset(CFIElipseRect rect, float dx, float dy) {
    rect.size.x -= dx;
    rect.size.y -= dy;
    return rect;
} 
```

# javascript - 如何获取两个日期之间的天数？

> ID：11771400
> 
> 赞同：3
> 
> 时间：2012-08-02T05:12:32.387
> 
> 标签：javascript, jquery

我需要计算两个日期之间的天数。我已经检查了给出这个链接的代码 [如何使用 JavaScript 计算两个日期之间的天数？](https://stackoverflow.com/questions/2627473/how-to-calculate-the-number-of-days-between-two-dates-using-javascript).

在此示例中，如果输入 2012,02,29 和 2012,03,01，则输出为 3。实际答案应为 1。这些还有其他方法可以计算 2 个日期之间的天数吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T05:16:39.343

对我有用-记住 JS 中的月份从 0 开始，所以这里是 2012 年 2 月 29 日到 3 月 1 日

```
var oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
var firstDate = new Date(2012, 1, 29, 12, 0, 0, 0); // 29th of Feb at noon your timezone
var secondDate = new Date(2012, 2, 1, 12, 0, 0, 0); // 1st of March at noon

var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime()) / (oneDay)));
console.log(firstDate, "to", secondDate, "\nDifference: " + diffDays + " day");
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T10:17:29.463

我也遇到了同样的问题，成功地为此浪费了半天时间。终于解决了问题。你可以看下面的例子：

> 注意：不要忘记包含 jquery 脚本：

```
$("#ToDate").change(function() {
  var start = new Date($('#FromDate').val());
  var end = new Date($('#ToDate').val());
  var diff = new Date(end - start);
  var days = 1;
  days = diff / 1000 / 60 / 60 / 24;
  if (days == NaN) {
    $('#TotalDays').val(0);
  } else {
    $('#TotalDays').val(days + 1);
  }
})
```

```
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<form action="{{route('leave.store')}}" method="post" class="form-horizontal">
  @csrf
  <div class="card-body">
    <h4 class="card-title">Apply Leave</h4>
    <div class="form-group row">
      <label for="fname" class="col-sm-3 text-right control-label col-form-label">Leave type</label>
      <div class="col-sm-9">
        <input type="text" name="leave_type" class="form-control" id="fname" placeholder="Leave type">
      </div>
    </div>
    <div class="form-group row">
      <label for="lname" class="col-sm-3 text-right control-label col-form-label">Date from</label>
      <div class="col-sm-4">
        <input type="date" min="{{date('Y-m-d')}}" name="from" class="form-control" id="FromDate">
      </div>
      <div class="col-sm-4">
        <input type="date" name="to" class="form-control" id="ToDate">
      </div>
    </div>
    <div class="form-group row">
      <label for="fname" class="col-sm-3 text-right control-label col-form-label">Days</label>
      <div class="col-sm-9">
        <input type="text" name="days" class="form-control" id="TotalDays" placeholder="Number of leave days">
      </div>
    </div>
    <div class="form-group row">
      <label for="fname" class="col-sm-3 text-right control-label col-form-label">Reason</label>
      <div class="col-sm-9">
        <textarea type="text" name="reason" class="form-control" placeholder="Reason">
                                        </textarea></div>
    </div>
  </div>
  <div class="border-top">
    <div class="card-body">
      <button type="submit" class="btn btn-dark">Apply</button>
    </div>
  </div>
</form>
```

# css - IE8 css 菜单栏无法正确显示

> ID：11771402
> 
> 赞同：0
> 
> 时间：2012-08-02T05:12:55.737
> 
> 标签：css, internet-explorer

下面是[本站菜单的css脚本](http://softwareservicesindia.com/Pradnnya_blog/wordpress_site/?page_id=1290)

```
 #navmenu{
 z-index:99999;
 margin-top:40px;
 margin-left:400px;
 position:absolute;
 }

 #navMenu li {
 float:left;
 color:#ececec;
 list-style-type:none;
 }

 #navMenu ul {
 margin-left:300px;
 margin-top:70px;
 font-size:16px;
 color:#000000;
 }

 #navMenu li a{
 width:70px;
 height:15px;
 display: inline-block;
 font-weight:700;
 float:left;
 color:#707070;
 display: block;
 padding: 8px 12px;
 text-decoration: none;display: block;
 padding: 8px 12px;
 text-decoration: none;
 background-image: url(img/image_menubutton.JPG);
 border-right:1px solid white;
 margin-right:12px;
 font-family:"Georgia",Georgia,Serif;
 font-weight:900;
 font-size:19px;
 text-align: center;

 }
 #navmenu li.item1{background-image: url(img/about.JPG);} 
```

菜单在 chrome 和 FF 中完美显示。但在 IE 中它不正确..

什么是让它在 IE 中正确显示的解决方案？

**Edit1** 这是 IE8 中菜单的外观

![在此处输入图像描述](../Images/9ac5fc334f6ae603458473a6e03a27d1.png)

这就是菜单在 FF 中的外观

![在此处输入图像描述](../Images/9f6539ff86752725f8f21a7dbb023675.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:05:46.200

Check your doctype to make sure IE is understanding `inline-block`

[IE8 display inline-block not working](https://stackoverflow.com/questions/9110646/ie8-display-inline-block-not-working)

# c++ - 从继承 CCSprite 的类创建精灵

> ID：11771403
> 
> 赞同：0
> 
> 时间：2012-08-02T05:12:59.547
> 
> 标签：c++, ios, cocos2d-x

`Balloon`我有一个*[继承](https://stackoverflow.com/questions/11755431/determine-if-object-is-touched-tapped)*自`CCSprite`. 我给了它像`balloonSpeed`和这样的属性`balloonStrength`。不过，我似乎遇到了问题。

我想要做的是，当我创建`Balloon`类的实例时，我希望它执行以下操作：

*   给它一个纹理（一个气球的PNG文件）。
*   设置属性，如`balloonSpeed`和`balloonStrength`。
*   添加动作以使其移动并接受触摸输入。

当物体被触摸时，我想：

*   如果抽头数 = ，则计数`balloonStrength`。如果是这样，摧毁气球。

我已经做了一个更简单的版本，其中一个`Balloon`对象在被触摸时被破坏。我想在这里应用 OOP 和自定义类，但我似乎无法找到正确的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:15:36.053

那么 h 文件应该如下所示：

```
#include "cocos2d.h"
using namespace cocos2d;

class Balloon : public cocos2d::CCSprite, public CCTargetedTouchDelegate {
public:
float balloonSpeed;
int balloonStrength;
int numberOfTaps;
virtual void onEnter();
virtual void onExit();
virtual bool ccTouchBegan(CCTouch* touch, CCEvent* event);
virtual void ccTouchMoved(CCTouch* touch, CCEvent* event);
virtual void ccTouchEnded(CCTouch* touch, CCEvent* event);
}; 
```

并在您的触摸方法中：

```
bool Balloon::ccTouchBegan(CCTouch* touch, CCEvent* event){
    CCPoint touchLocation = this->getParent()->convertTouchToNodeSpace(touch);
    if (CCRect::CCRectContainsPoint(this->boundingBox(), touchLocation)) {
        this->numberOfTaps++;
        if(this->balloonStrength == this->numberOfTaps){ 
            this->removeFromParentAndCleanup(true);
        }
    }

    return true;
} 
```

您可以在将 blueBalloon 添加为图层或节点的子节点后使用它，如下所示：

```
blueBalloon->balloonSpeed = 2.0f;
blueBalloon->numberOfTaps = 0;
blueBalloon->balloonStrength = 5; 
```

# networking - 什么是 LACP（链路聚合控制协议）中的切换时间

> ID：11771404
> 
> 赞同：0
> 
> 时间：2012-08-02T05:13:01.550
> 
> 标签：networking

这是在一次采访中被问到的问题，我无法回答。它是 LACP 协议特有的。我用谷歌搜索了很多仍然无法找到答案。

任何人都可以在 LACP 中随着时间的推移切换什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:30:55.023

LACP 协议必须有一定的间隔，通过线路发送一个 LACP 控制数据包，测试该物理接口是否启动（如 ping ICMP 数据包）。如果它没有得到这个数据包的回复，它就知道这个接口已经关闭并且必须从由 LACP 协议管理的“通道”中禁用。

我想，`switch over time`你问的是那个间隔，因为在这个时间之后，LACP 知道，这条线是关闭的，可以切换到另一条，它是向上的。

# java - 我们可以使用可序列化将一组对象从一个活动传递到另一个活动吗

> ID：11771406
> 
> 赞同：0
> 
> 时间：2012-08-02T05:13:15.830
> 
> 标签：java, android, serialization

这就是我正在做的。

“e”定义为

```
Option e[]; 
```

其中 Option 是我实现 Serializable 的类

```
Intent intent =new Intent(this,list_create.class); 
intent.putExtra("element", e);
startActivity(intent); 
```

在第二个活动中，我正在这样检索

```
Intent i = getIntent();
Option e = (Option)i.getSerializableExtra("element"); 
```

但它在“startActivity（intent）”处给出了 java.io.notSerializableException。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:19:57.180

我不确定，但是，这可能会有所帮助，

```
intent.putParcelableArrayListExtra("elements", e); 
```

从第二个活动得到，

```
Intent i = getIntent();
Option e = (Option)i.getParcelableArrayListExtra("element"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:11:18.873

将 a`ArrayList`作为容器用于`Option`. 一个 Arraylist 是`Serializable`. 界面`List`不是。`Serializable`

即使`Option`is `Serializable`，`Option`must be的属性`Serializable`也是如此。如果一个属性不应该被转移，它必须用关键字标记`transient`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:24:04.180

我认为你必须将数组对象作为字节发送，然后你从字节中重建

检查这个链接

[Java 可序列化对象到字节数组](https://stackoverflow.com/questions/2836646/java-serializable-object-to-byte-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:24:51.800

你可以通过任何你想要的。

创建一个新类，随心所欲地投入其中，并使其实现可序列化。

```
public class myClass  implements Serializable{
// Whatever fields
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T07:06:25.340

`Option``Option`是可序列化的，但您正在发送与序列化概念背道而驰的类型数组。

相反，您应该在您的`Option`班级中有一个数组，其中包含您需要发送的所有选项。然后你只放一个 type 元素`Option`。

# android - ViewPager 中相邻片段的问题，这有助于持有它的 Activity

> ID：11771408
> 
> 赞同：1
> 
> 时间：2012-08-02T05:13:37.487
> 
> 标签：android, android-fragments, android-viewpager

当 ViewPager 中的相邻[片段](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)[参与](http://developer.android.com/guide/components/fragments.html)活动（OptionsMenu 或 View）时，即使在实际页面被选择之前，来自相邻片段的内容也会被加载。

几个月前，Jake Wharton已在[此处](https://groups.google.com/forum/#!topic/android-developers/_opT-Lr_hgE)讨论并[报告了此问题。](http://code.google.com/p/android/issues/detail?id=19203)这个问题在最新版本的[兼容性库](http://developer.android.com/tools/extras/support-library.html)中修复了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:29:35.793

看看这个[补丁](http://code.google.com/p/android/issues/attachmentText?id=19203&aid=192030001000&name=Issue19203.patch&token=oqTK2-_FHddGMZ-E7ZHKS2wsKNM:1344929219410)

此问题已在最新版本中修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:59:49.730

尝试[`setMenuVisibility(false)`](http://developer.android.com/reference/android/support/v13/app/FragmentCompat.html#setMenuVisibility%28android.app.Fragment,%20boolean%29)在相邻`Fragment`的 s 上使用，然后在显示页面时实现一个`OnPageChangedListener`设置。`setMenuVisibility(true)`

# mysql - MySQL 事务可以与事件调度程序一起使用吗？

> ID：11771412
> 
> 赞同：2
> 
> 时间：2012-08-02T05:14:06.157
> 
> 标签：mysql, transactions

我可以在 MySQL 事件中的 InnoDB 表上使用 MySQL 事务吗？事件调度器有什么限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:28:17.210

以下是 InnoDB 表的限制

警告

不要将 mysql 数据库中的 MySQL 系统表从 MyISAM 转换为 InnoDB 表！这是不受支持的操作。如果这样做，MySQL 不会重新启动，直到您从备份中恢复旧系统表或使用 mysql_install_db 脚本重新生成它们。

警告

将 InnoDB 配置为使用 NFS 卷上的数据文件或日志文件不是一个好主意。否则，这些文件可能会被其他进程锁定，从而无法供 MySQL 使用。

*** *转到以下链接

[对事件调度程序的限制](http://dev.mysql.com/doc/refman/5.1/ja/events-limitations-restrictions.html)

希望对你有帮助！！！

# python-2.7 - Python图形窗口不与鼠标交互

> ID：11771418
> 
> 赞同：0
> 
> 时间：2012-08-02T05:15:00.867
> 
> 标签：python-2.7, osx-snow-leopard

我正在使用 John Zelle 的“Python Programming”一书中的 graphics.py 库。出于某种原因，在我的 Mac 上，鼠标不使用以下命令与图形窗口交互：“win.getMouse()”。在 Python 解释器中键入时，提示“>>>”不会返回，并且必须使用 CNTRL-C 终止该命令。具体问题是第 5 章中的“triangle.py”。

有没有办法解决这个问题或在 mac 上使用更友好的替代 python 图形系统。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:35:16.207

Zelle 教授的回答。[从http://mcsp.wartburg.edu/zelle/python/](http://mcsp.wartburg.edu/zelle/python/)下载当前 graphics.py 文件并重新运行程序。它现在工作正常。

# html - 如何使 div 扩展到屏幕分辨率而不是内容？

> ID：11771420
> 
> 赞同：0
> 
> 时间：2012-08-02T05:15:06.503
> 
> 标签：html, css

[这](http://www.jongarza.me)是我正在开发的网站，右侧边栏应该扩展到不同屏幕分辨率的底部，`height:100%;`但由于某种我无法识别的原因，它只扩展到其中的内容。任何人都可以找出解决方案吗？

如果可能的话，从网站上获取代码，如果没有，请让我发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:16:31.090

您还需要为 html 和 body 添加全高：

```
html, body{
  height: 100%;
} 
```

# sql - SQL 加载器中的 If 子句

> ID：11771425
> 
> 赞同：1
> 
> 时间：2012-08-02T05:15:25.117
> 
> 标签：sql, oracle, oracle10g, sql-loader

可以在 sql loader 中使用 IF CLAUSE 吗？我写了一个代码，但它给了我错误。

```
INTO TABLE TF_RTB9_DTL 
WHEN ((01) = 'D') OR (if 
(POA_COU_VAL = 0) 
then MAST_POA_ID = null 
end if) 
FIELDS TERMINATED BY "~" OPTIONALLY ENCLOSED BY '"' 
TRAILING NULLCOLS 
( 

TRANS_TYP POSITION(3), 
BO_ID , 
NAME , 
MID_NAM , 
LAS_NAM , 
PAN , 
NAM_FIR_JOINT , 
MIDD_NAM_FIR_JOINT, 
LAS_NAM_FIR_JOINT , 
PAN_FIR_JOINT , 
NAM_SEC_JOINT , 
MIDD_NAM_SEC_JOINT, 
LAS_NAM_SEC_JOINT , 
PAN_SEC_JOINT , 
ADD_LIN_1 , 
ADD_LIN_2 , 
ADD_LIN_3, 
CITY , 
STATE , 
COUNTRY , 
PIN_COD , 
PERM_ADD_LIN_1 , 
PERM_ADD_LIN_2 , 
PERM_ADD_LIN_3 , 
PERM_CITY , 
PERM_STATE , 
PERM_COUNTRY , 
PERM_PIN_COD , 
POA_COU_VAL , 
MAST_POA_ID , 
TRANS_ID 
) 
```

如果 POA_COU_VAL 为 0，则 POA_COU_VAL 必须为空，并且应在 TRANS_ID 中输入下一个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T07:46:55.683

SQL*Loader is a program for loading large batches of data. It has only limited facilities for manipulating the data during the load process.

If you want to transform the data you should be using external tables instead. These are very similar to SQL*Loader (the definition uses virtually the same syntax but they present the data file to the database as a table. That means you can use SQL on it. So instead on invoking SQL*Loader from the command line you woudl run an insert statement like this:

```
insert into target_table
select * from external table; 
```

Only in your situation you need to explode the project of the SELECT clause so you can include a CASE() statement to implement your additional logic.

[Find out more about external tables here.](http://docs.oracle.com/cd/B19306_01/server.102/b14215/et_concepts.htm#i1009391)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:01:48.057

SQL*Loader `WHEN` clause has only limited boolean operators, especially `OR` is missing ( see [http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_control_file.htm#i1005657](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_control_file.htm#i1005657)).

If you *have* to use SQL*Loader (and can't switch to external tables as APC suggested), you need to multiply the `INTO` sections for each part of your `OR` clause.

For example:

```
INTO TABLE TF_RTB9_DTL 
WHEN (01) = 'D'
FIELDS TERMINATED BY "~" OPTIONALLY ENCLOSED BY '"' 
TRAILING NULLCOLS 
( 
TRANS_TYP POSITION(3),
...      
...      
MAST_POA_ID
)
INTO TABLE TF_RTB9_DTL 
WHEN POA_COU_VAL = '0'
FIELDS TERMINATED BY "~" OPTIONALLY ENCLOSED BY '"' 
TRAILING NULLCOLS 
( 
TRANS_TYP POSITION(3),
...      
...      
MAST_POA_ID "NULL"
) 
```

Or consider using the `NULLIF` function ( [http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_field_list.htm#i1009345](http://docs.oracle.com/cd/B19306_01/server.102/b14215/ldr_field_list.htm#i1009345) )

```
...
MAST_POA_ID NULLIF POA_COU_VAL = '0'
... 
```

SQL*Loader is a a tricky tool, you'd most probably get quicker results with external tables, if you are able to use them (file has to be on the Oracle Server machine whereas SQL*Loader is able connect to any Oracle instance).

# php - MongoDB PHP驱动无法安装Centos 6云服务器

> ID：11771429
> 
> 赞同：0
> 
> 时间：2012-08-02T05:15:56.373
> 
> 标签：php, mongodb, centos, driver, centos6

我已经在我的 Centos 6 云服务器中安装了 MongoDB 服务。现在我需要在我的服务器上安装 php-pecl-mongo-1.2.10-1.el6.remi.x86_64.rpm ......但它给出了“找不到包”。任何人都可以解决这个问题吗？我的 php 版本是 PHP 5.3.3。

我正在使用 putty 来配置 Centos 6 服务器。我有管理员权限来配置 php.ini。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:42:45.973

你可以：

*   尝试 RPM 安装没有特定版本的 php-pecl-mongo

*   指向特定的 RPM url 进行安装，例如。使用[rpmfind.net => php-pecl-mongo](http://rpmfind.net/linux/rpm2html/search.php?query=php-pecl-mongo%5d)

*   `sudo pecl install mongo`按照[Unix 安装说明](http://www.php.net/manual/en/mongo.installation.php#mongo.installation.nix)安装

# java - 为什么 java 的 repast j 中的这段代码会产生双倍的“outedge”

> ID：11771433
> 
> 赞同：0
> 
> 时间：2012-08-02T05:16:20.900
> 
> 标签：java, agent, repast-simphony

我正在与客户、零售商和供应商建立供应链模型。它们连接在一个节点中。我找到了这段代码。但我不明白，为什么这段代码会产生双倍的外缘。也许，有人可以帮忙吗？

```
 while (it.hasNext()) {
                // Find the next agent to link to.
                tempAgent = (supply_chain_agent) it.next();
                System.out.println(tempAgent);

                // Create an edge from the last agent to the temp agent.
                tempEdge = new supply_chain_edge("Orders", 1, this.initialOrderPerTimeStep);

                // Connect the new edge.
                tempAgent.addInEdge(tempEdge);
                System.out.println(tempEdge.getLabel());

                lastAgent.addOutEdge(tempEdge);
                System.out.println(tempEdge.getLabel());

                tempEdge.setTo(tempAgent);
                tempEdge.setFrom(lastAgent);

                // Create an edge from the temp agent to the last agent.
                if (lastAgent.getNodeLabel().startsWith("Customer")) {
                    tempEdge = new supply_chain_edge("Shipments", this.ordering_delay, this.initialOrderPerTimeStep);
                } else {
                    tempEdge = new supply_chain_edge("Shipments", this.delivery_delay, this.initialOrderPerTimeStep);
                }

                // Connect the new edge.
                lastAgent.addInEdge(tempEdge);
                System.out.println(tempEdge.getLabel());

                tempAgent.addOutEdge(tempEdge);
                System.out.println(tempEdge.getLabel());

                tempEdge.setTo(lastAgent);
                tempEdge.setFrom(tempAgent);

                // Move on.
                lastAgent = tempAgent;
                System.out.println(lastAgent);

            } 
```

# css - 如何更改 jquery mobile a href 按钮图像？

> ID：11771437
> 
> 赞同：1
> 
> 时间：2012-08-02T05:16:39.723
> 
> 标签：css, jquery-mobile

基本上 jquery 移动按钮是一个普通的矩形，我想更改为使用我自己的图像来替换它。关于这个主题有任何参考吗？下面的代码是错误的例子，但可以参考我想要的。

示例将显示普通按钮：

```
<a data-role="button" data-rel="back" data-transition="fade" data-theme="e"  data-icon="back" data-iconpos="left"> 
```

我尝试演示来替换它：

(HTML)

```
<a data-role="button" data-rel="back"  data-theme="app-ios"> 
```

(CSS)

```
/*button background and borders color */
a[data-theme="app-ios"] {
border: none;
width:80px;
}
a[data-theme="app-ios"] .ui-btn-corner-all {
border: none;
background:url('images/back.png') no-repeat 15px;
/*background:red;*/
border-radius:0; 
overflow: visible;
padding-left: 8px !important;
padding-right: 8px !important;
} 

/* shadows and label color */
a[data-theme="app-ios"].ui-shadow,
a[data-theme="app-ios"] {
box-shadow: none; -moz-box-shadow: none; -webkit-box-shadow: none;
background-clip: none; -webkit-background-clip: none; -moz-background-clip: none;
color: white;
font-weight: bold;
top: 5px;
text-decoration: none;
text-shadow: 0 -1px 0 rgba(0,0,0, 0.4);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:25:40.013

试试这个 - 将类 ui-btn-corner-all 更改为

```
.ui-btn-corner-all {
    -moz-border-radius:    5px
    -webkit-border-radius: 5px
    border-radius:         5px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:03:31.577

您可以向其中添加一个类并设置该类的样式...

HTML：

```
<a data-role="button" data-rel="back"  data-theme="app-ios" class="button">Button</a>​​​​​​​​​​​​​​​ 
```

CSS：

```
​.button { color: #f0f; }​ 
```

# java - 在 Java/Eclipse 中创建 Web 服务以从数据库中获取值

> ID：11771440
> 
> 赞同：0
> 
> 时间：2012-08-02T05:17:22.500
> 
> 标签：java, database, eclipse, web-services

我需要使用 Eclipse 在 Java 中创建一个 Web 服务。我的要求是使用该 Web 服务连接到数据库并检索一些值。请向我发送至少一个示例程序，说明如何实现这一目标。我用谷歌搜索过，但我得到的结果并没有让我清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:34:38.430

嗨@Rohith，这是用于连接数据库的解剖 Web 服务，

```
@WebService(serviceName = "your_service_name")
public class YourClass {

    public YourClass() {
       super();
    }

    @WebMethod(operationName = "your_operation_name")
    @WebResult(name = "your_response_name")
    public YourDTORes your_method_name(@WebParam(name = "your") YourDTOReq request) {
         YourDTORes response = new YourDTORes();
         YourClassBD bd = null; // create a connection to database
         Connection conn = null;
         Statement st = null;
         String sql = null;

         try {
           bd = new YourClassBD();
           conn = bd.getYourMethodConnection();

           sql = "select yourField from yourTable " +
                "where yourField=2000 " +
                "AND yourField = stuff";
           st = conn.createStatement();
           if(st.execute(sql)) {
             ResultSet rs = st.getResultSet();
             if(rs.next()) {
               System.out.println("SUCCESS INSERT: " + rs.getString(1));
               return response;
            } else {
                    response.setMessageErr("ERROR.");
                    return response;
                }
           }
         } catch(Exception e) {
                response.setMessageErr("Service ERROR.");
                e.printStackTrace();
                return response;
         }
         return response;
    }
} 
```

上面的代码是一个连接数据库的简单示例。如果您有问题，请告诉我。谢谢。

**我希望能帮助你。:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:54:21.123

这是从 jsp 访问数据库的示例

[http://www.roseindia.net/jsp/connect-jsp-mysql.shtml](http://www.roseindia.net/jsp/connect-jsp-mysql.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-13T03:01:12.780

与开始使用 web 服务 springboot 是一个神奇的。只需进入[http://start.spring.io](http://start.spring.io)，然后使用依赖项（web、mysql 和 jpa）创建一个项目，他们还有示例项目可以帮助您轻松入门。
考虑查看 youtube 教程，那里有很多资源。

# android - 从 webview 中获取 html，然后对其进行操作并加载回来

> ID：11771441
> 
> 赞同：0
> 
> 时间：2012-08-02T05:17:45.193
> 
> 标签：android

```
http://stackoverflow.com/questions/3479833/is-it-possible-to-get-the-html-code-from-webview 
```

有很多链接可以从 webview 获取 html 代码，但需要对其进行操作，然后再次将其加载回来。是否可以这样做。如果可以，请提供一些想法。我对java脚本没有太多想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:48:05.680

您可以从 HTML 字符串加载：

```
String summary = "<html><body>You scored <b>192</b> points.</body></html>";
webview.loadData(summary, "text/html", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:15:31.177

知道了：

```
 webview.loadUrl("javascript:document.getElementById(\"N\").value = 'dfdfdfd';"+
                     "document.getElementById(\"Pass\").value = 'fdfdfde'"); 
```

其中“N”和“Pass”是 html 中的控件名称

我已经在 onPageFinished() 中完成了。

# javascript - 将不同语言的图像从“index.html”更改为“about.html”

> ID：11771445
> 
> 赞同：0
> 
> 时间：2012-08-02T05:18:17.983
> 
> 标签：javascript, html, image, onclick, multiple-languages

这实际上是我的第一个任务是做多语言网站，即“英语、马来语和日本语”。我有 2 页 html **（'index.html' 和 'about.html'）**，我已经完成了文本翻译并用不同的语言更改图像。对于**'about.html'**我已将 **'english.png'**作为默认语言，当我单击**'Japan'**标志更改语言时，所有文本和图像将更改为**'Japan text' 和 'japan.png'**。但是当我转到**'index.html'**并返回**'about.html'**时，它显示了 'Japan text' 和 'english.png'。它应该显示**“japan.png”** . **如果我选择“日本”**，如何设置 javascript**语言，即使我转到下一页并返回到**'about.html' ，它也会显示****'japan.png** ' 。 我的代码在[这里](http://jsfiddle.net/smile9sue/xXn7e/11/) 谁能帮助我？**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:26:04.290

您似乎在这一行的开头将当前语言设置为“en”：

```
jquery_lang_js.prototype.currentLang = 'en'; 
```

因此，即使您正在更新 currentLang，它也会被重置。您可以使用 cookie 或 localstorage 来存储 currentLang 并从那里加载 currentLang。****

# ajax - 在 iframe 中加载时，从我自己的站点到我自己的站点的 AJAX 请求是否是跨域请求？

> ID：11771452
> 
> 赞同：0
> 
> 时间：2012-08-02T05:19:09.727
> 
> 标签：ajax, iframe, cross-domain, facebook-apps, iframe-app

我正在开发 Facebook Canvas 应用程序，根据定义，它将我的应用程序的代码/网页加载到 Facebook 网站上的 iFrame 中。

在开发过程中，我的印象是，如果我从应用程序的网页向与网页完全相同的服务器/域名上的应用程序的 web 服务发出 AJAX 请求，这实际上是一个跨域请求 - 因为最初加载在浏览器（顶部）框架中的页面与我的 Web 服务位于不同的域中。

但是我现在相信，可能是由于我的代码中的错误，我弄错了，iFrame 中的页面可以向与其位于同一域的 URL 发出请求，而不是跨域请求。

澄清这一点对我来说尤其重要，因为我现在相信我实际上*可以*使用 POST 请求，而不必使用 JSONP GET 请求。

如果有人能为我澄清这一点，我将不胜感激。我四处搜索，找不到关于这种情况的明确声明。

编辑：提供更多说明：我在[https://apps.facebook.com/myapp/](https://apps.facebook.com/myapp/)的 Facebook 应用程序页面 URL 在iF​​rame 中加载我在 www.mydomain.com 的网页。然后，www.mydomain.com 上的网页向 www.mydomain.com 上的网络服务（例如 www.mydomain.com/webservice/）发出 AJAX 请求。那么从我的网页到我的网络服务的请求是否是跨域请求？

干杯马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:51:43.447

您在 iframe 中加载的文档仍然是它自己的文档，并且在涉及相同来源策略时，无论它是否显示在框架中，其行为都与任何其他文档一样。

所以是的，您绝对可以向传递您的文档的域发出 AJAX 请求，不管它是否显示在 Facebook.com 上的 iframe 中。

不涉及跨域边界。

# php - 尽管数据显示在查询中，但单个 mysql 查询更新字段为空

> ID：11771455
> 
> 赞同：0
> 
> 时间：2012-08-02T05:19:21.823
> 
> 标签：php, mysql, sql-update, centos

**环境：** LAMP，Mysql：5.0，PHP：5.1.6，CentOS

我正在执行我的 SQL 查询，**有时**更新结果真的很奇怪。它正在更新**box_status 字段为空**（`box_status`字段为枚举类型值即可`A,L,R`）。此更新查询循环运行。

```
update box_master 
    set box_to_show = '0', 
        box_status = 'L' 
where box_id = '{$param_arr['box_id']}' 
and box_status in ( 'A','L') 
```

我被卡住了，这个问题已经过去了 2 天，没有得到任何线索或解决方案。

从评论转移的代码

**PHP**

```
$update_sql = ""; 
$update_sql = "update box_master set box_to_show = '0', box_status = 'L' where box_id = '{$param_arr['box_id']}' and box_status in ( 'A','L') "; 

$result = mysql_query ( $update_sql, $link ); 

$update_sql = ""; 

if (mysql_affected_rows ( $link ) > 0) { 
   $param_arr ['remarks'] = " box_stock is 1 or 2 and market id is not 2, so changing box to show to 0 and box_status to L from {$param_arr['box_status']}"; 
} 
```

表说明

```
 desc box_master 
 Field       Type                                               Null Key    Default Extra 
 box_id      int(10) unsigned                                   NO   PRI            auto_increment 
 box_status  enum('P','D','A','L','O','N','X','I','C','S','R')  NO          MUL     P    
 box_to_show float(12,2)                                        NO          0 
```

# html - 具有百分比宽度的选择标签上的自定义按钮

> ID：11771456
> 
> 赞同：0
> 
> 时间：2012-08-02T05:19:36.150
> 
> 标签：html, css

我有一个选择下拉菜单，它有一个固定的宽度和百分比。我有一个自定义按钮。我想要的是不管选择的当前宽度如何，我希望按钮与右侧保持 20 像素的距离。但是我找不到这样做的方法，因为如果我在 background-position 属性中使用 % ，当窗口很大时，按钮会变得越来越远。而且显然我不能使用像素，因为我必须将它设置为一定的宽度。

**html**

```
<div class="selector">
    <select id="layer" name="layer" class="select-button">
        <option value="0"> 0
        </option>
        <option value="1"> 1
        </option>
        <option value="2"> 2
        </option>
        <option value="3"> 3
        </option>
    </select>
</div>​ 
```

**css**

```
.selector > .select-button {
background-image: url("../img/actions.png");
background-repeat: no-repeat;
background-color: #ffffff;
background-size: 20px 15px;
background-position: 95% 50% ;
float: right;
width: 45%;
font-size: 16px;
border: 0;
height: 50px;
border-radius: 10px;
border: 5px solid black;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-webkit-appearance: none;
-moz-appearance: none;
appearance: none;
}​ 
```

这是一个 [演示](http://jsfiddle.net/AfSNS/)

我使用随机图像来更好地展示它。如您所见，如果您扩大窗口，按钮位置会发生变化，因为它是按百分比设置的。无论视口大小如何，我都想让按钮距离右侧绝对 20 像素，但不知道如何实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:30:00.033

你可以：

*   在右侧的图像中添加 20 个透明像素
*   使用 jQuery 更新背景位置。

# google-analytics - 知道为什么 Google Analytics Reporting API 中没有“服务提供商”选项吗？

> ID：11771457
> 
> 赞同：3
> 
> 时间：2012-08-02T05:19:43.197
> 
> 标签：google-analytics, google-analytics-api

在 Google Analytics 中，我创建了一个显示 ISP 的仪表板。

根据[https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=visitor](https://developers.google.com/analytics/devguides/reporting/core/dimsmets#cats=visitor)

没有“服务提供商”选项......但奇怪的是：

> ga:网络域
> 
> 您网站的访问者使用的 ISP 的域名。这是从注册到 IP 地址的域名派生的。

服务提供商通常会返回“马里兰大学”之类的内容，其中网络域给出的结果类似于“umd.edu”，实际上是 1-1。所以，我不明白他们为什么会故意从 API 中排除服务提供商，而不是网络域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:25:47.580

> ga:网络位置
> 
> 用于访问您的网站的服务提供商的名称

不知道为什么他们不只是调用 serviceProviders ......但是哦，好吧。

这是一个使用它的示例查询： [https ://www.googleapis.com/analytics/v3/data/ga?ids=ga%YOUR_ID&dimensions=ga%3AnetworkLocation&metrics=ga%3Avisits&filters=ga%3AnetworkLocation!~(verizon% 7Ccomcast%7Csprint)&sort=-ga%3Avisits&start-date=2012-08-08&end-date=2012-08-22&max-results=50](https://www.googleapis.com/analytics/v3/data/ga?ids=ga%YOUR_ID&dimensions=ga%3AnetworkLocation&metrics=ga%3Avisits&filters=ga%3AnetworkLocation!~(verizon%7Ccomcast%7Csprint)&sort=-ga%3Avisits&start-date=2012-08-08&end-date=2012-08-22&max-results=50)

# c++ - ORA-24347: 聚合函数中出现 NULL 列的警告

> ID：11771462
> 
> 赞同：6
> 
> 时间：2012-08-02T05:20:07.457
> 
> 标签：c++, sql, oracle, oracle11g, aggregate-functions

我收到这个警告：

```
ORA-24347: Warning of a NULL column in an aggregate function 
```

在生产中使用 Oracle 的`MAX()`功能时。我正在使用 OCI 库连接到 Oracle 版本 11.2.0.2。

但是，在测试服务器上，这个错误不会出现。我以`NULL`可以将值传递给聚合函数的方式对查询进行了硬编码。我仍然无法重现此问题。

此警告是否与任何 Oracle 错误有关？谁能提供一些会引发此警告的示例查询？

编辑：

```
Table: EX_TABLE
Columns:
ID NOT NULL NUMBER
SOME_NUMBER NUMBER
MAX_VAL NUMBER 
```

询问：

```
select MAX(DECODE(some_number,1,max_val,NULL)) val1
     , MAX(DECODE(some_number,2,max_val,NULL)) val2
     , MAX(DECODE(some_number,3,max_val,NULL)) val3 
  from EX_TABLE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:32:53.223

您应该使用 0 而不是 NULL 解码值；

```
select MAX(DECODE(some_number,1,max_val,0)) val1,
       MAX(DECODE(some_numer,2,max_val,0)) val2,
       MAX(DECODE(some_numer,3,max_val,0)) val3 
  from EX_TABLE 
```

# database - 将日期字段值保存到物理文件中

> ID：11771466
> 
> 赞同：1
> 
> 时间：2012-08-02T05:20:52.130
> 
> 标签：database, ibm-midrange, rpgle, rpg

我有一个日期字段，它接受 AS400 中的系统日期

显示文件包含 *DATE 的日期字段

我有一个包含日期列的物理文件。当我尝试将屏幕的其他字段保存到此物理文件时，我还想保存此系统日期。

但是我无法向这个内置的 Date 函数添加字段名称。

我怎么能在我的显示屏幕上有一个日期字段，它会自动接受系统日期并具有 DD/mm/yy 格式的输入格式，但在数据库内部它必须将其保存为 yy/mm/dd。

为了在我的日期格式数据库中进行这种内部转换，我初始化了一个名为“日期”的日期字段，长度为 6，压缩十进制，0 小数位。

请指导如何以这种格式将屏幕上的系统日期保存到物理文件中。

重新编辑：我有一个等级的 PF 接收日期定义如下。（其 DDS）

```
 0004.00      A            GRCVDT         6P 0 
```

我避免使用“L”数据类型作为日期，因为我想执行上面解释的日期转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T14:24:04.027

在显示文件上，*DATE 仅用于输出。它不能被程序读取。

听起来数据库表有一个名为 DATE 的十进制字段；不是称为 DATE 的日期字段。使用日期数据类型将使日期操作变得更加容易 - 请参阅 Dennis 的答案以获取有关建议。如果无法使用日期数据类型，而必须使用十进制数据类型来保存日期值，请查看 RPG [TIME](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/rzasd/sc0925081020.htm)操作代码。这将允许您将当前系统日期提取到程序变量中。返回日期的确切格式取决于您的工作日期格式设置。（WRKJOB 看到那个）。如果需要，您可以使用数据结构和一系列 EVAL 语句来重新排列日期元素。

编辑将 EUR 转换为 YYMMDD 的代码示例

```
 d eur             ds                  qualified
 d ddmmyy                         6s 0
 d  dd                            2s 0 overlay(ddmmyy: 1)
 d  mm                            2s 0 overlay(ddmmyy: 3)
 d  yy                            2s 0 overlay(ddmmyy: 5)

 d ymd             ds                  qualified
 d yymmdd                         6s 0
 d  yy                            2s 0 overlay(yymmdd: 1)
 d  mm                            2s 0 overlay(yymmdd: 3)
 d  dd                            2s 0 overlay(yymmdd: 5)

 c/free
   eur.ddmmyy = 020812;
   ymd.yy = eur.yy;
   ymd.mm = eur.mm;
   ymd.dd = eur.dd;
   dsply ymd.yymmdd;
   *inlr = *on;
  /end-free 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T11:00:32.743

这个文件是通过 DDS 还是 SQL 创建的？如果是 DDS，请将您选择的字段添加到 DDS 规范中，并指定 L 的数据类型：

```
 A            MYDATE          L 
```

然后使用CHGPF，指定源文件和成员名；系统将添加新列。

```
CHGPF FILE(MYLIB/MYFILE)           
      SRCFILE(MYSRCLIB/MYSOURCE)      
      SRCMBR(MY_MBR) 
```

即使您的文件是 DDS 描述的，您也可以使用 SQL 语句添加日期列，例如：alter table mytable add column mydate date not null default

（当然，如果你这样做，你不能再从 DDS 重新创建文件而不会丢失新列）

然后在你的程序中，就在写入数据之前，执行：mydate = %date

这里有很多假设：您正在使用 ILE，您知道如何修改和重新编译程序，您正在使用自由格式或可以翻译上面的“variable = value”语法，...）

还有其他方法可以将系统日期放入文件中，而无需您的程序执行任何特殊操作；我们实际上需要更多地了解该应用程序，以便在此高级建议之外提供更多帮助。

# javascript - 可以用我自己的自定义图像替换光标吗？

> ID：11771472
> 
> 赞同：3
> 
> 时间：2012-08-02T05:21:38.010
> 
> 标签：javascript, jquery, html, css

除了这些之外，是否可以替换光标图标：

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_cursor](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_cursor)

与我在 Photoshop 中设计的自定义图像？我知道这是可能的，因为我见过一些带有自定义图像的光标网站。问题是：我该怎么做以及它是否是标准方法？我可以确定它适用于所有浏览器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:23:10.220

是的，只是做...

```
cursor: url(path/to/image.png); 
```

[js小提琴](http://jsfiddle.net/FutcP/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:23:43.420

试试这个：`cursor: url(image.png);`

看段`'Property Values'`：[http ://www.w3schools.com/cssref/pr_class_cursor.asp](http://www.w3schools.com/cssref/pr_class_cursor.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T09:49:19.923

是的，它是。当我完成您的光标图像后，只需将其上传到主机网站（网上有很多），然后使用以下 css 属性来使用它。假设您想在图像上使用它，只需执行以下操作：

```
img  {
   cursor: url(path to your hosted cursor image) ;
} 
```

# windows-ce - Direct3D Mobile 对每帧可以进行的 Draw*Primitive 调用的数量是否有限制？

> ID：11771474
> 
> 赞同：2
> 
> 时间：2012-08-02T05:21:55.600
> 
> 标签：windows-ce

我有运行带有 Intel 945GSE 芯片组的 Atom N270 的 Windows CE 6。我为 Direct3D Mobile 编写了一个小型测试应用程序，并且遇到了一些奇怪的行为。我每帧只能调用一次 Draw*Primitive。多次调用会导致白屏，好像 Present 失败（即使没有给出错误），或者似乎只处理了第一个调用。

省略消息处理后，渲染循环的主体如下：

```
HandleD3DMError(pD3DMobileDevice->Clear(0,0,D3DMCLEAR_TARGET | D3DMCLEAR_ZBUFFER ,0xA50AB0F,1.0f,0),_T("Clear"));
if(HandleD3DMError(pD3DMobileDevice->BeginScene(),_T("BeginScene")))
{
    HandleD3DMError(pD3DMobileDevice->SetTexture(0,pTexture), _T("SetTexture"));
    HandleD3DMError(pD3DMobileDevice->SetStreamSource(0,m_pPPVVB[0],sizeof(PrimitiveVertex)),_T("SetStreamSource Failed"));
    HandleD3DMError(pD3DMobileDevice->SetIndices(pIndexBuffer),_T("SetIndices failed"));
    HandleD3DMError(pD3DMobileDevice->DrawIndexedPrimitive(D3DMPT_TRIANGLELIST,0,0,NUM_TRIS*3,0,NUM_TRIS/2),_T("Draw Primitive 1"));
    //HandleD3DMError(pD3DMobileDevice->DrawIndexedPrimitive(D3DMPT_TRIANGLELIST,0,0,NUM_TRIS*3,NUM_TRIS/2 * 3,NUM_TRIS/2),_T("Draw Primitive 2"));

    HandleD3DMError(pD3DMobileDevice->SetStreamSource(0,0,0),_T("SetStreamSource Null Failed"));
    HandleD3DMError(pD3DMobileDevice->SetIndices(0),_T("SetIndices Null failed"));

    HandleD3DMError(pD3DMobileDevice->EndScene(),_T("EndScene"));
}
HandleD3DMError(pD3DMobileDevice->Present(0,0,0,0),_T("Present Failed")); 
```

您可以切换两条`DrawIndexedPrimitive()`线并分别渲染四个三角形，这是正确的。但是，当它们都存在时，不会呈现任何内容。该`HandleD3DMError()`函数在发生错误时显示一个消息框。这也是通过初始化完成的。任何时候都不会显示错误。

我尝试绘制不同的原始类型并绘制非索引顶点缓冲区，但没有成功。我能够使用单个缓冲区绘制 10,000 个三角形，但尝试使用多个缓冲区失败（我认为它与多个 Draw 调用问题有关）。

MSDN 上的文档没有提到对 Draw 调用的任何限制。他们甚至提到了您需要进行多次 Draw 调用的情况。我看过的官方样本也只每帧调用一次 Draw*() 。

如果我在一帧中多次尝试和`BeginScene()`多次`EndScene()`，则不会渲染任何内容，甚至不会渲染清除的颜色。

如果需要，我可以提供所有来源。

我感谢任何人可以给我的任何帮助。

干杯

# visual-studio-2010 - VS2010 致命错误 LNK1318，mspdbsrv.exe 用完了它的 4GB 内存

> ID：11771476
> 
> 赞同：1
> 
> 时间：2012-08-02T05:22:01.643
> 
> 标签：visual-studio-2010

我们有一个大项目，最近我们出于某种原因将两个 dll 合并为一个。然后我们在链接时收到错误 LNK1318，并且 mspdbsrv.exe 达到 4063MB 的最大内存使用量，然后链接器报告致命错误 LNK1318 Unexpected PDB Error, OK(0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:13:34.020

mspdbsrv.exe 是在后台启动的实用程序，用于创建用于调试代码的 PDB 符号。

我已经阅读过有关 Visual Studio 早期版本（例如，2005）的轶事报告，在过去，这个小过程一直是痛苦的根源，但我在 2010 年的日常开发工作中没有遇到任何问题。

在我看来，您已经建立了 PDB 文件的缓存，它试图在构建时将其合并为一个。唯一的问题是，这会生成一个 4 GB (!!) 大小的文件。我会删除与您的项目关联的所有临时文件并终止 mspdbsrv.exe 进程（或重新启动计算机），然后再次尝试构建。您可能还想关闭[增量构建](http://msdn.microsoft.com/en-us/library/aa691231.aspx)，它只重建自上次构建以来已更改的信息。这将强制进行完全重建，这应该会生成一个没有任何额外膨胀的 PDB 文件。

# javascript - 根据其他调整大小的 html 元素定位背景图像

> ID：11771478
> 
> 赞同：0
> 
> 时间：2012-08-02T05:22:24.780
> 
> 标签：javascript, html, resize, background-image, css-position

所以我有一个`div`位于页面中间的位置（水平居中但不是垂直居中），它会缩放以适应设备宽度，直到设备大于 600 像素。之后，`div`无论它变得多大，它都保持在 600px 宽并保持在窗口的中心。

我想做的是定位背景图像，使其始终位于此缩放的左下角`div`（页面背景不是页面背景`div`）。我相信我需要使用 javascript 来执行此操作，但我不确定。我想我可能需要做类似的事情：

```
var divWidth = document.getElementById('theScalingDiv').offsetWidth;
var pageWidth = document.clientWidth;
var xCoord = (pageWidth/2) - (divWidth/2); 
```

然后我可以使用绝对定位来根据缩放的高度`div`和计算的`xCoord`. 这听起来可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:31:34.260

您可以在 div 上使用固定定位：

```
.divtoposition {
position:fixed;
left: 0;
bottom: 0;
} 
```

[http://jsfiddle.net/7v5L4/](http://jsfiddle.net/7v5L4/)

# database - 未完全指定的日期常量

> ID：11771483
> 
> 赞同：2
> 
> 时间：2012-08-02T05:22:47.197
> 
> 标签：database, oracle, default-value, check-constraints

**在 Oracle 中， “未完全指定的日期常量”是**什么意思。意思是？有什么例子吗？根据文档，它不能在检查约束和列默认值中指定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T08:00:13.263

[这是CREATE TABLE 文档](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_7002.htm)中的一行。我认为这意味着必须正确格式化默认日期。

因此，假设我们想要一个将日期默认为当年第一天的规则。这是有效的：

```
create table t1 (d1 date default to_date('01-JAN', 'DD-MON')); 
```

而这个声明......

```
create table t1 (d1 date default to_date('01-JAN')); 
```

...投掷`ORA-01840: input value not long enough for date format`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T14:08:19.133

从这里得到答案[https://forums.oracle.com/forums/message.jspa?messageID=10494087#10494087](https://forums.oracle.com/forums/message.jspa?messageID=10494087#10494087)

**未完全指定**是指可能导致不明确或不同值的日期格式，

例如，当它依赖于其他变量时，例如依赖 sysdate 的世纪数据的 RR 格式，

因此，如果 sysdate 中的年份是 1900，则“02-jan-12”可能是“02-jan-1912”，如果 sysdates 年份是 2000，则可能是 2012

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T03:52:26.890

我认为文档是错误的。您*可以*在约束或默认值中使用未完全指定的日期常量。在某些情况下，即使是“完全指定”的日期常量也可能会失败。我不确定文档的确切含义，但我认为这里的真正问题是假设日期格式的经典 Oracle 问题。

该`DEFAULT`子句不存储值，它存储一个表达式，每次使用时都会计算出一个值。

如果你做一些愚蠢的事情，比如：

```
alter session set nls_date_format = 'DD';
create table date_test(a number, b date default '01'); 
```

它会工作一段时间：

```
insert into date_test(a) values (1);
select b from date_test;

B
--
01 
```

但如果有人使用不同的日期格式，它只会为他们崩溃：

```
alter session set nls_date_format = 'DD-MON-YYYY';
insert into date_test(a) values (1);

*
ERROR at line 1:
ORA-01840: input value not long enough for date format 
```

请注意，完全指定的、明确的表达式仍然会导致问题。

```
alter session set nls_date_format = 'DD-MON-YYYY';
create table date_test2(a number, b date default to_date('01-JAN-2000', 'DD-MON-YYYY'));
alter session set nls_language = 'FRENCH';
insert into date_test(a) values(1);

*
ERROR at line 1:
ORA-01840: valeur entrΘe pas assez longue pour le format de la date 
```

2000 年 1 月 1 日有什么问题？不是每个人都知道“JAN”是什么。

```
SQL> select to_char(date '2000-01-01', 'MON') from dual;

TO_CH
-----
JANV. 
```

**这个故事的真正寓意**

如果要使用日期文字，请始终使用[ANSI 日期文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#BABGIGCJ)：`DATE '2000-01-01'`

# io - solaris 11 的 pkg 安装包下载路径在哪里？

> ID：11771484
> 
> 赞同：0
> 
> 时间：2012-08-02T05:22:52.387
> 
> 标签：io, solaris, iostat

我`pkg install gcc-3`在solaris 11中使用安装gcc 3.`pkg`下载的包安装文件/gcc-3.pkg文件存放在哪里？

我试过`/etc/pkg/`了，只在那里得到一些无用的 mako 文件。

我可以看到正在`pkg`下载文件的线程，有什么方法可以在 solaris 中监视 I/O 状态并获取 pkg 进程正在写入的路径？`iostat`似乎只给出 io 速率而不是实际路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T01:29:26.450

它在 /var/pkg 下缓存下载的文件，但确切的路径通常是散列并且通常没有用处。它不会下载软件包的完整副本，而只会下载您需要的尚未在系统上定位或缓存的文件，因此升级到新版本通常要快得多，因为它们只下载更改的文件。

# django - 如何访问表单字段中的限制值（min_value，max_value）？

> ID：11771485
> 
> 赞同：0
> 
> 时间：2012-08-02T05:23:00.467
> 
> 标签：django

如何在视图中使用 min_value 和 max_value？

例如，表格定义为：

```
class SomeForm(ModelForm):
    somefield = forms.IntegerField(min_value=1, max_value=10) 
```

在我看来，我想做一些类似（伪代码）的事情：

```
min_value = somefield.min_value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:31:23.463

您可以在您的视图中执行此操作：

```
someform = SormForm() #you may instantiate differently.
sfield= someform.fields['somefield']
min_value = sfield.min_value
max_value = sfield.max_value 
```

# meteor - Meteor 线程样式说明

> ID：11771487
> 
> 赞同：19
> 
> 时间：2012-08-02T05:23:11.720
> 
> 标签：meteor

Meteor 的文档指出：

> 在 Meteor 中，您的服务器代码在每个请求中运行在一个线程中，而不是以 Node 典型的异步回调样式

他们真的是这个意思吗？

A）服务器并行运行多个线程（这在 Node.js 生态系统中似乎不寻常）

或者

B）事件服务器中仍然只有一个线程，并且每个请求都按顺序处理，至少直到它调用服务器外部的资源 - 例如数据存储，此时服务器本身正在处理回调，同时它处理其他请求，因此您不必自己编写/管理回调。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T00:29:36.913

布拉德，你的 B 是正确的。

Meteor 在内部使用[纤维](https://github.com/laverdet/node-fibers)。正如您所说，事件服务器中只有一个线程，但是当您执行（例如）数据库读取时，Fibers 产生并控制迅速返回事件循环。所以你的代码看起来像：

```
doc = MyCollection.findOne(id); 
```

（带有隐藏的“屈服于事件循环，当文档在这里时回来”）而不是

```
MyCollection.findOne(id, function (err, doc) {
  if (err)
     handle(err);
  process(doc);
}); 
```

Fiber 版本中的错误处理也只使用标准的 JavaScript 异常，而不是每次都需要检查参数。

我认为这会导致更容易阅读业务逻辑的代码样式，该业务逻辑想要采取一系列相互依赖的操作。但是，如果您想使用异步样式，大多数 Meteor 的同步 API 都可以选择接受回调并变为异步。

# sql - 基于长度分割oracle sql中的字符串

> ID：11771496
> 
> 赞同：3
> 
> 时间：2012-08-02T05:24:02.413
> 
> 标签：sql, oracle

我想根据长度在 Oracle 中拆分我的字符串，并以空格作为分隔符。

例如，

```
MY_STRING="welcome to programming world" 
```

我的输出应该是

```
STRING1="welcome to "
STRING2="programming " 
```

字符串的长度最多应为 13 个字符。位置 26 之后的单词可以忽略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:16:52.843

您没有提及您使用的是哪个版本的 Oracle。如果您使用的是 10g 或更高版本，则可以使用[正则表达式](http://docs.oracle.com/cd/E11882_01/appdev.112/e25518/adfns_regexp.htm#ADFNS1013)来获得所需的内容：

```
with spaces as (
 select regexp_instr('welcome to programming world' || ' '
                    , '[[:space:]]', 1, level) as s
   from dual
connect by level <= regexp_count('welcome to programming world' || ' '
                                , '[[:space:]]')
        )
, actual as (
 select max(case when s <= 13 then s else 0 end) as a
      , max(case when s <= 26 then s else 0 end) as b
   from spaces
        )
select substr('welcome to programming world',1,a)
     , substr('welcome to programming world',a, b - a)
  from actual 
```

这会找到所有空格的位置索引，然后找到最接近但小于 14 的那个。最后使用一个简单`substr`的来分割你的字符串。字符串将有一个尾随空格，因此您可能想要这样做`trim`。

你必须用空格连接你的字符串以确保有一个尾随空格，这样如果你的字符串短于 26 个字符，最后一个单词就不会被删除。

假设您使用的是早期版本，您可以一起破解一些东西[`instr`](http://www.techonthenet.com/oracle/functions/instr.php)，`length`但它根本不会很漂亮。

# asp.net - 如何找到Repeater Control中存在的控件？

> ID：11771503
> 
> 赞同：0
> 
> 时间：2012-08-02T05:25:01.253
> 
> 标签：asp.net, repeater

我的 aspx 页面中有一个中继器控件。我在页面加载事件中将数据绑定到它。它正在显示中继器控件。但是，当我尝试在 repeater_ItemDataBound 事件中查找中继器控件中存在的控件时，我得到 System.NullReferenceException: Object reference not set to an instance of an object。

以下是我的 aspx 页面中的中继器控件，

```
<asp:Repeater ID="rptrSurvey" runat="server" OnItemDataBound="rptrSurvey_ItemDataBound">
<HeaderTemplate>
<table cellpadding='0' cellspacing='0' width='100%' class='tableClass'>
  <tr class='trClass' align='right'>
       <th class='full'>Id</th>
       <th class='full'>Questions</th>
       <th class='full'>Answers</th>
  </tr>
</HeaderTemplate>
<ItemTemplate>
   <tr id="sr<%#Container.ItemIndex %>" class='trClass' style='width:100%'>
   <td id="st1<%#Container.ItemIndex %>" class='first' style='width:5%'>              <%#Eval("question_id") %></td>
   <td id="st2<%#Container.ItemIndex %>" class='first' style='width:60%'><%#Eval("question_description") %></td>                    
   <div id="Div1" runat="server" Visible='<%# Convert.ToInt32(Eval("question_type_id")) == 1 %>' >
   <td id="st3<%#Container.ItemIndex %>" class='last' style='width:35%'>
   <input id="rdoYes<%#Container.ItemIndex %>" value="YES" name="yes_no_na<%#Container.ItemIndex %>" type="radio"></input>YES
   <input id="rdoNo<%#Container.ItemIndex %>" value="NO" name="yes_no_na<%#Container.ItemIndex %>" type="radio"></input>NO
   <input id="rdoNa<%#Container.ItemIndex %>" value="N/A" name="yes_no_na<%#Container.ItemIndex %>" type="radio"></input>N/A
   </td>
   </div>
   <div id="Div2" runat="server" visible='<%# Convert.ToInt32(Eval("question_type_id")) != 1 %>'>
   <td id="st4<%#Container.ItemIndex %>" class='last' style='width:35%'>
   <textarea id="txtComment<%#Container.ItemIndex %>" cols="1" rows="1" style='width:98%; height:100px'></textarea>
   </td>
   </div>
   </tr>
   </ItemTemplate>
   <FooterTemplate>
   </table>
   </FooterTemplate>
   </asp:Repeater> 
```

以下是 ItemDataBound 事件，

```
protected void rptrSurvey_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
{
    var m = HRLetterDatabase.GetSurveyData(hSurveyId.Value);

    foreach (var row in m)
    {
        if (row.question_type_id == 1)
        {
            if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
            {
                HtmlInputRadioButton inputYes = (HtmlInputRadioButton)e.Item.FindControl("rdoYes" + e.Item.ItemIndex);
                if (row.answer == "YES")
                {
                    inputYes.Checked = true;
                    //do something with val
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:29:02.683

尝试添加

```
runat="server" 
```

到您的单选按钮输入控件

编辑：您不能将 ID 动态绑定到您的控件。

```
<input id="rdoYes" value="YES" type="radio" runat="server" /> 
```

可以通过以下方式对 OnItemDataBound 事件进行操作：

```
protected void rptrSurvey_ItemDataBound(Object Sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.AlternatingItem || e.Item.ItemType == ListItemType.Item)
    {
        HtmlInputRadioButton inputYes = (HtmlInputRadioButton)e.Item.FindControl("rdoYes");
        // set value as required
    }
} 
```

# objective-c - CGImage上的Core Graphics pointillize效果

> ID：11771505
> 
> 赞同：3
> 
> 时间：2012-08-02T05:25:19.090
> 
> 标签：objective-c, ios, c, image-processing, core-graphics

所以我最近一直在写很多只使用核心图形的图像处理代码，并且我制作了很多工作过滤器来操纵颜色、应用混合、模糊和类似的东西。但是我在编写过滤器以将点图效果应用于这样的图像时遇到了麻烦：

![点画](../Images/d72c27b9bd99a08ca6fd6e050ae74ce7.png)

我想要做的是获取一个像素的颜色并用该颜色填充一个椭圆，循环遍历图像并每隔几个像素执行一次这是代码：

编辑：这是我这次的新代码，它只是在图像底部画了几个小圆圈，我像你说的那样做对了吗？

```
-(UIImage*)applyFilterWithAmount:(double)amount {

CGImageRef inImage = self.CGImage;
CFDataRef m_dataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage));
UInt8* m_pixelBuf = (UInt8*)CFDataGetBytePtr(m_dataRef);

int length = CFDataGetLength(m_dataRef);

CGContextRef ctx = CGBitmapContextCreate(m_pixelBuf,
                                    CGImageGetWidth(inImage),
                                    CGImageGetHeight(inImage),
                                    CGImageGetBitsPerComponent(inImage),
                                    CGImageGetBytesPerRow(inImage),
                                    CGImageGetColorSpace(inImage),
                                    CGImageGetBitmapInfo(inImage));

int row = 0;
int imageWidth = self.size.width;

if ((row%imageWidth)==0) {
    row++;
}

int col = row%imageWidth;

for (int i = 0; i<length; i+=4) {
    //filterPointillize(m_pixelBuf, i, context);

    int r = i;
    int g = i+1;
    int b = i+2;

    int red = m_pixelBuf[r];
    int green = m_pixelBuf[g];
    int blue = m_pixelBuf[b];

    CGContextSetRGBFillColor(ctx, red/255, green/255, blue/255, 1.0);
    CGContextFillEllipseInRect(ctx, CGRectMake(col, row, amount, amount));
}

CGImageRef imageRef = CGBitmapContextCreateImage(ctx);
CGContextRelease(ctx);
UIImage* finalImage = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);
CFRelease(m_dataRef);
return finalImage; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T21:24:30.707

我马上看到的一个问题是您正在为 X 和 Y 原点使用栅格单元编号。此配置中的栅格只是一条尺寸线。您可以根据光栅图像的宽度计算第二维。这可以解释为什么你有一条线。

另一件事：似乎您正在阅读图像的每个像素。您不想跳过您要绘制的椭圆宽度的像素吗？

接下来看起来可疑的事情是，我认为您应该在绘制*之前*创建要绘制的上下文。此外，您不应致电：

```
CGContextRef contextRef = UIGraphicsGetCurrentContext();
CGContextSaveGState(contextRef); 
```

和

```
CGContextRestoreGState(contextRef); 
```

循环内。

编辑：

进一步观察：您读取的 RGB 值为 0-255，并且该`CGContextSetRGBFillColor`函数期望值介于 0.f - 1.f 之间。这可以解释为什么你变白了。所以你需要除以 255：

```
CGContextSetRGBFillColor(contextRef, red / 255, green / 255, blue / 255, 1.0); 
```

如果您还有其他问题，请不要犹豫！

编辑2：

要计算行，首先在循环外声明一个行计数器：

```
int row = 0; //declare before the loop

int imageWidth = self.size.width; //get the image width

if ((i % imageWidth) == 0) { //we divide the cell number and if the remainder is 0
                             //then we want to increment the row counter
    row++;
} 
```

我们也可以使用 mod 来计算当前列：

```
int col = i % imageWidth; //divide i by the image width. the remainder is the col num 
```

编辑 3：你必须把它放在 for 循环中：

```
if ((row%imageWidth)==0) {
    row++;
}

int col = row%imageWidth; 
```

另外，我之前忘了提到，要使列和行基于 0（这是您想要的），您需要从图像大小中减去 1：

```
 int imageWidth = self.size.width - 1; 
```

# android - 使用处理程序从服务更新活动

> ID：11771506
> 
> 赞同：3
> 
> 时间：2012-08-02T05:25:25.497
> 
> 标签：android, handler

**当服务**中发生事件时，`ToggleButton`我想更改**Activity**中的状态。有人可以帮我使用**Handler**来实现吗？我的意思是我应该在哪里编写代码来创建处理程序以及如何从服务中触发它？我读过类似的帖子，但是它们对实现这一目标并没有真正的帮助。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:42:28.803

在您的活动中

```
public class MyActivity extends Activity {
    public static Runnable runnable;
        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

           runnable=new Runnable(){

            @Override
            public void run() {
            //Change status here

            }

           }; 
```

从服务

```
Handler handler=new Handler();
handler.post(MyActivity.runnable); 
```****

# java - java中的模式/数组问题

> ID：11771512
> 
> 赞同：0
> 
> 时间：2012-08-02T05:25:46.540
> 
> 标签：java, regex, arrays

我正在为下个月即将到来的考试而学习，并研究一些基本问题。这是一个程序，需要输入几个句子并重新打印包含特定字符串的任何句子，在这种情况下为“模式”。

我的尝试如下，它编译但是我在尝试运行它时收到以下错误：

> ```
>  Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 10
> at Grep.main(Grep.java:18) 
> ```

```
import java.util.Scanner;
import java.io.*;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

class Grep {

    public static void main(String[] args) {

        Pattern pattern = Pattern.compile("[Pp]attern");
        String sentences[] = new String[10];
        Scanner scanner = new Scanner(System.in); 

        System.out.println("Please enter some sentences: ");

        for (int i = 0; i <= sentences.length; i++) {
            String s = scanner.next(); 
            sentences[i] = s;
        }

        for (int i = 0; i < sentences.length; i++) { 
            Matcher matcher = pattern.matcher(sentences[i]);
            while (matcher.find()) {
                System.out.println(sentences[i]);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:27:55.540

```
for (int i = 0; i <= sentences.length; i++) { 
```

数组中有多少项？最后的索引是什么？您的循环使用的最后一个索引是什么？您的循环总共访问了多少句？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:28:08.083

```
for (int i = 0; i <= sentences.length; i++) { 
```

`<=`需要是`<`因为你从 0 开始并且你有 10 个项目，所以必须`i`从 0 到 9。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:29:01.520

尝试

```
for (int i = 0; i < sentences.length; i++) 
```

你会没事的:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:33:02.640

问题出在`:18`您的代码中`for (int i = 0; i <= sentences.length; i++)`，应该是`for (int i = 0; i < sentences.length; i++)`

正如您在代码中的**下一个** `for`循环中使用`<`的那样，而不是`<=`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T05:34:39.013

试试这个。有用。

提示：确保使用 nextLine() 以便输入将读取完整的句子。我将您的 while 循环切换为 for 循环中的 if 语句。那里不需要两个循环。而且我还将您的第一个 for 循环压缩为一行。如果您只需要一秒钟，则无需创建字符串变量。完全跳过这一步，直奔主题！祝你好运，希望这会有帮助！

**下面是一个反映你但现在可以工作的程序**

```
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Grep 
{
    public static void main(String[] args) 
    {
        Pattern pattern = Pattern.compile("[Pp]attern");
        String sentences[] = new String[3];
        Scanner scanner = new Scanner(System.in);

        System.out.println("Please enter some sentences: ");

        for (int i = 0; i < sentences.length; i++) 
            sentences[i] = scanner.nextLine();

        for (int i = 0; i < sentences.length; i++) 
        { 
            Matcher matcher = pattern.matcher(sentences[i]);
            if (matcher.find()) 
                System.out.println(sentences[i]);
        }
    }
} 
```

**下面是我将如何编写这个相同的程序。包含用于澄清的评论**

```
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Grep 
{
    public static void main(String[] args) 
    {
        // Initialize and Declare Variables
        Pattern pattern = Pattern.compile("[Pp]attern");
        String sentences[] = new String[3];
        Scanner scanner = new Scanner(System.in);
        int foundCount = 1;

        // Present A Title For The End User
        System.out.println("This Program Will Catch Sentences With The Term Pattern.\n");

        // Read The Inputs From The Users
        for (int i = 0; i < sentences.length; i++)
        {
            System.out.print("Enter Sentence #" + (i+1) + ":  ");
            sentences[i] = scanner.nextLine();
        }

        // Line Break
        System.out.println();

        // Write Sentences That Include The Term Pattern
        for (int i = 0; i < sentences.length; i++) 
        { 
            Matcher matcher = pattern.matcher(sentences[i]);
            if (matcher.find())
            {
                System.out.println(foundCount + ")  " + sentences[i]);
                foundCount++;
            }
        }
    }
} 
```

# jquery - AngularJS + JQuery：如何在 angularjs 中获取动态内容

> ID：11771513
> 
> 赞同：84
> 
> 时间：2012-08-02T05:25:47.037
> 
> 标签：jquery, angularjs

我正在使用 jQuery 和 AngularJS 开发 Ajax 应用程序。

当我使用 jQuery 的函数更新 div 的内容（包含 AngularJS 绑定）时`html`，AngularJS 绑定不起作用。

以下是我正在尝试做的代码：

```
$(document).ready(function() {
  $("#refreshButton").click(function() {
    $("#dynamicContent").html("<button ng-click='count = count + 1' ng-init='count=0'>Increment</button><span>count: {{count}} </span>")
  });
});
```

```
</style><script src="http://docs.angularjs.org/angular-1.0.1.min.js"></script><style>.ng-invalid {
  border: 1px solid red;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<div ng-app="">
  <div id='dynamicContent'>
    <button ng-click="count = count + 1" ng-init="count=0">
        Increment
      </button>
    <span>count: {{count}} </span>
  </div>

  <button id='refreshButton'>
    Refresh
  </button>
</div>
```

我在 ID 的 div 中有动态内容`#dynamicContent`，并且我有一个刷新按钮，当单击刷新时会更新此 div 的内容。如果我不刷新内容，增量会按预期工作，但在我刷新后，AngularJS 绑定停止工作。

这在 AngularJS 中可能无效，但我最初使用 jQuery 构建应用程序，后来开始使用 AngularJS，所以我无法将所有内容迁移到 AngularJS。非常感谢任何帮助在 AngularJS 中工作的帮助。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-02T15:17:33.460

您需要`$compile`在将 HTML 字符串插入 DOM 之前调用它，以便 Angular 有机会执行绑定。

在你的小提琴中，它看起来像这样。

```
$("#dynamicContent").html(
  $compile(
    "<button ng-click='count = count + 1' ng-init='count=0'>Increment</button><span>count: {{count}} </span>"
  )(scope)
); 
```

显然，`$compile`必须将其注入您的控制器才能使其正常工作。

[`$compile`在文档](http://docs.angularjs.org/api/ng.$compile)中阅读更多内容。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-06-05T11:15:07.843

**万一您无法控制动态内容的另一种解决方案**

如果您没有通过指令加载元素（即，如注释 jsfiddles 中的示例），则此方法有效。

**总结您的内容**

**将您的内容包装在 div 中，以便在使用JQuery**时可以选择它。您还可以选择使用本机 javascript 来获取您的元素。

```
<div class="selector">
    <grid-filter columnname="LastNameFirstName" gridname="HomeGrid"></grid-filter>
</div> 
```

**使用角度注入器**

如果您没有 $compile，您可以使用以下代码获取对 $compile 的引用。

```
$(".selector").each(function () {
    var content = $(this);
    angular.element(document).injector().invoke(function($compile) {
        var scope = angular.element(content).scope();
        $compile(content)(scope);
    });
}); 
```

**概括**

原始帖子似乎假设您有一个方便的 $compile 参考。当您有参考资料时，这显然很容易，但我没有，所以这就是我的答案。

**前面代码的一个警告**

如果您使用带有 minify 场景的 asp.net/mvc 包，则在发布模式下部署时会遇到麻烦。问题以 Uncaught Error: [$injector:unpr] 的形式出现，这是由 minifier 与 angular javascript 代码混淆引起的。

**以下是补救方法**：

用以下重载替换前面的代码片段。

```
...
angular.element(document).injector().invoke(
[
    "$compile", function($compile) {
        var scope = angular.element(content).scope();
        $compile(content)(scope);
    }
]);
... 
```

在我把它拼凑起来之前，这给我带来了很多悲伤。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-11-05T07:26:26.340

除了@jwize 的回答

因为`angular.element(document).injector()`给出了错误`injector is not defined` 所以，我创建了可以在 AJAX 调用之后或使用 jQuery 更改 DOM 时运行的函数。

```
 function compileAngularElement( elSelector) {

        var elSelector = (typeof elSelector == 'string') ? elSelector : null ;  
            // The new element to be added
        if (elSelector != null ) {
            var $div = $( elSelector );

                // The parent of the new element
                var $target = $("[ng-app]");

              angular.element($target).injector().invoke(['$compile', function ($compile) {
                        var $scope = angular.element($target).scope();
                        $compile($div)($scope);
                        // Finally, refresh the watch expressions in the new element
                        $scope.$apply();
                    }]);
            }

        } 
```

通过只传递新元素的选择器来使用它。像这样

```
compileAngularElement( '.user' ) ; 
```

# replication - 容错系统设计

> ID：11771515
> 
> 赞同：0
> 
> 时间：2012-08-02T05:26:02.627
> 
> 标签：replication, state-machine, distributed-system, fault-tolerance

有一个数据库作为数据存储和 y (>5) 台其他机器。有一台机器 A 每 x 分钟有一次数据（更新）。y 台机器每 x 分钟从机器 A 获取数据，更新数据库中的数据。每台机器都这样做是为了一些容错。有没有一种干净的方法来模拟容错工作？

任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T11:09:53.893

这是一个范围非常大的问题。数据结构如何？“数据库加载器”如何从“数据生产”机器获取数据？如果更新失败会发生什么——数据是丢失还是必须不惜一切代价保留？

我将做一些假设并提出解决方案： 1\. 数据可以分区。2\. 您可以访问中央持久缓冲区。例如 MSMQ 或 WebSphere MQ。

生成数据的机器将块放入中央队列中。每个块都由一组记录 ID 和相关属性的新值组成）——您决定粒度。“db loader”监听队列并且每个出队一个块（争用只在出队阶段并且非常优化）并更新它自己的一组 id。这种方式插入工作在机器之间分配，每台机器处理自己的部分，如果一个崩溃，那么其他机器只会更努力地工作。

如果更新失败，您可以将块返回到队列并稍后重试（事务读取）。

# c# - Dynamics CRM 导致 CommunicationException

> ID：11771519
> 
> 赞同：2
> 
> 时间：2012-08-02T05:26:18.880
> 
> 标签：c#, communication, dynamics-crm-2011, dynamics-crm-online, communicationexception

我正在使用 MS Dynamics CRM api 从中获取数据（超过 5000 条记录）。

我正在使用基于 XML 的查询来获取数据

```
EntityCollection resultSet = _orgServiceProxy.RetrieveMultiple(new FetchExpression(query)); 
```

有时它会起作用，并且大多数时候它会从日志中抛出异常，我得到了这个很长的异常。

> 接收对[https://orgno.api.crm.dynamics.com/XRMServices/2011/Organization.svc](https://orgno.api.crm.dynamics.com/XRMServices/2011/Organization.svc)的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。[---> System.ServiceModel.CommunicationException: 接收到https://orgno.api.crm.dynamics.com/XRMServices/2011/Organization.svc](https://orgno.api.crm.dynamics.com/XRMServices/2011/Organization.svc)的 HTTP 响应时出错. 这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。---> System.Net.WebException：底层连接已关闭：接收时发生意外错误。---> System.IO.IOException: Unable to read data from the transport connection: 一个现有的连接被远程主机强行关闭。---> System.Net.Sockets.SocketException: 远程主机在 System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 处强制关闭现有连接 --- End of inner异常堆栈跟踪---在 System.Net.FixedSizeReader 的 System.Net.Sockets.NetworkStream.Read(Byte[] 缓冲区，Int32 偏移量，Int32 大小)。

我不知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:14:57.327

CRM 服务根本不喜欢在一个请求中检索大量数据。

我建议您使用分页 cookie 按集检索您的记录。它应该可以解决您的问题并提高代码的性能。

[你可以在这里](http://msdn.microsoft.com/en-us/library/gg327917)找到一个关于 msdn 的不错的教程。

问候，

凯文

# tfs - 在团队基础服务器中查找所有用户及其权限

> ID：11771520
> 
> 赞同：1
> 
> 时间：2012-08-02T05:26:21.347
> 
> 标签：tfs

我想在团队基础服务器中查找所有用户及其权限，但我不想一步一步点击权限管理，有没有简单的方法？谢谢！

# ruby-on-rails - 如何使用 crontab 在 ruby on rails 上运行任务 rake？（手动工作，没有 crontab）

> ID：11771521
> 
> 赞同：0
> 
> 时间：2012-08-02T05:26:33.517
> 
> 标签：ruby-on-rails, ruby, debugging, rake, crontab

我在 aws 微服务器上部署了（使用 capistrano）一个 ruby​​ on rails 项目。我在 ruby​​ 1.9.2-290 和 rails 3.2.6 上，我也使用 bundler。我在我的 opt/rails-project/lib/tasks/tasks.rake 中开发了一个任务 rake

```
namespace :myclass do
    task "my-task" => :environment do
        # do the stuff which work nicely if i enter my command line manually
    end
end 
```

这就是我在 crontab 中的称呼：

```
*/3 * * * * cd /opt/rails-project/current && /opt/rails-project/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake myclass:my-task RAILS_ENV=production >> ~/logs-my-task.txt 
```

文件 ~/logs-my-task.txt 每 3 分钟创建和更新一次。该文件仅包含 capistrano 的版本发布信息，但没有来自我的任务 rake。

正如我在我的任务 rake 的评论中所说，如果我通过 ssh 直接在服务器中启动此命令，我的任务 rake 就完成了它的工作......

我整天/晚上都在网上搜索，但无法弄清楚。

我试图从 rails 中删除 http_basic auth 但同样的问题。

希望你有想法，谢谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:27:25.250

试着把这部分

```
cd /opt/rails-project/current && /opt/rails-project/shared/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake myclass:my-task RAILS_ENV=production >> ~/logs-my-task.txt 
```

在某个文件中`somescript.sh`，授予执行权限：

```
chmod +x somescript.sh 
```

并尝试手动运行它：

```
/path/to/somescript.sh 
```

如果可行，请尝试将其放入 crontab 中：

```
*/3 * * * * /path/to/somescript.sh 
```

将复杂的东西放入脚本中以从 crontab 运行通常会有所帮助。

下一步，确保您的 shell 和 cron 的 PATH 环境变量相同。您可以在 crontab 或脚本中设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:53:47.153

在我使用了推荐的 shell 脚本`denis.peplin`并手动启动它之后，我遇到了这里描述的问题：[Ruby on Rails 和 Rake 问题：未初始化的常量 Rake::DSL](https://stackoverflow.com/questions/6085610/ruby-on-rails-and-rake-problems-uninitialized-constant-rakedsl)。

我在我的 Rakefile 中包含以下行，并让我的 crontab 和以前一样：

```
require 'rake/dsl_definition' 
```

# objective-c - 从 imp 调用 Objective-C 方法

> ID：11771523
> 
> 赞同：5
> 
> 时间：2012-08-02T05:26:46.243
> 
> 标签：objective-c, data-structures, methods, objective-c-runtime

我试图在运行时获取一个方法，然后使用它的数据结构来调用它的实现。澄清一下，这是出于学习目的，而不是出于任何实际原因。所以这是我的代码。

```
#import <Foundation/Foundation.h>
#import <stdio.h>

#import <objc/runtime.h>

@interface Test : NSObject 
-(void)method;
@end

@implementation Test

-(void)method {
    puts("this is a method");
}

@end 

int main(int argc, char *argv[]) {

    struct objc_method *t = (struct objc_method*) class_getInstanceMethod([Test class], @selector(method));
    Test *ztest = [Test new];

    (t->method_imp)(ztest, t->method_name);

    [ztest release];
    return 0;
} 
```

的定义`struct objc_method`如下（在objc/runtime.h中定义）

```
typedef struct objc_method *Method;

....

struct objc_method {
    SEL method_name                                          OBJC2_UNAVAILABLE;
    char *method_types                                       OBJC2_UNAVAILABLE;
    IMP method_imp                                           OBJC2_UNAVAILABLE;
}                                                            OBJC2_UNAVAILABLE; 
```

但是，当我尝试编译代码时，出现此错误。

`error: dereferencing pointer to incomplete type`

但是当我将它添加到我的代码中（以显式声明一个 objc_method）时，它会按预期工作。

```
struct objc_method {
    SEL method_name;
    char *method_types;
    IMP method_imp;
};

typedef struct objc_method* Method; 
```

有人可以向我解释为什么我的代码在我明确声明这个结构时有效，而不是当我从 objc/runtime.h 导入它时？它与 OBJC2_UNAVAILABLE 有什么关系吗？我找不到它的定义，但它是在我的环境中定义的。

编辑：

我跑去`gcc -E code.m -o out.m`查看 OBJC2_UNAVAILABLE 被替换为什么，结果发现 OBJC2_UNAVAILABLE 在我的环境中被定义为 __attribute__((unavailable)) 。有人可以解释这意味着什么，`Method`如果这种结构“不可用”，为什么仍然有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T05:43:25.877

我刚刚仔细查看了 objc 运行时标头，发现了问题所在，以及如何解决它：）

因此，如果您查看包含结构透明定义的文件区域，您会看到它位于以下内容的主体中：

```
#if !__OBJC2__

...

#endif 
```

由于这个 IS 已定义，这意味着我们所指的结构实际上是前向声明且不透明的（因此不完整）。

我们必须做的是使用提供的函数来访问这些成员：

```
IMP method_getImplementation(Method method);
SEL method_getName(Method method);
void method_getReturnType(Method method, char *dst, size_t dst_len); 
```

等等。

[您可以在Runtime Reference Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)中查看访问器方法的完整列表和许多其他好东西。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T05:51:13.400

它的字段是之前定义的，但它在 ObjC-2 中是不透明的类型。请改用运行时，不要自己定义字段：

```
int main(int argc, char *argv[]) {

    Method t = class_getInstanceMethod([Test class], @selector(method));
    Test * ztest = [Test new];

    IMP imp = method_getImplementation(t);

    typedef void (*fn)(id,SEL);
    fn f = (fn)imp;
    f(ztest,@selector(method));

    [ztest release];
    return 0;
} 
```

# php - PHP 游戏 Sql 问题

> ID：11771526
> 
> 赞同：1
> 
> 时间：2012-08-02T05:27:12.997
> 
> 标签：php, sql, game-engine

我需要有关此代码的帮助，我需要它在成员下的 Gangs 中添加一个数组并将它们分开 -

我需要将帮派中的每个成员都列在“成员”下并与之分开——这样我就可以在下面分解它们。

这是将成员添加到帮派但没有加入的行 - 我认为它会删除已经存在的成员。

```
$result = mysql_query("UPDATE Gangs SET members='".$name."'WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'")
or die(mysql_error()); 
```

完整代码

```
if(isset($_POST['creategang'])){

if(empty($_POST['gang_name'])){ 
echo "Enter a Gang Name.";
} else {

if (strlen($_POST['gang_name']) > "20"){
echo "The username may not consist out of more then 20 characters.";
}else{

if (ereg('[^A-Za-z0-9]', $_POST['gang_name'])) {
echo "Invalid Name only A-Z,a-z and 0-9 is allowed.";
}else{
$sql = "SELECT name FROM Gangs WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'";
$query = mysql_query($sql) or die(mysql_error());
$m_count = mysql_num_rows($query);

if($m_count >= "1"){
echo 'This name has already been used.!';
}else{
$sql = "INSERT INTO Gangs SET name = '".$_POST['gang_name']."' , owner= '$name'";

$res = mysql_query($sql);

$result = mysql_query("UPDATE users SET gang='".mysql_real_escape_string($_POST['gang_name'])."' WHERE id='" .mysql_real_escape_string($_SESSION['user_id']). "'") 
or die(mysql_error());

$result = mysql_query("UPDATE Gangs SET members='".$name."'WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'")
or die(mysql_error());

echo 'Gang successfully created!';
}
}
}
}
}
?> 
```

这是我将用来分隔数组的代码

```
$Gang_array = explode("-", $Gang_members); 
```

感谢您查看我的问题，并提前感谢您帮助我

添加到帮派的新代码

```
<? include_once("connect.php"); ?>

<?
if(isset($_SESSION['user_id'])) {
 // Login OK, update last active

 $sql = "UPDATE users SET lastactive=NOW() WHERE id='".mysql_real_escape_string($_SESSION['user_id'])."'";
 mysql_query($sql);

}else{
   header("Location: index.php");
     exit();
 }
$sql = "SELECT * FROM users WHERE id='".mysql_real_escape_string($_SESSION['user_id'])."'";
$query = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_object($query);
$id = htmlspecialchars($row->id);
$userip = htmlspecialchars($row->userip);
$name = htmlspecialchars($row->name);
$sitestate = htmlspecialchars($row->sitestate);
$password = htmlspecialchars($row->password);
$mail = htmlspecialchars($row->mail);
$money = htmlspecialchars($row->money);
$exp = htmlspecialchars($row->exp);
$rank = htmlspecialchars($row->rank);
$health = htmlspecialchars($row->health);
$points = htmlspecialchars($row->points);
$profile = htmlspecialchars($row->profile);
$gang = htmlspecialchars($row->gang);
?>

<?php 
$sql = "SELECT * FROM Gangs WHERE name='".mysql_real_escape_string($_GET['name'])."'";
$query = mysql_query($sql)  or die(mysql_error());
$row = mysql_fetch_object($query);
$Gang_name = htmlspecialchars($row->name);
$Gang_owner = htmlspecialchars($row->owner);
$Gang_money = htmlspecialchars($row->money);
$Gang_exp = htmlspecialchars($row->exp);
$Gang_level = htmlspecialchars($row->level);
$Gang_members = htmlspecialchars($row->members);
$Gang_array = explode("-", $Gang_members);

$Gang_profile = htmlspecialchars($row->profile);

?>
<div id="content" class="profile">
    <h2>Gang Profile</h2>
<form method="post" >
<input type="submit" name="Petition" id="Petition" value="Petition">
</form>
<center>
<h1><?php echo $Gang_name; ?></h1>
Owner: <?php echo $Gang_owner; ?><br>
Gang Cash: $<?php echo $Gang_money; ?><br>
Gang Exp: <?php echo $Gang_exp; ?><br>
Gang Level: <?php echo $Gang_level; ?><br>
Gang Members: <?php echo $Gang_array; ?><br>
</center><br>
<p>Gang Quote</p>
<div id="UserText">
      <?php
    $Gang_profile = htmlentities($Gang_profile);
    $Gang_profile = nl2br($Gang_profile); 
    $Gang_profile = stripslashes($Gang_profile);
    echo $Gang_profile; ?>
</div>
</div>

<? 
if (isset($_POST['Petition'])) {
$result = mysql_query("SELECT members FROM Gangs 
      WHERE name='".$Gang_name."'");
if ($result) {
      while($row = mysql_fetch_assoc($result)) {
           $members = $row['members'];
      }
}
if ($members != '') $members .= '-'.$name;
else $members = $name;
$result = mysql_query("UPDATE Gangs SET members='".$members."' WHERE name='".$Gang_name."'");

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T07:51:22.687

伪代码，但这应该可以工作：

```
$result = mysql_query("UPDATE Gangs SET members = members + '-' + '".$name."'WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'")
or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T10:06:27.393

如果我正确理解你的问题。你可以试试这个：

首先获取成员：

```
$result = mysql_query("SELECT members FROM Gangs 
      WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'");
if ($result) {
      while($row = mysql_fetch_assoc($result)) {
           $members = $row['members'];
      }
} 
```

然后添加新成员并更新：

```
//This is to check whether $name is already in the gangs
if (strpos($members,$name) !== false) {
    if ($members != '') $members .= '-'.$name;
    else $members = $name;

    //Update to gangs
    $result = mysql_query("UPDATE Gangs SET members='".$members."' WHERE name='".mysql_real_escape_string($_POST['gang_name'])."'");
}
else sprintf("%s is in the gangs already",$name); 
```

希望能帮助到你。

# javascript - jQuery 和 HTML5 拖放到表格中（调度程序）

> ID：11771531
> 
> 赞同：5
> 
> 时间：2012-08-02T05:28:12.917
> 
> 标签：javascript, jquery, html, drag-and-drop

我一直在使用 jsfiddle.net 来尝试制作一个调度程序的原型，将要调度的项目拖放到其中。我已经从“未分配”列表中拖放到工作计划表上。我还能够从日程表中删除工作。我很难理解是将桌子上的一个项目移动到桌子的另一部分。

小提琴位于[此处](http://jsfiddle.net/VYWKq/14/)。对于让内部拖放工作的任何建议，我将不胜感激。我整天都在做这件事，而且我的视力开始模糊。哦，无论如何，如果你认为我正在做的事情可以做得更好，请做出改变，让我知道小提琴的版本。

**更新**

根据@SMathew 和@darksky 我已经重建了整个小提琴，我没有直接移动表格单元格，而是它们的内容。

我知道你们推荐使用`div`s 和/或`span`s，但我想使用表格的结构，尤其`rowspan`是以 30 分钟为增量指定单元格的高度。它现在确实工作得更好，唯一的错误是移动单元格（或更多它们的内容），因为我必须`rowspan`在源站点恢复受 影响的单元格并删除与`rowspan`目标站点冲突的单元格。

更新的小提琴可以在[这里](http://jsfiddle.net/BQqfd/7/)找到。

**更新 2（最终）**

所以，我又回到了绘图板上，在 64 次小提琴之后，我终于让它做我想做的事。最后，在不操纵表结构的情况下让一切正常工作的诀窍。我所要做的就是将行跨度的单元格设置为`display: hidden`.

无论如何，对于任何感兴趣的人，新的小提琴就[在这里](http://jsfiddle.net/MtypZ/64/)。我确实发现 Chrome 在处理 API 时存在一些问题。我已经在小提琴中注意到了它们（以及部分咆哮）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T06:22:41.317

问题是您正试图使 td 元素可拖动。当您从这样的表格中删除/插入 td 元素时，您必须创建一堆空单元格来平衡它。我建议保持表格完整，并将可拖动元素包装在 div 或 span 标签中。这样表结构永远不会改变。您的代码也将更加简单和高效。

# ruby-on-rails - 设计 before_filter 验证不起作用

> ID：11771532
> 
> 赞同：0
> 
> 时间：2012-08-02T05:28:16.180
> 
> 标签：ruby-on-rails, devise

我有一个名为 Member 的模型，它是 database_authenticable。但是，当我使用：

```
before_filter :authenticate_member! 
```

在控制器中我得到一个未定义的方法错误。

关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:43:15.170

不管出于什么原因，我需要跑步

```
rails g devise member 
```

再次解决问题。

# javascript - facebook API如何调用onlogin

> ID：11771534
> 
> 赞同：8
> 
> 时间：2012-08-02T05:28:15.760
> 
> 标签：javascript, html, facebook, facebook-graph-api, facebook-javascript-sdk

谁能告诉我 FB API 是如何工作的。这看起来是一个基本问题，但我真的很困惑。

问题：我有onlogin()。当我单击登录按钮时，我希望它会调用此函数。但是在我粘贴的代码中：我看到先打印警报测试，然后调用 FB.api。

因此，看起来首先调用了onlogin，然后调用了FB API ...有没有办法我只能调用这个函数一次。

```
<body>
        <div id="fb-root"></div>
<script>

      window.fbAsyncInit = function() {
          FB.init({appId: 'XXX', status: true, cookie: true, xfbml: true});

      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

    function checkFacebookLogin() {
    FB.api('/me', function(response) {
        alert("Name: "+ response.name + "\nFirst name: "+ response.first_name + "ID: "+response.id);
    });

    alert('test');

    }

    </script>

 <p id="fb_login_button_1"><fb:login-button  onlogin="checkFacebookLogin();"  size="medium" scope="user_about_me">Sign in using Facebook</fb:login-button></p>

</body>v 
```

我的主要问题是该函数应该只被调用一次......但它被调用了两次。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-07T05:52:57.833

```
 <body>
        <div id="fb-root"></div>
<script>

      window.fbAsyncInit = function() {
          FB.init({appId: 'XXX', status: true, cookie: true, xfbml: true});

      };
      (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());

    function fetchUserDetail()
    {
        FB.api('/me', function(response) {
                alert("Name: "+ response.name + "\nFirst name: "+ response.first_name + "ID: "+response.id);
            });
    }

    function checkFacebookLogin() 
    {
        FB.getLoginStatus(function(response) {
          if (response.status === 'connected') {
            fetchUserDetail();
          } 
          else 
          {
            initiateFBLogin();
          }
         });
    }

    function initiateFBLogin()
    {
        FB.login(function(response) {
           fetchUserDetail();
         });
    }
    </script>

 <input type="button" value="Sign in using Facebook" onclick="checkFacebookLogin();"/>

</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T05:41:44.670

对 FB API 的请求调用是异步的。这意味着一旦发送请求，代码将不会等待请求完成。因此，您会在返回 API 调用之前获得警报测试。所有 FB API 调用都是异步的，如果您尝试使它们同步，那么您的浏览器将挂起。

谢谢考希克

# javascript - 向另一个域发送 javascript 请求并获得响应 - 不在 jsonp 中

> ID：11771540
> 
> 赞同：0
> 
> 时间：2012-08-02T05:28:51.997
> 
> 标签：javascript, ajax, json, jsonp

我真的在这里撞了一天多，我正在尝试发送请求并从另一个站点获得响应。我正在用 jsonp 做这件事（原因很明显）。但响应不是 JavaScript 函数定义，所以它一直失败。

这个星球上的任何人都可以帮助我以正确的方式得到回应。

我再次附上了我写的代码：因为响应不在 json 中，所以它不起作用。（尝试自己运行它，你会看到）。

有什么建议么？

```
<script>
function test()
{
  $.ajax({
      dataType: 'jsonp',
      jsonp: 'jsonp_callback',
      url: 'https://www.facebook.com/ajax/typeahead/first_degree.php?viewer=1000009843914&token=1-1&filter[0]=user&options[0]=pending_request&lazy=1&token=v7&stale_ok=1&__a=1&__user=1000009843914&    viewer=1000009843914',
  });
}
function jsonp_callback(data)
{

 var val=JSON.stringify(data);
 myString = val.slice( 11 );
 $('#container').html(myString);

/*for (;;);*/
 }
 test();
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:59:48.007

必须对服务器进行编程以在其脚本文件中包含 JSONP 回调。如果它只知道返回 JSON，那么当动态脚本标签插入页面时，它不会有任何效果，因为 JSON 最多可以提供一个对象——但它不会去任何地方，除非同一个文件调用该函数。通过这种方式，它与 Ajax 不同，因为动态插入的脚本标记只有在知道调用您的函数之一时才能与您自己的代码交互。举个例子，它可能会返回：

```
jsonp_callback({facebooKData:[...]}); 
```

您应该调查 Facebook API 如何支持 JSONP（而不仅仅是 JSON），无论您尝试做什么。通常，API 将接受一个“回调”变量来确定它应该使用哪个回调函数（哪个 jQuery 为您处理）。

# python - 使用 ctypes 在 python 中的 c 数据类型上的 Seg 错误

> ID：11771548
> 
> 赞同：0
> 
> 时间：2012-08-02T05:29:37.197
> 
> 标签：python, ctypes

我很新`ctypes`。尝试使用 ctypes，因为我想使用 libquicktime 库将文本轨道插入到使用 python 的电影中。我正在尝试以下操作，但出现了段错误。我认为正如[文档](http://libquicktime.sourceforge.net/doc/apiref/group__text__encode.html#gad399707ef885b3643f9bbee2890f0946)所说，我应该通过`ins64_t`持续时间（在我的情况下，随机数 123 用于测试）。想知道如何定义`int64_t`var：

```
>> import ctypes    
>> lqt = ctypes.cdll.LoadLibrary('libquicktime.so.0')    
>> qth = lqt.quicktime_open('/home/blah/movies/Test.018699.mov', 0, 1)    
>> lqt.lqt_add_text_track(qth)    
0    
>> lqt.lqt_set_text_language(qth, 1, 'eng')    
0    
>> lqt.lqt_write_text(qth, 1, 'test message', 123)
Segmentation fault 
```

如果有人能解释我如何在 python 中映射 (int64, uint64) 这样的数据类型，那将非常有帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:42:26.090

您可以使用[函数原型](http://docs.python.org/library/ctypes.html#specifying-the-required-argument-types-function-prototypes)来检查参数。

`int64_t`是 `ctypes.c_int64`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T13:38:54.893

在调用函数之前定义函数的参数类型。

```
lqt.lqt_write_text.argtypes = [ctypes.c_void_p,ctypes.c_int,ctypes.c_char_p,ctypes.c_int64]
lqt.lqt_write_text.restype = None
lqt.lqt_write_text(qth, 1, 'test message', 123) 
```

请注意，不透明类型`quicktime_t`可以只替换 void 指针作为类型。

# php - 如何使用 PHP 替换字符串中的开始和结束 h1 标签？

> ID：11771554
> 
> 赞同：0
> 
> 时间：2012-08-02T05:30:31.640
> 
> 标签：php, preg-replace, str-replace

我已经`<h1>`从网页中捕获了标签及其内部内容，我需要删除字符串的`<h1>`和`</h1>`部分。问题是我不知道标签是否写成`<h1>`or`<h1 id="something">`等​​。我知道我可以写

```
$tag = str_replace("<h1>", '', $tag);
$tag = str_replace("</h1>", '', $tag); 
```

但是我该如何处理更一般的情况，它可能在哪里`<h1 id="something">`，或者其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:33:45.353

看`strip_tags` [http://php.net/manual/en/function.strip-tags.php](http://php.net/manual/en/function.strip-tags.php)

# javascript - 多个相同时间间隔的 setTimeout() 函数的执行顺序

> ID：11771558
> 
> 赞同：32
> 
> 时间：2012-08-02T05:31:05.023
> 
> 标签：javascript

考虑以下 Javascript 代码：

```
function(){
    setTimeout(function() {
        $("#output").append(" one ");
    }, 1000);
    setTimeout(function() {
        $("#output").append(" two ");
    }, 1000);
} 
```

您还可以在[jsfiddle](http://jsfiddle.net/EbzHF/)上查看此示例。

我可以确定的值`#output`always `"one two"`，按那个顺序吗？通常，我会这样处理这个问题：

```
function(){
    setTimeout(function() {
        $("#output").append(" one ");
        $("#output").append(" two ");
    }, 1000));
} 
```

但我不能那样做，因为我从服务器获取消息，告诉我要执行哪个函数（在本例中为 append`"one"`或 append `"two"`），我必须稍微延迟执行。

我已经在 Internet Explorer 9、Firefox 14、Chrome 20 和 Opera 12 中测试过这段代码，并且输出总是`"one two"`，但我可以确定这将永远是这种情况吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T20:21:25.633

规范在[这里](http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout)。

我对第 7.3 节中第 8 步的解释*是*应该保证`setTimeout`执行顺序。

 *但是，我调查了这个问题，因为当窗口在 Chrome 中最小化然后最大化时，我发现来自外部源（如 websockets 或 webworkers）的事件中设置的超时以错误的顺序执行。我认为这是一个浏览器错误，并有望很快得到修复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T05:47:09.943

在你的小提琴中玩这个

```
$(document).ready(function() {
    setTimeout(function() {
        $("#output").append(" one ");
    }, 1000);
});
$(document).ready(function() {
    setTimeout(function() {
        $("#output").append(" two ");
    }, 999);
});​ 
```

你会看到两者

```
output: one two
output: two one 
```

是可能的。所以 Speransky 是对的，你不能总是依赖于你的超时以相同的顺序执行。

请注意，我用 1ms 更改了一次，以表明超时 1000ms 可以在 999ms 超时之前执行。

编辑：下面的代码可能会延迟执行，而`two`之前没有任何机会打印`one`

```
function(){
    setTimeout(function() {
        $("#output").append(" one ");
       setTimeout(function() {
           $("#output").append(" two ");
       }, 100);
    }, 1000);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T05:33:38.143

*不，你不能确定。它是异步的。*

但实际上它可能会是真的，因为在浏览器中实现了该机制。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T05:45:45.017

是的，因为 javascript 代码是在一个线程中执行的，所以所有异步事件，如`click`, `mousemove`，都会排队等待执行。当您调用`setTimeout`时，引擎会在其队列中插入一个计时器以在将来执行，至少在某个`delay`时间之后执行。所以两者`setTimeout`生成了两个定时器，一个接一个。

你可以看看John Resig 的[How Javascript Timers Work](http://ejohn.org/blog/how-javascript-timers-work/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T05:36:32.807

是的，输出将始终为`"one two"`.

因为第一个`setTimeout`总是在第二个之前运行`setTimeout`，如果它们有相同的延迟时间，那么第一个的回调函数总是在第二个的回调函数之前执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T06:55:14.923

**更新**
我已经用这种方法更新了你的小提琴。[在这里查看](http://jsfiddle.net/EbzHF/1/)

这个方法怎么样——从你的服务器获取要做的事情列表——

```
//Example - append one, append two
var appendList = ['one', 'two']

//then do this
appendList.forEach(function(item, index){
    setTimeout(function(){ 
        $('#output').append(item)
    }, index * 50 + 1000);
}); 
```

这样，您就可以决定顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-13T13:48:17.723

如果事件是同步的，则有`Continuum`按顺序运行函数的功能：

```
function keyedSequence(key, fn) {
  fn = fn || this;
  key.push({fn:fn});

  return function() {
    for(var i=0, n, full=1; i<key.length; i++) {
      n = key[i];
      if(n.fn == fn) {
        if(!n.called) n.called = 1, n.args = key.slice.call(arguments);
        if(!full) break
      }
      if(!n.called) full = 0
    }

    if(full) for(i=0; i<key.length; i++)
      n = key[i], key[i] = {fn:n.fn}, n.fn.apply(n, n.args);
  }
}
Function.prototype.seq = keyedSequence; 
```

您提供一个空数组作为键。使用相同键键入的功能将组合在一起。

```
window.onload = function() {
  var key = [];
  document.getElementById("test1").addEventListener('click', function1.seq(key), false);
  document.getElementById("test2").addEventListener('click', function2.seq(key), false);
} 
```

单击`test2`，然后单击`test1`，执行顺序仍然是`function1`then `function2`。

另一种调用方式是：

```
window.onload = function() {
  var key = [];
  document.getElementById("test1").addEventListener('click', keyedSequence(key, function1), false);
  document.getElementById("test2").addEventListener('click', keyedSequence(key, function2), false);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-10T23:17:19.160

这取决于浏览器，因为 setTimout 是浏览器中窗口对象的一部分，而不是在 ECMAScript 中定义。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-17T00:13:19.867

根据规范，具有[相同的任务源](https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#timer-task-source)，并且应该订购具有相同任务源的东西。所以是的。*

# iphone - 铿锵声：错误：-Z-reserved-lib-stdc++

> ID：11771560
> 
> 赞同：0
> 
> 时间：2012-08-02T05:31:10.113
> 
> 标签：iphone, xcode

我正在从 4.3 迁移到 xCode preview45 在链接我的 coreplot 库时，我得到了这个，我在过去 5 天以来一直在尝试解决这个问题。

请建议我应该怎么做才能克服这个问题。铛：

```
clang: error: -Z-reserved-lib-stdc++: 'linker' input unused when '-c' is present
Command /Volumes/Xcode 1/Xcode45-DP3.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

我尝试更改 C/C++ 编译器、链接器标志等，到目前为止没有任何效果。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:11:07.757

解决此问题的最简单方法是使用 Mercurial 提取最新代码。如果您不想这样做，则需要删除几个编译器标志并进行一些其他更改。[在此处](http://code.google.com/p/core-plot/source/detail?r=aec950cf712874e991ca459d2e20ab2dc17135a6)和[此处](http://code.google.com/p/core-plot/source/detail?r=13a73adc4adc5fb01d2baa367996e7e1093c9d50)查看必要的更改。

# perl - CGI::Application 应用程序的 nginx fastcgi 配置

> ID：11771564
> 
> 赞同：4
> 
> 时间：2012-08-02T05:32:25.823
> 
> 标签：perl, nginx, cgi-application

我正在尝试让 C::A 应用程序在 nginx fastcgi 环境（debian 6.0）中工作并使用 spawn-fcgi。

C::A 路由配置使用`$self->mode_param( path_info=> 1, param => 'rm' );`

问题是无论我请求什么 C::A 应用程序网址（等），它总是显示主页，这就是它`example.com/cities`所做的。`example.com/profile/99``example.com/index.pl`

我的 nginx 设置是

```
server {
    listen   80;
    server_name example.com;
    root /var/www/example.com/htdocs;
    index  index.pl index.html;

    location / {
        try_files $uri $uri/ /index.pl;
    }

    location ~ .*\.pl$ {
            include fastcgi_params;   # this is the stock fastcgi_params file supplied in debian 6.0
            fastcgi_index index.pl;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PERL5LIB "/var/www/example.com/lib";
            fastcgi_param CGIAPP_CONFIG_FILE "/var/www/example.com/conf/my.conf";
            fastcgi_pass unix:/var/run/fcgiwrap.socket;
    }

} 
```

我已经以类似的方式成功设置了几个 php 应用程序。

但是，在这种情况下，我怀疑我没有将必要的内容传递`fastcgi_param`给它所要求的 C::A。

你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T14:44:48.017

我维护 CGI::Application 并使用 Nginx。我没有做过同样的事情，但我会试试这个：

```
fastcgi_split_path_info ^(/index.pl)(.*)$;
fastcgi_param PATH_INFO $fastcgi_path_info;
fastcgi_param SCRIPT_NAME $fastcgi_script_name; 
```

这应该捕获并转发您需要的 PATH_INFO。

参考：

*   [官方 Nginx FastCGI 文档](http://wiki.nginx.org/HttpFastcgiModule#fastcgi_split_path_info)
*   [带有示例的相关博客文章](http://flask.pocoo.org/docs/deploying/fastcgi/) *这不适用于 CGI::App，但我认为它足够接近以提供帮助。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T04:27:10.493

我最终在我的 C::A 应用程序中解决了这个问题。我在这里记录它。

所以我没有设法让 nginx`PATH_INFO`向下传递给我的 C::A 应用程序。为了解决这个问题，我在我的 C::A 应用程序中设置了`PATH_INFO`的值，`REQUEST_URI`以便它选择正确的运行模式。

此外，nginx 也没有通过`QUERY_STRING`，所以我必须附加`$query_string`到 catch all 路线才能向下传递`QUERY_STRING`。

我的 nginx 配置最终是这样的：

```
server {
    listen   80;
    server_name example.com;
    root /var/www/example.com/htdocs;
    index  index.pl index.html;

    location / {
        try_files $uri $uri/ /index.pl?$query_string;
    }

    location ~ .*\.pl$ {
            include fastcgi_params;   # this is the stock fastcgi_params file supplied in debian 6.0
            fastcgi_index index.pl;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            fastcgi_param PERL5LIB "/var/www/example.com/lib";
            fastcgi_param CGIAPP_CONFIG_FILE "/var/www/example.com/conf/my.conf";
            fastcgi_pass unix:/var/run/fcgiwrap.socket;
    }

} 
```

# css - CSS 3D 变换角度问题

> ID：11771565
> 
> 赞同：5
> 
> 时间：2012-08-02T05:32:28.830
> 
> 标签：css, css-transforms

我正在使用 CSS3 在 div 上执行以下转换：

`'-webkit-transform' : 'rotateX(45deg) rotateZ(-45deg)'`

结果是这样的：

![在此处输入图像描述](../Images/ba26d8e3472200c1693ea2bc3fe36d98.png)

或者就像这个小提琴：http: [//jsfiddle.net/kteSW/](http://jsfiddle.net/kteSW/)

正如我们在这里看到的，角度是 36 度，而不是 30 度（sin45*sin45）。有谁知道这个问题的原因？这是有意的还是 CSS3 错误？

* * *

更新：

我已经将参数设置为：

`-webkit-transform-style: preserve-3d; -webkit-perspective: none;`

所以一切都应该以正交的方式呈现。但是，角度仍然不是30度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T09:51:11.057

我们试图实现的是计算当我们从 (1, 1, 1) 看 (0, 0, 0) 时眼睛和 Z 轴之间的角度。

事实上`(90 deg) - arctan(1 / sqrt(2)) = 54.7356103 deg`，事实并非如此`45deg`。

# joomla - joomla 自动生成的 CSS 类

> ID：11771567
> 
> 赞同：0
> 
> 时间：2012-08-02T05:32:51.217
> 
> 标签：joomla

我想做一个新的 joomla 模板，我加入了，但我现在很困惑。
我想知道 joomla 自动生成的 css 类列表在哪里。

例如，我在模板中插入一个模块，菜单标题的 css 类是什么，搜索输入框的 css 类是什么，main 中 readmore 链接的默认 css 类是什么。
我在 joomla doc 中找到了一些，但我想要整个列表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:20:13.270

我不明白您是如何准备制作一个比普通 CSS 模板复杂得多的 Joomla 模板，但您却找不到必要的 CSS 文件。你说你想制作一个新模板，所以你不应该**知道**你把 CSS 文件放在哪里了吗？

你急需`Firebug`初学者。看看它的所有功能。它将帮助您找到 CSS 文件和您需要编辑的特定行。

我假设您正在编辑其他人的模板，在这种情况下，这就是您要查找的位置。

```
templates/you_template/css/file.css 
```

它因模板而异，因此我建议您按照我上面的建议下载 Firebug。

# php - Textarea 接受新行，但在 span 标签中它不会正确显示

> ID：11771571
> 
> 赞同：2
> 
> 时间：2012-08-02T05:33:16.243
> 
> 标签：php, javascript, mysql, html

我在显示来自文本区域的值时遇到问题。

我希望用户在我的 textarea 中输入一些文本，同时他们可能会输入一个新行（他们将按 Enter），然后在那一行之后，我想获取该 textarea 的值并将其显示在我的`<span>`标签中。

这里的问题是我的 span 标签中没有显示新行，我不知道会发生什么。

例如，用户在我的文本区域中输入了类似这样的内容：

```
Hello World!

How Are you?! 
```

问题是在我的 span 标签中，它没有换行显示，所以结果是这样的：

```
Hello World! How Are you?! 
```

我不想使用一些所见即所得的应用程序只是为了在我的跨度中允许新行。我相信这是有办法的。

请指导我这个。您的帮助将不胜感激！

谢谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T05:38:06.443

Textarea's make \n's，你想要的是html等价物`<br />`，所以使用这个字符串替换将所有\n's替换为`<br />`'s，你就是金色的。

在javascript中它会是

```
str = str.replace(/\n/g, '<br />'); 
```

在php中它会是

```
$str = nl2br($str); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:41:01.977

浏览器将多个空白字符和换行符压缩回一个空格是正常的。在需要换行的地方插入`<br>`元素是常用的方法。

您的问题同时使用 PHP 和 JavaScript 进行了标记，但您不需要同时执行此任务。如果您要显示来自数据库的数据，那么最好在 PHP 代码中进行处理。对于浏览器中的动态页面更新，您将使用 JS。

在 PHP[`nl2br()`](http://php.net/manual/en/function.nl2br.php)中，当准备在 span 中结束的文本时使用：

```
echo nl2br($strWithNewLines); 
```

或者在 JS 中：

```
var stringWithBrs = strWithNewlines.replace(/\n/g, '<br />') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:44:56.917

试试这个技巧。

```
<pre><span id="wrapContent">
    <?php echo $str; ?>
</span></pre> 
```

# iphone - 表格视图如何工作 - IOS？

> ID：11771574
> 
> 赞同：-1
> 
> 时间：2012-08-02T05:33:42.310
> 
> 标签：iphone, objective-c, ios, xcode

我有一个表格视图，其中每个单元格都添加了一个对象。现在在 cellForRowAtIndexPath 中，我想根据包含的对象执行一些 GUI 操作。例如。

```
 static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

    // Got object.
    modal_info *obj = [self.listData objectAtIndex: [indexPath row]];

    if (obj->status != OFI_VC_USER_STATE_HEADING)
    {
        cell.textLabel.text = obj->combined_name;
        cell.detailTextLabel.text = obj->email;

        // Set Image
        UIImage *cellImage = [UIImage imageNamed:@"silhouette_user.png"];
        cell.imageView.image = cellImage;
    } else {
        cell.imageView.image = nil;
        cell.detailTextLabel.text = nil;
        cell.textLabel.text = nil;
    }
    return cell; 
```

但是在表格视图中，即使我设置为零，标题行也会显示名称和图像。我做错什么了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:25:52.520

@neon samuel 我已经修好了。这是我的错误，我在添加时没有正确设置值。不管怎么说，还是要谢谢你。:) – 费罗兹·莫希丁

# android - android应用程序崩溃

> ID：11771577
> 
> 赞同：0
> 
> 时间：2012-08-02T05:33:58.127
> 
> 标签：android, android-intent

我制作了一个 android 应用程序，其中当我单击按钮时，第一个活动中有一个文本和按钮，它应该转到第二个活动并在网格视图中查看图像，但它没有这样做，它给出了它意外停止的消息。这是代码。

主要活动：

```
package com.karan.myjigsaw;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.content.Intent;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}
public void playGame(View view) {
    Intent intent = new Intent(this, GameActivity.class);
    startActivity(intent);

}

} 
```

主要的.xml

```
RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<TextView
    android:layout_margin="120dip"
    android:layout_width="200dp"
    android:layout_height="150dp"
    android:text="@string/welcome_note"
    android:layout_centerHorizontal="true"
    tools:context=".MainActivity" />

<Button 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_play"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:onClick = "playGame" />

   </RelativeLayout> 
```

游戏活动：

```
 public class GameActivity extends Activity {

ImageView image;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Intent intent = getIntent();

    //create grid view
    GridView gridView = new GridView(this);
    gridView = (GridView)findViewById(R.id.grid_view);   

    // Instance of ImageAdapter Class
   gridView.setAdapter(new ImageAdapter(this));
}

} 
```

游戏活动.xml：

```
 <?xml version="1.0" encoding="utf-8"?>

<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/grid_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:numColumns="auto_fit"
android:columnWidth="90dp"
android:horizontalSpacing="10dp"
android:verticalSpacing="10dp"
android:gravity="center"
android:stretchMode="columnWidth" > 

</GridView> 
```

图像视图适配器类

```
public class ImageAdapter extends BaseAdapter{
 private Context mContext;

// references to our images
    private Integer[] mThumbIds = {R.drawable.imagesl_01,R.drawable.imagesl_02,
               R.drawable.imagesl_03,R.drawable.imagesl_04,R.drawable.imagesl_05,
             R.drawable.imagesl_06,R.drawable.imagesl_07,R.drawable.imagesl_8,
            R.drawable.imagesl_9};

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;

        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
       } else {
           imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    } 
```

日志猫：

```
08-02 00:24:30.160: D/AndroidRuntime(286): Shutting down VM
08-02 00:24:30.160: W/dalvikvm(286): threadid=1: thread exiting with uncaught     exception (group=0x4001d800)
08-02 00:24:30.190: E/AndroidRuntime(286): FATAL EXCEPTION: main
08-02 00:24:30.190: E/AndroidRuntime(286): java.lang.RuntimeException: Unable to start activity         ComponentInfo{com.bellurbis.karan.myjigsaw/com.bellurbis.karan.myjigsaw.GameActivity}: java.lang.NullPointerException
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.os.Looper.loop(Looper.java:123)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-02 00:24:30.190: E/AndroidRuntime(286):  at java.lang.reflect.Method.invokeNative(Native Method)
08-02 00:24:30.190: E/AndroidRuntime(286):  at java.lang.reflect.Method.invoke(Method.java:521)
08-02 00:24:30.190: E/AndroidRuntime(286):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-02 00:24:30.190: E/AndroidRuntime(286):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-02 00:24:30.190: E/AndroidRuntime(286):  at dalvik.system.NativeStart.main(Native Method)
08-02 00:24:30.190: E/AndroidRuntime(286): Caused by: java.lang.NullPointerException
08-02 00:24:30.190: E/AndroidRuntime(286):  at com.bellurbis.karan.myjigsaw.GameActivity.onCreate(GameActivity.java:20)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-02 00:24:30.190: E/AndroidRuntime(286):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-02 00:24:30.190: E/AndroidRuntime(286):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:51:10.330

1.  create intent like this

    ```
    Intent intent = new Intent(MainActivity.this, GameActivity.class);
    startActivity(intent); 
    ```

2.  and post log message for better understanding of your error.

3.  you did not mention any layout in GameActivity

    ```
    public class GameActivity extends Activity {

    ImageView image;

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.gameactivity)

       GridView  gridView = (GridView)findViewById(R.id.grid_view);       
       gridView.setAdapter(new ImageAdapter(this));
      }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T12:36:08.847

您应该在 ImageAdapter 构造函数中调用 super，否则您无法初始化 BaseAdapter。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:40:42.387

错误：你必须先设置ContentView(R.layout.gameactivity)，然后才能使用findViewById(R.id.grid_view)！

# android - 删除超过 x 天的 android SQLite 行

> ID：11771580
> 
> 赞同：24
> 
> 时间：2012-08-02T05:34:19.123
> 
> 标签：android, sqlite

我想删除表 MYTABLE 中所有早于 x 天的行。Column SAVE_DATE Long 是该行插入到表中的时间。

我试过这个，但显然它删除了我所有的行：

```
long daysInMiliSec = new Date().getTime() - X
            * (24L * 60L * 60L * 1000L);
return db.delete(MYTABLE , SAVE_DATE
            " <= ?", new String[] { "" + daysInMiliSec } 
```

怎么了？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-02T07:07:54.073

下面的查询将删除超过 2 天的数据：

```
String sql = "DELETE FROM myTable WHERE Save_Date <= date('now','-2 day')"; 
db.execSQL(sql); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-01-21T02:04:51.517

由于它是谷歌的第一次点击，因此对初学者有更多解释：
您不需要用于访问 sqlite DB 的主程序中的时间/日期函数，而是直接使用 sqlite 日期函数。

您使用年龄的行条目创建表，例如：

```
CREATE TABLE IF NOT EXISTS test (id INTEGER PRIMARY KEY, text TEXT, age INTEGER) 
```

你写给它

```
INSERT INTO test (text, age) VALUES ("bla", datetime('now')) 
```

在这里，我使用了“日期时间”，因为这也可以让您稍后搜索小时/分钟/秒。如果你不需要'日期（'现在'）'就足够了。

下面是对日期函数的解释：[https ://www.sqlite.org/lang_datefunc.html](https://www.sqlite.org/lang_datefunc.html)

要选择早于例如 5 分钟的所有内容：

```
SELECT * FROM test WHERE age <= datetime('now', '-5 minutes') 
```

*您可以在上面的网站“修饰符*”段落下看到更多这些可能性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-25T13:31:49.083

当时间戳或日期字段以毫秒或纪元整数存储时，删除超过 2 天的数据。

```
DELETE FROM update_log WHERE timestamp <= strftime('%s', datetime('now', '-2 day')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-30T11:47:20.137

使用最新版本的 ORMLite for SQLite Android：[http://ormlite.com/sqlite_java_android_orm.shtml](http://ormlite.com/sqlite_java_android_orm.shtml)，您可以使用以下代码实现此目的：

```
 String sql = "DELETE FROM graph WHERE time <= 1522405117";
                        dbHelper.getWritableDatabase().execSQL(sql); 
```

# android - Android：如何确定一个活动是否已经在运行？

> ID：11771581
> 
> 赞同：4
> 
> 时间：2012-08-02T05:34:20.003
> 
> 标签：android, android-intent, android-activity

我创建了一个具有菜单的基本活动，该菜单将打开应用程序中的其他活动。

```
public class BaseActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);

    //Intent i = new Intent("com.app.Activity1");
    //startActivity(i);

     }

@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.icon:     Intent i1 = new Intent("com.app.Activity1");
                            startActivity(i1);
                            break;
        case R.id.text:     Intent i2 = new Intent("com.app.Activity2");
                            startActivity(i2);
                            break;
        case R.id.icontext: Intent i3 = new Intent("com.app.Activity3");
                            startActivity(i2);                              
                            break;
    }
    return true;
}
} 
```

所有活动都扩展了这个基本活动，所以当你按下菜单按钮时，菜单会弹出，你可以选择一个活动。

但是，假设我使用菜单转到活动 A。一旦我进入活动 AI 可以使用菜单再次转到活动 A。我可以这样做 X 次，但现在后退按钮将返回 X 次相同的活动。

如何判断活动是否已经在运行，因此用户无法继续打开相同的活动？

或者更确切地说，您是否建议我在活动 A 中禁用菜单项？

感谢您的输入。抱歉，这似乎是一个微不足道的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:48:10.610

I think u need not to do that.I think you just appoint your activity's launchMode="singleTask".Code in your AndroidManifest.xml:

```
<activity android:name=".com.app.Activity1" android:launchMode="singleTask" android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait"></activity>
<activity android:name=".com.app.Activity2" android:launchMode="singleTask" android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait"></activity>
<activity android:name=".com.app.Activity3" android:launchMode="singleTask" android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait"></activity> 
```

^-^

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T14:48:08.277

有一个简单的解决方案。`onPrepareOptionsMenu()`您想禁用当前活动的菜单项，`BaseActivity`如下所示：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    // Determine what activity I am and find the menu item for that activity
    MenuItem menuItem = null;
    if (getClass().equals(com.app.Activity1.class)) {
        menuItem = menu.findItem(R.id.icon);
    } else if (getClass().equals(com.app.Activity2.class)) {
        menuItem = menu.findItem(R.id.text);
    } else if (getClass().equals(com.app.Activity3.class)) {
        menuItem = menu.findItem(R.id.icontext);
    }
    // Disable this menu item
    if (menuItem != null) {
        menuItem.setEnabled(false); // Make it non-selectable (even with shortcut)
        menuItem.setVisible(false); // Make it non-visible
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:49:00.457

Kind of a trivial solution - why not have a global int in your baseActivity called 'int choice'? When you switch to an activity just set choice to that activity. For example

```
case R.id.icon:
   if (choice != 1){
      startActivity(i1);
      choice = 1;
   }
   break; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:49:45.310

You can implement this in two ways:

1.  To call activity A from activity A, call it with flag as `FLAG_ACTIVITY_REORDER_TO_FRONT`, so A will be called again without creating a new instance, so goin back will not create any problem.

2.  As you said, disable the menu item for activity A if activity A is in front.

# java - 计数值显示在 apache-tomcat 上

> ID：11771583
> 
> 赞同：0
> 
> 时间：2012-08-02T05:34:22.233
> 
> 标签：java, mysql, apache, tomcat, soap

我尝试开发计数值显示在我的 apache-tomcat 控制台窗口上。这里使用以下代码：

```
public class RetailerWs {
 public int data(){
int count=0;

count++;

try{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/pro","root","");

    PreparedStatement statement =  con.prepareStatement("select * from orders where status='Q' AND date=CURDATE()");
     ResultSet result = statement.executeQuery();

}

      catch(Exception exc){
      System.out.println(exc.getMessage());
      }

    return count;
       }

        } 
```

我的另一堂课是：

```
 public class Demo {
  public static void main(String[] args){
    RetailerWs obj = new RetailerWs();
    System.out.println(obj.data());
   }

  } 
```

在我的数据库中，有 2 个值与上面的查询匹配。但显示的输出始终为 1。为什么在这里发生 dis 错误。请帮助我这里使用什么循环条件。给我一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:45:33.497

您实际上并没有查看查询的结果。`count`是 1，因为`count++`代码中较早。

你需要类似的东西：

```
while(result.next()) {
    // Do something with the row returned.
    // e.g. count += result.getInt[1]; if the first col is a count.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:44:52.323

在执行查询后添加此行。

```
count = 0;
while ( result.next() ) 
count++; 
```

# azure - 如何在 Azure 的同一个云服务下创建多个虚拟机？

> ID：11771584
> 
> 赞同：0
> 
> 时间：2012-08-02T05:34:31.870
> 
> 标签：azure, azure-virtual-network

我正在尝试在云服务下创建许多虚拟机。

但我不能创造超过两个！它给出了一个错误，告诉部署槽已经被占用。即使我更改部署名称，它也会给出相同的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:56:49.527

VM 需要对部署的独占访问权限，因此您一次只能创建一个 VM。

等到您正在创建的第二个 VM 完成，然后重试。

# iphone - 如何清除 iPhone 中动态创建的 UITextfield 值？

> ID：11771587
> 
> 赞同：-2
> 
> 时间：2012-08-02T05:34:42.993
> 
> 标签：iphone, ios5, uitextfield

我使用 for 循环创建了五个`UITextField`我想在单击“清除”按钮时清除文本字段值，但只清除最后一个文本字段值。我想清除所有文本字段值我该如何解决这个任何人帮助我谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-08-02T05:39:16.037

```
for (UIView *view in self.view.subviews) 
    if([view isKindOfClass:[UITextField class]])
             [(UITextField*) view setText:@""]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-02T05:41:23.047

在你的明确方法中写成：

```
for (UIView *addedView in [self.view subViews])
{
   if([addedView isKindOfClass:[UITextField class]])
    {
      UITextField *myText = (UITextField *)addedView ;
      myText.text = @"";
    }
} 
```

这里每个子视图都取自 self.view 并检查它是否为 a `UITextField`。如果它是 a`UITextField`那么我们设置`@""`它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T05:42:05.020

您可以使用以下方法执行此操作：

```
-(void)loopMethod
{
    lastTextField.tag=100;
}

-(void)buttonClick
{
    UITextField *textField=(UITextField*)[self.view viewWithTag:100];
    textField.text=NULL;
} 
```

# java - 实例化接口

> ID：11771589
> 
> 赞同：-3
> 
> 时间：2012-08-02T05:35:02.793
> 
> 标签：java, interface

说我有一个`I`方法接口`doIt();`

现在我有一个`C`实现`I`并因此提供实现的类`doIt();`

对于 Class 中的以下代码`Hello`

```
public class Hello{
    I i = new I();
    i.doIt();
} 
```

1.) 现在从哪里实现 doIt()？

2.) 如果有另一个类也`HelloWorld`实现`I`了该`doIt()`函数的不同实现怎么办。那么它会采取哪种实施方式呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:39:34.307

尝试编译这些东西。您只能实例化 a`Class`实现 the`Interface`而不是`Interface`直接的。

`Interface`就像一个合同，当`Class`它同意时`implements`；并在协议的范围内`Interface`，`Class`提供了它的实施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T05:37:08.973

您不能实例化接口。您只能实例化一个具体的类。的实现`doIt()`是在被实例化的具体类中定义的。如果该类不提供实现，它将从超类继承。

作为旁注，在您的代码示例中，您的类中的代码不包含在方法或静态块中。这是不合法的。您必须将代码包含在方法或静态块中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T05:38:44.837

接口不能被实例化。您发布的代码*不应*编译。你可以做的是这样的：`I c = new C();`. 这也将确保`doIt()`我调用的适当实现。

有关. [_](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html) _`Interfaces`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T05:40:53.807

这永远行不通

```
public class Hello{
    I i = new I(); // I is an interface, can't be instantiated
    i.doIt();
} 
```

我想你想要...

```
public class A implements I {
    public void doIt() {

        System.out.println("A did it");

    }
}
public class B implements I {
    public void doIt() {

        System.out.println("B did it");

    }
}

public class Main {
    public static void main(String args[]) {
        I i = new A();
        i.doIt();
        i = new B();
        i.doIt();
    }
} 
```

这将输出

```
A did it
B did it 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T05:46:33.293

实例化接口的唯一方法是添加特定于您的实现的匿名内部类型。尽管有时它看起来像一个糟糕的设计，但它很有用。干杯。

```
 II i = new II() {

        @Override
        public void doit() {
            // TODO Auto-generated method stub

        }
    }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T05:39:44.447

没有实现，您的代码将无法编译。尝试创建一个简单的工作示例，您就会明白。顺便说一句，无论如何语法都是错误的：如果我是一个接口，则需要打开花括号来创建一个实现该接口的匿名类：

```
I i = new I() { public void doIt() {} }; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T05:40:24.103

在您的代码`I i = new I();`中是**不正确**的，`I`并且`interface`无法**实例化**接口，如果您必须这样做，那么这应该是

```
I i = new I(){
   public returntype doIt(){
    ...
   }
}; 
```

[现在上面的实现在这里](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)被称为**匿名内部类**

# php - 检查用户是否较早访问过网站

> ID：11771592
> 
> 赞同：-2
> 
> 时间：2012-08-02T05:35:21.217
> 
> 标签：php, javascript

> **可能重复：**
> [检查是否同一用户访问了网站！？！如何？](https://stackoverflow.com/questions/4821431/check-if-same-user-visited-web-site-how)

如何检查用户是否在一周之间的任何时间访问我的网站。如何检查我的网站的 cookie 和搜索，然后做一些事情。

基本上我的目标是检查关键字，有没有办法做到这一点。**基本上我想从用户浏览活动中搜索我的网站**

让我更清楚一点，这有点令人困惑......好吧

例如，用户在 2012 年 7 月 21 日检查了我的网站，之后他访问了其他 10 个网站。现在今天 2/8/12 用户再次访问了我的网站，如何知道用户在 21/07/12 之前访问了我的网站。这可以通过获取关键字或完整的网站链接来跟踪。

**这应该在不存储数据（IP 等）的情况下完成，无需查看从日志文件或 cookie 中读取的内容。**

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:46:06.903

您必须创建一个数据库表来存储用户的访问。

```
user_visits // table name
v_id(int) // the unique ID
v_user_id(int) // the user ID
v_post_id(int) // the post id for the page that the user visited
v_user_ip(VARCHAR) // the user IP
v_user_browser(VARCHAR) // the user agent
v_date(TIMESTAMP) // when and what time did the user visited the page 
```

然后就可以用MYSQL语句来整理了。更好的是，使用谷歌分析

# javascript - HTML5 中的下载进度

> ID：11771594
> 
> 赞同：5
> 
> 时间：2012-08-02T05:35:57.317
> 
> 标签：javascript, jquery, css, html

如果我有 5 个 javascript 文件并且每个文件的大小不同且与 CSS 相同，是否可以在下载脚本/css 时显示“实时”进度条？

我知道这在 HTML4 中是不可能的，需要 Flash/Silverlight。但是我可以在 HTML5 中实现这一点吗？如果是，我会怎么做？

我想显示像“正在下载”这样的文本，并且随着每个脚本/css 实时下载，下载的每个字母都应该开始填满。我不要求任何代码。只是想要一个关于这如何可能的高级概念。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T14:04:01.457

这是我能想到的；在 HTML5 中有一个`<progress>`你可以使用的元素。坏消息是对这个元素的支持并不像它可能的那样好。请参阅此处的支持图表：[http](http://caniuse.com/#search=progress) ://caniuse.com/#search=progress Safari 5 及以下或 IE9 及以下不支持。部分支持在 IE10 和任何相关版本的 FireFox 中。如果您需要更多支持，请尝试使用这样的 polyfil：http: [//lea.verou.me/polyfills/progress/](http://lea.verou.me/polyfills/progress/)

如果您选择使用该`<progress>`元素，这里有一个关于如何设置样式的链接：[http ://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/](http://www.useragentman.com/blog/2012/01/03/cross-browser-html5-progress-bars-in-depth/)

现在让这项工作发挥作用的诀窍是，您需要知道要下载的文件的文件大小和下载的字节数。在下载文件时，您必须获取标头信息，告诉您传输了多少字节。您可以在此处查看如何使用 jQuery 执行此操作的示例：http: [//markmail.org/message/kmrpk7w3h56tidxs#query:jquery%20ajax%20download%20progress+page:1+mid:kmrpk7w3h56tidxs +state:results](http://markmail.org/message/kmrpk7w3h56tidxs#query:jquery%20ajax%20download%20progress+page:1+mid:kmrpk7w3h56tidxs+state:results)

请注意，此方法不适用于 IE。IE 不公开 XHR 对象的标头数据。

此时`max`将元素的属性设置`<progress>`为总文件大小并使用`setTimeout`示例更新元素的`value`属性。`<progress>`

了解了这一切，也许找到某种带有内置 Flash 回退的包解决方案可能会更容易实现，并且有更好的支持。其他人有什么想法吗？

祝你好运。

# wcf - 在 IIS 7.5 的同一网站中托管多个 WCF 服务？

> ID：11771597
> 
> 赞同：0
> 
> 时间：2012-08-02T05:36:17.643
> 
> 标签：wcf, web-services, iis-7.5

我将如何在同一个网站（即同一个 Web 应用程序）中托管 2 个 WCF 服务？我不想让每个 WCF 都有自己独立的网站主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:42:09.317

WCF 服务与 IIS 的集成使用 .svc 文件在 Web 应用程序中托管。

您可以在同一个 Web 应用程序中创建与使用 WCF 创建的服务一样多的 .svc 文件，因此您只需为 Web 项目中的每个 WCF 服务创建一个 .svc 文件。

也许您可以解释实现细节服务以了解这是否适用于您。

# ruby-on-rails - 在 Rails 中使用自定义哈希数组

> ID：11771601
> 
> 赞同：0
> 
> 时间：2012-08-02T05:37:04.290
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我已经发布了一个类似的问题，但我被告知自己尝试解决它并在这里发布我到目前为止所拥有的内容。

我正在做的是调用一些 xmlrpc 方法从外部应用程序中提取一些数据。

到目前为止我能做的是显示一个简单数组中的内容，如下所示。

```
<%  @attachment.each do |att| %>
<div class="item">
    <%= image_tag att %>         
</div> 
```

我想要的是能够传递一个类似于这样的哈希数组：

```
 {id:"1", content:"somedataaa", imgurl:"someurl.com/image.jpg"} 
```

我想要的是当用户单击图像以将 id 传递给控制器​​方法时，这样我就可以使用提供的 id 获取更多数据并提供另一个视图。

```
 <%  @hasharray.each do |att| %>
    <div class="item">      
     <%= att.id %> //this could be hidden an only used to pass the id to a method
    <%= image_tag att.url %> //add a link_to here somehow to route to a method on the controller.        
    </div> 
```

我知道如何使用 rails 模型数据执行此操作，但由于这些数据来自外部 xmlrpc，我必须将其作为哈希数组传递。

您能否指导我如何执行此操作，这是正确的方法，还是我可以解析哈希数组并以某种方式将其保存到 Rails 模型中，以便我可以正常使用视图并访问路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:50:45.757

You can just pass the hash instead of a model, and us `att[:id]` instead of `att.id`.

If you really need it to be a model instead of a hash, you can look at Hashie, which provides several methods to convert a hash to a model: [https://github.com/intridea/hashie](https://github.com/intridea/hashie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:02:19.613

```
attachments = [{ :id => 1, :url => 'images/1.jpg' }, { :id => 2, :url => 'images/2.jpg' }]

attachments.each do |attachment|

  link_to image_tag(attachment[:url]), "/path/to/controller/#{attachment[:id]}/show"

end 
```

旁注：请遵循正确的命名约定。不要将变量命名为“hasharray”或“hash”或“array”或类似的名称。让它们有意义。请。

阅读本文会有所帮助：[http ://www.ruby-doc.org/core-1.9.3/Hash.html](http://www.ruby-doc.org/core-1.9.3/Hash.html)

# jquery - 使用jquery在点击时显示和隐藏许多div

> ID：11771602
> 
> 赞同：2
> 
> 时间：2012-08-02T05:37:07.110
> 
> 标签：jquery, jquery-selectors

我正在尝试使用 jquery 创建一个菜单（无下拉菜单）。请检查我下面的一些代码。

如果我单击 Galaxy Tab 的链接，我想显示 class 属性值所在的 div `galaxyTab`。同样如果我点击Iphone的链接，我想隐藏之前的div（galaxyTab）并显示class属性值为的div `iphone`。这是以下代码的[小提琴](http://jsfiddle.net/Wvjbr/3/)

```
<div id="productMenu">
  <a href="galaxyTab" class="showproducts">Galaxy Tab</a>
  <a href="iphone" class="showproducts">Iphone</a>
  <a href="hpslate" class="showproducts">HP Slate</a>
</div>
 Unlimited... like this

<div id="article">
<div id="products" class="galaxyTab" style="">Galaxy Tab</div>
<div id="products" class="iphone" style="display:none">Iphone</div>
<div id="products" class="hpslate" style="display:none">HPslate</div>
</div> 
```

我可以通过以下代码实现上述要求，但问题是我必须从数据库中获取菜单名称和其他信息，并且可能会有大约 15 个菜单项，因此以下方法不可行。你能告诉我一个简单的方法来做到这一点。

提前致谢 ：）

```
$('a.showproducts').click(function(){
        var a_href = '.'+ $(this).attr('href'); 
                    $('.galaxyTab').hide();
                     $('.iphone').hide();
                     $('.hpslate').hide();

                    $(a_href).show();

       return false
    });//.click function ends here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:40:50.343

有几种预构建的解决方案可以帮助您实现这一目标。根据您希望它的工作方式，有：

手风琴：

[http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

标签：

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

另外 - 您的 HTML 的注释。您不应该对多个条目使用相同的 ID - 因为 ID 是唯一的。

如果您在每个 div 上放置另一个类，如果您不想放入像手风琴或制表符这样的大组件，也可以编写此代码来手动隐藏 div。

[http://jsfiddle.net/Sqgbb/](http://jsfiddle.net/Sqgbb/)

```
$('a.showproducts').click(function(e){
    e.preventDefault();
    var a_href = '.'+ $(this).attr('href');
    $('.products').hide();
    $(a_href).show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:44:24.830

试试这个代码：

```
$('a.showproducts').click(function(){
        var a_href = '.'+ $(this).attr('href');
                     $('#article>div').hide();
                                         $(a_href).show();

       return false
    });//.click function ends here 
```

这将隐藏所有 div，无论之前显示的是哪个 div，然后只显示您想要的一个 div。

更新小提琴- [http://jsfiddle.net/Wvjbr/4/](http://jsfiddle.net/Wvjbr/4/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T05:41:21.257

这可能更可行：

```
$('a.showproducts').click(function(e){
        e.preventDefault();
        var a_href = '.'+ $(this).attr('href');
        $('#products:not('+a_href+')').hide();
        $(a_href).show();
 }); 
```

但应该是`class="product"`，`id`都是独一无二的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:44:45.310

会这样写：

```
$('a').click(function(event) {
    $('.showproducts').hide();
    $(event.target).show();
}) 
```

顺便提一句。：

您有多个名为“产品”的 ID，这是不可能的，
请参见此处： [https ://stackoverflow.com/a/192066/1067061](https://stackoverflow.com/a/192066/1067061)

希望能帮助到你。

# powershell - 如何确保我们使用的是 powershell 2.0？

> ID：11771605
> 
> 赞同：9
> 
> 时间：2012-08-02T05:37:23.070
> 
> 标签：powershell, powershell-2.0

我们正在向仅在 Powershell 2.0 中工作的客户端提供脚本。

通过命令我们可以确保 powershell 2.0 安装如下

```
$version = Get-host | Select-object Version 
```

但是，如果我们提供脚本，如何确保它们是从 Powershell 2.0 执行的呢？

在执行脚本时，Powershell 2.0 的特性可能会在启动脚本本身时给出脚本错误。不是吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T06:17:43.537

您可以使用注释您的脚本[`#requires`](http://technet.microsoft.com/en-us/library/hh847765)并声明它不应在低于 PowerShell v2 的任何设备上运行：

```
#requires -Version 2.0 
```

[（旁注：即使您模糊地知道它存在，也很难找到它。）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:03:20.977

依赖主机版本并不是最安全的做法，因为脚本可以在主机版本与 PowerShell 版本不同的主机上运行。

$PSVersionTable 变量是在 v2 中添加的。您可以检查变量是否存在，如果存在则您正在运行 v2 及更高版本，您还可以检查 PSVersion.Major 属性：

```
if($PSVersionTable)
{
    'PowerShell {0}' -f $PSVersionTable.PSVersion.Major
}
else
{
   'PowerShell 1'
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T12:23:11.850

我会做这样的事情：

```
# get version
$ver = $PsVersionTable.psversion.major
 # Check to see if it's V2

If ($ver -NE 2) 
   {"incorrect version - exiting; return}
# Everything that follows is V2 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T05:49:16.107

Try to use `$PSVersionTable`

You will get something like:

```
 Name                           Value
    ----                           ----- 
CLRVersion                     2.0.50727.5456 
BuildVersion                   6.1.7601.17514 
PSVersion                      2.0 
WSManStackVersion              2.0 
PSCompatibleVersions           {1.0, 2.0} 
SerializationVersion           1.1.0.1 
PSRemotingProtocolVersion      2.1 
```

# regex - Tcl 正则表达式：在带有 '(' , ')' 字符的模式中的非贪婪量词上需要帮助

> ID：11771610
> 
> 赞同：2
> 
> 时间：2012-08-02T05:38:20.780
> 
> 标签：regex, tcl

我有这样的模式： `substring1(substring2),(xxxx)xxxx` 需要`substring1`（第一个括号前的字符串）和`substring2`（第一个括号内的字符串），这没问题。此外，需要一个子字符串中第一个括号后的所有字符 - 这些可能是括号本身。因此使用模式 -`regexp {(.*?)\((.*?)\)(.*)} $a match sub1 sub2 sub3` 但最后一个子字符串不能收集在`sub3`. 请帮我！

```
> 247 % set a substring1(substring2),(xxxx)xxxx
> 248 % regexp {(.*?)\((.*?)\)(.*)} $a match sub1 sub2 sub3 1
> 249 % puts $sub1; puts $sub2; puts $sub3 
substring1
substring2

> 250 % 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:52:04.143

你遇到的问题是 Tcl 的 RE 引擎是自动机理论的，不能很好地处理切换贪婪模式。特别是，对于第一个近似值，字符串中的第一个量词设置整个 RE 的贪心度。（这实际上不是真的，但它何时切换的规则非常神秘。）

如果你没有嵌套括号，你可以使用这个：

```
regexp {^([^()]*)\(([^()]*)\)(.*)$} $a match sub1 sub2 sub3 
```

测试（省略了明显的位）：

```
% puts $sub1|$sub2|$sub3
substring1|substring2|,(xxxx)xxxx 
```

* * *

处理嵌套括号要困难得多。问题在于，任意嵌套是您不再处理可以由有限自动机正式匹配的“语言”的地方（相反，您需要一个下推自动机，这是一个不同的可判定性类）。对于有限级别的嵌套，您可以对其进行编码；以下是如何在一个级别上做到这一点：

```
regexp {^([^(]*)\(((?:[^()]|\([^()]*\))*)\)(.*)$} $a match sub1 sub2 sub3 
```

也就是说，我`[^()]`用`(?:[^()]|\([^()]*\))`. `[^()]`您可以根据需要再次替换第二个 sub- 来轻松深入。然而，这使得 RE 更加复杂（这实际上是问题所在；任意嵌套的 paren 匹配器将需要无限长的 RE）。如果您正在处理该特定问题，尝试找到一些其他技术会更容易（例如，更长的“块结尾”字符串以匹配`),`- 与逗号 - 或使用递归解析器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T08:32:27.720

需要以匹配终止，直到结束变量**'$'**

```
 () 27 % regexp {(.*?)\((.*?)\)(.*).*$} $a match sub1 sub2 sub3
 1
 () 28 % set sub3
 ,(xxxx)xxxx
 () 29 % set sub1
 substring1
 () 30 % set sub2
 substring2
 () 31 % set sub3
 ,(xxxx)xxxx 
```

# google-bigquery - 通过命令行在 BigQuery 中加载数据时出错：已更新

> ID：11771611
> 
> 赞同：1
> 
> 时间：2012-08-02T05:38:30.937
> 
> 标签：google-bigquery

使用脚本进行了通宵工作。它适用于很多表，然后大约 4 小时后早上 7 点 IST 大约开始表现得很奇怪现在即使单个命令也会给出相同的错误

```
bq load --max_bad_records=10 tbl163.a_V3_14Jun2012   a_V3_14Jun2012.log.gz ../schema/analyze.schema 
```

错误：

```
BigQuery error in load operation: Could not connect with BigQuery server, http
response status: 502 
```

更新：我刚刚收到以下错误

```
You have encountered a bug in the BigQuery CLI. Please send an email to bigquery-    team@google.com to report this, with the following information:

========================================
== Platform ==
CPython:2.7.3:Linux-3.2.0-25-virtual-x86_64-with-Ubuntu-12.04-precise
== bq version ==
v2.0.6
== Command line ==
['/usr/local/bin/bq', 'load', '--max_bad_records=10', 'vizvrm299.analyze_VIZVRM299_26Jun2012', 'analyze_VIZVRM299_26Jun2012.log.gz', '../schema/analyze.schema']
== Error trace ==
File "build/bdist.linux-x86_64/egg/bq.py", line 614, in RunSafely
self.RunWithArgs(*args, **kwds)
File "build/bdist.linux-x86_64/egg/bq.py", line 791, in RunWithArgs
job = client.Load(table_reference, source, schema=schema, **opts)
File "build/bdist.linux-x86_64/egg/bigquery_client.py", line 1473, in Load
upload_file=upload_file, **kwds)
File "build/bdist.linux-x86_64/egg/bigquery_client.py", line 1228, in ExecuteJob
job_id=job_id)
File "build/bdist.linux-x86_64/egg/bigquery_client.py", line 1214, in     RunJobSynchronously
upload_file=upload_file, job_id=job_id)
File "build/bdist.linux-x86_64/egg/bigquery_client.py", line 1208, in StartJob
projectId=project_id).execute()
File "build/bdist.linux-x86_64/egg/bigquery_client.py", line 184, in execute
return super(BigqueryHttp, self).execute(**kwds)
File "build/bdist.linux-x86_64/egg/apiclient/http.py", line 644, in execute
_, body = self.next_chunk(http)
File "build/bdist.linux-x86_64/egg/apiclient/http.py", line 708, in next_chunk
raise ResumableUploadError("Failed to retrieve starting URI.")
========================================

Unexpected exception in load operation: Failed to retrieve starting URI. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T16:44:45.173

只是为了结束这个问题，你还在观察这些错误吗？这看起来像是网络配置问题，而不是 bq 命令行工具的直接问题。但是，AFAIK, bq 不提供在网络出现问题时恢复工作插入的功能。

# jquery - 在 jQuery 中使用 insertAfter()

> ID：11771614
> 
> 赞同：3
> 
> 时间：2012-08-02T05:38:53.447
> 
> 标签：jquery, html, xml-parsing

我有这个 XML 文件，

```
<tour title="Bavaria, Austrian, and the Alps" baseCost="1799.99">
<availability start="2011/03/25" end="2011/9/30"/>
<description>

</description>

<stop day="1">
<title>Munich, Germany. </title>

<description></description>
<latitude>48.15</latitude>
<longitude>11.5833333</longitude>
<hotels>
<hotel name="Europa Hotel" stars="3" premium="0.0"/>
<hotel name="Excelsior Hotel" stars="4" premium="59.99"/>
<hotel name="Grand Hotel" stars="5" premium="199.99"/>
</hotels>

</stop>

<stop day="2">
<title>Garmisch, Germany.</title>

<description>Major destination of the Bavarian alps. Site of a major World Cup ski race.</description>
<latitude>47.5</latitude>
<longitude>11.0833333</longitude>
<hotels>
<hotel name="Europa Hotel" stars="3" premium="0.0"/>
</hotels>
</stop> 
```

我已经解析了我需要的所有内容，但问题是我需要像这样显示输出，

```
<title name>
 <stop name>
  <hotels names>
 <stop name>
  <hotels names> 
```

但是输出是这样的，

```
<title name>
<stops names>
<hotels names> 
```

仅在一个订单中，我应该使用什么，insertAfter() 或 after()？

这是我的 jQuery 代码： http: [//pastebin.com/dmETKi9E](http://pastebin.com/dmETKi9E)

HTML 代码：

```
 <body>
    <h1 id="header"></h1>
    <h2 id="stop"></h2>
    <p id="hotel"></p>
 </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T05:52:07.340

**更新测试和工作**问题在于您的 HTML。所有标题都与标题一起进入，所有站点都进入站点，所有酒店都进入酒店，而您应该为每个新项目创建一个新对象。查看[wrap()](http://api.jquery.com/wrap/) jquery 命令。你要做的是

```
function processXml(xml) {
  var header, stop, hotel;
  $(xml).find("tour").each(function() {
    header = $('<h1 class="header" />');
    header.html($(this).attr("title"));

    $(this).find("stop").each(function() {

      stop = $('<h2 class="stop" />');
      stop.html(($(this).find("title").text()));

      $(this).find("hotel").each(function() {
       hotel = $('<p class="hotel" />');
       hotel.html(($(this).attr("name")));
       stop.append(hotel);
      });

      header.append(stop);
    });
    $('body').append(header);
  });
} 
```

别客气 ：）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T05:46:15.840

我认为问题在于您想要的方式不是格式良好的xml。输出剂量在哪里？为什么需要特殊格式？xml 不应该也包含结束标签吗？

# java - 寻找Java库图片转卡通

> ID：11771615
> 
> 赞同：0
> 
> 时间：2012-08-02T05:39:03.807
> 
> 标签：java, image

有人知道市场上现有的图书馆吗？还是开源项目？该库应该能够将图片或任何图像转换为卡通图像。

如果您以前使用过类似的东西，请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T05:45:06.083

取决于你所说的*卡通*风格是什么意思。有时，应用一些过滤器并做一些其他的小操作可能会给你一个不错的结果。如果那是您所追求的，您可以使用[JavaCV 之](http://code.google.com/p/javacv/)类的东西（它是[OpenCV](http://opencv.org/)的包装器。

这个库应该为您提供对一些图形工具的访问，这些工具应该允许您操纵图像以获得您所追求的。

另一方面，如果你追求的是漫画类型的卡通，我认为你需要使用一些人工智能技术，因为漫画通常涉及某些物理特征的夸张，为此，你需要人工智能来提取所述特征。

最后，您可以查看[这个](https://stackoverflow.com/questions/1357403/how-to-cartoon-ify-an-image-programmatically)先前的 SO 线程，其中包含一些关于如何将图像转换为卡通的其他指针。

# controller - createController() 方法所在的 Yii 应用程序？

> ID：11771618
> 
> 赞同：2
> 
> 时间：2012-08-02T05:39:22.650
> 
> 标签：controller, yii

我正在使用这段代码来创建一个新的 Yii 控制器：

```
$postController= Yii::app()->createController('post/index'); 
```

它返回一个`array`- 不是`Controller`我所期望的对象。

我试图`createController()`在应用程序 API 中找到该方法，但没有看到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:05:47.163

它位于框架中的 CWebApplication 中。如果您要更改方法，我建议您不要修改框架中的任何内容，您可以通过从现有类继承并覆盖函数来构建自己的类以获得所需的结果。

# c# - 将 Listview 绑定到两个不同的对象集合？

> ID：11771619
> 
> 赞同：-1
> 
> 时间：2012-08-02T05:39:31.493
> 
> 标签：c#, wpf, listview

是否可以将列表视图的 GridViewColumns 绑定到不同的对象集合？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:49:01.997

不，这是不可能的。有`ListView`一个`ItemsSource`，所以只能有一个源集合。您必须将这两个集合组合成一个网格源，可能通过添加视图模型 (MVVM)。

# c# - 如何在 ItextSharp(PdfStamper) 中增加 PDF 字段的字体大小？

> ID：11771623
> 
> 赞同：3
> 
> 时间：2012-08-02T05:39:45.040
> 
> 标签：c#, c#-4.0, pdf, itextsharp

我正在使用 PdfStamper 在运行时创建 PDF。我的问题是我无法增加 PDF 字段的字体大小。我试过这个，但没有运气，

```
stamper.AcroFields.SetFieldProperty("names", "textsize", 4f, null);
Font font = FontFactory.GetFont(FontFactory.COURIER, 2f, iTextSharp.text.Font.BOLD);    
stamper.AcroFields.AddSubstitutionFont(font.BaseFont); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-25T15:50:48.777

我让它工作了

```
stamper.AcroFields.SetFieldProperty("names", "textsize", 4f, null); 
```

但必须在填写字段之前设置

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-05T22:53:02.683

您使用的是哪个版本的 iTextSharp？我有 5.0.6.0，以下代码行对我有用：

```
stamper.AcroFields.SetFieldProperty("SomeDateField", "textsize", 8f, null); 
```

但是，我遇到了一个奇怪的问题......**只有**当该字段的字体大小设置为`Auto`. 当它设置为固定字体大小时，我似乎无法通过代码更改它（我尝试了几种不同的方法）。

如果您在 Acrobat 中将该字段设置为 Auto font-size，您是否会遇到同样的情况，我会很好奇。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T20:45:32.453

据我所知，字体大小似乎完全与文本字段的水平和垂直宽度相关。我已经尝试了一些过程来尝试在运行时“重新调整”文本的大小，但没有一个产生任何结果。我能够产生的唯一“误报”是当我手动调整文本字段的大小时。抱歉，这对解决您的问题没有多大帮助，我只是想我会分享我遇到同样问题的经验。不过，我会留意任何解决方案，如果您设法为此提出解决方案，请发布它，因为这将是非常有价值的知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-19T10:39:44.150

要更改每个表单字段的字体大小，您可以这样做：

```
using (PdfReader pdfReader = new PdfReader(fileInfo.FullName))
{
    using (var ms = new MemoryStream())
    {
        using (var pdfStamper = new PdfStamper(pdfReader, ms))
        {
            SetAcroFields(pdfStamper, myModel);

            // flatten the form to remove editting options, set it to false
            // to leave the form open to subsequent manual edits
            pdfStamper.FormFlattening = true;
            var pdfFormFields = pdfStamper.AcroFields;

            foreach (var f in pdfReader.AcroFields.Fields)
            {
                //Change font size here if auto should not be used
                pdfFormFields.SetFieldProperty(f.Key.ToString(), "textsize", (float)8.0, null);
            }
        }
        return ms.ToArray();
    }
} 
```

# c++ - 为什么 Visual Studio 2010 不“解包”系统变量？

> ID：11771625
> 
> 赞同：2
> 
> 时间：2012-08-02T05:39:58.373
> 
> 标签：c++, visual-studio-2010, environment-variables, ogre3d, system-variable

我试图设置一个 Ogre3D 应用程序，并将一个“OGRE_HOME”系统变量设置为 SDK 的主目录。`$(OGRE_HOME)`然后我使用系统变量设置项目属性，例如项目属性中的包含目录。但是当我尝试编译应用程序时，编译器没有找到头文件，所以我不得不将 SDK 路径“硬编码”到项目属性中。

我首先使用`setx`命令设置变量，然后尝试将其移至系统变量，但没有帮助。但是我没有尝试重新启动系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T05:57:31.113

MSBuild*确实*扩展了环境变量。`$(OGRE_HOME)`应该可以正常工作。

唯一的问题是 Visual Studio 会大量缓存这些环境变量的值，因此您所做的更改不会立即反映出来。

更改环境变量值的一般方法有两种，而这两种方法在 VS 中都会出错：

*   从命令行更改值只会影响从命令行启动的应用程序。由于您可能是通过资源管理器从快捷方式启动 VS，因此它不会继承新值。

*   通过计算机属性更改值应该正常工作，因为该对话框会广播[一条全局消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725497.aspx)，指示持久环境变量已更改。不幸的是，VS 似乎没有听取这些消息并更新其缓存。

但是，重新启动（或注销并重新启动）应该可以解决问题，因为这将导致 VS 刷新环境变量的值。

还值得注意的是，[*用户宏*](http://msdn.microsoft.com/en-us/library/f2t8ztwy.aspx)是环境变量的替代品。VS 2010 提供了一种通过 Property Manager 实现这些的非常强大的方法。您可以使用您的设置创建一个项目属性表，然后可以将其附加到多个项目，以便它们都将继承这些设置。它在 VS 之外不起作用，但如果你在那里完成所有的开发工作，它会非常方便。

# android - 如何使android sqlite数据库一次由一项任务访问？

> ID：11771627
> 
> 赞同：0
> 
> 时间：2012-08-02T05:40:20.133
> 
> 标签：android, sqlite

我正在开发一个包含大量数据库操作的小型应用程序。基本上它是一个选项卡活动，其中有 3 个选项卡。每个选项卡将通过解析 xml 文件显示数据。3 个选项卡活动使用相同的 db 对象，因此我只能看到 2 个填充数据的选项卡，其中第 3 个选项卡始终显示我创建的进度对话框。以下是我填充数据库的异步任务。

```
protected void onPreExecute() {
        super.onPreExecute();
        sdbop = new SDBOperations(context);
        hdbop = new HDBOperations(context);
        pdbop = new PDBOperations(context);

        sdbop.open();
        hdbop.open();
        pdbop.open();
    }

    @Override
    protected Void doInBackground(UpdateXML... statuslist) {

        for(UpdateXML status:statuslist){
            if(status==UpdateXML.C){
                checkStatusAndPopulateDB(status,null);
                continue;
            }
            String url = getUpdateURL(status);
            String xml = XMLParser.getXmlFromUrl(url);
            if(xml!=null)
                checkStatusAndPopulateDB(status,xml);
        }
        return null;
    }

private void checkStatusAndPopulateDB(UpdateXML status, String result) {
        switch (status) {
        case S:
            sdbop.open();
            dropTable();
            insertIntoSTable(result);
            sdbop.close();
            updateSList();
            break;
        case H:
            hdbop.open();
            dropHTable(hdbop);
            insertIntoHTable(hdbop,result);
            hdbop.close();
            updateHList();

        case P:
            pdbop.open();
            dropPTable(pdbop);
            insertIntoPTable(pdbop, result);
            pdbop.close();
            updatePList();
            break;
        case C:
            updateLView();
            break;
        default:
            break;
        } 
```

所以一切正常。但是 db 对象可以被 3 个任务连续访问。这样我的一个选项卡始终处于等待阶段，并且视图也在进行中。所以，如果有一个任务正在访问数据库，其他任务应该在等待。如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T15:32:01.343

我没有在我的数据库基本操作中关闭一些游标。以便在执行插入和更新操作后不会释放数据库对象。关闭所有游标后，我的应用程序工作正常。

# macos - 在 OSX 中执行脚本有什么不同？

> ID：11771630
> 
> 赞同：0
> 
> 时间：2012-08-02T05:40:46.997
> 
> 标签：macos, shell, command-line-interface, zsh, finder

我有一个问题一直试图解决。我想了解从命令行启动脚本并使其可执行然后从 Finder 运行它之间的区别。

因为这就是我正在经历的；

我有一个名为*垃圾文件*的简单脚本，其中包含以下命令：

```
trash ~/Downloads/* 
```

当我从终端运行时，它按预期工作；但是，如果我在 finder 中双击 shell 脚本，我会看到：

```
/Users/xx/Desktop/trash-files: line 1: trash: command not found 
```

我希望有人能告诉我为什么这不能按预期工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:20:21.193

`trash`不是 OS X 中的标准命令。它是在您的 ~/.profile 或类似文件中定义的吗？如果是这样，则不会为非登录 shell 运行这些 shell，例如为运行脚本而创建的 shell。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-02T15:23:21.940

如果您使用的是自制软件，则可以运行

```
brew install trash 
```

这将安装必要的脚本以使`trash`命令以您期望的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T15:18:41.923

您的主文件夹位置中有一个文件夹，名为

```
.Trash 
```

文件夹名称前面的“点”使其在查找器中搜索时隐藏。您必须使用终端执行以下命令：

```
cd ~/
ls -la 
```

这会将目录更改为当前登录用户的主文件夹，然后第二个命令将列出文件并显示隐藏文件。然后你可以运行：

```
rm .Trash/* 
```

这将删除码头上垃圾箱内的所有东西。因此，从 /Applications 文件夹中打开 TextEdit，转到“格式”并将其设为“纯文本”。粘贴在下面的两行中。

```
#!/bin/sh
rm ~/.Trash/* 
```

将文件另存为“emptyTrash.sh”（取消选中使用 txt 扩展名）。将其保存到您的桌面或任何您想要的位置。然后打开终端，cd（更改目录）到文件所在的位置并运行此命令以使脚本可执行：

```
chmod +x emptyTrash.sh 
```

然后您可以通过 cd （更改目录）执行脚本到脚本所在的路径，然后运行：

```
 ./emptyTrash.sh 
```

而已。

# java - Java 搜索屏幕上的文本字段

> ID：11771637
> 
> 赞同：1
> 
> 时间：2012-08-02T05:41:09.870
> 
> 标签：java, awt, awtrobot

我正在尝试创建一个程序，该程序会自动搜索屏幕上的文本字段并在该文本字段中重复键入一个单词。有没有可以找到文本字段的类？或者有什么方法可以找到文本字段？因为我知道 Robot 类可以输入文本，所以我只需要将光标放在文本字段上并使用 mousePress() 和 mouseRelease() 方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T08:08:48.660

我不能直接给你一个解决方案，但我弄乱了一些代码，也许可以为你指明正确的方向。

您可能知道，Java 在 JVM 中运行。这允许它在任何操作环境中执行。每个操作环境（windows、mac 等）都有自己的系统来处理编辑框和将焦点设置到正确的窗口等等。以下示例代码仅适用于 Windows，不符合 Java 语言的精神。正如 Adriaan 所指出的，这种事情还有其他语言，但是（在一定程度上）可以单独使用 Java 来完成。

在 Windows 中，您必须了解所有活动窗口的管理方式以及您看到的所有内容（包括编辑框）都将 Windows 操作系统视为“窗口”。我并不真正了解事情在幕后是如何运作的，所以我无法提供比这更多的信息。在 C++ 等本地语言中，Windows 操作系统 API 提供了一些函数，可用于实现您的目标。即 , `EnumWindows()`, `EnumChildWindows()`,`GetClassName()`和`SetForegroundWindow()`。您可以通过搜索 MSDN 文档库找到有关如何在本地语言中使用这些函数的文档。

话虽如此，您需要能够从 Java 调用这些函数。在正常情况下，调用这些本地方法是不可能的。但是，有一个库可以帮助您：JNA 库。JNA 代表 Java Native Access，它允许您使用我之前提到的闪亮的新功能。

因此，为了以母语实现您的目标，通常首先调用以`EnumWindows()`返回操作系统知道的所有父窗口的列表。此列表将包含父窗口的窗口句柄 - 标题为“MSN”、“Eclipse”、“Microsoft Office”等的窗口。作为父窗口，这些窗口中的每一个都有子窗口。您将在此子项列表中找到您正在寻找的“控制”：`Edit`控制。现在，许多应用程序对文本框使用不同的库和非标准的东西 - 即 Pidgin，我测试了一些相关代码的消息传递应用程序，每个控件都名为“gdkWindowChild”，它不能准确告诉我们哪个控件实际上是一个 EditBox 或否则是一个允许我们输入文本的地方。这是您的想法的主要问题；您不能总是准确地告诉您希望将焦点放在哪个控件上，以便您可以输入文本。不管怎样，我们将继续：

在使用 找到相关的父窗口后`EnumWindows()`，调用`EnumChildWindows()`将为我们提供属于父窗口的所有子窗口和其他“控件”（包括潜在的编辑框）。`EnumChildWindows()`为它找到的每个子窗口调用一个回调函数，因此很容易通过子窗口列表“搜索” -`GetClassName()`用于查找控件的名称 - 可能找到所需控件的 HWND（窗口句柄） .

一旦您找到了编辑框的正确 HWND（当然，鉴于您的问题的一般范围，这是困难的部分），一个简单的调用`SetForegroundWindow(targetHWND)`应该将控件放在前面并将光标设置为准备就绪-类型编辑框。

这是我为帮助您入门而编写的一些工作示例代码。此代码将遍历所有活动窗口`EnumWindows()`，然后调用`EnumChildWindows()`每个父级，打印出它找到的所有控件。请注意，此代码需要 JNA 库才能运行。

```
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.examples.win32.W32API.HWND;
import com.sun.jna.examples.win32.W32API.LPARAM;
import com.sun.jna.win32.StdCallLibrary;
import com.sun.jna.win32.W32APIOptions;

public class IterateChildWindows {
    public interface User32 extends StdCallLibrary {
        User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class, W32APIOptions.DEFAULT_OPTIONS);

        HWND FindWindow(String lpClassName, String lpWindowName);
        int GetWindowRect(HWND handle, int[] rect);
        int SendMessage(HWND hWnd, int msg, int wParam, byte[] lParam); 
        HWND FindWindowEx(HWND parent, HWND child, String className, String window);

        boolean EnumWindows(WNDENUMPROC lpEnumFunc, Pointer arg);
        boolean EnumChildWindows(HWND parent, WNDENUMPROC callback, LPARAM info);

        interface WNDENUMPROC extends StdCallCallback {
            boolean callback(HWND hWnd, Pointer arg);
        }

        int GetWindowTextA(HWND hWnd, byte[] lpString, int nMaxCount);
        long GetWindowLong(HWND hWnd, int index);
        boolean SetForegroundWindow(HWND in);
        int GetClassNameA(HWND in, byte[] lpString, int size);
    }

    public static void main(String[] args) {        
        User32.INSTANCE.EnumWindows(new User32.WNDENUMPROC() {
            public boolean callback(HWND hWnd, Pointer userData) { // this will be called for each parent window found by EnumWindows(). the hWnd parameter is the HWND of the window that was found.
                byte[] textBuffer = new byte[512];
                User32.INSTANCE.GetWindowTextA(hWnd, textBuffer, 512);
                String wText = Native.toString(textBuffer);
                System.out.println("Window found: " + wText);

                // now call EnumChildWindows() giving the previously found parent window as the first parameter
                User32.INSTANCE.EnumChildWindows(hWnd, new User32.WNDENUMPROC() {
                    public boolean callback(HWND hWnd, Pointer userData) { // this is called for each child window that EnumChildWindows() finds - just like before with EnumWindows().
                        byte[] textBuffer = new byte[512];
                        User32.INSTANCE.GetClassNameA(hWnd, textBuffer, 512);
                        System.out.println(" - Found sub window / control class: " + new String(textBuffer).trim());
                        return true;
                    }
                }, null);
                return true;
            }
        }, null);
    }
} 
```

以下是此代码提供的输出摘录：

```
Window found: Pidgin
 - Found sub window / control class: gdkWindowChild
 - Found sub window / control class: gdkWindowChild
 - Found sub window / control class: gdkWindowChild
 - Found sub window / control class: gdkWindowChild
Window found: Malwarebytes Anti-Malware
 - Found sub window / control class: Static
 - Found sub window / control class: Static
 - Found sub window / control class: Button
 - Found sub window / control class: Button
 - Found sub window / control class: Button 
```

`PostMessage()`通过和直接向控件的 HWND 发送消息`SendMessage()`，例如向 MalwareBytes`Button`类，将触发程序本身的按钮按下，非常类似于 SetForegroundWindow() 应该如何将编辑框样式控件置于前面，从而使您能够输入。有趣的东西玩:)

如果您希望在我说“父母”、“孩子”和“控制”时形象化我的意思，您可能会发现这个程序很有帮助：[控制查看器](http://www.autoitscript.com/forum/topic/126716-control-viewer-autoit-window-info-tool/)。它可以向您显示每个控件并在应用程序窗口中突出显示它等等 - 非常有用的工具。

很抱歉，如果这篇文章离开了 java 提供的舒适区，但在如此广泛的范围内确实没有其他方法可以实现您的目标。

我希望我至少向您展示了实现目标所需的条件，并为您指明了正确的方向。当谈到原生 Windows API 时，我不是上帝，所以我可能在某些地方错了，但是代码确实有效。祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:57:24.363

我的朋友，Robot 类可以模拟书写文本。

```
private static void typeOut(String s,Robot bot)
{
try
{
char [] chars = s.toCharArray();
for (char c : chars) 
{
bot.keyPress((int)c);
bot.keyRelease((int)c);
}
}
catch (Exception e) 
{
System.out.println(e.getMessage());
}
} 
```

您可以通过以下方式使用此方法

```
Robot bot=new Robot();    
typeOut("WWW.GOOGLE.COM", bot); 
```

如果您想以任何方式阅读文本或将文本写入浏览器上的文本字段，我建议您使用 selenium。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-02T06:10:56.227

对于这类问题，[AutoIt](http://www.autoitscript.com/site/autoit/)比 Java 更简单、更通用。

# javascript - 在jquery中匹配url

> ID：11771641
> 
> 赞同：0
> 
> 时间：2012-08-02T05:41:27.940
> 
> 标签：javascript, jquery, html, regex

> **可能重复：**
> [使用 jQuery 获取 URL 参数](https://stackoverflow.com/questions/1403888/get-url-parameter-with-jquery)

我的浏览器中有这个网址

```
http://docs.google.com?k=account&cs=This%20Site&u=https%3A%2F%2Faccess.dev.google.com 
```

我需要检查**你**的参数是否有 http 或[https://access.dev.google.com](https://access.dev.google.com)然后执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:06:11.327

可能：

```
var hr = 'http://docs.google.com?k=account&cs=This%20Site&u=http%3A%2F%2Faccess.dev.google.com'; //window.location.href;

var res = hr.match(/u=(http|https)%3A%2F%2Faccess.dev.google.com/g);
if(res != null) alert('ok');
else alert('not found'); 
```

看看 jensgram 评论。/u= 应该是：[?&]u=

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:15:30.353

这是一个可爱的非正则表达式版本。

```
var path = window.location.pathname;
//assuming you want the path for http://docs.google.com?k=account&cs=This%20Site&u=https%3A%2F%2Faccess.dev.google.com

if(path.substring(path.indexOf('u='​)+2, path.indexOf('u=')+7) == 'https') {
    //execute if https, or change to +2, +6 for http
}​​​​​​​​​ 
```

我不知道这是否正是您要寻找的东西，但值得一试。

# java - 使用 IPC 组合多种语言

> ID：11771644
> 
> 赞同：6
> 
> 时间：2012-08-02T05:41:44.973
> 
> 标签：java, c, air, shared-libraries, ipc

这是一个关于软件设计的一般“菜鸟”问题，所以如果它看起来含糊不清，我深表歉意，但我真的很感激你的建议。请注意，下面描述的系统纯粹是一个示例，而不是我想到的特定产品。

我经常需要结合使用不同语言编写的多个库或实用程序的功能。例如，如果我想为桌面编写一个高性能的音频处理应用程序，我会用 C/C++ 编写它。然后，我想添加一个漂亮的 GUI。但我不想学习Qt。我喜欢 Adob​​e Air 的外观和感觉，并希望使用它。后来，我需要访问一个 USB 设备。但是我拥有的 USB 库只有一个 Java 的 API。我如何将所有这些元素结合在一起，以利用它们的相对优势？

显然，我无法将这些不同的元素编译成一个可执行文件。所以我需要分别创建和运行它们，并为它们提供交流的方式。最常见的方法似乎是使用 IPC（进程间通信），例如共享内存或套接字。我更喜欢套接字的想法，因为这些程序可能会在网络上的不同机器上运行。

所以我决定创建一个本地客户端/服务器系统，使用自定义 API，以允许这些元素进行通信。例如，Air 应用程序将收到来自 C 应用程序的消息，告诉它更新它的 UI。在 Java 中运行的 USB 应用程序将使用套接字将音频从 USB 硬件流式传输到 C 应用程序中。

我的问题：以这种方式使用本地套接字是设计这种系统的典型方式吗？性能会比真正的原生应用程序（例如 Java 或 C 中的所有内容，在单个可执行文件中）差很多吗？这种方法似乎也很可能容易出现错误，并且难以维护？

我经常发现自己遇到了现有软件库的限制（例如，具有漂亮、灵活的 UI 但无法访问低级硬件的图形库，或者可以混合许多音频流但不支持的媒体库视频播放），并发现它非常令人沮丧。如果有人能建议像这样组合任意软件库的最佳方法，我将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T06:34:08.073

正如您正确识别的那样，组合来自不同语言或平台的库是很困难的。有几种方法可以做到这一点，但没有一种是理想的。例子：

*   本机调用接口（例如 JNI / JNA） - 速度非常快，但很难正常工作，而且您遇到的问题是所使用的数据类型通常不能在不同平台之间干净地映射。添加本机依赖项。
*   带有文本协议（XML、JSON 等）的基于套接字的 IPC - 工作正常，两端可能都支持通用格式，但会增加很多开销。维护自定义模式映射等可能会很痛苦。
*   带有二进制协议（例如 Google 协议缓冲区）的基于套接字的 IPC - 非常高效，需要大量工作才能使自定义协议在两端正常工作
*   通过第三个系统（例如数据库、消息队列、文件系统）进行通信 - 大量开销，可能变得脆弱，引入了对第三个系统的主要依赖。

以我的经验，仅仅为了获得一个特定的库或功能而集成一种新的语言/平台通常*是不值得的。*以您的用户界面为例 - 无论 Adob​​e Air 看起来多么漂亮，我怀疑是否值得尝试将其与现有的 C/C++ 应用程序集成。

即使您让它工作，它也会使您的应用程序的未来维护和开发变得非常复杂。构建变得更加复杂。您需要维护额外的通信/“粘合”代码。您需要管理更多的依赖项。您的用户将受到更多配置问题的影响。测试变得更加困难。教新人整个系统如何工作变得更加困难。您需要在更多语言/框架等方面保持技能。

我推荐以下策略：

1.  选择*主要平台*
2.  每当您需要新的库或功能时，请先在您的主要平台上寻找一些东西。希望（通常？）有一些好的东西可用 - 但即使没有，如果需求非常小，也可能值得自己编写一些东西。
3.  只有在主平台*没有合理选择*的情况下，才可以开始考虑整合新的语言/平台

就主要平台而言，我通常建议使用 Java、Scala 或 Clojure 等 JVM 语言，因为 JVM 设计精良、性能出色、可移植性高并且拥有最大/最具凝聚力的库生态系统（其中大部分是开放的）来源）。因此，JVM 可能是最好的“通用”选择，除非您有一些在 JVM 上不太可能实现的非常具体的要求，例如：

*   如果您正在进行大量需要硬件访问的嵌入式/实时/系统编程，您可能需要使用 C/C++
*   如果您纯粹为基于 Web 的客户端编写代码，您可能想要使用 JavaScript（如果您也在服务器端编写代码，您可以考虑可以在 JVM 上运行的 JavaScript 代码生成框架/库，例如 Vaadin 或 ClojureScript）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:02:32.957

答案在很大程度上取决于您使用的技术，并且对此没有灵丹妙药的解决方案。

通常，此解决方案将属于以下类别之一：

*   一些进程间通信技术

*   语言/平台本身提供的集成

*   数据库/一些公共存储（甚至文件:)）

第一个示例：套接字/管道/操作系统允许的任何内容。CORBA - 允许用不同的语言编写分布式代码。Google protobuf - 允许数据对象的序列化/反序列化及其语言不可知

其次，它实际上取决于您使用的语言/生态系统。java的例子：

*   JNI - Java Native 接口 - 允许在 JVM 之外执行代码 (dlls/so)。
*   JCA - 如果您在企业环境中 - 您可以在其中编写与遗留系统的集成。

对于编译成本机代码的语言来说，它不那么棘手 - 你可以编写和编译一些代码，比如在 Pascal 中，然后在 C 中使用 DLL。

有时当我们谈论 Java 时，有很多语言都有自己的语法和编译器，但它们的编译器编译成可以在 jvm 中运行的 java 二进制代码。因此，如果您的解决方案基于这些语言，则集成会更容易。Scala、Groovy、Closure、Jython 等语言都属于这一类。

最后但并非最不重要的技术是 Web 服务。这是一个非常流行的用于集成不同系统的工具，尽管它更多地用于企业环境。基本上它是对套接字层的抽象，允许在进程/服务器之间以 XML/JSON 格式发送数据对象。XML 和 JSON 都与语言无关，因此在用 C++ 编写的程序中创建 XML 然后在 JAVA 中使用它不是问题。

希望这可以帮助

# php - PHP重定向取决于用户MySQL中的列数据

> ID：11771651
> 
> 赞同：-1
> 
> 时间：2012-08-02T05:42:21.710
> 
> 标签：php, mysql, session, redirect, facebook-php-sdk

我用 Facebook 登录 API 创建了一个登录页面。当用户登录时，我已将用户数据（姓名、性别等）存储到 MySQL 数据库中（表中的“gorg”列除外）。

然后，我会将用户重定向到“newgg.php”，它有两个链接“Giver”和“Gatherer”。因此，用户可以选择其中之一。

我的示例代码：

```
<?php

session_start();
error_reporting(E_ALL);

include('src/sql_handler.php');
include('src/facebook_handler_core.php');

$new_fb = new facebook_handler_core;
$new_fb->run();

if (isset($_SESSION['gorg']) == "Gatherer") {
  header('Location: map.php');
}

?> 
```

我的目标是根据他们第一次访问页面时按下的按钮重定向他们，这是按钮代码

```
<form method="post" action="<?php echo $PHP_SELF;?>">
      <input type="submit" class="button orange" name="Giver" value="Giver">
</form>

<form method="post" action="<?php echo $PHP_SELF;?>">
      <input type="submit" class="button orange" name="Gatherer" value="Gatherer">
</form> 
```

现在最后但并非最不重要的一点是，如果他们之前已经选择了他们的用户类型，则只需根据用户表中“gorg”列读取的内容来重定向他们。

关于为什么我的代码无法正常工作的任何想法？

以防万一您需要它们，这里是 sql_handlers

```
<?php

class MySQL_Con {
private $host = 'localhost',
        $user = 'NUNURBSINESS',
        $pass = 'ASKMEANDMAYBE',
        $db = 'teknolog_fruitforest',
        $_CON;

function MySQL_Con() {

    $this->_CON = mysql_connect($this->host, $this->user, $this->pass);
    if(!$this->_CON)
        die(mysql_error());
    else {
        $select_db = mysql_select_db($this->db);

        if(!$select_db)
            die('Error Connecting To Database'.mysql_error());
    }
}

function End_Con() {
    mysql_close($this->_CON);
}
}
?> 
```

现在是 facebook_handler_core.php

```
<?php

class facebook_handler_core extends MySQL_Con {
public $session,$_INFO = array(),$U_INFO = array();

public function run() {
    require('src/facebook.php');

    $set_fb = new Facebook(array(
                'appId' => 'MYAPPID',
                'secret' => 'CANTTELLYOU',
                'cookie' => true));

    $this->session = $set_fb->getUser();

    if($this->session != 0) {
        $this->_INFO = $set_fb->api('/me');

        if(!empty($this->_INFO))
            $this->fb_session_handler();
    }
}

function fb_session_handler() {
    $SQL_CON = new MySQL_Con;
    $SQL_CON->MySQL_Con();
    $query = mysql_query("SELECT * FROM users WHERE oauth_provider = 'facebook' AND email = '" .mysql_real_escape_string($this->_INFO['email'])."'") or die(mysql_error());

    if(mysql_num_rows($query) > 0) {
        $this->U_INFO = mysql_fetch_array($query) or die(mysql_error());
    } else {
        $photolink = 'http://graph.facebook.com/'.$this->session.'/picture?type=square';

        $query = mysql_query("INSERT INTO users(oauth_uid, oauth_provider, username, first_name, last_name, email, pic_square, gorg, gender)VALUES('".mysql_real_escape_string($this->session)."','facebook',    '".mysql_real_escape_string($this->_INFO['name'])."',      '".mysql_real_escape_string($this->_INFO['first_name'])."','".mysql_real_escape_string($this->_INFO['last_name'])."','".mysql_real_escape_string($this->_INFO['email'])."','".mysql_real_escape_string($photolink)."','null','".mysql_real_escape_string($this->_INFO['gender'])."')") or die(mysql_error());

        $query = mysql_query("SELECT * FROM users WHERE email='".mysql_real_escape_string($this->_INFO['email'])."'") or die(mysql_error());

        $this->U_INFO = mysql_fetch_array($query) or die(mysql_error());

    }

    $SQL_CON->End_Con();
    $gorg = $this->U_INFO['gorg'];

    if($gorg != null) {
        $_SESSION['gorg'] = $gorg;
    }

    $_SESSION['email'] = $this->U_INFO['email'];
    $_SESSION['image'] = $this->U_INFO['pic_square'];
    $_SESSION['gender'] = $this->U_INFO['gender'];

    if($gorg != null) {
        if($gorg == 'Giver') {
            //redirect to Giver
            header('Location: picktreetype.php');
        }

        if($gorg == "Gatherer") {
            //redirect to Gatherer
        }
    }

    return true;
}

function update_user($param) {
    $SQL_CON = new MySQL_Con;
    $SQL_CON->MySQL_Con();

    if($param == 'Giver')
        $query = mysql_query("UPDATE users SET gorg='".mysql_real_escape_string($param)."', FF_Points='100' WHERE email='".mysql_real_escape_string($_SESSION['email'])."'") or die(mysql_error());

    if($param == 'Gatherer')
        $query = mysql_query("UPDATE users SET gorg='".mysql_real_escape_string($param)."', FF_Points='30' WHERE email='".mysql_real_escape_string($_SESSION['email'])."'") or die(mysql_error());

    $SQL_CON->End_Con();

    if(!$query)
        return false;
    else
        return true;
}
}
?> 
```

在此先感谢，在获得帮助和适当的指导方面，我无法从该网站获得足够的帮助，我非常感谢过去任何人给予我的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:48:53.567

问题是你在做

```
isset($_SESSION['gorg']) == "Gatherer" 
```

as`isset()`返回一个布尔结果，使用`==`将匹配任何非显式假值。`===`如果您使用（身份比较运算符），您将获得问题的直接证据。

因此，在您的情况下，“Gatherer”被评估为非 FALSE，即 TRUE。

每次。

你不应该使用这种比较；而是尝试：

```
isset($_SESSION['gorg']) && $_SESSION['gorg'] == "Gatherer" 
```

`gorg`如果您希望在进行任何其他评估之前继续检查是否已设置。

# c# - 方法体内的属性

> ID：11771653
> 
> 赞同：0
> 
> 时间：2012-08-02T05:42:26.237
> 
> 标签：c#, reflection, attributes

我知道`attributes` *方法体内不支持*它，但我想知道也许有人可以解决这个问题。我感兴趣的是一种允许您进入`custom Attribute`方法体内部并进入两件事的技术。

1.  课堂强化（创建对象`Foo foo = new Foo()`）
2.  当该对象调用特定函数时 ( `foo.bar()`)

稍后我打算使用`metadata`输入的`attributes`using `reflection`。我遇到了一群人，他们实际上认为他们必须`extented c#`这样做，但由于没有可下载的，我无法验证它。

这是他们研究论文的链接 [Freely Annotating c#](http://www.jot.fm/issues/issue_2005_12/article2.pdf) 请告诉我解决方案

**更新**

进一步反思，我已经知道类 Foo 及其方法栏的名称。这样做的目的是知道 foo 在某些方法中调用了 bar() 。

例如

```
 static void Main()
       {
           [p1inst]  
           ConcretePrototype1 p1 = new ConcretePrototype1("I");

           [p1call]  
           ConcretePrototype1 c1 = (ConcretePrototype1)p1.Clone();
           Console.WriteLine("Cloned: {0}", c1.Id);

           // Wait for user 
           Console.Read();
       } 
```

以上是说明结果的示例。目前无法完成，因为编译器给出错误。但上述研究论文的作者声称他们这样做是为了允许方法体内的属性

**重点是确定在某些方法中`FOO`存在一个类型的对象并且该对象已调用`bar()`或未调用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:29:35.993

我认为你走错了路。方法中不能有属性。您要么没有完整阅读论文，要么错过了一些要点。

它谈到了一个源到源编译器，它只是翻译

```
public void m() {
    Console.WriteLine("Parallelable code sample");
    [Parallel("Begin of a parallel block")] {
        Console.WriteLine("Code exec by the main thread");
        [Process("First process")] { /∗ Computation here ∗/ }
        [Process] { /∗ Computation here ∗/ }
    }
    Console.WriteLine("Here is sequential");
} 
```

进入这个 C# 代码：

```
[Parallel("Parallelable code sample", ACSIndex=1)]
[Process("First process", ACSIndex=2)]
[Process(ACSIndex=3)]
public void m() {
    Console.WriteLine("Parallelable code sample");
    Annotation.Begin(1); { // [Parallel]
        Console.WriteLine("Code exec by the main thread");
        Annotation.Begin(2); /∗ [Process("First process")] ∗/ { · · · }
        Annotation.End(2);
        Annotation.Begin(3); /∗ [Process] ∗/ { · · · }
        Annotation.End(3);
    } 
    Annotation.End(1);
} 
```

因此，当在类`Begin(1)`上调用该方法时`Annotation`，它只会使用`ASCIndex=1`.

* * *

要解决您的实际问题，您应该查看[StackTrace](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)类。

**例子：**

```
void Main()
{
    var f = new FooClass();
    f.Foo();
}

class BarClass
{
    public static void Bar()
    {
        var st = new StackTrace();
        var frame = st.GetFrame(1);
        var m = frame.GetMethod();
        Console.WriteLine(String.Format("'{0}' called me from '{1}'", m.DeclaringType.Name, m));
    }
}

class FooClass
{
    public void Foo()
    {
        BarClass.Bar();
    }
} 
```

**输出：**

> 'FooClass' 从'Void Foo()' 给我打电话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:11:06.680

您可以将带有方法名称的字典添加到类中...在通过反射的方法中，您可以找到方法名称，然后在字典中查找包含您的属性的匹配值。

我认为您甚至不需要将字典中的方法名称预先添加为键；您可以在函数第一次运行时将它们放在那里。

# perl - 如何在网页中搜索字符串并打印存在搜索字符串的整行？

> ID：11771655
> 
> 赞同：2
> 
> 时间：2012-08-02T05:42:28.633
> 
> 标签：perl

我是编程新手，也在学习 perl。

这是我的问题：如何在网页中搜索字符串并打印存在搜索字符串的整行？

是否可以直接找到/点击该字符串，然后打印存在搜索字符串的整行？我们需要为此强制使用 xpaths 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:51:22.630

如果它只是您正在寻找的一个非常基本的字符串，您可以使用[LWP::Simple](https://metacpan.org/module/LWP%3a%3aSimple)和一个像这样的小正则表达式：

```
use LWP::Simple;

my $doc = get('http://stackoverflow.com/q/11771655/479133') || die "GET failed";
foreach my $line (split("\n", $doc)) {
    print $line and last if $line =~ m/Here's my query/;
} 
```

CPAN 上有无数的模块可以做这些事情。如果您需要“更大”的东西，请查看[Task::Kensho::WebCrawling 。](https://metacpan.org/module/Task%3a%3aKensho#Web-Crawling%3a-Task%3a%3aKensho%3a%3aWebCrawling)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T05:58:30.357

[`LWP::UserAgent`](https://metacpan.org/module/LWP%3a%3aUserAgent)并且[`HTML::Parser`](https://metacpan.org/module/HTML%3a%3aParser)可以使用：

```
#!/usr/bin/env perl

use strict;
use warnings;

use HTML::Parser;
use LWP::UserAgent;

my $ua = LWP::UserAgent->new;
my $response = $ua->get('http://search.cpan.org/');
if ( !$response->is_success ) {
    print "No matches\n";
    exit 1;
}

my $parser = HTML::Parser->new( 'text_h' => [ \&text_handler, 'dtext' ] );
$parser->parse( $response->decoded_content );

sub text_handler {
    chomp( my $text = shift );

    if ( $text =~ /language/i ) {
        print "Matched: $text\n";
    }
} 
```

# css - CSS下拉菜单没有正确堆叠

> ID：11771656
> 
> 赞同：0
> 
> 时间：2012-08-02T05:42:33.763
> 
> 标签：css, drop-down-menu

我正在尝试使用css（js.fiddle： http: [//jsfiddle.net/Zbv6f/6/](http://jsfiddle.net/Zbv6f/6/)）制作一个下拉菜单，并且我希望子放置元素出现在父元素下方，但它出现在其上方。我已将放置元素的 z-index 设置为较低的值，但它不起作用。更令人困惑的是，我在上面显示的父级中有一个用 css 制作的箭头，具有相同的 z-index。

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:18:24.040

[**我认为您正在尝试在此演示**](http://jsfiddle.net/akhurshid/7TpW6/)中做类似的事情[](http://jsfiddle.net/akhurshid/7TpW6/)

 ****HTML添加：**

```
<div id="tab">
    <div class="reviewarrow-top"></div>
    <div class="reviewarrow-bottom"></div>
    Exam Reviews
</div> 
```

**CSS 修改/添加**：

```
/* Modifications */
.review-announcement {
    height:55px; 
    width: 165px;
    border:2px #003577 solid;    
    text-align:right;
    position: absolute;
    right: 0px;
    top: 150px;
}

/* Addition */
#tab { 
    position: relative; 
    z-index:5; 
    background: #fff; 
    height: 25px; 
    padding:15px 15px 15px 0;
    color:#003577;
    font-weight:bold;
    font-size:18px;
    right:0px;
}

/* Addition */
#tab:hover {   
    color: #003577;
    background:#FAA301;
}

/* Addition - tab will remain active while container is visible. */
.review-announcement:hover > #tab {
    color: #003577;
    background:#FAA301;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:09:25.400

这是我从你的问题中得到的工作[**演示，**](http://jsfiddle.net/uttara/Zbv6f/22/)

希望这对你有帮助**

# php - Javascript 侦听器，它们是否保存在内存中？

> ID：11771662
> 
> 赞同：3
> 
> 时间：2012-08-02T05:43:08.007
> 
> 标签：php, ajax, events, browser, listener

我正在构建一个我认为是相当大的 Web 应用程序，它在一个 html 前端中使用 Ajax 调用和多个“窗格”。

该应用程序很可能会在台式机上顺利运行，但该应用程序也是可在 iPad 上使用的付费服务。

我的问题是关于浏览器使用事件监听器的方式，因为我使用了大量的事件监听器。浏览器是否将所有这些都保存在内存中，或者只是在它们被调用时查找它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:45:51.700

这取决于每个浏览器的 JavaScript 引擎，例如 V8 在 32 位系统上最多可以支持 512mb，在 64 位系统上最多可以支持 1gb。

您可以检查其他浏览器，但是要通过回调达到这个数量几乎是不可能的，或者如果您这样做，您可能会找到一些方法来优化您的应用程序！

所以如果我是你我就不会担心这个问题

顺便说一句，Safari 上的 iPad JavaScript 引擎是 Nitro，它比在 IE9 上运行的引擎要好得多，所以如果你的应用程序在 IE9 上运行良好，那么你在 iPad 上就可以了！

[http://javascript.crockford.com/performance.html](http://javascript.crockford.com/performance.html)

# python - Pygame，线通过点存储在2个数组中

> ID：11771666
> 
> 赞同：0
> 
> 时间：2012-08-02T05:43:41.283
> 
> 标签：python, pygame

我有两个数组，其中包含要通过的线的​​点。一个数组有十个定义 x 值的随机元素，另一个有十个定义 y 值的元素。

使用 Pygame，我应该如何画线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:02:16.010

使用[zip](http://docs.python.org/library/functions.html#zip)方法将您的列表组合成一个点列表

* * *

**例子**

```
import pygame

pygame.init()
screen = pygame.display.set_mode((300, 300))

x = (0, 100, 200, 300)
y = (300, 100, 20, 50)

points = zip(x, y)
last = None
for p in points:
    if last:
        pygame.draw.line(screen, (255,255,0), last, p)
        print last, p
    last = p

pygame.display.flip() 
```

**结果：**

> (0, 300) (100, 100)
> (100, 100) (200, 20)
> (200, 20) (300, 50)

![在此处输入图像描述](../Images/bc99bb72966d6ee9f0e6080ede35e026.png)

# c++ - 为什么这段代码在 GCC 中调用通用模板函数？

> ID：11771671
> 
> 赞同：2
> 
> 时间：2012-08-02T05:43:57.030
> 
> 标签：c++

```
#include<iostream>

using namespace std;

// define the general compare template
 template <class T>
 int compare(const T& t1, const T& t2) {
   cout<< "Common_T"<<endl;
   return 0;

 }
 template<>
 int compare<const char*>( const char * const& s1,
                          const char * const& s2)
 {
    cout<< "Special_T"<<endl;
    return 0;
 }
typedef const char  char6[6];
     template<>
             int compare<char6>(const char6& s1,const char6& s2)
    {
            cout << "Special_Char6_T" << endl;
             return 0;
    }

 int main() {
     int i = compare("hello" , "world");
 } 
```

结果是：

```
Common_T 
```

我的问题是：为什么不输出“Special_Char6_T”？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:51:21.850

This is the correct template specialization that matches your c strings.

```
typedef char char6[6];
template<> int compare<char6>(char6 const &s1,char6 const &s2)
{
    cout << "Special_Char6_T" << endl;
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T05:50:37.847

Intuitively, because the dimension of arrays is not part of their type. That dimension matters only for variables and fields. So both

```
 char hello[6]="hello"; 
```

and

```
 char longstring[] = "a very very long string should be here"; 
```

have both the same type `char[]`

and

```
 typedef char t1[6]; 
```

and

```
 typedef char t2[]; 
```

are aliases for the "same" type.

(You could look at the [mangled function names](http://en.wikipedia.org/wiki/Name_mangling) to have a clue)

# android - 如何在android项目中添加公钥

> ID：11771673
> 
> 赞同：0
> 
> 时间：2012-08-02T05:44:08.797
> 
> 标签：android

我从 android 市场获得了一个公钥，我想知道如何在我的 android 项目中添加该公钥，谁能告诉我如何在我的 android 项目中添加公钥，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:53:47.847

在您的 Eclipse android 项目上，右键单击并选择 Android 工具 -> 选择“导出签名的应用程序包。按照此操作，使用您的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:49:40.123

The only reason you would need to use that key is if you were implementing a service like, but not limited to, [in app billing](http://developer.android.com/guide/google/play/billing/index.html). In such a case, you'll need to consult the documentation for that service as to where you are supposed to put the key, as it varies.

# .net - XML 将所有属性序列化为一个类的 CDATA（通过 IXmlSerializable？）

> ID：11771674
> 
> 赞同：0
> 
> 时间：2012-08-02T05:44:14.267
> 
> 标签：.net, asp.net-mvc-3, xml-serialization

对于子类“作业”的所有属性，我有一个丑陋的要求，以序列化为包装在 CDATA 标记中的 XML。这是规范： http: [//www.indeed.com/intl/en/xmlinfo.html](http://www.indeed.com/intl/en/xmlinfo.html)

我找到的所有答案都建议了一种适用于一个或两个属性的方法，而不是整个类。例如：[如何使用 XmlSerializer 将字符串序列化为 CDATA？](https://stackoverflow.com/questions/1379888/how-do-you-serialize-a-string-as-cdata-using-xmlserializer)

该文章中的一条评论建议在单个类上实现 IXmlSerializable。听起来这可能是一种更好的方法，因为我的作业类上的每个属性都需要 CDATA 包装器，而我在其他任何地方都没有这个要求。但是，如果有一个 per-property 成员可以覆盖序列化程序，我可以在执行此操作时利用它，那就更好了。

**关于如何将 CDATA 实现从 200 行代码减少到 10 行的任何想法？**如果没有 CDATA 要求，这将是多么简单：

```
public class job {
    public string title { get; set; }
    public DateTime date { get; set; }
    public int referencenumber { get; set; }
    public string url { get; set; }
    public string company { get; set; }
    public string city { get; set; }
    public string state { get; set; }
    public string country { get; set; }
    public string postalcode { get; set; }
    public string description { get; set; }
    public string salary { get; set; }
    public string category { get; set; }
    public string experience { get; set; }

    public job(DataModel.PostedJob postedJob, UrlHelper urlHelper) {
        country = "US";
        category = "contract, project, consulting";
        title = postedJob.Title;
        date = postedJob.PostedOn;
        referencenumber = postedJob.Id;
        url = urlHelper.Action(MVC.SearchJobs.Index(postedJob.Id));
        company = postedJob.Company;
        city = postedJob.City;
        state = postedJob.State;
        postalcode = postedJob.PostalCode;
        description = postedJob.Description;
        experience = postedJob.MinYears.ToString() + "+ years";
    }

    public job() { }
} 
```

编辑：请注意，我目前正在使用此处显示的 MvcContrib“XmlResult”代码片段对其进行序列化：[Return XML from a controller's action in as an ActionResult?](https://stackoverflow.com/questions/134905/what-is-the-best-way-to-return-xml-from-a-controllers-action-in-asp-net-mvc) ...属性名称本身的非传统情况反映了上面链接的规范所需的 XML 模式。我认为由于视图模型属性通常与消费者紧密耦合，因此它是合适的，但请随时纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:31:18.210

如果一切都很简单，您可以使用 LINQ to XML 编写自己的序列化程序。

这是一个*非常*粗糙的版本......您需要使其涵盖您需要的所有类型，并在必要时考虑如何表示空引用。

```
using System;
using System.Linq;
using System.Reflection;
using System.Xml.Linq;

class Foo
{
    public string Name { get; set; }
    public int Value { get; set; }
    public DateTime When { get; set; }
}

class Test
{
    static void Main()
    {
        Foo foo = new Foo { 
            Name = "Jon", 
            Value = 5,
            When = DateTime.Now
        };

        XElement element = Serialize("Foo", foo);
        Console.WriteLine(element);
        Foo bar = Deserialize<Foo>(element);
        Console.WriteLine("Deserialized values:");
        Console.WriteLine("{0}, {1}, {2}", 
                          bar.Name, bar.Value, bar.When);
    }

    static XElement Serialize(XName elementName,
                              object value)
    {
        return new XElement(elementName,
          value.GetType()
               .GetProperties()
               .Select(p => new XElement
                   (p.Name, ConvertValue(p.GetValue(value, null)))));

    }

    static XCData ConvertValue(object value)
    {
        // This is a bit odd. It takes advantage of LINQ
        // to XML being nice with XElement, but not for
        // XCData
        XElement tmp = new XElement("ignored", value);
        return new XCData(tmp.Value);
    }

    static T Deserialize<T>(XElement element) where T : new()
    {
        T ret = new T();
        foreach (var sub in element.Elements())
        {
            var property = typeof(T).GetProperty(sub.Name.LocalName);
            SetProperty(property, sub, ret);
        }
        return ret;
    }

    static void SetProperty(PropertyInfo property,
                            XElement element,
                            object target)
    {
        // This is somewhat annoying. There should be a better
        // way...
        var type = property.PropertyType;
        object value;
        if (type == typeof(string))
        {
            value = (string) element;
        } 
        else if (type == typeof(int))
        {
            value = (int) element;
        }
        else if (type == typeof(DateTime))
        {
            value = (DateTime) element;
        }
        // ...
        else
        {
            throw new Exception("Can't convert " + type);
        }
        property.SetValue(target, value, null);
    }
} 
```

# yii - Yii 框架上的 JCarousel 小部件不加载图像

> ID：11771690
> 
> 赞同：1
> 
> 时间：2012-08-02T05:46:00.570
> 
> 标签：yii, jcarousel, yii-extensions

我正在尝试在 Yii 框架上使用 JCarousel 小部件。

我的 JCarousel 必须显示属于特定画廊（针对该用户）的特定用户的图像。我从 MySQL 数据库中检索有关图像的信息，具体来自 Photos 表，其中 gallery_id 具有确定的值。照片表中包含照片名称的列是“路径”。

在我写的代码中：

```
$DataProvider = new CActiveDataProvider('Photos', array('criteria'=>array(
                                        'condition'=>'gallery_id = :id',
                                        'params'=>array(':id'=>$gallery->id),
                                   ),));

$this->widget('ext.JCarousel.JCarousel', array(
                   'dataProvider' => $DataProvider,
                   'thumbUrl' => '"/images/upload/".$data->id."_".$data->path',
                   'imageUrl' => '"/images/upload/".$data->id."_".$data->path',
                   'target' => 'big-gallery-item',
                   'vertical' => false,
         )); 
```

使用此代码，我在 div 上收到书面消息：“找不到结果”

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T08:45:21.007

*   检查您的数据提供者。尝试通过获取结果`$DataProvider->getData()`并检查您的照片是否存在。

我不认为扩展名中的错误，很可能是您没有从数据库中选择数据。

# c# - 获取sql server中的唯一值

> ID：11771695
> 
> 赞同：1
> 
> 时间：2012-08-02T05:46:21.990
> 
> 标签：c#, sql, sql-server

我正在使用以下查询查询我的表；

```
SELECT DISTINCT [RoleId], [RoleName], [RoleDescription], [PermissionId]  
FROM [Role] 
ORDER BY [RoleName] 
```

我得到以下结果；

```
RoleId  RoleName    RoleDescription PermissionId
   1        Admin            CanEdit        1
   2        Admin            asdf;lkj       2
   3        Admin            al;dskfj;l     3
   4        Admin            fa;ldkfjas;d   4
  17        SuperAdmin      aslkdfja;      1
  18        SuperAdmin      asldkfa;f      2
  15        Users           alskdfj;alk    1
  16        Users           aslkdfja;sl    2 
```

但是，我想获得 RoleName 的唯一值，即 RoleName 不应该重复，这已经在我的查询结果中。我想获得一次 RoleName 。 **如何获得唯一的 RoleName？**

**更新：** 我想用以下结果填充组合框；

```
Admin
SuperAdmin
Users 
```

但不重复（我已经在使用我的查询

```
Admin
Admin
Admin
Admin
SuperAdmin
SuperAdmin
Users
Users 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T05:52:48.707

如果您只想拥有 Distinct RoleName，那么您可以像这样查询表。

```
SELECT DISTINCT [RoleName]
FROM [Role]
ORDER BY [RoleName] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:04:13.373

您正在观看的答案有点复杂。如果您想要这种类型的结果，那么您可能必须将您的流程更改为“**添加角色**”。当您从前端插入角色时，您必须检查正在输入的角色名称是否在数据库中不存在。然后，您可以使用以下查询轻松获得您所看到的结果。

```
Select Distinct rolename,roleid from tblroles 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:31:56.750

你说你想要`RoleId`的也一样`RoleName`。好吧，你必须*告诉*系统选择**哪个** `RoleId`：

```
SELECT MIN(RoleId) as RoleId, RoleName
FROM Role
GROUP BY RoleName
ORDER BY RoleName 
```

在这种情况下，我有些武断地选择`RoleId`为每个名称使用最低的名称。如果您想使用不同的规则，那么您 a) 需要告诉*我们*该规则是什么，和/或 b) 需要告诉 SQL Server 该规则是什么。

# perl - 在 Linux 中运行时有时未设置 $0。可能是什么原因？

> ID：11771696
> 
> 赞同：2
> 
> 时间：2012-08-02T05:46:24.347
> 
> 标签：perl

我正在运行一个 Perl 程序，在该程序中我使用变量`$0`来获取脚本名称。虽然它在大多数情况下都能正常工作，但它并没有为少数脚本提供任何值。这些脚本与任何其他脚本相同，并且具有适当的名称。

有人可以帮我确定问题吗？如果您想了解更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:50:51.647

它并不总是设置为您可能认为的那样：

```
perl -e 'print $0'
-e 
```

请发布实际代码，显示一个不符合您预期的案例。例如，如果您从 eval 内部打印它，您希望它打印什么？

# linux - webos中LANG变量的路径

> ID：11771697
> 
> 赞同：0
> 
> 时间：2012-08-02T05:46:26.510
> 
> 标签：linux, webos, palm

我想知道 webOS 中 LANG 环境变量的路径或文件位置。我需要更改该变量的值。

# javascript - 有没有办法像这样延迟javascript执行？

> ID：11771699
> 
> 赞同：-2
> 
> 时间：2012-08-02T05:46:37.773
> 
> 标签：javascript, delay

> **可能重复：**
> [如何在函数运行后等待一段时间](https://stackoverflow.com/questions/8133947/how-to-wait-for-a-period-of-time-after-a-function-run)

这是代码示例：

运行1（）；

// 延迟 1 秒

运行2（）；

// 延迟 1 秒

运行3（）；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:02:16.647

不，它是浏览器中的异步事物，可以防止用户延迟使用它。您只能使用超时和回调。

对于您的建议，您可以组织类似队列的东西：

```
var cur = 0;
var functions = [run1, run2, run3, ...];

var next = function () {
  functions[cur]();
  cur += 1;
  if (cur == functions.length) clearInterval(interval);
};

var interval = setIntervar(next, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:47:34.380

使用[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout) () 函数，它允许您在执行代码之前延迟 x 毫秒数。

例如

```
run1();

setTimeout(function() {
    run2();

    setTimeout(run3, 1000);
}, 1000); 
```

# asp.net - html中的字符数限制

> ID：11771700
> 
> 赞同：0
> 
> 时间：2012-08-02T05:46:43.050
> 
> 标签：asp.net, html

我已经在文本框中设置了字符限制，但是在输入输入时，如果超过 9 个字符，它会继续输入另一个字段而不使用制表符

```
<input data-val="true" data-val-regex="Please enter valid SSN" data-val-regex-pattern="^\d{3}-\d{2}-\d{4}$" id="Ssn" name="Ssn" type="text" value="" class="valid"> 
```

我希望它应该停止接受输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:58:53.987

使用 maxlength 属性

```
<input data-val="true" data-val-regex="Please enter valid SSN" data-val-regex-pattern="^\d{3}-\d{2}-\d{4}$" id="Ssn" name="Ssn" type="text" value="" class="valid" maxlength="9"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:04:17.653

例如，您应该使用 jQuery

```
<input data-val="true" maxlength=9 data-val-regex="Please enter valid SSN" data-val-regex-pattern="^\d{3}-\d{2}-\d{4}$" id="Ssn" name="Ssn" type="text" value="" class="valid"><br>
<script lang="text/javascript">
    $("#Ssn").keyup(function(e)
    {
        var str=$("#Ssn").val();
        if(str.length==9)
        {
            $("#Ssn").blur();
        }
    });
</script> 
```

在此代码中，您必须先包含 jQuery

** 编辑误会

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:09:50.063

并非所有浏览器都完全支持模式属性正则表达式——特别是那些支持它们的浏览器并不总是遵循复杂的正则表达式。至少我在 Safari 中注意到了这一点。

该`maxlength`属性应该起作用。不知道为什么它不适合你。也许发布一个 JSBIN 示例供我们查看。

也就是说，对于复杂的客户端表单验证，您仍然需要依靠 javascript 来支持更广泛的浏览器。

# codeigniter - Codeigniter 你能告诉我关于 MY_Controller.php 和目录结构的信息吗？

> ID：11771701
> 
> 赞同：0
> 
> 时间：2012-08-02T05:46:48.637
> 
> 标签：codeigniter

我正在尝试了解有关 CI 的更多信息。昨天我尝试实现MY_Controller.php。我阅读了用户指南中的说明但我不知道它有什么好处？还有一件事我不明白使用它的想法。我已经写了 application/core/MY_Controller.php

```
class MY_Controller extends CI_Controller {

  protected $data = array();

  function __construct() {
    parent::__construct();
  }

  function render_page($view) {
    //do this to don't repeat in all controllers...
    $this->load->view('templates/header', $this->data);
    //menu_data must contain the structure of the menu...
    //you can populate it from database or helper

    $this->load->view($view, $this->data);
    $this->load->view('templates/footer', $this->data);
  }
} 
```

这是我的家庭控制器 application/controllers/home.php

```
class Home extends  MY_Controller  {

        public function view($page = 'home')
        {
         $this->load->helper('text');
            $this->data['records']= $this->services_model->getAll();

            if ( ! file_exists(APPPATH.'/views/pages/'.$page.'.php'))
            {
                // Whoops, we don't have a page for that!
                show_404();
            }

            $data['title'] = ucfirst($page); // Capitalize the first letter

              $this->render_page('pages/'.$page)
}
} 
```

我的视图在我的 application/views/pages/home.php 中。配置/routes.php：

```
$route['default_controller'] = 'home/view';
$route['(:any)'] = 'home/view/$1'; 
```

现在我收到 404 错误。我的问题是：

1) 为什么会出现 404 错误？2）如果我添加关于页面，我应该添加一个新的控制器还是使用家庭控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-22T14:45:48.983

**MY_Controller 控制器放入 application/core 文件夹** 然后使用

**MY_Controller**文件夹路径 application/core/MY_Controller.php

**Home Controller ** 文件夹路径 application/controllers/Home.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:49:41.860

类 Home 扩展 MY_Controller

到

类 Home 扩展 CI_Controller

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:51:39.767

1.  您获得 404 的原因是，您没有索引功能。CodeIgniter 默认在调用控制器时加载索引函数。

2.  没关系，但我建议您打开一个新控制器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T07:24:17.543

它现在正在工作。我通过一个干净的目录结构来修复。但我无法在源代码中看到模板/页眉和页脚。

# yii - 检查外部表中外键值的可用性

> ID：11771708
> 
> 赞同：1
> 
> 时间：2012-08-02T05:47:44.657
> 
> 标签：yii

假设我有 2 个表，A 和 B。B
有一个来自 A 的外键。
每当我将数据插入表 B 时，我应该检查表 A 中外键的可用性。
有什么方法可以执行此过程而不是执行此过程手动？

* * *

我自己google了一下，发现CExistValidator可能就是我想要的。
但是我没有找到任何使用该验证器的综合示例。
如果 CExistValidator 是答案，你能给我一些例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:48:12.833

假设你有一个`Category`有很多`Page`s 的类。您要确保`Page`属于某些现有的`Category`：

```
class Page {
  //...
  public function rules()
  {
    return array(
      array('category_id', 'exist', 'className' => 'Category', 'attributeName' => 'id'),
    );
  }
} 
```

# objective-c - 为什么/如何 NSUInteger 返回一个负数？

> ID：11771710
> 
> 赞同：5
> 
> 时间：2012-08-02T05:48:03.183
> 
> 标签：objective-c, xcode, casting, clang, primitive

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T05:50:47.240

`%ld` tells `NSLog` to print it as a signed integer. Try `%lu`.

See [2's Complement](http://en.wikipedia.org/wiki/Two%27s_complement) on wikipedia for an explanation of what's going on at the bit level.

What is happening here is that subtraction is causing the unsigned integer representation to wrap-around. To protect against this you need to check *before* you do the subtraction.

```
NSUInteger x = 5; 
NSUInteger y = 55;

// If 0 makes sense in your case
NSUInteger result = (x >= y) ? (x - y) : 0; 

// If it should be an error
if(x < y)
{
    // Report error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T19:26:47.027

真正的答案是如何解释这些位。当然，通过 2 的补码了解事情是如何在内部完成的很重要，但混淆似乎更多的是您在使用 %ld 时看到的是一个负数，并认为它与您在使用 % 时看到的正数有所不同鲁。两种情况都使用相同的位，这只是它们如何被解释的函数。如果您尝试将这些相同的位解释为字符序列，您会得到不同的结果。

# java - Java credential storage framework

> ID：11771713
> 
> 赞同：5
> 
> 时间：2012-08-02T05:48:16.663
> 
> 标签：java, storage, credentials

Is there a freely available credential storage framework for Java?

I have a desktop application that needs to store the users' credentials to external systems.

I'm just wondering if someone already has a framework to make this easy.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:04:36.287

您可以使用加密首选项，请参阅[此答案](https://stackoverflow.com/questions/3784657/what-is-the-best-way-to-save-user-settings-in-java-application)。是的，真的，只需单击此链接，您就会感到惊讶。（添加最后一句以使答案足够长而不会变成评论）。:-p

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:09:32.930

Oracle 提供了带有 Java API的[Credential Store Framework (CSF) 。](http://docs.oracle.com/cd/E17904_01/core.1111/e10043/devcsf.htm)

# jquery-mobile - jquery sqlite database text search engine

> ID：11771714
> 
> 赞同：0
> 
> 时间：2012-08-02T05:48:19.587
> 
> 标签：jquery-mobile, sqlite, search-engine

i am working on a search engine in jquery mobile I want to split words in an array for a database search the code I am using is:

```
var sear=$("#search").val();

var db = openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
db.transaction(function (tx) {
  tx.executeSql("SELECT * FROM DEMO WHERE (D_Indications LIKE ?);",
                ["%"+sear+"%"],        
                function (tx, results) {
                  $('#output').show();
                  var len = results.rows.length, i;
                  var row=results.rows.item(i);
                  for (i = 0; i < len; i++) {
                    $('#output2').append('<tr><td>'+ row.Cat_name +'</td><td>'+ row.Drug_Caty +'</td><td>'+ row.G_Name +'</td><td>'+ row.B_Name +'</td><td>'+ row.D_Indications +'</td></tr>').trigger('create');        
                  }
                });
}); 
```

I want it to split words after space and search each word individually in database. For eg. if a user types "hello world" I want it to search "%hello%" & "%world%" separately in the database

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T08:12:44.257

您可以通过拆分来定义它

```
 text = "Hello World"
   var SpaceCount = text.split(' ').length -1; 
```

然后你可以通过 SpaceCount 定义你有多少空间。

那么有一个条件：

```
if (SpaceCount==1){
  var lines = text.split(' ')
       $.each(lines, function(key, line) {

          var db = openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
            db.transaction(function (tx) {
           tx.executeSql("SELECT * FROM DEMO WHERE (D_Indications LIKE ?);",
            ["%"+ line +"%"],        
            function (tx, results) {
              $('#output').show();
              var len = results.rows.length, i;
              var row=results.rows.item(i);
              for (i = 0; i < len; i++) {
                $('#output2').append('<tr><td>'+ row.Cat_name +'</td><td>'+ row.Drug_Caty +'</td><td>'+ row.G_Name +'</td><td>'+ row.B_Name +'</td><td>'+ row.D_Indications +'</td></tr>').trigger('create');        
              }
            });
       }

} 
```

# sql - tsql very optimized UDF

> ID：11771716
> 
> 赞同：0
> 
> 时间：2012-08-02T05:48:35.243
> 
> 标签：sql, sql-server, tsql

What is the best code (UDF) to calculate the age given birthday? Very optimized code. I can write the date related code just to make sure what best answer I get from best minds in the industry.

Would like to calculate based on days.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:27:40.480

以下函数为我在此线程中评论的所有日期范围提供了非常合理的答案。您会注意到某些值可能会相差 1 天，但这是由于它们的长度不同而导致月份计算方式的伪影。二月总是给最麻烦的是最短的。但它不应该从航位推算开始超过 1 天（即使这归结为你应该如何计算月份的语义，仍然是一个有效的答案）。有时，它可能会给出您可能预期 1 个月的天数，但它仍然是一个合理的答案。

该函数直到最后只使用日期数学而不是字符串操作，当与返回类似准确计算的任何其他函数叠加时，该函数也应该产生非常好的性能。

```
CREATE FUNCTION dbo.AgeInYMDFromDates(
   @FromDate datetime,
   @ToDate datetime
)
RETURNS TABLE
WITH SCHEMABINDING
AS
RETURN (
   SELECT
      Convert(varchar(11), AgeYears) + 'y '
      + Convert(varchar(11), AgeMonths) + 'm '
      + Convert(varchar(11), DateDiff(day, DateAdd(month, AgeMonths,
         DateAdd(year, AgeYears, @FromDate)), @ToDate)
      ) + 'd' Age
   FROM (
      SELECT
         DateDiff(year, @FromDate, @ToDate)
            - CASE WHEN Month(@FromDate) * 32 + Day(@FromDate)
            > Month(@ToDate) * 32 + Day(@ToDate) THEN 1 ELSE 0 END AgeYears,
         (DateDiff(month, @FromDate, @ToDate)
            - CASE WHEN Day(@FromDate) > Day(@ToDate) THEN 1 ELSE 0 END) % 12 AgeMonths
   ) X
); 
```

像这样使用（SQL 2008 脚本）：

```
SELECT
   FromDate,
   ToDate,
   ExpectedYears,
   ExpectedMonths,
   ExpectedDays,
   (SELECT TOP 1 Age FROM dbo.AgeInYMDFromDates(FromDate, ToDate)) Age
FROM
   (
      VALUES
         (Convert(datetime, '20120201'), Convert(datetime, '20120301'), 0, 1, 0),
         ('20120228', '20120328', 0, 1, 0),
         ('20120228', '20120331', 0, 1, 3),
         ('20120228', '20120327', 0, 0, 27),
         ('20120801', '20120802', 0, 0, 1),
         ('20120131', '20120301', 0, 1, 2),
         ('19920507', '20120506', 19, 11, 29),
         ('19920507', '20120507', 20, 0, 0)
   ) X (FromDate, ToDate, ExpectedYears, ExpectedMonths, ExpectedDays) 
```

因为它是一个内联函数，所以它可以插入到查询的执行计划中，并且会尽可能地执行。如果将其转换为标量返回函数（因此您不必使用，`(SELECT Age FROM func)`那么您将获得更差的性能。该`WITH SCHEMABINDING`指令可以提供帮助，因为它预先计算出该函数不会对任何表进行数据访问，而不必在运行。

以下是上述执行的结果：

```
FromDate   ToDate     ExpectedYears ExpectedMonths ExpectedDays Age
---------- ---------- ------------- -------------- ------------ -----------
2012-02-01 2012-03-01 0             1              0            0y 1m 0d
2012-02-28 2012-03-28 0             1              0            0y 1m 0d
2012-02-28 2012-03-31 0             1              3            0y 1m 3d
2012-02-28 2012-03-27 0             0              27           0y 0m 28d
2012-08-01 2012-08-02 0             0              1            0y 0m 1d
2012-01-31 2012-03-01 0             1              2            0y 1m 1d
1992-05-07 2012-05-06 19            11             29           19y 11m 29d
1992-05-07 2012-05-07 20            0              0            20y 0m 0d 
```

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:57:22.930

尝试这个。

```
CREATE TABLE patient(PatName varchar(100), DOB date, Age varchar(100))
INSERT INTO patient
VALUES ('d','06/02/2011',NULL)--,('b','07/10/1947',NULL),('c','12/21/1982',NULL)

;WITH CTE(PatName,DOB,years,months,days) AS 
     (SELECT PatName, DOB, DATEDIFF(yy,DOB,getdate()), DATEDIFF(mm,DOB,getdate()),
             DATEDIFF(dd,DOB,getdate())
        FROM patient)

SELECT PatName, DOB,
      CAST(months/12 as varchar(5)) + ' Years' + 
      CAST((months % 12) as varchar(5)) + ' month/s ' +
      CAST( CASE WHEN DATEADD(MM,(months % 12), DATEADD(YY,(months/12),DOB)) <= GETDATE() 
                 THEN DATEDIFF(dd,DATEADD(MM,(months % 12), DATEADD(YY,(months/12),DOB)),GETDATE())
                 ELSE DAY(getdate())
            END as varchar(5))+' days' AS Age
  FROM CTE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T08:39:05.063

标量函数的性能通常不是很好，按照你的要求我会把它写成一个表值函数。表值函数具有正确内联的好处。

其他形式的查询不会有很大的不同，因为它是对函数的调用占用了时间。

```
CREATE FUNCTION dbo.fn_age(@birthdate datetime, @current_date datetime)
RETURNS TABLE
WITH SCHEMABINDING
AS
return (
select CAST(DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END AS varchar(3)) + ' y, ' 
     + CAST(DATEDIFF(MONTH, DATEADD(year 
                             , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                             , @birthdate), 
                       @current_date) AS varchar(2)) + ' m, '
     + CAST(DATEDIFF(day, DATEADD(month
                           , datediff(MONTH, DATEADD(year
                                                   , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                                                   , @birthdate)
                                           , @current_date)
                           , dateadd(year
                                   , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                                   , @birthdate)
                            )
                   , @current_date) AS varchar(2)) + ' d' as [Age]
)
GO 
```

这个函数必须像这样调用：

```
SELECT Age = (SELECT Age FROM dbo.fn_age(birthDate, current_timestamp))
FROM Person 
```

# 与其他替代品的比较

当把这个问题写成一个普通的标量函数时，我会创建这样的东西：

```
CREATE FUNCTION dbo.fn_age_slow(@birthdate datetime, @current_date datetime )
RETURNS VARCHAR(10)
WITH SCHEMABINDING
AS
begin
return CAST(DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END AS varchar(3)) + ' y, ' 
     + CAST(DATEDIFF(MONTH, DATEADD(year 
                         , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                         , @birthdate), 
                   @current_date) AS varchar(2)) + ' m, '
     + CAST(DATEDIFF(day, DATEADD(month
                       , datediff(MONTH, DATEADD(year
                                               , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                                               , @birthdate)
                                       , @current_date)
                       , dateadd(year
                               , /* the year calculation*/ DATEDIFF(year, @birthdate, @current_date) - CASE WHEN((MONTH(@birthdate) * 100 + DAY(@birthdate)) >  (MONTH(@current_date) * 100 + DAY(@current_date))) THEN 1 ELSE 0 END /* end of the year calculation*/ 
                               , @birthdate)
                        )
               , @current_date) AS varchar(2)) + ' d'
end
GO 
```

如您所见，它与表值函数完全相同。（它也是模式绑定，在某些情况下使函数更快）

针对第一个函数运行以下脚本时（在我的电脑上）

```
declare @a varchar(10) = ''
      , @d datetime = '20120101'
      , @i int = 1
      , @begin datetime

select @begin = CURRENT_TIMESTAMP
while @i < 1000000
  begin
    select @a = Age
         , @d = @begin - @i%1000
         , @i += 1
      from dbo.fn_age(@d, @begin)
  end

select CURRENT_TIMESTAMP - @begin
GO 
```

**==> 00:00:07.920**

```
declare @a varchar(10) = ''
      , @d datetime = '19500101'
      , @i int = 1
      , @begin datetime

select @begin = CURRENT_TIMESTAMP
while @i < 1000000
  begin
    select @a = dbo.fn_age_slow(@d, @begin)
         , @d = @begin - @i%1000
         , @i += 1
  end

select CURRENT_TIMESTAMP - @begin 
```

**==> 00:00:14.023**

这绝不是一个适当的基准，但它应该让您了解性能差异。

# javascript - weird math calculation

> ID：11771718
> 
> 赞同：0
> 
> 时间：2012-08-02T05:48:49.583
> 
> 标签：javascript, math, checkbox

> **Possible Duplicate:**
> [Is JavaScript's Math broken?](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)

I have a javascript and html code here [my code](http://jsfiddle.net/vSsW9/)

and i get a weird value when calculate specific fields. Only one checkbox has a script right now (the background music addon) and only when i select that add on with 1 of any of the 3in reels i get 24.990000000000002 in the total price. it's so weird its only with those inputs...it should be just 24.99....all the other inputs work and give accurate totals but just the 3 3in fields give those numbers...through trial and error I have found that the problem lies here

```
regthreetot = parseFloat(regthree * 50);
regfourtot = parseFloat(regfour * 100);
regfivetot = parseFloat(regfive * 200);
regsixtot = parseFloat(regsix * 300);
regseventot = parseFloat(regseven * 400);
supthreetot = parseFloat(supthree * 50);
supfourtot = parseFloat(supfour * 100);
supfivetot = parseFloat(supfive * 200);
supsixtot = parseFloat(supsix * 300);
supseventot = parseFloat(supseven * 400);
sixthreetot = parseFloat(sixthree * 50);
sixfourtot = parseFloat(sixfour * 100);
sixfivetot = parseFloat(sixfive * 200);
sixsixtot = parseFloat(sixsix * 300);
sixseventot = parseFloat(sixseven * 400); 
```

the regthree,supthree and sixthree values are all multiplied by 50...all the other values are multiplied by a value with 3 digits...if i change 50 to 100 it will give a normal answer...why does the number of digits matter here and what can i do to fix it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:55:15.670

它的发生是因为浮点算术的工作方式。您可以通过四舍五入到小数点后 2 位来解决它（无论如何您都不会使用一分钱）：http: [//jsfiddle.net/vSsW9/1/](http://jsfiddle.net/vSsW9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:56:04.610

好吧，直到你弄清楚你可以使用 Math.Round 来四舍五入到小数点后两位。假设你的结果变量被称为结果，做`result=Math.round(result*100)/100`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:05:48.407

It's caused by float variables not being 100% accurate, to fix it to max 2 decimal points:

```
n.toFixed(2) 
```

# javascript - Close fancybox after mediaelement.js video ends

> ID：11771723
> 
> 赞同：0
> 
> 时间：2012-08-02T05:49:10.530
> 
> 标签：javascript, jquery, fancybox, html5-video, mediaelement.js

I am using fancybox to display a video using mediaelement.js My client wants fancybox to automatically close after the video completes. I have the following code from mediaelement.js with a listener event for the end of the video [here](http://pastebin.com/WGeFw1vg)

I am just not sure what to put in that function to close the fancybox window at the end of the video playing. I am a bit of a novice when it comes to javascript. Your assistance is greatly appreciated :-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:52:49.997

```
$.fancybox.close 
```

或者如果在 iframe 中

```
parent.$.fancybox.close(); 
```

# python - Matplotlib: How to set range of theta for a polar plot?

> ID：11771727
> 
> 赞同：7
> 
> 时间：2012-08-02T05:49:36.360
> 
> 标签：python, matplotlib

I'm making a polar contour plot with matplotlib. The data is only in the range of theta from 0 to 90 degree, but it always shows the whole range of 0 to 360 degree. So is there a way to set the range of theta to 0 to 90 degree?

Any suggestion is appreciated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:39:15.747

I'm afraid this is an open issue: [https://github.com/matplotlib/matplotlib/issues/328](https://github.com/matplotlib/matplotlib/issues/328) . Also other people have asked for this: [http://comments.gmane.org/gmane.comp.python.matplotlib.general/14711](http://comments.gmane.org/gmane.comp.python.matplotlib.general/14711).

It would be definitely a nice feature and I wonder why it has not yet been implemented.

# ruby-on-rails - Static route with button_to rails

> ID：11771733
> 
> 赞同：0
> 
> 时间：2012-08-02T05:49:59.387
> 
> 标签：ruby-on-rails, rails-routing

Is there a way to have the equivalent of

```
<%= link_to "Continue", "/profile" %> 
```

but with a button_to? From what I understand you have to use a rails route. like new_user_path or something.

I was thinking something like this

```
<%= button_to "Continue", "/profile", method: :get %> 
```

let me know if it's possible, and if not then some maybe my best alternative... Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T05:57:38.007

据我了解，您可以只使用一个字符串。所以`<%= button_to "Continue", "/profile", { :method => :get } %>`提供

```
<form action="/profile" class="button_to" method="get">
  <div>
    <input type="submit" value="Continue" />
  </div>
</form> 
```

是你想要的吗？

# c# - 如何从查询C#中删除最后一个逗号

> ID：11771741
> 
> 赞同：11
> 
> 时间：2012-08-02T05:50:58.633
> 
> 标签：c#, asp.net

我正在做如下的事情..

```
querybuilder = ("SELECT Type, Text FROM [Element] WHERE Id IN( ");
foreach (var item in CaseIdList)
{
   querybuilder += item + ",";
}
querybuilder += ")"; 
```

在最后一个 insdie 右括号我得到一个逗号。如何删除它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-02T05:51:52.607

用于`TrimEnd(',');`从字符串中删除最后一个逗号，[`string.TrimEnd`](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)

在 foreach 循环后使用：

```
querbuilder = querybuilder.TrimEnd(','); 
```

[您可以使用StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)类，而不是连接字符串。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T06:01:26.733

首先，我会尽量避免直接包含这些值本身。尽可能使用参数 - 样式参数不太简单`IN(x, y, z)`，但您可以使用*表值参数*或简单地动态创建参数列表（例如 to `IN(@p0, @p1, @p2)`）

其次，我会避免在循环中使用字符串连接 -`StringBuilder`如果你真的必须循环使用。

第三，我会`string.Join`用来避免循环：

```
string commaSeparated = string.Join(", ", values); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T05:57:26.910

您可以使用 string.Join 方法代替 foreach 循环。看看[这个](http://msdn.microsoft.com/en-us/library/57a79xd0%28v=vs.80%29.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T06:00:50.973

您可以使用`String.Join(",", item);` 这意味着您无需进行难看的修剪或拆分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T05:59:52.033

我会使用 String.Join：

```
querybuilder = "SELECT Type, Text FROM [Element] WHERE Id IN( " + String.Join(",", CaseIdList.ToArray()) + ")"; 
```

我还会考虑使用参数而不是使用强连接构造 SQL - 字符串连接容易受到 SQL 注入攻击，并且参数易于使用。

您将如何切换到参数取决于您访问数据库的方式以及使用哪个数据库引擎，但快速的 google 搜索应该会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T05:53:51.520

```
querybuilder = ("SELECT Type, Text FROM [Element] WHERE Id IN( ");
foreach (var item in CaseIdList)
{
   querybuilder += item + ",";
}
querbuilder = querybuilder.TrimEnd(',');
querybuilder += ")"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T05:54:13.510

尝试使用[`String.Trim`](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)：

> 从当前 String 对象中删除所有前导和尾随空白字符。

```
querybuilder = querybuilder.Trim(','); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T05:58:25.687

尝试使用`Replace()`：

```
static void Main()
{
   string temp = "(a, b, c, d,)";
   temp = temp.Replace(",)", ")");

   Console.WriteLine(temp);
   Console.ReadKey();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-02T06:02:34.550

您可以使用 LINQ Aggregate 和 string.Format 方法：

```
 var items = CaseIdList.Select(p=>p.ToString(CultureInfo.InvariantCulture)).Aggregate((i,j)=>i+", "+j)
    querybuilder = string.Format("SELECT Type, Text FROM [Element] WHERE Id IN ({0})", items); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-02T06:06:23.193

使用示例`StringBuilder`：

```
 var querybuilder  = new StringBuilder("SELECT Type, Text FROM [Element] WHERE Id IN(");
            foreach (var fragment in fragments)
            {
                querybuilder.Append(fragment);
                querybuilder.Append(',');
            }

            // note: we need to delete last line terminator
            querybuilder.Remove(querybuilder.Length - 1, 1);
            querybuilder.Append(')');
            return querybuilder.ToString(); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-02T06:28:26.503

首先，如果你连接字符串的次数太多，你就会失去性能，因为每次你对字符串 var 执行任何操作时，它都会在内存中重新分配/分配整个字符串。在这种情况下，您应该使用 StringBuilder。

```
StringBuilder querybuilder = New StringBuilder();
querybuilder.Append("SELECT Type, Text FROM [Element] WHERE Id IN( "));
foreach (var item in CaseIdList) 
{    
    //querybuilder += item + ","; 
    querybuilder.Append(item);
    querybuilder.Append(",");
} 
//querybuilder += ")";
querybuilder.Remove(querybuilder.ToString().Length-1,1);
querybuilder.Append(")"); 
```

# wpf - 条形图值未更新

> ID：11771749
> 
> 赞同：0
> 
> 时间：2012-08-02T05:51:35.950
> 
> 标签：wpf, binding, listbox, datatemplate, bar-chart

我正在尝试开发一个应用程序，我想在每三秒后生成一个随机数，将该数字插入列表框并使用 DataTemplate 将列表框显示为矩形。

[这](http://weblogs.thinktecture.com/cnagel/2011/06/wpf-listbox-as-bar-chart.html)是供参考。

现在的问题是我使用了一个 DispatcherTimer，它在 3 秒后“滴答”，但矩形没有更新。

我正在发布我的 XAML 和 .cs 代码。有什么提示吗？

```
namespace ListBarGraph
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>

    public partial class MainWindow : Window
    {
        DispatcherTimer dt = new DispatcherTimer();
        DataFactory df = new DataFactory();

        public MainWindow()
        {
            InitializeComponent();
            dt.Tick += new EventHandler(dt_Tick);
            dt.Interval = new TimeSpan(0, 0, 3);
            dt.Start();

            this.PreviewKeyDown += new KeyEventHandler(MainWindow_PreviewKeyDown);
        }

        void dt_Tick(object sender, EventArgs e)
        {
            df.GetData();
        }
    }

    public class DataFactory
    {
        int number = 0;

        public IEnumerable<int> GetData()
        {
            Random random = new Random();
            number = random.Next(0, 100);
            return new int[] { 0, number };
        }
    }
}

<Window x:Class="ListBarGraph.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ListBarGraph"
        Title="MainWindow" Height="350" Width="525">

   <Window.Resources>

       <ObjectDataProvider x:Key="someData" ObjectType="{x:Type local:DataFactory}" MethodName="GetData" />

      <DataTemplate x:Key="BarChartItemsTemplate">
         <Border Width="300" Height="50">
            <Grid>
               <Rectangle Fill="Red" StrokeThickness="2" Height="40" Width="{Binding}" HorizontalAlignment="Right" VerticalAlignment="Bottom">
                  <Rectangle.LayoutTransform>
                     <ScaleTransform ScaleX="1.5"/>
                  </Rectangle.LayoutTransform>
               </Rectangle>
         </Grid>
         </Border>
      </DataTemplate>

      <ItemsPanelTemplate x:Key="BarChartItemsPanel">
         <VirtualizingStackPanel IsItemsHost="True">
            <VirtualizingStackPanel.LayoutTransform>
               <TransformGroup>
                  <RotateTransform Angle="90"/>
                  <ScaleTransform ScaleX="-1" ScaleY="1"/>
               </TransformGroup>
            </VirtualizingStackPanel.LayoutTransform>
         </VirtualizingStackPanel>
      </ItemsPanelTemplate>

 </Window.Resources>

   <Grid>
      <ListBox ItemsSource="{Binding Source={StaticResource someData}}" ItemTemplate="{DynamicResource BarChartItemsTemplate}" ItemsPanel="{DynamicResource BarChartItemsPanel}"/>

   </Grid>

</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:04:30.517

您的 XAML 绑定到由 .`DataFactory`创建的一个实例`ObjectProvider`，而您的代码隐藏完全创建另一个实例，UI 未绑定到该实例。

试试这个让你开始。在您的 XAML 中，删除`ObjectProvider`并将您的更改`ListBox`为：

```
<ListBox ItemsSource="{Binding}" ... 
```

在里面`dt_Tick`，这样做：

```
this.DataContext = df.GetData(); 
```

# android - 如何在安卓模拟器上上网？

> ID：11771751
> 
> 赞同：4
> 
> 时间：2012-08-02T05:51:44.580
> 
> 标签：android, android-emulator

如何在安卓模拟器上上网？现在我的模拟器浏览器无法正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:49:58.483

对于您在家中的模拟器，请选择转到设置-> 无线和网络。单击飞行模式。再次单击使其禁用。（如果飞行模式处于活动状态，那么您可以在模拟器最顶部的栏中看到一个飞机符号。否则会出现一个无线符号。）。如果你有任何无线连接，那么你可以去 Wi-Fi 网络选项..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:53:29.677

这可能会有所帮助：[http ://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html](http://www.gitshah.com/2011/02/android-fixing-no-internet-connection.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T14:35:51.913

这是由于当您在无线网络上时，并且您的系统中有有线网卡。当模拟器尝试从有线网卡获取其 DNS 设置但无法获取信息时，会出现此问题。要解决此问题，请禁用有线网卡并重试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:16:01.803

我认为这可能是其中两种情况：

1.- 您没有在清单中插入互联网权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

2.- 例如，Eclipse 中的网络连接配置错误或丢失。请查看[此](https://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet)帖子以了解如何设置它。

# c# - ILMerge 程序集未正确合并

> ID：11771752
> 
> 赞同：5
> 
> 时间：2012-08-02T05:51:46.020
> 
> 标签：c#, build, build-process, .net-assembly, ilmerge

我正在使用 ILMerge 版本 2.11.1103.0 将 4 个 DLL 合并到一个新程序集中。假设它们被称为 A、B、C 和 D，它们的关系如下：

```
B -> A
C -> A
D -> A
D -> C 
```

当我在 A、B 和 C 上运行 ILMerge 时，一切正常。但是，当我添加 DI 时收到以下错误：

```
An exception occurred during merging:
ILMerge.Merge: The assembly 'A' was not merged in correctly.
It is still listed as an external reference in the target assembly.
   at ILMerging.ILMerge.Merge()
   at ILMerging.ILMerge.Main(String[] args) 
```

我已经尝试使用 /closed 选项，如此处所示[ILMerge DLL: 程序集未正确合并，仍列为外部引用](https://stackoverflow.com/questions/1807652/ilmerge-dll-not-merged-in-correctly)，但不幸的是它没有帮助：

```
In order to close the target assembly, the number of assemblies to be added to the input is 0. 
```

当我更改程序集的顺序时，我收到以下异常：

```
An exception occurred during merging:
Index was outside the bounds of the array.
   at System.Compiler.ISymUnmanagedWriter.CloseMethod()
   at System.Compiler.Ir2md.VisitMethodBody(Method method)
   at System.Compiler.Ir2md.VisitMethod(Method method)
   at System.Compiler.Ir2md.Visit(Node node)
   at System.Compiler.Ir2md.VisitClass(Class Class)
   at System.Compiler.Ir2md.Visit(Node node)
   at System.Compiler.Ir2md.VisitModule(Module module)
   at System.Compiler.Ir2md.SetupMetadataWriter(String debugSymbolsLocation)
   at System.Compiler.Ir2md.WritePE(Module module, String debugSymbolsLocation, BinaryWriter writer)
   at System.Compiler.Writer.WritePE(String location, Boolean writeDebugSymbols, Module module, Boolean delaySign, String keyFileName, String keyName)
   at System.Compiler.Writer.WritePE(CompilerParameters compilerParameters, Module module)
   at System.Compiler.Module.WriteModule(String location, CompilerParameters options)
   at ILMerging.ILMerge.Merge()
   at ILMerging.ILMerge.Main(String[] args) 
```

我正在使用的完整命令行是：

```
ILMerge.exe /targetplatform:v4,"C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0" /log:ilmerge.log /target:library /union /xmldocs /copyattrs /allowMultiple /internalize /closed /keyfile:keyfile.snk /out:Merged.dll A B C D 
```

谁能看到我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T01:03:16.433

正如@HansPassant 在上面的评论中所建议的那样，我联系了微软名气的 Mike Barnett。他能够通过以下方式帮助我解决此问题：

*   [从http://nuget.org/packages/ilmerge](http://nuget.org/packages/ilmerge)升级到最新版本的 ilmerge (2.12.0803)

*   从命令中删除 /union 开关（这是以前添加的，以解决在已由代码合同重写器重写的合并程序集上运行 gendarme 的问题。谢天谢地，由于构建过程的更改，这不再需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:24:26.813

我以前遇到过 ILMerge 无法正常工作的问题。我想它们只是错误...尝试在多个阶段合并，例如将 B 和 A 合并到 A'，然后将 A' 与 C 和 D 合并。也许这会产生不同的结果/错误，从而可能导致解决方案。

# asp.net-mvc - 如何在另一个类中获取控制器名称及其属性？

> ID：11771757
> 
> 赞同：0
> 
> 时间：2012-08-02T05:52:09.623
> 
> 标签：asp.net-mvc, model-view-controller

我正在开发一个 MVC 应用程序。我想向 Validation 类发送一个用于验证目的的控制器。该类将验证控制器属性并发送结果。我不明白，如何在课堂上获取控制器的名称和属性。

下面的代码是控制器类代码，我将此控制器发送到名为验证类的类。

```
[HttpPost]
    public ActionResult Create(Location location)

    {
        if (ModelState.IsValid)
        {
            Validations v = new Validations();
            Boolean ValidProperties = true;

            //Sends the controller to Validation class
            v.ValidProperty(this);

             if (ValidProperties == true)
             {
                 db.Locations.Add(location);
                 db.SaveChanges();
                 return RedirectToAction("Index");

             }

        }
     } 
```

下面的代码是名为 Validations 的类，我想在其中验证控制器。

现在我不知道如何获取控制器的名称及其属性。

```
 public class Validations
{
   string PropertName;

    public void  ValidProperty(Controller ctr)
    {

        var name1 = ctr;

        string s = ctr. ????????
        //How to get Controller Name and its properties ? 

    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:42:46.517

使用反射来获取名称：

```
var name = this.GetType().Name; 
```

或者，您可以创建您选择的自定义基本控制器，向其添加属性、方法并将派生控制器处理为：

```
public abstract class BaseController : Controller
{
    // add other properties as needed
    public abstract string Name { get; protected set; }

    public virtual void ValidProperty()
    {
        string s = Name;
        //something esle
    }

}

public class YourController : BaseController
{
    private string _name;
    public override string Name
    {
        get { return _name; }
        protected set { _name = "Your_Name"; }
    }

    [HttpPost]
    public ActionResult Create(Location location)
    {
        if (ModelState.IsValid)
        {                
            bool validProperties = true;

            // Deals with a base controller method
            ValidProperty();

            // or something like this, if you prefer

            var controller = (BaseController) this;
            Validations v = new Validations();
            //Sends the controller to Validation class
            v.ValidProperty(controller);

            if (validProperties)
            {
                db.Locations.Add(location);
                db.SaveChanges();
                return RedirectToAction("Index");

            }
        }
        return Content(string.Empty);
    }       
} 
```

# jasper-reports - 汇总带的 PrintWhenExpreesion 始终与同一页面中的详细带

> ID：11771758
> 
> 赞同：0
> 
> 时间：2012-08-02T05:52:13.057
> 
> 标签：jasper-reports, ireport

![如果超过 10 条记录，则第一张图像可以正常工作，最多记录 9 条，请参阅第二张图像！[][1]](../Images/0a23cf7a1bf8649f49023198e496e3a4.png)摘要带的 PrintWhenExpreesion 总是在最后一页带有详细带 不想在新的最后一页单独打印摘要带

# android - 从android获取应用程序日志

> ID：11771759
> 
> 赞同：0
> 
> 时间：2012-08-02T05:52:29.383
> 
> 标签：android, logging

我开发了一个 Android 2.2 应用程序。

我的客户有它，他说有一个我无法重现的崩溃。

要记录我正在使用的错误`android.util.Log;`以及`ex.printStackTrace();`每个处理的异常。

设备上是否有关于该错误的日志？我怎样才能得到这些日志？

我可以说我的客户将他的设备连接到 PC 并告诉他在哪里查找这些日志；将它们复制到他的电脑并通过电子邮件发送给我。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:59:58.867

对于目前的情况，您可以要求您的客户从 Google Play 安装任何日志阅读应用程序，例如[这个](https://play.google.com/store/apps/details?id=com.nolanlawson.logcat)，并要求他在崩溃期间保存日志并将其发送给您。或者，如果客户要求安装了 SDK 等的计算机，那么您可以要求他执行`adb logcat -d > logcat.txt`. 这会将 logcat 保存在文件`logcat.txt`中，然后可以邮寄给您。

对于未来的情况，我建议您集成一个像[ACRA](http://code.google.com/p/acra/)这样的项目，它可以自动向您发送崩溃报告，以及设备、堆栈跟踪等信息。

# ruby-on-rails - 在 Rails 上运行应用程序时，首先执行应用程序的哪个文件？

> ID：11771762
> 
> 赞同：0
> 
> 时间：2012-08-02T05:52:40.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3

请为此回答。应用程序在提供时执行的第一个文件`rails s`。

我需要知道申请项目的启动。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:33:52.960

执行的第一个**应用程序**文件通常是`config/boot.rb`

然后`config/environment.rb`，通常会加载其中一个文件`config/environments/`（运行哪个文件，将取决于已设置的环境。

然后`config/application.rb`会被执行

此后，`config/routes.rb`将向服务器提供有关如何处理传入请求的关键信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:57:00.097

打字`which rails`会给你答案。

然后打开文件，类似于：

```
#!/usr/bin/env ruby1.9.1
#
# This file was generated by RubyGems.
#
# The application 'railties' is installed as part of a gem, and
# this file is here to facilitate running it.
#

require 'rubygems'

version = ">= 0"

if ARGV.first =~ /^_(.*)_$/ and Gem::Version.correct? $1 then
  version = $1
  ARGV.shift
end

gem 'railties', version
load Gem.bin_path('railties', 'rails', version) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T07:39:26.410

**在 Rails 上运行的应用程序流程可在此处找到。**

..]$`rails s`

后台进程

{

```
 ..config/boot.rb

    installing the file Gemfile (in root dir of appilcation)

    ..config/application.rb 
```

}

**[服务器在此处启动/在终端中显示]**

```
=> Booting WEBrick

=> Rails 3.2.6 application starting in development on http://0.0.0.0:3000

=> Call with -d to detach

=> Ctrl-C to shutdown server 
```

后台进程

{

```
..config.ru

..config/environment.rb

..config/environment/development.rb

..config/initializer/*.*

..config/routes.rb 
```

}

**[服务器从这里开始/在终端中显示]**

```
> INFO  WEBrick 1.3.1
> INFO  ruby 1.9.3 ('Date') [i686-linux]
> INFO  WEBrick::HTTPServer#start: pid=3031 port=3000 
```

# silverlight - 如何将 PlaneProjection 引用添加到 silverlight 项目？

> ID：11771767
> 
> 赞同：0
> 
> 时间：2012-08-02T05:53:47.107
> 
> 标签：silverlight

我正在尝试使用 eclipse 创建 silverlight 项目。我在 xaml 页面中使用了 PlaneProjection 标记。

这个在 CSharp 中自动生成的代码.. 我收到了类似的错误，

**找不到类型或命名空间名称“PlaneProjection”（您是否缺少 using 指令或程序集引用
Page.g.cs /Hekllo/obj/Debug 第 44 行问题完整构建标记**

我所了解的是，这里没有可用于 PlaneProjection 的参考资料。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:27:58.943

您的项目必须有参考`System.Windows.dll` 通常可以在这里找到：

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\Silverlight\vX.X\System.Windows.dll

# php - 从数据库创建选择列表

> ID：11771774
> 
> 赞同：0
> 
> 时间：2012-08-02T05:54:51.193
> 
> 标签：php, mysql

我正在从数据库表中制作选择列表，一切正常，唯一的问题是选项值，如果该值包含两个单词，如“纽约”，它只返回“新”。这是代码

```
<?  $country=intval($_GET['country']);

include('connect-db.php');

$query="SELECT CityName FROM cities WHERE CountryId='$country'";
$result=mysql_query($query);

?>
<select name="city">
<option value="">Select City</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value=<?=$row['CityName']?>><?=$row['CityName']?></option>
<? } ?>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:56:48.043

```
<option value="<?=$row['CityName']?>"><?=$row['CityName']?></option> 
```

这 ” ” 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T05:57:55.550

您必须将值覆盖在“”中，HTML 代码认为 York 部分只是选项标签的另一个属性，所以：

```
<option value="<?=$row['CityName']?>"><?=$row['CityName']?></option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:01:59.340

您在给出值时没有包含“”。如果您查看代码为选择框创建的 html，则类似于

```
<option value="new" york>new york</option> 
```

下面给出了正确的解决方案，只是在给出选项标签的值时包含了报价。

```
<?  $country=intval($_GET['country']);

include('connect-db.php');

$query="SELECT CityName FROM cities WHERE CountryId='$country'";
$result=mysql_query($query);

?>
<select name="city">
<option value="">Select City</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value="<?=$row['CityName']?>"><?=$row['CityName']?></option>
<? } ?>
</select> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:01:02.313

只需使用 "" 作为值的值，就像编写 HTML 标记一样。

# ios - 我的导航控制器有委托问题

> ID：11771775
> 
> 赞同：0
> 
> 时间：2012-08-02T05:55:03.230
> 
> 标签：ios, uinavigationcontroller

所以我有一个导航控制器，在其中我有一个视图和一个嵌入在该视图中的滚动视图。我的目标是让我的程序在靠近它时滚动到某个位置。为此，我将网点添加到我的 vc 中。一个是滚动视图，另一个是视图。该视图只是一个大矩形，大约是 iphone 屏幕的两倍，并且略高。我的滚动视图仅水平滚动，每当我从滚动中抬起手指时，我的目标是 iphone 边界是否在视图边界内。我希望滚动视图手动滚动到该视图的中间。（如果你能想到愤怒的小鸟中的游戏菜单或剪断绳子，当用户在水平包之间滚动时，当用户从滚动到某个位置时，用户放手时，这是我想模仿的）。

所以，这是我的视图和我的 vc 的代码。我对故事板所做的唯一一件事就是连接了两个插座，并设置了我的视图大小。

（关卡包是vc，另一个是view）。

```
#import <UIKit/UIKit.h>
#import "HorizantalLockingView.h"
@interface LevelPacks : UIViewController <ViewDelegate>
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;
@property (weak, nonatomic) IBOutlet HorizantalLockingView *lockingView;

@end

#import "LevelPacks.h"

@implementation LevelPacks 
@synthesize scrollView=_scrollView;
@synthesize lockingView = _lockingView;

-(void)viewDidAppear:(BOOL)animated
{
    CGSize size;
    size.width=825;
    size.height=460;
    self.scrollView.contentSize=size;

    self.scrollView.contentOffset=CGPointMake(0, 0);

}

-(void)viewDidLoad
{
    [super viewDidLoad];
    self.lockingView.delegate=self;
}

- (void)viewDidUnload
{
    [self setLockingView:nil];
    [super viewDidUnload];
    self.scrollView=nil;
    // Release any retained subviews of the main view.
} 
```

@结尾

```
#import <UIKit/UIKit.h>
@protocol ViewDelegate
@property (nonatomic, weak) UIScrollView *scrollView;
@end

@interface HorizantalLockingView : UIView
@property (nonatomic, weak) IBOutlet id <ViewDelegate> delegate;
@end

#import "HorizantalLockingView.h"

@implementation HorizantalLockingView
@synthesize delegate=_delegate;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGRect location=self.superview.bounds;
 NSLog(@"dkfjdkjf");
    if (CGRectContainsRect(self.frame, location))
    {

        [self.delegate.scrollView scrollRectToVisible:CGRectMake(284, 190, 157, 119) animated:YES];
    }

}

@end 
```

o，我之前做了 nslog 以查看该方法是否会做任何事情，而 nslog 甚至从未运行过，所以显然出了点问题。

我对此很陌生，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:40:57.493

启用分页将自动为您执行此操作。

```
scrollView.pagingEnabled=YES; 
```

还添加一个`UIPageControl`和使用`UIScrollView`委托方法来更新页面控件将增加一个很好的可用性

# c# - c#中的groupbox里面的groupbox

> ID：11771776
> 
> 赞同：0
> 
> 时间：2012-08-02T05:55:12.723
> 
> 标签：c#, .net, winforms, windows-forms-designer, groupbox

我有 MSVC 2010，我需要在 groupbox 中放置一个 groupbox。当我尝试使用 GUI 编辑器时它不起作用，当我使用它时它不起作用：

```
groupbox1.Controls.Add(groupbox2);
groupbox.Visible = true; 
```

如果我使用第二个框上方的代码，则不会显示。如果我使用 GUI 编辑器，则第二个框不会显示在第一个框内。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:03:08.590

更改子控件位置：

```
groupBox1.Controls.Add(groupBox2);
groupBox2.Location = new Point(10, 10); 
```

来自[`Control.Location`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)（MSDN）：

> 获取或设置**控件左上角相对于其容器左上角**的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:56:45.547

您是否将 groupBox1 添加到主控件中？

```
this.Controls.Add(groupBox1); 
```

也尝试在 groupBox 2 上设置 Visible = true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:04:01.583

我认为您只需要添加一个 groupbox.Location。然后就会出现。

```
var groupBox = new GroupBox();
groupBox1.Controls.Add(groupBox);
groupBox.Location = new Point(somex,somey); 
```

# javascript - 确保 AMD 模块在内容脚本之前加载

> ID：11771783
> 
> 赞同：1
> 
> 时间：2012-08-02T05:55:47.213
> 
> 标签：javascript, requirejs, js-amd

## 概述

我正在尝试使用 [RequireJS将站点转换为](http://requirejs.org)[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)。该站点的大部分内容都依赖于在单独模块中定义的全局变量（主要是实用程序方法）。这给开发人员带来了严重的困难，因为模块并不总是在内容脚本之前加载。

## 理想的结果

我想要一种方法来防止在加载某些模块之前解析这些页内脚本，以便团队成员可以在时间允许的情况下慢慢删除它们。

## 研究

1.  我注意到[curl.js](https://github.com/cujojs/curl#can-curljs-work-with-non-amd-javascript-files)可以在同步模式下加载一些脚本。
2.  我找不到 RequireJS 2+ 的类似内容，尽管我认为它曾经受支持。（我的 git foo 不够强大。）

## 注意事项

1.  虽然我知道我可以在开发模式下通过脚本标签加载模块，但我宁愿不这样做，因为这需要在两个地方列出模块。

## 我试过的

所以我尝试生成一个轮询解决方案，它运行一个粗略定时的 while 循环，然后中断运行一个回调。这是我的实现：

```
(function (global) { // Making this into a global, so I don't need to wait for the loader's extra timeout. 
    var undef;

    /**
     * Simple args getter.
     *
     * @param {*} arg Used if defined.
     * @param otherwise Used if arg is not defined.
     * @return {*}
     */
    var arg = function (arg, otherwise) {
        return arg !== undef ? arg : otherwise;
    };

    /**
     * Locks up the main thread as soon as the current thread completes.
     *
     * @param {number} time
     */
    var lock = function (time) {
        setTimeout(function () {
            var start = +(new Date),
                current = 0;
            console.log('Locking thread at %d', start);

            start += time;
            while (start > (current = +(new Date))) {
                console.log('tick');
            }

            console.log('Unlocking thread at %d', current);
        }, 0);
    };

    /**
     * Locks up the main thread until a condition is met, releasing it
     * momentarily to allow other "threads" to advance.
     *
     * @param {Function} condition
     * @param {number} [checkInterval=50] How long
     */
    var lockThreadUntil = global.lockThreadUntil = function (condition, checkInterval, releaseDuration) {
        checkInterval = arg(checkInterval, 50);
        releaseDuration = arg(releaseDuration, 0);

        var id = setInterval(function () {
            if (!condition()) {
                lock(checkInterval);
            } else {
                clearInterval(id);
            }
        }, releaseDuration);
    };

    define(function () {
        return lockThreadUntil;
    });
})(this); 
```

在页面上（我测试了一个创建全局的模块）：

```
(function (global) {
    lockThreadUntil(function () {
        var isLoaded = !!global.path && !!global.path.toModule;
        if (!isLoaded) {
            return false;
        }

        console.log('Is loaded!');
        return true;
    }, 1000);
})(this); 
```

在内容脚本中：

```
console.log('Was needed!'); 
```

我希望这会导致 DOM 在给脚本加载时间的同时推进很少，从而允许它在内容脚本之前进入解析堆栈。不幸的是，内容中的脚本似乎首先被触发。

## 包起来

我愿意接受建议。我正在考虑的选项包括（看起来都很糟糕）：

*   咬牙切齿地使用脚本标签。
*   吞下 RequireJS 加载方法并用 xhr 实现替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T18:00:09.210

我建议对您的遗留代码使用 require js [**shim**](http://requirejs.org/docs/api.html#config-shim)功能并允许 RequireJS 加载所有内容（包括您的 in-DOM 脚本标签）。Shim 允许您从本质上创建旧版浏览器全局文件的 AMD 版本。shim 配置允许您指定 shim 模块的依赖关系以及它们之间的依赖关系，以及识别它们导出的全局浏览器。

假设您在 DOM 中有旧文件**A**和**B作为脚本标签，其中****B**依赖于文件**A** （并且脚本标签紧随其后） 。还要说**A**和**B**都依赖于 AMD 格式的实用程序模块**Lib**。**从 DOM 中移除A**和**B**的脚本标签，并添加类似于以下内容的 require js 配置块：

```
requirejs.config({
  shim: {
    'A': ['Lib'],
    'B': ['Lib', 'A']
  }
}); 
```

这本质上应该使 RequireJS 在您的 AMD 模块库被解析后加载您的旧脚本。我在这里简化了示例，假设您的所有库 AMD 模块都可以通过单个超级模块**Lib**来使用。

阅读[shim 文档](http://requirejs.org/docs/api.html#config-shim)，因为它还解释了如何告诉 require js 你的模块导出什么（就全局对象而言）以使 shim 更加完整。

**警告：**这仅适用于开发模式。如果您尝试运行 RequireJS 优化器，则结果将无法正常工作，因为标准 AMD 模块上的 shimmed 模块依赖（如此[处](http://requirejs.org/docs/api.html#config-shim)所述）。

此外，此解决方案将要求您在必要时使用 shim 配置中的依赖项手动调整每个 in-DOM 脚本标记的顺序（就像我通过使其依赖于 A 使 B 跟随 A）。在过去，您可以使用 RequireJS*订单！*插件，但它在 RequireJS 2 中被[移除，取而代之的是 shim](https://github.com/jrburke/requirejs/wiki/Upgrading-to-RequireJS-2.0#wiki-shim)。这并不是一件坏事，因为它可以帮助您计算出脚本之间的真正依赖关系，并在将来更容易地完全转换到 AMD。

# javascript - 检查是否选中了所有单选按钮

> ID：11771786
> 
> 赞同：0
> 
> 时间：2012-08-02T05:56:05.667
> 
> 标签：javascript, radio-button

我想检查一些单选按钮以允许用户单击链接（否则它应该会发出警报）。

这是代码

```
<html>
<head>
</head>
<body>
<a href="http://www.aerosoft.de" id="a_next">aerosoft.de</a>

            <li class="radiobutton"><span class="name">Struct. Temp. Indic.> 38°C -not exceed 55°C</span>
            <input name="1" type="radio" value="other" /></li>
            <li class="radiobutton"><span class="name">Airplane Documents - check </span>
            <input name="2" type="radio" value="other" /></li>
            <li class="radiobutton"><span class="name">Flight Control Lock - removed</span>
            <input name="3" type="radio" value="other" /></li>
</body>
</html> 
```

用户必须检查所有 3 个单选按钮才能使链接正常工作，否则如果他只检查 2 个单选按钮，他应该在单击链接时收到警报。

如果有人可以提供帮助会很棒：/

问候费边

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:10:47.460

处理链接上的点击事件。循环通过收音机，如果任何未选中，则显示警报并返回 false 以取消单击的默认操作（即取消导航）。

```
window.onload = function() {
    document.getElementById("a_next").onclick = function(e) {
        if (!e) e = window.event;
        var els = document.getElementsByTagName("input"),
            i;
        for (i=0; i < els.length; i++) {
            if (!els[i].checked) {
                alert("Your message here.");
                e.returnValue = false;
                return false;
            }
        }
    };
}; 
```

演示：http: [//jsfiddle.net/t9wqc/](http://jsfiddle.net/t9wqc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:01:01.797

如果你可以使用 jQuery，它会更干净..

**在此处查看完整[示例](http://jsfiddle.net/mrobin/tqFbQ/)**

```
<a href="#">aerosoft.de</a>

var link = "http://www.aerosoft.de" ;

$('input').change(function(){
   var allChecked = $('input:checked').length == 3;

    if(allChecked ){
      $('#a_next').attr('href',link).removeClass('disabled');
    }
    else{
      $('#a_next').attr('href','#').addClass('disabled');
    }             
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:13:38.280

如果你可以使用 jQuery，

**编辑：（** 评论后；先前的答案有错误）

```
$(document).ready(function() {
    $('#a_next').click(function(e){                 
        $('input[type="radio"]').each(function(){
            if(!$(this).prop('checked')) {
               alert('Check all radios first');
               e.preventDefault();  // to stop anchor jumping to url
               return false;      // to break .each
            }
        }); 
    });
}); 
```

[演示](http://jsfiddle.net/TWncG/) ​</p>

# wpf - 将 wpf 表单上的控件设置为只读或可编辑

> ID：11771787
> 
> 赞同：2
> 
> 时间：2012-08-02T05:56:11.910
> 
> 标签：wpf, tabcontrol

我正在编写一个数据输入应用程序，并且在处理应用程序的添加、编辑和查看“模式”时遇到问题。

场景：用户从一个窗口中选择两个组合框中的项目，然后单击一个按钮。如果组合框选择与现有记录不匹配，则表单应打开并准备好插入值的新记录。如果选择与现有记录匹配，则应以“只读”模式打开该记录，并使用表单中的所有文本框。如果用户希望修改现有数据，他们单击表单的编辑按钮，将文本框设置为“可编辑”。

我是 wpf 的新手，但在我的 vba 应用程序中，我通常有一个 DataMode 属性和一个 ToggleControls 方法，该方法将循环通过 TabControl 的 TabItems，然后循环通过 TabItems 的控件，设置找到的任何 TextBox 控件的 IsReadOnly 属性基于“DataMode”属性。但是，我怀疑这是否是 wpf 中要遵循的路径。

所以，我的问题是，我是否使用上述方法？如果是这样，我如何访问 TabItem 中的控件。这不起作用：`foreach (Control ctrl in MyTabCtrl) { //if Textbox do stuff }`.

如果这不是这样做的方法，有人可以告诉我方法吗？我猜这要么是模板/样式问题，要么与以某种方式将数据设置为只读有关，然后将 TextBox 的 IsReadOnly 属性绑定到数据的状态。编辑：哦，或者那个 ViewStateManager 的东西。所有这些我都知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:27:48.483

一个简单的方法是

**在后面的代码中声明一个名为 DependencyProperty`IsReadOnly`**

```
public static readonly DependencyProperty IsReadOnlyProperty = DependencyProperty.Register(
            "IsReadOnly",
            typeof (bool),
            typeof (MainWindow)
            );

        public bool IsReadOnly
        {
            get { return (bool) GetValue(IsReadOnlyProperty); }
            set { SetValue(IsReadOnlyProperty, value); }
        } 
```

**实现 Buttons Click 事件，以便 IsReadOnly 获得`false`Click**

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        IsReadOnly = false;
    } 
```

**使用将 TextBoxes 绑定到`IsReadonly`属性`DataBinding`**

```
 <TextBox IsReadOnly="{Binding Path=IsReadOnly, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=Window}, Mode=OneWay}" /> 
```

此绑定假定您背后的代码不是您的`DataContext`，因此您必须相对绑定到应用 CodeBehind 的 Window/UserControl。

这样，TextBoxes 就会监听这个属性的变化。当它切换时，它们会自动更改其 ReadOnly 状态。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T06:48:21.340

您可以使用 DataContext ：

将 tabControl 的数据上下文绑定到您的记录（使用按钮事件单击编写 this.Canvas.DataContext = _yourRecord 示例）

```
public void bntEvent_Click(object sender, EventArgs e)
    {
        // Do matching and put the result in result field 
        MyTabCtrl.DataContext = false;
    } 
```

在数据上下文上绑定文本框的 IsReadOnly/IsEnable 属性并使用转换器返回真/假值

```
 <TextBox IsReadOnly="{Binding .}" /> 
```

有关转换器的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)。

我希望我能帮助你，你能理解我糟糕的英语。

再见

# linux - 我可以用 Linux 中所有文件中的新内容更新文件的一部分吗

> ID：11771789
> 
> 赞同：1
> 
> 时间：2012-08-02T05:56:30.977
> 
> 标签：linux, file, shell, sed, awk

我有 50 个具有此功能的文件

```
public function __construct()
    {   $this->createdAt = new DateTime();
        $this->updatedAt = new DateTime();
        $this->isActive = true;
        $this->isDeleted = false;
    } 
```

现在有什么方法可以使用 sed 或 awk 或任何可能的方式在所有文件中的该函数中附加这些行

就像假设 file.php 是

```
public function __construct()
    {
        $this->age = 20;

    } 
```

我希望它应该变成这样

```
public function __construct()
    {
        $this->age = 20;
        $this->createdAt = new DateTime();
        $this->updatedAt = new DateTime();
        $this->isActive = true;
        $this->isDeleted = false;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:54:07.680

这可能对您有用（GNU sed）：

```
cat <<\! >append.txt
>         $this->createdAt = new DateTime();
>         $this->updatedAt = new DateTime();
>         $this->isActive = true;
>         $this->isDeleted = false;
> !
cat <<\! >file
> public function __construct()
>     {
>         $this->age = 20;
> 
>     }
> !
sed '/$this->age = 20/r append.txt' file
public function __construct()
    {
        $this->age = 20;
        $this->createdAt = new DateTime();
        $this->updatedAt = new DateTime();
        $this->isActive = true;
        $this->isDeleted = false;

    }
sed -i '/$this->age = 20/r append.txt' file{1..50} # file1 to file50 
```

编辑：

在闭合花括号之前***插入：***

```
sed -i '$!s/$/\\/' append.txt
sed -i '/^public function __construct()/,/^\s*}/!b;/^\s*}/i\'"$(<append.txt)" file{1..50} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T09:31:51.553

```
$ sed -i 's/\$this->age = 20\;/\$this->age = 20\;\n\t\$this->createdAt = new DateTime()\;\n\t\$this->updatedAt = new DateTime()\;\n\t\$this->isActive = true\;\n\t\$this->isDeleted = false\;/g' file.php 
```

# vb.net - 皮肤检测代码总是显示“算术溢出”

> ID：11771791
> 
> 赞同：0
> 
> 时间：2012-08-02T05:56:41.300
> 
> 标签：vb.net, image-processing

为什么这个简单的皮肤检测代码总是返回**Message=Arithmetic 运算导致溢出。**

```
xMax = bmp.Width - 1 : yMax = bmp.Height - 1
For y = 0 To yMax
    For x = 0 To xMax
       tmpColor = fixColor(bmp.GetPixel(x, y))
       If (((tmpColor.R > 95) And (tmpColor.G > 40) And (tmpColor.B > 20) And (tmpColor.R - tmpColor.G > 15) And (tmpColor.R > tmpColor.G) And (tmpColor.R > tmpColor.B)) Or _
                ((tmpColor.R > 220) And (tmpColor.G > 210) And (tmpColor.B > 170) And (tmpColor.R - tmpColor.G <= 15) And (tmpColor.R > tmpColor.B) And (tmpColor.G > tmpColor.B))) Then bmp.SetPixel(x, y, Color.Black)
    Next x
Next y 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:09:15.053

假设`tmpColor`定义为`System.Color`，有根据的猜测是，当此错误发生时`tmpColor.G`大于`tmpColor.R`，这将导致结果小于零，并且无法存储到 中`byte`。

一种可能的解决方案是这样做

```
Dim r as integer = tmpColor.R
Dim g as integer = tmpColor.G
Dim b as integer = tmpColor.B 
```

然后在您的计算中使用这些新值。它会使代码更清晰一些（如果你要在 if 语句中进行强制转换，则更清晰）。

另一种选择是根据该减法重新排序测试，并使用[AndAlso](http://msdn.microsoft.com/en-us/library/cb8x3kfz%28v=vs.71%29.aspx)运算符：

```
(tmpColor.R - tmpColor.G > 15) And (tmpColor.R > tmpColor.G)
'To
(tmpColor.R > tmpColor.G) AndAlso (tmpColor.R - tmpColor.G > 15) 
```

`AndAlso`是 VB.Net 的短路逻辑与运算符，将导致表达式的计算在第一个`False`. 由于您使用的只是`And`s，因此将它们全部替换为`AndAlso`可能会看到轻微的性能提升。

总体而言，这两项的组合可能会使代码更具可读性。

# sqlite - Sqlite：从许多表中选择相同的列

> ID：11771792
> 
> 赞同：0
> 
> 时间：2012-08-02T05:56:40.940
> 
> 标签：sqlite, select, union

假设我们有表：`t1(_id, url)`, `t2(_id ,url)`, `t3(_id, url)`, ...

我想从表格中获取所有网址：

```
select url from t1 union select url from t2 union select url from t3 union ... 
```

没关系，但如果我还有 3 张桌子，那就太长了。那么我怎样才能得到`url`所有表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:24:30.083

如果您需要来自所有表的数据，则必须在`FROM`子句中的某处命名所有表。如果您不命名它们，SQLite 就无法知道您想要从*哪些表中获取它们。*`SELECT`

# objective-c - 要求编译器忽略 #pragma 消息

> ID：11771798
> 
> 赞同：2
> 
> 时间：2012-08-02T05:57:06.643
> 
> 标签：objective-c, xcode

正如标题中所说，我希望编译器暂时忽略 pragma 消息，这样我更容易阅读和修复实际警告。我做了一些搜索，但似乎没有任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:14:59.513

不，这是不可能的，所以最好的办法是批量编辑所有的`#pragma`s：

```
$ cd MySourceFolder
$ find . -name \*.m -exec perl -p -i -n -e 's/^#pragma/\/\/#pragma/' {} \; 
```

当你想要`#pragma`' 再次回来时：

```
$ cd MySourceFolder
$ find . -name \*.m -exec perl -p -i -n -e 's/^\/\/#pragma/#pragma/' {} \; 
```

如果您经常这样做，我会将其包装在脚本中，然后将其放入您的`~/bin`目录中。

# c - typedef 内存分配

> ID：11771801
> 
> 赞同：0
> 
> 时间：2012-08-02T05:57:24.990
> 
> 标签：c, variables

变量还没有一成不变！如果没有缩进，请原谅。我是这个网站的新手。无论如何，我有一个包含五个不同类别的游戏列表的文本文档，我需要一些关于内存分配 VIA typedef 的帮助。一个人会怎么做？到目前为止，这就是我所拥有的：

```
/* 
Example of text document

2012 DotA PC 0.00 10
2011 Gran Turismo 5 PS3 60.00 12
list continues in similar fashion...
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

//function prototype here

char **readFile(char *file);
char *allocateString(char temp[]);

typedef struct
{
    int year;
    char name[100];
    char system[10];
    float price;
    int players;
}game;

int main(void)
{
char **list;

system("pause");
return 0;
}

//function defined here
char **readFile(char *file) //reads file and and allocates
{ 
FILE* fpIn;
    int i, total=0;

    fpIn = fopen("list.txt", "r");
    if (!fpIn)
    {
        printf("File does not exist");
        exit(101);
    }

/*
allocate memory by row here VIA for loop with the total++ to keep track of the 
number of games
*/
/*
allocate memory individually for each item VIA "allocateString by using going 
to set list[i] = allocateStrng(tmpList) using for loop the for loop will have
for (i=0; i<total; i++)
*/

return;
}

//allocateString here
char *allocateString(char temp[]);
{
char *s;

s = (char*)calloc(strlen(temp+1), sizeof(char)));
strcpy(s, temp);

return s;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:04:05.790

通常，您会预先分配相当数量的内存，检测该数量不足的情况，并在这些情况下使用[`realloc`](http://www.gnu.org/software/libc/manual/html_node/Changing-Block-Size.html)（或[`malloc`](http://www.gnu.org/software/libc/manual/html_node/Basic-Allocation.html)后跟[`memcpy`](http://www.gnu.org/software/libc/manual/html_node/Copying-and-Concatenation.html)and [`free`](http://www.gnu.org/software/libc/manual/html_node/Freeing-after-Malloc.html)）扩大分配。该建议适用于您读取当前行的缓冲区（将作为`temp`to传递`allocateString`）和用于保存所有行序列的数组。

调用but still后[`fgets(buf, bufsize, fpIn)`](http://www.gnu.org/software/libc/manual/html_node/Line-Input.html)，您可以检测到行缓冲区的缓冲区大小不足。换句话说，当读取填满了整个缓冲区，但仍然没有到达换行符。在这种情况下，下一次读取将继续当前行。您可能需要一个内部循环来扩展缓冲区并在需要时再次读取。`strlen(buf) == bufsize - 1``buf[bufsize - 2] != '\n'`

请注意，您`allocateString`的副本非常多[`strdup`](http://www.gnu.org/software/libc/manual/html_node/Copying-and-Concatenation.html#index-strdup-499)，因此您可能希望使用它。

上面文字中的链接主要来自[GNU C库的手册](http://www.gnu.org/software/libc/manual/html_node/index.html)。[cppreference.com](http://en.cppreference.com/w/c)是另一个很好的 C 函数文档来源。[Linux 手册页](http://linux.die.net/man/3/)也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:51:33.113

```
s = (char*)calloc(strlen(temp+1), sizeof(char)));

//the name of the array is a pointer, so you are doing pointer arithmetic.  
//I think you want strlen(*temp+1, sizeof(char)));
 // or strlen(temmp[1]) it isn't clear if this is a pointer to a string or an array 
 // of strings
//you need the length of the string *temp is the content which temp points to

//strcpy(s, temp); 
```

# mysql - 带有计数或父母记录的 Mysql 查询

> ID：11771806
> 
> 赞同：0
> 
> 时间：2012-08-02T05:57:32.963
> 
> 标签：mysql, join

我有以下两个表：

```
reviews table:
id

visits table:
id
review_id 
```

我正在尝试为那些至少有一次访问记录的评论显示评论列表。尝试使用 HAVING（和 GROUP）进行 LEFT OUTER JOIN，但这给了我所有访问次数的评论。计划制作这样的表格：评论 #1 - 2 次访问 评论 #2 - 10 次访问 .. 等等，忽略 0 次访问的评论

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T05:59:23.783

```
select r.id,count(v.id) from reviews r inner join visits v on r.id=v.review_id 
GROUP BY v.review_id 
```

不需要使用 LEFT JOIN，因为 INNER JOIN 只会返回匹配的记录，在这种情况下意味着将返回那些访问过的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:05:00.097

```
select 
    r.id,
    count(v.id) as Reviews
from reviews r 
left join visits v on r.id=v.review_id 
GROUP BY v.review_id
having Reviews > =1 
```

# html - 查看源代码的最佳 Firefox/Chrome 插件？

> ID：11771807
> 
> 赞同：1
> 
> 时间：2012-08-02T05:57:35.463
> 
> 标签：html, css, code-inspection

我发现自己看到了按钮、输入、标题等内容。并想要代码，以便我可以参考它们并使我的基本设计看起来更好。我总是试着改变一下，我不喜欢偷别人的设计。

仅从浏览器查看页面源代码非常草率，通常难以阅读。我尝试使用 Firebug，但发现了一个大问题。它没有显示所有的 CSS。

示例
Firebug 只会显示：

```
box-shadow: 0 14px 10px -12px rgba(111,112,114,0.8); 
```

当完整的代码是：

```
box-shadow: 0 14px 10px -12px rgba(111,112,114,0.8);  
-webkit-box-shadow: 0 14px 10px -12px rgba(111,112,114,0.8);  
-moz-box-shadow: 0 14px 10px -12px rgba(111,112,114,0.8); 
```

如果省略了 moz 和 webkit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:05:28.913

我可以用 Chrome Inspect 工具的经验说话，在调试页面元素时，浏览器会自动忽略并且不显示无效的属性或样式，但是如果您查看实际的页面源代码（或 css），您的样式将在那里.

我认为如果 Firebug 不显示这些样式，则意味着 Firefox 正在忽略它们，在这种情况下，您使用的是`-moz-box-shadow`Firefox 用于`box-shadow`呈现元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:59:46.083

下载任何浏览器的最新版本，你就会看到所有的 CSS。

使用 Chrome 中的 Inspector，您甚至可以看到不同的状态，例如`:hover` `:active`等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:00:38.683

为什么不直接使用 Chrome 内置的检查元素？我每天都在使用它并喜欢它。

我还使用“stylebot”向我展示了一些网站样式，但我只用它来设置我觉得需要一些修复的网站（客户端）的样式，比如让按钮变大等。

# c++ - HippoMocks - 使用 std::vector 模拟方法无法编译

> ID：11771814
> 
> 赞同：0
> 
> 时间：2012-08-02T05:58:20.243
> 
> 标签：c++, unit-testing, mocking, hippomocks

在尝试 HippoMocks（Cygwin、GCC 4.5.3、CppUnit）模拟接口时，其中一种方法导致编译失败。进一步的分类表明，只有以 std::vector 作为参数的模拟方法才会失败。

例如

```
m_Mocks.ExpectCall(m_EmpSvcMock.get(), IEmployeeServiceProxy::GetEmployees); // compile error!
m_Mocks.ExpectCall(m_EmpSvcMock.get(), IEmployeeServiceProxy::AddEmployee); // compile OK! 
```

在哪里

```
class IEmployeeServiceProxy
{
public:
    virtual ~IEmployeeServiceProxy() { }
    virtual void AddEmployee(const Employee&) = 0;
    virtual void GetEmployees(std::vector<Employee>&) = 0;
};

struct Employee
{
    boost::uuids::uuid Id;
    std::string Name;
}; 
```

编译器错误：

```
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stream_iterator.h: In member function ‘std::ostream_iterator<_Tp, _CharT, _Traits>& std::ostream_iterator<_Tp, _CharT, _Traits>::operator=(const _Tp&) [with _Tp = EmployeeServiceLib::Employee, _CharT = char, _Traits = std::char_traits<char>, std::ostream_iterator<_Tp, _CharT, _Traits> = std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >]’:
In file included from /usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/iterator:67:0,
                 from /usr/include/boost/uuid/string_generator.hpp:14,
                 from /usr/include/boost/uuid/uuid_generators.hpp:15,
                 from tests/../../RcfTestShared/IEmployeeService.hpp:7,
                 from tests/../IEmployeeServiceProxy.h:11,
                 from tests/ClientTest.h:13,
                 from tests/ClientTest.cpp:8:
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_algobase.h:349:8:   instantiated from ‘static _OI std::__copy_move<false, false, std::random_access_iterator_tag>::__copy_m(_II, _II, _OI) [with _II = const EmployeeServiceLib::Employee*, _OI = std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >]’
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_algobase.h:404:70:   instantiated from ‘_OI std::__copy_move_a(_II, _II, _OI) [with bool _IsMove = false, _II = const EmployeeServiceLib::Employee*, _OI = std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >]’
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_algobase.h:442:39:   instantiated from ‘_OI std::__copy_move_a2(_II, _II, _OI) [with bool _IsMove = false, _II = __gnu_cxx::__normal_iterator<const EmployeeServiceLib::Employee*, std::vector<EmployeeServiceLib::Employee> >, _OI = std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >]’
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stl_algobase.h:474:18:   instantiated from ‘_OI std::copy(_II, _II, _OI) [with _II = __gnu_cxx::__normal_iterator<const EmployeeServiceLib::Employee*, std::vector<EmployeeServiceLib::Employee> >, _OI = std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >]’
../../RCF/RCF-1.3.1/include/RCF/Tools.hpp:116:9:   instantiated from ‘std::ostream& std::operator<<(std::ostream&, const std::vector<_RealType>&) [with T = EmployeeServiceLib::Employee, std::ostream = std::basic_ostream<char>]’
../../hippomocks/HippoMocks/hippomocks.h:94:5:   instantiated from ‘static void printArg<T>::print(std::ostream&, T, bool) [with T = std::vector<EmployeeServiceLib::Employee>&, std::ostream = std::basic_ostream<char>]’
../../hippomocks/HippoMocks/hippomocks.h:170:5:   instantiated from ‘void ref_tuple<A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P>::printTo(std::ostream&) const [with A = std::vector<EmployeeServiceLib::Employee>&, B = NullType, C = NullType, D = NullType, E = NullType, F = NullType, G = NullType, H = NullType, I = NullType, J = NullType, K = NullType, L = NullType, M = NullType, N = NullType, O = NullType, P = NullType, std::ostream = std::basic_ostream<char>]’
tests/ClientTest.cpp:47:1:   instantiated from here
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/bits/stream_iterator.h:196:2: error: cannot bind ‘std::ostream_iterator<EmployeeServiceLib::Employee, char, std::char_traits<char> >::ostream_type’ lvalue to ‘std::basic_ostream<char>&&’
/usr/lib/gcc/i686-pc-cygwin/4.5.3/include/c++/ostream:579:5: error:   initializing argument 1 of ‘std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char, _Traits = std::char_traits<char>, _Tp = EmployeeServiceLib::Employee]’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:53:48.467

Possibly it's complaining that you don't have operator<< defined for Employee, but I'm not certain. I think you've missed the last line of your error messages? In any case I would read the documentation and see what requirements they have for the class being tested.

Requiring you to define operator== and operator<< and maybe others is pretty standard for a unit testing framework. If you think about it a unit testing framework is going to need to compare objects of the types you are testing and maybe going to try and output those objects when things go wrong.

# makefile - 修改驱动源代码后如何“制作”现有的Linux内核模块驱动

> ID：11771818
> 
> 赞同：3
> 
> 时间：2012-08-02T05:58:39.380
> 
> 标签：makefile, kernel

我对 Linux USB Wi-Fi 卡驱动程序进行了一些微不足道的修改，以插入一些日志记录（`printk`语句）。我大致遵循[有关如何重新编译/加载模块的指南，该指南](http://www.cyberciti.biz/tips/build-linux-kernel-module-against-installed-kernel-source-tree.html)指出我需要执行`make`才能构建`.ko`文件。`Makefile`工作目录 ( ) 中存在一个`/usr/src/linux/drivers/net/wireless/rtl818x/rtl8187/`，内容为：

```
rtl8187-objs        := dev.o rtl8225.o leds.o rfkill.o

obj-$(CONFIG_RTL8187)   += rtl8187.o

ccflags-y += -Idrivers/net/wireless/rtl818x 
```

当我`make`在这个目录中执行时，我得到：

```
make: *** No targets.  Stop. 
```

根据[this](http://www.gnu.org/software/make/manual/html_node/Error-Messages.html)，这意味着*“找到了一些makefile，但它不包含任何默认目标，并且在命令行上没有给出任何目标。GNU make 在这些情况下没有任何作用。”*

所以我的问题是，在我正在尝试做的事情的背景下，这意味着什么，以及如何生成`.ko`我声称下一步需要的文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T00:32:39.903

您必须从 Linux 源代码 ( */usr/src/linux/* )的顶级目录运行*make 。*确保您的驱动程序包含在您的*/usr/src/linux/.config*文件中。因此，使用您的驱动程序构建内核。如果您不想重建整个内核，请阅读更多内容:)

 **如果要重新构建目录中的所有模块：

```
make M=drivers/net/wireless/rtl818x/rtl8187/ 
```

如果要在目录中重新构建单个模块：

```
make M=drivers/net/wireless/rtl818x/ CONFIG_RTL8187=m 
```

*CONFIG_RTL8187* 名称可以在*drivers/net/wireless/rtl818x/Kconfig* (CONFIG_ + RTL8187)中找到

它也应该这样工作：

```
make drivers/net/wireless/rtl818x/rtl8187/rtl8187.ko 
```**

# c# - 扫描仪详细信息的 snmp oid (HP LaserJet 3055)

> ID：11771823
> 
> 赞同：0
> 
> 时间：2012-08-02T05:59:03.410
> 
> 标签：c#, windows-services, snmp

如何使用 mib 树在 Windows 服务（.net 框架 4.0）中访问扫描仪详细信息（例如 HP LaserJet 3055）？任何人都请告诉我获取详细信息的 OID，例如扫描仪的扫描仪_ADF_PageCount、TotalPagesJammed 等。

我将每个 oid 与“1.3.6.1.4.1.11.2.3.9.4.2.1.2.2”进行比较。但它仍然没有给出上述细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:00:01.073

> 1) 扫描仪-附件-adf-sheet-count - .1.3.6.1.4.1.11.2.3.9.4.2.1.2.2.1.20.0
> 
> 2) hrprinterdetectederrorstate - .1.3.6.1.2.1.25.3.5.1.2。它返回一个八位字节字符串，您需要将其解释为
> 
> ```
>  Condition         Bit #    hrDeviceStatus
>                 lowPaper          0        warning(3)
>                 noPaper           1        down(5)
>                 lowToner          2        warning(3)
>                 noToner           3        down(5)
>                 doorOpen          4        down(5)
>                 jammed            5        down(5)
>                 offline           6        down(5)
>                 serviceRequested  7        warning(3) 
> ```

我从 HP-LASERJET-COMMON-MIB 获得此信息，您可以从[此处](http://h30499.www3.hp.com/hpeb/attachments/hpeb/bsc-413/138569/1/296750.mib)下载。浏览它以获取更多详细信息。

# android - Android：如何从另一个类加载保存的数据？

> ID：11771825
> 
> 赞同：0
> 
> 时间：2012-08-02T05:59:02.550
> 
> 标签：android, reference, save

我在保存按钮时保存了一个 int（在升级类中），并且在另一个活动（播放类）中调用了 int。但是每当我重播应用程序时，我首先需要在进入播放活动之前进入升级活动，否则我保存的整数无法正确加载。

```
public class Play extends Activity implements OnTouchListener {

MKZSurface ourSurfaceView;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    ourSurfaceView = new MKZSurface(this);
    ourSurfaceView.setOnTouchListener(this);
    setContentView(ourSurfaceView);
    MYU = Upgrades.mYU;
    BU = Upgrades.BU;
    MBU = Upgrades.mBU;
    RU = Upgrades.RU;
    MRU = Upgrades.mRU;
} 
```

在升级类中，我使用 SharedPreferences 将这些整数保存为一个值。如何在无需先进入升级页面的情况下使用保存的整数加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:02:57.913

首先转到 Play 活动并检查是否保存值！= DEFAULT_VALUE 否则转到升级活动并保存新值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:08:28.127

如果您使用 SharedPreferences 保存了数据，则无需返回升级页面即可检索数据。使用类似下面的东西来检索您的数据。

```
SharedPreferences prefs = getSharedPreferences(MY_PREFS, MODE_PRIVATE);
int indData = prefs.getInt(MY_INT, 0); 
```

如果您尚未保存任何值，则 0 是默认值。

# jsp - jsp登录后如何重定向到同一页面？

> ID：11771827
> 
> 赞同：0
> 
> 时间：2012-08-02T05:59:13.440
> 
> 标签：jsp, jsf

我是jsp web开发的初学者。我要求在登录页面中，根据下拉选择向用户显示不同的表单字段。选择后，单击登录时，必须将他重定向到创建会话和注销选项的同一页面。不确定如何实现所有这些要求。

我如何实现下拉列表的动态字段并在同一页面内创建登录会话？

注意：我在项目中使用 JSF 1.2。

用于实现下拉和登录的jquery：

```
$(document).ready(function(){
 $("div","div#logout").hide();

 $("div","div#fields").hide();
    $("#dropdown").change(function(){

       $("div","div#fields").hide();
       var value=    $("#dropdown").val();
    $("div#"+value).show();
});

});

$(login1).click(function(){
 $("div","div#fields").hide();
    $("div#logout").show();

 }); 
```

当我点击登录时，页面提交再次调用就绪函数。有没有其他方法可以实现这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:17:07.187

只需执行以下操作：

*   检查提交给 servlet 的参数
*   相应地创建您的会话
*   发送到您的原始页面
*   检查您刚刚创建的会话
*   禁用/启用页面上的控件

这是通过在应用程序中维护会话来实现的

```
//page submission at your server
HttpSession session = request.getSession();

//set your session variable here
session.setAttribute("validUser", someValue);

//redirect your page back to login page
response.sendRedirect(URL); 
```

回到您的登录主页，检查 JQuery 中的会话变量并相应地显示：

```
// Read your session variable here
//you can set a boolean to check if the user is logged in then do not call the routine or otherwise
$(function() {
 alert( $.session("validUser") );
}); 
```

# jaxb - JAX-RS：返回响应对象时如何自动序列化集合？

> ID：11771830
> 
> 赞同：17
> 
> 时间：2012-08-02T05:59:28.803
> 
> 标签：jaxb, jersey, jax-rs

我有一个带有 JAXB 注释的员工类：

```
@XmlRootElement(name = "employee")
public class Employee {

    private Integer id;
    private String name;

    ...

    @XmlElement(name = "id")
    public int getId() {
        return this.id;
    }

    ... // setters and getters for name, equals, hashCode, toString
} 
```

还有一个 JAX-RS 资源对象（我使用的是 Jersey 1.12）

```
@GET
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Path("/")
public List<Employee> findEmployees(
    @QueryParam("name") String name, 
    @QueryParam("page") String pageNumber,
    @QueryParam("pageSize") String pageSize) {
    ...
    List<Employee> employees = employeeService.findEmployees(...);

    return employees;
} 
```

这个端点工作正常。我明白了

```
<employees>
  <employee>
    <id>2</id>
    <name>Ana</name>
  </employee>
</employees> 
```

但是，如果我更改方法以返回一个`Response`对象，并将员工列表放入响应正文中，如下所示：

```
@GET
@Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
@Path("/")
public Response findEmployees(
    @QueryParam("name") String name, 
    @QueryParam("page") String pageNumber,
    @QueryParam("pageSize") String pageSize) {
    ...
    List<Employee> employees = employeeService.findEmployees(...);

    return Response.ok().entity(employees).build();
} 
```

由于以下异常，端点导致 HTTP 500：

> `javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class java.util.ArrayList, and Java type class java.util.ArrayList, and MIME media type application/xml was not found`

在第一种情况下，JAX-RS 显然已经安排适当的消息编写器在返回集合时启动。将集合放在实体主体中时不会发生这种情况似乎有些不一致。在返回响应时，我可以采取什么方法来使列表的自动 JAXB 序列化发生？

我知道我可以

*   只需从资源方法返回列表
*   创建一个单独的`EmployeeList`类

但想知道是否有一种很好的方法来使用该`Response`对象并让列表序列化*而不*创建我自己的包装类。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T10:05:27.917

您可以将 包装`List<Employee>`在一个实例中`GenericEntity`以保留类型信息：

*   [http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/GenericEntity.html](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/GenericEntity.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T18:56:15.810

您可以使用 GenericEntity 在响应中发送集合。您必须包含适当的 marshal/unmarshal 库，例如 moxy 或 jaxrs-jackson。

下面是代码：

```
 @GET
    @Consumes({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @Produces({MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON})
    @Path("/")
    public Response findEmployees(
        @QueryParam("name") String name, 
        @QueryParam("page") String pageNumber,
        @QueryParam("pageSize") String pageSize) {
        ...
        List<Employee> employees = employeeService.findEmployees(...);

        GenericEntity<List<Employee>> entity = new GenericEntity<List<Employee>>(Lists.newArrayList(employees))

        return Response.ok().entity(entity).build();
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-30T08:49:36.743

我通过扩展默认的 JacksonJsonProvider 类解决了这个问题，特别是方法 writeTo。

分析这个类的源代码发现了实际类型通过反射实例化的块，所以我修改了源代码如下：

```
public void writeTo(Object value, Class<?> type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap<String,Object> httpHeaders, OutputStream entityStream) throws IOException {
    /* 27-Feb-2009, tatu: Where can we find desired encoding? Within
     *   HTTP headers?
     */
    ObjectMapper mapper = locateMapper(type, mediaType);
    JsonEncoding enc = findEncoding(mediaType, httpHeaders);
    JsonGenerator jg = mapper.getJsonFactory().createJsonGenerator(entityStream, enc);
    jg.disable(JsonGenerator.Feature.AUTO_CLOSE_TARGET);

    // Want indentation?
    if (mapper.getSerializationConfig().isEnabled(SerializationConfig.Feature.INDENT_OUTPUT)) {
        jg.useDefaultPrettyPrinter();
    }
    // 04-Mar-2010, tatu: How about type we were given? (if any)
    JavaType rootType = null;

    if (genericType != null && value != null) {
        /* 10-Jan-2011, tatu: as per [JACKSON-456], it's not safe to just force root
         *    type since it prevents polymorphic type serialization. Since we really
         *    just need this for generics, let's only use generic type if it's truly
         *    generic.
         */
        if (genericType.getClass() != Class.class) { // generic types are other impls of 'java.lang.reflect.Type'
            /* This is still not exactly right; should root type be further
             * specialized with 'value.getClass()'? Let's see how well this works before
             * trying to come up with more complete solution.
             */

            //**where the magic happens**
            //if the type to instantiate implements collection interface (List, Set and so on...)
            //Java applies Type erasure from Generic: e.g. List<BaseRealEstate> is seen as List<?> and so List<Object>, so Jackson cannot determine @JsonTypeInfo correctly
            //so, in this case we must determine at runtime the right object type to set
            if(Collection.class.isAssignableFrom(type))
            {
                Collection<?> converted = (Collection<?>) type.cast(value);
                Class<?> elementClass = Object.class;
                if(converted.size() > 0)
                    elementClass = converted.iterator().next().getClass();
                //Tell the mapper to create a collection of type passed as parameter (List, Set and so on..), containing objects determined at runtime with the previous instruction
                rootType = mapper.getTypeFactory().constructCollectionType((Class<? extends Collection<?>>)type, elementClass);
            }
            else
                rootType = mapper.getTypeFactory().constructType(genericType);
            /* 26-Feb-2011, tatu: To help with [JACKSON-518], we better recognize cases where
             *    type degenerates back into "Object.class" (as is the case with plain TypeVariable,
             *    for example), and not use that.
             */
            if (rootType.getRawClass() == Object.class) {
                rootType = null;
            }
        }
    }
    // [JACKSON-578]: Allow use of @JsonView in resource methods.
    Class<?> viewToUse = null;
    if (annotations != null && annotations.length > 0) {
        viewToUse = _findView(mapper, annotations);
    }
    if (viewToUse != null) {
        // TODO: change to use 'writerWithType' for 2.0 (1.9 could use, but let's defer)
        ObjectWriter viewWriter = mapper.viewWriter(viewToUse);
        // [JACKSON-245] Allow automatic JSONP wrapping
        if (_jsonpFunctionName != null) {
            viewWriter.writeValue(jg, new JSONPObject(this._jsonpFunctionName, value, rootType));
        } else if (rootType != null) {
            // TODO: change to use 'writerWithType' for 2.0 (1.9 could use, but let's defer)
            mapper.typedWriter(rootType).withView(viewToUse).writeValue(jg, value);
        } else {
            viewWriter.writeValue(jg, value);
        }
    } else {
        // [JACKSON-245] Allow automatic JSONP wrapping
        if (_jsonpFunctionName != null) {
            mapper.writeValue(jg, new JSONPObject(this._jsonpFunctionName, value, rootType));
        } else if (rootType != null) {
            // TODO: change to use 'writerWithType' for 2.0 (1.9 could use, but let's defer)
            mapper.typedWriter(rootType).writeValue(jg, value);
        } else {
            mapper.writeValue(jg, value);
        }
    }
} 
```

# javascript - 如果在 touchstart 上删除触摸的子元素，则不会触发父级的“Touchend”事件

> ID：11771834
> 
> 赞同：2
> 
> 时间：2012-08-02T05:59:51.223
> 
> 标签：javascript, ipad, html, events, touch

在 touchstart 和 touchend 事件中描述了一个父 div。它有一个完全覆盖父母的孩子。在 touchstart 上，我删除了孩子并添加了其他孩子。在这种情况下，不会触发 touchend 事件。在这种情况下，相同的鼠标事件（mousedonw/mouseup）运行良好。

[这](http://jsfiddle.net/e3bUq/26/)是jsfiddle。

我不能使用鼠标事件，因为在设备（iPad、Android）上，mousedown 事件实际上不是在用户开始触摸元素时调用，而是在 mouseup 之前调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:16:01.713

好的，看起来我找到了解决方案。我需要结合订阅：touchstart 和 mouseup 事件。

[http://jsfiddle.net/e3bUq/27/](http://jsfiddle.net/e3bUq/27/)

# android - 在android中录制时减少背景噪音

> ID：11771846
> 
> 赞同：2
> 
> 时间：2012-08-02T06:01:10.210
> 
> 标签：android, filter, android-ndk, noise-reduction

我开发了一个应用程序，通过在 android 中使用音轨和音频记录类记录声音并同时播放大约 100 毫秒的延迟。但是播放的音频有很多背景噪音。所以android中有什么办法可以减少播放时的背景噪音。

请不要告诉我习惯了 Audacity Software 来降低噪音，因为我没有保存录制的音频。我只是将它保存在缓冲区中并通过音轨播放此缓冲区。使用 NDK 实现一个过滤器以减少 android 中的背景噪声。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T23:41:30.123

简单的做法是使用语音设置播放音频。它将过滤掉大部分的“嗡嗡声”噪音。AudioManager.STREAM_VOICE_CALL。如果可用，您可以使用 NoiseSupression 过滤器。NoiseSuppressor.create(device.getAudioSessionId());

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-07T16:57:57.027

您可以使用[ClearRecord](https://play.google.com/store/apps/details?id=com.ittiam.clearrecord)应用程序。这是免费的。您可以在开启降噪的情况下播放音频。播放音频时，背景噪音被消除，清晰的人可以听到清晰的声音。

# iphone - 未在我的场景中添加新图层

> ID：11771847
> 
> 赞同：1
> 
> 时间：2012-08-02T06:01:12.260
> 
> 标签：iphone, cocos2d-iphone, cclayer

我有一个 CCScene，它已经保存了我的 gameLayer，我正在尝试在其上添加 HUD 层。但是 HUD 层没有添加到我的场景中，我可以这么说，因为我已经在 HUD 层上设置了 CCLabel，当我运行时我的项目，我看不到那个标签。

这就是我正在做的事情：在我的gameLayer中：

```
+(id) scene
{

   CCScene *scene = [CCScene node];

   GameScreen *layer = [GameScreen node];
   [scene addChild: layer];

    HUDclass * otherLayer = [HUDclass node];
    [scene addChild:otherLayer];

    layer.HC = otherLayer;// HC is reference to my HUD layer in @Interface of gameLayer
    return scene;
} 
```

然后在我的 HUD 层中，我刚刚在它的 init 方法中添加了一个 CCLabelTTF，如下所示：

```
-(id)init {

    if ((self = [super init])) {

    CCLabelTTF * label = [CCLabelTTF labelWithString:@"IN WEAPON CLASS" fontName:@"Arial"    fontSize:15];
     label.position = ccp(240,160);
     [self addChild:label];

    }

    return  self;
} 
```

但是现在当我运行我的项目时，我看不到那个标签，我在这里做错了什么......？

也没有调用 HUD 层中的 init 方法。

有任何想法吗.. ？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:07:40.353

我猜 [Hudclass node] 没有调用你的类的 init 方法，而只是调用 CCNode 的 init 方法。您可以通过在该行设置断点并进入节点方法来验证这一点。

两种解决方案：

*   覆盖 HUD 类中的 +(id)node
*   使用 [[[HUDclass alloc] init] autorelease] 创建层

# c++ - 前向声明的问题 - 朋友函数和线/点类

> ID：11771849
> 
> 赞同：0
> 
> 时间：2012-08-02T06:01:30.073
> 
> 标签：c++, class, forward-declaration

我有一个了解朋友功能的演示程序。我想我遇到了与前向声明相关的错误。

我有一个点类，它有 x & y 坐标。线类有两个点类对象。现在我在线类中有一个函数，它将计算线的斜率。

这是我的程序：

```
#include <iostream>
using namespace std;

class point
{
    int x,y;
public:
    point(int,int);
    point();
    friend float line::slope();
};

point::point(int a, int b)
{
    x=a;
    y=b;
}

point::point()
{
}

class line
{
    point p1,p2;
public:
    line(point,point);
    float slope();
};

line::line(point p1, point p2)
{
    this->p1=p1;
    this->p2=p2;
}

float line::slope()
{
    float s;
    s=((float)p2.y-p1.y)/(p2.x-p1.x);
    return s;
}

int main()
{
    float sl;
    point obj(5,10);
    point obj1(4,8);
    line obj3(obj,obj1);
    sl=obj3.slope();
    cout<<"\n slope:"<<sl;
    return 0;
} 
```

由于以下原因，它给了我关于前向声明的编译器错误：

1.  当我尝试首先定义我的线类时，它不知道点类。即使我**转发声明点类**，这也不足以创建点类的对象，编译器应该知道点类的大小，因此知道整个类本身。通过此答案中的解释理解它：[https ://stackoverflow.com/a/5543788](https://stackoverflow.com/a/5543788)

2.  如果我首先定义点类，它需要知道友函数斜率，因此需要知道类线。所以我尝试在定义点类之前像这样为线类和斜率函数提供前向声明：

> 类线；
> 
> ```
> float line::slope();
> 
> class point
> {
>     int x,y;
> public:
>     point(int,int);
>     point();
>     friend float line::slope();
> }; 
> ```

现在这给了我以下错误：

```
friend1.cpp:5: error: invalid use of incomplete type ‘struct line’
friend1.cpp:4: error: forward declaration of ‘struct line’
friend1.cpp:13: error: invalid use of incomplete type ‘struct line’
friend1.cpp:4: error: forward declaration of ‘struct line’
friend1.cpp: In member function ‘float line::slope()’:
friend1.cpp:9: error: ‘int point::y’ is private
friend1.cpp:43: error: within this context
friend1.cpp:9: error: ‘int point::y’ is private
friend1.cpp:43: error: within this context
friend1.cpp:9: error: ‘int point::x’ is private
friend1.cpp:43: error: within this context
friend1.cpp:9: error: ‘int point::x’ is private
friend1.cpp:43: error: within this context 
```

.3\. 接下来我尝试将point.h和point.cpp中的点类和line.h和line.cpp中的线类分开。但是这里仍然存在相互依赖。

虽然这在理论上应该是可能的，但我无法弄清楚如何让它工作。

寻找答案。

谢谢，

拉吉

**PS：这个程序是为了单独演示友元函数的使用**。在友元函数有两种类型的情况下，这是处理第二种类型的努力：

1.  友函数是独立的。
2.  作为另一个类的成员的朋友函数。

因此，在这种情况下排除了使用朋友类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:07:57.143

添加`line`为一个`friend`，而不仅仅是一个方法：

```
 friend class line; 
```

其他备注：

*   将声明与头文件和实现文件中的实现分开。
*   比指令更喜欢完全限定`using`（即删除`using namespace std;`并`std::cout`改为使用。
*   更喜欢复杂类型的传递引用 - 更改`line(point,point);`为`line(const point&, const point&);`

**编辑**出于教育目的-您不能像现在的代码那样将该特定函数声明为朋友，因为没有`line`类的完整定义。因此，以下是唯一的方法：

```
class point;
class line
{
    point *p1,*p2;
public:
    line(point,point);
    float slope();
};

class point
{
    int x,y;
public:
    point(int,int);
    point();
    friend float line::slope();
}; 
```

您前向声明`point`并将`point`成员更改`line`为`point*`（因为 point 还不是完整的类型）。你现在`point`有了`line`类的完整定义，所以你可以将方法声明为朋友。

编辑 2：对于这种特殊情况，不可能`point`在内部使用对象，`line`因为您需要完整类型。但`line`也必须完全定义才能将其成员声明为`friend`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:15:03.320

在正常情况下，我会完全避免`friend`在这里使用。

更喜欢将功能添加到`point`：

```
float slope_to(const point& other)
{// Not checked, just translated from your implementation
    return ((float)other.y-y)/(other.x-x);
} 
```

并实施：

```
float line::slope()
{
    return p1.slope_to(p2);
} 
```

这种方式`line`不关心`point`'s 的实现，并且在实现 3D 时不需要更改`points`。

* * *

下面是一个`friend`自由*函数*(1.) 的演示：

```
#include <iostream>

class point
{
    int x, y;
public:
    point(int, int);
    friend std::ostream& operator <<(std::ostream& os, const point& p);
};

std::ostream& operator <<(std::ostream& os, const point& p)
{
    return os << '(' << p.x << ", " << p.y << ')';
}

point::point(int a, int b)
    :x(a)
    ,y(b)
{
}

int main()
{
    point obj(5, 10);
    std::cout << "\n point " << obj;
} 
```

* * *

这是一个基于您自己的代码构建的示例，以具有`friend`一个*成员函数*(2.)。

```
#include <iostream>
#include <memory>

using namespace std;

class point;

class line
{
    std::auto_ptr<point> p1, p2;
public:
    line(point&, point&);
    float slope();
};

class point
{
    int x, y;
public:
    point(int, int);
    friend float line::slope();
};

point::point(int a, int b)
    :x(a)
    ,y(b)
{
}

line::line(point& p1, point& p2)
    :p1(new point(p1))
    ,p2(new point(p2))
{
}

float line::slope()
{
    return ((float)p2->y - p1->y) / (p2->x - p1->x);
}

int main()
{
    point obj(5, 10);
    point obj1(4, 8);
    line obj3(obj, obj1);

    cout << "\n slope:" << obj3.slope();
} 
```

为了`point`从内部引用`line`，我使用 ( `auto_`) 指针和引用，因为该类是在该点*声明*但*未定义*。`line::slope()`及时声明，以便我将其引用`friend`为`point`. 这种循环依赖是一种可怕的*代码气味*，应该避免。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:07:35.403

让 Line 成为 Point 的朋友

```
class point
{
 friend class line;
 ...
}; 
```

将单个方法声明为朋友几乎没有什么目的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T06:20:20.373

您可以创建一个辅助仿函数来计算斜率。这使您可以在`point`不涉及的情况下使仿函数的方法成为 的朋友`line`。

```
class point;
class line;

struct slope {
    float operator () (const point &, const point &) const;
    float operator () (const line &) const;
};

class point {
    int x,y;
public:
    point(int a,int b) : x(a), y(b) {}
    point() {}
    friend float slope::operator ()(const point &, const point &) const;
};

class line {
    point p1,p2;
public:
    line(point a,point b) : p1(a), p2(b) {}
    float slope() { return ::slope()(*this); }
    friend float slope::operator ()(const line &) const;
}; 
```

随着实现：

```
float slope::operator () (const point &p1, const point &p2) const {
    float s;
    s=((float)p2.y-p1.y)/(p2.x-p1.x);
    return s;
}

float slope::operator () (const line &l) const {
    return (*this)(l.p1, l.p2);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T06:04:46.880

`friend float line::slope();`您在定义类之前引用行类。

`class line;`只需在 Point 类的定义前添加一行

也`friend float line::slope();`改为`friend class line;`

# android - 在android中播放从ASP.NET服务器下载的视频

> ID：11771851
> 
> 赞同：0
> 
> 时间：2012-08-02T06:01:50.437
> 
> 标签：android

我想在android中播放视频。视频从 ASP.NET 服务器下载并作为字符串接收。如何使用默认播放器在 android 中播放接收到的视频。

```
String img = wbsi.SoapAction(new String[] { "XXXX", "XXXX",
                    "XXXX" },
                new String[] { pref.getString("XXXX", "n.a"),
                            "XXXX", XXXXXX }); 
```

上面的代码调用webservice类，将视频文件下载为byte[]字符串。

我能够成功下载图像并查看它，但面临视频问题。尝试了[Android 的解决方案 - Playing mp3 from byte[]](https://stackoverflow.com/questions/1972027/android-playing-mp3-from-byte)并且能够播放音频但不能播放视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:05:09.177

这是一个糟糕的解决方案！流量非常大，内存量非常大。你应该返回一个视频文件的 url 并将这个 url 设置为播放器

# c# - C# 多线程和重新排序——这里发生了什么？

> ID：11771852
> 
> 赞同：2
> 
> 时间：2012-08-02T06:01:55.150
> 
> 标签：c#, multithreading, race-condition

我有以下代码：

```
 public static System.Int32 i = 0;

    static void Main(string[] args)
    {
        new Thread(Worker1) { IsBackground = true }.Start();
        new Thread(Worker2) { IsBackground = true }.Start();

        Console.WriteLine("Running... Press enter to quit");
        Console.ReadLine();
    }

    static void Worker1(object _)
    {
        while (true)
        {
            var oldValue = i;
            i++;
            var newValue = i;

            if (newValue < oldValue)
                Console.WriteLine("{2}, i++ went backwards! oldValue={0}, newValue={1}!", oldValue, newValue, DateTime.Now.ToString("HH:MM:ss.fff"));
        }
    }

    static void Worker2(object _)
    {
        while (true)
        {
            i++;
        }
    } 
```

运行时，这会产生如下所示的输出：

```
17:08:17.020, i++ went backwards! oldValue=6124653, newValue=6113984!
17:08:17.057, i++ went backwards! oldValue=18764535, newValue=18752368!
17:08:17.086, i++ went backwards! oldValue=27236177, newValue=27236176!
17:08:17.087, i++ went backwards! oldValue=27550457, newValue=27535008!
17:08:17.130, i++ went backwards! oldValue=40251349, newValue=40235492!
17:08:17.137, i++ went backwards! oldValue=42339974, newValue=42323786!
17:08:17.142, i++ went backwards! oldValue=43828602, newValue=43828436!
17:08:17.149, i++ went backwards! oldValue=45969702, newValue=45959111!
17:08:17.158, i++ went backwards! oldValue=48705847, newValue=48705549!
17:08:17.230, i++ went backwards! oldValue=71199684, newValue=71199674! 
```

注意：这是在 Windows 7 上具有超线程的四核 i7 上运行的

据我所知，要么：

*   Thread2 在读取 oldValue 和 newValue 之间增加了大约 40 亿次（但不完全！）。不过，考虑到上面的数字和时间，我在接下来的 2 秒内中奖 10 次的可能性似乎更高。

*   CPU 和编译器正在做一些重新排序...这似乎是合乎逻辑的解释，但我无法弄清楚实际上可能导致这种情况的一系列操作？

任何人都可以对此有所了解吗？

* * *

为了澄清这个问题：我特意寻找可以重现内存重新排序错误的代码，作为教育练习的一部分。有很多方法可以解决这个问题，我主要感兴趣的是分析正在发生的事情。

@Tymek 已经在下面展示了（现在已经指出的很明显）答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T08:11:53.417

你肯定知道 i++ 不是原子的，看起来真的像这样：

*   从内存读取`i`到寄存器，
*   增加寄存器，
*   将寄存器写入内存在哪里`i`，
*   返回`i`；

这个序列可以在任何阶段中断。

考虑到这一点，产生厄运信息的一种情况如下：

*   让我们`i`成为`100`；
*   线程2读取`100`并被中断；
*   线程 1 执行一段时间并将 i 递增到 120（几个完整循环），然后读取`i`为`120`，读取`i`并将其递增到`121`并在之前中断`var newValue = i;`；
*   线程 2 递增`i`到`101`并被中断；
*   线程一运行并执行`var newValue = i`<- 这将读入`101`；

现在`oldValue`是`120`和`newValue`是`101`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:13:36.020

如果您希望旧值的分配、i 的递增和新值的分配“同时”发生，您应该使用锁。只需引入一个私有变量，然后对此使用锁。这看起来像：

```
lock(lockObj)
{
  var oldValue = i;             
  i++;             
  var newValue = i;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T06:28:49.923

为避免此问题，您可以使用[Interlocked.Increment](http://msdn.microsoft.com/ru-ru/library/dd78zt0c.aspx)它将保证操作将是原子的和线程安全的。当您使用 i++ 时，它不是原子的，并且它的值可以在增量期间更改（例如从另一个线程）。

# php - 从本地主机发送电子邮件

> ID：11771854
> 
> 赞同：0
> 
> 时间：2012-08-02T06:02:06.087
> 
> 标签：php, email, xampp, localhost

我想从**localhost**发送电子邮件，而不使用域。使用**php xampp**。有什么可能的方法吗？

```
$headers = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: xxx@example.com' . "\r\n";
mail("xxx@gmail.com", "subject", "body", $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:04:17.310

如果您使用的是 Linux，请在您的系统中安装 Sendmail 或 Postfix。或者在 Windows 中使用这个软件： http: [//www.softstack.com/freesmtp.html](http://www.softstack.com/freesmtp.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:07:42.887

首先，您需要确保这些值没有在您的 php.ini 文件中注释。要取消注释，只需删除`;`行首的

```
SMTP = localhost
smtp_port = 25
sendmail_from = postmaster@localhost 
```

然后您需要从 XAMPP 控制面板启动“Mercury Mail”。运行后，您可以尝试发送电子邮件。

# android - 设置 WebClient 时 Twitter 不返回 Activity

> ID：11771855
> 
> 赞同：0
> 
> 时间：2012-08-02T06:02:06.527
> 
> 标签：android, twitter4j

我使用 Twitter4J 连接到 Twitter。我通过为 WebView 设置 WebViewClient 来防止通过默认浏览器加载。问题是 Twitter 没有返回我的活动。重定向后在 WebView 上显示“网页不可用”。

打电话

```
 final RequestToken requestToken = twitter.getOAuthRequestToken(Constant.CALLBACK_URL);
        twitterSite.loadUrl(requestToken.getAuthenticationURL()); 
```

onNewIntent & WebViewClient

```
@Override
protected void onNewIntent(final Intent intent) {
    super.onNewIntent(intent);
    setResult(RESULT_OK);
    finish();
}

private class CustomWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(final WebView view, final String url) {         
        if(url.startsWith("http")) {
            view.loadUrl(url);
            return true;
        }

        return false;
    } 
```

显现

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".TwitterLoginActivity"
        android:label="@string/title_activity_main" 
        android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="test123"/>
        </intent-filter>
    </activity>
</application> 
```

CALLBACK_URL

```
public static final String CALLBACK_URL = "test123:///"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:51:03.427

你的代码很好。只需要进行如下更改

```
 private class CustomWebViewClient extends WebViewClient 
     {
        @Override
        public boolean shouldOverrideUrlLoading(final WebView view, final String url)     
        {         
            if(url.startsWith(Constant.CALLBACK_URL))
            {
              //set visibility  GONE/INVISIBLE for webview.
            }
            else if(url.startsWith("http")) 
            {
                view.loadUrl(url);
                return true;
            }

            return false;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:26:09.217

我认为你应该这样使用：1），

```
public static final String CALLBACK_URL = "test123://TwitterLoginActivity"; 
```

2),

```
<activity
        android:name=".TwitterLoginActivity"
        android:label="@string/title_activity_main" 
        android:launchMode="singleInstance">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="test123"  android:host="TwitterLoginActivity"/>
        </intent-filter>
    </activity> 
```

请测试一下。祝你好运！

# c# - 两个 .cs 类之间的对象？

> ID：11771861
> 
> 赞同：0
> 
> 时间：2012-08-02T06:02:32.367
> 
> 标签：c#, c#-4.0

我可以在两个类之间创建对象吗？我有 2 个类文件。first.cs 和 second.cs ，在 first.cs 类文件中有（都在同一个命名空间中）

```
public class news {
//some code here
} 
```

second.cs 类文件有

```
public class newsround{
// some code here
 news nw = new news();
 nw. <-- Nothing display here
} 
```

当我尝试从以前的 first.cs 创建对象时无法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T06:03:50.363

该对象调用应该在方法内部，而不是在类的主体上。也许你错过了`newsround`构造函数？

```
public class newsround
{
   private news news;

   public newsround(news news)
   {
      this.news = news;
   }
} 
```

另外，请确保它们都在同一个`namespace`，否则在声明中`using`声明。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:05:43.180

您只能在类级别定义变量/字段。要访问对象`nw`，您需要它位于某个方法中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T09:38:18.153

检查您的班级级别。我认为此错误源于您的班级级别。将这些 .cs 文件添加到 App_Code 文件夹。

# regex - 正则表达式搜索和替换子循环（？）

> ID：11771864
> 
> 赞同：1
> 
> 时间：2012-08-02T06:02:46.000
> 
> 标签：regex, search, loops, replace, dreamweaver

天，

我是正则表达式的新手，并试图节省转换垃圾 PDF“html”的时间，它已经用段落替换了所有列表项。使用 Dreamweaver CS6 或 notepad++ 我想知道是否我在应该是列表项的 p 标记周围手动添加 ul 标记，然后我可以使用列表项搜索/替换 ul 标记内的所有段落。

我一直在节省时间做以下事情：

```
Find: <p>Activity ([^>]*)</p>
Replace: <h2>Activity $1</h2>

Find: <p class="s23">([^>]*)</p>
Replace: <h3>$1</h3> 
```

但我不知道是否可以在某个地方的正则表达式中循环，例如：

```
Find: *loop within ul* <p>([^>]*)</p>
Replace: <li>$1</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T15:53:22.607

If you have a look at what a regular expression is, you will realize that it is not possible to do flow control like loops with a regex alone. Quoting [Wikipedia](http://en.wikipedia.org/wiki/Regular_expression):

> In computing, a regular expression provides a concise and flexible means to “match” (**specify and recognize**) strings of text, such as particular characters, words, or patterns of characters.

emphasis mine – simply put, a regex is a fancy way to find a string; it either does (it matches), or not. It is not a a set of logical processing instructions with a controllable flow – i.e. not a program.

However, there are other ways to achieve what you are after using a regex alone, as long as you use an editor that supports “Replace all” (probably a given) as well as [multi-line matches](http://www.regular-expressions.info/modifiers.html) and [capture groups](http://www.regular-expressions.info/brackets.html) in its regex engine. Searching for

```
(<ul>)(<p>.*</p>)?<p>([^<])*</p>(<p>.*</p>)?(</ul>) 
```

will match **any** `<p></p>` block inside an `<ul></ul>` block by allowing for an arbitrary number of preceding and following `<p></p>` blocks, including 0 of either. Assuming your backreference syntax is `$x` from your code examples, the replacement string would be

```
$1$2<li>$3</li>$4$5 
```

– replace all occurences and you should be set.

# objective-c - 来自 NSSet 的 NSArray 元素未显示在 TableViewCell 中

> ID：11771867
> 
> 赞同：0
> 
> 时间：2012-08-02T06:03:19.880
> 
> 标签：objective-c, ios, xcode, uitableview, nsarray

我有从 NSSet 实现的 NSArray 元素，如果我尝试在 Table View Cell 中显示元素，我在 tableView numberOfRowsInSection 部分遇到 BAD ACCESS 问题。这是我的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

jsonurl=[NSURL URLWithString:@"http://www.sample.net/products.php"];//NSURL

jsondata=[[NSString alloc]initWithContentsOfURL:jsonurl];//NSString
jsonarray=[[NSMutableArray alloc]init];//NSMutableArray

self.jsonarray=[jsondata JSONValue];

array=[jsonarray valueForKey:@"post_title"];

set = [NSSet setWithArray:array];//NSMutableSet
array=[set allObjects];//NSArray

NSLog(@"%@",array);

}

#pragma mark - Table view data source

  - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [array count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)  
{        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

}
// Configure the cell...

cell.textLabel.text = [self.array objectAtIndex: [indexPath row]];    
return cell;
} 
```

请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T06:07:34.893

在您的代码中，您没有分配数组。您正在为该数组设置一个自动释放的对象，这就是您收到此错误的原因。

替换`array=[set allObjects];`为`array=[[set allObjects] retain];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:08:17.067

我认为这是因为您将实例变量设置为自动释放的对象而不保留它们。

要么制作“set”和“array”保留属性并执行

```
self.set = [NSSet setWithArray:self.array];

// This is already a bit weird... If the set is made from the array, the array will be unchanged.
self.array = [self.set allObjects]; 
```

或者只是保留它们：

```
set = [[NSSet setWithArray:array] retain]; 
```

等等

由于 setWithArray 和 allObjects 返回自动释放的对象，一旦离开 viewDidLoad 的范围，就会留下悬空指针。

# sql-server - 在 SQL Server 2008 中使用自联接更新表

> ID：11771872
> 
> 赞同：0
> 
> 时间：2012-08-02T06:03:51.143
> 
> 标签：sql-server, sql-server-2008

我有表员工。我需要使用 excel 表更新经理 ID（要从我在查询下面写的 excel 中获取值）

```
Employee

Emp_ID  Emp_Code Name  ManagerID
1       1111     xyz    2
2       2222     abc    3
3       3333     mno    2 
```

我写过这样的查询

```
UPDATE Employee  SET ManagerID = Emp_ID   from Employee  inner join  Employee AS MGR 
on Employee.emp_id=MGR.emp_id    WHERE  emp_code='1111' 
```

但它没有更新正确的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:30:47.417

根据您告诉我们的情况，您根本不需要自我加入，即您可以直接更新员工的经理 ID

```
UPDATE Employee  
    SET ManagerID = 2 
    WHERE  emp_code='1111' 
```

ETC

但是，如果您的意思是只需要根据员工的 emp_code 和经理的 emp_code 执行更新（即没有经理的 PK），那么您可以使用子查询（不相关），例如

```
UPDATE Employee  
    SET ManagerID = (SELECT manager.Emp_Id 
                       FROM Employee manager 
                       WHERE manager.emp_code = '2222') -- Manager's emp_code
    WHERE  emp_code='1111' -- Employee to update's emp_code 
```

如果您稍后需要添加一个显示员工和他/她的经理的查询（并假设最终老板没有经理），您可以像这样进行自我加入：

```
SELECT emp.emp_code as EmployeeCode, emp.name as EmployeeName, 
       mgr.emp_code as ManagerEmpCode, mgr.name as ManagerName
FROM Employee emp 
   LEFT OUTER JOIN Employee mgr 
   ON emp.ManagerId = mgr.Emp_Id 
```

# php - 这个“清除”功能是否可以防止 SQL 注入？

> ID：11771873
> 
> 赞同：-1
> 
> 时间：2012-08-02T06:03:53.153
> 
> 标签：php, sql, get

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

php get var clear 好不好请帮帮我

```
function Clear($text)
    $Var = str_replace("'", "", $text);
    $Var = str_replace('"', '', $Var);
    $Var = strip_tags($Var);
    $Var = htmlentities($Var);
    return $Var;
}
$_GET['Var'] = "1='1'";
$Var = Clear($_GET['Var']);
$Query = "SELECT * FROM TABLE_NAME WHERE COL ='{$Var}'";
echo 'Result : '.($Query); 
```

它用于 SQL 注入，这是我使用 pdo 编写的示例代码。如果我使用 mysql_real_escape_string 它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:08:03.700

**不。不。不**

这对攻击并不“安全”。

最低**限度**的使用`mysql_real_escape_string`（为此*设计）。*第一个版本[实际上存在缺陷](https://security.stackexchange.com/questions/8028/does-mysql-escape-string-have-any-security-vulnerabilities-if-all-tables-using-l)`mysql_escape_string`，这就是“真实”版本存在的原因。

但是，我*建议将占位符*作为更通用（和更整洁）的解决方案。

请参阅[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)（我也投票决定以骗子的身份结束）。答案包括 PDO 和准备好的语句等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:10:47.360

使用准备好的语句： http: [//php.net/manual/ru/pdo.prepared-statements.php](http://php.net/manual/ru/pdo.prepared-statements.php)

# php - 使用邮件（）；添加一个不存在的附加返回中断

> ID：11771886
> 
> 赞同：0
> 
> 时间：2012-08-02T06:04:59.750
> 
> 标签：php, sendmail

问题是在我使用邮件功能后，它添加了一个不存在的返回中断。代码如下：

```
 $lesujet = "testing ...";
    $letexts = "a bunch of text       
    there is a return break here
    another return break as you see";

    mail("myemail@gmail.com",$lesujet,$letexts,$headers); 
```

这就是电子邮件的样子：一堆文本

这里有回程休息

如您所见，另一个返回休息时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T07:40:46.573

尝试使用函数 str_ireplace 删除换行符：

```
$letexts = str_ireplace(array("\r","\n"),array('',''),$letexts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:19:25.267

那是因为当您在多行中初始化字符串时，它实际上在每行之后添加一个 \r\n 到字符串，请尝试：

```
$letexts = "a bunch of text "
. "there is a return break here "
. "another return break as you see "; 
```

对于多行字符串初始化，请查看[此 SO 线程](https://stackoverflow.com/questions/1848945/best-practices-working-with-long-multiline-strings-in-php)以了解有关多行字符串最佳实践的讨论。

# ruby-on-rails - RSpec 每个块和块

> ID：11771887
> 
> 赞同：0
> 
> 时间：2012-08-02T06:05:05.273
> 
> 标签：ruby-on-rails, rspec, rspec-rails

RSpec中的这些块有什么区别以及在块之前使用哪种情况

```
before(:each)
end

before
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:26:28.743

没有区别。`:each`是默认选项。除非您指定`:each`/ `:all`，否则`:each`使用 then。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:36:34.977

:each is the scope, it can be :each which runs the block before each example, or :all which runs the block before all examples.

You use it to run a block before each or all examples to set up your text fixture. you always have to pass a block to before, thus, your syntax above is slightly incorrect, it should be

```
before(:each) do
  ...
end 
```

or before(:each) { ... }

see [https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/before-and-after-hooks](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/before-and-after-hooks)

# php - 在 PHP 中合并具有相同属性的 XML 文件

> ID：11771895
> 
> 赞同：1
> 
> 时间：2012-08-02T06:06:04.973
> 
> 标签：php, xml, merge

我花了最后两个晚上在这里寻找解决方案，但我无法弄清楚这一点。我有多个 XML 文件，我想遍历所有这些文件以查找包含相同属性的节点，并将它们的所有节点合并到一个输出文件中。这是一个例子：

文件1.xml

```
<game rotnum="241">
  <gamedate> 123 </gamedate>
  <team1> Giants </team1>
  <team2> Eagles </team2>
</game> 
```

文件2.xml

```
<game rotnum="241">
  <line> 4 </line>
  <points> 200 </points>
</game> 
```

合并的.xml

```
<game rotnum="241">
  <gamedate> 123 </gamedate>
  <team1> Giants </team1>
  <team2> Eagles </team2>
  <line> 4 </line>
  <points> 200 </points>
</game> 
```

或多或少。我需要在 PHP 中执行此操作，并且我认为使用 DOM 会比 XSLT 更容易（我对此了解不多）。

多个文件中有很多节点，我需要根据类似的 rotnum 属性匹配数据。

我不知道我是否一定需要这样做，但这是我能想到的最简单的方法，将我的所有数据放入一个 simpleXML 对象中，我可以遍历该对象并为每个游戏生成单独的表。

这些 XML 文件来自我通过 SimpleXML 创建并在本地缓存的几个 API 提要。

```
function stripAndSaveFile($xml) {
    $game = $xml->game;
    $output = new SimpleXMLElement("<justbetlinesfeed></justbetlinesfeed>");
    for ($i = 0; $i < 16; $i++) {
        //Get the date of each game. 
        $spreadpoints = $game[$i]->line->spread->attributes()->points;
        $spreadteam1 = $game[$i]->line->spread->attributes()->team1adj;
        $spreadteam2 = $game[$i]->line->spread->attributes()->team2adj;
        $rotnum = $game[$i]->attributes()->team1rotnum;
        $insert = $output->addChild("game");
        $insert->addAttribute("rotnum", "$rotnum");
        $insert->addChild("spreadpoints", "$spreadpoints");
        $insert->addChild("spreadteam1", "$spreadteam1");
        $insert->addChild("spreadteam2", "$spreadteam2");

    }
    file_put_contents($this->filePath, $output->asXML());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:56:13.127

这可能不是您想要的，但也许它会给您一个想法。这需要一个 XSLT 2.0 处理器，例如[Saxon](http://saxon.sourceforge.net/)。

它所做的是遍历集合（用于测试的本地目录）中的所有 XML 文件，并按`rotnum`根元素中的属性对它们进行分组。它有效地将根目录下的所有子项合并到一个文件中。该文件在单独的目录中创建，名称基于`rotnum`值。

XSLT 的输入可以是任何 XML。我使用样式表本身作为输入。

这是示例...

## “input_dir”目录中的 XML 文件：

**文件1.xml**

```
<game rotnum="241">
  <gamedate> 123 </gamedate>
  <team1> Giants </team1>
  <team2> Eagles </team2>
</game> 
```

**文件2.xml**

```
<game rotnum="241">
  <line> 4 </line>
  <points> 200 </points>
</game> 
```

## XSLT 2.0（用 Saxon-HE 9.4 测试）

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:variable name="vCollection" select="collection('file:///C:/some_absolute_uri/input_dir?input=*.xml')"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="/">
        <xsl:for-each-group select="$vCollection/*" group-by="@rotnum">
            <xsl:result-document href="file:///C:/some_absolute_uri/output_dir/{@rotnum}.xml">
                <xsl:copy>
                    <xsl:apply-templates select="@*"/>
                    <xsl:apply-templates select="$vCollection/*[@rotnum=current-grouping-key()]/*"/>                    
                </xsl:copy>
            </xsl:result-document>
        </xsl:for-each-group>
    </xsl:template>

</xsl:stylesheet> 
```

## “output_dir”目录中的 XML 文件：

**241.xml**

```
<game rotnum="241">
   <gamedate> 123 </gamedate>
   <team1> Giants </team1>
   <team2> Eagles </team2>
   <line> 4 </line>
   <points> 200 </points>
</game> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:30:51.807

在这种情况下，我更喜欢使用[DomDocument 之类的东西](http://php.net/manual/en/class.domdocument.php)

阅读文档：

```
$dom = new DomDocument();
$dom->load('filename.xml');
$games = $menu->getElementsByTagName("game");
foreach ($games as $game) {
    if($game->hasChildNodes)
    { 
         //Set element
         $element->nodeValue;
         //Store to array or similar
    } 
```

# exception - Spring MVC：全局异常处理程序

> ID：11771897
> 
> 赞同：1
> 
> 时间：2012-08-02T06:06:12.937
> 
> 标签：exception, spring-mvc, exception-handling

我想实现某种全局事件处理程序，但仅用于错误记录目的并且没有任何重定向。

例如，控制器的方法失败，我的事件处理程序将捕获异常（任何类型或特定类型的异常）并执行一些逻辑，仅此而已。之后，控制器的逻辑将继续。我检查了[ExceptionHandler](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html)但它需要返回模型/映射或处理响应，所以它对我没有帮助。

是否可以？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T11:50:59.507

你有没有考虑过 AOP 来满足你的需求？使用 - 投掷建议后。

# c#-4.0 - “‘StartsWith’不是‘Edm.String’类型的成员？

> ID：11771900
> 
> 赞同：0
> 
> 时间：2012-08-02T06:06:25.503
> 
> 标签：c#-4.0, entity-framework-4

使用 EF 4.1 并且尝试此操作时出现错误：

```
db.Golfers.Where("it.Name.StartsWith('tiger')") 
```

错误是：

```
"'StartsWith' is not a member of type 'Edm.String' in the currently loaded schemas. Near simple identifier, line 6, column 9."  string 
```

什么？？问题是我有一个字符串作为输入，如何转换为 lambda 表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:08:41.667

你不能那样做。它应该是：

```
var result = db.Golfers.Where(it=>it.Name.StartsWith('tiger')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:55:46.550

在 ESQL 中，您可以简单地使用：

```
db.Golfers.Where("it.Name LIKE 'tiger%'"); 
```

但这可能也会起作用：

```
db.Golfers.Where("StartWith(it.Name, 'tiger')"); 
```

# asp.net - 使用 CustomValidationScript 的 CustomValidator

> ID：11771902
> 
> 赞同：0
> 
> 时间：2012-08-02T06:06:37.863
> 
> 标签：asp.net, validation

我有一个带有调用客户端验证脚本的 CustomValidation 控件的 ASP.NET 文本框。

```
<asp:TextBox ID="txtSubsContrRbtAmt" runat="server" 
                        CssClass="textEntry NumericInput" Width="150px"
                        Text="" onKeyUp="SumValues();" MaxLength="16"></asp:TextBox>

<asp:CustomValidator ID="cvalSubsContrRbtAmt" runat="server" ClientValidationFunction="ValidatetxtSubsContrRbtAmt"
                        ControlToValidate="txtSubsContrRbtAmt" CssClass="errlable" ErrorMessage="Max Decimals = 7"
                        SetFocusOnError="True" ValidationGroup="CarbsAdd"></asp:CustomValidator> 
```

这是客户端脚本：

```
function ValidatetxtSubsContrRbtAmt(source, args) {

    var txtSubsContrRbtAmt = document.getElementById("<%=txtSubsContrRbtAmt.ClientID%>");
    var amount = txtSubsContrRbtAmt.value;

    args.IsValid = ValidAmount(amount);

    if (!args.IsValid)
        txtSubsContrRbtAmt.focus();
}

function ValidAmount(amount) {

    if (isNumber(amount)) {
        return (RoundToXDecimalPlaces(amount, 7) == amount);
    }
    else {
        return true;
    } 
```

在 ValidatetxtSubsContrRbtAmt 函数中，“source”参数是 CustomValidator。该控件具有属性“ControlToValidate”。如果可以的话，我可以以编程方式从该控件中检索值，而不必具有单独的函数来验证每个文本框。

jQuery 在这一点上对我来说太多了，我正在寻找一种简单的旧 Javascript 方法，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:30:30.660

您不必获取文本框。您可以从 args.Value 中获取值。如果您设置了焦点，则应自动设置焦点`SetFocusOnError="true"`。

```
function ValidatetxtSubsContrRbtAmt(source, args) {

    var amount = args.Value;

    args.IsValid = ValidAmount(amount);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T20:48:39.103

您应该能够从源对象访问控件。

```
function ValidatetxtSubsContrRbtAmt(source, args) {
    var controlToFocusOn = source.ControlToValidate; 
```

您可以使用“document.getElementByID()”将其切换出来以获取 ID 或您需要的任何属性

```
 var controlId = document.getElementById(source.ControlToValidate).id;
} 
```

现在您可以使用控件集中精力或做您需要的事情。我今天早些时候必须从 CustomValidator 访问实际的 ControlToValidate。

# android - 调用特定的 textview 意味着检索数据不会显示在模拟器上

> ID：11771903
> 
> 赞同：0
> 
> 时间：2012-08-02T06:06:44.000
> 
> 标签：android, web-services, soap, android-emulator

我试图开发从肥皂网络服务中检索计数值并将它们显示到 android 模拟器。在这里，我提到了特定的 textview 意味着它不会显示在我的模拟器上。为什么这不在我的模拟器上显示。请帮我。我必须改变哪条线。这是我的安卓代码：

```
public class RetailerActivity extends Activity {
private static final String SOAP_ACTION = "http://xcart.com/data";
private static final String METHOD_NAME = "data";
private static final String NAMESPACE = "http://xcart.com";
private static final String URL = "http://192.168.1.168:8085/XcartLogin/services/RetailerWs?wsdl";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.retrieve);
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.setOutputSoapObject(request);

    HttpTransportSE ht = new HttpTransportSE(URL);
    try {
        ht.call(SOAP_ACTION, envelope);
        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
        SoapPrimitive s = response;
        String str = s.toString();
        String resultArr[] = str.split("&");//Result string will split & store in an array
        TextView tv = (TextView) findViewById(R.id.textView1);
       // TextView tv = new TextView(this);

        for(int i = 0; i<resultArr.length;i++){
        tv.append(resultArr[i]+"\n\n");
       }
        setContentView(tv);

    } catch (Exception e) {
        e.printStackTrace();
    }
    }
   } 
```

在这里我必须写 TextView tv = new TextView(this); line 表示显示输出。但我必须输入 dis line TextView tv = (TextView) findViewById(R.id.textView1); 表示输出未显示在我的模拟器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:12:22.730

删除此行 `setContentView(tv);`。我似乎不认为`setContentView()`在这里使用两个是正确的。

因为您已经 `setContentView(R.layout.retrieve);`首先调用了 并且您已经在此处初始化了 TextView，

```
 TextView tv = (TextView) findViewById(R.id.textView1); 
```

所以，

```
tv.append(resultArr[i]+"\n\n"); 
```

单独应该工作。无需重新设置`tv`。

**编辑 1**

您在 xml 中的 TextView 应该是这样的。

```
 <TextView android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/> 
```

删除其他属性，。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:14:00.840

我不知道有什么`append`作用。

你可以写

```
 String s = ""
    for(int i = 0; i<resultArr.length;i++) {
            s += resultArr[i]+"\n\n";
    }
    tv.setText(s) 
```

更好的使用`StringBuilder`，但以上应该工作

# c# - 在 ASP.NET MVC 中修改样式表属性

> ID：11771904
> 
> 赞同：0
> 
> 时间：2012-08-02T06:06:44.680
> 
> 标签：c#, css, asp.net-mvc

我在 MVC 中的 OnResultExecuting(ResultExecutingContext filterContext) 方法中预加载样式表，这只是为了确保在加载页面时调用 actionResult 之前完成此操作，并且工作正常，我现在的问题是我想修改样式在名为 logo 的类中的工作表背景图像属性和构建标记之前（下面的代码）并添加到 DOM 的头部部分，我想知道是否没有办法读取（StreamReader？/StreamWriter？） css 文件并在构建标签或类似的东西之前对其进行修改并保存它，顺便说一句，我从服务器获取 css 文件。

```
foreach (string file in filepath)
{
    if (Path.GetExtension(file).ToLower() == ".css")
    {
        TagBuilder link = new TagBuilder("link");
        link.Attributes["rel"] = "stylesheet";
        link.Attributes["type"] = "text/css";
        link.Attributes["href"] = urlHelper.Content(
            string.Format("~/Content/themes/Theme{0}/{1}",
                setting.ThemeId, Path.GetFileName(file)));

        resources.Add(MvcHtmlString.Create(link.ToString(TagRenderMode.SelfClosing)));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:00:03.597

您可以在此样式表之后加载另一个样式表并以这种方式修改类样式，事实上这正是我为我的白标解决方案执行此操作的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T20:46:04.620

你不能使用 LESS 来动态创建你的 CSS 吗？

[http://www.dotlesscss.org/](http://www.dotlesscss.org/)

[http://karlmendes.com/2010/07/using-less-css-for-net-with-asp-net-mvc-2/](http://karlmendes.com/2010/07/using-less-css-for-net-with-asp-net-mvc-2/)

也许它会让你的事情变得更容易......

# jquery - jquery开和关问题

> ID：11771914
> 
> 赞同：0
> 
> 时间：2012-08-02T06:08:02.290
> 
> 标签：jquery

我有一个按钮，它是动态生成的。最初，当您单击它时，它具有“活动”类，该类更改为“非活动”。当您再次单击时，它应该变为活动状态。

所以我使用以下代码分配了点击事件。

```
$(".active").on("click",function(){
$(this).removeClass('active').addClass('inactive');
});

$(".inactive").on("click",function(){
$(this).removeClass('inactive').addClass('active');
}); 
```

问题是每次调用第一个函数时。当我使用 live 而不是 on 它工作正常。我怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:16:48.467

您不能简单地更改`.live`为`.on`,

`$(selector).live(event_type, function(){});`

和

`$(document).on(event_type, selector, function(){});`

```
$("body").on("click", '.active', function(){
  $(this).removeClass('active').addClass('inactive');
});

$("body").on("click", '.inactive', function(){
  $(this).removeClass('inactive').addClass('active');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:21:36.603

一种需要对 HTML 进行细微更改的选项是：

```
$(function(){    
    $(".toggle").on("click", function(){
        $(this).toggleClass("active").toggleClass("inactive");
    });    
}); 
```

​这将影响分配给它们的类的所有元素`toggle`，并假设它最初将具有`inactive`或`active`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:22:43.043

试试jquery的[`toggleClass`](http://api.jquery.com/toggleClass/)方法。

我在[这里](http://jsfiddle.net/RsYTM/)写了一个演示，演示了为链接实现相同功能的两种方法。你可以对按钮做同样的事情。

# java - 测试拖放文件到应用程序

> ID：11771918
> 
> 赞同：18
> 
> 时间：2012-08-02T06:08:17.720
> 
> 标签：java, swing, junit, drag-and-drop, junit4

我正在寻找一种方法来从单元测试中将文件/多个文件拖放到我的应用程序中。例如，在 Windows 资源管理器中选择一些文件，将它们拖放到我的应用程序中。

我能够测试我的应用程序中两个组件之间的拖放行为（见下文 - 如果您知道更好的方法，请随时指出），但是当数据必须来自时，我不知道如何做同样的事情在我的应用程序之外。

`Transferable`当我手动进行拖放操作时，我曾想过使用调试器来检查“文件” ，但必须有更好的方法，然后硬编码一个完整的`Transferable`.

组件之间的拖放测试示例

```
import org.junit.Test;

import javax.swing.Action;
import javax.swing.JTextField;
import javax.swing.TransferHandler;
import java.awt.event.ActionEvent;

import static org.junit.Assert.assertEquals;

public class DragAndDropTest {
  @Test
  public void dragAndDropBetweenTwoTextFields() {
    JTextField firstField = new JTextField();
    JTextField secondField = new JTextField();
    String testText = "Test text";
    firstField.setText( testText );
    firstField.selectAll();
    Action copyAction = TransferHandler.getCopyAction();
    copyAction.actionPerformed( new ActionEvent( firstField, ActionEvent.ACTION_PERFORMED, "Copy" ) );
    Action pasteAction = TransferHandler.getPasteAction();
    pasteAction.actionPerformed( new ActionEvent( secondField, ActionEvent.ACTION_PERFORMED, "Paste" ) );
    assertEquals( "Text is not copied", testText, secondField.getText() );
  }
} 
```

**编辑**

根据这个问题下的评论，我通过提供硬编码的`Transferable`. 该代码还包含一个小主程序，它只是创建一个可以放置文件的空框架。然后将在控制台上打印路径。

在我的 PC 上，文件的拖放不使用`javaFileListFlavor`URI 风格。以前的经验（参见[这个问题](https://stackoverflow.com/questions/8700073/drag-and-drop-differences-between-jdk1-6-and-jdk1-7)）已经告诉我，`Transferable`当从 Java 应用程序外部拖动某些东西时，组件接收到的内容可能会有细微的不同。

所以要完全清楚：我想测试我的代码中从接收到的信息中提取信息的部分`Transferable`。“信息处理”代码（例如，当应用程序接收到文件时会发生什么）可以很容易地进行测试，而无需打扰 D&D。`Transferable`我只需要确保从`Transferable`.

```
import org.junit.Test;

import javax.swing.Action;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.TransferHandler;
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.datatransfer.Clipboard;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.event.ActionEvent;
import java.io.File;
import java.io.IOException;
import java.util.List;

import static org.junit.Assert.assertEquals;

public class DragAndDropTest {
  private static DataFlavor URI_LIST_FLAVOR = null;
  static {
    try {
      URI_LIST_FLAVOR = new DataFlavor( "text/uri-list;class=java.lang.String" );
    }
    catch ( ClassNotFoundException ignore ) {
    }
  }

  @Test
  public void testFileDragAndDrop() throws IOException, UnsupportedFlavorException {
    JComponent testComponent = new JPanel();
    TestingTransferHandler transferHandler = new TestingTransferHandler();
    testComponent.setTransferHandler( transferHandler );
    Clipboard clipBoard = new JLabel(  ).getToolkit().getSystemClipboard();
    Transferable transferable = new Transferable() {
      @Override
      public DataFlavor[] getTransferDataFlavors() {
        return new DataFlavor[]{URI_LIST_FLAVOR};
      }

      @Override
      public boolean isDataFlavorSupported( DataFlavor flavor ) {
        return flavor == URI_LIST_FLAVOR;
      }

      @Override
      public Object getTransferData( DataFlavor flavor ) throws UnsupportedFlavorException, IOException {
        if ( flavor == URI_LIST_FLAVOR ) {
          return new String( "file:///home/robins/Desktop/swingx-1.0-javadoc.jar" );
        }
        throw new UnsupportedFlavorException( flavor );
      }
    };
    clipBoard.setContents( transferable, null );
    Action pasteAction = TransferHandler.getPasteAction();
    pasteAction.actionPerformed( new ActionEvent( testComponent, ActionEvent.ACTION_PERFORMED, "Paste" ) );
    assertEquals( transferable.getTransferData( URI_LIST_FLAVOR ), transferHandler.transferable.getTransferData( URI_LIST_FLAVOR ) );
  }

  private static class TestingTransferHandler extends TransferHandler{
    public Transferable transferable;
    @Override
    public boolean canImport( TransferSupport support ) {
      return true;
    }
    @Override
    public boolean importData( TransferSupport support ) {
      transferable = support.getTransferable();
      try{
        if ( transferable.isDataFlavorSupported( DataFlavor.javaFileListFlavor ) ) {
          System.out.println("File list flavor");
          List<File> fileList = ( List<File> ) transferable.getTransferData( DataFlavor.javaFileListFlavor );
          System.out.println( "fileList = " + fileList );
        }
        if ( transferable.isDataFlavorSupported( URI_LIST_FLAVOR )){
          System.out.println("URI list flavor");
          String uriList = ( String ) transferable.getTransferData( URI_LIST_FLAVOR );
          System.out.println( "uriList = " + uriList );
        }
        return true;
      } catch ( UnsupportedFlavorException e ) {
        return false;
      } catch ( IOException e ) {
        return false;
      }
    }
  }

  public static void main( String[] args ) {
    EventQueue.invokeLater( new Runnable() {
      @Override
      public void run() {
        JFrame frame = new JFrame( "TestFrame" );
        JPanel contentPane = new JPanel( new BorderLayout(  ) );
        contentPane.setTransferHandler( new TestingTransferHandler() );
        frame.setContentPane( contentPane );
        frame.setSize( 200,200 );
        frame.setVisible( true );
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
      }
    } );
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T08:05:07.017

单元测试 Swing GUI 总是很痛苦，更不用说 D&D。不过，我相信这是可以做到的。

有两点需要注意：

1.  目前，您根本不是在测试 D&D，而是在复制粘贴。这也是数据传输的一种形式，但是使用`copyAction`和`pasteAction`导致你真的没有经过任何一个D&D的步骤

2.  您提到您想检查接收文件的部分，因此您创建了一个自定义 Transferable，但我想争辩说您正在尝试测试错误的东西。处理数据的部分可以实现为处理`Transferable`包含数据的包私有方法，并通过简单的单元测试进行测试（不涉及 Swing 组件）

如果您关心不同操作系统之间的 D&D 差异，我相信您应该测试的是 D&D 过程本身是否正常工作，即：

1.  请求具有数据的组件 (the `DragSource`) 提供数据，并且它提供它
2.  请求数据的组件 (the `DropTarget`) 接收数据并处理它
3.  或者，您可能想要检查是否允许或禁止不同的条件（例如复制与移动等）

您可以使用`FEST`'s`ComponentDragAndDrop`类来测试它（请参阅[此处](http://docs.codehaus.org/display/FEST/Simulating+Drag+%27n+Drop)）。

如果您想编写自己的实现（为什么要这样做？！），您可以：用模拟（或更准确地说是间谍）
替换源组件和目标组件`TransferHandler`，除了调用真实方法之外，将使您能够验证使用预期数据调用预期方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:29:02.040

也许 AutoIt 脚本可以提供帮助：[请参阅此处](http://www.autoitscript.com/site/autoit/)

您可以创建一个 windows 脚本来模拟必要的鼠标或按键事件。然后从你的测试中运行这个脚本，看看会发生什么。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T09:50:52.500

如果您不限于单元测试，您可以尝试编写 GUI 测试。Swing 有几个框架，请参阅此线程 - [Swing UI 的单元测试框架](https://stackoverflow.com/questions/2575837/unit-testing-framework-for-a-swing-ui)

几年前我一直在使用jemmy，没关系，如果测试很简单的话

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T20:41:33.783

你看过[机器人](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)课吗？测试人类交互非常酷。我不知道你是否可以拖放文件.. 但你可以这样做是有道理的！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-11T23:01:06.880

您可以使用[Swinput](http://savannah.nongnu.org/projects/swinput/)在 Linux 上模拟输入事件。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-07T21:10:24.193

尝试使用模拟。我正在使用 [Mockito](http://code.google.com/p/mockito/)框架。

# python - 将大量文件与大量正则表达式字符串匹配时的最佳实践

> ID：11771929
> 
> 赞同：0
> 
> 时间：2012-08-02T06:09:29.127
> 
> 标签：python

我有一个包含数千个文件的目录。我想根据文件名将它们分类到目录中，但是许多文件名非常相似。

我的想法是我将不得不编写一堆正则表达式字符串，然后进行某种循环。这是我的问题：

这两个选项中的一个比另一个更优化吗？我是否遍历所有文件，并针对每个文件检查它与我的正则表达式，跟踪有多少匹配？还是我做相反的事情并遍历正则表达式并触摸每个文件？

我不得不用 python 来做，因为那是我最强大的语言，但我对其他想法持开放态度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:14:15.197

这是我用于我的程序的一些代码，我已经为您的目的进行了修改，它获取一个目录（sort_dir）去那里的每个文件，并根据文件名创建目录，然后将文件移动到这些目录中。由于您没有提供任何关于您希望在何处或如何对文件进行排序的信息，因此您必须在我提到的地方添加该部分：

```
def sort_files(sort_dir):

    for f in os.listdir(sort_dir):
        if not os.path.isfile(os.path.join(sort_dir, f)):
            continue

        # this is the folder names to be created, what do you want them to be?       
        destinationPath = os.path.join(sort_dir,f) #right now its just the filename...

        if not os.path.exists(destinationPath):
            os.mkdir(destinationPath)

        if os.path.exists(os.path.join(destinationPath,f)):
            at = True
            while at:
                try:
                    shutil.move(os.path.join(sort_dir,f), \
                                os.path.join(destinationPath,f))
                    at = False
                except:
                    continue
        else:
            shutil.move(os.path.join(sort_dir,f), destinationPath) 
```

# java - 如何控制使用 ClassLoader 加载的画布？

> ID：11771932
> 
> 赞同：0
> 
> 时间：2012-08-02T06:09:52.233
> 
> 标签：java, swing, user-interface, applet, classloader

假设我使用 UrlClassLoader 从网站加载小程序并将其作为组件附加到框架。我怎样才能控制画布，以便我可以自己绘制呢？据我所知，关于此的信息并不多。有人提到了一些关于 XBOOTING 的东西，但我不知道那是什么，我找不到任何关于它的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T22:57:47.343

问题是“每个小程序都不同”。 例如，[该小程序](http://mainline.brynmawr.edu/Courses/cs110/spring2002/Project1.html)`Canvas`没有在其中，而是直接绘制到小程序表面。只要您有一个小程序实例，您就可以直接绘制到它，但是当用户选择一个按钮时它会被覆盖。

```
import java.applet.Applet;
import java.awt.*;
import java.net.*;

import javax.swing.JOptionPane;
import javax.swing.SwingUtilities;

public class GrabThatCanvas {

    GrabThatCanvas() {
        try {
            String string = "http://mainline.brynmawr.edu/Courses/cs110/spring2002/Applets/Smiley/";
            URL[] urls = {
                    new URL(string)
            };
            URLClassLoader urlcl = new URLClassLoader(urls);
            Class<?> clss = urlcl.loadClass("Smiley");
            Object o = clss.newInstance();
            Applet applet = (Applet)o;
            applet.init();
            applet.start();
            applet.setPreferredSize(new Dimension(200,200));

            Canvas canvas = findFirstCanvas(applet);
            if (canvas!=null) {
                System.out.println("We have the Canvas!");
            } else {
                System.out.println("No Canvas found!");
            }

            JOptionPane.showMessageDialog(null, applet);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    /* Very naive implementation that assumes the canvas is added
     * directly to the applet. */
    public Canvas findFirstCanvas(Container parent) {
        Canvas canvas = null;
        Component[] components = parent.getComponents();
        for (Component c : components) {
            System.out.println(c);
            if (c instanceof Canvas) {
                canvas = (Canvas)c;
                break;
            }
        }
        return canvas;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new GrabThatCanvas();
            }
        });
    }
} 
```

## 输出

```
java.awt.Button[button0,0,0,0x0,invalid,label=Smile]
java.awt.Button[button1,0,0,0x0,invalid,label=Sad]
No Canvas found! 
```

当然，您可以将小程序放在 Swing GUI 中，考虑到 Swing 和 AWT 的奇怪组合，并使用分层窗格在整个小程序的“顶部”绘制。但这带来了新的问题。

# macos - launchctl git：找不到命令

> ID：11771933
> 
> 赞同：2
> 
> 时间：2012-08-02T06:09:53.960
> 
> 标签：macos, git, command, launchd

好的，所以我正在尝试使用 launchctl 在我的 github 帐户上设置自动提交。为此，我创建了一个执行 git 命令的 sh 文件和一个每 2 分钟执行一次 sh 的 plist 文件，并且 plist 文件失败。在 plist 之外运行时 sh 运行良好

launchctl 日志是：

```
Aug  2 00:02:24 Caseys-iMac com.github.gitSync[9227]: /usr/bin/gitsync.sh: line 4: git: command not found
Aug  2 00:02:24 Caseys-iMac com.github.gitSync[9227]: /usr/bin/gitsync.sh: line 5: git: command not found
Aug  2 00:02:24 Caseys-iMac com.github.gitSync[9227]: /usr/bin/gitsync.sh: line 6: git: command not found
Aug  2 00:02:24 Caseys-iMac com.apple.launchd.peruser.501[123] (com.github.gitSync[9227]): Exited with code: 127 
```

plist文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN"

"http://www.apple.com/DTDs/PropertyList-1.0.dtd">

<plist version="1.0">
  <dict>
    <key>Label</key>
    <string>com.github.GitSync</string>
    <key>Program</key>
    <string>/usr/bin/gitsync.sh</string>
    <key>ProgramArguments</key>
    <array>
    <string>gitsync.sh</string>
    </array>
    <key>RunAtLoad</key>
    <true />
    <key>StartInterval</key>
    <integer>120</integer>
  </dict>
</plist> 
```

.sh 文件

```
#!/bin/bash
DATE=`date`
cd /Applications/Minecraft\ Server/
git pull origin master
git commit -a -m "Auto Sync - $DATE"
git push origin master 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:15:43.820

您的路径上没有 git。将您拥有 git exe 的路径添加到路径环境变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:52:42.187

提及的[手册页：`launchd.plist`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html#//apple_ref/doc/man/5/launchd.plist)

```
UserName <string> 
```

> 此可选键指定运行作业的用户。此密钥仅在`launchd`以 root 身份运行时适用。

所以：

*   您的用户可能`git`在他的路径中（因为您提到“`sh`在外部运行时运行良好`plist`”）
*   但如果`launchd`以 root 身份运行，root 路径中可能没有 git。

如果可能，最好在您的`plist`文件中指定运行作业的用户。

# javascript - jquery --以循环顺序更改背景颜色

> ID：11771934
> 
> 赞同：-1
> 
> 时间：2012-08-02T06:09:57.313
> 
> 标签：javascript, jquery, html, css, jquery-ui

我有一个背景颜色为 red 的 div 。单击此 div 背景颜色应按循环顺序更改 .. 红色、绿色和灰色 .. 循环应继续。

我不想使用任何 jquery 插件来实现这一点

请参考这个[jsfiddle](http://jsfiddle.net/HkHz3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:19:33.847

见[演示](http://jsfiddle.net/eKqBy/)

```
<div class="myDiv"></div>​

div {
  background: #3f3;
  height: 40px;
  width: 40px;    
}

var cur = 0;
var colors = ['#3f3', '#f33', '#33f', '#ff3'];

$('.myDiv').click(function() {
    cur = (cur + 1) % colors.length;
    $(this).css('background', colors[cur]);
});   ​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T06:22:16.467

您可以使用`data`存储当前状态：

```
var classes = ['red', 'blue', 'green', 'yellow']

$('#box').click(function () {
    var box = $(this);
    var index = box.data('current-index') || 0;
    index++;
    if (index >= classes.length)
        index = 0;
    box.data('current-index', index);

    box.removeClass(classes.join(' '));
    box.addClass(classes[index]);
}); 
```

工作示例[http://jsfiddle.net/jD6XK/](http://jsfiddle.net/jD6XK/)

# java - 将事件添加到日历时设置事件的颜色

> ID：11771935
> 
> 赞同：1
> 
> 时间：2012-08-02T06:09:59.533
> 
> 标签：java, android, android-calendar

如何设置以[编程方式添加](http://developer.android.com/guide/topics/providers/calendar-provider.html#add-event)到 android 本机日历的事件的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:06:13.637

我认为没有办法设置特定事件android的颜色。

唯一的方法似乎是设置日历的颜色，而这只能从谷歌日历的网络界面完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:36:02.847

我认为您可能必须使用 googles [api java 客户端库](http://code.google.com/p/google-api-java-client/)而不是使用日历提供程序。

这样您就不会使用手机的android api，而是直接转到源（googles calendar api）。您将在线更新日历，这将再次自动更新手机日历。最大的问题是解决方案变得更加复杂，因为您不会只使用本机 android 库，但您可以通过这种方式做更多事情。此外，您还可以在 api 14 之前将您的功能应用于手机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:40:49.430

考虑到您正在使用 ICS 及更高版本。如果您作为同步适配器工作，您可以更改/为您的事件添加颜色

在这里阅读参考：http: [//developer.android.com/reference/android/provider/CalendarContract.Events.html](http://developer.android.com/reference/android/provider/CalendarContract.Events.html)

# python - 如何使用 python 从气球弹出窗口中读取文本？

> ID：11771936
> 
> 赞同：3
> 
> 时间：2012-08-02T06:10:07.473
> 
> 标签：python, bluetooth, balloon-tip

我正在使用蓝牙将一个大约 500MB 的大文件从一个系统传输到另一个系统。在此期间，我会看到一个气球弹出窗口，上面写着“蓝牙连接”，其中包含模式已更改为高速模式的文本。我想使用 python 在变量中获取此文本。关于如何从气球弹出窗口中读取文本的任何线索？？？

希望尽快得到答复。

问候辛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:42:11.533

我结合[here](http://www.go4expert.com/forums/showthread.php?t=10639)和[here](http://www.brunningonline.net/simon/blog/archives/000664.html)的帖子为您编写以下示例。

你需要 Python for Windows 扩展，你可以[在这里](http://sourceforge.net/projects/pywin32/)下载。

[您可以使用工具Spy++](http://mdb-blog.blogspot.co.at/2010/11/microsoft-spy-or-spyxx-for-download.html)获取气球提示的类名（函数 win32gui.FindWindow 需要它）。

```
import win32gui, win32con

def get_text(hwnd):
    buf_size = 1 + win32gui.SendMessage(hwnd, win32con.WM_GETTEXTLENGTH, 0, 0)
    buffer = win32gui.PyMakeBuffer(buf_size)
    win32gui.SendMessage(hwnd, win32con.WM_GETTEXT, buf_size, buffer)
    return buffer[:buf_size]

if __name__ == "__main__":
    hwnd = win32gui.FindWindow("tooltips_class32", 0)
    content_of_balloon_tip = get_text(hwnd)
    print content_of_balloon_tip 
```

# java - java BufferedReader 最大行数

> ID：11771937
> 
> 赞同：0
> 
> 时间：2012-08-02T06:10:19.547
> 
> 标签：java

```
BufferedReader in = new BufferedReader(new FileReader(file));
String line;

int i = 0;
while((line = in.readLine()) != null){
    if(line.contains("Time:") == true){
        System.out.println(line);
    }
    i++;
}
System.out.println(i);
in.close(); 
```

此代码读取**6213238**行的文件，但它只读取**1244178**。此类可以读取的行数是否有任何限制，或者是否与内存使用有关？以及如何使它工作

**编辑：**

我已经打印了最后 18 行，例如

```
while((line = in.readLine()) != null){
            if(line.contains("Time:") == true){
                System.out.println(line);
            }
            if(i > 1244160)
            {
                System.out.println(line);
            }
            i++;
        } 
```

它向我展示了文件的最后 18 行。我不得不说这很奇怪

**编辑** 问题是当我将**UTF-16**更改为**UTF-8**时文件编码问题，我从文件中接收所有行

# c# - 是否有任何理由在方法的第二行中使用“return”？

> ID：11771939
> 
> 赞同：3
> 
> 时间：2012-08-02T06:10:29.717
> 
> 标签：c#, c++

我有这段代码，我们可以用两种方式编写

**第一种方式**

```
void func(int val)
{
     if(val == 0)
          return;

     // Do something ...
} 
```

**第二种方式**

```
void func(int val)
{
     if(val != 0)
     {
          // Do something ...
     }          
} 
```

问题：

有什么理由使用第一种方式吗？使用第一种方式是否有任何优势（在 C++ 或 C# 中）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T06:13:26.130

使用第一种方法的主要原因是减少源文件中的嵌套。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T06:16:51.460

请参阅[反转“if”语句以减少嵌套](https://stackoverflow.com/questions/268132/invert-if-statement-to-reduce-nesting)。

基本上，当'// Do something ...'是很多代码时，这变得很重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T06:24:43.847

想象一下，有不止一个条件，看看这个：

```
if (...)
{
  if (...)
  {
     if (...)
     {
        if (...)
        {
           if (...)
           {
             ...
           }
        }
     }
  }
} 
```

和这个：

```
if (!...)
  return;

if (!...)
  return;

if (!...)
  return;

if (!...)
  return;

if (!...)
 ... 
```

我认为，第二个更具可读性和方便性。
如果有一个或两个条件，差异是微不足道的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T06:21:15.063

是的，有前面的答案中提到的优点。**由于它是在 C++ 中标记的，因此在使用First Way**时应注意释放分配的内存。

例如，可能会有这样的错误代码

```
void func(int val)
{
     Foo *obj = new Foo();
     if(val == 0)
          return;

     // Do something ...
    delete obj;        // Possible Memory leak
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T06:12:24.443

没有区别 - 是否使用其中一种完全取决于您对其中一种的主观偏好，受可读性、可理解性等影响

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T06:18:46.990

*   如果您想在定义的值上快速退出，那么 return before 应该会更好，
*   但如果这种情况很少见，那么直接处理好的数据可能会更好。

根据您使用的语言，对性能的影响应该更大或微不足道。

如果它是为了清楚起见，那么在条件之后调用一些函数应该是好的。有些部分管理不同的案例，有些部分处理它。

应以这种方式提高可维护性和可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T06:14:03.197

如果您以第一种方式调用，那么它不会运行其余的东西。因为它直接返回。但是如果你使用第二种方式，里面的代码将会运行。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-02T06:14:28.390

void 方法并不总是需要 return 语句。但是您可以在战略位置使用“return”以避免在遇到退出条件时执行不必要的语句。

# php - 带有多个 AND 的 SELECT 查询

> ID：11771943
> 
> 赞同：0
> 
> 时间：2012-08-02T06:10:50.797
> 
> 标签：php

再会。我想检查我的数据库是否有一行包含我分配的三个变量：

我使用了这个脚本，但它没有给出我想要的结果。

```
SELECT * FROM `table_name`
WHERE `field1`='$var1'
AND `field2`='$var2'
AND `field3`='$var3' 
```

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:22:15.383

查询没有问题，但通过使用检查表是否有问题

```
$query="SELECT * FROM `table_name`
WHERE `field1`='$var1'
AND `field2`='$var2'
AND `field3`='$var3'";
mysql_query($query) or die(mysql_error()); 
```

# ios - 将 GraphicsServices 私有框架添加到 IOS

> ID：11771948
> 
> 赞同：2
> 
> 时间：2012-08-02T06:11:54.083
> 
> 标签：ios, iphone, jailbreak, iphone-privateapi

实际上我需要以编程方式锁定我的iPhone，我在互联网上搜索过，也有一些想法，即使用`GraphicsServices.framework`和`GSEventLockDevices()`方法..事情是这样的：如何在我的项目中添加一个私有框架？我知道这是越狱，但没问题。

谁能帮我向 Xcode 添加一个私有框架并以编程方式锁定设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:16:41.150

查看私有框架头文件：[https ://github.com/rpetrich/iphoneheaders](https://github.com/rpetrich/iphoneheaders)

![在此处输入图像描述](../Images/5030d9b60e8fdf8723d906c3de794fac.png)

首先复制一个 Private Frameworks Your Project。并添加一个`#import "GSEvent.h"`

GSEvent Header 已经在您的项目中。所以，作为一个相对路径必须是

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T07:43:32.350

如果你错过了导入某些框架方式，你可能会得到这样的错误。当我遇到这样的问题时，我已经按照这种方式进行了..

1）在项目导航窗口中选择项目，右侧将显示项目摘要

2) 选择第 4 个选项卡构建阶段

3) 选择 Link binary with library 选项

4）添加您正在获取的框架

5）将框架从主文件夹移动到框架文件夹

6）再次构建它，错误就消失了。

希望这可以帮助 ：）

# html - .net MVC 3.0 中的 HTML 页面打印、PDF 和复制到剪贴板

> ID：11771956
> 
> 赞同：0
> 
> 时间：2012-08-02T06:13:13.243
> 
> 标签：html, asp.net-mvc-3, pdf, printing, clipboard

我正在开发一个 .Net MVC 3.0 Web 应用程序。有一部分我必须像这样显示发票详细信息。![在此处输入图像描述](../Images/3bdbffdcb8318e0b098b8fca35ecfbb7.png)

在右上角，我需要提供打印、PDF 和复制到剪贴板功能。

如何添加具有上述功能的这三个按钮。请帮我......

提前致谢.....！！！

注意：（我后来添加了这部分）。有一整页。但是这个预览发票只是被 div 标签包裹的页面的一部分。我不想打印整页。我只想为该发票 div 标签提供三个按钮。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:17:51.697

pdf = 简单地链接到 PDF 的 URL（或生成 PDF 的 URL）

print = 你在打印什么？PDF？如果是这样，这是多余的，因为一个人只需要单击 PDF 并可以从那里打印。是打印网页吗？同样，多余的，因为网络浏览器已经具有打印功能。

复制到剪贴板 = 你要复制到剪贴板什么？目前，这只能通过 Flash 完成，而且很可能在未来根本无法做到。这个问题的答案列出了一些选项：[如何在 JavaScript 中复制到剪贴板？](https://stackoverflow.com/questions/400212/how-to-copy-to-the-clipboard-in-javascript)

最重要的是，您提供的图像似乎是由不了解网页工作原理的 IA 或 UX 人员创建的线框。这并不罕见，但实际上这是一个用户体验问题，而不是一个开发问题。这个问题需要首先由 UX 团队解决。

更新基于问题的更新：

关于只想处理特定 div 的内容，上面的 PDF 和 COPY TO CLIPBOARD 注释仍然有效。

改变的是 PRINT 选项。这可能会变得混乱。您可以尝试通过 JS 换出 CSS 以仅显示您要打印的部分，然后通过 JS 触发打印对话框，但这会有些混乱。我可能会考虑将 PRINT 图标设为“PRINT FRIENDLY”图标。单击该更新 CSS 以仅显示您要打印的内容。然后让用户在浏览器中使用 PRINT 功能，或者您可以尝试用另一位 JS 触发打印对话（尽管我不确定浏览器在哪里支持您直接从 JS 打印）。

# python - Python textwarp 每行和段落

> ID：11771967
> 
> 赞同：0
> 
> 时间：2012-08-02T06:14:10.607
> 
> 标签：python

我需要对超过 80 个字符的每一行进行文本换行，并将长段落分成 80 个字符的块。每行和段落的末尾都有一个 \n。

```
This is the first line of text with more than eighty characters in this sentence.**\n**  
**\n**  
This line of text is less than eighty characters.**\n**  
**\n**  
This is the first sentence of the first paragraph. This is the second sentence of the first paragraph. This is the third sentence of the first paragraph. This is the fourth sentence of the first paragraph. This is the fifth sentence of the first paragraph.**\n**  
**\n**  
This is the first sentence of the second paragraph. This is the second sentence of the second paragraph. This is the third sentence of the second paragraph. This is the fourth sentence of the second paragraph.**\n** 
```

我需要输出如下所示：

```
This is the very first line of text with more than eighty characters in this **\n**  
sentence.**\n**  
**\n**  
This line of text is less than eighty characters.**\n**  
**\n**  
This is the first sentence of the first paragraph. This is the second sentence **\n**  
of the first paragraph. This is the third sentence of the first paragraph. This **\n**  
is the fourth sentence of the first paragraph. This is the fifth sentence of the **\n**  
first paragraph.**\n**  
**\n**  
This is the first sentence of the second paragraph. This is the second sentence **\n**  
of the second paragraph. This is the third sentence of the second paragraph. This **\n**  
is the fourth sentence of the second paragraph.**\n** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T06:32:13.933

```
>>> import textwrap
>>> help(textwrap) 
```

# hibernate - Spring Blazeds with Hibernate Session-In-View 模式

> ID：11771968
> 
> 赞同：0
> 
> 时间：2012-08-02T06:14:15.847
> 
> 标签：hibernate, session, serialization, blazeds

为了实现 session-in-view Hibernate 模式，我像这样使用了我的自定义 ServletFilter：

```
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    try {
        // Starting a database transaction
        sessionFactory.getCurrentSession().beginTransaction();
        // Continue the request 
        chain.doFilter(request, response);
        // Committing the database transaction
        sessionFactory.getCurrentSession().getTransaction().commit();
    } catch (StaleObjectStateException se) {
        // Some codes here
    }
} 
```

处理请求后似乎将提交事务。但是当我们使用 Spring BlazeDS Integration 对 Flex 的输出进行序列化时，出现了一个问题：

BlazeDS 在提交事务之前使用惰性获取序列化结果对象及其所有子对象（在 chain.doFilter 行）。如此多的查询淹没了数据库以获取对象，有时它永远不会完成。

我该如何解决这个问题？有任何配置来限制 BlazeDS 中的序列化深度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:17:07.643

不是对您的问题的直接回答，但您可以看看[GraniteDS](http://www.graniteds.org/confluence/pages/viewpage.action?pageId=229378)：它具有完整的延迟加载支持（请参阅[此处](http://www.graniteds.org/public/docs/2.3.2/docs/reference/en-US/html/graniteds.remoting.html#remoting.jpa)和[此处](http://www.graniteds.org/public/docs/2.3.2/docs/reference/en-US/html/graniteds.datamanagement.html)的文档）以及与 Spring 框架的出色集成（[此处](http://www.graniteds.org/public/docs/2.3.2/docs/reference/en-US/html/graniteds.spring.html)的文档）。

# python - uwsgi + python 导入错误

> ID：11771969
> 
> 赞同：0
> 
> 时间：2012-08-02T06:14:21.823
> 
> 标签：python, nginx, uwsgi

我已经用 uwsgi 和 python 配置了我的 nginx 服务器，当我还安装了 WebOb 但是当我在浏览器中点击 url 时，它给出了 uwsgi 错误 Python application not found 并且 uwsgi application log 说：

```
*** Starting uWSGI 1.0.4 (32bit) on [Thu Aug  2 11:14:31 2012] ***
compiled with version: 4.6.3 on 01 August 2012 15:37:48
current working directory: /home/paul/Desktop/project/studio713
detected binary path: /home/paul/Desktop/project/studio713/bin/uwsgi
uWSGI running as root, you can use --uid/--gid/--chroot options
*** WARNING: you are running uWSGI as root !!! (use the --uid flag) ***
*** WARNING: you are running uWSGI without its master process manager ***
your memory page size is 4096 bytes
uwsgi socket 0 bound to TCP address 127.0.0.1:8807 fd 4
Python version: 2.7.3 (default, Apr 20 2012, 23:06:40)  [GCC 4.6.3]
Python main interpreter initialized at 0x85db738
your server socket listen backlog is limited to 100 connections
*** Operational MODE: preforking ***
added ironjob/ai/ to pythonpath.
Traceback (most recent call last):
File "ironjob/ai/index.py", line 5, in <module>
from webob import Response
ImportError: No module named webob
unable to load app 0 (mountpoint='') (callable not found or import error)
*** no app loaded. going in full dynamic mode ***
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI worker 1 (pid: 14878, cores: 1)
spawned uWSGI worker 2 (pid: 14882, cores: 1)
[pid: 14878|app: -1|req: -1/1] 127.0.0.1 () {38 vars in 911 bytes} [Thu Aug  2 11:14:41    2012] GET /ai?api=%3CIron%3E%3CAction%3E%3CService%3EUserAuth%3C/Service%3E%3CUsername%3Eadmin%3C/Username%3E%3CPassword%3Eadmin%3C/Password%3E%3C/Action%3E%3C/Iron%3E => generated 48 bytes in 0 msecs (HTTP/1.1 500) 2 headers in 63 bytes (0 switches on core 0) 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:21:26.553

看到这个，可能这会有所帮助.. [ImportError: No module named webob](https://groups.google.com/forum/#!topic/django-non-relational/ZbQyWbDqff0)

# java - 当客户端关闭时，服务器 println() 方法在哪里发送

> ID：11771974
> 
> 赞同：0
> 
> 时间：2012-08-02T06:14:47.877
> 
> 标签：java, sockets

它是简单的 java socket 客户端/服务器模型（服务器发送数据，客户端接收）。问题是当客户端关闭服务器发送数据的位置（服务器不检测客户端是否关闭）。我知道服务器可以检测并关闭流，但我想知道它去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:31:10.007

这取决于您使用的协议。

如果你使用 TCP，当客户端的 Socket 关闭或者你尝试在客户端的 Socket 关闭后发送一些东西时，服务器的 Socket 会抛出异常。

如果您使用 UDP，Socket 将不会检测客户端是否仍在侦听端口并发送数据。在客户端的机器上，它只是被忽略了。

# c# - 带有 - 字符的电子邮件正则表达式

> ID：11771975
> 
> 赞同：-1
> 
> 时间：2012-08-02T06:14:48.580
> 
> 标签：c#, regex, email

我使用这个正则表达式来检查电子邮件。`/^\w+([-+.'']\w+)*@\w*([-.çöişğü]\w*)*\.\w+([-.]\w+)*$/` 但是这个正则表达式不接受像`e-e--@hotmail.com`. 你能帮我改变我的正则表达式来接受这样的电子邮件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:13:17.610

如果您用`c#`标签标记您的问题，为什么不使用内置[`System.Net.Mail.MailAddress`](http://msdn.microsoft.com/en-us/library/591bk9e8.aspx)类构造函数进行电子邮件验证？它支持很多邮件地址格式，并且比你的正则表达式覆盖更多的场景。看：

```
var isEmailValid = false;
try
{
    var email = new MailAddress("e-e--@hotmail.com");
    isValidEmail = true;
{
catch (FormatException x)
{
    // invalid email address
} 
```

它不是比你的正则表达式更容易吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T06:21:29.747

我在 HTML5 模式电子邮件模式中使用它：

```
^(?:[-+~=!#$%&'*/?\^`{|}\w]+)(?:\.[-+~=!#$%&'*/?\^`{|}\w]+)*@(?:[a-zA-Z0-9][-a-zA-Z0-9]*[a-zA-Z0-9]\.)+[a-zA-Z]{2,6}$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T06:31:33.950

```
/^\w+([-+.'']*\w*)*@\w*([-.çöişğü]\w*)*\.\w+([-.]\w+)*$/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T06:44:06.090

将第二个更改`\w+`为`\w*`：

```
^\w+([-+.''] \w* )*@\w*([-.çöişğü]\w*)*\.\w+([-.]\w+)*$
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-19T13:09:47.733

这是我专门用于电子邮件验证的正则表达式，但我不推荐这种方式，尤其是在商业环境中使用时；由于这个事实，在考虑电子邮件验证时，正则表达式过于严格。它们不允许为完全可能的域留出空间，并且包含所有这些可能性将需要一个很长的正则表达式，使其不稳定。

```
 string strRegex = @"^(?("")("".+?(?<!\\)""@)|(([0-9a-z]((\.(?!\.))|[-!#\$%&'\*\+/=\?\^`\{\}\|~\w])*)(?<=[0-9a-z])@))" +
        @"(?(\[)(\[(\d{1,3}\.){3}\d{1,3}\])|(([0-9a-z][-\w]*[0-9a-z]*\.)+[a-z0-9][\-a-z0-9]{0,22}[a-z0-9]))$";

    Regex re = new Regex(strRegex);
    if (re.IsMatch(txtEmail.Text) || txtEmail.Text == "" || txtEmail.Text.Length > 100 && txtEmail.Text.Length < 10)
    {
        MessageBox.Show("Thanks");

    }

    else
    {
        MessageBox.Show("Please enter a valid email address");

    }

} 
```

这是solotuion，我建议哪个更稳定，更有效，并且使用**EmailAddressAttribute**，因为它是内置类并且允许mroe空间并且不像正则表达式那样严格。希望这可以帮助。

```
 TextBox tb = new TextBox();
        tb.KeyDown += new KeyEventHandler(txtEmail_KeyDown);
        // Run Checks after the enter is pressed.
        if (e.KeyCode == (Keys.Enter) || e.KeyCode == (Keys.Tab))
        {
            if (!new EmailAddressAttribute().IsValid(txtEmail.Text))
            {

                MessageBox.Show(txtEmail.ToString() + " is not a valid Email address");
                txtEmail.Clear();
            }
            else
            {
                MessageBox.Show("The address: " + txtEmail + " is valid");
                txtEmail.Clear();
            }
        } 
```

# r - 已更新数据：Diff 中的错误...必须是具有相同水平的因素

> ID：11771980
> 
> 赞同：1
> 
> 时间：2012-08-02T06:15:19.093
> 
> 标签：r, diff, factors, bradleyterry2

我希望你们都可以帮助我。

我有一个包含两个数据框的列表 -`contests`在`expvar.` 数据框中`contests`，每一行都是一场比赛，第一列是比赛的获胜者，第二列是比赛的失败者。在数据框中`expvar`，我有特定于玩家的预测变量。这些都是数字。我正在尝试使用 BradleyTerry2 包来分析我的数据。这是我正在使用的代码：

```
a <- data.frame(read.csv(file.choose()))
b <- data.frame(read.csv(file.choose()))
ablist <- list(contests=a, expvar=b)  
Model <- BTm(1, winner, loser, ~level2[..]+(1|..), data=ablist) 
```

这是我得到的错误：

```
Error in Diff(player1, player2, formula, id, data, separate.ability, refcat,  : 
'player1$..' and 'player2$..' must be factors with the same levels 
```

我的问题是，我做错了什么？我已经尝试了很多东西，但我不确定这个错误是什么意思。我应该将变量更改为因子吗？为什么/如何？赢家和输家都有相同类别的预测变量。

这是我的输出`dput(a)`

```
structure(list(winner = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 
3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 4L, 4L, 4L, 4L, 4L, 4L, 4L, 5L, 
5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L, 6L, 6L, 
6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 9L, 9L, 9L, 9L, 
9L, 9L, 9L, 9L, 9L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 10L, 11L, 
11L, 11L, 11L, 11L, 11L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 12L, 
13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 13L, 14L, 14L, 
14L, 14L, 14L, 15L, 15L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 16L, 
16L, 16L, 16L, 17L, 17L, 17L, 17L, 17L, 17L, 17L, 17L, 17L, 17L, 
18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 18L, 19L, 19L, 
19L, 19L, 19L, 19L, 19L, 19L, 20L, 20L, 20L, 20L, 20L, 20L, 20L, 
20L, 20L, 20L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 21L, 22L, 
22L, 22L, 22L, 22L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 23L, 
24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 25L, 
25L, 25L, 25L, 25L, 25L, 25L, 25L, 26L, 26L, 26L, 26L, 26L, 26L, 
26L, 27L, 27L, 27L, 27L, 28L, 28L, 29L, 29L, 29L, 29L, 29L, 29L, 
29L, 29L, 29L, 30L, 30L, 30L, 30L, 30L, 30L, 30L, 30L, 30L, 30L, 
30L, 30L, 30L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 31L, 23L, 13L, 
20L, 20L), .Label = c("Arizona Cardinals", "Atlanta Falcons", 
"Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", "Chicago Bears", 
"Cincinnati Bengals", "Cleveland Browns", "Dallas Cowboys", "Denver Broncos", 
"Green Bay Packers", "Houston Texans", "Indianapolis Colts", 
"Jacksonville Jaguars", "Kansas City Chiefs", "Miami Dolphins", 
"Minnesota Vikings", "New England Patriots", "New Orleans Saints", 
"New York Giants", "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
"Pittsburgh Steelers", "San Diego Chargers", "San Francisco 49ers", 
"Seattle Seahawks", "St. Louis Rams", "Tampa Bay Buccaneers", 
"Tennessee Titans", "Washington Redskins"), class = "factor"), 
    loser = structure(c(4L, 9L, 17L, 27L, 27L, 28L, 28L, 29L, 
    29L, 5L, 6L, 11L, 12L, 16L, 18L, 20L, 23L, 26L, 29L, 30L, 
    7L, 7L, 8L, 8L, 9L, 13L, 15L, 17L, 23L, 24L, 32L, 10L, 15L, 
    16L, 23L, 26L, 28L, 29L, 1L, 2L, 6L, 10L, 11L, 12L, 16L, 
    20L, 20L, 23L, 26L, 30L, 11L, 11L, 12L, 14L, 15L, 18L, 20L, 
    24L, 29L, 8L, 15L, 16L, 32L, 4L, 7L, 15L, 21L, 7L, 8L, 12L, 
    21L, 24L, 27L, 28L, 30L, 32L, 2L, 8L, 16L, 20L, 22L, 23L, 
    26L, 30L, 6L, 11L, 11L, 14L, 18L, 28L, 6L, 7L, 8L, 11L, 12L, 
    15L, 17L, 31L, 3L, 7L, 8L, 11L, 13L, 13L, 15L, 19L, 25L, 
    26L, 31L, 10L, 11L, 12L, 13L, 14L, 10L, 23L, 4L, 4L, 10L, 
    16L, 19L, 22L, 23L, 26L, 27L, 28L, 29L, 1L, 5L, 6L, 11L, 
    11L, 12L, 13L, 15L, 20L, 21L, 1L, 4L, 4L, 10L, 16L, 17L, 
    22L, 23L, 27L, 28L, 29L, 2L, 11L, 12L, 16L, 23L, 26L, 27L, 
    30L, 1L, 3L, 5L, 7L, 9L, 24L, 25L, 27L, 28L, 32L, 1L, 4L, 
    4L, 7L, 16L, 17L, 19L, 29L, 31L, 10L, 13L, 16L, 22L, 30L, 
    1L, 2L, 8L, 9L, 21L, 25L, 27L, 28L, 29L, 3L, 3L, 7L, 7L, 
    8L, 8L, 9L, 13L, 15L, 19L, 26L, 32L, 10L, 16L, 16L, 19L, 
    22L, 23L, 23L, 30L, 4L, 11L, 22L, 28L, 29L, 29L, 32L, 22L, 
    27L, 29L, 29L, 9L, 32L, 2L, 5L, 6L, 11L, 12L, 16L, 18L, 20L, 
    28L, 3L, 6L, 7L, 8L, 11L, 12L, 13L, 14L, 15L, 15L, 16L, 18L, 
    25L, 1L, 8L, 9L, 11L, 20L, 24L, 24L, 28L, 7L, 18L, 29L, 32L
    ), .Label = c("Arizona Cardinals", "Atlanta Falcons", "Baltimore Ravens", 
    "Buffalo Bills", "Carolina Panthers", "Chicago Bears", "Cincinnati Bengals", 
    "Cleveland Browns", "Dallas Cowboys", "Denver Broncos", "Detroit Lions", 
    "Green Bay Packers", "Houston Texans", "Indianapolis Colts", 
    "Jacksonville Jaguars", "Kansas City Chiefs", "Miami Dolphins", 
    "Minnesota Vikings", "New England Patriots", "New Orleans Saints", 
    "New York Giants", "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
    "Pittsburgh Steelers", "San Diego Chargers", "San Francisco 49ers", 
    "Seattle Seahawks", "St. Louis Rams", "Tampa Bay Buccaneers", 
    "Tennessee Titans", "Washington Redskins"), class = "factor")), .Names = c("winner", 
"loser"), row.names = c(NA, -256L), class = "data.frame") 
```

这是为了`dput(b)`

```
structure(list(X = structure(1:32, .Label = c("Arizona Cardinals", 
"Atlanta Falcons", "Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", 
"Chicago Bears", "Cincinnati Bengals", "Cleveland Browns", "Dallas Cowboys", 
"Denver Broncos", "Detroit Lions", "Green Bay Packers", "Houston Texans", 
"Indianapolis Colts", "Jacksonville Jaguars", "Kansas City Chiefs", 
"Miami Dolphins", "Minnesota Vikings", "New England Patriots", 
"New Orleans Saints", "New York Giants", "New York Jets", "Oakland Raiders", 
"Philadelphia Eagles", "Pittsburgh Steelers", "San Diego Chargers", 
"San Francisco 49ers", "Seattle Seahawks", "St. Louis Rams", 
"Tampa Bay Buccaneers", "Tennessee Titans", "Washington Redskins"
), class = "factor"), id = 1:32, high = c(0L, 0L, 0L, 0L, 0L, 
1L, 1L, 1L, 0L, 0L, 0L, 0L, 0L, 1L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 
0L, 0L, 0L, 1L, 0L, 0L, 0L, 0L, 0L, 0L, 0L), level2 = c(0, 0.67, 
0, 0.33, 0.25, 0, 0, 0.25, 0.33, 0, 0.25, 0, 0, 0.5, 0, 0, 0.25, 
0.33, 0, 0, 0, 0, 0, 0, 0, 0.67, 0.25, 0, 0.2, 0, 0, 0.6), level3 = c(0.25, 
0.4, 0.36, 0.3, 0.11, 0.56, 0.38, 0.5, 0.22, 0.33, 0.6, 0.3, 
0.57, 0.38, 0.29, 0.43, 0.3, 0.33, 0.29, 0.14, 0.2, 0.22, 0.33, 
0.22, 0.5, 0.27, 0.4, 0.2, 0.43, 0.43, 0.33, 0.44)), .Names = c("X", 
"id", "high", "level2", "level3"), row.names = c(NA, -32L), class = "data.frame" 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-28T08:59:45.760

对于“BTm”功能，我也遇到了这个错误消息。可以通过定义级别来解决问题。（级别是类型因子函数的可定义属性）。尝试为 player1 和 player2 设置级别：

```
 levels(contests[,1]) <- unique(c(contests[,1], contests[,2]))
    levels(contests[,2]) <- unique(c(contests[,1], contests[,2])) 
```

对不起，我在 3 年前帮不上忙；）

# mysql - SQL查询从工资表中查找第N个最高工资

> ID：11771984
> 
> 赞同：16
> 
> 时间：2012-08-02T06:15:55.007
> 
> 标签：mysql

有人帮我从 MYSQL 的薪水表中找出第 n 高的薪水

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-02T07:46:08.977

Try this, n would be the nth item you would want to return

```
 SELECT DISTINCT(Salary) FROM table ORDER BY Salary DESC LIMIT n,1 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2015-02-04T10:15:01.460

如果您想从表中找到第 n 个薪水（这里的 n 应该是第 1 或第 2 或第 15 最高薪水之类的任何东西）

**这是查找第 n 个薪水的查询：**

```
SELECT DISTINCT Salary FROM tblemployee ORDER BY Salary DESC LIMIT 1 OFFSET (n-1) 
```

**如果你想找到第 8 高的薪水，查询应该是：**

```
SELECT DISTINCT Salary FROM tblemployee ORDER BY Salary DESC LIMIT 1 OFFSET 7 
```

**注意：** OFFSET 从第 0 个位置开始，因此这里使用 N-1 规则

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-08-02T06:19:13.597

要获得第 n 高薪水，您需要先使用排序数据`ORDER BY`，然后使用`LIMIT`with选择第 n 高记录`OFFSET`。

```
SELECT DISTINCT(salary) AS salary
FROM tbl_salary
ORDER BY salary DESC
LIMIT 1 OFFSET (n - 1); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-20T09:54:37.910

```
SELECT * FROM Employee Emp1 
WHERE (N-1) = ( 
    SELECT COUNT(DISTINCT(Emp2.Salary)) 
    FROM  Employee Emp2 
    WHERE Emp2.Salary > Emp1.Salary) 
```

对于外部查询处理的每条记录，都会执行内部查询，并返回有多少条记录的工资低于当前工资。如果您正在寻找第二高的薪水，那么一旦内部查询返回 N-1，您的查询就会停止。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-11-27T11:27:50.873

寻找最高薪水

```
select MAX(Salary) from Employee; 
```

找到第二高的薪水

查询-1

```
SELECT MAX(Salary) FROM Employee
WHERE Salary NOT IN (SELECT MAX(Salary) FROM Employee); 
```

查询-2

```
select MAX(Salary) from Employee
WHERE Salary <> (select MAX(Salary) from Employee ) 
```

找到第 n 个最高薪水

查询-1

```
SELECT * /*This is the outer query part */
FROM Employee Emp1
WHERE (N-1) = ( /* Subquery starts here */
SELECT COUNT(DISTINCT(Emp2.Salary))
FROM Employee Emp2
WHERE Emp2.Salary > Emp1.Salary) 
```

查询-2

```
SELECT *
FROM Employee Emp1
WHERE (1) = (
SELECT COUNT(DISTINCT(Emp2.Salary))
FROM Employee Emp2
WHERE Emp2.Salary > Emp1.Salary) 
```

在 SQL Server 中使用 TOP 关键字排名第 n 高的薪水

```
SELECT TOP 1 Salary
FROM (
      SELECT DISTINCT TOP N Salary
      FROM Employee
      ORDER BY Salary DESC
      ) AS Emp
ORDER BY Salary 
```

在 MySQL 中查找第 n 个最高薪水

```
SELECT Salary FROM Employee 
ORDER BY Salary DESC LIMIT n-1,1 
```

在 SQL Server 中查找第 n 个最高薪水

```
SELECT Salary FROM Employee 
ORDER BY Salary DESC OFFSET N-1 ROW(S) 
FETCH FIRST ROW ONLY 
```

使用 rownum 在 Oracle 中查找第 n 个最高薪水

```
select * from (
  select Emp.*, 
row_number() over (order by Salary DESC) rownumb 
from Employee Emp
)
where rownumb = n;  /*n is nth highest salary*/ 
```

使用 RANK 查找 Oracle 中第 n 高的薪水

```
select * FROM (
select EmployeeID, Salary
,rank() over (order by Salary DESC) ranking
from Employee
)
WHERE ranking = N; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-10-14T10:13:46.587

在这里，我们可以为此创建 MYSQL 函数。Employee 表中的第 n 个最高薪水。

```
+----+--------+
| Id | Salary |
+----+--------+
| 1  | 100    |
| 2  | 200    |
| 3  | 300    |
+----+--------+ 
```

例如，给定上面的 Employee 表，n = 2 的第 n 个最高薪水是 200。如果没有第 n 个最高薪水，那么查询应该返回 null。

```
CREATE FUNCTION getNthHighestSalary(N INT) RETURNS INT
BEGIN
DECLARE limitv INT;
    SET limitv = N - 1;
  RETURN (
      Select IFNULL(
        (select Distinct Salary from Employee order by Salary Desc limit limitv, 1),
         NULL
      ) as getNthHighestSalary
  );
END 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-02T06:25:50.270

尝试这个：

```
select MIN(sal) from salary where sal in 
 (select sal from salary order by sal desc limit 9) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-02T06:23:12.730

如果想指定第 n 高，可以使用排名方法。

要获得第三高，请使用

```
SELECT * FROM
(SELECT @rank := @rank + 1 AS rank, salary
FROM   tbl,(SELECT @rank := 0) r 
order by salary desc ) m
WHERE rank=3 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-20T12:08:30.810

试试这个来找到第五高的薪水-

```
SELECT DISTINCT(column name) FROM table ORDER BY (column name) desc LIMIT 4,1 
```

第n个薪水-

```
SELECT DISTINCT(column name) FROM table ORDER BY (column name) desc LIMIT n-1,1 
```

我在phpmyadmin面板上试过了。。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-03-14T12:26:17.313

```
+-------+--------+
|  name | salary |
+-------+--------+
|   A   | 100    |
|   B   | 200    |
|   C   | 300    |
|   D   | 400    |
|   E   | 500    |
|   F   | 500    |
|   G   | 600    |
+-------+--------+ 
```

如果您只想选择第 N 个最高薪水，那么：

```
SELECT DISTINCT salary FROM emp ORDER BY salary DESC LIMIT 1 OFFSET N-1; 
```

如果您想选择所有获得第 N 高薪水的员工，那么：

```
SELECT * FROM emp WHERE salary = (
   SELECT DISTINCT salary FROM emp ORDER BY salary DESC LIMIT 1 OFFSET N-1
); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-09-06T09:33:21.897

```
SELECT * FROM employe e1 WHERE n-1 = ( SELECT COUNT(DISTINCT(e2.salary)) FROM employe e2 WHERE e2.salary > e1.salary) 

    Where n = highest number of salary like 1,2,3 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-12-14T15:33:41.057

首先对所有记录进行排序，确实会消耗大量时间（想象一下，如果表包含数百万条记录）。然而，诀窍是进行改进的线性搜索。

```
SELECT * FROM Employee Emp1
WHERE (N-1) = ( SELECT COUNT(*) FROM (
    SELECT DISTINCT(Emp2.Salary)
    FROM  Employee Emp2
    WHERE Emp2.Salary > Emp1.Salary LIMIT N)) 
```

在这里，一旦内部查询发现 n 个不同的薪水值大于外部查询的薪水，它就会将结果返回给外部查询。

[Mysql 在http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html](http://dev.mysql.com/doc/refman/5.6/en/limit-optimization.html)已经清楚地提到了这个优化

上面的查询也可以写成，

```
SELECT * FROM Employee Emp1
WHERE (N-1) = (
    SELECT COUNT(DISTINCT(Emp2.Salary))
    FROM  Employee Emp2
    WHERE Emp2.Salary > Emp1.Salary LIMIT N) 
```

同样，如果查询与仅在单个表上运行一样简单并且仅用于提供信息的目的，那么您可以通过将第 n 个最高薪水放在 where 子句中来限制最外层查询以返回 1 条记录并运行单独的查询

感谢 Abishek Kulkarni 的解决方案，建议对此进行优化。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-05-15T06:36:42.367

```
select distinct(column_name) from table_name order by column_name desc limit (n-1),1; 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-06-16T15:13:50.560

**MySQL 查询从工资表中查找第 N 个最高工资**（100% 正确）

SELECT Salary from Employee ORDER BY Salary DESC LIMIT N-1,1;

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-11T22:37:12.120

```
SELECT DISTINCT(column_name)
  FROM table_name 
  ORDER BY column_name DESC limit N-1,1; 
```

其中 N 代表第 n 个最高薪水..

第三高薪：

```
SELECT DISTINCT(column_name)
 FROM table_name 
 ORDER BY column_name DESC limit 2,1; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-03-03T12:37:59.220

第四高薪水：

select min(salary) from (select distinct Salary from hibernatepractice.employee e order by Salary desc limit 4) as e1;

对于第 n 个最高工资：

select min(salary) from (select distinct Salary from hibernatepractice.employee e order by Salary desc limit n) as e1;

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-27T10:12:40.530

获得第二高的薪水：

```
SELECT   salary 
FROM     [employees] 
ORDER BY salary DESC 
offset   1 rows 
FETCH next 1 rows only 
```

要获得第 N 高薪水：

```
SELECT   salary 
FROM     [employees] 
ORDER BY salary DESC 
offset   **n-1** rows 
FETCH next 1 rows only 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-09-17T07:05:26.277

试试这个解决方案。

```
select SUBSTRING_INDEX(SUBSTRING_INDEX(GROUP_CONCAT(DISTINCT salary ORDER BY salary DESC),',',3),',',-1) from employees 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-02-21T18:22:28.257

```
set @cnt=0;
select s.* from (SELECT  (@cnt := @cnt + 1) AS rank,a.* FROM one as a  order by a.salary DESC) as s WHERE s.rank='3'; 
```

=>这是第三高的薪水。第 n 次替换 3 值。例如第五高：

```
set @cnt=0;
select s.* from (SELECT  (@cnt := @cnt + 1) AS rank,a.* FROM one as a  order by a.salary DESC) as s WHERE s.rank='5'; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-12-06T16:31:56.247

**这是工资表**

[![在此处输入图像描述](../Images/2070f6a8d1071e568a4044def6bb9393.png)](https://i.stack.imgur.com/b0KXY.png)

```
SELECT  amount FROM  salary 
GROUP by amount
ORDER BY  amount DESC 
LIMIT n-1 , 1 
```

**或者**

```
SELECT DISTINCT amount
FROM  salary 
ORDER BY  amount DESC 
LIMIT n-1 , 1 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-01-21T06:59:15.060

我已经为此查询使用了过程

这里`getHighestSalary`的程序，报告 Employee 表中的第 n 个最高薪水。如果没有第 n 个最高薪水，则查询应报告 null。

首先，创建表

```
CREATE TABLE employee (
id INT AUTO_INCREMENT,
salary INT,
PRIMARY KEY (id) ); 
```

接下来，创建 PROCEDURE

```
DELIMITER // 
 CREATE PROCEDURE getHighestSalary(emp_id int)
 BEGIN
    select ifnull((select salary from employee where id = emp_id order by salary desc), null) as getNthHighestSalary;
 END //
 DELIMITER ; 
```

最后，调用具有 n 值的 getHighestSalary 过程

```
call getHighestSalary(2); -- 200 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2018-02-21T18:17:17.620

```
SET @cnt=0; 
SELECT s.* 
FROM   (SELECT ( @cnt := @cnt + 1 ) AS rank, 
               a.* 
        FROM   one AS a 
        ORDER  BY a.salary DESC) AS s 
WHERE  s.rank = '3'; 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-10-24T17:50:28.610

让表格`salaries`包含

```
+----------+--------+--------+
| emp      | salary | deptno |
+----------+--------+--------+
| ep1      |     10 | dp1    |
| ep2      |     20 | dp2    |
| ep3      |     30 | dp2    |
| ep4      |     40 | dp1    |
| ep5      |     50 | dp1    |
| ep6      |     60 | dp3    |
| ep7      |     70 | dp3    |
+----------+--------+--------+ 
```

通过嵌套查询：（您可以在其中更改偏移量 0/1/2... 分别为第一、第二和第三...位置）

```
 select
      *
    from
      salaries as t1 
    where 
      t1.salary = (select 
                   salary
                 from 
                   salaries
                 where 
                 salaries.deptno = t1.deptno ORDER by salary desc limit 1 offset 1); 
```

或者可能是通过创建排名：（您可以在其中更改排名= 1/2/3 ...分别为第​​一，第二和第三...位置）

```
SET @prev_value = NULL;
SET @rank_count = 0;
select * from 
(SELECT
  s.*, 
  CASE 
      WHEN @prev_value = deptno THEN @rank_count := @rank_count + 1
      WHEN @prev_value := deptno THEN @rank_count := 1 
      ELSE @rank_count := 1 
  END as rank
FROM salaries s
ORDER BY deptno, salary desc) as t
having t.rank = 2; 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-01-19T06:54:16.037

获取第 n 高记录的查询如下：

```
SELECT 
    *
FROM
    (SELECT 
        *
    FROM
        table_name
    ORDER BY column_name ASC
    LIMIT N) AS tbl
ORDER BY column_name DESC
LIMIT 1; 
```

简单易懂

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-03-08T10:06:11.893

这将有效找到第**n 个最大数**

```
SELECT 
    TOP 1 * from (SELECT TOP  nth_largest_no * FROM Products Order by price desc) ORDER BY price asc; 
```

对于第五大数字

```
SELECT 
  TOP 1 *  from (SELECT TOP  5 * FROM Products Order by price desc) ORDER BY price asc; 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2014-06-17T11:52:49.570

如果您想获取薪水第三高的员工的所有记录，则可以使用以下`sql`查询：

表名：工资

```
select * from salary where salary = 
(select distinct salary from salary order by salary desc limit 2,1) 
```

# html - 如何在 html5 画布中获取特定区域或区域的坐标？

> ID：11771986
> 
> 赞同：0
> 
> 时间：2012-08-02T06:15:57.250
> 
> 标签：html, html5-canvas

我使用画布创建了一个圆圈并将其分成几条线。我想要一个特定区域的坐标：如果我点击一个特定区域，那应该是可以点击的。

以字轮游戏为例，其中一个圆圈被分成许多具有不同坐标的区域，并且一些字母放置在划分的区域内。如果我想单击带有字母“A”的特定区域，则应单击“A”并应显示在文本框中。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T11:55:07.103

希望以下内容可以帮助您入门。

请注意，“带有字母'A'的特定区域”称为圆的扇区。

*认为*

x 轴水平且向右为正

y 轴垂直且向下为正

从正 x 轴顺时针以弧度为单位测量角度

第一个扇区从角度 A 开始

圆心在 (cx,cy) 处，半径为 r

圆被分成n个相等的扇区

光标在位置 (x,y)

预定义函数 Math.atan2(y,x) 返回正 x 轴和从 (0,0) 到 (x,y) 的线段之间的角度（从 -pi 和 pi），其中 i 是整数，并且 i< = x < i+1 预定义函数 Math.floor(x) 返回 i

*然后*

令 S 为每个扇区中心的角度

S=2*pi/n

创建一个函数 getangle(x,y,cx,cy)，它返回从正 x 方向通过 (cx,cy) 的水平线与从 (cx,cy) 到 (x, y)

**伪代码**

```
function getangle(x,y,cx,cy)
{
    var ang =  Math.atan2(y-cy,x-cx)   
    if(ang<0)
    {
        ang+=2*Math.PI
    }
    return ang
} 
```

现在您可以创建一个函数来检查光标所在的扇区（如果有）。

如果光标在圆圈外，则返回 -1，否则返回从 1 到 n 的扇区号。

**伪代码**

```
function isInSector(x,y)   (x,y) coordinates of cursor
{
    // first check if cursor is outside of circle
    if((cx-x)*(cx-x)+(cy-y)*(cy-y)>r*r)
    {
        return -1
    }
    // find angle for cursor position
    B=getangle(x,y,cx,cy)
    return Math.floor((B-A)/S)+1
} 
```

# iphone - 在“MapViewController *”类型的对象上找不到属性“jsonData”

> ID：11771989
> 
> 赞同：0
> 
> 时间：2012-08-02T06:16:05.333
> 
> 标签：iphone, objective-c, ios, xcode4.3, arcgis

我正在尝试在我的应用程序的图形层上绘制路线，但我不知道这是正确的方法，还是有其他方法可以做到？我在哪里尝试使用 NSArray 和 ArgGIS 来绘制地图，我有问题。

*edit 我尝试将 NSArray 改回 JSON 字符串并尝试使用带有 JSON 字符串的 ArcGIS 来绘制它

这就是我所做的：

```
NSArray *BusRoute=[jsonResult objectForKey:@"BusRoute"];
int i;
int count = [BusRoute count];
for (i = 0; i < count; i++)
{   
    NSDictionary *dic = [BusRoute objectAtIndex: i];
    NSString *Duration = [dic valueForKey:@"Duration"];
    //---PATH---
    NSArray *PATH = [dic valueForKey:@"PATH"]; 
    NSLog(@"PATH = %@", PATH);
    self.path = PATH;
}
NSError *writeError = nil; 
NSData *jsonData = [NSJSONSerialization dataWithJSONObject:path options:NSJSONWritingPrettyPrinted error:&writeError];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]; 
    NSLog(@"JSON Output: %@", jsonString);
if (self.jsonString) {
        // symbolize the returned route graphic
        self.jsonString.routeGraphic.symbol = [self routeSymbol]; 

        // add the route graphic to the graphic's layer
        [self._graphicsLayer addGraphic:self.jsonString.routeGraphic];

        // tell the graphics layer to redraw
        [self._graphicsLayer dataChanged];
    } 
```

* JSON 字符串的输出

```
JSON Output: [
  [
     "38909,35576;38872,35589;38861,35593;38848,35597;38697,35650;38695,35651;38695,35651;38609,35681;38583,35689;38553,35697;38508,35700;38476...;29560,40043"
  ]
] 
```

* * *

这是我必须在地图上绘制的路径的一部分：

```
PATH = ((  "38909,35576;38872,35589;38861,35593;38848,35597;38697,35650;38695,35651;38695,35651;38609,35681;38583,35689;38553,35697;38508,35700;38476,35696;38476,35696;....)) 
```

对于这条线，`self.jsonData.routeGraphic.symbol = [self routeSymbol];`我遇到了一个错误`Property 'Property 'jsonData' not found on object of type 'MapViewController *'`

我该怎么做才能解决？请帮忙

* * *

*如何使用`NSArray`和使用 ArcGIS 绘制路径线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:26:55.857

`routeGraphic`属性与 NSArray 类没有任何关联。NSArray 是集合。

你的代码有点奇怪。

什么是`routeGrphic`？？？

你是不是忘记了下面的类似代码？

```
YourObject *object = [path objectAtIndex:index];
object.routeGraphic.symbol = [self routeSymbol]; 
```

# c# - ABCpdf nuget 包 XULRunner 文件夹已损坏？

> ID：11771990
> 
> 赞同：3
> 
> 时间：2012-08-02T06:16:08.640
> 
> 标签：c#, asp.net-mvc, xulrunner, gecko, abcpdf

我正在尝试更新我的（以前工作的）创建 pdf 的 Web 应用程序以使用 ABCpdf.NET 和 ABCpdf.NET Gecko Runtime nuget 包。

我已经安装了两个软件包（都是 8.1.1.6 版）但是当我运行我的应用程序时，我得到以下**WebSupergoo.ABCpdf8.Internal.PDFException**：

> 添加 HTML 失败：Gecko 引擎遇到无法恢复的错误。可能的原因： XULRunner 文件夹已损坏或来自其他版本的 ABCpdf。

安装 ABCpdf.NET Gecko Runtime 包后，我得到一个对话框，告诉我需要手动将 XULRunner 文件夹复制到我的输出目录中。为了实现这一点，我在我的应用程序 .csproj 文件中添加了以下内容：

```
 <Target Name="AfterBuild">
    <CallTarget Targets="CopyAbcpdfToDeployFolder" />
  </Target>
  <Target Name="CopyAbcpdfToDeployFolder">
    <ItemGroup>
      <SourceDir Include="$(ProjectDir)XULRunner\**\*.*" />
    </ItemGroup>
    <Copy SourceFiles="@(SourceDir)" DestinationFolder="$(WebProjectOutputDir)\$(OutputPath)%(SourceDir.RecursiveDir)\XULRunner" />
  </Target> 
```

（这似乎工作正常 - XULRunner 文件夹及其内容在构建后出现在我的 bin 文件夹中）

失败的代码行如下：

```
theDoc.AddImageUrl(url); 
```

谁能帮我搞定这个工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T07:05:25.847

事实证明，我对`.csproj`文件的更改并未将所有文件复制到正确的子文件夹中。为了递归地复制文件夹结构和文件，XML 应该如下所示：

```
 <Target Name="AfterBuild">
    <CallTarget Targets="CopyXULRunnerToDeployFolder" />
  </Target>
  <Target Name="CopyXULRunnerToDeployFolder">
      <ItemGroup>
          <MyFiles Include="XULRunner\**\*.*" />
      </ItemGroup>
      <Microsoft.Build.Tasks.Copy SourceFiles="@(MyFiles)"  DestinationFiles="@(MyFiles->'$(OutputPath)\XULRunner\%(RecursiveDir)%(Filename)%(Extension)')"/>
  </Target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T17:41:01.317

我能够使用以下 MSBuild xml 完成相同的结果：

```
<ItemGroup>
    <Content Include="XULRunner\**\*.*">
        <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
    </Content>
</ItemGroup> 
```

在处理了有关通过 MSDeploy 构建包的问题（不包括 XULRunner 文件）后，我选择了这个设置。

不确定这是否有任何明显的问题，但到目前为止，它适用于我的多阶段部署设置。

# javascript - Javascript 执行一次

> ID：11771992
> 
> 赞同：0
> 
> 时间：2012-08-02T06:16:18.873
> 
> 标签：javascript

我如何让 JavaScript 代码只执行或使用一次？例子是

```
var stringToMatch = 'christopher';
function toggle (){   

 var input = document.getElementById('text').value; 

 if (input == stringToMatch){  
    document.getElementById('divColor1').style.display = 'block';   
}   
else {   
   document.getElementById('divColor1').style.display = 'none';   
}   
} 
```

这段代码或 stringToMatch 我想执行一次，之后我不在乎它是否在某种意义上被删除。因为这是优惠券。我正在做这个的倍数，所以一旦有人输入这个我希望它删除

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:20:50.697

如果我没听错，你可以`toggle()`用一个空函数覆盖。

```
if (input == stringToMatch){  
    document.getElementById('divColor1').style.display = 'block';   
    window.toggle = function() { };
} 
```

# java - 枚举集 JPA 2.0

> ID：11771993
> 
> 赞同：0
> 
> 时间：2012-08-02T06:16:19.073
> 
> 标签：java, mysql, jpa

请看一下我以前的问题以了解背景。

[枚举列表与布尔值类](https://stackoverflow.com/questions/11766282/list-of-enum-vs-class-of-booleans)

但是，我的问题是枚举集如何与 JPA 2.0 和数据库一起使用。由于我可能会将值保存为字符串（因为我不想冒险丢失映射），因此与 bool 类相比，集合中大于 20 个枚举的枚举集可能是存储数据的一种非常无效的方式。

考虑具有不同角色的用户表：

```
user | password | role (enum)
adm    1223       admin, guest, www, lab, elevator, ap, // Might be more than > 20
sam    0000       admin 
```

…………

我应该选择什么？你有什么想法？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T07:18:41.640

上述数据库设计不是您应该为用户存储角色的方式。它没有被规范化（因为您在单个列中有多个值），因此很难查询。例如，您将如何查询以了解所有具有角色的`guest`用户`ap`？

将设计更改为以下内容：

```
user table : id, name, passord
role table: id, name
user_role join table: user_id, role_id 
```

在 JPA 术语中，您只需拥有一个`User`实体、一个`Role`实体以及`ManyToMany`这些实体之间的关联：一个用户有 0、1 个或多个角色，而一个角色由 0、1 个或多个用户持有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:02:58.963

如果您想以相对较小的二进制形式存储信息，我会选择`EnumSet`，如果您希望能够按类型查询，那么我会选择`@ElementCollection`.

# php - 如何在 URL 的值内传递 '&' 符号？

> ID：11771995
> 
> 赞同：6
> 
> 时间：2012-08-02T06:16:22.993
> 
> 标签：php, url, encoding

我正在使用变量将查询传递给我的搜索结果页面：`?s=`。

我正在测试该站点，我发现当查询中有一个`&`符号时，当我尝试检索`$_GET['s']`它时，它会被 & 符号截断。

我尝试过`&`并将其转换为`%26`，但我仍然遇到同样的问题。

如何对它们进行编码以在 URL 中传递它们？

编辑：

我指出我尝试对其进行编码，`%26`但它仍然无法正常工作。

`urlencode()`当`?s=pizza%26pasta`我得到`print_r($_GET)`：

```
Array ( [s] => pizza [pasta] => ) 
```

编辑2：

我刚刚发现问题实际上与`.htaccess`它似乎改变了“＆something =”中的“＆something”有关。不知道如何在 htaccess 中修复它。

这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /

# remove www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1%{REQUEST_URI} [R=301,QSA,NC,L]

# rewrite to action
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([^/]+)/?$ /a/?s=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T06:26:51.733

将反符号 (&) 编码为的 URL`%26`是执行此操作的正确方法。

使用`http://yoursite.com?var1=this%26that&var2=other`将导致您的`$_GET`超全局数组具有两个变量

```
$_GET['var1'] = 'this&that';
$_GET['var2'] = 'other'; 
```

您可以使用该功能[`urlencode`](http://php.net/urlencode)自动对所有需要编码的字符进行编码。这些通常是用于构成 url 组成部分的字符。即 At 符号 (@)、冒号 (:)、问号 (?) 等。

```
var_dump(urlencode('one&two'));

string(9) "one%26two" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T06:34:54.980

使用以下步骤：

1.  首先在 PHP 中构建你的字符串
2.  然后使用函数**urlencode()**正确编码您的字符串。
3.  使用**$_GET[]**时，请确保使用**urldecode()**将变量恢复为原始格式。

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T07:08:51.460

这是我构建的一个原始补丁，它获取数组并查找空白键并将它们合并到一个字符串上。它仅在传递单个变量时才有效。

```
function arrayToString($array) {
    $string = '';
    foreach ($array as $key => $value) {
        if($value) {
            $string = $string.'&'.$value;
            } else {
            $string = $string.'&'. $key;
            }
        }
    return substr($string,1,strlen($string));
    } 
```

* * *

这适用于多个变量，以防有人发现它有用：

```
 function arrayToString($array) {
        $string = '';
        foreach ($array as $key => $value) {
            if($value) {
                $string = $string.'&'.$key.'='.$value;
                } else {
                $string = $string.'&'. $key;
                }
            }
        return substr($string,1,strlen($string));
        }
    return $string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T04:49:12.087

假设您想将以下字符串发送到您的 url：

```
var1 = "1st Class Ink & Toner"
var2 = "Test1"
var3 = "test3" 
```

现在使用php，

```
var1 = urlencode(var1); left remain the same. 
```

然后将它们放入 url：[http ://url.com/x=var1&y=var2&z=var3](http://url.com/x=var1&y=var2&z=var3)

vKj