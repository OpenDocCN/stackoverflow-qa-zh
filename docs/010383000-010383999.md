# StackOverflow 问答 10383000-10383999

# ssh - FreeBSD 中的“while: 表达式语法”

> ID：10383001
> 
> 赞同：0
> 
> 时间：2012-04-30T11:33:50.393
> 
> 标签：ssh, cmd, freebsd

我的脚本有问题。我使用 FreeBSD 和 SSH 来启动这个脚本：

grep -rl '=Array.prototype.slice.call(arguments).join(""),' 。| 同时读取文件名；做 sed -i -e '$d' $FILENAME; 回声“$文件名”；完毕

当我启动时，SSH 得到错误：

**while：表达式语法。**

请帮我！！PS：对不起，我来自乌克兰的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:46:17.910

你正在使用`csh`，对吧？试试看`bash`，你发布的语法对我在 FreeBSD 上的`bash`和`sh`. `sh`是基本系统的一部分，但您可以`bash`使用`pkg_add -r bash`.

# java - 如何在 TextView 中插入“<<”文本？

> ID：10383006
> 
> 赞同：12
> 
> 时间：2012-04-30T11:34:11.707
> 
> 标签：java, android, xml

我需要在其中插入“<<”， `android:text = "<<"`但存在以下问题：

```
Multiple annotations found at this line:
    - [I18N] Hardcoded string "<<", should use @string resource
    - The value of attribute "android:text" associated with an element type "Button" must not contain the '<' 
     character. 
```

你能告诉我如何插入`<<`xml文件`TextView`文本吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T11:37:09.943

尝试`&lt;&lt;`代替`<<`. 您必须转义这些字符，因为它们会影响您的 XML 布局。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T11:38:26.603

您需要使用小于 XML 转义字符。[在此处](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)查看完整列表：

```
&lt;&lt; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T11:40:51.587

正如建议所说，使用字符串分配。在 中创建一个字符串`strings.xml`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    ..
    <string name="chevrons">&lt;&lt;</string>

</resources> 
```

然后指向`TextView`那个，像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="20sp" 
    android:text="@string/chevrons"
>
</TextView> 
```

# jquery - 自动完成（如 facebook）已放弃重复值

> ID：10383014
> 
> 赞同：3
> 
> 时间：2012-04-30T11:35:16.167
> 
> 标签：jquery, autocomplete

我在 jQuery 中使用自动完成功能（很像 Facebook）。正如我在图片中提到的，我不希望自动完成中出现重复的值。

**见演示[http://wharsojo-js.googlecode.com/files/jquery.autocompletefb-0.1.1.zip](http://wharsojo-js.googlecode.com/files/jquery.autocompletefb-0.1.1.zip)**

这是我的代码：

```
jQuery.noConflict();

        jQuery(document).ready(function()

        {

              var i=document.getElementById('autocomplete_1').innerHTML;

             var acfb =

                        jQuery("ul.first").autoCompletefb(

                        {

                            urlLookup:i.split(','),

                            deleteimgurl:"deleteimg/",

                        }

                        );  

                     jQuery("#acfb-input" ).blur(function()

                     {

                        document.getElementById('auto_complete_text').value=acfb.getData(); 

                    }); 

                 }); 
```

![在此处输入图像描述](../Images/f0f90e80061504da6d9bbe2422186636.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:18:13.480

Hiya**工作演示** [http://jsfiddle.net/Yvnfx/](http://jsfiddle.net/Yvnfx/) **或**没有警报： http: [//jsfiddle.net/Yvnfx/1/](http://jsfiddle.net/Yvnfx/1/) **处理删除以及** [http://jsfiddle.net/wbQZU/4/](http://jsfiddle.net/wbQZU/4/)

所以行为明智：如果您选择了 java，`aotocomplete`则不会在可用标签中显示 java。

关键是创建一个数组，`usedItems`然后制作一个`new array = existing array - used items`

**jQuery代码**

```
 **var usedItems = []**
:
:// then
source: function(request, response) {

      //===<> Read: build new array with = AvailableTagsArray - UsedItemArray
             var newNonDuplicatetag = $.grep(availableTags, function(el){return $.inArray(el, usedItems) == -1});

            // delegate back to autocomplete, but extract the last term
            response($.ui.autocomplete.filter(
            newNonDuplicatetag, extractLast(request.term)));
        }, 
```

**完整的 Jquery 代码**

```
$(function() {
    var usedItems = [];

    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
        ];

    function split(val) {
        return val.split(/,\s*/);
    }

    function extractLast(term) {
        return split(term).pop();
    }

    $("#tags")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function(event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
            event.preventDefault();
        }
    }).autocomplete({
        minLength: 0,
        source: function(request, response) {
             var newNonDuplicatetag = $.grep(availableTags, function(el){return $.inArray(el, usedItems) == -1}); 
            // delegate back to autocomplete, but extract the last term
            response($.ui.autocomplete.filter(
            newNonDuplicatetag, extractLast(request.term)));
        },
        focus: function() {
            // prevent value inserted on focus
            return false;
        },
        select: function(event, ui) {
            var terms = split(this.value);
            // remove the current input
            terms.pop();
            // add the selected item
            usedItems.push(ui.item.value);
            alert(usedItems[1]);
            terms.push(ui.item.value);
            // add placeholder to get the comma-and-space at the end
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
    });
}); 
```

> **更新了 Jquery 代码**（在这种情况下 - 当您删除该项目时，它应该被添加回可用标签

```
$(function() {
    var usedItems = [];

    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
        ];

    function split(val) {
        return val.split(/,\s*/);
    }

    function extractLast(term) {
        return split(term).pop();
    }

    $("#tags")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function(event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
            event.preventDefault();
        }
    }).autocomplete({
        minLength: 0,
        source: function(request, response) {

   //to handle the case when dleted We want to add the code back to available tags.
            var tempTags = $('#tags').val().split(',');
       var newNonDuplicatetag1 = $.grep(usedItems, function(el){return $.inArray(el, tempTags) != -1}); 
     // build new available tag -(minus) used tag here                                                           
      var newNonDuplicatetag = $.grep(availableTags, function(el){return $.inArray(el, newNonDuplicatetag1) == -1}); 
            // delegate back to autocomplete, but extract the last term
            response($.ui.autocomplete.filter(
            newNonDuplicatetag, extractLast(request.term)));
        },
        focus: function() {
            // prevent value inserted on focus
            return false;
        },
        select: function(event, ui) {
            var terms = split(this.value);
            // remove the current input
            terms.pop();
            // add the selected item
            usedItems.push(ui.item.value);
           // alert(usedItems[1]);
            terms.push(ui.item.value);
            // add placeholder to get the comma-and-space at the end
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
    });
});

​
​ 
```

# jquery - 使元素在动画时不可点击

> ID：10383016
> 
> 赞同：0
> 
> 时间：2012-04-30T11:35:33.593
> 
> 标签：jquery, jquery-animate, unbind, clickable, animated

我试图让一个元素在动画时不可点击。动画完成后，我希望它再次可点击。我已经搜索了很长时间以寻求有关如何实现此目的的帮助，但是我无法使其正常工作，也不知道为什么。

的HTML：

```
<p>
   <span class="red" id="a">A</span><span id="llright" class="hide">llright</span> B C D
</p> 
```

单击字母 A 时，它会向左移动，然后一些文本会在它旁边淡入。

jQuery：

```
(function() {

var letterA = $('#a'),
    llright = $('#llright');

$('#a:not(.open)').live('click', function() {
    letterA.animate({
    marginRight: "5.7in",
    }, 1300, function() {
        letterA.addClass('open');
        llright.fadeIn(1300); // Animation complete.
    });

});

$('#a.open').live('click', function() {
    llright.fadeOut(700);
    letterA.delay(700).animate({
    marginRight: "0.0in",
    }, 700, function() {
        letterA.removeClass('open');
    });

});

})(); 
```

动画效果很好，但这不是：

```
if(letterA.is(':animated')) {
    letterA.unbind('click');
}; 
```

最后一部分根本不起作用，即使我插入一个简单的 alert() 而不是 unbind() 它似乎也无法确定 A 何时移动而不是移动。

我真的可以在这里使用一些帮助，我已经尝试了我能想到的一切。

谢谢/奥斯卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:38:24.573

您的检查仅在页面加载时运行。在 click 函数内部进行检查：

```
$('#a:not(.open)').live('click', function() {
    if(!letterA.is(':animated')) {
        letterA.animate({
        marginRight: "5.7in",
        }, 1300, function() {
            letterA.addClass('open');
            llright.fadeIn(1300); // Animation complete.
        });
    }
}); 
```

此外， live() 已被弃用；考虑转到 on()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:33:06.150

只附加一个带有内部分支的单击处理程序以适应不同的情况更经济；正向动画、反向动画和在动画进行时拒绝。

您也可以通过测试状态而不使用 addClass/removeClass('open') `llright`。

这样的事情应该这样做：

```
$('#a').on('click', function() {
    var $this = $(this),
        llright = $this.next("span");
    if($this.is(":animated") || llright.is(":animated")) {
        return;//reject (no action)
    }
    if(llright.is(":visible")) { //reverse animation sequence
        llright.fadeOut(700, function(){
            $this.animate({
                marginRight: 0,
            }, 700);
        });
    }
    else {
        $this.animate({ //forward animation sequence
            marginRight: "5.7in",
        }, 1300, function() {
            llright.fadeIn(1300);
        });
    }
}); 
```

另请注意，使用此代码无需使用`.live()`.

# blackberry-os-v5 - 如何为黑莓 5.0.0 创建活动指示器？

> ID：10383017
> 
> 赞同：1
> 
> 时间：2012-04-30T11:35:35.273
> 
> 标签：blackberry-os-v5

我正在尝试为 BLACKBERRY 5.0.0 准备活动指示器，但未能成功。我正在尝试创建两个线程类，一个具有后台功能，一个具有扩展弹出屏幕的活动指示器类...但出现错误作为“线程错误太多...

请帮帮我

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T05:14:17.810

会出现这个错误是因为黑莓只支持63个线程。如果线程数超过 63，它会给出“线程过多异常”。

所以尝试使用**UiApplication.getUiApplication().invokeLater(new Runnable{})**作为活动指示器。这将有助于解决问题。

# html - 打开html中过长的目录

> ID：10383019
> 
> 赞同：0
> 
> 时间：2012-04-30T11:35:36.973
> 
> 标签：html, internet-explorer, directory

我想在单击链接时打开一个目录。我有这个片段：

```
<a href="\\Share\folder\folder\folder\folder\folder">Link</a> 
```

单击时，Internet Explorer 安全弹出，我可以单击允许。这行得通，但如果目录太长，超过 270 个字符，我得到的页面是：

```
"Internet Explorer cannot display the webpage... etc." 
```

是否有可能实现我想要的以及如何实现？

**添加：**

这是我在记事本中创建的 html 文件包含的内容

```
<p>
    30-04-2012 13:10:23 <br>
    A little test to se what happens <br>
    Characters counted 270 <br>
    <a href ="C:\Users\pham000p\Desktop">test<a/>
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:56:55.927

简单的解决方案是在服务器上添加另一个共享，让您可以直接访问其中一个深度嵌套的文件夹。

另一种解决方案是使用`mklink`：

```
mklink /d C:\folder \\Share\folder\folder\folder\folder\folder 
```

将允许您以“C:\folder”访问深度嵌套的文件夹

请注意，这`\`是 HTML URL 中的非法字符；改为使用`/`。

# batch-file - 如何从 CMake 运行 .bat 文件？

> ID：10383021
> 
> 赞同：10
> 
> 时间：2012-04-30T11:35:40.093
> 
> 标签：batch-file, cmake

如何在预链接或构建后事件中从 CMake 运行 .bat 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T12:08:00.390

你可以使用`add_custom_command`，例如

```
if(WIN32)
  add_custom_command(TARGET <Your target>
                       POST_BUILD
                       COMMAND cmd //C <path to .bat file> <ARGS> )

endif() 
```

有关`add_custom_command`运行的完整详细信息

```
cmake --help-command add_custom_command 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-03T15:16:40.450

以下也有效。如果您在 bat 脚本中读取或创建文件，请不要忘记在 bat 脚本中指定确切的路径。

```
ADD_CUSTOM_TARGET(
    myCustomTarget
    COMMAND cmd /c E:/Myfiles/mytxt.bat
)
ADD_DEPENDENCIES(myTarget myCustomTarget) 
```

myTarget 将在 myCustomTarget 之后执行。

# c - 在 vmware 下 InterlockedExchange 失败，解决方法？

> ID：10383022
> 
> 赞同：2
> 
> 时间：2012-04-30T11:35:42.110
> 
> 标签：c, winapi, vmware, esxi

一个非常简单的方法。两条线。

```
volatile __int32 p=0; 
```

一根线 (A) 只使用

```
while(1){
    ExecuteAVeryCPUIntesiveThing();
    InterlockedExchange(&p, 0);
} 
```

另一个线程 (B) 使用

```
while(1){
    if(0==InterlockedCompareExchange(&p,0,0))
        InterlockedExchange(&p, 1);
} 
```

如果有人试图在压力下的系统下记录这一点。（大量内存交换、io、socket、cpu 峰值..）来自 A 的值不会传播到 B。

在 A 中，p 的值似乎为 0。但从 B 的角度来看，p 停留在 1。在我的世界中，当 A 将值设置为 0 时，B 应该检测并将值设置为 0。在实际硬件上，它的工作原理就是这样但在 esxi 上运行时不会。

这似乎在真实硬件和某些虚拟系统下工作正常，但在 vmware 下不行。

我是不是做错了，还是……？

操作系统来宾：win2008服务器

使用 Microsoft (R) C/C++ Optimizing Compiler Version 15.00.30729.01 for x64 编译的代码

主机：esxi 4.1

更新：

对评论的回应：是的，它会在 0 和 1 之间反弹，但正如所写的，线程 B 不会反弹，因为从 p 的值永远/或在 B 的角度发生变化，它会反弹 10-20 次然后停止。

我只想在非常精确的时刻执行 A ( ExecuteAVeryCPUIntesiveThing();) 中的代码块。

生产代码充满了更多的线程和事件、互斥锁和锁，但事实仍然存在，如果我剥离并只使用上面的代码，如果我在来宾操作系统上生成大量 cpu、mm、io，我可以重现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:26:20.453

此代码是等待发生的线程竞赛。您可能从 VMWare 获得它，因为您只为虚拟机分配了一个处理器。

代码缺少的是确保线程 B*看到*更改值的互锁`p`。因此，如果线程 A 获得了一个 cpu 内核并继续运行一段时间，而线程 B 被阻塞，等待一个量子运行，那么线程 A 可以`p`多次设置为 0。线程 B 会忘记这一点，因为它从来没有机会`p`回到 1。

你需要重新考虑你的锁设计。问题不仅限于 VMWare，它也可能在普通机器上出错，只是可能性要小得多。每月出错一次，给予或接受，无法调试。否则，这是一个经典的生产者/消费者场景，您可以使用线程安全队列来解决这个问题。

# iphone - cocos2d中的弯曲标签

> ID：10383024
> 
> 赞同：1
> 
> 时间：2012-04-30T11:35:46.260
> 
> 标签：iphone, xcode, cocos2d-iphone

我是 cocos2d 的新手，我正在尝试像在 Photoshop 中一样创建效果，但它使用 CCLabelTTF。该图像可以更多地描述我正在尝试使用的要求。![弯曲标签](../Images/620a51633657c1db62b87b3848c87867.png). 我正在尝试使用动作 CCRotate 进行旋转，但无法创建相同的效果。

请帮助我用 CCLabelTTF 在 cocos2d 中获得这种效果。由于文本“MARINE”可以替换为任何文本。我不能使用 CCSprite 代替 CCLabelTTF，因为我会使用任何文本。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:55:46.093

您是否考虑过创建自己的字体类，它是 CCSprite 的子类，允许您更改比例和倾斜度？这可能是您在这里所需要的。创建一个位图字体类型的 sprite 图像库并创建一个子类，您可以将任何您想要的文本字符串传递给该子类，并使用 CCSprite 类中的图像操作获得与上述类似的结果。

我不认为 CCLabelTTF 可以做到这一点，因为它不是基于图像的。

# python - 使用 Python BadValueError 在 Google App Engine 中上传批量数据

> ID：10383026
> 
> 赞同：1
> 
> 时间：2012-04-30T11:35:49.553
> 
> 标签：python, google-app-engine, csv, uploading

上传包含大约 1300 条记录的文件时收到错误消息。问题是我看不到哪条记录有问题，甚至看不到哪个字段。我在appspot.com 的日志屏幕中没有得到任何相关信息，错误的输出如下所示。有没有办法在不必手动分解数据的情况下找出哪个记录​​有问题 - 一个 cvs 文件？

这是错误日志：

```
[DEBUG    2012-04-30 12:27:03,932 bulkloader.py] [WorkerThread-9] [151-160] Transferred 10 entities in 1.2 seconds
[DEBUG    2012-04-30 12:27:03,933 adaptive_thread_pool.py] [WorkerThread-9] WorkerThread: exiting
[ERROR    2012-04-30 12:27:03,933 adaptive_thread_pool.py] Error in WorkerThread-8: tag should be a string; received None (a NoneType):
[DEBUG    2012-04-30 12:27:03,933 adaptive_thread_pool.py] Traceback (most recent call last):
  File "/local/scratch/btd1y09/google_appengine/google/appengine/tools/adaptive_thread_pool.py", line 176, in WorkOnItems
    status, instruction = item.PerformWork(self.__thread_pool)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/tools/bulkloader.py", line 764, in PerformWork
    transfer_time = self._TransferItem(thread_pool)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/tools/bulkloader.py", line 933, in _TransferItem
    self.content = self.request_manager.EncodeContent(self.rows)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/tools/bulkloader.py", line 1394, in EncodeContent
    entity = loader.create_entity(values, key_name=key, parent=parent)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/ext/bulkload/bulkloader_config.py", line 445, in create_entity
    entity = self.dict_to_entity(input_dict, self.bulkload_state)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/ext/bulkload/bulkloader_config.py", line 147, in dict_to_entity
    self.__run_import_transforms(input_dict, instance, bulkload_state_copy)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/ext/bulkload/bulkloader_config.py", line 252, in __run_import_transforms
    value = self.__dict_to_prop(transform, input_dict, bulkload_state)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/ext/bulkload/bulkloader_config.py", line 207, in __dict_to_prop
    value = transform.import_transform(value)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/ext/bulkload/bulkloader_parser.py", line 111, in __call__
    return self.method(*args, **kwargs)
  File "/local/scratch/btd1y09/google_appengine/google/appengine/api/datastore_types.py", line 802, in __init__
    ValidateString(tag, 'tag')
  File "/local/scratch/btd1y09/google_appengine/google/appengine/api/datastore_types.py", line 164, in ValidateString
    (name, value, typename(value)))
BadValueError: tag should be a string; received None (a NoneType):

[DEBUG    2012-04-30 12:27:03,964 bulkloader.py] Waiting for progress_thread to terminate...
[DEBUG    2012-04-30 12:27:03,975 bulkloader.py] [Thread-11] ProgressTrackerThread: exiting
[DEBUG    2012-04-30 12:27:03,979 bulkloader.py] ... done.
[INFO     2012-04-30 12:27:03,979 bulkloader.py] 1210 entities total, 0 previously transferred
[INFO     2012-04-30 12:27:03,979 bulkloader.py] 190 entities (323188 bytes) transferred in 4.5 seconds
[INFO     2012-04-30 12:27:03,979 bulkloader.py] Some entities not successfully transferred 
```

我正在使用带有 bulkloader.yaml 的远程 api。

谢谢

# c# - 显示图像很短的时间

> ID：10383028
> 
> 赞同：3
> 
> 时间：2012-04-30T11:36:11.453
> 
> 标签：c#, image

我们将对感知阈值进行一些实验，并希望在很短的时间内显示图像。我说的是不到 10 毫秒（我们的屏幕支持 144 Hz，即每 6.94 毫秒一个新图像）。

但是到目前为止，我们所有的方法都失败了。我们用 C# 进行了尝试：WinForms 太慢了，WPF 更快，但我们仍然能够看到图像，甚至用 XNA 框架显示纹理对我们来说也不起作用。

您对我们有什么建议吗？我们也可以使用 C++，但我们更喜欢使用 C#，所以如果您的建议适用于 C#，我们将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:40:53.367

我强烈建议为此使用 XNA 框架。有些人可能会认为它过大了，但事实是它首先设计用于处理帧的高吞吐量，其次具有相对较小的学习曲线。

我不是游戏开发者，而是从阅读一篇文章开始，修改一个简单的项目并从头开始创建一个。

就您在问题中提到的技术而言，这可能是您最好的选择。

**更新：**关于测量图像显示的实际时间，XNA 将再次成为您最接近的猜测，而不是处理专门的硬件和诉诸低级编程。

# css - Webkit Wobble - 精灵序列错误？

> ID：10383036
> 
> 赞同：2
> 
> 时间：2012-04-30T11:36:46.433
> 
> 标签：css, animation, webkit, sprite-sheet

这是困扰我几天的事情。

我有一个用于按钮的精灵表，在悬停/单击/任何问题上播放序列都没有问题，看起来很棒（当然，链接中的图像只是一个简单的例子）。假设我还希望该序列在鼠标移出时反转，在 Firefox 中这可以正常工作。然而，在 Chrome 和 Safari 中，图像在反向播放序列时似乎“摇晃”。

[http://jsfiddle.net/SzcQn/](http://jsfiddle.net/SzcQn/)

此示例显示了问题的快速模型。尝试将鼠标悬停在图像上，它将播放序列，当您将鼠标移出时，它将反转它。在 Firefox 中这看起来不错，但在 webkit 浏览器中它会摇摆不定。

图像序列没有问题，webkit 和 moz 的代码是相同的......我只能断定这是一个错误。

显然，在这种情况下，我可以简单地包含一个额外的 15 个序列颠倒的帧……但这似乎是对资源的不必要浪费。

有谁知道解决这个问题的方法？我已经尝试过使用多个精灵表、多种激活动画的方式和不同的 webkit 动画设置......只有当它设置为从右到左播放图像时才会出现问题，即。相反。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:11:31.927

看起来像一个错误。大概。我会归档/搜索以查看是否有其他人报告过。

# f# - F# 中的 ComImport

> ID：10383041
> 
> 赞同：2
> 
> 时间：2012-04-30T11:37:05.867
> 
> 标签：f#

我正在尝试将一些代码从 C# 转换为 F#，特别是创建快捷方式的代码，从这里开始：http: [//vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/ShellLink_Code_zip_ShellLink/ShellLink_cs.asp](http://vbaccelerator.com/home/NET/Code/Libraries/Shell_Projects/Creating_and_Modifying_Shortcuts/ShellLink_Code_zip_ShellLink/ShellLink_cs.asp)

C# 中的代码如下：

```
[GuidAttribute("00021401-0000-0000-C000-000000000046")]
[ClassInterfaceAttribute(ClassInterfaceType.None)]
[ComImportAttribute()]
private class CShellLink{} 
```

我将其翻译为 F#：

```
[<GuidAttribute("00021401-0000-0000-C000-000000000046")>]
[<ClassInterfaceAttribute(ClassInterfaceType.None)>]
[<ComImportAttribute()>]
type CShellLink() = class end 
```

不幸的是，当我切换到 F# 实现时，我得到一个运行时错误：“导入中具有非零 RVA 的方法”。这似乎与此处报告的错误相同：http: [//social.msdn.microsoft.com/Forums/en-US/fsharpgeneral/thread/dada2004-5218-4089-8918-eed2464bbbcd](http://social.msdn.microsoft.com/Forums/en-US/fsharpgeneral/thread/dada2004-5218-4089-8918-eed2464bbbcd)

有什么解决方法吗？我正在尝试将应用程序移植为仅使用 F#，因此如果不能用 F# 编写该项目，则必须重新考虑该项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T22:10:25.490

这看起来像是 F# 编译器中的一个限制：它不能使用 ComImportAttribute 定义现有的 COM 类，它只适用于接口。您可以将此作为解决方法吗？

```
let shellLink = 
    let ty = System.Type.GetTypeFromCLSID (System.Guid "00021401-0000-0000-C000-000000000046")
    Activator.CreateInstance ty 
```

# python - 模糊字符串比较

> ID：10383044
> 
> 赞同：78
> 
> 时间：2012-04-30T11:37:20.063
> 
> 标签：python, nlp, fuzzy-comparison

我正在努力完成的是一个程序，它读取一个文件并根据原始句子比较每个句子。与原文完全匹配的句子将获得 1 分，完全相反的句子将获得 0 分。所有其他模糊句子将获得介于 1 和 0 之间的分数。

我不确定使用哪个操作可以让我在 Python 3 中完成此操作。

我已经包含了示例文本，其中 Text 1 是原始文本，其他前面的字符串是比较。

## 文本：示例

文本 1：那是一个黑暗而暴风雨的夜晚。我一个人坐在红色的椅子上。我并不孤单，因为我养了三只猫。

文本 20：那是一个阴暗的暴风雨之夜。我一个人坐在深红色的椅子上。我并不完全孤单，因为我有三只猫科动物//应该得分高，但不是 1

文本 21：那是一个阴暗而暴风雨的夜晚。我一个人坐在深红色的大教堂上。我并不完全孤单，因为我有三只猫科动物 // 得分应该低于文本 20

文本 22：我一个人坐在深红色的大教堂上。我并不完全孤单，因为我有三只猫科动物。这是一个阴暗而暴风雨的夜晚。// 得分应该低于文本 21 但不是 0

文本 24：那是一个黑暗而暴风雨的夜晚。我并不孤单。我没有坐在红色的椅子上。我养了三只猫。// 应该得 0 分！

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2015-02-12T01:29:16.897

有一个包叫[`fuzzywuzzy`](https://github.com/seatgeek/fuzzywuzzy). 通过 pip 安装：

```
pip install fuzzywuzzy 
```

简单用法：

```
>>> from fuzzywuzzy import fuzz
>>> fuzz.ratio("this is a test", "this is a test!")
    96 
```

该软件包建立在`difflib`. 你问为什么不直接使用它？除了更简单之外，它还有许多不同的匹配方法（如令牌顺序不敏感、部分字符串匹配），使其在实践中更加强大。这些`process.extract`函数特别有用：从一组中找到最匹配的字符串和比率。从他们的自述文件中：

> 部分比率

```
>>> fuzz.partial_ratio("this is a test", "this is a test!")
    100 
```

> 令牌排序率

```
>>> fuzz.ratio("fuzzy wuzzy was a bear", "wuzzy fuzzy was a bear")
    90
>>> fuzz.token_sort_ratio("fuzzy wuzzy was a bear", "wuzzy fuzzy was a bear")
    100 
```

> 代币集比率

```
>>> fuzz.token_sort_ratio("fuzzy was a bear", "fuzzy fuzzy was a bear")
    84
>>> fuzz.token_set_ratio("fuzzy was a bear", "fuzzy fuzzy was a bear")
    100 
```

> 过程

```
>>> choices = ["Atlanta Falcons", "New York Jets", "New York Giants", "Dallas Cowboys"]
>>> process.extract("new york jets", choices, limit=2)
    [('New York Jets', 100), ('New York Giants', 78)]
>>> process.extractOne("cowboys", choices)
    ("Dallas Cowboys", 90) 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2012-04-30T12:13:28.407

标准库中有一个模块（称为[`difflib`](http://docs.python.org/library/difflib.html)），可以比较字符串并根据它们的相似性返回一个分数。[`SequenceMatcher`](http://docs.python.org/library/difflib.html#sequencematcher-objects)班级应该做你想做的事。

来自 Python 提示的小例子：

```
>>> from difflib import SequenceMatcher as SM
>>> s1 = ' It was a dark and stormy night. I was all alone sitting on a red chair. I was not completely alone as I had three cats.'
>>> s2 = ' It was a murky and stormy night. I was all alone sitting on a crimson chair. I was not completely alone as I had three felines.'
>>> SM(None, s1, s2).ratio()
0.9112903225806451 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-07-11T21:19:18.733

[`fuzzyset`](https://pypi.python.org/pypi/fuzzyset)索引和搜索都比`fuzzywuzzy`( )快得多。`difflib`

```
from fuzzyset import FuzzySet
corpus = """It was a murky and stormy night. I was all alone sitting on a crimson chair. I was not completely alone as I had three felines
    It was a murky and tempestuous night. I was all alone sitting on a crimson cathedra. I was not completely alone as I had three felines
    I was all alone sitting on a crimson cathedra. I was not completely alone as I had three felines. It was a murky and tempestuous night.
    It was a dark and stormy night. I was not alone. I was not sitting on a red chair. I had three cats."""
corpus = [line.lstrip() for line in corpus.split("\n")]
fs = FuzzySet(corpus)
query = "It was a dark and stormy night. I was all alone sitting on a red chair. I was not completely alone as I had three cats."
fs.get(query)
# [(0.873015873015873, 'It was a murky and stormy night. I was all alone sitting on a crimson chair. I was not completely alone as I had three felines')] 
```

警告：小心不要在你的模糊集中混合`unicode`和`bytes`。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-11-23T02:40:05.810

该任务称为[释义识别](https://aclweb.org/aclwiki/index.php?title=Paraphrase_Identification_(State_of_the_art))，这是自然语言处理研究的一个活跃领域。我已经链接了几篇最先进的论文，其中许多你可以在 GitHub 上找到开源代码。

请注意，所有已回答的问题都假设两个句子之间存在一些字符串/表面相似性，而实际上两个字符串相似性很小的句子在语义上可能是相似的。

如果您对这种相似性感兴趣，可以使用[Skip-Thoughts](https://github.com/ryankiros/skip-thoughts)。根据 GitHub 指南安装软件并转到自述文件中的释义检测部分：

```
import skipthoughts
model = skipthoughts.load_model()
vectors = skipthoughts.encode(model, X_sentences) 
```

这会将您的句子（X_sentences）转换为向量。稍后您可以通过以下方式找到两个向量的相似性：

```
similarity = 1 - scipy.spatial.distance.cosine(vectors[0], vectors[1]) 
```

我们假设向量 [0] 和向量[1是 X_sentences[0]、X_sentences](https://aclweb.org/aclwiki/index.php?title=Paraphrase_Identification_(State_of_the_art)) [1](https://aclweb.org/aclwiki/index.php?title=Paraphrase_Identification_(State_of_the_art))的对应向量，您想找到它们的分数。

还有其他模型可以将句子转换为向量，您可以在[此处](https://aclweb.org/aclwiki/index.php?title=Paraphrase_Identification_(State_of_the_art))找到。

一旦你将你的句子转换成向量，相似度只是找到这些向量之间的余弦相似度的问题。

**2020 年更新**谷歌发布了 一款名为[BERT](https://github.com/google-research/bert)的新模型，它基于一个名为 Tensorflow 的深度学习框架。还有一个许多人觉得更容易使用的实现，称为[Transformers](https://github.com/huggingface/transformers). 这些程序所做的是，它们接受两个短语或句子，并且能够训练它们说出这两个短语/句子是否相同。要训​​练它们，您需要一些标签为 1 或 0 的句子（如果它们具有相同的含义或不同）。您使用您的训练数据（已经标记的数据）训练这些模型，然后您将能够使用经过训练的模型来预测一对新的短语/句子。[您可以在它们相应的 github 页面或许多其他地方（例如这里](https://www.kaggle.com/deepaksinghrawat/finetuning-bert-on-mrpc-corpus-using-fastai)）找到如何训练（他们称之为微调）这些模型。

也有可用的英文标记训练数据，称为 MRPC（微软释义识别语料库）。请注意，BERT 也存在多语言或特定语言版本，因此该模型也可以在其他语言中扩展（例如训练）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-01T00:22:29.743

还有这个由 MIT 授权的快速准确的模糊比较库： [https ://github.com/maxbachmann/RapidFuzz](https://github.com/maxbachmann/RapidFuzz)

# magento - 在 Magento 中获取当前模块和页面标识符？

> ID：10383047
> 
> 赞同：8
> 
> 时间：2012-04-30T11:37:36.007
> 
> 标签：magento

我需要在 Magento 中获取当前页面标识符和当前模块。

我使用了下面的代码。

```
Mage::app()->getRequest()->getModuleName() - To get current module.
Mage::getSingleton('cms/page')->getIdentifier() - To get current page 
```

它一旦清除 magento 缓存就可以工作，否则它会显示旧页面和模块。

## 例子：

当我们签入主页时，它会将“cms”作为模块，将“home”作为页面。现在我点击联系页面现在也显示相同的结果。

清除缓存并检查联系人页面后，它显示“cms”作为模型，“联系人”作为页面标识符。

如何在每次没有清除缓存的情况下获取当前页面标识符和模块？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T07:34:08.817

获取当前模块：

```
Mage::app()->getFrontController()->getRequest()->getModuleName() 
```

获取当前 CMS 页面：

```
Mage::getSingleton('cms/page')->getIdentifier() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-17T11:12:59.293

```
 $pageID = Mage::getBlockSingleton('cms/page')->getPage()->getIdentifier(); 
```

这将返回当前 cms 页面标识符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-28T07:34:00.293

要获取当前页面的正确标识符和 URL：

```
if (!in_array(Mage::app()->getFrontController()->getAction()->getFullActionName(), array('cms_index_noRoute', 'cms_index_defaultNoRoute'))) {
    $Identifier =  Mage::app()->getFrontController()->getRequest()->getModuleName();
    $currentUrl = Mage::helper('core/url')->getCurrentUrl();
}
$Identifier = strtolower($Identifier);
if($Identifier == 'cms'){   
    $Identifier = Mage::getSingleton('cms/page')->getIdentifier();
}
echo $Identifier = strtolower($Identifier).'<br>'.$currentUrl; 
```

这在很多情况下对我有用。希望这会对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-30T15:43:28.970

您很可能需要将构造函数覆盖到您想要的块中，例如：`Mage_Catalog_Block_Navigation`

所以，你的 _constrct()

```
protected function _construct()
    {
        $this->addData(array(
            'cache_lifetime'    => false,
            'cache_tags'        => array(Mage_Catalog_Model_Category::CACHE_TAG, Mage_Core_Model_Store_Group::CACHE_TAG),
        ));
    } 
```

应该只是：

```
protected function _construct() {} 
```

# xcode - XCode 中的输出（控制台）屏幕消失了吗？

> ID：10383050
> 
> 赞同：1
> 
> 时间：2012-04-30T11:37:45.917
> 
> 标签：xcode

对，我不知道刚刚发生了什么，输出屏幕没有显示在我的 XCode 上。

![在此处输入图像描述](../Images/fd84b8cf294da224c88ef9c7db90aee4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:24:43.743

选择右上角的第二个选项，显示为**View**并且你完成了:)

![在此处输入图像描述](../Images/98cc6efff4e1fe1060cd9ff6f4841262.png)

# c# - 如果文件不存在则创建文件

> ID：10383053
> 
> 赞同：89
> 
> 时间：2012-04-30T11:37:50.507
> 
> 标签：c#, streamwriter

如果文件不存在，我需要让我的代码读取创建其他附加。现在它正在读取它是否存在创建和附加。这是代码：

```
if (File.Exists(path))
{
    using (StreamWriter sw = File.CreateText(path))
    { 
```

我会这样做吗？

```
if (! File.Exists(path))
{
    using (StreamWriter sw = File.CreateText(path))
    { 
```

编辑：

```
string path = txtFilePath.Text;

if (!File.Exists(path))
{
    using (StreamWriter sw = File.CreateText(path))
    {
        foreach (var line in employeeList.Items)
        {
            sw.WriteLine(((Employee)line).FirstName);
            sw.WriteLine(((Employee)line).LastName);
            sw.WriteLine(((Employee)line).JobTitle);
        }
    }
}
else
{
    StreamWriter sw = File.AppendText(path);

    foreach (var line in employeeList.Items)
    {
        sw.WriteLine(((Employee)line).FirstName);
        sw.WriteLine(((Employee)line).LastName);
        sw.WriteLine(((Employee)line).JobTitle);
    }
    sw.Close();
} 
```

}

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-04-30T11:42:47.330

你可以简单地打电话

```
using (StreamWriter w = File.AppendText("log.txt")) 
```

如果文件不存在，它将创建文件并打开文件进行追加。

编辑：

这就足够了：

```
string path = txtFilePath.Text;               
using(StreamWriter sw = File.AppendText(path))
{
  foreach (var line in employeeList.Items)                 
  {                    
    Employee e = (Employee)line; // unbox once
    sw.WriteLine(e.FirstName);                     
    sw.WriteLine(e.LastName);                     
    sw.WriteLine(e.JobTitle); 
  }                
} 
```

但是如果你坚持先检查，你可以做这样的事情，但我不明白这一点。

```
string path = txtFilePath.Text;               

using (StreamWriter sw = (File.Exists(path)) ? File.AppendText(path) : File.CreateText(path))                 
{                      
    foreach (var line in employeeList.Items)                     
    {                         
      sw.WriteLine(((Employee)line).FirstName);                         
      sw.WriteLine(((Employee)line).LastName);                         
      sw.WriteLine(((Employee)line).JobTitle);                     
    }                  
} 
```

此外，要在您的代码中指出的一件事是您正在做很多不必要的拆箱。如果您必须使用一个普通的（非通用）集合，如`ArrayList`，则将对象拆箱一次并使用引用。

但是，我更喜欢`List<>`用于我的收藏：

```
public class EmployeeList : List<Employee> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-30T11:44:09.970

或者：

```
using FileStream fileStream = File.Open(path, FileMode.Append);
using StreamWriter file = new StreamWriter(fileStream);
// ... 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-04-30T11:41:45.727

您甚至不需要手动进行检查，File.Open 会为您完成。尝试：

```
using (StreamWriter sw = new StreamWriter(File.Open(path, System.IO.FileMode.Append))) 
{ 
```

参考：http: [//msdn.microsoft.com/en-us/library/system.io.filemode.aspx](http://msdn.microsoft.com/en-us/library/system.io.filemode.aspx)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T11:40:22.820

`File.Exists(path)`是的，如果要检查文件*是否不*存在，则需要否定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-25T21:04:29.837

**2021**

只需使用[File.AppendAllText](https://docs.microsoft.com/en-us/dotnet/api/system.io.file.appendalltext?view=net-5.0)，如果文件不存在，它会创建文件：

```
File.AppendAllText("myFile.txt", "some text"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-25T07:25:20.283

例如

```
 string rootPath = Path.GetPathRoot(Environment.GetFolderPath(Environment.SpecialFolder.System));
        rootPath += "MTN";
        if (!(File.Exists(rootPath)))
        {
            File.CreateText(rootPath);
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-31T12:53:14.183

```
private List<Url> AddURLToFile(Urls urls, Url url)
{
    string filePath = @"D:\test\file.json";
    urls.UrlList.Add(url);

    //if (!System.IO.File.Exists(filePath))
    //    using (System.IO.File.Delete(filePath));

    System.IO.File.WriteAllText(filePath, JsonConvert.SerializeObject(urls.UrlList));

    //using (StreamWriter sw = (System.IO.File.Exists(filePath)) ? System.IO.File.AppendText(filePath) : System.IO.File.CreateText(filePath))
    //{
    //    sw.WriteLine(JsonConvert.SerializeObject(urls.UrlList));
    //}
    return urls.UrlList;
}

private List<Url> ReadURLToFile()
{
    //  string filePath = Path.Combine(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location), @"App_Data\file.json");
    string filePath = @"D:\test\file.json";

    List<Url> result = new List<Url>(); ;
    if (!System.IO.File.Exists(filePath))
        using (System.IO.File.CreateText(filePath)) ;

    using (StreamReader file = new StreamReader(filePath))
    {
        result = JsonConvert.DeserializeObject<List<Url>>(file.ReadToEnd());
        file.Close();
    }
    if (result == null)
        result = new List<Url>();

    return result;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-13T09:00:31.007

这对我也有效

```
string path = TextFile + ".txt";

if (!File.Exists(HttpContext.Current.Server.MapPath(path)))
{
    File.Create(HttpContext.Current.Server.MapPath(path)).Close();
}
using (StreamWriter w = File.AppendText(HttpContext.Current.Server.MapPath(path)))
{
    w.WriteLine("{0}", "Hello World");
    w.Flush();
    w.Close();
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-07T10:50:50.593

这将启用使用 StreamWriter 附加到文件

```
 using (StreamWriter stream = new StreamWriter("YourFilePath", true)) {...} 
```

这是默认模式，不会附加到文件并创建新文件。

```
using (StreamWriter stream = new StreamWriter("YourFilePath", false)){...}
                           or
using (StreamWriter stream = new StreamWriter("YourFilePath")){...} 
```

无论如何，如果您想检查文件是否存在然后做其他事情，您可以使用

```
using (StreamWriter sw = (File.Exists(path)) ? File.AppendText(path) : File.CreateText(path))
            {...} 
```

# c++ - pthread_mutex 锁是否提供比用户在代码中施加的内存屏障更高的性能

> ID：10383055
> 
> 赞同：2
> 
> 时间：2012-04-30T11:38:01.280
> 
> 标签：c++, performance, pthreads, asmx, mutex

**问题背景**

有问题的代码与 C++ 实现有关。我们有代码库，对于某些关键实现，我们确实使用`asm volatile ("mfence":"memory")`.

我对记忆障碍的理解是——

*   它用于确保指令集的完整/有序执行。
*   它将有助于避免经典的[线程同步问题 - Wiki 链接](http://en.wikipedia.org/wiki/Memory_barrier#An_illustrative_example)。

**问题**

*   如果我们使用内存围栏来避免线程同步问题，是否`pthread_mutext`比内存屏障更快？我已阅读表明[pthread mutex 使用内存同步](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_11)的内容。

* * *

PS：

*   在我们的代码中，在`asm volatile ("mfence":"memory")`10-15 行 c++ 代码（成员函数）之后使用了。所以我的疑问是 - 可能是内存同步的多文本实现在用户实现的代码中提供了比 MB 更好的性能（wrt 范围为 MB）。

*   我们正在使用具有四核处理器的 SUSE Linux 10、2.6.16.46、smp#1、x64_86。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:03:38.853

pthread 互斥体保证比内存栅栏指令慢（我不能说慢了多少，这完全取决于平台）。原因很简单，为了成为兼容的 posix 互斥锁，它们必须包括内存保证。posix 互斥体具有强大的内存保证，因此我无法看到如果没有这样的栅栏*它们将如何实现。

如果您正在寻找实用的建议，我在许多地方使用栅栏而不是互斥锁，并且经常对它们进行计时。与原始内存栅栏相比，Linux 上的 pthread_mutexes 非常慢（当然，它们做得更多，所以要小心你实际比较的内容）。

但是请注意，某些原子操作，特别是 C++11 中的那些，可以而且肯定会比你使用栅栏更快。在这种情况下，编译器/库理解架构并且不需要使用完整的栅栏来提供内存保证。

另请注意，我说的是锁本身的低级性能。您需要分析到纳秒级。

*可以想象一个互斥系统忽略某些类型的内存并选择更宽松的锁定实现（例如依赖正常内存的排序保证并忽略特殊标记的内存）。然而，我认为这样的实现是无效的。

# css - div、侧栏和内容的位置

> ID：10383059
> 
> 赞同：4
> 
> 时间：2012-04-30T11:38:04.217
> 
> 标签：css

我有一个站点，其中有几个不同的左右容器选项和一个中心。

*   左侧 div 的大小始终相同，但有时不会显示。
*   右边有 3 个选项，小、正常或宽。一次只会显示一个右侧，但有时没有。
*   中心应调整到左侧和右侧，尽可能多地占用空间，但不要将右侧 div 推到新行（就像宽度：100% 一样）

这是可能吗？只拥有一个 div，做你想做的事而不必告诉它怎么做？

如果我的解释不清楚，我在 Fiddle 中做了一个例子：http: [//jsfiddle.net/WDZFx/13/](http://jsfiddle.net/WDZFx/13/)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:54:30.293

使用百分比而不是指定左/中/右的单独宽度：

将您的 CSS 修改为：

```
#Wrap { 
    width:100%; 
}
#Left { 
    width: 10%; 
    float:left; 
    background-color:pink; 
}
#Center { 
    width: 30%; 
    float:left; 
    background-color:beige; 
}

#Right { 
    width:60%; 
    float:left; 
    background-color:silver; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:50:15.707

Jennica，这里有一个示例[http://jsfiddle.net/uQ4TH/](http://jsfiddle.net/uQ4TH/)，但它和我之前提到的问题一样，中心的只会根据内容扩展，尽管最大可能是 50%；

# operators - 为什么 Io REPL 和解释器给我两个不同的值？

> ID：10383065
> 
> 赞同：2
> 
> 时间：2012-04-30T11:38:27.550
> 
> 标签：operators, read-eval-print-loop, iolanguage

考虑这段代码：

```
OperatorTable addOperator(":", 2)

: := method(value,
  list(self, value)
)

hash := "key": "value"
hash println 
```

返回应该是`list(key, value)`，并且在 Io REPL 中使用它时，这正是返回值。使用解释器时（如`io somefile.io`），返回的值为`value`。经过一番检查，区别就在这里：

```
# In the REPL
OperatorTable addOperator(":", 2)
message("k" : "v") # => "k" :("v")

# Via the Interpreter
OperatorTable addOperator(":", 2)
message("k" : "v") # => "k" : "v" 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:48:32.137

文件执行发生在以下阶段：

*   加载文件
*   根据当前算子表替换算子
*   执行内容

因此，只有在第 2 阶段最初加载文件时才会发生运算符到消息的转换。在第 3 阶段执行运算符注册代码时。这已经发生，因此运算符无效。

您可以设置手动加载文件的顺序，并将运算符定义放在加载的第一个文件中。例如，有一个名为的文件`operators.io`，其中包括在使用它们的文件之前加载的所有运算符定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:14:42.357

通过勾选确认后，我得出了以下解决方案：

主.io：

```
doFile("ops.io")
doFile("script.io") 
```

操作.io：

```
OperatorTable addOperator(":", 2)
: := method(value,
            list(self, value)) 
```

脚本.io：

```
hash := "key": "value"
hash println 
```

就像打勾解释的那样，整个文件是一次加载的，所以你必须把它分开，这样加载顺序才能保证操作符可用。

# php - 通过使用 php-script 下载为 Android App 使用数据库

> ID：10383066
> 
> 赞同：0
> 
> 时间：2012-04-30T11:38:30.407
> 
> 标签：php, android, database, sqlite, download

我要疯了！也许有人可以帮助我？！我在正在运行的服务器上有一个 sqlite 数据库，由于 php 脚本而收到该数据库。（为了清楚起见：我正在调用一个 php 脚本，它为我提供数据库作为响应）。有了响应，我现在尝试将其“解析”为常规的 *.db 文件，稍后我将其用于我的应用程序。

该应用程序运行良好，同时将 *.db 放入 assets 文件夹中。但是每次调用应用程序时我都需要获取更新的数据库。因此我需要以某种方式从服务器接收它。

只是为了通知：我不知道他们为什么为此使用 php 脚本，但它与应用程序的 iOS 版本完美配合。所以我 100% 确定脚本确实有效。

有任何提示或解决方案吗？谢谢！

编辑：这就是我想要做的。private void copyDatabase() { InputStream myInputDB = null; 输出流 myOutputDB = null; HttpResponse 响应 = null; // 刚刚创建的空数据库的路径 String dbFilePath = DB_PATH + KeyConstants.DB_NAME;

```
 // Creating HTTP client
    HttpClient httpClient = new DefaultHttpClient();
    // Creating HTTP Post
    HttpPost httpPost = new HttpPost(
            "http://USERNAME:PASSWORD@ADRESS/u/db.php");

    try {
        response = httpClient.execute(httpPost);

        //Open your local db as the input stream
        myInputDB = response.getEntity().getContent();

        //Open the empty db as the output stream
        myOutputDB = new FileOutputStream(dbFilePath);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInputDB.read(buffer)) > 0){
            myOutputDB.write(buffer, 0, length);
        }

        //Close the streams
        myOutputDB.flush();
        myOutputDB.close();
        myInputDB.close();

    } catch (IOException ioEXC) {
        throw new Error("Problem copying database from resource file.");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:44:37.653

你有什么问题？使用 Android 应用程序还是使用 PHP 脚本？

我不明白为什么会有整个数据库文件请求响应而不仅仅是数据（在一些懒惰的阅读中更好），但这与您的情况无关。

如果您需要在每次运行时“下载”所有数据库，您应该调用并实现一些方法来执行此操作 - 在第一个 Activity 中，在 onCreate() 方法中调用此方法。您可以在此 Activity 中创建一个简单的方法，或者以更好的方法为此创建一个简单的类，该类将被实例化，并在第一个 Activity 的 onCreate() 中调用其方法。

但也许我只是不明白你的问题......

编辑：尝试通读这个问题：[我可以在 /sdcard 上下载一个 SQLite 数据库并从我的 Android 应用程序访问它吗？](https://stackoverflow.com/questions/1055188/can-i-download-an-sqlite-db-on-sdcard-and-access-it-from-my-android-app)

# objective-c - 在 iOS 上，有没有更快的方法来获取 mainBundle 资源的 URL？

> ID：10383067
> 
> 赞同：3
> 
> 时间：2012-04-30T11:38:31.593
> 
> 标签：objective-c, ios, cocoa-touch, foundation

我们必须使用这么长的路才能到达文件的路径，这似乎有点奇怪：

```
NSURL *soundURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                            pathForResource:@"0" ofType:@"aiff"]]; 
```

我想知道有没有更快的方法，例如`NSURL`or的类方法`NSBundle`？

```
NSURL *soundURL = [NSURL urlFromMainBundle:@"0.aiff"]; 
```

或者

```
NSURL *soundURL = [NSBundle urlFromMainBundle:@"0.aiff"]; 
```

如果不是，是否有理由说明它不是一个好的形式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T11:44:49.407

怎么样：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"0" withExtension:@"aiff"]; 
```

从那里开始，您还可以为`NSURL`or编写一个类别`NSBundle`：

```
@interface NSURL (NSURL+Resource)
+ (NSURL *)URLForResource:(NSString *)resource;
@end

@implementation NSURL (NSURL+Resource)

+ (NSURL *)URLForResource:(NSString *)resource
{
   NSString *name = [resource stringByDeletingPathExtension];
   NSString *extension = [resource pathExtension];

   return [[NSBundle mainBundle] URLForResource:name withExtension:extension];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:44:22.027

您可以[`URLForResource:withExtension:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/URLForResource%3awithExtension%3a)在`NSBundle`课堂上使用：

```
NSURL *soundURL = [[NSBundle mainBundle]URLForResource:@"0" withExtension:@"aiff"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:47:10.413

你可以试试：

```
NSURL *soundURL = [[NSBundle mainBundle]URLForResource:@"0" withExtension:@"aiff"]; 
```

# objective-c - 如何检查uibutton的标题

> ID：10383069
> 
> 赞同：0
> 
> 时间：2012-04-30T11:38:41.247
> 
> 标签：objective-c, ios, cocoa-touch

```
NSString *title=btn.titleLabel.text; 

NSLog(@"Title=%@",title); 

if(title == @"SelectCategory") 
{
    //alert    
}
else
{
    //somecode
} 
```

我想检查 UIButton 的标题。但是我的代码总是执行 else 语句。

这段代码有什么错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:41:24.397

永远不要使用 '==' 比较两个字符串，使用[isEqualToString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_)

```
if ([title isEqualToString:@"SelectCategory"]){
   //alert
}else{
   //somecode
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:43:02.853

试试这条线：

```
If([btn.titleLabel.text isEqualToString:@"Your text"])
{
//do this
}
else
{
//do this
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T12:00:09.120

```
NSString *title=[btn currentTitle];

if([title isEqualToString:@"SelectCategory"])
{
  NSLog(@"Equal");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T11:41:14.577

采用

```
if ([title isEqualToString:@"SelectCategory"]) {} 
```

而不是`==`运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T11:42:22.143

使用 bun.title is Equalto:@"" 它会为你工作。欢迎

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T11:47:28.877

永远不要使用`==`比较字符串，因为`==`您正在检查一个字符串的指针是否与另一个字符串相同，这不是您想要的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-30T11:47:42.370

试试这个

```
UIButton *YourButton=btn;    

if([[YourButton titleForState:UIControlStateNormal] isEqualToString:@"SelectCategory"])
{
        // normal
}
else if([[YourButton titleForState:UIControlStateHighlighted] isEqualToString:@"SelectCategory"])
{
        //highlighted
}
else if([[YourButton titleForState:UIControlStateSelected] isEqualToString:@"SelectCategory"])
{
        //selected
}
else
{
        //somecode
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T12:03:52.587

不能使用 比较两个字符串或两个对象`==`。要比较两个对象，您应该使用`isEqual`.

在这种情况下 ：

```
if([stringToBeCompared isEqualToString:@"comparestring"])
{
   //statement
} 
```

# javascript - 如何检索 Google Maps 客户端 ID？

> ID：10383070
> 
> 赞同：-2
> 
> 时间：2012-04-30T11:38:41.840
> 
> 标签：javascript, google-maps

我复制此代码以使用 java 脚本中的地图创建我的第一个程序

```
<script src="http://maps.googleapis.com/maps/api/js?client=gme-&sensor=false&v=3.7" type="text/javascript"></script> 
```

当我运行这个程序时，我收到错误消息：

> Google 已禁用此应用程序的 Maps API。本网站无权使用所提供的 Google 地图客户端 ID。如果您是此应用程序的所有者，您可以在此处了解有关注册 URL 的更多信息：[http ://code.google.com/apis/maps/documentation/premier/guide.html#URLs](http://code.google.com/apis/maps/documentation/premier/guide.html#URLs)

我看到我需要将参数客户端添加到链接中。

我如何知道我的客户的 ID 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:42:27.960

从您链接到的页面：

> 注册 Google Maps API for Business 时，您会从 Google Enterprise Support 收到此客户端 ID。

# css - divs垂直放置而不是水平放置php css3

> ID：10383073
> 
> 赞同：0
> 
> 时间：2012-04-30T11:38:56.727
> 
> 标签：css

我的平台 div（根据数据库中的行有几个正方形）内部有 3 个子 div，它们垂直放置在包装 div 内，而不是水平放置。我将平台 div 以及它的 3 个孩子的“-webkit-box-orient”设置为水平，但我没有让它工作。谢谢你的小费！爱好

```
<div id="wrapper">

<?php
$platforms = get_platforms();

foreach ($platforms as $platform)
{
echo 
'<div class="platform">
    <div class="platform_left"></div>
        <div class="platform_middle"></div>
        <div class="platform_right"></div>
    </div>';
}
?>

</div>

//And here is the css:

#wrapper{
max-width: 960px;
margin: 180px 0px;
border: 1px solid black;
background:-webkit-radial-gradient(top,#99CCFF,#E6F0FF);
display: -webkit-box;
-webkit-box-orient: vertical;
-webkit-box-flex: 1;
background:-moz-radial-gradient(top,#99CCFF,#E6F0FF);
display: -moz-box;
-moz-box-orient: vertical;
-moz-box-flex: 1;
}

.platform{
border: 1px solid blue;
margin: 30px 30px 0px 30px;
width: 435px;
height: 180px;
background: #99CCFF;
-webkit-border-radius: 5px;
-webkit-box-shadow: rgba(110, 110, 100, .7) 8px 8px 8px;
-moz-border-radius: 5px;
-moz-box-shadow: rgba(110, 110, 100, .7) 8px 8px 8px;
display: -webkit-box;
display: -moz-box;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:45:44.010

od div.platform 中的 div 与它们的父级 (div.platform) 具有相同的宽度

你必须设置它们`width: 33%`（或者更少，以防你想使用边框、边距和填充），然后将`float`属性设置为**left**。

无需编辑 PHP 部分

W3c 说：

> 任何主流浏览器都不支持 box-orient 属性。

*对不起我的英语不好*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T19:29:32.277

如果你的数学是正确的，一定有其他的干扰。您使用的是 CMS 还是其他可能有一些底层 CSS 的东西？有时我发现不仅检查一个元素而且在打开元素检查器的情况下将鼠标悬停在一个元素上很有帮助（如果你不知道我在说什么，请确保你在 Firefox 中有类似 Firebug 的东西，或者右键单击元素以在 Chrome 中检查它）——这将显示元素的真实尺寸。还要看“计算风格”。

如果您看到不期望的宽度，请继续往上走并检查每个元素，直到找到具有意外宽度的元素。

在使用底层框架设计网站主题时，我经常遇到这个问题。如果你的包装器内的数学是正确的，那么有些东西正在挤压包装器 div 的尺寸。还要寻找排水沟 - 来自另一个样式表的意外填充或边距。

# android - Android DatePickerDialog 产生不正确的值

> ID：10383075
> 
> 赞同：0
> 
> 时间：2012-04-30T11:39:08.883
> 
> 标签：android, android-datepicker

我目前的问题是从 DatePickerDialog 获得的值在我将它们发送到 Date 构造函数时没有得到正确解析。

获取日期值（根据[另一篇文章](https://stackoverflow.com/questions/8825189/android-using-data-out-of-datepicker)的建议）....

```
private DatePickerDialog.OnDateSetListener listener = new DatePickerDialog.OnDateSetListener() {
    @Override
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        mYear = year;
        mMonth = monthOfYear + 1;
        mDayOfMonth = dayOfMonth;
        String t = "listener => mYear=" + mYear + "; mMonth=" + mMonth +
                "; mDayOfMonth=" + mDayOfMonth + ";";
        Log.i(TAG, t);
    }
}; 
```

上面的日志语句产生：

```
04-30 21:34:10.548: I/TodosActivity(29510): listener => mYear=2012; mMonth=5; mDayOfMonth=2; 
```

日期是用......

```
todo.setDueDate(new Date(mYear, mMonth, mDayOfMonth)); 
```

我验证了到期日......

```
String t = "setNewDueDate(Todo) => #" + todo.getId() + ": " + todo.getTitle() + " (" +
            todo.getText() + "). Created on " + format.format(todo.getCreatedDate()) +
            ". Last modified on " + format.format(todo.getModifiedDate()) +
            ". Due on " + format.format(todo.getDueDate()) + ".";
Log.i(TAG, t); 
```

这导致....

```
04-30 21:34:05.703: I/TodosActivity(29510): setNewDueDate(Todo) => #1: Test (Test). Created on 30 Apr 2012 20:07:51\. Last modified on 30 Apr 2012 20:55:27\. Due on 31 Dec 1899 00:00:00. 
```

**编辑：**

设置初始 DatePickerDialog 值...

```
 return new DatePickerDialog(this, listener, cal.get(Calendar.YEAR),
                cal.get(Calendar.MONTH), cal.get(Calendar.DAY_OF_MONTH)); 
```

有什么我应该/不应该做的事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:55:46.503

使用`Calendar`和它上面的各种`set()`方法来更新日期。

例如，[这个示例项目](https://github.com/commonsguy/cw-android/tree/master/Fancy/Chrono)的代码如下：

```
 DatePickerDialog.OnDateSetListener d=new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,
                          int dayOfMonth) {
      dateAndTime.set(Calendar.YEAR, year);
      dateAndTime.set(Calendar.MONTH, monthOfYear);
      dateAndTime.set(Calendar.DAY_OF_MONTH, dayOfMonth);
      updateLabel();
    }
  }; 
```

哪里`dateAndTime`是`Calendar`。

# java - 使用 PHP 客户端使用 Java RESTFul Web 服务

> ID：10383077
> 
> 赞同：2
> 
> 时间：2012-04-30T11:39:11.610
> 
> 标签：java, php, web-services, rest, tomcat

我在开发将使用在 NetBeans 7.1.1 中创建的 Java RESTful 服务的 PHP 客户端时遇到了一些问题。

对于那些不知道的人：当您创建基于 MySQL 数据库（实体）的 Java RESTful Web 服务时，NetBeans 将自动创建实体类和每个实体“门面”，可以称为服务提供者.

我使用 Java RESTful Web 服务服务器和 Java RESTful 客户端开发了一个 Web 应用程序，该客户端通过 Jersey 和 Servlet 使用 Web 服务。

现在到一个计划好的 PHP 客户端：我已经用谷歌搜索了很多，我看到的是：没有互操作性（或者我是“菜鸟”），这是 Web 服务的目的之一。我知道如何在 PHP 中创建 RESTful Web 服务，并与 PHP 客户端通信，Java 也是如此，但我想要的是创建 Java RESTful Web 服务服务器和 php 客户端。

对不起，如果我在这个问题上说错了，请随时纠正我。

如果有人可以帮助我，给我一些想法，代码示例，解释“诀窍”，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-06T14:40:33.720

这是一个比较容易解决的问题。对于企业应用程序，我已经为这个相同的解决方案建模。Java 层将 CXF RESTful Web 服务映射到 SOAP 端点（外部系统）以及实体对象（通过 Hibernate/IBatis 映射）的混合。使用 CXF 休息层相当简单。在 PHP 中，我绝对推荐使用 Guzzle 客户端。

/** 使用 REST 服务 **/

```
$client = new Client("http://example.com/);

$locationRequest = $client->get('/someservice/rest/location/findstatebyzip.json?zip=12345');
$locationResponse = $locationRequest->send();

$locationResults = json_decode($locationResponse->getBody()); 
```

Guzzle Client 的优点在于您不需要启用/安装 CURL，它可以使用其他传输机制。

# vhdl - 如何重新编译 GHDL 源代码

> ID：10383078
> 
> 赞同：-3
> 
> 时间：2012-04-30T11:39:14.357
> 
> 标签：vhdl, ghdl

请给我在源代码中编辑特定文件后如何重新编译GHDL源代码的步骤？提前致谢。问候拉古

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:30:56.113

[获取来源](http://ghdl.free.fr/site/pmwiki.php?n=Main.Download)：`svn co svn://svn.gna.org/svn/ghdl/trunk ghdl`

阅读[自述文件](http://svn.gna.org/svn/ghdl/trunk/README)，按照说明进行操作。

在出现具体问题时回来

# windows-phone-7 - 我如何在 Silverlight WP7 中使用 GET 和 POST 方法

> ID：10383080
> 
> 赞同：1
> 
> 时间：2012-04-30T11:39:23.743
> 
> 标签：windows-phone-7, silverlight-4.0

我如何在 Silverlight WP7 中使用 GET 和 POST 方法，

我已经在普通的 asp.net 应用程序中完成了 get 和 post 方法，但我不知道如何使用 windows phone 技术在 silverlight 中完成它

普通asp.net中的HTTP Post方法

```
<form method="post" name="ePayment" action="https://www.mobile88.com/ePayment/entry.asp"> 
```

HTTP 获取方法

```
<input type="submit" value="Proceed with Payment" name="Submit">
<input type="hidden" name="ResponseURL" value="http://localhost:2017/iPay88/response.aspx"> 
```

我需要一个解决方案

```
private void ReadCallback(IAsyncResult asynchronousResult)
        {

            HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
            using (StreamReader streamReader1 = new StreamReader(response.GetResponseStream()))
            {
                string resultString = streamReader1.ReadToEnd();
                MessageBox.Show("Using HttpWebRequest: " + resultString, "Found", MessageBoxButton.OK);
            }

        }

        void SendPost()
        {
            var url = "https://www.mobile88.com/ePayment/entry.asp";

            // Create the web request object
            HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
            webRequest.Method = "POST";
            webRequest.ContentType = "application/x-www-form-urlencoded";

            // Start the request
            webRequest.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), webRequest);

        }

        private void Button2_Click(object sender, RoutedEventArgs e)
        {
            SendPost();
        }
        void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {
            HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
            // End the stream request operation
            Stream postStream = webRequest.EndGetRequestStream(asynchronousResult);

            // Create the post data
            // Demo POST data 
            string postData = "data=iVBORw0KGgoAAAANSUhEUgAAAFoAAAASCAYAAADbo8kDAAAKyElEQVR4nG2YB3TNVxzHm5eEDHuF2GJUjVRqb2okiMRWqtG0KKI4aq8mUQQ5FRWrhNi1Z6lWazSrRm1iVBDESiIxEkH6Pu/069zzTt857/zv//5/e9/73tu3bx3s/2/evLHk5eU5vX792pG19vT91atXzlo/f/7cTWtweL58+dLFpGWPb/+HT25ubgHzXbTs8SSbKQvv7IOnPf56t8fn+eLFC1d4Sn6TD+ucnJyCpjw87WU06UoO7UtOyWZ5779ffn6+g5U4BrI4ODjkOzo6Wr9a3rLmO/tWYjCysC88Z2fnPPZZWwk68ixYsGBudnZ2YdbgWw3vKjpWxs5WgVHCIrqio7VVWCf428smeiZ/Jyen18BqHxmAZ593aCEf+/x5B8/FxSUHnq6uri/FE9mQAXyTh2hqj3dzLRllM8nJ+zvZBMQf5gKEMQYRc/YLFCjwinfWPIGRouDwXQYuVKjQMwmq7xIGR4gPe3KC9qApJZCB7+DIGLzLcKJh8sKAwPEdWrxLYdbQFK7oACdnmfRwEjgynCmn8LEPMKJpfkNmm5NkZEUN0QcijGUQGYPv7Ek5YICVx/kXLlw4W44SQ5OG6UgZnn2UNx0so+F81tYUd5fRRFcZYP6sJcHNjHQZy5RJfCUb+8ig7zhJzpbRZTQ5HprYg+CSgaEJPHDs8f7OgWZEz5gxI6xr1677S5QokQ5Q2bJl03r37r1t165dgSAq4iHOXwKwBp4nBhFTGIaHh0/38fE5TYryDwwM3LV9+/ZeEvjx48el5s2bN6FJkyZJ4Ht4eDzo1avX9r179/orO4A9fPjwx+3bt/+9TJkyD5GhcuXKt6B99+7d8tBB/qdPnxaNiIiY2LJlyz+LFCmShQwVK1a807Nnzx07d+7sAX34gdeiRYs4so5/9erVr3fv3n3Pvn37usELPTE2enfu3PkXT0/PewRY7dq1L48bNy4yPT29BLSAy8jIKD59+vRw6BUrViwTHStUqJA6cODADbt37w6QDhbVQ4y8YMGCb44cOdIWZgj+8OHDMvv37+/ap0+frfKWPK9INmsrT0U8axSeOXNm6IULF+oSAdA9ePCgb9++fbe4u7s/xyndunXbFxoaOvPcuXP1oYvgwGAcYMAbP378/B49euxENpREhnv37nnOmjVrWocOHX579uxZIfaggw7x8fHNoY28OOLAgQN+6MD77Nmzp8yZM2dyUlJSE6KfDBYMciE/kTp69OgoZDh27FjrtLS0suDeuHHDa8mSJSMaNmx4UgaEJ4GSkJDQDDmQF7vt2LGjJzK7ubm9sNV0DAURBAQRgPv375cDKSUlpUp0dPTIZs2aJQBspj5PjK+abdYuYKF36tSpj4gGaEIPI65fv/7Txo0b/wXc0qVLh585c+ZDZMChRBtwwMMTekT/4sWLQ4g6YG7evFkV+hjK399/b3Jycq25c+dOYi82NjYIwxFJOATZMCJ8vL29zyL/unXrBsGbjMnMzCxGFty+fbtSVFTU6KZNmyZiKHguW7bsqypVqqSwRiaMjz5t27Y98uDBAw+cReCgD84hG1JTUysQYNeuXasRGRk5rlWrVsfVEG2RiAClS5d+RBo9evSoNCmAJygdQ4YM+TEuLq4FzoChaqTZjMzir26PQqQX3qZcQK9o0aJP8TLeB3bTpk2foNiWLVv6durU6RAlC3wMSCRBE4chH2ns5+d3gFIAbqNGjU5gQJTYsGHDQGUcODiUbECOcuXK3R80aNA6jGTKiIMoL/QUytWIESOWHD9+vBVZFRMTEwwM5QZZ0Jk/zmIPZ+J0TVfwvXPnTkXsBX6lSpVujxo16gdg4ImTbM0Qz5CeGBIAhCYlKScnT55sqOkCR5hjloq9RkKVDNZECQJhZLMPyCDAXbly5X3wMZqak9nE+GEQ3uvWrXtB4xO1UfUXXkStnAL+4MGD15QsWfJJx44df0Wvq1ev1lSDDQsLm4E+U6dO/Q7nt27d+ti0adNm4VhosodTgGnQoMHfGFNDAd+KFy+eAR3KIc8VK1YMJVhGjhwZTX0OCAjYTTk5ffq0j0ZHW29TORgzZsxCFJ8yZcpsog7hiEbSnMhRTQaRKFBdloEVTXrXz3zX2h7G/NmPTub0Ijx1dM22mpWDgoJiz549602AtGvX7g/WpDDNmNoKbnBwcAy1Fj3btGlzFEfOnz9/fJcuXX5mz5yRJY/Zd7SP8Xin6WE3nEVWEpj0Aer48uXLh2nieXdYIAVq1qx5FWarV6/+nIgkpflOV1UEC5b6RpQQtaZgMkb58uXvUjpI+f8zLjjww0gnTpxopH1TGWC8vLxuAHP9+vXqPDV+ogD1VYcsTT5Vq1a9+a31R52mDKIDdGjKMhAwTA80QOotPYHGSL2FHv0AehgwKyurCDzhh97w4k8fgy4ZJJ7btm3rTQnZvHlzf5yDLaEDrk0pmDDeLFq06GsIELEooZlY0wbNhZqHQqtWrfoC79MwGbtkGGDZHzBgwEZNDHv27OkOD4SmxjVv3jweeCYBnoyQhw4d6kRthQeNhZTm28SJEyN4Mp2sXbv2M6YJ6FLm6O6aAuDJiEhvIEiAe/LkSUl0UNZiIGBXrlz5JbjQxRnsU9NpoKS7ZEcujIdcinRKBvg0RfCht2bNmsG3bt2qrMECGgShzgoY28IGtefo0aNtKB/VqlX7B4LUIpSDGCmhqOzfv/9mmE6ePHkOzatOnToXSVHVav44YuzYsd/Xq1fvPGMYYxL1nSaLEkwM8Bg2bNjy+vXrn0MpX1/fg9RVFMbpiYmJTeEJPxoV0UXalypV6jFRCe8aNWpcCwkJWXzp0qUPUIjMgCbTAgYmKGigyEspAQbYoUOHrgAGGci8fv36/YRj6Esqo9R5jEo5Qi5sRJQiL/jnz5+vh3zUYnQlqsHVWQEbYDeVW9vcS7Qxu3JQYPrQiYzRjPBfuHDhGIAxJu8ozAQBYQyBEVRLzbsEjDVhwoR5OANvozxdnKgmRVGA6J00adJc0hX6TAKCIVWJBuosHZw6SinB4fw5QGBYaIBL5mA0HAoePJkAaHw0LfRi0qEHYWDJS9PDWJQOyU99pbQQGMpi6NWqVSt5+PDhSwlMnAMMTZeJA5lwCDKSiYzGyGUbgSHKR2bIrVu39qEU8AHjM7NyKEAo9oDFEKQOMy8wpA0GY01k4jjdjeBddWDqHDjULzJFYyKnKOobzRd8DgekKydUeAEDTcoThmRG1R3IxYsX66AM8yo8iSDKCyUDR2IIdOAkSACBhxOZjamlykAOODR+5OUdYyMf9OhXwOrAdfny5do4npJB9pEFGzduHEDmQp+SRiagEw5CfluNlgdRijWRoPO6WXNhrEsdRQKMdewmgvEeBtdhRkbSdAANnmoiomPO44pE1rrpEx3zEkl4Jl3hmpdOasI6AYuvDKdMlczQMEdW0UYWjba6+WOtSJdc0kE8Vf8tutDRxYpqsXnjBhNdIomobtNYUxI0gZAdarD2+GIuZ4mXaQw5lie8ZGAMY8pnTjpyCkpJF53I9E3NXFe9GMN+bJPh1dhN+uDrgkvy6Bt2YU83hnKAHGijJ4/ooKDDhBTWAcGcYcUETymNEVqe5LsMDp4Gdwll3sDpEGJeVbJnRrkizbxatTeGIg85dKGliNI1KU/JaO8gXcVqXyVEcsiYkkcThmZ98DViSm+VJt7/BbjvID507t6TAAAAAElFTkSuQmCCTHEEND";

            byte[] byteArray = Encoding.UTF8.GetBytes(postData);

            // Add the post data to the web request
            postStream.Write(byteArray, 0, byteArray.Length);
            postStream.Close();

            // Start the web request
            webRequest.BeginGetResponse(new AsyncCallback(GetResponseCallback), webRequest);
        }

        void GetResponseCallback(IAsyncResult asynchronousResult)
        {
            try
            {
                HttpWebRequest webRequest = (HttpWebRequest)asynchronousResult.AsyncState;
                HttpWebResponse response;

                // End the get response operation
                response = (HttpWebResponse)webRequest.EndGetResponse(asynchronousResult);
                Stream streamResponse = response.GetResponseStream();
                StreamReader streamReader = new StreamReader(streamResponse);
                var Response = streamReader.ReadToEnd();
                streamResponse.Close();
                streamReader.Close();
                response.Close();

            }
            catch (WebException e)
            {
                // Error treatment
                // ...
            }
        } 
```

这是我尝试过的代码块，但我不知道这是否正确，请指导我正确的方法。

# android - 如何在安卓手机上静音相机快门声音

> ID：10383083
> 
> 赞同：21
> 
> 时间：2012-04-30T11:39:45.477
> 
> 标签：android, audio, android-camera

有什么方法可以在Android（非root手机）中静音相机快门声音？

我在拍照时使用此代码静音我的音频声音：

```
 AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    int streamType = AudioManager.STREAM_SYSTEM;
    mgr.setStreamSolo(streamType, true);
    mgr.setRingerMode(AudioManager.RINGER_MODE_SILENT);
    mgr.setStreamMute(streamType, true); 
```

我把声音静音，然后把电话静音。

```
mCamera.takePicture(null, null, photoCallback); 
```

然后拍照

它正在工作`HTC HERO, HTC Desire, Motorola ME860, MotoA953`。但是当我在 and 上测试它时`Samsung Tab p1000`，`Sony Experia R800i`它不起作用。还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T17:10:21.913

试试这个代码：

```
AudioManager manager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
if(TextUtils.equals(muteMode, "mute")){
    manager.setStreamVolume(AudioManager.STREAM_SYSTEM, 0 , AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
}else{
    manager.setStreamVolume(AudioManager.STREAM_SYSTEM, manager.getStreamMaxVolume(AudioManager.STREAM_SYSTEM) , AudioManager.FLAG_ALLOW_RINGER_MODES);
}
//here continue to take picture... 
```

不要使用 AudioManager.setStreamMute() 方法，因为 android 2.3 以下版本存在一个已知问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-03T14:42:57.157

从 API 级别 17 (4.2) 开始，如果手机制造商支持，就有一种适当、可靠的方法来执行此操作。

首先，检测是否可以通过编程方式禁用快门声音，然后禁用它

```
Camera.CameraInfo info = new Camera.CameraInfo();
Camera.getCameraInfo(id, info);
if (info.canDisableShutterSound) {
    mCamera.enableShutterSound(false)
} 
```

您需要在对 的调用中将 id 设置为适当的相机 ID `Camera.getCameraInfo`，或者在从 0 到`Camera.getNumberOfCameras()`- 1 的循环中将它们全部禁用。

[开发人员文档](https://developer.android.com/reference/android/hardware/Camera.html#enableShutterSound%28boolean%29)建议您播放另一种声音来代替快门声音，但您没有义务这样做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T14:50:26.637

您已经发布的方法实际上是我能找到/想到的最好的方法。它不起作用的原因是因为它不应该起作用。事实上，在许多地方（欧洲大部分地区、日本、美国部分地区等）禁用快门声音是非法的。这样你就不能在你不应该去的地方拍照，所以你不能在没有人允许的情况下拍照，等等。制造商故意试图确保您无论如何都无法做到这一点只是在黑暗中拍摄（尽管从技术上讲总有办法），但是当您考虑它时，从逻辑上讲，您的代码没有理由不应该这样做工作对吗？这很简单，基本，有道理。无论如何，

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-13T21:32:31.343

那里有一部手机可以自己播放快门声音。在这种情况下，似乎无法禁用快门声音。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-14T21:12:39.120

我能想到的一种疯狂的方法是获得将手机静音的许可。

# asp.net-mvc - 使用 EF、MVC3 为用户显示图表和图表的好方法？

> ID：10383089
> 
> 赞同：1
> 
> 时间：2012-04-30T11:40:25.093
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, charts, statistics

我首先在我的项目中使用带有 EF 模型的 MVC3-ViewModel。我现在正在做的视图是一个页面，用户应该在其中看到用图表显示的统计信息。

对于如何能够以一种好的方式做这种事情的任何提示和帮助，我们将不胜感激。也许有任何插件或软件包？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:09:18.263

据我了解，您真正需要的不是获取统计数据（您可以通过调用纯 SQL 查询或仅使用 LINQ 来实现，这是您的选择），只是显示它们。有很多方法可以做到这一点，但如果您不需要一些高级功能，使用像 Highcharts 或 Flot 这样的 Javascript 库可能会比完整的报告服务容易得多。您不需要高级的 Javascript 知识，它们中的大多数都有足够的文档可以立即使用。还有一些补充库，它们只是这些库的包装器，因此您可以更轻松地在 ASP.NET 或 ASP.NET MVC 项目中使用它们。一些例子：

Flot.Net - [http://flotdotnet.codeplex.com/](http://flotdotnet.codeplex.com/)

Highcharts.net - [http://highcharts.codeplex.com/](http://highcharts.codeplex.com/)

DotNet.Highcharts - [http://dotnethighcharts.codeplex.com/](http://dotnethighcharts.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:46:16.687

我会使用直接 SQL / 存储过程进行数据检索，甚至使用 SQL 服务器报告服务（它提供图表）进行任何类型的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T09:36:46.390

在不了解您的应用程序的情况下，我不确定是否真正理解您的 SQL 图表，因此目前我将跳过该部分。[使用您可以在此处](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)找到的众多 javascript 库之一，可以非常快速且无需了解太多 javascript 即可将统计数据显示为图表。为了使用这个库，您可能需要在 MVC 应用程序中集成一些 AJAX 功能（如果还没有的话）。我将 Highcharts 用于我的个人项目，我认为它做得很好并且易于使用，但如果您将其用于商业目的，则需要许可证。

# oracle - 如何更改动态 SQL 中的序列？

> ID：10383091
> 
> 赞同：6
> 
> 时间：2012-04-30T11:40:39.863
> 
> 标签：oracle, plsql, sequence, dynamic-sql

我正在尝试创建一个脚本来将数据从一个数据库迁移到另一个数据库。我目前无法做的一件事是将序列的下一个值设置为另一个数据库中序列的下一个值。

我从 user_sequences 中得到了值的差异，并生成了以下动态 SQL 语句：

```
execute immediate 'alter sequence myseq increment by 100';
execute immediate 'select myseq.nextval from dual';
execute immediate 'alter sequence myseq increment by 1';

commit; 
```

但什么也没有发生。我错过了什么？如果我在过程之外运行相同的语句，它们可以正常工作：

```
alter sequence myseq increment by 100;
select myseq.nextval from dual;
alter sequence myseq increment by 1;

commit; 
```

**编辑**：向所有不清楚的人道歉。我实际上正在改变同一个数据库中的序列。我只是从远程数据库中获取要设置的值。也许没有必要提及远程数据库，因为它不会影响事物。我只是提到它来解释我的目标是什么。

步骤 1\. 我从远程数据库获取序列的 nextval。

```
select (select last_number
        from dba_sequences@remoteDB
        where upper(sequence_name) = upper(v_sequence_name)) - (select last_number
                                                                from user_sequences
                                                                where upper(sequence_name) = upper(v_sequence_name)) increment_by
from dual; 
```

第 2 步。我使用此值生成动态 SQL 语句：

```
execute immediate 'alter sequence myseq increment by 100';
execute immediate 'select myseq.nextval from dual';
execute immediate 'alter sequence myseq increment by 1';

commit; 
```

没有引发错误，但什么也没发生。当我用 DBMS_OUTPUT.PUT_LINE 编写 SQL 语句并在外面运行它们时，它们就起作用了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T14:45:47.903

这是一些将序列动态设置为新（更高）值的代码。我已经写了这个，所以它适用于您架构中的任何序列。

```
create or replace procedure resync_seq
    (p_seq_name in user_sequences.sequence_name%type)
is
    local_val pls_integer;
    remote_val pls_integer;
    diff pls_integer;
begin
    execute immediate 'select '|| p_seq_name ||'.nextval from dual'
           into local_val;
    select last_number into remote_val
    from user_sequences@remote_db
    where sequence_name = p_seq_name ;
    diff := remote_val - local_val;

    if diff > 0
    then
        execute immediate 'alter sequence  '|| p_seq_name ||' increment by ' ||to_char(diff);
        execute immediate 'select '|| p_seq_name ||'.nextval from dual'
           into local_val;
        execute immediate 'alter sequence  '|| p_seq_name ||' increment by 1';
    end if;

end; 
```

该过程不需要 COMMIT，因为 DDL 语句发出隐式提交（实际上是两个）。

您可以执行它并查看这样的同步值（在 SQL*PLus 中）：

```
exec resync_seq('MYSEQ')
select myseq.currval
from dual 
```

顺便说一句，重置序列（到其原始起始值或不同的较低值）的唯一方法是删除并重新创建序列。

* * *

在 18c 中，Oracle 向 ALTER SEQUENCE 添加了 RESTART 功能。直接的选择...

```
alter sequence myseq restart; 
```

...将序列重置为原始 CREATE SEQUENCE 语句中的 START WITH 子句指定的值。另一个选项允许我们指定一个**新**的起点：

```
alter sequence myseq restart start with 23000; 
```

令人兴奋的是，这个新的起点可以在当前值之前或之后（在序列的通常范围内）。

一个问题是这个新功能没有被记录（仅用于 Oracle 的内部使用），所以我们不应该使用它。[在 20c 中仍然如此。](https://docs.oracle.com/en/database/oracle/oracle-database/20/sqlrf/ALTER-SEQUENCE.html#GUID-A6468B63-E7C9-4EF0-B048-82FE2449B26D)改变序列值的唯一被批准的机制是我上面概述的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T11:53:26.437

我不太明白你的意思，但这是一个疯狂的猜测：

我在您的代码中没有看到它，但您正在谈论在另一个数据库上执行 DDL（等），所以我假设您正在使用数据库链接`CREATE`。*不能*使用数据库链接在另一个数据库上执行 DDL。您可能要考虑这一点。`ALTER`

 ** * *

在您提供的信息之后，这可能就是您需要的。如果你想设置序列的当前值，*你不能*，根据这个[文档](http://docs.oracle.com/cd/E14072_01/server.112/e10592/statements_2012.htm)，你需要删除/创建：

```
declare
  ln_lastNumber DBA_SEQUENCES.LAST_NUMBER%type;
  lv_sequenceName DBA_SEQUENCES.SEQUENCE_NAME%type := 'MYSEQ';
begin
  select LAST_NUMBER
  into ln_lastNumber
  from DBA_SEQUENCES--or @remote_db;
  where
    --Your predicates;

  execute immediate 'drop sequence ' || lv_sequenceName;
  execute immediate 'create sequence ' || lv_sequenceName || ' starts with ' || ln_lastNumber;
exception
  when no_data_found then
    dbms_output.put_line('No sequence found!'); -- Or log somehow.
    raise;
  when others then
    raise;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T19:09:51.027

此外，动态 SQL 包中的 DDL 需要

AUTHID CURRENT_USER

声明包规范时，如果您希望它具有当前用户的凭据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-08T17:34:39.790

我把APC提供的代码修改如下：

```
create or replace procedure resync_seq
    (p_seq_name in user_sequences.sequence_name%type, 
     p_table_name in user_tables.table_name%type, 
     p_pk in user_cons_columns.column_name%type)
is
     local_val pls_integer;
     remote_val pls_integer;
     diff pls_integer;
begin
      execute immediate 'select '|| p_seq_name ||'.nextval from dual'
       into local_val;

       execute immediate 'select max('||p_pk||') from '||p_table_name ||' ' 
       into remote_val ;

       diff := remote_val - local_val;

       if diff > 0
          then
          execute immediate 'alter sequence  '|| p_seq_name ||' increment by ' ||to_char(diff);
          execute immediate 'select '|| p_seq_name ||'.nextval from dual'
       into local_val;
          execute immediate 'alter sequence  '|| p_seq_name ||' increment by 1';
       end if;

 end; 
```*

# sql-server - SSRS - 向报告生成器添加“LIKE”过滤条件

> ID：10383093
> 
> 赞同：4
> 
> 时间：2012-04-30T11:40:51.837
> 
> 标签：sql-server, reporting-services, report-builder2.0

我想在 SSRS 报表生成器中添加一个带有通配符的 LIKE 过滤器。我尝试使用报表生成器的过滤数据部分中存在的 contains 子句。我尝试了“*”和“%”，但都失败了。

我试过 MyFieldName 包含 2451 - 这成功 MyFieldName 包含 24* - 这失败 MyFieldName 包含 24% - 这失败

从下面的链接我觉得这是一个老问题，到目前为止还没有解决方案。

[http://connect.microsoft.com/SQLServer/feedback/details/202792/ssrs-adding-like-filter-criteria-to-report-builder](http://connect.microsoft.com/SQLServer/feedback/details/202792/ssrs-adding-like-filter-criteria-to-report-builder)

你们有什么建议？

谢谢拉维古普塔
_

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T11:43:31.147

您可以使用该`InStr`功能

```
=IIF(InStr(Fields!MyFieldName.Value, "2451"),TRUE,FALSE) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T08:36:25.683

在 SSRS 中我们不能使用`Like`. 您可以使用`Contains`.

```
IIF((MyFieldName).ToString().Contains("RequiredString"),"True","False) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-11T03:09:10.640

在 Visual Studio 的报表生成器中，有一个 Like，它可以工作。在搜索字符串中使用 * 作为通配符

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-01T08:06:54.300

回答我自己的问题，下面的功能对我有用：

> 如果（查找（我的字段名称，“24”）= 1，真，假）

这只是部分答案，因为这适用于 (blabla*) 之类的情况，但不适用于 (bla*bla, blabla*) 之类的情况。因此，欢迎任何有更好想法的人。

从上面达伦的评论中得到了这样做的想法。

谢谢拉维古普塔
_

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:04:00.753

报表生成器不支持`LIKE`运算符。您必须使用`CONTAINS`;

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-29T16:24:25.610

这对聚会来说已经很晚了，但我为我的数据集制定了一个参数过滤器的解决方案。**使用表达式**向我的数据集添加过滤器：

 **```
=IIF(InStr(Fields!AccountName.Value, Parameters!paramAccountName.Value) OR Parameters!paramAccountName.Value = "*", TRUE, FALSE) 
```

**类型**

```
Boolean 
```

**操作员**

```
= 
```

**价值**

```
true 
```

该参数默认为“*”，因此报告看起来像是默认抓取所有内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-24T20:24:03.600

我刚刚遇到了这个旧线程，我很好奇为什么你不能使用 like 关键字，因为我一直使用它。你尝试过这样的事情吗？在哪里（帐户名称，例如 '%' + @paramAccountName + '%' 或 @paramAccountName =''）**

# mysql - ADDTIME 和 SEC_TO_TIME 到 SQL Server 2008

> ID：10383096
> 
> 赞同：0
> 
> 时间：2012-04-30T11:41:03.377
> 
> 标签：mysql, sql-server, sql-server-2008, migration

我尝试将我的代码从 MYSQL 更改为 SQL Server。

我的查询中的特定函数（ADDTIME 和 SEC_TO_TIME）存在一些问题。

这是我必须更改的查询的结尾：

```
order by j.idjour,j.heure,ADDTIME(j.heure,SEC_TO_TIME(pl.duree)) asc 
```

我尝试使用`convert`，`DateAdd`但我对如何在没有任何错误的情况下更改它有点失望。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:56:24.720

这应该是你要找的，

```
dateadd(second, pl.duree, j.heure) 
```

假设这`pl.duree`是一个表示秒的整数值，并且`j.heure`是一个`time`或`datetime`值。

# java - 从外部进程读取输出

> ID：10383098
> 
> 赞同：0
> 
> 时间：2012-04-30T11:41:22.963
> 
> 标签：java, ipc

我正在尝试运行 .csh 脚本并将其输出读入 StringBuffer。尽管从控制台运行脚本会返回一些输出，但输出有时会返回空。相同的运行流程有时会返回输出，有时则不会，尽管进程启动的方式没有任何改变（相同的脚本、路径、参数）并且脚本也没有改变。我没有抛出任何异常。什么可能导致现在正确/成功读取输出？代码段是

```
public static String getOutpoutScript(Process p) {
    InputStream outpout = p.getInputStream();
    logger.info("Retrived script output stream");
    BufferedReader buf = new BufferedReader(new InputStreamReader(outpout));
    String line = "";
    StringBuffer write = new StringBuffer();

    try {
        while ((line = buf.readLine()) != null) {
            write.append(line);
        }
    } catch (IOException e) {
        // do something
    }

    return write.toString().trim();

} 
```

除了不关闭流这一事实之外，代码中的这个或其他内容是否可能会阻止输出在某些情况下被正确读取？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:48:19.653

如果您有错误，默认情况下将写入 getErrorStream()。如果您有问题，我会确保您在某处阅读此内容。

如果此流的缓冲区已满，您的程序将停止，等待您读取它。

解决这些问题的一种简单方法是使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html) .redirectErrorStream(true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:47:20.023

如果您使用 ProcessBuilder 启动它，您可以[将错误流合并到输出流中。](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28%29)这样，如果程序打印到 stderr，您也将捕获它。或者，您可以同时阅读两者。此外，您可能不想使用 readLine，如果程序最后没有打印行尾字符，您可能会卡住一段时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:47:31.067

也许你必须替换`p.getInputStream()`为`p.getOutputStream()`

除此之外，有时进程可能会阻塞等待输入，因此您必须异步读取和写入 - 一种可能的解决方案是使用不同的线程 - 例如，一个线程正在读取，另一个正在写入，一个正在监视进程。

# mysql - 您如何看待 mysql 表上的级联删除？

> ID：10383100
> 
> 赞同：1
> 
> 时间：2012-04-30T11:41:28.727
> 
> 标签：mysql, sql, cascade

这个问题在标题中！

我用来存储我的（生产）网站数据的数据库包含很多`ON DELETE CASCADE`.

我只是想知道这是否是一件好事，或者它是否是手动编码所有删除的更好方法。

一方面，它不是很明确：删除是通过魔法实现的，另一方面，它使开发更容易：我不必将数据库的整个模式都牢记在心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:45:37.393

我认为保持参照完整性是一件好事。您最不想要的是数据库中的孤立行。

有关不使用引用完整性时要考虑的事项，请参阅 MySQL 文档：

> MySQL 让数据库开发人员可以选择使用哪种方法。如果您不需要外键并希望避免与强制引用完整性相关的开销，则可以选择另一个存储引擎，例如 MyISAM。（例如，MyISAM 存储引擎为只执行 INSERT 和 SELECT 操作的应用程序提供了非常快的性能。在这种情况下，表中间没有孔，插入可以与检索同时执行。参见第 8.10.3 节， “并发插入”。）
> 
> 如果您选择不利用参照完整性检查，请记住以下注意事项：
> 
> 在没有服务器端外键关系检查的情况下，应用程序本身必须处理关系问题。例如，必须注意以正确的顺序将行插入表中，并避免创建孤立的子记录。它还必须能够从多记录插入操作中间发生的错误中恢复。
> 
> 如果 ON DELETE 是应用程序需要的唯一引用完整性功能，则可以通过使用多表 DELETE 语句通过单个语句从多​​个表中删除行来实现与 MySQL Server 4.0 类似的效果。请参见第 13.2.2 节，“DELETE 语法”。
> 
> 缺少 ON DELETE 的一种解决方法是，当您从具有外键的表中删除记录时，将适当的 DELETE 语句添加到您的应用程序中。在实践中，这通常与使用外键一样快，并且更便携。
> 
> 请注意，使用外键有时会导致问题：
> 
> 外键支持解决了许多引用完整性问题，但仍然需要仔细设计键关系以避免循环规则或级联删除的错误组合。
> 
> DBA 创建关系拓扑结构使得从备份中恢复单个表变得困难的情况并不少见。（MySQL 通过使您能够在重新加载依赖于其他表的表时临时禁用外键检查来缓解此困难。请参阅第 14.3.5.4 节，“外键约束”。从 MySQL 4.1.1 开始，mysqldump 生成的转储文件利用重新加载时会自动关闭此功能。）

来源：[http ://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html](http://dev.mysql.com/doc/refman/5.5/en/ansi-diff-foreign-keys.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:06:27.480

级联删除是您使用的绝佳工具，前提是您确保仅在非常有意义的情况下使用它们。

您选择使用级联删除的主要情况是当您有一个表，该表对由另一个表中的一个（并且只有一个）行“拥有”的实体进行建模。例如，如果您有一个模拟人员的表格和一个模拟电话号码的表格。在这里，您的电话号码表将具有您的人员表的外键。现在，如果您决定不再希望您的应用程序跟踪某人——比如说“Douglas”——那么您也不想再跟踪 Douglas 的电话号码是完全有道理的。让一个电话号码在你的数据库中浮动并且不知道它是谁，这是没有意义的。

但同时，当您想从“人员”表中删除一个人时，您不想先费力地检查您是否有该人的电话号码并将其删除。当您可以将删除一个人时，他们的电话号码也可以全部删除的规则编码到数据库结构中时，为什么要这样做呢？这就是级联删除将为您做的事情。只要确保你知道你有什么级联删除，并且它们都是有意义的。

注意。如果使用触发器，则需要更加小心。MySQL 不会触发级联删除的触发器。

# windows-phone-7 - 如何在 wp7 中使用 WebBrowser 中的图像加载本地 Html

> ID：10383103
> 
> 赞同：0
> 
> 时间：2012-04-30T11:41:48.303
> 
> 标签：windows-phone-7

如何在 wp7 中使用 webBrowser 中的图像加载本地 Html？

我正在通过隔离存储加载 html 文件。Html 文件的内容在 webBrowser 中正确显示，但图像不显示。

我阅读了许多文章以在 webBrowser 中加载 html 文件，但我没有在 webBrowser 中加载本地图像我的图像格式是 png 并且我将图像的 BuildAction 属性设置为 Content。

所以请告诉我我能为此做些什么？？

# postgresql - PostgreSQL 中具有夏令时的时区

> ID：10383108
> 
> 赞同：15
> 
> 时间：2012-04-30T11:41:59.180
> 
> 标签：postgresql, timezone, timestamp

我们正在部署我们自己的流量测量仪（很像这个 USGS 测量仪：[http](http://waterdata.usgs.gov/usa/nwis/uv?site_no=03539600) ://waterdata.usgs.gov/usa/nwis/uv?site_no= 03539600）所以我们的皮划艇运动员知道是否有足够的水来划流不要浪费时间和汽油开车出去。我们希望在横跨东部和中部时区的东南白水地区安装其中的一些。

我使用记录的默认值 current_time 存储插入记录的时间。我想稍后使用`MM/DD/YYYY HH12:MI AM TZ`格式显示数据，该格式输出读数如`03/12/2012 01:00 AM CDT`. 我还希望输出能够了解夏令时的变化，因此当我们“向前跳”和“后退”时，上一句的最后一部分会在 CST 和 CDT 之间发生变化。这一变化发生在今年 2012 年 3 月 11 日，我在下面这条 DST 行的两边都包含了日期。我正在使用我的 Windows 7 笔记本电脑进行开发，稍后我们将在 Unix 机器上进行部署。Postgres 显然检测到我的 Windows 计算机设置为美国东部时区。我正在尝试使用“不带时区的时间戳”字段和“带时区的时间戳”

我已经尝试在我的选择中使用“在时区”，并且一切正常，直到显示时区。当我在 CDT 中询问时间时，实际小时是时间戳的一部分，正确减去了一个小时。但 EDT 显示在输出中。

```
SELECT reading_time as raw,
       reading_time at time zone 'CDT',
       to_char(reading_time at time zone 'CDT',
           'MM/DD/YYYY HH12:MI AM TZ') as formatted_time
  FROM readings2;

"2012-04-29 17:59:35.65";"2012-04-29 18:59:35.65-04";"04/29/2012 06:59 PM EDT"
"2012-04-29 17:59:40.19";"2012-04-29 18:59:40.19-04";"04/29/2012 06:59 PM EDT"
"2012-03-10 00:00:00";"2012-03-10 00:00:00-05";"03/10/2012 12:00 AM EST"
"2012-03-11 00:00:00";"2012-03-11 00:00:00-05";"03/11/2012 12:00 AM EST"
"2012-03-12 00:00:00";"2012-03-12 01:00:00-04";"03/12/2012 01:00 AM EDT" 
```

我将我们每个仪表所在的时区存储在一个单独的表中的字符变化字段中。我考虑只是将此值附加到时间输出的末尾，但我希望它在没有我干预的情况下从 CST 更改为 CDT。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-30T15:09:49.003

[您可以考虑使用完整的 Olsen 风格](http://en.wikipedia.org/wiki/List_of_tz_database_time_zones)的时区名称，而不是使用 CDT 或 CST 等时区名称。在中央时间的情况下，您可以选择一个时区。与您的位置匹配的一个，例如`America/Chicago`，或只是`US/Central`。这确保 PostgreSQL 使用 Olsen tz 数据库自动确定夏令时是否适用于任何给定日期。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T12:43:55.683

您肯定想要一个列（在 PostgreSQL`TIMESTAMP WITH TIME ZONE`中也称为列）。`timestamptz`这将以 UTC 格式存储时间戳，以便它代表特定的时间点。与名称所暗示的相反，它不会*在*`AT TIME ZONE`列中保存时区——您可以使用该短语在您选择的时区中查看检索到的时间戳。

TIMESTAMP WITHOUT TIME ZONE 的语义令人困惑，几乎毫无用处。我强烈建议您根本不要使用该类型来描述您所描述的内容。

`CHARACTER VARYING`关于将时间戳存储在列中的问题部分，我真的很困惑。这似乎是问题的一部分。如果您可以`timestamptz`从一开始就将其存储，我怀疑您会遇到更少的问题。除此之外，使用 -04 表示法与 UTC 偏移是最安全的；但这对我来说似乎更多的工作没有任何好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-07T01:15:56.030

You can create a table of known timezones in the format suggested in [Guan Yang's answer](https://stackoverflow.com/a/10385972/290182), and then use a foreign key column to this table. Valid timezones can be obtained from [`pg_timezone_names`](http://www.postgresql.org/docs/9.2/static/view-pg-timezone-names.html) I've gone into more detail in [this related answer](https://stackoverflow.com/a/28909467/290182).

# assembly - 将浮点数移动到mips中的新寄存器的最佳方法？

> ID：10383109
> 
> 赞同：2
> 
> 时间：2012-04-30T11:42:01.223
> 
> 标签：assembly, floating-point, mips

将浮点值从一个寄存器移动到另一个寄存器的最佳方法是什么？

如果我正在使用整数并想将 $t0 的内容移动到 $t1 我会简单地做

```
add  $t1, $t0, $zero 
```

如果我想对浮动数字做同样的事情，我目前正在这样做

```
sub.s  $f1, $f0, $f0
add.s  $f1, $f0, $f1 
```

有没有更好的方法来做到这一点？如果有人知道在那里找到一个很好的带有浮点指令的 mips 参考卡，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T11:51:09.343

为此有一个寄存器-寄存器移动指令：

```
mov.s $f1, $f0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-05T21:58:37.120

您请求了一个指向带有浮点伪指令的 MIPS 指令的良好链接。干得好。

[http://www.math.unipd.it/~sperduti/ARCHITETTURE-1/mips32.pdf](http://www.math.unipd.it/~sperduti/ARCHITETTURE-1/mips32.pdf)

# glsl - GLSL 和 GLSL ES 2 之间的差异

> ID：10383113
> 
> 赞同：31
> 
> 时间：2012-04-30T11:42:10.220
> 
> 标签：glsl, opengl-es-2.0

真的有两个问题...

1.  GLSL ES 2 是完全独立的语言，还是 GLSL 的特殊版本？
2.  在“标准库”函数、语法和功能方面，它们之间有什么区别？

我正在为一个针对 Windows、Mac 和 iPad 的应用程序编写着色器，我不希望为每个着色器添加更多版本——无论如何，着色器更简单。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-30T21:41:23.593

> GLSL ES 2 是完全独立的语言，还是 GLSL 的特殊版本？

每个版本的 GLSL 最终都是一种“完全独立的语言”；有些甚至不向后兼容以前的版本。然而，GLSL 的 ES 变体更是如此。

将其视为桌面 GLSL 的一个分支。*请注意，六个版本之前*的 GLSL 分支。

> 在“标准库”函数、语法和功能方面，它们之间有什么区别？

在哪些版本之间？

您必须尝试在这些平台之间共享着色器的唯一可能原因是您尝试在它们之间共享 OpenGL 代码。因此，您必须将自己限制在桌面 OpenGL 2.1 功能上。

这意味着您将使用桌面 GLSL 1.20 版。这类似于 GLSL ES 版本 1.00（GLSL 的版本没有与匹配的 GL 版本相同的编号。嗯，直到桌面 GL 3.3/4.0 和 GLSL 3.30/4.00），但仍然不同。在 ES 中，您有很多桌面 GLSL 1.20 无法处理的精度限定符。

处理这个问题的最好方法是使用“前导”着色器字符串。看，[`glShaderSource`](http://www.opengl.org/wiki/GLAPI/glShaderSource)需要多个着色器字符串，将它们拼接在一起并编译为一个。您可以获取主着色器字符串（`main`及其各种代码、`attribute`定义`uniforms`等）并在其前面粘贴“前导”着色器字符串。根据您要编译的内容，序言会有所不同。

您的 ES GLSL 1.00 序言如下所示：

```
#version 100  //Must start with a version specifier. 
```

您的桌面 GLSL 1.20 序言如下所示：

```
#version 120
#define lowp
#define mediump
#define highp 
```

也许还有其他一些明智的`#defines`。这样，您的着色器可以设置这些精度限定符，并且`#define`在使用桌面 GLSL 时它们将被删除。

这很像 C/C++ 中的平台中立编码，您经常有一些特定于平台的标头来更改定义和/或`#define`您可以根据这些标头条件代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-13T10:54:43.167

用更简单的术语来说，Opengl ES 即 opengl 嵌入式系统被设计为可以在手机等嵌入式设备上运行，手机系统面临与 90 年代 pc 相同的问题，即计算问题和 gpu 架构的差异。

*   ImgTech PowerVR SGX - TBDR (TileBasedDeferred)
*   ImgTech PowerVR MBX - TBDR（固定功能）

*   ARM Mali - 平铺（小瓷砖）

*   Qualcomm Adreno - Tiled（大瓷砖）
*   Adreno3xx - 可以切换到传统
*   glHint(GL_BINNING_CONTROL_HINT_QCOM, GL_RENDER_DIRECT_TO_FRAMEBUFFER_QCOM) NVIDIA Tegra - 传统

# c# - 在 WPF 中实现暂停

> ID：10383116
> 
> 赞同：1
> 
> 时间：2012-04-30T11:42:17.927
> 
> 标签：c#, wpf, dependency-properties, delay

这里有一个简单的 WPF 程序：

```
<!-- Updater.xaml -->
<Window x:Class="Update.Updater"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <StackPanel>
            <Button Click="Button_Click" Height="50"></Button>
            <Label Content="{Binding Label1Text}" Height="50"></Label>
            <Label Content="{Binding Label2Text}" Height="50"></Label>
        </StackPanel>
    </Grid>
</Window>

// Updater.xaml.cs
using System.Threading;
using System.Windows;

namespace Update
{
    public partial class Updater : Window
    {
        public Updater()
        {
            InitializeComponent();
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Label1Text = "It is coming...";
            Thread.Sleep(3000);
            Label2Text = "It is here!";
        }

        public string Label1Text
        {
            get { return (string)GetValue(CategoryProperty); }
            set { SetValue(CategoryProperty, value); }
        }

        static readonly DependencyProperty CategoryProperty = DependencyProperty.Register("Label1Text", typeof(string), typeof(Updater));

        public string Label2Text
        {
            get { return (string)GetValue(Label2TextProperty); }
            set { SetValue(Label2TextProperty, value); }
        }

        static readonly DependencyProperty Label2TextProperty = DependencyProperty.Register("Label2Text", typeof(string), typeof(Updater));
    }
} 
```

目的是当您单击按钮时，第一个标签显示`It is coming...`. 然后程序休眠 3 秒，最后显示第二个标签`It is here!`。但是，下面的幼稚实现不起作用。如果您运行它并单击按钮，则会发生以下情况：程序休眠 3 秒，然后同时显示两个标签文本。您知道如何更正程序以使其按预期运行吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T14:10:17.593

`Button_Click`由 UI 线程调用，你**不应该**做任何需要超过几毫秒的事情，更不用说休眠 3 秒了。在那段时间内没有处理消息，您的界面没有响应，并且您的应用程序被系统视为“挂起”。

所以，那个长处理任务应该由另一个线程处理。

类似的东西（未经测试）：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    Label1Text = "It is coming...";

    var backgroundWorker = new BackgroundWorker();

    backgroundWorker.DoWork += (s,e) => { Thread.Sleep(3000); }
    backgroundWorker.RunWorkerCompleted += (s,e) => { Label2Text = "It is here!"; }
    backgroundWorker.RunWorkerAsync();
} 
```

链接：

[后台工作者](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

[使用 Dispatcher 构建更具响应性的应用程序](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T13:41:06.837

试试这个：

```
label1.Content = "waiting...";

label1.Dispatcher.Invoke(DispatcherPriority.Background, new Action(delegate()
   {

        label1.UpdateLayout();
    }));

System.Threading.Thread.Sleep(3000);
label1.Content = "done!"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:51:05.440

您可以使用情节提要和关键帧动画来做到这一点。

[http://msdn.microsoft.com/en-us/library/ms742868.aspx](http://msdn.microsoft.com/en-us/library/ms742868.aspx)

这里有一个很好的例子——

[http://msdn.microsoft.com/en-us/library/system.windows.media.animation.stringanimationusingkeyframes.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.stringanimationusingkeyframes.aspx)

```
<Button Name="myAnimatedButton" Margin="200"
  FontSize="16pt" FontFamily="Verdana">Some Text
  <Button.Triggers>
    <EventTrigger RoutedEvent="Button.Click">
      <BeginStoryboard>
        <Storyboard>
          <StringAnimationUsingKeyFrames 
            Storyboard.TargetName="myAnimatedButton" Storyboard.TargetProperty="(Button.Content)"
            Duration="0:0:8" FillBehavior="HoldEnd">

            <!-- All the key frames below are DiscreteStringKeyFrames. Discrete key frames create 
            sudden "jumps" between values (no interpolation). Only discrete key frames can be used 
            for String key frame animations. -->
            <DiscreteStringKeyFrame Value="" KeyTime="0:0:0" />
            <DiscreteStringKeyFrame Value="A" KeyTime="0:0:1" />
            <DiscreteStringKeyFrame Value="An" KeyTime="0:0:1.5" />
            <DiscreteStringKeyFrame Value="Ani" KeyTime="0:0:2" />
            <DiscreteStringKeyFrame Value="Anim" KeyTime="0:0:2.5" />
            <DiscreteStringKeyFrame Value="Anima" KeyTime="0:0:3" />
            <DiscreteStringKeyFrame Value="Animat" KeyTime="0:0:3.5" />
            <DiscreteStringKeyFrame Value="Animate" KeyTime="0:0:4" />
            <DiscreteStringKeyFrame Value="Animated" KeyTime="0:0:4.5" />
            <DiscreteStringKeyFrame Value="Animated " KeyTime="0:0:5" />
            <DiscreteStringKeyFrame Value="Animated T" KeyTime="0:0:5.5" />
            <DiscreteStringKeyFrame Value="Animated Te" KeyTime="0:0:6" />
            <DiscreteStringKeyFrame Value="Animated Tex" KeyTime="0:0:6.5" />
            <DiscreteStringKeyFrame Value="Animated Text" KeyTime="0:0:7" />
          </StringAnimationUsingKeyFrames>              
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger> 
  </Button.Triggers>
</Button> 
```

# c++ - OpenCV如何获取GLCM灰度共生矩阵

> ID：10383117
> 
> 赞同：0
> 
> 时间：2012-04-30T11:42:19.690
> 
> 标签：c++, matlab, opencv, matrix, glcm

我正在尝试在 OpenCV 中使用 GLCM（图像中的灰度共现矩阵（GLCM））提取特征。

在 matlab 中，我们有`graycomatrix`. 我们在 openCV 中是否有任何用于相同目的的功能？如果没有，那么实现它的最佳解决方案是什么，是否有任何可行的示例？

[编辑]

我尝试了此代码，但与 matlab 结果相比，它给出了错误的值 OpenCV 中是否存在任何更好的解决方案/功能，或者我在 GLCM 过程中是否犯了任何错误？

```
 char rawdata[4][4] = { {0, 1, 2, 3},
           {1, 1, 2, 3},
           {1, 0, 2, 0},
           {0, 0,0, 3}};

           src->imageData = (char*)(&rawdata);

             CvGLCM* glcm;
            glcm = cvCreateGLCM(src, 2, NULL,4, CV_GLCM_OPTIMIZATION_NONE);
            cvCreateGLCMDescriptors(glcm, CV_GLCMDESC_OPTIMIZATION_ALLOWDOUBLENEST);

           for (int step=0; step<4; step++)
            {
                 printf("%.3f,", cvGetGLCMDescriptor(glcm, step, CV_GLCMDESC_CONTRAST));
                  printf("\n");
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:01:46.463

有一个类叫做 CvGLCM：

[OpenCV-2.3.1a 文档](http://fossies.org/dox/OpenCV-2.3.1a/structCvGLCM.html)

我从来没有使用过它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-24T16:45:10.637

你必须安装 scipy、numpy、skimage。并且 skimage 具有模块 skimage.feature ，其中包括 skimage.feature.greycomatrix 和 skimage.feature.greycoprops 在那里我们可以计算 ndarray uint8 的 graycoimage 以及 greco 属性[指令](http://scikit-image.org/docs/dev/api/api.html)

# c++ - 按行解析和排序csv文件

> ID：10383119
> 
> 赞同：1
> 
> 时间：2012-04-30T11:42:22.813
> 
> 标签：c++, file, parsing

得到了我的跳跃日志的这个 csv 文件，并希望在每个块中进行排序（跳跃记录），以便首先列出教练，其次是学生，最后是可选的摄影师。当前它们以各种顺序编写。

正在考虑读取块的每一行并将其分配到 vars 中，然后使用空白行作为循环控制进行打印。我在正确的轨道上吗？更喜欢 C++ 中的解决方案帮助（一点点 exp。和编译器设置），但我很灵活，希望在今年夏天真正了解任何推荐语言的具体细节。可能是 Python 或任何有一本好书介绍 CompSci 的人。

非常感谢任何建议和参考！

第一个 col 是角色：1,2,3。

角色（1,2,3），日期（yyymmdd），飞机升降机编号，名称角色1是串联教练，角色2是学生，角色3自由落体相机（可选）

1,20100124,C206WR-L1,MAC PETE

2,20100124,C206WR-L1,霍华德·斯蒂芬

3,20100124,C206WR-L1,JONES DAVE

,,,

2,20100124,C206WR-L3,ALLSOP BEX

1,20100124,C206WR-L3,MAC PETE

3,20100124,C206WR-L3,琼斯戴夫

,,,

1,20100124,C206WR-L2,MAC PETE

3,20100124,C206WR-L2,劳尔芬奇

2,20100124,C206WR-L2,琼斯戴夫

,,,

1,20100124,C206WR-L4,MAC PETE

3,20100124,C206WR-L4,劳尔芬奇

2,20100124,C206WR-L4,琼斯戴夫

,,,

2,20100124,C206WR-L4,史密斯约翰

1,20100124,C206WR-L4,MAC PETE

,,,

2,20100124,C206WR-L5,布朗克莱尔

3,20100124,C206WR-L5,琼斯戴夫

1,20100124,C206WR-L5,MAC PETE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T19:52:03.187

有很多方法可以给这只猫剥皮，我将展示一种更接近我的方法：使用解析器生成器（例如 AXE、Spirit）。由于我对 AXE 非常熟悉，因此这里是您的数据结构的 C++ 语法：

```
using axe::shortcuts;

// for role you can use a digit, you can additionally contrain it
auto role_rule = _d;
// or you can use char literals instead
// auto role_rule = axe::r_any("123");

// for date you can use digits or axe::r_decimal, depending on what you want to do with it
auto year_rule = axe::r_many(_d, 4);
auto month_rule = _d & _d;
auto date_rule = _d & _d;

// aircraft-liftnumber: as far as I understand it's alpha-numeric
auto aircraft_rule = +_w & '-' & +_w;

// name is two alpha strings separated by spaces
auto first_name_rule = axe::r_alphastr();
auto last_name_rule = axe::r_alphastr();
auto name_rule = last_name_rule & +_ws & first_name_rule;

// a rule to extract all information from the line
std::string line; // read line from file
struct record {
unsigned role, year, month, day;
std::string aircraft, name;
};

record rec;

auto line_rule = role >> rec.role & ','
& year_rule >> rec.year & ','
& month_rule >> rec.month & ','
& day_rule >> rec.day & ','
& aircraft_rule >> rec.aircraft & ','
& name_rule >> rec.name & *_n;

std::vector<record> file_records;

auto file_rule = *(line_rule >> axe::e_ref([&](...)
{
   file_records.push_back(rec);
})) & _z;

// read your file to a vector without filtering
std::ifstream csv_file("filename", std::ios::binary);
std::vector<char> cvs_content(
   std::istreambuf_iterator<char>(cvs_file), 
   std::istreambuf_iterator<char>());

if(!file_rule(cvs_content.begin(), cvs_content.end()).matched())
   throw "file corrupt"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:04:16.763

尝试在插入时使用 std::multimap 对它们进行排序，并且不要丢失任何数据，因为 multimap 可以具有多个相同的键值。（在这种情况下，键值将是角色编号。）因此数据将按照您的需要进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:55:41.853

您可以使用拆分函数将每个 CSV 行分解为一个`vector<string>`变量。这是一个示例拆分函数，可以使用 std::string 和 char 分隔符（在您的情况下为“，”）调用：

```
template<typename T>
static inline std::vector<std::basic_string<T>> split(const std::basic_string<T>& s, T c)
{
    std::vector<std::basic_string<T>> v;

    if (!s.length())
        return v;

    std::basic_string<T>::size_type i = 0, j = s.find(c);

    while (j != std::basic_string<T>::npos)
    {
        v.push_back(s.substr(i, j - i));
        i = ++j;
        j = s.find(c, j);
    }

    v.push_back(s.substr(i, s.length()));

    return v;
} 
```

然后你可以简单地按照你选择的顺序打印出变量。

# x11 - 如何将自定义菜单项添加到 X 下的窗口系统菜单？

> ID：10383121
> 
> 赞同：2
> 
> 时间：2012-04-30T11:42:31.197
> 
> 标签：x11, window-managers

我想将我的自定义命令添加到窗口系统菜单（通常位于标题栏左上角的菜单，通常包含最小化、最大化等），并在我的应用程序中响应它。在 ms windows 中可以做

```
 HMENU hMenu = GetSystemMenu(hwnd, false);
   AppendMenu(hMenu, MF_STRING, ...) 
```

在 X11 下这样的事情可能吗？如果不是通用方法，也许是某些特定窗口管理器的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T12:05:59.057

好的，在您最后一次编辑之后，我的理解是您希望将自定义菜单添加到由*Window Manager*控制的*窗口装饰*上的菜单中。

 *我不认为这是可能的，尽管我不确定。我相信您应该阅读 ICCCM 和 EWMH 以了解这是否可行：

*   [http://en.wikipedia.org/wiki/Inter-Client_Communication_Conventions_Manual](http://en.wikipedia.org/wiki/Inter-Client_Communication_Conventions_Manual)
*   [http://en.wikipedia.org/wiki/Extended_Window_Manager_Hints](http://en.wikipedia.org/wiki/Extended_Window_Manager_Hints)

或者您可以向 wm-spec-list 发送电子邮件询问：

*   [http://mail.gnome.org/mailman/listinfo/wm-spec-list](http://mail.gnome.org/mailman/listinfo/wm-spec-list)

此外，在那里添加一个选项会使其非常隐藏，不是吗？我想大多数人从来没有点击过那个菜单……我什至不认为所有可能的窗口管理器上都存在这个菜单。您真的应该尝试将菜单放在应用程序的 Window 中，而不是 Window Manager 的装饰中。有些环境甚至没有窗口管理器：在这种情况下您的用户会做什么？

请注意，某些应用程序（如 Chromium 浏览器）不使用窗口管理器装饰：它们实现了自己的装饰，它们实现了自己的关闭/最大化/最小化按钮。这样，他们可以完全控制所有装饰按钮和菜单，但他们的装饰与桌面其余部分的“外观和感觉”不同。你可以考虑这样做，但我不鼓励这样做......你应该把你的菜单放在其他地方（它不是*那么*隐藏......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:18:15.113

您的意思是要将您的应用程序添加到系统菜单中？

我相信大多数现代桌面环境都实现了 XDG 菜单标准： [http ://standards.freedesktop.org/menu-spec/menu-spec-latest.html](http://standards.freedesktop.org/menu-spec/menu-spec-latest.html)

您可能也必须学习其他标准：http: [//standards.freedesktop.org/](http://standards.freedesktop.org/)

它们都很短，因此阅读和学习的时间不会超过几个小时。*

# asp.net - 如何在asp.net中停止文件上传过程？

> ID：10383125
> 
> 赞同：2
> 
> 时间：2012-04-30T11:42:59.473
> 
> 标签：asp.net

在我的应用程序中有一个上传视频文件的功能。如果用户上传了一个大视频文件，并且在上传之前如果他按下取消按钮，则面板会关闭，但上传过程不会停止。我使用了一个停止上传过程的功能，它在 Mozilla Firefox 中运行良好，但在 ie（Internet Explorer）中不起作用，请帮助我..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:07:19.937

我认为如果文件一旦开始我们就不能停止上传，这是在开始之前停止它的唯一方法。

但是，您可以在下面的链接中查看类似的讨论

[http://forums.asp.net/t/1303246.aspx/1](http://forums.asp.net/t/1303246.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:11:15.803

你可以试试这个：

好吧，可能有更好的方法来做到这一点，但我发现这会阻止它（如果你可以忍受重定向回页面）：

```
FileUpload1.FileContent.Dispose()
Response.Redirect("http://localhost/somesite/Default.aspx") 
```

# c# - Web 服务包装器

> ID：10383130
> 
> 赞同：6
> 
> 时间：2012-04-30T11:43:24.913
> 
> 标签：c#, .net, wcf, web-services

我正在编写一个引用某些 WCF 服务的 dll。该 dll 充当服务的网关，所有调用都通过它。可能会有并发调用。

我已经引用了该服务，但现在我无法决定如何正确编写包装函数。

此功能是否有一些示例或最佳实践。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:09:53.870

我会制作与 Web 服务接口匹配的包装器。包裹所有暴露的对象也是一个好主意。基本上创建一个代理。我发现对这类事情真正有用的是创建一个与 API 匹配的接口并实现它。这样，您可以创建 DLL 的虚拟版本进行测试，而无需与 WCF 调用相关的开销（或潜在成本）。如果您将来需要用备用提供程序替换 WCF 调用，它也会变得更简单。

例如，假设我们有一个用于处理付款的外部提供商的 WCF 服务。像这样的东西：

```
void ProcessPayment(float amount); 
```

我们可以轻松地将其挂接到我们的代码中。问题是对接口的简单更改将导致我们不得不在引用代码的任何地方进行更改。如果我们将提供者更改为其他人，即使界面几乎相同，也需要这样做。添加类似简单界面的内容：

```
interface IPaymentProvider
{
    void ProcessPayment(float amount);
} 
```

将我们的代码与 WCF 服务完全分离。我们可以很容易地构建一个这样的类：

```
class PaymentProviderAWrapper : IPaymentProvider
{
    void ProcessPayment()
    {
        // Call the WCF service
    }
} 
```

我们可以使用像 Spring.NET 这样的工厂或依赖注入框架动态加载。更改为提供者 B 就像创建新包装器一样简单：

```
class PaymentProviderBWrapper : IPaymentProvider
{
    void ProcessPayment()
    {
        // Call provider B's Native DLL
    }
} 
```

将您的代码从提供者 A 切换到 B 就像更改配置设置一样简单。

即使我们将库直接编译到我们的代码中，我们需要做的只是更改构造逻辑以使用新库。我们的应用程序的其余部分根本不会改变。只是一个简单的重新编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:40:21.130

为了响应 Graymatter 的回答，我看不出调用服务包装器之间的区别是什么调用并且传输绑定没有变化。

您首先要创建包装器的唯一原因是以某种方式公开的接口本身不能满足您的要求。您可能想要这样做有几个原因，但有几个常见的原因：

1.  协议转换 - 服务未根据您的需要通过正确的传输绑定公开
2.  服务组合——接口操作过于细化，不代表业务级别的操作。
3.  身份验证 - 也许您需要在您正在使用的端点之上的身份验证层。

那么如何包装服务端点取决于你为什么要包装服务......

# android - Android MapView：animateTo 在地图平移时不起作用

> ID：10383131
> 
> 赞同：1
> 
> 时间：2012-04-30T11:43:25.723
> 
> 标签：android

下面的代码执行以下操作：选中“焦点”复选框时，地图将动画到地图中的单个叠加层项目中。有一个问题：当我拖动地图以使地图在我选中复选框时仍在移动时，检查没有视觉效果。有任何想法吗？

```
List<Overlay> mapOverlays;
Drawable drawable;
AssetMarkersOverlay itemizedOverlay;
private CheckBox autofocusCheckBox;
MapView mapView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.getController().setZoom(4);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();
    drawable = this.getResources().getDrawable(R.drawable.bubble_blue);
    itemizedOverlay = new AssetMarkersOverlay(drawable);

    String assetName = "TEST";
    int lat = 3;
    int lon = 3;

    ArrayList<GeoPoint> geoPointList = new ArrayList<GeoPoint>();

    GeoPoint point = new GeoPoint(lat, lon);

    autofocusCheckBox = (CheckBox) findViewById(R.id.showInMap);
    autofocusCheckBox.setTag(point);
    autofocusCheckBox
            .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                public void onCheckedChanged(CompoundButton buttonView,
                        boolean isChecked) {
                    if (isChecked && buttonView.getTag() != null) {
                        focusAsset((GeoPoint) buttonView.getTag());
                    }
                }
            });

    geoPointList.add(point);
    itemizedOverlay.addOverlay(lat, lon, assetName, assetName);

    mapOverlays = mapView.getOverlays();
    mapOverlays.clear();
    mapView.postInvalidate();
    mapOverlays.add(itemizedOverlay);
    fitPoints(geoPointList, mapView);
    mapView.postInvalidate();

}

private void focusAsset(GeoPoint point) {
    mapView.requestFocus();
    mapView.clearAnimation();
    mapView.getController().stopAnimation(true);
    mapView.getController().setZoom(14);
    mapView.getController().animateTo(point);
    mapView.postInvalidate();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:57:19.290

我使用 AsyncTask 来解决类似的问题。它有时有效，但并非一直有效。基本上我只是调用 animateTo 几次，但有一些延迟。值得注意的是，getMapCenter 似乎返回了它正在制作动画的位置，而不是当前的真实中心，因为我尝试使用它来检测它是否到达新位置，并且它在很多时候都不起作用。此外，至少在 ICS 上，动画的持续时间似乎不会超过 1000 毫秒，因此在拨打电话之前可能会等待很长时间才能解决您的问题。

# jquery - jQuery过滤器 - 项目位置

> ID：10383134
> 
> 赞同：1
> 
> 时间：2012-04-30T11:43:34.867
> 
> 标签：jquery

非常简单 - [jQuery 过滤器](http://api.jquery.com/filter/)允许您过滤 jQuery 对象列表。它还接受一个 jQuery 对象作为参数，这真的很酷。

现在，假设我有一个元素列表 x - [div1, div2, div3, div4] 并且我有一个引用 div4 的 jQuery 对象 y。

我可以通过简单地使用将 div4 从所述列表中取出，`x.filter(y)`但是有没有一种简单的方法可以在 x 中获取 y 的索引？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:46:21.057

试试[`.index()`](http://api.jquery.com/index/)方法

```
x.index(y) 
```

# facebook - 向 facebook 用户发送应用生成的请求时提供重定向 url 参数

> ID：10383137
> 
> 赞同：1
> 
> 时间：2012-04-30T11:43:52.203
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-app-requests

我正在通过调用以下 js 函数向用户（已授权该应用）发送应用生成的请求

```
 function send_app_request(){
     FB.api( "/" + '<TO-USER-ID>' + "/apprequests", "POST", {
       message: "Custom Request for you!",
       title: "Sample title",
       access_token: "<MY-APP-ACCESS-TOKEN>"
      }, function(response) {
      alert(response.toSource());
      console.log(response);
     });
   } 
```

该脚本运行良好，当用户单击画布右上角的应用程序图标（带有红色通知）时，他会被重定向到应用程序的索引页面（apps.facebook.com/MY-APP )，这也很好。我的问题是，我应该在我的 FB.api 调用中添加什么参数，以便用户被重定向到我想要的应用程序 url（例如：apps.facebook.com/MY-APP/show-article/?article_id=5）而不是索引网址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:00:37.717

请求总是将用户引导到您的应用程序画布。

引用[请求文档](http://developers.facebook.com/docs/requests/)：

> 请求仅适用于 Canvas 应用程序，而不是网站，因为**接受请求会将用户定向到**发送请求的应用程序的 Canvas 页面 URL。

可能的解决方案是在 Request`data`属性中添加所需的 URL，一旦用户使用传入的 URL 参数登陆您的 Canvas URL `requests_ids`，读取这些请求并根据`data`属性决定用户应该被重定向到哪里。

> **`data`**
> 您可以传递用于跟踪的可选附加数据。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

**更新：**
要获得`data`分配的应用程序/用户请求，请从 Graph API 获取它：

```
https://graph.facebook.com/<REQUEST_OBJECT_ID>_<USER_ID>?access_token=APP_ACCESS_TOKEN 
```

# c# - Off By One 错误和变异测试

> ID：10383138
> 
> 赞同：8
> 
> 时间：2012-04-30T11:43:55.910
> 
> 标签：c#, algorithm, il, mutation-testing, ninja-turtles

在为我最喜欢的突变测试框架（[NinjaTurtles](http://ninjaturtles.codeplex.com)）编写“Off By One”突变测试器的过程中，我编写了以下代码来提供检查我实现的正确性的机会：

```
public int SumTo(int max)
{
    int sum = 0;
    for (var i = 1; i <= max; i++)
    {
        sum += i;
    }
    return sum;
} 
```

现在这看起来很简单，我并没有想到尝试改变 IL 中的所有文字整数常量会出现问题。毕竟，只有 3 个（the `0`、the`1`和 the `++`）。

**错误的！**

在第一次运行时，它变得非常明显，它永远不会在这个特定的实例中工作。为什么？因为将代码更改为

```
public int SumTo(int max)
{
    int sum = 0;
    for (var i = 0; i <= max; i++)
    {
        sum += i;
    }
    return sum;
} 
```

只在总和上加上 0（零），这显然没有效果。如果它是多重集合，则不同的故事，但在这种情况下它不是。

现在有一个相当简单的算法来计算整数的总和

```
sum = max * (max + 1) / 2; 
```

我很容易使突变失败，因为从其中的任何一个常数中加或减 1 都会导致错误。（鉴于`max >= 0`）

因此，针对这种特殊情况解决了问题。虽然它没有做我想要的突变测试，即检查当我丢失时会发生什么`++`- 实际上是一个无限循环。但这是另一个问题。

**所以 - 我的问题：** 是否有任何琐碎或非琐碎的情况，其中从 0 或 1 开始的循环可能会导致无法以类似方式重构（被测代码或测试代码）的“一个突变”测试失败？（请举例）

***注意****：当测试套件在应用突变后通过时，突变测试失败。*

**更新：**一个不那么琐碎的例子，但仍然可以重构测试以使其失败的例子如下

```
public int SumArray(int[] array)
{
    int sum = 0;
    for (var i = 0; i < array.Length; i++)
    {
        sum += array[i];
    }

    return sum;
} 
```

`var i=0`如果您给它的测试`var i=1`输入是`new[] {0,1,2,3,4,5,6,7,8,9}`. 但是，将测试输入更改为`new[] {9,8,7,6,5,4,3,2,1,0}`，变异测试将失败。因此，成功的重构证明了测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:19:22.033

我认为使用这种特殊方法，有两种选择。您要么承认由于这种数学异常而不适合突变测试，要么您尝试以一种使突变测试安全的方式编写它，要么通过重构为您提供的形式，要么以其他方式（可能是递归的？ ）。

您的问题实际上归结为：在现实生活中，我们是否关心元素 0 是否包含在循环操作中或排除在循环操作中，**并且我们无法围绕该特定方面编写测试**？我的直觉是说不。

您的微不足道的例子可能是我在[我的博客](http://davidmusgrove.com/blog/index.php/2012/04/test-drivenness/)中提到的缺乏测试驱动的例子，关于[NinjaTurtles](http://ninjaturtles.codeplex.com/)的文章。这意味着您没有尽可能地重构此方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T13:03:16.697

“突变测试失败”的一个自然案例是矩阵转置算法。为了使其更适合单个 for 循环，请为此任务添加一些约束：让矩阵为非正方形并要求就地进行转置。这些约束使一维数组最适合存储矩阵，并且可以使用 for 循环（通常从索引“1”开始）来处理它。如果从索引“0”开始，则不会发生任何变化，因为矩阵的左上角元素总是转置为自身。

有关此类代码的示例，请参阅[其他问题的答案](https://stackoverflow.com/a/8466764/1009831)（不在 C# 中，抱歉）。

这里“突变关闭”测试失败，重构测试不会改变它。我不知道是否可以重构代码本身以避免这种情况。理论上是可能的，但应该太难了。

* * *

我之前引用的代码片段并不是一个完美的例子。如果将 for 循环替换为两个嵌套循环（如行和列），然后将这些行和列重新计算回一维索引，它仍然可以重构。它仍然提供了如何制作一些无法重构的算法的想法（尽管不是很有意义）。

按索引递增的顺序遍历一个正整数数组，对于每个索引，计算其对为`i + i % a[i]`，如果它不在边界之外，则交换这些元素：

```
for (var i = 1; i < a.Length; i++)
{
    var j = i + i % a[i];
    if (j < a.Length)
        Swap(a[i], a[j]);
} 
```

这里再次 a[0] 是“不可移动的”，重构测试不会改变这一点，重构代码本身实际上是不可能的。

* * *

还有一个“有意义”的例子。让我们实现一个隐式二进制堆。它通常被放置到某个数组，从索引“1”开始（与从索引“0”开始相比，这简化了许多二进制堆计算）。现在为这个堆实现一个复制方法。此复制方法中的“逐一”问题无法检测到，因为未使用索引零并且 C# 对所有数组进行零初始化。这类似于 OP 的数组求和，但不能重构。

严格来说，你可以重构整个类，一切从“0”开始。但是仅更改“复制”方法或测试并不能防止“突变关闭”测试失败。Binary Heap 类可以被视为复制具有未使用的第一个元素的数组的动机。

```
int[] dst = new int[src.Length];
for (var i = 1; i < src.Length; i++)
{
    dst[i] = src[i];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:21:08.223

不太确定您到底在寻找什么，但在我看来，如果您将 sum 的初始值从 0 更改/变异为 1，您应该无法通过测试：

```
public int SumTo(int max) 
{ 
  int sum = 1; // Now we are off-by-one from the beginning!
  for (var i = 0; i <= max; i++) 
  { 
    sum += i; 
  } 
  return sum; 
} 
```

根据评论更新：

只有在处理索引 0（或没有它）时违反循环不变量时，循环才会在突变后失败。大多数此类特殊情况可以在循环外重构，但考虑 1/x 的总和：

```
for (var i = 1; i <= max; i++) {
  sum += 1/i;
} 
```

这可以正常工作，但是如果您将初始边界从 1 更改为 0，则测试将失败，因为 1/0 是无效操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T11:54:27.700

是的，有很多，假设我已经理解你的问题。

与您的情况类似的一种情况是：

```
public int MultiplyTo(int max)
{
    int product = 1;
    for (var i = 1; i <= max; i++)
    {
        product *= i;
    }
    return product;
} 
```

这里，如果从 0 开始，则结果为 0，但如果从 1 开始，则结果应该是正确的。（虽然它不会区分 1 和 2！）。

# android - Android 片段选项卡示例

> ID：10383142
> 
> 赞同：10
> 
> 时间：2012-04-30T11:44:13.573
> 
> 标签：android, android-fragments, android-ui

我目前正在开发 2.3 版本的 android，我想将我的应用程序切换到 4.0 版本，但`TabActivity`已弃用。所以我一直在寻找工作的例子，`FragmentTabs`但我找不到。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-07T22:22:09.227

我发现`FragmentTabs`API Demos 项目中的示例非常有用。

只需从 Eclipse 中创建一个新的 Android 示例项目并选择 API 演示（尝试 API 13）。另外对于支持（兼容性）库，Support4Demos 中有一个 FragmentTabs 演示

另请参阅此链接[Android-FragmentTabHost-demo](https://github.com/ClareZhang/Android-FragmentTabHost-demo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T12:31:00.690

一个很棒的库是 ActionBarSherlock。你可以在[这里](http://actionbarsherlock.com/)找到它。即使是片段也有很多示例和演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T13:45:08.360

值得一提的是，谷歌`ActionBarCompat`昨天在 v7 appcompat 库中引入了（连同 Android 4.3）。这是一个[视频概述](http://www.youtube.com/watch?v=6TGgYqfJnyc&feature=c4-overview&list=UUVHFbqXqoYvEWM1Ddxl0QDg)，这里是[文档](http://developer.android.com/reference/android/support/v7/app/ActionBar.html)。

# mongodb - 如何确保基于特定字段的数组中的唯一项 - mongoDB？

> ID：10383143
> 
> 赞同：19
> 
> 时间：2012-04-30T11:44:15.447
> 
> 标签：mongodb, indexing, unique, mongodb-query

在我的场景中，集合中有作者，每个作者都有`messages`，作者的每条消息都可以有`events`。每个演员只允许执行一种动作一次。

```
db.people.ensureIndex({messages.messageEvents.eventName: 1, messages.messageEvents.actorId: 1}, {unique: true}); 
```

我添加了索引，但没有效果。正如您在下面看到的，我的文档包含三个元素，它们具有`"eventName":"vote"`并且`"actorId":"1234"`应该违反我的约束。

如何`messageEvents`根据`eventName`和`actorId`字段确保数组中的唯一项？

实际上，我需要在没有第二次搜索和更新事件的情况下更新现有项目，而不是拒绝它。

```
{
  "_id": "1234567",
  "authorPoint": 0,
  "messages": [
    {
      "messageId": "112",
      "messageType": "Q",
      "messagePoint": 0,
      "messageEvents": [
        {
          "eventName": "Add",
          "actorId": "1234",
          "detail": ""
        },
        {
          "eventName": "Vote",
          "actorId": "1234",
          "detail": "up"
        },
        {
          "eventName": "Vote",
          "actorId": "1234",
          "detail": "down"
        },
        {
          "eventName": "Vote",
          "actorId": "1234",
          "detail": "cork"
        }
      ]
    }
  ]
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T16:05:16.873

Mustafa，唯一约束不在单个数组中强制执行，尽管它们在集合中的文档之间强制执行。这是一个已知的错误，暂时不会修复：

[https://jira.mongodb.org/browse/SERVER-1068](https://jira.mongodb.org/browse/SERVER-1068)

不过，有一个解决方法。保留您的唯一索引，并且：

1) 确保您的应用程序不会在数组中插入具有重复值的新文档。您可以在插入之前检查应用程序代码中的唯一性。

2) 更新现有文档时使用 $addToSet 而不是 $push。

# objective-c - 从 5.1 更改部署目标时构建失败

> ID：10383145
> 
> 赞同：0
> 
> 时间：2012-04-30T11:44:22.513
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting

我的应用程序启用了 ARC 并带有情节提要，并设置为部署目标 5.1。如果我将其更改为 4.2 部署目标，以便它可以在所有设备上运行，我会收到以下错误：

![在此处输入图像描述](../Images/527a258fba7aaf01aea27321e8d13746.png)

我不知道该怎么做才能解决这个问题。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:49:40.103

__weak 指令在 5.0 之前的 iOS 中不可用。对于 < 5.0 版本，您需要使用 __unsafe_unretained 指令而不是 __weak

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:51:31.887

你的问题是你的属性很弱。您应该使用 a`unsafe_unretained`而不是`weak`. [你可以在这里找到更多！](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# .net - 从受密码保护的目录下载文件

> ID：10383146
> 
> 赞同：0
> 
> 时间：2012-04-30T11:44:28.587
> 
> 标签：.net, vb.net, download, password-protection

我正在使用 vb.net 并且需要下载一个文件（从给定的 URL）。问题是该目录受密码保护。（使用标准 .htpasswd）

如果使用 vb.net 无法做到这一点，请提出替代解决方案。

任何帮助将不胜感激。我已阅读[本文](http://www.codeproject.com/Articles/35787/VB-NET-Background-File-Downloader)以下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:05:03.797

如果您希望允许用户在不输入密码的情况下从中下载文件，我不确定您为什么要对目录进行密码保护。但是，您可以编写一个 ASHX，将文件名作为查询字符串参数并为请求的文件提供下载服务。

# asp.net - 使用 ASP.Net MVC 3 构建一个简单的站点

> ID：10383150
> 
> 赞同：2
> 
> 时间：2012-04-30T11:44:53.373
> 
> 标签：asp.net, asp.net-mvc-3

我正在使用 mvc3 构建一个包含 5 个静态页面的简单站点。我只是想知道在这种情况下最佳做法是什么。到目前为止，我只有一个“页面”控制器，它有 5 个函数，每个函数都返回适当的视图。

我还更新了 global.asax 文件以使用：

```
routes.MapRouteLowercase(
    "Default", // Route name
    "{action}/{id}", // URL with parameters
    new { controller = "Page", action = "Index", id = UrlParameter.Optional } // Parameter defaults
); 
```

我意识到一般规则是为每个逻辑单元使用一个控制器，所以我认为这对于小型站点来说可以吗？

这是一种合适的方法还是我应该采取不同的做法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:50:53.810

你的方法很好。

但是，如果您只有*静态*页面，为什么还要使用 MVC？您可以只部署一堆 .html 文件并完成它。

# c# - 对于大型多行条目，字符串数组抛出 OutOfMemoryException

> ID：10383153
> 
> 赞同：2
> 
> 时间：2012-04-30T11:44:59.813
> 
> 标签：c#, winforms, string, out-of-memory

在 Windows 窗体 C# 应用程序中，我有一个文本框，用户可以在其中粘贴日志数据，并对其进行排序。我需要单独检查每一行，所以我将输入拆分为新行，但如果有很多行，大于 100,000 左右，它会抛出 OutOfMemoryException。

我的代码如下所示：

```
StringSplitOptions splitOptions = new StringSplitOptions();
if(removeEmptyLines_CB.Checked)
    splitOptions = StringSplitOptions.RemoveEmptyEntries;
else
    splitOptions = StringSplitOptions.None;

List<string> outputLines = new List<string>();

foreach(string line in input_TB.Text.Split(new string[] { "\r\n", "\n" }, splitOptions))
{
    if(line.Contains(inputCompare_TB.Text))
        outputLines.Add(line);
}
output_TB.Text = string.Join(Environment.NewLine, outputLines); 
```

问题来自当我按行拆分文本框文本时，这里`input_TB.Text.Split(new string[] { "\r\n", "\n" }`

有一个更好的方法吗？我曾考虑过获取前 X 段文本，在新行处截断并重复，直到所有内容都已阅读完毕，但这似乎很乏味。或者有没有办法为它分配更多的内存？

谢谢，加勒特

**更新**

感谢阿提拉，我想出了这个，它似乎工作。谢谢

```
StringReader reader = new StringReader(input_TB.Text);
string line;
while((line = reader.ReadLine()) != null)
{
    if(line.Contains(inputCompare_TB.Text))
        outputLines.Add(line);
}
output_TB.Text = string.Join(Environment.NewLine, outputLines); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:50:39.780

`Split`将不得不复制原始文本的内存需求，以及`string`每行的对象开销。如果这导致内存问题，处理输入的可靠方法是一次解析一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:11:05.523

更好的方法是一次提取和处理一行，并使用 a`StringBuilder`创建结果：

```
StringBuilder outputTxt = new StringBuilder();
string txt = input_TB.Text;
int txtIndex = 0;
while (txtIndex < txt.Length) {
  int startLineIndex = txtIndex;
GetMore:
  while (txtIndex < txt.Length && txt[txtIndex] != '\r'  && txt[txtIndex] != '\n')) {
    txtIndex++;
  }
  if (txtIndex < txt.Length && txt[txtIndex] == '\r' && (txtIndex == txt.Length-1 || txt[txtIndex+1] != '\n') {
    txtIndex++;
    goto GetMore; 
  }
  string line = txt.Substring(startLineIndex, txtIndex-startLineIndex);
  if (line.Contains(inputCompare_TB.Text)) {
    if (outputTxt.Length > 0)
      outputTxt.Append(Environment.NewLine);
    outputTxt.Append(line); 
  }
  txtIndex++;
} 
output_TB.Text = outputTxt.ToString(); 
```

先发制人的评论：有人会反对`goto`- 但这是这里需要的，替代方案要复杂得多（例如 reg exp），或者用另一个循环伪造 goto 和`continue`或`break`

使用 a`StringReader`拆分行是一种更清洁的解决方案~~，但它不能同时处理`\r\n`和`\n`作为新行~~：

```
StringReader reader = new StringReader(input_TB.Text); 
StringBuilder outputTxt = new StringBuilder();
string compareTxt = inputCompare_TB.Text;
string line; 
while((line = reader.ReadLine()) != null) { 
  if (line.Contains(compareTxt)) {
    if (outputTxt.Length > 0)
      outputTxt.Append(Environment.NewLine);
    outputTxt.Append(line); 
  }
} 
output_TB.Text = outputTxt.ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:51:06.487

我想对大型文本文件执行此操作的唯一方法是手动打开文件并使用`StreamReader`. [这](http://msdn.microsoft.com/en-us/library/system.io.file.opentext.aspx)是一个如何执行此操作的示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:58:19.280

您可以通过一次为每一行创建字符串来避免为所有行和数组创建字符串：

```
var eol = new[] { '\r', '\n' };

var pos = 0;
while (pos < input.Length)
{
    var i = input.IndexOfAny(eol, pos);
    if (i < 0)
    {
        i = input.Length;
    }
    if (i != pos)
    {
        var line = input.Substring(pos, i - pos);

        // process line
    }
    pos = i + 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T11:58:36.107

另一方面，[在这篇文章](https://stackoverflow.com/q/363680/505729)中，重点是“拆分”方法的实现很差。阅读它，并得出你的结论。

就像阿提拉说的，你必须逐行解析。

# android - 如何在 Android 设备的设置应用程序中添加自定义设置首选项

> ID：10383160
> 
> 赞同：1
> 
> 时间：2012-04-30T11:45:35.687
> 
> 标签：android, bluetooth

我正在开发一个基于蓝牙的应用程序，并想在设备的系统设置应用程序中设置一些首选项。同样，当用户安装新的输入键盘 apk 时，其设置会自动出现在设备设置应用程序的**语言和输入**选项中。

同样，我想在用户安装我的应用程序时添加一些首选项，并且设置应用程序的蓝牙设置应该使用我的自定义设置（如 CheckBox 首选项等）进行更新。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:52:40.540

您可以构建自己的固件，[从源代码](https://github.com/android/platform_packages_apps_settings)修改设置应用程序并包含您想要的任何内容。然后，您可以分发包含此固件的您自己的硬件。这就是设备制造商为其设备定制“设置”应用程序的方式。

SDK 应用程序无法通过设置应用程序添加系统范围的首选项。

# sql-server-2008 - 让服务器每天自动运行asp-script

> ID：10383165
> 
> 赞同：3
> 
> 时间：2012-04-30T11:45:50.673
> 
> 标签：sql-server-2008, asp-classic, batch-file, windows-server-2008

是否可以创建一个打开 firefox、运行网站然后再次关闭 firefox 的批处理文件？

就像是：

```
@echo off
start firefox http://..... 
```

这就是我卡住的地方......当网站完成加载时，它需要再次关闭firefix。

它用于每晚 23:59 运行维护脚本。该脚本基于本地，但不使用服务器就无法运行 asp 文件，因此我将其作为网站放置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T12:08:30.770

*改编自我几年前在 aspfaq.com 上写的一篇文章。*

使用 AT 命令和 Windows Scripting Host（或更基本的任务调度程序）以特定间隔调度 VBS 文件。   

首先，将 ASP 更改为 VBS 文件。这是通过 (1) 将扩展名更改为 VBS 来实现的；(2) 将所有 Server.CreateObject 调用更改为 CreateObject；(3) 删除所有`<%%>`分隔符和任何以浏览器为目标的代码（例如，response.write 语句或客户端 HTML）。我没有遇到任何进一步的并发症，而是 YMMV。   

您将 VBS 文件存储在文件系统中，并使用 AT 命令对其进行调度（这实际上是使用 Windows 的调度服务来调度其执行）。在命令提示符下，您可以单独使用 AT 来查看当前计划中的任务列表。你可以使用 AT/? 找出它所有的语法可能性。 

例如，要让文件在每个工作日上午 9:00 运行，我启动这个批处理文件（第一行清除现有条目）：     

```
at /delete /y 
at 9:00 /every:m,t,w,th,f d:\net\shared\getdata.vbs 
```

请注意，不涉及 Web 服务器；该文件是通过文件系统直接访问的。一旦我克服了“用户必须登录”和“重新启动时必须重置任务”的障碍（我认为这两个问题都是我们无法控制的特定机器的问题），一切都在运行对于我来说足够了。 

有关使用 WSH、CDONTS 和任务计划程序定期发送电子邮件的示例，请参阅[KB #221495](http://support.microsoft.com/kb/221495)。 

如果您所做的只是在 SQL Server 中进行数据库工作，那么您可能会考虑使用作业。这将允许您将作业的所有处理保留在您的数据库中，并防止与多个系统、连接和将 ASP 代码调整为非 ASP 行为相关的复杂性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-01T09:18:53.323

如果你只想调用一个已经存在的网站上的页面，下面是一个简单的方法来完成它。

```
Option Explicit
On Error Resume Next

' Declare our vars
Dim objWinHttp, strURL

' Request URL from 1st Command Line Argument.  This is
' a nice option so you can use the same file to
' schedule any number of differnet scripts just by
' changing the command line parameter.
'strURL = WScript.Arguments(0)

' Could also hard code if you want:
strURL = "http://www.example.com/myscript.asp"

' For more WinHTTP v5.0 info, including where to get
' the component, see our HTTP sample:
' http://www.asp101.com/samples/winhttp5.asp
Set objWinHttp = CreateObject("WinHttp.WinHttpRequest.5")
objWinHttp.Open "GET", strURL
objWinHttp.Send

' Get the Status and compare it to the expected 200
' which is the code for a successful HTTP request:
' http://www.asp101.com/resources/httpcodes.asp
If objWinHttp.Status <> 200 Then
    ' If it's not 200 we throw an error... we'll
    ' check for it and others later.
    Err.Raise 1, "HttpRequester", "Invalid HTTP Response Code"
End If

' Since in this example I could really care less about
' what's returned, I never even check it, but in
' general checking for some expected text or some sort
' of status result from the ASP script would be a good
' idea.  Use objWinHttp.ResponseText

Set objWinHttp = Nothing

If Err.Number <> 0 Then
    ' Something has gone wrong... do whatever is
    ' appropriate for your given situation... I'm
    ' emailing someone:
    Dim objMessage
    Set objMessage = Server.CreateObject("CDO.Message")
    objMessage.To       = "you@example.com"
    objMessage.From     = "cron job <cron@example.com>"
    objMessage.Subject  = "An Error Has Occurred in a " _
        & "Scheduled Task"
    objMessage.TextBody = "Error #: " & Err.Number & vbCrLf _
        & "From: " & Err.Source & vbCrLf _
        & "Desc: " & Err.Description & vbCrLf _
        & "Time: " & Now()

    objMessage.Send
    Set objMessage = Nothing
End If 
```

更改`strURL`为您的脚本或取消注释该行`strURL = WScript.Arguments(0)`并将 url 作为参数传递。将其放入带有`cscript.exe`.

这就是我执行所有基于 ASP 的计划任务的方式，因此我可以更轻松地进行测试，您可能希望将脚本锁定为仅接受通过服务器 IP 进行的访问，以确保它不会被机器人调用。

编辑：为清楚起见。

# android - android从应用程序列表中隐藏应用程序并从广播接收器启动它

> ID：10383167
> 
> 赞同：1
> 
> 时间：2012-04-30T11:46:05.347
> 
> 标签：android, broadcastreceiver, hide, launch

我想从应用程序列表中隐藏我的应用程序，这样第三人就不会知道该应用程序已安装。

我看到这可以通过以下方式实现：如果您想从应用程序启动器中隐藏您的应用程序，那么就不要包含`android.intent.category.LAUNCHER`在您的任何活动中。

我试过了，它正在工作。现在我需要定义一个快捷方式来启动我的应用程序。

我正在尝试通过一个广播接收器来实现这一点。`onreceive`所以如果拨打的号码=我的模式，我会检查我的，然后启动我的活动

我在这里有一些问题

1.  这是正确的做法吗

2.  请在下面查看我的接收器代码，这里我的接收器被调用，但与处理“数字拨号”的系统应用程序一起也被调用。因此，即使我拨打我的模式，在显示我的活动后，它也会拨打电话。如果拨打的号码符合我的模式，我想停止拨打电话。我怎样才能做到这一点

3.  我将我的活动作为一项新任务启动。当我第一次运行我的应用程序时，我的活动屏幕来了。但是当我再次拨号时，它没有被带到前面。我怎样才能做到这一点。我想如果我解决了我以前的问题，这将得到照顾。

    ```
    public class OutgoingCallInterceptor extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {

            final String originalNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

            this.setResultData("0123456789");

            final String newNumber = this.getResultData();

            String msg = "Intercepted outgoing call. Old number " + originalNumber + ", new number " + newNumber;

            Toast.makeText(context, msg, Toast.LENGTH_LONG).show();
            Intent intent1 = new Intent(context,ShowMessageActivity.class);
            intent1.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent1);
        }
    } 
    ```

清单文件

```
<application android:icon="@drawable/icon" android:label="Outgoing Call Interceptor">

    <receiver android:name="OutgoingCallInterceptor">
        <intent-filter android:priority="1">
            <action android:name="android.intent.action.NEW_OUTGOING_CALL"></action>
        </intent-filter>
    </receiver>
    <activity android:name="ShowMessageActivity" ></activity>

</application>

<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"></uses-permission> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-27T05:34:04.837

```
public class OpenApplication extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
    String compare_num = "777";
    if (number.equals(compare_num)) {
        Intent myintent = new Intent(context, MainActivity.class);
        myintent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(myintent);
    //  abortBroadcast();
        setResultData(null);
    }
} 
```

}

```
 <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />

   <!-- OPEN APP -->
    <receiver android:name="receiver.OpenApplication" >
        <intent-filter android:priority="0" >
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:26:29.973

1.  这不是一个权利，但也许是这样做的唯一方法:)
2.  您可以尝试在接收器上调用 this.abortBroadcast() 以中止呼叫。不幸的是，我现在无法检查它，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:11:53.433

但是，如果通过应用程序列表您的意思是说所有已安装的应用程序，那么我想您不可能使用

```
<action android:name="android.intent.action.CREATE_SHORTCUT" /> 
```

创建快捷方式

对于您的其余要求无法实现，因为我还没有找到以这种方式隐藏我的应用程序的方法，而且除了手机是个人设备之外。您可以使用广播接收器来了解何时启动拨号器意图。但我再次猜想您无法获得键入的键是一个不同的应用程序。

# java - 创建派生类的对象时是否创建了超类的对象？

> ID：10383168
> 
> 赞同：0
> 
> 时间：2012-04-30T11:46:08.753
> 
> 标签：java

如果我有一个***类 C***继承**类 B**并且**类 B**继承**类 A**，那么如果我创建***Class C***的对象，是否创建了超类的对象？如果是，怎么做？？如何访问**A 类**的私有成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:15:03.103

> 创建派生类的对象时是否创建了超类的对象？

不。

超类构造函数用于初始化当前对象的超类定义状态，但这并不等于创建超类的实例。

> 如果我有一个继承类B的类C，而类B继承类A，那么如果我创建一个C类的对象，是否创建了超类的对象？

不，见上文。

如果您创建 C 的实例，您将拥有一个派生最多类型为 C 的对象。该对象*也*将是`instanceof`B，但由于 C 中的方法覆盖和其他原因，它的行为可能与常规 B 不完全相同。

> 如果是，怎么做？？

没有实际意义。

> 如何访问 A 类的私有成员？

您不能`private`从子类直接访问超类的成员。这就是`private`访问修饰符的含义。如果您需要访问它们，则需要使用它们，您要么需要在超类中创建非私有方法来执行此操作（例如 getter 和/或 setter），要么更改成员的访问权限。

（另一种方法是使用反射来覆盖`private`访问修饰符，但您应该只将其用作最后的手段。最好修复超类代码以提供所需的访问......或者找出子类没有完全需要访问权限。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:06:47.573

您不能访问类之外的私有变量。

访问它们，

***1\. 您可以将它们公开或保护，但这不是一个好主意。***

***2.你可以为它写getter方法，这又不是私有方法，这是个好方法。***

***3.您可以使用反射来访问它。***

提供更多信息以更好地帮助您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:57:50.497

1.  是的，创建了超类的对象。
2.  您不能访问超类的私有成员，否则它们将不是私有的。您可以在超类中具有受保护的或公共的访问器方法，并且可以返回您的私有变量的值。或者，您可以使用反射来访问私有变量。但是你可以用于任何事情，而不仅仅是超类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T14:36:08.890

这取决于您使用的语言。如果您使用 C++，您可以使子类成为超类的朋友，然后您可以访问其公共成员。如果您使用 Java，则可以使用反射来定位超级对象并对其进行反射，但这会带来更多麻烦。

# android - 显示未读消息的计数

> ID：10383174
> 
> 赞同：-1
> 
> 时间：2012-04-30T11:46:24.523
> 
> 标签：android

我正在尝试模拟收件箱右上角显示的未读邮件计数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:51:10.477

您正在描述一个`Notification`. [这里是一些](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)`Notification`文档。这`number`字段可能就是您所说的“增量”，但请注意，`number`并非所有 Android 设备上都显示该字段，因此不应依赖该字段。

如果您有更**具体的**问题，请随时打开一个新的 StackOverflow 问题并提问！

# c - 求和的有效方法

> ID：10383176
> 
> 赞同：9
> 
> 时间：2012-04-30T11:46:25.097
> 
> 标签：c, arrays, algorithm

是否有任何有效的技术来进行以下求和？

给定一个包含*n 个*整数*A={X1,X2,…,Xn}*的有限集*A*，其中*Xi*是一个整数。现在有*A的**n*个子集，用*A1, A2, ... , An*表示。我们要计算每个子集的总和。有没有一些有效的技术？

 ***（请注意，*n*通常大于*A*的所有子集的平均大小。）

例如，如果*A={1,2,3,4,5,6,7,9}* , *A1={1,3,4,5}* , *A2={2,3,4}* , *A3= .. ...* _ 计算*A1*和*A2*总和的简单方法需要 5 个 Flops 进行加法：

*和(A1)=1+3+4+5=13*

*和(A2)=2+3+4=9*

...

现在，如果先计算 3+4，然后记录它的结果 7，我们只需要 3 个 Flops 进行加法：

*和(A1)=1+7+5=13*

*和(A2)=2+7=9*

...

一般情况下呢？有没有什么有效的方法可以加快计算速度？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:35:53.877

假设“加法”不仅仅是一个`ADD`操作，而是一些涉及两个整数操作数的非常密集的函数，那么一个明显的方法是缓存结果。

您可以通过合适的数据结构来实现这一点，例如包含由两个操作数组成的键和作为值的答案的键值字典。

但正如您`C`在问题中指定的那样，最简单的方法是`n`按`n`整数数组，其中的解决方案`x + y`存储在`array[x][y]`.

然后，您可以重复迭代子集，并为每对操作数检查数组中的适当位置。如果不存在任何值，则必须对其进行计算并将其放入数组中。然后该值替换子集中的两个操作数并进行迭代。

如果操作是可交换的，则操作数应在查找数组之前进行排序（即第一个索引始终是两个操作数中的最小值），因为这将最大化“缓存”命中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:42:00.057

对于某些子集的选择，如果您不介意进行一些（可能很昂贵的）预计算，那么有一些方法可以加快计算速度，但不是全部。例如，假设您的子集是 {1,2}, {2,3}, {3,4}, {4,5}, ..., {n-1,n}, {n,1}; 那么幼稚的方法对每个子集使用一个算术运算，显然你不能做得比这更好。另一方面，如果您的子集是 {1}, {1,2}, {1,2,3}, {1,2,3,4}, ..., {1,2,..., n} 那么你可以使用 n-1 算术运算，而天真的方法要糟糕得多。

这是进行预计算的一种方法。它并不总能找到最佳结果。对于每对子集，将*转换成本*定义为 min（对称差异的大小，Y - 1 的大小）。（X 和 Y 的对称差是 X 或 Y 中的一组事物，但不是两者。）因此，转换成本是计算 Y 元素之和所需的算术运算次数，给定X的。将空集添加到子集列表中，并使用 Edmonds 算法 (http://en.wikipedia.org/wiki/Edmonds%27_algorithm) 或更快但更复杂的变体之一计算最小成本有向生成树那个主题。现在确保当您的生成树有一条边 X -> Y 时，您在 Y 之前计算 X。（这是一种“拓扑排序”，可以有效地完成。

当您有 {1,2}, {3,4}, {1,2,3,4}, {5,6}, {7,8}, {5,6 ,7,8}。在使用上述过程确定您的操作顺序之后，您可以进行优化传递，您可以找到更便宜的方法来评估每个集合的总和，给定已经计算的总和，这在实践中可能会给出相当不错的结果。

我怀疑，但没有试图证明，为给定的一组子集找到一个最佳过程是 NP-hard 或更糟的。（它当然是*可计算*的；您可能进行的计算集是有限的。但是，从表面上看，它可能非常昂贵；您可能正在跟踪大约 2^n 部分和，添加任何一个他们在每个步骤中与其他任何步骤，并且最多有大约 n^2 步骤，对于 (2^2n)^(n^2) = 2^(2n^3) 操作的超幼稚成本来尝试每种可能性。 )

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:36:19.090

一种常见的优化技术是预先计算中间结果。在您的情况下，您可以使用 2 个加数预先计算所有总和，`A`并将它们存储在查找表中。这将产生`|A|*|A+1|/2`表条目，其中`|A|`是 的基数`A`。

为了计算 Ai 的元素总和，您：

*   查找Ai的前两个元素之和并保存在tmp中
*   而 Ai 中还有一个元素 x：
*   查找 tmp 和 x 的总和

为了`A1 = {1,3,4,5}`从您的示例中计算元素总和，请执行以下操作：

*   查找（1,3）= 4
*   查找（4,4）= 8
*   查找（8,5）= 13

请注意，计算任何给定 Ai 的总和不需要求和，因为在预先计算查找表时已经进行了所有工作。

如果将查找表存储在哈希表中，则`lookup()`在 O(1) 中。

这种方法的可能优化：

*   在计算求和结果的同时构建查找表；因此，您只计算您实际需要的那些总和。您的查找表现在是一个缓存。
*   如果您的加法操作是可交换的，您可以通过仅存储较小的和先出现的那些总和来节省一半的缓存大小。然后修改`lookup()`这样`lookup(a,b)`= `lookup(b,a)`if `a > b`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:30:41.773

如果假设求和是耗时的操作，您可以找到每对子集的[LCS](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)（通过假设它们按照注释中提到的方式排序，或者如果它们没有排序，则对它们进行排序），然后计算最大长度的 LCS 总和（在所有 LCS成对），然后用相关数字替换相关数组中的值，更新它们的 LCS 并继续这种方式，直到没有超过一个数字的 LCS。当然这不是最佳的，但它比简单的算法更好（求和的数量较少）。但是，您可以进行回溯以找到最佳解决方案。

例如对于您的样本输入：

```
A1={1,3,4,5} , A2={2,3,4}

LCS (A_1,A_2) = {3,4} ==>7 ==>replace it:

A1={1,5,7}, A2={2,7} ==> LCS = {7}, maximum LCS length is `1`, so calculate sums. 
```

您仍然可以通过计算两个随机数的总和来改进它，然后再次采用 LCS，...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:32:44.817

不。没有有效的技术。

因为它是[NP完全](http://en.wikipedia.org/wiki/NP-complete)问题。并且没有针对此类问题的有效解决方案

为什么它是NP完全的？
我们可以使用该问题的算法来解决[集合覆盖问题](http://en.wikipedia.org/wiki/Set_cover_problem)，只需将额外的集合放入集合中，包含所有元素。

示例：我们有一组元素
A1={1,2}, A2={2,3}, A3 = {3,4} 我们想解决集合覆盖问题。

我们添加到这个集合中，包含所有元素的数字集合 A4 = {1,2,3,4}

我们使用 John Smith 正在寻求的算法，并检查解决方案 A4 是否代表白衣。我们解决了 NP 完全问题。***

# javascript - JSF:Javascript google maps API - 标记获得相同的标题

> ID：10383177
> 
> 赞同：1
> 
> 时间：2012-04-30T11:46:41.763
> 
> 标签：javascript, google-maps, jsf

我可能在这里做了一些愚蠢的事情，但我不明白为什么我的两个标记最终都具有相同的标题。两个标记都以地理编码器的正确位置结束，并显示在不同的位置。

渲染前

```
function gMapInitialize() {

  var myLocs = [<ui:repeat value = "#{LocationBean.locations.address}" var = "loc"       varStatus = "loop">
                   [ "#{loc.name}","#{loc.street}","#{loc.city}","#{loc.state}", "#{loc.zipCode}"]#{!loop.last ? ',' : ''}
                   </ui:repeat>];
   //<![CDATA[                
     var myOptions = {
      center: new google.maps.LatLng(37.212832,-76.750488),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

    var geocoder = new google.maps.Geocoder();

    for(var i = 0; i < myLocs.length; i++){
    var myLoc = myLocs[i];
    var geoOptions = {
    address: myLoc[1] + "," + myLoc[2] + "," + myLoc[3] + "," + myLoc[4],

    }
    geocoder.geocode( geoOptions ,function(results, status){

    if(status == google.maps.GeocoderStatus.OK){
    var marker = new google.maps.Marker({
    map: map,
    position: results[0].geometry.location,
    title: myLoc[0],
    zIndex: i
    });

    }
    });               

  }
  }
 // ]]> 
```

渲染后：

```
function gMapInitialize() {

  var myLocs = [
                   [ "Richmond","9 North 3rd Street","Richmond","VA", "23219"],

                   [ "Hampton Roads","632 North Witchduck Road","Virginia Beach","VA", "23462"]
                   ];
   //<![CDATA[                
     var myOptions = {
      center: new google.maps.LatLng(37.212832,-76.750488),
      zoom: 8,
      mapTypeId: google.maps.MapTypeId.HYBRID
    };

    var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);

    var geocoder = new google.maps.Geocoder();

    for(var i = 0; i < myLocs.length; i++){
    var myLoc = myLocs[i];
    var geoOptions = {
    address: myLoc[1] + "," + myLoc[2] + "," + myLoc[3] + "," + myLoc[4],

    }
    geocoder.geocode( geoOptions ,function(results, status){

    if(status == google.maps.GeocoderStatus.OK){
    var marker = new google.maps.Marker({
    map: map,
    position: results[0].geometry.location,
    title: myLoc[0],
    zIndex: i
    });

    }
    });               

  }
  }
 // ]]> 
```

我是否试图在一个循环中做太多事情？我一直听到一些关于闭包的消息，但对 javascript 很陌生，对此一无所知。

哦，是的：我在每个标记上都有两个名字中的第二个。标记位于正确的位置，但两者都命名为“Hampton Roads”。因此，正确的信息被传递给标题，但好像第一个标题被第二个标题覆盖。

**更新**好吧，我修复了它，我想我对关闭有了更多的了解。所以主要是循环一直在循环，当函数被调用时，它已经在最后了。因此，即使在下面，每个标记也可能具有相同的 zIndex，我也应该传递“i”。

```
for(var i = 0; i < myLocs.length; i++){

    var myLoc = myLocs[i];
    var geoOptions = {
    address: myLoc[1] + "," + myLoc[2] + "," + myLoc[3] + "," + myLoc[4],

    }

    geocoder.geocode( geoOptions ,addMarkers(myLoc[0]));
    }

    function addMarkers(myTitle){
     return function(results,status){
    if(status == google.maps.GeocoderStatus.OK){
    var marker = new google.maps.Marker({
    map: map,
    position: results[0].geometry.location,
    title: myTitle,
    zIndex: i
    });

    }
    };

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:51:21.563

这是一个简单的关闭问题。myLoc[i] 在这两种情况下都指向循环结束后的同一个实体。只需将其包装在一个函数中即可创建一个新范围：

```
 for(var i = 0; i < myLocs.length; i++){
    (function(num) {
    var myLoc = myLocs[num];
    var geoOptions = {
    address: myLoc[1] + "," + myLoc[2] + "," + myLoc[3] + "," + myLoc[4],

    }
    geocoder.geocode( geoOptions ,function(results, status){

    if(status == google.maps.GeocoderStatus.OK){
    var marker = new google.maps.Marker({
    map: map,
    position: results[0].geometry.location,
    title: myLoc[0],
    zIndex: num
    });
    }(i));
    } 
```

# android - Android 使用 IFC 文件

> ID：10383178
> 
> 赞同：8
> 
> 时间：2012-04-30T11:46:44.057
> 
> 标签：android, 3d, ifc, bim

有人可以告诉我是否可以从 Android 操作系统访问或修改 IFC 文件？

如果是，是否有任何第三方库可用于在 Android 中查看 IFC 文件。

IFC 文件是指工业基础类，旨在描述建筑和施工行业数据，是平台中立的开放文件格式。

IFC 文件使用 AutoCAD 导出。

# javascript - jQuery Flexigrid 隐藏列下拉菜单

> ID：10383179
> 
> 赞同：3
> 
> 时间：2012-04-30T11:46:44.073
> 
> 标签：javascript, jquery, plugins, flexigrid

默认情况下，每列都有一个下拉菜单，展开时会显示所有带有复选框的列。我不想在任何列中显示下拉列表。请告诉我该怎么做？我是否必须进入脚本才能删除它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T11:49:31.853

这是`showToggleBtn`flexigrid 中的选项：

```
 $('#mygrid').flexigrid({
        showToggleBtn: false
    }); 
```

flexigrid 最好的文档就是打开[非缩小的 js](https://github.com/paulopmx/Flexigrid/blob/master/js/flexigrid.js)文件，选项就在顶部，并且有一些不错的评论。

# c++ - WTL，无法创建工具栏

> ID：10383191
> 
> 赞同：1
> 
> 时间：2012-04-30T11:47:37.137
> 
> 标签：c++, user-interface, toolbar, wtl

我有一个 SDI 应用程序。框架类是：

```
class CMainFrame :
  public CFrameWindowImpl<CMainFrame>,    
  public CMessageFilter, 
  public CIdleHandler, 
  public CUpdateUI<CMainFrame>
{
  DECLARE_FRAME_WND_CLASS(NULL, IDR_MAINFRAME);
/*......*/
} 
```

我在资源文件中有一个菜单和一个工具栏，两者都有`IDR_MAINFRAME`ID。菜单已创建，但工具栏未创建。

创建工具栏：

```
CreateSimpleToolBar();
CreateSimpleToolBar(IDR_MAINFRAME); // tried this also
UIAddToolBar(m_hWndToolBar);
UISetCheck(ID_VIEW_TOOLBAR, 1); 
```

最后，我没有看到任何工具栏。`CreateSimpleToolBar`返回非零。如何在 WTL sdi-application 中创建工具栏？谢谢/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:35:38.040

如果您使用的是 AppWizard，您可以添加默认工具栏。您应该检查此代码并找出与您的实现不同的地方。也许这有帮助： http: [//www.codeproject.com/Articles/3948/WTL-for-MFC-Programmers-Part-III-Toolbars-and-Stat](http://www.codeproject.com/Articles/3948/WTL-for-MFC-Programmers-Part-III-Toolbars-and-Stat)

# android - 通话时解锁屏幕android

> ID：10383204
> 
> 赞同：0
> 
> 时间：2012-04-30T11:48:34.890
> 
> 标签：android, screen

如何防止通话时屏幕被锁定。在超时后进行视频通话时，屏幕被锁定。我注意到我们使用的普通安卓手机并非如此。有人可以提供代码以在通话时保持解锁吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:59:59.413

[http://developer.android.com/reference/android/os/PowerManager.html](http://developer.android.com/reference/android/os/PowerManager.html)

更改 PowerManager WakeLock 设置。

# c# - 未找到端点；WCF 设施，温莎城堡 3.0，WCF 4

> ID：10383206
> 
> 赞同：2
> 
> 时间：2012-04-30T11:48:51.070
> 
> 标签：c#, wcf, iis, castle-windsor

在研究了大量关于配置 WCF 设施的 Castle Windsor 帖子后，我编写了以下配置。

这将托管在 IIS 中。

我所做的假设是：

1) 我需要“.Hosted()”扩展名，因为我在 IIS 中托管它，“基地址”将由 Web 服务器解析。在其他应用程序中，我在自托管（Windows 服务或控制台应用程序等）时使用了“.AddBaseAddress（” [http://etc](http://etc) “）”，但我的理解是在这种情况下不需要这样做。

2) 组件必须是“.Named(...)”，符合 .svc 标记的“服务”值。

3) “.At(...)” 将在 Web 服务器地址之外注册，因此不需要“ [http://localhost:9278/](http://localhost:9278/) ”前缀。

设置如下：

来自 global.asax 文件的中央安装程序。

```
 public static IWindsorContainer CreateContainer()
    {
        var container = new WindsorContainer();
        container.AddFacility<WcfFacility>()
        .Install(FromAssembly.This());

        return container;
    } 
```

WCF 服务的特定安装程序类。

```
 private const string FileServiceAddress = "Services/FileService.svc";

    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container
            .Register(Component.For<IFileService>()
                 .ImplementedBy<FileService>()
                 .Named("FileService")
                 .AsWcfService(new DataServiceModel()
                       .Hosted()
                       .PublishMetadata(o => o.EnableHttpGet())
                       .AddEndpoints(
                           WcfEndpoint
                               .BoundTo(new BasicHttpBinding())
                               .At(FileServiceAddress))));
} 
```

和 .svc 标记

```
<%@ ServiceHost 
    Language="C#" 
    Debug="true" 
    Service="FileService" 
    CodeBehind="FileService.svc.cs"
    Factory="Castle.Facilities.WcfIntegration.DefaultServiceHostFactory, 
    Castle.Facilities.WcfIntegration" %> 
```

但是，当我尝试调试/运行此解决方案时，它不会解析端点。如果我取出 .Hosted() 并为我安装的每个服务替换为 .AddBaseAddress(...) 那么它似乎工作正常？！但这肯定是错误的行为吗？和重复的基地址？当然，当我在处理基地址和端口绑定的 IIS 中部署它时，它不会正确注册？

![在此处输入图像描述](../Images/af12ca6c44f15f6c3e4dd4247aa62dbe.png) ![在此处输入图像描述](../Images/16650a8d7b95a9cd558570ce5707996e.png)

我错过了什么？针对设施注册 WCF 服务的正确方法是什么？

非常感谢帮助！

**更新**：调整后这个工作，但为什么呢？我没有指定任何配置，但端点可用？

```
 container
            .Register(Component.For<IFileService>()
                          .ImplementedBy<FileService>()
                          .Named("FileService")
                          .LifeStyle.PerWcfOperation()); 
```

# visual-studio-2010 - 在 Visual Studio 中自动添加丢失的 resx 文件

> ID：10383207
> 
> 赞同：0
> 
> 时间：2012-04-30T11:48:52.760
> 
> 标签：visual-studio-2010, localization, resx

我有一个解决方案，其中包含大约 30 个获胜表格。这些表单需要针对其他三种语言进行本地化。我编写了一个应用程序，它为 Windows 窗体的这些语言生成 resx 文件。

现在我生成了 90 个 resx 文件，它们位于原始 resx 文件所在的同一位置。我想要的不是手动添加这些现有资源。

有没有办法在 Visual Studio 中一次添加这些现有资源或以某种方式以编程方式添加这些现有资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:04:32.543

Programatically you're probably looking at this: [http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromfile(v=vs.100).aspx)

# c# - 简单的二维运动

> ID：10383208
> 
> 赞同：0
> 
> 时间：2012-04-30T11:49:04.477
> 
> 标签：c#, xna, 2d, physics

我最近开始使用 XNA 进行开发。我可以说我有更多的基本编程语言，但没有什么特别的。

作为我与 XNA 的第一个项目。我想创建一个简单的 2D 平台游戏，但目前，我正在尝试简单的移动。

我有 3 个向量（位置、速度、加速度）和一个简单的整数（最大速度）：

```
Vector2 pos = new Vector2(200, 200);
Vector2 vel = new Vector2(20, 20);
Vector2 acc = new Vector2(30, 30);
int maxVel = 50; 
```

然后，我在 XNA 框架的 Update 方法中有一些简单的代码来使我的精灵移动：

```
// Horizontal Movement
if (KeybState.IsKeyDown(Keys.Right))
{
if (vel.X < maxVel)
vel.X += acc.X * curTime;
pos.X += vel.X * curTime;
}
if (!KeybState.IsKeyDown(Keys.Right) && vel.X > 20)
{
pos.X += vel.X * curTime;
vel.X -= 1;
} 
```

所以，当我按下右箭头键时，精灵开始移动。速度从 20 开始，在加速度和经过的游戏时间的帮助下，增长到 maxVel（即 50），然后当释放右键时，它会失去速度。它完美地工作。

但是当我尝试对左箭头键做同样的事情时，我正在做**pos -=**而不是**pos+=**，这会降低 pos.X 值，但它使用恒定速度 (20) 而不是将其增加到 50 .

我认为我不够聪明，无法思考为什么会发生这种情况，因此非常感谢更好的开发人员提供的帮助。

请注意，我不想看其他任何地方，我想让我的版本按预期工作，所以直接回答是最好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:58:43.227

你的情况

```
if (!KeybState.IsKeyDown(Keys.Right) && vel.X > 20) 
```

每次未按下右箭头时（包括按下左箭头时）并且速度高于 20 时都会为真，因此您的代码会立即将速度降低回 20

您需要检查是否*没有*按下任何键（或至少没有按下箭头键）来降低速度。最简单的方法是：

```
if (!KeybState.IsKeyDown(Keys.Right) &&
    !KeybState.IsKeyDown(Keys.Left) &&
    !KeybState.IsKeyDown(Keys.Up) &&
    !KeybState.IsKeyDown(Keys.Down) && vel.X > 20) 
```

# c# - bobj 在 VS 2010 中没有定义

> ID：10383210
> 
> 赞同：1
> 
> 时间：2012-04-30T11:49:14.143
> 
> 标签：c#, javascript, asp.net, crystal-reports

谁能知道这个错误是什么，当我运行我的水晶报告时，得到像'bobj'这样的错误是未定义的

Microsoft JScript 运行时错误：“bobj”未定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:42:21.250

我遇到了同样的问题，我在谷歌上找到了这个。

希望能帮助到你！

[http://forums.asp.net/t/1512722.aspx/1](http://forums.asp.net/t/1512722.aspx/1)

# amazon-s3 - 无法从 Amazon S3 中的文件获取 mp3 标签

> ID：10383217
> 
> 赞同：0
> 
> 时间：2012-04-30T11:49:51.267
> 
> 标签：amazon-s3, boto

我正在尝试使用 Boto 从存储在 Amazon S3 中的文件中获取 mp3 标签。这是我的脚本：

```
import boto
from boto.s3.connection import S3Connection
import eyeD3

def main():
conn = S3Connection('______', '_________')
myBucket = conn.get_bucket('bucketName')

for key in skempi.list():
    if eyeD3.isMp3File(key.name):
        audio = eyeD3.Mp3AudioFile(key.name)

if __name__ == '__main__':
    main() 
```

但是，我可以列出存储桶中的所有文件等等。我得到的错误是

```
IOError: [Errno 2] No such file or directory: u'ulver/01 Track 1.mp3' 
```

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:08:25.477

您正在将 key.name 传递给 eyeD3 函数，但我认为您需要一个类似文件的对象来调用 eyeD3.Mp3AudioFile。我没有使用 eyeD3，它似乎不想通过 pip 安装，所以我不能尝试这个，但这样的东西应该可以工作：

```
for key in skempi.list():
    if eyeD3.isMp3File(key.name):
        audio = eyeD3.Mp3AudioFile(key) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T15:20:16.803

**如果不**从 S3 下载它们，就无法从文件中获取标签。

您可能会考虑使用 EC2 来处理文件或[Amazons Elastic MapReduce](http://aws.amazon.com/elasticmapreduce/)，但您仍将下载文件以读取标签。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T17:18:48.517

我必须编写一个脚本，将本地驱动器中的 mp3 文件的元数据，将歌曲上传到 Amazon S3（使用 Boto API）并将权限设置为“公共”，生成一个 URL，然后将 URL 和金属数据存储到MySQL 数据库。因此，以防万一遇到同样的问题，这解决了我的问题，因为我现在不需要上传歌曲然后为我的数据库运行更新。

# android - Android：从大数组列表中搜索

> ID：10383219
> 
> 赞同：4
> 
> 时间：2012-04-30T11:50:02.883
> 
> 标签：android, arrays, arraylist

我有大约 29,000 条记录的记录集。我的屏幕包含用于搜索条件的 EditText 框和包含所有 29,000 条记录的列表视图。

通过使用列出的方式进行搜索，它需要时间并且不会根据我的需要提供更少的输出。

我的 EditText 包含

```
final EditText txtSearchCity = (EditText) findViewById(R.id.edtCity);
        txtSearchCity.addTextChangedListener(new TextWatcher() {
            @Override
            public void afterTextChanged(Editable s) {
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                aCountryIDTemp.clear();
                aCityStateTemp.clear();

                for (int i = 0; i < aCountryID.size(); i++) {
                    if (aCityState
                            .get(i)
                            .toLowerCase()
                            .contains(
                                    txtSearchCity.getText().toString()
                                            .toLowerCase())) {
                        aCountryIDTemp.add(aCountryID.get(i));
                        aCityStateTemp.add(aCityState.get(i));
                    }
                }

                BindList();
            }
        });
    } 
```

BindList() 方法将 arraylist aCityStateTemp 设置为适配器。动态搜索和创建新 ArrayList 的任何其他方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-01T10:21:07.493

我会坚持使用[**Lambdaj**](http://code.google.com/p/lambdaj/) 库，它主要用于您想要限制循环以对集合进行排序和过滤的情况。

这是一个使用 lambdaj 进行过滤的小例子`ArrayList`。

```
ArrayList<String> sortedArrayList = select(arrList, having(on(String.class),
                                                   Matchers.containsString("a"); 
```

这将返回一个完整的过滤`ArrayList`器，您要使用它来填充您的`ListView`.

您还可以`filter`自定义类 - [**Java：过滤集合的最佳方法是什么？**](https://stackoverflow.com/a/1385698/726863)

**更新：**

上述解决方案`case-sensitive`可以解决您可以添加[**Multiple Matchers**](http://saturnboy.com/category/work/)的问题。

像这样你可以添加`Multiple Matchers`，

```
ArrayList<String> sortedArrayList = select(arrList, having(on(String.class),
   (Matchers.anyOf(Matchers.containsString("a"),Matchers.containsString("A"))))); 
```

**更新：**

更好的方法是使用`filter(Matcher<?> matcher, T...array)`

这是你可以做到的，

```
ArrayList<String> sortedArrayList = filter(Matchers.anyOf(
           Matchers.containsString("a"),Matchers.containsString("A")), arrList); 
```

此外，如果您对使用 的某些方法/功能感兴趣`lambdaj`，您可以提取源代码并使其正常工作。我正在添加相同的`filter()`

您只需下载[`hamcrest-all-1.0.jar(63 kb)`](http://mvnrepository.com/artifact/org.hamcrest/hamcrest-all)并添加以下代码即可`filter()`正常工作

```
public static <T> List<T> filter(Matcher<?> matcher, Iterable<T> iterable) {
    if (iterable == null)
        return new LinkedList<T>();
    else{
        List<T> collected = new LinkedList<T>();
        Iterator<T> iterator = iterable.iterator();
        if (iterator == null)
            return collected;
        while (iterator.hasNext()) {
            T item = iterator.next();
            if (matcher.matches(item))
                collected.add(item);
        }
        return collected;
    }
} 
```

因此，您可以从`lambdaj`源代码中挑选出最少的内容并集成到您的源代码中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:52:09.530

您可以使用 HashSet 或 LinkedHashSet（保持插入顺序）进行快速搜索。使用该类的 contains() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:22:57.517

我会假设你在初始化时已经传递给`aCityStateTemp`你`Adapter``ArrayList``Adapter`

现在更改内容后`aCityStateTemp`，您只需要调用`adapter.notifyDataSetChanged()`. 您不需要将`aCityStateTemp`to 适配器设置为 new `ArrayList`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:07:57.247

您可以将所有数据存储在 sqlite 数据库中，并使用类似查询检索搜索到的项目。

# html - 为特定浏览器创建布局

> ID：10383220
> 
> 赞同：1
> 
> 时间：2012-04-30T11:50:10.847
> 
> 标签：html, css, asp.net-mvc-3, layout

我有一个 asp.net-mvc3 网站。我使用 css 创建了所有布局。布局正是我在 Firefox 和 Chrome 上想要的，但在 Internet Explorer 上却是一团糟。

所以现在我正在尝试修复它。

但问题是我想修复它而不会在 Firefox 或 chrome 上弄乱它。

我必须从头开始并重建布局吗？或者有没有办法为特定浏览器指定特定布局。

像这样的东西：

如果 Internet Explorer 然后使用这个 css 表或样式，否则使用我已经拥有的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T11:53:46.787

使用这些（把它放在头上）：

针对所有版本的 IE

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

定位除 IE 之外的所有内容

```
<!--[if !IE]><!-->
    <link rel="stylesheet" type="text/css" href="not-ie.css" />
 <!--<![endif]--> 
```

仅针对 IE 7

```
<!--[if IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7.css">
<![endif]--> 
```

仅针对 IE 6

```
<!--[if IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6.css" />
<![endif]--> 
```

仅针对 IE 5

```
<!--[if IE 5]>
    <link rel="stylesheet" type="text/css" href="ie5.css" />
<![endif]--> 
```

仅针对 IE 5.5

```
<!--[if IE 5.5000]>
<link rel="stylesheet" type="text/css" href="ie55.css" />
<![endif]--> 
```

目标 IE 6 和更低版本

```
<!--[if lt IE 7]>
    <link rel="stylesheet" type="text/css" href="ie6-and-down.css" />
<![endif]-->

<!--[if lte IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6-and-down.css" />
<![endif]--> 
```

目标 IE 7 及更低版本

```
<!--[if lt IE 8]>
    <link rel="stylesheet" type="text/css" href="ie7-and-down.css" />
<![endif]-->

<!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7-and-down.css" />
<![endif]--> 
```

目标 IE 8 和更低版本

```
<!--[if lt IE 9]>
    <link rel="stylesheet" type="text/css" href="ie8-and-down.css" />
<![endif]-->

<!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8-and-down.css" />
<![endif]--> 
```

目标 IE 6 和更高版本

```
<!--[if gt IE 5.5]>
    <link rel="stylesheet" type="text/css" href="ie6-and-up.css" />
<![endif]-->

<!--[if gte IE 6]>
    <link rel="stylesheet" type="text/css" href="ie6-and-up.css" />
<![endif]--> 
```

目标 IE 7 和更高版本

```
<!--[if gt IE 6]>
    <link rel="stylesheet" type="text/css" href="ie7-and-up.css" />
<![endif]-->

<!--[if gte IE 7]>
    <link rel="stylesheet" type="text/css" href="ie7-and-up.css" />
<![endif]--> 
```

目标 IE 8 和更高版本

```
<!--[if gt IE 7]>
    <link rel="stylesheet" type="text/css" href="ie8-and-up.css" />
<![endif]-->

<!--[if gte IE 8]>
    <link rel="stylesheet" type="text/css" href="ie8-and-up.css" />
<![endif]--> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:51:51.030

您需要有条件的 IE 样式表。

创建您只希望 IE 使用的样式表，并将它们放在 IE 特定代码内的文档头中。例如：

```
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

这将在任何版本的 IE 上调用 all-ie-only.css 样式表，但您可以将代码更改为特定版本，甚至是一组版本，例如“小于 IE9”

这是一个很好的资源，包含所有信息 - http://css-tricks.com/how-to-create-an-ie-only-stylesheet/（Dan[已](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)[为](https://stackoverflow.com/a/10383277/310174)您复制并粘贴了此答案中的确切内容）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:54:01.590

您必须确定问题（可能与使用 Quirks 模式有关）并解决它们。

没有什么灵丹妙药可以解决所有 IE 问题，提供完全不同的样式表通常比您需要做的工作要多得多。

[您可以使用条件注释](http://www.quirksmode.org/css/condcom.html)为 IE 提供专门的代码，但在绝大多数情况下，这应该轻而易举地应用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T20:02:30.833

通过使用完整的 reset.css 样式表，我设法在 IE、Safari、Opera 和 Firefox 中获得非常一致的设计。

reset.css 将为每个浏览器“0 输出”不同的预设标准，然后将您的实际样式表加载到一个干净的石板上。

只有在测试完 reset.css 和 stylesheet-name.css 之后，我才会创建特定于浏览器的 hack。这是跨多个浏览器一致显示的最佳实践。

以下链接是一个很好的例子： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T11:53:20.093

你要的是一个`<!--[if IE]>`标签。这个[网站](http://www.quirksmode.org/css/condcom.html)详细介绍了它。

但是，将来您可以构建一个跨平台工作的站点，而不需要 If IE 标签。这完全取决于您的 CSS 和标记。

# eclipse - 如何在 Eclipse 4.2 中设置运行时类路径？

> ID：10383226
> 
> 赞同：6
> 
> 时间：2012-04-30T11:50:30.903
> 
> 标签：eclipse

当我从“运行”菜单中选择“运行配置”时，我看不到像以前版本的 Eclipse 中那样名为 Classpath 的选项卡。我在哪里设置运行时类路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:45:05.513

在 Eclipse 中，查看您想要运行时配置的项目的 Project -> Properties。选择运行/调试设置并选择新的或编辑您已有的设置。创建新的运行/调试配置时，请确保选择 Java 项目。当对话框打开时，您将看到一个用于类路径指令的选项卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T01:12:24.683

我在为 Eclipse 开发插件时偶然发现了这一点——显然整个类路径业务在那里略有不同。

有关更多详细信息，请参阅此[常见问题解答项目](http://wiki.eclipse.org/FAQ_What_is_the_classpath_of_a_plug-in?)

# mysql - 来自多个表的多个计数

> ID：10383229
> 
> 赞同：1
> 
> 时间：2012-04-30T11:50:35.063
> 
> 标签：mysql

我有两张桌子，我正在尝试从两张桌子上计数。表示从第一个表计数，然后从第二个表计数，结果应如下所示。

```
Count(users.name)   Count(users_types)
        5                    8 
```

但是我的查询带来了这个结果

```
Count(users.name)   Count(users_types)
        8                    8 
```

这是我的查询

```
select count(users.users),
count(users_types.users_types)
form users , users_types 
```

我怎样才能得到正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:55:44.690

尝试：

```
 select
(select count(users.users) from users),
(select count(users_types.users_types) form users_types) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:03:47.470

```
select (select count(*) cnt1 from table1),
 (select count(*) cnt2 from table2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:10:10.203

使用这样的子查询

```
select
  count(users.users)    Users,
  (select
     count(users_types.users_types)
   from teams)    UsersTypes
from users 
```

# android - 图像的等效颜色状态列表

> ID：10383232
> 
> 赞同：0
> 
> 时间：2012-04-30T11:50:46.193
> 
> 标签：android, gallery

我正在使用一个画廊，并且习惯于`getColorStateList`在选择文本时以不同的颜色显示文本，声明一个像这样的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_selected="true" android:color="@color/yellow"></item>

    <item android:state_selected="false" android:color="@color/white"></item>

    <item android:color="#FFFFFF"></item>
</selector> 
```

我需要对图像做一些非常相似的事情：我想在图库中选择它时显示不同的图像。

有谁知道该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:04:05.217

我想像这样使用图像视图的选择器。

```
<?xml version="1.0" encoding="UTF-8"?>
<selector 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item android:state_focused="false" android:state_selected="false"
        android:state_pressed="false" android:drawable="@drawable/your_image" />

    <!-- Focused states -->
    <item android:state_focused="true" android:state_selected="true"
        android:state_pressed="true" android:drawable="@drawable/your_image" />
    <!--normal state-->
  <item android:drawable="@drawable/your_image" /> 
```

将所有图像放在可绘制文件夹中

# java - Java，图像上的文本，更新

> ID：10383233
> 
> 赞同：0
> 
> 时间：2012-04-30T11:50:52.700
> 
> 标签：java, image, swing, text

我想在图像（BufferedImage）上写一些文本，但是当文本更新时，新文本会覆盖旧文本，例如所有数字都写在同一个地方，有人可以帮忙。我正在使用这段代码：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.*;

public class Prove extends JPanel {
    int size =  800;
    private BufferedImage sc ;
    JLabel label ;
    private int counter =0 ;

    public Prove()
    {       
        JFrame frame = new JFrame();
        frame.getContentPane().add(this);
        frame.setSize(2*size, size);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        try{ sc = ImageIO.read(new File("Images/ser.jpg"));     
            label =new JLabel(new ImageIcon(sc));
            this.add(label);
        }catch(IOException e){}

    }

    public void paintComponent(Graphics g)
    {
        g.setColor(Color.GRAY);
        g.fillRect(0,0, getWidth(),getHeight());        //prapavijen 

        Graphics2D g2 = (Graphics2D)g;

        paintScore(g2);
    }

    public void paintScore(Graphics g2)
    {

        if(sc != null)
        {
            Graphics gi = sc.createGraphics();
            gi.setFont(new Font("Times New Roman", Font.BOLD, 20));
            String r = counter+"";
            gi.drawString(r, 20, 20);
            counter ++;
            this.repaint();
            try{Thread.sleep(500);}
            catch(InterruptedException e){}
            System.out.println(counter);
        }   

    }

    public static void main(String[] args)
    {
        new Prove();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:54:43.023

您正在将文本绘制到相同的位置，它必然会覆盖

```
gi.drawString(r, 20, 20); 
```

如果您希望新文本出现在旧文本下方，则需要更改垂直坐标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:43:43.343

您必须保留原始图像的未修改副本。试试这个伪代码：

```
BufferedImage img1 = loadImage(); 
```

在你的油漆代码中：

```
BufferedImage img2 = createEmptyImage( img1 ); // same size, mode and depth
Graphics g = img2.getGraphics();
try {
    g.draw( img1 ); // background
    g.drawString(); // render text on top of it
} finally {
    g.dispose();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T17:45:13.463

没有理由直接在图像上绘制文本。只需将图像绘制到组件`Graphics`实例，然后将字符串绘制到相同的`Graphics`.

# actionscript-3 - 如何在动作脚本中启用双击？

> ID：10383235
> 
> 赞同：7
> 
> 时间：2012-04-30T11:50:53.987
> 
> 标签：actionscript-3, mouseevent

我试图这样做：

```
panel.addEventListener(MouseEvent.DOUBLE_CLICK,showEditPopup); 
```

但它不工作。

它适用于

```
panel.addEventListener(MouseEvent.CLICK,showEditPopup); 
```

所以，我想我必须先启用双击。需要帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T11:53:09.463

在执行此操作之前，您必须为您的面板启用双击：

```
panel.doubleClickEnabled=true; 
```

然后你可以这样做：

```
panel.addEventListener(MouseEvent.DOUBLE_CLICK,showEditPopup); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-10T23:18:05.173

今天早上我遇到了这个问题，试图在我的游戏中添加双击。这是我发现的。

首先，您必须像这样启用双击：

```
panel.addEventListener(MouseEvent.DOUBLE_CLICK,showEditPopup); 
```

您还可以在同一功能上添加单 CLICK 以防止双击时单击发生两次，如下所示：

```
panel.addEventListener(MouseEvent.CLICK,showEditPopup); 
```

那么这就是函数，一次只与 1 个交互：

```
function showEditPopup(e:MouseEvent) {
  if (e.type == "click") {
    //single click
  } else if (e.type == "doubleClick") {
    //double click
  }
} 
```

现在出现了2个问题。首先，您必须在侦听器之前启用像这样的双击：

```
panel.enableDoubleClick = true; 
```

更糟糕的是，如果显示对象绑定到另一个显示对象，它有一个鼠标事件，你必须为孩子禁用这些事件，以便双击工作。像这样：

```
panel.mouseChildren = false; 
```

这对我来说很糟糕，因为这就是我正在做的事情。用技能创建了一张卡片，技能有 mouseevent.move_over 来显示一个工具提示。但后来我想双击卡片将其放置/从牌组中移除。但它不起作用，因为附加到该影片剪辑的技能中有鼠标事件。所以我不得不禁用它们并找到另一种方法来做到这一点。因为在 mousechildren 设置为 false 的情况下工具提示没有显示，我别无选择让它绕过这些事件。

这就是为什么计时器解决方案确实是一个更好的主意的原因。双击的等待时间最多可以增加 1 秒。它不会影响人，甚至适合最慢的家伙；）

# php - FuelPhp 解码视图中的 HTML 实体

> ID：10383244
> 
> 赞同：0
> 
> 时间：2012-04-30T11:51:12.307
> 
> 标签：php, fuelphp

现在我正在使用 html_entity_decode 在我的视图中显示 HTML：

```
<strong>Body:</strong>
<?php echo html_entity_decode($post->body); ?></p> 
```

但是当我将数据传递给我的视图时，还有另一种方法可以做到：

```
public function action_view($id = null)
    {
        $data['post'] = Model_Post::find($id);

        is_null($id) and Response::redirect('Post');

        $this->template->title = "Post";
        $this->template->content = View::forge('post/view', $data);
    } 
```

我阅读了文档并尝试了：

```
public function action_view($id = null)
    {
        $data['post'] = Model_Post::find($id);

        is_null($id) and Response::redirect('Post');

        $this->template->title = "Post";
        $this->template->content = View::forge('post/view', $data);
                View::$auto_encode = false;
    } 
```

但这只是让我“访问未声明的静态属性”。显然我做错了什么......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:00:00.560

如我所见，您没有正确设置 auto_encode 。

试试这个，看看它是否是你要找的。

```
public function action_view($id = null)
{
    $view = View::forge('post/view');
    is_null($id) and Response::redirect('Post');

    $post = Model_Post::find($id);
    $view->set('post', $post, false); //Here the auto_encode is set to false

    $this->template->title = "Post";
    $this->template->content = $view;
} 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T15:21:19.503

有很多方法可以做到这一点：

```
protected $this->auto_encode = false; 
```

控制器中的该属性将停止对所有分配的值进行编码。

否则，使用这个：

```
$this->template->set('title', "Post", false);
$this->template->set('content', $view, false); 
```

这将停止对特定值进行编码。

# mysql - SQL - HAVING 子句中的多行

> ID：10383246
> 
> 赞同：3
> 
> 时间：2012-04-30T11:51:26.020
> 
> 标签：mysql, sql, database

好的，所以我想解决的查询：

我想表达以下业务规则：

显示需要额外审核的组（针对特定教程 (tutorialID) 和周 (week)）。

所以基本上我需要确定一个组中的成员数量，然后我需要汇总该周和该组的所有 Scrum 评论，看看这个数量是否等于该组中的成员数量。如果是，则意味着该周的所有成员都经过了审核，因此不需要显示。

假设：一个会员每周只能被评论一次。

我尝试了以下 SQL，但是出现以下错误`Subquery returns more than 1 row`

```
SELECT groupName, g.groupId
FROM `student` s, `group` g
WHERE s.GroupId = g.GroupId 
AND s.GroupId IS NOT NULL
AND s.tutorialId =  2
GROUP by s.GroupId
AND s.GroupID = (
    SELECT GroupId
    FROM student
    GROUP BY GroupId
    HAVING  count(*)> (
        SELECT count(*)
        FROM scrumreview r, student s
        WHERE r.reviewee = s.studentID
        GROUP BY GroupId    
        AND r.week = 5
        )
    ) 
```

学生 ![在此处输入图像描述](../Images/b38031083ef2ec49a528336732954809.png)

scrumreview ![在此处输入 asdasddescription](../Images/d23a6dc8cac4127c4da053b949fe3327.png)

团体 ![在此处输入图像描述](../Images/ea362797e579e03126a2fd0eecb1351d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:54:25.220

您的内部查询（从第 8 行开始）返回多个`groupid`s。相等运算符`=`比较 1 对 1，但您想要的是比较 1 对多，您可以使用`IN`.

因此，要解决此问题，请在第 7 行更改此代码...

```
AND s.GroupID = ( 
```

...对此：

```
AND s.GroupID IN ( 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:57:10.200

```
SELECT GroupId
FROM student
GROUP BY GroupId
HAVING  count(*)> (
    SELECT count(*)
    FROM scrumreview r, student s
    WHERE r.reviewee = s.studentID  
    AND r.week = 5
    ) 
```

返回超过 1 行，或者您需要优化该 SQL 使其仅返回一行，或者您需要更改以下行：

```
AND s.GroupID = ( 
```

到 IN：

```
AND s.GroupID IN ( 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:02:16.140

试试这个：

```
SELECT groupName, 
g.groupId FROM `student` s, 
`group` g WHERE s.GroupId = g.GroupId  
AND s.GroupId IS NOT NULL 
AND s.tutorialId =  2 
GROUP by s.GroupId AND s.GroupID in (SELECT GroupId FROM student GROUP BY GroupId 
HAVING  count(*)> (SELECT count(*) FROM scrumreview r, student s WHERE r.reviewee =
s.studentID AND r.week = 5)) 
```

# android - 无法转换为 android.app.Fragment

> ID：10383247
> 
> 赞同：31
> 
> 时间：2012-04-30T11:51:28.267
> 
> 标签：android

我只是想看看 Fragment 并且我得到了一些愚蠢的东西......有我的 SkippersActivity.java ：

```
public class SkippersActivity extends Activity{
 public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
    setContentView(R.layout.skippers_fragment);
 }
} 
```

还有我的 skippers_fragment.xml ：

```
 <?xml version="1.0" encoding="utf-8"?>
    <fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="com.arkezis.globedroid.SkippersFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/skippers_fragment">
    </fragment> 
```

还有我的 SkippersFragment.xml ：

```
public class SkippersFragment extends Fragment{
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{
    View mainView = inflater.inflate(R.layout.skippers, container, false);      
    return mainView;
} 
```

}

我的skippers.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >    
    <ListView android:id="@+id/list_skippers_all"
        android:layout_width="match_parent"
    android:layout_height="match_parent">
    </ListView>
    </LinearLayout> 
```

为什么我得到：

```
04-30 13:45:16.355: E/AndroidRuntime(30077): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.arkezis.globedroid/com.arkezis.globedroid.SkippersActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.os.Looper.loop(Looper.java:137)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread.main(ActivityThread.java:4424)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at java.lang.reflect.Method.invokeNative(Native Method)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at java.lang.reflect.Method.invoke(Method.java:511)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at dalvik.system.NativeStart.main(Native Method)
04-30 13:45:16.355: E/AndroidRuntime(30077): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Activity.setContentView(Activity.java:1835)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at com.arkezis.globedroid.SkippersActivity.onCreate(SkippersActivity.java:19)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Activity.performCreate(Activity.java:4465)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-30 13:45:16.355: E/AndroidRuntime(30077):    ... 11 more
04-30 13:45:16.355: E/AndroidRuntime(30077): Caused by: java.lang.ClassCastException: com.arkezis.globedroid.SkippersFragment cannot be cast to android.app.Fragment
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Fragment.instantiate(Fragment.java:574)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Fragment.instantiate(Fragment.java:549)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.app.Activity.onCreateView(Activity.java:4235)
04-30 13:45:16.355: E/AndroidRuntime(30077):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:673) 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-04-30T12:57:58.687

如果我不得不猜测，`SkippersFragment`正在扩展`android.support.v4.app.Fragment`. 但是*，*`SkippersActivity`不是扩展。尝试使用本机 API 级别 11 片段也是如此。*`android.support.v4.app.FragmentActivity``SkippersActivity`*

 ** * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-13T02:02:55.177

如果您使用 v4 兼容包，您的 Activity 必须扩展 FragmentActivity，而不是 Activity。如果您使用 Android > 3.0，那么您的 Activity 会扩展 Activity，但请阅读 CommonsWare 关于不混合两种类型的片段的答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T20:15:41.370

另一个需要注意的陷阱是确保不要忘记从活动中调用 super.onCreate()。如果你像我一样犯了这个愚蠢的错误，即使你没有不匹配标准和支持，你也会看到“Error inflating class fragment”和“... cannot be cast to android.app.Fragment”错误.v4 版本的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T19:05:53.123

我在尝试扩展 ListFragment 时遇到了同样的错误。我的发现是，要在 minSdkVersion < 11 的项目上使用 ListFragment，我必须`import android.support.v4.app.ListFragment;`. 否则，我将不得不`import android.app.ListFragment;`。

这个[链接](https://stackoverflow.com/questions/15109017/why-android-app-fragment-and-android-support-v4-app-fragment-is-conflicting)澄清了我的问题。*

# sql - SQL 从数据库中获取 X 个帐户，这可能是可变的行数

> ID：10383252
> 
> 赞同：5
> 
> 时间：2012-04-30T11:51:43.117
> 
> 标签：sql, sql-server, stored-procedures

我有一个`AccountAction`非规范化的 SQL Server 表。它是`Account`and`Action`表的扁平化版本，我希望它可以更快地报告数百万行的查询。一个`Account`可以有很多`Actions`，所以表格看起来类似于：

```
Account     Action
account1    action1
account1    action2
account1    action10
account2    action5 
```

但是，我在获取简单存储过程中受限子集的信息时遇到了一些麻烦。

```
select Account, Action
from AccountAction
where ??? 
```

我正在寻找的是获得前 X 个帐户及其所有操作。所以这将是一个动态的行数。因此，如果我传入 1，使用上面的示例表，我会得到 3 行（即给我第一个帐户的所有行）。

（我不介意帐户名称会出现在每一行中 - 它会在其他地方进行旋转）

我是否需要使用 ROWNUM 或类似来限制行？我确信这一定是一个比我迄今为止发现的更简单的问题。

**编辑**

使用 TOP 的答案不起作用，在示例中，如果我说“给我一个（第一个）帐户”，我希望返回 3 行。但是我怎么知道会有 3 个呢？它的动态。此外，它们可能不是连续的，如果 account1 的 action99 在结果中的位置为 5500 万怎么办。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T11:56:40.747

```
WITH
  SequencedData
AS
(
  SELECT
    DENSE_RANK() OVER (ORDER BY Account) AS account_sequence_id,
    *
  FROM
    AccountAction
)
SELECT
  *
FROM
  SequenceData
WHERE
  account_sequence_id = ??? 
```

或者，对于倍数...

```
WHERE
  account_sequence_id BETWEEN 3 AND 5    -- For the 3rd, 4th and 5th accounts. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T11:58:12.523

```
SELECT *
FROM AccountAction
WHERE account IN  (SELECT account
    FROM AccountAction
    GROUP BY account HAVING account BETWEEN *start-account* AND *end-account*
    ORDER BY account
) 
```

说明：子查询按不同的帐户分组（并允许比简单的更细粒度的选择标准`DISTINCT`）并仅返回这些帐户。外部 SELECT 会根据子查询获取的不同帐户为您提供可变数量的行。

编辑：以上假设可以按表中的`account`字段进行过滤`AccountAction`；这通常是在数据库级别连接关系的表中的情况*。*`M:N`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:56:35.907

如果我的问题是正确的，那么如果你想选择最初的 10 行然后使用

```
SELECT TOP 10 Account, Action
FROM AccountAction 
```

或者如果你想要一些最初的 20% 的记录，那么使用 -

```
SELECT TOP 10 PERCENT Account, Action
FROM AccountAction 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:57:11.303

你试过TOP吗？

```
 declare @hoW_many int
 set @hoW_many = 10

 select top (@hoW_many)  * 
 from AccountAction 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:04:21.480

一个带有关键字（和不同）的简单子选择`top`，将为您提供前 X 个帐户的所有操作

```
select * from AccountAction
where Account in 
(select distinct top (@NumberOfAccounts) Account 
from AccountAction order by Account) 
```

# .net - .NET 4 中的非阻塞 Task.wait？

> ID：10383253
> 
> 赞同：0
> 
> 时间：2012-04-30T11:51:44.347
> 
> 标签：.net, vb.net, task-parallel-library, nonblocking

我正在尝试等待 .NET 4 中的任务结果，就像您可以使用 .NET 4.5 中的 await 关键字一样。我只是不知道该怎么做......

我的代码（证明我至少在尝试）：

```
 Private Function GetXDocumentFromWebLocationAsync(ByVal request As WebRequest) As XDocument
        Dim queryTask As Task(Of WebResponse)
        queryTask = task(Of WebResponse).Factory.FromAsync(AddressOf request.BeginGetResponse, AddressOf request.EndGetResponse, Nothing, Nothing)
        Return XDocument.Load(queryTask.Result.GetResponseStream)
    End Function 
```

如您所料，GetResponse 调用在不同的线程上执行，但函数必须等待结果才能返回。不幸的是，这会阻塞我的主线程，直到任务完成，我对如何让它等待而不阻塞毫无头绪。我也不想使用异步 CTP，因为那只是逃避问题。

秘方是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:31:15.293

没有秘方。如果你想创建一个返回某个异步操作结果的方法，你只需要阻塞线程直到操作完成。

但是还有其他方法可以实现相同的目标。在 .Net 中执行此操作的“旧”方式是相同的`WebRequest`用途：有两种方法`BeginGetXDocument`和`EndGetXDocument`. 然后，您可以将委托传递给`Begin`将在操作完成时执行的方法。

`Task`另一种方法是从您的方法中返回 a 。为此，您可以使用[`ContinueWith()`](http://msdn.microsoft.com/en-us/library/dd235663.aspx)：

```
Private Function GetXDocumentFromWebLocationAsync(ByVal request As WebRequest) As Task(Of XDocument)
    Dim queryTask As Task(Of WebResponse)
    queryTask = Task(Of WebResponse).Factory.FromAsync(
        AddressOf request.BeginGetResponse, AddressOf request.EndGetResponse, Nothing, Nothing)
    Return queryTask.ContinueWith(
        Function(antecendent) XDocument.Load(antecendent.Result.GetResponseStream))
End Function 
```

这样，方法的使用者可以选择同步等待结果（使用`Wait()`or `Result`），也可以`ContinueWith()`再次使用。

在 GUI 应用程序中使用`ContinueWith()`时，您必须小心：默认情况下，延续在 ThreadPool 线程上运行。要在 GUI 线程上运行延续，您可以使用[`TaskScheduler.FromCurrentSynchronizationContext()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx). 或特定于您的 GUI 库的方法（`Dispatcher.Invoke()`在 WPF 中，`Control.Invoke()`在 Winforms 中）。

# ios-simulator - 我可以使用 iPadian 作为 iPad 模拟器进行网站开发吗？

> ID：10383260
> 
> 赞同：1
> 
> 时间：2012-04-30T11:52:33.180
> 
> 标签：ios-simulator, emulation

我不确定它是否准确。

对于 iPhone/iPad，我不想购买，也不想切换到 Mac。iPhone/iPad 模拟器对我来说是个大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-29T15:28:25.683

非常古老的线程，但我自己也有同样的问题。

我正在尝试 Ipadian，但不是很喜欢结果。

可能更好，我建议获取 virtualbox 并安装 MacOSX，然后打开 XCODE 目录的内容，并且有一个 iOS 模拟器。这应该工作得很好/准确。

还有browserstack，但要花钱。

# android - 活动流程

> ID：10383261
> 
> 赞同：1
> 
> 时间：2012-04-30T11:52:33.583
> 
> 标签：android

我有 4 个活动。A、B、C 和 D。

从每个活动用户可以开始任何活动。
即活动 A 有 3 个按钮来启动 B、C 和 D。以同样的方式，所有其他活动也有 3 个按钮。

现在我的问题是如果用户按这个顺序 A->B->C->B.Now 如果用户按下返回按钮，那么这个顺序就会发生。B->C->->B->A。我想这样改B->->C->A。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:54:55.550

我不清楚你的问题，但也许尝试使用：

```
android:launchMode="singleInstance" 
```

你想一直保持同一个实例，而不是创建一个新实例，是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:33:35.190

`intent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);`在开始任何活动之前使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:04:21.003

就像@Krishnakant 说你需要添加finish(); 每次，据我所知，后退按钮被称为 android 编程的致命弱点，因为编码或添加处理程序并不容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:55:33.393

当您向前移动时，使用 finish() 完成活动 B，这意味着 A>B(finish())>C>B

# java - Java Spring MVC 平铺

> ID：10383265
> 
> 赞同：0
> 
> 时间：2012-04-30T11:52:47.187
> 
> 标签：java, spring-mvc

**爪哇**

```
web.xml
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">

    <display-name>Spring MVC Application</display-name>
    <welcome-file-list>
        <welcome-file>/WEB-INF/index.jsp</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/mvc-dispatcher-servlet.xml,/WEB-INF/spring-security.xml</param-value>
    </context-param>

    <!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

</web-app> 
```

mvc-调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/context
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/tx
                        http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:property-placeholder location="classpath:jdbc.properties" />
    <context:component-scan base-package="com.e3learning" />
    <context:component-scan base-package="com.e3learning.controller" />

    <tx:annotation-driven transaction-manager="hibernateTransactionManager"/>

    <bean id="viewResolver1" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass">
            <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
        </property>
    </bean>

    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/pages/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
        <property name="basenames">
            <list>
                <value>mymessages</value>
            </list>
        </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${database.driver}" />
        <property name="url" value="${database.url}" />
        <property name="username" value="${database.user}" />
        <property name="password" value="${database.password}" />
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.e3learning.model.Account</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">${hibernate.dialect}</prop>
                <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>             
            </props>
        </property>
    </bean>

    <bean id="hibernateTransactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>
</beans> 
```

**瓷砖.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">
<tiles-definitions>
    <definition name="base.definition" template="/WEB-INF/pages/jsp/layout.jsp">
        <put-attribute name="title" value="" />
        <put-attribute name="header" value="/WEB-INF/pages/jsp/header.jsp" />
        <put-attribute name="menu" value="/WEB-INF/pages/jsp/menu.jsp" />
        <put-attribute name="body" value="" />
        <put-attribute name="footer" value="/WEB-INF/pages/jsp/footer.jsp" />
    </definition>

    <definition name="welcome" extends="base.definition">
        <put-attribute name="title" value="Welcome To E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/welcome.jsp" />
    </definition>

    <definition name="login" extends="base.definition">
        <put-attribute name="title" value="Login E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/login.jsp" />
    </definition>

    <definition name="contact" extends="base.definition">
        <put-attribute name="title" value="Contact E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/contact.jsp" />
    </definition>

    <definition name="mylist" extends="base.definition">
        <put-attribute name="title" value="My List E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/mylist.jsp" />
    </definition>

    <definition name="accountlist" extends="base.definition">
        <put-attribute name="title" value="Account List E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/accountlist.jsp" />
    </definition>

    <definition name="accountedit" extends="base.definition">
        <put-attribute name="title" value="Account List E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/accountupdate.jsp" />
    </definition>

    <definition name="accountadd" extends="base.definition">
        <put-attribute name="title" value="Add Account E3 Learning" />
        <put-attribute name="body" value="/WEB-INF/pages/accountadd.jsp" />
    </definition>

</tiles-definitions> 
```

**AccountController.java**

```
package com.e3learning.controller;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.e3learning.model.Account;
import com.e3learning.model.Contact;
import com.e3learning.service.AccountService;
import com.e3learning.service.AccountServiceImpl;

@Controller
public class AccountController {

    @Autowired
    private AccountService accountService;

    @RequestMapping(value="/login", method = RequestMethod.GET)
    public String login(ModelMap model) {

        return "login";
    }

    @RequestMapping(value="/loginfailed", method = RequestMethod.GET)
    public String loginerror(ModelMap model) {
        model.addAttribute("error", "true");
        return "login";
    }

    @RequestMapping(value="/logout", method = RequestMethod.GET)
    public String logout(ModelMap model) {
        return "login";
    }

    @RequestMapping(value = "/save", method = RequestMethod.POST)
    public ModelAndView saveAccount(@ModelAttribute("account") Account account, BindingResult result) {
        accountService.addAccount(account);
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("accounts", accountService.listAccounts());

        return new ModelAndView("accountlist", model);
    }

    @RequestMapping(value = "/accountadd", method = RequestMethod.GET)
    public ModelAndView addAccount(@ModelAttribute("account") Account account, BindingResult result) {

        return new ModelAndView("accountadd");
    }

    @RequestMapping(value = "/accountdelete/{accountid}", method = RequestMethod.GET)
    public ModelAndView deleteAccount(@PathVariable String accountid) {
        accountService.deleteAccount(accountid);
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("accounts", accountService.listAccounts());

        return new ModelAndView("accountlist", model);
    }

    /*@RequestMapping(value = "/accountedit", method = RequestMethod.GET)
    public ModelAndView editAccount(@ModelAttribute("account") Account account, BindingResult result) {

        return new ModelAndView("accountedit");
    }*/

    @RequestMapping("/welcome")
    public ModelAndView showWelcome() {
        System.out.println("## WELCOME GENIUS");
        return new ModelAndView("welcome");
    }

    @RequestMapping("/mylist")
    public ModelAndView showList() {
        System.out.println("## HELLO LIST");
        return new ModelAndView("mylist");
    }

    @RequestMapping(value = "/accountlist", method = RequestMethod.GET)
    public ModelAndView listAccounts() {
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("accounts", accountService.listAccounts());

        return new ModelAndView("accountlist", model);
    }

    @RequestMapping("/contact")
    public ModelAndView showContacts() {
        System.out.println("## HELLO GENIUS");
        return new ModelAndView("contact", "command", new Contact());
    }

    @RequestMapping(value = "/accountedit/{accountid}", method = RequestMethod.GET)
    public ModelAndView updateAccount(@PathVariable String accountid) {
        System.out.println("## HELLO UPDATE");
        return new ModelAndView("accountupdate", "account", accountService.getAccountDetails(accountid));
        //return new ModelAndView("accountupdate", accountService.getAccountDetails(accountid));
    }

    @RequestMapping(value = "/accountupdate", method = RequestMethod.POST)
    public ModelAndView editAccount(@ModelAttribute("account") Account account, BindingResult result) {

        accountService.updateAccount(account);
        Map<String, Object> model = new HashMap<String, Object>();
        model.put("accounts", accountService.listAccounts());

        return new ModelAndView("accountlist", model);
    }
} 
```

**accountList.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>List Accounts</title>
    </head>
    <body>
        <h1>List Accounts</h1>
        <!-- <a href="/SecurityNamespace/add">Add Account</a> -->
        <form:form modelAttribute="account" method="GET" >
            <table border="1" cellpadding="2" cellspacing="5" width="100%">
                <tr>
                    <th>Account ID</th>
                    <th>Account Name</th>
                    <th>Account Description</th>
                    <th>Account Creation Date</th>
                    <th>Update</th>
                    <th>Delete</th>
                </tr>
                <c:if test="${!empty accounts}">
                    <c:forEach items="${accounts}" var="account">
                        <tr>
                            <td><c:out value="${account.accountId}"/></td>
                            <td><c:out value="${account.accountName}"/></td>
                            <td><c:out value="${account.accountDescription}"/></td>
                            <td><c:out value="${account.accountCreationDate}"/></td>
                            <td><a href="/SecurityNamespace/accountedit/${account.accountId}">Update</a></td>
                            <td><a href="/SecurityNamespace/accountdelete/${account.accountId}">Delete</a></td>
                        </tr>
                    </c:forEach>
                </c:if>
            </table>
        </form:form>
    </body>
</html> 
```

**我正在使用弹簧拼贴 2 进行通用布局。我想通过拼贴获取带有 id 的页面。当我打开我的页面进行编辑时，此链接包含带有 id 的路径，然后它在新页面中打开而不是通用布局。请帮助我**

喜欢：这个 JAVA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:03:03.523

It's kind of hard to decipher what you are asking, but I'll give it a go. If you're talking about `accountedit/<id>` page, then I'm guessing this call is wrong:

```
@RequestMapping(value = "/accountedit/{accountid}", method = RequestMethod.GET)
public ModelAndView updateAccount(@PathVariable String accountid) {
    System.out.println("## HELLO UPDATE");
    return new ModelAndView("accountupdate", "account", accountService.getAccountDetails(accountid));
    //return new ModelAndView("accountupdate", accountService.getAccountDetails(accountid));
} 
```

I'd try and change it to

```
@RequestMapping(value = "/accountedit/{accountid}", method = RequestMethod.GET)
public ModelAndView updateAccount(@PathVariable String accountid) {
    System.out.println("## HELLO UPDATE");
    return new ModelAndView("accountedit", "account", accountService.getAccountDetails(accountid));
} 
```

I think you have problems as `accountupdate` is not a mapped tile.

# objective-c - 模拟器有效，设备无效？

> ID：10383269
> 
> 赞同：1
> 
> 时间：2012-04-30T11:53:14.117
> 
> 标签：objective-c, ios, xcode, frameworks, openfeint

我发现我的设备不工作和模拟器工作的问题。当我注释掉这部分时，它可以工作：

```
[OpenFeint initializeWithProductKey:@"MYKEY" andSecret:@"MYSECRET" andDisplayName:@"LatinToGo" andSettings:settings andDelegates:[OFDelegatesContainer containerWithOpenFeintDelegate:self]]; 
```

所以它看起来像这样：

```
//[OpenFeint initializeWithProductKey:@"MYKEY" andSecret:@"MYSECRET" andDisplayName:@"LatinToGo" andSettings:settings andDelegates:[OFDelegatesContainer containerWithOpenFeintDelegate:self]]; 
```

当我注释掉上面的那部分时它工作得很好，但是当我点击打开假动作按钮时，我得到了这个错误：

```
EXC_BAD_ACCESS. 
```

我将 My key 替换为我的 app Key in open feint，并将 my secret 替换为我的 app 的密码。

当我单击打开假动作按钮时，它会转到一个文件并以绿色突出显示该部分：

```
[inv invoke]; EXC_BAD_ACCESS 
```

然后当我进入时在我的控制台中：

> 2012-04-28 08:53:12.076 BalloonsPop[500:707] 应用程序窗口在应用程序启动结束时应该有一个根视图控制器单步直到从函数退出 +[OpenFeint(Private)launchDashboardWithDelegate:tabControllerName:andControllers: ]，它没有行号信息。警告：远程故障回复：E37

有什么建议可以尝试吗？多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T11:08:24.583

I am not sure if you do, but I would declare it like this:

```
OpenFeint *openfeint = [OpenFeint initializeWithProductKey:@"MYKEY" 
    andSecret:@"MYSECRET" andDisplayName:@"LatinToGo" andSettings:settings
    andDelegates:[OFDelegatesContainer containerWithOpenFeintDelegate:self]]; 
```

I hope this helps.

# java - 减小 jar 文件大小

> ID：10383274
> 
> 赞同：7
> 
> 时间：2012-04-30T11:53:32.577
> 
> 标签：java, maven, jar, size

有什么办法可以减小 jar 文件的大小？

我想要一个工具来减少未使用的依赖项。

我使用 maven 进行依赖管理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:02:27.617

A JAR file doesn't normally contain dependencies in the Maven sense. So you must be talking about:

*   a WAR or EAR or similar file,
*   a so-called UberJAR file produced by combining lots of JAR files; e.g. using the Maven shade plugin, or
*   dependencies at a finer granularity than Maven modules.

In the first two cases, you can keep out nominally dependent JARs by excluding them, either in the dependency specification, or in the war or shade plugin build descriptor. IIRC, the shade plugin also allows you to exclude specific packages and classes.

The last may require a separate tool to post-process the JAR file. Getting rid of unused classes is the kind of thing that an obfuscator can do. However, you need to be careful not to eliminate classes or class names that are used reflectively; e.g. by a DI / IoC framework or an AOP framework.

(Generally speaking, this kind of tool tries to figure out what classes are used by analysing the dependencies implied by .class file external references. DI / IoC / AOP and so on introduce other kinds of dependency that are not apparent in the .class file structure.)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T12:00:02.150

如果您想知道项目使用的依赖项，只需检查[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)即可用于分析使用/未使用的依赖项。

通过以下方式检查您的依赖项：

```
mvn dependency:analyze 
```

或者像这样查看 dep 树：

```
mvn dependency:tree 
```

或者您可以查看您的 ide（取决于您使用哪个），例如使用 Eclipse（Indigo）和 m2e 插件，您有一个选项卡“Dependency Hierarchy”，它显示了依赖关系树，包括。传递依赖。

在某些情况下，您必须小心 DI 框架使用的依赖项，这些依赖项无法通过 maven-dependency-plugin 或 ide 插件进行分析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T11:56:37.260

[pack200](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/pack200.html)可以大大减少 JAR 的大小。但是它很难与 Maven 一起使用，并且不可能与 EE 容器一起使用。

为什么你有未使用的依赖项？

# javascript - 在 Jscript 中使用 DOMDocument 的独立于浏览器的方式

> ID：10383278
> 
> 赞同：0
> 
> 时间：2012-04-30T11:53:46.763
> 
> 标签：javascript, jquery, internet-explorer-9, domdocument

创建必须在其中创建 DOMDocument 的独立于浏览器的 Jscript 代码的最佳方法是什么？
我有这段代码（摘自@MartinHonnen 对我的问题的回答[How can make an XSLT Javascript extension function return a node-set?](https://stackoverflow.com/questions/10222750/how-have-an-xslt-javascript-extension-function-return-a-node-set)）：

```
function tokenize (input) {
    var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
    ...
    } 
```

它在 MSXML 6.0 XSLT 处理器（注意 Jscript 嵌入在 xslt 工作表中）和 IE9 中运行良好（虽然奇怪的是不是每次都 - 在这里进入调试模式似乎有点帮助），但没有这样做在 IE8 中很好，必须更改类`Msxml2.DOMDocument.3.0`才能使其正常工作。显然 IE8 Jscript 支持 MSXML 3.0 但不支持更高版本。

所以现在我正在寻找使用 DOMDocument 的与浏览器类型和浏览器版本无关的代码。
谁能给我这个？
我添加`Jquery`为标签，因为在那里可以找到最好的解决方案。
附带问题：我在哪里可以找到关于哪个浏览器类型+版本支持哪个 DOM 类的概述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:12:58.680

你需要调整`CreateXmlHttpReq`函数来处理不同类型的 Microsoft 的 ActiveXObjects

```
function CreateXmlHttpReq(handler) {
    var xmlhttp = null;

    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else if (window.ActiveXObject) {
        var types = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"];

        for (var i = 0; i < types.length; i++) {
            try {
                xmlhttp = new ActiveXObject(types[i]);
                break;
            } catch(e) {}
        }
    }

    if (xmlhttp) {
         xmlhttp.onreadystatechange = handler;
    }

    return xmlhttp;
} 
```

参考： [https ://stackoverflow.com/a/10389829/1237812](https://stackoverflow.com/a/10389829/1237812)

# c# - 重命名计算机并在 C# 中一次重启即可加入域

> ID：10383281
> 
> 赞同：6
> 
> 时间：2012-04-30T11:54:06.920
> 
> 标签：c#, join, dns, rename

我正在尝试制作一个程序，使我们更容易在域上部署新计算机。我想要它做的，只是简单地重命名计算机，并将它加入我们的域（它会做很多其他的事情，但在我完成这个工作之前不会出现）。

代码在这里： http: [//pastebin.com/ayREYH0C](http://pastebin.com/ayREYH0C)

[从http://www.experts-exchange.com/Programming/Languages/.NET/Q_26262588.html](http://www.experts-exchange.com/Programming/Languages/.NET/Q_26262588.html)偷来，然后根据我的需要进行更改

我的问题是域加入不尊重计算机的重命名。我在重命名和连接之间放置了一个 Thread.Sleep，所以我有时间检查重命名是否发生了，它确实发生了！当域加入发生时，它会恢复为旧名称，这是在域中创建的计算机名称，而不是新名称。

我到处搜索，但没有找到这样的问题，也没有找到满足这种特殊需求的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T20:57:28.600

这是将工作站连接到域的 ac# 函数……您可能会发现将其用作避免 WMI 并改用 ManagementObject 的替代方法：

（我意识到执行凭据仍然需要重命名权限）

```
public static bool Join(string dom,string usr, string pass)
    {
        // Define constants used in the method.
        int JOIN_DOMAIN = 1;
        int ACCT_CREATE = 2;
        int ACCT_DELETE = 4;
        int WIN9X_UPGRADE = 16;
        int DOMAIN_JOIN_IF_JOINED = 32;
        int JOIN_UNSECURE = 64;
        int MACHINE_PASSWORD_PASSED = 128;
        int DEFERRED_SPN_SET = 256;
        int INSTALL_INVOCATION = 262144;

        // Define parameters that we will use later when we invoke the method.
        // Remember, the username must have permission to join the object in the AD.
        //string domain = "domain";
        //string password = "password";
        //string username = "username";
        //string destinationOU = "destinationOU";

        // Here we will set the parameters that we like using the logical OR operator.
        // If you want to create the account if it doesn't exist you should add " | ACCT_CREATE "
        // For more information see: http://msdn.microsoft.com/en-us/library/aa392154%28VS.85%29.aspx
        int parameters = JOIN_DOMAIN | DOMAIN_JOIN_IF_JOINED;

        // The arguments are passed as an array of string objects in a specific order
        object[] methodArgs = { dom, pass, usr + "@" + dom, null, parameters };

        // Here we construct the ManagementObject and set Options
        ManagementObject computerSystem = new ManagementObject("Win32_ComputerSystem.Name='" + Environment.MachineName + "'");
        computerSystem.Scope.Options.Authentication = System.Management.AuthenticationLevel.PacketPrivacy;
        computerSystem.Scope.Options.Impersonation = ImpersonationLevel.Impersonate;
        computerSystem.Scope.Options.EnablePrivileges = true;

        // Here we invoke the method JoinDomainOrWorkgroup passing the parameters as the second parameter
        object Oresult = computerSystem.InvokeMethod("JoinDomainOrWorkgroup", methodArgs);

        // The result is returned as an object of type int, so we need to cast.
        int result = (int)Convert.ToInt32(Oresult);

        // If the result is 0 then the computer is joined.
        if (result == 0)
        {
            MessageBox.Show("Joined Successfully!");
            return true;
        }
        else
        {
            // Here are the list of possible errors
            string strErrorDescription = " ";
            switch (result)
            {
                case 5: strErrorDescription = "Access is denied";
                    break;
                case 87: strErrorDescription = "The parameter is incorrect";
                    break;
                case 110: strErrorDescription = "The system cannot open the specified object";
                    break;
                case 1323: strErrorDescription = "Unable to update the password";
                    break;
                case 1326: strErrorDescription = "Logon failure: unknown username or bad password";
                    break;
                case 1355: strErrorDescription = "The specified domain either does not exist or could not be contacted";
                    break;
                case 2224: strErrorDescription = "The account already exists";
                    break;
                case 2691: strErrorDescription = "The machine is already joined to the domain";
                    break;
                case 2692: strErrorDescription = "The machine is not currently joined to a domain";
                    break;
            }
            MessageBox.Show(strErrorDescription.ToString());
            return false;
        }

    } 
```

# zend-framework - Zend 重写规则不起作用

> ID：10383287
> 
> 赞同：3
> 
> 时间：2012-04-30T11:54:28.250
> 
> 标签：zend-framework, mod-rewrite

我今晚设置了zend，默认索引页面有效（[http://home.mitheren.com/399a4/public/](http://home.mitheren.com/399a4/public/)）。从那以后，我尝试在该控制器上添加一个新动作，但我不断收到 404 错误。

这是我的 public/ 目录的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /399a4/public
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

当我尝试访问该页面 ( [http://home.mitheren.com/399a4/public/index/testing](http://home.mitheren.com/399a4/public/index/testing) ) 时，我在 /var/log/apache2/error.log 中收到 404 错误和以下消息：

```
[Mon Apr 30 21:44:30 2012] [error] [client 192.168.1.254] File does not exist: /var/www/399a4/public/index.php/testing 
```

我也尝试过重写日志记录，并在访问该页面时获得以下条目：

```
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9e6020/subreq] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9e6020/subreq] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9e6020/subreq] (3) [perdir /var/www/399a4/public/] applying pattern '^.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9e6020/subreq] (4) [perdir /var/www/399a4/public/] RewriteCond: input='/var/www/399a4/public/index.php' pattern='-s' => matched
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9e6020/subreq] (1) [perdir /var/www/399a4/public/] pass through /var/www/399a4/public/index.php
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9cdf80/initial] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9cdf80/initial] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9cdf80/initial] (3) [perdir /var/www/399a4/public/] applying pattern '^.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9cdf80/initial] (4) [perdir /var/www/399a4/public/] RewriteCond: input='/var/www/399a4/public/index.php' pattern='-s' => matched<
192.168.1.254 - - [30/Apr/2012:21:46:54 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9cdf80/initial] (1) [perdir /var/www/399a4/public/] pass through /var/www/399a4/public/index.php 
```

.htaccess 文件肯定正在处理中（AllowOverride 已打开，我通过添加变量并检查 php 信息进行了检查）。

更新：将规则更改为 Vytautas 建议的内容会在重写日志中为我提供以下输出：

```
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] applying pattern '^/399a4/public/.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (3) [perdir /var/www/399a4/public/] applying pattern '^/399a4/public/.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ddff0/subreq] (1) [perdir /var/www/399a4/public/] pass through /var/www/399a4/public/index.php
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] applying pattern '^/399a4/public/.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] add path info postfix: /var/www/399a4/public/index.php -> /var/www/399a4/public/index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] strip per-dir prefix: /var/www/399a4/public/index.php/testing -> index.php/testing
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (3) [perdir /var/www/399a4/public/] applying pattern '^/399a4/public/.*$' to uri 'index.php/testing'
192.168.1.254 - - [30/Apr/2012:21:59:14 +1000] [home.mitheren.com/sid#7f1ffd754120][rid#7f1ffd9ec050/initial] (1) [perdir /var/www/399a4/public/] pass through /var/www/399a4/public/index.php 
```

更新 2：出于测试目的，我添加了另一个控制器（称为 test）（[http://home.mitheren.com/399a4/public/test](http://home.mitheren.com/399a4/public/test)），它运行良好。这意味着我的重写规则至少可以工作吗？

更新3：解决了！我在我的第二个测试控制器上创建了更多视图，它们都工作正常。看来我的 IndexController 上的重定向只有一个问题。我不确定这是一个真正的问题还是我的问题，但现在可以了。如果其他人有更多信息，我很想听听，但这应该可以完成我的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:36:27.730

`public`不应出现在 URL 中。您正确的网址是[http://home.mitheren.com/399a4/public/index.php](http://home.mitheren.com/399a4/public/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T01:01:36.470

有点解决了！我在我的第二个测试控制器上创建了更多视图，它们都工作正常。看来我的 IndexController 上的重定向只有一个问题。

我不确定这是一个真正的问题还是我的问题，但现在可以了。如果其他人有更多信息，我很想听听，但这应该可以完成我的工作。

# jquery - jquery 不显眼的验证和正则表达式修饰符

> ID：10383290
> 
> 赞同：0
> 
> 时间：2012-04-30T11:54:54.650
> 
> 标签：jquery, validation

有没有办法将 RegExp 修饰符传递给 jquery 不显眼的验证？我想让正则表达式不区分大小写。

RegExp 的构造函数包含一个可以设置为 i|g|m 的修饰符参数：

```
修饰符说明
i 执行不区分大小写的匹配
g 执行全局匹配（查找所有匹配而不是在第一个匹配后停止）
m 执行多行匹配

```

所以能做就好了

```
<input type="text" name="Property_FullPostCode" 
            data-val="true" data-val-required="Invalid postcode" data-val-regex="Invalid postcode"
               data-val-regex-pattern="myregex" **data-val-regex-modifiers="i"** /> 
```

有没有办法这样做而无需修改 jquery.validate.unobtrusive.js 或添加新的验证模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:07:13.343

My quick fix was to change jquery.validate.unobtrusive.js to:

```
$jQval.addMethod("regex", function (value, element, params) {
        var match;
        if (this.optional(element)) {
            return true;
        }
        **var modifiers = $(element).data('val-regex-modifiers');**
        match = new RegExp(params**, modifiers**).exec(value);
        return (match && (match.index === 0) && (match[0].length === value.length));
    }); 
```

# swt - 在 JFace tableviewer 列中放置一个按钮

> ID：10383292
> 
> 赞同：1
> 
> 时间：2012-04-30T11:54:56.923
> 
> 标签：swt, eclipse-rcp, jface, tableviewer

我正在开发 Eclipse RCP Viewer 框架，我需要在`TableViewer`. 我一直在按照 [教程](http://www.vogella.com/articles/EclipseJFaceTable/article.html)开发我的应用程序

我在 tableviewer 中找不到任何小部件，因为在示例中它只是一个图像，是否可以放置一个小部件，任何想法请建议我。

我搜索了 API 以找到任何`getWidget()`类似的预定义方法`getImage()`，可以放入`col.setLabelProvider()`，但实际上没有，我该怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:44:41.470

您可能想要使用编辑支持，例如 DialogCellEditor

> [http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FDialogCellEditor.html](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fjface%2Fviewers%2FDialogCellEditor.html)

# go - 如何配置 go 命令以使用代理？

> ID：10383299
> 
> 赞同：62
> 
> 时间：2012-04-30T11:55:18.603
> 
> 标签：go

我想运行`go install`以安装[tour](http://tour.golang.org/#2)，但找不到使用代理访问 Internet 的选项。我不只是为了巡回演出而需要这个，而是为了在 Go 中进行开发。

如何配置 Go 以使用代理。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-30T14:46:51.923

Go 程序理解环境变量`http_proxy`和`no_proxy`，但这还不够，因为`go get`使用源代码控制管理器来检索代码。所以你也必须为你的 SCM 设置 HTTP 代理设置。将[其](http://www.selenic.com/mercurial/hgrc.5.html#http-proxy)用于 Mercurial，[将其](https://stackoverflow.com/a/3406766/165293)用于 Git。

`http_proxy`值可以像`http://user:password@host:port/`。用户、密码和端口部分是可选的。`no_proxy`是不应通过代理连接的服务器的逗号分隔列表。它的价值可以像`foo.com,bar.net:4000`。

你可以在你的 中设置这些环境变量`bash_profile`，但是如果你想限制它们的使用`go`，你可以像这样运行它：

```
$ http_proxy=127.0.0.1:8080 go get code.google.com/p/go.crypto/bcrypt 
```

如果这是您一直想要的，请设置此别名以避免每次都输入代理部分：

```
$ alias go='http_proxy=127.0.0.1:8080 go' 
```

从现在开始您可以`go`正常使用，但它使用您的 HTTP 代理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-11-06T11:30:21.567

在 Windows 命令行上：

`set http_proxy=http://[user]:[pass]@[proxy_ip]:[proxy_port]/ set https_proxy=http://[user]:[pass]@[proxy_ip]:[proxy_port]/`

...然后导航到[https://github.com/](https://github.com/)并下载 GitHub 证书（我将名称设置为`goland_cert.cer`）

...现在执行 OpenSSL 命令将其导出为 PEM 格式

`openssl x509 -inform der -in goland_cert.cer -out goland_cert.pem`

...最后在 git global config 中设置证书

`git config --global http.sslCAInfo C:/Users/[User]/certs/golang_cert.pem`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-28T10:55:18.010

您还可以使用[https://github.com/cyfdecyf/cow/将 http 请求映射到 socks5 流量](https://github.com/cyfdecyf/cow/)

如果你被 GFW 屏蔽了，非常方便

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-23T14:00:43.773

这对我有用：

```
alias go='http_proxy=http://127.0.0.1:1081/ https_proxy=http://127.0.0.1:1081/ no_proxy=localhost,127.0.0.0/8,::1 go' 
```

注意：对于某些人，协议可能会有所不同`https_proxy=http://127.0.0.1:1081`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-25T04:53:03.990

您可能需要检查 [https://github.com/hmgle/graftcp](https://github.com/hmgle/graftcp)，

```
$ graftcp-local/graftcp-local -h
Usage of graftcp-local/graftcp-local:
  -config string
        Path to the configuration file
  -listen string
        Listen address (default ":2233")
  -logfile string
        Write logs to file
  -loglevel value
        Log level (0-6) (default 1)
  -pipepath string
        Pipe path for graftcp to send address info (default "/tmp/graftcplocal.fifo")
  -service string
        Control the system service: ["start" "stop" "restart" "install" "uninstall"]
  -socks5 string
        SOCKS5 address (default "127.0.0.1:1080")
  -syslog
        Send logs to the local system logger (Eventlog on Windows, syslog on Unix) 
```

如果您已经在 1080 上监听了 shadowsocks，那么您不需要提供任何参数，只需运行`graftcp-local`即可代理 go get

```
$ ./graftcp go get -v golang.org/x/net/proxy 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-01-10T09:20:26.793

在系统变量中添加`GOPROXY`变量名称和变量值。`your proxy`这对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-10T12:27:49.830

我通过在 Win10 系统中设置一些变量的 Go 命令解决了这个问题。

[在这里（“将 cf CLI 与代理服务器一起使用”）](https://docs.cloudfoundry.org/cf-cli/http-proxy.html#:%7E:text=The%20https_proxy%20environment%20variable%20holds,depends%20on%20your%20operating%20system.)您可以找到下面描述的信息以及图像。您还可以阅读以下信息：

*   https_proxy 的格式
*   将 SOCKS5 与 cf v3-ssh 一起使用
*   在 Mac OS 或 Linux 中设置 https_proxy

我在此答案中仅包含有关 W10 的信息，因为它是我测试过的。

# 视窗 10

设置新的路径变量。

*   在搜索框中，输入`path`
*   选择并打开“编辑系统环境变量（控制面板）”。
*   “系统属性”窗口将打开。
*   选择“高级”选项卡。
*   按“环境变量”按钮，将打开一个同名窗口。
*   在“系统变量”部分，按“新建”按钮。“新建系统变量”窗口将打开。
*   您现在将添加所需的变量，按如下方式填写字段：
    *   变量的名称：`https_proxy`
    *   变量值：`http://yourUserName:userNamePassword@yourIPaddress:port`

## 最后...

我测试了 go 的安装命令行。

打开控制台，输入：`go install github.com/isacikgoz/gitbatch/cmd/gitbatch@latest`

这是这个项目的一个例子：[https ://github.com/isacikgoz/gitbatch](https://github.com/isacikgoz/gitbatch)

这适用于我的特定 W10 19043 系统。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-09-05T14:41:59.063

```
git config [--global] http.proxy http://proxy.example.com:port
git config [--global] https.proxy http://proxy.example.com:port 
```

见[https://github.com/golang/go/wiki/GoGetProxyConfig](https://github.com/golang/go/wiki/GoGetProxyConfig)

**注意：** 此答案已收到正面和负面反馈，如果此方法对您的情况没有帮助，请在单击否决之前留下一些评论，因为这实际上已记录在案并且在我的案例中有效。我们最好知道为什么它对您不起作用。谢谢。

# c# - 如何将ms word嵌入winform

> ID：10383300
> 
> 赞同：1
> 
> 时间：2012-04-30T11:55:22.957
> 
> 标签：c#, winforms

我需要知道在winform中嵌入带有有限控件的ms word的方法。我还想在 ms 字中插入一些页眉和页脚。发现一些文章只描述了将控件嵌入到 winform 中。所以我的问题是如何生成文档文件并限制 winform 中 msword 的控件。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:12:36.070

我不相信这是可能的。然而，您可以做的是在屏幕上放置一个富文本字段并将内容保存为 .doc 格式 - 您可以将其提供给下载或提交。

**编辑**：问题提到了winforms。这可以在富文本框中使用标准 rtf 来完成。链接到关于 rtf 表的教程 - [http://www.devx.com/asp/Article/17964/0/page/3](http://www.devx.com/asp/Article/17964/0/page/3)

# java - 使用 apache commons 将文件存储到 ftp 服务器中不起作用

> ID：10383302
> 
> 赞同：0
> 
> 时间：2012-04-30T11:55:36.080
> 
> 标签：java, ftp, apache-commons

我正在尝试使用 apache commons java 库将文件存储到 ftp 服务器中。我正在使用 commons-net-3.0.1.jar。问题是当我尝试将文件推送到服务器时，调用

存储文件（）

总是返回假。它不会抛出任何异常。什么都没有，只是默默地回复假。如果我尝试手动推送文件，即在 linux 系统中使用普通的“ftp”客户端（我的意思是使用 ftp 命令连接到 ftp 服务器并使用 put 命令存储文件），那么它将文件放入服务器。

我什至不知道如何调试它。您能否让我知道如何才能了解问题及其解决方案。

我检查了服务器日志，当我尝试通过 java 发布时，日志显示 425 响应代码无法建立连接。但是当我手动使用时，它显示 226 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:41:06.327

注意：FTP 不是通过代码向服务器上传/下载数据的可靠协议。如果您需要可靠的解决方案，FTP 不适合您。请尝试使用 ssh。

要回答您的问题：`ProtocolCommandListener`在您的`SocketClient`（`FTP`扩展此）中添加一个。然后你至少可以打印消息`ProtocolCommandListener()`和`protocolReplyReceived()`

# php - 如何使用 Imagick/ImageMagick 调整 SVG 的大小

> ID：10383305
> 
> 赞同：12
> 
> 时间：2012-04-30T11:56:01.270
> 
> 标签：php, imagemagick, imagick

我将 SVG 文件的字符串表示形式发送到服务器，并使用 Imagick 以下列方式将其转换为 jpeg：

```
$image = stripslashes($_POST['json']);
$filename = $_POST['filename'];
$unique = time();

$im = new Imagick();
$im->readImageBlob($image);
$im->setImageFormat("jpeg");
$im->writeImage('../photos/' . $type . '/humourised_' . $unique . $filename);
$im->clear();
$im->destroy(); 
```

但是我希望在光栅化之前调整 SVG 的大小，以便生成的图像大于 SVG 文件中指定的尺寸。

我将我的代码修改为以下内容：

```
$image = stripslashes($_POST['json']);
$filename = $_POST['filename'];
$unique = time();

$im = new Imagick();
$im->readImageBlob($image);
$res = $im->getImageResolution();
$x_ratio = $res['x'] / $im->getImageWidth();
$y_ratio = $res['y'] / $im->getImageHeight();
$im->removeImage();
$im->setResolution($width_in_pixels * $x_ratio, $height_in_pixels * $y_ratio);

$im->readImageBlob($image);
$im->setImageFormat("jpeg");
$im->writeImage('../photos/' . $type . '/humourised_' . $unique . $filename);
$im->clear();
$im->destroy(); 
```

此代码应该计算出分辨率并相应地调整 SVG 的大小。如果 SVG 画布及其元素具有基于“百分比”的宽度，则它可以完美运行，但它似乎不适用于“px”中定义的元素。不幸的是，这是一个要求。

将发送到服务器的典型 SVG 字符串如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/SVG/DTD/svg10.dtd">
<svg id="tempsvg" style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="333" version="1.1" height="444">
   <image transform="matrix(1,0,0,1,0,0)" preserveAspectRatio="none" x="0" y="0" width="333" height="444" xlink:href="http://www.songbanc.com/assets/embed/photos/full/133578615720079914224f9e7aad9ac871.jpg"></image>
   <image transform="matrix(1,0,0,1,0,0)" preserveAspectRatio="none" x="85.5" y="114" width="50" height="38" xlink:href="http://www.songbanc.com/assets/embed/humourise/elements/thumb/thumb_lips4.png"></image>
   <path transform="matrix(1,0,0,1,0,0)" fill="none" stroke="#000" d="M110.5,133L140.5,133" stroke-dasharray="- " opacity="0.5"></path>
   <circle transform="matrix(1,0,0,1,0,0)" cx="140.5" cy="133" r="5" fill="#000" stroke="#000"></circle>
   <path transform="matrix(1,0,0,1,0,0)" fill="none" stroke="#000" d="M110.5,133L110.5,155.8" stroke-dasharray="- " opacity="0.5"></path>
   <circle transform="matrix(1,0,0,1,0,0)" cx="110.5" cy="155.8" r="5" fill="#000" stroke="#000"></circle>
   <circle transform="matrix(1,0,0,1,0,0)" cx="110.5" cy="133" r="5" fill="#000" stroke="#000"></circle>
</svg> 
```

正如您所看到的，组成这个 SVG 的元素具有像素定义宽度和高度（遗憾的是，使用百分比不是这个应用程序的选项）

有没有办法解决？或任何其他将 SVG 转换为 png 并以给定大小渲染而不损失质量的方法。

谢谢。

编辑：虽然我从来没有真正找到完美的解决方案。相反，我结束了将 SVG 数据作为 json 发送，在服务器端循环并将像素缩放到预期的高度。

然后，经过多次试验和错误，我意识到 imagemagick 在标准 SVG 变换/旋转命令方面存在问题，使任何被操纵的元素都失控了。我最终切换了“inkscape”来将生成的 SVG 渲染为光栅图像。一切都很好。我仍在研究一种潜在的公式化解决方案，以抵消 imagemagick 造成的差异。如果我有任何成功，我会再次更新这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-21T00:21:35.657

作为[php_imagick 错误](https://bugs.php.net/bug.php?id=59022)的解决方法，您可以缩放 svg 的 width=".." 和 height=".."：

```
function svgScaleHack($svg, $minWidth, $minHeight)
{
    $reW = '/(.*<svg[^>]* width=")([\d.]+px)(.*)/si';
    $reH = '/(.*<svg[^>]* height=")([\d.]+px)(.*)/si';
    preg_match($reW, $svg, $mw);
    preg_match($reH, $svg, $mh);
    $width = floatval($mw[2]);
    $height = floatval($mh[2]);
    if (!$width || !$height) return false;

    // scale to make width and height big enough
    $scale = 1;
    if ($width < $minWidth)
        $scale = $minWidth/$width;
    if ($height < $minHeight)
        $scale = max($scale, ($minHeight/$height));

    $width *= $scale*2;
    $height *= $scale*2;

    $svg = preg_replace($reW, "\${1}{$width}px\${3}", $svg);
    $svg = preg_replace($reH, "\${1}{$height}px\${3}", $svg);

    return $svg;
} 
```

然后您可以轻松创建漂亮的透明PNG！

```
createThumbnail('a.svg', 'a.png');

function createThumbnail($filename, $thname, $size=50)
{
    $im = new Imagick();
    $svgdata = file_get_contents($filename);
    $svgdata = svgScaleHack($svgdata, $size, $size);

    $im->setBackgroundColor(new ImagickPixel('transparent'));
    $im->readImageBlob($svgdata);

    $im->setImageFormat("png32");
    $im->resizeImage($size, $size, imagick::FILTER_LANCZOS, 1);

    file_put_contents($thname, $im->getImageBlob());
    $im->clear();
    $im->destroy();
} 
```

注意：我一直在寻找如何从最初的小尺寸重新缩放 SVG 的解决方案。然而，imagick::setResolution 似乎被破坏了。但是，ImageMagick 库本身正在运行，因此您可以使用 exec('convert...') （出于安全原因，托管服务提供商可能会禁用）。

因此，要从较小的 svg 创建 50x50 的缩略图，您可以：

```
convert -density 500 -resize 50 50 -background transparent a.svg PNG32:a.png 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:23:18.720

我一直在寻找解决方案，我在阅读这篇文章后发现[了这](http://www.php.net/manual/de/imagick.setresolution.php#85284)一点，并且像魅力一样工作：

```
$im = new Imagick();
$im->readImage("/path/to/image.svg");
$res = $im->getImageResolution();
$x_ratio = $res['x'] / $im->getImageWidth();
$y_ratio = $res['y'] / $im->getImageHeight();
$im->removeImage();
$im->setResolution($width_in_pixels * $x_ratio, $height_in_pixels * $y_ratio);
$im->readImage("/path/to/image.svg");
// Now you can do anything with the image, such as convert to a raster image and output it to the browser:
$im->setImageFormat("png");
header("Content-Type: image/png");
echo $im; 
```

学分归于 php 手册页面中该评论的作者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T18:38:13.867

你不需要imagick来完成这个任务。例如，您不会调整 svg (w: 60px, h: 70px) => (w: 36px, h: 36px) 的大小来获取按钮的图标。

```
$svg = file_get_contents($your_svg_file);

// I prefer to use DOM, because it's safer and easier as to use preg_match
$svg_dom = new DOMDocument();

libxml_use_internal_errors(true);
$svg_dom->loadXML($svg);
libxml_use_internal_errors(false);

//get width and height values from your svg
$tmp_obj = $svg_dom->getElementsByTagName('svg')->item(0);
$svg_width = floatval($tmp_obj->getAttribute('width'));
$svg_height = floatval($tmp_obj->getAttribute('height'));

// set width and height of your svg to preferred dimensions
$tmp_obj->setAttribute('width', 36);
$tmp_obj->setAttribute('height', 36);

// check if width and height of your svg is smaller than the width and 
// height you set above => no down scaling is needed
if ($svg_width < 36 && $svg_height < 36) {
    //center your svg content in new box
    $x = abs($svg_width - 36) / 2;
    $y = abs($svg_height - 36) / 2;
    $tmp_obj->getElementsByTagName('g')->item(0)->setAttribute('transform', "translate($x,$y)");
} else {
    // scale down your svg content and center it in new box
    $scale = 1;

    // set padding to 0 if no gaps are desired
    $padding = 2;

    // get scale factor
    if ($svg_width > $svg_height) {
        $scale = (36 - $padding) / $svg_width;
    } else {
        $scale = (36 - $padding) / $svg_height;
    }

    $x = abs(($scale * $svg_width) - 36) / 2;
    $y = abs(($scale * $svg_height) - 36) / 2;
    $tmp_obj->getElementsByTagName('g')->item(0)->setAttribute('transform', "translate($x,$y) scale($scale,$scale)");

    file_put_contents('your_new_svg.svg', $svg_dom->saveXML());
} 
```

设置 translate(x,y) 时要小心，因为您的 svg 内容可能会设置在框外，除了背景之外您什么也看不到。

仅当您的初始翻译设置为 (0,0) 时，我上面的脚本才能正常工作。你可以用这个

```
$svg_path = $svg_dom->getElementsByTagName('path')->item(0);
$svg_g = $svg_dom->getElementsByTagName('g')->item(0);
$transform = $svg_g->getAttribute('transform');

// get x and y of translate
$transform = substr($transform, strlen('translate('));
$transform = substr($transform, 0, strlen($transform)-1);
$transform_data = explode(',', $transform);

// get path data
$d = $svg_path->getAttribute('d');
$d_data = explode(' ', $d);
$tmp = explode(',', $d_data[1]);
$d_data[1] = ($tmp[0] + $transform_data[0]).','.($tmp[1]+$transform_data[1]);
$svg_path->setAttribute('d', implode(' ', $d_data));
$svg_g->setAttribute('transform','translate(0,0)');
file_put_contents('your_new_svg.svg',$svg_dom->saveXML()); 
```

将 translate 设置为 (0,0) 并将路径数据调整为新设置，因为路径数据取决于 translate，反之亦然。

我使用这两个脚本通过将我的 svg 图标调整为我需要的尺寸并将它们转换为 png 而不会损失质量来生成 png 图标。

我希望我的意思很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:20:39.503

这是一个示例，说明如何获取已经存在于字符串中的图像（例如，从数据库中），并调整其大小、添加边框并打印出来。我用它来显示经销商徽标

```
 // Decode image from base64
  $image=base64_decode($imagedata);

  // Create Imagick object
  $im = new Imagick();

  // Convert image into Imagick
  $im->readimageblob($image);

  // Create thumbnail max of 200x82
  $im->thumbnailImage(200,82,true);

  // Add a subtle border
  $color=new ImagickPixel();
  $color->setColor("rgb(220,220,220)");
  $im->borderImage($color,1,1);

  // Output the image
  $output = $im->getimageblob();
  $outputtype = $im->getFormat();

  header("Content-type: $outputtype");
  echo $output; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-02T07:16:16.737

为了缩放 SVG 文件中的宽度、高度、x、y 属性。

```
function scale($svg, $k) {
    $rxvbox = '/viewBox="(\d+) (\d+) (\d+) (\d+)"/si';
    $rxw = '/width="(\d+)"/si';
    $rxh = '/height="(\d+)"/si';
    $rxx =  '/x="(\d+)"/si';
    $rxy =  '/y="(\d+)"/si';
    $svg = preg_replace_callback($rxvbox, function($m) use ($k) {return 'viewBox="'.$m[1]*$k.' '.$m[2]*$k.' '.$m[3]*$k.' '.$m[4]*$k.'"';}, $svg);
    $svg = preg_replace_callback($rxw, function($m) use ($k) {return 'width="'.$m[1]*$k.'"';}, $svg);
    $svg = preg_replace_callback($rxh, function($m) use ($k) {return 'height="'.$m[1]*$k.'"';}, $svg);
    $svg = preg_replace_callback($rxx, function($m) use ($k) {return 'x="'.$m[1]*$k.'"';}, $svg);
    $svg = preg_replace_callback($rxy, function($m) use ($k) {return 'y="'.$m[1]*$k.'"';}, $svg);
    return $svg;
} 
```

# php - PHP 或 javascript：翻转文本行的顺序（不是 MySQL）

> ID：10383307
> 
> 赞同：0
> 
> 时间：2012-04-30T11:56:18.233
> 
> 标签：php, javascript, jquery

如何翻转文本的顺序

```
$string = 'last row
something inbetween
first row'; 
```

结果应该是：

```
first row
something inbetween
last row 
```

请注意，这不是 AZ 排序，只是翻转它。

可能吗？欢迎使用 PHP、javascript 或 jquery 的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T11:59:42.647

您可以将字符串分解为一个数组，将其反转并将其重新组合在一起：

```
$a=explode("\n",$string);
$string=implode("\n",array_reverse($a)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T11:58:11.230

您可以拆分字符串并反转数组：

```
$array = explode("\n", $string);
$array = array_reverse($array);
$string = implode("\n", $array); 
```

编辑：没有人写过javascript解决方案（与php脚本相同的逻辑）：

```
var string = string.split("\n").reverse().join("\n"); 
```

编辑：一个例子：http: [//jsfiddle.net/ceKyF/](http://jsfiddle.net/ceKyF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:13:37.473

你只得到了 PHP 答案，这是一个 javascript 答案：

```
// Split the string into an array
var arr = string.split( '\n' )

// Reverse the array
arr.reverse()

// Join the array back into a string
string = arr.join( '\n' ) 
```

这可以在一行中完成：

```
string = string.split( '\n' ).reverse().join( '\n' ) 
```

# eclipse - 如何在不签出的情况下在 Eclipse CVS 存储库中搜索文件

> ID：10383309
> 
> 赞同：2
> 
> 时间：2012-04-30T11:56:20.477
> 
> 标签：eclipse

我是 eclipse CVS 从存储库位置签出项目。

当我提供 Eclipse CVS 存储库的路径时，它显示了近 50 个项目的列表（在 Eclipse CVS 存储库视图中）

我正在搜索一个 Particualr java 文件，不确定它到底存在于哪个项目中，所以我的问题是，是否可以在 Eclipse Respository 中搜索特定的 java 文件而不进行签出？

我使用 Windows 7 作为操作系统和 Eclipse 3.6 版本。

谢谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:28:32.680

**[编辑]**

无法远程“grep”CVS 存储库。

`EasyOptions.java,v`您必须检查项目或要求系统管理员在 CVS 服务器上搜索文件并告诉您路径。项目/CVS 模块的名称是该路径的一部分。

如果您要在官方 Eclipse 项目中查找文件，可以使用 Google 或[grepcode](http://www.grepcode.com/)。

要进一步缩小 Google 中的搜索范围，您可以按站点对其进行限制：

```
site:eclipse.org filename 
```

# vb.net - 验证位置 VB.NET

> ID：10383313
> 
> 赞同：2
> 
> 时间：2012-04-30T11:56:34.020
> 
> 标签：vb.net, minesweeper

所以我正在开发一个扫雷游戏并分配地雷，但我无法创建一个算法来阻止地雷去一个已经有地雷的地方，这就是我目前所拥有的：

公共子 initflags()

```
 Dim line, column As Integer
    For line = 0 To 9
        For column = 0 To 9
            mat(line, column) = 0
        Next
    Next
    Dim numbandeiras As Integer
    Dim r, c As Integer

    Do Until numbandeiras = 34

        Randomize()

        line = Int(Rnd() * 10)
        column = Int(Rnd() * 10)
        r = line
        c = column
        If r And c = 1 Then

            mat(line, column) = 0
        Else
            numbandeiras = numbandeiras + 1

            Call avisinhos()

            mat(line, column) = 1
        End If

    Loop

End Sub 
```

有人可以帮助我吗？最好的问候，乔奥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:01:43.350

The simplest thing to do is to check before setting, e.g:

```
if mat(line, column) = 0 then
    numbandeiras = numbandeiras + 1

    avisinhos()

    mat(line, column) = 1
end if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:03:28.173

You need to store all placed "mines" in an array of some sort. This is better in the end if you want to do something with those mines. If you have mines as objects it makes them even better for now they can have states like dead, alive or "?" like MS version.

Just my 2 cents.

# android - Android APK 文件：在 Google Play 商店中重新激活旧的 APK 文件

> ID：10383321
> 
> 赞同：42
> 
> 时间：2012-04-30T11:57:14.817
> 
> 标签：android, apk

我已将两个 APK 文件上传到 Google Play 商店。一个是新版本，一个是旧版本。较新的版本是活动版本，因为它具有更高的 versionName 和 Code。现在我在新版本中发现了一些错误，我想从 Play 商店中删除它并激活旧版本。Google Play 不允许我停用较新的版本并再次激活较旧的版本，因为它的版本名称和代码较低。问题是我不是开发人员，也没有构建应用程序。开发商在另一个国家，很难找到他们。

我该怎么做才能重新激活旧版本？我知道一种解决方案是更改 versionName 和 Code。我只有 apk 文件，我可以只用 apk 文件在 Eclipse 中更改这些细节，而且在 Eclipse 或开发 Android 应用程序方面的经验很少吗？

谢谢你

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-04-09T21:53:54.093

您不能从 apk 本身重建新版本的 apk。
让应用程序开发人员执行以下操作：

1.  **以更高的**版本号重建项目的先前状态（*必须*高于所有先前提交的版本）
2.  重新提交

来自谷歌的[安卓“开发者控制台”页面](https://developer.android.com/distribute/googleplay/developer-console.html)：

> 请注意，由于 Android 平台的应用版本控制要求，**不支持回滚。****如果您需要回滚，请考虑使用新版本号启动以前的 APK**。但是，这种做法只能作为最后的手段，因为用户将失去对新功能的访问权限，并且您的旧应用程序可能无法与您的服务器更改或数据格式向前兼容，因此请务必运行您的 alpha 和 beta 测试更新。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-21T00:07:52.227

一个好的策略是，在创建构建时，修改清单以构建版本 2.0 = 39 和再次 2.05 = 45 并生成这两个 apk，这显然会做同样的事情。

稍后，当 build 2.01 = 40 在生产中发现错误时，您可以通过上传之前创建的 2.05 = 45 来跳转回旧版本。

在释放 40、41、42、43 和 44 时，您有 5 次回溯的机会以返回到之前的功能！

为每个构建执行此操作，您始终可以返回到已预编译和构建但版本号高于当前生产的早期版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T12:11:40.457

如果没有签名证书，您将无法更改 APK 文件。

假设您没有更改 API 支持级别，您应该能够恢复到旧版本。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2015-07-16T13:38:55.307

据推测，转到开发控制台，选择 APK 选项卡，点击“高级模式”选项，停用当前版本并点击“重新激活”以获得所需的版本。

# jquery - 如何使用 jQuery 编辑多个 HTML 元素中的文本区域

> ID：10383322
> 
> 赞同：2
> 
> 时间：2012-04-30T11:57:18.977
> 
> 标签：jquery

观察：

```
<span class="description">

Not This person?
<a href="http://www.example.com" target="_self">Click Here</ >

</span> 
```

我想编辑“描述”类的“不是这个人”部分以及“单击此处”部分，而不触及锚标记“href”属性。

jQuery可以做到这一点吗？

很抱歉解释得太糟糕了，这里有一个更好的解释：

好的，所以这段 HTML 写在 Pardot 中的布局模板中，它将生成“描述”范围内的内容。这将包括锚点及其文本“单击此处”。在编辑器中，HTML 如下所示：

```
<span class="description">

%%description%%

</span> 
```

在浏览器中，它将生成以下内容：

```
<span class="description">

Not This person?
<a href="http://www.example.com" target="_self">Click Here</a >

</span> 
```

我想用 jQuery 编辑“不是这个人”和“点击这里”元素！抱歉之前不够清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:04:30.617

**编辑**

由于您无法修改结构，您可以使用此代码从中提取`<a>`、`<span>`更新两个元素，然后合并它们：

```
var desc = $(".description");
var a = desc.find("a");
var href = a.attr('href');
var target = a.attr('target');
desc.html("New description text" + '<a href="'+href+'" target="'+target+'">New link label</a>'); 
```

**原始答案**

您应该分隔文本节点“不是这个人？” 从*一个*，也许是通过搬出*跨度*？考虑这个结构：

```
<span id="your_description_id" class="description">
Not This person?
</span>

<a id="your_anchor_id" href="http://www.example.com" target="_self">Click Here</a> 
```

然后你可以像这样用 jQuery 编辑这些文本：

```
$("#your_description_id").text("new description");
$("#your_anchor_id").text("new link label"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:24:38.617

### *[演示 jsBin](http://jsbin.com/egaken/3/edit)*

```
 var $temp = $('.description').find('a').text('LINK').remove(); // edit, remove and store in a 'variable'
   $('.description').text('I am this person! ').append($temp); // attach 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:59:49.713

如果你能够包装“不是这个人？” 在另一个跨度中，您可以使用 $('span.description span') 和 $('span.description a') 找到它们并进行编辑等。

```
var englishVersion=$('span.description span').text();
var frenchVersion=somefunction(englishVersion);
$('span.description span').text(frenchversion); 
```

ETC

# ruby-on-rails-3 - 在索引页面中共享视图的正确方法

> ID：10383324
> 
> 赞同：0
> 
> 时间：2012-04-30T11:57:38.810
> 
> 标签：ruby-on-rails-3, view, partials, renderpartial

我是一个 Ruby-on-Rails 新手，刚刚开始。

我有一个名为“account_types”的 MVC，通过脚手架生成：

*   控制器/account_types_controller.rb
*   助手/account_types_helper.rb
*   模型/account_type.rb
*   视图/account_types/_form、编辑、索引等...

转到 localhost:3000/account_types 会给我索引视图。

我想做的是将与从应用程序索引页面中的 account_types 索引方法中选择的数据相同的数据显示为列表。

我编写了一个名为 account_types/_list.html_erb 的新视图，如下所示：

```
<ul>
<% @account_types.each do |account| %>
    <li><% account.label %></li>
<% end %>
</ul> 
```

然后我编辑了 home/index.html.erb （这是基于其他问题中给出的示例）：

```
<%= render :partial => 'account_types/list', :module_types => @module_types %> 
```

但是我得到

> nil:NilClass 的未定义方法“每个”

并且错误显示来自我编写的 account_types/_list.html.erb 的代码

```
<% @account_types.each do |account| %> 
```

脚手架视图工作正常，为什么不是我的？

部分在这里使用正确吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:57:11.810

[在 rails 中定义应用程序范围的部分及其变量的正确方法是](https://stackoverflow.com/questions/8869291/what-is-the-correct-way-to-define-an-application-wide-partial-and-its-variables)使用 a `before_filter`on `ApplicationController`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:35:14.147

如果需要，您可以为此使用部分，但据我所知，在这种情况下它是不必要的（它们用于在多个视图之间共享代码块）。为了使此代码正常工作，您需要`@account_types`在控制器中定义类似

```
@account_types = AccountType.all 
```

您可以在您`account_types_controller.rb`的`index`行动中看到确切的路线。`:module_types => @module_types`在这里没有必要，因为我怀疑你定义`@module_types`了任何一个*并且*你根本没有`module_types`在你的部分中使用。

很明显，您不了解 Rails 的工作原理，因此我建议您先阅读一篇好的教程（例如[这个](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)），然后再继续您的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:19:41.610

您传递`:module_types`给部分，但使用`account_types`. 如我所见，您只需将 index.html.erb 更改为：

```
<%= render :partial => 'account_types/list', :account_types => @module_types %> 
```

# java - 在 Eclipse 中运行多模块 Maven Web 应用程序

> ID：10383340
> 
> 赞同：0
> 
> 时间：2012-04-30T11:59:32.337
> 
> 标签：java, eclipse, tomcat, maven

我正在尝试在 Eclipse (EE Helios SR 1) 中运行多模块 Maven Web 应用程序。在 NetBeans 中，只需单击运行按钮。但在这里它可能有点复杂。

我已将 Tomcat 7.0.26 添加为项目的 war 模块的服务器。当我尝试运行该应用程序时，在`Servers`我看到的窗口部分中`Apache Tomcat v.7.0.26 at localhost [Started, Synchronized]`，但浏览器没有反应。应用运行时系统浏览器是否需要显示页面？

当服务器启动时，我试图移动到`localhost:8080`and `localhost:8080/welcome.html`（第二个应该由应用程序处理），但我两次都收到 404 错误。我也没有在`apache-tomcat-7.0.26/webapps/`. Eclipse 在运行应用程序时是否应该将项目放在那里？如果有人告诉我我在这里缺少什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:24:11.310

如果未指定，tomcat 与 eclipse 的集成默认将 war 部署到 .metadata 中的特定文件夹，在我的情况下类似于： `~/workspace/<my_project_workspace_name>/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/`

Every war are then unzipped to a folder. If your maven pom.xml you'll find a

```
<build>
    <finalName>myapp</finalName>
</build> 
```

Then it'll deployed to tomcat as :

```
localhost:8080/myapp/welcome.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:08:23.907

Maven 项目与具有 Web 应用程序方面的项目不同，您不能直接将 Maven 应用程序作为 Web 应用程序运行，因为文件夹结构不同。为了直接从 Eclipse 运行您的应用程序，请尝试将 Web 应用程序性质添加到您的 maven 项目中[涉及修改 .project 和 .classpath 文件以及添加一些其他文件的复杂修改]。我建议相应地修改您的 pom.xml 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:14:28.583

在 Eclipse 中运行 Web 服务器时，我有很多糟糕的经历。大多数时候，这与不可靠的类/资源重新加载有关。

我的解决方案是在一个新模块中将[Jetty添加到我的应用程序中（请参阅](http://www.eclipse.org/jetty/)[Embedding Jetty](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)）。这基本上将我的 Web 应用程序变成了 Java 应用程序，避免了大部分问题。它还允许我在应用程序重新加载时指定一个过滤器（用 Java 编写）。

这解决了类重新加载的所有问题（类和资源永远不会复制到任何地方；它们是从 Eclipse 的 bin 文件夹中加载的），启动速度更快（我们将启动时间从几分钟缩短到 15 秒）并且可靠。

# iphone - 如何在 Objective-C 中从服务器下载 CSV 文件

> ID：10383341
> 
> 赞同：4
> 
> 时间：2012-04-30T11:59:33.617
> 
> 标签：iphone, objective-c, ios, xcode, csv

我正在开发一个新的 iPhone 应用程序，在这里我从本地解析了一个 'csv' 文件，它与我一起工作。当我尝试以编程方式从服务器下载“csv”文件时，它并没有为我锻炼。请你帮助我好吗？

**从本地文件加载数据**（工作正常）

```
- (void)viewDidLoad
{  
    [super viewDidLoad];

    NSString * file = [[NSBundle bundleForClass:[self class]] pathForResource:@"sample" ofType:@"csv"];

    NSStringEncoding encoding = 0;
    NSString * csv = [NSString stringWithContentsOfFile:file usedEncoding:&encoding error:nil];
    NSArray *fields = [csv CSVComponents];
    NSLog(@"fields: %@", fields); //getting the result content 
} 
```

**从服务器下载文件**（失败）

```
-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connectionDidFinishLoading"); //nothing showing here

    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *fullName = [NSString stringWithFormat:@"quotes.csv"];

    NSString *fullFilePath = [NSString stringWithFormat:@"%@/%@",docDir,fullName];
    [receivedData writeToFile:fullFilePath atomically:YES];
} 

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"data: %@", data); //nothing showing here

    if (receivedData)
        [receivedData appendData:data];
    else 
        receivedData = [[NSMutableData alloc] initWithData:data];
}

- (void)loadDatafromURL
{    
    NSURL *url = [NSURL URLWithString:@"http://download.finance.yahoo.com/d/quotes.csv?s=^GSPC,^IXIC,^dji,^GSPC,^BVSP,^GSPTSE,^FTSE,^GDAXI,^FCHI,^STOXX50E,^AEX,^IBEX,^SSMI,^N225,^AXJO,^HSI,^NSEI&f=sl1d1t1c1ohgv&e=.csv"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [NSURLConnection connectionWithRequest:request delegate:self];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:27:01.153

实现这个方法：

```
-(void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error 
```

你会发现你得到一个错误

```
Error Domain=NSURLErrorDomain Code=-1000 "bad URL" UserInfo=0xf663f40 {NSUnderlyingError=0xf663de0 "bad URL", NSLocalizedDescription=bad URL} 
```

我以前研究过以这种方式下载信息，我认为您遇到的一个问题是单独的符号必须用“+”分隔。此外，在拉取索引时，您不能将“^”符号作为 URL 的一部分传递。您必须将其替换为“%5E”。

所以，添加这个：

```
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"%@", [error description]);
} 
```

并将您的 URL 更改为：

```
NSString *urlString = @"http://download.finance.yahoo.com/d/quotes.csv?s=^GSPC+^IXIC+^dji+^GSPC+^BVSP+^GSPTSE+^FTSE+^GDAXI+^FCHI+^STOXX50E+^AEX+^IBEX+^SSMI+^N225+^AXJO+^HSI+^NSEI&f=sl1d1t1c1ohgv&e=.csv";
NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]; 
```

现在它对我有用！我什至检查了输出的 .csv 文件，看起来不错！每行一个完整的报价。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:31:12.940

如果您计划通过网络获取比单个 csv 更多的数据，您可以查看[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它是一个用于执行网络操作的出色库。

一个可行的解决方案看起来有点像这样：

```
- (void)getCSVAsynch {
    NSString *unescaped = @"http://download.finance.yahoo.com/d/quotes.csv?s=^GSPC,^IXIC,^dji,^GSPC,^BVSP,^GSPTSE,^FTSE,^GDAXI,^FCHI,^STOXX50E,^AEX,^IBEX,^SSMI,^N225,^AXJO,^HSI,^NSEI&f=sl1d1t1c1ohgv&e=.csv";
    NSURL *url = [NSURL URLWithString:[unescaped stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"CSV: %@", [[NSString alloc] initWithBytes:[responseObject bytes] length:[responseObject length] encoding:NSUTF8StringEncoding]);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Things go boom. %@", [error localizedDescription]);
    }];
    [operation start];
} 
```

# android - android 如何找出隐式 Intent 的 URI 的 MIME 类型？

> ID：10383344
> 
> 赞同：4
> 
> 时间：2012-04-30T11:59:46.097
> 
> 标签：android, android-intent, mime-types, android-contentprovider

我目前正在学习开发 Android 应用程序并且有一个相当基本的问题：

假设我想发送一个隐式 Intent 来打开由 URI 链接指定的数据，例如“content://com.mynewauthority:8100/table1”。假设我创建了一个自定义内容提供程序，它在“content://com.mynewauthority:8100/table1”维护一个 SQLite 表。

现在，由于我没有为我的表指定 MIME 类型，而只指定了它的 URI，Android 必须能够以某种方式找出它。但由于它是定制表，我自己决定 MIME 类型，所以据我所知，它可能是“猴子/香蕉”。我似乎在 Content Provider 实现中找不到任何地方，它指定了哪个 MIME 类型与哪个 URI 一起使用，除了 getType(URI uri) 函数似乎没有被 Android 系统用于 Intent 解析。

所以我的问题是：在解析隐式 Intent 期间，Android 如何确定与定制内容提供者的 URI 关联的 MIME 类型？

希望这个问题足够清楚！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:25:33.453

如果其中`Intent`有 MIME 类型（请参阅 XGouchet 的答案），则使用该类型。

如果其中`Intent`没有 MIME 类型，Android 将尝试确定 MIME 类型：

*   对于 a ，就像您的情况一样，它根据权限`ContentProvider`调用`getType()`特定的提供者`Uri`
*   对于`http://` `Uri`，它发出一个 HTTP`HEAD`请求
*   对于大多数其他东西，它失败了（例如， a `file://` `Uri`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:21:08.097

如果您自己创建意图对象，则可以使用以下命令强制附加到它的 mime 类型：

```
fileType = "monkey/bananas";
intent.setDataAndType(fileUri, fileType); 
```

仅供参考，android 通常使用[MimeTypeMap](http://developer.android.com/reference/android/webkit/MimeTypeMap.html)从文件扩展名中检测 mime 类型，我发现它相当不完整。[您可以从MimeTypeMap 类源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/webkit/MimeTypeMap.java?av=f#MimeTypeMap.getSingleton%28%29)中打印已知的文件扩展名和关联的 mime 类型

# iphone - UIView 均匀调整大小

> ID：10383345
> 
> 赞同：0
> 
> 时间：2012-04-30T11:59:46.417
> 
> 标签：iphone, uiview, resize, frame, evenly

我有一个要均匀扩展的 uiview 子类。我的意思是我希望视图的原点位于中心，并且宽度和高度扩展相同的量。现在原点在左上角，(0,0)，它向右扩展。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:25:14.183

当您更改框架的宽度和高度时，还将框架的 x 和 y 位置更改为这些数量的一半。

例如，如果您的帧当前是 (40, 60, 100, 200)，并且您希望它宽 20 和高 30，则将其设为 (30, 45, 120, 230)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:29:11.467

我建议，如果我理解你的问题，你会得到视图所在的超级视图的大小。让这个观点成为`view`。然后，让你的观点是`myView`。

所以你所要做的就是：

取屏幕大小的一半作为宽度和高度值，并定位视图的原点。

```
UIView view = myView.superview;
if (nil != view) {
    // Make sure your view won't extend by itself with this
    myView.autoresizingMask = UIViewAutoresizingNone;

    // Get The size of the parent view
    CGSize size = view.bounds.size;

    // Set the new frame of your view
    myView.frame = CGRectMake(size.width/2.0f, 
                              size.height/2.0f, 
                              size.width/2.0f,
                              size.width/2.0f);
} 
```

现在您的视图已正确定位

# android - Android：不幸的是谷歌地图停止了

> ID：10383353
> 
> 赞同：1
> 
> 时间：2012-04-30T12:00:41.727
> 
> 标签：android, android-emulator, google-maps-mobile

**Main.xml & manifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>    
<RelativeLayout 
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical" 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <com.google.android.maps.MapView
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map_view"
  android:layout_width="fill_parent" 
  android:layout_height="fill_parent"
  android:clickable="true" 
  android:state_enabled="true" 
  android:apiKey="0hiUaVXTa9WGmYKpnOEIfy2HddhBcpBTrIc1Qnw" />
</RelativeLayout>

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.Map.test"
    android:versionCode="1"
    android:versionName="1.0" >
     <application android:label="@string/app_name">
        <uses-library android:name="com.google.android.maps" />
        <activity android:name=".GoogleMaps" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
     </application>
<uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

**谷歌地图.java**

```
 import com.Map.test.R;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import android.os.Bundle;
public class GoogleMaps extends MapActivity {
private MapView mapView;
@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mapView = (MapView) findViewById(R.id.map_view);       
    mapView.setBuiltInZoomControls(true);
    }
    @Override
    protected boolean isRouteDisplayed() {
    return false;
    }
} 
```

Eclipse 没有在我的代码和模拟器运行中显示任何错误，但最后我得到“不幸的是谷歌地图停止”错误。我可以知道这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:07:54.383

您是否尝试过不同的 API 密钥？不久前我遇到了同样的问题，我正在使用调试密钥，我必须生成一个新密钥并使用它。我会先尝试一下，看看会发生什么。

# hardware - 机器周期、总线周期和执行周期的区别

> ID：10383354
> 
> 赞同：12
> 
> 时间：2012-04-30T12:00:43.660
> 
> 标签：hardware, execution, bus

我无法理解**Bus Cycle**、**Instruction Cycle**和**Machine Cycle**之间的区别。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T09:02:21.860

首先，计算机使用时钟。该时钟的频率表示时钟波每秒改变多少（千兆/兆/千）周期。这是计算机任何循环的基础。

总线周期是在 cpu 和外部设备（如外部存储器）之间进行单个读取或写入事务所需的周期或时间。

机器周期是执行读取、读取或写入操作所需的周期数。[更多在这里](http://www.coolinterview.com/interview/12395/)。如果 CPU 和内存之间的事务长于读取或写入的数据宽度，则读取或写入可能不止一个总线周期。例如，在 8080 机器上，数据宽度为 8 位。如果 CPU 需要读取或写入 16 位数据，则​​需要两个总线周期。

指令周期是完成一条指令需要多少个机器周期。这取决于指令。例如，有些指令从内存中取出后需要取出更多数据才能完成指令，有些需要在指令周期结束时写入数据，有些指令根本不做太多，比如 NOP，它基本上取该指令在一个机器周期内不执行任何操作。

我希望这能有所帮助。如果没有，也许微处理器时序图将有助于更清楚地说明问题。

# android - 我如何使用其他应用程序偏好

> ID：10383355
> 
> 赞同：-1
> 
> 时间：2012-04-30T12:00:45.550
> 
> 标签：android

如何通过使用意图或其他方式更改首选项屏幕布局，从我的应用程序访问其他应用程序首选项屏幕实现。是否可以获得首选项的实现，因为我们必须根据首选项值更改布局

请帮助我。

问候蒂拉格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:03:47.913

i do it once with a sharedUserID, you have to give both applications the same SharedID in the `Manifest.xml`

set the sharedUserID in both `Manifest.xml`, set it like in this [link](http://developer.android.com/guide/topics/manifest/manifest-element.html)

your code should look like this:

```
SharedPreferences prefs = con.getSharedPreferences("PrefsFromOtherApk",Context.MODE_WORLD_WRITEABLE);
            final Editor edit = prefs.edit();
            edit.putBoolean("SomeBoolValue", true);
            edit.commit(); 
```

# regex - 删除不以特定前缀开头的每一行

> ID：10383356
> 
> 赞同：1
> 
> 时间：2012-04-30T12:00:46.747
> 
> 标签：regex

我正在尝试创建一个正则表达式来删除所有不以某个前缀开头的行。使用[这个技巧](http://www.perlmonks.org/?node_id=188907)我想出了这个：

```
(?:(?!\nLAST-MODIFIED:[^\n]+\n).*) 
```

这似乎无法正常工作。我究竟做错了什么？是的，我知道这总是会删除第一行，无论它是否带有前缀`LAST-MODIFIED:`。但我很肯定第一条线永远不会是一条`LAST-MODIFIED:`线，所以它应该是安全的。`(?:(?!(\n|^)LAST-MODIFIED:[^\n]+\n).*)`如果我想完全安全，我建议的解决方法是。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:14:48.537

这会做你需要的吗？

```
(^(?!LAST-MODIFIED)[^\n]*)+ 
```

解释：

*   `^`- 匹配一行的开头
*   `(?!LAST-MODIFIED)`- 检查它不是以 last-modified 开头
*   `[^\n]*`- 如果上述情况属实，则匹配所有内容，直到找到换行符
*   `+`- 重复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:20:26.130

编辑：- 哎呀，你想要的行不以某个前缀开头。请参阅下面的编辑：

如果这没有检测到多行内容，您可以使用 grep 从 shell 轻松执行此操作：

```
grep -v -P "^LAST-MODIFIED:.*" oldfile > newfile 
```

我建议将它导入一个新文件并检查它，然后将新文件移动到旧文件上，`mv newfile oldfile`而不是直接更改文件，以避免可能丢失数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:24:19.203

我不确定您使用的是哪种语言，但在 .NET/C# 中可以使用（经过测试）：

```
 Regex r = new Regex(@"^(LAST-MODIFIED\:).*$");
    Debug.WriteLine(r.Replace("LAST-MODIFIED:2012-01-01", "")); 
```

^ 匹配行首，$ 匹配行尾句点/点“.” 匹配零次或多次出现的除换行符以外的任何字符

# java - API design / Command pattern vs. "normal implementation"

> ID：10383370
> 
> 赞同：0
> 
> 时间：2012-04-30T12:01:52.503
> 
> 标签：java, api, design-patterns

I'm working on a tree-structured storage and we currently use transaction methods to modify the tree-structure. I always thought using the Command Pattern would be appropriate. However I just changed a small behaviour and I like it (returning the transaction instance located at the inserted node (except for attributes)):

```
wtx.insertText(EInsert.ASRIGHTSIBLING, "value").insertElement(EInsert.ASRIGHTSIBLING, new QName("bla").insertElement(EInsert.ASFIRSTCHILD, new QName("blubb")).insertAttribute(new QName("foo"), "bar").insertAttribute(new QName("bar"), "foo")); 
```

I think chaining the operations this way is very nice, but our transactions provide cursor like methods on the tree (`moveTo(long)`, `moveToParent()`, `moveToFirstChild()`...) which return boolean values instead of the current transaction instance, but I think this can't be avoided. Otherwise we could even do moves between without the cumbersome

```
wtx.method();wtx.method();wtx.method(); 
```

However I thought about the command pattern which would be

```
new InsertText(EInsert.ASRIGHTSIBLING, "value").execute(wtx);
new InsertElement(EInsert.ASRIGHTSIBLING, new QName("bla")).execute(wtx);
... 
```

which is a bit more verbose but well, it would "support" the open/closed principle which is really nice.

So, what do you think?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:18:34.043

对我来说，树结构听起来像是一个巨大的复合对象。由于您还要处理构建事务，我认为使用命令模式是合适的，但如果可能，您应该考虑将您的 execute() 调用包装在某种导向器中，以便尽可能将命令和构建器模式混合在一起.

```
public void directorMethod(Object wtx) {
  InsertText(EInsert.ASRIGHTSIBLING, "value").execute(wtx);
  InsertText(EInsert.ASRIGHTSIBLING, "blah").execute(wtx);
} 
```

请注意，void 返回可能是您的树结构，而 wtx 参数可以是事务和/或树结构，我不一定确定您想要如何做。使用 Builder 的想法是从底层实现中抽象出 Composite 事务的构建。这样，如果您需要更改底层命令，您应该能够这样做并进行原子测试。

# c++ - 如何正确重载 operator< 以使用我的用户定义类型在 std::map 中使用？

> ID：10383371
> 
> 赞同：0
> 
> 时间：2012-04-30T12:01:57.327
> 
> 标签：c++, dictionary, overloading, operator-keyword

我有一个名为 set 的类，它是内部动态分配的数组，充当具有所需重载运算符的容器。这个数组 (1D) 存储了一个（有时非常大）整数，当整个集合插入到这个数组中时，我用 std::sort 排序（比使用 std::set 快得多）。这些集合被放入 std::map 中，它们充当双精度的键，当 std::map 已经具有该集合并且如果当前集合不在 std::map 容器中则它被插入与计数器“0”。我试图重载 operator< 因为 std::map 需要它。但它会导致分段错误。数组的第一个成员（名为 arr）存储集合中的整数个数，即数组总长度为 arr[0]+1。

我不使用向量或新数组类型的原因是因为我的 RAM (64GB) 很快耗尽，这些集合在峰值时刻的大小为 2^10 到 2^11（生成子集）所以我想创建自己的具有最小空间开销的向量版本。

```
bool operator<(const set& s1, const set& s2)
{
    if (s1.arr[0] < s2.arr[0])
        return true;
    else if (s1.arr[0] > s2.arr[0])
        return false;

    if (s1.arr[0] == s2.arr[0])
    {
        for (int i = 1; i < s1.arr[0]+1; i++)
        {
            if (s1.arr[i] > s2.arr[i]) return false;
        }
    }
    return true; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:07:47.113

你应该改变你的内部循环比较类似于你的长度比较：

```
 for (int i = 1; i < s1.arr[0]+1; i++)
    {
        if (s1.arr[i] < s2.arr[i])
            return true;
        else if (s1.arr[i] > s2.arr[i])
            return false;
    } 
```

这样，您的比较运算符将实现严格的弱排序。你原来的运算符没有，例如，`(2 0 2)`与 不可比，与`(2 1 1)`不可`(2 1 1)`比`(2 0 3)`，但`(2 0 2) < (2 0 3)`它打破了等价的传递性。

# vim - 如何在vim中使单词不可见？

> ID：10383373
> 
> 赞同：5
> 
> 时间：2012-04-30T12:02:15.750
> 
> 标签：vim

在`vimwiki`中，我可以输入这样的链接：

```
[[link]] 
```

当我将光标放在线上时，`[[]]`可见：

```
>[[http://www.google.com/]]< 
```

当光标移开时，`[[]]`是不可见的：

```
>http://www.google.com/< 
```

我在 vim 的帮助手册（`:help vim`）中注意到了这种行为：（`*vim:*`s`*`在我输入之前是不可见的`V`）。

我无法弄清楚它是如何工作的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T13:31:17.827

这是在 vim 7.3 中添加的称为“隐藏”的功能（如果我没记错的话）。举个简单的例子，试试这个。

打开一个缓冲区并键入三行，中间一行是“foobarbaz”。然后输入以下 ex 命令：

```
set conceallevel=2
syntax match Todo /bar/ conceal 
```

当您的光标位于“foobarbaz”行时，“bar”将可见（如果您启用了语法突出显示，则使用 Todo 突出显示组突出显示）。一旦你下线，“bar”就会消失。

有关详细信息，请参阅`:help conceal`和`:help conceallevel`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T13:29:08.330

我认为隐藏文本可能是一个非常有用的功能。考虑文本折叠或链接的可读性。

为了隐藏文本，Vim 7.3 引入了“隐藏”参数。隐藏文本是一个定义明确的 Vim 特性。这不是一个肮脏的把戏。看

```
 :help :syn-conceal 
 :help 'conceallevel' 
 :help 'concealcursor' 
```

请注意，隐藏仅适用于语法区域，不适用于匹配项。

我没有隐藏的经验，所以我不能提供一个开箱即用的例子。

哈比

# .htaccess - @font-face not working across domains in Firefox

> ID：10383375
> 
> 赞同：0
> 
> 时间：2012-04-30T12:02:19.747
> 
> 标签：.htaccess, firefox, css, permissions

I am trying to use a font from typefront.com. It works in every other browser but the security restrictions in Firefox don't allow using fonts from a different domain.

I've tried creating an `.htaccess` file and adding the following snippet of code but when I try to load the site I get an internal server error page!

```
<FilesMatch "\.(ttf|otf|eot|woff)$">
<IfModule mod_headers.c>
Header set Access-Control-Allow-Origin "http://mydomain.com"
</IfModule>
</FilesMatch> 
```

Here is my CSS code:

```
@font-face {
  font-family: "Gravur-CondensedBold";
  src: url("http://typefront.com/fonts/825589026.eot");
  src: local("☺"),
       url("http://typefront.com/fonts/825589026.woff") format("woff"),
       url("http://typefront.com/fonts/825589026.ttf") format("truetype"),
       url("http://typefront.com/fonts/825589026.svg") format("svg");
}

@font-face {
  font-family: "Gravur-CondensedLight";
  src: url("http://typefront.com/fonts/825589027.eot");
  src: local("☺"),
       url("http://typefront.com/fonts/825589027.woff") format("woff"),
       url("http://typefront.com/fonts/825589027.ttf") format("truetype"),
       url("http://typefront.com/fonts/825589027.svg") format("svg");
} 
```

Can anybody help me with this?

here's the url: [http://www.enjoythisyeah.com](http://www.enjoythisyeah.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:34:39.207

使用[带有 base64 编码的 WOFF 或 SVG 字体的 dataURI](https://stackoverflow.com/questions/9695027/how-to-use-a-data-uri-with-font-face-in-firefox)来绕过[web 字体的同源限制](http://www.w3.org/TR/css3-fonts/#default-same-origin-restriction)。

# ios - iOS: How to check if there is Data saved in Keychain?

> ID：10383376
> 
> 赞同：2
> 
> 时间：2012-04-30T12:02:20.413
> 
> 标签：ios, keychain, autologin

With which method do I check if I have Data saved in my Keychain for a autologin? Does anyone have an example?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:04:01.880

你最好试试[这个](http://log.scifihifi.com/post/55837387/simple-iphone-keychain-code)。这是一个漂亮的工具库，里面有你需要的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:26:21.523

[钥匙串服务程序指南](https://developer.apple.com/library/mac/#documentation/security/conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html#//apple_ref/doc/uid/TP30000897-CH208-SW1)。在本指南中，您会发现两者

1.如何在钥匙串中添加和查找项目，以及

2.如何获取和更改钥匙串项中的属性和数据。

# python - Labeling of results in PyParsing when using Optional and &

> ID：10383379
> 
> 赞同：1
> 
> 时间：2012-04-30T12:02:33.643
> 
> 标签：python, parsing, pyparsing

I'm using PyParsing with the following code, to parse date strings:

```
from pyparsing import *

# Day details (day number, superscript and day name)
daynum = Word(nums, max=2)
superscript = oneOf("th rd st nd", caseless=True)
day = oneOf("Mon Monday Tue Tues Tuesday Wed Weds Wednesday Thu Thur Thurs Thursday Fri Friday Sat Saturday Sun Sunday", caseless=True)

full_day_string = Optional(day).suppress() & daynum + Optional(superscript).suppress()

# Month names, with abbreviations
month = oneOf("Jan January Feb February Mar March Apr April May Jun June Jul July Aug August Sep September Oct October Nov November Dec December", caseless=True)

# Year
year = Word(nums, exact=4)

# Full string
date = Each( [full_day_string("day"), Optional(month)("month"), Optional(year)("year")]) 
```

When I run the parser, and dump the resulting structure, I get the following:

```
In [2]: r = date.parseString("23rd Jan 2012")

In [3]: print r.dump()
['23', 'Jan', '2012']
- day: ['23'] 
```

The optional fields inside the Each clause seem to have been picked up correctly (you can see inside the list at the top), but they aren't being labelled like they're meant to be.

This works fine if I change the `Each` to an `And`.

Is this meant to work? Or am I doing something wrong here? I've seen this question: [pyparsing, Each, results name](https://stackoverflow.com/questions/6795252/pyparsing-each-results-name), but I can't seem to see what the problem was that the answerer fixed.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T12:18:10.290

作为一种解决方法，更改：

```
date = Each( [full_day_string("day"), Optional(month)("month"), Optional(year)("year")]) 
```

至

```
date = Each( [full_day_string("day"), Optional(month("month")), Optional(year("year"))]) 
```

但这只是告诉我在 pyparsing 中有一个错误。我看了一点，还没有找到。当我运行它时，我会发布一条新评论。

# python - get all the links of HTML using lxml

> ID：10383383
> 
> 赞同：3
> 
> 时间：2012-04-30T12:02:52.367
> 
> 标签：python, lxml

I want to find out all the urls and its name from a html page using lxml.

I can parse the url and can find out this thing but is there any easy way from which I can find all the url links using lxml?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T12:08:44.750

```
from lxml.html import parse
dom = parse('http://www.google.com/').getroot()
links = dom.cssselect('a') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-23T19:06:18.523

```
from lxml import etree, cssselect, html

with open("/you/path/index.html", "r") as f:
    fileread = f.read()

dochtml = html.fromstring(fileread)

select = cssselect.CSSSelector("a")
links = [ el.get('href') for el in select(dochtml) ]

links = iter(links)
for n, l in enumerate(links):
    print n, l 
```

# iphone - 从 TableView 推送到另一个 TableView 得到黑屏

> ID：10383384
> 
> 赞同：1
> 
> 时间：2012-04-30T12:02:55.017
> 
> 标签：iphone, ios, xcode, ios5, xcode4

我从从 Web 服务获取信息的 TableView 中选择一行。一切都已加载：搜索，然后我们得到结果，然后选择一个。但是在选择了一个之后，我可以将数据设置到另一个视图并让另一个 Web 服务正常工作。我可以接受。问题是显示包含新 Web 服务结果的新表。

从最后一个表视图中选择一行后，我得到了这个：

```
2012-04-30 13:54:29.687 +%¨*%¨%¨*[6759:f803] JSON(
    "Name Gerald",
    "",
    4,
    FR,
    ""
) 
```

我用这个做了这个：

```
 NSString *nom = [olo objectForKey:@"name"];
    NSString *hd = [olo objectForKey:@"24_7"];
    NSString *passenger = [olo objectForKey:@"passengers"];
    NSString *country = [olo objectForKey:@"country"];
    NSString *special = [olo objectForKey:@"special_trip"];

    _jsonOlo = [[NSMutableArray alloc] initWithObjects:nom, hd, passenger, country, special, nil]; 
```

但是当我设置桌子时，我得到一个黑屏：

第一个：

[http://tinypic.com/r/2uzpc20/6](http://tinypic.com/r/2uzpc20/6)

2：

[http://tinypic.com/r/287qeeq/6](http://tinypic.com/r/287qeeq/6)

我有与发送到结果的最后一个 tableView 相同的代码，但我得到黑屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:25:20.130

如果两个表视图不同，并且您不只是更改同一个表的数据源，那么您的视图可能会在您从 Web 服务获取所有数据之前加载。我不知道，您使用哪个框架进行 json 解析但是应该有一个代表，表示从 Web 服务获取结果的结束。在那里解析数据，然后在**viewDiDLoad**方法中将其发送到 tableview。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:33:46.880

您可能没有在 XIB 中正确连接 tableview，或者您可能没有将子视图添加到主视图，或者您必须在 web 服务完成检索数据时分配它，但您之前可能已经触摸过它。

您可以做一件事：禁用单元格选择，直到您准备好所有数据。

# jquery - die function for removing event in jquery

> ID：10383388
> 
> 赞同：2
> 
> 时间：2012-04-30T12:03:34.577
> 
> 标签：jquery

I created a `mouseover` event handler like this:

```
$('.grpName_tooltip0, .grpName_tooltip1, .grpName_tooltip2').live('mouseover',function(){
    var localGrpName=$(this).attr('class')=='grpName_tooltip0'?arrGrpNames[0]:$(this).attr('class')=='grpName_tooltip1'?arrGrpNames[1]:$(this).attr('class')=='grpName_tooltip2'?arrGrpNames[2]:'';
    $('#GroupsDivTooltip').html(localGrpName);
    $('.ttpGrp').css({'top':$(this).offset().top+27,'left':$(this).offset().left}).fadeIn();
}).live('mouseleave',function(){
    $('#GroupsDivTooltip').html('');
    $('.ttpGrp').fadeOut();
}); 
```

I want to do .die for particular `.grpName_tooltip0` class name.

When I tried individually like below is not working...

```
$('.grpName_tooltip0').die('mouseover'); 
```

It is working for all mentioned... like below

```
$('.grpName_tooltip0, .grpName_tooltip1, .grpName_tooltip2').die('mouseover'); 
```

I just want to only for one.

Please suggest me.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:28:20.823

第一：自 jQuery 1.7 起已弃用`.live()`。`.die()`您现在应该使用[`.on()`](http://api.jquery.com/on/)（但会出现同样的问题，所以这里的所有解决方案仍然有效）。

* * *

如果您不必使用事件委托，您可以简单地使用[@Raminson 显示](https://stackoverflow.com/a/10383470/218196)`unbind`的事件处理程序。

如果您必须使用事件委托，一种方法是直接向元素添加一个额外的事件处理程序，这可以防止事件冒泡 DOM 并在根处触发事件处理程序（[如 @Farhad 所示](https://stackoverflow.com/a/10383459/218196)）。

另一种解决方法可能是在元素上设置一个标志，如果标志不是，则仅执行事件处理程序，例如`false`：

```
$('.grpName_tooltip0, .grpName_tooltip1, .grpName_tooltip2').live('mouseover',function(){
    if($(this).data('active') !== false) {
        // do something
    }
}); 
```

然后，您可以通过设置启用和禁用元素的事件处理程序

```
$('.grpName_tooltip0').data('active', false); // or true 
```

* * *

上述所有方法都有一个缺点，即为了防止事件处理程序触发，元素必须在您做出决定时存在。不过，您的情况可能并非如此。

因此，另一种方法可能是保留要从事件处理程序中排除的选择器列表：

```
var exclude = [];

$('.grpName_tooltip0, .grpName_tooltip1, .grpName_tooltip2').live('mouseover',function(){
    var run = true, $self = $(this);
    $.each(exclude, function(sel) {
        if($self.is(sel)) {
            run = false;
            return false;
        }
    });

    if(run) {
        // do stuff
    }
}); 
```

然后您所要做的就是将您不希望处理程序触发的选择器添加到列表中：

```
exclude.push('.grpName_tooltip0'); 
```

这种方法可以通过各种方式进行优化（例如使用对象而不是数组进行`O(1)`访问），具体取决于您的实际情况。

另一种方法是完全取消绑定事件处理程序，只为您想要的元素重新绑定它：

```
function handler() {
    // your event handler code here
}

var selectors = ['.grpName_tooltip0', '.grpName_tooltip1', '.grpName_tooltip2'];

$(selectors.join()).live('mouseover', handler); 
```

之后：

```
$(selectors.join()).die('mouseover');
$($.grep(selectors, function(sel) {
    return sel !==  '.grpName_tooltip0';
}).join()).live('mouseover', handler); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:09:02.937

也许试试这个会更好：

```
$('.grpName_tooltip0').mouseover(function(){return false;}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:09:58.177

尝试这个：

```
$('.grpName_tooltip0, .grpName_tooltip1, .grpName_tooltip2').mouseenter(function(){
   ....
   $('.grpName_tooltip0').unbind('mouseenter');
}) 
```

# java - 在 BigDecimal 中提取小数点

> ID：10383392
> 
> 赞同：8
> 
> 时间：2012-04-30T12:03:48.620
> 
> 标签：java, bigdecimal

如何使用 BigDecimal 提取小数点后的数字？

> BigDecimal d = BigDecimal.valueOf(1548.5649);

结果：仅提取：5649

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T12:16:36.880

尝试：

```
BigDecimal d = BigDecimal.valueOf(1548.5649);
BigDecimal result = d.subtract(d.setScale(0, RoundingMode.FLOOR)).movePointRight(d.scale());      
System.out.println(result); 
```

印刷：

```
5649 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T12:09:18.323

尝试[BigDecimal.remainder](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#remainder%28java.math.BigDecimal%29)：

```
BigDecimal d = BigDecimal.valueOf(1548.5649); 
BigDecimal fraction = d.remainder(BigDecimal.ONE);
System.out.println(fraction);
// Outputs 0.5649 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T12:09:40.270

这应该可以解决问题：

```
d.subtract(d.setScale(0, RoundingMode.FLOOR)); 
```

[`setScale()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#setScale%28int,%20java.math.RoundingMode%29)将数字四舍五入到零小数位，尽管它的名字，不会改变 的值`d`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T15:43:31.437

如果该值为负数，则 using`d.subtract(d.setScale(0, RoundingMode.FLOOR))`将返回错误的小数。

**使用这个**：

```
BigInteger decimal = 
                d.remainder(BigDecimal.ONE).movePointRight(d.scale()).abs().toBigInteger(); 
```

它返回`5649`或`1548.5649``-1548.5649`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:12:02.183

结果，您不知道您想要哪种类型。最简单的方法可能是将 BigDecimal 转换为字符串，并取一个子字符串：

```
String s = d.toPlainString();
int i = s.indexOf('.');
if (i < 0) {
    return "";
}
return s.substring(i + 1); 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-30T12:10:00.453

尝试使用`d.doubleValue()`来获得双倍值

# mongodb - 如何使用 mongodb-erlang 和 bson-erlang 将 objectid 转换为二进制子类型 3 (uuid)？

> ID：10383395
> 
> 赞同：3
> 
> 时间：2012-04-30T12:03:55.107
> 
> 标签：mongodb, erlang, bson

我生成这样的对象 ID：`mongodb_app:gen_objectid()` 这显然返回一个 ObjectId 类型。

我需要一个 BinType(3, ...) 因为我们不存储 objectids 而是二进制子类型 3 ids。

有谁知道如何转换这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-07T10:47:28.713

```
%%This method is used to generate ObjectId from binary string.
binary_string_to_objectid(BinaryString) ->
    binary_string_to_objectid(BinaryString, []).

binary_string_to_objectid(<<>>, Result) ->
    {list_to_binary(lists:reverse(Result))};
binary_string_to_objectid(<<BS:2/binary, Bin/binary>>, Result) ->
    binary_string_to_objectid(Bin, [erlang:binary_to_integer(BS, 16)|Result]).

%%This method is used to generate binary string from objectid.
objectid_to_binary_string({Id}) ->
    objectid_to_binary_string(Id, []).

objectid_to_binary_string(<<>>, Result) ->
    list_to_binary(lists:reverse(Result));
objectid_to_binary_string(<<Hex:8, Bin/binary>>, Result) ->
    StringList1 = erlang:integer_to_list(Hex, 16),
    StringList2 = case erlang:length(StringList1) of
        1 ->
            ["0"|StringList1];
        _ ->
            StringList1
    end,
    objectid_to_binary_string(Bin, [StringList2|Result]). 
```

测试示例：

binary_string_to_objectid(<<"51F5BE99118735B187000001">>)。
输出：
{<<81,245,190,153,17,135,53,177,135,0,0,1>>}

objectid_to_binary_string({<<81,245,190,153,17,135,53,177,135,0,0,1>>})。
输出：
<<"51F5BE99118735B187000001">>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:44:20.803

想出了如何解决它，我使用[来自 avtobiff 的 uuid 生成器](https://github.com/avtobiff/erlang-uuid)来生成 UUID：

```
generate_objectid_subtype3() ->
    {bin, uuid, uuid:uuid4()}. 
```

# php - How do I use the value from the latest insert using mysql_insert_id in subsequent MULTIPLE insert statements (in PHP and MYSQL)?

> ID：10383397
> 
> 赞同：1
> 
> 时间：2012-04-30T12:04:01.620
> 
> 标签：php, mysql, sql

I want to add the value of the latest insert from TABLE1 to a subsequent MULTIPLE insert statement into TABLE2 which includes multiple entries - however in MySQL I am just getting a 0 (zero) for each entry added into TABLE2.

I know I need to store the `mysql_insert_id` in a variable after the first MySQL query has been executed. So I have included a variable called `$post_id` right after the first `mysql_query()` statement as follows:

```
// If the submit button is pressed in the HTML form
if (isset($_POST['submit_event'])) {
    // First SQL Statement
    if (!mysql_query($sql1,$con))
      {
      die('Error: ' . mysql_error());
      }
    echo "SQL 1 SUCCESS! 1 record added<br/>";

    // A variable to store the id from the last MySQL query
    // This is the first time I have declared this variable
    $post_id = mysql_insert_id();

    // Second SQL Statement which utilises the variable
    if (!mysql_query($sql2,$con))
     {
      die('Error: ' . mysql_error());
    }
    echo "SQL 2 SUCCESS! 1 record added<br/>";
    echo "Finito!<br/>";
    mysql_close($con);
} 
```

This SQL multiple insert statement into TABLE2 I have written is as follows:

```
$sql2="INSERT INTO TABLE2 (post_id, meta_key, meta_value)
    VALUES
    ($post_id,'key 1','value 1'),
    ($post_id,'key 2','value 2'),
    ($post_id,'key 3','value 3')
"; 
```

However, in spite of all of this (which looks correct) when I ACTUALLY look in MySQL, the post_id for EVERY entry in TABLE2 comes out as 0 (zero)?

Where am I going wrong?! HELP!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T18:37:35.707

```
$sql2="INSERT INTO TABLE2 (post_id, meta_key, meta_value)
    VALUES
    ({$post_id},'key 1','value 1'),
    ({$post_id},'key 2','value 2'),
    ({$post_id},'key 3','value 3')
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:10:57.550

这可能是一个愚蠢的问题，但从您的代码中并不清楚：您是否将`$post_id`值插入到`$sql2`字符串中？

```
$sql2="INSERT INTO TABLE2 (post_id, meta_key, meta_value)
    VALUES
    (" . $post_id . ",'key 1','value 1'),
    (" . $post_id . ",'key 2','value 2'),
    (" . $post_id . ",'key 3','value 3') "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:14:01.917

我终于找到了答案！我意识到，因为我在PHP`$sql2`之前放置了字符串语句，`$post_id = mysql_insert_id();`所以无法将其插入代码中。所以正确的做法是：

```
// If the submit button is pressed in the HTML form
if (isset($_POST['submit_event'])) {
// First SQL Statement
if (!mysql_query($sql1,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "SQL 1 SUCCESS! 1 record added<br/>";

// A variable to store the id from the last MySQL query
// This is the first time I have declared this variable
$post_id = mysql_insert_id();

// Place the SQL statement AFTER the mysql_insert_id() variable
$sql2="INSERT INTO TABLE2 (post_id, meta_key, meta_value)
VALUES
($post_id,'key 1','value 1'),
($post_id,'key 2','value 2'),
($post_id,'key 3','value 3')
";

// Second SQL Statement which utilises the variable
if (!mysql_query($sql2,$con))
 {
  die('Error: ' . mysql_error());
}
echo "SQL 2 SUCCESS! 1 record added<br/>";
echo "Finito!<br/>";
mysql_close($con);
} 
```

# html - wrapper not covering the nested divs

> ID：10383398
> 
> 赞同：1
> 
> 时间：2012-04-30T12:04:01.777
> 
> 标签：html, css

[http://jsfiddle.net/bobbyfrancisjoseph/2EfLz/1/](http://jsfiddle.net/bobbyfrancisjoseph/2EfLz/1/)

The following is a code that I wrote. The problem is that in the resulting page the wrapper div does not seems to container the nested divs.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:07:12.687

添加“溢出：隐藏；” 根据您的包装器的定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:07:52.843

由于您的 body 元素 , `#left-container`,`#right-container`正在浮动，它们将从常规内容流中删除，因此您将需要一个“clearfix”来正确包含浮动元素。您可以通过两种方式做到这一点：

一，通过使用 clearfix，如下所示，我首选的方法，因为它是内联的，并且不会与可能溢出容器的绝对定位元素混淆：

```
#wrapper:before, #wrapper:after {
    content:"";
    display:table;
}

#wrapper:after {
    clear:both;
}

#wrapper {
    *zoom:1; /* ie7 hasLayout fix */
} 
```

或者两个通过`overflow:hidden`在你的`#wrapper`容器上使用，我试图避免这种方法，因为你可能已经定位了可能溢出容器的元素`positition:absolute`，所以它们将被该方法切断。第三种选择是在容器末尾添加 a ，但这只是一种讨厌的方法:)。

使用第一种（也是我的首选）方法进行演示[http://jsfiddle.net/2EfLz/2/](http://jsfiddle.net/2EfLz/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:58:33.167

try something like this **position: absolute;**

```
 #wrapper
           {
            margin:0 auto;
            position: absolute;
            background-color:#999;
            width:960px;
            border:dashed #006 thick;

         } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T12:10:32.153

你给**溢出：隐藏**在你的**#wrapper**

```
#wrapper
{
    margin:0 auto;
    position:relative;
    background-color:#999;
    width:960px;
    border:dashed #006 thick;
    overflow:hidden;

} 
```

[http://jsfiddle.net/2EfLz/3/](http://jsfiddle.net/2EfLz/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T12:11:51.810

`overflow:hidden;`在包装样式中使用。

# facebook-opengraph - 如何在facebook打开图表中制作一个带有用户选项的框

> ID：10383402
> 
> 赞同：1
> 
> 时间：2012-04-30T12:04:08.807
> 
> 标签：facebook-opengraph

我有一本包含新闻文章的在线杂志，我想做一个开放的图表动作，每次用户阅读一篇文章时，都会在他的时间轴上发布一个故事。我的网址中有所有必需的打开图形标签和一个带有**publish_actions**范围的登录按钮。我距离提交行动以供批准只有一步之遥，但我仍然无法弄清楚一件事。

facebook 的文档说我需要给用户一个选项来停止自动发布或删除应用程序等。类似于此页面中间的图像[http://developers.facebook.com/docs/opengraph/actions/builtin/ #阅读](http://developers.facebook.com/docs/opengraph/actions/builtin/#read)。我也在雅虎上看到了它，它完全一样。

**我怎样才能在我的网站上制作这样的东西？代码在某处准备好还是我必须自己编写？**

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:33:43.567

权限删除，或只是停止发布动作的开关和删除文章功能必须由您开发。

> 我正在为我的应用程序做同样的事情。
> 
> 1.  创建包含、撤销权限按钮的用户 CP 控制面板。
> 2.  用户 CP 通过 mysql 中的 true/false 来打开和关闭发布
> 3.  一系列带有删除按钮的应用活动。

# android - 如何检测函数是否运行完毕？

> ID：10383411
> 
> 赞同：0
> 
> 时间：2012-04-30T12:05:06.090
> 
> 标签：android, runnable

```
webservice.UpdateAllNews(); 
```

该功能是将在线数据库中的数据下载到本地数据库。

我想要的是我想在检测到功能已下载完成所有数据后启动下一个活动。

P/S 数据量大

这是我现在的情况

```
webservice.UpdateAllNews();
                int secondsDelayed = 17;
                new Handler().postDelayed(new Runnable() {
                    public void run() {
                        startActivity(new Intent(Main_Launcher.this,
                                Main_AllLatestNews.class));
                        finish();
                    }
                }, secondsDelayed * 1000); 
```

这是另一个类函数

```
public void UpdateAllNews() {
    try {
        List<List_CategoryNews> newsCat = dbhelper.getAllNewsCategories();
        for (List_CategoryNews nwCat : newsCat) {

            int CatNewsID = nwCat.getCatID();

            if (CatNewsID != 0) {
                dbhelper.DeleteNews(CatNewsID);
                GetNews(CatNewsID, datetemp1, datetemp2);

            }

            String log = " NewsCatID- " + nwCat.getCatID()
                    + " category Name- " + nwCat.getNewCatName();
            System.out.println(log);
        }
    } catch (Exception ex) {
        AlertDialog.Builder b = new AlertDialog.Builder(mContext);
        b.setMessage(ex.toString());
        b.show();
    }
} 
```

这个是在 17 秒后不断启动，我希望在完成从在线数据库下载数据后自动启动活动，而不是延迟 17 秒。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:08:56.043

也许尝试使用 AsyncTask：

```
private class YourTask extends AsyncTask<String, Void, String> 
{
    @Override
    protected String doInBackground(String... urls) 
    {
         webservice.UpdateAllNews();
    }

    @Override
    protected void onPostExecute(String result) 
    {
      startActivity(new Intent(Main_Launcher.this,Main_AllLatestNews.class));
      finish();
    }
} 
```

以及如何运行它：

```
YourTask task = new YourTask();
task.execute("..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:25:43.660

为什么不使用像 Observer-Observable 这样的简单客户端-服务器方法？任务完成后，observable 将调用观察者的更新函数，这将是您的主要活动。

# jquery - Jquery ui多选小部件在IE中缓慢滚动

> ID：10383415
> 
> 赞同：2
> 
> 时间：2012-04-30T12:05:37.823
> 
> 标签：jquery, jquery-ui, scroll, multi-select, performance

我在使用 jquery ui 布局插件构建的页面上使用 jquery ui 多选小部件。包含此小部件的页面的一部分（或更确切地说是子窗格）是可滚动的。所以当我点击多选时，它会打开下拉菜单。现在，当我在下拉菜单仍然打开的情况下开始滚动时，下拉菜单保持在其位置，因此与下拉按钮分离。为了解决这个问题，我在该 div 的滚动事件上添加了一个函数。它解决了这个问题，但杀死了 IE 中的滚动性能，代码如下

```
function initializeMultiSelect() {
    $('.dropdown').multiselect({
                multiple: false,
                // header: 'Select an option',
                noneSelectedText: '-Select an option-',
                autoOpen:false,
                selectedList: 1
            }).multiselectfilter();
    $('.multidropdown').multiselect({
                header: '<a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>Uncheck All</span></a>',
                noneSelectedText: "Select one or more",
                autoOpen:false,
                selectedList:25
            }).multiselectfilter();
}

function initializeMultiselectFix() {
    $(".center-center-center").scroll(function() {
        if($('#currentSelectedTab').val() == 1 || $('#currentSelectedTab').val() == 2 || $('#currentSelectedTab').val() == 4 ) {
            $(".ui-multiselect-menu:visible").hide();
            $(".ui-multiselect:visible").removeClass('ui-state-active');
            $(".ui-datepicker:visible").hide();
            $(".ui-autocomplete:visible").hide();
            <%--if ($(".ui-multiselect-menu").css('display', 'block')) {
                $(".ui-multiselect-menu").hide();
                $(".ui-multiselect").removeClass('ui-state-active');
            }
            if ($(".ui-datepicker").css('display', 'block')) {
                $(".ui-datepicker").hide();
            }
            if ($(".ui-autocomplete").css('display', 'block')) {
                $(".ui-autocomplete").hide();
            } --%>
        }
    });
} 
```

这个分离问题可以在这里看到：http://layout.jquery-dev.net/demos/datepicker.html 点击文本框然后滚动。

请指出我正确的方向..

编辑：好的，所以我终于解决了这个问题。我决定不要在滚动事件上手动隐藏菜单，而是修复插件本身。所以我所做的是这样的。

我修改了插件以附加选择菜单以将菜单附加到父 div 而不是文档正文（这是默认行为）

在 _create 函数中

```
menu = (this.menu = $('<div />'))
                .addClass('ui-multiselect-menu ui-widget ui-widget-content ui-corner-all')
                .addClass( o.classes )
                .appendTo( o.elementToAttach ), 
```

然后我在 options 数组中传递 elementToAttach 属性，如下所示：

```
 $('#dropdown').multiselect({
elementToAttach:$('#dropdown').parent()
}); 
```

所以这解决了部分问题，现在选择菜单与 div 一起滚动，但它没有位于下拉按钮下方。

为了解决这个定位问题，我修改了多选的打开函数（）（应该打开选择菜单。）...，我注意到位置是使用计算相对于坐标的偏移量（）方法计算的文档，但是这里我们想要相对于父级的位置，所以我将函数更改为 position()，类似这样

```
 open: function( e ){
        var self = this,
            button = this.button,
            menu = this.menu,
            speed = this.speed,
            o = this.options;

        // bail if the multiselectopen event returns false, this widget is disabled, or is already open 
        if( this._trigger('beforeopen') === false || button.hasClass('ui-state-disabled') || this._isOpen ){
            return;
        }

        var $container = menu.find('ul').last(),
            effect = o.show,
//the change
    pos = button.position(); 
```

所以现在一切正常，希望这可以帮助某人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:43:35.220

解决方案的第二部分（菜单的定位）可以使用这个小部件从 rel 1.5 开始支持的位置 API 来实现。您需要做的就是将这样的选项传递给构造函数：

```
$('#dropdown').multiselect({
    position: {
        my: 'left top',
        at: 'left bottom'
    }
}); 
```

仍然需要解决方案的第一部分（elementToAttach）。我建议作者将此功能添加到小部件中。

# asp.net-mvc-3 - Mvc3 数据库优先关系

> ID：10383416
> 
> 赞同：1
> 
> 时间：2012-04-30T12:05:43.577
> 
> 标签：asp.net-mvc-3, entity-framework-4.1

我正在使用 ASP.Net MVC3 EF4.1 和通过外键的表之间的关系进行项目。我使用的是数据库优先方法，并有三个表：日历、日历用户和用户。关系是一个日历可以有很多用户，而用户可以有很多日历。

当某人创建日历时，他/她还应该选择有权访问日历的用户数量。但是现在当我要在控制器中保存对数据库的更改时，我会感到困惑。在生成的类中，还有虚拟的 ICollections 我想它以某种方式代表外键。但我不知道我应该如何处理它们？那么它应该如何工作呢？我是否应该能够将更改添加到虚拟 ICollections，然后只执行 db.SaveChanges() 并且它会自行工作，还是我应该手动处理？

如果我应该手动处理它，那么我应该添加用户，添加日历，然后在 CalendarUsers 表中添加键以将它们绑定在一起吗？我首先从代码中看到了一些示例，他们通过在 OnModelCreating 方法中输入代码来阐明关系，但是当首先使用 Database 时，它​​只包含 `throw new UnintentionalCodeFirstException();`：希望你也许可以为我澄清一下。

在下面添加了由 DBcontext Generator 生成的类：

```
public partial class Calendar
{
    public Calendar()
    {
        this.CalendarUsers = new HashSet<CalendarUser>();
    }

    public int CalendarId { get; set; }
    public string CalendarTitle { get; set; }
    public string CalendarDescription { get; set; }
    public long UserId { get; set; }

    public virtual User User { get; set; }
    public virtual ICollection<CalendarUser> CalendarUsers { get; set; }
}

public partial class CalendarUser
{
    public int CalendarUserId { get; set; }
    public int CalendarId { get; set; }
    public long UserId { get; set; }
    public Nullable<bool> IsAdmin { get; set; }

    public virtual Calendar Calendar { get; set; }
    public virtual User User { get; set; }
}

public partial class User
{
    public User()
    {
        this.Calendars = new HashSet<Calendar>();
        this.CalendarUsers = new HashSet<CalendarUser>();
    }

    public long UserId { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Calendar> Calendars { get; set; }
    public virtual ICollection<CalendarUser> CalendarUsers { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T22:16:53.263

您可以更新导航属性，EF 将为您处理外键。有关以类似的多对多关系处理更新的示例代码，请参阅本教程的**将课程作业添加到教师编辑页面**部分：

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-应用](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T13:05:20.287

您可以通过在 的新实例中设置外键属性来创建现有`Calendar`和之间的新关系：`User``CalendarUser`

```
var newCalendarUser = new CalendarUser
{
    CalendarId = calendarId,
    UserId = userId,
    IsAdmin = true // or false
};
dbContext.CalendarUsers.Add(newCalendarUser);
dbContext.SaveChanges(); 
```

# c++ - QKeySequence 到 QKeyEvent

> ID：10383418
> 
> 赞同：11
> 
> 时间：2012-04-30T12:05:50.803
> 
> 标签：c++, qt, key-events, qkeysequence

我正在尝试读取 JSON 配置文件，该文件指示哪些键命令映射到给定的操作。例如：

```
...
{ 
    "Action": "Quit",
    "Combo" : "CTRL+Q"
},
... 
```

从组合标签构造 a`QKeySequence`是微不足道的，但我需要监视`QKeyEvent`s 以触发操作。请注意，我*必须*监视`QKeyEvent`s，因为它们在应用程序中也用于其他目的。即只监视`QKeySequence`s 的关键命令是不可接受的（如果可能的话）。

没有编写自定义解析器来`QKeyEvent`为每个`"Combo"`标签构造一个对象，是否有将 a`QkeyEvent`与 a进行比较的方法`QKeySequence`？例如：

```
QKeyEvent KeyCommandsHandler::toKeyEvent(QKeySequence sequence) {
   //somehow convert to QKeyEvent
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T15:34:00.763

一般来说，你不能比较`QKeyEvent`和`QKeySequence`对象。 `QKeyEvent`表示*单个*键按下或释放的事件，而 a`QKeySequence`可以包含*最多四个*键的序列，每个键都有可选的修饰符信息。

但是，如果您确定您的键序列将始终只包含一个键，则可以比较对象：

```
bool isEquiv(const QKeyEvent& event, const QKeySequence& seq)
{
    if (seq.count() != 1)
        return false;
    return seq[0] == (event.key() | event.modifiers());
} 
```

您甚至可以为`QKeyEvent`to编写转换函数`QKeySequence`：

```
QKeySequence toKeySequence(const QKeyEvent& event)
{
    return QKeySequence(event.key() | event.modifiers());
} 
```

`QKeySequence`请注意，将 a 转换为 a是没有意义的`QKeyEvent`，因为您必须选择特定的事件类型，例如`QEvent::KeyPress`or `QEvent::KeyRelease`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-18T11:09:49.100

一个简单的解决方案（用python编写）：

```
key = QKeySequence(event.modifiers()|event.key()).toString() 
```

将以字符串形式为您提供整个序列，例如“Ctrl+Q”。

好处是（至少在 python 中）你可以在快捷方式的字典中找到，而 QKeySequence 不会是可散列的。

请注意，这需要您使用正确的类型和间距。“ctrl +Q”将不匹配。为避免所有问题，您可以在第一次阅读快捷方式时执行以下操作：

```
shortcut = shortcut.lower().remove(' ') 
```

并匹配/查找使用

```
key = QKeySequence(event.modifiers()|event.key()).toString().lower() 
```

或者更好：

```
shortcut = QKeySequence(shortcut).toString() 
```

并直接匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T14:51:21.697

[Qt4.7 注释，其中包含将 KeyEvent 转换为 KeySequence 的代码。](http://qt-project.org/doc/note_revisions/273/455/view) （但是代码有缺陷，因为它将键码的 int 从 QKeyEvent.key() 转换为字符串。最好使用 QKeyEvent.text() ？）

另外，费迪南德回答中的代码：

```
QKeySequence(event.key() | event.modifiers()) 
```

不是类型安全的（混合了 int 和 QKeyboardModifiers），如果转换为 Python 在 PyQt 中失败，但在 PySide 中失败？

此外，“QKeyEvent 表示单个按键按下或释放的事件”并没有真正解释它。QKeyEvent 可以告诉您按下的键组合，而不是按下它们的顺序。当用户按顺序按键时，您的应用程序可能会获得一系列 QKeyEvents（取决于您的应用程序是使用 QKeyEvent 的默认处理程序还是覆盖的处理程序。）稍后的 QKeyEvents 将显示事件发生时所有按下的键. 他们可能不再沮丧了。这是相当复杂的。

# c# - 执行具有任何签名的方法的方法

> ID：10383423
> 
> 赞同：2
> 
> 时间：2012-04-30T12:06:13.220
> 
> 标签：c#, reflection, methods, method-signature

是否有可能实现一个方法，该方法将方法名称和方法调用的参数集作为参数，执行方法并返回从方法执行中获得的返回值？

此方法应用于调用具有任意数量和类型的参数以及任何返回类型的方法。

我知道这可以使用反射来实现，但如果存在不同的方法，我很感兴趣，这对性能的影响比使用反射要小。

**稍后编辑：** 我需要实现这样的方法，因为我有一个包含许多具有不同方法签名的不同方法的类，但它们中的大多数具有相同的格式：

```
{    
  //code block 1
}
using (SomeObject obj = InitializeObject(){
   ...
   //some operations
   ...
}
{
   //code block 2
} 
```

*代码块 1*和*代码块 2*是否相同，只有*using*块中的部分不同。我只想使用一种包含通用代码块的方法，并为从一种方法到另一种方法不同的部分调用不同的方法。我尝试使用反射，但它以可见的方式减慢了应用程序的速度，所以我不会使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:13:38.033

您可以利用 .NET 4.0 中的最新 DLR 功能

查看[impromptuinterface](http://code.google.com/p/impromptu-interface/wiki/UsageReallyLateBinding)项目及其后期绑定功能。

具体`InvokeMember`和`InvokeMemberAction`方法。这些比反射快 2 到 4 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:10:27.227

抱歉，如果您将方法名称作为字符串 -> .net 反射是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:11:29.677

没有时间研究细节，但将 System.Reflection 与 Delegate.DynamicInvoke 结合使用可能会让您有所收获。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T12:19:38.403

像这样的东西应该工作......

```
public static string ExecMethodByName
    (string typeName, string methodName, string stringParam)
{
    Type t = Type.GetType(typeName);

    String s = (String)t.InvokeMember(
                    methodName,
                    BindingFlags.InvokeMethod | BindingFlags.Public | 
                        BindingFlags.Static,
                    null,
                    null,
                    new Object[] { stringParam });

    return s;
} 
```

# php - php：关于打开新网页

> ID：10383428
> 
> 赞同：-1
> 
> 时间：2012-04-30T12:06:36.887
> 
> 标签：php

我想打开新网页来显示图像，当我的 php 创建图像时

```
<?
.........
$img = $file.create_image; // $img like http://abc.com/abc.jpg
header("Location: $img");
?> 
```

当我使用标题时，它有一个错误

> ```
> Cannot modify header information - headers already sent by (output.... 
> ```

或使用其他 php 函数打开新页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:15:52.730

标题需要写在任何其他内容之前，这意味着您必须删除文档顶部的所有空格/空行。您必须确保在您的标题语句之后执行任何 HTML 或 echo 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:08:16.880

如果您在此页面中使用会话，则写 `ob_start();`在页面顶部（第一行）

# aptana - Aptana 3 > 键绑定 > 向左或向右移动 1 个字符丢失？

> ID：10383429
> 
> 赞同：1
> 
> 时间：2012-04-30T12:06:37.090
> 
> 标签：aptana, key-bindings

我试图将以下命令绑定到键：

*   向右移动一个字符
*   左移一个字符
*   选择下一个字符
*   选择前一个字符

但我在 Preferences > Keys 下的任何地方都找不到这些。

是否可以以某种方式绑定这些命令？

不必切换到光标键来四处移动真是太好了。

感谢您提前提供帮助。

户比三

# android - 如何使用 SOAP 服务 android

> ID：10383435
> 
> 赞同：-1
> 
> 时间：2012-04-30T12:07:26.483
> 
> 标签：android, ksoap2

我是安卓新手。任何人都可以在任何示例或源代码的帮助下帮助我开始使用 Soap 服务吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:17:02.017

如果您的网络服务基于 .Net，请使用此方法：

```
private static SoapObject callWebServiceMethod(String url,
        String namespace, String methodName,
        HashMap<String, Object> parameters, String soapAction)
        throws Exception {

    Log.i("WebService", "URL: " + url);
    Log.i("WebService", "MethodName: " + methodName);

    URL myurl = new URL(url);
    URLConnection connection = myurl.openConnection();
    connection.setConnectTimeout(20 * 1000);
    HttpURLConnection httpConnection = (HttpURLConnection) connection;
    int responseCode = httpConnection.getResponseCode();
    if (responseCode == HttpURLConnection.HTTP_OK)
    {
        httpConnection.disconnect();
        SoapObject request = new SoapObject(namespace, methodName);

        if (parameters != null) {
            String[] keys = new String[0];
            keys = (String[]) parameters.keySet().toArray(keys);
            Object[] vals = (Object[]) parameters.values().toArray();

            for (int i = 0; i < parameters.size(); i++) {
                request.addProperty(keys[i], vals[i]);
                Log.i("WebService", keys[i] + ": " + vals[i]);
            }
        }

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(url,
                TimeOutInSeconds * 1000);

        androidHttpTransport.call(soapAction, envelope);

        SoapObject so = (SoapObject) envelope.getResponse();

        return so;

    }
    else
    {
        httpConnection.disconnect();

    }

} 
```

要下载 Ksoap 库，请[使用此链接](http://code.google.com/p/ksoap2-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:12:42.073

要在 android 的 SOAP 服务中使用，您需要查看下面的 Parse Soap 参考：

链接到[Soap 服务客户端](https://stackoverflow.com/questions/1484122/android-wsdl-soap-service-client)

链接到[逐步使用](http://www.codeproject.com/Articles/112381/Step-by-Step-Method-to-Access-Webservice-from-Andr)

从此[ksoap2-android获取要在您的 android 项目中使用的 ksoap jar](http://code.google.com/p/ksoap2-android/)

下面是使用 ksoap library 为 soap 调用 Web-service 的类。

# ruby-on-rails-3 - 在 Rails 3 应用程序的电子邮件中包含控制器方法？

> ID：10383438
> 
> 赞同：0
> 
> 时间：2012-04-30T12:07:50.863
> 
> 标签：ruby-on-rails-3, email, controller, actionmailer

我正在尝试通过电子邮件发送月度报告，该报告与过去几个月相比很简单。

我在我的报表控制器中完成了所有这些工作（它引用了另一个名为 Clinical 的模型）：

```
# Clinical income by month report
@clinical_income_by_month = Clinical.select(%q{date_format(transactiondate, '%Y') as year, date_format(transactiondate, '%M') as month, sum(LineBalance) as income})
                               .where(:payments => 0)
                               .where('linebalance <> ?', 0)
                               .where('analysiscode <> ?', 213)
                               .group(:monthyear) 
```

然后我有一个包含数据的表的部分：

```
<div class="row">
    <div class="twelve columns"><h5>This months income so far is <span style="font-size:1.2em"class="<% if @clinical_income_by_month.first.income >= @clinical_income_by_month.first(:offset => 12).income %>green<% else %>red<% end %> radius label"><%= number_to_currency(@clinical_income_by_month.first.income, :unit => "&pound;", :separator => ".", :delimiter => ",") %></span></h5> <%= @clinical_income_by_month.first.month %> <%= @clinical_income_by_month.first(:offset => 12).year %>'s income was <%= number_to_currency(@clinical_income_by_month.first(:offset => 12).income, :unit => "&pound;", :separator => ".", :delimiter => ",") %>.</div>
  </div>
<hr />

<table>
  <tr>
    <th>Year</th>
    <th>Month</th>
    <th>Income</th>
  </tr>  
  <% @clinical_income_by_month.each do |c| %>
  <tr>
    <td><%= c.year %></td>
    <td><%= c.month %></td>
    <td><%= number_to_currency(c.income, :unit => "&pound;", :separator => ".", :delimiter => ",") %></td>
  </tr>    
  <% end %>
</table> 
```

我希望能够将那部分收入提取到我的电子邮件中，或者如果这不可能，我想显示最后收入的价值。

```
<%= @clinical_income_by_month.first.income %> 
```

我的电子邮件代码如下所示：

```
Finance Report
================================================
<%= number_to_currency(@clinical_income_by_month.first.income) %> 
```

我得到的错误是：

```
1.9.2-p318 :009 > UserMailer.finance_report().deliver
ActionView::Template::Error: undefined method `first' for nil:NilClass
from   /Users/dannymcclelland/Projects/premvet/app/views/user_mailer/finance_report.text.erb:3:in  `_app_views_user_mailer_finance_report_text_erb___4501411113534248604_70358523362460' 
```

当我从标准方法中提取一个值时，它会起作用：

```
<%= number_to_currency(Clinical.first.UserID) %> 
```

但不是当我从我创建的@clinical_income_by_month 报告中调用它时。

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T07:14:46.033

你需要做这样的事情：

**在 user_mailer.rb 中**

```
def finance_report(clinical_income_by_month)

  @clinical_income_by_month = clinical_income_by_month

  ... # all you had here before

end 
```

在**控制器中**这样称呼它：

```
UserMailer.finance_report(@clinical_income_by_month).deliver 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T05:12:33.513

显然你的@clinical_income_by_month 是零。这意味着选择查询没有像您认为的那样返回值。这是一个模型问题。您应该启动“rails 控制台”并查看查询是否返回您想要的值，而不是检查视图。

# msbuild - 如何让 msbuild 任务对文件集合进行配置转换？

> ID：10383449
> 
> 赞同：8
> 
> 时间：2012-04-30T12:08:35.993
> 
> 标签：msbuild, msbuild-task, web-config-transform, slowcheetah

我正在尝试转换我拥有的项目中的所有 web.config 文件，这是我的树结构：

*   变换.bat
*   变换
    *   ConfigTransform.proj
    *   Web.Transform.config
*   网站
    *   网络配置
    *   意见
        *   网络配置

还有更多的 web.config 文件，但想法是这将找到所有这些文件并对它们应用相同的配置转换。

我从[我发现的一篇博客文章](http://sedodream.com/2010/11/18/XDTWebconfigTransformsInNonwebProjects.aspx)中获得了一些提示，但我陷入了最后一步，即实际的转换。中间还有一些我不太喜欢的粗糙部分（我不太明白我在做什么，而且我显然做错了）。这是我到目前为止的位置：

```
<Project ToolsVersion="4.0" DefaultTargets="Transform" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <UsingTask TaskName="TransformXml" AssemblyFile="Tools\Microsoft.Web.Publishing.Tasks.dll"/>

    <PropertyGroup>
        <SitePath>..\..\Website</SitePath>
        <WebConfigTransformInputFile>$(SitePath)\Web.config</WebConfigTransformInputFile>
        <WebConfigTransformFile>Web.Transform.config</WebConfigTransformFile>
        <OutDir>..\N\N\</OutDir>

    </PropertyGroup>

    <ItemGroup>
        <_FilesToTransform Include="$(SitePath)\**\web.config"/>
    </ItemGroup>

    <Target Name="Transform">

    <MakeDir Directories="@(_FilesToTransform->'$(OutDir)%(RelativeDir)')" />

    <TransformXml Source="@(_FilesToTransform->'$(OutDir)%(RelativeDir)%(Filename)%(Extension)')"
                  Transform="$(WebConfigTransformFile)"
                  Destination="@(_FilesToTransform->'$(OutDir)%(RelativeDir)%(Filename)%(Extension)')" />
    </Target>
</Project> 
```

我的 Transform.bat 看起来像这样：

```
%systemroot%\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe %CD%\Transforms\ConfigTransform.proj 
```

因此，当我调用批处理时，会创建相应的目录。但是，正如您所看到的，我必须对 OutDir 有点创意，使它成为 ..\N\N。出于某种原因，如果我不这样做，OutDir 路径将与输入目录完全相同。所以我显然需要在 MakeDir 中改变一些东西，但我不确定是什么。

真正的问题出现在它开始进行转换时。我试图保持这样或这样的 TransformXml Source 参数：

```
@(_FilesToTransformNotAppConfig->'%(FullPath)') 
```

后者给我一个错误“无法打开源文件：不支持给定路径的格式。” 前者给了我这个输出：

```
Build started 30-4-2012 14:02:48.
Project "D:\Dev\transform\DoTransforms\Transforms\ConfigTransform.proj" on node 1 (default targets).
Transform:
  Creating directory "..\N\N\..\..\Website\Views\".
  Transforming Source File: ..\N\N\..\..\Website\Views\Web.config;..\N\N\..\..\Website\Web.config
D:\Dev\transform\DoTransforms\Transforms\ConfigTransform.proj(32,2): error : Could not open Source file: Could not find a part of the path 'D:\Dev\transform\DoTransforms\Website\Views\Web.config;\Website\Web.config'.
  Transformation failed
Done Building Project "D:\Dev\transform\DoTransforms\Transforms\ConfigTransform.proj" (default targets) -- FAILED.

Build FAILED. 
```

总结我的问题：

1.  如何避免 OutDir 的路径问题？我已经摆弄了多条路径，但我无法做到正确。
2.  如何让 TransformXml 任务接受 Source 属性中的多个文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T06:22:26.930

我认为你很接近。我在下面粘贴了一个示例，该示例显示了如何执行此操作。

在我的示例中，我发现转换位于 web.config 文件本身旁边。对于您的方案，您可以只使用指向特定文件的 MSBuild 属性。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="TransformAll" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll"/>

  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)'=='' ">Release</Configuration>
    <OutputFolder Condition=" '$(OutputFolder)'=='' ">C:\temp\transformed-files\</OutputFolder>
  </PropertyGroup>

  <!--
  This target shows how to transform web.config with a specific transform file associated to that specific web.config file.
  -->
  <Target Name="TransformAll">

    <!-- discover the files to transform -->
    <ItemGroup>
      <FilesToTransofm Include="$(MSBuildProjectDirectory)\**\web.config"/>
    </ItemGroup>

    <!-- Ensure all target directories exist -->
    <MakeDir Directories="@(FilesToTransofm->'$(OutputFolder)%(RecursiveDir)')"/>

    <!-- TransformXml only supports single values for source/transform/destination so use %(FilesToTransofm.Identity)
         to sned only 1 value to it -->
    <TransformXml Source="%(FilesToTransofm.Identity)"
                  Transform="@(FilesToTransofm->'%(RecursiveDir)web.$(Configuration).config')"
                  Destination="@(FilesToTransofm->'$(OutputFolder)%(RecursiveDir)web.config')" />    
  </Target>

</Project> 
```

[仅供参考，您可以在https://github.com/sayedihashimi/sayed-samples/tree/master/TransformMultipleWebConfigs](https://github.com/sayedihashimi/sayed-samples/tree/master/TransformMultipleWebConfigs)下载完整示例。

# php - CodeIgniter - 除非访问者同意，否则不得设置 cookie

> ID：10383450
> 
> 赞同：3
> 
> 时间：2012-04-30T12:08:36.137
> 
> 标签：php, codeigniter, cookies

除非访问者同意，否则有没有一种简单的方法可以确保 CodeIgniter (ci_session) 没有设置 cookie？

“在英国，一项新的 Cookie 法规于 2011 年 5 月 20 日正式宣布，并将于 2012 年 5 月开始实施，网站所有者必须获得访问者的同意，他们将被该网站上的 cookie 跟踪。”

非常感谢！

![在此处输入图像描述](../Images/ba72b93ea3608494f2a514798c9a611c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:28:09.753

具有讽刺意味的是，要跟踪用户是否想使用 cookie，您几乎需要 cookie 才能知道：)

但大声思考 - 解决方案是不在主页上创建任何 cookie。然后在您看来有一个链接：“如果您接受 cookie，请单击此处”

指向 /yourcontroller/turnoncookies 函数

然后在您的函数中，加载会话类并创建 cookie。

# android - 有没有办法找出连接的可能性？

> ID：10383454
> 
> 赞同：1
> 
> 时间：2012-04-30T12:08:55.077
> 
> 标签：android, nullpointerexception, connectivity

我有一个应用程序，旨在在运行主屏幕之前检查连接性。只有尝试在仅 wifi Xoom 上运行它的用户通知我，该应用程序总是会导致强制关闭问题，并且他已通过市场向我发送了一份报告。

显然，在检查设备是否通过电话或 wifi 连接的行上的 if-then-else 语句期间，应用程序不断崩溃，并给出 Null 异常错误。

```
ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
if ( connec.getNetworkInfo(0).getState() != NetworkInfo.State.CONNECTED &&  connec.getNetworkInfo(1).getState() != NetworkInfo.State.CONNECTED  ) ... 
```

由于有问题的 Xoom 仅支持 wifi，因此检查 connec.getNetworkInfo(0).getState() 是否会导致崩溃，因为它没有功能或组件？如果是，我该如何解决这个问题，这样它就不会崩溃但仍然适用于所有设备？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:53:45.130

您可以通过以下代码检查网络状态

```
 boolean isInternetAvailable = false;
   ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
   NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

    if(networkInfo != null && (networkInfo.isConnected()))
    {
        isInternetAvailable  = true;
    } 
```

在您的代码中，您使用**connec.getNetworkInfo(0).getState()**而不检查**connec.getNetworkInfo(0)**是否为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:55:00.690

```
 public static boolean isNetworkAvailable(Context context) {

            boolean value = false;

            ConnectivityManager manager = (ConnectivityManager) context
                             .getSystemService(Context.CONNECTIVITY_SERVICE);

            NetworkInfo info = manager.getActiveNetworkInfo();

            if (info != null && info.isAvailable()) {
                           value = true;
            }

            return value;
 } 
```

# android - 在Android中从本机c返回jbyteArray

> ID：10383458
> 
> 赞同：15
> 
> 时间：2012-04-30T12:09:02.813
> 
> 标签：android, c, android-ndk, java-native-interface

我使用本机 c 将数据从音频文件读取到 jbyte 指针。现在我想将它作为 jbyteArray 发送到 java。

```
jbyteArray Java_com_app_audio_player_readData(JNIEnv * env, jobject jobj,jstring readPath)
{

FILE *fin;
const char *inFile= (*env)->GetStringUTFChars(env,readPath,0);
fin = fopen(inFile, "r");

fseek(fin, 0, SEEK_END); // seek to end of file
 int size = ftell(fin); // get current file pointer
fseek(fin, 0, SEEK_SET);

jbyte *data=(jbyte *)malloc(size*sizeof(jbyte));
int charCnt = 0;

charCnt=fread(data, 1, size, fin);

jbyteArray result=(*env)->NewByteArray(env, size);

     //-- I want to convert data to jbyteArray and return it to java    

fclose(fin);
 return result;

} 
```

它是如何完成的？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-30T13:34:35.720

采用`SetByteArrayRegion`

```
charCnt=fread(data, 1, size, fin);

jbyteArray result=(*env)->NewByteArray(env, size);

(*env)->SetByteArrayRegion(env, result, 0, size, data); 
```

也可以使用`GetByteArrayElements` 例如：

```
jboolean isCopy;
jbyte* rawjBytes = (*env)->GetByteArrayElements(env, result, &isCopy);

//do stuff to raw bytes
memcpy(rawjBytes, data, size*sizeof(jbyte));

(*env)->ReleaseByteArrayElements(env, result, rawjBytes, 0); 
```

有关和的更多详细信息`SetByteArrayRegion`，[请参见此处](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html)。`GetByteArrayElements``ReleaseByteArrayElements`

**注意：这个问题可能是**[这个](https://stackoverflow.com/questions/1610045/how-to-return-an-array-from-jni-to-java)问题的一个特例

# java - 从 DB2 模式生成 JPA 兼容的 POJO（类似于 middlegen+hbm2java）？

> ID：10383461
> 
> 赞同：0
> 
> 时间：2012-04-30T12:09:33.947
> 
> 标签：java, jpa, db2, hbm2java

我想自动生成与一组 DB/2 表相对应的 POJO，以测试 JPA 是否适用于新应用程序。

在古代历史中，我使用 middlegen 创建 Hibernate 映射，然后 hbm2java 可以从中创建 POJO，并且搜索大多会发现过时的信息。我想知道即使对于 JPA，middlegen 是否仍然是可以使用的工具（如果是，那么它的当前主页在哪里），或者是否已经出现了 JPA 的新工具集。

那么，如何从我的 DB/2 模式生成 POJO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:26:34.670

我使用[Dali](http://www.eclipse.org/webtools/dali/)从数据库模式中自动生成 pojo 实体。不知道如何，或者即使它以编程方式工作，但......

# drupal-6 - 在 Drupal 6 的块中声明函数

> ID：10383463
> 
> 赞同：0
> 
> 时间：2012-04-30T12:09:37.190
> 
> 标签：drupal-6

我在声明我添加的块中的 fucation 时遇到了问题。我通过包含一个放置在主题中的文件来调用一个函数。我也通过放置主题文件夹进行了尝试。该功能已经成为首页的用户。但是当我在该块中使用相同的功能时。屏幕变为空白，没有任何显示。我的块编码的一部分写在下面。请帮我。

```
<?php
global $base_url;
include($_SERVER['DOCUMENT_ROOT']."/travellar/geoiploc.php"); // indluded file
$ip = "203.189.25.0"; // Australia IP test
$country_code = getCountryFromIP($ip, "code"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:38:38.370

我将功能从模块加载到自定义块中没有问题，但我以前从未尝试过从主题加载一个。我不清楚在加载页面内容之前是否加载了主题功能。

您可能必须创建一个自定义模块或包含文件来保存该函数。查看 module_load_include() 函数以了解如何加载特定的包含文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T02:11:24.550

自定义模块将是一个很好的方法，因为它在主题层之前加载，并且可以从 Drupal 中的几乎任何地方访问，除了重量低于自定义模块的其他模块。对于钩子和其他覆盖，它也可能派上用场。

但是，如果您必须在主题层中使用它，另一种选择是将其添加到您的主题的 template.php 中，这应该使其在 page.tpl.php 等中可用，但不是我不相信的块。

/sites/all/modules/mymodule/mymodule.info

```
name = My Module
package = !
description = It is MY module, not yours! 
core = 6.x 
```

包“！” 将使该模块出现在模块页面的顶部

/sites/all/modules/mymodule/mymodule.module

```
<?php

  // Load mymodule.morePHP.inc
  module_load_include('inc', 'mymodule', 'mymodule.morePHP');

  // A custom function
  function mymodule_my_custom_function($args) {
    /* do custom stuff here */
    return 'output';
  } 
```

/sites/all/modules/mymodule/mymodule.morePHP.inc

```
<?php

  // An included custom function
  function mymodule_other_custom_stuff() {

  } 
```

# java - Eclipse javadoc 背景颜色为黑色

> ID：10383467
> 
> 赞同：57
> 
> 时间：2012-04-30T12:09:42.780
> 
> 标签：java, eclipse, background-color, ubuntu-10.04

我的 Eclipse javadoc 视图有一个黑色背景，这使它看起来很[糟糕](http://dl.dropbox.com/u/4971686/published/120430/eclipse-javadoc-background.png)并且部分不可读（例如，链接是黑色的深蓝色）。更糟糕的是，javadoc 弹出窗口也有黑色背景。我找不到对应的设置。

Sumit Singh 的回答向我展示了如何更改 javadoc 视图的背景。但是，我仍然看不到如何更改前景。更糟糕的是，javadoc 弹出窗口的背景颜色没有改变。

我不认为它是由插件引起的，因为它也发生在全新安装中。这发生在 Ubuntu 10.4 上。在 Windows 中，颜色也不能更改，但很好。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-30T12:14:02.247

```
Window > Preferences > General > Appearance > Colors And Fonts > Java
> Javadoc View Background 
```

![在此处输入图像描述](../Images/150e220778ea9669e901b74c73f11f5a.png)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-01T11:51:35.273

您需要在操作系统级别更改 Ubuntu 中的“工具提示”颜色。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-09-08T15:31:29.193

这里没有一个答案对我有用（我有 Eclipse Mars 和 Ubuntu 14.04）。我不得不编辑`/usr/share/themes/Ambiance/gtk-3.0/gtk-main.css`. 我已更改`tooltip_bg_color`为`#f5f5bf#`和。重启eclipse后，修改生效。`tooltip_fg_color``#000000`

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-09-12T10:11:14.423

作为 KDE 用户，您必须使用`systemssttings`.
导航

```
应用程序外观 -> 颜色 -> 颜色
```

并调整`Tooltip Background`和`Tooltip Text`颜色。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-09T00:44:19.110

在 ubuntu 12.10 (quantal) 上，您可以使用以下两个命令：

```
#foreground white => black
sudo sed -i s/tooltip_fg_color:#ffffff/tooltip_fg_color:#000000/g  /usr/share/themes/Ambiance/gtk-3.0/settings.ini /usr/share/themes/Ambiance/gtk-3.0/gtk.css /usr/share/themes/Ambiance/gtk-2.0/gtkrc
#background black => yellow
sudo sed -i s/tooltip_bg_color:#000000/tooltip_bg_color:#f5f5b5/g  /usr/share/themes/Ambiance/gtk-3.0/settings.ini /usr/share/themes/Ambiance/gtk-3.0/gtk.css /usr/share/themes/Ambiance/gtk-2.0/gtkrc 
```

（感谢其他答案，[这](https://askubuntu.com/questions/70599/how-to-change-tooltip-background-color-in-unity)帮助我解决了这个问题）

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-11-01T14:25:50.003

在 Ubuntu 中安装“GNOME 颜色选择器”（也适用于 Xubuntu）

在那里，您可以在“特定”选项卡下设置工具提示颜色

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-11-30T01:10:47.610

在 Ubuntu 16.04 Mate 版本上与 Neon 有同样的问题。

为了解决这个问题，我创建了一个小的、用户特定的 GTK3 CSS 设置文件。它存储为您的 HOMEDIR/.config/gtk-3.0/gtk.css

就我而言，我稍微压缩了间距，指定了默认字体，并设置了工具提示窗口的外观：

```
#####################
* {
    padding: 1px;
    font: Liberation Mono 12;
}

GtkToolbar {
    padding: 2px;
}

GtkMenuBar {
    padding: 2px;
}

GtkMenuItem {
    padding: 2px 6px;
}

.tooltip {
    background-color: #CAE1FF;
    color: #EEEEEE;
    text-shadow: none;
}
######################### 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-11-09T17:26:34.873

请注意，截至 2016 年 11 月 8 日，此问题已在 Eclipse 中解决。要解决此问题，请下载最新的*集成*版本之一：http: [//download.eclipse.org/eclipse/downloads/](http://download.eclipse.org/eclipse/downloads/)
（维护版本不要' t 在撰写本文时有补丁 2016-11Nov-09Wed）。

我写了一个补丁，在 Eclipse“信息背景/文本”中的 General -> Appearance -> Colors and Fonts 下引入了一个新的首选项。此首选项在 Linux/Gtk 上生成正确的颜色（白色背景，黑色文本）。
请参阅：错误 505738 - 定义 JDT、CDT 或其他人可以使用的信息悬停颜色 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=505738](https://bugs.eclipse.org/bugs/show_bug.cgi?id=505738)

随后，我让 Javadoc 颜色从该偏好中继承了它的颜色。请参阅：
错误 501742 – 默认 Javadoc 文本和背景颜色应使用与 Java 编辑器背景/前景一致的颜色。 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=501742](https://bugs.eclipse.org/bugs/show_bug.cgi?id=501742)

作为额外的奖励，它也适用于深色主题：
错误 505851 - [深色主题] 为深色主题设置 HOVER_ 颜色样式 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=505851](https://bugs.eclipse.org/bugs/show_bug.cgi?id=505851)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-06T01:33:21.377

在我安装了lib之后也试试这个`sudo apt-get install libwebkitgtk-1.0-0`，javadoc看起来好多了

> 安装全新的 Eclipse 后，您可能会注意到，悬停显示 javadoc 注释，而 Javadoc 视图将 javadoc 注释呈现为纯文本。Eclipse 只是忽略了所有的@link 和@see 注释。好吧，这实际上不是视图本身的问题。问题是默认的 Eclipse 浏览器在 Ubuntu 12.04 中无法使用。要使其正常工作，您需要安装 libwebkitgtk-1.0-0 包。只需在终端输入：

来源：[http ://ubuntu-user-tricks.blogspot.com/2012/09/3-things-to-do-after-installing-eclipse.html](http://ubuntu-user-tricks.blogspot.com/2012/09/3-things-to-do-after-installing-eclipse.html)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-27T15:18:36.570

我认为这里的答案是有一个正确格式的工具提示（至少对于使用 ubuntu 并希望有一个很好的悬停工具提示的人）和 html 元素（如链接工作）是安装 libwebkitgtk，因为 eclipse 使用它来显示 javadoc。它没有预装在例如 Ubuntu 上，也没有随 eclipse 一起提供。使用：

```
sudo apt-get install libwebkitgtk-1.0-0 
```

并重新启动 Eclipse 以获得好看的工具提示。

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2012-04-30T12:11:49.547

**您可以在Windows->Preferences->general->Appearance**中更改颜色。

# iphone - 使用ARC在init中设置属性？

> ID：10383472
> 
> 赞同：2
> 
> 时间：2012-04-30T12:10:02.220
> 
> 标签：iphone, objective-c, cocoa-touch, automatic-ref-counting

在引入 ARC 之前，当我想使用 init（或 initWith）为属性分配值时，我只使用了 retain（因为不想在 init 中使用属性设置器）。

```
// Pre ARC using retain
// @property (nonatomic, retain) DataModel *dataModel;
// @synthesize dataModel = _dataModel;

- (id)initWithDataModel:(id)newModel {
    self = [super init];
    if(self) {
        _dataModel = [newModel retain];
    }
    return self;
} 
```

使用 ARC（同样不使用 setter）这是将 newModel 分配给 dataModel 属性的正确方法吗？我的猜测是编译器（使用 ARC）会看到该属性被定义为强并正确设置该属性。我很好奇这是否正确？

```
// Using ARC
// @property (nonatomic, strong) DataModel *dataModel;
// @synthesize dataModel = _dataModel;

- (id)initWithDataModel:(id)newModel {
    self = [super init];
    if(self) {
        _dataModel = newModel;
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T13:23:09.350

Yes this works. It is already a synthesized property. You can use property accessors or the direct access ivar name that is synthesized.

# xml - 如何从 junit-frames.xsl 访问 TEST-result.xml 的属性标签？

> ID：10383477
> 
> 赞同：0
> 
> 时间：2012-04-30T12:10:11.343
> 
> 标签：xml, xslt, selenium-webdriver

```
<?xml version="1.0" encoding="UTF-8" ?>
<testsuite errors="0" failures="0" hostname="xxx19" name="MyProject.TestSuite" tests="2" time="105.112" timestamp="2012-04-30T11:32:18">
  <properties>
    <property name="java.vendor" value="Oracle Corporation" />
    <property name="reportstyle" value="." />
    <property name="sun.java.launcher" value="SUN_STANDARD" />    
    <property name="sun.management.compiler" value="HotSpot Client Compiler" />
    <property name="lib" value="C:\Selenium\Selenium JARs" />
    <property name="os.name" value="Windows 7" />   
    <property name="TODAY" value="April 30 2012" />
    <property name="report" value="C:\Selenium-Reports\MyProject-April 30 2012 (17_02_15)" />
    <property name="sun.desktop" value="windows" />
    <property name="java.vm.specification.vendor" value="Oracle Corporation" />
    <property name="ant.home" value="C:\apache-ant-1.8.3" />
    <property name="java.runtime.version" value="1.7.0-ea-b119" />
    <property name="user.name" value="hpadmin" />
    <property name="START_TIME" value="17_02_15" />
</properties> 
```

这是我的 TEST-results.xml 中的片段

如何从 junit-frames.xsl 文件中读取以下属性

属性名称="report" value="C:\Selenium-Reports\MyProject-2012 年 4 月 30 日 (17_02_15)"

请只做那些需要的。

提前致谢，

-哈努曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:59:18.547

最终 DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

```
 final Document doc = builder.parse(new File("c://Test.xml"));
        final Element root = doc.getDocumentElement();
        final NodeList list = root.getElementsByTagName("properties");
        for (int i = 0; i < list.getLength(); i++)
        {
            final NodeList propertyList = list.item(i).getChildNodes();
            for (int j = 0; j < propertyList.getLength(); j++)
            {
                final Node property = propertyList.item(j);
                if (property.hasAttributes() && property.getAttributes().item(0).getNodeValue().equals("report"))
                {
                    System.out.println(property.getAttributes().item(1).getNodeValue());
                }

            }

        } 
```

# codeigniter - 您请求的操作是不允许的错误

> ID：10383483
> 
> 赞同：10
> 
> 时间：2012-04-30T12:10:51.923
> 
> 标签：codeigniter, pyrocms

我制作了一个名为 Gallery 的模块，该模块在我的本地主机上运行良好，版本为 2.0.3，但是在远程站点上使用版本 2.1.0 时，我无法提交表单并且出现错误：

> 您请求的操作是不允许的。

为什么是这样？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-19T01:47:00.163

我同意@Jhourlad Estrella 解决问题而不是禁用安全功能，但我觉得真正的问题在于保存令牌的隐藏输入字段。

不要使用纯 HTML 来创建表单元素，而是使用 the`form_open()`和`form_close()`helper 函数。原因是当您使用辅助函数时，它会自动将 csrf 令牌作为隐藏字段插入表单中。

您也可以通过将令牌添加为表单中的隐藏输入字段来手动执行此操作

```
<input type="hidden" name="csrf_hash_name" value="your-hash-value-here"> 
```

这样做可以让您免受 CSRF 攻击并解决您遇到的问题。

希望这对其他人有帮助，因为这让我第一次弄清楚这一点时发疯了。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-30T16:17:44.147

这是与 CSRF 保护相关的 Codeigniter 错误。你可以取消它`cms/config/config.php`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-24T05:27:49.130

在编程问题上，你不解决问题，你解决它。我的意思是，如果它不可用，这个功能就不会在这里：'因为它是并且它对我有用。您只是在实施上有问题。

我的回答：从 application/config/config.php 上以下条目的值中删除所有破折号、句点和任何其他非字母数字字符，如下所示：

```
$config['sess_cookie_name'] = 'mycookiename'; //instead of "my_cookie_name"
$config['csrf_token_name']  = 'mycsrftoken';  //instead of "my.csrf.token"
$config['csrf_cookie_name'] = 'mycsrfcookie'; //instead of "my/csrf/cookie" 
```

顺便说一句，破折号有时会起作用，但我建议在命名配置值时尽可能使用单个单词。除非您有时间和技能来研究 Codeigniter 的与您正在从事的工作相关的核心文件，以确保这样做是安全的。

无论如何，我希望这对那里的人有所帮助，即使我的回答晚了一年多。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-23T00:20:18.777

我有一个在 CI 之外（在 Joomla 中）构建的表单，但我想用 CI 处理。我的解决方法是选择性地禁用特定引荐来源的 csrf。我将它添加到配置中，直接在 csrf 的默认配置选项之后：

```
/* Set csrf off for specific referrers */
$csrf_off = array(
    "http://yourdomain.com/your-form-url",
    "http://yourdomain.com/some-other-url"
);

if (isset($_SERVER["HTTP_REFERER"])) {
    if (in_array($_SERVER["HTTP_REFERER"],$csrf_off)) {
        $config['csrf_protection'] = false;
    }
} 
```

这将禁用对 $csrf_off 数组中特定 URL 的 csrf 保护，但对于所有其他请求保持不变。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-23T04:18:32.203

我发现使用表单辅助函数

例子

```
<?php echo form_open('controller/function');?>

<?php echo form_input('username', 'Username');?>

<?php echo form_close();?> 
```

使用像上面这样的辅助函数应该会停止显示 CSRF 错误消息。

如果我不使用 echo form_input() 如果我只放置正常输入，则在重新加载时会触发 CSRF 错误。

```
<?php echo form_open('controller/function');?>

<input type="text" name="username" />

<?php echo form_close();?> 
```

所以我推荐现在使用所有的表单辅助函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-02T22:11:02.563

这是一个老问题，但同样的问题确实花费了我很多时间，以至于我想分享我的问题所在。它可能会帮助某人。

我正在使用 Codeigniter 3.0.6 和 CommunityAuth 3，登录后出现此错误。

这令人困惑，因为问题有时会发生，而其他时候不会。

我在 CI 的 config.php 中的“base_url”设置为“www.mysite.com”

当您使用“mysite.com”浏览网站（注意“www”不在地址中）并使用 CI 的“base_url”设置提交表单时，就像 CommunityAuth 的登录一样，那么 CSRF 检查失败并且您得到“The不允许您请求的操作。错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-07T16:15:51.730

`system/core/Security.php`当 $_COOKIE 中的 CSRF 令牌与您的 $_POST['csrf_token_name'] 不匹配时，函数 csrf_show_error() 会抛出此错误。

在里面`config.php`，我必须确保`$config['cookie_domain']`匹配`$config['base_url']`，没有协议（即`http(s)://`）。

否则，cookie 没有被传递，这意味着无法进行匹配。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-10T13:42:27.490

像这样使用 codeigniter 表单开启器：

```
<php echo form_open(url,method,attributes);?> 
```

有关更多信息，请参阅 codeigniter 表单文档。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-03-06T14:19:41.817

这可能是一种罕见的情况，但我没有看到我的问题，因为我的服务器有许多非常相似的不同域名。问题是我登陆的域是完全错误的，但是因为“不允许您请求的操作”。错误优先于“ 404 Not Found Error” 我看不到它。我的问题是我没有将我的 base_url 更改为正确的域。因此，如果上述解决方案都不适合您，您可以在 application/config.xml 中检查 $config['base_url'] 的设置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-02T14:42:06.757

我使用 Codeigniter 3 同样的问题

> 您请求的操作是不允许的。

根据 Isaac Pak 的观点，我将 base_url 更改为我通常在地址栏输入的内容。像这样...

而不是放

> `http://www.domain.org`

我是这样写的。。

> `http://domain.org`

因为我`base_url()`只是..

> `$config['base_url'] = 'http://domain.org/';`

该修复适用于我的网站...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-27T00:14:57.470

对我来说，问题是我正在将视图加载到索引中，然后我进行了如下更改并且它起作用了：

```
public function index()
{
    // Load Login Page
    redirect('login/login_page','refresh');

}

public function login_page()
{
    $data['title'] = 'Login Page';

    $this->load->view('templates/header', $data);
    $this->load->view('users/login_view', $data);
    $this->load->view('templates/footer');
} 
```

# c - 如何迭代Unicode字符？（不是代码点）

> ID：10383484
> 
> 赞同：1
> 
> 时间：2012-04-30T12:10:57.270
> 
> 标签：c, unicode, utf-8

我想遍历 Unicode 字符，吞噬所有遵循初始代码点的组合字符。

到目前为止，这是我所拥有的，但是对于我尝试过的一些随机 Unicode 序列，它的行为真的很奇怪：（例如，当我传递它时，像“a̔”（U+0061 LATIN SMALL LETTER A 后跟 U+0314 COMBINING REVERSED COMMA ABOVE) 将其视为两个字符而不是一个字符。其他内容，如“e︠”（U+0065 拉丁小写字母 E 后跟 U+FE20 组合连字左半边）被视为一个字符）

```
int COMBINING[] = {
    0x0300, 0x036F,
    0x1DC0, 0x1DFF,
    0x20D0, 0x20FF,
    0xFE20, 0xFE2F,
    0 //sentinel
};

utf8_index_t ut_nextchar(utf8_t source, utf8_index_t curr)
{
    int c = decode_cp(source, &curr);
    int comb = 0;
    if (c == 0)
        return -1;
    while (COMBINING[comb] != 0)
    {
        for (comb = 0; COMBINING[comb] != 0; comb += 2)
        {
            if (c >= COMBINING[comb] && c <= COMBINING[comb + 1])
            {
                c = decode_cp(source, &curr);
                if (c == 0)
                    return -1;
                break;
            }
        }
    }
    return curr;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:11:41.197

实际上，Unicode 字符大多是 1:1 到 Unicode 代码点 - 你感兴趣的是 Unicode 字素簇，它对应于所谓的用户感知字符。

[您可以在 bitbucket](http://cdn.bitbucket.org/cggaertner/libtcu/downloads/gcbreak.h)找到我[的算法实现](http://unicode.org/reports/tr29/#GB1)，包括[属性数据](http://www.unicode.org/Public/UNIDATA/auxiliary/GraphemeBreakProperty.txt)。

如果您对完整算法不感兴趣，可以使用

```
gc_break_property(c) == GC_BP_Extend 
```

检查具有属性*Grapheme_Extend*的字符和

```
gc_break_property(c) & GC_FLAG_POSTFIX 
```

如果您还想包含间距标记。

# java - 在 Java 中实现 Google Authenticator

> ID：10383492
> 
> 赞同：2
> 
> 时间：2012-04-30T12:11:36.167
> 
> 标签：java, android, google-authenticator

我想在我的 Android 应用程序中实现谷歌身份验证器，实际上我想插入一个由谷歌生成的序列号（当你想将你的 gmail 更改为两步验证或二维码时生成的序列号），然后生成验证码作为谷歌验证器做，但我想在我的应用程序中做到这一点而不使用谷歌身份验证器应用程序......我希望有人可以帮助我

# ios - 使用 AVMutableComposition iPhone

> ID：10383493
> 
> 赞同：2
> 
> 时间：2012-04-30T12:11:40.390
> 
> 标签：ios, avfoundation, avmutablecomposition

我正在使用下面的代码，按顺序流式传输两个视频。但它没有在模拟器中显示任何视频，它完全是空白的。

另外我怎么能通过这两个视频寻找。比如，如果一个视频是 2 分钟，第二个是 3 分钟。现在我需要获取这些视频的总时间并通过它们进行搜索。当我将滑块滑动到 4 分钟时，第二个视频应该从第 2 分钟开始播放。

可能吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    NSURL *url1 = [NSURL URLWithString:@"http://www.tools4movies.com/dvd_catalyst_profile_samples/Harold%20Kumar%203%20Christmas%20bionic.mp4"];
    NSURL *url2 = [NSURL URLWithString:@"http://www.tools4movies.com/dvd_catalyst_profile_samples/Harold%20Kumar%203%20Christmas%20tablet.mp4"];

    NSDictionary *options = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];

    AVMutableComposition *composition = [[AVMutableComposition alloc] init];

    asset1 = [[AVURLAsset alloc] initWithURL:url1 options:options];
    AVURLAsset * asset2 = [[AVURLAsset alloc]initWithURL:url2 options:options];

    CMTime insertionPoint = kCMTimeZero;
    NSError * error = nil;
    composition = [AVMutableComposition composition];

    if (![composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset1.duration) 
                              ofAsset:asset1 
                               atTime:insertionPoint 
                                error:&error]) 
    {
        NSLog(@"error: %@",error);
    }

    insertionPoint = CMTimeAdd(insertionPoint, asset1.duration);

    if (![composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset2.duration) 
                              ofAsset:asset2 
                               atTime:insertionPoint 
                                error:&error]) 
    {
        NSLog(@"error: %@",error);
    }

    AVPlayerItem * item = [[AVPlayerItem alloc] initWithAsset:composition];
    player = [AVPlayer playerWithPlayerItem:item];
    AVPlayerLayer * layer = [AVPlayerLayer playerLayerWithPlayer:player];

    [layer setFrame:CGRectMake(0, 0, 320, 480)];
    [[[self view] layer] addSublayer:layer];
    [player play];   
} 
```

谁能告诉我我的代码有什么错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T12:56:11.943

模拟器无法显示视频。内置的 UIImagePickerController 和任何视频控制器都不会工作。它没有实现，在 iOS 模拟器上大多显示为黑色或红色。您必须在 iOS 目标上进行调试。有时调试将无法正常工作。使用 NSLog() 代替。这将始终有效（即，如果您使用“发布”代码在没有调试信息的情况下进行编译）

您可以使用播放器寻求：

如果 mp 是您的媒体播放器：

```
[mp pause];
CMTime position = mp.currentTime;

// maybe replace something
[mp replaceCurrentItemWithPlayerItem:[AVPlayerItem playerItemWithAsset:self.composition]];

[mp seekToTime:length];
[mp play]; 
```

摘要：
编辑：使用合成和播放器项目
搜索：使用播放器

这是一个简短的正式示例，说明如何执行此操作（并且已经是线程安全的）：

```
AVMutableComposition *_composition = [AVMutableComposition composition];

// iterate though all files
// And build mutable composition
for (int i = 0; i < filesCount; i++) {

    AVURLAsset* sourceAsset = nil;

    NSURL* movieURL = [NSURL fileURLWithPath:[paths objectAtIndex:i]];
    sourceAsset = [AVURLAsset URLAssetWithURL:movieURL options:nil];

    // calculate time
    CMTimeRange editRange = CMTimeRangeMake(CMTimeMake(0, 600), sourceAsset.duration);

    NSError *editError;
    BOOL result = [_composition insertTimeRange:editRange
                                        ofAsset:sourceAsset
                                        atTime:_composition.duration
                                        error:&editError];

    dispatch_sync(dispatch_get_main_queue(), ^{

        // maybe you need a progress bar
        self.loaderBar.progress = (float) i / filesCount;
        [self.loaderBar setNeedsDisplay];
     });

}

// make the composition threadsafe if you need it later
self.composition = [[_composition copy] autorelease];

// Player wants mainthread?    
dispatch_sync(dispatch_get_main_queue(), ^{

    mp = [AVPlayer playerWithPlayerItem:[[[AVPlayerItem alloc] initWithAsset:self.composition] autorelease]];

    self.observer = [mp addPeriodicTimeObserverForInterval:CMTimeMake(60, 600) queue:nil usingBlock:^(CMTime time){

        // this is our callback block to set the progressbar
        if (mp.status == AVPlayerStatusReadyToPlay) {

            float actualTime = time.value / time.timescale;

            // avoid division by zero
            if (time.value > 0.) {

                CMTime length = mp.currentItem.asset.duration;
                float lengthTime = length.value / length.timescale;

                if (lengthTime) {

                    self.progressBar.value = actualTime / lengthTime;
                } else {

                        self.progressBar.value = 0.0f;    
                }
            }];
        });

        // the last task must be on mainthread again
        dispatch_sync(dispatch_get_main_queue(), ^{

            // create our playerLayer
            self.playerLayer = [AVPlayerLayer playerLayerWithPlayer:mp];
            self.playerLayer.videoGravity = AVLayerVideoGravityResizeAspectFill;  
            self.playerLayer.frame = [self view].layer.bounds;

            // insert into our view (make it visible)
            [[self view].layer insertSublayer:self.playerLayer atIndex:0];
        });

    // and now do the playback, maybe mp is global (self.mp)
    // this depends on your needs
    [mp play];
}); 
```

我希望这有帮助。

# go - Go 如何更新第三方包？

> ID：10383498
> 
> 赞同：231
> 
> 时间：2012-04-30T12:11:42.607
> 
> 标签：go

看看 golang 包是如何积极增长和改进的，我想知道包版本的问题是如何解决的？

我看到一种方法是将第三方包存储在项目文件夹下。

但是如果我安装它`go get`呢？

* * *

## 回答 #1

> 赞同：356
> 
> 时间：2012-04-30T12:33:40.337

`go get`将在列出的第一个目录中安装软件包`GOPATH`（环境变量可能包含冒号分隔的目录列表）。您可以使用`go get -u`来更新现有的包。

您还可以使用`go get -u all`更新您的所有软件包`GOPATH`

对于较大的项目，为每个项目创建不同的 GOPATH 可能是合理的，这样更新项目 A 中的库不会导致项目 B 出现问题。

键入`go help gopath`以了解有关`GOPATH`环境变量的更多信息。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2015-11-23T08:36:22.950

@tux 答案很好，只是想补充一点，您可以使用[go get](https://golang.org/cmd/go/#hdr-Download_and_install_packages_and_dependencies)来更新特定的包：

```
go get -u full_package_name 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-21T07:40:33.140

由于问题提到***了第三方***库而不是***所有***包，因此您可能希望回退到使用通配符。

一个用例是：我只想更新从 Github VCS 获得的所有包，然后你会说：

```
go get -u github.com/... // ('...' being the wildcard). 
```

这将继续进行并且仅在当前更新您的 github 包`$GOPATH`

这同样适用于 VCS，假设您只想升级 ogranizaiton A 的 repo 中的所有软件包，因为他们已经发布了您所依赖的修补程序：

```
go get -u github.com/orgA/... 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-02-04T23:16:26.947

上述答案存在以下问题：

1.  他们会更新包括您的应用程序在内的所有内容（以防您有未提交的更改）。
2.  他们更新了您可能已经从项目中删除但已经在您的磁盘上的软件包。

要避免这些，请执行以下操作：

1.  删除要更新的第 3 方文件夹。
2.  转到您的应用程序文件夹并运行`go get -d`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-05-06T19:53:04.890

要指定版本或提交：

```
go get -u otherpackage@1.2.3

go get -u otherpackage@git-sha 
```

见[https://github.com/golang/go/wiki/Modules#daily-workflow](https://github.com/golang/go/wiki/Modules#daily-workflow)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-02-20T09:23:19.663

去 1.13

（从模块根目录执行）

更新指定的依赖项：

```
go get -u <package-name> 
```

将所有直接和间接依赖项更新为最新的次要或补丁升级（忽略预发行版）：

```
go get -u ./...
# or
go get -u=patch ./... 
```

参考：

[https://github.com/golang/go/wiki/Modules#daily-workflow](https://github.com/golang/go/wiki/Modules#daily-workflow)

`go help get`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-08-30T07:37:05.183

由于这是谷歌搜索时最热门的内容之一，我只想为 1.17 添加“不推荐在模块模式下使用 'go get' 安装可执行文件”。

*   `go get -d`
    *   对于当前模块的依赖
*   `go install`
    *   对于当前模块的要求
*   `go install <with_version>`
    *   安装忽略当前模块，即：'go install example.com/cmd@latest'

[https://golang.org/doc/go-get-install-deprecation](https://golang.org/doc/go-get-install-deprecation)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-12T04:46:12.170

转到路径并输入

```
go get -u ./... 
```

它将更新所有需要的包。

# python - 在 Python 中通过 ssh 运行 popen 时，终端窗口不会保持打开状态

> ID：10383502
> 
> 赞同：0
> 
> 时间：2012-04-30T12:11:55.870
> 
> 标签：python, linux, ssh, subprocess, gnome-terminal

我正在编写一个在 Linux 服务器上运行的 Python 程序。它根据给定的关键字监视一些日志文件并在 GUI 中显示该日志文件中的行。

我添加了一个新功能，它打开一个带有“less”的终端窗口，显示用户在我的程序中双击的行。

**我的问题是**：当我在本地（在我的计算机上）运行我的程序时，它运行良好。但是当我通过 SSH 连接到主服务器时从主服务器运行我的程序时，程序运行良好，但是当我双击其中一行时，我看到一个控制台窗口，它可以快速打开和关闭。

这是负责打开“Less Terminal”的代码：

```
p = subprocess.Popen(args = ["gnome-terminal", "--command = less -p " + "\"" +searchString + "\"" " -j 10 " + "\"" + path + "\""], stdout = subprocess.PIPE) 
```

我怎样才能让它保持打开状态？

PS如果我添加`shell = TRUE`，它只会打开一个没有结果的新终端窗口`less`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T10:42:41.823

我的问题与 ssh 无关；我设法在我的本地机器上重新创建它。在本地测试程序时，我使用短模式字符串进行测试，但是当我移动到服务器并开始使用实际字符串时，它们太大了！

发生的事情是：我给出了`less`一个大于 99 个字符的模式。我得到：“ungetcc 溢出”，一个[已知的错误](http://www.greenwoodsoftware.com/less/bugs.html)，随后在`less`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T14:05:20.680

它对我有用

```
if sys.platform != "win32": sp.Popen(command.split(), shell=False)
else: sp.Popen(command.split(), shell=True) 
```

# python - python脚本收到SIGTERM时如何抑制终止消息

> ID：10383504
> 
> 赞同：0
> 
> 时间：2012-04-30T12:12:04.263
> 
> 标签：python, shell, signals

当 python 解释器收到 SIGTERM 信号时，是否可以抑制打印在 stderr 上的“终止”消息。我希望它安静地终止。

我尝试过使用不同的信号，例如 SIGINT，但在这种情况下，python 会打印出正在运行的脚本 Traceback 和“KeyboardInterrupt”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:51:57.890

“终止”由您的 shell 打印，请查阅 shell 手册以了解如何禁用它。至于`SIGINT`，你居然能抓住这个！为避免打印 Traceback，只需将整个程序包装在

```
try:
    do_stuff()
except KeyboardInterrupt:
    pass 
```

或注册一个信号处理程序，如下所示：[如何在 Python 中捕获 SIGINT？](https://stackoverflow.com/questions/1112343/how-do-i-capture-sigint-in-python)

# bash - 零填充 Bash/Shell

> ID：10383505
> 
> 赞同：1
> 
> 时间：2012-04-30T12:12:07.897
> 
> 标签：bash, shell

我需要最后 3 个字符说 002 并将其递减 1 001。我目前有一个问题，它将其转换为 int。所以 001 变为 1。我想做的是使用 printf 并将其转换回 001。但这似乎对我不起作用。我有以下内容：

```
set -x

substring()
{
    VAR=$1
    OFFSET=$2
    LENGTH=$3
    RET_VAL=${VAR:$OFFSET:$LENGTH}
}

# $1 filename

# Change to PF Gazetteer directory
cd $CARRIER_PF_UPDATES_DIR

LOG=log.txt
DownloadedFile=$1
OldFile=
DATE=$(date +"%Y-%m-%d-%H:%M:%S")
RET=0

if [ "${2+1}" == "1" ]
then
    echo "Date: " $DATE > $LOG
    echo "filename: " $DownloadedFile >> $LOG
fi

substring ${DownloadedFile} -3 3
extension=$RET_VAL
old_ext=$((${extension}+1))

substring ${DownloadedFile} 0 9
echo $RET_VAL
oldFile="${RET_VAL}${old_ext}"
oldFile= `printf "%020d" ${RET_VAL}`
oldFile="${oldFile}.${old_ext}"

#printf '%03d\n' 1

echo $oldFile

# move any temporary files if they exist
mv "${DownloadedFile}~" ${DownloadedFile}

# check to see if we got a file
result=$(grep 226 run.ilog)

if [ "${2+1}" == "1" ]
then
    echo "grep found: " $result >> $LOG
fi

if [ -e "${DownloadedFile}" ]
then
   #add back onto filename
   #store back onto var = $OldFile
   #Check if OldFile exist
   #Cat files together and - Cat oldFile DownloadedFile > tempFile
echo ""
fi

if [ "$result" == "" ]
then
     # File not found
     RET=100
else
     RET=10
     # START F4202
     sorted=$(sort -t'+' -k7 ${fileName} > ${fileName}.sorted)
     if [ -e "${fileName}.sorted" ]
     then
        mv "${fileName}" "unsorted/${fileName}.unsorted"
        mv "${fileName}.sorted" ${fileName}
     fi
     # END F4202
fi

if [ "${2+1}" == "1" ]
then
    echo "script ret: " $RET >> $LOG
fi 
```

要查看输出，请单击以下链接[Ideone](http://ideone.com/dceC4)当我应该得到 001 时，我似乎得到的是 1.1 而不是 1.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:14:35.867

这将不起作用：

```
oldFile= `printf "%020d" ${RET_VAL}` 
```

删除之后的空格`=`

# magento - 坚持创建多商店 Magento

> ID：10383506
> 
> 赞同：1
> 
> 时间：2012-04-30T12:12:11.827
> 
> 标签：magento

我正在运行 Magento 1.6.2。我的服务器正在运行 Nginx。我没有使用 .htaccess 文件，所以我必须在 index.php 中进行更改。

在设置适当的商店、商店视图并进行更改后，一切看起来都很好。打开 website_a.com 时，我看到了 storeview_a。哪个好。但是在打开 website_b.com 时，一开始它仍然会加载 website_a.com。:-( 我一直在系统 > 配置 > Web 下检查商店 URL 配置，没关系。帮助！！！

```
umask(0);

if ($_SERVER['HTTP_HOST'] == "website_a.com"){
$_SERVER["MAGE_RUN_CODE"] = "store_a";
$_SERVER["MAGE_RUN_TYPE"] = "storeview_a";
}

if ($_SERVER['HTTP_HOST'] == "website_b.com"){
$_SERVER["MAGE_RUN_CODE"] = "store_a";
$_SERVER["MAGE_RUN_TYPE"] = "storeview_b";
}

Mage::run($mageRunCode, $mageRunType); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T23:33:55.050

MAGE_RUN_TYPE 应该是“网站”或“商店”，它指定了您在 MAGE_RUN_CODE 中输入的 ID/代码类型。例如：

```
"MAGE_RUN_CODE" = "storeview_code";
"MAGE_RUN_TYPE" = "store"; 
```

或者

```
"MAGE_RUN_CODE" = "website_code";
"MAGE_RUN_TYPE" = "website"; 
```

当您使用 MAGE_RUN_TYPE - 网站时，使用的默认网站商店视图。

> 我一直在系统 > 配置 > Web 下检查商店 URL 配置，没关系

请注意，此 URL 仅用于 URL 构建和重定向。但是所有路由，为商店视图/网站分配正确的 URL 都应该手动完成。

# php - 计算有多少图像将与 php 水平匹配

> ID：10383516
> 
> 赞同：0
> 
> 时间：2012-04-30T12:12:56.663
> 
> 标签：php, css

我正在用 PHP 构建一个小型个人资料页面。给定每个图像周围的 3px 填充和 1px 的小边距，我如何计算有多少图像适合 960px 布局。我应该提到拇指应该超过 100 像素 x 100 像素。所以我想我还需要能够计算拇指的大小，以便它们均匀地适合布局的给定宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:15:48.173

使用数学。

```
floor(960/($imageSize-8)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:15:20.453

Php 带有 GD，一个管理图像的库。

要计算图像的大小：[http ://www.php.net/manual/en/function.getimagesize.php](http://www.php.net/manual/en/function.getimagesize.php)

# ios - iOS 大容量上传最佳实践

> ID：10383526
> 
> 赞同：2
> 
> 时间：2012-04-30T12:13:31.450
> 
> 标签：ios, ios5, nsconnection

我有一个用户拍摄一系列照片的应用程序，这些照片需要上传到服务器以供他们的在线帐户使用。

目前，我只是在调整图像的大小（每张图像仍约为 2mb）并一张一张地上传它们。

当用户在上传过程中关闭应用程序时，就会出现问题。无法正确获取所有图像。

任何优雅的解决方案？我正在考虑建立一个上传管理器——跟踪什么是成功的，什么不是。下次他们打开应用程序时重新开始上传。如果用户未能上传完整集，可能允许在线部分发送推送通知。

非常感谢任何建议、链接或指南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:16:55.667

使用唯一名称将图像写入磁盘，成功上传后将其从磁盘中删除。如果你需要额外的上下文，也写出来。如果你想通知他们，你也可以这样做。

您也可以考虑压缩图像和/或压缩它们。尽管如此，上传的可管理分区是一个好主意。

# bash - 我可以替换 bash 脚本中的数组名称吗？

> ID：10383529
> 
> 赞同：0
> 
> 时间：2012-04-30T12:13:37.910
> 
> 标签：bash

下面是示例代码，

```
top_dir=(network_dir telecomm_dir)
network_dir=(dijkstra patricia)
telecomm_dir=(CRC32 FFT adpcm gsm)

for bench in ${top_dir[@]}; do
  for subdir in ${$bench[@]}; do
    make -C $subdir
  done
done 
```

我有两个目录，每个目录都有子目录。我想迭代每个目录并执行`make`. 当我运行这个脚本时，它给了我错误信息，

```
./run.sh: line 21: ${$bench[@]}: bad substitution 
```

是否可以让 bash 使用变量“bench”来访问 network_dir 和 telecom_dir？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:18:12.303

一种选择是使用取消引用

```
top_dir=(network_dir telecomm_dir)
network_dir=(dijkstra patricia)
telecomm_dir=(CRC32 FFT adpcm gsm)

for bench in "${top_dir[@]}"; do
  arr="${!bench}"
  for subdir in "${arr[@]}"; do
    make -C "$subdir"
  done
done 
```

也使用更多的引号

* * *

另一种选择是使用关联数组：

```
declare -A dirs=(
    [network_dir]="dijkstra patricia"
    [telecomm_dir]="CRC32 FFT adpcm gsm"
)

for bench in "${!dirs[@]}"; do
    for subdir in ${dirs[$bench]}; do  # requires subdirs with no spaces
        make -C "$subdir"
    done
done 
```

# ruby - 在Ruby中，'new'和'initialize'之间的关系是什么？初始化时如何返回零？

> ID：10383535
> 
> 赞同：56
> 
> 时间：2012-04-30T12:14:13.137
> 
> 标签：ruby, constructor, return, new-operator, initializer

我想要的是：

```
obj = Foo.new(0)  # => nil or false 
```

这不起作用：

```
class Foo
  def initialize(val)
    return nil if val == 0
  end
end 
```

我知道在 C/C++/Java/C# 中，我们不能在构造函数中返回值。

但我想知道在 Ruby 中是否有可能。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-30T12:45:56.127

> `new`在 Ruby 中，' ' 和 ' '之间是什么关系`initialize`？

`new`通常调用`initialize`. 的默认实现`new`类似于：

```
class Class
  def new(*args, &block)
    obj = allocate

    obj.initialize(*args, &block)
    # actually, this is obj.send(:initialize, …) because initialize is private

    obj
  end
end 
```

但是你当然可以覆盖它来做任何你想做的事情。

> 初始化时如何返回零？
> 
> 我想要的是：
> 
> ```
> obj = Foo.new(0)  # => nil or false 
> ```
> 
> 这不起作用：
> 
> ```
> class Foo
>   def initialize(val)
>     return nil if val == 0
>   end
> end 
> ```
> 
> 我知道在 C/C++/Java/C# 中，我们不能在构造函数中返回值。
> 
> 但我想知道在 Ruby 中是否有可能。

Ruby中没有*构造函数之类的东西。*在 Ruby 中，只有方法，它们可以返回值。

您看到的问题只是您想更改一种方法的返回值，但您正在覆盖另一种方法。如果你想改变方法的返回值`bar`，你应该重写`bar`，而不是其他方法。

如果你想改变 的行为`Foo::new`，那么你应该改变`Foo::new`：

```
class Foo
  def self.new(val)
    return nil if val.zero?
    super
  end
end 
```

但是请注意，这是一个*非常糟糕的主意*，因为它违反了 的约定`new`，即返回一个完全初始化的、功能齐全的类实例。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-04-30T12:33:58.903

两种方法之间存在重要差异。

`new`是一个*类*方法，它通常创建一个类的实例（它处理一些棘手的事情，比如分配内存，Ruby 会保护你，这样你就不必太脏了）。

然后，`initialize`一个*实例*方法，告诉对象根据请求的参数设置其内部状态。

根据您的需要，可以覆盖其中任何一个。例如，`Foo.new`实际上可能会创建并返回一个实例，说明`FooSubclass`它是否需要足够聪明才能做到这一点。

但是，通常最好将这样的用例委托给其他类方法，这些方法对它们的作用更明确，例如`Foo.relating_to(bar)`. 从长远来看，打破其他人对应该做什么方法的期望`new`会使人们感到困惑，而不是对他们有帮助。

举个例子，看看 的实现`Singleton`，一个只允许特定类的一个实例存在的模块。它使该`new`方法成为私有方法，并公开一个`instance`方法，该方法要么返回对象的现有实例，要么`new`在尚未创建时调用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T12:22:41.550

你可以这样：

```
class Foo

  def self.init(val)
    new(val) unless val == 0
  end

  def initialize(val)
    #...
  end
end 
```

使用示例：

```
obj = Foo.init(0)
 => nil
obj = Foo.init(5)
 => #<Foo:0x00000002970a98> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T23:22:10.283

想做

```
class Foo
  def initialize(val)
    return nil if val == 0
  end
end 
```

会导致不一致的代码。

如果你有

```
class Foo
  def initialize(val)
    return nil if val == 0
    @val = val
    @bar = 42
  end
end 
```

如果你这样做了，你想得到什么`Foo.new(1)`？你想要`42`（的返回值`Foo#initialize`）还是一个`foo`对象？如果你想要一个`foo`对象 for `Foo.new(1)`，那么你为什么要`return nil`返回`Foo.new(0)`nil 呢？

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-30T09:41:34.360

它可以通过简单地创建一个对象变量来解决，如下所示：

```
class Foo
   def initialize(val)
       @val = val
       return nil if @val == 0
   end
end
obj = Foo.new(0)

Output:-
=>#<Foo:0x1243b8 @val=0> 
```

输出在不同的计算机中有所不同。

# javascript - 获取带有边距的主体元素的左上偏移：自动

> ID：10383536
> 
> 赞同：6
> 
> 时间：2012-04-30T12:14:13.497
> 
> 标签：javascript, dom, mouseevent

我正在尝试为一个网站获取鼠标相对于主体的位置（即，body = 坐标原点），该网站的 body 元素的大小固定并通过使用 margin:auto CSS 属性居中。

由于 event.clientX 和 event.clientY 属性给了我从页面开始的偏移量，而不是从 body 元素，我试图减去它的 body 偏移量。为此，我尝试使用 document.body.offsetLeft 和 document.body.offsetTop，但到目前为止没有运气，该值未定义。另外，由于我没有定义它，所以我不能使用 document.body.style.left 或 document.body.style.top。

有没有人知道一种方法来获取身体偏移量或直接获取相对于 DOM 元素的鼠标坐标？

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T12:19:37.630

用于[`element.getBoundingClientRect()`](https://developer.mozilla.org/en/DOM/element.getBoundingClientRect)获取元素的相对偏移量：

```
var bodyOffsets = document.body.getBoundingClientRect();
//bodyOffsets.top   ;
//bodyOffsets.left  ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:19:19.047

使用 Jquery 方法 position() - 检索相对于偏移父级的当前位置。

# php - Fuelphp 油生成带有字段的脚手架：主键不为空自动增量

> ID：10383538
> 
> 赞同：0
> 
> 时间：2012-04-30T12:14:22.107
> 
> 标签：php, mysql, fuelphp

有没有办法在fuel php中生成一个INT字段，这也是一个主键，而不是null，自动递增？

在文档中它看起来像：

```
php oil g scaffold <modelname> [<fieldname1>:<type1> |<fieldname2>:<type2> |..] 
```

如果我尝试类似：

```
oil g scaffold test testid:int primary key not null auto_increment 
```

我收到“未定义偏移量”的错误消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:47:13.607

该 ID 由 oil 脚手架自动生成，因此您无需输入。运行迁移后，它将作为主键在表中创建。如果要在生成脚手架后更改迁移，可以编辑迁移文件（fuel/app/migrations/..）。

如果你有例如

```
 oil g scaffold test field:string field2:string 
```

迁移看起来像这样

```
namespace Fuel\Migrations;

class Create_tests
{
public function up()
{
    \DBUtil::create_table('tests', array(
        'id' => array('constraint' => 11, 'type' => 'int', 'auto_increment' => true),
        'field' => array('constraint' => 255, 'type' => 'varchar'),
        'field2' => array('constraint' => 255, 'type' => 'varchar'),
        'created_at' => array('constraint' => 11, 'type' => 'int'),
        'updated_at' => array('constraint' => 11, 'type' => 'int'),

    ), array('id'));
}

public function down()
{
    \DBUtil::drop_table('tests');
}
} 
```

希望这可以帮助。

# mysql - 通过代理 python 脚本连接到数据库

> ID：10383540
> 
> 赞同：8
> 
> 时间：2012-04-30T12:14:27.973
> 
> 标签：mysql, mysql-python

我有一个使用 python 库 MySQLdb 连接到远程 MySQL 数据库的 python 脚本。它工作正常，但我怎样才能让它通过我在工作时落后的代理进行连接。我可以通过 ssh 中的命令行进行连接，但是如何让 python 脚本使用代理设置。MySQLdb 命令中似乎没有任何用于代理配置的选项。

```
 import MySQLdb as mdb

   conn=mdb.connect(host='mysite.com',user='myuser',passwd='mypassword',db='mydb')
   cursor = conn.cursor() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-10T17:24:46.417

我知道这是一个相当老的帖子，但我想我还是会回答它。您可以将 SSH 连接用作代理 最简单的使用方法 代理`proxychains` 链的默认端口是 9050，因此当您连接到远程主机时，请包含以下`-D`参数： `ssh -D 9050 -l user remotehost` 然后从单独的终端窗口，或`screen`在本地计算机上使用您开头的任何命令`proxychains`都通过 SSH 服务器进行路由，例如： `proxychains python myscript.py`将路由所有出站 TCP 请求，无论是数据库连接还是 urllib2/requests HTTP(S) 请求。Proxychains 不是特定于 python，而是任何东西。您可以轻松启动网络浏览器或其他任何东西。尝试`proxychains firefox`或`proxychains curl https://api.ipify.org`

# apache - 如何减小 Apache 的 HttpClient jar 大小

> ID：10383547
> 
> 赞同：1
> 
> 时间：2012-04-30T12:15:00.340
> 
> 标签：apache, maven, jar, size, apache-httpclient-4.x

我使用的是 352.6 KB 的 Apache 的 httpclient-4.1.3。有什么办法可以减小那个 jar 文件的大小吗？

PS 我正在使用 Maven 来管理 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:24:51.643

尝试使用 maven exclude 排除未使用的依赖项。有关更多信息，请参阅[此](http://maven.apache.org/guides/introduction/introduction-to-optional-and-excludes-dependencies.html)。

# stemming - 多语言全文：应该使用哪种词干 [Snowball] 语言？

> ID：10383548
> 
> 赞同：2
> 
> 时间：2012-04-30T12:15:02.810
> 
> 标签：stemming, full-text-search, snowball

如果我想支持所有语言的全文搜索，我应该使用哪种词干提取语言。据我所知，需要使用该特定词干语言创建索引以支持使用该语言进行搜索，但这对我来说是不可能的，因为我的搜索程序可能包含不同的语言

-- 马诺伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-13T18:44:06.347

词干并不是一个适用于所有语言的概念。例如，它不适用于中文。但是对于印欧语系的语言（Snowball 网站上的大多数词干分析器都是针对印欧语系的），确实出现了一种常见的词结构模式。假设单词从左到右书写，单词的词干或词根在左侧，并且可以在右侧添加零个或多个后缀。如果根被这个过程修改，它通常会在它的右手端。并且还可以在左侧添加前缀。

> @资源：雪球网站

# android - Android API 7 (2.1)、MapView、多线程、ConcurrentModificationException

> ID：10383552
> 
> 赞同：0
> 
> 时间：2012-04-30T12:15:21.497
> 
> 标签：android, multithreading, android-mapview

首先，我不知道在哪里，我不知道为什么，我得到了 ConcurrentModificationException。我的 Logcat 出现故障（或者只是我无法使用它），但从未显示任何有关异常的信息（我阅读了很多关于它的文章，但没有任何帮助，可能无法正确调试我的手机）

其次对不起我的英语混乱，我尽量清楚地表达，代码可以帮助，请帮助我

**所以，问题是下一个：**

我在上面使用 Mapview 和 5 个自定义 CustomItemizedOverlay（源编号 1）。从 MapView 我开始一些（1、2、最大 5）线程到 web 服务（源号 2），在我得到结果后（它是列表）我将它们绘制到 mapoverlay 中（源号 3）

所以 MapView （实现 5 个 ResponseHandlerInterfaces ）通过 myActions （扩展线程）向 webservice 发送请求，当动作得到响应时，它们调用 responseHandler.reportResponseList(List list) 方法。（MapView 在这里取回控制权）

```
and all of it causes ConcurrentModificationException sometimes
(rarely ArrayIndexOutOfBoundsException) 
```

我有选项活动来设置所需的列表，我也有刷新按钮来获取列表。让我带你看一个例子。

我刚打开 MapView，它是空的。我只需要一种对象。我点击刷新，网络通信后，我在我的地图视图上得到标记。酷，它的工作。现在我要去选项，我设置更多的对象来请求。在 mapview 再次使用 Refresh，有时我得到各种对象，有时我得到 ConcurrentModificationException。

源头 1

```
public class CustomItemizedOverlay<T> extends ItemizedOverlay<T>{

private Context mContext;
private Object lock = new Object();
private CopyOnWriteArrayList<T> overlays = new CopyOnWriteArrayList<T>();

public CustomItemizedOverlay(Drawable marker, Context context) {
    super(boundCenterBottom(marker));
    this.mContext = context;
    populate();
}
@Override
protected boolean onTap(int index){
 // doesn't matter
}
public void clear(){
    synchronized (lock) {
        overlays.clear();
    }
}
public void addOverlay(T overlay){
    synchronized (lock) {
        overlays.add(overlay);
        setLastFocusedIndex(-1);
        populate();
    }
}
public void removeOverlay(int selected){
    synchronized (lock) {
        overlays.remove(selected);
        populate();
        setLastFocusedIndex(-1);
    }
}
@Override
protected T createItem(int i) {
    synchronized (lock) {
        return overlays.get(i);         
    }
}
@Override
public int size() {
    synchronized (lock) {
        return overlays.size();
    }
}
public void setLock(Object o){
        this.lock = o;
    }
} 
```

源 2 号

地图视图：

```
public class MyMap extends MapActivity implements LocationListener, RestResPonseHandler { // there are 5 type of responsehandlers, one for each overlay 

private MapView mapView;
private MyLocationOverlay myLocationOverlay;

private Object lock = new Object();

private CustomItemizedOverlay<CustomOverlayItem<MyObject1>> my1Overlay;
private CustomItemizedOverlay<CustomOverlayItem<MyObject2>> my2Overlay;
private CustomItemizedOverlay<CustomOverlayItem<MyObject3>> my3Overlay;
private CustomItemizedOverlay<CustomOverlayItem<MyObject4>> my4Overlay;
private CustomItemizedOverlay<CustomOverlayItem<MyObject5>> my5Overlay;

public void getObject1List(){ // there are 5 getList methods
    new RestAction(this).start(); // 'this' is the object which implements required RestResponseHandler interface. in every case it will be 'this'. MyMap implements all kind of required RestResponseHandler interfaces
    } 
```

源号 3（非主线程）//这是每个“CustomItemizedOverlay 填充方法”的模式。动作报告结果（对象列表）后，mapview 用 OverlayItems 填充实际覆盖

```
@Override
public void reportResponseList(List<MyObject1> objects) {
    if (my1Overlay == null){
        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable marker = this.getResources().getDrawable(R.drawable.icon);
        my1Overlay = new CustomItemizedOverlay<CustomOverlayItem<MyObject1>>(marker, this);
        my1Overlay.setLock(lock); // MyMap has lock object, look at source 2 (also CustomItemizedOverlay (source 1) )
        mapOverlays.add(my1Overlay);
    } else {
        my1Overlay.clear(); 
    }   
    synchronized (lock) {
        for(int i=0;i<objects.size();++i){
            MyObject1 object = objects.get(i);
            CustomOverlayItem<MyObject1> item = new CustomOverlayItem<CustomBuilding>(object.getPositionId(), object);
            my1Overlay.addOverlay(item);
        }
    refreshView();
    }
} 
```

refreshView 将可运行的帖子发布到主线程以更新 mapView。

```
public void refreshView(){
    new Thread(new Runnable(){
        @Override
        public void run(){
            mapView.post(new Runnable(){
                @Override
                public void run(){
                    mapView.invalidate();
                }
            }); 
        }
    }).start();
} 
```

**解决方案**：在 CommonsWare 的回答之后，我将源代码修改为：

```
@Override
public void reportResponseList(final List<MyObject1> objects) {     
    if (my1Overlay == null){
        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable marker = this.getResources().getDrawable(R.drawable.icon);
        my1Overlay = new CustomItemizedOverlay<CustomOverlayItem<MyObject1>>(marker, this);
        my1Overlay.setLock(lock);
        mapOverlays.add(my1Overlay);
    } else {
        runOnUiThread(new Runnable(){
            @Override
            public void run(){
                my1Overlay.clear();
            }
        }); 
    }
    runOnUiThread(new Runnable(){
        @Override
        public void run(){
            for(int i=0;i<objects.size();++i){
                MyObject1 object = objects.get(i);
                CustomOverlayItem<MyObject1> item = new CustomOverlayItem<MyObject1>(object.getPositionId(), object);
                my1Overlay.addOverlay(item);
            }
            refreshView();  
        }
    });
} 
```

现在此刻它似乎起作用了。我不知道它有多漂亮，但似乎有效。（也许 mapOverlays.add() 方法也应该在主线程上）非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:20:22.157

如果在调用时`my1Overlay`已经是 的一部分，则不应在后台线程上对其进行修改。将使用它。相反，在后台线程中创建一个新线程，交换覆盖（删除旧的，添加新的）在主应用程序线程上。`MapView``reportResponseList()``MapView``Overlay``Overlay`

# c++ - 阅读后对文本文件进行排序？

> ID：10383563
> 
> 赞同：2
> 
> 时间：2012-04-30T12:16:47.173
> 
> 标签：c++, sorting

我有一个包含如下值的文本文件：

```
30 Text
21 Text
12 Text 
1  Text
3  Text 
```

我想将其读入二维数组以将数字和文本标识符保持在一起。完成此操作后，我想将其按升序排序，因为文本文件将未排序。

在 C++ 中解决这个问题的最佳方法是什么，我应该把它放在一个数组中吗？我的目标是从文本文件中获取前 3 个最高值。是否有更适合此操作的数据结构或更好的解决方法？无论如何，我都可以构建文本文件，如果应该更改它，它不是一个具体的格式。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:22:07.163

如果只想要前三个值，最有效的方法可能是定义三个变量（或三元素数组），逐行读取文件，如果新读取的行属于前三个，则将它在那里。

但是如果你想使用容器，我会选择 a `std::vector`and use `std::sort`，假设文件足够小，所有数据都适合内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:29:25.253

我更愿意将它们放入 std::map （如果您有唯一的键。如果不使用 std::multipmap 。）因此，当您将数据插入地图时，它们将始终被排序。如果您想获得 3 个最高值，只需获取地图的前 3 个项目。

# sql-server-2008 - 从 Hibernate 4 调用 MSSQL 2008 存储过程时的空指针

> ID：10383564
> 
> 赞同：0
> 
> 时间：2012-04-30T12:16:50.267
> 
> 标签：sql-server-2008, hibernate, stored-procedures

我有一个映射的存储过程

```
<sql-query name="sproc" callable="true" >
    <return alias="suppliers" class="model.Supplier">
        <return-property name="name" column="CoName" />
    </return>
    { call sproc(:p1,:p2,:p3}
</sql-query> 
```

当作为命名查询执行并且存储过程返回结果时，`query.list()`将返回预期结果，但是当存储过程没有返回结果时，当 Hibernate 尝试初始化要返回的实体时，我得到一个 NPE。

我可以抓住 npe 并返回一个空列表，但这不是很好，我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:38:45.077

根据这个[休眠文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query)，mssql 存储过程必须返回一个结果集。进一步在第 16.2.2.1 节中，它指出您可以使用 session.connection()。但我认为这不会有太大用处。因此处理空指针似乎是一个好方法。

**编辑 ：**

如果您正在使用`session.connection()`，您还可以返回`@@ROWCOUNT`如果输出是过程中唯一用于获取更改的行数的内容。0 表示不返回任何内容

# java - java-libpst Outlook 2003 类别

> ID：10383566
> 
> 赞同：1
> 
> 时间：2012-04-30T12:16:52.107
> 
> 标签：java, outlook, pst

我正在使用[java-libpst](http://code.google.com/p/java-libpst/)处理 Outlook pst 文件。一切都很好，但在 Outlook 2003 中无法获取类别，因为它没有将其保存在`ColorCategories`. 有什么解决方法吗？我只需要获取类别。

谢谢

# c# - 在我的应用程序在后台时监视 C# 中的键盘活动

> ID：10383569
> 
> 赞同：14
> 
> 时间：2012-04-30T12:17:07.500
> 
> 标签：c#, .net, windows, keyboard, keyboard-hook

首先，我需要明确表示我对键盘记录不感兴趣。

当我的应用程序在后台时，我需要一种方法来监控最基本的键盘活动。我不需要知道哪些键，我不需要保存任何数据，我根本不需要或计划隐藏我的应用程序，我只需要知道何时按下键并调用方法。

我正在寻找最简单的方法来做到这一点，我知道相当数量的 C#，但没有什么太复杂的，因为我的大部分知识都是自学的。

我四处寻找一些合适的方法来做这件事，但没有发现任何有用的东西。我所发现的只是一群人在论坛和深度键盘记录器的源代码上说“不，那是非法的”。

如果你们中的任何人可以就实现这一目标的方法向我提出建议，那么我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T12:28:06.033

您需要使用窗口挂钩：

[C# 中的低级键盘挂钩](http://blogs.msdn.com/b/toub/archive/2006/05/03/589423.aspx)

但请注意，Windows 安全性可能会保护我们免于为所欲为！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-27T22:59:34.110

您可以使用 Nuget 包 MouseKeyHook (GitHub) 在后台监控键盘[和](https://www.nuget.org/packages/MouseKeyHook)鼠标[活动](https://github.com/gmamaladze/globalmousekeyhook)。

此代码检测何时按下键：

```
 private IKeyboardMouseEvents _globalHook;

    private void Subscribe()
    {
        if (_globalHook == null)
        {
            // Note: for the application hook, use the Hook.AppEvents() instead
            _globalHook = Hook.GlobalEvents();
            _globalHook.KeyPress += GlobalHookKeyPress;
        }
    }

    private static void GlobalHookKeyPress(object sender, KeyPressEventArgs e)
    {
        Console.WriteLine("KeyPress: \t{0}", e.KeyChar);
    }

    private void Unsubscribe()
    {
        if (_globalHook != null)
        {
            _globalHook.KeyPress -= GlobalHookKeyPress;
            _globalHook.Dispose();
        }
    } 
```

您需要打电话`Subscribe()`开始收听和`Unsubscribe()`停止收听。显然你需要修改`GlobalHookKeyPress()`才能做有用的工作。

我需要这个功能来编写一个实用程序，当按下任何键时，它会打开联想 Thinkpad 上的键盘背光，包括 CTRL（它`KeyPress` 不会捕捉到）。为此，我不得不监视按键按下。除了我们附加到不同的事件之外，代码是相同的......

```
 _globalHook.KeyDown += GlobalHookOnKeyDown; 
```

并且事件处理程序签名不同：

```
 private static void GlobalHookOnKeyDown(object sender, KeyEventArgs e)
    {
        Console.WriteLine("KeyDown: \t{0}", e.KeyCode);
    } 
```

该库还可以[检测特定的组合键和序列](https://github.com/gmamaladze/globalmousekeyhook/blob/vNext/keycomb.md)。例如：

```
 Hook.GlobalEvents().OnCombination(new Dictionary<Combination, Action>
    {
        { Combination.TriggeredBy(Keys.A).Control(), () => { Console.WriteLine("You Pressed CTRL+A"); } },
        { Combination.FromString("Shift+Alt+Enter"), () => { Console.WriteLine("You Pressed FULL SCREEN"); } }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T12:21:04.977

Microsoft 告诉您[如何：在表单级别处理键盘输入](http://msdn.microsoft.com/en-us/library/ms171538.aspx)。只要您处理相同的事件，这适用于任何非 Web 应用程序。

您还应该查看关于 SO 的其他问题，例如[处理来自键盘楔的输入](https://stackoverflow.com/questions/274842/handling-input-from-a-keyboard-wedge)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:51:17.473

您可以使用 RegisterHotKey windows API 注册 Windows 热键，请查看此博客文章：

[http://www.liensberger.it/web/blog/?p=207](http://www.liensberger.it/web/blog/?p=207)

# java - 小程序在浏览器中使用时的滚动性能

> ID：10383570
> 
> 赞同：0
> 
> 时间：2012-04-30T12:17:26.990
> 
> 标签：java, browser, applet, scroll, jscrollpane

我有一个简单的 Java 小程序，其中包含一个主 JPanel、一个 JScrollPanel、几个子 JPanel 和这些子面板中的图像组件。当我在 Eclipse 的 Applet Viewer 中调试小程序时，小程序运行良好并且滚动非常流畅。但是当我把它放到网页上并从浏览器中查看时，滚动一点也不流畅。不流畅 - 这意味着图片在滚动过程中挂起，并在屏幕上留下痕迹。

我对小程序很陌生，所以我想知道我是否遗漏了什么。我应该为小程序的浏览器集成做些什么？

谢谢你。

# jquery - jQuery：获取 jQuery 对象的行号

> ID：10383571
> 
> 赞同：2
> 
> 时间：2012-04-30T12:17:33.277
> 
> 标签：jquery, plugins, seo

我正在为 jQuery 开发一个 SEO 分析插件。我的插件在页面顶部列出了所有相关的提示/错误。现在，我不想只列出提示，而是想显示用户也可以在哪一行找到相关对象。我的问题：是否可以获取 jQuery 对象的行号？

# mysql - 如何获取具有多个条件的查询结果？

> ID：10383572
> 
> 赞同：3
> 
> 时间：2012-04-30T12:17:38.923
> 
> 标签：mysql, sql

我有一张这样的桌子

```
Table
-----
userid
fieldid
fieldvalue 
```

其中 userid 和 fieldid 是该表的主键对。

我想做一个 sql 查询来查找所有`fieldvalue`与所选内容相等的用户`fieldid`

例如，对于值

```
fieldid: 817
fieldvalue: 'yes' 
```

我可以有一个 sql 查询，如：

```
select userid FROM table where (fieldid=817 AND fieldvalue='yes') 
```

此查询工作正常。

但是，如果我有第二个或第三个标准，则进行如下查询：

```
select userid 
FROM table 
where (fieldid=817 AND fieldvalue='yes')
AND (fieldid=818 AND fieldvalue='no') 
```

返回一个空结果，但在单个标准中满足条件。

有什么办法可以纠正这个吗？

### 更新

我忘了写一个用例（appologies）

```
userid, fieldid, fieldvalue
1 , 817, yes
1, 818, no
1, 825, yes 
2, 817, yes 
2, 818, yes
3, 829, no 
```

对于这个表，我想要一个 sql 查询来查找满足以下条件的用户： fieldid 817 的值为 yes，fieldid 818 的值为 no

使用 OR 建议我到目前为止满足了 fieldid 817 的值为 yes 或 fieldid 818 的值为 no

我希望两个条件都满足。在上面的预期结果将是

```
userid
1 
```

并不是

```
userid
1
2 
```

由于 userid 2 不满足这两个条件。为混乱道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:20:31.420

你应该`OR`在你的不同标准之间使用一个。

```
SELECT userid 
FROM table 
WHERE (fieldid=817 AND fieldvalue='yes')
    OR (fieldid=818 AND fieldvalue='no') 
```

使用的区别`AND/OR`

> 如果第一个条件和第二个条件都为真，AND 运算符将显示一条记录。
> 
> 如果第一个条件或第二个条件为真，OR 运算符将显示一条记录。

编辑：根据您的评论，您可以通过以下方式进行

```
select t1.userid 
FROM temp t1
where (t1.fieldid=817 AND t1.fieldvalue='yes') 
    AND EXISTS (SELECT userid 
            FROM temp t 
            WHERE t.userid =  t1.userid 
                AND fieldid=818 
                AND fieldvalue='no') 
```

查看带有工作副本的[sqlfiddle](http://sqlfiddle.com/#!3/06db1/1)

甚至这样

```
select t1.userid 
FROM temp t1
left join temp t2
    on t1.userid = t2.userid
where (t1.fieldid=817 AND t1.fieldvalue='yes')
    AND t2.fieldid=818 AND t2.fieldvalue='no' 
```

这是另一个[sqlfiddle](http://sqlfiddle.com/#!3/06db1/2)

如果您有更多想要加入的领域，那么您将执行以下操作：

```
select t1.userid 
FROM temp t1
left join temp t2
    on t1.userid = t2.userid
left join temp t3
    on t1.userid = t3.userid
where (t1.fieldid=817 AND t1.fieldvalue='yes')
    AND (t2.fieldid=818 AND t2.fieldvalue='no')
    AND (t3.fieldid=819 AND t3.fieldvalue='no') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:25:25.897

你需要像这样使用它：

```
select userid 
FROM table 
where fieldid in (817, 818) and fieldvalue in ('yes', 'no'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:20:41.913

你应该在你的子句中使用`OR`not 。查看此[链接](http://www.w3schools.com/sql/sql_and_or.asp)以获得快速简便的解释。`AND``WHERE`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:20:49.563

嗨，请尝试`OR`代替`AND`

```
select userid FROM table where (fieldid=817 AND fieldvalue='yes') OR (fieldid=818 AND fieldvalue='no') 
```

如果您使用`AND` ，那么它将检查是否必须满足两个条件和，但这是不可能的`fieldid=817 AND fieldvalue='yes'`。 `fieldid=818 AND fieldvalue='no'`并且当您`OR`在两个条件之间使用运算符时，它将给出具有两个条件的结果..

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:22:02.807

除了使用的许多建议之外，这些建议`OR`是完全正确的，您还可以使用`IN`（如果它可以扩展，这可能会使查询更具可读性）。

```
SELECT userid FROM table WHERE (fieldid, fieldvalue) IN (
  (817, 'yes'),
  (818, 'no' )
); 
```

* * *

要找到`userid`满足**这两个**条件的所有内容，您需要自行加入`table`：

```
SELECT userid
FROM table AS t1 JOIN table AS t2 USING (userid)
WHERE
      (t1.fieldid = '817' AND t1.fieldvalue = 'yes')
  AND (t2.fieldid = '818' AND t2.fieldvalue = 'no' ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T12:19:40.820

尝试使用或

```
select userid FROM table where (fieldid=817 AND fieldvalue='yes') OR(fieldid=818 AND fieldvalue='no') 
```

您的查询希望 fieldid 为 817 和 818，这是不可能的。

# file - 在黑莓中检查其存在后在 SD-CARD 中创建 .db 文件？

> ID：10383573
> 
> 赞同：0
> 
> 时间：2012-04-30T12:17:53.900
> 
> 标签：file, blackberry, sd-card, delete-file

我正在我的应用程序中创建一个 db 文件。现在我只想在应用程序安装时创建 .db 文件一次。当我打开应用程序时，它只是检查文件是否存在。

我们如何检查 sdcard 中的 .db 文件以及它在安装前是否存在而不是删除该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T04:17:46.737

您可以使用以下代码检查文件是否存在

```
 FileConnection fileConnection = (FileConnection)Connector.open("file:///SDCard/foldername/" + "databasename.db");

    boolean result=fileConnection.exists(); 

  if(result)
  {
     //database available
  }else{
       //database not available
  } 
```

接下来你想在应用程序第一次安装时检查这个

```
 CodeModuleListener listner=new CodeModuleListener() {

            public void modulesDeleted(String[] moduleNames) {
                // TODO Auto-generated method stub

            }

            public void modulesAdded(int[] handles) {
                // TODO Auto-generated method stub
                //here you can check if database available or not if available then delete 
                try{
                    URI myURI = URI.create("file:///SDCard/foldername/" + "database_name.db"); 
                    DatabaseFactory.delete(myURI);  
                }catch (Exception e) {
                    // TODO: handle exception
                }

            }

            public void moduleDeletionsPending(String[] moduleNames) {
                // TODO Auto-generated method stub

            }
        };
        CodeModuleManager.addListener(this.getApplication(), listner); 
```

# python - OptParse、空格和 bash

> ID：10383579
> 
> 赞同：0
> 
> 时间：2012-04-30T12:18:15.160
> 
> 标签：python, bash, echo, optparse

我对 bash / optparse 有一个奇怪的问题。定义字符串时，我需要将字符串传递给我的 python 脚本。

我使用以下代码：

```
./lol.py `if [ -n "$URL" ]; then echo -u \"$URL\"; fi` 
```

这是python脚本：

```
def main():
    parser = OptionParser()
    parser.add_option("-u", dest="url")
    opts, args = parser.parse_args()
    print opts.url 
```

当我测试我的 bash 表达式时，它似乎正在工作：

```
user@fomce02:~$ URL="http://lol.com/my project/"
user@fomce02:~$ echo `if [ -n "$URL" ]; then echo -u \"$URL\"; fi`
-u "http://lol.com/my project/" 
```

但是，当我使用参数运行 python 脚本时

```
user@fomce02:~$ ./lol.py `if [ -n "$URL" ]; then echo -u "$URL"; fi`
http://lol.com/my 
```

它在空格后截断部分字符串。

你能解释一下它为什么会发生以及如何让它发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:21:30.263

这是因为您发送给脚本的引号是*字面*的，而不是*句法*的。这意味着`lol.py`接收参数`"http://lol.com/my`和`project/"`。如果要将命令的结果作为*单个*参数传递，则必须在代码周围使用语法引号：

```
./lol.py "$(if [ -n "$URL" ]; then echo -u "$URL"; fi)" 
```

还修复了反引号 - 如果您使用 Bash，强烈建议使用`$()`. 请注意，命令替换内部和外部的[引用上下文](http://mywiki.wooledge.org/CommandSubstitution)是*不同*的，因此外部引号不会影响内部引号。

# php - pspell 和 aspell 与 php 用于德语

> ID：10383583
> 
> 赞同：4
> 
> 时间：2012-04-30T12:18:50.810
> 
> 标签：php, aspell, pspell

我正在尝试将 pspell 与 aspell 结合用于 PHP。

我以这种方式安装了它：

```
sudo apt-get install libpspell-dev 
sudo apt-get install php5-pspell
sudo apt-get install aspell-de 
```

之后，这是一个示例代码：

```
$pspell_link = pspell_new("de");
var_dump(pspell_check($pspell_link, "Verkäuferin"));
if (!pspell_check($pspell_link, "Verkäuferin")) {
    $vorschlaege = pspell_suggest($pspell_link, "verkäuferin");
    foreach ($vorschlaege as $vorschlag) {
    echo "Mögliche Schreibweise:" . $vorschlag . "<br>";
    }
} 
```

有两个问题：

1.  这个例子看不懂德语变音符号
2.  对于实质性内容，它们需要大写，以便 pspell_check 返回 true。当我所有的单词都是小写时，如何成为真实的呢？例如，“Ball”将返回 true，但“ball”将返回 false。如何解决，对于“球”，检查也会返回 true？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T01:36:35.063

尝试指定字符编码。我只需将第一行更改为：

```
$pspell_link = pspell_new("de", "", "", "utf-8"); 
```

另外：即使这允许“Verkäuferin”通过拼写检查，我的服务器也无法正确输出带有元音变音的字母，直到我将此行放入我的 php.ini 文件中。

```
default_charset = "utf-8" 
```

有关使用 PHP 进行字符编码的更多信息，此页面看起来很有用：

[http://kore-nordmann.de/blog/php_charset_encoding_FAQ.html#which-charset-encoding-do-strings-have-in-php](http://kore-nordmann.de/blog/php_charset_encoding_FAQ.html#which-charset-encoding-do-strings-have-in-php)

至于你的第二个问题，虽然 PHP 使用的 aspell 包支持不区分大小写的匹配，但不幸的是 PHP 不允许你选择该选项。这是我能想到的最佳解决方案：

```
$pspell_link = pspell_new("de", "", "", "utf-8");
$wort = "verkäuferin";
$richtig = pspell_check($pspell_link, $wort);
if (!$richtig) {
    $vorschlaege = pspell_suggest($pspell_link, $wort);
    // make a copy of the array with all words in lowercase, so we can still
    // display the original suggestions if necessary
    $kleinschrift_vorschlaege = array_map('strtolower', $vorschlaege);
    // convert the original word to lowercase before comparing it
    $richtig = in_array(strtolower($wort), $kleinschrift_vorschlaege);
}
echo "'$wort' ist " . ($richtig ? "" : "nicht") . " richtig buchstabiert.<br/>";
if (!$richtig) {
  echo "Mögliche Schreibweisen:<br/>";
  foreach ($vorschlaege as $vorschlag) {
    echo "&nbsp; &nbsp; " .  $vorschlag . "<br/>";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T06:41:34.527

有一个简单的解决方案。只需这样做：

```
$word = ucfirst($word); //Always capitalize to avoid case sensitive error
if (!pspell_check($dict, $word)) {
   $suggestions = pspell_suggest($dictionary, $word);
} 
```

# jquery - 如何更改asp.net中type属性的值？

> ID：10383586
> 
> 赞同：1
> 
> 时间：2012-04-30T12:19:05.743
> 
> 标签：jquery, asp.net, button

我有 asp.net 服务器端按钮。我想将 type 属性的值从提交更改为按钮。

按钮 ：

目前我使用下面的代码来改变类型属性的值

```
 var submitForm = "<%=submitForm.ClientID %>";
 $('#' + submitForm).attr("type", "button"); 
```

但我发现以下错误： **未捕获的异常：无法更改类型属性**

如何更改值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:26:12.383

请尝试以下代码

```
$('#' + submitForm).prop("type", "button"); 
```

[http://jsfiddle.net/qeUxP/](http://jsfiddle.net/qeUxP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T17:08:01.897

答案有效，但似乎还有*另一个（也许更基本的）问题*——为什么还要走那条路？如果您需要“常规”按钮，请使用标准 html 按钮或服务器端 HTML 按钮：

如果您只想有一个按钮来编写客户端脚本：

`<input type="button".... />`代替`<asp:button....`

如果您想要“两全其美”，请使用“服务器 HTML 控件”：

`<input type="button" runat="server"...../>`

不确定你在追求什么，但有时退后一步再看看是值得的……

# kohana - kohana 批量插入

> ID：10383589
> 
> 赞同：0
> 
> 时间：2012-04-30T12:19:28.677
> 
> 标签：kohana, kohana-orm

有没有办法一次添加多条记录。通常我们称之为批量插入。目前我在做以下事情：

```
 foreach ($datalist as $data)
        try {

                    $this->template_id = $data['template_id'];
                    $this->notifier_id = $data['notifier_id'];
                    $this->user_id = $data['user_id'];
                    $this->date_created= date('Y-m-d h:i:s');
                    $this->save();
                    return true;
                } catch (Kohana_Exception $e) {
                    return false;
                }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-01T08:56:54.770

```
$query = DB::insert('company_schedule', array('day', 'work_start', 'work_end', 'week_start', 'week_end', 'company_id')); // create sql request
$query->values(array(
                    $key, $work_start, $work_end, $week_start, $week_end, $this->id
                )); // do it in loop
$query->execute(); // execute 
```

# ios - restkit json 示例

> ID：10383590
> 
> 赞同：2
> 
> 时间：2012-04-30T12:19:30.393
> 
> 标签：ios, json, restkit

我刚开始使用 RestKit for iOS。在弄清楚了 RestKit 的一些概念和要点之后，我开始着手对 RestKit 进行一些实践培训。但是我发现所有的例子和关于RestKit的教程都已经过时了，新版本上没有例子。

我想要的是一个关于 Restkit 如何处理 JSON（请求和响应）以及如何使用 ObjectMapping 2.0（现场示例）的小而简单的示例

自从 3 天以来，我一直在阅读[这个网页](https://github.com/RestKit/RestKit/wiki)，我浏览了它的所有内容并获得了很多关于它的知识，但对于我想要的东西仍然没有任何好处。

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:24:35.570

您最好的起点是从 github 下载 restKit 并完成内置的示例。

[https://github.com/RestKit/RestKit/tree/master/Examples](https://github.com/RestKit/RestKit/tree/master/Examples)

这是一个很好的起点，并且通常保持最新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T10:30:21.880

Blake 在[https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md](https://github.com/RestKit/RestKit/blob/master/Docs/Object%20Mapping.md)写了一篇很棒的文章前一个。

# ios - 在 App Store 中更改应用名称

> ID：10383593
> 
> 赞同：66
> 
> 时间：2012-04-30T12:19:37.313
> 
> 标签：ios, xcode, app-store-connect

我有一个名为“X”的应用程序。它已经在应用商店中获得批准。由于某些原因，现在我希望它被称为“X Pro”。我应该在 plist 或 ITC 中编辑什么来更改此名称？我想我应该更改 bundle_name 或 bundle_display_name，但它会更改 App Store 中的应用程序名称还是仅更改设备上的名称？

在 ITC 中创建新应用程序不是一个选项，因为应用程序已获批准。谢谢！

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-30T15:48:00.090

If you have already created the new version in ITC, you can edit your apps name with the following steps:

In iTunes Connect, click your app and you will see versions at the bottom of the page, click "View Details" of your updated version (e.g. 1.1).

Then click "Edit" next to "Metadate and Upoads"

![enter image description here](../Images/0b122037dbecc52929b83f92a6cd5a48.png)

In the pop-up change the text in the field "App Name"

![enter image description here](../Images/cf37ddc94960509088180d6062314feb.png)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-30T12:22:50.557

直接引用苹果文档：

> 只有在提交应用程序二进制文件的更新时，您才能更改现有应用程序的名称。如果您提交的应用名称已在您的应用销售所在的同一地理区域内使用，系统将提示您输入另一个名称。

我只是用谷歌搜索了它。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-02-16T21:22:20.790

提交新的或更新的应用程序二进制文件时，输入应用程序商店中显示的应用程序名称。应用程序名称实际上并未在应用程序二进制文件本身内配置。希望这很清楚。如果您想更改显示在 iOS 图标下方的启动器名称，那么您可以在实际项目配置中进行更改。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-02-17T13:30:06.647

随着 iTunesConnect 布局的新更新您可以通过以下步骤更改 Appstore 的应用程序名称。

*   在 iTunesConnect 上使用您的 Apple id 登录，然后进入您要更改 Appstore 名称的应用程序。
*   找到左侧的字段，`App Information`如下图所示：

[![在此处输入图像描述](../Images/e5c3a7e64a63fdf9a64dd0f4b0ec4d15.png)](https://i.stack.imgur.com/hdw6Z.png)

*   在这里，您可以找到名为`Name?`您需要更改名称的可编辑文件，然后将其保存。

> **注意：**如果您的应用程序处于更新版本或被拒绝状态，您只能编辑应用程序商店的应用程序名称。如果要更改名称，实时应用程序无法更改名称，您必须创建实时应用程序的新版本。

# wpf - 视觉画笔捕捉到设备像素

> ID：10383599
> 
> 赞同：1
> 
> 时间：2012-04-30T12:19:51.920
> 
> 标签：wpf, vb.net, canvas

我有一个带有小概览窗口的应用程序，可以更快地浏览画布。在那个窗口上，我显示了一个包含关系和决策等的流程图......当流程图增长时，概述窗口不再显示线条，这是因为线条粗细小于 1 px。

我已经尝试将捕捉设置为线条上的设备像素，画布上带有画笔，但没有成功。

有没有一个选项可以让画笔显示线条，即使它们没有 1 px 那么细？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T01:44:48.310

如果我理解正确，您基本上有一个小地图来导航您的窗口。在这种情况下，请查看将控件呈现为位图：http: [//msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)

渲染画布并将其显示在概览窗口中应该非常简单。

# django - 如何获取用户列表，同时使用 django.contrib.auth 模型

> ID：10383601
> 
> 赞同：0
> 
> 时间：2012-04-30T12:20:10.720
> 
> 标签：django, django-models

我正在创建一个基于 Web 的应用程序，我需要在其中以模板方式获取所有注册用户的列表。我正在使用 django.contrib.auth 模型来管理没有组的用户数据库。我无法在[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)中找到任何返回views.py 中所有用户列表的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:25:02.553

将适当的查询集传递给您的模板：

```
from django.contrib.auth.models import User
from django.shortcuts import render

def foo(request):
   return render(request,'users.html',{'users': User.objects.all()}) 
```

或者，如果这是所有模板都需要的东西，请编写一个[模板上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#writing-your-own-context-processors)并将其添加到那里。

# php - 从 mysql 迁移到 mysqli - 在 Windows 上，使用 IIS - 指南

> ID：10383602
> 
> 赞同：1
> 
> 时间：2012-04-30T12:20:15.460
> 
> 标签：php, mysql, mysqli

我必须升级一个使用 mysql 数据库和 php 的旧项目。

是否存在从 mysql 迁移到 mysqli 的指南？

*   我首先检查 php.ini：php_mysqli.dll
*   我检查了 IIS：没什么可改变的
*   转换通话

是不是太极简了？

# iphone - 如何创建 SDK（自己的 iPhone OS 框架）？

> ID：10383606
> 
> 赞同：0
> 
> 时间：2012-04-30T12:20:32.443
> 
> 标签：iphone, objective-c, ios, sdk, creation

> **可能重复：**
> [如何以安全的方式为其他开发人员构建框架或库？](https://stackoverflow.com/questions/4065052/how-to-build-a-framework-or-library-for-other-developers-the-secure-way)

我是 iPhone 开发的新手，想知道如何创建一个`SDK`（创建自己的 iPhone OS 框架）。这样其他人就可以`SDK`在他们的 iPhone 应用程序中使用我的吗？谢谢。

# java - AttributeOverride 和 CollectionOfElements，列注释被忽略

> ID：10383607
> 
> 赞同：2
> 
> 时间：2012-04-30T12:20:36.157
> 
> 标签：java, hibernate, jpa

我的实体**角色中的代码**

```
 @Embedded 
   @LazyCollection(LazyCollectionOption.FALSE)
   @CollectionOfElements
   @JoinTable(name = "TEST_TABLE", joinColumns = @JoinColumn(name = "ROLE_ID"))
   @AttributeOverrides({
      @AttributeOverride(name = "code", column = @Column(name = "TSTCODE")),
      @AttributeOverride(name = "work", column = @Column(name = "TSTWRK"))
   })
       private List<TestID> tests;  
} 
```

测试ID类

```
@Embeddable
@AccessType("field")
public class TestID implements Serializable 
{
   private String code;

   private String work;  

// getters, setters  
} 
```

获取异常**SQLGrammarException**

```
Caused by: java.sql.SQLException: ORA-00904: "TESTS0_"."WORK": invalid identifier 
```

实体管理器创建查询，尝试访问列 CODE 和 WORK 而不是*@Column*注释中的 TSTCODE 和 TSTWRk。
有任何想法吗？

*休眠注释 3.2.1.ga
持久性 API 1.0
jboss-4.2.3.GA*

**更新：**

如果将 TestID 类中的字段重命名为表的列名，则所有操作都正常

```
@Embeddable
@AccessType("field")
public class TestID implements Serializable 
{
   private String tstcode;

   private String tstwks; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:07:19.437

删除`@CollectionOfElements`并使用`@Embedded`. 我认为您正在对它进行双重映射，就像现在一样。此外，JPA 的`@ElementCollection`推荐[优于](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/collections.html#d0e11155)Hibernate 的`@CollectionOfElements`.

**更新**：我有点错过了您正在映射一组组件的事实。`@Column(name="...")`在这种情况下，您需要在您的字段中添加一个以`TestID`使其正确映射。尽管这与嵌入式组件的工作方式有些相反，但这是我知道的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:22:00.313

根据休眠[建议](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-mapping-association)（`2.2.5.3.3\. Collection of basic types or embeddable objects`），您应该使用

```
@ElementCollection
@CollectionTable(name="TEST_TABLE", joinColumns = @JoinColumn(name = "ROLE_ID"))
@AttributeOverrides({
     @AttributeOverride(name = "code", column = @Column(name = "TSTCODE")),
     @AttributeOverride(name = "work", column = @Column(name = "TSTWRK"))
}) 
```

# c++ - Boost.Build/bjam 和 Qt

> ID：10383613
> 
> 赞同：8
> 
> 时间：2012-04-30T12:20:53.613
> 
> 标签：c++, qt, bjam, boost-build

我正在尝试设置 Boost.Build .jamroot 文件来编译 Qt 4.8 项目，但它似乎忽略了应该 moc:ed 的 .ui 文件和 .cpp 文件。我尝试在 qt4.jam 中四处寻找，添加了更多 ECHO:s，但我不知道该去哪里找。

例如，似乎没有调用 uic-generator 的 run 方法（init 确实），但我*认为*应该如此。

我的 jamroot 文件如下所示：

```
import qt4 ;
if ! [ qt4.initialized ]
{
    ECHO "oh nooo" ;
}
import cast ;

exe application :
    # For example
    [ cast _ moccable-cpp : ./src/something.cpp ] 
    [ glob-tree *.ui  : .svn ] 
    ; 
```

我得到的唯一输出是：

```
>bjam
warn: Unable to construct ./application
...found 1 target... 
```

如果我运行 bjam --debug-configuration，qt4.jam 会为我的 Qt 安装打印出所有正确的路径。

这是怎么回事？也许它与 Qt 4.8 不兼容？还是我只是用错了？尽管代码几乎是从examples/qt下的文件中逐字提取的。

我该如何使用它？谢谢你的帮助。

编辑：使用 gcc 4.7 和来自[http://nuwen.net/mingw.html](http://nuwen.net/mingw.html)的 MinGW 发行版 9.0 ，以及 Boost 1.49.0 附带的 Boost.Build。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T14:09:15.717

替换*./src/something。**cpp***到*./src/something。**hpp***，即：

```
[ cast _ moccable-cpp : ./src/something.hpp ] 
```

**bjam**的**qt** -examples 容易产生误解：*main.cpp*模块混淆了源文件**和**头文件。

让我们记住**moc**进程头文件通常（带有**Q_OBJECT**的类声明的文件：在大多数情况下源文件不包含它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:30:59.317

不是对您的问题的确切答案，而是建议：使用 qmake 怎么样？它也适用于普通的 c++ 构建。如果您使用大量 Qt，qmake 非常方便，尽管文档可以改进。

看

[http://labs.qt.nokia.com/2008/04/16/the-power-of-qmake/](http://labs.qt.nokia.com/2008/04/16/the-power-of-qmake/)

[http://doc.qt.nokia.com/4.4/qmake-manual.html](http://doc.qt.nokia.com/4.4/qmake-manual.html)

[http://www.qtcentre.org/wiki/index.php?title=Undocumented_qmake](http://www.qtcentre.org/wiki/index.php?title=Undocumented_qmake)

[http://paulf.free.fr/undocumented_qmake.html](http://paulf.free.fr/undocumented_qmake.html)

[http://www.kde.gr.jp/~ichi/qt/qmake-manual-6.html](http://www.kde.gr.jp/~ichi/qt/qmake-manual-6.html)

供进一步参考

# excel - 从 url 获取图片，然后重命名图片

> ID：10383614
> 
> 赞同：9
> 
> 时间：2012-04-30T12:20:56.130
> 
> 标签：excel, vba, image

我有一个包含很多文章编号的 Excel 列表，例如。“23378847”。我希望将列表中所有文章编号的图片存储在我的文件夹中。

但结果会如下。应该是 23378847.jpg 而不是 152499

[http://media.byggtjeneste.no/media/bilde/152499/LargeThumbnail](http://media.byggtjeneste.no/media/bilde/152499/LargeThumbnail)
或
[http://www.nobb.no/Nobbnr/OrginalBilde/23378847/152499](http://www.nobb.no/Nobbnr/OrginalBilde/23378847/152499)

有没有办法让我制作一个脚本来读取我的文件并使用与列表中相同的文章编号保存图片？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T15:38:28.860

这是一个可以帮助您的示例。

我假设您的 Excel 文件看起来像这样。请根据需要修改代码。

![在此处输入图像描述](../Images/959f2688924b2fed7b62933f56dea295.png)

```
Option Explicit

Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" (ByVal pCaller As Long, _
ByVal szURL As String, ByVal szFileName As String, _
ByVal dwReserved As Long, ByVal lpfnCB As Long) As Long

Dim Ret As Long

'~~> This is where the images will be saved. Change as applicable
Const FolderName As String = "C:\Temp\"

Sub Sample()
    Dim ws As Worksheet
    Dim LastRow As Long, i As Long
    Dim strPath As String

    '~~> Name of the sheet which has the list
    Set ws = Sheets("Sheet1")

    LastRow = ws.Range("A" & Rows.Count).End(xlUp).Row

    For i = 2 To LastRow '<~~ 2 because row 1 has headers
        strPath = FolderName & ws.Range("A" & i).Value & ".jpg"

        Ret = URLDownloadToFile(0, ws.Range("B" & i).Value, strPath, 0, 0)

        If Ret = 0 Then
            ws.Range("C" & i).Value = "File successfully downloaded"
        Else
            ws.Range("C" & i).Value = "Unable to download the file"
        End If
    Next i
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-10-18T10:28:11.697

对于那些不想处理 VBA 或任何其他编程语言的人来说，有一个桌面 Web 应用程序让它变得超级简单。

只需放入excel文件，它会将excel文件中的所有图像（或文件）下载到您选择的文件夹中，如果B列上有名称，它也会重命名文件。

最新版本可以在[https://github.com/btargac/excel-parser-processor](https://github.com/btargac/excel-parser-processor)上找到。

# c++ - 将 char 数组传递给函数

> ID：10383615
> 
> 赞同：12
> 
> 时间：2012-04-30T12:21:01.420
> 
> 标签：c++, arrays, function, char

如何将 char 数组传递给函数。

声明

```
char fromName[64];
char fromStreet[64];
char fromSuburb[64];
char fromCountry[64]; 
```

函数调用

```
 Trans[i]->putAddress(fromName, fromStreet, fromSuburb, fromCountry); 
```

原型

```
void putAddress(char,char,char,char);

function    
void putAddress(char fName,char fStreet,char fSuburb,char fCountry){

        return;
} 
```

和错误“main.cpp”，第 86 行：错误：调用 Mail::putAddress(char, char, char, char) 中的 char 类型的形式参数 1 正在传递 char*。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T12:22:55.517

你的功能应该是：

```
void putAddress(char *,char *,char *,char *); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T12:23:20.830

您需要将指针传递给 char

```
void putAddress(char* fName,char* fStreet,char* fSuburb,char* fCountry); 
```

然后你需要小心你知道每个数组的大小，这样你就不会索引到最后，在你的情况下它们都是 64。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T12:25:37.683

您可以通过 2 种方式传递数组：

(1) 常规 C 风格：
这里通过地址传递并使用指针接收

```
void putAddress(char *,char *,char *,char *); 
```

(2) C++ 引用传递：
您使用大小规范通过引用传递数组：

```
 void putAddress(char (&a1)[64], char (&a2)[64],char (&a3)[64], char (&a4)[64]); 
```

这可以帮助您立即获得正确的数组大小（不允许使用指针）。这也可以使用更复杂`template`。

您还可以迭代 using 的选项`std::string`，这将复制整个数组并将其作为自动变量进行管理。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T12:23:14.180

您将字符串（字符数组）作为指向数组第一个字符的指针传递：

```
void something(char *str) { /* ... */ }

int main(int argc, char **argv) {
    char somestring[] = "Hell World!\n";

    something(somestring);

    return 0;
} 
```

因为数组在传递给函数时会自动衰减为指针，所以您只需传递字符数组即可。所以在你的例子中：

```
void putAddress(char*, char*, char*, char*); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-04-30T12:22:55.693

```
void putAddress(char* array){
    //use array as usual
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-04-30T12:23:38.610

编译器在那里告诉你......它被传递为`char*`. 所以使用`char*`或`char ar[]`。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-30T12:25:08.027

要更正您的代码：

```
void putAddress(char*,char*,char*,char*); 
```

但这仍然是错误的。数组衰减为指针，这就是它会编译的原因，但如果参数不是以空值结尾的，则会导致错误。如果您选择这种方法，您还应该传递大小。

**但是**，由于这是 C++ 而不是 C，我建议您`std::string`改用：

```
void putAddress(const std::string&,const std::string&,const std::string&,const std::string&); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-30T12:26:24.833

```
void putAddress(char[],char[],char[],char[]);

function    
void putAddress(char fName[],char fStreet[],char fSuburb[],char fCountry[]){

        return;
} 
```

你忘了放括号，把它们放在上面的代码中。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-30T12:28:53.070

编译器的错误是有道理的，因为 fromName 确实是指向 fromName 数组（的第一个元素）的指针。这只是 C++（和纯 C）语法。

为了将 char 数组传递给函数，您应该执行当前正在执行的操作，即传递指向数组（第一个元素）的指针。

所以你需要做的就是改变

```
 void putAddress(char,char,char,char); 
```

至

```
 void putAddress(char *, char *, char *, char *); 
```

PS：你的下一个问题是知道（让 putAddress 知道）每个数组的长度。如果这些都是固定的，你就没有问题。

# ruby-on-rails-3 - 如何让 Maxmind 的 Geoip 数据库与 Postgres + Heroku 一起使用

> ID：10383617
> 
> 赞同：1
> 
> 时间：2012-04-30T12:21:06.507
> 
> 标签：ruby-on-rails-3, postgresql, heroku, geoip

有人在 Rails 3+、Heroku、Pgsql 上运行并使用[Maxmind 的 Geoip](http://www.maxmind.com/app/csv)数据库吗？

在 MySql 上，我能够通过以下方式获得一个简单的查询：

```
IpToCountry.where('ip_to_countries.ip_number_to >= INET_ATON(?)', '24.24.24.24').order('ip_number_to ASC').limit(1).first 
```

但是，自从转向 Pgsql 以来，我正在尝试找到一种正确查询数据库的方法。到目前为止，我有：

```
remote_ip_array = '24.24.24.24'.split('.')
remote_ip_number = 16777216*remote_ip_array[0].to_i + 65536*remote_ip_array[1].to_i + 256*remote_ip_array[2].to_i + remote_ip_array[3].to_i
ip_to_country = IpToCountry.where('? >= ip_number_from AND ? <= ip_number_to', remote_ip_number, remote_ip_number).order('ip_number_to ASC').limit(1).first 
```

上述查询的问题是某些 IP 不匹配。例如：`37.59.16.123`和`108.166.92.235`。

我查看了[ip4r](http://pgfoundry.org/projects/ip4r/)但由于我使用的是[http://postgres.heroku.com](http://postgres.heroku.com)，我可能没有安装它的选项。我向支持团队发送了一封电子邮件以进行验证。

同时，非常感谢任何其他反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:46:50.533

ip4r 本身不太可能帮助匹配。如果您需要对子网进行 GIN 索引，则最需要 ip4r，例如强制存储的 CIDR 块不能重叠的约束。

你有两个选择。第一个，最好的一个，是使用 PostgreSQL 的 inet 类型并将 ipv4 地址存储在 inet 类型中。然后你会使用标准的文本表示。例如，比较：

```
select '10.59.3.1'::text > '101.3.4.1';
 ?column? 
----------
 t
(1 row) 
```

和

```
select '10.59.3.1'::inet > '101.3.4.1';
 ?column? 
----------
 f
(1 row) 
```

这种类型包含在 vanilla PostgreSQL 中，因此您不需要插件。

第二种选择是创建一个 int(inet) 函数，如下所示：

```
CREATE OR REPLACE FUNCTION to_int(inet) RETURNS bigint LANGUAGE SQL IMMUTABLE AS $$
SELECT $1 - '0.0.0.0';
$$; 
```

然后

```
select to_int('10.0.0.1');
  to_int   
-----------
 167772161
(1 row) 
```

这样你就可以在你的数据库中做 ipv4 到 int 。

我会推荐 inet 类型。他们真的很有帮助。大多数用例不需要 ip4r。

# sencha-touch - 如何使用 sencha touch 与数据库建立远程连接

> ID：10383621
> 
> 赞同：4
> 
> 时间：2012-04-30T12:21:09.970
> 
> 标签：sencha-touch, extjs, sencha-touch-2

如何使用 sencha touch 与数据库建立远程连接我的意思是，如何将表单提交到远程数据库？您如何从数据库中获得您的表单已成功提交的响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:24:43.123

您可以通过提出`Ext.Ajax`请求来做到这一点。

假设您的表单有 3 个字段：-

*   姓名 ( `textfield`)
*   密码 ( `passwordfield`)
*   年龄 ( `numberfield`)

您将获得如下所示的字段值，

```
.....
.....
// form code ...
{
  xtype:'button',
  id:'submitBtn',
  text:'Submit',
  ui:'confirm',
  listeners : {
         tap : function() {
                var form = Ext.getCmp('form-id');
                var values = form.getValues();
                Ext.Ajax.request({
                      url: 'http://www.servername.com/insert.php',
                      params: values,

                      success: function(response){
                          var text = response.responseText;
                          Ext.Msg.alert('Success', text);
                     }

                     failure : function(response) {
                           Ext.Msg.alert('Error','Error while submitting the form');
                           console.log(response.responseText);
                     }
              });
         }
   }  
....
.... 
```

现在，在服务器端，您的`insert.php`代码将与您的数据库建立连接并插入值并将响应返回给用户。

```
<?php 
$con = mysql_connect("server","username","password");
mysql_select_db('database_name',$con);

$insertQry = "INSERT INTO tableName(name,password,age) VALUES ('".$_POST['name']."','".$_POST['password']."','".$_POST['age']."')";

if(mysql_query($insertQry))
{
    echo('success');
}
else 
{
    echo('failure' . mysql_error());
}
?> 
```

# r - 将误差线添加到具有多个组的条形图中

> ID：10383623
> 
> 赞同：6
> 
> 时间：2012-04-30T12:21:13.457
> 
> 标签：r, lattice, bar-chart

我有以下条形图，我想在其中添加误差线。

```
library(lattice)    
barchart(Change~fTreat,groups=Process,change,
          auto.key=list(points=FALSE,rectangles=TRUE),
          panel=function(x, y,...){
            panel.barchart(x,y,origin = 0,...);
            panel.abline(h=0,col="black",...);
            }
          ) 
```

![在此处输入图像描述](../Images/665cbc1c91eb0b08bb0ad486e3107c37.png)

我尝试使用 memisc 包中的 panel.errbars，它对 xyplots 非常有用，但是当我将它添加到我的代码中时，它不尊重这些组。

```
library(memisc)    
barchart(cbind(Change,lower,upper)~fTreat,groups=Process,change,
     ylab="Pocertage change",
     ylim=-115:50,
     scales=list(alternating=FALSE,
                 tick.number=7,
                 tck=c(-1,0)),
     panel=function(x, y,groups,...){
       panel.barchart(x,y=change$Change,groups=change$Process,origin = 0,...);
       panel.abline(h=0,col="black",...);
       panel.errbars(x,y,make.grid="none",ewidth=0.2,type="n",...)
     }
     ) 
```

![在此处输入图像描述](../Images/a20bcfce2f9c793d7bf8c22936034bce.png) 关于如何使用 panel.errbars 或任何其他函数向我的绘图添加误差线的任何想法？

数据：

```
 structure(list(Treat = structure(c(3L, 4L, 1L, 2L, 3L, 4L, 1L, 
2L), .Label = c("12-380", "12-750", "8-380", "8-750"), class = "factor"), 
    Process = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), .Label = c("Resp", 
    "Cal"), class = c("ordered", "factor")), Change = c(-33.05, 
    -34.74, 20.94, 18.06, 6.85, -28.57, -8.1, -78.72), upper = c(-13.22896628, 
    -28.61149669, 31.29930461, 27.30173776, 39.73271282, 9.458372948, 
    13.11035572, -47.03745704), lower = c(-52.86120694, -40.87446411, 
    10.57421563, 8.822042178, -26.03144161, -66.60447035, -29.30563327, 
    -110.3973761), fTreat = structure(c(1L, 2L, 3L, 4L, 1L, 2L, 
    3L, 4L), .Label = c("8-380", "8-750", "12-380", "12-750"), class = c("ordered", 
    "factor"))), .Names = c("Treat", "Process", "Change", "upper", 
"lower", "fTreat"), row.names = c(NA, -8L), class = "data.frame") 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T16:24:48.693

这是我使用 lattice 给出的另一个答案。

```
prepanel=function(y, stderr, subscripts=subscripts, ...){
  uy <- as.numeric(y+stderr[subscripts])
  ly <- as.numeric(y-stderr[subscripts])
  list(ylim=range(y,uy,ly, finite=TRUE))
}
panel.err=function(x, y, subscripts, groups, stderr, box.ratio, ...){
  d <- 1/(nlevels(groups)+nlevels(groups)/box.ratio)
  g <- (as.numeric(groups[subscripts])-1); g <- (g-median(g))*d
  panel.arrows(as.numeric(x)+g,y-stderr[subscripts], as.numeric(x)+g, y+stderr[subscripts],
               code=3,angle=90, length=0.025)
}
barchart(Change~fTreat,groups=Process,change,
         stderr=change$stderr,
         ylab="Pocertage change",
         xlab="Treatment",
         ylim=-115:50,
         auto.key=list(points=FALSE,rectangles=TRUE,columns=2),
         scales=list(alternating=FALSE,
                     tick.number=7,
                     tck=c(-1,0)),
         prepanel=prepanel,
         panel=function(x, y, subscripts, groups, stderr, box.ratio, ...){
             panel.barchart(x, y, subscripts=subscripts,
                            groups=groups, box.ratio=box.ratio,origin=0, ...)
             panel.abline(h=0,col="black",...)
             panel.err(x, y, subscripts=subscripts,
                       groups=groups, box.ratio=box.ratio,stderr=change$stderr)
           }
         ) 
```

非常感谢 Walmes Marques Zeviani 提供代码

这是修改后的数据：

```
change <- structure(list(Treat = structure(c(3L, 4L, 1L, 2L, 3L, 4L, 1L, 
2L), .Label = c("12-380", "12-750", "8-380", "8-750"), class = "factor"), 
    Process = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), .Label = c("Respiration", 
    "Calcification"), class = c("ordered", "factor")), Change = c(-33L, 
    -35L, 21L, 18L, 7L, -29L, -8L, -79L), stderr = c(20L, 6L, 
    10L, 9L, 33L, 38L, 21L, 32L), fTreat = structure(c(1L, 2L, 
    3L, 4L, 1L, 2L, 3L, 4L), .Label = c("8-380", "8-750", "12-380", 
    "12-750"), class = c("ordered", "factor"))), .Names = c("Treat", 
"Process", "Change", "stderr", "fTreat"), row.names = c(NA, -8L
), class = "data.frame") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T13:46:24.270

这不是您要的，但情节很容易制作`ggplot2`（如果这是一个选项）

```
dt <- structure(list(Treat = structure(c(3L, 4L, 1L, 2L, 3L, 4L, 1L, 
2L), .Label = c("12-380", "12-750", "8-380", "8-750"), class = "factor"), 
    Process = structure(c(1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L), .Label = c("Resp", 
    "Cal"), class = c("ordered", "factor")), Change = c(-33.05, 
    -34.74, 20.94, 18.06, 6.85, -28.57, -8.1, -78.72), upper = c(-13.22896628, 
    -28.61149669, 31.29930461, 27.30173776, 39.73271282, 9.458372948, 
    13.11035572, -47.03745704), lower = c(-52.86120694, -40.87446411, 
    10.57421563, 8.822042178, -26.03144161, -66.60447035, -29.30563327, 
    -110.3973761), fTreat = structure(c(1L, 2L, 3L, 4L, 1L, 2L, 
    3L, 4L), .Label = c("8-380", "8-750", "12-380", "12-750"), class = c("ordered", 
    "factor"))), .Names = c("Treat", "Process", "Change", "upper", 
"lower", "fTreat"), row.names = c(NA, -8L), class = "data.frame")

a <- ggplot(dt, aes(y = Change, x = Treat, ymax = upper, ymin = lower))
dodge <- position_dodge(width=0.9)
a + geom_bar(aes(fill = Process), position = dodge) +
geom_errorbar(aes(fill = Process), position = dodge, width = 0.2) 
```

![在此处输入图像描述](../Images/2a53bf7623f50100d2722e716d62b13c.png)

# actionscript-3 - 使用 Adob e 工具、flasg、as3 的 kinect 教程

> ID：10383625
> 
> 赞同：2
> 
> 时间：2012-04-30T12:21:32.727
> 
> 标签：actionscript-3, flash, kinect

我需要一些帮助。有没有办法使用 Adob​​e 工具使用 Kinect（在 Windows 上）？闪光？AS3？

有没有什么好的教程。

基本上我需要一个基本功能——带有我自己的 UI 的导航菜单。

谁能给一些教程的链接？示例代码？

我找不到任何东西，但我相信网上有很多例子。

问候约阿夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:10:36.200

是的，这是可能的！您需要使用 ANE。

我将从这里开始：

这是[AIRKinect](http://www.as3nui.com/air-kinect/)扩展的 git repot

资源：

[https://github.com/AS3NUI/airkinect-2-core](https://github.com/AS3NUI/airkinect-2-core)

例子：

[https://github.com/AS3NUI/airkinect-2-examples](https://github.com/AS3NUI/airkinect-2-examples)

获得文件后，请查看此视频教程，了解如何开始

[http://vimeo.com/38104155](http://vimeo.com/38104155)

# networking - 传输或模拟 SMS-CB（短消息服务-小区广播）

> ID：10383628
> 
> 赞同：7
> 
> 时间：2012-04-30T12:21:54.060
> 
> 标签：networking, mobile, sms, cellular-network

手机可以发送[SMS-CB（Short Messaging Service-Cell Broadcast）](http://en.wikipedia.org/wiki/Cell_Broadcast)吗？
如果没有，我可以得到一个可以传输 SMS-CB 消息的设备吗？
另外，有没有好的模拟器可以模拟手机短信-CB收发？

谢谢

*注意：小区广播 (SMS-CB) 旨在将消息同时传递给指定区域的多个用户。例如，可以传输位置、塔名、广告或紧急消息等信息。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T12:39:21.487

从技术上讲，SMS-CB 消息源自称为“小区广播中心 (CBC)”的设备，该设备是网络运营商设备的一部分。它通过基站控制器 (BSC) 发送 SMS-CB。这不能通过无线方式完成，它发生在移动运营商网络内部。在这里解释所有 GSM/3G/UMTS 网络组件可能太多了，您可能想阅读移动网络架构。

所以简单的答案是否定的，手机（手机）不能直接发送 SMS-CB 消息。

现在的问题是，如何告诉 CBC 向某些网络单元发送 SMS-CB。为此存在一些用于紧急警报的标准化接口，例如美国的[商业移动警报系统（CMAS）](http://en.wikipedia.org/wiki/Commercial_Mobile_Alert_System)。如果这些接口设计合理，那么几乎任何使用手机的人都不会滥用它们。但是，如果某些运营商的网络中存在安全漏洞，允许未经授权的方发送 SMS-CB，例如通过不安全的 Internet/SS7 网关，我不会感到惊讶。但这是一种疯狂的猜测。通常，应该不可能从运营商网络之外发送未经授权的 SMS-CB。

# android - android - 空格出现在顶部

> ID：10383634
> 
> 赞同：2
> 
> 时间：2012-04-30T12:22:25.073
> 
> 标签：android, tabbar

在我的应用程序中，我使用标签栏。有时顶部会出现一个空白区域。如何解决这个问题？

拜托，有人可以帮助我吗？

**标签条码**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost" 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <LinearLayout android:orientation="vertical"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <FrameLayout android:id="@android:id/tabcontent"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:layout_weight="1"/>

        <View android:layout_width="fill_parent" 
            android:layout_height="0.5dip"
            android:background="#000" />
        <TabWidget android:id="@android:id/tabs"
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content"
            android:layout_marginLeft="0dip" 
            android:layout_marginRight="0dip" 
            android:layout_weight="0"/>
        <View android:layout_width="fill_parent" 
            android:layout_height="2dip"
            android:background="#696969" />
        <View android:layout_width="fill_parent" 
            android:layout_height="2dip"
            android:background="#000" 
            android:layout_marginBottom="-5px"/>            
    </LinearLayout>
</TabHost>

</LinearLayout> 
```

**联系我们**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="@color/white"
  android:orientation="vertical">

<!-- Title for ContactUs screen -->
<RelativeLayout
    android:id="@+id/RL_contactus_Title" 
    android:layout_height="wrap_content" 
    android:layout_width="fill_parent"
    android:background="@drawable/titlebar">

        <TextView
            android:id="@+id/CU_title_tv"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"                                                        
            android:layout_centerInParent="true"                
            android:text="@string/ContactUS_title"
            android:textColor="@color/white"
            android:textSize="20sp"
            android:textStyle="bold"/>
</RelativeLayout>   

 <ScrollView 
    android:orientation="vertical"
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent">     
     <LinearLayout  
            android:id="@+id/LL_Contactus_SV" 
            android:orientation="vertical"              
            android:layout_height="wrap_content" 
            android:layout_width="fill_parent">

            <!-- General Information -->
            <LinearLayout
                android:id="@+id/CU_generalinfo_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="20dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_generalinfo_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/General_info"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_generalmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/General_info_email"
                        android:layout_marginTop="3dp"      
                        android:textColor="@color/blue"                 
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Suggestions -->
            <LinearLayout
                android:id="@+id/CU_sugesstionsinfo_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_sugesstionsinfo_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Suggestions"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_suggestionsmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Suggestions_email"
                        android:textColor="@color/blue"
                        android:layout_marginTop="3dp"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Billing -->
            <LinearLayout
                android:id="@+id/CU_billing_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_billing_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Billing_ques"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_billingmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Billing_email"
                        android:textColor="@color/blue"
                        android:layout_marginTop="3dp"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Technical -->
            <LinearLayout
                android:id="@+id/CU_technical_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_technical_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Tech_ques"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_techmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Tech_email"
                        android:layout_marginTop="3dp"
                        android:textColor="@color/blue"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Account-->
            <LinearLayout
                android:id="@+id/CU_account_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_account_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/General_account_ques"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_accountmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/General_account_email"
                        android:layout_marginTop="3dp"
                        android:textColor="@color/blue"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Reports -->
            <LinearLayout
                android:id="@+id/CU_report_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_report_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Report_info"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_reportmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Report_email"
                        android:layout_marginTop="3dp"
                        android:textColor="@color/blue"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Special Projects -->
            <LinearLayout
                android:id="@+id/CU_sprojects_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <TextView
                        android:id="@+id/CU_sprojects_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/special_projects"
                        android:textColor="@color/black"
                        android:textSize="16sp"/>

                    <TextView
                        android:id="@+id/CU_sprojectsmail_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/special_projects_email"
                        android:layout_marginTop="3dp"
                        android:textColor="@color/blue"
                        android:textSize="16sp"/>                               
            </LinearLayout>

            <!-- Phone -->
            <LinearLayout
                android:id="@+id/CU_Phone_LL" 
                android:layout_height="wrap_content" 
                android:layout_width="fill_parent"
                android:orientation="vertical"
                android:layout_marginTop="25dp"
                android:layout_marginLeft="10dp">

                    <LinearLayout
                        android:layout_height="wrap_content" 
                        android:layout_width="fill_parent"  
                        android:orientation="horizontal">
                        <TextView
                            android:id="@+id/CU_phoneinfo_tv"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"                                                                                    
                            android:text="@string/Phone_info"
                            android:textColor="@color/black"
                            android:textSize="16sp"/>

                        <TextView
                            android:id="@+id/CU_phoneno_tv"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"                                                                                    
                            android:text="@string/Phone_number"
                            android:textColor="@color/blue"
                            android:layout_marginLeft="5dp"
                            android:textSize="16sp"/>   
                    </LinearLayout>                     

                    <TextView
                        android:id="@+id/CU_timings_tv"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"                                                                                    
                        android:text="@string/Timings"
                        android:layout_marginTop="5dp"
                        android:textColor="@color/black"
                        android:textSize="16sp"
                        android:layout_marginBottom="25dp"/>                            
            </LinearLayout>

    </LinearLayout>
</ScrollView>               

</LinearLayout> 
```

**原始图像**

![在此处输入图像描述](../Images/e68343b2bd42f1d0d79d90b09b705afd.png)

**问题图片**

![在此处输入图像描述](../Images/aa69ecb3b8d976190a1e8f4ad41f6f96.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:27:37.797

它在您的 xml 中存在问题

你可以通过

设置 imageview(联系我们) margingTop = 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:24:34.660

我认为您已将滚动条放在标签栏而不是标签栏的上下文中...首先检查

# ffmpeg - ffmpeg h.264 无效切割

> ID：10383635
> 
> 赞同：0
> 
> 时间：2012-04-30T12:22:24.957
> 
> 标签：ffmpeg, cdn, h.264, video-encoding, mpeg-4

我有一个包含数百个视频文件的 s3 存储桶。
这些文件是通过使用 ffmpeg 剪切较大视频文件的一部分而创建的。
我为此编写了一个脚本，它从另一个存储桶下载原始视频文件，运行 ffmpeg 剪切文件，并将新文件上传到它的存储桶。为了从/向 s3 下载和上传，我使用[了这个 php 库](https://github.com/tpyo/amazon-s3-php-class)。
我使用的 ffmpeg 语法：

```
ffmpeg -y -vsync 2 -async 1 -ss [time-in] -t [duration] -i [large-input-video.mp4] -vcodec copy -acodec copy [short-output-video.mp4] 
```

这应该只是在指定时间之间剪切原始文件，而不对 a/v 编解码器进行任何更改。
所有原始视频文件都以 h.264 编码，这也是新文件所需的编码（将通过 CDN 流式传输到客户端的 Flash 播放器）。

我的问题是只有一小部分新文件以 h.264 编码输出，但大多数不是（h.264 是必须的，否则文件不会在客户端播放）。
我无法将问题追溯到原始视频，因为当我手动使用相同的 ffmpeg 命令、相同的参数和相同的文件时，输出文件就很好了。似乎随意。

我使用 ffprobe 来获取有关文件编解码器的信息。
例如：
**大型（原始）视频文件之一的 ffprobe：**

> ...
> 流 #0.0(und)：视频：h264、yuv420p、640x352、499 kb/s、25 fps、25 tbr、90k tbn、50 tbc
> ...

**对应新剪切文件的ffprobe：**

> ...
> 流 #0.0(und)：视频：mpeg4、yuv420p、640x352 [PAR 1:1 DAR 20:11]、227 kb/s、25 fps、25 tbr、25 tbn、25 tbc
> ...

可以看出，区别在于“mpeg4”与“h264”。

任何关于什么可能导致新文件以错误编码出现的见解将不胜感激。

谢谢！

**编辑：问题已解决**
在分析了所有文件后，我注意到其中大约三分之二的文件使用了错误的编解码器。
由于我在切割过程中使用了三台机器（三台独立的 EC2 服务器），我突然想到其中两台 ffmpeg 安装错误（正如@LordNeckbeard 在他的回答中所建议的那样）。
我再次运行该过程，仅在无效文件上，仅在第三台机器上 - 产生了预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T02:39:39.043

输出文件上的“mpeg4”很可能表明 ffmpeg 正在重新编码而不是复制视频流。由于您没有提供该信息，因此我不能对音频说同样的话。较旧的 ffmpeg 使用“mpeg4”视频编码器作为使用 MP4 容器的输出的默认值。检查您的脚本或库，因为在手动调用 ffmpeg 时一切都按预期工作。

不太关心的是`-vsync 2 -async 1`在使用时可能会被忽略`-vcodec copy -acodec copy`。

另请注意，您可能希望通过`qt-faststart`（它包含在 ffmpeg 源代码中）或替代地运行您的剪切输出`MP4Box`。这会将一些数据移动到文件的开头，以便视频可以在客户端完全下载之前开始播放。

最后是物品的摆放`-ss`。作为输入选项（之前`-i`），它要快得多，因为它会立即寻找您想要的时间然后开始解码，但它不如`-ss`输出选项准确，后者在您想要的时间之前完全解码所有内容。如果准确性比速度更重要，那么考虑将测试`-ss`作为输出选项。

# c# - 使用 LINQ 填充对象

> ID：10383643
> 
> 赞同：5
> 
> 时间：2012-04-30T12:23:05.163
> 
> 标签：c#, linq

我希望更多地了解 LINQ 并更多地使用它，所以在这里进行一些自我开发工作......

我有一个对象如下：

```
public class Player(){

    public string Name{get;set;}

    public Club currentClub{get;set;}

    public IEnumerable<Club> previousClubs{get;set;}

} 
```

现在，给定一个球员名单，我想选择以前为各种选定俱乐部效力的球员，我可以通过嵌套的几个 foreach 语句轻松完成 - 但我想用 Linq 来完成。 .

我已经尝试过了，但没有返回任何内容：

```
var prevClubs = 
    from player in players
    from clubOriginal in player.previousClubs
    from clubSecond in player.previousClubs
    from clubThird in player.previousClubs
    where clubOriginal.ID == 1
    where clubSecond.ID == 2
    where clubThird.ID == 3
    select new HistoryOfPlayer{ 
        firstClub == clubOriginal.Name,
        secondClub == clubSecond.Name,
        thirdClub == clubThird.Name
    } 
```

对我哪里出错有帮助吗？数据肯定存在，因为当我有一个循环遍历球员的循环内的俱乐部循环时，我返回了为俱乐部 1,2 和 3 效力过的所有球员的集合，有数据......

实际上，它应该返回 HistoryOfPlayer 对象的几个实例，所有实例都包含相同 3 个俱乐部的名称（假设它们在 ID 上链接） - 正如我所说，它有点自学，所以尝试将它应用到运动中有点卡在我的脑海里！！

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:43:10.257

你可以让它更有活力

```
List<int> clubIds = new List<int> { 1, 2, 3};
var prevClubs = from player in players
                where player.previousClubs.Any(m => clubIds.Contains(m.ID))
                select new HistoryOfPlayer {
                   Player = player, 
                   Clubs = player.previousClubs
                                 .Where(m => clubIds.Contains(m.ID))
                                 .Select(c => c.Name) 
                }; 
```

在 svik 之后编辑他的评论：

```
List<int> clubIds = new List<int> { 1, 2, 3};
var prevClubs = from player in players
                where clubIds.All(id => player.previousClubs
                                              .select(club => club.ID)
                                              .contains(id))
                select new HistoryOfPlayer {
                   Player = player, 
                   Clubs = player.previousClubs
                                 .Where(m => clubIds.Contains(m.ID))
                                 .Select(c => c.Name) 
                }; 
```

*注意这是在没有 IDE 的情况下编写的，所以我没有检查它是否有效。

# sqlite - 从其他线程访问“内存中”数据库

> ID：10383645
> 
> 赞同：2
> 
> 时间：2012-04-30T12:23:13.030
> 
> 标签：sqlite

我使用以下语句创建了一个内存数据库：

```
rc = sqlite3_open(":memory:", &db); 
```

我需要在其他线程中访问这个数据库（用于读取数据）。有没有办法在其他线程的内存数据库中访问它？

文档说：

> 每个`:memory:`数据库都彼此不同。因此，打开两个各自具有文件名的数据库连接`:memory:`将创建两个独立的内存数据库。

如果我在内存中创建多个数据库，如何从其他线程访问这些数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:32:08.060

代码中的`db`变量成为指向创建的 SQLite db 对象的指针：

```
int sqlite3_open(
  const char *filename,   /* Database filename (UTF-8) */
  sqlite3 **ppDb          /* OUT: SQLite db handle */
); 
```

参考：[http ://www.sqlite.org/capi3ref.html#sqlite3_open](http://www.sqlite.org/capi3ref.html#sqlite3_open)

这是您将在不同线程中用来执行语句的指针。例如，您使用以下函数准备语句，并将`db`指针传递给该函数：

```
int sqlite3_prepare(
  sqlite3 *db,            /* Database handle */
  const char *zSql,       /* SQL statement, UTF-8 encoded */
  int nByte,              /* Maximum length of zSql in bytes. */
  sqlite3_stmt **ppStmt,  /* OUT: Statement handle */
  const char **pzTail     /* OUT: Pointer to unused portion of zSql */
); 
```

参考：[http ://www.sqlite.org/c3ref/prepare.html](http://www.sqlite.org/c3ref/prepare.html)

**编辑：**

我不知道您是否可以更改您打开的内存数据库的名称`sqlite3_open(":memory:", ...)`，但它确实有一个名称。您还可以附加其他内存数据库。

最初打开的内存数据库名称很有可能是`main`. 您可以通过运行语句来验证这一点`pragma database_list`。

您可以通过运行诸如`ATTACH DATABASE ':memory:' AS db2;`.

这是使用 sqlite3 客户端的上述快速演示：

```
[someone@somewhere ~]$ sqlite3
SQLite version 3.7.7.1 2011-06-28 17:39:05
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> .headers on
sqlite> pragma database_list;
seq|name|file
0|main|
sqlite> attach database ':memory:' AS db2;
sqlite> pragma database_list;
seq|name|file
0|main|
2|db2|
sqlite> create table main.foo (bar int);
sqlite> create table db2.foo (bar int);
sqlite> insert into main.foo values (5);
sqlite> insert into db2.foo select * from main.foo;
sqlite> select * from db2.foo;
bar
5 
```

# mysql - 如何在 MySQL 的 ALTER TABLE 中使用 SELECT 语句的结果？

> ID：10383647
> 
> 赞同：4
> 
> 时间：2012-04-30T12:23:20.343
> 
> 标签：mysql

我有一张带有一些属性的桌子。我想使用这些属性在另一个表（ALTER TABLE）中创建一些列。

以下 SELECT 语句导致多个结果：

```
SELECT property FROM table1 GROUP BY property; 
```

结果示例：

*   名
*   姓
*   地址
*   电话

对于上面 select 语句的每个结果，执行：

```
ALTER TABLE table2 ADD property boolean null; 
```

怎么做？

# ruby-on-rails-3 - 将数据从 2 个表写入 excel 文件

> ID：10383656
> 
> 赞同：3
> 
> 时间：2012-04-30T12:24:29.283
> 
> 标签：ruby-on-rails-3

我曾尝试使用 to_xls 导出数据，但是有没有什么好的方法可以从 rails 中的 2 个不同表导出 excel 文件中的数据。例如，我现在有一个用户表和用户详细信息表，我希望我的 excel 文件包含这两个表的记录..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-16T17:56:08.057

你试过这个

```
 `send_data book, :filename => "sample.xls", :type => "application/vnd.ms-excel"` 
```

`

# c - 在 C 中释放阻塞流的缓冲区

> ID：10383657
> 
> 赞同：4
> 
> 时间：2012-04-30T12:24:31.740
> 
> 标签：c, multithreading, stream, buffer

在多线程应用程序中，我需要取消线程。其中一些使用`flockfile` 显然不是有效取消点的机制`pthread_cancel`。我设法通过使用发送`SIGUSR1`信号来杀死线程`pthread_kill`，迫使它们进入`pthread_exit`信号处理程序。在我的情况下，清理分配的内存被证明很简单（它都在堆栈上），但我当然不能关闭文件流。有没有办法释放缓冲区或删除锁？在我的系统上，每个未关闭的缓冲区都会占用 16KB 的内存，这些内存会迅速累积。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:32:38.450

而不是强制杀死线程，您应该向它们传达“完成”消息，然后线程可以在退出清理之前自行清理。

您已经在使用 SIGUSR1 进行消息传递部分，因此您需要跟踪打开的句柄，以便您可以从信号处理程序中解锁/释放任何正在使用的句柄

# android - 我如何将搜索结果提交到 Android 地图中的 SQLite 表

> ID：10383664
> 
> 赞同：1
> 
> 时间：2012-04-30T12:24:53.297
> 
> 标签：android, sqlite, maps, store

我想将搜索地点位置存储到 Android 中的 Sqlite 数据库中，然后我在 Android 的 Listview 中填充我正在使用[http://maps.google.com/maps](http://maps.google.com/maps)的位置搜索？从此我通过在 Mpas 中搜索获得位置，我如何从该地址获取 Lat 和 Lang 并提交到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:28:16.857

每次获得新位置时，编写代码以在 onLocationChanged(Location location) 内的 DB 中插入位置，它将按照您的需要存储在数据库中。

# sql - 为什么将参数传递给存储过程时出现错误？

> ID：10383665
> 
> 赞同：1
> 
> 时间：2012-04-30T12:24:59.110
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我创建了一个存储过程来将 IP 地址分成四个不同的列。

```
ALTER PROCEDURE ipaddress_split
(
    @str as varchar(max)
)
AS 
BEGIN
    SET NOCOUNT ON

    DECLARE @query as varchar(max)  
    SET  @query = 'SELECT   parsename('+@str+',4) as A
                        ,   parsename('+@str+',3) as B
                        ,   parsename('+@str+',2) as C
                        ,   parsename('+@str+',1) as D';
    EXEC (@query)
    SET NOCOUNT off
END 
```

但是，当我传递参数时出现错误。

```
EXEC ipaddress_split @str='191.168.1.1'

Msg 102, Level 15, State 1, Line 1
Incorrect syntax near '.1'. 
```

我尝试了下面提到的所有组合，但没有成功。

```
exec ipaddress_split '191.168.1.1'
exec ipaddress_split 191.168.1.1
exec ipaddress_split ('191.168.1.1') 
```

将参数传递给存储过程的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T12:31:38.207

您不必动态生成查询来拆分 IP 地址输入。你可以做这样的事情。

*存储过程脚本*：

```
ALTER PROCEDURE ipaddress_split
(
    @str AS VARCHAR(max)
)
AS  
BEGIN

SET NOCOUNT ON

SELECT  PARSENAME(@str, 4) AS A
    ,   PARSENAME(@str, 2) AS B
    ,   PARSENAME(@str, 3) AS C
    ,   PARSENAME(@str, 1) AS D

SET NOCOUNT OFF

END; 
```

*执行语句*：

```
EXEC ipaddress_split @str = '191.168.1.1'; 
```

*输出*：

```
A   B   C   D
--- --- --- ---
191 1   168 1 
```

# 您的问题的原因：

您的动态查询计算为以下格式。它不会将 PARSENAME 函数的输入视为字符串。

```
SELECT parsename(191.168.1.1,4) as A,parsename(191.168.1.1,3) 
as B,parsename(191.168.1.1,2) as C,parsename(191.168.1.1,1) as D 
```

您必须通过为要在查询中显示的每个单引号添加两个额外的单引号来将 set 查询语句更改为像这样。

```
set @query = 'SELECT parsename('''+@str+''',4) as A,parsename('''+@str+''',3) 
as B,parsename('''+@str+''',2) as C,parsename('''+@str+''',1) as D'; 
```

你的动态查询就会变成这样

```
SELECT parsename('191.168.1.1',4) as A,parsename('191.168.1.1',3) as
B,parsename('191.168.1.1',2) as C,parsename('191.168.1.1',1) as D 
```

无论如何，我不建议您按照自己的方式进行操作。这不是正确的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:49:47.550

```
set @query = 'SELECT PARSENAME('''+@str+''',4) as A ,PARSENAME('''+@str+''',3) as B,PARSENAME('''+@str+''',2) as C,PARSENAME('''+@str+''',1) as D'
EXEC (@query) 
```

试试这个。它应该工作。

否则，传递参数，如，

```
exec ipaddress_split @str='''191.168.1.1''' 
```

在您的情况下，当您执行查询时，它找不到 ip as `string`。

# asp.net-mvc-4 - ASP.Net Web API - 远程服务器返回错误：（405）方法不允许

> ID：10383668
> 
> 赞同：0
> 
> 时间：2012-04-30T12:25:04.640
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用新的 MVC4 ASP.Net Web API 系统。

我在使用 WebClient 的测试项目中调用我的 API。如果我使用 GET 或 POST，它工作正常。如果我使用其他任何东西，我会得到 Method Not Allowed。我实际上是通过注入以下标头来“伪造”该方法。我这样做是因为由于某些防火墙的限制，我的最终用户也必须这样做。

我通过 IIS（即不是 cassini）调用 URL - 例如[http://localhost/MyAPI/api/Test](http://localhost/MyAPI/api/Test)

```
wc.Headers.Add("X-HTTP-Method", "PUT"); 
```

我尝试在 IIS 中调整脚本映射，但由于没有扩展，我不知道我要调整什么！

有任何想法吗？问候尼克

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T13:44:07.293

Web API 不支持开箱即用的`X-HTTP-Method`(or ) 标头。`X-HTTP-Method-Override`您将需要创建一个自定义`DelegatingHandler`（以下实现假设您使用`POST`应有的方法提出请求）：

```
public class XHttpMethodDelegatingHandler : DelegatingHandler
{
    private static readonly string[] _allowedHttpMethods = { "PUT", "DELETE" };
    private static readonly string _httpMethodHeader = "X-HTTP-Method";

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        if (request.Method == HttpMethod.Post && request.Headers.Contains(_httpMethodHeader))
        {
            string httpMethod = request.Headers.GetValues(_httpMethodHeader).FirstOrDefault();
            if (_allowedHttpMethods.Contains(httpMethod, StringComparer.InvariantCultureIgnoreCase))
            request.Method = new HttpMethod(httpMethod);
        }
        return base.SendAsync(request, cancellationToken);
    }
} 
```

现在您只需要注册您的`DelegatingHandler`in `Global.asax`：

```
protected void Application_Start(object sender, EventArgs e)
{
    GlobalConfiguration.Configuration.MessageHandlers.Add(new XHttpMethodDelegatingHandler());
    ...
} 
```

这应该可以解决问题。

# vb.net - VB .net - 行号问题

> ID：10383670
> 
> 赞同：0
> 
> 时间：2012-04-30T12:25:09.873
> 
> 标签：vb.net

我正在做一些从数据库连接中提取行的代码，并且应该为每一行返回一个行号。我正在通过以下方式执行此操作。

```
linenum = 0
Do While (rsData.Read())
linenum = linenum + 1 
```

现在，当我输出一个 8 行的数据库连接时，每行的行号返回为 1222222。

我需要确定正确的数字，以便可以执行以下操作来更改行样式。

```
If ((linenum / 2) = Int(linenum / 2)) Then
html += Chr(13) & "<tr class=""openrow2"">"
Else
html += Chr(13) & "<tr class=""openrow1"">"
End If 
```

任何想法为什么我的第一个行似乎只被称为第 2 行而不是系列中的下一个数字？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:31:10.223

只是在黑暗中拍摄，但你的循环语句在哪里？
此外，如果 linenum 是整数，为什么不使用 MOD 运算符？

```
linenum = 0 
Do While rsData.Read()
    linenum = linenum + 1 
    If (linenum Mod 2) = 0) Then 
       html += Chr(13) & "<tr class=""openrow2"">" 
    Else 
      html += Chr(13) & "<tr class=""openrow1"">" 
    End If 
    ....
Loop 
```

# ruby-on-rails-3 - 有没有办法从 js.erb 文件呈现动作的 js 模板？

> ID：10383673
> 
> 赞同：1
> 
> 时间：2012-04-30T12:25:23.067
> 
> 标签：ruby-on-rails-3, erb

我试过了 `<%= render :template =>'resources/new', :format => "js" %>`，但没有任何反应。

编辑：我也不知道如何将参数发送到 .js 模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T20:34:59.437

通过这样做解决：

```
render :template => 'resources/new.js', :locals => {:link_id => "register_similar"} 
```

在接收的 js.erb 文件中：

```
var link_id = '<%= link_id %>' 
```

# asp.net-mvc-3 - 验证码不起作用

> ID：10383676
> 
> 赞同：0
> 
> 时间：2012-04-30T12:25:28.763
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, entity-framework-4.1

我正在我的一种注册表单中实施验证码

在 Example.Cs 文件中，我写了以下内容：

```
public static class CaptchaHelper
 {
  public static string Captcha(this HtmlHelper helper, string text)
       {
           string srcPath = System.Web.VirtualPathUtility.ToAbsolute("~/Handler1.ashx");
           string htmlContent = string.Empty;
           htmlContent += "<script type=\"text/javascript\">function __rc(){document.getElementById(\"" + text +
                          "\").src = \"../Handler1.ashx?query=\" + Math.random();}</script>";
           htmlContent += string.Format("<img id=\"{0}\" src=\"{1}\" alt=\"Captcha Image\"/>", text, srcPath);
           htmlContent += "<a href=\"#\" onclick=\"javascript:__rc();\">Reset</a>";
           return htmlContent;
       }
   } 
```

在视图（.cshtml）中，我写了以下内容：

```
 @Html.Captcha("Sample") 
```

代替图像显示脚本可以对此提供任何帮助。

谢谢巴努

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:45:56.057

试试这个...

```
public static class CaptchaHelper
 {
  public static MvcHtmlString Captcha(this HtmlHelper helper, string text)
       {
           string srcPath = System.Web.VirtualPathUtility.ToAbsolute("~/Handler1.ashx");
           string htmlContent = string.Empty;
           htmlContent += "<script type=\"text/javascript\">function __rc(){document.getElementById(\"" + text +
                          "\").src = \"../Handler1.ashx?query=\" + Math.random();}</script>";
           htmlContent += string.Format("<img id=\"{0}\" src=\"{1}\" alt=\"Captcha Image\"/>", text, srcPath);
           htmlContent += "<a href=\"#\" onclick=\"javascript:__rc();\">Reset</a>";
           return MvcHtmlString.Create(htmlContent.ToString());
       }
   } 
```

编辑...试试这条线...

```
htmlContent += string.Format("<img id=" + text + " src=" + srcPath + " alt=\"Captcha Image\"/>", text, srcPath); 
```

# android - 在android中录制带有叠加图像的视频

> ID：10383677
> 
> 赞同：3
> 
> 时间：2012-04-30T12:25:29.637
> 
> 标签：android, android-mapview, android-view, video-recording

是否可以使用叠加视图录制视频？在录制视频时，我在叠加视图上显示了一张小图像。我想要做的是我想要那些叠加图像以及录制的视频。因此，当我打开该录制的视频时，我也将能够看到与视频一起录制的重叠图像。

朋友们，我需要这个解决方案尽快。请提出适当的解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T05:10:42.207

不幸的是，当前的 Android API 没有办法在相机输入和编码器之间进行连接。任何解决方案都将涉及从视频源捕获帧，覆盖附加图像，然后包括用于捕获帧的编码器。即使在快速系统上使用 NEON 优化的本机代码中，这也将是一个缓慢的过程。或者，可以以类似的方式对整个流进行后处理，但这也需要解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-05T16:18:11.303

供将来参考：这可以使用[CameraView](https://github.com/natario1/CameraView)库，至少在“快照视频”模式下是可能的。

# php - foreach 语句强制 while/for 循环太多次

> ID：10383678
> 
> 赞同：2
> 
> 时间：2012-04-30T12:25:31.747
> 
> 标签：php, html, foreach, while-loop

我有一个`while/for`循环，`foreach`里面有一个循环。阅读代码将使我在逻辑方面尝试实现的目标不言自明。

用外行的话来说，我正在尝试用 PHP 创建一个日历。该`foreach`语句创建 35 个单元格，用于日历界面，4 周，7 天，5 x 7 = 35。

循环已经花费了 4 月 (30)的`while`天数，并尝试在每个单元格中的范围为 1-30。

但是，在实现下面的代码时，每个数字都会被迭代 30 次。

```
$i = 1;
while ($i <= 30){
    foreach ($this->cells as $cells){
        foreach ($cells as $key => $object){
            echo "<td>" . $i . "</td>";                     
            if($object % 7 == 0){
                echo "</tr><tr>";
            }
        }  
    }
    $i++;   
} 
```

我试过这个：

```
$i = 1;
while ($i <= 30){
    foreach ($this->cells as $cells){
        foreach ($cells as $key => $object){
            echo "<td>" . $i . "</td>";  $i++;                              
            if($object % 7 == 0){
                echo "</tr><tr>";
            }
        }  
    }

} 
```

当我只想要1-30时，它不是每次输出1-30多次，而是输出1-35。

我尝试了一个 for 循环，结果它打印了每个数字的许多。对于循环代码：

```
for ($i = 1; $i <= 30; $i++){
                foreach ($this->cells as $cells){
                    foreach ($cells as $key => $object){
                echo "<td>" . $i . "</td>";             
                if($object % 7 == 0){
                    echo "</tr><tr>";
                }
                    }  
                }   
            } 
```

`$this->cells`是数组中 1-35 的范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:45:03.287

```
$i=0;
foreach ($this->cells as $cells){
    foreach ($cells as $key => $object){
        if($i<=30)
            echo "<td>" . $i . "</td>";
        $i++;                              
        if($object % 7 == 0){
            echo "</tr><tr>";
        }
    }
} 
```

试试这个代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:53:28.343

```
$i=0;
while ($i++ < 35){
    echo '<td>' . ($i <= 30 ? $i : '&nbsp;') . '</td>';
    if($i % 7 == 0) {
        echo '</tr><tr>';
    } 
} 
```

我不太确定为什么你需要做两个循环，你可以用一个来完成（除非你确实需要循环`$this->cells`，在这种情况下忽略这个答案：p）

# arrays - MongoDB 更新（将项目列表插入数组）

> ID：10383682
> 
> 赞同：8
> 
> 时间：2012-04-30T12:25:43.170
> 
> 标签：arrays, mongodb, mongodb-query

我想在 Mongo 的多行数组中添加几个项目。我怎样才能做到这一点？

我想从这个开始：

```
{'x': 'h', arr: [1,2,3] }
{'x': 'h', arr: [1,3] } 
```

并添加数组 [6,8]，其中 x 等于 'h'：

```
{'x': 'h', arr: [1,2,3,6,8] }
{'x': 'h', arr: [1,6,8] } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T13:04:03.203

我认为您正在寻找的是 $pushAll 运算符。看看这里：

[http://docs.mongodb.org/manual/reference/operator/pushAll/#pushall](http://docs.mongodb.org/manual/reference/operator/pushAll/#pushall)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-01T03:54:30.630

如果您有一个名为 MongoDB 的集合`yourCollection`和一个名为 的记录`x`，您将使用以下内容更新子数组：

> db.test.update( {"name":"x"}, {"$pushAll" : {arr : [1, 2, 3]}} )

这里重要的关键字是[$pushAll](http://cn.docs.mongodb.org/manual/reference/operator/pushAll/)。您可以使用它将项目添加到单个记录属性内的数组中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-08T21:08:45.130

最简单的方法是使用传统的更新操作

```
 db.urColl.update(
    { x: "h" },
    { $push: { arr: { $each: [6,8] } } },
    { multi: true }
  );` 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T18:39:41.623

如果你想更新多条记录，重要的是`true`作为第四个参数传递给更新函数：

```
db.test.update( {"name": "x"}, {"$pushAll": {"arr": [1, 2, 3]}}, false, true) 
```

根据 update() 的 MongoDB shell 语法：

```
db.collection.update( criteria, objNew, upsert, multi ) 
```

*   **upsert** - 如果记录不存在，插入一个。Upsert 只插入一个文档
*   **mutli** - 指示是否应该更新所有符合条件的文档，而不是只更新一个

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-23T12:10:18.720

`$pushAll`
2.4 版后已弃用：改用`$push`操作符`$each`。

运算符将指定的`$pushAll`值附加到数组中。

运算符具有以下`$pushAll`形式：

```
{ $pushAll: { <field>: [ <value1>, <value2>, ... ] } } 
```

如果您指定单个值，`$pushAll`将表现为`$push`.

# java - 有没有办法使用java找到操作系统名称？

> ID：10383688
> 
> 赞同：8
> 
> 时间：2012-04-30T12:26:06.610
> 
> 标签：java

有没有办法使用 java 找到操作系统名称？

我试过下面的代码，但它会返回看起来像（Linux，windows ..）

```
System.getProperty("os.name") 
```

我需要检测以下格式

> Linux - “ubuntu, mandriva ..”，windows - “xp,vista ...”

对不起我的英语不好 ：-（ ！！！

任何的想法 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T12:28:33.193

您可以使用`System.getProperty()`获取以下属性：

*   `os.name`: 操作系统名称
*   `os.arch`: 操作系统架构
*   `os.version`: 操作系统版本

就您而言，我相信您正在寻找该`os.version`物业。的[javadocs](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)包含`System.getProperties()`您可以检索的属性的完整列表。

**编辑**

我刚刚在 Linux Mint 中对此进行了测试，看来获取`os.version`属性实际上返回的是内核版本，而不是发行版：

```
Linux
amd64
2.6.38-8-generic 
```

找到[这篇文章后](https://stackoverflow.com/questions/4334426/find-name-of-linux-distro-from-java)，似乎没有可靠的方法可以通过 Java API 找到您正在运行的 Linux 发行版。

如果您知道自己在 Linux 中运行，则可以改为从 Java 运行以下系统命令之一，但您必须 grep/解析出发行版：

*   `cat /etc/*-release`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T12:29:34.907

这可能会帮助您：

```
System.out.println("\nName of the OS: " + System.getProperty("os.name"));
System.out.println("Version of the OS: " + System.getProperty("os.version"));
System.out.println("Architecture of the OS: " + System.getProperty("os.arch")); 
```

编辑：这是它在 Windows 下返回的内容：

```
Name of the OS: Windows XP
Version of the OS: 5.1
Architecture of the OS: x86 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:30:41.513

您可以查询一些系统属性。查看[教程](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)以了解详细信息。这 3 个部分或全部的组合应该可以帮助您：

```
System.getProperty("os.arch")
System.getProperty("os.name")
System.getProperty("os.version") 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-30T12:27:54.133

看看： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getProperties%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#getProperties%28%29)

属性：'os.name'

# c# - 跟踪字符串连接SQL的方式

> ID：10383691
> 
> 赞同：0
> 
> 时间：2012-04-30T12:26:18.313
> 
> 标签：c#, asp.net, sql, sql-server

我们有一个遗留应用程序，它构建大量字符串并在数据库上运行它们。我们希望有一种方法可以从其中一个查询回溯到运行它的代码区域。第一个想法是手动将 GUID 添加到所有查询中，以便我们可以从现在开始跟踪它们，但有没有更简单的方法？

使用标准库从 .NET 3.5 SP1 连接到 SQL Server 2008 R2 机器，没什么特别的。

标准库上是否有一个事件，也许我们可以连接并使用反射来找出每次调用它的位置以添加相同的 GUID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:30:19.560

如果有共享数据访问基础架构，您可以在每次数据库调用之前输出完整的堆栈跟踪。

这不是一个便宜的操作，因此请考虑仅在您的调试构建和环境中执行此操作。

见[`StackTrace`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)课堂。

# java - 在耶拿中以通用方式查询 RDF 模型的最佳方法是什么？（sparql 或使用集合和迭代器）

> ID：10383692
> 
> 赞同：0
> 
> 时间：2012-04-30T12:26:19.467
> 
> 标签：java, rdf, semantic-web, jena

我想为我编译的 RDF 模型创建一个轻微的通用查询接口。

我必须访问我的数据：

1-使用内置的耶拿迭代器/状态/资源/等....

2-创建一些 SPARQL

但是为了创建 SPARQL 或 RDQL，我必须调用将我的 SPARQL 变量绑定到 java 变量，因为在我的 SPARQL 中我可以有多种变量，我不知道如何使其通用。

那么使 RDF 查询接口通用化的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:38:43.497

使用 SPARQL，而不是 RDQL。今天的大多数系统都实现了作为 W3C 标准的 SPARQL。使用 SPARQL，就像在 SQL 中一样，您可以使用`*`绑定在三元组模式中出现的所有变量。例子：

```
SELECT * WHERE {
   ?s a :Person .
   ?s :name ?name .
   ?s :birthdate ?birthdate .
} 
```

大多数 SPARQL 客户端库允许您获取所有变量。例如，在 Jena ARQ 中，您会发现`QuerySolution`有一个方法 `Iterator<String> varNames()`，该方法将返回所有变量名称。您可以遍历这些并使用`get`同一类中的方法来检索行值。

SPARQL 的巨大优势在于，由于它是一个标准，您可以使用遵循规范的不同三元组存储。

# jquery - 如何在jQuery中选择几个具有尊重级别的孩子

> ID：10383697
> 
> 赞同：0
> 
> 时间：2012-04-30T12:26:31.447
> 
> 标签：jquery

我如何在 jQuery 中选择具有尊重子级的父 div 中的所有子级？

例如，我想获取所有 myDiv1 输入，而不是 myDiv2：

```
<div id="myDiv1">
   <input name="child1"/><!-- level 1 -->
   <p><input name="child2"/></p><!-- level 2 -->
   <div><p><input name="child3"/></p></div><!-- level 3 -->
</div>

<div id="myDiv2">
   <input name="child1"/><!-- level 1 -->
   <p><input name="child2"/></p><!-- level 2 -->
   <div><p><input name="child3"/></p></div><!-- level 3 -->
</div> 
```

我测试了 $('#mydiv1 input') 或 $('#mydiv1 > input') 但没有工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:27:57.253

`$('#mydiv1 input')`将选择`input`内部的所有元素`#mydiv1`- 无论多深。

`$('#mydiv1 > input')`只会选择(ie )`input`的直接子元素`#mydiv1``child1`

如果这对您不起作用，则说明您的代码有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:30:42.663

如果你想获得第一级.children 只会看那里。

我不确定我是否正确理解了这个问题。

# image - 图像测量：相关性和最大偏差测量

> ID：10383699
> 
> 赞同：0
> 
> 时间：2012-04-30T12:26:37.423
> 
> 标签：image, matlab, correlation

我有两个尺寸不同的图像，我想比较那些使用相关性（在 MATLAB corr2 中），最大偏差度量如何做到这一点？

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:54:20.697

这取决于，如果一个是另一种用途的缩小版本：

```
B = imresize(A, [numrows numcols]) 
```

所以它们的大小相同。

如果是那个比另一个大，只需填充图像：

```
B = padarray(A, padsize) 
```

然后你就可以使用这些功能了。

# jquery - 我的 Drupal 站点的 css 基本路径

> ID：10383703
> 
> 赞同：0
> 
> 时间：2012-04-30T12:27:27.540
> 
> 标签：jquery, css, .htaccess, drupal

我正在使用 Drupal 7，并且正在移动我的站点新主机。但是当我点击我的网站时，我的自定义 CSS 没有工作。

一般：

```
<link type="text/css" rel="stylesheet" href="http://mysite.net/sites/default/files/css/mycss.css" media="all" /> 
```

但我的代码在这个：

```
 <!--//--><![CDATA[//><!--
    jQuery.extend(Drupal.settings, {"basePath":"\/","pathPrefix":"en\/","ajaxPageState":
//MY CODES//
    //--><!]]> 
```

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T05:45:00.447

默认目录的权限是 555，因此不能公开访问。您可以将其放置在主题目录中的其他位置。但是不要公开授予默认目录的权限，因为 settings.php 位于默认目录中。

# java - 使用 android listviews 时抛出异常 java.lang.NullPointerException

> ID：10383704
> 
> 赞同：0
> 
> 时间：2012-04-30T12:27:32.300
> 
> 标签：java, android

我对 Android 和 Java 还是很陌生。正在学习 Android Listviews，并通过改编本教程中的代码来做到这一点：[http ://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/](http://w2davids.wordpress.com/android-listview-with-iconsimages-and-sharks-with-lasers/)

但是，我遇到了这个问题，在执行`stockName.setText(stock.name)`.

这是我的代码：

**股票.java**

```
package sg.jon.stocks;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class Stocks extends Activity {

    static final String STOCK_API_URL = "<removed>";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        new UpdateStockData().execute();
    }

    private class UpdateStockData extends AsyncTask<Void, Integer, JSONObject>{

        protected JSONObject doInBackground(Void... params) {
            Log.v("stocks", "Starting HTTP request");
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(STOCK_API_URL);
            String response = null;
            try {
                ResponseHandler<String> responseHandler=new BasicResponseHandler();
                response = httpclient.execute(httpget, responseHandler);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.v("stocks", "Finished HTTP request");
            Log.v("stocks", "Starting to parse JSON");
            JSONObject jsonResult = null;
            try {
                jsonResult = new JSONObject(response.replace("{}&& ",""));
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Log.v("stocks", "JSON parsing complete");
            return jsonResult;
        }

        protected void onPostExecute(JSONObject jsonResult){
            String[] stockNames = null;
            String[] stockPrices = null;
            List<Stock> stocks = null;
            String label = null;
            try {
                // label => As at dd-mm-yyyy h:mm AM/PM
                label = jsonResult.getString("label");
                JSONArray stocksJSONArray = jsonResult.getJSONArray("items");
                stockNames = new String[stocksJSONArray.length()];
                stockPrices = new String[stocksJSONArray.length()];
                stocks = new ArrayList<Stock>();
                for(int i=0; i<stocksJSONArray.length(); i++){
                    Stock stock = new Stock();
                    stock.name = stocksJSONArray.getJSONObject(i).getString("N");
                    stock.price = stocksJSONArray.getJSONObject(i).getString("LT");
                    stocks.add(stock);
                    stockNames[i] = stocksJSONArray.getJSONObject(i).getString("N");
                    stockPrices[i] = stocksJSONArray.getJSONObject(i).getString("LT");

                }
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Toast.makeText(Stocks.this, label, Toast.LENGTH_LONG).show();
            ListView stocksListView = (ListView) findViewById(R.id.stocksListView);

            stocksListView.setAdapter(new StockArrayAdapter(
                    getApplicationContext(), R.layout.list_row, stocks)
);

        }

    }

    public class Stock
    {
        public String name;
        public String price;

        public Stock()
            {
                // TODO Auto-generated constructor stub
            }

        public Stock(String name, String price)
            {
                this.name = name;
                this.price = price;
            }

        @Override
        public String toString()
            {
                return this.name;
            }
    }

    public class StockArrayAdapter extends ArrayAdapter<Stock> {
        private Context context;
        private TextView stockName;
        private TextView stockPrice;
        private List<Stock> stocks = new ArrayList<Stock>();

        public StockArrayAdapter(Context context, int textViewResourceId,
                List<Stock> objects) {
            super(context, textViewResourceId, objects);
            this.context = context;
            this.stocks = objects;
        }

        public int getCount() {
            return this.stocks.size();
        }

        public Stock getItem(int index) {
            return this.stocks.get(index);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View row = convertView;
            if (row == null) {
                // ROW INFLATION
                Log.d("xml", "Starting XML Row Inflation ... ");
                LayoutInflater inflater = (LayoutInflater) this.getContext()
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.list_item, parent, false);
                Log.d("xml", "Successfully completed XML Row Inflation!");
            }

            // Get item
            Stock stock = getItem(position);
            Log.v("stk",stock.name);
            Log.v("stk",stock.price);

            stockName = (TextView) row.findViewById(R.id.stockName);
            stockPrice = (TextView) row.findViewById(R.id.stockPrice);

            stockName.setText(stock.name);
            stockPrice.setText(stock.price);

            return row;
        }
    }

} 
```

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/stocksListView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

**list_item.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp"
    android:textColor="#fff">
</TextView> 
```

**list_row.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/stockName"
        android:paddingLeft="10dip"
        android:layout_weight="0.5"
        android:layout_gravity="center"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <TextView
        android:id="@+id/stockPrice"
        android:layout_gravity="right"
        android:paddingRight="10dip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

这是日志中显示的错误：

```
04-30 12:07:16.835: W/dalvikvm(1657): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
04-30 12:07:16.883: E/AndroidRuntime(1657): FATAL EXCEPTION: main
04-30 12:07:16.883: E/AndroidRuntime(1657): java.lang.NullPointerException
04-30 12:07:16.883: E/AndroidRuntime(1657):     at sg.jon.stocks.Stocks$StockArrayAdapter.getView(Stocks.java:191)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.AbsListView.obtainView(AbsListView.java:2033)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.ListView.onMeasure(ListView.java:1155)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.View.measure(View.java:12723)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.View.measure(View.java:12723)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.View.measure(View.java:12723)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:812)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.View.measure(View.java:12723)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2092)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.View.measure(View.java:12723)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1064)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.os.Looper.loop(Looper.java:137)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at java.lang.reflect.Method.invokeNative(Native Method)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at java.lang.reflect.Method.invoke(Method.java:511)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-30 12:07:16.883: E/AndroidRuntime(1657):     at dalvik.system.NativeStart.main(Native Method) 
```

谢谢 （：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:42:04.450

我有你的问题，请更换

```
row = inflater.inflate(R.layout.list_item, parent, false); 
```

和

```
row = inflater.inflate(R.layout.list_row, parent, false); 
```

我不明白' **list_item.xml** '的需要是什么

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:54:41.960

你的问题是这一行：

```
row = inflater.inflate(R.layout.list_item, parent, false); 
```

您正在尝试使该行膨胀并执行以下操作：

```
stockName = (TextView) row.findViewById(R.id.stockName);
stockPrice = (TextView) row.findViewById(R.id.stockPrice);
stockName.setText(stock.name);
stockPrice.setText(stock.price); 
```

但是，由于该布局中不存在任何 id，stockName 和 stockPrice 为空，因此当您尝试使用它们来设置您的值时，您将获得 NPE。

将该布局更改为 R.id.list_row ，您应该没问题。

# spam - 一个奇怪的垃圾邮件，在我的网站上有一个单词错误

> ID：10383705
> 
> 赞同：3
> 
> 时间：2012-04-30T12:27:37.253
> 
> 标签：spam

我有一个广告板。大约一年前，我开始通过 ContactUs 和 SendMessage 表单收到一封奇怪的垃圾邮件。两种形式都有一个验证码。IP 地址非常不同：Asya、Africa、South America、North America、Europe ... ... 指示的电子邮件地址具有真实域。消息由一个短语组成，并且至少有一个单词有错误。我一天收到大约 10-30 条消息（不是一次全部），所有消息和 IP 地址都不同。以下是几个示例（姓名、电子邮件地址、IP 地址、消息）：

Lily，mlittman@cs.br，188.143.232.12，Kewl，你应该想出这个。出色的！

Priya，helpdesk@earthlightsjewelry.com，95.211.171.55，致命的准确答案。你中了bllseye！

Surya，nsaussier@fightaidsmonaco.com，83.133.110.36，我真的很困惑，这回答了我所有的问题。

富兰克林，mariajames@tiscali.it，189.2.186.102，干杯朋友。我确实喜欢写作。

Tomblok, oswapini@seznam.cz, 92.96.222.230, 最佳答案！这真的是它的心脏！

Safdar, schuhmacher@nabu-hamburg.de, 188.143.232.12, 人们通常会为此付钱给我，而你却把它给了！

托尼，groups@yankees.com，83.133.110.36，很高兴找到一个通过问题思考的人

摇滚，20ramonrevilla@hotmail.com，188.143.232.12，感谢上帝！有脑子的人说话！

Saya，claire@claireanderson.com，83.133.110.36，

Serginho, libr@stgvs.tpc.edu.tw, 98.216.34.115,我真的很喜欢这样免费、简洁、可靠的数据。

这是什么？谁在发送，是人还是机器？为什么？如何？如何保护表格？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T13:09:07.133

最新的自动垃圾邮件软件（例如 xrumer）可以自动识别任何验证码（和重新验证码）代码。如果您想要更严格的垃圾邮件保护 - 使用[uniqpin.com](http://uniqpin.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T22:29:27.240

第一步应该是确保您的软件是最新的。可能是垃圾邮件发送者通过您的验证码找到了某种方法（这实际上很常见），并且您使用的软件有一个更新可以解决这个问题，等待您安装。如果您使用的软件在几个月内没有任何更新，请考虑迁移到维护更积极的软件。

一些 CMS 软件允许需要版主批准。这将显着减少垃圾邮件，并且只有您会看到它（因为您永远不会批准它）。这对您来说更有用，但如果他们得到适当的警告，大多数垃圾邮件发送者甚至不会尝试。

另一种选择是增加验证码的难度（如上所述）或在发布之前引入额外的要求。一个好的方法是使用电子邮件验证创建帐户。很少有垃圾邮件发送者会花那么长的时间在您的网站上发帖，特别是如果您还使用[nofollow](https://en.wikipedia.org/wiki/Spam_in_blogs#nofollow)（这消除了垃圾邮件的好处：没有 PageRank 增加）。

最后，您可以尝试自己解决问题。听起来您有来自开放代理或受损 Web 服务器的 bot-spam。由于真实用户往往不会*从*Web 服务器上网，因此您可以执行快速测试，以增加任何打开端口 80 的 IP 的验证码难度（甚至阻止发布）。

您网站的软件可能有也可能没有垃圾邮件检测扩展。我见过 URI DNSBL 检查器（它将阻止已知的不良网站发布帖子），甚至是贝叶斯垃圾邮件检测（可训练的内容过滤器）。

# javascript - 使用 ID 和 JQUERY 将文本放入 DIV 元素？

> ID：10383708
> 
> 赞同：3
> 
> 时间：2012-04-30T12:27:48.747
> 
> 标签：javascript, jquery, html

我一直在寻找一种方法来做到这一点，但大多数方法似乎过于冗长或复杂。我有一个按钮和一个不可见的按钮`<div>`，按下按钮我希望将文本写入`<div>`使用 jquery。

说这是我的 html，包括`<div>`元素：

```
<button id="buttonid"></button>

<div id="invisible"></div> 
```

我的 jquery 会开始这样的事情吗？

```
 $(document).ready(function(){
        $("#buttonid").click(function(){
           //WHAT COMES HERE? TO ADD TEXT TO #invisible ?
        });
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:29:34.130

```
$("#buttonid").click(function(){
     $("#invisible").text("your text").show();
}); 
```

笔记：

*   我添加了`.show()`，假设 div 一开始是不可见的
*   如果您打算插入 HTML 标记而不是纯文本，请使用`.html()`而不是。`.text()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T12:29:25.100

如果您只想更改 div 的 text/html，请使用`$.text()`or `$.html()`。

```
$(document).ready(function(){
    $("#buttonid").on("click", function(){
       $("#invisible").html('Foo');
    });
}); 
```

当然，此时它仍然是隐藏的，但是您可以使用任何一种显示方法来显示它，例如`$.show()`、 或`$.fadeIn()`等：

```
$(document).ready(function(){
  $("#buttonid").on("click", function(){
    $("#invisible").html('Foo').fadeIn();
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:33:21.580

如果您不想更改 div 的现有内容，请使用：

```
$("#invisible").append("your text"); 
```

除此以外

```
$("#invisible").text("your text");
//OR
$("#invisible").html("your text"); 
```

# bash - cd 在 bash 脚本中没有按预期工作

> ID：10383709
> 
> 赞同：1
> 
> 时间：2012-04-30T12:27:52.737
> 
> 标签：bash, unix, cron, cd

呃..stackoverflow上有一个标题几乎相同的问题，但我的问题有所不同。我的代码是这个

```
cd /oracle_data/indata/VXMLIVR
ls -d SMSR > temporary4.txt
while read smsr_line;do echo $smsr_line;cd $smsr_line;./smsr_alarm;cd ..;done < temporary4.txt
ls -d SMSC > temporary3.txt
while read smsc_line;do echo $smsc_line;cd $smsc_line;./smsc_alarm;cd ..;done < temporary3.txt
ls -d HCIVR5 > temporary.txt
while read hcivr_line;do echo $hcivr_line;cd $hcivr_line;./hcivr_alarm;cd ..;done < temporary.txt
ls -d HCIVR6 > temporary.txt
while read hcivr_line;do echo $hcivr_line;cd $hcivr_line;./hcivr_alarm;cd ..;done < temporary.txt
ls -d HCIVR7 > temporary.txt
while read hcivr_line;do echo $hcivr_line;cd $hcivr_line;./hcivr_alarm;cd ..;done < temporary.txt
ls -d HCIVR8 > temporary.txt
while read hcivr_line;do echo $hcivr_line;cd $hcivr_line;./hcivr_alarm;cd ..;done < temporary.txt
ls -d IVR* > temporary2.txt
while read ivr_line;do echo $ivr_line;cd $ivr_line;./ivr_alarm;cd ..;done < temporary2.txt
rm temp* 
```

我已将此脚本保存为 vas_alarm。当我删除第一行（cd /oracle_data/indata/VXMLIVR）时，手动执行 cd /oracle_data/indata/VXMLIVR 并运行 ./vas_alarms 一切正常。但是当我像这样运行整个脚本时：

```
oracle@sunv440$/oracle_data/indata/VXMLIVR/vas_alarms
: No such file or directory/vas_alarms: line 1: cd: /oracle_data/indata/VXMLIVR 
```

我得到一个错误。我哪里错了？问题是我的脚本保存在 /oracle_data/indata/VXMLIVR 中，我需要在输入此位置后运行它。此外，脚本必须保存在 cron 文件中。任何解决方法也可以。我的主要目标是安排 /oracle_data/indata/VXMLIVR/vas_alarms

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:44:57.447

当您的文件中有一些不可见的字符时，就会发生这种情况。

例如：

```
$ touch hello

$ echo $'\rhello'
hello

$ ls $'\rhello'
hello: No such file or directory 
```

您可以使用`xxd`//查看二进制表示`hexdump`：`od`

```
$ echo $'\rhello' | xxd
0000000: 0d68 656c 6c6f 0a                        .hello. 
```

`xxd`将所有不可打印的字符打印为`.`s（点）。
请注意，这些是`.`开头的（点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:25:17.357

我有一些评论，但由于评论工具不支持代码片段，我将其发布为答案。

您的代码确实可以使用一些重构。您应该避免重复代码，并且应该避免使用临时文件。您应该避免解析`ls`. 您有时会覆盖临时文件，有时不会。

`cd ..`涉及符号链接时有点脆弱。一个常见的习惯用法是`cd`在子shell 中做，这将导致父shell 保留在当前目录中。

所以这就是我重构的尝试；

```
#!/bin/sh

cd /oracle_data/indata/VMXLIVR

while read cmd dirs; do
    for dir in $dirs; do
        for subdir in $dir/*/.; do
            echo "$subdir"
            ( cd "$subdir"; ./"$cmd"; )
        done
    done
done <<HERE
    smsr_alarm  SMSR
    smsc_alarm  SMSC
    hcivr_alarm HCIVR[5678] 
    ivr_alarm   IVR*        
HERE 
```

如果某些子目录的名称中包含空格，这将中断。我正在对目录结构做出一些假设，这些假设在您的文本中隐含但没有清楚地展示。

# php - 错误消息：脚本头过早结束

> ID：10383711
> 
> 赞同：2
> 
> 时间：2012-04-30T12:27:54.963
> 
> 标签：php, mysql, sql-server, database

这是有效的，但突然间我收到了这个错误消息。“错误消息：脚本头过早结束：cust.php”

```
<?php
    //contact to database
    $user = '';
$pass = '';
$db_name=""; // Database name 
$tbl_name="cust"; // Table name

// Create a connection to the MySql server
$conn = mysql_connect('', $user, $pass);
mysql_select_db("$db_name")or die("cannot select DB");

//Get data in local variable
 $v_Fname=$_POST['First_Name'];
 $v_Lname=$_POST['Last_Name'];
 $v_FAdd=$_POST['First_Add_Line'];
 $v_postCode=$_POST['Postcode'];
 $v_Num=$_POST['ContactNum'];
 $v_Email=$_POST['Email'];

// check for null values
if ($v_Fname==""  or $v_Lname=="" or $v_FAdd==""  or $v_postCode==""  or $v_Num=="" or         $v_Email=="")
echo "All fields must be entered, hit back button and re-enter information";
else{
$query="INSERT INTO       $tbl_name(First_Name,Last_Name,First_Add_Line,Postcode,ContactNum,Email) values('$v_Fname','$v_Lname','$v_FAdd','$v_postCode','$v_Num','$v_Email')";
mysql_query($query)  or die(mysql_error());
echo "You have registered as a Customer, Thank you";
echo "<BR>";
echo "<a href='index.html'>Back to main page</a>";
}

mysql_close();

?> 
```

请帮忙，提前谢谢你:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:49:14.090

你试试这个

```
mysql_select_db("$db_name",$conn)or die("cannot select DB"); 
```

此外，您应该使用`mysql_real_escape_string()`每个帖子变量。

谢谢。

# iphone - IOS 5 - 从另一个 ViewController 调用 ViewController

> ID：10383729
> 
> 赞同：4
> 
> 时间：2012-04-30T12:29:09.520
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, storyboard

由于我对 IOS 开发非常陌生，因此我并不真正了解开发 iPhone 应用程序时要使用的所有机制。

在这里，我想做的是在执行 segue 后调用另一个控制器。

上下文 ：

我有我的第一个页面，它基本上包含一个登录页面，带有一个用户/密码系统。我创建了一个通过单击提交按钮调用的 segue。这是代码：

```
- (IBAction)Connect:(UIButton *)sender
{
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
                          @"passwordsample", @"usernamesample", 
                          nil];

    if ((![[dict allKeys] containsObject:TFLogin.text])) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Login or password incorrect" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        NSLog(@"Connection Not OK");
    }
    else {
        [self performSegueWithIdentifier:@"LoginSegue" sender:sender];
        NSLog(@"Connection OK");
    }
} 
```

这是 prepareForSegue 函数：

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    HomeController *home = (HomeController *) segue.destinationViewController;
    home.sentLogin = TFLogin.text;
} 
```

事实是，当我单击提交按钮（在登录页面上）时，日志显示用户已正确找到，然后我收到如下错误：

```
2012-04-30 11:24:44.630 AppName[1066:f803] -[UINavigationController setSentLogin:]: unrecognized selector sent to instance 0x6d73c30
2012-04-30 11:24:44.630 AppName[1066:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UINavigationController setSentLogin:]: unrecognized selector sent to instance 0x6d73c30' 
```

这是故事板：

![故事板](../Images/083cd787ed08c508a9baacfd2f04d1b4.png)

*第二个 NavigationController 将替换为 Tab Bar Controller。但是对于一些测试，我放了这个。*

有人可以指导我，告诉我我做错了什么和/或向我发送一些关于故事板和导航的最新指南吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:26:41.993

ProjectManagementViewController *projectManagementView =[[ProjectManagementViewController alloc]initWithNibName:@"ProjectManagementViewController" bundle:nil];

```
 [self.navigationController pushViewController:projectManagementView animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:41:06.637

从错误的外观来看，segue.destinationViewController 似乎不是您认为的那样。听起来你有一个导航控制器。

如果没有故事板，诊断有点困难，但请尝试：

```
UINavigationController *nav = (UINavigationController*)segue.destinationViewController;
HomeController *home = (HomeController*)nav.topViewController; 
```

如果这不起作用，您可能需要在第二行放置一个断点并查看 nab 控制器以查看 HomeController 在其堆栈中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:46:50.570

你可以像在 ios5 中那样做：

```
[self performSegueWithIdentifier:@"your-segue-name" sender:self]; 
```

您将创建从一个视图到另一个视图的转场，但不是通过按钮或其他任何东西，只需从您的第一个视图拖动到第二个视图您的转场，当您的过程完成后，只需调用上面的代码。

希望这可以帮助..

编辑：您需要在情节提要中为您的segue命名，只需单击它，然后在右侧检查器中命名..

# mysql - 按多个标签选择照片

> ID：10383731
> 
> 赞同：6
> 
> 时间：2012-04-30T12:29:16.843
> 
> 标签：mysql, sql

我有三个 MySQL 表——照片、标签和标签照片——以及照片和标签之间的 m:n 关系。

```
Photos:     id | filename | ...
Tags:       id | name
Tagsphotos: photo | tag 
```

我想选择所有具有这种条件的照片：

```
(tagged as "dirty" AND tagged as "road") AND (tagged as "light.front" OR tagged as "light.side") AND (tagged as "perspective.two-point") 
```

...这意味着我想找到所有带有脏路的照片，采用两点透视法，无论是侧光还是前光。

我该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:37:55.327

我认为您将不得不将标签表加入照片表四次......非常丑陋。

```
SELECT Photos.*
FROM
  Photos
  JOIN (
    Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
  ) t1 ON (t1.photo = Photos.id)
  JOIN (
    Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
  ) t2 ON (t2.photo = Photos.id)
  JOIN (
    Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
  ) t3 ON (t3.photo = Photos.id)
  JOIN (
    Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
  ) t4 ON (t4.photo = Photos.id)
WHERE
      (t1.name = 'dirty' AND t2.name = 'road')
  AND (t3.name = 'light.front' OR t3.name = 'light.side')
  AND (t4.name = 'perspective.two-point') 
```

子查询可能会更快：

```
SELECT *
FROM Photos
WHERE
  Photos.id IN (
    SELECT Tagspohotos.photo
    FROM Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
    WHERE Tags.name = 'dirty'
  )
  AND Photos.id IN (
    SELECT Tagspohotos.photo
    FROM Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
    WHERE Tags.name = 'road'
  )
  AND Photos.id IN (
    SELECT Tagspohotos.photo
    FROM Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
    WHERE Tags.name = 'light.front' OR Tags.name = 'light.side'
  )
  AND Photos.id IN (
    SELECT Tagspohotos.photo
    FROM Tagsphotos JOIN Tags ON (Tags.id = Tagsphotos.tag)
    WHERE Tags.name = 'perspective.two-point'
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:42:00.983

抱歉，我没有意识到您正在使用 MySQL - 下面给出了更新的答案。

假设每个标签只能为每张照片指定一次（即一张照片不能被多次标记为“脏”）：

```
SELECT      P.id,
            P.[filename]
FROM        Photos P
INNER JOIN  Tagsphotos TP ON TP.photo = P.id
INNER JOIN  Tags T ON TP.tag = T.id
INNER JOIN  (
        SELECT  'dirty' name,
                10 [weight]
        UNION
        SELECT  'road' name,
                10 [weight]
        UNION
        SELECT  'perspective.two-point' name,
                10 [weight]
        UNION
        SELECT  'light.front' name,
                1 [weight]
        UNION
        SELECT  'light.side' name,
                1 [weight]
) R ON T.name = R.name
GROUP BY    P.id,
            P.[filename]
HAVING  SUM(R.[weight]) >= 31 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:36:23.007

假设照片和标签列是 id：

```
select p.* from Photos p, Tags t, Tagsphotos tp
where p.id = tp.photo and t.id = tp.tag
and t.tagged in ("dirty", "road", "perspective.two-point", "light.front")
group by p.photo
having count(distinct t.tagged) = 4

UNION

select p.* from Photos p, Tags t, Tagsphotos tp
where p.id = tp.photo and t.id = tp.tag
and t.tagged in ("dirty", "road", "perspective.two-point", "light.side")
group by p.photo
having count(distinct t.tagged) = 4 
```

# entity-framework - EF 电动工具 - 排除表格

> ID：10383734
> 
> 赞同：1
> 
> 时间：2012-04-30T12:29:29.800
> 
> 标签：entity-framework

我已经设法调整 EF 电动工具的 tt 模板来创建我喜欢的代码，但我无法做的一件事是找到一种方法来排除某些表。例如，当您向数据库添加图表支持时，它也会尝试包含系统图表表。我希望有一种方法可以告诉工具忽略这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:39:12.910

目前无法选择哪些表应该用于逆向工程（Beta 2），但根据 ADO.NET 团队博客，这是他们在 backlog 中已经拥有的功能，因此希望它将成为未来 beta 或 RTM 的一部分。

# grails - Grails 自定义环境

> ID：10383739
> 
> 赞同：6
> 
> 时间：2012-04-30T12:29:43.287
> 
> 标签：grails

当我尝试通过设置环境名称来使用grails中的自定义环境时

```
grails -Dgrails.env=demo run-app 
```

我只收到一条错误消息说

```
Script 'demo' not found, did you mean: ... 
```

看来这个问题只存在于windows环境中——在linux上，一切正常……

抱歉，我忘了说我使用的是 Grails v 2.0.3

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T13:33:51.417

找到了解决方案：

windows 需要在参数两边加上引号：

```
grails "-Dgrails.env=demo" run-app 
```

这适用于两个操作系统：windows 和 linux！

**更新：**

似乎只有 windows powershell 需要引号，但 linux 也接受它们：

```
grails "-Dgrails.env=demo" run-app 
```

对于 windows cmd.exe，您必须使用不带引号的语句：

```
grails -Dgrails.env=demo run-app 
```

可怕。

# php - 在 textarea 中添加回车

> ID：10383747
> 
> 赞同：1
> 
> 时间：2012-04-30T12:30:38.230
> 
> 标签：php, html, textarea, carriage-return

我在数据库中有一个类似 : 的字符串`First line\r\nSecond Line`。但是，当我将此文本放在 textarea 中时，会`\r\n`出现并且没有回车。

那么如何在 textarea 中添加回车呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:37:24.903

'\n' 是一个符号，表示换行符。但是，在 DB 的文本字段中添加 '\n' 不会将符号转换为它的含义。

\n 应该可以工作，但您需要将其正确打印到您的 html 中（所以不是“\\n”或“\n”，而是“\n”）参见：http: [//jsfiddle.net/thqu3/](http://jsfiddle.net/thqu3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:34:06.000

我猜您的数据库已经包含反斜杠和`r`或的替换字符`n`。这不会那么好。请确保您在那里保存了真正的换行符。那么一切都会好起来的，你不需要额外的更换。

如果你不能改变它，你可以用这个替换它们：

```
$str = preg_replace('/(\\\r)?\\\n/', "\n", $str); 
```

# c++ - VST SDK & VST 模块 SDK

> ID：10383752
> 
> 赞同：3
> 
> 时间：2012-04-30T12:30:44.267
> 
> 标签：c++, vst

我想用编辑器创建一个面向模式的 VST MIDI 插件（没有音频处理，只是一个带有强大模式编辑器和随机发生器的 UI 编辑器）。

我已经阅读了**糟糕**的VST 和 VST 模块 SDK 文档。我希望你们中的一些人可以回答我的问题：

*   我做对了吗：VST SDK 仅用于音频效果和乐器，而 VST 模块 SDK 仅用于 MIDI 效果？
*   VST 模块 SDK 的所有示例都没有运行（它们需要 VSTGUI，它不在 VST 模块 SDK 中。我尝试使用以下 VSTUI：SDK 2.4、SDK 3.5.1 或 VSTGUI.sf 但我无法编译它. 它以大量错误告终。

那里有人可以指出我正确的方向吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:04:03.780

是的，VSTGUI 源代码是一团糟。几年前它经历了一次非常糟糕的重写，VST SDK 也是如此。顺便说一句，术语“模块 SDK”基本上是指 VST SDK 的相同方式。自版本 3 以来，该术语可能更频繁地使用，因为 VST3 插件在这方面进行了扩展。

无论如何，回到你的项目。如果您不打算进行音频处理，我建议您将插件实现为发送 MIDI 的乐器。如果你使用了[很棒的 Juce 框架](http://www.rawmaterialsoftware.com/juce.php)，你可以很容易地完成这件事，以及一个很好的 GUI 工具包和设计工具。

# iphone - iPhone iOS 如何创建阴影等图形效果？iOS 内置了哪些效果？

> ID：10383755
> 
> 赞同：8
> 
> 时间：2012-04-30T12:31:12.927
> 
> 标签：iphone, objective-c, ios, core-graphics, quartz-graphics

我在这里为一大堆问题道歉。我开始越来越多地使用 Quartz Graphics，发现它具有有趣的效果，但我没有太多示例可以看到它们的实际效果。

```
 view.layer.shadowPath = [UIBezierPath bezierPathWithRect:view.bounds].CGPath; 
```

有一个影子属性：

```
view.layer.shadowColor = [UIColor grayColor].CGColor;
view.layer.shadowOffset = CGSizeMake(5, 5);
view.layer.shadowPath = [UIBezierPath bezierPathWithRect:view.bounds].CGPath;
view.layer.shadowRadius = 9; 
```

虽然我无法进行影子表演。

边框：

```
 view.layer.borderWidth = 1;
   view.layer.borderColor=[[UIColor whiteColor] CGColor]; 
```

**iPhone 上的内置 iOS 还能获得哪些其他效果？****是否有一个全面的演示项目可以展示 iOS 中内置了什么样的图形操作功能？**

如何进行透明蒙版？

有没有办法添加内部阴影或内部发光？有没有办法让 iOS 按钮看起来比实际更“凹”？

有没有办法做径向渐变？有没有办法像 Adob​​e Illustrator 一样创建多光线镜头光晕效果？有没有办法使用“变亮、溶解”或其他 Photoshop 效果来混合图层？有没有办法动态调整图像的亮度？我知道如何进行色相偏移。

我将不胜感激有关我可以将哪种图层效果应用于 CALayers 的任何其他提示

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T14:05:44.223

多么有趣的巧合！我最近刚刚在一个关于 CoreGraphics 和 CoreAnimation 的iOS 游戏设计研讨会上**进行***了*演示，就在今天，我在 Github 上发布了一些文档。

 **因此，如果您更喜欢一些示例，您可以在此处查看存储库：[https ://github.com/pkluz/PKCoreTechniques](https://github.com/pkluz/PKCoreTechniques)

包括以下一些示例：

*   颜色填充

*   渐变填充（线性和径向）

*   简单路径

*   贝塞尔曲线

*   削波（标准和奇偶）

*   创建自定义绘制的按钮

*   简单的翻译

*   带有命中测试触发器的翻译

*   CoreAnimation 中带有 3D 变换的非常原始的“CoverFlow”。

..还有更多;-)

希望你能找到你需要的东西，但据我所知，它应该涵盖了你所要求的相当多的东西。

*注意*：还有一个 PDF 作为交互式教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T13:14:41.127

这是一个非常好的[教程](http://d3signerd.com/deep-dive-into-calayer-shadows/)，它帮助了我很多，也许它也会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T15:02:42.070

这是我使用 CIImage 生成径向渐变的实现。如果未创建渐变，它将显示命名图像。否则，它会显示径向渐变。

```
+(UIImage*)doRadialGradientFilter:(NSString*)baseImageName 
{

    CIFilter* controlsFilter  = [CIFilter filterWithName: @"CIRadialGradient" keysAndValues:
                   @"inputColor1", [CIColor colorWithRed:0.0 green:0.0
                                                    blue:0.0 alpha:0.0], @"inputColor0", [CIColor colorWithRed:0.0 green:0.0
                                                                                                          blue:0.5 alpha:0.5], @"inputRadius0", [NSNumber numberWithDouble:0.0], nil];

    CIImage *displayImage = controlsFilter.outputImage;
    UIImage *finalImage = [UIImage imageWithCIImage:displayImage];

    CIContext *context = [CIContext contextWithOptions:nil];
    if (displayImage == nil || finalImage == nil) {
        // We did not get output image. Let's display the original image itself.
        return  [UIImage imageNamed:baseImageName];
    }else {
        // We got output image. Display it.
        return  [UIImage imageWithCGImage:[context createCGImage:displayImage fromRect:displayImage.extent]];
    }

} 
```**

# iphone - 如何选择性地仅替换图像中的肤色？

> ID：10383758
> 
> 赞同：0
> 
> 时间：2012-04-30T12:31:27.213
> 
> 标签：iphone, objective-c, ios, image-processing

我想将人类皮肤的颜色更改为蓝色，就像电影《阿凡达》中那样。我使用以下代码来确定肤色像素并替换它们的颜色：

```
 /*
 R > 95 AND G > 40 AND B > 20 AND

    max{R, G, B} – min{R, G, B} >15 AND

    |R – G| > 15 AND

    R > G AND R > B

    OR

    R > 220 AND G > 210 AND B > 170 AND

    |R – G| <= 15 AND

    R > B AND G > B    */

    if(((red>95)&&(green>40)&&(blue>20)&&(red-green>15)&&(red>green)&&(red>blue))||((red>220)&&(green>210)&&(blue>170)&&(red-green<=15)&&(red>blue)&&(green>blue))){

        data[i]=255; 
            data[i+1]=100-(190-red); 
            data[i+2]=200-(190-green); 
            data[i+3]=255;

    } 
```

这种方法适用于我下载的面部图像中的浅色皮肤：

![在此处输入图像描述](../Images/d9698023af68e9290d98690e284e2a55.png)

但是当我从相机拍摄实际照片时，它并没有给整个皮肤着色，只有部分：

![在此处输入图像描述](../Images/a7c6e850fde74c04a224724544458f51.png)

有没有办法为一系列肤色替换肤色像素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:15:27.363

不幸的是，完美的皮肤分割是一个未解决（或者可能无法解决？！）的问题。如果您没有要求包含“太多”像素，那么您可以打开阈值以使用蓝色色调为“更多”像素着色。但是，您会遇到背景像素或服装像素也会变色的问题。我们已经看到您拍摄的背景中的绘画被染成蓝色，即使它不是皮肤。那时，我认为您唯一的选择是使用更智能的分割技术（可能是自适应技术）来更好地选择肤色像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:18:25.697

使用 Quartz，您可以创建一个定义特定颜色范围的图像以替换为：

```
CGImageRef myMaskedImage;
const float myMaskingColors[6] = {124, 255,  68, 222, 0, 165};
myColorMaskedImage = CGImageCreateWithMaskingColors (image,
                                        myMaskingColors);
CGContextDrawImage (context, myContextRect, myColorMaskedImage); 
```

请参阅[用颜色遮盖图像](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBHCADE)

# iphone - iPhone App：触摸事件并将控制权转移到其他对象

> ID：10383759
> 
> 赞同：0
> 
> 时间：2012-04-30T12:31:35.250
> 
> 标签：iphone, objective-c, uibutton, uitouch

在我的 iPhone 应用程序中，我想玩触摸事件。这里我的要求如图：

![在此处输入图像描述](../Images/2be0dd23626f15eb696c69da60e6565a.png)

我`Button 2`正在`touch drag Exit`创建`Button 1`. 这是代码

```
 -(IBAction)addView:(id)sender{

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.tag=count;
count++;
    [button addTarget:self action:@selector(imageTouch:withEvent:) forControlEvents:UIControlEventTouchDown];
    [button addTarget:self action:@selector(imageMoved:withEvent:) forControlEvents:UIControlEventTouchDragInside];
    [button addTarget:self action:@selector(imageTouchCancel:withEvent:) forControlEvents:UIControlEventTouchUpInside];

button.frame=CGRectMake(shape1.frame.origin.x-30,shape1.frame.origin.y-40, 100, 100);

   [button setImage:[UIImage imageNamed:imgname] forState:UIControlStateNormal];
   [button addSubview:close];
  [baseview addSubview:button];

 } 
```

在这里，我能够成功创建按钮 2，但问题是我无法在单点触摸事件中拖动和移动按钮 2，这意味着在按钮 1 上向外拖动时，它正在创建按钮 2，但要移动按钮 2，我必须用手指关闭屏幕并在下一次触摸按钮 2 时，我可以移动按钮 2。

我的问题是，如何创建 button2 并在单次触摸循环中将其移动到屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:45:25.600

设置按钮用户交互禁用并使用以下代码..

```
[button2 setUserInteractionEnabled:NO];

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:touch.view];
button2.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
[self touchesBegan:touches withEvent:event];
 } 
```

[在视图上拖动图像的示例代码](http://www.icodeblog.com/2008/10/20/iphone-programming-tutorial-using-uitouch-to-drag-an-image-around-the-screen/)

希望对你有帮助

# python - 将不同的 URL 映射到同一个视图

> ID：10383763
> 
> 赞同：12
> 
> 时间：2012-04-30T12:32:07.047
> 
> 标签：python, pyramid

这似乎微不足道，但我找不到这个问题的有效答案。

假设我有两个不同的链接“/”和“/home”，我希望它们指向同一个视图。（这意味着无论用户打开 xyz.com 还是 xyz.com/home，都会显示相同的页面）。

在金字塔我试过

```
config.add_route('home','/')
config.add_route('home','home/') 
```

但它引发了以下异常

```
pyramid.exceptions.ConfigurationConflictError: Conflicting configuration actions
  For: ('route', 'home') 
```

我应该如何实际实现这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T12:37:47.463

您需要以不同的路由名称添加它们（每个应用程序它们必须是唯一的）：

```
config.add_route('home','/')
config.add_route('home1','home/') 
```

然后为两者配置相同的视图：

```
config.add_view(yourview, route_name='home')
config.add_view(yourview, route_name='home1') 
```

或者，在使用`@view_config`装饰器的情况下，双重装饰您的方法：

```
@view_config(route_name='home')
@view_config(route_name='home1') 
def your_method(request):
   ..... 
```

# jquery - 手风琴的 JQuery addClass removeClass

> ID：10383765
> 
> 赞同：2
> 
> 时间：2012-04-30T12:32:08.797
> 
> 标签：jquery, click, addclass, removeclass

我有一个手风琴，它在单击另一个元素时关闭一个元素，并且只需单击一次即可打开和两次关闭（手风琴按钮）。除了添加和删除两个类之外，一切都运行良好，这两个类控制它是否具有打开或关闭箭头 'accordionButtonActive' 和 'accordionButtonNotactive' 因为这是在单击时控制的，如果它被关闭，它不会删除和添加新类单击另一个而不是再次单击以关闭，这可以完美运行。

我是 Jquery 的新手，很高兴我设法让这个工作尽我所能，现在我有点困惑于让最后一部分发挥应有的作用。

查询：

```
 $("div.accordionButton").addClass("accordionButtonNotactive");

//ACCORDION BUTTON ACTION
$('div.accordionButton').click(function() {

    if($(this).next().is(':visible')) {
        $('div.accordionContent').slideUp('normal');
          $(this).addClass("accordionButtonNotactive").removeClass("accordionButtonActive");

    } else {
        $('div.accordionContent').slideUp('normal');    
        $(this).next().slideDown('normal');
        $(this).removeClass("accordionButtonNotactive").addClass("accordionButtonActive"); 

    }
});

    //OPEN FIRST    
$("#open").trigger('click');

    }); 
```

简单的 HTML：

```
 <div class="accordionButton" id="open">Title</div>
  <div class="accordionContent">
    <p>Content</p>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:38:01.287

当单击任何标题时，您可以删除活动类并为任何兄弟添加非活动类：

```
$(this).siblings('.accordionButtonActive')
    .removeClass('accordionButtonActive')
    .addClass('accordionButtonNotactive'); 
```

[例子](http://jsfiddle.net/8raFt/)

此外，您可能会发现为 添加一种样式`.accordionButton`并覆盖它更容易`.accordionButton.active`，因此您只需处理一个类。

您也可以使用`toggleClass`, 以便只需要为当前元素处理一个类一次，而不是`addClass`在一个条件下使用，然后`removeClass`在另一个条件下使用。

[例子](http://jsfiddle.net/sdQ26/)

# android - 在不同时间安排任务

> ID：10383769
> 
> 赞同：0
> 
> 时间：2012-04-30T12:32:30.957
> 
> 标签：android

我正在做蓝牙模块的某种调度程序/任务程序，您可以在其中指定多个小时（HH：MM）何时打开/关闭。对于我阅读的内容，使用服务来检查是否到了时间，它的电池很贵，所以我放弃了这种方式。

获得这个的更好方法是什么？我已经阅读了一些 AlarmManager 以及关于 ACTION_TIME_TICK 的内容（我认为这需要应用程序正在运行）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:40:41.343

您可以使用警报管理器来执行您希望执行的任何代码，并且不需要运行您的应用程序。

# android - Android 中的光标 (SQLite)

> ID：10383770
> 
> 赞同：1
> 
> 时间：2012-04-30T12:32:32.830
> 
> 标签：android, performance, sqlite, cursor

我在Android中的光标有问题...

```
public int getCountNameContainWord(String word){
    long time1=System.currentTimeMillis();
    Cursor cur = bdd.query(TABLE_IDF, new String[] {"COUNT(idfs)"}, "idfs LIKE '"+word+"%'", null, null, null, null, null);
    long time2=System.currentTimeMillis();
    System.out.println("time query : "+(time2-time1));
    if(cur!=null){
        cur.moveToFirst();
        long time3=System.currentTimeMillis();
        System.out.println("time move cursor : "+(time3-time2));
        int i=Integer.parseInt(cur.getString(0));
        return i;
    }else{
        return 0;
    }
} 
```

结果 ：

> 时间查询：3
> 
> 时间移动光标：3784

移动光标很慢，我不知道为什么......只有一个结果行......你有什么想法让它更快吗？通常，它只需要几毫秒...

PS：对不起我的英语不好，但我是法国人：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:12:46.383

我认为答案就在这里[为什么光标操作需要这么多时间](https://stackoverflow.com/questions/9289369/first-time-cursor-operation-is-so-slow-when-query-bulk-data-how-to-solve)，我引用

> 好的，伙计们，我已经有几天没来了。我找到了解决方案，即您必须为您的表创建索引，这将提高查询速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:55:19.810

***编辑：***
好的，我发现这`moveToFirst()`需要很长时间，因为它进行实际的数据库通信。您对此无能为力。如果它导致性能问题并阻止您的 UI，您可以尝试将其移动到`AsyncTask`.

[android光标movetofirst性能问题](https://stackoverflow.com/questions/6953656/android-cursor-movetofirst-performance-issue)

你的桌子有多大？您可以尝试添加索引`idfs`并检查它是否有所作为。

* * *

我肯定`System.out.println`需要很多时间。所以试试这个：

```
public int getCountNameContainWord(String word){
    long time1 = System.currentTimeMillis();
    long time2, time3 = 0;
    Cursor cur = bdd.query(TABLE_IDF, new String[] {"COUNT(idfs)"}, "idfs LIKE '"+word+"%'", null, null, null, null, null);
    time2 = System.currentTimeMillis();
    if(cur!=null){
        cur.moveToFirst();
        time3 = System.currentTimeMillis();
        int i=Integer.parseInt(cur.getString(0));
        System.out.println("time query : "+(time2-time1));
        System.out.println("time move cursor : "+(time3-time2));
        return i;
    }else{
        return 0;
    }
} 
```

# java - 随机生成值 1/x

> ID：10383771
> 
> 赞同：2
> 
> 时间：2012-04-30T12:32:33.880
> 
> 标签：java, random

在java中，当我想生成一个高斯值时，我直接使用

```
Random r = new Random();
r.nextGaussian(); 
```

但现在我想生成一个概率为 1/x 的值，而不是高斯！

在我的解决方案中，我必须创建一个随机值，但这些值以越接近 1 开始，依此类推（有序）。例子 ：

```
0.98
0.90
0.85
0.6
0.4
... 
```

并不是

```
0.3
0.9
0.4
0.8
... 
```

我们有关于 java 的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T14:00:27.880

要找到以 为概率分布的值`1/x`：

`1/x`is的积分`ln x`，正如@dbaupp 指出的那样，它无限增长。事实上，`ln x`当 x 接近 0 时，极限是无限的（负），*而*当它增长到正无穷时，极限是无限的（正）。

所以我们必须将函数的范围限制在某个区间`[min, max)`，其中`min > 0`和 都是有限的。

的倒数`q = ln x`是`x = e^q`，所以分位数函数是`e^[(ln max - ln min)q + ln(min)]`，其中 q 落在区间内`[0,1)`

经过一点代数，就变成了`(max/min)^q * min`=`(max^q)(min^(1-q))`

（我不确定哪种形式在数值上更稳定）

因此，将范围从 0 到 1 的均匀分布值（例如您从 nextDouble 获得的值）插入此函数将为您提供具有 a`pdf = 1/x`且范围从给定最小值到最大值的值：

```
public static double reciprocalQuantile(double q, double min, double max) {
    return Math.pow(max, q)*Math.pow(min, 1-q);
} 
```

所以你可以说：

```
Random rand = new Random();
double value = reciprocalQuantile(rand.nextDouble(), 0.0001, 10000); 
```

我认为:-)请随时检查我的数学。

还有一点：您当然可以将 min 设置为 Double.MIN_VALUE 并将 max 设置为 Double.MAX_VALUE，但我对浮点表示的了解不够多，无法知道这是否会出现问题，如果是，那么我不知道一个数字需要多小/多才能变得如此。它也可能不是很有用。一个小测试显示了很多非常小的值和很多非常大的值——这并不奇怪，因为顶部和底部的积分接近无穷大。因此，要在中等范围内获得足够的值以获得漂亮的直方图，您需要*很多*值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:43:40.473

您可能需要实现自己的转换方法。从 Random 实例中，您可以获得用于以均匀概率获取数字的对象，并将这些作为输入到您的方法中，以将其转换为您喜欢的任何分布。因此，您将获取生成的数字，并将其用于计算 1/x（不确定您的意思是什么......）并根据需要返回该操作的结果......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T12:37:33.737

```
Random random = new SecureRandom();
double x = random.nextDouble();
return 1.0 / x; 
```

将为您在范围 [0.0, 1.0] 内为 x 提供值 1/x

编辑 - 不回答 OP 的问题，我误解了。

# c# - C# 在 RichTextBox 中加粗字符串的一部分

> ID：10383772
> 
> 赞同：1
> 
> 时间：2012-04-30T12:32:34.950
> 
> 标签：c#, string, richtextbox, bold

我正在尝试加粗`"You >>"`此字符串的一部分以显示在富文本框中。

以下是单击消息发送按钮时的代码。`displayBox`是 id 像字符串一样加粗`entryBox`的地方，是用户输入消息的地方。

```
 private void button1_Click(object sender, EventArgs e)
    {
        listData.Add(entryBox.Text);
        // Remove the linebreak caused by pressing return
        SendKeys.Send("\b");

        // Empty the array string
        ArrayData = "";

        // Bold the You >>
        displayBox.SelectionStart = 0;
        displayBox.SelectionLength = 6;
        displayBox.SelectionFont = new Font(displayBox.Font, FontStyle.Bold);
        displayBox.SelectionLength = 0;

        foreach (string textItem in listData)
        {
            ArrayData = ArrayData + "You >> " + textItem + "\r\n";
        }
        entryBox.Focus();
        displayBox.Text = "";
        displayBox.Refresh();
        displayBox.Text = ArrayData;
        entryBox.Text = "";

    } 
```

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-01T07:51:18.150

在评论中@dash 的链接的帮助下，这个问题得到了解决。链接： http: [//msmvps.com/blogs/deborahk/archive/2009/10/31/richtextbox-styles.aspx](http://msmvps.com/blogs/deborahk/archive/2009/10/31/richtextbox-styles.aspx)

这是我的代码，因为它现在代表同一个按钮（尽管我已经重命名了它）。这可能不是这个问题的最干净的解决方案，但我达到了预期的结果，所以我很满意。评论中对此进行了解释。

```
 private void send_Click(object sender, EventArgs e)
    {
        if (entryBox.Text != "")
        {
            listData.Add(entryBox.Text);
            // Remove the linebreak caused by pressing return
            SendKeys.Send("\b");

            // Empty the array string
            ArrayData = "";

            foreach (string textItem in listData)
            {
                ArrayData = ArrayData + "You >> " + textItem + "\r\n";
            }
            entryBox.Focus();
            displayBox.Text = "";
            displayBox.Refresh();
            displayBox.Text = ArrayData;

            // Format the "You >>"
            displayBox.SelectionStart = 0;
            displayBox.SelectionLength = 6;
            displayBox.SelectionFont = new Font(displayBox.Font, FontStyle.Bold);
            displayBox.SelectionColor = Color.Crimson;
            displayBox.SelectionLength = 0;
            string wordToFind = "You >>";
            int startIndex = 0;
            while (startIndex > -1)
            {
                startIndex = displayBox.Find(wordToFind, startIndex + 1,
                                displayBox.Text.Length,
                                RichTextBoxFinds.WholeWord);
                if (startIndex > -1)
                {
                    displayBox.Select(startIndex, wordToFind.Length);
                    displayBox.SelectionFont = new Font(displayBox.Font, FontStyle.Bold);
                    displayBox.SelectionColor = Color.Crimson;
                }
            }
            // Reset the entry box to empty
            entryBox.Text = "";

        }
        // Remove the linebreak caused by pressing return
        SendKeys.Send("\b");
    } 
```

我希望这能为任何有类似问题的人提供一些帮助！

: 丹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:06:49.277

试试这个： http: [//www.codeproject.com/Articles/37668/Multiple-Colored-Texts-in-RichTextBox-using-C](http://www.codeproject.com/Articles/37668/Multiple-Colored-Texts-in-RichTextBox-using-C)

或者这个：[http ://www.codeproject.com/Articles/15038/C-Formatting-Text-in-a-RichTextBox-by-P​​arsing-the](http://www.codeproject.com/Articles/15038/C-Formatting-Text-in-a-RichTextBox-by-Parsing-the)

我想我用过一个，不记得是哪个，但我成功了。

# php - 我可以将来自 Google API 的信息存储在数据库中吗？

> ID：10383774
> 
> 赞同：9
> 
> 时间：2012-04-30T12:32:40.667
> 
> 标签：php, mysql, google-api

我正在制作一个有用户注册的网站。我要做的是，当用户使用 Google 登录时，它会将他们的详细信息（ID、电子邮件、姓名、图片和 G+ 链接）存储在本地数据库中。然后每次用户连接到网站时，它都会检查用户 ID 是否在本地数据库中。如果是，他们已登录并可以访问他们的所有详细信息以及他们上传的文档等。如果不是，他们可以登录。

我是否可以这样做，或者我是否必须在他们访问的每个页面上对用户进行身份验证，然后找到一种方法将其链接到我的本地数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T16:49:03.450

我认为您不允许将 API 信息存储在自己的数据库中。最重要的是，您为什么要花这么多时间来允许用户登录/访问他们的文档。如果您想使用他们的 google 信息作为登录凭据，您所要做的就是而不是检查您的数据库，而是对 google 的 API 进行 cURL 调用，看看他们是否返回给您一个用户。如果是这样，请创建一个会话并允许用户登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-02T05:27:11.520

使用 google plus 客户端流程并添加基于 HTML 的登录按钮。通过 ajax 调用 userid，然后将 resp.id 插入会话中。sessionid 存储在数据库中。

但是，当关闭浏览器并再次登录时，会启动一个全新的会话，并且无法访问任何以前上传的文档。

# math - 将位置传感器电压与电机速度 PWM 相关联

> ID：10383777
> 
> 赞同：0
> 
> 时间：2012-04-30T12:32:50.197
> 
> 标签：math, arduino

这是一个普遍的问题，我相信这可能是一个数学问题，但它适用于 Arduino 平台。

我正在做一个球悬浮项目，该项目将使乒乓球悬浮在管中的设定点，使用激光位置传感器读取球的位置，该传感器提供与球位置相关的模拟电压。传感器输出对于管子长度的工作范围非常线性。

然后我有一个以 PWM 为百分比控制的风扇，这是用一个锅手动调节的，我在管子上以一英寸的增量标记了一个刻度。

基本上，我制作了一张传感器电压输出值表，与管中不同位置的电机 PWM% 值相关。

我制作了一个关于这两个变量的图表，它非常线性。我在 excel 中做了一个趋势线，得到了 Y = 3.0265X + 15.05 的直线方程

X 是传感器位置（以伏特为单位），Y 是以 % 为单位的 PWM 值，

我遇到问题的部分是从模拟引脚获取模拟电压，该电压在 arduino 中的值为 0 到 1023，并将其与 PWM 相关联以模拟写入电机（值从 0 到 255）。

我知道analogRead() 和ADC 所以我将0 到1023 的值转换为（5.0 * 模拟值）/ 1023 的电压；

这会给我电压，但我不明白如何将它与 PWM 联系起来，比如传感器电压的变化与电机的 PWM 变化。我认为我在正确的轨道上，但没有将这些点连接在一起。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T02:30:26.437

一般来说，PWM百分比与电源电压的电压直接相关。也就是说，如果你有一个 5 伏的 Arduino，并且 PWM 百分比是 75%，那么输出应该是 3.75 伏，前提是你有一个能够“过滤”单个脉冲的输出电路。

请记住，PWM 值在 0 到 255 的范围内，因此您需要将所需的“analogRead()”值（在 0 到 1023 的范围内）除以 4 以产生正确的输出电压使用PWM。

# php - 如何记录尝试进行 sql 注入的人

> ID：10383779
> 
> 赞同：10
> 
> 时间：2012-04-30T12:33:09.710
> 
> 标签：php, sql, security, logging, code-injection

这里有很多方法可以保护您的代码免受 SQL 注入攻击。但我需要的是**如何记录 sql 注入攻击**，以便我们可以将他（攻击者用户）添加到 blacklist-users 数据库中。

我在这里需要的是一种函数，如果有 sql 注入，它将返回 true。

```
<?php
if(isset($_POST['username'])){
// need a function here which will return true if there's
// a sql injection else false
}
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T12:46:42.580

您可以使用[PHP-IDS](https://phpids.org/)来检测安全攻击（不仅仅是 SQL 注入）并添加自定义行为。就我而言，我在每个请求开始时运行 PHP-IDS。如果检测到问题，我会登录数据库，向用户返回一般错误消息并 die()。

请注意，尽管 PHP-IDS 不会检测到所有 SQL 注入问题。不可能自动做到这一点。您仍然需要正确处理您的查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T12:44:27.803

**编辑**：这个答案是在问题发生重大变化之前做出的。虽然仍然有效，但它不再解决 OP 的具体情况。

SQL 注入是最容易修复的 Web 应用程序漏洞之一。识别潜在攻击、记录它们以及维护和管理具有拒绝使用功能的用户黑名单的问题空间是一项复杂得多的编程练习。

学会`parameterised queries`正确使用，SQL 注入不是你需要考虑的事情。在 PHP 中，您可以使用`mysqli`或`PDO`库来实现这一点。这里有很多问题可以解决这个问题，您可以通过谷歌搜索“参数化查询”或“准备好的语句”获得更多教程

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T12:51:17.227

**不要**试图为如此严重的问题制定一个本土解决方案。可能会在你知道的地方回来咬你。

相反，尝试从服务器日志中查看用户提出的查询和请求类型，并据此做出决定。（对于 GET 请求）。对于 POST 请求，正如[https://stackoverflow.com/a/10383937/561269](https://stackoverflow.com/a/10383937/561269)所说，您可以使用它。

# java - 设置字段与创建新对象

> ID：10383780
> 
> 赞同：1
> 
> 时间：2012-04-30T12:33:10.963
> 
> 标签：java, oop

[早些时候，当我看到Alan Kay](http://en.wikipedia.org/wiki/Alan_Kay)的以下引用时，我正在阅读[一篇文章](http://ormomg.blogspot.se/2012/04/oo-computing-newer-more-modern.html)：

> “许多所谓的面向对象的语言都有设置器，当你在一个对象上有一个设置器时，你就把它变成了一个数据结构。”

文章继续暗示这不是最佳实践，从长远来看可能会损害您开发的应用程序。

我是一名 CompSci 学生，具有 C、Java、PHP、Ruby 等方面的经验……所以我对 OOP 作为一个概念和实践相当熟悉，但绝不是专家。

## 我想我的问题归结为：

在编写 OO 程序时，访问字段值（使用 getter）然后根据修改后的值创建新对象，而不是使用 setter 方法来简单地调整该对象的字段，这在语义上是否正确（并且是最佳实践的问题）。

或者，如果有一块木头，然后我从原件上切下一些木头，我应该将其建模为质量较小的同一块，还是完全是一个新块。

使用 setter 似乎更简洁，如果您要创建如此多的对象，垃圾收集将是一个问题，所以我从理论而非实际的角度来处理这个问题。

提前感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T13:05:28.503

一个对象必须至少具有以下两种职责中的一种：行为和知识。行为定义了对象如何对其执行上下文中的事件做出反应，而知识定义了对象知道的内容。

行为被实现为方法名称映射到触发反应的事件的方法。知识被实现为返回值映射到正在查询的知识的 getter。

以这种方式设计和实现的对象很少需要设置器，因为对象状态仅在响应外部事件时才发生变化。话虽如此，可以将外部事件实现为 setter（例如 car.setSpeed(...)），但通常应该寻找更合适的名称（例如 car.accelerateTo(...) 和 car.decelerateTo(. ..））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:44:45.750

这是设计问题。OO的基本原理是封装。假设您有一个 Circle 对象。你可以有一个半径的二传手和一个周长的二传手。但是当然，由于两者是联系在一起的，所以设置周长也应该改变半径，设置半径也应该改变周长。如果不是这样，你确实没有对象了，而是一个简单的数据结构，没有任何封装。

现在有些对象是可变的，有些则不是。例如，字符串或整数是不可变的。一旦它有了一个值，它的值就不能改变。将一个字符串连接到另一个字符串只会创建一个新的字符串实例，而不会影响两个原始字符串中的任何一个。不可变对象更容易理解和使用，因为它们只有一种状态。它们本质上也是线程安全的。但它们*可能*会导致性能问题。例如，在循环中连接会创建大量临时 String 实例，这些实例会消耗内存并且必须进行 GC。这就是 StringBuilder 存在的原因：它基本上是一个可变字符串。

总结：没有明确的答案，因为这完全取决于对象的种类和使用方式。一般来说，与可变对象相比，更喜欢不可变对象。喜欢不那么可变的对象而不是更可变的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:41:58.337

你问两个问题：

1）对象中有公共字段可以吗？

从维护/调试的角度来看，如果您出于至少一个原因通过方法访问对象的字段，通常会更好：该方法引入了一个用于更改字段的通用条目，您可以添加自定义逻辑以防止无效更改或更新不变量对象的状态以保持其状态与请求的更改一致。如果对象中没有内部状态，则不需要方法（但仍然建议：它为所有访问引入单个断点区域以进行调试）

2）我应该使用可变对象还是不可变对象？

任何一种方法都是正确的。不可变对象允许更轻松地对代码进行推理，因为您无法修改现有对象的状态。OTOH 你最终会得到更多的对象，所以要么会使用更多的内存，要么垃圾收集器会有更多的工作。可变对象提供相反的优点/缺点

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:42:09.317

在我看来，这完全取决于您是否将相关对象建模为“不可变”。根据您的模型，这可能非常有意义，在这种情况下，您应该避免编写 setter 方法。

不过一般来说，我没有理由不使用 setter。此外，您可以找到许多语言（C#、AS3），它们为定义 setter 方法提供了专门的语法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:43:44.853

这完全取决于您想要实现的目标。如果要更改实例的属性，则应使用 setter 或类似方法 ( `carveOutSomeWood()`)。如果您需要访问以前的版本并想要生成一个新实例，您可以实现某种`createCopy()/clone()`方法来创建一个副本，然后应用`carveOutSomeWood()`到该新实例。

我不建议通过读取旧实例的属性并自己创建它来创建新实例。主要原因（可能还有其他原因）是您的班级可能会改变。然后，您还必须更改新实例的创建，因为它是在类之外完成的。如果您只是使用一个`createCopy()`方法，则该类将负责解释其更改。

您也可以直接引入一种`derive()`在内部创建副本并应用一些更改的方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T12:44:02.417

setter 可能会暴露您的内部实现并导致一些问题。如果您设置一个对象，并根据新的分配状态执行一些操作，如果分配的对象在外部发生更改，则可能会导致问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-06T19:18:04.073

假设某个变量`foo`标识了一个具有某个字段的类对象`bar`，并且现在`foo.bar=5;`。一想`foo.bar`等于六。您的问题是`foo`继续识别同一个对象是否更好，但将该对象更改`bar`为 6，或者识别一个新对象是否更好，`foo`它就像它用来识别的对象一样，除了它的`bar`字段将等于 6 . *在两种方法都正确*的情况下，修改字段（无论是直接还是通过`setFoo()`调用）往往比创建新对象更有效，因此会“更好”。然而，通常只有一种方法是正确的；另一个不会简单地“不那么好”*.*

 *50,000 美元的问题是确定使用哪种方法应该封装什么`foo`以及由此识别的对象。

*   如果`foo`持有对*共享*对象的引用，而对它的其他引用使用它来封装“bar = 5”的状态，那么修改bar是*错误*的。唯一正确的方法是创建一个新对象，并进行更改`foo`以识别该对象而不是原始对象。

*   如果`foo`在宇宙中的任何地方拥有唯一标识特定对象的引用，那么创建新对象或修改现有对象在语义上将是等效的，尽管如上所述修改现有对象往往更快。

*   如果`foo`标识存在其他引用的对象，并且其目的是标识由那些其他引用标识的对象（有效地与那些其他引用形成连接），那么更改`foo`以标识不同的对象将是错误的，除非所有引用都指向该对象被更新以识别新对象。

*   如果 field `bar`is `final`，或者以其他方式防止修改，那么即使一个人拥有对特定对象的唯一引用，也别无选择，只能创建一个新对象并`foo`对其进行标识。

第二种情况和第四种情况可能是最常见的；这些可以通过“不要不必要地创建新对象”的原则来处理[在情况2中，可以避免创建新对象；在第 4 种情况下，它不能]。该原则也将轻松处理案例 3 [因为它会鼓励人们做必要的事情]。从该规则的角度来看，唯一有问题的情况是第一个。即使在那里，关键是要认识到，如果引用是共享的但不打算封装身份，则必须创建新对象。

我怀疑不可变对象流行背后的真正原因之一是正确使用可变对象需要知道哪些引用应该封装标识，哪些不封装。使用不可变类可以避开此类问题。*

# jquery - jQuery .stop() 回调问题

> ID：10383791
> 
> 赞同：3
> 
> 时间：2012-04-30T12:34:15.463
> 
> 标签：jquery, callback

我试图触发一个动画作为对另一个动画的回调。事情是我只希望第二个动画在第一个动画完成时触发，从我读到的内容来看，这就是 .stop() 函数应该如何工作的。然而，在我编译的代码中，即使第一个动画没有完成，第二个动画也会触发。

这是代码：

```
$(document).ready(function(){
    var angle = 0;

    function arrowRotate() {
        angle +=180;
        $('#arrow img').stop().rotate({
            animateTo: angle,
        }, 100);
    };

    function ToggleOpen(heightValue) {
        $('#information').stop().animate({
            height : heightValue,
        }, 1500, 'easeOutExpo', function(){
            arrowRotate();
        })
    };

    $('#information_container').hover(function(){
        ToggleOpen(500);

    }, function(){
        ToggleOpen(0);
    });

    $('#arrow img').click(function(){
        ToggleOpen(0);
    });

}); 
```

我正在使用这个第三方插件：[http ://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)

这是现场实施：[http ://hopeand purpose.org](http://hopeandpurpose.org)

所以基本上我想要完成的是在悬停时提高 div 的高度，一旦完成，图像就会旋转。问题是即使高度动画没有完成并且 div 动画回到 0，图像仍然会旋转。

当我现在查看代码时，似乎我的问题可能是当它悬停时，它触发了 arrowRotate() 函数。包装 arrowRotate() 函数的 if 函数会是我最好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:37:57.060

用于`stop(true)`停止动画，并清除所有等待在元素上运行的排队动画。

这是一个例子。如果您在高度缩小之前将鼠标移开，您将看到该动画未运行，因为它已`stop(true)`在 mouseleave 处理程序中清除。

```
$("div").hover(function() {
    $(this).stop(true).animate({ width: 300 }, function() {
      $(this).animate({ height: 50 });
    });
  }, function() {
    $(this).stop(true).animate({ width: 50, height: 100 });
  }
);
```

```
#test {
  width: 50px;
  height: 100px;
  background-color: #C00;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="test">Test</div>
```

# javascript - 结合 javascripts 与跨 CDN 拆分

> ID：10383794
> 
> 赞同：0
> 
> 时间：2012-04-30T12:34:29.123
> 
> 标签：javascript, cdn, performance

各种网站优化指南建议，如果可能的话，应该将多个 javascript 合二为一，以减少 http 请求的数量。另一方面，有一个略微正交的建议，即使用像谷歌和微软这样的 CDNS 将分担负载，浏览器将能够并行下载。

我有点困惑，我应该将包括我自己和第三方 js 在内的所有 javascript 组合为一个 javascript 文件，还是应该将它们分开（至少对于那些可通过免费 CDN 获得的）？

我也不清楚浏览器是并行下载多个 javascrit 文件还是等待每个 javascript 下载后再下载其他文件？

我有一个大量使用 javascript 的网站，并且我正在使用几个库（jquery、jquery-ui、jquery.json-2.3、jquery.metadata.js、jquery.jcarousel.min.js jquery.validate.js、 jquery.blockUI.js）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:38:26.570

引用 CDN 始终是一个好主意。认为浏览器必须做更多的 http-requests 是无效的，因为这只会发生一次。该文件将被缓存然后不再被请求。使用 CDN，用户也可能已经拥有一个缓存版本，并且根本不需要请求它（而在引用您的本地版本时，用户之前无法缓存该版本）。

我建议尝试为每个可用的第三方插件引用 CDN。对于您自己的脚本和非 CDN 托管的脚本，请尝试将脚本缩小并放入单个文件中以减少流量负载。

（为了缩小，有很多在线工具可用，例如[http://jscompress.com/](http://jscompress.com/)，它还可以让您从多个 js 文件中生成单个 js 文件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:46:15.073

浏览器会下载多个 JS 文件，因为它们位于不同的 CDN 上。当它们在同一个 CDN 上时，浏览器会等待每个完成下载另一个。

这是一个好主意，尽可能将第三方脚本保存在不同的文件和 CDN 上，并在您的子域上缩小您自己的脚本，制作您的 CDN，以加快加载速度。

# javascript - 删除脚本元素后脚本仍在运行

> ID：10383798
> 
> 赞同：0
> 
> 时间：2012-04-30T12:34:53.847
> 
> 标签：javascript, jquery

为什么脚本在标签被删除后仍然运行？

当我不小心为选择器键入“脚本”而不是“样式”时，我正在测试 jQuery 以删除样式和链接标签以删除 CSS 样式。但是发生的事情是这些标签中定义的脚本仍然运行。这是为什么？

[这是 JS 中的示例](http://jsfiddle.net/taXNf/)：

```
//assume foo is defined
foo();

var scripts = Array.prototype.slice.call(document.getElementsByTagName('script')),
    current;

//remove all scripts
while (scripts.length) {
    current = scripts.pop();
    current.parentNode.removeChild(current);
}

//foo still works
foo();​ 
```

[与 jQuery 相同](http://jsfiddle.net/taXNf/1/)：

```
foo();

$('script').remove();

foo();​ 
```

还有一个附带的问题：如果他们不以这种方式被移除，会怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:36:58.933

它们运行是因为它们在第一次解析脚本时被加载到内存中。

您可以设置任何内容`undefined`来禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:38:12.580

当您尝试删除它们时，第一个脚本已经运行，第二个脚本已经加载。看起来像：

```
<script>
function foo(){
alert('foo');
}
</script>

<script type='text/javascript'>//<![CDATA[ 

foo();

var scripts = Array.prototype.slice.call(document.getElementsByTagName('script')),
    current;

while (scripts.length) {
    current = scripts.pop();
    current.parentNode.removeChild(current);
}

foo();
//]]>  

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T13:18:03.310

你可以试试这个：

```
$('script:not([src], [type])', document).remove();
window.foo = false; // or, window.foo = undefined; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:39:01.850

标签只定义了运行的`<script>`代码——例如

```
foo = function() { alert("Yay!"); }; 
```

将上面的函数分配给`window.foo`. 我想不出一种万无一失的方法（除了疯狂的事务内存实现，可能）来扭转任何给定代码块的影响。（我有直觉认为这个问题有一个名字。）

当然，如果您只想要一个有限的实现，您可以在运行`window`之前和之后记录密钥，然后在需要时记录在该运行期间创建的密钥。但同样——不是防弹的。`<script>``delete`

# c++ - 如何从 CMFCEditBrowseCtrl 获取路径文本？

> ID：10383799
> 
> 赞同：5
> 
> 时间：2012-04-30T12:35:00.057
> 
> 标签：c++, visual-studio-2010, winapi, mfc

我正在研究 MFC win32 项目。我有 2 个 CMFCEditBrowseCtrl 控件的对话框。用户在这些控件上指定文件后，如何从这些控件中获取文件路径？

**更新：**这是我的代码

```
SpecifyInputDialog dlg; // this is my dialog inherited from CDialogEx
dlg.DoModal();
CString strText;
dlg.inFileCtrl.GetWindowTextA(strText.GetBuffer(), 500); // inFileCtrl is CMFCEditBrowseCtrl object 
```

结果在最后一行出现“调试断言失败”错误...

**更新 2：**

```
CString strText;
dlg.inFileCtrl.GetWindowText(strText); 
```

同样的“调试断言失败”错误。我将尝试在未关闭对话框时获取文本。

**更新 3（已解决）：**

我设法通过实现回调来获取路径文本

```
BEGIN_MESSAGE_MAP(SpecifyInputDialog, CDialogEx)
  ON_EN_CHANGE(IDC_MFCEDITBROWSE1, &SpecifyInputDialog::OnEnChangeMfceditbrowse1)
END_MESSAGE_MAP() 
```

在处理程序方法中：

```
void SpecifyInputDialog::OnEnChangeMfceditbrowse1()
{
    this->inFileCtrl.GetWindowText(this->inFileString);
} 
```

因此，您在对话框尚未关闭时获取文本的想法是正确的。请更新您的答案，以便我可以将其标记为解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:28:41.447

CMFCEditBrowseCtrl 从 CEdit 扩展而来，您可以使用`GetWindowText`/`SetWindowText`访问当前显示的文件名。

**更新**

做就是了：

```
 CString strText;
 dlg.inFileCtrl.GetWindowText(strText); 
```

失败的断言可能是由于多种原因造成的（跟踪它以查看原因）。您可能必须在对话框关闭之前获取对话框代码中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:10:15.780

您不能在 DoModal 之后调用 dlg.(any control).GetWindowTextA - 此时对话框窗口（以及所有子控件）不再存在。请尝试使用 MFC 的 DDX（将所需控件绑定到 CString）或在对话框中覆盖 OnOk 方法 - 在此方法中可以访问控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-30T18:42:44.580

您收到一个错误，因为在 DoModal() 返回后窗口关闭，并且 GetWindowTextA 是一个从窗口句柄获取文本的通用函数。相反，您希望在 MFC 的 DDX 交换期间将此值放入字符串中。使用类向导，选择您的 SpecifyInputDialog 类，然后选择 Member Variables 选项卡（默认为 Commands 选项卡），在该选项卡下选择浏览编辑控件的控件 ID，然后选择 Add Variable。在类别下，将控制更改为值。这会将变量类型从 CMFCEditBrowseCtrl 更改为 CString。给你的 CString 一个名字，（比如 inFileText），其余的都是自动的。你得到这个字符串是这样的：

```
SpecifyInputDialog dlg; // this is my dialog inherited from CDialogEx
dlg.DoModal();
CString strText;
strText = dlg.inFileText; // after the data exchange, this has what you need 
```

代码向导生成的 DDX 如下所示：

```
void SpecifyInputDialog::DoDataExchange(CDataExchange* pDX)
{
    CDialogEx::DoDataExchange(pDX);
    DDX_Text(pDX, IDC_BROWSE, inFileText);
} 
```

# java - 删除在 lucene 索引中不起作用（3.5.0）

> ID：10383802
> 
> 赞同：0
> 
> 时间：2012-04-30T12:35:05.823
> 
> 标签：java, search, lucene, indexing

我正在使用 lucene 3.5.0。我使用 IndexWriter.deleteDocuments(new Term(field, value)) 删除索引。我执行了删除，没有例外。但是我仍然可以在搜索时找到特定字段的 Lucene 文档。我可以在文件系统的索引文件（.fdt 文件）中看到文档值。如何交叉检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:37:58.550

在调用 deleteDocuments(Term) 之后，你是否调用过 IndexWriter 的 commit() 或 close()？在调用 commit() 或 close() 之前，IndexReader（因此 IndexSearcher）看不到删除。

# php - 停止使用 ajax 、 javascript 、 php 刷新

> ID：10383810
> 
> 赞同：0
> 
> 时间：2012-04-30T12:35:39.493
> 
> 标签：php, javascript, html, ajax, forms

我的代码如下所示：

```
<html>
<body>

<script language="javascript" type="text/javascript">
function ajaxFunction(){
    var ajaxRequest;  // The variable that makes Ajax possible!
        ajaxRequest = new XMLHttpRequest();
    var age = document.getElementById('age').value;
    var queryString = "?age=" + age;
    ajaxRequest.open("GET", "ajax-example.php" + queryString, true);
    ajaxRequest.send(null); 
}
</script>

<form name='myForm'>
Max Age: <input type='text' id='age' /> <br />
<input type='button' onclick='ajaxFunction()' value='Query MySQL' />
</form>
</body>
</html> 
```

我使用 Ajax 停止重定向但它仍然令人耳目一新，我该如何停止它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T15:54:36.453

您可以尝试添加 return false;

```
<input type='button' onclick='ajaxFunction();return false' value='Query MySQL' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:42:24.703

好吧，代码对我来说并没有刷新，但我仍然不擅长使用 ajax 你检查了错误控制台还是尝试了 jQuery，你可以用它轻松完成

```
<script language="javascript" type="text/javascript">

function ajaxFunction(){
    var age = $("#age").val();
    $.get("ajax-example.php",{"age":age},function(r){ /*Do something with response*/ });
}
</script>
Max Age: <input type='text' id='age' /> <br />
<input type='button' onclick='ajaxFunction()' value='Query MySQL' />
</body>
</html> 
```

# r - 在 Reshape 中“聚合”非数字变量

> ID：10383814
> 
> 赞同：0
> 
> 时间：2012-04-30T12:35:49.213
> 
> 标签：r, aggregate, reshape

我有一个长格式的数据集，并希望使用 Reshape 或 Reshape 之前的任何预处理将其转换为宽格式。困难在于“值”变量是非数字的。请注意，原始数据中也有合法的重复记录。以下代码显示了每个的数据布局。

```
id = c(1, 1, 1, 1, 1, 1, 1)
month <- c("jan", "feb", "feb", "march", "april", "april", "april")
stress <- c("mild", "mild", "high", "moderate", "mild", "high", "mild")
Longdata <- data.frame(id, month, stress, stringsAsFactors = FALSE) 
```

这是原始格式：

```
> Longdata
  id month   stress
1  1   jan     mild
2  1   feb     mild
3  1   feb     high
4  1 march moderate
5  1 april     mild
6  1 april     high
7  1 april     mild 
```

这就是我想要组织数据的方式：

```
id <- c(1)
jan <- c("mild")
feb <- c("mild-high")
march <- c("moderate")
april <- c("mild-high-mild")
widedata <- data.frame(id, jan, feb, march, april, stringsAsFactors = FALSE)
> widedata
  id  jan       feb    march          april
1  1 mild mild-high moderate mild-high-mild 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T08:03:52.853

您可以分两步执行此操作，首先使用`aggregate`，然后使用基础 R`reshape`或`dcast`“reshape2”包中的任何一个。

1.  聚合步骤：

    ```
    Mediumdata <- aggregate(stress ~ id + month, Longdata, paste, collapse="-")
    Mediumdata
    #   id month         stress
    # 1  1 april mild-high-mild
    # 2  1   feb      mild-high
    # 3  1   jan           mild
    # 4  1 march       moderate 
    ```

2.  整形步骤：

    ```
    # Using base R reshape
    reshape(Mediumdata, direction="wide", idvar="id", timevar="month")
    #   id   stress.april stress.feb stress.jan stress.march
    # 1  1 mild-high-mild  mild-high       mild     moderate

    # Using `dcast` from "reshape2"
    dcast(mediumdata, id ~ month, value.var="stress")
    #   id          april       feb  jan    march
    # 1  1 mild-high-mild mild-high mild moderate 
    ```

# linux - 无法加载 ODBC lib 指定的驱动程序

> ID：10383822
> 
> 赞同：3
> 
> 时间：2012-04-30T12:36:31.833
> 
> 标签：linux, odbc, drivers, openedge, progress-db

我正在尝试安装 ODBC 驱动程序，但我遇到了砖墙。

```
[root@Crux pkg]# isql -v
[IM002][DataDirect][ODBC lib] Data source name not found and no default driver specified
[ISQL]ERROR: Could not SQLConnect
[root@Crux pkg]# isql -3 SUBS2A
[IM003][DataDirect][ODBC lib] Specified driver could not be loaded
[ISQL]ERROR: Could not SQLConnect 
```

我的INI文件如下；

# odbcinst.ini

```
[ProgressOpenEdge]
Description = ODBC for Progress OpenEdge
Driver = /usr/dlc/odbc/lib/pgoe1023.so
;Setup = /usr/dlc/odbc/lib/pgoe1023.so
FileUsage = 1 
```

# odbc.ini

```
[SUBS2A]
Driver = ProgressOpenEdge
Description = Fail
DatabaseName = SUBS
PortNumber = 4000
HostName = 192.168.1.2
LogonID = SYSPROGRESS
Password = SYSPROGRESS
APILevel = 1
ConnectFunctions = YYN
CPTimeout = 60
DriverODBCVer = 03.50
FileUsage = 0
SQLLevel = 0
UsageCount = 1
ArraySize = 50
DefaultLongDataBuffLen = 2048
DefaultIsolationLevel = REPEATABLE READ
StaticCursorLongColBuffLen = 4096
[ODBC]
InstallDir = /usr/dlc/odbc
Trace = 0
TraceFile = odbctrace.out
TraceDll = /usr/dlc/odbc/lib/odbctrac.so
UseCursorLib = 0 
```

我已经确保所有依赖项都通过 ldd 正确加载。

**更新**

输出：strace isql -v [http://pastebin.com/tXFY4vVt](http://pastebin.com/tXFY4vVt)

输出：strace isql -3 SUBS2A [http://pastebin.com/Yu5e54mR](http://pastebin.com/Yu5e54mR)

输出：/tmp/odbctrace.out [http://pastebin.com/0kgvNdWv](http://pastebin.com/0kgvNdWv)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:57:50.043

您应该检查您的 ODBC 驱动程序是否可加载：

```
ldd /usr/dlc/odbc/lib/pgoe1023.so 
```

加载器可能无法找到在您的环境中尚不可用或在不同版本中可用的*共享对象*（*so*库）的依赖关系。

我建议您`/usr/dlc/odbc/lib/`根据您的系统添加或添加其他路径：

*   在环境变量中`LD_LIBRARY_PATH`
*   要么为 linux 加载器添加一个特定的文件，例如`/etc/ld.so.conf.d/odbc-pgoe.conf`使用该行`/usr/dlc/odbc/lib/`并刷新`ldconfig`（最佳选项）

如果问题仍然存在，请报告`ldd`命令输出。也许预期的库文件名与您的 Linux 发行版不完全匹配。

**更新：**这篇文章 的[最后一条评论](http://www.virtadept.com/?p=200)确认 ld.so.conf 文件是让驱动程序正常工作的解决方案。你应该测试一下。

这个论坛提到了[类似的情况](http://www.progresstalk.com/showthread.php?118760-OpenEdge-10-2B-and-ODBC-Linux-connection)。也许该解决方案将解决您的问题。

如果仍然错误，请报告`strace isql -3 SUBS2A`. 就在写入错误消息之前，您可能会在那里获得关于错误信息的线索，例如库加载失败、文件访问权限问题或其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:26:09.737

(1)您可以在使用前检查驱动程序是否正确。

```
$ ivtestlib /usr/dlc/odbc/lib/pgoe1023.so 
```

(2) 加载驱动程序时观察日志在控制台中，

```
tail -f /path/to/SysLog_OrOtherName.file 
```

在另一个控制台中，

```
odbc.sh 
```

# spring-roo - Spring Roo 没有启动，因为它是“无法找到类或接口声明”

> ID：10383824
> 
> 赞同：0
> 
> 时间：2012-04-30T12:36:39.137
> 
> 标签：spring-roo

Spring Roo 没有启动。这是我收到的信息：

```
roo
Resolved ROO_HOME: "D:\Work\Others\dist\spring-roo-1.2.0.M1"
Build a classpath containing our two magical startup JARs
Hop, hop, hop...
    ____  ____  ____
   / __ \/ __ \/ __ \
  / /_/ / / / / / / /
 / _, _/ /_/ / /_/ /
/_/ |_|\____/\____/    1.2.0.M1 [rev 1fa252f]

Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER.
**Unable to locate the class or interface declaration**
roo> 
```

之后它什么也不做。问题可能是什么？它以前工作过，没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:27:42.053

我修复了它，试图升级到最新的 Spring Roo 1.2.1.RELEASE [rev 6eae723]。抱歉，伙计们，但这真的很糟糕:(
没有迁移指南，很多编译错误，缺少库，奇怪的消息，如“需要版本”，“1字节UTF-8序列的第1字节无效。”，Roo为Maven插件创建自己<wtf所需的版本（为什么关心？？？）和这样的东西，这真的完全停止了开发。
我在一个大项目中使用Spring Roo半年，我一直花时间修复问题，而不是实际开发。
不要依赖 ROO！一旦它不会运行，就像我的情况一样。现在它开始了，但是项目完全损坏了，更新到不需要的 Spring 3.1，并且只有在大量人工干预！

在这里，我同意 Spring Roo 论坛的一个人的观点：

*“请记录 Roo 正在处理的文件，这样这样的错误就不会阻止我们完全完成我们的工作。我选择 Roo 来完成一个相当大的项目，而且时间总是很宝贵的。现在我一直在寻找一个，对我来说，几乎一整天的未知错误，而我的客户需要尽快更新项目。但是由于 Roo 停止，对实体的更改没有处理，并且无法构建新版本。我选择 Roo 来制作东西更容易，而且它确实做得很好！但是因为当事情发生时会浪费很多时间，而且几乎不可能找到问题，所以代码生成所获得的时间很快就会用于寻找问题......”*

# ios - 将 SQL 数据从 Annotation 单击传递到新视图

> ID：10383826
> 
> 赞同：1
> 
> 时间：2012-04-30T12:37:10.923
> 
> 标签：ios, objective-c, arrays, annotations, mapkit

我试图在网上找到答案，也许那里有答案，但我很难找到它。

概念 - 我从 SQL 下载了数据。我收集这些数据，然后一个数组在地图上显示注释。单击注释时，将显示正确的标题和副标题。单击注释上的按钮时，会弹出一个新视图，显示与该坐标相关的数据。

问题 - 在我从 SQL 下载的数据中，除了标题、坐标等之外，我还希望将其他数据传递给其他视图，例如图像、详细信息、价格、网站详细信息等。我可以在没有通过表格视图（索引：行方法）出现问题，但对于我的生活，而不是在地图视图中。

所以我的问题是 - 我如何收集注释拾取的信息并将其与其他数据一起传递到另一个视图。我尝试在带有注释的数组中添加额外的数据，并在用户单击按钮时生成它，但只有最后一个对象显示在数组中。

我知道我需要认真学习一些关于数组和传递数据的知识；但任何帮助将不胜感激。

我的热点课程：

```
 @interface Hotspot : NSObject <MKAnnotation>

{
    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subTitle;
    NSString *detail;
    float price;
    NSString *contact;

}

@property (nonatomic, assign) CLLocationCoordinate2D coordinate;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *subTitle;
@property (nonatomic, copy) NSString *detail;
@property (nonatomic) float price;
@property (nonatomic, copy) NSString *contact; 
```

我的 MapView（Company 类保存我从 SQL 文件中获得的数据 - 我使用“companys”将所有数据加载到 ViewDidLoad 中，然后使用数组（这可以正常工作）：-

```
- (void)loadAnnotations {

    NSMutableArray *annotations = [[NSMutableArray alloc] init];

    for (int i = 0; i < [companys count]; i++)
     //   storedNumber = i;
    {
        Company* company =  [self.companys objectAtIndex:i];

        CGFloat latitude = company.latitude;
    CGFloat longitude = company.longitude;

        Hotspot *myAnnotations = [[Hotspot alloc] init];  
        MKCoordinateRegion region = { { latitude , longitude } , { 12.0f , 12.0f } };
        [myAnnotations setCoordinate: region.center];
        [myAnnotations setSubTitle:company.type];
        [myAnnotations setTitle:company.name];
        [myAnnotations setDetail:company.details];
        [myAnnotations setPrice:company.price];
        [myAnnotations setContact:company.contact];

    [annotations addObject: myAnnotations];
    }
    [promoView addAnnotations: annotations]; 
```

我的注释视图（一旦我添加了您的建议，这将需要更改：

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation

{
    NSLog(@"AnnotationView");

    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;
  //  static NSString *AnnotationViewID = @"annotationViewID";

    MKPinAnnotationView* pinView = (MKPinAnnotationView*)[promoView dequeueReusableAnnotationViewWithIdentifier:@"CustomPinAnnotationView"];
    if (!pinView) {
        pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation
                                                   reuseIdentifier:@"CustomPinAnnotation"] autorelease];

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        NSLog(@"Map View Title, %@", annotation.title);

        [rightButton setTitle:annotation.title forState:UIControlStateNormal];

        [rightButton addTarget:self
                        action:@selector(showDetails:)

             forControlEvents:UIControlEventTouchUpInside];

        pinView.rightCalloutAccessoryView = rightButton;

        UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile.png"]];
        pinView.leftCalloutAccessoryView = profileIconView;
        [profileIconView release];

        if ([annotation isKindOfClass:[Hotspot class]]) {
            pinView.pinColor = MKPinAnnotationColorRed;
            pinView.draggable =YES;
        }
        else 
            pinView.pinColor = MKPinAnnotationColorGreen;
        pinView.animatesDrop = YES;
        pinView.canShowCallout = YES;
    }
    else
        pinView.annotation = annotation;
    return pinView;
} 
```

你的代码 -

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    PromoViewController *promoController = [[PromoViewController alloc] initWithNibName:@"DetailView" bundle:nil];

    promoController.hotspot = (Hotspot*)view.annotation;

    [self.navigationController pushViewController:promoController animated:YES];

    [promoController release]; 
```

对于 PromoViewController，我将 .h 文件设置为：

```
@interface PromoViewController : UIViewController
{
    IBOutlet UILabel *nameLabel;
    IBOutlet UILabel *detailLabel;
    IBOutlet UILabel *typeLabel;
    IBOutlet UILabel *contactLabel;
    IBOutlet UILabel *priceLabel;
} 
```

但我不是 100% 确定如何实现它，而且我确实收到了这一行的错误：-

```
promoController.hotspot = (Hotspot*)view.annotation; 
```

说在对象 PromoViewController 上找不到属性热点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:13:25.517

您传递的数据类型应该有代码，遵守 MKAnnotation 协议（即标题、副标题和坐标）。然后，您将该注释从一个视图传递到另一个视图。

例如（你的代码会更好），想象一个 Hotspot 类

```
@interface Hotspot : NSObject <MKAnnotation> 

@property (copy, nonatomic) NSString *title;
@property (copy, nonatomic) NSString *subTitle;
@property (copy, nonatomic) NSString *moreInfo;
@property (copy, nonatomic) NSString *time;
@property (copy, nonatomic) NSNumber *altitude, *accuracy;

- (CLLocationCoordinate2D) coordinate; 
```

在您的 mapView 委托类中，您将执行以下操作：

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control{
    DetailViewController *detailController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:nil];
    detailController.hotspot = (Hotspot*)view.annotation;
    [self.navigationController pushViewController:detailController animated:YES];
    [detailController release];
} 
```

然后在您的 detailViewController 中，只显示您想要显示的信息：描述、标题、图像等，只要它们在您的 Hotspot 类中可用。

* * *

编辑

阅读您的代码后，您有两个选择：在 PromoViewController 中添加热点属性或从 mapView:annotationView:calloutAccessoryControlTapped 设置标签。

我会选择第一个，从封装和设计的角度来看，它要好得多。

将您的 PromoViewController 标头更改为

```
#import "Hotspot.h"

@interface PromoViewController : UIViewController
{
    IBOutlet UILabel *nameLabel;
    IBOutlet UILabel *detailLabel;
    IBOutlet UILabel *typeLabel;
    IBOutlet UILabel *contactLabel;
    IBOutlet UILabel *priceLabel;
}
@property (nonatomic, retain) Hotspot *hotspot; 
```

在您的 PromoViewController.m 中将 viewWillAppear: 方法更改为

```
- (void)viewWillAppear:(BOOL)animated{
    nameLabel.text = hotspot.title;
    detailLabel.text = hotspot.detail;
    typeLabel.text = hotspot.subTitle;
    priceLabel.text = [NSString stringWithFormat:@"%0.2f", hotspot.price];
    //And so on...
} 
```

你当然需要在 PromoViewController.m 的顶部添加 @synthesize 热点

# cmake - 在 CMake 项目中包含 glib.h

> ID：10383830
> 
> 赞同：7
> 
> 时间：2012-04-30T12:37:26.530
> 
> 标签：cmake, glib

尝试使用 CMake 在 Ubuntu 中编译一个库，其中一个文件包括 glib.h。该软件包已安装并`glib.h`位于`/usr/include/glib-2.0/glib.h`.

我添加了以下内容，但编译器仍然找不到 glib.h。

```
FIND_PACKAGE(glib-2.0)
IF (glib-2.0_FOUND)
    INCLUDE_DIRECTORIES(${glib-2.0_INCLUDE_DIR})
ENDIF() 
```

有人知道我想找什么包裹吗？

我最终使用的实际代码是

```
find_package(PkgConfig REQUIRED)
pkg_check_modules(GLIB_PKG glib-2.0)

if (GLIB_PKG_FOUND)
    message(Found glib-2.0)
include_directories(${GLIB_PKG_INCLUDE_DIRS}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T13:07:41.513

我建议您通过链接：[如何查找包工作](http://www.vtk.org/Wiki/CMake%3aHow_To_Find_Libraries#How_package_finding_works)。

作为参考，您可以查看此[CMake 模块](http://gitorious.org/gammu/mainline/blobs/9d71b23a73186aad73453973e05a94fb36e16f4f/cmake/FindGlib.cmake)以查找 glib2。

您感兴趣的线路是：

```
find_path(GLIB_INCLUDE_DIR NAMES glib.h PATH_SUFFIXES glib-2.0) 
```

我建议您将此模块复制到您的`<project root>/cmake/`目录中。然后，`find_package`在您的根 CMakeLists.txt 文件中使用 a 。

# python - html5lib。如何在不添加 html、head 和 body 标签的情况下获取有效的 html？

> ID：10383833
> 
> 赞同：0
> 
> 时间：2012-04-30T12:37:36.827
> 
> 标签：python, dom, html-parsing, html5lib

我正在使用**html5lib**验证来自用户的自定义 HTML 。问题是 html5lib 添加了`html`,`head`和`body`标签，我不需要。

```
parser = html5lib.HTMLParser(tree=treebuilders.getTreeBuilder("simpleTree"))
f = open('/home/user/ex.html')
doc = parser.parse(f)
doc.toxml()
'<html><head/><body><div>\n  <a href="http://speedhunters.com">speedhunters.com\n</a></div><a href="http://speedhunters.com">\n</a></body></html>' 
```

这是经过验证的，可以清理，但我怎样才能删除或阻止将这些标签添加到树中？我的意思是排除`replace`使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-17T17:23:32.567

似乎我们可以使用 s 的`hidden`属性`Tag`来防止标签本身在将标签/汤转换为字符串/unicode时被“导出”：

```
>>> from bs4 import BeautifulSoup
>>> html = u"<div><footer><h3>foot</h3></footer></div><div>foo</div>"
>>> soup = BeautifulSoup(html, "html5lib")
>>> print soup.body.prettify()
<body>
 <div>
  <footer>
   <h3>
    foot
   </h3>
  </footer>
 </div>
 <div>
  foo
 </div>
</body> 
```

本质上，提问者的目标是在没有包装器本身的情况下获取`body`标签的全部内容。`<body>`这有效：

```
>>> soup.body.hidden=True
>>> print soup.body.prettify()
 <div>
  <footer>
   <h3>
    foot
   </h3>
  </footer>
 </div>
 <div>
  foo
 </div> 
```

我通过 BeautifulSoup 源代码发现了这一点。调用后`soup = BeautifulSoup(html)`，根标签的内部名称为“[document]”。默认情况下，只有根标签有`hidden==True`. 这可以防止其名称出现在任何 HTML 输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:06:36.840

哇，html5lib 有可怕的文档。

查看源代码并处理快速测试用例，这似乎可行：

```
import html5lib
from html5lib import treebuilders
parser = html5lib.HTMLParser(tree=treebuilders.getTreeBuilder("simpleTree"))
with open('test.html') as test:
    doc = parser.parse(test)
    for child in doc:
        if child.parent.name == "body":
            return child.toxml() 
```

这有点骇人听闻，但不如`replace()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T14:35:26.170

如果您正在处理“不常见”的 html，[lxml可能是一个更好的选择。](http://lxml.de/)

# javascript - 从选择框中使用 JS 更改 href 值

> ID：10383834
> 
> 赞同：1
> 
> 时间：2012-04-30T12:37:39.913
> 
> 标签：javascript, html

我有这个从我的数据库中获取数据的选择框。我想要做的是在我的选择框旁边添加编辑和删除按钮，这些按钮将对当前选定的选项执行相应的操作。

所以我添加了两个按钮，它们直接指向完成所有这些工作的 php 脚本。我的问题是 JavaScript，我需要更新按钮的元素。

但是我的 JS 函数不起作用。似乎它甚至没有被解雇。

[http://jsfiddle.net/y5g42/33/](http://jsfiddle.net/y5g42/33/)

HTML：

```
<select name='selectHotel' onChange='updateButtons(this.options[this.selectedIndex].text)'>
    <option value="volvo.php">Volvo</option>
    <option value="saab.php">Saab</option>
    <option value="mercedes.php">Mercedes</option>
    <option value="audi.php">Audi</option>
</select>
<a href='' id='editButton'><button>Edit</button></a>
<a href='' id='deleteButton'><button>Delete</button></a> 
```

JavaScript：

```
function updateButtons(var) {
    element = document.getElementById('editButton');
    element.href = var;
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:41:54.857

您不能`var`用作变量名 -`var`是 javascripts 的保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:41:02.317

jsFiddle 的`onLoad`选项将您的代码包装在一个回调函数中。
因此，您的函数定义在代码之外是不可见的。

您需要改为选择`No Wrap`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:58:20.683

你的逻辑和小提琴本身有几个问题。

不使用 JavaScript 库的最佳方法是将`onchange`处理程序附加`onload`到窗口中并处理那里的所有内容：

```
window.onload = function() {
    var oDDL = document.getElementById("selectHotel");

    oDDL.onchange = function updateButtons() {
        var oLink = document.getElementById('editButton');    
        oLink.href = oDDL.value;
    };

    oDDL.onchange();
}; 
```

要让它工作，添加`id="selectHotel"`到`<select>`元素并`onchange`从中删除内联。

[更新了小提琴](http://jsfiddle.net/y5g42/45/)。

在您最初的小提琴中，您没有选择适当的框架属性。

请注意，我`onchange`手动调用一次以反映所选值，否则在选择其他值之前单击按钮将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:59:00.217

`onchange`您只是在函数上传递值而不是文本

```
 onChange='updateButtons(this.options[this.selectedIndex].value)' 
```

你可以尝试这样的事情：

```
 window.updateButtons = function(value) {

     element = document.getElementById('editButton');
     var url = window.location.href;
     element.href = url + value;
     console.log(element.href);  
} 
```

**见演示** ：http: [//jsfiddle.net/y5g42/46/](http://jsfiddle.net/y5g42/46/)

# github - Github - 记事本++

> ID：10383837
> 
> 赞同：6
> 
> 时间：2012-04-30T12:37:51.270
> 
> 标签：github, notepad++

我四处寻找，找不到任何东西，所以任何人都可以帮助我让 notepad++ 与 Github 无缝协作。我希望能够打开记事本++并能够处理文件，然后当我保存（或直播）时，它将显示在 Github 上。我已经安装了他们说我需要的所有东西并拥有自述文件，但仅此而已。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T12:41:58.760

您是否尝试过 Notepad++ 的这个插件？ [http://forum.lowyat.net/topic/1358320/all](http://forum.lowyat.net/topic/1358320/all) 不能直接保存在github上但是可以保存然后提交这些修改过的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-26T22:31:15.350

这确实是一个老问题，但我今天刚刚碰到它，并想我会分享我的策略，因为这里提出的插件还需要 TortoiseSVN，这是一个我不觉得像我的那样流畅和易于使用的设置选择。

在发现没有“独立”插件后，我开始使用[GitHub Desktop App](https://desktop.github.com/)。这使您能够在本地设置存储库，进行提交、拉取、推送等。只需使用您的帐户登录，然后为您的项目创建一个本地存储库。

创建存储库后，只需打开要使用 Notepad++ 编辑的文件。进行一些更改，保存并使用 GitHub 桌面应用程序来完成所有与 GitHub 相关的事情。与插件相反，这个应用程序提供了与 GitHub 的全功能交互。

顺便说一句，如果您有两台显示器，或者一台大显示器，您可以并排打开这两个应用程序，这模拟了您可以在高级 IDE（例如 Eclipse）中找到的类似设置。我发现这比打开一个单独的插件对话框来做与 Git 相关的事情更方便和流畅。在您对文件进行任何编辑（使用 Notepadd++）或对文件结构进行任何更改（添加、重命名、移动、删除文件）之后，GitHub Desktop 应用程序甚至会自动刷新，而无需您进行任何交互。

# android - 获取释放密钥后地图未显示

> ID：10383846
> 
> 赞同：1
> 
> 时间：2012-04-30T12:38:48.573
> 
> 标签：android, debugging, release, android-mapview

只要我有调试密钥，我就可以看到地图（mapview）。今天我在 Goolge 的网站上获得了一个发布密钥（在生成证书指纹之后）。一旦我用我获得的新发布密钥替换了调试密钥，地图就不再显示了。在我看到地图之前，我必须采取额外的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:44:49.457

你如何测试它？使用发布密钥，您不会在调试或运行选项中看到地图，只能在导出和签名的应用程序中看到，使用与您用来检索地图密钥相同的密钥。

如果您想看到地图继续使用调试键并切换到发行版，那么只有在您真正导出应用程序时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:58:58.813

查看这些教程（从 28 日到 31 日）觉得可能有用。

[http://www.youtube.com/watch?v=vgr4l1nsFdU](http://www.youtube.com/watch?v=vgr4l1nsFdU)

它以非常详细的逐步方式解释了谷歌地图的设置。

# testing - selenium 不止一次运行相同的方法

> ID：10383847
> 
> 赞同：0
> 
> 时间：2012-04-30T12:38:52.380
> 
> 标签：testing, selenium, automated-tests, selenium-rc

几周前我开始使用硒。我这样设计了我的测试

1.  使用@BeforeClass 我正在创建一个对象并调用一个打开浏览器并执行登录操作的类方法。
2.  我有另一种方法，其中包含我想要执行的测试操作的硒代码，在我的情况下是边界值分析
3.  现在我创建了一个@Test 方法，它调用这个先前的方法并将测试所需的值传递给它

我面临的问题是 1\. 浏览器启动并且登录操作开始，之后浏览器尝试再次打开主页。2.我想知道这是否是编写硒测试脚本的正确方法

另外，如果我删除第 1 步并在第 2 步中包含登录方法，我的测试运行良好我在 grails 上的 groovy 上使用 selenium-rc 和 STS

**一类代码**

```
void candidatelogin() {
        selenium.open("/jeepnee/")
        selenium.click("link=Login")
        selenium.type("id=username", "csv_candidate4@trashmail.net")
        selenium.type("id=j_password", "kanishka1")
        selenium.click("id=submit")
        selenium.waitForPageToLoad("60000")
    } 
```

**以上部分我从下面的代码中调用**

```
class CandidateEditProfileInfoFunctionalTests extends GroovyTestCase{

public String addressone="nejshdgfbvxczaqwer1y2io3lkjh7dg*lakiqwerjshag"
    @BeforeClass
    static void setUp() {
        GeneralTests candidate= new GeneralTests()
        candidate.candidatelogin()
    }

void EditProfileInfoFail(String streeta, String streetb, String city, String state, String zip, String mobilecountry, String mobilearea, String mobilephone, String landlinecountry, String landlinearea, String landlinenumber) {
        selenium.waitForPageToLoad("60000")
        selenium.click("link=My Profile")
        selenium.waitForPageToLoad("80000")
        selenium.click("id=editProfile")
        selenium.waitForPageToLoad("80000")
        selenium.type("id=street1", streeta)
        selenium.type("id=street2", streetb)
        selenium.type("id=city", city)
        selenium.type("id=state", state)
        selenium.type("id=zip", zip)
        selenium.select("id=country", "label=Philippines")
        selenium.type("id=mobileCountryCode", mobilecountry)
        selenium.type("id=mobileAreaCode", mobilearea)
        selenium.type("id=mobilePhoneNumber", mobilephone)
        selenium.type("id=landlineCountryCode", landlinecountry)
        selenium.type("id=landlineAreaCode", landlinearea)
        selenium.type("id=landlinePhoneNumber", landlinenumber)
        selenium.click("id=submit")
        selenium.waitForPageToLoad("80000")
        assertTrue(selenium.isTextPresent("Please complete the required fields"))
        assertEquals("Candidate Creation - Step 2", selenium.getTitle())
    }
    @Test
    void homeCountryOnFailureShowsErrorMessage(){
        EditProfileInfoFail(addressone, "aaa", "bangalote", "karnataka", "1234", "11", "222", "12345", "11", "22", "5432")

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:44:05.853

您的任何逻辑是否在您的 @BeforeClass 方法中重复？该方法运行一次以设置所有测试方法所需的任何依赖项。听起来此方法中的逻辑在步骤 2 中有些重复。似乎可以删除步骤 2 中打开主页的代码，因为它发生在您的 @BeforeClass 方法中。如果您的后续测试需要返回主页，最好更改为 @Before 注释，然后它将在每次测试运行之前运行该代码。

# android - 在 Cube 中创建可点击的边

> ID：10383848
> 
> 赞同：3
> 
> 时间：2012-04-30T12:38:55.047
> 
> 标签：android, opengl-es, cube

我指的是 API demo 中给出的 3D 立方体示例。但是如何使立方体的侧面成为可点击的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:16:58.510

a 中的“元素”（在本例中为[Cubes](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/kube/Cube.html)）在[此处提到](https://stackoverflow.com/q/4613333/1262542)`GLSurfaceView`的意义上是不可点击的。您需要自己添加这种便利。[请参阅有关 ray-picking](https://stackoverflow.com/questions/2093096/implementing-ray-picking)的这个问题的答案。

# objective-c - 我的 JSON 写得好吗？

> ID：10383852
> 
> 赞同：0
> 
> 时间：2012-04-30T12:39:12.987
> 
> 标签：objective-c, json, core-data

我的 JSON 写得好吗？我只有带有详细信息的框，然后我想填充核心数据实体。（顺便说一句，我需要一个简单的教程来在 coredata 中设置我的数据，你有吗？cimgf 的教程太复杂或者我只是不明白它们：/

```
{
    "boxes": {
    "boxesDetail": [
        {
            "codeArticle": "WPCDE01C412L",
            "nameBox": "boxName",
            "texteMarketing": "boxTextMarketing",
            "descriptionBox": "boxDescritpion",
            "nbActivities": 1650,
            "kindBox": "boxKind",
            "typeBox": "boxType",
            "priceBox": 20,
            "dlu": 2014,
            "note": 3
        },
        {
            "codeArticle": "BOOYAKA!!",
            "nameBox": "boxNameName",
            "texteMarketing": "boxTextMarketing",
            "descriptionBox": "boxDescritpion",
            "nbActivities": 1650,
            "kindBox": "boxKind",
            "typeBox": "boxType",
            "priceBox": 39,
            "dlu": 2014,
            "note": 3
        }
    ]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:21:04.227

正如 JeremyP 所说，您应该使用 JSON Parser 来检查您的 JSON。我也完全推荐[jsonlint.com](http://jsonlint.com)来检查 JSON。

至于 CoreData 的简单教程，我推荐[Ray Wenderlich 的教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。它已针对 iOS 5 进行了更新，因此更新的教程可能会帮助您理解。我还没有完成更新的教程，但我很确定那是我在学习 CoreData 时查看的 pre-iOS 5 教程。

在查看 CoreData 教程并了解它并理解它之后，我将编写一个辅助函数作为你的 Box 上的一个类别。

类似的东西

```
+ (id)boxWithDictionary:(NSDictionary *)dict withManagedObjectContext:(NSManagedObjectContext *)managedObjectContext;
{
    Box *box = [NSEntityDescription insertNewObjectForEntityForName:@"Box" 
                                             inManagedObjectContext:managedObjectContext];

    box.codeArticle    = [dict objectForKey:@"codeArticle"];
    box.nameBox        = [dict objectForKey:@"nameBox"];
    box.texteMarketing = [dict objectForKey:@"texteMarketing"];
    box.descriptionBox = [dict objectForKey:@"descriptionBox"];
    box.nbActivities   = [dict objectForKey:@"nbActivities"];
    box.kindBox        = [dict objectForKey:@"boxKind"];
    box.typeBox        = [dict objectForKey:@"boxType"];
    box.priceBox       = [dict objectForKey:@"priceBox"];
    box.dlu            = [dict objectForKey:@"dlu"];
    box.note           = [dict objectForKey:@"note"];

    return box;
} 
```

将此代码放在一个类别中并放在 Xcode 生成的 Box.m 和 Box.h 文件的单独文件中的原因是，如果您曾经在 CoreData 中编辑 Box 实体并且必须生成一个新文件，它将不会t 用你的辅助函数覆盖这个类别文件。

我希望这有帮助。

# drupal - 节点保存状态

> ID：10383856
> 
> 赞同：0
> 
> 时间：2012-04-30T12:39:28.323
> 
> 标签：drupal

我尝试添加未发布的新节点。

我设置状态 = 0;

但是当检查这个节点时，状态 = 1；

这段代码。

```
$node = new StdClass();
                $node->type = 'article'; //giving it type
                $node->title = $article->headline; //gives title
                $node->body = $article->body; //gives body

                $node->field_abstract[0]['value'] = $article->summary;
                $node->field_is_syndigate[0]['value'] = 1;
                $node->field_syndigate_first_time[0]['value'] = 1;

                $node->language = $language->language; //'en' or 'ar'
                $node->comment = 2; //read&write comment

                //$node->created = $article->parsed_at;
                $node->created = '';
                $node->changed = $node->created;
                $node->status = 0;
                $node->promote = 0;
                $node->sticky = 0;
                $node->format = 4; // Editor Filtered HTML
                $node->uid = $user->uid;

                //$node->field_attribution[0]['value'] = $article->copyright; // attribution
                $attribution = '';
                if($article->logo_path){
                    $attribution = '<img src="http://pub.syndigate.info/logos/small/'.$article->title_id.'.png" title="'.$article->title_name.'" border="0" />';
                    if($article->website){
                        $attribution = '<a href="'.$article->website.'" title="'.$article->title_name.'" target="_blank">'.$attribution.'</a>';
                    }
                    $attribution .= ' ';

                }
                $attribution .= $article->copyright;
                $node->field_attribution[0]['value'] = $attribution; // attribution
                $node->field_source[0]['value'] = $article->title_id; // source
                node_save($node); 
```

如何将节点保存为未发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:06:40.793

以编程方式创建节点时，需要设置

```
$node->is_new = TRUE; 
```

如果您将 设置`$node->created`为空值，我建议您从脚本中删除这一行，`node_save()`将处理它。与`$node->changed`您提供相同的值相同，只需从脚本中删除此行

希望这有帮助

# f# - 向 F# 可区分联合添加常量字段

> ID：10383858
> 
> 赞同：8
> 
> 时间：2012-04-30T12:39:43.113
> 
> 标签：f#, playing-cards, discriminated-union

是否可以将常量字段值添加到 F# 区分联合？

我可以做这样的事情吗？

```
type Suit
  | Clubs("C")
  | Diamonds("D")
  | Hearts("H")
  | Spades("S")
  with
    override this.ToString() =
      // print out the letter associated with the specific item
  end 
```

如果我正在编写 Java 枚举，我会向构造函数添加一个私有值，如下所示：

```
public enum Suit {
  CLUBS("C"),
  DIAMONDS("D"),
  HEARTS("H"),
  SPADES("S");

  private final String symbol;

  Suit(final String symbol) {
    this.symbol = symbol;
  }

  @Override
  public String toString() {
    return symbol;
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T13:03:03.597

只是为了完整起见，这意味着：

```
type Suit = 
  | Clubs
  | Diamonds
  | Hearts
  | Spades
  with
    override this.ToString() =
        match this with
        | Clubs -> "C"
        | Diamonds -> "D"
        | Hearts -> "H"
        | Spades -> "S" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-30T12:56:43.493

最接近您的要求的是[F# enums](http://msdn.microsoft.com/en-us/library/dd233216.aspx)：

```
type Suit =
    | Diamonds = 'D'
    | Clubs = 'C'
    | Hearts = 'H'
    | Spades = 'S'

let a = Suit.Spades.ToString("g");;
// val a : string = "Spades"

let b = Suit.Spades.ToString("d");; 
// val b : string = "S" 
```

F# 枚举的问题在于非详尽的模式匹配。操作枚举时，您必须使用通配符 ( `_`) 作为最后一个模式。因此，人们往往更喜欢可区分的联合并编写显式`ToString`函数。

另一种解决方案是在构造函数和相应的字符串值之间进行映射。这在我们需要添加更多构造函数时很有帮助：

```
type SuitFactory() =
    static member Names = dict [ Clubs, "C"; 
                                 Diamonds, "D";
                                 Hearts, "H";
                                 Spades, "S" ]
and Suit = 
  | Clubs
  | Diamonds
  | Hearts
  | Spades
  with override x.ToString() = SuitFactory.Names.[x] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:42:36.147

很确定你不能，但是编写一个模式匹配的函数然后组合这两件事是微不足道的

# informatica - 使用 java API 调用 Informatica B2B 数据转换时出错

> ID：10383859
> 
> 赞同：1
> 
> 时间：2012-04-30T12:39:53.033
> 
> 标签：informatica, b2b

我正在尝试从 java API 运行 DataTransformation 并收到以下错误消息：

`Failure while trying to create engine log /Informatica/9.1.0/DataTransformation/CMReports/Init/Events.cme- for more information see file://internal`

您能否告知此异常的原因以及如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T09:39:04.253

似乎通过 B2B 运行 informatica Workflow 的用户没有创建此日志文件的权限。请为此目录分配正确的权限。

请注意，这是由 Informatica DT 或 UDT Transformation 创建的日志文件，如果失败，您必须将此 event.cme 导入 Informatica DT 以发现错误。

# ruby-on-rails - 如何在 Gmaps4Rails 中添加不同类型的标记

> ID：10383860
> 
> 赞同：2
> 
> 时间：2012-04-30T12:39:59.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我需要在我的谷歌地图中显示两个不同的标记。我正在使用 rails 3 和 Gmaps4rails gem。

我有我的控制器

```
 @marker1 = User.find(1)
 @marker2 = User.find(2)
 @json = [@marker1,@marker2].to_gmaps4rails 
```

在视图文件中

```
 <%= gmaps({
        "map_options" => { "zoom" => 12, "auto_adjust" => false, "center_latitude" => @marker1.lat, "center_longitude" => @marker1.lng},
        "markers"     => { "data" => @json }
        })
  %>

 <%= yield :scripts %> 
```

我得到的地图视图是

![在此处输入图像描述](../Images/59084725b9532003079bc16411c3a3c1.png)

我需要为它们中的每一个添加不同的标记图像。如何才能做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:41:01.233

我只有一个答案：它在[wiki](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Markers)部分中进行了解释`Customize each marker`。

还有一些替代方法可以从控制器而不是模型级别在块中添加样式。

# c# - ViewModel 在表单提交时为空

> ID：10383862
> 
> 赞同：0
> 
> 时间：2012-04-30T12:40:13.233
> 
> 标签：c#, asp.net-mvc-3, viewmodel

我想做的是创建一个 SubCategory 对象。为了做到这一点，我制作了一个视图模型，它将为我的视图提供必要的数据（包括子类别将绑定到的类别对象。）

当我发布我的表单时，视图模型被返回到我的控制器，但我的子类别的所有属性和我从下拉列表中选择的值都是空的。

我究竟做错了什么？:S

看法：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.master" Inherits="System.Web.Mvc.ViewPage<SkyLearn.Areas.Categories.Models.CategoryViewModel>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Create
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Create</h2>

<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>" type="text/javascript"></script>

<form action="" method="post" enctype="multipart/form-data">
    <%: Html.ValidationSummary(true) %>
    <fieldset>
        <legend>SubCategory</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.subcategory.Title) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.subcategory.Title)%>
            <%: Html.ValidationMessageFor(model => model.subcategory.Title)%>
        </div>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.subcategory.Icon)%>
        </div>
        <div class="editor-field">
            <input type="file" name="icon" id="icon"/>
        </div>

        <%: Html.DropDownListFor(selectedcategory => Model.selectedCategory, Model.categories) %>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.subcategory.Description)%>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.subcategory.Description)%>
            <%: Html.ValidationMessageFor(model => model.subcategory.Description)%>
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
</form>

<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div>

</asp:Content>

<asp:Content ID="Content3" ContentPlaceHolderID="SideContent" runat="server">
</asp:Content> 
```

控制器：

```
[Authorize(Roles = "administrator")]
        [HttpPost]
        public ActionResult Create(CategoryViewModel viewmodel, HttpPostedFileBase Icon)
        {
            SubCategory subcategory = viewmodel.subcategory;

            subcategory.Category = categorycontroller.getCategoryByName(viewmodel.selectedCategory);

            if (Icon != null && Icon.ContentLength > 0)
            {
                // extract only the filename
                var fileName = Path.GetFileName(Icon.FileName);
                // store the file inside ~/App_Data/uploads folder
                var path = Path.Combine(Server.MapPath("../../Content/icons/"), fileName);
                Icon.SaveAs(path);
                subcategory.Icon = fileName;
            }

            if (ModelState.IsValid)
            {
                db.subcategories.Add(subcategory);
                db.SaveChanges();
                return RedirectToAction("Index");  
            }

            return View(subcategory);
        } 
```

视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.Web.Mvc;

namespace SkyLearn.Areas.Categories.Models
{
    public class CategoryViewModel
    {
        public List<SelectListItem> categories;
        public SubCategory subcategory;
        public string selectedCategory;

        public CategoryViewModel()
        {
            categories = new List<SelectListItem>();
            subcategory = new SubCategory();
            selectedCategory = "";
        }
    }
} 
```

视图模型包含我尝试创建的子类别可以绑定到的类别列表。它还包含一个子类别对象，我可以使用它来创建子类别。最后一个属性是我想用来绑定下拉列表中的选择的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:29:52.417

ASP.Net MVC3 的 SelectListItem 不符合您的预期。此外，尝试 Html.DropDownListFor() 而不是 Html.EditorFor() 来制作您的下拉列表。

**在视图模型中：**

```
public IList<string> PossibleValues {get; set;}
public string SelectedValue {get; set;} 
```

将值加载到 ViewModel 的构造函数中的 PossibleValues 中。

**在视图中：**

```
@Html.DropDownListFor(x => x.SelectedValue, new SelectList(Model.PossibleValues)) 
```

这将自动生成您的下拉列表并将其绑定到您的模型。如果需要，您也可以将默认值和其他自定义项传递到此 Html 辅助函数中。

**保存其他值** 您可以保存其他值，用户不应该选择编辑但如果用户进行编辑则不是关键任务的值，使用

```
@Html.HiddenFor(m => m.RememberThisValue); 
```

请记住，这个值是隐藏的，但仍然可以在 DOM 上编辑并发布用户想要的任何内容。确保通过检查 POST 的隐藏值来保护自己免受恶意值注入。

将所有重要的内容存储在服务器端，通过您的模型将哈希/私钥传递给用户，并实现静态会话字典来存储这些小信息。

# iphone - 如何将子视图放置在屏幕上的任何位置，“停靠视图”

> ID：10383865
> 
> 赞同：0
> 
> 时间：2012-04-30T12:40:29.523
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在 iOS 上，有什么方法可以将视图（如子视图）放置在屏幕上的任何位置（主视图）？我正在向用户提供一个界面，他们可以将其放置在他们想要的任何地方（停靠视图）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:42:03.267

尝试：

```
myView.frame = CGRectMake(x, y, width, height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:43:37.543

请遵循以下两个步骤：

1）。`yourSubView.frame = CGRectMake(xOffset,yOffset,50,50);`

2）。`[self.view addSubview:yourSubView];`

**拖放：**

如果您想拖动子视图，您可以使用它`touchmethods:`来获取当前的 x 和 y 坐标并将它们动态填充到框架中。

喜欢：

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView: touch.view];
    yourSubview.frame = CGRectMake(location.x, location.y, 50, 50);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:37:32.943

我建议使用平移手势识别器 (UIPanGestureRecognizer) 而不是使用 touchesBegan/touchesMoved/touchesEnded。它更容易和更清洁。

在 Xcode 文档中搜索“Touches”并查找具有该名称的示例应用程序。包含 2 个项目 - 一个使用手势识别器，另一个使用 touchesBegan/touchesMoved/touchesEnded。

它准确地显示了您需要做什么才能在屏幕上拖动视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T13:31:11.677

```
myView.frame = CGRectMake(x, y, width, height); 
```

定义 x,y,w,h；

```
myView.frame = CGRectMake(50, 50, 100, 100); 
```

# gmail - 使用 mutt 时出错 :gnutls_handshake: 收到了一个长度意外的 TLS 数据包。！

> ID：10383866
> 
> 赞同：3
> 
> 时间：2012-04-30T12:40:33.673
> 
> 标签：gmail, mutt

我收到此错误“gnutls_handshake：收到了意外长度的 TLS 数据包”。一次又一次地尝试使用 mutt。我正在使用 Ubuntu 11.04 32 位。我搜索了这个问题，但找不到关于它的头和尾。

是操作系统特定的问题（不太可能是因为同一个 muttrc 在 fedora 16 中工作）还是我的 .muttrc 有问题

# .muttrc

```
{# A basic .muttrc for use with Gmail

# Change the following six lines to match your Gmail account details
set imap_user = "email@gmail.com"
set imap_pass = "password"
set smtp_url = "smtp://email@smtp.gmail.com:587/"
set smtp_pass = "password"
set from = "email@gmail.com"
set realname = "Vinit Kumar"

# Change the following line to a different editor you prefer.
set editor = "vim"

# Basic config, you can leave this as is
set folder = "imaps://imap.gmail.com:993"
set spoolfile = "+INBOX"
set imap_check_subscribed
set hostname = gmail.com
set mail_check = 120
set timeout = 300
set imap_keepalive = 300
set postponed = "+[GMail]/Drafts"
set record = "+[GMail]/Sent Mail"
set header_cache=~/.mutt/cache/headers
set message_cachedir=~/.mutt/cache/bodies
set certificate_file=~/.mutt/certificates
set move = no
set include
set sort = 'threads'
set sort_aux = 'reverse-last-date-received'
set auto_tag = yes
ignore "Authentication-Results:"
ignore "DomainKey-Signature:"
ignore "DKIM-Signature:"
hdr_order Date From To Cc
alternative_order text/plain text/html *
auto_view text/html
bind editor <Tab> complete-query
bind editor ^T complete
bind editor <space> noop 

# Gmail-style keyboard shortcuts
macro index,pager y "<enter-command>unset trash\n <delete-message>" "Gmail archive     message"
macro index,pager d "<enter-command>set trash=\"imaps://imap.googlemail.com/[GMail]     /Bin\"\n <delete-message>" "Gmail delete message"
macro index,pager gi "<change-folder>=INBOX<enter>" "Go to inbox"
macro index,pager ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
macro index,pager gs "<change-folder>=[Gmail]/Starred<enter>" "Go to starred messages"
macro index,pager gd "<change-folder>=[Gmail]/Drafts<enter>" "Go to drafts"} 
```

# javascript - MVC - Ajax 在视图中存在的所有 div 标签内发布内容？

> ID：10383867
> 
> 赞同：0
> 
> 时间：2012-04-30T12:40:36.157
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, razor

我在我的项目中使用 MVC3。

我有一个大约 2-12 个 div 标签的视图，这取决于有多少问题，如果有 5 个问题，则有 5 个 div 标签看起来像一个答案表格。所有这些 div 标签都在一个表单中。

每个 div 标签都有一个 hiddenfield、textarea 和一个 DropDownList。这些字段中的值由 ajax post 使用，它获取字段中的值并将其发布到我的控制器。

到目前为止，我可以用我的代码发布第一个 div 标签，但其余的 div 标签没有发布。我正在寻找的是能够在单击“全部保存”按钮时一一发布所有 div 标签。此外，所有 div 标签都具有相同的类名：“wizard-step2”。它们都有一个唯一的 ID，ID 的值是从数据库中获取的 QuestionID。

这是我的帖子的jquery代码：

```
$("saveall").click(function() {
        $('#loading2').show();
        setTimeout(function () { $("#loading2").hide(); }, 400);
        var $step = $(".wizard-step2"); // show all steps
        var Comment = $step.find(".Comment").val();
        var QuestionID = $step.find(".QuestionID").val();
        var Grade = $step.find(".Grade").val();

        var data =
            {
                Comment: Comment,
                QuestionID: QuestionID,
                Grade: Grade
            };
        $.post('@Url.Action("AnswerForm", "AnswerNKI")', data, function () {

        });
    }); 
```

以下代码将仅保存第一个 div 标签，而不保存其余部分。

这是我的 HTML：

```
@{
                int nr = 1;
                foreach (SelectedQuestionViewModel items in Model.AllSelectedQuestions)
                {
                <div class="wizard-step2" id="@items.QuestionID">
                    <br/>
                    <br/>
                    <p>@(nr++).&nbsp;@items.SelectedQuestionText <span class="b">Betyg:&nbsp;&nbsp;
                   @{
                    var selectListItems = (new[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }).Select(i => new SelectListItem { Text = i.ToString(), Value = i.ToString(), Selected = (items.Grade.HasValue && i == items.Grade.Value) });

                     @Html.DropDownList("selectetListItems", selectListItems, "n/a", new { @class = "Grade" })
                    }</span></p>

                    <div class="editor-field">
                        @Html.TextArea("Comment", items.Comment, new { @id = "selectstyle3", @class = "Comment" })
                    </div>
                    <br/>
                    <br/>
                    @Html.Hidden("QuestionID", items.QuestionID, new { @id = "SelectedQuestions", @class = "QuestionID" })
                    <br/>
                </div>
                }
 } 
```

任何帮助表示赞赏。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:58:54.907

Try this one... it will collect all your divs into one single array, and using ajax post will post the data...

```
$.fn.serializeObject = function () {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function () {
            if (o[this.name]) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

$(document).ready(function () {
    $("#Submit").click(function () {
        var QuestionAnswerArray = [];
        var QuestionAnswerLength = $(".wizard-step2").length;
        $(".wizard-step2").each(function (i) {
            var test = $(this).find("select,textarea, input").serializeObject()
            QuestionAnswerArray.push(test);
            if ((i + 1) == QuestionAnswerLength) {
                $.ajax({
                    type: 'POST',
                    url: '/../AnswerNKI/AnswerForm',
                    data: JSON.stringify(QuestionAnswerArray),
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (return_flag) {                            
                        if (return_flag == true) {
                            alert("Question and Answers Saved Succesfully!");                                
                        } else {
                            alert("Error Occured");
                        }
                    }
                });
            }
        });
    });
}); 
```

and in your controller...

```
[HttpPost]
public ActionResult AnswerForm(Answers[] answers)
{
                foreach (var item in answers)
                {
                    // do whatever you want here
                }
                return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:33:19.433

我不得不做一个 for 循环这是正确的答案：

```
var $step = $(".wizard-step2"); // get current step
            for (var i = 0; i < $step.length; i++) {

                var allsteps = $(".wizard-step2");
                var Allsteps = $(allsteps[i]);
                var Comment = Allsteps.find(".Comment").val();
                var QuestionID = Allsteps.find(".QuestionID").val();
                var Grade = Allsteps.find(".Grade").val();

                var data =
                {
                    Comment: Comment,
                    QuestionID: QuestionID,
                    Grade: Grade
                };
                $.post('@Url.Action("AnswerForm", "AnswerNKI")', data, function () {

                    if (Comment != null && Grade > 0) {
                        $('a[data-id="' + QuestionID + '"]').removeClass("unfinished");
                        $('a[data-id="' + QuestionID + '"]').addClass("completed");
                    } else {
                        $('a[data-id="' + QuestionID + '"]').removeClass("completed");
                        $('a[data-id="' + QuestionID + '"]').addClass("unfinished");

                    }

                });
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:58:10.823

使用该[`.each()`](http://api.jquery.com/each/)函数遍历 div，并为每个单独的 div 发送 AJAX 帖子。在没有看到 HTML 结构的情况下，我只能根据您已经拥有的内容进行猜测，但我认为以下应该可行：

```
$("saveall").click(function() {
    $('#loading2').show();
    setTimeout(function () { $("#loading2").hide(); }, 400);
    $(".wizard-step2").each(function(index, step) {
        var Comment = step.find(".Comment").val();
        var QuestionID = step.find(".QuestionID").val();
        var Grade = step.find(".Grade").val();
        var data = {
            Comment: Comment,
            QuestionID: QuestionID,
            Grade: Grade
        };
        $.post('@Url.Action("AnswerForm", "AnswerNKI")', data, function () {

        });
    });
}); 
```

# mysql - mysql从具有复杂条件的单个表返回单个结果

> ID：10383873
> 
> 赞同：0
> 
> 时间：2012-04-30T12:40:52.970
> 
> 标签：mysql

我有这张桌子：

表（fied1 int，field2 int，field3 varchar（40））；

我想在没有存储过程的情况下使用，例如：

```
declare int nr default 0;
select coalesce(max(field1),0) into nr from table where field2=? and field3=?;
if(nr = 0) then
  select coalesce(max(field1),0)+1 into nr from table;
end if; 
```

我想从单选中获得 nr 的值。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:40:21.367

我认为这符合您的要求：

```
SELECT
  CASE
    WHEN (max(field1) IS NULL OR max(field1) = 0) AND field2=? AND field3=? THEN (max(field1)+1)
    ELSE max(field1)
  END AS `field1_max`
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:01:02.257

Only use the following query to get one plus to last inserted value in field1 column if no match found as per where clause else it returns the max value stored in field1:

This query is handling the case if there are no records in table.

the filter crieteria "and field1<>0" in following statement is required if field1 can have value 0 also otherwise remove this filter (and field1<>0) from following query

```
Select coalesce(
   max(field1),
   (select coalesce(max(field1),0)+1 from table)
   ) 
from table where field2=? and field3=? and field1<>0; 
```

# javascript - 如何选择不是“this”的元素？

> ID：10383875
> 
> 赞同：5
> 
> 时间：2012-04-30T12:41:02.253
> 
> 标签：javascript, jquery

我有所有具有相同类的 div 列表，我想将一个函数应用于所有不是单击的 ( `this`) 的函数，我如何`!this`使用 jQuery 进行选择？

更新：我做了这个，但它不起作用，有什么想法吗？

```
 $("li").each(function(){
        $("li").not(this).click(function(e) {
            $(this).hide();
        });
    }); 
```

更新2：这是整个实际代码：

```
$(".mark").click(function(e) {
    e.preventDefault();
    var id = "#" + $(this).parent().parent().parent().parent().attr("id") + " ";

    var currentStatus = "deleted"; // to be replaced with actual status
    var currentStatusClass = "." + currentStatus + "-heading";
    $(id + currentStatusClass).show();

    $(id + ".edit-headings").click(function(){
        $(this).find(".headings-status").show().addClass("bg-hover");

        $(id + ".headings-status").click(function() {
            $(id + ".headings-status").not(this).hide();
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T12:42:55.057

看看 jQuerys`not`函数：[http ://api.jquery.com/not/](http://api.jquery.com/not/)

```
$('div').not(this).doSomething(); 
```

关于您的更新，请尝试：

```
 $("li").click(function(e) {
            $("li").not(this).hide();
        }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-30T12:43:04.737

使用[`.not()`](http://api.jquery.com/not/)功能：

```
$('.yourclass').click(function() {
    $('.yourclass').not(this).yourFunc();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:43:59.387

用于`$('div').not(this)`选择单击以外的其他选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:45:49.037

使用`:not()`或`.not()`

```
$this;

function myFunction(){
      // stuff here // and use $this for element reference
}

$('yourElement:not(.selected)').on('click',function(){
    // (make sure to add '.selected' to the new one and toggle existant)
    $('.selected').removeClass('selected');
    $this = $(this);
    $this.addClass('selected');

    myFunction();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T13:22:48.067

这是错误的：

```
var newStatus = $(this).className().replace("contribution-", ""); 
```

`className`不是函数。

而不是上面的行，你可以试试这个：

```
var cls = $(this).attr('class').replace('contribution-','');
$(this).removeClass().addClass(cls); 
```

# sql - 从另一行复制值

> ID：10383879
> 
> 赞同：2
> 
> 时间：2012-04-30T12:41:15.063
> 
> 标签：sql, sql-server, rows, sql-update

我有一个看起来像这样的表：

```
 ID               AMID           DESC                  value 
  -----------------------------------------------------------------
  100              type A         AMID type A             10
  101              type B         AMID type B             18
  102              type C         AMID type C             34
  101               null            null                   4
  102               null            null                  19
  103              type D         AMID type D              6   
  103              type E            null                  7 
```

该表包含大约 600 万行。

现在我想要这样的结果

```
 ID               AMID           DESC                  value 
  -------------------------------------------------------------
  100              type A         AMID type A             10
  101              type B         AMID type B             18
  102              type C         AMID type C             34
  101              type B         AMID type B              4
  102              type C         AMID type C             19
  103              type D         AMID type D              6   
  103              type E            null                  7 
```

当两行中的 ID 的 AMID 相等时，它显示相同的值，其中一个为空，如果 AMID 不同，则保持原样..

在此先感谢您的帮助..

干杯，

哈里什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:46:49.233

如果我正确理解了您的要求：

```
SELECT ID
,      COALESCE(AMID, (
           SELECT TOP 1 AMID FROM Table t2 WHERE t2.ID=ID AND t2.AMID IS NOT NULL
       ))AS AMID
,      DESC                  
,      value  
FROM Table 
```

[`COALESCE`（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:09:39.520

首先，让我们设置一些适当的 DDL 和示例数据：

```
USE tempdb;
GO

CREATE TABLE dbo.AMID
(
  ID     INT, 
  AMID   VARCHAR(32), 
  [DESC] VARCHAR(32), 
  value  INT
);

INSERT dbo.AMID SELECT 100, 'type A', 'AMID type A', 10
      UNION ALL SELECT 101, 'type B', 'AMID type B', 18
      UNION ALL SELECT 102, 'type C', 'AMID type C', 34
      UNION ALL SELECT 101,  null   , null         , 4
      UNION ALL SELECT 102,  null   , null         , 19
      UNION ALL SELECT 103, 'type D', 'AMID type D', 6   
      UNION ALL SELECT 103, 'type E', null         , 7; 
```

与其使用没有 ORDER BY 的 TOP，我什至不知道这意味着什么，您可以准确地选择一行用于使用分区 + 顺序填充 NULL 行。在您有限的样本数据中，任何 ID 最多只有两行，但如果您可以拥有更多，这很重要（否则，就像没有 ORDER BY 的 TOP 一样，您将拉一些任意行，进行更新低于预期）。这按`AMID`列中的值排序，但您可以更改它以`ID`使用表中的任何条件选择第一行。

```
;WITH src AS 
(
  SELECT ID, AMID, [DESC]
  FROM dbo.AMID 
  WHERE AMID IS NULL AND [DESC] IS NULL
),
nv AS 
(
  SELECT ID, AMID, [DESC], rn = ROW_NUMBER() OVER
  (PARTITION BY ID ORDER BY AMID) -- change this ordering accordingly
  FROM dbo.AMID 
  WHERE AMID IS NOT NULL
)
UPDATE src
  SET AMID = nv.AMID, [DESC] = COALESCE(nv.[DESC], src.[DESC])
FROM src INNER JOIN nv
ON src.ID = nv.ID
WHERE nv.rn = 1;

SELECT ID, AMID, [DESC], Value FROM dbo.AMID; 
```

结果：

```
ID   AMID    DESC         value
---  ------  -----------  -----
100  type A  AMID type A  10
101  type B  AMID type B  18
102  type C  AMID type C  34
101  type B  AMID type B  4
102  type C  AMID type C  19
103  type D  AMID type D  6
103  type E  NULL         7 
```

不要忘记清理：

```
DROP TABLE dbo.AMID;
GO 
```

顺便说一句，`DESC`是一个可怕的列名称，因为它是一个 T-SQL 关键字，因此*必须始终*使用`[double quotes]`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:57:41.853

```
select a1.ID,
ISNULL(a1.amid, a3.amid),
a1.[DESC],
a1.value
FROM amid a1
LEFT OUTER JOIN (select a2.id, amid = max(a2.amid)
    from amid a2
    where  a2.amid is not null
    group by a2.id) a3 on a3.id = a1.id 
```

从您的问题中不清楚您使用的是什么版本的 SQL，但上述内容应该适用于 SQL2000 及以上的任何内容。

基本上，您可以调整派生表中的查询以获得您喜欢的结果。

# ios - 重命名 AppDelegate 时出现问题 - 构建正常，但在查找 AppDelegate.m 时遇到问题

> ID：10383881
> 
> 赞同：1
> 
> 时间：2012-04-30T12:41:16.983
> 
> 标签：ios, xcode, xcode4.3

我创建了一个新项目，并希望将应用程序委托从 AppDelegate 重命名为 FlickrAppDelegate。我想我在适当的地方重命名并且能够构建，但我收到以下错误：

![在此处输入图像描述](../Images/f68145c55df2a3344346425599e54837.png)

它构建正常，但显然不希望出现此错误。如果我查看构建日志，则没有错误。

如何消除此问题？

谢谢

**编辑#1** 构建阶段截图： ![在此处输入图像描述](../Images/a81b86f0c6c4f111cb19fe9dc677c2bd.png)

**编辑#2** 添加的文件截图 ![在此处输入图像描述](../Images/9ff79b11d490ab1df7bdda1ef957be3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:54:31.653

这是 Xcode 中的一个错误。我在 Xcode 4.3.2 中看到过很多次。通常它会在我退出并重新启动 Xcode 后消失。有时，可以通过 Option+Shift+Command+K 强制清理构建文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:44:39.617

查看目标可执行文件的构建阶段。查看 AppDelegate.m 是否仍列在 Compile Sources 部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:46:58.357

您可能也将 AppDelegate.h 重命名为 FlickrAppDelegate.h。S 您还必须更改导入。从

```
#import AppDelegate.h 
```

至：

```
#import FlickrAppDelegate.h 
```

顺便提一句。下次你重命名时，你可以使用**refactoring**来完成。这应该照顾一切。只需转到 AppDelegate.m。**在@implementation 之后右键单击**AppDelegate 的出现并选择**Refactor ...**。然后选择重命名**...。**然后您可以预览所有更改，您会发现它会为您完成一切。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:51:16.927

检查您的主 nib 文件，并确保委托的类是您的新 App 委托类。

# checkbox - EmberJs 中复选框的选择绑定

> ID：10383882
> 
> 赞同：6
> 
> 时间：2012-04-30T12:41:26.510
> 
> 标签：checkbox, ember.js

Emberjs 是否为复选框提供 selectionBinding 以处理选中/选中的复选框选项。

如果是，该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-30T14:04:17.797

绑定到 的`checked`属性`Ember.Checkbox`，见[http://jsfiddle.net/5pnVg/](http://jsfiddle.net/5pnVg/)：

**车把**：

```
{{view Ember.Checkbox checkedBinding="App.objController.isChecked" }} 
```

**JavaScript**：

```
App.objController = Ember.Object.create({
    isChecked: true,

    _isCheckedChanged: function(){
        var isChecked = this.get('isChecked');
        console.log( 'isChecked changed to %@'.fmt(isChecked) );
    }.observes('isChecked')
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-19T06:41:17.893

好的，所以这有点旧，但我也偶然发现了这个。我将复选框选项传递给数组中的路由模型。问题确实在于实现双向绑定（如果这是目标）。这就是我的做法：

```
App.ItemEditController = Ember.ObjectController.extend({
isRound: function () {
    return ( this.get('model.shapes').find(function(item) { return (item === 'round') }) );
}.property('model.shapes'),
isOval: function () {
    return ( this.get('model.shapes').find(function(item) { return (item === 'oval') }) );
}.property('model.shapes'),
isIrregular: function () {
    return ( this.get('model.shapes').find(function(item) { return (item === 'irregular') }) );
}.property('model.shapes'),
shapes: function () {
    var self = this;
    ['round','oval','irregular'].map(function(item) {
        var shapes = self.get('model.shapes');
        shapes = shapes.toArray();
        if (self.get('is' + item.capitalize())) {
            if (shapes.indexOf(item) < 0)
                shapes.push(item);
        } else {
            if (shapes.indexOf(item) >= 0)
                shapes.splice(shapes.indexOf(item),1);
        }
        self.set('model.shapes', shapes);
    });
}.observes('isRound', 'isOval', 'isIrregular') 
}); 
```

所以在这里我已经设置了属性以根据它们在模型的形状数组中的存在来设置它们自己，并设置一个观察者来检查这些属性以在需要时重置模型的形状数组。现在在 Item 模板中，我们可以像往常一样绑定到形状（不管你怎么做）：

```
Shapes: 
{{#each shape in this.shapes}}
    <span class="label label-default">{{shape}}</span><br />
{{else}}
    No shape selected!
{{/each}} 
```

在 ItemEdit 模板中，我们绑定到编辑控制器的属性：

```
Shapes: 
Round: {{input type="checkbox" checked=isRound}}
Oval: {{input type="checkbox" checked=isOval}}
Irregular: {{input type="checkbox" checked=isIrregular}} 
```

希望这对任何在这种类型的手动双向绑定中苦苦挣扎的人有所帮助，并且您将一次性在模型中获得所有选中的选项。

# php - 添加了 padding-left 是一个太大的超链接

> ID：10383883
> 
> 赞同：0
> 
> 时间：2012-04-30T12:41:31.007
> 
> 标签：php, css, html, input

我正在尝试在我的网站上放置我的搜索按钮：http: [//testowa.portalo.pl](http://testowa.portalo.pl)

使用 padding-left 似乎可以很好地定位它，但是左侧的空间（由 Google 提供支持）不应该用作超链接，实际上是一个大超链接。如何纠正这个？

```
<form method="get" action="search.php" target="_top">
<input type="text" id="Szukaj" style="margin-top:42px; width: 563px;" name="q" size="107" maxlength="155" value="Wyszukiwarka" onfocus="onfocus=clearDefault(this)"/>
<label style="display: none">Prześlij formularz wyszukiwania</label>
<input type="image" src="files/szukaj.gif" id="Szukaj_Button" style="padding-top:36px; padding-left:500px; position:absolute"/>     
<input type="hidden" name="cx" value="<?php include("ustawienia/google_search.inc.php");?>" />
<input type="hidden" name="forid" value="1" />
<input type="hidden" name="ie" value="UTF-8" />
<input type="hidden" name="oe" value="UTF-8" />
<input type="hidden" name="cof" value="GALT:#CC0000;GL:1;DIV:#FFFFFF;VLC:663399;AH:center;BGC:FFFFFF;LBGC:336699;ALC:0066CC;LC:0066CC;T:333333;GFNT:0066CC;GIMP:0066CC;FORID:11" />
<input type="hidden" name="hl" value="pl" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:48:09.263

不要使用**padding-left**，使用**margin-left**。填充添加到您正在设计的对象的内部。边距增加了外部。查看 CSS 框模型以更好地理解：[http ://www.w3schools.com/css/css_boxmodel.asp](http://www.w3schools.com/css/css_boxmodel.asp)

# sql - SQL Check 列出现多次

> ID：10383884
> 
> 赞同：0
> 
> 时间：2012-04-30T12:41:41.473
> 
> 标签：sql, db2, unique

考虑一个表 A。表 A 有一个名为**INNETTEDTXNID**的列，它不是主键，也不是唯一的，可以为空。

我根据某些条件在表 A 上有一个选择 *（与列 INNETTEDTXNID 无关）。

对于上面提取的每一行，我必须找到一个名为**isNetted**的值。**isNetted**的概念是，如果该行的**INNETTEDTXNID**列在整个表（包括该行）中多次出现，则该行的**isNetted**值将为 true。

我希望我的问题很清楚。感谢您提前提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:59:03.773

Probably no-where near the most efficient but it works.

```
SELECT TableA.INNETTEDTXNID, 
 CASE
 WHEN NetChk.INNETTEDTXNID IS NOT NULL Then 1
 ELSE 0
 END AS isNetted
FROM TABLEA
LEFT JOIN (
          SELECT INNETTEDTXNID 
          FROM TableA
          GROUP BY INNETTEDTXNID
          HAVING COUNT(INNETTEDTXNID) >1) 
NetChk ON TableA.INNETTEDTXNID = NetChk.INNETTEDTXNID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:58:13.620

这将返回多次出现的任何条目的值。

```
SELECT a.INNETTEDTXNID
FROM TableA as a, TableA as b
WHERE
    not a.id=b.id
    and a.INNETTEDTXNID=b.INNETTEDTXNID 
```

如果您尝试专门执行此操作以检查单个数字是否多次出现，您可以执行类似的操作

```
SELECT COUNT(INNETTEDTXNID)
FROM TableA
WHERE INNETTEDTXNID='value' 
```

如果它返回一个，那么它是唯一的，对于不止一个它不是唯一的。如果您希望它返回类似 true 或 false 的内容，您可以使用

```
SELECT 
    CASE WHEN (
        SELECT COUNT(INNETTEDTXNID)
        FROM TableA
        WHERE INNETTEDTXNID='value'
    )>1 THEN 'True'
    ELSE 'False'
    END
    AS isNetted 
```

# mysql - 如何使用mysql将视频存储在数据库中？

> ID：10383886
> 
> 赞同：7
> 
> 时间：2012-04-30T12:41:53.453
> 
> 标签：mysql, video, store

我尝试使用 MySQL 将视频文件存储到数据库中，但我不知道如何将视频文件存储到数据库中。我尝试以下查询，但没有奏效。

```
 CREATE TABLE GAME  (
               GAME_ID INTEGER NOT NULL PRIMARY KEY,
               GAME_NAME VARCHAR (20),
               VIDEO  LONGBLOB );

INSERT INTO GAME  VALUES(3, "Termonator2", 
LOAD_FILE("C:\Users\Public\Videos\Sample Videos")); 
```

请给我任何参考或提示。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T12:43:45.073

我建议您将视频文件存储在文件目录中，并且仅将文件名存储在 MySQL 数据库中。

这样，您可以保留一个轻量级的数据库。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T14:27:42.613

您需要在路径中添加两个斜杠。
检查以下查询。它对我有用。
用这个

```
INSERT INTO GAME values (3, 'Termonator2',LOAD_FILE("C:\\Users\\Public\\Videos\\Sample Video\\test.mpg")); 
```

代替

```
INSERT INTO GAME  VALUES(3, "Termonator2", 
LOAD_FILE("C:\Users\Public\Videos\Sample Videos")); 
```

请享用.....

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T12:47:14.420

`LOAD_FILE("C:\Users\Public\Videos\Sample Videos")`是一个目录。您忘记了视频名称和扩展名。

`Should be: LOAD_FILE("C:\Users\Public\Videos\Sample Videos\videoname.avi")`例如。

但就像每个人都指出的那样，这是一个坏主意。不要将视频存储在数据库中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-15T14:44:51.783

首先，我建议您不要将视频文件存储在数据库中，这是错误的做法。

仅存储视频文件名，您可以通过它从目录中获取视频。

但你的答案是：

```
INSERT INTO GAME values (3, 'Termonator2',LOAD_FILE("C:\\Users\\Public\\Videos\\Sample Video\\video.mp4")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T12:44:54.413

尝试

```
C:\Users\Public\Videos\Sample Videos\filename.ending 
```

代替

```
C:\Users\Public\Videos\Sample Videos 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-22T22:23:58.570

只需将您的视频放在 C: 目录中的某个地方。整个用户/视频的事情似乎被隐藏了。我创建了一个 C:/videos 目录并将我的视频放入其中！

# javascript - 在 Javascript 中创建预定义对象的实例

> ID：10383888
> 
> 赞同：4
> 
> 时间：2012-04-30T12:41:56.323
> 
> 标签：javascript, object, window, document

我知道在Javascript中我们可以创建像这样的对象实例

```
var ins = new myObject(); 
```

我知道，窗口，文档等是 javascript 中的预定义对象。我们可以创建这些对象的新实例吗？例如：
是

```
var inss = new document(); 
```

可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:49:12.697

不要将*对象*与*构造函数*（或大多数 OOP 语言中的*类）混淆。*在 JavaScript 中，您通过使用运算符调用构造函数来创建对象`new`：

```
function MyObject()
{
}

var obj = new MyObject(); 
```

之后，您可以使用属性访问给定对象的构造函数`constructor`：

```
var ctor = obj.constructor;  // (ctor === MyObject) will be true 
```

理论上，您可以创建与给定对象相同类型的新对象：

```
var obj1 = new MyObject();
var obj2 = new obj1.constructor(); 
```

在您的情况下，您可能会尝试使用“内置”对象，但它可能无法正常工作，因为脚本引擎可能会禁止它。例如，Chrome`TypeError: Illegal constructor`在尝试使用`new document.constructor()`. 这是因为`document`的构造函数 ,`HTMLDocument`并不意味着直接使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:59:49.763

No, you can't. Although most of these host objects have constructors (e.g. `HTMLDocument` for `document`), they are only used for inheritance feautures (e.g. the `instanceof` operator) but can not be invoked.

```
> document.constructor
HTMLDocument
> new HTMLDocument
Unhandled DOMException: NOT_SUPPORTED_ERR 
```

You also can't create [`Node`s](https://stackoverflow.com/q/8217457/1048572) for example, these "constructors" are just interfaces.

Yet, you can create a new DOM with the [`createDocument`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-2-Core-DOM-createDocument) method, which is available at the [`document.implementation`](https://developer.mozilla.org/en/DOM/document.implementation) object.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T12:48:06.587

是和不是，大多数情况下都不是。

您可以`window`使用`window.open`. 它还将有一个新`document`对象。

`document`您可以通过创建一个新的 DOM [`createDocument`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#Level-2-Core-DOM-createDocument)，尽管它不一定具有预制的所有特殊功能。您还可以通过创建新的文档*片段*[`createDocumentFragment`](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-35CB04B5)，非常方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T12:49:32.997

[new 运算符仅适用于用户定义的对象或具有构造函数的内置对象。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)document 和 window 没有构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T12:50:19.643

`document`不是构造函数，它是构造对象。你想要做的就像说`new new Object()`or `new {}`。

`document`is的构造函数，`HTMLDocument`但你不能那样构造它，你必须使用`document.implementation.createDocument()`

# android - 如何知道特定的蓝牙设备正在连接？

> ID：10383893
> 
> 赞同：2
> 
> 时间：2012-04-30T12:42:01.973
> 
> 标签：android, bluetooth

我有一个在后台运行的应用程序，需要知道何时连接了特定的蓝牙设备。假设我希望我的应用程序在后台运行并在您的设备连接到汽车蓝牙时执行某些操作。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:13:23.377

下面的代码给出了它所连接的设备

```
BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE); 
```

代码：

```
public void onCreate() {
    ...
    IntentFilter filter1 = new IntentFilter(BluetoothDevice.ACTION_ACL_CONNECTED);
    IntentFilter filter2 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED);
    IntentFilter filter3 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED);
    this.registerReceiver(mReceiver, filter1);
    this.registerReceiver(mReceiver, filter2);
    this.registerReceiver(mReceiver, filter3);
}

//The BroadcastReceiver that listens for bluetooth broadcasts
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
           ... //Device found
        }
        else if (BluetoothAdapter.ACTION_ACL_CONNECTED.equals(action)) {
           ... //Device is now connected
        }
        else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
           ... //Done searching
        }
        else if (BluetoothAdapter.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
           ... //Device is about to disconnect
        }
        else if (BluetoothAdapter.ACTION_ACL_DISCONNECTED.equals(action)) {
           ... //Device has disconnected
        }           
    }
}; 
```

# asp.net - 为什么在智能感知中找不到某些属性？

> ID：10383900
> 
> 赞同：2
> 
> 时间：2012-04-30T12:42:41.470
> 
> 标签：asp.net, visual-studio-2010, html

我看不到某些 HTML 属性，例如intellisense`tabindex`中`onblur`的标准 div 属性 - 在设计时编写它们时，它们带有下划线。但是 - 它们在调试时工作正常。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:29:29.473

智能感知不接收它们通常有两个可能的原因：

1.  属性未映射到控件中的属性
2.  控件正在抑制属性/属性

然而，即使智能感知不选择属性，它们仍然会被添加到`Attributes`控件的集合中并呈现到页面上。它之所以有效，是因为它们是所有 HTML 元素的通用属性，这是控件在呈现到页面时解析的内容。

# python - 有没有办法在 O(1) 时间内从集合中获取项目？

> ID：10383901
> 
> 赞同：6
> 
> 时间：2012-04-30T12:42:43.200
> 
> 标签：python, set, lookup

> **可能重复：**
> [Python：从集合中检索项目](https://stackoverflow.com/questions/5979861/python-retrieve-items-from-a-set)

考虑以下代码：

```
>>> item1 = (1,)
>>> item2 = (2,)
>>> s = set([item1, item2])
>>> s
set([(2,), (1,)])
>>> new_item = (1,)
>>> new_item in s
True
>>> new_item == item1
True
>>> new_item is item1
False 
```

所以`new_item`是`s`因为它等同于它的一个项目，但它是一个不同的对象。

我想要的是`item1`从`s`给定`new_item`的中得到`s`。

我提出的一种解决方案很简单，但效率不高：

```
def get_item(s, new_item):
    for item in s:
        if item == new_item:
            return item

>>> get_item(s, new_item) is new_item
False
>>> get_item(s, new_item) is item1
True 
```

另一种解决方案似乎更有效，但实际上不起作用：

```
 def get_item_using_intersection1(s, new_item):
     return set([new_item]).intersection(s).pop() 
```

也不是这个：

```
 def get_item_using_intersection2(s, new_item):
     return s.intersection(set([new_item])).pop() 
```

因为交集以未定义的方式工作：

```
>>> get_item_using_intersection1(s, new_item) is new_item
True
>>> get_item_using_intersection1(s, new_item) is item1
False

>>> get_item_using_intersection2(s, new_item) is new_item
True
>>> get_item_using_intersection2(s, new_item) is item1
False 
```

如果这很重要，我在 Windows 7 上使用 Python 2.7 x64，但我需要一个跨平台的解决方案。

* * *

谢谢大家。我想出了以下临时解决方案：

```
class SearchableSet(set):

    def find(self, item):
        for e in self:
            if e == item:
                return e 
```

将来将用以下解决方案替换（现在非常不完整）：

```
class SearchableSet(object):

    def __init__(self, iterable=None):
        self.__data = {}
        if iterable is not None:
            for e in iterable:
                self.__data[e] = e

    def __iter__(self):
        return iter(self.__data)

    def __len__(self):
        return len(self.__data)

    def __sub__(self, other):
        return SearchableSet(set(self).__sub__(set(other)))

    def add(self, item):
        if not item in self:
            self.__data[item] = item

    def find(self, item):
        return self.__data.get(item) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-30T12:45:13.000

那么，不要使用 a `set`。只需使用`dict`将一些值映射到自身的 a 。在您的情况下，它映射：

```
d[item1] = item1
d[item2] = item2 
```

所以任何等于 的东西`item1`都会在 中找到`d`，但值就是`item1`它本身。它比线性时间要好得多;-)

PS我希望我能正确理解你的问题的意图。如果不是，请澄清一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T14:27:00.360

如果您绝对需要 O(1) 查找*和*对象标识（不仅仅是相等）*和*快速集合操作（​​无需在每次想要执行集合操作时创建新集合），那么一种相当简单的方法是同时*使用*a`dict`和一个`set`。您必须维护两个结构以使它们保持同步，但这将允许您保持 O(1) 访问（只是具有更大的常数因子）。（也许这就是您在编辑中使用“现在非常不完整的未来解决方案”的目标。）

但是，您没有提到您正在使用的数据量，或者您遇到的性能问题（如果有的话）。所以我不相信你真的需要这样做。可能是`dict`通过按需`set`创建或`set`线性查找已经足够快了。

# mysql - 根据列值获取mysql查询结果

> ID：10383908
> 
> 赞同：-1
> 
> 时间：2012-04-30T12:43:15.897
> 
> 标签：mysql, group-by, greatest-n-per-group

我有一个 MySql 表，其中有两列，即类别和名称。我有 4 个唯一的类别值，并且该表中有数千条记录。但所有这些记录都属于表中的 4 个类别中的任何一个。

现在，我想要的是作为输出，我应该得到每个类别的 2 个结果，即第一个类别的 2 个结果，然后是下一个类别的 2 个结果，依此类推。

是否可以使用单个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:00:24.397

```
set @num := 0, @cat := '';

select category,name
      @num := if(@cat = category, @num + 1, 1) as row_number,
      @cat := category as dummy
from MyTable
group by cateogry, name
having row_number <= 2; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T12:56:11.883

那这个呢？

```
SELECT * FROM your_table WHERE category = 1 LIMIT 2
UNION
SELECT * FROM your_table WHERE category = 2 LIMIT 2
UNION
SELECT * FROM your_table WHERE category = 3 LIMIT 2
UNION
SELECT * FROM your_table WHERE category = 4 LIMIT 2 
```

# google-app-engine - 我可以使用谷歌应用引擎来实现这个项目吗？

> ID：10383909
> 
> 赞同：0
> 
> 时间：2012-04-30T12:43:18.040
> 
> 标签：google-app-engine

这个学期我参加了网络应用课程，我想使用谷歌应用引擎来实现我的课程项目，但我想知道GAE是否可以满足这个项目的要求。本课程项目是一个作业提交系统，用户（学生）可以将作业上传到服务器，教师可以在线查看作业。

假设学生上传的作业是一些 html 和 css 的东西。让我困惑的是如何实现教师在线查看功能？例如：

学生 A 上传了一个 html 文件 hello.html，老师想用 http://xxx.xx/xx/xx/hello.html 来检查这个作业。

GAE能满足这个要求吗？据我所知，GAE使用app.yaml指向不同的文件或html，但是当学生上传作业时，他们不能更改app.yaml，对吧？

我被困在这里。请帮我。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:31:18.140

是的，您可以使用 GAE 来创建此应用程序，但您必须摆脱上传和提供 HTML 文件的想法，就好像它直接存在于文件系统上一样。你不能那样做。

您可以做的——相对容易——将提交的一个或多个文件存储为数据存储对象，并提供一个 URL，该 URL 将所需的文件名作为参数并将其从数据存储中提供出来。

您可以将提交的文件存储在这样的模型中：

```
class HomeworkItem(db.Model):
    author = db.UserProperty()
    filename = db.StringProperty()
    content = db.TextProperty(multiline=True)
    submitted_on = db.DateProperty() 
```

该`content`字段被声明为`TextProperty`假设您正在处理 HTML 和 CSS 文件，但如果您要处理二进制数据，您会想要使用`BlobProperty`.

您需要有两个 URL 来处理资产的上传和下载。您可以使用 Web 框架或编写一些代码来处理参数化 URL，允许您将文件名等内容编码到 URL 本身，如下所示：

```
http://homeworkapp.edu/review/hello.html 
```

然后处理 /review/* URL 的方法将从数据存储中检索数据并将其作为回复发送回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:29:31.287

GAE 可以满足您的要求，但您需要将每个“hello.html”文件保存在 Blobstore 或 Datastore 中，并构建一些系统来检索和提供上传的文件。请参阅此[问答以获取更多参考](https://stackoverflow.com/q/81451/1010991)。

# ios - 默认 iOS UINavigationBar 动画不流畅

> ID：10383916
> 
> 赞同：0
> 
> 时间：2012-04-30T12:43:45.703
> 
> 标签：ios, uinavigationcontroller, core-animation

我正在开发一个应用程序，需要隐藏 UINavigationBar（和工具栏）以在应用内浏览器中提供全屏模式。

当应用程序运行此代码时，动画效果很好。

```
[self.navigationController setNavigationBarHidden:YES animated:YES];
[self.navigationController setToolbarHidden:YES animated:YES]; 
```

当我想退出全屏模式时，动画一点也不流畅。

```
[self.navigationController setNavigationBarHidden:NO animated:YES];
[self.navigationController setToolbarHidden:NO animated:YES]; 
```

在动画期间，导航栏下可以看到一个黑色矩形，我认为是 UIWebView 调整了自身的大小（工具栏动画工作得很好。）

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T20:34:58.247

不要使用`setNavigationBarHidden:animated:`隐藏导航栏，试试这个：

在您的视图控制器`viewDidLoad`为您的导航栏和视图计算不同的帧：

```
// The normal navigation bar frame, i.e. fully visible
normalNavBarFrame = self.navigationController.navigationBar.frame;

// The frame of the hidden navigation bar (moved up by its height)
hiddenNavBarFrame = normalNavBarFrame;
hiddenNavBarFrame.origin.y -= CGRectGetHeight(normalNavBarFrame);

// The frame of your view as specified in the nib file
normalViewFrame = self.view.frame;

// The frame of your view moved up by the height of the navigation bar
// and increased in height by the same amount
fullViewFrame = normalViewFrame;
fullViewFrame.origin.y -= CGRectGetHeight(normalNavBarFrame);
fullViewFrame.size.height += CGRectGetHeight(normalNavBarFrame); 
```

当您想全屏显示时：

```
[UIView animateWithDuration:0.3
                     animations:^{
                         self.navigationController.navigationBar.frame = hiddenNavBarFrame;
                         self.view.frame = fullViewFrame;
                     } completion:^(BOOL finished) {

                     }]; 
```

当你想恢复正常时：

```
[UIView animateWithDuration:0.3
                     animations:^{
                         self.navigationController.navigationBar.frame = normalNavBarFrame;
                         self.view.frame = normalViewFrame;
                     } completion:^(BOOL finished) {

                     }]; 
```

在 iOS 5.1 模拟器中对此进行了测试。希望你可以使用它。“黑色矩形”必须是窗口的默认背景颜色，即导航栏和视图之间的间隙。

# javascript - 在 Datebox 插件中显示周数

> ID：10383917
> 
> 赞同：2
> 
> 时间：2012-04-30T12:43:47.010
> 
> 标签：javascript, jquery, html, jquery-mobile, datebox

我正在使用 JQueryMobile 的 Datebox 插件。它只是一个很棒的工具，我什至将它用于日期转换。

现在的问题是在日期选择器中显示周数以及显示的月历。

有没有办法在 Datbox 或任何其他可用的插件中做到这一点？

提前感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:42:23.843

抱歉花了这么长时间，但你去吧：

[http://dev.jtsage.com/jQM-DateBox2/demos/mode/calbox.html](http://dev.jtsage.com/jQM-DateBox2/demos/mode/calbox.html)（第二次演示）

我相信这就是您正在寻找的 - 如果它成功了，请告诉我。

# many-to-many - EMF：如何使用 EMF 工具设置多对多关系

> ID：10383925
> 
> 赞同：1
> 
> 时间：2012-04-30T12:44:02.730
> 
> 标签：many-to-many, eclipse-emf

我想知道在创建模型时如何使用 EMF 提供的 gui 工具与 EMF 建立多对多关系？我只能添加一对多/一对一的关系。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T13:51:39.003

如果您有一个“Foo”类和一个“Bar”类，您将首先创建一个类型为“Bar”的新引用“bars”，然后创建一个类型为“Foo”的新引用“foos”。两者都具有“上限”-1。此外，您必须将 'foos' 的 EOpposite 设置为 'bars'，反之亦然（这是自动完成的）。通过这种方式，您可以在 Foo 和 Bar 之间获得多对多关系，您可以双向导航。为了在实例之间建立这种关系，您只需添加，例如，一个 bar 到 foo。然后，此栏还将引用该 foo。

# user-interface - Heroku 桂云

> ID：10383928
> 
> 赞同：0
> 
> 时间：2012-04-30T12:44:18.787
> 
> 标签：user-interface, heroku, cloud

是否有任何应用程序支持 heroku 云的可视化 GUI 界面。全网都找不到。。。

gitbush（命令系统）很难工作......

因此，如果您对此有任何解决方案，请发送给我。我需要这个来创建一个 facebook 实时游戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T15:15:52.930

Git 有很多 GUI，包括[Mac 的 GitHub](http://mac.github.com/)、[Tower](http://www.git-tower.com/)、[Gitx](http://gitx.frim.nl/)等。

Heroku 明智的是，我只知道一个 -用于 iPhone的[nezumi 。](http://nezumiapp.com/#/iphone)一般来说，没有 Heroku GUI，因为 CLI 非常简单。

以上所有内容均假设您使用的是 Mac。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T07:38:58.367

这是我的解决方案： 1\. 使用 heroku 网页创建一个应用程序，获取其 Git URL：git@heroku.com:your-app-name.git 2\. 使用 Gitbox（从 mac 应用商店购买）上传（添加您的本地和设置远程 giturl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-18T23:34:07.793

## Windows 版 Github

如果你不喜欢// ，你可以使用[GitHub for Windows](https://windows.github.com)`terminal``shell``cmd.exe`

# c# - 如何格式化我的课程？使用 toString，在 GUI 中还是以其他方式？

> ID：10383930
> 
> 赞同：3
> 
> 时间：2012-04-30T12:44:26.087
> 
> 标签：c#, formatting, tostring

我在库中有一些类，它们代表某些文件的分析和验证结果。

这些类包含枚举、无效属性列表等。

我编写了一个使用该库的 GUI 应用程序，并编写了一些函数以在富文本框中以可读形式编写这些类。

我突然想到，我可能必须在类的 ToString 覆盖中编写这种格式。

但是，所有这些格式都很长，包括插入制表符和新行，包括对列表的多次迭代，提取枚举描述等。

所以我想知道 - toString 大小和复杂性的标准是什么？我想在 toString 中编写困难的格式吗？或者也许我应该提供一些其他的通用接口——类的格式化可打印输出是否有任何通用接口？还是我应该在 GUI 应用程序中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:47:38.390

除了 UI 库之外，不应将诸如 UI 格式之类的东西烘焙到任何库中。

相反，您可以做的是提供一组与 UI 无关的类，这些类可以格式化您的实体，例如，可以执行生成期望在 UI 中显示的格式所需的复杂代码。

这些可以使用简单的界面，例如：

```
public interface IEntityFormatter<T>
{
    string GetFormattedValue(T myEntity);
}

public class Customer
{
    public string FullName {get;set;}
}

public class CustomerFormatter : IEntityFormatter<Customer>
{
    public string GetFormattedValue(Customer myEntity)
    {
        return myEntity.FullName;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:48:48.287

一般来说，`ToString`不应该很复杂，否则可能会减慢调试速度（注意它通常由调试器自动调用）。添加您自己的界面还允许您添加更多自定义。另一方面，如果您不需要任何格式设置，那么`ToString`可能是实现它的好地方。

# php - 无法在 PHP 中获得正确的包含路径

> ID：10383933
> 
> 赞同：1
> 
> 时间：2012-04-30T12:44:34.653
> 
> 标签：php, include, compiler-errors, require

我阅读了其他一些相关问题，并认为这是最好的答案：

```
set_include_path(get_include_path().PATH_SEPARATOR."/path/to/program/root"); 
```

但是，我无法将它放到正确的目录中，并且错误消息也没有足够的帮助，所以我迷路了。我的用户区目录（共享主机）如下所示：

```
/home/linweb09/b/example.com-1050560306/user    # <-- this is my root 
```

我试图重新组织我的程序，以便所有模型文件都放在这个目录中：

```
{root}/program_name/library/ 
```

web-root 文件夹是这样的：

```
{root}/htdocs/ 
```

因此，我将所有包含更改为如下所示：

```
set_include_path(get_include_path().PATH_SEPARATOR
                 ."/home/linweb09/b/example.com-1050360506/user");
require_once "/program_name/library/some_module.php"; 
```

索引必须加载此包含才能工作，以验证用户：

```
/htdocs/admin/authenticate.php
# index.php
set_include_path(get_include_path().PATH_SEPARATOR
                 ."/home/linweb09/b/example.com-1050360506/user");
require_once "/htdocs/admin/authenticate.php"; 
```

我遇到了这些错误：

> [警告] mod_fcgid: stderr: PHP 致命错误:
> require_once() [function.require]: 无法打开所需的 '/htdocs/admin/authenticate.php'
> (include_path='.:/usr/share/pear:/usr/share /php:/home/linweb09/b/example.com-1050360506/user')
> 在 /home/linweb09/b/example.com-1050360506/user/htdocs/admin/index.php 第 3 行
> 
> [警告] mod_fcgid：stderr：PHP 警告：
> require_once(/htdocs/admin/authenticate.php) [function.require-once]：无法打开流： /home/linweb09/b/example.com
> 中没有这样的文件或目录
> -1050360506/user/htdocs/admin/index.php 在第 3 行

但它在正确的位置，错误说没有这样的文件或目录，所以我不确定我应该如何配置它。

我也试过这些，我得到了同样的错误：

```
set_include_path(get_include_path().PATH_SEPARATOR."/user");
set_include_path(get_include_path().PATH_SEPARATOR."/"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:51:31.713

尝试删除前导斜杠。`/htdocs/admin/authenticate.php`意味着您正在从 root 工作`/`。如果你想让它搜索包含路径，你需要使用相对路径：

```
require_once "program_name/library/some_module.php";
require_once "htdocs/admin/authenticate.php"; 
```

顺便说一句，您只需要为每个脚本设置一次包含路径 - 您不需要`set_include_path()`为每个包含设置该行，只需在脚本顶部设置一次。

# javascript - 如何在 Sharepoint 2007 wiki 页面中自动创建目录？

> ID：10383936
> 
> 赞同：1
> 
> 时间：2012-04-30T12:44:44.823
> 
> 标签：javascript, jquery, sharepoint-2007, wiki, tableofcontents

随着我们的用户越来越熟悉 wiki 功能并喜欢它，我们看到页面变得越来越长且越来越难以导航。

我们希望能够在每个 wiki 页面的基础上生成目录以允许更轻松的导航，即用户创建其层次结构由 h2/h3/h4 元素表示的内容，然后在顶部自动生成 TOC wiki 页面的每个条目，TOC 中的每个条目都是指向页面中相应 h2/h3/h4 元素的链接。

我们无权访问 Sharepoint Designer，因此任何有趣的东西都必须涉及使用内容编辑器 Web 部件插入的 css/javascript。

此致，

科尔姆·奥盖比斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:24:03.673

如果这可能对其他人有用，我最终使用了 jquery [tableofcontents](http://fuelyourcoding.com/scripts/toc/)插件。

教程[Automatically Generate Table of Contents with jQuery](http://www.codingwhiz.com/jqueryui/automatically-generate-table-of-contents-with-jquery.html)解释了如何使用它。

# php - 如何从 jQuery UI 对话框返回用户输入

> ID：10383939
> 
> 赞同：1
> 
> 时间：2012-04-30T12:44:48.210
> 
> 标签：php, javascript, jquery, jquery-ui

我想打开一个 jQuery UI 对话框，该框将有一个输入字段，该字段将使用用户名。我希望当用户按下对话框上的 OK 键时，对话框应该以某种方式将用户名返回给 jQuery

```
$("#dialog").dialog({
            autoOpen: false,
            width: 600,
            buttons: {
                "Ok": function() {
                $(this).dialog("close");}}
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:46:41.163

如果您的页面上只有一个 div，其 ID`dialog`包含输入字段，则只需在用户按下 OK 时使用常规 jQuery 选择器选择它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:51:21.727

对话框是异步的，这使得“返回”某些内容毫无意义。
但是，您可以使用其中一个回调函数来执行用户输入的操作。
例如，使用“确定”按钮回调：

```
$("#dialog")
    .append(
        $("<input>")
            .attr({
                "type" : "text",
                "id" : "user-input"
            })
    )
    .dialog({
        autoOpen: false,
        width: 600,
        buttons: {
            "Ok": function() {
                alert( $("#user-input").val() );
                $(this).dialog("close");
            }}
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:50:24.380

在“OK”功能上试试这个

```
var myvalue= $("#yourinputtext").val();
alert(myvalue); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T12:53:58.970

您可以在按钮单击处理程序中捕获值`ok`，然后根据需要使用它：

```
$("#dialog").dialog({
    autoOpen: false,
    width: 600,
    buttons: {
        "Ok": function() {
            var inputValue = $("#myInput").val();
            // do stuff with the value...

            $(this).dialog("close");}
        }
    }
); 
```

# mysql - MySQL 根据字段的值显示测试结果

> ID：10383941
> 
> 赞同：1
> 
> 时间：2012-04-30T12:44:49.253
> 
> 标签：mysql, select, field

我有一张名为**PEOPLE**的表，它显示

**姓名** **性别**
++++ ++++++
汤姆 1
简 2

在性别栏中，数字等于性别 1=男性 2=女性

我想

从人员中选择姓名、性别（将 1 或 2 替换为男性或女性）

结果显示

汤姆 **男**
简 **女**

我不希望更改数据库中的数据，只是更改从选择中呈现数据的方式。

任何帮助，将不胜感激。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:46:41.637

```
Select Name, case Sex 
               when 1 then 'Male' 
               else 'Female' 
             end
from people 
```

# c# - 使用 LINQ to SQL 获取 IQueryable 结果集的不同值

> ID：10383945
> 
> 赞同：0
> 
> 时间：2012-04-30T12:45:00.343
> 
> 标签：c#, asp.net, linq, linq-to-sql

我正在使用需要限制的 LINQ to SQL（通过 DBML）并且遇到了问题。我正在使用动态 LINQ 并发送最终用户先前确定的变量。我在数据库中有一个视图，它保存（通过左外连接）来自主数据库表和连接到它的 5 个表的数据。因为我正在（并且必须）使用动态 LINQ，所以来自 BD 的结果集必须是 .AsQueryable() 从而创建一个 IQueryable 结果集。这是它正在做的一个例子：

假设视图包含汽车信息（品牌、型号、年份、颜色、里程、服务记录）。如果用户输入他们想查看今年已维修的所有福特野马，结果集将照此返回

```
[uniqueID - 1][Ford][Mustang][1/1/2012](service date)
[uniqueID - 1][Ford][Mustang][2/1/2012](service date)
[uniqueID - 1][Ford][Mustang][3/1/2012](service date)
[uniqueID - 1][Ford][Mustang][4/1/2012](service date) 
```

这很好，让我们假设这个特殊的野马今年已经完成了 4 次服务。

但是，如果用户输入只是看到所有黑色福特，那么它就会回来

```
[uniqueID - 1][Ford][Mustang]
[uniqueID - 1][Ford][Mustang]
[uniqueID - 1][Ford][Mustang]
[uniqueID - 1][Ford][Mustang]
[uniqueID - 2][Ford][Taurus] 
```

它为每个服务返回一行，即使该服务为空并且返回的 IQueryable 具有 .Distinct()。

```
return data.Distinct().OrderBy(strOrderBy).Select("New(" + strItems + ")"); 
```

我需要做的是获取 IQueryable 并从中获取不同的值，因为传入的变量是动态的，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:54:53.667

您使用的是哪个 ORM？不同的 ORM 有不同的行为，特别是如果 ORM 没有在它发送到数据库的 sql 中发送“不同的”调用。

在运行该行之前，您的“数据”变量是否已解析？如果是这样，您正在对 Linq to Objects 进行 Distinct，而不是 Linq to SQL

从您的示例中，最直接的做法是使用第二个 Distinct 重载为您的查询实现 IEqualityComparer。它看起来像这样：

```
return data.Distinct(new YourEqualityComparer()).OrderBy(strOrderBy).Select("New(" + strItems + ")"); 
```

请注意，如果您希望在服务器端完成订购，则必须在 distinct 之前推送 OrderBy 调用。

以下是与此主题相关的一些有用链接：

[http://msdn.microsoft.com/en-us/library/ms132151.aspx](http://msdn.microsoft.com/en-us/library/ms132151.aspx) http://blog.lavablast.com/post/2010/05/05/Lambda-IEqualityComparer3cT3e.aspx [http://www.codeproject。 com/Articles/94272/A-Generic-IEqualityComparer-for-Linq-Distinct](http://www.codeproject.com/Articles/94272/A-Generic-IEqualityComparer-for-Linq-Distinct)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T13:30:32.223

我怀疑这`.Distinct()`是对整行数据执行的，并且由于它们都有不同的服务日期，因此没有重复，因此不会被`.Distinct()`.

您可以尝试将方法的顺序更改为：

```
return data.OrderBy(strOrderBy).Select("New(" + strItems + ")").Distinct(); 
```

# java - PipedInputStream 在使用空缓冲区调用 read() 时总是阻塞。有没有办法阻止这种情况？

> ID：10383954
> 
> 赞同：3
> 
> 时间：2012-04-30T12:45:34.143
> 
> 标签：java, inputstream, blocking

我搜索了所有我能找到的与 PipedInputStreams 和 PipedOutputStreams 相关的问题，但没有找到任何可以帮助我的东西。希望这里有人会遇到类似的事情。

**背景：**

[我有一个从任何java.io.InputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)读取数据的类。该类有一个名为**hasNext()**的方法，它检查给定的 InputStream 是否有数据，如果找到数据则返回 true，否则返回 false。这个 hasNext() 方法与其他 InputStreams 完美配合，但是当我尝试使用 PipedInputStream（从不同线程中的 PipedOutputStream 馈送，封装在下面的 inputSupplier 变量中）时，它挂起。在研究了 hasNext() 方法的工作原理后，我使用以下代码重新创建了问题：

```
public static void main(String [] args){
    PipedInputStream inputSourceStream = new PipedInputStream(inputSupplier.getOutputStream());
    byte[] input = new byte[4096];
    int bytes_read = inputSourceStream.read(input, 0, 4096);
} 
```

inputSupplier 只是我编写的一个小类的一个实例，它在自己的线程中运行，并带有一个本地 PipedOutputStream 以避免出现死锁。

**问题** 所以，我的问题是 hasNext() 方法在流上调用 PipedInputStream.read() 方法以确定是否有任何数据要读取。这会导致阻塞读取操作永远不会退出，直到某些数据到达要读取。这意味着如果流为空，我的 hasNext() 函数将永远不会返回 false（或根本不返回）。

免责声明：我知道 available() 方法，但告诉我的只是没有可用的字节，而不是我们处于流的末尾（无论 Stream 的实现可能是什么），所以 read() 是需要检查这一点。

**[编辑]**我最初使用 PipedInputStream 的全部目的是模拟“突发”数据源。也就是说，我需要一个可以偶尔写入的 Stream，以查看我的 hasNext() 方法是否会在读取 Stream 时检测到该 Stream 上有新数据。如果有更好的方法来做到这一点，那么我会很高兴听到它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-15T15:42:34.560

我讨厌删除这么老的问题，但这已经接近谷歌结果的顶部，我刚刚为自己找到了一个解决方案：这个循环字节缓冲区公开输入和输出流，当没有数据时读取方法立即返回 -1当下。一点点线程，您的测试类可以完全按照您想要的方式提供数据。

[http://ostermiller.org/utils/src/CircularByteBuffer.java.html](http://ostermiller.org/utils/src/CircularByteBuffer.java.html)

**编辑**

原来我误解了上述类的文档，它只在线程调用`read()`被中断时返回-1。我对 read 方法做了一个快速修改，它给了我想要的东西（原始代码被注释掉，唯一的新代码是用 an`else`替换`else if`：

```
@Override public int read(byte[] cbuf, int off, int len) throws IOException {
        //while (true){
            synchronized (CircularByteBuffer.this){
                if (inputStreamClosed) throw new IOException("InputStream has been closed; cannot read from a closed InputStream.");
                int available = CircularByteBuffer.this.available();
                if (available > 0){
                    int length = Math.min(len, available);
                    int firstLen = Math.min(length, buffer.length - readPosition);
                    int secondLen = length - firstLen;
                    System.arraycopy(buffer, readPosition, cbuf, off, firstLen);
                    if (secondLen > 0){
                        System.arraycopy(buffer, 0, cbuf, off+firstLen,  secondLen);
                        readPosition = secondLen;
                    } else {
                        readPosition += length;
                    }
                    if (readPosition == buffer.length) {
                        readPosition = 0;
                    }
                    ensureMark();
                    return length;
                //} else if (outputStreamClosed){
                } else {  // << new line of code
                    return -1;
                }
            }
            //try {
            //    Thread.sleep(100);
            //} catch(Exception x){
            //    throw new IOException("Blocking read operation interrupted.");
            //}
        //}
    } 
```

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:22:13.767

Java SE 6 及更高版本（如果我错了，请纠正我）附带 java.nio 包，该包专为异步 I/O 设计，听起来像您所描述的

# java - 从人群中去除染色体？

> ID：10383956
> 
> 赞同：0
> 
> 时间：2012-04-30T12:45:49.823
> 
> 标签：java, arraylist, genetic-algorithm

我正在尝试编写一种方法来从我的人群中移除一条染色体。我写的方法如下。运行代码时出现越界错误。人口由`ArrayList`. 该`getChromosomeFitness`方法返回一个`int`值分数。有人能发现我的错误吗？

```
void removeWorst()
{   
  int worst = population.get(0).getChromosomeFitness();
  int temp = 0; 

  for(int i = 1; i < population.size(); i++)
  { 
    if (population.get(i).getChromosomeFitness() < population.get(worst).getChromosomeFitness())
    {
      worst = population.get(i).getChromosomeFitness();
      temp = i;
    }
  }
  Chromosome x = population.get(temp);
  population.remove(x);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:52:10.390

你可能应该改变

```
if (population.get(i).getChromosomeFitness() < population.get(worst).getChromosomeFitness()) 
```

至

```
if (population.get(i).getChromosomeFitness() < worst) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:49:13.403

您不能保证在这一行`population`中有一个索引为 0 的元素：

```
int worst= population.get(0).getChromosomeFitness(); 
```

尝试将此添加到您的方法中：

```
void removeWorst() { 
   if (population.isEmpty()) {
      return;
   }
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:51:35.350

您的代码中有几个潜在问题：

```
int worst= population.get(0).getChromosomeFitness(); 
```

你需要确保这`population.isEmpty()`是错误的

```
population.get(worst).getChromosomeFitness() 
```

同样的事情，你需要确保`(worst >= 0 && worst < population.size())`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T12:52:13.840

问题似乎是你得到了实际的适应度而不是物体本身。问题在于这一行：`int worst= population.get(0).getChromosomeFitness();`. 这将返回一个与列表尺寸无关的整数值，正如您所说，它是 chromozome 的适应度，它可能远远超过列表的大小。

这应该可以解决问题：

```
void removeWorst()
{  
  int temp=0;   

  for(int i=1; i <population.size();i++)
  { 
    if (population.get(i).getChromosomeFitness() < population.get(temp).getChromosomeFitness())
    {
      temp=i;
    }
  }
  Chromosome x= population.get(temp);
  population.remove(x);
} 
```

话虽如此，这样做可能更简洁的方法是使用自定义比较器对列表进行排序，然后简单地删除最后一个元素。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-30T12:56:34.897

在尝试从中删除某些内容之前，确保人口中有一些内容？

# spring-mvc - 如何在 Liferay 中制作单独的 Web 应用程序？

> ID：10383962
> 
> 赞同：0
> 
> 时间：2012-04-30T12:46:07.227
> 
> 标签：spring-mvc, liferay, liferay-6

今天我读到了Liferay。我参考了 liferay.com 并找到了一个我已经成功运行的社区演示应用程序。

但是，我的问题是，我可以制作单独的 Web 应用程序吗？就像在春天（不是必须包含在演示应用程序中的门户）。

```
Using community edition. 
```

谢谢.. ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T20:30:20.723

我不完全是你的意思，但 Liferay 是门户。这不是像 spring 那样的 Web 框架，而是建立门户和自定义门户的技术。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T07:26:10.803

正如 Mark 所说，Liferay 是一个门户，它本身就是一个运行在 Tomcat 等应用服务器上的 Web 应用程序。

如果您想使用 Spring 创建一个单独的 Web 应用程序，您可以将它部署到与 Liferay 相同的应用程序服务器上，但它不会在 Liferay 中运行，它会与它一起运行。

你可能会更好地澄清你在问什么:)

# php - Jquery mobile Listview 仅显示第一个元素

> ID：10383967
> 
> 赞同：0
> 
> 时间：2012-04-30T12:46:32.670
> 
> 标签：php, jquery, jquery-mobile

我有这个页面用 php 和 jquery mobile 编码。它获取输入并查询数据库，然后填充列表视图。一切正常，但问题是它只显示列表视图的*第一个元素*。它应该返回多个 data-role="page" 元素作为搜索结果。

```
<div data-role="page">
    <div data-role="content">
        <ul data-role="listview" data-theme="c">
            <?php while($products = mysql_fetch_array($result)) {?> 
                <li>
                    <a href="#">
                        <h3><?php echo $products['Product_name'] ; ?></h3>
                        <p><?php echo $products['Product_price'] ; ?></p>
                    </a>
                </li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:46:55.090

您没有关闭 While 语句，我看不到右括号 }

您需要使用以下代码：

```
<div data-role="page">
    <div data-role="content">
        <ul data-role="listview" data-theme="c">
            <?php while($products = mysql_fetch_array($result)) {?> 
                <li>
                    <a href="#">
                        <h3><?php echo $products['Product_name'] ; ?></h3>
                        <p><?php echo $products['Product_price'] ; ?></p>
                    </a>
                </li>
           <? }?>
        </ul>
    </div> 
```

# c# - 从引用的项目发布非托管 DLL

> ID：10383971
> 
> 赞同：9
> 
> 时间：2012-04-30T12:46:41.593
> 
> 标签：c#, dll

我有一个 C# 项目（我们称之为驱动程序），它使用非托管 DLL 与某些硬件进行交互。我有另一个引用驱动程序的项目。当我构建项目时，非托管 DLL 会根据需要复制到输出目录。但是，当我将项目发布为 ClickOnce 应用程序时，DLL 不会包含在应用程序的文件中。

在下的`Application Files`项目属性中`Publish`，可以看到Driver的托管DLL，但未列出非托管DLL。

我确信有一个简单的解决方法，但搜索大多会导致有关在项目中包含非托管 DLL 的问题。

提前致谢，

比约恩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T09:27:39.590

在对此进行了更多研究之后，似乎解决方案是将 DLL 作为现有项目添加到所有使用它的项目中。但是，如果您有多个依赖于它的项目，这似乎非常笨拙。

# iphone - 使用带有动态渲染项目的 UIScrollView 消除滚动滞后

> ID：10383985
> 
> 赞同：1
> 
> 时间：2012-04-30T12:47:40.150
> 
> 标签：iphone, objective-c, ios, uiscrollview, uikit

我有一组包含图像、视频和 .gif 图像的项目，这些项目显示在 UIWebView 中，当用户滚动到屏幕底部并到达当前 UIScrollView 偏移量的末尾时，这些项目正在动态呈现。从网络下载项目时，我可以显示一个活动指示器，使用户体验流畅和良好，但是当我缓存所有数据并从缓存中检索它时，当所有项目同时呈现时，我有一个非常烦人的延迟时间（每次装载操作 5 个项目）。我的问题是：**在 UIScrollView 上渲染项目时，是否有可能以某种方式消除滞后？在主线程上渲染项目时如何显示活动指示器？**具体来说，当用户滚动到底部，滚动冻结，所有项目都被渲染并且滚动继续以用户拖动它的相同力时滚动到底部时会发生延迟。

PS 我不能使用 UITableView，所以请不要建议使用它来代替滚动视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:21:58.283

您应该考虑使用 Nimbus 项目中的 NINetworkImageView：[https ://github.com/jverkoey/nimbus](https://github.com/jverkoey/nimbus)

它在您的场景中运行良好的原因是因为它在不同的线程上操作获取的图像。它执行裁剪和调整大小等操作，并在主线程上为您提供最终结果。

有关更完整的示例，请在此处查看我的答案：[https](https://stackoverflow.com/a/10361005/434841) ://stackoverflow.com/a/10361005/434841以获取类似问题。

# emacs - Stack Overflow 降价的 Emacs 模式

> ID：10383986
> 
> 赞同：96
> 
> 时间：2012-04-30T12:47:51.720
> 
> 标签：emacs, markdown, org-mode

我在 Emacs 中使用 Org-mode 来处理我所有的技术文档。我想使用 Emacs 来准备 Stack Overflow 的问题。有没有一个 Emacs 模式，或者更好的是，一个 Org-mode 的扩展来处理 Stack Overflow 格式？理想情况下，它应该包括 Stack Overflow 问题/评论缓冲区中使用的 markdown 语法支持的所有格式选项。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-30T15:49:02.480

## 将 Emacs 与堆栈溢出集成

[如前所述](https://stackoverflow.com/a/10384197/789593)，您可以使用[markdown-mode](http://jblevins.org/projects/markdown-mode/)。要将 markdown-mode 与 Stack Overflow 集成，您可以使用 Firefox 插件[It's All Text](https://addons.mozilla.org/firefox/addon/its-all-text/)，它允许您使用外部编辑器编辑文本区域。以下是如何设置它：

1.  安装[降价模式](http://jblevins.org/projects/markdown-mode/)。如果您使用 Debian 或 Ubuntu，您可以通过发出

    ```
    sudo apt-get install emacs-goodies-el 
    ```

    或者，如果您使用的是 emacs 24（或在 emacs 23 上有[package.el ）和](https://github.com/technomancy/package.el)[Marmalade](http://marmalade-repo.org/)或[Melpa](http://melpa.milkbox.net/)，您可以使用

    ```
    M-x package-install RET markdown-mode 
    ```

2.  安装[It's All Text](https://addons.mozilla.org/firefox/addon/its-all-text/)。

3.  将 It's All Text 的首选项设置为使用 Emacs。您可以将其设置为可执行文件（例如 /usr/bin/emacs）或[emacsclient](http://psung.blogspot.se/2009/05/using-itsalltext-with-emacsemacsclient.html)。
4.  将以下内容添加到您的 .emacs 以启用 Stack Overflow 和 Stack Exchange 文本区域的降价模式：

    ```
    ;; Integrate Emacs with Stack Exchange https://stackoverflow.com/a/10386560/789593
    (add-to-list 'auto-mode-alist '("stack\\(exchange\\|overflow\\)\\.com\\.[a-z0-9]+\\.txt" . markdown-mode)) 
    ```

    或者，如果`as-external-alist`已定义——如果`M-x describe-variable RET as-external-alist`没有失败——它可能会覆盖你的`auto-mode-alist`. 它的格式略有不同（它是对列表而不是 cons 单元格列表），因此可以使用：

    ```
    (add-to-list 'as-external-alist '("stack\\(exchange\\|overflow\\)\\.com\\.[a-z0-9]+\\.txt" markdown-mode)) 
    ```

5.  按 textarea 右下方的蓝色编辑按钮以通过 emacs 对其进行编辑。蓝色的编辑按钮显示在以下屏幕截图中：

    ![此文本区域右下方蓝色编辑按钮的屏幕截图](../Images/c1cd36e4fa51a16e0e4f97df45ef2094.png)

    在下面的屏幕截图中是一个在 Markdown 模式下编辑这篇文章的 Emacs 缓冲区：

    ![Markdown 模式下的 Emacs 缓冲区的屏幕截图编辑这篇文章](../Images/66fee90ee1ecf10eeb6a933cb8b2afdf.png)

6.  在 Emacs 中完成编辑后，保存缓冲区以将其发送到 Firefox。

如果您希望其他域具有此功能，则需要更改上面的正则表达式。以下识别 Stack Exchange、Stack Overflow、Ask Ubuntu 和超级用户：

```
;; Integrate Emacs with Stack Exchange https://stackoverflow.com/a/10386560/789593
(add-to-list 'auto-mode-alist '("\\(stack\\(exchange\\|overflow\\)\\|superuser\\|askubuntu\\)\\.com\\.[a-z0-9]+\\.txt" . markdown-mode)) 
```

## 在 Org-mode 中使用 markdown-mode

要将 markdow-mode 与 Org-mode 一起使用，您可以使用[其功能来处理源代码](http://orgmode.org/guide/Working-With-Source-Code.html#Working-With-Source-Code)。有了它，您可以在 Org-mode 缓冲区中包含 markdown 块，您可以通过 markdown-mode 对其进行编辑。您可以按如下方式使用它：

1.  在 Org 模式缓冲区中输入`<s`换行符并按`Tab`。这将导致

    ```
    #+begin_src 

    #+end_src 
    ```

2.  输入`markdown`之后`#+begin_src`，这样你就有了

    ```
    #+begin_src markdown

    #+end_src 
    ```

3.  在源块内（在`#+begin_src markdown`和之间`#+end_src`）按下`C-c '`以使用降价模式编辑源块。

4.  在降价模式下编辑源代码块。

5.  按`C-c '`返回 Org 模式缓冲区并插入编辑。这可能类似于以下屏幕截图所示：

    ![一个组织模式缓冲区为这篇文章编辑一段降价代码](../Images/8fb87d6f0ef7ed052a0e666f6abcea5c.png)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-30T13:05:03.303

有降价模式： http: [//jblev​​ins.org/projects/markdown-mode/](http://jblevins.org/projects/markdown-mode/)

有关一些自定义，请参阅[http://emacswiki.org/emacs/MarkdownMode](http://emacswiki.org/emacs/MarkdownMode)。

这里有一个用于新导出引擎的降价后端：http: [//orgmode.org/w/ ?p=org-mode.git;a=blob_plain;f=contrib/lisp/org-md.el;hb=头](http://orgmode.org/w/?p=org-mode.git;a=blob_plain;f=contrib/lisp/org-md.el;hb=HEAD)

确保将`contrib/lisp/`目录添加到您的`load-path`.

然后`(require 'org-export)`和`(require 'org-md)`。

`M-x org-md-export-to-markdown RET`将导出到降价。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-12T10:38:40.047

@NN 的答案也适用于 Chrome，这些更改在细节上有所变化。

Chrome 有[Edit with Emacs](https://github.com/stsquad/emacs_chrome)扩展，类似于 It's all text。安装后，您将在扩展选项页面中找到更多说明。

有一个`edit-server`带有选项的 emacs 自定义组，最重要的是，每个站点的主要模式更改的配置与@NN 的答案不同：

```
(add-to-list 'edit-server-url-major-mode-alist
             '("^stackoverflow" . markdown-mode)) 
```

此外，为了使编辑服务器在终端 emacs 中工作，我必须禁用该`edit-server-new-frame`选项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-01T13:16:43.013

[Pandoc](http://pandoc.org/)支持读取 org-mode 的子集，并且可以输出 markdown。

也就是说，你可以继续用org-mode写，包括写斜体/like this/，然后导出到markdown。在 emacs 中，您可以通过选择区域、点击 Cu MS-\ 并输入 pandoc -r org -t markdown 来转换为 markdown，得到如下输出：

```
In other words, you can keep writing in org-mode, including writing italics *like this*, and then export to markdown. 
```

或者，您可以保存文件并在命令行中进行转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-26T04:43:23.193

## 使用 Chrome 也很容易

[与使用 Emacs](https://chrome.google.com/webstore/detail/edit-with-emacs/ljobjlafonikaiipfkggjbhkghgicgoh?utm_source=chrome-app-launcher-info-dialog) chrome 插件编辑和配置为 对 Stackoverflow（以及我使用的其他 Stackexchange 站点） 使用[markdown-mode的 Emacs](http://jblevins.org/projects/markdown-mode/) [Edit Server](https://github.com/stsquad/emacs_chrome)对我的解决方案进行测试相比，这不是一个答案 。*安装扩展程序和MELPA*软件包后我所要做的一切都已设置

 *```
(setq edit-server-url-major-mode-alist
             '(("mail.google.com" . org-mode)
               ("stackoverflow\\.com" . markdown-mode)
               (".*\\.stackexchange\\.com" . markdown-mode)
               ("github\\.com" . markdown-mode))) 
```

### Gmail 邮件支持

请注意，在上述设置中，我将*org-mode*用于 gmail 消息。仍然需要在这里做一些工作，但可以通过一点努力，使用 org-mode 起草您的 gmail 消息，然后使用*org-mime*从您的 org 结构化文本生成 html。您可以只使用降价和降价到 html 的转换。*

# c++ - 说明：将 'char **' 转换为 'const char **'，转换丢失限定符

> ID：10383993
> 
> 赞同：3
> 
> 时间：2012-04-30T12:48:26.083
> 
> 标签：c++, casting, constants

> **可能重复：**
> [从 char** 到 const char** 的隐式转换](https://stackoverflow.com/questions/7016098/implicit-cast-from-char-to-const-char)

给定以下代码：

```
void foo( const char ** buffer );

void bar() 
{
    char * buffer;
    foo( &buffer );
} 
```

为什么如果`foo()`函数有参数，编译器在将变量`const char *`传递给它时不会抱怨？`char *`但是在使用时`char **`，它无法将其转换为`const char **`? 编译器是否`const`在前一种情况下添加任何限定符？

我已经阅读了 C++ 标准的第 4.4 节，这让我更加困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T12:53:53.713

是的，您不能从 a 隐式转换`T **`为 a `const T **`，因为编译器不能再保证不会违反 const-ness。

考虑下面的代码（借自关于这个主题的 C FAQ 问题：[*Why can't I pass a `char **`to a function which requires a `const char **`?*](http://c-faq.com/ansi/constmismatch.html)）：

```
const char c = 'x';
char *p1;
const char **p2 = &p1;  // 3
*p2 = &c;
*p1 = 'X';              // 5 
```

如果编译器允许第 3 行，那么第 5 行将最终写入一个`const`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T12:55:42.617

考虑：

```
char const someText[] = "abcd";

void
foo( char const** buffer )
{
    *buffer = someText;
}

void
bar()
{
    char* buffer;
    foo( &buffer );
    *buffer = 'x';
} 
```

如果这是合法的，则可以在没有干预的情况下修改 const 对象`const_cast`。禁止转换，因为它违反了 const-ness。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T12:56:00.243

您可能会混淆 const 适用的间接级别。

A`char**`可以描述为，`pointer to a pointer to a character`而 a`const char**`可以描述为`pointer to a pointer to a constant character`。

因此，当我们以不同的方式编写时，我们有`pointer to A`(where `A = pointer to character`) 和我们有`pointer to B`(where `B = pointer to a constant character`)。

显然现在（我希望）A 和 B 是不同的类型，因为不能将指向 A 的指针分配给指向 B 的指针（反之亦然）。

# height - 高度自动CSS问题

> ID：10383994
> 
> 赞同：0
> 
> 时间：2012-04-30T12:48:30.353
> 
> 标签：height, css

我试图将[网页](http://b2b.tangent-design.com/blog/posts/2012/march/15/b2b-new-website/#!/comments/awais/)的高度设置为自动但没有成功。当文本增长时，它会与页脚重叠。有什么想法我弄错了吗？我想`.main`在文本增长时扩展课程。

```
.main {    
    background-position: right bottom;
    min-height: 1200px;
    background-color: #FFFFFF;
    background-image: url('../images/side-shape.png');
    background-repeat: no-repeat;
    height:auto !Important;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:52:29.903

只需从您的页脚类中删除此行

边距顶部：-175px；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T12:51:46.303

看起来您需要清除左列中的浮点数。放入`clear: both;`你`footer_wrapper`的应该可以解决这个问题。

# ruby-on-rails - 销毁对象时为空列名

> ID：10383995
> 
> 赞同：5
> 
> 时间：2012-04-30T12:48:42.907
> 
> 标签：ruby-on-rails, postgresql

我有两个模型：Show 和 Deal。

```
class Show < ActiveRecord::Base
  has_many :deals, :inverse_of => :show, :dependent => :destroy
  ...

class Deal < ActiveRecord::Base
  belongs_to :show, :inverse_of => :deals
  ... 
```

当我尝试销毁 Show 时，我收到此错误：

```
PG::Error: ERROR:  zero-length delimited identifier at or near """"
LINE 1: DELETE FROM "deals" WHERE "deals"."" = $1 
```

为什么列名是空的？在 schema.rb 中：

```
create_table "deals", :id => false, :force => true do |t|
  t.integer "discount_id"
  t.integer "show_id"
end

create_table "shows", :force => true do |t|
  t.integer  "movie_id"
  t.integer  "hall_id"
  t.datetime "show_time"
  t.integer  "city_id"
  t.integer  "price"
end 
```

外键添加到数据库

```
CONSTRAINT fk_deals_shows FOREIGN KEY (show_id)
  REFERENCES shows (id) MATCH SIMPLE
  ON UPDATE NO ACTION ON DELETE NO ACTION 
```

**PS**我通过向交易表添加主键解决了这个问题，但我真的不需要它。所以这个问题仍然是实际的。我可以对没有 id 主键的模型使用依赖项吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T09:09:39.307

根据[compositekeys](http://compositekeys.rubyforge.org/) rails 不支持复合主键（即您的情况）。因此，解决方案之一是使用您的表格，`has_and_belongs_to_many`因为您的表格看起来就像多对多表格。

另一种解决方案是使用上面链接上的 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:16:19.363

我注意到它可以解决您的问题，但根据[https://github.com/rails/rails/commit/ccea98389abbf150b886c9f964b1def47f00f237](https://github.com/rails/rails/commit/ccea98389abbf150b886c9f964b1def47f00f237)您需要`:inverse_of`使用奇异值设置参数：

```
belongs_to :show, :inverse_of => :deal 
```

我希望它有帮助

# c# - 写入客户端特定位置的文件

> ID：10383999
> 
> 赞同：0
> 
> 时间：2012-04-30T12:48:52.433
> 
> 标签：c#, asp.net

我正在根据表单上收集的信息创建一个位数组，以便能够将其保存并附加到客户端的特定文件中。我可以提示用户保存文件，但我不想让他们选择保存文件的位置。无论如何都要强制保存位置，所以所有用户都会点击一个按钮并将文件附加到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T12:52:54.663

您不能强制定位也不能附加到现有的文件客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:01:55.550

你不能这样做有很多关于它的安全问题。请按照以下链接

[使用 jQuery 读取/写入文件](https://stackoverflow.com/questions/582268/read-write-to-file-using-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T13:02:02.720

出于这些目的，您可以使用 Silverlight。这是一个链接，将向您解释什么是 Silverlight：[Silverlight](http://www.microsoft.com/silverlight/what-is-silverlight/)

Silverlight 很容易与您的 ASP.NET 应用程序集成，因此如果在客户端安装插件是一种选择，您应该尝试一下。

以下链接可帮助您使用 Silverlight 完成任务：

[打开和写入文件的教程](http://geekswithblogs.net/PeterTweed/archive/2009/10/09/silverlight---opening-and-saving-files.aspx)