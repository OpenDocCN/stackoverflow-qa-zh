# StackOverflow 问答 000064000-000064999

# java - Java中的排水标准错误

> ID：64000
> 
> 赞同：4
> 
> 时间：2008-09-15T15:34:35.290
> 
> 标签：java, multithreading, process-management

从 Java 启动进程时，如果我不从管道中读取，stderr 和 stdout 都会阻塞输出。目前，我有一个线程主动从一个线程中读取数据，而另一个线程则从主线程块中读取。

是否有一种简单的方法可以连接两个流或以其他方式导致子进程继续，同时不会丢失 stderr 中的数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T15:57:29.183

在 ProcessBuilder 上设置 redirectErrorStream 属性以将 stderr 输出发送到 stdout：

```
ProcessBuilder builder = new ProcessBuilder(command);
builder.redirectErrorStream(true); 
```

然后，您应该创建一个线程来处理流程流，如下所示：

```
Process p = builder.start();

InputHandler outHandler = new InputHandler(p.getInputStream()); 
```

其中 InputHandler 定义为：

```
private static class InputHandler extends Thread {

    private final InputStream is;

    private final ByteArrayOutputStream os;

    public InputHandler(InputStream input) {
        this.is = input;
        this.os = new ByteArrayOutputStream();
    }

    public void run() {
        try {
            int c;
            while ((c = is.read()) != -1) {
                os.write(c);
            }
        } catch (Throwable t) {
            throw new IllegalStateException(t);
        }
    }

    public String getOutput() {
        try {
        os.flush();
        } catch (Throwable t) {
            throw new IllegalStateException(t);
        }
        return os.toString();
    }

} 
```

或者，只需为 InputStream 和 ErrorStream 创建两个 InputHandler。知道如果您不阅读程序将阻止程序是战斗的 90% :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T15:51:53.253

只有两个线程，一个从 stdout 读取，一个从 stderr 读取？

# php - 如何使用 PHP 获取当前年份？

> ID：64003
> 
> 赞同：1067
> 
> 时间：2008-09-15T15:34:54.977
> 
> 标签：php, date, php-5.3, php-5.4, php4

我想在网站的页脚添加版权声明，但我认为过时的年份太俗气了。

如何使用[PHP 4](http://en.wikipedia.org/wiki/PHP#History)或[PHP 5](http://en.wikipedia.org/wiki/PHP#History)自动更新年份？

* * *

## 回答 #1

> 赞同：1332
> 
> 时间：2008-09-15T15:45:50.990

您可以使用[date](http://php.net/manual/en/function.date.php)或[strftime](http://php.net/manual/en/function.strftime.php)。在这种情况下，我会说一年就是一年，无论如何（除非有一个以不同方式格式化年份的语言环境？）

例如：

```
<?php echo date("Y"); ?> 
```

附带说明一下，在 PHP 中格式化日期时，如果您想在与默认设置不同的语言环境中格式化日期，这很重要。如果是这样，您必须使用 setlocale 和 strftime。根据日期的[php手册](http://php.net/manual/en/function.date.php)：

> 要格式化其他语言的日期，您应该使用 setlocale() 和 strftime() 函数而不是 date()。

从这个角度来看，我认为最好尽可能多地使用 strftime，如果您甚至有可能必须本地化您的应用程序。如果这不是问题，请选择您最喜欢的那个。

* * *

## 回答 #2

> 赞同：526
> 
> 时间：2008-09-15T15:35:48.110

```
<?php echo date("Y"); ?> 
```

* * *

## 回答 #3

> 赞同：214
> 
> 时间：2008-09-15T22:51:11.357

我显示版权行的超级懒惰版本，它会自动保持更新：

```
&copy; <?php 
$copyYear = 2008; 
$curYear = date('Y'); 
echo $copyYear . (($copyYear != $curYear) ? '-' . $curYear : '');
?> Me, Inc. 
```

今年（2008 年），它会说：

> © 2008 我公司。

明年，它会说：

> © 2008-2009 我公司。

并永远保持与当前年份的更新。

* * *

或者（PHP 5.3.0+）一种使用匿名函数的紧凑方法，这样您就不会有变量泄漏，也不会重复代码/常量：

```
&copy; 
<?php call_user_func(function($y){$c=date('Y');echo $y.(($y!=$c)?'-'.$c:'');}, 2008); ?> 
Me, Inc. 
```

* * *

## 回答 #4

> 赞同：78
> 
> 时间：2013-01-02T18:03:06.773

随着 PHP 朝着更加面向对象的方向发展，我很惊讶这里没有人引用内置[`DateTime`](http://php.net/manual/en/book.datetime.php)类：

```
$now = new DateTime();
$year = $now->format("Y"); 
```

或在实例化时具有类成员访问权限的单线（php> = 5.4）：

```
$year = (new DateTime)->format("Y"); 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2008-09-15T15:36:36.767

[http://us2.php.net/date](http://us2.php.net/date)

```
echo date('Y'); 
```

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2008-09-15T15:35:53.213

```
strftime("%Y"); 
```

我喜欢[strftime](http://us3.php.net/manual/en/function.strftime.php)。这是抓取/重新组合日期/时间块的绝佳功能。

另外，它尊重日期功能不做的区域设置。

* * *

## 回答 #7

> 赞同：16
> 
> 时间：2008-09-15T15:44:58.557

这个给你当地时间：

```
$year = date('Y'); // 2008 
```

而这个**UTC**：

```
$year = gmdate('Y'); // 2008 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2014-01-17T15:52:12.267

这就是我所做的：

```
<?php echo date("d-m-Y") ?> 
```

下面是对它的作用的一些解释：

```
d = day
m = month
Y = year 
```

Y 会给你四位数字（例如 1990）和 y 两位数（例如 90）

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2014-10-16T08:02:56.580

对于 4 位表示：

```
<?php echo date('Y'); ?> 
```

2位数字表示：

```
<?php echo date('y'); ?> 
```

查看 php 文档以获取更多信息： [https ://secure.php.net/manual/en/function.date.php](https://secure.php.net/manual/en/function.date.php)

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2014-04-11T07:08:02.777

`echo date('Y')`给你当前年份，这将自动更新，因为`date()`给我们当前日期。

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2008-09-15T15:37:52.677

```
print date('Y'); 
```

有关更多信息，请查看 date() 函数文档：[https ://secure.php.net/manual/en/function.date.php](https://secure.php.net/manual/en/function.date.php)

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2017-02-09T20:19:00.090

使用刚刚调用的 PHP 函数`date()`。

它采用当前日期，然后您为其提供格式

格式将是 Y。大写 Y 将是一个四位数的年份。

```
<?php echo date("Y"); ?> 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-02-15T23:22:33.350

```
<?php echo date("Y"); ?> 
```

这段代码应该做

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2016-10-26T07:02:16.650

写吧：

```
date("Y") // A full numeric representation of a year, 4 digits
          // Examples: 1999 or 2003 
```

或者：

```
date("y"); // A two digit representation of a year     Examples: 99 or 03 
```

并“回显”这个值......

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2018-12-28T09:45:00.893

使用 PHP`date()`函数。

格式将是 Y。大写 Y 将是一个四位数的年份。

```
<?php echo date("Y"); ?> 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2012-08-30T16:32:12.173

如果您的服务器支持短标签，或者您使用 PHP 5.4，您可以使用：

```
<?=date("Y")?> 
```

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2016-11-28T02:07:02.823

顺便说一句...有一些正确的方法如何显示网站版权。有些人倾向于使事情变得多余，即：版权©具有相同的含义。重要的版权部分是：

```
**Symbol, Year, Author/Owner and Rights statement.** 
```

> 使用 PHP + HTML：

```
<p id='copyright'>&copy; <?php echo date("Y"); ?> Company Name All Rights Reserved</p> 
```

或者

```
<p id='copyright'>&copy; <?php echo "2010-".date("Y"); ?> Company Name All Rights Reserved</p 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2016-12-25T00:57:20.037

最高 php 5.4+

```
<?php
    $current= new \DateTime();
    $future = new \DateTime('+ 1 years');

    echo $current->format('Y'); 
    //For 4 digit ('Y') for 2 digit ('y')
?> 
```

或者你可以用一根线

```
$year = (new DateTime)->format("Y"); 
```

如果您想增加或减少年份另一种方法；添加如下修改行。

```
<?PHP 
  $now   = new DateTime;
  $now->modify('-1 years'); //or +1 or +5 years 
  echo $now->format('Y');
  //and here again For 4 digit ('Y') for 2 digit ('y')
?> 
```

* * *

## 回答 #19

> 赞同：5
> 
> 时间：2017-09-15T05:07:10.010

获得全年使用：

```
 <?php 
    echo $curr_year = date('Y'); // it will display full year ex. 2017
?> 
```

或者像这样只使用两位数的年份：

```
 <?php 
    echo $curr_year = date('y'); // it will display short 2 digit year ex. 17
?> 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-11-10T05:55:56.467

我展示版权的方式，不断自动更新

```
<p class="text-muted credit">Copyright &copy;
    <?php
        $copyYear = 2017; // Set your website start date
        $curYear = date('Y'); // Keeps the second year updated
        echo $copyYear . (($copyYear != $curYear) ? '-' . $curYear : '');
    ?> 
</p> 
```

它将输出结果为

```
copyright @ 2017   //if $copyYear is 2017 
copyright @ 2017-201x    //if $copyYear is not equal to Current Year. 
```

* * *

## 回答 #21

> 赞同：3
> 
> 时间：2019-03-15T16:48:53.310

本节的最佳简码：

```
<?= date("Y"); ?> 
```

* * *

## 回答 #22

> 赞同：3
> 
> 时间：2021-02-01T08:31:44.590

要使用 PHP 的日期函数获取当前年份，您可以传入“Y”格式字符，如下所示：

```
//Getting the current year using
//PHP's date function.

$year = date("Y");
echo $year; 
```

上面的示例将打印出当前年份的完整 4 位表示。

如果您只想检索 2 位格式，则可以使用小写“y”格式字符：

```
$year = date("y");
echo $year;
1
2
$year = date("y");
echo $year; 
```

上面的代码段将打印出 20 而不是 2020，或 19 而不是 2019，等等。

* * *

## 回答 #23

> 赞同：2
> 
> 时间：2017-09-09T05:51:49.033

```
<?php date_default_timezone_set("Asia/Kolkata");?><?=date("Y");?> 
```

您可以在页脚部分使用它来获得动态版权年份

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2020-04-01T13:39:07.933

```
$year = date("Y", strtotime($yourDateVar)); 
```

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2021-06-16T09:50:03.387

在 Laravel 中

```
$date = Carbon::now()->format('Y');
return $date; 
```

在 PHP 中

```
echo date("Y"); 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-11-20T21:11:33.523

就我而言，wordpress 网站页脚中的版权声明需要更新。

以为简单，但涉及的步骤或超出预期。

1.  `footer.php`在您的主题文件夹中打开。

2.  找到版权文本，预计这都是硬编码的，但发现：

    ```
    <div id="copyright">
        <?php the_field('copyright_disclaimer', 'options'); ?>
    </div> 
    ```

3.  现在我们知道年份写在 WordPress 管理员的某个地方，所以找到它以删除年份文字。在 WP-Admin 中，转到`Options`左侧的主管理菜单：

    [![在此处输入图像描述](https://i.stack.imgur.com/ZQ1CO.png)](https://i.stack.imgur.com/ZQ1CO.png)然后在下一页转到选项卡`Disclaimers`：

    [![在此处输入图像描述](https://i.stack.imgur.com/DjvU2.png)](https://i.stack.imgur.com/DjvU2.png)在顶部附近，您会发现版权年份：

    [![在此处输入图像描述](https://i.stack.imgur.com/vBPDR.png)](https://i.stack.imgur.com/vBPDR.png)删除©符号+年份+年份后面的空白区域，然后使用页面`Update`右上角的按钮保存页面。

4.  现在删除年份的文本版本，我们可以去添加使用 PHP 自动更新的年份。回到**第 2**步中找到的代码块`footer.php`并将其更新为：

    ```
    <div id="copyright">
        &copy;<?php echo date("Y"); ?> <?php the_field('copyright_disclaimer', 'options'); ?>
    </div> 
    ```

5.  **完毕！**只需要测试以确保更改已按预期生效。

对于许多人来说，情况可能并不相同，但是我们在很多客户站点中都遇到了这种模式，并认为最好在此处记录。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-01-28T06:28:24.387

用 M 打印当前月份，用 D 打印日期，用 Y 打印年份。

```
<?php echo date("M D Y"); ?> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-03-02T12:31:03.703

有关日期函数 [strtotime](https://www.php.net/manual/en/function.strtotime.php)中第二个参数的更多价格，请返回参数传递的时间戳

```
// This work when you get time as string
echo date('Y', strtotime("now"));

// Get next years
echo date('Y', strtotime("+1 years"));

// 
echo strftime("%Y", strtotime("now")); 
```

有日期时间类

```
echo (new DateTime)->format('Y'); 
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-09-08T13:34:32.330

创建一个辅助函数并调用它

```
getCurrentYear();

function getCurrentYear(){
    return now()->year;
} 
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2022-01-03T16:50:07.810

```
$dateYear = date('Y');
echo "Current Year: $dateYear"; 
```

> 当年：2022

```
$dateYear = date('y');
echo $dateYear; 
```

> 22

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2014-10-02T10:18:54.667

```
<?php
$time_now=mktime(date('h')+5,date('i')+30,date('s'));
$dateTime = date('d_m_Y   h:i:s A',$time_now);

echo $dateTime;
?> 
```

* * *

## 回答 #32

> 赞同：-3
> 
> 时间：2019-06-11T22:40:49.250

如果您使用的是[用于 DateTime 的 Carbon PHP API 扩展](https://carbon.nesbot.com/)，则可以轻松实现：

`<?php echo Carbon::now()->year; ?>`

# javascript - 如何从基于 Javascript 的 web 应用程序中录制音频？

> ID：64010
> 
> 赞同：5
> 
> 时间：2008-09-15T15:35:51.917
> 
> 标签：javascript, audio, web-applications

我正在尝试编写一个记录 WAV 文件的网络应用程序（例如：来自用户的麦克风）。我知道单独的 Javascript 无法做到这一点，但我对使用最少专有方法来增强我的 Javascript 感兴趣。我的目标浏览器是 Firefox for PC 和 Mac（所以没有 ActiveX）。

我收集它可以用 Flash 完成（但不能作为 WAV 格式的文件）。我收集它可以用 Java 完成（但不能没有代码签名）。这些是唯一的选择吗？

我想将文件录制为 WAV，因为 webapp 的目的是组装一个*高质量*的短声音库。我估计上传将是 50 MB，这对于质量来说是非常值得的。该应用程序将仅在我们的 Intranet 上使用。

更新：由于 JetPack 即将推出的音频 API，现在有一个替代解决方案：请参阅[https://wiki.mozilla.org/Labs/Jetpack/JEP/18](https://wiki.mozilla.org/Labs/Jetpack/JEP/18)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2011-11-25T15:27:32.340

这是一个旧线程，但问题仍然相关。应该注意的是，有一种方法可以在没有专有后端的情况下将音频录制到 Flash 中的服务器。这是一个帮助您入门的示例项目：

[https://code.google.com/p/wami-recorder/](https://code.google.com/p/wami-recorder/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T21:08:39.433

Flash 要求您使用媒体服务器（注意：我仍在使用 Flash MX，但快速的 Google 搜索显示了似乎同意的 Flash CS3 文档 - 请注意 Flash CS4 即将推出，届时可能会更改）。Macromedia / Adob​​e 旨在鞭打您的媒体服务器，但 Red5 开源项目可能适合您的项目：

[http://osflash.org/red5](http://osflash.org/red5)

我认为Java会更合适。我在 Moodle（一个开源虚拟学习环境）上看到了一个可以做你想做的事情的小程序：

[http://64.233.183.104/search?q=cache:k27rcY8QNWoJ:moodle.org/mod/forum/discuss.php%3Fd%3D51231+moodlespeex&hl=en&ct=clnk&cd=1&gl=uk](http://64.233.183.104/search?q=cache:k27rcY8QNWoJ:moodle.org/mod/forum/discuss.php%3Fd%3D51231+moodlespeex&hl=en&ct=clnk&cd=1&gl=uk)

（需要会员资格的网站，但对 Google 开放，因此链接会转到 Google 缓存页面）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T15:54:05.337

您唯一的选择是 Flash、Java、ActiveX 或编写自定义 Firefox 扩展。Flash 可能是您最好的选择——您可以编写或使用现有的 Flash 应用程序进行录制，并将几乎所有其他内容都保存在纯 Javascript 中。

为什么要 WAV 文件？如果您打算在客户端处理波形的实际位，那么这可能是个坏主意；客户端可能真的很慢，您将无法真正操作该文件。如果您想将声音发送回服务器，那么最好发送一个压缩文件，然后在服务器上将其解压缩。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T15:47:52.153

Flash 将是您最好的解决方案。

希望这会有所帮助：[http ://www.kirupa.com/forum/showthread.php?t=17331](http://www.kirupa.com/forum/showthread.php?t=17331)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T15:49:07.003

是的，我相信 Flash 或 Java-Applet 是唯一的方法。由于您无法与麦克风交互，因此您必须使用某种浏览器插件，这是使用麦克风的唯一方法。我不知道有任何其他插件可以提供该功能。在谷歌上快速搜索并没有发现任何进一步的可能性。我认为最简单的方法是使用 Flash。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-08-12T03:16:39.407

如果您不介意用户安装插件，另一种解决方案是使用 Runtime Revolution RevWeb 插件，该插件支持在浏览器中录制音频（并且实现起来很简单，我制作了一个测试小程序以在大约 10 分钟内确认这一点）。 [http://revweb.runrev.com/](http://revweb.runrev.com/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2008-09-15T21:19:38.330

您可以在此处免费下载 Real Producer Basic ( [http://forms.real.com/rnforms/products/tools/producerbasic/](http://forms.real.com/rnforms/products/tools/producerbasic/) )，并将其嵌入为 activeX 对象，因为它位于您的 Intranet 上。Flash 将以相同的方式嵌入，它在所有办公室工作站上，但由于这是您的 Intranet，您可以将它安装在所有带有 AD 的机器上。与 wav 相比，真正的音频文件非常小，而且听起来很棒。这是 Real Sudio ActiveX 操作指南的链接。 [http://service.real.com/help/library/guides/activex/producerx.html](http://service.real.com/help/library/guides/activex/producerx.html)

# wcf - 如何自动发现 WCF 服务？

> ID：64014
> 
> 赞同：8
> 
> 时间：2008-09-15T15:36:26.690
> 
> 标签：wcf, .net-3.5

有没有办法自动发现网络中的特定 WCF 服务？如果可能的话，我不想为我的客户配置地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-05-19T16:54:24.417

是的，有一种方法可以自动发现服务。.NET 4.0 包含一个名为 WCF-Discovery 的功能，它基于 WS-Discovery 协议。这里有一个显示 HOL 的培训工具包：(http) [code.msdn.microsoft.com/wcfwf4](http://code.msdn.microsoft.com/wcfwf4) 您也可以在此处关注团队的博客：(http) [blogs.msdn.com/discovery/Default.aspx](http://blogs.msdn.com/discovery/Default.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T15:50:37.530

您要查看的是 WS-Discovery 协议。我在[netfx3 的](http://wcf.netfx3.com/files/folders/protocol_channels/entry7909.aspx)网站上找到了一个使用[规范](http://en.wikipedia.org/wiki/WS-Discovery)的示例。我建议通过基于特定端点探测服务来根据范围搜索服务。

# c# - 使用 MDILayout 的 Windows 窗体排序

> ID：64029
> 
> 赞同：0
> 
> 时间：2008-09-15T15:38:22.847
> 
> 标签：c#, winforms, mdi

我在使用 C# 和 Windows MDI Form 应用程序时遇到了一个非常具体的问题。我想向用户显示两个（或更多）图像，一个“左”和一个“右”图像。图像的名称对用户隐藏，然后用户选择他们喜欢的图像（这是涉及医学图像质量的研究的一部分，因此用户必须对可能在图像中显示的相关捕获参数视而不见。图像名称）。代替显示实际名称，向用户显示替代名称，例如“图像 0”和“图像 1”（等）。

每当我使用标准`MDILayout.TileVertical`or`TileHorizontal`时，图像都会以相反的顺序加载。例如，如果我有图像 0 和图像 1，则会显示它们

图片 1 图片 0

三个或更多图像将类似于

2 1 0

或者

3 2

1 0

等等。问题是，我的用户对这种从右到左感到困惑，如果我有另一个对话框询问他们哪个图像更好（或对显示的图像进行评分），他们总是将屏幕上图像的顺序与顺序混淆对话框中的图像。也就是说，如果我只是在评级对话框中订购图像 0 1 2 3 等，他们假设显示的图像 3 是 MDI 父窗口中的图像 0，图像 2 是图像 1 等——它们从左到右阅读，并且图像从右到左显示。如果我重新排序评级对话框中的选项卡以反映屏幕上的顺序，那只会进一步混淆它们（“为什么图像 3 在图像 2 之前？”）并且结果以错误的顺序出现，并且通常无法使用。

那么，如何使用`MDILayout`in强制显示窗口的顺序`C#`？我必须手动完成，还是可以将一些开关发送给布局管理器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T15:46:28.337

为什么要使用 MDI 接口？当然，具有 TableLayoutPanel 或类似提供布局的单个窗口会更合适。您想要使用 MDI 布局的唯一原因是允许用户移动窗口，据我所知，从您对问题的描述中可以看出，这无论如何都是不可取的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T00:01:28.300

另一个想法是将实际评级机制放在每个子窗口的底部。所以答案实际上是附在他们子窗口上的图片上，而不是在他们自己的区域里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T15:53:04.090

您能否通过（在显示图像之前）避免此问题：

1.  将图像引用放在一个结构（数组或类似的）中。

2.  让递归函数构建逆序结构（或重新排序原始结构）。

3.  像以前一样使用新的逆序结构来构建您的子窗口。

它会再增加一层，但如果没有人尽快找到反向布局顺序开关，它可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:15:36.830

我强烈建议遵循 Groky 的建议并为此使用单一表单界面而不是 MDI。

如果必须使用 MDI，则需要知道 MDI 布局方法使用 MDI 表单的 Z 顺序来确定表单的最终位置。例如，如果图像 2 在图像 1 之后，则图像 1 将在左侧，图像 2 将在右侧。导致这种情况发生的最合乎逻辑的方法是加载图像 2 的表单，然后加载图像 1 的表单，然后执行 MDI 布局。您还可以使用该`ActivateMdiChild`方法将表单按特定顺序排列（激活一个表单会将其他表单置于其后面）。

它很复杂且容易出错，我强烈建议在一个表单上使用两个窗格的界面，但这会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T17:22:32.100

感谢 Owen 和 Groky，但 Single-Form 界面无法正常工作。首先，我已经有了 MDI 格式的显示代码，因此重写将需要对代码进行非常非常大的重写。不久前，我花了大约三周的时间来编写应用程序的基础知识；这些不是我在这里展示的 jpg，这些是 DCM 图像，每张都有 30 mb 大小，还有我在医学成像之外从未见过的各种支持工具。

其次，一些放射科医生不喜欢分割筛查来进行图像比较，而其他人则需要这样做。因此，为了适应这两种用户，我设置了平铺，但随后用户可以最大化图像，然后在它们之间切换。因此，MDI 是满足不同口味的正确方法；与已经存在且（大部分）工作的系统相比，带有一组非常复杂的选项卡控件的单个界面听起来像是一场噩梦。

但是，由于我确实控制了图像的显示方式，所以我可以强制 z 排序，然后这应该可以工作，对吧？如果我没看错的话，这就是 Fred 和 Owen 的答案的基础。用户进入“评估模式”，然后程序加载图像，显示它们，只有在用户输入评估后，图像才会关闭。鉴于该约束，我可能可以强制执行特定的 z 排序（可能通过从长度循环到 0 而不是从 0 到长度）。

# sql-server - 我可以为 Microsoft SQL Enterprise Manager 编写一个插件来更改查询窗口背景吗

> ID：64032
> 
> 赞同：7
> 
> 时间：2008-09-15T15:38:45.030
> 
> 标签：sql-server

如果查询窗口指向生产数据库，我可以为 Microsoft SQL Enterprise Manager 编写一个插件来更改查询窗口背景吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T18:42:30.330

不，企业管理器没有可供您使用的插件框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T13:44:49.120

我看到这已经得到了回答，但我将添加它以防它对未来的读者有所帮助。企业管理器已被 SQL Management Studio 取代。Management Studio 确实支持加载项。此外，当您在属性窗口中注册服务器时，您可以将自定义颜色与连接相关联。每当您打开查询窗口时，窗口底部的状态栏都会是这种颜色。我们有一个 Access 数据库，其中包含有关我们支持的系统的信息，包括 SQL Server 和数据库名称。我编写了一个 SQL Powershell 脚本来注册所有服务器并将它们的自定义颜色设置为绿色、黄色和红色，以用于开发、验收和生产。它不会改变整个查询窗口的颜色，但它可能对您有用。

# java - 如何制作对象的深层副本？

> ID：64036
> 
> 赞同：339
> 
> 时间：2008-09-15T15:39:04.313
> 
> 标签：java, class, clone

实现深度对象复制功能有点困难。您采取了哪些步骤来确保原始对象和克隆对象不共享引用？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2008-09-15T15:42:23.633

一种安全的方法是序列化对象，然后反序列化。这确保了一切都是全新的参考。

[这是一篇](http://javatechniques.com/blog/low-memory-deep-copy-technique-for-java-objects/)关于如何有效地做到这一点的文章。

*警告：类可能会覆盖序列化，从而不会*创建新实例，例如单例。如果您的类不可序列化，这当然也不起作用。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2008-12-09T22:38:22.177

一些人提到使用或覆盖`Object.clone()`. 不要这样做。`Object.clone()`有一些重大问题，在大多数情况下不鼓励使用它。请参阅 Joshua Bloch 的“ [Effective Java](http://java.sun.com/docs/books/effective/) ”中的第 11 条以获得完整答案。我相信您可以安全地`Object.clone()`在原始类型数组上使用，但除此之外，您需要明智地正确使用和覆盖克隆。

依赖序列化（XML 或其他）的方案很笨拙。

这里没有简单的答案。如果要深度复制对象，则必须遍历对象图并通过对象的复制构造函数或静态工厂方法显式复制每个子对象，进而深度复制子对象。不可变对象（例如`String`s）不需要被复制。顺便说一句，出于这个原因，您应该支持不变性。

* * *

## 回答 #3

> 赞同：62
> 
> 时间：2011-09-29T11:17:53.417

您可以使用序列化进行深层复制，而无需创建文件。

您希望深​​度复制的对象将需要`implement serializable`. 如果该类不是最终类或无法修改，请扩展该类并实现可序列化。

将您的类转换为字节流：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
ObjectOutputStream oos = new ObjectOutputStream(bos);
oos.writeObject(object);
oos.flush();
oos.close();
bos.close();
byte[] byteData = bos.toByteArray(); 
```

从字节流中恢复你的类：

```
ByteArrayInputStream bais = new ByteArrayInputStream(byteData);
Object object = new ObjectInputStream(bais).readObject(); 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2008-09-15T16:48:58.060

您可以使用[`org.apache.commons.lang3.SerializationUtils.clone(T)`](https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/SerializationUtils.html#clone(T))Apache Commons Lang 进行基于序列化的深度克隆，但要小心——性能非常糟糕。

通常，最佳实践是为需要克隆的对象图中的每个对象类编写自己的克隆方法。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2011-09-29T11:57:14.180

实现深度复制的一种方法是将复制构造函数添加到每个关联的类。复制构造函数将 'this' 的实例作为其单个参数并从中复制所有值。相当多的工作，但非常简单和安全。

编辑：请注意，您不需要使用访问器方法来读取字段。您可以直接访问所有字段，因为源实例始终与具有复制构造函数的实例具有相同的类型。很明显，但可能会被忽视。

例子：

```
public class Order {

    private long number;

    public Order() {
    }

    /**
     * Copy constructor
     */
    public Order(Order source) {
        number = source.number;
    }
}

public class Customer {

    private String name;
    private List<Order> orders = new ArrayList<Order>();

    public Customer() {
    }

    /**
     * Copy constructor
     */
    public Customer(Customer source) {
        name = source.name;
        for (Order sourceOrder : source.orders) {
            orders.add(new Order(sourceOrder));
        }
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

编辑：请注意，复制构造函数不考虑继承。例如：如果您将 OnlineOrder（Order 的子类）传递给复制构造函数，则会在副本中创建常规 Order 实例，除非您明确解决此问题。您可以使用反射在参数的运行时类型中查找复制构造函数。但如果需要以一般方式涵盖继承，我建议不要走这条路并寻找另一种解决方案。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-03-20T22:52:09.387

您可以[使用](https://github.com/kostaskougios/cloning)具有简单 API 的库，并通过反射执行相对快速的克隆（应该比序列化方法更快）。

```
Cloner cloner = new Cloner();

MyClass clone = cloner.deepClone(o);
// clone is a deep-clone of o 
```

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2015-01-28T14:53:24.170

Apache commons 提供了一种快速深度克隆对象的方法。

```
My_Object object2= org.apache.commons.lang.SerializationUtils.clone(object1); 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-07-19T22:15:18.957

对于**Spring 框架**用户。使用类`org.springframework.util.SerializationUtils`：

```
@SuppressWarnings("unchecked")
public static <T extends Serializable> T clone(T object) {
     return (T) SerializationUtils.deserialize(SerializationUtils.serialize(object));
} 
```

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2016-11-29T07:24:14.260

对于复杂的对象并且当性能不重要时，我使用 json 库，例如[gson](https://github.com/google/gson) 将对象序列化为 json 文本，然后反序列化文本以获取新对象。

基于反射的 gson 在大多数情况下都可以工作，除了`transient`不会复制字段和带有循环引用的对象`StackOverflowError`。

```
public static <T> T copy(T anObject, Class<T> classInfo) {
    Gson gson = new GsonBuilder().create();
    String text = gson.toJson(anObject);
    T newObject = gson.fromJson(text, classInfo);
    return newObject;
}
public static void main(String[] args) {
    String originalObject = "hello";
    String copiedObject = copy(originalObject, String.class);
} 
```

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2008-10-23T08:03:08.533

XStream 在这种情况下非常有用。这是一个简单的克隆代码

```
private static final XStream XSTREAM = new XStream();
...

Object newObject = XSTREAM.fromXML(XSTREAM.toXML(obj)); 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2012-02-07T03:51:31.897

一种非常简单的方法是使用 Jackson JSON 将复杂的 Java 对象序列化为 JSON 并将其读回。

来自[https://github.com/FasterXML/jackson-databind/#5-minute-tutorial-streaming-parser-generator](https://github.com/FasterXML/jackson-databind/#5-minute-tutorial-streaming-parser-generator)：

```
JsonFactory f = mapper.getFactory(); // may alternatively construct directly too

// First: write simple JSON output
File jsonFile = new File("test.json");
JsonGenerator g = f.createGenerator(jsonFile);
// write JSON: { "message" : "Hello world!" }
g.writeStartObject();
g.writeStringField("message", "Hello world!");
g.writeEndObject();
g.close();

// Second: read file back
JsonParser p = f.createParser(jsonFile);

JsonToken t = p.nextToken(); // Should be JsonToken.START_OBJECT
t = p.nextToken(); // JsonToken.FIELD_NAME
if ((t != JsonToken.FIELD_NAME) || !"message".equals(p.getCurrentName())) {
   // handle error
}
t = p.nextToken();
if (t != JsonToken.VALUE_STRING) {
   // similarly
}
String msg = p.getText();
System.out.printf("My message to you is: %s!\n", msg);
p.close(); 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2008-09-16T05:08:35.693

使用 XStream（[http://x-stream.github.io/](http://x-stream.github.io/)）。您甚至可以通过注释或显式指定 XStream 类的属性名称来控制可以忽略的属性。此外，您不需要实现可克隆接口。

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2008-09-15T15:44:32.333

深度复制只能在每个班级同意的情况下进行。如果您可以控制类层次结构，则可以实现可克隆接口并实现 Clone 方法。否则做深拷贝是不可能安全的，因为对象也可能共享非数据资源（例如数据库连接）。然而，一般来说，深拷贝在 Java 环境中被认为是不好的做法，应该通过适当的设计实践来避免。

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2011-09-15T13:55:43.983

```
import com.thoughtworks.xstream.XStream;

public class deepCopy {
    private static  XStream xstream = new XStream();

    //serialize with Xstream them deserialize ...
    public static Object deepCopy(Object obj){
        return xstream.fromXML(xstream.toXML(obj));
    }
} 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2019-11-21T04:43:36.647

使用 Jackson 对对象进行序列化和反序列化。此实现不需要对象实现 Serializable 类。

```
 <T> T clone(T object, Class<T> clazzType) throws IOException {

    final ObjectMapper objMapper = new ObjectMapper();
    String jsonStr= objMapper.writeValueAsString(object);

    return objMapper.readValue(jsonStr, clazzType);

  } 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2014-10-17T02:08:59.940

我使用[Dozer](https://github.com/DozerMapper/dozer)来克隆 java 对象，它很棒，[Kryo](https://github.com/EsotericSoftware/kryo)库是另一个很好的选择。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-02-16T10:24:08.420

[BeanUtils](http://commons.apache.org/proper/commons-beanutils/)在深度克隆 bean 方面做得非常好。

```
BeanUtils.cloneBean(obj); 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-11-11T14:51:53.347

1)

```
public static Object deepClone(Object object) {
   try {
     ByteArrayOutputStream baos = new ByteArrayOutputStream();
     ObjectOutputStream oos = new ObjectOutputStream(baos);
     oos.writeObject(object);
     ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
     ObjectInputStream ois = new ObjectInputStream(bais);
     return ois.readObject();
   }
   catch (Exception e) {
     e.printStackTrace();
     return null;
   }
 }

2)

    // (1) create a MyPerson object named Al
    MyAddress address = new MyAddress("Vishrantwadi ", "Pune", "India");
    MyPerson al = new MyPerson("Al", "Arun", address);

    // (2) make a deep clone of Al
    MyPerson neighbor = (MyPerson)deepClone(al); 
```

在这里，您的 MyPerson 和 MyAddress 类必须实现可序列化接口

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-01-05T18:58:52.357

这是一个通用的深度克隆方法，它使用字节数组流的对象序列化和反序列化（以避免写入文件）。

```
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;

@SuppressWarnings("unchecked")
public static <T extends Serializable> T deepClone(T t) {
    try (ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(baos);) {
        oos.writeObject(t);
        byte[] bytes = baos.toByteArray();
        try (ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bytes))) {
            return (T) ois.readObject();
        }
    } catch (IOException | ClassNotFoundException e) {
        throw new RuntimeException(e);
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-28T20:00:53.747

这是一个关于如何深度克隆任何对象的简单示例：先实现可序列化

```
public class CSVTable implements Serializable{
    Table<Integer, Integer, String> table; 
    public CSVTable() {
        this.table = HashBasedTable.create();
    }

    public CSVTable deepClone() {
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ObjectOutputStream oos = new ObjectOutputStream(baos);
            oos.writeObject(this);

            ByteArrayInputStream bais = new ByteArrayInputStream(baos.toByteArray());
            ObjectInputStream ois = new ObjectInputStream(bais);
            return (CSVTable) ois.readObject();
        } catch (IOException e) {
            return null;
        } catch (ClassNotFoundException e) {
            return null;
        }
    }

} 
```

进而

```
CSVTable table = new CSVTable();
CSVTable tempTable = table.deepClone(); 
```

是你如何获得克隆。

# java - 设置 java 语言环境设置

> ID：64038
> 
> 赞同：36
> 
> 时间：2008-09-15T15:39:06.480
> 
> 标签：java, locale

当我在我的 linux 机器上使用默认的 java 语言环境时，它会出现美国语言环境设置，我在哪里可以更改它以使其具有正确的语言环境？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2008-09-15T15:45:49.680

具有`user.language`,`user.country`和`user.variant`属性。

例子：

`java -Duser.language=th -Duser.country=TH -Duser.variant=TH SomeClass`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-03-27T17:48:23.527

我必须在使用法语语言环境的机器上运行的脚本中控制它，但特定的 Java 程序必须使用 en_US 运行。正如已经指出的，以下工作：

```
java -Duser.language=en -Duser.country=US ... 
```

或者，

```
LC_ALL=en_US.UTF-8 java ... 
```

我更喜欢后者。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-09-15T15:42:17.753

我相信 java 从它启动的环境变量中收集到这一点，所以你需要确保你的 LANG 和 LC_* 环境变量设置得当。

语言环境[手册页](http://linux.die.net/man/1/locale)包含有关所述环境变量的完整信息。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-15T15:41:34.913

您可以在 init 期间调用或在命令行中调用任何[Locale.setDefault()](http://java.sun.com/javase/6/docs/api/java/util/Locale.html#setDefault(java.util.Locale))或 -Duser.language=、-Duser.country= 和 -Duser.variant=。[这是 Sun 网站上的内容](http://www.oracle.com/technetwork/articles/javase/locale-140624.html#using)。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-07-28T01:44:17.327

对于像`jarsigner`在 Java 中实现的工具。

```
JAVA_TOOL_OPTIONS=-Duser.language=en jarsigner 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-03-08T17:05:46.663

如果你想检查 java 使用的是什么语言环境或字符集，这是 JVM 内置的：

```
java -XshowSettings -version 
```

它会转储它正在使用的大量设置。通过这种方式，您可以检查您的`LANG`价值观`LC_*`是否被正确拾取。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-18T05:00:45.677

您可以在控制台上更改：

```
$ export LANG=en_US.utf8 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2010-05-29T22:42:25.850

如果您在 Mac 上，只需使用系统偏好设置 -> 语言并将要测试的语言拖到顶部（在英语之前）将确保下次打开应用程序时，尝试正确的语言环境！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-15T13:53:04.237

在linux上，`/etc/default/locale`使用以下内容创建文件

```
LANG=en.utf8 
```

然后使用`source`命令通过运行导出此变量

```
source /etc/default/locale 
```

source 命令永久设置变量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T15:42:48.047

控制区域设置的一种方法是设置 java 系统属性 user.language 和 user.region。

# c# - WinForms DataGridView 字体大小

> ID：64041
> 
> 赞同：47
> 
> 时间：2008-09-15T15:39:46.027
> 
> 标签：c#, winforms, datagridview

如何更改 DataGridView 上的字体大小？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2011-04-30T18:19:10.853

在winform datagrid中，右键查看其属性。它有一个名为 DefaultCellStyle 的属性。单击 DefaultCellStyle 上的省略号，然后将显示 Cell Style Builder 窗口，该窗口具有更改字体大小的选项。

这简单。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2008-09-15T15:55:33.820

```
 private void UpdateFont()
    {
        //Change cell font
        foreach(DataGridViewColumn c in dgAssets.Columns)
        {
            c.DefaultCellStyle.Font = new Font("Arial", 8.5F, GraphicsUnit.Pixel);
        }
    } 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-11-29T17:51:46.213

直截了当的方法：

```
this.dataGridView1.DefaultCellStyle.Font = new Font("Tahoma", 15); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-21T03:41:50.077

要更改特定的单列字体大小，请使用以下语句

`DataGridView.Columns[1].DefaultCellStyle.Font = new Font("Verdana", 16, FontStyle.Bold);`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-21T19:11:48.033

我认为这是最简单的：

首先根据需要设置任何标签（斜体、粗体、大小等）并且：

```
yourDataGridView.Font = anyLabel.Font; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-28T12:20:43.833

我在 DataGridView 中也遇到了同样的问题，但发现 DefaultCell 样式继承了 groupbox 的字体（Datagrid 放在 groupbox 中）。因此更改组框的字体也更改了 DefaultCellStyle。

问候

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-07-26T10:20:55.900

**第一步：** 转到添加datagridview的表单

**第二步：** 点击右上角的datagridview，会显示一个类似播放图标或箭头的小按钮来编辑datagridview。

**第三步：** 单击该按钮并选择编辑列现在单击要增加字体大小的属性。

**第四步：** 在属性菜单右侧的第一个名为defaultcellstyle的列表列上点击它的属性会打开一个新窗口来更改字体和字体大小。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T15:41:22.683

在 gridview 上使用字体属性。有关详细信息和示例，请参阅 MSDN：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.font.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.font.aspx)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-01-09T05:40:19.763

转到具有网格视图的表单的 Designer.cs 文件并注释以下行： - //this.dataGridView1.AlternatingRowsDefaultCellStyle = dataGridViewCellStyle1;

如果您使用的是 vs 2008 或 .net framework 3.5，因为默认情况下它将应用于交替行。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-13T18:34:17.900

```
'   Cell style
 With .DefaultCellStyle
     .BackColor = Color.Black
     .ForeColor = Color.White 
     .Font = New System.Drawing.Font("Microsoft Sans Serif", 11.0!,
   System.Drawing.FontStyle.Regular,
   System.Drawing.GraphicsUnit.Point, CType(0, Byte))
      .Alignment = DataGridViewContentAlignment.MiddleRight
 End With 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-23T13:16:51.213

在 DataGridView 中，右键单击属性，在 RowTemplate > DefaultCellStyle 中更改字体大小，它对我有用

# c# - 某些页面发布网站失败

> ID：64046
> 
> 赞同：0
> 
> 时间：2008-09-15T15:40:38.083
> 
> 标签：c#, .net, asp.net, .net-2.0

当我发布我的网站时，我遇到了一个奇怪的问题。我继承了这个项目，问题在我到达之前就开始了，所以我不知道是什么条件导致了问题的产生。

基本上，网站项目下面的 3 个文件夹无法正确发布。当 PrecompiledWeb 传输到主机时，这三个文件夹必须手动从 Visual Studio 项目（即它们不再是发布的版本）复制到主机才能工作。

如果留下发布操作的结果，文件夹中的任何页面都会导致以下错误：

> “/”应用程序中的服务器错误。无法将“System.Web.Compilation.BuildResultNoCompilePage”类型的对象转换为“System.Web.Compilation.BuildResultCompiledType”类型。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidCastException：无法将“System.Web.Compilation.BuildResultNoCompilePage”类型的对象转换为“System.Web.Compilation.BuildResultCompiledType”类型。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [InvalidCastException：无法将“System.Web.Compilation.BuildResultNoCompilePage”类型的对象转换为“System.Web.Compilation.BuildResultCompiledType”类型。] System.Web.UI.PageParser.GetCompiledPageInstance（VirtualPath virtualPath，String inputFile，HttpContext context） +254
> System.Web.UI.PageParser.GetCompiledPageInstance(String virtualPath, String inputFile, HttpContext context) +171
> URLRewrite.URLRewriter.ProcessRequest(HttpContext context) +2183
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute( ) +405 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +65
> 
> 版本信息：Microsoft .NET Framework 版本：2.0.50727.832；ASP.NET 版本：2.0.50727.832

有谁知道这些页面未正确发布的可能原因是什么？我能看到的任何东西都可能表明问题的根源？

**另外：** 每次都是完全干净的构建，所以旧的 bin 文件应该没有问题。我还检查了 bin 文件夹中项目的日期戳，它们是最新的。

**第二个补充：** 该项目最初是作为一个*网站*创建的，而不是一个 Web 应用程序。很抱歉模棱两可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T15:47:02.857

我会尝试清理 bin\ 文件夹。无论如何，我们的商店完全放弃了网站，转而使用 Web 表单应用程序，这可以说要好得多。

编辑：[迁移如何在这里](http://webproject.scottgu.com/CSharp/Migration2/Migration2.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T16:12:49.690

您可能会考虑尝试 Microsoft 的[Web 部署项目](http://msdn.microsoft.com/en-us/asp.net/aa336619.aspx)。本质上，它们让您对 MSBuild 有更多的控制权，但它可能有助于解决您的部署/预编译问题。

我们是否推断您使用的是网站项目类型（而*不是*Web 应用程序）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T15:42:25.013

我猜是因为当您发布时，它正在编译您的网站项目，并且它在不同文件夹或子文件夹的某处遇到了重复的类名。确保检查您的继承标签和类名，以免将 2 个类称为同一事物。这很好，并且在编码和调试时发生在不同的文件夹中时不会出错，但是当你去发布/部署时它会出错。...希望这是有道理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-14T01:30:13.893

不久前我遇到了类似的问题，发布会说它成功，但发布文件夹仍然是空的。

除了查看[Web 部署项目](http://msdn.microsoft.com/en-us/asp.net/aa336619.aspx)之外，您还应该将详细程度设置为诊断（工具=> 选项=> 项目和解决方案 => 构建和运行=> Msbuild 项目构建输出详细程度）

在我的情况下，这会显示有意义的编译器错误，帮助我解决问题。

`aspnet_compiler`然后，您还可以在 shell 提示符下运行`-errorstack`指令以显示其他错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-16T12:20:26.883

最好的答案请打开您的 web.config 文件并在编译标签中添加以下两个设置

```
<compilation targetFramework="4.0" debug="false" batch="false"> 
```

保持coidng，当我在我试图在服务器中托管的应用程序中遇到相同的错误时，我也尝试了以下操作

1\. 单击开始，单击运行，键入 iisreset /stop，然后单击确定。

2.打开 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 目录。

3.删除您在步骤中找到的目录中的所有文件和所有文件夹

4\. 单击开始，单击运行，键入 iisreset /start，然后单击确定。

5.再次构建，然后尝试访问您的站点。

# vb.net - 将 VB.Net 2008 应用程序反向移植到目标 .Net 1.1

> ID：64051
> 
> 赞同：1
> 
> 时间：2008-09-15T15:41:22.090
> 
> 标签：vb.net, .net-1.1, downgrade

我有一个使用 VB.Net 2008 编写的针对 Framework 2.0 及更高版本的小型诊断 VB.Net 应用程序（2 个表单，20 个子程序和函数），但现在我意识到我需要支持 Framework 1.1。考虑到这些限制，我正在寻找实现这一目标的最有效方法：

*   我不知道应用程序的哪些部分是特定于 2.0 的。
*   我可以毫不费力地重建表格。
*   我需要支持 SharpZipLib

我目前的想法是找到并安装 VB.Net 2003，复制我的代码并迭代地重新创建该工具。有更好的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T15:49:39.140

您的应用程序听起来足够小，我会在一个单独的文件夹中为 1.1 框架创建一个新的项目/解决方案，复制必要的文件，使用“添加现有项目”选项，然后构建。所有的问题都会以这种方式浮出水面。

一种相当“丑陋”的方法，但它会向您展示您需要预先修复的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T15:46:17.570

可能不是。如果您不了解哪些位是特定于 2.0 的，您可能不得不走试错路线。但是，如果您事先寻找泛型，您可能可以节省大量工作。根据我的经验，这些是最多的 1.1 不兼容位，它们往往会进入我的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-07-25T04:07:50.310

如果您可以掌握 VS 2010，您可以（最终）定位多个框架。因此，在一个项目中，您应该能够将您的 2.0 项目编译为 1.1 并查看哪些问题。

# asp.net - 一旦一个人注销但点击“返回”按钮，有没有办法阻止页面呈现？

> ID：64059
> 
> 赞同：23
> 
> 时间：2008-09-15T15:41:42.620
> 
> 标签：asp.net, security, browser, caching, back-button

我有一些需要登录并显示敏感信息的网站。

该人进入该页面，被提示登录，然后查看信息。

该人退出站点，并被重定向回登录页面。

然后该人可以点击“返回”并直接返回包含敏感信息的页面。由于浏览器只是将其视为呈现的 HTML，因此向他们显示它没有问题。

当该人从注销屏幕点击“返回”按钮时，是否有办法防止显示该信息？我并不想禁用后退按钮本身，我只是想防止敏感信息再次显示，因为此人不再登录该网站。

为了争论，上面的站点/场景是在带有表单身份验证的 ASP.NET 中（所以当用户转到他们想要的页面的第一页时，他们会被重定向到登录页面 - 以防万一有区别）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-17T22:48:08.180

简短的回答是它不能安全地完成。

但是，可以实施许多技巧，使用户难以回击并显示敏感数据。

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetExpires(Now.AddSeconds(-1));
Response.Cache.SetNoStore();
Response.AppendHeader("Pragma", "no-cache"); 
```

这将禁用客户端的缓存，但**并非所有浏览器都支持**。

如果您可以选择使用 AJAX，则可以使用从客户端代码更新的更新面板检索敏感数据，因此除非客户端仍然登录，否则在回击时不会显示敏感数据。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-19T22:57:25.233

[缓存和历史是独立的](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html#sec13.13)，不应相互影响。

[银行](http://my.opera.com/yngve/blog/2007/02/27/introducing-cache-contexts-or-why-the)的唯一例外是 HTTPS 和`Cache-Control: must-revalidate`历史导航时强制刷新的组合。

在纯 HTTP 中，除了利用浏览器错误之外，没有其他方法可以做到这一点。

您可以使用 Javascript 在设置“杀手”cookie 时检查`document.cookie`和重定向来破解它，但我想当浏览器没有完全按预期设置/清除 cookie 时，这可能会出现严重错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T15:44:06.470

来自[aspdev.org](http://www.aspdev.org/asp.net/asp.net-disable-caching/)：

在 Page_Load 事件处理程序顶部添加以下行，您的 ASP.NET 页面将不会缓存在用户浏览器中：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache) 
```

设置此属性可确保如果用户点击后退按钮，内容将消失，如果他按下“刷新”，他将被重定向到登录页面。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T16:10:46.140

DannySmurf，<meta> 元素在控制缓存方面极其不可靠，尤其是 Pragma 更是如此。 [参考](http://www.mnot.net/cache_docs/#META)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T16:14:19.423

dannyp 和其他人，no-cache 不会阻止缓存存储敏感资源。它仅仅意味着缓存不能在不首先重新验证它的情况下为它存储的资源提供服务。如果您希望防止敏感资源被缓存，则需要使用 no-store 指令。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-20T15:53:22.983

您可以使用 javascript 函数进行快速服务器检查 (ajax)，如果用户未登录，则删除当前页面并用消息替换它。这显然很容易受到关闭 javascript 的用户的攻击，但这种情况非常罕见。从好的方面来说，这与浏览器和服务器技术（asp/php 等）无关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T15:44:29.917

您正在寻找一个无缓存指令：

```
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

如果您正在进行母版页设计，这可能有点麻烦，但我相信您可以将此指令放在单个页面上，而不会影响您网站的其余部分（假设这是您想要的）。

如果您设置了此指令，浏览器将尽职尽责地返回服务器寻找页面的全新副本，这将导致您的服务器看到用户未通过身份验证并将他撞到登录页面。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T15:44:57.467

让注销操作成为`POST`. 然后浏览器会提示“您确定要重新发布表单吗？” 而不是显示页面。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T15:45:26.420

我不知道如何在 ASP.NET 中执行此操作，但在 PHP 中我会执行以下操作：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Cache-Control: no-cache");
header("Pragma: no-cache"); 
```

这会迫使浏览器重新检查该项目，因此应该触发您的身份验证检查，拒绝用户访问。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T15:45:31.363

正确答案涉及在响应中设置 HTTP Cache-Control 标头。如果你想确保他们**永远不会**缓存输出，你可以做 Cache-Control: no-cache。这也经常与 no-store 配合使用。

如果您想要有限的缓存，其他选项包括设置过期时间和必须重新验证，但这些都可能导致缓存页面再次显示。

见[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9.4)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T15:55:56.720

这有点紧张，但如果你有一个嵌入的 Java 小程序或 Flash 应用程序，并且通过它完成了身份验证，你就可以做到这一点，这样他们就必须每次都在服务器上“实时”地进行身份验证他们想查看信息。

使用它，您还可以加密任何信息。

总是有可能有人可以只保存带有敏感信息的页面，没有缓存不会解决这种情况（但是总是可以截取 Flash 或 java 应用程序的屏幕截图）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T15:59:16.307

为了完整性：

```
Response.Cache.SetCacheability(HttpCacheability.NoCache);
Response.Cache.SetNoStore();
Response.Cache.SetExpires(DateTime.Now.AddMinutes(-1)); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T18:13:40.743

好吧，在一家以拥有世界上最安全、最高效的家庭银行软件之一而闻名的巴西大型银行公司 (Banco do Brasil) 中，他们只需将 history.go(1) 放在每一页中。所以，如果你点击后退按钮，您将返回。简单的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-20T06:00:40.347

请查看 HTTP 响应标头。人们发布的大多数 ASP 代码看起来都在设置这些。确定。

O'Reilly的[花栗鼠书](http://oreilly.com/catalog/9781565925090/)是 HTTP 的圣经，[Chris Shiflett 的 HTTP 书](http://www.informit.com/store/product.aspx?isbn=0672324547)也很好。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-01-06T16:17:25.257

您可以将敏感的网页作为 HTTP POST 返回，然后在大多数情况下，浏览器会向您发送消息，询问您是否要重新提交数据。（不幸的是，我找不到这种行为的规范来源。）

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-20T09:48:58.537

我只是想到了银行业的例子。

我的银行页面里面有这个：

```
<meta http-equiv="expires" content="0" /> 
```

我想这应该是关于这个的。

# java - 最好的 Java 提要阅读器库是什么？

> ID：64061
> 
> 赞同：12
> 
> 时间：2008-09-15T15:41:56.520
> 
> 标签：java, rss, feed

您认为哪个 Java 库最适合使用和解析提要？要求：

*   可嵌入
*   支持 Atom 和 RSS
*   具有缓存架构
*   应该能够以相同的方式处理任何提要格式

（请：每个答案提出*一个建议。）*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T15:45:37.260

[ROME](https://rome.dev.java.net/)会吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-12-05T06:21:19.903

我们也使用 ROME。虽然基于 SAX/事件的[FeedParser](http://commons.apache.org/dormant/feedparser/)架构很有趣，但它是`dormant`Apache 的一个项目。Apache 的“休眠”似乎意味着没有二进制下载链接和没有积极的开发。

# c# - .Net/C# 中的 Autoproxy 配置脚本解析

> ID：64092
> 
> 赞同：1
> 
> 时间：2008-09-15T15:45:30.380
> 
> 标签：c#, jscript.net, autoproxy

为了让我的应用程序（.Net 1.1）使用系统配置的代理服务器（通过 proxy.pac 脚本），我使用了对 WinHTTP 函数 WinHttpGetProxyForUrl 的互操作调用，传递了我从注册表中获得的 proxy.pac url。

不幸的是，我遇到了一个部署场景，这不起作用，因为 proxy.pac 文件本地部署在用户的硬盘上，并且 url 是“file://C://xxxx”

正如 WinHttpGetProxyForUrl 文档中明确指出的那样，它仅适用于 http 和 https 方案，因此文件：//失败

我正在考虑解决这个问题的 2 个“丑陋”解决方案（pac 文件是 javascript）：

1.  创建一个单独的 JScript.NET 项目，具有单个静态方法 Eval(string) 的单个类，并使用它在运行时评估从 pac 文件中读取的函数

2.  在运行时构建 JScript.NET 程序集并加载它。

由于这些解决方案真的很丑:)，有人知道更好的方法吗？是否有可以通过互操作使用的 Windows 功能？

如果没有，你们对上述两种解决方案有什么看法——你更喜欢哪一种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-25T16:08:13.670

只是一个想法：为什么不创建一个可以通过 localhost 套接字提供本地 PAC 文件的微型 Web 服务器。您应该对内容使用随机 URI，这样就很难以意想不到的方式浏览它。

然后，您可以将类似[http://localhost:1234/gfdjklskjgfsdjgklsdfklgfsjkl](http://localhost:1234/gfdjklskjgfsdjgklsdfklgfsjkl)的 URL 传递给 WinHttpGetProxyForUrl 函数，并允许它从您的微服务器中提取 PAC 文件。

（骇客...骇客...骇客...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-10-07T03:31:20.380

FWIW：[https](https://web.archive.org/web/20150405115150/http://msdn.microsoft.com/en-us/magazine/cc300743.aspx) ://web.archive.org/web/20150405115150/http://msdn.microsoft.com/en-us/magazine/cc300743.aspx描述了如何使用 JScript.NET 引擎安全地执行此操作。

[https://web.archive.org/web/20090220132508/http://msdn.microsoft.com/en-us/library/aa383910(VS.85).aspx](https://web.archive.org/web/20090220132508/http://msdn.microsoft.com/en-us/library/aa383910(VS.85).aspx)解释了如何使用 WinINET 的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T15:51:28.387

不幸的是，无法回答您的问题（尽管几年前我玩过 jscript.net，并且以这种方式构建和运行只需几行代码）

不久前，我在一个个人的 work-around-the-office-proxy 文件中遇到了类似的 proxy.pac 打嗝 - 最后我选择了最简单的选项并将其放入自己的 IIS 站点，它坚如磐石并且可以正常工作我的电脑上的一切都完美无缺。

有时最好放弃并使用所提供的东西:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-22T21:23:42.007

我不能直接回答你的问题，但是从 mozilla 实现开始，关于支持文件 URL 的争论是明确的。这是一场网络控制与本地用户便利的辩论。

# sql-server - 删除大表中所有数据的最快方法

> ID：64117
> 
> 赞同：57
> 
> 时间：2008-09-15T15:48:33.620
> 
> 标签：sql-server, tsql

我不得不从包含大约 500 万行的日志表中删除所有行。我最初的尝试是在查询分析器中发出以下命令：

从 client_log 中删除

这花了很长时间。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2008-09-15T15:49:16.020

查看快得多的[截断表。](https://msdn.microsoft.com/en-us/library/ms177570.aspx)

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2008-09-15T15:50:33.177

我在 msdn transact-SQL 参考中发现了**TRUNCATE TABLE 。**对于所有感兴趣的人，这里是备注：

TRUNCATE TABLE 在功能上与没有 WHERE 子句的 DELETE 语句相同：两者都删除表中的所有行。但是 TRUNCATE TABLE 比 DELETE 更快，并且使用更少的系统和事务日志资源。

DELETE 语句一次删除一个行，并在事务日志中为每个删除的行记录一个条目。TRUNCATE TABLE 通过解除分配用于存储表数据的数据页来移除数据，并且只有页解除分配记录在事务日志中。

TRUNCATE TABLE 从表中删除所有行，但表结构及其列、约束、索引等保留。新行标识使用的计数器被重置为列的种子。如果要保留标识计数器，请改用 DELETE。如果要删除表定义及其数据，请使用 DROP TABLE 语句。

您不能在由 FOREIGN KEY 约束引用的表上使用 TRUNCATE TABLE；相反，使用没有 WHERE 子句的 DELETE 语句。因为没有记录 TRUNCATE TABLE，所以它不能激活触发器。

TRUNCATE TABLE 不能用于参与索引视图的表。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-15T18:02:35.153

有一个常见的神话，即 TRUNCATE 以某种方式跳过事务日志。

这是一种误解，在 MSDN 中有明确提及。

这个神话在这里的几个评论中被引用。让我们一起根除它；）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-15T15:53:36.680

供参考[TRUNCATE TABLE](https://dev.mysql.com/doc/refman/8.0/en/truncate-table.html)也适用于 MySQL

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-15T19:00:14.297

我使用以下方法将表格归零，另外还有一个好处是它给我留下了表格的存档副本。

```
CREATE TABLE `new_table` LIKE `table`;
RENAME TABLE `table` TO `old_table`, `new_table` TO `table`; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-15T18:57:04.633

忘记截断和删除。维护您的表定义（以防您想重新创建它）并使用 drop table。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T15:50:02.633

*截断表 client_log*

是您最好的选择，截断会杀死表和索引中的所有内容并重置您拥有的任何种子。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T15:50:21.133

在 SQL Server 上，您可以使用`Truncate Table`比常规删除更快且使用更少资源的命令。它还将任何身份字段重置回种子值。

truncate 的缺点是它不能用于由外键引用的表，并且不会触发任何触发器。此外，如果出现任何问题，您将无法回滚数据。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-15T15:53:52.903

`truncate table`不是独立于 SQL 平台的**。**如果您怀疑您**可能会**更改数据库提供程序，那么您可能会谨慎使用它。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-15T16:28:24.180

请注意，TRUNCATE 还将重置任何自动递增键，如果您正在使用这些键。

如果您不希望丢失您的自动递增键，您可以通过删除集合来加快删除速度（例如，DELETE FROM table WHERE id > 1 AND id < 10000）。它将显着加快速度，并在某些情况下防止数据被锁定。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T15:49:29.170

是的，好吧，删除 500 万行可能需要很长时间。我能想到的唯一可能更快的方法是删除表并重新创建它。当然，这只有在您想删除表中的所有数据时才有效。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T16:06:16.603

“删除并重新创建表”的建议可能不是一个好建议，因为这会弄乱你的外键。

您正在使用外键，对吗？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T17:26:50.777

我正在修改我之前的声明：

> 您应该了解，使用 TRUNCATE 将清除数据，但不会将任何内容记录到事务日志中。写入日志是 DELETE 将永远占用 500 万行的原因。我在开发过程中经常使用 TRUNCATE，但你应该小心在生产数据库上使用它，因为你将无法回滚你的更改。您应该在执行 TRUNCATE 后立即进行完整的数据库备份，以建立新的恢复基础。

上述声明旨在提示您确保您了解两者之间的差异。不幸的是，它写得不好并且发表了不受支持的陈述，因为我实际上并没有在两者之间进行任何测试。它基于我从其他人那里听到的陈述。

来自[MSDN](http://msdn.microsoft.com/en-us/library/aa260621.aspx)：

> DELETE 语句一次删除一个行，并在事务日志中为每个删除的行记录一个条目。TRUNCATE TABLE 通过解除分配用于存储表数据的数据页来移除数据，并且只有页解除分配记录在事务日志中。

我只想说两者之间存在根本区别，因为存在区别，所以会有一些应用程序可能不合适。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T18:04:45.477

如果由于外键和/或触发器而无法使用 TRUNCATE TABLE，您可以考虑：

*   删除所有索引；
*   做通常的删除；
*   重新创建所有索引。

这可能会加快 DELETE 速度。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2008-09-20T18:49:54.350

```
DELETE * FROM table_name; 
```

过早的优化可能是危险的。优化可能意味着做一些奇怪的事情，但如果它有效，你可能想利用它。

```
SELECT DbVendor_SuperFastDeleteAllFunction(tablename, BOZO_BIT) FROM dummy; 
```

对于速度，我认为这取决于...

*   底层数据库：Oracle, Microsoft, MySQL, PostgreSQL, others, custom...

*   表格、内容和相关表格：

可能有删除规则。是否有删除表中所有内容的现有程序？这可以针对特定的底层数据库引擎进行优化吗？我们有多在乎破坏事物/相关数据？假设其他相关表不依赖于该表，执行 DELETE 可能是“最安全”的方式。是否有其他表和查询相关/依赖于该表中的数据？如果我们不太关心这个表是否存在，使用 DROP 可能是一种快速的方法，同样取决于底层数据库。

```
DROP TABLE table_name; 
```

有多少行被删除？是否有其他可以快速收集的信息来优化删除？例如，我们能否判断该表是否已经为空？我们能分辨出是否有数百、数千、数百万、数十亿行吗？

# c# - 枚举类型的 UserControl 属性在设计器中显示为 bool 或根本不显示

> ID：64139
> 
> 赞同：1
> 
> 时间：2008-09-15T15:50:45.923
> 
> 标签：c#, visual-studio, enums, user-controls

我有一个具有多个公共属性的用户控件。这些属性会自动显示在 VS2005 设计器的“Misc”类别下的属性窗口中。除了两个作为枚举的属性没有正确显示。

第一个使用以下枚举：

```
public enum VerticalControlAlign
{
    Center,
    Top,
    Bottom
} 
```

这根本不会出现在设计器*中。*

第二个使用这个枚举：

```
public enum AutoSizeMode
{
    None,
    KeepInControl
} 
```

这个出现了，但设计师似乎认为它是一个布尔值，只显​​示 True 和 False。当您使用控件构建项目时，它会说它无法将类型 bool 转换为 AutoSizeMode。

此外，这些枚举被声明为全局命名空间，因此它们在任何地方都可以访问。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:14:42.340

我对您的问题进行了一些测试（我不确定我是否理解正确），这些属性正确显示在设计器中，并且所有枚举都正确显示。如果这不是您要查找的内容，请进一步解释自己。

不要挂在里面的 _Ugly 部分。我只是用它来进行快速测试。

```
using System.ComponentModel;
using System.Windows.Forms;

namespace SampleApplication
{
    public partial class CustomUserControl : UserControl
    {
        public CustomUserControl()
        {
            InitializeComponent();
        }

        /// <summary>
        /// We're hiding AutoSizeMode in UserControl here.
        /// </summary>
        public new enum AutoSizeMode { None, KeepInControl }
        public enum VerticalControlAlign { Center, Top, Bottom }

        /// <summary>
        /// Note that you cannot have a property  
        /// called VerticalControlAlign if it is   
        /// already defined in the scope.
        /// </summary>
        [DisplayName("VerticalControlAlign")]
        [Category("stackoverflow.com")]
        [Description("Sets the vertical control align")]
        public VerticalControlAlign VerticalControlAlign_Ugly
        {
            get { return m_align; }
            set { m_align = value; }
        }
        private VerticalControlAlign m_align;        

        /// <summary>
        /// Note that you cannot have a property  
        /// called AutoSizeMode if it is   
        /// already defined in the scope.
        /// </summary>
        [DisplayName("AutoSizeMode")]
        [Category("stackoverflow.com")]
        [Description("Sets the auto size mode")]
        public AutoSizeMode AutoSizeMode_Ugly
        {
            get { return m_autoSize; }
            set { m_autoSize = value; }
        }
        private AutoSizeMode m_autoSize;    
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T15:56:04.990

对于初学者，第二个枚举 AutoSizeMode 在 System.Windows.Forms 中声明。所以这可能会给设计师带来一些问题。

其次，您可能会发现 MSDN 上的以下页面很有用：

[http://msdn.microsoft.com/en-us/library/tk67c2t8.aspx](http://msdn.microsoft.com/en-us/library/tk67c2t8.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T15:58:08.137

可以尝试的一些事情（我发现 VS2005 中的设计器模式有点不稳定）：

1.  打开您的 web.config 并将：添加`batch="false"`到您的`<compilation>`标签。
2.  尝试为您的枚举设置默认值：

    ```
    public enum VerticalControlAlign
    {
        Center = 0,
        Top = 1,
        Bottom = 2
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:01:03.713

您不需要使您的枚举全局化，以便它们在设计器中可见。

请澄清：

1.  如果您向 AutoSizeMode 枚举添加另一个值，它是否仍显示为布尔值？
2.  如果（相反）您更改枚举的名称，它是否仍显示为布尔值？

# python - Python 中的类

> ID：64141
> 
> 赞同：1
> 
> 时间：2008-09-15T15:51:02.833
> 
> 标签：python, class

在 Python 中有什么方法可以创建一个类，然后使用相同的 dat,a 创建该类的第二个版本，但可以更改，然后恢复为与原始类中的数据相同？

所以我会用数字 1 到 5 作为其中的数据创建一个类，然后为部分（或非常相似）创建一个具有相同名称的第二个类。弄乱第二堂课中的数字，然后使用一个函数将它们重置为与第一堂课相同。

我发现的唯一替代方法是制作一个冗长的类，其中包含太多单独的数据，无法随时使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T15:54:52.107

一个类是一个模板，它允许你创建一个蓝图，然后你可以拥有一个类的多个实例，每个实例都有不同的编号，就像这样。

```
class dog(object):
    def __init__(self, height, width, lenght):
        self.height = height
        self.width = width
        self.length = length

    def revert(self):
        self.height = 1
        self.width = 2
        self.length = 3

dog1 = dog(5, 6, 7)
dog2 = dog(2, 3, 4)

dog1.revert() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-17T13:09:44.030

这是另一个类似于 pobk 的答案；它使用实例的 dict 来完成保存/重置变量的工作，但不需要您在代码中指定它们的名称。您可以随时调用 save() 来保存实例的状态并调用 reset() 来重置到该状态。

```
class MyReset:
    def __init__(self, x, y):
        self.x = x
        self.y = y
        self.save()

    def save(self):
        self.saved = self.__dict__.copy()

    def reset(self):
        self.__dict__ = self.saved.copy()

a = MyReset(20, 30)
a.x = 50
print a.x
a.reset()
print a.x 
```

你为什么要这样做？这可能不是最好/唯一的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T15:59:11.270

类没有值。对象可以。您想要的基本上是一个可以将实例（对象）重置为一组默认值的类吗？

仅仅提供一个重置方法，将对象的属性重置为默认值怎么样？

我认为你应该简化你的问题，或者告诉我们你真正想做什么。这一点都不清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T16:00:31.327

我觉得你很困惑。您应该重新检查“类”和“实例”的含义。

我想你是在尝试先声明某个类的实例，然后再声明其他类的实例，使用第一个实例中的数据，然后想办法将第二个实例中的数据转换并在第一个例子...

我建议您使用运算符重载来分配数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T16:01:20.890

```
class ABC(self):
   numbers = [0,1,2,3]

class DEF(ABC):
   def __init__(self):
      self.new_numbers = super(ABC,self).numbers

   def setnums(self, numbers):
      self.new_numbers = numbers

   def getnums(self):
     return self.new_numbers

   def reset(self):
     __init__() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T16:24:30.273

仅供参考，这是一个替代实现......可能违反了大约 1500 万条 pythonic 规则，但我根据信息/观察发布它：

```
class Resettable(object):
    base_dict = {}
    def reset(self):
            self.__dict__ = self.__class__.base_dict

    def __init__(self):
            self.__dict__ = self.__class__.base_dict.copy()

class SomeClass(Resettable):
    base_dict = {
            'number_one': 1,
            'number_two': 2,
            'number_three': 3,
            'number_four': 4,
            'number_five': 5,
    }
    def __init__(self):
            Resettable.__init__(self)

p = SomeClass()
p.number_one = 100
print p.number_one
p.reset()
print p.number_one 
```

# applescript - 在 AppleScript 中格式化本地化字符串的最佳方法是什么？

> ID：64146
> 
> 赞同：2
> 
> 时间：2008-09-15T15:52:10.630
> 
> 标签：applescript

当一个脚本被保存为一个包时，它可以使用`localized string`命令来找到合适的字符串，例如在`Contents/Resources/English.lproj/Localizable.strings`. 如果这是一个格式字符串，那么填充占位符的最佳方法是什么？换句话说，AppleScript 相当于`+[NSString stringWithFormat:]`什么？

我的一个想法是使用`do shell script`with `printf(1)`。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-31T04:57:48.463

[从 OS X 10.10](https://developer.apple.com/library/content/releasenotes/AppleScript/RN-AppleScript/RN-10_10/RN-10_10.html)开始，任何 AppleScript 脚本都可以使用 Objective-C。有几种方法可以从 AppleScript 中调用 Objective-C 方法，如[本翻译指南](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/MacAutomationScriptingGuide/AppendixA-AppleScriptObjCQuickTranslationGuide.html)中所述。像我这样的 Objective-C 开发人员会倾向于这种语法，它将方法的参数插入到它们的值中：

```
use framework "Foundation"

tell the current application's NSWorkspace's sharedWorkspace to openFile:"/Users/me/Desktop/filter.png" withApplication:"Preview" 
```

结果：

```
true 
```

`+[NSString stringWithFormat:]`是一个棘手的案例。它接受一个可变参数列表作为它的第一个参数，所以你需要一些方法来强制格式字符串和它的参数进入同一个方法参数。以下结果会导致错误，因为 AppleScript 最终将单个 NSArray 传递到参数中，从概念上讲，该参数需要 NSStrings 的 C 数组：

```
use framework "Foundation"

the current application's NSString's stringWithFormat:{"%lu documents", 8} 
```

结果：

```
error "-[__NSArrayM length]: unrecognized selector sent to instance 0x7fd8d59f3bf0" number -10000 
```

相反，您必须使用看起来更像 AppleScript 处理程序调用而不是 Objective-C 消息的替代语法。您还需要将返回值（一个 NSString 对象）强制转换为`text`：

```
use framework "Foundation"

the current application's NSString's stringWithFormat_("%lu documents", 8) as text 
```

结果：

```
"2087 documents" 
```

The “with parameters” syntax that @nlanza mentions points to the fact that AppleScript is using something akin to [NSInvocation](https://developer.apple.com/reference/foundation/nsinvocation) under the hood. In Objective-C, NSInvocation allows you to send a message to an object, along with an array of parameter values, without necessarily matching each value to a particular parameter. (See [this article](http://theocacao.com/document.page/264) for some examples of using NSInvocation directly.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T20:58:52.517

尽管丑陋，但呼吁`printf(1)`是常见的解决方案。

一个更简洁但更复杂的解决方案是使用 AppleScript Studio，它允许您使用[此处](http://developer.apple.com/documentation/AppleScript/Conceptual/StudioBuildingApps/chapter04/chapter_4_section_2.html#//apple_ref/doc/uid/20001251-TPXREF175)`call method`记录的语法从 AppleScript 代码调用 Objective-C 对象/类。

有了这个，你就可以使用这样的东西：

```
call method "stringWithFormat:" of class "NSString" with parameters {formatString, arguments} 
```

当然，这样做的缺点是您需要编写一个 AppleScript Studio 应用程序，而不仅仅是编写一个简单的脚本。不过，总体而言，您确实可以通过 Studio 应用程序获得更多的灵活性，因此这并不是一条糟糕的路。

# java - 如何升级使用 ORM 工具构建的数据库模式？

> ID：64148
> 
> 赞同：7
> 
> 时间：2008-09-15T15:52:31.457
> 
> 标签：java, database, orm, migration

我正在寻找使用 ORM 工具（如 JPOX 或 Hibernate）升级数据库模式的通用解决方案。你如何在你的项目中做到这一点？

我想到的第一个解决方案是创建自己的数据库升级机制，使用 SQL 脚本完成所有工作。但在这种情况下，我必须记住每次更新对象映射时都要创建新脚本。而且我仍然必须处理低级 SQL 查询，而不仅仅是定义映射并允许 ORM 工具完成所有工作......

所以问题是如何正确地做到这一点。也许有些工具可以简化这个任务（例如，我听说 Rails 内置了这样的机制），如果是这样，请帮助我决定为我的下一个 Java 项目选择哪个 ORM 工具。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T16:53:08.423

[LiquiBase](http://www.liquibase.org)是一个有趣的开源库，用于处理数据库重构（升级）。我没有使用它，但肯定会在我需要升级数据库模式的下一个项目中尝试一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T16:13:22.047

我不明白为什么 ORM 生成的模式与其他数据库模式有任何不同——问题是一样的。假设你的 ORM 会输出一个生成脚本，你可以使用外部工具来做 diff

我没有尝试过，但谷歌返回[SQLCompare](http://www.red-gate.com/products/SQL_Compare/index.htm)作为一种选择——我相信还有其他选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-02T15:17:51.923

我们手动编写 SQL 更新脚本代码，我们拆除模式并重建它，应用更新脚本作为我们持续构建过程的一部分。如果任何休眠映射与架构不匹配，则构建将失败。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-20T21:37:04.297

您可以查看一些数据库架构升级工具的此[功能比较](http://flywaydb.org/#features)。

其中一些工具的 SOW 中的问题数量比较：

*   [mybatis](https://code.google.com/p/mybatis/wiki/Migration)（已标记 1049 个问题）
*   [Liquibase](http://www.liquibase.org/)（已标记 663 个问题）
*   [Flyway](http://flywaydb.org/)（标记了 400 个问题）
*   [DBDeploy](http://dbdeploy.com/)（标记了 24 个问题）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-02-27T09:22:55.877

[DbMaintain](http://www.dbmaintain.org)也可以在这里提供帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T15:54:46.443

我认为您最好的选择是使用包含数据库迁移的 ORM 工具，例如[SubSonic](http://subsonicproject.com/)：

[http://subsonicproject.com/2-1-pakala/subsonic-using-migrations/](http://subsonicproject.com/2-1-pakala/subsonic-using-migrations/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T15:55:26.643

每次更改数据库时，我们都会制作更新脚本。所以有一个从版本 10 到 11、从 11 到 12 等的脚本。然后我们可以运行任何连续的脚本集以从某个现有版本跳到新版本。我们将现有版本存储在数据库中，因此我们可以在启动时检测到这一点。

是的，这涉及特定于数据库的代码！Hibernate 的主要问题之一！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T16:02:27.203

使用 Hibernate 时，我使用从命令行运行的安装程序类，并具有用于创建数据库模式、插入基础数据和使用[SchemaUpdate](http://www.hibernate.org/hib_docs/v3/api/org/hibernate/tool/hbm2ddl/SchemaUpdate.html)动态更新数据库模式的选项。我觉得它非常有用。它还为我提供了一个放置一次性脚本的地方，这些脚本将在启动新版本时运行，例如，在现有数据库表中填充新字段。

# flash - Flash Player 9 本地共享对象是否有好的 .sol 编辑器？我们可以建一个吗？

> ID：64170
> 
> 赞同：6
> 
> 时间：2008-09-15T15:55:42.667
> 
> 标签：flash, actionscript

那里有很多人，但他们都没有做我想让他们做的事。

他们中的大多数在打开文件时崩溃或只是破坏数据。许多人根本不跑。在我看来，大多数是 3-4 年前为 AS2 .sols 编写的，不再适用于 FP9/AS3 sols。我会尝试使用 AIR 编写自己的代码，但找不到字节格式的新规范。

这里有文件格式的解释：http: [//sourceforge.net/docman/display_doc.php ?docid=27026&group_id=131628](http://sourceforge.net/docman/display_doc.php?docid=27026&group_id=131628)

另一个在这里： http: [//sourceforge.net/docman/display_doc.php ?docid=27026&group_id=131628](http://sourceforge.net/docman/display_doc.php?docid=27026&group_id=131628)

但看起来这两个文档都已经有 4 年的历史了（FP9 之前），而且由于我在文件格式方面不熟练或没有经验，编写一个新文档，尤其是没有更新规范，似乎越来越少的一个可行的选择。

理想情况下，我想要一个不仅可以读取.sol，还可以编辑和保存新值。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-02-21T18:14:20.273

使用[密涅瓦](http://blog.coursevector.com/minerva)。我已经尝试过了，它适用于我打开它的每个 .sol。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-16T01:39:08.613

Flash 最初将数据序列化为一种称为 AMF 的格式，并且在版本 9+ 中使用称为 AMF3 的更新版本。虽然 AMF 规范是开放的（AMF3 规范在[这里](http://download.macromedia.com/pub/labs/amf/amf3_spec_121207.pdf)），但我不认为 Adob​​e 本身已经开放了 SOL 文件的格式。（另外，我认为部分由 v9+ 播放器编写的 SOL 文件可能同时包含 AMF0 和 AMF3 数据。）

至于现有的应用程序/框架，看起来[PyAMF](http://pyamf.org/wiki/LocalSharedObject)是你最好的选择，因为它是我在快速浏览后发现的唯一一个声称可以同时了解 AMF0 和 AMF3 的应用程序/框架。不过我个人没有用过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-05-13T03:46:37.440

最新版本的 minerva 3.2.1 确实允许打开/读取和写入/保存 .sol 文件并与 AS3 一起使用。我知道提到的其他程序都不能用于保存 .sol 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-09T15:55:13.470

@另一个_城堡，

发帖人想要一个可以读写共享对象文件的编辑器。虽然我确实喜欢 minerva，但它在网站上明确指出存在保存 AMF3 格式文件的错误。我已经尝试了这里列出的每个程序都无济于事，似乎没有一个编辑器能够在一致编辑后保存 amf3 格式文件。如果有人有，请在此处发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T01:19:02.780

我很困惑，难道不是 Flash 9 共享对象的最佳编辑器吗…… Flash？它已经有加载、编辑和保存它们的方法。

* * *

因此，制作编辑器并将其放在您的网站上。您不会从闪存中获得任何安全错误，然后只需在其周围设置一个密码，这样普通人就无法编辑他们的 .sol 文件。

* * *

是的，它们受域限制，因此它必须存在于发布商网站上。如果您有数百个客户端，那可能是个问题，但如果您有 3 个或 4 个……这肯定比编写自己的文件格式解析器更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-17T02:22:27.647

你试过 Sephiroth 的 SOL 阅读器吗？

[http://www.sephiroth.it/python/solreader.php](http://www.sephiroth.it/python/solreader.php)

我没有使用过新版本（用 C# 编写，支持 AMF0 和 AMF3 ），但以前的版本很好。

PD：出于好奇，我刚刚下载了新版本并试了一下。它在我试图打开的每一个 SOL 上都崩溃了。太糟糕了，它曾经是一个非常好的编辑器......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-06-28T20:48:24.247

[http://www.sephiroth.it/python/solreader.php](http://www.sephiroth.it/python/solreader.php)

我目前使用这个程序。效果很好

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-04-10T11:40:07.273

你检查过 SolVE [http://solve.sourceforge.net/](http://solve.sourceforge.net/) ...它很好，它是免费的，它可以在 OSX 和 Windows 上运行，它是由一个踢屁股的 Flash 开发人员开发的

干杯，

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-09T17:56:12.333

我在基于 debian 的 linux 上，我可以在 WINE 中使用这个程序，而且效果很好

[http://sourceforge.net/projects/soleditor/](http://sourceforge.net/projects/soleditor/)

祝你好运

# firefox - 如何更改火狐图标？

> ID：64174
> 
> 赞同：9
> 
> 时间：2008-09-15T15:56:00.747
> 
> 标签：firefox, firefox-addon, icons

有什么方法可以更改 Firefox 系统图标（窗口左上方的那个）？

精度：我想用 apache/php 和我的应用程序更改捆绑版本的 Firefox 的图标。所以在每台电脑上手动操作不是解决办法。我尝试了 Resource Hacker，这是一个很好的解决方案。附加组件也不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T16:08:06.333

资源黑客负责在 Windows 中交换应用程序图标（直到 XP，尚未在 Vista 上测试）。

可在： [http ://www.angusj.com/resourcehacker/](http://www.angusj.com/resourcehacker/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-02-24T15:21:00.057

@phloopy 使用[http://iconpacks.mozdev.org/](http://iconpacks.mozdev.org/)的好建议不幸的是不适用于较新版本的 Firefox（我认为是 omni.jar 更改）。您仍然可以使用他们的 ICO 文件（或您自己的），但您现在需要执行以下手动步骤...

*   `omni.ja`在您的 Firefox 应用程序目录中解压缩。
*   删除`omni.ja`或重命名它（例如`omni.ja.off`）。
*   `icons/default`在 Firefox应用程序目录中创建`chrome`目录。
*   复制你想要的图标文件`chrome/icons/default/main-window.ico`
*   启动 Firefox 并享受您的新图标

笔记：

*   您可以将其他 ICO 文件名用于其他窗口。我个人看过的作品有：
    *   `main-window.ico`用于浏览器窗口和 Scratchpad
    *   `downloadManager.ico`下载
    *   如果您认识其他人，请发表评论，以便我添加。我个人很喜欢 Firebug 和错误控制台。用于图书馆（书签）的一个也很好（`bookmark-window.ico`不起作用）。
*   你的开始时间会慢一点（由于解压缩`omni.ja`）。从理论上讲，您可以再次将其振作起来，但我不能 100% 确定一旦`omni.ja`优化再次起作用（它在 Firefox 10 中“损坏”，因此`omni.ja`实际上是正常的 JAR/ZIP 文件）。
*   如果您让 Firefox 更新，您将需要再次执行此操作
*   请注意，许多 zip 工具无法读取 Firefox 的 JAR 格式变体（请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=605524](https://bugzilla.mozilla.org/show_bug.cgi?id=605524)）。

更多信息可在[http://iconpacks.mozdev.org/docs/faq.html](http://iconpacks.mozdev.org/docs/faq.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T16:19:31.313

[http://iconpacks.mozdev.org/](http://iconpacks.mozdev.org/)上有一些图标包，它们通过安装扩展来工作。如果您想使用自己的图标，扩展只是压缩文件，因此将扩展从 xpi 更改为 zip 并检查它包含的源代码和图像以对其进行自定义。如果您确实对其进行了自定义，我建议您更改 GUID，使其不会自动更新并覆盖您的自定义设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:03:49.993

我认为您的意思是系统图标，而不是其他人认为的站点图标。在 Mac 上，您可以按住 - 单击 -> 在 Firefox.app 上获取信息，然后将图像拖放或粘贴到图标顶部。

我不确定 Windows，但我认为您可能需要从源代码编译才能更改它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T16:04:04.253

如果您谈论的是应用程序图标（在 Windows 下通常位于应用程序窗口的左上角），那么...不...是的。

与大多数 Windows 应用程序一样，您在其中看到的图标可能是编译到应用程序本身中的资源，因此您无法更改它。

Firefox 可能有插件可以让你这样做，但我对此表示怀疑 - 该图标已注册商标并“识别”了 Firefox“品牌”（如果你愿意的话）。因此，您不太可能在运行时更改它。

Firefox 是开源的；你总是可以下载并编译你自己的版本，用你自己的替换图标资源。有点戏剧性，但可能。

# .net - 使用 Flex、.NET 和 DBMS 寻找更好的端到端通信

> ID：64177
> 
> 赞同：0
> 
> 时间：2008-09-15T15:56:44.770
> 
> 标签：.net, apache-flex, orm

我们正在审查我们在工作中的一些实践——我们现在正在研究的具体事情是使用基于 Flex 的客户端和 .NET Web 服务进行 Comms 的最佳方法。

我们的典型方法是首先根据需求对交互进行建模，模拟一些 XML 消息并对其进行完整性检查，将它们转换为 XSD，最后在每一端构建与 XML 进行序列化的类。

这工作正常，直到我们访问数据库，然后像 Join Tables 这样的东西开始破坏我们所做的所有工作，以简化客户端。

我们已经尝试使用 LINQ to SQL 和其他 OR 映射器来解决这个问题，但是它们都没有真正解决问题而不引入更严重的问题。

所以，真正的问题是：**如果不将 RDBMS 视为简单的对象存储，是否有更好的方法来处理复杂的数据需求，而无需编写大量的转换代码？**

我想我正在寻找的灵丹妙药是知道什么是 Join 表以及如何处理它，并且仍然允许我为 Flex 生成“不错的”序列化 XML 并保留强大的 .NET 类型。

如果它可以分析每种方法所需的 SQL，生成存储过程并使用它们，则可以加分。但这可能要求太多了:)

**注意重新“加入表”：**

我们对此的定义是你有一个表，它有两个或多个外键作为它自己的主键。

例如：

```
Photos (PK PhotoID) &lt;- PhotoTags (PK FK PhotoID, PK FK TagID) -&gt; Tags (PK TagID) 
```

当 Flex 客户端获得一个 Photo 对象时，它可能还会获得一个包含所有标签的列表。所以，这可能看起来像这样：

```
<照片 id="3">
 <标签>
   <tag name="公园" />
   <tag name="悉尼" />
 </tags>
</照片>

```

相反，我见过的 OR 工具给了我们：

```
<照片 id="3">
 <照片标签>
  <照片标签>
    <tag name="公园" />
  </照片标签>
  <照片标签>
    <tag name="悉尼" />
  </照片标签>
 </照片标签>
</照片>

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T17:04:23.983

虽然我确信还有其他方法可以解决您的问题，但您是否有特定原因希望通过 Web 服务与 .net 进行通信？一个非常干净的解决方案是使用 WebOrb ( [http://www.themidnightcoders.com/weborb/dotnet/](http://www.themidnightcoders.com/weborb/dotnet/) ) 之类的东西，他们有社区和商业产品，可以非常优雅地处理您描述的问题。

-MW

# python - 雅虎 Geoplanet 网络服务的 Python 包装器不错？

> ID：64185
> 
> 赞同：2
> 
> 时间：2008-09-15T15:57:48.450
> 
> 标签：python, gis, yahoo

有没有人围绕雅虎的地理网络服务“GeoPlanet”创建了一个很好的包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T21:01:02.807

经过短暂的谷歌搜索，我发现没有任何东西看起来像这个 API 的包装器，但我不太确定包装器是否是 GeoPlanet 所必需的。

根据 Yahoo 的GeoPlanet[文档](http://developer.yahoo.com/geo/guide/api_docs.html#api_overview)，请求以 HTTP GET 消息的形式发出，使用 Python 的[httplib 模块](http://docs.python.org/lib/module-httplib.html)可以很容易地发出请求，[响应](http://developer.yahoo.com/geo/guide/response_formats.html)可以采用包括 XML 和 JSON 在内的多种形式之一。Python 可以很容易地解析这些格式。事实上，雅虎！它本身甚至提供了用于使用 Python 解析[XML](http://developer.yahoo.com/python/python-xml.html) 和[JSON的库。](http://developer.yahoo.com/python/python-json.html)

我知道这听起来像很多库，但是程序员已经完成了所有艰苦的工作。它只需要一点点“粘合在一起”，你就会有一个很好的 Yahoo! 界面。GeoPlanet 使用 Python 的强大功能。

# css - Ajax 控件工具包日历控件 CSS

> ID：64193
> 
> 赞同：0
> 
> 时间：2008-09-15T15:58:52.347
> 
> 标签：css

我在数据网格中使用 AJAX 控件工具包弹出日历控件。当它在页脚中时，它看起来很好。当它在数据网格的编辑端时，它从数据网格继承样式并且看起来完全不同（即太大）。

有没有办法改变 CSS 使其不从数据网格继承样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T16:13:52.700

在 Firefox 中打开页面。但是，首先，下载 firebug 扩展。然后，右键单击有问题的版本并向下检查元素。

Firebug 很棒，因为它可以让你浏览任何元素的 css。您在这里有两个选择：

1）为最顶层的元素分配一个css类并以这种方式工作。或者如果这不是一个选项，您可以使用 firebug 来获取到有问题的元素的 xpath。Xpath 看起来像 body/table/tr/td/table/tr[2]

你想在css中做的是

```
body table tr td table tr {
    /*css goes here */

} 
```

选项 1 绝对是更好的选择。当像 asp.net 这样的东西不能让我们拥有我们想要的精细控制时，选项 2 更像是一种肮脏的方式来完成工作。

如果您使用 pastebin 并将链接发布到渲染页面的 html，那将是非常棒的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T16:04:25.577

它使用网格中的样式，因为它在其中。如果要更改其样式，请更改控件的样式。你想让它做什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T17:17:38.630

这是pastebin链接：

[http://pastebin.com/m17d99f8a](http://pastebin.com/m17d99f8a)

我正在使用从位于此处的 Matt Berseth 的博客获得的网格样式表：http: [//mattberseth.com/blog/2007/10/a_yui_datatable_styled_gridvie.html](http://mattberseth.com/blog/2007/10/a_yui_datatable_styled_gridvie.html)

我正在为日历使用类似的样式表，但我再也找不到链接了。

# testing - 使 Test.QuickCheck.Batch 使用默认类型来测试列表函数

> ID：64197
> 
> 赞同：6
> 
> 时间：2008-09-15T15:59:53.153
> 
> 标签：testing, haskell, type-inference, quickcheck

我正在测试一个名为提取的函数，它可以在任何列表上运行。

```
extractions :: [a] -> [(a,[a])]
extractions [] = []
extractions l = extract l []
    where extract [] _ = []
          extract (x:xs) prev = (x, prev++xs) : extract xs (x : prev) 
```

我想测试它，例如，

```
import Test.QuickCheck.Batch    
prop_len l = length l == length (extractions l)
main = runTests "extractions" defOpt [run prop_len] 
```

但这不会编译；我必须为`run`or提供一个类型`prop_len`，因为 QuickCheck 不能生成`[a]`，它必须生成一些具体的东西。所以我选择了`Int`：

```
main = runTests "extractions" defOpt [r prop_len]
    where r = run :: ([Int] -> Bool) -> TestOptions -> IO TestResult 
```

有没有办法让 QuickCheck`a`为我选择而不是在类型中指定它`run`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T17:53:03.523

[快速检查手册](http://www.cs.chalmers.se/%7Erjmh/QuickCheck/manual_body.html#5)说“不” ：

> 属性必须具有单态类型。“多态”属性，例如上面的属性，必须限制在特定类型才能用于测试。这样做很方便，方法是在一个
> 
> 其中类型 = (x1 :: t1, x2 :: t2, ...)
> 
> 条款...

# mysql - 如何从 Perl 调用 MySQL 存储过程？

> ID：64200
> 
> 赞同：6
> 
> 时间：2008-09-15T15:59:58.490
> 
> 标签：mysql, perl, stored-procedures

如何从 Perl 调用 MySQL 存储过程？存储过程功能对 MySQL 来说是相当新的，Perl 的 MySQL 模块似乎还没有赶上。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T17:01:51.913

生成数据集的 MySQL 存储过程需要您使用 Perl DBD::mysql 4.001 或更高版本。（[http://www.perlmonks.org/?node_id=609098](http://www.perlmonks.org/?node_id=609098)）

下面是一个可以在较新版本中运行的测试程序：

```
mysql> delimiter //
mysql> create procedure Foo(x int)
  -> begin
  ->   select x*2;
  -> end
  -> //

perl -e 'use DBI; DBI->connect("dbi:mysql:database=bonk", "root", "")->prepare("call Foo(?)")->execute(21)' 
```

但是如果你的 DBD::mysql 版本太旧，你会得到如下结果：

```
DBD::mysql::st execute failed: PROCEDURE bonk.Foo can't return a result set in the given context at -e line 1. 
```

您可以使用 CPAN 安装最新的 DBD。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T16:27:46.223

[在 DBD::mysql 文档中的多个结果集部分](http://search.cpan.org/dist/DBD-mysql/lib/DBD/mysql.pm#MULTIPLE_RESULT_SETS)中有一个示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T00:35:37.380

```
#!/usr/bin/perl
# Stored Proc - Multiple Values In, Multiple Out
use strict;
use Data::Dumper;
use DBI;
my $dbh = DBI->connect('DBI:mysql:RTPC;host=db.server.com',
    'user','password',{ RaiseError => 1 }) || die "$!\n";
my $sth = $dbh->prepare('CALL storedProcedure(?,?,?,?,@a,@b);');
$sth->bind_param(1, 2);
$sth->bind_param(2, 1003);
$sth->bind_param(3, 5000);
$sth->bind_param(4, 100);
$sth->execute();
my $response = $sth->fetchrow_hashref();
print Dumper $response . "\n"; 
```

我花了一段时间才弄清楚，但我能够通过上面的方法得到我需要的东西。如果您需要获得多个返回“行”，我猜您只是...

```
while(my $response = $sth->fetchrow_hashref()) {
    print Dumper $response . "\n";
} 
```

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T16:09:15.037

首先，您可能应该通过 DBI 库进行连接，然后您应该使用绑定变量。例如：

```
#!/usr/bin/perl
#
use strict;
use DBI qw(:sql_types);

my $dbh = DBI->connect(
            $ConnStr,
            $User,
            $Password,
            {RaiseError => 1, AutoCommit => 0}
          ) || die "Database connection not made: $DBI::errstr";
my $sql = qq {CALL someProcedure(1);}    } 

my $sth = $dbh->prepare($sql);
eval {
  $sth->bind_param(1, $argument, SQL_VARCHAR);
};
if ($@) {
 warn "Database error: $DBI::errstr\n";
 $dbh->rollback(); #just die if rollback is failing
}

$dbh->commit(); 
```

请注意，我没有对此进行测试，您必须在 CPAN 上查找确切的语法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-24T15:59:40.233

*嗨，类似于上面，但使用 SQL exec。我无法让 CALL 命令工作。您将需要填写方括号内的任何内容并删除方括号。*

```
   使用 DBI；
   #START：设置数据库并连接
   我的 $host = '*[服务器]*\\*[数据库]*';
   我的 $database = '*[table]*';
   我的 $user = '*[user]*';
   我的 $auth = '*[密码]*';

   我的 $dsn = "dbi:ODBC:Driver={SQL Server};Server=$host;Database=$database";
   我的 $dbh = DBI->connect($dsn, $user, $auth, { RaiseError => 1 });

   #END : 设置数据库并连接
   $sql = "exec *[存储过程名称]* *[param1]*,*[param2]*,*[param3]*;";
   $sth = $dbh->prepare($sql);
   $sth->execute or die "SQL 错误: $DBI::errstr\n";

```

# sql-server - 复制数据库时如何添加常量列？

> ID：64202
> 
> 赞同：1
> 
> 时间：2008-09-15T16:00:00.503
> 
> 标签：sql-server, replication

我正在使用 SQL Server 2000，并且我有两个数据库，它们都复制（事务推送订阅）到单个数据库。我需要知道记录来自哪个数据库。

所以我想将发布中指定的固定列添加到我的表中，这样我就可以知道该行来自哪个数据库。

我该怎么做呢？

我想避免更改主数据库，主要是因为我需要这样做很多表。我希望有一些内置的复制功能可以在某些地方为我做到这一点。除此之外，我会采用视图的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T18:38:21.167

您可以使用计算列在两个数据库上使用以下内容：

```
 ALTER TABLE TableName ADD
    MyColumn AS 'Server1' 
```

然后只需定义单个“主”数据库以使用您使用计算的列值填充的 VARCHAR 列（或任何您想要的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T17:05:50.890

您可以创建一个添加“常量”列的视图，并将其用作复制源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T11:14:25.320

所以我的解决方案是设置复制发布以允许转换并为每个站点创建一个 DTS 包，将 siteid 附加到表中以保持 id 唯一，因为我不能使用 guid。

# msmq - 我可以通过某些属性过滤从消息队列 (MSMQ) 接收到的消息吗？（又名主题）

> ID：64204
> 
> 赞同：5
> 
> 时间：2008-09-15T16:00:21.330
> 
> 标签：msmq

我正在用 C# 创建一个处理来自队列的消息的 Windows 服务。我想为操作人员提供根据消息属性在生产中划分服务的灵活性。例如，他们应该能够说一个实例处理来自客户 A 的 Web 订单，另一个实例处理来自客户 A 的批量订单，第三个实例处理来自客户 B 的 Web 或批量订单，等等。

我当前的解决方案是为每个客户\来源组合分配单独的队列。将订单放入队列的过程必须做出正确的决定。我的 Windows 服务可以配置为从一个或多个队列中提取消息。这很混乱，但它有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T16:02:41.853

不，但是您可以**窥视**队列并决定您是否真的要使用该消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-01-25T15:31:51.427

像这样使用*GetMessageEnumerator2()*：

```
MessageEnumerator en = q.GetMessageEnumerator2();

while (en.MoveNext())
{
    if (en.Current.Label == label)
    {
        string body = ((XmlDocument)en.Current.Body).OuterXml;
        en.RemoveCurrent();
        return body;
    }
} 
```

# sql - 如何强制 sql server 登录的 nolock 提示

> ID：64208
> 
> 赞同：8
> 
> 时间：2008-09-15T16:00:46.913
> 
> 标签：sql, sql-server, security, sql-server-2005, query-optimization

有谁知道强制对某个用户发出的所有交易进行 nolock 提示的方法？我想为支持团队提供登录以查询生产系统，但我想通过对他们所做的一切强制执行 nolock 来保护它。我正在使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-15T21:37:09.943

您可以配置支持人员的 SQL Management Studio 以将默认事务隔离级别设置为 READ UNCOMMITTED（工具->选项->查询执行->SQL Server->高级）。这在功能上与对所有内容都有 NOLOCK 提示相同。

缺点是您必须为支持团队的每个成员执行此操作，并且他们能够更改其 SQL Management Studio 上的配置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-16T13:12:39.100

这是一种痛苦而笨拙的方法，但这是我们在我工作的地方所做的。我们也使用经典的 asp，所以我们使用内联 sql 调用。我们实际上将 sql 调用包装在一个函数中（在这里您可以检查特定用户）并在调用的开头添加“SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED”。

我相信在功能上这与无锁提示相同。抱歉，我没有纯 SQL 的答案，如果您找到一个好的方法，我很想听听。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-18T04:20:51.293

好的，您需要澄清您在此处尝试执行的操作。

如果您试图减少对数据库的锁定，并可能为您的支持用户提供可能永远不会真正提交到数据库中的数据。虽然允许他们向数据库写入任何他们想要的东西，但 nolock 是要走的路。您将获得额外的好处，即您的用户仍然可以使用 SET TRANSACTION ISOLATION LEVEL 命令提高他们的隔离级别。

如果您试图限制它们在对数据库运行内容时可能造成的损害，请查看实现安全性，确保仅允许它们对您的表进行读取访问，并查看剥离对存储过程和函数的所有访问权限。

我发现 NOLOCK 在堆栈溢出方面被严重误解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:03:18.450

您可以为支持团队创建一个受限用户，然后使用 nolock-hint 编写存储过程或视图。然后只授予对那些而不是直接表选择访问权限。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T21:36:52.127

正如埃斯波暗示的那样，我很确定没有直接的方法可以做你所要求的。正如他所说，您可以通过限制用户仅访问具有内置 NOLOCK 编码的 proc 来完成它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T11:26:20.480

不幸的是，将用户限制为 SP 违背了此目的。我希望有某种方法可以让他们查询所有内容，从而提高他们的故障排除技能。谢谢你们的帮助。

# java - 检测随机有序输入的变化（散列函数？）

> ID：64209
> 
> 赞同：0
> 
> 时间：2008-09-15T16:01:02.357
> 
> 标签：java, multithreading, hash

我正在阅读可以按任何顺序排列的文本行。问题是输出实际上可能与之前的输出相同。我怎样才能检测到这一点，而不先对输出进行排序？

是否有某种散列函数可以采用相同的输入，但以任何顺序，仍然产生相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T16:30:08.260

最简单的方法似乎是在输入的过程中对每一行进行散列，存储散列和原始数据，然后将每个新散列与现有散列集合进行比较。如果您得到肯定，您可以比较实际数据，以确保它不是误报 - 尽管这种情况极为罕见，但您可以使用更快的哈希算法，如 MD5 或 CRC（而不是 SHA 之类的算法，速度较慢但碰撞的可能性较小），所以它很快，然后在您受到打击时比较实际数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T16:03:19.527

所以你有输入

```
A B C D
D E F G
C B A D 
```

并且您需要检测第一行和第三行是否相同？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:06:14.200

如果您想查明两个文件是否包含相同的一组行，但顺序不同，您可以分别在每行上使用常规哈希函数，然后将它们与排序无关紧要的函数组合，例如加法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:06:35.090

如果行相当长，您可以只保留每行的哈希列表 - 对它们进行排序并与之前的输出进行比较。

如果您不需要 100% 万无一失的解决方案，您可以将每行的哈希存储在 Bloom 过滤器中（在 Wikipedia 上查找）并在处理结束时比较 Bloom 过滤器。这可能会给您带来误报（即您认为您有相同的输出，但实际上并不相同）但是您可以通过调整 Bloom 过滤器的大小来调整错误率......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T16:09:27.033

如果将每个字符的 ASCII 值相加，无论顺序如何，都会得到相同的结果。

（这可能有点过于简单，但它可能会激发您的灵感。有关有趣的背景故事，请参阅编程珍珠，第 2.8 节。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T19:52:18.120

任何基于散列的方法都可能产生不好的结果，因为多个字符串可以产生相同的散列。（这不太可能，但有可能。）添加散列的建议尤其如此，因为您基本上会采用*特别糟糕*的散列值散列。

仅当您错过更改或发现不存在的更改并不重要时，才应尝试使用哈希方法。

最准确的方法是使用行字符串作为键来保留 Map，并将每个字符串的计数存储为值。（如果每个字符串只能出现一次，则不需要计数。）计算预期的行集。复制此集合以检查传入行，减少您看到的每行的计数。

*   如果您遇到计数为零的行（或根本没有地图条目），那么您会看到一条您没有预料到的行。
*   如果您以 Map 中剩余的非零条目结束此操作，则您没有看到预期的内容。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T22:18:20.343

那么问题规范有点有限。

据我了解，您希望查看多个字符串是否包含相同的元素，而不管顺序如何。

例如：

```
A B C
C B A 
```

是相同的。

这样做的方法是创建一组值，然后比较这些组。要创建一个集合，请执行以下操作：

```
HashSet set = new HashSet();
foreach (item : string) {
   set.add(item);
} 
```

然后只需通过运行其中一个集合并将其与其他集合进行比较来比较集合的内容。执行时间将`O(N)`代替`O(NlogN)`排序示例。

# java - 什么是最有用的 java 多用途开源库？

> ID：64213
> 
> 赞同：8
> 
> 时间：2008-09-15T16:01:12.480
> 
> 标签：java, open-source

有没有所有程序员都应该知道的开源库？我在想一些通用的东西，一种对标准的扩展，`java.util`其中包含对各种应用程序有用的基本功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-15T16:02:47.267

*   阿帕奇公地

*   日志4j

*   谷歌收藏

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T16:13:55.710

[Spring 框架](http://www.springframework.org/)具有惊人的通用性。我一开始只是将它用作配置管理工具，但后来意识到依赖注入在进行测试驱动开发时有多么有用。后来慢慢发现了很多隐藏在Spring角落里的有用模块。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T16:10:13.910

阿帕奇的[雅加达公地](http://commons.apache.org/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-15T16:03:02.040

如果您使用很多，好吧，Collections ，[Google Collections API](http://code.google.com/p/google-collections/)非常方便......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T16:10:07.653

值得一提的是，首先要做的是了解 Java 较新版本中的库。很多想法都回到了 java - java.util.concurrent、java.nio 和 javax.xml

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-15T19:33:27.370

[函数式 Java](http://functionaljava.org)提供一流的函数值、不可变列表/数组、惰性/无限流、元组类型、任一类型、可选值（类型安全的 null 替代方案）。与 Google Collections 或 java.util 集合配合使用效果很好。

它还提供了方便的并发抽象，例如并行策略、并行列表/数组函子、参与者并发和可组合的轻量级进程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2009-05-26T21:47:11.643

lambdaj 是一个线程安全的静态方法库，它提供了一个内部 DSL 来以伪功能和静态类型的方式操作集合，而无需显式迭代它们。它消除了在迭代集合时编写（通常可读性差）循环的负担。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-05-26T22:13:22.810

这是一个好的开始。[http://java-sources.org/](http://java-sources.org/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-09-14T10:10:32.400

谷歌收藏迁移到伟大的[番石榴图书馆](http://code.google.com/p/guava-libraries/)。它包含一些常用的实用程序、字符串匹配器、拆分器、连接器、IO 实用程序等。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T17:16:33.923

[JXL](http://jexcelapi.sourceforge.net/)用于 Excel 工作簿创建/编辑。我在一家银行工作，用于日记工作的多功能报告工具是 Excel。无论我们做什么应用程序都必须从 Excel 导入/导出。唯一的失败是它有大型工作簿的内存问题并且格式化它有点晦涩难懂

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T20:07:56.413

看看**[jmate](http://code.google.com/p/jmate/)**项目。它包含对字符串、集合和 IO 操作（目前）非常有用的方法。

看看[这里的一些例子](http://javaadami.blogspot.com/2008/08/whenever-scripting-language-wants-to.html)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-05-16T20:22:47.860

最近我试图找到这个问题的答案。我为此做了一些数据分析，你可以在[这里](http://www.77dev.com/2014/05/java-trends-top-100-mostly-used.html)和[这里](http://www.77dev.com/2014/05/what-are-most-popular-java-libraries.html)找到结果。

# ruby-on-rails - 为了瘦控制器，rails 模型是否应该与其他模型有关？

> ID：64214
> 
> 赞同：5
> 
> 时间：2008-09-15T16:01:15.490
> 
> 标签：ruby-on-rails, ruby

我到处都读到业务逻辑属于模型而不是控制器，但限制在哪里？我在玩个人会计应用程序。

```
Account
Entry
Operation 
```

创建操作时，仅当创建相应条目并将其链接到帐户以使操作平衡时才有效，例如购买 6 件装：

```
o=Operation.new({:description=>"b33r", :user=>current_user, :date=>"2008/09/15"})
o.entries.build({:account_id=>1, :amount=>15})
o.valid? #=>false
o.entries.build({:account_id=>2, :amount=>-15})
o.valid? #=>true 
```

现在在*基本操作*的情况下向用户显示的表单被简化以隐藏条目详细信息，帐户是根据用户请求的操作类型在 5 个默认值中选择的（初始化帐户 -> 净值帐户，花费资产 - >费用，赚取收入->资产，借入负债->资产，支付债务资产->负债......）我想要从默认值创建的条目。

我还希望能够创建更复杂的操作（超过 2 个条目）。对于第二个用例，我将有一个不同的形式，其中暴露了额外的复杂性。第二个用例阻止我在操作中包含借方和贷方字段并摆脱输入链接。

哪种形式最好？像我现在一样在 SimpleOperationController 中使用上面的代码，或者在 Operation 类上定义一个新方法，这样我就可以调用 Operation.new_simple_operation(params[:operation])

从 Operation 类中实际创建和操作 Entry 对象不是破坏了关注点分离吗？

我不是在寻求关于我扭曲的会计原则的建议 :)

编辑——看来我表达得不太清楚。我不太关心验证。我更关心创建逻辑代码应该去哪里：

假设控制器上的操作称为支出，当使用支出时，参数哈希将包含：金额、日期、描述。借方和贷方账户将派生自被调用的操作，但随后我必须创建所有对象。拥有会不会更好

```
#error and transaction handling is left out for the sake of clarity
def spend
  amount=params[:operation].delete(:amount)#remove non existent Operation attribute
  op=Operation.new(params[:operation])
  #select accounts in some way
  ...
  #build entries
  op.entries.build(...)
  op.entries.build(...)
  op.save
end 
```

或在 Operation 上创建一个方法，使上面看起来像

```
def spend
  op=Operation.new_simple_operation(params)
  op.save
end 
```

这肯定会提供更薄的控制器和更胖的模型，但随后模型将创建和存储其他模型的实例，这就是我的问题所在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T21:19:57.783

> 但随后该模型将创建和存储其他模型的实例，这是我的问题所在。

这有什么问题？

如果您的“业务逻辑”声明 Operation 必须具有一组有效的 Entries，那么 Operation 类肯定没有任何问题可以了解和处理您的 Entry 对象。

如果你走得太远，你只会遇到问题，让你的模型操纵他们不需要知道的东西*，*比如 EntryHtmlFormBuilder 或其他什么:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T21:08:43.927

虚拟属性（[此处](http://railscasts.com/episodes/16)和[此处](http://railscasts.com/episodes/73)的更多信息）将对此有很大帮助。将整个参数传递回模型可以使控制器中的事情变得简单。这将允许您动态构建表单并轻松构建条目对象。

```
class Operation
  has_many :entries

  def entry_attributes=(entry_attributes)
    entry_attributes.each do |entry|
      entries.build(entry)
    end
  end

end

class OperationController < ApplicationController
  def create
    @operation = Operation.new(params[:opertaion])
    if @operation.save
      flash[:notice] = "Successfully saved operation."
      redirect_to operations_path
    else
      render :action => 'new'
    end
  end
end 
```

如果一切都无效，则保存将失败。这给我们带来了验证。因为每个条目都是独立的，您需要在“创建”时检查所有条目，您可能应该在操作中覆盖验证：

```
class Operation
  # methods from above
  protected
    def validate
      total = 0
      entries.each { |e| t += e.amount }
      errors.add("entries", "unbalanced transfers") unless total == 0
    end
end 
```

现在您将收到一条错误消息，告诉用户金额已关闭，他们应该解决问题。你可以在这里变得非常花哨，并通过具体说明问题来增加很多价值，比如告诉他们他们有多少损失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:23:46.700

更容易考虑每个实体验证自己，以及相互依赖的实体将其状态委托给其关联条目的状态。在您的情况下，例如：

```
class Operation < ActiveRecord::Base
  has_many :entries
  validates_associated :entries
end 
```

validates_associated 将检查每个关联实体是否有效（在这种情况下，如果操作要有效，则所有条目都应该有效）。

尝试验证整个模型的整个层次结构非常诱人，但正如您所说，最容易完成的地方是控制器，它应该更像是请求和响应的路由器，而不是处理业务逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T19:35:14.183

我看待它的方式是控制器应该反映最终用户视图并将请求转换为模型操作和响应，同时还进行格式化。在您的情况下，有两种操作代表具有默认帐户/条目的简单操作，以及具有用户选择的条目和帐户的更复杂的操作。表单应该反映用户视图（2 个具有不同字段的表单），并且控制器中应该有 2 个动作来匹配。然而，控制器不应该有与如何操作数据有关的逻辑，只有如何接收和响应。我会在 Operation 类上有类方法，从表单中获取适当的数据并根据需要创建一个或多个对象，或者将这些类方法放在不是 AR 模型但具有跨模型的业务逻辑的支持类上边界。单独的实用程序类的优点是它使每个模型都专注于一个目的，缺点是实用程序类没有定义的居住地。我将它们放在 lib/ 中，但 Rails 并没有为模型助手指定一个位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T17:16:16.983

如果您担心将此逻辑嵌入到任何特定模型中，为什么不将它们放入观察者类中，这将使您创建相关项目的逻辑与被观察的类分开。

# mysql - Windows 上的致命警告

> ID：64233
> 
> 赞同：2
> 
> 时间：2008-09-15T16:03:08.933
> 
> 标签：mysql

在 Windows MySQL 服务器和 Debian MySQL 服务器之间工作时，我注意到警告在 Windows 上是致命的，但在 Debian 上却被忽略了。在进行开发时，我想在两台服务器上都发出致命警告，但我找不到影响这种行为的设置。有人有想法么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T20:16:21.963

我认为您正在寻找的是 my.conf 中的 sql_mode 参数。STRICT_ALL_TABLES 是值。我想这取决于你所说的“致命”是什么意思。

[http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:13:34.980

查看在 /etc/my.ini 文件中启用严格模式。

# python - 何时在 Django 中创建新应用程序（使用 startapp）？

> ID：64237
> 
> 赞同：127
> 
> 时间：2008-09-15T16:03:22.553
> 
> 标签：python, django

我已经用谷歌搜索了这个，但我仍然无法理解 Django 定义为“应用程序”的内容。

我是否应该为站点中的每个功能创建一个新应用程序，即使它使用来自主项目的模型？

你们对何时拆分新应用程序以及何时将功能与“主项目”或其他应用程序保持在一起有很好的经验吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-15T16:35:16.020

James Bennett 有一[组精彩的幻灯片](http://www.b-list.org/weblog/2008/mar/15/slides/)，介绍如何在 Django 中组织可重用的应用程序。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-15T16:32:07.243

我更喜欢将 Django 应用程序视为可重用的模块或组件，而不是“应用程序”。

这有助于我封装某些功能并将某些功能彼此分离，如果我决定与整个社区共享一个特定的“应用程序”，则可以提高可重用性和可维护性。

我的一般方法是将特定功能或功能集存储到“应用程序”中，就好像我要公开发布它们一样。这里的困难部分是弄清楚每个桶有多大。

我使用的一个好技巧是想象如果我的应用程序公开发布后会被如何使用。这经常鼓励我缩小桶并更清楚地定义其“目的”。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2011-11-07T09:15:00.783

这是 2008 年 9 月 6 日的更新演示文稿。

[DjangoCon 2008：可重用应用程序 @7:53](https://youtu.be/A-S0tqpPga4?t=753)

[幻灯片：Reusable_apps.pdf](http://media.b-list.org/presentations/2008/djangocon/reusable_apps.pdf)

> ## 取自幻灯片
> 
> 这应该是它自己的应用程序吗？
> 
> *   它与应用程序的焦点完全无关吗？
> *   它与我正在做的其他事情正交吗？
> *   我需要在其他网站上使用类似的功能吗？
> 
> 如果其中任何一个是“是”？然后最好将其分解为一个单独的应用程序。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-15T16:12:39.147

我倾向于为每个逻辑上独立的模型集创建新的应用程序。例如：

*   用户资料
*   论坛帖子
*   博客文章

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-12-12T02:16:39.307

我在网上找到的这个问题的两个最佳答案是：

1.  其他答案中也提到了可重用应用程序谈话（[幻灯片](https://www.b-list.org/weblog/2008/mar/15/slides/)）（[视频）。](http://www.youtube.com/watch?v=A-S0tqpPga4)Bennett，作者和 Django 贡献者，定期发布应用程序供其他人使用，并对许多小型应用程序有强烈的看法。
2.  [Doordash's Tips for Django at Scale](https://blog.doordash.com/tips-for-building-high-quality-django-apps-at-scale-a5a25917b2b5)给出了相反的建议，并在他们的案例中说，他们在从许多单独的应用程序开始后迁移到了一个应用程序。他们遇到了应用程序之间迁移依赖图的问题。

两个消息来源都同意您应该在以下情况下创建一个单独的应用程序：

*   如果您计划在另一个 Django 项目中重用您的应用程序（特别是如果您计划将其发布以供其他人重用）。
*   如果应用程序与另一个应用程序之间几乎没有或没有依赖关系。在这里，您也许可以想象未来一个应用程序会作为自己的微服务运行。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-09-16T00:01:11.250

我遵循的规则是，如果我想在不同的项目中重用该功能，它应该是一个新应用程序。

如果它需要深入了解项目中的模型，那么将其与模型结合起来可能更具凝聚力。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-21T12:33:10.340

Andrew Godwin（Django 核心开发人员）给出了这个问题的最佳答案：

在我看来，应用程序的主要目的是提供可重用组件的逻辑分离——特别是模型/管理员/等的一流命名空间。- 并提供一种简单的方法来“打开”或“关闭”事物。

在某些方面，它是创建 Django 的时代的遗物——当时 Python 打包和模块开发得少得多，你基本上必须有自己的解决方案来解决这个问题。也就是说，它仍然是 Django 心智模型的核心部分，而且我认为 INSTALLED_APPS 仍然是比 Python 的入口点替代产品更清洁、更简单的解决方案（这使得禁用安装在环境中但你不这样做的包非常困难不想使用）。

您认为有什么特别的东西可以与今天的应用程序概念脱钩吗？模型和管理员需要它来进行自动发现和唯一的命名空间前缀，所以这很难撤消，而且我正在努力考虑你需要它的其他功能（事实上，如果你想要的只是一个库，你可以做到一个普通的 Python —— 不需要应用程序包装，除非你发送模型、模板或管理代码 IIRC）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T22:56:37.600

一个“应用程序”可以是许多不同的东西，这一切都归结为品味。例如，假设您正在构建一个博客。您的应用程序可以是整个博客，或者您可以有一个“管理”应用程序、一个用于所有公共视图的“站点”应用程序、一个“rss”应用程序、一个“服务”应用程序，以便开发人员可以在他们的自己的方式等

我个人会让博客本身成为应用程序，并分解其中的功能。然后可以在其他网站中轻松地重复使用该博客。

Django 的好处是它可以将目录树的任何级别中的任何 models.py 文件识别为包含 Django 模型的文件。因此，将您的功能分解为“应用程序”本身内更小的“子应用程序”不会让任何事情变得更加困难。

# .net - Castle Windsor：如何添加对不在 xml 中的工厂设施的调用？

> ID：64238
> 
> 赞同：1
> 
> 时间：2008-09-15T16:03:46.530
> 
> 标签：.net, inversion-of-control, castle-windsor

我知道如何告诉 Castle Windsor 使用 XML 解析来自工厂方法的引用，但我可以通过 Container.AddComponent() 接口以编程方式完成吗？如果没有，还有其他方法可以从代码中做到这一点吗？

**编辑：** 似乎有些混乱，所以让我澄清一下，我正在寻找一种在代码中执行以下操作的方法：

```
<facilities>
   <facility
        id="factory.support"
        type="Castle.Facilities.FactorySupport.FactorySupportFacility, Castle.MicroKernel"
    />

</facilities>

<components>

    <component
        id="CustomerRepositoryFactory"
        type="ConsoleApplication2.CustomerRepositoryFactory, ConsoleApplication2"
    />

    <component
        id="CustomerRepository"
        service="ConsoleApplication2.ICustomerRepository, ConsoleApplication2"
        type="ConsoleApplication2.CustomerRepository, ConsoleApplication2"
        factoryId="CustomerRepositoryFactory"
        factoryCreate="Create"
    />

</components> 
```

（[来自这篇关于 Windsor 和 spring.net 工厂支持的 codebetter 文章](http://codebetter.com/blogs/david.hayden/archive/2007/12/13/factory-method-support-in-castle-windsor-and-spring-net.aspx)）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T16:38:42.733

直接来自单元测试 FactorySupportTestCase（这是你的朋友）：

```
[Test]
    public void FactorySupport_UsingProxiedFactory_WorksFine()
    {
        container.AddFacility("factories", new FactorySupportFacility());
        container.AddComponent("standard.interceptor", typeof(StandardInterceptor));
        container.AddComponent("factory", typeof(CalulcatorFactory));

        AddComponent("calculator", typeof(ICalcService), typeof(CalculatorService), "Create");

        ICalcService service = (ICalcService) container["calculator"];

        Assert.IsNotNull(service);
    }

    private void AddComponent(string key, Type service, Type type, string factoryMethod)
    {
        MutableConfiguration config = new MutableConfiguration(key);
        config.Attributes["factoryId"] = "factory";
        config.Attributes["factoryCreate"] = factoryMethod;
        container.Kernel.ConfigurationStore.AddComponentConfiguration(key, config);
        container.Kernel.AddComponent(key, service, type);
    } 
```

# encryption - 跨机器加密/解密是禁忌

> ID：64258
> 
> 赞同：3
> 
> 时间：2008-09-15T16:06:03.017
> 
> 标签：encryption, windows-vista, cryptoapi

我在 XP 和 Vista 之间使用了对“CryptUnprotectData”（从 Crypt32.dll 公开）的相同调用。在 XP 中运行良好。在 Vista 中运行时出现以下异常：

```
"Decryption failed. Key not valid for use in specified state." 
```

正如预期的那样，crypt32.dll 的版本在 XP 和 Vista 之间是不同的（w/XP 实际上有更新的版本，可能是 SP3 或其他一些更新的结果）。

更具体地说，我正在加密数据，将其放入注册表，然后使用“CryptUnprotectData”读取和解密。UAC 已关闭。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T16:10:50.413

[CryptUnprotectData 函数](http://msdn.microsoft.com/en-us/library/aa380882.aspx)文档指出，它通常仅在用户具有与加密器相同的登录凭据时才有效。

这向我表明，密钥可能与用户当前的令牌相关联。既然你提到了 Vista，这让我想到了 UAC 和受限令牌。

你能给我们看一些代码吗？您能否向我们提供更多关于您正在处理数据的信息——即您是否在进程、用户或计算机之间移动数据？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T16:53:05.133

好的。希望这是我本周的硬骨头动作！;-)

> 这向我表明，密钥可能与用户当前的令牌相关联。

就是这样。原来我正在使用另一台机器（XP 机器）的加密数据并试图在 Vista 机器上解密。

正如 MSDN 文档所述：

> 通常，只有具有与加密器相同的登录凭据的用户才能解密数据。此外，**加密和解密必须在同一台计算机上完成。**

Once I re-encrypted the data on the Vista machine, decryption works as expected.

Thanks.

# c# - 滚动时如何消除Windows.Forms自定义控件中的闪烁？

> ID：64272
> 
> 赞同：8
> 
> 时间：2008-09-15T16:07:51.933
> 
> 标签：c#, .net, winforms, gdi+

我想在 C# 中创建一个自定义控件。但是每次我必须完全重绘我的控件时，它都会闪烁，即使我使用双缓冲（首先绘制到图像，然后将它的 blitting）。

当我必须完全重绘时如何消除闪烁？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-15T16:36:43.003

您可以尝试在 InitiliseComponent 调用之后将以下内容放入构造函数中。

```
SetStyle(ControlStyles.OptimizedDoubleBuffer | 
         ControlStyles.UserPaint |
         ControlStyles.AllPaintingInWmPaint, true); 
```

编辑：

如果您尝试这样做，如果可以，请删除您自己的双缓冲代码，并让控件自行绘制以响应调用的适当虚拟方法。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-12-11T01:54:46.163

我从一个工作的 C# 程序中提取了这个。其他海报有语法错误，显然是从 C++ 而不是 C# 复制的

```
SetStyle(ControlStyles.OptimizedDoubleBuffer | 
                        ControlStyles.UserPaint |
                        ControlStyles.AllPaintingInWmPaint, true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-17T05:24:17.707

打电话可能就足够了

```
SetStyle(ControlStyles::UserPaint | ControlStyles::AllDrawingInWmPaint, true); 
```

您看到的闪烁很可能是因为 Windows 首先绘制控件的背景（通过 WM_ERASEBKGND），然后要求您的控件执行您需要执行的任何绘制（通过 WM_PAINT）。通过禁用背景绘制并在 OnPaint 覆盖中执行所有绘制可以在 99% 的情况下消除问题，而无需使用双缓冲所需的所有内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:16:43.253

你说你已经尝试过双缓冲，但是你说首先绘制到一个图像并对其进行 blitting。您是否尝试过在构造函数中设置 DoubleBuffered = true 而不是自己使用图像？

# asp.net - 创建新站点时，如何告诉 IIS 6 将 .NET 版本设置为 2.0（而不是 1.1）？

> ID：64279
> 
> 赞同：14
> 
> 时间：2008-09-15T16:08:55.193
> 
> 标签：asp.net, iis-6, windows-server-2003

我们使用 IIS 管理器在 IIS 6 (Windows Server 2003) 中创建新站点。在 IIS 6 中创建这些站点时，ASP.NET 版本默认为 ASP.NET 1.1。我们希望它默认为 ASP.NET 2.0。这对我们来说是个问题的原因是，当您使用服务器上的任何站点并将 ASP.NET 版本从 ASP.NET 1.1 切换到 ASP.NET 2.0 时，所有网站都会循环使用。

IIS 元数据库中是否有控制此设置的设置，或者通过脚本创建站点的方法可以正确设置 ASP.Net 版本，以便我们在设置每个站点时可以避免 IIS 重置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-15T23:51:33.223

正如另一个人已经提到的，每当我需要更改站点的 .NET 设置时，我都会参考这篇[文章。](http://weblogs.asp.net/owscott/archive/2006/05/30/ASPNet_5F00_regiis.exe-tool_2C00_-setting-the-default-version-without-forcing-an-upgrade-on-all-sites.aspx)

至于您的问题，以下步骤（从链接的帖子中总结）应该可以满足您的需求：

1.  从任何 .NET 框架文件夹运行`aspnet_regiis -lk`以列出您当前的设置，以帮助您确定哪些站点应继续使用 .NET 1.1。如果您知道有一个 .NET 1.1 站点，但该命令未明确列出该站点，则它是从 root 继承的`W3SVC/`。

2.  对于上一个命令未明确列出的所有 .NET 1.1 站点，您需要强制它们使用 .NET 1.1：

    1.  确定要强制使用 .NET 1.1 的站点的标识符 ID。（通过 IIS 6 Manager，您可以通过单击工具左侧的“Web Sites”文件夹来确定站点的 Identifier。在右侧，将列出您的所有站点，并且 Identifier 列显示 ID .)
    2.  从 .NET 1.1 框架文件夹中，运行您要强制使用 .NET 1.1 的站点的 ID 在`aspnet_regiis -sn W3SVC/<Identifier ID>/ROOT/`哪里。`<Identifier ID>`
3.  最后，将根目录更改`W3SVC/`为使用 .NET 2.0，以便所有新创建的站点都将从根目录继承并默认使用 .NET 2.0。要更改根目录，请从 .NET 2.0 框架文件夹中运行`aspnet_regiis -sn W3SVC/`.

您可以`aspnet_regiis -lk`再次运行以验证您的设置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T16:19:46.803

请注意，运行 aspnet_regiis -i 会将所有 IIS 网站重新映射到 2.0。如果您有想要保留的现有 1.1 应用程序，请改为运行 aspnet_regiis -ir。这会将 2.0 设置为 IIS 的默认运行时，但不会更改现有站点的脚本映射。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T16:17:31.647

例如，找到您想要的 .Net 版本的目录；C:\Windows\Microsoft.NET\Framework\v2.0.50727 在此处获取 cmd 提示符，然后运行 ​​aspnet_regiis -i。更多信息@ [http://weblogs.asp.net/owscott/archive/2006/05/30/ASPNet_5F00_regiis.exe-tool_2C00_-setting-the-default-version-without-forcing-an-upgrade-on-all-sites .aspx](http://weblogs.asp.net/owscott/archive/2006/05/30/ASPNet_5F00_regiis.exe-tool_2C00_-setting-the-default-version-without-forcing-an-upgrade-on-all-sites.aspx)

瑞安

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-05T05:43:56.910

以下将默认网站设置为 ASP.NET 2.0：

C:\windows\Microsoft.NET\Framework\v2.0.50727\aspnet_regiis.exe -sn W3SVC/

子应用程序从父应用程序继承 ASP.NET 设置，因此所有子应用程序都将具有新设置。

或者在设置新应用程序后作为此命令的变体运行。

抢

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T16:43:29.773

简单的答案：打开 IIS 管理器。在导航窗格中，找到 .NET2 网站并右键单击它。选择“属性”。然后选择“ASP.NET”选项卡。该屏幕上的第一个下拉菜单让您可以选择不同版本的 .NET。

请注意——当我这样做时，网络服务器上的所有网站都停止运行。Microsoft 支持人员告诉我，.NET1 和 .NET2 不应从 Web 服务器的同一常规区域（默认网站）运行。解决方案是在 Web 服务器上为 .NET1 或 .NET2 站点创建一个应用程序池，然后使用它来隔离所有运行“其他”版本 .NET 的站点。可以在 IIS 管理器的“帮助”下找到创建应用程序池的说明。

您可以只创建一个应用程序池并将所有具有相同 .NET 的站点放在同一个池中**，**也可以为每个应用程序创建一个应用程序池。你的选择。

# asp.net - 在 .net Web 应用程序中加载高度重用数据的最佳方式是什么

> ID：64284
> 
> 赞同：1
> 
> 时间：2008-09-15T16:09:15.503
> 
> 标签：asp.net, caching, global-asax, application-start

假设我有一个用于在 Web 应用程序上导航的类别列表。我是否应该在 global.asax 的 application_onStart 中添加一个函数调用，而不是从数据库中为每个用户进行选择，以将该数据提取到一个数组或集合中，以便一遍又一遍地重复使用。如果我的数据根本没有改变 - （编辑 - 经常），这会是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:18:54.013

过早的优化是邪恶的。这是给定的，如果您在应用程序中遇到性能问题并且您想要向用户显示“静态”信息，您绝对可以将该数据加载到数组中并将其存储在应用程序对象中。您需要小心并平衡内存使用与优化。

您遇到的问题是更改数据库存储的信息而不是让它更新缓存的版本。您可能希望在数据库中存储某种最后更改日期，并将其与缓存数据一起存储在状态中。这样您就可以查询最大更改时间并进行比较。如果它比您的缓存日期更新，那么您将其转储并重新加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T17:17:08.010

您可以将列表项存储在 Application 对象中。你是对的`application_onStart()`，只需调用一个方法来读取你的数据库并将数据加载到 Application 对象。

在 Global.asax

```
public class Global : System.Web.HttpApplication
{
    // The key to use in the rest of the web site to retrieve the list
    public const string ListItemKey = "MyListItemKey";
    // a class to hold your actual values. This can be use with databinding
    public class NameValuePair
    { 
        public string Name{get;set;} 
        public string Value{get;set;}
        public NameValuePair(string Name, string Value)
        {
            this.Name = Name;
            this.Value = Value;
        }
    }

    protected void Application_Start(object sender, EventArgs e)
    {
        InitializeApplicationVariables();
    }

    protected void InitializeApplicationVariables()
    {
        List<NameValuePair> listItems = new List<NameValuePair>();
        // replace the following code with your data access code and fill in the collection
        listItems.Add( new NameValuePair("Item1", "1"));
        listItems.Add( new NameValuePair("Item2", "2"));
        listItems.Add( new NameValuePair("Item3", "3"));
        // load it in the application object
        Application[ListItemKey] = listItems;
    }
 } 
```

现在您可以在项目的其余部分访问您的列表。例如，在 default.aspx 中加载 DropDownList 中的值：

```
<asp:DropDownList runat="server" ID="ddList" DataTextField="Name" DataValueField="Value"></asp:DropDownList> 
```

在代码隐藏文件中：

```
protected override void OnPreInit(EventArgs e)
{
    ddList.DataSource = Application[Global.ListItemKey];
    ddList.DataBind();
    base.OnPreInit(e);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T16:13:59.953

如果它永远不会改变，它可能不需要在数据库中。

如果数据不多，你可以把它放在 web.config 中，或者在你的代码中作为 en Enum 。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T16:16:53.753

获取所有可能很昂贵。尝试惰性初始化，仅获取请求数据，然后将其存储在缓存变量中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T16:18:58.477

在应用程序变量中。

请记住，应用程序变量可以包含 .Net 中的对象，因此您可以在 global.asax 中实例化该对象，然后直接在代码中使用它。

由于应用程序变量在内存中，它们非常快（而不是必须调用数据库）

例如：

```
// Create and load the profile object
x_siteprofile thisprofile = new x_siteprofile(Server.MapPath(String.Concat(config.Path, "templates/")));
Application.Add("SiteProfileX", thisprofile); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:28:15.720

我会将数据存储在应用程序缓存（缓存对象）中。而且我不会预加载它，我会在第一次请求时加载它。缓存的好处在于 ASP.NET 将对其进行管理，包括为您提供在文件更改、时间段等后使缓存条目过期的选项。由于项目保存在内存中，因此对象不会被序列化/反序列化，因此使用速度非常快。

用法很简单。Cache 对象上有 Get 和 Add 方法，分别用于检索和添加项目到缓存中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T16:12:35.603

我将静态集合用作私有集合，并使用公共静态属性从数据库加载或获取它。

此外，您可以添加一个静态日期时间，该日期时间在加载时设置，如果您调用它，经过一定的时间，清除静态集合并重新查询它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:31:28.927

缓存是要走的路。如果您喜欢设计模式，请查看单例。

但总的来说，在您注意到性能下降之前，我不确定我是否会担心它。

# sql-server - 如何级联筛选 SSAS 多维数据集中更多维度的属性，在 Excel 2007 中查看

> ID：64288
> 
> 赞同：1
> 
> 时间：2008-09-15T16:09:37.280
> 
> 标签：sql-server, excel, ssas, cube, cascade-filtering

如何**级联**筛选 SSAS 多维数据集中更多维度的属性，在 Excel 2007 中查看。

例如，如果我们有一个维度为*Time*和维度*Client的多维数据集**Sales*，一旦过滤了维度*Time*以仅显示特定日期的销售额，如果在过滤器区域中选择“Client.ClientName”作为过滤器，如何是否可以过滤客户列表，以便仅显示在特定日期有销售的客户。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-17T16:00:09.400

看看[www.clicksoft.ro](http://www.clicksoft.ro)

名为 QuickCubeFiltrator 的产品是一个类似于 excel 2007 插件的向导，它执行级联过滤。可能是你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-22T20:04:23.903

我以前试过这个，但运气不太好。不确定你真的可以轻松做到这一点。您可以尝试使用命名集和计算成员，但大多数情况下它取决于您的数据和层次结构。您还可以查看报告服务，以及它在 MDX 中的幕后工作方式，但我不知道在 Excel 中这对您有什么好处。就像我说的，这是一个艰难的过程。

# api - 用于服务器端 3D 渲染的 API

> ID：64291
> 
> 赞同：10
> 
> 时间：2008-09-15T16:09:51.947
> 
> 标签：api, 3d, render, server-side

我正在开发一个应用程序，该应用程序需要在服务器上快速渲染简单的 3D 场景，然后通过 HTTP 将它们作为 JPEG 返回。基本上，我希望能够通过执行以下操作在 HTML 页面中简单地包含动态 3D 场景：

```
<img src="http://www.myserver.com/renderimage?scene=1&x=123&y=123&z=123"> 
```

我的问题是关于使用什么技术来进行渲染。在桌面应用程序中，我很自然会使用 DirectX，但我担心它可能不适合为数十甚至数百名用户创建图像的服务器端应用程序。有人对这个有经验么？是否有适合此应用程序的 3D API（最好是免费提供）？从头开始编写软件渲染器会更好吗？

我对使用 DirectX 或 OpenGL 的主要担忧是，它是否能在虚拟化服务器环境中正常运行，以及它是否适用于典型的服务器硬件（我几乎无法控制）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-08-12T15:36:22.173

心理图像的 RealityServer 旨在精确地执行此处描述的操作。产品页面上提供了更多详细信息（包括可下载的开发人员版）。

[RealityServer 文档](http://www.migenius.com/doc/realityserver/latest/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T16:13:36.633

我说你最好的选择是在服务器上运行 Direct3D/OpenGL 应用程序（不停止）。然后让服务器页面向渲染应用程序发送请求，并让渲染应用程序发送 jpg/png/whatever 返回。

*   如果 Direct3D/OpenGL 在硬件中渲染场景的速度很慢，那么任何软件解决方案都会变得更糟
*   通过保持渲染应用程序运行，您可以避免创建/销毁纹理、后备缓冲区、顶点缓冲区等的开销。您可以每秒渲染 100 次简单的场景。

然而，许多服务器没有显卡。Direct3D 在软件中基本上没用（有一个来自 Ms 的模拟设备，但它只对测试效果有好处），从未在软件中尝试过 OpenGL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T13:38:45.507

您可以包装 Pov-ray（此处使用 POSIX 和 Windows 构建）。PHP 示例：

```
<?php
chdir("/tmp");
@unlink("demo.png");
system("~janus/.wine/drive_c/POV-Ray-v3.7-RC6/bin/pvengine-sse2.exe /render demo.pov /exit");
header("Content-type: image/png");
fpassthru($f = fopen("demo.png","r"));
fclose($f);
?> 
```

`demo.pov`[在这里](http://www.csb.yale.edu/userguides/graphics/povray/demo.pov.html)可用。

您可以使用 Jinja2 之类的模板语言来插入您自己的相机坐标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T16:26:15.307

与其说是 API，不如说是渲染器；[波夫雷](http://www.povray.org/)？似乎还存在一个[http](http://columbiegg.com/httpov/)接口......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T16:27:34.600

服务器端渲染只有在场景包含大量对象时才有意义，这样将数据集下载到客户端以进行客户端渲染会太慢，并且预计不会实时渲染。[如果您使用类似jogl](https://jogl.dev.java.net/)和渐进式场景下载（即下载前景对象并渲染，然后根据与视点的距离增量下载对象并重新渲染），客户端渲染并不太难。

如果你真的想做服务器端渲染，你可能想将 Web 服务器部分和渲染部分分开到两台计算机上，每台计算机都针对它们的任务进行了最佳配置（渲染器有 OpenGL 卡，最小的 HD 和足够的 RAM，服务器有很多快速磁盘、大量内存、备份且没有 OpenGL）。我非常怀疑您是否能够在虚拟化服务器上​​进行硬件渲染，因为该服务器可能没有 GPU。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-16T02:55:40.083

Yafaray ( [http://www.yafaray.org/](http://www.yafaray.org/) ) 可能是一般 3D 渲染的首选。它相当快，结果看起来很棒。它可以在其他软件中使用，例如 Blender 3D 建模器。许可证是 LPGL。

如果服务器端软件恰好是用 Python 编写的，并且所需的 3D 场景是科学数据的可视化，请查看 MayaVi2 [http://mayavi.sourceforge.net/](http://mayavi.sourceforge.net/)，或者如果没有，请访问[http： //www.vrplumber.com/py3d.py](http://www.vrplumber.com/py3d.py)

那些建议广受欢迎的 POV-Ray 的人需要意识到它不是提供 API 的库或任何类型的实体。服务器端进程需要编写一个文本场景文件，执行一个新进程以使用正确的选项运行 POV-Ray，并获取生成的图像文件。如果这很容易为特定应用程序设置，并且如果您对 POV-Ray 的专业知识比其他渲染器更多，那就去吧！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-24T01:27:18.613

您还可以查看 Java3D ( [https://java3d.dev.java.net/](https://java3d.dev.java.net/) )，如果您的服务器架构已经基于 Java，这将是一个优雅的解决方案。

如果可以的话，我还建议尝试使用纯软件渲染解决方案——尝试处理大量对 3D 渲染硬件提出并发需求的服务器进程听起来像是很多工作。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-11-04T20:23:07.713

查看[wgpu.net](http://www.wgpu.net)。

我认为这很有帮助。

# emacs - emacs 是否有类似 vi 的“设置编号”之类的东西？

> ID：64293
> 
> 赞同：3
> 
> 时间：2008-09-15T16:10:05.907
> 
> 标签：emacs, editor

emacs 是否有类似于 vi 的“set number”的东西，所以每一行都以它的行号开头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:13:15.587

看看这篇文章。它解释了向 emacs 添加行号的各种方法：

[http://www.emacswiki.org/cgi-bin/wiki/LineNumbers](http://www.emacswiki.org/cgi-bin/wiki/LineNumbers)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T16:14:32.230

尝试将[linum.el](http://www.emacswiki.org/cgi-bin/wiki/LineNumbers)添加到您的 emacs dir / .emacs 文件中。

# .net - 使用 .NET 将 WAV 转换为 WMA

> ID：64303
> 
> 赞同：6
> 
> 时间：2008-09-15T16:11:20.413
> 
> 标签：.net, audio, wma

在 C# 中将 WAV 文件转换为 WMA（反之亦然）的最佳解决方案是什么？实际上，我已经使用 Windows Media Encoder SDK 实现了这一点，但至少可以说，必须将 Windows Media Encoder 与我的应用程序一起分发是很麻烦的。Windows Media Format SDK 的大部分 API 标记为已弃用。看起来我可以从 Windows SDK 中使用一些 DirectX 媒体对象 (DMO)，但是要编写大量的互操作。

我想知道对于可以执行转换的非托管库是否有一个很好的托管包装器。它需要一个允许它作为闭源商业应用程序的一部分分发的许可证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T16:29:35.207

我没有亲自尝试过（所以不确定它是否是“最佳”解决方案），但[http://www.codeproject.com/KB/audio-video/WmaCompressor.aspx](http://www.codeproject.com/KB/audio-video/WmaCompressor.aspx)看起来它应该满足您的要求......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T10:39:58.327

你可以看看[BASS 库](http://www.un4seen.com/)。它具有附加组件，例如 BASSWMA 和 BASSEnc 用于进行编码/解码。它的所有 API 都可以使用[BASS.Net](http://www.un4seen.com/bass.html#apis)包装器从 .NET 访问。

BASS 和 BASS.Net 都可以被许可用于商业用途，并收取合理的费用（每个 100 欧元）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-17T15:34:08.423

如果您愿意编写一些 C++/CLI，那么您不需要太多代码来创建围绕 DirectShow 的包装器来执行此操作。然后可以直接从 C# 程序集中调用它，而无需搞乱互操作。使用 DirectShow 比直接使用 WMF 要容易得多，因为您不必进行任何文件解析或 I/O - 一切都为您完成。作为参考，我有一个商业应用程序中的代码，它可以在不到 100 行 C++ 中对 WMA 与 WAV 文件进行编码/解码，所有这些都包含在一个友好的 .Net 类中。如果你走这条路，明智地使用智能指针会有所帮助......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-09-02T09:32:37.613

首先，看这个：

[http://windowsmedianet.sourceforge.net/](http://windowsmedianet.sourceforge.net/)

然后，搜索 IWMWritter - 以及各种初始化它的方法。您将提供原始 PCM 数据，它会写出 wma 文件。

请标记我的答案以获取更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T17:01:51.520

您可以查看[www.mitov.com](http://www.mitov.com)。那里有一些图书馆可能会有所帮助。我相信，您需要购买一份副本才能运送到商业产品中，但我认为这是一个合理的价格。

# css - 如何将自定义图像垂直居中 跨浏览器的元素？

> ID：64311
> 
> 赞同：4
> 
> 时间：2008-09-15T16:13:15.680
> 
> 标签：css

我正在处理的网站的设计要求在列表中使用自定义图像而不是项目符号。使用图像很好，但我一直难以确保它在所有浏览器中以列表项的文本为中心。有谁知道这个的标准解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-15T16:51:41.843

如果您指的是为列表使用自定义图像项目符号，这是您要使用的代码，它将垂直居中。我在这里假设子弹图像是 12 像素 x 12 像素。

```
ul li {
  background: transparent url(/link/to/custom/bullet.gif) no-repeat 0 50%; 
  padding-left: 18px; 
} 
```

唯一的问题是，有时在长的多行列表项上看起来很奇怪。在这种情况下，最好将背景位置分配给从顶部和左侧略微缩进的位置（即不重复 0 7px）。

干杯，布鲁斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T16:16:58.823

您是否尝试在 CSS 文件中添加以下代码？

```
li
{
   background-image: URL('custom.png');
   background-repeat: no-repeat;
   background-position: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T17:04:28.203

在 li 元素上设置特定的 line-height 并在图像上设置 vertica align .. 为我工作

```
li { height: 150px; line-height: 150px; }
li img { vertical-align: middle; } 
```

和 HTML 代码

```
<li><img src="myimage.jpg" /></li> 
```

如果要将图像调整为自定义大小，请保留比例

```
li img { max-width: 150px; max-height: 150px; width: auto; height: auto; } 
```

# database - 将数据库复制到远程位置

> ID：64314
> 
> 赞同：1
> 
> 时间：2008-09-15T16:13:34.417
> 
> 标签：database, vpn, point-of-sale, file-sharing

我们的 EPOS 系统通过将数据库压缩成 zip 文件来复制数据，然后使用共享目录手动复制到每个收银台。

每个分支都喜欢到主要位置，使用可能有问题的 VPN，但文件共享需要正常工作。

由于我们的数据库系统目前不支持复制，是否有另一种复制数据的解决方案，或者我们应该将我们的软件迁移到另一个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T16:16:15.470

复制是“正确”的方式，所以如果迁移到另一个数据库是一种选择（真的吗？），那是最好的途径。

您可能会考虑使用一个实用程序来查询所有表中的原始数据（在 CSV 中？），并将其发送到文件。那么至少您不必关闭数据库来进行备份。

# optimization - 重构反汇编代码

> ID：64321
> 
> 赞同：2
> 
> 时间：2008-09-15T16:14:18.097
> 
> 标签：optimization, disassembly

您编写了一个函数，然后查看生成的程序集，您会发现它可以改进。

为了便于阅读，您想保留您编写的函数，但您想用自己的程序集替换编译器的程序集。有什么方法可以在您的高级语言功能和新程序集之间建立关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T16:26:18.083

如果您正在查看程序集，那么假设您对如何编译代码有很好的理解是公平的。如果您有这方面的知识，那么有时可以将更改“反向工程”回原始语言，但通常最好不要打扰。

与首次进行这些更改所需的时间和精力相比，您所做的优化可能非常小。我建议你把这种工作留给编译器去喝杯茶。如果更改很重要，并且性能很关键，（例如在嵌入式世界中），那么您可能希望以某种方式将普通代码与汇编混合，但是，在大多数计算机和芯片上，性能通常足以避免这个头痛。

如果你*真的*需要更高的性能，那么优化代码而不是程序集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T16:17:38.540

没有，我想。你已经拒绝了编译器的工作而支持你自己的工作。您不妨扔掉用编译语言编写的函数，因为现在您所拥有的只是该平台上的汇编程序。

我强烈建议不要进行这种优化，因为除非您通过分析和分析确定您确实在发挥作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T16:24:23.220

这取决于您编写函数的语言。某些语言（如 C）非常低级，将每个函数调用或语句转换为特定的汇编语句。如果您确实使用过 C，则可以用内联汇编替换您的函数以提高性能。

其他高级语言可以将每个语句转换为宏例程或汇编端的其他更复杂的调用。某些优化（如尾递归、循环展开等）可以在源代码端轻松实现，但其他优化（如更有效地使用寄存器文件）可能是不可能的（同样，取决于您所使用的语言和编译器）使用）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T16:25:39.990

很难说修改后的程序集与生成未修改版本的源之间有任何关系。它肯定会混淆调试工具：寄存器内容将不再匹配它们应该对应的源变量。

在数据包处理代码中有很多地方我检查了生成的程序集并返回更改原始源代码以改进结果。重新排列源代码可以减少分支的数量，__attribute__ 和编译器参数可以对齐分支点和函数以减少 I$ 未命中。在绝望的情况下，可以使用一点内联汇编，以便仍然可以从源代码编译二进制文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T16:27:01.170

您可以尝试将原始函数分离到它自己的文件中，并提供一个 make 规则来从那里构建汇编程序。然后用改进的版本更新汇编文件，并提供一个生成规则以从汇编文件构建目标文件。然后更改链接规则以包含该目标文件。

如果您只更改汇编文件，它将继续使用。如果您更改了原始的高级语言文件，汇编程序文件将被重新构建，而目标文件则从新的（未改进的）版本构建。

这为您提供了两者之间的关系；您可能希望在高级语言文件的顶部添加警告注释以警告该行为。如果您在此处出错，使用某种形式的 VCS 将使您能够恢复改进的汇编程序文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T16:31:36.777

如果您正在使用 Visual C++ 编写本机编译的应用程序，有两种方法：

1.  使用该`__asm { }`块并在其中编写您的汇编程序。
2.  [在MASM](http://www.microsoft.com/downloads/details.aspx?FamilyID=7a1c9da0-0510-44a2-b042-7ef370530c64&displaylang=en)汇编器中编写您的函数，汇编为 .obj，并将其链接为静态库。在您的 C/C++ 代码中，使用声明声明函数`extern "C"`。

其他 C/C++ 编译器也有类似的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T16:32:38.130

在这种情况下，您通常有两种选择：优化代码或重写编译器。我看不出在哪里断开源和操作之间的链接将成为正确的解决方案。

# unit-testing - 测试驱动开发的缺点？

> ID：64333
> 
> 赞同：198
> 
> 时间：2008-09-15T16:15:50.993
> 
> 标签：unit-testing, testing, tdd

采用测试驱动设计会失去什么？

只列出否定的；不要以否定的形式列出福利。

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2008-09-15T16:58:54.730

如果您想做“真正的” TDD（阅读：首先使用红色、绿色、重构步骤进行测试），那么当您想要测试集成点时，您还必须开始使用模拟/存根。

当您开始使用模拟时，过一段时间，您会想要开始使用依赖注入 (DI) 和控制反转 (IoC) 容器。为此，您需要对所有事物使用接口（它们本身就有很多陷阱）。

归根结底，您必须编写更多的代码，而不是仅仅使用“普通的旧方式”。您不仅需要编写一个客户类，还需要编写一个接口、一个模拟类、一些 IoC 配置和一些测试。

请记住，测试代码也应该得到维护和照顾。测试应该和其他所有东西一样可读，编写好的代码需要时间。

许多开发人员不太了解如何以“正确的方式”完成所有这些工作。但是因为每个人都告诉他们 TDD 是开发软件的唯一真正方法，所以他们只是尽力而为。

这比人们想象的要难得多。通常使用 TDD 完成的项目最终会产生很多没人真正理解的代码。单元测试经常测试错误的东西，错误的方式。没有人同意一个好的测试应该是什么样子，即使是所谓的大师也不同意。

所有这些测试都使得“改变”（与重构相反）系统的行为变得更加困难，而简单的改变变得过于困难和耗时。

如果您阅读 TDD 文献，总会有一些非常好的示例，但通常在现实生活中的应用程序中，您必须有一个用户界面和一个数据库。这就是 TDD 变得非常困难的地方，而且大多数来源都没有提供好的答案。如果他们这样做，它总是涉及更多的抽象：模拟对象、接口编程、MVC/MVP 模式等，这又需要大量的知识，而且……你必须编写更多的代码。

所以要小心......如果你没有一个热情的团队和至少一个经验丰富的开发人员，他们知道如何编写好的测试并且还知道一些关于好的架构的事情，那么在走 TDD 道路之前你真的必须三思而后行.

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2008-09-15T21:29:47.497

几个缺点（我并不是说没有好处——尤其是在编写项目的基础时——最终会节省很多时间）：

*   **大时间投资。**对于简单的情况，你会损失大约 20% 的实际实现，但对于复杂的情况，你会损失更多。
*   **额外的复杂性。**对于复杂的情况，您的测试用例更难计算，我建议在这种情况下尝试使用将在调试版本/测试运行中并行运行的自动参考代码，而不是最简单情况的单元测试。
*   **设计影响。**有时设计在开始时并不清楚，并且随着您的进行而发展 - 这将迫使您重做测试，这将产生很大的时间损失。在这种情况下，我建议您推迟单元测试，直到您对设计有所了解。
*   **持续调整。**对于数据结构和黑盒算法，单元测试将是完美的，但对于倾向于更改、调整或微调的算法，这可能会导致人们可能声称不合理的大量时间投资。因此，当您认为它确实适合系统并且不要强迫设计适合 TDD 时，请使用它。

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2008-09-15T16:22:10.887

当您有大量测试时，更改系统可能需要重新编写部分或全部测试，具体取决于哪些测试因更改而无效。这可能会将相对快速的修改变成非常耗时的修改。

此外，您可能会开始更多地基于 TDD 而不是真正好的设计原则来做出设计决策。虽然您可能有一个非常简单、容易的解决方案，无法按照 TDD 要求的方式进行测试，但您现在有一个更复杂的系统，实际上更容易出错。

* * *

## 回答 #4

> 赞同：56
> 
> 时间：2008-09-15T16:25:34.793

我认为对我来说最大的问题是“进入”所花费的大量时间。我仍然处于 TDD 之旅的开始阶段（如果您有兴趣，请参阅我的[博客](http://cantgrokwontgrok.blogspot.com)以更新我的测试冒险），而且我确实花了**几个小时**才开始。

让你的大脑进入“测试模式”需要很长时间，而编写“可测试代码”本身就是一项技能。

TBH，我恭敬地不同意[Jason Cohen](https://stackoverflow.com/questions/64333/what-is-the-downside-to-test-driven-development#64358)关于公开私有方法的评论，这不是它的意义所在。**在我的新工作方式中，我没有比以前公开更多的方法**。但是，它确实涉及架构更改并允许您“热插拔”代码模块以使其他一切更容易测试。你**不**应该让你的代码内部更容易做到这一点。否则我们又回到原点，一切都是公开的，其中的封装在哪里？

因此，（IMO）简而言之：

*   思考所花费的时间（即实际探索*测试*）。
*   了解如何编写可测试代码所需的新知识。
*   了解使代码可测试所需的架构更改。
*   提高您的“TDD-Coder”技能，同时尝试提高我们光荣的编程工艺所需的所有其他技能:)
*   组织您的代码库以包含测试代码，而不会搞砸您的生产代码。

    * * *

PS：如果您想要正面的链接，我已经提出并回答了几个问题，请查看我的[个人资料](https://stackoverflow.com/users/832/rob-cooper)。

* * *

## 回答 #5

> 赞同：51
> 
> 时间：2008-09-18T04:55:26.067

在我一直在实践测试驱动开发的几年中，我不得不说最大的缺点是：

## 卖给管理层

> TDD 最好成对完成。**一方面，当您知道**如何编写*if/else*语句时，很难抗拒只编写实现的冲动。但是一对会让你保持任务，因为你让他保持任务。可悲的是，许多公司/经理并不认为这是对资源的良好利用。当我有两个功能需要同时完成时，为什么要花钱让两个人编写一个功能？

## 卖给其他开发商

> 有些人只是没有耐心编写单元测试。有些人对他们的工作感到非常自豪。或者，有些人就像看到令人费解的方法/功能从屏幕末端流血一样。TDD 并不适合所有人，但我真的希望如此。对于那些继承代码的可怜人来说，这将使维护东西变得更加容易。

## 与生产代码一起维护测试代码

> 理想情况下，只有当您做出错误的代码决定时，您的测试才会中断。也就是说，您认为系统以一种方式工作，但事实并非如此。通过打破一个测试或一组（小）测试，这实际上是个好消息。您**确切地**知道您的新代码将如何影响系统。但是，如果您的测试写得不好、紧密耦合，或者更糟糕的是，生成了（*咳嗽*VS 测试），那么维护您的测试可以很快成为一个合唱团。并且，在足够多的测试开始产生比他们正在创造的感知价值更多的工作之后，当计划被压缩时（例如，它到了关键时间），测试将是第一个被删除的东西

## 编写测试以覆盖所有内容（100% 代码覆盖率）

> 同样，理想情况下，如果您遵循该方法，您的代码将默认 100% 测试。通常，我想，我最终的代码覆盖率会超过 90%。这通常发生在我有一些模板风格的架构时，并且基础已经过测试，我尝试偷工减料而不测试模板自定义。另外，我发现当我遇到以前没有遇到过的新障碍时，我在测试它时会有一个学习曲线。我承认我会用老式的 skool 方式编写一些代码，但我真的很喜欢 100%。（我想我在学校里是个成绩优异的人，呃 skool）。

然而，我想说的是，TDD 的好处远远超过了一个简单想法的负面影响，即如果您可以实现一组涵盖您的应用程序的良好测试，但不是那么脆弱以至于一个更改会破坏它们，那么您将能够像第一天一样在项目的第 300 天继续添加新功能。这不会发生在所有尝试 TDD 的人身上不工作，期间。

就我个人而言，我发现使用 TDD，我可以编写更简单的代码，我花更少的时间来争论特定的代码解决方案是否可行，并且我不害怕更改任何不符合规定标准的代码行团队。

TDD 是一门很难掌握的学科，我已经学习了几年，而且我仍然一直在学习新的测试技术。这是一个巨大的前期投资，但从长远来看，你的可持续性将比没有自动化单元测试的情况大得多。现在，如果只有我的老板能解决这个问题。

* * *

## 回答 #6

> 赞同：24
> 
> 时间：2008-09-15T18:42:18.787

在您的第一个 TDD 项目中，有两大损失，时间和个人自由

你浪费时间是因为：

*   创建一个全面的、重构的、可维护的单元和验收测试套件会为项目的第一次迭代增加大量时间。从长远来看，这可能会节省时间，但同样也可能是您不必浪费的时间。
*   您需要选择并成为一组核心工具的专家。单元测试工具需要由某种模拟框架来补充，并且两者都需要成为您的自动化构建系统的一部分。您还想选择并生成适当的指标。

你失去了个人自由，因为：

*   TDD 是一种非常有纪律的代码编写方式，它往往会与技能等级最高和最低的人发生冲突。总是以某种方式编写生产代码并让你的工作接受持续的同行评审可能会吓坏你最差和最好的开发人员，甚至导致人员流失。
*   大多数嵌入 TDD 的敏捷方法都要求您不断与客户讨论您打算完成的工作（在这个故事/一天/无论如何）以及权衡是什么。再一次，这不是每个人的一杯茶，无论是在开发人员方面还是在客户方面。

希望这可以帮助

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2008-09-15T16:31:00.427

TDD 要求您在编写代码以通过这些测试之前计划好您的类将如何运行。这既是优点也是缺点。

我发现很难在“真空”中编写测试——在编写任何代码之前。根据我的经验，每当我在编写课程时不可避免地想到一些我在编写初始测试时忘记的东西时，我往往会绊倒我的测试。然后是时候不仅重构我的课程，还重构我的测试。重复此操作三到四次，这可能会令人沮丧。

我更喜欢先编写我的课程草稿，然后编写（并维护）一系列单元测试。在我有了草稿之后，TDD 对我来说效果很好。例如，如果报告了一个错误，我将编写一个测试来利用该错误，然后修复代码以使测试通过。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2008-09-15T16:31:56.137

使用 TDD 进行原型设计可能非常困难 - 当您不确定要采用哪种方式解决问题时，预先编写测试可能很困难（除了非常广泛的测试）。这可能是一种痛苦。

老实说，我不认为绝大多数项目的“核心开发”有任何真正的缺点。它被说得比它应该说的要多得多，通常是那些相信他们的代码足够好以至于他们不需要测试的人（它从来都不是），而那些只是简单地懒得写它们的人。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-09-15T16:19:42.077

好吧，这个拉伸，你需要调试你的测试。此外，编写测试需要一定的时间成本，尽管大多数人都同意这是一项前期投资，可以在应用程序的整个生命周期内节省调试时间和提高稳定性。

不过，我个人遇到的最大问题是提高纪律以实际编写测试。在一个团队中，尤其是一个成熟的团队中，很难让他们相信所花费的时间是值得的。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2008-09-15T17:02:34.580

TDD 的缺点是它通常与“敏捷”方法紧密相关，这**并不**重视系统文档，而是为什么测试“应该”返回一个特定值而不是任何其他值的理解只存在于开发人员的头。

一旦开发人员离开或忘记了测试返回一个特定值而不是其他值的原因，你就完蛋了。如果 TDD 有充分的文档记录并被人类可读的（即尖头发的管理器）文档包围，那么当世界发生变化并且您的应用程序也需要时，可以在 5 年内参考这些文档。

当我谈到文档时，这不是代码中的宣传，这是存在于应用程序之外的官方文字，例如经理、律师和必须更新的可怜的 sap 可以参考的用例和背景信息您在 2011 年的代码。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2008-09-15T17:12:08.677

我遇到过几种 TDD 让我发疯的情况。列举一些：

*   测试用例可维护性：

    如果你在一家大企业，很有可能你不必自己编写测试用例，或者至少大部分测试用例都是在你进入公司时由其他人编写的。应用程序的功能会不时发生变化，如果您没有适当的系统（例如 HP Quality Center）来跟踪它们，您很快就会发疯。

    这也意味着新团队成员需要花费大量时间来了解测试用例的情况。反过来，这可以转化为所需的更多资金。

*   测试自动化复杂度：

    如果您将部分或全部测试用例自动化为机器可运行的测试脚本，则必须确保这些测试脚本与其相应的手动测试用例同步，并与应用程序更改保持一致。

    此外，您将花时间调试可帮助您捕获错误的代码。在我看来，这些 bug 大多来自于测试团队未能在自动化测试脚本中反映应用程序的变化。业务逻辑、GUI 和其他内部内容的更改可能会使您的脚本停止运行或运行不可靠。有时这些变化非常微妙且难以察觉。一旦我的所有脚本都报告失败，因为它们的计算基于表 1 中的信息，而表 1 现在是表 2（因为有人在应用程序代码中交换了表对象的名称）。

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2008-09-15T16:33:42.823

如果您的测试不是很彻底，您可能会因为测试通过而误认为“一切正常”。从理论上讲，如果您的测试通过，则代码可以正常工作；但是如果我们第一次就可以完美地编写代码，我们就不需要测试了。这里的道德是确保在调用完成之前自己进行健全性检查，不要仅仅依赖测试。

在那一点上，如果您的健全性检查发现未测试的内容，请确保返回并为其编写测试。

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2008-09-15T22:49:01.160

最大的问题是那些不知道如何编写适当的单元测试的人。他们编写相互依赖的测试（它们在 Ant 上运行得很好，但是当我从 Eclipse 运行它们时突然失败，只是因为它们以不同的顺序运行）。他们编写的测试并不特别测试任何东西——他们只是调试代码，检查结果，然后将其更改为测试，称之为“test1”。它们扩大了类和方法的范围，只是因为为它们编写单元测试会更容易。单元测试的代码很糟糕，存在所有经典的编程问题（重耦合、500 行长的方法、硬编码值、代码重复），而且维护起来很麻烦。出于某种奇怪的原因，人们将单元测试视为不如“真实”代码的东西，而他们却不 根本不在乎他们的质量。:-(

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-09-15T16:18:23.673

你会浪费很多时间来编写测试。当然，这可能会在项目结束时通过更快地捕获错误来保存。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2009-05-04T19:14:39.233

在测试所有代码之前，你失去了说你“完成”的能力。

你失去了在运行之前编写成百上千行代码的能力。

你失去了通过调试学习的机会。

您失去了发布您不确定的代码的灵活性。

您失去了紧密耦合模块的自由。

您失去了跳过编写低级设计文档的选项。

您失去了每个人都害怕更改的代码所带来的稳定性。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-15T16:20:31.437

我支持关于初始开发时间的答案。如果没有测试的安全性，您也会失去舒适地工作的能力。我也被描述为 TDD 疯子，所以你可能会失去几个朋友；）

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-15T16:20:36.537

它被认为更慢。从长远来看，这不是真的，因为它会拯救你，但你最终会写更多的代码，所以可以说你把时间花在“测试而不是编码”上。这是一个有缺陷的论点，但你确实问了！

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-15T16:45:09.333

重新关注困难的、不可预见的需求是程序员的常客。测试驱动开发迫使您专注于已知的、平凡的需求，并将您的开发限制在已经想象的范围内。

想一想，您最终可能会针对特定的测试用例进行设计，因此您不会有创意并开始思考“如果用户可以做 X、Y 和 Z 那就太酷了”。因此，当该用户开始对潜在的酷需求 X、Y 和 Z 感到兴奋时，您的设计可能过于拘泥于已经指定的测试用例，并且难以调整。

这当然是一把双刃剑。如果您将所有时间都花在设计用户可能想要的每一个可以想象的、可以想象的 X、Y 和 Z 上，那么您将不可避免地永远无法完成任何事情。如果你完成了某件事，任何人（包括你自己）都不可能知道你在代码/设计中做了什么。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-15T18:57:09.843

最大的缺点是，如果你真的想正确地进行 TDD，那么在你成功之前你将不得不失败很多。考虑到有多少软件公司在工作（每 KLOC 美元），你最终会被解雇。即使您的代码更快、更清晰、更易于维护并且错误更少。

如果您在一家按 KLOC（或已实施的要求——即使未测试）向您支付报酬的公司工作，请远离 TDD（或代码审查、结对编程或持续集成等）。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-15T16:23:01.477

为“随机”数据（如 XML 提要和数据库）编写测试可能既困难又耗时（没那么难）。我最近花了一些时间处理天气数据馈送。为此编写测试非常令人困惑，至少因为我对 TDD 没有太多经验。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2008-09-15T16:29:33.787

您将失去具有多种职责的大型课程。您还可能会丢失具有多种职责的大型方法。你可能会失去一些重构的能力，但你也会失去一些重构的需要。

Jason Cohen 说过这样的话：TDD 需要对您的代码进行特定的组织。这可能在架构上是错误的；例如，由于不能在类外部调用私有方法，因此您必须使方法成为非私有方法以使其可测试。

我说这表明缺少抽象——如果私有代码确实需要测试，它可能应该在一个单独的类中。

戴夫·曼

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2008-09-15T16:32:22.047

您必须以不同的方式编写应用程序：一种使它们可测试的方式。一开始你会惊讶于这是多么困难。

有些人觉得在写之前想好要写什么的概念太难了。对于某些人来说，诸如嘲笑之类的概念也很困难。如果旧应用程序不是为测试而设计的，那么它们中的 TDD 可能会非常困难。围绕对 TDD 不友好的框架进行 TDD 也可能是一场斗争。

TDD 是一种技能，因此初级开发人员一开始可能会遇到困难（主要是因为他们没有被教导以这种方式工作）。

总体而言，尽管随着人们变得熟练，缺点会得到解决，并且您最终会抽象出“臭”的代码并拥有更稳定的系统。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-15T19:23:29.360

进入它需要一些时间，并且需要一些时间在项目中开始这样做，但是......当我发现自动化测试可以很快发现的愚蠢错误时，我总是后悔没有使用测试驱动方法。此外，TDD 提高了代码质量。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-09-15T19:29:46.100

*   单元测试需要编写更多代码，因此前期开发成本更高
*   需要维护更多代码
*   需要额外的学习

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-12-12T14:39:19.683

很好的答案。我会添加一些方法来避免 TDD 的阴暗面：

*   我编写了应用程序来进行自己的随机自测。编写特定测试的问题在于，即使您编写了很多测试，它们也只涵盖了您想到的情况。随机测试生成器会发现您没有想到的问题。

*   大量单元测试的整个概念意味着您有可能进入无效状态的组件，例如复杂的数据结构。如果您远离复杂的数据结构，那么需要测试的东西就会少很多。

*   在您的应用程序允许的范围内，避免依赖于通知、事件和副作用的正确顺序的设计。那些很容易被丢弃或打乱，所以他们需要大量的测试。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-15T16:18:46.417

TDD 要求您的代码有特定的组织。这可能效率低下或难以阅读。甚至在架构上是错误的；例如，由于`private`不能在类外部调用方法，因此您必须使方法成为非私有方法以使其可测试，这是错误的。

当代码更改时，您也必须更改测试。通过重构，这可能是很多额外的工作。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-15T17:44:28.677

让我补充一点，如果您将 BDD 原则应用于 TDD 项目，您可以缓解这里列出的一些主要缺点（混乱、误解等）。如果你不熟悉 BDD，你应该阅读 Dan North 的介绍。他提出这个概念是为了回答在工作场所应用 TDD 时出现的一些问题。可以在[此处](http://dannorth.net/introducing-bdd)找到 Dan 对 BDD 的介绍。

我之所以提出这个建议，是因为 BDD 解决了其中一些负面因素并充当了一个空白点。在收集反馈时，您需要考虑这一点。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-15T22:17:42.873

您必须确保您的测试始终是最新的，您开始无视红灯的那一刻就是测试变得毫无意义的那一刻。

您还必须确保测试是全面的，否则一旦出现大错误，您最终说服让您花时间编写更多代码的闷热管理类型会抱怨。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-16T02:22:44.750

教我团队敏捷开发的人不相信计划，你只为最微小的需求写了那么多。

他的座右铭是重构、重构、重构。我开始明白重构意味着“不提前计划”。

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2010-10-13T09:46:00.827

开发时间增加：每种方法都需要测试，如果您有一个具有依赖关系的大型应用程序，则需要准备和清理数据以进行测试。

* * *

## 回答 #31

> 赞同：-6
> 
> 时间：2008-09-15T16:29:12.210

你失去了进行增量更改（代码重构）的能力，并且仍然感到温暖和模糊，因为代码做了它应该做的事情。您几乎失去了用最少的显式依赖来构建代码的自由和轻松的动力。IOW，您将能够在不注意的情况下嵌入许多依赖项。如果您使用 TDD，则在编写测试时依赖项会显示为痛苦/异味。

# javascript - 使用 load() 加载同样使用 jQuery 的页面

> ID：64351
> 
> 赞同：0
> 
> 时间：2008-09-15T16:18:02.050
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-dialog, jquery-ui-plugins

我正在尝试加载一个基本上是对话框（ui.dialog）内的编辑表单的页面。我可以从外部（我正在使用 asp.net）页面加载此页面。

问题是在我的“弹出”表单中，我需要`$(function() {my function here});`在页面加载时使用语法来做一些事情，以及`.fn`使用 ajax 调用为一些动态下拉列表注册一些扩展。

我已经创建了 my`<script type="text/javascript" src="jquery.js">`但我不认为这些被包括在内，而且 my`$(function)`也没有被调用。

这是可能的还是我需要找到另一种方法来完成我需要做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:38:27.913

如果您确实需要通过 AJAX 加载该表单，您可以在 $.ajax 回调本身中执行所有 Javascript 内容。因此，您可以像这样加载弹出表单：

```
$.ajax({
   //...
   success: function(text) {
       // insert text into container
       // the code from $(function() {});
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-02T22:55:08.110

脚本没有运行，因为文档的 ready 事件已经被触发。从内部删除您的代码

```
$() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-08T20:12:32.043

使用 livequery 插件。

它允许您将事件绑定到稍后可能加载的元素：http: [//brandonaaron.net/docs/livequery/](http://brandonaaron.net/docs/livequery/)

# emacs - 如何将文本从 Emacs 复制到 Linux 上的另一个应用程序

> ID：64360
> 
> 赞同：124
> 
> 时间：2008-09-15T16:18:55.560
> 
> 标签：emacs, copy-paste

当我在 Emacs 22.1.1 中剪切（杀死）文本时（在 X 上的自己的窗口中，在 KDE 中，在 Kubuntu 上），我无法将它粘贴（拉动）到任何其他应用程序中。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2008-09-15T18:34:52.643

让我们在这里小心我们的定义

*   *Emacs 副本*是命令`kill-ring-save`（通常绑定到`M-w`）。
*   *系统副本*通常是通过按下（`C-c`或在应用程序窗口中选择“编辑->复制”）获得的。
*   *X 副本*是用鼠标光标“物理地”突出显示文本。
*   *Emacs 粘贴*是命令`yank`（通常绑定到`C-y`）。
*   *系统粘贴*是您通常通过按下（`C-v`或在应用程序窗口中选择“编辑-粘贴”）获得的。
*   *X 粘贴*正在按下“鼠标中键”（通过同时按下鼠标左键和右键来模拟）。

就我而言（在 GNOME 上）：

*   Emacs 和系统副本通常都使用 X 粘贴。
*   X 复制通常与 Emacs 粘贴一起使用。
*   要使系统复制与 Emacs 粘贴一起工作，并且 Emacs 复制与系统粘贴一起工作，您需要添加`(setq x-select-enable-clipboard t)`到您的`.emacs`. 或者试试

    ```
    META-X set-variable RET x-select-enable-clipboard RET t 
    ```

我认为这是非常标准的现代 Unix 行为。

同样重要的是要注意（尽管您说您在单独的窗口中使用 Emacs），当 Emacs 在控制台中运行时，它与系统和 X 剪贴板完全分离：在这种情况下，剪切和粘贴是由终端调解的. 例如，终端窗口中的“编辑->粘贴”应该与您将剪贴板中的文本键入 Emacs 缓冲区一样。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2008-09-15T16:43:40.193

将以下内容插入到您的`.emacs`文件中：

```
(setq x-select-enable-clipboard t) 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-16T05:47:56.893

我把它放在我的 .emacs 中：

```
(setq x-select-enable-clipboard t)
(setq interprogram-paste-function 'x-cut-buffer-or-selection-value) 
```

随后，我从 Emacs 中的任何内容到任何其他 X11 或 Gnome 应用程序来回剪切和粘贴基本上没有问题。

奖励：要让这些事情在 Emacs 中发生而不必重新加载整个 .emacs，请在 .emacs 缓冲区中每个表达式的右括号之后使用光标执行 Cx Ce。

祝你好运！

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-10-27T23:40:41.237

在 Emacs 中复制和粘贴的困难在于您希望它独立于内部 kill/yank 工作，并且您希望它同时在终端和 gui 中工作。终端或 gui 都有现有的强大解决方案，但不是两者兼而有之。安装 xsel（例如`sudo apt-get install xsel`）后，我为复制和粘贴将它们组合在一起：

```
(defun copy-to-clipboard ()
  (interactive)
  (if (display-graphic-p)
      (progn
        (message "Yanked region to x-clipboard!")
        (call-interactively 'clipboard-kill-ring-save)
        )
    (if (region-active-p)
        (progn
          (shell-command-on-region (region-beginning) (region-end) "xsel -i -b")
          (message "Yanked region to clipboard!")
          (deactivate-mark))
      (message "No region active; can't yank to clipboard!")))
  )

(defun paste-from-clipboard ()
  (interactive)
  (if (display-graphic-p)
      (progn
        (clipboard-yank)
        (message "graphics active")
        )
    (insert (shell-command-to-string "xsel -o -b"))
    )
  )

(global-set-key [f8] 'copy-to-clipboard)
(global-set-key [f9] 'paste-from-clipboard) 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-15T16:32:33.873

我假设 emacs 是指 X 下的 Emacs（即不在终端窗口内）。

有两种方法：

1.  （仅适用于 unix 操作系统）用鼠标突出显示所需的文本（这会将其复制到 X 剪贴板），然后单击鼠标中键进行粘贴。
2.  突出显示所需的文本，然后选择“Mx clipboard-kill-ring-save”（请注意，您可以将其绑定到更简单的键）。然后只需在您喜欢的应用程序中“编辑->粘贴”即可。

可用的剪贴板操作：

*   clipboard-kill-ring-save -- 将选择从 Emacs 复制到剪贴板
*   clipboard-kill-region -- 将选择从 Emacs 剪切到剪贴板
*   clipboard-yank -- 从剪贴板粘贴到 Emacs

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-15T16:29:22.630

有[一篇 EmacsWiki 文章](http://www.emacswiki.org/emacs/CopyAndPaste)解释了在 X 下复制和粘贴的一些问题以及如何将其配置为工作。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-03-06T16:05:39.213

这适用`M-w`于 Mac OSX。只需添加到您的**.emacs**文件中。

```
(defun copy-from-osx ()
   (shell-command-to-string "pbpaste"))
(defun paste-to-osx (text &optional push)
   (let ((process-connection-type nil))
      (let ((proc (start-process "pbcopy" "*Messages*" "pbcopy")))
         (process-send-string proc text)
         (process-send-eof proc))))

(setq interprogram-cut-function 'paste-to-osx)
(setq interprogram-paste-function 'copy-from-osx) 
```

来源[https://gist.github.com/the-kenny/267162](https://gist.github.com/the-kenny/267162)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-06-13T19:09:34.380

根据此处的其他答案，我使用以下内容在 Mac 和 Linux 上进行复制`C-x C-w`和`C-x C-y`粘贴（如果有人知道 Windows 的版本，请随时添加）。请注意，在 Linux 上，您必须使用包管理器安装 xsel 和 xclip。

```
;; Commands to interact with the clipboard

(defun osx-copy (beg end)
  (interactive "r")
  (call-process-region beg end  "pbcopy"))

(defun osx-paste ()
  (interactive)
  (if (region-active-p) (delete-region (region-beginning) (region-end)) nil)
  (call-process "pbpaste" nil t nil))

(defun linux-copy (beg end)
  (interactive "r")
  (call-process-region beg end  "xclip" nil nil nil "-selection" "c"))

(defun linux-paste ()
  (interactive)
  (if (region-active-p) (delete-region (region-beginning) (region-end)) nil)
  (call-process "xsel" nil t nil "-b"))

(cond
 ((string-equal system-type "darwin") ; Mac OS X
  (define-key global-map (kbd "C-x C-w") 'osx-copy)
  (define-key global-map (kbd "C-x C-y") 'osx-paste))
 ((string-equal system-type "gnu/linux") ; linux
  (define-key global-map (kbd "C-x C-w") 'linux-copy)
  (define-key global-map (kbd "C-x C-y") 'linux-paste))) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-31T13:27:16.937

下面的代码受@RussellStewart 上面的回答启发，添加了对 x-PRIMARY 和 x-SECONDARY 的支持，替换`region-active-p`为`use-region-p`以覆盖空区域的情况，如果未安装 xsel，则不会静默返回（返回错误消息），并包括一个“剪切”功能（emacs Cy、windows Cx）。

```
(defun my-copy-to-xclipboard(arg)
  (interactive "P")
  (cond
    ((not (use-region-p))
      (message "Nothing to yank to X-clipboard"))
    ((and (not (display-graphic-p))
         (/= 0 (shell-command-on-region
                 (region-beginning) (region-end) "xsel -i -b")))
      (error "Is program `xsel' installed?"))
    (t
      (when (display-graphic-p)
        (call-interactively 'clipboard-kill-ring-save))
      (message "Yanked region to X-clipboard")
      (when arg
        (kill-region  (region-beginning) (region-end)))
      (deactivate-mark))))

(defun my-cut-to-xclipboard()
  (interactive)
  (my-copy-to-xclipboard t))

(defun my-paste-from-xclipboard()
  "Uses shell command `xsel -o' to paste from x-clipboard. With
one prefix arg, pastes from X-PRIMARY, and with two prefix args,
pastes from X-SECONDARY."
  (interactive)
  (if (display-graphic-p)
    (clipboard-yank)
   (let*
     ((opt (prefix-numeric-value current-prefix-arg))
      (opt (cond
       ((=  1 opt) "b")
       ((=  4 opt) "p")
       ((= 16 opt) "s"))))
    (insert (shell-command-to-string (concat "xsel -o -" opt))))))

(global-set-key (kbd "C-c C-w") 'my-cut-to-xclipboard)
(global-set-key (kbd "C-c M-w") 'my-copy-to-xclipboard)
(global-set-key (kbd "C-c C-y") 'my-paste-from-xclipboard) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T16:25:55.683

嗯，你使用的是什么平台和什么版本的 emacs？在 Windows Vista 上使用 GNU Emacs 22.1.1，对我来说效果很好。

如果您有任何机会通过 RealVNC 查看器从 Windows 到 linux 执行此操作，请确保首先在 linux 机器上运行“vncconfig -iconic”.....

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T16:26:49.300

我总是使用快速粘贴——在 emacs 中拖动选择，在目标窗口中点击鼠标中键。

（从对 kate 的引用中，我认为您使用的是 linux 或类似的设备，并且可能以一种或另一种方式在 X 中使用 emacs。）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T16:27:11.390

您可能想要指定您正在使用的平台。是在 linux、unix、macosx、windows、ms-dos 上吗？

我相信对于 Windows，它应该可以工作。对于 MacOSX，它将被添加到 x-windows 剪贴板，这与 macosx 剪贴板不同。对于 Linux，这取决于您对窗口管理器的风格，但我相信 x-windows 在大多数情况下都能很好地处理它。

所以，请具体说明。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2008-09-15T16:26:16.710

我所做的是使用一个内置复制工具的好的终端工具（Windows 上的 PuTTY、Linux 上的 Konsole 或终端）。

在 PuTTY 中，您可以使用鼠标突出显示所需的文本，然后将其粘贴到其他位置。在 PuTTY 窗口中单击鼠标右键将粘贴 Windows 复制/粘贴缓冲区的内容。

在 Linux 上的 Konsole 或终端中，突出显示所需内容，然后按 Shift+Ctrl+C 进行复制，按 Shift+Ctrl+V 进行粘贴。

在 emacs 的 win32 编译中，提取文本确实将其放在复制/粘贴缓冲区中.. 大多数时间。

在 Mac OS X 上，Apple 键的快捷键可以正常工作，因为终端会捕获它们。

没有直接在命令行上执行此操作的方法，因为 shell 不会为每个应用程序维护一个复制/粘贴缓冲区。bash*确实*为自己维护了一个复制/粘贴缓冲区，并且默认情况下，emacs ^k/^y 快捷方式有效。

# python - 如何通过企业代理访问 App Engine？

> ID：64362
> 
> 赞同：1
> 
> 时间：2008-09-15T16:18:59.083
> 
> 标签：python, google-app-engine

我有支持 https 但不支持 HTTP CONNECT 的公司代理（即使在身份验证之后）。它只是给出 403 Forbidden 作为响应，除了 HTTP 或 HTTPS URL。它使用 HTTP 身份验证，而不是 NTLM。有据可查，urllib2 不能通过代理与 https 一起使用。App Engine 尝试使用 urllib2 连接到 https URL 以更新应用程序。

在 *nix 上，urllib2 期望代理使用 env 变量进行设置。

```
export http_proxy="http://mycorporateproxy:8080"
export https_proxy="https://mycorporateproxy:8080" 
```

这是一种解决方法：[http](http://code.activestate.com/recipes/456195/) ://code.activestate.com/recipes/456195/ 。另请参阅[http://code.google.com/p/googleappengine/issues/detail?id=126](http://code.google.com/p/googleappengine/issues/detail?id=126)。这些修复都没有对我有用。他们似乎依赖于支持 HTTP CONNECT 的代理服务器。有人有其他解决方法吗？我确定我不是限制性公司代理背后的唯一人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T15:26:22.080

你的意思是它在允许代理之前使用http basic-auth，然后它是否允许“连接”。

然后您应该能够使用 http-tunnel 或 proxytunnel 对其进行隧道传输

# configuration - Jabber Openfire 服务器 v3.6.0a+ - 如何使用混合身份验证？

> ID：64364
> 
> 赞同：1
> 
> 时间：2008-09-15T16:19:14.637
> 
> 标签：configuration, xmpp, openfire

我正在为我的网站设置 Jabber 服务器。我已经在 openfire 数据库中建立了一些用户帐户，并在它们之间建立了工作 IM。

我现在希望从我的主数据库（`members`表、带有`login`、`password`[纯文本]）和`allowed_to_IM`[0 或 1] 字段）中添加（一些）用户，以允许他们相互通信。然而`Hybrid`，身份验证是 v3.6.0a 中的一项新功能，并且几乎没有文档说明文件中需要哪些配置`openfire.xml`来实现数据库连接（到第二个数据库），以及属性中可能包含的其他内容（这也需要花费很多时间）配置的信息远离 XML 文件）。

我的问题是：*有没有人有一个检查多个数据库的完整示例？*我看到的所有例子似乎都只是片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-16T15:29:26.213

我使用 ldap 和 mysql 拥有它，如果它对你有帮助，我在 openfire.xml 中的设置是：

```
 <connectionProvider>
    <className>org.jivesoftware.database.DefaultConnectionProvider</className>
  </connectionProvider>
  <database>
    <defaultProvider>
      <driver>com.mysql.jdbc.Driver</driver>
      <serverURL>jdbc:mysql://127.0.0.1:3306/openfire</serverURL>
      <username>username</username>
      <password>pass</password>
      <minConnections>5</minConnections>
      <maxConnections>15</maxConnections>
      <connectionTimeout>1.0</connectionTimeout>
    </defaultProvider>
  </database>
  <ldap>
  ldapsetting removed
  </ldap>
  <hybridAuthProvider>
    <primaryProvider>
      <className>org.jivesoftware.openfire.auth.DefaultAuthProvider</className>
    </primaryProvider>
    <secondaryProvider>
      <className>org.jivesoftware.openfire.ldap.LdapAuthProvider</className>
    </secondaryProvider>
  </hybridAuthProvider>
  <provider>
    <auth>
      <className>org.jivesoftware.openfire.auth.HybridAuthProvider</className>
    </auth>
    <vcard>
      <className>org.jivesoftware.openfire.auth.DefaultAuthProvider</className>
    </vcard>
    <user>
      <className>org.jivesoftware.openfire.ldap.LdapUserProvider</className>
    </user>
    <auth>
      <className>org.jivesoftware.openfire.ldap.LdapAuthProvider</className>
    </auth>
    <group>
      <className>org.jivesoftware.openfire.ldap.LdapGroupProvider</className>
    </group>
  </provider> 
```

# apache - 使用 Apache mod_rewrite 从 URL 中删除子目录

> ID：64380
> 
> 赞同：3
> 
> 时间：2008-09-15T16:22:00.467
> 
> 标签：apache, wordpress, mod-rewrite

我正在管理一个 Wordpress 实例，其中 URL 采用以下格式：

```
http://www.example.com/example-category/blog-post-permalink/

```

博客作者在帖子中添加类别的工作不一致，因此虽然其中一些在其 URL 中有合法类别，但至少有一半是“未分类的”。

我可以轻松更改 Wordpress 以呈现没有类别名称的 URL（例如[http://www.example.com/blog-post-permalink/](http://www.example.com/blog-post-permalink/)），但我想创建一个 mod_rewrite 规则来自动重定向任何请求以前的格式到新的、更干净的格式。

考虑到我想尊重对我的 webroot 中真实 WordPress 目录的请求，我该如何使用 mod_rewrite 配方来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:27:59.437

像这样简单的东西：

```
RewriteRule ^/[^/]+/([^/]+)/?$ /$2 [R] 
```

也许会这样做？

那个简单的重定向`/foo/bar/`到`/bar`.

# macos - 如何在 TextMate 中执行 n 次操作（Emacs 和 Vim 都可以轻松完成！）？

> ID：64387
> 
> 赞同：3
> 
> 时间：2008-09-15T16:23:29.010
> 
> 标签：macos, textmate, comments

**Emacs** : `C-U (79) #`» 一个漂亮的 79 个字符长度分隔符

**VIM** : `79-i-#`» 见上文

**[同桌](http://macromates.com/)**：？？？

还是只是假设我们将进行 Ruby 调用或在某处有一个片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:33:52.413

我会创建一个捆绑命令来执行此操作。

您可以将编辑器选择作为脚本的输入，然后将其替换为执行结果。例如，此命令将采用选定的数字并打印字符“#”该次数。

```
python -c "print '#' * $TM_SELECTED_TEXT" 
```

当然这个例子不允许你指定字符，但它让你知道什么是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-18T09:33:48.487

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-11-04T21:26:29.827

受到其他答案的启发。使用以下内容制作一个片段：

```
`python -c "print ':'.join('$TM_SELECTED_TEXT'.split(':')[:-1]) * int('$TM_SELECTED_TEXT'.split(':')[-1])"` 
```

并可选地为其分配一个键序列，例如 CTRL-SHIFT-R

如果你输入`-x:4`，选择它，然后调用代码片段（例如通过它的快捷方式），你会得到“-xxxx”。

您也可以使用`::4`来获取“::::”。

你重复的字符串用单引号括起来，所以要重复'，你必须使用\'。

# visual-studio - Visual Studio 可扩展性：将现有文件夹添加到项目

> ID：64388
> 
> 赞同：5
> 
> 时间：2008-09-15T16:23:46.467
> 
> 标签：visual-studio, add-in, vsx, extensibility

我正在尝试使用 Visual Studio 2008 的可扩展性来编写一个插件，该插件将在解析界面后创建一个包含各种消息的项目文件夹。但是，我在创建/添加文件夹的步骤中遇到了麻烦。我试过使用

```
ProjectItem folder = 
item.ProjectItem.Collection.AddFolder(newDirectoryName, string.Empty); 
```

（项目是我的目标文件，我正在旁边创建一个同名但附加了“消息”的文件夹）但是当文件夹已经存在时它会阻塞（不足为奇）。

如果它已经存在，我尝试将其删除，例如：

```
DirectoryInfo dirInfo = new DirectoryInfo(newDirectoryParent + 
newDirectoryName); 
if (dirInfo.Exists) 
{
    dirInfo.Delete(true);
}

ProjectItem folder = 
item.ProjectItem.Collection.AddFolder(newDirectoryName, string.Empty); 
```

我可以看到该文件夹​​在调试时被删除，但它似乎仍然认为该文件夹仍然存在并且死在一个文件夹已经存在异常。

有任何想法吗？？？

谢谢。

AK

....也许答案在于删除后以编程方式刷新项目？如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2011-04-07T19:25:59.057

```
ProjectItem pi = null;
var dir = Path.Combine(
      project.Properties.Item("LocalPath").Value.ToString(), SubdirectoryName);
if (Directory.Exists(dir))
    pi = target.ProjectItems.AddFromDirectory(dir);
else
    pi = target.ProjectItems.AddFolder(dir); 
```

[ProjectItems.AddFromDirectory](http://msdn.microsoft.com/en-us/library/envdte.projectitems.addfromdirectory%28v=vs.80%29.aspx)会将目录和目录下的所有内容添加到项目中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T17:25:52.823

是的，就是这样……

```
DirectoryInfo dirInfo = new DirectoryInfo(newDirectoryParent + newDirectoryName);

if (dirInfo.Exists)
{
    dirInfo.Delete(true);
    item.DTE.ExecuteCommand("View.Refresh", string.Empty);
}

ProjectItem folder = item.ProjectItem.Collection.AddFolder(newDirectoryName, string.Empty); 
```

如果有更优雅的方式来做到这一点，将不胜感激......

谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-06-28T20:54:38.227

这是我的方法：

```
//Getting the current project
private DTE2 _applicationObject;
System.Array projs = (System.Array)_applicationObject.ActiveSolutionProjects;
Project proy=(Project)projs.GetValue(0);
//Getting the path
string path=proy.FullName.Substring(0,proy.FullName.LastIndexOf('\\'));
//Valitating if the path exists
bool existsDirectory= Directory.Exists(path + "\\Directory");
//Deleting and creating the Directory
if (existeClasses)
   Directory.Delete(path + "\\Directory", true);
Directory.CreateDirectory(path + "\\Directory");
//Including in the project
proy.ProjectItems.AddFromDirectory(path + "\\Directory"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-07-30T20:59:06.240

这是我想到的一个想法，因为我使用 NAnt 已经很长时间了，并且认为它可能会起作用。

在文本编辑器中打开 .csproj 文件并添加目录，如下所示：

```
<ItemGroup>
   <compile include="\path\rootFolderToInclude\**\*.cs" />
</ItemGroup> 
```

如果“ItemGroup”已经存在，那很好。只需将其添加到现有的。Visual Studio 不会真正知道如何编辑此条目，但它会扫描整个目录。

编辑为您想要的任何内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-15T15:16:26.513

我正在为 Visual Studio 2019 开发一个扩展并且遇到了类似的问题。下一页中提出的问题帮助了我：

[https://social.msdn.microsoft.com/Forums/en-US/f4a4f73b-3e13-40bf-99df-9c1bba8fe44e/include-existing-folder-path-as-project-item?forum=vsx](https://social.msdn.microsoft.com/Forums/en-US/f4a4f73b-3e13-40bf-99df-9c1bba8fe44e/include-existing-folder-path-as-project-item?forum=vsx)

如果该文件夹实际上不存在，您可以使用`AddFolder(folderName)`. 但是，如果该文件夹在物理上存在时不包含在项目中，则需要提供该文件夹的完整系统路径。( `AddFolder(fullPath)`)

# java - Java中的游戏编程？

> ID：64392
> 
> 赞同：18
> 
> 时间：2008-09-15T16:23:52.100
> 
> 标签：java

我正在研究 Java 中的游戏编程，看看它是否可行。在谷歌上搜索它时，我发现了一些对 Java2D、Project Darkstar（Sun 的 MMO 服务器）和一些关于 Java 游戏编程的书籍的旧参考。但是很多信息似乎已经有好几年了。

所以我要问的问题是，是否有人在 Java SE 1.5 或更高版本中创建任何游戏？

如果是这样，使用了哪些框架，是否有可用的最佳实践或库？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2008-09-15T16:39:34.650

[有一个名为 jMonkey ( http://www.jmonkeyengine.com](http://www.jmonkeyengine.com) )的优秀开源 3d 引擎，它被用于一些商业项目以及爱好开发者……还有一个较低级别的 lwjgl 库，其中 jmonkeyengine建立在它之上的是一组 apis 来包装 opengl 以及提供其他游戏特定的库......

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-10-20T19:22:47.960

[http://www.javagaming.org/](http://www.javagaming.org/)是获取最新信息的好来源。

另一个尚未提及的框架是[Xith3D](http://xith.org/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T18:20:19.713

我没有直接做过任何游戏编程，只是做了一些场景演示编码，发现[JOGL](https://jogl.dev.java.net/)确实是一个非常好的框架。它是 Java OpenGL，因此它具有丰富的 3D 功能，我相信也有一些开源图形引擎为它完成了。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-05-03T02:56:33.837

另请查看[Pulp core](http://www.pulp.io/) - 处理 Java 游戏面临的最常见问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-17T20:59:37.083

尽管名字很奇怪（很确定他说的是软饮料……），但这个网站有大量的资源和示例游戏，包括 2D 和 3D。[可乐和代码](http://www.cokeandcode.com/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-06-12T17:24:44.640

作为更新，几个 JMonkeyEngine 人员已经分叉了该项目以创建[Ardor3d](http://www.ardor3d.com)，最近发布了一个新版本，因此它仍在积极开发中。Darkstar 项目也仍在积极开发中。事实上， [DarkMMO](http://code.google.com/p/darkmmo/)是一个开源示例 Darkstar 游戏，目前正在[重构](http://www.projectdarkstar.com/component/option,com_smf/Itemid,120/topic,990.msg6781#new)以使用最新版本的 Darkstar 和 Ardor3d。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-15T20:25:29.600

GTGE ( [www.goldenstudios.or.id](http://www.goldenstudios.or.id) ) 是一个优秀的 2D Java 游戏库，带有教程和广泛的 API。它的最新版本已经开源，可以在[gtge.googlecode.com](http://gtge.googlecode.com)下载、浏览等源代码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-13T12:28:39.480

正如本主题中所有其他人所提到的，有很多优秀的库/引擎可用于用 Java 构建游戏。

Java 中的游戏编程绝对是可行的。但请记住，与任何其他语言一样，获得实时性能总是需要一些努力。我写了一篇关于我在 3D 突破游戏“Caromble!”中使用 Java 的经验的小文章。这主要是关于我们必须采取的步骤才能让我们的游戏顺利运行。

[http://www.caromble.com/2013/05/java-game-programming/](http://www.caromble.com/2013/05/java-game-programming/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-03-15T13:48:57.320

我[列出了一堆](http://www.java-gaming.org/index.php/topic,23958.msg199708.html#msg199708)应该有帮助的教程

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-06-21T23:55:48.200

我喜欢在空闲时间编写一些游戏代码。我使用了一个名为 slick2d 的库，它使后端编程变得更加容易。例如，您可以从 Slick2d Wiki 复制/粘贴示例“主”类文件，并且您的游戏循环以及 Update() 和 Render() 方法都准备就绪。

Slick 2d 基于 LWGJL 并使用它来加载图像并使用 OpenGL 做其他很酷的事情。还有很多有用的主题：[http ://www.java-gaming.org/](http://www.java-gaming.org/)

# plone - 在 Plone 3 中存储大文件的最佳方式是什么？

> ID：64397
> 
> 赞同：6
> 
> 时间：2008-09-15T16:24:18.090
> 
> 标签：plone

我想在 Plone 站点中提供大量大文件。我所说的大文件是指大约 5MB（音乐）和很多文件。我已经直接对 ZODB 进行了操作，这不是一个好主意。我正在运行 Plone 3.1.1 和 Zope 2.10.6。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-15T19:10:52.960

Zodb blob 支持是处理大文件的最佳、最集成的方式。大文件透明地存储在文件系统中，而不是 zodb 对象数据库中。在这种情况下，“透明”意味着您在初始配置后的实际编程工作中不会注意到它。

blob 功能已被向后移植到当前（2008 年中）zope 版本，可以在 plone 3 中使用。为此，请在您的项目中使用 plone.app.blob：http: [//plone.org/products/plone.app.blob](http://plone.org/products/plone.app.blob)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T00:27:37.473

是的，此时您不应该使用除 ZODB BLOB 支持之外的任何东西。它适用于 3.x 系列版本。

[工单#6805 中的更多信息](http://dev.plone.org/plone/ticket/6805 "票 6805")

— Alexander Limi，Plone 联合创始人

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-17T01:47:44.003

澄清，据我所知：

*   来自 PLIP（Plone 改进提案）中的各种候选技术，plone.app.blob 是获得广泛支持的主要竞争者

    -- 对于特殊的用例，我们有时会发现推荐的 BLOB 以外的东西

*   4.0 目前是 plone.app.blob 成为 Plone 核心产品的最有可能的里程碑

*   同时 plone.app.blob 是当前 3.x 版本的 Plone 的推荐附加产品

    -- 用于建议类 BLOB 技术的用例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T17:53:00.043

您可能已经知道，对此的长期解决方案应该是 ZODB BLOB 支持。[Ticket 6805](http://dev.plone.org/plone/ticket/6805)可能是这方面最权威的来源。不幸的是，里程碑设置为 4.0，在旧版本的生产环境中运行它可能不是一个好的解决方案。

从历史上看，存在许多用于在外部存储文件的 Plone 产品，仅在 ZODB 中保留元数据。我已经尝试了其中的几个，根据我的经验，没有一个可以很好地与当前的 Plone/Zope 版本配合使用。不过，不要相信我，去年左右我没有尝试过任何这种类型的产品。

就个人而言，我会寻求一个尽可能简单的解决方案，并且不会过多地涉及 Plone。将音乐文件存储在磁盘上，直接从 apache/您使用的任何 Web 服务器提供它们，仅将元数据保存在 Plone 中 - 在您自己编写的产品中，将为您提供具有良好性能的强大解决方案。也就是说，您的产品应该生成指向 Web 服务器上音乐文件可用路径的链接。

如果您需要授权下载音乐文件并假设您在 Zope 前运行 lighthttpd 或 apache，那么查看基于 X-sendfile 的解决方案可能是最佳选择。使用 X-sendfile，您可以将文件保存在磁盘上，并在应将音乐文件发送到客户端浏览器时向响应中添加标头 (X-sendfile)。Web 服务器将选择此标头并将文件发送到客户端，而不涉及 Plone。

一些指示：

*   [http://tn123.ath.cx/mod_xsendfile/（apache](http://tn123.ath.cx/mod_xsendfile/)模块）

*   [http://john.guen.in/past/2007/4/17/send_files_faster_with_xsendfile/（Ruby](http://john.guen.in/past/2007/4/17/send_files_faster_with_xsendfile/)示例）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-17T01:42:53.407

我在一些低流量站点上安装了 plone.app.blob，并且可以在同一实例中为我更繁忙的生产站点安装（如果你愿意，可以安装）。

有 4.0 里程碑，但我肯定会在 3.4 左右回顾（并且可能在我的生产站点上单击 plone.app.blob 的安装按钮）。

几个参考：

[http://n2.nabble.com/PLIPs-I%27d-love-to-see-for-Plone-3.3-tp1123218p1130015.html](http://n2.nabble.com/PLIPs-I%27d-love-to-see-for-Plone-3.3-tp1123218p1130015.html)

[http://dev.plone.org/plone/ticket/8629#comment:2](http://dev.plone.org/plone/ticket/8629#comment:2)突出显示

> ... 3.4，我们可能会在 plone.recipe.zeoserver 和 zope2instance 中添加 blob 文件存储规范支持。这将为我们提供安装人员需要进行的任何所有者/权限修复的标准位置。

在上下文中：我正在*粗略*地使用 plone.app.blob 和一个非常混合的其他附加产品，这些附加产品具有基于标准和实验性安装程序的 Plone 版本 3.1.7 和 3.2a1。在这些环境中，如果我*不*带孩子手套处理事情，Plone sies 表现得非常好，当（如预期的那样）实验导致奇怪时，来自社区的支持是有节奏的和适当的。

# java - 如何摆脱 Intellij JSP 中 fmt:message 标记中的“无法解析属性键”

> ID：64408
> 
> 赞同：0
> 
> 时间：2008-09-15T16:26:03.793
> 
> 标签：java, jsp, ide, intellij-idea, jstl

这个已经困扰了我一段时间了。

有没有办法阻止 Intellj IDEA 报告标签中缺少的键？

我的消息未存储在属性文件中，因此该问题不适用于我的情况。

我正在使用 IntelliJ IDEA 7.0.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-10-05T13:08:55.037

我[将此作为问题](http://jetbrains.net/jira/browse/IDEADEV-30407)报告给 JetBrains，根据他们的问题报告，这已在“Diana 8858”中修复。AFICT 这意味着这将在 IDEA 8.0 中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T18:20:13.380

恕我直言，您可以禁用 IDEA 中的每个提示或错误标记。请告诉我们您使用的 IDEA 版本。

# javascript - 我怎样才能完全用 JavaScript 编写一个 iPhone 应用程序而不只是一个 Web 应用程序？

> ID：64420
> 
> 赞同：85
> 
> 时间：2008-09-15T16:27:33.213
> 
> 标签：javascript, ios, objective-c

我不想花时间学习 Obj-C。我花了 7 年多的时间做 Web 应用程序编程。难道不应该有一种方法可以使用 WebView 并用 javascript 编写整个应用程序，直接从项目的资源中提取文件吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2008-09-15T17:07:33.133

我搜索了一圈后找到了答案。这是我所做的：

1.  在 XCode 中创建一个新项目。我想我使用了基于视图的应用程序。

2.  将 WebView 对象拖到您的界面上并调整大小。

3.  在您的 WebViewController.m （或类似名称的文件，取决于您的视图的名称）内部，在 viewDidLoad 方法中：

    ```
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"html"];  
    NSData *htmlData = [NSData dataWithContentsOfFile:filePath];  
    如果（htmlData）{  
      NSBundle *bundle = [NSBundle mainBundle];
      NSString *path = [捆绑包路径];
      NSString *fullPath = [NSBundle pathForResource:@"index" ofType:@"html" inDirectory:path];
      [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:fullPath]]];
    }
    ```

4.  现在，您作为资源添加到项目的任何文件都可以在您的 Web 应用程序中使用。我有一个 index.html 文件，包括 javascript 和 css 以及没有问题的图像文件。到目前为止，我发现的唯一限制是我无法创建新文件夹，因此所有文件都弄乱了资源文件夹。

5.  技巧：确保您已将文件添加为 XCode 中的资源，否则该文件将不可用。我一直在 XCode 中添加一个空文件，然后将我的文件拖到查找器的顶部。这一直对我有用。

注意：我意识到 Obj-C 一定不难学。但是由于我已经在 J​​S 中存在这个应用程序，并且我知道它可以在 Safari 中运行，这对我来说是一个更快的开发周期。总有一天我肯定会崩溃并学习 Obj-C。

我发现其他一些有用的资源：

从 javascript 调用 Obj-C：从 javascript[调用objective-c](http://tetontech.wordpress.com/2008/08/14/calling-objective-c-from-javascript-in-an-iphone-uiwebview/)

从 Obj-C 调用 javascript：[网络黑客的 iphone 应用程序开发](http://dominiek.com/articles/2008/7/19/iphone-app-development-for-web-hackers)

从应用程序包中读取文件：[uiwebview](http://iphoneincubator.com/blog/tag/uiwebview)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2008-10-22T22:47:56.390

查看[http://www.phonegap.com](http://www.phonegap.com)上的 PhoneGap，他们声称它允许您将 JavaScript、HTML 和 CSS 嵌入到原生 iPhone 应用程序中。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-21T23:29:06.930

对于那些在 iPhone 2.1（可能是 2.0）上执行此操作的用户，您不需要为本地数据存储创建任何特殊服务。MobileSafari 似乎支持 HTML5/WHATWG SQL 数据库 API。这与最新版本的桌面 Safari 和 Firefox 支持的 API 相同。

如果您使用像 Dojo 或 ExtJS 这样提供存储抽象的工具包，您的代码应该可以在几乎任何现代浏览器上运行，包括 MobileSafari。

要进行测试，请在 iPhone 上打开[http://robertsanders.name/dev/stackoverflow/html5.html 。](http://robertsanders.name/dev/stackoverflow/html5.html)

如果您打开该页面，然后查看越狱 iPhone 的文件系统，您应该会在 /private/var/mobile/Library/WebKit/Databases/ 中的某处看到一个数据库。那里甚至还有一个网络打开的数据库目录。

> root# sqlite3 /private/var/mobile/Library/WebKit/Databases/Databases.db SQLite 版本 3.5.9 输入“.help”获取说明
> 
> sqlite> .databases seq 名称文件
> 
> * * *
> 
> 0 主 /private/var/mobile/Library/WebKit/Databases/Databases.db
> 
> sqlite> .tables
> 
> 数据库起源
> 
> sqlite> 从数据库中选择 *；
> 
> 1|http_robertsanders.name_0|NoteTest|数据库|API 示例|20000|0000000000000001.db
> 
> sqlite> 从起源中选择 *；
> 
> http_robertsanders.name_0|5242880

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-10-24T04:12:21.040

您可以在不知道任何 obj-C 的情况下创建应用程序。QuickConnectiPhone 框架允许您执行此操作。查看[http://tetontech.wordpress.com](http://tetontech.wordpress.com)以了解如何使用它以及执行您所要求的其他方式。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T16:35:17.703

您应该拥有用 Objective C 编写的本机包装器。该包装器可能包含创建 WebView 并将其导航到 Internet 中的给定地址（您的应用程序所在的位置）所需的几行代码（例如 10 行）。但在这种情况下，您的应用程序应该是一个功能齐全的 Web 应用程序（我的意思是，不仅使用 JavaScript，还使用一些 HTML 进行标记）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-15T16:35:42.477

我遇到了同样的问题。我已经有一个完全用 Javascript 编写的游戏。我很想制作一个对 iPhone 友好的版本，但 Obj-C 是一种矫枉过正。我最终做的是使用 WebView 指向 iphone 应用程序的特殊 url。经过考虑，我想我可以将这些文件移动到应用程序目录并在本地运行它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-15T16:36:41.600

目前的苹果 API 没有办法做到这一点。您最接近的选择是编写一个嵌入 webkit 浏览器的简单原生 iPhone 应用程序。这将让您在本地浏览您的 xhtml/js 应用程序。

如果你想存储数据，你需要更进一步，包括一个轻量级的 http 服务器，它为你的应用程序提供服务，并提供存储和检索数据的调用。对您来说可能不是一个理想的解决方案，但可能比完整的 Obj-C 应用程序工作量少。

作为旁注，Obj-C 相当容易学习。SDK 中有大量示例。社区很强大，会毫不犹豫地回答提出的问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-06-16T20:32:24.260

我一直在使用phonegap，它似乎对我来说效果最好。我将在一周左右的时间内发布我的经验，并附上我的应用程序的链接。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-04-05T18:09:58.990

[Titanium Mobile](http://www.appcelerator.com/products/titanium-mobile-application-development/)也是一个选项 - 它允许您编写被翻译成 Objective-C 的 JavaScript。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-12-04T20:52:20.010

至少还有 2 个人提到了 phonegap，但我想我也会发布这个并提到 Apple 已经批准了 phonegap 框架。因此，现在您不会因为您使用 phonegap 而被 Apple 拒绝您的应用程序。

[关于 phonegap 和 Apple 的博客文章 - http://blogs.nitobi.com/jesse/2009/11/20/phonegapp-store-approval/](http://blogs.nitobi.com/jesse/2009/11/20/phonegapp-store-approval/)

[电话差距首页](http://phonegap.com/)

# python - 最好的 Python 支持的服务器/客户端协议？

> ID：64426
> 
> 赞同：9
> 
> 时间：2008-09-15T16:27:47.177
> 
> 标签：python, client

我正在寻找 Python 支持的良好服务器/客户端协议，用于在一台服务器和许多客户端之间进行数据请求/文件传输。安全性也是一个问题——因此安全登录将是一个加分项。我一直在研究 XML-RPC，但它看起来是一个相当古老的（并且可能这些天未使用？）协议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-16T20:23:37.567

如果您希望进行文件传输，XMLRPC 可能是一个糟糕的选择。这将要求您将所有数据编码为 XML（并将其加载到内存中）。

“数据请求”和“文件传输”对我来说听起来很像普通的旧 HTTP，但是您对问题的陈述并没有明确您的要求。请求中需要编码哪些信息？[像“ http://yourserver.example.com/service/request?color=yellow&flavor=banana](http://yourserver.example.com/service/request?color=yellow&flavor=banana) ”这样的 URL是否足够好？

Python中有很多HTTP客户端和服务器，没有一个特别好，但我确信所有这些都可以完成基本文件传输的工作。您可以使用“普通”网络方式进行安全保护，即使用 HTTPS 和密码，这可能就足够了。

如果你想要双向通信，那么 HTTP 就会失败，而像 Twisted 的[透视代理 (PB)](http://twistedmatrix.com/projects/core/documentation/howto/pb-intro.html)或[异步消息传递协议 (AMP)](http://twistedmatrix.com/documents/8.1.0/api/twisted.protocols.amp.html)这样的协议可能更适合你。Twisted 肯定会很好地支持这些协议。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-15T15:16:25.433

[ProtocolBuffers](http://code.google.com/p/protobuf/)由 Google 发布，作为一种以非常紧凑有效的方式序列化数据的方式。它们支持 C++、Java 和 Python。我还没有使用它，但是查看源代码，似乎每种语言都有 RPC 客户端和服务器。

我个人在几个项目中使用过 XML-RPC，它总是能达到我的预期。我通常在 C++、Java 和 Python 之间徘徊。我经常在 Python 中使用 libxmlrpc ，因为它易于记忆和交互式输入，但它实际上比替代[pyxmlrpc](http://sourceforge.net/projects/py-xmlrpc/)慢得多。

PyAMF 主要用于带有 Flash 客户端的 RPC，但它也是一种值得研究的紧凑型 RPC 格式。

当两端都有 Python 时，我认为没有什么能比[Pyro](http://pyro.sourceforge.net/) （Python 远程对象）更胜一筹。Pyro 甚至有一个“名称服务器”，可以让服务宣布它们对网络的可用性。客户端使用名称服务器来查找所需的服务，无论它们在特定时刻处于活动状态。这为您提供了免费的冗余，并且能够将服务从一台机器移动到另一台机器而无需任何停机时间。

为了安全起见，我会通过 SSH 进行隧道传输，或者在连接级别使用 TLS 或 SSL。当然，所有这些选项本质上都是一样的，只是设置有各种困难。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T16:33:05.447

如果您的所有服务器/客户端都将使用 Python，那么[Pyro （Python 远程对象）相当聪明。](http://pyro.sf.net)我经常使用[XMPP](http://www.xmpp.org)，因为我正在与并不总是 Python 的主机进行通信。XMPP 也很容易扩展。

有一个用于 python 的优秀 XMPP 库，称为[PyXMPP](http://pyxmpp.jajcus.net)，它是最新的，并且不依赖于 Twisted。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-02T12:10:07.987

我建议您查看 1\. XMLRPC 2\. JSONRPC 3\. SOAP 4\. REST/ATOM XMLRPC 是一个有效的选择。别担心它太旧了。那不是问题。它是如此简单，与原始规范相比几乎不需要更改。优点是，在我知道的每一种编程语言中，都有一个供客户端编写的库。当然对于 python 而言。我让它与 mod_python 一起工作，完全没有问题。它的最大问题是它的冗长。对于简单的值，有很多 XML 开销。您可以无缘无故地对其进行 gzip，但是使用 Fiddler 之类的工具会失去一些调试能力。

我个人的偏好是 JSONRPC。它具有 XMLRPC 的所有优点并且非常紧凑。此外，Javascript 客户端可以“评估”它，因此不需要解析。它们中的大多数都是为标准的 1.0 版构建的。我已经看到了各种改进它的尝试，称为 1.1 1.2 和 2.0，但它们并不是建立在另一个之上，而且据我所知，它们还没有得到广泛的支持。2.0 看起来最好，但我现在仍会坚持使用 1.0（2008 年 10 月）

第三个候选者是 REST/ATOM。REST 是一个原则，而 ATOM 是您在 POST、PUT 请求和 GET 响应需要时传输大量数据的方式。对于它的一个非常好的实现，请查看 Google 的 API GData。真真好。

SOAP 很旧，很多库/语言都支持它。IT 繁重而复杂，但如果您的主要客户是 .NET 或 Java，则可能值得费心。Visual Studio 将导入您的 WSDL 文件并创建一个包装器，对于 C# 程序员来说，它确实看起来像本地程序集。

所有这一切的好处是，如果您正确构建解决方案，现有的 Python 库将允许您支持多个库，而几乎没有开销。XMLRPC 和 JSONRPC 是特别好的搭配。

关于身份验证。XMLRPC 和 JSONRPC 不需要定义一个。它与序列化无关。因此，您可以使用其中任何一种来实现基本身份验证、摘要式身份验证或您自己的身份验证。我已经看到了几个用于 python 的客户端摘要身份验证示例，但还没有看到基于服务器的示例。如果您使用 Apache，则可能不需要，而是使用 mod_auth_digest Apache 模块。这取决于您的应用程序的性质

运输安全。它显然是 SSL (HTTPS)。我目前不记得 XMLRPC 是如何处理的，但是对于我拥有的 JSONRPC 实现来说，这很简单——您只需将 URL 中的 http 更改为 https，它就会通过启用 SSL 的传输。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T16:34:53.507

[HTTP](http://www.ietf.org/rfc/rfc2616.txt)似乎符合您的要求，并且在 Python 中得到了很好的支持。

[Twisted](http://twistedmatrix.com/)非常适合在 Python 中进行严重的异步网络编程，但它的学习曲线很陡峭，因此除非您知道您的系统需要处理大量并发，否则可能值得使用更简单的东西。

首先，我建议使用[`urllib`](http://www.python.org/doc/lib/module-urllib2.html)客户端和[Apache 后面的 WSGI 服务](http://code.google.com/p/modwsgi/)作为服务器。可以将 Apache 设置为相当简单地处理 HTTPS。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-02T21:34:54.167

SSH 是文件传输和远程控制的不错选择，尤其是在您关心安全登录的情况下。大多数 Linux 和 Solaris 服务器已经运行 SSH 服务进行管理，所以如果你的 Python 程序使用 ssh，那么你不需要在远程机器上打开任何额外的端口或服务。

[OpenSSH](http://www.openssh.com/)是标准且可移植的 SSH 客户端和服务器，可以通过 Python 的子进程使用。如果你想要更多的灵活性，Twisted 包括[Twisted Conch](http://twistedmatrix.com/trac/wiki/TwistedConch)，它是一个 SSH 客户端和服务器实现，它在 Linux 和 Windows 上提供对 SSH 堆栈的灵活可编程控制。我在生产中使用两者。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T16:34:45.443

我会使用 http 并从了解 Python[库](http://docs.python.org/lib/asyncore-example.html)提供的内容开始。

然后我会转向更具工业实力的[Twisted](http://wiki.python.org/moin/Twisted-Examples)库。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-02T12:17:54.790

不需要使用 HTTP（实际上，在某些方面，HTTP 通常对 RPC 不利），如果您谈论的是 python 客户端与 python 服务器通信，则不需要使用基于标准的协议。

使用 Python 特定的 RPC 库，例如 Pyro，或 Twisted 提供的 (Twisted.spread)。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T16:58:29.503

XMLRPC 上手非常简单，在我之前的工作中，我们将它广泛用于分布式系统中的节点内通信。只要您跟踪 None 值不能轻易转移的事实，它就很容易使用，并且包含在 Python 的标准库中。

通过 https 运行它并向所有调用添加用户名/密码参数，您将获得简单的安全性。不过，不确定在 Python 中验证服务器证书有多容易。

但是，如果您要传输大量数据，则编码为 XML 可能会成为瓶颈，因此在 https 上使用受[REST](http://sv.wikipedia.org/wiki/REST)启发的架构可能与 xmlrpclib 一样好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-11T13:21:44.487

[Facebook 的节俭](http://incubator.apache.org/thrift/)项目可能是一个很好的答案。它使用轻量级协议来传递对象，并允许您使用任何您想要的语言。尽管我相信没有安全性，但它可能会因安全而下降。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-09-15T16:45:13.577

在 RPC 领域，Json-RPC 将带来比 xml-rpc 有很大的性能提升：http: [//json-rpc.org/wiki/python-json-rpc](http://json-rpc.org/wiki/python-json-rpc)

# coldfusion - 如何以编程方式清理 ColdFusion cfquery 参数？

> ID：64432
> 
> 赞同：3
> 
> 时间：2008-09-15T16:28:08.157
> 
> 标签：coldfusion, sql-injection, cfquery, cfqueryparam

我继承了一个大型的旧版 ColdFusion 应用程序。有数百个 <cfquery>some sql here #variable#</cfquery> 语句需要沿以下行参数化： <cfquery> some sql here <cfqueryparam value="#variable#"/> </cfquery>

如何以编程方式添加参数化？

我曾考虑过编写一些正则表达式或 sed/awk'y 之类的解决方案，但似乎某个地方的某个人已经解决了这样的问题。自动推断 sql 类型可获得奖励积分。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T16:41:45.737

有一个查询参数扫描器可以在 RIAForge 上为您找到它们：http: [//qpscanner.riaforge.org/](http://qpscanner.riaforge.org/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T17:47:53.783

这里引用了一个脚本：[http](http://www.webapper.net/index.cfm/2008/7/22/ColdFusion-SQL-Injection) ://www.webapper.net/index.cfm/2008/7/22/ColdFusion-SQL-Injection 将为您完成大部分繁重的工作。您所要做的就是检查查询并确保语法能够正确解析。

没有理由不使用 CFQueryParam，除了它更安全之外，它是性能提升和处理基于字符的列类型中引用值的最佳方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-16T22:52:37.337

请记住，您可能无法使用 <cfqueryparam> 解决所有问题。

我已经看到了许多在查询字符串中传递按字段名称排序的示例，这是一个稍微棘手的问题，因为您需要以更“手动”的方式进行验证。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-16T14:16:52.443

```
<cf_inputFilter
            scopes = "FORM,COOKIE,URL"
            chars = "<,>,!,&,|,%,=,(,),',{,}"
            tags="script,embed,applet,object,HTML"> 
```

我们用它来对抗最近的 SQL 注入攻击。我们将它添加到我们网站的 Application.cfm 文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T15:38:56.410

我怀疑是否有一种解决方案可以完全满足您的需求。我看到的唯一选择是编写您自己的递归搜索，为您构建报告或使用人们上面列出的应用程序/脚本之一。基本上，您将不得不编辑每个页面或批准所有自动更改。

# virtualization - 将 Parallels VM 转换为 Virtual PC 2007 VM

> ID：64434
> 
> 赞同：2
> 
> 时间：2008-09-15T16:28:23.850
> 
> 标签：virtualization, virtual-pc, parallels

我想将我的 mac 上的 Parallels 虚拟机映像转换为 Virtual PC 2007 可用的映像。有谁知道如何做到这一点，或者是否有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T17:28:02.053

看起来来自[qemu](http://bellard.org/qemu/)的 qemu-img可以做到这一点，至少在 Ubuntu 8.04 机器上查看它的命令行帮助，它声称支持“并行”和“vpc”格式等。

不过自己没试过。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-24T19:05:06.713

如果它是 Windows 映像，我会使用[SmartVDK](http://www.prowesscorp.com/support/help/smartdeploy_vdc/Welcome_to_SmartVDK_v1.0.htm)之类的工具安装 VM ，然后使用 ImageX 将 VM 捕获到 WIM 文件中。然后，您可以使用 SmartVDK 装载空白 VHD，并使用 ImageX /APPLY 应用映像。

如果您在 Mac 或 Linux 机器上执行转换，qemu-img 工具会更好。

请记住，如果驱动器序列号已更改，您可能会在启动驱动器时遇到困难。此外，硬件会有所不同。通常最好构建一个新映像，然后安装转换后的驱动器，复制您需要的任何其他内容。

# excel - Excel VBA中的函数重载和UDF

> ID：64436
> 
> 赞同：31
> 
> 时间：2008-09-15T16:28:28.373
> 
> 标签：excel, user-defined-functions, vba

我正在使用 Excel VBA 来编写 UDF。我想用几个不同的版本重载我自己的 UDF，以便不同的参数调用不同的函数。

由于 VBA 似乎不支持这一点，任何人都可以提出一种实现相同目标的好方法吗？我应该使用可选参数还是有更好的方法？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2008-09-16T08:59:22.750

将您的参数声明为`Optional Variants`，然后您可以使用 来测试它们是否丢失`IsMissing()`或使用 来检查它们的类型`TypeName()`，如以下示例所示：

```
Public Function Foo(Optional v As Variant) As Variant

    If IsMissing(v) Then
        Foo = "Missing argument"
    ElseIf TypeName(v) = "String" Then
        Foo = v & " plus one"
    Else
        Foo = v + 1
    End If

End Function 
```

这可以从工作表中调用为**=FOO()**、**=FOO( *number* )**或**=FOO(" *string* ")**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-16T10:51:41.530

如果您可以通过参数计数进行区分，那么这样的事情会起作用：

```
Public Function Morph(ParamArray Args())

    Select Case UBound(Args)
    Case -1 '' nothing supplied
        Morph = Morph_NoParams()
    Case 0
        Morph = Morph_One_Param(Args(0))
    Case 1
        Morph = Two_Param_Morph(Args(0), Args(1))
    Case Else
        Morph = CVErr(xlErrRef)
    End Select

End Function

Private Function Morph_NoParams()
    Morph_NoParams = "I'm parameterless"
End Function

Private Function Morph_One_Param(arg)
    Morph_One_Param = "I has a parameter, it's " & arg
End Function

Private Function Two_Param_Morph(arg0, arg1)
    Two_Param_Morph = "I is in 2-params and they is " & arg0 & "," & arg1
End Function 
```

如果区分函数的唯一方法是按类型，那么您实际上将不得不做 C++ 和其他具有重写函数的语言所做的事情，即通过签名调用。我建议让电话看起来像这样：

```
Public Function MorphBySig(ParamArray args())

Dim sig As String
Dim idx As Long
Dim MorphInstance As MorphClass

    For idx = LBound(args) To UBound(args)
        sig = sig & TypeName(args(idx))
    Next

    Set MorphInstance = New MorphClass

    MorphBySig = CallByName(MorphInstance, "Morph_" & sig, VbMethod, args)

End Function 
```

并创建一个具有许多与您期望的签名相匹配的方法的类。不过，您可能需要一些错误处理，并被警告可识别的类型是有限的：例如，日期是 TypeName Double。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:35:20.933

VBA 很乱。我不确定是否有一种简单的方法可以进行假重载：

在过去，我要么使用了很多 Optionals，要么使用了不同的函数。例如

```
Foo_DescriptiveName1()

Foo_DescriptiveName2() 
```

我会说使用具有合理默认值的可选参数，除非参数列表会变得愚蠢，然后创建单独的函数来调用您的案例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T17:42:17.807

您可能还想考虑为您的参数列表使用变体数据类型，然后使用 TypeOf 语句找出什么是什么类型，然后在您弄清楚什么是什么时调用适当的函数......

# .net - .Net NNTP 实施

> ID：64445
> 
> 赞同：2
> 
> 时间：2008-09-15T16:29:55.267
> 
> 标签：.net, protocols, nntp

该协议是否有良好`.Net`的实现`NNTP`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T16:45:53.497

尝试像[http://sourceforge.net/projects/dougnewsnntp/](http://sourceforge.net/projects/dougnewsnntp/)和[http://www.codeplex.com/nntpclientlib这样的库](http://www.codeplex.com/nntpclientlib)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T16:36:12.147

[这里](http://www.geekpedia.com/tutorial212_Developing-an-NNTP-Newsgroup-Reader.html)有一个使用 NNTP 阅读帖子的 C# 教程。这应该足以让您入门，但如果您希望开始处理二进制帖子，您可能还必须处理一些 mime 类型的内容。我不认为这篇文章涵盖了这一点。

# virtualization - 如何将物理机转换为虚拟机映像以在 MS Virtual Server 或 Hyper-V 中使用？

> ID：64451
> 
> 赞同：4
> 
> 时间：2008-09-15T16:30:44.687
> 
> 标签：virtualization, hyper-v

我想使用 System Center Virtual Machine Manager 2008 的替代品是可能的，换句话说，有什么免费的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T16:55:09.497

谷歌“物理到虚拟的转换”或 P2V。有几种可用的解决方案。不幸的是，微软的解决方案似乎没有多少人取得成功。

请尝试以下操作： 1\. 下载并安装 VMWare 转换器，然后按照说明转换物理机。2\. 从 VMToolkit.com 下载 VMWare 到 VHD 转换实用程序并转换映像。

当我上周尝试时，这对我不起作用，但我认为这是因为我转换的驱动器使用了 PGP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T23:33:14.330

在 SCVMM 之前，Microsoft 的解决方案是[Virtual Server Migration Toolkit](http://technet.microsoft.com/en-us/virtualserver/bb676674.aspx)。这需要 Windows Server 2003 自动部署服务，而后者只能安装在 Windows Server 2003 企业版上。它与您可以获得的免费工具差不多。它仅适用于 SP1，不适用于 SP2（除非自上次检查以来 ADS 已更新），并且您必须获取已应用于物理系统的所有补丁。

ADS 被限制为每个物理磁盘四个分区，因为它不能创建扩展分区。如果您的物理系统有四个以上的分区，那么您就有问题了。

但是，一旦你让它运行，它确实可以工作。

许多磁盘复制工具（如 Ghost 或 True Image）现在可以从物理系统生成 .vhd 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-12-05T11:22:33.433

使用 VMWare 不是免费的，但您可以获得一个不错的 30 天试用版，这应该足以完成您的转换。如果您愿意为产品付费，VMWare 还有其他很大的优势。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-09-28T02:42:48.527

首先，将物理系统备份为镜像，并将其转换为虚拟磁盘，可以直接在虚拟机中使用。

[见这篇文章](http://www.todo-backup.com/products/features/convert-physical-to-virtual.htm)。

# java - 使 .net 客户端使用 Java 服务器的服务的最佳方法是什么？

> ID：64454
> 
> 赞同：2
> 
> 时间：2008-09-15T16:31:02.613
> 
> 标签：java, .net, interop

我在 .net 中有一个用户界面，它需要在请求/回复/更新模型上从服务器接收数据。唯一的限制是仅在服务器上使用 Java。

实现这一目标的最佳方法是什么？是通过在 Java 中创建 Web 服务然后在 .net 中访问它，还是应该创建 Java 代理并使用 IKM 在 .net 中转换它们？或者你有更好的主意吗？它可以基于 HTTP、使用直接套接字连接或任何中间件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T16:33:08.940

用 Java 编写 web 服务并在 .net 中访问它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T16:40:51.810

我推荐网络服务路线。它提供了一个标准接口，将来可以被其他客户端平台使用。

.NET 客户端与 Java Web 服务的交互非常好，尽管存在一些问题。可用于 .NET 客户端的最佳两种技术是 Microsoft Web 服务增强 (WSE) 和 Windows Communication Foundation (WCF)。WSE 是一项较旧的技术，Microsoft 不再对其进行更新，但在 Visual Studio 2005 和更早版本中仍然可以正常工作。我发现 WSE 在您与基本服务的接口方面更容易上手，但 WCF 对 WS-* 协议（安全性、信任等）有更多的支持。如果您的需求是基本的，并且您仍在使用 Visual Studio 2005（.NET 框架 2 或更早版本），那么请使用 WSE。如果您喜欢最先进的技术，或者您预计会有更高级的安全需求（听起来不像您会的那样），那么请选择 WCF。

采用 Web 服务路线意味着您将设计一个可重用的接口，并且在完成后将导致比大多数其他路线更松散耦合的系统。缺点主要是性能：xml 序列化将比网络上的二进制慢，并且 Web 服务不能很好地处理大量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:34:12.713

最好使用标准类型的 Web 服务（例如 SOAP 或 XML-RPC），因为它不仅易于生成/使用，而且在其他语言中也很容易。

# python - 在python中留下时间延迟

> ID：64468
> 
> 赞同：22
> 
> 时间：2008-09-15T16:32:48.910
> 
> 标签：python, timedelay

有没有办法在两行代码的执行之间留下时间延迟？

# vb.net - Vista上的VB.NET，试图获取日期（今天）导致安全异常

> ID：64469
> 
> 赞同：2
> 
> 时间：2008-09-15T16:32:52.310
> 
> 标签：vb.net, security, date

我有一个 VB6 程序，最近有人帮我转换为 VB.NET

在程序中，当保存文件时，我用调用 Today() 函数得到的日期标记它们。

当我尝试在 Vista 中运行新的 VB.NET 代码时，它会为 Today() 引发权限异常。如果我在管理员模式下运行 Visual Studio Express（这是 2008 Express 版本），那么问题就不会发生，但显然我想最终得到一个独立的程序，它可以为所有用户运行而没有花哨的权限。

那么Vista中的普通VB.NET程序如何获取今天的日期呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-15T16:39:00.487

使用`DateTime.Now`或`DateTime.Today`。这些是完全托管的，不应引发安全异常。

旧的 VB6 函数，例如`Len()`、`Left()`、`Right()`、`OpenFile()`，`FreeFile()`都存在于 .NET Framework 的 Microsoft.VisualBasic DLL 中。为了保持向后兼容性，它们都在非托管代码中调用旧函数。非托管代码需要特殊的安全权限，因为它可能很危险。

只要有可能，请尝试使用较新的 .NET 函数。它们通常更快（例如使用 Streams 的文件 IO）和更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T16:39:54.260

当我尝试以下语句时：

```
Dim result As String = Today() 
```

正如我所料，它给了我今天的日期，而且我在 Vista 上运行 VB2005。你能用你正在使用的VB版本修改这个问题吗？另外，您可以尝试以下语句而不是`Today()`查看它是否对您有用吗？

```
Dim result As String = Now() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:47:26.707

Today() 函数应该在 Vista 上正常运行。我相信在幕后它只是在评估 DateTime.Today 属性，所以它不应该抛出任何异常。如果您要将 VB 移植到 VB.NET，您可能应该继续使用 DateTime.Today 属性而不是 VB6 兼容性代码。

# c - 处理协议通信最常用的流控制是什么？

> ID：64495
> 
> 赞同：2
> 
> 时间：2008-09-15T16:35:28.233
> 
> 标签：c, communication, protocols

我正在重写代码来处理一些嵌入式通信，现在协议处理是在一个带有大 case/switch 语句的 While 循环中实现的。这种方法似乎有点笨拙。实现通信协议最常用的流量控制方法有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-23T22:56:29.147

听起来“while + switch/case”是一种状态机实现。我相信经过深思熟虑的状态机通常是实现协议的最简单和最易读的方式。

当谈到状态机时，打破一些传统的编程规则伴随着领域。像“每个函数应该少于 25 行”这样的规则是行不通的。甚至有人可能会争辩说，状态机是伪装的 GOTO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T16:40:07.490

对于您关闭协议标头中的字段以引导您进入该协议的下一个处理阶段的情况，可以使用函数指针数组。您使用协议标头中的值来索引数组并调用该协议的函数。

您**必须**处理此数组中的所有可能值，即使是那些无效的值。最终你会得到一个包含无效值的数据包，要么是因为有人正在尝试攻击，要么是因为协议的未来版本添加了新值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:42:40.120

如果处理的都是一个协议，那么 switch/case 语句可能是你最好的选择。但是，您应该将所有单独的消息处理程序分解为它们自己的函数。

如果您的 switch 语句包含任何实际处理消息的代码，那么最好将它们分开。

如果它正在处理多个类似的协议，您可以创建一个类来处理基于相同抽象类的每个协议，并且当连接进入时，您可以确定它是哪个协议并创建适当的处理程序类的实例来解码和处理通信.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T18:48:29.863

我认为这在很大程度上取决于您使用的语言，以及您可以使用的数据集对象类型。

例如，在 python 中，您可以创建一个包含所有不同处理语句的 Dictionary 对象，然后遍历该对象以找到要调用的正确方法/函数。

Case/Switch 语句不是坏事，但如果它们变得很大（就像使用大量协议处理程序一样），那么它们可能会变得难以使用。

# c++ - C++ 方法扩展

> ID：64498
> 
> 赞同：4
> 
> 时间：2008-09-15T16:35:36.907
> 
> 标签：c++, templates

您可以在不专门化类模板参数的情况下专门化模板类中的模板方法吗？

请注意，特化是模板参数的*值*，而不是它的类型。

这似乎在 Visual Studio 2008 SP1 编译器下编译，但不是 GCC 4.2.4。

```
#include <iostream>
using namespace std;
template <typename T>
class A
{
private:
    template <bool b>
    void testme();

    template <>
    void testme<true>() { cout << "true" << endl; };

    template <>
    void testme<false>() { cout << "false" << endl; };

public:
    void test();
};

template<typename T> struct select {};
template<> struct select<int>    { static const bool value = true; };
template<> struct select<double> { static const bool value = false; };

template <class T>
void A<T>::test() { testme<select<T>::value>(); }

int main(int argc, const char* argv[])
{
    A<int>      aInt;
    A<double>   aDouble;

    aInt.test();
    aDouble.test();

    return 0;
} 
```

GCC 告诉我：“错误：非命名空间范围 'class A' 中的显式特化”

如果标准不支持，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T17:14:22.943

标准不支持它（显然这是 Visual Studio 的一个已知错误，您*可以*这样做）。

该标准不允许在没有专门化外部模板的情况下专门化内部模板（成员函数*或类）。*原因之一是您通常可以重载函数：

```
template<typename ty>
class A
{
public:
      void foo(bool b);
      void foo(int i);
}; 
```

相当于：

```
template<typename ty>
class A
{
public:
   template<typename ty2>
   void foo(ty2);

   template<>
   void foo(bool b);

   template<>
   void foo(int i);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-08T21:15:35.577

这是你的做法：

```
template<typename A>
struct SomeTempl {
    template<bool C> typename enable_if<C>::type 
    SomeOtherTempl() {
        std::cout << "true!";
    }

    template<bool C> typename enable_if<!C>::type 
    SomeOtherTempl() {
        std::cout << "false!";
    }
}; 
```

您可以`enable_if`从我告诉他们如何使用模板检查类中成员函数的存在的其他答案中获得。`enable_if`或者你可以使用boost ，但记得改成`enable_if_c`then。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T22:03:09.117

这是另一种解决方法，当您需要对函数进行部分特化（这是不允许的）时也很有用。创建一个模板仿函数类（即，其唯一目的是执行单个成员函数的类，通常命名为 operator() ），对其进行专门化，然后从模板函数中调用。

我想我从 Herb Sutter 那里学到了这个技巧，但不记得那是哪本书（或文章）。对于您的需要，这可能是矫枉过正，但尽管如此......

```
template <typename T>
struct select;

template <bool B>
struct testme_helper
{
  void operator()();
};

template <typename T>
class A
{
private:
  template <bool B> void testme()
  {
    testme_helper<B>()();
  }

public:
  void test()
  {
    testme<select<T>::value>();
  }
};

template<> void testme_helper<true>::operator()()
{
  std::cout << "true" << std::endl;
}

template<> void testme_helper<false>::operator()()
{
  std::cout << "false" << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T17:24:09.100

我从来没有听说过这是可能的。*如果不是*所有编译器都支持它，那对我来说是有意义的。所以这里有一个解决方法的想法：

在你的类之外实现一个模板函数，它采取与方法相同的动作。然后你可以专门化这个函数，并从方法中调用它。当然，你还必须传入它需要的任何成员变量（如果你想修改它们的值，还需要指向它的指针）。

您还可以创建另一个模板类作为子类，并专门化那个模板类，尽管我自己从未这样做过，也不能 100% 确定它会起作用。（如果您知道第二种方法是否可行，请发表评论以补充此答案！）

# python - 使用 SMTP 从 Python 发送邮件

> ID：64505
> 
> 赞同：130
> 
> 时间：2008-09-15T16:36:35.547
> 
> 标签：python, smtp

我正在使用以下方法使用 SMTP 从 Python 发送邮件。这是正确的使用方法还是我遗漏了一些陷阱？

```
from smtplib import SMTP
import datetime

debuglevel = 0

smtp = SMTP()
smtp.set_debuglevel(debuglevel)
smtp.connect('YOUR.MAIL.SERVER', 26)
smtp.login('USERNAME@DOMAIN', 'PASSWORD')

from_addr = "John Doe <john@doe.net>"
to_addr = "foo@bar.com"

subj = "hello"
date = datetime.datetime.now().strftime( "%d/%m/%Y %H:%M" )

message_text = "Hello\nThis is a mail from your server\n\nBye\n"

msg = "From: %s\nTo: %s\nSubject: %s\nDate: %s\n\n%s" 
        % ( from_addr, to_addr, subj, date, message_text )

smtp.sendmail(from_addr, to_addr, msg)
smtp.quit() 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2008-09-15T17:24:40.253

我使用的脚本非常相似；我在这里发布它作为如何使用 email.* 模块生成 MIME 消息的示例；因此可以轻松修改此脚本以附加图片等。

我依靠我的 ISP 添加日期时间标头。

我的 ISP 要求我使用安全的 smtp 连接来发送邮件，我依赖 smtplib 模块（可在[http://www1.cs.columbia.edu/~db2501/ssmtplib.py](http://www1.cs.columbia.edu/~db2501/ssmtplib.py)下载）

在您的脚本中，用于在 SMTP 服务器上进行身份验证的用户名和密码（下面给出虚拟值）在源代码中以纯文本形式显示。这是一个安全漏洞；但最好的选择取决于您需要（想要？）保护这些。

========================================

```
#! /usr/local/bin/python

SMTPserver = 'smtp.att.yahoo.com'
sender =     'me@my_email_domain.net'
destination = ['recipient@her_email_domain.com']

USERNAME = "USER_NAME_FOR_INTERNET_SERVICE_PROVIDER"
PASSWORD = "PASSWORD_INTERNET_SERVICE_PROVIDER"

# typical values for text_subtype are plain, html, xml
text_subtype = 'plain'

content="""\
Test message
"""

subject="Sent from Python"

import sys
import os
import re

from smtplib import SMTP_SSL as SMTP       # this invokes the secure SMTP protocol (port 465, uses SSL)
# from smtplib import SMTP                  # use this for standard SMTP protocol   (port 25, no encryption)

# old version
# from email.MIMEText import MIMEText
from email.mime.text import MIMEText

try:
    msg = MIMEText(content, text_subtype)
    msg['Subject']=       subject
    msg['From']   = sender # some SMTP servers will do this automatically, not all

    conn = SMTP(SMTPserver)
    conn.set_debuglevel(False)
    conn.login(USERNAME, PASSWORD)
    try:
        conn.sendmail(sender, destination, msg.as_string())
    finally:
        conn.quit()

except:
    sys.exit( "mail failed; %s" % "CUSTOM_ERROR" ) # give an error message 
```

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2013-07-11T14:59:54.337

我常用的方法...没有太大区别，但有点

```
import smtplib
from email.MIMEMultipart import MIMEMultipart
from email.MIMEText import MIMEText

msg = MIMEMultipart()
msg['From'] = 'me@gmail.com'
msg['To'] = 'you@gmail.com'
msg['Subject'] = 'simple email in python'
message = 'here is the email'
msg.attach(MIMEText(message))

mailserver = smtplib.SMTP('smtp.gmail.com',587)
# identify ourselves to smtp gmail client
mailserver.ehlo()
# secure our email with tls encryption
mailserver.starttls()
# re-identify ourselves as an encrypted connection
mailserver.ehlo()
mailserver.login('me@gmail.com', 'mypassword')

mailserver.sendmail('me@gmail.com','you@gmail.com',msg.as_string())

mailserver.quit() 
```

就是这样

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-11-08T20:12:26.547

此外，如果您想使用 TLS 而不是 SSL 进行 smtp auth，那么您只需更改端口（使用 587）并执行 smtp.starttls()。这对我有用：

```
...
smtp.connect('YOUR.MAIL.SERVER', 587)
smtp.ehlo()
smtp.starttls()
smtp.ehlo()
smtp.login('USERNAME@DOMAIN', 'PASSWORD')
... 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-15T16:43:36.950

我看到的主要问题是您没有处理任何错误：`.login()`并且`.sendmail()`两者都[记录了它们可以抛出的异常](https://docs.python.org/3/library/smtplib.html#smtplib.SMTPException)，而且似乎`.connect()`必须有某种方式表明它无法连接 - 可能是底层套接字抛出的异常代码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-09-15T16:55:57.047

确保您没有任何防火墙阻止 SMTP。我第一次尝试发送电子邮件时，它被 Windows 防火墙和 McAfee 阻止了——我花了很长时间才找到它们。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-06-27T14:31:09.650

那这个呢？

```
import smtplib

SERVER = "localhost"

FROM = "sender@example.com"
TO = ["user@example.com"] # must be a list

SUBJECT = "Hello!"

TEXT = "This message was sent with Python's smtplib."

# Prepare actual message

message = """\
From: %s
To: %s
Subject: %s

%s
""" % (FROM, ", ".join(TO), SUBJECT, TEXT)

# Send the mail

server = smtplib.SMTP(SERVER)
server.sendmail(FROM, TO, message)
server.quit() 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-10-04T10:31:05.037

以下代码对我来说工作正常：

```
import smtplib

to = 'mkyong2002@yahoo.com'
gmail_user = 'mkyong2002@gmail.com'
gmail_pwd = 'yourpassword'
smtpserver = smtplib.SMTP("smtp.gmail.com",587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo() # extra characters to permit edit
smtpserver.login(gmail_user, gmail_pwd)
header = 'To:' + to + '\n' + 'From: ' + gmail_user + '\n' + 'Subject:testing \n'
print header
msg = header + '\n this is test msg from mkyong.com \n\n'
smtpserver.sendmail(gmail_user, to, msg)
print 'done!'
smtpserver.quit() 
```

参考：[http ://www.mkyong.com/python/how-do-send-email-in-python-via-smtplib/](http://www.mkyong.com/python/how-do-send-email-in-python-via-smtplib/)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-02T10:55:20.627

我为使用 SMTP 发送邮件所做的示例代码。

```
import smtplib, ssl

smtp_server = "smtp.gmail.com"
port = 587  # For starttls
sender_email = "sender@email"
receiver_email = "receiver@email"
password = "<your password here>"
message = """ Subject: Hi there

This message is sent from Python."""

# Create a secure SSL context
context = ssl.create_default_context()

# Try to log in to server and send email
server = smtplib.SMTP(smtp_server,port)

try:
    server.ehlo() # Can be omitted
    server.starttls(context=context) # Secure the connection
    server.ehlo() # Can be omitted
    server.login(sender_email, password)
    server.sendmail(sender_email, receiver_email, message)
except Exception as e:
    # Print any error messages to stdout
    print(e)
finally:
    server.quit() 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T16:46:00.393

您应该确保以正确的格式格式化日期 - [RFC2822](http://www.faqs.org/rfcs/rfc2822.html)。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-04-18T17:27:00.127

看到所有这些冗长的答案了吗？请允许我通过几行来进行自我推销。

导入和连接：

```
import yagmail
yag = yagmail.SMTP('john@doe.net', host = 'YOUR.MAIL.SERVER', port = 26) 
```

那么它只是一个单行：

```
yag.send('foo@bar.com', 'hello', 'Hello\nThis is a mail from your server\n\nBye\n') 
```

当它超出范围时它实际上会关闭（或者可以手动关闭）。此外，它将允许您在密钥环中注册您的用户名，这样您就不必在脚本中写出您的密码（在编写之前真的让我很困扰`yagmail`！）

对于包/安装、提示和技巧，请查看[git](https://github.com/kootenpv/yagmail)或[pip](https://pypi.python.org/pypi/yagmail/)，可用于 Python 2 和 3。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-05-08T09:38:03.970

你可以那样做

```
import smtplib
from email.mime.text import MIMEText
from email.header import Header

server = smtplib.SMTP('mail.servername.com', 25)
server.ehlo()
server.starttls()

server.login('username', 'password')
from = 'me@servername.com'
to = 'mygfriend@servername.com'
body = 'That A Message For My Girl Friend For tell Him If We will go to eat Something This Nigth'
subject = 'Invite to A Diner'
msg = MIMEText(body,'plain','utf-8')
msg['Subject'] = Header(subject, 'utf-8')
msg['From'] = Header(from, 'utf-8')
msg['To'] = Header(to, 'utf-8')
message = msg.as_string()
server.sendmail(from, to, message) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-03-03T16:04:37.930

基于[这个例子](https://stackoverflow.com/questions/10147455/how-to-send-an-email-with-gmail-as-provider-using-python#12424439)，我做了以下功能：

```
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

def send_email(host, port, user, pwd, recipients, subject, body, html=None, from_=None):
    """ copied and adapted from
        https://stackoverflow.com/questions/10147455/how-to-send-an-email-with-gmail-as-provider-using-python#12424439
    returns None if all ok, but if problem then returns exception object
    """

    PORT_LIST = (25, 587, 465)

    FROM = from_ if from_ else user 
    TO = recipients if isinstance(recipients, (list, tuple)) else [recipients]
    SUBJECT = subject
    TEXT = body.encode("utf8") if isinstance(body, unicode) else body
    HTML = html.encode("utf8") if isinstance(html, unicode) else html

    if not html:
        # Prepare actual message
        message = """From: %s\nTo: %s\nSubject: %s\n\n%s
        """ % (FROM, ", ".join(TO), SUBJECT, TEXT)
    else:
                # https://stackoverflow.com/questions/882712/sending-html-email-using-python#882770
        msg = MIMEMultipart('alternative')
        msg['Subject'] = SUBJECT
        msg['From'] = FROM
        msg['To'] = ", ".join(TO)

        # Record the MIME types of both parts - text/plain and text/html.
        # utf-8 -> https://stackoverflow.com/questions/5910104/python-how-to-send-utf-8-e-mail#5910530
        part1 = MIMEText(TEXT, 'plain', "utf-8")
        part2 = MIMEText(HTML, 'html', "utf-8")

        # Attach parts into message container.
        # According to RFC 2046, the last part of a multipart message, in this case
        # the HTML message, is best and preferred.
        msg.attach(part1)
        msg.attach(part2)

        message = msg.as_string()

    try:
        if port not in PORT_LIST: 
            raise Exception("Port %s not one of %s" % (port, PORT_LIST))

        if port in (465,):
            server = smtplib.SMTP_SSL(host, port)
        else:
            server = smtplib.SMTP(host, port)

        # optional
        server.ehlo()

        if port in (587,): 
            server.starttls()

        server.login(user, pwd)
        server.sendmail(FROM, TO, message)
        server.close()
        # logger.info("SENT_EMAIL to %s: %s" % (recipients, subject))
    except Exception, ex:
        return ex

    return None 
```

如果您仅传递`body`，则将发送纯文本邮件，但如果您将`html`参数与`body`参数一起传递，则将发送 html 电子邮件（对于不支持 html/mime 类型的电子邮件客户端，回退到文本内容）。

示例用法：

```
ex = send_email(
      host        = 'smtp.gmail.com'
   #, port        = 465 # OK
    , port        = 587  #OK
    , user        = "xxx@gmail.com"
    , pwd         = "xxx"
    , from_       = 'xxx@gmail.com'
    , recipients  = ['yyy@gmail.com']
    , subject     = "Test from python"
    , body        = "Test from python - body"
    )
if ex: 
    print("Mail sending failed: %s" % ex)
else:
    print("OK - mail sent" 
```

顺便提一句。如果您想将 gmail 用作测试或生产 SMTP 服务器，请启用对安全性较低的应用程序的临时或永久访问权限：

*   登录到谷歌邮件/帐户
*   转到：[https ://myaccount.google.com/lesssecureapps](https://myaccount.google.com/lesssecureapps)
*   使能够
*   使用此功能或类似功能发送电子邮件
*   （推荐）访问：[https ://myaccount.google.com/lesssecureapps](https://myaccount.google.com/lesssecureapps)
*   （推荐）禁用

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-01-22T22:01:45.307

或者

```
import smtplib

from email.message import EmailMessage
from getpass import getpass

password = getpass()

message = EmailMessage()
message.set_content('Message content here')
message['Subject'] = 'Your subject here'
message['From'] = "USERNAME@DOMAIN"
message['To'] = "you@mail.com"

try:
    smtp_server = None
    smtp_server = smtplib.SMTP("YOUR.MAIL.SERVER", 587)
    smtp_server.ehlo()
    smtp_server.starttls()
    smtp_server.ehlo()
    smtp_server.login("USERNAME@DOMAIN", password)
    smtp_server.send_message(message)
except Exception as e:
    print("Error: ", str(e))
finally:
    if smtp_server is not None:
        smtp_server.quit() 
```

如果要使用端口 465，则必须创建一个`SMTP_SSL`对象。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-08-03T22:39:23.333

这是 Python 3.x 的一个工作示例

```
#!/usr/bin/env python3

from email.message import EmailMessage
from getpass import getpass
from smtplib import SMTP_SSL
from sys import exit

smtp_server = 'smtp.gmail.com'
username = 'your_email_address@gmail.com'
password = getpass('Enter Gmail password: ')

sender = 'your_email_address@gmail.com'
destination = 'recipient_email_address@gmail.com'
subject = 'Sent from Python 3.x'
content = 'Hello! This was sent to you via Python 3.x!'

# Create a text/plain message
msg = EmailMessage()
msg.set_content(content)

msg['Subject'] = subject
msg['From'] = sender
msg['To'] = destination

try:
    s = SMTP_SSL(smtp_server)
    s.login(username, password)
    try:
        s.send_message(msg)
    finally:
        s.quit()

except Exception as E:
    exit('Mail failed: {}'.format(str(E))) 
```

# scheme - Guile 计划 - 报价期？

> ID：64508
> 
> 赞同：4
> 
> 时间：2008-09-15T16:36:44.360
> 
> 标签：scheme, guile

下面的 Guile 方案代码有什么作用？

```
(eq? y '.)
(cons x '.) 
```

该代码在 MzScheme 中无效，是否存在跨方案实现的可移植等效项？

我正在尝试移植其他人编写的代码。Guile 似乎对 '. 使用#{.}#，但我不确定它的含义或如何在另一个方案中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T19:39:24.423

好吧，看来'. 是 Guile 中 (string->symbol ".") 的有效语法，而 MzScheme 至少需要 |.| 期间作为符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T02:14:59.387

`#{.}#`是 Guile 定义符号的特定方式，包含 Scheme 的一些分隔符。 [http://www.gnu.org/software/guile/manual/html_node/Symbol-Read-Syntax.html](http://www.gnu.org/software/guile/manual/html_node/Symbol-Read-Syntax.html)

对于其他Scheme方言，应该有另一种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:40:19.377

我很惊讶任何 Scheme 系统都会接受点符号。我的建议是使用另一个符号（我相信你知道）点是表示一对的简写，即使你能找到一个可以使用你的代码的方案，你也可能会混淆任何不幸的人实际阅读代码的任务。

# linux - GtkWidget.events 属性用于（类似）GtkTreeView 小部件的目的是什么？

> ID：64518
> 
> 赞同：0
> 
> 时间：2008-09-15T16:38:42.563
> 
> 标签：linux, gtk, pygtk, glade

`GtkTreeView`我在一个窗口中有一个 Glade GUI 描述文件`GtkHBox`；并且有一个`row_activated`信号处理程序。现在，Glade 已经自动将该树视图的“事件”属性（继承自`GtkWidget`）设置为某个值（`GDK_POINTER_MOTION_MASK | GDK_POINTER_MOTION_HINT_MASK | GDK_BUTTON_PRESS_MASK | GDK_BUTTON_RELEASE_MASK`）。这有两个奇怪的地方：

*   删除预设值（使属性为空）似乎不会破坏应用程序（至少不会使用我有 atm 的旧 GTK 2.10）。
*   事实上，我以前见过的一个烦人的错误（树视图项目无法正确响应展开或折叠点击）现在已经消失了！

`events`我还没有用较新的 GTK 版本对此进行测试，但问题已经存在：这个属性的目的到底是什么？为什么 Glade 会自动且不必要地将其设置为某个值？这有一些我不知道的副作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-28T15:25:42.603

这是 Glade 中的一个错误，它总是设置它创建的小部件的事件属性。它没有属性的默认值的概念，所以它总是设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T17:27:12.803

这个面具不是表示你愿意接受的事件吗？在这种情况下，您可能希望收到用户单击或双击 GtkTreeView 中的项目的通知，并且您将希望注册回调来处理这些事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T17:41:36.513

me.yahoo.com/a/kUQ7zeQ：但即使我如前所述将属性设置为空字符串，`row_activated`当我双击一行（或按 Enter 或空格键）时仍会调用处理程序。所以树视图仍然会收到事件......

# perl - 如何在 Windows 上的 Perl 中创建图形？

> ID：64537
> 
> 赞同：10
> 
> 时间：2008-09-15T16:41:30.527
> 
> 标签：perl, report, graph

如何使用 Perl 创建图表？

我正在运行创建文本报告的预定作业。我想将此移至下一步（用于管理），并创建一些与之相关的图表。这可能/可行吗？如果我能以某种方式使用 Office 做到这一点，那就太好了。

## 更新：我将按此顺序调查的解决方案

*   Spreadsheet::WriteExcel（这似乎与我上次调查时有所不同......等等，这是模块作者建议的。很酷。）
*   GD Graph - 现在可用于 ActivePerl（不是我上次看的）
*   SVG
*   打开图表看起来很有趣。
*   图表总监

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T16:44:35.747

GD 和 GD::Graph 可能是您最好的选择，您可以使用它们来创建图像，然后可以将其嵌入到您需要的任何内容中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-15T16:56:22.520

上面提到的所有方法都非常好，但我个人喜欢[SVG::TT::Graph](http://search.cpan.org/dist/SVG-TT-Graph/)。我真的很喜欢 SVG 赋予您绘制非常漂亮的图形的能力。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-15T19:55:14.040

您还可以查看[Google Charts CPAN 模块](http://search.cpan.org/perldoc?Google::Chart)

```
use Google::Chart;

  my $chart = Google::Chart->new(
    type => "Bar",
    data => [ 1, 2, 3, 4, 5 ]
  );

  print $chart->as_uri, "\n"; # or simply print $chart, "\n"

  $chart->render_to_file( filename => 'filename.png' ); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-15T21:05:48.567

在工作中，我们使用了出色的[Chartdirector](http://www.advsofteng.com/)。

它不是免费的，但非常便宜（可能 50 美元左右）。这笔费用非常值得，因为 API 和文档都非常出色（比 GD 好得多！），因此很容易节省了我的时间。

还有一个免费版本，其中包括在每个图表上宣传产品的黄色小横幅 - 老实说，如果这是供个人使用的，你可以这样做，因为它真的不是很侵入。

Chartdirector 可用于多种平台（Win、Linux、Solaris、BSD、OSX），并且还具有适用于多种语言的 API（Perl、ASP、.NET、Java、PHP、Python、Ruby、C++）。

[正如您在他们的示例页面](http://www.advsofteng.com/gallery.html)中看到的那样，输出很容易看到。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-19T19:21:45.030

很抱歉吹了我自己的小号，但你可能有兴趣看看我为关于[使用 Perl 进行绘图](http://birmingham.pm.org/talks/barbie/graphing/index.html)的简短演示所做的一些幻灯片。

它在这里提到了一些建议，但也为您提供了一些代码片段，您可以使用它们来帮助您充分利用您正在做的事情。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-15T16:43:39.057

```
Spreadsheet::WriteExcel::Chart 
```

你可能需要像草莓或香草 Perl 这样的东西来编译它。或者 PPM 可能具有该模块。

教程链接： [http ://search.cpan.org/dist/Spreadsheet-WriteExcel/charts/charts.pod](http://search.cpan.org/dist/Spreadsheet-WriteExcel/charts/charts.pod)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-15T16:46:44.213

根据图形的复杂性，简单地为[Gnuplot](http://www.gnuplot.info/)或[GraphViz/Dotty](http://www.graphviz.org/)生成一个命令文件，这取决于你所指的图形类型——可能会奏效吗？

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-08T09:10:51.020

还没有尝试过，但是[Chart::Clicker](http://search.cpan.org/dist/Chart-Clicker/lib/Chart/Clicker.pm)看起来很漂亮。

我认为它使用 Cairo 图形库（GD 的替代品），但实际上是建立在[Graphics::Primitive](http://search.cpan.org/dist/Graphics-Primitive/lib/Graphics/Primitive.pm)之上的，这是一个“有趣的”图形不可知包。

有问题的作者（[GPHAT](http://search.cpan.org/~gphat/)）似乎正在整合一些用于生成报告的集成工具...... [http://www.onemogin.com/blog/582-pixels-and-painting-my-recent-cpan-releases](http://www.onemogin.com/blog/582-pixels-and-painting-my-recent-cpan-releases)

附带说明... 已使用 ChartDirector 和 OFC，两者都很好（尤其是基于 Web 的情况下）。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T22:06:50.620

Perl 模块[Spreadsheet::WriteExcel](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/)允许您创建包含图表的 Excel 工作簿。

您首先必须在 Excel 中创建所需的图表类型，然后使用与 Spreadsheet::WriteExcel 一起安装的名为[chartex的实用程序将其提取出来。](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/bin/chartex)

然后可以将图表模板添加到新工作簿并引用新数据。

文档在[这里](http://search.cpan.org/~jmcnamara/Spreadsheet-WriteExcel/charts/charts.pod)，发行版的图表目录中有[几个示例](http://search.cpan.org/src/JMCNAMARA/Spreadsheet-WriteExcel-2.25/charts/README)。

然而，该机制有点不灵活，有时很难获得您想要的确切结果。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-15T16:47:33.913

这在很大程度上取决于什么样的图表（它们的外观）和数据源。[通过使用YUI 图表](http://developer.yahoo.com/yui/charts/)并向它们提供原始源数据的一些 JSON 样式版本，我取得了一些不错的结果。例如，滚动实时图表以获得精确值非常容易。开发人员页面上有很多示例。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-09-16T17:53:51.827

It won't work with Office, but I really like [Chart::OFC](http://search.cpan.org/~drolsky/Chart-OFC-0.08/lib/Chart/OFC.pm) which will create [Open Flash Charts](http://teethgrinder.co.uk/open-flash-chart/). Very slick looking and easy to use.

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-15T17:03:00.680

如果您准备在 MS Office 中执行此操作，您可以使用 Win32::OLE 模块通过[OLE](http://en.wikipedia.org/wiki/Object_Linking_and_Embedding)控制 Excel 。请注意，这往往运行缓慢，并且很难找到 Excel 的 API 文档。从好的方面来说，它允许你做几乎所有你可以手动做的事情。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-10-17T16:51:00.700

PGplot 可以制作很棒的图表。这里有一些[例子](http://www.astro.caltech.edu/%7Etjp/pgplot/example.html)。它适用于 Perl 5.8.8，但在 5.10.0 中被破坏

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-10-17T17:02:20.383

当然是元编程！输出创建图形的 R 脚本。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-17T15:32:28.600

[Spreadsheet::WriteExcel](http://search.cpan.org/dist/Spreadsheet-WriteExcel)让您只需将数据输入 Excel，然后为图表编写 Excel 方程。

# .net - 您从混淆程序中获得的 exe 速度是否有所不同？

> ID：64541
> 
> 赞同：5
> 
> 时间：2008-09-15T16:42:19.463
> 
> 标签：.net, obfuscation

.Net 有许多混淆程序，我已经尝试过一个，我的 exe 在混淆时似乎要慢得多。所有的混淆程序都具有相同的效果还是我选择了一个不好的程序？我希望有些比其他更好，如果你知道一个快速的，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-15T17:04:40.847

免责声明：我的雇主是 PreEmptive Solutions，Dotfuscator .NET 混淆器的创建者。

它可能取决于您使用的混淆器以及您在其中启用的选项。我将从 Dotfuscator 的经验谈起。

如果您使用重命名和删除，混淆程序集的加载时间和内存占用可能会有所改善，部分原因是您的所有/大部分方法、字段等都被重命名为更小的名称（例如“ThisVeryLongMethodName（SomeVeryLongParameterName）”变为“a（ a)" 这样您就可以在程序集大小和加载时间方面获得一些好处。除了删除之外，您还可以删除永远不会调用的方法等，并再次减小二进制文件的大小。

字符串加密可能会对运行时性能产生轻微的负面影响，因为字符串必须在运行时转换回人类可读的文本。

如果您使用任何其他系统/技术（如 Microsoft SLP 的安全 vm 技术）来呈现方法不可读，这也会因安全 vm 而导致运行时性能损失。

其他不生成托管代码程序集作为输出而是依赖本机代码加载器“预处理”其输出的混淆工具也可能导致运行时性能下降（尤其是在加载时）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T16:47:16.690

混淆*不应*改变代码的运行时性能。如果是这样，那么你有一个糟糕的混淆器，它所做的不仅仅是混淆。应该做的所有混淆就是使您的 IL 难以阅读。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T16:51:59.567

工具可以使用[不同的混淆方法](http://howtoselectguides.com/dotnet/obfuscators/1st#dp_methods)。有一些简单的重命名方法不会以任何方式影响性能。其他方法可能会改变代码的流程。这可能会对性能产生负面影响。您可能想查看其他混淆器并尝试不同的设置。

# asp.net-mvc - 母版页中的路径

> ID：64559
> 
> 赞同：2
> 
> 时间：2008-09-15T16:43:44.750
> 
> 标签：asp.net-mvc, master-pages

我已经开始使用 ASP.net mvc 站点的母版页进行一些工作，并且遇到了一个问题。当我在母版页上链接样式表时，它似乎正确更新了表单的路径。那是在我的代码中

```
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" /> 
```

但是一旦页面被提供给我得到的浏览器，就会查看源代码

```
<link href="Content/Site.css" rel="stylesheet" type="text/css" /> 
```

这是完美的。但是，相同的路径翻译似乎不适用于脚本文件。

```
<script src="../../Content/menu.js" type="text/javascript"></script> 
```

只是出来一样的东西。它似乎仍然可以在顶级页面上运行，但我怀疑这只是浏览器/网络服务器纠正了我的错误。有没有办法让 src 路径也被全局化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-03T22:33:25.040

```
<script src="<%= ResolveClientUrl("~/Content/menu.js") %>" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T20:04:02.180

做一个扩展方法。这是一个方法：

```
public static string ResolveUrl(this HtmlHelper helper, string virtualUrl)
{
    HttpContextBase ctx = helper.ViewContext.HttpContext;
    string result = virtualUrl;

    if (virtualUrl.StartsWith("~/"))
    {
        virtualUrl = virtualUrl.Remove(0, 2);

        //get the site root
        string siteRoot = ctx.Request.ApplicationPath;

        if (!siteRoot.EndsWith("/"))
            siteRoot += "/";

        result = siteRoot + virtualUrl;
    }
    return result;
} 
```

然后，您可以编写脚本参考，例如：

```
<script type="text/javascript" src="<%= Html.ResolveUrl("~/Content/menu.js")%>"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T16:46:14.743

改用这个：

```
<link href="~/Content/Site.css" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:30:42.490

或者您可以在页面的 HEAD 部分中使用 BASE 标记。然后，所有链接都相对于在“base”标签中输入的位置，并且您不必使用“../../”和“~”的东西。除了 CSS 文件中的链接（背景 url 等），其中的链接是相对于 css 文件的位置的。

# bluetooth - 蓝牙停车

> ID：64562
> 
> 赞同：2
> 
> 时间：2008-09-15T16:44:01.643
> 
> 标签：bluetooth

如何停放蓝牙连接？我正在尝试与数十个蓝牙设备进行通信，并且重新建立连接的时间是不可接受的。我读过你可以停放连接，但没有找到任何可以回答如何做到这一点的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-30T17:08:08.383

我知道如果连接在 MS 蓝牙堆栈上，您可以停止连接。您可以使用一个不错的 API，名为 32feet.Net。它允许您设置套接字选项。这是[文档](http://community.inthehand.com/library/InTheHand.Net.Bluetooth.BluetoothSocketOptionNameMembers.html)的快速链接。我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-24T08:20:51.537

自 2000 年以来，我一直在为蓝牙模块创建固件，老实说，我从未使用过 Park，也没有任何客户要求过它。我的建议，就像这条路上的其他人一样，远离它。也许Hold模式值得研究。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T21:14:05.963

停车模式是连接状态模式之一，在核心蓝牙规范中进行了解释，从早期的 1.1 左右开始。请跟进各种嗅探模式，包括新的嗅探模式，例如嗅探子评级。除了停车模式外，您还有保持模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-21T08:58:02.097

不幸的是，停车模式将在下一个蓝牙版本（蓝牙 5）中删除。

而且，park and hold 模式*似乎*是一种很好的省电方式，但在现实生活中，由于 IOP 问题，市场上没有太多设备可以“真正”支持这种省电模式。最常用的模式是嗅探，但这已经超出了您的要求。

所以，忘记停车模式吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-14T02:20:06.870

一旦您与设备建立了蓝牙 ACL 连接。如果您的设备是主设备，那么您可以使用链路层消息 LMP_park。

通常您可以使用 HCI 命令 HCI_Park_Mode (Connection_Handle, Beacon_Max_Interval, Beacon_Min_Interval) 从应用程序中执行此操作

[http://affon.narod.ru/BT/bluetooth_app_c9.pdf](http://affon.narod.ru/BT/bluetooth_app_c9.pdf)

# php - 将字符串分解为没有空元素的数组？

> ID：64570
> 
> 赞同：39
> 
> 时间：2008-09-15T16:45:06.417
> 
> 标签：php, arrays, string, filtering, explode

PHP 的explode 函数返回一个字符串数组，该数组在某些提供的子字符串上拆分。当有前导、尾随或连续分隔符时，它将返回空字符串，如下所示：

```
var_dump(explode('/', '1/2//3/'));
array(5) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(0) ""
  [3]=>
  string(1) "3"
  [4]=>
  string(0) ""
} 
```

是否有一些不同的函数或选项或任何会返回*除*空字符串之外的所有内容的东西？

```
var_dump(different_explode('/', '1/2//3/'));
array(3) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2008-09-15T16:48:28.110

尝试[preg_split](http://php.net/preg_split)。

`$exploded = preg_split('@/@', '1/2//3/', NULL, PREG_SPLIT_NO_EMPTY);`

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2008-09-15T16:49:53.020

array_filter 将删除空白字段，这是一个没有过滤器的示例：

```
print_r(explode('/', '1/2//3/')) 
```

印刷：

```
Array
(
    [0] => 1
    [1] => 2
    [2] =>
    [3] => 3
    [4] =>
) 
```

使用过滤器：

```
php> print_r(array_filter(explode('/', '1/2//3/'))) 
```

印刷：

```
Array
(
    [0] => 1
    [1] => 2
    [3] => 3
) 
```

您将过滤掉所有解析为“false”的值。

见 [http://uk.php.net/manual/en/function.array-filter.php](http://uk.php.net/manual/en/function.array-filter.php)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-15T17:14:16.160

只为多样化：

```
array_diff(explode('/', '1/2//3/'), array('')) 
```

这也有效，但与 preg_split 不同，它会弄乱数组索引。有些人可能更喜欢它，而不是必须声明一个回调函数才能使用 array_filter。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-15T16:48:07.563

```
function not_empty_string($s) {
  return $s !== "";
}

array_filter(explode('/', '1/2//3/'), 'not_empty_string'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-02T01:57:56.270

我在[TYPO3](http://doc-typo3.ameos.com/4.1.0/incfile_8php-source.html#l00011)中使用过这个，查看`$onlyNonEmptyValues`参数：

```
function trimExplode($delim, $string, $onlyNonEmptyValues=0){
    $temp = explode($delim,$string);
    $newtemp=array();
    while(list($key,$val)=each($temp))      {
        if (!$onlyNonEmptyValues || strcmp("",trim($val)))      {
            $newtemp[]=trim($val);
        }
    }
    reset($newtemp);
    return $newtemp;
} 
```

它不会弄乱索引：

```
var_dump(trimExplode('/', '1/2//3/',1)); 
```

结果：

```
array(3) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [2]=>
  string(1) "3"
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-10T22:12:16.033

这是一个应该输出新索引数组的解决方案。

```
$result = array_deflate( explode( $delim, $array) );

function array_deflate( $arr, $emptyval='' ){
    $ret=[];
    for($i=0,$L=count($arr); $i<$L; ++$i)
        if($arr[$i] !== $emptyval) $ret[]=$arr[$i];
    return $ret;
} 
```

虽然与其他一些建议非常相似，但此实现具有通用使用的好处。对于具有非字符串元素的数组，提供一个类型化的空值作为第二个参数。

`array_deflate( $objArray, new stdClass() );`

`array_deflate( $databaseArray, NULL );`

`array_deflate( $intArray, NULL );`

`array_deflate( $arrayArray, [] );`

`array_deflate( $assocArrayArray, [''=>NULL] );`

`array_deflate( $processedArray, new Exception('processing error') );`

.

.

.

带有可选的过滤器参数..

```
function array_deflate( $arr, $trigger='', $filter=NULL, $compare=NULL){
    $ret=[];
    if ($filter === NULL) $filter = function($el) { return $el; };
    if ($compare === NULL) $compare = function($a,$b) { return $a===$b; };

    for($i=0,$L=count($arr); $i<$L; ++$i)
        if( !$compare(arr[$i],$trigger) ) $ret[]=$arr[$i];
        else $filter($arr[$i]);
    return $ret;
} 
```

随着使用..

```
function targetHandler($t){ /* .... */ }    
array_deflate( $haystack, $needle, targetHandler ); 
```

将 array_deflate 变成一种处理选择元素并将它们从数组中删除的方法。更好的方法是将 if 语句转换为比较函数，该函数也作为参数传递，以防万一。

`array_inflate`相反，将采用一个额外的数组作为第一个参数，将匹配项推送到同时过滤不匹配项。

```
function array_inflate($dest,$src,$trigger='', $filter=NULL, $compare=NULL){
    if ($filter === NULL) $filter = function($el) { return $el; };
    if ($compare === NULL) $compare = function($a,$b) { return $a===$b; };

    for($i=0,$L=count($src); $i<$L; ++$i)
        if( $compare(src[$i],$trigger) ) $dest[]=$src[$i];
        else $filter($src[$i]);
    return $dest;
} 
```

随着使用..

```
$smartppl=[];    
$smartppl=array_inflate( $smartppl,
                         $allppl,
                         (object)['intelligence'=>110],
                         cureStupid,
                         isSmart);

function isSmart($a,$threshold){
    if( isset($a->intellgence) )    //has intelligence?
        if( isset($threshold->intellgence) )    //has intelligence?
            if( $a->intelligence >= $threshold->intelligence )
                return true;
            else return INVALID_THRESHOLD; //error
        else return INVALID_TARGET; //error
    return false;
}

function cureStupid($person){
    $dangerous_chemical = selectNeurosteroid();
    applyNeurosteroid($person, $dangerous_chemical);

    if( isSmart($person,(object)['intelligence'=>110]) ) 
        return $person;
    else 
        lobotomize($person);

    return $person;
} 
```

从而为世界教育问题提供了一种理想的算法。Aaand 在我将其调整为其他内容之前，我会停在那里。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T16:50:11.770

编写一个包装函数来剥离它们

```
function MyExplode($sep, $str)
{
    $arr = explode($sep, $str);
    foreach($arr as $item)
        if(item != "")
            $out[] = $item;
    return $out;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T16:55:31.210

我没有在这里测试其他建议，但这有效：

```
function different_explode($mypattern,$mystring){
    $array1 = explode($mypattern,$mystring);
    $retArray = Array();
    foreach($array1 as $myval){
        if($myval != ''){
            array_push($retArray,$myval);
        }
    }
    return $retArray;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T17:02:48.807

使用此函数过滤explode函数的输出

```
 function filter_empty(&$arrayvar) {
        $newarray = array();
        foreach ($arrayvar as $k => $value)
            if ($value !== "")
                $newarray[$k] = $value;

        $arrayvar = $newarray;
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-16T14:26:23.323

正则表达式解决方案往往比基本文本替换慢得多，所以我会用单个分隔符替换双分隔符，修剪任何空格的字符串，然后使用爆炸：

```
// assuming $source = '1/2//3/';
$source = str_replace('//', '/', $source);
$source = trim($source);
$parts = explode('/', $source); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-24T03:51:02.700

没有正则表达式开销 - 应该相当有效，strlen 只计算字节数

如果您不关心索引，请删除 array_values()

如果你愿意，可以把它变成函数 explode_interesting( $array, $fix_index = 0 )

```
$interesting = array_values( 
                 array_filter(
                   explode('/', '/1//2//3///4/0/false' ),
                   function ($val) { return strlen($val); }
               ));

echo "<pre>", var_export( $interesting, true ), "</pre>"; 
```

享受，杰夫

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2008-09-15T16:51:02.797

我通常将它包装在对[array_filter](http://uk.php.net/manual/en/function.array-filter.php)的调用中，例如

```
var_dump(array_filter(explode('/', '1/2//3/'))
=>
array(3) {
  [0]=>
  string(1) "1"
  [1]=>
  string(1) "2"
  [3]=>
  string(1) "3"
} 
```

当然，要注意数组键是被维护的；如果您*不*想要这种行为，请记住向 array_values() 添加一个外包装调用。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2008-09-15T16:54:58.217

PHP的[split函数](http://us2.php.net/manual/en/function.split.php)与explode函数类似，只是它允许你输入一个正则表达式模式作为分隔符。大意是：

```
$exploded_arr = split('/\/+/', '1/2//3/'); 
```

# asp.net - .NET Web 应用程序可移植到 SilverLight

> ID：64575
> 
> 赞同：1
> 
> 时间：2008-09-15T16:45:31.580
> 
> 标签：asp.net, silverlight

我工作的公司创建了这个应用程序，它是我们业务的核心，并依赖网络浏览器来执行某些“规则”，如果没有它们，应用程序对我们的客户来说就变得毫无用处。抱歉必须谨慎，NDA 以及许多其他事情使我无法准确说出应用程序是什么。本质上，JavaScript 控制某些定时事件（必须精确到至少秒），这使得使用 ajax/回发等难以控制。

我的问题是：假设大部分代码实际上是 C# 业务逻辑而不是 asp.net 控件，将 ASP.NET 应用程序转换为 SilverLight 有多难？我刚听完 Deep Fried bytes，MS 的人说这听起来真的没什么大不了的。对于 Web 应用程序是这样，还是主要是 Win32 应用程序？

我知道 asp.net 前端与 SilverLight 有根本的不同，但有一堆 C# 代码我不想在必要时重写。我假设将javascript代码替换为silverlight是微不足道的（我知道假设不好，但我必须从某个地方开始），因为它处理定时事件，所以我并不真正关心这一点。我需要想出一个如何缓解这个问题的解决方案，我希望这是一个中间立场：什么都不做，看着我们被客户敲打，用比网页更安全的方式重写整个应用程序只有前端验证。有没有人尝试将 ASP.NET 代码转换为 SilverLight 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T17:12:20.953

如果您的应用程序的大部分都在后端，您应该仍然能够保持大部分代码不变并且只替换前端。但是，Silverlight 需要了解 WPF，这与您的应用当前使用的 HTML/JS 截然不同。我想说如果你的 UI 很薄，移植到 Silverlight 应该很容易，但是 UI 中的业务逻辑越多，它就越难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T17:18:56.630

您使用类库的频率如何，以及可能被视为“危险”的东西，例如 pinvoke、文件系统访问和 System.Diagnostics.Process？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T22:27:17.233

将代码从 ASP.NET 移植到 Silverlight 并非易事。正如 Nate 所指出的，这取决于 ASP.NET 应用程序中有多少是基于 AJAX 的，有多少是基于服务器控件的。

Silverlight 是一种状态完整的客户端技术，这意味着一切都在浏览器内的客户端上运行。ASP.NET 是一种服务器技术，围绕请求/响应模型构建。由于这两个是完全不同的范例，它不是一个直接的端口。

然而，由于 ASP.NET 只是表单数据的 HTML 和 HTTP POST，人们已经进行了实验，他们在 ASP.NET 页面上直接添加了一个 Silverlight 应用程序，并手动构建 HTTP POST 请求并发送回确切的数据ASP.NET 应用程序工作。这几乎就像为您自己的应用程序进行“屏幕抓取”一样。这可以工作，但不会是最佳的。您不会获得性能提升，因为您的 ASP.NET 应用程序必须在每个请求上都经过一个完整的页面周期。

更好的选择是开始将用户在 APS.NET 应用程序中拥有的任何功能包装为 Web 服务。您可以在 ASPX 页面旁边添加这些服务，并逐渐移植应用程序。您将基于这些服务从头开始构建的 UI。

祝你好运！

# c# - C# ODBC 对话框

> ID：64581
> 
> 赞同：1
> 
> 时间：2008-09-15T16:46:01.953
> 
> 标签：c#, odbc, dialog

有关如何显示 ODBC 连接对话框并取回所选 ODBC 的任何信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:57:36.633

```
// a_RootKey is Microsoft.Win32.RegistryKey 
// DSN is a class not provided in this code sample - you can see what properties are needed from the usage below.

List<DSN> DsnList = new List<DSN>();

Microsoft.Win32.RegistryKey SearchKey = a_RootKey.OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\ODBC Data Sources");

if (SearchKey != null)
{

    foreach (string DsnName in SearchKey.GetValueNames() )
    {    
        if ( (string)SearchKey.GetValue(DsnName) == "SQL Server" )
        {
            Microsoft.Win32.RegistryKey anotherkey  = a_RootKey.OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\" + DSNName);
            DSN dsn = new DSN();
            dsn.Name = DSNName;
            dsn.Server = (string)anotherkey.GetValue("Server");
            dsn.Database = (string)anotherkey.GetValue("Database");
            dsn.Driver = (string)anotherkey.GetValue("Driver");

            DsnList.Add(dsn);
        }

    }
}
return DsnList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T17:34:52.710

好的，因为似乎没有人有答案，如何通过 DBSource、即 SQLServer 或 MySQL 遍历 ODBC 连接

# java - 神经网络的 C++/Java 性能？

> ID：64582
> 
> 赞同：6
> 
> 时间：2008-09-15T16:46:04.480
> 
> 标签：java, c++, performance, neural-network

前几天我和一个朋友在午餐时讨论了神经网络 (NN)，他声称用 Java 编写的 NN 的性能将与用 C++ 编写的相似。我知道使用“及时”编译器技术 Java 可以做得很好，但不知何故我就是不买它。有没有人有任何经验可以阐明这个问题？ [这一页](http://en.wikipedia.org/wiki/Comparison_of_Java_and_C%2B%2B#Performance)是我对这个主题的阅读范围。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-15T16:50:08.633

Hotspot JIT 现在可以比 C++*更快地生成代码。*原因是运行时经验优化。

例如，它可以看到某个循环在 99% 的时间内采用“假”分支，并相应地重新排序机器代码指令。

有很多关于这个的文章。如果您想了解所有详细信息，请阅读[Sun 的优秀白皮书](http://java.sun.com/performance/reference/whitepapers/6_performance.html)。有关更多非正式信息，请[尝试这个](http://www.javaworld.com/jw-03-1998/jw-03-hotspot.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T17:01:26.253

我会对 Hotspot JIT 和配置文件引导优化优化 C++ 之间的比较感兴趣。

我看到的热点 JIT（以及任何运行时配置文件优化的 JIT 编译器）的问题是必须保留统计信息并修改代码。虽然在个别情况下这会导致代码运行速度更快，但我怀疑在大多数情况下，配置文件优化的 JIT 编译器会比优化良好的 C 或 C++ 代码运行得更快。（当然我可能是错的。）

无论如何，通常您将受制于更大的项目，使用与编写相同的语言。或者您将受制于同事的知识库。或者您将受制于您所针对的平台（您所针对的架构上是否有可用的 JVM？）。在极少数情况下，您有完全的自由并且您熟悉两种语言，请与您可以使用的工具进行一些比较。这确实是确定什么是最好的唯一方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T17:10:38.117

唯一可能的答案是：制作原型并自己测量。如果对我的经验感兴趣，Java 和 C# 对于我所做的工作来说总是比 C++ 慢得多——我相信主要是因为内存消耗高。当然，你可以得出完全不同的结论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T17:03:15.513

这并不是严格意义上的 C++ vs Java 性能，但在这方面仍然很有趣：[一篇](http://lambda-the-ultimate.org/node/2552)关于在垃圾收集环境中运行的程序性能的论文。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T19:26:54.203

如果过多的垃圾收集是一个问题，您总是可以重用未使用的高流失对象。

创建一个工厂，在创建新对象之前使用那些回收对象的 SoftReferences 队列。然后在使用这些对象的代码中，显式地将这些对象返回给工厂进行回收。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-06-14T17:50:04.383

可能是 C++，尽管我相信除了启动时间很慢之外，您几乎不会注意到其中的区别。然而，Java 使开发更快，维护更容易。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-07-19T07:13:50.073

从总体上看，您可能会争论 5% 的性能差异，通过迁移到 CUDA 或专用硬件，您将获得几个数量级的提升。

# .net - .net：System.Web.Mail 与 System.Net.Mail

> ID：64599
> 
> 赞同：75
> 
> 时间：2008-09-15T16:47:26.020
> 
> 标签：.net, .net-2.0

我正在考虑将我从 .net 1.1 继承的项目转换为 .net 2.0。我担心的主要警告是它希望我从`System.Web.Mail`使用`System.Net.Mail`.

我还没准备好使用 obsolete 重写所有组件`System.Web.Mail`，所以我很想知道是否有社区成员在 .net 2.0 下使用它时遇到问题？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2008-09-15T16:50:48.930

System.Web.Mail 不是 SMTP 协议的完整 .NET 本机实现。相反，它使用 CDONTS 中预先存在的 COM 功能。相比之下，System.Net.Mail 是一个完全托管的 SMTP 客户端实现。

System.Net.Mail 的问题要少得多，因为它避免了 COM 地狱。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-09-06T20:49:40.547

System.Net.Mail 最大的问题是它不支持隐式 SSL。使用 System.Web.Mail 直到您不需要隐式 SSL 支持。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-16T17:09:25.897

这里有 2 个网站，为两者提供文档和示例

[http://www.systemwebmail.com/](http://www.systemwebmail.com/)

[http://www.systemnetmail.com/](http://www.systemnetmail.com/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-09-16T13:57:14.533

System.Web.Mail 已弃用，但仍应有效。您会对有关它已过时的警告感到恼火，但该功能仍在继续......暂时。

我同意其他人的观点，即转换为 System.Net.Mail 非常简单。我怀疑你必须重写超过一两行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-15T17:32:12.293

有几次我遇到这个问题，我发现方法和属性几乎都是相同的——改变对象类型几乎就是我所要做的。还有一两个其他的小东西，但它们出现在线条中，很明显如何处理 Intellisense。我会投票支持完全托管的解决方案，尽快远离 cdonts。它甚至没有安装在 03 服务器和更新的服务器上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T16:49:57.513

是的，我们遇到了同样的问题，我们也决定不升级。我们没有发现任何问题，因此您可以忽略警告。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-10-20T20:34:09.047

我们已经实现了 .netmail，它开始工作现在需要用户名和密码。所以我们回到 webmail 工作正常。

# .net - AssemblyVersion、AssemblyFileVersion 和 AssemblyInformationalVersion 之间有什么区别？

> ID：64602
> 
> 赞同：903
> 
> 时间：2008-09-15T16:47:38.453
> 
> 标签：.net, assemblies, attributes

有三个程序集版本属性。有什么区别？如果我使用`AssemblyVersion`并忽略其余部分可以吗？

* * *

MSDN 说：

*   [组装版本](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.assemblyversionattribute)：

    > 指定被赋予属性的程序集的版本。

*   [组装文件版本](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.assemblyfileversionattribute)：

    > 指示编译器为 Win32 文件版本资源使用特定版本号。Win32 文件版本不需要与程序集的版本号相同。

*   [装配信息版本](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.assemblyinformationalversionattribute)：

    > 定义程序集清单的附加版本信息。

* * *

*[这是对使用程序集属性的最佳实践是什么](https://stackoverflow.com/questions/62353/what-are-the-best-practices-for-using-assembly-attributes)的后续行动？*

* * *

## 回答 #1

> 赞同：946
> 
> 时间：2008-09-15T17:46:57.767

**汇编版本**

引用您的程序集的其他程序集将在哪里查找。如果此编号发生更改，其他程序集必须更新它们对您程序集的引用！仅当它破坏向后兼容性时才更新此版本。`AssemblyVersion`是必需的。

我使用格式：*major.minor*（对于非常稳定的代码库来说是*major ）。*这将导致：

```
[assembly: AssemblyVersion("1.3")] 
```

如果您严格遵循[SemVer](https://semver.org/)，则这意味着您仅在*主要*更改时才更新，例如 1.0、2.0、3.0 等。

**程序集文件版本**

用于部署（如安装程序）。您可以为每个部署增加此数字。使用它来标记具有相同`AssemblyVersion`但从不同构建和/或代码生成的程序集。

在 Windows 中，可以在文件属性中查看。

AssemblyFileVersion 是可选的。如果未给出，则使用 AssemblyVersion。

我使用格式：*major.minor.patch.build*，前三部分遵循[SemVer](https://semver.org/)，最后一部分使用 buildserver 的 buildnumber（0 表示本地构建）。这将导致：

```
[assembly: AssemblyFileVersion("1.3.2.42")] 
```

请注意[System.Version](https://docs.microsoft.com/en-us/dotnet/api/system.version)将这些部分命名为`major.minor.build.revision`!

**汇编信息版本**

程序集的产品版本。这是您在与客户交谈或在您的网站上显示时使用的版本。此版本可以是一个字符串，例如“ *1.0 Release Candidate* ”。

`AssemblyInformationalVersion`是可选的。如果未给出，则使用 AssemblyFileVersion。

我使用格式：*major.minor[.patch] [revision as string]*。这将导致：

```
[assembly: AssemblyInformationalVersion("1.3 RC1")] 
```

* * *

## 回答 #2

> 赞同：622
> 
> 时间：2009-04-29T12:01:13.047

鉴于目前至少有三种方法可以为您的程序集指定版本，因此在 .NET 中对程序集进行版本控制可能是一个令人困惑的前景。

以下是与版本相关的三个主要程序集属性：

```
// Assembly mscorlib, Version 2.0.0.0
[assembly: AssemblyFileVersion("2.0.50727.3521")]
[assembly: AssemblyInformationalVersion("2.0.50727.3521")]
[assembly: AssemblyVersion("2.0.0.0")] 
```

按照惯例，版本的四个部分分别称为**Major Version**、**Minor Version**、**Build**和**Revision**。

# `AssemblyFileVersion`旨在唯一标识*单个程序集*的构建

 *通常，您将手动设置 Major 和 Minor AssemblyFileVersion 以反映程序集的版本，然后在每次构建系统编译程序集时增加 Build 和/或 Revision。AssemblyFileVersion 应该允许您唯一标识程序集的构建，以便您可以将其用作调试任何问题的起点。

在我当前的项目中，我们让构建服务器将源代码控制存储库中的更改列表编号编码到 AssemblyFileVersion 的构建和修订部分中。这允许我们直接从程序集映射到其源代码，用于构建服务器生成的任何程序集（无需在源代码控制中使用标签或分支，或手动保留任何已发布版本的记录）。

此版本号存储在 Win32 版本资源中，可以在查看程序集的 Windows 资源管理器属性页时看到。

**CLR 不关心也不检查 AssemblyFileVersion。**

# `AssemblyInformationalVersion`旨在代表您的整个产品的版本

AssemblyInformationalVersion 旨在允许对整个产品进行连贯的版本控制，该产品可能包含许多独立版本的程序集，可能具有不同的版本控制策略，并且可能由不同的团队开发。

> “例如，一个产品的 2.0 版本可能包含多个程序集；其中一个程序集被标记为 1.0 版，因为它是未在同一产品的 1.0 版中发布的新程序集。通常，您设置此版本号的主要和次要部分来表示您的产品的公共版本。然后，每次打包完整产品及其所有组件时，都会增加构建和修订部分。” — Jeffrey Richter，[CLR via C#（第二版）] p。57

**CLR 不关心也不检查 AssemblyInformationalVersion。**

# 这`AssemblyVersion`是 CLR 关心的唯一版本（但它关心整个`AssemblyVersion`）

CLR 使用 AssemblyVersion 绑定到强命名程序集。它存储在已构建程序集的 AssemblyDef 清单元数据表中，以及引用它的任何程序集的 AssemblyRef 表中。

这非常重要，因为这意味着当您引用一个强命名程序集时，您将紧密绑定到该程序集的特定 AssemblyVersion。整个 AssemblyVersion 必须完全匹配才能使绑定成功。例如，如果您在构建时引用了强命名程序集的 1.0.0.0 版本，但在运行时只有该程序集的 1.0.0.1 版本可用，则绑定将失败！[（然后您必须使用Assembly Binding Redirection](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/how-to-enable-and-disable-automatic-binding-redirection)来解决这个问题。）

# `AssemblyVersion`对整体是否必须匹配感到困惑。（是的，它确实。）

关于整个 AssemblyVersion 是否必须完全匹配才能加载程序集存在一些混淆。有些人错误地认为只有 AssemblyVersion 的主要部分和次要部分必须匹配才能使绑定成功。这是一个合理的假设，但它最终是不正确的（从 .NET 3.5 开始），并且为您的 CLR 版本验证这一点很简单。只需执行[此示例代码](http://webjam-upload.s3.amazonaws.com/assemblybinding___fcbd12afca1d4bb3bf94bf88d1616d25__100__.rar)。

在我的机器上，第二次组装加载失败，融合日志的最后两行清楚地说明了原因：

```
.NET Framework Version: 2.0.50727.3521
---
Attempting to load assembly: Rhino.Mocks, Version=3.5.0.1337, Culture=neutral, PublicKeyToken=0b3305902db7183f
Successfully loaded assembly: Rhino.Mocks, Version=3.5.0.1337, Culture=neutral, PublicKeyToken=0b3305902db7183f
---
Attempting to load assembly: Rhino.Mocks, Version=3.5.0.1336, Culture=neutral, PublicKeyToken=0b3305902db7183f
Assembly binding for  failed:
System.IO.FileLoadException: Could not load file or assembly 'Rhino.Mocks, Version=3.5.0.1336, Culture=neutral, 
PublicKeyToken=0b3305902db7183f' or one of its dependencies. The located assembly's manifest definition 
does not match the assembly reference. (Exception from HRESULT: 0x80131040)
File name: 'Rhino.Mocks, Version=3.5.0.1336, Culture=neutral, PublicKeyToken=0b3305902db7183f'

=== Pre-bind state information ===
LOG: User = Phoenix\Dani
LOG: DisplayName = Rhino.Mocks, Version=3.5.0.1336, Culture=neutral, PublicKeyToken=0b3305902db7183f
 (Fully-specified)
LOG: Appbase = [...]
LOG: Initial PrivatePath = NULL
Calling assembly : AssemblyBinding, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Post-policy reference: Rhino.Mocks, Version=3.5.0.1336, Culture=neutral, PublicKeyToken=0b3305902db7183f
LOG: Attempting download of new URL [...].
WRN: Comparing the assembly name resulted in the mismatch: Revision Number
ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
```

我认为这种混淆的根源可能是因为微软最初打算对完整的 AssemblyVersion 的这种严格匹配更宽松一点，只匹配主要和次要版本部分：

> “加载程序集时，CLR 将自动查找与所请求程序集的主要/次要版本匹配的最新安装的服务版本。” — Jeffrey Richter，[CLR via C#（第二版）] p。56

这是 1.0 CLR 的 Beta 1 中的行为，但是此功能在 1.0 版本之前被删除，并且没有设法在 .NET 2.0 中重新出现：

> “注意：我刚刚描述了你应该如何看待版本号。不幸的是，CLR 不以这种方式处理版本号。[在 .NET 2.0 中]，CLR 将版本号视为不透明值，如果程序集依赖于另一个程序集的 1.2.3.4 版本，则 CLR 尝试仅加载 1.2.3.4 版本（除非绑定重定向到位）。但是， **Microsoft 计划在未来版本中更改 CLR 的加载程序，以便它加载给定主要/次要程序集版本的最新构建/修订版**. 例如，在 CLR 的未来版本中，如果加载程序试图查找程序集的 1.2.3.4 版本并且版本 1.2.5.0 存在，则加载程序会自动选择最新的服务版本。这对 CLR 的加载器来说将是一个非常受欢迎的变化——我等不及了。” — Jeffrey Richter，[CLR via C#（第二版）] p。164（重点是我的）

由于此更改仍未实施，我认为可以肯定地假设 Microsoft 已经回溯了此意图，现在更改此内容可能为时已晚。我试图在网上搜索以了解这些计划发生了什么，但我找不到任何答案。我仍然想深入了解它。

所以我给杰夫·里希特发了电子邮件，直接问他——我想如果有人知道发生了什么，那就是他。

他在 12 小时内回复，同样是在星期六早上，并澄清说 .NET 1.0 Beta 1 加载程序确实实现了这种“自动前滚”机制来获取程序集的最新可用构建和修订，但这种行为是在 .NET 1.0 发布之前恢复。后来它打算重振它，但在 CLR 2.0 发布之前它没有实现。然后是 Silverlight，它优先考虑 CLR 团队，所以这个功能被进一步延迟。与此同时，在 CLR 1.0 Beta 1 时代周围的大多数人都已经继续前进，因此尽管已经投入了所有艰苦的工作，但它不太可能看到曙光。

当前的行为似乎将继续存在。

从我与 Jeff 的讨论中还值得注意的是，AssemblyFileVersion 仅在删除“自动前滚”机制后才添加 - 因为在 1.0 Beta 1 之后，对 AssemblyVersion 的任何更改对您的客户来说都是一个重大更改，然后无处可以安全地存储您的内部版本号。AssemblyFileVersion 是安全的避风港，因为 CLR 永远不会自动检查它。也许这样更清楚，有两个不同的版本号，具有不同的含义，而不是试图在 AssemblyVersion 的主要/次要（破坏）和构建/修订（非破坏）部分之间进行分离。

# 底线：仔细考虑当你改变你的`AssemblyVersion`

寓意是，如果您要交付其他开发人员将要引用的程序集，则需要非常小心何时更改（和不）更改这些程序集的 AssemblyVersion。对 AssemblyVersion 的任何更改都意味着应用程序开发人员要么必须针对新版本重新编译（以更新那些 AssemblyRef 条目），要么使用程序集绑定重定向来手动覆盖绑定。

*   **不要**为旨在向后兼容的服务版本更改 AssemblyVersion。
*   **请**更改您知道有重大更改的版本的 AssemblyVersion。

再看一下 mscorlib 上的版本属性：

```
// Assembly mscorlib, Version 2.0.0.0
[assembly: AssemblyFileVersion("2.0.50727.3521")]
[assembly: AssemblyInformationalVersion("2.0.50727.3521")]
[assembly: AssemblyVersion("2.0.0.0")] 
```

请注意，AssemblyFileVersion 包含所有有趣的服务信息（它是该版本的 Revision 部分，告诉您您正在使用哪个 Service Pack），同时 AssemblyVersion 固定在一个无聊的旧 2.0.0.0。对 AssemblyVersion 的任何更改都会强制每个引用 mscorlib.dll 的 .NET 应用程序针对新版本重新编译！

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2008-09-15T16:51:29.130

`AssemblyVersion`几乎保持在 .NET 内部，而`AssemblyFileVersion`Windows 所看到的是。如果您转到位于目录中的程序集的属性并切换到版本选项卡，`AssemblyFileVersion`那么您将在顶部看到。如果您按版本对文件进行排序，这就是资源管理器所使用的。

映射到“`AssemblyInformationalVersion`产品版本”并且是纯粹的“人类使用”。

`AssemblyVersion`当然是最重要的，但我也不会跳过`AssemblyFileVersion`。如果您不提供`AssemblyInformationalVersion`，编译器会通过剥离版本号的“修订”部分并保留major.minor.build 来为您添加它。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2008-09-15T16:52:36.773

`AssemblyInformationalVersion`并`AssemblyFileVersion`在您通过 Windows 资源管理器查看文件属性查看文件的“版本”信息时显示。这些属性实际上被编译到`VERSION_INFO`由编译器创建的资源中。

`AssemblyInformationalVersion`是“产品版本”值。`AssemblyFileVersion`是“文件版本”值。

`AssemblyVersion`特定于 .NET 程序集，.NET 程序集加载器使用它来了解在运行时加载/绑定哪个版本的程序集。

其中，.NET 绝对需要的唯一一个是`AssemblyVersion`属性。不幸的是，当它不加选择地更改时，它也可能导致大多数问题，特别是如果您对程序集进行强命名。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-06-23T04:51:15.070

为了使这个问题保持最新，值得强调的`AssemblyInformationalVersion`是 NuGet 使用并反映了**包版本**，包括任何预发布后缀。

例如，使用 asp.net 核心 dotnet-cli 打包的 AssemblyVersion 为 1.0.3.*

```
dotnet pack --version-suffix ci-7 src/MyProject 
```

生成一个版本为 1.0.3-ci-7 的包，您可以使用以下方法通过反射进行检查：

```
CustomAttributeExtensions.GetCustomAttribute<AssemblyInformationalVersionAttribute>(asm); 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-11-27T22:51:32.157

值得注意的是其他一些事情：

1.  如生成的程序集文件的 Windows 资源管理器属性对话框中所示，有两个地方称为“文件版本”。对话框标题中显示的是 AssemblyVersion，而不是 AssemblyFileVersion。

    在其他版本信息部分，还有另一个元素称为“文件版本”。在这里您可以看到作为 AssemblyFileVersion 输入的内容。

2.  AssemblyFileVersion 只是纯文本。它不必符合 AssemblyVersion 所做的编号方案限制（例如，<build> < 65K）。如果您愿意，它可以是 3.2.<release tag text>.<datetime>。您的构建系统将必须填写令牌。

    此外，它不受 AssemblyVersion 的通配符替换。如果您在 AssemblyInfo.cs 中只有一个值“3.0.1.*”，那么这正是其他版本信息 -> 文件版本元素中将显示的内容。

3.  不过，我不知道使用数字文件版本号以外的其他内容对安装程序的影响。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-02-17T05:21:50.037

当程序集的 AssemblyVersion 更改时，如果它具有强名称，则需要重新编译引用程序集，否则程序集不会加载！如果它没有强名称，如果没有显式添加到项目文件中，则在构建时不会将其复制到输出目录，因此您可能会错过依赖程序集，尤其是在清理输出目录之后。

# vbscript - 我可以在一个 HTA 中混合 VBScript 和 JScript 吗？

> ID：64605
> 
> 赞同：2
> 
> 时间：2008-09-15T16:48:05.567
> 
> 标签：vbscript, javascript, hta

是否可以在同一个 HTA 中同时使用 JScript 和 VBScript？我可以从 JScript 调用 VBScript 函数，反之亦然吗？是否有任何“陷阱”，例如首先运行 JScript，然后运行 ​​VBScript（经典 ASP 页面存在此问题）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T16:52:02.843

是的，只需将它们分成不同的脚本标签：

```
<script language="javascript">
   // javascript code
</script>

<script language="vbscript">
   ' vbscript code
</script> 
```

编辑：而且，是的，您可以在 Javascript 和 VBScript 之间交叉调用，而无需额外工作。

编辑：任何 Windows 脚本技术也是如此。它在 WSF 文件中工作，并且可以包含以任何受支持的 ActiveScript 语言（例如 Perl）编写的脚本，只要安装了引擎。

编辑：首先执行所有 JScript 的特定“陷阱”，然后 VBScript 与 ASP 如何处理脚本有关。MSHTA 主机（使用 IE 的引擎）没有这个问题。不过，我不太喜欢 HTA，所以我无法解决任何其他可能的“陷阱”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:27:41.950

您也可以在它们之间提供参考。例如：在后台 vbscript 上的某些功能处理数据库和 FSO 问题，并让 javascript 在前端使用 DOM 创建用户界面和对话框等。每当您需要时，您都可以从每个脚本端调用这两个函数。在js中可以调用vbs函数，在vbscript中也可以调用js函数。然后，您可以在调用它们的地方使用它们的回报。问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-08T02:53:21.233

事件处理程序（如 Onclick）的代码应以“javascript:”或“vbscript:”为前缀

# ssl - 我是否通过在 IIS5 中禁用 SSL 2.0 和 PCT 1.0 来拒绝客户？

> ID：64621
> 
> 赞同：4
> 
> 时间：2008-09-15T16:50:07.527
> 
> 标签：ssl, iis-5

在 IIS5 中禁用 SSL 2.0 和 PCT 1.0 是否有失去销售的风险？

澄清：由于 SSL 2.0 或 PCT 1.0 在 Web 服务器上被禁用，客户端无法通过 SSL 连接以完成电子商务交易将导致销售损失。

微软 kbase 文章： http: [//support.microsoft.com/kb/187498](http://support.microsoft.com/kb/187498)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T19:51:08.170

现代浏览器要么似乎根本不支持 SSLv2（Google Chrome、Opera 9.52、Firefox），要么默认禁用它（IE7、IE8）。

话虽如此，您是否担心会因使用不那么现代的网络浏览器的人而失去业务？

可能更重要的是，您是否担心客户的安全？即使他们只能使用 SSLv2 进行连接，您是否希望他们使用已知不安全的协议与您执行安全交易（请参阅[Google](http://www.google.ca/search?q=sslv2+insecure)）？

作为一名计算机专业人士，我会毫不犹豫地向管理层建议禁用 SSLv2。我会把它留给豆类柜台来确定他们是否认为额外的收入值得潜在的责任。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T20:13:40.943

不，完全支持 SSLv2 的用户数量，更不用说*仅支持 SSLv2 了*，可以忽略不计。它自 1996 年以来就已经过时，并且在所有重要的现代浏览器中都被禁用甚至不包含。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T17:54:26.733

只有你才能真正回答这个问题。您的客户对您网站的体验将通过他们的浏览器进行调解。查找浏览器信息的第一个地方是用于访问您的网站的用户代理列表。希望您有一个好的日志分析器，例如 Analog、Weblog、Google Analytics、WebTrends 等。这是第一个查看的地方，应该可以让您对您的一般社区支持的 SSL 级别有一个很好的了解。

您可能还想更改您的应用程序以检查访问您网站“完整电子商务交易”部分的用户浏览器支持的 SSL 级别。这是确定您是否拒绝客户的最佳方法。

请记住，SSL 级别是在服务器和客户端之间自动协商的（首先使用最佳加密），因此您不一定需要禁用旧版本，但您可以向用户弹出一条消息，鼓励他们升级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T19:55:33.337

大概您使用 SSL 来保护用户免受中间人或其他攻击，是吗？SSLv2 对此毫无用处。禁用它——在不支持 SSLv3 或 TLS 的情况下使用浏览器的用户数量非常少，而且让他们成为别人的问题比解释为什么尼日利亚有人使用他们的信用卡更容易。

# php - PHP 开发人员需要了解有关 https / 安全套接字层连接的哪些信息？

> ID：64631
> 
> 赞同：10
> 
> 时间：2008-09-15T16:51:11.753
> 
> 标签：php, security, ssl, https

关于 https 连接的方式和原因，我几乎一无所知。显然，当我传输密码或信用卡信息等安全数据时，https 是一个关键工具。不过，我需要知道什么？您看到开发人员在项目中实施时最常犯的错误是什么？有时https只是个坏主意吗？谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-15T22:46:27.217

为站点提供 HTTPS 或安全套接字层 (SSL) 证书，通常由证书颁发机构 (CA) 签名，该证书颁发机构实际上是受信任的第 3 方，可验证有关您的站点的一些基本详细信息，并证明它可以使用在浏览器中。如果您的浏览器信任 CA，则它信任由该 CA 签名的任何证书（这称为信任链）。

每个 HTTP（或 HTTPS）请求都由两部分组成：请求和响应。当您通过 HTTPS 请求某些内容时，实际上会在后台发生一些事情：

*   客户端（浏览器）进行“握手”，请求服务器的公钥和标识。
    *   此时，浏览器可以检查有效性（站点名称是否匹配？日期范围是当前的吗？它是否由它信任的 CA 签名？）。它甚至可以联系 CA 并确保证书有效。
*   客户端创建一个新的 pre-master secret，使用服务器的公钥加密（因此只有服务器可以解密）并发送到服务器
*   服务器和客户端都使用这个 pre-master secret 来生成 master secret，然后使用它来创建一个对称会话密钥，用于实际的数据交换
*   双方发送消息说他们已经完成握手
*   然后服务器正常处理请求，然后使用会话密钥加密响应

如果连接保持打开状态，则每个连接都将使用相同的对称密钥。

如果建立了新连接，并且双方仍然拥有主密钥，则可以在“简短握手”中生成新的会话密钥。通常，浏览器将存储主密钥直到它关闭，而服务器将存储它几分钟或几个小时（取决于配置）。

有关会话长度的更多信息，请参阅[HTTPS 对称密钥持续多长时间？](https://security.stackexchange.com/a/55477/27894)

**证书和主机名**

证书被分配了一个通用名称 (CN)，对于 HTTPS，它是域名。CN 必须完全匹配，例如，CN 为“example.com”的证书将与域“www.example.com”不匹配，用户将在浏览器中收到警告。

在[SNI](https://en.wikipedia.org/wiki/Server_Name_Indication)之前，不可能在一个 IP 上托管多个域名。因为证书是在客户端甚至发送实际的 HTTP 请求之前获取的，并且 HTTP 请求包含 Host: 标头行，告诉服务器使用哪个 URL，服务器无法知道为给定的服务提供什么证书要求。SNI 将主机名添加到 TLS 握手的一部分，因此只要客户端和服务器都支持它（在 2015 年，它被广泛支持），那么服务器就可以选择正确的证书。

即使没有 SNI，提供多个主机名的一种方法是使用包含主题备用名称 (SAN) 的证书，这些证书本质上是证书对其有效的附加域。例如，谷歌使用一个证书来保护它的许多网站。

[![谷歌 SSL 证书](https://i.stack.imgur.com/3Tniz.png)](https://i.stack.imgur.com/3Tniz.png)

另一种方法是使用通配符证书。可以获得像“ *.example.com”这样的证书，在这种情况下，“www.example.com”和“foo.example.com”都对该证书有效。但是，请注意“example.com”与“.example.com”不匹配*，“foo.bar.example.com”也不匹配。如果您使用“www.example.com”作为证书，则应将“example.com”上的任何人重定向到“www”。地点。如果他们请求[https://example.com](https://example.com)，除非您将其托管在单独的 IP 上并拥有两个证书，否则将收到证书错误。

当然，您可以混合使用通配符和 SAN（只要您的 CA 允许您这样做）并为“example.com”和 SAN“ *.example.com”、“example.net”和“* .example.net”，例如。

**形式**

严格来说，如果是提交表单，表单页面本身是否没有加密也没关系，只要提交的 URL 是 https:// 的 URL。实际上，用户已经被训练（至少在理论上）不要提交页面，除非他们看到小“锁定图标”，所以即使是表单本身也应该通过 HTTPS 提供服务来获得这个。

**流量和服务器负载**

HTTPS 流量比同等的 HTTP 流量大得多（由于加密和证书开销），而且它也给服务器带来了更大的压力（加密和解密）。如果您有一个负载很重的服务器，则可能需要对使用 HTTPS 提供哪些内容非常有选择性。

**最佳实践**

*   如果您不只是对整个站点使用 HTTPS，它应该会根据需要自动重定向到 HTTPS。每当用户登录时，他们都应该使用 HTTPS，如果您使用会话 cookie，则 cookie 应该[设置安全标志](http://php.net/manual/en/function.session-set-cookie-params.php)。这可以防止截获会话 cookie，鉴于开放（未加密）wifi 网络的普及，这一点尤其重要。

*   页面上的任何资源都应该来自页面使用的相同方案。如果您在使用 HTTPS 加载页面时尝试从 http:// 获取图像，用户将收到安全警告。您应该使用完全限定的 URL，或者另一种简单的方法是使用不包含主机名的绝对 URL（例如，src="/images/foo.png"），因为它们适用于两者。

    *   这包括外部资源（例如，谷歌分析）
*   从 HTTPS 更改为 HTTP 时不要执行 POST（表单提交）。大多数浏览器都会将此标记为安全警告。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-16T08:46:33.890

一般来说，我不会深入探讨 SSL，gregmac 在这方面做得很好，见下文 ;-)。

然而，在使用 SSL/TLS 方面，一些最常见的（和严重的）错误（不是专门的 PHP）：

1.  当您应该强制执行 HTTPS 时允许 HTTP
2.  通过 HTTP 从 HTTPS 页面检索一些资源（例如图像、IFRAME 等）
3.  无意中从 HTTPS 页面定向到 HTTP 页面 - 请注意，这包括“虚假”页面，例如“about:blank”（我已经看到它用作 IFRAME 占位符），这将不必要且令人不快地弹出警告。

4.  Web 服务器配置为支持旧的、不安全的 SSL 版本（例如，SSL v2 很常见，但严重损坏）（好吧，这不完全是程序员的问题，但有时没有其他人会处理它......）

5.  配置为支持不安全密码套件的 Web 服务器（我见过 NULL 密码仅在使用中，它基本上完全不提供加密）（同上）

6.  自签名证书 - 防止用户验证站点的身份。

7.  从 HTTP 页面请求用户的凭据，即使提交到 HTTPS 页面也是如此。同样，这会阻止用户在提供密码之前验证服务器的身份......即使密码是加密传输的，用户也无法知道他是否在虚假网站上 - 或者即使它会被加密。

8.  非安全 cookie - 与安全相关的 cookie（如 sessionId、身份验证令牌、访问令牌等）**必须**设置为“安全”属性集。这个很重要！如果未设置为安全，则安全 cookie，例如 SessionId，可以通过 HTTP (!) 传输 - 攻击者可以确保这会发生 - 从而允许会话劫持等。当你在它的时候（虽然这不是直接的相关），也可以在 cookie 上设置 HttpOnly 属性（有助于缓解一些 XSS）。

9.  过于宽松的证书 - 假设您有多个子域，但并非所有子域都处于相同的信任级别。例如，您有 www.yourdomain.com、dowload.yourdomain.com 和 publicaccess.yourdomain.com。因此，您可能会考虑使用通配符证书......但您也有secure.yourdomain.com 或finance.yourdomain.com - 即使在不同的服务器上。然后 publicaccess.yourdomain.com 将能够冒充secure.yourdomain.com ......虽然可能存在这样的情况，但通常你会想要一些权限分离......

暂时就记得这么多了，以后有机会再改吧……

至于什么时候使用 SSL/TLS 是个坏主意 - 如果您有不针对特定受众（单个用户或注册成员）的公共信息，并且您并不特别关注他们专门从正确的来源（例如股票代码值必须来自经过身份验证的来源......） - 那么就没有真正的理由产生开销（而不仅仅是性能...... dev/test/cert/etc）。

但是，如果您的站点和另一个更敏感的站点之间共享资源（例如同一台服务器），那么更敏感的站点应该在这里设置规则。

此外，密码（和其他凭据）、信用卡信息等应始终通过 SSL/TLS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T17:00:10.110

确保在 HTTPS 页面上时，页面上的所有元素都来自 HTTPS 地址。这意味着元素应该具有相对路径（例如“/images/banner.jpg”），以便继承协议，或者您需要检查每个页面以找到协议，并将其用于所有元素。

注意：这包括所有外部资源（如 Google Analytics javascript 文件）！

我能想到的唯一缺点是它增加了（几乎可以忽略不计的）浏览器和服务器的处理时间。我建议只加密需要的传输。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T17:02:10.353

我想说，使用启用 SSL 的网站时最常见的错误是

1.  该站点错误地将用户从页面重定向到 http 作为 https
2.  该网站不会在必要时自动切换到 https
3.  https 页面上的图像和其他资产正在通过 http 加载，这将触发浏览器的安全警报。确保所有资产都使用指定 https 的完全限定 URI。
4.  安全证书仅适用于一个子域（例如 www），但您的站点实际上使用了多个子域。如果需要，请确保获得通配符证书。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T17:01:53.723

我建议任何时候将*任何*用户数据存储在数据库中并进行通信，使用 https。即使用户数据是平凡的，也要考虑这一要求，因为即使是这些平凡的细节中的许多也被该用户用于在其他网站上识别自己的身份。考虑一下银行问你的所有随机安全问题（比如你住在哪条街上？）。这可以很容易地从地址字段中获取。在这种情况下，数据不是您认为的密码，但也可能是密码。此外，您永远无法预料哪些用户数据将用于其他地方的安全问题。您还可以预期，凭借普通网络用户（想想您的祖母）的智慧，这些信息可能会在其他地方构成该用户密码的一部分。

如果您使用 https，则为一个指针

这样做，如果用户键入 [http://www.website-that-needs-https.com/etc/yadda.php](http://www.website-that-needs-https.com/etc/yadda.php) 他们将自动被重定向到 [https://www.website-that-needs-https.com /etc/yadda.php](https://www.website-that-needs-https.com/etc/yadda.php) （个人讨厌）

但是，如果您只是在做一个普通的 html 网页，那本质上是从服务器到用户的单向信息传输，不用担心。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T22:51:24.397

这里都是非常好的提示...但我只是想添加一些内容..
我看到一些网站为您提供 http 登录页面，并且仅在您发布用户名/密码后才将您重定向到 https .. 这意味着用户名是在在建立 https 连接之前清除..

简而言之，制作您从 ssl 登录的页面，而不是发布到 ssl 页面。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-10-16T20:56:04.170

我发现尝试`<link>`使用不存在的样式表也会引起安全警告。当我使用正确的路径时，出现了锁定图标。

# c# - 在 C# 中从科学计数法字符串转换为浮点数

> ID：64639
> 
> 赞同：31
> 
> 时间：2008-09-15T16:52:06.087
> 
> 标签：c#, floating-point, scientific-notation

使用 C# 从科学计数法字符串（例如“1.234567E-06”）转换为浮点变量的正确方法是什么？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2008-09-15T16:55:10.230

```
Double.Parse("1.234567E-06", System.Globalization.NumberStyles.Float); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-10-21T08:49:33.730

也考虑使用

```
Double.TryParse("1.234567E-06", System.Globalization.NumberStyles.Float, out MyFloat); 
```

`MyFloat`如果由于某种原因无法执行转换，这将确保将其设置为值 0。或者，您可以将示例包装`Double.Parse()`在一个`Try..Catch`块中，并`MyFloat`在检测到异常时设置为您选择的值。

# c# - 在 C# 中解析确切日期不应强制您创建 IFormatProvider

> ID：64640
> 
> 赞同：5
> 
> 时间：2008-09-15T16:52:25.213
> 
> 标签：c#, .net, datetime, parsing, globalization

如果我错了，请有人纠正我，但是在 C# 中解析 yyyy/MM/dd（或其他特定格式）日期**应该**像

```
DateTime.ParseExact(theDate, "yyyy/MM/dd"); 
```

但不，C# 强制您创建一个 IFormatProvider。

是否有一种 app.config 友好的设置方式，所以我不需要每次都这样做？

```
DateTime.ParseExact(theDate, "yyyy/MM/dd", new CultureInfo("en-CA", true)); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-15T16:54:23.150

IFormatProvider 参数可以为空。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T17:04:44.887

ParseExact 需要一种文化：考虑“yyyy MMM dd”。MMM 将是使用当前区域性的本地化月份名称。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T16:59:26.723

使用当前的应用程序文化：

```
DateTime.ParseExact("2008/12/05", "yyyy/MM/dd", System.Globalization.CultureInfo.CurrentCulture); 
```

您可以使用 Globalization 标签在 app.config 中设置应用程序文化。我认为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-15T16:56:18.107

创建扩展方法：

```
public static DateTime ParseExactDateTime(this string dateString, string formatString) {
    return DateTime.ParseExact(dateString, formatString, new CultureInfo("en-CA", true));
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T17:06:26.707

它需要格式提供程序来确定特定的日期和时间符号和字符串（例如特定语言的星期几的名称）。您可以使用 null，在这种情况下，将使用与当前区域性对应的 CultureInfo 对象。

如果您不想每次都指定它，请创建一个扩展方法，将 null 或 CultureInfo("en-CA", true) 作为格式提供程序传递。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T16:59:59.580

您也可以简单地创建一次 IFormatProvider 并将其存储以供以后使用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T17:02:54.470

您还可以使用 Convert 类

```
Convert.ToDateTime("2008/11/25"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-01-07T20:25:10.967

//将日期转换为MySql兼容格式

DateTime DateValue = Convert.ToDateTime(datetimepicker.text);

字符串日期值 = DateValue.ToString("yyyy-MM-dd");

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-03-02T17:15:30.093

使用 Globalization.CultureInfo.InvariantCulture 有什么问题？

# c# - 在 C++ 中定义一个需要在 C# 和 C++ 中实现的接口

> ID：64645
> 
> 赞同：5
> 
> 时间：2008-09-15T16:52:59.283
> 
> 标签：c#, .net, c++, interop, interface

我有一个在 C++ 中定义的接口，现在需要在 C# 中实现。解决此问题的最佳方法是什么？我根本不想在我的接口定义中使用 COM。我现在解决这个问题的方法是有两个接口定义，一个在 C++ 中，一个在 C# 中。然后我将 C# 接口公开为 COM 服务器。这是我用 C++ 编写的应用程序，可以调用 C#。无论如何我可以避免在 C++ 和 C# 中定义我的实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T17:33:46.673

如果您愿意为托管代码使用 C++/CLI 而不是 C#，那么您可以直接通过头文件使用本机 C++ 接口定义。这将是多么容易将取决于您的界面中的确切内容 - 最简单的情况是您可以从 C 中使用的东西。

查看 Marcus Heege 的[Expert C++/CLI: .NET for Visual C++ Programmers](https://rads.stackoverflow.com/amzn/click/com/1590597567)，了解有关在 .NET 中混合本机和托管 C++ 的许多有用信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-18T03:48:54.727

[Swig](http://www.swig.org)是一个很好的工具，可以用其他语言（如 C#）包装 C++ 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T17:02:01.290

你为什么不想使用COM？

这本来是我的建议。COM 互操作对我来说非常有效，我在 C# 中使用了 COM 对象和接口（只需引用 COM 对象，运行时可调用包装器就会自动创建）。同样，将 C# 类标记为“注册 COM 互操作”也有相反的效果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T18:06:54.643

用 C++ 编写接口并使用宏使其看起来像 UNIX 上的标准 cpp 头文件和 Windows 上的 IDL 文件（如果这不起作用，您可以随时编写 python/ruby 脚本从C++ 头文件）。

编译 IDL 以生成类型库。使用 TypeLib Importer 为 C# 生成接口定义并在那里实现接口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T23:18:41.710

另一种方法是使用“平面”的 C 风格 API。你不妨用它`extern "C"`来防止意外超载。使用 DEF 文件显式命名导出的函数，因此绝对不会以任何方式修饰它们（C++ 函数使用导出表中参数类型的编码进行“修饰”）。

在 x86 上，请注意调用约定。可能是明确声明使用`__stdcall`or `__cdecl`。因为 P/Invoke 主要用于调用 Windows API，所以它默认为 StdCall，但 C 和 C++ 默认为 cdecl，因为它支持可变参数。

我最近将 COM 接口包装`IRapiStream`在一个平面 C 接口中，因为 .NET 似乎试图将 IStream 转换为存储，但由于错误而失败`STG_E_UNIMPLEMENTEDFUNCTION`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T21:01:28.063

您没有提及您使用的是哪个版本的 .NET，但在使用 Visual Studio .NET 2003 时对我有用的是为真正的 C++ 类的 pimpled 实现提供一个薄 C# 包装器：

```
public __gc class MyClass_Net {
public:
   MyClass_Net()
      :native_ptr_(new MyClass())
   {
   }
   ~MyClass_Net()
   {
      delete native_ptr_;
   }

private:
   MyClass __nogc *native_ptr_;
}; 
```

显然，人们更愿意在那里使用 Boost shared_ptr，但我永远无法让它们与 V.NET 2003 很好地配合使用......

方法只是通过指针转发到底层 C++ 方法。可能必须转换方法参数。例如，要调用采用字符串的 C++ 方法，C# 方法可能应该采用 System.String（托管 C++ 中的 System::String）。你必须使用 System::Runtime::InteropServices::Marshal::StringToHGlobalAnsi() 来做到这一点。

这种方法的一个好处是因为托管 C++ 是一种 .NET 语言，您可以将访问器公开为属性 (__property)。您甚至可以像在 C# 中一样公开属性。

# unix - 如何让 find 命令打印出带有文件名的文件大小？

> ID：64649
> 
> 赞同：135
> 
> 时间：2008-09-15T16:53:13.353
> 
> 标签：unix, command-line, find, solaris

如果我按如下方式发出[find命令：](https://en.wikipedia.org/wiki/Find_(Unix))

```
find . -name *.ear 
```

它打印出来：

```
./dir1/dir2/earFile1.ear
./dir1/dir2/earFile2.ear
./dir1/dir3/earFile1.ear 
```

我想将名称和大小“打印”到命令行：

```
./dir1/dir2/earFile1.ear  5000 KB
./dir1/dir2/earFile2.ear  5400 KB
./dir1/dir3/earFile1.ear  5400 KB 
```

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2008-09-15T16:59:16.973

```
find . -name '*.ear' -exec ls -lh {} \; 
```

只是 jer.drab.org 回复中的 h 额外内容。节省在心理上转换为 MB 的时间；）

* * *

## 回答 #2

> 赞同：133
> 
> 时间：2008-09-15T16:58:42.453

您需要使用 -exec 或 -printf。Printf 的工作原理是这样的：

```
find . -name *.ear -printf "%p %k KB\n" 
```

-exec 更强大，可以让你执行任意命令——所以你可以使用 'ls' 或 'wc' 的版本来打印文件名和其他信息。'man find' 将向您显示 printf 的可用参数，它可以做的不仅仅是文件大小。

[编辑] -printf 不在官方 POSIX 标准中，因此请检查您的版本是否支持它。然而，大多数现代系统将使用 GNU find 或类似的扩展版本，因此很有可能实现它。

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2008-09-15T16:57:30.223

一个简单的解决方案是在*find中使用**-ls*选项：

 *```
find . -name \*.ear -ls 
```

这为您提供了正常“ls -l”格式的每个条目。或者，要获得您似乎正在寻找的特定输出，请执行以下操作：

```
find . -name \*.ear -printf "%p\t%k KB\n" 
```

这将为您提供文件名，后跟以 KB 为单位的大小。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2008-09-15T17:08:26.843

使用 GNU find，我认为这就是你想要的。它查找所有真实文件而不是目录 ( *-type f* )，并为每个文件打印文件名 (%p)、制表符 (\t)、以千字节为单位的大小 (%k)、后缀“KB”，然后换行符 (\n)。

```
find . -type f -printf '%p\t%k KB\n' 
```

如果*printf*命令没有按照您想要的方式格式化，您可以使用*[exec](https://linux.die.net/man/1/exec)*，然后使用您要在每个文件上执行的命令。使用 {} 作为文件名，并使用分号 (;) 终止命令。在大多数 shell 上，所有这三个字符都应该用反斜杠转义。

这是一个简单的解决方案，它使用“ls -lh”查找并打印出来，它将以人类可读的形式显示大小（*k*表示千字节，*M*表示兆字节）：

```
find . -type f -exec ls -lh \{\} \; 
```

作为另一种选择，“wc -c”将打印文件中的字符（字节）数：

```
find . -type f -exec wc -c \{\} \; 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-01-13T21:28:25.137

```
find . -name '*.ear' -exec du -h {} \; 
```

这只会为您提供文件大小，而不是所有不必要的东西。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-10-28T21:14:23.637

awk 可以修复输出以提供提问者所要求的内容。在我的 Solaris 10 系统上， find -ls 以 KB 为单位打印大小作为第二个字段，因此：

```
% find . -name '*.ear' -ls | awk '{print $2, $11}'
5400 ./dir1/dir2/earFile2.ear
5400 ./dir1/dir2/earFile3.ear
5400 ./dir1/dir2/earFile1.ear 
```

否则，使用 -exec ls -lh 并从输出中选择大小字段。再次在 Solaris 10 上：

```
% find . -name '*.ear' -exec ls -lh {} \; | awk '{print $5, $9}'
5.3M ./dir1/dir2/earFile2.ear
5.3M ./dir1/dir2/earFile3.ear
5.3M ./dir1/dir2/earFile1.ear 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-06T17:34:21.117

为什么不使用**du -a**？例如

```
find . -name "*.ear" -exec du -a {} \; 
```

在 Mac 上工作

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2011-12-03T00:25:52.913

我在不支持 find 命令的 Mac OS X 上遇到了这个问题`-printf`。

我发现的一个解决方案，无可否认地依赖于所有文件的“组”作为“员工”是......

```
ls -l -R | sed 's/\(.*\)staff *\([0-9]*\)..............\(.*\)/\2 \3/' 
```

这将 ls long 输出拆分为三个标记

1.  文本'staff'之前的东西
2.  文件大小
3.  文件名

然后输出标记 2 和 3，即输出是字节数，然后是文件名

```
8071 sections.php
54681 services.php
37961 style.css
13260 thumb.php
70951 workshops.php 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-01T11:51:34.507

尝试以下命令：

GNU `stat`：

```
find . -type f -name *.ear -exec stat -c "%n %s" {} ';' 
```

BSD `stat`：

```
find . -type f -name *.ear -exec stat -f "%N %z" {} ';' 
```

然而`stat`不是标准的，所以`du`或者`wc`可能是更好的方法：

```
find . -type f -name *.ear -exec sh -c 'echo "{} $(wc -c < {})"' ';' 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-03-27T14:56:56.123

这应该可以为您提供所需的内容，包括格式（即首先是文件名，然后是大小）：

```
find . -type f -iname "*.ear" -exec du -ah {} \; | awk '{print $2"\t", $1}' 
```

示例输出（我曾经`-iname "*.php"`得到一些结果）：

```
./plugins/bat/class.bat.inc.php  20K
./plugins/quotas/class.quotas.inc.php    8.0K
./plugins/dmraid/class.dmraid.inc.php    8.0K
./plugins/updatenotifier/class.updatenotifier.inc.php    4.0K
./index.php      4.0K
./config.php     12K
./includes/mb/class.hwsensors.inc.php    8.0K 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-15T16:56:32.503

你可以试试这个：

```
find. -name *.ear -exec du {} \; 
```

这将为您提供以字节为单位的大小。但是 du 命令也接受参数 -k 代表 KB 和 -m 代表 MB。它会给你一个像

```
5000  ./dir1/dir2/earFile1.ear
5400  ./dir1/dir2/earFile2.ear
5400  ./dir1/dir3/earFile1.ear 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-15T16:57:16.747

```
find . -name "*.ear" | xargs ls -sh 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2010-01-05T20:37:22.950

```
$查找。-name "test*" -exec du -sh {} \;
4.0K ./test1
0 ./test2
0 ./test3
0 ./test4
$

```

[脚本世界参考](http://www.scripterworld.com/2009/07/unix-find-command-with-examples-and.html)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-11-05T15:32:32.273

只需使用磁盘使用命令 ( ) 列出`-type f`与模式 ( ) 匹配的文件 ( ) 并按人类可读的文件大小 ( ) 对文件进行排序：`-name '*.ear``du -h``sort -h`

```
find . -type f -name '*.ear' -exec du -h {} \; | sort -h 
```

输出

```
5.0k  ./dir1/dir2/earFile1.ear
5.4k  ./dir1/dir2/earFile2.ear
5.4k  ./dir1/dir3/earFile1.ear 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-15T16:55:16.673

```
find . -name "*.ear" -exec ls -l {} \; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-26T08:40:25.350

如果您需要获得总大小，这里是一个脚本建议

```
#!/bin/bash
totalSize=0

allSizes=`find . -type f -name *.ear -exec stat -c "%s" {} \;`

for fileSize in $allSizes; do
    totalSize=`echo "$(($totalSize+$fileSize))"`
done
echo "Total size is $totalSize bytes" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-05-17T21:48:11.017

你可以试试 for 循环：

```
for i in `find . -iname "*.ear"`; do ls -lh $i; done 
```

# mysql - MySQL：“超过锁定等待超时”

> ID：64653
> 
> 赞同：12
> 
> 时间：2008-09-15T16:53:54.787
> 
> 标签：mysql, database

我正在尝试从 MySQL 5.0.45 数据库中删除几行：

```
delete from bundle_inclusions; 
```

客户端工作了一段时间，然后返回错误：

```
Lock wait timeout exceeded; try restarting transaction 
```

可能有一些未提交的事务在这个表上有一个锁，但我需要这个过程来胜过任何这样的锁。如何打破 MySQL 中的锁？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-15T17:08:29.213

我同意埃里克的观点；截断表是要走的路。但是，如果您由于某种原因不能使用它（例如，如果您*真的*不想删除表中的每一行），您可以尝试以下选项：

*   以较小的批次删除行（例如 DELETE FROM bundle_inclusions WHERE id BETWEEN ? and ?）
*   如果它是 MyISAM 表（实际上，这可能也适用于 InnoDB），请尝试在 DELETE 之前发出 LOCK TABLE。这应该保证您拥有独占访问权限。
*   如果是 InnoDB 表，那么*在*超时发生后，使用 SHOW INNODB STATUS。这应该让您了解锁定获取失败的原因。
*   如果您有 SUPER 特权，您可以尝试 SHOW PROCESSLIST ALL 以查看其他连接（如果有）正在使用该表，然后使用 KILL 摆脱与您竞争的连接。

我敢肯定还有很多其他的可能性。我希望其中之一有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T14:49:13.353

Linux：在 mysql 配置（/etc/my.cnf 或 /etc/mysql/my.cnf）中，插入/编辑这一行

```
innodb_lock_wait_timeout = 50 
```

充分增加该值（以秒为单位），重新启动数据库，执行更改。然后还原更改并重新启动。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T05:03:02.683

我有同样的问题，一个没有结束的流氓交易。我重新启动了mysqld进程。您不需要截断表格。您可能会丢失该恶意交易的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T16:58:52.997

猜测：截断表 bundle_inclusions

# jquery - jQuery：JFrame 插件在 IE 7 中失败

> ID：64657
> 
> 赞同：1
> 
> 时间：2008-09-15T16:54:53.973
> 
> 标签：jquery, coldfusion

我正在使用带有 jquery 1.2.6 的 JFrame 插件。

它在 FF3 中运行良好，但它不会在 IE 7 中显示请求的页面。

jQuery 库和 JFrame 插件在包含的 header.cfm 中调用。

页面代码在这里（注意：忽略 ColdFusion 调用，我认为它们不会产生问题）：[http ://cfm.pastebin.com/m20c1b013](http://cfm.pastebin.com/m20c1b013)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T20:06:38.303

当您遇到此类问题时，追踪问题的最佳方法是将页面减少到重现问题所需的最低限度。

*“忽略[x]，因为我认为这不是问题”*是不行的，如果您认为不是问题，请将其保存到临时静态页面，删除您认为不相关的内容，然后您就*知道*了不管他们是不是问题。继续删除你认为不相关的东西，最终你会发现当你删除它时搞砸的东西，或者你最终会得到一个非常小的文件：

*   更容易调试
*   更有可能吸引人们的帮助
*   当它是图书馆中真正的错误时，更好的测试用例

没有多少人愿意拆开 Coldfusion 和表格布局代码来解决您的错误 - 毕竟，您是有问题的人，即使您也懒得去做，那么为什么其他人会这样做呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-24T12:28:17.420

作为 JQuery 的新手，我发现 IE8 中的开发者工具必不可少。在脚本控制台中，我能够找到为我提供所需信息的错误消息。您是否收到任何错误消息？

IE7 有一个“开发者工具栏”。我不知道它为脚本调试提供了什么：

[http://www.microsoft.com/downloads/details.aspx?FamilyID=E59C3964-672D-4511-BB3E-2D5E1DB91038&displaylang=en](http://www.microsoft.com/downloads/details.aspx?FamilyID=E59C3964-672D-4511-BB3E-2D5E1DB91038&displaylang=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-06-24T12:10:30.000

我建议更新到最新版本的 jquery (v 1.3.2)。这可能是尝试修复错误的最简单方法。[http://jquery.com/](http://jquery.com/)

# c# - C#中的C指针

> ID：64689
> 
> 赞同：4
> 
> 时间：2008-09-15T16:58:25.980
> 
> 标签：c#, c, string, pointers, language-implementation

这是 C# 中的函数声明：

```
void foo(string mystring) 
```

与 C 中的这个相同：

```
void foo(char *) 
```

即在C#中，被调用函数是否在后台接收指针？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T17:01:19.497

在这个特定的例子中，它更像是：

```
void foo(const char *); 
```

.Net 字符串是不可变的并通过引用传递。但是，通常 C# 在后台接收指向对象的指针或引用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T17:03:08.307

C# 背后有指针，虽然它们更像 C++ 的智能指针，所以封装了原始指针。char* 与 System.String 并不完全相同，因为指向 char 的指针通常表示字符数组的开始，而 C# 字符串是具有长度字段*和*字符数组的对象。指针指向外部结构，该结构指向类似于**wchar_t**数组的东西，因此对于 Unicode 支持，有一些 C# 字符串和更宽字符的间接性。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T17:06:14.633

不。在 C#（和所有其他 .NET 语言）中，String 是一流的数据类型。它不仅仅是一个字符数组。您可以在它们之间来回转换，但它们的行为不同。有许多可用于 String 类的字符串操作方法（如“Substring()”和“StartsWith”），它们通常不适用于数组，字符数组只是其中的一个实例。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-15T17:00:28.733

本质上，是的。在 C# 中，字符串（实际上是 System.String）是一个引用类型，所以当 foo() 被调用时，它会收到一个指向堆中字符串的指针。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-15T17:02:41.803

对于值类型（int、double 等），函数接收值的副本。对于其他对象，它是指向原始对象的引用。

字符串是特殊的，因为它们是不可变的。从技术上讲，这意味着它将传递引用，但实际上它的行为非常像值类型。

`ref`您可以使用关键字强制值类型传递引用：

```
public void Foo(ref int value) { value = 12 }
public void Bar()
{
    int val = 3;
    Foo(ref val);
    // val == 12
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:01:50.807

c# 字符串中的 no 是 unicode。在 c# 中，它不称为指针，而是引用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T17:02:18.293

如果您的意思是 - 是否允许该方法访问字符空间的内容，答案是肯定的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T17:02:27.310

是的，因为字符串是动态大小的，所以幕后肯定有堆内存

但是它们并不相同。

在 c 中，指针指向一个也可以在其他地方使用的字符串，因此更改它会影响其他地方。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-15T17:27:57.733

任何不是“值类型”的东西，基本上涵盖了枚举、布尔值和内置数字类型，都将“按引用”传递，这可以说与 C/C++ 通过引用或指针传递的机制相同。在语法和语义上，它本质上与 C/C++ 通过引用传递相同。

但是请注意，在 C# 中字符串是不可变的，因此即使它是通过引用传递的，您也无法在不创建新字符串的情况下编辑该字符串。

另请注意，您不能在 C# 中将参数作为“const”传递，无论它是值类型还是引用类型。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-15T17:50:53.123

虽然这些在语义上确实是等价的（即代码正在用字符串做某事），但 C# 与 Java 一样，将指针完全排除在日常使用之外，将它们归入诸如转换到本机 OS 函数之类的领域——即便如此，有一些框架类可以很好地包装它们，例如 SafeFileHandle。

长话短说，不要特意考虑 C# 中的指针。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T17:12:56.897

据我所知，C# 中的所有类（不确定其他类）都是引用类型。

# string - 简单的haskell字符串管理

> ID：64693
> 
> 赞同：3
> 
> 时间：2008-09-15T16:58:45.527
> 
> 标签：string, haskell

我想用 Haskell 解决一个小问题：让我们用一个函数替换一个函数，该函数将字符串中的所有通配符更改为一个具体参数。该函数具有以下特征：

```
subs :: String -> String -> String -> String
-- example:
-- subs 'x' "x^3 + x + sin(x)" "6.2" will generate
--          "6.2^3 + 6.2 + sin(6.2)" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T18:35:34.870

您可以使用[Text.Regex](http://hackage.haskell.org/package/regex-compat-0.95.1)包。

您的示例可能如下所示：

```
import Text.Regex(mkRegex, subRegex)

subs :: String -> String -> String -> String
subs wildcard input value = subRegex (mkRegex wildcard) input value 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-15T18:38:07.457

请参阅[http://bluebones.net/2007/01/replace-in-haskell/](http://bluebones.net/2007/01/replace-in-haskell/)以获取与您正在寻找的代码完全一样的示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-08-24T11:55:02.940

对于这种情况，您可以使用**text-format-simple**库：

```
import Text.Format
format "{0}^3 + {0} + sin({0})" ["6.2"] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T18:40:16.890

使用正则表达式 ( `Text.Regex.Posix`) 和搜索替换`/\Wx\W/`（Perl 表示法）。简单地替换`x`to`6.2`会给你带来麻烦`x + quux`。

[Haskell 正则表达式替换](http://lukeplant.me.uk/blog.php?id=1107301690)以获取更多信息（我认为这应该导入到 SO.

对于额外的硬核，您可以将表达式解析为 AST 并在该级别进行替换。

# algorithm - 什么是一个好的非递归算法来决定是否可以从一组数字中加法构建传入的数量？

> ID：64723
> 
> 赞同：-4
> 
> 时间：2008-09-15T17:02:17.373
> 
> 标签：algorithm, puzzle

什么是一种**非递归**算法，用于确定是否可以从一组数字中加法构建传入的数量。
就我而言，我正在确定是否可以通过将一组钞票（例如 5 美元、10 美元和 20 美元钞票）的某种组合相加来满足某个货币金额（例如 40 美元）。这是一个简单的例子，但算法需要适用于任何货币集（一些货币使用时髦的账单金额，而一些账单可能在给定时间不可用）。
所以 50 美元可以用一组（20 美元和 30 美元）来满足，但不能用一组（20 美元和 40 美元）来满足。非递归要求是由于目标代码库用于`SQL Server 2000`递归支持有限的地方。
此外，这是为了支持多币种环境，其中可用的账单集可能会发生变化（例如外币兑换柜员）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T17:09:08.167

您曾两次表示该算法不能递归，但这是该问题的自然解决方案。一种或另一种方式，您将需要执行搜索来解决此问题。如果递归结束，您将需要手动回溯。

选择低于目标值的最大货币值。如果匹配，你就完成了。如果不是，则将当前目标值压入堆栈并从目标值中减去选取的货币值。继续这样做，直到您找到匹配项或没有更多的货币价值。然后使用堆栈回溯并选择不同的值。

基本上，它是带有手动管理堆栈的循环内的递归解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T17:22:09.790

如果您将每个面额视为以 n 为底的数字上的一个点，其中 n 是您需要的最大纸币数量，那么您可以递增该数字，直到您用尽问题空间或找到解决方案。

您需要的最大纸币数量是您需要的总数除以最低面额的纸币。

这是对问题的蛮力回应，但它肯定会奏效。

这是一些p代码。我的栅栏柱子可能到处都是，而且它的优化太荒谬了，但它应该可以工作。反正我觉得这个想法是对的。

```
Denominations = [10,20,50,100]
Required = 570

Denominations = sort(Denominations)
iBase = integer (Required / Denominations[1])

BumpList = array [Denominations.count]
BumpList.Clear

repeat 
    iTotal = 0 
    for iAdd = 1 to Bumplist.size
        iTotal = iTotal + bumplist [iAdd] * Denominations[iAdd]
    loop
    if iTotal = Required then exit true

    //this bit should be like a mileometer. 
    //We add 1 to each wheel, and trip over to the next wheel when it gets to iBase
    finished = true
    for iPos from bumplist.last to bumplist.first 
        if bumplist[iPos] = (iBase-1) then bumplist[iPos] = 0 
        else begin
            finished = false
            bumplist[iPos] = bumplist[iPos]+1
            exit for
        end
     loop 
until (finished)

exit false 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T17:09:59.587

这是一个可以通过称为动态规划的方法来解决的问题。不幸的是，我的讲义太专注于生物信息学，所以你必须自己去谷歌搜索。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T17:15:48.433

这听起来像子集和问题，[已知是 NP-complete](http://en.wikipedia.org/wiki/Subset_sum_problem)。

祝你好运。

**编辑：**如果您允许任意数量的某种面额的钞票/硬币（而不是一个），那么这是一个不同的问题，并且更容易。看[硬币问题](http://en.wikipedia.org/wiki/Coin_problem)。在阅读（可疑）类似问题的另一个答案时，我意识到了这一点。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-01-01T19:25:34.577

您可以使用像 MattW这样的**动态编程**方法来处理这个问题。提及。

鉴于账单数量和最大金额有限，您可以尝试以下解决方案。代码片段在 C# 中，但我相信您可以轻松地将其移植到其他语言。

```
 // Set of bills
        int[] unit = { 40,20,70};

        // Max amount of money
        int max = 100000;

        bool[] bucket = new bool[max];

        foreach (int t in unit)
            bucket[t] = true;

        for (int i = 0; i < bucket.Length; i++)
            if (bucket[i])
                foreach (int t in unit)
                    if(i + t < bucket.Length)
                        bucket[i + t] = true;

        // Check if the following amount of money
        // can be built additively
        Console.WriteLine("15 : " + bucket[15]);
        Console.WriteLine("50 : " + bucket[50]);
        Console.WriteLine("60 : " + bucket[60]);
        Console.WriteLine("110 : " + bucket[110]);
        Console.WriteLine("120 : " + bucket[120]);
        Console.WriteLine("150 : " + bucket[150]);
        Console.WriteLine("151 : " + bucket[151]); 
```

**输出：**

```
15 : False
50 : False
60 : True
110 : True
120 : True
150 : True
151 : False 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:51:50.967

我同意[Tyler](https://stackoverflow.com/questions/64723/i-need-an-algorithm-for-deciding-whether-a-passed-in-amount-can-be-built-additi#64832)的观点- 你所描述的是[Subset Sum](http://en.wikipedia.org/wiki/Subset_sum_problem)问题的一个变体，它被称为[NP-Complete](http://en.wikipedia.org/wiki/NP-Complete)。在这种情况下，您有点幸运，因为您使用的是一组有限的值，因此您可以在此处使用[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)技术来稍微优化问题。就代码的一些一般想法而言：

*   由于您正在处理金钱，因此只有这么多方法可以使用给定的账单进行更改，并且在大多数情况下，某些账单的使用频率高于其他账单。因此，如果您存储结果，您可以保留一组最常见的解决方案，然后在尝试找到实际解决方案之前检查它们。
*   除非您使用的语言不支持递归，否则没有理由完全忽略解决方案中递归的使用。虽然任何递归问题都可以使用迭代来解决，但在这种情况下，递归可能更容易编写。

其他一些用户，例如[Kyle](https://stackoverflow.com/questions/64723/i-need-an-algorithm-for-deciding-whether-a-passed-in-amount-can-be-built-additi#64777)和[seanyboy](https://stackoverflow.com/questions/64723/i-need-an-algorithm-for-deciding-whether-a-passed-in-amount-can-be-built-additi#64864)，为您指明了编写自己的函数的正确方向，因此您应该看看他们为您的工作提供了什么。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-01-01T18:43:08.720

无递归和有限递归是有区别的。不要混淆这两者，因为你会错过课程的重点。

例如，您可以安全地使用 C++ 或其他低级语言中的递归来编写阶乘函数，因为您的结果将溢出即使是您的最大数量的容器，但只有几个递归。因此，您将面临的问题将是在结果由于递归而炸毁您的堆栈之前存储结果。

这就是说，无论你找到什么解决方案——我什至没有费心去深入理解你的问题，因为我看到其他人已经这样做了——你必须研究你的算法的行为，你可以确定最坏情况的深度你的堆栈。

如果您的平台支持最坏的情况，您不需要完全避免递归。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2009-01-01T18:55:16.760

算法： 1\. 按降序排列可用的货币面额。
2\. 计算余数 = Input % denomination[i] i -> n-1, 0
3\. 如果余数为0，则输入可以分解，否则不能分解。

示例：
输入：50，可用：10,20
[50 % 20] = 10，[10 % 10] = 0，回答：是 输入：50，可用：15,20
[50 % 20] = 10，[10 % 15] = 15，答案：否

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2008-09-15T17:07:57.780

**编辑：**以下内容*有时*会起作用。想想为什么它不能一直工作，以及如何改变它以涵盖其他情况。

从最大的账单开始构建它。这将产生最少数量的票据。

在不超过价格的情况下，尽可能多地使用初始金额并应用最大的账单。

转到下一个最大的账单并以相同的方式应用它。

继续这样做，直到你拿到最小的账单。

然后检查总和是否等于目标金额。

# android - 从 J2ME 迁移到 Android

> ID：64745
> 
> 赞同：29
> 
> 时间：2008-09-15T17:04:46.150
> 
> 标签：android, java-me, mobile

来自`J2ME`编程是否有任何相似之处可以使其易于适应`Android API`。或者与编写移动应用程序`Android API`的方式完全不同。`J2ME`

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-17T03:26:06.570

实际上，Android API 比 J2ME 强大得多。

为 Android 创建应用程序要容易得多。

使用 J2ME，由于缺少类似 swing 的库，您只能使用简单的表单（尽管现在存在一个名为 LWUIT 的库，避免了从头开始重新创建类似 swing 的库的需要）。

在 Android 中，您将能够非常快速地创建复杂的表单，并且 android SDK 的软件包易于安装（而在 J2ME 中，您必须安装 sun 的无线开发工具包，或者安装 Nokia、Samsung 或 SonyEricsson 中的一种。 . 它有时会有点混乱）。

从 j2me 切换到 android 时我必须改变的事情是：

1/ 字体和图形类在 j2me 上更容易使用。该 API 在 Android 上更彻底，但也更复杂。

2/如果你习惯了j2me（RecordStore）的数据库存储，那么在Android中你可以忘记它。您将不得不使用类似 SQL 的数据库，因此请准备好重新考虑您的数据模型。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2009-02-11T23:00:26.937

I've also found the path from Java ME to Android to be pretty simple. Here are a few things I've noticed:

1.  There is ONE ui draw thread in Android. You have to be aware of the difference between calling `postInvalidate` and `invalidate` on Views to force them to update.

2.  The actual bit-wise graphic manipulation is very similar. I was able to port large amounts of custom J2ME draw code by writing a few shims for `drawRect` and `drawImage`.

3.  Android's UI library is much more extensive, much less useless, and much more complicated than Java ME's

4.  Threadwise, you have to be much more careful about thread saftey with Android. In Java ME you can get away with not making methods synchronous or variables volatile most of the time. Not so in Android.

I will say, on the whole, that Android's UI library fails a critical test. I call this the "roll my own" test.

Your UI library fails this test if it takes me longer to complete a detailed task task (say, changing the background on one individual menu item) than it would take me two write my *own* Menu from scratch. Android fails the "roll your own" test by a factor of 3 or 4\. In fact, if you look, the majority of the questions on this website are "How do I make the Android UI toolkit do my bidding?" questions.

Android is an amazing platform and it has been worth every frustrating moment I've sunk into it. It is, however, a young platform, and needs some serious work in times to come.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-15T20:11:58.230

一个好的开始是观看 Android 架构视频并查看一些文档。

[http://www.youtube.com/view_play_list?p=586D322B5E2764CF](http://www.youtube.com/view_play_list?p=586D322B5E2764CF) [http://code.google.com/android/what-is-android.html](http://code.google.com/android/what-is-android.html)

谷歌非常擅长记录。据我所知，Android 的目标与 J2ME 非常相似。它在编程风格和结构上可能略有不同，但如果您有 J2ME 经验，那么您应该更准备好转向 Android。

祝你好运！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T15:57:31.590

好吧，你可能实际上不需要适应。

由于 Android 不应该像 iPhone 那样限制第三方运行时，J2ME 堆栈很可能很快就会在 Android 上可用。

我认识一个一直在做这件事的人：http: [//justanapplication.wordpress.com/](http://justanapplication.wordpress.com/)

当然，这并不意味着您不应该查看 Android API 和应用程序生命周期。

# macos - Applescript 中的磁盘活动

> ID：64748
> 
> 赞同：4
> 
> 时间：2008-09-15T17:05:19.487
> 
> 标签：macos, io, applescript

如何在 Applescript 中轮询磁盘活动？每 N 秒检查一次磁盘 X 是否正在被读取、写入或空闲，然后执行一些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T19:27:16.150

一般来说，轮询的效率低于在发生某事时得到通知。此外，如果您正在检查是否正在从磁盘读取某些内容，您可能会自己访问该磁盘，这可能会影响您尝试观察的内容。

从 10.5 开始，OSX 包含一个称为文件系统事件框架的东西，它提供文件系统更改的粗粒度通知。你的问题是这只是Objective-C。Apple 有一些关于这个 API的很好的[文档。](http://developer.apple.com/documentation/Darwin/Conceptual/FSEvents_ProgGuide/ "FSEvents 编程指南")

幸运的是，还有`call method`AppleScript 命令。这允许您在 AppleScript 中使用 Objective-C 对象。这是关于它的[文档](http://developer.apple.com/documentation/AppleScript/Conceptual/StudioBuildingApps/chapter04/chapter_4_section_2.html#//apple_ref/doc/uid/20001251-TPXREF175 "调用方法参考")。

我对这两者都没有经验，因此文档参考。希望这能让你继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-10-01T14:54:55.107

你真的应该看看 Dtrace。它有能力做这种事情。

```
#!/usr/sbin/dtrace -s
/*
 * bitesize.d - analyse disk I/O size by process.
 *              Written using DTrace (Solaris 10 build 63).
 *
 * This produces a report for the size of disk events caused by 
 * processes. These are the disk events sent by the block I/O driver.
 *
 * If applications must use the disks, we generally prefer they do so
 * sequentially with large I/O sizes. 
 *
 * 15-Jun-2005, ver 1.00
 *
 * USAGE:   bitesize.d  # wait several seconds, then hit Ctrl-C
 *
 * FIELDS:
 *      PID process ID
 *      CMD command and argument list
 *      value   size in bytes
 *      count   number of I/O operations
 *
 * NOTES: 
 * The application may be requesting smaller sized operations, which
 * are being rounded up to the nearest sector size or UFS block size.
 * To analyse what the application is requesting, DTraceToolkit programs
 * such as Proc/fddist may help.
 *
 * SEE ALSO: seeksize.d, iosnoop
 *
 * Standard Disclaimer: This is freeware, use at your own risk.
 *
 * 31-Mar-2004  Brendan Gregg   Created this, build 51.
 * 10-Oct-2004     "      " Rewrote to use the io provider, build 63.
 */

#pragma D option quiet

/*
 * Print header
 */
dtrace:::BEGIN
{
    printf("Sampling... Hit Ctrl-C to end.\n");
}

/*
 * Process io start
 */
io:::start
{
    /* fetch details */
    this->size = args[0]->b_bcount;
    cmd = (string)curpsinfo->pr_psargs;

    /* store details */
    @Size[pid,cmd] = quantize(this->size);
}

/*
 * Print final report
 */
dtrace:::END 
{
    printf("\n%8s  %s\n","PID","CMD");
    printa("%8d  %s\n%@d\n",@Size);
} 
```

从[这里](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man1/bitesize.d.1m.html)。

运行使用

```
sudo dtrace -s bitsize.d 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T20:04:04.957

您可以定期运行终端命令 iostat。您必须将结果解析为您可以消化的形式。

如果您对各种 UNIX 命令行工具有足够的了解，我建议 iostat 将输出通过管道传输到 awk 或 sed 以仅提取您想要的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-14T01:51:56.657

正如[Porkchop D. Clown](https://stackoverflow.com/questions/64748/disk-activity-in-applescript#66377)提到的，您可以使用 iostat。您可以使用的命令是：

```
 iostat -c 50 -w 5 
```

它将每 5 秒运行 iostat 50 次。

# sql - '^M' 字符在行尾

> ID：64749
> 
> 赞同：101
> 
> 时间：2008-09-15T17:05:24.790
> 
> 标签：sql, unix, newline, line-endings, os-dependent

当我在 Unix 环境中运行特定的 SQL 脚本时，我在 SQL 脚本的每一行末尾看到一个“^M”字符，因为它回显到命令行。我不知道 SQL 脚本最初是在哪个操作系统上创建的。

是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-09-15T17:07:05.553

它是由 DOS/Windows 行尾字符引起的。正如 Andy Whitfield 所说，Unix 命令 dos2unix 将有助于解决问题。如果您想了解更多信息，可以阅读该命令的手册页。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2008-09-16T15:52:50.107

`vi`通过运行以下命令修复行结尾：

`:set fileformat=unix`

`:w`

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2008-09-15T17:11:29.690

原因是基于 Windows 的操作系统和基于 Unix 的操作系统存储行尾标记的方式不同。

基于 Windows 的操作系统，由于其 DOS 传统，将行尾存储为一对字符 - `0x0D0A`（回车 + 换行）。基于 Unix 的操作系统只使用`0x0A`(a [line feed](https://en.wikipedia.org/wiki/Line_feed) )。`^M`您看到的是（`0x0D`回车[）](https://en.wikipedia.org/wiki/Carriage_return#Computers)的视觉表示。

[dos2unix](http://www.linuxcommand.org/man_pages/dos2unix1.html)将对此有所帮助。您可能还需要将脚本的源代码调整为“对 Unix 友好”。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2008-09-15T17:32:10.703

最简单的方法是使用`vi`. ~~我知道这听起来很糟糕，但~~它很简单并且已经安装在大多数 UNIX 环境中。^M 是 Windows/DOS 环境中的一个新行。

从命令提示符：`$ vi filename`

然后按“ `:`”进入命令模式。

全局搜索和替换所有内容是`:%s/^M//g`“**按住控制然后按 V 然后按 M** ”，这将替换 ^M 什么都没有。

然后写入并退出输入“ `:wq`”完成！

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-09-15T17:06:14.167

尝试使用 dos2unix 去除 ^M。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-09-15T17:10:38.693

在 vi 中，执行`:%s/^M//g`

要获得`^M`按住`CTRL`键，请按`V`then `M`（同时按住 control 键），`^M`将出现 。这将找到所有事件并将它们替换为空。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-15T17:10:14.873

SQL 脚本最初是在 Windows 操作系统上创建的。'^M' 字符是由于 Windows 和 Unix 对行尾字符的使用有不同的想法。您可以在命令行中使用 perl 来解决此问题。

```
perl -pie 's/\r//g' filename.txt 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-09-15T17:08:38.590

^M 通常是由 Windows 运算符换行符引起的，翻译成 Unix 看起来像 ^M。命令 dos2unix 应该很好地删除它们

dos2unix [选项] [-c convmode] [-o file ...] [-n infile outfile ...]

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-15T18:31:41.650

```
C:\tmp\text>dos2unix hello.txt helloUNIX.txt 
```

如果没有安装 dos2unix，Sed 的使用范围更广，也可以做这种事情

```
C:\tmp\text>sed s/\r// hello.txt > helloUNIX.txt 
```

你也可以试试 tr：

```
cat hello.txt | tr -d \r > helloUNIX2.txt 
```

结果如下：

```
C:\tmp\text>dumphex hello.txt  
00000000h: 48 61 68 61 0D 0A 68 61 68 61 0D 0A 68 61 68 61 Haha..haha..haha  
00000010h: 0D 0A 0D 0A 68 61 68 61 0D 0A                   ....haha..  

C:\tmp\text>dumphex helloUNIX.txt  
00000000h: 48 61 68 61 0A 68 61 68 61 0A 68 61 68 61 0A 0A Haha.haha.haha..  
00000010h: 68 61 68 61 0A                                  haha.  

C:\tmp\text>dumphex helloUNIX2.txt  
00000000h: 48 61 68 61 0A 68 61 68 61 0A 68 61 68 61 0A 0A Haha.haha.haha..  
00000010h: 68 61 68 61 0A                                  haha. 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2013-04-17T14:34:08.397

要在 vi 编辑器中替换 ^M 字符，请使用以下命令

打开文本文件说 t1.txt

```
vi t1.txt 
```

按 进入命令模式`shift + :`

然后按提到的键`%s/^M/\r/g`

```
in above ^M is not (shift + 6)M instead it is (ctrl + V)(ctrl + M) 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-07-18T07:03:20.100

命令的替代方法`dos2unix`是使用标准实用程序，例如`sed`.

例如，对 unix 的 dos：

```
sed 's/\r$//' dos.txt > unix.txt 
```

unix到dos：

```
sed 's/$/\r/' unix.txt > dos.txt 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-02-07T16:05:32.713

您可以通过 sed 命令直接从文件中删除 ^M，例如：

```
sed -i'.bak' s/\r//g *.* 
```

如果您对更改感到满意，请删除 .bak 文件：

```
rm -v *.bak 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-06-03T20:10:19.297

使用 tr 将 DOS/Windows (\r\n) 行尾转换为 Unix (\n) 行尾：

```
tr '\r\n' '\n' < dosFile.txt > unixFile.txt 
```

[发布关于从 Unix 命令行替换换行符的帖子](https://stackoverflow.com/a/1252010)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T19:54:22.450

`od -a $file`对于在 Linux 上探索这些类型的问题很有用（类似于上面的 dumphex）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-03-07T04:32:19.757

在 Perl 中，如果你不想设置 $/ 变量并使用 chomp() 你也可以这样做：

```
$var =~ /\r\n//g; 
```

我的两分钱

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-21T17:04:20.877

如前所述，Windows 程序喜欢用 CRLF 终止行[，](https://stackoverflow.com/a/64798/5362795)*即*代替`\r\n`Unix/Linux 标准`\n`。由于我不需要所有功能，`dos2unix`因此我通过将以下内容添加到 my 来替换它，`~/.bashrc`从而删除`\r`：

```
function win2unix() {
    tmp=$(mktemp) && tr -d '\r' < $1 > $tmp && mv $tmp $1
} 
```

现在，当我想摆脱`^M`创建的那些字符时，例如当我从 Excel 或 Calc 导出 CSV 文件时，我可以执行以下操作：

```
win2unix filename.csv 
```

当然，您也可以使用`sed`或其他东西。顺便说一句，我用`cat -e $filename`形象化的`^M`结局。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-09-15T18:24:40.357

另一个可行的 vi 命令：`:%s/.$//` 这会删除文件中每一行的最后一个字符。这个搜索和替换命令的缺点是它不关心最后一个字符是什么，所以注意不要调用它两次。

# php - 使用 Zend_PDF 将 PDF 放入另一个 PDF 文档

> ID：64759
> 
> 赞同：2
> 
> 时间：2008-09-15T17:06:48.783
> 
> 标签：php, zend-framework, pdf, zend-pdf

我有一个徽标的 pdf 文件，尺寸约为 1"x2"。[任何人都可以提供代码片段以使用Zend_PDF](http://framework.zend.com/manual/en/zend.pdf.html) API 将该 PDF 徽标导入另一个 PDF 文件吗？

理想情况下，我希望能够像 PNG、TIFF 或 JPG 对象一样使用 Zend_Pdf_Image 对象放置它。

换句话说，我希望能够将小 1x2" pdf 文档放在 8.5x11" 页面的顶部，而不是使用原始 pdf 作为背景。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-16T17:49:46.360

到目前为止，似乎没有办法使用 Zend_PDF API 来做到这一点。Zend_Pdf_Page 类有一个看起来很有希望的 drawContentStream()，但是当我检查它时，方法体是空的。也许稍后发布的 API 会支持它。

因此，如果您想在另一个动态生成的 PDF 文档（如图像）中放置另一个 PDF，请使用[FPDI + FPDF/TCPD](http://www.setasign.de/products/pdf-php-solutions/fpdi/demos/simple-demo/)。

```
$pdf = & new FPDI ('P', 'in', 'Letter' );
$pagecount = $pdf->setSourceFile ( APP . 'logo.pdf' );
$tplidx = $pdf->importPage ( 1, '/MediaBox' );

$pdf->addPage ();
$pdf->useTemplate ( $tplidx, 1, 1 );
$pdf->Output ( 'output.pdf', 'F' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T19:34:04.763

我相信你可以[克隆一个页面](http://framework.zend.com/manual/en/zend.pdf.pages.html#zend.pdf.pages.cloning)——就像一个模板。不确定这对您是否足够，它看起来确实是首选的做事方式。当然，如果你有一个 pdf，你想添加一个水印，呃，这显然是不够的——但在这种情况下，一个高分辨率的 png 可能就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-13T17:52:07.960

不是你要求的，但可能是你需要的（：

将较小的徽标 pdf 转换为 TIFF/PNG/WhatEver（例如，使用 imagemagick`convert`或 GIMP）。然后，用普通的 Zend API 放置这个图像。

我想，这种转换也可以使用 Imagick php 类即时完成。

# html - HTML 应该与代码共存吗？

> ID：64760
> 
> 赞同：8
> 
> 时间：2008-09-15T17:06:50.857
> 
> 标签：html, user-interface

在 Web 应用程序中，是否可以在代码中使用 HTML（非脚本语言、Java、.NET）？

有两个主要的子问题：

1.  您应该使用代码来打印 HTML，还是直接创建显示的 HTML？
2.  您应该在 HTML 页面中混合代码吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-15T17:07:38.780

通常，最好将演示文稿 (HTML) 与逻辑（“后端”代码）分开。您的代码以这种方式解耦并且更易于维护。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T17:09:01.180

只要您的 HTML 编写代码与您的应用程序逻辑是分开的，并且可以保证 HTML 以某种方式格式正确，那么您应该没问题。

唯一应该在基于标记的页面（即包含文字 HTML 的页面）中混合的代码是用于格式化 HTML 的代码（例如，用于写出列表的循环）。

无论是将代码与 HTML 一起放入，还是使用纯代码使用带引号的字符串文字将 HTML 写出，都需要权衡取舍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-15T17:09:19.103

不，如果您想构建良好且可维护的软件，并实现松散耦合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-15T17:13:09.610

如果我正确理解了这个问题，那么您是在问将标记与后端代码混合是否是一种好习惯。不。虽然这很常见，但这仍然是一个坏主意。

您应该阅读[MVC](http://en.wikipedia.org/wiki/Model-view-controller)范式以及有关此问题的现有问题，例如[将现有凌乱的 web 应用程序迁移到优雅的 MVC 的最佳方法是什么？](https://stackoverflow.com/questions/40242/what-is-the-best-way-to-migrate-an-existing-messy-webapp-to-elegant-mvc)和[重构经典 ASP 的最佳实践？](https://stackoverflow.com/questions/23899/best-practices-for-refactoring-classic-asp)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T17:16:05.437

关键是将显示逻辑与其余代码分开。在任何复杂的站点中，您都会将代码与 HTML 混合在一起，但代码应仅用于显示目的。它不应该进行任何复杂的计算。

例如，模板将包含循环和条件。另外，您可能会拥有一个特定于 HTML 的例程库，例如基于列表对象打印出 <option> 列表。

想象一下，您正在编写一个具有两种输出模式的应用程序：HTML 和其他模式。您将如何编写它，以避免重复代码？这可能会为您指明正确的方向。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:19:32.900

构成视图的 HTML 必须以某种方式发送到浏览器。在 .net 中，每个服务器控件都会发出自己的 HTML 标记作为页面生命周期的一部分。所以是的，在服务器端代码中使用 HTML 是可以的。

也许您应该尝试遵循 ASP.net 模式。创建一堆代表 UI 元素的控件，并让它们负责根据它们的状态发出自己的 HTML。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T17:08:09.730

它的丑陋，而且不是类型安全的。但人们这样做没有任何后果。我更喜欢使用 DOM，或者至少使用旨在使用类型安全语义编写 HTML 的类。此外，将 UI 与逻辑混合并不是那么好......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:11:58.443

如果我需要生成 HTML 的方法，我通常将它们隔离在 HtmlHelpers 类中。这样你就可以保持*一定*程度的分离。ASP.NET MVC 框架非常成功地做到了这一点。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T17:14:15.037

如果您的意思是在代码中打印出 HTML，那么不会。除非您有充分的理由不这样做，否则您应该使用[模板](http://en.wikipedia.org/wiki/Template_engine_(web))

即使你认为你现在不需要它，你也很有可能以后需要它。也许您希望以不同于 HTML 的格式输出，或者您希望对相同的数据进行不同的表示。您通常会在以后需要这些东西，因此最好从一开始就使用这些东西。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T17:16:53.530

我讨厌开发人员 print() 一堆 html。在任何以红色显示打印/回显字符串的文本编辑器中，这完全没有必要并且看起来很丑陋。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T17:25:02.997

我同意其他所有人的观点，即您应该尽可能努力地将 HTML/XHTML 标记与应用程序逻辑分开。但是，有时出于各种原因，您确实需要在应用程序逻辑中生成 HTML/XHTML。

在这些情况下，我一直在尝试做的是确保将最少量的演示代码与应用程序逻辑混合，并尝试将其他所有内容迁移到演示代码中。毫无价值的是，在某些情况下，您可以将所有内容都移至表示层，但生成标记作为应用程序逻辑的一部分可能会更容易一些。在这些情况下，您最好的选择可能是走在时间上最有意义的路线。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T17:29:14.470

我认为在业务逻辑中生成 HTML 没有任何借口。当它只是一个“快速修复”或者当你“稍后再修复它”时，甚至不要这样做，因为这永远不会发生。

从其他问题重申我的立场，在 HTML 中使用一些控制逻辑（条件、循环）来构造它是可以的。不要在 HTML 中进行任何数据按摩或业务逻辑。你必须遵守纪律，但这是值得的。如果您的关注点（如逻辑和显示）分开，维护会容易得多。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T17:49:23.237

理想情况下，您的目标是在演示 (UI) 代码和域（业务逻辑）代码之间**分离关注点。**

您应该避免耦合这两个问题（在任一方向）的原因很简单......

您将只有**一个理由更改**一段代码。无论是您的 html 设计中的结构/样式更改，还是您的业务规则更改，您都应该只需要在一个地方进行更改。

To a lesser extent, although many purists would disagree, by sprinkling HTML code through your domain code or vice versa you are **creating noise** for the next developer who comes along to read/maintain it.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T18:19:02.180

1.  I try to **avoid using code to print HTML "directly"**. It is difficult to maintain, edit, add styles and etc. Some cases like generating an HTML email in the code, I create a text file or HTML file with markers like, [name], [verification code] and etc. I load this from the code and replace those markers. This way, you can edit the style of the email without re-compiling your code. **Separating "presentation" and "logic" is a good practice in my opinion.**
2.  **Mixing code within HTML is generally not a good practice** in similar reasons as said in #1\. However, I do use code in HTML for things like simple dynamic strings that are displayed multiple times on a page or pages. I think this is better than creating multiple server controls for same exact values to set. Since this is not code "logic" mixed in the HTML, I think this is ok.

# terminal - 是否有区分输入、输出和命令的终端程序？

> ID：64768
> 
> 赞同：4
> 
> 时间：2008-09-15T17:08:02.820
> 
> 标签：terminal

是否有显示输入、标准输出、错误输出、提示和用户输入命令之间区别的终端程序？它还应该显示何时需要标准输入与何时运行命令。

一种方法是用不同的方式突出显示每一个。光标可能会改变颜色，具体取决于它是在等待命令、运行命令还是等待标准输入。

另一种方法是使用 3 个框架——顶部的大框架用于输出（包括提示和正在运行的命令），靠近底部的小框架用于标准输入，底部的单行框架用于命令行输入。这甚至可能允许在前一个命令仍在等待标准输入时运行另一个命令来提供输入。

来自[http://jamesjava.blogspot.com/2007/09/terminal-window-with-3-frames.html](http://jamesjava.blogspot.com/2007/09/terminal-window-with-3-frames.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T17:56:02.703

[Hotwire](http://hotwire-shell.org/)可能是一个很好的候选人，但它并不是开箱即用的，AFAIK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-15T10:56:37.080

我的程序[gush](http://wiki.tcl.tk/gush) (Graphical User SHell) 做了其中的一部分。它对命令和程序 stdin/stdout/stderr 使用不同的颜色。请注意，shell 和终端的传统分离使得这不可能，因为它们之间的接口模拟了旧的串行终端连接，因此只有一个输入和一个输出通道。我通过将 shell 和终端组合到一个程序中来解决这个问题。

最好还指出程序何时等待输入，但我认为没有任何方法可以检测到这一点，除非您跟踪子程序的系统调用以检测它何时尝试读取标准输入。对于交互式程序，您可以猜测如果最后一个输出没有以换行符结尾，它可能会提示输入，但这不适用于非交互式程序，例如。赛德。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-19T15:05:30.590

目前看来，没有这样的计划。

# java - 使用 JPA/Toplink 进行批量插入

> ID：64781
> 
> 赞同：2
> 
> 时间：2008-09-15T17:09:27.433
> 
> 标签：java, oracle, jpa, toplink

我有一个通过 HTTP 接口接收消息的 Web 应用程序，例如：

```
http://server/application?source=123&destination=234&text=hello 
```

该请求包含发件人的 ID、收件人的 ID 和消息的文本。

此消息应按如下方式处理：

*   从数据库中查找源和目标的匹配用户对象
*   创建对象树：包含消息文本字段的 Message 和用于源和目标的两个 User 对象
*   将此树持久化到数据库中。

树将由我无法触及的其他应用程序加载。

我使用 Oracle 作为后备数据库，使用 JPA 和 Toplink 进行数据库处理任务。如果可能的话，我会留在这些地方。

如果没有太多优化，我可以在我的环境中实现约 30 个请求/秒的吞吐量。这并不多，我需要约 300 个请求/秒。所以我测量了性能瓶颈在哪里，发现调用`em.persist()`占用了大部分时间。如果我简单地注释掉该行，吞吐量将远远超过 1000 个请求/秒。

我尝试编写一个小型测试应用程序，它使用简单的 JDBC 调用将 100 万条消息持久保存到同一个数据库。我使用了批处理，这意味着我做了 100 次插入然后提交，并重复直到所有记录都在数据库中。在这种情况下，我测量了大约 500 个请求/秒的吞吐量，这可以满足我的需求。

很明显，我需要在这里优化插入性能。然而，正如我之前提到的，我想继续使用 JPA 和 Toplink，而不是纯粹的 JDBC。

你知道用 JPA 和 Toplink 创建批量插入的方法吗？您能否推荐任何其他技术来提高 JPA 持久性性能？

**附加信息：**

“请求/秒”在这里表示：请求总数/从测试开始到最后一条记录写入数据库的总时间。

我试图`em.persist()`通过在 servlet 内容和持久化程序之间创建一个内存队列来进行异步调用。对演出有很大帮助。然而，队列确实增长得非常快，因为应用程序将连续接收约 200 个请求/秒，这对我来说不是一个可接受的解决方案。

在这种分离的方法中，我收集了 100 毫秒的请求，并`em.persist()`在提交事务之前调用了所有收集的项目。EntityManagerFactory 在每个事务之间缓存。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T20:03:25.957

您应该与 JPA 接口分离并使用裸 TopLink API。您可能可以将您坚持的对象放入 UnitOfWork 并按您的计划提交 UnitOfWork（同步或异步）。请注意， em.persist() 的成本之一是整个对象图发生的隐式克隆。如果您自己 uow.registerObject() 您的两个用户对象，TopLink 会更好地工作，从而节省了它必须做的身份测试。所以你最终会得到：

```
uow=sess.acquireUnitOfWork();
for (job in batch) {
 thingyCl=uow.registerObject(new Thingy());
 user1Cl=uow.registerObject(user1);
 user2Cl=uow.registerObject(user2);
 thingyCl.setUsers(user1Cl,user2Cl);
}
uow.commit(); 
```

顺便说一句，这是非常古老的 TopLink ;)

请注意，批处理将有很大帮助，因为批处理写入，尤其是带有参数绑定的批处理写入将启动，对于这个简单的示例，这可能会对您的性能产​​生非常大的影响。

其他要寻找的东西：您的测序大小。在 TopLink 中编写对象的大部分时间实际上都花在了从数据库中读取序列信息上，尤其是对于小的默认值（我的序列大小可能有几百甚至更多）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T19:12:36.670

您对“请求/秒”的衡量标准是多少？换句话说，第 31 个请求会发生什么？什么资源被阻止了？如果是front-end/servlet/web部分，能不能在另一个线程中运行em.persist()并立即返回？

另外，您是否每次都创建交易？您是否为每个请求创建 EntityManagerFactory 对象？

# c++ - 如何在 C++ 中将 int 附加到字符串？

> ID：64782
> 
> 赞同：189
> 
> 时间：2008-09-15T17:09:35.513
> 
> 标签：c++, int, stdstring

```
int i = 4;
string text = "Player ";
cout << (text + i); 
```

我希望它打印出来`Player 4`。

以上显然是错误的，但它显示了我在这里尝试做的事情。有没有一种简单的方法可以做到这一点，还是我必须开始添加新的包含？

* * *

## 回答 #1

> 赞同：296
> 
> 时间：2013-09-25T06:39:11.760

使用 C++11，您可以编写：

```
#include <string>     // to use std::string, std::to_string() and "+" operator acting on strings 

int i = 4;
std::string text = "Player ";
text += std::to_string(i); 
```

* * *

## 回答 #2

> 赞同：211
> 
> 时间：2008-09-15T17:14:11.260

好吧，如果你使用 cout 你可以直接将整数写入它，如

```
std::cout << text << i; 
```

C++ 将各种对象转换为字符串的方法是通过[字符串流](http://en.cppreference.com/w/cpp/io/basic_stringstream)。如果您手边没有一个，只需创建一个。

```
#include <sstream>

std::ostringstream oss;
oss << text << i;
std::cout << oss.str(); 
```

或者，您可以只转换整数并将其附加到字符串。

```
oss << i;
text += oss.str(); 
```

最后，Boost 库提供[`boost::lexical_cast`](http://www.boost.org/doc/libs/release/doc/html/boost_lexical_cast.html)，它使用类似于内置类型转换的语法围绕字符串流转换。

```
#include <boost/lexical_cast.hpp>

text += boost::lexical_cast<std::string>(i); 
```

这也适用于其他方式，即解析字符串。

* * *

## 回答 #3

> 赞同：125
> 
> 时间：2008-09-15T17:13:54.367

```
printf("Player %d", i); 
```

（随心所欲地拒绝我的回答；我仍然讨厌 C++ I/O 运算符。）

:-P

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2008-09-15T17:13:01.123

这些适用于一般字符串（如果您不想输出到文件/控制台，而是存储以供以后使用或其他东西）。

boost.lexical_cast

```
MyStr += boost::lexical_cast<std::string>(MyInt); 
```

字符串流

```
//sstream.h
std::stringstream Stream;
Stream.str(MyStr);
Stream << MyInt;
MyStr = Stream.str();

// If you're using a stream (for example, cout), rather than std::string
someStream << MyInt; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-09-15T17:12:38.283

作为记录，[`std::stringstream`](http://www.cplusplus.com/reference/iostream/stringstream/stringstream.html)如果您想在实际输出之前创建字符串，也可以使用 a 。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2008-09-15T17:10:57.837

```
cout << text << " " << i << endl; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-05-17T03:12:04.363

您的示例似乎表明您希望显示一个字符串后跟一个整数，在这种情况下：

```
string text = "Player: ";
int i = 4;
cout << text << i << endl; 
```

可以正常工作。

但是，如果您要存储字符串位置或传递它，并且经常这样做，您可能会从重载加法运算符中受益。我在下面证明这一点：

```
#include <sstream>
#include <iostream>
using namespace std;

std::string operator+(std::string const &a, int b) {
  std::ostringstream oss;
  oss << a << b;
  return oss.str();
}

int main() {
  int i = 4;
  string text = "Player: ";
  cout << (text + i) << endl;
} 
```

事实上，您可以使用模板使这种方法更强大：

```
template <class T>
std::string operator+(std::string const &a, const T &b){
  std::ostringstream oss;
  oss << a << b;
  return oss.str();
} 
```

现在，只要 object`b`具有定义的流输出，您就可以将其附加到您的字符串（或至少是其副本）。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2009-06-02T18:47:04.287

另一种可能性是[Boost.Format](http://www.boost.org/doc/libs/release/libs/format/doc/format.html)：

```
#include <boost/format.hpp>
#include <iostream>
#include <string>

int main() {
  int i = 4;
  std::string text = "Player";
  std::cout << boost::format("%1% %2%\n") % text % i;
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2011-07-15T10:32:32.047

这是一个小的工作转换/附加示例，其中包含我之前需要的一些代码。

```
#include <string>
#include <sstream>
#include <iostream>

using namespace std;

int main(){
string str;
int i = 321;
std::stringstream ss;
ss << 123;
str = "/dev/video";
cout << str << endl;
cout << str << 456 << endl;
cout << str << i << endl;
str += ss.str();
cout << str << endl;
} 
```

输出将是：

```
/dev/video
/dev/video456
/dev/video321
/dev/video123 
```

请注意，在最后两行中，您在实际打印出修改后的字符串之前保存它，如果需要，您可以稍后使用它。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-06-23T13:53:29.400

作为记录，您还可以使用 Qt 的`QString`类：

```
#include <QtCore/QString>

int i = 4;
QString qs = QString("Player %1").arg(i);
std::cout << qs.toLocal8bit().constData();  // prints "Player 4" 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-15T17:10:54.373

```
cout << text << i; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-09-04T02:53:33.133

如果您的问题需要，这里的一种方法是直接打印输出。

```
cout << text << i; 
```

否则，最安全的方法之一是使用

```
sprintf(count, "%d", i); 
```

然后将其复制到您的“文本”字符串中。

```
for(k = 0; *(count + k); k++)
{ 
  text += count[k]; 
} 
```

因此，您拥有所需的输出字符串

有关更多信息`sprintf`，请关注： [http ://www.cplusplus.com/reference/cstdio/sprintf](http://www.cplusplus.com/reference/cstdio/sprintf)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-15T17:10:45.840

```
cout << "Player" << i ; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-15T17:10:58.100

```
cout << text << i; 
```

ostream的`<<`运算符返回对 ostream 的引用，因此您可以继续链接`<<`操作。也就是上面的基本相同：

```
cout << text;
cout << i; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-15T17:12:34.027

```
cout << text << " " << i << endl; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-18T15:46:04.930

**我能解决这个问题的最简单方法如下..**
它将作为**单个字符串**和**字符串数组**工作。我正在考虑一个字符串数组，因为它很复杂（字符串后面会有一点点相同）。我创建了一个名称数组并**附加了一些整数和字符，以显示将一些****int**和**char**附加到字符串是多么容易，希望它有所帮助。length 只是衡量数组的大小。如果您熟悉编程，那么**size_t**是一个无符号**整数**

```
#include<iostream>
    #include<string>
    using namespace std;
    int main() {

        string names[] = { "amz","Waq","Mon","Sam","Has","Shak","GBy" }; //simple array
        int length = sizeof(names) / sizeof(names[0]); //give you size of array
        int id;
        string append[7];    //as length is 7 just for sake of storing and printing output 
        for (size_t i = 0; i < length; i++) {
            id = rand() % 20000 + 2;
            append[i] = names[i] + to_string(id);
        }
        for (size_t i = 0; i < length; i++) {
            cout << append[i] << endl;
        }

} 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2008-09-15T18:13:49.510

有几个选项，你想要哪一个取决于上下文。

最简单的方法是

```
std::cout << text << i; 
```

或者如果你想在一行

```
std::cout << text << i << endl; 
```

如果您正在编写一个单线程程序，并且您没有经常调用此代码（其中“很多”是每秒数千次），那么您就完成了。

如果您正在编写一个多线程程序并且有多个线程正在写入 cout，那么这个简单的代码可能会给您带来麻烦。让我们假设编译器附带的库使 cout 线程足够安全，任何对它的调用都不会被中断。现在假设一个线程正在使用此代码编写“Player 1”，另一个正在编写“Player 2”。如果幸运的话，您将获得以下信息：

```
Player 1
Player 2 
```

如果你不走运，你可能会得到类似下面的东西

```
Player Player 2
1 
```

问题是 std::cout << text << i << endl; 变成3个函数调用。该代码等价于以下内容：

```
std::cout << text;
std::cout << i;
std::cout << endl; 
```

相反，如果您使用 C 风格的 printf，并且您的编译器再次提供了具有合理线程安全性的运行时库（每个函数调用都是原子的），那么以下代码会更好地工作：

```
printf("Player %d\n", i); 
```

能够在单个函数调用中做某事让 io 库在幕后提供同步，现在您的整行文本将被原子写入。

对于简单的程序，std::cout 很棒。加上多线程或其他复杂性，不那么时尚的 printf 开始看起来更具吸引力。

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-05-25T11:04:41.780

您还尝试将玩家的号码与`std::string::push_back`：

您的代码示例：

```
int i = 4;
string text = "Player ";
text.push_back(i + '0');
cout << text; 
```

您将在控制台中看到：

> 玩家 4

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2013-03-03T03:41:47.903

您可以使用以下

```
int i = 4;
string text = "Player ";
text+=(i+'0');
cout << (text); 
```

* * *

## 回答 #20

> 赞同：-5
> 
> 时间：2011-06-27T09:23:28.073

如果使用 Windows/MFC，并且需要将字符串用于立即输出，请尝试：

```
int i = 4;
CString strOutput;
strOutput.Format("Player %d", i); 
```

# bash - Bash 中的错误处理

> ID：64786
> 
> 赞同：277
> 
> 时间：2008-09-15T17:09:59.790
> 
> 标签：bash, error-handling, scripting, error-logging

你最喜欢在 Bash 中处理错误的方法是什么？我在网上找到的处理错误的最佳示例是由 William Shotts, Jr 在[http://www.linuxcommand.org](http://www.linuxcommand.org)编写的。

他建议在 Bash 中使用以下函数进行错误处理：

```
#!/bin/bash

# A slicker error handling routine

# I put a variable in my scripts named PROGNAME which
# holds the name of the program being run.  You can get this
# value from the first item on the command line ($0).

# Reference: This was copied from <http://www.linuxcommand.org/wss0150.php>

PROGNAME=$(basename $0)

function error_exit
{

#   ----------------------------------------------------------------
#   Function for exit due to fatal program error
#       Accepts 1 argument:
#           string containing descriptive error message
#   ---------------------------------------------------------------- 

    echo "${PROGNAME}: ${1:-"Unknown Error"}" 1>&2
    exit 1
}

# Example call of the error_exit function.  Note the inclusion
# of the LINENO environment variable.  It contains the current
# line number.

echo "Example of error with line number and message"
error_exit "$LINENO: An error has occurred." 
```

您是否有在 Bash 脚本中使用的更好的错误处理例程？

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2008-10-09T04:06:06.127

使用陷阱！

```
tempfiles=( )
cleanup() {
  rm -f "${tempfiles[@]}"
}
trap cleanup 0

error() {
  local parent_lineno="$1"
  local message="$2"
  local code="${3:-1}"
  if [[ -n "$message" ]] ; then
    echo "Error on or near line ${parent_lineno}: ${message}; exiting with status ${code}"
  else
    echo "Error on or near line ${parent_lineno}; exiting with status ${code}"
  fi
  exit "${code}"
}
trap 'error ${LINENO}' ERR 
```

...然后，每当您创建临时文件时：

```
temp_foo="$(mktemp -t foobar.XXXXXX)"
tempfiles+=( "$temp_foo" ) 
```

并且`$temp_foo`将在退出时删除，并打印当前行号。（`set -e`同样会为您提供错误退出行为，[尽管它带有严重的警告](http://mywiki.wooledge.org/BashFAQ/105)并削弱了代码的可预测性和可移植性）。

您可以让陷阱`error`为您调用（在这种情况下，它使用默认退出代码 1 并且没有消息）或自己调用它并提供显式值；例如：

```
error ${LINENO} "the foobar failed" 2 
```

将以状态 2 退出，并给出明确的消息。

* * *

## 回答 #2

> 赞同：141
> 
> 时间：2008-09-16T06:28:31.193

这是一个很好的解决方案。我只是想添加

```
set -e 
```

作为一种基本的错误机制。如果一个简单的命令失败，它将立即停止您的脚本。我认为这应该是默认行为：由于此类错误几乎总是表示意外情况，因此继续执行以下命令并不是真正的“理智”。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2012-10-27T10:16:51.620

阅读此页面上的所有答案给了我很多启发。

所以，这是我的提示：

***文件内容：lib.trap.sh***

```
lib_name='trap'
lib_version=20121026

stderr_log="/dev/shm/stderr.log"

#
# TO BE SOURCED ONLY ONCE:
#
###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##

if test "${g_libs[$lib_name]+_}"; then
    return 0
else
    if test ${#g_libs[@]} == 0; then
        declare -A g_libs
    fi
    g_libs[$lib_name]=$lib_version
fi

#
# MAIN CODE:
#
###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##

set -o pipefail  # trace ERR through pipes
set -o errtrace  # trace ERR through 'time command' and other functions
set -o nounset   ## set -u : exit the script if you try to use an uninitialised variable
set -o errexit   ## set -e : exit the script if any statement returns a non-true return value

exec 2>"$stderr_log"

###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##
#
# FUNCTION: EXIT_HANDLER
#
###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##

function exit_handler ()
{
    local error_code="$?"

    test $error_code == 0 && return;

    #
    # LOCAL VARIABLES:
    # ------------------------------------------------------------------
    #    
    local i=0
    local regex=''
    local mem=''

    local error_file=''
    local error_lineno=''
    local error_message='unknown'

    local lineno=''

    #
    # PRINT THE HEADER:
    # ------------------------------------------------------------------
    #
    # Color the output if it's an interactive terminal
    test -t 1 && tput bold; tput setf 4                                 ## red bold
    echo -e "\n(!) EXIT HANDLER:\n"

    #
    # GETTING LAST ERROR OCCURRED:
    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ #

    #
    # Read last file from the error log
    # ------------------------------------------------------------------
    #
    if test -f "$stderr_log"
        then
            stderr=$( tail -n 1 "$stderr_log" )
            rm "$stderr_log"
    fi

    #
    # Managing the line to extract information:
    # ------------------------------------------------------------------
    #

    if test -n "$stderr"
        then        
            # Exploding stderr on :
            mem="$IFS"
            local shrunk_stderr=$( echo "$stderr" | sed 's/\: /\:/g' )
            IFS=':'
            local stderr_parts=( $shrunk_stderr )
            IFS="$mem"

            # Storing information on the error
            error_file="${stderr_parts[0]}"
            error_lineno="${stderr_parts[1]}"
            error_message=""

            for (( i = 3; i <= ${#stderr_parts[@]}; i++ ))
                do
                    error_message="$error_message "${stderr_parts[$i-1]}": "
            done

            # Removing last ':' (colon character)
            error_message="${error_message%:*}"

            # Trim
            error_message="$( echo "$error_message" | sed -e 's/^[ \t]*//' | sed -e 's/[ \t]*$//' )"
    fi

    #
    # GETTING BACKTRACE:
    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ #
    _backtrace=$( backtrace 2 )

    #
    # MANAGING THE OUTPUT:
    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ #

    local lineno=""
    regex='^([a-z]{1,}) ([0-9]{1,})$'

    if [[ $error_lineno =~ $regex ]]

        # The error line was found on the log
        # (e.g. type 'ff' without quotes wherever)
        # --------------------------------------------------------------
        then
            local row="${BASH_REMATCH[1]}"
            lineno="${BASH_REMATCH[2]}"

            echo -e "FILE:\t\t${error_file}"
            echo -e "${row^^}:\t\t${lineno}\n"

            echo -e "ERROR CODE:\t${error_code}"             
            test -t 1 && tput setf 6                                    ## white yellow
            echo -e "ERROR MESSAGE:\n$error_message"

        else
            regex="^${error_file}\$|^${error_file}\s+|\s+${error_file}\s+|\s+${error_file}\$"
            if [[ "$_backtrace" =~ $regex ]]

                # The file was found on the log but not the error line
                # (could not reproduce this case so far)
                # ------------------------------------------------------
                then
                    echo -e "FILE:\t\t$error_file"
                    echo -e "ROW:\t\tunknown\n"

                    echo -e "ERROR CODE:\t${error_code}"
                    test -t 1 && tput setf 6                            ## white yellow
                    echo -e "ERROR MESSAGE:\n${stderr}"

                # Neither the error line nor the error file was found on the log
                # (e.g. type 'cp ffd fdf' without quotes wherever)
                # ------------------------------------------------------
                else
                    #
                    # The error file is the first on backtrace list:

                    # Exploding backtrace on newlines
                    mem=$IFS
                    IFS='
                    '
                    #
                    # Substring: I keep only the carriage return
                    # (others needed only for tabbing purpose)
                    IFS=${IFS:0:1}
                    local lines=( $_backtrace )

                    IFS=$mem

                    error_file=""

                    if test -n "${lines[1]}"
                        then
                            array=( ${lines[1]} )

                            for (( i=2; i<${#array[@]}; i++ ))
                                do
                                    error_file="$error_file ${array[$i]}"
                            done

                            # Trim
                            error_file="$( echo "$error_file" | sed -e 's/^[ \t]*//' | sed -e 's/[ \t]*$//' )"
                    fi

                    echo -e "FILE:\t\t$error_file"
                    echo -e "ROW:\t\tunknown\n"

                    echo -e "ERROR CODE:\t${error_code}"
                    test -t 1 && tput setf 6                            ## white yellow
                    if test -n "${stderr}"
                        then
                            echo -e "ERROR MESSAGE:\n${stderr}"
                        else
                            echo -e "ERROR MESSAGE:\n${error_message}"
                    fi
            fi
    fi

    #
    # PRINTING THE BACKTRACE:
    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ #

    test -t 1 && tput setf 7                                            ## white bold
    echo -e "\n$_backtrace\n"

    #
    # EXITING:
    # ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ #

    test -t 1 && tput setf 4                                            ## red bold
    echo "Exiting!"

    test -t 1 && tput sgr0 # Reset terminal

    exit "$error_code"
}
trap exit_handler EXIT                                                  # ! ! ! TRAP EXIT ! ! !
trap exit ERR                                                           # ! ! ! TRAP ERR ! ! !

###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##
#
# FUNCTION: BACKTRACE
#
###~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~##

function backtrace
{
    local _start_from_=0

    local params=( "$@" )
    if (( "${#params[@]}" >= "1" ))
        then
            _start_from_="$1"
    fi

    local i=0
    local first=false
    while caller $i > /dev/null
    do
        if test -n "$_start_from_" && (( "$i" + 1   >= "$_start_from_" ))
            then
                if test "$first" == false
                    then
                        echo "BACKTRACE IS:"
                        first=true
                fi
                caller $i
        fi
        let "i=i+1"
    done
}

return 0 
```

**使用示例：**
文件内容：trap-test.sh

```
#!/bin/bash

source 'lib.trap.sh'

echo "doing something wrong now .."
echo "$foo"

exit 0 
```

跑步：

```
bash trap-test.sh 
```

输出：

```
doing something wrong now ..

(!) EXIT HANDLER:

FILE:       trap-test.sh
LINE:       6

ERROR CODE: 1
ERROR MESSAGE:
foo:   unassigned variable

BACKTRACE IS:
1 main trap-test.sh

Exiting! 
```

正如您从下面的屏幕截图中看到的那样，输出是彩色的，并且错误消息以使用的语言出现。

![在此处输入图像描述](https://i.stack.imgur.com/0uBOL.jpg)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2009-12-09T21:25:01.613

“set -e”的等效替代方案是

```
set -o errexit 
```

它使标志的含义比“-e”更清楚一些。

随机添加：暂时禁用该标志，并返回默认值（不管退出代码继续执行），只需使用

```
set +e
echo "commands run here returning non-zero exit codes will not cause the entire script to fail"
echo "false returns 1 as an exit code"
false
set -e 
```

这排除了其他响应中提到的正确错误处理，但是快速有效（就像 bash 一样）。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-05-03T21:33:03.257

受这里提出的想法的启发，我开发了一种可读且方便的方法来处理我的[bash 样板项目](https://github.com/niieani/bash-oo-framework)中的 bash 脚本中的错误。

通过简单地获取库，您可以立即获得以下内容（即，它会在任何错误时停止执行，就像使用`set -e`了`trap`on`ERR`和一些*bash-fu*一样）：

![bash-oo-framework 错误处理](https://i.stack.imgur.com/UJhwZ.png)

有一些额外的功能可以帮助处理错误，例如**try 和 catch**或**throw**关键字，它们允许您在某个点中断执行以查看回溯。另外，如果终端支持它，它会吐出电力线表情符号，为输出的部分着色以提高可读性，并在代码行上下文中强调导致异常的方法。

缺点是 - 它不可移植 - 代码在 bash 中工作，可能仅 >= 4（但我想它可以通过一些努力移植到 bash 3）。

代码被分成多个文件以便更好地处理，但我受到[Luca Borrione 上述答案](https://stackoverflow.com/questions/64786/error-handling-in-bash/13099228#13099228)的回溯想法的启发。

要阅读更多内容或查看源代码，请参阅 GitHub：

[https://github.com/niieani/bash-oo-framework#error-handling-with-exceptions-and-throw](https://github.com/niieani/bash-oo-framework#error-handling-with-exceptions-and-throw)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2009-11-20T16:41:52.337

我更喜欢真正容易调用的东西。所以我使用了一些看起来有点复杂，但很容易使用的东西。我通常只是将下面的代码复制并粘贴到我的脚本中。代码后面有解释。

```
#This function is used to cleanly exit any script. It does this displaying a
# given error message, and exiting with an error code.
function error_exit {
    echo
    echo "$@"
    exit 1
}
#Trap the killer signals so that we can exit with a good message.
trap "error_exit 'Received signal SIGHUP'" SIGHUP
trap "error_exit 'Received signal SIGINT'" SIGINT
trap "error_exit 'Received signal SIGTERM'" SIGTERM

#Alias the function so that it will print a message with the following format:
#prog-name(@line#): message
#We have to explicitly allow aliases, we do this because they make calling the
#function much easier (see example).
shopt -s expand_aliases
alias die='error_exit "Error ${0}(@`echo $(( $LINENO - 1 ))`):"' 
```

我通常在 error_exit 函数旁边调用清理函数，但这因脚本而异，所以我把它省略了。陷阱捕捉常见的终止信号，并确保一切都得到清理。别名才是真正的魔法。我喜欢检查一切是否失败。所以总的来说，我将程序称为“如果！” 类型声明。通过从行号中减去 1，别名将告诉我发生故障的位置。调用它也非常简单，而且几乎是白痴证明。下面是一个示例（只需将 /bin/false 替换为您要调用的任何内容）。

```
#This is an example useage, it will print out
#Error prog-name (@1): Who knew false is false.
if ! /bin/false ; then
    die "Who knew false is false."
fi 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2008-10-08T10:41:33.333

另一个考虑因素是要返回的退出代码。只是“ `1`”是相当标准的，尽管[bash 本身使用了一些保留的退出代码](http://tldp.org/LDP/abs/html/exitcodes.html)，并且同一页面认为用户定义的代码应该在 64-113 范围内以符合 C/C++ 标准。

您还可以考虑`mount`用于其退出代码的位向量方法：

```
 0  success
 1  incorrect invocation or permissions
 2  system error (out of memory, cannot fork, no more loop devices)
 4  internal mount bug or missing nfs support in mount
 8  user interrupt
16  problems writing or locking /etc/mtab
32  mount failure
64  some mount succeeded 
```

`OR`- 将代码放在一起允许您的脚本同时发出多个错误信号。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-07-19T15:44:40.453

我使用以下陷阱代码，它还允许**通过管道和“时间”命令跟踪错误**

```
#!/bin/bash
set -o pipefail  # trace ERR through pipes
set -o errtrace  # trace ERR through 'time command' and other functions
function error() {
    JOB="$0"              # job name
    LASTLINE="$1"         # line of error occurrence
    LASTERR="$2"          # error code
    echo "ERROR in ${JOB} : line ${LASTLINE} with exit code ${LASTERR}"
    exit 1
}
trap 'error ${LINENO} ${?}' ERR 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-09-13T20:55:26.153

不确定这是否对您有帮助，但我在此处修改了一些建议的函数，以便在其中包含对错误的检查（来自先前命令的退出代码）。在每个“检查”中，我还将错误的“消息”作为参数传递，以用于记录目的。

```
#!/bin/bash

error_exit()
{
    if [ "$?" != "0" ]; then
        log.sh "$1"
        exit 1
    fi
} 
```

现在要在同一个脚本中调用它（或者如果我使用另一个脚本`export -f error_exit`），我只需编写函数的名称并将消息作为参数传递，如下所示：

```
#!/bin/bash

cd /home/myuser/afolder
error_exit "Unable to switch to folder"

rm *
error_exit "Unable to delete all files" 
```

使用它，我能够为一些自动化过程创建一个非常强大的 bash 文件，它会在出现错误时停止并通知我（`log.sh`会这样做）

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-15T17:23:50.910

我用过

```
die() {
        echo $1
        kill $$
} 
```

前; 我想是因为“退出”出于某种原因对我来说失败了。不过，上述默认值似乎是个好主意。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2011-06-09T08:41:53.283

[这](https://github.com/l0b0/tilde/blob/master/scripts/functions.sh)已经为我服务了一段时间了。它以红色打印错误或警告消息，每个参数一行，并允许可选的退出代码。

```
# Custom errors
EX_UNKNOWN=1

warning()
{
    # Output warning messages
    # Color the output red if it's an interactive terminal
    # @param $1...: Messages

    test -t 1 && tput setf 4

    printf '%s\n' "$@" >&2

    test -t 1 && tput sgr0 # Reset terminal
    true
}

error()
{
    # Output error messages with optional exit code
    # @param $1...: Messages
    # @param $N: Exit code (optional)

    messages=( "$@" )

    # If the last parameter is a number, it's not part of the messages
    last_parameter="${messages[@]: -1}"
    if [[ "$last_parameter" =~ ^[0-9]*$ ]]
    then
        exit_code=$last_parameter
        unset messages[$((${#messages[@]} - 1))]
    fi

    warning "${messages[@]}"

    exit ${exit_code:-$EX_UNKNOWN}
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-08-08T05:22:48.137

这个技巧对于缺少命令或功能很有用。缺少的函数（或可执行文件）的名称将在 $_ 中传递

```
function handle_error {
    status=$?
    last_call=$1

    # 127 is 'command not found'
    (( status != 127 )) && return

    echo "you tried to call $last_call"
    return
}

# Trap errors.
trap 'handle_error "$_"' ERR 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-25T13:07:34.567

这个功能最近一直很好地为我服务：

```
action () {
    # Test if the first parameter is non-zero
    # and return straight away if so
    if test $1 -ne 0
    then
        return $1
    fi

    # Discard the control parameter
    # and execute the rest
    shift 1
    "$@"
    local status=$?

    # Test the exit status of the command run
    # and display an error message on failure
    if test ${status} -ne 0
    then
        echo Command \""$@"\" failed >&2
    fi

    return ${status}
} 
```

您可以通过将 0 或最后一个返回值附加到要运行的命令的名称来调用它，因此您可以链接命令而无需检查错误值。有了这个，这个语句块：

```
command1 param1 param2 param3...
command2 param1 param2 param3...
command3 param1 param2 param3...
command4 param1 param2 param3...
command5 param1 param2 param3...
command6 param1 param2 param3... 
```

变成这样：

```
action 0 command1 param1 param2 param3...
action $? command2 param1 param2 param3...
action $? command3 param1 param2 param3...
action $? command4 param1 param2 param3...
action $? command5 param1 param2 param3...
action $? command6 param1 param2 param3...

<<<Error-handling code here>>> 
```

如果任何命令失败，错误代码就会简单地传递到块的末尾。如果您不希望在先前的命令失败时执行后续命令，但您也不希望脚本立即退出（例如，在循环内），我发现它很有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-11T16:19:10.483

使用陷阱并不总是一种选择。例如，如果您正在编写某种需要错误处理并且可以从任何脚本调用的可重用函数（在使用辅助函数获取文件之后），则该函数不能假设外部脚本的退出时间，这使得使用陷阱非常困难。使用陷阱的另一个缺点是可组合性差，因为您可能会覆盖之前可能在调用者链中设置的陷阱。

有一个小技巧可以用来在没有陷阱的情况下进行正确的错误处理。正如您可能已经从其他答案中知道的`set -e`那样，如果您在命令之后使用`||`操作符，即使您在子shell中运行它们，它们也不能在命令中工作；例如，这不起作用：

```
#!/bin/sh

# prints:
#
# --> outer
# --> inner
# ./so_1.sh: line 16: some_failed_command: command not found
# <-- inner
# <-- outer

set -e

outer() {
  echo '--> outer'
  (inner) || {
    exit_code=$?
    echo '--> cleanup'
    return $exit_code
  }
  echo '<-- outer'
}

inner() {
  set -e
  echo '--> inner'
  some_failed_command
  echo '<-- inner'
}

outer 
```

但是`||`需要操作符来防止在清理之前从外部函数返回。诀窍是在后台运行内部命令，然后立即等待它。内置函数将返回内部命令的`wait`退出代码，现在您使用的是`||`after `wait`，而不是内部函数，因此`set -e`在后者中可以正常工作：

```
#!/bin/sh

# prints:
#
# --> outer
# --> inner
# ./so_2.sh: line 27: some_failed_command: command not found
# --> cleanup

set -e

outer() {
  echo '--> outer'
  inner &
  wait $! || {
    exit_code=$?
    echo '--> cleanup'
    return $exit_code
  }
  echo '<-- outer'
}

inner() {
  set -e
  echo '--> inner'
  some_failed_command
  echo '<-- inner'
}

outer 
```

这是建立在这个想法之上的通用函数。`local`如果您删除关键字，它应该在所有与 POSIX 兼容的 shell 中工作`local x=y`，即将all 替换为`x=y`：

```
# [CLEANUP=cleanup_cmd] run cmd [args...]
#
# `cmd` and `args...` A command to run and its arguments.
#
# `cleanup_cmd` A command that is called after cmd has exited,
# and gets passed the same arguments as cmd. Additionally, the
# following environment variables are available to that command:
#
# - `RUN_CMD` contains the `cmd` that was passed to `run`;
# - `RUN_EXIT_CODE` contains the exit code of the command.
#
# If `cleanup_cmd` is set, `run` will return the exit code of that
# command. Otherwise, it will return the exit code of `cmd`.
#
run() {
  local cmd="$1"; shift
  local exit_code=0

  local e_was_set=1; if ! is_shell_attribute_set e; then
    set -e
    e_was_set=0
  fi

  "$cmd" "$@" &

  wait $! || {
    exit_code=$?
  }

  if [ "$e_was_set" = 0 ] && is_shell_attribute_set e; then
    set +e
  fi

  if [ -n "$CLEANUP" ]; then
    RUN_CMD="$cmd" RUN_EXIT_CODE="$exit_code" "$CLEANUP" "$@"
    return $?
  fi

  return $exit_code
}

is_shell_attribute_set() { # attribute, like "x"
  case "$-" in
    *"$1"*) return 0 ;;
    *)    return 1 ;;
  esac
} 
```

使用示例：

```
#!/bin/sh
set -e

# Source the file with the definition of `run` (previous code snippet).
# Alternatively, you may paste that code directly here and comment the next line.
. ./utils.sh

main() {
  echo "--> main: $@"
  CLEANUP=cleanup run inner "$@"
  echo "<-- main"
}

inner() {
  echo "--> inner: $@"
  sleep 0.5; if [ "$1" = 'fail' ]; then
    oh_my_god_look_at_this
  fi
  echo "<-- inner"
}

cleanup() {
  echo "--> cleanup: $@"
  echo "    RUN_CMD = '$RUN_CMD'"
  echo "    RUN_EXIT_CODE = $RUN_EXIT_CODE"
  sleep 0.3
  echo '<-- cleanup'
  return $RUN_EXIT_CODE
}

main "$@" 
```

运行示例：

```
$ ./so_3 fail; echo "exit code: $?"

--> main: fail
--> inner: fail
./so_3: line 15: oh_my_god_look_at_this: command not found
--> cleanup: fail
    RUN_CMD = 'inner'
    RUN_EXIT_CODE = 127
<-- cleanup
exit code: 127

$ ./so_3 pass; echo "exit code: $?"

--> main: pass
--> inner: pass
<-- inner
--> cleanup: pass
    RUN_CMD = 'inner'
    RUN_EXIT_CODE = 0
<-- cleanup
<-- main
exit code: 0 
```

使用此方法时唯一需要注意的是，从您传递给的命令对 Shell 变量所做的所有修改`run`都不会传播到调用函数，因为该命令在子 shell 中运行。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-08-20T05:04:24.170

有时`set -e`,和不能正常工作`trap ERR`，因为它们试图向shell添加**自动错误检测。**这在实践中效果不佳。`set -o` `,set -o pipefail``set -o errtrace`

 **`set -e`在我看来，你应该编写自己的错误检查代码，而不是使用和其他东西。如果您明智地使用`set -e`，请注意潜在的陷阱。

为避免在运行代码时出现错误，您可以使用`exec 1>/dev/null`或`exec 2>/dev/null`
`/dev/null`在 Linux 中为空设备文件。这将丢弃任何写入它的内容，并在读取时返回 EOF。您可以在命令末尾使用它

对于`try/catch`您可以使用`&&`或`||`实现类似的行为，可以使用 && 像这样

```
{ # try

    command &&
    # your command 

} || { 
    # catch exception 
} 
```

或者您可以使用`if else`：

```
if [[ Condition ]]; then
    # if true
else
    # if false
fi 
```

`$?`显示最后一个命令的输出，它返回 1 或 0

# xcode - 为什么 Xcode 断点不起作用？

> ID：64790
> 
> 赞同：131
> 
> 时间：2008-09-15T17:10:26.700
> 
> 标签：xcode, breakpoints

我设置了断点，但 Xcode 似乎忽略了它们。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2008-09-15T23:34:46.150

首先，我 100% 同意前面所说的 turn **OFF** `Load Symbols Lazily`。

我还有两件事要补充。

（我的第一个建议听起来很明显，但第一次有人向我建议时，我的反应是这样的：“拜托，拜托，你真的认为我不会知道更好......哦。”）

1.  确保您没有不小心将“Active Build Configuration”设置为“Release”。

2.  在项目的图形树显示中的“目标”下，右键单击目标并执行“获取信息”。寻找一个名为“生成调试符号”（或类似）的属性，并确保它是 CHECKED（又名 ON）。此外，您可以尝试查找（也在 Target >> Get Info 中）名为“Debug Information Format”的属性并将其设置为“Dwarf with dsym file”。

Target >> Get Info 下还有许多其他可能会影响您的属性。寻找诸如优化或压缩代码之类的东西并将其关闭（我假设您正在调试模式下工作，因此这不是坏建议）。另外，寻找诸如剥离符号之类的东西，并确保它也处于关闭状态。例如，调试目标的“Strip Linked Product”应设置为“No”。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2015-11-17T09:51:40.990

在 Xcode 7 中，对我有用的是：

1.  确保`Target > Scheme > Run`- 处于调试模式（是发布）

2.  确保选中“调试可执行文件”选项：

[![调试可执行文件](https://i.stack.imgur.com/MeYpz.png)](https://i.stack.imgur.com/MeYpz.png)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2008-09-15T17:10:45.560

转到 Xcode 调试首选项。确保未选择“延迟加载符号”。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2009-04-30T23:42:51.497

我只是有同样的问题（再次）。在三重检查“懒惰地加载符号”并剥离和调试信息生成标志之后，我做了以下事情：

1.  退出 Xcode
2.  打开一个终端窗口并 cd 到项目目录
3.  cd 进入 .xcodeproj 目录
4.  删除除 .pbxproj 文件之外的所有内容（我有 frank.mode1v3 和 frank.pbxuser）

您可以通过右键/选项单击 .xcodeproj 包并选择“显示包内容”在 finder 中完成相同的任务。

当我重新启动 Xcode 时，我的所有窗口都已重置为默认位置等，但断点工作！

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2019-03-27T14:53:59.753

可能的解决方案之一可能是 .... 转到 Product>Scheme>Edit scheme>..Under Run>info>Executable 检查“调试可执行文件”。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2012-03-14T15:07:33.480

对于 Xcode 4.x：转到 Product>Debug Workflow 并取消选中“Show Disassembly When Debugging”。

对于 Xcode 5.x 转到 Debug>Debug Workflow 并取消选中“Show Disassembly When Debugging”。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2015-10-13T10:11:19.750

另一个原因

`DeploymentPostprocessing`在 BuildSettings 中设置为 NO -[详情请点击此处](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/XcodeBuildSettingRef/1-Build_Setting_Reference/build_setting_ref.html#//apple_ref/doc/uid/TP40003931-CH3-SW53)

简而言之 -

> 激活此设置表示应剥离二进制文件并将文件模式、所有者和组信息设置为标准值。[部署_后处理]

[![在此处输入图像描述](https://i.stack.imgur.com/Hkx1t.png)](https://i.stack.imgur.com/Hkx1t.png)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2009-11-26T07:35:01.747

请参阅这篇文章：[断点在 Xcode 中不起作用？](http://complicatedtechnicalstuff.blogspot.com/2009/11/breakpoints-not-working-in-xcode.html). 您可能正在推动“运行”而不是“调试”，在这种情况下，您的程序没有在 gdb 的帮助下运行，在这种情况下，您不能指望断点起作用！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-07-19T08:10:32.673

XCode 9.4.1 对我的解决方案（没有在任何断点处停止）：

在构建目标->构建设置->优化级别：从“优化速度”->“无优化”切换（现在它更慢但有效）

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2018-03-17T18:34:04.707

这让我在 Xcode 9 中度过了令人沮丧的半天。它最终成为一个简单的调试设置。

转到“调试”>“调试工作流程”并确保“始终显示反汇编”已关闭。就那么简单。:(

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2019-08-09T04:40:58.887

在我的情况下解决它的方法非常简单，在 Xcode - Product - Clean Build Folder 之后是 Product - Run（不是 Play Xcode 按钮）。

（长按 Xcode 播放按钮切换到单元测试后，Xcode 11 -beta 4 出现问题）

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2012-12-03T13:56:18.010

对于 Xcode 4：

```
go Product -> Debug ->  Activate Breakpoints 
```

这适用于所有 Xcode 版本。快捷键是：`command key + Y.`按此组合键激活/取消激活断点。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2014-10-16T07:05:05.693

来到这个页面时遇到了同样的问题（Xcode 6 中的 C 代码没有在断点处停止）并且上面的解决方案都没有工作（该项目实际上是开箱即用的，设置方面，所以任何调试器设置的机会都很少设置为错误的值）...

在浪费了相当多的时间来解决问题之后，我终于找出了罪魁祸首（对于我的代码）：

**Xcode (/LLVM) 不喜欢 Bison 风格的`#line`预处理器命令。**

删除它们解决了问题（调试器在我的断点处停止）。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-10-09T02:55:23.247

# 问题

*   背景
    *   `Xcode`：`13.0`
        *   代码：`Objective-C`
*   问题：添加断点，但不起作用
    *   [![在此处输入图像描述](https://i.stack.imgur.com/MqxHB.jpg)](https://i.stack.imgur.com/MqxHB.jpg)

# （可能）原因及解决方案

*   **原因**：Xcode 错误
    *   **解决方案**：`Product`-> `Clean Build Folder`，然后重试调试（多次）
        *   [![在此处输入图像描述](https://i.stack.imgur.com/ytAAQ.png)](https://i.stack.imgur.com/ytAAQ.png)
*   **原因**：禁用调试
    *   **解决方案**：启用它：`Product`-> `Scheme`-> `Edit Scheme`-> `Run`->`Info`
        *   `Build Configuration`设置`Debug`
        *   选择/选择/启用：`Debug executable`
        *   [![在此处输入图像描述](https://i.stack.imgur.com/oOFz4.png)](https://i.stack.imgur.com/oOFz4.png)
*   **原因**：禁用所有断点
    *   **解决方案**：启用它：调试面板->单击断点图标
        *   [![在此处输入图像描述](https://i.stack.imgur.com/7h45O.png)](https://i.stack.imgur.com/7h45O.png)
*   **原因**：调试信息被优化
    *   **解决方案**：不优化
    *   单击项目 -> `Build Settings`-> `Apple Clang - Code Generation`-> `Optimization Level`->`Debug`确保是`None[-O0]`
        *   [![在此处输入图像描述](https://i.stack.imgur.com/pXqOZ.png)](https://i.stack.imgur.com/pXqOZ.png)

# 有关的

## XCode 的符号断点不起作用

*   **背景**

XCode 崩溃日志

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSCFConstantString stringByAppendingString:]: nil argument' 
```

添加 XCode 符号断点

`-[__NSCFConstantString stringByAppendingString:]:`

但断点不起作用

*   **解决方案**

改成：

`-[NSString stringByAppendingString:]`

相关文档：[stringByAppendingString：](https://developer.apple.com/documentation/foundation/nsstring/1412307-stringbyappendingstring?language=objc)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-18T12:34:05.917

Xcode（2.4.1）中的断点有很多问题。我使用一个只包含其他项目的项目（如 Visual Studio 中的解决方案）。我发现有时断点根本不起作用，除非在起始项目中设置了至少一个断点（即包含我的代码入口点的断点）。如果唯一的断点位于“较低级别”的项目中，它们就会被忽略。

如果您在包含断点所在的源代码行的项目中对断点执行操作，则似乎 Xcode 仅正确处理断点操作。

如果我尝试通过另一个项目删除或禁用断点，该操作有时不会生效，即使调试器表明它已经生效。因此，我会发现自己在禁用断点上或在我之前删除的（现在不可见的）断点上中断。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2009-02-09T00:56:32.747

我的断点不起作用，然后完成了 Build / Clean All Targets 以使它们再次工作。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2011-12-06T12:13:59.377

我认为问题可能是设备版本和 Xcode 之间的不兼容。我在运行 iOS 5.0.1 的 iPhone 4S 上尝试调试时遇到了这个问题。我仍在使用 Xcode 3.2.5。我通过在管理器窗口中选择“使用此设备进行开发”从手机中获取符号。然而，这款手机拒绝断点。我的旧 3GS**将**断点，相同的 Xcode 项目，相同的设置......只是不同的设备，它运行 iOS 4.0。我猜这是 3.2.5 中的 Xcode 错误，因为我有符号。到目前为止，我已经尝试了这里发布的所有解决方案，我决定解决我的问题的方法是继续升级到 XCode 4。也许你无法有效地调试，除非你的基础 SDK 至少与要调试的系统一样高。也许这很明显 - 任何人都可以确认吗？

编辑：当我确认这是真的时，我会更新。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2015-02-24T18:34:42.657

删除我的 Build 文件夹为我解决了这个问题。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2015-03-15T15:28:40.867

为此，对于 Xcode 6 及更高版本，请确保断点状态按钮已激活（蓝色箭头状按钮）：

![在此处输入图像描述](https://i.stack.imgur.com/xfByo.png)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2015-04-11T09:18:24.807

如果所有其他方法都失败了，而不是断点，您可以调用以下函数：

```
void BreakPoint(void) {
    int i=1;
    #if !__OPTIMIZE__
    printf("Code is waiting; hit pause to see.\n");
    while(i);
    #endif
} 
```

要恢复，手动将 i 设置为零，然后点击恢复按钮。

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-05-12T15:01:34.490

我在 XCode 6.3.1 中也发生了同样的事情。我设法通过以下方式修复它：

*   转到**查看->导航器->显示调试导航器**
*   右键单击**项目根目录 -> 移动断点**（如果选择了用户选项）
*   （我还选择了选项**share breakpoints**，即使我不确定是否有必要）。

完成该更改后，我将“*移动断点*”选项设置回项目，并取消选择“*共享断点*”选项，并且仍然有效。

我不完全知道为什么，但这让我的断点回来了。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2012-07-03T11:57:00.383

在 Xcode 4 中

```
- Product menu > Manage Schemes
- Select the scheme thats having debugging problems (if only one choose that)
- Click Edit button at bottom
- Edit Scheme dialog appears
- in left panel click on Run APPNAME.app
- on Right hand panel make sure youre on INFO tab
- look for drop down DEBUGGER:
- someone had set this to None
- set to LLDB if this is your preferred debugger
- can also change BUILD CONFIGURATION drop down to Debug 
-      but I have other targets set to AdHoc which debug fine once Debugger is set 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-11-25T11:03:58.657

我发现了问题。不知何故，在我的 XCode 中启用了“*调试时显示反汇编*”，这会产生该问题。当我禁用它时，我的所有调试器都停止在我的源代码中。

您可以在以下位置找到它：`Product->Debug Workflow->Show Disassembly`调试时。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2014-04-08T12:00:43.163

您可以在下拉菜单中激活/禁用断点 ![在此处输入图像描述](https://i.stack.imgur.com/1YUCL.png)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2017-08-08T11:11:54.730

我尝试了上述所有方法，但对我来说，只停用一次调试断点然后激活它们就可以了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-15T19:49:44.053

设置断点时，右键单击，您应该获得有关如何处理断点的几个选项（记录变量并继续，暂停执行等）

还要确保在调试首选项中未选择“延迟加载符号”。

（适用于 Xcode 3.1，不确定过去/未来的版本）

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-15T23:38:19.950

我还没有做过 Xcode，但我建议你禁用“Zerolink”和“Load Symbols Lazily”；这将解决大多数问题。无论如何，Zerolink 都是可憎的。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-15T23:39:04.893

Xcode 中的断点似乎有 3 种状态。如果您单击它们，它们将通过不同的设置。启用深蓝色，禁用灰色，有时我看到淡蓝色，这需要我再次单击断点以使其变为深蓝色。

除此之外，请确保您使用调试命令而不是运行命令启动它。您可以通过点击 option + command + return 或运行菜单中的 Go（调试）选项来做到这一点。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2008-09-18T20:04:23.807

我相信一个项目也可能在断点方面被破坏。例如，我有一个项目，它不会在它从上一个会话中记住的任何断点上中断。[我首先在这里](http://blog.kleymeyer.com/2007/09/problem-with-breakpoints-in-xcode/)写了这个

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-04-27T05:58:42.267

还要确保设备上没有安装应用程序的 AppStore 分发版。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2009-07-22T14:24:11.873

要检查的另一件事是，如果您的调试模式有一个“权利”plist 文件（可能是因为您正在使用钥匙串进行操作），请确保该 plist 文件具有“get-task-allow”= YES 行。没有它，调试和日志记录将被破坏。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2010-08-04T21:36:56.443

我有 Xcode 3.2.3 SDK 4.1 断点会随机失败。我发现如果您清理构建并使用构建下的 touch 命令，它们会再次起作用。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2010-10-26T05:48:59.240

这是我遇到的一个晦涩难懂的问题：如果您正在使用共享库（或插件），则断点在启动时会变黄，这可能会导致您沮丧地敲击键盘并终止调试过程。好吧，不要那样做！在应用程序加载库之前，不会加载符号，此时断点将变为有效。我在浏览器插件中遇到了这个问题......在我浏览到实例化我的插件的页面之前，BPs 被禁用。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2011-08-29T11:09:12.233

当我想调试自定义可执行文件为 Safari 5.1 的 Web 插件时，我遇到了同样的问题。在将我的 Safari 从 4.0.5 升级到 5.1 之前，它运行良好。再次安装 Safari 4.0.5 后，所有断点都开始工作而无需修改任何 Xcode 设置。

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2012-10-01T20:03:19.600

如果您使用的是颠覆，只需将您的项目文件（**仅**）恢复到您知道调试器正在工作的最后一次。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2012-10-19T12:21:38.263

刚刚解决了这个问题`XCode 4.2`，以上都没有帮助。事情是（我不确定实际发生了什么，但是，也许这对某人有帮助）：我的队友在 SVN 中创建了新的构建配置和更新的项目。我在运行方案设置中设置了旧的构建配置，所以我的步骤是：

1.  产品 -> 编辑方案...
2.  选择“运行 %project_name.app%”（或任何导致问题的原因）
3.  在构建配置组合中，从我的队友那里选择新的构建配置

仅此而已，断点又回来了。希望这可以帮助。

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2012-10-26T00:16:37.783

断点变黄的另一个原因是，如果您正在调试的应用程序二进制文件在首次运行后已被修改。在我的例子中，我在调试了一次程序后，在应用程序的 Contents/Resources 文件夹中添加了一个文件夹。在添加文件夹后的调试运行中，断点变为黄色并被忽略。我修改了我的程序：我进行了清理，构建，添加了文件夹，然后运行，一切都很好。

也许 Xcode（或 OS X）会创建并记住它自己的应用程序数字签名（*未*进行数字签名），然后，感知到应用程序已被修改，拒绝尝试设置断点。通过在应用程序的第一次（调试）运行之前制作我的模组，数字签名是*用*我的模组制作的。

所有这些都在使用 Xcode 3.2.2 的 OS X 10.6.8 上。

* * *

## 回答 #38

> 赞同：0
> 
> 时间：2013-02-12T07:05:35.870

您可以在目标设置 Apple LLVM Compiler 4.1 Code Generation Section Generate Debug Symbol = YES 中检查一项设置

* * *

## 回答 #39

> 赞同：0
> 
> 时间：2013-11-06T19:18:46.770

至少在 iOS 项目中会不时发生这种情况。为了修复它，我不得不重启 iOS 设备，退出 Xcode，然后重建项目。

* * *

## 回答 #40

> 赞同：0
> 
> 时间：2014-09-11T09:23:56.223

同时拥有 Xcode 5 和 6 GM 会导致前者失去断点功能（Xcode 6 beta 还可以）。

我尝试了许多建议的方法，但最终放弃了，我现在只使用 Xcode 6。

* * *

## 回答 #41

> 赞同：0
> 
> 时间：2015-07-23T06:41:30.837

在 Xcode 6.4 上，我需要重新启动我的 Mac。

（尝试启用/禁用断点、重启 iOS 设备、重启 Xcode、从工作区包中删除断点文件...）

* * *

## 回答 #42

> 赞同：0
> 
> 时间：2015-08-18T21:04:05.567

在使用模拟器并将 Scheme Launch 设置为“等待可执行文件”时，我遇到了 Xcode 丢失断点的问题。将其更改为“自动启动”，断点就会恢复生机。

* * *

## 回答 #43

> 赞同：0
> 
> 时间：2019-09-26T12:13:21.130

将我的 xCode 更新到版本 11.0 (11A420a) 时，我已经开始遇到这个问题。为了解决我安装了额外的模拟器版本 12.2 并将我的 iPhone 版本更新为 13.1 的问题。现在，在 iOs 模拟器和我的设备上的断点都会受到影响。

* * *

## 回答 #44

> 赞同：0
> 
> 时间：2019-11-05T12:15:19.427

在我的情况下，我用我的构建覆盖了现有的应用商店构建。我删除了它，它现在可以工作了。

* * *

## 回答 #45

> 赞同：0
> 
> 时间：2019-12-04T08:33:18.097

如果您使用 Xcode 版本 11.1 (11A1027) 确保您没有使用应用商店凭据（配置文件），因为在这种情况下将安装构建并且没有日志或调试器将起作用，我花了很多时间来弄清楚它出来了，Xcode 更新了。现在构建安装在设备上，没有任何警告。

* * *

## 回答 #46

> 赞同：0
> 
> 时间：2022-01-27T08:51:06.900

对于那些在 Swift Package 中遇到问题并且断点不起作用的人。问题是财产的**大小写敏感性**`path``target`

[![包路径截图](https://i.stack.imgur.com/w88Zk.png)](https://i.stack.imgur.com/w88Zk.png)

路径设置为`source`, 问题修复一次 设置为`Source`

* * *

## 回答 #47

> 赞同：0
> 
> 时间：2022-02-10T17:18:05.513

在 Xcode 13 上，当断点所在的代码从未被调用时，就会发生这种情况。

* * *

## 回答 #48

> 赞同：-1
> 
> 时间：2013-08-22T19:12:24.027

我有 Xcode 版本 4.6.3 并且断点从未在包含项目的子组中工作。该项目将编译并运行良好；它甚至会附加到调试器并适当地吐出 NSLog 输出。

该问题与我的标题搜索路径有关。我让其中一些设置为“递归”而不是默认的“非递归”。将它们全部更改为“非递归”并更新所有相关导入适当地解决了问题。

* * *

## 回答 #49

> 赞同：-1
> 
> 时间：2016-01-03T07:28:01.433

就我而言，我发现断点已被意外停用。您可以通过**Debug->Activate Breakpoints [Cmd+Y] 再次重新激活它。**如果您注意到灰色断点标记而不是通常的蓝色标记，则很可能是这种情况。

事实证明，您始终可以使用 Cmd+Y 键切换断点激活，您可能在没有注意到它的情况下点击了此组合键。本报告基于 Xcode 7.2。

* * *

## 回答 #50

> 赞同：-1
> 
> 时间：2016-04-06T08:18:27.473

要尝试的事情：

1) 重新启动 xcode 2) 选择另一个模拟器 - 这是我的情况 3) 重新启动 mac。

如果这些都不起作用。然后查看项目设置。（这是最不可能的事情。）

* * *

## 回答 #51

> 赞同：-2
> 
> 时间：2016-12-14T12:10:02.420

我有类似的问题。我重新安装了xcode。解决了我的问题

# emacs - 如何查看 Emacs 中打开的文件列表？或者浏览 Emacs 中的目录？

> ID：64808
> 
> 赞同：15
> 
> 时间：2008-09-15T17:12:49.563
> 
> 标签：emacs

大多数文本编辑器都有一个导航窗格，可让您查看当前打开的所有文件。或者让您浏览文件目录的窗格。

我如何在 Emacs 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2008-09-15T17:16:05.187

尝试`Ctrl-x`后跟`Ctrl-b`（在 Emacs 术语中`C-x C-b`）列出缓冲区。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-09-15T17:19:50.077

`C-x C-b`将打开`*Buffer List*`缓冲区。`C-p`在该缓冲区中，您可以使用常用键、`C-n`、`up-arrow`、`down-arrow`等进行导航。

浏览目录就像编辑文件一样简单。只需打开目录而不是文件。在我的 Linux 机器上，在打开文件`C-x C-f /tmp ENTER`的同时`C-x C-f /tmp/myfile ENTER`打开一个目录。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-17T15:19:36.120

`M-x speedbar`( [speedbar website](http://cedet.sourceforge.net/speedbar.shtml) ) 将弹出一个 emacs 框架，根据您所在的缓冲区列出当前目录的内容。该框架很小并且不会妨碍您，因此您可以在编辑文件时随时查看它. 它还可以使用变量根据文件类型过滤此显示`speedbar-supported-extension-expressions`。要查看所有速度条选项，请键入`M-x customize-group RET speedbar RET`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-15T18:29:05.823

`C-x d`访问目录编辑器。`C-x C-f`如果你给它一个目录而不是一个文件，它也会这样做。

还有`ibuffer-mode`，它可以让您以与 Dired 非常相似的方式处理打开的缓冲区：[http ://www.emacswiki.org/cgi-bin/wiki/IbufferMode](http://www.emacswiki.org/cgi-bin/wiki/IbufferMode)

它包含在最新版本的 Emacs 中，因此您可能不必单独下载它：请先尝试`M-x ibuffer`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T03:05:16.207

如果您有兴趣查看目录、源、方法等的树状结构，请尝试使用 emacs 代码浏览器[http://ecb.sourceforge.net/](http://ecb.sourceforge.net/)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-15T17:14:11.527

`C-x b TAB`将为您提供所有打开缓冲区的自动完成。或者，如果您使用的是窗口版本，请单击`Buffers`菜单项（不确定是否有等效的终端）。

编辑：还`C-x C-f`可以让您打开一个文件，您可以`TAB`用于自动完成，然后`TAB`再次查看该当前目录中的文件/目录（假设第一个选项卡没有自动完成某些内容）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T12:06:00.830

如果您只是在寻找文件而不是任何其他缓冲区，请查看 file-history.el

[https://github.com/akicho8/file-history](https://github.com/akicho8/file-history)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-15T19:31:18.420

`M-x shell`打开一个外壳，您可以在其中浏览目录

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-17T09:15:19.973

使用 diredit 浏览目录时，请考虑使用`a`而不是`RET`更改目录。

否则，每个新目录都会在一个新的缓冲区中被访问，这会很快使你的缓冲区列表变得混乱。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-05T13:14:08.593

你可以试试[侧边栏](https://github.com/sebastiencs/sidebar.el)包

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-09-23T16:36:29.100

我刚刚发现了[`neotree`](https://www.emacswiki.org/emacs/NeoTree) 一个包，它显示了根目录中所有文件的树。如果已经打开，访问缓冲区中的文件会`neotree`打开它们到缓冲区的开关。

`neotree`可以通过以下方式安装

```
M-x package-install Ret neotree 
```

或者从它的[gitbub](https://github.com/jaypei/emacs-neotree)存储库。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T17:18:44.743

此外，如果您想摆脱打开缓冲区的列表，请键入`C-x 1`.

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2011-11-30T21:30:29.107

您也可以尝试[http://code.google.com/p/emacs-nav/](http://code.google.com/p/emacs-nav/)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-17T09:11:53.807

我经常需要在“当前目录”中找到另一个文件，即。我正在编辑的文件的目录。

为了在 diredit 中快速打开这个目录，我使用：

> Cx Cf Cj

# c# - 私有访问器类忽略通用约束

> ID：64813
> 
> 赞同：4
> 
> 时间：2008-09-15T17:13:48.453
> 
> 标签：c#, .net, visual-studio-2008, unit-testing, mstest

这些天来，我遇到了团队系统单元测试的问题。我发现自动创建的访问器类忽略了通用约束——至少在以下情况下：

假设您有以下课程：

```
namespace MyLibrary
{
 public class MyClass
 {
  public Nullable<T> MyMethod<T>(string s) where T : struct
  {
   return (T)Enum.Parse(typeof(T), s, true);
  }
 }
} 
```

如果要测试 MyMethod，可以使用以下测试方法创建测试项目：

```
public enum TestEnum { Item1, Item2, Item3 }

[TestMethod()]
public void MyMethodTest()
{
 MyClass c = new MyClass();
 PrivateObject po = new PrivateObject(c);
 MyClass_Accessor target = new MyClass_Accessor(po);

 // The following line produces the following error:
 // Unit Test Adapter threw exception: GenericArguments[0], 'T', on
 // 'System.Nullable`1[T]' violates the constraint of type parameter 'T'..
 TestEnum? e1 = target.MyMethod<TestEnum>("item2");

 // The following line works great but does not work for testing private methods.
 TestEnum? e2 = c.MyMethod<TestEnum>("item2");
} 
```

运行测试将失败，并出现上面代码段注释中提到的错误。问题是 Visual Studio 创建的访问器类。如果你进入它，你会得到以下代码：

```
namespace MyLibrary
{
 [Shadowing("MyLibrary.MyClass")]
 public class MyClass_Accessor : BaseShadow
 {
  protected static PrivateType m_privateType;

  [Shadowing(".ctor@0")]
  public MyClass_Accessor();
  public MyClass_Accessor(PrivateObject __p1);
  public static PrivateType ShadowedType { get; }
  public static MyClass_Accessor AttachShadow(object __p1);

  [Shadowing("MyMethod@1")]
  public T? MyMethod(string s);
 }
} 
```

如您所见，MyMethod 方法的泛型类型参数没有约束。

那是一个错误吗？这是设计使然吗？谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T17:23:16.403

我投票错误。我不明白这怎么可能是设计使然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-28T19:29:47.727

这是关于连接的类似问题以供参考。 [https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=324473&wa=wsignin1.0](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=324473&wa=wsignin1.0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-10-03T19:18:46.663

我没有验证所有内容，但它看起来像调用：

```
TestEnum? e1 = target.MyMethod("item2"); 
```

使用类型推断来确定泛型类型参数 T。如果可能，请尝试在测试中以不同方式调用该方法：

```
TestEnum? e1 = target.MyMethod<TestEnum>("item2"); 
```

这可能会产生不同的结果。

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-25T23:01:58.820

看起来像一个错误。解决方法是将方法更改为`internal`并添加`[assembly: InternalsVisibleTo("MyLibrary.Test")]`到包含被测类的程序集中。

这将是我测试非公共方法的首选方式，因为它会产生更清晰的单元测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-20T07:16:41.903

在 msdn 上搜索带有泛型的单元测试。这是一个已知的限制。为 Microsoft Connect 上的解决方案投票，因为它肯定需要解决。

# javascript - 如何实现CTRL或SHIFT+的快捷键组合 通过javascript？

> ID：64820
> 
> 赞同：8
> 
> 时间：2008-09-15T17:14:15.723
> 
> 标签：javascript, keyboard, keyboard-shortcuts

ASP.NET 2.0 Web 应用，如何实现快捷键组合`CTRL + Letter`，最好是通过 JavaScript，让 Web 应用更符合人体工学？如何通过 JavaScript 捕获多键键盘事件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-10-24T20:21:59.370

简短的回答是您使用 Javascript 来捕获**keydown**事件并使用该事件来触发函数。相关文章：

*   [http://www.openjs.com/scripts/events/keyboard_shortcuts/](http://www.openjs.com/scripts/events/keyboard_shortcuts/)
*   [http://udayms.wordpress.com/2006/03/17/ajax-key-disabling-using-javascript/](http://udayms.wordpress.com/2006/03/17/ajax-key-disabling-using-javascript/)
*   [http://protocolsofmatrix.blogspot.com/2007/09/javascript-keycode-reference-table-for.html](http://protocolsofmatrix.blogspot.com/2007/09/javascript-keycode-reference-table-for.html)
*   [http://www.quirksmode.org/js/keys.html](http://www.quirksmode.org/js/keys.html)

如果您使用的是[jQuery 库](http://jquery.com/)，我建议您查看[HotKeys 插件](http://plugins.jquery.com/project/hotkeys)以获得跨浏览器解决方案。

> > 我知道这不是在回答原始问题，但这是我的建议：不要在 Web 应用程序中使用组合键快捷方式！
> > 
> > 为什么？因为它可能会破坏可用性，而不是增加可用性。虽然普遍认为“一键快捷方式”在普通浏览器中不使用（Opera 从上一个主要版本中将其默认删除），但您无法弄清楚各种浏览器使用的组合键快捷方式是什么，也将是什么.

Gizmo 提出了一个很好的观点。[在http://www.clagnut.com/blog/193/](http://www.clagnut.com/blog/193/)上有一些关于常用访问键分配的信息。

如果您确实更改了访问密钥，这里有一些文章对如何做好它提供了很好的建议：

*   [Accesskeys：解锁隐藏的导航](http://www.alistapart.com/articles/accesskeys/)
*   [在 HTML 表单和链接中使用 accesskey 属性](http://www.cs.tut.fi/~jkorpela/forms/accesskey.html)

您可能会发现[Firefox 的默认键盘和鼠标快捷方式的](http://www.accessfirefox.org/Firefox_Keyboard_and_Mouse_Shortcuts.html)此页面很有用（相同信息的[另一个版本](http://lesliefranke.com/files/reference/firefoxcheatsheet.html)）。[Internet Explorer 7](http://www.keyxl.com/aaacd98/28/Microsoft-Internet-Explorer-7-Browser-keyboard-shortcuts.htm)和[Internet Explorer 6](http://www.keyxl.com/aaa29c1/29/Microsoft-Internet-Explorer-6-Browser-keyboard-shortcuts.htm)的键盘快捷键。[Opera](http://www.keyxl.com/aaade74/97/Opera-web-browser-keyboard-shortcuts.htm) [和 Safari](http://www.keyxl.com/aaa8ceb/93/Apple-Safari-web-browser-keyboard-shortcuts.htm)的键盘快捷键。

您更有可能在使用[JAWS](http://www.keyxl.com/aaadc6c/406/jaws-keyboard-shortcuts.htm)或其他添加更多键盘快捷键的屏幕阅读器时遇到问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-15T18:02:21.440

您的事件侦听器函数会传递一个 Event 对象。上面有很多有用的信息，包括属性“altKey”、“ctrlKey”、“shiftKey”和“metaKey”。如果在该事件触发时按住任何修饰键，则相应的属性设置为 true。

这适用于键盘和鼠标事件（onclick 等）。请注意，如果您有 onkeydown 事件侦听器，则修饰键本身将触发该事件。

```
window.onkeyup = function(e) {
  if (e.altKey) alert("Alt pressed");
  if (e.shiftKey) alert("Shift pressed");
} 
```

这在 Firefox 3、Windows XP 上进行了测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T17:23:31.957

Javascript 支持`ctrl`++`alt`键`shift`。我想你可以弄清楚其余的。[链接](http://www.javascripter.net/faq/ctrl_alt.htm)。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2008-09-15T18:40:54.267

我知道这不是在回答原始问题，但这是我的建议：不要在 Web 应用程序中使用组合键快捷方式！

为什么？因为它可能会破坏可用性，而不是增加可用性。虽然普遍认为“一键快捷方式”在普通浏览器中不使用（Opera 从上一个主要版本中将其默认删除），但您无法弄清楚各种浏览器使用的组合键快捷方式是什么，也将是什么.

此外，如果您的访问者使用高度可定制的浏览器，例如 Firefox 或 Opera，那么他们很可能会配置自己的快捷方式或使用定义了一些附加插件的附加插件。

请记住，Web 应用程序是依赖于浏览器的，您永远不应该假设它在您最喜欢的调整最强大的浏览器上运行，它会以相同的方式对您朋友的浏览器作出反应。

# jsp - 如何在jsp中进行子字符串？

> ID：64825
> 
> 赞同：3
> 
> 时间：2008-09-15T17:14:37.890
> 
> 标签：jsp, struts2

有没有办法在 JSP 文件中使用 struts2 技术子串？我的意思是，struts2 有自己的 taglib，也使用了 ognl。如何从堆叠值或 bean 值中获取子字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-15T17:33:39.450

[http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/index.html](http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/index.html)

查找 fn:substring 及其变体。

我用过 Struts 1，但不是 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:21:17.943

Struts2 使用[OGNL](http://commons.apache.org/ognl/)。这意味着您可以直接在 S2 标记中调用对象方法。

像这样：

```
<s:property value="str.substring(0, 5)"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-07T18:47:46.407

不。

如果您需要在 JSP 中解析数据（子字符串），那么您可能正在将业务逻辑（它如何工作）与您的表示逻辑（它如何显示）混合在一起——它们应该是分开的。如果您在 JSP 中执行大量条件、计算、解析等，那么您正在为自己创造很多（未来的）痛苦。

相反，将这些关注点分开——让 JSP 变得非常简单，除了按原样显示数据或根本不显示数据之外没有其他逻辑，并在需要时加上简单的循环。将所有重要的逻辑放入一个 Java 类中，该类将数据推送到 JSP 中，在那里您将拥有 Java 的全部功能。尽可能让 JSP 成为您基于 Java 的应用程序的一层薄薄的“皮肤”。

有关详细讨论，请参阅 Terence Parr 的白皮书，网址为[http://www.cs.usfca.edu/~parrt/papers/mvc.templates.pdf](http://www.cs.usfca.edu/~parrt/papers/mvc.templates.pdf)。为自己省去很多心痛和维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-07-27T17:11:55.393

```
fn:substring(YOUR_FIELD, START_INDEX, END_INDEX) 
```

例如，如果您想获取字符串的前 3 个字符，您可以这样做：

```
${fn:substring('scrooge', -1, 3)} 
```

这是您可以使用的 XML 命名空间，它应该与 <% include%> 语句的地址相同

```
xmlns:fn="http://java.sun.com/jsp/jstl/functions" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-16T02:45:07.427

在某些情况下要注意函数库，尤其是在使用 Websphere 进行部署时！我工作的公司部署到 Websphere 6.0 版本 11，它不能正确支持函数库（放置在标签主体内时不能正常运行）。我记得他们在版本 13 中修复了它。不过，您始终可以创建自己的 JSP 标记来做任何事情，因此您可以这样做来解决问题。

# ruby-on-rails - Rails, Restful Authentication & RSpec - 如何测试需要身份验证的新模型

> ID：64827
> 
> 赞同：17
> 
> 时间：2008-09-15T17:15:03.893
> 
> 标签：ruby-on-rails, testing, rspec, restful-authentication

我使用[Bort](http://jimneath.org/2008/09/09/bort-base-rails-application/)创建了一个学习应用程序，它是一个包含 Restful Authentication 和 RSpec 的基础应用程序。我已经启动并运行它并添加了一个新对象，该对象需要用户登录才能执行任何操作（`before_filter :login_required`在控制器中）。[编辑：我还应该提到`has_many`新类的用户并且只有用户应该能够看到它。]

我使用 Rspec 的生成器创建了新的模型/控制器，这些生成器创建了许多默认测试。如果没有`before_filter`但有几个失败，它们都会通过，正如预期的那样，一旦`before_filter`到位。

如何让生成的测试像有/没有登录用户一样运行？我是否需要一整批未登录的匹配 - 重定向测试？我认为这是某种模拟或固定技术，但我是 RSpec 的新手，有点飘忽不定。好的 RSpec 教程链接也将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T19:04:35.737

我有一个非常相似的设置，下面是我目前用来测试这些东西的代码。在我输入的每个`describe`s 中：

```
it_should_behave_like "login-required object"
def attempt_access; do_post; end 
```

如果您只需要登录，或者

```
it_should_behave_like "ownership-required object"
def login_as_object_owner; login_as @product.user; end
def attempt_access; do_put; end
def successful_ownership_access
  response.should redirect_to(product_url(@product))
end 
```

如果你需要所有权。显然，辅助方法每回合都会发生变化（很少），但这为您完成了大部分工作。这是我的 spec_helper.rb

```
shared_examples_for "login-required object" do
  it "should not be able to access this without logging in" do
    attempt_access

    response.should_not be_success
    respond_to do |format|
      format.html { redirect_to(login_url) }
      format.xml { response.status_code.should == 401 }
    end
  end
end

shared_examples_for "ownership-required object" do
  it_should_behave_like "login-required object"

  it "should not be able to access this without owning it" do
    attempt_access

    response.should_not be_success
    respond_to do |format|
      format.html { response.should be_redirect }
      format.xml { response.status_code.should == 401 }
    end
  end

  it "should be able to access this if you own it" do
    login_as_object_owner
    attempt_access

    if respond_to?(:successful_ownership_access)
      successful_ownership_access
    else
      response.should be_success
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-12-22T01:02:51.473

当不测试身份验证但测试需要用户进行身份验证的控制器时，我通常存根过滤器方法：

```
before(:each) do
  controller.stub!(:authenticate).and_return(true)
end 
```

上面的示例适用于我的 before_filter 设置为 authenticate 方法：

```
before_filter :authenticate 
```

并且我的应用程序中的身份验证使用 HTTP 基本身份验证，但它确实可以是任何其他身份验证机制。

```
private
def authenticate
  authenticate_or_request_with_http_basic do |user,password|
    user == USER_NAME && password == PASSWORD
  end
end 
```

我认为这是一种非常简单的测试方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-16T12:16:55.430

我为自己的问题找到了一些答案。基本上，我需要了解如何模拟用户，`restful_authentication`以便自动生成的 rspec 控制器测试可以通过，即使我添加了`before_filter: login_required`.

以下是我刚刚找到的一些资源：

[RSpec：它应该表现得像](http://www.robbyonrails.com/articles/2008/08/19/rspec-it-should-behave-like)

[rspec、restful_authentication 和 login_required](http://matthewkwilliams.com/index.php/2008/08/19/rspec-restful_authentication-and-login_required/)

[在控制器规范中使用 restful_authentication current_user](http://rubyforge.org/pipermail/rspec-users/2007-August/002834.html)

[干燥你的 CRUD 控制器 RSpecs](http://edspencer.net/2008/08/drying-up-your-crud-controller-rspecs.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T16:44:21.557

为了模拟正在登录的用户，我侵入控制器`@current_user`手动设置：

```
module AuthHelper
  protected

  def login_as(model, id_or_attributes = {})
    attributes = id_or_attributes.is_a?(Fixnum) ? {:id => id} : id_or_attributes
    @current_user = stub_model(model, attributes)
    target = controller rescue template
    target.instance_variable_set '@current_user', @current_user

    if block_given?
      yield
      target.instance_variable_set '@current_user', nil
    end
    return @current_user
  end

  def login_as_user(id_or_attributes = {}, &block)
    login_as(User, id_or_attributes, &block)
  end
end 
```

# c# - 编写 C# 客户端以使用返回对象数组的 Java Web 服务

> ID：64833
> 
> 赞同：10
> 
> 时间：2008-09-15T17:15:58.947
> 
> 标签：c#, java, web-services

我正在编写一个 C# 客户端，它调用一个用 Java 编写的 Web 服务（由另一个人）。我已经为我的客户端添加了一个 Web 引用，并且我可以调用 Web 服务中的方法。

该服务已更改为返回一个对象数组，并且客户端未正确解析返回的 SOAP 消息。

```
MyResponse[] MyFunc(string p)

class MyResponse
{
    long id;
    string reason;
} 
```

当我生成的 C# 代理调用 Web 服务（使用 SoapHttpClientProtocol.Invoke）时，我期待一个长度为 1 的 MyResponse[] 数组，即单个元素。Invoke 调用后我得到的是一个 id=0 和 reason=null 的元素，无论服务实际返回什么。使用数据包嗅探器，我可以看到该服务正在返回看似合法的肥皂消息，其 id 和原因设置为非空值。

让 C# 客户端调用返回 someobject[] 的 Java Web 服务有什么技巧吗？如有必要，我将努力获得经过消毒的演示。

**编辑**：这是通过“添加网络参考...”的网络参考。VS 2005，.NET 3.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-15T20:51:50.737

感谢Xian，我有一个解决方案。

该服务的 wsdl 包含一行

```
<import namespace="http://mynamespace.company.com"/> 
```

客户端发送到服务器的soap在所有数据元素上都具有以下属性：

```
xmlns="http://mynamespace.company.com" 
```

但是响应的 xml 有效负载（从服务返回到客户端）没有*包含*这个命名空间。通过修改 HTTP 响应（我使用**WireShark**获得），我观察到如果我在每个返回的数据元素上强制使用 xmlns 属性，.NET 代理类会正确获取 MyResponse 值。

除了更改我无法控制的服务之外，解决方法是编辑 VS 生成的代理类（例如 Reference.cs）并查找如下行：

```
[System.Xml.Serialization.XmlTypeAttribute(Namespace="http://mynamespace.company.com")]
public partial class MyResponse { 
```

并注释掉 XmlType 属性行。这将告诉 CLR 在默认名称空间中查找响应元素，而不是在 wsdl 中指定的名称空间中查找响应元素。每当您更新参考时，您都必须重做此操作，但至少它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T17:27:10.793

已经有一段时间了，但我似乎记得在 .Net 和 Java Web 服务之间处理默认命名空间的方式存在细微差别时遇到了麻烦。

根据 Java 服务的预期，仔细检查生成的 c# 代理类和其中声明的任何命名空间（尤其是默认的 xmlns=""）。您可能必须重新创建非常细微的差异。

如果是这种情况，那么您将在 c# 属性中提供更多命名空间声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T19:57:03.570

从您的问题来看，您似乎让客户端在某个时间点工作，然后将服务更改为返回一个数组。确保重新生成代理，以便返回的 SOAP 消息在客户端上反序列化。不清楚你是否这样做了——只是确保。

# visual-studio - Visual Studio 2008：值得从 2005 年升级吗？

> ID：64839
> 
> 赞同：9
> 
> 时间：2008-09-15T17:16:54.327
> 
> 标签：visual-studio, visual-studio-2008, ide, visual-studio-2005, upgrade

到 2008 年秋天，我即将开始一个新的开发周期，主要产品有一个 winforms 和一个 asp.net 界面。我们在其中使用 Telerik、DevExpress 和 Infragistics 组件，所有组件都将在一个月左右的时间内发布，这将是我们春季发布产品的目标。

它们都支持 VS2005，我们将继续以 .net 2+ 为目标，所以到目前为止我看不出有任何令人信服的理由升级到 VS2008。

有没有人找到升级到 VS2008 的令人信服的理由？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-15T17:20:16.707

这很值得。它更快，设计器得到了极大的改进（拆分视图，更快的上下文切换），它对 javascript 有更好的支持，当你准备好以 3.5 为目标时，你就可以开始了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-15T17:31:14.777

以下是微软[升级](http://download.microsoft.com/download/3/B/D/3BDDC5D5-E8CF-4031-A12A-B072ECA27C42/VS2008PETopTenFSEMEA.doc)(.DOC) 的 10 大理由：

1.  LINQ 支持
2.  与 Microsoft Expression 相同的设计器元素（Web 和 Blend）
3.  AJAX 和 WCF/REST
4.  更好的 WPF 支持
5.  改进的 MSTEST（也包含在专业版中）
6.  改进的 HTML、CSS 和 JavaScript 编辑器
7.  从项目设置中选择要定位的框架版本
8.  改进的 Office 开发工具，包括功能区 UI 和 Click-Once 支持
9.  集成的 WCF 和 WWF 支持
10.  更好的性能和稳定性

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-15T17:22:33.347

是的，绝对值得升级。我实际上会说直接使用 VS2008 SP1。有很多 IDE 改进（可用性特性和速度）和 Web 开发体验的改进，包括更好的 JS 和 CSS 支持。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-15T17:22:44.343

如果您在一个月内发布，我建议**不要**升级。升级到 2k8 是下一个主要版本的一部分……如果一切都按原样工作，你没有理由冒着不能正常工作或其他复杂情况的风险。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-15T17:26:58.517

为了补充 John 的帖子，还内置了单元测试、内置重构、代码分析，并且 html\javascript 的网页设计器得到了极大的改进。我想不出你不升级的任何理由。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T17:23:15.543

对我来说值得升级的主要原因是我可以从同一个 IDE 定位不同的 .NET 版本（2、3、3.5），而在过去，一个版本的 Visual Studio 支持一个版本的 .NET。

UI 现在看起来响应速度更快，但核心工具和流程集并没有太大变化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T17:36:25.607

新的 C# 语言特性对我来说很有吸引力：

自动属性、对象初始化器、集合初始化器、扩展方法、lambda 表达式。

有关负责人的快速概述，请参阅： [http ://weblogs.asp.net/scottgu/archive/2007/03/08/new-c-orcas-language-features-automatic-properties-object-initializers-and -collection-initializers.aspx](http://weblogs.asp.net/scottgu/archive/2007/03/08/new-c-orcas-language-features-automatic-properties-object-initializers-and-collection-initializers.aspx) [http://weblogs.asp.net/scottgu/archive/2007/03/13/new-orcas-language-feature-extension-methods.aspx](http://weblogs.asp.net/scottgu/archive/2007/03/13/new-orcas-language-feature-extension-methods.aspx) [http://weblogs.asp.net/scottgu /archive/2007/04/08/new-orcas-language-feature-lambda-expressions.aspx](http://weblogs.asp.net/scottgu/archive/2007/04/08/new-orcas-language-feature-lambda-expressions.aspx)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:38:12.763

我同意 Martinez 先生的观点，即我不会将任何现有项目移植到 3.5 框架，但拆分设计器和 javascript 调试本身是值得的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T17:39:48.577

升级，你不会后悔。特别是，Linq 将使您的生活变得更加轻松。有 c# 的扩展。

这几乎没有触及表面，在您正在开发的领域肯定也有新玩具，无论是网络、桌面还是服务器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T17:41:00.417

我会升级，但要为安装过程留出一些时间。在我的中等速度的开发工作站上花了两个小时，安装完成后两个小时我仍在做更新、补丁、修补程序......（今天根本没有完成任何“真正的工作”！）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-09-15T17:47:04.567

在您描述的特定情况下很有帮助。考虑以下：

1）您正处于开发周期的开始。在周期开始或周期之间进行这些类型的更改总是比在周期中间更容易。鉴于此原则，您的下一个方便升级时间（如果时间表没有延迟）将是明年春天。

2) 如果您需要继续支持较旧的框架，VS2008 允许编译器针对任何特定的 .NET 运行时版本，包括 2.0。

此外，正如其他一些答案所建议的那样，直接转到 SP1。服务包升级体验并不像 VS2005 SP1 那样艰巨……至少在我的经验中是这样。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-15T18:44:16.740

VS 2008 不是重点。最新的 .Net 包是重点。您可以将 Linq 和所有其他新功能与记事本和命令行编译器一起使用，但我想这更具理论性。所以我的说法是肯定的，.net 3.5 是推荐的，但在没有 VS 2008 的情况下使用它不是一个好主意。

# xml - 我需要什么来管理 XML 文件？

> ID：64841
> 
> 赞同：1
> 
> 时间：2008-09-15T17:17:34.590
> 
> 标签：xml, xslt, browser, xquery, dtd

如果我想在浏览器中显示它并让它看起来“漂亮”，我相信我需要一个 DTD 来定义架构和一个 XSLT。但是我不确定我还需要什么才能拥有一个可以使用 XQuery 查询并在 Web 浏览器中显示的定义良好的 XML 文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:22:40.867

严格来说，你什么都不需要。XML，即使没有模式定义，也可以工作。

模式定义（在 XSD、RelaxNG 或 DTD 中）有助于使用 XML 的各种工具，因为它们可以验证 XML 的结构是否符合您的要求。

如果 XML 包含您想用浏览器查看的信息，那么 XSLT 到 HTML 的转换是很好的。不过，这远非必要。

要使用 XPath 或 XQuery 查询 XML，您需要一个 XPath 或 XQuery 处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T17:30:04.997

要使用 XQquery 查询 XML 文档，您不必定义 DTD 或 XSD。DTD 或 XSD 的目的是定义 XML 文档的严格结构并允许在使用前进行验证。

现代浏览器可以很好地解释 XML 文件并显示 DOM 树。如果需要为浏览器显示增强 XML 格式，则必须创建 XSLT 转换文件，然后将指令添加到指向 XSLT 文件的原始 XML 文档。浏览器选择该指令并使用内置的 XSLT 处理器来获取然后由浏览器解释的输出。

**信息.xml**

```
<?xml version="1.0" encoding="iso-8859-1"?>
<?xml-stylesheet type="text/xsl" href="info.xslt"?>
<info>
    <appName>My App</appName>
    <version>1.0.129</version>
    <buildTime>10-09-2008 12:44:03</buildTime>
</info> 
```

**信息.xslt**

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <html>
            <head>
                <title>Application</title>
                <style type="text/css">
                    body { font-family: Lucida Console; }
                    #outer { text-align: left; }
                    #name {
                        font-weight: bold;
                        font-size: 1.2em;
                    }
                    #logo {
                        float: left;
                        padding-right: 20px;
                        padding-bottom: 200px;
                    }
                </style>
            </head>
            <body>
                <xsl:apply-templates select="info" />
            </body>
        </html>
    </xsl:template>

    <xsl:template match="info">
        <img id="logo" src="image.png" />
        <div id="outer">
            <div id="name">
                <xsl:value-of select="appName"/>
            </div>
            <div id="version">
                <xsl:value-of select="version"/>
            </div>
            <div id="date">
                <xsl:value-of select="buildTime"/>
            </div>
        </div>
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - 编写一个与 JMS (ActiveMQ) 和 OnMessage 对话的 Servlet 更新站点

> ID：64843
> 
> 赞同：2
> 
> 时间：2008-09-15T17:18:06.790
> 
> 标签：javascript, servlets, jms, activemq

我正在构建一个站点，该站点使用简单的 AJAX Servlet 与 JMS (ActiveMQ) 交谈，并在消息从主题到达时更新站点。

我有为数据创建 XMLHttpRequest 的 Javascript。Servlet 处理 Get 请求并返回 JSON。但是我不知道如何将我的 Servlet 连接到我的 ActiveMQ 消息代理。它现在只是发回虚拟数据。

我在想Servelt应该实现messagelistener。然后 onMessage 将数据发送到 JavaScript 页面。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:56:07.417

让 servlet 实现 MessageListener 的问题在于 servlet 是同步的，而 MessageListener 是异步的。相反，您应该创建一些其他对象来充当 MessageListener 并在消息进入时更新某处的某些状态（可能是数据库或 JMX MBean 或有状态会话 EJB）。然后 servlet 可以查询该状态以查看是否有数据要报告返回客户端，您的网页可以定期 ping servlet 以请求新数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-02T08:04:04.330

正如 James Strachan 所说 - [http://activemq.apache.org/ajax.html](http://activemq.apache.org/ajax.html)是解决您问题的理想开箱即用解决方案。

如果您仍想手动创建这样的解决方案，您可以在您的 Ajax servlet 中创建 JMS 连接（每个请求的连接）。出于这个原因考虑使用 Spring JMS 模板 ( [http://static.springsource.org/spring/docs/2.5.x/reference/jms.html](http://static.springsource.org/spring/docs/2.5.x/reference/jms.html) )。然后只需在 Servlet doGet/doPost 方法中接收消息。在这种情况下，请考虑接收的低超时值。这样的解决方案将适用于队列和持久主题。

For non-durable Topics consider external message listener. Spring `MessageListenerContainer` is an excellent tool for that purpose:

```
<bean class="org.springframework.jms.listener.DefaultMessageListenerContainer
   <property name="connectionFactory" ref="jmsFactory"/>
   <property name="destination" ref="myTopic" />
   <property name="messageListener" ref="lastTenUpdatesCache" />
</bean> 
```

Bean `lastTenUpdatesCache` will be a singleton bean implementing `MesssageListener`. This bean would be responsible for caching last ten messages (just putting it into a java.util list). It will be injected into your Ajax servlet so in your doGet/doPost method you can ask it about last 10 messages sent to the topic.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-16T13:44:14.347

您是否尝试阅读链接到[ActiveMQ Ajax 支持的](http://activemq.apache.org/ajax.html)[这个问题](https://stackoverflow.com/questions/66840/integration-of-javascript-and-jms)的答案。基本上，ActiveMQ 对 Ajax 具有原生支持，因此您可以使用其 JavaScript 库直接订阅 ActiveMQ 主题。

另请参阅[ActiveMQ Web 示例](http://activemq.apache.org/web-samples.html)，其中展示了如何使用 Ajax 和 ActiveMQ 执行实时聊天或实时股票投资组合屏幕等操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T17:24:08.303

您可能需要从 JNDI 获取 JMS 连接，如下所示：

```
Properties props = new Properties();
props.setProperty(Context.INITIAL_CONTEXT_FACTORY,
    "org.apache.activemq.jndi.ActiveMQInitialContextFactory");
props.setProperty(Context.PROVIDER_URL,
    "tcp://hostname:61616");
javax.naming.Context ctx = new InitialContext(props);
// lookup the connection factory
javax.jms.TopicConnectionFactory factory = 
    (javax.jms.TopicConnectionFactory)ctx.lookup("ConnectionFactory");
// create a new TopicConnection for pub/sub messaging
javax.jms.TopicConnection conn = factory.getTopicConnection();
// lookup an existing topic
javax.jms.Topic mytopic = (javax.jms.Topic)ctx.lookup("MyTopic");
// create a new TopicSession for the client
javax.jms.TopicSession session = 
    conn.createTopicSession(false,TopicSession.AUTO_ACKNOWLEDGE);
// create a new subscriber to receive messages
javax.jms.TopicSubscriber subscriber = session.createSubscriber(mytopic); 
```

# c# - 在 C# 中使用 IBM 的 PCOMM 的示例代码 o 编写 as400 屏幕截图

> ID：64848
> 
> 赞同：2
> 
> 时间：2008-09-15T17:19:31.090
> 
> 标签：c#, com, interop, ibm-midrange

有没有人使用 C# 为 IBM as400 编写示例屏幕抓取工具？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-02T10:54:08.133

使用 interop.AutOIATypeLibrary 和 interop.AutPSTypeLibrary 构建类库时。它抛出如下错误无法将“AutPSTypeLibrary.AutPSClass”类型的 COM 对象转换为接口类型“AutPSTypeLibrary.IAutPS”。此操作失败，因为 IID 为“{891FC4A1-7DD8-11D0-9112-0004AC3617E1}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（HRESULT 异常：0x80004002 (E_NOINTERFACE)）

我正在使用 VS2017，框架 4.5。互操作 Dll 使用 framework64 中的 regasm.exe 注册，添加了参考

以上 Dlls 工作正常，同时使用控制台应用程序/Win 表单应用程序创建项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-19T22:19:24.173

[http://www.codeproject.com/KB/cs/all_ehllapi.aspx](http://www.codeproject.com/KB/cs/all_ehllapi.aspx)

我已经修改了这个例子，它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-05T19:57:14.563

我每天都在使用这些库。如果您需要任何东西，请随时给我发消息。

例子：

```
using AutOIATypeLibrary;
using AutPSTypeLibrary;

namespace MyNamespace
{
    public class Program 
    {
         public AutPS PS = new AutPS();
         public AutOIA OI = new AutOIA();
         static void Main()
        {
            PS.SetConnectionByName("A");
            OI.SetConnectionByName("A");
             // Gets a string from the presentation space at row 1, col 1, length 5
            PS.GetText(1, 1, 5); 

            // Gets the entire screen as a string. parse as needed.
            PS.GetText(1, 1, PS.NumRows * PS.NumCols);

            // Searches for a literal string in the presentation space by going forward from your row/col
            PS.SearchText("LiteralString".ToUpper(), PsDir.pcSrchForward, 1, 1);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-23T13:34:59.277

您可能想查看 PHP 中的新功能。最新版本的 PHP 有一个 5250 处理器，允许您创建一个 Web 应用程序，就像它与绿屏交互一样。[5250 桥梁信息](http://www.zend.com/en/products/platform/i5os/5250)

我意识到你想要 C#，但我还没有看到任何支持直接与屏幕交互的东西。也许编写一个 PHP 应用程序来连接到 5250 并从那里连接你的 C#。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-15T17:28:26.203

多年前，我为 Frigidaire 的一个项目用 C 语言编写了一个。内部卡会导致内存泄漏的各种乐趣，但我最终通过在通信卡的边界分配数组找到了解决方案。这是 8 年前的事了，我敢肯定今天的卡要好得多和/或使用本地通信来读取 AS400 屏幕。

# c++ - 测试整数类型是有符号还是无符号的宏

> ID：64851
> 
> 赞同：19
> 
> 时间：2008-09-15T17:19:52.340
> 
> 标签：c++, c

您将如何（在 C/C++ 中）编写一个宏来测试整数类型（作为参数给出）是有符号还是无符号？

```
      #define is_this_type_signed (my_type) ...

```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-15T17:26:43.710

在 C++ 中，使用`std::numeric_limits<type>::is_signed`.

```
#include <limits>
std::numeric_limits<int>::is_signed  - returns true
std::numeric_limits<unsigned int>::is_signed  - returns false 
```

请参阅[https://en.cppreference.com/w/cpp/types/numeric_limits/is_signed](https://en.cppreference.com/w/cpp/types/numeric_limits/is_signed)。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-09-15T17:27:07.453

如果你想要的是一个简单的宏，这应该可以解决问题：

```
#define is_type_signed(my_type) (((my_type)-1) < 0) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-15T18:06:39.277

如果你想要一个宏，那么这应该可以解决问题：

```
#define IS_SIGNED( T ) (((T)-1)<0) 
```

基本上，将 -1 转换为您的类型，看看它是否仍然是 -1。在 C++ 中，您不需要宏。只是`#include <limits>`和：

```
bool my_type_is_signed = std::numeric_limits<my_type>::is_signed; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T17:27:44.473

您的要求并不是最好的，但如果您想一起定义一个定义，一个选项可能是：

```
#define is_numeric_type_signed(typ) ( (((typ)0 - (typ)1)<(typ)0) && (((typ)0 - (typ)1) < (typ)1) ) 
```

但是，无论如何，这都不被认为是*好的*或便携的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T17:32:35.913

实际上，我今天早些时候只是想知道同样的事情。以下似乎有效：

```
#define is_signed(t)    ( ((t)-1) < 0 ) 
```

我测试过：

```
#include <stdio.h>

#define is_signed(t)    ( ((t)-1) < 0 )
#define psigned(t) printf( #t " is %s\n", is_signed(t) ? "signed" : "unsigned" );

int
main(void)
{
    psigned( int );
    psigned( unsigned int );
} 
```

打印：

```
int is signed
unsigned int is unsigned 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:35:50.867

在 C++ 中，您可以执行以下操作：

```
 bool is_signed = std::numeric_limits<typeof(some_integer_variable)>::is_signed; 
```

numeric_limits 在 <limits> 标头中定义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T21:23:03.753

目前， Althout`typeof`不是合法的 C++，您可以使用模板推导代替。请参阅下面的示例代码：

```
#include <iostream>
#include <limits>

template <typename T>
bool is_signed(const T& t)
{
  return std::numeric_limits<T>::is_signed;
}

int main()
{
  std::cout << 
    is_signed(1) << " " << 
    is_signed((unsigned char) 0) << " " << 
    is_signed((signed char) 0) << std::endl;
} 
```

此代码将打印

```
 1 0 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:27:13.227

对于 c++，有 boost::is_unsigned<T>。我很好奇你为什么需要它，恕我直言，没有什么好的理由。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-11T23:46:11.113

更“现代”的方法是使用`type_traits`：

```
#include <type_traits>
#include <iostream>
int main()
{
    std::cout << ( std::is_signed<int>::value ? "Signed" : "Unsigned") <<std::endl;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-15T17:32:42.027

您可以使用模板功能更好地做到这一点，减少宏观讨厌的业务。

```
 template <typename T>
        bool IsSignedType()
        {
           // A lot of assumptions on T here
           T instanceAsOne = 1;

           if (-instanceAsOne > 0)
           {
               return true;
           }
           else
           {
               return false;
           }
} 
```

原谅格式...

我会试试这个，看看它是否有效......

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2008-09-15T17:36:27.853

在 C 中，您不能编写一个宏，该宏适用于尚未知的基本整数类型的 typedef。

在 C++ 中，只要您的类型是基本整数类型或基本整数类型的 typedef，您就可以。这是你在 C++ 中要做的事情：

```
template <typename T>
struct is_signed_integer
{
    static const bool value = false;
};

template <>
struct is_signed_integer<int>
{
    static const bool value = true;
};

template <>
struct is_signed_integer<short>
{
    static const bool value = true;
};

template <>
struct is_signed_integer<signed char>
{
    static const bool value = true;
};

template <>
struct is_signed_integer<long>
{
    static const bool value = true;
};

// assuming your C++ compiler supports 'long long'...
template <>
struct is_signed_integer<long long>
{
    static const bool value = true;
};

#define is_this_type_signed(my_type) is_signed_integer<my_type>::value 
```

# text - 在字符集之间转换文本文件的最佳方法？

> ID：64860
> 
> 赞同：581
> 
> 时间：2008-09-15T17:21:31.133
> 
> 标签：text, unicode, utf-8, character-set

在字符集之间转换文本文件的最快、最简单的工具或方法是什么？

具体来说，我需要从 UTF-8 转换为 ISO-8859-15，反之亦然。

一切顺利：您最喜欢的脚本语言的单行代码、命令行工具或其他用于操作系统、网站等的实用程序。

## 迄今为止最好的解决方案：

在 Linux/UNIX/OS X/cygwin 上：

*   [Troels Arvin](https://stackoverflow.com/questions/64860/best-way-to-convert-text-files-between-character-sets#64889)建议的Gnu [iconv](http://www.gnu.org/software/libiconv/documentation/libiconv/iconv.1.html)最好用作**过滤器**。它似乎是普遍可用的。例子：

     **```
     $ iconv -f UTF-8 -t ISO-8859-15 in.txt > out.txt 
    ```

    [正如Ben](https://stackoverflow.com/questions/64860/best-way-to-convert-text-files-between-character-sets#64991)所指出的，有一个[使用 iconv 的在线转换器](http://www.iconv.com/iconv.htm)。** 
***   [Cheekysoft](https://stackoverflow.com/questions/64860/best-way-to-convert-text-files-between-character-sets#64888)建议的重新编码（手动）[将](https://github.com/rrthomas/recode/)就地[转换](http://www.informatik.uni-hamburg.de/RZ/software/gnu/utilities/recode_toc.html)一个**或多个文件**。例子：

     **```
     $ recode UTF8..ISO-8859-15 in.txt 
    ```

    这个使用较短的别名：

    ```
     $ recode utf8..l9 in.txt 
    ```

    Recode 还支持可用于在不同行尾类型和编码之间进行转换的*表面：*

    将换行从 LF (Unix) 转换为 CR-LF (DOS)：

    ```
     $ recode ../CR-LF in.txt 
    ```

    Base64 编码文件：

    ```
     $ recode ../Base64 in.txt 
    ```

    您也可以将它们组合起来。

    将带有 Unix 行尾的 Base64 编码的 UTF8 文件转换为带有 Dos 行尾的 Base64 编码的 Latin 1 文件：

    ```
     $ recode utf8/Base64..l1/CR-LF/Base64 file.txt 
    ```**** 

 ****[在带有Powershell](http://www.microsoft.com/windowsserver2003/technologies/management/powershell/default.mspx) ( [Jay Bazuzi](https://stackoverflow.com/questions/64860/best-way-to-convert-text-files-between-character-sets#64937) )的 Windows 上：

*   `PS C:\> gc -en utf8 in.txt | Out-File -en ascii out.txt`

（虽然不支持 ISO-8859-15；它说支持的字符集是 unicode、utf7、utf8、utf32、ascii、bigendianunicode、default 和 oem。）

## 编辑

你的意思是iso-8859-1支持吗？使用“字符串”可以做到这一点，反之亦然

```
gc -en string in.txt | Out-File -en utf8 out.txt 
```

注意：可能的枚举值为“Unknown, String, Unicode, Byte, BigEndianUnicode, UTF8, UTF7, Ascii”。

*   CsCvt - [Kalytta 的字符集转换器](http://www.cscvt.de)是另一个伟大的基于命令行的 Windows 转换工具。

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2008-09-15T17:24:23.060

[独立实用程序](http://linux.die.net/man/1/iconv)方法

```
iconv -f ISO-8859-1 -t UTF-8 in.txt > out.txt 
```

```
-f ENCODING  the encoding of the input
-t ENCODING  the encoding of the output 
```

您不必指定其中任何一个参数。它们将默认为您当前的语言环境，通常是 UTF-8。

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2015-09-30T08:41:28.073

# 试试 VIM

如果你有`vim`你可以使用这个：

未针对每种编码进行测试。

最酷的部分是您不必知道源编码

```
vim +"set nobomb | set fenc=utf8 | x" filename.txt 
```

请注意，此命令直接修改文件

* * *

### 说明部分！

1.  `+`: vim 用来在打开文件时直接输入命令。通常用于在特定行打开文件：`vim +14 file.txt`
2.  `|`: 多个命令的分隔符（如`;`在 bash 中）
3.  `set nobomb`: 没有 utf-8 BOM
4.  `set fenc=utf8`: 将新编码设置为 utf-8[文档链接](https://vimhelp.org/options.txt.html#%27fileencoding%27)
5.  `x`：保存并关闭文件
6.  `filename.txt`: 文件路径
7.  `"`: qotes 在这里是因为管道。（否则 bash 会将它们用作 bash 管道）

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2008-09-15T17:24:18.723

在 Linux 下，您可以使用非常强大的**recode**命令来尝试在不同的字符集之间进行转换以及任何行尾问题。**recode -l**将向您显示该工具可以转换的所有格式和编码。这可能是一个非常长的列表。

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2008-09-15T17:23:17.183

[图标v(1)](http://linux.die.net/man/1/iconv)

```
iconv -f FROM-ENCODING -t TO-ENCODING file.txt 
```

还有许多语言的基于 iconv 的工具。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2008-09-15T17:29:28.197

```
Get-Content -Encoding UTF8 FILE-UTF8.TXT | Out-File -Encoding UTF7 FILE-UTF7.TXT 
```

最短的版本，如果您可以假设输入 BOM 是正确的：

```
gc FILE.TXT | Out-File -en utf7 file-utf7.txt 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2011-12-06T14:43:58.560

# 尝试 iconv Bash 功能

我已经把它放入`.bashrc`：

```
utf8()
{
    iconv -f ISO-8859-1 -t UTF-8 $1 > $1.tmp
    rm $1
    mv $1.tmp $1
} 
```

..能够像这样转换文件：

```
utf8 MyClass.java 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2012-06-07T14:30:46.907

# 试试记事​​本++

在 Windows 上，我可以使用 Notepad++ 进行从**ISO-8859-1**到**UTF-8**的转换。单击`"Encoding"`，然后单击`"Convert to UTF-8"`。

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2016-08-28T19:46:57.067

# Oneliner 使用 find，具有自动字符集检测功能

****自动检测所有匹配文本文件****的字符编码**，并将所有匹配文本文件转换为`utf-8`编码：**

 **```
$ find . -type f -iname *.txt -exec sh -c 'iconv -f $(file -bi "$1" |sed -e "s/.*[ ]charset=//") -t utf-8 -o converted "$1" && mv converted "$1"' -- {} \; 
```

为了执行这些步骤，一个子 shell`sh`与 一起使用，运行一个带有标志`-exec`的单行程序，并将文件名作为位置参数传递给。在这两者之间，输出文件临时命名为.`-c``"$1"``-- {}``utf-8``converted`

其中的[`file -bi`](https://linux.die.net/man/1/file)意思是：

*   `-b`,`--brief` 不要将文件名添加到输出行（简短模式）。

*   `-i`,`--mime` 使 file 命令输出 mime 类型的字符串，而不是更传统的人类可读的字符串。因此它可以说例如`text/plain; charset=us-ascii`而不是`ASCII text`。该`sed`命令仅`us-ascii`根据`iconv`.

该`find`命令对于此类文件管理自动化非常有用。单击此处获取[更多`find`信息](http://hamwaves.com/find/en/index.html#list-the-character-encoding-of-textfiles)。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2017-06-27T19:33:29.997

DOS/Windows：使用[代码页](https://en.wikipedia.org/wiki/Code_page)

```
chcp 65001>NUL
type ascii.txt > unicode.txt 
```

命令`chcp`可用于更改代码页。代码页 65001 是 UTF-8 的 Microsoft 名称。设置代码页后，以下命令生成的输出将是代码页设置。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-09-17T06:18:34.940

PHP 图标v()

`iconv("UTF-8", "ISO-8859-15", $input);`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2020-10-05T18:14:51.300

假设您不知道输入编码并且仍然希望自动化大部分转换，我总结了以前的答案**得出了这一行。**

```
iconv -f $(chardetect input.text | awk '{print $2}') -t utf-8 -o output.text 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-07-30T15:14:18.177

在 powershell 中：

```
function Recode($InCharset, $InFile, $OutCharset, $OutFile)  {
    # Read input file in the source encoding
    $Encoding = [System.Text.Encoding]::GetEncoding($InCharset)
    $Text = [System.IO.File]::ReadAllText($InFile, $Encoding)

    # Write output file in the destination encoding
    $Encoding = [System.Text.Encoding]::GetEncoding($OutCharset)    
    [System.IO.File]::WriteAllText($OutFile, $Text, $Encoding)
}

Recode Windows-1252 "$pwd\in.txt" utf8 "$pwd\out.txt" 
```

有关支持的编码名称列表：

[https://docs.microsoft.com/en-us/dotnet/api/system.text.encoding](https://docs.microsoft.com/en-us/dotnet/api/system.text.encoding)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-11-28T19:32:40.160

通常写属性文件（Java）我在linux（mint和ubuntu发行版）中使用它：

```
$ native2ascii filename.properties 
```

例如：

```
$ cat test.properties 
first=Execução número um
second=Execução número dois

$ native2ascii test.properties 
first=Execu\u00e7\u00e3o n\u00famero um
second=Execu\u00e7\u00e3o n\u00famero dois 
```

PS：我用葡萄牙语写了 Execution number one/two 来强制使用特殊字符。

就我而言，在第一次执行时，我收到了这条消息：

```
$ native2ascii teste.txt 
The program 'native2ascii' can be found in the following packages:
 * gcj-5-jdk
 * openjdk-8-jdk-headless
 * gcj-4.8-jdk
 * gcj-4.9-jdk
Try: sudo apt install <selected package> 
```

当我安装第一个选项（gcj-5-jdk）时，问题就解决了。

我希望这对某人有所帮助。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-10-09T16:45:06.037

只需在 IntelliJ IDEA IDE 中更改加载文件的编码，在状态栏（底部）的右侧，其中指示当前字符集。它提示重新加载或转换，使用转换。确保您提前备份了原始文件。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-07-19T04:53:41.357

**尝试编码检查器**

[github上的编码检查器](https://github.com/amrali-eg/EncodingChecker)

文件编码检查器是一种 GUI 工具，可让您验证一个或多个文件的文本编码。该工具可以显示所有选定文件的编码，或仅显示没有您指定编码的文件。

文件编码检查器需要 .NET 4 或更高版本才能运行。

对于编码检测，文件编码检查器使用[UtfUnknown](https://github.com/CharsetDetector/UTF-unknown) Charset Detector 库。启发式可以检测到没有字节顺序标记 (BOM) 的 UTF-16 文本文件。

[![在此处输入图像描述](https://i.stack.imgur.com/q1i52.png)](https://i.stack.imgur.com/q1i52.png)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-07-01T10:17:32.557

使用这个 Python 脚本：[https](https://github.com/goerz/convert_encoding.py) ://github.com/goerz/convert_encoding.py 适用于任何平台。需要 Python 2.7。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-09-17T11:08:00.050

我最喜欢的工具是 Jedit（基于 Java 的文本编辑器），它有两个非常方便的功能：

*   一种使用户能够重新加载具有不同编码的文本（因此，可以直观地控制结果）
*   另一个使用户能够在保存之前明确选择编码（和行尾字符）

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-11-30T18:49:39.007

如果 macOS GUI 应用程序是您的生计，那么[SubEthaEdit](https://subethaedit.net/)是我通常用于进行编码处理的文本编辑器——它的“转换预览”允许您查看输出编码中的所有无效字符，并修复/删除它们。

而且它现在是[开源的](https://github.com/subethaedit/SubEthaEdit)，所以对他们来说很好。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-26T06:25:16.317

使用红宝石：

```
ruby -e "File.write('output.txt', File.read('input.txt').encode('UTF-8', 'binary', invalid: :replace, undef: :replace, replace: ''))" 
```

来源：[https ://robots.thoughtbot.com/fight-back-utf-8-invalid-byte-sequences](https://robots.thoughtbot.com/fight-back-utf-8-invalid-byte-sequences)

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-18T09:34:35.600

还有一个转换文件编码的网络工具：[https ://webtool.cloud/change-file-encoding](https://webtool.cloud/change-file-encoding)

它支持广泛的编码，包括一些罕见的编码，例如 IBM 代码页 37。

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2013-06-26T19:42:37.773

As described on [How do I correct the character encoding of a file?](https://stackoverflow.com/questions/132318/how-do-i-correct-the-character-encoding-of-a-file) [Synalyze It!](http://www.synalysis.net) lets you easily convert on OS X between all encodings supported by the [ICU library](http://icu-project.org).

Additionally you can display some bytes of a file translated to Unicode from all the encodings to see quickly which is the right one for your file.

# websphere - 有没有关于 Websphere 6.1 ND 部署的好教程？

> ID：64873
> 
> 赞同：-2
> 
> 时间：2008-09-15T17:22:56.513
> 
> 标签：websphere

我需要在 WAS ND 6.1 上部署一个应用程序，但对此一无所知，也负担不起去培训的费用……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T20:48:35.003

有 RedBook [WebSphere Application Server V6.1：系统管理和配置](http://www.redbooks.ibm.com/abstracts/sg247304.html?Open)第 14 章讨论应用程序部署，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-19T15:35:39.957

开始使用 WAS ND 可能会有点不知所措。上面提到的红皮书给你一个很好的介绍，尤其是前几章，但它们通常超过 500 页。IBM 还提供了一个教育助手，它是一种演示风格概述，可以作为一个很好的起点。教育助手的链接如下所示：

[http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-17T13:24:34.277

IBM 的这门课程也很棒，但有点贵！！！

[http://www.redbooks.ibm.com/abstracts/sg247304.html?打开](http://www.redbooks.ibm.com/abstracts/sg247304.html?Open)

# java - Oracle 8.x 系列中如何以编程方式替换字符

> ID：64875
> 
> 赞同：1
> 
> 时间：2008-09-15T17:23:13.673
> 
> 标签：java, sql, oracle, exception, unicode

由于我们的 Java 应用程序之一出现重复错误：

```
Engine engine_0: Error in application action.
org.xml.sax.SAXParseException: An invalid XML character (Unicode: 0x13)
was found in the element content of the document. 
```

我需要在 Oracle 数据库中“修复”一些 Unicode 字符，最好是以编程方式。一旦确定，“搜索和替换”它的简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T17:33:01.653

假设字符存在于文本字段中：

```
update TABLE set COLUMN=REPLACE(convert(varchar(5000), COLUMN), 'searchstring', 'replacestring') 
```

（请注意，这仅适用于不超过 5000 个字符的文本字段，因为较大的文本字段会增加查询中的数字）。

# macos - 为什么我的可可程序在启动过程中会出现 EXC_BAD_ACCESS？

> ID：64881
> 
> 赞同：3
> 
> 时间：2008-09-15T17:24:01.703
> 
> 标签：macos, cocoa, exc-bad-access

在加载我的可可应用程序期间，我的程序崩溃并显示 EXC_BAD_ACCESS 消息。堆栈跟踪没有帮助。关于如何找到问题的任何线索？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-15T23:48:37.507

当您尝试访问未正确保留的对象时，我曾见过这种情况发生的情况，因此它要么未指向对象的有效副本，要么指向另一种类型的对象。在 gdb 中使用 po 和 print 在启动过程中尽早放置断点并分析对象是您最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-16T15:21:03.677

这通常表示内存管理错误。

确保您的所有出口声明都遵循最佳实践：

```
@interface MyClass : MySuperclass {
    UIClass *myOutlet;
}
@property (nonatomic, retain) IBOutlet UIClass *myOutlet;
@end 
```

这种格式可确保您在具有任何超类的任何平台上获得正确的内存管理。

检查任何`awakeFromNib`方法以确保您没有过度释放对象等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-11-15T11:21:13.567

旧线程的新答案...在 XCode 4 中，诊断 EXC_BAD_ACCESS 异常的最有效方法是使用 Instruments 来分析您的应用程序（从 XCode 单击 Product/Profile 并选择 Zombies）。这将帮助您识别发送到已释放对象的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T20:27:57.457

补充一点：解档失败的首要原因是忘记了“return self”；来自自定义类的 -init 。非常疼 ：（

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-19T02:56:25.750

检查控制台日志（Applications/Utilities/Console.app）。当程序在启动时崩溃，并且初始化出现问题时，它通常会在崩溃之前在那里写出一些有用的错误消息。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2008-09-15T17:29:29.227

这是可能的原因之一。有一个未初始化的 IBOutlet 对象，并且在 nil 上调用了一条消息。堆栈跟踪可能如下所示：

```
#0    0x90a594c7 in objc_msgSend
#1    0xbffff7b8 in ??
#2    0x932899d8 in loadNib
#3    0x932893d9 in +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:]
#4    0x9328903a in +[NSBundle(NSNibLoading) loadNibFile:externalNameTable:withZone:]
#5    0x93288f7c in +[NSBundle(NSNibLoading) loadNibNamed:owner:]
#6    0x93288cc3 in NSApplicationMain
#7    0x00009f80 in main at main.mm:17 
```

由于堆栈跟踪没有帮助，您将不得不逐步检查代码以查找错误。如果由于某种原因您无法在执行早期设置断点，请尝试插入一些 Debugger(); 将中断调试器的调用。

# postfix-mta - Highrise 如何处理诸如 dropbox@123456.foobar.highrisehq.com 之类的电子邮件地址？

> ID：64882
> 
> 赞同：-1
> 
> 时间：2008-09-15T17:24:02.703
> 
> 标签：postfix-mta, mta

我正在尝试生成自定义电子邮件地址，这些地址会被转发到一个包罗万象的地方。我想知道如何配置后缀来处理这些类型的电子邮件

dropbox@123456.foobar.highrisehq.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T17:49:46.027

我确实相信它不完全是 smtp 服务器级别的东西。就像票证 ID 在主题行中的邮件一样，您必须将其保留在那里，通常会有另一个应用程序检查 TO 地址，进行数据库查找，然后做一些有用的事情。

我还没有注册 highrise，但我想示例中给出的保管箱地址为“dropbox@12345678.highrisehq.com”，12345678 部分将是一个随机生成但唯一的数字（意味着它们不会是按顺序生成，如 0000001,0000002, ... 但如 28902734, 1029383, ...) 并连接到您的帐户。这样，如果您输入错误的那部分，它登陆错误帐户的机会就会降低，并且大部分邮件都会退回。所有发送到保管箱地址的邮件都添加到会员帐户，从这个意义上说，保管箱电子邮件地址不被公开。保管箱地址不容易记住，但并非如此。这使理论更加可信，即有一个单独的应用程序可以处理邮件并将它们归档到正确的帐户中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-15T17:25:05.320

他们很可能将通配符电子邮件地址传送到脚本中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-15T17:30:29.443

一个包罗万象的电子邮件地址？那不是一个完全的垃圾邮件磁铁吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-18T07:59:10.383

你可以用 Postfix 做各种花哨的事情。值得注意的是，在构建查询方面，2.2 及更高版本具有更强大的功能和更好的语法。这是我用来确定电子邮件地址（在本例中为 user+pin@domain.com）是否符合条件以便被允许点击脚本的示例。

mail01 # cat /etc/postfix/mysql_virtual_alias_maps.cf

用户 = email_api
密码 = email_api_pass

主机 = dbslave_vip
dbname = the_db

query = SELECT 'local_user@localhost' FROM u_user WHERE login_name = substring_index( '%s' , '+', 1 ) AND pin = substring_index(substring_index( '%s ' , '@', 1), '+', - 1）限制1；

# mysql - 从“显示表”MySQL 查询中选择数据

> ID：64894
> 
> 赞同：61
> 
> 时间：2008-09-15T17:24:54.340
> 
> 标签：mysql, sql, metadata

`show tables`是否可以在 MySQL 中进行选择？

```
SELECT * FROM (SHOW TABLES) AS `my_tables` 
```

沿着这些思路的东西，虽然上面不起作用（至少在 5.0.51a 上）。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-15T17:27:34.690

我想你想要`SELECT * FROM INFORMATION_SCHEMA.TABLES`

见[http://dev.mysql.com/doc/refman/5.0/en/tables-table.html](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-15T17:37:40.237

`INFORMATION_SCHEMA`正如其他人所提到的，除非您从 中选择，否则我不知道。

但是，该`SHOW`命令非常灵活，例如：

```
SHOW tables like '%s%' 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-02-20T11:46:42.540

计算：

```
SELECT COUNT(*) as total FROM (SELECT TABLE_NAME as tab, TABLES.* FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='database_name' GROUP BY tab) tables; 
```

列出：

```
SELECT TABLE_NAME as table, TABLES.* FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='database_name' GROUP BY table; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-15T23:37:29.467

您不能`SHOW`像示例中那样将语句放在子查询中。唯一可以进入子查询的语句是`SELECT`.

正如其他答案所述，您可以直接查询 INFORMATION_SCHEMA`SELECT`并获得更大的灵活性。

MySQL 的`SHOW`语句在内部只是针对 INFORMATION_SCHEMA 表的查询。

用户@physicalattraction 对大多数其他答案发表了此评论：

> 这为您提供了有关表的（元）信息，而不是表的内容，正如 OP 所期望的那样。– 物理吸引力

相反，OP的问题*并不是*说他们要选择所有表中的数据。他们说他们想从 的结果中进行选择`SHOW TABLES`，这只是一个表名列表。

如果 OP 确实想从所有表中选择所有数据，那么答案是否定的，你不能用一个查询来做到这一点。每个查询都必须明确命名其表。您不能使表名成为变量或同一查询的另一部分的结果。此外，给定查询结果的所有行必须具有相同的列。

因此，从所有表中选择所有数据的唯一方法是运行`SHOW TABLES`，然后对于该结果中命名的每个表，运行另一个查询。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-02T14:36:38.597

您可能比您想象的更接近 - [SHOW TABLES](https://dev.mysql.com/doc/refman/en/show-tables.html)的行为已经很像 SELECT 语句。这是一个[PHP](https://www.php.net/manual/en/class.pdo.php)示例，说明如何获取其“行”：

```
$pdo = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);
foreach ($pdo->query("SHOW TABLES") as $row) {
    print "Table $row[Tables_in_$dbname]\n";
} 
```

SHOW TABLES 的行为类似于单列表上的 SELECT。该列名称`Tables_in_`加上数据库名称。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-15T17:27:24.473

您是否查看过查询 INFORMATION_SCHEMA.Tables？如在

```
SELECT ic.Table_Name,
    ic.Column_Name,
    ic.data_Type,
    IFNULL(Character_Maximum_Length,'') AS `Max`,
    ic.Numeric_precision as `Precision`,
    ic.numeric_scale as Scale,
    ic.Character_Maximum_Length as VarCharSize,
    ic.is_nullable as Nulls, 
    ic.ordinal_position as OrdinalPos, 
    ic.column_default as ColDefault, 
    ku.ordinal_position as PK,
    kcu.constraint_name,
    kcu.ordinal_position,
    tc.constraint_type
FROM INFORMATION_SCHEMA.COLUMNS ic
    left outer join INFORMATION_SCHEMA.key_column_usage ku
        on ku.table_name = ic.table_name
        and ku.column_name = ic.column_name
    left outer join information_schema.key_column_usage kcu
        on kcu.column_name = ic.column_name
        and kcu.table_name = ic.table_name
    left outer join information_schema.table_constraints tc
        on kcu.constraint_name = tc.constraint_name
order by ic.table_name, ic.ordinal_position; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-15T17:30:14.530

```
SELECT * FROM INFORMATION_SCHEMA.TABLES 
```

这应该是一个好的开始。有关更多信息，请查看[INFORMATION_SCHEMA 表](http://dev.mysql.com/doc/refman/5.0/en/information-schema.html)。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-11-05T17:26:03.060

```
SELECT column_comment FROM information_schema.columns WHERE table_name = 'myTable' AND column_name = 'myColumnName' 
```

这将返回评论：myTable.myColumnName

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-15T17:27:41.790

我认为您想要的是 MySQL 的 information_schema 视图：http: [//dev.mysql.com/doc/refman/5.0/en/tables-table.html](http://dev.mysql.com/doc/refman/5.0/en/tables-table.html)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-12-19T12:51:53.617

是的，从 table_schema 中选择对于系统管理可能非常有用。如果你有很多服务器、数据库、表……有时你需要删除或更新一堆元素。例如，要为 DROP 所有带有前缀名称“wp_old_...”的表创建查询：

```
SELECT concat('DROP TABLE ', table_name, ';') FROM INFORMATION_SCHEMA.TABLES
WHERE table_schema = '*name_of_your_database*'
AND table_name LIKE 'wp_old_%'; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-05-15T22:28:22.893

在 MySql 5.1 你可以试试

```
show tables like 'user%'; 
```

**输出：**

```
mysql> show tables like 'user%';

+----------------------------+

| Tables_in_test (user%) |

+----------------------------+

| user                       |

| user_password              |

+----------------------------+

2 rows in set (0.00 sec) 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-09-15T14:51:12.820

You can create a stored procedure and put the table names in a cursor, then loop through your table names to show the data.

Getting started with stored procedure: [http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx](http://www.mysqltutorial.org/getting-started-with-mysql-stored-procedures.aspx)

Creating a cursor: [http://www.mysqltutorial.org/mysql-cursor/](http://www.mysqltutorial.org/mysql-cursor/)

For example,

```
CREATE PROCEDURE `ShowFromTables`()
BEGIN

DECLARE v_finished INTEGER DEFAULT 0;
DECLARE c_table varchar(100) DEFAULT "";

DECLARE table_cursor CURSOR FOR 
SELECT table_name FROM information_schema.tables WHERE table_name like 'wp_1%';

DECLARE CONTINUE HANDLER 
    FOR NOT FOUND SET v_finished = 1;

OPEN table_cursor;

get_data: LOOP

FETCH table_cursor INTO c_table;

IF v_finished = 1 THEN 
LEAVE get_data;
END IF;

SET @s=CONCAT("SELECT * FROM ",c_table,";");

PREPARE stmt FROM @s;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END LOOP get_data;

CLOSE table_cursor;

END 
```

Then call the stored procedure:

```
CALL ShowFromTables(); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-15T17:30:22.767

我不明白您为什么要 `SELECT * FROM`用作声明的一部分。

[12.5.5.30。显示表语法](http://dev.mysql.com/doc/refman/5.0/en/show-tables.html)

# javascript - 解析字符串：提取单词和短语 [JavaScript]

> ID：64904
> 
> 赞同：9
> 
> 时间：2008-09-15T17:26:19.080
> 
> 标签：javascript, regex, parsing

我需要在以空格分隔的术语列表中支持确切的短语（用引号括起来）。因此，用空格字符分割相应的字符串是不够的。

例子：

```
input : 'foo bar "lorem ipsum" baz'
output: ['foo', 'bar', 'lorem ipsum', 'baz'] 
```

我想知道这是否可以通过单个 RegEx 来实现，而不是执行复杂的解析或拆分和重新加入操作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-15T17:59:11.137

```
var str = 'foo bar "lorem ipsum" baz';  
var results = str.match(/("[^"]+"|[^"\s]+)/g); 
```

... 返回您要查找的数组。
但是请注意：

*   包括边界引号，因此可以`replace(/^"([^"]+)"$/,"$1")`在结果中删除。
*   引号之间的空格将保持不变。`lorem`因此，如果和之间有三个空格`ipsum`，它们就会出现在结果中。您可以通过运行`replace(/\s+/," ")`结果来解决此问题。
*   如果之后没有结束`"`（`ipsum`即错误引用的短语），您最终会得到：`['foo', 'bar', 'lorem', 'ipsum', 'baz']`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T18:16:42.123

试试这个：

```
var input = 'foo bar "lorem ipsum" baz';
var R =  /(\w|\s)*\w(?=")|\w+/g;
var output = input.match(R);

output is ["foo", "bar", "lorem ipsum", "baz"] 
```

请注意，lorem ipsum 周围没有额外的双引号

虽然它假设输入在正确的位置有双引号：

```
var input2 = 'foo bar lorem ipsum" baz'; var output2 = input2.match(R);
var input3 = 'foo bar "lorem ipsum baz'; var output3 = input3.match(R);

output2 is ["foo bar lorem ipsum", "baz"]
output3 is ["foo", "bar", "lorem", "ipsum", "baz"] 
```

并且不会处理转义的双引号（这是一个问题吗？）：

```
var input4 = 'foo b\"ar  bar\" \"bar "lorem ipsum" baz';
var output4 = input4.match(R);

output4 is  ["foo b", "ar bar", "bar", "lorem ipsum", "baz"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-15T17:49:19.227

一个简单的正则表达式就可以了，但要留下引号。例如

```
'foo bar "lorem ipsum" baz'.match(/("[^"]*")|([^\s"]+)/g)
output:   ['foo', 'bar', '"lorem ipsum"', 'baz'] 
```

编辑：被 shyamsundar 打败，对不起双重答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T18:45:23.990

非常感谢您的快速回复！

以下是选项的摘要，供后人参考：

```
var input = 'foo bar "lorem ipsum" baz';

output = input.match(/("[^"]+"|[^"\s]+)/g);
output = input.match(/"[^"]*"|\w+/g);
output = input.match(/("[^"]*")|([^\s"]+)/g)
output = /(".+?"|\w+)/g.exec(input);
output = /"(.+?)"|(\w+)/g.exec(input); 
```

为了记录，这是我想出的可憎之处：

```
var input = 'foo bar "lorem ipsum" "dolor sit amet" baz';
var terms = input.split(" ");

var items = [];
var buffer = [];
for(var i = 0; i < terms.length; i++) {
    if(terms[i].indexOf('"') != -1) { // outer phrase fragment -- N.B.: assumes quote is either first or last character
        if(buffer.length === 0) { // beginning of phrase
            //console.log("start:", terms[i]);
            buffer.push(terms[i].substr(1));
        } else { // end of phrase
            //console.log("end:", terms[i]);
            buffer.push(terms[i].substr(0, terms[i].length - 1));
            items.push(buffer.join(" "));
            buffer = [];
        }
    } else if(buffer.length != 0) { // inner phrase fragment
        //console.log("cont'd:", terms[i]);
        buffer.push(terms[i]);
    } else { // individual term
        //console.log("standalone:", terms[i]);
        items.push(terms[i]);
    }
    //console.log(items, "\n", buffer);
}
items = items.concat(buffer);

//console.log(items); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-15T17:43:48.910

```
'foo bar "lorem ipsum" baz'.match(/"[^"]*"|\w+/g); 
```

边界引号被包括在内

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-15T17:50:11.190

怎么样，

```
output = /(".+?"|\w+)/g.exec(input) 
```

然后传递输出以丢失引号。

交替，

```
output = /"(.+?)"|(\w+)/g.exec(input) 
```

然后执行 pass n 输出以丢失空捕获。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-26T05:37:11.827

ES6 解决方案支持：

*   除内引号外按空格分隔
*   删除引号但不删除反斜杠转义引号
*   转义报价变成报价

代码：

```
input.match(/\\?.|^$/g).reduce((p, c) => {
        if(c === '"'){
            p.quote ^= 1;
        }else if(!p.quote && c === ' '){
            p.a.push('');
        }else{
            p.a[p.a.length-1] += c.replace(/\\(.)/,"$1");
        }
        return  p;
    }, {a: ['']}).a 
```

输出：

```
[ 'foo', 'bar', 'lorem ipsum', 'baz' ] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-05T16:34:46.063

一个易于理解和通用的解决方案。适用于所有分隔符和“加入”字符。还支持长度超过两个单词的“加入”单词....即列表，如

`"hello my name is 'jon delaware smith fred' I have a 'long name'"`……

有点像 AC 的答案，但更整洁......

```
function split(input, delimiter, joiner){
    var output = [];
    var joint = [];
    input.split(delimiter).forEach(function(element){
        if (joint.length > 0 && element.indexOf(joiner) === element.length - 1)
        {
            output.push(joint.join(delimiter) + delimiter + element);
            joint = [];
        }
        if (joint.length > 0 || element.indexOf(joiner) === 0)
        {
            joint.push(element);
        }
        if (joint.length === 0 && element.indexOf(joiner) !== element.length - 1)
        {
            output.push(element);
            joint = [];
        }
    });
    return output;
  } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-29T09:31:20.500

这可能是一个很晚的答案，但我有兴趣回答

```
([\w]+|\"[\w\s]+\") 
```

[http://regex101.com/r/dZ1vT6/72](http://regex101.com/r/dZ1vT6/72)

纯javascript示例

```
 'The rain in "SPAIN stays" mainly in the plain'.match(/[\w]+|\"[\w\s]+\"/g) 
```

输出：

```
["The", "rain", "in", ""SPAIN stays"", "mainly", "in", "the", "plain"] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-20T15:00:40.183

扩展接受的答案，这是一个搜索引擎解析器，

*   可以匹配短语或单词
*   将短语视为正则表达式
*   跨多个属性（例如 item.title 和 item.body）进行布尔 OR
*   处理前缀为 - 的单词或短语的否定

将短语视为正则表达式使 UI 更简单。

```
const matchOrIncludes = (str, search, useMatch = true) => {
  if (useMatch) {
    let result = false
    try {
      result = str.match(search)
    } catch (err) {
      return false
    }
    return result
  }
  return str.includes(search)
}

const itemMatches = (item, searchString, fields) => {
  const keywords = searchString.toString().replace(/\s\s+/g, ' ').trim().toLocaleLowerCase().match(/(-?"[^"]+"|[^"\s]+)/g) || []
  for (let i = 0; i < keywords.length; i++) {
    const negateWord = keywords[i].startsWith('-') ? true : false
    let word = keywords[i].replace(/^-/,'')
    const isPhraseRegex = word.startsWith('"') ? true : false
    if (isPhraseRegex) {
      word = word.replace(/^"(.+)"$/,"$1")
    }
    let word_in_item = false
    for (const field of fields) {
      if (item[field] && matchOrIncludes(item[field].toLocaleLowerCase(), word, isPhraseRegex)) {
        word_in_item = true
        break
      }
    }
    if ((! negateWord && ! word_in_item) || (negateWord && word_in_item)) {
      return false
    }
  }
  return true
}

const item = {title: 'My title', body: 'Some text'}
console.log(itemMatches(item, 'text', ['title', 'body']))
```

# templates - 如何为 SQL Server 2005 Reporting Services 报表创建模板？

> ID：64905
> 
> 赞同：8
> 
> 时间：2008-09-15T17:26:28.267
> 
> 标签：templates, reporting-services

我想为基础新报告创建模板以进行通用设计。你怎么做呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-15T17:29:22.020

对于任何涉及客户及其报告的项目而言，需要生成具有共同起始设计和格式的报告是关键。我从事报告工作已有 10 多年了。这些年来，这并不是我工作中最大的一部分，但它一直是非常重要的。任何报告项目的关键不是为每个报告重新创建平凡的方面，而是使用模板。对于 Microsoft 的 SQL Server Reporting Services，模板的使用不是一项常见的任务或知识。了解如何保存报表模板以便您和您的团队可以在 Visual Studio 2005 中创建新报表时创建这些快捷方式将有助于节省时间并使所有报表使用相同的布局和设计。

使用以下建议创建一组报告：

*   页面大小 -- 8.5 x 11（字母）和 8.5 x 14（合法）
*   方向 - 所有纸张尺寸的纵向和横向
*   标题 -- 报告名称文本框、报告副标题文本框、客户或品牌徽标
*   页脚——页码/总页数，打印日期和时间报告

获取根据建议创建的报告的所有 rdl 文件，并将文件复制到以下目录：

C:\Program Files\Microsoft Visual Studio 8\Common7\IDE\PrivateAssemblies\ProjectItems\ReportProject

通过 Add|New Item 在 Visual Studio 2005 报表项目中创建新报表时

[替代文字 http://www.cloudsocket.com/images/image-thumb14.png](http://www.cloudsocket.com/images/image-thumb14.png)

新报告对话框将显示放置新模板的目录中的项目列表。

[替代文字 http://www.cloudsocket.com/images/image-thumb15.png](http://www.cloudsocket.com/images/image-thumb15.png)

选择符合所需要求的报告并继续开发您的报告，而无需创建基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2010-01-19T18:49:07.133

此外，我建议将您的模板可能与外部链接的图像一起包装到 .msi 中，以便于分发。要求部门人员运行安装程序比希望他们找到放置报告模板的正确路径要容易得多。确保使用正确的程序文件变量等来解释“程序文件”与“Program Files(x86)”和其他变体用户有时会使用他们的环境变量设置。

# php - 最好的 PHP 缩略图/调整器类？

> ID：64907
> 
> 赞同：3
> 
> 时间：2008-09-15T17:26:42.417
> 
> 标签：php, image-manipulation

什么是最好在大多数共享主机上工作的 Nest PHP thumbnailer/resizer 类？

澄清：我正在寻找一个 PHP 类/包装器（例如[phpThumb()](http://phpthumb.sourceforge.net/)，[Asido](http://en.wikipedia.org/wiki/Asido)），所以我不必直接运行[GD](http://en.wikipedia.org/wiki/GD_Graphics_Library)或[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)函数。我专门寻找调整大小和框架功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-15T17:48:42.020

[我对phpThumb](http://sourceforge.net/projects/phpthumb/)和[Wideimage](http://sourceforge.net/projects/wideimage/)都有很好的经验。Wideimage 是更现代的 PHP5 方法，而 phpThumb 具有更多功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-16T07:10:32.060

[Asido进行了](http://asido.info)[一些修改后](http://singletonio.blogspot.com/2008/09/asido-php-thumbnailer-resizer-class.html)效果很好；）它支持我需要的大多数功能（调整大小、框架），具有适用于 GD 和 Imagemagick 的驱动程序、漂亮的简单 API 和有组织的代码库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-03-29T18:33:57.453

这是一个很棒的脚本，里面有很棒的文档。[http://phpthumb.gxdlabs.com/](http://phpthumb.gxdlabs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T18:11:58.097

我使用[Greg_Photo](http://www.gregphoto.net/index.php/2007/02/03/announcing-gregphoto_image-a-php5gd2-thumbnail-class/)作为底层 GD 命令的访问器。对于非常基本的调整大小，它效果很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-16T00:16:37.797

ImageMagick 肯定会产生非常清晰的图像，但安装或管理并不容易。ImageMagick 本身需要安装在服务器上，然后需要安装兼容版本的 MagickWand。

我还发现它习惯于创建高达 GB 或更多的大量临时文件，然后将它们转储到您的 /tmp 目录中，您需要小心这一点。它还会意外地消耗大量内存。

由于这些原因，如果您在共享主机上，我不推荐 ImageMagick。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-15T17:28:00.430

许多主机都支持 GD [http://uk3.php.net/manual/en/book.image.php](http://uk3.php.net/manual/en/book.image.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-15T17:28:38.543

我猜最好的两个（也是迄今为止最常见的）是 GD 或 ImageMagick。我对第二个感到非常高兴。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-15T17:29:04.203

Imagick 是一个原生 PHP 扩展，用于使用 ImageMagick API 创建和修改图像。它用于许多共享主机：

[http://pecl.php.net/package/imagick](http://pecl.php.net/package/imagick)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-15T17:30:07.883

Imagemagick 很好，并且有两个用于 PHP 的 API：

[http://www.imagemagick.org/script/api.php#php](http://www.imagemagick.org/script/api.php#php)

[http://www.imagemagick.org/script/api.php#php](http://www.imagemagick.org/script/api.php#php)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-15T17:44:21.127

我发现如果您每秒有多个请求，ImageMagick 和 GD 都太慢了，无法即时创建不可缓存的动态图像。我必须每秒处理几十个请求，并发现通过使用 C 和 jpeglib 将例程编写为 FastCGI 可以提高大约 50 倍的速度。

# haskell - haskell 中的箭头说明

> ID：64933
> 
> 赞同：11
> 
> 时间：2008-09-15T17:29:18.650
> 
> 标签：haskell, arrows

什么是了解箭头的好地方？理想情况下，我只是从一些好的例子中寻找一个具有简洁定义的地方，类似于 Wadler 对 monads 的阐述。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-15T17:40:44.567

[http://en.wikibooks.org/wiki/Haskell/Understanding_arrows](http://en.wikibooks.org/wiki/Haskell/Understanding_arrows)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-15T19:54:17.973

我发现 Hughes 的原始论文（“Generalizing Monads to Arrows”）相当容易理解。你可以在[这里](http://www.cs.chalmers.se/~rjmh/Papers/arrows.pdf)阅读它的旧草稿。它与原始论文存在一些差异，这些差异在罗斯帕特森自己[的 Arrows 概述的](http://www.haskell.org/arrows/index.html)[参考书目页面](http://www.haskell.org/arrows/biblio.html)上进行了说明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-23T19:54:53.840

如果您从实践中学到的东西比理论更好，请尝试使用[HXT](http://www.fh-wedel.de/~si/HXmlToolbox/)进行 XML 操作，或使用[PArrows](http://www.cs.helsinki.fi/u/ekarttun/PArrows/)进行一般解析。它们都有以箭头为中心的 API。

# xml - 我在哪里可以找到 Glade 标记语言的 XML 模式（XSD 文件）？

> ID：64951
> 
> 赞同：2
> 
> 时间：2008-09-15T17:30:42.423
> 
> 标签：xml, xsd, markup, glade

如标题所述，我正在寻找 Glade 标记语言的 XML 模式（XSD 文件）？

维基百科指出**Glade**是一种基于模式的标记语言（[维基百科的模式列表](http://en.wikipedia.org/wiki/List_of_XML_Schemas#Graphical_User_Interfaces)）。我尝试搜索网络、维基百科和 glade 网站，但找不到 Glade 的 XSD。

谢谢，尤文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-15T18:04:23.027

[http://svn.async.com.br/cgi-bin/viewvc.cgi/libglade/glade-2.0.dtd?view=markup](http://svn.async.com.br/cgi-bin/viewvc.cgi/libglade/glade-2.0.dtd?view=markup)

（主要版本@ [http://glade.gnome.org/glade-2.0.dtd](http://glade.gnome.org/glade-2.0.dtd)似乎不起作用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-24T02:11:46.710

没有什么可以明确地将林间空地与特定模式联系起来，因为它都是基于运行时的。

您可能会发现 PyGTK 生成的 .defs 文件很有用。如果你真的需要一个 XSD 文件，你应该能够从这些文件中创建一个。

[这](http://svn.gnome.org/viewvc/pygtk/trunk/gtk/gtk-base-types.defs?view=markup)看起来像主要的，该目录中还有更多内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T13:44:28.650

Thx，这是第一次开始。我认为没有比这个 DTD 更明确的文件了？此 DTD 仅指定可以使用哪些（全局）标签。特别是对于标签 <widget> 我希望对属性“类”有约束（由 XSD 支持）。XSD 应该涵盖 <widgets'>“类”属性只有某些值，例如 GtKTreeView 等。

# mysql - 有人将 Lisp 用于 MySQL 后端的 Web 应用程序吗？

> ID：64953
> 
> 赞同：6
> 
> 时间：2008-09-15T17:31:04.950
> 
> 标签：mysql, database, lisp

我一直听说 Lisp 是一种非常高效的语言，我很喜欢[SICP](http://groups.csail.mit.edu/mac/classes/6.001/abelson-sussman-lectures/)。尽管如此，我还是缺少一些有用的东西，可以让我在 Web 应用程序中替换 PHP 以进行服务器端数据库交互。

是否有类似 PHP 的用于 Lisp 或 Arc 或 Scheme 或其中一种方言的[PDO](http://us2.php.net/manual/en/book.pdo.php)库的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-16T21:51:09.510

newLisp 支持 mysql5，如果您查看[mysql5 函数调用](http://www.newlisp.org/code/modules/mysql5.lsp.html)，您会发现它接近 PDO。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-17T04:03:08.633

由于没有人提到它，您可以尝试[Postmodern](http://common-lisp.net/project/postmodern/)，它是 PostgreSQL 的接口。它旨在与 PostgreSQL 进行更紧密的集成，因此不会假装数据库之间的可移植性。

我已经将它与[hunchentoot](http://www.weitz.de/hunchentoot/)和[cl-who](http://weitz.de/cl-who/)放在一起，并建立了一个非常好的网站。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-15T17:50:58.863

newLISP - [http://www.newlisp.org/](http://www.newlisp.org/) - 支持 MySQL，但我没有使用它（newLISP）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-15T20:56:37.933

如果您对 SQL 作为您生活的一部分感到满意​​，CL-SQL 提供了到 CLOS 对象的映射。它似乎比大象更成熟。

我在我自己的网站上使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-16T22:00:50.597

我在 SBCL 和 CL-SQL 方面取得了很好的成功。CL-SQL 有一个对象映射 API，但我使用了简单的 SQL API，它只返回列表，而且效果很好。在 Clojure 语言中，您通过映射或结构 {:col1 "a", :col2 "b"} 与 JDBC 进行交互，因此生成的类库不会为您提供任何更简单的代码，该语言可以很好地处理它。以我的经验，lisp 和 sql 之间的麻烦要少于静态语言和 sql 之间的麻烦。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-17T00:47:53.923

我们的 Common Lisp ORM 解决方案是[http://common-lisp.net/project/cl-perec/](http://common-lisp.net/project/cl-perec/)

底层 SQL 库是[http://common-lisp.net/project/cl-rdbms/](http://common-lisp.net/project/cl-rdbms/)（用 PostgreSQL 全面测试，有一个玩具 SQlite 后端和一个经过一定程度测试的 Oracle 后端）

我们开始使用 CLSQL，但经过一番努力，我们决定推出自己的。

这些库和 PostgreSQL 用于为匈牙利政府开发的集群 Web 应用程序，用于规划市政当局的预算。它有大约 4000 个用户，在 peek time 有 500 个。更多信息可在[http://common-lisp.net/project/cl-dwim/](http://common-lisp.net/project/cl-dwim/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-15T17:38:42.560

Cliki 是 Common Lisp 库的一个很好的资源：http: [//www.cliki.net/database](http://www.cliki.net/database)

有一个名为 Elephant 的项目（[http://common-lisp.net/project/elephant/index.html](http://common-lisp.net/project/elephant/index.html)），它是 CL 中对象持久性的抽象。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-19T10:31:46.733

只要您在 Lisp 上切换 Webapp，就可以考虑使用持久性：您现在拥有一个持续运行的 Lisp 映像，其中包含有关您的应用程序的所有内容。我个人为此使用了[大象](http://www.common-lisp.net/project/elephant)。

Elephant 可以使用 CL-SQL 或 BDB 作为它的后端，这意味着如果你有一个 MySQL 运行，你可以使用 MySQL。不过，我发现使用 SQLite 非常实用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-16T21:42:10.547

我们使用 SBCL、UCW、CL-SQL 和 MySQL 作为[Paragent.com](http://paragent.com)的后端。它对我们来说非常有效。我们也有许多客户使用 UCW/CL-SQL/MySQL 来定制我们通过我们的咨询部门[Bitfauna](http://bitfauna.com)构建的网站。

# c++ - 在基于 yacc 的解析器中防止内存泄漏的最佳方法是什么？

> ID：64958
> 
> 赞同：4
> 
> 时间：2008-09-15T17:31:44.760
> 
> 标签：c++, yacc

Yacc 不允许传递对象。因为 %union 只能包含 POD 类型，所以复杂对象必须是新的并通过指针传递。如果发生语法错误，yacc 解析器将停止运行，并且对所有这些已创建对象的引用都将丢失。

我想出的唯一解决方案是所有新的对象都继承一个特定的基类，在分配时添加到容器中，如果出现错误，可以删除该容器中的所有内容。

有谁知道任何更好的 yacc 技巧来解决这个问题？

请不要告诉我选择不同的解析器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-15T18:26:43.490

我喜欢 Yacc，但区分联合堆栈确实提出了挑战。

不知道你用的是C还是C++。我已经修改了 Yacc 来为我自己的目的生成 C++，但是这个解决方案可以适应 C。

我首选的解决方案是将接口传递给解析树的所有者，而不是在堆栈中构造对象。通过在 Yacc 之外创建自己的堆栈来做到这一点。在调用分配对象的非终端之前，将该对象的所有者推送到此堆栈。

例如：

```
class IExpressionOwner
{
public:
    virtual ExpressionAdd *newExpressionAdd() = 0;
    virtual ExpressionSubstract *newExpressionSubtract() = 0;
    virtual ExpressionMultiply *newExpressionMultiply() = 0;
    virtual ExpressionDivide *newExpressionDivide() = 0;
};

class ExpressionAdd : public Expression, public IExpressionOwner
{
private:
    std::auto_ptr<Expression> left;
    std::auto_ptr<Expression> right;

public:
    ExpressionAdd *newExpressionAdd()
    {
        ExpressionAdd *newExpression = new ExpressionAdd();
        std::auto_ptr<Expression> autoPtr(newExpression);
        if (left.get() == NULL)
            left = autoPtr;
        else
            right = autoPtr;
        return newExpression;
    }

    ...
};

class Parser
{
private:
    std::stack<IExpressionOwner *> expressionOwner;

    ...
}; 
```

任何需要表达式的东西都必须实现 IExpressionOwner 接口并在调用非终端表达式之前将自身推入堆栈。这是很多额外的代码，但它控制着对象的生命周期。

**更新**

表达式示例是一个糟糕的示例，因为在您减少左操作数之前您不知道该操作。尽管如此，这种技术在许多情况下仍然有效，并且只需要对表达式进行一点调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-15T17:50:39.533

如果它适合您的项目，请考虑使用 Boehm 垃圾收集器。这样您就可以自由分配新对象并让收集器处理删除。当然，使用垃圾收集器需要权衡取舍。您将不得不权衡成本和收益。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-15T17:50:46.727

使用[智能指针](http://www.boost.org/doc/libs/1_36_0/libs/smart_ptr/smart_ptr.htm)！

或者，如果您对依赖另一个库感到不舒服，您可以随时使用C++ 标准库中的[auto_ptr](http://www.gotw.ca/publications/using_auto_ptr_effectively.htm)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-16T14:53:08.360

为什么使用不同的解析器会出现这样的问题？Bison 很容易获得，并且（至少在 linux 上）yacc 通常实现为 bison。您不需要对语法进行任何更改即可使用它（除了添加 %destructor 来解决您的问题）。

# sql-server - 如何在 SQL Server 2005 Management Studio 中创建 SQL Server 2005 存储过程模板？

> ID：64977
> 
> 赞同：7
> 
> 时间：2008-09-15T17:34:27.763
> 
> 标签：sql-server, sql-server-2005, stored-procedures

如何在 SQL Server 2005 Management Studio 中创建 SQL Server 2005 存储过程模板？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-15T17:38:07.333

我认为另一个小块将帮助人们开发并提高他们的数据库开发效率。在开发软件解决方案时，我是存储过程和函数的粉丝。我喜欢在数据库级别实现我的实际 CRUD 方法。它允许我在应用程序软件（业务逻辑和数据访问）和数据库本身之间平衡我的工作。不想引发一场宗教战争，但我想让人们通过模板更快地开发存储过程并使用最佳实践。

让我们从在 SQL Server 2005 management Studio 中制作您自己的模板开始。首先，您需要在 Studio 中显示模板资源管理器。

[替代文字 http://www.cloudsocket.com/images/image-thumb10.png](http://www.cloudsocket.com/images/image-thumb10.png)

这将显示以下内容：

[替代文字 http://www.cloudsocket.com/images/image-thumb11.png](http://www.cloudsocket.com/images/image-thumb11.png)

[替代文字 http://www.cloudsocket.com/images/image-thumb12.png](http://www.cloudsocket.com/images/image-thumb12.png)

[替代文字 http://www.cloudsocket.com/images/image-thumb13.png](http://www.cloudsocket.com/images/image-thumb13.png)

IDE 将创建一个空白模板。要编辑模板，请右键单击模板并选择编辑。您将在 IDE 中获得一个空白查询窗口。您现在可以插入您的模板实现。我这里有新存储过程的模板，其中包含一个 TRY CATCH。我喜欢在我的存储过程中包含错误处理。随着 SQL Server 2005 中 TSQL 新增的 TRY CATCH 功能，我们应该尝试通过我们的代码（包括数据库代码）来使用这种强大的异常处理机制。保存模板，您就可以使用新模板创建存储过程了。

```
-- ======================================================
-- Create basic stored procedure template with TRY CATCH
-- ======================================================

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:        <Author,,Name>
-- Create date: <Create Date,,>
-- Description:    <Description,,>
-- =============================================
CREATE PROCEDURE <Procedure_Name, sysname, ProcedureName>
    -- Add the parameters for the stored procedure here
    <@Param1, sysname, @p1> <Datatype_For_Param1, , int> = <Default_Value_For_Param1, , 0>,
    <@Param2, sysname, @p2> <Datatype_For_Param2, , int> = <Default_Value_For_Param2, , 0>
AS
    BEGIN TRY
        BEGIN TRANSACTION    -- Start the transaction

        SELECT @p1, @p2

        -- If we reach here, success!
        COMMIT
    END TRY
    BEGIN CATCH
        -- there was an error
        IF @@TRANCOUNT > 0
        ROLLBACK

        -- Raise an error with the details of the exception
        DECLARE @ErrMsg nvarchar(4000), @ErrSeverity int
        SELECT @ErrMsg = ERROR_MESSAGE(), @ErrSeverity = ERROR_SEVERITY()

        RAISERROR(@ErrMsg, @ErrSeverity, 1)
    END CATCH
GO 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-15T17:37:44.387

您可以使用 Ctrl+Alt+T 或通过*View > Template Explorer**调*出模板资源管理器。然后您可以右键单击树节点以添加新模板或新文件夹来组织您的新模板。

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2010-11-10T20:55:21.607

Database=>Table=>Programmability=>Procedures=>右键选择新程序

# sql - SQL Server 2005 如何创建唯一约束？

> ID：64981
> 
> 赞同：181
> 
> 时间：2008-09-15T17:35:18.450
> 
> 标签：sql, sql-server, constraints

如何在 SQL Server 2005 中的现有表上创建唯一约束？

我正在寻找 TSQL 以及如何在数据库图中进行操作。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2008-09-15T17:53:53.600

SQL 命令是：

```
ALTER TABLE <tablename> ADD CONSTRAINT
            <constraintname> UNIQUE NONCLUSTERED
    (
                <columnname>
    ) 
```

[在此处](http://msdn.microsoft.com/en-us/library/ms190273.aspx)查看完整的语法。

如果您想从数据库图中执行此操作：

*   右键单击表格并选择“索引/键”
*   单击添加按钮以添加新索引
*   在右侧的属性中输入必要的信息：
    *   您想要的列（单击省略号按钮选择）
    *   设置是唯一的
    *   给它一个合适的名字

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2009-08-21T18:32:39.087

在 SQL Server Management Studio Express 中：

*   右键单击表格，选择**修改**或**设计（适用于更高版本）**
*   右键单击字段，选择**索引/键...**
*   点击**添加**
*   对于**Columns**，选择您希望唯一的**字段名称。**
*   对于**类型**，选择**唯一键**。
*   点击**关闭**，**保存**表格。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2008-09-15T17:45:34.163

```
ALTER TABLE [TableName] ADD CONSTRAINT  [constraintName] UNIQUE ([columns]) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2009-02-11T16:58:58.480

警告：您设置为唯一的列中只能有一个空行。

您可以使用 SQL 2008 中的过滤索引来执行此操作：

```
CREATE UNIQUE NONCLUSTERED INDEX idx_col1
ON dbo.MyTable(col1)
WHERE col1 IS NOT NULL; 
```

请参阅[字段值必须是唯一的，除非它](https://stackoverflow.com/questions/377798/field-value-must-be-unique-unless-it-is-null)对于一系列答案为 NULL。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2008-09-15T17:39:29.547

```
ALTER TABLE dbo.<tablename> ADD CONSTRAINT
            <namingconventionconstraint> UNIQUE NONCLUSTERED
    (
                <columnname>
    ) ON [PRIMARY] 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2008-09-15T17:43:57.367

我还发现你可以通过数据库图表来做到这一点。

通过右键单击表并选择索引/键...

单击“添加”按钮，然后将列更改为您希望唯一的列。

更改是唯一的。

单击关闭并保存图表，它会将其添加到表格中。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2008-09-15T17:42:11.020

您正在寻找类似以下的内容

```
ALTER TABLE dbo.doc_exz
ADD CONSTRAINT col_b_def
UNIQUE column_b 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-12-01T07:11:04.857

要在表已创建时在一个或多个列上创建 UNIQUE 约束，请使用以下 SQL：

```
ALTER TABLE TableName ADd UNIQUE (ColumnName1,ColumnName2, ColumnName3, ...) 
```

允许为上述查询命名唯一约束

```
ALTER TABLE TableName ADD CONSTRAINT un_constaint_name UNIQUE (ColumnName1,ColumnName2, ColumnName3, ...) 
```

*MySQL / SQL Server / Oracle / MS Access 支持的查询。*

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2008-09-15T17:42:56.853

在管理工作室图表中选择表，如果需要，右键单击添加新列，右键单击列并选择“检查约束”，在那里你可以添加一个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-21T11:43:12.097

在某些情况下，可能需要在创建唯一键之前确保它不存在。在这种情况下，下面的脚本可能会有所帮助：

```
IF Exists(SELECT * FROM sys.indexes WHERE name Like '<index_name>')
    ALTER TABLE dbo.<target_table_name> DROP CONSTRAINT <index_name> 
GO

ALTER TABLE dbo.<target_table_name> ADD CONSTRAINT <index_name> UNIQUE NONCLUSTERED (<col_1>, <col_2>, ..., <col_n>) 
GO 
```

# java - JVM 线程转储包含没有锁定线程的监视器

> ID：64989
> 
> 赞同：8
> 
> 时间：2008-09-15T17:36:44.497
> 
> 标签：java, multithreading

JVM 线程转储显示线程等待锁定在监视器上的原因可能是什么，但监视器没有相应的锁定线程？

Windows 2003 上的 Java 1.5_14

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-17T03:15:56.657

您的代码是否通过任何更改使用任何 JNI？（即，您是否正在运行从 Java 启动的任何本机代码？）。

我们已经看到了类似的行为，但是 JDK 1.6.0_05。应用程序似乎死锁，但 Jstack 显示线程正在等待没有其他线程持有的锁。我们有一些 JNI 代码，所以我们可能正在破坏某些东西。

我们还没有找到解决方案，这个问题只能在一台机器上重现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-17T03:31:35.433

那些等待的线程是永远等待，还是最终会继续？

如果是后者，则可能是垃圾收集器持有该锁。

您可以在您的 java 命令行上添加参数`-verbose:gc with -XX:+PrintGCDetails`，以便在 GC 发生时被告知。如果 gc 活动与您的减速一致，则可能表明这是问题所在。

[这是有关垃圾收集](http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html)的一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-16T18:47:22.057

是的，通常每个被锁定的监视器都必须有一个所有者线程。也许您的堆栈转储不完整（太长）或者转储不一致。我可以想象它并没有停止世界，所以一个锁定的监视器被转储但拥有锁的线程在被转储之前释放它（这只是一个猜测）。

您能否将转储上传为文本文件以便于搜索，并告诉我们您正在查看哪个监视器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-15T18:33:29.400

这只是一个疯狂的猜测，但有没有可能是线程通过尝试两次获取锁来锁定自己？如果您可以发布一些代码，可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-09-16T16:47:28.200

我今天也遇到了类似的问题，也涉及到静态资源的访问。

简短的版本是一个类在静态块中进行了 GUI 更改，并且在 AWT-EventQueue 线程之外，被 AWT TreeLock 阻塞，然后 EventQueue 引用了被阻塞的类，这迫使它等待该类的类加载器的监视器。

这里的关键观察是类加载器的锁在线程转储中没有显示为锁定。

完整的答案可以[在这个线程](https://stackoverflow.com/questions/3728125/strange-thread-dump-on-deadlock "在这个线程上")上找到。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-09-16T16:49:08.863

您是否尝试过升级到 Java 1.6？如果您仅使用 1.5，则错误可能是您的问题。

# ssl - 为什么在 IIS 5 上安装 SSL 证书时访问被拒绝？

> ID：64992
> 
> 赞同：2
> 
> 时间：2008-09-15T17:37:05.230
> 
> 标签：ssl, permissions, iis-5, windows-server-2000

我正在与一个支持人员合作，他应该能够在他维护的 Web 服务器上安装 SSL 证书。他通过域安全组拥有服务器的本地管理员权限。他还拥有运行 Windows 2003 Server 证书颁发机构的内部 CA 的权限：“请求证书”和“颁发和管理证书”。

他正在使用的服务器正在运行 Windows 2000 SP4 / IIS 5。当他尝试创建在线服务器证书时，IIS 向导以“安装失败。访问被拒绝。”结束。事件查看器无法正常工作，所以我在那里找不到任何详细信息。我怀疑权限问题是本地的，而不是 CA。

我的帐户是域管理员帐户，我知道我能够执行此操作，但是我需要为非域管理员的其他人进行此操作。

任何想法为什么他不能执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-15T18:42:31.470

几个月前，当我为客户设置证书时，我遇到了同样的问题。

管理员需要权限的 MachineKeys 文件夹 -

```
\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys 
```

授予**管理员**（或管理员组）对此目录的**完全控制权。**我认为您不必重新启动 IIS，但它永远不会受到伤害。

我不知道为什么管理员不将其控制为默认值。更改此设置后，证书创建向导将成功生成证书请求。

我认为在某处甚至有一篇关于它的 Microsoft 知识库文章。

编辑：这是知识库文章：http: [//support.microsoft.com/kb/908572](http://support.microsoft.com/kb/908572)

-乔恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T00:21:10.023

如果要续订证书，则可能在从 IIS 中删除现有（过期）证书之前导入了新的中间证书 (.pb7)。您会收到拒绝访问错误，因为旧证书和新证书都用于同一个域。

因此，当您收到此访问被拒绝错误时，您必须做三件事。

1.  从 IIS 中删除此域名的所有证书，包括您刚刚导入的新证书。
2.  返回到 Console1，然后从 Local Computer\Certificate Enrollment Requests\Certificates 中删除您的域名的证书。
3.  重来。**************