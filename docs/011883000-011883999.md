# StackOverflow 问答 11883000-11883999

# c++ - Visual Studio 2010 SP1 中的 64 位整数初始化错误

> ID：11883001
> 
> 赞同：0
> 
> 时间：2012-08-09T12:01:38.160
> 
> 标签：c++, c, visual-studio, int64, uint64

我有一个奇怪的错误/错误/自我愚蠢问题。我正在用 C 语言开发一个小型应用程序，并且正在使用 Visual Studio 2010 SP1。违规代码：

```
uint64_t sum_squared_X = 65535*65535*64;
int64_t sum_squared_Y = 65535*65535*64; 
```

调试时，我得到以下结果：

```
sum_squared_X = 18446744073701163072;
sum_squared_Y = -8388544; 
```

问题是，为什么？uint64_t 的最大值为 2^64-1 或 18446744073709551615，int64_t 的最大值为 2^63-1 或 9223372036854775807。

65535*65535*64 = 274869518400，低于两个最大值。那为什么我会得到这些结果？

我在这里完全迷失了，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:43:15.510

简短回答：使用 32 位有符号算术将 65535 乘以 65535，得到 -131,071。然后将其乘以 -64 并转换为 uint64_t（由于环绕而创建更大的正值）或 int64_t（保留 -131,071 乘以 64 的结果）。

长答案：

无后缀整数十进制常量的类型取决于它的值。它是这个列表中第一个可以表示其值的：int、long int、long long int。（添加后缀或使用八进制或十六进制常量会更改列表。）因为这些类型取决于 C 实现，所以行为取决于 C 实现。

在您的机器中，int 很可能是 32 位。所以“65535”的类型是int，“64”的类型也是。

您的表达式以“65535*65535”开头。这将 65,535 乘以 65,535。数学结果是 4,924,836,225（十六进制，0xfffe0001）。对于 32 位有符号整数，这会溢出可表示的值。这是 C 标准中未定义的行为。^(在许多实现中通常发生的是值从 2 31) -1（最高可表示值）“环绕”到 -2 ^(31)（最低可表示值）。相同行为的另一种观点是，数学结果的位 0xfffe0001 被解释为 32 位有符号整数的编码。在二进制补码中，0xffffe0001 是 -131,071。

然后你的表达式乘以 64。-131,071*64 不会溢出；结果是 -8,388,544（编码为 0xff800040）。

最后，您使用结果来初始化 uint64_t 或 int64_t 对象。此初始化导致转换为目标类型。

int64_t 转换很简单；转换的输入是 -8,388,544，这在 int64_t 中完全可以表示，所以结果是 -8,388,544，编译器很可能通过扩展符号位（产生编码 0xffffffffff800040）来实现。

uint64_t 转换很麻烦，因为 -8,388,544 无法在 uint64_t 中表示。根据 1999 年 C 标准 6.3.1.3 2，“通过在新类型中可以表示的最大值的基础上反复加减一，直到该值在新类型的范围内。” 对于 uint64_t，“比新类型可以表示的最大值大一”是 2 ^(64)。所以结果是 -8,388,544 + 2 ^(64)，即 18,446,744,073,701,163,072。这也有编码 0xffffffffff800040。

对于从较窄宽度到较宽宽度的转换，这种比最大值加一的操作相当于将旧类型的符号位复制到新类型中的所有高位（符号扩展）。对于从更宽的宽度到更窄的宽度的转换，相当于丢弃了高位。在任何一种情况下，结果都是以 2 ^n为模的余数，其中 n 是新类型的位数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:14:38.693

When I compile your example, I clearly get an integer constant overflow warning for each of those lines. This is because the right side, the constants, is usually stored in a basic integer. You have to change the storage of those values to keep an overflow condition from happening. To fix this, do the following instead:

```
uint64_t sum_squared_X = (uint64_t)65535*65535*64;
int64_t sum_squared_Y = (uint64_t)65535*65535*64; 
```

Read more [here](http://msdn.microsoft.com/en-us/library/4kze989h.aspx)

# regex - 如何使用正则表达式更改货币头寸

> ID：11883004
> 
> 赞同：0
> 
> 时间：2012-08-09T12:01:41.673
> 
> 标签：regex, preg-replace, currency-formatting

为了正确格式化来自第三方服务的数据，我想知道这个正则表达式是否足够简洁：

```
(([\d,.]+))(1?\sR\$) 
```

改变这一点：

```
from 200 R$ to 400 R$ (32 products) 
```

进入这个：

```
from R$ 200 to R$ 400 (32 products) 
```

要格式化此输出，我使用**Preg**将文本替换为`$3 $1`，如[http://www.regextester.com/中所示](http://www.regextester.com/)

这是足够好还是正则表达式不够？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:33:46.317

正则表达式：`(\d+[.,]?\d*)(\s*)(R\$)`

替代品：`$3$2$1`

* * *

*测试输入：*

```
from 200 R$ to 400 R$ (32 products)
from 0,200 R$ to 0.400 R$ (32 products)
from 2,00 R$ to 4.00 R$ (32 products) 
```

*测试输出：*

```
from R$ 200 to R$ 400 (32 products)
from R$ 0,200 to R$ 0.400 (32 products)
from R$ 2,00 to R$ 4.00 (32 products) 
```

* * *

如果您还想解析不带前导零的十进制数，例如`.200`，请使用正则表达式

```
(?=[.,]?\d)(\d*[.,]?\d*)(\s*)(R\$) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:31:04.457

1.  您绝对可以删除第一组或括号

    并替换为`$2 $1`

2.  有什么`1?`好处？如果在第一组的末尾有一个 1 将与 匹配`[\d,.]+`，那么它也是多余的

3.  不要将其`\s`纳入您的捕获组，然后您将在结果中获得一对多

所以我认为这将是你的正则表达式：

```
([\d,.]+)\s(R\$) 
```

# jquery - jQuery：我可以在 $(document).ready(function(){} 之外提供函数吗？

> ID：11883008
> 
> 赞同：0
> 
> 时间：2012-08-09T12:01:49.947
> 
> 标签：jquery

我有以下代码：

```
 $(document).ready(function() {
       $("#popupClose").click(function(){  
            disablePopup();  
       });

       $(document).keypress(function(e){  
            if(e.keyCode==27) {  
                disablePopup();   
            }  
        });
}); 
```

现在（最终）可以在文档完成之前加载弹出窗口（需要弹出窗口来引导文件中的 PHP 流）。但是，由于这些函数仅在 document.ready 中创建，因此当我的脚本调用弹出窗口时，我的弹出窗口控件尚不可用。

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:08:19.337

您可能想尝试关于函数[http://api.jquery.com/on/的 jQuery 文档](http://api.jquery.com/on/)

```
$(document).on('click', "#popupClose", function(e) {
  disablePopup();
}); 
```

或者

```
 $(document).on('keypress', "#popupClose", function(e) {
     if(e.keyCode == 27) { disablePopup(); }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:10:43.453

尝试使用`.apply`或`.call`javascript方法。[这应该可以帮助您解决问题。](https://stackoverflow.com/questions/1986896/what-is-the-difference-between-call-and-apply).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:16:03.740

Use "#popupClose" as a selector as it always assumes you're talking about an ID in the current document, not the parent. Apart from that- What context is jQuery being loaded from? The IFrame or the parent window? This can make a big difference. Check whether if you have added #popupClose after loading the DOM, you will need to rebind the elements to the DOM jQuery is using. That may be your issue.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:07:13.860

只需尝试在 之外声明您的函数`$(document).ready(function(){...})`，就在

```
<script> </script> 
```

# php - CSS 在 PHP 版本的（相同的）HTML 页面中不起作用

> ID：11883011
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:01:56.100
> 
> 标签：php, html, css

我有一个使用外部 CSS 样式的 HTML 文件。它工作正常，但是当我将 HTML 文件更改为 PHP（使用相同的代码）时，CSS 似乎不适用于我的 PHP 文件。

这些文件几乎完全相同，它们看起来像这样：

```
<html> 
    <head>
        <link href="css/style.css" media="all" rel="stylesheet" type="text/css"/>
        <script src="scripts/jquery-1.3.2.min.js" type="text/javascript"></script>
        <script src="scripts/jqueryactions.js" type="text/javascript"></script>
        <script src="scripts/mousetrail.js" type="text/javascript"></script>
    </head>
    <body>
        <!-- content here -->
    </body>
</html>​​​​​​​​​ 
```

HTML 和 CSS 的完整代码，以及`diff`HTML 版本和 PHP 版本之间的代码可以在 pastebin 上找到：

*   [完整的 HTML](http://pastebin.com/GY01NERt)
*   [完整的 CSS](http://pastebin.com/bYurTvTt)
*   [`diff`HTML 和 PHP 之间](http://pastebin.com/rbjrpqpj)

如您所见，HTML 和 PHP 代码是相同的。但他们给出不同的输出。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:19:02.083

> html 和 php 代码相同，但输出不同

这并不完全正确。当 HTML 不会（通过标准/传统设置）时，PHP 解释器将处理 PHP。

如果您的文件中有 PHP 代码，它可能会出现语法错误，从而导致无法正确加载。

话虽如此，我看到的唯一 PHP 代码是：

```
<?include('try.php');?> 
```

我猜这可能是问题所在。在故障排除中尝试以下步骤：

1.  通过在第一个“？”后添加“php”将您的代码更改为 PHP 5 合规性 `<?php include...`以及像这样之间的额外空间：

    ```
    <?php include('try.php'); ?> 
    ```

    刷新页面以查看是否有效。如果是这样，则说明您的 PHP 版本存在语法问题。

2.  注释掉 PHP 代码以查看 PHP 页面是否将作为直接 HTML 运行。

    ```
    <?php //include('try.php'); ?> 
    ```

    如果这样做可以解决问题，则`try.php`文件中可能存在导致问题的问题。

尝试这些故障排除步骤，看看是否有帮助。而且，正如 Alex FI 所指出的，`DocType`在您的 HTML 中添加一个。

我希望这会有所帮助！

# c#-4.0 - Issue with \ and \\ when calling String Split()

> ID：11883017
> 
> 赞同：1
> 
> 时间：2012-08-09T12:02:08.800
> 
> 标签：c#-4.0

I am trying to split some string on the basis of newline character '\n'

I have this delimiter stored in resx file as:

```
Name: RecordDelimiter
Value: \n 
```

When I retrieve this value from .resx file it is always returned as '\n' and split function does not return accurate results.
However when I try with string "\n", it's working fine

Here is my code -

```
private static void GetRecords()
{
    string recordDelimiter = @"\n";
    string recordDelimiter1 = "\n"; // only this returns correct result
    string recordDelimiter2 = ResourceFile.RecordDelimiter; //from resx file, returns \\n :-(
    string recordDelimiter3 = ResourceFile.RecordDelimiter.Replace("\\", @"\"); //try replacing \\n with \n

    string fileOutput = "aaa, bbb, ccc\naaa1, bbb1, ccc1\naaa2, bbb2, ccc2";

    string[] records = fileOutput.Split(new string[] { recordDelimiter }, StringSplitOptions.None);
    string[] records1 = fileOutput.Split(new string[] { recordDelimiter1 }, StringSplitOptions.None);
    string[] records2 = fileOutput.Split(new string[] { recordDelimiter2 }, StringSplitOptions.None);
    string[] records3 = fileOutput.Split(new string[] { recordDelimiter3 }, StringSplitOptions.None);

    int recordCount = records.Count();  //returns 1
    int recordCount1 = records1.Count();  //returns 3 -- only this returns correct result
    int recordCount2 = records2.Count();  //returns 1
    int recordCount3 = records3.Count();  //returns 1
} 
```

I want to keep the delimiter in resx file.
Can anyone please guide if I am missing something?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:18:11.610

The reason your second method is the only one returning the correct result is that it is the only one where the delimiter is the new line character. "\n" is just a representation of the newline character in C#, and @"\n" is the literal string of a slash followed by the letter n. In other words @"\n" != "\n".

So if you wanted to store the delimiter character in resx, you would need to show us the code of how you are storing it there. Currently it seems to just be stord as a literal string, and not the actual control characters.

One (very rough) fix would be to take the string from the Resources and call .Replace(@"\n", "\n") depending on what exactly is stored in the file. I will update my answer if/when I find a better solution, or once you have updated your question.

EDIT:

Ok, found a somewhat gimmicky solution. The core problem is how do you write just \n, correct? Well, I made a test project, with a textbox and the following code:

```
this.textBox1.Text = "1\n2"; 
```

Fire up this project, select all of the text in the textbox, and copy to clipboard. Then go to your real project's resources, and paste the value from your clipboard. Then carefully delete the numbers from around the control character. And there you go, \n control character in a resource string. (The reason for the numbers was that it wasn't possible to select only the control character from the textbox.)

# facebook - Facebook“点赞”将用户重定向到应用 apge 而不是 Facebook

> ID：11883039
> 
> 赞同：0
> 
> 时间：2012-08-09T12:03:18.517
> 
> 标签：facebook, namespaces, facebook-like

我有一个带有 Facebook 按钮的 Wordpress 博客。当有人“喜欢”我的 WP 博客上的帖子时，它会在他的墙上写下类似： **[username] 喜欢 [app name] 上的文章，** 然后有指向该帖子的链接。问题是，如果您单击 [应用名称]，它会重定向到 Facebook 内的应用页面，这很糟糕，因为没有真正的应用。它只是Facebook丑陋丑陋的iframe里面的博客。

如何使 [app name] 将点击定向到网站而不是 Facebook 应用页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:15:59.820

Are you using this: [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/) or a plugin? I've been using the like-btn generated at that page with Facebook before without experiencing the problems you've described.

# java - 包含 2000+1 个枚举常量的枚举类是否达到任何限制？

> ID：11883043
> 
> 赞同：14
> 
> 时间：2012-08-09T12:03:31.587
> 
> 标签：java, enums

以下代码因`NullPointerException`in main失败`(map==null)`。仅当我定义 2001 或更多枚举常量时才会出现此问题，2000 工作正常。

为什么不执行静态代码块？

我们是否达到了编译器（无警告、无错误）或 JVM 的任何静默限制？

编译出来的class文件超过172KB，

```
import java.util.HashMap;

public enum EnumTest {
    E(1),E(2),...,E(2001);

    private static HashMap<Integer, EnumTest>   map = new HashMap<Integer, EnumTest>();

    static {

        for ( EnumTest f : EnumTest.values() ) {
            map.put( (int) f.id, f );
        }
    }
    short id;

    private EnumTest(int id) {
        this.id = (short) id;
    };

    public short getId() {
        return id;
    }

    public static final EnumTest fromInt(int id) {
        EnumTest e = map.get( id );
        if ( e != null ) {
            return e;
        }
        throw new IllegalArgumentException( "" + id );
    }

    public static void main(String[] args) {
        System.out.println( "size:" + map.size() );
    }
} 
```

> 运行环境：
> 
> ```
> java version "1.7.0_01"
> Java(TM) SE Runtime Environment (build 1.7.0_01-b08)
> Java HotSpot(TM) 64-Bit Server VM (build 21.1-b02, mixed mode) 
> ```

也发生在：

> ```
> java version "1.6.0_32" Java(TM) SE Runtime Environment (build
> 1.6.0_32-b05) Java HotSpot(TM) Client VM (build 20.7-b02, mixed mode, sharing) 
> ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T12:33:25.860

这些类型的问题来自于一些（通常是编译器生成的）初始化代码超过 65536 字节的字节代码。单个方法不能包含多于要执行的字节码字节数（由于[类文件格式的限制](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.9.1)）。

此类问题的常见来源是像这样的大型数组：

```
byte someBytes = { 1, 2, 3, ..., someBigValue }; 
```

这里的问题是这些字段实际上是在生成的初始化程序（构造函数或静态初始化程序）中使用*someBigValue赋值语句初始化的。*

枚举值实际上以类似的方式初始化。

给定以下枚举类：

```
public enum Foo {
  CONSTANT(1);

  private Foo(int i) {
  }
} 
```

我们查看输出`javap -v`并看到以下代码块：

```
 static {};
    flags: ACC_STATIC
    Code:
      stack=5, locals=0, args_size=0
         0: new           #4                  // class Foo
         3: dup
         4: ldc           #7                  // String CONSTANT
         6: iconst_0
         7: iconst_1
         8: invokespecial #8                  // Method "<init>":(Ljava/lang/String;II)V
        11: putstatic     #9                  // Field CONSTANT:LFoo;
        14: iconst_1
        15: anewarray     #4                  // class Foo
        18: dup
        19: iconst_0
        20: getstatic     #9                  // Field CONSTANT:LFoo;
        23: aastore
        24: putstatic     #1                  // Field $VALUES:[LFoo;
        27: return 
```

如您所见，有很多字节码操作可以处理`CONSTANT`使用正确值的实例化。如果你有*很多*这样的枚举值，那么静态初始化块的大小很容易超过 64k 字节的代码，从而使类无法编译。

一种可能的解决方法是通过减少参数的数量来减小初始化代码的大小（例如，通过基于枚举值的索引而不是使用参数来计算传入的数字）。这可能会给你足够的回旋空间来进一步扩展它。

或者，您可以尝试通过实现一个通用接口将您的枚举拆分为多个连接的枚举。枚举可以按区域/意图/类别/...进行分组：

```
public interface MessageType {
  int getId();
}

public enum ConnectionMessage implements MessageType {
  INIT_CONNECTION(1),
  LOGIN(2),
  LOGOUT(3),
  CLOSE_CONNECTION(4);

  // getId code, constructor, ...
}

public enum FrobnicationMessage implements MessageType {
  FROBNICATE_FOO(5),
  FROBNICATE_BAR(6),
  DEFROB_FOO(7),
  DEFROB_BAR(8),
  ...

  // getId code, constructor, ...
} 
```

我假设枚举值实际上在您的代码中的某处被引用，而不仅仅是纯值持有者，如果它们只保存值并且各个值在您的代码中没有被区别对待，那么将它们替换为每个数据项实例化一次的单个类存储在中央资源中可能是最好的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T12:35:27.073

我怀疑您在编译时应该看到的是错误

```
error: code too large 
```

也许您的编译器版本有错误并且没有显示。

当我创建 2500 个枚举值时，它会因此错误而失败，但如果有 2400 个枚举值，它会正确运行。

任何方法的字节码都有 64 KB 的限制，并且枚举在静态初始化块的一种方法中初始化。

问题是许多字节码指令使用字节偏移作为 16 位值，这对整个方法施加了这种限制（即使方法末尾没有这样的指令）

不够聪明，`javac`无法将静态初始化程序块分解为多个子方法，但是再次有成千上万的`enums`建议您可以以另一种方式执行所需的操作。

# android - AIR 3.3 和 android 4.x 的窃听？

> ID：11883046
> 
> 赞同：0
> 
> 时间：2012-08-09T12:03:52.460
> 
> 标签：android, air

我的手机是最近得到的 Nexus S，`Android 4.1`现在`Air 3.3`突然开发时`CameraUI`无法正常工作，只会出现以下错误：

```
[ErrorEvent type="error" bubbles=false cancelable=false eventPhase=2 text="ioError" errorID=2038] 
```

任何人都可以确认，所以不仅仅是我有这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:55:28.980

他们显然在 Air 3.5[中对此进行了修复。](http://labs.adobe.com/technologies/flashplatformruntimes/air3-5/)

这就是说...我在带有 Jelly Beans 的 Galaxy S2 上遇到了同样的问题 - 但上面的更新并没有解决它:( 我非常接近放弃空气，因为无法使用 cameraUI 是一条真正的道路阻止我的应用程序。

有没有人在运行 4.1 的 Android 手机上使用 cameraUI？

# session - 标头中的 Magento 缓存：会话过期时的欢迎和购物车

> ID：11883049
> 
> 赞同：0
> 
> 时间：2012-08-09T12:04:04.677
> 
> 标签：session, magento, caching, cookies, cart

我的 Magento 似乎在我的标题中显示了错误的信息。当会话到期时，它仍会显示特定用户的信息。当我一天后返回网站时，我确实仍然看到“welcome rolandow！”，但是当我点击它访问“我的帐户”时，它会询问我的登录详细信息。

如果用户仍然登录，我通过使用 IsLoggedIn() 签入 Header 块来解决欢迎消息。但现在它在我注销时也显示我的购物车。

它显示了我上次登录的用户帐户的实际购物车。如果我打开另一个浏览器，更改我的购物车，然后刷新会话过期的浏览器，购物车被更新，因此必须拉出数据的数据库。当我单击我的帐户或想要完成结帐时，它会要求登录。

所以这一定是cookie/缓存问题。

我在服务器上使用 APC 缓存。我没有安装缓存插件。版本是 1.6.2.0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:30:12.440

好的，抱歉，这可能只是“持久购物车”的设置，可以在系统 -> 配置 ->（客户）持久购物车下找到。

# c++ - 提升文件系统3中的规范化功能

> ID：11883050
> 
> 赞同：1
> 
> 时间：2012-08-09T12:04:08.020
> 
> 标签：c++, boost, path

我在 boost/filesystem3/path.hpp 中看到以下部分

```
//  older functions no longer supported
// ...
//basic_path& canonize(); 
```

我可以使用什么等价物在传入的 boost::filesystem::path 上实现相同的目标？我有提升版本 1.47。我`canonical(...)`在在线文档中看到了该功能，但我在标题中找不到它。假设我无法升级。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:09:59.273

我相信这个`normalize()`功能做同样的事情。

# ruby - Rails 3 模型记录器

> ID：11883052
> 
> 赞同：1
> 
> 时间：2012-08-09T12:04:10.847
> 
> 标签：ruby, ruby-on-rails-3, logging

我有一个模型，但我不希望它写入其查询的公共日志。是否可以为某些型号切换记录器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:35:03.793

你可以这样做：

如果您想以不同的格式对其进行格式化，请创建一个自定义 Logger。如果格式需要相同，您可以忽略此操作。

```
class ModelLogger < Logger
  def format_message(severity, timestamp, progname, msg)
    "#{timestamp.to_formatted_s:)db)} #{severity} #{msg}\n"
  end
end 
```

在 config/initializers/ 中，创建 logs.rb 并添加：

```
model_logfile = File.open("#{RAILS_ROOT}/log/model.log", 'a')
model_logfile.sync = true
MODEL_LOG = ModelLogger.new(model_logfile) 
```

现在，重新启动服务器后，

```
MODEL_LOG.debug "This will be logged to model.log"
MODEL_LOG.error "Errors also can be logged." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:34:40.303

这应该回答你的问题。用满足您需要的任何内容替换 STDOUT
[如何更改 rails 记录器以使用来自 rake 任务的标准输出（rails2）](https://stackoverflow.com/questions/4800032/how-to-change-the-rails-logger-to-use-standard-out-from-rake-tasks-rails2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T12:50:46.410

我正在使用 push-core gem，它每 2 秒将许多烦人的消息写入日志，如下所示：

```
Push::Message Load (0.6ms)  SELECT "push_messages".* FROM "push_messages" ... 
```

我已将以下代码添加到初始化程序中，以便从日志中删除“Push::Message Load”事件：

```
# Disable annoying (every 2 sec) "Push::Message Load" events
ActiveRecord::LogSubscriber.class_eval do
  alias_method :old_sql, :sql

  def sql(event)
    return if event.payload[:name] =~ /Push::Message Load/
    old_sql(event)
  end
end 
```

# ms-access - MS Access：需要对象错误

> ID：11883053
> 
> 赞同：0
> 
> 时间：2012-08-09T12:04:12.240
> 
> 标签：ms-access, runtime-error, ms-access-2010

此代码仅用于计算总数，然后计算该总数的百分比，然后在文本框中显示百分比金额。此代码在单击表单上的按钮时运行，但它使用基于该表单上的子表单中的数据，并且它应该显示到的文本框位于表单上。表单和子表单都在类列表中调用，所以我很困惑为什么会出现“需要对象”错误。

```
Private Sub cmdTest_Click()
'Initialisation
Dim TotalAmount As Integer 
Dim GiftAid As Integer
'Processing
   If AllForms!frmGiftAid!subfrmqryGiftAid!PaymentIncrement Is Not Null Then
       If AllForms!frmGiftAid!subfrmqryGiftAid!PaymentIncrement = "Monthly" Then
          TotalAmount = _
            (AllForms!frmGiftAid!subfrmqryGiftAid!PaymentAmountPerIncrement * 12)
       Else
          TotalAmount = _
            AllForms!frmGiftAid!subfrmqryGiftAid!PaymentAmountPerIncrement
       End If
   End If

   'Termination
   GiftAid = (TotalAmount * 0.25)
   AllForms!frmGiftAid!subfrmqryGiftAid!subfrmqryGiftAidtxtGiftAid = GiftAid
End Sub 
```

发生错误的行是第一个引用子表单的行，所以它是：

如果 AllForms!frmGiftAid!subfrmqryGiftAid!PaymentIncrement 不为空，则

我尝试使用代码的不同变体来引用子表单（仅引用子表单，使用“Forms”而不是“AllForms”）以及在子表单本身而不是表单中尝试它并在不同的事件中这样做，例如 On_Current() 或 On_Load()，但到目前为止对我没有任何帮助。

您能为我提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:09:50.007

引用表单代码模块中以 Me 开头的子表单，或者引用表单，后跟表单名称。然后，您可以使用子窗体控件的名称 Form 来引用所包含的对象，最后是所包含窗体的属性。

```
 Forms!frmGiftAid!subfrmqryGiftAid.Form!PaymentIncrement 
```

或者

```
 Me.subfrmqryGiftAid.Form.PaymentIncrement 
```

请注意，重要的是使用子窗体控件的名称，而不是包含的窗体的名称。

此代码将在父表单上运行，并且需要在子表单上选择一条记录。

```
If Not IsNull(Me.subfrmqryGiftAid.Form.PaymentIncrement) Then
   If Me.subfrmqryGiftAid.Form.PaymentIncrement = "Monthly" Then
      TotalAmount = _
        Me.subfrmqryGiftAid.Form.PaymentAmountPerIncrement * 12)
   Else
      TotalAmount = _
        Me.subfrmqryGiftAid.Form.PaymentAmountPerIncrement
   End If
End If 
```

# teradata - 在 Teradata 中修改表

> ID：11883054
> 
> 赞同：1
> 
> 时间：2012-08-09T12:04:22.567
> 
> 标签：teradata

嗨 Teradata 同事！

我必须在生产中做一些修改：1）修改现有的列 2）添加一些新的列 3）删除并重新创建主索引

任何人都可以在 1) 案例中帮助我 - 通过添加压缩部分来修改列段：

段 CHAR(10) 字符集 LATIN NOT CASESPECIFIC COMPRESS ('AM ','CAM ','KAM ','KO ','PSHC ','RES ','SBS ')

如何添加此列：pot_klasse CHAR(1) CHARACTER SET LATIN NOT CASESPECIFIC COMPRESS ('B','U')

如何制作新的索引？（我必须先放下它，然后再做一个新的吗？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:58:01.603

***注意：**所有这些信息都可以在可从**[此处](http://www.info.teradata.com/Datawarehouse/eBrowseBy.cfm?page=TeradataDatabase)**下载的 Teradata 手册中找到。从那里您可以在屏幕的右上角选择您感兴趣的版本。*

**将值列表压缩添加到现有列**

根据您可以容忍表被排他锁定的表大小和持续时间，您可以使用添加值列表压缩`ALTER TABLE`。如果压缩值列表的表头中有足够的存在位，则操作可以相当快，否则它将相当密集：

```
ALTER TABLE MyDB.MyTable ADD SEGMENT CHAR(10) 
      COMPRESS ('AM', 'CAM', 'KAM', 'KO', 'PSHC', 'RES', 'SBS'); 
```

否则，您可以创建一个新表并在其上定义值列表压缩，将原始生产表中的统计信息复制到新表中，将数据插入新表中，然后重命名表以将新表作为生产表引入桌子。

**将列添加到现有表**

如果表头中有未使用的存在位，则使用 ALTER TABLE 添加此列可能是一个相当快速的操作。如果没有足够的存在位来捕获压缩值列表，`ALTER TABLE`则不推荐使用以下方法：

```
ALTER TABLE MyDB.MyTable ADD pot_klasse CHAR(1) 
      CHARACTER SET LATIN NOT CASESPECIFIC COMPRESS ('B','U'); 
```

**更改主索引**

这取决于。

在某些情况下，您可以修改表的 PI，而无需使用`ALTER TABLE`. （例如，非唯一到唯一） 但是，您通常会发现自己必须创建一个新表并将原始表中的数据插入到新表中。（例如添加一列，更改主索引中列的数据类型等）

# php - 如何使用htaccess？

> ID：11883055
> 
> 赞同：0
> 
> 时间：2012-08-09T12:04:24.697
> 
> 标签：php, apache, .htaccess, mod-rewrite

```
<IfModule mod_rewrite.c>
  RewriteEngine On

</IfModule> 
```

这是在我的服务器（**mypage.com**）的 .htaccess 文件中。

我该怎么做：

1.  如果我打开**here.mypage.com**，那么这会将我重定向到**mypage.com/here.html**
2.  如果我打开**mypage.com/now**那么这会将我重定向到**mypage.com/now/test.html**

我的页面是 PHP 的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:09:34.577

> 1.如果我打开 here.mypage.com 那么这会将我重定向到 mypage.com/here.html

只要**here.mypage.com**与 htaccess 文件所在的文档根目录相同，请添加：

```
RewriteCond %{HTTP_HOST} ^here\.mypage\.com$ [NC]
RewriteRule ^$ http://mypage.com/here.html [R=301,L] 
```

> 2.如果我打开 mypage.com/now 那么这会将我重定向到 mypage.com/now/test.html

添加：

```
RewriteCond %{HTTP_HOST} ^mypage\.com$ [NC]
RewriteRule ^now$ /now/test.html [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:09:54.017

要将 here.mypage.com 重定向到 mypage.com/here.html，这不仅需要向 .htaccess 添加规则（请参阅 =>[设置子域](http://content.websitegear.com/article/subdomain_setup.htm)）。

对于另一个，您可以添加：

```
RewriteRule ^now$ now/test.html 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:08:24.407

```
RewriteEngine on
RewriteRule ^now$ now/test.html 
```

那是第二个。第一个，您必须使用您的网站 cPanel（或类似网站）创建一个新的子域，并将子域指向主 public_html 文件夹，但我们可能需要有关您的服务器的更多信息以提供确切的帮助。

编辑：

```
RewriteCond %{HTTP_HOST} ^here.mypage.com [NC] 
RewriteRule ^/here.html [L] 
```

那应该做子域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:07:40.680

试试这个：

```
Redirect 301 here.mypage.com mypage.com/here.html
Redirect 301 mypage.com/now mypage.com/now/test.html 
```

# google-drive-api - 如何使用来自 javascript 的导出链接通过 Drive SDK 下载 Gdoc？

> ID：11883057
> 
> 赞同：4
> 
> 时间：2012-08-09T12:04:35.573
> 
> 标签：google-drive-api

我正在尝试使用 Javascript 使用 Drive SDK 从 Google 文档文件中下载内容。

我检索元数据，并解析 exportLinks 以获取 URL [https://docs.google.com/feeds/download/documents/export/Export?id=xxx&exportFormat=html](https://docs.google.com/feeds/download/documents/export/Export?id=xxx&exportFormat=html)

我的代码类似于[使用 JavaScript 的 Google Drive：处理文件内容](https://stackoverflow.com/questions/11578506/google-drive-using-javascript-handling-file-content)，但我使用的是 exportLinks:text/html 而不是 downloadUrl。

如果我尝试检索该 URL，我会得到“405 OPTIONS method not allowed”。

（顺便说一句，如果我使用 downloadUrl 下载非文档文件，一切正常）。

所以我猜测要么：-a）我不应该使用 Drive 来检索 Docs 文件 b）我应该使用 exportLinks 是其他方式，或者 c）我需要实现相同的 iframe 解决方法在此处上传[https://www.googleapis.com/upload/drive/v2/files 真的支持 CORS 吗？](https://stackoverflow.com/questions/11617229/solved-does-https-www-googleapis-com-upload-drive-v2-files-really-support-co)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T22:12:02.373

导出链接目前不支持 CORS。这是我们正在做的事情，对此我们深表歉意。

如果你现在可以使用 iframe hack，直到我们让它工作，那么请这样做。

# python - Python中的第n个工作日计算 - 这段代码有什么问题？

> ID：11883058
> 
> 赞同：9
> 
> 时间：2012-08-09T12:04:36.577
> 
> 标签：python, datetime

我正在尝试计算给定日期的第 n 个工作日。例如，我应该能够计算给定日期该月的第三个星期三。

我已经编写了两个版本的函数，应该这样做：

```
from datetime import datetime, timedelta

### version 1
def nth_weekday(the_date, nth_week, week_day):
    temp = the_date.replace(day=1)
    adj = (nth_week-1)*7 + temp.weekday()-week_day
    return temp + timedelta(days=adj)

### version 2
def nth_weekday(the_date, nth_week, week_day):
    temp = the_date.replace(day=1)
    adj = temp.weekday()-week_day
    temp += timedelta(days=adj)
    temp += timedelta(weeks=nth_week)
    return temp 
```

**控制台输出**

```
# Calculate the 3rd Friday for the date 2011-08-09
x=nth_weekday(datetime(year=2011,month=8,day=9),3,4)
print 'output:',x.strftime('%d%b%y') 

# output: 11Aug11 (Expected: '19Aug11') 
```

这两个函数的逻辑显然是错误的，但我似乎无法找到错误 - 任何人都可以发现代码有什么问题 - 我如何修复它以返回正确的值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T12:30:01.840

你的问题在这里：

```
adj = temp.weekday()-week_day 
```

首先，您以错误的方式减去事物：您需要从所需的日期中减去实际的日期，而不是相反。

其次，您需要确保减法的结果不是负数 - 它应该使用 . 放在 0-6 范围内`% 7`。

结果：

```
adj = (week_day - temp.weekday()) % 7 
```

此外，在您的第二个版本中，您需要`nth_week-1`像在第一个版本中一样添加几周。

完整示例：

```
def nth_weekday(the_date, nth_week, week_day):
    temp = the_date.replace(day=1)
    adj = (week_day - temp.weekday()) % 7
    temp += timedelta(days=adj)
    temp += timedelta(weeks=nth_week-1)
    return temp

>>> nth_weekday(datetime(2011,8,9), 3, 4)
datetime.datetime(2011, 8, 19, 0, 0) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-21T04:00:16.680

**单线**

您可以使用标准库中的日历找到第 n 个工作日。

```
import calendar
calendar.Calendar(x).monthdatescalendar(year, month)[n][0] 
```

*在哪里：*

*   x : 代表你的工作日的整数（0 是星期一）

*   n ：您问题的“第 n”部分

*   年，月：整数年和月

这将返回一个 datetime.date 对象。

**坏了**

可以这样分解：

```
calendar.Calendar(x) 
```

创建一个日历对象，其工作日从您所需的工作日开始。

```
.monthdatescalendar(year, month) 
```

返回该月的所有日历日。

```
[n][0] 
```

返回第 n 周（该周的第一天，从第 x 天开始）的 0 索引值。

**为什么它有效**

在您要求的工作日开始一周的原因是，默认情况下，0（星期一）将用作一周的第一天，如果该月从星期三开始，日历将考虑从第一次出现的第一周开始星期一（即第 2 周），你会落后一周。

**例子**

如果您需要 2013 年 9 月的第三个星期六（该月的美国股票期权到期日），您将使用以下命令：

```
calendar.Calendar(5).monthdatescalendar(2013,9)[3][0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-06T22:33:09.003

**得票最多的单线**的问题是它不起作用。

但是，它可以用作细化的基础：

你看到这是你得到的：

```
c = calendar.Calendar(calendar.SUNDAY).monthdatescalendar(2018, 7)
for c2 in c:
    print(c2[0]) 
```

* * *

```
2018-07-01
2018-07-08
2018-07-15
2018-07-22
2018-07-29 
```

* * *

```
c = calendar.Calendar(calendar.SUNDAY).monthdatescalendar(2018, 8)
for c2 in c:
    print(c2[0]) 
```

* * *

```
2018-07-29
2018-08-05
2018-08-12
2018-08-19
2018-08-26 
```

如果您考虑一下，它会尝试将日历组织成嵌套列表，以便一次打印一周的日期。因此，其他月份的落后者开始发挥作用。通过使用该月有效日期的新列表 - 这可以解决问题。

* * *

**用附加列表回答**

```
import calendar
import datetime
def get_nth_DOW_for_YY_MM(dow, yy, mm, nth) -> datetime.date:
    #dow - Python Cal - 6 Sun 0 Mon ...  5 Sat
    #nth is 1 based... -1\. is ok for last.
    i = -1 if nth == -1 or nth == 5 else nth -1
    valid_days = []
    for d in calendar.Calendar(dow).monthdatescalendar(yy, mm):
        if d[0].month == mm:
            valid_days.append(d[0])
    return valid_days[i] 
```

所以这里是如何调用它的：

```
firstSundayInJuly2018 = get_nth_DOW_for_YY_MM(calendar.SUNDAY, 2018, 7, 1)
firstSundayInAugust2018 = get_nth_DOW_for_YY_MM(calendar.SUNDAY, 2018, 8, 1)
print(firstSundayInJuly2018)
print(firstSundayInAugust2018) 
```

这是输出：

```
2018-07-01 
2018-08-05 
```

`get_nth_DOW_for_YY_MM()`可以使用 lambda 表达式重构，如下所示：

**用 lambda 表达式重构回答**

```
import calendar
import datetime
def get_nth_DOW_for_YY_MM(dow, yy, mm, nth) -> datetime.date:
    #dow - Python Cal - 6 Sun 0 Mon ...  5 Sat
    #nth is 1 based... -1\. is ok for last.
    i = -1 if nth == -1 or nth == 5 else nth -1
    return list(filter(lambda x: x.month == mm, \
          list(map(lambda x: x[0], \ 
            calendar.Calendar(dow).monthdatescalendar(yy, mm) \
          )) \
        ))[i] 
```

* * *

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-03T09:07:15.840

如果目标日期在本月的第一天，单行答案似乎不起作用。例如，如果您想要每个月的第二个星期五，那么单线方法

```
calendar.Calendar(4).monthdatescalendar(year, month)[2][0] 
```

2013 年 3 月将返回 2013 年 3 月 15 日，它应该是 2013 年 3 月 8 日。也许添加一个像这样的支票

```
if date(year, month, 1).weekday() == x:
    delivery_date.append(calendar.Calendar(x).monthdatescalendar(year, month)[n-1][0])
else:
    delivery_date.append(calendar.Calendar(x).monthdatescalendar(year, month)[n][0]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T12:30:08.767

稍加调整即可使单线正常工作：

```
import calendar
calendar.Calendar((weekday+1)%7).monthdatescalendar(year, month)[n_th][-1] 
```

这里`n_th` 应该解释为 c 风格，例如 0 是第一个索引。

示例：要查找 2018 年 7 月的第一个星期日，可以键入：

```
>>> calendar.Calendar(0).monthdatescalendar(2018, 7)[0][-1]
datetime.date(2018, 7, 1) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T03:04:19.587

这里的人似乎喜欢单线，我将在下面提出。

```
import calendar
[cal[0] for cal in calendar.Calendar(x).monthdatescalendar(year, month) if cal[0].month == month][n] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-15T09:37:18.720

或者，这将适用于 Python 2，返回该月中工作日的出现，即如果输入 2018 年 6 月 16 日，则返回 2018 年 6 月 16 日当天的出现

您可以将月/年/日期整数替换为您可能想要的任何内容 - 现在它正在通过以下方式从系统获取输入/日期`datetime`

省略打印语句或`pass`在不需要它们的地方使用

```
import calendar
import datetime
import pprint

month_number = int(datetime.datetime.now().strftime('%m'))
year_number = int(datetime.datetime.now().strftime('%Y'))
date_number = int(datetime.datetime.now().strftime('%d'))
day_ofweek = str(datetime.datetime.now().strftime('%A'))

def weekday_occurance():
print "\nFinding current date here\n"
for week in xrange(5):
    try:
        calendar.monthcalendar(year_number, month_number)[week].index(date_number)
        occurance = week + 1
        print "Date %s of month %s and year %s is %s #%s in this month." % (date_number,month_number,year_number,day_ofweek,occurance)
        return occurance
        break
    except ValueError as e:
        print "The date specified is %s which is week %s" % (e,week)

myocc = weekday_occurance()
print myocc 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-03T18:16:14.047

[作为Python dateutil 包](https://pypi.org/project/python-dateutil/)( )的扩展的[relativedelta](https://dateutil.readthedocs.io/en/stable/relativedelta.html)模块完全符合您的要求：`pip install python-dateutil`

```
from dateutil import relativedelta
import datetime

def nth_weekday(the_date, nth_week, week_day):
    return the_date.replace(day=1) + relativedelta.relativedelta(
        weekday=week_day(nth_week)
    )

print(nth_weekday(datetime.date.today(), 3, relativedelta.FR)) 
```

这里的关键部分评估为`weekday=relativedelta.FR(3)`：本月的第三个星期五。以下是参数[文档](https://dateutil.readthedocs.io/en/stable/relativedelta.html)的相关部分，`weekday`

> 工作日：
> 
> relativedelta 模块中可用的工作日实例之一（MO、TU 等）。这些实例可能会收到一个参数 N，指定第 N 个工作日，它可以是正数或负数（如 MO(+1) 或 MO(-2)）。

# iphone - iPhone SDK：UIScrollView 中的 UIButtons - 调整滚动视图大小以适合所有非隐藏按钮

> ID：11883060
> 
> 赞同：0
> 
> 时间：2012-08-09T12:04:38.450
> 
> 标签：iphone, ios, uiview, uiscrollview, uibutton

我在 UIScrollView 中有 7 个 UIButton。根据代码中的 if 语句，前 3 个 UIButton 可以隐藏或可见。这意味着 3 个 UIButtons 显示有 8 种可能性。我遇到的问题是让 UIScrollView 调整其内容大小，以便其中没有“空”的空间。例如，如果中间的 UIButton 是隐藏的，但它上面和下面的按钮是可见的，则剩下一个空白区域。有什么办法可以让所有按钮在滚动视图中一个在另一个之下而没有任何间隙？

我已经尝试过这段代码，但它没有用：

```
if([[facilities objectAtIndex:0]intValue] == 1) {

        facilitiesButton.hidden = NO;

    }

    if([[ListingsEnabled objectAtIndex:0]intValue]==1) {

        ListingsBtn.hidden = NO;
    } 

    if([[OffersEnabled objectAtIndex:0]intValue]==1) {

        OffersBtn.hidden = NO;
    }

    CGFloat scrollViewHeight = 0.0f;
    self.DetailScrollView.showsHorizontalScrollIndicator = NO;       
    self.DetailScrollView.showsVerticalScrollIndicator = NO;
    for (UIView* view in self.DetailScrollView.subviews)
    {
        if (!view.hidden)
        {
            CGFloat y = view.frame.origin.y;
            CGFloat h = view.frame.size.height;
            if (y + h > scrollViewHeight)
            {
                scrollViewHeight = h + y;
            }
        }
    }
    self.DetailScrollView.showsHorizontalScrollIndicator = YES;
    self.DetailScrollView.showsVerticalScrollIndicator = YES;

    [self.DetailScrollView setContentSize:(CGSizeMake(self.DetailScrollView.frame.size.width, scrollViewHeight))]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:52:49.520

正如@Andy 评论的那样，您需要定位实际按钮，而不仅仅是更改滚动视图大小。表格视图可能确实是要走的路，但对于 7 个按钮来说，这可能是矫枉过正。这是一个片段，它将遍历按钮并根据可见性更新它们的位置。我省略了滚动视图，因为它似乎没有必要，但如果您需要在滚动视图中更新它们，我可以编辑代码，请告诉我。

```
/////////////////////
///// USES ARC //////
/////////////////////

- (void)viewDidLoad
{
    [super viewDidLoad];

    allButtons = [NSMutableArray array];

    // Create 7 buttons and randomly hide some
    for (int i = 0; i < 7; i++)
    {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect]; 
        button.frame = CGRectMake(0, 0, 100, 50);
        [button setTitle:[NSString stringWithFormat:@"Button %i", i+1] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(randomizeButtons:) forControlEvents:UIControlEventTouchUpInside];
        [self.view addSubview:button];

        button.hidden = arc4random_uniform(2)-1 > 0;

        [allButtons addObject:button];
    }

    [self updateButtonLayout];
}

-(void)updateButtonLayout
{
    // position buttons based on visiblity

    CGRect lastButtonFrame = CGRectMake(0, 0, 0, 0);
    int verticalPadding = 10;

    for(UIButton *btn in allButtons)
    {
        if(!btn.hidden)
        {
            btn.frame = CGRectMake(lastButtonFrame.origin.x, lastButtonFrame.origin.y+lastButtonFrame.size.height+verticalPadding, btn.frame.size.width, btn.frame.size.height);

            lastButtonFrame = btn.frame;
        }
    }
}

-(void)randomizeButtons:(UIButton *)btn
{
    // Randomize the visiblity of the buttons and update the interface

    for(UIButton *btn in allButtons)
    {
        btn.hidden = arc4random_uniform(2)-1 > 0;
    }

    [self updateButtonLayout];
} 
```

# android - 使用 Sqlite3 在整个数据库中搜索特定字符串？

> ID：11883065
> 
> 赞同：0
> 
> 时间：2012-08-09T12:04:57.603
> 
> 标签：android, database, sqlite

我想在整个数据库表中搜索特定字符串并获取匹配列的行详细信息。例如，我有如下表

```
 **name  email   address  designation**
    sai   xy@mail  75385      nagar
    thiru  y@mail  75893      city 
```

现在我有像“nagar”或“thiru”这样的搜索键，如何为它准备查询。如果有人知道请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:25:09.530

将整个表格读入游标并在每一列中搜索以获取列名。

可能是这样的：

```
private String getColumnName(String key){
     String columnName="";
     DataBaseAdapter dba=new DatabaseAdapter(getApplicationContext());
     dba.open();
     Cursor cr=dba.fetchAllData();
     cr.moveToFirst();
     while(!cr.isAfterLast()){
            if(key.equals(cr.getString(cr.getColumnIndex("name")))){
                   columnName="name";
            }
            cr.moveToNext();
     }
     cr.moveToFirst();
     while(!cr.isAfterLast()){
            if(key.equals(cr.getString(cr.getColumnIndex("email")))){
                   columnName="email";
            }
            cr.moveToNext();
     }
     cr.moveToFirst();
     while(!cr.isAfterLast()){
            if(key.equals(cr.getString(cr.getColumnIndex("address")))){
                   columnName="address";
            }
            cr.moveToNext();
     }
     cr.moveToFirst();
     while(!cr.isAfterLast()){
            if(key.equals(cr.getString(cr.getColumnIndex("designation")))){
                   columnName="designation";
            }
            cr.moveToNext();
      }
       return columnName;
    } 
```

DataBaseAdapter 类中的 fetchAllData() 函数包含以下代码：

```
public Cursor fetchAllData(){

  try {
   return database.query(TABLENAME, null, null, null, null,
     null, null);
  } catch (Exception e) {
   return null;
  }
} 
```

这将给出您的密钥的列名。

所以现在很容易运行这样的查询：

```
 String query=  "SELECT * FROM tablename where "+getColumnName()+"='"+key+"'" ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:17:51.367

试试这个查询..

```
SELECT * FROM tablename WHERE name = 'nagar' or email = 'nagar' or address = 'nagar' or designation = 'nagar'; 
```

或者

```
SELECT * FROM tablename WHERE name or email or address or designation = 'nagar'; 
```

# lucene - Luke 揭示了索引中数字字段的未知术语值

> ID：11883066
> 
> 赞同：4
> 
> 时间：2012-08-09T12:05:11.040
> 
> 标签：lucene, lucene.net, luke

我们使用 Lucene.net 进行索引。我们索引的字段之一是一个数值字段，其值为 1 到 6，9999 表示未设置。

在使用[Luke](http://code.google.com/p/luke/)探索索引时，我们会看到我们不认识的术语。该索引共包含 38673 个文档，Luke 显示了该领域的以下排名靠前的术语：

```
Term | Rank  | Field | Text | Text (decoded as numeric-int)
 1   | 38673 | Axis  | x    | 0  
 2   | 38673 | Axis  | p    | 0  
 3   | 38673 | Axis  | t    | 0  
 4   | 38673 | Axis  | |    | 0  
 5   | 19421 | Axis  | l    | 0  
 6   | 19421 | Axis  | h    | 0  
 7   | 19421 | Axis  | d@   | 0  
 8   | 19252 | Axis  | `  N | 9999  
 9   | 19252 | Axis  | l    | 8192
10   | 19252 | Axis  | h  ' | 9984
11   | 19252 | Axis  | d@ p | 9984 
12   | 18209 | Axis  | `    | 4  
13   |   950 | Axis  | `    | 1  
14   |   116 | Axis  | `    | 5  
15   |   102 | Axis  | `    | 6  
16   |    26 | Axis  | `    | 3  
17   |    18 | Axis  | `    | 2 
```

我们发现其他数字字段的模式相同。

未知值从何而来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:26:50.427

NumericFields 使用[trie](http://en.wikipedia.org/wiki/Trie)结构进行索引。您看到的术语是其中的一部分，但如果您查询它们，则不会返回结果。

尝试使用 Int32.MaxValue 的精度步长索引 NumericField，这些值将消失。

[NumericField 文档](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/document/NumericField.html#NumericField%28java.lang.String,%20int%29)

> ...在 Lucene 中，每个数值都被索引为一个 trie 结构，其中每个术语在逻辑上分配给越来越大的预定义括号（它们只是值的低精度表示）。每个连续括号之间的步长称为precisionStep，以位为单位。较小的precisionStep 值会导致更多的括号，这会在索引中消耗更多的磁盘空间，但可能会导致更快的范围搜索性能。选择默认值 4 是为了合理权衡磁盘空间消耗与性能。如果您想更改值，可以使用专家构造函数 NumericField(String,int,Field.Store,boolean)。请注意，您还必须在创建 NumericRangeQuery 或 NumericRangeFilter 时指定一个全等值。对于低基数场，较大的精度步长是好的。如果基数 < 100，则使用 Integer.MAX_VALUE 是公平的，每个值产生一个术语。...

[有关NumericRangeQuery 文档](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_0/api/all/org/apache/lucene/search/NumericRangeQuery.html#precisionStepDesc)中提供的精度步骤的更多详细信息：

> PrecisionStep 的良好值取决于使用情况和数据类型：
> 
> • 所有数据类型的默认值为4，当没有给出precisionStep 时使用。
> 
> • 大多数情况下，64 位数据类型（long、double）的理想值是 6 或 8。
> 
> • 大多数情况下，32 位数据类型（int、float）的理想值为 4。
> 
> • 对于低基数字段，较大的精度步长是好的。如果基数 < 100，使用 •Integer.MAX_VALUE 是公平的（见下文）。
> 
> • long/double 的步数≥64，int/float 的步数≥32，在索引中为每个值生成一个标记，查询与传统的 TermRangeQuery 一样慢。但它可用于生成仅用于排序的字段（在这种情况下，只需使用 Integer.MAX_VALUE 作为precisionStep）。使用 NumericFields 进行排序是理想的，因为构建字段缓存比使用纯文本数字快得多。这些字段每个值都有一个术语，因此也可以与术语枚举一起使用以构建不同的列表（例如要搜索的构面/预选值）。使用上述precisionSteps之一也可以对范围查询优化字段进行排序。

**编辑**

小样本，由此产生的索引将在卢克中显示值为 8192、9984、1792 等的术语，但使用将它们包含在查询中的范围不会产生结果：

```
NumericField number = new NumericField("number", Field.Store.YES, true);
Field regular = new Field("normal", "", Field.Store.YES, Field.Index.ANALYZED);

IndexWriter iw = new IndexWriter(FSDirectory.GetDirectory("C:\\temp\\testnum"), new StandardAnalyzer(), true);

Document doc = new Document();
doc.Add(number);
doc.Add(regular);

number.SetIntValue(1);
regular.SetValue("one");
iw.AddDocument(doc);

number.SetIntValue(2);
regular.SetValue("one");
iw.AddDocument(doc);

number.SetIntValue(13);
regular.SetValue("one");
iw.AddDocument(doc);

number.SetIntValue(2000);
regular.SetValue("one");
iw.AddDocument(doc);

number.SetIntValue(9999);
regular.SetValue("one");
iw.AddDocument(doc);

iw.Commit();

IndexSearcher searcher = new IndexSearcher(iw.GetReader());

NumericRangeQuery rangeQ = NumericRangeQuery.NewIntRange("number", 1, 2, true, true);
var docs = searcher.Search(rangeQ);
Console.WriteLine(docs.Length().ToString()); // prints 2

rangeQ = NumericRangeQuery.NewIntRange("number", 13, 13, true, true);
docs = searcher.Search(rangeQ);
Console.WriteLine(docs.Length().ToString()); // prints 1

rangeQ = NumericRangeQuery.NewIntRange("number", 9000, 9998, true, true);
docs = searcher.Search(rangeQ);
Console.WriteLine(docs.Length().ToString()); // prints 0

Console.ReadLine(); 
```

# ios - How to decode a Crash log using dSYM file in iOS?

> ID：11883069
> 
> 赞同：20
> 
> 时间：2012-08-09T12:05:16.817
> 
> 标签：ios, crash, crash-log

My iOS application crashed. I would like to read the crash log with the dSYM file. How is it possible?

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-09T12:05:16.817

First of all, you need three files: the dSYM file, the application file and the crash log.

Open the X Code, in the project navigator reveal the Products folder, and "Show in finder" the app file. Here you will find the dSYM file too. Copy them to a folder.

Now open the terminal, and navigate to the folder you copied previously the two files. Run: `dwarfdump --uuid Application_name.app/Application_name` You should receive the application's UUID. Run the following command: `dwarfdump --uuid Application_name.app.dSYM` - you will receive the UUID again, which should match the previously received UUID.

Open the crash log (X Code - Organizer - crashes), and find the line where appears the "Binary images" title. Here is another UUID in the first line, which should match again with the previously received in the terminal.

Now, you are assured the crash was logged in the build you are examining, so open again the crash log file, find the Thread 0 section, and there should be two lines with your application name and two addresses. Such as:

```
Application_name 0x123456
Application_name 0x987654 
```

In the terminal you should run now: `atos -arch armv7 -o address1 address2` (the address1 and address2 should be replaced with the previous two addresses, and the armv7 with your system's - it is shown at the lines, where you got the UUIDs).

Happy debugging!

EDIT: I would like to mention [this](http://noverse.com/blog/2010/03/how-to-deal-with-an-iphone-crash-report/) post as base of mine.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-20T14:59:20.337

**Inspiration**

[https://developer.apple.com/library/archive/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-SYMBOLICATEWITHXCODE](https://developer.apple.com/library/archive/technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-SYMBOLICATEWITHXCODE)

**Steps to get a dsym file**

*   Build the iOS app for Archive
*   Extract the MyApp.xcarchive
*   Inside that file, you will find your dSYM file.

**Get your device crash log**

Pull the .crash file off a device. I normally use xCode for this.

**Line-by-line method**

```
atos -arch arm64 -o TheElements.app.dSYM/Contents/Resources/DWARF/TheElements -l 0x1000e4000 0x00000001000effdc

0x1000e4000 = address of your app's image
0x00000001000effdc = is the stripped name of the symbol you want to turn into a readable name 
```

**Pro method**

Get the location of `symbolicatecrash` executable.

In xCode 9, the file you want is here:

```
/Applications/Xcode.app/Contents/SharedFrameworks/DVTFoundation.framework/Versions/A/Resources/symbolicatecrash 
```

**Print symbolicated crash log to terminal**

```
export DEVELOPER_DIR="/Applications/Xcode.app/Contents/Developer"

./symbolicatecrash -v crash_log_20_9_2018.crash myapp.app.dSYM 
```

**Reading**

Nice instructions for `atos` here: [How to symbolicate crash log Xcode?](https://stackoverflow.com/questions/25855389/how-to-symbolicate-crash-log-xcode)

Way to perform the same without the dsym file here: [https://medium.com/@Mrugraj/crash-re-symbolication-5c28d3a3a883](https://medium.com/@Mrugraj/crash-re-symbolication-5c28d3a3a883)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T05:13:09.323

Actually, you can't decode the dSYM file, but get the error detail from it 1\. find the crash thread and address from log file:following is 0x0nnn 2\. find the native Code Type from log file: following is arm64
3\. find the dSYM file(symbol file),extract from .xcarchive: following is xx.app.dSYM

```
dwarfdump --lookup 0x0nnn --arch=[arm64 armv6 armv7] xx.app.dSYM 
```

# android - 联系人 ListVew 在模拟器中工作，但不在真实设备中

> ID：11883070
> 
> 赞同：0
> 
> 时间：2012-08-09T12:05:18.523
> 
> 标签：android

我在 Android 2.2 中制作了一个应用程序，它只在`listview`. 所有电话簿、联系人和号码都`ListView`带有`CheckBox`。当我在 Emulator 2.2 中运行应用程序时，它可以正常工作，但是当我使用真实设备测试应用程序时，它只会显示联系人电子邮件 ID 以及何时`CheckBoxes`使用应用程序崩溃。

我想清楚我不会从任何地方调用电子邮件 ID。我已经使用下面的代码来调用从电话簿中获取联系人详细信息。

在 BaseAdapter 类中：

```
 ContentResolver cr = getContentResolver();
             cr = context.getContentResolver();
         cursor = cr.query(
                ContactsContract.Contacts.CONTENT_URI,
                null,
                null,
                null,
                null);

public View getView(final int position, View convertView, ViewGroup parentView) 
{

                    if(cursor != null){
             while(cursor.moveToNext()){
                    int nameFiledColumnIndex = cursor.getColumnIndex(
                                    ContactsContract.Contacts.DISPLAY_NAME);
                    String id = cursor.getString(
                            cursor.getColumnIndex(ContactsContract.Contacts._ID));
                    Cursor pCur = cr.query(
                         ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                         null, 
                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                         new String[]{id}, null);   

                    while (pCur.moveToNext()) {
                     phoneNo = pCur.getString(pCur.getColumnIndex(
                             ContactsContract.CommonDataKinds.Phone.NUMBER));

    } 
```

有人知道我犯了什么错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:28:57.763

试试这个...

```
 ContentResolver contentResolver = getContentResolver();
    Cursor cur = contentResolver.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);

    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                // Query phone here. Covered next

                Cursor phoneCur = contentResolver.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (phoneCur.moveToNext()) {
                    // Do something with phones
                    String phoneNo = phoneCur.getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    contactDataset = new ContactDataset(); //This is object of dataset class to add the contacts.
                    contactDataset.setName(name);
                    contactDataset.setPhoneNumber(phoneNo);
                    getContactList.add(contactDataset);                     
                }
                pCur.close();
            }
        }
    } 
```

让我知道它是否有效.......

# python - Python和numpy - 将数组中的多个值转换为二进制

> ID：11883072
> 
> 赞同：1
> 
> 时间：2012-08-09T12:05:20.137
> 
> 标签：python, numpy

我有一个相当大的 numpy 数组，大约 1mill。不同的数字数量约为 8，编号为 1-8。

假设我想给定数字 2，我想将所有 2 重新编码为 1，其余的重新编码为 0。

```
i.e. 
2==>1
1345678==0

Is there a pythonic way to do this with numpy?

[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8]=> [0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0] 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:07:45.003

这`a == 2`是 NumPy 数组的结果`a`：

```
>>> a = numpy.random.randint(1, 9, size=20)
>>> a
array([4, 5, 1, 2, 5, 7, 2, 5, 8, 2, 4, 6, 6, 1, 8, 7, 1, 7, 8, 7])
>>> a == 2
array([False, False, False,  True, False, False,  True, False, False,
        True, False, False, False, False, False, False, False, False,
       False, False], dtype=bool)
>>> (a == 2).astype(int)
array([0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]) 
```

如果您想`a`就地更改，最有效的方法是使用`numpy.equal()`：

```
>>> numpy.equal(a, 2, out=a)
array([0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T12:09:32.770

我可能会用[`np.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)这个：

```
>>> import numpy as np
>>> a = np.array([[1,2,3,4,5,6,7,8,1,2,3,4,5,6,7,8]])
>>> np.where(a==2, 1, 0)
array([[0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0]]) 
```

# c++ - 调试构建和发布构建、差异和用途是什么意思

> ID：11883074
> 
> 赞同：8
> 
> 时间：2012-08-09T12:05:20.733
> 
> 标签：c++, debugging, build, release, wxwidgets

> **可能重复：**
> [调试/发布差异](https://stackoverflow.com/questions/367884/debug-release-difference)

我想知道这两个是什么意思：调试构建和发布构建，两者之间有什么区别。

如果我在 Visual Studio 中制作一个简单的 C++ 项目，我应该使用哪一个（我的意思是每个条件适合哪些条件）以及我现在实际使用的构建。[如果我不更改任何项目设置]

我问这个是因为我正在尝试使用 wxWidgets 2.9.4 制作一个 GUI，并且他们给出了添加所需 .lib 的不同情况。这些是

`release ANSI static`

`debug ANSI static`

`release Unicode static`

`debug Unicode static`

请给出详细答案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-09T12:30:23.973

调试构建和发布构建只是名称。他们没有任何意义。

根据您的应用程序，您可以使用编译器和链接器选项的不同组合以一种、两种或更多种不同的方式构建它。 *大多数*应用程序只能构建在一个版本中：您测试和调试客户端使用的完全相同的程序。在某些情况下，使用两种不同的构建可能更实用：总体而言，出于性能原因，客户端代码需要优化，但在调试时不需要优化。然后在某些情况下，完全调试（即迭代器验证等）可能会导致代码即使对于算法调试也太慢，因此您将拥有一个带有完全调试检查的构建，一个没有优化，但没有迭代器调试, 和一个优化。

任何时候你开始一个应用程序，你必须决定你需要什么选项，并创建相应的构建。你可以随便给他们打电话。

关于外部库（如 wxwidgets）：当使用不同的选项时，所有编译器都有一些不兼容性。因此，交付库的人（不是以源代码形式）必须提供几个不同的版本，具体取决于许多问题：

*   发布与调试：发布版本将使用一组或多或少的标准优化选项进行编译（并且没有迭代器调试）；未经优化的调试版本，并带有迭代器调试。是否存在迭代器调试通常会破坏二进制兼容性。库供应商应记录哪些选项与每个版本兼容。

*   ANSI 与 Unicode：这可能意味着字符数据的窄`char`与宽`wchar_t` 。使用与您在应用程序中使用的内容相对应的内容。（请注意，这两者之间的区别不仅仅是一些编译器开关。您通常需要完全不同的代码，并且在所有情况下正确处理 Unicode 绝非易事；真正支持 Unicode 的应用程序必须了解诸如组成字符之类的事情或双向书写。）

*   静态与动态：这决定了库的链接和加载方式。通常，您会想要静态的，至少如果您指望将应用程序部署在其他机器上而不是开发它的机器上。但这也取决于许可问题：如果您需要为部署库的每台机器提供许可，则使用动态可能更有意义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T12:31:46.123

在进行`DEBUG`构建时，项目设置为不优化（或仅*非常*轻微地优化）生成的代码，并告诉编译器添加调试信息（包括有关函数、变量和调试所需的其他信息的信息）。预处理器设置为定义`_DEBUG`宏。

`RELEASE`另一方面，构建具有更高级别的优化，并且不保存调试信息。预处理器设置为定义`NDEBUG`宏。

另一个区别是某些“系统”宏，例如`ASSERT`-like 宏，根据是否定义`_DEBUG`或`NDEBUG`定义来执行不同的操作。`ASSERT`在发布版本中什么都不做，但在调试版本中进行检查和中止。

`Unicode`和 non-之间的区别`Unicode`主要是`UNICODE`预处理器宏，它告诉头文件是否应该启用某些 Unicode 功能。一件事是在 Unicode 版本`TCHAR`中定义，`wchar_t`但`char`在非 Unicode 版本中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T12:16:28.680

In the debug build you get a lot more error checjking, so if something goes wrong you may get a more informative message ( and it will run more slowly )

In the debug build you will get more information when you run it under the debugger.

You can tell if the build is debug build by looking at the preprocessor definitions of the project properties: _DEBUG will be defined.

You will send the release build to your clients. ( The debug build uses the debug libraries which are not present on most non development machines )

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T12:29:18.687

如果要将静态库链接到项目，则需要使用与编译代码相同的设置进行编译。这就是为什么有一个调试和发布版本的库。此外，您需要指定是要使用 unicode 还是 ansi。这里的答案很简单（在我看来） - 只需使用 unicode。

与 Debug 相比，Release 有什么不同，所以它们不能混用？主要是内存管理。Debug 中的内存管理做了很多额外的事情来让你及早发现错误。例如，可以检查金丝雀是否覆盖代码。未初始化的内存使用特定的模式进行初始化，...此外，发布中有很多优化在调试中未使用。这允许发布运行得更快，但难以调试代码。方法可能会被优化掉，而是被内联，参数传递可能会被优化为使用寄存器，...

因此，在 C++ 中，您管理（至少）2 个配置。一种与调试库链接的调试配置。这是用于开发和测试的。以及与发布库链接的发布配置。这个是送的。但是不要忘记您需要测试 Release，因为它的行为可能与 Debug 配置不同。

# web-applications - 使用资产管道替代 Rails

> ID：11883075
> 
> 赞同：1
> 
> 时间：2012-08-09T12:05:23.777
> 
> 标签：web-applications, asset-pipeline, assets, singlepage

我正在使用 Rails 编写单页 Web 应用程序。我根本没有真正使用 Rails，而且编译资产的速度很慢（这是我唯一使用 Rails 的东西），所以我想要更快的东西。

只要它们在 Heroku 上运行，我就对大多数框架持开放态度。

我真正需要的是 Coffeescript 支持以及 hamlc 支持（https://github.com/netzpirat/haml-coffee）。

我今天也在使用 SASS，但只要语法相似，我就可以切换到其他东西。

Rails 最重要的特性是打包资产，我无需重新启动网络服务器即可查看更改。

绝对要求将 cachebuster 附加到资产文件名并且将资产连接起来。

那么，想法？我猜 node.js 将是一个强有力的论据，但有没有人为 node 制作了一个好的资产管道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:35:17.220

您可能还想查看[connect-assets](https://github.com/TrevorBurnham/connect-assets)。它允许您在开发中使用未缩小的资产，然后根据生产环境变量处理缩小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:39:44.673

你试过[发球](http://get-serve.com)吗？我现在正在使用它编写一个网站，到目前为止真的很有帮助。它比 Rails 更轻，同时提供对部分内容的支持，提供对 ERB、SASS 和 CoffeeScript（使用 rack-coffee gem）的支持，并且可以在任何支持 Rack 的服务提供商上运行，例如 Heroku。

# ubuntu-12.04 - Error starting gnome-terminal from /etc/rc.local ubuntu 12.04

> ID：11883080
> 
> 赞同：0
> 
> 时间：2012-08-09T12:06:07.700
> 
> 标签：ubuntu-12.04, rc, gnome-terminal, startupscript

```
I am unable to start gnome-terminal from rc.local , with the following error.

** (gnome-terminal:1304): WARNING **: Command line `dbus-launch --autolaunch=bd53fdd726adb41172f458c100000007 --binary-syntax --close-stderr' exited with non-zero exit status 1: Autolaunch error: X11 initialization failed.\n
Failed to parse arguments: Cannot open display: 
Failed to parse arguments: Cannot open display:

the command inside rc.local is
cd /path/to/server
gnome-terminal -e 'sudo node startserver.js'

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:30:33.647

似乎有一条错误消息试图告诉你一些事情：`exited with non-zero exit status 1: Autolaunch error: X11 initialization failed`- 换句话说，rc.local 没有 X 显示来启动 gnome-terminal。

如果您确定在执行此操作时 X 显示可用（我对此表示怀疑 - rc.local 在 X 显示出现之前很久就完成了执行），您可以尝试`env DISPLAY=:0 gnome-terminal -e 'sudo node startserver.js'`. 这可能是有问题的，因为`gnome-terminal`它将以 root 身份运行（出于多种原因，这是一个坏主意）。

另一方面，如果您尝试在登录用户的 X 显示中启动终端（这*似乎*是您的最终目标），您可能需要将该命令添加到您的自动启动脚本中。有关GUI 版本，请参阅[this](http://www.ubuntuka.com/autostart-ubuntu-startup/)`~/.config/autostart` ，查看您的和`/etc/xdg/autostart`结果。

# objective-c - Programmatically email an image with some subviews but not others?

> ID：11883082
> 
> 赞同：1
> 
> 时间：2012-08-09T12:06:09.467
> 
> 标签：objective-c, ios, rendering

I'm working on something that will create an email and attach an image of the screen for the user to send. I'm using the following code to create and attach the image.

```
 UIGraphicsBeginImageContext([self.view frame].size);
    [[self.view layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIGraphicsBeginImageContext([self.view bounds].size);
    [myImage drawInRect:CGRectMake(0, 0, [self.view bounds].size.width,[self.view bounds].size.height)];
    myImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    NSData *imageData = UIImagePNGRepresentation(myImage);
    [mailer addAttachmentData:imageData mimeType:@"image/jpg" fileName:@"blah"]; 
```

However, this includes all of the subviews, and I want to exclude a toolbar and a segmented view, leaving only the view above the toolbar and the text field in that view. I've tagged all the relevant views and subviews, but how do I use those tags to create an image that includes what I want and excludes what I don't want?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:09:03.003

在渲染图像之前，将所有不想显示的视图设置为隐藏。我有几个应用程序可以做同样的事情，这就是我所做的。

`renderInContext`和相关功能基本都是截图，所以[所见即所得](http://en.wikipedia.org/wiki/WYSIWYG)

# spree - 使用 Deface 覆盖视图

> ID：11883088
> 
> 赞同：2
> 
> 时间：2012-08-09T12:06:26.327
> 
> 标签：spree

我正在尝试在 Spree 产品页面的展示页面上插入文本。

我的 app/overrides/show_new.html.erb 如下：

```
Deface::Override.new(:virtual_path  => "spree/products/show",
                 :insert_after => "[data-hook='product_show']",
                 :text          => "<p>This is overriding......</p>",
                 :name          => "show_new",
                 :disabled      => false) 
```

但是，视图没有被覆盖。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:21:36.000

您必须重新启动应用程序才能首先注册覆盖。

否则，这似乎是正确的（假设您的代码在 app/overrides/something.rb 中）

如果您不是最新版本，请注意，某些视图 HTML 已损坏，并且损坏了污点。

[https://github.com/spree/spree/issues/1056](https://github.com/spree/spree/issues/1056)（我上周遇到了这个问题）

# javascript - KineticJS 在对象创建后更改属性 (NOOB)

> ID：11883090
> 
> 赞同：0
> 
> 时间：2012-08-09T12:06:39.053
> 
> 标签：javascript, html, canvas, properties, kineticjs

大家好，我是 KineticJS 的菜鸟，我想知道如何更改属性值。例如对于创建后的矩形：

```
var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50,
          fill: "#00D2FF",
          stroke: "black",
          strokeWidth: 4
        }); 
```

我将如何做这样的事情：

```
rect.NewProperty({
      x: 100,
      y: 30,
      width: 100,
      height: 50,
      fill: "#cccccc",
    }); 
```

并让其他属性保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:21:25.040

像这样：

```
var rect = new Kinetic.Rect({
          x: 239,
          y: 75,
          width: 100,
          height: 50,
          fill: "#00D2FF",
          stroke: "black",
          strokeWidth: 4
        });

rect.setFill("#D200FF");
rect.setStrokeWidth(1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T07:53:44.273

谢谢（你的）信息..

我也试过

```
rect.setWidth(100); 
```

和

```
rect.setHeight(100); 
```

有用 ：）

# android - MapView 在 2.3.3 android 设备上失败

> ID：11883093
> 
> 赞同：0
> 
> 时间：2012-08-09T12:06:50.983
> 
> 标签：android

我的应用程序在 2.3.3 上运行时出现问题。尝试加载地图时似乎立即崩溃。它适用于所有模拟器版本，并且适用于 2.2 设备，但仅在 2.3.3 设备上崩溃。有谁知道为什么会发生这种情况？确切的日志猫转储是

找不到从方法 com.google.android.maps.MapActivity.createMap 引用的类 'com.google.googlenav.map.TrafficService

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:23:28.990

浏览下面给出的网址...希望它会有所帮助... [http://mobiforge.com/developing/story/using-google-maps-android](http://mobiforge.com/developing/story/using-google-maps-android)

# objective-c - 2012-08-09 17:29:13.988 LogTest[8186] 在 linux 中使用 NSLog 时如何避免在输出窗口打印这句话？

> ID：11883096
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:06:57.613
> 
> 标签：objective-c

在linux中使用NSLog时如何避免在输出窗口打印这句话？

2012-08-09 17:29:13.988 日志测试[8186]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:07:41.147

使用`printf`而不是`NSLog`. 它可能具有相同的参数，但不会在您的消息之前打印时间戳。

# ios - 在 UIWebView 上按下键盘 Enter 键时如何捕获事件？

> ID：11883104
> 
> 赞同：0
> 
> 时间：2012-08-09T12:07:19.953
> 
> 标签：ios, events, uiwebview, keyboard

在 UIWebView 上按下键盘 Enter 键时如何捕获事件？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:24:38.970

没有任何公共 API 可让您访问键盘按下事件或通知。你必须找到另一种方式。要做到这一点，就是在每个键的顶部放置一个透明按钮，并检测到它，然后将触摸传递给底层按钮。

# vim - 需要时手动启用 undodir

> ID：11883105
> 
> 赞同：1
> 
> 时间：2012-08-09T12:07:21.410
> 
> 标签：vim

我启用`undodir`了 , 以跟踪我在关闭 vim 会话后所做的更改。

我有时想编辑一个文件，进行一些更改，保存它，然后返回到该会话的原始文件。（这可能是可能的用例之一）

如果我`undodir`禁用了，我可以简单地继续点击`u`，直到它向我显示一条消息。

所以我想`undodir`默认在撤消/重做中被禁用，并且我应该有一个命令在需要时启用它。

必须始终在任一状态下跟踪对文件的所有更改。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:33:42.173

据我了解文档，只有设置[`undodir`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27undodir%27)什么都不做，除非[`undofile`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27udf%27)设置为`true`.

因此，我假设您要激活`undofile`某些文件。

首先想到的是一个模式[行](http://vimdoc.sourceforge.net/htmldoc/options.html#%27modeline%27)，以便`undofile`为`true`某些文件设置。但不幸的是，这不起作用。

但是，该问题出现在 vim 开发人员邮件列表中，并且在一月份提供了修复：http: [//comments.gmane.org/gmane.editors.vim.devel/32896](http://comments.gmane.org/gmane.editors.vim.devel/32896)。此修复程序可能存在于当前资源中；因此，如果您想尝试，请获取最新的 vim 源，构建它并检查您是否可以使用模式行进行设置[`udf`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27udf%27)

在有包含该修复程序的官方版本之前，您可以使用[`undofile.vim`](http://www.vim.org/scripts/script.php?script_id=3198). 它的描述摘录：

> 如果您只想对某些文件使用“撤消文件”，您会注意到**不能在模式行中设置“**撤消文件” ，或者一旦加载了缓冲区（因为此时不会加载现有的撤消文件）。Bram 建议使用 BufReadPre 自动命令，在加载缓冲区之前设置“撤消文件”。该脚本会为您执行这些步骤。

# http - HTTP multipart/form-data over Socket 不显示变量

> ID：11883112
> 
> 赞同：0
> 
> 时间：2012-08-09T12:07:52.317
> 
> 标签：http, post, multipart, multipartform-data, form-data

我现在已经尝试了几个小时，但不知何故我不知道问题所在。这是我的请求示例：

```
POST /test/upload/upload.php HTTP/1.0
Host: localhost
User-Agent: TestBrowser
Content-Type: multipart/form-data, boundary=635131229269 //edited
Content-Length: 94

--635131229269
Content-Disposition: form-data; name="testme"

contender
--635131229269-- 
```

它通过标准 TCP/IP 套接字发送到 PHP 服务器，但 $_POST['testme'] 值始终为空。

有人可以看到此请求中的错误吗？--> 解决了

末尾有一个 \r\n ，这里的代码中没有显示。

谢谢，这解决了我的第一个问题。

也许你也可以帮助我的第二个。正如我在您的个人资料中看到的那样，您对 C# 非常熟悉，这是我的第二个问题。我正在尝试将文件上传到我的服务器并且文件数据以某种方式没有正确请求，我认为这是因为编码，但我不确定。

```
_content = _content
     + "--" + boundary + Environment.NewLine
     + "Content-Disposition: form-data; name=\"" + this._FileVarName + "\"; filename=\"" + Path.GetFileName(this._FilePath) + "\""
     + Environment.NewLine + "Content-Transfer-Encoding: application/octet-stream"
     + Environment.NewLine + Environment.NewLine;

mainContent = this.Combine(Encoding.UTF8.GetBytes(_content), StreamFile(this._FilePath));

private Byte[] StreamFile(string Path)
{
  FileStream fs = new FileStream(Path, FileMode.Open, FileAccess.Read);
  Byte[] ImageData = new byte[fs.Length];
  fs.Read(ImageData, 0, System.Convert.ToInt32(fs.Length));
  fs.Close();
  return ImageData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:12:35.887

您必须在没有前导破折号的情况下指定边界（在第 4 行）。此外，我只计算了 92 个字节的有效负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T10:46:10.423

只是为了让这个答案更完整一点，“multipart/form-data”之后必须有一个分号（参见[w3c forms spec](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)）

```
Content-Type: multipart/form-data; boundary=635131229269 
```

# javascript - 升级到 Drupal 站点时 CSS 和 JS 失败

> ID：11883116
> 
> 赞同：0
> 
> 时间：2012-08-09T12:08:01.087
> 
> 标签：javascript, jquery, drupal, drupal-7, drupal-theming

当我对 Drupal 站点进行更改时遇到了一个问题 - www.productworld.com

这就是问题的出现方式：

1.  对站点进行更改，例如添加 javascript 跟踪代码或添加新的静态网页。

2.  当没有以管理员身份登录时（以普通访问者的身份查看网站），主页现在搞砸了。似乎没有加载主页的 CSS 和 JavaScript。以管理员身份登录时，我看到了该站点的缓存版本，看起来应该是这样。我使用两个单独的浏览器来确认问题——一个是我在 Chrome 中以 Drupal 管理员身份登录的，另一个是我在 Firefox 中以未登录站点访问者的身份查看该站点。

以下是出现问题时网站的一些截图：

[http://imgur.com/xs3hF](http://imgur.com/xs3hF)

[http://imgur.com/wMBVq](http://imgur.com/wMBVq)

[http://imgur.com/Gksb9](http://imgur.com/Gksb9)

[http://imgur.com/eZPTE](http://imgur.com/eZPTE)

注意：您看到的公司图像（iWatt、Roal、Assa Abloy 等）应该在一个节点队列中（一个 jQuery 图像幻灯片），而是一个接一个地出现。带有金色号召性用语的蓝色框出现在页面下方。这就是让我相信 CSS 和 JS 没有加载的原因。

3.清除 Drupal 缓存修复问题。

显然，每次对其进行简单更改时，网站都会被搞砸，这是非常不可取的。

如果有人遇到类似的问题，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:15:56.557

When you make changes to the site with caching enabled it will cause problems. This is because it will be using some cached copies of earlier files.

**I tend to make changes to a development version of the site, then roll them out to the live site and clear the cache.**

# javascript - Kinetic.js 通过单击画布外的按钮从画布中删除图像

> ID：11883123
> 
> 赞同：0
> 
> 时间：2012-08-09T12:08:33.920
> 
> 标签：javascript, html, drag-and-drop, html5-canvas, kineticjs

需要一些帮助..我不知道是 kinetic.js 库问题还是我在这里做错了什么..我在 windows.onload 上加载了 2 个图像，然后在画布之外有一组图像和 onclick我将图像放置在画布内工作正常..（我只使用了一个函数通过这样做从画布外部加载任何图像..图像集：

```
 <li>
        <a href="javascript:void(0)" onclick="loadWithType(document.getElementById('i3'))">

        <img src="<?php echo base_url()?>images/eagle/baby1.png" id="i3"  alt="Pulpitrock"width="100" height="120" /></a>
         <a href="javascript:void(0)" onclick="removewithType(document.getElementById('i3'))">Close</a>
       </li>
     <li>
        <a href="javascript:void(0)" onclick="loadWithType(document.getElementById('i4'))">
        <img src="<?php echo base_url()?>images/eagle/pattern-1.png" id="i4" alt="Pulpit rock" width="100" height="120" /></a>
        <a href="javascript:void(0)" onclick="removewithType(document.getElementById('i4'))">Close</a>
        </li> 
```

加载图像

```
 function loadWithType(img){
        var sources = {
            yoda1 : img.src,
        };
        loadImages(sources,initStage1);
      }; 
```

功能（定义位置和所有）

```
 function initStage1(images){ 

            layert = new Kinetic.Layer();

            var yoda1 = new Kinetic.Image({
            image: images.yoda1,
            x: 106,
            y: 0,
            width: 180,
            height: 220,
            draggable:true,
            detectionType: "pixel"

            });

                    /*
                     * check if animal is in the right spot and
                     * snap into place if it is
                     */
                    yoda1.on("dragend", function() {
                            layert.draw();
                            // disable drag and drop

                            yoda1.saveImageData();
                    });

            layert.add(yoda1);
            stage.add(layert);
            yoda1.saveImageData();

            } 
```

这工作正常..（点击它们加载图像）

但是当我尝试通过关闭按钮删除图像时..我遇到了问题，因为最新的图像被删除了，并且在该库向我抛出错误之后..我正在做这样的事情..

```
 function removewithType(img){
        var sources = {
            yoda1 :img.src,
        };
        loadImages(sources,removeStage1);
        }

         function removeStage1(images){

                var yoda1 = new Kinetic.Image({
                image: images.yoda1,
                x: 106,
                y: 0,
                width: 180,
                height: 220,
                draggable:true,

            });
                layert.clear();
                stage.remove(layert);
                layert.draw();

                 } 
```

首先在这里.. layert.remov(yoda1) 功能不起作用。

这个函数的行为出乎意料..

任何指针

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:41:28.770

如果您删除图像的原因是隐藏它，您可以简单地使用 .hide() 函数：

```
yoda1.hide();
layert.draw(); 
```

您的代码的另一个问题是您`layert.draw();`在删除它之后使用它`stage.remove(layert);`，因此当您删除此图层时，您无法绘制它。

# javascript - 提高页面速度和 YSlow 等级

> ID：11883127
> 
> 赞同：0
> 
> 时间：2012-08-09T12:09:11.457
> 
> 标签：javascript, parsing, mybb

我在 gtmetrix.com 上查看了我的 MyBB 论坛，并提供了以下性能报告：

[http://gtmetrix.com/reports/www.forum.joorchin.net/TdxokjnO](http://gtmetrix.com/reports/www.forum.joorchin.net/TdxokjnO)

现在我有很多问题要提高页面速度和 YSlow 等级。

1.  如何推迟 javaScripts 的解析？
2.  如何从静态资源中删除查询字符串？
3.  如何缓存 .swf 和 .js 文件？（利用浏览器缓存）
4.  如何提高 YSlow 选项卡中的推荐分数？（中优先级和高优先级）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:16:57.913

1- I think by defering parsing the javascript, they mean by putting all javascript at the end, or loading javascript asynchronously. Basically when a browser sees a script tags, it stops rendering the page until the javascript is interpreted in the script tag. Thats why its suggested to place all javascript at the end of a html page. you may or may need to change your code/js to handle this.

3 For caching .swf / .js files , if you are using Apache enable the expires module and set the revelant expires headers for the same

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:02:58.350

不要让你的 JS 加载复杂化，只需将它们合并到一个 JS 文件中并[缩小](http://code.google.com/p/minify/)它（如果可能的话）。对你的 CSS 做同样的事情，这样每次页面加载你只请求一个 JS 文件和一个 CSS 文件。

[然后使用 Apache 通过将这些Apache 设置](http://www.askapache.com/htaccess/apache-speed-cache-control.html)添加到`.htaccess`或来控制所有资源类型的缓存标头`http.conf`。

如果您有一个图像重的页面设计，您还可以考虑使用[图像精灵](http://css-tricks.com/css-sprites/)来减少从服务器检索的图像数量。还要确保使用 Fireworks、Photoshop 等良好的网络图像处理工具压缩图像（即更小的 KB 大小）。

大多数性能问题与发出的 HTTP 请求数有关。你问缓存是对的，但是初始页面加载（即在缓存被填充之前）也很重要，因为它是访问者对你网站的第一印象。

# location - Commonsware 'locpoll' 库生成“向死线程上的处理程序发送消息”警告

> ID：11883128
> 
> 赞同：1
> 
> 时间：2012-08-09T12:09:18.010
> 
> 标签：location, commonsware-cwac

我正在使用非常有用的 CWAC-LocationPoller.jar 库（Mark Murphy 的帽子提示），它提供了“com.commonsware.cwac.locpoll.LocationPoller”类。问题是，似乎每次位置轮询警报触发时，我都会收到此警告。

```
08-09 16:37:06.421: W/MessageQueue(31220): Handler{4055c2e8} sending message to a Handler on a dead thread
08-09 16:37:06.421: W/MessageQueue(31220): java.lang.RuntimeException: Handler{4055c2e8} sending message to a Handler on a dead thread
08-09 16:37:06.421: W/MessageQueue(31220):  at android.os.MessageQueue.enqueueMessage(MessageQueue.java:196)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.os.Handler.sendMessageAtTime(Handler.java:457)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.os.Handler.sendMessageDelayed(Handler.java:430)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.os.Handler.sendMessage(Handler.java:367)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.location.LocationManager$ListenerTransport.onStatusChanged(LocationManager.java:206)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.location.ILocationListener$Stub.onTransact(ILocationListener.java:75)
08-09 16:37:06.421: W/MessageQueue(31220):  at android.os.Binder.execTransact(Binder.java:320)
08-09 16:37:06.421: W/MessageQueue(31220):  at dalvik.system.NativeStart.run(Native Method) 
```

即使使用作为 CWAC-LocationPoller github 下载的一部分提供的简单“演示”项目，我也会收到此警告。以下是演示项目中两个 java 文件的副本，以供记录（为简洁起见，已截断版权声明）。

**LocationPollerDemo.java**

```
package com.commonsware.cwac.locpoll.demo;

import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.SystemClock;
import android.view.View;
import android.widget.Toast;
import com.commonsware.cwac.locpoll.LocationPoller;

public class LocationPollerDemo extends Activity {
  private static final int PERIOD=1800000;  // 30 minutes
  private PendingIntent pi=null;
  private AlarmManager mgr=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mgr=(AlarmManager)getSystemService(ALARM_SERVICE);

    Intent i=new Intent(this, LocationPoller.class);

    i.putExtra(LocationPoller.EXTRA_INTENT,
           new Intent(this, LocationReceiver.class));
    i.putExtra(LocationPoller.EXTRA_PROVIDER,
           LocationManager.GPS_PROVIDER);

    pi=PendingIntent.getBroadcast(this, 0, i, 0);
    mgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
                  SystemClock.elapsedRealtime(),
                  PERIOD,
                  pi);

    Toast
      .makeText(this,
            "Location polling every 30 minutes begun",
            Toast.LENGTH_LONG)
     .show();
  }

  public void omgPleaseStop(View v) {
    mgr.cancel(pi);
    finish();
  }
} 
```

**LocationReceiver.java**

```
package com.commonsware.cwac.locpoll.demo;

import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Date;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import com.commonsware.cwac.locpoll.LocationPoller;

public class LocationReceiver extends BroadcastReceiver {
  @Override
  public void onReceive(Context context, Intent intent) {
    File log=
        new File(Environment.getExternalStorageDirectory(),
                 "LocationLog.txt");

    try {
      BufferedWriter out=
          new BufferedWriter(new FileWriter(log.getAbsolutePath(),
                                        log.exists()));

      out.write(new Date().toString());
      out.write(" : ");

      Bundle b=intent.getExtras();
      Location loc=(Location)b.get(LocationPoller.EXTRA_LOCATION);
      String msg;

      if (loc==null) {
        loc=(Location)b.get(LocationPoller.EXTRA_LASTKNOWN);

        if (loc==null) {
          msg=intent.getStringExtra(LocationPoller.EXTRA_ERROR);
        }
        else {
          msg="TIMEOUT, lastKnown="+loc.toString();
        }
      }
      else {
         msg=loc.toString();
      }

      if (msg==null) {
        msg="Invalid broadcast received!";
      }

      out.write(msg);
      out.write("\n");
      out.close();
    }
    catch (IOException e) {
      Log.e(getClass().getName(), "Exception appending to log file", e);
    }
 }
} 
```

**环境细节**

*   Eclipse IDE（4.2.0 版）
*   构建目标：Android-8
*   目标设备 API 版本：Android-10 (2.3.5)
*   目标设备型号：三星 Galaxy Y (GT-S5360)

我已经尝试使用预构建的 jar 文件（可从 github 下载）和本地构建的库版本，结果相同。

任何想法/想法将不胜感激。我真的很想使用这个功能（我已经在我的应用程序中使用了其他 CWAC 优点），但担心重复警告。

提前致谢），

西德

# c# - 用于自动化的 SSIS C# 脚本任务

> ID：11883129
> 
> 赞同：2
> 
> 时间：2012-08-09T12:09:20.753
> 
> 标签：c#, ssis, automation, task

我有一个以脚本任务开头的 SSIS 包，用于检查指定目录是否包含三个文件。如果有 2 个文件，它会打印一条警告，如果有 1 个或更少的文件，我想打印一条错误消息并终止程序。这个想法是 SQL 代理将注册我的包并在指定的时间执行它。但是，我的脚本中必须满足以下条件：

```
switch (numFiles)
            {
                case 0:
                    MessageBox.Show("Error: No files are in the directory C:\\Directory1\n Please restart execution.");
                    break;
                case 1:
                    MessageBox.Show("Error: Only one file was found in the directory C:\\Directory1\n Please restart execution.");
                    break;
                case 2:
                    MessageBox.Show("Warning: Only two files have been loaded into the directory C:\\Directory1\n Is this intended?.");
                    break;
            } 
```

如何优雅地终止程序并打印警告消息？在服务器上运行时如何显示此消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:57:13.553

我认为最好通过挂钩现有的[Events](http://msdn.microsoft.com/en-us/library/ms136054.aspx)来为您服务。使用您的代码作为基线，我将一个变量添加到一个包中，然后部署到 SQL Server 中。

```
 int numFiles = Convert.ToInt32(Dts.Variables["numFiles"].Value.ToString());
        switch (numFiles)
        {
            case 0:
                //MessageBox.Show("Error: No files are in the directory C:\\Directory1\n Please restart execution.");
                Dts.Events.FireError(0, "File count", "Error: No files are in the directory C:\\Directory1\n Please restart execution.", string.Empty, 0);
                break;
            case 1:
                //MessageBox.Show("Error: Only one file was found in the directory C:\\Directory1\n Please restart execution.");
                Dts.Events.FireError(0, "File count", "Error: Only one file was found in the directory C:\\Directory1\n Please restart execution.", string.Empty, 0);
                break;
            case 2:
                //MessageBox.Show("Warning: Only two files have been loaded into the directory C:\\Directory1\n Is this intended?.");
                Dts.Events.FireWarning(0, "File count", "Warning: Only two files have been loaded into the directory C:\\Directory1\n Is this intended?.", string.Empty, 0);
                break;
        } 
```

从命令行运行

```
"DTExec.exe" /file /set .\so_RaiseEvents.dtsx /set \Package.Variables[User::numFiles];0

"DTExec.exe" /file /set .\so_RaiseEvents.dtsx /set \Package.Variables[User::numFiles];1

"DTExec.exe" /file /set .\so_RaiseEvents.dtsx /set \Package.Variables[User::numFiles];2 
```

我看到了预期的输出

```
Error: 2012-08-09 08:53:58.77
   Code: 0x00000000
   Source: Script Task File count
   Description: Error: No files are in the directory C:\Directory1
 Please restart execution.
End Error

Error: 2012-08-09 08:51:56.75
   Code: 0x00000000
   Source: Script Task File count
   Description: Error: Only one file was found in the directory C:\Directory1
 Please restart execution.
End Error

Warning: 2012-08-09 08:51:51.82
   Code: 0x00000000
   Source: Script Task File count
   Description: Warning: Only two files have been loaded into the directory C:\Directory1
 Is this intended?.
End Warning 
```

当您从代理运行时应该显示警告，但如果没有，那么您需要在报告中添加一个参数，以便`/report W`

## 编辑

并解决这些问题

“我如何优雅地终止程序并打印警告消息” FireError 将导致 Script 任务返回失败代码`Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success`，从而结束包执行。警告，如果您想停止包执行，那么您将修改脚本任务以指示它没有成功。我通过添加第三个 ScriptResult 枚举来做到这一点，该枚举被转换为[DTSExecResult](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.dtsexecresult.aspx) .Canceled （只有传达某些内容的其他选项没有按计划进行）。完整代码如下

```
[Microsoft.SqlServer.Dts.Tasks.ScriptTask.SSISScriptTaskEntryPointAttribute]
public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
{

    /// <summary>
    /// This method is called when this script task executes in the control flow.
    /// Before returning from this method, set the value of Dts.TaskResult to indicate success or failure.
    /// To open Help, press F1.
    /// </summary>
    public void Main()
    {
        int numFiles = Convert.ToInt32(Dts.Variables["numFiles"].Value.ToString());
        switch (numFiles)
        {
            case 0:
                //MessageBox.Show("Error: No files are in the directory C:\\Directory1\n Please restart execution.");
                Dts.Events.FireError(0, "File count", "Error: No files are in the directory C:\\Directory1\n Please restart execution.", string.Empty, 0);
                break;
            case 1:
                //MessageBox.Show("Error: Only one file was found in the directory C:\\Directory1\n Please restart execution.");
                Dts.Events.FireError(0, "File count", "Error: Only one file was found in the directory C:\\Directory1\n Please restart execution.", string.Empty, 0);
                break;
            case 2:
                //MessageBox.Show("Warning: Only two files have been loaded into the directory C:\\Directory1\n Is this intended?.");
                Dts.Events.FireWarning(0, "File count", "Warning: Only two files have been loaded into the directory C:\\Directory1\n Is this intended?.", string.Empty, 0);
                Dts.TaskResult = (int)ScriptResults.Warning;
                break;
            default:
                Dts.TaskResult = (int)ScriptResults.Success;
                break;
        }

    }

    /// <summary>
    /// This enum provides a convenient shorthand within the scope of this class for setting the
    /// result of the script.
    /// 
    /// This code was generated automatically.
    /// </summary>
    enum ScriptResults
    {
        Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
        Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure,
        Warning = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Canceled,
    };

} 
```

似乎您希望有人在监视和响应包的运行。通常，这不是您希望 SSIS 做的事情。它可以做这些事情，你可以有一个消息框提示来发现用户是否希望继续，但是当它在服务器上运行时，包将无法通过验证检查，因为它会发现它*没有*在交互模式下运行。这比 DTS 好得多，因为人们会在服务器上留下消息框，并且由于没有人定期登录到服务器，包裹会挂起数周。如果您需要同时为两个主服务器（有人参与和无人参与的运行）提供服务，则使用 System::InteractiveMode 变量，这样您就不会尝试在无人参与的运行期间显示 UI 代码。

在我看来，一个更好的选择是保持 Event 的触发方式如上，以便它在自动化环境中运行良好。然后对于您的手动执行，提供一个轻量级的 .NET 包装器来运行作业。也将文件检查卸载到该位置。是的，工作是重复的，但您将更清晰地分离 ETL 和 UI 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:27:33.787

在服务器上运行时，您不能显示这样的消息框。

您应该写入日志文件 ( [http://msdn.microsoft.com/en-us/library/ms167456%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms167456%28v=sql.105%29.aspx) )。

为了停止从脚本任务运行的包使用`RunningPackage.Stop`方法

```
 static void Main(string[] args)
        {
            Application app = new Application();
            RunningPackages pkgs = app.GetRunningPackages("yourserver");

            int pkgsRunning = pkgs.Count;
            Console.WriteLine("Packages before stop: thas + pkgsRunning);

            foreach (RunningPackage p in pkgs)
            {
                Console.WriteLine("InstanceID: " + p.InstanceID);
                Console.WriteLine("PackageDescription: " + p.PackageDescription);
                Console.WriteLine("PackageID: " + p.PackageID);
                Console.WriteLine("PackageName: " + p.PackageName);
                Console.WriteLine("UserName: " + p.UserName);
            }

            pkgs = app.GetRunningPackages("yourserver");
            foreach (RunningPackage package in pkgs)
            {
                package.Stop();
            }

            pkgsRunning = app.GetRunningPackages("yourserver").Count;
            Console.WriteLine("Packages after stop " + pkgsRunning);
        } 
```

[http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.runningpackage.stop.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.runningpackage.stop.aspx)

# android - 短信重发+异步任务

> ID：11883136
> 
> 赞同：0
> 
> 时间：2012-08-09T12:09:44.220
> 
> 标签：android, sms

我正在开发向 Number 发送短信的 APP，如果 SMS 未能执行 Asynctask 并在间隔后检查以再次重新发送短信，但是，我所有的工作都浪费了，因为我不明白 Asynctask**这里是我的代码。**

**异步类**

```
 class checkList extends AsyncTask<String, Void, Void> {
        public Void doInBackground(String... p) {
          while (true) {
                already_running_async=true;
              sms.sendTextMessage(phone_nr, null, "SmS Sending", sentPI, null);

              try {
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
              if (isCancelled()) break;

          }
        return null;
        }
        }; 
```

**短信发送代码及错误处理**

```
 bol=false;
    already_running_async=false;
    check=false;

sms = SmsManager.getDefault();
        if(!phone_nr.equals(""))
            sms.sendTextMessage(phone_nr, null,"Sms body" , sentPI, null); 
        sendBroadcastReceiver = new BroadcastReceiver(){
         @Override
            public void onReceive(Context context, Intent intent) {
                switch (getResultCode())
                {
                   case Activity.RESULT_OK:
                       //sms sent if bol true cancel the Asynctask :)
                    if(bol){
                    new checkList().cancel(true);}
                    break;
                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                        if(already_running_async==false){
                        new checkList().execute();
                        bol=true;}
                        break;
                    case SmsManager.RESULT_ERROR_NO_SERVICE:
                        if(already_running_async==false){
                        new checkList().execute();
                        bol=true;}
                        break;
                    case SmsManager.RESULT_ERROR_NULL_PDU:
                        if(already_running_async==false){
                        new checkList().execute();
                        bol=true;}
                        break;
                    case SmsManager.RESULT_ERROR_RADIO_OFF:
                        if(already_running_async==false){
                        new checkList().execute();
                        bol=true;}
                        break;
                }

           }
        };
        registerReceiver(sendBroadcastReceiver , new IntentFilter(SENT)); 
```

**问题：** 任务开始但任务保持活动状态并在 10 秒后重复发送短信我也已取消但 asyntask 在成功发送短信后不取消

由于这个问题，请帮助我没有睡一夜:(

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:28:12.137

这种情况会创建一个立即取消的*新异步任务。*

```
case Activity.RESULT_OK:
    //sms sent if bol true cancel the Asynctask :)
    if(bol){
        new checkList().cancel(true);
    }
    break; 
```

要取消 AsyncTask，您需要将其存储在变量中，例如

```
checkList smsTask = new checkList();
smsTask.execute();

// Other app logic

// Replacing the internal portion of that case is the new cancel code
if (bol) {
    smsTask.cancel(true);
} 
```

# java - Java 中的泛型：如何使这个示例工作？

> ID：11883137
> 
> 赞同：2
> 
> 时间：2012-08-09T12:09:47.743
> 
> 标签：java, generics

```
class main{
 public static void main(String[] args){
  int[] array = new int[3];
  array[0]=3;
  array[1]=2;
  array[2]=1;
  System.out.println(<Integer>countGreaterThan(array,1));
 }
 static <T extends Comparable<T>> int countGreaterThan(T[] anArray, T elem) {
 int count = 0;
 for (T e : anArray)
    if (e.compareTo(elem) > 0)
        ++count;
    return count;
 }
} 
```

我在[Java 文档](http://docs.oracle.com/javase/tutorial/java/generics/boundedTypeParams.html)中得到了这个例子。当我编写扩展 Comparable 时，我如何告诉编译器什么是类型？我想我应该实例化 T in `<T extends Comparable<T>>`，但是如何？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:13:20.287

只需更改`int`to`Integer`并删除`<Integer>`打印语句中的丑陋。

```
Integer[] array = new Integer[3];
array[0] = 3;
array[1] = 2;
array[2] = 1;
System.out.println(countGreaterThan(array, 1)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:18:47.780

我会安排这个，所以你可以使用可变参数

```
static <T extends Comparable<T>> int countGreaterThan(T elem, T... anArray) {
    int count = 0;
    for (T e : anArray)
        if (e.compareTo(elem) > 0)
            ++count;
    return count;
    }
}

System.out.println(countGreaterThan(1, 3,2,1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:14:03.360

```
class main {
    public static void main(String[] args){
  Integer[] array = new Integer[3];
  array[0]=3;
  array[1]=2;
  array[2]=1;
  System.out.println(countGreaterThan(array,1));
 }

    static <T extends Comparable<T>> int countGreaterThan(T[] anArray, T elem) {
        int count = 0;
        for (T e : anArray)
            if (e.compareTo(elem) > 0)
                ++count;
        return count;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:14:26.120

```
Integer[] array = new Integer[3];   
    array[0]=3;   
    array[1]=2;   
    array[2]=1;   
    System.out.println(countGreaterThan(array,1)); 
```

这是你想要的？

# c++ - Direct2D --- 为什么画笔资源绑定到单个 Direct2D 渲染目标？

> ID：11883140
> 
> 赞同：4
> 
> 时间：2012-08-09T12:09:52.567
> 
> 标签：c++, directx, direct2d

为什么 Microsoft 决定将 Brush 资源绑定到单个 Direct2D 渲染目标，而不是整个 Direct2D 上下文。如果我们有一个 Direct3D 纹理，该纹理映射到 Direct2D 渲染目标（对于 HUD），当用户在全屏和窗口模式之间切换或调整大小时，需要将其大小调整为屏幕的整个宽度和高度窗户？发生这种情况时，唯一要做的就是重新创建所有画笔；还是有其他方法，例如以某种方式将画笔绑定到 ID2D1Factory，而不是 Direct2D 表面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:02:41.557

画笔需要在 GPU 上分配资源。由于 Direct2D 是“无策略”API，这意味着他们希望确保您可以直接控制内存使用，因此画笔工厂方法挂起渲染目标而不是根工厂。否则，他们需要制定一些策略来决定何时释放硬件资源，并且该策略在某些情况下总是错误的（它会对性能或内存使用产生负面影响）。

几何图形和笔划样式的工厂方法挂起根工厂，因为它们存储在主存储器中，并且它们影响的任何处理都在 CPU 上完成。您可以通过 将带有笔划样式的几何对象“编译”到硬件资源中`ID2D1Mesh`，这基本上只是将其直接镶嵌到顶点缓冲区中。虽然它会更快（在渲染时，而不是在曲面细分时！），但它也可以使用*更多*的内存，具体取决于几何体的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T00:43:21.010

我不确定这是否有帮助，因为您没有描述当用户在全屏模式和窗口模式之间切换时会发生什么，所以我假设唯一的变化是渲染目标的大小，如果是这种情况，您可以通过调用[ReSize](https://docs.microsoft.com/he-il/windows/desktop/api/d2d1/nf-d2d1-id2d1hwndrendertarget-resize%28constd2d1_size_u%29)函数来调整渲染目标的大小，并像往常一样使用画笔，无需使用画笔进行任何更改。

# javascript - Sugarcrm REST 更新关系 beteen 联系人和帐户 javascript

> ID：11883145
> 
> 赞同：0
> 
> 时间：2012-08-09T12:10:12.650
> 
> 标签：javascript, jquery-mobile, sugarcrm

我有以下代码：

```
$.get(CurrentServerAddress + '/service/v2/rest.php', {

            method: "set_relationship",
            input_type: "JSON",
            response_type: "JSON",
            rest_data: '{"session":"' + SugarSessionId + '","module_name":"Contacts","module_id":"' + CurrentContactId + '","link_field_name":"accounts","related_ids":["'+ CurrentAccountId +'"]}'
        }, function(data) {
            if (data !== undefined) {
                var addAccountResult = jQuery.parseJSON(data);
    }
}); 
```

联系人和公司之间的关系运作良好。我现在想为该联系人分配一家新公司。我不知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:03:40.867

由于联系人和帐户之间的关系被定义为多对多而不是一对多，如果您只想在一个联系人和一个帐户之间建立一个链接，您应该在第一步中删除当前关系并在添加新关系后

像这样的东西：

```
// Delete previous relation
$.get(CurrentServerAddress + '/service/v2/rest.php', {
    method: "set_relationship",
    input_type: "JSON",
    response_type: "JSON",
    rest_data: '{"session":"' + SugarSessionId + '","module_name":"Contacts","module_id":"' + CurrentContactId + '","link_field_name":"accounts","related_ids":["'+ OldAccountId +'"],"name_value_list":[],"deleted":"1"}'
    }, function(data) {
    if (data !== undefined) {
        var addAccountResult = jQuery.parseJSON(data);
    }
});

// Add previous relation
$.get(CurrentServerAddress + '/service/v2/rest.php', {
    method: "set_relationship",
    input_type: "JSON",
    response_type: "JSON",
    rest_data: '{"session":"' + SugarSessionId + '","module_name":"Contacts","module_id":"' + CurrentContactId + '","link_field_name":"accounts","related_ids":["'+ NeAccountId +'"],"name_value_list":[],"deleted":"1"}'
    }, function(data) {
    if (data !== undefined) {
        var addAccountResult = jQuery.parseJSON(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:48:11.863

这应该工作...

```
$.get(CurrentServerAddress + '/service/v2/rest.php', {
        method: "set_relationship",
        input_type: "JSON",
        response_type: "JSON",
        rest_data: '{"session":"' + SugarSessionId + '","module_name":"Accounts","module_id":"' + CurrentAccountId + '","link_field_name":"contacts","related_ids":["'+ CurrentContactId +'"]}'
    }, function(data) {
        if (data !== undefined) {
            var addAccountResult = jQuery.parseJSON(data);
} 
```

});

# html - 无序列表布局不正确

> ID：11883146
> 
> 赞同：0
> 
> 时间：2012-08-09T12:10:14.670
> 
> 标签：html, css, html-lists

我有一个无序列表，我想在两列中显示文本块。该列表在两列中列出了项目，但我发现间距不一致。因此，右侧栏中的项目在我设置的边距下位于另一个下方，而在左侧栏中，两个项目之间出现了很大的间隙。

我怎样才能解决这个问题？我的 HTML 如下。提前致谢。

```
<html>
<head>test page
 <STYLE type="text/css">
 .textColumnBox {
padding-top:10px;
float: left;
width: 640px;
padding-bottom: 20px;
}
.moreNews {
padding: 2px 0 5px 0;
width:630px;
display:block;
clear:both;
background-image: url(/images/footer.jpg);
background-repeat: repeat-x;
text-align: right;
-moz-border-radius: 4px;
border-radius: 4px;
}
   .newscolumns
{
width: 100%; 
  overflow: hidden;
vertical-align:top;
}

.newscolumns ul
{
height: 300px;  
font-size: 12pt;    
 vertical-align:top;
 margin:2px;

}

 .newscolumns ul li
{
 padding: inherit;
 width: 310px;
 display: block;
 float: left;
 margin-bottom: -4px;
 background: red;
 vertical-align: top;
 }
.newsBox 
{
margin-left: 3px;
margin-bottom: 2px;/*changed from 15*/
padding-right: 20px;
border-right-width: 1px;
border-right-style: solid;
border-right-color: #4E4629;
}
.newsBox p {
display:block;
font-size: 0.7em;
line-height: 1.2em;
padding-bottom:5px;
}
.newsBox h3 {
line-height: 1.2em;
}

.newsBoxFoot {
display:block;
font-size: 0.7em;
line-height: 1.4em;
color:#999;

}
.newsBox a {
text-decoration:none;

}
.newsBox a:hover {
text-decoration:none;
color:#FFF;
}
 </STYLE></head>
<body>
 <div class="textColumnBox">
    <h1>
        Latest News</h1>
    <div class="newscolumns">
        <ul>
            <li>
    <div class="newsBox">
        <h3>
            <a href="#">sample text here qwertyuiowertyuiwertyu</a></h3>
        <p>kfdokashfsdhfjhf kjashf kjash fkjsahf saf kjsh fjsakhf kjashf kjsahf kjsahfjksafiksafkashf hsf haskjhf askjhf asjlkh flsakh flskahf lkashf lkashf lksahf lkashf lkashjh as</p>
        <div class="newsBoxFoot">20/12/2011 read more</div>
        <!-- end .newsBox -->
    </div>
</li> 
  <li>
    <div class="newsBox">
        <h3>
            <a href="#">yasdefghasdfgh sdfgsdfgasdfga dfgsdfgsdf sdfghsdefgh</a></h3>
        <p>Pkjhfsdfh skljfhsakjfh asjklhfasljkfh aslkf salkhf laskhf lskahf 
        lkasflkashfl ksahflk aslfk aslf hsalkf aslkhf laskhf lskahf glksahf 
        lskahf laskhf lksahf asljkf hsalkhflskahflkh&nbsp; sa</p>
        <p>ewreewrewr</p>
        <p>&nbsp;</p>

        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li>
    <div class="newsBox">
        <h3>
            <a href="#">gdfgfdg dfgfdgfgfdgdfg fdgfdgfdgfd gfdgfdgdfdfr</a></h3>
        <p>;sdljfs;dlj sd;lfj ds;pl;lsdjg;kdlgkdsflblkjg dlskh gkhkljh kjl.h k.j hgjklsdh g kjdsh g,m hcnxogv;isdhgoiunndkn  o;jyhds</p>
        <div class="newsBoxFoot">04/04/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li>
        <div class="newsBox">
        <h3>
            <a href="#">dfgfdg dfgdfgdfg fddfg</a></h3>
        <p>sd;l;ljd;l sdkjfdskjlsdkjfldksjflsdkjflsdkjf sldkhfdslkhfjkldhf 
        sdkjhkjh skdjhfkjhkjdhk skdjhkjhkjhoswlhf lkhkljhs kjhkjhkjh 
        sdklhkjh kh</p>
        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>

       </ul>
    </div>
    <div class="moreNews">more news</div>
    <!-- end .textColumnBox -->
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:26:25.043

您的 li 宽度是这里的问题。

[看演示](http://codebins.com/bin/4ldqp8m)

```
.textColumnBox {
  padding-top:10px;
  float: left;
  width: 640px;
  padding-bottom: 20px;
}
.moreNews {
  padding: 2px 0 5px 0;
  width:630px;
  display:block;
  clear:both;
  background-image: url(/images/footer.jpg);
  background-repeat: repeat-x;
  text-align: right;
  -moz-border-radius: 4px;
  border-radius: 4px;
}
.newscolumns
{
  width: 100%;

  overflow: hidden;
  vertical-align:top;
}

.newscolumns ul
{
  height: 300px;

  font-size: 12pt;

  vertical-align:top;
  margin:2px;

}

.newscolumns ul li
{
  padding: inherit;
  width: 250px;
  display: block;
  float: left;
  margin-bottom: -4px;
  background: red;
  vertical-align: top;
}
.newsBox 
{
  margin-left: 3px;
  margin-bottom: 2px;
  /*changed from 15*/
  padding-right: 20px;
  border-right-width: 1px;
  border-right-style: solid;
  border-right-color: #4E4629;

}
.newsBox p {
  display:block;
  font-size: 0.7em;
  line-height: 1.2em;
  padding-bottom:5px;
}
.newsBox h3 {
  line-height: 1.2em;
}

.newsBoxFoot {
  display:block;
  font-size: 0.7em;
  line-height: 1.4em;
  color:#999;

}
.newsBox a {
  text-decoration:none;

}
.newsBox a:hover {
  text-decoration:none;
  color:#FFF;
}

<div class="textColumnBox">
  <h1>
    Latest News
  </h1>
  <div class="newscolumns">
    <ul>
      <li>
        <div class="newsBox">
          <h3>
            <a href="#">
              sample text here qwertyuiowertyuiwertyu
          </a>
      </h3>
      <p>
        kfdokashfsdhfjhf kjashf kjash fkjsahf saf kjsh fjsakhf kjashf kjsahf kjsahfjksafiksafkashf hsf haskjhf askjhf asjlkh flsakh flskahf lkashf lkashf lksahf lkashf lkashjh as
      </p>
      <div class="newsBoxFoot">
        20/12/2011 read more
      </div>
      <!-- end .newsBox -->
              </div>
          </li>

          <li>
            <div class="newsBox">
              <h3>
                <a href="#">
                  yasdefghasdfgh sdfgsdfgasdfga dfgsdfgsdf sdfghsdefgh
                </a>
              </h3>
              <p>
                Pkjhfsdfh skljfhsakjfh asjklhfasljkfh aslkf salkhf laskhf lskahf 
                lkasflkashfl ksahflk aslfk aslf hsalkf aslkhf laskhf lskahf glksahf 
                lskahf laskhf lksahf asljkf hsalkhflskahflkh&nbsp; sa
              </p>
              <p>
                ewreewrewr
              </p>
              <p>
                &nbsp;
              </p>

              <div class="newsBoxFoot">
                14/06/2012 read more
              </div>
              <!-- end .newsBox -->
            </div>
          </li>
          <li>
            <div class="newsBox">
              <h3>
                <a href="#">
                  gdfgfdg dfgfdgfgfdgdfg fdgfdgfdgfd gfdgfdgdfdfr
                </a>
              </h3>
              <p>
                ;sdljfs;dlj sd;lfj ds;pl;lsdjg;kdlgkdsflblkjg dlskh gkhkljh kjl.h k.j hgjklsdh g kjdsh g,m hcnxogv;isdhgoiunndkn  o;jyhds
              </p>
              <div class="newsBoxFoot">
                04/04/2012 read more
              </div>
              <!-- end .newsBox -->
            </div>
          </li>
          <li>
            <div class="newsBox">
              <h3>
                <a href="#">
                  dfgfdg dfgdfgdfg fddfg
                </a>
              </h3>
              <p>
                sd;l;ljd;l sdkjfdskjlsdkjfldksjflsdkjflsdkjf sldkhfdslkhfjkldhf 
                sdkjhkjh skdjhfkjhkjdhk skdjhkjhkjhoswlhf lkhkljhs kjhkjhkjh 
                sdklhkjh kh
              </p>
              <div class="newsBoxFoot">
                14/06/2012 read more
              </div>
              <!-- end .newsBox -->
            </div>
          </li>

      </ul>
  </div>
  <div class="moreNews">
    more news
  </div>
  <!-- end .textColumnBox -->
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:22:13.473

我没有看到两列。只是“最新消息”，它的下方是一个带有一些文字的大红色框，但其中的每一行都有不同的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:32:21.673

我希望你看起来像这样：- [http://tinkerbin.com/WekcnbhE](http://tinkerbin.com/WekcnbhE)

**HTML**

```
<div class="textColumnBox">
    <h1>
        Latest News</h1>
    <div class="newscolumns">
        <ul>
            <li>
    <div class="newsBox">
        <h3>
            <a href="#">sample text here qwertyuiowertyuiwertyu</a></h3>
        <p>kfdokashfsdhfjhf kjashf kjash fkjsahf saf kjsh fjsakhf kjashf kjsahf kjsahfjksafiksafkashf hsf haskjhf askjhf asjlkh flsakh flskahf lkashf lkashf lksahf lkashf lkashjh as</p>
        <div class="newsBoxFoot">20/12/2011 read more</div>
        <!-- end .newsBox -->
    </div>
</li> 
  <li>
    <div class="newsBox">
        <h3>
            <a href="#">yasdefghasdfgh sdfgsdfgasdfga dfgsdfgsdf sdfghsdefgh</a></h3>
        <p>Pkjhfsdfh skljfhsakjfh asjklhfasljkfh aslkf salkhf laskhf lskahf 
        lkasflkashfl ksahflk aslfk aslf hsalkf aslkhf laskhf lskahf glksahf 
        lskahf laskhf lksahf asljkf hsalkhflskahflkh&nbsp; sa</p>
        <p>ewreewrewr</p>
        <p>&nbsp;</p>

        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li>
    <div class="newsBox">
        <h3>
            <a href="#">gdfgfdg dfgfdgfgfdgdfg fdgfdgfdgfd gfdgfdgdfdfr</a></h3>
        <p>;sdljfs;dlj sd;lfj ds;pl;lsdjg;kdlgkdsflblkjg dlskh gkhkljh kjl.h k.j hgjklsdh g kjdsh g,m hcnxogv;isdhgoiunndkn  o;jyhds</p>
        <div class="newsBoxFoot">04/04/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li>
        <div class="newsBox">
        <h3>
            <a href="#">dfgfdg dfgdfgdfg fddfg</a></h3>
        <p>sd;l;ljd;l sdkjfdskjlsdkjfldksjflsdkjflsdkjf sldkhfdslkhfjkldhf 
        sdkjhkjh skdjhfkjhkjdhk skdjhkjhkjhoswlhf lkhkljhs kjhkjhkjh 
        sdklhkjh kh</p>
        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>

       </ul>
    </div>
    <div class="moreNews">more news</div>
    <!-- end .textColumnBox -->
    </div> 
```

**CSS**

```
.textColumnBox {

float: left;
width: 640px;

}
.moreNews {

width:630px;
display:block;
clear:both;
background-image: url(/images/footer.jpg);
background-repeat: repeat-x;
text-align: right;
-moz-border-radius: 4px;
border-radius: 4px;
}
   .newscolumns
{
width: 100%; 
  overflow: hidden;
background:red;
}

.newscolumns ul
{
font-size: 12pt; 
  margin:0;
    padding:0;
}

 .newscolumns ul li
{

 width: 270px;
 float: left;
list-style-type: none;
margin:0px 20px;
  padding:0;

 }
.newscolumns ul li:nth-child(odd)
{

  border-right:1px solid black;
 }

.newsBox p {
display:block;
font-size: 0.7em;
line-height: 1.2em;

}
.newsBox h3 {
line-height: 1.2em;
}

.newsBoxFoot {
display:block;
font-size: 0.7em;
line-height: 1.4em;
color:#999;

}
.newsBox a {
text-decoration:none;

}
.newsBox a:hover {
text-decoration:none;
color:#FFF;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:35:08.917

```
I think now i change some codings, now u try it

<html>
<head>test page
 <STYLE type="text/css">
 .textColumnBox {
padding-top:10px;

margin:0px auto;
width: 640px;
padding-bottom: 20px;
}
.moreNews {
padding: 2px 0 5px 0;
width:630px;
display:block;
clear:both;
background-image: url(/images/footer.jpg);
background-repeat: repeat-x;
text-align: right;
-moz-border-radius: 4px;
border-radius: 4px;
}
   .newscolumns
{
width: 100%; 
  overflow: hidden;
vertical-align:top;
}

.newscolumns ul
{
height: 300px;  
font-size: 12pt;    
 vertical-align:top;
 margin:2px;
 padding:0px;

}

 .newscolumns ul li
{
 padding: inherit;
 width: 310px;
 display: block;
 float: left;
 margin-bottom: 5px;
 background: red;
 vertical-align: top;
 }
.newsBox 
{
margin-left: 3px;
margin-bottom: 2px;/*changed from 15*/
padding-right: 20px;
border-right-width: 1px;
border-right-style: solid;
border-right-color: #4E4629;
}
.newsBox p {
display:block;
font-size: 0.7em;
line-height: 1.2em;
padding-bottom:5px;
}
.newsBox h3 {
line-height: 1.2em;
}

.newsBoxFoot {
display:block;
font-size: 0.7em;
line-height: 1.4em;
color:#999;

}
.newsBox a {
text-decoration:none;

}
.newsBox a:hover {
text-decoration:none;
color:#FFF;
}
p
{
    margin:0px;
}
 </STYLE></head>
<body>
 <div class="textColumnBox">
    <h1>
        Latest News</h1>
    <div class="newscolumns">
        <ul>
            <li>
    <div class="newsBox">
        <h3>
            <a href="#">sample text here qwertyuiowertyuiwertyu</a></h3>
        <p>kfdokashfsdhfjhf kjashf kjash fkjsahf saf kjsh fjsakhf kjashf kjsahf kjsahfjksafiksafkashf hsf haskjhf askjhf asjlkh flsakh flskahf lkashf lkashf lksahf lkashf lkashjh as</p>
        <div class="newsBoxFoot">20/12/2011 read more</div>
        <!-- end .newsBox -->
    </div>
</li> 
  <li style="float:right;" >
    <div class="newsBox">
        <h3>
            <a href="#">yasdefghasdfgh sdfgsdfgasdfga dfgsdfgsdf sdfghsdefgh</a></h3>
        <p>Pkjhfsdfh skljfhsakjfh asjklhfasljkfh aslkf salkhf laskhf lskahf 
        lkasflkashfl ksahflk aslfk aslf hsalkf aslkhf laskhf lskahf glksahf 
        lskahf laskhf lksahf asljkf hsalkhflskahflkh&nbsp; sa</p>

        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li>
    <div class="newsBox">
        <h3>
            <a href="#">gdfgfdg dfgfdgfgfdgdfg fdgfdgfdgfd gfdgfdgdfdfr</a></h3>
        <p>;sdljfs;dlj sd;lfj ds;pl;lsdjg;kdlgkdsflblkjg dlskh gkhkljh kjl.h k.j hgjklsdh g kjdsh g,m hcnxogv;isdhgoiunndkn  o;jyhds</p>
        <div class="newsBoxFoot">04/04/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>
 <li style="float:right;">
        <div class="newsBox">
        <h3>
            <a href="#">dfgfdg dfgdfgdfg fddfg</a></h3>
        <p>sd;l;ljd;l sdkjfdskjlsdkjfldksjflsdkjflsdkjf sldkhfdslkhfjkldhf 
        sdkjhkjh skdjhfkjhkjdhk skdjhkjhkjhoswlhf lkhkljhs kjhkjhkjh 
        sdklhkjh kh</p>
        <div class="newsBoxFoot">14/06/2012 read more</div>
        <!-- end .newsBox -->
    </div>
</li>

       </ul>
    </div>
    <div class="moreNews">more news</div>
    <!-- end .textColumnBox -->
    </div>
</body>
</html> 
```

# objective-c - CCLOG 不显示

> ID：11883147
> 
> 赞同：0
> 
> 时间：2012-08-09T12:10:16.733
> 
> 标签：objective-c, ios, cocos2d-iphone, tags, box2d-iphone

我已经编写了一个代码来使用 CCLog 显示当释放移动鼠标时精灵的确切位置。下面是 Sprite.mm 类和 ccTouchesEnded 方法（在 HelloWorldLayer.mm 类中）。CCLog 不显示该消息。

精灵.mm：

```
-(id)addSprite:(CCLayer *)parentLayer
                     inWorld:(b2World *)world
{
PhysicsSprite *aSprite = [PhysicsSprite spriteWithFile:@"spriteIm.png"];

aSprite.tag = 1;
[parentLayer addChild:aSprite];

b2BodyDef spriteBodyDef;
spriteBodyDef.userData = aSprite;
spriteBodyDef.type = b2_dynamicBody;
CGSize s = [CCDirector sharedDirector].winSize;
spriteBodyDef.position = [Convert toMeters:ccp(s.width * 0.25,s.height-400)];
b2FixtureDef fixtureDef;
fixtureDef.density = 0.01;
b2CircleShape circleShape;
circleShape.m_radius = aSprite.contentSize.width/2 / PTM_RATIO;
fixtureDef.shape = &circleShape;

spriteBody = world->CreateBody( &spriteBodyDef );
spriteFixture = spriteBody->CreateFixture( &fixtureDef );

[aSprite setPhysicsBody:spriteBody];

return aSprite;
} 
```

ccTouchesEnd:

```
- (void)ccTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{

if (mouseJoint)
{
    for(b2Body *b = world->GetBodyList(); b; b=b->GetNext()) {
        if (b->GetUserData() != NULL) {
            CCSprite *mySprite = (CCSprite *)b->GetUserData();
            if (mySprite.tag == 1) {
                CGPoint spritePosition = mySprite.position;
                CCLOG(@"the sprite position is x:%0.2f, y:%0.2f", spritePosition.x, spritePosition.y);
            }
        }
    }        

    world->DestroyJoint(mouseJoint);
    mouseJoint = NULL;
}
} 
```

我感觉问题出在我访问标签的方式上，不太确定。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:44:27.673

在我看来，可能会发生两件事。

1.  未到达 CCLOG。这可能是因为 sprite tag = 1 未设置或您要关注的对象未与 b2Body 链接。检查到达 CCLOG 的断点

2.  用 NSLog 替换 CCLOG。如果它有效，那么您的 COCOS2D_DEBUG 未定义，或者为 0。验证您的构建设置。

.

```
\\
/*
 * if COCOS2D_DEBUG is not defined, or if it is 0 then
 *  all CCLOGXXX macros will be disabled
 *
 * if COCOS2D_DEBUG==1 then:
 *      CCLOG() will be enabled
 *      CCLOGERROR() will be enabled
 *      CCLOGINFO() will be disabled
 *
 * if COCOS2D_DEBUG==2 or higher then:
 *      CCLOG() will be enabled
 *      CCLOGERROR() will be enabled
 *      CCLOGINFO() will be enabled 
 */
#if !defined(COCOS2D_DEBUG) || COCOS2D_DEBUG == 0
#define CCLOG(...) do {} while (0)
#define CCLOGINFO(...) do {} while (0)
#define CCLOGERROR(...) do {} while (0)

#elif COCOS2D_DEBUG == 1
#define CCLOG(...) NSLog(__VA_ARGS__)
#define CCLOGERROR(...) NSLog(__VA_ARGS__)
#define CCLOGINFO(...) do {} while (0)

#elif COCOS2D_DEBUG > 1
#define CCLOG(...) NSLog(__VA_ARGS__)
#define CCLOGERROR(...) NSLog(__VA_ARGS__)
#define CCLOGINFO(...) NSLog(__VA_ARGS__)
#endif // COCOS2D_DEBUG 
```

# android - 在 ContentProvider 中对多个 URI 使用 notifyChange 是否正确？

> ID：11883148
> 
> 赞同：1
> 
> 时间：2012-08-09T12:10:17.213
> 
> 标签：android, android-contentprovider

**给定两个 URI：**

1.  在 ContentProvider 的查询方法中用于检索多个事物的 URI：

    内容：//我的授权/事物

2.  在 ContentProvider 的更新方法中使用的 URI 指向单个事物（如果与查询方法一起使用，相同的 URI 会检索事物 123）：

    内容：//my-authority/thing/123

**我的问题：**
在更新方法中两次 notifyChange 是否正确，对于上面的每个 URI 一次？

**是什么让我问：**
如果事物的 ListView 自动与 SQLite 数据保持同步（通过 SimpleCursorAdapter、LoaderManger.LoaderCallbacks 和第一个 URI），如果事物 123 已更新并且仅通知该 ID，则 ListView 不会收到通知/反映更新。

我确定我误解了一些东西，并且有一个更优雅的解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T17:54:30.313

您只需要 notifyChange 第二个 URI（如果更新）。如果插入你 notifyChange 第一个 URI。

# python - 通过 Python 中属性的字符串名称获取对象属性

> ID：11883153
> 
> 赞同：1
> 
> 时间：2012-08-09T12:10:46.503
> 
> 标签：python, django

下面的代码`data_var`是我来自 Django 查询的对象，即 `data_var = Datavar.objects.all()`. 我有数据库字段，如`field1`, `field2`,`field3`等。在下面的代码中，我试图将字段的名称作为字符串获取`var`，然后说`tg.var`，但由于对象没有属性“var”，我得到一个错误：

如果我说它`tg.var`应该被解释为`tg.field1`or `2`or `3`。如何做到这一点？

```
for tg in data_var:
     for col in range(content.no_of_cols):
        var = "field" + str(col)
        tg.var 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:19:02.450

要使用字符串名称获取对象的属性，您应该使用`getattr`内置函数，这样可以将您的代码转换为下一行：

```
for tg in data_var:
     for col in range(content.no_of_cols):
        var = "field" + str(col)
        value = getattr(tg, var) 
```

[gettatr](http://docs.python.org/library/functions.html#getattr)在 Python 文档中进行了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:26:25.660

看起来您正在尝试 PHP 中的变量变量。Python 没有。您需要使用字典或 getattr。

（编辑，因为第一个答案已经涵盖了 getattr）。

您也可以从 dict 中引用它：

```
>>> var = 'field1'
>>> tg.__dict__[var]
'this is field1'
>>> var = 'field2'
>>> tg.__dict__[var]
'this is field2'
>>> getattr(tg, var)
'this is field2' 
```

# objective-c - 如何追踪 CFRetain 崩溃？

> ID：11883154
> 
> 赞同：0
> 
> 时间：2012-08-09T12:10:50.617
> 
> 标签：objective-c, xcode

我一直在努力解决这个崩溃问题，只是不知道从哪里开始。有人可以帮我弄清楚如何使用 Xcode 的工具来正确导航这些信息以找到罪魁祸首吗？我什至不知道这些细节是什么：

![在此处输入图像描述](../Images/96abb6403db7eb3a96e6ffd71477ded5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:30:00.490

xcode 调试的第一步通常是设置异常断点。为此，请选择左侧边栏中的异常选项卡，然后单击底部的加号并选择异常断点。这会有所帮助，因为它会在抛出任何异常时暂停执行，从而更容易追踪。

也就是说，根据您发布的屏幕截图，看起来一个对象被释放了两次，所以这可能没有多大帮助。在整个代码中使用日志语句或附加断点可能会帮助您跟踪问题发生的位置。

屏幕截图中显示的详细信息是已编译的汇编代码，并带有被调用的注释。CFRetain 由 cocoa 在内部使用来释放对象（即在 -release 的实现中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:35:27.330

Instruments 工具应该是您的第一站——尤其是泄漏和分配分析器。

要使用它，请从`Profile`Xcode 的 Product 菜单中选择选项。

您可能想使用`NSZombie`旨在捕获对象过度释放的对象进行调查。

当然，您可能只是传递了一个指针，该指针指向的不是预期的 Core Foundation/Cocoa 对象。

# sql-server-2008 - 使用从文件检索的变量作为 SilkTest 脚本中 SQL 查询中的列值

> ID：11883162
> 
> 赞同：1
> 
> 时间：2012-08-09T12:11:29.110
> 
> 标签：sql-server-2008, silktest

我正在创建一个 SilkTest 脚本，其中将一个字符串存储在一个字符串变量列表中

`List of STRING FaultDn`

此变量从文件中读取字符串。

```
FaultDn = ReadFile("C:\FaultDn.txt") 
```

然后我尝试通过提供此字符串连接到 SQL 数据库以检索值

```
HSQL hstmnt = DB_ExecuteSql (hdbc,  "select Id from openview.dbo.OV_MS_Message where OriginalServiceId like @FaultDn") 
```

但它返回一个错误

*错误：(42000) [Microsoft][SQL Server Native Client 10.0][SQL Server]必须声明标量变量“@FaultDn”。*

您能否帮助在 SilkTest 脚本中更正此 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T14:54:33.790

我认为您需要将查询更改为

```
HSQL hstmnt = DB_ExecuteSql (hdbc,  "select Id from openview.dbo.OV_MS_Message where OriginalServiceId like '{FaultDn}'") 
```

区别在`'{FaultDn}'`。您需要添加花括号，以便 Silk Test 将其解释为变量名称，并添加引号，因为它是 SQL 查询中的字符串文字。

我不确定您是否有意将整个列表传递到查询中，如果您只想传递第一行，则应将其更改为`'{FaultDn[1]}'`.

# string - 导入什么以在 actionscript 上使用字符串类型？

> ID：11883164
> 
> 赞同：0
> 
> 时间：2012-08-09T12:11:42.737
> 
> 标签：string, flash, actionscript, import

我是 actionscript 的菜鸟，从来没有使用过它，但是我将一个 Unity 项目编译为 flash，并且为了进行浏览器<-> javascript 通信，我需要做一个 hackish 的东西，在 .as 代码上提供一个类。统一是在指责它不知道类型字符串：“找不到类型或不是编译时常量：字符串。”

这是我的代码，请注意我什至没有 Flash 编译器，我使用的是 notepad++，所以我处于雷区，不知道该语言并且无法调试它。

```
import flash.external.ExternalInterface;
import flash.system.Security;

import global.SCORMInsideActionScriptFunctions;

public class BrowserCommunicator
{
    public static function callFromJavascript() : void
    {
        trace("Javascript successfully called ActionScript function.");
    }

    // callback to register:
    public static function GetSessionTime() : string
    {
        return SCORMInsideActionScriptFunctions.GetSessionTime()
    }

    //Sets up an ExternalInterface callback and calls a Javascript function.
    public static function TestCommunication() : void
    {
        if (ExternalInterface.available)
        {
            try
            {
                ExternalInterface.addCallback("callFromJavascript", callFromJavascript);

                // mine:
                ExternalInterface.addCallback("GetSessionTime", GetSessionTime);

            }
            catch (error:SecurityError)
            {
                trace("A SecurityError occurred: " + error.message);
            }
            catch (error:Error)
            {
                trace("An Error occurred: " + error.message);
            }

            ExternalInterface.call('calledFromActionScript');
        }
        else
        {
            trace("External interface not available");
        }
    }

    public static function FlushData_ServerToCache() : void
    {
        if (ExternalInterface.available)
        {
            // calls the java function here:
            ExternalInterface.call('flushData');
        }
        else
        {
            trace("External interface not available");
        }
    }

    public static function SubmitData_CacheToServer() : void
    {
        if (ExternalInterface.available)
        {
            ExternalInterface.call('submitData');
        }
        else
        {
            trace("External interface not available");
        }
    }

    public static function SetData_AppToCache( field : string, data : string) : void
    {
        if (ExternalInterface.available)
        {
            ExternalInterface.call('setData', field, data);
        }
        else
        {
            trace("External interface not available");
        }
    }

    public static function GetData_CacheToApp( field : string ) : string
    {
        if (ExternalInterface.available)
        {
            return ExternalInterface.call('getData', field);
        }
        else
        {
            trace("External interface not available");
            return "";
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:17:10.010

只需写*String*而不是*string* :)

# iphone - 线程 1：signal SIGABRT xcode 4.4 ios 5.1 objective-c HELP >.<

> ID：11883169
> 
> 赞同：1
> 
> 时间：2012-08-09T12:12:15.997
> 
> 标签：iphone, objective-c, ios, xcode, sigabrt

好的，所以昨天我遇到了这个错误，结果我只需要耐心阅读更多的书。这次我已经到了项目的结尾，我在不同的地方遇到了这个错误。

我已经隔离了导致问题的代码行，但我不确定问题是什么！

```
htmlString=[htmlString stringByAppendingString: appDelegate.savedNumber]; 
```

调试控制台说：

> 2012-08-09 13:06:47.235 tester[1357:c07] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“*** -[__NSCFConstantString stringByAppendingString:]: nil argument”

```
*** First throw call stack:
(0x14b3022 0xeb3cd6 0x145ba48 0x145b9b9 0x941b92 0x29bd 0xdda1e 0x3c401 0x3c670 0x3c836 0x4372a 0x24c2 0x14386 0x15274 0x24183 0x24c38 0x18634 0x139def5 0x1487195 0x13ebff2 0x13ea8da 0x13e9d84 0x13e9c9b 0x14c65 0x16626 0x20e2 0x2055)
terminate called throwing an exception 
```

有人有想法么？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:20:29.943

这是因为 appDelegate.savedNumber 为 nil（未设置）。为什么它为零，这是另一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:19:30.863

看起来就像写的一样，你将 nil 参数传递给方法。检查您`savedNumber`是否是有效的字符串对象。

# java - JVM PermGen OOM 即使尚未达到 Max

> ID：11883170
> 
> 赞同：2
> 
> 时间：2012-08-09T12:12:16.763
> 
> 标签：java, eclipse

我刚刚在 Eclipse 3.6 开发运行时中获得了 PermGen OOM，原因是我忘记添加所需的启动参数。在注意到我认为还有其他问题之前，我启动了 JVisualVM 并从中获取了以下屏幕截图：

![OOM 彼尔姆根](../Images/1ea78c858ae337ae2251603023a73c5c.png)

Used 几乎等于 Size，但 Max 仍然大一些。如果 Used 接近 Max，而不是 Size，我预计会出现 OOM。我唯一含糊的解释是 JVM 尝试分配 2 倍的已用空间，这比 Max 大。但我仍然会感谢您的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:41:08.127

答案是对的。PermGen 集独立于年轻和年老的 Gen. Max 是所有它们的总和。这是一篇关于它的文章 [http://www.freshblurbs.com/explaining-java-lang-outofmemoryerror-permgen-space](http://www.freshblurbs.com/explaining-java-lang-outofmemoryerror-permgen-space)

jdk 对于 PermGen 的默认最大值为 64 MG。如果您忘记放置 permGen，则最大为 64 MG。

您在此处复制的图片显示 59 MG，几乎已满。这是另一个显示您的 permGen 最大值为 64 MG 的指标

我假设您已经更改了 -XX:MaxPermSize

# objective-c - 如何在 Objective-C 类中使用自定义 getter 方法

> ID：11883172
> 
> 赞同：3
> 
> 时间：2012-08-09T12:12:19.663
> 
> 标签：objective-c, getter-setter

我注意到对于具有自定义 getter 方法的属性

```
@interface MyClass : NSObject
@property (nonatomic,getter=isActive) BOOL active;
@end 
```

两个都

```
BOOL b = myObj.isActive 
```

和

```
BOOL b = myObj.active 
```

可用于获取值。在这两种情况下，`isActive`都会调用该方法。

*   这两种获取财产价值的方式有什么区别吗？
*   什么是“推荐”方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T12:16:37.573

两者没有区别。当您想打破`XYZ`+的既定约定时，您可以使用自定义名称，`setXYZ`以防替代名称从英语语法的角度来看更有意义。例如，

```
if ([myRobot isActive]) {
    ....
} 
```

读起来比

```
if ([myRobot active]) {
    ....
} 
```

您可以将您的属性声明为`isActive`，但是您的 setter 将是`setIsActive`，这听起来比`setActive`.

# c# - 如何在运行时将 Dll (c++) 加载到 C# 应用程序中

> ID：11883173
> 
> 赞同：3
> 
> 时间：2012-08-09T12:12:22.737
> 
> 标签：c#, function, dll, runtime

我在 c++ 文件中有此代码，并编译为 dll。

```
#include "stdafx.h"

#include "WHUU.h"

#include "stdafx.h"

typedef int (__stdcall * Callback)(const int text);

static int x , y= 0;

Callback Handler = 0;

int getX()
{
    return x;
}

void setX(int i)
{
    x = i;
}

void setY(int i)
{
    y = i;
}
int getY()
{
    return y;
}
extern "C" __declspec(dllexport)
void __stdcall SetCallback(Callback handler) {
  Handler = handler;
}

extern "C" __declspec(dllexport)
void __stdcall addX(int x) {
    setX(x);
}

extern "C" __declspec(dllexport)
void __stdcall addY(int y) {
    setY(y);

}

extern "C" __declspec(dllexport)
void __stdcall TestCallback() {
    int z = getX() + getY();
  int retval = Handler(z);
} 
```

我的 c# 应用程序现在必须在运行时加载这个 dll。添加到回调并调用函数。我不想使用课程。我可以加载课程并使用

```
 Type[] types = moduleAssembly.GetTypes(); 
```

但这太过分了！c++ 也不受管理。

我的意思是它太小了！（是的，这是一个例子，但“真实”和这个例子一样大）。

我怎么做？

谢谢你的帮助！

添加：

*   我不喜欢框架（比如 pinvoke / assembly）

*   函数名称/类型是固定的，永远不会改变（想想 driver.dll 读写）

*   此 dll 由客户编写，因此应尽可能简单！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:42:20.813

您也可以通过 p/invoke 执行此操作，例如：

```
[DllImport("unmanaged.dll", CharSet = CharSet.Ansi)]
private extern static int yourFunction(int var1, int var2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:42:22.900

> 我不喜欢框架（比如 pinvoke / assembly）

无论如何，我都会建议 P/Invoke。我认为没有任何合理的选择。也许在托管 C++ 中编写托管包装器，但真的吗？

当您使用 P/Invoke 时，.NET 运行时将动态加载您指定的 DLL（这在您第一次调用该函数时完成）。没有理由先使用 P/Invoke 调用`LoadLibrary`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:57:30.647

您可以使用 P/Invoke 直接调用 dll，也可以为其创建 C++/CLI 包装器。

以下是使用 P/Invoke 的方法：
将编译后的 dll 添加到 C# 项目中，将其“复制到输出目录”属性设置为“始终复制”。并这样称呼它：

```
class Program
{
    [DllImport("cppdll.dll")]
    private static extern void addX(int x);

    [DllImport("cppdll.dll")]
    private static extern void addY(int y);

    static void Main(string[] args)
    {
        addX(5);
        addY(7);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:35:43.817

一种方法是通过 API。在下面的示例中查找 setX 和 getX 方法的示例。

```
 [DllImport("kernel32.dll", CallingConvention = CallingConvention.StdCall)]
    internal static extern IntPtr LoadLibraryEx(string libraryPath, IntPtr fileHandle, int actionFlag);

    [DllImport("kernel32.dll", CallingConvention = CallingConvention.StdCall)]
    internal static extern bool FreeLibrary(IntPtr libraryHandle);

    [DllImport("kernel32.dll", CallingConvention = CallingConvention.StdCall)]
    internal static extern IntPtr GetProcAddress(IntPtr dllPointer, string functionName);

    IntPtr ptr = IntPtr.Zero;
    private delegate void setX (int i);
    private delegate int getX();

    private setX setXDel;
    private getX getXDel;

    public Constructor()
    {
        loadLib();
    }

    public void YourMethod()
    {
        setXDel(100);
        int y = getXDel();
        Console.WriteLine(y.ToString());
    }

    private void loadLib()
    {
        string path = "your dll path";
        ptr = LoadLibraryEx(path, IntPtr.Zero, 0);

        if (ptr == IntPtr.Zero)
            throw new Exception("Cannot load dll.");

        IntPtr addressPtr = GetProcAddress(ptr, "setX");
        setXDel = (setX)Marshal.GetDelegateForFunctionPointer(addressPtr, typeof(setX));

        addressPtr = GetProcAddress(unrarPtr, "getX");
        getXDel = (getX)Marshal.GetDelegateForFunctionPointer(addressPtr, typeof(getX));

    }

    public void Dispose()
    {
        if (ptr != IntPtr.Zero)
        {
            FreeLibrary(ptr);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T07:32:57.293

我使用了 P/Invoke，发布了我自己的原因，其他人不包含回调。但他们是很好的答案！C# 应用程序已使用此[GUI](http://i.stack.imgur.com/hD8Tm.png)。

应用程序的代码是这样的：（注意它是回答技术问题的原型）

```
 public partial class Form1 : Form
        {

        private delegate int Callback(int text);
        private Callback mInstance;   // Ensure it doesn't get garbage collected

        [DllImport(@"C:\Visual Studio 2010\Projects\kalkulatorius\Debug\WHUU1.dll")]
        private static extern void SetCallback(Callback fn);
        [DllImport(@"C:\Visual Studio 2010\Projects\kalkulatorius\Debug\WHUU1.dll")]
        private static extern void addX(int x);
        [DllImport(@"C:\Visual Studio 2010\Projects\kalkulatorius\Debug\WHUU1.dll")]
        private static extern void addY(int y);
        [DllImport(@"C:\\Visual Studio 2010\Projects\kalkulatorius\Debug\WHUU1.dll")]

        private static extern void TestCallback(); 

        private int Handler(int text) 
        {
          textBox3.Text = text.ToString();
          return 42;                       
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
          mInstance = new Callback(Handler); // to set the callback in lib 
          SetCallback(mInstance);            // could also be withhin constructor!

          addX(int.Parse(textBox1.Text)); // other people in this thread posted this correct answer
          addY(int.Parse(textBox2.Text));
          TestCallback();
        }

        public Form1()
        {
          InitializeComponent();
        } 
```

因此，如果您想使用带有函数和回调的 c++ 库（如发布的问题中），您可以使用它。

但是如何更改库？

*   lib 的路径是硬编码的（参见 [dllImport ......]）。但是你可以在文件系统中交换lib。这可能发生在您构建此应用程序之后。
*   如果 lib 不在给定路径上，则会引发异常。因此，如果您的程序想要使用此库，请首先检查该库是否存在于文件系统中。（不包括在这个简单的原型中）
*   因此，要切换功能（swop 驱动程序库等），您将具有相同名称的不同库复制
    到给定路径中。（复制粘贴 - 可能更改名称）

如果您在构建应用程序后从不更改 dll 的接口，则此解决方案的开销最小，而且很好！

# android - 转换为 Dalvik 格式失败，出现错误 1 - 导出 APK

> ID：11883178
> 
> 赞同：18
> 
> 时间：2012-08-09T12:12:34.373
> 
> 标签：android, apk

我想为该项目导出一个apk，但每次导出时我都会收到一条错误消息，提示Conversion to Dalvik format failed with error 1。我之前在处理同一个项目时遇到了这个错误，当我得到它时，我转到项目文件夹并从文件夹 bin 内的文件夹类中删除 jars 但在 Exporting APK 它不起作用 谁能帮帮我？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-09T12:44:52.013

通常，我对“转换为 Dalvik 格式失败并出现错误 1”的经验是您需要清理项目（如果您从菜单 Project -> Clean ... 使用 eclipse 它们）这通常可以解决问题。同样右键单击要导出的项目，然后属性 -> Android 工具 -> 修复项目属性。

如果这对您没有帮助，那么使用终端转到项目路径

```
cd /home/username/your_project_path 
```

然后

```
rm -fr bin/* 
```

注意：您可能需要重新启动 eclipse 或至少选择项目并刷新它（F5）。

希望这对你有帮助，如果仍然没有，请告诉我

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-26T09:46:28.587

我解决了这个问题

1.  转到项目»属性»Java构建路径»库并删除除“Android XY”之外的所有内容。单击确定。
2.  转到项目»清理»清理下面选择的项目»选择您的项目并单击确定。

那应该行得通。

如果您在项目文件夹中的某处有一个 JAR 文件，然后将其添加为 Java 路径库。它没有出现在 Package Explorer 下，所以你不会注意到它，但它确实被计算了两次，导致 Dalvik 错误 1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T01:18:02.260

你们根本不必删除库。

是的，问题是由库引起的。

但！！！如果您需要构建库怎么办？这没有意义。

我遇到了同样的问题，终于得到了解决方案。

在具有 proguard 配置的“proguard-project.txt”文件中添加例外。

像这样

```
-dontwarn android.support.** 
```

就是这样。

1）检查项目中有哪些库。检查包名！不是文件名！请参阅“Android 依赖项”下方的列表。点击“ *** .jar”可以看到jar文件中的包名。

假设你有“aaa.jar”。jar 有“org.jdesktop.application”、“org.jdesktop.swingworker”

```
(Project) > Android Dependencies > aaa.jar > org.jdesktop.application
                                           > org.jdesktop.swingworker 
```

2）只需添加如下

```
-dontwarn org.jdesktop.** 
```

进入（项目）> proguard-project.txt 文件。

# python - (Z3Py) 声明函数

> ID：11883185
> 
> 赞同：6
> 
> 时间：2012-08-09T12:12:58.523
> 
> 标签：python, z3

对于某些给定的结果/x 对，我想在简单的“result=x*t+c”公式中找到 c 和 t 系数：

```
from z3 import *

x=Int('x')
c=Int('c')
t=Int('t')

s=Solver()

f = Function('f', IntSort(), IntSort())

# x*t+c = result
# x, result = [(1,55), (12,34), (13,300)]

s.add (f(x)==(x*t+c))
s.add (f(1)==55, f(12)==34, f(13)==300)

t=s.check()
if t==sat:
    print s.model()
else:
   print t 
```

...但结果显然是错误的。我可能需要找出如何映射函数参数。

我应该如何正确定义函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T14:26:57.783

断言`f(x) == x*t + c`没有为 all*定义*函数。这只是说给*定*的值是。Z3 支持通用量词。但是，它们非常昂贵，并且当一组约束包含通用量词时，Z3 是不完整的，因为问题变得不可判定。也就是说，Z3可能会因为这种问题而回归。`f``x``f` *`x``x*t + c``unknown`*

 *请注意，这`f`本质上是脚本中的“宏”。我们可以创建一个 Python 函数来解决这个问题，而不是使用 Z3 函数来编码这个“宏”。也就是说，一个 Python 函数，给定一个 Z3 表达式，返回一个新的 Z3 表达式。这是一个新脚本。该脚本也可在线获取：[http](http://rise4fun.com/Z3Py/Yoi) ://rise4fun.com/Z3Py/Yoi 这是该脚本的另一个版本，其中`c`and `t`are`Real`代替`Int`：[http ://rise4fun.com/Z3Py/uZl](http://rise4fun.com/Z3Py/uZl)

```
from z3 import *

c=Int('c')
t=Int('t')

def f(x):
    return x*t + c

# data is a list of pairs (x, r)
def find(data):
    s=Solver()
    s.add([ f(x) == r for (x, r) in data ])
    t = s.check()
    if s.check() == sat:
        print s.model()
    else:
        print t

find([(1, 55)])
find([(1, 55), (12, 34)])
find([(1, 55), (12, 34), (13, 300)]) 
```

备注：在 SMT 2.0 前端，可以使用命令定义宏`define-fun`。*

# javascript - 将逗号分隔的字符串转换为 JavaScript 数组

> ID：11883187
> 
> 赞同：1
> 
> 时间：2012-08-09T12:13:13.930
> 
> 标签：javascript, string-parsing

我有这个字符串：

```
"'California',51.2154,-95.2135464,'data'" 
```

我想将它转换成这样的 JavaScript 数组：

```
var data = ['California',51.2154,-95.2135464,'data']; 
```

我该怎么做呢？

我没有 jQuery。而且我不想使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:16:32.240

Try:

```
var initialString = "'California',51.2154,-95.2135464,'data'";
var dataArray = initialString .split(","); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:15:42.337

Use the split function which is available for strings and convert the numbers to actual numbers, not strings.

```
var ar = "'California',51.2154,-95.2135464,'data'".split(",");

for (var i = ar.length; i--;) {
  var tmp = parseFloat(ar[i]);
  ar[i] = (!isNaN(tmp)) ? tmp : ar[i].replace(/['"]/g, "");
}

console.log(ar)
```

Beware, this will fail if your string contains arrays/objects.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:01:28.603

由于您的格式几乎符合 JSON 语法，您可以执行以下操作：

```
var dataArray = JSON.parse ('[' + initialString.replace (/'/g, '"') + ']'); 
```

即添加 '[' 和 ']' 字符作为开头和结尾，并用 '"' 替换所有 "'' 字符。而不是执行 JSON 解析。

# javascript - 将 Chrome 扩展程序更改为 manifest_version 2 需要做什么？我的扩展程序只是在弹出窗口中打开一个 url。

> ID：11883188
> 
> 赞同：0
> 
> 时间：2012-08-09T12:13:14.007
> 
> 标签：javascript, google-chrome, google-chrome-extension, eval

在他的情况下 eval() 的替代方法是什么？

```
<script>
function load() {

    var url = 'index.html';
    if(eval('('+localStorage['isprouser']+')') == true)
    url = 'index.html';

    window.location = url;
}
</script> 
```

我想这是不允许的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:35:19.993

你可以用这个替换 vel 行：

```
localStorage.getItem('isprouser']) 
```

看看你有没有得到什么……

# python - 如何在 python 中计算与 collections.Counter() 的共现？

> ID：11883194
> 
> 赞同：3
> 
> 时间：2012-08-09T12:13:26.587
> 
> 标签：python, collections, counter

我最近了解了[collections.Counter()](https://docs.python.org/2/library/collections.html#collections.Counter)类，因为它是一种简洁（而且快速？？）的计数方法，我开始使用它。

但是我最近在我的程序中发现了一个错误，因为当我尝试使用元组更新计数时，它实际上将其视为一个序列并*更新元组中每个项目的计数，*而不是计算*我插入的次数那个特定的元组*。

例如，如果您运行：

```
import collections
counter = collections.Counter()
counter.update(('user1', 'loggedin'))
counter.update(('user2', 'compiled'))
counter.update(('user1', 'compiled'))

print counter 
```

你会得到：

```
Counter({'compiled': 2, 'user1': 2, 'loggedin': 1, 'user2': 1}) 
```

因此。有没有办法用 Counter() 来计算元组？我可以连接字符串，但这很……丑。我可以使用命名元组吗？实现我自己的非常简单的字典计数器？不知道什么是最好的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:18:20.843

当然：你只需要添加一层间接，即传递`.update`一个带有元组的容器作为元素。

```
>>> import collections
>>> counter = collections.Counter()
>>> counter.update((('user1', 'loggedin'),))
>>> counter.update((('user2', 'compiled'),))
>>> counter.update((('user1', 'compiled'),))
>>> counter.update((('user1', 'compiled'),))
>>> counter
Counter({('user1', 'compiled'): 2, ('user1', 'loggedin'): 1, ('user2', 'compiled'): 1}) 
```

# c# - 控制台窗口一直关闭，即使我输入了其他语句

> ID：11883197
> 
> 赞同：1
> 
> 时间：2012-08-09T12:13:35.717
> 
> 标签：c#, .net

我是编程新手，似乎很传统，我尝试用 C# 创建一个“hello world”程序；但是，一旦我运行程序，它就会关闭。

这是我里面的代码：

```
main()

    console.writeline("hello world");
    console.writeline("enter name");
    console.writeline("where is the frikin console"); 
```

这真的很烦人，我知道这对于其他用户来说可能很简单，但我如何保持窗口打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:14:41.660

在程序结束时使用`Console.ReadLine();`或`Console.ReadKey();`等待返回键或任何键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:19:15.297

您可以构建程序并从命令行运行 exe，这将允许您查看输出。

如果您希望程序继续运行，那么添加 Read() 语句是传统方法，正如其他人已经说过的那样。

如果您只是想在调试中查看它并且不需要或不需要 read 语句，则在调试会话期间在程序末尾放置一个断点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:14:15.870

尝试添加 Console.Read()。您需要以某种方式暂停执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:14:22.503

```
Console.WriteLine("hello world");
Console.WriteLine("enter name");
Console.WriteLine("where is the frikin console");
Console.ReadLine(); 
```

`Console.ReadLine();`在您按下（例如）输入后将关闭控制台。 `Console.ReadKey();`将在下一次按键后关闭控制台

您也可以使用这些方法读取控制台内容

```
Console.WriteLine("hello world");
Console.WriteLine("enter name");
string name = Console.ReadLine();
Console.WriteLine("Your name is: " + name);
Console.ReadLine(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T12:17:42.877

这真的很简单。

在这行代码之后：

```
Console.WriteLine("where is the frikin console"); 
```

你需要添加这个：

```
Console.ReadLine(); 
```

那应该行得通。

控制台关闭的原因是因为你告诉它在屏幕上写一些东西，在它写完你告诉它写的东西后，它会在几分之一秒内自动关闭。如果添加`Console.ReadLine`，控制台将在关闭之前等待您输入内容，例如按键盘上的某个键。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T12:17:10.650

在末尾添加以下行

```
Console.ReadLine(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T12:18:51.577

您可以使用`CTRL`+`F5`打开命令行，在执行代码后，它会显示`Press any key to continue...`. 这比另外添加几行代码更方便。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-09T12:21:07.523

采用

```
Console.ReadLine(); 
```

在您的代码末尾。您遇到此问题是因为程序只是编写消息然后结束，这就是您看不到任何内容的原因。通过添加该行，您可以让程序等待输入内容并且您可以阅读该消息。在此之后，键入一些内容以结束程序。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T14:23:42.923

程序执行完毕后窗口会自动关闭，您需要让它接受一些输入，例如：

添加

```
Console.ReadLine(); 
```

它需要一行输入（直到“\n”）。你的程序会**一直等到**有人按下回车键（他们可以输入任何东西并且程序不会关闭：**直到**你按下回车键。你可以输入“hello world back what's up are you ok?”然后什么都不会发生.)

或者

```
Console.ReadKey(); 
```

这将需要一个输入字符。这将使您的程序等待用户按任意键然后关闭。

# c++ - C++ 容器和 openCL

> ID：11883198
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:13:41.173
> 
> 标签：c++, arrays, containers, opencl

我正在研究一些广泛使用的 C++ 代码`boost::multi_array<double>`。

下一步是移植代码以使用 openCL。由于我对 openCL 很陌生，我不知道应该如何处理`multi_array`. 我应该将其重写为 a`nested-openCL-vector`还是`nested-c-array`.

你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T03:28:33.820

OpenCL 已经存在类似库的提升，您可能需要查看来自 GPU 供应商的以下库

来自 NVIDIA 的 Thurst：Thrust 是一个强大的并行算法和数据结构库。Thrust 为 GPU 编程提供了一个灵活的高级接口，极大地提高了开发人员的工作效率。使用 Thrust，C++ 开发人员只需编写几行代码即可执行 GPU 加速的排序、扫描、转换和归约操作，其速度比最新的多核 CPU 快几个数量级。例如，thrust::sort 算法的排序性能比 STL 和 TBB 快 5 到 100 倍。

AMD 提供的数学库是包含用 OpenCL 编写的 FFT 和 BLAS 函数的软件库，旨在在 AMD GPU 上运行以获取更多信息，请参见此处：http: [//developer.amd.com/libraries/appmathlibs/Pages/default.aspx](http://developer.amd.com/libraries/appmathlibs/Pages/default.aspx)

# algorithm - 随机数之间的关系

> ID：11883200
> 
> 赞同：0
> 
> 时间：2012-08-09T12:13:44.967
> 
> 标签：algorithm, numbers, sequence, series

如果我有一组随机生成的数字（整数），我如何找到它们之间的关系，以便将它们表示为有限序列并开发一种算法，该算法可以在给定一些种子数据的情况下生成序列的任何第 n 项。是否有任何现有的算法或框架或库可以这样做，如果没有，关于如何进行的任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:18:17.847

它取决于用于生成（伪随机）数字的算法。如果你想预测未来的术语，你需要一些过去的术语*和*使用的算法。如果算法在密码学上是安全的，那么你就不走运了。如果不是，那么您很有可能制定出未来的条款。

不久前，我问过[这个](https://crypto.stackexchange.com/questions/2086/predicting-values-from-a-linear-congruential-generator)关于线性同余生成器（通常用于简单应用程序）的问题。它很好地讨论了如何预测该类生成器的术语。

# android - 我在 Froyo (2.2) 上的应用程序出现问题

> ID：11883207
> 
> 赞同：0
> 
> 时间：2012-08-09T12:14:23.530
> 
> 标签：android

我最近发布了我的第一个应用程序（音板），现在收到 Froyo 用户的投诉，虽然该应用程序看起来兼容，但它不能正常工作。

我的应用程序以启动画面开始，然后是一个主菜单，然后启动主要活动，其中有 7 个选项卡。每个选项卡包含大约 20 个声音，包括一个文本视图和 4 个图像按钮。与广告横幅一起，这在一项活动中可达到约 500 次观看。Eclipse 警告我，超过 80 次查看可能会影响性能，但即使是三星 Galaxy Y 等低档手机也能够运行该应用程序。

我为我的应用程序设置的最小 SDK 是 8 级，Froyo，现在在我得到负面反馈并对其进行测试后，我发现，在 Froyo 上，活动没有启动。

对于 Android 2.2，每个活动是否有 80 个视图的固定限制？我在任何地方都找不到这方面的信息。

这是我在开发者控制台中经常看到的错误：

```
java.lang.VerifyError: com.cheftony.psychsoundfree.Nicknames
at java.lang.Class.newInstanceImpl(Native Method)
at java.lang.Class.newInstance(Class.java:1429)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
at android.app.ActivityThread.access$2300(ActivityThread.java:125)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:4627)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:902)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:660)
at dalvik.system.NativeStart.main(Native Method) 
```

我应该怎么办？我正在考虑修改主菜单以根据设备的 android 版本启动不同的活动，即在任何带有 Gingerbread 或更高版本的手机上开始我的常规旧活动并创建一个新活动，其中界面分为几个活动，所以每个活动没有太多视图，这是很多工作，基本上会拆分应用程序并使更新它的工作加倍。

还是我应该排除 Froyo 设备？今天仍然支持 Froyo 有多重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:28:22.523

当我尝试调用仅在高于我的 minSdkVersion 的 SDK 版本中的方法时，我收到了这种错误 (VerifyError)。即使我确保它只在适当的 SDK 版本中被调用。解决方案是使用反射从更高的 SDK 访问方法。

我不确定这是不是你的情况，你怎么看？你在调用这种方法吗？

# django - Efficient handling of long running HTTP connections in an nginx/gunicorn/django web architecture

> ID：11883214
> 
> 赞同：20
> 
> 时间：2012-08-09T12:14:43.093
> 
> 标签：django, performance, web-services, nginx, gunicorn

I am working on a web service implemented on top of [nginx](http://nginx.org/)+[gunicorn](http://gunicorn.org/)+[django](https://www.djangoproject.com/). The clients are smartphone applications. The application needs to make some long running calls to external APIs (Facebook, Amazon S3...), so the server simply queues the job to a job server (using [Celery](http://www.celeryproject.org/) over [Redis](http://redis.io/)).

Whenever possible, once the server has queued the job, it returns right away, and the HTTP connection is closed. This works fine and allows the server to sustain very high load.

```
client                   server                 job server
  .                        |                        |
  .                        |                        |
  |------HTTP request----->|                        |
  |                        |--------queue job------>|
  |<--------close----------|                        |
  .                        |                        |
  .                        |                        | 
```

But in some cases, the client needs to get the result as soon as the job is finished. Unfortunately, there's no way the server can contact the client once the HTTP connection is closed. One solution would be to rely on the client application polling the server every few seconds until the job is completed. I would like to avoid this solution, if possible, mostly because it would hinder the reactiveness of the service, and also because it would load the server with many unnecessary poll requests.

In short, I would like to keep the HTTP connection up and running, doing nothing (except perhaps sending a whitespace every once in a while to keep the TCP connection alive, just [like Amazon S3 does](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadComplete.html)), until the job is done, and the server returns the result.

```
client                   server                 job server
  .                        |                        |
  .                        |                        |
  |------HTTP request----->|                        |
  |                        |--------queue job------>|
  |<------keep-alive-------|                        |
  |         [...]          |                        |
  |<------keep-alive-------|                        |
  |                        |<--------result---------|
  |<----result + close-----|                        |
  .                        |                        |
  .                        |                        | 
```

**How can I implement long running HTTP connections in an efficient way, assuming the server is under very high load (it is not the case yet, but the goal to be able to sustain the highest possible load, with hundreds or thousands of requests per second)?**

Offloading the actual jobs to other servers should ensure a low CPU usage on the server, but how can I avoid processes piling up and using all the server's RAM, or incoming requests being dropped because of too many open connections?

This is probably mostly a matter of configuring nginx and gunicorn properly. I have read a bit about [async workers based on greenlets in gunicorn](http://gunicorn.org/design.html#async-workers): the documentation says that async workers are used by "*Applications making long blocking calls (Ie, external web services)*", this sounds perfect. It also says "*In general, an application should be able to make use of these worker classes with no changes*". This sounds great. Any feedback on this?

Thanks for your advices.

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-09T16:16:43.783

我正在[回答我自己的问题](https://meta.stackexchange.com/questions/17845/etiquette-for-answering-your-own-question)，也许有人有更好的解决方案。

进一步阅读[gunicorn 的文档](http://gunicorn.org/configure.html#contents)，并阅读更多关于[eventlet](http://eventlet.net/)和[gevent](http://www.gevent.org/)的内容，我认为 gunicorn 完美地回答了我的问题。Gunicorn 有一个管理工人池的主进程。每个工作人员可以是同步的（单线程，一次处理一个请求）或异步的（每个工作人员实际上几乎同时处理多个请求）。

同步工作者很容易理解和调试，如果工作者失败，只会丢失一个请求。但是如果一个工作人员被困在一个长时间运行的外部 API 调用中，它基本上是在睡觉。因此，在高负载的情况下，所有工作人员可能最终会在等待结果时进入睡眠状态，并且请求最终会被丢弃。

所以解决的办法就是把默认的worker类型从同步改为异步（选择eventlet或者gevent，[这里比较一下](http://blog.gevent.org/2010/02/27/why-gevent/)）。现在每个worker运行多个[绿色线程](http://en.wikipedia.org/wiki/Green_threads)，每个线程都非常轻量级。每当一个线程必须等待某个 I/O 时，另一个绿色线程就会恢复执行。这称为[协作多任务](http://en.wikipedia.org/wiki/Computer_multitasking#Cooperative_multitasking.2Ftime-sharing)。它非常快，非常轻量级（如果他们正在等待 I/O，单个工作人员可以处理数千个并发请求）。正是我需要的。

我想知道我应该如何更改现有代码，但显然标准 python 模块在启动时由 gunicorn 进行[猴子修补](http://en.wikipedia.org/wiki/Monkey_patch)（实际上是通过 eventlet 或 gevent），因此所有现有代码都可以在不更改的情况下运行，并且仍然可以与其他线程很好地运行。

gunicorn 中有很多参数可以调整，例如使用 gunicorn 的`worker_connections`参数的最大同时客户端数，使用参数的最大挂起连接`backlog`数等。

太好了，我马上开始测试！

# eclipse - Hibernate with JSF in Eclipse tutorial?

> ID：11883216
> 
> 赞同：2
> 
> 时间：2012-08-09T12:14:55.297
> 
> 标签：eclipse, hibernate, jsf, jsf-2

I am new in Hibernate. I want to learn Hibernate using Eclipse. I am using Eclipse Indigo sr2\. I have integrated Hibernate tool in Eclipse. Now I need to start integrate JSF with Hibernate but I failed to find any tutorial or article.

Can any one suggest proper article which can give step by step information to learn Hibernate with JSF in Eclipse?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:17:26.360

试试 jboss 的快速入门解决方案。它们是 jsf 和 hibernate 的一个非常好的入门者：

[https://github.com/jboss-jdf/jboss-as-quickstart](https://github.com/jboss-jdf/jboss-as-quickstart)

# zend-framework - Remove Zend Form error messages

> ID：11883217
> 
> 赞同：1
> 
> 时间：2012-08-09T12:14:58.960
> 
> 标签：zend-framework, zend-form

How to remove Zend Form error mesessages (Value is required and can't be empty) ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:53:10.347

```
$element->setRequired(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T11:33:36.297

你可以试试这个：

```
$yourElement->removeDecorator('Errors'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:34:05.060

您可以像以下示例中的形式覆盖错误消息：

```
 $this->addElement('text', Model_User_Object::USERNAME, array(
        'filters' => array('StringTrim', 'StringToLower'),
        'validators' => array(
            array('notEmpty', true, array(
                    'messages' => array(
                        'isEmpty' => 'YOU CAN WRITE WHATEVER MESSAGE YOU WANT HERE.'
                    )
                )
            )
        ),
        'required' => true,
        'class' => 'input',
        'label' => 'Your username:',
    )); 
```

# eclipse - Adding keybindings to an JFace popup dialog

> ID：11883219
> 
> 赞同：0
> 
> 时间：2012-08-09T12:15:04.187
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp, jface

I am writing an eclipse plugin.I have a JFace dialog which displays a tree. I want to change the contents to the dialog when user presses a certain combination of keys. Like When we press `Ctrl`+`O` in eclipse it displays the quick outline box and it provides a toggle show Inherited Members when we press `Ctrl`+`O` again. How can I implement this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:30:21.687

查看[常见问题解答 如何为我的操作提供键盘快捷键](http://wiki.eclipse.org/FAQ_How_do_I_provide_a_keyboard_shortcut_for_my_action%3F)。

# asp.net - 将文本、图像添加到 asp.net 图表控件

> ID：11883222
> 
> 赞同：1
> 
> 时间：2012-08-09T12:15:11.563
> 
> 标签：asp.net, data-visualization, mschart, linechart

我正在使用 asp.net 图表控件在我的网站上显示图表，下面是它的片段： ![折线图](../Images/2f8dacde3159768e9357d7a59d7b80c3.png)

问题是我想在每个点上添加文本和箭头线，例如在点（10 月 60 日）我想在这一点上写文本：投影最高和箭头图像。是否有可能实现这样的目标，任何建议或帮助将不胜感激，以下是我用来生成此图表的代码：

```
double[] yValues = { 15, 60, 12, 13 };
        string[] xValues = { "September", "October", "November", "December" };

        chart.Width = 500;
        chart.Height = 200;
        chart.BorderSkin.SkinStyle = BorderSkinStyle.FrameThin1;

        ChartArea ca = new ChartArea();
        ca.Name = "Default";
        ca.AxisX.LineColor = System.Drawing.ColorTranslator.FromHtml("#FEFEFE");
        ca.AxisX.LineWidth = 3;
        ca.AxisX.MajorGrid.LineDashStyle = ChartDashStyle.Dash;
        ca.AxisX.MajorGrid.Enabled = false;
        ca.AxisX.MajorTickMark.LineWidth = 2;
        ca.AxisX.LabelStyle.Format = "L";

        ca.AxisY.LineColor = System.Drawing.ColorTranslator.FromHtml("#FEFEFE");
        ca.AxisY.LineWidth = 3;
        ca.AxisY.MajorGrid.Enabled = true;
        ca.AxisY.MajorTickMark.LineWidth = 2;
        ca.AxisY.Title = "yaxis";

        chart.ChartAreas.Add(ca);

        Legend legend = new Legend();
        chart.Legends.Add(legend);
        Series series = new Series("Series1");
        series.IsValueShownAsLabel = false;
        series.MarkerStyle = MarkerStyle.Circle;
        series.BorderWidth = 5;
        series.ChartType = SeriesChartType.Line;

        series.ShadowOffset = 2;
        series.XValueType = ChartValueType.String;
        series.YValueType = ChartValueType.Double;
        series.Font = new System.Drawing.Font("Trebuchet MS", 8);
        series.BorderColor = System.Drawing.ColorTranslator.FromHtml("#33CCFF");
        series.Color = System.Drawing.ColorTranslator.FromHtml("#33CCFF");

        chart.Series.Add(series);
        chart.Series["Series1"].Points.DataBindXY(xValues, yValues);
        chart.DataManipulator.InsertEmptyPoints(1, System.Web.UI.DataVisualization.Charting.IntervalType.Days, "Series1"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:57:12.643

您需要搜索最大的数据点并使用属性

```
datapoint.Label = "projection was highest"; 
```

突出这一点的最简单方法是使用`datapoint.MarkerStyle`属性。你可以画一个箭头，但我认为它不值得麻烦。

# c# - Clearing DataTable while editing DataGrid

> ID：11883229
> 
> 赞同：0
> 
> 时间：2012-08-09T12:15:48.390
> 
> 标签：c#, wpf, datagrid, datatable

I've got a DataTable bound to a WPF (.NET 3.5, WPFToolkit.dll) DataGrid. This is inside a very large client-server application. The server can asynchronously send data to the client "engine"; this data is sent in the form of properties which are set onto my control by the engine.

So, as an example of what I mean, I have a `class MyFunkyDataGrid : DataGrid`. `MyFunkyDataGrid` has a DependencyProperty called `MyFunkyData` which is of type `Dictionary<string, Object>`. Whenever `MyFunkyData` is changed on the server, it is immediately synchronized on the client, and set onto `MyFunkyDataGrid`. When `MyFunkyData` changes, I rip through the dictionary and set the data onto my grid's DataTable.

Of course, when this happens, I first need to **clear** the DataTable of its current data. So I call `dataTable.Clear()`. Normally this works a treat. **BUT** if I am currently editing a cell in MyFunkyDataGrid when the dataTable is cleared I get:

```
System.ExecutionEngineException was unhandled
  Message=Exception of type 'System.ExecutionEngineException' was thrown.
  InnerException: 
```

which crashes my app. I've tried calling `CancelEdit()` on MyFunkyDataGrid, I've tried calling it on the DataRow itself. I've tried calling `RejectChanges()` on the DataTable before I call `Clear()`. No dice.

Has anyone ever seen something like this before?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:41:49.627

我不确定为什么即使在清除数据表之前调用 datagrid.CancelEdit() 也会引发异常。但是在清除数据网格之前可以采取另外两个预防措施，这可能会避免异常：

(1)您可以将selecteditem设置为datagrid的null

(2)可以将datagrid的ItemSource设置为null，而不是datatable，然后清除datatable。

# jquery - Jquery Sliding dynamic List

> ID：11883235
> 
> 赞同：0
> 
> 时间：2012-08-09T12:16:08.680
> 
> 标签：jquery, image, youtube-api, dynamically-generated, sliding

I am using the Piece of code given here :

[http://jsfiddle.net/qsem9/](http://jsfiddle.net/qsem9/) from [scrolling list problem](https://stackoverflow.com/questions/5488099/scrolling-list-problem)

in an image list slider, and it is working nicely , but when I try to fill the list dynamically with youtube thumbnails (also using another code taken from [http://jsfiddle.net/naveen/tqWxc/](http://jsfiddle.net/naveen/tqWxc/) also from, [How to get a youtube playlist using javascript API and json](https://stackoverflow.com/questions/6560311/how-to-get-a-youtube-playlist-using-javascript-api-and-json))

trying to merge the two codes together to show sliding images this will cause the jquery effect to change from scrollTop to jumping or something else but not scrolling at all. I thought the problem in the initial size of the list item that document ready grabbed initially So I manually added one list item to preserve the size. this will slide nicely only the first two images but after that it will start the the jumper sliding. Here is the example

[http://jsfiddle.net/pQR7g/](http://jsfiddle.net/pQR7g/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:49:27.060

尝试修改您的代码并检查一下

[http://jsfiddle.net/pQR7g/3/](http://jsfiddle.net/pQR7g/3/)

# sql - 从具有复合主键的另一个表中插入或更新表

> ID：11883237
> 
> 赞同：4
> 
> 时间：2012-08-09T12:16:09.583
> 
> 标签：sql, sql-server, sql-server-2005

我正在寻找正确的语法和方法来直接从 SQL 中执行以下操作：从具有相同复合主键`TableMain`的数据中插入或更新（如果内部已经存在数据）。`TableA`

两个表都定义为：

```
CREATE TABLE TableA (
[TID0] [int] NOT NULL,
[TID1] [int] NOT NULL,
[language] [nvarchar](2) NOT NULL,
[TID2] [nvarchar](200) NOT NULL,
[text] [nvarchar](max) NULL,
[updatedOn] [datetime] NOT NULL  DEFAULT (getdate())
PRIMARY KEY (
    [TID0],
    [TID1],
    [language],
    [TID2],
)
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY] 
```

`TableA`会定期删除和填充。

`TableMain`作为相同的定义，但将包含更多的数据行，我需要的是从`TableA`into插入从未见过的值`TableMain`，并更新已经存在的行。

我曾经做过这种插入，但我不知道如何处理更新和复合主键：

```
INSERT INTO TableMain 
    SELECT * FROM TableA 
```

编辑：我正在使用**SQL Server 9.00.5000**

编辑：受 MERGE 启发并[模仿它的另一种方式](http://sqlserver-tips.blogspot.fr/2006/09/mimicking-merge-statement-in-sql.html)

```
DECLARE @updatedIDs TABLE(
    [TID0] [int],
    [TID1] [int],
    [language] [nvarchar](2),
    [TID2] [nvarchar](200),
                PRIMARY KEY ([TID0], [TID1], [language], [TID2])  -- as stated by Nikola Markovinović above, thanks
);

-- First update records 
update TableMain 
   set [text]      = source.[text], 
       [updatedOn] = source.[updatedOn] 
       OUTPUT
         inserted.[TID0]
         inserted.[TID1]
         inserted.[language]
         inserted.[TID2]
       INTO @updatedIDs
  from 
       TableMain AS main
       , TableA AS source 
  WHERE    
   TableMain.[TID0]         = source.[TID0] 
   and TableMain.[TID1]     = source.[TID1] 
   and TableMain.[language] = source.[language] 
   and TableMain.[TID2]     = source.[TID2] 

-- And then insert 

insert into TableMain
select *
  from TableA AS source 
 where not exists 
       ( 
      select 1
        from @updatedIDs AS i
       where i.[TID0]     = source.[TID0] 
         and i.[TID1]     = source.[TID1] 
         and i.[language] = source.[language] 
         and i.[TID2]     = source.[TID2] 
       ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:41:57.480

你应该使用[合并](http://technet.microsoft.com/pt-br/library/bb510625.aspx)语句

像这样的东西：

```
merge TableMain  AS target
using TableA as source 
ON <join tables here>
WHEN MATCHED THEN <update>
WHEN NOT MATCHED BY TARGET <Insert>
WHEN NOT MATCHED BY SOURCE <delete> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T13:16:36.723

这是一个您可以用来更新数据的脚本：

```
-- On error transaction is automatically rolled back
set xact_abort on

begin transaction
-- First update records
update TableMain
   set [text]      = source.[text],
       [updatedOn] = source.[updatedOn]
  from TableMain
 inner join TableA source
    on TableMain.[TID0]     = source.[TID0]
   and TableMain.[TID1]     = source.[TID1]
   and TableMain.[language] = source.[language]
   and TableMain.[TID2]     = source.[TID2]

-- And then insert

insert into TableMain ([TID0], [TID1], [language], [TID2], [text], [updatedOn])
select [TID0], [TID1], [language], [TID2], [text], [updatedOn]
  from TableA source
 where not exists
       (
          select *
            from TableMain
           where TableMain.[TID0]     = source.[TID0]
             and TableMain.[TID1]     = source.[TID1]
             and TableMain.[language] = source.[language]
             and TableMain.[TID2]     = source.[TID2]
       )

commit transaction 
```

您可能会重写 not exists() ，`left join ... where TableMain.TID0 is null`好像性能不令人满意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T12:17:52.003

您可以使用 SQLServer 2008 中的[Merge](http://technet.microsoft.com/en-us/library/bb510625.aspx)命令。它允许您将来自另一个数据源的数据合并到您的主数据源中，并在存在键匹配时定义特定行为（并且您可能希望更新您的表）或存在不匹配，您想插入新记录。

[http://blog.sqlauthority.com/2010/06/08/sql-server-merge-operations-insert-update-delete-in-single-execution/](http://blog.sqlauthority.com/2010/06/08/sql-server-merge-operations-insert-update-delete-in-single-execution/)

您可以访问此链接以获取一些代码示例。

# shell - 如何减少 bash 脚本中“echo”的使用？

> ID：11883239
> 
> 赞同：1
> 
> 时间：2012-08-09T12:16:14.563
> 
> 标签：shell, echo

我的 bash 脚本包含以下行：

```
echo $(echo "$STRING_VAR" | cut -d' ' -f 2) >> $FILE 
```

这里我们有两个`echo`电话，但它们真的有必要吗？

我写了它们，因为否则 bash 会首先认为字符串是命令。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:18:57.200

简单地`echo "$STRING_VAR" | cut -d' ' -f 2 >> $FILE`做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:18:59.553

```
echo "$STRING_VAR" | cut -d' ' -f 2 >> $FILE 
```

应该是你所需要的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T15:32:52.047

此外，bash 有方便的“here-string”重定向模式：你根本不需要 echo：

```
cut -d' ' -f2 <<< "$STRING_VAR" >> "$FILE" 
```

# php - 如何在 div 中显示随机选择的图像？

> ID：11883248
> 
> 赞同：1
> 
> 时间：2012-08-09T12:16:53.670
> 
> 标签：php, scandir

我正在尝试显示两个从目录中随机选择的图像

不显示图像，而是显示 img.names

```
$dir    = 'memb_area/captcha/imgs/';
$files = scandir($dir);
$rand_keys = array_rand($files, 2);
echo $files[$rand_keys[0]] . "\n";
echo $files[$rand_keys[1]] . "\n"; 
```

也试过：

```
echo '<img src="memb_area/captcha/imgs">' + 'echo $files[$rand_keys[0]] . "\n";' 
```

并且 - 是否可以在页面上的单独 div 中打印这些图片？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:27:57.050

`+`不是有效的 PHP 连接字符。`.`是。通过使用`+`，您可以有效地将这两个字符串**相加**，当它们转换为整数时，等于`0`.

这一行：
`echo '<img src="memb_area/captcha/imgs">' + 'echo $files[$rand_keys[0]] . "\n";'`

应该是：（更新）
`echo "<img src=\"memb_area/captcha/imgs/".$files[$rand_keys[0]]."\">".PHP_EOL;`

**更新01：**（OP的评论：*但刷新后，两三次后 - 什么都没有显示。下一次刷新 - 显示图像......等等。*）

Scandir [php.net](http://php.net/manual/en/function.scandir.php) (Example #1) 说：

```
Array
(
    [0] => .
    [1] => ..
    [2] => bar.php
    [3] => foo.txt
    [4] => somedir
) 
```

所以，也许你`scandir($foo)`正在返回一个数组，其中有两个键，它们的值是*不可见*的目录。

试试这个代码，让我知道：

```
$dir    = 'memb_area/captcha/imgs/';
$files = scandir($dir);

if($files[0] == ".") unset($files[0]);
if($files[1] == "..") unset($files[1]);

$files = array_values($files); // reset array keys back to 0,1,2..

$rand_keys = array_rand($files, 2);
echo $files[$rand_keys[0]] . "\n";
echo $files[$rand_keys[1]] . "\n";  

echo "<img src=\"memb_area/captcha/imgs/".$files[$rand_keys[0]]."\">".PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:20:56.850

我认为路径可能有错误。
试试这个：
`echo '<img src="memb_area/captcha/imgs/">' + 'echo $files[$rand_keys[0]] . "\n";'`

# core-data - 如何建立两个表之间的关系？

> ID：11883251
> 
> 赞同：0
> 
> 时间：2012-08-09T12:17:02.187
> 
> 标签：core-data

我是核心数据的新手。

我有一个数据模型，其中有两个表和它们之间的 1-N 关系。

应用程序从服务下载所有数据并将数据保存在每个表中。

此外，这些表是相关的，因此想要这样做：

a) 获取满足一定条件的table2的所有元素。

b) 对于 table2 中的每个元素，标识符查找 table1 / 保存 table1 的 id。

c) 我得到了表 1 中符合要求 ID 的项目。

d) 我将表 2 与 1 联系起来。

我没有能力这样做。:(

我不知道这种以这种方式在表之间建立关系的方法是否好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:34:19.520

这有点难以回答。如果您将 Core Data 视为一个 SQL 表，您只会让自己陷入困境。

核心数据不是关于连接和搜索表，而是关于对象图。一个对象与另一个对象有关系，而另一个对象与另一个对象具有反向关系。本质上，您应该做的是：

1.  这是您存储在表 2 中的实体的获取请求，受一个定义您的条件的谓词的约束。
2.  您实际上并不直接在 Core Data 中处理 id。您几乎从不直接处理密钥。
3.  第 1 步返回了一个对象集合，您可以在此基础上运行进一步的谓词来过滤它。
4.  这就是反向关系的用途。

我知道这不能回答你的*实际问题*。我试图让您将您的核心数据存储视为彼此相关的对象的集合，而不是一堆链接的表。

# vba - 将包含指定行数据的最后一列复制到下一个空白列

> ID：11883256
> 
> 赞同：5
> 
> 时间：2012-08-09T12:17:11.037
> 
> 标签：vba, excel

我有一个电子表格，我需要查找其中包含数据的最后一列。然后我需要复制这一列并将其复制到下一个空白列。

有没有办法做到这一点？

我已经设法使用行来做到这一点：

```
lastrowSrc = Sheets("Overview").Range("B" & Rows.Count).End(xlUp).Row 
```

但是，这会将 B12 放入范围内，使用 columns.count 只需放入列的编号，而不是字母

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:26:19.713

要获取工作表中的确切列，请使用此代码。

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LastCol As Long

    Set ws = Sheets("Sheet1")

    '~~> This check is required else .FIND will give you error on an empty sheet
    If Application.WorksheetFunction.CountA(ws.Cells) = 0 Then
        LastCol = 1
    Else
        LastCol = ws.Cells.Find(What:="*", _
                After:=ws.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByColumns, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Column
    End If

    Debug.Print LastCol
End Sub 
```

* * *

**编辑**：这是礼貌@brettdj。您还可以使用范围对象查找最后一列

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LastCol As Long
    Dim rng As Range

    Set ws = Sheets("Sheet1")

    Set rng = ws.Cells.Find(What:="*", _
                After:=ws.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByColumns, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False)

    If rng Is Nothing Then
        LastCol = 1
    Else
        LastCol = rng.Column
    End If

    Debug.Print LastCol
End Sub 
```

* * *

要获取特定行的最后一列，例如第 1 行，请使用此

```
 Debug.Print ws.Cells(1, ws.Columns.Count).End(xlToLeft).Column 
```

ws 是您的相关工作表。

同样对于 Row 看到[这个](https://stackoverflow.com/questions/11169445/error-finding-last-used-cell-in-vba)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T21:46:10.597

我发现有些答案不适用于我的工作表，我的工作表末尾有几行比工作表中的其他行短。提供的代码只给出了工作表最后一行的最后一列。相反，我使用循环代码来查找行中的最后一列，使用 Find 示例来获取工作簿中的最后一行。

```
Sub Sample()
    Dim ws As Worksheet
    Dim CurrRow, RowLastCol, LastRow, LastCol As Long

    Set ws = Sheets("Sheet1")

    '~~> This check is required else .FIND will give you error on an empty sheet
    If Application.WorksheetFunction.CountA(ws.Cells) = 0 Then
        LastCol = 1
    Else
        LastCol = 0
        LastRow = ws.Cells.Find(What:="*", _
                After:=ws.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByRows, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Row
        ' Loop through all the rows of the sheet saving off the highest column count
        For CurrRow = 1 to LastRow
            RowLastCol = ws.Cells(CurrRow, Columns.Count).End(xlToLeft).Column
            If RowLastCol > LastCol Then
                LastCol = RowLastCol
            End If
        Next CurrRow
    End If

    Debug.Print LastCol
End Sub 
```

# c# - 使用泛型创建可重用的 Control 基类

> ID：11883261
> 
> 赞同：3
> 
> 时间：2012-08-09T12:17:24.640
> 
> 标签：c#, winforms, generics, custom-controls

我不知道这是否可能，但这就是我的想法：

```
public class ValidationControl<T> where T : Control, new()
{
    [Browsable(true)]
    [Category("Validation")]
    [DefaultValue(false)]
    public bool Required { get; set; }

    public ValidationControl() { Required = false; }

    public virtual void RunValidation() { ... }
} 
```

然后对于我所有的自定义控件，我可以简单地将通用控件用作可重用的基类：

```
public class ValidationTextBox : ValidationControl<TextBox> { }

public class ValidationComboBox : ValidationControl<ComboBox> { } 
```

我知道我可以使用接口，但是我必须为我制作的每个新控件重新键入/复制和粘贴所需的属性等。此外，我无法以这种方式为 TextBox/ComboBox 覆盖任何虚拟属性/方法。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:26:18.823

继承与使用泛型不同。你想以“泛型”的方式指定你的类需要继承什么，不，那是行不通的。你已经说过了，你不能覆盖任何属性，这是因为你没有从你的 T 继承。

为了使您的控件工作，您**必须**从您的控件类型 (T) 继承。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:23:43.850

> 此外，我无法以这种方式为 TextBox/ComboBox 覆盖任何虚拟属性/方法。这可能吗？

您将无法覆盖 TextBox/ComboBox 中的任何内容。您只能从基类覆盖虚拟方法，在您的示例中，唯一可覆盖的方法是 RunValidation() （ValidationControl 是基类）。

你的类可以包含 TextBox/ComboBox，fe：

```
private T Control; 
```

并打一些电话，但仅此而已。

# asp.net - 在 div 中包装列表项（在中继器中）

> ID：11883262
> 
> 赞同：1
> 
> 时间：2012-08-09T12:17:25.667
> 
> 标签：asp.net, .net, linq, gridview, repeater

我有一个使用 Repeater 控件显示的 Report 对象列表。在 Report 类中有一个 RecipientsList，它是一个字符串列表。我在转发器中有以下代码，以将列表呈现为逗号分隔的列表。

代码工作正常。目前它正在 div 内创建一个字符串（其中有 class="repeaterLine"）

我需要每个字符串位于单独的 div 元素中。应该有与收件人数量一样多的 div 元素。是否可以在**ASP.Net 标记**中实现它（仅）？

中继器内的标记

```
 <div class="repeaterLine">
   <%# String.Join(", ",((ServicesSupportSite.UI.Report)Container.DataItem).RecipientsList)%>
 </div> 
```

报告类

```
public class Report
{
    public int ReportID { get; set; }
    public string Title { get; set; }
    public List<string> RecipientsList { get; set; }
} 
```

**参考**

1.  [https://softwareengineering.stackexchange.com/questions/159211/scenarios-where-linq-is-handy](https://softwareengineering.stackexchange.com/questions/159211/scenarios-where-linq-is-handy)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:26:15.420

您可以使用 LINQ`.Select()`将 RecipientsList 中的字符串包装在`<div>`标签中，如下所示：

```
 <div class="repeaterLine">
   <%# String.Join(", ",((ServicesSupportSite.UI.Report)Container.DataItem).RecipientsList.Select(x => "<div>" + x + "</div>")%>
 </div> 
```

# css - 菜单和图像上的一些调整大小问题

> ID：11883265
> 
> 赞同：0
> 
> 时间：2012-08-09T12:17:41.267
> 
> 标签：css, html, resize

在过去的几天里，我一直在思考和研究一个网站。在调整大小时，我发现该网站做得并不好。我认为从 1024 到 768 及以上，该网站应该看起来不错。

因此，当将下面的页面调整为最小尺寸时，您会看到顶部菜单将被挤压在一起。尽管所有菜单项都有足够的空间。而且我希望图像能够正确调整到窗口大小。

这是链接 [http://bit.ly/NpE9cF](http://bit.ly/NpE9cF)

有人可以帮我给我一些实用的建议吗？我应该使用 jquery 之类的东西来调整大小吗？或者我可以在css中解决这些问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:29:29.163

在 style.css 中，你有一些固定的宽度`ul#primary li a {}`。

将此宽度更改为某个`%`值。并且还添加一些`min-width`，以便在调整大小后宽度不会进一步减小。

改变

```
ul#primary li a {
    display: block;
    float: left;
    margin: 0;
    padding: 20px 20px 11px;
    width: 192px;
} 
```

到

```
ul#primary li a {
    display: block;
    float: left;
    margin: 0;
    min-width: 100px;
    padding: 20px 20px 11px;
    width: 20%;
} 
```

在 style.css 文件中。

# c# - 如何使用 Linq 在 SQL 中搜索类似“where in”的代码集

> ID：11883272
> 
> 赞同：0
> 
> 时间：2012-08-09T12:17:53.517
> 
> 标签：c#, linq

谁能帮助如何使用 linq（sql 中的“where in”）使用关联搜索？

Linq 搜索如下，

```
1\. select * from tablename where code = 'code1'
`string[] numbers = { "one", "two", "three", "four" };

string searchNumber = "two";
var number = from number1 in numbers
                     where number1 == searchNumber
                     select number1;

foreach (var n in number)
    Console.WriteLine(n);

        Console.ReadLine();` 
```

如何使用 LINQ 搜索代码集？

```
2\. select * from tablename where code in ('code1','code2') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:23:08.230

对于第一个答案，请使用此

```
var result = tablename.Where(x => x.code == "code1"); 
```

对于第二个答案使用这个

```
List<string> str = new List<string>(){ "code1" , "code2" };

var result = tablename.Where(x => str.Contains(x.code)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:22:21.503

尝试一些类似的东西。

```
string[] codes = { "code1", "code2" };
var selections = tablename.Where(x => codes.Contains(x.code)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:26:23.740

你需要颠倒你思考这个问题的方式。询问 numbers.Contains(searchNumber)。就像是：

```
var result = from n in numbers
                 where numbers.Contains(searchNumber)
                 select n; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:22:37.450

这取决于你反对什么。如果您使用的是实体框架，那么您将需要查找创建一个 In 语句。如果您只是对 IEnumerable 使用 Linq，则 contains 会做您想做的事。

原因是如果您对数据库执行此操作，则提供程序必须已实现包含。实体框架没有 IIRC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T12:21:17.427

```
string[] searchNumber = {"two","one"};
        var number = from number1 in numbers
                     where searchNumbers.Contains(number1)
                     select number1;

        foreach (var n in number)
        {
            Console.WriteLine(n);
        }

        Console.ReadLine(); 
```

这应该够了吧。

# php - 来自特定 IP 的 API 请求

> ID：11883276
> 
> 赞同：1
> 
> 时间：2012-08-09T12:18:09.533
> 
> 标签：php, api, ip

我正在使用 GoDaddy 的 Ultimate Hosting 包。该帐户安装了静态 IP 和 SSL。现在，当我尝试使用需要静态 IP 的 API 时。但是脚本正在从随机 IP 发送请求。请给我一个方法。

我的脚本

```
$soap_exception_occured = false;

$wsdl_path = 'http://vrapi.sslwireless.com/?wsdl';

$response = '';

ini_set('soap.wsdl_cache_enabled', '0'); // disabling WSDL cache

try {
    $client = new SoapClient($wsdl_path);
    }

catch(SoapFault $exception) {
    $soap_exception_occured = true;
    $response .= '\nError occoured when connecting to the SMS SOAP Server!';
    $response .= '\nSoap Exception: '.$exception;
    } 
```

我正在使用 SOAP。IP绑定可以帮助我吗？在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:26:17.530

假设您使用 curl 的 php 连接到该 API，您应该将每个请求绑定到您的 IP：

```
curl_setopt($ch, CURLOPT_INTERFACE, $myIP); 
```

要将 CURL 绑定到不同的传出网络接口或不同的 IP 地址，只需在执行 CURL 请求之前将 CURLOPT_INTERFACE 设置为适当的值：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:53:39.840

试试这个，让我知道发生了什么

```
$soap_exception_occured = false;
$ipandport = array(
    'socket' => array(
        'bindto' => 'xx.xx.xx.xx:port',
     ),
);
$setip  = stream_context_create(ipandport);

$wsdl_path = 'http://vrapi.sslwireless.com/?wsdl';

$response = '';

ini_set('soap.wsdl_cache_enabled', '0'); // disabling WSDL cache

try {
    $client = new SoapClient($wsdl_path, array('stream_context' => $setip));
    }

catch(SoapFault $exception) {
    $soap_exception_occured = true;
    $response .= '\nError occoured when connecting to the SMS SOAP Server!';
    $response .= '\nSoap Exception: '.$exception;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-02T18:28:23.110

如果没有 file_get_contents，这个线程将是不完整的：

```
$opts = array(
    'socket' => array(
        'bindto' => 'xx.xx.xx.xx:0',
    )
);

$context = stream_context_create($opts);

echo file_get_contents('http://www.example.com', false, $context); 
```

# jquery - jQuery 悬停在 HTML 树上

> ID：11883283
> 
> 赞同：0
> 
> 时间：2012-08-09T12:18:29.573
> 
> 标签：jquery, hover

我有一个标准的 HTML ul 树：

```
<ul id="catTree">
    <li>Header 1 <span>(blah)</span>
        <ul>
            <li>Branch 1 <span>(blah)</span></li>
            <li>Branch2 <span>(blah)</span></li> 
```

...还有一些 jQuery：

```
 $('#catTree li').hover(
        function() {
            $(this).children('span').css('display','inline');
        },
        function() {
            $(this).children('span').css('display','none');
        }
    ); 
```

默认 CSS 隐藏跨度，而 jQuery 显示它们。它工作正常，除了悬停的实际分支之外，每个父级还显示跨度。所以在悬停时，它看起来像：

```
Header 1 (blah)
    Branch1 (blah) 
```

而不是

```
Header1
    Branch1 (blah) 
```

我明白了为什么（因为两个 LI 都悬停了），但我怎么能告诉 jQuery 不要在父母身上触发悬停呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:24:15.377

也许如果你停止传播：

```
$('#catTree li').hover(
        function(e) {
            e.stopPropagation();
            $(this).children('span').css('display','inline');
        },
        function(e) {
            e.stopPropagation();
            $(this).children('span').css('display','none');
        }
    ); 
```

[http://jsfiddle.net/techunter/B5ZwE/](http://jsfiddle.net/techunter/B5ZwE/)

尽管如果您先将鼠标悬停在标题上，然后将鼠标悬停在其子项上，则它不会被视为悬停。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:21:29.453

你可以使用：

```
//Note the selector.
//Only the children li's will be selected
$('#catTree ul > li').hover(
  function() {
    $(this).children('span').css('display','inline');
  },
  function() {
    $(this).children('span').css('display','none');
  }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:33:21.073

花了很长时间思考它，30秒后我在发布后解决了它......

不要悬停在 LI 上（因为父 LI 覆盖了子级），而是悬停在额外的跨度上：

```
<ul id="catTree">
<li><span>Header 1 <span>(blah)</span> </span>
    <ul>
        <li><span>Branch 1 <span>(blah)</span> </span></li>
        <li><span>Branch2 <span>(blah)</span></span></li> 
```

和

```
 $(function() {
    $('#catTree li>span').hover(
        function() {
            $(this).children('span').css('display','inline');
        },
        function() {
            $(this).children('span').css('display','none');
        }
    );

}); 
```

# java - 使用休眠动态创建表

> ID：11883285
> 
> 赞同：0
> 
> 时间：2012-08-09T12:18:40.633
> 
> 标签：java, hibernate, entity, creation

我现在正在学习 Hibernate ORM(v. 3)，我有一个问题。我有一个名为 USERS 的表，使用注释创建：

```
package com.hibernatedb.entities;

import javax.persistence.*;

@Entity
@Table(name = "USERS",uniqueConstraints = {@UniqueConstraint(columnNames={"USER_LOGIN", "USER_EMAIL"})})
public class User {

@Column(name = "USER_LOGIN", length=80, nullable=false)
private String login;

@Column(name = "USER_PASS", length=80, nullable=false)
private String password;
    @Column(name = "USER_EMAIL", length=80, nullable=false)
private String email;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name = "USER_ID", nullable=false)
private Long id;

...
// some getters and setters, toString() and other stuff
... 
} 
```

和一个产品实体：

```
@Entity
@Table(name = "PRODUCTS",uniqueConstraints = {@UniqueConstraint(columnNames={"PRODUCT_ID", "PRODUCT_NAME"})})
public class Product {

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="PRODUCT_ID")
private long id;

@Column(name="PRODUCT_NAME", length=85, nullable=false)
private String name;

@Column(name="PRODUCT_DESCRIPTION", columnDefinition="mediumtext", length=1000)
private String description;

@Column(name="PRODUCT_COST", nullable=false)
private double cost; 
```

所以我的问题是：如何创建一个名为“USER +

> 用户.getId()

BUYS”，其中包含实体（表记录）“用户”中的用户的 2 个外键（USER_ID 和 PRODUCT_ID），***无需*创建原始 SQL 表**，但使用 Hibernate 注释或 XML 映射。所以我想要类似的东西

```
public class TransactionEntityBulider() {
public TransactionEntityBulder(User user)    
     // something that build me "USER + User.getId() BUYS" table and
}
public TransactionEntity getEntity() {
     // something that return a "USER + User.getId() BUYS" table entity
} 
```

我也想看看其他一些方法来解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:43:30.717

我认为休眠不适用于这种用法，因为您必须使用动态映射。Hibernate 提供了静态指定映射的方法（xml 和注释）。

我建议你修改你的方法。将所有“USER_BUY”放在同一个表中通常不应该是有害的。例子 ：

```
@Entity
public class User { 
...
    @OneToMany(cascade=CascadeType.ALL, mappedBy="user")
    List<UserBuys> buys = new ArrayList<UserBuys>(); 
...
}

@Entity
public class Product { ... }

@Entity
public class UserBuys {
  ...

  @ManyToOne
  Product product;

  @ManyToOne
  User user;
} 
```

# java - 从 StringWriter 写入 txt 文件

> ID：11883294
> 
> 赞同：11
> 
> 时间：2012-08-09T12:19:01.233
> 
> 标签：java, file-io, stringwriter

我有一个`sw`由 FreeMarker 模板填充的 StringWriter 变量。填充后`sw`，如何将其打印到文本文件中？

我有一个for循环如下：

```
for(2 times)
{
    template.process(data, sw);
    out.println(sw.toString());
} 
```

现在，我只是输出到屏幕而已。如何为文件执行此操作？我想在每个循环中，我`sw`都会改变，但我希望每个循环中的数据一起附加到文件中。

**编辑：** 我尝试了下面的代码。当它运行时，它确实显示`file.txt`已更改，但是当它重新加载时，文件中仍然没有任何内容。

```
sw.append("CheckText");
PrintWriter out = new PrintWriter("file.txt");
out.println(sw.toString()); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T12:23:37.400

怎么样

```
FileWriter fw = new FileWriter("file.txt");
StringWriter sw = new StringWriter();
sw.write("some content...");
fw.write(sw.toString());
fw.close(); 
```

并且您也可以考虑使用可以直接传递的输出流，`template.process(data, os);`而不是先写入 StringWriter 然后再写入文件。

查看 API-doc`template.process(...)`以了解是否有这样的工具可用。

# 回复 2

`template.process(Object, Writer)`也可以采用 FileWriter 对象，witch 是 Writer 的子类，作为参数，所以你可能可以做这样的事情：

```
FileWriter fw = new FileWriter("file.txt");    
for(2 times)
{
    template.process(data, fw);
}
fw.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:27:39.387

您可以使用许多不同的流来写入文件。

我个人喜欢在`PrintWriter` [这里](http://www.google.com/url?http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)工作 您可以标记附加到 FileWriter 中（以下示例中为 true）：

```
try {
    PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("outfilename", true)));
    out.println(sw.toString());
    out.close();
} catch (IOException e) {
    // Do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:22:03.960

为什么不使用[FileWriter](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)？

在循环之前打开它并生成所需的输出。当您写入 FileWriter 时，它会附加到缓冲区并在`close()`

请注意，您可以在*覆盖*或*追加*模式下打开 FileWriter，因此您可以追加到现有文件。

这是[一个简单的教程](http://tutorials.jenkov.com/java-io/filewriter.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-24T16:18:10.777

如果您不介意使用 Apache commons IO ：

```
FileUtils.write(new File("file.txt"), sw.toString(), /*append:*/ true); 
```

# php - Web 服务器上的文件重命名失败

> ID：11883297
> 
> 赞同：1
> 
> 时间：2012-08-09T12:19:02.270
> 
> 标签：php, permissions

我有以下脚本在本地运行良好：

```
 <?php

//Report all errors
error_reporting(E_ALL);

if ($handle = opendir('instance/system/application/images/dir/testimages/')){

    while (false !== ($fileName = readdir($handle))){
        $newName = str_replace(" ", "_", $fileName);
        rename($fileName, $newName);
    }

    echo "All files have been renamed";
    closedir($handle);
}
?> 
```

但是，在 Web 服务器上运行时，出现以下错误：

警告：rename(.,.) [function.rename]: Permission denied in C:\inetpub\vhosts\domain.com\httpdocs\rename.php on line 10

知道如何解决这个问题吗？

干杯

笔记：

我正在使用 IIS7 和 Windows 服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:07:00.530

几件事：

在 Windows 中，转到要重命名文件的目录，右键单击，然后查看文件夹和其中文件的权限。无论进程正在运行，Web 服务器都需要具有修改这些文件或在目录中创建新文件的权限。

其次，更微妙的是——我认为根本原因是一个错误。在[PHP 手册](http://uk3.php.net/manual/en/function.rename.php)中，有一条注释建议重命名会将文件放在当前工作目录中，除非您在“to”参数中指定完整目录路径。因此，如果您尝试将“c:\instance/system/application/images/dir/testimages/banana pic.jpg”重命名为banana_pic.jpg，您当前的代码会将其写入当前工作目录——可能是php.exe - 这将失败。

我会尝试指定要放置重命名文件的文件夹，看看是否可行...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:22:33.610

注意：此注释不适用于 Windows 服务器。当我发表评论时，我没有意识到这一点。这适用于linux，而不是windows。

您没有编辑图像的权限，因此需要 chmod() 文件：

chmod() 函数更改了文件的权限，因此您可以重命名它。“777”意味着任何人都可以（在一毫秒内）更改、读取和执行文件。然后你把它写回“644”，这样任何人都可以读取，但只有你可以更改文件。第二步是为了安全。您不希望每个人都可以编辑和执行服务器上的文件。

```
<?php

//Report all errors
error_reporting(E_ALL);

if ($handle = opendir('instance/system/application/images/dir/testimages/')){

    while (false !== ($fileName = readdir($handle))){
        $newName = str_replace(" ", "_", $fileName);
        chmod($fileName, 777);
        rename($fileName, $newName);
        chmod($newName, 644);
    }

    echo "All files have been renamed";
    closedir($handle);
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:23:04.367

设置要重命名为 777 的文件的权限。
在文件管理器中，例如 filezilla，右键单击文件并设置权限。
或者只是谷歌：设置服务器上文件的权限。
您也可以通过 PHP 尝试：http: [//php.net/manual/en/function.chmod.php](http://php.net/manual/en/function.chmod.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:32:28.477

为了重命名或 chmod 文件，您需要有权执行此操作。这意味着该文件应该由网络服务器进程拥有，或者应该具有允许任何人更改它的适当模块（如 777）

# events - 在事件驱动架构中为用户提供即时响应

> ID：11883301
> 
> 赞同：2
> 
> 时间：2012-08-09T12:19:19.620
> 
> 标签：events, architecture, nservicebus, eda

我已经阅读了很多关于事件驱动架构的内容，这对我来说很有意义，但是给用户即时反馈的问题让我感到困惑。

假设有一个服务（'EmployeeService'）包含所有员工的列表。创建员工的业务逻辑位于此服务中。

另一个系统的 UI 使用此服务。要求是（无论您是否喜欢）它有一个员工网格，以及一个显示表单的“添加员工按钮”，当您提交表单时，它会将您返回到新员工所在的网格它。网格显示由服务计算的派生字段（这很重要！）。

传统上，在提交时，我会显示一个加载屏幕，同步发送一个 WCF 请求来注册员工，并在完成后转发到网格（现在肯定会有新员工）。

使用 EDA，在提交时，我会“触发并忘记”一个注册用户的命令 - 但是然后呢？我可以转发到网格，但有可能新员工可能还不在那里？假设一切正常，我可以手动添加到网格中，但是如何显示服务计算的派生数据？或者，如果尚未创建“新员工待定图形”，我可以在网格上显示它，然后让页面每隔几秒检查一次，直到它有？

这是一个常见的场景，那么常见的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:59:42.233

您可以在发送命令时注册回调并阻止直到命令完成。

如果您已下载 NServiceBus 包，只需参考 AsyncPagesMvc3 示例解决方案。它有一个你正在寻找的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T21:15:06.767

如果您`EmployeeService`是 SOA 服务，那么 Add Employee Button 也属于 EmployeeService。用户界面很简单，是多种服务的组合。您可以在处理员工创建和计算的客户端上本地部署一部分`EmployeeService`（如果计算不是一个复杂的计算）。

例如：

```
public class AddEmployeeView
{
   public IBus Bus { get; set; }    

   public void AddNewClicked() {
        // async calculate
        // store directly in the employee service database
        // or dispatch command internally
        // refresh employee list as the service is the only owner of that data
        Bus.Publish<NewEmployeeAdded>(m => { });
   }
} 
```

所以以上`AddEmployeeView`属于`EmployeeService`. 独自一`EmployeeService`人知道如何计算和存储新员工（甚至在自己的数据库中），并且是事件的唯一合乎逻辑的发布者`NewEmployeeAdded`。这样就消除了您的复杂性。

# excel - 如果列中的数值因行而异（每两 行比较），则将行复制到新工作表

> ID：11883303
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:19:25.237
> 
> 标签：excel

我有两个表组合在一起，在每个奇数编号行（1、3、5....633）中，它包含我的主表的值（在我所附的屏幕截图中以红色显示）。

EVEN 行来自需要更新的 USER 表（在我的屏幕截图中为蓝色）。

B 列中的数字字符串是我用于比较值的键值。对于 ODD 行中与 EVEN 行中与其下方的数值不同的每个数值，我希望将该 ODD 行（红色）复制到新工作表中。如果您注意到 A 列是每两行重复的数值（这是一个贷款编号，并且该记录需要使用 B 列中不同的数值进行更新）......这将是一个项目，一旦所有区分行被识别。

例如，在屏幕截图中，第 359、361、363 行等将被复制到新工作表，因为其下方偶数行的 B 列中的值不同

**截屏**

![在此处输入图像描述](../Images/e3d19b5ee5c38261d293b9e107e79fb9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:20:15.987

您是否希望使用公式、VBA 手动执行此操作？如果您熟悉 VBA，我建议您通过以下方式使用宏记录器：

1.  添加一个公式来检查奇数/偶数值`=OR(B1=B2,MOD(ROW(),2)=0)`（这个公式将只返回`FALSE`奇数行，其中下一行的值不同）
2.  过滤`FALSE`
3.  选择可见（过滤的）单元格
4.  将单元格复制并粘贴到新工作表中

我希望这有帮助。让我们知道什么有效！

# recursion - Mathematica 中的 for 递归函数不起作用

> ID：11883304
> 
> 赞同：1
> 
> 时间：2012-08-09T12:19:28.477
> 
> 标签：recursion, for-loop, wolfram-mathematica

为什么这个递归函数不起作用？

**代码：**

```
Clear[i];
Clear[v];
final= 4;

Recursion = Function[{v},
   For[i = 1, i <= 2, i++,
      Print["Current level ", v ];
      Print["Try: ", i];
      If[v == final,
         Print["End"];, 
         Recursion[v + 1]; (*else-case*)
      ];
      Print["Back! i:", i];
   ];
]

Recursion[1]; 
```

**出去：**

0：当前级别 1
1：尝试：1
2：当前级别 2
3：尝试：1
4：当前级别 3
5：尝试：1
6：当前级别 4
7：尝试：1
8：结束
9：返回！i:1
10：当前级别 4
11：尝试：2
12：结束
13：返回！i:2
14：回来！i:3
15：回来！i:4
16：回来！我：5

**高跟鞋**

在第 14 行，“i”应该是 =2，当前级别：3 并尝试：2.. 然后 i=1，然后 i=2.. 就像二叉树一样。

为什么会这样？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:44:26.550

您的迭代器`i`在递归内递增，这就是为什么它计数为 5，高于其设置的限制 2。

您可以创建`i`一个函数，`v`使其在每个递归中单独运行，即

```
final = 4;
Recursion = Function[v,
   For[i[v] = 1, i[v] <= 2, i[v]++,
    Print["Current level ", v];
    Print["Try: ", i[v]];
    If[v == final, Print["End"], Recursion[v + 1]];
    Print["Back! i[", v, "]:", i[v]]]];
Recursion[1] 
```

这应该使您更容易看到正在发生的事情，尽管我认为当您*确实*看到它在做什么时，您将需要重组您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T07:23:08.800

正如 Chris 所说，您需要`i`在函数内进行本地化，但我建议您使用`Module`to localize `i`。 `v`已`Function`自行本地化，因此您不需要`Clear`. 此外，请避免以大写字母开头的用户函数名称，因为按照惯例，这些名称是为系统函数保留的。

```
final = 4;

recursion =
  Function[{v},
   Module[{i},
    For[i = 1, i <= 2, i++,
     Print["Current level ", v];
     Print["Try: ", i];
     If[v == final, Print["End"], recursion[v + 1]];
     Print["Back! i:", i];
  ]]];

recursion[1]; 
```

除此之外，问题似乎不需要`For`并且最好用`Do`. 此外，您可能希望选择不同的结构：使用`DownValues`(meaning`f[x_] := ...`而不是`f = Function[...]`) 定义的函数，或`Function`using `Slot`( `#`) where`#0`可用于递归。我将为您说明这两种方法。

### 向下值

```
recursion2[v_Integer] :=
  Do[
   Print["Current level ", v];
   Print["Try: ", i];
   If[v == final, Print["End"], recursion2[v + 1]];
   Print["Back! i:", i],
   {i, 2}
  ] 
```

### 纯函数`Slot`

这里`#`（也写成`#1`）表示函数的单个参数，`#0`用来表示函数本身。查看[`Slot`](http://reference.wolfram.com/mathematica/ref/Slot.html)更多。

```
recursion3 =
 Do[
   Print["Current level ", #];
   Print["Try: ", i];
   If[# == final, Print["End"], #0[# + 1]];
   Print["Back! i:", i],
   {i, 2}
 ] &; 
```

# javascript - 获取图像宽度的最早事件

> ID：11883306
> 
> 赞同：4
> 
> 时间：2012-08-09T12:19:40.687
> 
> 标签：javascript, jquery, css, javascript-events

因此，如果图像和 s 超过阈值宽度，我有一些糟糕的 JavaScript 将`<object>`它们放在页面上。它还检查某些类尚未被手动应用。

```
$('img,object').bind('load', function() {
    w = $(this).width();

    if (w > 400 && !( $(this).hasClass('inlineimage') | $(this).parent().hasClass('inlineimage') ))
        $(this).css('margin', '10px ' + (parseInt((800-w)/2)-30) +'px');
}); 
```

这太可怕了，但这背后的含义本来就很理智。CMS 并不容易指定对齐方式，并且开发它以允许这将花费大量时间远离其他工作。客户端破解有效。

唯一的问题是 JS 等到整个图像加载完毕。显然，这意味着在较慢的网络上，页面加载，图像开始加载，一段时间后图像就位。丑陋的。

但是浏览器似乎在*开始下载*图像时就知道图像的宽度。我真的很想加入这个事件并解决这个视觉错误。

当然，如果有一种 CSS 方法可以解决这个问题，我也对此持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:52:38.790

在支持它的浏览器中，您可以轮询自然维度：

```
var interval = setInterval( function() {
    if( img.naturalWidth ) {
        clearInterval(interval);
        console.log( "Natural available: "+ (new Date - now );
        console.log( img.naturalWidth, img.naturalHeight );
    }
}, 0 ); 
```

在未缓存图像的演示中[，我得到：](http://jsfiddle.net/cReAn/5/)

```
Natural available: 782
62 71 
Loaded: 827 
```

所以实际尺寸在加载事件前 50 毫秒可用。不幸的是，在 IE 中，就绪状态`"loading"`并不能保证真实的尺寸。

在每次测试之前更改图像的查询字符串以确保未缓存。

这是关于自然尺寸的 whatwg 链接：http: [//www.whatwg.org/specs/web-apps/current-work/multipage/embedded-content-1.html#dom-img-naturalwidth](http://www.whatwg.org/specs/web-apps/current-work/multipage/embedded-content-1.html#dom-img-naturalwidth)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T09:31:16.643

```
var span = document.getElementById('span'); // The parent span

var check = function (){
    if(span.offsetWidth > 0){
        console.log('Width while loading', span.offsetWidth);
    }
    else{
       setTimeout(check, 100);
    }
};
check(); 
```

​</p>

[演示](http://jsfiddle.net/B8ncn/1/)。这应该首先显示控制台中的宽度，然后是加载后的宽度。只要图像没有被缓存。（如果演示不适用于某人，请尝试将`hoo`图像 URL 的部分更改为其他任何内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T23:58:07.433

为了这个仍然在最新的浏览器上工作，我拼凑了一个尽力而为的蛮力。它在两次尝试之间等待 500 毫秒并检查图像以查看当前运行的宽度是否与上次尝试的宽度相同。

只要图像的宽度在两次连续传递中相同，我们就会运行居中代码。

这使用数组来跟踪事物，因此我们不会经常强奸 DOM，也不会查询不适用的项目（因为它们已经被处理或排除）。

* * *

```
attempts = 0;
arr = [];
$.each($('img,object').not('inlineimage'), function(){
    arr.push([this, -2, $(this).width()]);
});

checkImgs = function() {
    attempts++;
    newarr = []
    $.each(arr, function(){
        if ($(this[0]).parent().hasClass('inlineimage'))
            return;
        w = $(this[0]).width();
        this[1] = this[2];
        this[2] = w;
        if (this[1] != this[2])
            return newarr.push(this);

        // We know this image is loaded enough now - we can do things!
        if (w >= 400)
            $(this[0]).css('margin', '10px ' + (parseInt((800-w)/2)-30) +'px');
    });

    arr = newarr;
    if (arr.length && attempts < 6)
        setTimeout(checkImgs, 500);
}
setTimeout(checkImgs, 500); 
```

它并不漂亮，但它似乎既能有效地工作（CPU 受到我之前的一些尝试的影响）又能很快地工作（缓存的图像在 500 毫秒内就位）。

# iphone - 单击时突出显示表格视图单元格，而不是在发布时

> ID：11883307
> 
> 赞同：0
> 
> 时间：2012-08-09T12:19:43.343
> 
> 标签：iphone, ios, uitableview

我有一个包含项目列表的表格视图。当我单击其中一项时，我希望突出显示背景。我的代码可以正常工作，但颜色会在发布时发生变化，而不是在点击本身上。当用户点击单元格而不是当他/她释放它时，如何突出显示？

这是我的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    // Navigation logic may go here. Create and push another view controller.

    Help_Cell *cell =(Help_Cell*) [tableView cellForRowAtIndexPath:indexPath];

    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    UIView *v=[[UIView alloc] initWithFrame:cell.frame];

    v.backgroundColor=[self colorForHex:[appDel.appColorSettings objectForKey:@"cellColor2"]];

    cell.backgroundView=v;

    cell.title.textColor=[self colorForHex:[appDel.appColorSettings objectForKey:@"cellColor1"]];
} 
```

我希望它像按钮一样发生。除此之外还有`onClick`UITableView 或 UITableViewCell 的方法`didSelectRowAtIndexPath`吗？

**编辑**

这是我的代码`cellForRowAtIndexPath`

```
-(void)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    Help_Cell *cell =(Help_Cell*) [tableView cellForRowAtIndexPath:indexPath];

    cell.selectionStyle=UITableViewCellSelectionStyleNone;

    UIView *v=[[UIView alloc] initWithFrame:cell.frame];

    v.backgroundColor=[self colorForHex:[appDel.appColorSettings objectForKey:@"cellColor2"]];

    cell.selectedBackgroundView=v;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:22:33.463

在创建单元格时，在 cellForRowAtIndexPath 中，编写以下代码：

```
UIView *v=[[UIView alloc] initWithFrame:cell.frame];
v.backgroundColor = [self colorForHex:[appDel.appColorSettings objectForKey:@"cellColor2"]];
    cell.selectedBackgroundView = v; 
```

无需在 didSelectRow 方法中编写任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:28:31.133

您可以将此视为选项

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

[tableView selectRowAtIndexPath:indexPath.row animated:YES scrollPosition:UITableViewScrollPositionTop];

} 
```

# wpf - 当应用程序在后台运行时需要运行下载

> ID：11883308
> 
> 赞同：2
> 
> 时间：2012-08-09T12:19:43.587
> 
> 标签：wpf, windows-phone-7, silverlight-4.0

我已经在我的应用程序中下载了 300 张图像，并使用来自服务器的 http 请求将其存储在隔离存储中。我们面临的问题是当通过按 Windows 按钮或任何其他方式从应用程序中导航出来时。下载停止。即使应用程序进入后台，我们也需要连续运行下载而不会出错。请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:15:53.240

看看[后台文件传输 API](http://msdn.microsoft.com/en-us/library/hh202955%28v=vs.92%29.aspx)。它允许您通过 HTTP 将一个或多个文件上传或下载排队，这些文件将在后台执行，即使应用程序不再在前台运行。

# java - android socket 应用程序在模拟器上运行良好，但在 android 设备上崩溃

> ID：11883310
> 
> 赞同：2
> 
> 时间：2012-08-09T12:19:50.093
> 
> 标签：java, android, sockets, serversocket

我遇到了一个非常不寻常的问题，因为我的应用程序在模拟器上运行良好，其中我使用 java 套接字编程将 android 设备与服务器 pc 连接..但是当我在我的 android 手机中安装我的 .apk 文件时它会崩溃.. .它没有与我的服务器PC连接....请提出一些解决方案为什么会发生这种情况...我在这里发布我的套接字代码...

```
try {
        socket = new Socket(InetAddress.getByName("vivek-PC")
                .getHostAddress(), 8888);

        dataOutputStream = new DataOutputStream(socket.getOutputStream());
        dataInputStream = new DataInputStream(socket.getInputStream());
    } catch (UnknownHostException e) {
        // textIn.setText("Button Clicked" + e);
        e.printStackTrace();
    } catch (IOException e) {

        e.printStackTrace();

    } 
```

我已经尝试了两种方式来放置主机名以及我的服务器IP地址bt相同的结果我得到/..在模拟器上工作正常并在设备上崩溃......请尽快回复..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:56:06.653

在您的设备上下载 android 终端模拟器并尝试使用您的 pc ip 地址 ping 您的 PC。如果成功，则将您的代码替换`InetAddress.getByName("vivek-PC") .getHostAddress()`为服务器 PC 的 IP 地址。希望它会帮助你..如果你仍然面临任何问题，那么请让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:28:02.643

我想您已经通过 USB 将手机连接到您的 PC...
我想打开一个您需要的插座：
`uses-permission android:name="android.permission.INTERNET`
您这样做了吗？
一个好主意是下载终端仿真器并尝试从手机 ping 您的 PC。
您还必须注意，模拟器的地址范围与手机不同。

# c# - NHibernate Query帮助，查询子集合的子值

> ID：11883312
> 
> 赞同：0
> 
> 时间：2012-08-09T12:19:58.317
> 
> 标签：c#, .net, nhibernate

我有一个映射对象，如下所示

```
Person
|- List of Countries 
|  |- Person ID
|  |- Country ID
|  |- List of States
|  |   |- State ID 
```

现在我需要编写一个查询，返回所有 stateID 为 2 的人

您将如何通过 nhibernate 中的 Query 调用返回它？

session.Query().Where(t=>t.Countries.States.ID == 2) 是我想要做或结束的事情，但不知道如何完成它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:07:58.813

您可以使用 linq 进行如下操作

```
var persons = (from person in session.Query<Person>()
               from country in person.Countires
               from state in country.States
               where state.ID == 2
               select person).ToList() 
```

# python - Python - 函数/参数元组列表

> ID：11883319
> 
> 赞同：6
> 
> 时间：2012-08-09T12:20:32.847
> 
> 标签：python, list, function, arguments, tuples

```
def f1(n): #accepts one argument
    pass

def f2(): #accepts no arguments
    pass

FUNCTION_LIST = [(f1,(2)), #each list entry is a tuple containing a function object and a tuple of arguments
                 (f1,(6)),
                 (f2,())]

for f, arg in FUNCTION_LIST:
    f(arg) 
```

在循环的第三次循环中，它尝试将一个空的参数元组传递给一个不接受任何参数的函数。它给出了错误`TypeError: f2() takes no arguments (1 given)`。前两个函数调用正常工作——传递的是元组的*内容，而不是元组本身。*

摆脱有问题的列表条目中的空参数元组并不能解决问题：

```
FUNCTION_LIST[2] = (f2,)
for f,arg in FUNCTION_LIST:
    f(arg) 
```

结果`ValueError: need more than 1 value to unpack`。

我也尝试过迭代索引而不是列表元素。

```
for n in range(len(FUNCTION_LIST)):
    FUNCTION_LIST[n][0](FUNCTION_LIST[n][1]) 
```

`TypeError`这在第一种情况下给出了相同的结果，`IndexError: tuple index out of range`当列表的第三个条目是`(f2,)`.

最后，星号符号也不起作用。这次它在调用时出错`f1`：

```
for f,args in FUNCTION_LIST:
    f(*args) 
```

给`TypeError: f1() argument after * must be a sequence, not int`.

我已经没有东西可以尝试了。我仍然认为第一个应该工作。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T12:23:42.803

您在此代码段中的评论显示了与此上下文相关的误解：

```
FUNCTION_LIST = [(f1,(2)), #each list entry is a tuple containing a function object and a tuple of arguments
                 (f1,(6)),
                 (f2,())] 
```

表达式`(2)`and`(6)`不是元组——它们是整数。您应该使用`(2,)`and`(6,)`来表示您想要的单元素元组。修复此问题后，您的循环代码应如下所示：

```
for f, args in FUNCTION_LIST:
    f(*args) 
```

有关语法的解释，请参阅Python 教程中的[Unpacking Argument Lists 。](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)`*args`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T12:24:21.637

问题是这样的符号：

```
(6) 
```

计算为整数值，你需要元组，所以这样写：

```
(6, ) 
```

你的星号符号会成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:23:25.837

尝试通过 `*()`而不是`()`. 该`*`符号告诉python解包它后面的迭代，因此它解包空元组并且什么都不传递给函数，因为元组是空的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T14:27:02.507

作为记录，我后来发现的一个不错的选择是使用`functools.partial`. 下面的代码做了我想做的事情：

```
from functools import partial

def f1(n): #accepts one argument
    pass

def f2(): #accepts no arguments
    pass

FUNCTION_LIST = [partial(f1,2), #each list entry is a callable with the argument pre-ordained
                 partial(f1,6),
                 partial(f2)] #the call to partial is not really necessary for the entry with no arguments.

for f in FUNCTION_LIST: f() 
```

# ios - AVCam 库捕获图像保存

> ID：11883327
> 
> 赞同：2
> 
> 时间：2012-08-09T12:21:03.160
> 
> 标签：ios, avcam

嗨，我正在使用 AVCam Liberary 进行自动图像捕获。我不想将图像保存在照片库中，我想将图像保存在文档目录中。它保存了图像，但是当我加载此图像时出现问题，无法访问。

```
 - (void) captureStillImage
    {
        AVCaptureConnection *stillImageConnection = [AVCamUtilities connectionWithMediaType:AVMediaTypeVideo fromConnections:[[self stillImageOutput] connections]];
        if ([stillImageConnection isVideoOrientationSupported])
            [stillImageConnection setVideoOrientation:orientation];

        [[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:stillImageConnection
                                                             completionHandler:^(CMSampleBufferRef imageDataSampleBuffer, NSError *error) {

                                                                 ALAssetsLibraryWriteImageCompletionBlock completionBlock = ^(NSURL *assetURL, NSError *error) {
                                                                     if (error) {
                                                                         if ([[self delegate] respondsToSelector:@selector(captureManager:didFailWithError:)]) {
                                                                             [[self delegate] captureManager:self didFailWithError:error];
                                                                             }
                                                                     }
                                                                 };

                                                                 if (imageDataSampleBuffer != NULL) {
                                                                     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageDataSampleBuffer];
                                                                     ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

                                                                     UIImage *image = [[UIImage alloc] initWithData:imageData];
                                                                     NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
                                                                     NSString *docDirectory = [sysPaths objectAtIndex:0];
                                                                     NSString *filePath = [NSString stringWithFormat:@"%@/Image.jpg", docDirectory];

                                                                     NSData *imageDataToSave = [NSData dataWithData:UIImagePNGRepresentation(image)];
                                                                     [imageDataToSave writeToFile:filePath atomically:YES];
                                                                     //[self saveImage:image];

                                                                                           completionBlock:completionBlock];

                                                                     [image release];

                                                                     [library release];
                                                                 }
                                                                 else
                                                                     completionBlock(nil, error);

                                                                 if ([[self delegate] respondsToSelector:@selector(captureManagerStillImageCaptured:)]) {
                                                                     [[self delegate] captureManagerStillImageCaptured:self];
                                                                 }
                                                             }];
    } 
```

并加载图像

```
NSArray *sysPaths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory, NSUserDomainMask, YES );
NSString *docDirectory = [sysPaths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/Image.jpg", docDirectory];
UIImage* loadedImage = [UIImage imageWithContentsOfFile:filePath];
[ImageView setImage:loadedImage]; 
```

当这个 loadedImage 被分配给任何 UIImage

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T13:10:03.550

在写入文件时尝试 -

```
[UIImagePNGRepresentation(self.imageView.image) writeToFile:pngPath atomically:YES]; 
```

# python - 使用看门狗检测文件创建

> ID：11883336
> 
> 赞同：22
> 
> 时间：2012-08-09T12:21:30.390
> 
> 标签：python, multithreading, exit-code, termination, watchdog

我试图检测何时在目录中创建具有给定名称的文件。感谢[watchdog](http://pypi.python.org/pypi/watchdog/)。正确检测到创建，但是一旦检测完成，我不知道如何正确终止应用程序。

我的一段代码如下：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import logging
import sys
import time

from watchdog.events import FileSystemEventHandler
from watchdog.observers import Observer

logging.basicConfig(level=logging.ERROR)

class MyEventHandler(FileSystemEventHandler):
    def __init__(self, observer, filename):
        self.observer = observer
        self.filename = filename

    def on_created(self, event):
        print "e=", event
        if not event.is_directory and event.src_path.endswith(self.filename):
            print "file created"
            self.observer.unschedule_all()
            self.observer.stop()

def main(argv=None):
    path = argv[1]
    filename = argv[2]
    observer = Observer()
    event_handler = MyEventHandler(observer, filename)
    observer.schedule(event_handler, path, recursive=False)
    observer.start()
    observer.join()
    return 0

if __name__ == "__main__":
    sys.exit(main(sys.argv)) 
```

我是 python 新手，我不知道出了什么问题。检测似乎安排在专用线程中，并且 join() 方法正在等待该线程终止。因此，我想我没有在观察者上调用正确的方法来停止等待/循环，但是看门狗文档似乎真的不清楚指出可以使用哪些方法。

有人知道我如何实现我的目标吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T15:04:53.383

最后，看了看守门狗的实现后，不需要调用`unschedule_all`before `stop`，这是自动完成的。删除包含此方法调用的行可以解决问题，并且应用程序运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-09T00:57:31.370

此外，以下脚本用于观察`filename`特定`path`使用[`PatternMatchingEventHandler`](https://pythonhosted.org/watchdog/api.html#watchdog.events.PatternMatchingEventHandler).

```
import time
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
from watchdog.events import PatternMatchingEventHandler
import sys

class Watcher:
    def __init__(self, path, filename):
        self.observer = Observer()
        self.path = path
        self.filename = filename

    def run(self):
        event_handler = Handler(self.filename)
        self.observer.schedule(event_handler, self.path, recursive=True)
        self.observer.start()
        try:
            while True:
                time.sleep(1)
        except:
            self.observer.stop()
            print("Error")

        self.observer.join()

class Handler(PatternMatchingEventHandler):
    def __init__(self, filename):
        super(Handler, self).__init__(
            patterns=[filename],
            ignore_patterns=["*.tmp"],
            ignore_directories=True,
            case_sensitive=False,
        )

    def on_any_event(self, event):
        print(
            "[{}] noticed: [{}] on: [{}] ".format(
                time.asctime(), event.event_type, event.src_path
            )
        )

if __name__ == "__main__":
    path = "."
    filename = "test.csv"

    w = Watcher(path, filename)
    w.run() 
```

输出：

```
[Tue Feb  9 01:55:38 2021] noticed: [created] on: [/Users/mt/Documents/stackoverflow/test.csv] 
[Tue Feb  9 01:55:44 2021] noticed: [modified] on: [/Users/mt/Documents/stackoverflow/test.csv] 
[Tue Feb  9 01:56:01 2021] noticed: [deleted] on: [/Users/mt/Documents/stackoverflow/test.csv] 
```

也可以在不安装其他库的情况下确定新文件的创建。

```
import os
import time

def watch_file(filename, time_limit=3600, check_interval=60):
    """Return true if filename exists, if not keep checking once every check_interval seconds for time_limit seconds.
    time_limit defaults to 1 hour
    check_interval defaults to 1 minute
    """
    now = time.time()
    last_time = now + time_limit

    while time.time() <= last_time:
        if os.path.exists(filename):
            return True
        else:
            # Wait for check interval seconds, then check again.
            time.sleep(check_interval)
    return False

if __name__ == "__main__":
    filename = "test.csv"
    time_limit = 60
    check_interval = 1

    if watch_file(filename, time_limit, check_interval):
        print(f"File created: {os.path.abspath(filename)}")
    else:
        print(
            f"File {filename} not found after waiting: {time_limit} seconds!"
        ) 
```

输出：

```
File created: /Users/mt/Documents/stackoverflow/test.csv 
```

# javascript - 拥有一个大画布还是拥有多达 100 个动态生成的小画布更好？

> ID：11883339
> 
> 赞同：11
> 
> 时间：2012-08-09T12:21:49.480
> 
> 标签：javascript, web-applications, canvas

我正在开发一个移动网络骰子模拟器。最初的原型在这里：[http ://dicewalla.com](http://dicewalla.com)

我目前有一个大画布，可以在其中绘制所有骰子。我计划以更 MVC 且更易于更新的方式重新编写代码。我认为为每个骰子对象生成一个小画布比在大画布上绘制所有骰子并不断更新大画布更容易。

我的问题是，让浏览器创建大量小画布而不是一个大画布是否会对性能造成不良影响。很难在本地测试，我希望这里的人可能知道最佳实践是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:36:24.647

多个画布通常可以提供更好的性能，因为您可以有选择地重新渲染。

如果您只有一个画布并且想要更新一个骰子，您通常必须重新绘制整个画布。另一方面，多个画布允许您仅更新需要重绘的骰子。这就是效率的提高。

此外，在加载 1 个画布与 100 个画布时，您不会看到任何明显的差异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T14:22:41.543

在性能方面，如前所述，**如果您不定期更新图形，则 1-100 个画布元素之间应该没有什么区别。**（即：静态图形/无动画）

网络上关于多个画布的大多数参考资料都倾向于处理您有多个图层并且需要在其他事物之上处理具有透明度的绘图的情况。

话虽如此，您对 dicewalla 所做的事情看起来不会从拥有多个画布中获得任何收益。

如果更新整个画布是一个瓶颈，您还可以有选择地重绘单个画布的区域以获得更好的性能。这为您提供了拥有多个画布的性能优势，而无需处理管理和创建这些元素。

# php - WSDL PHP 函数返回 null 而其他函数返回预期结果

> ID：11883342
> 
> 赞同：12
> 
> 时间：2012-08-09T12:22:02.473
> 
> 标签：php, soap, null, wsdl

**概括**

在这里，我将列出我为解决此问题所采取的所有步骤，以供其他人参考。

1\. PHP，很愚蠢，“监听”一个函数的输入消息来定义它应该使用什么函数。所以给你的每个函数一个不同的输入消息，即使它使用相同的类型或元素。您可能认为这需要您解决很多工作，但可以这样完成：

```
<xsi:complexType name="UserCredentials">
<xsi:attribute name="customerID" type="xsi:int"/>
</xsi:complexType>

<xsi:element name="UserCredentials" type="types:UserCredentials"/>
<xsi:element name="UserCredentials1" type="types:UserCredentials"/>

<wsdl:message name="getCustomerCredentials">
 <wsdl:part name="body" element="types:UserCredentials"/>
</wsdl:message>
<wsdl:message name="getCustomerCredentials1">
<wsdl:part name="body" element="types:UserCredentials1"/>
</wsdl:message> 
```

接下来，Visual Studio 正在抱怨，我花了几天时间弄清楚这个愚蠢的简单事情，告诉程序你刚刚设置了 objects 属性：

```
 UserCredentials.customerID = User.CustomerID;
 UserCredentials.customerIDSpecified = true; 
```

就是这样。我自己都不敢相信。我花了1,5周，解决方案是两个步骤，请给这个回答下面的人一些投票。

**更新**

我的输入对象没有开始解析为 XML。

//使固定：

您必须告诉程序该属性设置如下：

```
UserCredentials.customerID = User.CustomerID;
UserCredentials.customerIDSpecified = true; 
```

提琴手展示了这一点：

输入

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<UserCredentials2 xmlns="http://5.157.80.21/servicehandler/wsdl_service.wsdl"/>   
</s:Body>
</s:Envelope> 
```

输出

```
<?xml version="1.0" encoding="UTF-8"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="types">
<SOAP-ENV:Body>
<ns1:PersoonArray/>
</SOAP-ENV:Body>
</SOAP-ENV:E‌​nvelope> 
```

这段代码有问题吗？

```
 public static List<Klant> GetAllPersonen()
    {
        List<Klant> list = new List<Klant>();

        WeGotchaService.Persoon[] servicePersonen = dpc.getAllPersoonData(UserCredentials);

        foreach (WeGotchaService.Persoon p in servicePersonen)
        {
            Klant k = new Klant(p);
            list.Add(k);
        }

        return list;
    } 
```

**更新到下面的评论**

```
<xsi:complexType name="UserCredentials">
        <xsi:attribute name="customerID" type="xsi:int"/>       
    </xsi:complexType>
        <xsi:element name="UserCredentials" type="tns:UserCredentials" />
        <xsi:element name="UserCredentials2" type="tns:UserCredentials"/>

 <wsdl:message name="getCustomerCredentials">
    <wsdl:part name="body" element="ns:UserCredentials"/>
</wsdl:message>
<wsdl:message name="getCustomerCredentials2">
    <wsdl:part name="body" element="ns:UserCredentials2"/>
</wsdl:message>

    <wsdl:operation name="getAllLessenData">
        <wsdl:input message="ns:getCustomerCredentials"/>
        <wsdl:output message="ns2:LessenList"/>
    </wsdl:operation>
    <wsdl:operation name="getAllPersoonData">
        <wsdl:input message="ns:getCustomerCredentials2"/>
        <wsdl:output message="ns3:PersoonList"/>
    </wsdl:operation> 
```

这似乎有效，只是它现在在 VS10 中返回一个 count=0 数组

**另一个更新**

在评论中，有人发布了指向PHP 错误报告的[链接。](https://bugs.php.net/bug.php?id=49169)倒数第二位评论者声称他通过将所有消息定义放在其他文件中并将它们包含在这个主要的 WSDL 文档中来解决我遇到的相同问题。我试过了，但没有用，没有任何改变。

**更新：**

所以我改变了绑定方法中定义的函数的顺序，并得出以下结论：只有绑定区域中定义的第一个函数有效，所以在这种情况下，只有我的 getAllLessenData 有效，因为我把它放在了所有其他函数之上。有人看到错误吗？

```
 <wsdl:binding name="DataBinding" type="tns:DataPort">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getAllLessenData">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getAllPersoonData">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getAllBetalingData">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPersoonLessenData">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getPersoonBetalingenData">
        <soap:operation soapAction="" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding> 
```

**更新结束**

我对 WSLD 有一点问题（再次）

我的 getAllLessenData（和其他函数）都返回 NULL，而一个函数（getAllPersonData）返回预期的值。

WSDL 数组定义：

```
<xsi:element name="PersoonArray">
            <xsi:complexType>
                <xsi:sequence>
                    <xsi:element name="Persoon" type="tns:Persoon" maxOccurs="unbounded"/>
                </xsi:sequence>
            </xsi:complexType>
        </xsi:element>
        <xsi:element name="LessenArray">
            <xsi:complexType>
                <xsi:sequence>
                    <xsi:element name="Les" type="tns:Les" maxOccurs="unbounded"/>
                </xsi:sequence>
            </xsi:complexType>
        </xsi:element> 
```

WSDL complexType 定义：

```
 <xsi:complexType name="Les">
            <xsi:attribute name="ID" type="xsi:int"/>
            // lots of stuff //
            <xsi:attribute name="Definitief" type="xsi:boolean"/>
        </xsi:complexType>
        <xsi:complexType name="Persoon">
            <xsi:attribute name="ID" type="xsi:int"/>
            <// lots of stuff //
            <xsi:attribute name="Laatste_keer_bewerkt" type="xsi:dateTime"/>
        </xsi:complexType> 
```

WSDL 消息定义：

```
<wsdl:message name="getCustomerID">
    <wsdl:part name="CustomerID" type="xs:int"/>
</wsdl:message>
<wsdl:message name="PersoonList">
    <wsdl:part name="PersoonList" element="tns:PersoonArray"/>
</wsdl:message>
    <wsdl:message name="LessenList">
    <wsdl:part name="LessenList" element="tns:LessenArray"/>
</wsdl:message> 
```

WSDL 端口类型定义

```
 <wsdl:operation name="getAllPersoonData">
        <wsdl:input message="tns:getCustomerID"/>
        <wsdl:output message="tns:PersoonList"/>
    </wsdl:operation>
    <wsdl:operation name="getAllLessenData">
        <wsdl:input message="tns:getCustomerID"/>
        <wsdl:output message="tns:LessenList"/>
    </wsdl:operation> 
```

WSDL 绑定防御

```
 <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="getAllPersoonData">
        <soap:operation soapAction="http://localhost/weGotcha/servicehandler/servicehandler.php" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getAllLessenData">
        <soap:operation soapAction="http://localhost/weGotcha/servicehandler/servicehandler.php" style="document"/>
        <wsdl:input>
            <soap:body use="literal"/>
        </wsdl:input>
        <wsdl:output>
            <soap:body use="literal"/>
        </wsdl:output>
    </wsdl:operation> 
```

PHP 函数定义：

```
function getAllPersoonData($customer_ID)
{
   connectToDB();
//////////// yes I use mysqli now /////////////
   $sql = "SELECT * FROM personen WHERE Customer_ID='". $customer_ID ."'";

   $sql = mysql_query($sql) or die(mysql_error());
   $result = array();
   while($row = mysql_fetch_array($sql))
   {
  $row["Kosten_totaal"] = mysql_fetch_array(mysql_query("SELECT SUM(Kosten) FROM lessen WHERE Persoon_ID='". $row["ID"] ."'"))[0];
    $row["Totaal_betaald"] = mysql_fetch_array(mysql_query("SELECT SUM(Bedrag) FROM betalingen WHERE Persoon_ID='". $row["ID"] ."'"))[0];
    $lkbDatum = strtotime($row["Laatste_keer_bewerkt"]);
  $row["Laatste_keer_bewerkt"] = date("Y-m-d", $lkbDatum) . "T". date("H:i:s", $lkbDatum);
  $result[] = $row;             
}
mysql_close();

   return $result;
 }

 function getAllLessenData($customer_ID)
 {
$sql = "SELECT * FROM lessen WHERE Customer_ID='". $customer_ID ."'";
//////////// yes I use mysqli now /////////////
connectToDB();

    $sql = mysql_query($sql) or die(mysql_error());
$result = array();
while($row = mysql_fetch_array($sql))
{
  $result[] = $row;
}
mysql_close();

    return $result;
 }

 $server = new SoapServer("wsdl_service.wsdl");
 $server->AddFunction("getAllPersoonData");
 $server->AddFunction("getAllBetalingData");
 $server->AddFunction("getPersoonBetalingData");
 $server->AddFunction("getAllLessenData");
 $server->AddFunction("getPersoonLessenData");
 $server->handle(); 
```

测试.php

```
$client = new SoapClient("http://localhost/weGotcha/servicehandler/wsdl_service.wsdl", array("trace" => 1));

var_dump($client->__getFunctions());

var_dump($client->getAllLessenData(1));

var_dump($client->__getLastRequest());
var_dump($client->__getLastResponse()); 
```

返回：

```
array (size=5)
  0 => string 'PersoonArray getAllPersoonData(int $CustomerID)' (length=47)
  1 => string 'LessenArray getAllLessenData(int $CustomerID)' (length=45)
  2 => string 'BetalingenArray getAllBetalingData(int $CustomerID)' (length=51)
  3 => string 'LessenArray getPersoonLessenData(int $getCustomerID, int $getPersoonID)' (length=71)
  4 => string 'BetalingenArray getPersoonBetalingenData(int $getCustomerID, int $getPersoonID)' (length=79)
null
string '<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Body><CustomerID>1</CustomerID></SOAP-ENV:Body></SOAP-ENV:Envelope>
' (length=195)
string '<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:ns1="http://localhost/weGotcha/servicehandler/wsdl_service.wsdl"><SOAP-ENV:Body> <ns1:PersoonArray><ns1:Persoon ID="1" Voornaam="xxxx" Achternaam="xxxx"  Adres="xxxx" Postcode="xxxx" Woonplaats="xxxx"  Email_adres="xxxx" Telefoonnummer="xxxx" Geboortedatum="0001-01-01" CBR_kandidaatnummer="12381233" Rijbewijs="2" Theorie_behaald="false" Theorie_po'... (length=3096) 
```

我的数据库中有行，直接从我的 servicehandler.php 调用 getAllLessenData(1) 会返回预期的结果。但是，在我的 test.php 中，它只返回 NULL，而 getLastResponse 从 getAllPersoonData(1) 返回结果。

两个函数定义对我来说看起来都一样，哎呀我复制粘贴了大部分。我尝试更改名称空间等谷歌。但它没有用。有任何想法吗？

如果您需要更多信息，请回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:55:10.207

`getAllPersoonData`编辑 1：这也可能与具有相同输入签名的事实有关`getAllLessenData`，这意味着对于文档文字样式的 Web 服务，端点将无法区分您实际发出的请求类型。尝试传递两个不同的元素名称。

编辑 2：此外，为这些消息提供不同的签名将允许您放入`getPersoonID`类型定义中，以便您只有一个消息部分。现在，如果你看看`Customer.wsdl`你有：

```
<wsdl:message name="getPersoonIDCustomerID">
    <wsdl:part name="body" element="ns:UserCredentials"/>
    <wsdl:part name="getPersoonID" type="xs:int"/>
</wsdl:message> 
```

文档文字消息中不应包含多个部分。

EDIT 3: If you don't want to define a new element for each function that you have, then you would have to switch to RPC literal, which wraps the request in the `wsdl:operation` name. If this would fix everything except .NET, then you could try my [SO](https://stackoverflow.com/questions/11796076/soap-requests-in-net/11796240#11796240) post on coaxing .NET into reading RPC-literal web services.

# actionscript-3 - 上传 Flex 应用程序后 Twitter api 调用不再工作

> ID：11883351
> 
> 赞同：0
> 
> 时间：2012-08-09T12:22:23.493
> 
> 标签：actionscript-3, apache-flex, twitter

我有一个使用 Last.fm 和 Twitter api 的 Flex 应用程序。在我将项目上传到我的网站空间后，Twitter api 调用不再起作用，但 Last.fm 仍然有效。我的网址仍然有效：

```
var getTweetsUrl = "https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=deftonesband&count=3" 
```

这是用于 httpservice 的代码：

```
 <s:HTTPService id="getTweetsService" url="{getTweetsUrl}" result="displayTweets(event)" fault="twitterFail(event)" resultFormat="e4x" /> 
```

每次触发故障事件时，即使 url 是正确的。有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:48:03.567

由于 twitter.com ( [https://api.twitter.com/crossdomain.xml](https://api.twitter.com/crossdomain.xml) ) 的跨域策略，您无法在未经许可的情况下从其他域调用 twitter api (本地没有跨域检查在 flash 播放器中)

要获得 twitter 用户的许可，您必须使用[oAuth](http://en.wikipedia.org/wiki/OAuth)

我认为为 twitter api 实现 oAuth 的最简单方法是使用名为 Tweetr 的 AS3 开源库： [http ://wiki.swfjunkie.com/tweetr](http://wiki.swfjunkie.com/tweetr)

# php - 如何删除这个 mysqli 警告？

> ID：11883352
> 
> 赞同：0
> 
> 时间：2012-08-09T12:22:23.523
> 
> 标签：php, mysqli

我正在我的 php/mysqli 中进行更新。更新工作正常，但我遇到的问题是我不断收到此警告：

警告：mysqli_stmt::fetch() [mysqli-stmt.fetch]: (HY000/2053): 在第 44 行没有与语句关联的结果集时尝试读取一行。

因为我不断收到此警告，这意味着用户提交表单后，即使输入了正确的用户名，它仍然显示消息“您输入的用户名无效。请尝试再次输入。” 当它真的应该将用户导航到thankyou.php页面时。

所以我的问题是如何删除这个警告？

```
 $username = (isset($_POST['username'])) ? $_POST['username'] : '';
      $newpassword = (isset($_POST['newpassword'])) ? $_POST['newpassword'] : '';
      $loggedIn = false;

      if (isset($_POST['submit'])) {

        // don't use $mysqli->prepare here
        $query = "UPDATE Teacher SET TeacherSalt = ?, TeacherPassword = SHA1(CONCAT(?,?)) WHERE TeacherUsername = ? LIMIT 1";
        // prepare query
        $stmt=$mysqli->prepare($query);
        // You only need to call bind_param once
        $stmt->bind_param("ssss",$salt,$newpassword,$salt,$username);
        // execute query
//bind results
$stmt->bind_result($dbTeacherUsername,$dbTeacherPassword,$dbTeacherSalt);
        $stmt->execute(); 

        while($stmt->fetch()) {
          if ($username == $dbTeacherUsername) {
            $loggedIn = true;
          }
        }

        /* close statement */
        $stmt->close();

        /* close connection */
        $mysqli->close();

        if ($loggedIn == true){
          $_SESSION['username'] = $dbTeacherUsername;
          header( 'Location: thankyou.php' ) ;
          die();
        }
      }
     if ($loggedIn == false && $_POST) {
        echo "The Username you Entered is not Valid. Try Entering it Again.";
        }
      ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:29:57.760

改变

```
$stmt->execute(); 

        while($stmt->fetch()) {
          if ($username == $dbTeacherUsername) {
            $loggedIn = true;
          }
        } 
```

到

```
 if($stmt->execute()) {
      if ($username == $dbTeacherUsername) {
        $loggedIn = true;
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:24:41.103

`UPDATE`语句不会产生结果集。引用[文档](http://php.net/manual/en/mysqli-stmt.execute.php)：

> 如果语句为***UPDATE***、***DELETE***或***INSERT***`mysqli_stmt_affected_rows()` ，则可以使用该函数确定受影响行的总数。同样，如果查询产生结果集，`mysqli_stmt_fetch()`则使用该函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T12:37:52.977

您可以在 PHP 中删除“警告信息”，只需在 php.ini 中替换

```
error_reporting  =  E_ALL & ~E_NOTICE 
```

经过

```
error_reporting  =  0 
```

但是如果你的代码是完美的，警告信息就不会出现，在Php中不要出现警告，是为了**解决****警告信息问题**。

在您的代码中，您在第 44 行之前遇到了问题。看看您的“While Loop”...

**编辑**：我刚刚阅读了您的答案+ 1 丹博士

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-09T12:28:29.303

您可以通过更改脚本顶部的 error_reporting() 函数来删除 PHP 上的任何警告。放：

```
error_reporting(E_ALL ^ E_WARNING ^ E_NOTICE); 
```

这都是错误，除了警告或通知。或者，如果它只是一个函数，您可以在函数调用前加上 at 符号：

```
while (@$stmt->fetch()) {
    //do stuff
} 
```

例如。

# javascript - 如何在 JavaScript FOR 循环中生成 JQuery 调用？

> ID：11883353
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:22:28.347
> 
> 标签：javascript, jquery, for-loop

我需要在 Javascript 函数中生成这 4 个 JQuery 调用：

```
$(".dropdown-menu .1_147").hover(
  function() { $("#1_147").show(); },
  function() { $("#1_147").hide(); }
);

$(".dropdown-menu .2_147").hover(
  function() { $("#2_147").show(); },
  function() { $("#2_147").hide(); }
);

$(".dropdown-menu .3_147").hover(
  function() { $("#3_147").show(); },
  function() { $("#3_147").hide(); }
);

$(".dropdown-menu .4_147").hover(
  function() { $("#4_147").show(); },
  function() { $("#4_147").hide(); }
); 
```

我写了一个 Javascript 函数，FOR 循环只生成最后一次交互“4_147”。如何告诉 Javascript 生成 4 个 JQuery 调用？

我当前的 JavaScript：

```
var submenu_navigation = document.getElementsByClassName("dropdown-menu");
var submenu_navigation_list = submenu_navigation[0].getElementsByTagName('li');

/*console.log(submenu_navigation_list);*/

function generateDropdownMenuMoldura(lis_array) {

    for (var item in lis_array) {

        var item_class_attr_name = lis_array[item].getAttribute('class');

        console.log(item_class_attr_name);

        $(".dropdown-menu ." + item_class_attr_name).hover(
          function() { $("#" + item_class_attr_name).show(); },
          function() { $("#" + item_class_attr_name).hide(); }
        );

    }   
}

generateDropdownMenuMoldura(submenu_navigation_list); 
```

有什么线索吗？

此致，

* * *

更新：

我得到了解决方案：

```
/* Define the Elements that I need to loop */
var submenu_navigation = document.getElementsByClassName("dropdown-menu");
var submenu_navigation_list = submenu_navigation[0].getElementsByTagName('li');

function generateDropdownMenuMoldura(lis_array) {

    for (var item in lis_array) {

        var item_class_attr_name = lis_array[item].getAttribute('class');

        console.log(item_class_attr_name);

        (function(item_class_attr_name) {
            $(".dropdown-menu ." + item_class_attr_name).hover(
              function() { $("#" + item_class_attr_name).show(); },
              function() { $("#" + item_class_attr_name).hide(); }
            );
        })(item_class_attr_name);

    }   
}

generateDropdownMenuMoldura(submenu_navigation_list); 
```

我的问题是：这个匿名函数调用是如何工作的？这是递归技术？

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:42:35.880

如何解决您的具体解决方案已[在另一个问题中得到解答](https://stackoverflow.com/questions/6247928/javascript-assigning-event-handlers-via-for-loop)。

但为什么这么复杂？从您当前拥有的 JavaScript 来看，并假设除了范围之外的所有内容都可以正常工作，一个更简单的解决方案是：

```
$(".dropdown-menu li").hover(function() { 
    $('#' + this.className).show(); 
}, function() { 
    $('#' + this.className).hide();
}); 
```

无需为每个元素绑定不同的处理程序，因为它们基本上都做相同的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:36:28.127

看看[`jQuery.each('dropdown-menu')`](http://api.jquery.com/each/)方法。这是for循环。

**HTML 示例**

```
<ul>
  <li>foo</li>
  <li>bar</li>
</ul> 
```

**jQuery 示例**

```
$( "li" ).each(function( index ) {
  console.log( index + ": " + $( this ).text() );
}); 
```

# c# - 如何通过 LINQ to SQL 创建嵌套的实体

> ID：11883360
> 
> 赞同：0
> 
> 时间：2012-08-09T12:22:50.147
> 
> 标签：c#, .net, linq-to-sql

我将一个实体与另一个实体联系起来：

```
[Table(Name = "Employees")]
public sealed class Employee
{
    [Column(Name = "Id", UpdateCheck = UpdateCheck.Never, IsPrimaryKey = true, IsDbGenerated = true, DbType = "Int NOT NULL IDENTITY")]
    public int Id { get; set; }

    [Column(Name = "Phone", UpdateCheck = UpdateCheck.Never, DbType = "Char(20)")]
    public string Phone { get; set; }

    [Column(Name = "UserId", UpdateCheck = UpdateCheck.Never, DbType = "Int NOT NULL")]
    public int UserId { get; set; }

    [Association(Storage = "_user", ThisKey = "UserId")]
    public User User
    {
        get { return _user.Entity; }
        set { _user.Entity = value; }
    }
    private EntityRef<User> _user;
}

[Table(Name = "Users")]
public sealed class User
{
    [Column(Name = "Id", UpdateCheck = UpdateCheck.Never, IsPrimaryKey = true, IsDbGenerated = true, DbType = "Int NOT NULL IDENTITY")]
    public int Id { get; set; }

    [Column(Name = "LastName", UpdateCheck = UpdateCheck.Never, DbType = "NVarChar(100)")]
    public string LastName { get; set; }

    [Column(Name = "FirstName", UpdateCheck = UpdateCheck.Never, DbType = "NVarChar(100)")]
    public string FirstName { get; set; }
} 
```

然后我想创建一个员工：

```
var entity = new Employee
{
Phone = "Some",
User = new User
{
    FirstName = "Some", 
    LastName = "Some" 
}
};

context.GetTable<Employee>().InsertOnSubmit(entity);
context.SubmitChanges(); 
```

得到了这个：INSERT 语句与 FOREIGN KEY 约束“FK_Employees_Users”冲突

是否可以在 LINQ to SQL 中创建链接实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:59:36.957

尝试同时指定 的[`OtherKey`](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.associationattribute.otherkey.aspx)属性[`AssociationAttribute`](http://msdn.microsoft.com/en-us/library/system.data.linq.mapping.associationattribute.aspx)。如果未指定，它将默认为相关类的键，但在您的情况下，不同类中键的名称不同（`UserId`vs `Id`）。

```
[Association(Storage = "_user", ThisKey = "UserId", OtherKey="Id")]
public User User
{
    get { return _user.Entity; }
    set { _user.Entity = value; }
}
private EntityRef<User> _user; 
```

# php - 缓存昂贵的计算 - 正确的方法？

> ID：11883364
> 
> 赞同：0
> 
> 时间：2012-08-09T12:23:02.797
> 
> 标签：php, performance, file-io, include

这是我昨天的问题的后续行动 - 有一条评论问我为什么不将“缓存”存储在数据库中，（我测试了一个文件夹架构，其中有数百万个文件夹被分成不同的子文件夹，每个文件夹最多 1000 个） ) 开始让我开始思考正确的解决方案。

[一个文件夹中有 100 万个或更多文件，用于包含（缓存）](https://stackoverflow.com/questions/11866811/1-million-or-more-files-in-one-folder-for-include-cache)

基本上，在这里更详细一点：我有一个昂贵的计算，需要许多数据库查询。基本上，程序的每个请求都针对特定用户。对于每个用户，结果*总是*完全相同（直到用户做出重大更改）。所以基本上，我在想：为什么每次一个人访问这个用户页面时都做这个操作——如果我可以做一次，然后存储它？

基本上，结果是一组不同的 PHP 对象，包含不同的数据/设置/等。所以我正在考虑创建一个`.inc`文件，创建这些对象（具有预定义的值，这将由 SELECT 产生）。每次有人呼叫该特定用户时，我都会快速`include`解决问题。

现在我不太确定那个解决方案了。这意味着，基本上每个用户都有至少一个`.inc`（可能有多个）要包含的文件。这意味着，如果我有一个`UNSIGNED MEDIUMINT`用户`PK`表，我需要一个文件夹结构来支持至少 8388607 * ~2 个文件（最坏情况）。

我想我在这里寻找错误的方向。我有什么可能？

1.  选择数据并计算它/在每次页面调用时将其放在一起 - 始终具有相同的结果
2.  与 2\. 相同，但将生成的对象存储在文件中，作为代码片段 - 包括
3.  与 2\. 相同，但序列化生成的对象，将它们保存在文件或数据库中，在每次页面调用时反序列化它们
4.  ?

是否有其他解决方案/方法来解决此类问题？所有这些解决方案在我自己的耳朵里听起来都不太干净，但我正在努力寻找另一种方法来做到这一点。持有 800 万个文件，或者一遍又一遍地计算相同的东西——中间应该有一些东西，不知何故。

有什么建议么？

谢谢！- 原谅我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:31:52.337

我认为这里有很多选项供您选择，但如果没有进一步的细节，很难选择最好的一个：

如果这些对象不太可能在自己的表中不断更改，则可以将这些对象半缓存在数据库表中，并且仅在半缓存表中找不到结果时才进行昂贵的计算（这也将其放置在半缓存表）。您甚至可能希望制定一个定期（如每晚）更新这些内容的时间表，以利用服务器上的停机时间。

您可以将结果存储在会话或 cookie 中，并根据需要进行检查，如果不存在，则从数据库中计算。

使用您的 mySQL 缓存来存储这些昂贵的计算，以便它们可能在需要时位于缓存中。这可能意味着您使用预期的访问者预热缓存。

# c++ - 为什么通过 CRTP 访问派生类中的 typedef 时会出错？

> ID：11883365
> 
> 赞同：4
> 
> 时间：2012-08-09T12:23:02.240
> 
> 标签：c++, crtp

我无法理解为什么下面的代码无法编译——有人可以解释一下吗？

如何从基类访问派生类中的 typedef？

```
template<class Derived>
struct Test
{
    template<class T>
    typename Derived::value_type foo(T);
};

struct Derived : public Test<Derived>
{
    typedef int value_type;
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:28:15.760

在声明的时候`Derived`,`Derived`还不是一个完整的类型——你才刚刚开始声明它！因此，在 specialization`Test<Derived>`中，模板参数是不完整的类型，因此您不能引用嵌套名称，例如`Derived::value_type`-- 这是循环逻辑。

您可以通过将返回类型作为单独的参数来解决问题：

```
template <typename T, typename R> struct Test
{
    template <typename U> R foo(U);
};

template <typename R>
struct BasicDerived : public Test<BasicDerived, R>
{
    typedef R value_type;
};

typedef BasicDerived<int> Derived; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T12:32:34.293

您不能`typedef`直接在基类中访问模板类的 s 或成员，因为此时它不是完整的类型。允许这样做会导致循环行为：

```
template<class Derived>
struct Test
{
    typedef typename Derived::value_type foo;
};

struct Derived : public Test<Derived>
{
    typedef Test<Derived>::foo value_type;
}; 
```

但是，您可以在方法中引用模板类的成员，因为它们直到稍后才会实例化：

```
template<class Derived>
struct Test
{
    void foo() { typename Derived::value_type bar; }
};

struct Derived : public Test<Derived>
{
    typedef int value_type;
}; 
```

或者，根据您的尝试，您可以将 typedef 作为附加模板参数传递：

```
template<typename value_type, class Derived>
struct Test
{
    template<class T>
    value_type foo(T);
};

struct Derived : public Test<int, Derived>
{
    typedef int value_type;
}; 
```

# android - 下载图像在 2.3.3 中有效，但在 4.0 或 4.1 中无效

> ID：11883368
> 
> 赞同：1
> 
> 时间：2012-08-09T12:23:07.697
> 
> 标签：android, android-emulator, nullpointerexception, android-4.0-ice-cream-sandwich, httpurlconnection

我从 URL 下载了一张图片并显示在`ImageView`. 此示例在 2.3.3 模拟器上运行良好，但当我在 4.0 或 4.1 上尝试时，它崩溃并显示以下消息：

> 不幸的是，AndroidWebImageExample 已经停止。

LogCat 显示我正在获取`NullPointerException`. 有人知道为什么它在 4.0 或 4.1 上不起作用吗？

MainActivity.java

```
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class MainActivity extends Activity {

    String image_URL = "http://4.bp.blogspot.com/_C5a2qH8Y_jk/StYXDpZ9-WI/AAAAAAAAAJQ/sCgPx6jfWPU/S1600-R/android.png";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView bmImage = (ImageView) findViewById(R.id.image);
        BitmapFactory.Options bmOptions;
        bmOptions = new BitmapFactory.Options();
        bmOptions.inSampleSize = 1;
        Bitmap bm = LoadImage(image_URL, bmOptions);
        bmImage.setImageBitmap(bm);
    }

    private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
        Bitmap bitmap = null;
        InputStream in = null;
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in, null, options);
            in.close();
        } catch (IOException e1) {
        }
        return bitmap;
    }

    private InputStream OpenHttpConnection(String strURL) throws IOException {
        InputStream inputStream = null;
        URL url = new URL(strURL);
        URLConnection conn = url.openConnection();

        try {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            if (httpConn.getResponseCode() == HttpURLConnection.HTTP_OK) {
                inputStream = httpConn.getInputStream();
            }
        } catch (Exception ex) {
        }
        return inputStream;
    }

} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   >
<TextView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="hello"
   />
<ImageView
   android:id="@+id/image"
   android:scaleType="centerCrop"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
/>
</LinearLayout> 
```

日志猫

```
07-20 14:09:08.689: D/AndroidRuntime(1894): Shutting down VM
07-20 14:09:08.689: W/dalvikvm(1894): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
07-20 14:09:08.699: E/AndroidRuntime(1894): FATAL EXCEPTION: main
07-20 14:09:08.699: E/AndroidRuntime(1894): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.androidwebimageexample/com.example.androidwebimageexample.MainActivity}: java.lang.NullPointerException
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.os.Looper.loop(Looper.java:137)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread.main(ActivityThread.java:4745)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at java.lang.reflect.Method.invokeNative(Native Method)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at java.lang.reflect.Method.invoke(Method.java:511)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at dalvik.system.NativeStart.main(Native Method)
07-20 14:09:08.699: E/AndroidRuntime(1894): Caused by: java.lang.NullPointerException
07-20 14:09:08.699: E/AndroidRuntime(1894):     at com.example.androidwebimageexample.MainActivity.LoadImage(MainActivity.java:43)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at com.example.androidwebimageexample.MainActivity.onCreate(MainActivity.java:33)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.Activity.performCreate(Activity.java:5008)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
07-20 14:09:08.699: E/AndroidRuntime(1894):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
07-20 14:09:08.699: E/AndroidRuntime(1894):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:12:20.017

您正在主线程上执行（可能很慢）网络操作。如果您的目标 SDK 是 11 (Honeycomb) 或更高版本，这将`NetworkOnMainThreadException`在 Honeycomb 或更高版本上抛出异常，因为此行为可能会阻塞 UI 并导致应用程序无响应。即使在预 Honeycomb 设备[上，也不鼓励这种行为](http://developer.android.com/guide/practices/responsiveness.html)。

您可以使用 an`AsyncTask`来解决这个问题，将数据加载到其`doInBackground(..)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:50:44.357

出于某种原因，InputStream 为 NULL，因此会抛出 NullPointerExeption。在您的 OpenHttpConnection 方法中，添加 catch`Log.i("OpenHttpConnection",ex.getMessage());`并查看原因。

不要阻塞 UI 线程，必须使用 AsyncTask、Service 或自定义线程。你会喜欢这个课程[http://code.google.com/p/and-bookworm/source/browse/trunk/src/com/totsp/bookworm/data/HTTPRequestHelper.java?r=31](http://code.google.com/p/and-bookworm/source/browse/trunk/src/com/totsp/bookworm/data/HTTPRequestHelper.java?r=31)。在构造函数中，传递一个自定义的 ResponseHandler 并进行您需要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:33:20.660

您应该将网络操作从 UI 线程移动到服务或 AsyncTask

你可以在这里阅读更多：[http ://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

# android - IllegalArgumentException Base64 到图像解码android

> ID：11883369
> 
> 赞同：2
> 
> 时间：2012-08-09T12:23:16.480
> 
> 标签：android, bitmap, base64, decode, illegalargumentexception

我想将base64中的webservice中的图像解码为位图，并在我的android应用程序中使用它。这是我的方法：

```
public Bitmap getCaptcha() throws IOException
    { 

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        String json = jsonParser.getCaptcha(captchaURL, params);
        Log.i("", json);

         byte [] encodeByte=Base64.decode(json.getBytes(),Base64.DEFAULT);
         Bitmap bitmap=BitmapFactory.decodeByteArray(encodeByte, 0, encodeByte.length);
         return bitmap;

    } 
```

如果我用我的 php 脚本解码从 getCaptcha 方法获得的字符串 - 它会正确显示。但是当我在我的应用程序中这样做时，我得到一个

```
 FATAL EXCEPTION: main
    java.lang.RuntimeException: Unable to start activity ComponentInfo{com.assignmentexpert/com.assignmentexpert.RegisterActivity}: java.lang.IllegalArgumentException: bad base-64
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
   at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method)
   Caused by: java.lang.IllegalArgumentException: bad base-64
    at android.util.Base64.decode(Base64.java:161)
    at android.util.Base64.decode(Base64.java:136)
    at com.library.UserFunctions.getCaptcha(UserFunctions.java:97)
    at com.assignmentexpert.RegisterActivity.onCreate(RegisterActivity.java:66)
   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
    ... 11 more 
```

它的原因是什么？

我添加了我得到的 base64 代码：

```
/9j/4AAQSkZJRgABAQAAAQABAAD//gA7Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBxdWFsaXR5ID0gMTUK/9sAQwA1JSgvKCE1LysvPDk1P1CFV1BJSVCjdXthhcGqy8i+qrq31fD//9Xi/+a3uv///////////87//////////////9sAQwE5PDxQRlCdV1ed/9y63P///////////////////////////////////////////////////////////////////8AAEQgAKAB4AwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A0mOBkUtI/T8R/OgjPcj6UADOF6nn0qjd3jqdkfynuamnfYRFCMyt39BVS8RYI0jHLH5mPrTSAmtJJHjJZyTnvVpSyjoGHqKhsRtts5wSan4bkA59qTDQY9yquqbW3N0BGKJJjEhd1+UehqnJl5VmJJHmBB9K0Nif3R+VFgsQC/hPcj6inrdRv93mla3ibqo/CqF7bpBtZCRntTCxo7nPRMfU1FPL5SFmfJ7KKisCZIzvyQOmaNQ4aEdF3f4UrBYWO6lVlFwm0N0PpVyorlQ9tID/AHSaLZ99ujHk45oAlooooAR/u/TmmTyiGMseT0A9TT3+430qO4hWZAG6A54oAii2wjdKw81+SSRxVG8ZXnJUgjHUHNX1sogP9WCfUk1UvoREylVABHamhlm0liESqWXdT7yXy4vlPztwKgtYYWiV2Q7s9RU1xA85R0YKV6ZFLqIhnTyraFSOjjn86vKyuMqQR7VnzwzfuxNLu3OBgVacx28XyjhewPNDAZJFchmaKbIJztPaqbcSf6VvzWjHOkg+Vwahvnj8kqcbu1NMCa3eJo8RYwO1Nu4PPjwDhgciqenBvNJGcYrQkkESF26Ck9GBTZ7oxGJo+oxv9qnsf+PRPx/nTJ72PyWCHLEYAqa2Qx26KeuOaYEtFFFIAIyCD0NJjLD0FFFAC0yVUcAOob0BoooAI4ljGFAFOKgnPf2oooAY0KuylsnacjJp5UEYIGKKKAIHs4X527T7UwafEDyWNFFFwLMcaRLtQYFKyhhhgCPQ0UUAMFvEGyI1z9KkwKKKACiiigD/2Q==n 
```

问题是当我从浏览器复制代码并将其硬编码到我的程序中时 - 一切正常。但是当我通过我的 android 程序获取 base64 数据并尝试对 base64 进行硬编码时 - 我得到了一个异常。浏览器中的代码与我通过 Android 获得的代码看起来相同。但是，实际上，这并不是因为结果不同）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T19:01:12.280

实际上，有一个简单的解决方案可以删除有效的 base64 字符串后的所有错误数据：

```
String[] safe = received.split("=");
//put all chars before first base64 '=' padding char into safe[0]

try {
     byte[] recvpicbyte = Base64.decode(safe[0], Base64.NO_PADDING);
     //decode safe [0], note not in 'DEFUALT', use 'NO_PADDING' so it wont expect the '='

     //...do whatever with output 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T14:50:40.137

看起来您的 Base64 代码的填充效果不好（代码末尾的尾随`=`符号数量错误）。例如，对应的 base64 代码`Hello`是`SGVsbG8=`，最后一个`=`是为了使 base64 数据块的大小符合[Base64 RFC](http://www.rfc-editor.org/rfc/rfc4648.txt)。所以`SGVsbG8==`和`SGVsbG8`都是不正确的，因为块的长度不符合 base64 规范，即使它们都意味着`Hello`我们是否坚持相关字符（“Base 64 Alphabet”）。

一些实现对此非常宽容。他们只是假设长度不正确的 base64 块需要用一两个“=”填充。其他一些，包括 Android，是不允许的，因此您在 PHP 和 Android 程序的行为之间面临的那种差异。

这只是一个假设，因为我看不到您尝试解码的 base64 数据。要检查这一点，您可以使用[这个在线 base64 解码器](http://www.opinionatedgeek.com/dotnet/tools/base64decode/)，它会告诉您填充是否正常。

无论如何，使用 base64 代码示例会更容易。你会把它添加到你的帖子中吗？我会相应地更新我的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T07:57:07.247

问题在于在图像的 base64 字符串末尾添加一个“n”字符到 JSON 响应中。它出现的原因是神秘的。有趣的是，来自该 Web 服务的其他 JSON 响应没有“n”字符。我尝试使用常规 Java 代码获取 base64 图像字符串 - 一切都很好 - 没有“n”字符。所以它出现由于android客户端 - 端。尝试调查其出现的原因和防止它的方法。感谢[Shlublu](https://stackoverflow.com/users/840960/shlublu)的大力帮助！！！

# javascript - 如何制定 node.js 运行时策略？

> ID：11883370
> 
> 赞同：2
> 
> 时间：2012-08-09T12:23:20.733
> 
> 标签：javascript, node.js, event-driven-design

Node.js 方法是事件驱动的，我想知道您将如何解决何时触发事件的问题？

假设我们在 Web 应用程序上有一些操作：创建一些数据、提供页面、接收数据等。

你会如何安排这些活动？在线程系统中，设计相当“简单”。您将线程专用于特定的任务集，然后走上线程同步的道路。虽然这些任务的需求量很低，但线程处于空闲状态，什么也不做。当需要他们时，他们会运行他们的代码。虽然这条路有问题，但它有据可查，并且得到了解决。

我发现很难理解 node.js 事件的处理方式。我有 10 个请求进来，但我没有创建任何数据，所以我无法提供任何服务，创建数据是一个漫长的操作，另外 5 个客户端想要发送数据。现在怎么办？

我创建了以下未经测试的代码，它基本上是一堆注册并应该执行的回调。将会有某种桩管理器将运行并决定它现在要执行哪些代码。该回调创建的所有回调都可以“自然地”添加到偶数循环中。它还应该注册它自己，以便事件循环可以将控制权交还给它。其他的东西，比如静态内容和任何可以以不同方式绑定的东西。

1.  如何将回调注册为当前事件循环状态中的最后一个调用？
2.  这是解决这个问题的好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T14:06:24.917

来自线程环境时要记住的最重要的事情是，在节点中，您不会等待操作完成，而是告诉它完成后要做什么。为此，您使用回调，这是一个包含要执行的函数的变量，或者如果您愿意，可以是指向函数的指针。

例如：

```
 app.get('/details/:id?', function (req, res) {
    var id = req.params.ucid,
        publish = function (data) {
            res.send(data);
        };
    service.getDetails(id, publish);
}); 
```

创建所需数据后，您可以从获取详细信息方法中调用发布方法。

```
getDetail : function (id, callback) {
    var data = makeMyData(id);
    callback(data)
} 
```

然后它将您的数据发布回响应对象。因为事件循环节点将继续为该 url 提供请求，而不会中断第一个请求的数据生成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-07T15:13:14.283

选择的答案是最正确的，只有一个小的代码更改，那就是：

从此更改此功能：

```
getDetail : function (id, callback) {
    var data = makeMyData(id);
    callback(data)
} 
```

对此：

```
getDetail : function (id, callback) {
    var data = makeMyData(id);
    setTimeout(callback, 0, data); 
} 
```

2019 年更新：为了遵守社区标准，我中断了对新答案的更新。我之所以使用它`setTimeout`是因为我想将回调推迟到事件循环的后面。我使用的另一个选项是`process.nextTick()`，这有助于将回调推迟到当前处理的事件结束。例如：

```
getDetail : function (id, callback) {
    var data = makeMyData(id);
    process.nextTick(((info)=> callback(info))(data)) 
} 
```

# php - 如何指定 Composer 安装路径？

> ID：11883374
> 
> 赞同：101
> 
> 时间：2012-08-09T12:23:28.093
> 
> 标签：php, symfony1, composer-php

我有这个定义：

```
{
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "symfony/sfGuardPlugin",
                "version": "4.0.2",
                "dist": {
                    "url": "http://plugins.symfony-project.org/get/sfGuardPlugin/sfGuardPlugin-4.0.2.tgz",
                    "type": "tar"
                }
            }
        }
    ],
    "require": {
        "symfony/sfGuardPlugin": "4.0.*"
    }
} 
```

我正在使用 Symfony 1，我想将它们安装在`plugins/sfGuardPlugin/`. 我该如何指定？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-08-09T12:39:47.120

似乎您可以将`vendor`dir定义为[其他内容](https://getcomposer.org/doc/06-config.md#vendor-dir)（`plugins`在您的情况下）：

```
{
    "config": {
        "vendor-dir": "plugins"
    }
} 
```

然后，您可以重命名包名称以使其内部没有级别目录，例如：

```
 "package": {
            "name": "sfGuardPlugin", 
```

所以，你`composer.json`应该是这样的：

```
{
    "config": {
        "vendor-dir": "plugins"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "sfGuardPlugin",
                "version": "4.0.2",
                "dist": {
                    "url": "http://plugins.symfony-project.org/get/sfGuardPlugin/sfGuardPlugin-4.0.2.tgz",
                    "type": "tar"
                }
            }
        }
    ],
    "require": {
        "sfGuardPlugin": "4.0.*"
    }
} 
```

**编辑**

使用这个配置，你会得到路径（这对 symfony 来说*当然*不好）：

> 插件/sfGuardPlugin/sfGuardPlugin-4.0.2/

我找到了一个解决方法`composer.json`：

```
{
    "config": {
        "vendor-dir": "plugins"
    },
    "repositories": [
        {
            "type": "package",
            "package": {
                "name": "sfGuardPlugin",
                "version": "4.0.2",
                "source": {
                    "url": "http://svn.symfony-project.com/plugins/sfGuardPlugin/",
                    "type": "svn",
                    "reference": "branches/1.3/"
                }
            }
        }
    ],
    "require": {
        "sfGuardPlugin": "4.0.*"
    }
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-19T00:16:13.677

您还可以使用[composer/installers](http://composer.github.com/installers/)，这是一个具有“symfony1-plugin”包类型的多框架作曲家库安装程序。这就是我的 composer.json 文件的样子，以便它安装 Symfony 1.4（在 lib/vendor 中）和在 (/plugins) 中的插件：

```
{
    "config": {
        "vendor-dir": "lib/vendor"
    },
    "repositories": {
        "symfony": {
            "type": "package",
            "package": {
                "name": "symfony/symfony1",
                "version": "1.4",
                "dist": {
                    "url": "https://github.com/symfony/symfony1/zipball/1.4",
                    "type": "zip"
                }
            }
        },
        "sfResquePlugin" : {
            "type": "package",
            "package": {
                "name": "devpips/sfResquePlugin",
                "type": "symfony1-plugin",
                "version": "0.1",
                "dist": {
                    "url": "https://github.com/devpips/sfResquePlugin/zipball/master",
                    "type": "zip"
                }
            }
        }
    },
    "require": {
        "composer/installers": "dev-master",
        "symfony/symfony1": "1.4",
        "devpips/sfResquePlugin":"0.1"
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-04-18T18:48:27.293

请参阅[`COMPOSER_VENDOR_DIR`](https://getcomposer.org/doc/03-cli.md#composer-vendor-dir)环境变量。

> 通过设置此 var，您可以让 Composer 将依赖项安装到供应商以外的目录中。

如果您想在特定环境中覆盖它，例如 vagrant 或 docker，您不希望它位于共享文件夹/卷中，这可能会有所帮助。

正如 J0k 所说，[`vendor-dir`](https://getcomposer.org/doc/06-config.md#vendor-dir)在`config``composer.json`

> 默认为供应商。如果需要，您可以将依赖项安装到不同的目录中。$HOME 和 ~ 将替换为您在 vendor-dir 中的主目录路径以及下面的所有 *-dir 选项。

# php - 找不到类“Memcache”和 PHP

> ID：11883378
> 
> 赞同：19
> 
> 时间：2012-08-09T12:23:34.000
> 
> 标签：php, memcached, xampp

我通过在 Windows7 上阅读[这篇文章](http://www.leonardaustin.com/technical/how-to-install-memcached-on-xampp-on-windows-7)安装了 memcached但不幸的是我不断收到错误`Fatal error: Class 'Memcache' not found in D:\xampp\htdocs\test\memcache\test.php on line 2`

第 2 行：`$memcache = new Memcache;`

Win7 64，已安装 Xampp。我`net start "memcached Server"`在命令行上使用，但它说服务已经启动。

其他一些可能有帮助的信息；

在 php.ini 文件中：

```
extension=php_memcache.dll

    [Memcache]  
    memcache.allow_failover = 1  
    memcache.max_failover_attempts=20  
    memcache.chunk_size =8192  
    memcache.default_port = 11211 
```

更新：phpinfo(); 显示 dll 未加载。到目前为止尝试了几个不同的dll文件，没有工作。dll的位置也正确。它似乎在正确的文件夹中。

（PS 有些人可能认为关于这个主题可能有重复，但[只有 1 人](https://stackoverflow.com/questions/9956901/fatal-error-class-memcache-not-found-when-installing-memcached-on-windows-s)遵循相同的说明并在 SO 中出现相同的错误。该问题自 3 月以来没有答案或解决方案。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T08:43:56.593

我找到了 PHP 5.4.4 的工作 dll 文件

我不知道它们有多稳定，但它们确实有效。学分转到[此链接](http://grokbase.com/t/php/pecl-dev/126x59m1c1/memcache-ext-for-5-4-win-32-bit-zts-vc9-please#20120629frq5tnd2kvnpak349178njqnq0)。

> [http://x32.elijst.nl/php_memcache-5.4-nts-vc9-x86.zip](http://x32.elijst.nl/php_memcache-5.4-nts-vc9-x86.zip)
> 
> [http://x32.elijst.nl/php_memcache-5.4-vc9-x86.zip](http://x32.elijst.nl/php_memcache-5.4-vc9-x86.zip)
> 
> 它是 2.2.5.0 版本，我在编译后注意到（对于 PHP 5.4.4）。

请注意，它不是 2.2.6 但可以工作。我还将它们镜像到我自己的 FTP 中。镜像链接：

> [http://mustafabugra.com/resim/php_memcache-5.4-vc9-x86.zip](http://mustafabugra.com/resim/php_memcache-5.4-vc9-x86.zip) [http://mustafabugra.com/resim/php_memcache-5.4-nts-vc9-x86.zip](http://mustafabugra.com/resim/php_memcache-5.4-nts-vc9-x86.zip)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T09:35:26.077

将此添加到您的 php.ini 中：

```
extension="php_memcache.dll" 
```

并重新启动apache

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-15T00:48:48.110

Memcached 仅使用标准文本接口，因此可以在没有模块的情况下使用它。

```
// connect
$link = fsockopen($host,$port,$errno,$errst,$timeout);

// set
$data = sprintf("set %s 0 %s %s\r\n%s\r\n",
            $key,$expire,strlen($value),$value);
fwrite($link,$data);
$result = trim(fgets($link));
if ($result == 'ERROR') {
    // :(
}

// get
$data = sprintf("get %s\r\n",$key);
fwrite($link,$data);
$line = rtrim(fgets($link)); 
if ($line != 'END') {
    return rtrim(fgets($link));
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-11T16:08:19.603

所以我现在一直在寻找解决方案。在这里您可以下载一些已编译的扩展。

[http://downloads.php.net/pierre/](http://downloads.php.net/pierre/)

问题是目前**PHP 5.4**没有 memcache 扩展。这就是您的扩展无法加载的问题。您需要正确的 PHP 版本和适用于 Windows 的 Tead Safe 的扩展。

因此，如果您需要扩展，最简单的方法是使用**PHP 5.3 。**

memcache 的最新版本是**3.0.6**版，但它是 beta 版，您可以在此处查看。

[http://pecl.php.net/package/memcache](http://pecl.php.net/package/memcache)

您可以尝试获取 beta 版本并使用您的 Windows 系统进行[编译。](http://www.php.net/manual/de/install.windows.building.php)但它的工作量很大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-14T09:19:06.960

问题也可能是在 apache .conf 文件的某处加载另一个版本的 php 模块。需要检查重复的“LoadModule php ...”指令以及该模块是否编译为正确的 apache 版本。听起来很简单，但当您在一台机器上有多个版本的 php 时就不是这样了:) 或者它也可能是 SElinux 问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-10T08:20:11.793

xampp windows 版本是 32bit，你必须使用 32bit memcache.dll

我洞对你有用！

# php - 无效的参数 foreach()，NULL 数组

> ID：11883382
> 
> 赞同：1
> 
> 时间：2012-08-09T12:23:41.390
> 
> 标签：php, zend-framework

控制器代码：

```
public function searchAction() //search action for items
{ 
    $form = new Application_Form_Search(); //pass through search form
    $form->submit->setLabel('Search Item!'); //set submit button as 'Search item!'

    $this->view->form = $form; //pass to search.phtml

    if ($this->getRequest()->isPost()) {    //Check if 'Submit' button is clicked
         $formData = $this->getRequest()->getPost(); //Checking the values from the 'Submit' button
         if ($form->isValid($formData)) {    //Check if form is valid

            $item = new Application_Model_Item($form->getValues());  //Plug in values into item object  
            $db = new Application_Model_DbTable_Item(); //Create an item object for DbTable_Item              
            $db->searchItem($item->getName()); //search item in DbTable_Item via the searchItem
            $this->_helper->redirector->gotoSimple('search', 'item' );

        } else {
           //If the data is not valid, redisplay the information on the form so that 
           //the user can correct appropriately.
            $form->populate($formData);  

        }
    }

} 
```

表格代码：

```
<?php

    class Application_Form_Search extends Zend_Form
    {
        public function init()
        {
        $this->setName('search');

        $search = new Zend_Form_Element_Submit('submit');
        $search->setLabel('Search');
        $search->setAttrib('itemname', 'submitbutton');

        $itemname = new Zend_Form_Element_Text('itemname'); //create text box for stock
        $itemname->setLabel('Search Item Name:')
        ->setRequired(true)
        ->addFilter('StripTags')
        ->addFilter('StringTrim')
        ->addValidator('Alpha')
        ->addValidator('NotEmpty');  

        //$list->setLabel('List');      
        //remember to add the declare form elements to form
        $this->addElements(array($itemname, $search));  
        }
    } 
```

型号代码：

```
 public function searchItem($itemname) //search item based on itemname
    {

        $itemname = (string)$itemname; //let itemid to be integer
       // $sql = 'SELECT * FROM item WHERE `itemname` LIKE ?';
        //$row = $this->fetchRow('itemname LIKE % . $itemname . %'); //find Row based on itemid
        //$row = $this->fetchRow($sql, '%'.$itemname.'%');

        $select = $this->select() //select from usertable and memberdetail
        ->from(array('item')) //join memberdetail and usertable through memberid = username
        ->where('itemname LIKE "%?%"', $itemname);
        $row = $this->fetchAll($select);
        if (!$row) { //if row can't be found
            throw new Exception("Could not find row $itemname"); //Catch exception where itemid is not found

        }
        return $row->toArray();
    }

foreach:

    <?php var_dump($this->item); ?>
    <?php foreach($this->item as $item) : ?>
        <?php echo $this->escape($item['itemid']);?>
        <?php echo $this->escape($item['image']);?>
        <?php echo $this->escape($item['itemname']);?>
        <?php echo $this->escape($item['description']);?>
        <?php echo $this->escape($item['itemtype']);?>
    <?php endforeach; ?> 
```

嗨我试图做一个搜索页面，但我一直收到 foreach() 错误。做了一个var_dump，它说NULL。想知道我哪里出错了。在决定向你们寻求帮助之前，他们在同一个问题上停留了几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:34:27.603

您有一个案例，您没有为 $item 赋予任何价值。您可以尝试添加

```
ing:
    } else {
               //If the data is not valid, redisplay the information on the form so that 
               //the user can correct appropriately.
                $form->populate($formData);  
                $item = array(); //add this here or before the if block    
            } 
```

否则加...

```
<?php if(!is_null($this->item)){ ?>
    <?php foreach($this->item as $item) : ?>
        <?php echo $this->escape($item['itemid']);?>
        <?php echo $this->escape($item['image']);?>
        <?php echo $this->escape($item['itemname']);?>
        <?php echo $this->escape($item['description']);?>
        <?php echo $this->escape($item['itemtype']);?>
    <?php endforeach; ?>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:29:37.063

在 foreach 中尝试：

```
$myItems = $this->item;

<?php foreach($myItems as $item) : ?> 
```

# vba - 如何使用 VBA 从 Excel 图表中删除系列

> ID：11883389
> 
> 赞同：3
> 
> 时间：2012-08-09T12:23:55.660
> 
> 标签：vba, excel, charts, excel-2003

我正在尝试使用 VBA 从 Excel 2003 中的图表中删除空系列。我已经看到其他人过去曾遇到过这个问题，我已经尝试了他们帖子中提到的所有方法，但找不到任何可以始终如一的方法。

该图表中有 14 个系列，其中 3 或 9 个之间的任何地方都可以是空的。空的总是在系列 4 - 12 之间。

我尝试了一些代码变体，但这主要是：

```
Sheets("chart-1").Select
ActiveChart.PlotArea.Select
For i = 12 To 4 Step -1
    Dim theSeries As Series
    MsgBox (ActiveChart.SeriesCollection(i).Name)
    Set theSeries = ActiveChart.SeriesCollection(i)
    MsgBox (theSeries.Name)
    theSeries.Delete
Next 
```

我可以为图表成功运行一次，但所有后续循环都失败并出现`Unable to get the Name property of the Series class`错误。它在调用 .Name 时失败。

我可以通过直接插入整数来使其工作，但它只会对除 1 之外的所有整数运行一次。它会多次运行`Series(1)`.

例如，如果我简单地调用：ActiveChart.SeriesCollection(1).Delete，则该系列将被删除，但如果我随后使用另一个整数 (4、9、12) 运行它，它将不会运行。它将再次为 1 工作，但仅适用于 1。它也适用于其他整数（比如 4），但即使我将整数更改为 1 或将其保持为 4，或将其更改为其他整数，所有后续调用都会失败数字。

这种行为真的很奇怪。

任何想法将不胜感激。我不能简单地`ActiveChart.SeriesCollection(1).Delete`重复调用，因为前 3 个系列总是非空的。

谢谢。

** 更新 **

我刚刚手动运行了一个测试，执行以下操作：

```
Sheets("ch-v2-12mth").Select
ActiveChart.PlotArea.Select
MsgBox (ActiveChart.SeriesCollection(1).Name) 
```

我通过 SeriesCollection 循环尝试数字 1 - 16（图表中只有 14 个系列）以查看结果。1 - 3 工作正常 4 - 13 出错`Unable to get the Name property of the Series class` 14 工作正常 15 - 16 出错`Method 'SeriesCollection' of object '_Chart' failed`<- 考虑到图表中的系列数量，这并不奇怪。

这种行为让我认为 Excel 存在错误。还有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-09T20:35:07.430

当您从图表中删除*所有系列时，Excel 中存在错误。*我的解决方法是始终在图表中保留至少一个系列（即使其中没​​有数据）。这似乎对我有用。

刚想到另一件事。当您删除一个系列时，所有剩余系列的索引都会减少一个，因此您无法通过从 1 循环到系列数来删除它们。你可以做的是有一个 do 循环删除它们直到`SeriesCollection.Count = 0`（或 1，见我之前的评论）。或者一个向后迭代并始终​​删除最后一个系列的 for 循环（即`SeriesCollection(SeriesCollection.Count).Delete`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-09T18:01:32.053

您不能删除所有系列，否则图表将自行删除。我要做的就是重命名所有现有的系列；然后输入你的代码来构建新的东西；然后运行另一个片段以删除您重命名的系列

```
'rename existing series
With ActiveChart
 DoEvents
    For i = .FullSeriesCollection.Count To 1 Step -1
        .FullSeriesCollection(i).Name = "remove" & i
    Next i
End With

'your code here to build new charts

'last piece of code to remove the earlier series marked for deletion
With ActiveChart
 DoEvents
    For c = .SeriesCollection.Count To 1 Step -1
        If .SeriesCollection(c).Name Like "*Series*" Then .SeriesCollection(c).Delete
    Next c
End With
'also, you need to step backwards because each time you remove a series it will re-index 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-06T14:46:11.037

您可以将代码简化为：

```
Sheets("chart-1").Select
For i = 12 To 4 Step -1
    MsgBox "Series " & i & ": """ ActiveChart.SeriesCollection(i).Name & """"
    ActiveChart.SeriesCollection(i).Delete
Next 
```

我不知道为什么代码不适合您，但通常越简单越好。而且您无需知道系列名称即可删除系列。

# php - PHP SQL if field.value = '?' 包括 page.php 其他

> ID：11883390
> 
> 赞同：1
> 
> 时间：2012-08-09T12:24:01.960
> 
> 标签：php, mysql

谁能看到我在这里做错了什么？我试图根据数据库中字段的值包含某个页面。

我有 2 张桌子要检查，

如果用户名出现在 table.1 和 field.units = days inlcude days.php

如果用户名出现在 table.1 和 field.units = hours inlcude hours.php

如果用户名出现在 table.2 和 field.units = days inlcude days.php

如果用户名出现在 table.2 和 field.units = hours inlcude hours.php

```
 $username = $USER->firstname.'&nbsp;'.$USER->lastname;

    echo $username;

    $is_academic_result = mysql_query('SELECT * from holiday_entitlement_academic where employee = '.$username.'');
    $is_business_result = mysql_query('SELECT * from holiday_entitlement_business_manual where employee = '.$username.'');

    if(mysql_num_rows($is_academic_result) > 0){
    while($is_academic = mysql_fetch_array($is_academic_result)) {
    if ($is_academic['units'] == 'days'){include('days.php');}
    else if ($is_academic['units'] == 'hours'){include('hours.php');}
    }
    }

    else if(mysql_num_rows($is_business_result) > 0){
    while($is_business = mysql_fetch_array($is_business_result)) {
    if ($is_business['units'] == 'days'){include('days.php');}
    else if ($is_business['units'] == 'hours'){include('hours.php');}
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:27:51.627

如果您的用户名确实包含`&nbsp;`（这似乎是一个糟糕的设计），那么您在查询中缺少引号`$username`。正如您现在所拥有的那样，存在语法问题，您在最后留下一个单引号而根本没有引用`$username`。

```
// Use double quotes on the string, and single around $username
$is_academic_result = mysql_query("SELECT * from holiday_entitlement_academic where employee = '$username'");
// Same thing...
$is_business_result = mysql_query("SELECT * from holiday_entitlement_business_manual where employee = '$username'"); 
```

如果您对结果资源进行一些错误检查，就会发现这些问题：

```
if (!$is_academic_result) {
  // Query problem
  echo mysql_error();
}
// Same for the other query... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:30:00.020

首先，您不需要在`while`循环中执行任何这些操作，因为只会返回一个或零个结果（您正在检查主键，对吗？）。

其次，您的查询设置不正确 - 您使用的是单引号，但从不转义它们。

因此，考虑到这一点，我们执行以下操作：

```
$is_academic_result = mysql_query('SELECT * from holiday_entitlement_academic where employee = \'' . $username . '\'');
$is_business_result = mysql_query('SELECT * from holiday_entitlement_business_manual where employee = \'' . $username . '\'');

if($is_academic = mysql_fetch_array($is_academic_result)) {
    switch($is_academic['units']) {
        case 'days':
            include_once('days.php');
            break;
        case 'hours':
            include_once('hours.php');
            break;
        default:
            break;
    }
} else if ($is_business = mysql_fetch_array($is_business_result)) {
    switch($is_business['units']) {
        case 'days':
            include_once('days.php');
            break;
        case 'hours':
            include_once('hours.php');
            break;
        default:
            break;
    }
} 
```

**请注意**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

**编辑**如果您不确定问题出在哪里，您可以随时`echo`查询以确保您将您认为传递给数据库的内容传递给数据库（通常，当查询不起作用时，要么是这个，或者你的逻辑不好）。

# file - 更改项目根目录 Aptana 3

> ID：11883393
> 
> 赞同：1
> 
> 时间：2012-08-09T12:24:16.847
> 
> 标签：file, project, aptana

当我在磁盘上重命名 Aptana 项目的源文件夹时，有没有办法在 IDE 中更改项目的路径而不删除它并重新创建一个新路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T23:37:46.053

您可以直接从 IDE 中移动项目：

1.  **在 Aptana Studio 中，使用Window** > **Show View** > **Other...** > **General** > **Navigator**打开 Navigator 视图；

2.  在导航器视图中，右键单击项目并选择**移动...**

# java - 消息、处理程序和线程：Lego Mindstorms 蓝牙通信

> ID：11883396
> 
> 赞同：2
> 
> 时间：2012-08-09T12:24:32.980
> 
> 标签：java, android, concurrency, lego, mindstorms

这个问题是指编写一个与乐高头脑风暴机器人上的 NXT 块通信的应用程序。

# 我想做的事

NXC（不完全是 C，一种用于为 NXT 编写程序的语言）提供了一个函数，该函数`until(condition)`等待*条件*评估为真。我想使用蓝牙消息协议来实现这一点，通过蓝牙从 android 应用程序与 NXT 交谈。

**到目前为止我能做的：**

我能够发送一个输入查询消息 ( `getInputValue(int in)`)，它向 NXT 发送一条消息，询问输入的当前*状态*。然后，NXT 会发回一条包含此信息的消息，然后将其写入保存最近询问的输入值的全局变量（我们称之为`myValue`）。

**问题是什么：**

我正在使用乐高 MINDroid 应用程序中的点点滴滴——在这个类中，我有一个单独的通信线程来处理与 NXT 的直接通信。当它收到一条消息时，它会通过`Handler`. 当我尝试忙于等待回复时会出现问题 - 执行以下操作：

```
while(myValue != valueIWant) {
  sleep(100);
  getInputValue(in);
} 
```

最终忙于主线程，因此处理程序实际上永远不会收到任何消息。通信线程从 NXT 接收消息，将它们转发到主线程，但处理程序永远不会被调用，因为它正在做其他事情。

解决这个问题的最佳方法是什么？我不能让线程以任何方式等待，因为这也会阻止它接收消息:(

任何建议，将不胜感激！我也很乐意详细说明任何代码。

### 可能有用的链接

[http://bricxcc.sourceforge.net/nbc/nxcdoc/nxcapi/main.html](http://bricxcc.sourceforge.net/nbc/nxcdoc/nxcapi/main.html)

[http://github.com/NXT/LEGO-MINDSTORMS-MINDdroid](http://github.com/NXT/LEGO-MINDSTORMS-MINDdroid)

[http://mindstorms.lego.com/en-us/support/files/default.aspx](http://mindstorms.lego.com/en-us/support/files/default.aspx)（用于蓝牙文档）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:06:34.693

解决，使用回调:) 如果需要，很高兴详细说明。

编辑：（抱歉回复晚了！）

我最终实现了一个回调过程，我将一个“回调”函数附加到某个列表。当处理程序接收到消息时，它将查看回调列表并查看接收到的消息是否与存在的任何回调函数匹配 - 如果是，它将执行回调中的方法。

然后我围绕这些回调创建了一个类，我可以在其中创建执行队列 (doA; doB; doC;) 并将它们包装成一个回调链 (callBack({doA; callBack({doB; call...}) }))，这给人的印象是我在同步环境中运行，而实际上它是在异步运行的。

# php - 如何在 CakePHP Auth 组件中使用 SHA512？

> ID：11883402
> 
> 赞同：0
> 
> 时间：2012-08-09T12:24:42.507
> 
> 标签：php, cakephp

我在使用 Auth 组件时遇到了一个奇怪的问题。

这是我的**AppController.php**

```
App::uses('Controller', 'Controller');
App::uses('Security', 'Utility');

class AppController extends Controller {

    public function beforeFilter()
    {
        parent::beforeFilter();
        Security::setHash('sha512');        
    }
} 
```

如您所见，我将 sha512 设置为哈希。现在，使用 AuthComponent 我看到密码没有使用 sha512 进行哈希处理，但仍然使用 sha1，Auth 组件执行的查询是：

```
SELECT `User`.`id`, `User`.`email`, `User`.`pwd`, `User`.`nome` FROM `example`.`users` AS `User` WHERE `User`.`email` = 'example@example.com' AND `User`.`pwd` = '62d09334d3815d28143792ba12cd386bb7417e1e' LIMIT 1 
```

密码显然**不是**sha512。

如何在 AuthComponent 中强制 sha512？

谢谢

# android - 如何在android上控制cpu节流

> ID：11883404
> 
> 赞同：3
> 
> 时间：2012-08-09T12:24:45.647
> 
> 标签：android, cpu, throttling

我在 android 上有重型实时图像处理应用程序，刚拿到三星 Galaxy S3 (9300)。

我观察到的是该设备正在对 CPU 速度进行严重限制。

通常我的应用程序以大约 30 的最大帧速率启动时非常快，然后在几分钟后下降到 9 fps（这比我的旧 Galaxy S 9000 慢）。我做了一些评估，打印出来的时候/

系统/设备/系统/cpu/cpu0/cpufreq/scaling_cur_freq

您可以看到 CPU 速度从 1.4GHz 变为 800Mhz。

这种行为对于在 android 上运行的任何游戏都是致命的，所以我想知道游戏开发者如何控制这种行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T08:35:09.010

原来是散热问题。随着应用程序的运行，Android 电池温度正在上升。在 48 度时，android 操作系统已将 cpu 从 1.4 Ghz 降低到 0.8 Ghz。

# c# - Graphics.DrawString - 组合变音标记的错误绘制

> ID：11883405
> 
> 赞同：2
> 
> 时间：2012-08-09T12:24:50.800
> 
> 标签：c#, winforms, graphics, gdi+

我正在尝试绘制文本，其中包含来自“组合变音符号”unicode 子范围（U+0300 - U+FE23）的符号。例如，我尝试绘制字符串“T̅”，其中包含两个字符：“T”和“\u0305”。

我有这个：

![不正确的 GDI+ 渲染](../Images/d4a9e58229955dced13e6a3b11e1a120.png)

有没有办法得到正确的文本？

另外：我也需要绘制旋转文本。

* * *

PS：我的代码：

```
private void Form1_Paint(object sender, PaintEventArgs e) {
  Graphics g = e.Graphics;
  Font fontTahoma = new Font("Tahoma", 16);
  Font fontTimesNewRom = new Font("Times New Romulan", 16);
  Font fontArial = new Font("Arial", 16);
  Brush brush = new SolidBrush(Color.Red);
  g.DrawString("Test1 T̅ T\u0305", fontTahoma, brush, new PointF(20, 20));
  g.DrawString("Test1 T̅ T\u0305", fontTimesNewRom, brush, new PointF(20, 40));
  g.DrawString("Test1 T̅ N\u0305", fontArial, brush, new PointF(20, 60));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:34:43.893

TextRenderer 似乎画得更好：

```
TextRenderer.DrawText(g, "Test1 T̅ T\u0305", fontTahoma, 
                                            new Point(120, 20), Color.Black); 
```

![在此处输入图像描述](../Images/a4ddbfe5b33ff64f65aed08ed5d91118.png)

# android - 如何将 android 中 MenuItems 的语言更改为阿拉伯语？

> ID：11883407
> 
> 赞同：1
> 
> 时间：2012-08-09T12:24:53.337
> 
> 标签：android

我用**英语**创建了一个应用程序。现在我在**res/values-cn**的帮助下用**阿拉伯语**改变了它，它工作正常。现在我想在我的应用程序中实现菜单。我已按照此链接制作自定义菜单。[http://www.codeproject.com/Articles/173121/Android-Menus-My-Way#](http://www.codeproject.com/Articles/173121/Android-Menus-My-Way#)。

 **它工作正常。并且 MenuItem 的标题也在模拟器中更改为阿拉伯语。但是在手机里找不到解决办法。

我的问题是，**如何在 android 设备中更改 MenuItem 的标题。**

```
This is my code which i edited in Demo.java

package com.menu;

import java.util.ArrayList;
import java.util.Locale;

import com.menu.CustomMenu.OnMenuItemSelectedListener;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.res.Configuration;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.Gravity;
import android.view.KeyEvent;
import android.widget.Toast;

/**
 * Demo class
 *
 * This is class demonstrates how to use the custom menu helper classes.
 *
 * @category   Demos
 * @author     William J Francis (w.j.francis@tx.rr.com)
 * @copyright  Enjoy!
 * @version    1.0
 */

public class Demo extends Activity implements OnMenuItemSelectedListener {

    /**
     * Some global variables.
     */
    Typeface typeface;
    private CustomMenu mMenu;
    public static final int MENU_ITEM_1 = 1;
    public static final int MENU_ITEM_2 = 2;
    public static final int MENU_ITEM_3 = 3;
    public static final int MENU_ITEM_4 = 4;

    /**
     * Always called when an Android activity launches.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        //create the view
        super.onCreate(savedInstanceState);
        Locale locale = new Locale("cn");
        Locale.setDefault(locale);
        Configuration config = new Configuration();
        config.locale = locale; 
        getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());
        typeface = Typeface.createFromAsset(getAssets(),"arabtype.ttf");
        setContentView(R.layout.main);
        //initialize the menu
        mMenu = new CustomMenu(this, this, getLayoutInflater());
        mMenu.setHideOnSelect(true);
        mMenu.setItemsPerLineInPortraitOrientation(4);
        mMenu.setItemsPerLineInLandscapeOrientation(8);
        //load the menu items
        loadMenuItems();
    }

    /**
     * Snarf the menu key.
     */
    public boolean onKeyDown(int keyCode, KeyEvent event) { 
        if (keyCode == KeyEvent.KEYCODE_MENU) {
            doMenu();
            return true; //always eat it!
        }
        return super.onKeyDown(keyCode, event); 
    } 

    /**
     * Load up our menu.
     */
    private void loadMenuItems() {
        //This is kind of a tedious way to load up the menu items.
        //Am sure there is room for improvement.

        ArrayList<CustomMenuItem> menuItems = new ArrayList<CustomMenuItem>();
        CustomMenuItem cmi = new CustomMenuItem();
        //String str = "hello";
        cmi.setTypeface(typeface);
        cmi.setCaption(getString(R.string.first)); 
        cmi.setImageResourceId(R.drawable.icon1);
        cmi.setId(MENU_ITEM_1);
        menuItems.add(cmi);
        cmi = new CustomMenuItem();
        cmi.setCaption(getString(R.string.second));
        cmi.setImageResourceId(R.drawable.icon2);
        cmi.setId(MENU_ITEM_2);
        menuItems.add(cmi);
        cmi = new CustomMenuItem();
        cmi.setCaption("Third");
        cmi.setImageResourceId(R.drawable.icon3);
        cmi.setId(MENU_ITEM_3);
        menuItems.add(cmi);
        cmi = new CustomMenuItem();
        cmi.setCaption("Fourth");
        cmi.setImageResourceId(R.drawable.icon4);
        cmi.setId(MENU_ITEM_4);
        menuItems.add(cmi);
        if (!mMenu.isShowing())
        try {
            mMenu.setMenuItems(menuItems);
        } catch (Exception e) {
            AlertDialog.Builder alert = new AlertDialog.Builder(this);
            alert.setTitle("Egads!");
            alert.setMessage(e.getMessage());
            alert.show();
        }
    }

    /**
     * Toggle our menu on user pressing the menu key.
     */
    private void doMenu() {
        if (mMenu.isShowing()) {
            mMenu.hide();
        } else {
            //Note it doesn't matter what widget you send the menu as long as it gets view.
            mMenu.show(findViewById(R.id.any_old_widget));
        }
    }

    /**
     * For the demo just toast the item selected.
     */
    @Override
    public void MenuItemSelectedEvent(CustomMenuItem selection) {
        Toast t = Toast.makeText(this, "You selected item #"+Integer.toString(selection.getId()), Toast.LENGTH_SHORT);
        t.setGravity(Gravity.CENTER, 0, 0);
        t.show();
    }
} 
```

和strings.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World, Demo!</string>
    <string name="app_name">CustomMenu</string>
    <string name="first">الأول</string>
    <string name="second">ثان</string>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:40:51.280

使用 cmi.setCaption( [getString](http://developer.android.com/guide/topics/resources/string-resource.html) (R.string.youString));

我已经获取了您提供的样本，将其导入到我的 Eclipse，从文件夹值中的 Eclipse strings.xml 打开，使用“ثان”再进行一次现场测试，并在添加项目时添加 getString 代码。

我得到了什么：

![在此处输入图像描述](../Images/898b13f0cc4302b53a5450796c4a2f9a.png)

我认为当您创建新的 string.xml 时 charset 存在一些问题 - 检查此文件是否获取 utf8（因为它可以在 Windows 中工作（cp1251 并且在 android 中不起作用（linux == utf8）） ）。**

# c# - Dynamicdatadisplay charplotter 在代码中设置标题

> ID：11883409
> 
> 赞同：1
> 
> 时间：2012-08-09T12:24:59.620
> 
> 标签：c#

[http://dynamicdatadisplay.codeplex.com/](http://dynamicdatadisplay.codeplex.com/)

如何在代码中设置 Chartplotter 轴标题？

```
plotterTotal.HorizontalAxis = new HorizontalDateTimeAxis() { Name = "dateAxis" };
                        plotterTotal.VerticalAxis = new VerticalIntegerAxis() { Name =         "powerAxis" }; 
```

此 xaml 的模拟

```
 //<d3:Header  Content="Counter power"/>
                        //<d3:VerticalAxisTitle Content="Power" Name="valueAxis"/>
                        //<d3:HorizontalAxisTitle Content="Date"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T07:16:55.767

旧帖子，但嘿...... [https://dynamicdatadisplay.codeplex.com/discussions/219647](https://dynamicdatadisplay.codeplex.com/discussions/219647)

基本上，如果您在 xaml 中设置了 Chart Plotter，则为图表设置标题并为其提供 Name 属性。

然后在您的代码中，引用该属性并设置其内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-04T03:10:48.660

试试这个，它对我有用。

```
HorizontalAxisTitle horizontalAxisTitle = new HorizontalAxisTitle();
horizontalAxisTitle.Content = "abc";

VerticalAxisTitle verticalAxisTitle = new VerticalAxisTitle();
verticalAxisTitle.Content = "def";

plotterTotal.Children.Add(horizontalAxisTitle );
plotterTotal.Children.Add(verticalAxisTitle  ); 
```

# c# - AutoMapper，在自定义类型转换器中调用 Mapper.Map()？

> ID：11883412
> 
> 赞同：2
> 
> 时间：2012-08-09T12:25:08.903
> 
> 标签：c#, automapper

我目前正在使用 AutoMapper 进行测试，但我目前遇到属性名称不匹配的情况，因此需要自定义类型转换。但是当我使用自定义类型转换器时，我必须手动映射所有其他属性吗？我当然不能在类型转换器中调用另一个 Map，因为这会导致溢出。

这是不需要的，因为每个模型最多有 3 个特定于模型的属性不匹配，所以我确实希望自动映射其他属性。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:31:43.500

您不需要使用自定义类型转换器来映射具有一些名称不匹配的属性的类。[正如他们所说](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)，自定义类型转换器适用于您需要“完全控制一种类型到另一种类型的转换”。

使用 设置地图，`CreateMap()`然后使用 设置一些额外的规则`ForMember()`，如下所示：

```
Mapper.CreateMap<Person, Customer>()
    .ForMember(dest => dest.Surname, opt => opt.MapFrom(src => src.LastName))
    .ForMember(dest => dest.DateOfBirth, opt => opt.MapFrom(src => src.DOB)); 
```

`LastName`这将and`DOB`从源`Person`类映射到目标类的`Surname`and`DateOfBirth`属性`Customer`。

# java - 如何在 PrimeFaces Export 中使用 JSF 中的保存或打开弹出窗口获取 pdf

> ID：11883413
> 
> 赞同：0
> 
> 时间：2012-08-09T12:25:18.157
> 
> 标签：java, jsf, export

如何像 PrimeFaces Export 一样在 JSF 中弹出保存或打开选项来获取 pdf

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:28:57.293

将以下标头添加到响应中

```
Content-Disposition: attachment; filename="yourFileName.pdf" 
```

从这个标题浏览器会知道这个响应是一个附件，它将执行为浏览器配置的默认操作

# php - 针对数组的 SQL 查询？

> ID：11883417
> 
> 赞同：0
> 
> 时间：2012-08-09T12:26:02.343
> 
> 标签：php, arrays

是否有任何类型的 php 库可以对数组执行 SQL 查询？

像这样的东西：

```
$array = array(
    array(
        "field_a" => "first_a"      
        "field_b" => "something"        
    ),
    array(
        "field_a" => "second_a"     
        "field_b" => "else"     
    ),
    array(
        "field_a" => "third_a"      
        "field_b" => "something"        
    )
);

$rows = arrayQuery($array, "SELECT field_a WHERE field_b = 'something'");

/*
$rows = array(
    array(
        "field_a" => "first_a"      
    ),
    array(
        "field_a" => "third_a"      
    )
);
 */ 
```

发现类似的东西：[http](http://blog.phpdeveloper.org/?p=61) ://blog.phpdeveloper.org/?p=61 ，但这不是查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:29:29.543

我相信[PHP 的 LINQ 可以](http://phplinq.codeplex.com/)解决问题。我认为这已经接近 PHP 中的“查询数组”。

# php - PHP文件保护机制因FF而崩溃

> ID：11883421
> 
> 赞同：0
> 
> 时间：2012-08-09T12:26:14.240
> 
> 标签：php, firefox, http-authentication

我有以下问题：
我有几个应该只对注册用户可见的图片库。
图像位于每个画廊的一个目录中，每个目录都有一个长而神秘的名称。
但是，如果您知道链接，则无需身份验证即可访问图像。
由于我在服务器端使用 PHP，一个简单的方法是使用 .htaccess 来“读取文件”，但我不想通过 php 传递数百个图像。

所以我尝试了一种不同的方法：我使用基本的 http 身份验证，使用动态生成的 .htpasswd 文件，其中包含每个登录用户的访问数据，该文件在 24 小时后和用户每次注销后重置，因此图像上的链接被破坏最大后。24 小时。
但我不希望用户为此身份验证输入神秘的、自动生成的用户名和密码，所以我使用这样的 url：
`http://username:password@path-to-image`
这在 chrome 中非常有效，但在 FF 中，当我想包含多个图像时，对于受保护的子目录，会出现输入用户名和密码的对话框。

一个例子：我有以下目录：
/gallery/one/
/gallery/two/
保护在 /gallery/ 的 .htaccess 文件中

有时 Firefox 仅从 /gallery/one/ 加载图像，有时仅从 /gallery/two/ 加载图像，有时这些都不加载，有时两者都加载。如果他没有加载其中至少一个，他会要求输入您的用户名和密码。
我无法解释这种行为，而且我还没有找到一种解决方案，可以让 FF 在不询问的情况下安全地接受多个带有用户名和密码的 url。
是否有解决此问题的方法，或者您有任何其他方法可以安全地保护服务器上的文件？提前致谢。

PS：我听说过 mod-xsendfile，但它无法安装在我的虚拟主机上。

# django - 保留部分生产数据以在 Django 中进行开发

> ID：11883435
> 
> 赞同：0
> 
> 时间：2012-08-09T12:26:48.267
> 
> 标签：django

我正在开发的 django 应用程序有助于编写报告。报告模板以及报告文本模板片段保存在数据库中。Django 中只有这两个模型的最佳实践是什么 - 报告模板和片段模板导出然后加载到开发环境中。

一种选择是[使用 dumpdata 和 loaddata](https://stackoverflow.com/questions/1596610/pull-data-from-production-to-dev-for-debugging-django)，但这似乎适用于所有事情，这是不可取的。

任何想法/提示/提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:33:13.490

`dumpdata`您可以使用可选参数转储特定模型的数据

[https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model](https://docs.djangoproject.com/en/dev/ref/django-admin/#dumpdata-appname-appname-appname-model)

`python manage.py dumpdata yourapp.YourModel`将仅输出特定模型的数据。

我喜欢在开发时镜像生产环境。只需将数据库导出到 .sql 文件即可非常轻松地完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T20:25:58.883

[根据这张票](https://code.djangoproject.com/ticket/16330)，另一个选项将在 Django 1.6 中可用。一旦登陆，您将能够使用`--pks`dumpdata 的参数从给定的表中选择您希望转储的 pks。

如果您希望在 1.6 发布之前开始使用它，您可以这样做，只需[从此处](https://github.com/django/django/blob/59235816bd063cb8b24acfc92ae1b5cd09a1f7ba/django/core/management/commands/dumpdata.py)获取文件。

# mysql - 如果 mysql 表中不存在，则添加一个新条目

> ID：11883436
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:26:57.500
> 
> 标签：mysql

好的，让我重新构建我的相同问题，以达到正确的输出。

我有一个下面结构的表。

```
mysql> desc depot;
+-------+----------+------+-----+---------+-------+
| Field | Type     | Null | Key | Default | Extra |
+-------+----------+------+-----+---------+-------+
| recd  | date     | YES  |     | NULL    |       |
| id    | int(11)  | YES  |     | NULL    |       |
+-------+----------+------+-----+---------+-------+

Currently I have records in the below manner.

mysql> select * from depot;
+---------------------+------+
| recd                | id   |
+---------------------+------+
| 2012-07-09          |   33 |
| 2012-07-11          |   32 |
| 2012-07-15          |   32 |
+---------------------+------+
3 rows in set (0.00 sec) 
```

我需要记录以下列方式打印查询，保留一个月日期的错过条目（比如 7 月 1 日至 7 月 31 日），并将值 id 设为 0 对应的错过日期。

```
select < a magical query >;

+------------+------+
| recd       | id   |
+------------+------+
 2012-07-01 0
 2012-07-02 0
 2012-07-03 0
 2012-07-04 0
 2012-07-05 0
 2012-07-06 0
 2012-07-07 0
 2012-07-08 0
 2012-07-09 33
 2012-07-10 0
 2012-07-11 32
 2012-07-12 0
 2012-07-13 0
 2012-07-14 0
 2012-07-15 32
 2012-07-16 0
 2012-07-17 0
 2012-07-18 0
 2012-07-19 0
 2012-07-20 0
 2012-07-21 0
 2012-07-22 0
 2012-07-23 0
 2012-07-24 0
 2012-07-25 0
 2012-07-26 0
 2012-07-27 0
 2012-07-28 0
 2012-07-29 0
 2012-07-30 0
 2012-07-31 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:38:41.623

```
SELECT
generated_date,
COALESCE(yourTable.id, 0) AS id
FROM
(
SELECT
DATE_SUB(CURDATE(), INTERVAL number_days DAY) AS `generated_date` /*<-- Create dates from now back 999 days*/
FROM
(
SELECT (a + 10*b + 100*c) AS number_days FROM
  (SELECT 0 AS a UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) aa
, (SELECT 0 AS b UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) bb
, (SELECT 0 AS c UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) cc
)sq /*<-- This generates numbers 0 to 999*/
) q
LEFT JOIN yourTable ON DATE(yourTable.datefield) = q.generated_date
WHERE q.generated_date BETWEEN (SELECT MIN(datefield) FROM yourTable) AND (SELECT MAX(datefield) FROM yourTable)
ORDER BY q.generated_date ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:59:12.000

找到了解决方法，因为它坚持了很长时间

基表

```
 CREATE TABLE `deopt` (
  `recd` datetime DEFAULT NULL,
  `id` int(11) DEFAULT NULL
) ENGINE=InnoDB; 
```

将记录播种到基表

```
insert into deopt values ('2012-07-09 23:08:54',22);
insert into deopt values ('2012-07-11 23:08:54',22);
insert into deopt values ('2012-07-11 23:08:54',2222);
insert into deopt values ('2012-07-12 23:08:54',22);
insert into deopt values ('2012-07-14 23:08:54',245); 
```

为一个月的日期创建一个表

```
CREATE TABLE seq_dates 
(
   sdate DATETIME NOT NULL,

); 
```

创建存储过程以创建调用月份的记录

```
delimiter //
DROP PROCEDURE IF EXISTS sp_init_dates;

CREATE PROCEDURE sp_init_dates (IN p_fdate DATETIME, IN p_tdate DATETIME)
BEGIN 
DECLARE v_thedate DATETIME; 
TRUNCATE TABLE seq_dates; 
SET v_thedate = p_fdate;
WHILE (v_thedate <= p_tdate) DO 
   INSERT INTO seq_dates (sdate) 
   VALUES (v_thedate); 
   SET v_thedate = DATE_ADD(v_thedate, INTERVAL 1 DAY); 
END WHILE; 
END;

delimiter ; 
```

调用 7 月份的过程，并将开始和结束值播种到 seq_dates 表。

```
call sp_init_dates ('2012-07-01','2012-07-31'); 
```

结果查询 - 获取一个月内所有日期的记录及其对应的 id，保持 0 代替 id 的空值。

```
select date(seq_dates.sdate),coalesce (deopt.id,0) from seq_dates LEFT JOIN deopt ON date(deopt.recd)=date(seq_dates.sdate);

+-----------------------+-----------------------+
| date(seq_dates.sdate) | coalesce (deopt.id,0) |
+-----------------------+-----------------------+
| 2012-07-01            |                     0 |
| 2012-07-02            |                     0 |
| 2012-07-03            |                     0 |
| 2012-07-04            |                     0 |
| 2012-07-05            |                     0 |
| 2012-07-06            |                     0 |
| 2012-07-07            |                     0 |
| 2012-07-08            |                     0 |
| 2012-07-09            |                    22 |
| 2012-07-09            |                    22 |
| 2012-07-10            |                     0 |
| 2012-07-11            |                    22 |
| 2012-07-11            |                  2222 |
| 2012-07-11            |                    22 |
| 2012-07-11            |                  2222 |
| 2012-07-12            |                    22 |
| 2012-07-13            |                     0 |
| 2012-07-14            |                   245 |
| 2012-07-15            |                     0 |
| 2012-07-16            |                     0 |
| 2012-07-17            |                     0 |
| 2012-07-18            |                     0 |
| 2012-07-19            |                     0 |
| 2012-07-20            |                     0 |
| 2012-07-21            |                     0 |
| 2012-07-22            |                     0 |
| 2012-07-23            |                     0 |
| 2012-07-24            |                     0 |
| 2012-07-25            |                     0 |
| 2012-07-26            |                     0 |
| 2012-07-27            |                     0 |
| 2012-07-28            |                     0 |
| 2012-07-29            |                     0 |
| 2012-07-30            |                     0 |
| 2012-07-31            |                     0 |
+-----------------------+-----------------------+
35 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T12:35:45.993

作为两阶段查询：

```
SELECT @prev := null;

SELECT datefield, @prev, DATEDIFF(datefield, @prev) AS diff, @prev := datefield
FROM yourtable
HAVING diff > 1
ORDER BY datefield ASC; 
```

这将检测与前一行/日期相差超过 1 天的日期

# java - getter 方法的必要性

> ID：11883454
> 
> 赞同：9
> 
> 时间：2012-08-09T12:28:00.087
> 
> 标签：java

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

这是一个新手问题。是否非常有必要使用 getmethods 来访问属性值？一旦分配了值，就可以获取值目录。例如，在下面的代码中，`displayName()`可以在没有任何 getter 方法的帮助下显示 firstName 值。或者它是一个标准的编码标准，一个人必须有 getter 和 setter 方法或任何其他提供该值的方法？

```
class Test{

    private String firstName;

    public void setName(String fname){
        firstName = fname;
    }

    public void displayName() {
        System.out.println("Your name is " + firstName);
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T12:32:17.827

[告诉，不问](http://c2.com/cgi/wiki?TellDontAsk)是面向对象设计中的一个重要原则。一般来说，你应该告诉对象做事而不是问他们问题。每个地方的 getter/setter 都不鼓励这种做法，因为鼓励您进入对象内部并到达字段（或者更糟糕的是，在 setter 的情况下伸入并戳东西）。这会破坏封装并使您的代码更难推理。

在您的特定情况下，我将创建一个名为的对象，该对象`Name`具有一个构造函数，该构造函数采用名称和单个方法来显示它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T12:32:06.767

在您的情况下（显示显示名称），不需要提供 Getter。

但是如果您想在另一个类中使用该字段，我们需要提供 Getter 方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T12:33:03.897

Getter 和 setter 是 Java Bean 标准接口的一部分，许多框架（如 Hibernate）都希望它们到位。话虽这么说，当然由您决定是否需要它们以及何时需要它们以及用于什么目的。它们提供对您的私有成员变量的访问，它们甚至可以让您有机会做更多的事情，而不仅仅是简单的 get 和 set。

OO软件的重点是重用。这意味着其他程序员，或者多年后的你，可以将代码用于其他系统。

当您拥有私有成员变量并使用 get/set 函数时，您可以更改函数的内部实现，而不会破坏使用它的所有其他代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T12:31:01.457

请务必使用 Getter 和 Setter 来访问您的属性！

你应该看看[这篇文章...](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-09T12:33:49.800

拥有私有状态，封装是好的，在很多情况下这是正确的。假设您的类是线程安全的，具有您无法确保的公共字段。

另一方面，在某些情况下这是无用的！假设你只在一个包中访问你的对象，你确定你永远不会导出它，那为什么还要麻烦呢？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-09T12:39:24.043

我没有任何链接来支持这一点，但这就是我所做的。

如果公共字段不是静态的，我会尽量避免它们。所以我只使用受保护和私有字段。在课堂上，您无需获取/设置即可访问它们，这完全没问题。在课堂之外，总是尝试使用 get/set。

所以你的示例代码**对我来说**完全没问题。:)

编辑：对我来说，一个例外是如果我创建一个像这样的*struct*容器类

```
class Point4D {
  public int x1, x2, x3, x4;
} 
```

然后我认为公共领域是可以的。不过，最好将它们设为私有并命名吸气`public int x1()`剂等。一旦向该容器引入了一些更改实例*状态*的方法（例如更改 x1/x2/x3/x4 的值），我将它们设为私有并添加 get/set。

# c# - 如何从 MapPoint 控件中获取父窗口名称的名称？

> ID：11883457
> 
> 赞同：2
> 
> 时间：2012-08-09T12:28:14.207
> 
> 标签：c#, .net, winforms, controls, mappoint

我正在为 C# 中的 MapPoint 开发插件。有趣的是，当另一个程序在其自身中使用 MapPoint 控件时，也会加载加载项。我想做的是获取使用 MapPoint 控件的窗口的名称。

在加载项中，您可以像这样引用此应用程序实例：

```
Private MapPoint.Application thisApp = application as MapPoint.Application; 
```

但是，如果我查看父级，甚至是父级的父级，我会在 MapPoint 应用程序中遇到天花板。有没有办法从 C# 中的窗口控件调用的加载项中获取父窗口名称？

# opencv - Opencv：如何从现有矩阵创建新矩阵并进行一些更改？

> ID：11883461
> 
> 赞同：0
> 
> 时间：2012-08-09T12:28:18.480
> 
> 标签：opencv, matrix, copy, repeat

在 OpenCV 中，我有一个这样的矩阵： [3 4 2; 5 2 1; 6 7 9]，即 3x3 大小。现在我想把它改成 3x1 大小，像这样：[3 4 2 5 2 1 6 7 9]。但这并不是我想要的，我的实际目标是在每个值之前和之后放置零，同时将每个值重复 3 次。所以我的目标矩阵应该是这样的： [ 0 3 3 3 0 0 4 4 4 0 0 2 2 2 0 0 5 5 5 0 0 2 2 2 0 0 1 1 1 0 0 6 6 6 0 0 7 7 7 0 0 9 9 9 0]。我为此编写了以下代码：

```
for ( int i = 0; i < 3; i ++ )
    {
        for ( int j = 0; j < 3; j ++ )
        {               
                for ( int m = k + 1; m < m + 3; m ++ )
                {
                    dstMat.col (m) = srcMat.at <int> ( i, j );

                }

                k = k + 5 ;                 
        }
    } 
```

有没有更好的做法是？尤其是没有“for”循环的情况下，真的很费时间。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:12:18.687

您可以首先在矩阵上调用[reshape](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html)以将其展平为一行/列。这将为您节省一个 for 循环并使其更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:31:21.857

您可以使用[Mat::reshape](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=#Mat%20Mat%3a%3areshape%28int%20cn,%20int%20rows%29%20const)将 3x3 矩阵转换为 3x1。这样，您将需要一个 for 循环而不是两个，这是一个`O(1)`操作。

您可以使用 ROI 省略下一个 for 循环：

```
 srcMat.reshape(0,1);
  for (int i =0; i < 9; i++)
    dstMat(cv::Range::all(), cv::Range(i*5+1, i*5+4)).setTo(srcMat.at<int>(i)); 
```

这就是全部。

# .net - 有没有更好的方法在对象和数据库之间保存和检索数据？

> ID：11883462
> 
> 赞同：1
> 
> 时间：2012-08-09T12:28:19.200
> 
> 标签：.net

我一直在编写许多涉及 SQL Server 的 .NET 应用程序。

对于每个数据库表，我在 .NET 中编写了一个相应的类。

例子：

```
Class A
{
    property a;
} 
```

然后我必须编写另一个类来处理 A 类来保存和从数据库中检索：

```
Class AdB
{
    public A parse(Datatable objectA){} // for parsing objectA from db to A

    public void add(A a){}   // write query to add A into the database

    public void remove(A a) {} // write query to remove A from the database

    public void update(A a) {} // write query to update A into the database
} 
```

因此，我必须为以下方法编写测试用例：parse()、add()、remove() 和 update()

是否有最新的技术可以更简单地从数据库中保存和检索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:30:32.680

可能是[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)是你需要的吗？

# algorithm - 需要帮助计算该算法的操作复杂度

> ID：11883466
> 
> 赞同：2
> 
> 时间：2012-08-09T12:28:28.943
> 
> 标签：algorithm, complexity-theory, pascal, time-complexity

该算法取自 Alexander Shen 的伟大的“算法和编程：问题和解决方案”（即练习 1.1.28）。

*以下是我的俄语翻译，如有错误或歧义请见谅。如果您有这种感觉，请纠正我。*

## 算法应该做什么

> 用给定的自然*n*算法计算不等式的解数
> 
> ```
> x*x + y*y < n 
> ```
> 
> 在自然（非负）数中不使用实数操作

## 在帕斯卡

```
k := 0; s := 0;

{at this moment of execution
 (s) = number of solutions of inequality with
 x*x + y*y < n, x < k}
while k*k < n do begin
  l := 0; t := 0;

  while k*k + l*l < n do begin
    l := l + 1;
    t := t + 1;
  end;

  {at this line 
   (t) = number of solutions of k*k + y*y < n
   for given (k) with y>=0}
  k := k + 1;
  s := s + t;
end;

{k*k >= n, so s = number of solutions of inequality} 
```

* * *

在文中，Shen 还简要地说，该算法执行的操作数量“与*n*成正比，正如人们可以计算的那样”。所以我问你*如何*用严格的数学计算出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:55:09.207

嵌套循环完成的操作数是 2 个长度的乘积

例如：

```
for i=1 to 5
 for j = 1 to 10
  print j+i
 end
end 
```

将打印 5*10 = 50 次

在您的示例中，外部循环运行 sqrt(n) 次 - 直到 k^2=n 或 k=sqrt(n)。内部循环也运行 sqrt(n) 次。k 在循环中是恒定的，当 k^2+l^2>n 时它将停止，它可以运行的最多次数是 k=0 -> l^2>n => l>sqrt(n) 。所以总迭代次数最多为 sqrt(n)*sqrt(n) - O(n)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:56:04.463

你有两个循环，一个在另一个里面。

外部有这个条件：`k*k < n`所以`k`从`0`最多到`SQRT(n)`

并且内部循环有这个条件：`k*k + l*l < n`所以`l`从`0`up 到`SQRT(n-k^2)`. 但这比`SQRT(n)`

因此，最大迭代次数小于最大迭代次数`SQRT(n) * SQRT(n)`，`n`并且在每次迭代中都会完成恒定数量的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:40:35.793

您的算法所花费的时间与所进行的操作数量成正比。因此，您只需计算算法所花费的时间与输入 (n) 的增加大小成正比。您可以通过使用大范围的 n 对算法的完成进行计时并绘制`n vs time`图形来做到这一点。这样做应该会给你一个线性图。

# c# - TakeWhile，但也获取停止它的元素

> ID：11883469
> 
> 赞同：18
> 
> 时间：2012-08-09T12:28:31.543
> 
> 标签：c#, .net, linq, linq-to-objects

我想`TakeWhile`在 LINQ to Objects 上使用 LINQ 函数。但是，我还需要知道“破坏”函数的第一个元素，即条件不成立的第一个元素。

是否有一个函数可以获取所有不匹配的对象，以及第一个匹配的对象？

例如，给定集合`{1, 2, 3, 4, 5, 6, 7, 8}`，

```
mySet.MagicTakeWhile(x => x != 5); 
```

`=> {1, 2, 3, 4, 5}`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T12:31:17.997

我认为您可以使用[SkipWhile](http://msdn.microsoft.com/en-us/library/bb549075.aspx)，然后取第一个元素。

```
var elementThatBrokeIt = data.SkipWhile(x => x.SomeThing).Take(1); 
```

更新

如果你想要一个单一的扩展方法，你可以使用以下：

```
public static IEnumerable<T> MagicTakeWhile<T>(this IEnumerable<T> data, Func<T, bool> predicate) {
    foreach (var item in data) {
        yield return item;
        if (!predicate(item))
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T12:31:19.543

LINQ to Objects 没有这样的运算符。但是自己实现`TakeUntil` 扩展很简单。这是来自[moreLinq的](http://code.google.com/p/morelinq/)[一个这样的实现](http://code.google.com/p/morelinq/source/browse/MoreLinq/TakeUntil.cs)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:40:09.397

只是为了好玩：

```
var a = new[] 
    {
        "two",
        "three",
        "four",
        "five",
    };
  Func<string, bool> predicate = item => item.StartsWith("t");      
  a.TakeWhile(predicate).Concat(new[] { a.SkipWhile(predicate).FirstOrDefault() }) 
```

# database - CakePHP：用 save() 加/减？

> ID：11883470
> 
> 赞同：4
> 
> 时间：2012-08-09T12:28:39.133
> 
> 标签：database, cakephp, php

我试图通过 Cake 的 save() 函数简单地执行以下操作。

```
UPDATE user SET value = value-1 
```

但是，它似乎只能设置。它不会理解我传递给它的任何东西来增加或减少，而且互联网上似乎没有人遇到这个问题。:P 即使浏览了基于 CakePHP 2.0 构建的完整软件，我发现 $this->query() 用于增量更新！如果我还没有要设置的值，这真的是我要更新的方式吗？

（代码如下所示）

```
 $data = array('id' => uid, 'value' => "Users.value = Users.value - 1");
 $this->User->save($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:40:35.807

CakePHP 数据库中产生增量或减量的代码如下：

```
$this->User->updateAll(array('value' => 'value - 1'), array('id' => uid)); 
```

Arun 的回答不正确；您必须将 - 1 放在引号内以使 Cake 识别它是查询的一部分。否则它将尝试将所有 User.value 设置为 -1。 **请注意**，您必须将要更新的列的信息（标识符）放在第二个条件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:46:25.460

基本上你只需要使用 updateAll 来进行这样的原子查询

```
$this->User->updateAll($fields, $conditions); 
```

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-updateall-array-fields-array-conditions)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T12:57:46.913

您可以使用以下查询执行此操作：

```
$this->User->updateAll(array('User.value' => 'User.value' - 1));

//or
//$this->User->updateAll(array('User.value' => 'User.value' - 1), array('User.id' => $uid)); 
```

# drupal - Drupal 包括外部类

> ID：11883471
> 
> 赞同：1
> 
> 时间：2012-08-09T12:28:40.670
> 
> 标签：drupal, mailchimp

我想在我的 Drupal 模块中使用 MailChimp API 类，但我不知道如何将它包含在我的模块中。我已经添加了这个类，`sites/all/libraries`我不能通过`drupal_get_path()`. 包含外部库的*Drupal方法是什么？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:35:49.490

为什么不简单地为 Drupal使用[MailChimp模块？！](http://drupal.org/project/mailchimp)

**更新**

[如果它不适合您，请尝试实现与MailChimp](http://drupal.org/project/mailchimp)模块中相同的方法。

1）在您的模块文件夹中添加 MailChimp 类，假设它是`MailChimp.class.php`.

2）在您的模块中添加以下内容：

```
/**
 * Get a Mailchimp API object for communication with the mailchimp server.
 */
function mailchimp_get_api_object() {
  $q = new MailChimp();
  // You can add different parameters and validations for your class here
  return $q;
} 
```

正如您注意到的那样，类名应该与类文件名相同（`.class.php`应该添加，因为 Drupal 会自动找到类文件）。

# delphi - 扩展delphi类层次结构

> ID：11883474
> 
> 赞同：4
> 
> 时间：2012-08-09T12:28:47.470
> 
> 标签：delphi, design-patterns, interface

我想知道如何按照以下要求扩展具有附加功能的类层次结构：1）我无法触及原始层次结构 2）我需要将新功能开发到不同的单元中

以**uClasses.pas**单元中的以下类层次结构为例：

```
TBaseClass = class
  ID : Integer;
  Name : String;
end;

TDerivedClass = class(TBaseClass)
  Age : Integer
  Address : String
end; 
```

我想将其他功能附加到类中，例如将自身保存为文本（这只是一个示例）。所以我想象了以下单元**uClasses_Text.pas**：

```
uses uClasses;

Itextable = interface
  function SaveToText: String;
end;

TBaseClass_Text = class(TBaseClass, Itextable)
  function SaveToText: String;
end;

TDerivedClass_Text = class(TDerivedClass, ITextable)
  function SaveToText: String;
end;

function TBaseClass_Text.SaveToText: String;
begin
  result := Self.ID + ' ' + Self.Name;
end;

function TDerivedClass_Text.SaveToText: String;
begin
  // SaveToText on derived class must call SaveToText from the "BaseClass" and then append its additional fields  
  result := ???? // Call to TBaseClass_Text.SaveToText. Or better, ITextable(Self.ParentClass).SaveToText;
  result := result + Self.Age + ' ' + Self.Address;
end; 
```

如何从 TDerivedClass_Text.SaveToText 中引用 SaveToText 的“基本”实现？也许以某种方式处理界面？

或者，对于这种情况是否存在更好、更清洁的方法？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:56:58.003

正如大卫所指出的，您不能引用基类中不存在的方法。

使用类助手，可以以另一种方式解决您的问题。第一类助手`TBaseClassHelper`添加了一个`SaveToText`函数，第二类助手也是如此`TDerivedClassHelper`。查看第二个`SaveToText`功能的实现。它调用`inherited SaveToText`.

**更新 2**

OP 需要针对不同`SaveTo`实现的单独单元。在 David 和 Arioch 的评论的帮助下，类助手可以从其他类助手继承。这是一个完整的例子：

```
unit uClasses;

type    

  TBaseClass = class
    ID: Integer;
    Name: String;
  end;

  TDerivedClass = class(TBaseClass)
    Age: Integer;
    Address: String;
  end; 
```

* * *

```
unit uClasses_Text;

uses uClasses,uClasses_SaveToText,uClasses_SaveToIni,uClasses_SaveToDB;

type    
  ITextable = interface
    function SaveToText: string;
    function SaveToIni: string;
    function SaveToDB: string;
  end;

  // Adding reference counting through an interface, since multiple inheritance
  // is not possible (TInterfacedObject and TBaseClass) 
  TBaseClass_Text = class(TBaseClass, IInterface, ITextable)
  strict private
    FRefCount: Integer;
  protected
    function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;
    function _AddRef: Integer; stdcall;
    function _Release: Integer; stdcall;
  end;

  TDerivedClass_Text = class(TDerivedClass, IInterface, ITextable)
  strict private
    FRefCount: Integer;
  protected
    function QueryInterface(const IID: TGUID; out Obj): HResult; stdcall;
    function _AddRef: Integer; stdcall;
    function _Release: Integer; stdcall;
  end;    

implementation

uses Windows;

function TBaseClass_Text.QueryInterface(const IID: TGUID; out Obj): HResult;
begin
  if GetInterface(IID, Obj) then
    Result := 0
  else
    Result := E_NOINTERFACE;
end;

function TBaseClass_Text._AddRef: Integer;
begin
  Result := InterlockedIncrement(FRefCount);
end;

function TBaseClass_Text._Release: Integer;
begin
  Result := InterlockedDecrement(FRefCount);
  if Result = 0 then
    Destroy;
end;    

function TDerivedClass_Text.QueryInterface(const IID: TGUID; out Obj): HResult;
begin
  if GetInterface(IID, Obj) then
    Result := 0
  else
    Result := E_NOINTERFACE;
end;

function TDerivedClass_Text._AddRef: Integer;
begin
  Result := InterlockedIncrement(FRefCount);
end;    

function TDerivedClass_Text._Release: Integer;
begin
  Result := InterlockedDecrement(FRefCount);
  if Result = 0 then
    Destroy;
end; 
```

* * *

```
unit uClasses_SaveToText;

interface

uses uClasses;

type    
  TBaseClassHelper = class helper for TBaseClass
    function SaveToText: string;
  end;

  TDerivedClassHelper = class helper for TDerivedClass
    function SaveToText: string;
  end;

implementation

function TBaseClassHelper.SaveToText: string;
begin
  Result := 'BaseClass Text info';
end;

function TDerivedClassHelper.SaveToText: string;
begin
  Result := inherited SaveToText;
  Result := Result + ' DerivedClass Text info';
end; 
```

* * *

```
unit uClasses_SaveToIni;

interface

Uses uClasses,uClasses_SaveToText;

type    
  TBaseClassHelperIni = class helper(TBaseClassHelper) for TBaseClass
    function SaveToIni: string;
  end;

  TDerivedClassHelperIni = class helper(TDerivedClassHelper) for TDerivedClass
    function SaveToIni: string;
  end;

implementation

function TBaseClassHelperIni.SaveToIni: string;
begin
  Result := 'BaseClass Ini info';
end;

function TDerivedClassHelperIni.SaveToIni: string;
begin
  Result := inherited SaveToIni;
  Result := Result + ' DerivedClass Ini info';
end; 
```

* * *

```
unit uClasses_SaveToDB;

interface

Uses uClasses,uClasses_SaveToText,uClasses_SaveToIni;

Type    
  TBaseClassHelperDB = class helper(TBaseClassHelperIni) for TBaseClass
    function SaveToDB: string;
  end;

  TDerivedClassHelperDB = class helper(TDerivedClassHelperIni) for TDerivedClass
    function SaveToDB: string;
  end;

implementation

function TBaseClassHelperDB.SaveToDB: string;
begin
  Result := 'BaseClass DB info';
end;

function TDerivedClassHelperDB.SaveToDB: string;
begin
  Result := inherited SaveToDB;
  Result := Result + 'DerivedClass DB info';
end; 
```

* * *

```
program TestClasses;

uses
  uClasses in 'uClasses.pas',
  uClasses_Text in 'uClasses_Text.pas',
  uClasses_SaveToText in 'uClasses_SaveToText.pas',
  uClasses_SaveToIni in 'uClasses_SaveToIni.pas',
  uClasses_SaveToDB in 'uClasses_SaveToDB.pas';
var
  Textable: ITextable;
begin
  Textable := TDerivedClass_Text.Create;
  WriteLn(Textable.SaveToText);
  WriteLn(Textable.SaveToIni);
  WriteLn(Textable.SaveToDB);
  ReadLn;
end. 
```

**更新 1**

阅读您关于需要实施的几个方面的评论，`SaveToText`我提出了一个简单的搭载解决方案：

```
type
  ITextable = interface
    function SaveToText: String;
  end;
  TMyTextGenerator = class(TInterfacedObject,ITextable)
  private
    Fbc : TBaseClass;
  public
    constructor Create( bc : TBaseClass);
    function SaveToText: String;
  end;

{ TMyTextGenerator }

constructor TMyTextGenerator.Create(bc: TBaseClass);
begin
  Inherited Create;
  Fbc := bc;
end;

function TMyTextGenerator.SaveToText: String;
begin
  Result := IntToStr(Fbc.ID) + ' ' + Fbc.Name;
  if Fbc is TDerivedClass then
  begin
    Result := Result + ' ' + IntToStr(TDerivedClass(Fbc).Age) + ' ' +
      TDerivedClass(Fbc).Address;
  end;
end; 
```

在不同的单元中使用相同的模式实现 TSaveToIni、TSaveToDB 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:03:25.293

根据......（不记得那首歌），诚实被高估了。我认为我们中的许多人都高估了继承，并且在解决继承问题而不是组合或委托方面往往太快了。

我真的质疑希望能够将 SaveToFile 方法添加到您希望能够持久保存到文件的每个类中的愿望。

在我看来，类应该不知道不是它们存在的原因的责任。坚持是一种责任，印刷是另一种责任。一个打印类应该负责打印。当然，您不希望打印类成为 if 语句的黄蜂网，以处理您想要打印的每个可感知的类。因此，您定义了一个 Printer 基类，并使用 PeoplePrinter、LocationPrinter 和 WhatPrinter 后代扩展它。每个都可以处理整个类层次结构。

如果您现在正在考虑装饰器模式，那很好，很好。

这个想法是您不*为*现有层次结构创建后代，而是为特定职责创建类和可能的类层次结构。当您想保存现有类的实例时`SomeClass.SaveToText`，您将实例化 a`TSaver`并将其传递给要保存的类的实例，而不是调用 。

一个**非常幼稚**的实现可能如下所示。

```
type
  TSaver = class(TObject)
    procedure SaveToText; virtual; abstract;
  end;

  TBaseHierarchySaver = class(TSaver)
  private
    FBase: TBaseClass;
  public
    constructor Create(aBase: TBaseClass);
    procedure SaveToText; override;

    class procedure Save(aBase: TBaseClass);
  end;

constructor TBaseHierarchySaver.Create(aBase: TBaseClass);
begin
  FBase := aBase;
end;

class procedure TBaseHierarchySaver.Save(aBase: TBaseClass);
var
  Me: TSaver;
begin
  Me := TBaseHierarchySaver.Create(aBase);
  Me.SaveToText;
end;

procedure TBaseHierarchySaver.SaveToText;
var
  Str: TStrings;
begin
  Str := TStringList.Create;
  try
    Str.Add(Format('%s (%d)', [FBase.Name, FBase.ID]));
    if FBase.InheritsFrom(TDerivedClass) then
    begin
      Str.Add(Format('%d', [TDerivedClass(FBase).Age]));
      Str.Add(Format('%s', [TDerivedClass(FBase).Address]));
    end;
  finally
    Str.SaveToFile('SomeFileName');
    Str.Free;
  end;
end; 
```

**我不太喜欢这个。它很脆。我们可以做得更好。**

有很多方法可以使上述代码更加灵活和/或提供多态执行。例如，TSaver 可以有一个与 TBaseClass 类相关的匿名方法字典。TSaver.SaveToText 然后可以获得一个 TBaseClass 参数并被实现为执行传递给它的实例的类的每个匿名方法，如果它继承自与该匿名方法相关的类。

```
type
  TBaseClassClass = class of TBaseClass;
  TAddInfoProc = reference to procedure(aBase: TBaseClass; aStr: TStrings);

  TSaver = class(TObject)
  class var
    FAddInfoClasses: TDictionary<TBaseClassClass, TAddInfoProc>;
  public
    class procedure RegisterAddInfoProc(aBase: TBaseClassClass; 
      aAddInfo: TAddInfoProc);

    class procedure SaveToText(aBase: TBaseClass);
  end;

TSaver.RegisterAddInfoProc(TBaseClass, procedure(aBase: TBaseClass; aStr: TStrings)
  begin
    aStr.Add(Format('%s (%d)', [aBase.Name, aBase.ID]));
  end
);

TSaver.RegisterAddInfoProc(TDerivedClass, procedure(aBase: TBaseClass; aStr: TStrings)
  begin
    aStr.Add(Format('%d', [TDerivedClass(FBase).Age]));
    aStr.Add(Format('%s', [TDerivedClass(FBase).Address]));
  end
); 
```

这将您从继承层次结构中解放出来，但如果您想要多态执行，则可以将其更改为将特定 TBaseClass 后代绑定到“AddInfo”后代的匹配层次结构的字典，其中每个 AddInfo 后代都添加自己的信息：

```
type
  TAddInfo = class(TObject)
  public
    procedure AddInfo(aBase: TBaseClass; aStr: TStrings); virtual;
  end;

  TDerivedAddInfo = class(TAddInfo)
  public
    procedure AddInfo(aBase: TBaseClass; aStr: TStrings); override;
  end;

procedure TAddInfo.AddInfo(aBase: TBaseClass; aStr: TStrings);
begin
  aStr.Add(Format('%s (%d)', [aBase.Name, aBase.ID]));
end;

procedure TDerivedAddInfo.AddInfo(aBase: TBaseClass; aStr: TStrings);
var
  Derived: TDerivedClass absolute aBase;
begin
  inherited;
  if not aBase.InheritsFrom(TDerivedClass) then Exit;

  aStr.Add(Format('%d', [Derived.Age]));
  aStr.Add(Format('%s', [Derived.Address]));
end;

type
  TBaseClassClass = class of TBaseClass;
  TAddInfoClass = class of TAddInfo;

  TSaver = class(TObject)
  class var
    FAddInfoClasses: TDictionary<TBaseClassClass, TAddInfoClass>;
  public
    class procedure RegisterAddInfoClass(aBase: TBaseClassClass; 
      aAddInfo: TAddInfoClass);

    class procedure SaveToText(aBase: TBaseClass);
  end; 
```

顺便说一句，这看起来很像其他地方提出的类助手方法，但不受任何时候只有一个类助手活动的限制。因此，您可以拥有 TSaver、TPrinter、TMailer 以及您希望能够使用 TBaseClass 做的任何其他事情，但这不是它的主要职责。

哦，顺便说一句，绝对值的上述使用是我能忍受的为数不多的绝对值用例之一。对于硬演员来说，这是一种方便的简写方式，它通过提前退出约束而变得安全，这本身也是我可以忍受的为数不多的提前退出用例之一:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:57:20.970

由于 Delphi 不支持类的多重继承，您被推向这样的解决方案：

```
function BaseClassSaveToText(obj: TBaseClass): string;
begin
  Result := IntToStr(obj.ID) + ' ' + obj.Name;
end;

function TBaseClass_Text.SaveToText: String;
begin
  Result := BaseClassSaveToText(Self);
end;

function DerivedClassSaveToText(obj: TDerivedClass): string;
begin
  Result := BaseClassSaveToText(obj) + IntToStr(obj.Age) + ' ' + obj.Address;
end;

function TDerivedClass_Text.SaveToText: String;
begin
  Result := DerivedClassSaveToText(Self);
end; 
```

在`DerivedClassSaveToText`你想使用`inherited`关键字，但你不能，因为这两个类不共享必要的共同祖先。

**更新：** @LU RD 展示了如何使用类助手来完成这一切。就我个人而言，我对班级助手有点过敏。当然，您不希望使用助手可能还有其他原因。例如，如果您使用的是旧版 Delphi，则它们不存在。

# objective-c - iOS中不均匀形状的碰撞检测

> ID：11883476
> 
> 赞同：5
> 
> 时间：2012-08-09T12:28:50.757
> 
> 标签：objective-c, ios, ipad

![在此处输入图像描述](../Images/e1c0bf5b655ac7fa4ba1470abaab3a44.png)

我正在为 iPad 进行拖放活动。我有一个矩形 PNG 图像（参见名为 obj2 的图像）。当我只在矩形的黑色部分拖动 obj1 时，它应该会做出反应。

```
if (CGRectIntersectsRect(obj1.frame, obj2.frame))
{
    NSLog(@" hit test done!! ");
} 
```

现在，这段代码甚至在透明区域也进行了命中测试。如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T14:11:48.580

对于像您的具体示例（三角形和圆形）这样简单的东西，David Rönnqvist 提供的链接非常有用。您绝对应该查看它以查看一些可用的工具。但对于一般情况，最好的选择是剪辑、绘图和搜索。

有关一些背景知识，请参阅[将 CGRRect 剪辑到 CGPath](http://robnapier.net/blog/clipping-cgrect-cgpath-531)。

首先，创建一个仅 alpha 的位图图像。这在上面的链接中进行了解释。

接下来，使用`CGContextClipToMask()`.

现在，将您的其他图像绘制到上下文中。

最后，在位图数据中搜索任何彩色像素（参见上面的示例代码链接）。

如果任何像素着色，则存在一些重叠。

* * *

另一种类似的方法（实际上可能更快）是将每个图像绘制到它自己的 alpha-only CGBitmapContext 中。然后遍历每个上下文中的像素，看看它们是否同时都>128。

# php - Yii CGridView 水平滚动

> ID：11883479
> 
> 赞同：1
> 
> 时间：2012-08-09T12:29:03.670
> 
> 标签：php, yii, yii-extensions

我开发了 yii 应用程序，并有许多列的 CGridView。我想水平滚动 CGridView 但找不到方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:49:22.857

您可以将网格放入具有固定`width`和的容器中`overflow: auto;`。

```
<div class="CGridViewContainer">
    <!-- CGridView here -->
</div> 
```

和 CSS：

```
.CGridViewContainer { width: 960px; overflow: auto; } 
```

但我相信跨列将是呈现表格的更好方式。不知道如何制作标题或者是否有可能无需修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:46:02.473

如果您`overflow: scroll-x`为网格设置 CSS，则应该在浏览器中设置水平滚动

# matlab - 循环读取图像变慢

> ID：11883480
> 
> 赞同：0
> 
> 时间：2012-08-09T12:29:04.503
> 
> 标签：matlab, image-processing

我必须在 for 循环中处理一批图像（大约 30000 个）。为此，我在每次执行循环时读取一张图像。

当达到某个指标时（确切值会有所不同，但通常在 2000 左右），进度会显着放缓（因素 2 或 3）。怎么会这样？

这是一个显示此行为的最小代码示例：

```
imgFolder = [uigetdir, '/'];
files = dir(fullfile(imgFolder, '*.tiff'));
filenames = sort_nat({files.name});

imshow(imread([imgFolder, '/', filenames{1}]))
roi = roipoly;

meansRGB = zeros(3,length(files));
tic;

for i = 1:size(files,1)
    img = imread([imgFolder, '/', filenames{i}]);
    % for j=1:3
       % a = regionprops(roi,img(:,:,j),'PixelValues');
       % meansRGB(j,i) = mean(a.PixelValues);
    % end

    % show remaining time
    dt = 500; % display remaining time every dt'th step
    if(mod(i,dt)) == 0
        disp(i)
        elapsed = toc;
        remainingSeconds = elapsed*(length(files)-i)/dt;
        [hours, minutes, seconds] = sec2hms(remainingSeconds);
        str = sprintf('remaining time: %d:%d:%d', hours, minutes, round(seconds));
        disp(str);
        tic;
    end
end 
```

请注意，我认为会消耗最多时间的所有重要部分都已被注释掉，并且不是减速循环的原因。还有大量的 RAM 和处理器周期，这不应该是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:30:54.293

交换？

前几百张图片会填满你的 RAM 吗？

任何其他对内存的访问都会触发交换和写入硬盘驱动器，这很容易慢几个数量级......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:36:26.970

是否有可能`imread()`使文件句柄保持打开状态？（虽然如果是这样的话我会很惊讶？）

您也许可以尝试`fclose('all')`在循环中进行检查？

# maven - mvn 故障安全：集成测试

> ID：11883489
> 
> 赞同：0
> 
> 时间：2012-08-09T12:29:35.783
> 
> 标签：maven, continuous-integration, integration-testing, maven-failsafe-plugin, phase

我正在使用 maven 2，集成测试在 *IT.java 文件中。当我运行命令`mvn failsafe:integration-test`集成测试运行罚款。但是当我运行`mvn integration-test`它时，它不会运行我的集成测试。如何删除前缀`failsafe:`？

在 pom.xml 我使用：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <executions>
        <execution>
        <phase>integration-test</phase>
        <goals>
            <goal>integration-test</goal>
            <goal>verify</goal>
        </goals>
        </execution>
    </executions>
</plugin> 
```

**更新**
我也尝试了以下`pom.xml`设置，然后`mvn clean verify`。我只得到了**JUnit**测试的可靠报告。控制台输出上仍然缺少**JUnit**集成测试。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <executions>
        <execution>
            <id>failsafe-integration-tests</id>
            <phase>integration-test</phase>
            <goals>
                <goal>integration-test</goal>
            </goals>
        </execution>
        <execution>
            <id>failsafe-verify</id>
            <phase>verify</phase>
            <goals>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

现在我通过插件设置绑定禁用单元测试：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <configuration>
        <!-- Disable unit tests -->
        <skip>true</skip>
    </configuration>
</plugin> 
```

文我运行`mvn clean verify`我的故障安全集成测试运行！但是为什么它不能与 surefire 单元测试一起使用呢？任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T10:15:20.733

你有失败的单元测试吗？

当您这样做时，`mvn failsafe:integration-test`您会显式调用故障保护，但是当您这样做时，`mvn integration-test`您正在调用阶段，因此会执行单元测试，并且如果单元测试失败，则永远不会到达集成阶段。这可以解释为什么`mvn clean verify`当您通过配置跳过单元测试的执行时会起作用。

# arrays - 如何删除 Global.JSON 解析对象中的数组项？？？钛手机？

> ID：11883491
> 
> 赞同：0
> 
> 时间：2012-08-09T12:29:36.837
> 
> 标签：arrays, json, mobile, titanium, push

如何删除 Global.JSON 解析对象中的数组项？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:39:55.167

当您将 JSON 字符串解析为 JavaScript 对象时，它就变成了 JavaScript 对象，而 JSON 字符串变得无关紧要。所以你的问题的核心是“我如何从数组中删除一个项目？”

为此，您可以删除或拼接出不再需要的项目。这些的用法和区别已在其他地方得到解答： [Deleting array elements in JavaScript - delete vs splice](https://stackoverflow.com/questions/500606/javascript-array-delete-elements)

# mysql - INSERT INTO SELECT 如何返回一组插入 ID

> ID：11883492
> 
> 赞同：1
> 
> 时间：2012-08-09T12:29:45.333
> 
> 标签：mysql

我有一个工作`INSERT INTO SELECT`查询，它​​根据选择的结果将记录插入到新表中。简单的。

```
INSERT INTO my_table (a, b, c)
SELECT a, b, c FROM my_table 
WHERE x=y; 
```

如何从`INSERT`该查询部分获取新创建的主键 ID，以便我可以使用它们来更新另一个表？（主键是唯一的唯一引用）

我读过`INSERT INTO SELECT`它只支持每个查询插入一个表，所以这是不可能的。如何实现（使用 MyISAM 引擎）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:38:05.037

您可以在临时表中选择您的数据，然后在插入行时在其上运行游标，您将拥有 PK

```
 DECLARE @tempTable TABLE(
    a VARCHAR(MAX),
    b VARCHAR(MAX),
    c VARCHAR(MAX)
    )

    INSERT INTO @tempTable(a,b,c)
    SELECT a,b,c FROM my_table WHERE x=y

DECALRE @a DATATYPE;
Declare @b DATATYPE;
Declare @c DATATYPE;

DECLARE cursor CURSOR FOR
    SELECT * FROM @tempTable

OPEN cursor 

FETCH NEXT FROM PropertyCursor INTO @a, @b,@c
WHILE (@@FETCH_STATUS = 0)
BEGIN
 INSERT INTO my_table(a,b,c)
VALUES(@a,@b,@c)
DECALRE @PrimaryKey INT = SCOPE_IDENTITY();//THis line will give u the PK so u can work with it and then below move to next row
FETCH NEXT FROM cursor INTO @a, @b,@c
END

CLOSE cursor 
DEALLOCATE cursor 
```

# c++ - 我不能#include 在 gloox

> ID：11883493
> 
> 赞同：0
> 
> 时间：2012-08-09T12:29:52.400
> 
> 标签：c++, xmpp, file-transfer, gloox

我不能`inbandbytestreammanager.h`在 NetBeans 中包含它说不是这样的目录。我的代码如下：

```
#include <gloox/inbandbytestreammanager.h> 
```

我正在使用 Ubuntu。我的 gloox 库有问题吗？所以我不能使用这段代码

[http://camaya.net/api/gloox-0.9-pre5/classgloox_1_1InBandBytestreamManager.html](http://camaya.net/api/gloox-0.9-pre5/classgloox_1_1InBandBytestreamManager.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:15:21.513

看起来该类已从较新版本中删除，请参阅[版本 1.0 的文档](http://camaya.net/api/gloox-1.0/annotated.html)。

# svn - 如何将 svn 挂钩链接到签出的存储库

> ID：11883494
> 
> 赞同：-2
> 
> 时间：2012-08-09T12:29:51.647
> 
> 标签：svn, pre-commit-hook, svn-hooks

如何将 svn 挂钩链接到签出的存储库？我已经检查了一个示例 SVN 存储库。使用 SVN-admin 选项，我创建了 svn repo(?)，其中包含示例 hooks 。但是，如何将我新编写的脚本链接到本地​​签出的仓库？它需要，因为我在放入管理区域之前在本地测试了脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T16:31:58.727

我认为这里可能存在一些与术语相关的混淆。如果您使用 签出存储库`svn checkout`，则您拥有的不是存储库。这是一个*工作副本*。您不能对工作副本执行存储库操作（如`commit`或`branch`），只能对存储库执行。

如果您尝试测试钩子脚本，您需要首先[在本地机器上设置一个存储库](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html)。您可以[让本地存储库充当](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.replication)“真实”存储库的镜像，也可以使用数据副本为本地存储库播种。要执行后者，过程如下所示：

1.  用于[`svn export`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.export.html)获取“真实”回购的快照。使用`export`代替`checkout`很重要，因为`export`不会创建通常存在的 Subversion 元数据文件夹（这很重要）。
2.  用于[`svn import`](http://svnbook.red-bean.com/en/1.7/svn.ref.svn.c.import.html)将此树加载到本地存储库中。

这将导致本地存储库的 HEAD 看起来与“真实”存储库的 HEAD 完全相同。你的本地仓库不会有完整的历史记录，因为它不是一个完整的镜像，但它会有相同的文件和文件夹布局。大多数时候，这对于测试脚本来说已经足够了。

# wix - 组合框选择属性更改

> ID：11883500
> 
> 赞同：2
> 
> 时间：2012-08-09T12:30:12.453
> 
> 标签：wix

我正在为应用程序编写安装程序。作为其中的一部分，我需要获取用户选择的国家/地区名称。如果用户选择美国，我希望程序中的值是 US，即 2 个字母代码。

目前我实现了这样的组合框：

```
<Control Id="CountryList" Type="ComboBox" Sorted="yes" ComboList="yes" Property="COUNTRY" X="30" Y="118" Width="150" Height="15">
  <ComboBox Property="COUNTRY">
     <ListItem Value="United States" />
     <ListItem Value="India" />
     <ListItem Value="Australia" />
     <ListItem Value="United Kingdom" />
  </ComboBox>
</Control> 
```

谁能建议我如何将属性更改`COUNTRY`为`US`或`IN`等`UK`。我的意思是 2 个字母代码。

我还必须添加所有可能的国家。有没有更好的方法来实现这一点？

与此相关，我希望第一个组合框列出所有国家/地区。然后，第二个组合框可以显示属于该国家/地区的州。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:32:18.533

[将`Text`属性用于可见文本，`Value`](http://wix.sourceforge.net/manual-wix3/wix_xsd_listitem.htm)将属性用于选择项目时要放入[属性的值](http://wix.sourceforge.net/manual-wix3/wix_xsd_listitem.htm)`ComboBox`：

```
<Control Id="CountryList" Type="ComboBox" Sorted="yes" ComboList="yes" Property="COUNTRY" X="30" Y="118" Width="150" Height="15">
  <ComboBox Property="COUNTRY">
    <ListItem Text="United States" Value="US" />
    <ListItem Text="United Kingdom" Value="UK" />
    ...
  </ComboBox>
</Control> 
```

至于你的其他问题：

> 我还必须添加所有可能的国家。有没有更好的方法来实现这一点？

您可以从[这个线程](https://stackoverflow.com/questions/7978607/get-country-list-in-other-languages-besides-english)中获得灵感并添加一个构建时步骤来生成`<ListItem>`元素的 XML 片段。

> 然后，第二个组合框可以显示属于该国家/地区的州。

请注意，当组合框中的选定项目发生更改时，无法捕获该事件。这是 MSI UI 的一个众所周知的限制。您可以尝试使用我称之为“双对话框”的解决方法来实现您想要的。有关更多信息，请参阅[此线程](https://stackoverflow.com/questions/4241863/wix-interactions-with-conditions-properties-custom-actions)。

# javascript - 谷歌搜索框java脚本

> ID：11883501
> 
> 赞同：0
> 
> 时间：2012-08-09T12:30:12.367
> 
> 标签：javascript

我创建了一个谷歌搜索框 java 脚本，我在 iWeb 中应用了它，它看起来不错，但是当我进行搜索时它没有响应。

这是代码：

```
 <!-- Put the following javascript before the closing </head> tag. -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<script>
(function() {
var cx = '012476238773441236228:ivxtfsk4-uc';
var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async =     true;
gcse.src = (document.location.protocol == 'https' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})();
</script>

<!-- Place this tag where you want both of the search box and the search results to render   -->
<gcse:search></gcse:search> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:51:58.180

您提供的脚本有效（如在[此 jsFiddle](http://jsfiddle.net/PzKLt/)中看到的）。您可以安全地删除`<!DocType`元标记。

例如

```
<head>
  <!-- Current head content here -->
  <script type="text/javascript">
    (function() {
      var cx = '012476238773441236228:ivxtfsk4-uc';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(gcse, s);
    })();​
  </script>

</head> 
```

在你的身体里，无论你想让你的盒子出现在哪里：

```
<gcse:search></gcse:search>​ 
```

也许您可以使用当前代码创建一个 jsFiddle 以获得调试帮助？

# android - 如何在android中访问不同的文件管理器特定路径？

> ID：11883502
> 
> 赞同：4
> 
> 时间：2012-08-09T12:30:17.510
> 
> 标签：android, android-intent

我已经安装了不同类型的文件管理器。不同类型的文件管理器是

1.  默认文件管理器

2.  ASTRO-文件管理器-v3.1.342.apk(Astro)

3.  FileManager-1.2.apk(OI 文件管理器)

4.  Root-Browser-File-Manager-v1.4.0.apk(Root Browser)

代码 ：

```
File filePath = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/Pictures");
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setDataAndType(Uri.parse("file:/"+filePath.getAbsolutePath()), "file/*");
startActivityForResult(intent,PICKFILE_RESULT_CODE); 
```

当我可以选择`Astro File Manager`时`Root Browser`，`Default File Manager`我得到的位置路径为`/mnt/sdcard`。

但是当我访问时，`OI File Manager`我得到的位置路径为`/mnt/sdcard/Pictures`.

如何获取并打开不同类型的文件管理器以访问位置路径`/mnt/sdcard/Pictures`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:39:57.583

指定文件资源管理器的初始路径？你不能。

阅读[ACTION_GET_CONTENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)的文档。使用此操作的合同根本没有指定初始位置。所以各种文件管理器做不同的事情，都是合法正确的。有些使用您尝试输入的数据，有些使用用户所在的最后一个目录，有些从 sdcard 的根目录开始。

顺便说一句，您的 mime 类型“file/*”看起来像胡说八道，没有这种已知的 mime 类型。只需使用“*/*”来匹配所有文件。

# php - 用php替换html页面中的特殊字符串

> ID：11883507
> 
> 赞同：0
> 
> 时间：2012-08-09T12:30:28.350
> 
> 标签：php, html

我正在寻找一种方法来用它们定义的值替换整个页面中所有看起来相似的字符串

请不要向我推荐其他包含语言常量的方法。

像这样的字符串：

[_家]

[_消息]

他们在 [_*] 部分看起来都一样

现在最大的问题是如何扫描 HTML 页面并替换定义的值。

解析 html 页面的一种方法是使用 DOMDocument 然后 pre_replace() 它

**但我的主要问题是为替换写一个模式**

```
$pattern = "/[_i]/";
$replacement= custom_lang("/i/");
$doc = new DOMDocument();
$htmlPage = $doc->loadHTML($html);

preg_replace($pattern, $replacement, $htmlPage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:45:31.677

在 RegEx 中，`[]`是运算符，因此如果您使用它们，则需要对它们进行转义。

您的表达式的其他问题是`_*`将匹配 Zero 或 more `_`。你需要用一些有意义的匹配来替换它，Like，`_.*`它将匹配 _ 和之后的任何其他字符。所以你的完整表达变成了，

`/\[_.*?\]/`

嘿，为什么是`?`，你可能会问：原因是它执行非贪婪匹配。喜欢，

`[_foo] [_bar]`是查询字符串，那么贪婪匹配将返回一个匹配并为您提供全部匹配，因为您的表达式对字符串完全有效，但非贪婪匹配将为您提供两个单独的匹配。（[更多信息](http://www.itworld.com/nl/perl/01112001)）

`_`通过在后面加上大写字母，您可能会更好地收缩。喜欢，

`/\[_[A-Z]+\]/`

**更新**：使用匹配的字符串并替换它们。为此，我们使用称为反向引用的概念。

考虑修改上述表达式，将字符串括在括号中，例如，`/\[_([A-Z]+)\]/`

现在在`preg-replace`参数中，我们可以使用括号中的表达式来反向引用它们`$1`。所以你可以使用的是，

```
preg_replce("/\[_([A-Z]+)\]/e", "my_wonderful_replacer('$1')", $html); 
```

**注意**：我们需要将`e modifier`第二个参数视为 PHP 代码。（[更多信息](https://stackoverflow.com/questions/2082207/calling-function-inside-preg-replace-thats-inside-a-function)）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T12:35:49.780

如果您知道要替换的完整关键字（例如`[_HOME]`），那么您可以使用[str_replace()](http://uk.php.net/manual/en/function.str-replace.php)替换所有实例。

无需通过引入正则表达式来使此类事情变得更复杂。

# jquery - 循环内的jquery mobile if语句不起作用

> ID：11883508
> 
> 赞同：0
> 
> 时间：2012-08-09T12:30:30.990
> 
> 标签：jquery, jquery-mobile

我想要的是在页脚中最多显示三个按钮。我有一系列元素，所以我不想在第一个元素处显示上一个按钮，而在最后一个元素处显示下一个按钮。

但我无法让它正常工作。所有的内容都显示得很好，但是当你到达一个入口页面（你从概述中选择一个元素）时，你没有得到导航，但是当页面被手动刷新时它显示得很好。

我尝试对其进行调试，当我删除该`if (entryId == nav.objId)`语句时，将显示导航 - 显示了错误的项目，但至少我不需要刷新即可查看概览按钮。

您可以在[http://kraen-ub-testen.dev.redia.dk/#overview查看实际代码](http://kraen-ub-testen.dev.redia.dk/#overview)

我有以下代码来显示导航：

```
$.each(navigation, function(i,nav) {
    var navArrLength = navigation.length;
    var index = nav.index;

    if (entryId == nav.objId) {
        var navLinks = "<div data-role=\"navbar\" class=\"ui-navbar ui-mini\" role=\"navigation\"><ul class=\"ui-grid-b\">";

        if (index >= navArrLength-1) {
            var prevEntry = navigation[index-1].objId;
            navLinks += "<li><a href=\"#entry?entryId=" + prevEntry + "\" data-icon=\"arrow-l\" data-transition=\"slide\">Næste</a></li>";
        }else{
            navLinks += "<li></li>";
        }

        navLinks += "<li><a href=\"#overview\" data-icon=\"grid\" data-transition=\"slideup\">Se alle</a></li>";

        if (index < navArrLength-1) {
        var nextEntry = navigation[index+1].objId;
        navLinks += "<li><a href=\"#entry?entryId=" + nextEntry + "\" data-icon=\"arrow-r\" data-transition=\"slide\">Næste</a></li>";
    }else{
        navLinks += "<li></li>";
    }

    navLinks += "</ul></div>";

    $navigation.html(navLinks).trigger('create');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:56:43.263

我已经通过您的代码进行了调试，并且我发现您在条目的末尾有空间，这就是我在您的对象中得到的内容，如下所示：

```
nav.objId: "5020d6a3efd1cf3a5f000012"
entryId: "5020d6a3efd1cf3a5f000012 "
entryId == nav.objId: false 
```

这就是为什么它现在会失败的原因这里的解决方案如下

用这个`$.trim(entryId) == $.trim(nav.objId): true`

所以我已将其更改为您的代码，如下所示：

```
$.each(navigation, function(i,nav) {
    var navArrLength = navigation.length;
    var index = nav.index;

    if ($.trim(entryId) == $.trim(nav.objId)) {
        var navLinks = "<div data-role=\"navbar\" class=\"ui-navbar ui-mini\" role=\"navigation\"><ul class=\"ui-grid-b\">";

        if (index >= navArrLength-1) {
            var prevEntry = navigation[index-1].objId;
            navLinks += "<li><a href=\"#entry?entryId=" + prevEntry + "\" data-icon=\"arrow-l\" data-transition=\"slide\">Næste</a></li>";
        }else{
            navLinks += "<li></li>";
        }

        navLinks += "<li><a href=\"#overview\" data-icon=\"grid\" data-transition=\"slideup\">Se alle</a></li>";

        if (index < navArrLength-1) {
        var nextEntry = navigation[index+1].objId;
        navLinks += "<li><a href=\"#entry?entryId=" + nextEntry + "\" data-icon=\"arrow-r\" data-transition=\"slide\">Næste</a></li>";
    }else{
        navLinks += "<li></li>";
    }

    navLinks += "</ul></div>";

    $navigation.html(navLinks).trigger('create');
    }
}); 
```

我希望这会有所帮助，

# visual-c++ - 从自定义安装程序直接链接到 VC++ 2010 SP1 Redistributable

> ID：11883512
> 
> 赞同：3
> 
> 时间：2012-08-09T12:30:36.480
> 
> 标签：visual-c++, redistributable

我有包含 vcredist_x86.exe / vcredist_x64.exe 的安装程序，所以如果用户机器没有安装 VC++ 可再发行组件，那么我安装它。

但是，vcredist_x86.exe / vcredist_x64.exe 的大小相当大~5MB，这对于小型应用程序来说可能是个问题。

是否可以使用指向 Microsoft 站点的直接（和永久）链接，而不是将 vcredist 文件添加到我的安装程序？

或者可能有更好的方法来解决这个问题？

PS我知道用户机器必须在线 - 这没关系。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T22:26:49.123

以下是 MSVC 2010 redists 的直接链接：

**MSVC 2010 SP1 Redist x86 英文** [http://download.microsoft.com/download/C/6/D/C6D0FD4E-9E53-4897-9B91-836EBA2AACD3/vcredist_x86.exe](http://download.microsoft.com/download/C/6/D/C6D0FD4E-9E53-4897-9B91-836EBA2AACD3/vcredist_x86.exe)

**MSVC 2010 SP1 Redist x64 英文** [http://download.microsoft.com/download/A/8/0/A80747C3-41BD-45DF-B505-E9710D2744E0/vcredist_x64.exe](http://download.microsoft.com/download/A/8/0/A80747C3-41BD-45DF-B505-E9710D2744E0/vcredist_x64.exe)

从这些 URL 可以看出，微软正在使用 UUID 来索引他们所有的下载，这看起来是一个很好的设计决策，并且表明这些链接确实会在很长一段时间内保持有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:34:16.873

*   [Microsoft Visual C++ 2010 SP1 可再发行包 (x86)](http://www.microsoft.com/en-us/download/details.aspx?id=8328)
*   [Microsoft Visual C++ 2010 SP1 可再发行包 (x64)](http://www.microsoft.com/en-us/download/details.aspx?id=13523)

# cakephp - 如何将 div 添加到单选按钮？

> ID：11883513
> 
> 赞同：2
> 
> 时间：2012-08-09T12:30:38.723
> 
> 标签：cakephp, cakephp-2.0, radio, formhelper

我是 CakePHP 的新用户。我正在尝试添加一些 div 来包含我的输入 + 我的标签。

这就是我所拥有的：

```
<?php 
$option =  array ("value1" => "labelContent1", "value2" => "abelContent2");
echo $this->Form->input('name', array('type' => 'radio', 'options' =>  $option, 'div' => true, "legend" => false));
?>

<div class="input radio">
    <input type="hidden" name="data[Quiz][name]" id="ModelName_" value=""/>
    <input type="radio" name="data[Quiz][name]" id="ModelName1" value="value1" />
    <label for="ModelName1">labelContent1</label>

    <input type="radio" name="data[Quiz][name]" id="ModelName2" value="value2" />
    <label for="ModelName2">labelContent2</label>
</div> 
```

这就是我想要的：

```
<div class="input radio">
    <input type="hidden" name="data[Quiz][name]" id="ModelName_" value=""/>
    <div>
        <input type="radio" name="data[Quiz][name]" id="ModelName1" value="value1" />
        <label for="ModelName1">labelContent1</label>
    </div>
    <div>
        <input type="radio" name="data[Quiz][name]" id="ModelName2" value="value2" />
        <label for="ModelName2">labelContent2</label>
    </div>
</div> 
```

您知道是否可以使用 FormHelper 来实现它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-06T05:28:23.597

我知道这是一个旧线程，但我不得不回复。在不创建错误标记的情况下实现此目的的正确方法是使用 before 和 after 选项：

```
echo $this->Form->input('name', array( 'type' => 'radio',
                                     'separator'=> '</div><div>',
                                     'before' => '<div>',
                                     'after' => '</div>',
                                     'options' =>  $option,
                                     'label' => true,
                                     "legend" => false
                                   )
                                ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:58:13.563

看起来您无法使用表单助手实现这一目标。单选选项没有包含在任何东西中。见[代码](https://github.com/cakephp/cakephp/blob/master/lib/Cake/View/Helper/FormHelper.php#L1388)。

您可以添加`'separator' => '<br/>'`到 Form->input 选项，以在其自己的行中显示每个选项。

或自己实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T22:22:26.897

```
you can try this

$option =  array ("value1" => "labelContent1", "value2" => "abelContent2");

    echo $this->Form->input('name', array( 'type' => 'radio',
                                        'separator'=> '</div><div>',
                                         'options' =>  $option,
                                          'label' => true,
                                          "legend" => false
                                         )
                                    ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-23T00:30:50.387

```
<?php 
$option =  array ("value1" => "labelContent1", "value2" => "abelContent2");
echo $this->Form->input('name', array(
    'type' => 'radio',
    'options' =>  $option, 
    'templates' => ['radioWrapper' => '<div>{{label}}</div>'], 
    "legend" => false));
?> 
```

这似乎适用于 Cake 3.+

# android - 创建浮动弹出列表

> ID：11883523
> 
> 赞同：2
> 
> 时间：2012-08-09T12:31:07.120
> 
> 标签：android, list, popup

我想创建一个弹出窗口，如下面的链接。我以为它会使用 QuickContactBabage，但事实并非如此。只是不知道如何创建它。

[图片链接 http://cdn3.staztic.com/screenshots/android-swim-32-2.jpg](http://cdn3.staztic.com/screenshots/android-swim-32-2.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:42:27.533

通过扩展[PopupWindow](http://developer.android.com/reference/android/widget/PopupWindow.html)，你可以做任何你需要的事情。以下是弹出窗口显示过程的主要代码。

```
ActionItem nextItem     = new ActionItem(ID_DOWN, "Next", getResources().getDrawable(R.drawable.menu_down_arrow));
ActionItem prevItem     = new ActionItem(ID_UP, "Prev", getResources().getDrawable(R.drawable.menu_up_arrow));
ActionItem searchItem   = new ActionItem(ID_SEARCH, "Find", getResources().getDrawable(R.drawable.menu_search));
ActionItem infoItem     = new ActionItem(ID_INFO, "Info", getResources().getDrawable(R.drawable.menu_info));
ActionItem eraseItem    = new ActionItem(ID_ERASE, "Clear", getResources().getDrawable(R.drawable.menu_eraser));
ActionItem okItem       = new ActionItem(ID_OK, "OK", getResources().getDrawable(R.drawable.menu_ok));

//use setSticky(true) to disable QuickAction dialog being dismissed after an item is clicked
prevItem.setSticky(true);
nextItem.setSticky(true);

//create QuickAction. Use QuickAction.VERTICAL or QuickAction.HORIZONTAL param to define layout 
//orientation
final QuickAction quickAction = new QuickAction(this, QuickAction.VERTICAL);

//add action items into QuickAction
quickAction.addActionItem(nextItem);
quickAction.addActionItem(prevItem);
quickAction.addActionItem(searchItem);
quickAction.addActionItem(infoItem);
quickAction.addActionItem(eraseItem);
quickAction.addActionItem(okItem); 
```

通过尝试[NewQuickAction3D](https://dl.dropbox.com/u/69670844/lorensiuswlt-NewQuickAction3D-v1.0.1-0-g4273b56.zip)示例，您将获得如下输出 -

![图片](../Images/31a41855c96fd7d4e63b37f91307580e.png)

另外，看看这里的[QuickAction Dialog in Android](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)

# android - Android 框架布局堆栈在某些设备上显示不正确

> ID：11883531
> 
> 赞同：1
> 
> 时间：2012-08-09T12:31:58.303
> 
> 标签：android, admob, android-framelayout

为了即使手机离线也能控制广告的存在，我将 admob 广告放入 LinearLayout 中，它采用框架布局，因此广告将显示在游戏顶部。在 HTC Desire(2.2) 上，视图正确显示 广告位于屏幕顶部，但在三星 Galaxy SII(2.3.1) 上，广告位于游戏下方 - 它不可见，但如果按下该区域将触发广告操作.

布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent" >

<LinearLayout
    android:id="@+id/game"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
</LinearLayout>

<LinearLayout
    android:id="@+id/ads"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:background="@color/black"
    android:orientation="vertical" >

</LinearLayout>
</FrameLayout> 
```

加载广告的代码：

```
private void loadAds() {
    LinearLayout layout = (LinearLayout) findViewById(R.id.ads);
    final AdView adView = new AdView(this, AdSize.BANNER, ADMOB_ID);
    layout.addView(adView);
    final AdRequest request = new AdRequest();  
    adView.loadAd(request);
} 
```

编辑：添加 bringToFront() 没有帮助。在 SII 上，未完全隐藏的广告有大约 3-5 像素的顶部可见。

编辑 2：原来问题是由于在 onCreate 中隐藏广告布局引起的。解决方案是在执行 onCreate 后通过处理程序将其隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:59:19.537

您可以做的是将广告包含在您的布局中，然后根据您是否希望广告出现来切换其可见性。

```
//To show the view
adView.setVisibility(View.VISIBILE);

//To hide the view
adView.setVisibility(View.GONE); 
```

您也可以尝试使用当前代码在 AdView 上调用 bringToFront()。

# c# - LINQ：如何缩短我的代码？

> ID：11883533
> 
> 赞同：1
> 
> 时间：2012-08-09T12:32:06.377
> 
> 标签：c#, linq, predicate

我做了一些 LINQ，效果很好，但我不喜欢这种类型的编码，我想缩短它，但不太确定如何去做。

有谁知道我可以如何缩短这部分代码？我以前听说过谓词，但不太确定如何实现它们？

```
 List<Voucher> list = new List<Voucher>();    

if (String.IsNullOrEmpty(Search.SearchText) && Search.Status == 0)
{
    list = (from voucherslist in db.Vouchers
            //where voucherslist.Status != (int)VoucherStatus.Removed
            select voucherslist)                              
            .Take(100)
            .ToList();
}

if (!String.IsNullOrEmpty(Search.SearchText) && Search.Status ==0)
{
    list = (from voucherslist in db.Vouchers
            where voucherslist.Title.Contains(Search.SearchText)                                
            select voucherslist).Take(100).ToList();
}

if (String.IsNullOrEmpty(Search.SearchText) && Search.Status > 0)
{
    list = (from voucherslist in db.Vouchers
            where voucherslist.Status == Search.Status                                    
            select voucherslist).Take(100).ToList();
}

if (!String.IsNullOrEmpty(Search.SearchText) && Search.Status > 0)
{
    list = (from voucherslist in db.Vouchers
            where voucherslist.Status == Search.Status
            && voucherslist.Title.Contains(Search.SearchText)  
            select voucherslist).Take(100).ToList();
} 

// Convert
ret = VouchersConverter.Convert(list);

// Get Business Details
foreach (ENT_Voucher item in ret)
    item.BusinessDetails = this._businessesBLL.GetBusinessDataByID(item.BusinessID);

// Refine and sort
ret = ret.Where(x=>x.BusinessDetails.Accept == true)
            .OrderByDescending(x => x.Status.Equals(1))
            .ThenByDescending(x => x.StartDate).ToList(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:35:27.993

您当前的逻辑对我来说似乎有点崩溃，但我怀疑您想要：

```
var query = db.Vouchers;
if (...)
{       
   query = query.Where(v => v.Title.Contains(Search.SearchText);
}
if (...)
{       
   query = query.Where(v => v.Status == Search.Status);
}
// etc

List<Voucher> list = query.Take(100).ToList(); 
```

使用多次调用`Where`将有效地对所有过滤器应用“AND”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T12:37:12.483

要删除重复，首先设置您的列表。

```
list = (from voucherslist in db.Vouchers
        //where voucherslist.Status != (int)VoucherStatus.Removed
        select voucherslist); 
```

然后根据需要添加标题搜索：

```
if (!String.IsNullOrEmpty(Search.SearchText))
{
    list = list.Where(x => x.Title.Contains(Search.SearchText));
} 
```

状态搜索：

```
if (Search.Status > 0)
{
    list = list.Where(x => x.Status == Search.Status);
} 
```

最后，把你的 100 列平成一个列表。

```
list = list.Take(100).ToList(); 
```

要记住的是，在`.ToList()`调用之前，这实际上不会构造和执行 SQL 查询，并且将执行的 SQL 将包含您连接在一起的所有过滤。

# android - 单击操作后如何关闭通知

> ID：11883534
> 
> 赞同：169
> 
> 时间：2012-08-09T12:32:08.467
> 
> 标签：android, action, android-notifications

从 API 级别 16（Jelly Bean）开始，可以使用以下命令向通知添加操作

```
builder.addAction(iconId, title, intent); 
```

但是，当我向通知添加操作并按下该操作时，通知不会被解除。单击通知本身时，可以将其关闭

```
notification.flags = Notification.FLAG_AUTO_CANCEL; 
```

或者

```
builder.setAutoCancel(true); 
```

但显然，这与通知相关的操作无关。

有什么提示吗？或者这还不是 API 的一部分吗？我什么也没找到。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-08-09T13:15:23.183

当您在通知管理器上调用 notify 时，您给了它一个 id - 这是您以后可以用来访问它的唯一 id（这来自通知管理器：

```
notify(int id, Notification notification) 
```

要取消，您可以致电：

```
cancel(int id) 
```

具有相同的ID。所以，基本上，您需要跟踪 id 或者可能将 id 放入您添加到 PendingIntent 内的 Intent 的 Bundle 中？

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-11-22T23:38:11.253

在使用 Lollipop 的抬头显示通知时发现这是一个问题。请参阅[设计指南](http://developer.android.com/design/patterns/notifications.html)。这是要实现的完整（ish）代码。

到目前为止，拥有一个“关闭”按钮并不那么重要，但现在它更重要的是你的脸。

![抬头通知](../Images/1dc8de4d6853888fd8ea73d08b6aa2cc.png)

**构建通知**

```
int notificationId = new Random().nextInt(); // just use a counter in some util class...
PendingIntent dismissIntent = NotificationActivity.getDismissIntent(notificationId, context);

NotificationCompat.Builder builder = new NotificationCompat.Builder(context);
builder.setPriority(NotificationCompat.PRIORITY_MAX) //HIGH, MAX, FULL_SCREEN and setDefaults(Notification.DEFAULT_ALL) will make it a Heads Up Display Style
        .setDefaults(Notification.DEFAULT_ALL) // also requires VIBRATE permission
        .setSmallIcon(R.drawable.ic_action_refresh) // Required!
        .setContentTitle("Message from test")
        .setContentText("message")
        .setAutoCancel(true)
        .addAction(R.drawable.ic_action_cancel, "Dismiss", dismissIntent)
        .addAction(R.drawable.ic_action_boom, "Action!", someOtherPendingIntent);

// Gets an instance of the NotificationManager service
NotificationManager notifyMgr = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

// Builds the notification and issues it.
notifyMgr.notify(notificationId, builder.build()); 
```

**通知活动**

```
public class NotificationActivity extends Activity {

    public static final String NOTIFICATION_ID = "NOTIFICATION_ID";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        manager.cancel(getIntent().getIntExtra(NOTIFICATION_ID, -1));
        finish(); // since finish() is called in onCreate(), onDestroy() will be called immediately
    }

    public static PendingIntent getDismissIntent(int notificationId, Context context) {
        Intent intent = new Intent(context, NotificationActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);
        intent.putExtra(NOTIFICATION_ID, notificationId);
        PendingIntent dismissIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT);
        return dismissIntent;
    }

} 
```

**AndroidManifest.xml**（防止 SystemUI 聚焦到后台堆栈所需的属性）

```
<activity
    android:name=".NotificationActivity"
    android:taskAffinity=""
    android:excludeFromRecents="true">
</activity> 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-14T15:36:07.533

我发现当你在扩展通知中使用操作按钮时，你必须编写额外的代码并且你会受到更多的限制。

当用户单击操作按钮时，您必须手动取消通知。只有默认操作会自动取消通知。

此外，如果您从按钮启动广播接收器，通知抽屉不会关闭。

我最终创建了一个新的 NotificationActivity 来解决这些问题。这个没有任何 UI 的中间活动会取消通知，然后启动我真正想从通知开始的活动。

我在相关帖子中发布了示例代码[Clicking Android Notification Actions does not close Notification drawer](https://stackoverflow.com/questions/18261969/clicking-android-notification-actions-does-not-close-notification-drawer/21783203)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-08-02T14:24:08.420

在我看来，使用 a`BroadcastReceiver`是一种更简洁的方式来取消通知：

在 AndroidManifest.xml 中：

```
<receiver 
    android:name=.NotificationCancelReceiver" >
    <intent-filter android:priority="999" >
         <action android:name="com.example.cancel" />
    </intent-filter>
</receiver> 
```

在java文件中：

```
Intent cancel = new Intent("com.example.cancel");
PendingIntent cancelP = PendingIntent.getBroadcast(context, 0, cancel, PendingIntent.FLAG_CANCEL_CURRENT);

NotificationCompat.Action actions[] = new NotificationCompat.Action[1]; 
```

通知取消接收者

```
public class NotificationCancelReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        //Cancel your ongoing Notification
    };
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2020-04-28T15:00:50.423

在您的意图被触发以删除通知后，您将需要运行以下代码。

```
NotificationManagerCompat.from(this).cancel(null, notificationId); 
```

注意：notificationId 与传递给运行通知的 id 相同

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-08-09T12:44:27.567

您始终可以`cancel()`从`Notification`操作调用的任何内容中获取（例如，在`onCreate()`与`PendingIntent`您提供的相关活动中`addAction()`）。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-11-14T11:02:10.510

在新的 API 中不要忘记 TAG：

```
notify(String tag, int id, Notification notification) 
```

并且相应地

```
cancel(String tag, int id) 
```

代替：

```
cancel(int id) 
```

[https://developer.android.com/reference/android/app/NotificationManager](https://developer.android.com/reference/android/app/NotificationManager)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-03-13T13:14:55.737

只需输入这一行：

```
 builder.setAutoCancel(true); 
```

完整的代码是：

```
NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
    builder.setSmallIcon(android.R.drawable.ic_dialog_alert);
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.google.co.in/"));
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, 0);
    builder.setContentIntent(pendingIntent);
    builder.setLargeIcon(BitmapFactory.decodeResource(getResources(), R.mipmap.misti_ic));
    builder.setContentTitle("Notifications Title");
    builder.setContentText("Your notification content here.");
    builder.setSubText("Tap to view the website.");
    Toast.makeText(getApplicationContext(), "The notification has been created!!", Toast.LENGTH_LONG).show();

    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    builder.setAutoCancel(true);
    // Will display the notification in the notification bar
    notificationManager.notify(1, builder.build()); 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2020-04-09T09:09:52.220

builder.setAutoCancel(true);

在 Android 9 上也进行了测试。

# c++ - 理解 boost::variant

> ID：11883537
> 
> 赞同：3
> 
> 时间：2012-08-09T12:32:18.903
> 
> 标签：c++, boost

为什么以下内容不能编译：

```
void f(int8_t a)
{
}

void f(int16_t a)
{
}

typedef boost::variant<int8_t, int16_t> AttrValue;

int main()
{
    AttrValue a;
    a = int8_t(1);
    f(a);
} 
```

随着编译器错误：

```
error C2665: 'f' : none of the 2 overloads could convert all the argument types
could be 'void f(int8_t)'
or 'void f(int16_t)' 
```

但是，这没关系：

```
std::cout << a; // f(a); 
```

std::ostream &operator<<(std::ostream &, const AttrValue &) 在哪里定义以及为什么定义它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T12:38:52.563

重载解决方案发生在编译时，此时您的`boost::variant`实例可能包含任何一种类型，因此编译器无法知道是否调用`void f(int8_t)`或`void f(int16_t)`。

`std::cout << a`之所以有效，是因为在任何一种情况下，它都调用相同的函数，[`std::ostream &operator<<(std::ostream &, const AttrValue &)`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/operator_id1820788.html)，该函数在实例的运行时类型上调度。

您需要编写一个访问者来执行调度：

```
struct f_visitor: public boost::static_visitor<void>
{
    template<typename T> void operator()(T t) const { return f(t); }
};

boost::apply_visitor(f_visitor(), a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:39:46.193

~~好吧，一方面是你分配`a`给它自己。而且由于没有一个重载采用`boost::variant`类型，所以编译器当然找不到正确的函数。~~

此外，您可能必须使用[`boost::get`](http://www.boost.org/doc/libs/1_50_0/doc/html/boost/get_id1824090.html)来获得价值：

```
f(boost::get<int8_t>(a)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:41:17.180

恰好是`operator<<`为 定义的`boost::variant`，因此编译器不需要执行任何隐式类型转换。`f()`另一方面，对于您的函数，它不知道要选择哪种转换。

# javascript - 如何用我自己定义的值替换 screen.width 值？

> ID：11883542
> 
> 赞同：0
> 
> 时间：2012-08-09T12:32:40.480
> 
> 标签：javascript, html

如何用我自己定义的值替换 screen.width 值？

我想定义一个假的`screen.width`：

```
var screen.width = 1024; 
```

在`<head>`

因此，当下面的代码加载时，它将始终显示 =`<h1>test 2</h1>`在任何`screen.width`

我正在使用以下代码：

```
<script type="text/javascript">
if (screen.width>=1400)
{
    document.write('<h1>test 1</h1>');
}else 

{
    document.write('<h1>test 2</h1>');
}
</script> 
```

希望我能清楚地解释我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:07:40.797

只是为了好玩，您可以`screen`像这样使 's 的属性可变：

```
var tempScreen = {};
for (var obj in screen)
  tempScreen[obj] = screen[obj];

tempScreen.__proto__ = screen.__proto__;
screen = tempScreen;

screen.width = 400;
console.log(screen.width);  // -> 400 
```

# c# - 以“类似形式”的方式写入 txt

> ID：11883545
> 
> 赞同：3
> 
> 时间：2012-08-09T12:32:49.163
> 
> 标签：c#

我正在实现一个 Windows 应用程序，以便在我的工作场所更轻松地规划项目，我想知道是否有任何巧妙的方法可以使 txt 文件结构良好。

该应用程序非常简单，它所做的几乎就是给用户一个问题，该问题在下面的文本框中得到回答。然后问题和答案都会发送到一个文件中，但看起来很俗气。

例子：

问题？答案！问题？答案！

我希望它更像这样：

**问题？**
回答！

**问题？**
回答！

我也对其他类型的文件感到好奇，是否可以像使用 txt 一样使用 Pdf 或 MS word？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:46:21.350

您可以`File.AppendAllLines()`将不同的字符串作为数组使用和传递。它们将在文本文件中显示为单独的行。您还需要`using System.IO`在文件顶部添加一个。

例如：

```
// Ensure file exists before we write
if (!File.Exists("<YOUR_FILE_PATH>.txt"))
{
    using (File.CreateText("<YOUR_FILE_PATH>.txt")) {}
}

File.AppendAllLines("<YOUR_FILE_PATH>.txt", new string[] {
    "Question1",
    "Answer1",
    "Question2",
    "Answer2",
    "Question3",
    "Answer3"
}); 
```

我希望这就是你所追求的——这个问题有点含糊。

对于 Word 和 PDF 文件，这更复杂。这是关于 Word 的 StackOverflow 问题的链接：

[如何在 C# 中创建 Word 文档？](https://stackoverflow.com/questions/10412/how-can-a-word-document-be-created-in-c)

还有一个关于PDF：

[在 C# 运行时创建 pdf 文件](https://stackoverflow.com/questions/465433/creating-pdf-files-at-runtime-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:40:16.483

对于一个简单的文本文件，您可以使用

```
StringBuilder fileData = new StringBuilder();
fileData.AppendLine("Question: blah! blah! blah! blah!");
fileData.AppendLine("Answer: blah! blah! blah! blah!");

FileStream fs = new FileStream("yourFile.txt", FileMode.Create);
StreamWriter sw = new StreamWriter(fs);
sw.Write(fileData.ToString());
sw.Flush();
fs.Flush();
fs.Close(); 
```

但当然它不会给你那种**大胆**的问题风格，因为你必须使用其他东西，

喜欢**MS Word**互操作，了解[访问这里](http://support.microsoft.com/kb/316384)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T13:00:42.953

我想提一下这个`String.Format`功能。

假设，你有你的字符串`question`，`answer`你可以做一些

```
using (var stream = new StreamWriter('myfile.txt', true)) // append=true
  stream.Write(String.Format("\n{0}\n{1}\n\n{2}\n", 
                             question, 
                             new String('=',question.Length), 
                             answer); 
```

得到一个文本文件，如

```
Question 1
==========
Answer

Second Question
===============
Answer 
```

您可能还想使用`String.Trim()`on`question`去除前导和尾随空格 ( `question = question.Trim()`)，因此“下划线”效果看起来不错。

# javascript - rails jquery ajax请求未执行

> ID：11883546
> 
> 赞同：0
> 
> 时间：2012-08-09T12:32:50.630
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我正在一个应用程序上实现一个投票系统，我正在构建的应用程序与 stackoverflow 上的应用程序非常相似。当用户单击 upvote 或 downvote 时，将向我的一个控制器发送一个 ajax 请求，它们会更新几个表。完成后，我使用 respond_to 路由到执行 jquery 以更新用户显示的 js.erb 文件。但是，jquery 没有被执行。当我舔赞成/反对票时，控制器代码正确执行（我可以在 rails 控制台中看到它），但用户显示没有更新。然而，刷新后，用户显示会更新，但不是异步的。我知道 jquery 没有在 fire bug 控制台中执行 b/c 我可以看到我的 jquery 代码 - 它只是没有被应用。这是我的赞成控制器代码：

```
def upvote
        @post = Post.find(params[:id])

        @user_vote = current_user.votes.where(post_id: @post.id).first
        if @user_vote.blank?
            Vote.create(user_id: current_user.id, post_id: @post.id, vote: 1)
            @post.upvotes += 1
        elsif @user_vote.vote.to_i == 0
            @user_vote.vote = 1
            @post.upvotes += 1
        elsif @user_vote.vote.to_i == 1
            return redirect_to :back, :alert => 'You have already upvoted the post'
        elsif @user_vote.vote.to_i == 2
            @user_vote.vote = 1
            @post.downvotes -= 1
            @post.upvotes += 1
        end

        respond_to do |format|
            if @post.save and @user_vote.save
                format.js { }
            else 
                format.html { redirect_to :back, :alert => 'There was an error in upvoting the post' }
            end
        end

    end 
```

这是我的 upvote.js.erb 文件：

```
$('#post-action-<%= @post.id %>').html("upvote");
// this normally renders a partial (below), but I am rendering "upvote" until I can fix this
// escape_javascript(<%= render :partial => 'post_voting', :locals => { post: @post, user_vote: @user_vote } %>) 
```

这是我的html：

```
 <div class="post_actions" id='post-action-<%= "#{post.id}" %>' >

            <%= render :partial => 'post_voting', :locals => { post: post, user_vote: current_user.votes.where( post_id: post.id ).first } %>

        </div> 
```

这是我的萤火虫控制台输出：http: [//i.imgur.com/H6zXJ.png](http://i.imgur.com/H6zXJ.png)

**编辑**

我注意到我的服务器上出现错误：

```
Started GET "/assets/bootstrap.js?body=1" for 127.0.0.1 at 2012-08-09 06:33:42 -0700
Served asset /bootstrap.js - 304 Not Modified (0ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:00:18.867

在弄乱了 jquery 之后，我注意到了一些事情。首先，我需要缩小我的代码（删除所有注释和未使用的空格）。我拿了这个：

```
$('#post-action-<%= @post.id %>').html("upvote");
// this normally renders a partial (below), but I am rendering "upvote" until I can fix this
// escape_javascript(<%= render :partial => 'post_voting', :locals => { post: @post, user_vote: @user_vote } %>) 
```

并将其更改为：

```
$('#post-action-<%= @post.id %>').html("upvote"); 
```

然后代码正在运行，并且用户显示正在更新以显示“upvote”。完美的。所以我用这个替换了上面的代码：

```
$('#post-action-<%= "#{@post.id}" %>').html("<%= escape_javascript(render :partial => 'post_voting', :locals => { :post => @post, :user_vote => @user_vote }) %>"); 
```

和木瓜！有用。很高兴解决了这个问题！缩小您的 JQUERY 人员！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:49:10.443

您的代码似乎没问题，应该执行。您可能会进行额外检查以更新固定 id 而不是计算出的 id。

```
$('#updateme').html("upvote"); 
```

并将此 ID 添加到您的 html 中的某处。如果这可行，您可以确定 ajax 调用完全执行，而问题只是您引用的 id。

您是否检查过您的 html 源代码中是否存在 id“post-action-2”？

# iphone - 将文件内容加载到 NSArray

> ID：11883548
> 
> 赞同：0
> 
> 时间：2012-08-09T12:32:58.203
> 
> 标签：iphone, objective-c, xcode, ipad

我正在使用此代码将内容加载到 NSArray 并且它似乎工作正常但是检测泄漏的仪器指出存在我无法解决的问题：

```
 - (void) loadPlan: (NSString  *) fName
    {

        short j1;

        fName= [NSString stringWithFormat:@"/%@",  fName];

        [self NewCase];

        NSArray *arrayPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDirectory = [arrayPaths objectAtIndex:0];

        NSString *filePath = [docDirectory stringByAppendingString:fName];
        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:filePath];

        if (!fileExists) return;

        NSString *fileContents = [NSString stringWithContentsOfFile:filePath
                                                           encoding:NSUTF8StringEncoding error:nil];

        NSArray *chunks = [fileContents componentsSeparatedByString: @"#"];

      for (i = 0; i <= 100; i++)
         {
            InputV[i] = [[chunks objectAtIndex: i+5] doubleValue];
         }

    ...    
      for (j1 = 0; j1 <= 10; j1++)
        {

            GroupMode[j1] = [[chunks objectAtIndex: 206+j1]   retain];   
        }

     ...
} 
```

在某个地方的初始化方法上，我有：

```
for (j1 = 0; j1 <= 10; j1++)
     {
           GroupMode[j1] = [[NSString alloc] initWithFormat:@""];
     } 
```

仪器指向 NSAraay *chunks 行代码，但我不确定是什么问题。我需要在某个时候释放它吗？

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:13:01.357

在您提到能够调用释放的评论中。因此你没有使用 ARC，因为我注意到你用 iphone 标记了你没有使用 GC。这留下了手动内存管理。

问题似乎是块数组或它们的某些块被过度保留（或释放不足）。你没有显示所有的代码，所以很难说。

确保您没有将它们中的任何一个保留在您未显示的代码中的其他位置。也许向我们展示 loadPlan 方法实现的其余部分。

编辑：现在您添加了更多代码，我也可以扩展此答案。

回答这个问题：对与发布匹配的块的保留调用在哪里？

还有什么是 GroupMode 的声明？它似乎只是一个指针数组。如果是这样，您可能需要在设置新值之前释放旧值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:15:42.383

让我根据您发布的内容尝试另一个答案。

我假设 GroupMode 是某个类的实例变量，并且声明如下：

NSString* GroupMode[11];

loadPlan 中的第二个循环应该是：

```
 for (j1 = 0; j1 <= 10; j1++)
    {
        NSString* aChunk = [chunks objectAtIndex: 206+j1];
        if ( GroupMode[j1] != aChunk ) {
            [GroupMode[j1] release];
            GroupMode[j1] = [aChunk retain];
        }   
    } 
```

每次更改 GroupMode 的元素时都应该做类似的事情，并且应该确保在该类的 dealloc 方法中释放所有 GroupMode 持有的对象。

但是，我建议您不要使用普通数组，而是改用 NSArray 和/或 NSMutableArray。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:52:53.387

看看这个答案：

["componentsSeparatedByString" 内存泄漏](https://stackoverflow.com/questions/5299797/componentsseparatedbystring-memory-leak)

问题可能是使用结果的东西过度保留了块中的东西。Instruments 指向这条线，因为它是第一次分配内存的地方，但它可能不是问题的根源。

# python - 通过 tp_getset 访问时 Python C-Extension 段错误

> ID：11883550
> 
> 赞同：0
> 
> 时间：2012-08-09T12:33:02.617
> 
> 标签：python, c, segmentation-fault, python-c-api

我正在尝试为 python 编写一个 C 扩展。我想写的是一个 ModPolynomial 类，它表示 (Z/nZ)[x]/x^r-1 上的多项式[即使您可能在不知道任何此类多项式的情况下回答我的问题]。

我写了一些代码，似乎可以工作。基本上我只是在我的 ModPoly 结构中存储了三个 PyObject*。现在我想添加多项式系数的存储。

由于我希望系数是只读的，因此我想通过 PyGetSetDef 添加一对 getter/setter 函数。但是当我从 python 访问 getter（例如 print pol.coefficients）时，我收到了一个分段错误。

可以在[这里](http://pastebin.com/8xqavgBw)找到没有“系数”的原始代码。带有系数的代码在[这里](http://pastebin.com/8zwS5wHD)。

我希望你们中的某个人能告诉我我在哪里做错了。顺便说一句，也欢迎对代码发表评论。这是我的第一次扩展，我知道我可能做得很糟糕。

正如 ecatmur 在评论中所说， PyVarObject 在结构的末尾存储了一定数量的“插槽”。所以我决定避开他们。

相关代码为：

```
typedef struct {
    PyObject_HEAD
    /* Type specific fields */

    Py_ssize_t ob_size;
    PyObject **ob_item;
    Py_ssize_t allocated;

    PyObject *r_modulus;
    PyObject *n_modulus;
    PyObject *degree;
} ModPoly;

static PyObject *
ModPoly_new(PyTypeObject *type, PyObject *args, PyObject *kwds)
{
    ModPoly *self;

    self = (ModPoly *)type->tp_alloc(type, 0);
    if (self != NULL) {
        [...]

        self->ob_size = 0;
        self->ob_item = NULL;
        self->allocated = 0;
    }

    return (PyObject *)self;
}

static int
ModPoly_init(ModPoly *self, PyObject *args, PyObject *kwds)
{
    PyObject *r_modulus=NULL, *n_modulus=NULL, *coefs=NULL, *tmp;
    PyObject **tmp_ar;

    static char *kwlist[] = {"r_modulus", "n_modulus", "coefficients", NULL};

    if (!PyArg_ParseTupleAndKeywords(args, kwds, "OO|O", kwlist,
                                     &r_modulus, &n_modulus, &coefs))
        return -1;

    [...]

    // The polynomial defaults to "x", so the coefficients should be [0, 1].
    tmp_ar = (PyObject **)malloc(2 * sizeof(PyObject*));
    if (tmp_ar == NULL) {
        Py_DECREF(self->r_modulus);
        Py_DECREF(self->n_modulus);
        Py_DECREF(self->degree);
        return -1;
    }

    tmp_ar[0] = PyInt_FromLong(0);
    if (tmp_ar[0] != NULL) {
        tmp_ar[1] = PyInt_FromLong(1);
    }

    if (tmp_ar[0] == NULL || tmp_ar[0] == NULL) {
        Py_DECREF(self->r_modulus);
        Py_DECREF(self->n_modulus);
        Py_DECREF(self->degree);
        Py_XDECREF(tmp_ar[0]);
        Py_XDECREF(tmp_ar[1]);
        free(tmp_ar);
        return -1;
    }

    self->ob_size = 2;
    self->allocated = 2;

    return 0;
}

[...]

static PyObject *
ModPoly_getcoefs(ModPoly *self, void *closure)
{
    printf("here"); // "here" is never printed
    PyTupleObject *res=(PyTupleObject*)PyTuple_New(self->ob_size);
    Py_ssize_t i;
    PyObject *tmp;

    if (res == NULL)
        return NULL;

    for (i=0; i < self->ob_size; i++) {
        tmp = self->ob_item[i];
        Py_INCREF(tmp);
        PyTuple_SET_ITEM(res, i, tmp);
    }
    return (PyObject *)res;
}

static PyObject *
ModPoly_setcoefs(ModPoly *self, PyObject *value, void* closure)
{
    PyErr_SetString(PyExc_AttributeError,
                    "Cannot set the coefficients of a polynomial.");
    return NULL;
}

[...]

static PyGetSetDef ModPoly_getsetters[] = {
  {"coefficients",
      (getter)ModPoly_getcoefs, (setter)ModPoly_setcoefs,
    "The polynomial coefficients.", NULL},
  {NULL, 0, 0, NULL, NULL}  
};

static PyTypeObject ModPolyType = {
    PyObject_HEAD_INIT(NULL)
        0,                                                                      /* ob_size        */
    [...]
    ModPoly_members,                                        /* tp_members */
    ModPoly_getsetters,                                     /* tp_getset */
    0,                                                      /* tp_base */
    [...]
};

[...] 
```

**编辑**

我试图通过指令重新实现 getter 指令，并且我明白我没有在做什么。在 ModPoly_init 函数中，我创建了存储系数的 tmp_ar，但我没有将它分配给 self->ob_item。

-掌心-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T07:50:48.160

您似乎只分配给`ModPoly.ob_item`in `ModPoly_new()`（将其设置为`NULL`）。

`ModPoly_getcoefs()`然后取消引用空指针，这会给你你的段错误。看起来您打算分配给`ob_item`in `ModPoly_init()`，但实际上并没有这样做。

# javascript - 无法从 .each 循环加载谷歌地图上的两个标记

> ID：11883554
> 
> 赞同：0
> 
> 时间：2012-08-09T12:33:05.600
> 
> 标签：javascript, jquery, google-maps

我试图在 googlemap 上加载两个标记，但似乎地图加载了两次，我看不到两个标记。这是代码。

```
 var geocoder;
    var map;
    geocoder = new google.maps.Geocoder();
    //    var address = document.getElementById("address").value;
    //      var user='33936357';
    $.getJSON("http://api.twitter.com/1/users/lookup.json?user_id=33936357,606020001&callback=?", function (data) {
      $.each(data, function (i, item) {
        var screen_name = item.screen_name;
        var img = item.profile_image_url;
        var location = item.location;
        geocoder.geocode({
          address: location
        }, function (response, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            var x = response[0].geometry.location.lat(),
              y = response[0].geometry.location.lng();
            var mapOptions = {
              center: new google.maps.LatLng(x, y),
              zoom: 8,
              mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            var marker = new google.maps.Marker({
              icon: img,
              title: screen_name,
              map: map,
              position: new google.maps.LatLng(x, y)
            });
          } else {
            alert("Geocode was not successful for the following reason: " + status);
          }
        });
      });
    }); 
```

我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:39:17.447

您的地图创建在每个循环内.. 试试这个：

```
// setup the map objects
var geocoder = new google.maps.Geocoder();;
var mapOptions = {
      center: new google.maps.LatLng(0, 0), 
      zoom: 8,
       mapTypeId: google.maps.MapTypeId.ROADMAP
};
// added this 
var bounds = new google.maps.LatLngBounds();
// create the map
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

$.getJSON("http://api.twitter.com/1/users/lookup.json?user_id=33936357,606020001&callback=?", function (data) {
  $.each(data, function (i, item) {
    var screen_name = item.screen_name;
    var img = item.profile_image_url;
    var location = item.location;
    geocoder.geocode({
      address: location
    }, function (response, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var x = response[0].geometry.location.lat(),
          y = response[0].geometry.location.lng(); 
        var myLatLng = new google.maps.LatLng(x, y);
        var marker = new google.maps.Marker({
          icon: img,
          title: screen_name,
          map: map,
          position: myLatLng
        });
        bounds.extend(myLatLng);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  });
  map.fitBounds(bounds);
}); 
```

现在您创建地图一个.. 将经纬度添加到`LatLngBounds`对象，然后设置地图以适合边界。

[关于 LatLngBounds 的文档在这里](https://developers.google.com/maps/documentation/javascript/reference#LatLngBounds)

# gettext - 我没有从 xgettext 得到任何输出

> ID：11883556
> 
> 赞同：2
> 
> 时间：2012-08-09T12:33:12.633
> 
> 标签：gettext, xgettext

我将尝试使用 gnu-gettext 进行半大型软件项目的本地化，所以现在我正在尝试学习基础知识。问题是我陷入了一个非常基本的功能。当我尝试使用 xgettext 从源代码中提取字符串时，我什么也没得到。当 dll 丢失时它会抱怨，当参数错误时它会抱怨，但现在它只是默默地返回，而不产生任何 pot-file 或其他任何东西。

所以，我的问题是：有没有人认识到这个问题？有没有办法让 xgettext 更详细地说明它在做什么？

我尝试将 xgettext 放在源文件中并将源文件放在 gettext\bin 目录中，但无济于事。

我应该提到我正在使用 Win7 机器，我使用 gettext-tools-dev_0.18.1.1-2_win32。我已经安装了 MinGW。

我的测试代码锁是这样的：

```
#include <string>
#include <stdio.h>
#include <stdlib.h>
#include "libintl.h"
#include "locale.h"
#include "helper.h"

#define _(String) gettext(String)
#define N_(String) String
//#define textdomain(Domain)
//#define bindtextdomain(Package, Directory)

int main(void)
{
  printf( "setlocale returns %s\n", setlocale( LC_ALL, "" ) );

  bindtextdomain( "hello", "locale" );
  textdomain( "hello" ); 

  int a = 1;
  int b = 2;

  /// First string
  printf( _( "Hello, world!\n" ) );

  std::string multiline =
    /* Another string */
    _( "This is a " \
       "multi line string." );
  // A string that contains another
  printf( _( "A string: %s\n" ), multiline.c_str() );
  printf( N_( "An untranslatable string!\n" ));
  int foo = 42;
  /// Playing with positions; int before string in original...
  printf( _( "int: %1$d, string: %2$s\n" ), foo, _( "Fubar" )); 
  printf( _( "%1$s %2$s\n" ), Helper::String1().c_str(), Helper::String2().c_str() );
  exit(0);
} 
```

如果有人可以帮助我解决这个问题，我将不胜感激。/罗伯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:43:42.773

好的，我解决了。我以某种方式认为 xgettext 会理解重新定义：

```
#define _(String) gettext(String) 
```

好吧，显然它没有，当我仔细阅读手册时，它也这么说。

因此，当我将**-k_**添加到 xgettext 选项时，它一切正常。

/罗伯特

# android - 从 shell@android 启动 ndk SanAngeles

> ID：11883558
> 
> 赞同：0
> 
> 时间：2012-08-09T12:33:18.787
> 
> 标签：android, c++, opengl-es, android-ndk, android-activity

我已经在我的手机中运行了 SanAngeles 演示。

以下是我采取的步骤：

```
$ android update project -p . --target android-14
$ ndk-build -B V=1 APP_OPTIM=debug NDK_DEBUG=1
$ ant debug install 
```

它安装得很好。我看到该程序是从智能手机中的应用程序列表中安装的。如果我单击 DemoActivity 图标，它就会运行。

但是，如果我尝试在主机控制台上执行此操作：

```
$ adb shell
shell@android: $ am start -a android.intent.action.MAIN -n com.example.sanangeles/com.example.sanangeles.demoactivity

Error type 3
Error: Activity class {com.example.sanangeles/com.example.sanangeles.demoactivity}
does not exist. 
```

有什么建议吗？

# grails - Grails 从 ant 清理/构建任务

> ID：11883559
> 
> 赞同：2
> 
> 时间：2012-08-09T12:33:19.630
> 
> 标签：grails, ant

是否可以运行

```
grails clean
grails build 
```

等

来自蚂蚁脚本的任务？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T07:52:21.850

试试这个[宏](http://cantina.co/2008/09/01/fitting-grails-into-an-ant-build-environment/)。虽然它几乎提供了[ANT exec](http://ant.apache.org/manual/Tasks/exec.html)任务会给你的东西。

# android - Android/Iphone 套接字通信

> ID：11883562
> 
> 赞同：1
> 
> 时间：2012-08-09T12:33:25.073
> 
> 标签：android, iphone, sockets

我和我的一位同事正在研究 Android 和 Iphone 应用程序之间的简单套接字通信。到目前为止，我们实现的事情是我可以在另一个线程中向他发送字节数组并在服务中接收字节数组。但是我们面临的问题是，如果他不关闭套接字，我就无法阅读他发送的整个消息。但是我需要那个套接字活着，所以如果数据正常或有问题，我可以向他发送响应。以下是我听取他信息的方式：

```
thread =  new Thread(new Runnable() {
        public void run() {
            try {
                serverSocket = new ServerSocket(5000);
                while(state){
                        client = serverSocket.accept();
                        client.setKeepAlive(true);

                        // LOGS
                        Log.d("","receivedBufferSize : "+serverSocket.getReceiveBufferSize());
                        Log.d("","is connected : "+client.isConnected());
                        Log.d("","port : "+client.getPort());
                        Log.d("","ipadress : "+client.getInetAddress().toString());

                        InputStream is = client.getInputStream();

                        Log.d("","is Size : "+is.available());

                        byte[] bytes = toByteArray(is);
                        for(int i=0;i<bytes.length;i++){
                            Log.d("","bytes["+i+"] : "+bytes[i]);
                        }

                 }

                  serverSocket.close();
                  Log.d("","client socket : "+client.isClosed() + " serverSocket : "+serverSocket.isClosed());

             } catch (UnknownHostException e) {
                 e.printStackTrace();
             } catch (IOException e) {
                 e.printStackTrace();
             }
        }
    });
    thread.start(); 
```

因此，如果他不关闭应用程序或不关闭套接字，我就会坐在该日志消息上：`Log.d("","is Size : "+is.available());`并且什么都没有发生。在他关闭套接字后，我可以看到接收到的字节数组的字节。

知道我做错了什么或任何建议/帮助可能导致这种情况的原因吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:01:08.097

实际上问题出在Iphone方面，它只是Objective C实现的输入/输出流问题。所以这段代码工作正常。

# apache - 识别 apache http 服务器日志中的错误来源

> ID：11883564
> 
> 赞同：1
> 
> 时间：2012-08-09T12:33:26.767
> 
> 标签：apache, tomcat, logging, httpserver

我有 apache http 2.2 服务器负载平衡到几个运行 java servlet 的 tomcat 应用程序服务器。有时会在 http 日志中返回错误响应，它显示：

```
212.xx.xx.x - - [09/Aug/2012:05:07:32 -0700]“GET /myservlet/myService?inputParam=xxx HTTP/1.1”500 627

```

有没有办法让我记录 tomcat ip 或某种 id，以便我可以识别哪个 tomcat 服务器产生错误？

# jquery - 有条件地设置 DOM 元素的值

> ID：11883571
> 
> 赞同：0
> 
> 时间：2012-08-09T12:33:48.267
> 
> 标签：jquery

可以做以下事情吗？

```
$("#textarea1").val = function() {
    $.each(data, function(i, j) {
        if ($.trim($("#text2").val()) == j.l) {
            return j.v;
        } else {}
    });
}; 
```

我们可以有条件地设置某些输入类型或 div 的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:38:18.993

**您应该先找出值，然后更改元素的值。**

你这样做的方式很奇怪。我不确定你用你的循环做什么。但首先这样做，然后设置元素值。

快速示例：

```
var name = "Sam!";

if ( name != "Sam!" ) {
  $("#textarea1").val("Your not Sam!");
} else {
  $("#textarea1").val("Hey Sam :)");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:39:51.973

如果`condition`计算结果为`true`，则该值将设置为`"yes"`。否则它保持不变。

```
$("#textarea1").val(function(i, oldval) {
    return condition ? "yes" : oldval;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:51:55.200

我假设你有一些有效的设计模式理由，而不是简单地`$("#textarea1").val(j.v)`在你的`each`函数内部调用，而不是像现在这样在函数外部设置它。（也许您有许多函数对象，您希望有条件地使用其逻辑来设置大量输入？）

也就是说，您的代码只需要一些更改：

1.  正确使用该`val`函数（它是一个设置器，而不是一个可设置的属性）。
2.  现在，该`return`语句正在终止传递给 的函数`each`，而不是外部函数。您应该让`each`函数设置一个变量，然后通过返回 false 来中断。

它应该看起来像：

```
$("#textarea1").val(function() {
    var result;
    $.each(data, function(i, j) {
        ...
        result = j.v;
        return false;
    });
    return result;
}); 
```

`val`将自动执行函数并使用返回值。

# php - 路由url以变量开头时的CodeIgniter路由

> ID：11883574
> 
> 赞同：1
> 
> 时间：2012-08-09T12:33:51.637
> 
> 标签：php, codeigniter, routing, url-routing

当路由 url 以如下变量开头时，我在 codeigniter 路由上遇到问题 -

```
$route['(:any)/(:any)']  = "home/index/0/N/DealsAmount/ASC/$1/$2"; 
```

当我通过 url 传递值时，我可以配置其他路由 url。示例：以下内容完美运行

```
$route['About-Us/Team'] = "aboutus/team";
$route['About-us/Jobs'] = "aboutus/jobs";
$route['About-Us/FAQ'] = "aboutus/faq"; 
```

但是我使用这个 url 使用如下的变量——

```
$route['About-Us/Team/(:any)'] = "aboutus/team/$1";
$route['About-Us/Team/(:any)/(:any)'] = "aboutus/team/$1/$2";
$route['About-us/Jobs/(:any)'] = "aboutus/jobs/$1";
$route['About-Us/FAQ/(:num)'] = "aboutus/faq/$1"; 
```

然后它重定向到主页，这意味着这个路由在这里不起作用 $route['(:any)/(:any)'] 正在工作 我怎么能路由这些类型的 url 你能告诉我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:42:26.853

您必须将路线`:any`放在底部。如果你把它放在顶部，其他路线永远不会被抓住。这应该没问题：

```
$route['About-Us/Team/(:any)/(:any)'] = "aboutus/team/$1/$2";
$route['About-Us/Team/(:any)'] = "aboutus/team/$1";
$route['About-us/Jobs/(:any)'] = "aboutus/jobs/$1";
$route['About-Us/FAQ/(:num)'] = "aboutus/faq/$1";
$route['(:any)/(:any)']  = "home/index/0/N/DealsAmount/ASC/$1/$2"; 
```

# php - 使用 SimpleXML 和 PHP 通过 https 获取 XML 内容的问题

> ID：11883575
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:33:51.697
> 
> 标签：php, xml, simplexml

> **可能重复：**
> [如何启用 HTTPS 流包装器](https://stackoverflow.com/questions/2305954/how-to-enable-https-stream-wrappers)

我正在使用简单的 XML 从 API 获取内容。通常我没有问题，但现在 URL 是 HTTPS，它似乎不起作用。有没有办法解决？

示例 XML（网址）：

```
<?xml version="1.0"?>
<calendars>
  <calendar accommodation_id="1049165">
    <day date="2012-08-09" vacancy="false" minimum_nights="7" arrival_day="true"/>
    <day date="2012-08-10" vacancy="false" minimum_nights="3" arrival_day="true"/>
    <day date="2012-08-11" vacancy="false" minimum_nights="3" arrival_day="true"/>
    <!-- ... -->
    <day date="2014-01-31" vacancy="true" minimum_nights="3" arrival_day="true"/>
  </calendar>
</calendars> 
```

示例代码：

```
$xml2 = file_get_contents('');
$availability = new SimpleXMLElement($xml2); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:10:56.520

You are using the XML API of the `www.casapilot.com` website.

The API is via HTTPS, one example URI is:

```
https://www.casapilot.com/api/1/accommodations/calendar.xml?auth_token=hyXHjP8QdrRuX8q3FsbC&id=1049165 
```

For HTTPs to work, PHP needs the openssl extension. The information is given on the related [Stream Wrapper Page](http://de.php.net/manual/wrappers.http.php):

> **Note:** HTTPS is only supported when the openssl extension is enabled.

The openssl extension is then used for all HTTPS "files" transparently with the stream-wrapper for all URIs starting with `https://`.

See as well the duplicate question:

*   [How to enable HTTPS stream wrappers](https://stackoverflow.com/questions/2305954/how-to-enable-https-stream-wrappers)

# wordpress - 发布或编辑博客时，Wordpress 管理员会收到电子邮件通知

> ID：11883577
> 
> 赞同：0
> 
> 时间：2012-08-09T12:33:58.117
> 
> 标签：wordpress, notifications, admin

我正在尝试找到一种在发布博客时提醒所有管理员的方法。我的客户为他的 Wordpress 网站设置了多个管理员，并且希望在其中一个提交新的博客文章或编辑一篇文章时收到警报，以便他可以仔细检查拼写错误并确保他批准内容并希望得到通知用电子邮件。我为此搜索了一个插件，但结果为空。有谁知道如何做到这一点，或者他们是否是一个我找不到的插件来完成这个？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:41:50.623

你应该看看[subscribe2 插件](http://subscribe2.wordpress.com/)。我在我的一个会员网站上使用它来在发布新内容时通知订阅者。您可以定义通知列表以包含您喜欢的任何电子邮件地址。默认情况下，所有新帖子都将通过电子邮件发送到这些地址。

至于编辑，我认为插件默认不会这样做，但是它确实在帖子编辑器的底部添加了一个复选框，允许强制通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T20:32:46.607

对于面临同样问题的其他开发人员，这是一个非常酷的插件。它重量很轻，易于配置。下面是链接

[http://wordpress.org/plugins/wp-status-notifier/](http://wordpress.org/plugins/wp-status-notifier/)

# scala - 如何将函数的返回类型指定为（任意）monad？

> ID：11883581
> 
> 赞同：2
> 
> 时间：2012-08-09T12:34:09.567
> 
> 标签：scala, monads, scalaz, monad-transformers

简而言之，我想声明一个这样的特征：

```
trait Test {
    def test(amount: Int): A[Int] // where A must be a Monad
} 
```

这样我就可以在不知道monad`A`是什么的情况下使用它，例如：

```
class Usecase {
    def someFun(t: Test) = for { i <- t.test(3) } yield i+1
} 
```

* * *

更多细节...

本质上，我想做这样的事情：

```
class MonadResultA extends SomeUnknownType {
    // the base function
    def test(s: String): Option[Int] = Some(3)
}

class MonadResultB(a: MonadResultA) extends SomeUnknownType {
    // added a layer of Writer on top of base function
    def test(s: String): WriterT[Option, String, Int] = WriterT.put(a.test(s))("the log")
}

class Process {
    def work(x: SomeUnknownType) {
        for {
            i <- x.test("key")
        } yield i+1
    }
} 
```

我希望能够传递`MonadResultA` **或** `MonadResultB`不对函数进行任何更改的任何实例`work`。
缺少的部分是`SomeUnknowType`，我想它应该有一个`test`类似的下面来使`work`函数编译。

```
trait SomeUnknowType {
    def test(s: String): T[Int] // where T must be some Monad
} 
```

* * *

正如我所说，我还在学习这个 monad 的东西......如果你发现我的代码不是*正确*的方法，非常欢迎你指出来~

非常感谢~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:50:30.590

假设您有一个名为的类型类，`Monad`您可以编写

```
def test[A:Monad](amount: Int): A[Int] 
```

调用 test 时，编译器将要求`Monad[A]`范围内有隐式类型。

**编辑：** 我仍然不确定您在寻找什么，但是您可以将 monad 值与其对应的类型类打包成这样的特征：

```
//trait that holds value and monad
trait ValueWithMonad[E] {
  type A[+E]
  type M <: Monad[A]
  val v:A[E]
  val m:M
}

object M {

  //example implementation of test method
  def test(amount:Int):ValueWithMonad[Int] = new ValueWithMonad[Int] {
    type A[+E] = Option[E]
    type M = Monad[Option]
    override val v = Option(amount)
    override val m = OptionMonad
  }

  //test can now be used like this
  def t {
    val vwm = test(1)
    vwm.m.bind(vwm.v, (x:Int) => {
      println(x)
      vwm.m.ret(x)
    })
  }
}

trait Monad[A[_]] {
  def bind[E,E2](m:A[E], f:E=>A[E2]):A[E2]
  def ret[E](e:E):A[E]
}

object OptionMonad extends Monad[Option] {
  override def bind[E,E2](m:Option[E], f:E=>Option[E2]) = m.flatMap(f)
  override def ret[E](e:E) = Some(e)
} 
```

# c# - 纹理映射 - 拉伸

> ID：11883593
> 
> 赞同：1
> 
> 时间：2012-08-09T12:35:04.210
> 
> 标签：c#, c++, opengl

我正在尝试在 OpenGL 中创建一个简单的 GUI。我创建了一张图片，因此我可以参考它并使解释更简单：

[![纹理贴图](../Images/65f21abc2b991c8870aeb03a51b6dc29.png)](https://i.stack.imgur.com/SopTr.png)

当我将按钮 (32x32) 的纹理应用到大小为 120x20 的四边形（即不是矩形作为纹理）上时，**ML**和**MR**被拉伸成非常粗的线条，这使得按钮看起来难看。**我知道，通过为每个线段（ TL**、**TM**、**TR**等）创建一个新的四边形并将部分纹理应用到每个线段，我可以避免如图所示的失真：

[![扭曲的纹理](../Images/169815a9ff80cb6005ae13c4ab9ef75a.png)](https://i.stack.imgur.com/EKkbc.png)

问题 #1：我能否以某种方式将源纹理的一部分应用于四边形的确切位置？我可以取纹理的**TL/ML/BL**部分并在四边形的最左侧应用垂直拉伸，然后取**TM/MM/BM**并在前一部分旁边应用水平拉伸， ETC。？因为我只需要4个顶点，它甚至可能而且会更快吗？

*   换句话说，我可以只拉伸纹理的一部分吗？垂直拉伸一些部分，水平拉伸一些部分，然后将此多拉伸纹理应用于多边形？

问题#2：如果不可能，我将如何减少所需的顶点数量？创建 9x4vert 四边形需要 36 个顶点，但如果我让它们共享所有可以共享的顶点，我可以将这个数字减少到 16 个吗？

# 答案：

我一直在工作很长时间，手工绘制所有索引和坐标并将其放在纸上，所以我希望这对某人有用。我希望它是正确的，尽管它对我来说很好。它在 C# 中，但将其转换为 C++ 是微不足道的。

编辑：我一直在研究它，这是 3x3 平面的最终顶点/索引数组。

```
 public Vector3[] VertexData = new[]
                                    {
                                        new Vector3(-1.0f, -1.0f, 0.0f),
                                        new Vector3(-0.33f, -1.0f, 0.0f),
                                        new Vector3(0.33f, -1.0f, 0.0f),
                                        new Vector3(1.0f, -1.0f, 0.0f),

                                        new Vector3(-1.0f, -0.33f, 0.0f),
                                        new Vector3(-0.33f, -0.33f, 0.0f),
                                        new Vector3(0.33f, -0.33f, 0.0f),
                                        new Vector3(1.0f, -0.33f, 0.0f),

                                        new Vector3(-1.0f, 0.33f, 0.0f),
                                        new Vector3(-0.33f, 0.33f, 0.0f),
                                        new Vector3(0.33f, 0.33f, 0.0f),
                                        new Vector3(1.0f, 0.33f, 0.0f),

                                        new Vector3(-1.0f, 1.0f, 0.0f),
                                        new Vector3(-0.33f, 1.0f, 0.0f),
                                        new Vector3(0.33f, 1.0f, 0.0f),
                                        new Vector3(1.0f, 1.0f, 0.0f)
                                    };

    public Vector3[] NormalData = new[]
                                   {
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),

                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),

                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),

                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f),
                                       new Vector3(0f, 0f, 1f)
                                   };

    public Vector2[] TextureData = new[]
                                   {
                                       new Vector2(0.0f, 1.0f),
                                       new Vector2(0.33f, 1.0f),
                                       new Vector2(0.66f, 1.0f), 
                                       new Vector2(1.0f, 1.0f), 

                                       new Vector2(0.0f, 0.66f),
                                       new Vector2(0.33f, 0.66f),
                                       new Vector2(0.66f, 0.66f), 
                                       new Vector2(1.0f, 0.66f), 

                                       new Vector2(0.0f, 0.33f), 
                                       new Vector2(0.33f, 0.33f), 
                                       new Vector2(0.66f, 0.33f), 
                                       new Vector2(1.0f, 0.33f), 

                                       new Vector2(0.0f, 0.0f), 
                                       new Vector2(0.33f, 0.0f), 
                                       new Vector2(0.66f, 0.0f), 
                                       new Vector2(1.0f, 0.0f) 
                                   };

    public UInt32[] IndicesData = new UInt32[54]
                                      {
                                          0, 1, 5,
                                          0, 4, 5,
                                          1, 2, 6,
                                          1, 5, 6,
                                          2, 3, 7,
                                          2, 6, 7,

                                          4, 5, 9,
                                          4, 8, 9,
                                          5, 6, 10,
                                          5, 9, 10,
                                          6, 7, 11,
                                          6, 10, 11,

                                          8, 9, 13,
                                          8, 12, 13,
                                          9, 10, 14,
                                          9, 13, 14,
                                          10, 11, 15,
                                          10, 14, 15
                                      }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:24:07.360

> 我知道，通过为每个线段（TL、TM、TR 等）创建一个新的四边形并将部分纹理应用到每个线段，我可以避免如图所示的失真

这正是你应该做的。

> 问题#2：如果不可能，我将如何减少所需的顶点数量？

你当然可以，而且你应该共享边缘相交的顶点，因为你的纹理映射在那里是连续的，只有一阶导数会发生变化，这是完全有序的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:13:07.100

我还没有听说过任何关于拉伸纹理部分的事情。在您的情况下，不仅**ML**和**MR**被拉伸，**MM**也被拉伸。它只是不那么明显，因为**MM**是一种颜色。

关于您的问题...您可以将按钮的多边形划分为 9 个四边形，就像您发布的图片中一样？然后您可以对纹理进行切片并将其不同部分应用到不同的四边形上。这就是我目前能想到的。

关于问题 #2 - 我相信您应该查看顶点和索引缓冲区。基本上，顶点缓冲区是所有唯一顶点的缓冲区，索引缓冲区按顺序保存顶点缓冲区中顶点的索引，当您从它们组装三角形时它们出现的顺序。在索引缓冲区中，一个索引可以出现多次（这就是这个缓冲区的目的——所以你不能多次拥有相同的顶点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:25:57.010

而不是用四个点绘制 OpenGL 多边形，每个点都有纹理坐标

请尝试用更多的点来制作它，以便您可以控制纹理的哪一部分将被拉伸。参考您的图像，您可以在 OpenGL 中制作 9 个矩形，以避免拉伸边距。

# android - android - 如何在单选按钮旁边添加视图

> ID：11883594
> 
> 赞同：5
> 
> 时间：2012-08-09T12:35:05.253
> 
> 标签：android, radio-group

我想在单选组中的单选按钮旁边设置视图。我试过了，但我没有。请任何人都可以帮助我。

源代码

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#FFFFFF">    

    <RadioGroup
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:checkedButton="@+id/view_completehistroy_rb"
            android:id="@+id/timeframe_group">

           <!-- View complete history Radio Button -->
           <RadioButton
                android:text="Complete History"
                android:textSize="16sp"
                android:layout_marginLeft="5dp"
                android:id="@+id/view_completehistroy_rb"
                android:textColor="#000000"
                />

            <!-- View history using date range Radio Button -->
            <RadioButton
                android:text="From"
                android:textSize="16sp"
                android:layout_marginLeft="5dp"
                 android:textColor="#000000"
                android:id="@+id/view_daterange_history_rb"/>

        </RadioGroup>

    <RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
          <!--Layout for Time selection  -->
          <LinearLayout 
              android:layout_width="fill_parent"
              android:layout_height="wrap_content"
              android:orientation="horizontal"
              android:layout_marginLeft="5dp"
              android:layout_toRightOf="@id/view_daterange_history_rb">                      

               <TextView
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_marginLeft="5dip"
                 android:layout_marginRight="5dip"
                 android:text="test1" 
                  android:textColor="#000000"
                 android:textSize="16sp"/>  

                <TextView
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_marginLeft="5dip"
                 android:layout_marginRight="5dip"
                 android:text="test2" 
                  android:textColor="#000000"
                 android:textSize="16sp"/>                  
          </LinearLayout>
    </RelativeLayout>
</LinearLayout> 
```

![在此处输入图像描述](../Images/26e8a593ade1cede126181573fa2f201.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T12:59:55.113

那怎么办：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" 
android:background="#FFFFFF">    

    <RadioGroup
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:checkedButton="@+id/view_completehistroy_rb"
            android:id="@+id/timeframe_group">

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <RadioButton
                android:id="@+id/view_completehistroy_rb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:text="Complete History"
                android:textColor="#000000"
                android:textSize="16sp" />

            <RadioButton
                android:id="@+id/view_daterange_history_rb"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/view_completehistroy_rb"
                android:layout_marginLeft="5dp"
                android:text="From"
                android:textColor="#000000"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/view_daterange_history_rb"
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip"
                android:layout_toRightOf="@+id/view_daterange_history_rb"
                android:text="test1"
                android:textColor="#000000"
                android:textSize="16sp" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignBaseline="@+id/textView1"
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip"
                android:layout_toRightOf="@+id/textView1"
                android:text="test2"
                android:textColor="#000000"
                android:textSize="16sp" />

        </RelativeLayout>

        </RadioGroup>
</LinearLayout> 
```

在我的手机上看起来是这样的：

![在我的手机上看起来像这样](../Images/e7aa2917bd77472aa028349554994bc6.png)

---我的回答还有一些话---

好吧，我认为重点是对 LinearLayout 的误解。那个只支持将视图元素放在一行中。如果你想拥有彼此相关的视图元素，你需要相对布局。RelativeLayout 具有类似的属性

```
android:layout_below="@+id/XXXXX" 
```

这是对其他视图元素的相对位置的设置。所以使用这个你可以说一个元素（比如 TextView）应该在另一个视图的下方/上方/leftTo/rightTo 之下。这就是重点。我希望这使它更容易理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:04:50.477

干得好。它不是问题的答案。但它可以解决你的问题。您可以按如下方式设置单选按钮的文本...

```
RadioButton radBtn=(RadioButton)findViewById(R.id.view_daterange_history_rb);        
radBtn.setText("From 20/12/2000 to 21/12/2012"); 
```

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#FFFFFF"
android:orientation="vertical" >

<RadioGroup
    android:id="@+id/timeframe_group"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:checkedButton="@+id/view_completehistroy_rb"
    android:orientation="vertical" >

    <!-- View complete history Radio Button -->

    <RadioButton
        android:id="@+id/view_completehistroy_rb"
        android:layout_marginLeft="5dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Complete History"
        android:textColor="#000000"
        android:textSize="16sp" />

    <!-- View history using date range Radio Button -->

    <RadioButton
        android:id="@+id/view_daterange_history_rb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:text="From"
        android:textColor="#000000"
        android:textSize="16sp" />
</RadioGroup> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:12:07.510

您可以按照我所做的方式设计布局。这是示例布局部分：

```
 <RelativeLayout
            android:id="@+id/faxPannel"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+id/emailPannel" >

            <RadioButton
                android:id="@+id/radioButton"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_marginRight="10dp"
                android:layout_marginTop="30dp" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dip"
                android:layout_marginRight="5dip"
                android:layout_marginTop="10dp"
                android:layout_toRightOf="@+id/radioButton"
                android:layout_weight="1"
                android:singleLine="true"
                android:text="Label"
                android:textColor="@color/Black"
                android:textSize="16dp"
                android:textStyle="bold" />

        </RelativeLayout> 
```

并在活动中处理 oncheckChanged() 事件以执行相关功能。但是如果您将在布局中使用 RadioGroup，我认为您将无法实现您想要的。

注意：在上面我使用 TextView 的示例中，您可以使用任何您想要的视图。

# jquery - 模态中的多个动态表单但如何提交？

> ID：11883598
> 
> 赞同：1
> 
> 时间：2012-08-09T12:35:21.070
> 
> 标签：jquery, forms

我完全坚持这个。我真的不知道该怎么做，所以如果有人愿意帮助我，请举一些例子或指出一些非常有用的方向。

这是这种情况：

我有一个模态（eric martins simplemodal）窗口，其中生成了一些带有一些 JSON 详细信息的表单。这是通过以下代码完成的：

```
 $.each(data.product.variants, function(index, variant){     

          contentHtml = contentHtml +
            '<div id="form">' +
            '<form class="formProduct" id="formProduct'+variant.id+'" action="#" >' +
            '<div class="variants">' +
            '<div class="pop_variantTitle"><label><input type="hidden" id="variantId" name="'+ variant.id + '" value="' + variant.id + '" />' + variant.title + '</label></div>' +
            '<div class="pop_variantQuantity"><label">{{ 'Quantity' | t }}: <input type="text" name="quantity" id="formProductQuantity" value="1" /></label></div>' +
            '<div class="pop_variantAdd"><a class="button green submit" href="#"><span>{{ 'Add to cart' | t }}</span></a></div>' + //
            '</div>' +
            '</form>' +
            '</div>';
         });     
        $('.formProductContent').html(contentHtml);
      });         
    }})
  return false;
  })

  $().ready(function(){

var form = $('form').attr('id');

$(form).submit(function() { return false; });

$(".submit").live("click", function(){

var quantity = $("#formProductQuantity").val();
var variant = $("#variantId").val();

$(".submit").replaceWith("send...");

$.ajax({
type: 'POST',
url: '{{ 'cart/add/' }}'+variant+'/?quantity='+quantity+'',
data: $(form).serialize(), //"formProduct"
success: function(data) {
/*if(data == "true") {
$(form).fadeOut("fast", function(){
$(this).before("<p><strong>Success! Your feedback has been sent, thanks :)</strong></p>");
setTimeout("$.fancybox.close()", 1000);
});
}*/
 }
});
});
}); 
```

脚本本身运行良好。我知道要提交这些表单，我必须使用唯一的 ID 或唯一的提交按钮。我尝试了各种事情，但我只能提交第一个表格。任何人都可以帮助我提供一些指导或示例或一切可以帮助我的东西；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:51:30.177

改变

```
$(".submit").live("click", function(){
    //code
} 
```

和

```
$(".submit").each(function(){
    $(this).live("click", function(){
        //code
    }
}); 
```

.class 选择器返回所有类，但您需要处理它们。对于您的代码，它仅适用于找到的第一个 .class。

# c# - 使用来自服务器端变量的值在 mvc razor3 中注入 javascript

> ID：11883605
> 
> 赞同：4
> 
> 时间：2012-08-09T12:35:33.693
> 
> 标签：c#, asp.net-mvc

我需要在视图上调用一个 jquery 函数，使用服务器端变量，该变量在 viewbag 中设置，而不对变量值进行编码。

例如。：

```
ViewBag.innerTitle = "<div id='title45'>My Title</div>"; //C#

$(function(){ alert(ViewBag.Title) }); // Js can I Access it 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:39:39.937

就个人而言，对于那种类型的内容，我会将 html 写入页面，并且只使用 jQuery，即

```
alert($('#title45').text()); 
```

然后 js 是固定的，非常适合用于单独下载和缓存的静态 .js 文件。

如果一定要写动态js：

```
alert('@Html.Raw(HttpUtility.JavaScriptStringEncode(ViewBag.Title))'); 
```

但我会对单引号和双引号感到紧张。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:38:58.890

如果您使用剃须刀：

只需在您的js中：

```
<script>$(function(){ alert(' @Html.Raw(ViewBag.Title) ') });</script>

@Html.Raw : output the markup w/o encoding it. 
```

# algorithm - 分离出由 `(, ), ||, &&, |` 分隔的 unix 语句

> ID：11883606
> 
> 赞同：0
> 
> 时间：2012-08-09T12:35:37.447
> 
> 标签：algorithm, parsing, language-agnostic

我有一个包含多个 unix 语句的字符串，并与`(, ), ||, &&, |`. 我想按照它们在 unix 命令行中评估的顺序将它们分成数组（嵌套？）。我最好希望它们使用前缀表示法，但任何事情都可以。

像

```
a --foo "b|a||r" && a -b || (a || a) | c | d 
```

应该成为

```
["|", ["|", ["||", ["&&", "a --foo \"b|a||r\"", "a -b"], ["||", "a", "a"]], "c"], "d"] 
```

（真的很想举一个涉及所有可能性的例子。

我应该如何处理这个？

我可以理解大多数流行的高级 (OOP) 语言（ruby、python 等）的代码，甚至伪代码也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:40:54.560

如果您考虑一下，该任务与解析数学表达式没有什么不同，例如`a * (b + c) / d`==> `[/, [*, a, [+, b, c]], d]`。因此，您可以使用相同的工具：

你需要的是一个中**缀解析器**。

（中*缀*，因为您的运算符在操作数*之间*：例如`a && b`）

浏览[Wikipedia 文章](http://en.wikipedia.org/wiki/Operator-precedence_parser)以了解一些理论背景，然后为您想要使用的语言获取现有解析器并定义运算符及其优先级。

# python - Django - 在 latin1 中发布数据，解码为 utf-8

> ID：11883610
> 
> 赞同：1
> 
> 时间：2012-08-09T12:35:45.110
> 
> 标签：python, mysql, django, utf-8, character-encoding

使用 mysql（不是我的选择），一切都设置为`utf8`, `utf8_general_ci`。在正常情况下`utf8`，一切都是快乐的。

但是，如果我 POST sth like `É’s`, some`latin1`并照常将其保存到数据库中，则无法调用`.decode('utf-8')`生成的模型字段：

```
>>> myinstance.myfield.decode('utf-8')
...

UnicodeEncodeError: 'ascii' codec can't encode character u'\xc9' in position 7: ordinal not in range(128) 
```

我想清理所有传入的数据，以便可以将其解码为`utf8`.

尝试这样的方法[只会](https://groups.google.com/forum/?fromgroups#!topic/django-users/UjSfCWj1s2s%5B1-25%5D)导致`UnicodeEncodeError`前期。

编辑：正如丹尼尔的回答所暗示的，这个问题来自误解。`latin1`不是这里的罪魁祸首。`.decode('utf-8')`尝试编码为 ASCII，因此，对于像`u'팩맨'.decode('utf-8')`. 离开这个问题让我很痛苦，因为我知道我现在所知道的。但是，也许它会帮助某人。我认为，由于数据实际上是以 unicode 形式返回的，所以我们试图做的实际上相当于`u'É’'.decode('utf-8')`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:17:39.500

Django 字段始终是 unicode。尝试调用`decode`它们意味着 Python 将首先尝试*编码*为 ASCII，然后再尝试解码为 UTF-8。这显然不是你想要的。我希望你实际上只是想做`myinstance.myfield.encode('utf-8')`。

# dll - C#.NET MSI 快捷方式启动... NUnit？

> ID：11883612
> 
> 赞同：1
> 
> 时间：2012-08-09T12:35:45.927
> 
> 标签：dll, build, permissions, windows-installer, shortcut

我有一台构建机器，它会定期为我的软件应用程序构建 MSI 安装程序。我的软件应用程序由许多 dll 组成，其中一个用于测试。通常，该进程没有问题 - 我可以创建一个运行主进程的 MSI，其中包括所有引用的 dll 等。

然而，上周，从构建创建的 MSI 在安装时出现了一些奇怪的行为。即，创建的快捷方式在指向正确的安装目录时，会启动加载了我的测试 dll 的 NUnit，而不是主进程。在随后的构建中，生成的 MSI 没有这个问题；当我比较两个构建的源代码基线时，我发现差异很小。

我注意到两个 MSI 之间只有区别：

1.  实际工作的那个有可用的“兼容性”选项卡，而启动 NUnit 的那个没有。

2.  不起作用的那个在安全设置下列出了“交互式”组。

注意：我在 Windows 7 上运行。

* * *

关于可能导致这种行为的任何想法？由于软件基线没有显着差异，我担心构建机器必须在构建之间以某种方式进行了更改，但是这种情况会以什么方式发生，这样问题就会像这样表现出来？

# jquery - 使用控制器创建一个 jQuery 全角滑块

> ID：11883615
> 
> 赞同：1
> 
> 时间：2012-08-09T12:35:49.557
> 
> 标签：jquery, slider

我正在寻找一种创建全角滑块的方法，如下所示：www.browar-olbracht.pl - 标题中的滑块。这个来自免费的 joomla 模板。(mod_slider)。我有兴趣创建这样的东西，但在没有 joomla/wordpress 等的个人项目中。没有 cms。我发现了很多滑块，但都是全角的，并且带有上一页中的控制器。我是 jQuery 的初学者，所以我的问题是 - 是否有一个已经准备好的脚本，或者有经验的用户可以告诉我如何创建类似的东西或只是转换现有的？

P。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:05:40.417

该滑块不响应浏览器屏幕尺寸。如果您要模仿它，您的一些重要的滑块控件将被从页面上切掉并且不会再次出现，直到屏幕足够宽以显示它们。

这里有 3 个滑块，可让您通过对其 CSS 文件稍作调整来制作全宽幻灯片。

简易滑块 [http://cssglobe.com/easy-slider-17-numeric-navigation-jquery-slider/](http://cssglobe.com/easy-slider-17-numeric-navigation-jquery-slider/)

PlusSlider [http://css-plus.com/examples/plugins/PlusSlider/](http://css-plus.com/examples/plugins/PlusSlider/)

响应幻灯片.js [http://responsive-slides.viljamis.com/](http://responsive-slides.viljamis.com/)

# arrays - 如何将字符串转换为 BASH 数组？

> ID：11883616
> 
> 赞同：2
> 
> 时间：2012-08-09T12:35:51.203
> 
> 标签：arrays, bash

给定以下由[jsawk](https://github.com/micha/jsawk)生成的字符串：

```
[123,456,789] 
```

有没有一种惯用的方式将其转换为 BASH 中的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T12:54:50.173

去掉括号，然后用`IFS`逗号分隔，然后用`read`.

```
foo="[123,456,789]"
IFS=, read -a list <<< "${foo:1:-1}" 
```

这可以容纳任何逗号分隔的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:39:00.463

您只需将标点符号转换为空格。

```
string='[123,456,789]'
array=(${string//[^0-9]/ }) 
```

# c++ - C++ 多重运算符=()

> ID：11883617
> 
> 赞同：3
> 
> 时间：2012-08-09T12:35:54.577
> 
> 标签：c++, operators, implicit-conversion, conversion-operator, explicit-conversion

我正在写一个字符串类。我希望能够分配我的字符串，例如；

```
a = "foo";
printf(a);
a = "123";
printf(a);
int n = a; // notice str -> int conversion
a = 456; // notice int -> str conversion
printf(a); 
```

我已经为字符串到整数转换分配了我的 operator=() 方法。如何声明另一个 operator=() 以便我可以执行反向方法？

当我声明另一个时，它似乎覆盖了以前的。

```
String::operator const char *() {
    return cpStringBuffer;
}
String::operator const int() {
    return atoi(cpStringBuffer);
}
void String::operator=(const char* s) {
    ResizeBuffer(strlen(s));
    strcpy(cpStringBuffer, s);
}
bool String::operator==(const char* s) {
    return (strcmp(cpStringBuffer, s) != 0);
}

//void String::operator=(int n) {
//  char _cBuffer[33];
//  char* s = itoa(n, _cBuffer, 10);
//  ResizeBuffer(strlen(_cBuffer));
//  strcpy(cpStringBuffer, _cBuffer);
//} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:38:28.387

**单参数构造函数**可以充当 int->String 转换，而所谓的**转换运算符**执行相反的 int->String

```
class String
{
public:
    String(int)            {} // initialization of String with int
    String& operator=(int) {} // assignment of int to String

    operator int() const {} // String to int
}; 
```

但是请注意，这些转换将隐式发生，您很容易被咬。假设您将扩展此类以接受`std::string`参数和转换

```
class String
{
public:
    String(int)          {} // int to String
    String(std::string)  {} // std::string to String

    // plus two assignment operators 

    operator int() const       {} // String to int
    operator std::string const {} // String to std::string
}; 
```

你会有这两个函数重载

```
void fun(int)         { // bla }
void fun(std::string) { // bla } 
```

现在试着打电话`fun(String())`。你会得到一个编译错误，因为有多个 - 同等可行 - 隐式转换。这就是为什么 C++98 允许在`explicit`单参数构造函数前面使用关键字，而 C++11 将其扩展到`explicit`转换运算符。

所以你会写：

```
class String
{
public:
    explicit String(int)          {} // int to String
    explicit operator int() const {} // String to int 
}; 
```

隐式转换可能合法的一个示例是智能指针类想要转换为`bool`或（如果它们是模板化的）从`smart_pointer<Derived>`to `smart_pointer<Base>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T12:42:36.693

您可能需要转换运算符而不是赋值运算符 - 您无法为`int`. 在你的`String`课堂上，你可能会写：

```
class String
{
    //  ...
public:
    String( int i );           //  Converting constructor: int->String
    operator int() const;      //  conversion operator: String->int
    //  ...
}; 
```

除了第一个之外，您还可以添加赋值运算符，但它们通常不是必需的，除非出于优化原因。

最后，我想你会发现这是个坏主意。如果目标是混淆，那很好，但除此之外，隐式转换往往会降低代码的可读性，并且应该避免，除非在明显的情况下（例如，一个`Complex`类应该有一个转换构造函数 from `double`）。此外，过多的隐式转换会导致重载决策的歧义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:37:52.590

要将您的课程转换为您需要的其他课程`conversion operator`。像这样的东西：

```
struct Foo
{
    operator int() const //Foo to int 
    {
        return 10;
    }

    operator=(int val) //assign int to Foo
    {

    }

    operator=(const std::string &s) //assign std::string to Foo
    {

    }
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:38:34.367

要启用`int n = a`（其中 a 是字符串类的对象），您需要一个转换运算符。

```
class string {
  public:
    operator int() const { return 23; }
}; 
```

要启用到您的类型的转换，您需要一个转换赋值和可能的转换构造函数。

```
class string {
  public:
    string(int i);
    string& operator=(int i);
}; 
```

您还需要对`const char*`,`char*`等进行重载。

# c# - 如何在listview的侧面布局模板中找到css类并将其赋予控件？

> ID：11883618
> 
> 赞同：0
> 
> 时间：2012-08-09T12:35:55.073
> 
> 标签：c#, asp.net, listview

我有一个列表视图控件，在布局模板中，我有链接按钮。现在我想做什么。我每个链接按钮都有一个跨度。当我们点击链接按钮时，我想给 css 课。我的html代码如下：

```
<asp:ListView ID="lst_CallType" runat="server" ItemPlaceholderID="tr" OnItemDataBound="lst_CallType_ItemDataBound">
                            <LayoutTemplate>
                                <table cellspacing="0">
                                    <tr class="hdrRowColor1">
                                        <td align="left" width="500px">
                                            <asp:LinkButton ID="lnk_Name" runat="server" ValidationGroup="vgSearch" OnClientClick="changeSortState();"
                                                CommandArgument="tblCallTypenew.CallType" OnClick="lnk_Sort">Name</asp:LinkButton>
                                            <span id="imgSortPosition" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" width="80px">
                                            <asp:LinkButton ID="lnk_Status" runat="server" CommandArgument="tblCallTypenew.isactive"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Status</asp:LinkButton>
                                                <span id="Span1" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" width="200px">
                                            <asp:LinkButton ID="lnk_CreatedOn" runat="server" CommandArgument="tblCallTypenew.CreatedDate"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Created On</asp:LinkButton>
                                                <span id="Span2" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" width="200px">
                                            <asp:LinkButton ID="lnk_LastModfiedOn" runat="server" CommandArgument="tblCallTypenew.ModifiedDate"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Last Modified On</asp:LinkButton>
                                                <span id="Span3" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" width="200px">
                                            <asp:LinkButton ID="lnk_CreatedBy" runat="server" CommandArgument="tblUserNew.FirstName"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Created By</asp:LinkButton>
                                                <span id="Span4" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" width="200px">
                                            <%--<asp:LinkButton ID="lnkCreatedDate" runat="server" CommandArgument="tblUserActivities.CreatedDate"
                                        OnClick="lnk_Sort">Created Date</asp:LinkButton>--%>
                                            <asp:LinkButton ID="lnk_LastModfiedBy" runat="server" CommandArgument="v.FirstName"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Modified By</asp:LinkButton>
                                                <span id="Span5" class="sortNotSelected"></span>
                                        </td>
                                        <td align="left" style="border-right: 1px solid #6398cc">
                                            Activity
                                            <div style="width: 50px; float: right;">
                                            </div>
                                        </td>
                                    </tr>
                                    <tr id="tr" runat="server">
                                    </tr>
                                </table>
                            </LayoutTemplate>
                            <ItemTemplate>
                                <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "EvenRowColor" : "OddRowColor" %>'>
                                    <td align="left">
                                        <asp:Label ID="lblDeptId" runat="server" Text='<%# Eval("ID")%>' Visible="false"></asp:Label>
                                        <%# Eval("Calltype")%>
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="lbl_Status" runat="server" Style="display: none;" Text='<%# Eval("IsActive")%>'></asp:Label>
                                        <asp:ImageButton ID="imgbtnStatus" runat="server" CommandArgument='<%# Eval("id") %>'
                                            OnClick="imgbtnStatus_Onclick" />
                                    </td>
                                    <td align="left">
                                        <%# Eval("CreatedDate")%>
                                    </td>
                                    <td align="left">
                                        <%# Eval("ModifiedDate") %>
                                    </td>
                                    <td align="left">
                                        <%# Eval("CreatedBy")%>
                                    </td>
                                    <td align="left">
                                        <%# Eval("ModifiedBy")%>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblCallType" runat="server" Style="display: none;" Text='<%# Eval("Calltype")%>'></asp:Label>
                                        <asp:ImageButton ID="imgbtnEdit" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/edit.png"
                                            ToolTip="Edit Details" CommandArgument='<%# Eval("ID") %>' OnClick="imgbtnEdit_OnClick" />
                                        <asp:ImageButton ID="imgbtnDelete" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/delete.png"
                                            ToolTip="Delete" Style="display: none;" CommandArgument='<%# Eval("id") %>' OnClientClick="return confirm('Are you sure you want to delete the Call type?');"
                                            OnClick="imgbtnDelete_OnClick" />
                                    </td>
                                </tr>
                            </ItemTemplate>
                        </asp:ListView> 
```

实际上，我想在用户单击链接按钮时显示排序图像。我想通过后面的代码来完成。我的 .cs 代码如下：

```
 protected void lnk_Sort(object sender, EventArgs e)
{
    LinkButton lnk = (LinkButton)sender;
    string arg = lnk.CommandArgument.ToString();
    ViewState["sortCol"] = arg;
    GetSortDirection();
    BindData(ViewState["sortCol"].ToString(), ViewState["sortDir"].ToString(), Convert.ToInt32(ViewState["nmbr"]), Pager.PageSize);
}

private void GetSortDirection()
{
    if (Convert.ToString(ViewState["sortDir"]) == "Desc")
    {
        ViewState["sortDir"] = "asc";

    }
    else
    {
        ViewState["sortDir"] = "Desc";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:41:04.357

[您可以在Listview_sorting](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listview.sorting%28v=vs.90%29.aspx)事件中执行 findcontrol

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T13:01:52.163

我做了一个愚蠢的把戏

我的html代码是：

```
<asp:ListView ID="lst_CallType" runat="server" ItemPlaceholderID="tr" OnItemDataBound="lst_CallType_ItemDataBound">
                            <LayoutTemplate>
                                <table cellspacing="0">
                                    <tr class="hdrRowColor1">
                                        <td width="35px" align="left">
                                            &nbsp;S.No
                                        </td>
                                        <td align="left" width="300px">
                                            <asp:LinkButton ID="lnk_Name" runat="server" ValidationGroup="vgSearch" CommandArgument="tblCallTypenew.CallType"
                                                OnClick="lnk_Sort">Name</asp:LinkButton>
                                            <asp:Image ID="img_lnk_Name" Visible="false" runat="server" />
                                        </td>
                                        <td align="left" width="150px">
                                            <asp:LinkButton ID="lnk_CreatedBy" runat="server" CommandArgument="tblUserNew.FirstName"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Created By</asp:LinkButton>
                                            <asp:Image ID="img_lnk_CreatedBy" Visible="false" runat="server" />
                                        </td>
                                        <td align="left" width="120px">
                                            <asp:LinkButton ID="lnk_CreatedOn" runat="server" CommandArgument="tblCallTypenew.CreatedDate"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Created On</asp:LinkButton>
                                            <asp:Image ID="img_lnk_CreatedOn" Visible="false" runat="server" />
                                        </td>
                                        <td align="left" width="150px">
                                            <%--<asp:LinkButton ID="lnkCreatedDate" runat="server" CommandArgument="tblUserActivities.CreatedDate"
                                        OnClick="lnk_Sort">Created Date</asp:LinkButton>--%>
                                            <asp:LinkButton ID="lnk_LastModfiedBy" runat="server" CommandArgument="v.FirstName"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Last Modified By</asp:LinkButton>
                                            <asp:Image ID="img_lnk_LastModfiedBy" Visible="false" runat="server" />
                                        </td>
                                        <td align="left" width="120px">
                                            <asp:LinkButton ID="lnk_LastModfiedOn" runat="server" CommandArgument="tblCallTypenew.ModifiedDate"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Last Modified On</asp:LinkButton>
                                            <asp:Image ID="img_lnk_LastModfiedOn" Visible="false" runat="server" />
                                        </td>
                                        <td align="center" width="55px">
                                            <asp:LinkButton ID="lnk_Status" runat="server" CommandArgument="tblCallTypenew.isactive"
                                                ValidationGroup="vgSearch" OnClick="lnk_Sort">Status</asp:LinkButton>
                                            <asp:Image ID="img_lnk_Status" Visible="false" runat="server" />
                                        </td>
                                        <td align="center" width="50px" style="border-right: 1px solid #6398cc">
                                            Activity
                                            <%-- <div style="width: 50px; float: right;">
                                            </div>--%>
                                        </td>
                                    </tr>
                                    <tr id="tr" runat="server">
                                    </tr>
                                </table>
                            </LayoutTemplate>
                            <ItemTemplate>
                                <tr class='<%# Convert.ToBoolean(Container.DataItemIndex % 2) ? "EvenRowColor" : "OddRowColor" %>'>
                                    <td align="left" valign="middle">
                                        &nbsp;<%# Container.DataItemIndex+1 %>.
                                    </td>
                                    <td align="left">
                                        <asp:Label ID="lblDeptId" runat="server" Text='<%# Eval("ID")%>' Visible="false"></asp:Label>
                                        <%# Eval("Calltype")%>
                                    </td>
                                    <td align="left">
                                        <%# Eval("CreatedBy")%>
                                    </td>
                                    <td align="left">
                                        <%# Convert.ToDateTime(Eval("CreatedDate")).ToString("MMM dd, yyyy")%>
                                    </td>
                                    <td align="left">
                                        <%# Eval("ModifiedBy")%>
                                    </td>
                                    <td align="left">
                                        <%# Convert.ToDateTime(Eval("ModifiedDate")).ToString("MMM dd, yyyy")%>
                                    </td>
                                    <td align="center">
                                        <asp:Label ID="lbl_Status" runat="server" Style="display: none;" Text='<%# Eval("IsActive")%>'></asp:Label>
                                        <asp:ImageButton ID="imgbtnStatus" runat="server" CommandArgument='<%# Eval("id") %>'
                                            OnClick="imgbtnStatus_Onclick" />
                                    </td>
                                    <td class="last" align="center">
                                        <asp:Label ID="lblCallType" runat="server" Style="display: none;" Text='<%# Eval("Calltype")%>'></asp:Label>
                                        <asp:ImageButton ID="imgbtnEdit" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/edit.png"
                                            ToolTip="Edit Details" CommandArgument='<%# Eval("ID") %>' OnClick="imgbtnEdit_OnClick" />
                                        <asp:ImageButton ID="imgbtnDelete" runat="server" ImageUrl="~/App_Themes/ThemeNew/Images/delete.png"
                                            ToolTip="Delete" Style="display: none;" CommandArgument='<%# Eval("id") %>' OnClientClick="return confirm('Are you sure you want to delete the Call type?');"
                                            OnClick="imgbtnDelete_OnClick" />
                                    </td>
                                </tr>
                            </ItemTemplate>
                        </asp:ListView> 
```

我的代码背后的代码是：

```
 protected void lnk_Sort(object sender, EventArgs e)
{
    LinkButton lnk = (LinkButton)sender;
    string arg = lnk.CommandArgument.ToString();
    ViewState["sortCol"] = arg;
    GetSortDirection();
    BindData(ViewState["sortCol"].ToString(), ViewState["sortDir"].ToString(), Convert.ToInt32(ViewState["nmbr"]), Pager.PageSize);
    string name = lnk.ID;
    Image img = (Image)(lst_CallType.FindControl("img_" + name));
    if (img != null)
    {
        SetSortOrderImage(img, ViewState["sortDir"].ToString());
    }
}

private void SetSortOrderImage(Image image, String sortorder)
{
    if (sortorder == "asc")
    {
        image.Visible = true;
        image.ImageUrl = "../App_Themes/ThemeNew2/images/up.png";
    }
    else if (sortorder == "Desc")
    {
        image.Visible = true;
        image.ImageUrl = "../App_Themes/ThemeNew2/images/down.png";

    }
} 
```

# javascript - 用 jQuery 做数学

> ID：11883619
> 
> 赞同：0
> 
> 时间：2012-08-09T12:35:59.993
> 
> 标签：javascript, jquery, math

```
var num1 = $("input[id='weight']").val(),
    num2 = $("input[id='height']").val(),
    result = num1 / (num2*num2);

$("#submit").click(function() {
    $(".result").text(result);
}); 
```

它只是显示`NaN`结果应该在哪里。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:48:40.007

您应该在单击事件中获取值，而不是在页面加载时：

```
$("#submit").click(function() {
  var num1 = $("input[id='weight']").val(),
    num2 = $("input[id='height']").val(),
    result = num1 / (num2*num2);
  $(".result").text(result);
}); 
```

还有一些其他原因可能导致您`NaN`的结果：

*   高度字段计算为零。（尽管这通常会给出结果`Infinity`而不是`NaN`。）

*   某些字段包含无法转换为数字的内容。

*   您在代码中使用了错误的名称，因此您实际上并没有从字段中获取值。

*   您正在使用带有错误小数分隔符的浮点数，例如`0.5`当浏览器期望时`0,5`，反之亦然。

一些注意事项：

*   在进行计算之前，最好使用`parseInt`or （任何合适的）解析字符串。`parseFloat`

*   考虑使用类似的选择器`input#weight`是否`#weight`可行。如果页面中有多个具有相同 id 的元素，则只需要使用选择器`input[id='weight']`，不建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:38:19.267

```
$(function(){
    $("#submit").click(function() {
        var num1   = $("#weight").val(), 
            num2   = $("#height").val(), 
            result = num1 / (num2 * num2);
        $(".result").text(result);
    }); 
}); 
```

小解释：

问题不在于 parseInt 在这里。恕我直言，问题是在数学的那一刻，两个变量是空的或者不是数字......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:41:25.560

尝试这个

```
var num1 = parseInt($("input[id='weight']").val());
num2 = parseInt($("input[id='height']").val());
result = num1 / (num2*num2);

$("#submit").click(function() {
$(".result").text(result);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T12:38:29.463

将它们转换为整数（假设您使用的是整数）：

```
var num1 = parseInt($("#weight").val(), 10),
    num2 = parseInt($("#height").val(), 10),
    result = num1 / (num2*num2); 
```

# javascript - Ember.js 路由器和动态段

> ID：11883622
> 
> 赞同：2
> 
> 时间：2012-08-09T12:36:35.923
> 
> 标签：javascript, ember.js, ember-old-router

我一直在使用带有单个动态段[的 Ember 路由器](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/router.js)(v1.0.pre)，并且对它非常满意。
这么多*魔法*。

但是，我正在为多个动态细分而苦苦挣扎：

*   应该`serialize()`/`deserialize()`返回什么？
*   `transitionTo()`那里的电话和上下文应该如何？

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:49:38.883

*   `serialize`并且`deserialize`只应在您的上下文对象具有自定义序列化*（即不是 ember-data 模型实例）*时实现。因此，您不必在使用完整的 ember 堆栈时实现这些方法。

*   `transitionTo`应该从路由事件处理程序中调用，并且上下文传递如下：

```
showPost: function (router, event) {
  var post = event.context;
  router.transitionTo('posts.show', post);
} 
```

鉴于该`showPost`事件已由`action`这样的助手触发：

```
{{#each post in controller}}
  <a {{action showPost post}}>Show post {{post.title}}</a>
{{/each}} 
```

通过几个上下文对象（对于深度嵌套的路由）可以实现更复杂的转换：

```
router.transitionTo('posts.member.comments.show', post, comment); 
```

`post`&`comment`上下文将传递给适当的路由，而路由将下降到嵌套路由。

* * *

**编辑**

如果没有 ember-data，它看起来像：

```
posts: Ember.Route.extend({
  route: 'posts',

  member: Ember.Route.extend({
    route: '/:post_id',

    show: Ember.Route.extend({
      route: '/'
    }),

    comments: Ember.Route.extend({
      route: 'comments',

      show: Ember.Route.extend({
        route: '/:comment_id'
      })
    })
  })
}) 
```

您将有两个类`App.Post`& `App.Comment`，具有`find`类方法和`id`实例属性。

```
App.Post = Ember.Object.extend({
  id: null
});
App.Post.reopenClass({
  find: function (id) {
    // retrieve data, instanciate & return a new Post
  }
});

App.Comment = Ember.Object.extend({
  id: null
});
App.Comment.reopenClass({
  find: function (id) {
    // retrieve data, instanciate & return a new Comment
  }
}); 
```

# sql-server - 使用存储过程将 SQL 转换为 XML

> ID：11883624
> 
> 赞同：1
> 
> 时间：2012-08-09T12:36:42.140
> 
> 标签：sql-server, xml, stored-procedures

我目前正在构建一个任务计划程序，将各种类型的数据报告通过电子邮件发送给收件人。

我已经开始在 SQL Server 中构建一个存储过程来输出数据，但我意识到每种不同的报表类型都会返回完全不同的数据集。我解决这个问题的想法是以 XML 格式输出数据，消除返回不同数据类型的问题。

我会继续这样做，但我在不同的地方读到这个解决方案在可维护性方面不好。

最简单的方法是为每种报告类型使用不同的存储过程，大约有 12 个，这可能非常耗时（特别是因为我对存储过程比较陌生）。

问题是，遵循 XML 输出方法是否可行，或者是否有更简单、更优雅的方法？

提前致谢。

**编辑：**问题源于存储过程将由实体框架处理，我猜如果它有多种返回类型，它不知道如何将它转换为类/对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:53:18.490

您是否熟悉[https://www.google.co.uk/search?q=SQL+for+xml](https://www.google.co.uk/search?q=SQL+for+xml)
虽然我不确定您是否需要首先将输出转换为 XML，但编写良好的报告工具可以轻松过程变量输出格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:46:01.600

为什么不直接在 SSRS 中构建报告，然后通过电子邮件发送结果呢？这样你就可以在下周末完成

# apache-flex - 如何在 flex 动作脚本中动态实现代理模式？

> ID：11883630
> 
> 赞同：0
> 
> 时间：2012-08-09T12:37:12.620
> 
> 标签：apache-flex, actionscript, proxy-pattern

我需要为 flex 动作脚本实现代理模式。源对象包含 40-50 个方法，并且可能会不断增加，所以我希望我可以避免在源对象中实现单独的方法。

我记得在java中，我可以使用反射来集中所有代理调用，Flex Action Script中是否有类似的机制？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:05:14.057

我不确定您到底想要完成什么，但是[AS3Commons](http://www.as3commons.org)提供了一个方便的 AVM 字节码库，它允许在运行时创建类。[有如何生成动态代理的示例](http://www.as3commons.org/as3-commons-bytecode/proxy.html)。

# algorithm - 找到在 O(n) 时间 O(1) 空间中不重复的数字

> ID：11883633
> 
> 赞同：5
> 
> 时间：2012-08-09T12:37:36.577
> 
> 标签：algorithm

对于初学者，我确实看过这些问题：

[给定一个整数数组，其中一些数字重复 1 次，一些数字重复 2 次，只有一个数字重复 3 次，你如何找到重复 3 次的数字](https://stackoverflow.com/questions/2497470/given-an-array-of-integers-where-some-numbers-repeat-1-time-some-numbers-repeat)

[在数组中查找两个重复数字的算法，无需排序](https://stackoverflow.com/questions/555744/algorithm-to-find-two-repeated-numbers-in-an-array-without-sorting)

这个不同：

给定一个具有一个唯一数字的未排序整数数组，其余数字重复 3 次，即：

```
 {4,5,3,  5,3,4, 1, 4,3,5 } 
```

我们需要在 O(n) 时间和 O(1) 空间中找到这个唯一的数字

注意：这不是作业，只是我遇到的一个很好的问题

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T12:55:58.647

这个如何：

想法：做按位加法 mod 3

```
#include <stdio.h>

int main() {
    int a[] = { 1, 9, 9, 556, 556, 9, 556, 87878, 87878, 87878 };
    int n = sizeof(a) / sizeof(int);
    int low = 0, up = 0;

    for(int i = 0; i < n; i++) {
        int x = ~(up & a[i]);
        up &= x;
        x &= a[i];
        up |= (x & low);
        low ^= x;
    }
    printf("single no: %d\n", low);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T08:57:38.247

此解决方案适用于所有输入。想法是从数组中提取整数的位并添加到相应的 32 位位图“b”（实现为 32 字节数组以表示 32 位编号。）

```
unsigned int a[7] = {5,5,4,10,4,9,9};
unsigned int b[32] = {0};  //Start with zeros for a 32bit no.
main1() {
    int i, j;
    unsigned int bit, sum =0 ;
    for (i=0;i<7; i++) {
        for (j=0; j<32; j++) { //This loop can be optimized!!!!
            bit = ((a[i] & (0x01<<j))>>j); //extract the bit and move to right place
            b[j] += bit; //add to the bitmap array
        }
    }
    for (j=0; j<32; j++) {
        b[j] %= 2;     //No. repeating exactly 2 times.
        if (b[j] == 1) {
            sum += (unsigned int) pow(2, j); //sum all the digits left as 1 to get no
            //printf("no. is %d", sum);
        }
    }
    printf("no. is %d", sum);
} 
```

# python - 向python字典分配和更新值时总是出现MemoryError

> ID：11883634
> 
> 赞同：1
> 
> 时间：2012-08-09T12:37:38.667
> 
> 标签：python, dictionary, error-handling

我需要使用一种复杂的 dict 并动态更改某些键的值。所以我尝试了以下方式，但遇到了大约 32GB RAM 的 MemoryError 。sys.getsizeof(d) 返回 393356，sys.getsizeof(d.items()) 是 50336。我是否以错误的方式使用了 python dict？谁能帮我 ！？

```
d=nltk.defaultdict(lambda:nltk.defaultdict(float))
for myarticlewords in mywords:
    for i in myarticlewords:
        for j in myarticlewords:
            d[i][j]+=1.0 
```

回溯在“d[i][j]+=1.0”处停止

当我尝试：

```
dd=dict( (i,d[i].items() ) for i in d.keys() )

Traceback (most recent call last):
    File "<pyshell#34>", line 1, in <module>
    dd=dict( (i,d[i].items() ) for i in d.keys() )
   File "<pyshell#34>", line 1, in <genexpr>
   dd=dict( (i,d[i].items() ) for i in d.keys() )
MemoryError 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:14:03.700

您似乎使用的是 32 位版本的 python。如果您正在运行 Windows，您可能已经达到了32 位程序的[Windows 内存限制，即 2GB。](https://stackoverflow.com/a/5537759/577088)

这与我根据一些有根据的猜测计算出的数字一致。首先，一些重要的事实：`getsizeof`只返回*dict 本身*的大小，而不是存储在其中的东西的大小。这适用于所有“容器”类型。此外，在添加了这么多项目之后，字典会以交错的方式增加它们的大小。

现在，当我存储一个包含大约 5500 到 21000 个项目的字典时，`getsizeof`返回 `786712`- 即`393356 * 2`. 我的 Python 版本是 64 位，因此这强烈建议我使用 32 位版本的 Python 存储 5500 到 21000 个项目。您正在使用`nltk`，这表明您在此处存储单词图。这意味着您至少有大约 5500 个单词。您正在为这些单词中的每一个存储第二个字典，这也是一个包含 5500 项的字典。所以你真正拥有的是`393356 + 393356 * 5500`字节，加上`5500 * 20`用于字存储的最少字节。总结一下：

```
>>> (393356 + 393356 * 5500 + 5500 * 20) / 1000000000.0
2.163961356 
```

您正在尝试存储至少 2GB 的数据。所以简而言之，如果你想利用这 32 GB 的内存，你应该升级到 64 位版本的 Python。

* * *

我要补充一点，如果您担心性能，您可能只想使用`pickle`(or `cPickle`) 而不是`shelve`存储字典。`shelve`可能会更慢，即使你设置`writeback=True`.

```
>>> shelve_d = shelve.open('data', writeback=True)
>>> normal_d = {}
>>> def fill(d):
...    for i in xrange(100000):
...        d[str(i)] = i
...        
>>> %timeit fill(shelve_d)
1 loops, best of 3: 2.6 s per loop
>>> %timeit fill(normal_d)
10 loops, best of 3: 35.4 ms per loop 
```

自然地，保存字典`pickle`也需要一些时间，但至少它不会减慢计算本身的速度。

# java - FTP进度条上传文件

> ID：11883636
> 
> 赞同：1
> 
> 时间：2012-08-09T12:37:45.703
> 
> 标签：java, android, ftp, progress-bar

大家好，我正在使用 apache.commons.net 将我的文件从 sd 卡上传到由文件 zilla 创建的 ftp 服务器。但是，我要做的就是向用户展示进度。请你帮助我好吗？这是我的代码：

[http://pastie.org/4433482](http://pastie.org/4433482)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T07:33:29.187

如果你还没有解决你的问题。我认为问题出在这一行 publishProgress

`((int) ((totalBytesTransferred/file.length())*100))`

试试这个

```
publishProgress((int) ((totalBytesTransferred * 100)/file.length())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:56:20.097

这条线有问题：

```
publishProgress((int) ((totalBytesTransferred/file.length())*100)); 
```

由于 totalBytesTransferred 是 long 且 File.length() 返回 long，因此将执行整数除法。所以这一行将返回零，直到 totalBytesTransferred 等于 file.length()。然后它将返回 100。

您可以在除以之前将 totalBytesTransferred 转换为 double 以获得百分比：

```
publishProgress((int) (((double)totalBytesTransferred/file.length())*100)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:11:05.723

在您粘贴的第 322 行。

```
org.apache.commons.net.io.Util.copyStream(stO, stD, ftpClient.getBufferSize(),
      CopyStreamEvent.UNKNOWN_STREAM_SIZE,
      new CopyStreamAdapter() {
          public void bytesTransferred(
                   long totalBytesTransferred,
                   int bytesTransferred,
                   long streamSize) {
                      // Your progress Control code here
                      Log.d("CopyStreamAdapter", "bytesTransferred(...) - " +
                            totalBytesTransferred + "; " +
                            bytesTransferred + "; " + 
                            streamSize);
                      publishProgress((int) ((totalBytesTransferred/file.length())*100));
                   }
           }
      ); 
```

我怀疑这是它失败的地方！如果你没有得到任何带有字符串“ *CopyStreamAdapter* ”的logcat，这意味着你的处理程序没有被解雇！

# esxi - 从 ESXi 4.x 升级到 5.0

> ID：11883650
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:38:20.640
> 
> 标签：esxi

我找不到任何关于从 ESXi 4.x 升级到 ESXi 5.0 的清晰描述。（我可以找到有关 vSphere 升级的文档，但我不需要它们。）有人知道有关 ESXi 更新的好文档吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:40:17.510

只需从 ESXi 5 安装 CD 启动，并确保在安装期间选择保留现有数据存储的选项（并确保您有一组良好的备份！）

# c++ - 如何使用 Autoconf 通过“./configure”设置定义

> ID：11883651
> 
> 赞同：16
> 
> 时间：2012-08-09T12:38:23.727
> 
> 标签：c++, autotools, configure, autoconf, automake

我有一个项目可以基于一个定义生成两个不同的应用程序。

```
libfoo_la_CXXFLAGS = -DMYDEFINE 
```

我必须修改 Makefile.am 来设置这个定义，所以它不是自动的。

我可以通过配置命令以某种方式设置这个定义吗？有没有其他方法可以使用自动工具设置一个定义？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T12:55:56.227

您必须编辑文件`configure.ac`，并在之前`AC_OUTPUT`（这是文件中的最后一件事）添加对[`AC_DEFINE`](https://www.gnu.org/software/autoconf/manual/autoconf-2.70/html_node/Defining-Symbols.html).

在像你这样的简单情况下，它应该足够了：

```
AC_DEFINE(MYDEFINE) 
```

如果要设置值，请使用：

```
AC_DEFINE(MYDEFINE, 123) 
```

最后一个将添加`-DMYDEFINE=123`到标志（`DEFS =`在 Makefile 中），`#define MYDEFINE 123`如果您使用它，则在生成的 autoconf 标头中。

我建议您从头开始阅读文档，并通过他们的示例和教程进行操作。还要检查其他项目的配置文件，看看它们如何使用不同的功能。

**编辑：**如果您想将命令行上的标志传递给`make`命令，那么您可以执行以下操作：

```
libfoo_la_CXXFLAGS = $(MYFLAGS) 
```

然后你`make`这样调用：

```
$ make MYFLAGS="-DMYDEFINE" 
```

如果你不在`MYFLAGS`命令行上设置，它将在makefile中未定义并为空。

您还可以在 中设置特定目标`CPPFLAGS`，`Makefile.am`在这种情况下，源文件将被重新编译，每组标志一次：

```
lib_LTLIBRARIES = libfoo.la libbar.la
libfoo_la_SOURCES = foo.c
libfoo_la_CPPFLAGS = -DFOO
libbar_la_SOURCES = foo.c
libbar_la_CPPFLAGS = -DBAR 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-07-13T18:48:55.050

这些天自动标题要求

```
AC_DEFINE([MYDEFINE], [1], [Description here]) 
```

# java - Java - 将 ogg 转换为 mp3

> ID：11883659
> 
> 赞同：0
> 
> 时间：2012-08-09T12:38:48.613
> 
> 标签：java, mp3, ogg

我正在编写一个 Java 程序，我想将一个 ogg 文件转换为 mp3 文件。
我花了很多时间试图找到一个好的图书馆来做到这一点，但目前没有成功。

我想我需要一个 ogg 解码器（jorbis ？）和一个 mp3 编码器（lameOnJ ？）。
此外，一旦转换完成，我需要在文件中设置一些标签（艺术家/曲目标签等）。

这是一个 Windows 和 OS X 应用程序。
您能否给我任何有关如何处理的提示，如果可能的话，请提供示例。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:27:37.750

你有很多选择，这取决于你要付出多少努力，以及你对执行平台有什么限制。

许多开发人员会简单地对外部解码/编码/标签可执行文件进行 System.exec() 调用，将中间文件写入磁盘。这有点笨拙，但是一旦正确设置，它就可以工作。

一个更复杂的选择是使用库，例如​​您找到的库。您仍然可以使用文件系统来临时存储未压缩的版本。

但是，您可以通过流水线避免存储中间步骤 - 并且可能使其更快。您需要将解码器的输出作为编码器的输入，并将它们都设置好。

这个细节取决于API。如果幸运的话，它们可以处理块，并且您可以在单个线程中管理它们。

如果它们与流一起使用，您可能需要亲自动手并使用线程。编码器一个线程，解码器一个线程。

# jquery - jQuery：.toggle() 之后链接不起作用

> ID：11883663
> 
> 赞同：2
> 
> 时间：2012-08-09T12:38:57.763
> 
> 标签：jquery, drop-down-menu, toggle

我刚刚构建了一个下拉菜单，我想在单击时将其下拉，然后在再次单击后返回。这与我使用的切换完美配合，但问题是下拉后，链接不执行。

$（函数（）{

```
 $("#nav_menu-2 ul.menu ul").css({ display: 'none' });

    $("#nav_menu-2 ul.menu #testbutton").toggle(function() {

        $(this).find('ul.sub-menu')
            .stop(true, true).delay(50).animate({ "height": "show", "opacity": "show" }, 300 );
    }, function(){

        $(this).find('ul.sub-menu')
            .stop(true, true).delay(50).animate({ "height": "hide", "opacity": "hide" }, 300 );
    });

}); 
```

所以我的猜测是，在菜单下降后，它会在点击后返回，而不是执行链接。但由于我对 javascript/jQuery 很陌生，所以我不知道我还有什么其他选择。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:44:18.223

我会改为使用[slideToggle](http://api.jquery.com/slideToggle/)，绑定到应该打开菜单的按钮的单击事件：

```
$("#nav_menu-2 ul.menu #testbutton").click(function() {
  $('ul.sub-menu').slideToggle();
}); 
```

根据菜单的构建方式，您可能需要稍微更改选择器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:46:14.680

[这是toggle()](http://api.jquery.com/toggle-event/)的已知副作用。文档说：

> 该实现还调用事件，因此如果在元素上调用`.preventDefault()`了链接，则不会跟踪链接，也不会单击按钮。`.toggle()`

要解决这个问题，您必须绑定到`click`而不是`toggle`. 正如 Andrew 所说，您可以使用[slideToggle()](http://api.jquery.com/slideToggle/)从`click`事件中获得相同的行为。

# java - Java 的 split 方法有前导空白记录，我无法抑制

> ID：11883666
> 
> 赞同：0
> 
> 时间：2012-08-09T12:39:02.390
> 
> 标签：java, string, parsing, split

我正在解析一个输入文件，该文件有多个关键字，前面带有`+`. 这`+`是我在 a 中的分隔符，将`split`单个标记写入数组。结果数组在该`[0]`位置包含一条空白记录。

我怀疑这`split`是在第一个令牌之前取“无”并填充`project[0]`，然后继续使用所有显示为正确的后续令牌。

[Documentaion](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)说这个方法有一个`limit`参数：

> 如果 n 为零，则该模式将被应用尽可能多的次数，数组可以有任意长度，并且尾随的空字符串将被丢弃。

我[在 SO 上找到了这篇文章](https://stackoverflow.com/questions/9389503/how-to-prevent-java-lang-string-split-from-creating-a-leading-empty-string)，但是提出的解决方案是编辑前导分隔符（我使用 a`substring(1)`创建临时字段）为我产生了相同的空白记录。

代码和输出如下。任何提示将不胜感激。

```
import java.util.regex.*;
import java.io.*;
import java.nio.file.*;
import java.lang.*;
//
public class eadd
{
    public static void main(String args[])
    {
        String projStrTemp = "";
        String projString = "";
        String[] project = new String[10];
        int contextSOF = 0;
        int projStringSOF = 0;
        int projStringEOF = 0;
       //
        String inputLine = "foo foofoo foo foo @bar.com +foofoofoo +foo1 +foo2 +foo3";
        contextSOF = inputLine.indexOf("@");
        int tempCalc = (inputLine.indexOf("+")) ;
        if (tempCalc == -1) {
            proj StrTemp = "+Uncategorized";
        } else {
            projStringSOF = inputLine.indexOf("+",contextSOF);
            projStrTemp = inputLine.trim().substring(projStringSOF).trim();
        }
        project = projStrTemp.split("\\+");
       //
        System.out.println(projStrTemp+"\n"+projString);
        for(int j=0;j<project.length;j++) {
        System.out.println("Project["+j+"] "+project[j]);
        }
    }

CONSOLE OUTPUT: 
+foofoofoo +foo1 +foo2 +foo3

Project[0]
Project[1] foofoofoo
Project[2] foo1
Project[3] foo2
Project[4] foo3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:44:19.403

改变：

```
projStrTemp = inputLine.trim().substring(projStringSOF).trim(); 
```

到：

```
projStrTemp = inputLine.trim().substring(projStringSOF + 1).trim(); 
```

如果你有一个前导分隔符，你的数组将以一个空白元素开始。`split()`在没有所有其他包袱的情况下进行试验可能是值得的。

```
public static void main(String[] args) {
    String s = "an+example";

    String[] items = s.split("\\+");
    for (int i = 0; i < items.length; i++) {
        System.out.println(i + " = " + items[i]);
    }
} 
```

有了`String s = "an+example";`它产生：

```
0 = an
1 = example 
```

而`String s = "+an+example";`产生：

```
0 = 
1 = an
2 = example 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:50:46.477

`+`一个简单的解决方案是从字符串 中删除第一个。这样，它不会在第一个关键字之前拆分：

```
projStrTemp = inputLine.trim().substring(projStringSOF + 1).trim(); 
```

* * *

*编辑：*就个人而言，我会使用正则表达式寻求更强大的解决方案。这会查找所有以 . 开头的关键字`+`。它还要求它`+`前面有一个空格或它在行首，这样单词 like`3+4`不匹配。

```
String inputLine = "+foo 3+4 foofoo foo foo @bar.com +foofoofoo +foo1 +foo2 +foo3";
Pattern re = Pattern.compile("(\\s|^)\\+(\\w+)");
Matcher m = re.matcher(inputLine);
while (m.find()) {
    System.out.println(m.group(2));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:55:27.850

+foofoofoo +foo1 +foo2 +foo3

Splits 方法围绕给定 + 的匹配项拆分字符串，因此数组的第一个元素中包含一个空字段（包含 5 个元素）。如果您想获取以前的数据，请获取 inputLine 而不是处理后的 projStrTemp ，该子字符串来自第一个 + 包括在内。

# jquery - 如何使用 jquery 抓取来自 ajax 的数据？

> ID：11883668
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:39:11.797
> 
> 标签：jquery, .net, ajax

我如何使用 jquery 抓取数据来自 ajax 的任何页面的数据，我想通过 C# 控制台来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:58:25.990

好吧，这取决于您用于发布数据的结构。

```
$.ajax({
    type: "POST",
    url: "path.to.my.net.page",
    data: (my.data),
    error: function(xhr,status,error) {/* what to do if something is wrong */},
    success: function(return.data) {/* what to do if everything is all right */}
}); 
```

previuos 片段是通过 jQuery 进行的经典 AJAX 调用。“my.data”结构将由“my.net.page”处理。数据将是可访问的，因为它是 .NET 代码中的普通 post 变量，但根据结构，必须以不同的方式对其进行处理。

数据可能是简单的逗号分隔字符串 (boooh)，也可能是格式良好的 JSON 结构。JSON 使您可以将数据塑造为可以在 csharp 页面中反序列化和访问的序列化对象。有很多图书馆。我建议你[JSON.NET](http://json.codeplex.com/)。试试[这个](http://json2csharp.com/)示例：

```
{"id" : "0023", "name" : "Zap", items : [{"itemId" : "1", itemValue : "One"}, {"itemId": "2", "itemValue" : "Two"}]} 
```

# css - CSS 标题样式

> ID：11883671
> 
> 赞同：0
> 
> 时间：2012-08-09T12:39:26.027
> 
> 标签：css, html, header, styling

只是想知道如何像附加图像一样设置标题的样式。正在考虑使用两个 div，左侧用于文本，右侧用于水平重复图像。问题是我需要正确的 div 宽度来改变不同的标题长度。

任何帮助，将不胜感激！

[标题图片](http://i.stack.imgur.com/GZzrY.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:57:31.543

你可以很简单地做到这一点；

```
.header{
    width:100%;
    height:20px;
    background:url('http://jsfiddle.net/favicon.png') repeat;
}
.header span{
    background-color:#FFF;
    display:inline-block;
    height: 20px;
}

<div class="header"><span class="title">Header Text</span></div> 
```

您可以将其包含在各个页面中，并相应地调整标题空间的大小。

***[这](http://jsfiddle.net/blasteralfred/2rDGc/)***是一个有效的现场演示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:52:42.580

`DIVs`分别使用 left 和 right ，`width`然后到`right div`use`text-align: right;`属性，以便在右 div 中加载的内容将保持向右并根据内容的大小向左增加

```
<div class="header">
  <div class="left"></div>
  <div class="right"></div>
</div>

.header{overflow: hidden;} //Considering width: 1000px;
.left{float: left; width: 100px;}
.right{float: right; width: 900px; text-align: right;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:48:38.490

出于语义原因，您可以只使用`<h1>`标签来完成，并为其添加背景图像。使用 padding-right 你现在可以控制它应该重复多少次并填充所需的空间。

# javascript - RaphaelJS：在限制范围内使用 FreeTransform 移动和缩放对象

> ID：11883672
> 
> 赞同：3
> 
> 时间：2012-08-09T12:39:27.560
> 
> 标签：javascript, raphael, transform, collision-detection

我正在使用 FreeTransform 插件来移动和缩放对象。

我想将此移动和缩放限制为包含该对象的另一个矩形的大小。我怎样才能做到这一点？

我在[JSFiddle](http://jsfiddle.net/Rwfuj/)上提供了一个问题示例。（我希望红色矩形留在另一个矩形内。）

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:36:23.423

FreeTransform 插件提供了设置边界的选项：

```
 boundary: { x: x-pos, y: y-post, width: i, height: i}, 
```

请参阅文档 [https://github.com/ElbertF/Raphael.FreeTransform/](https://github.com/ElbertF/Raphael.FreeTransform/)

# html - 悬停菜单 css chrome 正确，ie 和 ff 不正确

> ID：11883677
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:39:48.837
> 
> 标签：html, css, internet-explorer, google-chrome, cross-browser

在 chrome 中将鼠标悬停在菜单上时会发生这种情况（正确）：http: [//i.imgur.com/chQSu.png](http://i.imgur.com/chQSu.png)

但是在 Ie 和 FF 中会发生这种情况：（我已经删除了页面上的一些信息）：http: [//i.imgur.com/NQOdX.png](http://i.imgur.com/NQOdX.png)

jsfiddle：http: [//jsfiddle.net/SVeKC/](http://jsfiddle.net/SVeKC/)

我不明白为什么在 chrome 而不是 IE 和 FF 中的行为如此，最近 chrome 和 FF 对我来说表现不同，这很不寻常。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:51:27.620

指定#nav li ul的left属性在所有浏览器中保持一致

演示：http: [//jsfiddle.net/SVeKC/1/](http://jsfiddle.net/SVeKC/1/)

# sql-server - 从本地 mssql 自动迁移到 web 服务器上的 mysql

> ID：11883679
> 
> 赞同：1
> 
> 时间：2012-08-09T12:39:53.383
> 
> 标签：sql-server, mysql-workbench, database-migration

我想每小时自动从本地 mssql 数据库复制数据到 web 服务器上的 mysql。我找到了 mysql-workbench，它可以迁移一次。但我想自动完成这项工作并作为例行公事。什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T08:16:12.467

问题解决了！

1.  在 MsSQL 服务器计算机上安装[MySQL odbc 驱动程序](http://www.mysql.com/downloads/connector/odbc/)
2.  在 ODBC 数据源管理器中插入连接参数（网站 ip、数据库用户名、密码）。
3.  在 MsSQL 服务器和用户 ODBC 提供程序上创建一个链接服务器（例如：MySQLConn）
4.  在 Web 服务器上的 MySQL 上创建一个表
5.  创建一个将数据从 MsSQL 服务器上传到 Web 服务器并对其进行调度的作业 例如：

    ```
    EXEC('truncate table DestinationTable') AT MsSQL ;

    INSERT OPENQUERY (MsSQL , 'SELECT firstField, secondField, thirdField FROM DestinationTable')
    SELECT firstField, secondField, thirdField FROM [LocalDb].dbo.fnLocalTable() 
    ```

就这样

# php - 比较字符串值中的整数

> ID：11883680
> 
> 赞同：1
> 
> 时间：2012-08-09T12:39:53.800
> 
> 标签：php

我有一些字符串值存储在数据库表中，用于笔记本电脑的屏幕尺寸，如 14 英寸、14.8 英寸、15.1 英寸、15.6 英寸、16 英寸等。正在使用高级搜索选项搜索这些值，该选项使用一系列值，例如：

```
less than 14 inches
14-15 inches
15-16 inches
16-18 inches 
```

如何使用上述搜索条件从数据库中获取值，以显示该范围内的所有屏幕尺寸：

```
15-16 inches 
```

返回的结果应该是15.1英寸、15.6英寸的所有记录

我曾尝试使用比较运算符，但未显示正确的结果。它要么显示起始值，要么显示结束值。不是介于范围之间的那些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:55:12.813

```
$str = '15-16 inches';
preg_match_all('!\d+!', $str, $matches); 
```

`$matches`将作为具有以下格式的数组返回：

```
array (
  0 => 
  array (
    0 => '15',
    1 => '16',
  ),
) 
```

由此，您可以将您的数据库结果与`$matches[0][0]`和进行比较`$matches[0][1]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:58:56.447

在 MySQL 中，您可以使用[`BETWEEN`比较运算符](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)：

```
SELECT * FROM test.inches WHERE text BETWEEN 15 AND 16; 
```

获取该范围内的所有条目。`BETWEEN`还将字符串转换为数字。

```
3   15.1 inches 15.1
4   15.6 inches 15.6
5   16 inches   16 
```

或者，`BETWEEN`您可以制定两个标准并告诉两者都需要匹配（`AND`）：

```
SELECT * FROM test.inches WHERE text >= 15 AND text < 16;
                                `-- #1 --´  +  `-- #2 -´ 
```

这给了你：

```
3   15.1 inches 15.1
4   15.6 inches 15.6 
```

我希望这有帮助。

* * *

关于强制转换（在此处将字符串转换为数字）：在 MySQL 中（至少是我在这里使用的版本，但这是常见的），您可以将字符串转换为数字，然后通过添加 0 与它进行数字比较。演示：

```
SELECT "15.1 inches" + 0 AS inches; 
```

返回带有数字的单行；：

```
15.1 
```

查询数据库时也可以这样做：

```
SELECT * FROM inches WHERE text + 0 BETWEEN 14 AND 15; 
```

请注意，您最初应该将数字作为数字存储到数据库中。因此，您可以引入一个新列并转换现有日期：

```
ALTER TABLE `test`.`inches` ADD COLUMN `number` FLOAT NULL  AFTER `text` ;
UPDATE inches SET number = text + 0; 
```

然后，您可以直接从那里查询，而无需一直进行转换：

```
SELECT * FROM inches WHERE number BETWEEN 14 AND 15; 
```

这将允许您创建和索引，并在必要时真正加快未来的搜索速度。但在此之前，您已经对数据进行了更多规范化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:52:58.023

假设 14、15、16、18 是您的 4 个选项，而 $myValue 是您要与它们进行比较的值

尝试：

```
$range = array(14, 15, 16, 18);
foreach ($range as $key => $val)
{
    // first option
    if ($myValue <$range[0])
        $option = 1;

    // last option
    else if($myValue > $range[count($range))
        $option = count($range)+1;

    // other options
    else if($myValue < $val && $myValue > $range[$key-1])
        $option = $key+1;
} 
```

# oracle - 通过检查在 orce 中插入的字段的值来创建触发器

> ID：11883681
> 
> 赞同：0
> 
> 时间：2012-08-09T12:39:56.520
> 
> 标签：oracle, triggers

我需要创建一个插入前触发器，`TABLE1`以便它插入`COL2`并且`COL3`新行仅在插入时`TABLE1`插入。我该如何做到这一点，以便仅在满足条件时触发触发器？`TABLE2``TABLE1.FIELD1 = 'XYZ'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:47:23.033

```
CREATE OR REPLACE TRIGGER my_trigger
   before insert 
   ON table_1
   FOR EACH ROW
BEGIN
  IF :NEW.FIELD1 = 'XYZ'
  then
    INSERT INTO table_2 (col1, col2) VALUES (:NEW.col1, :NEW.col2);
  END IF;
END;
/ 
```

或 a_horse_with_no_name 的注释方式，您可以使用该`WHEN`子句

```
CREATE OR REPLACE TRIGGER my_trigger
   before insert 
   ON table_1
   FOR EACH ROW
   WHEN (NEW.FIELD1 = 'XYZ') 
BEGIN

    INSERT INTO table_2 (col1, col2) VALUES (:NEW.col1, :NEW.col2);

END;
/ 
```

# objective-c - iOS TCP/IP 检查连接

> ID：11883683
> 
> 赞同：0
> 
> 时间：2012-08-09T12:40:07.347
> 
> 标签：objective-c, tcp-ip

我目前正在尝试连接到 tcp 服务器。一切都很好，但如果服务器不可用，应用程序会冻结大约 30 秒，这不是很好。我已经搜索了一个解决方案，但到目前为止找不到有用的东西。

也许你们中的某个人有一个检查连接的解决方案？

```
 CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)@"IP_SERVER_PATH", 6666, &readStream, &writeStream);
    inputStream = (__bridge NSInputStream *)readStream;
    outputStream = (__bridge NSOutputStream *)writeStream;
    [inputStream setDelegate:self];
    [outputStream setDelegate:self];
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [inputStream open];
    [outputStream open]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:44:02.427

永远不要在主线程上执行网络操作！使用单独的后台线程。寻找 NSThread。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:43:47.460

您是否尝试过使用诸如可达性之类的东西？

Apple 提供了一个示例项目，但在 Github 上有许多更新，例如[与](https://github.com/tonymillion/Reachability)ARC 和 GCD 一起使用的项目。

基本上，你监控你的网络连接并在它掉线时优雅地处理事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T17:27:00.573

正如 H2CO3 所说：由于设计错误，您将挂起 30 秒（如果您只是在测试，可以）：您永远不应该在主线程中放置任何可能等待很长时间/不确定的东西（例如外部连接）。

话虽如此，我建议您使您的应用程序的行为类似于消息传递系统：将外部通信检查提交给在后台发生的线程，同时用户继续执行其他（非相关）步骤。

如果网络数据量不是问题，请在计时器上放置一个后台线程，通过发送“心跳”或[“保持活动”消息不断检查您的连接，例如这个例子](https://stackoverflow.com/a/11387730/1166727)。这样，当您的用户愉快地做她的事情时，您将进行后台线程检查，并在必要时重新建立与远程服务器的套接字连接。

如果您还可以控制您的套接字服务器开发，我建议您从心跳消息中记录细节。您可以对它们按顺序编号（或 unixtime 时间戳）然后保存到日志中，这样您就可以了解您的问题在现实生活中的重要性。这可以作为一种高效的调试工具。

像这样：

> A0001、A0002、A0003、B0001、A0004、B0002、B0003、A0005、C0001

其中 A、B、C 是连接 ID（和/或您认为相关的任何其他数据，例如原始 IP）。

# facebook - facebook认证后首次访问

> ID：11883694
> 
> 赞同：1
> 
> 时间：2012-08-09T12:40:41.177
> 
> 标签：facebook, facebook-authentication

当用户通过增强的身份验证对话框对我的应用程序进行身份验证并被重定向到画布页面时，有什么方法可以让我的画布页面知道他的第一次访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:10:58.480

用户重定向到画布页面后，您可能会从 facebook 获取用户 ID：以下是示例：

```
require_once("facebook.php");

$config = array();
$config[‘appId’] = 'YOUR_APP_ID';
$config[‘secret’] = 'YOUR_APP_SECRET';
$config[‘fileUpload’] = false; // optional

$facebook = new Facebook($config);

$app->user_id = $facebook->getUser(); 
```

获取到user_id后，可以将其保存到数据库中，这样就可以知道用户是否是第一次访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T01:19:49.283

虽然前面的答案是正确的，但从长远来看，这可能对您构建应用程序更有用。

请记住，这取决于您是否拥有开放的数据库连接以及 facebook php sdk

```
// this brings back more info print_r($user)
$user = $facebook->api('/me');
$exists = mysql_num_rows(mysql_query("SELECT id FROM users WHERE fbid='" . $user['id'] . "'));

if ( $exists > 0) {
    // already exists
} else {
    // insert new user
    mysql_query("INSERT INTO users (fbid) VALUES('" . $user['id'] . "' ) ") or die(mysql_error());

    // do something else (post to timeline?)
    // look up facebook feed for more info on posting
try {
    // Post Message to feed.
    $facebook->api('/me/feed', 'POST', $msg);
} catch (FacebookApiException $e) {
    error_log($e);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:00:22.133

前面的答案是正确的，这是我用来检查他们是新用户还是老用户的代码。然后，如果它们是新的，我将它们插入数据库。

```
// Get the app User ID
$user = $facebook->getUser();

$seeif = mysql_num_rows(mysql_query("SELECT id FROM users WHERE fbid='$user' LIMIT 1"));

if ( $seeif == "1" ) {
// already exists
} else {
// insert new user
mysql_query("INSERT INTO users (fbid) VALUES('$user' ) ") 
or die(mysql_error());
} 
```

# java - 错误：415 HttpURLConnection

> ID：11883702
> 
> 赞同：1
> 
> 时间：2012-08-09T12:41:19.100
> 
> 标签：java, android, web-services, httpurlconnection

我想连接到一个`web-service`并发送一个大文件，我`HttpURLConnection`这样使用：

```
 private void doFileUpload() {
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String lineEnd = "\r\n";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 8 * 1024 * 1024;
        FileInputStream fileInputStream;
        try {
            fileInputStream = new FileInputStream(new File(getRealPathFromURI(fileUri)));

            URL url = new URL("https://url.com/service.asmx?op=Method");
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("SOAPAction", SOAP_ACTION);
            conn.setRequestProperty("Host", "url.com");
            conn.setRequestProperty("Content-Type", "text/plain; charset=utf-8");
            dos = new DataOutputStream(conn.getOutputStream());
            dos.writeBytes("<?xml version=\"1.0\" encoding=\"utf-8\"?>" + lineEnd);
            dos.writeBytes("<soap:Envelope xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/>"
                    + lineEnd);
            dos.writeBytes("<soap:Body>" + lineEnd);
            dos.writeBytes("<IncluirMultimedia xmlns=/" + "www.url.es/>/" + lineEnd);
            dos.writeBytes("<identificadorGUID>" + Guid + "<" + "/identificadorGUID>" + lineEnd);
            dos.writeBytes("<numeroServicio>" + codigoServicio + "<" + "/numeroServicio>" + lineEnd);
            dos.writeBytes("<contenido>" + ficheroAEnviar + "<" + "/contenido>" + lineEnd);
            dos.writeBytes("<tipoMultimedia>" + "0" + "<" + "/tipoMultimedia>" + lineEnd);
            dos.writeBytes("<coordenadaLatitud>" + "0.0" + "<" + "/coordenadaLatitud>" + lineEnd);
            dos.writeBytes("<coordenadaLongitud>" + "0.0" + "<" + "/coordenadaLongitud>" + lineEnd);
            dos.writeBytes("<extension>" + "mp4" + "<" + "/extension>" + lineEnd);
            dos.writeBytes("<cuando>" + "0" + "<" + "/cuando>" + lineEnd);
            dos.writeBytes("<IncluirMultimedia>" + lineEnd);
            dos.writeBytes("</soap:Body>" + lineEnd);
            dos.writeBytes("</soap:Envelope>");
            buffer = new byte[8192];
            bytesRead = 0;
            while ((bytesRead = fileInputStream.read(buffer)) != -1) {
                dos.write(buffer, 0, bytesRead);
            }
            BufferedReader r = new BufferedReader(new InputStreamReader(fileInputStream));
            StringBuilder total = new StringBuilder();
            String line;
            while ((line = r.readLine()) != null) {
                total.append(line);
            }
            fileInputStream.close();

            dos.flush();
            dos.close();
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        catch (IOException e) {
            e.printStackTrace();
        }

        try {
            conn.getContentLength();
            if (conn.getResponseCode() >= 400) {
                inStream = new DataInputStream(conn.getInputStream());
            }
            else {
                inStream = new DataInputStream(conn.getErrorStream());
            }
            inStream.close();

        }
        catch (IOException ioex) {
            Log.e("Debug", "error: " + ioex.getMessage(), ioex);
        }
    } 
```

我`soap-request`必须是：

```
POST /url/url.asmx HTTP/1.1
Host: url.es
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "www.url.com/IncluirMultimedia"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <IncluirMultimedia xmlns="www.url.es">
      <identificadorGUID>string</identificadorGUID>
      <numeroServicio>string</numeroServicio>
      <contenido>base64Binary</contenido>
      <tipoMultimedia>int</tipoMultimedia>
      <coordenadaLatitud>string</coordenadaLatitud>
      <coordenadaLongitud>string</coordenadaLongitud>
      <extension>string</extension>
      <cuando>int</cuando>
    </IncluirMultimedia>
  </soap:Body>
</soap:Envelope> 
```

我不能使用`ksoap2`，因为我需要发送一个非常大的文件，这会导致`OutOfMemoryError`. 这就是为什么我需要使用这个类。

我得到了`error 415`，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-15T18:18:30.583

尝试使用：

```
 conn.setRequestProperty("Content-Type", "text/xml; charset=utf-8"); 
```

您正在发送 xml，我猜服务器期望它。

# objective-c - 如何在 2 个 NSWindowController 之间传递值

> ID：11883704
> 
> 赞同：0
> 
> 时间：2012-08-09T12:41:22.657
> 
> 标签：objective-c, cocoa, global-variables, nswindowcontroller

我试图将数据从一个 NSWindowController 传递到另一个。我有 2 个已经实例化的 NSWindowController，并且它们各自的 NIB 已加载到屏幕中，实际上首先加载的是 firstWindowController，从用户那里获取一些输入并进行一些计算并将它们保存在几个变量和 IBOutlets 中。在 firstWindowController 中的用户操作（NSButton）时，secondWindowController 加载第二个 Nib 窗口。让我们说：

第一个窗口控制器.h

```
@class secondWindowController;

@interface firstWindowController : NSWindowController
{
secondWindowController *_secondWindowController;
}
@property long double onedata; 
@property (strong) IBOutlet NSTextField *rZab;
@property (strong) IBOutlet NSTextField *xZab;
@end 
```

在 firstWindowController.m 中是实例 _secondWindowController 的代码，在所有 @property 的变量和对象中进行综合并加载相关的 nib 屏幕。以同样的方式，一个数据变量和两个 IBoulet 都获得了一些赋值。为简单起见省略。

第二个窗口控制器.h

```
@interface secondeWindowController: NSWindowController
long double newdata;
-(void)getDataFromFirstWC;
@end 
```

第二个窗口控制器.m

```
#import "firstWindowController.h"
#import "secondWindowController.h"
#import "myAppDelegate.h"

@implementation secondWindowController
-(void)getDataFromFirstWC
{
newdata = 0.0;
newdata = (_firstWindowController.onedata); 
// Compilation fails here...
}
@end 
```

这不编译。_firstWindowController 的实例无法识别??。使用未声明的标识符“_firstWindowController”

_firstWindowController 的实例已经在我的应用程序委托中创建，它负责加载第一个窗口笔尖。

有什么帮助来完成这项工作吗？对更多或更少类似问题的其他答案对我没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:45:16.297

您需要`firstWindowController`在`secondWindowController`. 尝试这个：

在你的 seconWindowController.h 中：

```
@class firstWindowController //<-- add this
@interface secondeWindowController: NSWindowController
{
firstWindowController *fwc; //<-- and this
}

long double newdata;
-(void)getDataFromFirstWC;
@end 
```

在您的 seconWindowController.m 中：

```
#import "firstWindowController.h"
#import "secondWindowController.h"
#import "myAppDelegate.h"

@implementation secondWindowController
-(void)getDataFromFirstWC {
newdata = 0.0;
newdata = (fwc.onedata); //<-- add this and it should work
NSLog(@"newdata is: %f", newdata);
}
@end 
```

只要到目前为止我理解了您的代码，您就不需要`secondWindowController`在`firstWindowController`. 祝你好运！

# mysql - Mysql 将几个查询合二为一？

> ID：11883706
> 
> 赞同：1
> 
> 时间：2012-08-09T12:41:30.017
> 
> 标签：mysql

我可以像这样组合两个查询吗

```
first: UPDATE table SET col1=1 WHERE id='x'; 

second: UPDATE table SET col1=0 WHERE id='y'; 
```

我可以将这些查询合二为一吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:43:41.353

```
UPDATE table
SET col1 = CASE id WHEN 'x' THEN 1 ELSE 0 END
WHERE id IN ('x','y') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:51:46.683

使用这个 sql 查询：

```
UPDATE table
SET col1 = 
CASE id 
WHEN 'x' THEN 1 
WHEN 'y' THEN 0 
END
WHERE id IN ('x','y'); 
```

另请参阅[MySQL 中的多个更新](https://stackoverflow.com/questions/3432/multiple-updates-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:55:21.583

```
UPDATE table
SET col1 = (id = 'x')
WHERE id IN ('x','y'); 
```

# python - 我们是否需要对每个 POST 请求进行 CSRF 验证？

> ID：11883709
> 
> 赞同：1
> 
> 时间：2012-08-09T12:41:42.230
> 
> 标签：python, django, post, django-forms

我只是用 POST 方法构建一个简单的 HTML 表单，不幸的是我发现 CSRF 验证错误。

这只是一个在 localhost 上使用 POST 方法的简单 html 表单。不涉及跨站点。我绝对可以通过使用来修复它，`csrf_token`但我仍然不明白为什么 django 要求我这样做..

这里不涉及重定向/ iframe...

那么，为什么会这样？？这对所有人来说都很正常吗？

```
# Also tried using RequestContext(request) but there isn't any change in the error

#settings.py 
'django.middleware.csrf.CsrfViewMiddleware' in MIDDLEWARE_CLASSES

#views.py 

# url for home page is "" i.e, http://127.0.0.1:8000/
def HomePage (request):
    if request.method == "POST":
        form = myForm(request.POST)
        if form.is_valid():
            data = form.cleaned_data
            context = { "myForm" : myForm(choices),
                        "values" : data,
                       }
            return render_to_response("home.html", context)
    else:
        form = myForm(choices)
    context = {"myForm" : form}
    return render_to_response("home.html", context)   

# home.html 

<div id="pingmeeForm">
            <form action="" method="post">
                <table>
                    {{myForm.as_table}}
                </table>
                <input name="enter" type="submit" value="enter"/>
            </form>
            {{values}}
</div>

# forms.py

class myForm (forms.Form):

    def __init__(self, my_choices,*args, **kwargs):
        super(myForm, self).__init__(*args, **kwargs)
        self.fields['Friends'] = forms.ChoiceField(choices=my_choices)

    message = forms.CharField() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T12:52:53.840

如果您执行发布请求，您通常会更改服务器的状态。如果您更改服务器的状态，您不希望允许其他站点这样做。为了防止其他站点在您的服务器上发出后请求，您添加了 csrf 保护。因此，解决方案应该（恕我直言）永远不要删除 Csrf 保护。根据情况，有以下两种情况之一：

1.  您的发布请求不会更改状态。在这种情况下，将其设为获取请求。
2.  您的发布请求会更改状态。你需要 CSRF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:49:55.560

您收到但未显示的错误消息*准确地*解释了您做错了什么：您应该确保

> 视图函数`RequestContext` 用于模板，而不是`Context`.

# python - python csv unicode 示例

> ID：11883712
> 
> 赞同：2
> 
> 时间：2012-08-09T12:41:44.447
> 
> 标签：python, csv

我已经从[python 网站](http://docs.python.org/library/csv.html)复制了这个脚本：

```
import sqlite3
import csv
import codecs
import cStringIO
import sys

class UTF8Recoder:
    """
    Iterator that reads an encoded stream and reencodes the input to UTF-8
    """
    def __init__(self, f, encoding):
        self.reader = codecs.getreader(encoding)(f)

    def __iter__(self):
        return self

    def next(self):
        return self.reader.next().encode("utf-8")

class UnicodeReader:
    """
    A CSV reader which will iterate over lines in the CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        f = UTF8Recoder(f, encoding)
        self.reader = csv.reader(f, dialect=dialect, **kwds)

    def next(self):
        row = self.reader.next()
        return [unicode(s, "utf-8") for s in row]

    def __iter__(self):
        return self

class UnicodeWriter:
    """
    A CSV writer which will write rows to CSV file "f",
    which is encoded in the given encoding.
    """

    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
        # Redirect output to a queue
        self.queue = cStringIO.StringIO()
        self.writer = csv.writer(self.queue, dialect=dialect, **kwds)
        self.stream = f
        self.encoder = codecs.getincrementalencoder(encoding)()

    def writerow(self, row):
        self.writer.writerow([s.encode("utf-8") for s in row])
        # Fetch UTF-8 output from the queue ...
        data = self.queue.getvalue()
        data = data.decode("utf-8")
        # ... and reencode it into the target encoding
        data = self.encoder.encode(data)
        # write to the target stream
        self.stream.write(data)
        # empty queue
        self.queue.truncate(0)

    def writerows(self, rows):
        for row in rows:
            self.writerow(row) 
```

当我运行这个脚本时，我得到这个错误：

```
Traceback (most recent call last):
  File "makeCSV.py", line 20, in <module>
    class UnicodeReader:
  File "makeCSV.py", line 26, in UnicodeReader
    def __init__(self, f, dialect=csv.excel, encoding="utf-8", **kwds):
AttributeError: 'module' object has no attribute 'excel' 
```

此错误可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:49:15.993

这个模块，，`csv`我不认为它是你认为的那样。检查您的路径上是否没有任何 csv.py 正在导入，而不是 stdlib csv 模块。

您可以打印出来`csv.__file__`（从脚本中）以查看它的来源。然后，删除/移动有问题的文件，以便导入 stdlib csv。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:56:36.680

也许问题很愚蠢，但我认为值得回答而不是删除它。我已经用问题脚本在工作目录上创建了 csv.py 脚本，所以据我了解，python 解释器首先尝试从当前工作目录导入库，然后从 python 文件路径导入库，这就是问题所在。

# django - 奇怪的 Django 翻译行为

> ID：11883721
> 
> 赞同：0
> 
> 时间：2012-08-09T12:41:58.867
> 
> 标签：django, translation, gettext

我对 django 翻译有奇怪的问题，需要帮助解决。问题是，不是每次我似乎随机获得翻译字符串或默认字符串时都获得翻译字符串。

我创建了一个类，用于在多个页面上放置“动作”按钮。其中许多按钮都是可重复使用的，所以我为什么要放

`<a href="something">blabla</a>`

当我可以创建简单的工具栏并使用时进入几个模板

`toolbar.add(tool)`

在视图中，然后只使用模板标签来呈现所有工具....无论如何。

这是一种工具的示例：

```
class NewUserGroupButton(MyTool):
    tool_id = 'new-user-group'
    button_label = ugettext(u'Create new user group')
    tool_href = 'new/'
    js = ()

    def render(self):
        s = '<a id="%(tool_id)s" href="%(tool_href)s" class="button blue">%(button_label)s</a>'
        return s % {'tool_id': self.tool_id, 'tool_href': self.tool_href, 'button_label':self.button_label} 
```

这些工具呈现如下：

```
class ToolbarTools:
    def __init__(self):
        self.tools = []

    def add(self, tool):
        self.tools.append(tool)

    def render(self):
        # Organize tools by weight
        self.tools.sort(key=lambda x: x.weight)

        # Render tools
        output = '<ul id="toolbar" class="clearfix">'

        for tool in self.tools:
            output += '<li id="%s">' % ('tool-'+ tool.tool_id)
            output += tool.render() if tool.renderable else ''
            output += '</li>'

        output += '</ul>'

        # Reset tools container
        self.tools = []

        return mark_safe(output) 
```

我使用 ugettext 翻译字符串。使用 (u)gettext=lambda s:s 或 ugettext_lazy 给我没有与函数选择相对应的翻译或代理对象。

就像我说的那样——虽然页面的其余部分是正确的语言，但工具栏按钮似乎是随机翻译的。如果我使用不同的“工具”在不同的页面之间移动，甚至多次刷新同一页面，错误行为仍然保持一致。

有人可以帮我找出导致此问题的原因以及如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T11:49:49.343

问题解决了。

问题本身（随机翻译）可能是由使用 ugettext 引起的。但与此同时，我应该改用 ugettext_lazy 。

因此问题真的来自 ugettext_lazy 返回的代理对象而不是翻译的字符串......这是由这个引起的：

[引用] 使用惰性翻译对象 ugettext_lazy() 调用的结果可以在 Python 中使用 unicode 字符串（类型为 unicode 的对象）的任何地方使用。如果您尝试在需要字节串（str 对象）的地方使用它，事情将无法按预期工作，因为 ugettext_lazy() 对象不知道如何将自己转换为字节串。您也不能在字节字符串中使用 unicode 字符串，因此这与正常的 Python 行为一致。例如：

```
This is fine: putting a unicode proxy into a unicode string.
u"Hello %s" % ugettext_lazy("people")
This will not work, since you cannot insert a unicode object
into a bytestring (nor can you insert our unicode proxy there)
"Hello %s" % ugettext_lazy("people") 
```

[/引用]

取自这里： [https ://docs.djangoproject.com/en/dev/topics/i18n/translation/#working-with-lazy-translation-objects](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#working-with-lazy-translation-objects)

艾伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-18T12:27:39.000

我刚才也有同样的问题。问题是由不正确的中间件顺序引起的 - 我在 CommonMiddleware 之后设置了 LocaleMiddleware。在我将它放在 SessionMiddleware 和 CommonMiddleware 之间之后，它似乎可以正常工作。

在此处查看更多信息：[https ://lokalise.com/blog/advanced-django-internationalization/](https://lokalise.com/blog/advanced-django-internationalization/)

我知道，这个问题很久以前就解决了，但它可能对某人有所帮助。

# version-control - 采购嵌入式 linux 工作的良好做法？

> ID：11883726
> 
> 赞同：-2
> 
> 时间：2012-08-09T12:42:19.570
> 
> 标签：version-control, embedded-linux

这可能是一个非常愚蠢的问题，但我的工作对于嵌入式 Linux 来说是一种新的东西，我们不确定我们应该如何获取我们的代码。

我们将从free scale 获得一个包，如果它与我们的omap 包类似，它可能会非常大。只获取所有内容或将其拆分为不同的存储库是一个好主意，我们应该留下一些东西吗？

我们确实有一些使用 Windows ce 的经验，我们从来没有真正采购过所有东西，只是我们在板支持包中使用的东西，并在 wince600 文件夹中检查了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:33:41.893

变量太多，无法给出明确的答案。

因此，正确答案取决于

1.  您的应用程序以及您的更改有多大
2.  你的构建系统

您在谈论飞思卡尔和嵌入式 linux，也许您想检查[openembedded](http://www.openembedded.org/wiki/Main_Page)。如果您使用这个或任何类似的解决方案，那么除了您的资源和食谱之外，您不需要将任何内容置于版本控制之下。

但是，如果您要自定义构建系统的方式，那么我肯定会将源代码和构建脚本置于版本控制之下。

# ruby-on-rails - 从 Rails 引擎中的父应用程序获取当前命名空间

> ID：11883736
> 
> 赞同：4
> 
> 时间：2012-08-09T12:42:56.793
> 
> 标签：ruby-on-rails, rails-routing, rails-engines

我目前正在设计一个 Rails 引擎，它需要嵌入到父应用程序的命名空间中。我的意思是

```
Railsengine::Application.routes.draw do
    #this must not work
    mount MyEngine::Engine => "a path"

    #instead, the engine need to be embedded in a namespace
    #this work
    namespace :dummy do
       mount MyEngine::Engine => "search"
    end
end 
```

我的问题是，我怎样才能获得当前的命名空间并知道引擎是否在命名空间内被调用，引擎本身内的所有内容。

谢谢

# domain-driven-design - 更新、删除领域模型

> ID：11883739
> 
> 赞同：0
> 
> 时间：2012-08-09T12:43:00.597
> 
> 标签：domain-driven-design, ddd-repositories

我正在为我的 . 对于更新，我调用`repo.findById(id)`以获取当前实例，然后调用`model.setXXX()`更新字段，最后`repo.save(mdl)`将其保存回来。对于删除，我称之为`repo.remove(id)`，现在我的更新和删除都是状态驱动的，并且可能会在我的模型上带来状态变化，有时，基于状态，某些操作（如删除）是不允许的。我如何以这种逻辑本质上在域模型中并且不会泄漏到存储库实现的方式来实现这些行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:29:48.620

我会做这样的事情：

```
// entity
class User{
  ...
  bool CanBeArchived(){
    // check whether objects can be archived based
    // on the rules and state that you mention
  } 
  ...
}

// repository
interface UserArchiver{
  // implementation calls 'CanBeArchived' and throws if it fails
  void Archive(User user)
} 
```

您似乎不喜欢上述方法，因为

> ...逻辑本质上在域模型中，不会泄漏到存储库实现

我认为您不应该担心域泄漏到存储库实现中。无论如何这是不可避免的，数据访问层（repo 实现）无论如何都对领域对象有深入的了解，否则它将无法对它们进行水合。您应该担心的是相反的情况-“数据访问泄漏到域中”，而上面的代码中没有发生这种情况。

# android - 旋转 ImageView 后 OnClick 侦听器不起作用？

> ID：11883743
> 
> 赞同：3
> 
> 时间：2012-08-09T12:43:31.883
> 
> 标签：android, android-imageview

我正在使用下面的代码来旋转 ImageView 控件

```
ImageView Iv = new this.findViewById(id)
RotateAnimation a = new RotateAnimation(0, 60);
a.setFillAfter(true);
a.setFillBefore(false);
a.setDuration(0);
Iv.startAnimation(a); 
```

上面代码的问题是ImageView看起来是旋转的，但是不能正确点击。触发点击事件的坐标是在旋转之前控件所在区域的坐标。

我还尝试了另一种解决方案，我尝试编写一个自定义视图扩展 ImageView 并在 onDraw() 中旋转控件画布，但此解决方案没有旋转控件，它旋转了控件的内容。

```
@Override
protected void onDraw(Canvas canvas)
{
canvas.rotate(60, getWidth() / 2, getHeight() / 2);
super.onDraw(canvas);
canvas.save();
canvas.restore();
}

@Override
protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
super.onMeasure(heightMeasureSpec, widthMeasureSpec);
setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());
} 
```

知道如何旋转控件本身并使其保持可点击状态吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:01:10.687

动画不会改变您的视图位置。这是动画的常见问题。请看[这里](https://stackoverflow.com/questions/10443146/button-not-responding-to-click-event-after-translation-animation)。

# android - 如何在没有内存不足异常的情况下从“onPictureTaken”旋转图片？

> ID：11883752
> 
> 赞同：5
> 
> 时间：2012-08-09T12:44:12.753
> 
> 标签：android, bitmap, bitmapfactory

我在那里看了很多帖子？但我没有找到正确的答案。

我尝试这样做：

```
@Override
public void onPictureTaken(byte[] paramArrayOfByte, Camera paramCamera) {
    try {

        Bitmap bitmap = BitmapFactory.decodeByteArray(paramArrayOfByte, 0,
        paramArrayOfByte.length);

        int width = bitmap.getWidth();
        int height = bitmap.getHeight();

        FileOutputStream os = new ileOutputStream(Singleton.mPushFilePath);

        Matrix matrix = new Matrix();
        matrix.postRotate(90);
        Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0, width,
            height, matrix, false);

        resizedBitmap.compress(Bitmap.CompressFormat.JPEG, 95, os);
        os.close();
        ... 
```

有没有办法在不使用 BitmapFactory 的情况下旋转图片？我想在不损失质量的情况下旋转图片！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:02:40.883

也许您可以使用 Camera.setDisplayOrientation 拍摄已旋转的照片？检查[Android 相机旋转](https://stackoverflow.com/questions/5309029/android-camera-rotate)。此外，调查 Camera.Parameters.setRotation()。其中一种技术应该可以为您解决问题。

否则，您的代码看起来很好，除了在 Bitmap.compress 上使用参数 95，您需要使用 100 进行无损压缩。

为避免内存不足异常，请使用 Camera.Parameters.setPictureSize() 拍摄较低分辨率的图片（例如 3Mpx）。即你真的需要一张 8Mpx 的照片吗？确保使用 Camera.Parameters.getSupportedPictureSizes() 来确定设备上支持的尺寸。

# android - 我应该使用哪个 SDK 来构建带有支持库的项目？

> ID：11883753
> 
> 赞同：0
> 
> 时间：2012-08-09T12:44:15.947
> 
> 标签：android

如果我添加了支持库，我不确定应该使用哪个 SDK 版本来构建项目。例如，我不应该用 2.3.3 构建它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:00:57.520

与支持库一起使用的平台版本并不重要。

支持库旨在从 Android 向后移植一些重要的新功能（如 Fragments），因此旧版本的操作系统（回溯到 1.6）支持它们。

最重要的是，您可以将任何版本的 SDK 与支持库一起使用（一直到 1.6）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:02:02.590

您可以使用 API 级别 4 及更高级别的支持库，因此您可以针对其他 API 所需的几乎任何版本构建它。

# php - 如何将 UTC 日期时间转换为另一个时区？

> ID：11883757
> 
> 赞同：28
> 
> 时间：2012-08-09T12:44:23.493
> 
> 标签：php, datetime, timezone

我怎样才能将这样的日期：（`2012-07-16 01:00:00 +00`它在`UTC +00:00`时区）转换`UTC +04:00`为时区？确保正确处理夏令时？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-09T12:54:40.987

使用[`DateTime`](http://php.net/manual/en/class.datetime.php)和[`DateTimeZone`](http://www.php.net/manual/en/class.datetimezone.php)。

```
$date = new DateTime('2012-07-16 01:00:00 +00');
$date->setTimezone(new DateTimeZone('Europe/Moscow')); // +04

echo $date->format('Y-m-d H:i:s'); // 2012-07-15 05:00:00 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:55:01.250

为了帮助解决问题，您需要获取字符串的最后一部分（偏移部分）并通过简单的查找进行查找。您可以使用正则表达式或`substr()`（也许）来获得最严重的部分。然后，当您有 + 或 - 值时，对可能的时区使用最多 24 次查找，您可以将其与 PHP 的可能[时区](http://php.net/manual/en/timezones.php)一起使用- 如果偏移量相同，谁在乎实际的国家/位置是什么？

使用[date_default_timezone_set](http://www.php.net/manual/en/function.date-default-timezone-set.php)应用正确的一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-12T16:38:35.103

构造`DateTimeZone`函数可以显式接受 UTC 偏移量，我知道你有。

```
//So For 'Asia/Kolkata' you need to use 

$timeZone = new DateTimeZone('+0530');

// Example 

$utc = new DateTime("1960-08-08T20:40:00Z");
echo $utc->format('Y-m-d H:i:s T')."<br>";
$tz =new DateTimeZone('+0530');
$utc->setTimezone($tz);
echo $utc->format('Y-m-d H:i:s T'); 
```

输出：1960-08-08 20:40:00 Z 1960-08-09 02:10:00 GMT+0530

我想这是将时间转换为任何给定偏移量的最简单和最简单的方法

文档：

[http://php.net/manual/en/datetimezone.construct.php](http://php.net/manual/en/datetimezone.construct.php)

*注意：根据该文档链接，这种新的构造函数用法自 PHP 版本 5.5.10 起可用。*

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-08-22T09:41:07.560

您也可以使用 GMT 时间，然后将其转换为您的要求

```
<?php
echo gmdate("M d Y H:i:s", mktime(0, 0, 0, 1, 1, 1998));
?> 
```

GMT 指的是全球通用的格林威治标准时间。

# c# - Newtonsoft Json.Net 正确解析 JSON 对象内的字符串数组

> ID：11883766
> 
> 赞同：0
> 
> 时间：2012-08-09T12:44:43.933
> 
> 标签：c#, json, deserialization, json.net

我有以下问题，我想解析一个我通过 url 查询字符串传递的 Json 对象

例如

```
...&json={tags=[tag1,tag2]} 
```

我用过

```
JsonConvert.DeserializeObject<Dictionary<string, object>>(json) 
```

但是当调用反序列化方法时出现错误

```
Newtonsoft.Json.JsonReaderException : Unexpected character encountered while parsing value: d. Line 1, position 8. 
```

如果我传入字符串

```
"{tags:[\"tag1\",\"tag2\"]} 
```

它工作正常，我不希望我的用户必须添加 "" 引号

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:58:08.017

伪代码对于一个解决方案可能是......

获取 json 查询字符串元素。

第一个拆分等于“=”。

抓取“{tags=[”和“]}”之间的所有文本

将该文本拆分为“，”

修剪项目中的任何空白。

将它们重新组合在一起，但在它们周围加上引号并用逗号分隔它们。

将该值放回“{tags=[”和“]}”之间，即“{tags=[”+newValue+“]}”

这是一些示例 C# 代码...

```
 [Test]
        public void TestHack()
        {
            string almost = "{tags=[tag1,tag2]}";
            string json = this.HackToJson(almost);
            Trace.WriteLine(json);
        }
        public string HackToJson(string almostJson)
        {
            if( almostJson.StartsWith("{tags=[") && almostJson.EndsWith("]}"))
            {
                int tagsLen = "{tags=[".Length;
                string tags = almostJson.Substring(tagsLen, almostJson.Length - (tagsLen + 2));

                var items = tags.Split(new[] { "," }, StringSplitOptions.RemoveEmptyEntries);

                var itemsCleaned = (from c in items select "\"" + c.Trim() + "\"");

                var jsonpart = string.Join(",", itemsCleaned);

                var json = string.Format("{{tags=[{0}]}}", jsonpart);

                return json;

            }
            throw new NotImplementedException("not sure what to do here... ");
        } 
```

# javascript - 两个字段的 Jquery 时间差（以小时为单位）

> ID：11883768
> 
> 赞同：9
> 
> 时间：2012-08-09T12:44:57.297
> 
> 标签：javascript, jquery, time

我的表单中有两个字段，用户可以在其中选择输入时间（start_time，end_time） 我想在更改这些字段时重新计算另一个字段的值。

我想做的是获得两次之间的小时数。因此，例如，如果我的 start_time 为 5:30，结束时间为 7:50，我想将结果 2:33 放入另一个字段。

我输入的表格时间格式为 HH:MM:SS

到目前为止，我已经尝试...

```
$('#start_time,#end_time').on('change',function() 
{
  var start_time = $('#start_time').val();
  var end_time = $('#end_time').val();

    var diff =  new Date(end_time) - new Date( start_time);  

  $('#setup_hours').val(diff); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T12:54:39.690

尝试

```
var diff = ( new Date("1970-1-1 " + end_time) - new Date("1970-1-1 " + start_time) ) / 1000 / 60 / 60; 
```

[拉小提琴](http://jsfiddle.net/4ZBNN/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T12:59:07.723

这取决于您希望输出的格式。使用 Date 对象进行数学运算时，它会将它们转换为自纪元时间（1970 年 1 月 1 日 00:00:00 UTC）以来的毫秒数。通过减去两者（如果您不知道哪个更大，则取绝对值），您可以获得两者之间的原始*毫秒*数。

从那里，您可以将其转换为您想要的任何格式。要获得秒数，只需将该数字除以`1000`。要获取小时、分钟和秒：

```
var diff =  Math.abs(new Date(end_time) - new Date(start_time));
var seconds = Math.floor(diff/1000); //ignore any left over units smaller than a second
var minutes = Math.floor(seconds/60); 
seconds = seconds % 60;
var hours = Math.floor(minutes/60);
minutes = minutes % 60;

alert("Diff = " + hours + ":" + minutes + ":" + seconds); 
```

您当然可以通过一些条件使其更智能，但这只是为了向您展示使用数学可以将其格式化为您想要的任何形式。请记住，Date 对象总是有一个日期，而不仅仅是一个时间，因此您可以将其存储在 Date 对象中，但如果它大于 24 小时，您最终将得到的信息并不真正代表两者之间的“距离”二。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-09T13:01:52.683

```
 var start = '5:30';
   var end = '7:50';
   s = start.split(':');
   e = end.split(':');
   min = e[1]-s[1];
   hour_carry = 0;
   if(min < 0){
       min += 60;
       hour_carry += 1;
   }
   hour = e[0]-s[0]-hour_carry;
   min = ((min/60)*100).toString()
   diff = hour + ":" + min.substring(0,2);
   alert(diff); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T12:51:28.993

试试这个 ：

```
var diff = new Date("Aug 08 2012 9:30") - new Date("Aug 08 2012 5:30");
diff_time = diff/(60*60*1000); 
```

# objective-c - 如何使用ARC中的“弱”？

> ID：11883770
> 
> 赞同：1
> 
> 时间：2012-08-09T12:45:05.917
> 
> 标签：objective-c, automatic-ref-counting, weak

我用：

```
@property(nonatomic, weak) IBOutlet UIView *videoView; 
```

有一个警告：

> 属性 'videoView' 需要定义方法 'videoView' - 使用 @synthesize、@dynamic 或在此类实现中提供方法实现

然后我尝试：

```
@synthesize videoView; 
```

有一个错误：

> 当前部署目标不支持自动 __weak 引用。

还有一个问题：

```
@property(nonatomic, unsafe_unretained) IBOutlet UIView *videoView;

- (void)dealloc {
    videoView = nil;
} 
```

我可以用这种方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:06:18.987

> 当前部署目标不支持自动 __weak 引用。

问题是 iOS 4.x 不支持自动归零弱引用。这意味着，当弱引用对象被销毁时，弱引用会继续指向它，如果使用它可能会导致崩溃。

iOS 5 和更新版本支持自动归零弱引用。要利用它们并清除上面的警告，请将您的最低 iOS 目标提高到 5.0，并使用 5.0 SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:49:57.803

您的部署目标是什么？您至少需要 iOS4 才能获得`weak`引用，并且您需要将 LLVM4 与 Xcode4.4 或更高版本一起使用才能声明您的`@property`变量而不必提供`@synthesize`.

至于第二个问题 - 你想要做什么。如果您只是想在 dealloc 上安全地将变量设置为 nil，那么没关系，因为您声明它是因为`unsafe_unretained`您不拥有它，所以您不应该释放它。

# emacs - emacs custom-face 颜色

> ID：11883776
> 
> 赞同：0
> 
> 时间：2012-08-09T12:45:38.730
> 
> 标签：emacs, colors, customization, font-lock, emacs-faces

我尝试通过更改字体锁定面的颜色（Mx customize-face）来自定义我的 emacs 颜色。但是我发现颜色的数量并没有#xxxxxx的所有值那么多。例如，将颜色值从#000000 更改为#FF0000 时，我只得到了两种颜色，“红色”和“浅红色”。

这是emacs的极限还是我需要用另一种方式来表达颜色值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:12:14.520

显然 Windows shell 不支持颜色。要么获得现代外壳，要么在窗口模式下运行。

# android - 将 Windows Phone 7 模拟器与 Android 手机连接

> ID：11883777
> 
> 赞同：1
> 
> 时间：2012-08-09T12:45:46.063
> 
> 标签：android, windows-phone-7, accelerometer

我只是想知道有什么方法可以将我的 android 手机中的加速度计连接到 windows phone 7 模拟器以测试我的应用程序？

我发现了一个使用 android 加速度计作为鼠标的项目（[https://sites.google.com/site/accelerometermouse/](https://sites.google.com/site/accelerometermouse/)）和另一个使用 AR 进行模拟输入的项目（[http://accelkit.codeplex.com/](http://accelkit.codeplex.com/)），但我认为使用真实手机（仅使用不同的操作系统）进行测试可能会容易得多。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T16:51:15.263

[Accelerometer Sensor Simulator](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202936%28v=vs.92%29.aspx)作为 Windows Phone SDK的一部分提供，因此您不一定需要硬件来测试它。否则，您将不得不构建一个从手机连接到桌面并传递 XYZ 加速度数据的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:48:36.240

模拟器不连接到 wp7 硬件更不用说 android。

# windows-server-2008-r2 - SimpleData 中的 System.IO.FileNotFoundException

> ID：11883784
> 
> 赞同：0
> 
> 时间：2012-08-09T12:46:24.237
> 
> 标签：windows-server-2008-r2, simple.data

我正在使用简单数据 (1.0.0-rc0)`Simple.DataDatabase.Default.Licenses.All().ToList<License>()`来获取许可证列表。它在我的生产环境（VS2010，IIS7.5）中运行良好，但一旦部署到实时服务器，它就会抛出：

```
 `System.Reflection.ReflectionTypeLoadException: Unable to load one or more of the requested types. Retrieve the LoaderExceptions property for more information.
   at System.Reflection.RuntimeModule.GetTypes(RuntimeModule module)
   at System.Reflection.Assembly.GetTypes()
   at System.ComponentModel.Composition.Hosting.AssemblyCatalog.get_InnerCatalog()
   at System.ComponentModel.Composition.Hosting.AssemblyCatalog.GetExports(ImportDefinition definition)
   at System.ComponentModel.Composition.Hosting.AggregateCatalog.GetExports(ImportDefinition definition)
   at System.ComponentModel.Composition.Hosting.CatalogExportProvider.GetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.AggregateExportProvider.GetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.TryGetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition, IEnumerable1& exports)
   at System.ComponentModel.Composition.Hosting.CompositionContainer.GetExportsCore(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExports(ImportDefinition definition, AtomicComposition atomicComposition)
   at System.ComponentModel.Composition.Hosting.ExportProvider.GetExportsCore[T](String contractName)
   at Simple.Data.MefHelper.Compose[T](String contractName)
   at Simple.Data.AdapterFactory.DoCreate(String adapterName, IEnumerable1 settings)
   at System.Collections.Concurrent.ConcurrentDictionary2.GetOrAdd(TKey key, Func2 valueFactory)
   at Simple.Data.CachingAdapterFactory.Create(String adapterName, IEnumerable1 settings)
   at Simple.Data.DatabaseOpener.OpenDefaultMethod()
   at Simple.Data.DatabaseOpener.OpenDefault()`

`System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.VisualStudio.Shell, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies. The system cannot find the file specified.
File name: 'Microsoft.VisualStudio.Shell, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'` 
```

该服务器正在运行新安装的 Windows Server 2008 R2。过去两天我一直在这样做，但没有任何进展。在服务器设置过程中我是否错过了一些重要的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:50:26.737

这是 MEF 的问题。bin 文件夹中的一个程序集引用了 Microsoft.VisualStudio.Shell，当 MEF 尝试执行它的操作并且它无法遵循所有引用时，它会引发该错误。

这一直是最近几个错误报告的原因，下一个版本将对 MEF 代码进行更改，这将阻止它发生。

同时，作为一种解决方法，您可以使用引用跟踪程序集并将其删除，或者将该程序集放在 bin 文件夹中。我推荐前者，因为添加该程序集可能是整个添加越来越多链的开始。

# ios - 使用 Dropbox iOS SDK 上传照片

> ID：11883787
> 
> 赞同：0
> 
> 时间：2012-08-09T12:46:29.190
> 
> 标签：ios, xcode, dropbox-api

如何使用 iOS DropBox SDK 将照片上传到 DropBox。我尝试使用以下代码：

```
NSData *datobj = UIImagePNGRepresentation(uploadPhoto.image);
NSString *stringConvertion = [[NSString alloc] initWithData:datobj encoding:NSUTF8StringEncoding];
NSString *filename = stringConvertion;
NSString *destDir = @"/";
[[self restClient] uploadFile:filename toPath:destDir
                   withParentRev:nil fromPath:stringConvertion]; 
```

但我得到以下回复：[警告] DropboxSDK：文件不存在（（null））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:51:06.823

您正在尝试从图像的 PNG 数据中创建一个字符串。注意

```
UIImagePNGRepresentation() 
```

不返回文件名——它返回一个 NSData 对象，其字节表示原始 PNG 数据。

试试这个：

```
NSString *tmpPngFile = [NSTemporaryDirectory() stringByAppendingPathComponent:@"Temp.png"];
[UIImagePNGRepresentation(uploadPhoto.image) writeToFile:tmpPngFile atomically:NO];
NSString *destDir = @"/";
[[self restClient] uploadFile:filename toPath:destDir
            withParentRev:nil fromPath:tmpPngName]; 
```

# java - String.split() 的内存问题

> ID：11883788
> 
> 赞同：6
> 
> 时间：2012-08-09T12:46:29.783
> 
> 标签：java, string, memory

我的程序目前存在内存问题，在检查应用程序后，我们发现该`String.split()`方法使用了大量内存。我尝试过使用 a `StreamTokenizer`，但这似乎使事情变得更加复杂。

有没有更好的方法将 long`Strings`分成`Strings`比该`String.split()`方法使用更少内存的 small ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:21:29.390

任何实际使用 split 都不太可能“消耗大量内存”。您的输入必须很大（很多很多兆字节），并且您的结果分成*数百万*个部分才能被注意到。

下面是一些代码，它创建了大约 180 万个字符的随机字符串，并将其拆分为超过 100 万个字符串，并输出使用的内存和花费的时间。

如您所见，它并不多：仅 350 毫秒就消耗了 61Mb。

```
public static void main(String[] args) throws Exception {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < 99999; i++) {
        sb.append(Math.random());
    }
    long begin = System.currentTimeMillis();
    String string = sb.toString();
    sb = null;
    System.gc();
    long startFreeMem = Runtime.getRuntime().freeMemory();
    String[] strings = string.split("(?=[0-5])");
    long endFreeMem = Runtime.getRuntime().freeMemory();
    long execution = System.currentTimeMillis() - begin;

    System.out.println("input length = " + string.length() + "\nnumber of strings after split = " + strings.length + "\nmemory consumed due to split = "
            + (startFreeMem - endFreeMem) + "\nexecution time = " + execution + "ms");
} 
```

输出（在相当典型的 windows 盒子上运行）：

```
input length = 1827035
number of strings after split = 1072788
memory consumed due to split = 71740240
execution time = 351ms 
```

有趣的是，*没有* `System.gc()`使用的内存大约是 1/3：

```
memory consumed due to split = 29582328 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:08:28.543

如果您只想使用一个或几个长字符串数组，则可以拆分方面内存。长字符串将始终在内存中。喜欢

```
private static List<String> headlist = new ArrayList<String>();

String longstring = ".....";
headlist.add(longstring.split(" ")[0]); 
```

比长字符串总是在内存中。JVM 不能 gc 它。

在这种情况下，我想也许你可以试试

```
private static List<String> headlist = new ArrayList<String>();

String longstring = ".....";
headlist.add(new String(longstring.split(" ")[0])); 
```

如下代码

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class SplitTest {
    static Random rand = new Random();
    static List<String> head = new ArrayList<String>();

    /**
     * @param args
     */
    public static void main(String[] args) {
        while(true) {
            String a = constructLongString();
            head.add(a.split(" ")[0]); //1
            //head.add(new String(a.split(" ")[0])); //2
            if (i % 1000 == 0)
                System.out.println("" + i);
            System.gc();
        }
    }

    private static String constructLongString() {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10; i++) {
            sb.append(rand.nextInt(10));
        }
        sb.append(" ");
        for (int i = 0; i < 4096; i++) {
            sb.append(rand.nextInt(10));
        }
        return sb.toString();
    }
} 
```

如果您使用 -Xmx60M 运行，它将内存不足大约 6000+，如果您使用代码行 2，注释第 1 行，那么它运行的时间超过 6000

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:54:09.003

Split 不会创建全新的字符串，它在`substring`内部使用它创建一个新`String`对象，该对象指向原始字符串的正确子字符串，而不复制底层的`char[]`.

因此，除了对象创建的（轻微）开销之外，从内存的角度来看，它不应该产生巨大的影响。

ps：`StringTokenizer`使用相同的技术，因此它可能会产生与拆分相同的结果。

**编辑**

要查看是否是这种情况，您可以使用下面的示例代码。它拆分`abc,def`并`abc`打印原始字符串和拆分字符串`def`的底层`char[]`- 输出显示它们都是相同的。

输出：

```
Reference: [C@3590ed52  Content: [a, b, c, ,, d, e, f]
Reference: [C@3590ed52  Content: [a, b, c, ,, d, e, f]
Reference: [C@3590ed52  Content: [a, b, c, ,, d, e, f] 
```

代码：

```
public static void main(String[] args) throws InterruptedException, NoSuchFieldException, IllegalArgumentException, IllegalAccessException {
    String s = "abc,def";
    String[] ss = s.split(",");
    Field f = String.class.getDeclaredField("value");
    f.setAccessible(true);
    System.out.println("Reference: " + f.get(s) + "\tContent: " + Arrays.toString((char[])f.get(s)));
    System.out.println("Reference: " + f.get(ss[0]) + "\tContent: " + Arrays.toString((char[])f.get(ss[0])));
    System.out.println("Reference: " + f.get(ss[1]) + "\tContent: " + Arrays.toString((char[])f.get(ss[1])));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:25:17.377

您需要使用某种流阅读器，而不是使用大数据字符串滥用内存。这里有一些例子：

```
 public static void readString(String str) throws IOException {
        InputStream is = new ByteArrayInputStream(str.getBytes("UTF-8"));

        char[] buf = new char[2048];
        Reader r = new InputStreamReader(is, "UTF-8");

        while (true) {
            int n = r.read(buf);
            if (n < 0)
                break;

            /*
             StringBuilder s = new StringBuilder();
             s.append(buf, 0, n);
             ... now you can parse the StringBuilder ...  
            */
        }
    } 
```

# java - wsimport - 两个声明导致冲突，给出相同的行

> ID：11883790
> 
> 赞同：20
> 
> 时间：2012-08-09T12:46:37.030
> 
> 标签：java, xsd, jaxb, wsimport

尝试使用`wsimport`为 SOAP 端点生成客户端。使用的 WSDL 和所有 XSD 文件都是本地副本。

这是正在执行的命令：

```
wsimport ./bwWsdl.xml -p com.generated -Xnocompile -d ../src -extension -keep -XadditionalHeaders -B-XautoNameResolution 
```

这给出了这个错误：

```
[ERROR] Two declarations cause a collision in the ObjectFactory class.
  line 16 of file:/schemas/newSchema.xsd

[ERROR] (Related to above error) This is the other declaration.   
  line 16 of file:/schemas/newSchema.xsd 
```

请注意，报告的冲突的行号相同。

这是架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
  version="2.004" id="OTA2003A2009A">

  <xs:complexType name="TPA_ExtensionsType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Description here.
      </xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:any processContents="skip" minOccurs="0" maxOccurs="unbounded" />
    </xs:sequence>
  </xs:complexType>

  <xs:element name="TPA_Extensions" type="TPA_ExtensionsType">
    <xs:annotation>
      <xs:documentation xml:lang="en">More description here.</xs:documentation>
    </xs:annotation>
  </xs:element>
</xs:schema> 
```

我试过删除类型定义，但它在许多其他地方被引用。

任何人都可以就如何让它发挥作用提供任何建议吗？

谢谢

**编辑：**

以下是 WSDL 导入这些模式的行：

```
<definitions name='ResLookupGet' targetNamespace='http://org.jboss.ws/resLookupGet' xmlns='http://schemas.xmlsoap.org/wsdl/' xmlns:http='http://schemas.xmlsoap.org/wsdl/http/' xmlns:mime='http://schemas.xmlsoap.org/wsdl/mime/' xmlns:ns='http://www.opentravel.org/OTA/2003/05/beta' xmlns:rq='http://www.opentravel.org/OTA/2003/05/betarq' xmlns:rs='http://www.opentravel.org/OTA/2003/05/betars' xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/' xmlns:tns='http://org.jboss.ws/resLookupGet' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
 <types>
  <xsd:schema targetNamespace='http://org.jboss.ws/resLookupGet' xmlns:tns='http://org.jboss.ws/resLookupGet' xmlns:xsd='http://www.w3.org/2001/XMLSchema'>
   <xsd:import namespace='http://www.opentravel.org/OTA/2003/05/betarq' schemaLocation='./schemas/FooAffiliateHeaderRQ.xsd'/>
   <xsd:import namespace='http://www.opentravel.org/OTA/2003/05/betarq' schemaLocation='./schemas/FooResLookupGetRQ.xsd'/>
   <xsd:import namespace='http://www.opentravel.org/OTA/2003/05/betars' schemaLocation='./schemas/FooResLookupGetRS.xsd'/>
  </xsd:schema>
 </types>
<message name='ResLookupGetRQ'>
  <part element='rq:FooResLookupGetRQ' name='FooResLookupGetRQ'></part>
 </message>
 <message name='ResLookupGetRS'>
  <part element='rs:FooResLookupGetRS' name='FooResLookupGetRS'></part>
 </message> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-09T16:18:49.747

感谢@Petru Gardea 的帮助，我最终能够通过省略`-p com.generated`wsimport 的包规范来解决这个问题。所以这就是我最终能够解决这个问题的方法：

```
wsimport ./bwWsdl.xml -Xnocompile -d ../src -extension -keep -XadditionalHeaders -B-XautoNameResolution 
```

其原因`wsimport`是试图在同一个包中生成具有相同名称和/或方法的类，这显然是做不到的。

因此，通过省略强制的包声明，`wsimport`可以将类放在它想要的任何包中，结果证明每个`<xsd:schema>`WSDL 中的定义有 3 个不同的包。

再次感谢@Petru！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-21T13:38:52.150

我有同样的问题，我通过 pom.xml 调用 webservice。我刚刚删除了 packageName 并定义了一个 sourceDestDir。这将在源包中创建存根。我正在从配置中获取 wsdlURL。以下是我在 pom.xml 中所做的更改：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jaxws-maven-plugin</artifactId>
        <version>2.6</version>
        <executions>
            <execution>
                <id>wsimport-from-jdk</id>
                <goals>
                    <goal>wsimport</goal>
                </goals>
            </execution>
        </executions>
        <configuration>
            <args>
                <arg>-B-XautoNameResolution</arg>
            </args>
            <wsdlUrls>
                <wsdlUrl>${service.wsdl.url}</wsdlUrl> 
            </wsdlUrls>
            <keep>true</keep> 
            <sourceDestDir>src/main/java</sourceDestDir>
        </configuration>
    </plugin> 
```

# c++ - 将 C++ .net 代码从 MSVS2005 移植到 MSVS2010 时找不到资源（？）

> ID：11883791
> 
> 赞同：1
> 
> 时间：2012-08-09T12:46:42.717
> 
> 标签：c++, .net, windows, resources

实际上我不知道这个问题是否已经得到回答，因为我不知道“真正的”问题在哪里。这里是上下文：我有 C++ .NET 代码，我试图从 MSVS2005 移植到 MSVS2010，即从 .NET 2.0 移植到 .NET 4.0。当为启动时创建的一个表单输入方法**InitializeComponent()**时，我在调用resources-> **ApplyResources** **(this->MyControl, L"MyControl ”）**。

附加信息是：

> 找不到适合指定区域性或中性区域性的任何资源。确保“MyForm.resources”在编译时被正确嵌入或链接到程序集“MyAssembly”中，或者所有所需的附属程序集都是可加载的并且是完全签名的。

1.  使用 MSVS2005 编译时，它运行良好。
2.  MSVS2010自动转换所有解决方案没有问题。
3.  **.resx**文件在那里。

由于我不知道问题的根源，所以我不能多说。如果您尝试帮助我，我将非常乐意为您提供更多信息。

在此先感谢您的帮助。

多米尼克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:48:41.943

确保您的 resx 文件和组件的命名空间相同。

我以前见过它，resx 被编译为`SomeFoo.MyForm.resources`表单所在的位置`SomeFoo.Forms.MyForm`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:59:53.753

好的，丹尼尔的建议将我推向了解决方案。

我查看了项目中 .resx 文件的属性。除了 .resx 和 .fr.resx 文件之外，所有文件都不包含“资源逻辑名称”，这些文件可以在我的计算机上使用。

我删除了虚拟文件名的条目，从那时起一切正常。

谢谢！

# knockout.js - 使用带有 Sammy 路由的 KnockoutJS observableArray

> ID：11883792
> 
> 赞同：0
> 
> 时间：2012-08-09T12:46:45.017
> 
> 标签：knockout.js, sammy.js

我正在搜索屏幕上，用户可以在其中选择几个选项并获得结果。当用户选中一个复选框时，会发出一个 AJAX 请求并将结果显示在屏幕上。So the search doesn't have a "Search" button, the query starts when an option is picked.

我将 KnockoutJS 用于 UI，将 Sammy 用于路线。搜索选项绑定到 observableArray。问题是我不知道在哪里可以设置 location.hash。我现在使用的是订阅功能。在 KnockoutJS 教程中，我看到单击绑定到设置哈希的函数，但在这里我认为不需要为每个复选框创建单击函数，我也认为太多了。

这里的[小提琴](http://jsfiddle.net/HyHLD/3/)

HTML：

```
<input type="checkbox" value="1" data-bind="checked:sizeOptions" /> Size 1
   <br />
<input type="checkbox" value="2" data-bind="checked:sizeOptions" /> Size 2
   <br />

<br />
​
<div data-bind="text: ko.toJSON($root.sizeOptions)"></div>
Calls: <div data-bind="text: $root.calls"></div>​ 
```

该模型：

```
​function SearchModel() {
     var self = this;
     self.calls= ko.observable(0);
     self.sizeOptions = ko.observableArray([]);

     // Should this be a Behaviour? (like click: goToFolder). This would be called on the Sammy rout also

     self.sizeOptions.subscribe(function () {
         var _calls = self.calls();
         _calls = _calls + 1;
         self.calls(_calls);
         location.hash = "o=" + self.sizeOptions().join();
         console.log("subscribe");
     });

     Sammy(function() {
         this.get('#o=:o', function() {
            self.sizeOptions(this.params.o.split(','));
            console.log("Sammy get");
            // do an AJAX request and place the results in an observableArray
         });

    }).run(); 
}
ko.applyBindings(new SearchModel());
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:34:14.740

修复简单有效。我没有使用“订阅”方法，而是添加了一个**ko.computed**调用，我在其中设置了哈希。

这个调用用“ **throttle** ”扩展器装饰，所以当更多相关的 observables 几乎同时发生变化时，hash 只会设置一次，所以 Sammy 只会拦截一次路由，当涉及 AJAX 请求时会大大节省。

这里的[小提琴](http://jsfiddle.net/HdCDJ/2/)

# java - JMX RMI - 内存泄漏 - ArrayNotificationBuffer 随着时间的推移变得越来越大

> ID：11883798
> 
> 赞同：2
> 
> 时间：2012-08-09T12:47:09.417
> 
> 标签：java, memory-leaks, rmi, jmx

我正在编写一个应该运行多个小时（10-100）的应用程序，我正在使用 JMX 进行监控。

然而，一段时间后，我发现了两件事：

*   `com.sun.jmx.remote.internal.ArrayNotificationBuffer#1`变大：20 小时后，大约 10MB - 当我启动它时，它小于 1MB
*   随着时间的推移，更多的线程`RMI TCP Accept-0`（或任何其他数量）`RMI-TCP-Connection(44)-[IP]`会被实例化。

我在想，它与应用程序的不同连接有关，但目前我只连接了一次，但一些连接似乎仍然是打开的。

这个怎么可能？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:23:23.617

我在[ArrayNotificationBuffer](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/jmx/remote/internal/ArrayNotificationBuffer.java.html)的源代码注释中四处寻找，它具有相当数量的 JMX 跟踪日志记录，因此您可能希望[启用 JMX 跟踪](https://blogs.oracle.com/jmxetc/entry/tracing_jmx_what_s_going)以更好地了解正在发生的事情。

您可能会发现[这个已知错误](http://bugs.sun.com/view_bug.do?bug_id=6957378)正在影响您。错误报告表明在长期连接中观察到该问题。提到了一些解决方法，尽管如果对您实用的话，一个更简单的解决方法不是，即定期断开连接并重新连接。好消息是在 Java7 中似乎有一个[补丁，虽然我不确定它是否已经发布了。](http://hg.openjdk.java.net/jdk7/build/jdk/rev/5de001f5f8b4)

我还将确保如果您正在注册 JMX 通知侦听器，它们会持续且及时地处理通知。不这样做也可能导致此症状。

# c - 程序的不同行为

> ID：11883803
> 
> 赞同：0
> 
> 时间：2012-08-09T12:47:35.450
> 
> 标签：c, scanf

这是C语言中的一个小程序。我想在while循环中获取用户输入，并且我还想在一行中占用空白，所以我使用`scanf("%[^\n]s",name);`了它，但它给出了不同的输出。它卡在while循环中。

```
#include <stdio.h>

int main (int argc, char const *argv[])
{
    do
    {
    char name[20];
    scanf("%[^\n]s",name);
    printf("%s\n", name);
    }while (1);
    return 0;
} 
```

输出 ：

```
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA
adAD A SAF A SA FA 
```

我想使用 while 循环从用户那里获取带有空格的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-11T19:34:39.153

你可以这样尝试：

```
#include<stdio.h>
int main (int argc, char const *argv[])
{
    char name[20];
    while(gets(name))
    {
       printf("%s\n", name);
    }
return 0; 
```

}

如果您想打破输入循环，那么您有两个选项 AFAIK： 1\. 如果您在 Windows 中，请按 CTRL+Z。2\. 如果您在 Linux 中按 CTRL+D。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T16:08:50.650

Please use `fflush(stdin)` after scanf Note: fflush on stdin is highly platform specific, but generally works in platforms where you run into this issue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:52:22.250

您应该寻找`scanf`函数的返回值并决定`break`循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:14:01.737

这是代码 dt 可能会解决您的 prblm 尽管您应该考虑包含一些检查条件以从 do while 循环中中断。希望它有效

```
#include<stdio.h>
int main ()
{
char name[20];
  do
  {
   gets(name);
   puts(name);
  }while (1);
return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-09T13:01:40.143

您可以使用gets() 来替换scanf()，例如：#include

```
int main (int argc, char const *argv[])
{
    do
    {
    char name[20];
    //scanf("%[^\n]s",name);
    gets(name);
    printf("%s\n", name);
    }while (1);
    return 0;
} 
```

但是“gets”功能很危险，不应该使用。

# sql - 在 MS Access 2003 中匹配相似/相似的列条目

> ID：11883804
> 
> 赞同：1
> 
> 时间：2012-08-09T12:47:36.810
> 
> 标签：sql, regex, ms-access

我所追求的是在MS Access中使用sql的基础工作量摘要，这就是我想要做的：

`Sum(IIf(([Time Report].Destination) Like 'D-[Time Report].[Baselocation]',0)) AS [Total WorkFromBase in P2]`

这不起作用，因为 MS Access 不理解正则表达式，我需要附加的“D-”才能匹配。

据我所知，我的选择是：

1.  学习并使用 VB 宏（？）来获得正确的模式匹配
2.  使用一组复杂的 IIf 语句，因为 sql 没有原生`else if`条件

我不了解VB，我只看过一个[例子](https://stackoverflow.com/questions/5539141/microsoft-office-access-like-vs-regex)，我无法理解。

如果我选择大量 IIf，那么我有这样的东西

```
Sum(
    IIf(D-[Time Report].[Baselocation] = 'Base1', IIf(
        ([Time Report].Destination) = 'D-Base1',
    IIf(D-[Time Report].[Baselocation] = 'Base2', IIf(
        ([Time Report].Destination) = 'D-Base2',
    IIf(D-[Time Report].[Baselocation] = 'Base3a', IIf(
        ([Time Report].Destination) = 'D-Base3a' OR ([Time Report].Destination) = 'D-Base3b',
    IIf(D-[Time Report].[Baselocation] = 'Base3b', IIf(
        ([Time Report].Destination) = 'D-Base3a' OR ([Time Report].Destination) = 'D-Base3b',    ))
)) AS [Total Work From Base in P1], 
```

然后我以一个`Syntax Error (Missing operator)`类型错误结束，

那么如何匹配两个列，并在它们相似时求和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:49:39.597

为什么不在查询中提供可能性表并参考？

```
 If D-[Time Report].[Baselocation] = 'Base1' IN (SELECT Bases FROM NewTable) 
```

或者

```
 SELECT D-[Time Report].[Baselocation], NewTable.Destination 
 FROM D-[Time Report] 
 INNER JOIN Newtable
 ON D-[Time Report].[Baselocation] = NewTable.Bases 
```

其中 NewTable 包含位置列表和该基本映射到的位置。

您还可以使用 LIKE 或 ALIKE 运算符：

```
IIf(D-[Time Report].[Baselocation] LIKE '*Base1*' 
```

一些参考资料：

[基础 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[中级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[高级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T14:10:36.447

*...我需要附加的“D-”才能匹配。*

您可以将“D-”连接到`[Baselocation]`，然后使用等于而不是`Like`比较。

```
[Time Report].Destination) = "D-" & [Time Report].[Baselocation] 
```

但是一个`IIf()`表达式包含 3 个参数。

```
IIf(expr, truepart, falsepart) 
```

在您的示例中，您仅提供了 2 个参数 AFAICT。我认为您希望在 is 时`Sum()`包含一些值（`[amount worked]`？） ，但在`expr`is时包含`True`零`expr`值`False`。也许像这样...

```
Sum(IIf(([Time Report].Destination) = "D-" & [Time Report].[Baselocation], [amount worked, 0)) AS [Total WorkFromBase in P2] 
```

# dynatree - 在 Dynatree 中混合单选和复选框

> ID：11883805
> 
> 赞同：1
> 
> 时间：2012-08-09T12:47:57.293
> 
> 标签：dynatree

我想创建一个混合收音机和复选框的树...。第一部分将使用收音机（在我的地图中仅选择一个基础图层），其他部分将使用复选框（选择要显示的任何图层）

用 dynatree 可以做到这一点吗？附上图片...

![树样本](../Images/cff97a352131b9999f27ca4a29b2dcd7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:55:01.000

复选框和单选框只是 CSS 样式`<span>`标签，因此您可以添加自己的 CSS，基于一些自定义节点类覆盖它。然后，您应该使用`selectMode: 2`, 并在处理程序中实现所需的行为`onSelect`。

# arm - 为 ARM 架构编译 libcivil

> ID：11883806
> 
> 赞同：0
> 
> 时间：2012-08-09T12:48:03.140
> 
> 标签：arm, webcam, raspberry-pi

我编写了一个 Java 应用程序，用于拍摄连接到 pc 的网络摄像头的照片。为此，我使用 lti-civil java-api。它工作正常！此 api 使用共享库 -libcivil.so- 用于 jni 访问多个本机库。libcivil.so 适用于 linux 32/64bit osx 和 windows。但我希望应用程序与具有 arm 架构的树莓派一起运行。

我的问题是：是否可以重新编译 libcivil - 用于 arm 架构的共享库？我不熟悉c ++，所以我不知道是否有可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T10:19:30.410

我找到了一种在树莓派上使用 java 获取网络摄像头图像的方法。我使用 v4l4j 库。它是 v4l2 api 的 jni 包装器。它处理 linux 下对 /dev/video 接口的直接访问。有一种方法可以为 raspbian linux-port 编译它，并且效果很好。但是覆盆子似乎太慢了（5-8 fps 和高延迟 - 大约 300-500 毫秒）。但这是另一回事。现在我正在等待朴树或醋栗...... =）

在树莓派上编译 v4l4j 操作方法： [https ://code.google.com/p/v4l4j/wiki/GettingStartedOnRPi](https://code.google.com/p/v4l4j/wiki/GettingStartedOnRPi)

格里兹丹尼尔

# ios - iOS 企业帐户：仅内部分发

> ID：11883808
> 
> 赞同：1
> 
> 时间：2012-08-09T12:48:08.237
> 
> 标签：ios, enterprise

关于苹果文档，企业程序允许在内部分发应用程序。苹果如何区分内部用户和合作伙伴公司？

或者这只是法律协议中的一个段落，定义了只允许公司成员进行内部分发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:51:08.853

Apple 实际上并不会检查您安装企业应用程序的位置。正如文档所说，您应该只将它们分发到员工/公司设备。实际上，苹果没有办法强制执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-04T14:57:38.643

有点晚了，但我想这对到达这里的人来说仍然很有趣，所以这是我在联系客户服务之前发现的（在他们回复之后）。

一篇有趣的文章，对法律协议进行了一些分析：http: [//mobiledan.net/2012/09/08/can-ios-enterprise-apps-be-used-by-customers/](http://mobiledan.net/2012/09/08/can-ios-enterprise-apps-be-used-by-customers/)

（在我看来，合同很难理解，对于英国律师也是如此……）

苹果官方关于企业应用分发的视频： [https ://developer.apple.com/videos/play/wwdc2014/705/](https://developer.apple.com/videos/play/wwdc2014/705/)

因此，我尝试与 Apple 客服交谈，他们的回答是：

“企业计划的许可协议只允许在公司的设备或公司租用的设备上安装内部应用程序。不允许（员工的）个人设备或其他公司的设备”。

意大利原版答案：

“le condizioni d'utilizzo del programma Enterprise prevedono che solamente i dispositivi di proprietà o noleggiati dall'azienda possano ricevere le app in-house. Dispositivi personali o di altre aziende non sono ammessi”。

当然，我们在边缘移动了几年，有一天坏事开始发生，比如应用程序无法运行，分发配置文件过期，......我不知道他们是否可以检查，但为了您的安全和那些如果您要求他们购买他们的企业许可证，您的客户可能会更好，至少这样您就不会冒单点故障的风险。

# gwt - 可排序的 CellTable 列的标题没有响应

> ID：11883811
> 
> 赞同：3
> 
> 时间：2012-08-09T12:48:28.963
> 
> 标签：gwt, celltable

我正在使用 GWT 2.5 创建一个带有可排序日期列的 CellTable。

我的代码如下：

```
CellTable<Activity> table = new CellTable<Activity>();

table.setRowStyles(new RowStyles<Activity>() {
    @Override
    public String getStyleNames(Activity row, int rowIndex) {
        return TABLE_ROW_STYLE_NAME;
    }
});

// create date column
TextColumn<Activity> dateColumn = new TextColumn<Activity>() {
    @Override
    public String getValue(Activity a) {
        return dateFormat.format(a.getDate());
    }
};
dateColumn.setSortable(true);
dateColumn.setDefaultSortAscending(false);
// add column to table
table.addColumn(dateColumn, myConstants.dateColumnHeader());

// attach provider to table
activityProvider.addDataDisplay(table);

// create sort handler
ListHandler<Activity> sortHandler = new ListHandler<Activity>(activityProvider.getList());
sortHandler.setComparator(dateColumn, new Comparator<Activity>() {
    @Override
    public int compare(Activity a1, Activity a2) {
        if (a1 == a2) {
            return 0;
        }

        // compare the date columns
        if (a1 != null) {
            if (a2 != null) {
                long a1Val = a1.getDate().getTime();
                long a2Val = a2.getDate().getTime();
                if (a1Val == a2Val) {
                    return 0;
                }
                else if (a1Val > a2Val) {
                    return 1;
                }
                else {
                    return -1;
                }
            }
            else {
                return 1;
            }
        }

        return -1;
    }
});

// add sort handler to table
table.addColumnSortHandler(sortHandler);

// add date column to table's sort list
table.getColumnSortList().push(dateColumn);

table.setWidth("100%");

getView().getActivityPanel().add(table); 
```

使用此代码，数据将显示在表格中，并出现列上的排序箭头。但是，当我单击可排序列的标题时，什么也没有发生。排序顺序不会改变，行不会重新排列。

**任何人都可以在这里发现问题吗？**[此代码与Google 自己的示例](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellTable)中的 代码几乎相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:41:00.820

它应该是

a1.getDate().getTime().compareTo(a2.getDate().getTime())

或者

a1.getDate().after(a2.getDate())

这是因为 GWT 使用 JavaScript 比较，而 compareTo 不适用于日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:20:34.500

这就是我使用的：

```
 dateColumn.setSortable(true);
    sortHandler.setComparator(dateColumn, new Comparator<ObjectPobject>() {
        public int compare(ObjectPobject o1, ObjectPobject o2) {
            return o1.getDate().compareTo(o2.getDate());
        }
    }); 
```

# xml - liferay 6.1.1 中的 xml 解析错误

> ID：11883813
> 
> 赞同：6
> 
> 时间：2012-08-09T12:48:31.217
> 
> 标签：xml, liferay

我尝试在 liferay 6.1.1 上部署我的应用程序并收到此错误（当我在 6.0.6 上测试此应用程序时，一切正常）。这意味着什么？

> 原因：com.liferay.portal.kernel.xml.DocumentException：文档第 1 行出错：XML 声明中“版本”后面的值必须是带引号的字符串。嵌套异常：XML 声明中“版本”后面的值必须是带引号的字符串。

up：我不知道哪个文件给出了这个错误。完整日志

> 我不知道哪个文件给出了这个错误...所有日志 [#|2012-08-09T15:12:20.322+0400|INFO|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise。 server.logging|_ThreadID=17;_ThreadName=Thread-3;|15:12:20,321 错误 [com.liferay.portal.kernel.deploy.auto.AutoDeployScanner][AutoDeployDir:210] com.liferay.portal.kernel.deploy .auto.AutoDeployException：com.liferay.portal.kernel.xml.DocumentException：文档第 1 行出错：XML 声明中“版本”后面的值必须是带引号的字符串。嵌套异常：XML 声明中“版本”后面的值必须是带引号的字符串。com.liferay.portal.kernel.deploy.auto.AutoDeployException：com.liferay.portal.kernel.xml.DocumentException：文档第 1 行出错：“版本”后面的值 在 XML 声明中必须是带引号的字符串。嵌套异常：XML 声明中“版本”后面的值必须是带引号的字符串。在 com.liferay.portal.tools.deploy.BaseDeployer.autoDeploy(BaseDeployer.java:201) 在 com.liferay.portal.deploy.auto.PortletAutoDeployListener.deploy(PortletAutoDeployListener.java:84) 在 com.liferay.portal.kernel .deploy.auto.AutoDeployDir.processFile(AutoDeployDir.java:193) 在 com.liferay.portal.kernel.deploy.auto.AutoDeployDir.scanDirectory(AutoDeployDir.java:235) 在 com.liferay.portal.kernel.deploy.auto .AutoDeployScanner.run(AutoDeployScanner.java:54) 原因：com.liferay.portal.kernel.xml.DocumentException：文档第 1 行出错：XML 声明中“版本”后面的值必须是带引号的字符串。嵌套异常：XML 声明中“version”后面的值必须是带引号的字符串。在 com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java:399) 在 com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java:378) 在 com.liferay.portal.xml.SAXReaderImpl.read (SAXReaderImpl.java:409) 在 com.liferay.portal.kernel.xml.SAXReaderUtil.read(SAXReaderUtil.java:155) 在 com.liferay.portal.tools.WebXMLBuilder.organizeWebXML(WebXMLBuilder.java:60) 在 com。 liferay.portal.tools.deploy.BaseDeployer.updateWebXml(BaseDeployer.java:2078) 在 com.liferay.portal.tools.deploy.BaseDeployer.deployDirectory(BaseDeployer.java:576) 在 com.liferay.portal.tools.deploy。 BaseDeployer.deployFile(BaseDeployer.java:957) 在 com.liferay.portal.tools.deploy.BaseDeployer.deployFile(BaseDeployer.java:889) 在 com。liferay.portal.tools.deploy.BaseDeployer.autoDeploy(BaseDeployer.java:198) ... 4 更多原因：org.dom4j.DocumentException：文档第 1 行出错：XML 声明中“版本”后面的值必须是一个带引号的字符串。嵌套异常：XML 声明中“版本”后面的值必须是带引号的字符串。在 org.dom4j.io.SAXReader.read(SAXReader.java:482) 在 org.dom4j.io.SAXReader.read(SAXReader.java:365) 在 com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java :396) ... 还有 13 个 |#] XML 声明中“version”后面的值必须是带引号的字符串。在 org.dom4j.io.SAXReader.read(SAXReader.java:482) 在 org.dom4j.io.SAXReader.read(SAXReader.java:365) 在 com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java :396) ... 还有 13 个 |#] XML 声明中“version”后面的值必须是带引号的字符串。在 org.dom4j.io.SAXReader.read(SAXReader.java:482) 在 org.dom4j.io.SAXReader.read(SAXReader.java:365) 在 com.liferay.portal.xml.SAXReaderImpl.read(SAXReaderImpl.java :396) ... 还有 13 个 |#]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T10:45:54.127

问题可能与您的 web.xml 文件有关。我有一个在 6.1GA1 下运行良好但在 6.1GA2 下运行良好的 portlet 的类似问题。当 Liferay 部署 portlet（和钩子等）时，它会重写文件和其他文件以添加过滤器、库等。因此错误可能不是您最初创建的文件，而是 Liferay 生成的文件。

就我而言，Liferay 将 web.xml 的第一部分从

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"> 
```

类似于

```
<?xml version=<filters>[other stuff]</filters>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"> 
```

所以是*修改后*的第一行导致了问题。我有一些 XML 注释掉使用`<!-- -->`和删除这些部分解决了这个问题。但恕我直言，这是一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T08:45:47.027

请注意 web.xml 中的标记“显示名称”。有时（这是我的情况）Eclipse 插件使用“j2ee:display-name”标签创建一个 web.xml。Deployer 尝试在“/display-name”标签位置之后附加过滤器块配置。当存在“j2ee:display-name”时，部署程序会将过滤器块配置附加到文件中的错误位置，例如“版本”属性。用“display-name”标签替换“j2ee:display-name”标签可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:11:44.313

如果您知道哪个插件（钩子、主题、portlet 等）导致了错误，那么您将不得不检查该文件夹结构中的所有 XML 文件并检查第一行并确保它是：

```
<?xml version="1.0"?> 
```

这将是一项乏味的任务，但您无能为力！

如果您不知道是哪个插件导致错误，请一一部署，直到找到它！

希望这可以帮助！

# objective-c - UITABViewController 中两个 UIViewController 之间的 KVO 机制

> ID：11883818
> 
> 赞同：3
> 
> 时间：2012-08-09T12:48:42.163
> 
> 标签：objective-c, ios

我是 iPhone 新手。我正在尝试实现 KVO 机制。

**我有的？**

两个 TabController 有两个 UIViewController，FirstViewController 有一个按钮，SecondViewController 有一个 UITextView

**我想要的是？**

当在 firstViewController 中按下按钮时，它会更新成员变量，该变量应由 secondViewController 观察，并应附加到 UITextView。

**我做了什么？**

第一视图控制器.h

```
@interface FirstViewController : UIViewController
{
    IBOutlet UIButton *submitButton;

}

-(IBAction)submitButtonPressed;

@property (retain) NSString* logString;
@end 
```

第一视图控制器.m

```
-(IBAction)submitButtonPressed
{
    NSLog (@" Submit Button PRessed ");
    self.logString = @"... BUtton PRessed and passing this information ";
} 
```

SecondViewController.h

```
@interface SecondViewController : UIViewController
{
    IBOutlet UITextView *logView;
}

@property (nonatomic, strong) UITextView *logView;
@end 
```

第二视图控制器.m

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
  ......

  NSArray *vControllers =     [self.tabBarController  viewControllers];
    FirstViewController *fvc = [vControllers objectAtIndex:0];
    [fvc addObserver:self  forKeyPath:@"logString" options:NSKeyValueObservingOptionNew context:NULL];

  return self;
}

-(void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog (@".... OBSERVE VALUE FOR KEY PATH...");    
} 
```

**我期望什么输出？**

每次按下 FirstViewController 中的按钮时，都应打印字符串“.... OBSERVE VALUE FOR KEY PATH...”。

**我得到什么？**

无输出。

**我做错了什么？请帮助我**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:12:07.897

把你的“成员变量”放到一个单独的类文件中......即模型/视图/控制器。制作一个保存数据的单例模型对象，然后您可以从任何视图控制器中 KVO 该模型对象。

这是粗略的伪代码：

```
 @interface MyDataModel: NSObject
    {
     NSString *logString;
    }
    @property (nonatomic,retain) NSString *logString;
    @end

    @implementation MyDataModel

    @synthesize logString;

    + (MyDataModel *) modelObject
    {
     static MyDataModel *instance = nil;
     static dispatch_once_t once;
     dispatch_once(&once, ^{
       if (instance == nil)
       {
        instance = [[self alloc] init];
       }
     });

     return (instance);
    }

    @end 
```

在你的 VC1

```
MyDataModel *model = [MyDataModel modelObject];
[model setLogString:@"test"]; 
```

在你的 VC2

```
[model addObserver:self forKeyPath:@"logString" options:0 context:NULL]; 
```

更复杂的方法是使用 Core Data 作为持久存储并充当您的数据模型。

# php - 在回声中插入 div + 链接 + 图像 (Joomla)

> ID：11883819
> 
> 赞同：0
> 
> 时间：2012-08-09T12:48:44.953
> 
> 标签：php, html, echo

我在这里遇到了一个小问题，非常感谢您的帮助。

我正在尝试创建一种菜单，该菜单将在用户登录 Joomla 后显示（尽管 joomla 的事实并不重要）。我为两个不同的用户提供了两个不同的输出。如果用户是用户 A，他/她将看到输出 A，如果是用户 B，他/她将看到输出 B。

我已经想出了如何做“看看谁是用户——给出输出”部分。它运行良好。问题在于输出本身。我正在尝试回显一个包含图像和文本的 div，两者都作为链接。但是，我得到的唯一输出是文本，没有任何格式。

这是代码：

```
<?php 

$user =& JFactory::getUser();
if ($user->id == 291) {

 echo <<<EOS

<div class="mitribu"><a href="index.php?option=com_content&amp;view=category&amp;layout=blog&amp;id=13"><img class="mitribuimg" src="images/banners/books.png" alt="books"/>Mi tribu</a></div>

EOS;

}

?> 
```

如您所见，这应该呈现图像和文本 Mi tribu，这应该是一个链接。但我唯一得到的是纯文本的 Mi tribu。

我在这里做错了什么？

非常感谢您！

埃尔南。

* * *

编辑：我找到了答案。它是用于在 Joomla、Sourcerer 中的文章和模块中呈现 PHP 的插件，它正在剥离代码。以防万一其他人有同样的问题，这里是解决方案：

您必须使用 {source 0} {/source} 添加代码。添加 0 告诉插件不要剥离 HTML 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:13:58.237

您可以像下面这样轻松地在 php 代码中执行 HTML。而不是使用 { }，只需使用冒号并输出下面的 html。

```
$user =& JFactory::getUser();
if ($user->id == 291):
?>

<div class="mitribu"><a href="index.php?option=com_content&amp;view=category&amp;layout=blog&amp;id=13"><img class="mitribuimg" src="images/banners/books.png" alt="books"/>Mi tribu</a></div>

<?php endif;?> 
```

或者这样做，请确保使用 ' 因为您在 HTML 中使用 "。

```
<?php 

$user =& JFactory::getUser();
if ($user->id == 291) {

echo '<div class="mitribu"><a href="index.php?option=com_content&amp;view=category&amp;layout=blog&amp;id=13"><img class="mitribuimg" src="images/banners/books.png" alt="books"/>Mi tribu</a></div>'

}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:54:11.280

你试过用谷歌浏览器打开它吗？然后右键单击图像应该在的位置（文本等）并从菜单中选择“检查元素”。这将调出 Google Chrome 的调试工具，并允许您查看输出到浏览器的内容，并可能会告诉您为什么您的图像不可见（路径错误或类似的东西）。

# php - 易。如何在表单提交中添加css“错误”类输入？

> ID：11883820
> 
> 赞同：3
> 
> 时间：2012-08-09T12:48:50.407
> 
> 标签：php, yii

我有 Yii 形式。有些字段是必需的。提交表单时，我需要将 CSS 类“错误”添加到文本输入中。我的代码：

```
 <?php $form=$this->beginWidget('CActiveForm', array(
                    'id'=>'contact-form',
                    'enableClientValidation'=>true,
                    'clientOptions'=>array(
                            'validateOnSubmit'=>true,
                    ),
            )); ?>
           <ul class="contact_form">
               <li class="row">
                   <?php echo $form->labelEx($model,'name'); ?>
                   <?php echo $form->textField($model,'name', array('class'=>'input')); ?>
                   <?php echo $form->error($model,'name'); ?>
               </li>
... 
```

现在我只得到带有错误消息的 div：

```
<div class="errorMessage" id="ContactForm_name_em_" style="">Laukelis „Vardas, pavardė“ negali būti tuščias.</div> 
```

如何将“错误”类添加到输入字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:55:07.163

```
<?php echo $form->textField($model,'name', array('class'=>'input' . ( $model->getError('name')  ? ' error' : ''))); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T10:23:05.057

要也进行 AJAX 验证，您应该或多或少地添加如下内容：

```
<?php $form=$this->beginWidget('CActiveForm', array(
          'id'=>'contact-form',
          'enableClientValidation'=>true,
          'clientOptions'=>array(
              'validateOnSubmit'=>true,
              'afterValidate' => 'js:function(form, data, hasError) { 
                  if(hasError) {
                      for(var i in data) $("#"+i).addClass("error_input");
                      return false;
                  }
                  else {
                      form.children().removeClass("error_input");
                      return true;
                  }
              }',
              'afterValidateAttribute' => 'js:function(form, attribute, data, hasError) {
                  if(hasError) $("#"+attribute.id).addClass("error_input");
                      else $("#"+attribute.id).removeClass("error_input"); 
              }'
          ),
        )); ?> 
```

# tridion - SDL Tridion 2009 SP1：Content Porter 2009 SP1 - 无法将子出版物更改为父出版物

> ID：11883825
> 
> 赞同：2
> 
> 时间：2012-08-09T12:49:10.827
> 
> 标签：tridion, content-porter-2009

我正在尝试将 WebForms 2010 安装到 SDL Tridion 2009 SP1 实例中。

我正在使用将现有出版物重命名为 WebForms 的方法，然后使用 Content Porter 将 WebForms 构建块导入该出版物。但是，我收到以下错误：

“无法将子出版物更改为父出版物”

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:02:35.260

您正在导入的出版物没有 BluePrinting 上下文，因此当您导入完整的出版物时，Content Porter 会尝试删除不允许的现有出版物的 BluePrinting 上下文。

对此的解决方案是仅导入 WebForms Publication 的内容，因此在导入选择中，当您选择 Publication 时选择 Children Only（不要选择整个包）。这样它就不会尝试更新现有的出版物（它实际上并不包含您需要的任何东西，您需要 TBB 和模式，而不是出版物本身）。

# php - SQL表中上次活动的在线/离线状态如何显示

> ID：11883830
> 
> 赞同：0
> 
> 时间：2012-08-09T12:49:19.560
> 
> 标签：php, mysql, sql

所以，我有这个查询：

```
$alt_user_result = execute_pdo_query("SELECT U.username, U.user_id, T.last_activity_time
FROM user_skills S, users U
LEFT JOIN user_status T ON U.user_id=T.user_id
WHERE S.user_id=U.user_id and S.task_type_id=? and S.permission='Yes';",
array($tablerow['task_type_id'])); 
```

我正在做这样的事情来显示状态：

```
foreach($alt_user_result as $cur_user) {

 if($cur_user['user_id'] != 1){

   if( (time(date('Y-m-d H:i:s')) - time($cur_user['last_activity_time'])) < 300 ){
    echo "<option value='$cur_user[user_id]'>$cur_user[username] | online</option>";
   }
   else if( (time(date('Y-m-d H:i:s')) - time($cur_user['last_activity_time'])) >300){
    if( (time(date('Y-m-d H:i:s')) - time($cur_user['last_activity_time']))<1800 ) {
     echo "<option value='$cur_user[user_id]'>$cur_user[username] | idle</option>";
    }
   }
   else if( (time(date('Y-m-d H:i:s')) - time($cur_user['last_activity_time']))>1800 ){
     echo "<option value='$cur_user[user_id]'>$cur_user[username] | offline</option>";
   }
  }
  var_dump((time(date('Y-m-d H:i:s')) - time($cur_user['last_activity_time'])));
 }
 echo "<input type='submit' name='reassign' value='Reassign'/></select></form>";
} 
```

在`last_activity_time`我的表中是：`datetime`。

表中的`var_dump`结果仅为零并且不正确，如果我删除`time()`它会显示时间之间的差异但`time()`它会中断；

如果最后一个活动是 <= 5 分钟 => 状态，我需要做的**是：在线**

如果它 > 5 分钟并且 <= 30 错误 => 状态：空闲

如果 > 30 分钟 => 状态：离线。

我做错了什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:24:13.333

你可以用 MySQL **[TIMESTAMPDIFF()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)**和**[CASE](http://dev.mysql.com/doc/refman/5.5/en/control-flow-functions.html#operator_case)**函数来解决它

```
SELECT * , TIMESTAMPDIFF( 
MINUTE , last_active, NOW( ) ) AS minuteDiff, 
CASE  
WHEN TIMESTAMPDIFF( MINUTE , last_active, NOW( ) ) >30 THEN  'Offline'
WHEN TIMESTAMPDIFF( MINUTE , last_active, NOW( ) ) > 4 THEN  'Idle'
WHEN TIMESTAMPDIFF( MINUTE , last_active, NOW( ) ) THEN  'Online'    
END AS userStatus
FROM tbl_time 
```

现在检查`userStatus`列上的条件

## 更新

**注意：**您可以使用图像或任何您想要的东西，这并不重要。

经过上述查询后，您可以按以下方式将其显示在 php 中

```
<select name ="selectName" id ="selectID" > 
foreach($alt_user_result as $cu)
{

    switch($cu['userStatus'])
    {
        case 'Online' :
                        $txt = 'Online';
                        $img = 'images/online.png';
                        break;
        case 'Idle' :
                    $txt = 'Idle';
                    $img = 'images/idle.png';
                    break;
        case 'Offline' :
                    $txt = 'Offline';
                    $img = 'images/offline.png';
                    break;
        default : 
                // here you can set default value
    }

    if($cu['user_id'] != 1) {
      echo "<option value='$cu[user_id]'> $cu['username'] | $txt 
                /*  or you can show respective image */
                | <img src ='$img' alt='$txt' title='$txt'/>
            </option> ";
    } // end of if
} // end of foreach
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:22:38.820

我已经给出了用户状态的 sql 查询。您可以在循环中直接使用该列。不需要if条件。

```
$alt_user_result = execute_pdo_query("
SELECT U.username, U.user_id, T.last_activity_time,
case 
WHEN TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) <= 5 THEN 'online'
WHEN ( TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) > 5 AND 
   TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) <=30 ) THEN 'idle'
ELSE 'offline' END as user_status   
FROM user_skills S, users U
LEFT JOIN user_status T ON U.user_id=T.user_id
WHERE S.user_id=U.user_id and S.task_type_id=? and S.permission='Yes';",
array($tablerow['task_type_id'])); 
```

IE

```
echo "<option value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]</option>"; 
```

如果您想将状态更改为可以管理的图像。

```
echo "<option value='$cur_user[user_id]'>$cur_user[username] | ";

if( $cur_user[user_status]=='online') echo "<img src='online.jpg'/>";
else if( $cur_user[user_status]=='idle') echo"<img src='idle.jpg'/>";
else if( $cur_user[user_status]=='offline') echo "<img src='offline.jpg'/>";

echo "</option>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:18:54.523

如果想获取两个日期之间的差异，请使用 php 的 dateTime。该函数返回两个日期之间的差值，无论结果是正数还是负数，它总是只返回差值。然后，您可以以任何您想要的格式输出它：

```
function date_diff($date1,$date2){
    try {
        $d1Object = new DateTime($date1);
        $d2Object = new DateTime($date2);

        $diff = $d1Object->diff($d2Object);
    }

    catch (Exception $e) {
        echo '';
    }
    //this returns the difference in years, e.g.
    //for more info, see php.net dateTime
    return $diff->y;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T12:59:45.480

我不写 PHP，但这些方面的东西应该让你开始：

```
 foreach($alt_user_result as $cur_user) 
    {
        if($cur_user['user_id'] != 1)
        {
            $interval = time(date('Y-m-d H:i:s'))->diff(time($cur_user['last_activity_time']));

            $numSeconds = $interval->s + $interval->m * 60 + $interval->h * 60 * 60 + $interval->d * 60 * 60 * 24;

            $status = "offline";

            if ($numSeconds < 300)
            {
                $status="online";
            }
            else if ($numSeconds < 1800)
            {
                $status="idle";
            }

            echo "<option value='$cur_user[user_id]'>$cur_user[username] | ".$status."</option>";
        }
    } 
```

# html - 使用 twitter bootstrap 时移动设备发生变化？

> ID：11883841
> 
> 赞同：0
> 
> 时间：2012-08-09T12:50:07.427
> 
> 标签：html, css, twitter-bootstrap, viewport

我有这个使用 twitter bootstrap 的示例布局：

```
<div class="container">
     <div class="row">
        <div class="span8">
           <h1> Hello MOBLE WORLD</h1>
        </div>
    </div>
  </div> 
```

它们在所有设备中看起来都一样。

当我将元视口放在该部分时

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

在 iphone 上，它看起来完全不同，几乎就像它被切成两半（可怕），我想知道为什么会发生这种情况以及发生了什么变化，边距或填充是否与它有任何关系。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:22:01.027

您要做的是使用流体网格，这基本上意味着在包装器上使用一类行流体而不是行。

# prolog - Sicstus Prolog：纸牌查询

> ID：11883842
> 
> 赞同：1
> 
> 时间：2012-08-09T12:50:10.113
> 
> 标签：prolog, playing-cards

我正在解决这个问题：

在四人桥牌游戏中，每个玩家得到 13 张牌，按顺序发牌。编写一个谓词`deal(Cards, H1, H2, H3, H4)`，将一副牌作为其第一个参数，并通过绑定`H1`到玩家 1 在交易中收到的 13 张牌等成功。

提示：一种策略是编写四个辅助谓词`deal1`来处理玩家 1、`deal2`处理玩家 2 等。

这是给出的代码：

```
cards(ace).
cards(deuce).
cards(three).
cards(four).
cards(five).
cards(six).
cards(seven).
cards(eight).
cards(nine).
cards(ten).
cards(jack).
cards(queen).
cards(king).

suits(spades).
suits(hearts).
suits(clubs).
suits(diamonds).

deck([(ace,spades),(deuce,spades),(three,spades),(four,spades),
    (five,spades),(six,spades),(seven,spades),(eight,spades),
    (nine,spades),(ten,spades),(jack,spades),(queen,spades),
    (king,spades),
    (ace,hearts),(deuce,hearts),(three,hearts),(four,hearts),
    (five,hearts),(six,hearts),(seven,hearts),(eight,hearts),
    (nine,hearts),(ten,hearts),(jack,hearts),(queen,hearts),
    (king,hearts),
    (ace,clubs),(deuce,clubs),(three,clubs),(four,clubs),
    (five,clubs),(six,clubs),(seven,clubs),(eight,clubs),
    (nine,clubs),(ten,clubs),(jack,clubs),(queen,clubs),
    (king,clubs),
    (ace,diamonds),(deuce,diamonds),(three,diamonds),(four,diamonds),
    (five,diamonds),(six,diamonds),(seven,diamonds),(eight,diamonds),
    (nine,diamonds),(ten,diamonds),(jack,diamonds),(queen,diamonds),
    (king,diamonds)]). 
```

这是我的答案：

```
deal([],[],[],[],[]).

deal([C1,C2,C3,C4|Cards],[C1|H1],[C2|H2],[C3|H3],[C4|H4]) :-
    deal(Cards,H1,H2,H3,H4). 
```

我几乎可以肯定我的答案是正确的，但我在查询时遇到了问题。

```
?- deal(deck,A,B,C,D). 
```

查询返回`fail`，但放入实际的卡片列表，而不是`deck`工作。我认为问题出在我试图插入甲板的地方，当它不是一个列表时，但我不知道如何进入`deck`. 我是 Prolog 的新手，所以希望这只是一个简单的修复。谢谢

编辑：

添加以下建议后。我的新答案是

```
dealer([],[],[],[],[]).
dealer([C1,C2,C3,C4|Cards],[C1|H1],[C2|H2],[C3|H3],[C4|H4]) :-
    dealer(Cards,H1,H2,H3,H4).

deal(_,A,B,C,D) :-
    deck(Deck),
    dealer(Deck,A,B,C,D). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:57:51.497

我认为问题在于这`deck`不是一个列表，而是一个 arity 1 的谓词，其唯一参数与所有卡片的列表匹配。

尝试：

```
deck(Deck),
deal(Deck,A,B,C,D). 
```

因此，您需要通过使用未绑定的变量`deck`调用来获取 Deck 列表`deck`，然后使用该新绑定的变量来调用`deal`.

# r - 在 ggplot2 直方图中的图例下插入表格

> ID：11883844
> 
> 赞同：28
> 
> 时间：2012-08-09T12:50:17.750
> 
> 标签：r, ggplot2

无论如何让grid.arrange（）充当split.screen（）？我想安排一张桌子直接位于图例下方。

```
#create histogram
my_hist<-ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar()

#create inset table
my_table<- tableGrob(head(diamonds)[,1:3],gpar.coretext =gpar(fontsize=8),gpar.coltext=gpar(fontsize=8), gpar.rowtext=gpar(fontsize=8))

grid.arrange(my_hist,my_table, ncol=2) 
```

产生：

![在此处输入图像描述](../Images/4c6a75db4f76a3e2bf86f947543cef98.png)

但我希望它看起来大致像这样：

![在此处输入图像描述](../Images/3d32f016554e034268f637b349efdeb7.png)

我试过 split.screen () 但它似乎不适用于 ggplot 类型的图形。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T14:49:41.603

Dickoa 的回答非常简洁。我的让你对元素有更多的控制。

```
my_hist <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar()

#create inset table
my_table <- tableGrob(head(diamonds)[,1:3], gpar.coretext = gpar(fontsize=8), gpar.coltext=gpar(fontsize=8), gpar.rowtext=gpar(fontsize=8))

#Extract Legend
g_legend <- function(a.gplot){
  tmp <- ggplot_gtable(ggplot_build(a.gplot))
  leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
  legend <- tmp$grobs[[leg]]
  return(legend)}

legend <- g_legend(my_hist)

#Create the viewports, push them, draw and go up
grid.newpage()
vp1 <- viewport(width = 0.75, height = 1, x = 0.375, y = .5)
vpleg <- viewport(width = 0.25, height = 0.5, x = 0.85, y = 0.75)
subvp <- viewport(width = 0.3, height = 0.3, x = 0.85, y = 0.25)
print(my_hist + opts(legend.position = "none"), vp = vp1)
upViewport(0)
pushViewport(vpleg)
grid.draw(legend)
#Make the new viewport active and draw
upViewport(0)
pushViewport(subvp)
grid.draw(my_table) 
```

![在此处输入图像描述](../Images/877df218f3fc5f412f5ab5387be87d8c.png)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-09T14:06:36.180

首先你应该看一下这个[Wiki](https://github.com/baptiste/gridextra/wiki/arranging-ggplot)，有很多例子（看一下arrangeGrob 一个）。所以使用这些例子，我设法得到了这个解决方案

```
require(gridExtra)
require(ggplot2)

## original graph
my_hist <- ggplot(diamonds, aes(clarity, fill=cut)) + geom_bar()

## get the legend 
tmp <- ggplot_gtable(ggplot_build(my_hist))
leg <- which(sapply(tmp$grobs, function(x) x$name) ==  "guide-box")
legend <- tmp$grobs[[leg]]

## create inset table
my_table <- tableGrob(head(diamonds)[,1:3],gpar.coretext =gpar(fontsize=8),gpar.coltext=gpar(fontsize=8), gpar.rowtext=gpar(fontsize=8))

### final result 
grid.arrange(my_hist + opts(legend.position = "none"), arrangeGrob(legend, my_table), ncol = 2) 
```

![在此处输入图像描述](../Images/d5d766eec724d6e1468bb9eb1bcf4790.png)

# asp.net - 在弹出窗口中仅在 5 秒内刷新网格视图

> ID：11883853
> 
> 赞同：0
> 
> 时间：2012-08-09T12:50:51.527
> 
> 标签：asp.net

我在网站母版页上有一个弹出窗口。在此弹出窗口中，仅显示一个网格视图。当弹出窗口打开时，我只想在 5 秒内刷新网格，当它关闭时停止刷新。

我在 5 秒内在刻度事件绑定网格上使用了 asp Timer，但它正在刷新整个页面。

注意：我只想刷新网格而不是整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:56:05.590

用 ajax 面板和时间控制包裹网格并使其成为模式`conditional`。

如果您有包装整个页面内容的 ajax 面板，那么它将刷新整个页面。更新面板的默认模式是`always`导致整个页面刷新。关于更新面板模式的[**模式**](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.updatemode.aspx)

```
 <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server"> 
```

# audio - 在没有声卡的情况下通过 SIP 播放声音

> ID：11883864
> 
> 赞同：2
> 
> 时间：2012-08-09T12:51:46.600
> 
> 标签：audio, sip, voip

是否可以在 SIP 客户端计算机上未安装声卡的情况下通过 VOIP (SIP) 播放自定义音频（*.wav 文件）？我只需要执行 SIP 呼叫和播放自定义声音消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T13:00:31.297

如果首先将其转换为适当的编解码器，则可以通过 SIP 信号以 WAV 文件的形式传输录制的音频。这不需要声卡来传输此音频。只需要声卡来收听音频。使用哪种编解码器取决于平台。这是[使用 Asterisk 时转换为适当编解码器的链接](http://www.voip-info.org/wiki/view/Convert+WAV+audio+files+for+use+in+Asterisk)。如果您只是 Google 诸如“音频编解码器转换”之类的东西，还有更多。

一种更简单的方法是仅使用为您执行此操作的平台，例如[Voxeo Prophecy](http://www.voxeo.com/products/voicexml-ivr-platform.jsp)。这是一个纯软件 IVR 解决方案，免费提供 2 端口版本。[使用开放标准VoiceXML](http://www.w3.org/TR/voicexml20/)很容易安装和编程。它将播放以 WAV 文件格式录制的音频文件，电话接口为 SIP。

# mysql - Sphinx 主/增量索引，sql_query_killlist

> ID：11883865
> 
> 赞同：3
> 
> 时间：2012-08-09T12:51:47.697
> 
> 标签：mysql, sphinx, delta

我目前正在使用 Sphinx 为具有 20+ 百万条记录的 MySQL 查询建立索引。

我正在使用增量索引来更新主索引并添加所有新记录。

不幸的是，对表的所有更改都被删除了。

我知道我可以使用 sql_query_killlist 来获取所有需要删除或更新的文档 ID。不幸的是，我不明白这实际上是如何工作的，Sphinx 的文档没有足够好的例子让我理解。

如果我使用以下示例，我该如何实现 killlist？

在 MySQL 中

```
CREATE TABLE sph_counter
(
    counter_id INTEGER PRIMARY KEY NOT NULL,
    max_doc_id INTEGER NOT NULL
); 
```

在 sphinx.conf 中

```
source main
{
    # ...
    sql_query_pre = SET NAMES utf8
    sql_query_pre = REPLACE INTO sph_counter SELECT 1, MAX(id) FROM documents
    sql_query = SELECT id, title, body FROM documents \
        WHERE id<=( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
}

source delta : main
{
    sql_query_pre = SET NAMES utf8
    sql_query = SELECT id, title, body FROM documents \
        WHERE id>( SELECT max_doc_id FROM sph_counter WHERE counter_id=1 )
} 
```

索引主要

```
{
    source = main
    path = /path/to/main
    # ... all the other settings
} 
```

请注意所有其他设置是如何从 main 复制的，但是 source 和 path 被覆盖（它们必须是） index delta : main

```
{
    source = delta
    path = /path/to/delta
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T18:14:50.320

具体细节很大程度上取决于您如何标记已删除的文档。但只会添加类似的东西

```
 sql_query_killist = SELECT id FROM documents 
                     WHERE status='deleted' 
                           AND id<=( SELECT max_doc_id FROM sph_counter 
                                     WHERE counter_id=1 ) 
```

到*增量*索引。这将捕获主索引中已删除记录的 id，并将它们添加到 killlist 中，这样它们就不会出现在搜索结果中。

如果要捕获更新的记录，需要安排将新行包含在增量的主 sql_query 中，并将它们的 id 放在 kill-list 中。

# php - 根据php中的部分文件名对目录中的文件进行排序

> ID：11883870
> 
> 赞同：0
> 
> 时间：2012-08-09T12:51:57.660
> 
> 标签：php, regex, cakephp, glob

我正在使用[glob()](http://php.net/manual/en/function.glob.php) php 函数在目录中查找文件。结果我得到以下数组：

```
Array
(
[0] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-0.jpeg
[1] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-1.jpeg
[2] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-10.jpeg
[3] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-11.jpeg
[4] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-2.jpeg
[5] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-3.jpeg
[6] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-4.jpeg
[7] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-5.jpeg
[8] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-6.jpeg
[9] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-7.jpeg
[10] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-8.jpeg
[11] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-9.jpeg
) 
```

我想要的是“根据文件名的部分文本对文件进行排序”。与上面的数组一样，当您可能意识到我应该期望结果被排序为`...-0.jpeg, ...-1.jpeg, ...-2.jpeg`not时`...-0.jpeg, ...-1.jpeg, ...-10.jpeg`。

我期待以下结果：

```
Array
(
[0] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-0.jpeg
[1] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-1.jpeg
[2] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-2.jpeg
[3] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-3.jpeg
[4] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-4.jpeg
[5] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-6.jpeg
[7] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-7.jpeg
[8] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-8.jpeg
[9] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-9.jpeg
[10] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-10.jpeg
[11] => D:\xampp\htdocs\myproject\app\webroot\batch\temp\file_2012-08-09-11.jpeg
) 
```

请帮助，我如何使用带/不带正则表达式的 PHP 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:57:15.570

使用*使用“自然顺序”算法对数组进行排序的*`natsort`函数

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:13:15.507

由于您将所有字符串都放在一个数组中，因此只需使用 php 的内置函数`[sort()](http://php.net/manual/en/function.sort.php)`。

它会像这样工作：

```
sort($array); 
```

由于所有文件都在同一个目录中，这应该可以解决您的错误顺序。如果没有，你也可以试试这个：

```
//Get rid of directory
foreach($array as $key=>$value){
    $value=str_replace('D:\xampp\htdocs\myproject\app\webroot\batch\temp\\','',$value); //Watch out, the last backslash has to be escaped with another backslash, otherwise the string will not end
}

//Sort only the filenames
$sort($array);

//Prepend directory again
foreach($array as $key=>$value){
    $value='D:\xampp\htdocs\myproject\app\webroot\batch\temp\\'.$value;
} 
```*

# arrays - 如何使用.net将查询字符串值存储在数组中

> ID：11883872
> 
> 赞同：0
> 
> 时间：2012-08-09T12:52:11.690
> 
> 标签：arrays, string, vb.net-2010, querystringparameter

我正在使用当前页面 aspx 作为 url。我在我的页面 url 中传递查询字符串。我的代码用于拆分查询字符串并写入屏幕。我在页面加载方法中编写代码。

```
my code
------
 Dim strarr() As String
    Dim key
    For Each key In Request.QueryString
        Response.Write(key & ": " & Request.QueryString(key) & "<BR>")

    Next

output
------
http://localhost:54592/vicidial_project/Default.aspx?a=1&b=2(in run time am passing query string to that url)

a:1
b:2

the query string values are displayed in the screen like above.

my question
-----------
i want to store that query string value into an array . am using the code like this

code
-----
 Dim strarr() As String
    Dim key
    For Each key In Request.QueryString
        Response.Write(key & ": " & Request.QueryString(key) & "<BR>")
       strarr = key & ": " & Request.QueryString(key)

    Next

error
-----
 am getting error in this line
 strarr = key & ": " & Request.QueryString(key) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:16:21.647

为什么不将键声明为字符串？你可以这样做：

```
For Each key as String in Request.QueryString
   ...
Next 
```

# c# - PostSharp 与 MbUnit：TypeLoadException

> ID：11883874
> 
> 赞同：0
> 
> 时间：2012-08-09T12:52:15.323
> 
> 标签：c#, aop, postsharp, mbunit, gallio

我有一个带有 WPF GUI 项目的小型解决方案，库项目中的一些业务逻辑和使用 MbUnit/Gallio 的测试项目。到目前为止一切正常。

在我通过 NuGet 在当前版本 2.1.6.4 中将[PostSharp Diagnostics Toolkit for Log4Net](http://nuget.org/packages/PostSharp-Diagnostics-Toolkit-Log4Net)添加到我的 GUI 和库项目后，我无法在我的两个测试程序集中之一中运行测试。我总是得到一个`TypeLoadException`whithout 告诉我*什么*类型无法加载。使用 Gallio Echo、Gallio Icarus 或 Visual Studio 测试运行程序没有任何区别。

所以我玩了一下，也将 PostSharp-Diagnostics-Toolkit-Log4Net 添加到了测试项目中。现在，当我尝试运行测试时，我得到一个 PostSharp-has-crashed-message-box，我可以查看错误详细信息。以下有趣的部分用德语告诉我`PostSharp.Toolkit.Diagnostics.LogLevel`无法加载该类型。但我不知道如何解决这个问题。

尽管我的另一个测试项目仍然可以正常工作，并且两个测试项目（当然）都不包含复杂的东西。运行失败的项目有一个对[agsXMPP](http://www.ag-software.de/agsxmpp-sdk/)的引用，该引用仅用于断言已设置 xmpp 连接对象上的某些属性。我已经尝试删除这个引用以及这些断言，但是这个项目中的所有测试仍然失败，并且`TypeLoadException`.

任何人的想法？

> System.TypeLoadException Der Typ "PostSharp.Toolkit.Diagnostics.LogLevel" in der Assembly "PostSharp.Toolkit.Diagnostics, Version=2.1.0.0, Culture=neutral, PublicKeyToken=null" konnte nicht geladen werden。PostSharp.Toolkit.Diagnostics.Weaver.Log4Net 在 # path:Zeile 11\. bei PostSharp.Toolkit.Diagnostics.Weaver.InstrumentationPlugIn.GetBackend(String loggingBackendName) in #path:Zeile 61\. bei PostSharp.Toolkit.Diagnostics.Weaver.InstrumentationPlugIn.InitializeBackend() in #path:Zeile 40\. bei PostSharp.Toolkit.Diagnostics.Weaver.InstrumentationPlugIn.get_Backend() in #path:Zeile 25\. bei PostSharp.Toolkit.Diagnostics.Weaver.Logging。`1 _2) bei PostSharp.Sdk.AspectWeaver.AspectWeaverTask.^5UGcBAoN.^qmgrNmSI(IMetadataDeclaration _0, AspectInstanceInfo _1) bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary`1.^lNgKC+Z4(IMetadataDeclaration _0, Func `3 _1) bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary`1.^RdBVqi#path bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary `1.^d+wOzSPF(IMetadataDeclaration _0, Func`2 _1) bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary `1.^+g+TCqVg(TypeDefDeclaration _0, Func`2 _1, Set `1 _2) bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary`1.^fJqG(Func `2 _0) bei PostSharp.Sdk.AspectInfrastructure.StructuredDeclarationDictionary`1.^fJqG (Func`3 _0) 北 PostSharp.Sdk.AspectWeaver.AspectWeaverTask.Execute() 北 PostSharp.Sdk.Extensibility.Project.ExecutePhase(String phase) 北 PostSharp.Sdk.Extensibility.Project.Execute() 北 PostSharp.Hosting.PostSharpObject .ExecuteProjects() 位于 PostSharp.Hosting.PostSharpObject.InvokeProject(ProjectInvocation projectInvocation)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:25:23.157

我仍然不知道出了什么问题，但是通过 Visual Studio 中的 NuGet 包管理器卸载并重新安装 PostSharp Diagnostics Toolkit for Log4Net 并解决了问题。

# facebook-fql - 如何使用 FQL 获取用户标记的所有签到

> ID：11883877
> 
> 赞同：1
> 
> 时间：2012-08-09T12:52:25.243
> 
> 标签：facebook-fql, facebook-checkins

使用图形 api 可以做到：

```
https://graph.facebook.com/me/checkins 
```

但是我应该如何使用 FQL 呢？我试过[这个](http://facebook.stackoverflow.com/questions/6861930/facebook-fql-get-all-checkins-me-is-tagged-in)，这表明：

```
SELECT message FROM checkin WHERE author_uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) 
AND me() IN tagged_uids 
```

但它甚至不返回一个结果。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T02:59:46.123

据我所见，`IN`似乎不适用于`me()`. 您必须首先获取用户 ID 并将其分配给变量。这会引发 OAuth 异常：

```
SELECT message FROM checkin WHERE author_uid = me() OR me() IN tagged_ids 
```

但如果您设置`[UserId]`为当前用户的 id，则此方法有效：

```
SELECT message FROM checkin WHERE author_uid = [UserId] OR [UserId] IN tagged_ids 
```

您不需要使用`friend`子查询。FQL 将仅返回对您的用户可见的签到。

为此，请确保您`access_token`同时拥有`user_checkins`和`friends_checkins`权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:31:53.633

@cpilko 提供了一个解决方案，但我找到了另一个解决方案，所以我在这里添加它作为任何访问此页面的人的参考：

```
SELECT id FROM location_post WHERE ([UserId] IN tagged_uids OR author_uid=me()) AND strpos(type,"checkin")>=0 
```

# android - 在android代码上路由中途点

> ID：11883879
> 
> 赞同：1
> 
> 时间：2012-08-09T12:52:30.330
> 
> 标签：android, google-maps

我画过这样的线

我使用下面的代码找到了中点，

```
 public void midPoint(double lat1,double lon1,double lat2,double lon2){

        double dLon = Math.toRadians(lon2 - lon1);

        lat1 = Math.toRadians(lat1);
        lat2 = Math.toRadians(lat2);
        lon1 = Math.toRadians(lon1);

        double Bx = Math.cos(lat2) * Math.cos(dLon);
        double By = Math.cos(lat2) * Math.sin(dLon);
        finalLat= Math.toDegrees(Math.atan2(Math.sin(lat1) + Math.sin(lat2), Math.sqrt((Math.cos(lat1) + Bx) * (Math.cos(lat1) + Bx) + By * By)));
        finalLng= Math.toDegrees(lon1 + Math.atan2(By, Math.cos(lat1) + Bx));
    } 
```

它的成功工作..

![在此处输入图像描述](../Images/07f433292c49b8ce97129dd57f3f8a0a.png)

但我无法找到“R”- 路线中途点。，如何在 android 上找到路线中途点。我在网上搜索过，我找到了[https://gis.stackexchange.com/questions/18584/how-to-find-a-point-half-way-between-two-other-points](https://gis.stackexchange.com/questions/18584/how-to-find-a-point-half-way-between-two-other-points)。但在这种方法中，为 x、y、z 分配了哪些值。我不知道。

或任何其他代码在 android 上找到 Route 中途。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T19:06:56.497

如果你自己画线，我假设你正在画线段，例如在图像上方的第一条线段垂直（北？）在图像上，第二条线段水平（东？）。如果是这样，那么计算线段的总距离应该是一个简单的问题，找到中间距离，然后按特定顺序减去线段长度，直到你不能 - 剩下的一点是到沿当前线段的中点。

# perl - 匹配二维数组中的值

> ID：11883880
> 
> 赞同：0
> 
> 时间：2012-08-09T12:52:36.057
> 
> 标签：perl, awk, matching

```
#!/usr/bin/perl

my $file = $ARGV[0];
my $value = $ARGV[1];

my @grabbed;

open (FILE, $file);

while (<FILE>) {
    if (/alignment#  residue#/) {
            push @grabbed, $_;
            while (<FILE>) {
            last if /^$/;
            push @grabbed, $_;
            }
    }
}
close (FILE);

my $line= `awk '  {if(\$2==$value)} ' @grabbed`;

print $line; 
```

问题 ：

1.首先，我不知道是否可以在数组上执行 awk？2\. 我正在尝试匹配一个存在于二维数组 (@grabbed) 的第二列中的值。@grabbed 将如下所示：

```
 7         1         M     1.000         6                .VPMLG     66.63
     8         2         S     1.000        10            .QINTSARKG     66.63
     9         3         V     1.000        13         .KTAVFPRGQMSL     66.63
    10         4         L     1.000         7               .SLAKFT     66.63
    11         5         L     1.000        14        .ALSVQWIKMRYPF     66.63
    12         6         R     1.000        16      .DERSAVGTNQLYMIP     66.63
    13         7         S     1.000        18    .GDTHPKRSALFCIQVYN     66.63
    14         8         G     1.000        17     .DRFLENGAQPSTYCHM     66.63
    15         9         L     1.000        19   .NDHPELASVKRCWFGTQI     66.63
    16        10         G     1.000        18    .RLDPEGFTYAVCIKNMH     66.63 
```

我正在尝试匹配并抓住第 2 列值为“9”的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:03:57.023

无需切换到`awk`何时可以完成这项工作`perl`。

```
for ( @grabbed ) {
    my @f = split;
    if ( $f[1] == $value ) {
        push @line, $_;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T13:13:46.740

看来“二维数组”是指一个字符串数组，每个字符串都是一个以空格分隔的值列表。

Perl 就是为这种事情而生的。您可以使用其他答案的建议来拆分每一行并查看每个值；但是，简单的正则表达式会更快。用这样的东西替换你的 awk 行：

```
foreach (@grabbed)
{
     #Match the beginning of the line, possibly some whitespace, 
     #then some digits, then more whitespace, then the contents of $value
     if (/^\s*\d+\s+$value/)
     {
          #The line matched: do stuff
     }
} 
```

此外，您是否需要查看不匹配的行？如果没有，不将整个文件放入数组中会更有效；相反，只需在`while`循环中进行所有处理。

# php - preg_match 删除禁止字符？

> ID：11883883
> 
> 赞同：1
> 
> 时间：2012-08-09T12:52:45.090
> 
> 标签：php, regex, preg-match

我正在尝试从字符串中删除禁止的字符。

```
$forbidden = array( "<", ">", "{", "}", "[", "]", "(", ")", "select", "update", "delete", "insert", "drop", "concat", "script");
foreach ($forbidden as $forbidChar) {
    if (preg_match("/$forbidChar/i", $string)) {
        return TRUE;
    }
    return FALSE;
} 
```

但它没有按预期工作，我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:58:38.160

您可以使用这样的单个正则表达式来执行此操作：

```
$forbidden = array(
            "<", ">", "{", "}", "[", "]", "(", ")",
            "select", "update", "delete", "insert", "drop", "concat", "script");
$forbidden = array_map( 'preg_quote', $forbidden, array_fill( 0, count( $forbidden), '/'));
return (bool) preg_match( '/' . implode( '|', $forbidden) . '/', $string); 
```

这正确地转义了所有字符`preg_quote()`，并形成一个正则表达式来测试所有情况。

[注意：我还没有测试过，但它应该可以工作。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:02:43.900

你需要转义角色`"[", "]", "(", ")" with "\[", "\]", "\)", "\)"`

这是工作代码，

```
<?php 
$string = "dfds fdsf dsfs fkldsk  select dsasd asdasd";
$forbidden = array(
            "<", ">", "{", "}", "\[", "\]", "\(", "\)",
            "select", "update", "delete", "insert", "drop", "concat", "script");
   foreach ($forbidden as $forbidChar) {
        if (preg_match("/$forbidChar/i", $string)) {
            exit('Forbidden char dtected');
            return TRUE;
        }
        return FALSE;
    }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:53:30.453

`preg_replace()`如果要替换字符，则需要使用。**不是** `preg_match()`。

您可能还想确保使用`preg_quote()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:58:07.537

您可以使用 performanter [string_replace](http://de2.php.net/manual/en/function.str-ireplace.php)函数来执行此操作

```
<?php
   $forbidden = array(
        "<", ">", "{", "}", "[", "]", "(", ")",
        "select", "update", "delete", "insert", "drop", "concat", "script");

    $cleanString = str_ireplace($forbidden, "", $string);
?> 
```

# javascript - 用 jQuery 模糊指定的类

> ID：11883884
> 
> 赞同：0
> 
> 时间：2012-08-09T12:52:46.227
> 
> 标签：javascript, jquery, blur

我不知道这是否可以实现，但我正在寻找解决方案，以在单击一个按钮时模糊一类。我想要这个，因为它的模态弹出框架实际上在后面的所有文本中看起来并不好看。

```
<div id="contentField" class="contentField-fix">
   <h2 id="postComment">Loads of text in here</h2>
</div>
<div id="modal"></div> 
```

所以我想做的是运行“modal”的“onClick of Proceed div”，以模糊“contentField-fix”类中的所有内容。可能的？

如果没有，我想我需要尝试其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:58:58.880

使用[BlurJS](http://blurjs.com/)

```
$('.contentField-fix').blurjs({
    source: 'body',  // Blur with the body as the background.
                     // You can specifify other elements as source.
    radius: 10, // Higher values for more blur
}); 
```

# drupal - Drupal 7 分类术语的批量更新

> ID：11883885
> 
> 赞同：2
> 
> 时间：2012-08-09T12:52:47.787
> 
> 标签：drupal, drupal-7, drupal-taxonomy

我的 Drupal 7 站点有一些多余的分类结构，分类术语“文章”和“文档”被同义使用。因此，大量（数百个）节点同时应用了“文章”和“文档”术语。我想要做的是“分离”这些术语在它们之间随机打乱节点，因此当前标记为“文章”和“文档”的节点中约有一半将只有“文章”术语，另一半只会标记为“文档” .

解决这个问题的最佳方法是什么？是否有用于批量更新节点添加/删除分类术语的模块？我最好直接更新数据库吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-29T14:41:39.950

我找到了一个解决方案：

我安装了“[管理视图](https://www.drupal.org/project/admin_views)”模块（需要：视图、混沌工具、视图批量操作、实体 API - 链接位于依赖项下的模块页面上）。

从那里选择要更改的节点，然后在“操作”下拉列表中选择“更改值”并点击执行。例如，在“类型 {your nodetype} 的字段”下，您可以单击“标签”并输入新值以覆盖全部 - 或者单击“将新值添加到标签，而不是覆盖现有值”。并且该值将被添加。

事实证明，以这种方式添加标签，每个更新的节点都会添加新标签 - 因此，如果您编辑 20 个节点并添加标签“stackoverflow”，术语列表中将有 20 个称为“stackoverflow”的标签。[然后，您可以使用“术语合并](https://www.drupal.org/project/term_merge)”将重复项合并为一个最终术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T05:37:54.460

分类管理器是用于这些目的的一个非常好的模块，我自己用它来标记和添加词汇表到我有 100 多个帖子的网站。它的界面也非常直观和用户友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:40:54.413

由于您需要批量更新分类结构，您可以使用 - Taxonomy Manager [http://drupal.org/project/taxonomy_manager/](http://drupal.org/project/taxonomy_manager/) 除了其他功能之外 -

*   动态树视图
*   批量删除
*   大量添加新术语
*   在层次结构中移动术语

您还可以查看类似的问题 - [https://drupal.stackexchange.com/questions/11494/adding-taxonomy-terms-to-multiple-nodes-at-once](https://drupal.stackexchange.com/questions/11494/adding-taxonomy-terms-to-multiple-nodes-at-once)

如果没有任何帮助，更新数据库肯定看起来是一个更简单的选择，但只有在您非常确定您的查询时才使用它，并且不要忘记在之前进行备份.. :)

# javascript - jQuery 1.7.2 在 IE8 中不工作。在其他浏览器中工作

> ID：11883891
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:53:09.933
> 
> 标签：javascript, jquery, asp.net-mvc, internet-explorer-8

**解决方案 2012 年 8 月 9 日 9:54 EDT**
令人尴尬的是，我们能够追踪浏览器设置的问题。活动脚本被禁用。感谢所有发帖的人。我感谢您的时间和精力。~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

我最近开始开发一个新的 MVC3 应用程序，我们使用的是 jQuery 1.7.2。目前我们的代码适用于 Chrome、Firefox 和 IE7 & 9。不幸的是它不适用于 IE8。我们尝试使用什么 jQuery 函数（鼠标悬停、鼠标悬停、悬停、单击等）并不重要。

到目前为止，我已经尝试了以下方法，但没有任何运气。

*   使用对 jQuery 和 js 文件的绝对路径引用
*   将 js 代码直接移动到 _Layout.cshtml
*   验证类型=“文本/javascript”
*   将代码简化为 Alert("any text"); 并在备用浏览器中验证
*   添加背景颜色
*   删除对“Menu.js”的引用以测试 Shared.js 中非常简单的代码是否有效

我试图让 .hover 动作在 _ActionItems 部分视图上工作。用于此的 jQuery 在 Menu.js 中。我想如果我能让它工作，其余的可能会有一个我能想出的类似解决方案。

如果您还有什么需要看的，请告诉我。在此先感谢您的帮助。

**_Layout.cshtml**

```
@using eRecruitBoard.ExtensionMethods
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic' rel='stylesheet' type='text/css'/>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.7.2.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Shared.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/Menu.js")" type="text/javascript"></script>
</head>
<body>
    <div class="wrapper">
            <div class="aboveHeader">
                <div class="aboveHeaderLeft">@Html.Partial("_ERBLogo")</div>

                <div class="aboveHeaderRight">
                    <div class="ERBESBButtons">@Html.Partial("_ERBESBButtons")</div>
                    <div class="welcome">@Html.Partial("_Welcome")</div>
                </div>
            </div>
            <div class="headerBar">
                <div class="headerActions">@Html.Partial("_ActionItems")</div>
                <div class="headerMenu">@Html.Action("Menu", "Menu")</div>
                <div class="headerTitle">@Html.Action("HeaderTitle","Segment")</div>
            </div>
        <div class="content">
            @RenderBody()
        </div>
        <div class="Push"></div>
  </div>  
    <div class="footerWrapper">
        <div class="footer">
            <div class="footerLeft"></div>
            <div class="footerRight"></div>
            <div class="footerRightContent">@Html.ActionLink("Privacy Policy", "PrivacyPolicy", "Home")</div>
            <div class="footerLeftContent">&copy; Copyright 2012 - All Rights Reserved</div>
        </div>
    </div>
</body>
</html> 
```

**_ActionItems.cshtml**

```
@if (eRecruitBoard.WebLibrary.CommonFunctions.IsAuthenticated)
{
@Html.ImageActionLink("../../Images/Header/FavoriteIcon.png", "FavoritesIcon", "Add", "Favorites", null, null, new { @class = "over", title="Add to favorites", style="border:0;" })<text>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>
<img src="../../Images/Header/CalendarIcon.png" title="Schedule this report" alt="CalendarIcon" class="over"/><text>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>
<img src="../../Images/Header/EmailIcon.png" title="Email this report" alt="EmailIcon" class="over"/><text>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</text>
<img src="../../Images/Header/PrintIcon.png" title="Print" alt="PrintIcon" class="over"/>
}
else
{ 
} 
```

**Shared.js**

```
// Hover image
$(document).ready(function () {
    $(function () {
        $("img.over").each(function () {
            var t = $(this);
            var src1 = t.attr("src"); // initial src
            var newSrc = src1.substring(0, src1.lastIndexOf(".")); // let's get file name without extension
            t.hover(function () {
                $(this).attr("src", newSrc + "Over." + /[^.]+$/.exec(src1)); //last part is for extension   
            }, function () {
                $(this).attr("src", newSrc + "." + /[^.]+$/.exec(src1)); //removing 'Over' from the name
            });
        });
    });
}); 
```

**更新**- 我删除了 menu.js 代码，所以我可以添加浏览器源代码。我现在专注于 Shared.js 代码，因为它非常简单，即使 Menu.js 被完全删除也不会导致任何操作。

**浏览器源代码示例**- 请注意，这是我正在运行的测试之一，我将 jQuery 直接移动到页面上并添加了警报。无论如何，这也不起作用。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <title>eRecruitBoard</title>

    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic' rel='stylesheet' type='text/css'/>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/Scripts/jquery-1.7.2.js" type="text/javascript"></script>

    <script type="text/javascript"> 
// Hover image
$(document).ready(function () {
    $(function () {
$("#container").hover('',function(){ 
alert("Out"); 
});
    });
});

$(document).ready(function () {
    $(function () {
        $("img.over").each(function () {
            var t = $(this);
            var src1 = t.attr("src"); // initial src
            var newSrc = src1.substring(0, src1.lastIndexOf(".")); // let's get file name without extension
            t.hover(function () {
                $(this).attr("src", newSrc + "Over." + /[^.]+$/.exec(src1)); //last part is for extension   
            }, function () {
                $(this).attr("src", newSrc + "." + /[^.]+$/.exec(src1)); //removing 'Over' from the name
            });
        });
    });
});
</script>
</head>
<body>
    <div class="wrapper">

            <div class="aboveHeader">
                <div class="aboveHeaderLeft"><a href="/"><img alt="eRecruitBoard" src="../../Images/eRecruitBoardLogo.png" style="border:0;" /></a></div>

                <div class="aboveHeaderRight">
                    <div class="ERBESBButtons"><img src="../../Images/Header/ERBOn.png" alt="eRecruitBoard On"/><img src="../../Images/Header/ESBOff.png" alt="eScoreBoard Off"/>
</div>
                    <div class="welcome">Welcome Firstname Lastname&nbsp;&nbsp;&nbsp; 
<a href="/Admin/MyTeam">Admin</a>&nbsp;|&nbsp;
<a href="/Home/Logout">Logout</a></div>
                </div>
            </div>

            <div class="headerBar">
                <div class="headerActions"><a href="/Favorites/Add"><img alt="FavoritesIcon" class="over" src="../../Images/Header/FavoriteIcon.png" style="border:0;" title="Add to favorites" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img src="../../Images/Header/CalendarIcon.png" title="Schedule this report" alt="CalendarIcon" class="over"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img src="../../Images/Header/EmailIcon.png" title="Email this report" alt="EmailIcon" class="over"/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<img id="container" src="../../Images/Header/PrintIcon.png" title="Print" alt="PrintIcon" class="over"/>
</div>
                <div class="headerMenu"><img src="../../Images/Header/MenuIcon.png" id="MenuIcon" title="Click to open the menu" alt="MenuIcon" class="over"/>
<table class="menuTable" id="menuTableId"  cellspacing="0" cellpadding="0">
<thead>
<tr class="scrollUpArrow">
<th>
</th>
</tr>
</thead>

<tfoot>
<tr class="scrollDownArrow">
<td>
</td>
</tr>
</tfoot>

 <tbody id="contents" class="tablebody" style="overflow:hidden">
    <tr class="trmenuClass" id=favoritestrId>
    <td class="cellBackground">
    <div class="minusSign" id=favoritesMinusSignId>  
    <div class=favIcon id=divFavoritesid>
    <div class="cellName">

    Favorites
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="favtrClass" id="submenufavouritestrId">
    <td class="subMenuCell" id="idFavorites">
    <div class="subMenuCellName">
    1st name
    </div>
    </td>
    </tr>
    <tr class="favtrClass" id="submenufavouritestrId">
    <td class="subMenuCell" id="idFavorites">
    <div class="subMenuCellName">
    2nd name
    </div>
    </td>
    </tr>
    <tr class="favtrClass" id="submenufavouritestrId">
    <td class="subMenuCell" id="idFavorites">
    <div class="subMenuCellName">
    3rd name
    </div>
    </td>
    </tr>
    <tr class="trmenuClass" id=dashboardtrId>
    <td class="cellBackground">
    <div class="minusSign" id=dashboardMinusSignId>  
    <div class=dashboardIcon id=divDashBoardid>
    <div class="cellName">

    Dashboard
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="dashboardtrClass" id="submenudashboardtrId">
    <td class="subMenuCell" id="idDashboard">
    <div class="subMenuCellName">
    Dashboard Item 1
    </div>
    </td>
    </tr>
    <tr class="dashboardtrClass" id="submenudashboardtrId">
    <td class="subMenuCell" id="idDashboard">
    <div class="subMenuCellName">
    Dashboard Item 2
    </div>
    </td>
    </tr>
    <tr class="dashboardtrClass" id="submenudashboardtrId">
    <td class="subMenuCell" id="idDashboard">
    <div class="subMenuCellName">
    Dashboard Item 3
    </div>
    </td>
    </tr>
    <tr class="trmenuClass" id=connecttrId>
    <td class="cellBackground">
    <div class="minusSign" id=connectMinusSignId>  
    <div class=connectIcon id=divConnectid>
    <div class="cellName">

    Connect
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="connecttrClass" id="submenuconnecttrId">
    <td class="subMenuCell" id="idConnect">
    <div class="subMenuCellName">
    Joe Smith
    </div>
    </td>
    </tr>
    <tr class="connecttrClass" id="submenuconnecttrId">
    <td class="subMenuCell" id="idConnect">
    <div class="subMenuCellName">
    Erin Jones
    </div>
    </td>
    </tr>
    <tr class="connecttrClass" id="submenuconnecttrId">
    <td class="subMenuCell" id="idConnect">
    <div class="subMenuCellName">
    Owen Alexander
    </div>
    </td>
    </tr>
    <tr class="trmenuClass" id=hiretrId>
    <td class="cellBackground">
    <div class="minusSign" id=hireMinusSignId>  
    <div class=hireIcon id=divHireid>
    <div class="cellName">

    Hire
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="hiretrClass" id="submenuhiretrId">
    <td class="subMenuCell" id="idHire" >
    <div class="subMenuCellName">
    Clair Brown
    </div>  
    </td>
    </tr>
    <tr class="trmenuClass" id=retaintrId>
    <td class="cellBackground">
    <div class="minusSign" id=retainMinusSignId>  
    <div class=retainIcon id=divRetainid>
    <div class="cellName">

    Retain
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="retaintrClass" id="submenuretaintrId">
    <td class="subMenuCell" id="idRetain">
    <div class="subMenuCellName">
    some good employee name
    </div>
    </td>
    </tr>
    <tr class="trmenuClass" id=activityreportstrId>
    <td class="cellBackground">
    <div class="minusSign" id=activityreportsMinusSignId>  
    <div class=activityIcon id=divActivityReportsid>
    <div class="cellName">

    Activity Reports
    </div>
    </div>
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 1
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 2
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 3
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 4
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 5
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 6
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 7
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 8
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 9
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 10
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 11
    </div>
    </td>
    </tr>
    <tr class="activityreportstrClass" id="submenuactivityreportstrId">
    <td class="subMenuCell" id="idActivityReports">
    <div class="subMenuCellName">
    Activity report 12
    </div>
    </td>
    </tr>

</tbody>

</table>
</div>
                <div class="headerTitle"><img src="../../Images/Header/TitleArrow.png" alt="Arrow" style="vertical-align:top;"/>
<ul class="segmentControl">
</ul>
</div>
            </div>

        <div class="content">

<h2>Homepage</h2> - <a href="/Dashboard/All">Link to Dashboard/All</a>
        </div>
        <div class="Push"></div>
  </div>  

    <div class="footerWrapper">
        <div class="footer">
            <div class="footerLeft"></div>
            <div class="footerRight"></div>
            <div class="footerRightContent"><a href="/Home/PrivacyPolicy">Privacy Policy</a></div>
            <div class="footerLeftContent">&copy; Copyright 2012 - All Rights Reserved</div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:37:03.237

令人尴尬的是，我们能够将问题追溯到浏览器设置。活动脚本被禁用。

工具 > Internet 选项 > 安全 > 单击自定义级别按钮 > 向下滚动到脚本 > 活动脚本

感谢所有发帖的人。我感谢您的时间和精力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:07:41.787

尝试以下操作：

```
$(function () {
    $("#container").hover('',function(){ 
        alert("Out"); 
    });
    $("img.over").each(function () {
        var t = $(this),
            src1 = t.attr("src"),
            newSrc = src1.substring(0, src1.lastIndexOf("."));
        t.hover(function () {
            $(this).attr("src", newSrc + "Over." + /[^.]+$/.exec(src1));
        }, function () {
            $(this).attr("src", newSrc + "." + /[^.]+$/.exec(src1));
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T13:20:05.780

这里要注意的一件事是您在这些行中执行了两次 document.ready

```
$(document).ready(function () {
$(function () { // this line does the same as $(document).ready(function () { 
```

# php - 如何说服 xdebug 将文件输出为 HTML？

> ID：11883895
> 
> 赞同：0
> 
> 时间：2012-08-09T12:53:39.207
> 
> 标签：php, xdebug

我希望 xdebug 的跟踪功能以 .html 而不是 .xt 输出文件。这是`xdebug_start_trace`函数的参数：http: [//grahamwideman.wikispaces.com/PHP+trace+with+XDebug](http://grahamwideman.wikispaces.com/PHP+trace+with+XDebug) 我测试了它们，但它们不起作用。有没有办法使用 xdebug 输出 .html 格式的文件，并避免输入更多代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:06:16.737

你想要 xdebug.trace_format 设置，文档在这里：http: [//xdebug.org/docs/execution_trace](http://xdebug.org/docs/execution_trace)

不要忘记重新启动您的网络服务器以使新设置生效。

默认情况下，还有另一个分析器通过一个不错的 Web 界面提供其结果，也许您想尝试一下： [https ://github.com/facebook/xhprof](https://github.com/facebook/xhprof)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:07:28.593

你需要`xdebug.trace_format = 2`在你的 php.ini 中设置。

之后重新启动apache

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T22:08:51.910

到目前为止，最简单的方法是使用输出目录中的 .htaccess 文件，使用[AddType 指令](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)`xt`将 MIME 类型添加到具有扩展名的文件中。像这样：

```
AddType text/html .xt 
```

或者你也可以在你的 http.conf 中全局启用它：

```
<IfModule mod_mime.c>
     AddType text/html .xt
</IfModule> 
```

如果你有兴趣，我[在最近一篇关于配置 LAMP 服务器和 PhpStorm 以进行调试的文章中介绍了一些此类内容](http://www.mysolutions.it/phpstorm-server-xdebug-configuration/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T13:19:06.720

我以前做过，xdebug 用 html 代码制作了一个 .xt 文件

像 tr 和 td 和 ..raw html 代码
就是这样 [https://gist.github.com/057ffa704f21f645e086](https://gist.github.com/057ffa704f21f645e086)

我想制作一个 .html 文件以立即查看。我可以通过重命名 fun 来做到这一点，但我希望 xdebug 这样做

# c# - Parallel.For 循环冻结

> ID：11883897
> 
> 赞同：4
> 
> 时间：2012-08-09T12:53:43.070
> 
> 标签：c#, datatable, parallel-processing

我正在尝试在 Parallel 中向 DataTable 添加一些信息，但如果循环太长，它会冻结或只需要很长时间，然后是通常的 for 循环更多时间，这是我的 Parallel.For 循环代码：

```
Parallel.For(1, linii.Length, index =>
                 {
                     DataRow drRow = dtResult.NewRow();
                     alResult = CSVParser(linii[index], txtDelimiter, txtQualifier);

                     for (int i = 0; i < alResult.Count; i++)
                     {
                         drRow[i] = alResult[i];
                     }
                     dtResult.Rows.Add(drRow);
                 }
             ); 
```

怎么了？这个 Parallel.For 循环比正常循环花费更多的时间，有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:02:59.980

您不能`DataTable`从 2 个不同的线程中改变 a；它**会**出错。`DataTable`不*尝试*线程安全。所以：不要那样做。只需从一个线程执行此操作。很可能您受到 IO 的限制，因此您应该只在单个线程上将其作为流进行。看起来您正在处理文本数据。你似乎有一个`string[]`for 线，也许`File.ReadAllLines()`？好吧，这很糟糕：

1.  它迫使它全部加载到内存中
2.  你必须*等待*它全部加载到内存中
3.  CSV 是一种多行格式；不能保证 1 行 == 1 行

您*应该*做的是使用代码项目中的 CsvReader 之类的东西，但即使您想一次只使用一行，也请使用 StreamReader：

```
using(var file = File.OpenText(path)) {
    string line;
    while((line = file.ReadLine()) != null) {
        // process this line
        alResult = CSVParser(line, txtDelimiter, txtQualifier);

        for (int i = 0; i < alResult.Count; i++)
        {
            drRow[i] = alResult[i];
        }
        dtResult.Rows.Add(drRow);
    }
} 
```

使用不会更快，所以我***没有***`Parallel`尝试这样做。IO 是你的瓶颈。锁定是一种选择，但不会对您有很大帮助。

顺便说一句，我注意到`alResult`没有在循环内声明。这意味着在您的原始代码`alResult`中是一个在***所有***循环迭代之间共享的*捕获变量*- 这意味着您已经可怕地覆盖了每一行。

 ** * *

编辑：说明为什么`Parallel`与从文件中读取 1,000,000 行无关：

方法一：使用`ReadAllLines`加载行，然后使用`Parallel`处理；这花费了物理文件 IO 的 [固定时间]，**然后**我们进行并行化。CPU 工作量很小，我们基本上已经花费了[固定时间]。但是，我们增加了很多线程开销和内存开销，甚至在所有文件都加载完之后才能**开始。**

方法2：使用流式API；逐行读取每一行 - 处理每一行并添加它。这里的成本基本上又是：[固定时间]实际IO带宽加载文件。但; *我们现在没有线程开销，没有同步冲突，没有要分配的巨大内存，我们立即*开始填表。

方法 3：如果您*真的*想要，第三种方法是读取器/写入器队列，一个专用线程处理文件 IO 并将行排入队列，第二个处理`DataTable`. 坦率地说，它有更多的活动部件，第二个线程将花费 95% 的时间等待来自文件的数据；坚持方法2！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:01:04.187

```
Parallel.For(1, linii.Length, index =>
{
  alResult = CSVParser(linii[index], txtDelimiter, txtQualifier);

  lock (dtResult)
  {
    DataRow drRow = dtResult.NewRow();
    for (int i = 0; i < alResult.Count; i++)
    {
       drRow[i] = alResult[i];
    }
    dtResult.Rows.Add(drRow);
  }
}); 
```*

# c - epsilon 用于各种浮点值

> ID：11883900
> 
> 赞同：0
> 
> 时间：2012-08-09T12:53:47.110
> 
> 标签：c, floating-point-precision, epsilon

有一个`FLT_MIN`最接近于零的常数。如何最接近`some number`价值？

举个例子：

```
float nearest_to_1000 = 1000.0f + epsilon;
// epsilon must be the smallest value satisfying condition:
// nearest_to_1000 > 1000.0f 
```

我更喜欢不使用特殊函数的数字公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:19:54.913

`<math.h>`C 在标题中为此提供了一个函数。`nextafterf(x, INFINITY)`是 之后的下一个可表示值`x`，朝着 的方向`INFINITY`。

但是，如果您更愿意自己做：

假设 IEEE 754，以下返回您寻找的 epsilon，用于单精度（浮点）。请参阅底部有关使用库例程的说明。

```
#include <float.h>
#include <math.h>

/*  Return the ULP of q.

    This was inspired by Algorithm 3.5 in Siegfried M. Rump, Takeshi Ogita, and
    Shin'ichi Oishi, "Accurate Floating-Point Summation", _Technical Report
    05.12_, Faculty for Information and Communication Sciences, Hamburg
    University of Technology, November 13, 2005.
*/
float ULP(float q)
{
    // SmallestPositive is the smallest positive floating-point number.
    static const float SmallestPositive = FLT_EPSILON * FLT_MIN;

    /*  Scale is .75 ULP, so multiplying it by any significand in [1, 2) yields
        something in [.75 ULP, 1.5 ULP) (even with rounding).
    */
    static const float Scale = 0.75f * FLT_EPSILON;

    q = fabsf(q);

    /*  In fmaf(q, -Scale, q), we subtract q*Scale from q, and q*Scale is
        something more than .5 ULP but less than 1.5 ULP.  That must produce q
        - 1 ULP.  Then we subtract that from q, so we get 1 ULP.

        The significand 1 is of particular interest.  We subtract .75 ULP from
        q, which is midway between the greatest two floating-point numbers less
        than q.  Since we round to even, the lesser one is selected, which is
        less than q by 1 ULP of q, although 2 ULP of itself.
    */
    return fmaxf(SmallestPositive, q - fmaf(q, -Scale, q));
} 
```

以下返回在传递的值之后以浮点数表示的下一个值（将 -0 和 +0 视为相同）。

```
#include <float.h>
#include <math.h>

/*  Return the next floating-point value after the finite value q.

    This was inspired by Algorithm 3.5 in Siegfried M. Rump, Takeshi Ogita, and
    Shin'ichi Oishi, "Accurate Floating-Point Summation", _Technical Report
    05.12_, Faculty for Information and Communication Sciences, Hamburg
    University of Technology, November 13, 2005.
*/
float NextAfterf(float q)
{
    /*  Scale is .625 ULP, so multiplying it by any significand in [1, 2)
        yields something in [.625 ULP, 1.25 ULP].
    */
    static const float Scale = 0.625f * FLT_EPSILON;

    /*  Either of the following may be used, according to preference and
        performance characteristics.  In either case, use a fused multiply-add
        (fmaf) to add to q a number that is in [.625 ULP, 1.25 ULP].  When this
        is rounded to the floating-point format, it must produce the next
        number after q.
    */
#if 0
    // SmallestPositive is the smallest positive floating-point number.
    static const float SmallestPositive = FLT_EPSILON * FLT_MIN;

    if (fabsf(q) < 2*FLT_MIN)
        return q + SmallestPositive;

    return fmaf(fabsf(q), Scale, q);
#else
    return fmaf(fmaxf(fabsf(q), FLT_MIN), Scale, q);
#endif
} 
```

使用了库例程，但`fmaxf`（其参数的最大值）和`fabsf`（绝对值）很容易替换。`fmaf`应该编译为具有融合乘加的架构上的硬件指令。否则，`fmaf(a, b, c)`在此使用中可以替换为`(double) a * b + c`. （IEEE-754 binary64 有足够的范围和精度来替换`fmaf`. 其他选择`double`可能没有。）

fused-multiply add 的另一种替代方法是为不正常的情况添加一些测试`q * Scale`并单独处理这些情况。对于其他情况，乘法和加法可以用普通的`*`和`+`运算符分别进行。

# java - 为什么代码打印“测试”而不是 NullPointerException？

> ID：11883901
> 
> 赞同：-1
> 
> 时间：2012-08-09T12:53:46.757
> 
> 标签：java, nullpointerexception

> **可能的重复：**
> [Java 是“按引用传递”吗？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

为什么下面的代码打印“测试”而不是抛出一个`NullPointerException`？

```
public static void main(String[] args) {
    StringBuilder sb = new StringBuilder();
    sb.append("test");
    append(sb);
    System.out.println(sb.toString());
}

public static void append(StringBuilder sb) {
    sb = null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:56:10.080

`sb`您将方法中的局部变量设置`append()`为`null`- 这不会影响调用环境的变量，它保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:57:59.643

因为您的自定义附加模型不会将 sb 返回到父方法。因此`System.out.println(sb.toString());`只是在当前上下文中返回 sb 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T12:58:12.140

因为如果您为方法参数分配值，它*只会*在该方法的范围内维护新值。换句话说，如果你把它放在方法`System.out.println(sb)`里面，它会抛出一个 NPE `append`。

# python - 等到嵌套的 python 脚本结束后再继续当前的 python 脚本

> ID：11883903
> 
> 赞同：5
> 
> 时间：2012-08-09T12:53:53.047
> 
> 标签：python, module, system, subprocess

我有一个调用另一个 python 脚本的 python 脚本。在另一个 python 脚本中，它产生了一些线程。如何让调用脚本等到被调用脚本完全运行完成？

这是我的代码：

```
while(len(mProfiles) < num):
        print distro + " " + str(len(mProfiles))
        mod_scanProfiles.main(distro)
        time.sleep(180)
        mProfiles = readProfiles(mFile,num,distro)
        print "yoyo" 
```

如何等到 mod_scanProfiles.main() 和所有线程完全完成？（我现在使用 time.sleep(180) 但它不是一个好的编程习惯）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T13:10:05.073

您想修改代码`mod_scanProfiles.main`以阻塞，直到它的所有线程都完成。

假设您`subprocess.Popen`在该函数中进行调用，只需执行以下操作：

```
# in mod_scanPfiles.main:
p = subprocess.Popen(...)
p.wait() # wait until the process completes. 
```

如果您当前没有等待线程结束，您还需要调用`Thread.join`( [docs](http://docs.python.org/library/threading.html#threading.Thread.join) ) 来等待它们完成。例如：

```
# assuming you have a list of thread objects somewhere
threads = [MyThread(), ...]
for thread in threads:
    thread.start()
for thread in threads:
    thread.join() 
```

# c# - 将反序列化方法转换为异步

> ID：11883913
> 
> 赞同：10
> 
> 时间：2012-08-09T12:54:18.443
> 
> 标签：c#, serialization, asynchronous

我正在尝试使用 Async/Await 将这种反序列化对象的方法转换为字符串。

```
 public static T DeserializeObject<T>(string xml)
    {
        using (StringReader reader = new StringReader(xml))
        {
            using (XmlReader xmlReader = XmlReader.Create(reader))
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                T theObject = (T)serializer.ReadObject(xmlReader);
                return theObject;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T13:41:31.180

大多数序列化 API 没有`async`实现，这意味着你唯一能做的就是*包装*一个同步方法。例如：

```
public static Task<T> DeserializeObjectAsync<T>(string xml)
{
    using (StringReader reader = new StringReader(xml))
    {
        using (XmlReader xmlReader = XmlReader.Create(reader))
        {
            DataContractSerializer serializer =
                new DataContractSerializer(typeof(T));
            T theObject = (T)serializer.ReadObject(xmlReader);
            return Task.FromResult(theObject);
        }
    }
} 
```

这*实际上*不是异步的——它只是满足所需的 API。如果您可以选择，`ValueTask<T>`在结果可能通常是同步的/

无论哪种方式，您都应该能够执行以下操作：

```
var obj = await DeserializeObject<YourType>(someXml);
Debug.WriteLine(obj.Name); // etc 
```

无需知道实际实现是同步的还是异步的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T13:13:03.713

一个小样本，非常原始的方式：

```
 public delegate T Async<T>(string xml);

    public void Start<T>()
    {
        string xml = "<Person/>";
        Async<T> asyncDeserialization = DeserializeObject<T>;
        asyncDeserialization.BeginInvoke(xml, Callback<T>, asyncDeserialization);
    }

    private void Callback<T>(IAsyncResult ar)
    {
        Async<T> dlg = (Async<T>)ar.AsyncState;
        T item = dlg.EndInvoke(ar);
    }

    public T DeserializeObject<T>(string xml)
    {
        using (StringReader reader = new StringReader(xml))
        {
            using (XmlReader xmlReader = XmlReader.Create(reader))
            {
                DataContractSerializer serializer = new DataContractSerializer(typeof(T));
                T theObject = (T)serializer.ReadObject(xmlReader);
                return theObject;
            }
        }
    } 
```

您定义一个委托并使用它来使用回调开始/结束调用。

使用 C# 的下一个版本，您可以使用 async 关键字让您的代码异步运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-04T20:33:07.883

当您使用`string`作为数据源的数据源时，异步只会引入更多开销，而不会给您带来任何好处。

但是，如果您从流中读取，您可以从源流复制到`MemoryStream`（缓冲所有数据），然后从 反序列化`MemoryStream`，这会增加内存使用量，但会减少阻塞线程的时间。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-30T12:16:10.857

你可以退货

```
Task.FromResult(theObject) 
```

# android - 查看里面的吐司

> ID：11883914
> 
> 赞同：0
> 
> 时间：2012-08-09T12:54:19.083
> 
> 标签：android, toast

我想做一个吐司，在里面放了 EditText 和一个按钮 ..但是我不能在 EditText 中输入任何内容，我也不能单击按钮如何在 toast 所查看的 EditText 中写入内容..

```
public class MainActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button New=(Button)findViewById(R.id.button1);
        Button save=(Button)findViewById(R.id.button3);
        EditText ed1=(EditText)findViewById(R.id.editText1);

        final Toast t=new Toast(getApplicationContext());
        New.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            ListView l=new ListView(getApplication());
            l.setAdapter(new badp(getApplicationContext()));

            t.setGravity(Gravity.CENTER_VERTICAL, 0, 0);

            t.setView(l);
            t.setDuration(Toast.LENGTH_LONG);
            t.show();
            }
        });

    }
    public class badp extends BaseAdapter
    {

        Context context;
        private badp(Context context) {
            // TODO Auto-generated constructor stub
            this.context=context;
        }

        public int getCount() {
            // TODO Auto-generated method stub
            return 1;
        }

        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub
            LinearLayout l=new LinearLayout(context);
            Button b1=new Button(context);
            b1.setText("Save");
            EditText ed=new EditText(context);
            ed.setGravity(Gravity.CENTER);
         //   LayoutParams lparams = new LayoutParams();
           //     ed.setLayoutParams(lparams);
                ed.setWidth(5);
                ed.setEms(10);

            l.addView(ed);
            l.addView(b1);

            return l;
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:57:59.410

您可能应该使用 Dialog 而不是 Toast。

Dialog 是为更具交互性的弹出窗口而设计的，而 toast 的真正设计目的是显示快速文本消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:58:29.817

我真的不认为你应该为这种用户界面使用祝酒词。如果您查看文档，它会说：

> Toast 通知是在窗口表面弹出的消息。它仅填充消息所需的空间量，并且用户当前的活动保持可见和交互。通知自动淡入淡出，不接受交互事件。

[吐司通知](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

你想要的可能是一个 [对话框](http://developer.android.com/guide/topics/ui/dialogs.html)

# javascript - 值在Javascript中不断添加为字符串

> ID：11883915
> 
> 赞同：2
> 
> 时间：2012-08-09T12:54:19.817
> 
> 标签：javascript, string

> **可能重复：**
> [加法变成串联](https://stackoverflow.com/questions/6609142/addition-turns-into-concatenation)

这就是我所拥有的...

```
 var srate = Math.round(princ * intr * term * 100) / 100; //works fine
    var dasvalue = princ + srate; //doesn't work
    document.calc.pay.value = dasvalue; 
```

“var dasvalue = princ + srate;” 将两个总和相加为字符串。

100 + 1.4 = 1001.4

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T12:55:29.817

您可以使用[一元加运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#.2B_%28Unary_Plus%29)强制转换为 Number 类型，确保加法而不是串联：

```
var dasvalue = +princ + +srate; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T12:55:38.823

`princ`也是一个字符串。您可以`Number`使用一元运算符将其转换为 a `+`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T12:56:42.360

如果您的值`princ`来自输入，则需要先将其转换为数字。

```
var dasvalue = Number(princ) + srate; 
```

# java - 我在哪里可以获得在 websocket 中编写客户端-服务器应用程序的好例子？

> ID：11883920
> 
> 赞同：0
> 
> 时间：2012-08-09T12:54:40.377
> 
> 标签：java, websocket

**我是WebSocket**的新手，我在哪里可以获得编写客户端-服务器应用程序的好例子。我不知道在哪里可以找到 JAVA 的实现。我想构建客户端服务器应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:00:31.580

[http://systembash.com/content/a-simple-java-tcp-server-and-tcp-client/](http://systembash.com/content/a-simple-java-tcp-server-and-tcp-client/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:51:47.103

Kaazing 有一个很棒的使用 Java 消息服务 (JMS)[的点对点 WebSocket 教程。](http://tutorial.kaazing.com)它逐步介绍了一些简单的代码，附带了一个截屏视频，并与 JSFiddle 代码片段完全集成。

![JSFiddle 中的 WebSocket 教程](../Images/51157c5ccb8b04bbf53eeb64d700e25a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T16:56:00.617

查看[jWebSocket](http://jwebsocket.org/)，那里有演示页面。

# database - 在oracle中将数字转换为日期

> ID：11883923
> 
> 赞同：3
> 
> 时间：2012-08-09T12:54:45.057
> 
> 标签：database, oracle, datetime

我的 Oracle 数据库中有一个数字字段，表示自 1800 年 12 月 28 日以来的天数。但是我试图选择它（用于另一个应用程序）作为它表示的当前日期。我对 Oracle 命令不太熟悉（我习惯于 SQL），所以我想知道是否有人可以提供一些帮助。谢谢。

例如：77650 = 2013 年 8 月 3 日星期六

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:59:48.007

首先，解决这个问题，如果您将日期存储在日期数据类型中，您的生活会更轻松。

但是，要回答您在 Oracle 中为日期添加天数的问题，您可以使用`+`运算符。

首先，虽然你必须有一个日期，所以我将使用内置[`to_date`](http://www.techonthenet.com/oracle/functions/to_date.php)函数将 1800 年 12 月 28 日转换为日期，然后添加数字。在你的情况下，你会想要：

```
select to_date('1800/12/28','yyyy/mm/dd') + 77650 from dual 
```

我已经设置了一个[小 SQL Fiddle](http://www.sqlfiddle.com/#!4/c2a09/1)来为您演示。

# reference - 从跟踪引用到（本机）引用的 C++/CLI - 包装

> ID：11883932
> 
> 赞同：0
> 
> 时间：2012-08-09T12:55:12.063
> 
> 标签：reference, c++-cli, clr, pass-by-reference, managed

我需要一个 C# 接口来通过 CLI 方言调用一些本机 C++ 代码。C# 接口在所需参数前面使用*out属性说明符。*这转化为 C++/CLI 中的*%*跟踪引用。

我的方法具有以下签名和主体（它正在调用另一个本机方法来完成这项工作）：

```
virtual void __clrcall GetMetrics(unsigned int %width, unsigned int %height, unsigned int %colourDepth, int %left, int %top) sealed
{
    mRenderWindow->getMetrics(width, height, colourDepth, left, top);
} 
```

现在由于一些编译时错误（都与 相关`not being able to convert parameter 1 from 'unsigned int' to 'unsigned int &'`），代码将无法编译。

作为一个谦虚的 C++ 程序员，在我看来，CLI 对于讲德语的人来说就像是荷兰语。可以做些什么来使这个包装器在 CLI 中正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T13:16:26.260

就像在已删除的答案中也建议的那样，我做了明显的并使用局部变量来传递相关值：

```
 virtual void __clrcall GetMetrics(unsigned int %width, unsigned int %height, unsigned int %colourDepth, int %left, int %top) sealed
        {
            unsigned int w = width, h = height, c = colourDepth;
            int l = left, t = top;
            mRenderWindow->getMetrics(w, h, c, l, t);
            width = w; height = h; colourDepth = c; left = l; top = t;
        } 
```

由于跟踪引用的相当直观的机制，这有点明显：它们受到垃圾收集器工作的影响，并且`&`当它们很容易被放在内存中的其他位置时，它们并不是像普通引用那样真正的静态/常量。因此，这是解决问题的唯一可靠方法。感谢最初的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:43:20.377

如果您的参数在 C# 端使用“out”，您需要像这样定义您的 C++/CLI 参数：`[Out] unsigned int ^%width`

这是一个例子：

```
virtual void __clrcall GetMetrics([Out] unsigned int ^%width)
{
    width = gcnew UInt32(42);
} 
```

然后在你的 C# 端，你会得到 42：

```
ValueType vt;
var res = cppClass.GetMetrics(out vt);
//vt == 42 
```

为了在 C++/CLI 端使用 [Out] 参数，您需要包括：

```
using namespace System::Runtime::InteropServices; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T18:06:30.877

您可以使用 pin_ptr 以便在本机代码更改它时不会移动“宽度”。托管端受到 pin_ptr 的影响，但如果您希望本机代码直接访问它而不使用“w”，我认为您无法解决这个问题。

```
virtual void __clrcall GetMetrics(unsigned int %width, unsigned int %height, unsigned int %colourDepth, int %left, int %top) sealed
        {
            pin_ptr<unsigned int> pw = &width; //do the same for height
            mRenderWindow->getMetrics(*pw, h, c, l, t);
        } 
```

# multithreading - C++/Win32 重叠文件读/写访问：我应该使用 Mutex 还是什么？

> ID：11883933
> 
> 赞同：0
> 
> 时间：2012-08-09T12:55:12.263
> 
> 标签：multithreading, winapi, resources, ftp, mutex

我有两个线程，一个写入文件，一个从同一个文件中读取。我在 writer 线程中使用 CreateFile & WriteFile、FlushFileBuffers，而 reader 线程使用 FtpPutFile。

如何在这里实现一个简单的 windows32 Mutex？（我已经很多年没用过了）

或者，这是否可以通过将适当的标志发送到 CreateFile 来实现？（我试过但没有运气）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:08:25.563

你不需要互斥锁。您可以在多个线程中安全地读取和写入同一个文件。您可以多次打开文件，以便每个线程都有自己的文件句柄和自己的文件指针，或者您可以使用重叠 I/O 在特定位置读取或写入。

您无需为重叠 I/O 打开文件。你可以这样做：

```
LARGE_INTEGER off = offset;
OVERLAPPED ov = { 0 };
ov.Offset = off.LowPart;
ov.OffsetHigh = off.HighPart;
ReadFile(handle, buffer, count, &bytesRead, &ov); 
```

这允许您以原子方式读取文件 ( ) 中的特定位置`offset`，因此您不必调用`SetFilePointerEx`并担心另一个线程会弄乱指针。同样的事情也适用于写作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:04:41.793

如何实现一个简单的互斥锁：使用[CreateMutex](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)函数或[CreateMutexEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682418%28v=vs.85%29.aspx)
创建一个互斥锁。完成后，您需要调用[CloseHandle](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724211%28v=vs.85%29.aspx)。一旦你有了互斥体，你就可以调用[WaitForSingleObject](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)来同步你的调用（完成后不要忘记调用[ReleaseMutex](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685066%28v=vs.85%29.aspx)。最后，这是一个使用互斥体对象的[例子](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927%28v=vs.85%29.aspx)。

# c# - 在datagrid之后添加新行

> ID：11883934
> 
> 赞同：-3
> 
> 时间：2012-08-09T12:55:17.990
> 
> 标签：c#, wpf, datagrid

所以，我有：TextBox 和 Button

我如何在数据网格中添加新值？

例如 TextBox.Text = "示例文本"

我单击按钮，然后 DataGrid

`sample text`

输入文本框`sample text 2`

并单击按钮，然后

数据网格：

`sample text`

`sample text 2`

ETC...

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:08:45.547

将数据网格的 itemssource 绑定到 observablecollection。然后，如果您单击按钮，请执行类似的操作

myitemssource.add(new myitemtype());

在一个非常简单的情况下：

```
public partial class TestWindow : Window
{
    public TestWindow()
    {
        InitializeComponent();
        DataContext = this;
    }

    ObservableCollection<Person> _persons;
    public ObservableCollection<Person> Persons
    {
        get { return _persons ?? (_persons = new ObservableCollection<Person>()); }
        set { _persons = value; }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        var split = txtBox.Text.Split(' ');
        try
        {
            Persons.Add(new Person() { FirstName = split[0], LastName = split[1], Age = Int32.Parse(split[2]) });
        }
        catch (IndexOutOfRangeException)
        {
        }
        catch (FormatException)
        {
        }
    }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
}

<Window x:Class="ItemsControlTest.TestWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="TestWindow" Height="300" Width="300">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="auto"/>
    </Grid.ColumnDefinitions>
    <TextBox Name="txtBox" Text="Firstname lastname 10"/>
    <Button Grid.Column="1" Click="Button_Click" Content="click me"/>

    <DataGrid Grid.Row="1" Grid.ColumnSpan="2" ItemsSource="{Binding Path=Persons}">

    </DataGrid>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:01:38.193

假设您在 xaml 中的窗口上有一个数据网格、一个文本框和一个按钮，代码隐藏：

```
ObservableCollection<string> list = new ObservableCollection<string>();
    public Window()
    {
        InitializeComponent();
        datagrid1.ItemsSource = list;

    }
    private void button1_Click(object sender, RoutedEventArgs e)
    {
        list.Add(textBox1.Text);
    } 
```

# javascript - 在页面上放置字符串

> ID：11883949
> 
> 赞同：0
> 
> 时间：2012-08-09T12:55:59.300
> 
> 标签：javascript, html, string

我正在使用`window.opener`将字符串值从子窗口传递到父窗口，如下所示 -

```
function reply_click(clicked_id)
{
alert(clicked_id);

window.opener.document.write(clicked_id);
window.close ();
} 
```

`cliced_id`我要传回的字符串在哪里。

但是，我想将其传递回主页上的隐藏输入，以便我可以再次使用它。问题是我无法指定将字符串值放在主页上的位置，而是将字符串值加载到没有任何原始内容的新页面中。

是否可以传回字符串并保留原​​始 HTML 内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:58:25.693

是的，`window.opener`是一个完整的`window`参考。

你可以打电话`window.opener.myCallback(clicked_id)`或`window.opener.clickedId = clicked_id`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:58:42.323

是的，如果您在原始页面上有一个带有 id 的元素，您可以使用`getElementById`并设置`innerHTML`：

例如，页面上有一个空的 div：

```
<div id="myDiv"></div> 
```

您可以使用此代码

```
function reply_click(clicked_id)
{
    alert(clicked_id);
    window.opener.document.getElementById("myDiv").innerHTML = clicked_id;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:59:09.050

嗨，为什么不将值存储在 html5 存储对象中，例如 sessionStorage/localStorage，请访问[Html5 存储文档](http://diveintohtml5.info/storage.html)以获取更多详细信息。使用它，您可以在本地临时/永久存储中间值，然后访问您的值以存储会话的值

```
sessionStorage.getItem('label')
sessionStorage.setItem('value', 'label') 
```

或使用永久存储值

```
localStorage.getItem('label')
localStorage.setItem('value', 'label') 
```

因此，您可以使用 html5 存储对象在多个页面之间存储（临时）表单数据

# php - 在 PHP 中将字符串转换为 int

> ID：11883954
> 
> 赞同：1
> 
> 时间：2012-08-09T12:56:08.987
> 
> 标签：php, javascript

以下是我将屏幕宽度分配给 variable 的一段代码`$width`。但是当我将它转换为整数并回显它时，它会`0`被返回。

```
$width = '<script> document.write(window.screen.width); </script>';
//if i echo $width it shows 1366 which is width of my screen
$height = '<script> document.write(window.screen.height); </script>';
echo "The height is = $height"."<br>The width is = ".$width;
$a = (int)($width);
echo $a; 
```

我正在寻求指导以使这种转换变得完美。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:57:51.887

那时您实际上并没有获得屏幕尺寸。在客户端上运行。您将不得不对服务器进行 ajax 调用来设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T12:57:58.257

您不能使用 javascript 来回显 PHP 变量。在 PHP 完成它所做的事情之前，不会执行 javascript。使用 javascript 可以做的最好的事情是 ajax 数据，但这只能用于新的 PHP 脚本 - 而不是当前页面。

您当然不能指望在脚本完成执行之前返回数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T12:59:44.337

这将是[intval](http://php.net/manual/en/function.intval.php) **但**您正在做的事情是不可能的，因为您无法在没有 $_POST、$_GET 或类似的情况下将客户端数据从浏览器传递到 php 脚本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:59:53.620

你不需要花括号。尝试`$a = (int) $width;`或`$a = intval($width);`。

此外，您正在运行的代码没有任何意义。

```
$width = '<script> document.write(window.screen.width); </script>'; 
```

这将设置`$width`为包含 HTML 代码的字符串（其中包含 JavaScript）。无法轻易将JavaScript代码的返回值取到PHP变量中，主要是因为JS部分是在PHP完成**之后**执行的（PHP由服务器处理，生成的HTML（里面有JS）发送出去）到浏览器，浏览器负责执行 JS）。为此，您将需要[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

# c# - Silverlight 和 wpf 应用程序使用相同的 xaml 文件

> ID：11883956
> 
> 赞同：0
> 
> 时间：2012-08-09T12:56:09.783
> 
> 标签：c#, wpf, silverlight, xaml

我想对 silverlight 和 wpf 版本的应用程序使用相同的 xaml 文件。

我需要的唯一区别是样式。我在 xaml 中使用了样式。但是对于 silverlight，我不想在我的 xaml 文件中使用任何样式，因为样式是以主题形式定义的应用程序级别。

有没有其他方法可以为 silvelight 和 wpf 版本使用相同的 xaml 文件？否则我不得不维护单独的 xaml 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:17:28.733

您可以为两者重用相当多的 xaml，我有一些项目，我在其中链接所有相同的文件、xaml 和代码，并且它工作得很好。

需要注意的是，某些事情并不总是能很好地匹配，例如 wpf 有一个用于 itemscontrol 的模板选择器，而 silverlight 没有。

使用 SizeToContent 往往会在两者中产生不同的行为，我建议避免使用它，我认为它不会给你带来任何好处。

我建议有一个单独的“基础”资源，您可以在其中保留两个文件的差异。例如，事件触发器之类的东西在 silverlight 中几乎没有填写。您将为每个版本都有一个基类，它们会抽象出它们的差异，然后您可以将键标记为相同并将它们用作链接文件中的静态资源。

另一个大问题是你要注意 uielements 发生的顺序事件，加载、布局和应用模板事件以不同的顺序应用，所以如果你要制作一个模板化控件，你必须在那里小心，这不是一个交易破坏者你可以解决它，只是要注意。

其他需要注意的事情 -silverlight 命令需要更多的努力，你必须实现 ICommand，这在 wpf 中并非总是如此，但我使用我的实现来帮助共享代码。-wpf 是超集，它有很多silverlight 没有的功能，通常它们是方便的做事方式，你只想避免这些。很好的例子是预览事件，而不是silverlight，但您通常可以找到一个与行为匹配的事件。

# sql-server - TSQL Pivot 长列列表

> ID：11883957
> 
> 赞同：2
> 
> 时间：2012-08-09T12:56:16.463
> 
> 标签：sql-server, tsql, pivot

我正在寻找使用数据透视函数将列的行值转换为单独的列。该列中有 100 多个不同的值，并且对数据透视函数的“for”子句中的每个值进行硬编码将非常耗时，并且从可维护性的目的来看也不好。我想知道是否有更简单的方法来解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T13:02:08.580

`PIVOT`您可以在此类查询中使用动态 SQL 。动态 SQL 将获取您要在执行时转换的项目列表，从而无需对每个项目进行硬编码：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT distinct ',' + QUOTENAME(c.condition_id) 
            FROM t c
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT memid, ' + @cols + ' from 
            (
                select MemId, Condition_id, condition_result
                from t
           ) x
            pivot 
            (
                sum(condition_result)
                for condition_id in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e4891/2)

如果您发布需要转换的数据样本，那么我可以调整我的查询来演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-08T15:24:04.103

我试图这样做并且有这样的 db2 数据。

```
id,MCD1,MCD2,MCD3,MCD4
1,4,5,4,3
2,6,7,8,9
3,3,6,2,6
4,2,5,8,4
5,3,4,5,6 
```

我在 TSQL 中编写了这个动态 SQL

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @cols = STUFF((SELECT ',', COLUMN_NAME FROM my_db.INFORMATION_SCHEMA.COLUMNS
 WHERE TABLE_NAME LIKE 'PivotLonger' AND COLUMN_NAME like 'MCD%'
 FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id, MCD, Value
                from [my_db].[dbo].[PivotLonger]
                UNPIVOT  
               (Value FOR MCD IN (' + @cols + ')) AS unpvt'

execute(@query) 
```

导致将列扩展成一个漂亮的长表:)

```
id,MCD,Value
1,MCD1,4
1,MCD2,5
1,MCD3,4
1,MCD4,3
2,MCD1,6
2,MCD2,7
2,MCD3,8
2,MCD4,9
3,MCD1,3
3,MCD2,6
3,MCD3,2
3,MCD4,6
4,MCD1,2
4,MCD2,5
4,MCD3,8
4,MCD4,4
5,MCD1,3
5,MCD2,4
5,MCD3,5
5,MCD4,6 
```

# android - 在 android 应用程序中为 root 设备获取 root 权限？

> ID：11883958
> 
> 赞同：0
> 
> 时间：2012-08-09T12:56:17.483
> 
> 标签：android, android-file

如何为将文件从 assets 文件夹复制到 /etc 和其他通常在非 root 设备上无法访问的文件夹的应用程序获取 root 访问权限或权限。

我编写了以下代码，但事实证明它不会产生任何错误，也不会执行所需的操作。我需要在清单中编辑一些东西吗？

```
public class CopyFilesFromApkToSystemActivity extends Activity {
    /** Called when the activity is first created. */

    private static final String FILE1 = "usb_modeswitch.conf";
    private static final String FILE2 = "usb_modeswitch";
    private static final String FILE3 = "gprs";
    private static final String FILE4 = "ip-up";
    private static final String FILE5 = "cdma.sh";

    private static String PATH1 = "/etc/";
    private static String PATH2 = "/system/xbin/";
    private static String PATH3 = "/etc/ppp/peers/";
    private static String PATH4 = "/etc/ppp/";
    private static String PATH5 = "/system/xbin/";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Toast.makeText(this, "Copy started", Toast.LENGTH_SHORT).show();

        try {
            copyfile(FILE1,PATH1);
            copyfile(FILE2,PATH2);
            copyfile(FILE3,PATH3);
            copyfile(FILE4,PATH4);
            copyfile(FILE5,PATH5);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    private void copyfile(String fileName, String pathName) throws IOException {

        InputStream mInput = this.getAssets().open(fileName);
        String outFileName = fileName + pathName;
        OutputStream mOutput = new FileOutputStream(outFileName);
        byte[] mBuffer = new byte[1024];
        int mLength;
        while ((mLength = mInput.read(mBuffer))>0)
        {
            mOutput.write(mBuffer, 0, mLength);
        }
        mOutput.flush();
        mOutput.close();
        mInput.close();

        //Toast.makeText(this, fileName + " copied", Toast.LENGTH_SHORT).show();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:59:06.457

有人写了一个特定的类来获得root权限，你可以检查这个： http: [//muzikant-android.blogspot.ca/2011/02/how-to-get-root-access-and-execute.html](http://muzikant-android.blogspot.ca/2011/02/how-to-get-root-access-and-execute.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T13:00:16.163

可能是文件夹权限问题。在开始复制和尝试之前设置文件夹的权限

```
try {
                Runtime.getRuntime().exec("chmod 777 /etc/");
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

# c# - MVVM 数据更新

> ID：11883962
> 
> 赞同：0
> 
> 时间：2012-08-09T12:56:33.420
> 
> 标签：c#, wpf, vb.net, mvvm, binding

我最近下载了 MahApps.Metro 包来玩 Metro Design 和 MVVM。
在项目中，他们创建了 ViewModel：

```
DataContext = new MainWindowViewModel(Dispatcher); 
```

看起来像这样：

```
public class MainWindowViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private readonly Dispatcher _dispatcher;

    public bool Busy { get; set; }

    public MainWindowViewModel(Dispatcher dispatcher)
    {
        Busy = true;
        _dispatcher = dispatcher;

        var wc2 = new WebClient();
        wc2.DownloadStringCompleted += WcDownloadStringCompleted2;
        wc2.DownloadStringAsync(new Uri("http://ws.audioscrobbler.com/2.0/?method=chart.gethypedtracks&api_key=b25b959554ed76058ac220b7b2e0a026&format=json"));
    }

    private void WcDownloadStringCompleted2(object sender, DownloadStringCompletedEventArgs e)
    {
        try
        {
            var x = JsonConvert.DeserializeObject<TrackWrapper>(e.Result);
            _dispatcher.BeginInvoke(new Action(() =>
                                                   {
                                                       Busy = false;
                                                   }));

        }
        catch (Exception ex)
        {

        }
    }
} 
```

我剪掉了一些部分，但代码的工作方式与此处显示的一样。所以他们基本上创建了一个线程，在线程结束之前，他们将 Busy-Property 设置为 false（没有触发任何事件）。
在 XAML 中，他们将此属性绑定到忙指示符：

```
<Controls:ProgressRing IsActive="{Binding Busy}" VerticalAlignment="Center" HorizontalAlignment="Center" /> 
```

一切正常，控件随着属性的变化而变化。
但现在我想一开始就复制这个。XAML 和设置 DataContext 是相等的。我的 ViewModel 看起来像这样（这次是 VB，但不应该有所作为）：

```
Public Class testmodel
Implements INotifyPropertyChanged

Private _busy As Boolean = True
Public Sub New(dispatcher As Windows.Threading.Dispatcher)
    Dim t1 As Thread = New Thread(Sub()
                                      'Emulate Progress
                                      System.Threading.Thread.Sleep(2000)
                                      dispatcher.BeginInvoke(New Action(Sub()
                                                                            Busy = False
                                                                        End Sub))

                                  End Sub)
    t1.Start()
End Sub

Public Property Busy As Boolean
    Get
        Return _busy
    End Get
    Set(value As Boolean)
        NotifyPropertyChanged(Nothing)
        _busy = value
    End Set
End Property

Protected Sub NotifyPropertyChanged(info As [String])
    RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(info))
End Sub

Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged 
```

结束类

所以我创建了一个新线程，将其停止 2 秒，然后更改 Busy-Property。首先，我没有触发事件（与原始事件一样），但什么也没有发生。然后我添加了这条线来触发事件，但什么也没有发生。
我在监督什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T13:02:53.920

我认为这是因为您在设置值之前通知您的属性更改。此外，您的属性更改没有发送任何内容。如果不发送名称作为参数，则不会指示更新了哪个属性。

```
Public Property Busy As Boolean
    Get
        Return _busy
    End Get
    Set(value As Boolean)            
        _busy = value
        NotifyPropertyChanged("Busy")
    End Set
End Property 
```

# openssl - 如何使用 openssl 获取整个证书链的公钥

> ID：11883967
> 
> 赞同：3
> 
> 时间：2012-08-09T12:56:54.103
> 
> 标签：openssl, certificate, ssl-certificate

我尝试了以下命令来获取证书并将其保存为文本文件：

```
openssl s_client -connect www.domain.com:443 -showcerts > file.txt 
```

然后我使用以下内容获取公钥：

```
openssl x509 -noout -modulus -in file.txt 
```

我得到的公钥是与证书 1 相关联的公钥。我该怎么做才能获得整个链的公钥？有没有更好的方法可以用来改进我正在做的事情（即：如果有一种方法可以一步获得整个证书链的公钥，而不是我正在做的两个步骤）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:51:29.493

“[对SSL证书链验证的疑惑”问题](https://stackoverflow.com/questions/1456034/trouble-understanding-ssl-certificate-chain-verification)涉及到获取证书链的思路。这可能值得一看。

不过，我自己还没有解决过这类问题。:)

# grails - Grails war tomcat部署成功但无法访问项目

> ID：11883975
> 
> 赞同：0
> 
> 时间：2012-08-09T12:57:20.580
> 
> 标签：grails, tomcat6

我正在努力在 Unix 的 Tomcat 服务器上部署 grails war。我通过 STS 产生了战争。在 windows 框中测试了在 tomcat 6.0 上生成的战争。这很好用。我在 Unix 机器上部署了同样的战争，在服务器启动期间没有遇到任何问题。但是当我访问 URL 时，我得到“Internet Explorer 无法显示该网页”。日志中不显示异常或错误。

我正在使用 Grails 2.0.1 并尝试在 Tomcat 7.0 和 6.0 中部署战争。

# cookies - 将 cookie 值设置为由 document.cookie 创建的 null

> ID：11883995
> 
> 赞同：0
> 
> 时间：2012-08-09T12:58:24.070
> 
> 标签：cookies

我`document.cookie`在 jsp 页面中使用创建了 cookie。

在我的 servlet 中（记住它不是我可以使用 java 脚本的 jsp 页面。它是一个 servlet），我正在检索 cookie 值，在使用它之后，我想删除它们。我不想通过使用到期时间来删除 cookie。我想清除它的值。所以，我在做`cookie.setValue("");`

但是，当我在浏览器中检查 cookie 时，它​​仍然持有该值。它没有清除。

1.  如何清除它的价值？
2.  另外，有没有办法清除cookie名称？我知道没有 cookie.setName() 函数。那么，还有什么办法吗？

清除后，基本上我不希望用户在浏览器中看到 cookie。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:20:37.793

您可以通过 2 种方式删除 cookie，或者在您的 Servlet（作为服务器端代码）中，或者如果您的 Servlet 呈现 HTML 文档，您可以添加一个页面 onload 事件作为 javascript 代码。

// 服务器端代码

```
@Override
protected void doPost(final HttpServletRequest request, final HttpServletResponse response) throws ServletException, IOException {

  // Your task here

  Cookie cookie = new Cookie("cookieName", "");
  cookie.setMaxAge(0); // To delete the cookie named "cookieName", set MaxAge to 0.
  response.addCookie(cookie); // You need to add this cookie to the response to tell the client (browser) that the cookie named "cookieName" must be deleted on the client (browser)

  // Your task here 

} 
```

对于客户端 cookie 删除，您可以查看此[http://www.webdevelopmentcentral.net/2007/12/client-side-cookie-handling.html](http://www.webdevelopmentcentral.net/2007/12/client-side-cookie-handling.html)