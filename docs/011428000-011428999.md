# StackOverflow 问答 11428000-11428999

# c# - 如何使用 DotNetZip 即时提取 ZIP 文件？

> ID：11428000
> 
> 赞同：2
> 
> 时间：2012-07-11T07:51:59.243
> 
> 标签：c#, azure, stream, zip, dotnetzip

在我的 Windows Azure 代码中，我想从 Blob Storage 下载一个 ZIP 文件并即时解压缩并将解压缩的内容存储到磁盘。这样我就可以先将文件写入磁盘，然后在提取时读取它。

我正在尝试为此使用 DotNetZip。

ZIP 文件本来就很大，所以被切成小块（不是多部分存档，而是普通的 ZIP 存档，只是切成更小的文件），每块都上传到 Blob Storage。我知道如何遍历所有部分并在需要时打开每个 blob

Azure SDK 具有`CloudBlob.OpenRead()`返回`Stream`后代。

DotNetZip 的`ZipInputStream`类有一个接受`Stream`.

如何将这些片段连接在一起，以便我可以一个一个下载 ZIP 文件片段并即时提取它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:57:57.300

创建您自己的流类，该类将根据其位置从相应的 CloudBlob 返回数据。

然后使用这个类作为你的输入流`ZipInputStream`。

```
public sealed class ZipBlobStream : Stream
{
... 
```

[http://msdn.microsoft.com/library/system.io.stream.aspx](http://msdn.microsoft.com/library/system.io.stream.aspx)

# php - 我可以在未经授权的情况下获取曲目吗？

> ID：11428010
> 
> 赞同：0
> 
> 时间：2012-07-11T07:52:27.090
> 
> 标签：php, api, soundcloud

是否可以在未经授权的情况下从公开组获取曲目？我正在使用 PHP api，我在这里找到了解决方案：[https](https://groups.google.com/forum/?fromgroups#!topic/soundcloudapi/XfxvE2P6P0c) ://groups.google.com/forum/?fromgroups#!topic/soundcloudapi/XfxvE2P6P0c 但它不起作用。

正如我所见，JS Api 可以做到。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:15:49.357

上传我的课程： http: [//pastebin.com/xg6Y5rsR](http://pastebin.com/xg6Y5rsR)

利用：

```
<form action="index.php" method="post">
  Url soundcloud: <input type="text" name="fname" /><br />
  <input type="submit" value="Submit" />
</form> 

<?php

if($_POST['fname']){

include("class.soundcloud.php");
$sCloud = new soundCloud();

$filename = $sCloud->exploserChaine($_POST['fname']);
$link = $sCloud->exploserChaine($sCloud->getMp3($_POST['fname']));

if(!$link)
    echo("No links !");

else
    echo ('<a href="http://media.soundcloud.com/stream/'.$link['5'].'?stream_token=Own3d">Download '.$filename['5'].'.mp3</a>');
 } 
```

玩得开心 ;）

# javascript - 无法从服务器获得答案。ExtJs

> ID：11428012
> 
> 赞同：1
> 
> 时间：2012-07-11T07:52:30.023
> 
> 标签：javascript, extjs

我在提交 ExtJs 表单时遇到问题。我无法获得`success`功能。

我有：

```
formp = new Ext.FormPanel({
 fileUpload: true,
 width: 350,
 autoHeight: true,
 bodyStyle: 'padding: 10px 10px 10px 10px;',
 labelWidth: 70,
 defaults: {
  anchor: '95%',
  allowBlank: false,
  msgTarget: 'side'
 },
 items:[{
xtype: 'fileuploadfield',
id: 'filedata',
emptyText: 'Выберите файл для загрузки...',
    fieldLabel: 'Имя файла',
buttonText: 'Обзор'
 }],
 buttons: [{
text: 'Загрузить',
handler: function(){
formp.getForm().submit({
  url: url_servlet+'doUpload.jsp',
  success: function(formp, o) {
      alert(o.responseText);    
      }
                                             })
                                            }
 }]
}) 
```

在 doUpload.jsp 我有`out.println("1111");` 在 fireBug 我看到`doUpload.jsp`POST`1111`但没有警报。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:26:36.087

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-submit](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-method-submit)

```
//Respone object
out.println("{success:true, file:'11111'}");

//Submitting the form. The second parameter in the success callback is
//your response object. You can access it properties as shown below.
formp.getForm().submit({
  url: url_servlet+'doUpload.jsp',
  success: function(formp, o) {
      alert(o.result.file);    
  }
}); 
```

# php - PHP OOP 问题，带有示例

> ID：11428013
> 
> 赞同：1
> 
> 时间：2012-07-11T07:52:33.993
> 
> 标签：php, oop, class

我知道对此打开了一些问题，但我需要一个更“具体”的示例
和解决方案。

**这是我的示例**：
*databse.class.php*

```
class db{ 
   public function connect($conStr){...} 
} 
```

*函数类.php*

```
func class{ 
   public insert_song(){ 
      //ineed to use the conenct method from database 
      //then I would INERT INTO... 
   } 
} 
```

**问题：**
1）我应该要求或扩展 func 类中的 db 类吗？
2）如果我需要，db类函数的范围会保留吗？（假设我在那里有一个私有变量，是否可以从外部访问它？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:01:53.767

*   不，您不应该要求或扩展数据库类。
*   不，私有变量或方法永远不会在类之外可用。受保护的变量仅对子类可用，公共变量是……公共的。

您可能需要数据库类位于配置中某处的文件，因此您可以随时随地实例化数据库类。但是，由于您可能只需要一个数据库对象实例，您可以在配置中实例化它并使用[Dependency injection](http://en.wikipedia.org/wiki/Dependency_injection)传递它。

这基本上意味着您将数据库对象传递给需要一个的其他对象。处理数据库对象的一种常用方法是使用[构造函数注入](http://misko.hevery.com/2009/02/19/constructor-injection-vs-setter-injection/)，尽管 setter 注入也可以。

您所做的与此类似：

```
// config:
$db = new Database;
$db->setConnectionValues();

$fooClass = new Foo($db);
$fooClass->insertSomething();

// fooClass:
class Foo
{
    private $db;

    public function __construct(Database $db)
    {
        $this->db = $db;
    }

    public function insertSomething()
    {
        $this->db->query("INSERT");
    }
} 
```

这解决了您的大部分依赖问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:58:38.670

```
// changed the class name, func is not good for a class name.
class Foo {
   protected $db;

   public setDb($db) {
     $this->db = $db;
   }

   public insert_song(){ 
      //ineed to use the conenct method from database 
      //then I would INERT INTO...
      $this->db->insert(...); 
   } 
} 
```

例子：

```
// omited the error handling.
$db = new db();
$db->connect();
$foo = new Foo();
$foo->setDb($db);
$foo->insert_songs(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:01:41.227

作为**Abstraction**的一部分，您应该分离类的职责。你的`Database`班级应该关心你的`Songs`（这是你应该如何命名的）班级。

如果您的`Songs`类使用`Database`该类，则应将其**注入**构造函数中，如下所示：

```
<?php

class Database {
    public function connect($conStr) {
        /*
         * Connect to database here
         */
    }
}

class Songs {
    private $db;
    public function __construct(Database $db) {
        $this->db = $db;
    }

    public function insert_song($song) {
        /*
         * Now you can use $this->db as your database object!
         */
    }
} 
```

# c - C : 在 strptime 中验证

> ID：11428014
> 
> 赞同：5
> 
> 时间：2012-07-11T07:52:36.613
> 
> 标签：c, validation, strptime

C 中的 strptime() 函数无法检测到无效日期。例如：2011 年 2 月 31 日、2011 年 4 月 31 日。是否有任何其他功能或解决此问题的方法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:59:48.870

您可以`mktime`在使用`strptime`.

```
struct tm ltm = {0};
char buf[] = "2011-02-31";
puts(buf);
strptime(buf, "%Y-%m-%d", &ltm);
mktime(&ltm);
strftime(buf, sizeof(buf), "%Y-%m-%d", &ltm);
puts(buf); 
```

上面的示例将产生以下输出：

```
2011-02-31
2011-03-03 
```

如果之前和之后的字符串`mktime`不匹配，那么您就知道输入字符串不是有效日期。

如果您需要知道哪个字段无效，您可以`ltm`在调用之前保存结构的副本`mktime`。然后，您可以检查日 ( `tm_mday`)、月 ( `tm_mon`) 或年 ( `tm_year`) 是否是无效格式。因为`tm_mon`，`0`是一月，`11`是十二月。因为`tm_year`，那是多少年以来`1900`。在验证 2 月份的日期时，请记住考虑闰年。

# java - 添加 ByteArrayOutputStreams

> ID：11428015
> 
> 赞同：0
> 
> 时间：2012-07-11T07:52:36.863
> 
> 标签：java, io, apache-commons, bytearrayoutputstream

我有一堆`ByteArrayOutputstreams`pdf 报告写在特定工作流程的不同部分上。我使用 IText 来完成此任务。现在，最后我想将所有这些单个 ByteArrayOutputstreams 组合成一个更大的`ByteArrayOutputstream`，以便将所有 pdf 报告组合在一起。

我查看了 Apache Commons 库，但找不到任何有用的东西。

我知道的一种方法是将它们中的每一个转换`ByteArrayOutputstreams`为`byte[]`然后使用`System.arraycopy`将它们复制到更大的`byte[]`. 问题是我必须`byte[]`预先声明结果的大小，这使得它不理想。

有没有其他方法可以复制/附加到/连接我可能错过的 ByteArrayOutputStreams ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:02:27.847

Write all but one of their `toByteArray()` results into the remaining one.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:59:46.390

你可以使用 a `List<Byte[]>`。您可以将您的字节添加到列表中。

```
List<Byte[]> listOfAllBytes = new ArrayList<Byte[]>;
ByteArrayOutputstreams byteArray = //...
listOfAllBytes.add(byteArray.toByteArray); 
```

最后，您可以取回完整的字节数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T07:18:01.643

```
public class Concatenate {

    /** The resulting PDF file. */
    public static final String RESULT
        = "path/to/concatenated_pdf.pdf";

    public static void main(String[] args)
        throws IOException, DocumentException {
        String[] files = { "1.pdf", "2.pdf" };
        Document document = new Document();
        PdfCopy copy = new PdfCopy(document, new FileOutputStream(RESULT));
        document.open();
        PdfReader reader;
        int n;
        // loop over the documents you want to concatenate
        for (int i = 0; i < files.length; i++) {
            reader = new PdfReader(files[i]);
            // loop over the pages in that document
            n = reader.getNumberOfPages();
            for (int page = 0; page < n; ) {
                copy.addPage(copy.getImportedPage(reader, ++page));
            }
            copy.freeReader(reader);
        }
        document.close();
    }
} 
```

# javascript - 如何在谷歌地图 V3 中保持单个信息窗口同时打开？

> ID：11428017
> 
> 赞同：2
> 
> 时间：2012-07-11T07:52:47.777
> 
> 标签：javascript, google-maps, google-maps-api-3, infowindow

我知道这是一个重复的问题，

我在基于 Django 网络的应用程序上使用谷歌地图 v3。我在哪里使用`Markers, Infowindow and polyline`。一切正常，除了当我单击标记以通过信息窗口显示内容时，之前打开的信息窗口没有关闭。

我正在发布我的地图代码（仅脚本部分或有用的部分）：

```
var marker = add_marker(flightPlanCoordinates[i][0], flightPlanCoordinates[i][1],"Event Detail",myHtml); 
```

这`myHtml`是一个包含信息窗口内容的变量。我没有在这里定义变量。所以忽略它。

```
 marker.setMap(map);
    }

    var flightPath = new google.maps.Polyline({
                 path: flightPlanCoordinatesSet,
                 strokeColor: "#FF0000",
                 strokeOpacity: 1.0,
                 strokeWeight: 2
                  });
    flightPath.setMap(map);
}

function add_marker(lat,lng,title,box_html) {
var infowindow = new google.maps.InfoWindow({
    content: box_html
});

var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      title: title
});

google.maps.event.addListener(marker, 'click', function() {
  infowindow.open(map,this);
});   

return marker;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:17:11.183

而不是多个 infoWindows 只使用一个实例。

单击标记时，首先关闭 infoWindow，然后设置新内容并打开 infoWindow。

```
function add_marker(lat,lng,title,box_html) 
{
  //create the global instance of infoWindow 
  if(!window.infowindow)
  {
    window.infowindow=new google.maps.InfoWindow();
  } 

  var marker = new google.maps.Marker({
      position: new google.maps.LatLng(lat,lng),
      map: map,
      title: title
  });

  google.maps.event.addListener(marker, 'click', function() {
    infowindow.close();
    infowindow.setContent(box_html);
    infowindow.open(map,this)
  });   

  return marker;
} 
```

# cocoa - 如何在可可中获取修改 shift 键

> ID：11428018
> 
> 赞同：0
> 
> 时间：2012-07-11T07:52:55.067
> 
> 标签：cocoa, get, key, shift

如何`Shift`在可可中获取修改键。我正在制作一个应用程序并使用键代码获取所有键的值，但无法获取（`Shift`+修改键）的值。谁能告诉我我怎么能得到这个。我对此一无所知。请给我帮助。我是可可的新手。

对于 MAC 中的所有关键代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:42:56.203

[请参阅此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/modifierFlags)的文档。有一种`- (NSUInteger)modifierFlags`方法可以返回事件的修饰符。您会在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/modifierFlags)找到修饰符标志。

编辑一些示例代码以获取密钥：

```
-(void)keyDown:(NSEvent*)event {
    NSString * character = [event characters];
    unichar keyCode = [character characterAtIndex:0];
    NSLog(@" - Keydown -\n    >>%@<< ->> %c %i<<",character,keyCode, keyCode);
} 
```

# android - 如何在 Android 中使用“隐藏类”？

> ID：11428023
> 
> 赞同：0
> 
> 时间：2012-07-11T07:53:27.480
> 
> 标签：android, java-native-interface, hide

官方api中隐藏了一些类，例如“com.android.mms.model.SlideModel”，但是我们可以从源代码中找到它们。有什么方法可以帮助我们使用“隐藏类”。我搜索了一些说我们需要使用JNI的信息，但是我仍然不明白如何使用它。有没有机构可以给我一个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:03:51.487

> 官方api中隐藏了一些类，例如“com.android.mms.model.SlideModel”，但是我们可以从源代码中找到它们。

`com.android.mms.model.SlideModel`来自应用程序，而不是操作系统。它不是“隐藏在官方 api 中”，正如实现 Angry Birds 的 Java 类是“隐藏在官方 api 中”一样。

> 有什么方法可以帮助我们使用“隐藏类”。

欢迎您尝试将其从其应用程序的开源存储库复制到您自己的存储库中。

# java - 从 Selenium Webdriver - Java 的右键菜单中选择一个选项

> ID：11428026
> 
> 赞同：29
> 
> 时间：2012-07-11T07:53:34.873
> 
> 标签：java, selenium-webdriver

我正在使用 Selenium 网络驱动程序。我无法从右键单击打开的选项中选择（比如说第二个）选项。

在我当前的代码中，我可以右键单击 webElement，但无法从右键单击后打开的列表中选择选项，因为它会自动消失。

```
Actions action= new Actions(driver);
action.contextClick(productLink).build().perform(); 
```

因此，使用此代码，我可以右键单击，但右键单击菜单会自动消失。我想从右键菜单中选择说第二个选项。

请帮忙！！！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-12T10:46:38.843

要从上下文菜单中选择项目，您只需使用 Key down 事件移动鼠标位置，如下所示：-

```
Actions action= new Actions(driver);
action.contextClick(productLink).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.RETURN).build().perform(); 
```

希望这对你有用。祝你有美好的一天 ：）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-01-04T09:11:47.990

*使用机器人类你可以做到这一点，试试下面的代码：

```
Actions action = new Actions(driver);
action.contextClick(WebElement).build().perform();
Robot robot = new Robot();
robot.keyPress(KeyEvent.VK_DOWN);
robot.keyRelease(KeyEvent.VK_DOWN);
robot.keyPress(KeyEvent.VK_ENTER);
robot.keyRelease(KeyEvent.VK_ENTER); 
```

**[更新]**

**注意：**您的浏览器应始终处于焦点位置，即在执行机器人动作时在前台运行，否则前台的任何其他应用程序都会收到这些动作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-13T11:06:11.247

这是更好的方法并且它是成功的：

```
Actions oAction = new Actions(driver);
oAction.moveToElement(Webelement);
oAction.contextClick(Webelement).build().perform();  /* this will perform right click */
WebElement elementOpen = driver.findElement(By.linkText("Open")); /*This will select menu after right click */

elementOpen.click(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-08T07:15:50.660

我们将借助 WebDriver 动作类并执行右键单击。以下是语法：

```
Actions action = new Actions(driver).contextClick(element);
action.build().perform(); 
```

以下是我们在示例中遵循的步骤：

1.  识别元素
2.  等待元素的存在
3.  现在执行上下文点击
4.  之后，我们需要选择所需的链接。

包 com.pack.rightclick;

```
 import org.openqa.selenium.Alert;
    import org.openqa.selenium.By;
    import org.openqa.selenium.NoSuchElementException;
    import org.openqa.selenium.StaleElementReferenceException;
    import org.openqa.selenium.WebDriver;
    import org.openqa.selenium.WebElement;
    import org.openqa.selenium.firefox.FirefoxDriver;
    import org.openqa.selenium.interactions.Actions;
    import org.openqa.selenium.support.ui.ExpectedConditions;
    import org.openqa.selenium.support.ui.WebDriverWait;
    import org.testng.Assert;
    import org.testng.annotations.AfterClass;
    import org.testng.annotations.BeforeClass;
    import org.testng.annotations.Test;

public class RightClickExample {

    WebDriver driver;

    String URL = "http://medialize.github.io/jQuery-contextMenu/demo.html";

    @BeforeClass
    public void Setup() {
        driver = new FirefoxDriver();
        driver.manage().window().maximize();
    }

    @Test
    public void rightClickTest() {
        driver.navigate().to(URL);
        By locator = By.cssSelector(".context-menu-one.box");
        WebDriverWait wait = new WebDriverWait(driver, 5);
        wait.until(ExpectedConditions.presenceOfElementLocated(locator)); 
        WebElement element=driver.findElement(locator);
        rightClick(element);
        WebElement elementEdit =driver.findElement(By.cssSelector(".context-menu-item.icon.icon-edit>span"));
        elementEdit.click();
        Alert alert=driver.switchTo().alert();
        String textEdit = alert.getText();
        Assert.assertEquals(textEdit, "clicked: edit", "Failed to click on Edit link");
    }

    public void rightClick(WebElement element) {
        try {
            Actions action = new Actions(driver).contextClick(element);
            action.build().perform();

            System.out.println("Sucessfully Right clicked on the element");
        } catch (StaleElementReferenceException e) {
            System.out.println("Element is not attached to the page document "
                    + e.getStackTrace());
        } catch (NoSuchElementException e) {
            System.out.println("Element " + element + " was not found in DOM "
                    + e.getStackTrace());
        } catch (Exception e) {
            System.out.println("Element " + element + " was not clickable "
                    + e.getStackTrace());
        }
    }

    @AfterClass
    public void tearDown() {
        driver.quit();
    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-21T14:29:58.610

不要尝试右键单击鼠标，而是使用键盘快捷键：

双击元素 -> 按住 shift 并按 F10。

```
Actions action = new Actions(driver);

//Hold left shift and press F10
action.MoveToElement(element).DoubleClick().KeyDown(Keys.LeftShift).SendKeys(Keys.F10).KeyUp(Keys.LeftShift).Build().Perform(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T09:56:42.230

在上下文 click() 之后，您可能必须将鼠标移动到任何特定位置，如下所示 -

```
Actions action = new Actions(driver);
actions.contextClick(link).moveByOffset(x,y).click().build().perform(); 
```

要了解 moveByOffset(x,y) 的工作原理，请看[这里](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/interactions/Actions.html#moveByOffset%28int,%20int%29)；

我希望这行得通。您必须计算**x**和**y**的偏移值；

最好的方法是右键单击后找到每个选项按钮的大小，然后单击第二个选项。

x =**选项按钮的宽度**/2

y = 2*(**每个选项按钮的大小**)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-17T14:43:36.147

这是右键单击 web 元素的代码。

```
Actions actions = new Actions(driver);    
Action action=actions.contextClick(WebElement).build(); //pass WebElement as an argument
            action.perform(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-26T05:00:04.500

这就是我如何单击`Right click window`.

```
 Actions myAction = new Actions(driver); 
 myAction.contextClick(driver.findElement(By.xpath("//ul/li[1]/a/img"))).build().perform();
 myAction.sendKeys(Keys.ARROW_DOWN).build().perform();
 myAction.sendKeys(Keys.ARROW_DOWN).build().perform();
 myAction.sendKeys(Keys.ARROW_DOWN).build().perform();
 myAction.sendKeys(Keys.ARROW_DOWN).build().perform();
 myAction.sendKeys(Keys.ENTER).build().perform(); 
```

希望这可以帮助

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-26T04:33:51.857

右键单击也可以使用 Java 脚本执行器实现（在不支持操作类的情况下）：

```
JavascriptExecutor js = (JavascriptExecutor) driver;

String javaScript = "var evt = document.createEvent('MouseEvents');"
                + "var RIGHT_CLICK_BUTTON_CODE = 2;"
                + "evt.initMouseEvent('contextmenu', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, RIGHT_CLICK_BUTTON_CODE, null);"
                + "arguments[0].dispatchEvent(evt)";

js.executeScript(javaScript, element); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-09-26T07:37:18.810

更好更简单的方法。

```
Actions action = new Actions(driver);
action.moveToElement(driver.findElement(By.cssSelector("a[href^='https://www.amazon.in/ap/signin']"))).contextClick().build().perform(); 
```

您可以在 的位置使用任何选择器`cssSelector`。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-29T06:27:19.100

使用python webdriver右键操作

```
from selenium import webdriver

from selenium.webdriver import ActionChains

import time

driver = webdriver.Chrome()

driver.get("https://swisnl.github.io/jQuery-contextMenu/demo.html")
button=driver.find_element_by_xpath("//body[@class='wy-body-for-nav']")

action=ActionChains(driver)
action.context_click(button).perform() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-13T09:11:46.047

```
WebElement xx = driver.findElement(By.linkText("your element"));
                Actions action = new Actions(driver);
                System.out.println("To open new tab");
                  action.contextClick(xx).sendKeys(Keys.ARROW_DOWN).sendKeys(Keys.ENTER).build().perform();
                    Robot robot = new Robot();
                    robot.keyPress(KeyEvent.VK_DOWN);
                    robot.keyPress(KeyEvent.VK_ENTER); 
```

# android - 在从第三个活动接收到所述数据后，将捆绑的数据从选项卡活动传递到选项卡活动

> ID：11428031
> 
> 赞同：0
> 
> 时间：2012-07-11T07:53:41.607
> 
> 标签：android, android-asynctask, android-tabhost, android-activity, android-tabactivity

我有一个选项卡式活动，其中包含三个选项卡，它们的初始化如下：

```
TabHost tabHost = getTabHost();

TabSpec porabaspec = tabHost.newTabSpec("Tab1");
porabaspec.setIndicator("Tab 1", getResources().getDrawable(R.drawable.icon_tab1));
porabaIntent = new Intent(this, PorabaActivity.class);
porabaspec.setContent(porabaIntent);

...

tabHost.addTab(porabaspec); 
... 
```

此选项卡式活动有一个按钮事件，它调用异步任务，该任务执行第二个活动，将一些数据返回给选项卡式活动。此时，我想用我收到的新数据更新 Tab 1 Activity (porabaIntent)。

我该怎么做呢？如果我在初始化选项卡时传递捆绑的数据，则数据在更改时不会更新，但是如果我尝试`onPostExecute()`以异步任务的方法发送它，我似乎无法将其绑定到`porabaIntent`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T13:13:38.813

我发现解决这个问题的方法是在主选项卡式活动中使用静态变量，可以通过其子选项卡式活动访问和修改。

# php - 鼠标悬停时弹出消息

> ID：11428033
> 
> 赞同：0
> 
> 时间：2012-07-11T07:53:54.990
> 
> 标签：php, css, wordpress

我正在用wordpress开发一个网站。标题有一个菜单栏。现在我想要的是，当我将鼠标悬停在菜单项上时，我应该会弹出一个消息。

![在此处输入图像描述](../Images/460dff6b77449d96db816af785d02f46.png)

在上述情况下，当鼠标放在服务菜单项上时，它应该是“Umang 的服务”。

以下是鼠标悬停的css代码

```
 #access li a:hover 
    {
      text-decoration:underline;        
     } 
```

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:57:39.437

使用`title`HTML 属性。悬停一段时间后会导致弹出窗口。

它也是原生的和语义的。

**[现场示例](http://dabblet.com/gist/3088869)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:01:04.440

试试这个

```
<element onmouseover="alert('text')">qwe</element> 
```

或者

```
<element onmouseover="this.innerHTML='someText'"></element> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:02:15.873

使用标题属性

```
<a href="#" title="Message">Hover!</a> 
```

或谷歌“jquery tooltip”

[http://cssglobe.com/post/1695/easyest-tooltip-and-image-preview-using-jquery](http://cssglobe.com/post/1695/easiest-tooltip-and-image-preview-using-jquery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T07:59:17.030

你可以用一些 div 来做到这一点`position: absolute`，然后让某事像：

**CSS**

```
#access li a:hover #someAbsolutePositioningDiv
{
  display: block;    
  position: absolute;
  top: some value;
  left: some value;
}

#someAbsolutePositioningDiv
{
  display: none;
} 
```

**HTML**

```
<ul id="access">
 <li>
   Text
   <div id="someAbsolutePositioningDiv">Some other text</div>
 </li>
</ul> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:59:26.700

将 li 设置为 position:relative，在其中放置另一个元素（弹出消息）并给它 position:absolute 和 display:none，并将其定位为 left、top 等（如：left:10px;top:-50px ;) 到你想要的位置。然后将其设置为在悬停时显示：

```
li:hover .popup-message {display:block;} 
```

# android - Android 中的 3D 立方体过渡 - 完整代码示例

> ID：11428035
> 
> 赞同：1
> 
> 时间：2012-07-11T07:54:01.527
> 
> 标签：android, android-animation

我正在寻找一个完整的代码示例，以使 3D 立方体从一个活动过渡到第二个活动。请帮忙。如果有办法但只能在同一个活动（viewFlipper 等）中，那也没关系。

像这样的东西-> [http://www.youtube.com/watch?v=zcOwMgYrjAg](http://www.youtube.com/watch?v=zcOwMgYrjAg)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:31:57.423

使用下面的链接获取 3D 立方体过渡的完整示例。

[活动之间的 3D 过渡动画](http://www.sfonge.com/forum/topic/3d-transition-animation-between-activities)

[使用 OpenGL ES 和 Android 创建旋转立方体](http://www.intransitione.com/blog/create-a-spinning-cube-with-opengl-es-and-android/)

# mysql - MySQL Query group by 以获取最后一个 id

> ID：11428037
> 
> 赞同：2
> 
> 时间：2012-07-11T07:54:13.643
> 
> 标签：mysql, group-by

这是我的桌子

```
id | sender | receiver | msg  
-----------------------------
1  | jon    | jack     | buzz ...  
2  | jack   | jon      | ?  
3  | adel   | jon      | met me soon  
4  | jon    | adel     | okay  
5  | alex   | jon      | where ar u ?  
6  | jon    | adel     | okay  
7  | adel   | alex     | don't forget the party  
8  | jon    | jack     | may i borrow ur car 
9  | alex   | adel     | of course
10 | jack   | jon      | ok
11 | jack   | jon      | watch the gas
12 | alex   | jon      | i'm dying here
13 | jon    | alex     | 5 mnt .. 
```

我想和他的朋友这样得到乔恩的最后一条消息

```
id | sender | receiver | msg
-------------------------------------------
13 | jon    | alex     | 5 mnt ..
11 | jack   | jon      | watch the gas
6  | jon    | adel     | okay 
```

如何查询，以获得该结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T07:58:51.753

用这个：

```
SELECT *
FROM table
WHERE id IN (
    SELECT MAX(id)
    FROM table
    WHERE sender = 'jon' 
       OR receiver = 'jon'
    GROUP BY IF(sender = "jon", receiver, sender)
) 
ORDER BY id DESC; 
```

**编辑**：感谢您的编辑 ypercube，我真的忘记了一些重要的事情 :)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T07:56:00.120

这将返回您想要的内容：

```
SELECT * FROM 
(SELECT * FROM `table` WHERE sender="jon" OR receiver="jon" ORDER BY id DESC) a 
GROUP BY IF(sender = "jon", receiver, sender) 
ORDER BY id DESC 
```

抱歉第一次回答错了，我想我没有仔细阅读问题。:(

这是测试：

[http://sqlfiddle.com/#!2/e66ac/2](http://sqlfiddle.com/#!2/e66ac/2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:13:57.890

```
SELECT * FROM 
(SELECT * FROM tblA WHERE sender="jon" OR receiver="jon" ORDER BY id DESC) a 
GROUP BY IF(sender = "jon", receiver, sender) 
```

请参考[http://sqlfiddle.com/#!2/44099/1](http://sqlfiddle.com/#!2/44099/1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T07:56:14.273

尝试这个：：

```
SELECT * 
FROM table 
WHERE sender ='jon' OR receiver='jon' 
GROUP BY msg 
ORDER BY id desc 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T07:58:05.183

我认为你需要这样的东西：

`SELECT * FROM my_table WHERE sender="jon" OR receiver="jon" ORDER BY id DESC`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-06-26T07:23:11.290

**这是一个简单的查询，您可以根据自己的逻辑进行更改**

```
SELECT * FROM tbl_enquiry WHERE id IN (
  SELECT Max(id) FROM tbl_enquiry WHERE date = '06/25/2015' GROUP BY cust_id 
) LIMIT 0 , 30 
```

# php - IMAP - 编码 UTF-8

> ID：11428040
> 
> 赞同：1
> 
> 时间：2012-07-11T07:54:23.360
> 
> 标签：php, character-encoding, imap

我的脚本不显示波兰语字符。如何解决？谢谢你。

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title></title>
    </head>
    <body>

        <?php
        header('Content-Type: text/html; charset=utf-8');

        $hostname = '{imap.gmail.com:993/imap/ssl}INBOX';
        $username = 'user@gmail.com';
        $password = 'pass';

        $inbox = imap_open($hostname, $username, $password) or die('Cannot connect to Gmail: ' . imap_last_error());

        $emails = imap_search($inbox, 'ALL');

        if ($emails) {
            $output = '';

            foreach ($emails as $email_number) {
                $overview = imap_fetch_overview($inbox, $email_number, 0);
                $message = imap_fetchbody($inbox, $email_number, 2);

                $output.= '<div class="toggler ' . (imap_utf8($overview[0]->seen) ? 'read' : 'unread') . '">';
                $output.= '<span class="subject">' . imap_utf8($overview[0]->subject) . '</span> ';

                $output.= '<span class="from">' . imap_utf8($overview[0]->from) . '</span>';
                $output.= '<span class="date">on ' . imap_utf8($overview[0]->date) . '</span>';
                $output.= '</div>';

                /* output the email body */
                $output.= '<div class="body">' . imap_utf8($message) . '</div>';
            }

            echo $output;
        }
        imap_close($inbox);
        ?>
    </body>
</html> 
```

示例输出：

> Je=B6li chcesz uatrakcyjni=E6 wygl=B1d swojej skrzynki odbiorczej za pom= oc=B1

我预计：

> Jeśli chcesz uatrakcyjnić wygląd swojej skrzynki odbiorczej za pomocą

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:57:19.327

该电子邮件不是 UTF-8（引用），因此`imap_utf8`在这里不起作用。

但是之前的一个错误是您没有检查电子邮件使用的编码。

怎么修？

1.  检查电子邮件/正文的编码。
2.  然后将该编码转换为 UTF-8 用于显示目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:05:58.737

这看起来像[Quoted-Printable](http://en.wikipedia.org/wiki/Quoted-printable)编码。

只需将您的替换`imap_utf8`为[quoted_printable_decode](http://php.net/manual/en/function.quoted-printable-decode.php)并使用iconv 从（大概）波兰字符集转换为utf8。

# php - Symfony2 中的 prod env 不附带背景图像

> ID：11428041
> 
> 赞同：1
> 
> 时间：2012-07-11T07:54:23.547
> 
> 标签：php, symfony

在 symfony2 中，css 中的背景图像在开发环境中运行良好，但在生产环境中却不行

这里是一个 CSS

```
background-image: url("../../bundles/acmeweb/images/logo-big.png"); 
```

在开发（开发）环境中，背景图像工作正常，而作为生产（产品）环境，图像没有出现。

我需要在图像 url 之间附加带有“web”的 url，以便在生产中工作，例如

```
background-image: url("../../web/bundles/acmeweb/images/logo-big.png"); 
```

图像位于`MyBundle/Resources/public/images`

如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:25:27.063

Symfony2 对您的问题有完整的文档。仔细阅读:) [http://symfony.com/doc/current/book/templating.html#linking-to-assets](http://symfony.com/doc/current/book/templating.html#linking-to-assets)

所有图像和样式源应位于捆绑文件夹中：

```
src/MyBundle/Resources/public/css
src/MyBundle/Resources/public/images 
```

但只有`web`文件夹可以从外部访问，所以当你执行命令时

```
app/console assets:install web --symlink 
```

它会在**web**文件夹中创建指向您的文件的链接：

```
web/bundles/acmeweb/css
web/bundles/acmeweb/images 
```

所以在 CSS 中你应该总是定义相对路径。在您的情况下，它将是：

```
background-image: url("../images/logo-big.png"); 
```

在树枝中，您应该使用`asset()`函数来链接您的样式：

```
<link href="{{ asset('bundles/acmeweb/css/yourstylesheet.css') }}" rel="stylesheet" type="text/css" /> 
```

而已

再次，仔细阅读文档 - 它包含所有这些基本内容；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:10:59.280

您正在使用相对路径来获取图像，这可能会导致一些问题。所以不要尝试绝对路径。

例如 path = 到达 logo-big.png 的绝对路径 这是 CSS 背景图像： url("path");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T16:25:17.707

将路径更改为：

```
background-image: url("/bundles/acmeweb/images/logo-big.png"); 
```

您可能还想清除缓存：

```
php app/console cache:clear --env=prod 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-01T02:59:21.837

让其他来这里的人清楚

定义你的文件

*   mybundle/资源/公共/css

*   mybundle/资源/公共/图像

ETC

在您的 CSS 相关文件中引用您的图片，例如

```
body {
background: url('../images/mypicture.jpg') no-repeat center center fixed;
} 
```

在你的树枝文件中

```
{% stylesheets 'bundles/mybundle/css/*' filter='cssrewrite' %}
<link rel="stylesheet" href="{{ asset_url }}" />
{% endstylesheets %} 
```

现在让它运行

```
php app/console cache:clear --env prod
php app/console cache:clear --env dev

php app/console assets:install

php app/console assetic:dump 
```

现在是我的踢球者

```
php app/console assetic:dump --env prod 
```

这让它为我工作，希望它可以帮助别人

# java - 使用java左键单击任务托盘图标上的弹出窗口（菜单）

> ID：11428042
> 
> 赞同：13
> 
> 时间：2012-07-11T07:54:28.213
> 
> 标签：java, swing, trayicon, jpopupmenu

我正在使用java中的任务托盘图标，我喜欢使用左键打开一个弹出菜单，就像我在右键单击时打开的一样，请帮助我快速响应。

提前致谢...

这是用于右键单击的代码需要在左键单击时显示相同的弹出窗口...不要忘记放置任何名称为“titleImg.jpg”的图像@“src/img”文件夹

只需运行这个......这是一个工作示例，但我必须使用左键单击显示相同的弹出窗口

我已经检查了鼠标监听器，它监听托盘图标上的左键单击，但是如何使用它来显示弹出菜单？？？

```
 package com.abc.dao;

import java.awt.AWTException;
import java.awt.CheckboxMenuItem;
import java.awt.Menu;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;

public class MyTaskTray {
    public static void main(String arg[]){

        //Check the SystemTray is supported
        if (!SystemTray.isSupported()) {
            System.out.println("SystemTray is not supported");
            return;
        }
        final PopupMenu popup = new PopupMenu();
        final TrayIcon trayIcon =
                new TrayIcon(Toolkit.getDefaultToolkit().getImage(new java.io.File("").getAbsolutePath()+"/bin/img/titleImg.jpg"), "Library Drop");
        final SystemTray tray = SystemTray.getSystemTray();

        // Create a pop-up menu components
        MenuItem aboutItem = new MenuItem("About");
        CheckboxMenuItem cb1 = new CheckboxMenuItem("Set auto size");
        CheckboxMenuItem cb2 = new CheckboxMenuItem("Set tooltip");
        Menu displayMenu = new Menu("Display");
        MenuItem errorItem = new MenuItem("Error");
        MenuItem warningItem = new MenuItem("Warning");
        MenuItem infoItem = new MenuItem("Info");
        MenuItem noneItem = new MenuItem("None");
        MenuItem exitItem = new MenuItem("Exit");

        //Add components to pop-up menu
        popup.add(aboutItem);
        popup.addSeparator();
        popup.add(cb1);
        popup.add(cb2);
        popup.addSeparator();
        popup.add(displayMenu);
        displayMenu.add(errorItem);
        displayMenu.add(warningItem);
        displayMenu.add(infoItem);
        displayMenu.add(noneItem);
        popup.add(exitItem);

        trayIcon.setPopupMenu(popup);

        try {
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.out.println("TrayIcon could not be added.");
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-12T12:15:02.880

您实际上缺少的是显示 PopupMenu 的父组件。实现此目的的一种方法是使用“不可见”框架（实际上它是可见的，但边界为 0 且未装饰，因此您看不到它），如下所示：

```
import java.awt.AWTException;
import java.awt.CheckboxMenuItem;
import java.awt.Frame;
import java.awt.Menu;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.Toolkit;
import java.awt.TrayIcon;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.net.MalformedURLException;
import java.net.URL;

public class MyTaskTray {
    public static void main(String arg[]) throws MalformedURLException {
        final Frame frame = new Frame("");
        frame.setUndecorated(true);
        // Check the SystemTray is supported
        if (!SystemTray.isSupported()) {
            System.out.println("SystemTray is not supported");
            return;
        }
        final TrayIcon trayIcon = new TrayIcon(Toolkit.getDefaultToolkit().getImage(
                new URL("http://home.comcast.net/~supportcd/Icons/Java_Required.jpg")), "Library Drop");
        final SystemTray tray = SystemTray.getSystemTray();

        // Create a pop-up menu components
        final PopupMenu popup = createPopupMenu();
        trayIcon.setPopupMenu(popup);
        trayIcon.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getButton() == MouseEvent.BUTTON1) {
                    frame.add(popup);
                    popup.show(frame, e.getXOnScreen(), e.getYOnScreen());
                }
            }
        });
        try {
            frame.setResizable(false);
            frame.setVisible(true);
            tray.add(trayIcon);
        } catch (AWTException e) {
            System.out.println("TrayIcon could not be added.");
        }

    }

    protected static PopupMenu createPopupMenu() {
        final PopupMenu popup = new PopupMenu();
        MenuItem aboutItem = new MenuItem("About");
        CheckboxMenuItem cb1 = new CheckboxMenuItem("Set auto size");
        CheckboxMenuItem cb2 = new CheckboxMenuItem("Set tooltip");
        Menu displayMenu = new Menu("Display");
        MenuItem errorItem = new MenuItem("Error");
        MenuItem warningItem = new MenuItem("Warning");
        MenuItem infoItem = new MenuItem("Info");
        MenuItem noneItem = new MenuItem("None");
        MenuItem exitItem = new MenuItem("Exit");
        // Add components to pop-up menu
        popup.add(aboutItem);
        popup.addSeparator();
        popup.add(cb1);
        popup.add(cb2);
        popup.addSeparator();
        popup.add(displayMenu);
        displayMenu.add(errorItem);
        displayMenu.add(warningItem);
        displayMenu.add(infoItem);
        displayMenu.add(noneItem);
        popup.add(exitItem);
        return popup;
    }
} 
```

从 Java 1.7 开始，您可以添加以下行以从任务栏中删除应用程序栏：

```
frame.setType(Type.UTILITY); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T08:07:18.437

可以添加`ActionListener`，`TrayIcon`鼠标双击可以显示`JOptionPane`

```
trayIcon.addActionListener(new ActionListener() {

   @Override
   public void actionPerformed(ActionEvent e) {
       JOptionPane.showMessageDialog(null, "This dialog box is run from System Tray");
   }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:06:50.870

我认为您正在寻找一个[`MouseListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)您将添加到您的`TrayIcon`并且将在单击、移动鼠标​​上的按钮等时激活的。要使其在左键单击时运行，只需查看[`MouseEvent`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html)( `BUTTON1`) 上的 ButtonMasks 用于鼠标左键点击。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T08:07:58.367

[您可以在http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)阅读官方教程或查看[http://weblogs.java.net/blog/ixmal/archive/2006/05 /using_jpopupmen.html](http://weblogs.java.net/blog/ixmal/archive/2006/05/using_jpopupmen.html)用于使用 jpopumenu 的解决方案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-10T18:46:10.590

这应该有效：

```
trayIcon.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
        JOptionPane.showMessageDialog(null, "This shows after a left-click on tray icon");
    }
}); 
```

如果您想要不同类型的事件（不仅仅是上面示例中的点击事件），请覆盖任何其他方法。

# jquery - 在切换事件中获取折叠 div 的 ID

> ID：11428043
> 
> 赞同：1
> 
> 时间：2012-07-11T07:54:29.210
> 
> 标签：jquery

我有多个 div 设置，带有标题和内容。单击标题时，它会展开所选 div 上的内容，并隐藏所有其他内容。这很好用，但我需要获取所有已隐藏或显示的内容 div 的 ID。

这是我的隐藏/显示 jquery：

```
$(".CollapsableHeader").next(".CollapsableDiv").hide();
            $(".CollapsableHeader").click(function () {
                $('.active').not(this).toggleClass('active').next('.CollapsableDiv').slideToggle(300, function () {
                    alert($(this).next('.CollapsableDiv').attr('id'));
                });
                $(this).toggleClass('active').next().slideToggle("fast");

            }); 
```

因此，在此示例中，我的警报始终显示为`undefined`. 我尝试过的所有内容都显示为`undefined`. 知道如何获取`.CollapsableDiv`'s 的 ID 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:58:49.443

如果您在单击之后寻找`id`“下一个” ，请在单击处理程序中而不是回调中获取它：`.CollapsableDiv``.CollapsableHeader``slideToggle`

```
$(".CollapsableHeader").next(".CollapsableDiv").hide();
            $(".CollapsableHeader").click(function () {
                // Grab it here
                var id = $(this).next('.CollapsableDiv').attr('id');
                $('.active').not(this).toggleClass('active').next('.CollapsableDiv').slideToggle(300, function () {
                    // Then use it here
                    alert(id);
                });
                $(this).toggleClass('active').next().slideToggle("fast");

            }); 
```

原因是`this`你的`slideToggle`回调内部是一个不同的元素（具体来说，它是你最终得到的 from `$('.active').not(this).toggleClass('active').next('.CollapsableDiv')`。）

# algorithm - 确定点相对于给定 3D 表面的位置

> ID：11428051
> 
> 赞同：0
> 
> 时间：2012-07-11T07:54:53.617
> 
> 标签：algorithm, vector, 3d, convex

我正在尝试实现用于计算 3D 凸包的快速壳算法。问题是我需要知道一个点是否可以“看到”给定的表面。

该表面具有顺时针或逆时针方向。

我写了一个opengl小程序，以图形方式说明算法操作。

我尝试了我看到其他算法使用的各种方程（归一化叉积，点到平面的距离）

它们都导致在算法中采取了错误的步骤。这意味着他们决定从该点可以看到某个表面（您可以通过图形看到它不是）

表面或“面”的示例。

```
e1 = 0, 0, 0 to 10, 0, 0
e2 = 10, 0, 0 to 10, 10, 0
e3 = 10, 10, 0 to 0, 10, 0
e4 = 0, 10, 0 to 0, 0, 0

<---------/\
||        ||
||        ||
||        ||
\/---------> 
```

假设我有两个点，我想知道它们位于表面的哪一侧。

p1 = -1, -1, -1 p2 = 1, 1, 1

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:44:56.733

第一步是确定平面的法线。这可以通过叉积来实现。例如：

```
normal = cross(e2 - e1, e3 - e1); 
```

然后你需要一个向量来比较法线：

```
compare = point - e1 
```

并且两个向量的点积描述，如果两个向量都指向同一法线方向：

```
side = dot(normal, compare) 
```

如果 side > 0，则该点位于法线指向的平面的一侧。如果它<0，它在对面。如果它= 0，它正好在平面上。

重要的一步是定义法线，使其指向正确的描述。仅使用多边形，您可以按角点的顺序定义法线。例如，上侧是点顺时针方向的一侧。如果您需要不同的东西，您必须提供更多信息。

# c - 如何将“SInt16”转换为“double”？

> ID：11428056
> 
> 赞同：1
> 
> 时间：2012-07-11T07:55:00.500
> 
> 标签：c, type-conversion

如何转换`SInt16`为`double`或？我知道我可以转换成这样：`Float32``double``SInt16``Float32`

```
double *buffer;
SInt16* frames;

for (i = 0; i < number_of_frames; i++) {
  Float32 currentFrame = frames[i] / 32768.0f;
} 
```

但我正在使用许多 C 函数，我想将数据传递给它们`double`。

现在我使用这段代码：

```
for (i = 0; i < number_of_frames; i++) {

  Float32 currentFrame = frames[i] / 32768.0f;

  buffer[i] = currentFrame;
} 
```

但我不确定结果是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:10:26.893

原始 C 类型（整数、字符、浮点类型）可以与强制转换相互转换。因此，给定一个有符号整数值`my_signed_integer`，您可以`double`通过简单的转换将其转换为 a：

```
((double) my_signed_integer) 
```

我猜你的`Sint16`and`Float32`是 typedef，所以你仍然可以做同样的事情：

```
((double) my_SInt16_value) /* Just use this expression as a double
                              because it IS a double.  */ 
```

最终，这意味着：

```
for (i=0; i<number_of_frames; i++ )
  {
    buffer[i] = ((double) frames[i]) / 32768.0;
  } 
```

^(实际上，你不需要这个演员表。由于[隐式转换](http://osr507doc.sco.com/en/tools/clang_conv_implicit.html)`frames[i]`，将自动转换为。`double`)

# php - 我需要在主类之前先在 symfony2 中创建接口吗

> ID：11428057
> 
> 赞同：2
> 
> 时间：2012-07-11T07:55:03.150
> 
> 标签：php, symfony, doctrine-orm

我正在尝试实现我自己的 userBundle，并且我从 FOSUSerBunle 获得了一些想法。当我看到代码时，我注意到他首先创建了 UserInterface，然后在用户实体上实现了该接口。

我想知道 userInterface 有什么用，为什么不能直接做 UserClass

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:35:24.550

接口是一个面向对象的编程概念。在 PHP 中，它声明（而不是定义）一组公共方法。任何实现接口的类都需要定义接口中声明的方法。您可以将接口视为合同。

使用接口允许您“[编程到接口](http://www.artima.com/lejava/articles/designprinciples.html)”。

在 FOSUserBundle 的情况下，`UserInterface`它旨在用于使您的用户实体实际与捆绑的其余部分一起使用。通过同意 的合同`UserInterface`，您的用户实体将包含 FOSUserBundle 所需的必要方法。此外，您可能会看到在 FOSUserBundle 中使用了类型提示，它专门指代`UserInterface`，而不是具体的用户类。

如果您正在滚动自己的用户包，则不需要实现任何接口，因为设计完全取决于您。但是，听起来你在这里重新发明轮子，所以我建议只使用 FOSUserBundle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:38:01.080

因此，您可以创建自己的实现此接口的用户类。这样您就可以轻松地将您的课程与 FOSUserBundle 集成

# ruby-on-rails-3 - nil:NilClass 的未定义方法“大小”

> ID：11428060
> 
> 赞同：0
> 
> 时间：2012-07-11T07:55:23.143
> 
> 标签：ruby-on-rails-3

为什么我的代码返回此错误？

```
@articles = Article.order("id DESC").where(:visible => 1)
if @aritcles.size > 15
  @articles = Article.order("id DESC").where(:visible => 1).limit(15)
end 
```

返回：

```
undefined method `size' for nil:NilClass 
```

如果我跑

```
@articles = Article.order("id DESC").where(:visible => 1)
@articles.size 
```

它返回一个整数...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:02:30.407

如果那来自您的真实代码，那么您拼写错误`articles`为`aritcles`.

如果不同，请提供真实代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:06:17.170

`if @aritcles.size > 15`应该是`if @articles.size > 15`。

但是您的代码很奇怪，没有必要这样做。只需执行以下操作就足够了。

```
@articles = Article.order("id DESC").where(:visible => 1).limit(15) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:34:20.263

替换
`@aritcles.size > 15`
为
`@articles.seze > 15`

# java - 使用计时器更新 android ui

> ID：11428061
> 
> 赞同：1
> 
> 时间：2012-07-11T07:55:28.060
> 
> 标签：java, android, user-interface, timer

我是 android 编程的新手，我搜索了关于这个主题的所有答案，但我仍然无法实现我想做的事情。我的问题是：我想在给定的时间段内用另一张图片更新 imageview 的图片。imageview每次都需要更新不同的图片，总共15-20次。这是我到目前为止所做的，但它根本不起作用。

```
public class IlkMasal extends Activity {

    MediaPlayer sound;
    private Handler m_handler;
    private ImageView image;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.firsttale);
        m_handler = new Handler();

    Button menu = (Button)findViewById(R.id.Button01);
    Button startbutton = (Button)findViewById(R.id.button1);

    sound = MediaPlayer.create(this, R.raw.music4);
    sound.start();
    image = (ImageView)findViewById(R.id.imageView1);
    image.setImageResource(R.drawable.picture2);

    startbutton.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            m_handler.removeCallbacks(m_statusChecker);
            m_handler.postDelayed(m_statusChecker, 2000);
        }
    });

    menu.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            Intent main= new Intent("android.intent.action.MAIN");
            startActivity(main);
        }  
    });

    }

    Runnable m_statusChecker = new Runnable()
    {
        public void run(){
            image.setImageResource(R.drawable.picture3);
            m_handler.removeCallbacks(m_statusChecker);
            m_handler.postDelayed(m_statusChecker, 2000);
        }
    };
} 
```

单击开始按钮后，我想每次都用不同的图片更新 ui。我会感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:04:14.410

Yo can set this runnable to run on your onClic and you will still need a method to get the next picture you want to show.

```
final int delay = 5000;
final int period = 1000;
final Runnable r = new Runnable() {
   public void run() {
    image.setImageResource(getNextPicture());
    postDelayed(this, period);
   }
 };

postDelayed(r, delay); 
```

Regards.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:58:51.130

使用[runOnUiThread](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CFQQFjAA&url=http://developer.android.com/reference/android/app/Activity.html&ei=szH9T4fjNIS0rAfQvLzUBg&usg=AFQjCNEVbcf_xF52Np66Qp881y0W1JzaTQ&sig2=nHaF1VjehSyFKKfeGTaCkA)从非 Ui 线程更新 UI 元素：

```
 Current_Activity.this.runOnUiThread(new Runnable() {

     @Override
     public void run() {
      // TODO Auto-generated method stub
      image.setImageResource(R.drawable.picture3); //Update UI elements here
     }
    }); 
```

# jquery-mobile - jquery移动幻灯片列表视图

> ID：11428062
> 
> 赞同：0
> 
> 时间：2012-07-11T07:55:30.087
> 
> 标签：jquery-mobile

我正在创建谷歌地图位置的 JQM 页面。我需要在按钮/链接单击或任何其他事件列表上滑动。这很像[http://indiqo.eu/demos/hotcake/](http://indiqo.eu/demos/hotcake/)。有什么好的解决方案吗？

# android - Android：合并标签不适用于片段

> ID：11428066
> 
> 赞同：4
> 
> 时间：2012-07-11T07:55:35.313
> 
> 标签：android, android-layout, android-fragments

我是使用片段的初学者。是否可以有这样的布局：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
    <include layout="@layout/waiting_dialog"/>
    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/my_layout"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@drawable/bg_tile"
        android:gravity="center_horizontal" 
        android:orientation="vertical"
        android:visibility="invisible">

        <include layout="@layout/no_entries"/>      
    </LinearLayout>
</merge> 
```

并在片段的 onCreateView 中使用它，如下所示：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, final Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.main, container, false); 
    return view;
} 
```

总是出现以下错误：

```
07-11 09:53:47.608: E/AndroidRuntime(5602): android.view.InflateException: \
  <merge /> can be used only with a valid ViewGroup root and attachToRoot=true 
```

如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:02:50.880

显然，正如[这里](https://stackoverflow.com/a/13351391/281545)所说，这是不可能的。

我所做的是完全放弃“根布局”（请参阅​​ 参考资料`battery_details.xml`）。所以我为我的 MonitorActivity 创建了一个片段布局：

```
public class MonitorActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_monitor);
    }
} 
```

布局在哪里：

```
<!-- activity_monitor.xml -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MonitorActivity" >
    <fragment android:name="di.k23b.hw3.fragments.MonitorDetailsFragment"
            android:id="@+id/monitor_details"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
    <fragment android:name="di.k23b.hw3.fragments.MonitorPrefsFragment"
            android:id="@+id/monitor_preferences"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
</LinearLayout> 
```

在 MonitorDetailsFragment 类中：

```
public class MonitorDetailsFragment extends Fragment {  
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        return inflater.inflate(R.layout.battery_details, container, false); // NEVER TRUE !
    }
} 
```

其中`battery_details.xml`（创建于`res/layout`）：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/batteryTextHealth"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:ems="10"
    android:text="BATTERRRYYY"
    android:textIsSelectable="true" >
</TextView> 
```

作品。所以也许你可以编辑你使用片段的布局，在`<LinearLayout>`那里添加并将元素`<LinearLayout>`直接放入你使用的布局中`OnCreateView`- 删除合并标签

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:14:34.227

我认为您已经将片段放置在活动中的某个位置。（我说得对吗？）这就是为什么他声称已经有了父母。

如果你真的想重用它，那么你必须将它从其现有视图层次结构中的父级中分离出来。

当扩展以 a 开头的布局时`<merge />`，您必须指定父级`ViewGroup`并且还必须设置`attachToRoot`为`true`。

# c# - 用户控件中的文本框，无法从后面的代码中编辑文本依赖属性

> ID：11428067
> 
> 赞同：0
> 
> 时间：2012-07-11T07:55:36.763
> 
> 标签：c#, wpf, xaml, data-binding, dependency-properties

我的 UserControl 包含一个 TextBox 和一个 Button。TextBox 的 Text 由名为 X 的依赖属性正确填充。

**我的目标：** 当我按下按钮时更改 X 的值（例如 TextBox 的文本）。

我已将 UserControl 定义如下：

```
<StackPanel Orientation="Horizontal" >
    <TextBox Name="Xbox" Text="{Binding Path=X}" Width="50"/>
    <Button Content="Current" Click="InsertCurrentBtnClick" />
</StackPanel> 
```

使用代码隐藏：

```
 public double X
    {
        get { return (double)GetValue(XProperty); }
        set { SetValue(XProperty, value); }
    }

    public static readonly DependencyProperty XProperty =
        DependencyProperty.Register("X", typeof(double), typeof(MyUserControl), new PropertyMetadata(0.0));

    private void InsertCurrentBtnClick(object sender, RoutedEventArgs e)
    {
        X = 0.7;

        //BindingOperations.GetBindingExpression(this, XProperty).UpdateTarget();
        //BindingOperations.GetBindingExpression(Xbox, TextBox.TextProperty).UpdateTarget();
        //BindingOperations.GetBindingExpression(Xbox, XProperty).UpdateTarget();
        //Xbox.GetBindingExpression(TextBox.TextProperty).UpdateTarget();
        //GetBindingExpression(XProperty).UpdateTarget();
    } 
```

我尝试了几件事 - 一次一件 - （见下文`X=0.7;`）强制更新 TextBox 文本，但到目前为止没有任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:06:07.547

我会这样写：

```
 public double X
    {
        get { return (double)GetValue(XProperty); }
        set { SetValue(XProperty, value); }
    }

    public static readonly DependencyProperty XProperty =
        DependencyProperty.Register("X", typeof(double), typeof(MainPage), new PropertyMetadata(new PropertyChangedCallback(Callback)));

    public static void Callback(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        (o as MainPage).Xbox.Text = e.NewValue.ToString();
    }

    private void InsertCurrentBtnClick(object sender, RoutedEventArgs e)
    {
        X = 0.7;
    } 
```

和 xaml 代码：

```
 <StackPanel Orientation="Horizontal" >
        <TextBox Name="Xbox" Width="50"/>
        <Button Content="Current" Click="InsertCurrentBtnClick" />
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:13:27.190

您需要`DataContext`为您设置 Control。正如我`X`在您的控件中看到的那样，您需要这样做：

```
 public MyUserControl()
    {
        InitializeComponent();

        // add this line
        this.DataContext = this;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:13:34.583

虽然，您也可以绑定它，只需更改 xaml：

```
<UserControl x:Class="SilverlightApplication1.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
Name="myWidnow"
d:DesignHeight="300" d:DesignWidth="400">

<Grid x:Name="LayoutRoot" Background="White">
    <StackPanel Orientation="Horizontal" >
        <TextBox Name="Xbox" Width="50" Text="{Binding ElementName=myWidnow, Path=X}" />
        <Button Content="Current" Click="InsertCurrentBtnClick" />
    </StackPanel>
</Grid> 
```

请注意，我已将 Name 属性添加到 UserControl。在这种情况下，您不必更改隐藏代码中的任何内容。

# iphone - 当应用程序每 30 分钟后处于挂起/后台模式时，如何读取/更新本地 sqlite 数据？

> ID：11428075
> 
> 赞同：0
> 
> 时间：2012-07-11T07:56:18.963
> 
> 标签：iphone, sqlite, ios5, background-process

当应用程序每秒处于挂起/后台模式时，如何读取/更新本地 sqlite 数据？下面是我现在正在尝试做的代码我只想在每秒之后 NsLog 本地 Sqlite 表中存在的所有 Id 但无法做到这一点。谁能告诉我我做错了什么，或者任何人都可以纠正以下代码。 **提前致谢**

```
-(void)applicationDidEnterBackground:(UIApplication *)app
{
    if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4
        if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
            UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance

            __block UIBackgroundTaskIdentifier background_task; //Create a task object

            background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
                [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
                background_task = UIBackgroundTaskInvalid; //Set the task to be invalid

                //System will be shutting down the app at any point in time now
            }];

            //Background tasks require you to use asyncrous tasks

            dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
            dispatch_source_t timerSource = dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER, 0, 0, backgroundQueue);
            dispatch_source_set_timer(timerSource, dispatch_time(DISPATCH_TIME_NOW, 0), 1*NSEC_PER_SEC, 0*NSEC_PER_SEC);
            dispatch_source_set_event_handler(timerSource, ^{
                [self BackGroundTaskFunction];
            });
            dispatch_resume(timerSource);
        }
    }
}
-(void)BackGroundTaskFunction
{
   [self GetUserName]
    if (recordArray.count>0) 
    {
        for (int i=0; i<recordArray.count; i++) 
        {
            DB_data *db=(DB_data *)[recordArray objectAtIndex:i];
            Nslog(@"%d",db.Id);          
        }
    }
}
-(void)GetUserName{
    self.recordArray = [[NSMutableArray alloc] init];
    {
        const char *sql = "select * from UserName";
        sqlite3_stmt *selectStatement;

        int returnValue = sqlite3_prepare_v2(database, sql, -1, &selectStatement, NULL);
        if(returnValue == SQLITE_OK)
        {
            while(sqlite3_step(selectStatement) == SQLITE_ROW)
            {
                [recordArray addObject:[[DB_data alloc] initwithDataSet:sqlite3_column_int(selectStatement, 0) UserName:[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectStatement, 1)]]];
            }
        }
        else
        {
            printf( "could not prepare statemnt: %s\n", sqlite3_errmsg(database) );
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:59:02.383

不，您不能这样做，只有播放音频、跟踪用户位置或 voip 客户端的应用程序才允许在后台运行。

如果您不属于这些类型的应用程序之一，那么您将无法在后台运行。

您发布的代码允许您运行最长 10 分钟的冗长过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T08:22:39.110

我通过使用 NSRUNLOOP 解决了我的问题，它帮助我让应用程序继续在后台运行

# iphone - iOS - 谁能建议我如何将 gmail 帐户集成到我的应用程序中并获取所有电子邮件的列表？

> ID：11428077
> 
> 赞同：5
> 
> 时间：2012-07-11T07:56:32.243
> 
> 标签：iphone, objective-c, search, ios5, gmail

我正在开发一个应用程序，它具有使用 Gmail 帐户搜索用户电子邮件的功能，但我不知道如何将 Gmail 帐户集成到我的应用程序中并获取所有电子邮件的列表。请让我知道是否有适用于 iOS 的 Gmail 的任何搜索 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:22:34.493

您可能想查看这个网站，因为 Google 没有 API 可以让您收到电子邮件。您需要通过 POP 协议执行此操作。

[http://www.example-code.com/objc/pop3_gmail.asp](http://www.example-code.com/objc/pop3_gmail.asp)

然后在此处查看库的功能 [http://www.chilkatsoft.com/email-features.asp](http://www.chilkatsoft.com/email-features.asp)

并在此处下载库 [http://www.chilkatsoft.com/downloads_objc.asp](http://www.chilkatsoft.com/downloads_objc.asp)

希望这能让你开始阅读电子邮件并列出它们，祝你好运！

作为和补充看看： [https ://github.com/mronge/mailcore](https://github.com/mronge/mailcore)

和另一个补充： [http ://www.etpan.org/](http://www.etpan.org/)

也很有趣： [http ://code.google.com/p/remail-iphone/](http://code.google.com/p/remail-iphone/)

# java - LinkedBlockingDeque.take() - 多线程中的单独实例

> ID：11428080
> 
> 赞同：0
> 
> 时间：2012-07-11T07:56:54.877
> 
> 标签：java, multithreading, cpu, take

在我们的多线程 java 应用程序中，我们为每个线程使用 LinkedBlockingDeque 单独的实例，假设线程 (c1, c2, .... c200)

线程 T1 和 T2 从套接字接收数据并将对象添加到 c1 到 c200 之间的特定使用者 Q。

run() 内部的无限循环，它调用 LinkedBlockingDeque.take()

在负载运行中，javae.exe 本身的 CPU 使用率为 40%。当我们总结系统中的其他进程时，整体 CPU 使用率达到 90%。

通过使用 JavaVisualVM，run() 占用了更多 CPU，我们怀疑 LinkedBlockingDeque.take()

所以尝试了像 thread.wait 和 notify 和 thread.sleep(0) 这样的替代方案，但没有改变。

每个消费者有单独 Q 的原因有两个，1.可能有多个来自 T1 或 T2 的消费者 c1 的请求 2.如果我们将所有请求转储到单个 q 中，c1 到 c200 的搜索时间会更多并且搜索条件将扩展。3.让消费者有单独的Q来处理他们的请求

试图减少 CPU 使用率并需要您的输入...

标清

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:56:17.903

1.  进行分析并确保队列方法占用相对较多的 CPU 时间。您的消息处理与放入/取出队列相比如此简单吗？每秒处理多少条消息？有多少个 CPU？如果每个 CPU 每秒处理的消息少于 100K，那么原因可能不是对队列的访问，而是消息处理本身。

2.  放入 LinkedBlockingDeque 会创建一个辅助对象的实例。而且我怀疑，每条新消息都是从堆中分配的，因此每条消息创建 2 次。尝试使用预先分配的消息池和循环缓冲区。

3.  200 个线程太多了。这意味着，太多的上下文切换。尝试使用 actor 库和线程池，例如[https://github.com/rfqu/df4j](https://github.com/rfqu/df4j)（是的，这是我的）。

4.  检查[http://code.google.com/p/disruptor/](http://code.google.com/p/disruptor/)是否适合您的需求。

# java - OSGi 生产准备好了吗？

> ID：11428081
> 
> 赞同：3
> 
> 时间：2012-07-11T07:56:59.420
> 
> 标签：java, osgi

我最近发现了 OSGi，它看起来很有希望。我想问已经使用 OSGi 实现的人，知道他们是否准备好生产。它们是否提供了生产环境中通常需要的功能？我读过很多实现，但我只看过 Apache Felix。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:47:34.620

OSGi 已准备好生产。企业和嵌入式领域有许多生产系统。许多 Java 应用程序服务器都有一个 OSGi 核心。Eclipse IDE 基于 OSGi。除了 Felix，还有其他开源实现（Eclipse Equinox 和 Knopflerfish）和来自 ProSyst 的商业实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:01:49.120

OSGi 提供它指定的内容，并且有可用的生产质量系统。但是，我要补充一点：实现*捆绑包热交换的*梦想需要程序员的密切合作，而且很容易被打破。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:06:15.113

OSGi 已经准备好生产很长时间了，尽管一直在添加新的，有时是实验性的特性，所以你应该问自己这个关于 OSGi 各个部分的问题。核心和声明式服务之类的基础是坚如磐石的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T20:35:48.487

OSGi 绝对可以投入生产。几乎所有大型 Java EE 服务器都已切换到 OSGi 作为其核心。更大的问题是您的开发团队和您的项目是否已经为 OSGi 做好了准备。大多数开发人员还没有扎实的 OSGi 经验，因此请确保开发人员接受过良好的培训。如果您有现有的项目，将它们转换为 OSGi 可能需要付出很多努力。（取决于它们的设计有多好。设计良好的松散耦合系统通常可以相对容易地移植）。

Felix 作为 OSGi 框架是一个不错的选择。我建议将它与[Apache Karaf](http://karaf.apache.org/)一起使用。它为 Felix 添加了许多有趣的功能。

# php - 我们应该如何处理一个糟糕的请求？

> ID：11428084
> 
> 赞同：1
> 
> 时间：2012-07-11T07:57:20.030
> 
> 标签：php, security

在 php 中，当您处理 GET/POST 请求时，您必须检查它们等。如果参数丢失或错误怎么办？如果它应该是某种黑客，那么你应该怎么做？只是`die();`用“dontHackMe”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:06:15.830

不，不要只`die()`使用“dontHackMe”。我看到了两个结果：

1.  如果用户不是恶意的并且这是一个错误或一个诚实的问题，那么您就没有向用户提供任何求助权。
2.  这实际上是一种相当业余的反应，甚至可能会激起真正的攻击者寻找更多安全漏洞。

HTTP 定义了响应[的状态码列表。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)只需选择正确的代码并使用该代码以及某种默认响应页面进行响应。

例如，如果请求在某些方面格式不正确或不正确，则可以使用 400（错误请求）响应代码。响应中的实际页面应该表明这是一个错误的请求，甚至可能为用户提供在需要时寻求帮助的选项（例如指向网站帮助部分的链接或指向联系表的链接） .

这种响应结构的原因有两个：

1.  通过提供有用的页面，您可以创建人们可以看到和欣赏的人类可读的输出形式，从而使您的应用程序更加用户友好。
2.  通过在您的响应中返回正确的状态代码（您的所有响应，而不仅仅是拒绝潜在的黑客攻击），您可以创建一个机器可读的界面，自动化客户端可以使用该界面更有效地与您的应用程序交互。（例如，一个 400 响应告诉一个非恶意的自动化客户端，它甚至不应该再次提出该请求……该请求已被接收并处理，但被发现是错误的。）

**编辑：**澄清......这是为了回应真正*糟糕的*请求。如果表单中提交的数据完全不正确（不符合业务规则，在预期数字的地方使用字母等），那么[Michael Hampton 提供了一个完美的建议](https://stackoverflow.com/a/11428234/328193)。本质上，服务器会“装傻”并重新显示表单。

不要向潜在的攻击者提供比他们已有的更多信息*。*（请记住，错误消息比他们已经拥有的信息更多。）应用程序只会说：“嗯......您尝试提交此表单，但它是错误的。在这里，再试一次。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:08:00.847

除非 HTTP 标头本身有问题，否则不要发送 HTTP 4xx 响应。

如果您收到来自客户端的无效输入，请重新显示表单，其中无效字段突出显示为无效。

# actionscript-3 - ArgumentError：removeChild 时出现错误 #2025

> ID：11428085
> 
> 赞同：1
> 
> 时间：2012-07-11T07:57:20.747
> 
> 标签：actionscript-3, flash, actionscript

我写了一个 AS3 类来制作一个 Counter 函数。在蓝色区域单击并按住鼠标以定义一个值。我尝试向用户显示提醒变化的指示图。

但是当我在蓝色区域快速拖动鼠标时，会出现错误：

```
ArgumentError: Error #2025: The supplied DisplayObject must be a child of the caller.
    at flash.display::DisplayObjectContainer/removeChild()
    at test/get2() 
```

我已经阅读了一些类似的问题帖子，但我无法解决这个问题。你能给我任何帮助吗？谢谢！

[在 CS6 中下载 .fla 和 .as](http://www.renyi-nick.com/wp-content/uploads/2012/07/test.rar)

[在 CS5 中下载 .fla 和 .as](http://www.renyi-nick.com/wp-content/uploads/2012/07/test_cs5.rar)

代码如下：

```
package  {
    import flash.display.Sprite;
    import flash.text.TextField;
    import flash.events.MouseEvent;
    import flash.text.TextFormat;
    import flash.events.Event;

    public class test extends Sprite{
        var i:int=20; //Set a var for the number displayed in stage.
        var mx1:Number; //Set a var to save MouseY when MOUSE_DOWN
        var mx2:Number; //Set a var to save MouseY when MOUSE_UP
        var num:int=0; //Set a var to calculate result
        var sub1:subbar1=new subbar1();
        var sub2:subbar2=new subbar2();
        var sub3:subbar3=new subbar3();
        var add1:addbar1=new addbar1();
        var add2:addbar2=new addbar2();
        var add3:addbar3=new addbar3();

        public function test() {
            init1(); //Set TextField and addEventListener
            initbar(); //Set indicator picture position when drag mouse
        }

        private function init1():void{
            label=new TextField();
            label.text=String(i);
            label.width=280;
            label.selectable=false;
            label.x=140;
            label.y=90;
            addChild(label);
            Controler.addEventListener(MouseEvent.MOUSE_DOWN,get1); //addEventListener to bluearea
        }

        private function initbar(){
            sub1.x=sub2.x=sub3.x=add1.x=add2.x=add3.x=30;
            sub1.y=35;
            sub2.y=55;
            add3.y=sub3.y=75;
            add2.y=95;
            add1.y=115;
        }

        private function get1(evt:MouseEvent):void{
            mx1=mouseY;
            trace(mx1);
            Controler.removeEventListener(MouseEvent.MOUSE_DOWN,get1);
            stage.addEventListener(MouseEvent.MOUSE_UP,get2); //addEventListener to MOUSE_UP
            stage.addEventListener(Event.ENTER_FRAME,lifebar); //add ENTER_FRAME to display indicator picture when move mouse
        }

        private function get2(evt:MouseEvent):void{
            mx2=mouseY;
            trace(mx2);
            if(mx2<=135&&mx2>=35&&mouseX<=130&&mouseX>=50){ //Limited enable area as the blue area
                if(num>=4){ //Set i value depends on num
                    i=i-3;
                }else if(num<=-4){
                    i=i+3;
                }else{
                    i=i-num;
                }
                label.text=String(i);
            }
            if(num==1){ //remove indicator picture when MOUSE_UP
                removeChild(sub1);
            }
            if(num==2){
                removeChild(sub1);
                removeChild(sub2);
            }
            if(num>=3){
                removeChild(sub1);
                removeChild(sub2);
                removeChild(sub3);
            }
            if(num==-1){
                removeChild(add1);
            }
            if(num==-2){
                removeChild(add1);
                removeChild(add2);
            }
            if(num<=-3){
                removeChild(add1);
                removeChild(add2);
                removeChild(add3);
            }
            stage.removeEventListener(MouseEvent.MOUSE_UP,get2);
            Controler.addEventListener(MouseEvent.MOUSE_DOWN,get1);
            stage.removeEventListener(Event.ENTER_FRAME,lifebar);
        }

        private function lifebar(evt:Event):void{ //Set a ENTER_FRAME to display indicator picture
            num=(mouseY-mx1)/12+1;
            trace(num);
            if(mouseY!=mx1&&num==1){
                addChild(sub1);

            }
            if(num==2){
                addChild(sub2);
            }
            if(num==3){
                addChild(sub3);
            }
            if(num==-1){
                addChild(add1);
            }
            if(num==-2){
                addChild(add2);
            }
            if(num==-3){
                addChild(add3);
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T03:31:47.620

您正在尝试删除尚未作为子项添加到显示列表的显示对象。

即使 sub1 已被实例化，但在您尝试删除它时尚未添加：

![孩子](../Images/0ee0360840713bade17539c1de5b2fce.png)

在调用显示对象之前，首先通过评估是否为真`removeChild(obj)`来测试它是否已作为子对象添加。`if(contains(obj))`

在 test.as 的第 67 行，您应该执行条件测试以查看是否`sub1`已添加到显示列表中：

```
if(num==1) {
    if(contains(sub1)) // test to see if sub1 is on the display list
        removeChild(sub1);
} 
```

如果这个问题在其他孩子身上仍然存在，您应该在这些块中添加额外的测试：

```
if(num==2){
    removeChild(sub1);
    removeChild(sub2);
} 
```

# javascript - 在 javascript 函数中调用 $.ajax

> ID：11428087
> 
> 赞同：0
> 
> 时间：2012-07-11T07:57:35.473
> 
> 标签：javascript, jquery, google-maps-api-3

**这个问题已经解决了，即使答案与标题无关。这是一个结构糟糕的问题，令我失望的是，我无法按原样删除它。感谢您的帮助并查看代码。**

我使用谷歌地图为我的应用程序提供了 2 个普通的 javascripts 函数和一个 jquery 函数。简而言之，它看起来像这样

```
<script type="text/javascript">
window.onload = function()
{
    initialize();
}
</script>

<script type="text/javascript">
var geocoder;
var markerE;
var theLocation;
var myLatlng;
var infowindow = new google.maps.InfoWindow();
var markersArray = [];
var eventMarkerArr = [];
var retrievedLatLng;
var retrievedLatLngArr = [];

var map;
$(document).ready(function(){    
 $('#tabs a').click(function(e){
    e.preventDefault();
    $(this).tab('show');
    if($(this).attr("href").substring(1)=='event')
    {   
        show('event');
        hide('location');
    }
    else if($(this).attr("href").substring(1)=='location')
    {
        show('location');
        hide('event');
    }
    });
   });

    function initialize() {
 geocoder = new google.maps.Geocoder(); 
 var myLatlng = new google.maps.LatLng(1.3667, 103.7500);
  var myOptions = {
    zoom: 13,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
     styles:[{
         featureType: "poi.attraction",
            stylers: [
              { visibility: "off" }
                ]},{
                featureType: "poi.business",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.government",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.medical",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.park",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.place_of_worship",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.school",
                stylers: [
                  { visibility: "off" }
                ]
              },{
                featureType: "poi.sports_complex",
                stylers: [
                  { visibility: "off" }
                ]
              },{
              }
            ]
    };

  map = new google.maps.Map(document.getElementById('map_canvas'),
      myOptions);

  if (postalArr) {
        for (var i = 0; i < postalArr.length; i++ ) {
            codeAddress(postalArr[i]);
        }
  }
  else
  {
      document.getElementById("event_list").value = "There are no events!";
  }

  var locationPin = 'images/green-pin.png'; 

}     

var address;
var eventPin = "images/blue-pin.png";
function codeAddress(postal) {      
    geocoder.geocode( {'address': postal + ", Singapore"}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        retrievedLatLng = results[0].geometry.location;
        var eventwindow = new google.maps.InfoWindow();
        var markerE = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
            icon: eventPin,
        });
        markerE.mycategory = "event";
        markerE.setVisible(false);
        google.maps.event.addListener(markerE, 'click', function(){
            eventwindow = new google.maps.InfoWindow({
                content: "hello",
            });
            eventwindow.open(map,marker);
        });
        $.ajax({
          type:"GET",
          url: "http://maps.googleapis.com/maps/api/geocode/json?latlng="+retrievedLatLng+"&sensor=false",
          dataType: "jsonp",
          success: function(json){
          if(json.status == 'OK')
            {
            alert("success");
            }
    }
});
        eventMarkerArr.push(markerE);
        retrievedLatLngArr.push("codeAddress:"+retrievedLatLng);
        alert(retrievedLatLngArr[0]);
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  } 
```

google.maps.event.addDomListener(window, 'load', 初始化);

我这样做的原因是因为我似乎无法得到`latlng`. 我最初所做的是初始化地图`window.onload = function(){ initialize() }`并调用 .ajax 函数，`$(window).load(function(){...});`无论哪种方式我都无法正确处理。

抱歉，如果这听起来令人困惑。如果这还不够，我会添加更多细节。

**编辑：**

`results[0].geometry.location`是通过反向地理编码 6 位邮政编码产生的纬度经度。我想要完整的地址，但只有 6 位邮政编码。纬度和经度也用于在谷歌地图上放置标记。因此，为了获得完整的地址，我试图使用 google 提供的 url 获得 json 结果。

**更多编辑：** 添加了完整的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:12:13.443

假设 results[0].geometry.location 已经是一个有效的位置。我不认为这是一个事实，但你可能已经有了

```
 url: "http://maps.googleapis.com/maps/api/geocode/json?latlng="+results[0].geometry.location.lat() +","+results[0].geometry.location.leg()+"&sensor=false"; 
```

您可能想检查逗号分隔是否正确

# java - Why doesn't autoboxing work in this case with generics?

> ID：11428093
> 
> 赞同：3
> 
> 时间：2012-07-11T07:58:09.247
> 
> 标签：java, generics, object, integer

> **Possible Duplicate:**
> [Java: Array of primitive data types does not autobox](https://stackoverflow.com/questions/517751/java-array-of-primitive-data-types-does-not-autobox)

I've been doing some Java lately (mostly as a recap on what I did at university as my current job doesn't involve any Java at all) and one thing that never got introduced to us properly is Generics.

I've been doing the Generics tutorial on the Oracle Java website and I've been stumped by the following example that I modified a bit:

```
public static <Integer extends Comparable<Integer>> int countGreaterThan(Integer [] anArray, Integer elem) {
    int count = 0;
    for (Integer e : anArray)
        if (e.compareTo(elem) > 0)
            ++count;
        return count;
} 
```

And I use this method to compare an Integer array with the following Integer:

```
Integer [] numarr = {1, 2, 3, 4 , 5};
Integer num = new Integer(5);

int count = Util.countGreaterThan(arrnum, num); 
```

This seems to work fine, however if I pass a primitive array and a primitive int, it doesn't:

```
int [] arrnum = {1, 2, 3, 4 , 5};
int othernum = 3;

int count = Util.countGreaterThan(arrnum, othernum); 
```

The compiler complains with:

```
method countGreaterThan in class Generics.Util 
cannot be applied to given types;
required: Integer[],Integer
found: int[],int
reason: no instance(s) of type variable(s) 
Integer exist so that argument type int conforms to formal parameter type Integer 
```

The tutorials seemed to be pretty adamant that Java will always autobox/unbox objects and primitives as necessary and yet it won't do it in this particular case, what am I missing?

Also what could be a good way to generalise this comparing method as much as possible? If I used T instead of Integer, then it would look for a T object, rather than whatever I pass to it.

I apologise if the post is confusing and if I seem pretty ignorant about the stuff I talk about above, it's just that I've been working primarily as a perl programmer (and not as particularly experienced one either) and generalising there seems as less of an issue (due to the lack of type enforcement).

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:27:42.980

The code below seems to work as far as I can see:

```
public static <Integer extends Comparable<Integer>> int countGreaterThan(Integer [] anArray, Integer elem) {
    int count = 0;
    for (Integer e : anArray) {
        if (e.compareTo(elem) > 0)
            ++count;
        return count;
} 
```

although I get a warning `"The type parameter Integer is hiding the type Integer"`. See `@ErichSchreiner`'s answer for an explanation of why auto-boxing won't work here.

A good generalisation of your method would be:

```
public static <T extends Comparable<? super T>> int countGreaterThan(T[] anArray, T elem) {
    int count = 0;
    for (T e : anArray) {
        if (e.compareTo(elem) > 0) {
            ++count;
        }
    }
    return count;
} 
```

All you really care about is that `anArray` has the same type of elements as `elem` is, and that it is comparable to it's own type.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:28:28.880

Your declaration of `countGreaterThan()` hides the built-in type `Integer`. To clarify, consider the slightly modified version:

```
public static <I extends Comparable<I>> int countGreaterThan(I [] anArray, I elem) {
    int count = 0;
    for (I e : anArray)
        if (e.compareTo(elem) > 0)
            ++count;
        return count;
} 
```

Now it should become apparent that your second attempt at calling can not work as there **can be no autoboxing done**. For generics to work, you need to supply objects, not primitives.

# iphone - 自定义单元格中的自定义表格视图单元格选择颜色

> ID：11428106
> 
> 赞同：1
> 
> 时间：2012-07-11T07:59:17.767
> 
> 标签：iphone, objective-c, ios, interface-builder

我已经为此搜索了两天，但找不到我的答案...

我有一个自定义的 uitableviewcell，然后我需要在选择单元格时实现自定义颜色。

```
cell.selectedBackgroundView.backgroundColor = [UIColor greenColor]; 
```

对我不起作用。或者如果它有效，背景颜色是清晰的，我不明白有什么问题。似乎我不知道如何在界面生成器中正确连接我的自定义单元格。我可以创建一个自定义单元格，但唯一的问题是我不知道如何进行选择。因此，如果有人可以帮助我，我将非常感激。或者也许有人知道这方面的教程？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T08:51:08.937

**希望以下代码必须有效。您需要将此代码复制粘贴到 customCell 实现文件中。**

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

UIView *backgroundView = [[UIView alloc] initWithFrame:self.selectedBackgroundView.frame];
[backgroundView setBackgroundColor:[UIColor colorWithRed:143/255.f green:141/255.f blue:147/255.f alpha:1.0]];
[self setSelectedBackgroundView:backgroundView];
[backgroundView release];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T08:12:40.417

无需自定义单元格。如果您只想更改单元格的选定颜色，可以这样做：

```
UIView *bgColorView = [[UIView alloc] init];
[bgColorView setBackgroundColor:[UIColor redColor]];
[cell setSelectedBackgroundView:bgColorView];
[bgColorView release]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T13:02:21.833

@Pandey_Laxman 是对的。简单地使用`cell.seletedBackgroundView`是行不通的，因为默认情况下 UItableViewCell 的 backgroundView 和 selectedBackgroundView 都是 nil 。您需要先初始化一个 UIView，然后再将其设置为单元格的 selectedBackgroundView。查看[selectedBackgroundView()的定义](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T18:36:55.550

Finnaly我找到了我的问题的答案..

我犯了一个非常愚蠢的错误..所以首先你需要将文件所有者类设置为 NSObject 到你在 IB 中的 customcell，然后你的 uitableviewcell 类作为你的自定义单元格，在我的例子中是“myCustomDisplayCell”..

此外，从下到上（IB 中的视图），我添加了一个 uiview 并连接了单元格背景视图，在顶部我放置了一个 uiview 并连接了单元格 selectedbackgroundview（使视图颜色清晰）然后最后我放置了一个 uilabel uiimageview，并将这些正确连接..（您可以在此处添加自定义单元格所需的自己的东西）。就是这样！现在看起来很轻松。。

谢谢大家的帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-04T16:24:06.440

您将其设置在自定义单元类中，如下所示（Swift 4）：

```
import UIKit

class CustomTableViewCell: UITableViewCell { 

... 

 override func setSelected(_ selected: Bool, animated: Bool) {
        super.setSelected(selected, animated: animated)
        if(selected) {
            self.backgroundColor = UIColor(named: "BrilliantAzure")
        } else {
            self.backgroundColor = UIColor.white
        }
    }

... 
```

因此，无需为此特定任务创建额外的视图。

# silverlight - sharepoint silverlight web 部件在服务器上不起作用

> ID：11428107
> 
> 赞同：0
> 
> 时间：2012-07-11T07:59:19.230
> 
> 标签：silverlight, sharepoint-2010, lync-2010

我开发了一个 Lync Silverlight 应用程序，它正在我的本地计算机上运行。然后我需要将此 Silverlight 添加到 Sharepoint 站点，因此我使用了 Silverlight Web 部件。在我的本地 Sharepoint 站点上没问题，但是当我将它安装到服务器时，我看不到 Silverlight 并且没有收到错误。

我在 Silverlight 应用程序上使用 Web 服务。我检查该服务器是否可以访问 Web 服务。我的开发环境是 Visual Studio 2010 和 Lync Server 2010。我也在使用 Sharepoint 2010。

这是我尝试解决的方法：

1.  检查是否为 xap 配置了 IIS - 确定
2.  我尝试通过 Sharepoint 模块安装 xap 文件，但没有成功。
3.  我尝试使用可视化 Web 部件，但它不起作用。
4.  我尝试将 xap 文件嵌入到 HTML 页面进行调试，没有错误。

现在我被困住了。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-26T12:43:35.800

您是否交叉验证了您开发的 Silverlight 应用程序与哪个 Silverlight sdk 版本。

服务器是否安装了该版本？

如果它在您的本地服务器上工作正常，那么它也可以在另一台服务器上正常工作。

问候。

# vbscript - QTP：使用 Ctrl 键组合的 Sendkey 方法不起作用

> ID：11428108
> 
> 赞同：0
> 
> 时间：2012-07-11T07:59:25.873
> 
> 标签：vbscript, qtp, sendkeys

我想在 VBA 脚本中使用快捷键而不是单击对象。所以我使用下面的代码（^F6）按“ctrl+F6”。但它不起作用并显示语法错误。

```
SAPGuiSession("Session").SAPGuiWindow("Aufteiler anlegen : Einstieg").SendKey  ^F6 
```

但是，“SHIFT + F6”的 +F6 效果很好。有人能弄清楚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:00:42.153

QTP 不会转换`^`为控制，而是使用[特殊的常量](http://www.vietnamesetestingboard.org/zbxe/?document_srl=477821) `micCtrl`。像这样的东西可能有效（未经测试）

```
With SAPGuiSession("Session").SAPGuiWindow("Aufteiler anlegen : Einstieg")
    .SendKey micCtrlDown
    .SendKey micF6
    .SendKey micCtrlUp
End With 
```

# selenium-ide - 如何将变量与硒中的空白值进行比较？

> ID：11428112
> 
> 赞同：0
> 
> 时间：2012-07-11T07:59:40.523
> 
> 标签：selenium-ide

我想检查变量是否存储空白值。我尝试将它与 '' 或 "" 或 NULL 或 null 进行比较，但不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T11:57:56.687

您可以尝试以下解决方案

```
storeValue  |  element  |  test
store       |           |  j  (blank value)
gotoIf      |  storedVars['test']==storedVars['j']  |  true
getEval     |  alert("test Variable Value is not blank")
gotolabel   |  finish
label       |  true
getEval     |  alert("test Variable Value is blank")
label       |  finish 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:00:34.483

您也可以`verifyEval`为此使用命令。尝试以下脚本，

> 验证评估 | this.page().findElement("id=gbqfq").value == '' | 真的

# c# - 以编程方式添加站点用户 Web 部件

> ID：11428114
> 
> 赞同：2
> 
> 时间：2012-07-11T07:59:41.943
> 
> 标签：c#, sharepoint, web-parts

我需要使用 C# 以编程方式将 SharePoint Web 部件“站点用户”添加到页面。

我知道如何添加 Web 部件，但如何从 Share Point 获取“站点用户”Web 部件？我不知道如何实例化它。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:09:18.003

答案原来是成员 Web 部件。

只需将“显示类型”设置为“WebUserGroups”，Web 部件就会列出站点上的组和用户。

```
MembersWebPart membersWebPart = new MembersWebPart();
                membersWebPart.DisplayType = MembersWebPartDisplayType.WebUserGroups;
                membersWebPart.Title = "Användare och grupper";

                wpManager.AddWebPart(membersWebPart, "Right", 2); 
```

# linux - Linux RSS 和共享内存

> ID：11428115
> 
> 赞同：0
> 
> 时间：2012-07-11T07:59:42.573
> 
> 标签：linux, memory, shared, ps

我有一个在 RHEL 4 机器下运行的用 C 语言编写的守护进程。

守护进程访问一段共享内存（只​​不过是一个包含 65536 个元素的大数组）。没有 malloc/free 完成。

我观察到*ps aux*显示该守护程序具有共享内存的大小 + 一些 kb 作为 VSZ 和一些 kb 作为 RSS。

然后，守护进程访问共享内存数组的次数越多，RSS 增加的越多，直到达到大约相同大小的 VSZ。

为什么Linux以这种方式计算RSS？

我的意思是......共享内存不应该被单个进程消耗的内存（RSS）而忽略，因为它可以被许多其他可运行程序访问？

为什么它只在访问共享内存时引发 RSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:44:40.060

RSS 是映射到您的进程的**物理内存量。**

Linux 采用[按需分页](http://en.wikipedia.org/wiki/Demand_paging)，以便物理内存仅在第一次访问时被映射。VSZ 是由物理内存按需提供支持的虚拟内存。这解释了为什么您的 RSS 会随着您访问更多共享内存映射而增长。

# xml - XSLT 表格单元格取决于属性值

> ID：11428128
> 
> 赞同：0
> 
> 时间：2012-07-11T08:00:31.503
> 
> 标签：xml, xslt, html-table

```
<xsl:for-each select="A">
<tr>            

<xsl:choose>
<xsl:when test="@a='True'">
<td bgcolor="#FFFF00"><xsl:value-of select="../@e"/></td>
<td bgcolor="#FFFF00"><xsl:value-of select="../@b"/></td>
<td bgcolor="#999999"><xsl:value-of select="@be"/></td>
<xsl:for-each select="T">
<td bgcolor="#FFFF00"><xsl:value-of select="@o"/></td>
</xsl:for-each>
</xsl:when>
<xsl:otherwise>
<td bgcolor="#999999"><xsl:value-of select="../@e"/></td>
<td bgcolor="#999999"><xsl:value-of select="../@b"/></td>
<td bgcolor="#999999"><xsl:value-of select="@be"/></td>
<xsl:for-each select="T">
<td bgcolor="#999999"><xsl:value-of select="@o"/></td>
</xsl:for-each>
</xsl:otherwise>
</xsl:choose>

</tr> 
```

我的 xslt 的这一部分制作了表格的行。

列是 ../@e、../@b、@be、@o

对于每个 A 元素，我在表中创建一行。

无论如何，**第三列**的单元格都有**白色背景色。**

所以：首先，前 2 列未满，**只有前两列的第一个单元格必须是 full**。它们的所有其他单元格都是空的。

**但是**，如果任何 A 元素中至少有一个 @i 属性为 True，则前 2 列（第 1 行）的单元格必须为黄色，以表明存在为 True 的 @i。

请帮我弄清楚。在过去的几天里，它变成了一场噩梦。先感谢您。

完整的 XSLT 转换是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="UTF-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<!-- param values may be changed during the XSL Transformation -->
<xsl:param name="shared_item_name"> Animal </xsl:param>
<xsl:param name="description"> Birth </xsl:param>
<xsl:param name="properties"> Kind </xsl:param>

<xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title>Problem</title>
        </head>
        <body>
            <xsl:apply-templates/>
        </body>
    </html>
</xsl:template>

<xsl:template match="AA">
    <table border="1" cellspacing="0">
        <tr bgcolor="#9acd32">
            <th> <xsl:value-of select="$shared_item_name" /> </th>
            <th> <xsl:value-of select="$description" /> </th>
            <th> <xsl:value-of select="$properties" /> </th>
        <xsl:for-each select="IRO[position()=1]/P[position()=1]/T">
            <th> <xsl:value-of select="@s" /> </th>
        </xsl:for-each>
        </tr>               

<xsl:for-each select="AI">

    <xsl:for-each select="A">

        <tr>

        <xsl:if test="position()=1">
        <td><xsl:value-of select="../@e"/></td>
        <td bgcolor="#999999"><xsl:value-of select="../@b"/></td>
        </xsl:if>

        <xsl:if test="not(position()=1)">
        <td></td>
        <td></td>
        </xsl:if>

        <td bgcolor="#999999"><xsl:value-of select="@be"/></td>

        <xsl:choose>
        <xsl:when test="@a='True'">
        <xsl:for-each select="T">
        <td bgcolor="#FFFF00"><xsl:value-of select="@o"/></td>
        </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
        <xsl:for-each select="T">
        <td bgcolor="#999999"><xsl:value-of select="@o"/></td>
        </xsl:for-each>
        </xsl:otherwise>
        </xsl:choose>

        </tr>

    </xsl:for-each>

    <xsl:for-each select="AI">
    <xsl:for-each select="A">

        <tr>            

        <xsl:choose>
        <xsl:when test="@i='True'">
        <td bgcolor="#FFFF00"><xsl:value-of select="../@e"/></td>
        <td bgcolor="#FFFF00"><xsl:value-of select="../@b"/></td>
        <td bgcolor="#999999"><xsl:value-of select="@be"/></td>
        <xsl:for-each select="T">
        <td bgcolor="#FFFF00"><xsl:value-of select="@o"/></td>
        </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
        <td bgcolor="#999999"><xsl:value-of select="../@e"/></td>
        <td bgcolor="#999999"><xsl:value-of select="../@b"/></td>
        <td bgcolor="#999999"><xsl:value-of select="@be"/></td>
        <xsl:for-each select="T">
        <td bgcolor="#999999"><xsl:value-of select="@o"/></td>
        </xsl:for-each>
        </xsl:otherwise>
        </xsl:choose>

        </tr>
    </xsl:for-each>

    </xsl:for-each>

    </xsl:for-each>

</table>
</xsl:template>
    </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:54:41.580

这是一个尝试，但您的请求缺乏一些精确性。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="UTF-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<xsl:param name="shared_item_name"> Shared Item Name </xsl:param>
<xsl:param name="description"> Description </xsl:param>
<xsl:param name="properties"> Properties </xsl:param>

<xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title>Problem</title>
        </head>
        <body>
            <xsl:apply-templates/>
        </body>
    </html>
</xsl:template>

<xsl:template match="IR">
    <table border="1" cellspacing="0">
        <tr bgcolor="#9acd32">
            <th> <xsl:value-of select="$shared_item_name" /> </th>
            <th> <xsl:value-of select="$description" /> </th>
            <th> <xsl:value-of select="$properties" /> </th>
        <xsl:for-each select="IRO[1]/P[1]/T">
            <th> <xsl:value-of select="@s" /> </th>
        </xsl:for-each>
        </tr>               
        <xsl:apply-templates/>
    </table>
</xsl:template>

<xsl:template match="P">
    <tr>
        <xsl:choose>
            <xsl:when test='count(preceding-sibling::P)=0'>
                <xsl:variable name='c'>
                    <xsl:choose>
                        <xsl:when test='(@i="True") or (count(following-sibling::P[@i="True"]) &gt; 0)'>#FFFF00</xsl:when>
                        <xsl:otherwise>#999999</xsl:otherwise>
                    </xsl:choose>
                </xsl:variable>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute><xsl:value-of select='../@n' /></td>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:when>
            <xsl:otherwise>
                <td></td>
                <td></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:otherwise>
        </xsl:choose>
        <xsl:apply-templates />
    </tr>
</xsl:template>    

<xsl:template match="T">
    <td>
        <xsl:attribute name='bgcolor'>
            <xsl:choose>
                <xsl:when test='../@i="True"'>#FFFF00</xsl:when>
                <xsl:otherwise>#999999</xsl:otherwise>
            </xsl:choose>
        </xsl:attribute>
        <xsl:value-of select='@v' />
    </td>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:53:36.843

附加要求：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="UTF-8" doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN" doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>

<xsl:param name="shared_item_name"> Shared Item Name </xsl:param>
<xsl:param name="description"> Description </xsl:param>
<xsl:param name="properties"> Properties </xsl:param>

<xsl:template match="/">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
            <title>Problem</title>
        </head>
        <body>
            <xsl:apply-templates/>
        </body>
    </html>
</xsl:template>

<xsl:template match="IR">
    <table border="1" cellspacing="0">
        <tr bgcolor="#9acd32">
            <th> <xsl:value-of select="$shared_item_name" /> </th>
            <th> <xsl:value-of select="$description" /> </th>
            <th> <xsl:value-of select="$properties" /> </th>
        <xsl:for-each select="IRO[1]/P[1]/T">
            <th> <xsl:value-of select="@s" /> </th>
        </xsl:for-each>
        </tr>               
        <xsl:apply-templates/>
    </table>
</xsl:template>

<xsl:template match="/IR/IRO/P">
    <tr>
        <xsl:choose>
            <xsl:when test='count(preceding-sibling::P)=0'>
                <xsl:variable name='c'>
                    <xsl:choose>
                        <xsl:when test='(@i="True") or (count(following-sibling::P[@i="True"]) &gt; 0)'>
                            <xsl:choose>
                                <xsl:when test='count(../descendant::P[@i="True"]) &gt; 0'>#ff0000</xsl:when>
                                <xsl:otherwise>#FFFF00</xsl:otherwise>
                            </xsl:choose>
                        </xsl:when>
                        <xsl:otherwise>
                            <xsl:choose>
                                <xsl:when test='count(../descendant::P[@i="True"]) &gt; 0'>#FF6600</xsl:when>
                                <xsl:otherwise>#999999</xsl:otherwise>
                            </xsl:choose>
                        </xsl:otherwise>
                    </xsl:choose>
                </xsl:variable>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute><xsl:value-of select='../@n' /></td>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:when>
            <xsl:otherwise>
                <td></td>
                <td></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:otherwise>
        </xsl:choose>
        <xsl:apply-templates />
    </tr>
</xsl:template>    

<xsl:template match="/IR/IRO/IRO/P">
    <tr>
        <xsl:choose>
            <xsl:when test='count(preceding-sibling::P)=0'>
                <xsl:variable name='c'>
                    <xsl:choose>
                        <xsl:when test='(@i="True") or (count(following-sibling::P[@i="True"]) &gt; 0)'>#FFFF00</xsl:when>
                        <xsl:otherwise>#999999</xsl:otherwise>
                    </xsl:choose>
                </xsl:variable>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute><xsl:value-of select='../@n' /></td>
                <td><xsl:attribute name='bgcolor'><xsl:value-of select='$c' /></xsl:attribute></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:when>
            <xsl:otherwise>
                <td></td>
                <td></td>
                <td bgcolor="#999999"><xsl:value-of select='@dn' /></td>
            </xsl:otherwise>
        </xsl:choose>
        <xsl:apply-templates />
    </tr>
</xsl:template>    

<xsl:template match="T">
    <td>
        <xsl:attribute name='bgcolor'>
            <xsl:choose>
                <xsl:when test='../@i="True"'>#FFFF00</xsl:when>
                <xsl:otherwise>#999999</xsl:otherwise>
            </xsl:choose>
        </xsl:attribute>
        <xsl:value-of select='@v' />
    </td>
</xsl:template>

</xsl:stylesheet> 
```

在这种情况下，必须区分 2 级 P 元素的模板

# cordova - now.js + phonegap，在安卓浏览器上工作，有经验的吗？

> ID：11428129
> 
> 赞同：0
> 
> 时间：2012-07-11T08:00:33.573
> 
> 标签：cordova, websocket, socket.io, nowjs-sockets

在使用 android 浏览器访问文件时，我可以使用 NowJS 聊天，但是当在 phonegap 中执行相同的代码时，消息不会被接收或发送。

有没有人能够成功地使用 nowJS 或带有 phonegap/cordova 的套接字？

可在 Web 浏览器、FF、Chrome 和 android 本机浏览器上运行的代码，但不能在 phonegap 上运行

```
$(document).ready(function(){
        now.receiveMessage = function(id, name, message, timestamp){
            $("#messages").append("<br>" + id + ' ' + name + ": " + message + ' ' + timestamp);
        };

        // Send message to people in the same group
        $("#send-button").click(function(){
            now.distributeMessage(room, $("#text-input").val());
            $("#text-input").val("");
        });

        now.name = 'Guest '+Math.floor(Math.random() * 1000 % 5 + 2);

        // on establishing 'now' connection, set server room and allow message sending
        now.ready(function(){
        room = location.hash.replace('#', '');

            if (!room) {
            alert("Please specify a room");
            throw "";
            }

            now.changeRoom(room);

            // Connection established and room set; allow user to start sending messages
            $("#send-button").removeAttr('disabled');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:36:41.830

可能是在 PhoneGap 中运行时 Now.js 中的回退机制在 WebView 中不起作用。如果他们使用 Flash Fallback，那么您需要启用插件。看起来这将很快默认启用： [https ://github.com/apache/incubator-cordova-android/pull/18](https://github.com/apache/incubator-cordova-android/pull/18)

我最近在 Android 启动项目上为 PhoneGap 创建了一个 Pusher，我没有启用插件并依赖 Flash，而是将一个在 Java 中运行的 WebSocket 对象暴露给 WebView JavaScript 运行时。我真的很喜欢这种方法，因为它完全消除了 Flash 问题。也许这是你可以在你的安卓应用程序中做的事情？

您可以在此处看到包含将 WebSocket 对象公开给 WebView JS 运行时所需的所有代码的启动项目（只需将 pusher.min.js 包含替换为 now.js ）：

*   [https://github.com/pusher/pusher-phonegap-android](https://github.com/pusher/pusher-phonegap-android)

以及通过 README 获得有关 PhoneGap WebSocket Android 支持的信息： [https ://github.com/pusher/pusher-phonegap-android#native-websocket-support](https://github.com/pusher/pusher-phonegap-android#native-websocket-support)

# android - Flex 4.6 Mobile Horizontal List: Reload itemRenderer

> ID：11428136
> 
> 赞同：0
> 
> 时间：2012-07-11T08:00:59.167
> 
> 标签：android, actionscript-3, apache-flex, mobile, flex4

I have one list which is having the layout set to horizontal display.

```
<s:List id="pagedList"
        width="100%" height="100%"
        verticalScrollPolicy="off" horizontalScrollPolicy="on"
        pageScrollingEnabled="true"
        itemRenderer="views.component.renderer.pageListItemRenderer"
        skinClass="views.component.skin.PagedListSkin"
        dataProvider="{acPages}"
        scrollSnappingMode="center"
        interactionMode="touch"
        useVirtualLayout="true">
            <s:layout>
                <s:TileLayout orientation="rows" requestedRowCount="1"
                              columnWidth="{pagedList.width}" rowHeight="{pagedList.height}" 
                              verticalGap="0" horizontalGap="0" />
                </s:layout>
</s:List> 
```

The dataProvider for the list is

```
[Bindable]
private var acPages:ArrayCollection = 
    new ArrayCollection( [
        {status:"Approved", method:"findRange(0,10)"},
        {status:"Pending", method:"findRange(10,20)"},
        {status:"Draft", method:"findRange(20,30)"},
        {status:"Ready", method:"findRange(30,40)"},
        {status:"Cancelled", method:"findRange(40,50)"},
        {status:"Recommended", method:"findRange(50,60)"},
        {status:"Resubmitted", method:"findRange(60,70)"}
]); 
```

And finally the itemRenderer

```
<fx:Script>
        <![CDATA[
override public function set data(value:Object):void 
            {
                super.data = value;

                if (value== null)
                    return;

                if (data.status)
                    mss.loadDgrid(data.method);
            }
    ]]>
    </fx:Script>

<s:Group width="100%" height="100%">
        <s:layout>
            <s:VerticalLayout gap="0" verticalAlign="middle" horizontalAlign="center" paddingBottom="30"/>
        </s:layout>
        <s:Group width="100%" contentBackgroundColor="0x000001">
            <s:layout>
                <s:HorizontalLayout horizontalAlign="center" verticalAlign="middle"/>
            </s:layout>
            <s:Label fontWeight="bold" text="&lt;" paddingLeft="20"/>
            <s:Spacer width="100%"/>
            <s:Label fontWeight="bold" text="{data.status}"/>
            <s:Spacer width="100%"/>
            <s:Label fontWeight="bold" text="&gt;" paddingRight="20"/>
        </s:Group>

        <s:DataGrid id="dgTaskGrid"
                    width="100%" height="100%"
                    verticalScrollPolicy="on"
                    dataProvider="{mss.dataProvider}">
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn headerText="Application ID" dataField="phId" />
                    <s:GridColumn headerText="Status" dataField="phAppStatus" />
                </s:ArrayList>
            </s:columns>
        </s:DataGrid>
    </s:Group> 
```

What you can see is that the list will be displaying 7 pages based on the `acPages ArrayCollection` and user can swipe left-right on the list to get to the next/previous page. Each page will be having the DataGrid and should load their own respective content. For example, the Approved page will display their own data using the `data.method` assigned on `acPages`. The `mss.loadDgrid` will then send a `HTTPRequest` to the webservice and returns the result.

Currently, what is happening, the list will first display the Approved data correctly, once I swipe to the left to reveal the next page(Pending page), the page will render well with the required data. But when I swipe back to the previous page (Approved page), the DataGrid is displaying the data from the pending page. I was thinking that it should reload back but that is not the case. This apply to the rest of the pages.

I tried the `useVirtualLayout` set to `false` and `true` but seems nothing worked out. I also had overide the `set Data` function as well as listening to `dataChange()` of the `itemRenderer` but still it doesn't reload.

What I want now is on each swipe, the `itemRenderer` will refresh and gets the desired data.

I am a newbie on Flex, so could be the approach I used is wrong. Looking forward for your help.

Thanks, Jason

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T17:14:22.487

这是 itemrenderer 刷新问题。您可能会查看以下内容：

[使 Spark 列表组件无效以重​​绘所有项目渲染器](http://blog.9mmedia.com/?p=709)

将所有数据放在 acPages arraycollection 中的原因是什么？也许，您可以创建 7 个数组集合来保存数据，然后在需要时将其分配给 acPages。

# wordpress - wordpress I have create change Password Functionality through my new Plugin in wordpress how to match the user enterd Password?

> ID：11428142
> 
> 赞同：0
> 
> 时间：2012-07-11T08:01:12.367
> 
> 标签：wordpress

I need password check function in wordpress for change Password functionlity.I have use wp_check_password( $opass,$pass,$user_id ); function but I got wrong results Any one Help me?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:33:30.907

你到底是怎么用的`wp_check_password`？根据[codex](http://codex.wordpress.org/Function_Reference/wp_check_password)，第二个参数需要是加密密码 - 你是否将其加密传递？

查看[wp-includes/user.php](http://core.trac.wordpress.org/browser/tags/3.4/wp-includes/user.php#L72)`wp_authenticate_username_password`以了解 WordPress 是如何做到的；甚至自称。`wp_authenticate_username_password`

# sql - How to import Excel to database by column name using VBA?

> ID：11428143
> 
> 赞同：0
> 
> 时间：2012-07-11T08:01:18.710
> 
> 标签：sql, excel, vba

Does anyone know the way to import Excel data in to SQL database by column name using VBA?

For example, I have an Excel file with 5 columns: column1, column2, column3, column 4, column 5\. Position of these column are generated randomly I only want to import data of 3 columns: column1, column3, column5 in to SQL database using VBA.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:24:24.170

您可以使用 ADO 连接。

您可以打开与目标服务器的连接，循环数据，然后将其插入目标数据库。这可以让你开始： [http ://www.vbexplorer.com/VBExplorer/vb_feature/june2000/Database_Beginner_ADO_DAO.asp](http://www.vbexplorer.com/VBExplorer/vb_feature/june2000/Database_Beginner_ADO_DAO.asp)

否则，根据您的目标数据库，它可能有一些专有的导入工具——这通常需要您将您的 excel 导出为它识别的某种格式。

对于完整的解决方案，您可以考虑使用[ETL](http://en.wikipedia.org/wiki/Extract,_transform,_load)工具

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-31T10:45:21.227

因此，正如您从变量名中看到的那样，这是用于莲花文件的，但是，我将它用于 csv。所以你的excel文件的结构是一样的。如果您只想将其保存为 CSV 文件，并祝您生活愉快。我知道已经 6 年了，所以我想你不再需要这个了，但可能会帮助遇到这个问题的其他人。

```
 Dim LotusCn As Object
    Dim rsLotus As Object
    Dim strSql, CombFileName, GotoRange As String
    Dim rsLotusFiles As DAO.Recordset
    Dim rsDAO1 As DAO.Recordset
    Dim strName1 As String

    Set LotusCn = CreateObject("ADODB.Connection")
    Set rsLotus = CreateObject("ADODB.Recordset")

    strSql = "Provider=" & _ 'This is where the file is located
    CurrentProject.Connection.Provider & _
    ";Data Source=" & Directory & _
    ";Extended Properties='text;HDR=YES;FMT=Delimited'"

    LotusCn.Open strSql
    Dim fld1 As ADODB.Field

    strSql = "SELECT * FROM NUMBDATM.CSV" 'This is the file name and please open it
    rsLotus.Open strSql, LotusCn, adOpenFowardOnly, adLockReadOnly, adCmdText

    Set rsDAO1 = CurrentDb.OpenRecordset("NUMBDATM", _ 'This here is the table you 
    dbOpenTable, dbAppendOnly + dbFailOnError)          want to import into 

    Do Until rsLotus.EOF 'Here tell it what values you want from the excel Sheet
          RegNumber = rsLotus![Reg# Number]
          CompanyName = rsLotus![Company Name]
          SalesGrowth1 = rsLotus![Sales Growth % 1 ]
          FixedAssets1 = rsLotus![Fixed Assets 1 ]
          PeriodEnding1 = rsLotus![Period Ending 1 ]
          TotalSales1 = rsLotus![Total Sales 1 ]
          SalesGrowth2 = rsLotus![Sales Growth % 2 ]
          SalesGrowth3 = rsLotus![Sales Growth % 3 ]
          PreTaxProfit3 = rsLotus![Pretax Profit 3 ]
          PreTaxProfit2 = rsLotus![Pretax Profit 2 ]
          PreTaxProfit1 = rsLotus![Pretax Profit 1 ]
          PrProfitMarg = rsLotus![Pr#Profit Margin  % 1 ]
          Week1 = rsLotus![Weeks 1 ]
          Week2 = rsLotus![Weeks 2 ]
          Week3 = rsLotus![Weeks 3 ]
        rsDAO1.AddNew 'Here please add the values from above into the relevant table
            rsDAO1![Reg# Number] = RegNumber
            rsDAO1![Company Name] = CompanyName
            rsDAO1![Sales Growth % 1 ] = SalesGrowth1
            rsDAO1![Fixed Assets 1 ] = FixedAssets1
            rsDAO1![Period Ending 1 ] = PeriodEnding1
            rsDAO1![Total Sales 1] = TotalSales1
            rsDAO1![Sales Growth % 2 ] = SalesGrowth2
            rsDAO1![Sales Growth % 3 ] = SalesGrowth3
            rsDAO1![Pretax Profit 3 ] = PreTaxProfit3
            rsDAO1![Pretax Profit 2 ] = PreTaxProfit2
            rsDAO1![Pretax Profit 1 ] = PreTaxProfit1
            rsDAO1![Pr#Profit Margin  % 1 ] = PrProfitMarg
            rsDAO1![Weeks 1 ] = Week1
            rsDAO1![Weeks 2 ] = Week2
            rsDAO1![Weeks 3 ] = Week3
        rsDAO1.Update
        rsLotus.MoveNext
    Loop
    rsDAO1.Close
    Set rsDAO1 = Nothing
    rsLotus.Close
    Set rsLotus = Nothing
    LotusCn.Close 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-01T08:45:00.760

```
Protected Sub just_Click(sender As Object, e As EventArgs) Handles just.Click

Dim cnn As SqlConnection

Dim sql As String

Dim i, j As Integer

Dim xlApp As Excel.Application

Dim xlWorkBook As Excel.Workbook

Dim xlWorkSheet As Excel.Worksheet

Dim misValue As Object = System.Reflection.Missing.Value

xlApp = New Excel.ApplicationClass

xlWorkBook = xlApp.Workbooks.Add(misValue)

xlWorkSheet = xlWorkBook.Sheets("sheet1")

cnn = New SqlConnection("***your connection string***")

cnn.Open()

sql = "SELECT * FROM exceltable"

Dim dscmd As New SqlDataAdapter(sql, cnn)

Dim ds As New DataSet

dscmd.Fill(ds)

For j = 0 To ds.Tables(0).Columns.Count - 1

xlWorkSheet.Cells(i + 1, j + 1) = _

ds.Tables(0).Columns(j).ColumnName

Next

For i = 0 To ds.Tables(0).Rows.Count - 1

For j = 0 To ds.Tables(0).Columns.Count - 1

xlWorkSheet.Cells(i + 2, j + 1) = _

ds.Tables(0).Rows(i).Item(j)

Next

Next

xlWorkSheet.SaveAs("D:\pappy.xlsx")

xlWorkBook.Close()

xlApp.Quit()

cnn.Close()

End Sub 
```

# android - 在 android 中创建我自己的 SSO

> ID：11428144
> 
> 赞同：0
> 
> 时间：2012-07-11T08:01:24.180
> 
> 标签：android, single-sign-on

我知道有一些使用 fb 的 SSO 示例，但我喜欢创建一个父应用程序，该应用程序可用于登录我的所有子应用程序；任何的想法？？提前谢谢:)

如何为我的子应用生成自定义 API 密钥以使用我的父应用？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:29:09.453

只是把我的评论放在一个答案中：

为了避免用户端的工作量，并且必须创建另一个登录名/密码对，请尝试使用在设备上注册的现有帐户，使用[AccountManager](http://developer.android.com/reference/android/accounts/AccountManager.html)。

用户只需选择一个他已经登录的帐户，您就可以透明地使用它在您的服务中创建一个帐户。

另一个建议是对您正在使用的数据进行过于散列和加盐，以避免以明文形式发送私人数据。

# php - 选择特定年龄范围内的所有用户

> ID：11428146
> 
> 赞同：5
> 
> 时间：2012-07-11T08:01:28.300
> 
> 标签：php, mysql, select

我在 MySQL 数据库中有用户，他们的生日以`DATE`格式（yyyy-mm-dd）存储。我想用 PHP 在数据库中选择某个年龄段之间的用户。

我所拥有的是最小年龄（18）和最大年龄（21）。我知道我可以用 BETWEEN 做点什么，但问题是我只知道年份而不知道日期。

有人对我如何做到这一点有建议吗？

这就是我目前正在做的事情：

```
function leeftijden($age) { 
    $morgen['day']   = date('d'); 
    $morgen['month'] = date('m'); 
    $morgen['year']  = date('Y') - $age;

    $datum = $morgen['year'] .'-' .$morgen['month'].'-' .$morgen['day'];

    return $datum;
} 
```

然后我这样做：

```
$maxDatum = leeftijden(18);
$minDatum = leeftijden(32);
$sqlRijder = "SELECT * FROM rijder WHERE geboortedatum between '".$minDatum."' AND '".$maxDatum."'"; 
```

但这不是 100% 有效的。

如何只选择 18 至 21 岁的用户？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T08:05:59.583

您可以简单地在查询中执行此操作：

```
SELECT * 
FROM rijder 
WHERE geboortedatum BETWEEN 
    CURDATE() - INTERVAL 21 YEAR AND 
    CURDATE() - INTERVAL 18 YEAR 
```

这样，您不需要特殊的 PHP 函数来构造 DATE 字符串。只需传入数字，MySQL 就会为您进行比较。只需确保较高的数字在`BETWEEN`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T08:07:12.583

试试这个 ：：：

```
Select * from table where (DATEDIFF(dob, DATE(NOW())) / 365.25) between 18 and 21 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:05:44.970

```
SELECT * FROM rijder 
WHERE geboortedatum 
    between date_add(curdate(), interval -18 year) 
    and date_add(curdate(), interval -21 year) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:08:24.523

试试这个

```
SELECT * FROM rijder WHERE DATEDIFF(NOW(), geboortedatum)/365.25 BETWEEN 18 AND 21 
```

# c++ - Is possible to separate declaration and definition of inline functions?

> ID：11428147
> 
> 赞同：9
> 
> 时间：2012-07-11T08:01:35.703
> 
> 标签：c++

I need to define inline functions to improve performance of my code. At the moment declaration of functions are in .h file and definitions are in .cpp file. I added **inline** keyword at the front of each declaration of functions but I am getting link error. Is possible to separate declaration and definition of inline functions ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T08:05:10.587

您可以很好地将声明和定义分开，但该定义*必须*在使用该函数的每个翻译单元中可用，例如：

```
#include <iostream>

inline void foo();

int main() {
  foo();
}

inline void foo() {
  std::cout << "Hi\n";
} 
```

是完全合法和正确的。

* * *

n3290 § 7.1.2.4 的确切引用是：

> 内联函数应在使用它的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义（3.2）。[ 注意：在其定义出现在翻译单元中之前，可能会遇到对内联函数的调用。——尾注]

§ 3.2 基本上说它必须在任何地方都相同，甚至是重载决议等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:05:07.587

是的，但是您必须将实现放在头文件中。那是因为为了被内联，在包含标题时必须知道定义。

如果你这样做了，即使没有`inline`关键字，现代编译器也会自动内联函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T08:15:49.413

你确定让你的函数“内联”会提高你的性能吗？我很确定它不会。

当且仅当编译器可以看到内联函数的主体时，它才能内联一些函数调用。所以你也需要包含函数的主体，但是如果这样做，你不需要用'inline'注释你的函数，因为编译器只需要函数的主体 - 而不是你的'inline'关键字。现在的编译器很聪明，不用你的提示就能知道是否以及何时内联函数。并且内联并不一定会增加程序的性能，它可能会增加可执行文件的大小。

请参阅Herb Sutter 的[这篇文章](http://www.gotw.ca/gotw/033.htm)。他认为关键字“inline”在 C++ 中没有意义。但我不同意他的观点。关键字“内联”有一个区别：您可以在程序中多次指定内联函数的主体（前提是每次定义完全相同）——这在将函数主体放入标头时很有用（如果您需要出于任何原因）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T08:03:58.540

Use a separate "implementation header" that you will still include everywhere?

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T08:04:36.453

您只需要指定一次原型或实现。两者都有资格。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T08:04:42.803

根据定义，内联函数必须在编译时已知。如果要在单独的 .h 文件中定义它们，可以使用

#pragma 一次

只插入一次定义的技巧。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-05T21:49:11.983

我发现在一些嵌入式工具链中，函数声明中不允许使用#inline 关键字。您*可以*在定义中指定它，但是（如上所述）许多编译器无论如何都会忽略该关键字。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2019-10-28T08:56:01.550

// 这适用于 g++ 编译器。//计算.h

```
class Calc
{
    int Sum(int x, int y);
}; 
```

//计算.cpp

```
inline int Calc::Sum(int x, int y)
{
    return (x+y);
} 
```

# python - 如何在 Python 中读取简单的 Json 结果（来自 Google 计算器）？

> ID：11428150
> 
> 赞同：2
> 
> 时间：2012-07-11T08:01:42.473
> 
> 标签：python, json

我正在尝试解析来自下一个谷歌查询的 json 结果：

[http://www.google.com/ig/calculator?hl=en&q=1USD=?MXN](http://www.google.com/ig/calculator?hl=en&q=1USD=?MXN)

结果是这样的：

```
{lhs: "1 U.S. dollar",rhs: "13.3317335 Mexican pesos",error: "",icc: true} 
```

所以我只是想用这个解码：

```
import json, urllib2

j=urllib2.urlopen("http://www.google.com/ig/calculator?hl=en&q=1USD=?MXN")
print json.load(j) 
```

但我有这个错误（追溯）：

```
Traceback (most recent call last):
  File "/home/rafael/gitSources/PythonConcept/Monpy/negApi.py", line 4, in <module>
    print json.load(j)
  File "/usr/lib/python2.7/json/__init__.py", line 278, in load
    **kw)
  File "/usr/lib/python2.7/json/__init__.py", line 326, in loads
    return _default_decoder.decode(s)
  File "/usr/lib/python2.7/json/decoder.py", line 366, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib/python2.7/json/decoder.py", line 382, in raw_decode
    obj, end = self.scan_once(s, idx)
ValueError: Expecting property name: line 1 column 1 (char 1)
[Finished in 0.6s with exit code 1] 
```

我不知道我做错了什么，我只是阅读了很多教程：/

谢谢 ：）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:13:32.097

这不是 JSON，但您仍然可以自己解析它 - 如下所示：

```
import ast

resp = '{lhs: "1 U.S. dollar",rhs: "13.3317335 Mexican pesos",error: "",icc: true}'

d = {}
for pair in resp[1:-1].split(','):
    (k,v) = pair.split(':')
    v = v.strip()
    if v == "true":
        v = "True"
    try:
        v = ast.literal_eval(v)
    except:
        print "Couldn't eval " + v
    d[k] = v

print d 
```

您还可以将格式修复为 json，然后像这样使用 json 解析器：

```
import json

resp = '{lhs: "1 U.S. dollar",rhs: "13.3317335 Mexican pesos",error: "",icc: true}'

s = "{"    
for pair in resp[1:-1].split(','):
    (k,v) = pair.split(':')
    s += '"%s" : %s,' % (k,v)
s = s[:-1] + "}"

print json.loads(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:12:09.843

您可以使用`rate-exchange.appspot.com`，它使用 Google API 但返回有效的 json：

```
http://rate-exchange.appspot.com/currency?from=USD&to=MXN&q=1
{"to": "MXN", "rate": 12.7523369, "from": "USD", "v": 12.7523369} 
```

以下是如何使用它[`requests`](http://docs.python-requests.org/)：

```
>>> import requests
>>> r = requests.get('http://rate-exchange.appspot.com/currency?from=USD&to=MXN&q=1')
>>> r.json['v']
12.7523369 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:54:01.860

这是你应该做的：

重新进口

```
s = '{lhs: "1 U.S. dollar",rhs: "13.3317335 Mexican pesos",error: "",icc: true}'
only_numbers=re.sub(r'[^0-9,.]+', '', s)
m = re.match(r"(\d+..),(\d+.\d+),,", only_numbers)
currency=m.group(2) 
```

输出：13.3317335

# java - 为什么类叫RunnableFuture 而不是 CallableFuture ?

> ID：11428151
> 
> 赞同：4
> 
> 时间：2012-07-11T08:01:47.827
> 
> 标签：java, java.util.concurrent

以下代码来自[AbstractExecutorService](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/AbstractExecutorService.java#AbstractExecutorService)：

```
 /**
 * Returns a <tt>RunnableFuture</tt> for the given callable task.
 *
 * @param callable the callable task being wrapped
 * @return a <tt>RunnableFuture</tt> which when run will call the
 * underlying callable and which, as a <tt>Future</tt>, will yield
 * the callable's result as its result and provide for
 * cancellation of the underlying task.
 * @since 1.6
 */
 protected <T> RunnableFuture<T> newTaskFor(Callable<T> callable) {
    return new FutureTask<T>(callable);
 } 
```

我不明白为什么返回的对象的类`newTaskFor()`会被称为 RunnableFuture 而不是 CallableFuture？我在这里想念什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T08:45:41.517

a的要点`RunnableFuture`是：

1.  它是`Future`
2.  它是`Runnable`

它将`Callable`您已经拥有的东西转换为既是 a`Future`又是 a 的东西`Runnable`。它涵盖了它打算涵盖的确切用例。如果您有 a`Callable`并且需要 a `Future`，则有`FutureTask`构造函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T08:34:40.347

`RunnableFuture`代表一个特定的概念：一个未来的结果，其计算可以由工作线程通过调用显式执行`run()`。

由于工作线程通常对它们执行的计算结果不感兴趣，因此它们使用`run()`不返回结果。对这些结果感兴趣的线程可以`get()`在工作线程完成计算后立即获取它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:04:20.797

因为它是`Runnable`，即有一个`public void run()`方法，而不是`Callable`，它会有一个`<T> public <T> run()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:47:30.097

也许很简单，因为 API 架构师从未被问过这个问题？

由于我们不知道我们只能问：有一个 newTaskFor(Runnable...) 方法，它返回一个 RunnableFuture，之所以这样调用，是因为它扩展了 Runnable 和 Future。

然后添加了一个 newTaskFor(Callable...) 方法 - 因为 Callable 也可以包装到实现 RunnableFuture 的 FutureTask 中，所以他们只是这样做而不是发明一个新接口只是为了清楚它将包装一个 Callable : 沿着奥卡姆剃刀原则使用最简单的可能解决方案，即已经存在的解决方案。

# cluster-analysis - Mahout binary data clustering

> ID：11428156
> 
> 赞同：2
> 
> 时间：2012-07-11T08:01:57.737
> 
> 标签：cluster-analysis, binary-data, mahout, k-means, dimension-reduction

I have points with binary features:

```
id, feature 1, feature 2, ....
1, 0, 1, 0, 1, ...
2, 1, 1, 0, 1, ... 
```

and the size of matrix is about 20k * 200k but it is sparse. I am using Mahout for clustering data by kmeans algorithm and have the following questions:

1.  Is kmeans a good candidate for binary features?
2.  Is there any way to reduce dimensions while keeping the concept of Manhattan distance measure (I need manhattan instead of Cosine or Tanimoto)
3.  The memory usage of kmeans is high and needs 4GB memory for each Map/Reduce Task on (4Mb Blocks on 400Mb vector file for 3k clusterss). Considering that Vector object in Mahout uses double entries, is there any way to use just Boolean entries for points but double entries for centers?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:39:16.573

如果你有一个好的距离度量，k-means 是一个很好的候选者。曼哈顿距离可能很好；我喜欢对数似然。

你可以使用任何你喜欢的降维技术。我喜欢交替最小二乘；SVD 也很好用。对于这个大小矩阵，您可以使用 Commons Math 在内存中轻松完成，而不是使用 Hadoop——这太过分了。

（另请参阅[http](http://myrrix.com) ://myrrix.com——我在那里有一个非常快速的 ALS 实现，您可以在核心/在线模块中重用。它可以在几秒钟内以数十 MB 的堆来处理它。）

您的特征矩阵中不再有二进制 0/1 值。在特征空间中，余弦距离应该很好（1 - cosineSimilarity）。Tanimoto/Jaccard 不合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T06:44:18.560

k-means 有一个经常被忽视的大要求：它需要计算一个合理的均值。这比人们想象的要重要得多。

*   如果均值不降低方差，它可能不会收敛（*算术*平均值对于欧几里得距离是最优的。对于曼哈顿，据说中位数更好。对于非常不同的指标，我不知道）
*   平均值可能不再那么稀疏了
*   平均值也不再是二元向量

此外，特别是对于大型数据集，您想使用哪个*k*？

你真的应该研究其他距离措施。您的数据量并不大；使用一台计算机应该仍然足够。使用紧凑的向量表示，它将很容易适应主存储器。只是不要先使用计算 ^2 相似度矩阵的东西。也许尝试一些带有二进制向量相似性索引的东西。

k-means 相当容易实现，特别是如果您不进行任何提前播种。为了减少内存使用，只需自己实现它以获得最适合您的数据的表示。它可以是一个位集，也可以是一个非零维度的排序列表。曼哈顿距离然后归结为计算向量不同的维数！

# visual-studio-2010 - Visual Studio 应用程序停止在 Windows 7 上运行

> ID：11428166
> 
> 赞同：2
> 
> 时间：2012-07-11T08:03:03.973
> 
> 标签：visual-studio-2010, windows-7

我在 windows xp 计算机上的 Visual Studio 2010 中做了一个应用程序。当我编译发布版本并在 windows xp 计算机上运行它时，它运行良好。另一方面，当我尝试在 Windows 7 上运行它时，我收到“此程序已停止工作”错误消息。在兼容模式下运行应用程序不会改变任何东西。有人可以告诉我我可以尝试做什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:07:59.100

根据您提供的信息，这可能是 windows 7 vs xp 的问题，或者您没有找到您正在寻找的任何资源。如果我是你我会：

*   确保应用程序是由任何 cpu 编译的
*   检查 windows 错误日志以查看是否有任何消息
*   以管理员身份运行应用程序
*   使用错误处理（try/catch）通过在 UI 中显示异常或记录到文本文件来查看异常。

已编辑：TRY-CATCH 示例

```
Try
  //CODE
Catch ex As Exception
 Dim writer As New StreamWriter("C:\MyLog.log", True, System.Text.Encoding.ASCII)
 writer.WriteLine(ex.Message)
 writer.Close()
End Try 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T15:35:47.853

我也遇到过这个问题。由于我的解决方案完全不同，我想我会分享以防万一其他人发现它相关。

我的问题是，在我的项目引用中，我有两个对 Adob​​e Acrobat DLL 文件的引用。我在我的新客户端机器上遇到了错误，因为它没有安装 Adob​​e Reader（它安装了我的项目引用的 DLL）。一旦我安装了 Adob​​e Reader，我的程序就会正确安装。

调试这个有趣的部分是没有 TRY/CATCH 块会捕获它。显然，参考检查发生在代码运行之前。您实际上只是收到通用消息“ProgramName 已停止工作”。

仅供参考...

# android - AdapterView 不支持 removeView(View)

> ID：11428168
> 
> 赞同：11
> 
> 时间：2012-07-11T08:03:25.847
> 
> 标签：android, listview, adapter, android-adapterview

单击 ImageView 时，我想从 listView 中删除某一行。我的列表视图如下所示： ![在此处输入图像描述](../Images/76711ec5dc9f48f1ebb103b2b7bacba3.png)

我希望在单击最后一个图像时删除该行。这是我的适配器：

```
public class UserItemAdapter extends ArrayAdapter<Photos.Record> {
        private ArrayList<Photos.Record> photos;

        public UserItemAdapter(Context context, int textViewResourceId, ArrayList<Photos.Record> photos) {
            super(context, textViewResourceId, photos);
            this.photos = photos;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {
            View v = convertView;

            if (v == null) {
                LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.photorowlist, null);
                                v.setClickable(true);
                                v.setFocusable(true);
            }

            Photos.Record user = photos.get(position);
            if (user != null) {
                TextView photo_name = (TextView) v.findViewById(R.id.photoname);

                if (photo_name != null) {
                    photo_name.setText(user.photo_name);
                }

            }
                        v.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View view) {
                            //Toast.makeText(view.getContext(), "Clicked", Toast.LENGTH_SHORT).show();

                            ImageView delete_photo = (ImageView) view.findViewById(R.id.deletephoto);
                            delete_photo.setOnClickListener(new OnClickListener(){  
                            @Override  
                            public void onClick(View v) {  
                                Toast.makeText(Photos.this, "Delete Button Clicked", Toast.LENGTH_SHORT).show();  
                                listView.removeView(v);
                                myadapter.notifyDataSetChanged();

              }});
                         }

                        });

            return v;
        }
    }

    public class Record {
        public String photo_name;

        public Record(String photo_name) {
            this.photo_name = photo_name;
        }
    } 
```

我尝试使用以下方法删除该行：

```
listView.removeView(v);
myadapter.notifyDataSetChanged(); 
```

我得到了错误：`ERROR AndroidRuntime java.lang.UnsupportedOperationException: removeView(View) is not supported in AdapterView`

我的赌注在哪里？任何的想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-11T08:09:25.503

您不必删除`View`但删除照片列表中的项目。

```
photos.remove(yourPhoto);
notifyDataSetChanged(); 
```

此外，你应该使用`ViewHolders`，谷歌有很多 tuts。希望这会帮助你。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-09T14:45:19.040

在 onItemClick(AdapterView parent, View view, int position, long id) 使用

`parent.removeViewInLayout(view);`

代替

```
parent.removeViewAt(position); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:43:28.507

您应该在 UI 线程上尝试它，以便它立即工作：

```
 listView.remove(position);
        runOnUiThread(new Runnable() {
            public void run() {
                adapter.notifyDataSetChanged();
            }
        }); 
```

# r - Plotting a shape file with ggplot2 error

> ID：11428176
> 
> 赞同：8
> 
> 时间：2012-07-11T08:04:07.623
> 
> 标签：r, ggplot2, sas

Over the last few days I pretty much dove head first into using R for mapping. I have used R extensively for modelling etc. but not this kind of work before. I have some questions and issues regarding shapefiles, how they're read and so on.

I have downloaded the shape files from the [Australian Bureau of Statistics](http://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/1270.0.55.001July%202011?OpenDocument) there are numerous files with state borders, post codes, cities and so on. The shape files are massive, the Australian state borders has about 1.8 million coordinate points in it, the other file I tried was the statistical area which has over 8 million in it. I didn't do anything with this file as it is just too big for my R set up.

I read the shape file in with `readShapePoly` and converted it like so

```
AUS@data$id = rownames(AUS@data)    
AUS.points = fortify(AUS, region="id")
AUS.df = join(AUS.points, AUS@data, by="id") 
```

Once I had converted the State borders shape file from `SpatialPolygonsDataFrame` to a regular dataframe I plotted it successfully but it took forever and the detail was too great. I thought to use `thinnedSpatialPoly` to simplify it but it gives the error:

```
Error in stopifnot(length(Sr@polygons) == nrow(data)) :trying to get slot "polygons" from an object of a basic class ("NULL") with no slots 
```

Which google cannot help me with.

My next strategy was to read it into SAS and use `proc greduce` which takes the file and creates a density field and you can choose how dense the polygons are.

```
proc mapimport out=states datafile='\Digital Boundaries\States\Shape file\STE_2011_AUST.shp';
id ste_code11;    run;
proc greduce data = states out = reduced_states;
id ste_code11;    run; 
```

SAS has crap graphics and couldn't even plot the thing for me so I exported the dataset and read it back into R with the new density field which I hoping to subset the dataframe by and use in my plots.

My problem now is that when I go to plot in R i get this![Map of Australian State Borders](../Images/ed0665196c6b7b5f0b5e1be15d2ca1f5.png)

```
ggplot(data=states.df, aes(X, Y, group=SEGMENT)) + 
geom_polygon(colour='black', fill='white') + theme_bw() 
```

I guess it is because the polygons are not in order or have broken? I used this function to try and rejoin my polygons but still no luck

```
RegroupElements <- function(df, longcol, idcol){
g <- rep(1, length(df[,longcol]))
if (diff(range(df[,longcol])) > 300) { # check if longitude within group differs more                than 300 deg, ie if element was split
d <- df[,longcol] > mean(range(df[,longcol])) # we use the mean to help us separate the   extreme values
g[!d] <- 1 # some marker for parts that stay in place (we cheat here a little, as we do not take into account concave polygons)
g[d] <- 2 # parts that are moved 
}
g <- paste(df[, idcol], g, sep=".") # attach to id to create unique group variable for   the dataset
df$group.regroup <- g
df
}

### Function to close regrouped polygons
# Takes dataframe, checks if 1st and last longitude value are the same, if not, inserts  first as last and reassigns order variable
ClosePolygons <- function(df, longcol, ordercol){
if (df[1,longcol] != df[nrow(df),longcol]) {
tmp <- df[1,]
df <- rbind(df,tmp)
}
o <- c(1: nrow(df)) # rassign the order variable
df[,ordercol] <- o
df
} 
```

So, finally my questions! How do people deal with large overly detailed shape files? Why wasn't thinnedspatialpoly working (I'd like to avoid SAS if possible)? How can I get my plot to not look like crap?

Finally my R specs:

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_Australia.1252  LC_CTYPE=English_Australia.1252   
[3] LC_MONETARY=English_Australia.1252 LC_NUMERIC=C                      
[5] LC_TIME=English_Australia.1252    

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods  
[8] base     

other attached packages:
[1] gridExtra_0.9   gpclib_1.5-1    ggmap_2.1       maptools_0.8-16
[5] lattice_0.20-6  rgeos_0.2-7     plyr_1.7.1      stringr_0.6    
[9] ggplot2_0.9.1   sp_0.9-99       shapefiles_0.6  foreign_0.8-50 
[13] fastshp_0.1-0  

loaded via a namespace (and not attached):
[1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       labeling_0.1      
[5] MASS_7.3-18        memoise_0.1        munsell_0.3        png_0.1-4         
[9] proto_0.3-9.2      RColorBrewer_1.0-5 reshape2_1.2.1     RgoogleMaps_1.2.0 
[13] rjson_0.2.8        scales_0.2.1       tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T09:39:57.273

First, if you are diving in head first, don't go into the shallow end.

My fairly old PC can read the state digital boundaries in shapefile format no problem:

```
aus=readOGR(".","STE_2011_AUST")
plot(aus) 
```

but the map is clearly over detailed. I also loaded it into Quantum GIS so I could have a good old zoom and pan around, and every tiny island is on there. I think its one of the most detailed country level maps I've ever seen. So secondly, you might want to try and find a readily-simplified map of the states (see www.gadm.org for possibles).

So lets see if `gSimplify` from package:rgeos helps:

```
aus2 = gSimplify(aus,0.1)
plot(aus2) 
```

that removes a lot of the tiny islands but sadly for me (and a large chunk of the population) it removes New South Wales as well. Not good. If I lower the tolerance eventually I can get something that keeps NSW:

```
aus2 = gSimplify(aus,0.01)
plot(aus2) 
```

but clearly there's some issue with gSimplify or the shapefile data itself. Anyway, if I save aus2 back to a shapefile there's a massive reduction in size, the .shp being 180k instead of 29 megabytes.

Also, I'd stick to plotting with base graphics.

# c++ - 如何找到 Internet Explorer(IE) 缓存文件的完整路径？

> ID：11428177
> 
> 赞同：1
> 
> 时间：2012-07-11T08:04:13.073
> 
> 标签：c++, internet-explorer, caching

操作系统：Windows 7 64bit IE 版本：9

当我打开

```
C:\Users\<USERNAME>\AppData\Local\Microsoft\Windows\Temporary Internet Files 
```

explorer.exe 的目录，IE 缓存文件都在那里。

但是文件不存在。

例如，如果**commonPerson.js**在缓存文件中，

它的真实路径是**C:\Users\USERNAME\AppData\Local\Microsoft\Windows\Temporary Internet Files\Low\Content.IE5\3IM78NQJ\commonPerson.js**

我猜其他路径是固定的，3IM78NQJ 是由一些规则（哈希？）决定的。

[Nirsoft 的 ICacheView](http://www.naver.com)包含我想要制作的内容，我将使用 C++ 来完成。

如何找到每个缓存文件的真实路径？

是否有任何众所周知的规则或索引文件包含有关文件路径的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T18:04:37.553

[GetUrlCacheEntryInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384185%28v=vs.85%29.aspx)是用于将 URL 映射到其缓存文件位置的正确 API。

根据您的情况，您可能还需要使用[FindFirst/FindNextUrlCacheEntry](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384026%28v=vs.85%29.aspx)函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T08:52:00.397

Vista 及更高版本：

```
SHGetKnownFolderPath(FOLDERID_InternetCache, .....) 
```

早些时候：

```
SHGetFolderPath(....., CSIDL_INTERNET_CACHE, .....) 
```

您仍然必须自己迭代子目录。

# c# - 使用 PFX 文件 X509 进行加密/解密

> ID：11428182
> 
> 赞同：2
> 
> 时间：2012-07-11T08:04:22.897
> 
> 标签：c#, bouncycastle, x509

我有一个用于测试目的的 pfx 文件，没有特殊的安全性。

我需要使用这个文件来加密一个 XML 文件。场景是我需要将 Password-Zip 文件连同与 Zip 相关的元数据文件发送给客户端。Zip 实际上包含用于更新软件安装的文件。起初，我虽然会加密 Zip 本身。但是后来，决定用一个简单的密码保护它，并将其上传到客户端的网站（ASP.NET）。客户端还将上传一个元数据文件，该文件将与压缩更新一起提供。此元数据文件将包含客户端标识符、MAC 地址、更新 zip 文件的 MD5 哈希等内容……我需要在客户端上传 ZIP 和 Meta 后在发送和解密之前加密此元数据文件。解密后，我将尝试验证客户端和当前安装以及补丁本身。

PFX 是为我生成的。

*   我需要从 PFX 中提取什么
*   我可以在这里使用 BouncyCastle。
*   这个想法是，一旦客户端安装了软件，他就会生成一个 X509 证书请求。这将创建两件事：请求和私钥。客户端将保留私钥并向我们发送请求。我们将验证客户（付款和所有）并为他生成证书并通过电子邮件将他发回（PFX）。然后，他将导入它以解锁软件的功能，并能够获得压缩更新和更多内容

问题有点像一个完整的解决方案需求，但我正面临着一个真正的困难时期，那就是与 X509 签约。我现在正在查看 BouncyCastle 文档。

感谢您的阅读。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:07:55.893

很长的答案。

是的，您可以使用 bouncycastle 从 pfx 中提取证书。

```
var pkcs = new Pkcs12Store(File.Open("path.pfx", FileMode.Open), "password".ToCharArray());
pkcs.Aliases // is a list of certificate names that are in the pfx;
pkcs.GetCertificate(alias); // gets a certificate from the pfx 
```

我们使用非常相似的方法，但我们将没有私钥的证书发送回 PEM，因为它不包含任何“秘密”

这是您提出证书签名请求的方式：

```
//generate a privatekey and public key
RsaKeyPairGenerator rkpg1 = new RsaKeyPairGenerator();
rkpg1.Init(new KeyGenerationParameters(new SecureRandom(), Keystrength));
AsymmetricCipherKeyPair ackp1 = rkpg1.GenerateKeyPair();

RsaPrivateCrtKeyParameters privateKey = (RsaPrivateCrtKeyParameters)ackp1.Private;
RsaKeyParameters publicKey = (RsaKeyParameters)ackp1.Public;

X509Name comonname = new X509Name (cname);
Pkcs10CertificationRequest csr = new Pkcs10CertificationRequest ("SHA1WITHRSA", comonname, publicKey, null, privateKey);
csr.Verify ();

StringBuilder sb = new StringBuilder();
PemWriter pw = new PemWriter (new StringWriter (sb));
pw.WriteObject (csr);
pw.Writer.Flush ();
var pemstring = sb.ToString (); 
```

这是在服务器端签署证书签名请求时发生的情况：

据我了解，根证书可以是您拥有私钥的任何证书。如果您想在其他应用程序（如浏览器）中使用它，则需要将其插入到名为“受信任的根证书颁发机构”的证书存储中，如果它是自签名证书，或者“受信任的中间证书颁发机构”，如果它不是在*没有*私人密钥的情况下，不能在客户端计算机上进行自签名。

带有私钥的证书可以通过添加到图标的小密钥来识别，请参见此处；![具有共同名称 localhost 的自签名证书](../Images/acad5a503379b4628217d61cc7512ae6.png)

```
//rootCert contains the rootcertificate in bouncycastle format

var pemstring = "a string containing the PEM";
PemReader pr = new PemReader (new StringReader (pemstring));
Pkcs10CertificationRequest csr = (Pkcs10CertificationRequest)pr.ReadObject ();

X509V3CertificateGenerator certgen = new X509V3CertificateGenerator();
certgen.SetSubjectDN(csr.GetCertificationRequestInfo().Subject);
certgen.SetIssuerDN(rootCert.SubjectDN);
certgen.SetPublicKey(csr.GetPublicKey());
certgen.SetSignatureAlgorithm(csr.SignatureAlgorithm.ObjectID.Id);
certgen.SetNotAfter(validThrough); //a datetime object
certgen.SetNotBefore(validFrom); //a datetime object
certgen.SetSerialNumber(serialNumber); //a biginteger

X509Certificate clientcert = certgen.Generate(rootPrivateKey);

//to send the certificate without the private key to the client you'll have to 
//convert it to PEM:

StringBuilder sb = new StringBuilder();
PemWriter pw = new PemWriter (new StringWriter (sb));
pw.WriteObject (clientcert);
pw.Writer.Flush ();
var pemstring = sb.ToString ();

//to make it a .net certificate use:
X509Certificate2 netcert = DotNetUtilities.ToX509Certificate (clientcert); 
```

客户端证书不包含私钥 atm。这就是在客户端再次发生的情况，如下所示：

```
//where pemstring contains the certificate in a PEMstring like shown above.
//and privateKey is the one we had in the first part over at the client.

PemReader pr = new PemReader(new StringReader(pemstring));
X509Certificate2 cert = DotNetUtilities.ToX509Certificate((Bouncy.X509Certificate)pr.ReadObject());

CspParameters cparms = new CspParameters
{
    CryptoKeySecurity = new CryptoKeySecurity(),
    Flags = CspProviderFlags.UseMachineKeyStore
};

RSACryptoServiceProvider rcsp = new RSACryptoServiceProvider(cparms);
RSAParameters parms = new RSAParameters
{
    Modulus = privateKey.Modulus.ToByteArrayUnsigned (),
    P = privateKey.P.ToByteArrayUnsigned (),
    Q = privateKey.Q.ToByteArrayUnsigned (),
    DP = privateKey.DP.ToByteArrayUnsigned (),
    DQ = privateKey.DQ.ToByteArrayUnsigned (),
    InverseQ = privateKey.QInv.ToByteArrayUnsigned (),
    D = privateKey.Exponent.ToByteArrayUnsigned (),
    Exponent = privateKey.PublicExponent.ToByteArrayUnsigned ()
};

rcsp.ImportParameters(parms);

netcert.PrivateKey = rcsp; 
```

# objective-c - 在 Cocoa 中轮询键盘

> ID：11428183
> 
> 赞同：0
> 
> 时间：2012-07-11T08:04:28.590
> 
> 标签：objective-c, cocoa, input, keyboard, polling

我的 Cocoa 应用程序应该不断地对用户按下的键的状态做出反应。为此，我想以固定的时间间隔轮询键盘，而不是依赖键盘事件。是否有任何 Cocoa API 来实现这一点？如果没有，还有哪些其他选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:21:20.623

投票从来都不是一个好主意。在大多数情况下，您不必这样做。

有 2 个您可能感兴趣的 API：

*   Quartz Event Taps [https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)

*   IOKit HID API [https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/HID/intro/intro.html#//apple_ref/doc/uid/TP40000970](https://developer.apple.com/library/mac/#documentation/DeviceDrivers/Conceptual/HID/intro/intro.html#//apple_ref/doc/uid/TP40000970)

请注意，键盘访问可能会带来一些安全问题，因此系统可能不允许您读取键盘状态。检查辅助功能设置（访问辅助设备）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:01:46.030

不要轮询键盘，只需`-keydown:`在您的 App 委托类中实现。

# c# - 对子内部文本的 XML 访问

> ID：11428184
> 
> 赞同：1
> 
> 时间：2012-07-11T08:04:31.820
> 
> 标签：c#, .net, xml, innertext

我有这个 XML：

```
<location>
  <character name="name" mask="pap.png" X="397" Y="60">
    <look reaction="False">
      text1
      <answer>text2</answer>
    </look>
    <talk xml=""/>
  </character>
</location> 
```

我可以访问节点。我在更改`text1`和时遇到了一些问题`text2`。这是我的代码：

```
node.ChildNodes[0].InnerText = "new_text1";
node.ChildNodes[0].ChildNodes[0].InnerText = "new_text2"; //this doesn't work 
```

之后我的 XML 看起来像：

```
<location>
  <character name="name" mask="pap.png" X="397" Y="60">
    <look reaction="False">text1</look>
    <talk xml=""/>
  </character>
</location> 
```

所以它切断了`<answer/>`孩子。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:08:11.340

你必须改变`InnerXml`。因为您的 XML 是**混合复杂类型**（复杂类型=混合：xml 元素可以包含属性、元素和文本），而**DOM**对此并不完全了解。你的代码可以是这样的：

```
node.ChildNodes[0].InnerXml = "new_text1 <answer>new_text2</answer>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:08:13.567

如果这是行`node.ChildNodes[0].InnerText = "new_text1";`

替换

```
<look reaction="False">
      text1
      <answer>text2</answer>
    </look> 
```

那么你已经替换了`<answer>text2</answer>`它的标签

# android - Android：发送带有来自 ImageView 的图像的电子邮件

> ID：11428189
> 
> 赞同：1
> 
> 时间：2012-07-11T08:04:41.743
> 
> 标签：android, android-imageview, email-attachments

我是stackoverflow的新手。我的 Android 应用程序有一点问题，特别是 ImageView 会触发点击事件。此事件打开一个带有一些预先编写文本的电子邮件客户端，它应该附加图像的图像。我已经知道之前应该将图像转换为位图，然后压缩并将其发送到电子邮件客户端，但不幸的是我不是 Android/Java 专家，所以我找不到如何做到这一点。这是电子邮件方法的代码：

*下面的新代码*

我必须替换“String imageURI = null;”的地方 带有电子邮件需要的图像。谢谢你们！

编辑：

我设法将我的代码编辑为此，没有给出错误：

```
public void sendMail(ImageView image){
    Intent i = new Intent(Intent.ACTION_SEND);
    int imageURI = R.drawable.img1;

    i.setType("text/plain");
    i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"destinatario@globelife.biz"});
    i.putExtra(Intent.EXTRA_SUBJECT, "Oggetto");
    i.putExtra(Intent.EXTRA_TEXT   , "Globelife");
    i.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
    i.setType("image/jpeg");
    i.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"+getPackageName()+"/"+imageURI));

    try {
        startActivity(Intent.createChooser(i, "Send mail..."));
    } catch (android.content.ActivityNotFoundException ex) {
        Toast.makeText(Test01Activity.this, "Non sono presenti app per l'invio di e-mails.", Toast.LENGTH_SHORT).show();
    }

} 
```

但我需要更改“int imageURI = R.drawable.img1;” 到“int imageURI = ImageView.src;” 或类似的东西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T09:27:33.147

尝试这个

```
ImageView iv = (ImageView) findViewById(R.id.splashImageView);
Drawable d =iv.getBackground();
BitmapDrawable bitDw = ((BitmapDrawable) d);
Bitmap bitmap = bitDw.getBitmap();
File  mFile = savebitmap(bitmap); 
```

接着

```
 Uri u = null;
   u = Uri.fromFile(mFile);

   Intent emailIntent = new Intent(Intent.ACTION_SEND);
   emailIntent.setType("image/*");
   emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Hello...");
   // + "\n\r" + "\n\r" +
   // feed.get(Selectedposition).DETAIL_OBJECT.IMG_URL
   emailIntent.putExtra(Intent.EXTRA_TEXT, "Your tsxt here");
   emailIntent.putExtra(Intent.EXTRA_STREAM, u);
   startActivity(Intent.createChooser(emailIntent, "Send email...")); 
```

和`savebitmap`方法

```
 private File savebitmap(Bitmap bmp) {
  String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
  OutputStream outStream = null;
  File file = new File(extStorageDirectory, temp + ".png");
  if (file.exists()) {
   file.delete();
   file = new File(extStorageDirectory, temp + ".png");
  }

  try {
   outStream = new FileOutputStream(file);
   bmp.compress(Bitmap.CompressFormat.PNG, 100, outStream);
   outStream.flush();
   outStream.close();
  } catch (Exception e) {
   e.printStackTrace();
   return null;
  }
  return file;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:19:35.687

```
Intent intent=new Intent(Intent.ACTION_SEND);
String[] recipients={"destinatario@domain.com"};
intent.putExtra(Intent.EXTRA_EMAIL, recipients);
intent.putExtra(Intent.EXTRA_SUBJECT, "Oggetto");
intent.putExtra(Intent.EXTRA_TEXT   , "Testo");
intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION);
intent.setType("image/png");
intent.putExtra(Intent.EXTRA_STREAM,Uri.parse(“file///sdcard/Images/your_image.jpg”));//or you can pass the path of your image
startActivity(Intent.createChooser(intent, "Send mail")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:21:21.097

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setType("image/jpg");
i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/Pictures/
image.jpg"));
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T08:16:07.750

//去除`String imageURI=null;`

```
public void sendMail(ImageView image){
    Intent i = new Intent(Intent.ACTION_SEND);

Uri pngImageUri = Uri.parse(image);

i.setType("image/png");//change here with image/png
    i.putExtra(Intent.EXTRA_EMAIL  , new String[]{"destinatario@domain.com"});
    i.putExtra(Intent.EXTRA_SUBJECT, "Oggetto");
    i.putExtra(Intent.EXTRA_TEXT   , "Testo");
    i.putExtra(Intent.EXTRA_STREAM, pngImageUri); 
```

# c++ - std::vector 是否适合频繁调整大小？

> ID：11428191
> 
> 赞同：3
> 
> 时间：2012-07-11T08:04:45.347
> 
> 标签：c++, vector, stl, resize

我正在创建一个我有小“粒子”的游戏。它们的数量变化非常频繁（每隔几秒钟），我想知道存储它们的最佳方式是什么。是`std::vector`还是`std::deque`更好？

保留永远不会被使用的空间（在那个容器中）是否可以（我有上限）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T08:13:24.913

如果顺序无关紧要，您可以将其替换为向量中的另一个粒子，而不是删除一个粒子（我认为它不重要）

```
std::vector<Particle> particles; 
```

当您删除索引处的粒子时`i`- 只需用最后一个填充空白空间：

```
particles[i] = particles.back();
particles.pop_back(); 
```

如果使用指针向量，您可以使其更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:11:42.110

如果为向量保留足够的空间，调整大小也不错，因为它不需要复制向量的内容。

另一方面，出队可以比具有自动管理容量的向量更有效地增长，特别是在大序列中，因为避免了大量的重新分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:33:11.293

这真的归结为使用情况。如果您的向量未排序，如果您实际上是在移除该粒子，则在向量中找到它的复杂度为 O(n)，并且整个向量将被复制，因此数据保持连续。使用双端队列，仍然需要 O(n) 才能找到，但删除是微不足道的。但是，如果您正在迭代

```
foreach (particle in particles)
{
    if(particle.update() == END_OF_LIFE)
    {
        particle.alive = false;
    }
    else
    {
        particle.draw();
    }
} 
```

您可以在没有显着开销的情况下做到这一点，但是要插入新粒子，您需要遍历每个粒子以找到第一个可以替换的“死”粒子（O（n）），或者在单独的标准::列表。

我们需要知道一件事才能有效地回答——你是否需要索引到一个特定的粒子（“给我列表中的第 1000 个粒子”）？另外，您是否曾经通过某个 ID 查找（“查找 id=421932 的粒子”）？如果是前者，vector 会在恒定时间内执行，而后者将由 std::unordered_set（c++ x11 版本的 hash_set，boost pre x11 中的类似选项）在恒定时间内执行，而 logn 时间由 std::set 执行。

# php - 传递要在 PHP 脚本中使用的 Jquery 变量

> ID：11428192
> 
> 赞同：-1
> 
> 时间：2012-07-11T08:04:49.157
> 
> 标签：php, jquery

我知道我以前问过这个问题，但我仍然需要帮助，基本上：

我有一个预订网格，如下所示，位于 bookings.php

![在此处输入图像描述](../Images/7311bd6c3461850e81a8130426bb1a0f.png)

在这个预订网格上，我有一个 dblClick 事件：

```
 ondblClickRow: function(rowid)
    {

        rowData = $("#bookings").getRowData(rowid);
        var brData = rowData['bookref'];

        getGridRow(brData);

        $("#cp-bookings-dialog").dialog({ hide: 'slide', height: 625, width: 733, title: 'Booking Reference: - '+ brData});
    }, 
```

这也会在 bookings.php 上打开一个 Jquery Dialog 窗口：

```
<div class="cp-tiles-wrapper-dlg">

<div class="cp-booking-info left">

<p class="pno-margin">Booking Date: &nbsp;<strong>Booking Reference is = <? echo BookingDocket::get_bookref(); ?></strong></p>
<p class="pno-margin">Return Date: &nbsp;<strong><? echo BookingDocket::get_bookdate(); ?></strong></p>
<p class="pno-margin">Journey: &nbsp;<strong></strong></p>
<p class="pno-margin">Passenger Tel: &nbsp;<strong></strong></p>
<p class="pno-margin">E-mail: &nbsp;<strong></strong></p>

</div>

</div> 
```

其中 brData 是我想在我的 PHP 脚本中使用的“预订参考”值。目前这个 dblClick 事件被发送到以下 Ajax 请求：

```
function getGridRow(brData) {

   $.ajax({

    url: 'scripts/php/bootstrp/all.request.php',
    type: 'POST',

    data: {

        fnme: 'getDGRow',
        rowdata: brData,

        id: null,
        condition: null
    },
    dataType: 'text/xml',
    timeout: 20000,
    error: function(){
        alert("It failed");
        $('#cp-div-error').html('');
        $('#cp-div-error').append('<p>There was an error inserting the data, please try again later.</p>');
        $('#cp-div-error').dialog('open');
    },
    success: function(response){

        // Refresh page

        //response = brData;
        //alert(response); <-- This alerts the correct Booking Reference value

    }
}); 
```

哪个被发送到 all.request.php

```
// Switch to determine method to call
switch ($_REQUEST['fnme']) {

case 'getDGRow':
header('Content-type: text/xml');
GetBookings::getGridRow($_REQUEST['rowdata']);
break; 
```

最后到我想使用这个 Jquery 值的 PHP 脚本：

```
class GetBookings {

public static function getGridRow($rowdata) {

$pdo = new SQL();
$dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

try {

    $query = "SELECT * FROM tblbookings WHERE bookref = '$rowdata'";

    //echo $query; <-- this passes the correct Booking Reference to £rowdata

    $stmt = $dbh->prepare($query);

    $stmt->execute();

    $row = $stmt->fetch(PDO::FETCH_BOTH);

       BookingDocket::set_id($row['id']);
       BookingDocket::set_bookref($row['bookref']);
       BookingDocket::set_bookdate($row['bookingdate']);
       BookingDocket::set_returndate($row['returndate']);
       BookingDocket::set_journeytype($row['journeytype']);
       BookingDocket::set_passtel($row['passengertel']);
       BookingDocket::set_returndate($row['returndate']);

    $stmt->closeCursor();

}

catch (PDOException $pe) {
    die("Error: " .$pe->getMessage(). " Query: ".$stmt->queryString);
}

$dbh = null;

    }

}
?> 
```

我不知道为什么，但这似乎不起作用。基本上在打开 Jquery Dialog 窗口时`$rowdata`为空，但是当我回显查询时，它显示`$rowdata`具有正确的值。

我尝试将 jquery 窗口的代码放入单独的 php 文件中，并在成功的 ajax 脚本中添加了以下内容：

```
 $('#cp-bookings-dialog').load('bookings-dialog.php', function() {
           alert('Load was performed.');
        }); 
```

但这没有任何区别。我知道所有代码都是正确的，因为例如，如果我将 $rowdata 设置为“BR12345”，它会在 jquery 预订对话框中显示我需要的值。我认为需要做的是在将值`$rowdata`传递给 PHP 脚本之后运行 PHP 查询。

有人知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:11:08.320

您需要从您的 PHP 脚本返回一个 JSON 编码的对象以在您的弹出窗口中使用。在进行 AJAX 调用之前评估您的 echo 调用，更糟糕的是，它根本不知道`GetBookings`状态（状态仅对单个请求有效）。

为什么是everying `static`？这看起来像一个糟糕的软件设计。

# javascript - 重新加载数据表内容

> ID：11428195
> 
> 赞同：1
> 
> 时间：2012-07-11T08:05:01.710
> 
> 标签：javascript, jquery, datatables

我确实有一个在页面上运行的代码。页面包含 3 个选项卡，每个选项卡包含一个表格和 2 个日期输入字段以及发送请求的按钮。JS 看起来像这样。

```
$(document).ready(function(){
    var tbl1 = $("tbl1").dataTable(){ //a lots of parametres}
    .. //2 more tbl2 and tbl3 variable initialization

    $("btn1").click(function(){
        tbl1.fnReloadAjax(tbl.oSettings());
    });
    ..//2 more btn2 and btn3 action initialization
}) 
```

首次加载页面时，日期输入字段跨度为 10 天，表格包含最近 10 天的记录。现在我做了一些更改，我确实有一个新的 ajax 请求，它从服务器中删除记录，我需要更新表格内容。每行都有一个按钮，按下它会删除服务器上的这条记录。一切正常，但要查看更改需要重新加载整页。我试图这样做：

```
function removeData(source){
     $.post('delete_record',{}, function ...)// ajax request to remove data
     alert("deleted");  // notice to user that record was deleted
     tbl1.fnReloadAjax(tbl1.oSettings()); // ERROR no ref to tbl1(trying to update table content)
} 
```

错误是因为在 removeData 函数中引用 tbl1 对象不存在，因为 tbl1 是在 $(document).ready 函数中定义的。我怎样才能获得到 tbl1 的链接

我现在已经尝试从函数 ready() 中取出表初始化代码。就像是

```
var getoTabele = function(){
  var oTable = $("tbl1").dataTable..... //initialization code
  ...
  ...
  return oTable;
} 
```

现在我可以在 removeData 函数中使用 oTable 因为我可以在 removeData 函数中获取链接

```
var oTable = getoTable() // Data warning. Cannot reinitialise DataTable 
```

这是正确的，因为函数 getoTable 创建新的 oTable 不参考旧的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:23:32.727

使用`bRetrieve`参数：

```
function removeData(source){
     (...)

     // this will return the previous, already initialized dataTable object.
     var tbl1 = $("tbl1").dataTable({'bRetrieve':true});

     tbl1.fnReloadAjax(tbl1.oSettings()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:20:26.363

您可以在`tblN`外部定义变量`$(document).ready()`，然后在函数中访问它们：

```
var tbl1, tbl2, tbl3;
$(document).ready(function(){
    // **** //
    tbl1 = $("tbl1").dataTable();
});

function removeData() {
    // **** //
    tbl1.fnReloadAjax(tbl1.oSettings());    
} 
```

# vb.net - 未定义类型“Infragistics.Win.UltraWinGrid.UltraCombo”

> ID：11428198
> 
> 赞同：1
> 
> 时间：2012-07-11T08:05:11.510
> 
> 标签：vb.net, infragistics

在我的 VB.Net 项目中，它引用了 Infragistics 程序集，例如：

*   Infragistics.Shared.v3.1.dll
*   Infragistics.Win.v3.1.dll
*   Infragistics.Win.UltraWinGrid.v3.1.dll
*   Infragistics2.Excel.v10.1.dll
*   等等

但是在我系统的 GAC 文件夹中，这些程序集不存在。当我尝试构建项目的解决方案时，我收到如下错误：

> 未定义类型“Infragistics.Win.UltraWinGrid.UltraCombo”

请帮助我，如何克服这些错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:18:15.963

基础设施.XXXXX。**v3.1** ? 严重地？
您是否使用了正确的参考资料？

尝试为每个控件升级到相同的**10.1**版本（参考、添加参考、选择 Infragistics.xxxx.v10.1.dll 代替版本 3.1）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T21:27:42.003

引用的程序集来自 NetAdvantage 2004 第 1 卷。为了让您的项目无需更改即可编译和运行，您需要安装 NetAdvantage 2004 第 1 卷，它只能安装在 Windows XP 和更早版本上。如果您已将产品密钥注册到您的帐户，则可以从 Infragistics 网站上的“[我的密钥和下载](https://www.infragistics.com/my-account/keys-and-downloads/)”页面下载安装程序。

请注意，NetAdvantage 2004 第 1 卷适用于 .NET Framework 1.x 和 Visual Studio 2003。如果您确实在使用它并且没有 NetAdvantage 2004 第 1 卷的密钥，则可以安装 NetAdvantage for .NET 2007 第 1 卷是支持 .NET Framework 1.x 的最后一卷，可从[存档下载](http://www.infragistics.com/products/downloads/archived)页面获得。

如果您已迁移到 Visual Studio 2005 或更高版本，则可以下载最新版本的 NetAdvantage 并使用它。为此，请单击链接在[NetAdvantage for Windows Forms](http://www.infragistics.com/products/windows-forms/)产品页面上进行尝试。

如果您安装的 NetAdvantage 版本比当前引用的版本更新，您将需要更新项目中的引用。在 2007 卷 1 中，有一个项目升级实用程序可用于执行此操作。在 2012 卷 1 中，有一个版本实用程序可用于执行此操作。

# c# - SQL 代码超时

> ID：11428199
> 
> 赞同：1
> 
> 时间：2012-07-11T08:05:19.807
> 
> 标签：c#, sql

我的 SQL 代码从列表中将 10,000 条记录插入到表中。如果记录已经存在，它会更新一些字段。

目前它需要超过 10 分钟并且超时，除非我限制要处理的记录数。我的代码中有什么可以解决这个问题的吗？

```
 foreach(RMSResponse rmsObj in rmsList) {
        try {
            string connectionString = @"server=localhost\sqlexpress;" + "Trusted_Connection=yes;" + "database=MyDB; " + "connection timeout=30";

            SqlConnection conn = new SqlConnection(connectionString);
            conn.Open();

            string str = "";
            str += "SELECT * ";
            str += "FROM RMSResponse ";
            str += "WHERE LeadID = @RecruitID";
            int LeadID;
            Boolean IsPositive = true;

            SqlCommand selectCommand = new SqlCommand(str, conn);
            selectCommand.CommandType = CommandType.Text;
            selectCommand.Parameters.Add(new SqlParameter("@RecruitID", rmsObj.RecruitID));
            SqlDataReader sqlDataReader = selectCommand.ExecuteReader();
            bool hasRows = sqlDataReader.HasRows;

            while (sqlDataReader.Read()) {
                LeadID = sqlDataReader.GetInt32(1);
                IsPositive = sqlDataReader.GetBoolean(2);
                IsPositive = (IsPositive == true) ? false : true;
                Console.WriteLine("Lead ID: " + LeadID + " IsPositive: " + IsPositive);
            }

            sqlDataReader.Close();

            if (hasRows) {
                SqlCommand updateCommand = new SqlCommand("UPDATE RMSResponse set IsPositive=@IsPositive, OptOutDate=@OptOutDate where LeadID=@LeadID", conn);
                updateCommand.Parameters.AddWithValue("@LeadID", rmsObj.RecruitID);
                updateCommand.Parameters.AddWithValue("@IsPositive", IsPositive);
                updateCommand.Parameters.AddWithValue("@OptOutDate", DateTime.Now);
                updateCommand.ExecuteNonQuery();
                sqlDataReader.Close();
            }

            if (!hasRows) {
                SqlCommand insertCommand = new SqlCommand("INSERT INTO RMSResponse (LeadID, IsPositive, ReceivedDate) " + "VALUES(@LeadID, @IsPositive, @ReceivedDate)", conn);
                insertCommand.Parameters.AddWithValue("@LeadID", rmsObj.RecruitID);
                insertCommand.Parameters.AddWithValue("@IsPositive", true);
                insertCommand.Parameters.AddWithValue("@ReceivedDate", DateTime.Now);
                int rows = insertCommand.ExecuteNonQuery();
            }
        } catch (SqlException ex) {
            Console.WriteLine(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:11:44.670

您可以将更新移动到 SQL - 您所做的只是将 OptOutDate 设置为今天。您可以将潜在客户 ID 列表传递给批量更新语句。

要插入记录，您可以批量插入到临时表中，然后执行 SQL 以插入表中尚未存在的 ID 的数据。

您的 C# 中没有太多逻辑，因此将数据拉出然后将其放回会使其不必要地变慢。

* * *

如果您不想继续下去，那么其他提示包括：

*   在循环外打开一个连接
*   在循环外创建一个 SqlCommand 对象并通过重置参数重用它
*   将您的选择 SQL 更改为仅选择您需要的列，而不是 *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:13:22.847

一个简单的更新或插入语句永远不会花费 10 分钟。

SqlServer 是一个非常好的数据库。

在表 RMSResponse 上的 LeadID 上创建索引。

如果你的 foreach 循环了很多记录，一定要考虑存储过程，存储过程会减少很多时间。

如果要更新或插入（UPSERT），请查看SqlServer 2008 中添加的[合并命令。](http://technet.microsoft.com/en-us/library/bb510625.aspx)

# css - CSS缓存谷歌浏览器

> ID：11428200
> 
> 赞同：3
> 
> 时间：2012-07-11T08:05:27.780
> 
> 标签：css, caching, google-chrome

我认为缓存有问题。我在 Joomla 有一个网站，我有一些 .css (layout.css, position.css, ....)，我在网站的主页上有 3 个按钮，我在 localhost 中进行了测试，当我看到主页时好吧，我将所有内容上传到生产环境，到我的服务器。现在，我只是编辑了这些按钮的一些样式，例如宽度，以便更好地查看它们......**但我遇到了缓存问题，因为有时我看到它们有新的变化，但其他时候我看看旧样式.....我意识到这种情况尤其发生在 chrome 上** 你能帮我吗？最好的问候，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:12:58.923

新版本完成后尝试删除缓存数据，请参阅[提示](http://support.google.com/chrome/bin/answer.py?hl=en&answer=95582)。在 FF 中，您可以使用组合键删除缓存数据`Ctrl+F5`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:16:51.603

您可以强制浏览器使用最新的样式表。在这里阅读更多： [http ://www.impressivewebs.com/force-browser-newest-stylesheet/](http://www.impressivewebs.com/force-browser-newest-stylesheet/)

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:12:26.550

Chrome 是一个很棒的浏览器，但缓存有点痛苦，我使用隐身模式，因为这也会根据我的经验关闭缓存。

# css - 将类型选择器与 id 选择器结合起来有什么好处？例如 div#some_id

> ID：11428210
> 
> 赞同：1
> 
> 时间：2012-07-11T08:06:16.573
> 
> 标签：css, css-selectors

这非常简单，但我想知道人们为什么要写这个？

```
div#some_id 
```

您在网页上只能拥有一个名为“some_id”的 ID。那么为什么要具体呢？是否出于可读性目的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:09:05.600

有几个可能的原因：

*   这是一个更[具体](http://www.w3.org/TR/CSS21/cascade.html#specificity)的选择器
*   它告诉阅读样式表的人选择器针对的是 div 元素
*   相同的 id 可以应用于使用相同样式表的不同页面上的不同元素类型（这通常会导致更多的混乱然后好处，所以我不建议这种方法）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:08:55.777

你是对的，但这意味着一个**div**的 ID 为`some_id`. （更准确地说，一个 ID 为 的元素`some_id`，它也是一个`div`）。

这赋予了更高的特异性值，但你是对的。它通常对 ID 毫无价值，对类名更有用。

例如：

```
div.large { width: 500px; /* 500px is a large div */ }
input.large { width: 100px; /* 100px is a large input */ } 
```

相同的类名，不同的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:11:03.637

这样做的原因主要是为了样式表的可读性。

由于您在一个页面上只能有 1 个 id，因此您不需要指定它是哪种类型的元素是有道理的。

# git - 如何合并远程仓库上的两个分支

> ID：11428212
> 
> 赞同：0
> 
> 时间：2012-07-11T08:06:23.707
> 
> 标签：git, github, repository

我有一个远程仓库。它有四个分支，即master、branch1、branch2、branch3。我将更改推送到主仓库。现在我想将这些更改添加到 branch3。我是否必须合并它们如果是，那么我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:09:43.663

我认为这只是

```
git checkout branch3
git rebase master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:24:58.990

是的，首先确保您与遥控器同步：

```
checkout master
pull origin master
checkout branch3
pull origin branch3 
```

然后进行合并

```
merge master 
```

如果需要，请按

```
push origin branch3 
```

# mysql - MySQL：从特定日期获取记录并每小时对特定站点进行分组

> ID：11428214
> 
> 赞同：1
> 
> 时间：2012-07-11T08:06:32.010
> 
> 标签：mysql, sql

```
CREATE TABLE `call_log` (
  `call_id` int(11) NOT NULL AUTO_INCREMENT,
  `call_time` datetime NOT NULL,
  `caller` varchar(32) NOT NULL,
  `name_recording_url` varchar(123) DEFAULT NULL,
  `phone` varchar(10) NOT NULL,
  `forwarded_from` varchar(16) NOT NULL,
  `called_number` varchar(16) DEFAULT NULL,
  `sent_to_phone` varchar(10) NOT NULL,
  `market` varchar(64) NOT NULL,
  `station` varchar(12) NOT NULL,
  `distributor_id` int(11) NOT NULL,
  `distributor_phone` varchar(10) NOT NULL,
  `answered` enum('Yes','No') NOT NULL DEFAULT 'No',
  `mode` enum('Live','Test') NOT NULL,
  PRIMARY KEY (`call_id`)
) 
```

所以，我想在不同的时间用总呼叫填充电台。

例如，我们有台站 ABCD 和 ASDF。ABCD 有 30 条记录，ASDF 有 10 条记录。我想每小时获取他们的记录。

示例输出为：

```
station    call_time(H)     total_call
ABCD       10               5               // ABCD has 5 calls at 10am
ABCD       12               20              // ABCD has 20 calls at 12pm
ABCD       15               5               // ABCD has 5 calls at 3pm
ASDF       08               4               // ASDF has 4 calls at 8am
ASDF       05               2               // ASDF has 2 calls at 5pm
ASDF       13               2               // ASDF has 2 calls at 1pm
ASDF       22               2               // ASDF has 2 calls at 10pm 
```

* * *

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:10:30.880

```
SELECT station, HOUR(call_time), COUNT(call_id) AS total_call
FROM call_log
GROUP BY station, HOUR(call_time) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:11:49.600

尝试这个：：

```
SELECT station, HOUR(call_time) as call_time(H), COUNT(call_id) AS total_call
FROM call_log
GROUP BY station, HOUR(call_time) 
```

# jquery - jQuery：构建多 div 结构

> ID：11428215
> 
> 赞同：0
> 
> 时间：2012-07-11T08:06:32.730
> 
> 标签：jquery, html, structure

我想用 jQuery 构建这个 html 结构：

```
<div id="container">
    <div id="row0">
        <div id="start0"></div>
        <div id="end0"></div>
    </div>
    <div id="row1">
        <div id="start1"></div>
        <div id="end1"></div>
    </div>
</div> 
```

这就是我所做的，但它很丑陋并且没有按预期工作。你能帮我么。谢谢你。

```
var count = 0;
$("#target").click(function() {
    $('#container').append($('<div></div>')
                    .attr({ id : "row" + count })
                    .addClass("test"));

    for (var i = 0; i < 2; i++) {
        $("#row" + count).append('<div id="start' + count + '</div');
        $("#row" + count).append('<div id="end' + count + '</div');
    } 
    count++;
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:10:48.850

可以这样做：

```
for (var i = 0; i < 2; i++) {
    var start = $("<div />", { id : "start" + i });
    var end = $("<div />", { id : "end" + i });
    $("<div />", { id : "row" + i }).append(start, end).appendTo("#container");
} 
```

**演示：http:** [//jsfiddle.net/SyLKc/](http://jsfiddle.net/SyLKc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:14:37.573

假设“容器” div 已经存在，并且想法是每次单击“目标”（无论是什么）时，您都想在“容器”div 的末尾添加一个孩子，那么停止代码工作的主要因素是您使用了`currentRow`尚未定义的变量。将其更改为`count`并丢失 for 循环：

```
var count = 0;
$("#target").click(function() {
    $('#container').append($('<div></div>')
                    .attr({ id : "row" + count })
                    .addClass("test"));

    $("#row" + count).append('<div id="start' + count + '"></div>');
    $("#row" + count).append('<div id="interval' + count + '"></div>');

    count++;
}); 
```

这可以通过不重新选择新 div 两次来提高效率：

```
var count = 0;
$("#target").click(function() {
    $('<div></div>').attr({ id : "row" + count })
                    .addClass("test")
                    .appendTo("#container")
                    .append('<div id="start' + count + '"></div>')
                    .append('<div id="interval' + count + '"></div>');        
    count++;
}); 
```

确保上述内容已在准备好的文档中或正文末尾的脚本块中。

正如 bažmegakapa 指出的那样，您缺少`>`内部 div 标签末尾的 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:27:36.493

```
var count = 0; 
$("#target").click(function() { 
    $('#container').append('<div id="row'+ count +'" class="test"></div>')
    for (var i = 0; i < 2; i++) { 
        $("#row" + count).append('<div id="start' + count + '></div>'); 
        $("#row" + count).append('<div id="end' + count + '></div>'); 
    }
    count++; 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:17:45.650

那这个呢：

```
var count = 0;
$("#target").click(function() {

  var $currentRow = $('<div/>').attr({ id : "row" + count }).addClass("test")

  for (var i = 0; i < 2; i++) {
      $currentRow.append('<div id="start' + count + '"></div>');
      $currentRow.append('<div id="interval' + count + '"></div>');
  } 

  $('#container').append($currentRow);

  count++;
}); 
```

[jsfiddle](http://jsfiddle.net/Kjqx3/1/) ​</p>

# mysql - 如何获得上周的最大重复值

> ID：11428216
> 
> 赞同：1
> 
> 时间：2012-07-11T08:06:48.983
> 
> 标签：mysql

我有一个`property_viewers`包含 3 个字段的表格；id、property_id、日期。我需要找到上周重复的最大 property_id。我该如何进行...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:08:50.633

尝试这个：

```
select *, count(1)  from property_viewers where DATEDIFF(date, DATE(now()))<8 group by property_id order by count(1) desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:21:16.040

```
SELECT property_id
FROM property_viewers
WHERE date BETWEEN 
    CURRENT_DATE() - INTERVAL (7+WEEKDAY(CURRENT_DATE())) DAY AND   //Monday last week
    CURRENT_DATE() - INTERVAL (1+WEEKDAY(CURRENT_DATE())) DAY       //Sunday last week
GROUP BY property_id
ORDER BY COUNT(property_id) DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:18:32.073

```
select property_id, count(property_id)  from property_viewers 
where `date` between 'weekSTartDate' and 'weekEndDate' 
group by property_id order by count(property_id) desc; 
```

# wso2 - wso2 的 appserver 4.1.2 中的“查找数据源时出错：null”

> ID：11428220
> 
> 赞同：0
> 
> 时间：2012-07-11T08:06:53.333
> 
> 标签：wso2, wso2carbon

我从 wso2 站点下载了 appserver 4.1.2（最新）。不幸的是，当我尝试添加数据源时，我收到一条错误消息（“查找数据源时出错：null”）。

我在论坛中只找到了一个解决方案来更新一些东西。但是，当我添加这些存储库时，我找不到数据源组件的更新。我不得不承认我是一个新手，也许我做错了什么。

任何更详细的帮助都会很好，因为没有数据源功能，应用服务器对我来说毫无价值。我想知道这在生产环境中是如何工作的。

谢谢，

于尔根

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:47:04.183

这似乎是一个已知问题。你能试试 WSO2 DSS 2.6.3。你可以从这里下载它[1]。

[1] [http://wso2.com/products/data-services-server](http://wso2.com/products/data-services-server)

# c# - Visual Studio 2012 .NET 多目标和异步回调

> ID：11428222
> 
> 赞同：1
> 
> 时间：2012-07-11T08:07:10.880
> 
> 标签：c#, .net, visual-studio, visual-studio-2012, multitargeting

我有一个使用 .NET Framework 3.5 的 .NET 应用程序，用 C# 编写。应用程序正在使用 BeginInvoke 异步调用委托。该应用程序在使用 Visual Studio 2012 RC 编译时工作正常，但在使用 Visual Studio 2010 SP1 编译时会冻结（主线程卡在 WaitOne 中等待异步委托完成，但它们从不执行）。

虽然错误可能是错误设计的同步，但令我惊讶的是为什么它在 VS 2012 中有效而在 VS 2010 中无效，而我在两者中都针对相同的框架版本。

在 Visual Studio for .NET 中如何实现多目标？当针对相同的框架版本时，是否应该期望可执行行为相同，或者是否存在某些部分（编译器前端或运行时库的某些部分），这取决于所使用的 Visual Studio 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:14:57.753

是，有一点不同。使用的 C# 编译器不同。请参阅[面向 .NET 2.0 的 VS2008 并不能阻止我使用 C# 3 功能](https://stackoverflow.com/questions/2118644/vs2008-targeting-net-2-0-doesnt-stop-me-from-using-c-sharp-3-features?rq=1)。注意：这与 Visual C++ 中多目标的工作方式不同，后者在目标时使用旧版本的完整工具链。

打击我的问题是 foreach 变量的不同生命周期范围。我在委托中捕获变量，而在 VS 2012 中，每个委托都捕获了自己的变量版本，而[在 VS 2010 中却没有](https://stackoverflow.com/questions/512166/c-sharp-the-foreach-identifier-and-closures)。

VS 2012 使用的是 C# 5 编译器，它实现了新的行为。此更改记录在[Visual C# Breaking Changes in Visual Studio 2012 RC](http://msdn.microsoft.com/en-us/library/hh678682%28v=vs.110%29.aspx)中。[C# 5 还有哪些新功能](http://www.mindscapehq.com/blog/index.php/2012/03/18/what-else-is-new-in-c-5/)？或[提升 ForEach，Visual Studio 2012 中的重大变化](http://msmvps.com/blogs/kathleen/archive/2012/07/03/lifting-foreach-breaking-change-in-visual-studio-2012.aspx)。

# android - 如何在不使用 Eclipse 的情况下运行将在任何系统中运行的 Android 应用程序

> ID：11428225
> 
> 赞同：0
> 
> 时间：2012-07-11T08:07:18.937
> 
> 标签：android, android-emulator, android-ndk

我在 Eclipse 中创建了一个 Android 计算器应用程序。如果我想运行我的应用程序，我需要通过 Eclipse 运行它。但是我想在任何系统中运行我的应用程序而不使用 Eclipse，就像运行普通应用程序一样，只需下载并运行。

如果有人知道如何做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:11:22.923

您可能希望在您的 bin 文件夹中获取 .apk 文件。该文件是您打包在一起的整个应用程序。

您可以在其他 Android 手机上运行和安装它，但它们必须在应用程序设置中启用“未知来源”。

否则，您将不得不发布到应用商店，全世界拥有 Android 设备的人都可以从那里直接下载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:22:53.713

```
app run without eclipse in any system as a normal apps run 
```

我可以知道普通应用程序是如何运行的吗？

它需要任何模拟器或设备。

您也可以在没有 Eclipse 的情况下运行 .apk 文件！

下载 Android SDK 并通过 avd 命令创建一个模拟器并安装任何应用程序。

您可以通过名为**BlueStacks App Player的 3rd 方软件执行的另一种方式**

此软件仅适用于 mac 和 Windows[在这里下载](http://bluestacks.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:18:26.347

在位于硬盘上的项目的**bin**文件夹内，将有**.apk**文件，您可以将其传输到您的设备，然后打开**文件浏览器**，无论您拥有什么，都可以安装和运行您的应用程序。`Calculator app`

 ***** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T02:09:46.507

您的意思是您想将它安装在系统中的任何设备上，而不需要运行 Eclipse？

该命令类似于“adb install bin/MyCalculator.apk”。一旦你这样做了，你的应用程序就会像其他任何应用程序一样安装。

你的意思是你想让*任何人*在他们的设备上安装你的应用程序吗？您最好的选择是将其放在 Android Market 上。不要忘记生成真正的签名密钥（不要使用 Eclipse 调试密钥）并在将应用程序上传到市场之前对其进行正确签名。

如果您不想使用市场，那么您可以将 apk 文件放在任何网页上，并让人们使用他们的浏览器下载它。然后他们转到他们的设备设置并启用“未知来源”。之后，他们可以运行浏览器，转到“菜单 > 下载”并选择他们刚刚下载的 apk。

或者，您可以直接将 apk 文件发送给某人，让他们将设备连接到他们的计算机，启用 USB，然后将 apk 复制到他们的 /sdcard 目录中的某个位置。然后他们启动一个文件浏览器（他们必须先安装它）并导航到 apk 文件。我*认为*这将允许他们在他们的设备上安装 apk。

我认为应该涵盖它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-11T08:09:25.363

您应该生成 .apk 文件，并将其安装在您想要的任何设备上。
[http://www.technobitez.com/how-to/create-apk-files-for-android-phone](http://www.technobitez.com/how-to/create-apk-files-for-android-phone)
[如何在其中构建 APK 文件蚀？](https://stackoverflow.com/questions/4600891/how-to-build-apk-file)****

# entity-framework - 使用 EF 4 插入行时违反唯一键约束

> ID：11428226
> 
> 赞同：1
> 
> 时间：2012-07-11T08:07:24.470
> 
> 标签：entity-framework, entity-framework-4

我要插入的对象有一个父对象作为导航属性。

当我“添加”要插入它的对象时，它还将`ObjectStateManager`我的父对象（已经插入）设置为`Added`并尝试插入它。我已经在 SQL Profiler 中对其进行了验证，因此引发了唯一键违规的异常。

我通过两种方式摆脱这个

1.  在添加对象之前，我将所有导航属性设置为 null
2.  将`ObjectStateManager`父对象的 设置为`Modified`。

但这似乎更像是破解而不是解决方案。我相信实体框架必须对此有一些优雅的解决方案。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:30:27.023

第二种方法是解决这个问题的正确方法。当您调用`AddObject`EF 时，将附加状态中的对象图中的所有实体`Added`。如果图中还有现有实体，则必须通过将它们的状态设置为`Unchanged`或来告知 EF `Modified`。

# c++ - wxComboBox 自定义 EnterEvent 中的 wxWidgets 2.9 AutoComplete

> ID：11428238
> 
> 赞同：3
> 
> 时间：2012-07-11T08:08:14.440
> 
> 标签：c++, event-handling, wxwidgets

我有一个关于 wxWidgets 2.9 和 wxComboBox AutoComplete 功能的问题。下面是我的事件表，它接受我的 ComboBox 的 ENTER 事件，在输入时我触发 OnComboEnter。如果这样做，我将无法从 AutoComplete 列表中选择一个项目，因为它直接对用户键入 ComboBox 的文本执行 OnComboEnter 方法。

```
BEGIN_EVENT_TABLE(LVFilterPanel, wxPanel)
   EVT_TEXT_ENTER(wxID_ANY, LVFilterPanel::OnComboEnter)
   EVT_CONTEXT_MENU(LVFilterPanel::OnComboContextMenu)
END_EVENT_TABLE() 
```

我的 ComboBox 声明如下：

```
mFilterString = new wxComboBox(this, LV_FILTER_STRING, wxEmptyString, wxDefaultPosition, wxDefaultSize, 0, 0, wxTE_PROCESS_ENTER); 
```

AutoComplet 使用 wxWidgets 2.9 中的默认 AutoComplete 方法完成：

```
mFilterString->AutoComplete(historyarr); 
```

historyarr 是一个 wxArrayString，其中填充了用户之前输入的字符串。OnComboEnter 方法如下所示：

```
void LVFilterPanel::OnComboEnter(wxCommandEvent& event) {
    wxCommandEvent ce(wxEVT_COMMAND_BUTTON_CLICKED, LV_FILTER);
    static_cast<wxButton*>(FindWindow(LV_FILTER))->Command(ce);
} 
```

我现在的问题是，如何更改事件处理，使其能够先选择项目然后处理 OnComboEnter，以便用户能够先选择项目（或者可能根本不选择项目直接按回车键启动事件和 OnComboEnter 方法）。提前致谢。

问候，

罗因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:34:53.470

如果您需要在标准处理发生后执行您的事件处理程序，通常的技巧是在您的事件处理程序中不做任何事情（这意味着`event.Skip()`当然也调用 ！）除了设置一些内部标志并在`EVT_IDLE`处理程序中检查这个标志。如果已设置，则执行您需要的任何操作（例如`button->Command()`，在您的情况下）并重置标志。

这种方法确保处理程序在事件发生后“不久”运行，而不会干扰正常的事件处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T08:35:57.800

我有同样的问题，但 wxTextCtrl，这是我的解决方案：

```
TextCtrl2 = new wxTextCtrl(this, ID_TEXTCTRL2, wxEmptyString, wxDefaultPosition, wxDefaultSize, 0, wxDefaultValidator, _T("ID_TEXTCTRL2"));

TextCtrl2->SetHint("Search...");
TextCtrl2->AutoComplete(m_AutoCompleteChoices);
TextCtrl2->Connect(wxEVT_KEY_DOWN, wxKeyEventHandler(StartFrame::OnKeyDown),NULL, this);

void StartFrame::OnKeyDown(wxKeyEvent& event)
{
    switch (event.GetKeyCode()) {
    case WXK_RETURN:
        QueryCache(TextCtrl2->GetValue()); // <- This is anything to do!
        break;
    }
    event.Skip();
} 
```

我可以使用 wxSearchCtrl 但 Autocomplete 在该控件中不起作用，我不知道为什么。

# macos - 同步 iTunes 时，Adobe Flex 移动应用程序在 iphone 中不兼容

> ID：11428239
> 
> 赞同：0
> 
> 时间：2012-07-11T08:08:19.997
> 
> 标签：macos, flash-builder, itunes

同步 iTunes 时，Adobe Flex 移动应用程序在 iphone 中不兼容。使用 flash builder 4.5 创建了一个 flex 移动项目。我通过使用 Flash 中的发布版本获得了 IPA 文件。在 iphone 中同步时显示不兼容。如果证书有问题？让我们知道在 iphone 中运行应用程序的选项

# java - 使 JScrollBar 更大

> ID：11428241
> 
> 赞同：0
> 
> 时间：2012-07-11T08:08:31.653
> 
> 标签：java, swing, jscrollbar

我正在疯狂地尝试制作更大的 JScrollBar。我想做一个更大的结和跟踪......以及 JScrollBar 本身。

我在这里找到了一些代码来扩展我自己的 BasicScrollBarUI 以更改结的颜色、性能、图像......但没有什么可以让整个事情变得更大。我已尝试多次修改此代码以实现此目的，但我无法做到。

我的意思是这篇文章：[自定义 JScrollbar 问题（更改旋钮/拇指）](https://stackoverflow.com/questions/2865108/custom-jscrollbar-problem-change-the-knob-thumb)

我可以创建一个大结，但它在屏幕的“外部”，因为整个事情并没有变大。我认为即使我正在增加轨道大小，但无论如何 JScrollBar 本身并没有增长。

有任何想法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:16:35.417

尝试更新`ScrollBar`宽度属性`UIManager`：

```
UIManager.put("ScrollBar.width", new Integer(50)); 
```

或者可能更改首选尺寸有助于：

```
scrollBar.setPreferredSize(new Dimension(width, height)); 
```

# php - 使用 Graph Api 在外部像 Facebook 帖子一样 - 示例

> ID：11428242
> 
> 赞同：1
> 
> 时间：2012-07-11T08:08:32.057
> 
> 标签：php, facebook, facebook-graph-api, facebook-like

有人可以给我一个例子，从一个经过身份验证的用户的外部应用程序发布一个 Facebook 帖子的点赞吗？

假设我有一个从 facebook 拉帖子的提要，我想创建一个按钮，让用户喜欢我的应用程序中的帖子。单击此按钮后，我怎样才能最好地创建该赞，以便在 Facebook 上使用用户的赞更新帖子？

我的想法是我可以制作一个 javascript onclick 函数，该函数 ajaxes 到一个 php 脚本，它执行类似的操作 - $facebook->api("/$id/likes",'POST'); ，但我是否需要从该页面重新初始化 facebook，然后才能拨打此电话？或发送我的访问令牌等？这让我对这种服务器端方法感到困惑。您如何在点击时进行此调用？一个例子真的很有帮助！提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:11:19.903

好的，所以终于找到了一个不错的解决方案，并且没有卷曲。这是我在 ajax 函数 onclick 中调用的脚本：

```
<?php
$access_token = $_GET['token'];

$post_id = $_GET['id'];

function do_post_request($url, $data, $optional_headers = null)
{
$params = array('http' => array(
          'method' => 'POST',
          'content' => $data
        ));
if ($optional_headers !== null) {
  $params['http']['header'] = $optional_headers;
}
$ctx = stream_context_create($params);
$fp = @fopen($url, 'rb', false, $ctx);
if (!$fp) {
  echo "error";
}
$response = @stream_get_contents($fp);
if ($response === false) {
  throw new Exception("Problem reading data");
}
  return $response;
}

$data = "access_token=".$access_token;

$url = 'https://graph.facebook.com/'.$post_id.'/likes';

$result = do_post_request($url, $data, $optional_headers = null);
?> 
```

同样在我测试过的工作代码中， $post_id 的用户 id 的帖子首先是这样的： SOURCEUSERID_POSTID

从这篇文章的组合中得到了这个解决方案 - [http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)

还有这个 -[喜欢 Facebook graph api 上的帖子](https://stackoverflow.com/questions/4534975/like-posts-over-facebook-graph-api)

希望这对其他人有所帮助！

# android - 使用android中的按钮单击卸载应用程序

> ID：11428244
> 
> 赞同：0
> 
> 时间：2012-07-11T08:08:44.257
> 
> 标签：android, android-intent

在我的应用程序中，我开发了获取用户安装的第三方应用程序的列表。从那开始，我现在想要的是添加一个按钮，当单击时，用户将被定向到带有强制停止和卸载选项的内置应用程序详细信息屏幕，因为我只接受用户安装的应用程序，我不需要 root 权限，并且以及系统权限。有没有办法在我的应用程序中调用该系统意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:18:05.210

尝试：

```
 Intent detailsIntent = new Intent();
    detailsIntent.setClassName("com.android.settings", 
    "com.android.settings.InstalledAppDetails");

    //ApiLevel greater than or equal to 8
    detailsIntent.putExtra("pkg", "Appliction_Package_NAme");

    //ApiLevel in less than 8

    detailsIntent.putExtra("com.android.settings.ApplicationPkgName", 
    "Appliction_Package_NAme");

    startActivity(detailsIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:29:02.573

尝试这个

```
 Intent intent = new Intent(Intent.ACTION_DELETE);
   intent.setData(Uri.parse("package:app package name"));
   startActivity(intent); 
```

# azure - Windows Azure 中的密钥管理

> ID：11428250
> 
> 赞同：15
> 
> 时间：2012-07-11T08:08:56.300
> 
> 标签：azure, cryptography

我对如何在 Windows Azure 中存储密钥（用于数据加密）有点困惑。

根据以下两个链接（[#1](http://msdn.microsoft.com/en-us/magazine/ee291586.aspx)、[#2](http://blogs.msdn.com/b/usisvde/archive/2012/03/15/windows-azure-security-best-practices-part-7-tips-tools-coding-best-practices.aspx)），建议将密钥/密钥库存储在 Windows Azure 存储中：

> 在 Windows Azure 存储服务中存储您自己的密钥库是保存一些秘密信息的好方法，因为您可以依赖这些数据在多租户环境中是安全的，并由您自己的存储密钥保护。

但是“开发 Windows Azure 应用程序的安全最佳实践”（[#3](http://download.microsoft.com/download/7/3/e/73e4ee93-559f-4d0f-a6fc-7fec5f1542d1/securitybestpracticeswindowsazureapps.docx)）建议不要在 Windows Azure 中存储任何与密钥相关的材料：

> 此外，开发人员不应将密钥或任何密钥材料上传到 Windows Azure 存储，无论他们在隐藏它时多么小心。如果任何计算机或存储服务遭到破坏，可能会导致加密密钥被泄露。

在 Windows Azure 中存储加密密钥的最佳方法是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T11:53:40.050

您会从我在第一个链接中的评论中看到我同意您的担忧。:)

除了自己的证书存储之外，Azure 没有安全的密钥存储方式。这是一篇关于使用这种方法的文章：

[现场注释：在 Windows Azure 应用程序中使用基于证书的加密](http://blogs.msdn.com/b/windowsazure/archive/2011/09/07/field-note-using-certificate-based-encryption-in-windows-azure-applications.aspx)

你会注意到我也评论了那篇文章的缺点，链接到这个问题：

[使用 c# 读取 azure ServiceConfiguration 文件的证书部分](https://stackoverflow.com/questions/11288233/read-azure-serviceconfiguration-files-certificate-section-using-c-sharp)

可以在此项目中找到使用 Azure 内置证书存储加密 AES 密钥（避免 RSA 对加密数据长度的限制，同时保持 AES 密钥安全）的示例：

[Codeplex：通过属性进行 Azure 表加密](http://azuretableencrypt.codeplex.com)

EncryptDecrypt 项目中的`SymmetricKeyHelper`类特别有趣。

感谢@breischl 提到它，以及他对项目的贡献。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-01-26T17:17:24.780

最近发布的 Azure Key Vault 服务可能非常适合解决这个问题。引入了这一点，以便可以在中心位置管理密钥并且可以轻松控制访问。它还支持 HSM 支持的服务，使其非常安全。

这是一篇关于[Azure Key Vault 入门的文章](http://www.rahulpnath.com/blog/getting-started-with-azure-key-vault/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-14T20:48:58.080

对于未来的 Google 员工 - 我已经实现了 Stuart Pegg 上面描述的解决方案，但与 Azure Tables 分离。

有关文章，请参阅[https://www.fasterweb.io/Blog/two-way-encryption-for-azure-web-roles](https://www.fasterweb.io/Blog/two-way-encryption-for-azure-web-roles)，或仅有关代码的[https://gist.github.com/strommen/20905504949072fe5e16](https://gist.github.com/strommen/20905504949072fe5e16)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T11:21:14.280

总是有风险的。如果有人通过任何方式（例如使用工具）获得对您存储帐户的访问权限，他们或许能够找到您的密钥。所以最后，需要保护存储帐户本身免受未经授权的访问。

例如，请不要让开发人员访问生产存储帐户。这包括不允许他们使用工具访问帐户。请保护存储帐户密钥，不要在任何应用程序中泄露任何信息。

只有存储管理员（以及您 100% 信任的开发人员）才能拥有对生产存储帐户的完全访问权限。然后，您可以安全地将密钥存储在您的存储帐户中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-02T22:59:07.413

我知道这可能有点晚了，但是如果有人正在为 Azure 网站寻找一种快速简便的加密实现，我已经创建了一个（[Azure.Security](https://www.nuget.org/packages/Azure.Security/)并且源代码目前在[GitHub 上](https://github.com/cmatskas/Azure.Security)。该项目基于松散在[Codeplex: Azure Table Encryption via Attribute](http://azuretableencrypt.codeplex.com/)项目上，但它更直接且易于使用。稍后将发布一篇博文，说明如何设置和使用它。

# c# - Windows Phone 7 相机中的自动对焦

> ID：11428257
> 
> 赞同：1
> 
> 时间：2012-07-11T08:09:28.740
> 
> 标签：c#, windows-phone-7, camera, autofocus

我正在编写一个使用相机捕获和处理图像的 WP7 应用程序。图像的关键要求之一是始终保持焦点。不幸的是，WP7[不支持自动对焦](http://forums.create.msdn.com/forums/p/103150/611303.aspx)。我所说的**自动对焦**是指始终对焦到屏幕上某个点的能力。

谁能推荐一种启用或实现该功能的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:12:18.807

您可以尝试使用 DispatcherTimer，它会继续在刻度上调用 FocusAtPoint，使用取景器中的一个点？

[http://msdn.microsoft.com/en-us/library/microsoft.devices.photocamera.focusatpoint(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.devices.photocamera.focusatpoint(v=vs.92).aspx)

# html - CSS菜单列表双重嵌套

> ID：11428262
> 
> 赞同：1
> 
> 时间：2012-07-11T08:09:39.267
> 
> 标签：html, css

我想要一个带有鼠标悬停显示属性的菜单在里面我想使用第二个无序列表来显示第二个隐藏菜单。问题是我的第一个规则覆盖了第二个菜单属性和所有列表项显示。这是我的菜单html。

```
<ul id="menu">
    <li class="current"><a href="./index.html">ANASAYFA</a></li>
    <li><a href="./blog-1.html">HAKKIMIZDA</a></li>
    <li><a href="./portfolio-3c.html">HİZMETLERİMİZ</a>
        <ul>
            <li><a href="./portfolio-3c.html">Eğitim Hizmetlerimiz</a>
                <ul class="menu2">
                    <li  class="current"><a href="./blog-1.html">Ygs-Lys hazırlık programları</a></li>
                    <li><a href="./blog-2.html">Sbs'ye Hazırlık programı'</a></li>
                    <li><a href="./blog-1.html">Ana sınıg 1'e 1 test programı</a></li>
                    <li><a href="./blog-2.html">Okul destek programı</a></li>
                </ul>
            </li>
            <li><a href="./portfolio-2c.html">Neurofeedback</a></li>
            <li><a href="./portfolio-2c.html">Bioofeedback</a></li>
        </ul>
   </li>
   <li><a href="./gallery.html">GALERİ</a></li><li><a href="#">STYLINGS</a>
   <li><a href="./stylings-texts.html">SANAL TUR</a></li>
   <li><a href="./stylings-table_columns.html">BİZE ULAŞIN</a>
        <ul>
            <li><a href="#">İletişim Formu</a></li>
            <li><a href="#">İletişim Bilgileri</a></li>
        </ul>
    </li>
</ul> 
```

这是我的菜单原始和 menu2 嵌套 ul 的 css 文件

```
#sidebar #sidebar-content #menu2 {margin: 0px auto;width: 100%;z-index: 30;float: left;}
 #sidebar #sidebar-content #menu2 li {line-height: 32px;text-align: center;width: 100%;background-image: url('../images/menu_li.png');
 background-repeat: no-repeat;background-position: bottom center;clear: left;float: left;color: #999999;}
 #sidebar #sidebar-content #menu2 li a, #sidebar #sidebar-content #menu2 .current ul li a {font-size: 12px;font-weight: normal;display: block;color: #999999;}
 #sidebar #sidebar-content #menu2 li:hover{background-image: url('../images/menu_li_hover.png');}
 #sidebar #sidebar-content #menu2 li a:hover, #sidebar #sidebar-content #menu2  .current a, #sidebar #sidebar-content #menu2 li ul li a:hover{color: #ffffff; }
 #sidebar #sidebar-content #menu2 li ul{display: none;}#sidebar #sidebar-content #menu2 li ul li{background-image: url('../images/menu_subli.png');}
 #sidebar #sidebar-content #menu2 li ul li a{font-size: 11px;} 
```

你能告诉我一个让它工作的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:19:48.287

您可以使用阻止您的第一条规则覆盖属性

```
menu > li { /* css properties */ } 
```

这只会影响即时`li's`

或者你也可以使用这样的东西 -

```
#menu2 ul li { /* write the css again so the override does not happen */ } 
```

# wpf - WPF - System.Windows.Markup.StaticResourceHolder 中指定的值导致异常

> ID：11428264
> 
> 赞同：0
> 
> 时间：2012-07-11T08:10:02.137
> 
> 标签：wpf, vb.net, xaml

所以我再一次来这里是为了解决我自己无法解决的问题，所以我的问题是每次加载按钮样式时我都会得到一个 xamlparse execption，在样式内部我有一个应该得到的 <rectangle>用户从我的 MVVM 上的查询中定义的一种颜色。到目前为止没有问题，问题是试图将该颜色值赋予矩形的 LinearGradientBrush 内的 grandientstop。我使用的 xaml 代码：

```
<Rectangle x:Name="rectangle" Fill="{Binding Path=StrColor, Converter={StaticResource FadingBrushConverter}, RelativeSource={RelativeSource AncestorType={x:Type Rectangle}}}" HorizontalAlignment="Right" Height="70" Margin="0,0,0,0" RadiusY="5" RadiusX="5" VerticalAlignment="Bottom" Width="70">
<Rectangle.Effect>
     <DropShadowEffect ShadowDepth="1" BlurRadius="8"/>
</Rectangle.Effect>
</Rectangle> 
```

“StrColor”是一个颜色属性。

在我的 MVVM 上，我有这个转换器：

```
 Public Class FadingBrushConverter
        Implements IValueConverter

    Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
        ' TODO: Do some type-checking
        Dim brush = New LinearGradientBrush()
        Dim color = DirectCast(value, Color)
        Dim Bcolor As System.Windows.Media.Color
        Bcolor.R = 0
        Bcolor.G = 0
        Bcolor.B = 0

        brush.StartPoint = New Point(0.5, 0)
        brush.EndPoint = New Point(0.5, 1.27)
        brush.GradientStops.Add(New GradientStop(color, 0))
        brush.GradientStops.Add(New GradientStop(Bcolor, 1))

        Return brush

    End Function

    Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
        Throw New NotSupportedException()
    End Function
End Class 
```

我真的不知道我在这里做错了什么，我一直在网上寻找，但到目前为止我没有解决这个问题的运气！

我也使用过 DynamicResource 但没有成功！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:57:24.683

我认为问题在于绑定。Rectangle 的“Fill”属性绑定到其父 Rectangle 的 strColor 属性（带有`"RelativeSource FindAncestor"`参数）。我认为假设一个矩形放置在另一个矩形中是不现实的。即使是这种情况，内置的 Rectangle 元素也没有`strColor`属性。如果您想从 ViewModel 中获取颜色，您应该尝试以下方式：

```
{Binding Path=StrColor, Converter={StaticResource FadingBrushConverter}" 
```

当然，这是假设 DataContext 设置正确。

# ruby - ROR 错误：项目目录包含“gemfile”，但在执行 bundle show 后显示错误“无法找到 Gemfile”

> ID：11428266
> 
> 赞同：0
> 
> 时间：2012-07-11T08:10:05.230
> 
> 标签：ruby, ruby-on-rails-3, ubuntu-12.04

我正在执行一个命令`rails new sample_app`。创建项目后`sample_app`，我执行了`bundle show`命令，但找不到 Gemfile。 我谷歌并找到了他们没有找到的![在此处输入图像描述](../Images/56cb8c73dd3ea6f84ef2ba18879744b4.png) stackoverflow解决方案[1 ](https://stackoverflow.com/questions/10012181/bundle-install-could-not-locate-gemfile) [​​2 ](https://stackoverflow.com/questions/3329953/could-not-locate-gemfile) [3](https://stackoverflow.com/questions/5896137/could-not-locate-gemfile-after-executing-bundle-install)`gemfile` ，而在我的情况下我有。提出一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:43:47.023

我认为您应该在 sample_app 目录中。对于此在命令提示符下运行，然后
`cd sample_app`
执行
`bundle install`

`bundle show`

# sql - 加入两个表并从它们中获取输出

> ID：11428269
> 
> 赞同：4
> 
> 时间：2012-07-11T08:10:26.330
> 
> 标签：sql, join, group-by

> **可能重复：**
> [SQL Query JOIN with Table](https://stackoverflow.com/questions/11386368/sql-query-join-with-table)

如果这是 TestingTable1 中的数据

```
BUYER_ID  |   ITEM_ID       |  CREATED_TIME
----------+-----------------+----------------------
1345653      151851771618     2012-07-09 19:57:33
1345653      110909316904     2012-07-09 21:29:06
1345653      221065796761     2012-07-09 19:31:48 
```

如果这是TestingTable2中的以下数据

```
USER_ID  |   PRODUCT_ID    |    LAST_TIME
---------+----------------+-----------------------
1345653     150851771618      2012-07-09 19:57:33
1345653     110909316904      2012-07-09 22:29:06
1345653     221165796761      2012-07-09 12:31:48 
```

我需要`TestingTable2`与`TestingTable1`on`BUYER_ID`和进行比较`USER_ID`。我需要看看，如果`BUYER_ID`和`USER_ID`匹配，那么我需要比较`ITEM_ID`和，如果在`PRODUCT_ID`与其中一个或两个比较之后存在不匹配，那么我需要显示结果。`CREATED_TIME``LAST_TIME``TestingTable2``TestingTable1`

所以如果你看上面的例子——我基本上有三个场景

1.  首先`TestingTable1`，在第一行与第一行`ITEM_ID`不匹配`PRODUCT_ID`，`TestingTable2`但`CREATED_TIME`与`LAST_TIME`两个表中的第一行匹配
2.  其次`TestingTable1`，在第二行中，第二行与第二行`CREATED_TIME`不匹配`LAST_TIME`，`TestingTable2`但`ITEM_ID`与`PRODUCT_ID`两个表中的第二行匹配
3.  第三 - 在`TestingTable1`中，在第三行`ITEM_ID`中不匹配，`PRODUCT_ID`也不`CREATED_TIME`匹配`LAST_TIME`，所以在第三行中，它们都与第三行不匹配`TestingTable1`。

`TestingTable2`因此，这是我在与`TestingTable1`always进行比较时需要涵盖的三种情况。并且`TestingTable1`是需要始终进行比较的主表，因此这意味着其中的数据`TestingTable1`始终是准确的。

所以我需要考虑上面的例子来显示这样的结果，如果不匹配其中一个或两个 -`TestingTable1`数据然后在它旁边是相同的`TestingTable2`数据，这样我就可以看到与之`TestingTable1`相比有什么值`TestingTable2`

```
BUYER_ID   |   ITEM_ID       |    CREATED_TIME           |      USER_ID   |     PRODUCT_ID     |     LAST_TIME   
-----------+-----------------+---------------------------+----------------+--------------------+-----------------------
1345653        151851771618       2012-07-09 19:57:33           1345653        150851771618         2012-07-09 19:57:33
1345653        110909316904       2012-07-09 21:29:06           1345653        110909316904         2012-07-09 22:29:06
1345653        221065796761       2012-07-09 19:31:48           1345653        221165796761         2012-07-09 12:31:48 
```

所以我写了一个查询，我认为它会涵盖我所有的三个场景，但只有它涵盖`First Two`了`Third One`. 我很困惑我们是否可以实现第三种情况？

```
SELECT * 
FROM(
    SELECT *
    FROM TestingTable1 A
    JOIN TestingTable2 B ON A.BUYER_ID = B.USER_ID AND B.LAST_TIME = A.Created_TIME 
    WHERE B.PRODUCTID <> A.ITEM_ID
    UNION ALL
    SELECT * 
    FROM TestingTable1 A
    INNER JOIN TestingTable2 B ON A.BUYER_ID = B.USER_ID AND B.PRODUCTID = A.ITEM_ID  
    WHERE B.t1time <> A.Created_TIME  
 ) X 
```

任何建议将不胜感激。

**更新：-**

只是快速更新我最初想做的事情。因为我知道我的第三种情况很少有问题。

首先在 中`TestingTable1`，我按和排序（ORDER BY）表，我用`BUYER_ID`和排序，我通过确保数据属于和在给定日期进行比较。`CREATED_TIME``TestingTable2``USER_ID``LAST_TIME``BUYER_ID``USER_ID`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:43:18.503

您可以使用`non exists`子句在一个表中查找在另一个表中不匹配的行。您可以对`union`另一个表重复此操作：

```
select  'missing in t2', *
from    TestingTable1 t1
where   not exists
        (
        select  *
        from    TestingTable2 t2
        where   t1.buyer_id = t2.user_id
                and t1.item_id = t2.product_id
                and t1.created_time = t2.last_time
        )
union all
select  'missing in t1', *
from    TestingTable2 t2
where   not exists
        (
        select  *
        from    TestingTable1 t1
        where   t1.buyer_id = t2.user_id
                and t1.item_id = t2.product_id
                and t1.created_time = t2.last_time
        ) 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/14a89/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:49:55.073

```
with C as
(
  select *
  from TestingTable1 A
    inner join TestingTable2 B
      on A.BUYER_ID = B.USER_ID and
         B.LAST_TIME = A.Created_TIME and
         B.PRODUCT_ID <> A.ITEM_ID
  union all
  select * 
  from TestingTable1 A
    inner join TestingTable2 B 
      on A.BUYER_ID = B.USER_ID and 
         B.PRODUCT_ID = A.ITEM_ID and
         B.LAST_TIME <> A.CREATED_TIME
)
select *
from C
union all
select *
from TestingTable1 A
  inner join TestingTable2 B
    on A.BUYER_ID = B.USER_ID and
       A.CREATED_TIME <> B.LAST_TIME and
       A.ITEM_ID <> B.PRODUCT_ID
where not exists (select *
                  from C
                  where A.BUYER_ID = C.BUYER_ID and
                        A.ITEM_ID = C.ITEM_ID and
                        A.CREATED_TIME = C.CREATED_TIME) and
      not exists (select *
                  from C
                  where B.USER_ID = C.USER_ID and
                        B.PRODUCT_ID = C.PRODUCT_ID and
                        B.LAST_TIME = C.LAST_TIME); 
```

[SQL小提琴](http://sqlfiddle.com/#!4/e3b6b/5/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:35:02.017

整个尝试存在一个主要问题。

因为每一行的 UserID/BuyerID 都是相同的，所以查询会将TestingTable1 中的**每一行****与**TestingTable2 中的每一行进行比较。

 **前两个比较对您有用只是巧合。
如果您有几行具有相似的 CREATED_TIME（即使具有不同的 ITEM_ID），它们将被相互比较。

我推荐的是：为每个表
添加一个，然后将它们连接起来。 这样，您将能够将 TestingTable1 中的每一行与 TestingTable2 中的对应行进行比较，而不会产生“笛卡尔积”。`primary key``foreign key`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:32:55.093

您可以获得的最接近的方法是将 in 中`TestingTable1`没有匹配的所有行与 in`TestingTable2`中*所有可能不匹配的行*匹配`TestingTable2`。

像这样（未经测试，但希望你明白）：

```
SELECT *
FROM TestingTable1 AS T1
INNER JOIN TestingTable2 AS T2 ON T1.BUYER_ID = T2.USER_ID
    AND
    (
        (
            (T1.ITEM_ID = T2.PRODUCT_ID AND T1.CREATED_TIME <> T2.LAST_TIME)
            OR (T1.ITEM_ID <> T2.PRODUCT_ID AND T1.CREATED_TIME = T2.LAST_TIME)
            OR 
            (
                T1.ITEM_ID <> T2.PRODUCT_ID AND T1.CREATED_TIME <> T2.LAST_TIME
                AND NOT EXISTS(SELECT 1
                       FROM TestingTable2 AS T2a
                       INNER JOIN TestingTable1 AS T1a ON T2a.USER_ID = T1a.BUYER_ID
                       AND 
                       (
                           (T1a.ITEM_ID = T2a.PRODUCT_ID AND T1a.CREATED_TIME <> T2a.LAST_TIME)
                           OR (T1a.ITEM_ID <> T2a.PRODUCT_ID AND T1a.CREATED_TIME = T2a.LAST_TIME)
                       )
                       WHERE T1a.BUYER_ID = T1.BUYER_ID
                       AND (T2a.PRODUCT_ID <> T2.PRODUCT_ID OR T2a.LAST_TIME <> T2.LAST_TIME)                       
                      )
            )
        )
    ) 
```

也就是说，如果你有一个额外的行`TestingTable2`：

```
USER_ID | PRODUCT_ID | 上次
---------+----------------+------------------------
1345653 333333333333 2012-07-09 05:27:18

```

您的结果集如下所示：

```
BUYER_ID | 项目 ID | 创建_TIME | USER_ID | PRODUCT_ID | 上次   
-----------+-----------------+-------- --------+----------------+--------+---- ------------------
1345653 151851771618 2012-07-09 19:57:33 1345653 150851771618 2012-07-09 19:57:33
1345653 110909316904 2012-07-09 21:29:06 1345653 110909316904 2012-07-09 22:29:06
1345653 221065796761 2012-07-09 19:31:48 1345653 221165796761 2012-07-09 12:31:48
1345653 221065796761 2012-07-09 19:31:48 1345653 333333333333 2012-07-09 05:27:18

```

请注意，这一切都假设您对于每个错误的 PRODUCT_ID 或 LAST_TIME**都有一个且只有一个相关行。`TestingTable2`**否则你会得到各种疯狂的笛卡尔积匹配！为了避免这种情况，您需要确定一个或两个表的排序，以确定应首先匹配哪一行。

例如，尝试将满足方案 1 和 2 的以下行添加到`TestingTable2`并查看会发生什么：

```
USER_ID | PRODUCT_ID | 上次
---------+----------------+------------------------
1345653 110909316904 2012-07-09 19:57:33

```**

# python - 生成一个汇总（“数据透视”？）表

> ID：11428271
> 
> 赞同：7
> 
> 时间：2012-07-11T08:10:27.597
> 
> 标签：python, sqlite

我想要一种汇总数据库表的方法，以便将共享公共 ID 的行汇总到一行输出中。

我的工具是 SQLite 和 Python 2.x。

例如，给定下表我当地超市的水果价格......

```
+--------------------+--------------------+--------------------+
|Fruit               |Shop                |Price               |
+--------------------+--------------------+--------------------+
|Apple               |Coles               |$1.50               |
|Apple               |Woolworths          |$1.60               |
|Apple               |IGA                 |$1.70               |
|Banana              |Coles               |$0.50               |
|Banana              |Woolworths          |$0.60               |
|Banana              |IGA                 |$0.70               |
|Cherry              |Coles               |$5.00               |
|Date                |Coles               |$2.00               |
|Date                |Woolworths          |$2.10               |
|Elderberry          |IGA                 |$10.00              |
+--------------------+--------------------+--------------------+ 
```

...我想制作一个汇总表，显示每个超市每种水果的价格。空格应由 NULL 填充。

```
+----------+----------+----------+----------+
|Fruit     |Coles     |Woolworths|IGA       |
+----------+----------+----------+----------+
|Apple     |$1.50     |$1.60     |$1.70     |
|Banana    |$0.50     |$0.60     |$0.70     |
|Cherry    |NULL      |$5.00     |NULL      |
|Date      |$2.00     |$2.10     |NULL      |
|Elderberry|NULL      |NULL      |$10.00    |
+----------+----------+----------+----------+ 
```

我相信文献称这为“数据透视表”或“数据透视查询”，但显然[SQLite 不支持`PIVOT`.](https://stackoverflow.com/questions/1237068/pivot-in-sqlite) （该问题中的解决方案使用硬编码`LEFT JOIN`s。这对我并不真正有吸引力，因为我事先不知道“列”名称。）

现在我通过在 Python 中遍历整个表并累积 a`dict`来做到这一点`dicts`，这有点笨拙。我愿意接受更好的解决方案，无论是 Python 还是 SQLite，它们都会以表格形式提供数据。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-12T13:20:15.440

The pandas package can handle this very nicely.

```
>>> import pandas
>>> df=pandas.DataFrame(data, columns=['Fruit', 'Shop', 'Price'])
>>> df.pivot(index='Fruit', columns='Shop', values='Price')
Shop        Coles   IGA  Woolworths
Fruit                              
Apple         1.5   1.7         1.6
Banana        0.5   0.7         0.6
Cherry        5.0   NaN         NaN
Date          2.0   NaN         2.1
Elderberry    NaN  10.0         NaN 
```

The documentation: [http://pandas.pydata.org/pandas-docs/stable/reshaping.html](http://pandas.pydata.org/pandas-docs/stable/reshaping.html)

Some IPython Notebooks to learn pandas: [https://bitbucket.org/hrojas/learn-pandas](https://bitbucket.org/hrojas/learn-pandas)

Hope that will help.
Regards
Patrick Brockmann

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T08:59:57.770

在 python 方面，您可以使用一些 itertools 魔法来重新排列您的数据：

```
data = [('Apple',      'Coles',      1.50),
        ('Apple',      'Woolworths', 1.60),
        ('Apple',      'IGA',        1.70),
        ('Banana',     'Coles',      0.50),
        ('Banana',     'Woolworths', 0.60),
        ('Banana',     'IGA',        0.70),
        ('Cherry',     'Coles',      5.00),
        ('Date',       'Coles',      2.00),
        ('Date',       'Woolworths', 2.10),
        ('Elderberry', 'IGA',        10.00)]

from itertools import groupby, islice
from operator import itemgetter
from collections import defaultdict

stores = sorted(set(row[1] for row in data))
# probably splitting this up in multiple lines would be more readable
pivot = ((fruit, defaultdict(lambda: None, (islice(d, 1, None) for d in data))) for fruit, data in groupby(sorted(data), itemgetter(0)))

print 'Fruit'.ljust(12), '\t'.join(stores)
for fruit, prices in pivot:
    print fruit.ljust(12), '\t'.join(str(prices[s]) for s in stores) 
```

* * *

**输出：**

```
Fruit        Coles      IGA     Woolw
Apple        1.5        1.7     1.6
Banana       0.5        0.7     0.6
Cherry       5.0        None    None
Date         2.0        None    2.1
Elderberry   None       10.0    None 
```

# java - Excel 单元格中的多行文本

> ID：11428274
> 
> 赞同：35
> 
> 时间：2012-07-11T08:10:53.610
> 
> 标签：java, excel, apache-poi, export-to-excel

我正在尝试将多行文本写入 excel 单元格。

```
cell.setCellValue("line1 \n line2"); 
```

但是当我打开文档时，我只看到一行，直到我双击它进行编辑，然后它变成了两行。为什么会这样？谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-11T08:15:19.260

您需要设置行高以容纳两行文本。

```
row.setHeightInPoints((2*sheet.getDefaultRowHeightInPoints())); 
```

您需要设置`wrap text = true`以获取新行。试试这个： 这里 wb 是`Workbook`.

```
 CellStyle cs = wb.createCellStyle();
 cs.setWrapText(true);
 cell.setCellStyle(cs); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-17T17:46:15.580

我发现，在您遵循该问题的公认答案后，您现在必须包含第三步。添加所有数据后，您必须自动调整列的大小。

假设您关心第 2 列，

`sheet.autoSizeColumn(2);`

有关上下文，请参见Apache 的[此](https://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xssf/usermodel/examples/NewLinesInCells.java)示例。它适用于 Java 8、poi-3.15.jar 和 Excel for Mac。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-19T13:42:20.483

这对我有用

cell.setCellValue("line1 \n\r line2");

# java - 我们如何在没有外部资源的情况下使用 JAVA 从推文中删除（或检测）非英语标签

> ID：11428275
> 
> 赞同：0
> 
> 时间：2012-07-11T08:10:54.500
> 
> 标签：java, tags

如何在保留主题标签 (#xxx)、网址 (@xxxx) 和提及 (@xxx) 的情况下从推文中删除非英语标签？我在这里找到了： content.replaceAll("\W", " ") ：[从 Java 中的字符串中删除所有非“单词字符”，留下重音字符？](https://stackoverflow.com/q/1611979/1515897)，但它并没有真正帮助。我知道有很多语言检测工具，比如微软的，以及其他复杂的方法，但我想要一些正则表达式，或者我可以在 JAVA 中使用的方法，而无需外部资源（如字典）。这是推文的一个示例：“Meeeeeee！RT @missLOVElace_：谁想要我的 80,000 条推文？”

如果 JAVA 中有可以检测推文是否为非英语语言的方法，那就太好了。这里有一个类似的：http: [//babel-fett.heroku.com/](http://babel-fett.heroku.com/) ，但它是用 Ruby 编写的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:47:21.607

我使用了 java 正则表达式： content.replaceAll("[^A-Za-z0-9-_@#\s]", "")... 它有效.. 我正在寻找 java 语言检测器；我正在寻找一种可以离线工作的强大工具。我找到了这个：[http](http://code.google.com/p/language-detection/wiki/GettingStarted) ://code.google.com/p/language-detection/wiki/GettingStarted 我认为这是一个很好的工具。其他相关问题在这里：[https](https://stackoverflow.com/q/1923844/1515897) ://stackoverflow.com/q/1923844/1515897 ，[如何检测用户输入文本的语言？](https://stackoverflow.com/questions/3227524/how-to-detect-language-of-user-entered-text).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:23:41.373

嗯，一个词不是英语有两个条件（而且一个词不是英语，你可以断定这个短语不是，通常）。

1 - 检查第一个字母是否不是大写：专有名词保持不变，无论语言是什么

2 - 所有英文字母都包含在 [a-zA-Z] 中，所以我想检查一个单词是否是英文并不难。这是一个**非详尽**的字符列表，例如，在英语中不存在：

```
äàáãæå
ëèéê
ïìíî
òóôö
ð
ñ 
```

但基本上，每个不匹配`\w`的单词都不是英语......（除非单词的第一个字母是大写字母，我再说一遍）。

但是你看，即使是在线的工具也是这样的。以没有意义的句子**Hoark blerk 为例**，您的工具将其检测为英语，因为我没有使用任何非 \w 字母。所以如果你真的想深入，你必须创建一个包含所有英文单词的数据库（我认为它已经存在）并检查你的单词是否与字典的任何条目匹配......但我怀疑你真的想要这样精确的。

请记住保留`@whatever`and `#whatever_again`，带和不带括号（使用简单的正则表达式可以很容易地实现）。并且不要忘记忽略标点符号，例如笑脸等。除非语言包含这些符号作为字母，否则您应该保留它们；）

# java - 在 imageview 中播放动画 GIF 图像文件

> ID：11428287
> 
> 赞同：8
> 
> 时间：2012-07-11T08:11:44.687
> 
> 标签：java, android

我正在制作一个 Android 应用程序，我想在其中播放一个图像视图中的 GIF 文件。我尝试了很多方法，制作了一个自定义类但没有成功。

以前有没有人实施过这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T09:00:18.113

您可以在 Android SDK 示例中找到示例代码。gif 图像显示在扩展的活动中`View`

使用 gif 图像的代码`ImageView`不是

```
import android.app.Activity;
import android.content.Context;
import android.graphics.*;
import android.graphics.drawable.*;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.*;

import java.io.IOException;
import java.io.InputStream;
import java.io.ByteArrayOutputStream;

public class BitmapDecode extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new SampleView(this));
    }

    private static class SampleView extends View {
        private Bitmap mBitmap;
        private Bitmap mBitmap2;
        private Bitmap mBitmap3;
        private Bitmap mBitmap4;
        private Drawable mDrawable;

        private Movie mMovie;
        private long mMovieStart;

        private static byte[] streamToBytes(InputStream is) {
            ByteArrayOutputStream os = new ByteArrayOutputStream(1024);
            byte[] buffer = new byte[1024];
            int len;
            try {
                while ((len = is.read(buffer)) >= 0) {
                    os.write(buffer, 0, len);
                }
            } catch (java.io.IOException e) {
            }
            return os.toByteArray();
        }

        public SampleView(Context context) {
            super(context);
            setFocusable(true);

            java.io.InputStream is;
            is = context.getResources().openRawResource(R.drawable.beach);

            BitmapFactory.Options opts = new BitmapFactory.Options();
            Bitmap bm;

            opts.inJustDecodeBounds = true;
            bm = BitmapFactory.decodeStream(is, null, opts);

            // now opts.outWidth and opts.outHeight are the dimension of the
            // bitmap, even though bm is null

            opts.inJustDecodeBounds = false;    // this will request the bm
            opts.inSampleSize = 4;             // scaled down by 4
            bm = BitmapFactory.decodeStream(is, null, opts);

            mBitmap = bm;

            // decode an image with transparency
            is = context.getResources().openRawResource(R.drawable.frog);
            mBitmap2 = BitmapFactory.decodeStream(is);

            // create a deep copy of it using getPixels() into different configs
            int w = mBitmap2.getWidth();
            int h = mBitmap2.getHeight();
            int[] pixels = new int[w*h];
            mBitmap2.getPixels(pixels, 0, w, 0, 0, w, h);
            mBitmap3 = Bitmap.createBitmap(pixels, 0, w, w, h,
                                           Bitmap.Config.ARGB_8888);
            mBitmap4 = Bitmap.createBitmap(pixels, 0, w, w, h,
                                           Bitmap.Config.ARGB_4444);

            mDrawable = context.getResources().getDrawable(R.drawable.button);
            mDrawable.setBounds(150, 20, 300, 100);

            is = context.getResources().openRawResource(R.drawable.animated_gif);
            if (true) {
                mMovie = Movie.decodeStream(is);
            } else {
                byte[] array = streamToBytes(is);
                mMovie = Movie.decodeByteArray(array, 0, array.length);
            }
        }

        @Override protected void onDraw(Canvas canvas) {
            canvas.drawColor(0xFFCCCCCC);            

            Paint p = new Paint();
            p.setAntiAlias(true);

            canvas.drawBitmap(mBitmap, 10, 10, null);
            canvas.drawBitmap(mBitmap2, 10, 170, null);
            canvas.drawBitmap(mBitmap3, 110, 170, null);
            canvas.drawBitmap(mBitmap4, 210, 170, null);

            mDrawable.draw(canvas);

            long now = android.os.SystemClock.uptimeMillis();
            if (mMovieStart == 0) {   // first time
                mMovieStart = now;
            }
            if (mMovie != null) {
                int dur = mMovie.duration();
                if (dur == 0) {
                    dur = 1000;
                }
                int relTime = (int)((now - mMovieStart) % dur);
                mMovie.setTime(relTime);
                mMovie.draw(canvas, getWidth() - mMovie.width(),
                            getHeight() - mMovie.height());
                invalidate();
            }
        }
    }
} 
```

您也可以使用这些链接

[http://weavora.com/blog/2012/02/07/android-how-to-use-animated-gif/](http://weavora.com/blog/2012/02/07/android-how-to-use-animated-gif/)

[http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/](http://droid-blog.net/2011/10/14/tutorial-how-to-use-animated-gifs-in-android-part-1/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-13T20:45:45.057

您可以在不使用任何 3rd 方库的情况下在 android 中显示 Gif。我就是这样做的。

采取网络视图。

```
<WebView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/imageWebView" /> 
```

大多数示例显示如何从资产文件夹打开文件，但这里我向您展示如何从 SD 卡/内存打开它。

```
 WebView webView = (WebView) findViewById(R.id.imageWebView);
    String  data    = "<body> <img src = \""+ filePath+"\"/></body>";
    // 'filePath' is the path of your .GIF file on SD card.
   webView.loadDataWithBaseURL("file:///android_asset/",data,"text/html","UTF-8",null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T08:28:38.770

本机 ImageView 不支持动画图像。您可以使用两个选项来显示动画 gif 文件

1.  使用视频视图
2.  使用图像视图

但是将 gif 文件分成几个部分，然后对其应用动画。试试这个 link-playing-gif-animation 你会得到想要的结果。

# python - Python 2.5 中的命名元组

> ID：11428293
> 
> 赞同：2
> 
> 时间：2012-07-11T08:12:36.160
> 
> 标签：python, python-2.5

我知道该`namedtuple`课程从 2.6 开始就存在。有没有办法在 Python 2.5 中实现类似的功能，所以可以制作普通的元组来实现这一点？

```
Student = namedtuple('Student', 'name serial') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:27:05.927

在 Python 2.4及更高版本中有一个[实现命名元组的方法。](http://code.activestate.com/recipes/500261-named-tuples/)[您可以在此处](http://hg.python.org/cpython/file/2.7/Lib/collections.py#l287)将其与 Python 2.7 中命名元组的实际实现进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:27:06.930

Python 中的实际来源`namedtuple`是这里的配方：[命名元组](http://code.activestate.com/recipes/500261-named-tuples/)。

> 生成的配方受到好评，因此被提议并接受包含在 Py2.6 的集合模块中。

# javascript - 无法返回插入到 knockoutjs observableArray 中的数组

> ID：11428294
> 
> 赞同：1
> 
> 时间：2012-07-11T08:12:37.327
> 
> 标签：javascript, ajax, knockout.js

我有以下视图模型。登录后，我希望用户有一个选择框，列出数据库中的所有城市。这是视图模型

```
function ppfoViewModel(){
        var self= this;
        self.userName = ko.observable();
        self.password = ko.observable();
        self.loggedIn = ko.observable(false);
        self.validateUser = function(){
            if(self.userName()=='Admin'&&self.password()=='Admin'){ 
                var temp;
                self.loggedIn(true);
                $.get("dbhandler.php", { "fun": "cities"}, function (data) {self.cities(data);});               
            }else{
                self.loggedIn(false);
            }};
        self.cities = ko.observableArray()
        self.selectedCity = ko.observable();
        self.store = ko.observable();
        self.drink = ko.observable();
        self.test = ko.observable();
    }; 
```

ajax 请求调用返回以下字符串的页面：

```
[{"cityName":"Provo","cityID":"1"},{"cityName":"Salt LakeCity","cityID":"2"}] 
```

这是视图。

```
<select data-bind="options: cities, optionsText:'cityName', selectedOptions: selectedCity""></select> 
```

当我登录时，我知道我得到了正确的字符串，但是选择框有几个空格作为选项。我确定我在这里遗漏了一些明显的东西，但是我怎样才能将由 php 页面和 AJAX 请求创建的数组放入可观察数组中以便它工作？提前感谢您容忍我的荒谬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:54:14.613

您需要将结果解析回 JSON 对象，例如：

```
$.get("dbhandler.php", { "fun": "cities"}, function (data) {
    self.cities(JSON.parse(data));
}); 
```

# asp.net-mvc - MVC2 复杂类型visual studio 2010 .net framework 4

> ID：11428298
> 
> 赞同：0
> 
> 时间：2012-07-11T08:12:49.507
> 
> 标签：asp.net-mvc, linq-to-sql, asp.net-mvc-2

我有一个`usp_getCashCommissionCustomer`这样的存储过程：

```
Select 
    cw.Customercode, name, state as Province, City, Suburb,
    Balance As HMCommission, MBalance as  MTNCommission 
from 
    customerwallet cw
inner join
    customer cu on cw.customercode = cu.customercode
where 
    iscash = 1
    and (balance + mbalance) > 0
order by 
    customercode 
```

单击时，`customercode`我应该打开以下表格的创建视图

```
CREATE TABLE [dbo].[CustomerLedger]
(
    [ID] [bigint] IDENTITY(1,1) NOT NULL,
    [CustomerCode] [varchar](25) NULL,
    [TransactionType] [varchar](1) NULL,
    [Description] [varchar](30) NULL,
    [TransactionDate] [datetime] NULL,
    [Amount] [float] NULL,
    [IsProcessed] [bit] NULL
) ON [PRIMARY] 
```

请帮我。

我是 ASP.NET MVC 2 的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:19:39.400

我不知道您是否使用ORM。如果您不是任何 ORM，那么您可能会看到使用[此处](https://stackoverflow.com/questions/7759063/asp-net-mvc-3-models-stored-procedures)提到的存储过程填充视图的方法。如果您使用 ORM，例如 L@S 或实体框架，您可以从[这里](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)开始。如果您想弹出视图，请在[此处找到教程](http://www.codeproject.com/Articles/146396/A-Comparison-of-Three-jQuery-Modal-Dialogs-for-ASP)

# c - printf 睡眠\n

> ID：11428299
> 
> 赞同：0
> 
> 时间：2012-07-11T08:12:54.863
> 
> 标签：c, printf

当我看到这种奇怪的行为时，我正在尝试一些事情。有人可以向我解释一下。

```
#include<stdio.h>
int main()
{
    printf("utkarsh");
    sleep(10);
    printf("dixit");
} 
```

预期的输出是 print "utkarsh" 然后等待 10 秒，在它旁边打印 "dixit"。但我观察到的是它会等待 10 秒，然后打印“utkarshdixit”。

如果我在 utkarsh 末尾添加一个 \n，它会按预期工作。

```
printf("utkarsh\n"); 
```

有人可以帮助我理解为什么我会看到这种行为吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:15:09.483

你正在缓冲。

试着做

```
fflush(stdout); 
```

在睡觉前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:16:27.697

`printf`正在缓冲，直到您决定编写一个`'\n'`.

您可以使用 :`flush`强制打印

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T08:16:38.367

```
Here, try this

#include<stdio.h>
int main()
{
    printf("utkarsh");
    fflush(stdout);
    sleep(10);
    printf("dixit");
} 
```

正在缓冲标准输出。你必须明确刷新它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T08:19:49.550

标准输出流中有缓冲。因此，您需要在睡觉前冲洗一次。

但是当您使用 '\n' 时，c 运行时会自动为您刷新标准输出缓冲区。因此，您会看到这种行为

# android - 无法单击带有 imagebutton 的 ListView 行

> ID：11428303
> 
> 赞同：57
> 
> 时间：2012-07-11T08:13:05.537
> 
> 标签：android, listview, imagebutton

我遇到了麻烦`ListView`。它的项目（行）有一个`ImageButton`. 已设置，因此此`ImageButton`事件有效，但单击行不起作用。`android:onClick``onClick`

如果我`ImageButton`从行项目中删除，请单击行工作（`ListView`具有正确的`onClick`侦听器）。我该如何解决？我需要`onClick`用户单击`ImageButton`时的事件，以及用户选择行时的标准单击事件（不是单击`ImageButton`而是单击行）。

我的列表视图：

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/restaurants_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:divider="@color/list_devider"
        android:dividerHeight="1dp"
        android:cacheColorHint="@color/list_background" /> 
```

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2013-07-23T06:49:26.237

很遗憾，

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

不适用`ImageButton`。

我终于在[这里](http://mylifewithandroid.blogspot.com/2011/08/focus-problems-with-list-rows-and.html)找到了解决方案。在这些项目的布局 xml 中，添加

```
android:descendantFocusability="blocksDescendants" 
```

到根视图。

它非常适合`ListView`具有`ImageButton`s 的 a。根据[官方参考](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android:descendantFocusability)，`blocksDescendants`表示`ViewGroup`将阻止其后代接收焦点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T08:20:27.300

您可以为您的 listView 使用自定义适配器（如果您还没有的话）。在那里，在`getView(int position, View inView, ViewGroup parent)`适配器的方法中做这样的事情：

```
@Override
public View getView(int position, View inView, ViewGroup parent) {

    View v = inView;
    ViewHolder viewHolder; //Use a viewholder for sufficent use of the listview

    if (v == null) {
        LayoutInflater inflater = (LayoutInflater) adaptersContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.list_item, null);
        viewHolder = new ViewHolder();
        viewHolder.image = (ImageView) v.findViewById(R.id.ImageView);
        v.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) v.getTag();
    }

        .....

    viewHolder.image.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            //Click on imageView
        }i
    });

    v.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            //Click on listView row
        }
    });

        .....

    return (v);
} 
```

如果您在创建自定义适配器时需要帮助，请参阅[此处。](http://www.vogella.com/articles/AndroidListView/article.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T08:17:02.103

如果一行 listView 有任何可点击的元素，如`Button`, `Image`..etc..then`onItemClick`将不起作用。所以你需要在`getView`你的列表适配器中编写点击监听器。

有关更多信息，请阅读[此](https://stackoverflow.com/a/2369327/1436931)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-11T08:23:01.753

为您的按钮设置这些属性：

```
 android:focusable="false"
      android:focusableInTouchMode="false" 
```

或者您可以在适配器类中动态设置它：

```
 yourButton.setFocusable(false);
    yourButton.setFocusableInTouchMode(false); 
```

并确保将列表视图的选择模式设置为单一：

```
 listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-05T15:13:55.547

在我的情况下，`android:descendantFocusability="blocksDescendants"`主层不起作用，在 ListView 中也不起作用。我也尝试过`android:focusable="false" android:focusableInTouchMode="false"`，听说它适用于 Buttons，但我有 ImageButton，所以它没有。

但是在布局的 CS 文件中设置按钮的属性是有效的。

```
var imageButton = view.FindViewById<ImageButton>(Resource.Id.imageButton1);
imageButton.Focusable = false;
imageButton.FocusableInTouchMode = false;
imageButton.Clickable = true; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-04T10:26:26.500

如果一行有多个可点击元素，onItemClick() 将不起作用。您需要`OnClickListener`在`getView()`方法中设置。将侦听器存储在 View 的标签中以便它们可以被回收，向您的侦听器添加方法以便它们可以专门用于不同的行。

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);

        RowClickListeners listeners = (RowClickListeners) view.getTag();
        if (listeners == null) {
            listeners = new RowClickListeners();
        }

        // Row click listener:
        RowClickListener onClickListener = listeners.rowClickListener;
        if (onClickListener == null) {
            onClickListener = new RowClickListener();
            listeners.rowClickListener = onClickListener;
        }
                    onClickListener.setToPosition(pos);
        view.setOnClickListener(onClickListener);

        // Overflow listener:
        View btn = view.findViewById(R.id.ic_row_btn);
        ButtonListener btnListener = listeners.buttonClickListener;
        if (rowListener == null) {
            btnListener = new ButtonListener(activity);
            listeners.rowClickListener = btnListener;
        }
                    btnListener.setToPosition(pos);
        btnListener.setCollection(collectionId);
        btn.setOnClickListener(btnListener);
    }

    public static class RowClickListeners {
        public RowClickListener rowClickListener;
        public ButtonListener buttonClickListener;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-13T08:29:36.773

上面没有一个答案对我有用，但是一个组合可以。

我现在在 XML**和**Java 中的 ListView 和 ImageButtons 上进行设置，我还在`android:descendantFocusability="blocksDescendants"`ListView和ImageButtons 上进行了设置。`android:focusable="false" android:focusableInTouchMode="false"`**`descendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS)``focusable(false), focusableInTouchMode(false), clickable(true)`**

# c# - C# 从子文件夹中获取 DLL

> ID：11428304
> 
> 赞同：3
> 
> 时间：2012-07-11T08:13:07.343
> 
> 标签：c#, dll

我有一个 C# 应用程序，它使用另一个 C# DLL。如果我使用 exe 文件，它可以工作，当 DLL 文件与 exe 文件位于同一目录中时。但知道我会创建一个文件夹并将 dll 文件放入其中。在 MSDN 帮助中找到了一些应该工作的东西，但我不知道为什么？

如何从子文件夹中加载 DLL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:18:00.810

您需要将要从中加载 dll 的文件夹添加到配置文件中：

```
<runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <probing privatePath="YourSubFolderHere;SubFolderTwo"/>
    </assemblyBinding>
</runtime> 
```

或者你可以通过代码[使用](http://msdn.microsoft.com/en-us/library/system.appdomain.appendprivatepath.aspx)：

```
AppendPrivatePath 
```

更多关于[msdn中的探测路径](http://msdn.microsoft.com/en-us/library/823z9h8w.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:36:50.610

如果您想要更多的灵活性，您可以简单地处理自己解决的程序集。这样您就可以完全控制加载哪些代码。这是我的一个项目中的一些代码。

'new AssemblyName(args.Name)' 提供了一个对象，您可以使用它来获取有关所需程序集的信息，其余代码从嵌入文件加载程序集。如果要从子文件夹加载程序集，只需使用 Assembly.Load()。

```
 private static void InstallAssemblyResolveHandler()
    {
        AppDomain.CurrentDomain.AssemblyResolve += (sender, args) =>
            {
                String resourceName = "AssemblyLoadingAndReflection." +
                                        new AssemblyName(args.Name).Name + ".dll";
                using (var stream = Assembly.GetExecutingAssembly().GetManifestResourceStream(resourceName))
                {

                    Byte[] assemblyData = new Byte[stream.Length];
                    stream.Read(assemblyData, 0, assemblyData.Length);
                    return Assembly.Load(assemblyData);
                }
            };
    } 
```

# exception - ksoap2 evelope.getResponse 获取 nullpointerException

> ID：11428306
> 
> 赞同：1
> 
> 时间：2012-07-11T08:13:23.523
> 
> 标签：exception, soap, nullpointerexception, ksoap2

好的，这是我的问题：

我正在发送一个肥皂请求，我得到了一个有效的答案，一切正常，我在 responsedump 中得到了有效的输出。但调用 evelope.getResponse() 在：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
//adding parameters
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.setAddAdornments(false);
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.debug = true;
androidHttpTransport.call(SOAP_ACTION, envelope);
SoapObject so = (SoapObject) envelope.getResponse(); 
```

抛出此异常：

```
Caused by: java.lang.NullPointerException
at org.ksoap2.serialization.SoapSerializationEnvelope.getResponse(SoapSerializationEnvelope.java:521) 
```

错误位于 ksoap2 源的 getResponse 中：

/** * 来自soap调用的响应。从包装对象中拉出对象并将其返回。* * @since 2.0.3 * @return 来自soap调用的响应。* @throws SoapFault */

```
public Object getResponse() throws SoapFault {
    if (bodyIn instanceof SoapFault) {
        throw (SoapFault) bodyIn;
    }
    KvmSerializable ks = (KvmSerializable) bodyIn; <-- Line 521

if (ks.getPropertyCount()==0) {
    return null;
} else if(ks.getPropertyCount()==1) {
    return ks.getProperty(0);
} else {
    Vector ret = new Vector();
    for(int i=0;i<ks.getPropertyCount();i++){
        ret.add(ks.getProperty(i));
    }
    return ret;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:17:06.197

试试这个而不是 SoapObject

```
 SoapPrimitive response = (SoapPrimitive) envelope.getResponse(); 
```

# java - WSDServiceFactory 中的空指针异常 - Apache CXF 库

> ID：11428311
> 
> 赞同：3
> 
> 时间：2012-07-11T08:13:33.110
> 
> 标签：java, web-services, cxf, webservice-client

我的代码有问题。WSDL 文件由来自 apache cxf 的 wsdl2java 解析。现在我正在尝试与 Web 服务建立连接，但仍然出现空指针异常。

```
Exception in thread "main" java.lang.NullPointerException
        at org.apache.cxf.wsdl11.WSDLServiceFactory.<init>(WSDLServiceFactory.java:92)
        at org.apache.cxf.jaxws.ServiceImpl.initializePorts(ServiceImpl.java:203)
        at org.apache.cxf.jaxws.ServiceImpl.<init>(ServiceImpl.java:147)
        at org.apache.cxf.jaxws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:97)
        at javax.xml.ws.Service.<init>(Service.java:56)... 
```

url 地址指向我下载 WSDL 文件的位置。为了构建 jar，我使用 Maven 和依赖项，例如：

*   jaxws-api
*   cxf-rt-运输-http
*   cxf-rt-前端-jaxws
*   cxf-rt-bindings-soap

带有 deps 的 jar 由 maven-assembly-plugin 创建

确实存在 wsdl 文件，因为它是从那里下载的。

有什么建议么？谢谢你的帮助。

顺便提一句。我发现的任何解决方案都不适合我，这不是重复的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-08-26T21:52:59.067

我在 gradle 中使用 shadowJar 遇到了**同样**的**问题**。解决方法是显式合并META-INF/cxf/ 目录下的*bus-extensions.txt*服务文件：

 ***```
shadowJar {
  archiveName = 'application.jar'
  mergeServiceFiles{
    path='META-INF/cxf'
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-25T08:05:45.993

在部署依赖于*Apache CXF*库的 Java 应用程序时，我使用了*maven-assembly-* *plugin*，目标设置为*copy-dependencies*。这不会产生单个 JAR，但会将所有需要的 JAR 复制到 target/ 文件夹中。然后很容易将它们全部放在类路径中并启动 Java 应用程序。

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:08:28.330

解决方案非常简单，我只是将 Apache CXF lib 的版本更改为旧版本，它就可以工作。所以可能我的配置有问题，或者 Apache CXF 有错误。

因此，作为解决方案，只需检查提供的 lib 的旧版本。******

# python - 检测并从电子邮件中提取附件。在 python 中使用 imap

> ID：11428316
> 
> 赞同：1
> 
> 时间：2012-07-11T08:14:01.070
> 
> 标签：python, email, imap

我在 python imap 库文档中找不到有关提取和检测电子邮件附件的信息。在阅读邮件标题时，我看到了关键字“附件”“类型”等。但我想知道是否有通往天堂的直接路径（电子邮件附件边界和数据提取）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-01T04:36:50.287

外部库：[https ://github.com/ikvk/imap_tools](https://github.com/ikvk/imap_tools)

```
from imap_tools import MailBox

# get all attachments from INBOX and save them to files
with MailBox('imap.my.ru').login('acc', 'pwd', 'INBOX') as mailbox:
    for msg in mailbox.fetch():
        for att in msg.attachments:
            print(att.filename, att.content_type)
            with open('C:/1/{}'.format(att.filename), 'wb') as f:
                f.write(att.payload) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:20:52.170

查看 email.parser 模块

[http://docs.python.org/library/email.parser.html](http://docs.python.org/library/email.parser.html)

# postgresql - PostgreSQL。日志文件中的慢查询在 psql 中很快

> ID：11428317
> 
> 赞同：1
> 
> 时间：2012-07-11T08:14:04.157
> 
> 标签：postgresql, logging, query-optimization

我有一个使用 Hibernate（默认 C3P0 连接池）和 PostgreSQL 数据库（9.1）在 Play Framework 1.2.4 上编写的应用程序。

最近我在 postgresql.conf 中打开了慢查询日志（>= 100 ms），发现了一些问题。

但是当我尝试分析和优化一个特定的查询时，我发现它在 psql 中（0.5 - 1 ms）与日志中的 200-250 ms 相比非常快。其他查询也发生了同样的事情。

应用程序和数据库服务器在同一台机器上运行，并使用 localhost 接口进行通信。

JDBC 驱动程序 - postgresql-9.0-801.jdbc4

我想知道可能出了什么问题，因为在计算日志中的查询持续时间时，只考虑了数据库处理时间，不包括网络周转等外部因素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:55:56.630

可能性一：如果慢查询偶尔或突发，可能是检查点活动。启用检查点日志记录 ( `log_checkpoints = on`)，确保日志级别 ( `log_min_messages`) 为“信息”或更低，然后查看结果。需要很长时间或经常发生的检查点表明您可能需要一些检查点/WAL 和 bgwriter 调整。如果相同的语句总是很慢而其他语句总是执行良好，则这不太可能是原因。

可能性 2：您的查询计划不同，因为您直接在其中运行它们，`psql`而 Hibernate 通过 PgJDBC 至少有时会执行`PREPARE`and `EXECUTE`（在协议级别，因此您不会看到实际的语句）。为此，将查询性能与`PREPARE test_query(...) AS SELECT ...`then进行比较`EXPLAIN ANALYZE EXECUTE test_query(...)`。PREPARE 中的参数是位置参数的类型名称（$1、$2 等）；EXECUTE 中的参数是值。

如果prepared plan和one-off plan不同，可以通过连接参数设置[PgJDBC的prepare阈值](http://jdbc.postgresql.org/documentation/84/server-prepare.html)，告诉它永远不要使用服务器端prepared statements。

This difference between the plans of prepared and unprepared statements [should go away in PostgreSQL 9.2](http://lwn.net/Articles/497264/). It's been a long-standing wart, but Tom Lane dealt with it for the up-coming release.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:38:17.420

有几个可能的原因。首先，如果执行慢速查询时数据库非常繁忙，则查询可能会变慢。因此，您可能需要观察当时操作系统的负载以供将来分析。

其次sql的历史计划可能与当前会话计划不同。所以你可能需要安装[auto_explain](http://www.postgresql.org/docs/9.2/static/auto-explain.html)才能看到慢查询的实际计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:40:27.997

如果不了解系统的所有细节，很难确定，但我可以想到几种可能性：

*   **查询结果被缓存。**如果您在短时间内运行相同的查询两次，它几乎总是会在第二次通过时更快地完成。为了这个目的，PostgreSQL 维护了一个最近检索到的数据的缓存。如果您从日志尾部提取查询并立即执行它们，这可能是正在发生的事情。
*   **其他进程正在干扰。**查询的执行时间取决于系统中发生的其他事情。如果查询在您网站的高峰时段需要 100 毫秒，而当您在深夜再次尝试时，您的网站可能会发生这种情况。

关键是您是正确的，查询持续时间不受哪个库或应用程序调用它的影响，因此差异必须来自其他东西。继续寻找，祝你好运！

# plone - 如何在 Plone 3 中实现动态角色？

> ID：11428318
> 
> 赞同：2
> 
> 时间：2012-07-11T08:14:12.600
> 
> 标签：plone

[我想在 Plone 3 ( http://collective-docs.readthedocs.org/en/latest/security/dynamic_roles.html](http://collective-docs.readthedocs.org/en/latest/security/dynamic_roles.html) )中使用“动态角色”允许某些用户在有限的时间内访问某些内容。

为此，我创建了一个带有示例代码复制粘贴的附加组件 - 除了现在 getDummyRolesOnContext() 始终返回我的角色。

但是 Plone 从不调用或实例化我的 DummyLocalRoleAdapter，显然我的用户从未获得分配的角色。

到目前为止，这是我所知道的：

*   我的动态角色在 rolemap.xml 中定义，并在附加安装时创建。
*   正在导入我的附加组件 - 第一行的异常阻止 Zope 启动
*   没有一个 DummyLocalRoleAdapter 被调用 - 我已经用警告和异常对它们进行了尖刺。
*   适配器确实已注册。

我该如何继续调试这个 - 我缺少什么神奇的部分？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:50:32.033

我的猜测是您需要以某种方式激活 acl_users 中的 borg.localprole PAS 插件：

[https://github.com/plone/borg.localrole/blob/master/borg/localrole/utils.py](https://github.com/plone/borg.localrole/blob/master/borg/localrole/utils.py)

过去可能有 borg.localrole 附加安装程序条目，但现在似乎没有。我的猜测是你需要在你自己的插件中手动调用来自 borg.localrole 插件设置代码的操作。

正确安装 borg.localroles 时的 acl_users：

![acl_users 当 borg.localroles 处于活动状态时](../Images/357c4cd13fa200f454942a8b70465032.png)

# objective-c - CoreData 与来自 GCD 队列的 AFNetworking 请求不兼容？

> ID：11428324
> 
> 赞同：1
> 
> 时间：2012-07-11T08:14:39.000
> 
> 标签：objective-c, ios, multithreading, grand-central-dispatch, afnetworking

我正在使用 GCD 启动一个长时间运行的后台进程（'run_loop'），它创建一个 NSManagedObjectContext （'MOC'），监控 CoreData 对象，有时（当它们准备好时）将它们的序列化上传到网络服务器，然后删除它们。

我正在使用 AFNetworking 进行 HTTP 调用。问题出在请求完成处理程序块中，因为这些块在与 MOC 所有者不同的线程中运行，CoreData 不支持。

我尝试从 GCD run_loop 块的开头存储 NSThread，并使用 performSelector:onThread:run_thread 但这似乎根本没有真正调用选择器。

我曾尝试使用 dispatch_sync(run_queue) 但这并不能保证线程是相同的，只有 GCD 队列。稍后在主线程中保存的不同 MOC 挂起。

最终，唯一可行的方法是在完成回调处理程序中设置一个布尔值，并引入额外的逻辑来检测布尔开关并从主 run_loop 执行 MOC 工作。

任何人都可以提出更优雅的解决方案吗？还是 CoreData 根本不兼容从 GCD 队列启动的 AFNetworking 请求，我应该从一开始就查看较低级别的线程控制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:19:06.130

嗯.. 处理 MOC 和线程的推荐方法是始终创建一个新的 MOC，它是主线程 MOC 的子 MOC。让主线程来做所有的保存，但是你的 GCD 线程基本上可以将更改合并到主 MOC。

我与[https://github.com/magicalpanda/MagicalRecord/](https://github.com/magicalpanda/MagicalRecord/)合作取得了相当大的成功，以更简单的方式促进了这一点。

# android - 长按使图像在gridview中可见

> ID：11428325
> 
> 赞同：0
> 
> 时间：2012-07-11T08:14:55.817
> 
> 标签：android, gridview, android-widget

我在 gridview 的每个单元格中有 2 个图像。第一个图像是不可见的，第二个图像是可见的。我想要的是当我使用长按任何网格视图项目时，不可见的图像应该是可见的。谢谢。

```
myGrid.setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {
        @Override
        public boolean onItemLongClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
            DELETE_SIT=1;

            //Toast.makeText(FavorilerAct.this,"long click"+DELETE_SIT, Toast.LENGTH_SHORT).show();
            ((BaseAdapter)myGrid.getAdapter()).notifyDataSetChanged();

            return true;
        }
    }); 
```

// 这是我在自定义适配器扩展 BaseAdapter 中的 getview 方法

```
public View getView(int position, View convertView, ViewGroup parent) 
       {
          View MyView = convertView;
          String url = stock_list.get(position);

      if ( convertView == null )
      {
         LayoutInflater li = getLayoutInflater();
         MyView = li.inflate(R.layout.gridview, null);

         // Add The Text!!!
         TextView tv = (TextView)MyView.findViewById(R.id.favorite_author);
         tv.setText(names.get(position));
         ImageView img=(ImageView)MyView.findViewById(R.id.favorite_image);
         ImageView artiImg=(ImageView)MyView.findViewById(R.id.delete_fav_btn);
         if(DELETE_SIT!=1)
             artiImg.setVisibility(View.INVISIBLE);
         else
             artiImg.setVisibility(View.VISIBLE);
        try {
            img.setImageBitmap(loadBitmap(url));
        } catch (IOException e) {
            e.printStackTrace();
        }
        if(DELETE_SIT==1){
            //ImageView delete_btn=(ImageView)MyView.findViewById(R.id.delete_fav_btn);
            //artiImg.setImageResource(R.drawable.kapat);
            artiImg.setVisibility(View.VISIBLE);
        }
      }

      return MyView;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:08:30.917

好的，试试这个：

```
public View getView(int position, View convertView, ViewGroup parent) 
{
      View vi= convertView;
      String url = stock_list.get(position);
      ViewHolder holder = null;

      if ( vi == null )
      {
          LayoutInflater li = getLayoutInflater();
          vi = li.inflate(R.layout.gridview, null);
          holder = new ViewHolder();

          holder.tv = (TextView)vi.findViewById(R.id.favorite_author);
          holder.img=(ImageView)vi.findViewById(R.id.favorite_image);
          holder.artiImg=(ImageView)vi.findViewById(R.id.delete_fav_btn);

          vi.setTag(holder);
       }else{
           holder = (ViewHolder)vi.getTag();
       }

       holder.tv.setText(names.get(position));

      if(DELETE_SIT!=1){
          try {
              holder.img.setImageBitmap(loadBitmap(url));
          } catch (IOException e) {
              e.printStackTrace();
          }
          holder.img.setVisibility(View.VISIBLE);
          holder.artiImg.setVisibility(View.INVISIBLE);
      }
      else{
          holder.img.setVisibility(View.INVISIBLE);
          holder.artiImg.setVisibility(View.VISIBLE);
      }

   }

  return vi;
}

static class ViewHolder{
    public TextView tv;
    public ImageView img;
    public ImageView artiImg;
} 
```

如果您还有问题，请告诉我。

# tomcat - 用tomcat导入

> ID：11428326
> 
> 赞同：0
> 
> 时间：2012-07-11T08:14:56.760
> 
> 标签：tomcat, maven

有没有办法告诉 Tomcat 在启动时导入一个文件夹，这样我就可以通过 tomcat 使用它的内容。在我的情况下，该文件夹是包含测试类的 src/test/java 。

我需要使用命令行运行测试类

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:24:43.587

基本的事情是使用[maven-failsafe-plugin](http://maven.apache.org/plugins/maven-failsafe-plugin/)来运行集成测试。在您的情况下，这意味着您需要一个单独的 maven 模块（称为：mod-it），其中包含集成测试的配置。我能给出的最佳建议是使用[cargo2-maven-plugin](http://cargo.codehaus.org/Maven2+plugin)来启动/部署等Tomcat 并在tomcat 中部署war 应用程序。此外，您应该有这样的布局：

```
project
|-- mod-it
|   `-- pom.xml
|-- mod-war
|   |-- pom.xml
|   `-- src
|       |-- main
|       |   |-- java
|       |   |   `-- com
|       |   |       `-- soebes
|       |   |           `-- wicket
|       |   |               |-- HomePage.java
|       |   |               `-- WicketApplication.java
|       |   |-- resources
|       |   |   |-- com
|       |   |   |   `-- soebes
|       |   |   |       `-- wicket
|       |   |   |           `-- HomePage.html
|       |   |   `-- log4j.properties
|       |   `-- webapp
|       |       `-- WEB-INF
|       |           `-- web.xml
..
`-- pom.xml 
```

[集成测试应命名为 *IT.java](http://maven.apache.org/plugins/maven-failsafe-plugin/integration-test-mojo.html#includes)以让它们由 maven-failsafe-plugin 运行

最好的办法是阅读[这个](http://khmarbaise.github.com/maui/it-example-container.html)包含 Tomcat 和 cargo 插件的完整示例的示例。您可以下载完整的示例源代码，包括。pom's等[在这里](http://khmarbaise.github.com/maui/examples.html)。

# python - 无法在lxml下使用python xpath匹配标签

> ID：11428327
> 
> 赞同：0
> 
> 时间：2012-07-11T08:14:57.773
> 
> 标签：python, xpath

这是我的代码：

```
def extractContent(self,html):
    parser = etree.XMLParser(ns_clean=True, recover=True)
    print html.find('id="detail"')
    tree = etree.fromstring(html,parser)
    if tree!=None:
      for c in self.contents:
        m = tree.xpath(c['xpath'])
        print m,c['xpath']
        if len(m) >= 1:
          print c['name'] + ' : ' + m[0].text 
```

我正在尝试匹配 **`//*[@id="i-detail"]/li[1]`** html 源代码，但它什么也没显示。

这是上面代码的输出：

```
25803
[] //*[@id="i-detail"]/li[1] 
```

这是html代码：

```
<div class="mc fore tabcon">
                    <ul id="i-detail">
                        <li title="XXXXXXXXX">**AAAAAAAAAAA**(what i want to match)</li>
                        <li>BBBBBBBBB</li>
....... 
```

我尝试在命令行下使用 xpath：

```
>>> root.xpath('//*[@id="i-detail"]/li')
>>> []
>>> root.xpath('//*[@id="i-detail"]/*')
>>> [<Element {http://www.w3.org/1999/xhtml}li at 0x1007b7910>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b79b0>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b7a50>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b7aa0>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b7af0>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b7b40>, <Element {http://www.w3.org/1999/xhtml}li at 0x1007b7b90>]
>>> root.xpath('//*[@id="i-detail"]/*')[0] <----- this line could get the target ! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:38:29.817

它似乎对我有用：

```
>>> s = """<div class="mc fore tabcon">
                    <ul id="i-detail">
                        <li title="XXXXXXXXX">**AAAAAAAAAAA**(what i want to match)</li>
                        <li>BBBBBBBBB</li>
                    </ul>
</div>"""
>>> parser = etree.XMLParser(ns_clean=True, recover=True)
>>> root = etree.fromstring(s, parser)
>>> for node in root.xpath('//*[@id="i-detail"]/li[1]'):
    print node, node.text

<Element li at 0x12534b8> **AAAAAAAAAAA**(what i want to match) 
```

# java - 使用 gson 反序列化对象的特定 JSON 字段

> ID：11428329
> 
> 赞同：32
> 
> 时间：2012-07-11T08:15:05.613
> 
> 标签：java, json, parsing, gson

我有以下 JSON 字符串：

```
{
    "ms": "images,5160.1",
    "turl": "http://ts1.mm.bing.net/th?id=I4693880201938488&pid=1.1",
    "height": "178",
    "width": "300",
    "imgurl": "http://www.attackingsoccer.com/wp-content/uploads/2011/07/World-Cup-2012-Draw.jpg",
    "offset": "0",
    "t": "World Cup 2014 Qualification – Europe Draw World Cup 2012 Draw ...",
    "w": "719",
    "h": "427",
    "ff": "jpeg",
    "fs": "52",
    "durl": "www.attackingsoccer.com/2011/07/world-cup-2012-qualification-europe...",
    "surl": "http://www.attackingsoccer.com/2011/07/world-cup-2012-qualification-europe-draw/world-cup-2012-draw/",
    "mid": "D9E91A0BA6F9E4C65C82452E2A5604BAC8744F1B",
    "k": "6",
    "ns": "API.images"
} 
```

我需要将 的值存储`imgurl`在一个单独的字符串中。

这是我到目前为止所拥有的，但这只是给了我整个 JSON 字符串而不是特定的 imgurl 字段。

```
Gson gson = new Gson();
Data data = new Data();
data = gson.fromJson(toExtract, Data.class);
System.out.println(data); 
```

`toExtract`是 JSON 字符串。这是我的数据类：

```
public class Data 
{
    public List<urlString> myurls;
}

class urlString
{
    String imgurl;
} 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-07-11T08:19:41.463

在解析这样一个简单的结构时，不需要有专门的类。

**解决方案 1：**

要使用 gson 从您的字符串中获取 imgurURL，您可以执行以下操作：

```
JsonParser parser = new JsonParser();
JsonObject obj = parser.parse(toExtract).getAsJsonObject();
String imgurl = obj.get("imgurl").getAsString(); 
```

这使用原始解析为[JsonObject](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html)。

**解决方案 2：**

或者，您可以使用以下方法提取`Properties`实例中的全部数据

```
 Properties data = gson.fromJson(toExtract, Properties.class); 
```

并阅读您的网址

```
String imgurl = data.getProperty("imgurl"); 
```

# java - JPQL 新对象实例化

> ID：11428330
> 
> 赞同：3
> 
> 时间：2012-07-11T08:15:06.723
> 
> 标签：java, jakarta-ee, jpa, eclipselink, jpql

我有两个命名查询，并且都有相同的逻辑，除了每个都使用不同的对象构造函数将结果选择到

命名查询 1：

```
SELECT DISTINCT NEW dk.NewsRoomView(n,p)
FROM NewsItem n LEFT JOIN n.placements p JOIN n.actors a 
```

命名查询 2：

```
SELECT DISTINCT NEW dk.NewsRoomView(n.id,n.title,SIZE(n.attachments),p.id,p.page)
FROM NewsItem n LEFT JOIN n.placements p JOIN n.actors a 
```

NewsRoomView 类的结构

```
public class NewsRoomView{

  public NewsRoomView(NewsItem n, NewsItemPlacement p)
    Logger.getLogger(NewsRoomView.class.getName()).log(Level.INFO,"at Contsructor 1");
  }

  public NewsRoomView(Long id, String title, Integer attachments, Long pId, Integer page){
    Logger.getLogger(NewsRoomView.class.getName()).log(Level.INFO,"at Contsructor 2");
  }
} 
```

现在，每当执行命名查询 1 时，它都会成功打印“at constructor 1”语句，因此查询会返回结果，但是当执行命名查询 2 时，它既不会打印出语句“at Constructor 2”，也不会返回结果。

上面的代码块只是我真正拥有的片段。实际上，第二个构造函数有一个 23 长的参数列表，它表示 NewsItem 和 NewsItemPlacement 实体中的更多字段。

我想知道阻止第二个构造函数返回结果的可能是什么错误，以及构造函数的参数列表的大小是否有限制。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:57:51.290

因为没有抛出异常，这意味着生成的查询对数据库执行没有问题，但查询没有返回任何行。问题与构造函数表达式和参数数量无关。

我想附件表中没有这样的 NewsItem 条目。这样的行不会成为结果集的一部分，因为 SIZE(n.attachments) 会导致基于 id 的内部连接到附件表。如果您查看生成的 SQL 查询，这一切都会变得更加清晰。

# 具有相同问题的最小示例

## 实体

```
@Entity
public class EntityA {
    @GeneratedValue (strategy = GenerationType.TABLE)
    @Id public int id;
    @OneToMany(mappedBy = "a")
    public List<EntityB> bList;
     ...
}

@Entity
public class EntityB {
    @GeneratedValue (strategy = GenerationType.TABLE)
    @Id
    public int id;

    @ManyToOne
    private EntityA a;
} 
```

## 数据库内容

```
EntityA
|ID | 
| 1 |
| 2 |

EntityB
|ID |A_ID |
| 1 |  2  | 
```

## 询问

```
Query q = em.createQuery("Select SIZE(a.bList) FROM EntityA a"); 
```

带有 MySQL 的 EclipseLink (2.3.2) 生成以下 SQL 查询：

```
SELECT COUNT(t0.ID) FROM ENTITYB t0, ENTITYA t1 
WHERE (t0.A_ID = t1.ID) GROUP BY t1.ID 
```

如您所见，它只为在 EntityB 表中具有一个或多个条目的 EntityA 返回 bList 的大小。

# facebook - 将喜欢框添加到我的应用程序的标题中？

> ID：11428333
> 
> 赞同：1
> 
> 时间：2012-07-11T08:15:16.630
> 
> 标签：facebook, facebook-likebox

有谁知道如何像[这里](https://www.facebook.com/cocacola?v=app_161193133389)一样将“like box”容器添加到我的应用程序的标题中？
这个：

![在此处输入图像描述](../Images/0af05352aefe780fd0147a6170599a3e.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-11T08:17:50.777

在那里，您可以找到 facebook 为开发人员提供的所有工具和 api：

[http://developers.facebook.com/](http://developers.facebook.com/)

Likebox也在那里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-11T08:23:02.387

这是官方[脸书信息](http://developers.facebook.com/docs/reference/plugins/like/)。还有一些代码可以启用更多这样的社交媒体[网站](http://www.addthis.com/blog/2011/08/19/facebook-like-twitter-tweet-google-1-get-them-all-using-addthis/#.T_03w1DdGRs)。

# javascript - 用原型扩展 Javascript Form 对象

> ID：11428338
> 
> 赞同：6
> 
> 时间：2012-07-11T08:15:51.300
> 
> 标签：javascript, forms, prototype

是否有机会在 Form 对象上使用原型，这是行不通的：

```
Form.prototype.myFunc=function()
{
  alert('OK!');
} 
```

另一方面，String 对象是可扩展的，例如：

```
String.prototype.trim = function() {
  return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T08:19:16.493

如果你的意思是`HTMLFormElement`，那么它应该是

```
HTMLFormElement.prototype.myFunc=function() {
  alert('OK!');
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:28:11.123

没有规范要求 DOM 对象实现任何类型的继承，更不用说原型继承了。话虽如此，许多浏览器都这样做，但它没有标准化或普遍实现。

您可能想阅读[扩展 DOM 有什么问题](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)。

在为 DOM 元素实现原型继承方案的浏览器中，您可以尝试`HTMLFormElement.prototype`使用以下方式进行扩展：

```
if (typeof HTMLFormElement == 'object' && 
    typeof HTMLFormElement.prototype == 'object') {

    // extend HTMLFormElement.prototype

} 
```

但是请注意，宿主对象的行为完全取决于实现。以上可以做任何事情，包括抛出错误。

# vb.net - 如何根据在 VB.NET 中选择另一个组合框来填充 datagridview 中的特定组合框

> ID：11428339
> 
> 赞同：1
> 
> 时间：2012-07-11T08:15:55.340
> 
> 标签：vb.net

我是 VB.NET 的新手。

我有一个带有数据表数据源的 Datagridview。它有两个组合框。我正在使用以下代码填充数据网格视图中的特定组合框，该组合框基于 VB.NET 中另一个组合框的选择。

```
Private Sub DataGridView1_EditingControlShowing(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing
    Dim cmb As ComboBox = TryCast(e.Control, ComboBox)
    If DataGridView1.CurrentCell.ColumnIndex = 1 Then
        If (cmb IsNot Nothing) Then
            RemoveHandler cmb.SelectedIndexChanged, New EventHandler(AddressOf ComboBox_SelectedIndexChanged)
            AddHandler cmb.SelectedIndexChanged, New EventHandler(AddressOf ComboBox_SelectedIndexChanged)
        End If
    End If
End Sub

Private Sub ComboBox_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    If DataGridView1.CurrentCell.ColumnIndex = 1 Then
        Dim comboBox As ComboBox = CType(sender, ComboBox)
        Dim cbCell As DataGridViewComboBoxCell = DirectCast(DataGridView1.Rows(DataGridView1.CurrentCell.RowIndex).Cells(2), DataGridViewComboBoxCell)
        s = comboBox.Text
        If String.Compare(s, "Driver") = 0 Then
            cbCell.Items.Clear()
            con.Open()
            cmd = New SqlCommand("Select EmpName from EmployeeDetails where Status='Active' and Designation='Driver'", con)
            dr = cmd.ExecuteReader()
            While (dr.Read())
                cbCell.Items.Add(dr("EmpName"))
            End While
            dr.Close()
            cmd.Dispose()
            con.Close()
        End If
    End If
 End Sub 
```

它工作正常，但是当我关闭表单并 repoen 时，我编写了以下代码来填充 datagridview

```
Public Function view()
    con.Open()
    cmd = New SqlCommand("select SalaryDate,Type,EmpName,StDate,EnDate,Months,Days,ActualSalary,ReceivedSalary,Balance from LeaseDriverSalary where LeaseNo=" + sele.ToString, con)
    da = New SqlDataAdapter(cmd)
    dt = New DataTable()
    da.Fill(dt)
    Dim row As DataSet1.LeaseDriverSalary1Row
    j = 1
    For i = 0 To dt.Rows.Count - 1 Step 1
        row = DataSet1.LeaseDriverSalary1.NewRow
        DataSet1.LeaseDriverSalary1.Rows.Add(row)
        row.SalaryDate = dt.Rows(i)(0)
        row.Type = dt.Rows(i)(1).ToString
        row.EmpName = dt.Rows(i)(2).ToString
        row.StDate = dt.Rows(i)(3).ToString
        row.EnDate = dt.Rows(i)(4).ToString
        row.Months = Convert.ToInt64(dt.Rows(i)(5).ToString())
        row.Days = Convert.ToInt64(dt.Rows(i)(6).ToString())
        row.ActualSalary = Convert.ToInt64(dt.Rows(i)(7).ToString())
        row.ReceivedSalary = Convert.ToInt64(dt.Rows(i)(8).ToString())
        row.Balance = Convert.ToInt64(dt.Rows(i)(9).ToString())
    Next
    j = 0
    cmd.Dispose()
    con.Close()
    Return 0
 End Function 
```

这里第二个组合框不是基于第一个组合框填充的。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:31:01.217

重新打开窗口时，什么会导致第一个 ComboBox 上出现 SelectedIndexChanged ？将 SelectedIndexChanged 的​​代码放在函数“UpdateSecondComboBox”中，然后在 SelectedIndexChanged 处理程序和 View() 函数中调用它。

# audio - AudioRecord 缓冲区值

> ID：11428348
> 
> 赞同：1
> 
> 时间：2012-07-11T08:16:42.340
> 
> 标签：audio, voice-recording, audiorecord

嗨，我正在构建一个应用程序，它将使用来自 MIC 的传入音频并将其与存储的声音文件进行比较。目前，我正试图掌握 AudioRecord 函数中的数据在保存到字节数组时的样子。我的问题是返回的值都是零。我不知道我是否可能没有正确使用/设置 AudioRecord 功能。这是我的代码：

```
import android.app.Activity;
import android.media.AudioRecord;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class SnoreAlarmActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */

Button start, stop;
TextView display;
Boolean rec = false;
AudioRecord snore;
byte[] arrayOfByte = new byte[16 * 1024 / 8];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    start = (Button) findViewById(R.id.bStart);
    stop = (Button) findViewById(R.id.bStop);
    display = (TextView) findViewById(R.id.tAnswer);

    start.setOnClickListener(this);
    stop.setOnClickListener(this);

    int i = AudioRecord.getMinBufferSize(44100, 16, 2);
    snore = new AudioRecord(MediaRecorder.AudioSource.MIC, 44100, 16, 2, i);// From
                                                                            // MIC,Sample
                                                                            // Rate
                                                                            // of
                                                                            // 44100,
                                                                            // Channel_IN_MONO,16Bit
                                                                            // Encoding,buffer
                                                                            // size
                                                                            // i
    new Record().start();
}

@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    switch (arg0.getId()) {

    case R.id.bStart:
        rec = true;
        break;

    case R.id.bStop:
        rec = false;
        snore.stop();
        snore.release();

        for (int i = 0; i < 100; i++) {
            int x = (int) arrayOfByte[i];
            Log.w("Tag", "" + x);

        }
        break;
    }
}

class Record extends Thread {
    Record() {

    }

    @Override
    public void run() {
        // TODO Auto-generated method stub
        while (rec) {
            snore.startRecording();
            snore.read(arrayOfByte, 0, (16 * 1024 / 8));
        }
    }

   }
} 
```

所以我的问题是，为什么我得零？*另外我知道由于 16Bit 编码，我应该将数据存储在一个简短的位置，稍后会这样做，只是试图了解目前从 AudioRecord 函数返回的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:06:22.733

通过 MIC 录音让我头疼 :)

希望这会有所帮助，因为我整天都在玩它。以下是 MIC 工作必须满足的步骤

1.  Maniefst.xml 必须包含：

    < 使用权限 android:name="android.permission.RECORD_AUDIO" />

2.  AudioRecord 缓冲区应该使用 AudioRecord.getMinBufferSize 设置（你做对了）

3.  如果 MIC 未释放，您将无法再次绑定 MIC！重启手机将重置 MIC。

这是我如何做到的简短示例。

```
private android.media.AudioRecord aRecorder = null;
private Boolean breakLoop = false;
private byte[] buffer;
public Boolean StartRecording()
    int freq = 22050;
    try
    {
        prepareWaveFile(MyRandomAccessFile); //open file and writes WAV header
        int bufferSize = android.media.AudioRecord.getMinBufferSize(freq, android.media.AudioFormat.CHANNEL_IN_MONO, android.media.AudioFormat.ENCODING_PCM_16BIT);
        buffer = new byte[bufferSize];
        if(bufferSize == AudioRecord.ERROR_BAD_VALUE){
                Log.e(LOG_TAG, "Min buff size error");
                return false;
        }

        aRecorder = new android.media.AudioRecord(MediaRecorder.AudioSource.MIC, freq, android.media.AudioFormat.CHANNEL_IN_MONO, android.media.AudioFormat.ENCODING_PCM_16BIT, bufferSize);

        aRecorder.startRecording();
        breakLoop = false;
        int TotalSize=0; //koliko je snimljeno podataka
        while (TotalSize < freq * 2 * 1 * 30) { //SampleRate * BytesPerSample * NumberOfChannels * seconds  
            int bufferReadResult = aRecorder.read(buffer, 0, bufferSize);
            TotalSize+=bufferReadResult; // filesize failsafe
            if (breakLoop) break; //if other thread stops recording
            if (bufferReadResult>0) MyRandomAccessFile.write(buffer, 0, bufferReadResult); //write into some file ...
        }

        aRecorder.stop();
        aRecorder.release(); //this is mandatory !
        updateWaveFile(MyRandomAccessFile); //updates wave header
        MyRandomAccessFile.close();
        return true;
    } catch (Exception e)
    {
        Log.e(LOG_TAG, "StartRecording: LOOP " + e);

        try
        {
            aRecorder.stop();
        } catch(Exception ex) {}

        try
        {
            aRecorder.release();
        } catch(Exception ex) {}

        try
        {
            randomAccessWriter.close();
        } catch(Exception ex) {}
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T21:57:47.210

你在模拟器上吗？听说麦克风不能用。

# c# - Pageddatasource 分页失败，出现“不实现 ICollection”。

> ID：11428351
> 
> 赞同：1
> 
> 时间：2012-07-11T08:16:54.553
> 
> 标签：c#, asp.net, repeater, datasource, paging

我有一个中继器，我需要分页，所以我正在使用 PagedDatasource。

鉴于：

```
string tag = Request.QueryString["category"]; 
```

并且标签变量不为空，则 PagedDataSource 分页失败，并出现以下错误：

> 异常详细信息：System.Web.HttpException：无法为未实现 ICollection 的数据源计算 Count。

在这一行：

```
lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of " + pagedDS.PageCount.ToString(); 
```

注意：当标签变量为空时，分页工作正常。

完整代码如下：

```
string tag = Request.QueryString["category"];
var ba = new DataBase.BlogAdapter();

PagedDataSource pagedDS = new PagedDataSource();
pagedDS.AllowPaging = true;
pagedDS.PageSize = 3;

if (String.IsNullOrEmpty(tag))
{
    pagedDS.DataSource = ba.GetArticles(null, null);
}
else
{
    var t = new DataBase.Tag() { TagName = tag };
    var tec = new DataBase.TagEqualityComparer();
    pagedDS.DataSource = ba.GetArticles(null, null).Where(a => a.Tags.Contains(t, tec));
    CurrentPage = 0;
}

pagedDS.CurrentPageIndex = CurrentPage;

// NEXT LINE FAILS IF "tag" IS NOT EMPTY
lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of " + pagedDS.PageCount.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:21:55.583

您可能需要将过滤器具体化为一个集合，例如

```
ba.GetArticles(null, null).Where(a => a.Tags.Contains(t, tec)).ToList(); 
```

`IQueryable<>`只有实现`IEnumerable`，而`IList<>`实现`ICollection`。

# javascript - 为什么在修改 String.prototype 后创建 jQuery 插件时出现 TypeError

> ID：11428352
> 
> 赞同：2
> 
> 时间：2012-07-11T08:16:57.930
> 
> 标签：javascript, jquery, jquery-plugins, prototype

修改 String.prototype 后尝试创建一个 jQuery 插件，你会得到一个 TypeError。为什么？它是jQuery的错误吗？当涉及到功能排序时，它确实让我感到困扰。现在，在修改原型之前，我必须始终注意创建 jQuery 插件。看到这些小提琴：

This [fiddle](http://jsfiddle.net/saeedneamati/t6Xdd/) Throws Type Error（因为 jQuery 插件是在原型修改后创建的）

这个[小提琴](http://jsfiddle.net/saeedneamati/m6J2D/)还行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:23:07.337

```
String.prototype.digitGroup = function () {
    // Code here
    return;
}; // Add a semicolon here to avoid error

(function ($) {
    $.fn.showDialog = function (options) {
        // Code here
        return this;
    };
})($); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:22:42.920

只需在此函数后加一个分号即可

```
String.prototype.digitGroup = function () {
    // Code here
    return;
}; // Here 
```

[**更新了小提琴。**](http://jsfiddle.net/t6Xdd/2/)

分号是可选的，`javascript`但有时它很重要，因此您应该始终使用分号，这是一种很好的编程习惯，请[**在 SO 上**](https://stackoverflow.com/questions/2399935/why-use-semicolon)[**检查 this**](http://www.howtocreate.co.uk/tutorials/javascript/semicolons)和this 。[](https://stackoverflow.com/questions/2399935/why-use-semicolon)

# http - HTTP URI 在哪里指定？

> ID：11428354
> 
> 赞同：2
> 
> 时间：2012-07-11T08:17:03.110
> 
> 标签：http, uri, standards, rfc

RFC 3986 指定了 URI 的通用格式，但声明它“*没有定义 URI 的生成语法；该任务由每个 URI 方案的单独规范执行。* ”我现在正在寻找该特定**HTTP URI 语法**的当前规范.

HTTP/1.1 在 RFC 2616（*超文本传输​​协议 -- HTTP/1.1*）中指定。在第 3.2 节中，它定义了“ *http URL 的特定于方案的语法和语义*”。这看起来很简单：

> http_URL = "http:" "//" 主机 [ ":" 端口 ] [ abs_path [ "?" 询问 ]]

此规则引用 RFC 2396（*统一资源标识符 (URI)：通用语法*）中的规则，该规则已被 RFC 3986（*统一资源标识符 (URI)：通用语法*）废弃。后一个 RFC 没有提到 abs_path，前一个没有提到 IPv6，而且 http_URL 至少缺少片段。

我错过了什么还是我完全错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:59:16.610

1) URI 方案的官方列表由 IANA 在[http://www.iana.org/assignments/uri-schemes.html](http://www.iana.org/assignments/uri-schemes.html)维护，这确实表明 RFC 2616 定义了“http”URI 方案。

2) RFC 2616 早于 RFC 3986（显然），并且从那以后没有更新。但很快就会；请参阅[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-19.html#rfc.section.2.7](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p1-messaging-19.html#rfc.section.2.7)了解最新和最棒的信息。

3) 片段标识符不是 URI 方案定义的一部分；它们适用于*所有*计划；见[http://greenbytes.de/tech/webdav/rfc3986.html#rfc.section.3.5](http://greenbytes.de/tech/webdav/rfc3986.html#rfc.section.3.5)。

# sql - Oracle Query 说需要 AM/PM 错误

> ID：11428361
> 
> 赞同：1
> 
> 时间：2012-07-11T08:17:15.340
> 
> 标签：sql, oracle, datetime

我在查询中遇到错误，这有什么问题，总是说需要 AM/PM。

```
select RECORDTYPE, FILEID, SETOFBOOKSNAME, COSTCENTRE, GLACCOUNT, PRODUCT,
CUSTOMERSEGMENT, SUBLEDGER, JOURNALSOURCENAME, JOURNALCATEGORY, EFFECTIVEDATE ,
CURRENCYCODE, ENTEREDDR, ENTEREDCR, CONVERSIONTYPE, CURRENCYCONVERSIONDATE, 
CURRENCYCONVERSIONRATE, CONVERTEDDR, CONVERTEDCR, BATCHNAME, BATCHDESCRIPTION, 
JOURNALNAME, JOURNALDESCRIPTION, SOURCESYSTEMREFERENCE, JOURNALLINEDESCRIPTION 

from glaccount gl 

where EFFECTIVEDATE BETWEEN 
to_timestamp('2012-07-11 16:00:00.021 AM','DD-mm-RR HH.MI.SS.FF AM') and 
to_timestamp('2012-07-11 23:59:59.021 AM','DD-mm-RR HH.MI.SS.FF AM') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:21:11.033

删除`AM`（从日期本身）并根据您的格式设置日期。应改为：

```
to_timestamp('2012-07-11 16:00:00.021','YYYY-MM-DD HH24.MI.SS.FF') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:23:40.210

```
to_timestamp('2012-07-11 16:00:00.021 AM','DD-mm-RR HH.MI.SS.FF AM') 
```

是错的。你应该改变

`2012-07-11`至`11-07-12`

或者

`DD-mm-RR`至`yyyy-mm-dd`

**更新**：在此之后，你会得到

> 小时必须在 1 到 12 之间

因为 16 AM 不存在，但这是另一个问题，更简单。

# nlp - 我应该使用什么样的方法从句子中提取语义

> ID：11428362
> 
> 赞同：0
> 
> 时间：2012-07-11T08:17:23.593
> 
> 标签：nlp

举个例子，有一句话“在 CRM 中创建一个客户，并将他的年龄设置为 25 岁，将性别设置为男性。”。我想提取诸如性别为男性、年龄为 25 岁、命令是创建客户等信息。我怎样才能做到这一点？

我已经尝试过像 mate-tools 这样的语义角色标签，它无法提取像年龄是 25 岁、性别是男性这样的东西。有没有一种特殊的方式或方法或管道我可以成功地做到这一点，我可以期待什么样的准确性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:06:15.827

您的输入是否受到限制，或者您是否希望解析标准的日常英语？如果您只需要识别几个短语，则可以使用依赖解析器支持的基于规则的系统（即找到关键字“create”，使用解析器确定它是用户想要创建的客户；然后通过以类似方式遵循依赖关系来匹配客户的已知属性）。如果输入不受约束，您可以忘记它。

# apache - 虚拟主机下的应用程序？

> ID：11428365
> 
> 赞同：0
> 
> 时间：2012-07-11T08:17:32.323
> 
> 标签：apache, httpd.conf

我们正在尝试在 Apache 中设置以下场景：

[http://intranet.site.com](http://intranet.site.com) -> /var/www/html/intranet

[http://intranet.site.com/app1](http://intranet.site.com/app1) -> /var/www/html/app1

[http://intranet.site.com/app2](http://intranet.site.com/app2) -> /var/www/html/app2

这可能吗？我们如何配置我们的 httpd.conf？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:31:59.530

确保 mod_alias 已启用，然后在您的 VirtualHost 中：

```
Alias /app1 /var/www/html/app1
Alias /app2 /var/www/html/app2 
```

# xcode - 我如何在 Xcode4 中使用 UIWebView

> ID：11428369
> 
> 赞同：-3
> 
> 时间：2012-07-11T08:17:39.547
> 
> 标签：xcode

我想在 xcode4 中构建一个应用程序，它将在应用程序内部加载一个页面。我正在关注下面的视频

[http://www.youtube.com/watch?v=yICZb91Poxs](http://www.youtube.com/watch?v=yICZb91Poxs)
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:32:30.023

您创建一个项目并在您的 .h 中编写：

```
@property (weak, nonatomic) IBOutlet UIWebView *webV; 
```

不要忘记`@synthesize`

在你的 .m 中：

```
[webV loadRequest:[NSRLRequest requestWithURL:[NSURL URLWithString:@"google.fr"]]]; 
```

您当然可以用另一个地址替换 google.fr。

# google-maps-api-3 - 信息窗口错误定位

> ID：11428374
> 
> 赞同：0
> 
> 时间：2012-07-11T08:17:56.963
> 
> 标签：google-maps-api-3, google-maps-markers

我对 Google Maps API 3 很陌生，无法弄清楚以下错误：我的标记上的所有点击都会在同一个标​​记上打开信息窗口（坏），但文本不同（好）。我将数据从wordpress自定义元数据中提取到一个xml中，然后我对其进行解析；让我想知道的是，以这种方式生成标记是这样的，但是为信息窗口添加侦听器显然失败了。

有什么想法吗？

现场演示：http: [//goo.gl/9seK9](http://goo.gl/9seK9)

代码

```
$(document).ready(function(){

    var infowindow;
    var latlng = new google.maps.LatLng(47.580231,13.771362);
    var settings = {
        zoom: 8,
        center: latlng,
        panControl: true,
        zoomControl: true,
        mapTypeControl: true,
        disableDefaultUI:true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

    jQuery.get("http://rundumadum.eu/de/wp-content/themes/rud/rundumadumMap.xml", {}, function(data) {
        var xmllength = $(data).find("mymarkers").children().size();
        var supermarkers = [];

        jQuery(data).find("mymarker").each(function() {
                var myid = $(this).find("id").text();
                var mytitle = $(this).find("title").text();
                var mylink = $(this).find("link").text();
                var mylocation = $(this).find("location").text();

                var mysplits = mylocation.split(",");
                var mylat = mysplits[0];
                var mylng = mysplits[1];
                var mylatlng = new google.maps.LatLng(parseFloat(mylat), parseFloat(mylng));  
                var myinfo = "<a href="+mylink+">"+mytitle+"</a>";
                var marker = createMyMarker(mytitle, myinfo, mylink, mylatlng);
        });
    });

    function createMyMarker(mytitle, myinfo, mylink, mylatlng) {
        marker = new google.maps.Marker({
            position: mylatlng, 
            map: map,
            clickable:true,
            icon:'http://rundumadum.eu/de/wp-content/themes/rud/static/img/markerTest.png',
            html: '<a href="'+mylink+'">'+mytitle+'</a>'
        });

        google.maps.event.addListener(marker, "click", function() {
            if (infowindow) infowindow.close();
            infowindow = new google.maps.InfoWindow({content: myinfo});
            infowindow.open(map, marker);
        });
    }
    return marker;

}); 
```

将不胜感激任何想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:07:43.293

我注意到的一件事是，`marker`您创建的`createMyMarker`不是 using 声明`var marker`，因此看起来您无意中创建了一个全局`marker`引用。此外，似乎声明：`return marker`实际上是在您的`createMyMarker`函数结束之后，尽管这可能只是您在问题中设置代码示例时引入的错字。

无论如何，我相信如果您更改代码`createMyMarker`以在该函数中使用声明标记`var marker`，它将为您提供更好的结果。

# jquery-mobile - 使用 jquerymobile 弹出窗口

> ID：11428379
> 
> 赞同：0
> 
> 时间：2012-07-11T08:18:12.027
> 
> 标签：jquery-mobile, popup

您好，我想用 Jquerymobile 创建一个弹出窗口。在我的应用程序中，我有一个问题和三个答案选项。如果用户点击一个答案，那么它应该会出现一个弹出窗口：正确答案：这是正确的。对于错误的答案：这是错误的。3个答案选项，两个是错的，一个是对的。

有人可以帮我吗？

```
<fieldset data-role="controlgroup">
                <legend>
                    Question?
                </legend>
                <input type="radio" name="radio-choice-1" id="radio-choice-1" value="choice-1" checked="checked" />
                <label for="radio-choice-1">Körpergewicht / (Körpergröße)2</label>

                <input type="radio" name="radio-choice-1" id="radio-choice-2" value="choice-2"  />
                <label for="radio-choice-2">(Körpergewicht) / Körpergröße 2</label>

                <input type="radio" name="radio-choice-1" id="radio-choice-3" value="choice-3"  />
                <label for="radio-choice-3">Körpergewicht / (Alter)2</label>

            </fieldset>
        <a href="#" id="popupbut" data-role="button" data-theme="b">prüfen</a> 
```

* * *

```
 <script type="text/javascript">

$(document).ready(function() {
    $(document).delegate('#popupbut', 'click', function() {
        alert($("input[name='radio-choice-1']:checked").val());
                    $('<div>').simpledialog2({
                        mode: 'blank',
                        headerText: 'Falsch',
                        headerClose: true,
                        blankContent : 

                            '<p><br /><br />This is wrong.</p>'
                    })

                });})

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:59:15.253

这应该可以解决您的问题。

```
 $(document).ready(function () {
            $(document).delegate('#popupbut', 'click', function () {
                var content = '';
                var headerText = '';
                if ($("input[name='radio-choice-1']:checked").val() == 'choice-1') {
                    content = '<p><br /><br />Right!.</p>'
                    headerText = 'Right';
                } else {
                    content = '<p><br /><br />Wrong!.</p>'
                    headerText = 'Wrong';
                }
                $('<div>').simpledialog2({
                    mode: 'blank',
                    headerText: headerText,
                    headerClose: true,
                    blankContent: content

                });
            });
        }); 
```

# javascript - Webkit 转换不起作用，我该怎么办

> ID：11428381
> 
> 赞同：1
> 
> 时间：2012-07-11T08:18:18.903
> 
> 标签：javascript, html, webkit, transform

这段代码有什么问题？它不适用于谷歌浏览器。我想用 javascript 和 webkit 转换动态旋转图片。

```
<html>
  <head>
    <title></title>
    <script>
      document.getElementById('img1').style.webkitTransform = "rotateX(-40deg)";   
    </script>
  </head>
  <body>
    <img id="img1" src="1.jpg" />
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:22:18.907

在 x 轴上旋转是未定义的。改用普通的[`rotate`](https://developer.mozilla.org/en/CSS/transform#rotate)。此外，您试图引用在运行时不存在的元素。要么推迟脚本加载，要么：

它是纯 CSS，我建议将整个`<script>`块替换为：

```
<style>
#img1 {
    -webkit-transform: rotate(-40deg);
}
</style> 
```

注意：此代码仅在基于 webkit 的浏览器中显示旋转。为了获得最佳的[浏览器兼容性](https://developer.mozilla.org/en/CSS/transform#Browser_compatibility)，不要忘记使用`-moz-`,`-o-`和`-ms-`和 无前缀前缀。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:23:18.497

试试这个——脚本需要在 DOM 加载后执行——所以我把它移到`img`元素之后

```
<html>
<head>
  <title></title>
</head>
<body>
  <img id="img1" src="1.jpg" />
  <script>
     document.getElementById('img1').style.webkitTransform = "rotate(-40deg)";   
  </script>
</body>
</html>​ 
```

而你使用了错误的 webkitTransform 函数......你应该使用[旋转](https://developer.mozilla.org/en/CSS/transform#rotate)

[工作示例](http://jsfiddle.net/manseuk/5HeG2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:22:22.857

由于脚本在加载后立即运行，因此文档中的`script`标记在`head`加载正文之前就已经运行。

如果将标签移动到`script`标签的末尾`body`，您应该会发现它不会抛出错误。

# forms - 如何在 Bootstrap 中对不同表单标签中的按钮进行分组

> ID：11428385
> 
> 赞同：13
> 
> 时间：2012-07-11T08:18:39.073
> 
> 标签：forms, button, twitter-bootstrap

你如何在 Twitter 的 Bootstrap 中将不同表单标签内的按钮组合在一起？

现在我得到的是：

```
<div class="btn-group"> 
    <!--More button-->
    <form action="search.php" method="POST">
    <input type="hidden" name="some name" value="same value">
    <button style="float:left" class="btn" type="submit"><i class="icon-search"></i> More</button>
    </form>
    <!--Edit button-->
    <form action="edit_product.php" method="post">
    <button class="btn btn-primary" type="submit"  name="product_number" value="some value"><i class="icon-cog icon-white"></i> Edit</button>
     </form>
     <!--delete button-->
     <button data-toggle="modal" href="#error_delete" class="btn btn-danger"><i class="icon-trash icon-white"></i> Delete</button>
</div> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T20:44:29.560

如果您不想使用脚本，您可以使用隐藏输入（或任何内联元素，例如`<i></i>`）来创建正确的 first:child 和 last:child 关系：

**[小提琴演示](http://jsfiddle.net/isherwood/TRjEp)**

```
<form class="btn-group">
    <button class="btn">Button One</button>
    <input type="hidden" class="btn"><!-- fake sibling to right -->
</form>

<form class="btn-group">
    <i></i><!-- fake sibling to left -->
    <button class="btn">Button Two</button>
</form> 
```

在最新版本的 Bootstrap 2 中，我确实必须添加一点 CSS 覆盖：

```
form.btn-group + form.btn-group {margin-left: -5px;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T21:29:20.850

您可以使用 JQuery 来实现它。

```
<form id="form1" action="search.php" method="POST">
 <input type="hidden" name="some name" value="same value">
</form>

<form id="form2" action="edit_product.php" method="post">
 </form>

<div class="btn-group"> 
 <button id="more" style="float:left" class="btn" type="submit"><i class="icon-search"></i>  More</button><!--More button-->
 <button id="edit" class="btn btn-primary" type="submit"  name="product_number" value="some value"><i class="icon-cog icon-white"></i> Edit</button>
 <button data-toggle="modal" href="#error_delete" class="btn btn-danger"><i class="icon-trash icon-white"></i> Delete</button>    
</div> 
```

并使用 JQuery：

```
$("#more").click(function() {
    $("#form1").submit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T11:30:46.800

# 将 s包裹`btn-group`在一个`btn-toolbar`

如果您使用的是 Bootstrap v4 或更新版本：

```
<div class=btn-toolbar>
    <form class=btn-group>
        <button class="btn btn-outline-primary">Button One</button>
        <i></i>
    </form>
    <form class=btn-group>
        <i></i>
        <button class="btn btn-outline-primary">Button Two</button>
    </form>
</div> 
```

( [JSFiddle](https://jsfiddle.net/87h14enw/) )

从 v4 开始，`btn-toolbar`不向 ; 添加任何额外的边距`btn-group`。`m*`相反，如果您需要工具栏中的组之间的任何间距，您实际上必须自己添加类。

如果您使用的是旧版本的 Bootstrap (<=v3)，请应用[@isherwood 的解决方案](https://stackoverflow.com/questions/11428385/how-to-group-buttons-in-different-forms-tags-in-bootstrap/17603157#17603157)。

# sql - REPLACE INTO 查询是好的做法吗？

> ID：11428386
> 
> 赞同：7
> 
> 时间：2012-07-11T08:18:48.733
> 
> 标签：sql, vb.net, sql-server-2008, sql-server-2005, replace

我需要一个可以更新或创建数据库条目的 SQL 查询（如果某个客户还不存在）。我在互联网上找到了当前的解决方案：

```
command.CommandText = "REPLACE INTO [Resource_Tracer].[dbo].[Customer](CustomerName, CustomerID) VALUES (@CustomerName, @CustomerID)" 
```

由于我没有看到它经常使用并且实际上以前从未听说过它，这真的是我想要的解决方案，还是我应该手动执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:27:04.020

两者`REPLACE INTO`和`ON DUPLICATE KEY`建议的替代方案都是来自 MySQL 变体的非标准 SQL。所以你是否使用它取决于 a) 你是否使用 MySQl 和 b) 你是否想绑定到那个变体。

ANSI SQL 定义了一种`MERGE`更标准的语法，如果它在您的平台上实现的话

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T08:20:54.303

更常见的是使用

```
INSERT INTO table col1) VALUES (1)
ON DUPLICATE KEY UPDATE col1=VALUES(Col1) 
```

`replace into`实际上删除了一个重复的条目并插入了一个新条目。

# gcc - gcc -pg 创建 a.out 而不是 gmon.out

> ID：11428391
> 
> 赞同：0
> 
> 时间：2012-07-11T08:19:09.903
> 
> 标签：gcc, compiler-construction

如何让我的 gcc -pg 创建一个 gmon.out 文件而不是 a.out？我正在尝试使用 gprof 分析我的 CPU，但是当我编译我的 .c 文件时，我得到了一个 a.out，这不是我需要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:20:53.277

配置文件是在您运行已编译的程序时生成的，而不是在编译时生成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:23:31.997

```
$ gcc -pg yourfile.c #compile with -pg

$ ./a.out #execute it 
```

现在，您可以看到该`gmon.out`文件。

# unit-testing - 您如何为集成测试设置数据

> ID：11428392
> 
> 赞同：2
> 
> 时间：2012-07-11T08:19:13.780
> 
> 标签：unit-testing, installation, integration-testing

我有一个带有许多 sql 插入的 Setup 方法。此方法在每个 Test 方法之前调用。

我添加到我的数据库中的表越多，Setup 方法就越大，并且它难以概述和维护。

有时我认为我应该为每个测试方法创建一个私有设置方法，这样每个测试方法的插入数据会更少，但通常它会比以前的设置方法更多的 sql 插入。

通常我也不需要在特定测试的设置方法中插入一些 sql。因此，我不能轻易说出哪种设置数据适用于哪种测试方法。

你发现什么是好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:30:18.147

考虑使用文件资源（准确地说是 sql 脚本）。将 SQL 存储为类中的字符串通常最终会成为可维护性的噩梦。

在我的 C# 项目中，我通常做的是：

*   创建脚本插入给定测试所需的数据（设置）
*   创建脚本将数据库恢复到插入之前的状态（拆卸）
*   将这些脚本添加到项目资源中（以便它们可以存储在 .sql/text 文件中，并在需要时轻松在数据库上运行，并且不会弄乱类代码）

并在测试开始之前/之后运行它们（尽管**在**测试方法主体内）。例如（伪代码）：

```
public void DeleteClient_DeletesClientAndOrderHistory()
{
    ExecuteSql(Resources.Scripts.DeleteClientTest_SetupScript);
    // perform test 
    ExecuteSql(Resources.Scripts.DeleteClientTest_TeardownScript);
} 
```

当然，您可以使用`catch-finally`其他类型的*还原到起点的*安全机制来包装此类构造并确保它们。然而，这将对测试执行时间产生相当大的影响。您可以考虑两个额外的选项：

*   具有类范围的设置和拆卸，您可以在其中插入经过测试的 DAO 类所需的所有数据（每个类运行一次）
*   具有程序集/命名空间范围的设置和拆卸，您可以在其中插入**所有**DAO 类所需的所有数据（每个程序集/命名空间中的所有类运行一次）

自然，您必须检查您的框架是否支持此类方法（例如，NUnit 支持*(class-wide)* *(assembly/namespace-wide)*属性）。[`[TestFixtureSetup]`](http://www.nunit.org/index.php?p=fixtureSetup&r=2.2.10) *[`[SetUpFixture]`](https://stackoverflow.com/questions/9608652/initialize-log4net-as-early-as-possible-with-nunit/9608961#9608961)*

# git - 使用cherry-pick 或 rebase --onto 选择一系列提交最终会得到相同的结果吗？

> ID：11428400
> 
> 赞同：6
> 
> 时间：2012-07-11T08:19:42.650
> 
> 标签：git, git-rebase, cherry-pick

我有时想从不同的存储库中选择一系列提交。我知道有两种方法可以做到这一点。

1.

```
git checkout myBranch
git cherry-pick begin..end 
```

或者

2.  `git rebase --onto myBranch begin end`

我发现第一个版本更容易记住。然而，我读了很多关于挑选樱桃与合并相比是多么邪恶的文章，因为它有点打破了历史。但是我还没有弄清楚的是，在挑选一系列提交或使用 rebase 之间是否有区别`--onto`

我倾向于认为应该没有区别。我弄错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:22:47.040

变基和挑选对于合并来说同样“糟糕”。它们都会导致忘记您选择的更改的原始提交的 ID；因此，以后的合并可能会尝试多次应用相同的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:32:41.713

这两个命令是等价的，你只是在做一个普通的变基会做的工作，以找出未合并的提交以重播到目标分支。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-11T08:22:51.933

实际上，在这方面，摘樱桃比变基更邪恶。Cherry Picking 会创建重复的提交，而变基实际上会移动它们（从而重写历史）。

两者都比合并更邪恶，在我看来，这通常是最糟糕的选择。

# php - 带有空白 Else 语句问题的 If/Else 三元运算符

> ID：11428401
> 
> 赞同：1
> 
> 时间：2012-07-11T08:19:45.120
> 
> 标签：php, arrays, ternary-operator

通常我可以摆脱使用类似的东西：

```
$a = ($condition)? array(1,2,3) : ''; 
```

但是现在我有一个接受多维数组的方法，我必须有条件地通过或不通过其中一个数组。

```
$this->mymethod(
    'myarrays'=> array(
        array('key' => 'lang_code'),
        array('key' => 'lang_description'),
        array('key' => 'lang_direction'),
        ($mycondition==true)? array('key' => 'lang_export') : ),
    )
); 
```

基本上，问题在于通过的最后一个数组。更具体地说，三元 If 运算符中的 ELSE 语句。似乎我不能在 : 之后简单地传递一个空格，并且我不能传递任何其他东西，例如 FALSE 或 '' （空字符串），因为稍后在代码中运行该数组的 foreach 会出错。

我的问题是： **如何根据条件将参数传递给函数/方法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:26:11.437

```
array_filter(array(
    array('key' => 'lang_code'),
    array('key' => 'lang_description'),
    array('key' => 'lang_direction'),
    $mycondition ? array('key' => 'lang_export') : null),
)); 
```

这将删除`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:28:00.970

以可读性为目标，而不是如何减少打字。三元运算符很棒，因为在某些情况下它增加了可读性。这当然不是那种情况。

善待以后阅读您的代码的人，包括您自己。

这是一个例子（评论是未来读者的想法）：

```
//OK, so here we have an array
$array = array(
    array('key' => 'lang_code'),
    array('key' => 'lang_description'),
    array('key' => 'lang_direction'),
);

//So the array can have one more element based on this condition
if ($mycondition) {
     $array[] = array('key' => 'lang_export');
}

//And then we pass this array to the method
$this->mymethod(array('myarrays' => $array)); 
```

您可以自由使用变量，而不必在一个语句中编写所有代码（好吧，我必须承认我之前认为这很酷）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:22:42.820

利用：

```
$mycondition? array('key' => 'lang_export') : null 
```

现在，您可以简单地通过`array_filter(..)`, 运行它来删除该`NULL`元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:31:18.927

您可以在函数调用之前评估条件，例如使用辅助函数：

```
function evaluate_condition (array $mandatory, array $optional, $condition) {
    if (true === $condition) {
        $mandatory[] = $optional;
    }
    return $mandatory;
}

$this->mymethod(
    'myarrays'=> $this->evaluate_condition(
        array(
            array('key' => 'lang_code'),
            array('key' => 'lang_description'),
            array('key' => 'lang_direction')
        ),
        array('key' => 'lang_export'),
        $mycondition
    )
); 
```

# opengl - 查看圆柱体内部

> ID：11428408
> 
> 赞同：0
> 
> 时间：2012-07-11T08:20:00.860
> 
> 标签：opengl, glu

如果我在上面画`gluCylinder`一个`gluDisk`。在不启用剔除的情况下，我得到了带有盖子效果的所需圆柱体。但是，如果我启用剔除，磁盘（又名盖子）就会消失。 **这是为什么？** 这是主要问题。此外，启用剔除后，圆柱体的背面也不会被绘制。我明白为什么会发生这种情况，但我仍然希望看到圆柱体内部的绘制。代码是：

```
 glPushMatrix()
    quadratic = gluNewQuadric()
    gluQuadricNormals(quadratic, GLU_SMOOTH)
    gluQuadricTexture(quadratic, GL_TRUE)
    glRotatef(90, 1, 0, 0)
    glTranslate(0, 0, -3*sz)
    gluCylinder(quadratic, 0.75*sz, 0.75*sz, 3.0*sz, 32, 32)
    gluDisk(quadratic, 0.0, 0.75*sz, 32, 32)
    glPopMatrix() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:53:21.203

您的磁盘朝向错误的方向（错误的绕组）。因此，它被淘汰。您可以尝试使用 反转其方向`gluQuadricOrientation`，这应该可以解决问题。有关更多信息，请参阅[gluDisk](http://www.opengl.org/sdk/docs/man/xhtml/gluDisk.xml)和[glCullFace](http://www.opengl.org/sdk/docs/man/xhtml/glCullFace.xml)的 OpenGL 规范。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:57:16.050

圆盘只是一个没有任何厚度的平面。所以一侧在前面，另一侧在后面，启用剔除后，其中一个会被剔除。你可能只是看到被淘汰的一面。如果这不是您想看到的那一面，只需旋转圆盘即可。没有什么比它更棒的了。所以只需将其包装成：

```
glPushMatrix();
glRotatef(180.0f, 0.0f, 1.0f, 0.0f);
gluDisk(quadratic, 0.0, 0.75*sz, 32, 32);
glPopMatrix(); 
```

或者，就像 kroneml 建议的那样，改变它的三角形的方向。自己决定哪一个在您的情况下在概念上更正确。

# java - Hibernate 4.0.0Final SessionFactory.openSession(Interceptor 拦截器) 在哪里

> ID：11428410
> 
> 赞同：11
> 
> 时间：2012-07-11T08:20:04.243
> 
> 标签：java, hibernate

我尝试了一些来自[hibernate 4.0 拦截器](http://docs.jboss.org/hibernate/core/4.0/manual/en-US/html/events.html#objectstate-interceptors)的代码，它给出了使用会话级拦截器的代码：

```
Session session = sf.openSession( new AuditInterceptor() ); 
```

但是，我检查了 hibernate-core 4.0 源代码和仅[hibernate 4.0 java-doc](http://docs.jboss.org/hibernate/orm/4.0/javadocs/org/hibernate/SessionFactory.html)，该类`SessionFactory`没有 method `openSession(Interceptor interceptor)` ，但[hibernate 3.6 java-doc](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/SessionFactory.html)确实有这个方法。

有谁知道方法转移到哪里？如果不推荐使用，为什么该文档仍将其保留在教程文档中？我应该如何在 4.0 中使用会话级拦截器？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T08:54:14.597

它现在使用 Builder 模式实现：

```
Session session = sf.withOptions()
                    .interceptor(new AuditInterceptor())
                    .openSession(); 
```

# c++ - 是否可以在其他调试器如ollydbg、windbg中调试带有源代码的vc发布程序？

> ID：11428411
> 
> 赞同：0
> 
> 时间：2012-07-11T08:20:04.527
> 
> 标签：c++, visual-studio-2010, visual-c++

我需要监视 vc 生成的汇编代码。

是否可以在其他调试器如ollydbg、windbg中调试带有源代码的vc发布程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:36:25.433

是的，像 ollydbg 或 windbg 这样的调试器可以调试\反汇编\启动各种本机可执行文件（PE 也是如此），无论使用了哪种编译器和哪种语言。唯一的问题是你不会有太多的调试符号，而且很难知道你在哪里以及你在做什么。

如果 pdb 可用，请使用它：[http](http://en.wikipedia.org/wiki/Program_database) ://en.wikipedia.org/wiki/Program_database 。

# maven - 通过 ant 脚本将 liferay 6.1 工件安装到 maven 存储库中

> ID：11428412
> 
> 赞同：2
> 
> 时间：2012-07-11T08:20:06.817
> 
> 标签：maven, ant, liferay

我想在我的项目中使用一些 liferay 工件（2 更改 Jboss Portal 4 liferay，但这是另一个故事）。我从 forge.net/projects/lportal/files/Liferay%20Portal/6.1.0%20GA1/liferay-portal-maven-6.1.0-ce-ga1-20120106155615760.zip/download 下载 maven liferay 插件键入 ant install auto 自动将 liferay 工件安装到 maven 存储库中（没有更改 build.xml 中的任何内容，方向也，因为我想将它安装到默认存储库 USER/.m2 中。所以我在 cmd 中键入 ant instal -debug 并且我得到这个错误

```
install-artifact:
Class java.util.Vector loaded from parent loader (parentFirst)
Class org.apache.tools.ant.taskdefs.condition.Equals loaded from parent loader (
parentFirst)
     [exec] Current OS is Windows 7
     [exec] Executing 'mvn.bat' with arguments:
     [exec] 'install:install-file'
     [exec] '-DartifactId=portal-client'
     [exec] '-Dfile=dist/portal-client.jar'
     [exec] '-DgroupId=com.liferay.portal'
     [exec] '-Djavadoc=dist/portal-client-javadoc.jar'
     [exec] '-Dpackaging=jar'
     [exec] '-DpomFile=dist/portal-client.pom'
     [exec] '-Dsources=dist/portal-client-sources.jar'
     [exec] '-Dversion=6.1.0'
     [exec]
     [exec] The ' characters around the executable and arguments are
     [exec] not part of the command.
Execute:Java13CommandLauncher: Executing 'mvn.bat' with arguments:
'install:install-file'
'-DartifactId=portal-client'
'-Dfile=dist/portal-client.jar'
'-DgroupId=com.liferay.portal'
'-Djavadoc=dist/portal-client-javadoc.jar'
'-Dpackaging=jar'
'-DpomFile=dist/portal-client.pom'
'-Dsources=dist/portal-client-sources.jar'
'-Dversion=6.1.0'

The ' characters around the executable and arguments are
not part of the command.
     [exec] [INFO] Scanning for projects...
     [exec] [INFO] Searching repository for plugin with prefix: 'install'.
     [exec] [INFO] -------------------------------------------------------------
-----------
     [exec] [INFO] Building Maven Default Project
     [exec] [INFO]    task-segment: [install:install-file] (aggregator-style)
     [exec] [INFO] -------------------------------------------------------------
-----------
     [exec] [INFO] [install:install-file {execution: default-cli}]
     [exec] [INFO] Installing C:\liferay-portal-maven-6.1.0\dist\portal-client.j
ar to C:\Users\Wro00427\.m2\repository\com\liferay\portal\portal-client\6.1.0\po
rtal-client-6.1.0.jar
     [exec] [INFO] Installing C:\liferay-portal-maven-6.1.0\dist\portal-client.p
om to C:\Users\Wro00427\.m2\repository\com\liferay\portal\portal-client\6.1.0\po
rtal-client-6.1.0.pom
     [exec] [INFO] -------------------------------------------------------------
-----------
     [exec] [INFO] BUILD SUCCESSFUL
     [exec] [INFO] -------------------------------------------------------------
-----------
     [exec] [INFO] Total time: < 1 second
     [exec] [INFO] Finished at: Wed Jul 11 10:12:03 CEST 2012
     [exec] [INFO] Final Memory: 3M/254M
     [exec] [INFO] -------------------------------------------------------------
-----------
     [exec] 'cmd' is not recognized as an internal or external command,
     [exec] operable program or batch file.
  [antcall] Exiting C:\liferay-portal-maven-6.1.0\build.xml.

BUILD FAILED
C:\liferay-portal-maven-6.1.0\build.xml:221: The following error occurred while
executing this line:
C:\liferay-portal-maven-6.1.0\build.xml:271: exec returned: 1
        at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:646)
        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav
a:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
        at net.sf.antcontrib.logic.IfTask.execute(IfTask.java:197)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav
a:106)
        at org.apache.tools.ant.TaskAdapter.execute(TaskAdapter.java:154)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav
a:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(Single
CheckExecutor.java:38)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
        at org.apache.tools.ant.taskdefs.CallTarget.execute(CallTarget.java:105)

        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.jav
a:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExe
cutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 2 seconds 
```

我认为我拥有所有环境变量，例如 JAVA_HOME、ANT_HOME 以及 M2 和 M2_HOME，而且一切都在 PATH 中，即使我有 MAVEN_OPTS。我从不使用 ant 我不知道 2 做什么。我尝试寻找答案，但在此特定示例中找不到此错误（exec return 1）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T19:39:22.693

# 选项1：存储库管理器

我建议你安装一个像[Nexus](http://www.sonatype.org/nexus/)这样的 Maven 存储库管理器并在那里加载 jars。大多数 repo 管理器都有一个 GUI 来帮助您加载所需的 jar。

使用存储库管理器总是一个好主意！本地存储库真的是一个缓存......

# 选项2：安装插件

在 ANT 构建结束时调用 Maven 命令行以将 jar 安装到本地存储库中，例如：

```
mvn install:install-file -Dfile=myapp.jar -DgroupId=?? -DartifactId=?? -Dversion=?? -Dpackaging=jar 
```

# php - 带文件句柄的 PHP 函数循环

> ID：11428414
> 
> 赞同：1
> 
> 时间：2012-07-11T08:20:17.523
> 
> 标签：php, eof, fgets

这个函数在我的服务器上造成了很大的麻烦，因为它在循环中：

```
function loadFiles()
{
$email = $_POST["emailp"];
$file_handle = fopen("/tmpphp/dmbigmail.file", "r");
while (!feof($file_handle)) {
$line = fgets($file_handle);
if(stristr($line,$email)){
    $show = trim(str_replace($email,' ',$line));
    //echo $show;
    $parsedata = substr($show,0,11);
    $parselink = substr($show,10);
    $total = $parsedata.'<a href=' . $parselink. ">$parselink</a><br>";
    echo $total;
    }
     }
     fclose($file_handle);
 } 
```

在我的日志中，我可以看到：“PHP 警告：fgets() 期望参数 1 是资源，布尔值在第 42 行的 /path/file.php 中给出”

感兴趣的行是：

```
$line = fgets($file_handle); 
```

功能还可以，但不知道为什么给我这个奇怪的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:22:44.513

因为`$file_handle`是布尔值`false`（您可以使用 进行检查`var_dump`），这反过来又是因为[`fopen`](http://php.net/manual/en/function.fopen.php)调用失败而发生的。

> `fopen`
> 
> 成功时返回文件指针资源，错误时返回 FALSE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:31:16.450

尝试这个 ：

```
$file_handle = @fopen("/tmpphp/dmbigmail.file", "r");
if ($file_handle) {
    while (($line = fgets($file_handle, 4096)) !== false) {
      if(stristr($line,$email)){
            $show = trim(str_replace($email,' ',$line));
            //echo $show;
            $parsedata = substr($show,0,11);
            $parselink = substr($show,10);
            $total = $parsedata.'<a href=' . $parselink. ">$parselink</a><br>";
            echo $total;
        }
    }
    if (!feof($file_handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($file_handle);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:52:36.283

好吧，只有一点建议，为了保护您的代码，在您尝试打开文件之前执行此测试：

```
$filepath = "/tmpphp/dmbigmail.file";
if (!file_exists($filepath) || !is_file($filepath)) {
  echo "$filepath not found or it is not a file."; exit; //return; //die();
}
if ($file_handle = fopen($filepath, "r")) {
....etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:25:33.407

可能 fopen 失败，因为您对该文件没有权限，或者您错过了匹配路径。

但是你正在循环到 fgets(); 这意味着没有 End of file 。

尝试放置`$line = fgets($file_handle,4096);`，看看它是否有效。

# c# - 伪造返回 null 的 httpcontext

> ID：11428415
> 
> 赞同：1
> 
> 时间：2012-07-11T08:20:18.297
> 
> 标签：c#, asp.net, http, web, sitemap

我一直在关注不同的教程，但它们都返回 null，我一直在使用的代码是，

```
 public HttpContext SetNewHttpContext(string uRL)
    {
        var httpRequest = new HttpRequest("", uRL, "");
        var httpResponse = new HttpResponse(new StringWriter());
        return new HttpContext(httpRequest, httpResponse);
    } 
```

我也试过

```
 public static HttpContext FakeHttpContext(string uRL)
    {
        var httpRequest = new HttpRequest("", uRL, "");
        var stringWriter = new StringWriter();
        var httpResponce = new HttpResponse(stringWriter);
        var httpContext = new HttpContext(httpRequest, httpResponce);

        var sessionContainer = new HttpSessionStateContainer("id", new SessionStateItemCollection(),
                                                new HttpStaticObjectsCollection(), 10, true,
                                                HttpCookieMode.AutoDetect,
                                                SessionStateMode.InProc, false);

        httpContext.Items["AspSession"] = typeof(HttpSessionState).GetConstructor(
                                    BindingFlags.NonPublic | BindingFlags.Instance,
                                    null, CallingConventions.Standard,
                                    new[] { typeof(HttpSessionStateContainer) },
                                    null)
                            .Invoke(new object[] { sessionContainer });

        return httpContext;
    } 
```

但它们都不是真正有效的，我正在使用这个上下文来调用

```
 SiteMapProvider contentMapProvider = SiteMap.Providers["SPContentMapProvider"];
 SiteMapNode currentNode = contentMapProvider.FindSiteMapNode(FakeHttpContext(Request.UrlReferrer.ToString())); 
```

它给了我错误

> 由于对象的当前状态，操作无效。

设想

当我们从页面 A 导航到页面 B 时，我需要另一个 ASP.NET 页面 B 中不同 ASP.NET 页面（sharepoint）A 的 HTTPContext。

# c# - 无法在 LINQ to Entities 查询中构造实体或复杂类型“xxx”？

> ID：11428423
> 
> 赞同：0
> 
> 时间：2012-07-11T08:20:29.457
> 
> 标签：c#, linq, ef-code-first, ienumerable, ilist

模型

```
public partial class SayacOkumalariIstatistik
{
    public string sno { get; set; }
    public Nullable<System.DateTime> okuma_tarihi { get; set; }
    public Nullable<decimal> TotalUsageValue { get; set; }
    public string UsageType { get; set; }
} 
```

功能

```
public IList<SayacOkumalariIstatistik> SayacOkumalariGetir()
{
    #region linq concat
    IEnumerable<SayacOkumalariIstatistik> sayac_okumalari_istatistik = entity.TblSayacOkumalari
        .Select(x => new SayacOkumalariIstatistik
        {
            sno = x.sno.ToString() + "T1",
            okuma_tarihi = x.okuma_tarihi,
            TotalUsageValue = x.toplam_kullanim_T1,
            UsageType = "T1"
        })
        .Concat(entity.TblSayacOkumalari.Select(x => new SayacOkumalariIstatistik
         {
             sno = x.sno.ToString() + "T2",
             okuma_tarihi = x.okuma_tarihi,
             TotalUsageValue = x.toplam_kullanim_T2,
             UsageType = "T2"
         }))
         .Concat(entity.TblSayacOkumalari.Select(x => new SayacOkumalariIstatistik
         {
              sno = x.sno.ToString() + "T3",
              okuma_tarihi = x.okuma_tarihi,
              TotalUsageValue = x.toplam_kullanim_T3,
              UsageType = "T3"
         }));
        #endregion

        // Error occurs in here
        return sayac_okumalari_istatistik.ToList();
    } 
```

错误消息是我的问题标题。为什么会出现这个错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T14:10:12.940

错误消息是不言自明的。您不能也不应该将实体类用作投影 DTO（我猜`SayacOkumalariIstatistik`是这样的类）

您至少有 3 种选择：

1.  首先检索原始实体，然后使用 Linq 对对象进行投影（即在`ToList`调用之后）。
2.  创建一个 DTO 类 ( `SayacOkumalariIstatistikViewModel`, `SayacOkumalariIstatistikDTO`, 不管什么) 并在您的查询中使用它。
3.  使用匿名对象进行投影。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:12:59.820

这样做是为了在 Linq to Entities 和 Linq to objects 之间有一个明显的区别/断点。在 Linq to Sql 中，您可以轻松地在内存中而不是在数据库中执行大型操作，而无需知道代码将要执行此操作。

您必须只返回匿名类型、原语、实体类型或三者的组合。

# python - 如何在 Python 中为采样信号编写低通滤波器？

> ID：11428426
> 
> 赞同：1
> 
> 时间：2012-07-11T08:20:39.190
> 
> 标签：python, filter, signal-processing, lowpass-filter

抱歉，这个问题可能微不足道，但我是信号处理方面的新手，我没有找到有很好解释的 python 代码。所以我很高兴得到 dummy 的解释 :)

我有一些信号每 1 纳秒（1e-9 秒）采样一次，并且有 1e4 个点。我需要从这个信号中滤除高频。假设我需要过滤高于 10MHz 的频率。我希望对于低于截止频率的频率信号将保持不变。这意味着对于低于截止频率的频率，滤波器的增益将为 1。我希望能够指定过滤顺序。我的意思是，fitsr 阶滤波器在截止频率后有 20 db/decade 的斜率（功率滚降），二阶滤波器在截止频率后有 40 db/dec 的斜率，依此类推。代码的高性能很重要。

非常感谢您的帮助。亚历克斯。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T08:33:25.373

您似乎有两个问题：

1.  如何设计具有 10MHz 截止频率和任意滤波器阶数的低通滤波器？
2.  我如何在 Python 中实现该过滤器？

滤波器设计超出了堆栈溢出的范围——这是 DSP 问题，而不是编程问题。任何 DSP 教科书都涵盖了滤波器设计 - 去你的图书馆。我喜欢 Proakis 和 Manolakis 的*数字信号处理*。（Ifeachor 和 Jervis 的*数字信号处理*也不错。）

如果你必须有 coeds，试试[这个博客文章](https://azitech.wordpress.com/2011/03/15/designing-a-butterworth-low-pass-filter-with-scipy/)，它展示了如何设计一个巴特沃斯低通滤波器`scipy`。

至于在 Python 中实现滤波器，`scipy`具有将 FIR 或 IIR 滤波器应用于一维信号的[`lfilter()`功能。](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.lfilter.html)

# django - Django中的“没有名为简单的模块”错误

> ID：11428427
> 
> 赞同：65
> 
> 时间：2012-07-11T08:20:43.263
> 
> 标签：django

```
ImportError at /
No module named simple

Django Version: 1.5.dev20120710212642 
```

我安装了最新的 django 版本。我在用

```
from django.views.generic.simple import redirect_to 
```

在我的 urls.py 中。怎么了？是否已弃用？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-07-11T09:36:05.753

使用[基于类的视图](https://docs.djangoproject.com/en/1.4/topics/class-based-views/#class-based-generic-views)而不是`redirect_to`这些基于函数的通用视图已被弃用。

这是基于类的视图使用的简单示例

```
from django.conf.urls import patterns, url, include
from django.views.generic import TemplateView

urlpatterns = patterns('',
    (r'^about/', TemplateView.as_view(template_name="about.html")),
) 
```

**更新**

如果有人想重定向到 URL，请使用[RedirectView](https://docs.djangoproject.com/en/1.4/ref/class-based-views/#django.views.generic.base.RedirectView)。

```
from django.views.generic import RedirectView

urlpatterns = patterns('',
    (r'^one/$', RedirectView.as_view(url='/another/')),
) 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-12-20T03:39:42.013

这应该工作

```
from django.conf.urls import patterns
from django.views.generic import RedirectView

urlpatterns = patterns('',
    url(r'some-url', RedirectView.as_view(url='/another-url/'))
) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-11T08:25:20.577

是的，旧的基于函数的通用视图在 1.4 中已被弃用。请改用基于类的视图。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-02-12T10:50:52.973

为了记录（文档中目前没有相关示例），使用带有参数的[RedirectView ：](https://docs.djangoproject.com/en/1.7/ref/class-based-views/base/#redirectview)

```
from django.conf.urls import patterns, url
from django.views.generic import RedirectView

urlpatterns = patterns('',
    url(r'^myurl/(?P<my_id>\d+)$', RedirectView.as_view(url='/another_url/%(my_id)s/')),
) 
```

请注意，虽然正则表达式查找数字 ( `\d+`)，但参数是作为字符串 ( `%(my_id)s`) 传递的。

尚不清楚的是如何使用`RedirectView`with `template_name`in `urls.py`。

# testing - 我如何按百分比对线程进行分区

> ID：11428432
> 
> 赞同：1
> 
> 时间：2012-07-11T08:20:59.783
> 
> 标签：testing, jmeter

我想按百分比来分割线程。例如 ：

> **- 我的测试计划**
> 
> *-SignUp 线程（这个任务应该是 %10）*
> 
> *-LogIn 线程（这个任务应该是 %40）*
> 
> *-搜索线程（这个任务应该是 %30）*
> 
> *-添加新主题（此任务应为 %20）*

我该怎么做这个分区？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:45:21.790

您可以使用一组[吞吐量控制器](http://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller)- 但它们只能在循环中正常工作（例如，作为循环控制器的“孩子”）。

查看这些以获取详细信息：

*   [吞吐量控制器的目的？](https://stackoverflow.com/questions/10379033/purpose-of-throughput-controller)
*   [Jmeter - 加权随机值？](https://stackoverflow.com/questions/5481867/jmeter-weighted-random-values)
*   [吞吐量控制器如何工作？](http://jmeter.512774.n5.nabble.com/How-throughput-controller-work-td3328412.html)

# java - Java Web Start 更新错误的 Java 版本

> ID：11428433
> 
> 赞同：2
> 
> 时间：2012-07-11T08:21:06.100
> 
> 标签：java, version, java-web-start

我使用 Java Web Start 已经一年多了，它运行良好，但是从今天开始，您将被重定向到 Java 7 下载页面，而不是启动我们的应用程序。

有没有办法为 Web Start 提供最高 Java 版本？您对如何摆脱强制的 Java 7 更新有任何想法吗？在 Java 7 中，软件无法启动。

这是网页的代码：

```
...
<script src="http://www.java.com/js/deployJava.js"></script>
<script>        
    var url = "http://SOME_IP/app/vabnet.jnlp";
    deployJava.createWebStartLaunchButton(url, '1.6.0');

</script>
... 
```

这是我的 jnlp 文件：

```
?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" 
    codebase="SOME_URL" 
    href="vabnet.jnlp">
    <security>
   <all-permissions/>

</security>
    <information>
        <title>VABnet</title>
        ...
    </information>
    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+"
              href="http://java.sun.com/products/autodl/j2se" 
                    initial-heap-size="256M" max-heap-size="256M"/>
        <jar href="VABnet-Client.jar" main="true" />
        ... some nativeLibs
    </resources>
    <application-desc
         name="VABnet"
         main-class="de.vab.vabnet.client.application.VABnetLauncher"
         width="300"
         height="300">
     </application-desc>
     <update check="background"/>
</jnlp> 
```

我确信没有人更改 Apache 文件夹内的 web start 文件夹的内容。提前致谢 ...

更新：我在我们公司发现了一台计算机，它仍然可以正常工作而没有重定向到 Java 7 下载页面（我尝试过的前四台计算机都重定向了我）。现在我尝试检查 Java Web Start 的配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T12:11:47.937

我安装了 64 位版本的 Java，浏览器版本是 32 位。因此 Java Web Start 认为没有安装合适的 Java 版本并重定向到 Java 7 下载页面。

# java - Java NIO 套接字 IO 退化读取块大小

> ID：11428438
> 
> 赞同：0
> 
> 时间：2012-07-11T08:21:21.650
> 
> 标签：java, sockets, nio

我正在编写一个非阻塞客户端，它使用选择器`SelectionKey.OP_READ`和`selector.select()`调用从网络套接字读取数据。阅读部分是这样处理的：

```
if (selectionKey.isReadable()) {
    int len = inChannel.read(buf);
    System.out.println(len);
    . . .
} 
```

我看到的问题是读取大小（`len`）随着下载的进行逐渐退化：

```
1290
1290
1290
480
318
28
28
28
28
28
28
28
28
28
28
28
28
28 
```

有谁知道这是为什么以及如何改进它？当然，它按原样工作，但我需要减少 cpu 开销，因此最好处理大块而不是小块。添加一个小的睡眠（20 毫秒）会有所帮助，但显然会限制可伸缩性，因为我需要同时处理数千个流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:51:26.720

来回答我自己的问题...

**没关系**；我没有正确使用缓冲区。`compact()`从缓冲区读取后忘记调用。

```
if (selectionKey.isReadable()) {
    int len = inChannel.read(buf);
    System.out.println(len);
    . . .
    buf.flip();
    // ... read from buf ...
    buf.compact();
} 
```

显然缓冲区不是循环的；即使缓冲区是空的，也必须在下次使用之前重置位置和限制。

# c# - 在 WPF 中，如何只允许在 DataGrid 中选择一个单元格？

> ID：11428442
> 
> 赞同：3
> 
> 时间：2012-07-11T08:21:49.170
> 
> 标签：c#, .net, wpf

我希望只能在 DataGrid 中选择一个单元格。禁用多选后，您仍然可以选择一系列单元格，但我希望它只允许选择单个单元格。有没有办法通过属性来做到这一点？还是我必须拦截选择并过滤掉除一个单元格之外的所有内容？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T08:37:40.620

`DataGrid`具有 type 的属性`SelectionUnit`，[`DataGridSelectionUnit`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridselectionunit.aspx)与[`SelectionMode`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.selectionmode.aspx):

> SelectionMode 和 SelectionUnit 属性共同定义了 DataGrid 的选择行为。

尝试设置`SelectionUnit`为`Cell`. 这将适用于两个`SelectionMode`值：

> 如果选择模式为扩展，则用户可以选择多个项目，其中项目类型由 SelectionUnit 属性定义。如果选择方式为单项，则用户只能选择单项。

要选择单个单元格，请使用`SelectionMode`和：`Single``SelectionUnit``Cell`

> SelectionMode 和 SelectionUnit 属性共同决定用户如何选择 DataGrid 中的项目。例如，如果 SelectionMode 为 Single，而 SelectionUnit 为 Cell，则用户一次只能在 DataGrid 中选择一个单元格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:39:31.677

您需要设置 DataGrid 的 SelectionUnit。它定义了一个选择单元的范围。可以设置为 Cell、CellAndRowHeader 和 FullRow。

例子：

```
<DataGrid ItemsSource="{Binding Customers}" SelectionMode="Single" SelectionUnit="Cell" /> 
```

# node.js - Windows 上的 Node.js nodemon 不观看嵌套目录？

> ID：11428448
> 
> 赞同：0
> 
> 时间：2012-07-11T08:22:32.173
> 
> 标签：node.js

节点.js 0.8.1

Windows 上的 nodemon 是否应该监视嵌套目录以进行文件更改？

它不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:35:04.483

是的。这已在[3c885ff中修复](https://github.com/remy/nodemon/commit/3c885ff3a8333075b4d8965e904ea48438ae63c4)

尝试更新您的 nodemon 版本？

`npm update nodemon`应该可以解决问题，除非您在 package.json 中指定了版本。
当前版本是 0.6.19

# asp.net - 对象引用未设置为 MYSQL 命令上的对象实例

> ID：11428449
> 
> 赞同：0
> 
> 时间：2012-07-11T08:22:32.763
> 
> 标签：asp.net, mysql, vb.net

每隔几百次，我就会在生活网站上收到一个关于丢失对象的错误。我一直在检查、测试和测试，但不知道出了什么问题。有人有什么好主意吗？

***代码是：***

```
Dim MySqlCommand = New MySqlCommand(SQLC, MySqlConnect)
Try
   Tries = 5
   lg &= " Co("
   Do
       Try : MySqlCommand.Connection.Open()
       Catch ex As Exception
          lg &= " " & ex.Message 
          Wait(0.5) 
       End Try
       If (MySqlCommand.Connection.State <> ConnectionState.Open) Then Tries -= 1 
   Loop While Tries > 0 And MySqlCommand.Connection.State <> ConnectionState.Open
   lg &= ")"
Catch ex As Exception
   lg &= ex.message
End Try

lg &= " " & LCase(Left(SQLC, 5)) & "(Mc"

Try
    lg &= "En" : Dim ret = MySqlCommand.ExecuteNonQuery()
    lg = ""
Catch ex As Exception
   lg &= ":" & ex.message  
End Try

if lg<>"" then  Response.write(lg) 
```

***输出是：***

Co() updat(McEn:对象引用未设置为对象的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:45:45.637

使用 .net 日志框架，例如[log4net](http://logging.apache.org/log4net/)。记录页面上发生的事情。

根据我的经验，日志记录是捕获间歇性错误的最佳方法。

# css - Bootstrap for Rails 的替代品

> ID：11428451
> 
> 赞同：8
> 
> 时间：2012-07-11T08:22:41.453
> 
> 标签：css, ruby-on-rails

我计划建立自己的网站并很快推出。我正在使用 Rails 框架进行所有编码。我知道我的网站样式的引导程序。

但是，我过去已经将 Bootstrap 用于另一个站点。请提出一些其他的替代方案。

谢谢 - 席德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T08:26:31.673

如果我要使用 Twitter Bootstrap 以外的其他东西，我会选择[Zurb 基金会。](http://foundation.zurb.com/)

如果我想要真正的极简主义，我会使用[thinkbot 的波旁威士忌](http://thoughtbot.com/bourbon/)

其他一些：[Skeleton](http://getskeleton.com/)和[HTML Kickstart](http://www.99lime.com/elements/)，如果您正在寻找真正轻巧的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:53:01.180

**如果您想对**您的网站应用不同的样式，并且您通过切换到不同的 css 前端框架来实现这一点，那么在几个网站之后您**将遇到困难。**您不仅每次都必须学习如何使用这些框架，而且在几个网站之后，您将用完框架来尝试。

相反，为什么不**研究如何自定义 Bootstrap**以使其看起来独一无二（我知道开箱即用的 Bootstrap 正变得无处不在，看起来不同也很好）。

这里有一些关于自定义 Bootstrap的[好主意，](https://stackoverflow.com/questions/8596794/customizing-bootstrap-css-template)如果你寻找它们，[还有其他资源。](http://rubysource.com/how-to-customize-twitter-bootstrap%E2%80%99s-design-in-a-rails-app/)

熟练使用一个前端框架并了解如何自定义它，您将因此成为一名更有效率的开发人员。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T14:58:56.923

查看[RailsThemes](http://railsthemes.com)以替代使用 Bootstrap 的 Ruby on Rails 设计。主题应该在安装后工作，无需将您的站点转换为使用 Bootstrap 的标记。几种常见的宝石开箱即用。一些主题使用 Skeleton，同意 Dty 的回答。（完全披露：我是 RailsThemes 团队的一员。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-21T01:58:25.477

我知道您不想再次将 Bootstrap 用于其他站点，但建议您查看此网站。他们使用 Twitter Bootstrap，但其中一些主题可能会激发您对 Bootstrap 的不同外观和感觉。bootstrap 的典型开箱即用配置确实与许多站点非常相似，但这些人在采用基本外观并使它们看起来真正优雅方面做得很好。

[https://wrapbootstrap.com/](https://wrapbootstrap.com/)

![在此处输入图像描述](../Images/5e2a160a1ef40211a3f6cd1a950c43a4.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-24T07:52:30.040

如果您正在寻找新的东西，您可以尝试语义 ui：[http ://semantic-ui.com/](http://semantic-ui.com/)

该代码旨在非常易读。例如：

**语义：**

```
<div class="ui three column grid">
  <div class="column">1</div>
  <div class="column">2</div>
  <div class="column">3</div>
</div> 
```

**引导程序：**

```
<div class="row">
  <div class="col-lg-4">1</div>
  <div class="col-lg-4">2</div>
  <div class="col-lg-4">3</div>
</div> 
```

# objective-c - iOS – 当我无法“控制” GUI 时如何处理通知

> ID：11428452
> 
> 赞同：0
> 
> 时间：2012-07-11T08:22:41.900
> 
> 标签：objective-c, ios, push-notification, uilocalnotification, mfmailcomposeviewcontroller

我在我的应用程序中使用了很多 Apple 的视图控制器（比如`MFMessageComposeViewController`和`ABPeoplePickerNavigationController`）。因此，当我收到通知（本地或远程通知）时，我将如何以最优雅的方式处理它，因为我无法与 Apple 的视图控制器交互（发送消息）。

我的假设是，如果用户正在积极使用该应用程序，即`MFMessageComposeViewController`他不想被他正在做的事情打扰/打断。但如果是我，如果我正在做某事，我会感到有点困惑，我会听到（来自通知的）*嗡嗡*声，然后什么都没有发生。

那么处理这个问题的合理方法是否可以让用户在他所在的任何 Apple 视图控制器中完成他的任务，然后为用户显示通知？

**还是**关闭 Apple 视图控制器并处理通知，然后将用户放回 Apple 视图控制器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:42:38.303

我不太确定我的理解是否完全正确，但对我来说，听起来你想做这样的事情：

*   如果用户正在您的应用程序中撰写消息并且有传入通知，例如来自 facebook 应用程序的推送通知，您希望通过让 MFMessageComposerViewController 执行某些操作来以某种方式在您的应用程序中处理此事件。

作为对这个请求的回答，我想说明以下几点：

1.  如果你扩展这个类，你应该能够向你的 MFMessageComposerViewController 发送消息（即创建一个名为 MyMessageComposerController 的类并让它扩展标准控制器，并在那里做你需要的任何事情）

2.  但是，你不能对推送通知做任何事情，它来自另一个应用程序并且这个功能内置在 iOS 中，你不能让推送在用户完成输入后到达，它总是会到达并且用户会始终是决定他/她是否应该继续输入或查看通知的人。您唯一能做的就是确保您的应用程序保存用户输入的所有内容，以便他/她在返回您的应用程序时可以继续输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T12:57:22.637

假设您不只是想在消息编辑器上显示 AlertView 或类似的模式，我会执行以下操作：

1.  分配`MFMessageComposeViewControllerDelegate`给作曲家。
2.  像往常一样展示作曲家。
3.  排队/记住作曲家正在播放时收到的通知（通过正常`application:didReceive{Local|Remote}Notification:`消息）
4.  当作曲家关闭时，委托会收到它的`messageComposeViewController:didFinishWithResult:`消息。
5.  使用存储/排队的通知做...无论如何...。

无论您是延迟响应通知，直到用户完成合成还是打断他们，都是一个比较棘手的情况。如果它是一个相对不重要的通知或频繁的通知，我倾向于使用队列/延迟方法。但是对于“重要”通知，我在打断用户方面没有问题。当然，这只是将问题转移到决定重要性的因素上。这在很大程度上取决于应用程序。

# mysql - Mysql数据库改变记录的顺序

> ID：11428457
> 
> 赞同：0
> 
> 时间：2012-07-11T08:22:49.703
> 
> 标签：mysql

在这里，我在 mysql 数据库中有按顺序颠倒的数据。如何更改顺序以便反转默认顺序，即 ASC。主要字段是 ID。并且 ID 是 auto_increment。我需要以相反的顺序更改每条记录的 ID 字段。

例如。假设我在表中有 2 条记录。

```
ID  field
1   field1
2   field2 
```

我想让 field2 有 ID 1 和 field1 有 ID 2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:27:16.120

你可以这样做：

```
ALTER TABLE `table` ORDER BY `ID` DESC 
```

但其糟糕的数据库设计违背了[第一范式](http://en.wikipedia.org/wiki/Database_normalization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:37:11.790

或者您可以将整个表导出到脚本文件中。“sql”，一旦手头有脚本，您就可以将所有（INSERT INTO）向后排列。这需要几分钟，但它的工作原理

1：从您的基础生成脚本..您可以使用 phpmyadmin 或控制台行 mysql 2\. 反转插入命令

基础脚本之前：

```
INSERT INTO example (name, age) VALUES('Sandy Smith', '21' )
INSERT INTO example (name, age) VALUES('peter brad', '38' )
INSERT INTO example (name, age) VALUES('mike alves', '24' ) 
```

基本脚本之后：

```
INSERT INTO example (name, age) VALUES('mike alves', '24' )
INSERT INTO example (name, age) VALUES('peter brad', '38' )
INSERT INTO example (name, age) VALUES('Sandy Smith', '21' ) 
```

它速度较慢，但​​可以清洁吗

OHTER 解决方案 ->

然后您可以尝试这样的事情： - 通过检索所有 id 并使用 ORDER BY 反转，使用原始表中的信息创建一个新表！

```
CREATE TABLE newtable SELECT ID, row1, row2, row3, row4, row5 FROM oldtable ORDER BY id DESC ; 
```

然后删除旧表应该可以正常工作

# jquery - 如果我们可以使用jQuery在HTML Select标签中找到所选值属于某个类别

> ID：11428461
> 
> 赞同：0
> 
> 时间：2012-07-11T08:22:56.627
> 
> 标签：jquery, html, html-select, optgroup

我真的很想知道是否有任何方法可以在 HTML Select Tag 中找到选定选项的选定组。

我想获得所选值的父级，但无法获得正确的解决方案。但我们也不能排除这个选项。

```
<select id="selectName">
    <option value="0">-- Select --</option>
    <optgroup label="Section -- 1">
        <option value="1">One</option>
        <option value="2">Two</option>
        <option value="3">Three</option>
        <option value="4">Four</option>
    </optgroup>
    <optgroup label="Section -- 2">
        <option value="100">Hundred</option>
    </optgroup>
</select> 
```

我集会不想这样写我的代码......

```
$val = $('#selectName').val()

if($val >=1 && $val <= 4){/* ... */}
else if(/*-- another range --*/){/* ... */} 
```

我想知道是否有一种方法可以找到组名。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:27:20.410

以下应该有效：

```
var optgroup = $("#selectName :selected").parent("optgroup");
if (optgroup.length) {
    var label = optgroup.attr("label");
    if (label == " ... ") {
        // do something
    }
} 
```

**演示：http:** [//jsfiddle.net/3Sqjh/](http://jsfiddle.net/3Sqjh/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:29:45.397

你想要这样吗？

```
$("#selectName").change(function(){
    $val = $('#selectName :selected').parent().attr('label');
    alert($val);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:26:38.520

使用所选元素的父组的标签文本创建警报：

```
var $group = $('#selectName option:selected').parent();
alert($group.attr("label")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:47:40.757

```
$('select').change(function(e){
  var group = $('select option:selected').parent('optgroup');
  var groupText = group.attr('label');
}); 
```

[JSBin 上的演示](http://jsbin.com/opehag/edit)

# c# - 在 C# 中，是否可以在运行时确定泛型的类型参数？

> ID：11428465
> 
> 赞同：3
> 
> 时间：2012-07-11T08:23:11.903
> 
> 标签：c#, .net, generics

这是我所拥有的（使用 Rhino Mocks，但这不是问题的核心）：

```
var entityMock = MockRepository.GenerateMock<IEntity>();
this.Cache = MockRepository.GenerateStub<Cache<IEntity>>(); 
```

是否可以更具体地设置类型参数`Cache<T>`？就像是：

```
var entityMock = MockRepository.GenerateMock<IEntity>();
this.Cache = MockRepository.GenerateStub<Cache<typeof(entityMock)>>(); 
```

这当然不会编译。但如果可能的话，我想使用 Rhino Mocks 生成的类型，这是`IEntity`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:28:16.663

您*可以*在运行时使用反射创建一个封闭的泛型类型。问题是您很可能不得不仅使用反射*继续*操作它，因为（鉴于它的类型在编译时未知）您不能将其键入为直接可用的东西。

例如，要创建“某物”列表：

```
public IList CreateList(Type t)
{
    var openListType = typeof(List<>);
    return (IList)openListType.MakeGenericType(t);
} 
```

这个例子说明了几个要点：

1.  如果在编译时指定了“目标类型”，则无法执行此操作。换句话说，`CreateList`不能接受`t`作为泛型类型参数并且仍然允许相同的功能。
2.  在最坏的情况下，不能将新实例键入为`object`. 在这里，我们知道我们将始终创建一个`IList`，所以事情会好一些。

我没有 Rhino Mocks 的经验，但在你的情况下，它会转化为：

```
var entityMock = MockRepository.GenerateMock<IEntity>()
var cacheType = typeof(Cache<>).MakeGenericType(entityMock.GetType());
this.Cache = MockRepository.GenerateStub(cacheType); 
```

...但**只有在**适当的`GenerateStub`过载可用时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:24:42.357

[请注意，虽然提到了 RhinoMocks，但***唯一***具体的部分是`GenerateStub`围绕提供的类型创建具体实现；其余的与 RhinoMocks 无关。]

泛型类型参数在编译时解析 - 如您所知；这不允许在没有反射的情况下将类型作为通用参数内联输入（即：）`var list = new List<typeof(int)>();`。

但是，您**可以**使用反射创建泛型类型。从本质上讲，如果您可以通过以下方式获取动态代理的类型：

```
var entityMock = MockRepository.GenerateMock<IEntity>();
var dynamicType = entityMock.GetType(); 
```

`MockRepository`有 a`GenerateStub`需要 a`Type`和`object[]`参数，所以从上面继续：

```
var cacheType = typeof(Cache<>);
var genericType = cacheType.MakeGenericType(dynamicType);
var stubbed = MockRepository.GenerateStub(genericType, null); 
```

不幸的是，该`stubbed`项目是 type `object`，但正如 Lucero 在评论中所说的那样，可以使用通用协方差来获得比 更有用的类型`object`。我在下面演示这一点。

* * *

根据与 Lucero 的有趣讨论，如果您定义一个新`ICache<out T>`接口来表示 Cache，则通用协方差将允许您将生成的代理转换为基本类型 (of `ICache<IEntity>`)：

```
class Program
{
    static void Main(string[] args)
    {
        // The concrete entity.
        IEntity entityMock = MockRepository.GenerateMock<IEntity>();
        entityMock.Stub(s => s.Name).Return("Adam");

        // The runtime type of the entity, this'll be typeof(a RhinoMocks proxy).
        Type dynamicType = entityMock.GetType();

        // Our open generic type.
        Type cacheType = typeof(ICache<>);

        // Get the generic type of ICache<DynamicProxyForIEntity> (our closed generic type).
        Type  genericType = cacheType.MakeGenericType(dynamicType);

        // Concrete instance of ICache<DynamicProxyForIEntity>.
        object stubbed = MockRepository.GenerateStub(genericType, null);

        // Because of the generic co-variance in ICache<out T>, we can cast our
        // dynamic concrete implementation down to a base representation
        // (hint: try removing <out T> for <T> and it will compile, but not run).
        ICache<IEntity> typedStub = (ICache<IEntity>)stubbed;

        // Stub our interface with our concrete entity.
        typedStub.Stub(s => s.Item).Return(entityMock);

        Console.WriteLine(typedStub.Item.Name); // Prints "Adam".
        Console.ReadLine();
    }
}

public interface ICache<out T>
{
    T Item { get; }
}

public interface IEntity
{
    string Name { get; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T15:39:33.197

如果代码希望基于泛型类型是否满足某些约束来执行不同的操作，特别是如果其中一些操作在泛型类型不满足的情况下甚至无法编译，那么使用类似于`Comparer<T>`和之类的类使用的`EqualityComparer<T>`。诀窍是使用带有泛型参数的静态类，该类`T`将静态委托保存到具有类型参数的方法的静态委托`T`，并且具有静态方法，每个方法都采用可能受约束的泛型类型参数`U`并具有将`U`匹配时与上述委托兼容`T`. 第一次尝试使用静态类或其委托时，泛型类的静态构造函数可以使用反射构造一个委托给应该用于该类型的方法。如果有人试图以违反其通用约束的方式构造一个泛型方法的委托，这样的调用将在运行时失败；由于静态构造函数中的异常非常糟糕，因此应确保使用有效函数构造自己的委托。另一方面，一旦构造了一次委托，所有未来的调用都可以直接通过该委托进行分派，无需进一步的反射或类型检查。

# php - 带类别的 Json 解码演示文稿

> ID：11428473
> 
> 赞同：0
> 
> 时间：2012-07-11T08:23:49.703
> 
> 标签：php, json

我得到了这些 Json 数据：

```
[{"category":"Pizza","name":"Beef Pronto","desc":"Description of Beef Pronton here","price":"12"},
 {"category":"Drink","name":"Cool Delight","desc":"Description of Coold Delight here","price":"5"},
 {"category":"Drink","name":"Cola","desc":"Description of Cola","price":"4"}
 ] 
```

使用 Javascript，我已成功管理数据以呈现如下：

**比萨**

-Beef Pronto：这里对 Beef Pronto 的描述：12

**喝**

-Cool Delight：Coold Delight 的描述：5

-可乐：可乐描述：4

> 任何想法如何用**PHP**做到这一点？

**--> 好的，伙计们，这就是我使用 PHP 的方式：**

```
<?
$listedmenuJSON = '[{"category":"Pizza","name":"Beef Pronto","desc":"Description of Beef Pronton here","price":"12"},
 {"category":"Drink","name":"Cool Delight","desc":"Description of Coold Delight here","price":"5"},
 {"category":"Drink","name":"Cola","desc":"Description of Cola","price":"4"}
 ]';

    $json_decoded = json_decode($listedmenuJSON);
    foreach ($json_decoded as $categoryvalue){
     //echo $categoryvalue->category."<br/>";
     $tempcategoryvalue[] = $categoryvalue->category;
     $arrunique = array_unique($tempcategoryvalue);
     }

    foreach ($arrunique as $tmpcategory){
    echo '<br/><b>'.$tmpcategory.'</b></br>';
     foreach ($json_decoded as $tempo){
      if($tempo->category == $tmpcategory){
       echo $tempo->name.'<br/>';
       echo '<i>'.$tempo->desc.'.......</i>';
       echo $tempo->price.'<br/>';
      }
     }

    }    
?> 
```

它将生成如下：

**Pizza**
Beef Pronto
*这里是 Beef Pronto 的描述.......12*

**喝**
Cool Delight
*这里是Coold Delight 的描述.......5*
可乐 可乐
*的描述............ 4*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:31:41.343

如果您在 PHP 代码中有 json，请使用以下行将 json 转换为 PHP 数组并操作数组以获得所需的输出

```
$array = json_decode($json,TRUE); 
```

在 javascript 用户下面的代码中，将您的 json 转换为数组。

```
var obj = jQuery.parseJSON(responce); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:32:45.073

尝试使用 PHP 函数 'json_decode' ( [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php) )。这将在 PHP 中创建一个关联数组。访问和操作其上的数据应该非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:40:01.330

如果您使用 SQL 服务器，则可以使用“按类别分组”从表中选择

否则，您可以多次验证数组。

SQL：

```
<?php
$query = "SELECT * FROM 'table'
GROUP BY category
having (category=\"Pizza\");"

--SELECT * FROM 'table'
--GROUP BY category
--having (category="Drink"); 
```

如果你在 php 中使用它，你必须使用 sql_query("query")

# android - 广播接收器，检查状态，用 F8 关闭连接

> ID：11428475
> 
> 赞同：1
> 
> 时间：2012-07-11T08:23:59.060
> 
> 标签：android, networking, broadcastreceiver

我正在使用 Eclipse，`android sdk 3.2` 但在`connection is lost`.

首先我检查了网络的类型以确保我理解得很好：

```
ConnectivityManager manager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
            boolean is3g = manager.getNetworkInfo(
                    ConnectivityManager.TYPE_MOBILE)
                    .isConnectedOrConnecting();
            boolean isWifi = manager.getNetworkInfo(
                    ConnectivityManager.TYPE_WIFI)
                    .isConnectedOrConnecting();

            NetworkInfo info = manager.getActiveNetworkInfo();
            if (info != null)
                Toast.makeText(getApplicationContext(), info.getTypeName(),
                        Toast.LENGTH_LONG).show();
            else
                Toast.makeText(getApplicationContext(), "Pas de connexion",
                        Toast.LENGTH_LONG).show();

            if (!is3g)
                Log.i("Network Listener", "DISCONNECTED");
            else
                Log.i("Network Listener", "CONNECTED"); 
```

==> 这是一个移动网络，我已连接

然后我按 F8 或者我做：

```
telnet localhost 5554
gsm data off 
```

停止连接

这是我`dynamic broadcast receiver`的活动：

```
public class ActivityA extends Activity { 
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.query);
this.registerReceiver(this.networkStateReceiver, new IntentFilter(
     ConnectivityManager.CONNECTIVITY_ACTION));

}

BroadcastReceiver networkStateReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        ConnectivityManager connMgr = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
//i have tried several things : State networkState = networkInfo.getState();
// if (networkState.compareTo(State.DISCONNECTED) == 0) ...
        if (networkInfo != null && networkInfo.isConnected()) {
            Toast.makeText(getApplicationContext(), "CONNECTED",
                    Toast.LENGTH_LONG).show();
                   Log.i("Network Listener", "Connected");
        } else {
            Toast.makeText(getApplicationContext(), "DISCONNECTED",
                    Toast.LENGTH_LONG).show();
            Log.i("Network Listener", "Network Type Changed");
            Intent offline = new Intent(AccountInfoActivity.this,
                    OfflineWorkService.class);
            startService(offline);
        }

}; 
```

我的清单：

```
 <uses-permission android:name="android.permission.INTERNET" />
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

问题是：当activityA启动时，我的广播接收到一些东西，它显示“已连接”（日志）和我的吐司。当我手动关闭连接时，什么也没发生。我的服务没有启动，日志消息没有显示，只有 toast 消息有效......

更好的是，当我再次打开连接时 ( `by pressing F8`)，我再次测试连接类型，显示 Toast 消息，但这次 Log 消息不起作用。按 F8 时出现问题。无论如何，我想我错过了广播接收器的一些东西，这并不完全清楚。

请帮我。

# php - PHP：magic_quotes_gpc

> ID：11428478
> 
> 赞同：0
> 
> 时间：2012-07-11T08:24:20.047
> 
> 标签：php, magic-quotes-gpc

根据PHP手册：

> 为 GPC（Get/Post/Cookie）操作设置 magic_quotes 状态。当 magic_quotes 打开时，所有 '（单引号）、"（双引号）、\（反斜杠）和 NUL 都会自动使用反斜杠进行转义。

但这也适用于 $_REQUEST 变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:29:54.553

是的，因为`$_REQUEST`它源自存储在`$_GET`和中`$_POST`的内容`$_COOKIE`。但是，我确信您已经注意到`magic_quotes`以任何方式依赖都被认为是不好的做法，这就是为什么它最终在 PHP 5.4 中被删除的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:27:35.243

$_REQUEST 变量与 GPC 变量相同。

请记住，从 PHP 5.4 开始，magic_quotes_gpc 已从 PHP 中删除。建议您不要依赖它的存在，也不要将其用于新项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:27:51.873

是的，`magic_quotes_gpc`影响**$_GET。$_POST、$_COOKIE、$_REQEUST**。

仅供参考：使用魔术引号是邪恶的并且已被弃用。 [查看官方 PHP 页面](http://php.net/manual/en/security.magicquotes.disabling.php "禁用魔术行情")，了解如何使用变通方法禁用 magic_quotes_gpc 运行时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:29:31.713

是的，但你不应该使用魔术引号。

在您继续之前，请阅读[http://uk.php.net/manual/en/security.magicquotes.whynot.php 。](http://uk.php.net/manual/en/security.magicquotes.whynot.php)

# android - 当用户导航到第二个屏幕到登录屏幕时如何清除用户名和密码字段

> ID：11428489
> 
> 赞同：0
> 
> 时间：2012-07-11T08:25:41.663
> 
> 标签：android, login, android-edittext

我正在制作一个具有登录屏幕的应用程序。我的问题是，如果用户安装了应用程序，那么如果用户第一次输入用户名和密码并单击登录按钮，则用户导航到第二个活动，然后当用户从第二个活动单击后退按钮时，用户名和密码是在第一次活动中仍然存在。如何清除edittext字段。对此表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:29:28.607

只需使用

```
editText.setText(""); 
```

在你的`LoginActivity` `onResume()`方法中。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:39:42.000

在开始其他活动之前（当用户单击登录按钮时），您可以设置用户名和密码编辑文本的文本。

```
username.setText("");
password.setText(""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:34:32.663

你为什么不使用`editTextUsername.setText("");` 并在你的密码中飞行它自动清除，因为你将 inputType 更改为密码。

# git - Git Bash 显示具有非 ASCII 字符的文件已修改

> ID：11428490
> 
> 赞同：1
> 
> 时间：2012-07-11T08:25:43.743
> 
> 标签：git, msysgit, git-extensions

我刚刚安装了一台全新安装了 Windows 7、Git Extensions (2.32) 的新机器，它还安装了 msysGit 1.7.10。

一旦我像这样克隆我们的本地仓库......：
git clone "Y:\SomeRepo"

...运行 git status 会显示一系列文件正在被修改，即使我刚刚克隆了 repo。所有文件都包含非 ASCII 字符，如 Æ、Ø 和 Å。有趣的是，团队中还有其他 4 人，也使用相同的 Git 扩展和 msysGit 版本运行 Win7，我们从未遇到过这个问题。

core.autocrlf 是假的，就像quotepath 是关闭的。所有这些文件都是 .png 的，所以我认为行尾转换不是问题。

关于从哪里开始调试/修复此问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T12:53:11.090

您可能已经使用非 Unicode Git for Windows 版本提交了具有非 ASCII 名称的文件，并且需要[遵循这些说明](https://github.com/msysgit/msysgit/wiki/Git-for-Windows-Unicode-Support#wiki-Migrating_old_Git_for_Windows_repositories)。至于为什么你的一些队友没有看到这一点，也许他们在他们的 Windows 机器上使用了不同的语言环境。

# java - 我如何将用户从 GUI 提供的输入存储到字符串数组中以供将来在 java 中使用

> ID：11428491
> 
> 赞同：0
> 
> 时间：2012-07-11T08:25:48.690
> 
> 标签：java

......

```
public void launchFrame(){

      f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
  f.setSize(500,500);
      f.setVisible(true);
 f.setLocationRelativeTo(null);
JLabel nameL=new JLabel("Title", SwingConstants.LEFT);
String[] FormOptions = {"Choose","Text Field","Password Field","Button","Radio Button","Check Box","Drop Down Menu"};

    String[] NormalOptions = {"Choose","Write Text", "Upload Picture", "Frame", "I-Frame"};
    JTextField nameTF=new JTextField(10);

    final JPanel comboPanel = new JPanel();
    JLabel comboLbl = new JLabel("Form:");
JComboBox forms=new JComboBox(FormOptions);

comboPanel.add(comboLbl);
    comboPanel.add(forms);
comboPanel.add(nameL);
comboPanel.add(nameTF);

    final JPanel comboPanel1 = new JPanel();
    comboPanel1.setVisible(false);
    JLabel comboLbl1 = new JLabel("Normal HTML:");
    JComboBox Normals = new JComboBox(NormalOptions);

    comboPanel1.add(comboLbl1);
    comboPanel1.add(Normals);

    JButton HTML = new JButton( "Form or Normal");

HTML.addActionListener(new ActionListener()
    {
        @Override
        public void actionPerformed(ActionEvent event)
        {
           comboPanel1.setVisible(!comboPanel1.isVisible());
           comboPanel.setVisible(!comboPanel.isVisible());

        }
    });

    f.add(comboPanel, BorderLayout.NORTH);
    f.add(comboPanel1, BorderLayout.CENTER);
    f.add(HTML,BorderLayout.SOUTH);

    f.setVisible(true);

static String[] info = new String[500];//Here i need help               
}

public static void main(String args[]){
      BasicGuiTest gui = new BasicGuiTest();
      gui.launchFrame();
  }
//What Should i do here? I want to get whether the user is choosing form or Normal as 

//well as its options..

private class GetInfo implements ActionListener
{
    public void actionPerformed(ActionEvent ae)
    {

        info[i]=comboPanel.getSelectedItem
}
//Then i will output the string array to a text file.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T16:37:56.563

or, you could avoid reinventing the wheel and use the built in java Preferences API?

[http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html](http://docs.oracle.com/javase/1.4.2/docs/guide/lang/preferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:13:36.333

好的，所以我要做的第一件事就是将 info 设为 ArrayList，而不是 String Array。

```
public static List<String> info = new ArrayList<String>(); 
```

所以你不必担心字符串的长度。然后你可以使用追加到列表

```
info.append(comboPanel.getSelectedItem()); 
```

这是将列表写入文件的代码。

```
FileWriter writer = new FileWriter(new File("C:/filename.txt"));
for(String line : info){
    writer.write(line + "\n");
}
writer.close(); 
```

这回答了你的问题了吗？

# python - 如何在不重新启动守护程序的情况下读取和截断 snmptrapd 日志文件

> ID：11428496
> 
> 赞同：2
> 
> 时间：2012-07-11T08:26:14.900
> 
> 标签：python, linux, logging, io, snmptrapd

我制作了一个执行 nagios 检查的 python 脚本。脚本的功能非常简单，它只是解析日志并匹配一些用于构建 nagios 检查输出的信息。该日志是一个 snmptrapd 日志，它记录来自其他服务器的陷阱，并在`/var/log/snmptrapd`我只用脚本解析它们之后将它们记录下来。为了获得最新的陷阱，我每次阅读后都会从 python 中删除日志。为了保留信息，我做了一个 cron 作业，它以比 nagios 检查间隔小一点的时间间隔将日志内容复制到另一个日志中。我不明白的是为什么日志增长如此之多（我的意思是消息日志，我猜它有 1000 倍的信息更小）。从我在日志中看到的有很多特殊字符，例如`^@`我认为这是通过我从 pyton 操作文件的方式完成的，但看到我有三周的经验，我似乎无法找出问题所在。

脚本代码如下：

```
import sys, os, re

validstring = "OK"
filename = "/var/log/snmptrapd.log"

if os.stat(filename)[6] == 0:
        print validstring
        sys.exit()

else:
        f = open(filename,"r")
        sharestring = ""
        line1 = []
        patte0 = re.compile("[0-9]+-[0-9]+-[0-9]+")
        patte2 = re.compile("NG: [a-zA-Z\s=0-9]+.*")
        for line in f:
                line1 = line.split(" ")
                if re.search(patte0,line1[0]):
                        sharestring = sharestring + line1[1] + " "
                        continue
                result2 = re.search(patte2,line)
                if result2:
                        result22 = result2.group()
                        result22 = result22.replace("NG:","")
                        sharestring = sharestring + result22 + " "
        f.close()
        f1 = open(filename,"w")
        f1.close()
        print sharestring
        sys.exit(2) 
```

~

日志如下所示：

```
2012-07-11 04:17:16 Some IP(via UDP: [this is an ip]:port) TRAP, SNMP v1, community somestring
    SNMPv2-SMI::enterprises.OID Some info which is not necesarry
    SNMPv2-MIB::sysDescrOID = STRING: info which i'm matching 
```

我很确定这与我擦除文件的方式有关，但我无法弄清楚。如果你有一些想法，我会很感兴趣。谢谢你。

作为有关大小的信息，我有 93 行（Vim 这么说），日志占用 161K，这不好，因为行很短。

好的，这与我读取和擦除文件的方式无关。当我擦除它的日志文件时，snmptrapd 守护进程中的某些东西正在执行此操作。我已经修改了我的代码，现在我在打开文件之前将 SIGSTOP 发送到 snmptrapd reight，我对文件进行了修改，然后在完成后发送 SIGCONT，但似乎我遇到了同样的行为。新代码看起来像（不同的部分）：

```
else:
    command = "pidof snmptrapd"
    p=subprocess.Popen(shlex.split(command),stdout=subprocess.PIPE)
    pidstring = p.stdout.readline()
    patte1 = re.compile("[0-9]+")
    pidnr = re.search(patte1,pidstring)
    pid = pidnr.group()
    os.kill(int(pid), SIGSTOP)
    time.sleep(0.5)
    f = open(filename,"r+")
    sharestring = "" 
```

和

```
 sharestring = sharestring + result22 + " "
    f.truncate(0)
    f.close()
    time.sleep(0.5)
    os.kill(int(pid), SIGCONT)
    print sharestring 
```

我正在考虑停止守护进程擦除文件，然后使用适当的权限重新创建它并启动守护进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:47:19.303

# 我不认为你可以，但这里有一些事情可以尝试

### 截断文件

```
f1 = open(filename, 'w')
f1.close() 
```

是删除文件内容的一种骇人听闻的副作用方式，如果其他应用程序打开该文件，则可能会根据底层操作系统引起不希望的副作用。

### 使用文件对象方法 truncate()

[`truncate([size])`](http://docs.python.org/release/2.6.8/library/stdtypes.html?highlight=truncate#file.truncate)

> 截断文件的大小。如果存在可选大小参数，则文件将被截断为（最多）该大小。大小默认为当前位置。当前文件位置没有改变。请注意，如果指定的大小超过了文件的当前大小，则结果取决于平台：可能包括文件可能保持不变、增加到指定的大小，就像用零填充一样，或者增加到指定的大小并带有未定义的新内容。可用性：Windows，许多 Unix 变体。

### 可能唯一的确定性方法是

在脚本开始处停止`snmptrapd`进程，使用正确的`os module`函数`remove`，然后重新创建文件并`snmptrapd`在脚本结束时重新启动守护进程。

```
os.remove(path) 
```

> 移除（删除）文件路径。如果 path 是目录，则会引发 OSError；请参阅下面的 rmdir() 以删除目录。这与下面记录的 unlink() 函数相同。在 Windows 上，尝试删除正在使用的文件会引发异常；在 Unix 上，目录条目被删除，但分配给文件的存储空间在原始文件不再使用之前不可用。

### 共享资源关注

您仍然可能会遇到问题，因为两个进程试图在没有某种锁定机制的情况下争取写入单个文件，并且文件发生了不确定的事情。我打赌你可以发送一个`SIGINT`或类似于你的守护进程的东西，让它重新读取文件或其他东西，检查你的文档。

操作共享资源，尤其是没有独占锁定的文件资源会很麻烦，尤其是在文件系统缓存和数据应用程序缓存的情况下。

# authentication - 在 LifeRay 中以编程方式进行身份验证

> ID：11428498
> 
> 赞同：1
> 
> 时间：2012-07-11T08:26:20.577
> 
> 标签：authentication, liferay, x509

我正在使用 LifeRay 并且需要某种特殊身份验证：我的用户拥有由 Apache Webserver 验证的 x.509 证书。成功验证后，用户被重定向到 Tomcat 和 LifeRay。

现在我要执行以下操作：以编程方式获取用户证书的主题 DN，并登录连接到此 DN 的 LifeRay 用户。

到目前为止，我有以下内容：

*   创建了一个钩子“login.events.pre”，我从证书中获取 DN
*   在 LifeRay 数据库中搜索具有此 DN 的用户（使用 UserLocalServiceUtil.getUserByOpenId()）
*   使用 UserLocalServiceUtil.authenticateByScreenName() 对用户进行身份验证

我现在的问题是：这是执行此操作的“最佳”/最干净的方法，还是我应该使用其他方法来查询 LifeRay 数据库、验证用户等。例如，我可以为 LifeRay 创建一个 Ext-Extensions 而不是钩子。此外，我还发现了一些类似“com.liferay.portlet.login.util.LoginUtil.login”或 User user = PortalUtil.getUser(request); 获取用户。

文档中是否有回答这些问题的地方？API不是那么全面...

# linux - 将命令的输出分配给全局数组而不丢失子shell之后的数组

> ID：11428501
> 
> 赞同：1
> 
> 时间：2012-07-11T08:26:35.817
> 
> 标签：linux, bash

我需要读取我的命令的输出来排列和存储它们以便在我的脚本中使用之后。我的脚本是；

```
 let i=0
  declare -a array
  $PS -ef|$GREP -v grep|$GREP $NAME | $SED -n 's/.*-q\s\([0-9]\+\).*/\1/p' | while read line; do
    array[$i]=$line
    echo ${array[$i]}   
    (( i++ ))
    echo ${#array[@]}           
    done < <($PS -ef|$GREP -v grep|$GREP $NAME | $SED -n 's/.*-q\s\([0-9]\+\).*/\1/p')  
    echo ${#array[@]} 
```

因此，当循环退出时，由于 subshel​​l，数组的大小变为 0。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:01:24.457

您的管道两端似乎有相同的输入：

```
foo | while read line; do
    ...
done <( foo ) 
```

尝试删除第一个，以便`while`循环不会在子 shell 中执行：

```
while read line; do
    ...
done <( foo ) 
```

如果您使用的是 bash 4 或更高版本，则可以将 while 循环替换为调用`readarray`：

```
readarray array <( foo ) 
```

# java - JAVA Lucene 没有在 Field 上给出搜索结果？

> ID：11428505
> 
> 赞同：0
> 
> 时间：2012-07-11T08:26:45.617
> 
> 标签：java, search, lucene

我正在创建一个这样的 Lucene 文档：

```
Document document = new Document();
document.add(new Field(FIELD_FOLDER_PATH,mSearchInput, Field.Store.YES, Field.Index.NOT_ANALYZED ));
Reader reader = new FileReader(file);
document.add(new Field(FIELD_CONTENTS, reader));
indexWriter.addDocument(document); 
```

在对 CONTENTS 执行查询并使用通配符 * 时，我能够获取结果：

```
QueryParser queryParser = new QueryParser (Version.LUCENE_36,FIELD_CONTENTS, analyzer);
Query query = queryParser.parse(searchString+"*"); 
```

但是当我对 FIELD_FOLDER_PATH 使用相同的查询时，我没有得到任何结果：

```
QueryParser queryParser = new QueryParser (Version.LUCENE_36,FIELD_FOLDER_PATH, analyzer);
Query query = queryParser.parse(FolderPath+"*"); 
```

但是，只有当我提供确切的字符串时，我才能获取结果。

我的问题是：为什么我不能使用 (*) 来获取 FIELD_FOLDER_PATH 中的结果？是因为我创建领域的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T17:06:21.583

您应该使用通配符查询来支持这种功能。此链接将有所帮助：

[http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/WildcardQuery.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/core/org/apache/lucene/search/WildcardQuery.html)

因此，您应该做的是创建两个查询，一个使用 queryparser，另一个使用通配符查询，然后在 BooleanQuery 中使用带有“SHOULD”子句的两个查询。

有关布尔查询的详细信息，请访问此链接：

[http://lucene.apache.org/core/old_versioned_docs/versions/3_0_2/api/core/org/apache/lucene/search/BooleanQuery.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_2/api/core/org/apache/lucene/search/BooleanQuery.html)

# lucene - 在 Lucene 中控制合并段

> ID：11428512
> 
> 赞同：2
> 
> 时间：2012-07-11T08:27:14.313
> 
> 标签：lucene, merge, segment

我想在 Lucene 中对段合并进行控制。更准确地说，我有一个每段缓存，每次合并时我都想要一个“回调”并检查哪个段将被合并。

我查看了 IndexWriter 代码，看起来它是索引编写器的内部操作。我也不想破解 IndexWriter。我看到一个名为 MergeScheduler 的接口。实现这个类是最好的主意吗？

你知道怎么做吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:43:31.190

也许你可以继承[`MergePolicy`](http://lucene.apache.org/core/3_6_0/api/core/org/apache/lucene/index/MergePolicy.html)你正在使用的（默认是`TieredMergePolicy`）并通过覆盖这样的方法来拦截要合并的段`findMerges`？

```
MergePolicy.MergeSpecification mergeSpecification = super.findMerges(segmentInfos);

// use information from mergeSpecifiation

return mergeSpecification; 
```

# c# - 清除按钮不应为必填字段 HTML5

> ID：11428518
> 
> 赞同：0
> 
> 时间：2012-07-11T08:27:29.530
> 
> 标签：c#, asp.net, html, button

我创建的表格包括以下代码：

```
 <asp:TextBox ID="txtPhone" required="required" runat="server" placeholder="Phone No. (eg. 999)"
                    CssClass="glowStyle"></asp:TextBox>
    <br />
    <asp:Button ID="btnAddDriver" Text="Add" runat="server" CssClass="button" />
    <br />
    <asp:Button ID="btnCnclAddDriver" Text="Clear" runat="server" 
        CssClass="cancelbutton" onclick="btnCnclAddDriver_Click" />
    </form> 
```

当我单击“清除”按钮时，仍会显示所需的（html5）。如何仅为清除按钮禁用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:31:22.603

你真的需要一个服务器控制来取消吗？在大多数情况下，一个简单`<input type="reset">`的或小的 JavaScript 代码就可以完成这项工作。

~~如果没有，只需添加`CauseValidation="false"`到您的按钮：~~

 ~~```
<asp:Button ID="btnCnclAddDriver" CauseValidation="false" Text="Clear" runat="server" 
    CssClass="cancelbutton" onclick="btnCnclAddDriver_Click" /> 
```~~  ~~（删除建议，因为它适用于 asp.net 验证）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:32:06.103

您可以使用 javascript (jQuery) 清除您的 TextBox：

```
$('txtPhone').val(''); 
```

或 Javascript：

```
 function name()
   {  
       document.getElementById('txtPhone').value = "";
   } 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:34:17.360

您可以将 btnCnclAddDriver 按钮的自动回发选项设​​置为 False。并通过 Ajax 执行您的服务器端代码 (btnCnclAddDriver_Click)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:42:41.993

将 formnovalidate 属性添加到您的取消按钮。

请检查[这个](http://www.w3.org/TR/html5/attributes-common-to-form-controls.html#attr-fs-formnovalidate)~~

# c - 在函数中传递矩阵 (C)

> ID：11428526
> 
> 赞同：15
> 
> 时间：2012-07-11T08:28:00.143
> 
> 标签：c, matrix

我在将矩阵传递给 C 中的函数时遇到问题。我想创建一个函数：

```
void ins (int *matrix, int row, int column); 
```

但我注意到，与向量相比，矩阵给了我一个错误。我怎样才能将我的矩阵传递给一个函数呢？

编辑->有代码：

```
// Matrix

#include <stdio.h>
#define SIZE 100

void ins (int *matrix, int row, int column);
void print (int *matrix, int row, int column);

int main ()
{
    int mat[SIZE][SIZE];
    int row, col;

    printf("Input rows: ");
    scanf  ("%d", &row);
    printf("Input columns: ");
    scanf  ("%d", &col);

    printf ("Input data: \n");
    ins(mat, row, col);

    printf ("You entered: ");
    print(mat, row, col);

    return 0;
}

void ins (int *matrix, int row, int column);
{
    int i, j;

    for (i = 0; i < row; i++)
    {
        for (j = 0; j < column; j++)
        {
            printf ("Row %d column %d: ", i+1, j+1);
            scanf  ("%d", &matrix[i][j]);
        }
    }
}

void print (int *matrix, int row, int column)
{
    int i;
    int j;

    for(i=0; i<row; i++)
    {
        for(j=0; j<column; j++)
        {
            printf("%d ", matrix[i][j]);
        }
        printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-11T08:29:21.543

您需要传递一个指针，其间接级别 ( `*`) 与矩阵的维数一样多。

例如，如果您的矩阵是二维的（例如 10 x 100），那么：

```
void ins (int **matrix, int row, int column); 
```

如果您有固定尺寸（例如 100），您还可以执行以下操作：

```
void ins (int (*matrix)[100], int row, int column); 
```

或者在你的情况下：

```
void ins (int (*matrix)[SIZE], int row, int column); 
```

如果您的两个尺寸都是固定的：

```
void ins (int matrix[10][100], int row, int column); 
```

或者在你的情况下：

```
void ins (int matrix[SIZE][SIZE], int row, int column); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-11T09:10:53.440

如果您有现代 C 编译器，您可以对任何大小的二维矩阵执行以下操作

```
void ins (size_t rows, size_t columns, int matrix[rows][columns]); 
```

重要的是尺寸出现在矩阵之前，因此它们在那里是已知的。

在您的函数内部，您可以轻松访问元素`matrix[i][j]`，因为编译器正在为您进行所有索引计算。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T09:37:05.780

也可以将第一个维度留空，与 (*matrix) 相同：

```
void ins (int matrix[][100], int row, int column); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T19:22:53.383

使用 malloc 函数并创建动态分配的数组并使用 2d 数组执行您想做的任何事情的更好方法：

```
#include <stdio.h>
#include <stdlib.h>
#include <stdio.h>

void fun(int **arr,int m,int n)
{
    int i, j;
    for (i = 0; i < m; i++)
    {
    for (j = 0; j < n; j++)
        {
            scanf("%d", &arr[i][j]);
        }
    }

}

int main()
{
    int i,j,m,n;
    printf("enter order of matrix(m*n)");
    scanf("%d*%d",&m,&n);
    int **a=(int **)malloc(m*sizeof(int));
    for(i=0;i<n;i++)
        a[i]=(int *)malloc(n*sizeof(int));

    fun(a,m,n);
    for (i = 0; i < m; i++)
    {
    for (j = 0; j < n; j++)
        {
        printf("%d ", a[i][j]);
        }
        printf("\n");

    }
    return 0;
}

 output:
     #include <stdio.h>
#include <stdlib.h>
#include <stdio.h>

void fun(int **arr,int m,int n)
{
    int i, j;
    for (i = 0; i < m; i++)
    {
    for (j = 0; j < n; j++)
        {
            scanf("%d", &arr[i][j]);
        }
    }

}

int main()
{
    int i,j,m,n;
    printf("enter order of matrix(m*n)");
    scanf("%d*%d",&m,&n);
    int **a=(int **)malloc(m*sizeof(int));
    for(i=0;i<n;i++)
        a[i]=(int *)malloc(n*sizeof(int));

    fun(a,m,n);
    for (i = 0; i < m; i++)
    {
    for (j = 0; j < n; j++)
        {
        printf("%d ", a[i][j]);
        }
        printf("\n");

    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T14:42:41.593

你也可以试试这个：

```
void inputmat(int r,int c,int arr[r * sizeof(int)][c * sizeof(int)]) 
```

# sql - 更改 msdb sysjobs 中的名称列是否安全？

> ID：11428528
> 
> 赞同：1
> 
> 时间：2012-07-11T08:28:05.287
> 
> 标签：sql, sql-server, sql-server-2008

我需要重命名许多类似的命名作业名称，因此我想运行更新语句来`name`更改`msdb..sysjobs`.

编辑系统表是我非常清楚的事情，但更改工作名称并没有那么危险，因为我认为 job_id 才是最重要的。在这种情况下这样做安全吗？

我正在使用 sql server 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:28:42.457

当您在多个环境中运行相同的作业时，最好按名称而不是 ID 来引用作业，因为在每个环境中都会使用不同的 ID 创建具有相同名称的作业。

如果更改作业的名称，请确保用于操作这些作业的任何脚本也使用新名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:10:17.610

我认为没有什么可担心的，你可以修改它。请[在此处找到有关 sysjobs 的](http://msdn.microsoft.com/en-us/library/ms189817.aspx)详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T11:01:30.447

只是重命名它是不保存的。使用 sql profiler 显示，使用对象 exlorer 重命名包将启动几个过程。它将使用创建一个新包`sp_add_dtspackage`，稍后使用`sp_drop_dtspackage`. 包 id 虽然是使用参数设置的，但随机设置似乎确实存在潜在风险。

# objective-c - 在objective-c中使用块递归

> ID：11428531
> 
> 赞同：3
> 
> 时间：2012-07-11T08:28:13.003
> 
> 标签：objective-c, ios, objective-c-blocks

在执行涉及 Objective-c 块的递归时，我在我的 iOS 应用程序中收到 EXC_BAD_ACCESS 信号。这是简化的代码：

```
- (void)problematicMethod:(FriendInfo*)friendInfo onComplete:(void(^)(NSString*))onComplete1 {

[self doSomethingWithFriend:friendInfo onComplete:^(Response* response) {
    switch (response.status) {
        case IS_OK:
            onComplete1(message);
            break;

        case ISNT_OK:
            // Recursively calls the method until a different response is received 
            [self problematicMethod:friendInfo onComplete:onComplete1];
            break;          

        default:
            break;
    }
}];
} 
```

所以基本上，有*问题*的方法，在这个简化版本中，调用*doSomethingWithFriend:onComplete:*。当该方法完成时（*onComplete*），如果一切正常，则调用原始的*onComplete1*块，这工作正常。

但是如果出现*问题*，需要再次调用problemMethod（递归部分），当第一次发生这种情况时，我会立即收到EXC_BAD_ACCESS 信号。

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:43:16.793

你是如何创建你的块的？请记住，您必须将它从堆栈移动到堆。

例子：

```
 `void(^onCompleteBlock)(NSString*) = [[^(NSString* param) {
  //...block code
}] copy] autorelease];

[self problematicMethod:friendInfo onCompleteBlock];` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T01:23:39.633

如果 response.status 值为 ISNT_OK 你永远不会完成递归调用该函数。`

# mysql - 快速更新不同的行

> ID：11428534
> 
> 赞同：0
> 
> 时间：2012-07-11T08:28:20.417
> 
> 标签：mysql, sql

我有一张桌子，有点如下：

Name1 (Key)|Name2(Key)|总计|LastUpdate

将有数十万条这样的记录。

现在非常频繁地，我的主程序将查询源以获取更新的值。然后它将更新总数和最后一次更新。它可能必须更新数百个这样的行。

目前我有这个：

```
Update mytable SET Total=[...] AND LastUpdate=[....] WHERE Name1='x' AND Name2='y';
Update mytable SET ..... 
```

我想知道是否有更快的更新行的方法（类似于如何同时插入多行）。

Totals 将完全不同，但每次更新的 LastUpdate 时间将相同。

**更新澄清：**

对总计的更改不仅仅是一个增量，也不取决于当前值 - 因此在这方面它不是确定性的。源每秒左右为我提供一个新值，我必须输入一个新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:44:10.313

如果单独进行更新的速度很慢，也许你可以做这样的事情

```
CREATE TABLE mytable_updates
(
  Name1 VARCHAR(50) NOT NULL,
  Name2 VARCHAR(50) NOT NULL,
  total_increase INT NOT NULL
  PRIMARY KEY(Name1, Name2)
)

INSERT INTO mytable_updates VALUES ('x', 'y', 5), ('x', 'z', 3);
...

UPDATE mytable_updates 
LEFT JOIN mytable USING (Name1, Name2)
SET
  Total = Total + total_increase,
  LastUpdate = NOW(); 
```

# java - 休眠异常

> ID：11428538
> 
> 赞同：0
> 
> 时间：2012-07-11T08:28:29.393
> 
> 标签：java, hibernate

当我执行这个方法时

```
@SuppressWarnings("deprecation")
    public void importFluxEquipement() throws HibernateException, SQLException
    {
        Session s = HibernateUtil.getCurrentSession();
        CallableStatement cs = s.connection().prepareCall("{call PK_COMPAS_FLUX_ISU.IMPORT_EQUIPEMENT_EAI()}");
        cs.execute();
        log.info("- Intégration du flux ISU Equipement");
    } 
```

我有这个错误

> 错误 - org.hibernate.HibernateException：没有活动事务的连接无效

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:32:19.143

你需要调用`Transaction.beginTransaction()`方法。

```
Session s = HibernateUtil.getCurrentSession();
Transaction trans=s.beginTransaction();
CallableStatement cs = s.connection().prepareCall("{call PK_COMPAS_FLUX_ISU.IMPORT_EQUIPEMENT_EAI()}");
cs.execute();
trans.commit(); 
```

# php - 嵌套的 foreach 循环数组重置

> ID：11428542
> 
> 赞同：0
> 
> 时间：2012-07-11T08:28:39.893
> 
> 标签：php, foreach

例如，如何阻止嵌套的 foreach 循环重置内部数组指针

```
foreach ($example as $example2)
{
foreach ($xample as $xample2);
{
}
} 
```

例如，如果 $example & $xample 包含数组 (1,2,3)

我想做这样的事情

```
foreach ($example as $example2)
{
do something with array[1]
foreach ($xample as $xample2);
{
do something else with array[1]
}
} 
```

然后继续 2,3 等...希望我的问题很清楚，因为据我了解，内部数组指针在第二个循环期间被重置[http://us2.php.net/manual/en/control-structures .foreach.php](http://us2.php.net/manual/en/control-structures.foreach.php)

编辑所以这就是现在发生的事情说 $example 包含以下值 1,2,3 & $xample 包含相同的值

```
foreach ($example as $example2)
{
echo ($example2)
foreach $xample as xample2)
{
echo ($xample2)
}
} 
```

输出看起来像这样，第一个循环输出 1,2,3，第二个循环只输出 1,1,1 我想要的是，第一个循环 1,2,3 第二个循环 1,2,3

EDIT 2 代码粘贴在这里[http://codepad.org/r1py8HR5](http://codepad.org/r1py8HR5) 输出显示有 5 $examples & 7 $xample 被回显并且 &xample 包含相同的 $fname2 7 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:35:24.593

每个数组都有自己的数组指针。因此，嵌套`foreach`循环不需要您采取任何预防措施，它就像您编写它一样工作。

**更新：**

作为对您的编辑的回应，我认为您的错误在其他地方。我重新创建了您的示例，它似乎可以按照您的意愿工作（请参阅[http://codepad.org/nJrZqCoO](http://codepad.org/nJrZqCoO)）。

# java - 源可调试JVM

> ID：11428546
> 
> 赞同：1
> 
> 时间：2012-07-11T08:29:05.287
> 
> 标签：java, jvm, jikes

我想学习JVM的内部结构。为此，我选择了 Jikes RVM 来使用，但问题是我无法调试源代码，因为它不支持它。我的问题是，是否有一些可以调试的开源 JVM 以查看它如何与类文件一起工作。我真的需要一些关于它的好信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:31:30.887

好吧，由于 Oracle JDK 是开源的，这可能是一个不错的起点： http: [//openjdk.java.net/](http://openjdk.java.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:45:54.650

JVM 的内部结构在 JVM 之间是不同的，从其中获得的知识可能无法用于其他 JVM。

如果您想了解运行时库（所有 java.* 类）是如何实现的，大多数 JDK 发行版（不是 JRE 发行版）中都有一个 src.zip。如果您使用 Eclipse，请将其设置为使用该 JDK 作为 JRE，您可以从您自己的程序开始直接在各种类中导航。

# cassandra - 应用补丁来修复 cassandra 中的错误

> ID：11428549
> 
> 赞同：2
> 
> 时间：2012-07-11T08:29:24.043
> 
> 标签：cassandra

嗨，我尝试修复 cassandra 中的错误

[https://issues.apache.org/jira/browse/CASSANDRA-4432](https://issues.apache.org/jira/browse/CASSANDRA-4432)

看最后一条评论

> 集成在 Cassandra #1673 中（参见 [https://builds.apache.org/job/Cassandra/1673/](https://builds.apache.org/job/Cassandra/1673/)）将 System.currentTimeMillis() 更改为 FBUtilities.timestampMicros()，与 CASSANDRA-4432 相关（修订版 346ac03c29cd1fe763bd01077a5e0c59f12181b3）结果 = ABORTED xedin ：文件：src/java/org/apache/cassandra/service/MigrationManager.java

我如何解决它？

应用补丁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:43:17.103

您必须获取您的 Cassandra 版本的源代码，然后通过命令应用补丁`git apply`。

像这样的东西应该工作：

```
git clone http://git-wip-us.apache.org/repos/asf/cassandra.git --branch cassandra-1.1.1 cassandra
cd cassandra
wget https://issues.apache.org/jira/secure/attachment/12535872/CASSANDRA-4432.patch
git apply CASSANDRA-4432.patch 
```

# .net - 有特殊要求的 Quartz Cron Trigger

> ID：11428551
> 
> 赞同：1
> 
> 时间：2012-07-11T08:29:28.237
> 
> 标签：.net, quartz.net, crontrigger

您将如何定义 Quartz 作业，具有以下要求：它必须在每个工作日触发（这很容易），除了指定的第 n 天两天（如每月 15 日至 16 日或 1 日至 2 日）。我考虑过使用两个触发器，但老实说，我不确定如何按照我需要的方式制作 cron 表达式。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:30:49.220

尝试使用 cron 触发器并向作业添加[日历](http://quartznet.sourceforge.net/apidoc/2.0/html/topic1793.html)。

# java - Java timer&paintcomponent 问题

> ID：11428555
> 
> 赞同：2
> 
> 时间：2012-07-11T08:29:51.813
> 
> 标签：java, swing, timer, jpanel, paintcomponent

嗨，我正在尝试让一个红色框出现在 JPanel 的底部。我希望这个框移动到屏幕的一个角落并停止然后开始向另一个方向移动，但是我无法让框停止以下是我一直在使用的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.Timer;

public class JavaApplication13 extends JPanel {

    public static void main(String[] args) {
        JFrame rough = new JFrame("Panamr");
        rough.setVisible(true);
        rough.setLocation(1, 1);
        rough.setSize(500, 500);
        rough.setContentPane(mamals);
    }

    public static int iomega(int x, int y) {
        if (y == 1) {
            diget = -5;
            time.stop();
        }
        if (y == 0) {
            diget = 5;
        }
        return diget;
    }
    static JavaApplication13 mamals = new JavaApplication13();

    JavaApplication13() {
        setBackground(Color.red);
    }
    static int oy = 400;
    static int ox = 200;
    static int diget;
    static Timer time = new Timer(100, new ActionListener() {

        public int xy = 1;

        @Override
        public void actionPerformed(ActionEvent e) {
            iomega(ox, xy);
            if (ox == 500) {
                xy = 1;
            }
            if (ox == 0) {
                xy = 0;
            }
            ox = ox - iomega(ox, oy);
            /*if(ox!=500){
            ox=ox-diget;
            if(ox==0){
            diget=-5;}
            else {
            diget=5;
            }            
            }*/
        }
    });
    boolean test = true;

    public void paint(Graphics g) {
        super.paint(g);
        g.setColor(Color.black);
        g.fillRect(ox, oy, 60, 60);
        time.start();
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:01:24.423

您的框架/面板尺寸的坐标已关闭，您应该动态计算它，或者有一个`final`值。接下来你的 xy=0 和 xy=1 应该像这样交换：

```
 if (ox == 400) {//this was a larger number then the panel/frame so it went offscreen
            xy = 0;//swapped
        }
        if (ox == 0) {
           xy = 1;//swapped
        } 
```

# imdb - 任何 IMDB API 来获取用户的评分历史？

> ID：11428557
> 
> 赞同：18
> 
> 时间：2012-07-11T08:29:59.530
> 
> 标签：imdb

我需要能够将[IMDB](http://www.imdb.com/)用户的电影评级导入我的网站。有没有用于此目的的 API？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-17T12:50:00.497

简短的回答是（目前）没有用于此目的的 API。

如果您需要获取用户的电影评分，我认为最适合您的解决方案是登录 IMDB，进入用户个人资料页面，点击评分，然后在页面底部点击**CSV 导出**。这应该包含您正在寻找的所有数据，并且格式良好。坏消息是，您必须为每个想要获得评级的用户执行这些步骤。没有自动程序来获取它们。

# php - 访客位置邮政编码 PHP

> ID：11428558
> 
> 赞同：2
> 
> 时间：2012-07-11T08:30:12.503
> 
> 标签：php, geolocation

在我的页面上，我有许多注册用户，每个用户都有一个邮政编码存储在我表中的行中。

我想知道它是否可能，如果可以，如何获取我的网站访问者的邮政编码，然后向他们展示最近的用户访问我的表中的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:35:29.740

您可以使用 HTML 5 [Geolocation](https://developer.mozilla.org/en/Using_geolocation)要求他们向您提供他们的位置*。*然后您可以根据经度/纬度查找最近的邮政编码。

您可以在此处获取北美的长/纬度免费邮政/zip 数据：

[http://geocoder.ca/?freedata=1](http://geocoder.ca/?freedata=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:34:23.657

如果您可以准确地确定访问用户的坐标，则可以使用[谷歌反向地理编码 API](https://developers.google.com/maps/documentation/geocoding/)将坐标转换为地址并使用该地址的邮政编码。

但是，确定访问者的准确坐标可能很困难。您将不得不依赖诸如[http://www.maxmind.com/app/php](http://www.maxmind.com/app/php)之类的 GeoLocation api或执行[HTML5 GeoLocation API](http://en.wikipedia.org/wiki/W3C_Geolocation_API)的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:58:31.203

有趣的是，建立在其他人所说的基础上，也许这个例子会有所帮助；）

```
<?php 
//example a google IP
$user_info = get_ip_info('74.125.224.72');
$google_info = get_google_data($user_info['latitude'],$user_info['longitude']);

$user = array_merge($user_info,$google_info);

//See below for result
print_r($user);

function get_google_data($long,$lat){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,'http://maps.googleapis.com/maps/api/geocode/json?latlng='.$long.','.$lat.'&sensor=true');
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $data = curl_exec($ch);
    curl_close($ch);
    return json_decode($data,true);
}

function get_ip_info($ip = NULL){
    if(empty($ip)) $ip = $_SERVER['REMOTE_ADDR'];

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,'http://www.ipaddresslocation.org/ip-address-locator.php');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    curl_setopt($ch, CURLOPT_POST,true);
    curl_setopt($ch, CURLOPT_POSTFIELDS,array('ip'=>$ip));
    $data = curl_exec($ch);
    curl_close($ch);
    preg_match_all('/<i>([a-z\s]+)\:<\/i>\s+<b>(.*)<\/b>/im',$data,$matches,PREG_SET_ORDER);
    if(count($matches)==0)return false;
    $return = array();
    $labels = array(
    'Hostname'          => 'host',
    'IP Country'        => 'country',
    'IP Country Code'   => 'country_code',
    'IP Continent'      => 'continent',
    'IP Region'         => 'region',
    'IP Latitude'       => 'latitude',
    'IP Longitude'      => 'longitude',
    'Organization'      => 'organization',
    'ISP Provider'      => 'isp');
    foreach($matches as $info){
        if(isset($info[2]) && !is_null($labels[$info[1]])){
            $return[$labels[$info[1]]]=$info[2];
        }
    }
    return (count($return))?$return:false;
}

/**
 * Result:
 * 
 * 
 * Array
(
    [host] => nuq04s07-in-f8.1e100.net
    [country] => United States
    [country_code] => USA
    [continent] => North America
    [region] => California
    [latitude] => 37.4192
    [longitude] => -122.0574
    [organization] => Google
    [isp] => Google
    [results] => Array
        (
            [0] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => Sevryns Rd
                                    [short_name] => Sevryns Rd
                                    [types] => Array
                                        (
                                            [0] => route
                                        )

                                )

                            [1] => Array
                                (
                                    [long_name] => Mountain View
                                    [short_name] => Mountain View
                                    [types] => Array
                                        (
                                            [0] => locality
                                            [1] => political
                                        )

                                )

                            [2] => Array
                                (
                                    [long_name] => Santa Clara
                                    [short_name] => Santa Clara
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_2
                                            [1] => political
                                        )

                                )

                            [3] => Array
                                (
                                    [long_name] => California
                                    [short_name] => CA
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [4] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                            [5] => Array
                                (
                                    [long_name] => 94043
                                    [short_name] => 94043
                                    [types] => Array
                                        (
                                            [0] => postal_code
                                        )

                                )

                        )

                    [formatted_address] => Sevryns Rd, Mountain View, CA 94043, USA
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.4197948
                                            [lng] => -122.0577433
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.4175854
                                            [lng] => -122.0590077
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 37.4187254
                                    [lng] => -122.0583059
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.420039080292
                                            [lng] => -122.05702651971
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.417341119709
                                            [lng] => -122.05972448029
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => route
                        )

                )

            [1] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => Moffett Federal Airfield
                                    [short_name] => Moffett Federal Airfield
                                    [types] => Array
                                        (
                                            [0] => establishment
                                        )

                                )

                            [1] => Array
                                (
                                    [long_name] => Cummins Ave
                                    [short_name] => Cummins Ave
                                    [types] => Array
                                        (
                                            [0] => route
                                        )

                                )

                            [2] => Array
                                (
                                    [long_name] => Mountain View
                                    [short_name] => Mountain View
                                    [types] => Array
                                        (
                                            [0] => locality
                                            [1] => political
                                        )

                                )

                            [3] => Array
                                (
                                    [long_name] => Santa Clara
                                    [short_name] => Santa Clara
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_2
                                            [1] => political
                                        )

                                )

                            [4] => Array
                                (
                                    [long_name] => California
                                    [short_name] => CA
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [5] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                            [6] => Array
                                (
                                    [long_name] => 94043
                                    [short_name] => 94043
                                    [types] => Array
                                        (
                                            [0] => postal_code
                                        )

                                )

                        )

                    [formatted_address] => Moffett Federal Airfield (NUQ), Cummins Ave, Mountain View, CA 94043, USA
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.4298225
                                            [lng] => -122.0375869
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.4019577
                                            [lng] => -122.0589996
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 37.4199527
                                    [lng] => -122.0584702
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.4298225
                                            [lng] => -122.0375869
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.4019577
                                            [lng] => -122.0589996
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => airport
                            [1] => transit_station
                            [2] => establishment
                        )

                )

            [2] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => 94043
                                    [short_name] => 94043
                                    [types] => Array
                                        (
                                            [0] => postal_code
                                        )

                                )

                            [1] => Array
                                (
                                    [long_name] => Mountain View
                                    [short_name] => Mountain View
                                    [types] => Array
                                        (
                                            [0] => locality
                                            [1] => political
                                        )

                                )

                            [2] => Array
                                (
                                    [long_name] => California
                                    [short_name] => CA
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [3] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                        )

                    [formatted_address] => Mountain View, CA 94043, USA
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.464087
                                            [lng] => -122.03599
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.3857439
                                            [lng] => -122.10842
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 37.428434
                                    [lng] => -122.0723816
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.464087
                                            [lng] => -122.03599
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 37.3857439
                                            [lng] => -122.10842
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => postal_code
                        )

                )

            [3] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => Santa Clara
                                    [short_name] => Santa Clara
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_2
                                            [1] => political
                                        )

                                )

                            [1] => Array
                                (
                                    [long_name] => California
                                    [short_name] => CA
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [2] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                        )

                    [formatted_address] => Santa Clara, CA, USA
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.484637
                                            [lng] => -121.208178
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 36.894155
                                            [lng] => -122.202476
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 37.2938907
                                    [lng] => -121.7195459
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 37.484637
                                            [lng] => -121.208178
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 36.894155
                                            [lng] => -122.202476
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => administrative_area_level_2
                            [1] => political
                        )

                )

            [4] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => California
                                    [short_name] => CA
                                    [types] => Array
                                        (
                                            [0] => administrative_area_level_1
                                            [1] => political
                                        )

                                )

                            [1] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                        )

                    [formatted_address] => California, USA
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 42.0095169
                                            [lng] => -114.131211
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 32.5342071
                                            [lng] => -124.4096195
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 36.778261
                                    [lng] => -119.4179324
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 42.0095169
                                            [lng] => -114.131211
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 32.5342071
                                            [lng] => -124.4096195
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => administrative_area_level_1
                            [1] => political
                        )

                )

            [5] => Array
                (
                    [address_components] => Array
                        (
                            [0] => Array
                                (
                                    [long_name] => United States
                                    [short_name] => US
                                    [types] => Array
                                        (
                                            [0] => country
                                            [1] => political
                                        )

                                )

                        )

                    [formatted_address] => United States
                    [geometry] => Array
                        (
                            [bounds] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 90
                                            [lng] => 180
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => -90
                                            [lng] => -180
                                        )

                                )

                            [location] => Array
                                (
                                    [lat] => 37.09024
                                    [lng] => -95.712891
                                )

                            [location_type] => APPROXIMATE
                            [viewport] => Array
                                (
                                    [northeast] => Array
                                        (
                                            [lat] => 49.38
                                            [lng] => -66.94
                                        )

                                    [southwest] => Array
                                        (
                                            [lat] => 25.82
                                            [lng] => -124.39
                                        )

                                )

                        )

                    [types] => Array
                        (
                            [0] => country
                            [1] => political
                        )

                )

        )

    [status] => OK
)

 */

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:37:54.533

您需要为每条记录填充纬度/经度，然后使用谷歌地图查找最近的用户，我相信以下链接会对您有所帮助。

[使用 Google Autocomplete API 根据位置名称获取纬度和经度](https://stackoverflow.com/questions/3490622/get-latitude-and-longitude-based-on-location-name-google-maps-api)

[Google Maps Api v3 - 查找最近的标记](https://stackoverflow.com/questions/4057665/google-maps-api-v3-find-nearest-markers)

# drupal - 使用规则防止内容创建/编辑

> ID：11428559
> 
> 赞同：1
> 
> 时间：2012-07-11T08:30:26.827
> 
> 标签：drupal, drupal-7, drupal-rules

是否可以仅根据规则避免内容创建/编辑？

例如，重定向到主页或其他页面的“节点保存之前”的规则。

这会阻止节点保存还是只是保存然后重定向？如果它确实阻止了，它*是否*像伪造提交到真实保存网址的表单一样可破解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:51:25.670

您可以操作节点权限并自定义它们以覆盖`admin/people/permissions`使用[hook_node_access](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_access/7) ()设置的默认值

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T14:31:18.970

规则表单模块 - [https://drupal.org/project/rules_forms](https://drupal.org/project/rules_forms) - 有帮助吗？

# iphone - xmppframework iphone 无法将用户添加到已创建的房间（群聊）

> ID：11428562
> 
> 赞同：2
> 
> 时间：2012-07-11T08:30:56.547
> 
> 标签：iphone, xcode, xmppframework

我正在尝试在 iphone 中进行群聊，我能够成功使用单聊。

我已经使用以下代码成功创建了新房间。

```
XMPPRoomCoreDataStorage *rosterstorage = [[XMPPRoomCoreDataStorage alloc] init];
XMPPRoom *xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:rosterstorage jid:[XMPPJID jidWithString:@"viratsroom@conference.praveens-mac-mini.local"] dispatchQueue:dispatch_get_main_queue()];

[xmppRoom activate:[[self appDelegate] xmppStream]];
if ([xmppRoom preJoinWithNickname:@"viratsRoom"]) {
  NSLog(@"room created");
  [xmppRoom joinRoomUsingNickname:@"viratsroom11" history:nil];
}
[xmppRoom fetchConfigurationForm];
[xmppRoom configureRoomUsingOptions:nil];
[xmppRoom addDelegate:[self appDelegate] delegateQueue:dispatch_get_main_queue()]; 
```

现在在该组的用户下，openfire 服务器上显示了一个用户，这是正确的。我的问题是，1）在哪里以及如何处理邀请消息加入群组？2）我尝试使用以下代码加入上面的同一组

```
XMPPRoomCoreDataStorage *rosterstorage = [[XMPPRoomCoreDataStorage alloc] init];
XMPPRoom *xmppRoom = [[XMPPRoom alloc] initWithRoomStorage:rosterstorage jid:[XMPPJID jidWithString:@"viratsroom@conference.praveens-mac-mini.local"] dispatchQueue:dispatch_get_main_queue()];
[xmppRoom activate:[[self appDelegate] xmppStream]];
[xmppRoom joinRoomUsingNickname:@"viratsroom11" history:nil];
[xmppRoom fetchConfigurationForm];
[xmppRoom configureRoomUsingOptions:nil];
[xmppRoom addDelegate:[self appDelegate] delegateQueue:dispatch_get_main_queue()]; 
```

房间名称现在显示在我的离线用户列表中。现在 openfire 服务器上这个房间下的用户应该增加到两个，因为又有一个用户加入了这个房间，但它仍然只显示一个以前的用户成员。

我错过了什么吗？代码中的任何错误？请帮忙！谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T11:22:20.380

我明白了，房间没有正确配置，因此在创建房间后立即调用它的所有问题都不起作用-

```
[xmppRoom fetchConfigurationForm]; 
[xmppRoom configureRoomUsingOptions:nil]; 
```

创建房间需要一点时间，然后您可以配置房间。

```
[self performSelector:@selector(ConfigureNewRoom:) withObject:nil afterDelay:2]; 
```

:)

# android - eclipse卡在正在运行的程序

> ID：11428564
> 
> 赞同：0
> 
> 时间：2012-07-11T08:31:17.213
> 
> 标签：android, eclipse

这是我结束日食任务后的照片。

![在此处输入图像描述](../Images/f4e05e143f774f2c0cbe3dba4197cf4e.png)

我的 Android 程序没有错误，在这个问题之前一切都很好。当我在我的程序中添加一些代码时发生了这种情况。单击运行按钮后它卡住了。当我运行手机调试程序时也会发生这种情况。其他程序都运行良好，只有一个卡住了。

我卡住的意思是 eclipse keep show 的进度条，`launching myprogram (100%)`但它没有用完模拟器。

![在此处输入图像描述](../Images/6238c485ce146a140bdc87c6f7add4f4.png)

当我尝试删除并再次导入它时，似乎有一个无法删除的 classes.dex 文件，我必须重新启动计算机才能允许删除，并且我必须强制程序关闭。我在这个网站上搜索过，他们说保持打开模拟器，但它对我不起作用。

下面是我添加的连接编码。

```
 //check internet connection
private boolean chkConnectionStatus(){
    ConnectivityManager connMgr = (ConnectivityManager)
    this.getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi =
    connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile =
    connMgr.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if( wifi.isAvailable() ){     
      return true;
     }
        else if( mobile.isAvailable() ){      
          return true;        
     }
     else
     { 
         Toast.makeText(this, "Check your internet" , Toast.LENGTH_LONG).show();
         return false;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T02:28:43.713

问题已解决，是卡巴斯基杀毒软件引起的。谢谢大家的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:57:15.400

*   回溯您所做的更改。（查找运行良好的以前版本的代码，右键单击 .java 文件 -> 比较 -> 本地历史记录。）

-> 在您进行的每次更改后构建。这将帮助您跟踪问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:57:54.580

如果您无法在 Windows 上删除文件，则说明某个进程正在使用它。您可以使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)之类的工具来查找有问题的进程并将其杀死。

当 Eclipse 不想启动时，尝试使用选项从命令提示符运行它，`-console -consoleLog -debug`然后将信息打印到控制台中，这可能有助于找到问题。

**[编辑]**当模拟器挂起时，你不应该杀死 Eclipse。相反，终止模拟器进程以“解锁”Eclipse。如果在控制台视图（在 Eclipse 中）单击“终止进程”不起作用，请使用[Process Explorer](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)之类的工具来查找 Eclipse 的子进程。

杀死Eclipse有两个问题：

1.  它可能不会杀死子进程。这将导致锁定文件
2.  杀死 Eclipse 会损坏您的工作区。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T08:57:15.470

尝试在启用日志记录的情况下运行 Eclipse（使用 -console -consoleLog -debug 作为上面提到的 Aaron）。还可以使用以下选项来获取有关 Eclipse 中到底出了什么问题的更多信息（有关更多详细信息，请参阅 ( [http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html](http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html) )：

> Eclipse 有一个记录问题的日志文件，通常这是 Eclipse 开发人员在您报告问题时要求的第一件事。日志文件可以在几个地方找到：
> 
> **工作区日志**- 这是日志文件最常见的位置，它存储在您工作区的元数据目录中。查看工作区/.metadata/.log。
> 
> **配置日志**- 有时信息会记录在配置日志文件而不是工作区日志中。（特别是如果工作区尚未创建，没有，或者无法创建）检查您的配置区域的配置日志文件。（配置/.log）

还可以尝试使用 java.exe 而不是 javaw.exe 运行 Eclipse（例如，通过将 eclipse -vm \jre\bin\java.exe 添加到 eclipse.ini 中），以便更好地观察 Eclipse 运行时发生的情况。

上面提到的链接（[http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html](http://www.eclipse.org/eclipse/platform-core/documents/3.1/debug.html)）应该为您提供足够的选项来了解 Eclipse 中发生了什么。

# c# - 带有匈牙利文化信息的 String.Compare() 对特定字符串不正确

> ID：11428571
> 
> 赞同：7
> 
> 时间：2012-07-11T08:31:36.143
> 
> 标签：c#

带有匈牙利 CultureInfo 的 String.Compare() 对特定字符串不正确：

```
if (0 == String.Compare(@"ny", @"nY", true, new CultureInfo("hu-HU")))
  Console.WriteLine("Equal");
else
  Console.WriteLine("Not equal"); 
```

当然，我想得到“平等”的答案，但事实并非如此。如果我更改字符串它可以正常工作（例如对于“abc”和“ABC”，它会打印“Equal”）这似乎是特定符号的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:17:29.350

你会期待什么？在匈牙利语中，“ny”被认为是**一个**字母。它可以写成“ny”、“Ny”或“NY”。但绝不是“nY”。这按预期工作：

```
 var hu = new CultureInfo("hu-HU");
  Console.WriteLine(String.Compare("Ny", "NY", true, hu));
  Console.WriteLine(String.Compare("ny", "NY", true, hu));
  Console.WriteLine(String.Compare("ny", "Ny", true, hu)); 
```

在匈牙利语中，除了外来词和一些名字外，他们没有字母“y”。但是当您说 时`"nY"`，这不可能是“ny”字母。所以也许 .NET 将其视为**两个**字母。

有人懂匈牙利语吗？听听他们的意见可能会很有趣。但我很确定字符串“nY”永远不会出现在“自然”匈牙利语中。

# java - 在居中的jpanel上写一个字符串

> ID：11428573
> 
> 赞同：4
> 
> 时间：2012-07-11T08:31:39.883
> 
> 标签：java, swing, fonts, jpanel

我会在 JPanel 上写一个比其他元素更大的字符串。这可能是简单地绘制字符串的方法？有一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-11T08:49:39.250

您可以将文本添加为​​ JLabel 组件并更改其字体大小。

```
public static void main(String[] args) {
    NewJFrame1 frame = new NewJFrame1();
    frame.setLayout(new GridBagLayout());
    JPanel panel = new JPanel();
    JLabel jlabel = new JLabel("This is a label");
    jlabel.setFont(new Font("Verdana",1,20));
    panel.add(jlabel);
    panel.setBorder(new LineBorder(Color.BLACK)); // make it easy to see
    frame.add(panel, new GridBagConstraints());
    frame.setSize(400, 400);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(NewJFrame1.EXIT_ON_CLOSE);
    frame.setVisible(true);
} 
```

代码将运行并如下所示： ![图形用户界面](../Images/e8d26f4bc13dcc1834739db0588f823d.png)

另请参阅[Java 布局管理器垂直中心](https://stackoverflow.com/questions/897924/java-layout-manager-vertical-center)以获取更多信息

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:17:57.783

JLabel 支持 HTML 3.2 格式，因此如果您不想弄乱字体，可以使用*标题标签。*

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class HtmlHeadersSample extends JFrame {

    public HtmlHeadersSample() {
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(300,200);
    setLocation(100, 100);
    JLabel label1 = new JLabel();
    label1.setText("simple text");
    label1.setBounds(0, 0, 200, 50);
    JLabel label2 = new JLabel();
    label2.setText("<html><h1>header1 text</h1></html>");
    label2.setBounds(0, 20, 200, 50);
    JLabel label3 = new JLabel();
    label3.setText("<html><h2>header2 text</h2></html>");
    label3.setBounds(0, 40, 200, 50);
    JLabel label4 = new JLabel();
    label4.setText("<html><h3>header3 text</h3></html>");
    label4.setBounds(0, 60, 200, 50);

    add(label1);
    add(label2);
    add(label3);
    add(label4);

    setVisible(true);
    }

    public static void main(String[] args) {
        new HtmlHeadersSample();

    }

} 
```

这是它的样子：

![这是它的样子](../Images/7bd9c1eadc0ed536a8f84131a87c0e91.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T08:48:08.277

只需设置字体的大小

```
 JLabel bigLabel = new JLabel("Bigger text");
    bigLabel.setFont(new Font("Arial", 0, 30)); 
```

# bash - 用于从文本文件解析 ip:port 的 Shell 脚本

> ID：11428579
> 
> 赞同：2
> 
> 时间：2012-07-11T08:32:08.287
> 
> 标签：bash, shell, text-parsing

我每天都会收到一个带有 ip:port 的文本文件，每行一个，例如：

```
11.22.33.44:80
22.33.44.55:8080
33.44.55.66:7777 
```

我想在两个不同的变量中解析第一个 ip 和端口，然后将它们写入另一个文件，等待使用这些变量的程序的执行，循环这个循环以将所有 ip:port 传递给文件并执行程序。

我怎样才能做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T10:06:59.340

一个纯粹的 bash 解决方案：

```
while IFS=: read ip port; do
    echo $ip $port
done < in.txt 
```

这样做的好处是允许您在 while 循环内设置在循环完成后仍然可用的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:37:49.833

```
cat in.txt | sed -e "s/:/ /" | while read ip port
do
  echo $ip $port # or do something with it
done 
```

# php - 选择了哪个 OR 语句？

> ID：11428583
> 
> 赞同：0
> 
> 时间：2012-07-11T08:32:23.943
> 
> 标签：php, mysql, sql

我如何知道选择了哪个 OR 语句？我希望 fetch 显示选择的 colour.col。

```
$parsed = array();
$result = mysql_query("SELECT *
FROM colour
LEFT JOIN shape ON colour.id = shape.id
WHERE shape.col1 = 'square' AND  colour.col1 = 'blue'
OR shape.col1 = 'square' AND  colour.col2 = 'pink'
OR shape.col1 = 'circle' AND  colour.col3 = 'red'
OR shape.col1 = 'triangle' AND  colour.col4 = 'yellow'
OR shape.col1 = 'rectangle' AND  colour.col5 = 'green'
");

while($row = mysql_fetch_array($result))
{ 
echo "<tr>";
echo "<td>" . $row[col1] . "</td>";

**which colour column was selected?**
I would like to see the column header here (colour.col1,colour.col2...) not the value    (pink,green...)

echo "</tr>";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:39:54.000

使用额外的列来指示所选颜色：

```
SELECT *, 
       case when shape.col1 = 'square' and colour.col1 = 'blue'
            then 'blue' 
            when shape.col1 = 'square' and colour.col2 = 'pink'
            then 'pink' 
            ...
       end as selected_color
FROM colour
where ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:38:54.793

```
$result = mysql_query("SELECT * FROM colour LEFT JOIN shape ON colour.id = shape.id
WHERE (shape.col1 = 'square' AND  colour.col1 = 'blue') 
OR (shape.col1 = 'square' AND  colour.col2 = 'pink') 
OR (shape.col1 = 'circle' AND  colour.col3 = 'red') 
OR (shape.col1 = 'triangle' AND  colour.col4 = 'yellow') 
OR (shape.col1 = 'rectangle' AND  colour.col5 = 'green')
"); 
```

我想应该是这样的......也许你可以在sql中尝试一下^^

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:42:17.057

我想它会帮助你！使用**mysql_fetch_row**

```
$result = mysql_query("SELECT id,email FROM people WHERE id = '42'");
if (!$result) {
    echo 'err: ' . mysql_error();
    exit;
}
$row = mysql_fetch_row($result);

echo $row[0]; // 42
echo $row[1]; // email 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-11T08:35:36.913

像下面这样正确地格式化你的查询，你就会知道。

```
$result = mysql_query("SELECT *
FROM colour
LEFT JOIN shape ON colour.id = shape.id
WHERE (shape.col1 = 'square' AND  colour.col1 = 'blue')
OR (shape.col1 = 'square' AND  colour.col2 = 'pink')
OR (shape.col1 = 'circle' AND  colour.col3 = 'red')
OR (shape.col1 = 'triangle' AND  colour.col4 = 'yellow')
OR (shape.col1 = 'rectangle' AND  colour.col5 = 'green')
"); 
```

# java - AsyncTask 不是异步的？

> ID：11428585
> 
> 赞同：0
> 
> 时间：2012-07-11T08:32:27.960
> 
> 标签：java, android, user-interface, android-asynctask

在 AsyncTask 完成之前，我无法使用 GUI。我没有认识到在“onCreate”或“onCreateOptionsMenu”方法中发布 execute() 之间有什么区别。你知道出了什么问题吗？谢谢你的帮助。

```
package com.test11;

import java.util.concurrent.ExecutionException;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class TestActitivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test_actitivity);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_test_actitivity, menu);

        try
        {
            int t = new TestTask().execute().get();
        }

        catch (InterruptedException e)
        {
            e.printStackTrace();
        }

        catch (ExecutionException e)
        {
            e.printStackTrace();
        }

        return true;
    }

    class TestTask extends AsyncTask<Void, Void, Integer>
    {
        public Integer doInBackground(Void...voids)
        {
            try
            {
                Thread.sleep(10000);
            }

            catch(Exception e)
            {
                e.printStackTrace();
            }

            return 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:43:38.940

你执行你的任务是这样的：

```
new TestTask().execute().get(); 
```

你到底在这里做什么？您创建一个新的任务实例。然后你运行它。然后你调用`get()`你的任务，它[会等到这个任务的计算完成](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)来返回它的值。这意味着`onCreate()`or`onCreateOptionsMenu()`被阻塞，直到第二个线程完成。如果您删除`get()`，您的任务将不会阻止 UI。

如果要使用结果，则应[`onPostExecute()`](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)在 AsyncTask 中覆盖，而不是使用`get()`. `onPostExecute()`在 UI 线程中运行，并允许您使用结果轻松操作 UI。例如，如果你想在文本视图中显示你的结果，你可以使用这样的实现：

```
@Override
public void onPostExecute(Integer result) {
    TextView tv = (TextView) findViewById(R.id.sampletext);
    tv.setText("Result was " + result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:40:46.963

阅读文档[`get`](http://developer.android.com/reference/android/os/AsyncTask.html#get%28%29)：

> 如有必要，等待计算完成，然后检索其结果。

您几乎不需要在`AsyncTask`. 只要打电话`execute`。

# javascript - Node.js 中的 URL 路由

> ID：11428588
> 
> 赞同：6
> 
> 时间：2012-07-11T08:32:39.367
> 
> 标签：javascript, node.js

完成的家庭作业：

[节点入门书](http://www.nodebeginner.org)

[我如何开始使用 Node.js [关闭]](https://stackoverflow.com/questions/2353818/how-do-i-get-started-with-node-js)

[在 Node 中构建处理程序](https://stackoverflow.com/questions/8143762/routing-requests-and-structuring-response-handlers-in-node)

背景故事：我想尝试编写自己的框架，但遇到了一些麻烦，很可能是因为没有完全理解它。

我想要实现的是如下所示的语法：

```
var app = require('./app'); //this part is understood and it works in my current code.
app.get('/someUrl', function(){ //do stuff here });
app.post('/someOtherUrl', function(){ //do stuff here }); 
```

我知道 Express 框架具有相同的语法，但阅读它们的源代码仍然让我难以理解。

这可能是一项微不足道的任务，但我根本无法制作它。

试图`require('./app');`在应用程序更深的文件中生成一个未定义的对象，所以我猜测服务器是一个单例对象。

那么我尝试了什么？

我当前的代码看起来像这样，不知何故我觉得这是要走的路，但我显然不能这样做。

我省略了所有`require();`语句以使其更具可读性。

**server.js：**

```
var app = module.exports = {
    preProcess: function onRequest(request, response){
        processor.preRequest(request); //this object adds methods on the request object
        var path = urllib.parse(request.url).pathname;
        router.route(urls, path, request, response);
    },
    createServer: function() {
        console.log("Server start up done.");
        return this.server = http.createServer(this.preProcess);
    }
};

exports.app = app; 
```

在撰写本文时，我正在尝试用一种`get()`方法扩展这个对象。

**index.js：**

```
var app = require('./server');
app.createServer().listen('1337'); 
```

该`router.route()`位基本上将请求向前发送到应用程序和 router.js 文件中，我做了一些魔术并将请求向前路由到映射（到目前为止）到 /urlThatWasRequested 的函数

这是我想留下的行为。我知道这可能是一个很高的要求，但我的所有代码都很容易丢弃，而且我不害怕重写整个代码库，因为这是我自己的项目。

我希望这足以解释我的问题，否则请说出我应该添加的内容以使这一点更清楚。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T08:57:22.620

我不确定你的问题是什么，但这里有一些想法：

**1）**您在此处创建循环引用：

```
var app = module.exports = {
    // some other code
}
exports.app = app; 
```

您添加`app`为`app`. 不需要最后一行。

**2）**您需要将处理程序保存在`app`. 你可以尝试这样的事情：

```
var app = module.exports = {
    handlers : [],
    route : function(url, fn) {
        this.handlers.push({ url: url, fn: fn });
    },
    preProcess: function onRequest(request, response){
        processor.preRequest(request);
        var path = urllib.parse(request.url).pathname;
        var l = this.handlers.length, handler;
        for (var i = 0; i < l; i++) {
            handler = this.handlers[i];
            if (handler.url == path)
                return handler.fn(request, response);
        }
        throw new Error('404 - route does not exist!');
    },
    // some other code
} 
```

请注意，您可以更改此行：以正则表达式`if (handler.url == path)`的方式进行测试。当然，您可以实现和变体，但根据我的经验，检查请求是否在处理程序中或*在*处理程序内部更容易。现在您可以像这样使用上面的代码：`handler.url``path``.get``.post``GET``POST`

 *```
app.route('/someUrl', function(req, res){ //do stuff here }); 
```

另一件事是我向您展示的代码只触发它匹配的给定 URL的**第一个处理程序。**您可能想要制作涉及许多处理程序（即中间件）的更复杂的路由。在这种情况下，架构会有所不同，例如：

```
preProcess: function onRequest(request, response){
    var self = this;
    processor.preRequest(request);
    var path = urllib.parse(request.url).pathname;
    var l = self.handlers.length,
        index = 0,
        handler;
    var call_handler = function() {
        var matched_handler;
        while (index < l) {
            handler = self.handlers[index];
            if (handler.url == path) {
                matched_handler = handler;
                break;
            }
            index++;
        }
        if (matched_handler)
             matched_handler.fn(request, response, function() {
                 // Use process.nextTick to make it a bit more scalable.
                 process.nextTick(call_handler);
             });
        else
             throw new Error('404: no route matching URL!');
     };
     call_handler();
}, 
```

现在在您的路线内，您可以使用

```
app.route('/someUrl', function(req, res, next){ 
    //do stuff here
    next(); // <--- this will take you to the next handler
}); 
```

这会将您带到另一个处理程序（如果没有更多处理程序，则抛出异常）。

**3）**关于这些话：

> 试图要求（'./app'）; 在应用程序更深处的文件中会产生一个未定义的对象，所以我猜测服务器是一个单例对象。

这不是真的。`require`总是返回对模块对象的引用。如果你看到`undefined`，那么你搞砸了其他东西（改变了模块本身？）。

**最后说明：**我希望它有所帮助。编写自己的框架可能是一项艰巨的工作，特别是因为已经有像 Express 这样的优秀框架。不过祝你好运！

**编辑**

实现`.get`和`.set`方法其实并不难。你只需要改变`route`这样的功能：

```
route : function(url, fn, type) {
    this.handlers.push({ url: url, fn: fn, type: type });
},
get : function(url, fn) {
    this.route(url, fn, 'GET');
},
post : function(url, fn) {
    this.route(url, fn, 'POST');
}, 
```

然后在路由算法中检查是否`type`定义了属性。如果不是，则使用该路由（`undefined`类型表示：始终路由）。否则另外检查请求的方法是否匹配类型。你完成了！*

# ios - 可达性类无法正常用于 VPN 连接

> ID：11428590
> 
> 赞同：7
> 
> 时间：2012-07-11T08:32:41.390
> 
> 标签：ios, vpn, reachability

我正在开发一个需要 VPN 连接以进行数据同步的应用程序。我正在使用可达性类来检查主机可用性。
@Functionality :- 当应用程序通过**Junos Pulse**应用程序连接到 VPN 时，如果 VPN 连接丢失，数据同步应该继续，它应该抛出警报消息。现在它适用于下面给出的场景。
@工作场景：- VPN 最初已连接，我完成了同步，然后手动从 Junos Pulse 断开 VPN。现在我正在尝试再次同步它正在引发预期的警报。
@问题场景：-我最初完成了同步并让应用程序空闲以自动断开 VPN。现在VPN消失后，我正在尝试再次同步。它不会通过 VPN 不存在的警报。它尝试同步功能并失败，因为没有 VPN 就无法访问服务器。

在互联网上搜索它的解决方案让我筋疲力尽。我在这里粘贴我的代码片段。任何建议都受到高度赞赏。

```
-(BOOL)checkHostAvailability
{   
Reachability *objReach = [Reachability reachabilityWithHostName:[self hostServer]];
NetworkStatus hostAvailability = [objReach currentReachabilityStatus];
if(hostAvailability == ReachableViaWiFi || hostAvailability == ReachableViaWWAN) {
    RLog(@"Host is Reachable");
    return YES;
}
return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-30T14:29:37.557

好像iOS有bug。当您使用蜂窝连接（或 WiFi）连接 VPN，然后切换到 WiFi（或蜂窝）时，系统不会检测到这一点。Reachability 不会发布任何通知，因为 iOS 仍然认为您尚未切换界面。

我设法通过以下方式重现它：

1.  使用 NetworkExtension 框架在 3G 上连接 VPN，禁用按需。
2.  切换到 WiFi 网络。
3.  从 WiFi 路由器上拔下以太网电缆，因此路由器无法共享 Internet。
4.  检查具有活动 VPN 的设备上是否有 Internet。

它就在那里。这意味着，所有流量都来自蜂窝网络。

# java - 使用 Netty 保存 RTSP 流

> ID：11428594
> 
> 赞同：2
> 
> 时间：2012-07-11T08:32:46.583
> 
> 标签：java, netty, rtsp, rtsp-client

我需要在本地保存/捕获一些通过 RTSP 可用的音频/视频流。搜索了一些解决方案，并了解 Netty 对此有支持。

有人可以提供一个简单的例子吗？

# c++ - QT 半透明窗口和远程桌面

> ID：11428597
> 
> 赞同：5
> 
> 时间：2012-07-11T08:32:56.357
> 
> 标签：c++, windows, qt, qml, aero

我正在为某些部分使用 QML 创建一个 Qt/C++ 应用程序。在 windows 下，我想使用 ExtendFrameIntoClientArea 的半透明窗口，如我的窗口类的这个片段中所示。

```
#ifdef Q_WS_WIN
    if ( QSysInfo::windowsVersion() == QSysInfo::WV_VISTA ||
         QSysInfo::windowsVersion() == QSysInfo::WV_WINDOWS7 )
    {
        EnableBlurBehindWidget(this, true);
        ExtendFrameIntoClientArea(this);
    }
#else 
```

该代码运行良好，但有一个例外。如果关闭透明窗口系统，背景会变黑，并且作为我的 UI 的一部分是透明的，它也会变暗。登录到运行应用程序的远程计算机时也会发生同样的事情，即使透明窗口系统立即重新初始化，背景也会保持黑色，直到再次执行上述代码。这在这张图片中得到了展示：[失败的渲染（在背景中）和正确的（在前面）的比较。](https://i.stack.imgur.com/qNVv5.jpg)

问题是找到一个信号来连接重新初始化透明窗口，或者更好地检测窗口何时被透明绘制并相应地绘制 UI。也欢迎任何替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T13:35:03.923

在研究了 Qt 和[MSDN Aero 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969527%28v=vs.85%29.aspx)之后，我想出了一个两步解决方案。通过覆盖`winEvent`我的主窗口的方法，我能够接收到每次启用或禁用半透明窗口系统时触发的信号。

```
#define WM_DWMCOMPOSITIONCHANGED        0x031E

bool MainWindow::winEvent(MSG *message, long *result) {
    if ( message->message == WM_DWMCOMPOSITIONCHANGED ) {
        // window manager signaled change in composition
        return true;
    }
    return false;
} 
```

这让我非常接近，但它并没有告诉我 DWM 当前是否正在绘制透明窗口。通过使用`dwmapi.dll`，我能够找到一个完全可以做到这一点的方法，并且可以像下面这样访问它：

```
// QtDwmApi.cpp
extern "C"
{
    typedef HRESULT (WINAPI *t_DwmIsCompositionEnabled)(BOOL *pfEnabled);
}

bool DwmIsCompositionEnabled() {
    HMODULE shell;

    shell = LoadLibrary(L"dwmapi.dll");
    if (shell) {
        BOOL enabled;
        t_DwmIsCompositionEnabled is_composition_enabled = \
              reinterpret_cast<t_DwmIsCompositionEnabled>(
                  GetProcAddress (shell, "DwmIsCompositionEnabled")
                  );
        is_composition_enabled(&enabled);

        FreeLibrary (shell);

        if ( enabled ) {
            return true;
        } else {
            return false;
        }
    }
    return false;
} 
```

我的实现现在能够对 Aero 中的变化做出反应并相应地绘制 GUI。通过远程桌面登录时，窗口也会在可用的情况下使用透明度绘制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T07:15:48.623

```
The function should be written as follows to avoid the GPA failure

// QtDwmApi.cpp
extern "C"
{
    typedef HRESULT (WINAPI *t_DwmIsCompositionEnabled)(BOOL *pfEnabled);
}

bool DwmIsCompositionEnabled() {
    HMODULE shell;
    BOOL enabled=false;

    shell = LoadLibrary(L"dwmapi.dll");
    if (shell) {
        t_DwmIsCompositionEnabled is_composition_enabled = \
              reinterpret_cast<t_DwmIsCompositionEnabled>(
                  GetProcAddress (shell, "DwmIsCompositionEnabled")
                  );
        if (is_composition_enabled)
            is_composition_enabled(&enabled);

        FreeLibrary (shell);
   }
    return enabled;
} 
```

# haskell - Haskell 中的 NLP 解析器

> ID：11428601
> 
> 赞同：13
> 
> 时间：2012-07-11T08:33:01.580
> 
> 标签：haskell, nlp

Haskell 是否有一个好的（a）自然语言解析器（b）词性标注器（c）nlp 库（a la python 的 nltk）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T09:14:12.003

看看黑客：

*   [黑客#自然语言处理](http://hackage.haskell.org/packages/archive/pkg-list.html#cat:natural%20language%20processing)

和

*   [道程序：交互式知识库，自然语言解释器](http://hackage.haskell.org/package/Dao)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T18:42:25.220

尝试[sequor](http://hackage.haskell.org/package/sequor)的 POS 标记器。您也可以尝试[brillig](http://hackage.haskell.org/package/brillig)，我的 Brill 标记器的玩具实现，但真正的 sequor 可能会更好。

我不知道任何解析器。我已经开始研究一个名为[chartparser](http://darcsden.com/kowey/chartparser)的包，它有一个 CKY 和早期实现（用于 CFG）以及一个交互式调试器，但我从来没有真正开始完成它或发布它。

[在Haskell NLP](http://projects.haskell.org/nlp/)列表中询问可能是值得的。正如 dbhelix 所建议的那样，没有万能的库，但请看看 Hackage

# python - Django-celery：将请求对象传递给工作人员

> ID：11428602
> 
> 赞同：6
> 
> 时间：2012-07-11T08:33:07.480
> 
> 标签：python, python-2.7, celery, django-celery

我如何将 django 请求对象传递给 celery worker。当尝试传递请求对象时，它会引发错误

```
Can't Pickle Input Objects 
```

似乎 celery 序列化了传递给 worker 的任何参数。我尝试使用其他序列化方法，如 JSON。

```
CELERY_TASK_SERIALIZER = "JSON" 
```

但它不起作用。

是否可以配置 celery 使其不会序列化数据。或者我可以在传递给worker之前将请求对象转换为字符串，然后再转换回worker中的对象吗？

提前致谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T09:26:57.963

您不能腌制 Django 的请求对象（有关详细信息，请参阅[此问题）。](https://stackoverflow.com/questions/3103638/pickling-django-request-objects)相反，您应该将所需的请求对象中的相关信息传递给 Celery 任务。

将其他信息传递给 Celery 任务应该没有问题，因为大多数对象都可以毫无问题地腌制。

# jquery - Jquery 嵌套上下文菜单

> ID：11428603
> 
> 赞同：1
> 
> 时间：2012-07-11T08:33:08.750
> 
> 标签：jquery, jquery-ui

有没有人设法为上下文菜单找到一个好的 jquery 插件，它支持嵌套上下文菜单并与所有浏览器（尤其是 ie 和 firefox）兼容？

以防阅读的人可能遇到类似的问题 - 就我个人而言，我需要在用户右键单击表格行时出现上下文菜单。因此，在右键单击一行时，除了显示上下文菜单外，我还需要启用背景选择（即在我的情况下为行选择）。我提到这一点的原因是我已经尝试过的特定插件不允许这样做。

任何帮助将不胜感激。

# sas - SAS：如何按组选择条件观察

> ID：11428609
> 
> 赞同：0
> 
> 时间：2012-07-11T08:33:26.390
> 
> 标签：sas

我有一个 SAS 数据集，已根据需要对其进行排序。我想将它分成 BY 组，并且对于每个组，输出每个观察值，直到特定列中第一次出现特定值。

```
ID 号 C1 年 2 C3 日期 (DD/MM/YYYY)
-------------------------------------------------- --------      
AB123 4 B4 2008E OC 09/04/2008
AB123 3 B4 2008E EL 09/04/2008
AB123 2 B4 2008E ZZ 09/04/2008
AB123 1 B4 2008E OC 09/04/2008
AB123 0 B4 2008E ZZ 09/04/2008
AB123 1 B4 2008E OC 06/02/2008
AB123 0 B4 2008E ZZ 06/02/2008

```

这是一个 BY 组：数据集按 ID、C1、Year2 分组，并按 ID、C1、Year2、Date(desc)、No(desc) 排序。ID、C1 和 Year2 的其他实例可能出现在数据集中的任何位置，但 3 个变量定义了每个 BY 组。

我想输出每个 BY 组的所有观察结果，直到并包括 C3 中第一次出现的 ZZ。所以上面我想要前 3 个观察结果输出（或标记），然后转到下一个 BY 组。

任何帮助将不胜感激。如果您需要有关问题的更多详细信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:33:28.370

这是一种应该有效的方法。

```
data have;
input ID $ No C1 $ Year2 $ C3 $ Date :DDMMYY10.;
format date DDMMYY10.;
cards;
AB123   4   B4  2008E   OC  09/04/2008
AB123   3   B4  2008E   EL  09/04/2008
AB123   2   B4  2008E   ZZ  09/04/2008
AB123   1   B4  2008E   OC  09/04/2008
AB123   0   B4  2008E   ZZ  09/04/2008
AB123   1   B4  2008E   OC  06/02/2008
AB123   0   B4  2008E   ZZ  06/02/2008
;
run;

data want (drop=stopflag);
set have;
by id c1 year2;
retain stopflag;
if max(first.id,first.c1,first.year2)=1 then stopflag=0;
if c3='ZZ' and stopflag=0 then do;
    output;
    stopflag=1;
end;
if stopflag=0 then output;
run; 
```

# java - arraylist 没有在单独的循环方法中正确打印？包装类或循环应该归咎于？

> ID：11428614
> 
> 赞同：1
> 
> 时间：2012-07-11T08:34:16.523
> 
> 标签：java, arraylist

对于我的项目，我有一个数组列表供用户在一种方法中输入他们想要的任何名称，只要它不停止。然后在一个单独的方法中，我刚刚输入的值必须再次调用，所以我可以为每个名称输入更多信息。

例子：

1.  输入姓名：
2.  姓名：鲍勃
3.  姓名：乔
4.  名称：停止这会触发另一种方法来提示更多信息：

5.  鲍勃：输入年龄：输入地址：

6.  乔：输入年龄：输入地址：

    但是，现在，arraylist 没有正确打印出来，并且我得到了某些名称的重复，而其他名称没有出现在第二种方法中。此外，第二种方法中的循环不会结束。我输入了我输入的名称的信息，但我一直收到提示“名称：”并且没有实际的 arraylist 值。我怀疑我的循环有问题，但我不太知道如何修复它？我还认为问题可能与我如何使用包装器将值放入数组列表有关，但我不知道如何解决这个问题。

在第二种方法中，我尝试用第二种方法中的单独计数器交换计数器变量以跟踪数组列表中的顺序，但这似乎没有什么区别。在第一种方法中，我尝试用不同的布尔while循环交换循环，直接向上while（！input.equals（“Stop”）），前两个选项内部的for循环计数器，if循环，以及上述的一些组合。

这是我的代码

`Scanner console = new Scanner(System.in); private ArrayList<Directory> nameList; //i have to use object oriented programming to store values in the Directory Class public int i;`

第一种方法：

```
private void addName() 
{
    Scanner LocalInput = new Scanner(System.in);
    Directory buffer = null;
    String ID = null;

    System.out.println("Enter Station Designations Below, Enter Stop to quit");
    boolean breaker = false;
    while(breaker ==false)
    {
        System.out.print("Name:  ");
        ID = (LocalInput.nextLine());
        if(ID.equals("Stop"))
            breaker = true;
        else
            buffer = new Directory(ID); 
            nameList.add(buffer); 
    }
} 
```

第二种方法：

```
private void getInfo()
{
    Scanner LocalInput = new Scanner(System.in);

    Directory buffer;
    buffer = nameList.get(i); 
    double age; String address;

    System.out.println("Enter Temperatures below...");
    System.out.println("" + nameList.get(i));

    for (i = 0; i < nameList.size(); i++) 
    {

        System.out.println("Name: " + buffer.GetID()); //there's a getter and setter in the Directory class
        System.out.println( "Age:\t");
        age = LocalInput.nextDouble();
        System.out.print( "Address:\t");   
        address = LocalInput.nextLine();
        buffer= new Directory(age, address);
        nameList.add(buffer);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:35:54.940

**第一种方法的批评**

我还没有仔细看，但我强烈怀疑这是问题所在：

```
if(ID.equals("Stop"))
    breaker = true;
else
    buffer = new Directory(ID); 
    nameList.add(buffer); 
```

您似乎希望最后一条语句仅在 ID 不等于“停止”时执行，但实际上它*总是*会执行。与（比如说）Python 不同，空格在 Java 中是无关紧要的。如果要将语句视为块，则需要大括号：

```
if(ID.equals("Stop"))
    breaker = true;
else {
    buffer = new Directory(ID); 
    nameList.add(buffer); 
} 
```

*就我个人而言，我会在两个*部分周围放置大括号：

```
if (ID.equals("Stop")) {
    breaker = true;
} else {
    buffer = new Directory(ID); 
    nameList.add(buffer); 
} 
```

...并且很可能摆脱一些无关紧要的`buffer`变量：

```
if (ID.equals("Stop")) {
    breaker = true;
} else {
    nameList.add(new Directory(ID));
} 
```

我*还将*摆脱该`breaker`变量，并限制`ID`（也更改其名称以符合正常约定）的范围，结果是：

```
while (true) {
    System.out.print("Name:  ");
    string id = LocalInput.nextLine();
    if (id.equals("Stop")) {
        break;
    }
    nameList.add(new Directory(ID));
} 
```

**批评第二种方法**

目前这真的很奇怪。完全不清楚`i`变量的声明位置，或者为什么只获取`buffer`一次，或者为什么只是添加到现有列表而不是改变现有对象。我怀疑你真的想要：

```
for (Directory entry : nameList) {
    System.out.println("Name: " + entry.GetID());
    System.out.println( "Age:\t");
    double age = LocalInput.nextDouble();
    entry.setAge(age);
    System.out.print( "Address:\t");   
    String address = LocalInput.nextLine();
    entry.setAddress(address);
} 
```

请注意，您当前的循环将一直持续到`i`等于`nameList.size()`- 但您总是在*增加*循环中的大小，因此您永远不会终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:45:09.443

```
private void getInfo()
{
    Scanner LocalInput = new Scanner(System.in);
    double age; String address;

    for (Directory name : nameList) {
    System.out.println("Name: " + name .GetID());
    System.out.println( "Age:\t");
    double age = LocalInput.nextDouble();
    name.setAge(age);
    System.out.print( "Address:\t");   
    String address = LocalInput.nextLine();
    name.setAddress(address);
}
} 
```

get方法应该是这样的

并且添加必须是 -

```
private void addName() 
{
    Scanner LocalInput = new Scanner(System.in);
    Directory buffer = null;
    String ID = null;

    System.out.println("Enter Station Designations Below, Enter Stop to quit");
    boolean breaker = false;
    while(breaker ==false)
    {
        System.out.print("Name:  ");
        ID = (LocalInput.nextLine());
        if(ID.equals("Stop"))
            breaker = true;
        else {
            buffer = new Directory(ID); 
            nameList.add(buffer); 
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:39:38.730

考虑使用`break`关键字，则不需要`breaker`标志和`else`分支：

```
while(true)
{
    System.out.print("Name:  ");
    ID = (LocalInput.nextLine());
    if(ID.equals("Stop"))
        break;

    buffer = new Directory(ID); 
    nameList.add(buffer); 
} 
```

**抱歉**已经发了...

# phpmyadmin - phpMyAdmin“无法访问您为上传工作设置的目录”

> ID：11428625
> 
> 赞同：7
> 
> 时间：2012-07-11T08:34:54.340
> 
> 标签：phpmyadmin

我正在上传一个 24mb 的 sql 文件，并且一直按照说明使用[$cfg['UploadDir']](http://wiki.phpmyadmin.net/pma/Config#UploadDir)为 phpmyadmin 设置上传目录。不幸的是，它不起作用。

我在我的 phpMyAdmin 文件夹中创建了一个名为“上传”的文件夹。

在我的 config.inc.php 中，我输入了以下内容：

```
$cfg['UploadDir'] = 'upload'; 
```

此配置是由 PMA 创建的向导。

我也试过：

```
$cfg['UploadDir'] = './upload';
$cfg['UploadDir'] = '/absolute_php_my_admin_address/upload'; 
```

我还尝试了所有结尾带有“/”的变体。

我在网上找到了许多具有确切问题的线程。我的上传文件夹与父 PMA 目录具有相同的权限和所有权。我也没有在安全模式下运行。

你遇到过这个问题并解决了吗？在 Redhat 5 上运行 PMA 3.5.2。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T19:04:19.963

我知道这是旧的，但谷歌搜索该问题点在这里。所以这里是答案：

Debian 和 Ubuntu 限制了对文件夹的访问。您必须为此使用 phpmyadmin 文件夹。

在 Ubuntu 中，它是“/etc/phpmyadmin/”（不带引号）。

所以配置是：

```
$cfg['UploadDir'] = '/etc/phpmyadmin/'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:47:09.050

首先，检查 php.ini 中的 upload_max_filesize。默认是2M，也就是说，如果你上传一个大于2M的文件，就会失败。（尝试压缩 SQL 文件并再次上传。）您可以在 php.ini 中将 upload_max_filesize 更改为更大的值（< 20M）并重新启动您的 Web 服务器。

并且，确保 UploadDir 是可写的。在 Linux 中，您可以运行以下命令使文件夹可写：chmod a+w upload

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-17T13:15:42.337

例如，在服务器上使用 HostGator 时，我需要使用`Putty.exe`. 然后我不得不导航到这个文件目录，

```
/usr/local/cpanel/base/3rdparty/phpMyAdmin/config.inc.php 
```

这条线

```
$cfg['UploadDir'] = ''; 
```

到

```
$cfg['UploadDir'] = '/home/rootnameofwebsite/public_html/createAFolderHere'; 
```

这样文件夹就可以同步了。我有一个单独的问题，它无法识别我上传的 .dbf 文件。仍在试图弄清楚这一点。但我确实尝试了一个常规的 .sql 文件，它出现在下拉列表中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-27T12:06:11.087

您可以将备份文件放在任何位置，只需在 apache.conf 文件中调整“php_admin_value open_basedir”指令，它应该与 config.inc.php 位于同一目录（至少在 Ubuntu 中）或 apache 配置目录中的某个位置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-20T12:33:20.003

一个很老的问题，但从早上起就一直在研究这个问题，但没有一个解决方案奏效。但最后，和往常一样，在 centOS 上，这对我来说是一个非常简单的解决方案。请确保您的文件夹名称正确。例如：“/etc/ **phpmyadmin/** ”**不起作用**

但是“etc/php **MyAdmin/** ”**工作正常**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-11T11:32:56.613

另外，请记住检查您的`config.inc.php`文件是否已包含以下行：

```
/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = ''; 
```

如果是这样，请删除它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-27T08:54:51.210

无法访问您为上传工作设置的目录。

您必须检查 UploadDir 目录权限。

1) sudo chown www-data:www-data /var/你的上传目录路径

然后使用适合你的那个运行
2) sudo chmod 755 /var/你的上传目录路径 sudo chmod 644 /var/你的上传目录路径 sudo chmod 600 /var/你的上传目录路径 sudo chmod 400 /var/你的上传目录小路

# msbuild - 需要有关在多台远程机器上部署的建议

> ID：11428630
> 
> 赞同：0
> 
> 时间：2012-07-11T08:35:24.277
> 
> 标签：msbuild, teamcity, build-automation, msdeploy, remote-server

目前，我正在使用 ms-deploy 在几台使用 team-city 的机器上构建和部署。在我目前的场景中，我需要在 Dev 上构建、打包和部署。在此之后，我需要在测试和实时服务器上部署这个包（它们位于不同的域上。我理解我们是如何做到的，但问题是如果我们构建一个包，Web 转换只会发生在测试和实时配置中。这意味着如果我想使用为Dev创建的相同包不能使用，因为Web转换只发生在Dev web config。也知道我们可以在解包时更改web config但是参数非常有限。我们有很多变化不仅仅是连接字符串或数据库更改。另一个解决方案是添加另一个步骤来构建用于测试和作为开发部署的一部分的包，但这意味着在远程服务器上进行大量复制，

您能否指导在这种情况下最好的解决方案是什么。因此，我可以使用 team-city 一次性发布到 Dev 并使用相同的包和不同的 Web 配置进行测试和直播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:33:37.420

在部署时配置不会自动为您创建的项目。您可以将名为 parameters.xml 的文件添加到您的项目中，并扩展您希望在部署时提供的内容。

[这是有关使用 Web.Config 文件设置的部署参数](http://msdn.microsoft.com/en-us/library/ff398068.aspx)的方法的一些文档。

# android - Android：带有设置 Spannable.Factory 的单个 TextView 还是带有纯文本的两个简单 TextField？什么更快？

> ID：11428632
> 
> 赞同：0
> 
> 时间：2012-07-11T08:35:25.377
> 
> 标签：android, android-listview, textview

我想知道什么更快？一个`TextView`带有集合`Spannable.Factory`（将两种样式应用于文本）还是两个`TextViews`带有纯文本的简单？由于这是一个列表项的内部（所以在滚动时重新渲染），它可能并不像看起来那么微不足道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:39:39.473

通过 Google Groups引用[Zsolt Vasvari](https://groups.google.com/forum/?fromgroups#!topic/android-developers/yMaCOlkAHTc)：

> *“我的猜测是，在其他条件相同的情况下，View 是一个比 Spannable 更“重”的对象。但哪个更好是不可能的，因为它需要知道你想要什么以及你想如何使用文本行。”*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:39:46.553

请注意，这只是一个猜测。我的感觉是，您要避免的开销是创建对象，并且两个简单的 View 比一个 Spannable 更好，前提是 View 被回收。

# .net - vb 9 .exe 无法在 XP 上运行

> ID：11428642
> 
> 赞同：0
> 
> 时间：2012-07-11T08:35:55.383
> 
> 标签：.net, windows-xp, exe

我已经使用 Visual Studio 2008 编译和 .exe。在任何其他 PC 上的 w7 上，它都可以正常工作。但是在装有 XP 的 PC 上，它给了我我不明白的错误：

```
 See the end of this message for details on invoking 
just-in-time (JIT) debugging instead of this dialog box.

************** Exception Text **************
System.NullReferenceException: Object reference not set to an instance of an object.
at System.Drawing.Font..ctor(Font prototype, FontStyle newStyle)
at PS.main_form.Button_search_click(Object sender, EventArgs e)
at System.Windows.Forms.Control.OnClick(EventArgs e)
at System.Windows.Forms.Button.OnClick(EventArgs e)
at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.ButtonBase.WndProc(Message& m)
at System.Windows.Forms.Button.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)

************** Loaded Assemblies **************
mscorlib
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll

----------------------------------------
PS
Assembly Version: 1.0.0.0
Win32 Version: 1.0.0.0

    CodeBase: file:///C:/Documents%20and%20Settings/jim/Desktop/PS.exe

----------------------------------------
Microsoft.VisualBasic
Assembly Version: 8.0.0.0
Win32 Version: 8.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/Microsoft.VisualBasic/8.0.0.0__b03f5f7f11d50a3a/Microsoft.VisualBasic.dll

----------------------------------------
System
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll

----------------------------------------
System.Windows.Forms
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll

----------------------------------------
System.Drawing
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll

----------------------------------------
System.Configuration
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll

----------------------------------------
System.Xml
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll

----------------------------------------
System.Runtime.Remoting
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_MSIL/System.Runtime.Remoting/2.0.0.0__b77a5c561934e089/System.Runtime.Remoting.dll

----------------------------------------
System.Data
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.Data/2.0.0.0__b77a5c561934e089/System.Data.dll

----------------------------------------
System.Transactions
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.Transactions/2.0.0.0__b77a5c561934e089/System.Transactions.dll

----------------------------------------
System.EnterpriseServices
Assembly Version: 2.0.0.0
Win32 Version: 2.0.50727.3053 (netfxsp.050727-3000)

    CodeBase: file:///C:/WINDOWS/assembly/GAC_32/System.EnterpriseServices/2.0.0.0__b03f5f7f11d50a3a/System.EnterpriseServices.dll

----------------------------------------

************** JIT Debugging **************
To enable just-in-time (JIT) debugging, the .config file for this
application or computer (machine.config) must have the
jitDebugging value set in the system.windows.forms section.
The application must also be compiled with debugging
enabled.

For example:

<configuration>
<system.windows.forms jitDebugging="true" />
</configuration> 
```

我是 .net 的新手，所以请清楚地解释我该怎么做谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:37:59.457

您是否要实例化 XP 机器上未安装的字体？也许一个默认安装在 Windows 7 但不是 XP 的？

* * *

我的第 1000 个堆栈溢出答案！

# c# - 从非托管 C++ 远程调用 C# COM 组件？

> ID：11428645
> 
> 赞同：0
> 
> 时间：2012-07-11T08:36:18.587
> 
> 标签：c#, c++, .net, dcom

我编写了一个 C# .NET COM 组件，然后从 C# 前端调用它。但是，它也需要在旧的 Visual C++ 6 客户端应用程序中工作。当它全部安装在同一台机器上时，这工作正常，但我需要远程调用它。这失败并出现类未注册错误。安装该组件的服务器是 Windows 7 64 位机器，而客户端是 32 位 XP，如果这有什么不同的话。因为我的代码比较复杂，所以在网上找了一个简单的例子。它与我的代码基本相同，但以完全相同的方式失败。示例在这里：

[http://www.codeproject.com/Articles/12673/Calling-Managed-NET-C-COM-Objects-from-Unmanaged-C](http://www.codeproject.com/Articles/12673/Calling-Managed-NET-C-COM-Objects-from-Unmanaged-C)

该示例客户端在同一台机器上运行良好。我将客户端代码更改为此（远程运行）：

```
CoInitialize(NULL);

COSERVERINFO si; 
MULTI_QI qi; 
COAUTHINFO cai = { RPC_C_AUTHN_WINNT, RPC_C_AUTHZ_NONE, 0, RPC_C_AUTHN_LEVEL_DEFAULT, RPC_C_IMP_LEVEL_IMPERSONATE,0, EOAC_NONE };
si.dwReserved1 = 0; 
si.pwszName =L"{machine name}"; 
si.pAuthInfo = &cai; 
si.dwReserved2 = 0; 

qi.pIID = &MyInterop::IID_IMyDotNetInterface; 
qi.pItf = NULL;
qi.hr = 1; 

HRESULT hr = CoCreateInstanceEx(MyInterop::CLSID_MyDotNetClass,NULL,CLSCTX_REMOTE_SERVER ,&si,1,&qi);//CLSCTX_SERVER

if (SUCCEEDED(hr))
{
    MyInterop::IMyDotNetInterfacePtr* pCom = new MyInterop::IMyDotNetInterfacePtr;

    pCom->Attach((MyInterop::IMyDotNetInterface*)qi.pItf);

    HRESULT hRes = (*pCom)->ShowCOMDialog();

    delete pCom;

}

CoUninitialize(); 
```

但是，它在 CoCreateInstanceEx 上失败，HRESULT 为 0x80040154（未注册类）。当远程调用用 Visual C++ 6 编写的 COM 组件时，上述相同的客户端代码可以正常工作。

任何想法为什么会失败？

# android - 在路线图中画一条线

> ID：11428650
> 
> 赞同：0
> 
> 时间：2012-07-11T08:36:29.083
> 
> 标签：android

我想在路线图中画一条线。为此，我使用此处的代码[http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html](http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html)。但它不起作用。它显示了这种错误（（（（java.lang.RuntimeException：无法启动活动ComponentInfo {......}：android.os.NetworkOnMainThreadException））））。我的清单文件没问题。有什么问题？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:43:14.203

为此使用下面的代码。

MainActivity.java

```
public class MainActivity extends MapActivity {
    LinearLayout linearLayout;
    MapView mapView;
    private Road mRoad;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mapView = (MapView) findViewById(R.id.mapview);
        mapView.setBuiltInZoomControls(true);

        new Thread() {
            @Override
            public void run() {
                double fromLat = 49.85, fromLon = 24.016667, toLat = 50.45, toLon = 30.523333;
                String url = RoadProvider
                        .getUrl(fromLat, fromLon, toLat, toLon);
                InputStream is = getConnection(url);
                mRoad = RoadProvider.getRoute(is);
                mHandler.sendEmptyMessage(0);
            }
        }.start();
    }

    Handler mHandler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            TextView textView = (TextView) findViewById(R.id.description);
            textView.setText(mRoad.mName + " " + mRoad.mDescription);
            MapOverlay mapOverlay = new MapOverlay(mRoad, mapView);
            List<Overlay> listOfOverlays = mapView.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mapView.invalidate();
        };
    };

    private InputStream getConnection(String url) {
        InputStream is = null;
        try {
            URLConnection conn = new URL(url).openConnection();
            is = conn.getInputStream();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return is;
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
}

class MapOverlay extends com.google.android.maps.Overlay {
    Road mRoad;
    ArrayList<GeoPoint> mPoints;

    public MapOverlay(Road road, MapView mv) {
        mRoad = road;
        if (road.mRoute.length > 0) {
            mPoints = new ArrayList<GeoPoint>();
            for (int i = 0; i < road.mRoute.length; i++) {
                mPoints.add(new GeoPoint((int) (road.mRoute[i][1] * 1000000),
                        (int) (road.mRoute[i][0] * 1000000)));
            }
            int moveToLat = (mPoints.get(0).getLatitudeE6() + (mPoints.get(
                    mPoints.size() - 1).getLatitudeE6() - mPoints.get(0)
                    .getLatitudeE6()) / 2);
            int moveToLong = (mPoints.get(0).getLongitudeE6() + (mPoints.get(
                    mPoints.size() - 1).getLongitudeE6() - mPoints.get(0)
                    .getLongitudeE6()) / 2);
            GeoPoint moveTo = new GeoPoint(moveToLat, moveToLong);

            MapController mapController = mv.getController();
            mapController.animateTo(moveTo);
            mapController.setZoom(7);
        }
    }

    @Override
    public boolean draw(Canvas canvas, MapView mv, boolean shadow, long when) {
        super.draw(canvas, mv, shadow);
        drawPath(mv, canvas);
        return true;
    }

    public void drawPath(MapView mv, Canvas canvas) {
        int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
        Paint paint = new Paint();
        paint.setColor(Color.GREEN);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(3);
        for (int i = 0; i < mPoints.size(); i++) {
            Point point = new Point();
            mv.getProjection().toPixels(mPoints.get(i), point);
            x2 = point.x;
            y2 = point.y;
            if (i > 0) {
                canvas.drawLine(x1, y1, x2, y2, paint);
            }
            x1 = x2;
            y1 = y2;
        }
    }
} 
```

添加以下类

Point.java

```
public class Point {
    String mName;
    String mDescription;
    String mIconUrl;
    double mLatitude;
    double mLongitude;
} 
```

道路.java

```
public class Road {
    public String mName;
    public String mDescription;
    public int mColor;
    public int mWidth;
    public double[][] mRoute = new double[][] {};
    public Point[] mPoints = new Point[] {};
} 
```

RoadProvider.java

```
public class RoadProvider {

    public static Road getRoute(InputStream is) {
        KMLHandler handler = new KMLHandler();
        try {
            SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
            parser.parse(is, handler);
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
            double toLon) {// connect to map web service
        StringBuffer urlString = new StringBuffer();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString(fromLat));
        urlString.append(",");
        urlString.append(Double.toString(fromLon));
        urlString.append("&daddr=");// to
        urlString.append(Double.toString(toLat));
        urlString.append(",");
        urlString.append(Double.toString(toLon));
        urlString.append("&ie=UTF8&0&om=0&output=kml");
        return urlString.toString();
    }
}

class KMLHandler extends DefaultHandler {
    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack<String> mCurrentElement = new Stack<String>();
    private String mString;

    public KMLHandler() {
        mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
            Attributes attributes) throws SAXException {
        mCurrentElement.push(localName);
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = true;
            mRoad.mPoints = addPoint(mRoad.mPoints);
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isPlacemark)
                isItemIcon = true;
        }
        mString = new String();
    }

    public void characters(char[] ch, int start, int length)
            throws SAXException {
        String chars = new String(ch, start, length).trim();
        mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
            throws SAXException {
        if (mString.length() > 0) {
            if (localName.equalsIgnoreCase("name")) {
                if (isPlacemark) {
                    isRoute = mString.equalsIgnoreCase("Route");
                    if (!isRoute) {
                        mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString;
                    }
                } else {
                    mRoad.mName = mString;
                }
            } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                mRoad.mColor = Integer.parseInt(mString, 16);
            } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                mRoad.mWidth = Integer.parseInt(mString);
            } else if (localName.equalsIgnoreCase("description")) {
                if (isPlacemark) {
                    String description = cleanup(mString);
                    if (!isRoute)
                        mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;
                    else
                        mRoad.mDescription = description;
                }
            } else if (localName.equalsIgnoreCase("href")) {
                if (isItemIcon) {
                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                }
            } else if (localName.equalsIgnoreCase("coordinates")) {
                if (isPlacemark) {
                    if (!isRoute) {
                        String[] xyParsed = split(mString, ",");
                        double lon = Double.parseDouble(xyParsed[0]);
                        double lat = Double.parseDouble(xyParsed[1]);
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                        mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                    } else {
                        String[] coodrinatesParsed = split(mString, " ");
                        int lenNew = coodrinatesParsed.length;
                        int lenOld = mRoad.mRoute.length;
                        double[][] temp = new double[lenOld + lenNew][2];
                        for (int i = 0; i < lenOld; i++) {
                            temp[i] = mRoad.mRoute[i];
                        }
                        for (int i = 0; i < lenNew; i++) {
                            String[] xyParsed = split(coodrinatesParsed[i], ",");
                            for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                temp[lenOld + i][j] = Double
                                        .parseDouble(xyParsed[j]);
                        }
                        mRoad.mRoute = temp;
                    }
                }
            }
        }
        mCurrentElement.pop();
        if (localName.equalsIgnoreCase("Placemark")) {
            isPlacemark = false;
            if (isRoute)
                isRoute = false;
        } else if (localName.equalsIgnoreCase("ItemIcon")) {
            if (isItemIcon)
                isItemIcon = false;
        }
    }

    private String cleanup(String value) {
        String remove = "<br/>";
        int index = value.indexOf(remove);
        if (index != -1)
            value = value.substring(0, index);
        remove = "&#160;";
        index = value.indexOf(remove);
        int len = remove.length();
        while (index != -1) {
            value = value.substring(0, index).concat(
                    value.substring(index + len, value.length()));
            index = value.indexOf(remove);
        }
        return value;
    }

    public Point[] addPoint(Point[] points) {
        Point[] result = new Point[points.length + 1];
        for (int i = 0; i < points.length; i++)
            result[i] = points[i];
        result[points.length] = new Point();
        return result;
    }

    private static String[] split(String strString, String strDelimiter) {
        String[] strArray;
        int iOccurrences = 0;
        int iIndexOfInnerString = 0;
        int iIndexOfDelimiter = 0;
        int iCounter = 0;
        if (strString == null) {
            throw new IllegalArgumentException("Input string cannot be null.");
        }
        if (strDelimiter.length() <= 0 || strDelimiter == null) {
            throw new IllegalArgumentException(
                    "Delimeter cannot be null or empty.");
        }
        if (strString.startsWith(strDelimiter)) {
            strString = strString.substring(strDelimiter.length());
        }
        if (!strString.endsWith(strDelimiter)) {
            strString += strDelimiter;
        }
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            iOccurrences += 1;
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
        }
        strArray = new String[iOccurrences];
        iIndexOfInnerString = 0;
        iIndexOfDelimiter = 0;
        while ((iIndexOfDelimiter = strString.indexOf(strDelimiter,
                iIndexOfInnerString)) != -1) {
            strArray[iCounter] = strString.substring(iIndexOfInnerString,
                    iIndexOfDelimiter);
            iIndexOfInnerString = iIndexOfDelimiter + strDelimiter.length();
            iCounter += 1;
        }

        return strArray;
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/description"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <com.google.android.maps.MapView
        android:id="@+id/mapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey="Your API Key"
        android:clickable="true" />

</LinearLayout> 
```

将以下权限添加到您的 android 清单文件中。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# python - 在 Python 中的模块之间传递值

> ID：11428651
> 
> 赞同：0
> 
> 时间：2012-07-11T08:36:31.610
> 
> 标签：python, python-module

我想知道如何在 Python 中的模块之间传递值。

在 generate_image.py 我有：

```
def gerenate_image(fr,to,lat1,lon1,lat2,lon2):
    output_image_name = spatial_matrix.plot_spatial_data(data_array,data_array.shape[0],data_array.shape[1],float(lon1)/10000,float(lon2)/10000,float(lat1)/10000,float(lat2)/10000,fr,to)
return() 
```

在overlay.py中，我想使用“output_image_name”，所以我尝试了：

```
import generate_image

def overlay():
    overlay = generate_image.output_image_name
    .... 
```

但它没有用。那么如何检索 output_image_name 的值呢？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:38:24.530

让你的函数返回一些东西。

```
def generate_image(fr,to,lat1,lon1,lat2,lon2):
    return spatial_matrix.plot_spatial_data(data_array,data_array.shape[0],data_array.shape[1],float(lon1)/10000,float(lon2)/10000,float(lat1)/10000,float(lat2)/10000,fr,to) 
```

然后在另一个地方导入并调用该函数。

```
from yourmodule import generate_image

def overlay():
    background = generate_image(*args) # Or what ever arguments you want. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:39:02.020

在`overlay.py`：

```
def gerenate_image(fr,to,lat1,lon1,lat2,lon2):
    return spatial_matrix.plot_spatial_data(...) 
```

在`generate_image.py`：

```
import generate_image

def overlay():
    overlay = generate_image.generate_image(...) 
```

# android - 邀请 Facebook 好友加入我的应用

> ID：11428652
> 
> 赞同：6
> 
> 时间：2012-07-11T08:36:34.310
> 
> 标签：android, facebook

我正在编写一个娱乐应用程序（一个用 Android 编写的 RESTful 应用程序）。**我想显示 Facebook 朋友并邀请他们加入我的应用程序**。现在我成功加载了FB好友。接下来我会做什么？请给我一个想法。

（我想我应该给他们发一封邀请邮件。对吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:08:51.993

请查看以下文档： [https ://developers.facebook.com/docs/mobile/android/build/](https://developers.facebook.com/docs/mobile/android/build/)

并寻找请求对话框见 [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

这些将使您的生活变得轻松，您只需选择朋友！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:11:15.597

我的想法：

*   调用 Facebook API 将您应用的下载链接发布到您朋友的墙上。
*   如果您有这些信息，请发送短信或电子邮件。
*   在 Facebook 上创建应用程序。然后向您的朋友发送应用请求。您的朋友将在 Facebook 上收到通知。（我目前正在使用它来邀请朋友加入我的应用程序）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T13:49:14.420

**从您的应用程序或网站邀请 facebook 朋友，使用这几行代码并向所有 facebook 朋友发送邀请访问您的网站。我也使用了这个脚本，它工作得很好。您的域必须经过*ssl 认证*，因为 facebook 不允许不安全的域。**

```
<script src="http://connect.facebook.net/en_US/all.js"></script>

<script>
FB.init({
appId:'APP_ID',
cookie:true,
status:true,
xfbml:true
});

function FacebookInviteFriends()
{
FB.ui({
method: 'apprequests',
message: 'Your Message diaolog'
});
}
</script>

//HTML Code
<div id="fb-root"></div>
<a href='#' onclick="FacebookInviteFriends();"> 
Facebook Invite Friends Link
</a> 
```

将此以下代码添加到您的网站主页..

```
<script type='text/javascript'>
if (top.location!= self.location)
{
top.location = self.location
}
</script> 
```

有关更多详细信息，您可以查看：- [http://www.9lessons.info/2012/07/facebook-invite-friends-api.html](http://www.9lessons.info/2012/07/facebook-invite-friends-api.html)

# javascript - 弹出虚拟键盘时如何在 iOS 浏览器上重新定位视图？

> ID：11428653
> 
> 赞同：0
> 
> 时间：2012-07-11T08:36:34.903
> 
> 标签：javascript, css, ios, webkit, mobile-safari

我正在做一个与 iphone 短信风格有些相似（不是真正的克隆）的聊天室，但是当我在实际的移动设备上使用时，文本输入会在屏幕上居中并放大，这对于这些设备来说是不切实际的。如何使文本输入更接近（或更好地位于下方）虚拟键盘，而不是在屏幕中居中。我没有任何非 ios 设备可以尝试此操作，但我认为其他 webkit 移动浏览器也会出现类似问题。

对于一个额外的问题，有什么方法可以让键盘在按下 enter 时消失或检查是否按下了 done 按钮？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:59:36.620

将此添加到您的标题中：

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"> 
```

这将防止放大聚焦。如果没有帮助，请尝试添加 user-scalable=no 。

至于隐藏键盘，您需要做的就是强制输入失去焦点。

```
element.blur(); 
```

# php - 正则表达式不太好用

> ID：11428655
> 
> 赞同：0
> 
> 时间：2012-07-11T08:36:46.640
> 
> 标签：php, regex

我在下面创建了一个正则表达式（使用 php）；`terms`它必须与给定字符串中的ALL 匹配，该字符串**仅** `a-z0-9`包含、和。`.``_``-`

我的表达是：`'~(?:\(|\s{0,},\s{0,})([a-z0-9._-]+)(?:\s{0,},\s{0,}|\))$~i'`。

我的目标字符串是：`('word', word.2, a_word, another-word)`. 预期`terms`的结果是：`word.2`, `a_word`, `another-word`.

我目前得到：`another-word`。

**我的目标**

我从我的目标字符串中检测到一个 MySQL 函数，这工作正常。然后我想要该目标字符串中的所有字段。这是我自己的ORM。

我想可能存在这样一种情况，即在此表达式中包含进一步的括号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:41:09.470

也许使用正则表达式是矫枉过正的。在这种文本中，您可以删除括号并用逗号分解字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T13:59:02.027

据我所知，您有一个逗号分隔的术语列表，并且希望只找到满足`[a-z0-9._\-]+`. 如果是这样，这应该是正确的（它至少为您的示例返回正确的结果）：

```
'~(?<=[,(])\\s*([a-z0-9._-]+)\\s*(?=[,)])~i' 
```

主要问题是：

*   $ 在末尾，它将查询锚定到字符串的末尾
*   匹配所有内容时，您会从上一场比赛的结尾继续 - 这意味着如果您在一场比赛的结尾匹配逗号/右括号，则在下一场比赛的开头匹配时不存在。我已经通过后视 ( `(?<=...`) 和前瞻 ( `(?=...`)解决了这个问题
*   您的反斜杠需要进行双重转义，因为 PHP 在解析字符串时可能会剥离第一个反斜杠。

**编辑：**由于您在评论中说某些术语可能是包含逗号的字符串，因此您首先要通过以下方式运行输入：

```
$input = preg_replace('~(\'([^\']+|(?<=\\\\)\')+\'|"([^"]+|(?<=\\\\)")+")~', '"STRING"', $input); 
```

它应该用'“STRING”'替换所有字符串，这可以很好地匹配其他正则表达式。

# javascript - 如何使用 knockoutJS 渲染嵌套导航？

> ID：11428658
> 
> 赞同：2
> 
> 时间：2012-07-11T08:36:52.063
> 
> 标签：javascript, arrays, knockout.js

我有一个代表导航的嵌套数组（请参阅下面的 jsFiddle）。我想用 knockoutJS 渲染这个导航，但不知道怎么做。我已经浏览了官方文档，但它们只涵盖了一个简单的列表/集合。

[http://jsfiddle.net/a4swJ/](http://jsfiddle.net/a4swJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:43:58.053

您需要使用[模板](http://knockoutjs.com/documentation/template-binding.html)绑定。

**更新：**我删除了无容器 foreach 并用于模板绑定的 foreach 选项。下面的工作示例也更新了

HTML：

```
<script type="text/html" id="node-template">
    <li>
       <a data-bind="text: Title, attr:{href: Target}"></a>
       <ul data-bind="template: { name: 'node-template', foreach: Children }"></ul>
    </li>
</script>
<ul data-bind="template: { name: 'node-template', foreach: Nodes }"></ul> 
```

JS：

```
function NavigationNode(target, title)
{
    var self = this;

    self.Target = target || "[No Target]";
    self.Title = title || "[No Title]";

    self.Children = ko.observableArray([]);
};

function NavigationViewModel()
{
    var self = this;

    self.Nodes = ko.observableArray([]);

    var node1 = new NavigationNode("/parent", "Parent");
    var node2 = new NavigationNode("/parent/sub1", "Sub 1");
    var node3 = new NavigationNode("/parent/sub1/sub2", "Sub 2");

    node2.Children().push(node3);
    node1.Children().push(node2);

    self.Nodes.push(node1);

    ko.applyBindings(this);
};

new NavigationViewModel();​ 
```

这是一个[jsFiddle](http://jsfiddle.net/a4swJ/3/)。

# c# - 如何在 CompilationUnit 中找到方法 Symbol 的 SyntaxNode？

> ID：11428662
> 
> 赞同：16
> 
> 时间：2012-07-11T08:37:34.357
> 
> 标签：c#, roslyn

我在编译单元中添加了一堆节点，现在我想查找与给定符号对应的语法节点：

```
var compilation = Compilation.Create("HelloWorld")
    .AddSyntaxTrees(SyntaxTree.ParseCompilationUnit("<some namespace>"));

ISymbol symbol =  // some arbitrary symbol, e.g. a method whose syntax node I had
    compilation.GlobalNamespace.GetNamespaceMembers().First();

SyntaxToken token = ???;   // how do I get the token for that symbol? 
```

我如何获得该符号的令牌？

### 笔记：

我的目标是能够从中获取每个方法的方法体`MethodSymbol`。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T15:59:10.653

使用`ISymbol.DeclaringSyntaxReferences`.

# selenium - 未选中复选框

> ID：11428663
> 
> 赞同：1
> 
> 时间：2012-07-11T08:37:36.953
> 
> 标签：selenium, webdriver, wait

嗨，我正在自动化一个包含多个复选框的网页。它点击了某个复选框并错过了某个复选框。这是我的代码。我应该在点击之前放置一个等待语句以避免这个问题。

```
 IWebElement ClickElement = Wait.Until((d) => webDriver.FindElement(By.Id(parameter1)));
  ClickElement.Click(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:08:52.313

您可以尝试在您的代码中进行此更改 -

在等待功能中，您正在使用检查元素是否存在`findElement(By.Id(parameter1))`

`isDisplayed()`找到 WebElement 后，使用waitUntil 函数中的 with 方法检查是否显示。

您也可以使用方法检查它是否已经检查过`isSelected()`。

# forms - 使用 Symfony 2 模拟表单提交

> ID：11428665
> 
> 赞同：0
> 
> 时间：2012-07-11T08:37:44.153
> 
> 标签：forms, symfony

我正在使用 Symfony 2，需要一些建议。

我有一个控制器，它获取表单请求并在数据库中搜索匹配项并呈现结果（因此它只是一个基本搜索）。现在我想重定向到这个控制器，但不是来自表单。

更加具体：

*   我在搜索页面上，填写表格并点击搜索按钮 -> 我得到搜索结果。
*   我在其他地方，想删除一本书的 labelCategory -> 如果有些书仍然使用这个 labelCategory，我想得到这个 labelCategory 的搜索结果。

到目前为止我唯一的想法是，以某种方式模拟表单提交，但我没有找到如何去做。

我会很高兴你的每一个帮助;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:43:12.153

您根本不需要表单提交。只需将搜索逻辑放在单独的类中即可。你可以在任何你想要的控制器中使用它。也许[服务容器](http://symfony.com/doc/current/book/service_container.html)文档可以帮助

# mysql - MySQL连接查询不使用索引？

> ID：11428666
> 
> 赞同：1
> 
> 时间：2012-07-11T08:37:49.303
> 
> 标签：mysql

我有这个查询：

```
SELECT 
    COUNT(*) AS `numrows` 
FROM (`tbl_A`) 
JOIN `tbl_B` ON `tbl_A`.`B_id` = `tbl_B`.`id` 
WHERE 
    `tbl_B`.`boolean_value` <> 1; 
```

我为`tbl_A`. `B_id`, `tbl_B`. `id`和`tbl_B`。`boolean_value`但是mysql仍然说它不使用索引（在不使用索引日志的查询中）并且它检查整个表以检索结果。

我需要知道我应该做些什么来优化这个查询。

**编辑：**

解释输出：

```
id  select_type table  type  possible_keys          key   key_len  ref      rows  Extra 
1    SIMPLE     tbl_B  ALL   PRIMARY,boolean_value  NULL  NULL     NULL     5049  Using where
1    SIMPLE     tbl_A  ref   B_id                   B_id  9        tbl_B.id 9     Using where; Using index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:41:14.343

如果`boolean_value`它真的是布尔值索引它不是一个好主意。索引不会有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:49:59.467

解释向我们展示了一个索引用于连接到 tbl_B，但没有使用索引来过滤布尔值上的 tbl_A。

索引可用，但引擎选择不使用它。为什么会发生：

*   也许 5049 行并不是什么大问题，引擎发现使用索引过滤 10% 的行使用索引**与不使用它一样快**。
*   布尔值仅采用 3 个值：1、0 或 NULL。所以**索引的基数总是非常低**（最大 3）。查询分析器通常会删除低基数索引（通常认为这个索引对他没有多大帮助是非常正确的）

看看查询分析器的行为是否与此布尔值的真假值重新分区为 50/50 时相同，或者当您只有几个 False 时，查询分析器的行为是否相同会很有趣。

现在通常布尔字段仅对包含多个键的索引有用，因此如果您的查询使用索引的所有字段（在哪里或按顺序），查询分析器将相信该索引是一个真正的好工具。

请注意，索引会减慢您的写入速度并占用额外空间，不要添加无用的索引。使用 logt-query-not-using-indexes 是一件好事，但是您应该**使用慢查询日志来补偿该日志信息**。如果查询很快，那不是问题。

# android - Android：如何打开邮件编辑器视图？

> ID：11428670
> 
> 赞同：11
> 
> 时间：2012-07-11T08:37:53.030
> 
> 标签：android, email, gmail, mfmailcomposer

我只想知道如何在 Android 中打开 Mail Composer。

对于 iOS，我会做这样的事情：

```
MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init];
[controller setSubject:@"Mail subject"];
[controller setMessageBody:@"Mail body" isHTML:bool];
[controller setToRecipients:recipientsList];
if(controller) [self presentModalViewController:controller animated:YES]; 
```

安卓怎么样？

非常感谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-11T08:40:53.737

```
Intent intent=new Intent(Intent.ACTION_SEND);
String[] recipients={"xyz@gmail.com"};
intent.putExtra(Intent.EXTRA_EMAIL, recipients);
intent.putExtra(Intent.EXTRA_SUBJECT,"abc");
intent.putExtra(Intent.EXTRA_TEXT,"def");
intent.putExtra(Intent.EXTRA_CC,"ghi");
intent.setType("text/html");
startActivity(Intent.createChooser(intent, "Send mail")); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-23T10:40:31.503

只能使用 ACTION_SENDTO 将应用列表限制为电子邮件应用。

```
public void composeEmail(String[] addresses, String subject) {
    Intent intent = new Intent(Intent.ACTION_SENDTO);
    intent.setData(Uri.parse("mailto:")); // only email apps should handle this
    intent.putExtra(Intent.EXTRA_EMAIL, addresses);
    intent.putExtra(Intent.EXTRA_SUBJECT, subject);
    if (intent.resolveActivity(getPackageManager()) != null) {
        startActivity(intent);
    }
} 
```

请参阅[https://developer.android.com/guide/components/intents-common.html#Email](https://developer.android.com/guide/components/intents-common.html#Email)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-22T03:02:16.123

**如果**您只想打开电子邮件客户端，则：

```
Intent intent = new Intent(Intent.ACTION_SEND);
String[] recipients = {"wantedEmail@gmail.com"};
intent.putExtra(Intent.EXTRA_EMAIL, recipients);
intent.putExtra(Intent.EXTRA_SUBJECT, "emailTitle:");
intent.putExtra(Intent.EXTRA_CC, "ghi");
intent.setType("message/rfc822");
startActivity(Intent.createChooser(intent, "Send mail")); 
```

大多类似于接受的答案，具有不同的 MIME 类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T08:40:03.527

像这样：

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.setType("text/plain");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[] emailTo});
    emailIntent.putExtra(android.content.Intent.EXTRA_CC, new String[]{emailCC});
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailText);
    context.startActivity(Intent.createChooser(emailIntent, context.getString("send email using:"))); 
```

您可以在此处找到更多详细信息：http: [//mobile.tutsplus.com/tutorials/android/android-email-intent/](http://mobile.tutsplus.com/tutorials/android/android-email-intent/)

# ios - 弱链接 UIPopoverBackgroundView

> ID：11428675
> 
> 赞同：0
> 
> 时间：2012-07-11T08:38:20.783
> 
> 标签：ios, uikit, uipopovercontroller

我有一个项目必须部署到 4.0，但有一些仅 5.0 的功能，例如 UI 自定义。

我希望我的 UIPopoverBackgroundView 子类是弱链接的，但是在 4.X 设备上启动时总是出现以下错误

```
 dyld: Symbol not found: _OBJC_CLASS_$_UIPopoverBackgroundView 
```

我不能使用 NS_CLASS_AVAILABLE 宏，因为我的弹出框的自定义背景是 UIPopoverBackgroundView 类的子类，因此它必须在 .h 中声明。我怎样才能只弱链接 UIKit 的一部分？或者有没有其他方法可以解决这个问题？

谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:05:58.070

经过大量的谷歌搜索，事实证明马可有答案......

[http://www.marco.org/2010/11/22/supporting-older-versions-of-ios-while-using-new-apis](http://www.marco.org/2010/11/22/supporting-older-versions-of-ios-while-using-new-apis)

# c# - 单声道android下如何使用java Runtime.getRuntime().exec()

> ID：11428680
> 
> 赞同：1
> 
> 时间：2012-07-11T08:38:29.410
> 
> 标签：c#, xamarin.android

如何使用这个 java 代码 indo mono android。

```
String[] str ={"su","-c","reboot recovery"};
Process p = Runtime.getRuntime().exec(str); 
```

单声道没有选项`Runtime.getRuntime().exec()`。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:56:26.827

在映射到[Java.Lang.Runtime.Exec](http://docs.mono-android.net/?link=T%3aJava.Lang.Runtime/M/Exec)的 Mono for Android 中。

C# 中的等效代码是`Runtime.GetRuntime().Exec()`

# javascript - 循环通过数组，将数据传递给函数

> ID：11428682
> 
> 赞同：1
> 
> 时间：2012-07-11T08:38:32.403
> 
> 标签：javascript, node.js

我在让它工作时遇到了一些麻烦。

```
var Browser = require('zombie');
var browser = new Browser({
 debug: true
})

function getPredictions(){
    var prediction = ['5', '7', '9', '11', '14', '18'];
    for(i in prediction){
        sendPrediction(prediction[i]);
    }
}

function sendPrediction(prediction){
    browser.visit('http://localhost:3000/prediction.php', function (error, browser){
        browser.fill('#prediction', prediction);
        browser.pressButton('Send', function (error, browser){
            if(browser.html == 'correct'){
                console.log('The correct prediction is ' + prediction +'');
            }else{
                console.log('The prediction ' + prediction + ' is incorrect.');
            }
        });
    });
}

getPredictions(); 
```

基本上，我从数组传递到服务器的所有四个预测，我希望能够检查它是否是正确的预测。'9' 是正确的预测，但它告诉我即使 browser.html 是“正确的”，它们都是无效的。

我怎样才能让它工作？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T15:29:49.440

我认为您正在重用相同的僵尸浏览器实例。尝试以这种方式重写您的代码。现在该`getPrediction`方法将“等待”直到前一个完成并解析（注意`next`参数）。

```
function getPredictions(){
    var i = -1, prediction = ['5', '7', '9', '11', '14', '18'];
    var next = function() {
        i++;
        if(i < prediction.length)
            sendPrediction(prediction[i], next);
    }
    next();
}

function sendPrediction(prediction, next){
    browser.visit('http://localhost:3000/prediction.php', function (error, browser){
        browser.fill('#prediction', prediction);
        browser.pressButton('Send', function (error, browser){
            if(browser.html == 'correct'){
                console.log('The correct prediction is ' + prediction +'');
            }else{
                console.log('The prediction ' + prediction + ' is incorrect.');
            }
            next();
        });
    });
} 
```

`Browser`您也可以在每次检查预测时尝试创建一个新实例

```
function sendPrediction(prediction){
    var browser = new Browser({ debug: true });
    browser.visit('http://localhost:3000/prediction.php', function (error, browser){
        browser.fill('#prediction', prediction);
        browser.pressButton('Send', function (error, browser){
            if(browser.html == 'correct'){
                console.log('The correct prediction is ' + prediction +'');
            }else{
                console.log('The prediction ' + prediction + ' is incorrect.');
            }
        });
    });
} 
```

# vba - 多个工作表的 Excel 列 - 复制、排序、超链接

> ID：11428684
> 
> 赞同：0
> 
> 时间：2012-07-11T08:38:45.043
> 
> 标签：vba, excel, vb6

在以下方面需要一些帮助：

我有几个具有相同结构的工作表，在每个工作表中我有两列（我们称它们为 X 和 Y），我需要使用它们的单元格值（字母数字组合）复制它们，并将 AF 列的值复制到自己的工作表中对于 X 和 Y。

在“新”工作表上，我想将 X/Y 放在 A 列中，对 A 之后的值进行排序，并为 A 中的每个单元格值附加一个常量超链接。所以 X 或 Y 转到 A，AF 转到 BG。

然后我想让列 F 或新的 G 可点击，以便将我带到相应工作表中的行。X 和 Y 并不总是恰好在 X 或 Y 列中，但我认为这可以通过“名称搜索”来解决。

当我执行我的代码时，例如 worksheet3 将覆盖 worksheet1 的值，并且我的超链接结构也是错误的。排序被忽略了，因为它正在工作。

```
Function CopyAndSort(ByRef mySheet As Worksheet)
'   If mySheet.Name <> "Sheet1" Then
'   Exit Function
'   End If

   mySheet.Activate
    Set sheetCS = Sheets("CopyAndSort Sheet")
    sheetCS.Range("A:A").Value = ""
   lastRowCS = Range("X:X").Cells.Find("*", , , , , xlPrevious).Row

     rowNumber = 1
    For rowCopy = 5 To lastRowFO
        sheetCopy = Range("BE" & rowCopy)
        If Trim(sheetCopy) <> "" Then
            sheetCopy = Replace(sheetCopy, """", "")
            If InStr(1, sheetCopy, ",", vbTextCompare) <> 0 Then
               sheetCopyArray = Split(sheetCopy, ",")
            Else
               sheetCopyArray = Array(sheetCopy)
      End If

            For Each copy In sheetCopyArray

                rowNumber = rowNumber + 1

                        copy_Value = copy
' test for url                         
'  sheetCS.Cells(rowNumber, 1).Formula = "=HYPERLINK(""ConstURL & copyValue"")"

                     sheetCS.Cells(rowNumber, 1) = copy_Value
                        copy_Value = Cells(rowCopy, 1)
                            sheetCS.Cells(rowNumber, 2) = copy_Value
                        copy_Value = Cells(rowCopy, 2)
                            sheetCS.Cells(rowNumber, 3) = copy_Value
                        copy_Value = Cells(rowCopy, 3)
                            sheetCS.Cells(rowNumber, 4) = copy_Value
                            copy_Value = Cells(rowCopy, 4)
                            sheetCS.Cells(rowNumber, 5) = copy_Value
                        copy_Value = Cells(rowCopy, 5)
                            sheetCS.Cells(rowNumber, 6) = copy_Value

            Next
        End If

    Next 
```

那么我怎样才能设法不覆盖这些值并附加正确的超链接语法，以及使列 G 可点击？我可以对 X 和 Y 使用一个函数吗？一些代码示例会对我有很大帮助。谢谢你。

**更新**：

我忘了提到 X 和 Y 将永远彼此相邻。

例子：

表 1：

```
|ColA|ColB|ColC|ColD|ColF|....|ColX|ColY| 
```

Sheet2：这里“ColX”在 ColQ 中，ColY 在 ColR 中

```
|ColA|ColB|ColC|ColD|ColF|....|ColXinColQ|ColYinColR| 
```

CopySheet_of_X：现在复制 Sheet1 的 ColX 和 ColA-ColF，并对其中 X 在 ColQ 中的 Sheet2 执行相同操作

**两张纸的输出：** |ColX|ColA|ColB|ColC|ColD|ColF|

CopySheet_of_Y：现在复制 Sheet1 的 ColY 和 ColA-ColF，并对其中 Y 在 ColR 中的 Sheet2 执行相同操作

**两张纸的输出：** |ColY|ColA|ColB|ColC|ColD|ColF|

超链接：所以现在 ColX 和 ColY 的值应该与前面的超链接连接：如果 ColX 中的单元格具有“someValue1”的值，那么它应该变成 myurl://sometext=someValue1

而且我不知道单击 ColF 时跳回该行的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:04:02.973

试试这个。将其粘贴到模块中并运行 Sub Sample。

```
Option Explicit

Const hLink As String = "d3://d3explorer/idlist="

Sub Sample()
    Dim sheetsToProcess

    Set sheetsToProcess = Sheets(Array("Sheet1", "Sheet2"))

    CopyData sheetsToProcess, "CopySheet_of_X", "FirstLinkValue"

    '~~> Similarly for Y
    'CopyData sheetsToProcess, "CopySheet_of_Y", "SecondLinkValue"
End Sub

'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
'                      USAGE                         '
' wsI      : Worksheet Collection                    '
' wsONm    : name of the new sheet for output        '
' XY       : Name of the X or Y Header               '
'~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~'
Sub CopyData(wsI, wsONm As String, XY As String)
    Dim ws As Worksheet, sSheet As Worksheet
    Dim aCell As Range
    Dim lRow As Long, LastRow As Long, lCol As Long, i As Long, j As Long
    Dim MyAr() As String

    '~~> Delete the Output sheet if it is already there
    On Error Resume Next
    Application.DisplayAlerts = False
    Sheets(wsONm).Delete
    Application.DisplayAlerts = True
    On Error GoTo 0

    '~~> Recreate the output sheet
    Set ws = Sheets.Add: ws.Name = wsONm

    '~~> Create Headers in Output Sheet
    ws.Range("A1") = XY
    wsI(1).Range("A3:F3").Copy ws.Range("B1")

    '~~> Loop throught the sheets array
    For Each sSheet In wsI
        LastRow = ws.Range("A" & ws.Rows.Count).End(xlUp).Row + 1
        With Sheets(sSheet.Name)
            '~~> Find the column which has X/Y header
            Set aCell = .Rows(3).Find(What:=XY, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)

            If aCell Is Nothing Then
                '~~> If not found, inform and exit
                MsgBox XY & " was not found in " & .Name, vbCritical, "Exiting Application"
                Exit Sub
            Else
                '~~> if found then get the column number
                lCol = aCell.Column

                '~~> Identify the last row of the sheet
                lRow = .Range("A" & .Rows.Count).End(xlUp).Row

                '~~> Loop through the X Column and split values
                For i = 4 To lRow
                    If InStr(1, .Cells(i, lCol), ",") Then '<~~ If values like A1,A2,A3
                        MyAr = Split(.Cells(i, lCol), ",")

                        For j = 0 To UBound(MyAr)
                            '~~> Add hyperlink in Col 1
                            With ws
                                .Cells(LastRow, 1).Value = MyAr(j)
                                .Hyperlinks.Add Anchor:=.Cells(LastRow, 1), Address:= _
                                hLink & .Cells(LastRow, 1).Value, TextToDisplay:=.Cells(LastRow, 1).Value
                            End With

                            .Range("A" & i & ":F" & i).Copy ws.Range("B" & LastRow)

                            '~~> Add hyperlink in Col 2
                            With ws
                                .Hyperlinks.Add Anchor:=.Cells(LastRow, 7), Address:="", SubAddress:= _
                                sSheet.Name & "!" & "A" & i, TextToDisplay:=.Cells(LastRow, 7).Value
                            End With

                            LastRow = LastRow + 1
                        Next j
                    Else  '<~~ If values like A1
                        '~~> Add hyperlink in Col 1
                        With ws
                            .Cells(LastRow, 1).Value = Sheets(sSheet.Name).Cells(i, lCol)
                            .Hyperlinks.Add Anchor:=.Cells(LastRow, 1), Address:= _
                            hLink & .Cells(LastRow, 1).Value, TextToDisplay:=.Cells(LastRow, 1).Value
                        End With

                        .Range("A" & i & ":F" & i).Copy ws.Range("B" & LastRow)

                        '~~> Add hyperlink in Col 2
                        With ws
                            .Hyperlinks.Add Anchor:=.Cells(LastRow, 7), Address:="", SubAddress:= _
                            sSheet.Name & "!" & "A" & i, TextToDisplay:=.Cells(LastRow, 7).Value
                        End With

                        LastRow = LastRow + 1
                    End If
                Next i
            End If
        End With
    Next

    '~~> Sort the data
    ws.Columns("A:G").Sort Key1:=ws.Range("A2"), Order1:=xlAscending, Header:=xlGuess, _
    OrderCustom:=1, MatchCase:=False, Orientation:=xlTopToBottom, DataOption1:=xlSortNormal
End Sub 
```

# jsf-2 - 如何使用 JSF 设置 HTTP 状态码？

> ID：11428686
> 
> 赞同：3
> 
> 时间：2012-07-11T08:39:00.550
> 
> 标签：jsf-2, http-status-codes

我在 WebSphere Application Server 上使用 Apache Myfaces 2.2。

我有一个 JSF 页面，它“测试”与文件系统和数据库的连接。

当连接失败时，我想返回另一个 HTTP 状态码。我怎样才能用 JSF 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:51:22.223

试试 response.setStatus();

有关更多详细信息，此链接将很有帮助：

[https://stackoverflow.com/a/16777616/1763602](https://stackoverflow.com/a/16777616/1763602)

# file - 用于删除文本文件前 3 行的批处理文件

> ID：11428692
> 
> 赞同：10
> 
> 时间：2012-07-11T08:39:35.920
> 
> 标签：file, batch-file, text, lines

正如标题所述，我需要一个批处理文件来删除文本文件的前 3 行。

例如：

```
A    
B    
C    
D    
E   
F    
G 
```

在此示例中，我需要将 A、B 和 C 与行一起删除

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T12:14:21.080

```
more +3 "file.txt" >"file.txt.new"
move /y "file.txt.new" "file.txt" >nul 
```

以上速度很快，效果很好，但有以下限制：

*   TAB 字符被转换为一系列空格。
*   要保留的行数必须小于 ~65535。如果超过行号，MORE 将挂起（等待按键）。
*   所有行都将由回车和换行终止，无论它们在源代码中是如何格式化的。

以下使用 FOR /F 和 FINDSTR 的解决方案更健壮，但速度要慢得多。与简单的 FOR /F 解决方案不同，它保留了空行。但与所有 FOR /F 解决方案一样，它被限制为小于 8191 字节的最大行长度。同样，所有行都将由回车和换行终止。

```
@echo off
setlocal disableDelayedExpsnsion
>"file.txt.new" (
  for /f "delims=" %%A in ('findstr /n "^" "file.txt"') do (
    set "ln=%%A"
    setlocal enableDelayedExpansion
    echo(!ln:*::=!
    endlocal
  )
)
move /y "file.txt.new" "file.txt" >nul 
```

如果您有我方便的[JREPL.BAT 正则表达式文本处理实用程序](http://www.dostips.com/forum/viewtopic.php?t=6044)，那么您可以使用以下内容来获得非常强大且快速的解决方案。无论原始格式如何，这仍然会终止所有带有回车和换行符 (\r\n) 的行。

```
jrepl "^" "" /k 0 /exc 1:3 /f "test.txt" /o - 
```

`/U`您可以通过添加选项来编写 \n 行终止符而不是 \r\n 。

如果您必须保留原始行终止符，则可以使用以下变体。这会将整个源文件加载到单个 JScript 变量中，因此总文件大小限制为大约 1 或 2 GB（我忘记了确切的数字）。

```
jrepl "(?:.*\n){1,3}([\s\S]*)" "$1" /m /f "test.txt" /o - 
```

请记住，JREPL 是一个批处理文件，因此如果您在另一个批处理脚本中使用该命令，则必须使用 CALL JREPL。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T08:43:57.457

这应该这样做

```
for /f "skip=3 delims=*" %%a in (C:\file.txt) do (
echo %%a >>C:\newfile.txt    
)
xcopy C:\newfile.txt C:\file.txt /y
del C:\newfile.txt /f /q 
```

这将重新创建删除前 3 行的文件。

为了让用户保持更新，您可以在批处理文件中以 vbscript 样式集成消息或在命令提示符中输出消息。

```
@echo off
echo Removing...
for /f "skip=3 delims=*" %%a in (C:\file.txt) do (
echo %%a >>C:\newfile.txt
) >nul
echo Lines removed, rebuilding file...
xcopy C:\newfile.txt C:\file.txt /y >nul
echo File rebuilt, removing temporary files
del C:\newfile.txt /f /q >nul
msg * Done!
exit >nul 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T08:45:36.520

使用 sed 仅从第 4 行开始打印（**编辑：**仅当您使用 Un*x 时：）

```
$ sed -e '4,$p' in.txt 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-23T01:44:02.620

我在第 n 行命令后使用“更多”命令输出文件（Windows）

```
More +n orginalfilename.txt > outputfilename.txt 
```

说明：第n行后输出txt文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-22T13:27:26.700

如果你想跳过第一行和最后一行，你可以在 [http://www.harchut.de/download/ms-dos/skip-tail-flatfile-example.zip使用我的代码](http://www.harchut.de/download/ms-dos/skip-tail-flatfile-example.zip)

```
set L_TRIMFILE_CNT=0
set L_TRIMFILE_TMPFILE=work.countrows.find.tmp
find /c /v "" %P_TRIMFILE_INFILE% > %L_TRIMFILE_TMPFILE%
for /f "skip=1 tokens=3* " %%a in (%L_TRIMFILE_TMPFILE%) do (
  if %L_TRIMFILE_CNT% == 0 set L_TRIMFILE_CNT=%%a
)
del %L_TRIMFILE_TMPFILE%
set /a L_TRIMFILE_EOF=%L_TRIMFILE_CNT%-%P_TRIMFILE_TAIL%
findstr /n .* "%P_TRIMFILE_INFILE%" > %L_TRIMFILE_TMPFILE%
if exist %P_TRIMFILE_OUTFILE% del %P_TRIMFILE_OUTFILE%
set V_TRIMFILE_SKIP="skip=%P_TRIMFILE_SKIP% tokens=1* delims=:"
if %P_TRIMFILE_SKIP% equ 0 set V_TRIMFILE_SKIP="tokens=1* delims=:"
for /f %V_TRIMFILE_SKIP% %%a in (%L_TRIMFILE_TMPFILE%) do (
  if %%a leq %L_TRIMFILE_EOF% if exist %P_TRIMFILE_OUTFILE% @echo.%%b>>%P_TRIMFILE_OUTFILE%
  if %%a leq %L_TRIMFILE_EOF% if not exist %P_TRIMFILE_OUTFILE% @echo.%%b>%P_TRIMFILE_OUTFILE%
)
del %L_TRIMFILE_TMPFILE% 
```

您可以跳过或取消平面文件的行，而无需任何其他实用程序。

# android - 蓝牙对等连接重置

> ID：11428697
> 
> 赞同：8
> 
> 时间：2012-07-11T08:39:48.917
> 
> 标签：android, bluetooth

嗨朋友们，我正在尝试通过使用名为 bluecove 的第三方 api 和 obex 将文件从 android 设备发送到特定的蓝牙设备。设置连接标头后，我可以连接设备我遇到了**对等连接重置的问题。**

这是我下面的代码片段。对此的任何帮助表示赞赏。

在我的活动中，我使用下面的代码来处理发送文件

```
BlueCoveImpl.setConfigObject(
                BlueCoveConfigProperties.PROPERTY_ANDROID_CONTEXT,
                this);
String deviceAddress = "0007ABB6D96E";
            int channel = 9;
            String obexURL = "btgoep://" + deviceAddress + ":"
                    + "0000110600001000800000805f9b34fb" + ";android=true";

            // String obexURL = "btgoep://" + deviceAddress + ":" + channel
            // + ";android=true";
            String fileToSend = "sdcard/DSCN9379.jpg";
            System.out.println("Connecting to " + obexURL);
            FileInputStream stream = new FileInputStream(fileToSend);
            File f = new File(fileToSend);
            int size = (int) f.length();
            byte file[] = new byte[size];
            stream.read(file);
            String filename = f.getName();
            System.out
                    .println("***************Now sending file to device*****************");
            SendFileTask task = new SendFileTask(MainActivity.this, obexURL,
                    file, filename);
            Thread thread = new Thread(task);
            thread.start(); 
```

================ 在下面，我正在尝试将 bluecove 连接类对象与标头设置如下。

```
package com.example.bluecovesample;

import java.io.OutputStream;

import javax.microedition.io.Connection;
import javax.microedition.io.Connector;
import javax.obex.ClientSession;
import javax.obex.HeaderSet;
import javax.obex.Operation;
import javax.obex.ResponseCodes;

//import static write ;  
import android.content.Context;
import android.widget.Toast;

public class SendFileTask implements Runnable {

    private byte[] file;
    private String filename;
    public static final int WRITE = 2;

    String logString;

    int responseCode;
    Context context;
    String obexURL;

    public SendFileTask(Context ctx, String obexUrl, byte[] file,
            String filename) {
        this.context = ctx;
        this.obexURL = obexUrl;
        this.file = file;
        this.filename = filename;

    }

    public void run() {
        Connection connection = null;
        try {
            System.out.println(obexURL);
            // for ( int i = 0; i 3; i++ )
            {
                // connection = Connector.open("btgoep://"+btConnectionURL+
                // ":6");
                connection = Connector.open(obexURL);
            }
            // connection obtained

            // now, let's create a session and a headerset objects
            ClientSession cs = (ClientSession) connection;

            HeaderSet hs = cs.createHeaderSet();
            // toastMsg(hs.toString());
            // now let's send the connect header
            // cs.notifyAll();

            **cs.connect(hs);**

            hs.setHeader(HeaderSet.NAME, filename);
            // System.out.println("sfname:"+filename);
            int dotIndex = filename.lastIndexOf(".");
            // System.out.println("doti:"+dotIndex);
            String extension = filename.substring(dotIndex).toLowerCase();
            // System.out.println("sfname:"+extension);

            if (extension.equals(".txt")) {
                hs.setHeader(HeaderSet.TYPE, "text/plain");
            } else if (extension.equals(".jpg") || extension.equals(".jpeg")) {
                hs.setHeader(HeaderSet.TYPE, "image/jpeg");
            } else if (extension.equals(".mpeg") || extension.equals(".mpg")
                    || extension.equals(".mp3")) {
                hs.setHeader(HeaderSet.TYPE, "video/mpeg");
            } else if (extension.equals(".wav")) {
                hs.setHeader(HeaderSet.TYPE, "audio/x-wav");
            } else if (extension.equals(".3gp")) {
                hs.setHeader(HeaderSet.TYPE, "image/jpeg");
            } else if (extension.equals("mid") || extension.equals("rmi")) {
                hs.setHeader(HeaderSet.TYPE, "audio/mid");
            }

            hs.setHeader(HeaderSet.LENGTH, new Long(file.length));

            Operation putOperation = cs.put(hs);

            // System.out.println("response code:"+putOperation.getResponseCode());

            // putOperation.getResponseCode();
            // this.responseCode = putOperation.getResponseCode();

            OutputStream outputStream = putOperation.openOutputStream();
            outputStream.write(file);
            // file push complete

            outputStream.close();
            responseCode = putOperation.getResponseCode();

            putOperation.close();

            cs.disconnect(null);

            connection.close();

            // file successfully sent

            System.out.println("RESPONSE CODE " + responseCode);
            if (responseCode == ResponseCodes.OBEX_HTTP_OK) {
                System.out.println("FILE SUCCESSFULLY SENT " + filename);
            }

            else {
                System.out.println("FILE SUCCESSFULLY NOT SENT" + filename
                        + " not in exception");

            }

        } catch (Exception e) {

            System.out.println("FILE SUCCESSFULLY NOT SENT" + filename
                    + " in exception");
            // System.out.println("In exception");
            e.printStackTrace();

            try {
                connection.close();
            } catch (Exception ex) {
                System.out.println("error closing connection" + ex.toString());
            }
        }
    }

    private void toastMsg(String msg) {
        Toast.makeText(context, msg, Toast.LENGTH_SHORT).show();
    }

} 
```

在执行上述代码时，我在目标设备上收到了连接接受通知对话框，然后在执行 *cs.connect(hs); 行时通知对等连接停止 在我的日志中。Logcat 堆栈跟踪：

> 07-11 14:48:07.044: W/System.err(4527): java.io.IOException: Connection reset by peer 07-11 14:48:07.052: W/System.err(4527): at android.bluetooth .BluetoothSocket.readNative(Native Method) 07-11 14:48:07.059: W/System.err(4527): at android.bluetooth.BluetoothSocket.read(BluetoothSocket.java:336) 07-11 14:48:07.059: W/System.err(4527): 在 android.bluetooth.BluetoothInputStream.read(BluetoothInputStream.java:96) 07-11 14:48:07.059: W/System.err(4527): 在 com.intel.bluetooth.BluetoothStackAndroid .connectionRfRead(BluetoothStackAndroid.java:437) 07-11 14:48:07.059: W/System.err(4527): at com.intel.bluetooth.BluetoothRFCommInputStream.read(BluetoothRFCommInputStream.java:139) 07-11 14:48 :07.059: W/System.err(4527): 在 com.intel.bluetooth.obex.OBEXUtils.readFully(OBEXUtils.java:71) 07-11 14:48:07.059: W/System。错误（4527）：在 com.intel.bluetooth.obex.OBEXSessionBase.readPacket（OBEXSessionBase.java:217）07-11 14:48:07.059：W/System.err（4527）：在 com.intel.bluetooth.obex .OBEXClientSessionImpl.connectImpl(OBEXClientSessionImpl.java:100) 07-11 14:48:07.059: W/System.err(4527): at com.intel.bluetooth.obex.OBEXClientSessionImpl.connect(OBEXClientSessionImpl.java:85) 07- 11 14:48:07.059: W/System.err(4527): 在 com.example.bluecovesample.SendFileTask.run(SendFileTask.java:78) 07-11 14:48:07.059: W/System.err(4527) : 在 java.lang.Thread.run(Thread.java:1019)在 com.intel.bluetooth.obex.OBEXClientSessionImpl.connect(OBEXClientSessionImpl.java:85) 07-11 14:48:07.059: W/System.err(4527): 在 com.example.bluecovesample.SendFileTask.run(SendFileTask. java:78) 07-11 14:48:07.059: W/System.err(4527): 在 java.lang.Thread.run(Thread.java:1019)在 com.intel.bluetooth.obex.OBEXClientSessionImpl.connect(OBEXClientSessionImpl.java:85) 07-11 14:48:07.059: W/System.err(4527): 在 com.example.bluecovesample.SendFileTask.run(SendFileTask. java:78) 07-11 14:48:07.059: W/System.err(4527): 在 java.lang.Thread.run(Thread.java:1019)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-14T04:55:53.813

出于某种原因，客户端正在切断连接。这可能是由于多种原因造成的，例如发送错误数据或错误配对。您是否确保正确配对设备？

未输入配对代码可能是个问题。这使得配对不合适。

解决方法是进入设置 -> 无线和网络 -> 蓝牙设置，长按“配对”设备并选择“取消配对”，然后单击产生带有文本字段的“蓝牙配对请求”窗口的设备，其中我输入了 PIN（配对码）。完成后，配对将成功。

您还可以使用名为 Wireshark 的程序来分析通过协议发送的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:18:07.943

```
import javax.obex.ClientSession; 
```

您使用此类“ClientSession”。

据我所知，createHeaderSet 不是 ClientSession 的方法

我想知道你是如何成功编译你的应用程序的。

# java - Locationmanager getLastKnownLocation 始终为空

> ID：11428700
> 
> 赞同：0
> 
> 时间：2012-07-11T08:40:03.827
> 
> 标签：java, android, latitude-longitude, locationmanager

我有个问题。当我测试这个。我要求它总是返回 null 的 showCurrentLocation 函数。当我之后发送位置时，它在模拟器中工作。但是我需要这个才能在手机上工作，而且你不能像在 de DDNS 窗口中那样发送位置。

这是我的代码

```
public class LbsGeocodingActivity extends Activity {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1; // in Milliseconds

protected LocationManager locationManager;

protected Button retrieveLocationButton;
protected Button stopLocationButton;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

    retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showCurrentLocation();
        }
    });  
    /*stopLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            //locationManager.removeUpdates(MyLocationListener)  ;          
        }
    }); */ 

}    

public String getMyPhoneNumber(){
    TelephonyManager mTelephonyMgr;
    mTelephonyMgr = (TelephonyManager)
    getSystemService(Context.TELEPHONY_SERVICE); 
    return mTelephonyMgr.getLine1Number();
}

protected void showCurrentLocation() {

    Criteria crit = new Criteria();
    crit.setAccuracy(Criteria.ACCURACY_FINE);
    String provider = locationManager.getBestProvider(crit, true);
    Location loc = locationManager.getLastKnownLocation(provider);

    if (loc != null) {
        String longi = "" + loc.getLongitude();
        String lat = "" + loc.getLatitude();
        String num = getMyPhoneNumber();
        String message = String.format(
                "Current Location \n  Longitude: %1$s \n Latitude: %2$s \n %3$s ",
                longi,
                lat,
                num         );
        Toast.makeText(LbsGeocodingActivity.this, message,
                Toast.LENGTH_LONG).show();
    }
    if (loc == null)Toast.makeText(LbsGeocodingActivity.this, "Null ",
            Toast.LENGTH_LONG).show();
}   

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc) {
        String longi = "" + loc.getLongitude();
        String lat = "" + loc.getLatitude();
        String num = getMyPhoneNumber();
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s \n %3$s ",
                longi,
                lat,
                num                 );
        Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

}

} 
```

我的权限是：FINE_LOCATION COURSE_LOCATION。

我真的只是想要它跟踪用户的位置，即使在后台..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:49:17.653

您也可以将模拟位置发送到您的 Android 设备查看设备 [上的 Android 模拟位置？](https://stackoverflow.com/questions/2531317/android-mock-location-on-device)

然后除此之外我也遇到了这个问题，它似乎在您的设备上尝试打开谷歌地图并确保您找到然后再试一次之前可能从未有过位置。此外，我怀疑第一次使用该应用程序时，您还无法访问最后知道的位置，因为您从未使用过它，因此您首先需要定位，下次启动该应用程序时它会起作用。如果您想快速定位，请尝试通过 wifi 或手机信号塔定位

并确保设置了权限！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:57:53.760

您是否检查过手机中的 GPS 是否已打开，打开 GPS 后需要一些时间才能获取位置更新。

# c# - 如何在该方法之外使用在方法中声明的变量？

> ID：11428701
> 
> 赞同：1
> 
> 时间：2012-07-11T08:40:08.037
> 
> 标签：c#, class, object, scope

我正在使用 VS 2008 (C#)...我在 GlobalClass 中创建了一个函数来全局使用它。这是为了打开一个对话框。当我在我的方法中调用此函数时，它可以工作，但我无法使用我在这里创建的对象“OFD”......

```
static class GlobalClass
{
 public static void OFDbutton()
  {
   OpenFileDialog ofd = new OpenFileDialog();
   ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";
   DialogResult dr = ofd.ShowDialog();
  }
} 
```

在表单方法中。我在用

```
globalclass.ofdbutton(); //Calling the function
lable1.text=ofd.filename; 
```

我想使用对象“ofd”，但我不能这样做..我该怎么做，请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:42:50.127

您可能想要修改您的方法以实际返回文件名。

就像是

```
public static string OFDbutton()
{
    OpenFileDialog ofd = new OpenFileDialog();
    ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";

    if (ofd.ShowDialog() == DialogResult.OK)
        return ofd.Filename;
    else
        return string.Empty;
} 
```

当然，这是一种非常幼稚的方法，您可能想要阅读一般的变量范围和面向对象设计。

编辑：考虑到用户可能在对话框本身中单击了取消，[此答案扩展了该问题并改进了设计。](https://stackoverflow.com/a/11428777/64976)

Edit2：从链接的答案中无耻地复制，我修改了自己的片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:45:28.223

当您在方法中声明变量时，该变量的作用域就是该方法。

如果您也希望能够在该方法之外使用该变量，您将有两个选择：

返回变量：

```
 public static string OFDMethod()
    {
       using( var ofd = new OpenFileDialog() )
       {   
           ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";
           if( ofd.ShowDialog() == DialogResult.OK )
           {
               return ofd.Filename;
           }
           else
           {
                return string.Empty;
           }
       }
    } 
```

或为该变量制作一个输出参数（在这种情况下我当然不喜欢）

```
 public static void OFDMethod(out string selectedFilename)
    {
       using( var ofd = new OpenFileDialog() )
       {   
           ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";
           if( ofd.ShowDialog() == DialogResult.OK )
           {
               selectedFilename = ofd.Filename;
           }
           else
           {
                selectedFilename = string.Empty;
           }
       }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:45:17.283

我猜你想要的是

```
static class GlobalClass
{
 public static OpenFileDialog OFDbutton()
  {
   OpenFileDialog ofd = new OpenFileDialog();
   ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";
   DialogResult dr = ofd.ShowDialog();
   return ofd;
  }
} 
```

返还`OpenFileDialog`对象。现在你可以

```
OpenFileDialog ofd = globalclass.ofdbutton(); //Calling the function
label1.text=ofd.filename; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:46:09.360

更改方法以返回文件名或对话框对象本身或将 openfiledialog 移动到方法外部的单独属性中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T08:46:20.473

像这样做 -

```
static class GlobalClass
{
    public static string OFDbutton()
    {
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.Filter = "Image files|*.jpg;*.jpeg;*.png;*.gif";
        DialogResult dr = ofd.ShowDialog();
        return ofd.FileName;
    }
}

lable1.text = GlobalClass.OFDbutton(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T09:33:30.773

> 如何在该方法之外使用在方法中声明的变量？

你不能。您可以将声明移到方法之外。然后它成为包含类的一个**字段**。

但正如许多其他人所说，在这种情况下，文件名更好`return`。

方法向外界“展示”的唯一内容是参数（它可能会改变它们引用的对象；或者如果它们是`ref`或则分配给它们`out`）和返回值。

# jsf - 验证后 jsf 无法重置值

> ID：11428702
> 
> 赞同：1
> 
> 时间：2012-07-11T08:40:09.097
> 
> 标签：jsf, primefaces, java-ee-6

我有一个由两个 p:calendar 组件实现的 jsf 复合组件。该想法是选择第一个日历时，需要重置第二日历的值。验证发生时出现问题，并且未执行第二个日历的重置。

阅读帖子后，我决定在我的验证器中使用 EditableValueHolder。我有自定义验证器：我在其中添加了以下代码：

```
@Override

public void validate(FacesContext fc, UIComponent uic, Object o) throws ValidatorException {
//....
resetValues(fc);
}

public void resetValues(FacesContext fc) {
    PartialViewContext partialViewContext = fc.getPartialViewContext();
    Collection<String> renderIds = partialViewContext.getRenderIds();
    UIComponent input;
    UIViewRoot viewRoot = fc.getViewRoot();
    for (String renderId : renderIds) {
        input = viewRoot.findComponent(renderId);
        if (input.isRendered() && input instanceof EditableValueHolder) {
            EditableValueHolder editableValueHolder = (EditableValueHolder) input;
            editableValueHolder.setSubmittedValue(null);
            editableValueHolder.setValue(null);
            editableValueHolder.setValid(true);
            editableValueHolder.setLocalValueSet(false);
        }
    }
} 
```

调试后，我可以看到每个代码行都通过了，但是 jsf 端没有发生任何事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T02:35:46.907

现在不是重置值的正确时机。无论如何，在方法离开后它们将被当前组件覆盖，`validate()`一旦它得到验证，它们也会被第二个日历覆盖。您需要在更新模型值阶段*之后*的某个地方执行重置，最好是在调用操作阶段之前，以便您有机会在操作（侦听器）方法中更改模型值。您可以为此使用 an`ActionListener`或 a `PhaseListener`。

顺便说一句，JSF 实用程序库[OmniFaces 对此](http://omnifaces.org)有一个可重用的解决方案，其风格为[`ResetInputAjaxActionListener`](http://showcase.omnifaces.org/eventlisteners/ResetInputAjaxActionListener).

# asp.net - 指定在父页面和子页面中都可以使用的背景图像

> ID：11428703
> 
> 赞同：0
> 
> 时间：2012-07-11T08:40:14.293
> 
> 标签：asp.net, directory, filenames

我正在为模块使用背景图像。如果我写

```
background = "DesktopModules/DNAiusParallelSlider/Images/waves.gif"; 
```

它在父页面中工作正常，但在子页面中不起作用。如果我写

```
background = "../DesktopModules/DNAiusParallelSlider/Images/waves.gif"; 
```

它适用于子页面，但不适用于父页面。

如何指定适用于所有级别的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:42:34.327

试试“~”，比如：

```
 backgrd = "~/DesktopModules/DNAiusParallelSlider/Images/waves.gif"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:41:04.713

您正在使用相对 URL。这意味着它们是**相**对于您页面的当前目录的。

使用**绝对**URL：

```
/DesktopModules/DNAiusParallelSlider/Images/waves.gif 
```

在此处阅读有关绝对和相对 URL 的更多信息：

[http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3](http://www.webdevelopersnotes.com/design/relative_and_absolute_urls.php3)

# c# - 使用其标识名称从 DataTemplate 中访问控件

> ID：11428707
> 
> 赞同：2
> 
> 时间：2012-07-11T08:40:36.023
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，我有一个位于网格控件内的 ComboBox 控件。在 XAML 中，我为 ComboBox 分配了一个名称：

```
<DataGridTemplateColumn Header="Status">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock VerticalAlignment="Center" Text="{Binding name_ru}" Width="Auto" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox Name="stcom" Style="{DynamicResource ComboBoxStyle}" SelectionChanged="status_SelectionChanged" Height="auto" Width="Auto">
                 <ComboBox.BorderBrush>
                     <SolidColorBrush Color="{DynamicResource Color1}"/>
                 </ComboBox.BorderBrush>
            </ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

使用 FindName(string) 方法，我尝试使用关联名称来引用 ComboBox：

```
ComboBox stcom
        {
            get
            {
                return (ComboBox)FindName("stcom");
            }
        }

 if (stcom != null)
            {
                stcom.ItemsSource = list;
            } 
```

但显然无法找到控件，因为引用`stcom`仍然为空。

现在的问题是如何使用它的 name 属性来引用我的 ComboBox ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-10T18:21:00.500

答案是：

```
<Style x:Key="CheckBoxStyle1" TargetType="{x:Type CheckBox}">
  <Setter Property="Template">
   <Setter.Value>
    <ControlTemplate TargetType="{x:Type CheckBox}">
     <StackPanel Orientation="Horizontal">
      <Grid>
       <TextBlock Name="tbUserIcon" Text="t1" />
       <TextBlock Name="tbCheck"  Text="✓" />
      </Grid>
     </StackPanel>
    </ControlTemplate>
   </Setter.Value>
  </Setter>
 </Style> 
```

和 C#：

```
checkBox.ApplyTemplate();
var tbUserIcon= (TextBlock)checkBox.Template.FindName("tbUserIcon", checkBox); 
```

不要忘记 checkBox.ApplyTemplate() 在 Template.FindName() 之前，这很重要！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:52:43.293

首先，您必须访问已应用它的控件模板，然后您可以通过名称找到模板的元素。看看 MSDN 知识库：

*   [如何：查找 ControlTemplate 生成的元素](http://msdn.microsoft.com/en-us/library/bb613586.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:49:57.520

您不能使用名称访问属于 DataTemplate 的控件。

您可以尝试阅读一些解决方法，例如

*   [WPF - 从 WPF 中的 DataTemplate 中查找控件](http://kishor-naik-dotnet.blogspot.co.at/2010/10/wpf-find-control-from-datatemplate-in.html)

例如，您还可以查看有关 SO 发布此主题的数十篇帖子

*   [这里](https://stackoverflow.com/questions/6137967/getting-an-object-reference-by-name-from-a-datatemplate)
*   [这里](https://stackoverflow.com/questions/10162288/access-current-item-in-a-datatemplate)
*   [这里](https://stackoverflow.com/questions/6229514/access-control-within-datatemplate)
*   [这里](https://stackoverflow.com/questions/1380925/programmatically-access-a-control-from-a-datatemplate)
*   [这里](https://stackoverflow.com/questions/9835214/how-to-access-the-label-inside-datatemplate)
*   [这里](https://stackoverflow.com/questions/3450607/access-element-inside-silverlight-datatemplate)
*   [这里](https://stackoverflow.com/questions/5181063/how-to-access-a-specific-item-in-a-listbox-with-datatemplate)
*   [这里](https://stackoverflow.com/questions/4586106/wpf-how-to-access-control-from-datatemplate)

# objective-c - 阻塞和保留循环

> ID：11428712
> 
> 赞同：6
> 
> 时间：2012-07-11T08:40:57.760
> 
> 标签：objective-c, ios, block

一个小问题：为什么 Xcode 抱怨这`listing 1`会导致一个保留周期，而`listing 2`它却没有？在这两种情况下`_clients`都是一个`int`实例变量。在`listing 2`它被分配`0`在`init`方法中。

背景信息：我想在块中执行循环，只要至少有一个客户端从 iPhone 加速度计请求更新，我将其发布到 redis 通道。如果没有更多客户端，循环将退出并停止发布加速度计数据。

`Listing 2`来自我编写的一个小型测试应用程序，以验证我的想法是否有效。`Listing 1`在实际项目中实现。

## 清单 1

```
- (id)init {
  self = [super init];

  if (self) {
    _clients = 0;

    /**
     * The callback being executed
     */
    _callback = ^ {
      while (_clients > 0) { // Capturing 'self' strongly in this block is likely to lead to a retain cycle
        NSLog(@"Publish accelerometer data to redis (connected clients: %d)", _clients);
      }
    };
  }

  return self;
} 
```

## 清单 2

```
- (void)touchedConnectButton:(id)sender {
  _clients += 1;

  dispatch_queue_t concurrentQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
  dispatch_async(concurrentQueue, ^() {
    while(_clients > 0) {
      NSLog(@"Connected clients: %d", _clients);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T08:50:00.973

在这两个清单中，您指的是一个实例变量，因此隐含地捕获了 self. 一个坚强的自己。

这导致您的问题的第一个解决方案：

```
int clients = _clients;
// use `clients` instead of `_clients` in your blocks 
```

或者，您可以使用弱自我：

```
id __weak weakself = self;
// use `weakself->_clients` in your blocks 
```

清单 1 中出现错误的原因是该块捕获了 self 并且该块存储在同一个 self 的实例变量中，从而导致了一个保留循环。上述两种解决方案都可以解决该问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T08:49:17.697

清单 1 中有一个保留循环，因为在清单 1 中 self 保留了 ivar _callback，您可以在其中访问另一个 ivar，_clients，并且因为 _clients 是一个原始 var，所以块保留 self 来访问它！

在清单 2 中，块由队列而不是自身保留。

# c# - 获取“Activex 组件无法创建对象”

> ID：11428716
> 
> 赞同：0
> 
> 时间：2012-07-11T08:41:10.533
> 
> 标签：c#, com, registry

我正在尝试从 VB 脚本代码调用 C# 函数，我收到“Activex 组件无法创建对象”错误。

我做了以下事情。

1.  使用 ProgID 和 Comvisible True 和强命名创建类库
2.  使用 RegAsm.exe /codebase dllpath 注册了 dll（Dll 注册成功，我可以在注册表中看到）
3.  使用 VB 脚本代码创建对象并调用 C# 函数，如下所示。

```
Option Explicit
Dim testwfhandler
Set testwfhandler= CreateObject("CoreComponentWorkflow.WorkflowHandler")
If Not testwfhandler Is Nothing Then
    Call testwfhandler.test()
End If
Set testwfhandler= Nothing 
```

我正在从安装在我的服务器中的第三方应用程序（Tridion 工作流程）执行此 VB 脚本。

不知道为什么会出现上述错误，当我直接从服务器执行相同的代码时，它工作正常。

test() 这个函数只会创建一个日志文件并在其中添加一些文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T10:39:18.583

> 答案已经通过评论提供，但我认为提供一个真实的答案是有意义的，这样其他人就可以很容易地找到它。

根据加载/执行 VBScript 的方式，您应该使用 32 位或 64 位版本的 RegAsm.exe 注册 DLL。

在 64 位操作系统上，您应该可以在以下位置找到 32 位版本的 regasm，`C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe`

并且应该在 64 位版本的 regasm 中， `C:\Windows\Microsoft.NET\Framework64\v4.0.30319\RegAsm.exe`

如果您想在 64 位机器上以 32 位模式自己[运行 VBScript，请参阅如何在 64 位机器上以 32 位模式运行 VBScript？](https://stackoverflow.com/questions/2806584/how-do-i-run-a-vbscript-in-32-bit-mode-on-a-64-bit-machine)

# iphone - 导航控制器的根视图控制器

> ID：11428718
> 
> 赞同：0
> 
> 时间：2012-07-11T08:41:18.087
> 
> 标签：iphone, ios, xcode

我有这样的视图控制器：

* * *

```
startViewController ------> menuViewController 
                                          \
                                           \ ------> ImportantViewController 
```

* * *

从`startMenu`我推`menuView`然后我再次推`importantView`，我已将`importantView`其作为我的 rootViewcontroller 使其成为我的父视图，如下所示：

```
UINavigationController *navControl = [[UINavigationController alloc] initWithRootViewController: vc];
[self presentModalViewController: navControl animated: YES]; 
```

从那以后，我`importantView`通过以下方式推送了视图：

```
[self.navigationController pushViewController:vc animated:YES]; 
```

现在我的概率是这样的：

![在此处输入图像描述](../Images/b7a251685557cb6d66129e7a836dde31.png)

`ImportantVIew`当我`rootView`推到`menuView`推到`ViewA` 然后推到视图 B 然后选择是返回`menuView`还是返回`ViewA`。

我的**问题**是：我想将 my`ViewB`作为 rootView，然后当我转到`ImportantView`它时将它返回为 as `rootView`。是否可以有 2 个 rootView？还是我需要互相替换？

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:50:52.723

一直在更改根视图控制器的原因是什么？

通过 viewA 和 viewB 循环调用，您将构建无穷无尽的视图控制器堆栈。这可能不是你想要做的。

退后一步，重新思考你想要达到的目标。您只想在 viewA 和 viewB 之间切换吗？在这种情况下，您应该选择与通常的 pushViewController 不同的架构/模式。阅读一些关于 removeFromParentViewController 或 transitionFromViewController:toViewController: 的内容。或者自己熟悉操作视图控制器链。这些东西可能有助于实现您想要创建的用户体验，而无需构建无穷无尽的视图控制器堆栈。

# jquery - 如何使用 jquery 在另一个 div 中移动 div（包含图像）

> ID：11428719
> 
> 赞同：0
> 
> 时间：2012-07-11T08:41:18.973
> 
> 标签：jquery, jquery-ui

我需要将图像 div 移动到其他具有效果和动画的 div。我怎么能做到这一点？

我的代码：

```
 var div2Pos = $("#marque").position();
    var div2Width = $("#marque").css("width");
    var div2Height = $("#marque").css("height");

    $("#img-div").animate({'left':div2Pos.left, 'width':div2Width, 'height':div2Height}, 1000); 
```

其中“#marque”是我的目标 div，“#image-div”是我的原始 div

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:28:26.507

您需要使元素绝对动画到目标的绝对位置，并且当动画结束时删除并附加元素并删除绝对位置

```
 var des = $(".destnation").position();
        var el = $(".toMove");
        el.css("position", "absolute");
        el.animate({ top: des.top+"px" ,left :des.left+"px"}, 2000, undefined, function () {
            el.remove().appendTo(".destnation").css("position", "static");
        }); 
```

请参阅提琴手示例 [http://jsfiddle.net/yamsalm/3U52z/](http://jsfiddle.net/yamsalm/3U52z/)

# c# - ASP.NET 中 Ajax 的相互依赖下拉列表

> ID：11428721
> 
> 赞同：0
> 
> 时间：2012-07-11T08:41:32.563
> 
> 标签：c#, asp.net, ajax, drop-down-menu

我有 2 个下拉列表 ( `ddl_customername`) 和 ( `ddl_customercode`)。

我有 sqldatasource1`(select customername, customercode from tbl_customers)`

我想根据另一个使用 AJAX 的所选项目来更改`selecteditem`我的，`dropdownlists`

这个问题看起来很基本，但我无法实现实现该目标的结构。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:13:34.413

为您的 ajax 调用创建 wcf 服务。您可以使用 wcf 和 jquery 获得很多价值。

[http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call](http://www.codeproject.com/Articles/128478/Consuming-WCF-REST-Services-Using-jQuery-AJAX-Call)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T07:33:58.590

[http://ajax.net-tutorials.com/basics/introduction/](http://ajax.net-tutorials.com/basics/introduction/)

用更新面板覆盖 2 个下拉列表，并相互提供触发器可以解决问题。

# c# - 如何创建反向png图像？

> ID：11428724
> 
> 赞同：4
> 
> 时间：2012-07-11T08:41:45.837
> 
> 标签：c#, .net, wpf, onpaint

我正在创建在我的底座上绘制的 png 图像，从底座我可以保存一个 png 图像，供您参考

```
Graphics g = e.Graphics;
 ....
g.DrawLine(pen, new Point(x, y), new Point(x1, y1));
 .....
base.OnPaint(e);

using (var bmp = new Bitmap(500, 50))
{
    base.DrawToBitmap(bmp, new Rectangle(0, 0, 500, 50));
    bmp.Save(outPath);
} 
```

这是单色透明图像，现在我如何反转这个图像，比如填充任何颜色的 png，真实图像部分应该是透明的，有没有可能？

位细节：所以透明将变为不透明，有填充的地方将变为透明

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T08:58:01.483

如果您愿意使用[`unsafe`](http://msdn.microsoft.com/en-us/library/t2yzs44b.aspx)代码，还有一种更快的方法：

```
private unsafe void Invert(Bitmap bmp)
{
    int w = bmp.Width, h = bmp.Height;
    BitmapData data = bmp.LockBits(new Rectangle(0, 0, w, h), ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

    int* bytes = (int*)data.Scan0;
    for ( int i = w*h-1; i >= 0; i-- )
        bytes[i] = ~bytes[i];
    bmp.UnlockBits(data);
} 
```

请注意，这不关心颜色，也会反转这些颜色。如果您希望使用特定的颜色，则必须对代码进行一些修改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-11T08:48:08.457

**编辑** *（感谢[托马斯](https://stackoverflow.com/users/1259137/thomas)符号）*

```
public void ApplyInvert()  
{  
    byte A, R, G, B;  
    Color pixelColor;  

    for (int y = 0; y < bitmapImage.Height; y++)  
    {  
        for (int x = 0; x < bitmapImage.Width; x++)  
        {  
            pixelColor = bitmapImage.GetPixel(x, y);  
            A = (byte)(255 - pixelColor.A); 
            R = pixelColor.R;  
            G = pixelColor.G;  
            B = pixelColor.B;  
            bitmapImage.SetPixel(x, y, Color.FromArgb((int)A, (int)R, (int)G, (int)B));  
        }  
    }  
} 
```

从这里开始：[C#中的图像处理：反转图像](http://www.smokycogs.com/blog/image-processing-in-c-sharp-inverting-an-image/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-23T23:32:19.677

对于任何想要一种快速方法来反转位图颜色而不使用不安全的人：

```
public static void BitmapInvertColors(Bitmap bitmapImage)
{
    var bitmapRead   = bitmapImage.LockBits(new Rectangle(0, 0, bitmapImage.Width, bitmapImage.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppPArgb);
    var bitmapLength = bitmapRead.Stride * bitmapRead.Height;
    var bitmapBGRA   = new byte[bitmapLength];
    Marshal.Copy(bitmapRead.Scan0, bitmapBGRA, 0, bitmapLength);
    bitmapImage.UnlockBits(bitmapRead);

    for (int i = 0; i < bitmapLength; i += 4)
    {
        bitmapBGRA[i]     = (byte)(255 - bitmapBGRA[i]);
        bitmapBGRA[i + 1] = (byte)(255 - bitmapBGRA[i + 1]);
        bitmapBGRA[i + 2] = (byte)(255 - bitmapBGRA[i + 2]);
        //        [i + 3] = ALPHA.
    }

    var bitmapWrite = bitmapImage.LockBits(new Rectangle(0, 0, bitmapImage.Width, bitmapImage.Height), ImageLockMode.WriteOnly, PixelFormat.Format32bppPArgb);
    Marshal.Copy(bitmapBGRA, 0, bitmapWrite.Scan0, bitmapLength);
    bitmapImage.UnlockBits(bitmapWrite);
} 
```

Bitmap GetPixel 和 SetPixel 非常慢，此方法通过将 Bitmap 像素复制到字节数组中来工作，然后您可以循环并更改，最后再将像素复制回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T09:51:42.360

当您说将透明部分反转为颜色时，您是否将真实颜色存储在刚刚设置为完全透明的 PNG 图像中？许多程序会通过从透明度中删除颜色数据来优化 png，这样您就无法反转它。

颜色可以转换为透明度但透明度（没有基础颜色）不能转换为颜色。

如果幸运的话，您的 PNG 将未经优化，并且仍然具有完整的原始颜色数据，但如果您从用户输入中执行此操作，那么它在大部分情况下都不起作用。

# ruby-on-rails - 如何使用考拉将用户生成的照片发布到 Facebook？

> ID：11428729
> 
> 赞同：2
> 
> 时间：2012-07-11T08:42:18.730
> 
> 标签：ruby-on-rails, koala

我在 Rails 3.2 应用程序中使用 Koala gem。

我正在尝试将包含用户生成的照片的操作发布到 Facebook 应用程序。根据[FB的文档](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)，我需要发布的网址是：

```
https://graph.facebook.com/uid/namespace:action?object=http://path/to/page&image[0][url]=http://path/to/image.jpg&image[0][user_generated]=true 
```

如果我使用 Facebook 的调试器手动测试它，它会完美运行。但是我在使用考拉时遇到了麻烦。

我正在使用以下方法：

```
Koala::Facebook::API.new(app_token).put_connections( uid, namepsace:action, url ) 
```

如果我使用：

```
url = "http://path/to/page" 
```

然后该动作正确发布到 Facebook，但没有用户生成的照片。

如果我使用：

```
url = "http://path/to/page&image[0][url]=http://path/to/image.jpgimage[0][user_generated]=true" 
```

我在日志中收到错误

```
#<Koala::Facebook::APIError: OAuthException: (#3502) Object at URL http://path/to/page&image[0][url]=http://path/to/image.jpg&image[0][user_generated]=true has og:type of 'website'. The property 'object' requires an object of og:type 'namespace:object'.  (http response code: 404)> 
```

使用考拉构建所需帖子网址的正确方法是什么？或者什么是开始调试我当前代码的好方法？还是我完全走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:48:12.523

我也为此苦苦挣扎，因为 Facebook 的文档和考拉的文档在我看来都不是很清楚：

```
Koala::Facebook::API.new(access_token).put_connections(
  uid,
  "namespace:action",
  "product" => "[URL_TO_PRODUCT]",
  "image[0][user_generated]" => true,
  "image[0][url]" => "[URL_TO_USER_GENERATED_IMAGE]",
  "fb:explicitly_shared" => true,
  "message" => "[DESCRIPTION]"
) 
```

另一件事是目标 URL 必须具有`og:type="namespace:product"`

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:40:17.230

您是否在 Facebook Debugger 中检查过您的网址？ [http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

从您得到的错误消息看来，您应该将**og:type**设置为**namespace:object**并获取自定义图像，您应该将**og:image**设置为**http://your.domain.com/path/to/user/generated/image**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T16:48:42.153

我和你一样使用 put_connections，但这不是必需的，你可以使用**put_wall_post**方法。

我请求了许可：**publish_actions**。

在我的控制器的方法中，我有：

```
api = Koala::Facebook::API.new(@oauth_token)
api.put_wall_post("Testing post on Timeline", {
    :name => "Im a wall post",
    :link => "http://www.example.com",
    :caption => "Im a caption",
    :description => "Im a long description of an attachment",
    :picture => "http://www.example.com/picture.jpg" 
}, @users_facebook_id) 
```

有了这个，您可以发布到用户的时间轴，有图像、描述等。

# android - 我们可以在 android NDK 代码中使用 System IPC

> ID：11428730
> 
> 赞同：6
> 
> 时间：2012-07-11T08:42:23.457
> 
> 标签：android, c, android-ndk

在这里，我想使用 System IPCs 方法，例如

```
 <sys/msg.h>   /* SysV message queues */
  <sys/ipc.h>   /* General IPC definitions */ 
```

这里我的 android NDK 代码是 C 语言的，我使用消息队列 IPC 机制与其他 C 应用程序进行通信。

所以请让我知道有什么方法可以实现这个 IPC 目标吗？如何在 android NDK 代码中实现这种 IPC 机制？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-11T09:27:23.697

一年前，我写了一份关于这个话题的调查。这是其中的一部分：

2 Unix IPC机制

Unix IPC 机制包括：

*   Unix 信号。
*   Unix管道。
*   Unix 域套接字。

同时 Unix System-V IPC 机制不包含在 Android 中。Bionic 有意不提供对 System-V IPC 机制的支持，例如 semget()、shmget()、msgget() 提供的机制。这样做的原因是为了避免拒绝服务 [11]。

2.1 Unix 信号

我们可以在[维基百科](http://en.wikipedia.org/wiki/Signal_%28computing%29)中找到对 unix 信号如何工作的最佳解释之一：“信号是 Unix、类 Unix 和其他兼容 POSIX 的操作系统中使用的一种有限的进程间通信形式。本质上，它是发送给进程的异步通知，以通知它发生的事件。当信号发送到进程时，操作系统会中断进程的正常执行流程。在任何非原子指令期间都可以中断执行。如果进程先前已注册信号处理程序，则执行该例程。否则将执行默认的信号处理程序。” 似乎unix信号在Android编程中被使用。此外，一些信号在[调试模式下被禁用](http://filippos.vasilak.is/blog/2011/04/20/unix-signals-in-android-ndk/). 但是，这是一种可能的 IPC 机制。

2.2 Unix管道

管道是一种通信机制，允许直接连接一个进程的输出流和另一个进程的输入流。有两种类型的 unix 管道：命名管道和未命名管道。似乎在 Android 编程中只使用了命名管道。在这种情况下，两个进程使用连接输出和输入的特殊文件进行交互。值得一提的是，管道是一种单向的通信方式，即一个进程始终是读卡器，第二个进程始终是写卡器。通信文件必须在 Linux 文件系统上创建，因为 sdcard 的 FAT32 不允许创建管道。[这是一个如何在Android](http://habrahabr.ru/blogs/android/108103/)中创建和使用命名 unix 管道的示例（俄语）。此示例的源代码可在[此处](http://code.google.com/p/androiddemos/)找到。

2.3 Unix域套接字

与 unix 管道相反，Unix 域套接字允许以两种方式传输信息：从服务器到客户端和从客户端到服务器。Unix 域套接字和 unix 管道使用文件系统作为地址名称空间。这意味着服务器和客户端使用特殊文件来建立通信。考虑到 Android，有两个类用于对 unix 域套接字进行编程：LocalServerSocket 和 LocalSocket。所有的实现都可以围绕这两个类构建，并且不需要使用本机代码来制作 unix 域套接字。[这里](http://www.devdaily.com/java/jwarehouse/android/core/java/android/net/LocalServerSocket.java.shtml)展示了一个如何使用 unix 域套接字的简单示例。

[11] Android ndk 文档。android-ndk-r6b 的 NDK 文档

# python - 我需要支持图形对象操作的python库

> ID：11428733
> 
> 赞同：0
> 
> 时间：2012-07-11T08:42:40.957
> 
> 标签：python, wxpython

是否存在 Python 库，它为我提供了使用鼠标事件操作 2D 图形对象的优势。SVG + Javascript 适用于网络应用程序，但我需要构建桌面应用程序，允许用户拖动矢量对象并进行“onmouseover”、“onmousedown”等事件...

它不必基于 SVG，但允许与 SVG+Javascript 类似的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:47:53.417

您可以使用[PyQT](http://www.riverbankcomputing.co.uk/software/pyqt/intro)（Qt 的 Python 包装器）。QGraphicsScene 和 QGraphicsView 类就是这样做的。

这里有一个例子：http: [//lateral.netmanagers.com.ar/stories/BBS53.html](http://lateral.netmanagers.com.ar/stories/BBS53.html)。

我已经多次使用它们，它们具有良好的性能，非常灵活且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T11:01:22.407

开罗的 Pycairo 绑定是另一种选择[http://cairographics.org/pycairo/](http://cairographics.org/pycairo/)

# php - 使用 oauth 制作我自己的 api

> ID：11428735
> 
> 赞同：6
> 
> 时间：2012-07-11T08:42:54.793
> 
> 标签：php, api, oauth

海,

我想制作自己的 api (api.mysite.com)。
但我想用 OAuth 保护它。
我找不到关于如何实现它的好教程。

我想要这样的东西：

在 api.mysite.com 上作为 oauth 的文件：

- 用户发送签名的请求，我将所需的数据返回给他（首先向他发送 1 或 0 之类的内容）。

在 localhost/testapi 上作为文件 index.php:
- 用户在哪里签署请求并将其发送到 api.mysite.com 处理它并在一切正常时返回结果

我在哪里可以找到解释在 api.mysite.com 上放置什么、在 localhost/testapi 中放置什么以及 sql 结构的最佳教程？

谢谢你，对不起我的愚蠢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:49:23.500

一些有用的链接：

*   [oauth2 提供程序在 php 中的符合标准的实现](http://code.google.com/p/oauth2-php/)
*   [教程](http://djpate.com/2011/01/13/how-to-write-a-complete-oauth-provider-in-php5/)
*   另外，搜索stackoverflow，之前有类似你的问题

# javascript - 跨浏览器窗口事件？

> ID：11428736
> 
> 赞同：2
> 
> 时间：2012-07-11T08:42:55.123
> 
> 标签：javascript, internet-explorer, javascript-events

是否可以触发由单独的浏览器窗口拾取的事件？也许用javascript。

即，如果我的网站打开了另一个窗口来显示摘要产品信息，是否可以在主窗口中选择不同的产品时通知该窗口进行更新？

需要在 IE 中工作，但不需要在 Chrome 或其他浏览器上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:22:03.510

使用这样的代码：

**父窗口**

```
var func = function() {...}
child = window.open(...) 
```

**子窗口**

```
window.opener.func(); // Call function in parent window 
```

您也可以从父窗口调用子窗口中的函数，但有一个问题：您必须等到子窗口完成加载；`window.open()`是异步的。

更多细节：[使用 JavaScript 从子窗口访问父窗口，反之亦然](http://www.codeproject.com/Articles/25388/Accessing-parent-window-from-child-window-or-vice)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:28:16.660

有**几个**选项。

1.  [跨文档消息传递](http://www.w3.org/TR/webmessaging/#web-messaging)允许您在窗口之间传递事件。为此，您需要拥有目标窗口的句柄，只有当目标是`<iframe>`（例如，通过`window.frames`，或`window.parent`来自 iframe 的 POV）或者目标是当前窗口打开的窗口时，您才能真正获取该句柄通过`window.open()`或`window.opener`从弹出窗口的 POV。
2.  [Shared Workers](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)可以连接其他不相关的窗口，就像跨文档消息传递一样。不过， Shared Workers[仅在 Chrome 和 Safari](http://caniuse.com/#search=shared%20web%20worker)中可用。
3.  [服务器发送的事件](http://www.w3.org/TR/eventsource/)可以使用服务器来代理您原本不相关的窗口之间的通信。这需要到服务器的往返行程（因此不完全基于客户端）并且[在 Internet Explorer 中不可用](http://caniuse.com/#feat=eventsource)。
4.  [Web Sockets](https://developer.mozilla.org/en/WebSockets/)也是一种选择。它们也受到服务器往返的影响，并且[在 Internet Explorer 中不可用](http://caniuse.com/#search=web%20socket)。有[socket.io](http://socket.io/)，它将这个功能填充到旧的 Internet Explorer 中 - 所以可能是一个可行的解决方案。
5.  一个骇人听闻的解决方案是[滥用 LocalStorage](http://jsfiddle.net/rodneyrehm/bAhJL/)。它适用于现代浏览器和 IE8。
6.  [jQuery BrowserEvent](https://github.com/medialize/jQuery-browserEvent/)是我以前玩过的东西。它滥用`window.event`浏览器和浏览器的本地存储能力来模拟浏览器之间的传递事件。不过，这不是您想在生产环境中使用的东西。

* * *

德国人可能想看看[HTML5 中的 Kommunikations-APIs - Welche wann nutzen？](http://www.peterkroener.de/echtzeit-kommunikations-apis-in-html5-welche-wann-nutzen/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:47:31.700

**是的，如果**在父窗口中使用 window.open 方法打开带有产品信息的窗口，那将是可能的。

这样，您可以诱导这两者之间的通信（严格来说，没有事件），但可以使用一些额外的代码。

# php - PHP：包含不同的根目录

> ID：11428748
> 
> 赞同：2
> 
> 时间：2012-07-11T08:43:23.310
> 
> 标签：php, include, directory

所以我有：

页面 A -`/WWW/index.php`

B页 -`/WWW/folder/index.php`

C页 -`/WWW/assets/functions.php`

我希望能够使用同一行代码在页面 A 和页面 B 上包含页面 C。

现在对于页面 A：`include "/assets/functions.php";`

B页：`include "../assets/functions.php";`

“../”是我的烦恼。根据文件嵌套在文件夹中的次数，我必须添加一个“../”

我试过：`include dirname(__FILE__) . "/assets/functions.php";`

但它适用于页面 A 而不是页面 B。

同样在 function.php 中，我希望能够包含其他 PHP 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:44:48.727

```
require_once($_SERVER["DOCUMENT_ROOT"]. "/assets/functions.php"); 
```

`require_once`用于包含您的文件一次。

`$_SERVER["DOCUMENT_ROOT"]`用于获取您的根目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-11T08:46:44.637

尝试一下

```
require rtrim(dirname(__FILE__), '/\\') . DIRECTORY_SEPARATOR . 'my_file.php'; 
```

# java - 如何在 Java 中提供本地 PDF 文件的下载？

> ID：11428750
> 
> 赞同：1
> 
> 时间：2012-07-11T08:43:27.663
> 
> 标签：java, pdf, download

我有 JBoss 作为应用程序服务器运行，并且在我的 HD 上的某个地方有一个 PDF 文件，当用户单击特定操作时会创建该文件。假设文件在这里：`C:/PDF/doonot/10.07.2012/doonot.pdf`. 我怎样才能提供这个文件作为下载？我已经为 CSV 文件做过，但我不知道如何用 PDF 来做。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:15:58.223

正如我所写的那样，[有没有一种通用的方法可以在 jsp 中下载所有类型的文件？](https://stackoverflow.com/questions/10702683/is-there-a-common-way-to-download-all-types-of-files-in-jsp/10703377#10703377)

你可以使用这样的东西：

```
public HttpServletResponse getFile (HttpServletRequest request ,HttpServletResponse httpServletResponse, .......){
          HttpServletResponse response = httpServletResponse;
          InputStream in =/*HERE YOU READ YOUR FILE AS BinaryStream*/

          String filename = "";
          String agent = request.getHeader("USER-AGENT");
          if (agent != null && agent.indexOf("MSIE") != -1)
          {
            filename = URLEncoder.encode(/*THIS IS THE FILENAME SHOWN TO THE USER*/, "UTF8");
            response.setContentType("application/x-download");
            response.setHeader("Content-Disposition","attachment;filename=" + filename);
          }
          else if ( agent != null && agent.indexOf("Mozilla") != -1)
          {
            response.setCharacterEncoding("UTF-8");
            filename = MimeUtility.encodeText(/*THIS IS THE FILENAME SHOWN TO THE USER*/, "UTF8", "B");
            response.setContentType("application/force-download");
            response.addHeader("Content-Disposition", "attachment; filename=\"" + filename + "\"");
          }

          BufferedOutputStream out = new BufferedOutputStream(response.getOutputStream());
          byte by[] = new byte[32768];
          int index = in.read(by, 0, 32768);
          while (index != -1) {
              out.write(by, 0, index);
              index = in.read(by, 0, 32768);
          }
          out.flush();

          return response;
} 
```

**更新：**

不要忘记您可以像这样使用 InputStream：

```
// read local file into InputStream
InputStream inputStream = new FileInputStream("c:\\SOMEFILE.xml"); 
```

或者你甚至可以像这样使用它

```
//read from database
Blob blob = rs.getBlob(1);
InputStream in = blob.getBinaryStream(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:49:27.603

您可以简单地编写一个读取 pdf 的 servlet 并将其写入响应输出流。

此处示例：[http ://www.java-forums.org/blogs/servlet/668-how-write-servlet-sends-file-user-download.html](http://www.java-forums.org/blogs/servlet/668-how-write-servlet-sends-file-user-download.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:52:21.297

是的，古斯塔夫是对的。Java 不区分文件类型。文件就是文件，如果你是为 csv 做的，它也应该适用于 pdf。

# iphone - UIAnimation导致按钮titleLabel在动画期间消失

> ID：11428752
> 
> 赞同：0
> 
> 时间：2012-07-11T08:43:32.777
> 
> 标签：iphone, objective-c, ios, uibutton, uianimation

我正在提交这个简单的动画，它会导致按钮缩小到 0 的宽度：

```
[UIView animateWithDuration:0.2
                 delay: 0.0
                 options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     [btnActionButton setFrame:CGRectMake(160, 10, 0, 55)];
                 }
                 completion:^(BOOL finished){
                 }]; 
```

现在的问题是，一旦动画开始，按钮的titleLabel就会自动隐藏......我使用模拟器的slowAnimation模式确保它。

是否有可能在动画过程中标签也随着帧而缩小，因为如果按钮标题在开始时消失似乎很尴尬。

提前致谢。奥贝德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:13:48.487

这是由于宽度0。

使用下面的代码。

```
[UIView animateWithDuration:0.2
             delay: 0.0
             options: UIViewAnimationOptionCurveEaseIn
             animations:^{
                 [btnActionButton setFrame:CGRectMake(160, 10, 50, 55)];
             }
             completion:^(BOOL finished){
             }]; 
```

代替 50 给出动画后按钮的宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:36:20.220

```
 [UIView animateWithDuration:0.2
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     [btnActionButton.titleLabel setCenter:CGPointMake(-64, btnActionButton.titleLabel.center.y)];
                     [btnDeleteButton setFrame:CGRectMake(160, 10, 128, 55)];
                 }
                 completion:^(BOOL finished){
                     [btnActionButton setFrame:CGRectMake(160, 10, 0, 55)];
                     [btnActionButton.titleLabel setCenter:CGPointMake(0, btnActionButton.titleLabel.center.y)];
                 }]; 
```

这就是我设法让它工作的方式......实际上，我想让第一个按钮消失，第二个按钮以滑动方式出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:57:37.083

也尝试为标签设置动画。我的意思是这样的：

```
[UIView animateWithDuration:0.2
             delay: 0.0
             options: UIViewAnimationOptionCurveEaseIn
             animations:^{
                 [btnActionButton setFrame:CGRectMake(160, 10, 0, 55)];
                 [btnActionButton.titleLabel setFrame:CGRectMake(  0,  0, 0, 55)];
             }
             completion:^(BOOL finished){
             }]; 
```

希望这可以帮助。

干杯!

# c++ - 递减原子计数器 - 但是 在某种条件下

> ID：11428753
> 
> 赞同：3
> 
> 时间：2012-07-11T08:43:36.527
> 
> 标签：c++, windows, synchronization

我想在这条线上实现一些东西：

```
 inline void DecrementPendingWorkItems()
        {
            if(this->pendingWorkItems != 0) //make sure we don't underflow and get a very high number
            {
                ::InterlockedDecrement(&this->pendingWorkItems);
            }
        } 
```

我怎样才能做到这一点，以便两个操作作为一个块是原子的，而不使用锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:15:47.083

最简单的解决方案是在整个部分周围使用互斥锁（以及对 的所有其他访问`this->pendingWorkItems`）。如果由于某种原因这是不可接受的，那么您可能需要比较和交换：

```
void decrementPendingWorkItems()
{
    int count = std::atomic_load( &pendingWorkItems );
    while ( count != 0
            && ! std::atomic_compare_exchange_weak( 
                    &pendingWorkItems, &count, count - 1 ) ) {
    }
} 
```

（这假设`pendingWorkItems`具有类型`std::atomic_int`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:54:23.533

您可以只检查结果，`InterlockedDecrement()`如果它恰好为负数（如果更可取，则为 <= 0）通过调用`InterlockedIncrement()`. 在其他适当的代码中应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:12:38.443

使用原子 CAS。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms683560(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683560(v=vs.85).aspx)

您可以使其无锁，但不能免费等待。

正如基里尔建议的那样，这类似于您的情况下的自旋锁。

我认为这可以满足您的需求，但我建议您在继续使用它之前考虑所有可能性，因为我根本没有测试过它：

```
inline bool
InterlockedSetIfEqual(volatile LONG* dest, LONG exchange, LONG comperand)
{
    return comperand == ::InterlockedCompareExchange(dest, exchange, comperand);
}

inline bool InterlockedDecrementNotZero(volatile LONG* ptr)
{
    LONG comperand;
    LONG exchange;
    do {
        comperand = *ptr;
        exchange = comperand-1;
        if (comperand <= 0) {
            return false;
        }
    } while (!InterlockedSetIfEqual(ptr,exchange,comperand));
    return true;
} 
```

关于为什么您的待处理工作项应该低于零的问题仍然存在。你真的应该确保增量的数量与减量的数量相匹配，一切都会好起来的。如果违反了这个约束，我可能会添加一个断言或异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:45:56.227

有一种叫做“SpinLock”的东西。这是一个非常轻量级的同步。

这是这样的想法：

```
//
//    This lock should be used only when operation with protected resource
//  is very short like several comparisons or assignments.
//
class SpinLock
{
 public:

      __forceinline SpinLock() { body = 0; }
      __forceinline void Lock()
           {
             int spin = 15;
             for(;;) {
               if(!InterlockedExchange(&body, 1)) break;
               if(--spin == 0) { Sleep(10); spin = 29; }
             }
           }

      __forceinline void Unlock() { InterlockedExchange(&body, 0); }

 protected:

    long   body;

}; 
```

样本中的实际数字并不重要。这种锁非常有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T08:53:52.957

您可以`InterlockedCompareExchange`在循环中使用：

```
 inline void DecrementPendingWorkItems() {
        LONG old_items = this->pendingWorkingItems;
        LONG items;
        while ((items = old_items) > 0) {
            old_items = ::InterlockedCompareExchange(&this->pendingWorkItems,
                                                     items-1, items);
            if (old_items == items) break;
        }
    } 
```

该`InterlockedCompareExchange`函数的作用是：

```
 if pendingWorkItems matches items, then
    set the value to items-1 and return items
  else return pendingWorkItems 
```

这是原子完成的，也称为*比较和交换*。

# python - 使用 Django 模板发送带有图像的 html 电子邮件

> ID：11428763
> 
> 赞同：1
> 
> 时间：2012-07-11T08:43:57.010
> 
> 标签：python, django, django-email

我正在尝试使用以下代码段：

[http://djangosnippets.org/snippets/2661/#c4539](http://djangosnippets.org/snippets/2661/#c4539)

但是我遇到了一些错误

1 ) 我无法导入 MIMEImage 表单电子邮件。我收到一个错误：没有名为 MIMEImage 的模块

**更新：**我有一个名为 email.py 的文件。不要使用与 Python 标准库模块同名的文件名。在这种情况下也不要忘记删除名为 email.pyc 的隐藏文件

2 ) 我不明白如何将它与 Django 的 EmailMessage 类一起使用。以下错误显示：“NoneType”对象在使用时没有属性“body”：

```
from django.core.mail.message import EmailMessage
from emails import localize_html_email_images

mail = EmailMessage('Hoi', template, 'from@example.com', headers={'Reply-To': 'another@example.com'})
email = localize_html_email_images(mail 
```

3）这是发送带有图像的html电子邮件的好方法还是有其他方法（无需安装其他软件包）？

我想要实现的是发送带有激活按钮的激活电子邮件。该按钮必须是附加到电子邮件的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:05:25.877

Send mail with html content: [http://www.djangofoo.com/250/sending-html-email](http://www.djangofoo.com/250/sending-html-email)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T08:45:41.917

我认为这些链接可能会对您有所帮助：[使用 Django 创建电子邮件模板](https://stackoverflow.com/questions/2809547/creating-email-templates-with-django)

和 :[使用 Django 的简单多部分电子邮件](http://www.rossp.org/blog/2007/oct/25/easy-multi-part-e-mails-django/)

# ajax - 无法在 ajax 函数中设置全局变量

> ID：11428765
> 
> 赞同：0
> 
> 时间：2012-07-11T08:43:59.080
> 
> 标签：ajax

我是 ajax 新手。请多多包涵。我的代码如下：

函数 checkempid(){

```
 var status;
    xmlHttp=GetXmlHttpObject();
    var urlemp="postemployee";
    urlemp=urlemp+"?employeeId="+document.PostAvailableBench.employeeId.value;
    xmlHttp.onreadystatechange=stateChangedemp ;
    xmlHttp.open("GET",urlemp,true);
    xmlHttp.send(null);
    var showdata;

    function stateChangedemp(){ 
    if(xmlHttp.readyState==4 || xmlHttp.readyState=="complete"){ 
    showdata = xmlHttp.responseText;
    alert(showdata);

     if(showdata.trim()=="available"){
        alert("inside if");
       saveReportFinished(true);
    }
    else{
        alert("inside else");
        saveReportFinished(false); 
        }
    }
    }

    function saveReportFinished(success) {
        if (success == true)
        {
        status = true;
        }
        else
        {
        status = false;
        }
    }

    function GetXmlHttpObject(){
    var xmlHttp=null;
    try{
      xmlHttp=new XMLHttpRequest();
     }
    catch (e) {
     try {
      xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");
      }
     catch (e){
      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
      }
     }
    return xmlHttp;
}

    return status; 
```

}

我试图在“saveReportFinished”函数中设置“status”，它是一个全局变量，并尝试使用“return status”返回状态。但它只返回初始值，而不返回saveReportFinished函数中的值。如果有人可以帮助我，我会很高兴.. 提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:50:45.833

我认为更好的方法是从 saveReportFinished 返回状态并避免使用全局。如果您返回与传入的值相同的值，我也有点困惑为什么要使用 saveReportFinished 方法...

# php - 如何根据服务时间禁用时间段？

> ID：11428768
> 
> 赞同：3
> 
> 时间：2012-07-11T08:44:23.197
> 
> 标签：php, time, duration, appointment, timeslots

我想要的只是根据我**的营业时间**计算时间段列表，并**阻止**或**禁用**那些预约的时间段。

我已经用我的问题完成了这些事情，坚持最后一项任务，如下所述。

```
My Service Duration = 60min.
My Today Busines Hours:
start time - 10:00 AM
end time - 3:00 PM 
```

我根据我今天的营业时间生成了 15 分钟的时隙列表：

```
$start = strtotime('10:00 AM');
$end = strtotime('3:00 PM');
for( $i = $start; $i <= $end; $i += (60*15)) 
{
    $slotlist[] = date('g:iA', $i);
}

//output
10:00AM
10:15AM
10:30AM
10:45AM
11:00AM
11:15AM
11:30AM
11:45AM
12:00PM
12:15PM
12:30PM
12:45PM
1:00PM
1:15PM
1:30PM
1:45PM
2:00PM
2:15PM
2:30PM
2:45PM
3:00PM 
```

**现在我已经预约了 3 个约会**

约会 | 开始时间到结束时间

* * *

预约 1 : 10:00AM 到 11:00AM (根据我的服务时间 60 分钟)
预约 2 : 11:15AM 到 12:15PM
预约 3 : 1:00PM 到 2:00PM

* * *

```
//array of all appointment start_time
$appointment_start_time = array('10:00AM','11:15AM','1:00PM'); 
```

**现在禁用那些已经在约会中预订的时间段**

```
foreach($slotlist as $single)
{
    if(in_array($single, $appointment_start_time))
    {
        echo "<input name=start_time type='radio' disabled  value='$single' />".$single; echo "<br>";

        $time = $single;                                                
        $event_length = 60-15;          // 60 is time duration                              
        $timestamp = strtotime("$time");                                
        $endtime = strtotime("+$event_length minutes", $timestamp);     
        $next_time = date('g:i A', $endtime);                       

        //calculate between slots (start-end time)
        $start = strtotime($single);
        $end = strtotime($next_time);
            for( $i = $start; $i <= $end; $i += (60*15)) 
            {
                $list2[] = date('g:iA', $i);
            }
    }
    else
    {   
        if(in_array($single, $list2))
        {
            echo "<input name=start_time type='radio' disabled  value='$single' />".$single; echo "<br>";
        }
        else
        {   

            echo "<input name=start_time type='radio'  value='$single' />".$single; echo "<br>";
        }
    }

}

//output
10:00AM -disabled
10:15AM -disabled
10:30AM -disabled
10:45AM -disabled
11:00AM
11:15AM -disabled
11:30AM -disabled
11:45AM -disabled
12:00PM -disabled
12:15PM
12:30PM
12:45PM
1:00PM -disabled
1:15PM -disabled
1:30PM -disabled
1:45PM -disabled
2:00PM
2:15PM
2:30PM
2:45PM
3:00PM 
```

现在要做的最后一个任务，如何删除那些不符合服务持续时间的时间段，例如：

```
11:00AM (single slot b/w 2 appointment, cover only 15min)

12:15PM -
12:30PM -(3 slot b/w 2 appointment, cover only 45min)
12:45PM - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:22:49.473

两天过去了，我让这件事成为可能

```
$slottimes = 15;
$duration = 60; 
$business_start = '10:00AM';
$business_end = '3:00PM';
echo "<b>Today's Wroking Hours $business_start to $business_end</b><br>";
echo "<b>Calendar Slot(s) Time:</b> $slottimes<br>";
echo "<b>Service Duration Time:</b> $duration<br><br>";
$start = strtotime($business_start);
$end = strtotime($business_end);
/*$endtimestamp = strtotime($business_end);
$end = strtotime("-$slottimes minutes", $endtimestamp);*/
    for( $i = $start; $i <= $end; $i += (60*$slottimes)) 
    {
        $slotlist[] = date('g:iA', $i);
    }

echo "<b>Generate Today's Available Appointment Time(s)</b><br>";
echo "<pre>"; print_r($slotlist); echo "</pre>";

echo "<b>Today's Booked Appointment(s)</b>";
$appstarttime = array('11:00AM', '11:15AM', '1:00PM', $business_end );          //business end-time always be in array
$previoustime = NULL;
$nexttime = array($business_end);

foreach($slotlist as $single)
{
    if(in_array($single, $appstarttime))
    {
        //calculate next time
        $time = $single;                                                
        $event_length = $duration-$slottimes;           // 60min Service duration time  - 15 slot time                          
        $timestamp = strtotime("$time");                                
        $endtime = strtotime("+$event_length minutes", $timestamp);     
        $next_time = date('g:i A', $endtime);                       

        //calculate between slots (start-end time)
        $start = strtotime($single);
        $end = strtotime($next_time);
            for( $i = $start; $i <= $end; $i += (60*$slottimes)) 
            {
                $nexttime[] = date('g:iA', $i);
            }

        //calculate previous time
        $time1 = $single;                                               
        $event_length1 = $duration-$slottimes;          // 60min Service duration time - 15 slot time                               
        $timestamp1 = strtotime("$time1");                              
        $endtime1 = strtotime("-$event_length1 minutes", $timestamp1);  
        $next_time1 = date('g:i A', $endtime1);                         

        //calculate between slots (start-end time)
        $start1 = strtotime($next_time1);
        $end1 = strtotime($single);
            for( $i = $start1; $i <= $end1; $i += (60*$slottimes)) 
            {
                $previoustime[] = date('g:iA', $i);
            }

    }
}
echo "<br>Appointment Start Time: ";
print_r($appstarttime);
echo "<br>";

echo "<br><strong>Previous Time: </strong>";
print_r($previoustime);
echo "<br>";

echo "<br><strong>Next Time: </strong>";
print_r($nexttime);
echo "<br>";

echo "<br><strong>Merge Both Time:</strong> ";
if($previoustime && $nexttime)
{
    $merge = array_merge($previoustime, $nexttime);
    print_r($merge);
}
echo "<br>";echo "<br>";

$flag1 = 0;
$flag2 = 0;
echo "<hr><b>Today's Available Time For Appointment:</b><hr>";
foreach($slotlist as $single)
{
    if(in_array($single, $merge))
    {
        echo "<input name=start_time type='radio' disabled  value='$single' />".$single; echo "<br>";
    }
    else
    {
        echo "<input name=start_time type='radio'  value='$single' />".$single; echo "<br>";
    }

    if(in_array($single, $merge))
    {
        $flag1 = 1;
    }
    else
    {
        $flag2 = 2;
    }

}

if($flag2 != 2)
{   echo "Sorry ! Today's all appointments has been booked."; }

echo "<hr>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:15:00.923

试试这个： 1.将第一个时间段与 $appointment_start_time[0] 比较，如果第一个时间段 > $appointment_start_time[0]-60min，禁用该时间段直到 $appointment_start_time[0]。

2.比较$appointment_start_time[1]和$appointment_start_time[0]，如果持续时间> 2小时（您的服务持续时间X 2），禁用$appointment_start_time[0]和$appointment_start_time[1]之间的时间段

3.比较 $appointment_start_time[2] 和 end-time，如果 end-time-120 < $appointment_start_time[2]，也禁用

# c# - 我如何在这个for循环c#中使用后台Worker

> ID：11428769
> 
> 赞同：0
> 
> 时间：2012-07-11T08:44:31.893
> 
> 标签：c#, windows, backgroundworker

如何在这个 for 循环中使用后台工作人员？

```
int tmax = 10;
int xmax = newbitmap.Width;
int ymax = newbitmap.Height;
for (int t = 0; t <= tmax; t += 1)
{
  for (int x = 0; x < xmax; x++)
  {
    for (int y = 0; y < ymax; y++)
    {
      if ((x / xmax) > (t / tmax))
      {
        Color originalco = newbitmap2.GetPixel(x, y);
        outp.SetPixel(x, y, originalco);
      }
      else
      {
        Color originalco3 = newbitmap.GetPixel(x, y); ;
        outp.SetPixel(x, y, originalco3);
      }

    }

    pictureBox1.Image = outp;
  }
} 
```

此循环是从右到左的擦除过渡，但它不显示过渡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T08:47:45.153

那是因为 backgroundWorker 在不同的线程中工作。您可以使用`backgroundworker.ReportProgress(0, outp)`

所以：您需要`BackgroundWorker.ProgressChanged`从 Vistual Studio 中的事件窗口注册事件，或者使用以下行：

```
backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged); 
```

方法：

```
 private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        var outp = (Bitmap)e.UserState;
        prictureBox.Image = outp;
    } 
```

你的代码应该是：

```
 int tmax = 10;
        int xmax = newbitmap.Width;
        int ymax = newbitmap.Height;
        for (int t = 0; t <= tmax; t += 1)
        {

            for (int x = 0; x < xmax; x++)
            {
                for (int y = 0; y < ymax; y++)
                {
                    if ((x / xmax) > (t / tmax))
                    {
                        Color originalco = newbitmap2.GetPixel(x, y);
                        outp.SetPixel(x, y, originalco);
                    }
                    else
                    {
                        Color originalco3 = newbitmap.GetPixel(x, y); ;
                        outp.SetPixel(x, y, originalco3);
                    }

                }

                backgroundWorker1.ReportProgress(t, outp);

            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:19:16.600

您可以使用`ReportProgress`Background Worker 的方法来更新 UI。

[阅读更多](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.reportprogress.aspx_)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:48:30.740

首先，您应该使用此处所述的直接像素操作：http: [//msdn.microsoft.com/en-us/library/5ey6h79d.aspx](http://msdn.microsoft.com/en-us/library/5ey6h79d.aspx)

然后，您应该使用一个数组来查找所有线程已经绘制了哪些线，哪些没有。线程在此数组中查找新行，然后绘制它。但请记住锁定查找数组！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:02:22.430

您的 Do 工作方法如下所示：-

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{
     Bitmap newbitmap = (Bitmap)e.Argument;

     int tmax = 10;
     int xmax = newbitmap.Width;
     int ymax = newbitmap.Height;
     for (int t = 0; t <= tmax; t += 1)
     {

         for (int x = 0; x < xmax; x++)
         {
              for (int y = 0; y < ymax; y++)
              {
                   if ((x / xmax) > (t / tmax))
                   {
                       Color originalco = newbitmap2.GetPixel(x, y);
                       outp.SetPixel(x, y, originalco);
                   }
                   else
                   {
                       Color originalco3 = newbitmap.GetPixel(x, y); ;
                       outp.SetPixel(x, y, originalco3);
                   }

               }
               pictureBox1.Image = outp;
         }
      }
      bgWorker.ReportProgress(0,outp);
} 
```

然后，当您的工作人员报告进度时，它会引发以下事件，您可以在其中安全地更新 UI：

```
private void bgWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    //UPDATE YOUR UI HERE
} 
```

# asp.net-mvc-3 - MVC3中上传的图像完整路径

> ID：11428778
> 
> 赞同：0
> 
> 时间：2012-07-11T08:45:31.317
> 
> 标签：asp.net-mvc-3, image

我在 MVC3 中上传一个文件，我的 csHtml 页面是

```
<div class="editor-label">
    @Html.LabelFor(model => model.Resume)
</div>
<div class="editor-field">
        <input type="file" name="Resume" id="Resume"   />
        @* @Html.EditorFor(model => model.ImageData)*@
    @Html.ValidationMessageFor(model => model.Resume)

</div> 
```

我的发布方法是

[HttpPost] public ActionResult SignUp(UserView user) {

```
 try
    {
        if (ModelState.IsValid)
        {
            UserManager userManager = new UserManager();
            if (!userManager.IsUserLoginIDExist(user.LoginID))
            {
               // Request.Params["Resume"];
                 userManager.Add(user,Request.Files["Resume"]);
                FormsAuthentication.SetAuthCookie(user.FirstName, false);
                return RedirectToAction("Welcome", "Home");

            }
          }
    }

    catch
    {
        return View(user);
    }

    return View(user);
} 
```

我的模型是

```
 public class UserView
{
    [Required]
    [Display(Name = "First Name")]
    public string FirstName { get; set; }

    [Required]
    [Display(Name = "Last Name")]
    public string LastName { get; set; }

    [Required]
    [Display(Name = "Contact Number")]
    public string ContactNumber { get; set; }

    [Required]
    [Display(Name = "Login ID")]
    public string LoginID { get; set; }

    [Required]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Required]
    [Display(Name = "Resume")]
    public string Resume { get; set; }
  }
 } 
```

我在某些机器上将 user.Resume 的值作为完整路径（C:\test.png），而在某些机器上我只得到文件的名称（test.png）。请帮我处理这个杂项问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:06:54.273

您目前实际上并没有将文件保存在那里。也许您知道这一点并且为了简洁而省略了代码，但是 ASP.Net 的内置文件处理为您提供了所需的一切。

这个问题为您提供了您需要的所有信息：[文件上传 Asp.net Mvc3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc3-0)

# macos - MAC 上的 Ribbon UI 库是什么？

> ID：11428781
> 
> 赞同：2
> 
> 时间：2012-07-11T08:45:39.843
> 
> 标签：macos, ribbon

正如标题所暗示的，我正在研究使用 Ribbon UI 开发 MAC 应用程序的可能性。但我能找到的唯一功能区 UI 库是用于 QT 的 QtitanRibbon。还有其他人吗？

# asp.net-mvc-3 - 模型类的变化导致先删除数据库并重新创建，如何避免这种情况？

> ID：11428783
> 
> 赞同：1
> 
> 时间：2012-07-11T08:45:41.813
> 
> 标签：asp.net-mvc-3

在模型上下文文件中提到了

> 如果您希望 Entity Framework 在您更改模型架构时自动删除并重新生成数据库，请将以下代码添加到 Global.asax 文件中的 Application_Start 方法。注意：这将在每次模型更改时破坏并重新创建您的数据库。

```
System.Data.Entity.Database.SetInitializer(new System.Data.Entity.DropCreateDatabaseIfModelChanges<HMS.Models.HMSContext>()); 
```

所以我在`Global.asax`文件里面添加了这段代码`protected void Application_Start()`。

当我对模型类进行任何更改时，添加此行会删除整个数据库。有没有其他方法可以避免这种情况，我仍然可以进行模型更改？

即在我重建并运行我的应用程序时执行模型更改后，它会删除我的数据库并重新生成所有空模型表。所以我丢失了所有输入的数据，我想保留表格数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:03:35.133

If you're using EF Code First 4.1, then, no, it will only drop and recreate. EF version 5 apparently supports dynamically changing the underlying database. It's in beta at the moment, but is available for production use if you want to try it out. You can install it through NuGet.

# node.js - 如何解决异步和请求等节点库的“这个”问题

> ID：11428785
> 
> 赞同：9
> 
> 时间：2012-07-11T08:45:48.180
> 
> 标签：node.js, this, libraries

我编写了一个节点脚本，它通过请求 REST API 数据（使用库请求）来获取一些数据。它由几个函数组成，如下所示：

```
var data = { /* object to store all data */ },
function getKloutData() {
  request(url, function() { /* store data */}
}
// and a function for twitter data 
```

因为我想在获取所有内容后做一些事情，所以我使用库 async 来运行所有获取函数，如下所示：

```
async.parallel([ getTwitterData, getKloutData ], function() {
    console.log('done');
}); 
```

这一切都很好，但是我想把所有东西都放在一个对象模式中，这样我就可以同时获取多个帐户：

```
function Fetcher(name) { 
    this.userID = ''
    this.user = { /* data */ }
    this.init();
}
Fetcher.prototype.init = function() {
    async.parallel([ this.getTwitterData, this.getKloutData ], function() {
        console.log('done');
    });
}
Fetcher.prototype.getKloutData = function(callback) {
    request(url, function () { /* store data */ });
}; 
```

这不起作用，因为 async 和 request 更改了 this 上下文。我可以绕过它的唯一方法是绑定我通过异步和请求传递的所有内容：

```
Fetcher.prototype.init = function() {
    async.parallel([ this.getTwitterData.bind(this), this.getKloutData.bind(this) ], function() {
        console.log('done');
    });
}
Fetcher.prototype.getKloutData = function(callback) {
    function saveData() {
        /* store data */
    }

    request(url, saveData.bind(this);
}; 
```

我是在做一些基本的错误还是什么？我认为恢复到脚本并将其分叉到 child_processes 会产生很多开销。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T09:01:47.373

你做得完全正确。

另一种方法是始终在上下文中保留对对象的引用而不是 using `bind`，但这需要一些技巧：

```
Fetcher.prototype.init = function() {
    var self = this;
    async.parallel([
        function(){ return self.getTwitterData() },
        function(){ return self.getKloutData() }
    ], function() {
        console.log('done');
    });
}

Fetcher.prototype.getKloutData = function(callback) {
    var self = this;

    function saveData() {
        // store data
        self.blah();
    }

    request(url, saveData);
}; 
```

您也可以事先进行绑定：

```
Fetcher.prototype.bindAll = function(){
    this.getKloutData = this.prototype.getKloutData.bind(this);
    this.getTwitterData = this.prototype.getTwitterData.bind(this);
};

Fetcher.prototype.init = function(){
    this.bindAll();
    async.parallel([ this.getTwitterData, this.getKloutData ], function() {
        console.log('done');
    });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:00:07.290

您可以将其保存到另一个变量中：

```
var me = this; 
```

然后`me`是你的`this`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T16:21:03.563

使用此函数实例化对象：

```
function newClass(klass) {
    var obj = new klass;

    $.map(obj, function(value, key) {
        if (typeof  value == "function") {
            obj[key] = value.bind(obj);
        }
    });

    return obj;
} 
```

这将自动绑定所有函数，因此当对象内部的方法具有其对象的上下文时，您将以习惯 OOP 样式获取对象。

所以你实例化你的对象不是通过：

```
var obj = new Fetcher(); 
```

但：

```
var obj = newClass(Fetcher); 
```

# java - Java 看不到日历 API

> ID：11428786
> 
> 赞同：0
> 
> 时间：2012-07-11T08:45:48.957
> 
> 标签：java, netbeans, google-api, google-calendar-api, google-api-java-client

我在 Netbeans 上使用所有需要的库导入了 Google 日历 API，但看起来 java 出于未知原因看不到 API，即使我导入了所有库...

请帮忙 ...

G 日历 API 可以在这里找到：http://developers.google.com/google-apps/calendar/v3/reference/events/list#try-it

图 1：我无法通过 API 创建或操作新事件

![图 1](../Images/20e64927621a58c737687a5026168784.png)

图 2：导入的所有库

![图 2](../Images/2c4f9cef2aa9f8b233c0ae02a11a9592.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:51:07.060

从您的快照看来，日历包的导入效果很好。问题似乎是您的`service`变量未定义。

# ubuntu - 如何使目录 apache 在 ubuntu 上可读

> ID：11428789
> 
> 赞同：9
> 
> 时间：2012-07-11T08:45:54.523
> 
> 标签：ubuntu, webserver

以下问题：

我有一个 ubuntu 12.04 服务器，我用它创建了一个虚拟主机

```
DocumentRoot /var/www/ 
```

一切都很好，当我用 webbrowser 指向这个虚拟主机的网站时，我看到了正确的 index.html。当我查看**www**文件夹的所有者时，我看到：

```
ls -l
drwxr-xr-x  2 root root 4096 Jul 10 09:07 www 
```

现在我将 DocumentRoot 更改为

```
DocumentRoot /root/testFolder/ 
```

我将我的 index.html 复制到此文件夹中，使用 webbrowser 指向我的域，然后我收到消息“*您没有权限...* ”

好的，我检查 testFolder 的所有者

```
ls -l
drwxr-xr-x 2 root     root     4096 Jul 11 08:18 testFolder 
```

它与 www 文件夹相同。

好的，我下次尝试更改 testFolder 的组所有者

```
chown -R www-data:www-data /root/testFolder/ 
```

但我在浏览器中得到相同的结果：“*您没有权限访问此服务器上的 /。* ”

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-11T08:47:43.433

尝试：

```
chown -R apache:apache /root/testFolder/ 
```

和

```
chmod +r /root/testFolder 
```

**更新**
在这种特定情况下的解决方案是将apache从/root下移动到不需要root权限的文件夹中。

# iphone - 在非 ARC 项目中释放对象，对象在 ARC 库中声明

> ID：11428791
> 
> 赞同：6
> 
> 时间：2012-07-11T08:45:54.763
> 
> 标签：iphone, ios, automatic-ref-counting, release

好吧，我正在从事一个非 ARC 项目，但使用[Philipp Kyeck 的](https://github.com/pkyeck/socket.IO-objc)使用 ARC 编写的 socketio 库。我正在使用[本](http://www.seriousmonster.com/mixing-arc-and-non-arc-code-with-static-libraries/)教程中解释的方法合并非 ARC 项目和 ARC 库。

在我的 ViewController 文件中，我正在使用初始化套接字

```
 SockIO *chatSockIO = [[SocketIO alloc] initWithDelegate:self]; 
```

当我需要断开连接时，我会打电话

```
[chatSockIO disconnect]; 
```

这导致 socketIODidDisconnect 委托方法被触发。

```
- (void) socketIODidDisconnect:(SocketIO *)socket{
   [chatSockIO release]; ==> is this call needed?
} 
```

现在我的问题是关于线的`[chatSockIO release]`。**我们是否需要释放一个本身在 ARC 模式下定义但在非 ARC 项目中使用的对象？**

现在当我尝试发布时，我得到了一个例外说

```
-[SocketIO retain]: message sent to deallocated instance 0x6fec370 
```

但是当我注释掉那一行时，我的**库对象中出现内存泄漏和dealloc，根本没有被调用**

# 赏金时间！！

忘记我提到的库，在我的代码中崩溃和泄漏..**在非 ARC 项目中使用使用 ARC 方法定义的对象时，通常的做法是什么。我应该只分配它，还是应该在使用后分配并释放它？**

# 编辑：更多信息。

我在崩溃时运行了僵尸仪器，这就是它不得不说的......它显示了对分配和释放函数的调用。

```
#   Address     Category    Event Type  RefCt   Timestamp       Size    Responsible Library     Responsible Caller
0   0x72d5da0   SocketIO    Malloc      1       00:09.700.274   64      MyProject           -[MyViewController sendRequestForSocketIOPush]
1   0x72d5da0   SocketIO    Retain      2       00:09.700.317   0       MyProject           -[SocketIO initWithDelegate:]
2   0x72d5da0   SocketIO    Release     1       00:09.700.320   0       MyProject           -[SocketIO initWithDelegate:]
3   0x72d5da0   SocketIO    Retain      2       00:09.700.440   0       Foundation          -[NSURLConnectionInternal initWithInfo:]
4   0x72d5da0   SocketIO    Retain      3       00:10.413.717   0       Foundation          -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]
5   0x72d5da0   SocketIO    Release     2       00:10.413.761   0       Foundation          -[NSURLConnectionInternalConnection invokeForDelegate:]
6   0x72d5da0   SocketIO    Retain      3       00:10.413.797   0       Foundation          -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]
7   0x72d5da0   SocketIO    Release     2       00:10.413.811   0       Foundation          -[NSURLConnectionInternalConnection invokeForDelegate:]
8   0x72d5da0   SocketIO    Retain      3       00:10.413.816   0       Foundation          -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]
9   0x72d5da0   SocketIO    Release     2       00:10.415.087   0       Foundation          -[NSURLConnectionInternalConnection invokeForDelegate:]
10  0x72d5da0   SocketIO    Retain      3       00:10.415.214   0       Foundation          -[NSURLConnectionInternal _withConnectionAndDelegate:onlyActive:]
11  0x72d5da0   SocketIO    Release     2       00:10.415.216   0       Foundation          -[NSURLConnectionInternalConnection invokeForDelegate:]
12  0x72d5da0   SocketIO    Release     1       00:10.415.275   0       Foundation          -[NSURLConnectionInternalConnection invokeForDelegate:]
13  0x72d5da0   SocketIO    Retain      2       00:10.969.432   0       GraphicsServices    GSEventRunModal
14  0x72d5da0   SocketIO    Release     1       00:10.969.433   0       GraphicsServices    GSEventRunModal
15  0x72d5da0   SocketIO    Retain      2       00:10.969.434   0       GraphicsServices    GSEventRunModal
16  0x72d5da0   SocketIO    Release     1       00:10.969.456   0       GraphicsServices    GSEventRunModal
17  0x72d5da0   SocketIO    Retain      2       00:10.969.459   0       GraphicsServices    GSEventRunModal
18  0x72d5da0   SocketIO    Retain      3       00:10.969.488   0       Foundation          -[NSCFTimer initWithFireDate:interval:target:selector:userInfo:repeats:]
19  0x72d5da0   SocketIO    Release     2       00:10.976.115   0       MyProject           -[SocketIO setTimeout]
20  0x72d5da0   SocketIO    Retain      3       00:10.976.125   0       Foundation          -[NSCFTimer initWithFireDate:interval:target:selector:userInfo:repeats:]
21  0x72d5da0   SocketIO    Release     2       00:10.976.161   0       GraphicsServices    GSEventRunModal
22  0x72d5da0   SocketIO    Retain      3       00:13.935.328   0       GraphicsServices    GSEventRunModal
23  0x72d5da0   SocketIO    Release     2       00:13.935.373   0       MyProject           -[SocketIO setTimeout]
24  0x72d5da0   SocketIO    Retain      3       00:13.935.399   0       Foundation          -[NSCFTimer initWithFireDate:interval:target:selector:userInfo:repeats:]
25  0x72d5da0   SocketIO    Release     2       00:13.935.685   0       MyProject           -[SocketIO onDisconnect]
26  0x72d5da0   SocketIO    Release     1       00:13.935.705   0       MyProject           -[MyViewController socketIODidDisconnect:]
27  0x72d5da0   SocketIO    Release     0       00:13.935.716   0       GraphicsServices    GSEventRunModal
28  0x72d5da0   SocketIO    Zombie      -1      00:13.936.298   0       GraphicsServices    GSEventRunModal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T10:35:24.220

**要回答您的问题：**

如果你从非 ARC 代码中使用 ARC 管理的对象，你可以像使用非 ARC 对象一样使用它：如果你创建或保留它，你必须释放或自动释放它。

**关于你的问题：**

在您的评论中，您提到您尝试通过这样的初始化来解决问题

```
self.chatSockIO = [[[SocketIO alloc] initWithDelegate:self] autorelease]; 
```

并且在`socketIODidDisconnect`

```
self.chatSockIO = nil; 
```

这应该可以正常工作，前提是该`chatSockIO`属性具有`retain`语义，并且一次只`SocketIO`使用一个对象。

Zombie 输出提示出了什么问题：

*   在倒数第二行中，您释放对象，保留计数降至 0，并且对象被释放。这就是你所期望的。
*   然而，在最后一行中，它试图从运行循环中保留对象。您知道这是一个保留，因为没有`NSZombie`.
*   这意味着尽管您已经完成了该对象，但它仍会收到来自某个地方的调用。这是出乎意料的。

它可能是您的代码中的某些内容，也可能是您正在使用的某个库中的错误。只是一个预感：在`SocketIO.m`替换这些行`-onDisconnect`

```
if (_webSocket != nil) {
    [_webSocket close];
} 
```

和

```
if (_webSocket != nil) {
    [_webSocket close];
    _webSocket.delegate = nil;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T21:37:03.427

这可能无法解决您的问题，但无论如何，在委托调用中释放对象通常是一个可怕的想法 - 它可能会在仍在工作时被释放，特别是如果对象在 ARC 下，可能没有释放方法。

因此，将您的关闭委托调用转换为：

```
- (void) socketIODidDisconnect:(SocketIO *)socket
{
   chatSockIO.delegate = nil; // don't want any more messages
   dispatch_async(dispatch_get_main_gueue(), ^{ self.chatSockIO = nil; }); // typed in text editor
   // your question - is the release needed? Well, under virtually every scenario yes, but I don't know this framework
} 
```

无论这是否解决了您的问题，您都应该以这种方式进行发布 - 在委托返回后的主线程上。如果您查看您的代码，您应该完全使用这个 ARC 类，就像使用普通类一样。互操作性非常好，我在我的 ARC 应用程序中使用了几个 NON-ARC 项目，其他人成功地完成了相反的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T08:02:51.827

我也曾感受到类似的问题。我通过设置`@property(nonatomic, retain)` 班级解决了这个问题。在你的情况下，它应该是，

在.h

```
 @property(nonatomic, retain) SockIO *socketIO; 
```

米

```
 @synthesize socketIO;
   chatSockIO = [[SocketIO alloc] initWithDelegate:self]; 
```

而且您不会再次崩溃您的应用程序！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T08:39:17.087

ARC and non ARC objects mix fine. Classes that are implemented using ARC can safely be used from non-ARC code. Whenever there's an ownership error the problem is probably in your code.

Without seeing code it's not possible to find the error but it's probably some simple over-release.

Look at all the places in `MyProject` where the Instruments trace shows a `Release` event, like `-[SocketIO setTimeout]`, `-[SocketIO onDisconnect]` and `-[MyViewController socketIODidDisconnect:]`. Check if there are improper ownership transfers, like assigning an instance variable handled by a retain property or similar.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T19:22:10.800

我目前正在做一个类似的项目，我解决它的方法是将非 ARC 项目切换到 ARC。Xcode 为您传输所有内容，为我解决了所有内存泄漏和其他问题。

要切换到 ARC，您需要：

**1.**点击编辑->重构->转换为Objective-C ARC

**2.**单击您的项目目标，然后在下拉列表中选择要转换为 ARC 的文件

**3.**选择正确的文件后单击检查

**4.**单击下一步，等待转换完成。

**5.**单击“更新”按钮更新您的代码。

**6.**检查你的代码

希望有帮助。它帮助了我

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T08:51:50.387

以我的经验，我不会将 ARC 和非 ARC 混合在一起，期望一小段代码。我浪费了很多时间来尝试查找泄漏和崩溃错误。

如果您无法将程序转换为 ARC，请考虑使用非 ARC 版本的 sockIO：[https ://github.com/pkyeck/socket.IO-objc/tree/non-arc](https://github.com/pkyeck/socket.IO-objc/tree/non-arc)

这可能会为您省去很多麻烦。

# c# - 在 Windows 窗体上选择部分图像

> ID：11428794
> 
> 赞同：0
> 
> 时间：2012-07-11T08:46:06.653
> 
> 标签：c#, winforms, mouse, picturebox

我正在制作工具来选择图像的一部分。我有 PictrureBox，制作方法很简单：

```
void StartPanel(object sender, MouseEventArgs args)
{
    xStart = args.X;
    yStart = args.Y;
    panelStarted = true;
    pan.Location = new Point(xStart, yStart);
}
void FinishPanel(object sender, MouseEventArgs args)
{
    xFinish = args.X;
    yFinish = args.Y;
    panelStarted = false;
}

void UpdatePanel(object sender, MouseEventArgs args)
{
    if (panelStarted)
    {
        int x = args.X;
        int y = args.Y;

        int newxstart = xStart;
        int newystart = yStart;
        int neww = 0;
        int newh = 0;

        if (x >= xStart)
            neww = x - xStart;
        else
        {
            neww = xStart - x;
            newxstart = x;
        }
        if (y >= yStart)
            newh = y - yStart;
        else
        {
            newh = yStart - y;
            newystart = y;
        }

        pan.Size = new Size(neww, newh);
        pan.Location = new Point(newxstart, newystart);
    }
} 
```

当我左右移动鼠标时，绝对没问题。但是当我将它向左或向上移动时，我可以看到我所在区域的闪烁。所以我明白了，这是因为当我向左或向上移动鼠标时，我的面板被重绘，因为 Panel.Location 改变了，当我向右和向下移动鼠标时，位置没有改变，只有大小改变，所以它不会重绘，只是将一些像素添加到面板中。什么是标准解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:14:14.763

由于您在调整面板大小时描述了绘图问题，因此最简单的解决方法可能是将您正在使用的面板替换为双缓冲面板，并且在调整事件大小时将失效：

```
public class BufferedPanel : Panel {
  public BufferedPanel() {
    this.DoubleBuffered = true;
    this.ResizeRedraw = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T14:40:40.350

尝试查看您要执行的操作并不容易，但我猜您正在使用面板作为可拖动控件来拖动图片框表面以捕获下面的图像部分（如镜头） - 是吗？

如果是这样，那么这不是最好的方法。最好在图片框表面上绘制一个矩形并“拖动”它 - 这很简单，只需使用鼠标事件设置左上角并使用 onpaint 在图像上绘制未填充的矩形。准备好后使用您希望的任何事件捕获图像也很简单，然后将具有相同位置的图像复制到新位图。

将一个控件置于另一个控件上通常会导致闪烁 - 即使使用双缓冲也是如此。它还需要更多的代码。

# hibernate - 带有注释的休眠验证

> ID：11428798
> 
> 赞同：0
> 
> 时间：2012-07-11T08:46:20.283
> 
> 标签：hibernate, servlets

我只是发现我的休眠验证不起作用。我正在使用带有注释的hibernate3。请检查以下代码。

```
@Entity
@Table(name = "registration")
public class Pojo implements Serializable{

    @Id
    @Column(name = "id")
    @NotNull
    private int id;
    @Column(name = "name", length=5)
    @NotNull
    private String name;
    @Column(name = "surname", length=5)
    @NotNull
    private String surname;
    @Column(name = "address", length=5)
    @NotNull
    private String address;
getters and setters

} 
```

以下是我的 servlet

```
System.out.println("Kshitij-----");
        PrintWriter out = response.getWriter();
        SessionFactory sessionFactory = new AnnotationConfiguration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
        Transaction transaction = session.beginTransaction();
        Pojo r = new Pojo();
        r.setId(Integer.valueOf(request.getParameter("id")));
        r.setName(request.getParameter("name"));
        r.setSurname(request.getParameter("surname"));
        r.setAddress(request.getParameter("address"));
        session.save(r);
        transaction.commit();
        session.close();
        out.println("Success....."); 
```

它正在插入没有值的记录。我应该添加一些新的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:48:37.933

尝试直接验证实体；

```
ValidatorFactory factory = Validation.byDefaultProvider().configure().traversableResolver(new CustomTraversableResolver() ).buildValidatorFactory();
Validator validator = factory.getValidator();
Set<ConstraintViolation<BaseValidationObject>> constraintViolations = Validator.validate(r); 
```

并将例如@Min(1) 或@Length(1, 255) 添加到您的属性注释中。

constraintViolations 变量将包含任何失败的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T09:32:41.983

验证不是为什么您的数据没有保存的问题。`session.close();`关闭会话，但您需要在此之前调用 flush 。这是使用会话成功保存数据的正确顺序：

```
flush the session
commit the transaction
close the session
handle exceptions 
```

[查看](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#flush%28%29)文档

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-22T11:40:47.357

也许您可以尝试删除当前表并在添加这些约束后重新创建它。尝试重新启动。我之前也有同样的问题，它可以工作。不确定这是否是您的情况。

# mockito - 如何使用 PowerMockito 验证最终方法

> ID：11428803
> 
> 赞同：1
> 
> 时间：2012-07-11T08:46:45.580
> 
> 标签：mockito, powermock

PowerMockito 中有 verifyStatic 和 verifyPrive 方法，但没有 verifyFinal。是否可以使用 PowerMockito 验证最终方法调用？

最好的问候，尤金。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:02:35.567

好的，似乎将正在验证的类添加到 PrepareForTest 中，然后使用普通的 Mockito.verify 就足够了。

# iphone - 从 iPhone 中的 sqlite 检索数据

> ID：11428804
> 
> 赞同：0
> 
> 时间：2012-07-11T08:46:47.153
> 
> 标签：iphone, objective-c, sqlite

我有 5 列（`type_id,Type,Quantity,NumberCalories,Category_id`），我需要`type`根据更改“ `Category_id`”检索“”。请帮帮我他是我的代码

```
const char *sql = "select type_id,Type,Quantity,NumberCalories from FoodType where Category_id=?"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:04:29.050

将**categoryId**传递给数据库方法并修改您的查询，如下所示

```
NSString *sqlQuery =[NSString stringWithFormat:@"select type_id,Type,Quantity,NumberCalories from FoodType where Category_id = %d",categoryId];

const char *sql= [sqlQuery UTF8String]; 
```

# c# - Winform可以使用backgroundworker并行运行函数吗？

> ID：11428806
> 
> 赞同：0
> 
> 时间：2012-07-11T08:46:54.230
> 
> 标签：c#, winforms, parallel-processing, backgroundworker

我需要并行运行四个功能，同时保持 UI 响应和报告进度，后台工作人员是执行此操作的最佳方式吗？我怎样才能在winform中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:56:08.047

是的，使用任务并行库。您可以运行并行任务，例如

```
Parallel.Invoke(() => DoSomeWork(), () => DoSomeOtherWork()); 
```

它为您提供了比后台工作人员更多的选择

更多参考：[TPL](http://msdn.microsoft.com/en-us/library/dd537609.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:06:27.530

您可以使用 a 来执行此操作，[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)但我会推荐[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd537609.aspx)。对于您想要的，您可以使用以下内容

```
TaskCreationOptions atp = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew(() =>
{
    Task.Factory.StartNew(() => { SomeMethod() }, atp);
    Task.Factory.StartNew(() => { SomeOtherMethod() }, atp); 
}).ContinueWith( cont => { Console.WriteLine("Finished!") }); 
```

这是使用子任务，这里我有两个，你会使用四个。由于 TPL 使用对真正并发操作的数量有限制的线程池，因此需要注意一些限制。请查看此[https://stackoverflow.com/a/11229896/626442](https://stackoverflow.com/a/11229896/626442)，有关 TPL 和通用线程的更多信息，请参阅

[J. Albahari 的 C# 线程](http://www.albahari.com/threading/)

和（专门针对 TPL）

[这个很棒的教程](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:49:55.303

最好的方法是使用`Task`s ，它是`BackgroundWorker`

`Task`您可以从此处查看如何报告进度：http: [//nitoprograms.blogspot.co.il/2012/02/reporting-progress-from-async-tasks.html](http://nitoprograms.blogspot.co.il/2012/02/reporting-progress-from-async-tasks.html)

# android - 突然大多数opengles GL11命令不再工作了

> ID：11428812
> 
> 赞同：0
> 
> 时间：2012-07-11T08:47:06.557
> 
> 标签：android, opengl-es

昨天一切正常，但今天我在启动我的 android opengles 应用程序时遇到了很多错误：“libEGL - 称为未实现的 OpenGL ES API”。但从昨天开始我什么都没改变。有什么想法出了什么问题，或者我可以尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T12:50:35.673

你确定你根本没有改变任何东西。

您收到此消息的一个原因是 OpenGL 客户端版本的设置是否不同。
例如：通过调用

```
glSurfaceView.setEGLContextClientVersion(2); 
```

# architecture - 依赖（但不是编译相关）管理工具

> ID：11428813
> 
> 赞同：0
> 
> 时间：2012-07-11T08:47:08.673
> 
> 标签：architecture, dependencies

我们需要一个依赖管理工具，但不需要计算机语言。我们有一个大型系统，其中包含许多相互依赖的组件，我们希望管理这些组件的依赖关系。此外，我们正在发布应自动管理的修补程序依赖项。

有人可以提出一个工具来管理组件之间的相互依赖关系吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-12T23:10:32.040

[http://www.dsmweb.org/](http://www.dsmweb.org/)有一个工具部分，其中包括许多用于一般依赖管理的工具。

# python - 亚马逊官方的 S3.py 和 boto.s3 有什么区别

> ID：11428815
> 
> 赞同：1
> 
> 时间：2012-07-11T08:47:13.963
> 
> 标签：python, django, amazon-s3, django-storage

`S3.py`我打算在我的 Django 项目中使用 Amazon S3，Amazon 的官方和有什么区别`boto.s3`？我应该使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T11:52:54.510

我想`S3.py`，您指的是可在[此处](http://aws.amazon.com/code/134/)下载的代码。所以，如果我错了，请纠正我。

[在这种情况下，恕我直言，boto 有一些优势，正如AWS 和 Python 入门](http://aws.amazon.com/articles/3998/)教程中指出的那样：

> 没有之一，boto 是使用 Python 时与 Amazon Web Services (AWS) 交互的最佳方式。毕竟，它已经存在多年，与 AWS 一起成长，并且仍在积极维护。

Boto 还有一个很好的文档和一个活跃的邮件列表。

另一方面，查看对 的最后记录的更新`S3.py`，尤其是当它发生时：

> 2007-11-05：支持欧盟的更新

这是让我思考的另一件事（请记住 Python 3.3.0 测试版已经发布）：

> 此示例是使用 Python 2.2.3 构建的。

所以，我的建议是：你应该使用 boto。

# javascript - 移除元素周围的填充

> ID：11428816
> 
> 赞同：0
> 
> 时间：2012-07-11T08:47:17.240
> 
> 标签：javascript, jquery, css

我正在尝试减少底部和顶部黑暗区域可用的边框空间量

所以 ：

![在此处输入图像描述](../Images/5770b65e3bf2d8630eda33a7877755c8.png)

应该 ：

![在此处输入图像描述](../Images/82d08c2dd7e324762587396c050c8827.png)

我尝试将 padding-bottom: 0px !important 添加到 pds-vote。pds-vote 是我试图减少填充但似乎没有任何效果的投票元素。

这是小提琴：http: [//jsfiddle.net/25LjE/79/](http://jsfiddle.net/25LjE/79/)

小提琴背后的代码：

```
.pds-question-top {
font-size:10pt !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-pd-link, .pds-comments {
display:none !important;
}

.pds-box {
width:220px !important;
}

.pds-input-label {
width:85% !important;
}

.PDS_Poll {
margin-bottom:15px;
}

.pds-answer-span {
color:#00f;
}

.pds-vote {
background-color:#424242;
}

.pds-answer-text {
color:#00f;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-answer-feedback {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-votebutton-outer {
text-align:center;
}

.pds-answer-group {
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
height:auto;
overflow:hidden;
}

.pds-input-label,.pds-answer-input {
float:left;
}

.pds-view-results,.pds-links {
color:#FFF !important;
padding-top:1px !important;
padding-bottom:1px !important;
margin-top:1px !important;
margin-bottom:1px !important;
}

.pds-comments,.pds-return-poll {
color:#FFF !important;
}

.pds-links {
    display: inline !important;
}
.pds-pd-link {
display: none !important;
}
.pds-box {
    width: 220px !important;
}
.pds-input-label{
    width: auto! important;
}
.PDS_Poll{
    margin-bottom:15px;
}

.pds-question-top {padding:0 !important} 
```

小提琴背后的HTML：

```
<script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6352993.js"></script>
<noscript><a href="http://polldaddy.com/poll/6352993/">This is very long test question to test how polldaddy handles questions that exceed that normal length............ yes a very long question indeed..............</a></noscript>

$(document).ready(function() {

    $('.pds-question-inner').prepend('<span style="color:red;font-weight:bold;font-size: 15px;float:left">Header</span>');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:02:44.767

您应该将此添加到您的 css Ofc 中，您可以将其设置为所需的填充

```
 .pds-answer{
    padding-bottom:5px !Important;
}
.pds-box-outer{
  padding-bottom:5px !Important;
} 
```

但是你应该尽量避免使用这么重要的东西。

[解释为什么](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:56:25.257

试试这个：

```
#PDI_container6352993 .pds-box .pds-box-outer {
    padding-bottom: 6px;
} 
```

[这是](http://jsfiddle.net/scumah/25LjE/85/)一个结果。

# android - BluetoothServerSocket 接受失败并抛出 IOException

> ID：11428820
> 
> 赞同：3
> 
> 时间：2012-07-11T08:47:19.633
> 
> 标签：android, bluetooth

我有一个支持 OBEX 对象推送配置文件的设备，该配置文件基于串行端口配置文件。我的猜测是我可以使用 Android 蓝牙聊天示例将此设备连接到我的 Android 手机。但是我遇到了一个问题，关于`socket.accept()`android SDK 中的功能。我尝试完成将我的手机与此设备连接，如下所示：

```
adapter = BluetoothAdapter.getDefaultAdapter(); 
device = adapter.getRemoteDevice("00:1B:DC:0F:EC:7E");

AcceptThread = new AcceptThread(true, adapter, device);
AcceptThread.start(); 
```

AcceptThread 中的构造函数编码如下：

```
public AcceptThread(boolean secure, BluetoothAdapter adapter, BluetoothDevice device) {
    BluetoothServerSocket tmp = null;
    this.adapter = adapter;
    this.device = device;

    // Create a new listening server socket
    try {
        tmp = adapter.listenUsingInsecureRfcommWithServiceRecord(device.getName(), UUID.fromString("00001101-0000-1000-8000-00805F9B34FB"));
    } catch (Exception e) {
        Log.e(TAG, ".AcceptThread # listen() failed", e);
    } 
    mmServerSocket = tmp;
} 
```

问题是当我尝试`connect()`像我之前所说的那样做

```
public void run() {
    BluetoothSocket socket = null;

    // Listen to the server socket if we're not connected
    while (mState != STATE_CONNECTED) {
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            Log.d(TAG, "AcceptThread.run: accepting server socket connection");

            socket = mmServerSocket.accept(20000); 

            Log.d(TAG, ".AcceptThread.run # server socket connection accepted");
        } catch (Exception e) {
            Log.e(TAG, ".run # accept() failed: "+e);
            break;
        }
    }
} 
```

如您所见，ServerSocket 接受每个传入的连接，`20 seconds`或者`20000 ms.`当时间到时，应用程序将像这样抛出一个 IOException

```
07-11 10:30:08.355: E/SIMPLECONNECT(1301): .run # accept() failed: java.io.IOException: Connection timed out 
```

这告诉我我的设备无法连接到我的安卓手机。该设备的显示屏上没有连接按钮，只有一个发送功能，可以将文件发送到我的手机。我相信这个发送功能也会在后台进行连接，但我不确定。

任何人都可以为我指出任何解决方案吗？我正在运行我的应用`Samsung Galaxy SIII`程序`Android 4.0.4`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T06:53:10.403

我终于解决了，问题是不同的Android版本和不同的设备似乎需要不同的套接字。我用三星 Galaxy XCOVER、Tab1、Tab2、Nexus、Note、摩托罗拉 Defy 和 HTC Flyer 进行了尝试。我使用的套接字是：

A：

```
Method m = mmDevice.getClass().getMethod("createRfcommSocket", new Class[] { int.class });
mSocket = (BluetoothSocket) m.invoke(mmDevice, Integer.valueOf(1)); 
```

乙：

```
Method m = mmDevice.getClass().getMethod("createInsecureRfcommSocket", new Class[]{int.class});
mSocket=(BluetoothSocket)m.invoke(mmDevice,Integer.valueOf(1)); 
```

C：

```
mSocket=BluetoothAdapter.getDefaultAdapter().getRemoteDevice(mmDevice.getAddress()).createRfcommSocketToServiceRecord(UUID.fromString("00001101-0000-1000-8000-00805F9B34FB")); 
```

Android 4.0.x 适用于 Nexus、Flyer、Tab1 与 A,B Android 4.0.3 适用于 Tab2 与 B Android 3,6,x 适用于 DEFY 与 A,B Android 2.3.6 适用于 XCOVER 与 C

我找不到适用于所有设备的解决方案，而且我无法在创建和使用 Socket 之前找到女巫套接字可以工作，尤其是 XCOVER 对所有 Socket 执行 connect() 而不抛出异常，但是如果我尝试 tro write()，请抓住。因此，如果您想设置一个适用于所有设备的 bloothoh 连接，您必须创建套接字，连接一个写入，然后记住该套接字的工作原理（例如在首选项中）

# c# - 使用 Linq to Xml 添加 x:Key 属性

> ID：11428823
> 
> 赞同：3
> 
> 时间：2012-07-11T08:47:32.263
> 
> 标签：c#, wpf, linq-to-xml

我正在尝试使用 Linq to XML 在某些 XAML 中设置 x:Key，以便我可以将值转换器添加到数据模板的资源字典中：

```
 XNamespace xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation";
 XNamespace local = "clr-namespace:App,assembly=App";
 XElement dt = new XElement(xmlns + "DataTemplate",
     new XAttribute(XNamespace.Xmlns + "x", "http://schemas.microsoft.com/winfx/2006/xaml"),
     new XAttribute(XNamespace.Xmlns + "local", "clr-namespace:App,assembly=App"),
     new XElement(xmlns + "DataTemplate.Resources",
         new XElement(local + "MyConverter",
             new XAttribute("x:Key", "myConverter")))); 
```

但是，这会引发一个异常，抱怨属性名称中不允许使用“：”。使用另一个`XNamespace x = "http://schemas.microsoft.com/winfx/2006/xaml"`和写作`x + "Key"`也不起作用 - 它给出了`p3:Key`.

有什么方法可以在`XAttribute`名称中包含冒号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:51:42.670

```
 XNamespace xmlns = "http://schemas.microsoft.com/winfx/2006/xaml/presentation";
    XNamespace local = "clr-namespace:App,assembly=App";
    XNamespace x = "http://schemas.microsoft.com/winfx/2006/xaml"; 

    XElement dt = new XElement(xmlns + "DataTemplate",
        new XAttribute(XNamespace.Xmlns + "x", "http://schemas.microsoft.com/winfx/2006/xaml"),
        new XAttribute(XNamespace.Xmlns + "local", "clr-namespace:App,assembly=App"),
        new XElement(xmlns + "DataTemplate.Resources",
            new XElement(local + "MyConverter",
                new XAttribute(x + "Key", "myConverter"))));

   Console.WriteLine(dt); 
```

输出：

```
<DataTemplate xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:local="clr-namespace:App,assembly=App" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <DataTemplate.Resources>
    <local:MyConverter x:Key="myConverter" />
  </DataTemplate.Resources>
</DataTemplate> 
```

# objective-c - if条件下如何调用不同的按钮点击事件方法？

> ID：11428824
> 
> 赞同：0
> 
> 时间：2012-07-11T08:47:32.720
> 
> 标签：objective-c, uibutton

我是 iPhone 的初学者。我已经创建了五个按钮。按钮单击事件执行转到其他类中如何调用按钮单击事件方法..？

它在 ViewController 类中

```
(IBAction)onclickbutton1
{
}
(IBAction)onclickbutton2
{
} 
```

以及如何在 if 条件下调用其他类的this`onclickbutton1`和方法，因此，该条件为 true 执行事件`onclickbutton2``onclickbutton1``onclickbutton`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:18:04.453

只需在事件处理方法中添加一个测试：

```
- (IBAction)onclickbutton1
{
    if (conditionIsTrue)
        [OtherClass doThing1];
    else
        [OtherClass doThing2];
}

- (IBAction)onclickbutton2
{
    if (conditionIsTrue)
        [OtherClass doThing1];
    else
        [OtherClass doThing2];
} 
```

# c# - 在本地机器上设置数据库备份文件

> ID：11428826
> 
> 赞同：1
> 
> 时间：2012-07-11T08:47:34.873
> 
> 标签：c#, sql-server-2008

> **可能的重复：**
> 
> [如何在所需文件夹中以编程方式创建 SQL Server 2008 数据库完整备份](https://stackoverflow.com/questions/4466428/how-to-create-sql-server-2008-database-full-backup-programmatically-in-desired-f)

我的计算机上有一个数据库（SQL Server 2008 Express）。

我需要 C# 中的任何示例代码，可用于使用 Visual Studio 2010 将数据库备份到文件中。

谢谢..

我将使用此代码连接数据库

```
public SqlConnection SqlSaverConn()
    {
        string path = Application.StartupPath + "\\";
        String conStr = @"Data Source=.\SQLEXPRESS;AttachDbFilename="+ path +"SMS_DB.mdf;Integrated Security=True;User Instance=True";
        SqlConnection con = new SqlConnection(conStr);
        try
        {
            con.Open();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
        return con;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:53:48.817

只需执行 SQL Server 命令

```
BACKUP DATABASE database_name TO DISK='d:\path\to\backup\file\on\the\server.bak' 
```

从你的程序

> **编辑**

```
public SqlConnection SqlSaverConn()      
{
      string path = Application.StartupPath + "\\";
      String conStr = @"Data Source=.\SQLEXPRESS;AttachDbFilename="+ path +"SMS_DB.mdf;
                        Integrated Security=True; User Instance=True";
      SqlConnection con = new SqlConnection(conStr);
      try
      {
          con.Open();
          SqlCommand command;
          command = new SqlCommand(@"backup database SMS_DB.mdf to disk ='" + path + "\\" + name, con);
          command.ExecuteNonQuery(); 
          MessageBox.Show("Backup Created."); 
      }
      catch (Exception ex)
      {
          MessageBox.Show(ex.ToString());
      }
      return con;
  } 
```

试试这段代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:34:12.690

我使用流动代码连接数据库

```
public SqlConnection SqlSaverConn()
{
    string path = Application.StartupPath + "\\";
    String conStr = @"Data Source=.\SQLEXPRESS;AttachDbFilename="+ path +"SMS_DB.mdf;Integrated Security=True;User Instance=True";
    SqlConnection con = new SqlConnection(conStr);
    try
    {
        con.Open();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.ToString());
    }
    return con;
} 
```

我可以使用您的 SQL 命令在类型连接时设置备份吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-05T11:14:21.817

这就是我所做的，它奏效了！

```
private void BackupButtonClick(object sender, RoutedEventArgs e)
{
    // FILE NAME WITH DATE DISTICNTION
    string fileName = string.Format("SchoolBackup_{0}.bak", DateTime.Now.ToString("yyyy_MM_dd_h_mm_tt"));
    try
    {
        // YOUR SEREVER OR MACHINE NAME
        Server dbServer = new Server (new ServerConnection("DESKTOP"));
        Microsoft.SqlServer.Management.Smo.Backup dbBackup = new Microsoft.SqlServer.Management.Smo.Backup()
        {
            Action = BackupActionType.Database, 
            Database = "School"
        };

        dbBackup.Devices.AddDevice(@backupDirectory() +"\\"+ fileName, DeviceType.File);
        dbBackup.Initialize = true;
        dbBackup.SqlBackupAsync(dbServer);

        MessageBox.Show("Backup", "Backup Completed!");
    }
    catch(Exception err)
    {
        System.Windows.MessageBox.Show(err.ToString());
    }
}

// THE DIRECTOTRY YOU WANT TO SAVE IN
public string backupDirectory()
{
    using (var dialog = new FolderBrowserDialog())
    {
        var result = dialog.ShowDialog();
        return dialog.SelectedPath;
    }
} 
```

# jquery - 如何使用 jquery 阅读 RSS 提要

> ID：11428829
> 
> 赞同：1
> 
> 时间：2012-07-11T08:47:45.070
> 
> 标签：jquery, rss

> **可能重复：**
> [使用 jQuery 解析 RSS](https://stackoverflow.com/questions/226663/parse-rss-with-jquery)

我想使用 jquery 读取动态生成的 RSS 提要。否则还有其他方法可以读取提要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T14:04:02.930

您可以使用[jQuery Feeds](https://github.com/camagu/jquery-feeds)插件来检索和显示您的提要。它具有跨域和模板支持等不错的功能。

```
$('#feeds').feeds({
    feeds: {
        myfeed: 'http://path/to/your/feed'
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:57:36.603

您可以使用 jquery 插件 jfeed 来解析 rss 提要并显示内容

[http://hovinne.com/articles/jfeed-jquery-rss-atom-feed-parser-plugin/](http://hovinne.com/articles/jfeed-jquery-rss-atom-feed-parser-plugin/)

一个显示原子提要的前 5 个标题的函数，你看起来像这样

```
$(document).ready(function() {
    jQuery.getFeed({
        url: 'blog/articles.atom',
        success: function(feed) {
            for(var i = 0; i < feed.items.length && i < 5; i++) {
                var item = feed.items[i];
                $("div#feed").append("<div><a href='"+item.link+"'>"+item.title+"</a></div>");
            }
        }
    });
}); 
```

# backbone.js - Backbone.marionette 复合视图忽略 addItemView 的索引

> ID：11428832
> 
> 赞同：1
> 
> 时间：2012-07-11T08:47:59.033
> 
> 标签：backbone.js, marionette

我正在使用 Backbone.Marionette 的 CompositeView，我想在集合的索引 0 处插入一个新模型，并将其显示为组合中的第一个视图。

我有这个代码来插入元素：

```
PlansApp.Plans.collection.unshift new PlansApp.Plan data 
```

问题是 CompositeView 忽略了集合中新插入项目的索引。

在 Backbone.Marionette 中，appendHtml 方法如下所示：

```
 appendHtml: function(collectionView, itemView, index){
    collectionView.$el.append(itemView.el);
  }, 
```

index 参数从未使用过。

新插入的视图将始终放置在合成的末尾。

我怎样才能让它出现在位置 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T13:59:08.220

这是设计使然，因为在直接支持排序集合时已识别出大量边缘情况。

添加了该`index`参数，以便开发人员可以在其应用程序中单独添加支持。有一个 wiki 页面显示了如何执行此操作的示例：[https ://github.com/derickbailey/backbone.marionette/wiki/Adding-support-for-sorted-collections](https://github.com/derickbailey/backbone.marionette/wiki/Adding-support-for-sorted-collections)

```
 MySortedView = Backbone.Marionette.CompositeView.extend({
  // ...,

  appendHtml: function(collectionView, itemView, index){
    var childrenContainer = $(collectionView.childrenContainer || collectionView.el);
    var children = childrenContainer.children();
    if (children.size() === index) {
      childrenContainer.append(itemView.el);
    } else {
      childrenContainer.children().eq(index).before(itemView.el);
    }
  }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T10:38:11.323

最初的 Derick 的回答对于当前版本的 Marionette 来说有点过时，并且 wiki 仅包含一个 collectionview 的示例。

这是我目前用于复合视图的内容：

```
appendHtml: (collectionView, itemView, index) ->
  $container = @getItemViewContainer(collectionView)
  if index is 0
    $container.prepend itemView.el
  else
    childAtIndex = $container.children().eq(index)
    if childAtIndex.length
      childAtIndex.before itemView.el
    else
      $container.append itemView.el 
```

# android - 我无法使用 eclipse 创建一个新的 android 项目

> ID：11428836
> 
> 赞同：0
> 
> 时间：2012-07-11T08:48:10.763
> 
> 标签：android

我无法使用 Eclipse 创建新的 Android 项目，因为可用于创建新项目的选项有：Android 应用程序项目、使用现有代码的 Android 项目、Android 示例项目、Android 测试项目。Android Project 没有可用的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:50:28.463

使用 Android 应用程序项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:51:10.470

- 你安装了 elcipse 的 android 插件 (ADT) 吗？如果你这样做了，请右键单击导航器 -> 其他 -> Android -> Android 项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T05:40:44.290

使用 eclipse Indigo 版本并按照 android 开发者网站中的建议安装 AVD 和 SDK 这里的步骤是相同的 [​​ Android SDK 和 AVD Manager 安装](https://stackoverflow.com/questions/4692852/android-sdk-and-avd-manager-installation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:06:46.127

Android Application Project 本身就是 Android 项目。使用 Android 应用程序项目

# php - 根据另一个字段查找 MySQL 行的 ID

> ID：11428838
> 
> 赞同：-1
> 
> 时间：2012-07-11T08:48:13.760
> 
> 标签：php, mysql

我在 MySQL 中有一行包含用户名和电子邮件地址等信息，我想根据用户名字段查找行的 id。关于如何根据用户名字段查找 id 的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:49:00.017

```
SELECT id FROM users WHERE username = 'NStorm'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:49:33.140

这是非常基本的sql：

```
select id from your_table where username = 'foo' 
```

# java - 如何通过java自动增加mysql表中的列

> ID：11428846
> 
> 赞同：3
> 
> 时间：2012-07-11T08:49:04.780
> 
> 标签：java, mysql

我现在通过 java 编码有 2 列 1.column1 2.column2（其唯一）的表我在我要插入数据的第一种方法中通过 2 种方法插入数据，在这个 coumn1 字段中应该是自动增量（对于新用户）

```
String sql = "INSERT INTO table (column1, column2) values(?, ?)";
pstm = connection.prepareStatement(sql);

    pstm.setInt(1, auto_incrmentvalue need to set);
    pstm.setInt(2,column2); 
```

在第二种方法中插入我想要的数据

```
String sql = "INSERT INTO table (column1, column2) values(?, ?)";
pstm = connection.prepareStatement(sql);

    pstm.setInt(1, column1);
    pstm.setInt(2,column2); 
```

如何在第一种方法中设置自动增量值

**注意：这里 column1 不是主键**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T09:10:46.447

```
INSERT INTO table(column1) SELECT MAX(column1)+1 FROM table 
```

这个对我有用

请参阅[插入...选择](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)

你的查询应该是这样的，

```
INSERT INTO table(column1, column2) SELECT MAX(column1)+1, 79  FROM table 
```

更精致的答案：

```
INSERT INTO
     usertable(column1, column2) 
     SELECT CASE COUNT(column1) 
         WHEN 0 THEN 0 
         ELSE MAX(column1) END+1,
     79 FROM usertable 
```

这可能是一个更简单的解决方案：

```
INSERT INTO usertable(column1, column2) 
SELECT IFNULL(MAX(column1)+1,1),79 FROM usertable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:00:53.043

让我们尝试一次（未测试）

```
INSERT INTO table(column1) SELECT count(column1)+1 FROM table 
```

例如，

```
INSERT INTO table(column1, column2) SELECT count(column1)+1, 79  FROM table 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-11T08:53:41.920

如果你想要column1的自动值，不要设置它，让它得到一个默认值

```
INSERT INTO table (column2) values(?) 
```

# ruby - 修改 gem 中的核心类

> ID：11428847
> 
> 赞同：3
> 
> 时间：2012-07-11T08:49:09.493
> 
> 标签：ruby, gem

我正在开发一个我认为对更多人有用的宝石，而不仅仅是我。我面临的一个问题是我需要合并嵌套哈希。我发现[这个有用的 Gist](https://gist.github.com/6391/62b6aae9206abe7b3fea6d4659e4c246f8cf7632)可以实现这一点，但现在我想知道在 Gem 中像这样修改 Hash# 是否可以？

我确信有一个社区“标准”或最佳实践可以接受或拒绝这种代码，所以我转向 SO 寻求指导。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T08:54:21.803

如有疑问，只需子类`Hash`化并将模块包含在您的子类中。当您重写方法或显着改变行为时，您应该特别这样做。

但我不明白为什么你不应该只修改`Hash`课程。例如，Rails 严格地扩展了 Core 类，我从未听过有人抱怨。你可以看看 Rails 是如何`activesupport`扩展核心类的：

[https://github.com/rails/rails/tree/master/activesupport/lib/active_support/core_ext](https://github.com/rails/rails/tree/master/activesupport/lib/active_support/core_ext)

只需确保不要破坏现有行为，这样 gem 的用户就不会遇到不需要的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T09:26:45.040

您应该始终有充分的理由扩展核心课程。我会说深度合并是足够好的理由。为深度合并添加新的哈希方法`Hash#deep_merge`- 为什么不呢。

但我不认为它证明*修改*现有方法是合理的——覆盖`Hash#merge`以支持深度合并。人们期望这种方法以某种方式运行，如果在需要您的 gem 后它突然出现不同的行为，他们将不会喜欢它。如果您绝对必须这样做，请在文档的显眼位置进行描述。

**更新：**只需阅读其他答案下的评论。是的，在这种情况下，最好的解决方案就是简单地包括`activesupport/lib/active_support/core_ext/hash/deep_merge`:)

# objective-c - 使用自定义 FOR 循环？

> ID：11428848
> 
> 赞同：-4
> 
> 时间：2012-07-11T08:49:10.637
> 
> 标签：objective-c, for-loop, foreach

简单的问题，
**只是为了好玩**。

我想创建一个类别或*类似的东西*，“ *sublassing* ”FOR 循环，在 obectivec 中创建一个**FOREACH**，**或者创建一个自定义循环**。

好的，FOR 循环不是一个类，我们不能创建一个类别或子类。我们知道。

我可以使用`for (MyObj *obj in _MyArray ) { }`，但我不想要。
我想做这个：

```
foreach (MyObj *obj in _MyArray) { } 
```

或者更好的自定义 FOR 循环，它与经典的 FOR 循环不同。

**注意**：不想要宏/定义。

建议？
是否可以制作类似的东西？

* * *

# 编辑

**感谢downvote，尤其是没有评论！
如果您不喜欢这个问题或者这个问题没有回复，请忽略它，或者最好发表评论！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:58:33.427

“for”不是一个类，你不能继承它。

Obj-C 确实有一个 for..in 语法，您可以将其用于您描述的情况。它看起来像这样：

```
for (MyObj *obj in _MyArray)
{
...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T09:52:28.850

```
#define foreach for
foreach (MyObj *obj in _MyArray) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:56:53.817

你应该看看 LLVM Clang 以及如何扩展语言解析器。如果您不想使用宏，那就是要走的路。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T09:13:54.107

`for (MyObj *obj in _MyArray ) { }`是你所需要的全部。

# java - Web服务客户端，我应该保留服务还是端口实例？

> ID：11428849
> 
> 赞同：4
> 
> 时间：2012-07-11T08:49:12.173
> 
> 标签：java, web-services, jax-ws, cxf

我正在开发 Web 服务客户端，`cxf-codegen-plugin`它正在`MyService extends Service`为客户端部分生成类。
我现在的问题是：当我创建客户端时，是否应该`MyService`在每次我想发送请求或保留它以及每次创建端口时创建我的对象？或者我可以保留端口吗？获得客户的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:07:15.297

保留端口绝对是性能最佳的选择，但请记住线程安全方面：

[http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe%3F](http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T22:15:41.873

`Service`每次发送请求时创建类将是非常低效的方式。创建 Web 服务客户端的正确方法是在第一次应用程序启动时。例如，我从 Web 应用程序调用 Web 服务并使用`ServletContextListener`它来初始化 Web 服务。CXF Web 服务客户端可以这样创建：

```
private SecurityService proxy;

/**
 * Security wrapper constructor.
 *
 * @throws SystemException if error occurs
 */
public SecurityWrapper()
        throws SystemException {
    try {
        final String username = getBundle().getString("wswrappers.security.username");
        final String password = getBundle().getString("wswrappers.security.password");
        Authenticator.setDefault(new Authenticator() {
            @Override
            protected PasswordAuthentication getPasswordAuthentication() {
                return new PasswordAuthentication(
                        username,
                        password.toCharArray());
            }
        });
        URL url = new URL(getBundle().getString("wswrappers.security.url"));
        QName qname = new QName("http://hltech.lt/ws/security", "Security");
        Service service = Service.create(url, qname);
        proxy = service.getPort(SecurityService.class);
        Map<String, Object> requestContext = ((BindingProvider) proxy).getRequestContext();
        requestContext.put(BindingProvider.ENDPOINT_ADDRESS_PROPERTY, url.toString());
        requestContext.put(BindingProvider.USERNAME_PROPERTY, username);
        requestContext.put(BindingProvider.PASSWORD_PROPERTY, password);
        Map<String, List<String>> headers = new HashMap<String, List<String>>();
        headers.put("Timeout", Collections.singletonList(getBundle().getString("wswrappers.security.timeout")));
        requestContext.put(MessageContext.HTTP_REQUEST_HEADERS, headers);
    } catch (Exception e) {
        LOGGER.error("Error occurred in security web service client initialization", e);
        throw new SystemException("Error occurred in security web service client initialization", e);
    }
} 
```

在应用程序启动时，我创建这个类的实例并将其设置为应用程序上下文。还有一种使用spring创建客户端的好方法。看看这里：[http ://cxf.apache.org/docs/writing-a-service-with-spring.html](http://cxf.apache.org/docs/writing-a-service-with-spring.html)

希望这可以帮助。

# asp.net-mvc-3 - 使用 JQuery post 方法处理 MVC 动作结果

> ID：11428857
> 
> 赞同：0
> 
> 时间：2012-07-11T08:49:33.713
> 
> 标签：asp.net-mvc-3

我正在调用 MVC 操作，如下所示：

```
var RestaurantDetailsUIforForeignWidget = {
    frmId: '',
    onFormSubmit: function () {
        var frm = $(RestaurantDetailsUIforForeignWidget.frmId);
        var divResult;
        $('.offerbox').hide();
        $.post(frm.attr('action'), frm.serialize(), function (html) {
            // $('#section-time-slots').html(html)
            $('#contentAll').html(html);
            DisplayOffer();
        });
        return false;
    },
    updateTimeDesc: function () {
        $('#time').val($('#SittingTime option:selected').html());
    },
    init: function (frmId) {
        RestaurantDetailsUIforForeignWidget.frmId = frmId;
        $('#SittingTime').bind('change', RestaurantDetailsUIforForeignWidget.updateTimeDesc);
        $(frmId).bind('submit', RestaurantDetailsUIforForeignWidget.onFormSubmit);
        RestaurantDetailsUIforForeignWidget.updateTimeDesc();
    }
}; 
```

如您所见`$('#contentAll').html(html);`，使用结果更新整个视图内容。我想要的是从 html 输出中获取单个 div 并更新它`$('#section-time-slots')`。

请帮助我...谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:58:03.957

尝试这个：

```
 $.post(frm.attr('action'), frm.serialize(), function (html) {
        $('#section-time-slots').html($("#IdOfRequiredElementInResponse", html).html());
        DisplayOffer();
    }); 
```

# xml - 使用 xslt 在 xml 中检查条件

> ID：11428861
> 
> 赞同：1
> 
> 时间：2012-07-11T08:49:48.560
> 
> 标签：xml, xslt, xslt-1.0

输入 XML

```
<Employer>
     <Employeedetail>Sam SR Engineer 10%</ Employeedetail >
     <Employeedetail>Sam SR 10%</ Employeedetail >
     <Employeedetail>Sam SR</ Employeedetail >
</ Employer > 
```

下面是输出输入 XML

```
<Employer>
 < Employeedetails >
  < Employeedetail1>
    < Employeedetail >
       <Name>Sam</ Name >
       <Grade> SR Engineer </ Grade >
       <Experience>10</ Experience >
    </ Employeedetail >
  </ Employeedetail1>
 </ Employeedetails>
</ Employer >

 <Employer>
 < Employeedetails >
  < Employeedetail1>
    < Employeedetail >
       <Name>Sam</ Name >
       <Grade>SR</ Grade >
       <Experience>10</ Experience >
    </ Employeedetail >
  </ Employeedetail1>
 </ Employeedetails>
</ Employer >

 <Employer>
 < Employeedetails >
  < Employeedetail1>
    < Employeedetail >
       <Name>Sam</ Name >
       <Grade>SR</ Grade >
       <Experience>10</ Experience >
    </ Employeedetail >
  </ Employeedetail1>
 </ Employeedetails>
</ Employer > 
```

如果我们有三个空间分散的节点，他们会帮助堆栈溢出的人，我们将获得输出

但是，如果您查看 Sr Engineer 等级，这将再次进入等级，但我所拥有的代码将在 Grade 元素中显示 SR，而 Engineer 和 10（经验）将在 Experience 元素中出现。

如果没有经验值，则默认为 10。

在上面的输入 XML 中，将会有许多员工详细信息。

[这是该 xslt 的链接](https://stackoverflow.com/questions/11388891/inset-xslt-missing-element#comment15015103_11388891)

请帮忙解答上述问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:03:25.570

查看`xsl:analyze-string` [http://www.w3.org/TR/xslt20/#analyze-string](http://www.w3.org/TR/xslt20/#analyze-string)例如沿线

```
<xsl:template match="Employeedetail">
 <Employeedetail>
  <xsl:analyze-string="." regex="(\w+)\s+(\w+(\s\w+)?)\s+(\d+)">
    <xsl:matching-substring>
       <Name><xsl:value-of select="regex-group(1)"/></Name>
       <Grade><xsl:value-of select="regex-group(2)"/></Grade>
       <Experience><xsl:value-of select="regex-group(4)"/></Experience>
    </xsl:matching-substring>
  </xsl:analyze-string>
 </Employeedetail>
</xsl:template> 
```

未经测试，但应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:34:00.630

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Employeedetail">
  <xsl:variable name="vExp" select=
   "substring(., string-length()-2, 2)"/>
     <Employer>
      <Employeedetails>
        <Employeedetail1>
            <Employeedetail>
             <name><xsl:value-of select="substring-before(., ' ')"/></name>
             <grade>
               <xsl:value-of select=
               "substring-before(substring-after(., ' '), $vExp)"/>
             </grade>
             <experience><xsl:value-of select="$vExp"/></experience>
            </Employeedetail>
        </Employeedetail1>
      </Employeedetails>
     </Employer>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Employer>
    <Employeedetail>Sam SR Engineer 10%</Employeedetail>
</Employer> 
```

**产生想要的正确结果**：

```
<Employer>
   <Employeedetails>
      <Employeedetail1>
         <Employeedetail>
            <name>Sam</name>
            <grade>SR Engineer </grade>
            <experience>10</experience>
         </Employeedetail>
      </Employeedetail1>
   </Employeedetails>
</Employer> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T13:29:26.593

Maha，我建议您在 XSLT 1.0 字符串函数上进行谷歌搜索。这种问题真的很琐碎，你不应该在 StackOverflow 上发帖。是的，您可能是初学者，但这并不妨碍您使用 google。

以下是您的几个起点：

1.  看看[http://www.w3schools.com/xpath/xpath_functions.asp](http://www.w3schools.com/xpath/xpath_functions.asp)
2.  关于您的特定问题，请考虑函数 string-before() 和 string-after()

# c# - 使用正则表达式 c# 选择以特定字符串结尾的字符串

> ID：11428864
> 
> 赞同：0
> 
> 时间：2012-07-11T08:49:52.423
> 
> 标签：c#, regex

字符串是“$$$ dkfdjkfj**名称**$$$ kdfjdf**发布**
dkfdjkfj**名称** **名称**

仅选择以 $$$ 开头并以**name**结尾或以空格开头并以**name**结尾的字符串，并且两者之间不应有任何 html 标记。

上面的输出是：dkfdjkfj

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:00:27.557

为什么要使用正则表达式？

您可以使用内置的字符串功能来做到这一点，例如：

```
if(myString.StartsWith("$$$") && myString.EndsWith(name) && (!myString.Contains("<") && !myString.Contains(">"))) DoSomething(); 
```

您可能想要创建一些更高级的 html 标记逻辑。我的示例假定同一字符串中的 < 和 > 是 html 标记。

**编辑**：我误解了你的问题。您可以使用子字符串，例如：

```
var str = myString.Substring(myString.IndexOf("$$$")+3, myString.IndexOf("name")-3); 
```

索引为 +3，因为您不想包含 $$$ 或姓名。如果一个字符串中有许多有效的子字符串，则必须遍历它并记住 $$$ 的最后一个索引，然后从该位置搜索下一个。

# iphone - 应用内推广最佳实践

> ID：11428865
> 
> 赞同：0
> 
> 时间：2012-07-11T08:49:53.777
> 
> 标签：iphone

我想创建一个框架来在应用程序中宣传我的其他应用程序。我想我可以简单地创建一个放置在主菜单屏幕或主视图中的 UIButton，以将用户引导到包含我们其他应用程序信息的 UIView。但是，这样，如果我想在 UIView 中更新或添加新的其他应用程序，我需要为该应用程序创建一个新版本。

我需要一种可以随时更新其他应用程序列表的方法。谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:55:16.443

设置一个 web 服务，它将从列表中返回一个随机的或最新的一个等 + 一个 url 到在线图像。这样应用程序将保持不变，并且它只是需要更新的后端

# google-app-engine - 每秒更新的网站的谷歌应用引擎？

> ID：11428875
> 
> 赞同：0
> 
> 时间：2012-07-11T08:50:06.463
> 
> 标签：google-app-engine

如果值得探索 Google APP Engine 选项，我需要建议，所以如果有学识和有经验的用户可以发表评论，那真的很有帮助（我不需要代码）

当前场景：我有一个网站，那里的数据需要每秒更新一次？它基于.NET，用户每次访问都需要更新数据，数据每秒都在变化。用户已为 URL 添加了书签，因此数据已更改且 URL 保持不变。

我们还有很多静态数据，用户可以访问这些数据进行研究和阅读。

使用云的经验：我们曾尝试将网站与其中一个大玩家一起使用（不是与最初的云公司，而是与他们最接近的竞争对手；）我们有时会遇到文件卡住的问题（基本上一些用户看到更新，有些则没有） ，并且他们实施了“修改信任”权限级别，这在多个地方限制了我们（在目录中自动生成文件）

我的问题： (a) 您认为在上述情况下，Google App Engine 可以提供帮助吗？(b) URL 重写更具体地生成 200 服务器返回而不是 404 是否可能，或者 404 被捕获并转换为 302 并重定向？(c) 当我们从传统迁移到云时，我们在托管费用上出现了一个漏洞，现在我们又回到了使用负载均衡器的传统服务器上，你认为在流量大的网站上我们是坚持传统还是看看谷歌应用降低我们的成本？

我期待听到评论..

提前感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:51:37.270

*(a) 您认为在上述情况下，Google App Engine 可以提供帮助吗？*

用户看不到数据的问题是数据库中缓存或最终一致性的一个因素。这不会通过迁移到新的云提供商来“解决”。appengine 数据存储使用最终一致性，但您可以通过使用 memcache 存储经常更改的数据来解决该问题。也就是说，Appengine 无法让您完全控制 memcache，因此您可能仍然无法解决该问题。

*(b) URL 重写更具体地生成 200 服务器返回而不是 404 是否可能，或者 404 被捕获并转换为 302 并重定向？*

不太清楚你在这里的意思。您当然可以使用任何物有所值的 Web 框架返回 302 或 200 响应而不是 404

(c) 如果设计得好，appengine 可以非常具有成本效益，但如果不进行优化，它可能会浪费钱......那里有很多关于如何有效优化它的好论文，但如果你在谈论一个很多用户每秒钟都会访问该网站，而您将为此付费。

# .net - 我可以在多台机器上运行 F# 代理吗？

> ID：11428877
> 
> 赞同：7
> 
> 时间：2012-07-11T08:50:15.613
> 
> 标签：.net, f#, mapreduce

是否可以在多台机器上作为集群运行 F# 代理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:42:42.080

是的，绝对可以在许多机器上以 map-reduce 算法运行代理，但是 F# 中没有内置的东西可以自动执行。

您需要实现一个 map-reduce 算法，让代理在集群上运行，可能作为 Windows 服务，然后在源和代理之间进行通信，可能通过 WCF。

# c# - 从客户端禁用服务器端验证的通用解决方案

> ID：11428879
> 
> 赞同：0
> 
> 时间：2012-07-11T08:50:25.993
> 
> 标签：c#, asp.net, validation, requiredfieldvalidator

我有这样的场景。

包含两个不同 DropDownLists 的两个 div。这两个 div 的可见性都由两个独立的复选框控制*客户端*，并且两个 DropDownLists 都有必需的字段验证器，我希望在隐藏 div 时禁用它们（即：未选中复选框）。

因此，知道有一种方法可以让您禁用字段验证器客户端，我进行了快速搜索并重新找到`ValidatorEnable(Validator, Boolean);`。在将所有内容连接起来之后，如果未选中复选框，我的客户端验证将被成功忽略，但问题是一旦我点击服务器端。

在这样的服务器上使用典型场景

```
protected void btnSave_Click(object sender, EventArgs e)
{
    Page.Validate();
    if (Page.IsValid) 
    {

    }
} 
```

在服务器端 - 令我惊讶的是，我的直觉告诉我这应该会影响双方 - 页面验证将继续报告`IsValid = false`。所以我用下面的代码运行了一些测试......

```
$(Page_Validators).each(function (index, value) {
    ValidatorEnable(value, false);
}); 
```

并很快确认 ValidatorEnable 方法实际上只影响客户端验证，并且保持字段验证器的服务器端状态不变。

现在我可能会想到几种方法来“hackaly”处理这个问题。例如：在回发时检查复选框状态并根据需要禁用验证器，设置一些隐藏字段等。但问题是我在一个**非常大**的项目中使用此功能，并且我应用的标准将在未来使用形式。

所以基本上我希望找到一个通用的解决方案，它不需要对 ASP.NET 中的字段验证器提供的典型简单性进行重大更改。有任何想法吗？

PS：刚刚意识到，如果我对此不小心，我可能会引入安全漏洞，对吗？这可能是微软默认不这样做的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:57:03.147

可以使用一种非常简单的方法，即为每个验证器使用隐藏字段，并通过客户端输入、操作或您想要的任何内容，只需通过 javascript 在这些隐藏字段中填写一些自定义值，例如 true 和 false。

回发表单时，您可以检查隐藏字段值的真假，并根据这些值启用或禁用服务器端验证器。

# cocoa-touch - 为什么需要使用 'addChildViewController:' 方法

> ID：11428882
> 
> 赞同：2
> 
> 时间：2012-07-11T08:50:33.173
> 
> 标签：cocoa-touch

请解释一下，为什么我需要使用`addChildViewController:`方法？
毕竟，当我将 subview 放到 view 时`[some_obj.view addSubview:some_view]`，这些 subview 知道他的控制器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:26:19.680

`addChildViewController`

需要被调用，因为父控制器需要持有对其子视图控制器的引用以进行生命周期/后台管理......当添加为子视图时，此引用不能/不应该从 UIView 获取

您也可以通过以下方式从孩子那里参考父母`self.parentViewController`

苹果说`addChildViewController`

> 将给定的视图控制器添加为子视图。如果新的子视图控制器已经是容器视图控制器的子视图，则在添加之前将其从该容器中删除。此方法仅供自定义容器视图控制器的实现调用。如果你重写这个方法，你必须在你的实现中调用 super。

对于添加/删除，您可以参考这个伟大的类别而无需担心何时调用它：

[UIViewController + 容器](https://github.com/xelvenone/UIViewController--Container-)

```
- (void)containerAddChildViewController:(UIViewController *)childViewController {

    [self addChildViewController:childViewController];
    [self.view addSubview:childViewController.view];
    [childViewController didMoveToParentViewController:self];

}

- (void)containerRemoveChildViewController:(UIViewController *)childViewController {

    [childViewController willMoveToParentViewController:nil];
    [childViewController.view removeFromSuperview];
    [childViewController removeFromParentViewController];

} 
```

# c++ - 将循环中的元素添加到容器（生命周期）

> ID：11428883
> 
> 赞同：-1
> 
> 时间：2012-07-11T08:50:35.460
> 
> 标签：c++, scope, local

如果我使用下面的代码将元素添加到向量中，那么在我调用 foo 时，vec 的元素（自动变量）已被销毁，因为它们的创建范围结束了。

```
std::vector<A> vec;
for (int i = 0; i < n; i++) {
  A a;
  vec.push_back(a);
}

foo(vec); 
```

我现在的问题是教科书对此类问题的解决方案是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:53:00.040

不，中的元素`vec`将是`a`.

`vec`但是，如果要使用`operator[]`或使用，则需要分配大小`vec.push_back()`：

```
for (int i = 0; i < n; i++) vec.push_back(A()); 
```

编辑（问题更改后）：

即使`push_back()`将其参数作为参考，在内部它也会复制它。它通过引用接受它的参数，以避免在将副本存储在内部之前进行不必要的复制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:55:52.537

不要担心堆栈变量。当您在 std::vector 中推送值时，此容器会创建变量的堆副本。因此，当您在范围内时，您的所有变量都将存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T09:45:13.160

您可以将变量定义为全局变量，并在循环中让该变量中的值然后推回

# c# - 添加程序集引用是否有任何副作用？

> ID：11428886
> 
> 赞同：2
> 
> 时间：2012-07-11T08:50:53.353
> 
> 标签：c#, visual-studio-2010, assemblies

我目前正在调查一个奇怪的错误，其中仅在项目中添加某个程序集引用似乎会在运行时破坏另一个程序集的某些功能。有关详细信息，请参阅[关于 SO 的另一个问题](https://stackoverflow.com/questions/11313507/lync-videowindows-of-avmodality-videochannel-are-null-after-successfully-callin)。

添加程序集引用时会发生什么？它会产生什么样的副作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:33:49.863

> ### 全局程序集缓存
> 
> 您不能从全局程序集缓存添加引用，因为它严格属于运行时环境。

> ### 自定义组件
> 
> 如果部署或复制包含对全局程序集缓存中注册的自定义组件的引用的应用程序，则无论“复制本地”设置如何，都不会随应用程序一起部署或复制该组件。

> ### 另一个项目的输出
> 
> 您应该避免将文件引用添加到同一解决方案中另一个项目的输出，因为这样做可能会导致编译错误。相反，使用“添加引用”对话框的“项目”选项卡来创建项目到项目的引用。

> ### 注册的 COM DLL
> 
> 如果要添加对包含内部清单的已注册 COM DLL 的引用，请确保先取消注册 DLL。如果不这样做，Visual Studio 会将程序集引用添加为 ActiveX 组件，而不是作为本机 DLL。

> ### EnvDTE 命名空间
> 
> 当您手动添加对任何 EnvDTE 命名空间（EnvDTE、EnvDTE80、EnvDTE90、EnvDTE90a 或 EnvDTE100）的引用时，请在“属性”窗口中将引用的嵌入互操作类型属性设置为 False。由于无法嵌入某些 EnvDTE 属性，将此属性设置为 True 可能会导致生成问题。

^(参考：[MSDN - 如何：在 Visual Studio 中添加或删除引用](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx))

# ember.js - 查看助手：如果布尔值为 false，则为 classBinding

> ID：11428887
> 
> 赞同：5
> 
> 时间：2012-07-11T08:50:59.817
> 
> 标签：ember.js

如果布尔值为 FALSE，我如何使用 #view 助手将类绑定到视图？

```
// this is working
{{#view App.MyView controllerBinding="this" classBinding="controller.content.isActive"}}
    <div>test</div>
{{/view}}

// and this is what i want:
{{#view App.MyView controllerBinding="this" classBinding="!controller.content.isActive:is-not-active"}}
    <div>test</div>
{{/view}} 
```

如果为假，我想`is-not-active`作为类名绑定到视图。`controller.content.isActive`

我可以在视图上制作一个简单的逆变器功能，但我有更好的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T09:40:58.810

**更新**：拉取请求已被合并，因此您可以为这样的`false`值添加一个类：

```
{{#view App.MyView controllerBinding="this"
   classBinding="controller.content.isActive:is-active:is-not-active"}}
{{/view}} 
```

如果值是 不想添加类`true`，可以使用以下语法：

```
{{#view App.MyView controllerBinding="this"
   classBinding="controller.content.isActive::is-not-active"}}
{{/view}} 
```

* * *

我会在视图上创建一个属性（就像你已经对你的逆变器所做的那样）并绑定到这个：

**车把**：

```
{{#view App.MyView controllerBinding="this" classBinding="isNotActive"}}
    <div>test</div>
{{/view}} 
```

**JavaScript**：

```
App.MyView = Ember.View.extend({
    isNotActive: Ember.Binding.not('controller.content.isActive')
}); 
```

* * *

我创建了一个尚未合并的[拉取请求，但它解决了这个问题，并会像这样解决它：](https://github.com/emberjs/ember.js/pull/732)

```
{{#view App.MyView controllerBinding="this"
   classBinding="controller.content.isActive:is-active:is-not-active"}}
    <div>test</div>
{{/view}} 
```

# iphone - 目标 c 中的内存警告

> ID：11428888
> 
> 赞同：0
> 
> 时间：2012-07-11T08:51:03.933
> 
> 标签：iphone, objective-c, memory-management

在我的应用程序中，当我连续调用 json 或打开 uiimagePicker 相机源 4-5 次时，我得到了`Received memory warning. Level=1`并且立即我的应用程序崩溃了。这背后的原因是什么

我正在使用自定义 UIImagePickerController 例如。下面的代码......

```
- (void)viewDidLoad {
[super viewDidLoad];

[[UIApplication sharedApplication] setStatusBarHidden:YES];
front = YES;
imgPicker = [[UIImagePickerController alloc] init];
imgPicker.sourceType = UIImagePickerControllerSourceTypeCamera;
imgPicker.delegate = self;
imgPicker.showsCameraControls = NO;

cameraOverlayView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"cam-land03.png"]];
cameraOverlayView.alpha = 0.0f;
imgPicker.cameraOverlayView = cameraOverlayView;

// animate the fade in after the shutter opens
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDelay:2.2f];
cameraOverlayView.alpha = 1.0f;
[UIView commitAnimations];
[cameraOverlayView release];

toolBarView = [[UIView alloc] initWithFrame:CGRectMake(0, 425, 320, 55)];
toolBarView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bg-bar.png"]];
toolBarView.layer.borderColor = [[UIColor whiteColor] CGColor];
toolBarView.layer.borderWidth = 0.0f;

[imgPicker.view addSubview:toolBarView];

cameraBtn = [UIButton buttonWithType:UIButtonTypeCustom];
cameraBtn.frame = CGRectMake(110,5,100,47);
[cameraBtn setImage:[UIImage imageNamed:@"land-top.png"] forState:UIControlStateNormal];
[cameraBtn addTarget:self action:@selector(takePicture) forControlEvents:UIControlEventTouchUpInside];
[toolBarView addSubview:cameraBtn];

cancel = [UIButton buttonWithType:UIButtonTypeCustom];
cancel.frame = CGRectMake(10,13,50,30);
[cancel setImage:[UIImage imageNamed:@"btn-cancel.png"] forState:UIControlStateNormal];
[cancel addTarget:self action:@selector(cancel) forControlEvents:UIControlEventTouchUpInside];
[toolBarView addSubview:cancel];

[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didOrientation:) name:@"UIDeviceOrientationDidChangeNotification" object:nil];

[self presentModalViewController:imgPicker animated:YES];

} 
```

当我从服务器调用同步响应时，接收响应并存储本地数据库需要 30-40 秒。

```
 NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
NSString *myString = [prefs stringForKey:@"url"];                                                          

    NSUserDefaults *authCode = [NSUserDefaults standardUserDefaults];
NSString *auth = [authCode stringForKey:@"authcode"];

NSUserDefaults *profileId = [NSUserDefaults standardUserDefaults];
NSString *profile = [profileId stringForKey:@"profileId"];

purchaseURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@/attachbusinesscard",myString]];

NSData *data = [[NSData alloc] init];
data = UIImagePNGRepresentation(image);

NSUInteger length = [data length];
unsigned char *bytes = malloc( length * sizeof(unsigned char) );

// Get the data
[data getBytes:bytes length:length];
NSLog(@"AfterByteConvertion");

NSMutableString *strCrop = [[NSMutableString alloc] init];
for (int i=0; i<[data length]; i++) {
[strCrop appendString:[NSString stringWithFormat:@"%d",bytes[i]]];
    if (i!=[data length]-1) {
    [strCrop appendString:@","];
    }
 }

 NSString *postString;

 if (forBack) {
    postString= [NSString stringWithFormat:@"{\"AuthCode\":\"%@\",\"ProfileId\":\"%@\",\"Back\":[%@],\"Front\":\"\",\"Id\":\"%@\"}",auth,profile,strCrop,str];  
    forBack=NO;
 }
  else {
    postString= [NSString stringWithFormat:@"{\"AuthCode\":\"%@\",\"ProfileId\":\"%@\",\"Back\":\"\",\"Front\":[%@],\"Id\":\"%@\"}",auth,profile,strCrop,str];
 }  

 NSData *requestData = [NSData dataWithBytes:[postString    UTF8String] length:[postString length]];
 NSMutableURLRequest *request=[NSMutableURLRequest requestWithURL:purchaseURL];
 [request setHTTPMethod:@"POST"];

 [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];

 [request setValue:@"application/json; charset=utf-8" forHTTPHeaderField:@"Content-Type"];

 [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];

 [request setHTTPBody:requestData];//[postString dataUsingEncoding:NSUTF8StringEncoding]];

  NSURLConnection *purchaseConn =[[NSURLConnection alloc]
                                    initWithRequest:request
                                    delegate:self];
      if (purchaseConn) {
    webData = [[NSMutableData data] retain];
  } 
```

请帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T09:00:45.813

如果您要全局获取对象，则将对象`UIImagePickerController`释放到`UIImagePickerController`

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 ....
 .....

  [imgPicker release];

} 
```

如果您要在`UIImagePickerController`本地发布对象

```
[self.navigationController presentModalViewController:imgPicker animated:YES];
[imgPicker release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:54:34.903

当您收到内存警告时，您需要释放您不再想使用的内存。

1.  你必须实现[didReceiveMemoryWarning](https://stackoverflow.com/questions/2430728/how-to-implement-didreceivememorywarning)
2.  您还可以考虑迁移到 ARC 作为优化的一部分

# php - 使用正则表达式查找字符串是否在数组内并替换它 + PHP

> ID：11428911
> 
> 赞同：0
> 
> 时间：2012-07-11T08:52:09.807
> 
> 标签：php, regex

```
$restricted_images = array(
    "http://api.tweetmeme.com/imagebutton.gif",
    "http://stats.wordpress.com",
    "http://entrepreneur.com.feedsportal.com/",
    "http://feedads.g.doubleclick.net"
); 
```

这是我想知道某个字符串是否具有那种字符串的图像列表。

例如：

```
$string = "http://api.tweetmeme.com/imagebutton.gif/elson/test/1231adfa/". 
```

由于`"http://api.tweetmeme.com/imagebutton.gif"`是在`$restricted_images`数组中，也是变量内的字符串`$string`，所以它会将变量替换`$string`成一个单词`"replace".`

你知道怎么做吗？我不是 RegEx 的大师，所以任何帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:56:25.023

也许这可以帮助

```
foreach ($restricted_images as $key => $value) {
    if (strpos($string, $value) >= 0){
        $string = 'replace';
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T08:58:10.603

为什么是正则表达式？

```
$restricted_images = array(
    "http://api.tweetmeme.com/imagebutton.gif",
    "http://stats.wordpress.com",
    "http://entrepreneur.com.feedsportal.com/",
    "http://feedads.g.doubleclick.net"
);

$string = "http://api.tweetmeme.com/imagebutton.gif/elson/test/1231adfa/";
$restrict = false;
foreach($restricted_images as $restricted_image){
    if(strpos($string,$restricted_image)>-1){
        $restrict = true;
        break;
    }
}

if($restrict) $string = "replace"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:57:02.397

您实际上并不需要正则表达式，因为您正在寻找直接的字符串匹配。

你可以试试这个：

```
foreach ($restricted_images as $url) // Iterate through each restricted URL.
{
    if (strpos($string, $url) !== false) // See if the restricted URL substring exists in the string you're trying to check.
    {
        $string = 'replace'; // Reset the value of variable $string.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T08:59:41.460

您不必为此使用正则表达式。

```
$test = "http://api.tweetmeme.com/imagebutton.gif/elson/test/1231adfa/";
foreach($restricted_images as $restricted) {
    if (substr_count($test, $restricted)) {
        $test = 'FORBIDDEN';
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T09:00:17.593

```
// Prepare the $restricted_images array for use by preg_replace()
$func = function($value)
{
    return '/'.preg_quote($value).'/';
}
$restricted_images = array_map($func, $restricted_images);

$string = preg_replace($restricted_images, 'replace', $string); 
```

编辑：

如果您决定不需要使用正则表达式（您的示例并不真正需要），那么这是一个比所有这些`foreach()`答案更好的示例：

```
$string = str_replace($restricted_images, 'replace', $string); 
```

# jquery-ui - 如何在几秒钟后自动关闭 jquery q 提示气球？

> ID：11428923
> 
> 赞同：0
> 
> 时间：2012-07-11T08:53:06.587
> 
> 标签：jquery-ui, jquery-plugins

我正在使用 qtip 插件在我的页面上显示气球对话。我可以加载气球，但我没有看到几秒钟后自动关闭它的任何选项。

这就是我使用 qtip 的方式 -

```
 $('#ShowBalloon')
      .click(function()
      {
         if($("#content a").data("qtip")) $("#content a").qtip("destroy");

         $("#content a").html("") // Set the links HTML to the current opposite corner
            .qtip({
               content: { text: 'You have 1 new message.' },
               position: {
                  corner: {
                     tooltip: 'bottomRight',
                     target: 'topRight'
                  }
               },
               show: {
                  when: false, 
                  ready: true,
                  effect: { type: 'fade' },
                  length: 2000
               },
               hide: { when: 'inactive', delay: 1000 },
               style: {
                  border: {
                     width: 1,
                     radius: 7,
                     color : "#00AFF0"
                  },
                  title: { 'color': 'red', 'overflow': 'hidden' },
                  width: 300,
                  color:'White',
                  background: '#00AFF0',
                  padding: 10, 
                  textAlign: 'center',
                  tip: true, 
               }
            });

      }); 
```

# mysql - 如何在 MySQL 中提高我的 Left Join 查询性能？

> ID：11428924
> 
> 赞同：0
> 
> 时间：2012-07-11T08:53:06.960
> 
> 标签：mysql, performance, select, left-join

我继承了一个运行 Coldfusion8 和 MySQL 5.0.88 的站点。

我有两个表 -包含产品信息的文章 ( **A** ) 和包含卖家价格表的价格表 ( **P )。**

产品在产品表中是唯一的，但可能在价目表中包含多个条目（取决于价目表的数量）。

在我的产品搜索中，我需要从**A**获取产品信息，如果卖家为用户分配了价目表，我还需要从**P**中的相应价目表中获取价格。

在进行实际产品查询之前，我会预先编译所有卖家 ID 和价目表名称，如下所示：

```
SELECT count(A.id) AS total
    FROM arts A

    <cfif variables.use_pricelists neq "">  
    LEFT JOIN preislisten p ON
            A.ean = P.ean
        AND A.sellerID = p.sellerID
        AND (
            // precompiled list - hardcoded loop
            ( P.list_name = "-Standard-" AND P.sellerID = "2222222222222" )
            OR
            ( P.list_name = "I" AND P.sellerID = "3333333333333" )
            )
    </cfif>
    WHERE
    ... 
```

虽然这有效......它需要永远。在不检查价目表的情况下，我可以在不到 1 秒的时间内完成搜索。如果需要检查价格表，则需要 7-10 秒。

**问题**：
这可以用不同类型的语法更快地完成吗？

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:57:31.373

为什么不索引列，以获得更好的性能创建索引语法：

在 preislisten (ean) 上创建索引 idx_ean

# c# - 如何在没有 MCR/MATLAB 的情况下在 C# 中使用 MATLAB 编译的 DLL？

> ID：11428925
> 
> 赞同：5
> 
> 时间：2012-07-11T08:53:07.537
> 
> 标签：c#, matlab, dll, pinvoke, matlab-deployment

抱歉，如果这个问题已经被问过，但我找不到我一直在寻找的东西。我想知道是否有一种方法可以在 C# 中使用 MATLAB 编译的 c 共享库而不使用 MCR/MATLAB（或通常任何额外的安装），例如使用这个简单的函数 test.m，通过 mcc 将其编译成.dll 然后在 C# 中使用它：

```
[x,y,z]=test(a,b,c)
%x,a are integers
%y,z,b are matrices
%c is a string (which e.g. could be used to switch between several modes)

x=a*a;
y=b*b-b;
z=y*y; 
```

我不完全确定这样做是否可能（更不用说容易了），但即使使用这个简单的示例，我也无法让它在 C# 中工作，尽管这也可能与我非常有限的 C# 经验有关。我想在这个例子中我将不得不使用 IntPtr 来处理矩阵，例如：

```
[DllImport("test.dll",EntryPoint="mlfTest")]
public static extern void testfunction([In] numargout, ref IntPtr x, ref IntPtr y, ref IntPtr z, [In] IntPtr a, [In] ref double[,] b, [In] ref c) 
```

然后尝试通过与 Marshal 一起工作来从 x,y,z 中获取数据？我想我也犯了一些相当明显的错误，例如我不确定我是否可以将 ref double[,] 传递给 dll 并期望它能够工作。

我想如果绝对必要的话，我可以使用 MCR（这会使事情变得容易得多），但现在我受到了限制。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:50:07.840

不幸的是，你所要求的是不可能的。MATLAB 编译器生成的任何内容都***需要***在系统上安装 MATLAB 运行时。作为 MATLAB 安装本身的一部分，或单独安装。为什么？因为代码生成了对这些库的调用。

您知道您可以免费分发 MCR 安装程序而没有任何版税问题，对吧？

现在，另一方面，如果您真的想摆脱 MATLAB，那么您需要查看[MATLAB Coder](http://www.mathworks.com/products/matlab-coder/index.html)。它是 MATLAB 中唯一可以让您创建真正的独立代码的组件（据我所知）。坏消息是它只输出到 C/C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:47:09.307

正如其他人所说，使用 MATLAB 编译器生成的任何内容都需要 MCR。

集成 MATLAB 和 C# 的另一个选项是使用[MATLAB COM Automation](http://www.mathworks.com/help/techdoc/matlab_external/brd0vd4-1.html)。请参阅[此处](http://www.mathworks.com/help/techdoc/matlab_external/f135590.html#f135616)的示例：

```
using System;

namespace testMATLAB
{
    class Program
    {
        static void Main(string[] args)
        {
            MLApp.MLAppClass matlab = new MLApp.MLAppClass();

            System.Array pr = new double[4];
            pr.SetValue(11, 0);
            pr.SetValue(12, 1);
            pr.SetValue(13, 2);
            pr.SetValue(14, 3);

            System.Array pi = new double[4];
            pi.SetValue(1, 0);
            pi.SetValue(2, 1);
            pi.SetValue(3, 2);
            pi.SetValue(4, 3);

            matlab.PutFullMatrix("a", "base", pr, pi);

            System.Array prresult = new double[4];
            System.Array piresult = new double[4];

            matlab.GetFullMatrix("a", "base", ref prresult, ref piresult);
        }
    }
} 
```

# android - FragmentActivity中的Android admob

> ID：11428926
> 
> 赞同：1
> 
> 时间：2012-07-11T08:53:18.210
> 
> 标签：android, admob, android-fragmentactivity

我的新应用程序有一个大问题，我正在使用新的 ATD Plugin for Eclipse 提供的新 FragmentActivity。分步指南为我创建了包含 3 部分的主要 FragmentActivity。

这是代码：

```
package com.italiandevteam.chuck;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.Toast;

public class ChuckActivity extends FragmentActivity{

/**
 * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
 * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
 * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
 * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
 */
SectionsPagerAdapter mSectionsPagerAdapter;

/**
 * The {@link ViewPager} that will host the section contents.
 */
ViewPager mViewPager;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_chuck);
    // Create the adapter that will return a fragment for each of the three primary sections
    // of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_chuck, menu);
    return true;
}

/**
 * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
 * sections of the app.
 */
public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int i) {
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        switch (position) {
            case 0: return getString(R.string.title_section1);
            case 1: return getString(R.string.title_section2);
            case 2: return getString(R.string.title_section3);
        }
        return null;
    }
}

/**
 * A dummy fragment representing a section of the app, but that simply displays dummy text.
 */
public static class DummySectionFragment extends Fragment {
    public DummySectionFragment() {
    }

    public static final String ARG_SECTION_NUMBER = "section_number";

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
                //Create the view
        }
}

} 
```

我在我的开关中插入以`onCreateView`这种方式显示不同的布局：

```
switch(args.getInt(ARG_SECTION_NUMBER)){
                case 1:{
                     myView = getLayoutInflater(null).inflate(R.layout.layout_1, null);
                     break;
                }

                case 2:{
                    myView = getLayoutInflater(null).inflate(R.layout.layout_2, null);
                    break;
                }

            }
return myView 
```

现在我真的需要将 admob 添加到我的项目中，但如果我把这个 coe 放在`onCreate`方法中

```
AdView adView;

        // Create the adView
        adView = new AdView(this, AdSize.BANNER, "a14eedc43db2122");

        // Lookup your LinearLayout assuming it’s been given
        // the attribute android:id="@+id/mainLayout"
        LinearLayout layout = (LinearLayout)findViewById(R.id.linearLayout);

        // Add the adView to it
        layout.addView(adView);

        AdRequest request = new AdRequest();
        request.addTestDevice(AdRequest.TEST_EMULATOR);
        request.addTestDevice("B7709F3C1336BFAEFAD6E50877E3211F");

        // Initiate a generic request to load it with an ad
        adView.loadAd(request); 
```

我的应用程序将崩溃并且 logcat：

```
07-11 10:40:21.963: E/AndroidRuntime(4948): FATAL EXCEPTION: main
07-11 10:40:21.963: E/AndroidRuntime(4948): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.italiandevteam.chuck/com.italiandevteam.chuck.ChuckActivity}: java.lang.NullPointerException
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread.access$1500(ActivityThread.java:123)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.os.Looper.loop(Looper.java:130)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread.main(ActivityThread.java:3835)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at java.lang.reflect.Method.invokeNative(Native Method)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at java.lang.reflect.Method.invoke(Method.java:507)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at dalvik.system.NativeStart.main(Native Method)
07-11 10:40:21.963: E/AndroidRuntime(4948): Caused by: java.lang.NullPointerException
07-11 10:40:21.963: E/AndroidRuntime(4948):     at com.italiandevteam.chuck.ChuckActivity.onCreate(ChuckActivity.java:66)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-11 10:40:21.963: E/AndroidRuntime(4948):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
07-11 10:40:21.963: E/AndroidRuntime(4948):     ... 11 more 
```

我找不到在我的项目中插入 adMob 的方法，你能帮帮我吗？

编辑：

这是我的 activity_chuck.xml

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ChuckActivity">

    <!--
    This title strip will display the currently visible page title, as well as the page
    titles for adjacent pages.
    -->
    <android.support.v4.view.PagerTitleStrip android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#000"
        android:textColor="#fff"
        android:paddingTop="4dp"
        android:paddingBottom="4dp" />

</android.support.v4.view.ViewPager> 
```

这是我的 layout_1（类似于 layout_2）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical" >
    <LinearLayout
       android:id="@+id/linearLayout"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" 
       android:gravity="top"
     >
    </LinearLayout>
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/img_top" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
<TextView
    android:id="@+id/titolo_scheda"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/biografia"
    android:gravity="center"
    android:textSize="22sp"
    >
    </TextView>
</ScrollView>
</LinearLayout> 
```

编辑 2：现在使用开关中的 admob 代码，它可以工作，但仅适用于第一页，如果我滑动到第二部分，我就崩溃了，这是 LogCat：

```
07-11 14:51:27.117: E/AndroidRuntime(6282): FATAL EXCEPTION: main
07-11 14:51:27.117: E/AndroidRuntime(6282): java.lang.NullPointerException
07-11 14:51:27.117: E/AndroidRuntime(6282):     at com.italiandevteam.chuck.ChuckActivity$DummySectionFragment.onCreateView(ChuckActivity.java:139)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:871)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1083)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:635)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1431)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.view.ViewPager.populate(ViewPager.java:895)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.view.ViewPager.populate(ViewPager.java:772)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.view.ViewPager.completeScroll(ViewPager.java:1539)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.support.v4.view.ViewPager.computeScroll(ViewPager.java:1422)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewGroup.drawChild(ViewGroup.java:1562)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.View.draw(View.java:6900)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.widget.FrameLayout.draw(FrameLayout.java:357)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1908)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewRoot.draw(ViewRoot.java:1527)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1263)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.os.Looper.loop(Looper.java:130)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at android.app.ActivityThread.main(ActivityThread.java:3835)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at java.lang.reflect.Method.invokeNative(Native Method)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at java.lang.reflect.Method.invoke(Method.java:507)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
07-11 14:51:27.117: E/AndroidRuntime(6282):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经将 admob 的 xml LinearLayout 也放在了第二个布局中，这里 layout_2.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#000000"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:src="@drawable/img_top" />

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_horizontal" >

            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/bryce" />

            <ImageButton
                android:id="@+id/imageButton2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/beckman" />

        </TableRow>

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>

        <TableRow
            android:id="@+id/tableRow4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </TableRow>
    </TableLayout>

    </ScrollView>

      <LinearLayout
       android:id="@+id/linearLayout"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content" 
       android:gravity="top"
     >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:02:00.323

也发布您的布局 XML。

根据您的堆栈跟踪，`findViewById(R.id.pager)`返回`null`. 这意味着此 ID 未在`activity_chuck.xml`

# tableview - 适用于 iPhone 和 iPad 的 XCode iOS 1 TableView？

> ID：11428927
> 
> 赞同：-1
> 
> 时间：2012-07-11T08:53:24.563
> 
> 标签：tableview, cell

我有`UITableView`一个自定义单元格，它们都适用于 iPad（尺寸） 最好的方法是什么？我应该创建一个新的`UITableView`笔尖和一个新的 Cell 笔尖并调用它们还是在需要时调整它们的大小？还请给我说明如何使用这些解决方案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:35:16.027

我只为 iPhone 创建了一个新的 Cell nib，并在 tableview 的 VC 中检查了应用程序是否在 iPhone 或 iPad 上运行并调用了正确的 nib。

```
 NSArray *objects;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
    objects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell-iPad" owner:self options:nil];
    }
    else {
    objects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell-iPhone" owner:self options:nil];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T08:57:51.047

表格视图通常不会在 ipad 上单独使用，因为它们有更多空间，通常设计模式是左侧有一个小表格视图，右侧有一个内容区域。我相信有一个 uisplitviewcontroller 来处理这个问题。

# asp.net-mvc-3 - EF + MVC3：页面模型为IPagedList时如何创建DropDownList过滤器？

> ID：11428937
> 
> 赞同：0
> 
> 时间：2012-07-11T08:53:52.690
> 
> 标签：asp.net-mvc-3, entity-framework-4, filter, ienumerable

我一直在关注 asp.net 关于创建分页和过滤的优秀教程：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-在-asp-net-mvc-应用程序中使用实体框架进行分页](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application)

我现在想使用下拉列表添加另一个过滤器来过滤我的项目。我找到了另一个关于这个的教程并遵循它：[http ://chikkanti.wordpress.com/2012/04/30/dropdownlist-based-filtering-in-mvc-3-using-entityframeworkedm-modalfirst-method/](http://chikkanti.wordpress.com/2012/04/30/dropdownlist-based-filtering-in-mvc-3-using-entityframeworkedm-modalfirst-method/)

但是，当我运行它时，我收到一个关于下拉列表不是 IEnumerable 类型的错误。这是有道理的，因为页面模型是 IPagedList 类型的。如何使用页面模型 IPagedList 向页面添加下拉列表过滤器？

控制器：

```
 public ActionResult SearchNames(string ddlcontent, int? page)
    {
        int pageSize = 10;
        int pageNumber = (page ?? 1);
        var list = new List<string>();
        var nameqry = from n in db.tblProjects
                      select n.ProjectName;
        list.AddRange(nameqry.Distinct());
        ViewBag.ddlcontent = new SelectList(list);
        //var names = from m in db.tblProjects
        //            select m;
        var tbldefectdetails = db.tblDefectDetails.Include(t => t.tblBugLocation).Include(t => t.tblBugType).Include(t => t.tblBusinessUnit).Include(t => t.tblDefectDiscoveryMethod).Include(t => t.tblProject).Include(t => t.tblLanguage);
        if (!string.IsNullOrEmpty(ddlcontent))
            {
                tbldefectdetails = tbldefectdetails.Where(s => s.tblProject.ProjectName.ToUpper().Contains(ddlcontent.ToUpper()));
            }
        return View(tbldefectdetails.ToPagedList(pageNumber, pageSize));
    } 
```

视图中的下拉列表：

```
@model PagedList.IPagedList<EDTToolMVC.Models.tblDefectDetail>

@{
    ViewBag.Title = "Early Defect Tracking Tool - Home";
}

<h2>SearchNames</h2>
@using (@Html.BeginForm(“SearchNames”, “Names”, FormMethod.Get))
{
@Html.DropDownList(“ddlcontent”, “All”)<input type=”submit” value=”Filter” />;
} 
```

IPagedList：

```
namespace PagedList
{
// Summary:
//     Represents a subset of a collection of objects that can be individually accessed
//     by index and containing metadata about the superset collection of objects
//     this subset was created from.
//
// Type parameters:
//   T:
//     The type of object the collection should contain.
//
// Remarks:
//     Represents a subset of a collection of objects that can be individually accessed
//     by index and containing metadata about the superset collection of objects
//     this subset was created from.
public interface IPagedList<out T> : IPagedList, IEnumerable<T>, IEnumerable
{
    // Summary:
    //     Gets the number of elements contained on this page.
    int Count { get; }

    // Summary:
    //     Gets the element at the specified index.
    //
    // Parameters:
    //   index:
    //     The zero-based index of the element to get.
    T this[int index] { get; }

    // Summary:
    //     Gets a non-enumerable copy of this paged list.
    //
    // Returns:
    //     A non-enumerable copy of this paged list.
    IPagedList GetMetaData();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:06:45.127

修改视图模型，使其包含下拉列表的元素。或者从 IPagedList 继承。

```
class MyViewModel<T>{
  public IPagedList<T> Model {get;set;}
  public IList<something> DropdownElements {get;set;}
} 
```

或者为了使其可重用，创建一个基本 Viewmodel 或一个基本 View 类，您的 ViewModel 或 View 从中继承包含实现此类常见可重用“服务”的函数。

# google-app-engine - 在 Google App Engine 的全文搜索中使用 SortOption

> ID：11428949
> 
> 赞同：0
> 
> 时间：2012-07-11T08:54:38.503
> 
> 标签：google-app-engine, full-text-search

这就是我将文档添加到索引的方式：

```
Document doc = Document.newBuilder()
    .setId( user.getEmailAddress() )
        .addField( Field.newBuilder().setName( "lastLogin" ).setDate( Field.date(user.getLastLogin()) ) )
        .build(); 
```

我想按`lastLogin`属性排序，所以我尝试了：

```
SortOptions sortOption = SortOptions.newBuilder()
        .addSortExpression(SortExpression.newBuilder()
                .setExpression("lastLogin")
                .setDefaultValueNumeric(0))
                .build();

QueryOptions options = QueryOptions.newBuilder()
        .setLimit( SEARCH_RESULT )
        .setOffset( offset )
        .setSortOptions( sortOption )
        .build(); 
```

我使用`SortOptions`正确吗？结果集不是我在使用偏移量时所期望的。

# python - 在循环 Tkinter 中更改单个 OptionMenu 的文本变量

> ID：11428951
> 
> 赞同：0
> 
> 时间：2012-07-11T08:54:45.230
> 
> 标签：python, list, tkinter, ttk

以下代码显示了我的两个选项菜单和回调函数“VarMenu”。除了我在循环中为每一行创建了几个相同的选项菜单外，这一切都很好。当其中只有一个更改为“L”时，我只希望将单元选项菜单的相应行更改为“N”，而不是其中的每一个。

我不想与列表或大量代码混淆太多，但是如果我创建了一个列表 self.type = [] 会起作用吗？

先感谢您！

```
def VarMenu(self, selection):

    if selection == "L":
        self.variableunit.set("N")
        self.unit.config(state=DISABLED)
    else:
        self.variableunit.set("mm")
        self.unit.config(state=NORMAL)

def import_file(self): # Not complete code
    for row_number, row_data in enumerate(info):
        self.variable = StringVar(self.frame_table)                                
        self.variable.set(pre(code))
        self.type = OptionMenu(self.frame_table, self.variable, "None", "Clear", "F", "L", command=self.VarMenu)
        self.type.grid(row=row_number+i, column=3, sticky="nsew", padx=1, pady=1)

    # Unit drop down menu
        self.unit = OptionMenu(self.frame_table, self.variableunit, "mm", "N")
        self.unit.grid(row=row_number+i, column=5, sticky="nsew", padx=1, pady=1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:51:00.743

当你这样做时：

```
for row_number, row_data in enumerate(info):
    self.variable = StringVar(...) 
```

...您是否意识到您一直`self.variable`在用最近创建的覆盖？您如何期望它以某种方式神奇地保存多个变量？

相反，您只需使用 lambda 或[functools.partial](http://docs.python.org/library/functools.html#functools.partial)将变量传递给回调。例如：

```
for row_number, row_data in enumerate(info):
    var = StringVar(...)
    self.type = OptionMenu(..., command=lambda new_value, variable=var: self.VarMenu(new_value, variable) 
```

当然，您可以在回调中传递行号或您想要的任何其他信息。

注意：OptionMenu 的设计使得当它调用你的回调时，它总是会传递一个参数，即用户选择的新值。这个论点将永远存在。但是，您可以添加其他参数，如我的示例所示。

# internet-explorer - X-UA 兼容优先级：响应标头与元

> ID：11428953
> 
> 赞同：0
> 
> 时间：2012-07-11T08:54:54.477
> 
> 标签：internet-explorer, internet-explorer-7, http-headers, compatibility, meta-tags

什么声明有优先权？使用这样的服务器响应标头或使用[这样](https://stackoverflow.com/a/6018834/1039816)的 HTML 元标记[传入](https://stackoverflow.com/a/1014693/1039816)

问题是客户端的代理服务器通过添加响应头来强制 IE 在 IE7 模式下工作。我想用元标记覆盖它。这行得通吗？我无法测试，因为我无权访问客户端的代理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:51:13.813

元标记始终具有[较高的优先级](http://blogs.msdn.com/b/cjacks/archive/2012/02/29/using-x-ua-compatible-to-create-durable-enterprise-web-applications.aspx)。

# groovy - Gradle zip 打包：从存储库中复制 Jar 文件

> ID：11428954
> 
> 赞同：1
> 
> 时间：2012-07-11T08:54:55.407
> 
> 标签：groovy, gradle

我必须从我的 ZIP 包装中的存储库（比如本地）复制一个 jar。我知道我们可以在依赖项中定义编译/运行时。但是，我不能在 ZIP 中使用它们。

我可以通过在我的文件系统中指定路径来复制 jar 文件。但是，我不知道如何从存储库中做到这一点。

这是我的代码的样子：

```
task createZipFile (type: Zip, dependsOn: [...]) {

    baseName 'xyz'

    from(fileTree("src/main"), {
        include "prjName/css/**"
        include "prjName/images/**"
        include "prjName/javascript/**"
        include "prjName/WEB-INF/**"
        exclude "prjName/WEB-INF/web.xml"
    })

    from file("<Absolute-path-to-jar-file-in-my-filesystem>") //this works
    // how to copy the same jar file from repository ??
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:35:03.390

假设您的依赖项在运行时配置中，即：

```
runtime 'org.slf4j:slf4j-log4j12:1.6.2' 
```

你可以做：

```
task createZipFile( type: Zip, dependsOn: [...] ) {
    baseName 'xyz'
    from fileTree("src/main"), {
        include "prjName/css/**"
        include "prjName/images/**"
        include "prjName/javascript/**"
        include "prjName/WEB-INF/**"
        exclude "prjName/WEB-INF/web.xml"
    }

    from configurations.runtime.files { it.name == 'slf4j-log4j12' }
} 
```

使用名称添加为依赖项下载的所有 jar`slf4j-log4j12`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T22:33:05.040

要指定没有依赖关系的特定 jar，请使用“@jar”对其进行限定。例如 "commons-beanutils:commons-beanutils:1.6@jar" 有关说明如何使用自定义配置引用一组 jar 的示例，请参阅[下载一些依赖项并将它们复制到本地文件夹](https://discuss.gradle.org/t/download-some-dependencies-and-copy-them-to-a-local-folder/6246)

# android - 为什么 AlarmMANager 不工作？

> ID：11428959
> 
> 赞同：0
> 
> 时间：2012-07-11T08:55:16.147
> 
> 标签：android

我正在从 broadcastReciever 调用服务类我的类是：-

```
InsertIntoDB objinsert;
ArrayList<ContactClass> resultList;
ContactClass mContactClass =null;

public ScheduleService() {

     super("B'Day Checker Service");

}

@Override
protected void onHandleIntent(Intent intent)
  { 
    objinsert = new InsertIntoDB(this);
    Log.d("MyService", "About to execute MyTask");
    new MyTask().execute();

     }

private class MyTask extends AsyncTask<Void, Void, ArrayList<ContactClass>> 
   {

    @Override
    protected void onPreExecute() {

        super.onPreExecute();
         mContactClass = new ContactClass();
         resultList= new ArrayList<ContactClass>();
    }

    @Override
    protected ArrayList<ContactClass> doInBackground(Void... arg0)
    {
        List<ContactClass> contacts = objinsert.getAllContacts();
        for (ContactClass cn : contacts)
        {
            String mdob =  cn.getDob();
            long output = dateCompare(mdob);
            if(output==0)
            {
                mContactClass.setId(cn.getId());
                mContactClass.setName(cn.getName());
                mContactClass.setDob(cn.getDob());
                resultList.add(mContactClass);
            }

              Log.d("Name: ",""+resultList.size());
        }
        return resultList;
    }

    @Override
    protected void onPostExecute(ArrayList<ContactClass> result) {

        super.onPostExecute(result);
        System.out.println("posttttt");
        int length=0;
        if(result!=null)
        {
         length = result.size();
        }
        if(length!=0)
        {
            for(int mindex =0;mindex<length;mindex++)
            {
                String date = result.get(mindex).getDob();
                String[] arrdob =date.split("/");
                Calendar cal = Calendar.getInstance();
                cal.setTimeInMillis(System.currentTimeMillis());
                cal.clear();
                cal.set(Integer.parseInt(arrdob[2]), Integer.parseInt(arrdob[1])-1,Integer.parseInt(arrdob[0]),14,17);

                AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
                 Intent intent = new Intent(ScheduleService.this, BirthDayReciever.class);
                 PendingIntent pendingIntent = PendingIntent.getBroadcast(ScheduleService.this, 0, intent, 0);
                 //cal.add(Calendar.SECOND, 5);
                 alarmMgr.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent);
            }
        }

    }

}

public long dateCompare(String date)
 {
    System.out.println("date---"+date);
    String geivendate[] = date.split("/");
    int Day= Integer.parseInt(geivendate[0]);
    int Month= Integer.parseInt(geivendate[1]);
    int Year= Integer.parseInt(geivendate[2]);

    Date currentdate = new Date();
    Calendar calUpdated = Calendar.getInstance();
    calUpdated.set(Year, Month-1, Day);

    long updateDateMilliSec = calUpdated.getTimeInMillis();
    long diff = currentdate.getTime() - calUpdated.getTimeInMillis();
    long diffDays = (diff / (1000 * 60 * 60 * 24));

    return diffDays;
 } 
```

但是它不起作用 doinBackground 方法在 logcat 中的异常而不是仅在 logcat 中的应用程序崩溃之后运行为：-

```
07-11 14:16:34.444: W/MessageQueue(942): Handler{44f6ad40} sending message to a Handler on a dead thread
07-11 14:16:34.444: W/MessageQueue(942): java.lang.RuntimeException: Handler{44f6ad40} sending message to a Handler on a dead thread
07-11 14:16:34.444: W/MessageQueue(942):    at android.os.MessageQueue.enqueueMessage(MessageQueue.java:179)
07-11 14:16:34.444: W/MessageQueue(942):    at android.os.Handler.sendMessageAtTime(Handler.java:457)
07-11 14:16:34.444: W/MessageQueue(942):    at          android.os.Handler.sendMessageDelayed(Handler.java:430)
07-11 14:16:34.444: W/MessageQueue(942):    at android.os.Handler.sendMessage(Handler.java:367)
07-11 14:16:34.444: W/MessageQueue(942):    at android.os.Message.sendToTarget(Message.java:348)
07-11 14:16:34.444: W/MessageQueue(942):    at android.os.AsyncTask$3.done(AsyncTask.java:214)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.FutureTask$Sync.innerSet(FutureTask.java:252)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.FutureTask.set(FutureTask.java:112)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:310)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
07-11 14:16:34.444: W/MessageQueue(942):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
07-11 14:16:34.444: W/MessageQueue(942):    at java.lang.Thread.run(Thread.java:1096) 
```

任何人都建议我在哪里错了，谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:25:15.677

我建议您以简单的方法设置警报管理器，

为此，您不需要 asyncTask 。下面的错误说线程已经死了，并且有些东西试图在死线程中向处理程序发送消息。

```
07-11 14:16:34.444: W/MessageQueue(942): Handler{44f6ad40} sending message to a Handler on a dead thread
          07-11 14:16:34.444: W/MessageQueue(942): java.lang.RuntimeException: Handler{44f6ad40} sending message to a Handler on a dead thread 
```

下面的链接可以给你一些关于这个问题的提示

[关联](https://stackoverflow.com/questions/7320036/asynctask-in-broadcastreceiver-in-android-gives-sending-message-to-a-handler-on)

# java - 以tomcat为服务器连接derby数据库

> ID：11428964
> 
> 赞同：6
> 
> 时间：2012-07-11T08:55:21.670
> 
> 标签：java, jakarta-ee, tomcat, database-connection, derby

我如何连接到 derby 数据库*（netbeans 附带）*？我使用 Tomcat 作为服务器。之前我使用以下语句连接到 derby 数据库，但后来我用作`glassfish`服务器。

```
Context context = new InitialContext();
DataSource ds = (DataSource)context.lookup("java:comp/env/jdbc/PollDatasource");
Connection connection = ds.getConnection(); 
```

但现在使用 Tomcat 作为服务器我不知道如何做到这一点。

*注意：Tomcat 和 Derby 预装了我当前使用的 netbeans IDE*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T09:01:09.303

在 Tomcat 中找到*conf/context.xml*，然后编辑并编写如下内容：

```
<Resource name="jdbc/PollDatasource" auth="Container" type="javax.sql.DataSource"
    driverClassName="com.YourDriver" 
    url="jdbc:derby://localhost:1527/nameOfTheDatabase;create=true"
    username="username" password="password" maxActive="20" 
    maxIdle="10" maxWait="-1" /> 
```

***注 1：使用上述 URL，驱动程序将是`org.apache.derby.jdbc.ClientDriver`***

***注 2：您也可以在项目的 META-INF/context.xml 中添加上述信息。这成为特定于应用程序的。如果您在 tomcat 的 context.xml 中添加信息，该信息将变为全局。***

***注意3：从[这个网站](http://db.apache.org/derby/releases/release-10.9.1.0.cgi)下载jar。下载db-derby-10.9.1.0-bin.zip。它包含许多文件，包括derby.jar和derbyclient.jar（以及很多文档）。derbyclient.jar包含我们的朋友`org.apache.derby.jdbc.ClientDriver.class`。derby.jar 包含`org.apache.derby.jdbc.EmbeddedDriver`. 将下载的 jar 保存在 Tomcat 的 lib 文件夹中。***

并在您的应用程序 web.xml “resource-ref”中：

```
<resource-ref>
    <description>my connection</description>
    <res-ref-name>jdbc/PollDatasource</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
```

你可能想看看这些问题：

*   [是不是必须在 Resource 标签中提及档案的名称？](https://stackoverflow.com/questions/11519715/isnt-it-necessary-to-mention-the-name-of-archive-in-the-resource-tag)
*   [我在 context.xml 中添加的标签何时被读取？](https://stackoverflow.com/questions/11544042/when-is-the-tag-i-added-in-context-xml-gets-read)
*   [查找中遵循的步骤是什么？什么是第一个 web.xml 或 context.xml？](https://stackoverflow.com/questions/11553889/what-are-steps-followed-in-the-look-up)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T09:04:01.600

你需要：

1) 复制`derbyclient-*.jar`到`${TOMCAT_HOME}/lib`.

2）编辑您的`server.xml`并将以下行添加到 GlobalNamingResources 部分：

```
 <Resource auth="Container" 
           driverClassName="org.apache.derby.jdbc.EmbeddedDriver" 
           maxActive="8" maxIdle="4" 
           name="jdbc/my-ds" type="javax.sql.DataSource" 
           url="jdbc:derby:mydb;create=true" 
           username="myuser" password="mypassword" /> 
```

3）在您的上下文定义中，添加：

```
 <Context docBase="myapp"
          path="/myapp"
          reloadable="true"
          ...>
    <ResourceLink name="jdbc/my-ds"
                  global="jdbc/my-ds"
                  type="javax.sql.DataSource" />
 </Context> 
```

4）重启Tomcat。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T09:04:40.153

您的示例需要 JNDI。有关设置，请参阅相关的 tomcat 版本文档。

或者使用连接字符串，这是来自 derby 文档[http://db.apache.org/derby/integrate/plugin_help/derby_app.html的页面](http://db.apache.org/derby/integrate/plugin_help/derby_app.html)

# android - ProgressDialog 的 getContext 不是我传入的

> ID：11428966
> 
> 赞同：0
> 
> 时间：2012-07-11T08:55:31.393
> 
> 标签：android

```
public AsyncSyncWithCloud(HistoryFragmentActivity historyFragmentActivity) {
    this.historyFragmentActivity = historyFragmentActivity;
    progressDialog = new ProgressDialog(historyFragmentActivity);

    // ???
    // java.lang.ClassCastException: android.view.ContextThemeWrapper cannot be cast to xxx.charting.HistoryFragmentActivity
    HistoryFragmentActivity test = ((HistoryFragmentActivity)progressDialog.getContext());
} 
```

我想知道，为什么我将自己`Activity`的上下文作为上下文传递给`ProgressDialog`. 当我`getContext`从 progressDialog 执行时，我没有得到我之前传入的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:06:07.360

不确定这是一个好的解决方案

```
 private HistoryFragmentActivity getHistoryFragmentActivity(ProgressDialog progressDialog) {
        return (HistoryFragmentActivity)(((android.content.ContextWrapper)progressDialog.getContext()).getBaseContext());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-24T00:40:16.300

如您所见，上下文已被包装。

如果您向下钻取，您将在构造函数中找到：-

```
 Dialog(Context context, int theme, boolean createContextThemeWrapper) {
    if (createContextThemeWrapper) {
        if (theme == 0) {
            TypedValue outValue = new TypedValue();
            context.getTheme().resolveAttribute(com.android.internal.R.attr.dialogTheme,
                    outValue, true);
            theme = outValue.resourceId;
        }
        mContext = new ContextThemeWrapper(context, theme);
    } else {
        mContext = context;
    }

    mWindowManager = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
    Window w = PolicyManager.makeNewWindow(mContext);
    mWindow = w;
    w.setCallback(this);
    w.setOnWindowDismissedCallback(this);
    w.setWindowManager(mWindowManager, null, null);
    w.setGravity(Gravity.CENTER);
    mListenersHandler = new ListenersHandler(this);
} 
```

当当前没有设置主题时，它会包装上下文。

虽然您*可以*按照自己的方式进行投射，但我不确定它的可靠性如何——您可以对其进行 instanceof 检查，但可能需要从一个全新的角度看待整个事情。

通常，从片段中获取活动的最佳方法是使用 getActivity() 并改为强制转换。更好的是附加一个监听器 onAttach() 方法：

```
Override
public void onAttach(Activity activity) {
    super.onAttach(activity);
    try {
        listener = (Listener) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(TAG
                + " must implement Listener");
    }
}

@Override
public void onDetach() {
    listener = null;
    super.onDetach();
} 
```

# visual-studio - 如何在 VS 解决方案资源管理器中调整拖放以在 TFS 中正确移动

> ID：11428968
> 
> 赞同：2
> 
> 时间：2012-07-11T08:55:41.070
> 
> 标签：visual-studio, tfs

我正在寻找增强 Visual Studio 解决方案资源管理器的功能。我遇到的问题如下：

> 当我在解决方案资源管理器中拖放文件时，它会复制此文件而不是移动它，并且在 TFS 中添加此文件而不是移动（重命名）

是否可以拦截或添加到 Visual Studio 解决方案资源管理器的拖放功能，以便我可以自己调用所需的 tf 命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:54:49.247

如果解决方案已配置为集成源代码控制，则拖放功能将在 VS 2010 / TFS 2010 中挂起重命名操作。

# delphi - 如何更改从 TCollection 继承的类的 ItemClass

> ID：11428972
> 
> 赞同：1
> 
> 时间：2012-07-11T08:55:54.520
> 
> 标签：delphi, tcollection, tcollectionitem

我有一个从 TCollection 继承的类（我们称之为“TMyCollection”），我必须从它继承一个新类（我们称之为“TMyItems”）

通常我们在 TCollection 的构造函数中传递 ItemClass 类型，但在我的情况下，TMyCollection 的构造函数被新的构造函数覆盖，它不接受 ItemClass，它只接受 Owner。

如果继承的构造函数不接受 ItemClass 参数，我需要知道如何更改“TMyItems”中的 ItemClass。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:19:17.037

您仍然可以从子类中调用继承的 TCollection.Create，即使它没有相同的签名：

```
 TMyCollectionItem = class(TCollectionItem)
  private
    FIntProp: Integer;
    procedure SetIntProp(const Value: Integer);
  public
    property IntProp: Integer read FIntProp write SetIntProp;
  end;

  TMyCollection = class(TCollection)
  public
    constructor Create(AOwner: TComponent);virtual;
  end;

{ TMyCollection }

constructor TMyCollection.Create(AOwner: TComponent);
begin
  inherited Create(TMyCollectionItem); // call inherited constructor
end; 
```

**编辑**：

根据原始发布者的评论，“技巧”是将新构造函数标记为重载。由于它是一个重载，它不会隐藏对 TCollection 构造函数的访问。

```
 TMyCollection = class(TCollection)
  public
    constructor Create(AOwner: TComponent);overload;  virtual;
  end;

  TMyItem = class(TCollectionItem)
  private
    FInt: Integer;
  public
    property Int: Integer read FInt;
  end;

  TMyItems = class(TMyCollection)
  public
    constructor Create(AOwner: TComponent);override;
  end;

implementation

{ TMyCollection }

constructor TMyCollection.Create(AOwner: TComponent);
begin
  inherited Create(TCollectionItem);

end;

{ TMyItems }

constructor TMyItems.Create(AOwner: TComponent);
begin
  inherited Create(TMyItem);
  inherited Create(AOwner); // odd, but valid
end;

end. 
```

# windows - Windows 路由如何在应用程序级别工作？

> ID：11428973
> 
> 赞同：0
> 
> 时间：2012-07-11T08:55:57.733
> 
> 标签：windows, networking

想象一下我有 Windows TCP 套接字。并且应用程序在启动时连接此套接字**一次。**然后**长时间发送/接收 TCP 流量**。

Windows 能够路由 IP 流量。假设您有多个网络适配器，并且您必须为您的应用程序设置静态路由，以使流量流向特定的 NIC。

问题是 - **Windows 会浪费 CPU 周期来仅路由 TCP 套接字连接，还是会路由每个 IP 数据包？**

我正在计算微秒，我需要准确知道 -**发送/接收流量或连接是否会有 CPU 开销**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:37:24.603

我假设“路由”是指查看本地路由表以决定应将传出数据包发送到何处的过程。这首先取决于使用哪个路由器，其次是使用哪个接口来访问该路由器。

如果您已经建立了静态路由，“路由”仍然必须发生，系统才能看到该路由。这包括一个只需要几十个机器指令的表查找。与复制数据包的成本相比，它绝对可以忽略不计。

请记住，将套接字绑定到网络接口与将静态规则输入路由表不同，并且网络接口与网络接口控制器 (NIC) 不同。这在考虑开销时很重要，因为绑定或路由到特定网络接口的效果可能是数据包被复制额外次数，这将产生大量开销。

可以设计这样一种场景：数据包在 LAN 上传输，由传输它的同一台计算机重新读取，然后通过不同的 NIC 再次传输到正确的路由器。`INADDR_ANY`大多数情况下，通过绑定到(address `0.0.0.0`) 并让路由表为您处理优化，可以获得最佳性能。

仅当您需要确保使用特定 IP 地址进行发送和接收时，才应绑定到特定网络接口。除非本地路由已经以某种方式中断，否则到特定 NIC 的静态路由似乎不太可能产生有用的结果。否则，干扰正常的路由过程只会增加开销。

# vb.net - 编程我的应用程序以在通过快捷方式打开时显示消息框

> ID：11428975
> 
> 赞同：0
> 
> 时间：2012-07-11T08:56:09.767
> 
> 标签：vb.net, scheduled-tasks, messagebox

我有一个通常在计划任务上运行的应用程序。但是，我在桌面上也有一个快捷方式，可以在那里运行应用程序。我希望在用户双击快捷方式时弹出一个消息框，但不是在计划任务上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T08:58:13.027

只需将命令行参数添加到快捷方式，然后在应用程序启动时检查参数，如果发现您正在从桌面运行。

# c# - 使用 c# sdk 发布到 facebook 墙上

> ID：11428979
> 
> 赞同：0
> 
> 时间：2012-07-11T08:56:19.783
> 
> 标签：c#, facebook-c#-sdk, facebook-wall

是否可以像其他人一样在某人的墙上发帖。例如，A 人在 B 的墙上发帖。就像`'A'`直接写在`B's`墙上一样。

到目前为止，我已经为在他们自己的墙上张贴的人工作了。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:02:59.903

试试这个：

```
 var app = new FacebookApp(ACCESSTOKEN);
        var args = new Dictionary<string, object>();
        args.Add("message", "Hello you");

        app.Api("/[Friend Id]/feed", args, HttpMethod.Post); 
```

老实说，我现在无法尝试，但我希望它有效。

# c# - 编辑 Resources.resx 文件时，Resources.Designer.cs 无法更新，因为 TFS 没有将其检出

> ID：11428983
> 
> 赞同：11
> 
> 时间：2012-07-11T08:56:43.190
> 
> 标签：c#, .net, asp.net-mvc, razor, tfs

我正在使用 TFS 源代码控制。

当我向我的资源文件 - Resources.resx - 添加新的资源密钥并点击保存时，TFS 会检出 Resources.resx 但不会检出 Resources.Designer.cs。这会导致 Resources.Designer.cs 更新失败并出现错误：

> 您尝试的命令无法完成，因为必须修改的文件“Resources.Designer.cs”无法更改。如果文件受源代码控制，您可能需要检查它；如果文件在磁盘上是只读的，您可能需要更改其属性。

![在此处输入图像描述](../Images/e5eeb1dbe2937c7bec7ead90062ff277.png)

该错误是正确的，因为该文件是只读的并且该文件未签出。我不想每次添加/编辑资源键时都必须手动签出设计器。有人知道解决方案或解决此问题吗？

请注意，我将 TFS 设置为“保存时签出”，而不是“编辑时签出”。这是为了减少未经编辑的结帐数量。

**编辑：**

这也发生在其他文件类型中。例如，我正在使用[RazorGenerator](http://razorgenerator.codeplex.com/)创建已编译的 MVC 视图。如果我尝试编辑 .cshtml 而不先检查 .generated.cs ，也会出现同样的问题。

**更新：**

这个问题发生在所有（据我所见）具有自动生成代码隐藏的文件上：.resx、.edmx、.aspx、.cshtml（使用 RazorGenerator 编译视图时）等。我已经决定仅仅因为“编辑：什么都不做”设置而痛苦是不值得的。我决定将其重置为“编辑时：自动结帐”。感谢大家的意见。不感谢 TFS 团队的失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T14:29:23.513

好吧，我不认为这算作答案，所以我在评论中写了它。保存时签出仅在您保存文件时触发，它不会在文件自动生成时触发（自动生成不会触发进行签出的保存，因为此文件是由分配给 resx 的自定义工具编辑的）。

恐怕您不会得到正确的答案（可以解决您的问题的答案），除了它是设计使然之外，但可能值得在[连接](http://connect.microsoft.com)上打开一个案例并要求更改此行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:31:13.457

我必须在工作中使用 TFS。我见过很多奇迹，我们花了很多时间找出问题出在哪里。TFS 是我公司的选择，但它不是我的最爱。

TFS（尤其是当服务器速度很慢并且您经常遇到网络问题时）对我作为开发人员来说是一场灾难。VS 仅查找解决方案中文件的修改，并且您可以看到并非所有文件。当您使用第三方工具（适合集成测试或自定义构建步骤）时，需要在 VS 之外修改文件 - 您可能会遇到与您相同的错误。

但我们找到了解决方案。在我的机器上，我使用**git**。我们已经安装了**git-tfs**。你只需要记住三个魔术命令

*   git tfs 获取
*   git 合并遥控器/tfs/默认
*   git tfs ct

就是这样。你永远不会违反公司规则。同时你将摆脱那种奇怪的问题。我们已经忘记了那个噩梦。

**编辑：**即将到来的 TFS 2012 中的本地工作区将解决几个问题，并且 TFS 2012 将更接近 SVN，但它不会是 DVCS。MS 投资于与外部 DVCS 的集成 - 请，欢迎 - [Git-TF](http://blogs.msdn.com/b/bharry/archive/2012/08/13/announcing-git-integration-with-tfs.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T22:20:25.617

我认为这是问题所在

> 请注意，我将 TFS 设置为“保存时签出”，而不是“编辑时签出”。这是为了减少未经编辑的结帐数量。

为避免上述问题，请恢复为默认设置。然后下载 TFS 电动工具。然后使用此命令还原已签出但不包含编辑的更改

```
tfpt uu /noget 
```

**更新：**在更改上述设置时，问题不再发生。有关详细信息，请参阅下面的评论中的讨论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T11:05:42.147

为什么要减少未经编辑的结帐数量？如果一个文件在没有更改的情况下签入，TFS 会通知并且它不会显示在文件的签入历史记录中。

您可以通过签出单个文件并立即签入来自行测试。TFS 会告诉您那里没有更改并且签出已撤消。

![在此处输入图像描述](../Images/7a44b892e803268801c4036d39de5a00.png)

所以也许考虑将其设置回编辑结帐？如另一个答案中所述，这将解决您的问题...

# php - 如何从 mysql db php 中选择

> ID：11428984
> 
> 赞同：0
> 
> 时间：2012-07-11T08:56:51.787
> 
> 标签：php, mysql, sql

这两个是否等效，如果不是，我该如何制作它们。我正在使用 php/Mysql（稍后我将使用 mysqli）

```
mysql_select_db("db_App", $link);

$result = mysql_query("SELECT * FROM AppOne"); 
```

或者

```
$result = mysql_query("SELECT * FROM db_App.AppOne"); // how can I get this to work like above? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T09:00:30.507

您将始终必须选择一个数据库。从此，在查询中指定数据库就没用了。无论如何最好不要在那里指定它，因为如果您的数据库在某个时候发生更改，那会让您遇到麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T09:02:57.630

if you skip the `$link` in `mysql_select_db("db_App", $link);` they should do the same.

# android - 如何阻止数字键盘跳转到下一个文本视图？

> ID：11428987
> 
> 赞同：0
> 
> 时间：2012-07-11T08:56:56.570
> 
> 标签：android

我有如下所示的布局。通常，用户只需填写第一个框（etItemQty），然后可以保存数据 - 我如何阻止键盘允许用户转到“下一个”编辑框（即 etItemPrice）。我只希望用户能够专门单击 etItemPrice，如果他们想编辑它。在其他语言中，我不给它一个 tabStop 位置 - 这可能吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical">

                        <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:padding="5dp" >

                        <TextView
                            android:id="@+id/lbProducts"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/sm_lbProduct"
                            android:layout_weight="1"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <Spinner
                            android:id="@+id/spinProducts"
                            android:layout_width="210dp"
                            android:layout_height="wrap_content" />

                    </LinearLayout>

                <LinearLayout
                        android:layout_width="321dp"
                        android:layout_height="wrap_content"
                        android:padding="5dp" >

                        <TextView
                            android:id="@+id/lbProductQty"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/sm_lbProductQty"
                             android:layout_weight="1"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <EditText
                            android:id="@+id/etProductQty"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:width="50px"
                            android:inputType="phone" />

                    </LinearLayout>

                        <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:padding="5dp" >

                        <TextView
                            android:id="@+id/lbPrice"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                             android:layout_weight="1"
                            android:text="@string/sm_lbProductPrice"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <EditText
                            android:id="@+id/etProductPriceExGST"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"

                            android:width="100px"

                            android:inputType="numberDecimal" />

                    </LinearLayout>

                    <LinearLayout
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content" 
                        android:padding="5dp">

                         <Button
                            android:id="@+id/cmdAddItem"
                            android:layout_width="fill_parent"
                            android:layout_height="wrap_content"
                            android:layout_weight="1"
                            android:text="@string/sm_cmdAddProduct" />

                    </LinearLayout>

     <LinearLayout  
            android:layout_height="fill_parent" 
            android:layout_width="fill_parent">

        <ListView
            android:id="@+id/listViewOrders"
            android:layout_width="fill_parent"
            android:layout_height="141dp" >

        </ListView>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:05:28.603

尝试这个

```
 etItemQty.setOnEditorActionListener(new OnEditorActionListener() {

    @Override
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        // TODO Auto-generated method stub
        if(event.getKeyCode()==KeyEvent.KEYCODE_ENTER)
        {
            InputMethodManager imm = (InputMethodManager)getSystemService(
                      Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(etItemQty.getWindowToken(), 0);

        }
        return false;
    }
}); 
```

# jquery - Jquery：获取特定隐藏字段的值

> ID：11428991
> 
> 赞同：0
> 
> 时间：2012-07-11T08:57:09.097
> 
> 标签：jquery

我在 jqueury 中生成一个动态列表，单击时我需要获取该列表元素中隐藏字段的特定值，但我很挣扎。

```
<li class="trigger">
    <a class="" href="#">Aktiv</a>
    <input name="hrDesc"   value='Value 1'>
    <input name="hrCount" value="Value 2">
</li>

<li class="trigger`">
     <a class="" href="#">Uaktiv</a>
     <input name="hrDesc"  value="Value 3">
     <input name="hrCount" value="Value 4">
</li> 
```

这是我的jQuery：

```
$('.trigger').live( "click", function(){  
    alert (  $("[name='hrDesc']").serialize() );
});​ 
```

问题是总是返回“hrDesc”的所有值任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:57:56.467

```
$('.trigger').live( "click", function(){
  alert ( 
          $(this)             // point to current clicked li
              .find("[name='hrDesc']")  // find specific input within clicked li
              .serialize() 
        );
});​ 
```

### 笔记

而不是`.live()`尝试使用**[`.on()`](http://api.jquery.com/on)**jQuery 1.7+ 进行委托事件处理

# ios - 完成测试应用内购买后我需要做什么

> ID：11428995
> 
> 赞同：0
> 
> 时间：2012-07-11T08:57:25.610
> 
> 标签：ios, in-app-purchase

我准备将二进制文件上传到应用商店，但我很困惑。

我应该将二进制文件上传到苹果并等待没有应用内的审查吗？

或者我可以同时上传二进制文件和应用程序内？

任何人都可以向我展示通过应用内购买将应用上传到应用商店的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:03:39.657

If your app uses IAP (In-App Purchase) then you HAVE TO declare the IAP in iTunes Connect and add the IAP that you use in the application details (in iTunes Connect) . You must first create (declare) the used IAP identifiers and then go to your app description (details. Where you also write the description of the app, upload screenshots , etc ) and add the IAP identifiers that you declared.

Hope this helps.

Cheers!