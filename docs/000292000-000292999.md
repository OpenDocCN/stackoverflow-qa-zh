# StackOverflow 问答 000292000-000292999

# jquery - jQuery 智能感知插件现在可用于 Visual Studio 吗？

> ID：292003
> 
> 赞同：3
> 
> 时间：2008-11-15T02:03:48.590
> 
> 标签：jquery, visual-studio

jQuery 智能感知插件现在可用于 Visual Studio 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T02:20:18.840

是的。[用于 JQuery 的丰富智能感知](http://blogs.msdn.com/webdevtools/archive/2008/10/28/rich-intellisense-for-jquery.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-30T17:57:26.503

是的。[这个博客](http://mwtech.blogspot.com/2009/05/how-to-get-jquery-intellisense-working.html)教会了我如何去做。

# windows - 远程桌面强制注销

> ID：292012
> 
> 赞同：3
> 
> 时间：2008-11-15T02:10:01.403
> 
> 标签：windows, windows-xp, remote-desktop

我经常使用远程桌面，我注意到在我的一台机器上，当另一个用户已经登录时，它会提示他们允许我登录，即使对于权限较低的用户也是如此；但是，对于另一台计算机，没有提示，即使对于具有相同权限的用户，它也只会进行远程注销。两台电脑都是XP专业版SP3。

什么可能导致这种情况，我如何（如果可能）设置它？

提前致谢。

ps 我已经知道其他工具，例如 VNC，我也使用它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-25T06:57:28.213

Indeed I suggest where VonC already mentioned, but more specifically: gpedit.msc, Computer/User configuration -> Administrative Templates -> Windows Components -> Terminal Services -> Connections -> *Set rules for remote control of Terminal Services user sessions*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T02:12:15.813

Windows Server 版本同时支持一个控制台和两个远程连接。当配置为终端服务器时，它们支持每个许可证一个。所有其他版本都支持一个总会话，本地或远程。

预先存在的连接是本地帐户还是域帐户？查看本地或组安全策略。如果是域，请检查用户帐户属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-25T06:37:11.657

您可以尝试比较计算机之间的策略或设置：

*   终端服务策略（输入“gpedit.msc”，然后输入计算机配置 | 管理模板 | Windows 组件 | 终端服务）

*   终端服务（类型“services.msc”），它依赖于“快速用户切换兼容性”服务：这是在“其他”计算机上激活的吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T06:29:04.750

这种行为是快速用户切换的“特征”。关闭它后，我现在可以在没有用户提示的情况下远程桌面。

[屏幕截图 http://tinypic.com/view.php?pic=vxel2&s=4](http://tinypic.com/view.php?pic=vxel2&s=4)

# windows - 从 Linux 连接到 Windows 以执行任务

> ID：292016
> 
> 赞同：2
> 
> 时间：2008-11-15T02:14:27.150
> 
> 标签：windows, linux, bash

我被要求找到一种从 Linux 系统连接到多个 Windows 服务器之一的方法。理想情况下，我们需要做的是连接到任何导致问题的 Windows 服务器，杀死一个进程，然后重新启动该进程。理想情况下，它可以放入可以从 Linux 计算机运行的脚本中。到目前为止，我发现的所有解决方案都涉及某种远程桌面连接，但就像我说的，命令行解决方案更可取？这可能吗？我道歉......这不是一个编程问题，但我无能为力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T02:19:36.313

我在 Windows 机器上使用[Cygwin](http://www.cygwin.com/)和 OpenSSH 服务器（[但它在安装程序中没有 Cygwin 时可用](http://sshwindows.sourceforge.net/)），并且可以从 Linux 机器通过 SSH 登录以使用命令行执行操作。我不杀死进程，我进行构建。但同样的概念也适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T03:27:29.203

[这](http://eol.ovh.org/winexe/)声称是 sysinternals [psexec](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)的一个端口，我没有使用它但是 psexec 很棒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T03:12:56.987

Cygwin 的默认 ps/kill 不允许您访问 Windows 进程来杀死它们。

使用[cygwin + openssh + windows services](http://pigtail.net/LRP/printsrv/cygwin-sshd.html)在机器上获取 SSH 用户。

进入 SSH 命令行后，您可以使用标准 Win32 工具来终止进程，例如 -

```
taskkill /f /im notepad.exe 
```

或者为 Win32 添加其他[命令行处理工具](http://www.howtogeek.com/howto/windows/kill-processes-from-the-windows-command-line/)。

编辑：或者您可以只使用`ps -elW`查看所有 Windows 进程，然后将该 PID 传递给 taskkill。

# sql - 是否有充分的理由为 SQL 关键字使用大写字母？

> ID：292026
> 
> 赞同：150
> 
> 时间：2008-11-15T02:22:44.200
> 
> 标签：sql, coding-style, capitalization

默认值似乎是大写的，但真的有任何理由为关键字使用大写吗？我开始使用大写字母，因为我只是想匹配 SQL Server 在我尝试创建某些东西时给我的内容，比如一个新的存储过程。但是后来，我的宝宝（第 5 根）手指感觉很糟糕，因为它总是需要按住`Shift`按钮，所以我停止使用大写字母。为什么我应该回到大写字母？

**编辑**：谢谢你们的回答。[在COBOL](https://en.wikipedia.org/wiki/COBOL)为王的时候，我还没有编程，所以我没有意识到这一点。从现在开始，我将坚持使用小写字母。

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2008-11-15T05:13:42.343

就个人而言，我不喜欢我的 SQL 对我大喊大叫。它让我想起了 BASIC 或 COBOL。

所以我更喜欢带有数据库对象名称 MixedCase 的 T-SQL 小写字母。

它更容易阅读，文字和注释也很突出。

* * *

## 回答 #2

> 赞同：124
> 
> 时间：2008-11-15T02:25:24.927

这只是风格问题，可能起源于编辑不进行代码着色的时代。

我以前更喜欢全部大写，但我现在倾向于全部小写。

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2012-08-14T01:53:59.067

SQL 已过时。大写在喊。它看起来很奇怪，也许很丑。

虽然可以说是正确的，但这些都没有解决*SQL 语言的特殊*原因，即为什么大写关键字是一个好的约定。

与许多较新的语言不同，SQL 具有*大量关键字*，并且依赖于读者**区分关键字和标识符**的能力，以便在心理上解析语法。

那么，对您的问题的直接回答更多的是对“为什么*SQL 代码的读者可以*从大写关键字中受益如此多，而对于大多数现代语言来说却不是这样？”：

*   依赖于记住**关键字**对于许多现代语言来说是合理的，但*对于 SQL 来说是不合理的*；它有太多的关键字和太多的变体。

*   依赖**标点提示**对于大多数现代语言来说是合理的，但*对于 SQL 来说是不合理的*；它太少了，而是根据关键字的精确顺序来指示语法。

*   在通常情况下，依靠**自动荧光笔来区分关键字对于现代语言来说是合理的，但***忽略了荧光笔可以为 SQL 实现的现实*。大多数都没有涵盖 SQL 的所有变体的所有关键字，无论如何，在荧光笔无济于事的情况下，经常会经常阅读 SQL。

这些是特定于 SQL 的一些原因，SQL 代码的读者最好通过**标准化关键字的大写**以及仅使用非大写（即小写或混合）标识符来服务。

突出显示有时会有所帮助。但前提是荧光笔知道你有 SQL；我们经常在编辑器/格式化程序无法合理地知道它正在处理 SQL 的上下文中使用 SQL。示例包括内联查询、程序员文档和另一种语言代码中的文本字符串。对于 Python 或 C++ 等语言，情况并非如此。是的，他们的代码有时确实会出现在这些地方，但通常不会像 SQL 代码那样执行。

此外，读者通常会使用只知道特定 SQL 实现使用的关键字的子集的荧光笔。许多不太常见的关键字不会被突出显示，除非一个非常了解您的 SQL 变体的关键字。所以读者，即使他们使用荧光笔，仍然需要一些更直接的方法来区分任何中等复杂的 SQL 语句中的关键字。

因此，读者将经常——而作者无法提前知道何时会——需要 SQL 语句本身内容的帮助，以了解作者想要作为关键字的内容以及作为标识符的内容。所以*SQL 内容本身*需要**为读者区分关键字**，使用大写关键字是常规且有用的方法。

* * *

## 回答 #4

> 赞同：39
> 
> 时间：2016-02-28T15:55:51.157

曾经有一段时间，大多数人无法编码大写字母以外的任何内容，因为相关编码 (ASCII) 尚未发明。[只有六个位可用](https://en.wikipedia.org/wiki/Six-bit_character_code)。虽然 SQL 是较新的，但小写字母在编程中还不常见。

请注意，有些人声称数据库将获得[紧迫感](https://twitter.com/shipilev/status/703176579191410689)并更快地运行您的查询。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2008-11-16T08:22:11.103

Gordon Bell 的例子并不完全正确。通常，仅突出显示关键字，而不是整个查询。他的第二个例子看起来像：

```
SELECT name, id, xtype, uid, info, status, 
base_schema_ver, replinfo, parent_obj, crdate, 
ftcatid, schema_ver, stats_schema_ver, type, 
userstat, sysstat, indexdel, refdate, version, 
deltrig, instrig, updtrig, seltrig, category, cache
FROM sysobjects
WHERE category = 0
AND xtype IN ('U', 'P', 'FN', 'IF', 'TF')
ORDER BY 1 
```

我发现这更容易阅读，因为关键字更加突出。即使使用语法突出显示，我发现未大写的示例更难阅读。

在我的公司，我们在 SQL 格式方面走得更远。

```
SELECT      name, id, xtype, uid, info, status, 
            base_schema_ver, replinfo, parent_obj, crdate, 
            ftcatid, schema_ver, stats_schema_ver, type, 
            userstat, sysstat, indexdel, refdate, version, 
            deltrig, instrig, updtrig, seltrig, category, cache
FROM sysobjects
LEFT JOIN systhingies ON
    sysobjects.col1=systhingies.col2
WHERE category = 0
    AND xtype IN ('U', 'P', 'FN', 'IF', 'TF')
ORDER BY 1 
```

* * *

## 回答 #6

> 赞同：25
> 
> 时间：2011-01-21T19:52:01.413

我们阅读的文本中只有不到 10% 的字母是大写的。因此，我们的大脑更热衷于识别小写字母而不是大写字母。研究表明阅读大写文本需要更长的时间。这里只是一个例子：

[http://www.guardian.co.uk/media/mind-your-language/2010/oct/04/new-york-street-signs-capitals](http://www.guardian.co.uk/media/mind-your-language/2010/oct/04/new-york-street-signs-capitals)

我认为上面的例子强调了即使你只谈论一两个词，它也会产生影响。

* * *

## 回答 #7

> 赞同：24
> 
> 时间：2012-08-14T03:02:31.723

这是因为 SQL 是一门古老的语言（[1974 年](http://en.wikipedia.org/wiki/SQL)），以至于当它被构思出来时，大多数键盘都没有小写字母！语言文档只是反映了当时的技术。

研究证明，ALL CAPS 更难阅读，以至于美国联邦公路管理局在其《统一交通控制设备手册》中强制使用混合大小写标志，其中指出：

> 常规道路引导标志上的地名、街道名、公路名的字体应为小写字母与首字母大写的组合。

《纽约邮报》还发表了：

> 研究表明，阅读全大写标志更难，而且那些花在远离道路上的额外毫秒已被证明会增加发生事故的可能性，尤其是在老年司机中。

没有充分的理由使用大写字母，也没有充分的理由不使用。

我个人讨厌使用大写的 SQL 关键字。在这个时代，我发现阅读和荒谬变得更加困难。

SQL 语言被定义为不区分大小写。把你的手指从那个shift键上拿开！

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2008-11-15T02:29:30.693

大写可以提高关键字的可见性，但您可以通过代码突出显示和缩进来弥补。
我们使用小写字母是因为查询编辑器和其他工具在编辑 t-sql 代码方面做得很好，我们认为没有必要折磨小指。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2008-11-15T02:45:44.373

猴看，猴为我做。模式匹配——如果我按照我看到的那样做，从句的结构在心理上更容易排列。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2008-12-09T07:11:15.560

大写的可读性较差。所有单词的轮廓都像盒子一样；没有下降器或上升器。小写FTW！

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2008-11-15T02:52:15.187

我觉得它更具可读性。每个子句的开头换行和子句之间的缩进也是如此。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2008-11-15T03:21:45.017

尝试格式化产品（我使用 Red Gate 的 SQL Prompt/SQL Refactor）。您可以设置大小写的工作方式，并且您的代码将始终保持一致的格式。让你的小指休息，让计算机为你完成工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2008-11-15T04:14:12.243

继续使用大写的原因之一是当您（或其他人）在记事本之类的东西中查看代码时，它更容易阅读。即您可以轻松区分“关键字”和表名、SP、udf 等

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-11-15T04:04:23.170

除了为了一致性而一致性之外，没有。虽然这是一个非常主观的话题，但我更喜欢对所有 SQL 使用大小写混合。SQL 更容易阅读，并且在现代 IDE 中什么都不会丢失，因为关键字都是用颜色编码的。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2011-11-22T21:58:52.703

Microsoft SQL Server Management Studio 中的智能感知/自动完成功能允许保留字大写或小写，但大写函数调用如 MAX()、SUM()。

即便如此，解析器仍然允许处理 max() 和 sum() 的小写版本。

这意味着对执行性质的矛盾心理，因此只是个人喜好问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-30T23:30:55.243

我不喜欢全部大写的任何东西（并且更讨厌全部大写），但无法说服自己反对社区。像往常一样，Vim 及其相关软件包是解决许多问题的方法：

[http://www.vim.org/scripts/script.php?script_id=305](http://www.vim.org/scripts/script.php?script_id=305)

只需正常输入，它会在您输入时自动大写关键字。我还没有使用所有晦涩的 SQL 咒语，但它还没有让我失望。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-04-23T11:08:55.717

我从 PHP 中调用我的大部分 mySQL 代码，并在 vim 中进行所有 PHP 编辑（或者我想在这种情况下是 VIM ;-)。现在我确信有插件可以突出 PHP 中的 mySQL 代码，但我还没有找到它，我也没有时间去寻找它。因此，我更喜欢**全部**大写。我发现这个：

```
if ( !$bla ) 
{
   echo "select something from something where something";
}

if ( !$beepboop ) 
{
   echo "create table if not exists loremIpsum;
}

$query = "
CREATE TABLE IF NOT EXISTS HISTORY
(
   ID INT NOT NULL AUTO_INCREMENT,
   INSERTDATE TIMESTAMP DEFAULT NOW(),
   ALTERDATE TIMESTAMP(8) DEFAULT NOW(),
   DELETEDATE TIMESTAMP(8),
   ALTERCOUNT INT DEFAULT 0,
   SELECTCOUNT INT DEFAULT 0,

   PRIMARY KEY(ID),
)ENGINE=InnoDB
";

mysqlQuery( $query, $con ); 
```

比这更好地帮助我区分 PHP 和 SQL：

```
if ( !$bla ) 
{
   echo "select something from something where something";
}

if ( !$beepboop ) 
{
   echo "create table if not exists loremIpsum;
}

$query = "
create table if not exists history
(
   id int not null auto_increment,
   insertdate timestamp default now(),
   alterdate timestamp(8) default now(),
   deletedate timestamp(8),
   altercount int default 0,
   selectcount int default 0,

   primary key(id),
)engine=InnoDB
";

mysqlQuery( $query, $con ); 
```

另外，出于某种原因，我讨厌将全大写字母与驼峰格混合，如下所示：

```
CREATE TABLE IF NOT EXISTS history
(
   ID INT NOT NULL AUTO_INCREMENT,
   insertDate TIMESTAMP DEFAULT NOW(),
   alterDate TIMESTAMP(8) DEFAULT NOW(),
   deleteDate TIMESTAMP(8),
   alterCount INT DEFAULT 0,
   selectCount INT DEFAULT 0,

   PRIMARY KEY(ID),
)ENGINE=InnoDB 
```

这`ID`让我很恼火。应该改为`id`吗？还是`iD`？

# asp.net - ASP.NET 创建类似 windows.com 的导航菜单样式

> ID：292032
> 
> 赞同：1
> 
> 时间：2008-11-15T02:27:05.283
> 
> 标签：asp.net, html, css

刚刚注意到 windows.com 上导航菜单的样式正是我的网站所需要的。我想知道如何创建具有多列的那种下拉列表。当鼠标悬停在每个项目上时，该列会提供该项目的预览。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T03:13:16.407

菜单实际上是一个 DIV，当您将鼠标悬停在菜单项上时，它会显示在其他内容之上。当您将鼠标悬停在菜单中的项目上时，它会调用一些 javascript 来更改显示在右侧的图像。在您的网络浏览器中查看源代码并查找产品菜单。如果您有带有 Firebug 的 Firefox 或 Web 开发者插件，您应该能够查看处理图像更改的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T03:49:32.823

哇。他们什么时候这样做的？

Microsoft 已使用本机 AJAX 库来执行此操作。不知道那是 ASP.Net AJAX 库还是他们内部构建的东西。

Tvanfosson 已经很好地总结了其中的大部分内容。顶部菜单是一个`<ul>`标签，每个子`<li>`元素都包含一个嵌套`<span>`标签。该标签将用于标识您的鼠标悬停在的顶级菜单项。

在源代码中进行搜索，您会发现：

```
<!-- BEGIN: Products Menu --> 
```

这是您所追求的效果的最佳示例。如前所述，它是一个包含另一个无序列表的项目。那里的每个列表项都包含一个链接，其鼠标悬停事件会更改出现在单独 . 如果您搜索，您可以看到该区域

```
<div id="PageWrapper" class="HomePage"> 
```

一些好的资源开始将是：

*   [ASP.Net AJAX 示例](http://asp.net/ajax)
*   [jQuery 库](http://jquery.com)
*   [多级 CSS 菜单](http://www.dynamicdrive.com/style/csslibrary/item/jquery_multi_level_css_menu_horizontal_blue/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T04:40:39.023

Microsoft 菜单系统对我来说似乎不是一个值得效仿的菜单系统……看看它在 FireFox 中是如何呈现的（或者实际上，它是如何不呈现的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T05:28:22.687

microsoft.com 菜单在 Chrome 或 Safari 上也不起作用，但我怀疑微软是否在乎。

# clojure - 函数式编程与 Web 开发相关吗？

> ID：292033
> 
> 赞同：89
> 
> 时间：2008-11-15T02:27:40.570
> 
> 标签：clojure, functional-programming

我最近看到了很多关于函数式编程的内容，而 Clojure 看起来特别有趣。虽然我“理解”它是什么的基本描述，但如果我能的话，我无法弄清楚作为一名 Web 开发人员我将如何在日常工作中使用它。我读过的很多内容都集中在函数式编程的数学方面，而不是常规 OO 中的典型编程情况。

我弄错了棍子的一端吗？函数式编程与 Web 开发完全无关吗？如果没有，是否有任何“用于网络”的示例？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2008-11-15T07:42:08.207

函数式编程非常适合 Web 应用程序。Web 应用程序接收 HTTP 请求并生成 HTML 结果。这可以被认为是从请求到页面的功能。

与桌面应用程序相比，我们通常有一个长时间运行的进程、一个有状态的 UI 和多个方向的数据流。这更适合关注具有状态和消息传递的对象的 OO。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-11-15T02:41:19.013

我脑海中的几个例子：

*   雅虎！Store 由 Lisp 提供支持（在收购之前最初命名为[Viaweb ）](http://en.wikipedia.org/wiki/Viaweb)
*   [尽管Reddit](http://reddit.com)在 2005 年[改用 Python](http://blog.reddit.com/2005/12/on-lisp.html)，但他们的原型完全是 Lisp
*   [Hacker News](http://news.ycombinator.com/)完全用 Arc（一种 Lisp 方言）编写

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-11-15T03:00:49.037

我不明白为什么不这样做 - 只要您向浏览器提供符合标准的 HTML，它们并不关心您使用什么来生成它，无论是函数式语言、命令式语言还是训练有素的猴子。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2008-11-15T15:31:58.537

*纯*函数式编程可能无法很好地映射到 Web 编程环境中。但主要障碍只是缺乏基础设施（框架和 API）。在函数式语言拥有像 Java、Python 或 Ruby 这样丰富的 Web 编程环境之前，还需要很长时间（老实说，可能永远不会）。

也就是说，有一些选择。

*   [HAppS](http://happs.org/) - Haskell Web 应用服务器
*   [Haskell 服务器页面](http://www.haskell.org/haskellwiki/HSP)
*   [Links](http://groups.inf.ed.ac.uk/links/) - 一种功能性的网络编程语言
*   [mod_caml](http://merjis.com/developers/mod_caml/) - Apache 的 OCaml CGI 模块
*   [Ocsigen/Eliom](http://www.ocsigen.org/) - OCaml Web 服务器/编程框架
*   [OPA](http://opalang.org/) - 商业网络应用程序框架
*   [Yesod](http://docs.yesodweb.com/) - Haskell 的 Web 框架

我对这些都没有任何经验。也许评论者可以权衡对他们有用的东西。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2009-08-05T21:56:43.120

[Twitter 用 Scala 重写了他们的后端，Scala](http://www.artima.com/scalazine/articles/twitter_on_scala.html)是一种支持面向对象和函数式范式的 JVM 语言。

此外，[Lift](http://liftweb.net/) Web 框架是用 Scala 编写的。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2010-10-25T03:43:54.670

对于 Clojure，有一个有趣的创业公司 (TheDeadline) 使用 Clojure 和 Google App Engine 开发。他们在 Slideshare 上有一个很好的 ppt，在 InfoQ 上有一个采访。

有关使用 GAE 部署 Clojure 的良好讨论：http: //news.ycombinator.com/item?id= [1239788](http://news.ycombinator.com/item?id=1239788)

据我所知，Clojure 有一些 Web 开发库。Compojure 环变戏法

希望这能回答你的一些问题=）（我也刚刚开始......）

最好的，瑞恩

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-15T02:47:17.020

它与 Web 开发并非完全无关。位于服务器上的应用程序可以很好地利用闭包、高阶函数、不变性、引用透明性等功能特性……例如，您肯定有需要以任何方式转换或操作的集合。函数式编程在这里有所帮助，这是它的习语渗透到主流语言中的一个原因。功能特性有助于简洁性、可测试性、并行化，并且它们还可以为您本来可以使用模式解决的问题提供本机解决方案。

更新：也有功能语言的网络框架。Common Lisp 的 Weblocks，Scala 的 Lift。这些是我听说过的，可能还有更多……但是您不一定必须是纯函数式的——例如 Scala 不是纯函数式的，应该可以与任何 Java 框架一起使用，您仍然可以为业务层使用函数式编程等。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-10-25T02:32:00.510

查看[Ur/Web](http://www.impredicative.com/ur/)。它非常快，而且它的静态类型系统知道 HTML 和 SQL 之类的东西，因此它可以保证各种关于安全性的好东西。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2010-10-25T02:47:40.390

Erlang 似乎在一些可扩展 Web 应用程序的基础设施中得到了广泛使用。CouchDB 和 Riak 数据库大部分是用 Erlang 编写的，RabbitMQ 消息队列服务器也是如此。它成功的关键之一是它通过消息传递处理并发，没有共享的可变状态。正是这种思考问题的方式比任何特定的函数式编程语言都更有用。

或者，看看 MapReduce。这是一种查看计算的非常实用的方式，即使您的 map 和 reduce 函数恰好是内部有状态的——因此，它非常适合以容错、分布式的方式查询大型数据集。

无论如何，选择对你来说最实用的东西。但是请始终将函数式编程放在脑海中，因为您永远不知道它何时会派上用场。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-11-15T10:57:54.503

他们正在[爱丁堡大学做一些非常酷的事情，](http://groups.inf.ed.ac.uk/links/)用于网络的函数式编程。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2010-09-24T23:29:28.873

这是使用[Haskell](http://jekor.com/article/is-haskell-a-good-choice-for-web-applications)构建 Web 应用程序的 Web 开发人员体验。尽管函数式语言是非常类型安全的并且具有良好的并发性，但它们总是缺乏最好的 API，因为长期以来它一直是学术界的宠儿，但在现实世界中还没有被强烈接受。我希望它不会太远。Erlang 已经参与其中。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2010-10-24T22:25:57.513

语言和范式对于 Web 应用程序来说并不重要，它们都同样好与坏。如果您正在寻找学习新范式的理由，只需深入研究即可。我的建议是分析您要解决的问题并选择合适的工具集。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2010-10-25T03:42:30.753

Javascript（网络的 FE 部分的语言以及越来越多的 BE 语言）本身不是函数式的，但函数是一阶函数式的

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2010-10-25T07:44:32.203

我们刚刚推出了一个在线电子表格，其后端完全用 Erlang 编写。

[http://hypernumbers.com](http://hypernumbers.com)

从任何标准来看，这都是您可以使用具有心理复杂性的巨大 GUI 构建的最复杂的 Web 应用程序之一。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2010-10-24T23:57:40.100

函数式编程在 Web 编程中流行的原因是它显式地共享和更改状态，并允许程序员将纯函数部分表示为纯函数。纯函数的优点是并行运行非常简单——因为它们没有副作用。

至少这是我的理由。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2010-10-25T06:35:42.437

另一个简短的答案：[http](http://www.mlstate.com) ://www.mlstate.com——一个基于 FP 的完整的 Web 开发平台。该语言的清晰语义允许进行各种自动化的安全和安全分析、优化等。

警告：我在那里工作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-07-19T10:12:53.177

函数式语言可能无法直接用于构建出色的应用程序，但我们大量使用函数式编程范例来构建我们的应用程序。纯函数式编程提出了“无副作用”的约束。这确保了纯函数调用将按照它们被调用的顺序产生相同的结果。这对于 Web 开发来说并不理想，但是如果将函数式编程与状态更改系统相结合，则可以构建一个健壮的 Web 应用程序。查看我的论文了解更多详细信息：[FAST Server](http://arxiv.org/abs/1607.05075) 还有这些[幻灯片](http://www.slideshare.net/GopiSuvanam/function-augmented-state-transfer-fast-architecture-64151967)。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-04-10T13:56:35.563

是的，因为函数式编程可以用任何语言完成，所以您可以将其作为 Web 开发人员每天使用。

你应该？这取决于您要解决的问题。函数式编程是一种编程范式，您应该在哪里使用它取决于您要解决的问题。

为了让决策更简单，想想使用 OOP 概念是否更容易解决一些问题，封装、多态、继承之类的特性可以让你的生活更轻松？

如果是，请不要在那里进行函数式编程，而只需使用 OOP。如果您的应用程序要执行复杂的计算/计算/业务逻辑并涉及大量并发处理，那么函数式编程可以在这种情况下提供许多工具和优势。

这些只是构建程序结构和元素的不同风格，所以一切都是为了使用正确的工具来完成正确的工作。剩下的任何事情都可以使用任何东西来完成。

**Web开发中的函数式编程：**

JavaScript 支持函数式编程，当我们在 Web 开发环境中时，它非常支持。React 框架深受函数式编程原则的影响，并在许多 Web 应用程序中使用。

此外，您还可以找到许多使用以下列出的函数式编程语言开发的框架构建和运行的 Web 应用程序：

• WebSharper (F#)

• 快照 (Haskell)

• 电梯 (Scala)

• 奥西根 (OCaml)

• Chicago Boss，Zotonic (erLang)

希望所以我的回答会帮助任何人。

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2010-10-25T02:11:55.643

您可能不会使用它也不应该使用它，但是当您说有人总是会发现规则的例外时（Viaweb 等）。基本上没有“超级语言”，只有工作代码行，通常在“Blub”中。甚至 Paul Graham 也说 Lisp 的主要（实际上只是）好处是快速原型化的能力。

此外，“超级语言”通常会影响而不是增加代码的可读性，这意味着编写它的“天才”必须永远维护它，因为没有人能理解它，特别是因为他很可能用自己修改过的方言编写它。这减少了任何项目的可能范围，这意味着即使可以完成新的、创新的事情，它们也是不可扩展的，因此保持在相对较小的规模（如 Arc 中的 Hacker News）。

这并不是说某人不能有一个天才的想法并以一种难以理解的风格实现它，然后可以在 Blub 中重写和扩展，以便很多人可以从中受益。实际上，这正是所有 Lisp 成功故事中发生的事情，更不用说每个曾经生活过的著名哲学家了。但是，当然，如果您是“天才”，您也可以通过其他方式制作产品原型。

至于 JVM 上的 FP，可能有一些有限但很酷的东西。尽管我个人只会将它用于原型设计，但您可能有一个用例（通常与多线程有关），它提供了一些改进。

# php - 如何搜索在文本字符串中找到的子字符串并突出显示所有内容

> ID：292037
> 
> 赞同：3
> 
> 时间：2008-11-15T02:32:23.463
> 
> 标签：php, regex

我试图突出显示搜索结果，但我想包含受封闭标签限制的周围文本。

因此，如果 $term 很“酷”，那么 preg_replace 应该以：

```
<div><span style="background: #f00">My hair cut so cool!</span></div> 
```

不幸的是，我的正则表达式似乎没有捕获周围的文本，只有 $term。周围的标签可以是任何类型的有效标签。

```
 0:  
    1:  $term = 'cool';
    2:  ob_start();
    3:

   10:  foreach($items as $item) {
   11:    // echoing results here
   12:    echo '<div>' . $item->text . '</div>';
   13:  }

   30:  $content = ob_get_contents();
   31:  ob_clean() ;
   32:
   33:  $pattern = "/(?<!<[^>])($term)/i";
   34:  $replace = "<span style=\"background: #f00\">$1</span>";
   35:  echo preg_replace($pattern, $replace, $content);
   36: 
```

编辑： foreach 循环是众多循环之一，位于一个单独的类中。因此，我无法在循环本身中进行替换。此外，处理最终输出而不是数据上的每个循环似乎更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T08:03:23.653

查找一个术语以及它之前和之后的 HTML 标记的所有内容与查找该术语之前和之后不是尖括号的所有字符相同。这对于正则表达式来说是微不足道的：

```
$pattern = "/[^<>]*$term[^<>]*/i";
$replace = "<span style=\"background: #f00\">$0</span>"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-11-15T04:11:39.083

为什么需要 preg_replace？

这就是我解决问题的方法：

案例 1：**突出显示结果的子字符串：** 使用 strpos() 或 stripos() 获取字符串中第一次出现的索引。下一步：获取从index-X到index+L+Y的子串，其中X和Y是定义的常量，描述单词前后要突出显示的字符数，L是单词的长度。然后在生成的子字符串周围应用一些 -tag。

案例 2：**突出显示孔标签：**您仍然可以通过 strpos/stripos 进行搜索。然后将字符串分成两部分：第一部分是从零到指针的子字符串，第二部分由字符串的其余部分组成。然后：在字符串 1 中查找 '>' 的最后一个出现 (strrpos/strripos)，在字符串 2 中查找 '<' 的第一个出现。插入突出显示，然后享受 ;)

> 有些人在遇到问题时会想“我知道，我会使用正则表达式”。现在他们有两个问题 - Jamie Zawinski

# sql - 数据库分片和分区资源

> ID：292039
> 
> 赞同：8
> 
> 时间：2008-11-15T02:34:15.720
> 
> 标签：sql, database, scalability, sharding, database-cluster

我正在使用遇到可伸缩性问题的数据库模式。架构中的一个表已增长到大约 1000 万行，我正在探索分片和分区选项，以允许此架构扩展到更大的数据集（例如，10 亿到 1000 亿行）。我们的应用程序还必须可部署到多个数据库产品上，包括但不限于 Oracle、MS SQL Server 和 MySQL。

一般来说，这是一个大问题，我想了解一下可用的选项。数据库分片和分区策略有哪些资源（书籍、白皮书、网站）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-05T23:52:39.553

I agree with the other answers that you should look at your schema and indexes before resorting to sharding. 10 million rows is well within the capabilities of any of the major database engines.

However if you want some resources for learning about the subject of sharding then try these:

*   [Scalability Best Practices: Lessons from eBay](http://www.infoq.com/articles/ebay-scalability-best-practices)
*   [Randy Shoup on eBay's Architectural Principles - Video and Presentation](http://www.infoq.com/presentations/shoup-ebay-architectural-principles)
*   [High Scalability Site](http://highscalability.com/)
*   [Mr. Moore gets to punt on sharding (when not to do it)](http://www.37signals.com/svn/posts/1509-mr-moore-gets-to-punt-on-sharding)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-16T16:51:49.047

我同意 Mike Woodhouse 的观点，即当前的规模不应该成为问题——提问者也同意。

大多数商业 DBMS 以某种名称或其他名称提供对碎片表的支持。关键问题之一是是否有一种明智的方式将数据拆分为片段。一种常见的方法是根据日期执行此操作，因此 2008 年 11 月的所有值都放在一个片段中，2008 年 10 月的所有值都放在另一个片段中，依此类推。这在删除旧数据时具有优势。您可能可以删除包含 2001 年 10 月（数据保留七年）的数据的片段，而不会影响其他片段。这种碎片化也有助于“碎片消除”；如果查询显然不需要从给定片段中读取数据，那么它将保持未读状态，这可以为您带来巨大的性能优势。（例如，

还有其他碎片技术 - 循环法将负载分布在多个磁盘上，但这意味着您无法从碎片消除中受益。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T11:54:22.813

1000 万行在 DBMS 方面确实不算大，在开始规划带有分片或分区的数据物理分布之前，我会先查看我的索引和查询计划，这在你的表增长之前应该不是必需的几个数量级。

当然，所有恕我直言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-19T17:22:56.143

以我的经验，大表总是在 I/O 方面打击你。最便宜的解决方案是添加足够多的多列索引，这样您的所有查询都可以直接从索引中获取数据，而无需加载主数据页面。这会使您的插入和更新更加 I/O 密集，但这可能没问题。下一个简单的选项是最大化服务器中的 RAM。如果您的数据库很大，没有理由少于 32GB。但最后你仍然会发现自己受 I/O 限制，并且你会考虑购买大量硬盘并维护复杂的分区方案，这在硬件和人工之间花费了一大笔钱。我希望现在有更好的选择——将数据库从旋转硬盘移动到 SLC 固态驱动器——这应该会让你的随机读写速度比顶级 SAS 驱动器快一百倍，并消除 I/O 瓶颈。SSD 的起价为每 GB 10 美元，所以你要花一些钱，但它仍然比 SAN 等便宜得多。

# iphone - iPhone上的自定义UITabBarItem图像/标题

> ID：292041
> 
> 赞同：2
> 
> 时间：2008-11-15T02:39:14.447
> 
> 标签：iphone, objective-c, cocoa-touch

我想为预定义的 UITabBarItems 之一添加自定义标题。每当我在 Interface Builder 中选择我喜欢的特定实例时——如果我修改标题，它就会被预设回“自定义”标识符。理想情况下，我希望“书签”标识符中的图书图标带有我自己的自定义标题。

SDK 当前是否支持这种级别的自定义？我是否将不得不最终筛选图像并将其应用为自定义图像？

感谢任何为我指明正确方向的见解或文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-15T02:54:11.920

不幸的是，UITabBarItem 的唯一类型是完全由操作系统提供和描述的那些（即，它为它们分配图标和标题），以及完全由应用程序描述的那些，正如您所发现的。到目前为止，最简单的解决方案是将图标从其他地方拉出来并与`-initWithTitle:image:tag`.

[http://img369.imageshack.us/img369/8388/openbookwp4.png](http://img369.imageshack.us/img369/8388/openbookwp4.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-07-14T04:35:29.037

至于在网上查找图标...我自己仍在寻找所有苹果官方的图标。这是我到目前为止发现的：

*   [http://glyphish.com/](http://glyphish.com/)
*   [http://www.kombine.net/icon-store/iphone-tab-bar-icons](http://www.kombine.net/icon-store/iphone-tab-bar-icons)

而不是屏幕截图，请执行以下操作：

*   [http://www.alexcurylo.com/blog/2009/01/03/extracting-sdk-icons/](http://www.alexcurylo.com/blog/2009/01/03/extracting-sdk-icons/)

# apache-flex - 为什么 Flex 让我将类视为对象

> ID：292066
> 
> 赞同：1
> 
> 时间：2008-11-15T03:07:12.580
> 
> 标签：apache-flex, actionscript-3, oop

这段代码是错误的，因为它向数组中添加了一个类，然后试图将其拉出并像操作对象一样对其进行操作。

```
private function fail(event:Event):void
{
    var myObj:MyClass;
    var a:ArrayCollection = new ArrayCollection();
    var x:MyClass;
    var y:MyClass;

    myObj = new MyClass;
    a.addItem(myObj);
    a.addItem(MyClass);  // !!BAD!!

    x = a[0];
    y = a[1];
} 
```

当我不小心这样做时，我花了很长时间才明白自己做错了什么。部分原因是错误消息没有告诉我任何我能理解的内容：

```
TypeError: Error #1034: Type Coercion failed: cannot convert com.ibm.ITest::MyClass$ to com.ibm.ITest.MyClass.
    at ITest/fail()[C:\work_simple01\ITest\src\ITest.mxml:51]
    at ITest/___ITest_Button5_click()[C:\work_simple01\ITest\src\ITest.mxml:61] 
```

所以我的问题是，为什么这条线标有 !!BAD!! 以上甚至允许？我希望这里出现编译时错误。由于它可以编译，因此我不知道它一定有一些用途。它是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-12-01T21:18:31.127

在我看来，这个问题相当于“为什么我可以使用一个类作为一个值？” 这是个好问题。

使用 ActionScript 中的类可以做两件主要的事情；您可以*实例化*它，并且可以*访问它的静态属性*。（好吧，还有其他事情，但那些是显而易见的。）实例化一个类可能是最相关的类作为一个值的使用。Class 是它自己的[factory](http://www.c2.com/cgi/wiki?FactoryPattern "工厂模式")，就像您在 C++ 或 Java 中显式创建的那样。

这是我作为练习编写的一个小型俄罗斯方块游戏的示例。我有两个课程，Brick 和 SceneBrick。积木是游戏中的积木，会掉落并堆积起来。SceneBrick 是一块刚刚作为游戏区框架绘制的砖块。

但是，我使用一个函数来绘制它们，而没有在函数中引用任何一种类型：

```
function drawBricks(xs:Array, ys:Array, brickType:Class){
 xs.map(function(o,i,a){
  var brick = new brickType();
  // etc.
 });    
} 
```

我可以像这样使用它：

```
drawBricks([0,1,2,3], [4,4,4,4], Brick); // draw a long piece
drawBricks(times(0, 21), countFrom(0, 21), SceneBrick); // draw a big vertical "wall" 
```

在 ActionScript 中，您可以将类作为值传递并使用它来实例化该类。在像 Java 或 C++ 这样的语言中，您必须要么将其用作泛型类的参数，要么使用一些常见的超类型定义工厂类才能做到这一点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-11-15T03:16:20.067

我假设异常发生在示例的最后一行，而不是您标记为“BAD”的错误。

您添加到数组中的是表示类“MyClass”的对象，而不是 MyClass 的实例。

能够在运行时检查类是一项强大的功能，并且是 .NET 和 Java 中反射功能的基础。这些特性通常用于支持可扩展性模式或实现序列化框架。

因此，操作其中一个对象是一件有效的事情……因为它不是 MyClass 的实例，因此您不能将其分配给您的 y 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-02T16:31:01.720

似乎在 Flex 中，集合没有指定它们应该包含的值的类型。

```
var a:ArrayCollection = new ArrayCollection(); 
```

所以我觉得编译器不检查你添加到它的值的类型是合乎逻辑的。然后只能在运行时检查从集合元素分配变量，因为编译器没有信息。

至于作为对象的类（并响应消息），构建各种调试/检查/反射工具非常方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T03:57:21.153

后期绑定（和动态语言）的好处在于它允许您在实现中具有更大的灵活性。缺点是该语言不能保护您免于犯一些早期绑定和强类型所防止的简单错误。就个人而言，我会考虑使用 TDD（测试驱动开发）来帮助防止此类错误潜入您的代码。

# php - 使用 ob_get_contents() 或 $text .= 'test'; 更好吗？

> ID：292068
> 
> 赞同：14
> 
> 时间：2008-11-15T03:09:10.877
> 
> 标签：php, optimization, concatenation

我最近看到了很多`ob_get_clean()`。通常我已经完成了`$test .= 'test'`

我想知道一个是否比另一个更快和/或更好。

这是使用的代码`ob_get_clean()`：

```
ob_start();

foreach($items as $item) {
    echo '<div>' . $item . '</div>';
}

$test = ob_get_clean(); 
```

这是使用的代码`$test .= 'test'`：

```
$test = '';

foreach($items as $item) {
    $test .= '<div>' . $item . '</div>';
} 
```

哪个更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T03:21:47.763

结果是相同的，我想如果有的话，性能差异可以忽略不计。基本上，个人风格偏好的问题。我自己会进行串联 - 我仅在无法选择串联时才使用输出缓冲。

此外，不要同时运行 ob_get_contents() 和 ob_clean() ，只需运行 ob_get_clean() 即可同时执行两者。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-15T06:03:38.420

输出缓冲区具有全局变量的所有缺陷。您必须了解从`ob_start()`到的所有执行路径`ob_get_clean()`。您确定它会到达那里，并且在其间打开的任何缓冲区都将被关闭吗？请记住，代码可能会引发异常。对于下一个人来说，这可能是一个非常有趣的错误。

另一方面——我什至不想提它——由于PHP内部的原因，输出缓冲在连接大字符串时要快一些。我不确定这是否仍然正确。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-15T19:36:48.340

如果您担心字符串连接的开销，您应该注意：

echo '<div>'.$test.'</div>';

比这慢得多：

回声 '<div>', $test , '</div>';

第一个编译成两个字符串 concats，然后是一个回显，而第二个编译成三个回显，这实际上更快。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-15T14:31:09.317

我认为，当您使用大量字符串时，使用输出缓冲可能会带来很小的性能优势，但在我看来，对于常见用途，您最好使用连接，因为其他人可能更容易理解和调试此代码。

一个小点，但如果你要使用输出缓冲的方法，你不妨充分利用它：

```
ob_start();

foreach($items as $item) {
    echo '<div>';
    echo $item;
    echo '</div>';
}

$test = ob_get_clean(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-15T16:52:19.607

如上所述，输出缓冲对性能更好。对于大字符串，性能差异根本不可忽视。您可以将 PHP 中的输出缓冲与 Java 中的 StringBuffer/StringBuilder 进行比较；对于字符串连接，每次都需要将整个字符串复制到内存中。对于输出缓冲，文本进入一个以合理增量增长的缓冲区，并且不需要为每个输出复制数据。

您可能还会考虑使用内联 HTML（甚至更快）。内联 HTML 的另一个好处是您的 IDE 可能会在 HTML 上执行语法突出显示，当 HTML 在 PHP 字符串中时不会发生这种情况。修改后的代码（short_open_tags = On required）：

```
ob_start();
?>

<? foreach($items as $item) { ?>
    <div><?= $item ?></div>
<? } ?>

<?
$test = ob_get_clean(); 
```

# iphone - OpenGL：如何实现“橡皮擦”工具？

> ID：292071
> 
> 赞同：4
> 
> 时间：2008-11-15T03:11:30.933
> 
> 标签：iphone, opengl-es, framebuffer

我正在为 iPhone 开发一款涉及绘图/绘画机制的游戏，我在尝试创建一个可以擦除已经绘制的东西的工具时遇到了问题。

主要问题是绘制的背景不是纯色，而是静态图像或动画。我尝试在绘图中使用不同的混合选项和逻辑操作，但似乎没有任何效果。我是 OpenGL 的新手，所以我一定遗漏了一些东西。

有小费吗？

编辑：为了提供更多信息，我正在为我的画笔使用纹理并使用 glVertexPointer() 和 glDrawArrays() 来渲染它们。例如：

```
glBindTexture(GL_TEXTURE_2D, circleBrush);
glVertexPointer(3, GL_FLOAT, 0, verts);
glTexCoordPointer(2, GL_FLOAT, 0, coords);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

编辑 2：不幸的是，iPhone 上没有模板缓冲区。: (

编辑 3：iPhone 上提供了 Framebuffer 对象，这就是我所走的路。我还没有完全实现它，但到目前为止它看起来就像我想要的那样工作。谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-18T16:24:46.933

在您的场景上绘制一个全屏纹理四边形。当用户绘制笔触时，使用`glTexSubImage2D`来更新您的纹理。

glReadPixels/glDrawPixels 很慢。

使用 FrameBufferObjects 甚至更好，但我怀疑 iPhone 上是否有这个扩展（再说一次，我不确定，所以也许试试）。FBO 允许您直接绘制到纹理中，就好像它是另一个渲染上下文一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-05-17T14:20:44.227

Stencil Buffer 肯定是解决此问题的最佳方法...您将节省时间、cpu 和潜在问题...，它们在 Iphone 上可用，您只需要创建一个 OpenGLlES 2.0 表面（不是 gles 1.0 或 1.1） .

```
 //Turn off writing to the Color Buffer and Depth Buffer
        //We want to draw to the Stencil Buffer only
        glColorMask(false, false, false, false);
        glDepthMask(false);

        //Enable the Stencil Buffer
        glEnable(GL_STENCIL_TEST);

        //Set 1 into the stencil buffer
        glStencilFunc(GL_ALWAYS, 1, 0xFFFFFFFF);
        glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);

        //CALL YOUR DRAWING METHOD HERE

        //Turn on Color Buffer and Depth Buffer
        glColorMask(true, true, true, true);
        glDepthMask(true);

        //Only write to the Stencil Buffer where 1 is set
        glStencilFunc(GL_EQUAL, 1, 0xFFFFFFFF);
        //Keep the content of the Stencil Buffer
        glStencilOp(GL_KEEP, GL_KEEP, GL_KEEP);

        //CALL OUR DRAWING METHOD AGAIN 
```

查找此示例： [http ://www.opengl.org/resources/code/samples/glut_examples/examples/stenciltst.c](http://www.opengl.org/resources/code/samples/glut_examples/examples/stenciltst.c)

这是视觉结果： [http ://www.opengl.org/resources/code/samples/glut_examples/examples/stenciltst.jpg](http://www.opengl.org/resources/code/samples/glut_examples/examples/stenciltst.jpg)

我已经在安卓和 iPhone 上实现了同样的橡皮擦工具，它就像一个魅力！

祝你好运 ！

干杯！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T04:16:10.867

您没有提供太多信息，但我假设您将它们“绘制”的任何内容存储到缓冲区中，然后将其绘制在屏幕上，如下所示：

```
 glWindowPos2i(X, Y);
 glDrawPixels(drawing->Width, drawing->Height, drawing->Format, 
              GL_UNSIGNED_BYTE, drawing->ImageData); 
```

使用绘图-> ImageData 作为缓冲区。你可以做的是有一个单独的背景缓冲区并首先绘制它。然后擦除工具将简单地将绘图缓冲区变白（将所有值，包括alpha，一直向上）。

要使此解决方案起作用，您必须打开混合并**关闭深度测试**。

```
 glEnable(GL_BLEND);
 glDisable(GL_DEPTH_TEST);
 glWindowPos2i(X, Y);
 //background never changes
 glDrawPixels(background->Width, background->Height, background->Format, 
              GL_UNSIGNED_BYTE, background->ImageData);
 glWindowPos2i(X, Y);
 glDrawPixels(drawing->Width, drawing->Height, drawing->Format, 
              GL_UNSIGNED_BYTE, drawing->ImageData);
 glEnable(GL_DEPTH_TEST);
 glDisable(GL_BLEND); 
```

那是你要找的吗？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-16T07:15:50.083

您可以使用模板缓冲区进行此操作。模板缓冲区是一个特殊的缓冲区，它保存每个像素的信息，类似于深度缓冲区。与深度缓冲区不同，您可以决定在绘制时如何更改模板缓冲区以及它如何影响是否绘制到颜色缓冲区的决定。为此，您可以在任何绘图操作之前设置特定状态。这是你要做的：

*   在用户擦除时，将“擦除”区域绘制到模板缓冲区中（使用 StencilOp，见下文）。您可以为此使用任何 GL 绘图功能。

*   在每个渲染过程中，首先绘制背景（如果需要，可以在此处使用负模板测试仅绘制背景的“已擦除”部分 - 可能会提高性能）。

*   然后，为所有其他绘图操作启用模板测试。然后，OpenGL 将只绘制到“未擦除”区域。

设置模板缓冲区如何影响绘图（或不影响绘图）的函数：glStencilFunc()

设置模板缓冲区本身如何受绘图影响的函数：glStencilOp()

进一步的解释，以及这些的论点： [http ://www.opengl.org/resources/code/samples/sig99/advanced99/notes/node117.html](http://www.opengl.org/resources/code/samples/sig99/advanced99/notes/node117.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-07-04T07:06:30.303

使用 glBlendFunc(GL_ONE, GL_ZERO) 模式可以听清楚。

# javascript - ExtJS 与 Squash Javascript 混淆器

> ID：292085
> 
> 赞同：1
> 
> 时间：2008-11-15T03:21:31.867
> 
> 标签：javascript, extjs, obfuscation

我偶然发现了这个名为[Squash](http://www.ideareactor.com/idea/HomePage.html)的 javascript 混淆器，我想在我的 ExtJS 项目中使用它来混淆我的 javascript 文件。我已经尝试过了，结果是完全混淆的代码。但似乎我也必须混淆 ExtJS 库，因为我收到警告说它找不到诸如`Ext.onReady()`,`Ext.form.FormPanel()`等函数。

我只是想问一下你们中是否有人在项目中成功使用过 Squash + ExtJS，以及你们是如何设法使其工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2010-08-15T10:23:31.293

我想推荐另一个 javascript 混淆工具：http: [//jscrambler.com](http://jscrambler.com)。

该工具能够检测和替换具有私有访问权限的标识符，因此您可以/应该只混淆您的 extjs 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-16T10:16:22.903

Typical rtfm: The `@Public` annotation on the `setDocumentTitle` function prevents the function name from being obfuscated so that it can be accessed from unobfuscated code.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-01-16T20:48:34.287

尝试 [http://dean.edwards.name/packer/](http://dean.edwards.name/packer/) 并检查 Base62 编码收缩变量，它在我的 extjs 应用程序上对我有用，而无需混淆 ExtJS 库

# javascript - 如何使用 JavaScript 删除 HTML 中的所有表格？

> ID：292091
> 
> 赞同：2
> 
> 时间：2008-11-15T03:26:10.373
> 
> 标签：javascript, html, html-table

如何删除网页中的所有表格？这些表没有任何关联的 ID。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T03:35:08.313

非常简单的版本：

```
var tables = document.getElementsByTagName("TABLE");
for (var i=tables.length-1; i>=0;i-=1)
   if (tables[i]) tables[i].parentNode.removeChild(tables[i]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-15T12:10:48.537

危险！getElementsByTagName 返回一个“实时”节点列表。在 Joel 的代码中，移除元素 0 会将列表中的项目向下移动，因此当您移除元素 1 时，您已经错过了一项。

可能的选择：如果你知道你总是要删除每一个元素，你可以使用一个while循环：

```
var tables= document.getElementsByTagName('table');
while (tables.length>0)
    tables[0].parentNode.removeChild(tables[0]); 
```

或者，如果您可能会或可能不会删除，但迭代顺序并不重要，请向后浏览列表：

```
var tables= document.getElementsByTagName('table');
for (var i= tables.length; i-->0;)
    tables[i].parentNode.removeChild(tables[i]); 
```

如果您可能删除或可能不删除*并且*需要向前迭代，那么您将处于不得不复制列表的繁琐位置：

```
function toArray(l) {
    var a= [];
    for (var i= 0; i<l.length; i++)
        a[i]= l[i];
    return a;
}

var tables= toArray(document.getElementsByTagName('table'));
for (var i= 0; i<tables.length; i++)
    ... 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-15T03:29:24.597

如果您使用的是 jQuery，这很容易......

```
$(document).ready(function() {
  $("table").remove();
}); 
```

不知道你在其他图书馆是怎么做的。

如果您不使用 js 库，则应该使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-16T04:00:50.197

或者：

```
function myF() {
    this.checkChild = function(tagN, node) {
        if (node.tagName.toLower() == tagN.toLower()) {
            node.parentNode.removeChild(node);
        }
        else {
            var i;
            for(i = 0; i < node.childNodes.length; i++)
                this.checkChild(tagN, node.childNodes[i]);
        }
    }
} 
```

用法：

```
 var m = new myF();
m.checkChild("The name of the tagname. This case: table", document.body); 
```

祝你好运！

# python - 在python中轮询键盘（检测按键）

> ID：292095
> 
> 赞同：74
> 
> 时间：2008-11-15T03:29:09.777
> 
> 标签：python, console, keyboard, blocking, nonblocking

如何从控制台 python 应用程序轮询键盘？具体来说，我想在许多其他 I/O 活动（套接字选择、串行端口访问等）中做一些类似的事情：

```
while True:
    # doing amazing pythonic embedded stuff
    # ...

    # periodically do a non-blocking check to see if
    # we are being told to do something else
    x = keyboard.read(1000, timeout = 0)

    if len(x):
        # ok, some key got pressed
        # do something 
```

在 Windows 上执行此操作的正确 pythonic 方法是什么？此外，Linux 的可移植性也不错，尽管它不是必需的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2008-11-15T17:09:00.650

标准方法是使用[select](https://docs.python.org/2/library/select.html)模块。

但是，这在 Windows 上不起作用。为此，您可以使用[msvcrt](https://docs.python.org/2/library/msvcrt.html#console-i-o)模块的键盘轮询。

通常，这是通过多个线程来完成的——每个设备一个被“监视”加上可能需要被设备中断的后台进程。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2010-08-19T17:12:50.163

使用 curses 模块的解决方案。打印与按下的每个键对应的数值：

```
import curses

def main(stdscr):
    # do not wait for input when calling getch
    stdscr.nodelay(1)
    while True:
        # get keyboard input, returns -1 if none available
        c = stdscr.getch()
        if c != -1:
            # print numeric value
            stdscr.addstr(str(c) + ' ')
            stdscr.refresh()
            # return curser to start position
            stdscr.move(0, 0)

if __name__ == '__main__':
    curses.wrapper(main) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-11-20T00:32:05.310

好的，由于我尝试在评论中发布我的解决方案失败了，这就是我想说的。我可以使用以下代码从本机 Python（在 Windows 上，但在其他任何地方都没有）做我想要的事情：

```
import msvcrt 

def kbfunc(): 
   x = msvcrt.kbhit()
   if x: 
      ret = ord(msvcrt.getch()) 
   else: 
      ret = 0 
   return ret 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2009-09-20T01:47:23.303

```
import sys
import select

def heardEnter():
    i,o,e = select.select([sys.stdin],[],[],0.0001)
    for s in i:
        if s == sys.stdin:
            input = sys.stdin.readline()
            return True
    return False 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-12-11T06:31:18.320

这些答案都不适合我。这个包，pynput，正是我需要的。

[https://pypi.python.org/pypi/pynput](https://pypi.python.org/pypi/pynput)

```
from pynput.keyboard import Key, Listener

def on_press(key):
    print('{0} pressed'.format(
        key))

def on_release(key):
    print('{0} release'.format(
        key))
    if key == Key.esc:
        # Stop listener
        return False

# Collect events until released
with Listener(
        on_press=on_press,
        on_release=on_release) as listener:
    listener.join() 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2008-11-15T23:53:49.057

从评论：

```
import msvcrt # built-in module

def kbfunc():
    return ord(msvcrt.getch()) if msvcrt.kbhit() else 0 
```

* * *

谢谢您的帮助。我最终编写了一个名为 PyKeyboardAccess.dll 的 C DLL 并访问了 crt conio 函数，导出了这个例程：

```
#include <conio.h>

int kb_inkey () {
   int rc;
   int key;

   key = _kbhit();

   if (key == 0) {
      rc = 0;
   } else {
      rc = _getch();
   }

   return rc;
} 
```

我使用 ctypes 模块（内置于 python 2.5）在 python 中访问它：

```
import ctypes
import time

# first, load the DLL
try:
    kblib = ctypes.CDLL("PyKeyboardAccess.dll")
except:
    raise ("Error Loading PyKeyboardAccess.dll")

# now, find our function
try:
    kbfunc = kblib.kb_inkey
except:
    raise ("Could not find the kb_inkey function in the dll!")

# Ok, now let's demo the capability  
while True:
    x = kbfunc()

    if x != 0:
        print "Got key: %d" % x
    else:
        time.sleep(.01) 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2019-04-15T15:13:56.460

我`kbhit`在[http://home.wlu.edu/~levys/software/kbhit.py](http://home.wlu.edu/~levys/software/kbhit.py)遇到了一个跨平台实现（进行了编辑以删除不相关的代码）：

```
import os
if os.name == 'nt':
    import msvcrt
else:
    import sys, select

def kbhit():
    ''' Returns True if a keypress is waiting to be read in stdin, False otherwise.
    '''
    if os.name == 'nt':
        return msvcrt.kbhit()
    else:
        dr,dw,de = select.select([sys.stdin], [], [], 0)
        return dr != [] 
```

确保`read()`等待字符——该函数将一直返回`True`，直到你这样做！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-11-15T03:49:45.193

你可以看看[pygame](http://books.google.com/books?id=W8T2f7F_rs0C&pg=PA147&lpg=PA147&dq=pygame+keyboard+polling&source=web&ots=Chhw92jDrx&sig=lavBFmwAUzB06J5er8T-AHN4eWs&hl=en&sa=X&oi=book_result&resnum=1&ct=result)如何处理这个来窃取一些想法。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-03-19T15:34:29.197

我用它来检查按键，再简单不过了：

```
#!/usr/bin/python3
# -*- coding: UTF-8 -*-

import curses, time

def main(stdscr):
    """checking for keypress"""
    stdscr.nodelay(True)  # do not wait for input when calling getch
    return stdscr.getch()

while True:
    print("key:", curses.wrapper(main)) # prints: 'key: 97' for 'a' pressed
                                        # '-1' on no presses
    time.sleep(1) 
```

虽然 curses 不能在 Windows 上运行，但有一个“unicurses”版本，据说可以在 Linux、Windows、Mac 上运行，但我无法让它工作

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-08-28T07:14:18.277

这可以使用 python 中的“pynput”模块来完成，你按下一个键，它就会被打印出来。就这么简单！

1.  PIP 在命令提示符下安装模块，输入以下文本并按回车

    `pip install pynput`

2.  运行以下代码：

    ```
    from pynput.keyboard import Key, Listener

    def pressed(key):
        print('Pressed:',key)

    def released(key):
        print('Released:',key)
        if key == Key.enter:
            # Stop detecting when enter key is pressed
            return False

    # Below loop for Detcting keys runs until enter key is pressed
    with Listener(on_press=pressed, on_release=released) as detector:
        detector.join() 
    ```

3.  `Key.enter`您可以通过在代码的第 8 行更改为其他键来使用您想要的任何键结束循环。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-27T14:22:43.990

另一种选择是使用[sshkeyboard](https://sshkeyboard.readthedocs.io/en/latest/index.html)库来启用对按键的反应，而不是定期轮询它们，并且可能会丢失按键：

```
from sshkeyboard import listen_keyboard, stop_listening

def press(key):
    print(f"'{key}' pressed")
    if key == "z":
        stop_listening()

listen_keyboard(on_press=press) 
```

简单`pip install sshkeyboard`地使用它。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2015-07-31T20:18:05.790

如果结合 time.sleep、threading.Thread 和 sys.stdin.read，您可以轻松地等待指定的输入时间然后继续，这也应该是跨平台兼容的。

```
t = threading.Thread(target=sys.stdin.read(1) args=(1,))
t.start()
time.sleep(5)
t.join() 
```

您也可以将其放入这样的函数中

```
def timed_getch(self, bytes=1, timeout=1):
    t = threading.Thread(target=sys.stdin.read, args=(bytes,))
    t.start()
    time.sleep(timeout)
    t.join()
    del t 
```

虽然这不会返回任何东西，但您应该使用多处理池模块，您可以在这里找到：[如何从 python 中的线程获取返回值？](https://stackoverflow.com/questions/6893968/how-to-get-the-return-value-from-a-thread-in-python)

# groovy - Groovy grep 一个单词

> ID：292097
> 
> 赞同：3
> 
> 时间：2008-11-15T03:30:36.810
> 
> 标签：groovy, grep

我想为java进程grep然后找到使用的最大堆内存。我试过这个

```
def ex =['sh','-c','ps -aef | grep Xmx']
String str =  ex.execute().text 
```

虽然`str`有类似*java -Xmx1024M /kv/classes/bebo/ -Xms512M* 如何提取值*1024M*？我打算使用 java regex，但认为有人可能知道 groovy 中的一种很酷的方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T17:39:38.170

这是一个不需要 grep （或 sed :) 的 groovy 版本：

```
("ps -aef".execute().text =~ /.*-Xmx([0-9]+M).*/).each { full, match -> println match } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T07:55:24.170

在 Java 中：

```
String ResultString = null;
Pattern regex = Pattern.compile("-Xmx(\\d+M)");
Matcher regexMatcher = regex.matcher(str);
if (regexMatcher.find()) {
    ResultString = regexMatcher.group(1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T09:22:47.970

如果你想要的只是 Xmx 之后的值，你可以从 ex 中返回给你：

```
def ex =['sh','-c',"ps -aef | grep Xmx | sed -e 's/^.*Xmx\([0-9]*[mM]*\) *$/\1/'"]; 
String str = ex.execute().text; 
```

sed 命令将在返回之前将 ps 的输出转换为 ps 的输出。

# vb6 - VB 6：如何执行 .bat 文件，但要等到它完成运行后再继续？

> ID：292098
> 
> 赞同：4
> 
> 时间：2008-11-15T03:30:46.497
> 
> 标签：vb6, batch-file

VB 6：如何执行 .bat 文件，但要等到它完成运行后再继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T03:37:52.300

您将需要在 SHELLEXECUTEINFO 结构中从 ShellExecuteEx 返回的进程句柄上使用对[ShellExecuteEx和 WaitForSingleObject 的 Win32 API 调用。](http://msdn.microsoft.com/en-us/library/bb762154(VS.85).aspx)这是我从项目中提取的旧代码。它可以 100% 工作，但我可能没有包含所有依赖项。您应该能够根据您的要求进行编辑：

```
 Type SHELLEXECUTEINFO
                cbSize As Long
                fMask As Long
                hwnd As Long
                lpVerb As String
                lpFile As String
                lpParameters As String
                lpDirectory As String
                nShow As Long
                hInstApp As Long
                '  Optional fields'
                lpIDList As Long
                lpClass As String
                hkeyClass As Long
                dwHotKey As Long
                hIcon As Long
                hProcess As Long
        End Type

        Public Declare Function ShellExecuteEx Lib "shell32.dll" 
            (lpExecInfo As SHELLEXECUTEINFO) As Long

        Public Declare Function apiShellExecute Lib "shell32.dll" _
            Alias "ShellExecuteA" _
            (ByVal hwnd As Long, _
            ByVal lpOperation As String, _
            ByVal lpFile As String, _
            ByVal lpParameters As String, _
            ByVal lpDirectory As String, _
            ByVal nShowCmd As Long) _
                As Long

        Declare Function WaitForSingleObject Lib "kernel32" 
             (ByVal hHandle As Long, ByVal dwMilliseconds As Long) As Long

        Public Const SEE_MASK_NOCLOSEPROCESS As Long = &H40
        Public Const SEE_MASK_FLAG_DDEWAIT As Long = &H100

        '***App Window Constants***'
        Public Const WIN_NORMAL = 1         'Open Normal'
        Public Const WIN_MAX = 2            'Open Maximized'
        Public Const WIN_MIN = 3            'Open Minimized'

        '***Error Codes***'
        Private Const ERROR_SUCCESS = 32&
        Private Const ERROR_NO_ASSOC = 31&
        Private Const ERROR_OUT_OF_MEM = 0&
        Private Const ERROR_FILE_NOT_FOUND = 2&
        Private Const ERROR_PATH_NOT_FOUND = 3&
        Private Const ERROR_BAD_FORMAT = 11&

' Returns 'True' if file was opened ...'
Public Function fHandleFile(ByVal stFile As String, _
                            ByVal lShowHow As Long, _
                            ByRef stRet As String, _
                            Optional ByVal bWaitForClose As Boolean = False) As Boolean
On Error GoTo err_Handler
    Dim lRet As Long
    Dim ret As Long
    Dim lngProcessHandle As Long
    Dim varTaskID As Variant
    Dim shInfo As SHELLEXECUTEINFO
    Dim retval As Long

    'First try ShellExecute'
    With shInfo
        .cbSize = LenB(shInfo)
        .lpFile = stFile
        .nShow = lShowHow
        If bWaitForClose Then
            .fMask = SEE_MASK_FLAG_DDEWAIT + SEE_MASK_NOCLOSEPROCESS
        End If
        .lpVerb = "open"
    End With

    Call ShellExecuteEx(shInfo)
    lRet = shInfo.hInstApp

    If lRet > ERROR_SUCCESS And bWaitForClose = True Then
        lngProcessHandle = shInfo.hProcess

        Do
            retval = WaitForSingleObject(lngProcessHandle, 0)
            DoEvents
        Loop Until retval <> 258
        ret = CloseHandle(lngProcessHandle)
    End If

    fHandleFile = (lRet > 0)

exit_handler:
    Exit Function

err_Handler:
    RaiseError Err.Number, Err.Source, Err.Description
End Function 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-12-06T08:35:59.540

这是一些执行此操作的简单代码。请注意，它会泵送消息（使用 DoEvents），因此您的应用程序在等待时不会被冻结。

```
Declare Function OpenProcess Lib "kernel32" (ByVal dwDesiredAccess As Long, ByVal bInheritHandle As Long, ByVal dwProcessId As Long) As Long
Declare Function WaitForSingleObject Lib "kernel32" (ByVal hHandle As Long, ByVal dwMilliseconds As Long) As Long
Declare Function CloseHandle Lib "kernel32" (ByVal hObject As Long) As Long

Private Const SYNCHRONIZE = &H100000
Private Const WAIT_TIMEOUT As Long = &H102&

Private Sub RunCommandLine(sCmdLine As String)

    Dim nProcessID      As Long
    Dim hProcess        As Long
    Dim nResult         As Long

    nProcessID = Shell(sCmdLine, vbNormalNoFocus)

    If nProcessID <> 0 Then

        hProcess = OpenProcess(SYNCHRONIZE, 0, nProcessID)

        If hProcess <> 0 Then
            Do

                DoEvents
                nResult = WaitForSingleObject(hProcess, 50)

            Loop Until nResult <> WAIT_TIMEOUT Or m_bStop
            CloseHandle hProcess

        End If
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T17:36:27.927

同样，使用内在的 Shell() 函数：

```
Private Const INFINITE = &HFFFF
Private Const SYNCHRONIZE = &H100000
Private Const PROCESS_QUERY_INFORMATION = &H400

Private Declare Function CloseHandle Lib "kernel32" ( _
    ByVal hObject As Long) As Long

Private Declare Function GetExitCodeProcess Lib "kernel32" ( _
    ByVal hProcess As Long, _
    lpExitCode As Long) As Long

Private Declare Function OpenProcess Lib "kernel32" ( _
    ByVal dwDesiredAccess As Long, _
    ByVal bInheritHandle As Long, _
    ByVal dwProcessId As Long) As Long

Private Declare Function WaitForSingleObject Lib "kernel32" ( _
    ByVal hHandle As Long, _
    ByVal dwMilliseconds As Long) As Long

Private Function SyncShell( _
    ByVal PathName As String, _
    ByVal WindowStyle As VbAppWinStyle) As Long
    'Shell and wait.  Return exit code result, raise an
    'exception on any error.
    Dim lngPid As Long
    Dim lngHandle As Long
    Dim lngExitCode As Long

    lngPid = Shell(PathName, WindowStyle)
    If lngPid <> 0 Then
        lngHandle = OpenProcess(SYNCHRONIZE _
                             Or PROCESS_QUERY_INFORMATION, 0, lngPid)
        If lngHandle <> 0 Then
            WaitForSingleObject lngHandle, INFINITE
            If GetExitCodeProcess(lngHandle, lngExitCode) <> 0 Then
                SyncShell = lngExitCode
                CloseHandle lngHandle
            Else
                CloseHandle lngHandle
                Err.Raise &H8004AA00, "SyncShell", _
                          "Failed to retrieve exit code, error " _
                        & CStr(Err.LastDllError)
            End If
        Else
            Err.Raise &H8004AA01, "SyncShell", _
                      "Failed to open child process"
        End If
    Else
        Err.Raise &H8004AA02, "SyncShell", _
                  "Failed to Shell child process"
    End If
End Function 
```

# javascript - 浏览器中性在 javascript 中向选择元素添加选项的方式

> ID：292101
> 
> 赞同：9
> 
> 时间：2008-11-15T03:31:48.210
> 
> 标签：javascript

我刚刚学到了一些有趣的东西。IE 6 中 javascript select 对象的 add 方法只需要一个参数。[当您向它传递两个我认为是标准](http://www.w3.org/TR/1998/REC-DOM-Level-1-19981001/level-one-html.html)的参数时，它会引发错误，即使在 MSDN 站点上也有[记录。](http://msdn.microsoft.com/en-us/library/aa768859(VS.85).aspx)

我的问题是这个。对于以编程方式将选项元素添加到 javascript 中的选择元素，您的最佳实践建议是什么？

*   根据用户代理的值不同地调用 add 方法？
*   将选择对象包装在提供正确方法签名的类中？
*   使用为您执行此操作的 javascript 库（指定哪个库）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T03:54:17.587

添加新的选项类型至少适用于 IE6 及更高版本

```
function addOption(selectID, display, value)
{
  var obj = document.getElementById(selectID);
  obj.options[obj.options.length] = new Option(display, value);
} 
```

另外在 Firefox 2、3、Opera 8、9.5 和 Safari 4 中测试成功。IE4 失败:(

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-15T12:47:17.857

您可以使用 try-catch 块来执行此操作：

```
 try
    {
        //Standards compliant
        list.add(optionTag, null);
    }
    catch (err)
    {
        //IE
        list.add(optionTag);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T05:59:14.653

```
$("#selectID").addOption(value, text); 
```

使用[jQuery 选择框插件中的 addOption 函数](http://jqueryjs.googlecode.com/svn/trunk/plugins/selectboxes/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-15T13:14:48.720

我建议改用 DOM 方法。

```
document.createElement('option')
selectEl.appendChild() 
```

从来没有问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-03-30T14:59:11.730

您不应该使用 Select.add 方法，因为它在 IE 中已损坏，并且有更好的方法来动态添加选项（请参阅[http://msdn.microsoft.com/en-us/library/ms535921(VS.85 ).aspx](http://msdn.microsoft.com/en-us/library/ms535921(VS.85).aspx) )

我遇到了同样的问题，发现最好的方法是使用 Node.insertBefore 方法。这具有在所有浏览器中工作的优点，并且使元素的排序变得容易，因为您不必将元素添加为 IE 中选择列表的最后一个元素。例如，将一个选项从一个选择列表添加到另一个，以便目标列表中的选项按字母顺序排序，可以这样完成：

```
/*
adds an option to select element, alphabetically sorted according to the lower case value of the display element (option.text)
*/

function insertOptionToList(optionToInsert, targetSelectElement){

    for (var i=0;i<targetSelectElement.options.length;i++){
        var tempOptionText = targetSelectElement.options[i].text;
        if(tempOptionText.length>0 && optionToInsert.text.toLowerCase()<tempOptionText.toLowerCase()){
            targetSelectElement.insertBefore(optionToInsert,targetSelectElement[i]);
            return true;
        }
    }
    targetSelectElement.options[targetSelectElement.options.length] = optionToInsert;
    return true;                        
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-01-14T04:18:24.727

这对我有用

`$(selectID).append($('<option>'+display+'</option>').attr('value', value));`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-03T05:22:27.450

我自己使用创建选项对象的所有排列和组合进行了一些研究，我希望这是我们可以以浏览器中立的方式添加选项以进行选择的最佳方法：

```
function populateSelectField()
{

    document.frmMain.fldSelect.options.length = 0;
    document.frmMain.fldSelect.options[document.frmMain.fldSelect.options.length]=new Option("Your Value 1");
    document.frmMain.fldSelect.options[document.frmMain.fldSelect.options.length]=new Option("Your Value 2");
    document.frmMain.fldSelect.options[document.frmMain.fldSelect.options.length]=new Option("Your Value 3");
    document.frmMain.fldSelect.options[document.frmMain.fldSelect.options.length]=new Option("Your Value 4");
} 
```

由于选择字段对象是通过访问其父对象（在此代码中为“frmMain”（表单））来访问和操作的，因此任何浏览器运行代码都不会产生任何问题。

包括 IE 在内的所有浏览器都支持这一点。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-03-11T15:07:13.510

如果您想在下拉列表的**开头**添加一个选项，则应使用以下变体：

```
 try{
        list.add(optionTag, 0);
    } catch (err) {
        // Firefox is dumb for once: http://www.quirksmode.org/dom/w3c_html.html#selects
        list.add(optionTag, list.options[0]);
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-18T06:54:06.433

***（编辑：这在 IE 中不起作用，所以不推荐。）***

我通过更改 innerHTML 来做到这一点：

```
<select id="selectItem"></select>

var s=document.getElementById("selectItem");
s.innerHTML+="<option>apples</option>";
s.innerHTML+="<option>bananas</option>"; //(...etc) 
```

或者，如果您使用数组来填充下拉列表，则将其放入循环中。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-11-15T09:56:44.750

我记得，IE4 接受创建选项元素并附加它，但也许我不记得它正确！-)

# version-control - 源代码控制八诫如何现代化？

> ID：292107
> 
> 赞同：4
> 
> 时间：2008-11-15T03:35:32.977
> 
> 标签：version-control

你如何更新这个？我从未见过任何实际“签出”文件的当前团队。我也不编译。这些似乎来自分支时代之前。

1.  你应该提早入住并经常入住。当你签出一个文件时，你会激怒你的同事，并坚持要一直签到，直到未来某个时间点使用仅存在于你大脑中的变量来衡量。
2.  您永远不会签入破坏构建的代码。如果您的代码无法编译，则它不属于源代码控制存储库。
3.  当天不得带文件回家，也不得带文件出去周末度假。
4.  签入代码时，您应留下描述性注释。您无需在评论中包含您的姓名或日期，因为该信息已被跟踪。
5.  如果您签出文件并且不进行任何更改，则应使用“撤消签出”选项。当您签入与原始代码完全没有变化的代码时，这会让您的同事感到不快。
6.  您不得使用注释来“保存”已失效的代码。不要害怕，因为您删除的代码仍然存在于源代码控制代码历史记录中，并且可以在需要时进行检索。
7.  您应该使用源代码控制来不仅仅是归档代码。源代码控制存储库为技术文档、SQL 脚本以及与项目相关的其他文档和文件提供了极好的存储空间。
8.  您应该定期备份您的源代码控制数据库，并将副本存储在异地位置。

来自[http://scottonwriting.net/sowblog/posts/13581.aspx](http://scottonwriting.net/sowblog/posts/13581.aspx)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T06:34:42.897

[持续集成](http://martinfowler.com/articles/continuousIntegration.html)。

1.  维护单一源存储库
2.  自动化构建
3.  让您的构建进行自我测试
4.  每个人每天都在承诺
5.  每个提交都应该在集成机器上构建主线
6.  保持快速构建
7.  在生产环境的克隆中进行测试
8.  让任何人都能轻松获取最新的可执行文件
9.  每个人都可以看到正在发生的事情
10.  自动化部署

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T06:23:45.900

是否进行结帐取决于您使用的 VCS（版本控制系统）。如果您使用 SCCS（老派，但属于 Single Unix 规范的一部分），或者如果您使用 Atria ClearCase（来自 IBM Rational），那么锁定签出就是生活的一部分。对于更现代的系统，当您创建一个工作沙箱时，您实际上是在进行检出，但它是一种非锁定检出，不会阻止其他人从同一起点进行并发更改。

你说你不编译......我敢打赌你的代码会被某个程序读取然后采取行动。Perl 本身没有单独的编译器，但它有一个编译阶段。读取并验证 Shell 脚本。Python 和 Ruby 也是如此。该规则的现代形式可能会说：

*   无论是解释器还是编译器，您都不得签入其语言处理器不可接受的代码。如果您的代码至少在语法上不正确，则它不属于源代码控制存储库的主要分支（尽管它可能属于您的私有工作分支）。

第 3 项，关于不检查代码，基本上仍然有效。如果您将代码长时间保存在沙箱中，那么您的生活就会变得更加困难，因为您可能需要处理更多的合并，因为其他人在您的私有分支中处理相同的代码.

所有其他点在 Git 或 SVN 或 CVS 或 ... 下似乎都有效，就像它们在 SCCS 或 ClearCase 下一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-16T16:41:25.510

2008 年的更新。

1.  你应该尽早提交并**经常**提交**。**当您**破坏主分支中的构建**时，您会激怒您的同事。
2.  您永远不要签入**构建机器人不接受**的代码。
3.  **不将你的分支与其他分支合并，你**一天不能回家
***   签入代码时，您应留下描述性注释。您无需在评论中包含您的姓名或日期，因为该信息已被跟踪。*   删除！*   您不得使用注释来“保存”已失效的代码。不要害怕，因为您删除的代码仍然存在于源代码控制代码历史记录中，并且可以在需要时进行检索。*   您应该使用源代码控制来不仅仅是归档代码。源代码控制存储库为技术文档、SQL 脚本以及与项目相关的其他文档和文件提供了极好的存储空间。**您甚至可以使用 SVN 插件对 OpenOffice 文档进行源代码控制***   您应该虔诚**地将您的分支镜像到备份服务器上**。**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T03:41:09.800

有什么可以“现代化”？我没有看到任何与 COBOL 或 Ada 相关的内容......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T03:42:15.397

为什么他们**需要**现代化？恕我直言，它们现在看起来和写它们的那天一样重要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-15T03:45:51.163

由于大多数现代源代码控制系统都允许并发签出，我可以看到 (3) 可以放宽的地方，尽管在晚上签入以便备份仍然是一个好主意。TFS 允许您搁置待处理的更改，以便在您的代码中断构建但您想在晚上离开之前签入时保存更改而无需真正签入。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T06:43:59.167

*当天不得带文件回家，也不得带文件出去周末度假。*

*如果您签出文件并且不进行任何更改，则应使用“撤消签出”选项。当您签入与原始代码完全没有变化的代码时，这会让您的同事不快*

*您应该定期备份您的源代码控制数据库，并将副本存储在异地位置。*

如果你不得不担心这些，那么你的 SCM 就充满了失败。[得到一个更好的](http://git.or.cz)。

其余的都是很好的想法......

# c++ - 每当调用 malloc/free 时输出到 stderr

> ID：292109
> 
> 赞同：4
> 
> 时间：2008-11-15T03:38:16.607
> 
> 标签：c++, linux, memory, malloc, valgrind

使用 Linux/GCC/C++，我想在调用 malloc/free/new/delete 时向 stderr 记录一些内容。我正在尝试了解库的内存分配，因此我想在运行单元测试时生成此输出。我使用 valgrind 进行内存泄漏检测，但我找不到一个选项来让它只是日志分配。

有任何想法吗？我正在寻找最简单的解决方案。重新编译库不是一种选择。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-11-15T04:17:00.053

您可以使用 ltrace 跟踪对 malloc/free 的调用：

```
#include <stdlib.h>

int main (void)
{
  void *ptr = malloc(10);
  free(ptr);

  return 0;
}

$ g++ test.cpp -o test
$ ltrace -e malloc,free ./test
malloc(10)                                       = 0x804a008
free(0x804a008)                                  = <void>
+++ exited (status 0) +++ 
```

要在不重新编译的情况下跟踪新/删除调用，您可能需要使用 LD_PRELOAD 之类的东西来用您自己的版本覆盖调用，这正是[LeakTracer](http://www.andreasen.org/LeakTracer/)所做的，它可能会做您想做的事情。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-15T04:05:34.180

[这篇文章](http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=40)（向下滚动到底部）提供了关于如何在 C++ 中覆盖全局`new`和`delete`运算符的非常清晰和简洁的描述（请注意，它没有提供 的示例`new[]`，但在概念上是相似的）。

至于覆盖 malloc 和 free，由于您正在使用 Linux 和 GCC，因此最简单的方法是使用`malloc_hook`and `free_hook`. [这](http://linux.about.com/library/cmd/blcmdl3_malloc_hook.htm)是对这些功能如何工作的很好的描述。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-11-14T20:48:11.280

[`malloc_hook(3)`](http://linux.die.net/man/3/malloc_hook)允许你全局插入你自己的`malloc`函数。（还有`__realloc_hook` `__free_hook`等等，为了简单起见，我只是把它们排除在外。）

```
#include <stdio.h>
#include <malloc.h>

static void *(*old_malloc_hook)(size_t, const void *);

static void *new_malloc_hook(size_t size, const void *caller) {
    void *mem;

    __malloc_hook = old_malloc_hook;
    mem = malloc(size);
    fprintf(stderr, "%p: malloc(%zu) = %p\n", caller, size, mem);
    __malloc_hook = new_malloc_hook;

    return mem;
}

static void init_my_hooks(void) {
    old_malloc_hook = __malloc_hook;
    __malloc_hook = new_malloc_hook;
}

void (*__malloc_initialize_hook)(void) = init_my_hooks; 
```

```
$ cat >mem.c <<'EOF'
 *（上面的代码）*
EOF
$ cc -fPIC -shared -o mem.so mem.c
$ LD_PRELOAD=./mem.so ls
0x7ffc14931adc：malloc(5) = 0xb40010
0x7ffc1492c6b0：malloc(120) = 0xb40030
0x7ffc1497f61a：malloc(12) = 0xb40010
0x7ffc1492be38: malloc(776) = 0xb400b0
…

```

`printf`可能会调用`malloc`，这就是我们暂时撤消挂钩的原因。如果您`malloc`以任何方式钩住，请注意这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T04:06:28.157

我自己没有对此进行过测试，但我很确定这些会起作用：

*   由于您不想重新编译库，因此提供有意义的输出（与仅“新调用 23 个字节”相比）可能需要获取堆栈跟踪。我记得使用函数来导航堆栈，但我现在找不到它们。也许调用 system() 和 pstack(1) 可以解决问题。

*   您可以重新定义 operator new 和 delete，并将这个新定义放在 std c++ 库之前。这可能无法捕获来自相关库正在使用的容器和标准组件的调用。这将需要重新链接。

*   使用可以使用 LD_PRELOAD 来动态改变操作符 new 和 delete。如果您的应用程序是动态链接的，则不需要重新链接。

希望这些指点有所帮助，对不起，我没有食谱。

# c++ - 有什么理由不让成员函数成为虚拟的吗？

> ID：292124
> 
> 赞同：24
> 
> 时间：2008-11-15T03:57:11.887
> 
> 标签：c++, oop, virtual-functions

有什么真正的理由**不在**C++ 中将成员函数设为虚拟吗？当然，总是有性能争论，但在大多数情况下似乎并不成立，因为虚函数的开销相当低。

另一方面，我已经被咬过几次忘记将一个*应该*是虚拟的函数虚拟化。这似乎是一个比性能更大的论点。那么有什么理由不让成员函数默认为虚拟的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-11-15T04:26:52.513

阅读您的问题的一种方法是“为什么 C++ 默认情况下不使每个函数都成为虚拟函数，除非程序员覆盖该默认值。” 无需咨询我的“C++ 的设计和演变”副本：这将为每个类增加额外的存储空间，除非每个成员函数都被设为非虚拟。在我看来，这将需要在编译器实现方面付出更多努力，并通过为痴迷于性能的人提供素材来减缓 C++ 的采用（我认为自己属于那个群体。）

阅读您的问题的另一种方法是“为什么 C++ 程序员不使每个函数都成为虚拟函数，除非他们有充分的理由不这样做？” 性能借口可能是原因。根据您的应用程序和域，这可能是一个很好的理由，也可能不是。例如，我团队的一部分人在市场数据行情公司工作。在单个流上每秒超过 100,000 条消息时，虚函数开销将是不可接受的。我团队的其他部分在复杂的交易基础设施中工作。在这种情况下，使大多数功能虚拟化可能是一个好主意，因为额外的灵活性胜过微优化。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2008-11-15T04:29:56.643

该语言的设计者 Stroustrup[说](http://www.research.att.com/%7Ebs/bs_faq2.html#virtual)：

> 因为许多类并非设计为用作基类。例如，请参阅[类 complex](http://www.research.att.com/%7Ebs/bs_faq2.html#data-in-class)。
> 
> 此外，具有虚函数的类的对象需要虚函数调用机制所需的空间——通常每个对象一个字。这种开销可能很大，并且会妨碍与来自其他语言（例如 C 和 Fortran）的数据的布局兼容性。
> 
> 有关更多设计原理，请参阅 C++ 的设计和演变。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-11-15T13:59:56.697

有几个原因。

首先，性能：是的，单独来看，虚函数的开销相对较低。但它也阻止了编译器内联，这是 C++ 中优化的一个*巨大*来源。C++ 标准库的性能和它一样好，因为它可以内联它所包含的几十个和几十个小的单行代码。此外，具有虚拟方法的类不是 POD 数据类型，因此有很多限制适用于它。它不能仅仅通过 memcpy'ing 来复制，它会变得更昂贵，并且占用更多空间。一旦涉及到非 POD 类型，很多事情就会突然变得非法或效率降低。

其次，良好的 OOP 实践。类的重点在于它进行了某种抽象，隐藏了其内部细节，并提供了保证“这个类会表现得如此如此，并且将始终保持这些不变量。它*永远不会*处于无效状态” . *如果您允许其他人覆盖任何*成员函数，这将很难实现。您在类中定义的成员函数用于确保保持不变式。如果我们不关心这一点，我们可以将内部数据成员公开，让人们随意操纵它们。但是我们希望我们的类是一致的。这意味着我们必须指定其公共接口的行为。这可能涉及*特定的*可定制性点，通过使单个函数成为虚拟的，但它几乎总是涉及使大多数方法成为非虚拟的，以便它们可以完成确保保持不变性的工作。非虚拟界面习语就是一个很好的例子： [http ://www.gotw.ca/publications/mill18.htm](http://www.gotw.ca/publications/mill18.htm)

第三，通常不需要继承，尤其是在 C++ 中。在许多情况下，模板和泛型编程（静态多态）比继承（运行时多态）做得更好。是的，你有时仍然需要虚拟方法和继承，但它肯定不是默认的。如果是，那么你做错了。使用语言，而不是试图假装它是别的东西。它不是 Java，而且与 Java 不同，在 C++ 中继承是例外，而不是规则。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-11-15T13:20:24.623

我将忽略性能和内存成本，因为我无法在“一般”情况下测量它们......

具有虚拟成员函数的类是非 POD。因此，如果您想在依赖于 POD 的低级代码中使用您的类，那么（除其他限制外）任何成员函数都必须是非虚拟的。

您可以使用 POD 类的实例可移植地做的事情的示例：

*   用 memcpy 复制它（前提是目标地址有足够的对齐）。
*   使用 offsetof() 访问字段
*   通常，将其视为 char 序列
*   ……嗯
*   就是这样。我确定我忘记了什么。

人们提到的其他我同意的事情：

*   许多类不是为继承而设计的。将他们的方法设为虚拟会产生误导，因为这意味着子类可能想要覆盖该方法，并且不应该有任何子类。

*   许多方法并非旨在被覆盖：同样的事情。

此外，即使打算对事物进行子类化/覆盖，它们也不一定用于运行时多态性。偶尔，尽管 OO 最佳实践说了什么，但您想要继承的是代码重用。例如，如果您使用 CRTP 进行模拟动态绑定。因此，您再次不想暗示您的类将通过将其方法设置为虚拟来很好地使用运行时多态性，而这些方法绝不应该以这种方式调用。

总之，旨在为运行时多态性覆盖的东西应该被标记为虚拟的，而不应该被标记的东西。如果您发现几乎所有的成员函数都是虚拟的，那么除非有理由不这样做，否则将它们标记为虚拟。如果您发现您的大多数成员函数都不是虚拟的，那么不要将它们标记为虚拟，除非有这样做的理由。

在设计公共 API 时，这是一个棘手的问题，因为将一个方法从一个转换到另一个是一个破坏性的变化，所以你必须在第一时间把它做好。但是在拥有任何用户之前，您不一定知道您的用户是否想要“变形”您的类。哼哼。定义抽象接口和完全禁止继承的 STL 容器方法是安全的，但有时需要用户进行更多输入。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-15T04:27:39.160

以下帖子主要是意见，但这里有：

面向对象设计是三件事，封装（信息隐藏）是其中的第一件事。如果一个类设计在这方面不够扎实，那么剩下的就不是很重要了。

之前已经说过“继承破坏封装”（Alan Snyder '86），关于这一点的很好的讨论出现在四人组设计模式书中。一个类应该被设计成以一种非常具体的方式支持继承。否则，您就有可能被继承人滥用。

我会打个比方，让你所有的方法都是虚拟的，就像让你的所有成员都公开一样。有点牵强，我知道，但这就是我使用“类比”这个词的原因

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-15T05:03:09.837

在设计类层次结构时，编写一个不应被覆盖的函数可能是有意义的。一个例子是，如果您正在执行“模板方法”模式，其中您有一个调用多个私有虚拟方法的公共方法。您不希望派生类覆盖它；每个人都应该使用基本定义。

没有“final”关键字，因此与其他开发人员交流不应覆盖方法的最佳方式是使其成为非虚拟方法。（除了容易被忽略的评论）

在类级别，使析构函数为非虚拟表示该类不应用作基类，例如 STL 容器。

使方法成为非虚拟方法可以传达应该如何使用它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-15T05:44:50.580

Non-Virtual Interface 习惯用法使用非虚拟方法。欲了解更多信息，请参阅 Herb Sutter“虚拟”文章。

[http://www.gotw.ca/publications/mill18.htm](http://www.gotw.ca/publications/mill18.htm)

以及对 NVI 成语的评论：

[http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.3](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.3) [http://accu.org/index.php/journals/269](http://accu.org/index.php/journals/269) [见小节]

# .net - 托管复杂的在线服务

> ID：292127
> 
> 赞同：2
> 
> 时间：2008-11-15T04:04:13.480
> 
> 标签：.net, service, hosting, startup

我有一个基于 Web 的服务的想法。实现非常复杂。用户会很少，流量也会相当低，但服务器端代码可能需要大量资源。理想情况下，我需要尽可能多地控制服务器。

当需要向公众发布时，我应该如何安排托管？

我应该从自己的服务器自己进行托管吗？麻烦的是，由于我不是 .NET 托管方面的专家，因此可能需要时间来学习，而且我可能会犯大错。

使用托管公司的麻烦在于，他们可能会窃取我的想法，否则可能会花费很多。因为我是一家没有资金的初创公司，所以我没有很多钱可以投入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T04:18:07.820

大多数信誉良好的托管商对客户的商业理念没有真正的兴趣，因为他们从事托管业务。任何窃取商业创意的主机如果越过这条线，就会很快失去声誉。

与提供专用服务器的公司交谈，并与他们一起讨论您的要求。

在不知道您的解决方案的功能以及它有什么特殊需求的情况下，您将不会很幸运地在 SO 上获得合格的答案。因此，也许在不赠送皇冠珠宝的情况下概述您正在做的事情。

**更新：**对....这里有很多关于主机商窃取客户商业创意的 FUD。我从事托管业务，并且已经这样做了 10 多年....

专业的托管商真的对您的商业想法不感兴趣......他们从事提供托管服务的业务，而不是构建下一个 StackOverflow 或 Amazon 或 EBay 或其他任何东西。当 Jeff 提到这个项目的想法时，你真的认为 CrystalTech（主持 SO）认为“哦，我们可以这样做并做一堆”？不......他们做托管。

许多专业的托管商都有转销商计划，而那些非常小心的托管商不会通过粗制滥造的做法来侵犯其转销商的业务，例如直接联系转销商客户以窃取他们的业务。

专业的托管商有足够的能力确保他们的运营顺利进行，例如管理 100 到 1000 到 10,000 台服务器，确保备份工作，确保服务器不会在 DC 中运行，确保网络连接正常工作，确保他们得到报酬等。

专业的托管服务商通常有员工提供增值服务，例如咨询和技术支持，以帮助*您*的客户将您的商业理念付诸实践，尽管您的商业理念可能很吸引人，但这就是他们的员工所从事的全部工作。如果您真的很担心，请在与他们交谈之前让他们签署 NDA。我在我的时间里签了很多合同，并且看到一些很棒的企业起步并赚了很多钱……但是……这些企业不是我的专业领域……因为猜猜看…… .hosters 提供托管服务。

我工作的公司于 1998 年开始从事托管业务，当时是一家大型美国托管商的经销商，当时我们有 10 台专用服务器，其中 3 台共享并赚取大量现金，每月 15 美元一个服务器大约有 600 个站点的站点。利润率非常丰厚……他们偷了我们的生意吗？……不。

所以我对 Jonathon 的建议是去和一个好的主持人谈谈，讨论一下，获得专家的建议。

托管商进行托管，我们对出售馅饼或小部件或成为下一个浮华的 Web 2.0 想法的下一个风险投资宠儿不感兴趣。

干杯
凯夫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T04:43:06.850

设置一些 Amazon EC2 实例也是一种选择，您仍然需要自己进行所有管理，但至少您不必担心物理硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T04:16:26.793

许多托管服务提供商能够为您提供专用服务器或 VPS（虚拟专用服务器），您可以在其中在共享硬件上运行虚拟机。我过去曾使用[HostMySite](http://www.hostmysite.com/)进行 VPS，服务非常好。专用主机和 VPS 主机的成本远高于共享主机，但可能比购买自己的硬件、在高速骨干网中运行、处理备份、气候控制、停电发电机等更安全。

**更新：**

我错过了有关托管公司窃取您的想法的部分。有人会接受你的想法，但只有想法是毫无价值的......这都是关于执行的，我不认为你的托管公司的人会直接复制你的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T04:16:31.693

如果您的想法不错，那么您敢打赌，无论您如何托管它，很多（我不一定指网络托管公司）都会尝试复制它。此外，没有任何网络托管公司允许您在共享基础架构上托管需要大量资源的应用程序，因此无论如何您都必须在自己的专用服务器上进行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T04:17:28.837

也许您应该看看 Windows Azure 平台。目前我对价格一无所知，但如果您的应用程序需要扩展（以透明的方式），它可能是一个很好的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T04:35:25.273

您可以使用托管设施代替网络托管公司，将您的服务器放置在他们的机架空间中，它们提供电力和带宽。如果您选择不让他们出于紧急和备份目的访问该框，那么他们对服务器内容的访问权限不会超过公众访问权限。

我是[波士顿 Linux 和 UNIX 小组](http://www.blu.org)的一名官员，我们有半个机架，其中包含三台服务器和磁带备份单元。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T05:33:23.427

你想在 IIS 上托管 .NET 是吗？什么是“大量资源”（内存、带宽、数据库、cpu）？一个简单且便宜的共享虚拟主机帐户会有什么问题？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-04-24T03:15:12.790

当您说“基于网络的服务”时，您是指通过网络或全新的“YouTube/Facebook”（只是基于网络的服务的示例）转换成更经济的东西的“现实生活服务”吗？ ?

我想弄清楚的是，你第一次运行真正需要什么样的“设置”。

我将从您购买的“本地版本”开始，并且应该购买额外的 PC/旧桌面。然后，您从 Microsoft 注册 Websparks，这将使您能够获得开发许可证。服务器和 VisualStudio...然后您在安装和配置它时获得一些经验，并且一旦您准备好，您就可以使用它来在线移动服务。

要测试此设置，您所要做的就是将端口 80 (http) 转发到您的私有路由器/ADSL（家庭互联网连接）或您在开发时要放置此服务的任何地方。

一旦您有一些朋友从外部对其进行了测试并且一切都开始顺利进行，那么请看看某种专业的托管服务。我个人会推荐 Amazon EC2 或 Microsoft Azure 之类的东西。有更多的云托管设施。它们并不是那么便宜，但它们承诺更高的带宽和稳定性......

不确定我是否真的会相信，所以由于我不知道你的“真实想法”，我会先坚持使用本地开发版本。这也非常适合之后测试新想法和原型设计。因为一旦您使用 .NET 网站上线，您将需要一个“离线”版本，您也可以在上面进行开发。每次您上传新文件时，网站都必须重新编译，这会使在线用户体验缓慢的页面或丢失他们的 sessiondata = relogin，这对用户来说非常烦人。

告诉 os 更多“细节”——不是想法，而是告诉我们更多关于您对带宽、CPU 能力、RAM、SQL 数据库等的计算……然后我们可能会帮助您确定哪种方法是最好的。

# c# - 什么是学习泛型的最佳教程/地方

> ID：292132
> 
> 赞同：4
> 
> 时间：2008-11-15T04:07:22.633
> 
> 标签：c#, .net, generics

我有一个初级开发人员团队，他们希望更好地理解和使用泛型。任何人都推荐好的教程或文章样本，这些都是很好的起点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T04:18:11.363

几个链接：

*   [C# 泛型简介](http://msdn.microsoft.com/en-us/library/ms379564(vs.80).aspx)
*   [泛型（C# 编程指南）](http://msdn.microsoft.com/en-us/library/512aeb7t(VS.80).aspx)

推荐书籍：

*   [专业的 .NET 2.0 泛型](https://rads.stackoverflow.com/amzn/click/com/0764559885)
*   [深入了解 C#](https://rads.stackoverflow.com/amzn/click/com/1933988363)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T04:58:39.487

[Bill Wagner's](http://srtsolutions.com/blogs/billwagner/default.aspx) [More Effective C#](https://rads.stackoverflow.com/amzn/click/com/0321485890)有一些关于泛型的非常好的内容。

# iphone - 有人知道 iPhone 上是否有 5 星评级组件吗？

> ID：292137
> 
> 赞同：12
> 
> 时间：2008-11-15T04:12:58.033
> 
> 标签：iphone, cocoa-touch

在 Google 群组和其他一些网站中，有一个非常简洁的 5 星评级组件，例如在以下网址中： [http ://groups.google.com/group/Google-Picasa-Data-API/browse_thread/线程/b5a346e6429a70a7?hl=en](http://groups.google.com/group/Google-Picasa-Data-API/browse_thread/thread/b5a346e6429a70a7?hl=en)

我想知道 iPhone 环境中是否存在现有的 5 星评级组件。或者如果没有，如果有人知道从哪里开始？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2011-01-12T09:19:57.517

这是另一个开源解决方案：[https ://github.com/dlinsin/DLStarRating](https://github.com/dlinsin/DLStarRating)

![](https://i.stack.imgur.com/j1OpF.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-07-30T10:01:53.563

UIView 允许您构建 Rating 组件以提供与 iPhone 上的 AppStore 或 Youtube 应用程序相同的体验。

[http://code.google.com/p/s7ratingview/](http://code.google.com/p/s7ratingview/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-18T20:03:59.237

我会更简单。继承 UIControl 并实现 touchesBegan: touchesMoved: 和 touchesEnded: 方法。您可以通过触摸的 X 坐标确定用户按下/拖动/放开哪个星。例如：

```
CGFloat relativeTouchLocation = [event locationInView:self] / self.bounds.size.width; 
```

然后由您决定根据该值照亮哪些星星。哦，发送一个 UIControlEventValueChanged 事件。

显然，您还重写了 drawRect: 以在视图中绘制星星。

尽管上面 Jason 的解决方案可行，但您的用户将无法在控件上滑动手指来微调她的评分。这也可以让您选择进行半星或其他微调。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-15T05:05:30.253

我不知道有任何免费/可用的组件，但如果没有人提供一个和/或你找不到你喜欢的一个，那么推出你自己的应该是相当简单的。用最简单的术语来说，您只需：

1.  创建/查找星形图标 - 一个轮廓（未选中），一个填充
2.  创建一个 UIButton 并设置选中/未选中状态的图标
3.  创建一个包含 x 星的容器视图，当一个被选中时，容器可以在触摸按钮左侧的任何按钮上设置选中状态。

建造起来应该不会花很长时间...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2011-06-18T12:04:40.563

评级控制的另一种选择。这些允许您输入评级，而不仅仅是查看它。 [http://cocoacontrols.com/search?utf8=%E2%9C%93&q=rating&commit=Search](http://cocoacontrols.com/search?utf8=%E2%9C%93&q=rating&commit=Search)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-17T23:09:01.203

我可能会使用带有自定义 touchesXXX 消息的 UIView 来实现这一点，例如，用户可以触摸第一颗星并拖出四星评级。只是我的 0.02 美元。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-18T14:37:35.993

作为一般规则，如果它不在 Interface Builder 中，则它不能“免费”使用，您必须自己编写它。

对于 iPhone，Apple 还提供了易于理解的示例代码，展示了每个可用的组件以及如何使用它们。如果您在他们的代码中看不到它，则必须自己构建它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T20:51:54.707

你可以试试[DYRateView](https://github.com/dyang/DYRateView)。

我的博客上有一个关于如何在您的项目中使用 DYRateView 的教程：http: [//iappexperience.com/post/23227218867/dyrateview-a-simple-yet-powerful-rating-control-for](http://iappexperience.com/post/23227218867/dyrateview-a-simple-yet-powerful-rating-control-for)。

[![图片](https://i.stack.imgur.com/yB6xd.png "只读视图")](https://i.stack.imgur.com/yB6xd.png "只读视图")

[![图片](https://i.stack.imgur.com/EmOAr.png "编辑视图")](https://i.stack.imgur.com/EmOAr.png "编辑视图")

# c# - 在 Vista 上从 NT 服务运行时，从 Excel COM 对象访问文件失败

> ID：292150
> 
> 赞同：6
> 
> 时间：2008-11-15T04:22:33.850
> 
> 标签：c#, .net, com, windows-vista, vbscript

我们使用 COM 对象来访问 NT 服务中的 excel 电子表格（通过 Windows 脚本主机）。在 Vista 之前，这很好用，但从 Vista 开始，我们收到此错误：

Microsoft Office Excel 无法访问文件“c:\myfiles\test.xls”。有几个可能的原因：

*   文件名或路径不存在。
*   该文件正被另一个程序使用。
*   您尝试保存的工作簿与当前打开的工作簿同名。

我尝试更改 NT 服务登录设置以使用我自己的帐户、管理员帐户和本地系统。我查看了本地安全策略，但没有找到任何东西。我花了几天时间搜索 Microsoft KB 无济于事。

如果脚本是从控制台应用程序执行的，它可以正常工作。该文件打开并处理没有问题。该错误仅在从服务的上下文中执行时发生。

如果该服务在 Windows XP 或 Server 2003 SP1 上运行，它也可以正常工作。只有在 Vista 上它才会失败（我们现在已经收到了在 Server 2003 SP2 中失败的报告）！

代码非常简单：

```
dim xl_app
Set xl_app = CreateObject("Excel.Application")
xl_app.Workbooks.Open mypath,0,1 
```

我怀疑这个人可能遇到了同样的问题： [http://bytes.com/forum/thread819740.html](http://bytes.com/forum/thread819740.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-24T18:30:02.793

只是一些进一步的问题：

*   您使用的是哪个版本的 Excel？
*   您是否尝试过以提升的权限运行服务？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-01-09T23:11:15.927

我已经“有点”解决了这个问题。如果您使用“dcomcnfg”将启动 excel 应用程序的帐户更改为用户帐户或“交互式用户”，则从该服务启动的 excel 将在该帐户中启动，它现在可以访问文件系统。

问题是这是一个全局设置。如果您使用：*“此用户”：则 excel 始终以该用户打开，并且始终在会话 0 中打开时没有 UI，即使对于 excel 的交互式使用也是如此。IE它总是不可见的。*“交互式用户”：现在 excel 总是在交互式用户帐户中启动，我认为这不适用于将在启动时启动且没有交互式用户的服务。

必须对此进行一些安全设置。我希望其他人有其他想法。

# project-planning - 使用 3 点技术进行风险评估有多好

> ID：292157
> 
> 赞同：-1
> 
> 时间：2008-11-15T04:30:53.147
> 
> 标签：project-planning

使用 3 点技术进行风险评估有多好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T04:40:41.380

你是这个意思吗？[http://www.aof.mod.uk/aofcontent/tactical/risk/content/tpe.htm?zoom_highlight=simulation](http://www.aof.mod.uk/aofcontent/tactical/risk/content/tpe.htm?zoom_highlight=simulation)

如果是这样，看起来该站点是一个很好的概述和分析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T06:30:56.493

好的。此外，请查看 ACM 的[一分钟风险评估工具](http://www.acmqueue.com/figures/issue019/tiwana1.gif)，该工具指定了 6 个风险因素。这是该文章的[介绍](http://www.dynamicalsoftware.com/cgi-bin/ViewBlogEntry.pl?id=9)。

# visual-studio - Visual Studio 中方法的代码片段

> ID：292164
> 
> 赞同：66
> 
> 时间：2008-11-15T04:45:32.633
> 
> 标签：visual-studio, code-snippets

在 Visual Studio 中，我可以输入例如

> 为了`TAB` `TAB`

并弹出一个代码片段。

是否也有用于私有、公共等方法的内置代码片段？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2008-11-15T04:57:21.877

*ctor* : 默认构造函数

*道具*：属性

*propg* : 只读属性

*sim* :`static int main`方法

*svm*：`static void main`方法

[这里](http://www.developer.com/net/net/article.php/3557701/Introducing-Visual-Studio-2005-IntelliSense-Code-Snippets.htm)有一个很好的清单。如果您想自己制作，[Snippet Designer](https://github.com/mmanela/snippetdesigner)非常好。

[以下是 Visual Studio 2017 的所有 Visual C# 代码片段](https://docs.microsoft.com/en-us/visualstudio/ide/visual-csharp-code-snippets)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2015-04-23T13:22:27.463

**您可以将方法片段下载为[Visual Studio Extension](https://visualstudiogallery.msdn.microsoft.com/d4e9939d-baac-43d4-bece-960eb57e02c1?SRC=VSIDE)。**

它支持以下内容：

```
method (typical method)

vmethod (virtual method)

smethod (static method)

xmethod (extension method) 
```

1.  在 Visual Studio 中，转到菜单*工具*→*扩展和更新...*

2.  观察*扩展和更新*窗口

3.  在搜索字段中输入“C# Methods Code Snippets”（右上角）

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-03-14T05:29:35.293

如果您想查看所有可用*片段*的列表：

*   按**`Ctrl`+`K`**然后**`Ctrl`+`X`**

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-10-08T12:32:40.723

以下是我用于为 Visual Studio 2010 创建自定义片段的步骤，但这些步骤适用于 Visual Studio 2008。

创建一个名为*method.snippet*的新文本文件并粘贴以下内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<CodeSnippets  xmlns="http://schemas.microsoft.com/VisualStudio/2005/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
            <Title>method</Title>
            <Shortcut>method</Shortcut>
            <Description>Code snippet for method</Description>
            <Author>Kevin Hogg</Author>
            <SnippetTypes>
                <SnippetType>Expansion</SnippetType>
            </SnippetTypes>
        </Header>
        <Snippet>
            <Declarations>
                <Literal>
                    <ID>methodname</ID>
                    <ToolTip>Method name</ToolTip>
                    <Function>MethodName()</Function>
                    <Default>MethodNamePlaceholder</Default>
                </Literal>
            </Declarations>
            <Code Language="csharp"><![CDATA[public void $methodname$ ()
    {
        $end$
    }]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

将您的文件复制到 Windows 资源管理器中的片段文件夹中：

*   Visual Studio 2010：C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC#\Snippets\1033\Visual C#
*   Visual Studio 2008：C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC#\Snippets\1033\Visual C#

保存文件后，代码片段会自动加载，因此您现在可以打开 Visual Studio 并键入：

```
method<tab><tab> 
```

*其中 <tab> 是`Tab`键盘上的键。

您现在应该看到创建了以下内容，其中 MethodNamePlaceholder 突出显示，以便您可以更改名称。

```
public void MethodNamePlaceholder()
{

} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-09-22T04:48:31.023

我使用的一些片段（也在 MSDN 中提到）如下：

> 1.  ' **#if** 创建一个#if 指令和一个#endif 指令。
> 2.  ' **#region** 创建一个#region 指令和一个#endregion 指令。
> 3.  **~** 为包含的类创建一个析构函数。
> 4.  **属性** 为派生自 Attribute 的类创建声明。
> 5.  **checked** 创建一个选中的块。
> 6.  **class** 创建一个类声明。
> 7.  **ctor** 为包含的类创建一个构造函数。
> 8.  **cw** 创建对 WriteLine 的调用。
> 9.  **do** 创建一个 do while 循环。
> 10.  **else** 创建一个 else 块。
> 11.  **enum** 创建一个枚举声明。
> 12.  **equals** 创建一个覆盖 Object 类中定义的 Equals 方法的方法声明。
> 13.  **异常** 为从异常派生的类创建声明（默认为异常）。
> 14.  **for** 创建一个 for 循环。
> 15.  **foreach** 创建一个 foreach 循环。
> 16.  **forr** 创建一个 for 循环，在每次迭代后递减循环变量。
> 17.  **if** 创建一个 if 块。
> 18.  **indexer** 创建索引器声明。
> 19.  **interface** 创建一个接口声明。
> 20.  **调用** 创建一个安全调用事件的块。
> 21.  **iterator** 创建一个迭代器。
> 22.  **iterindex** 使用嵌套类创建“命名”迭代器和索引器对。
> 23.  **lock** 创建一个锁块。
> 24.  **mbox** 创建对 MessageBox.Show 的调用。您可能必须添加对 System.Windows.Forms.dll 的引用。
> 25.  **namespace** 创建一个命名空间声明。
> 26.  **prop** 创建一个自动实现的属性声明。
> 27.  **propfull** 使用 get 和 set 访问器创建属性声明。
> 28.  **propg** 创建带有私有“set”访问器的只读自动实现属性。
> 29.  **sim** 创建一个静态 int Main 方法声明。
> 30.  **struct** 创建一个结构声明。
> 31.  **svm** 创建一个静态 void Main 方法声明。
> 32.  **switch** 创建一个开关块。
> 33.  **try** 创建一个 try-catch 块。
> 34.  **tryf** 创建一个 try-finally 块。
> 35.  **unchecked** 创建一个未选中的块。
> 36.  **unsafe** 创建一个不安全的块。
> 37.  **using** 创建一个 using 指令。
> 38.  **while** 创建一个while循环。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-12T17:35:39.457

我为一种方法制作了自己的片段。它的 XML 代码如下，您可以将其添加到 C:\Users\YOUR_USERNAME\Documents\Visual Studio 2012\Code Snippets\Visual C#\My 中名为“my_method.snippet”（或whatever_you_want.snippet）的文件中代码片段（你的路径可能不同，因为我使用的是 VS2012）：

```
<CodeSnippet Format="1.0.0">
    <Header>
        <Title>method</Title>
        <Shortcut>method</Shortcut>
        <SnippetTypes>
            <SnippetType>Expansion</SnippetType>
        </SnippetTypes>
    </Header>
    <Snippet>
        <Declarations>
            <Literal>
                <ID>access_modifier</ID>
                <Default>private</Default>
            </Literal>
            <Literal>
                <ID>return_type</ID>
                <Default>void</Default>
            </Literal>
            <Literal>
                <ID>name</ID>
                <Default>New_method</Default>
            </Literal>
        </Declarations>
        <Code Language="csharp">
            <![CDATA[$access_modifier$ $return_type$ $name$ ()
    {
    $end$
    }]]>
        </Code>
    </Snippet>
</CodeSnippet> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-03-26T23:34:38.727

您可以创建自定义片段。像这样：

[http://www.mediafire.com/file/gz3tzjnydk5/meth.snippet](http://www.mediafire.com/file/gz3tzjnydk5/meth.snippet)

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2008-11-15T04:48:39.820

属性的代码片段是：

> 支柱`TAB``TAB`

# python - 排除 \S 正则表达式匹配中的字符

> ID：292167
> 
> 赞同：1
> 
> 时间：2008-11-15T04:56:53.717
> 
> 标签：python, html, regex

我有以下正则表达式来匹配 html 链接：

```
<a\s*href=['|"](http:\/\/(.*?)\S['|"]> 
```

它有点工作。除了不是真的。因为它会在 <a href... 之后获取所有内容，并且继续运行。我想从最后一个 \S 匹配中排除引号字符。有没有办法做到这一点？

**编辑：**这将使它只抓取引号而不是 <a href btw 之后的所有内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T05:54:24.290

我不认为你的正则表达式正在做你想做的事。

```
<a\s*href=['|"](http:\/\/(.*?)\S['|"]> 
```

这会非贪婪地捕获从 http:// 到引号、单引号或管道之前的第一个非空格字符的任何内容。就此而言，我不确定它是如何解析的，因为它似乎没有足够的紧密括号。

如果您尝试捕获 href，您可以尝试以下操作：

```
<a .*?+href=['"](http:\/\/.*?)['"].*?> 
```

这使用 .*? （非贪婪匹配任何东西）以允许其他属性（目标、标题等）。它匹配一个以单引号或双引号开头和结尾的 href（它不区分，并允许 href 以一个开头并以另一个结尾）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T07:50:13.477

\S 匹配任何不是空白字符的字符，就像 [^\s]

这样写，你可以很容易地排除引号： [^\s"']

请注意，您可能必须提供 .*? 在您的正则表达式中进行相同的处理。点匹配任何不是换行符的字符，就像 [^\r\n]

同样，这样写，您可以轻松排除引号： [^\r\n'"]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T05:33:53.330

```
>>> import re
>>> regex = '<a\s+href=["\'](http://(.*?))["\']>'
>>> string = '<a href="http://google.com/test/this">'
>>> match = re.search(regex, string)
>>> match.group(1)
'http://google.com/test/this'
>>> match.group(2)
'google.com/test/this' 
```

解释：

```
 \s+   = match at least one white space (<ahref) is a bad link
 ["\'] = character class, | has no meaning within square brackets
         (it will match a literal pipe "|") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T05:33:39.243

您为什么要尝试将 HTML 链接与正则表达式匹配？

根据您尝试做的适当的事情会有所不同。

您可以尝试使用 HTML 解析器。有几个可用的，Python 库中甚至有一个：[https ://docs.python.org/library/htmlparser.html](https://docs.python.org/library/htmlparser.html)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T16:48:37.167

阅读 Jeff Friedl 的“掌握正则表达式”一书。

如所写：

```
<a\s*href=['|"](http:\/\/(.*?)\S['|"]> 
```

表达式中有不平衡的括号。也许问题在于第一场比赛被视为“读到正则表达式的结尾”。另外，您为什么不想要 URL 的最后一个非空格字符？

这 。*？（懒惰的贪婪）运算符很有趣。不过，我必须说，我更倾向于写：

```
<a\s+href=['|"]http://([^'"><]+)\1> 
```

这区分了“<ahref”（一个不存在的 HTML 标记）和“<a href”（一个有效的 HTML 标记）。它不捕获“http://”前缀。我不确定你是否必须避开斜线——在我主要工作的 Perl 中，我不需要。捕获部分使用贪婪匹配，但仅限于可能半合法地出现在 URL 中的字符。具体来说，它不包括引号和结束标签（而且，为了很好的衡量，开始标签也包括在内）。如果您真的想要“http://”前缀，请适当地移动捕获括号。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-01T05:00:47.930

我遇到了一些网址中的单引号问题，例如 Fox Sports 的这个。我做了一个轻微的调整，我认为应该照顾它。

[http://msn.foxsports.com/mlb/story/9152594/Fehr](http://msn.foxsports.com/mlb/story/9152594/Fehr):'Heightened'-concern-about-free-agent-market

/<a\s+href\s*=\s*["'](http://.*?)["'][>\s]/i

this requires that the closing quote be followed by a space or closing bracket.

# java - 您在 Java 中为个人/爱好项目使用什么包命名约定？

> ID：292169
> 
> 赞同：151
> 
> 时间：2008-11-15T04:58:12.997
> 
> 标签：java, naming-conventions

我已经熟悉使用域名创建唯一包名（即 package `com.stackoverflow.widgets`）的标准 Java 包命名约定。但是，我从未见过任何关于如何为个人项目选择包名的建议。我认为这是因为这确实是个人品味的问题。

那么，您如何为永远不会投入生产的个人项目选择包名称（您可能会在业余时间尝试新框架）。假设您没有可以使用其域来创建包结构的个人网站，您会（或会）做什么？你是否有一个逻辑系统来为爱好项目生成新的包名，或者你只是使用简单的一次性包名，比如`mypackage`？

因为我只是想看看不同的人对此有什么想法，所以我把它做成了一个社区维基。

就我个人而言，我从来没有考虑过太多，但我今晚想和[Wicket](http://wicket.apache.org/)一起玩，我突然想到我并不清楚我想如何组织我的爱好项目。为爱好项目（至少在我看来）一个单独的、不同的包命名约定将作为一种很好的方式来保持个人和工作相关的代码彼此清楚地分开。

我正在考虑一个简单的分层命名约定，将我的个人项目的源代码保存在一个根文件夹中：

*   `myprojects`用作根文件夹
*   附加项目名称
*   添加任何其他子包名称

因此，我的 Wicket 项目将在包中`myprojects.learningwicket`，而单元测试将在包中`myprojects.learningwicket.tests`（例如）。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-11-15T05:01:47.233

如果你只是在做没有其他人会使用代码的个人项目，那么你可以组成一个你喜欢的包名。但是不要编造以`com.`or`net.`或其他顶级域开头的东西，因为这意味着您拥有该域名（即`com.john`，仅仅因为您的名字恰好是 John 而使用作为您的包名称不是一个好主意） .

如果您要将代码提供给其他人，您应该使用全局唯一的包名，根据 Java 约定，这意味着您应该注册并使用域名。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2008-11-15T06:48:33.790

我只使用我的姓名缩写：fg.nameofproject.etc

它减少了打字。它可以随时以 sf.net 或 com 为前缀。或组织。或 com.google..

由于该项目是个人款待，因此它就像您新熨的个性化礼品衬衫一样特别 - 感觉很好。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2008-11-17T18:48:32.197

`<sarcasm>`呸。任何有自尊的程序员都会拥有自己的域名。这显然是一个棘手的问题。每个人都有自己的个人域名！`</sarcasm>`:-)

好吧，说真的，购买自定义域名可能是最简单的选择。每年大约 10 美元，您就可以找到信誉良好的提供商来托管域并转发电子邮件。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2009-02-19T08:55:15.110

```
pmurray_at_bigpond_dot_com.project.package 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2008-11-15T06:37:32.080

我的大部分爱好项目都存储在 Google Code 中，所以我只使用项目站点作为包名：`com.googlecode.donkirkby.someproject`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-15T06:41:21.010

我叫安然

通常，我使用 com.anjan

我有自己的幻想公司——有时我会使用它

sourceforge 的传统（如 hibernate 和其他软件包所示）是 net.sf.*

所以，根据你的心情，你可以去。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-15T07:16:17.807

我想你已经解决了。这里要避免的诱惑是根本不关心包名。节省一些击键很容易，因为“我只是在编写一些测试代码”。但是随后代码变得很好、有用并且很大，然后你意识到你有一个可能是一个长期存在的库或应用程序的良好开端。离开您的家庭网络的可能不是图书馆或应用程序，但关键是，您没有提前考虑。这就是丹麦计算机科学的鬼魂——总是提前思考，哪怕只是一点点。

我用于爱好代码的命名约定与您的非常相似。我有一个名为“futura”的顶级目录（这个名字出现的原因很长，很无聊），我的所有代码都挂在上面。我确实尝试将我的代码组织到包库中，即使它可能是我从未用于另一个项目的类或包。我将所有应用程序（即类中具有 void main(String[] args) 的任何应用程序）都放在 futura.app.* 文件夹中。我还尝试为我自己的代码模仿标准 Java 库包名称，尽管在某些情况下，由于我自己的喜好，我打破了惯例（例如，futura.inet 用于 Internet，而不仅仅是套接字、代码和 futura.collections 用于非-util 的东西。）套用 David Mamet 的话说：总是泛化。 **总是泛化！**

从您发布问题的态度来看，我怀疑您也同意我的最后一点：您不必将业余爱好者黑客视为企业级项目，但如果您将一些纪律带到家庭游戏中，爱好更有价值。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-02-11T16:16:40.360

我的命名：`prj.project_name`.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2009-05-31T18:06:27.247

我使用我的 OpenID URL，然后附加我的项目名称。例如，`com.myopenid.cd1.twitter`是我一直在开发的 Twitter 客户端的根包。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-16T04:45:45.923

我只是使用我的名字：surname.initials.xxx，作为简洁和避免碰撞之间的一个很好的组合。我认为如果我选择公开发布代码，这将提供一个合理的无冲突命名空间。我还编写了一个小程序，它可以重新打包整个目录树，所以我想我是否需要重新打包以发布它是非常轻松的......因此我没有在它上面浪费太多的睡眠。

在 surname.initials.xxx 之后，我将 app 用于应用程序包，将 lib 用于库包，将 tst 用于我纯粹在试验的东西。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-11-18T13:20:37.880

你对 lastname.firstname.project 怎么看？？？像 luz.marlon.project ？

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-02-19T07:20:25.823

我想过问同样的问题。到目前为止，我使用了前缀 com.tehvan，尽管我实际上并没有公司。

# c# - Visual C# 2008 中的上下文代码生成？

> ID：292171
> 
> 赞同：0
> 
> 时间：2008-11-15T04:58:33.590
> 
> 标签：c#, .net, visual-studio

我打字

```
ArrayList memberNames = new ArrayList() { "Jim", "John", "George" }; 
```

Visual Studio 告诉我找不到“ArrayList”，所以我必须手动转到文件顶部并键入

```
using System.Collections; 
```

有没有办法让 Visual Studio 自动执行此操作？

例如，在 FlashDevelop 中，您按下 CTRL-SHIFT-1，它会自动生成这些缺失的引用，这是一个不错的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T05:00:43.197

SHIFT-ALT-F10 将激活类上的智能标记，这将为您提供“使用 System.Collections”和“System.Collections.ArrayList”选项。添加使用通常需要两次击键。

编辑：似乎我有一个损坏的键盘配置文件。将组合键更新为默认值。感谢艾伦指出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T06:42:37.873

`Alt`++弹出一个带有“使用 System.Collections”和“System.Collections.ArrayList”的菜单`Shift`。`F10`

如果要查找键盘快捷键，请选择工具：选项并向下导航到环境：键盘。但是，要弄清楚他们对您正在寻找的东西的称呼可能是一个挑战。（你问的显然是 View.ShowSmartTag，对吧？）

**更新：**从评论和其他帖子中，我刚刚了解到`Ctrl`+`.`也会显示相同的菜单。我猜不是所有的键盘快捷键都出现在键盘选项对话框中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T09:19:37.120

**CTRL+。**还会激活智能标签，这可能更直观。

# c# - 如何实现堆栈？

> ID：292173
> 
> 赞同：0
> 
> 时间：2008-11-15T04:59:12.043
> 
> 标签：c#, binary, stack

如何使用 C# 中的堆栈创建程序以将二进制转换为十进制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T06:23:40.250

这是一个提示，此代码段使用堆栈将十进制整数转换为二进制，您只需反转过程：-P

```
 int num = 50;
        Stack<int> stack = new Stack<int>();
        while (num != 0)
        {
            stack.Push(num % 2);
            num /= 2;
        }

        while (stack.Count > 0)
        {
            Console.Write(stack.Pop());
        } 
```

# asp.net - 允许多个网站（不仅仅是应用程序）的 ASP.NET 共享主机提供商？

> ID：292180
> 
> 赞同：2
> 
> 时间：2008-11-15T05:07:26.333
> 
> 标签：asp.net, hosting

大多数 ASP.NET 主机在 IIS 中为您提供一个网站。然后，它们允许您将子文件夹设置为应用程序。是否有任何共享的 ASP.NET 3.5 主机可以通过一个帐户为您提供多个网站？

我有几个不使用太多带宽的低流量网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T05:52:33.857

WebHost4Life 提供此功能，但每个域收取少量费用。（15 美元/年左右）。我相信大多数房东都可以做到这一点，但费用会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-19T05:45:34.087

我将[ReliableSite.net](http://reliablesite.net/)用于一些低流量的网站。他们最便宜的共享托管计划提供无限的托管域、无限的虚拟目录以及非常合理的带宽和存储量。

无论您选择谁，您想要寻找的一个功能是[DotNetPanel](http://www.dotnetpanel.com/)作为控制面板，ReliableSite 就是这样做的。DotNetPanel 提供了一种非常接近于使用 IIS 管理器本身的体验，并且提供了几乎所有的选项。它还使您可以更好地控制文件系统结构。

*使用 ReliableSite 以及我认为的任何*共享托管站点需要注意的一件事是，如果您的站点出现流量高峰，它很容易离线。一些 java bot 不断爬取我的一个站点，并使 CPU 使用率超过预设限制。话虽如此，一旦我解释了发生的事情，ReliableSite 就为我提高了 CPU 限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-19T06:00:51.153

[我发现对于低带宽网站， http:](http://www.vpsland.com/ezwin.html) //www.vpsland.com/ezwin.html 上的低端软件包你可以控制远程桌面并加载几乎任何你想要的东西，起价为 18 美元。我与他们的唯一问题是他们的支持有点慢，而且他们的连接似乎比大多数人慢。

然后我用他们的 VPS 之一切换到 MaximumASP。我非常喜欢MaximumASP，他们的支持很棒而且他们的服务器速度很快。我对他们的唯一问题是我不能使用 MySQL，他们出于性能原因阻止了它。（使用推荐 ID：CRAB-6573）

我已经切换到莫索（[http://www.mosso.com](http://www.mosso.com)）。我爱莫索。我没有通过我的 MaximumASP 帐户获得的远程桌面获得完全访问权限（我的 Windows Sharepoint Services 站点和其他需要远程访问的站点仍然拥有该帐户。）。但是，Mosso 速度很快，支持很好，我可以在同一个域中运行 ASP.NET、PHP、Ruby on Rails 等，或者我可以拥有多个域（无需额外费用）。我唯一的问题是我发现他们对包含 MSSQL 的描述有点误导。我震惊地发现，MSSQL 每月每数据库每 500MB 数据的成本为 5 美元。似乎有点陡峭。但是，我在所有站点中都使用 NHibernate，所以转换为 MySQL 没什么大不了的，所以我走那条路，没有回头。如果您对 Mosso 感兴趣，请将我的推荐 ID 提供给他们，然后您第二个月可获得 100 美元的折扣。REF-CODEMONKEY

另一个不错的主机是 Gate.com。我发现就性能而言，它们处于中间位置。但是他们的支持很大，而且价格合适。

我会避免的一个主机是 1&1.com。我犯了一个愚蠢的错误，用他们的“免费”优惠注册我的域名。然后我发现我没有文件系统权限所需的控制权。我在 30 天内取消了帐户并取回了我的钱。然而，我的域名最终被拍卖了。我仍然没有取回域名。他们一直为此付出代价。这是一个非常好的域（只有 5 个字符），但我不得不把它归为一个愚蠢的错误（我知道得更清楚，我只是太便宜了）。

# function - 查找 Dll 函数参数

> ID：292186
> 
> 赞同：22
> 
> 时间：2008-11-15T05:15:21.950
> 
> 标签：function, dll, parameters, name-decoration

如何找到*未记录*的Dll 函数的参数？

我在整个互联网上搜索并最终找到了一种方法：它涉及装饰功能。但是，我找不到获得这些的方法。

*任何帮助，将不胜感激。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-16T07:36:26.937

正如 Paul 所指出的，您需要使用 IDA Pro（或相同的免费版本）之类的工具来反汇编应用程序。

一个很好的介绍性资源是 Wikibook, [x86 Disassembly](http://en.wikibooks.org/wiki/X86_Disassembly)。具体来说，请查看有关[函数和堆栈帧](http://en.wikibooks.org/wiki/X86_Disassembly/Functions_and_Stack_Frames)的部分。对于采用一些标准类型参数的简单函数，推导函数参数可以很简单。

开始做这类事情的最好方法可能是创建一个小型测试 DLL，创建一些具有已知参数的函数，然后反汇编您的 DLL 以查看模式。从你自己的函数中学习反汇编（你有源代码并且知道完整的签名），而不是一头扎进反汇编第三方的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-07-02T09:37:16.210

[我在这里](https://stackoverflow.com/questions/919051/finding-undocumented-apis-in-windows/1073361#1073361)做了一个相当深入的回答，看起来 ReactOS 是你最好的选择，这里的*每个人都*有点偏离基础。

我**强烈反对**尝试反汇编系统 DLL。

一种**更具**冒险性的技术（我不相信从事物的外观到目前为止讨论过），技术是枚举 PDB 的内容。

PDB 文件是您可能知道的调试符号，但是，由于反垄断法庭案件的行动，微软需要发布大量其他未记录的信息。

大量 Windows API 的完全准确、可用和更新的信息**仅**通过 PDB 文件记录。调用约定、参数计数甚至参数类型和名称都记录在案（但当然没有关于使用的细节：）。

Review the DIA SDK, dia2dump is a good example distributed with Visual Studio, to investigate further, it also provides a solution to undecorate function's, to speak specifically to your question.

Also, kernel32 provides UnDecorateSymbolName, so you can use that also if you do not wish to link to the debug sdk libraries.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-15T05:34:02.630

做到这一点的唯一方法是反汇编函数并查看它如何使用寄存器和堆栈。IDA Pro 是执行此操作的最佳工具，但它并非微不足道。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-16T07:24:19.177

是COM Dll吗？如果是COM Dll，则注册它，使用OLE 视图了解接口和参数。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-18T20:08:50.613

首先，下载[Dependency Walker](http://www.dependencywalker.com/)并在其中打开您的 DLL。您将看到导出和导入的符号。如果您的函数名称看起来像 _MyFunction - 它是“C”样式（未装饰）并且您与它没有太多关系（可能如前所述反汇编）

如果它更像 ?_MyFunction@LoNgSetOfSome@_StrangeChAracTers 它是 C++ - 已装饰，您可以尝试使用[此处的 {unofficial} 信息“取消装饰”它](http://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B_Name_Mangling)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-15T05:34:26.653

如果您拥有的唯一信息是未修饰的函数名称，那么不幸的是，仅凭此信息无法推断出函数参数。

如果您擅长组装，则可以反汇编该功能的机器代码并对其进行逆向工程。但除了最简单的功能之外，这对于所有功能来说都很难做到。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-15T05:34:37.933

我不太熟悉 Windows 使用的 PE 格式，但我很确定没有真正简单的方法可以做到这一点。如果符号表没有被剥离，您可能能够找到一些信息（不确定 Windows 如何在 PE 中存储调试信息），但它几乎肯定不会帮助您处理参数类型。最好的办法是将 DLL 加载到调试器中并进行试验……监视堆栈帧上的原始内存，发送各种变量类型等。

即使您在 PE 文件中找到有关调试信息的良好资源，也几乎可以肯定不会有任何有关私有函数的信息。

# javascript - 如何判断用户是点击浏览器后退按钮还是刷新按钮

> ID：292204
> 
> 赞同：14
> 
> 时间：2008-11-15T05:42:40.677
> 
> 标签：javascript, asp.net, browser, back-button

我需要查找用户是单击浏览器后退按钮还是刷新按钮。

当他单击返回或刷新按钮时，我需要将页面重定向到错误页面。这该怎么做。

我需要在 javascript 中为我的 ASP.net 页面执行此操作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T06:49:35.690

首先，如果用户使用 Back 或出于某种原因必须刷新页面，则给出错误消息是一个非常糟糕的主意。相反，您应该透明地处理它。考虑一下由于运输级别的问题而没有完全显示的页面 - 用户唯一的选择是重新加载或返回。

要回答您的问题，您必须自己跟踪用户的导航，这意味着在服务器端。忘记这里的java脚本。如果用户访问一个网站，您可以将该信息存储在与该用户关联的 Session 中（有几种方法可以保留这些唯一的 Session，我在此不再赘述）。如果您将用户最近访问的页面存储在内部结构中，则很容易确定一个页面被访问了两次，或者导航进入了“错误”的方向。

通过构建“允许”导航图并在用户访问时遍历它，您可以轻松地概括这一点（并使整个事情更加健壮，例如防止用户在 url 之间疯狂跳跃，或一次返回不止一个步骤）网站。

如果用户进行“错误”导航（例如后退，重新加载 == 访问两次），那么正确的行为是让他回到正轨。不要给他无法逃脱的错误信息！由于不允许他重新加载或返回，他别无选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-15T05:53:08.190

你不能。浏览器不会将它自己的 ui 事件发送到服务器。你得到的只是http请求，一个看起来很像另一个。也许是点击了后退按钮，或者他们只是重新输入了最后一个 url。告诉我们它导致了什么问题，我们可以帮助您调整您的项目以更好地使用 http 协议。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T19:39:00.073

使用存储在会话中的 guid/或时间戳实现 PageToken，并将该值与表单上的隐藏字段进行比较。我通过[PageToken Class](http://www.codeproject.com/Tips/328386/How-to-prevent-Re-Post-action-caused-by-pressing-b "页面令牌")做到了这一点。如果隐藏字段中的值和会话变量不匹配，那么您就不同步了，您可以处理它。诀窍是映射页面上的所有事件。

```
public void GeneratePageToken()
{
    SessionVariables currSession = new SessionVariables();
    hfMasterPageToken.Value = System.DateTime.Now.ToString();
    currSession.PageToken = hfMasterPageToken.Value;
}

public string GetLastPageToken
{
    get
    {
        SessionVariables currSession = new SessionVariables();
        return currSession.PageToken;
    }
}

public bool TokensMatch
{
    get
    {
        SessionVariables currSession = new SessionVariables();
        return (currSession.PageToken != null
            && currSession.PageToken == hfMasterPageToken.Value);
    }
} 
```

在常规代码之前的 Event 方法中：

```
if (this.TokensMatch == false)
{
    //Reload the data.
    //Generates a NewPageToken (this.GeneratePageToken();)
    ReloadDataMethod();
    this.MessageToUser =
     "Data reloaded.  Click Edit or Insert button to change.";
    this.MessageType = MessageToUserType.Success;
    this.DisplayMessageToUser = true;
    return;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-01T14:25:11.923

### 和`Site.Master`

在你的`Site.Master`，放在后面`<body>`

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="true" />
<dx:ASPxLoadingPanel ID="MainLoadingPanel" runat="server" ClientInstanceName="MainLoadingPanel" Modal="True" />
<input type="hidden" id="refreshed" value="no" />
<script type="text/javascript" language="javascript">
    MainLoadingPanel.Show();
    window.onload = function () {
        var e = document.getElementById("refreshed");
        if (e.value == "no") {
            MainLoadingPanel.Hide();
            e.value = "yes";
        } else {
            e.value = "no";
            location.reload(true); // Reload the page or redirect...
        }
    };
</script> 
```

### 没有`Site.Master`

在您的通用代码中，放在后面`<body>`

```
<input type="hidden" id="refreshed" value="no" />
<script type="text/javascript" language="javascript">
    window.onload = function () {
        var e = document.getElementById("refreshed");
        if (e.value == "no") {
            e.value = "yes";
        } else {
            e.value = "no";
            location.reload(true); // Reload the page or redirect...
        }
    };
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T06:52:46.213

我想您想这样做是因为回发以避免重新提交某些操作或数据，对吗？具有讽刺意味的是，在 asp.net webforms 之前，这并不是什么大问题……因为您通常必须发布到不同的 URL 而不是同一个（实际上很像 asp.net mvc）。

我喜欢使用的一个技巧......即使在最技术性的点上速度较慢......是有一个输入页面和一个帖子页面。帖子页面的 HTML 输出是一些超级最小的 HTML，带有一个很小的 ​​javascript，它将浏览器历史记录中的当前 url（帖子页面）替换为结果页面（或者甚至是原始引用页面，如果你真的想要的话）。结果是当用户单击后退按钮时，他将被发送到原始输入页面，或者如果他单击刷新，他已经在新的结果页面上。

```
<html><body onload="location.replace('someURL.asp')"></body></html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-01-17T03:55:04.020

我们在 Java/Struts1 中通过在提交按钮上放置一个属性来做到这一点。如果单击提交按钮，按钮文本将在 ActionForm 的属性中发送。如果用户刷新信息，则该值未设置，因此我们知道用户没有单击该按钮。在这种属性为空的情况下，我们返回并呈现页面流的第一页。ASP.Net 中的 YMMV。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-04-12T14:31:00.120

这只是检测用户是否使用后退/前进按钮登陆您的页面......唯一的问题是 IE8 及更低版本，浏览器版本无法处理此问题。

```
if(performance.navigation.type == 2)
{
    //Do your code here
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-08-27T07:25:16.090

.NET 3.5 可以很好地处理浏览器的后退（和前进）按钮。使用 Google 搜索：“Scriptmanager EnableHistory”。您可以控制哪些用户操作会将条目添加到浏览器的历史记录（ScriptManager -> AddHistoryPoint），并且只要用户单击浏览器的后退/前进按钮，您的 ASP.NET 应用程序就会收到一个事件。

# iphone - 如何在标签大小未知的情况下创建滚动视图？

> ID：292223
> 
> 赞同：1
> 
> 时间：2008-11-15T06:23:25.837
> 
> 标签：iphone, cocoa-touch

在我的 iPhone 应用程序中，我有一个表格视图。当用户点击任何行时，将打开有关该元素的信息。所有信息都来自一个 XML 文件，大小未知；某些信息可能包含图像。

我尝试在 UISrollView 中使用多行标签和图像视图来实现，但我无法滚动。是否可以为 UILabel 获得捏合和缩放效果？以及如何向标签文本添加超链接？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T07:19:21.573

您需要将 UIScrollView setContentSize 设置为内容的实际高度。您可以根据标签的高度计算它。

为了轻松完成所有这些捏合、缩放、超链接，您应该只使用 UIWebView。

# mysql - 在同一列上拥有唯一且正常的索引有多大错误？

> ID：292230
> 
> 赞同：7
> 
> 时间：2008-11-15T06:32:09.533
> 
> 标签：mysql, indexing, unique-index

我有以下表结构

```
CREATE TABLE `table` (
  `id` int(11) NOT NULL auto_increment,
  `date_expired` datetime NOT NULL,
  `user_id` int(11) NOT NULL,
  `foreign_id` int(11) NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `date_expired` (`date_expired`,`user_id`,`foreign_id`),
  KEY `user_id` (`user_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

您会注意到，我在 user_id: `date_expired`&上有重复的索引`user_id`。我当然想要唯一索引，因为我想确保数据是唯一的。

重复索引的原因是因为没有`user_id`索引，我的主要搜索查询需要 4 秒。使用额外的索引需要 1 秒。该查询正在加入表`user_id`并检查`date_expired`。

该表只有 275 条记录。

*   在同一字段上拥有唯一且正常的索引有多糟糕？
*   当表是纯 id 时，索引比数据大有多糟糕？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-15T06:50:06.297

我相信，如果您将唯一索引创建为 ( `user_id`, `date_expired`, )，那么您将获得与仅使用唯一索引`foreign_id`建立正常索引相同的好处。`user_id`MySQL 可以使用任何索引的第一列来减少连接中的行数，其方式与`user_id`.

有关更多信息，请参阅[MySQL 的索引文档](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html#id3515520)。

您是指`id`架构中其他地方的 auto_increment 列以节省空间吗？由于您的唯一索引涵盖了表中的所有其他列，因此它本质上是主键本身，如果不是，则可能会被删除。

您可以通过在查询前加上 EXPLAIN 来检查查询使用的键。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T06:39:18.923

我不明白重复索引是什么意思。表中有三个索引：

1.  一个用于主键“id”（这意味着唯一）
2.  'date_expired'、'user_id' 和 'foreign_id' 组合的另一个独特的
3.  第三个仅超过 'user_id'

所以没有重复，你有三个**不同**的索引可以做不同的事情。您需要 3 号来加快与您所看到的 user_id 相关的查询。所以这个特定的表没有任何问题，你没有复制任何东西。关于第二个问题，这取决于您的需求，但是在索引中使用的空间比在数据中使用的空间多当然也*不错。*

例如，有一个 UNIQUE ('user_id') 和一个 KEY('user_id') （我什至不确定 MySQL 是否允许这样做），因为一个索引将包含另一个索引并且什么都没有获得。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T06:37:54.903

拥有包括一个字段的多个索引一点也不坏（本质上，它们确实索引不同的东西）。它对写入性能有轻微影响，但这是您首先要对每个索引进行的典型权衡。如果空间便宜，索引占用比数据本身更多的空间也不错。在您的情况下，考虑到您的条目数量非常少，它应该很便宜。

我会问你的问题是：这么小的表的索引如何严重影响我的查询运行时间？也许你做错了什么（我认为这个表有很多可能冗余的查询），因为只有这么少的条目，单个查询应该不会接近这个时间范围）。

# c# - 从 WCF 服务器端获取 Windows 用户名

> ID：292233
> 
> 赞同：21
> 
> 时间：2008-11-15T06:36:28.743
> 
> 标签：c#, wcf

我对 Web 服务和 WCF 非常熟悉，而且我正在使用 Windows 集成身份验证 - 如何在服务器端界面上获取用户名？我相信我应该实现自定义行为，或者可能是 WCF 会话？任何线索都会非常方便。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2008-11-15T08:24:21.320

尝试查看 ServiceSecurityContext.Current.WindowsIdentity

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-11-15T09:06:18.473

下面是一段服务代码，展示了如何检索和使用与 WCF 服务的调用者关联的 WindowsIdentity。

此代码假设您接受大多数默认配置。它应该与命名管道或网络 TCP 绑定没有任何问题。

p.Demand() 将确定用户是否在 permissionGroup 变量指定的 windows 组中。

```
private static void DemandManagerPermission()
{
    // Verify the use has authority to proceed
    string permissionGroup = ConfigurationManager.AppSettings["ManagerPermissionGroup"];
    if (string.IsNullOrEmpty(permissionGroup))
        throw new FaultException("Group permissions not set for access control.");

    AppDomain.CurrentDomain.SetPrincipalPolicy(PrincipalPolicy.WindowsPrincipal);
    var p = new PrincipalPermission(ServiceSecurityContext.Current.WindowsIdentity.Name, permissionGroup, true);
    p.Demand();

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-10T19:42:36.107

获取 WCF 服务调用者用户名：

var callerUserName = ServiceSecurityContext.Current.WindowsIdentity.Name;

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2008-11-15T07:22:01.850

你试过`WindowsIdentity.GetCurrent();`吗？

# java-me - 在 J2ME 中是否有用于发送彩信的通用应用程序 ID？

> ID：292239
> 
> 赞同：1
> 
> 时间：2008-11-15T06:40:53.587
> 
> 标签：java-me, mms, wma

我有这个问题。

问题是，当我将带有 J2ME 的 MMS 发送到带有 JSR 205 的另一台设备（两个测试：SonyEriccson w610i 和 Nokia 5300）时，接收图标闪烁，但消息不在收件箱文件夹中。我认为发生这种情况是因为应用程序 ID（可能无法识别），那么，是否有通用应用程序 ID（或其他方式）用于在 J2ME 中发送彩信？因为我不想在每台设备上安装查看器（接收消息）。

我使用的代码与您在网上可以找到的代码相同：打开 MessageConnection，创建 MultipartMessage，设置地址 (mms://{number}:{appID})，添加 MessagePart 并将其踢出。

顺便说一句，当我将它发送到没有 JSR 205（旧的索尼爱立信）的设备时，它会被接收；但话又说回来，并不是人们发送彩信的所有设备都那么旧。

最后，运营商是 Telcel（墨西哥）。我不知道这是否与它有关，但也许。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-18T03:53:18.510

这使魔术：

```
//String address = "mms://"+ number +":"+ appID;
String address = "mms://"+ number; 
```

现在每个手机都在接收消息。但我不知道这样发送消息是否正确，也许未来的版本会抱怨。

# vb6 - Vb6 如何制作 0-9 和 x 个字符的 az 的随机字符串

> ID：292254
> 
> 赞同：11
> 
> 时间：2008-11-15T07:02:45.663
> 
> 标签：vb6, random

尝试使用 0-9 和 az/AZ 创建一个随机字符串，长度为 x 个字符，但似乎找不到一个好的例子，有什么想法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2008-11-15T07:52:32.897

```
Function RandomString(cb As Integer) As String

    Randomize
    Dim rgch As String
    rgch = "abcdefghijklmnopqrstuvwxyz"
    rgch = rgch & UCase(rgch) & "0123456789"

    Dim i As Long
    For i = 1 To cb
        RandomString = RandomString & Mid$(rgch, Int(Rnd() * Len(rgch) + 1), 1)
    Next

End Function 
```

请注意，内置的随机数生成器在密码学上并不安全，因此不应使用这样的函数来生成密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T07:09:42.513

我忘记了我所有的 VB6（感谢上帝），但在伪代码中它很容易：

```
    all_chars = 所有有效字符的数组
    种子随机数生成器
    对于 i = 1 到 x 做
        random_index = 得到一个介于 1 和 all_chars 长度之间的随机数
        '我记得如何在 VB6 中连接和评论 :-)
        字符串 = 字符串 & all_chars[random_index]
    结束

    完毕！

```

因此，只需找出如何创建一个数组并用字符填充它，如何获取数组的长度以及如何获取所述数组的第一个和最后一个索引之间的[随机数。](http://www.vbexplorer.com/VBExplorer/random/random_numbers_1.asp)

好吧，当然还有循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-05-27T19:41:45.470

受这个问题的启发，我提出了一个[类似的问题](https://stackoverflow.com/questions/917617/is-using-a-guid-a-valid-way-to-generate-a-random-string-of-characters-and-numbers)，我建议使用 GUID 生成序列。正如我指出的那样，这样做的缺点是，如果我的逻辑没有其他缺陷，那么它将是 A 到 F 和 10 位数字的随机序列。如果您可以忍受字母 G 到 Z 丢失的事实，那么这可能是您的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-05-27T15:09:23.900

Joel 的方法很好（整数循环变量除外，并且使用“+”进行连接）。（-：

但是，可以通过多种方式使输出变得更有趣。

首先，您可以通过创建一个包含比 Zz 字符更多的 Ee 和 Tt 字符的种子字符串来生成与常见英文文本具有相同近似频率分布的字符串。[在这种](http://www.csm.astate.edu/~rossa/datasec/frequency.html)近似混合中，可能有 1000 个字符的字符串（如果大小写混合，则为两倍）可以正常工作。

以您希望在最终输出中看到的任何比例添加相等数量的 0..9 字符。你也可以打乱这个 see 字符串，让它看起来更随机，但这并不重要。

然后使用 1..Len(seedstring) 范围内的随机选择器来选择每个字符，就像在 Joel 的示例中一样。

为什么要这样做？除了结果看起来更熟悉之外，没有什么好的理由。

第二种选择是生成两个这样的种子字符串，一个辅音在语料库中的权重，另一个与元音在相同的权重（E 多于 O 多于 U 等）。我只会使用一种情况，而不是混合情况。

然后交替进行两个随机选择，首先是辅音，然后是元音，以生成 TI、WO、DE 等二合字母。将这些链接在一起形成“单词”。

因为生成的输出是可发音的，所以更容易记住。另外，它看起来很日本。（-：

我们的[Stamina](http://www.mdxi.com/)库（用于 VB/VBA 的 ASM 函数）具有执行这些操作的例程，但在纯 VB 中就足够简单了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-27T12:59:59.760

你并没有真正说你用这个做什么。如果您需要小字符串 (<=32,766)，我认为 Joel 的功能可以正常工作。但是，如果您需要一些东西来生成非常大的字符串，这可能会很有用。在我的系统上，它将在 0.33291015625 秒内执行 1,000,000 个字符字符串（是的，我知道... “：）：

```
Public Function RandomString( _
    ByVal length As Long, _
    Optional charset As String = "abcdefghijklmnopqrstuvwxyz0123456789" _
    ) As String
    Dim chars() As Byte, value() As Byte, chrUprBnd As Long, i As Long
    If length > 0& Then
        Randomize
        chars = charset
        chrUprBnd = Len(charset) - 1&
        length = (length * 2&) - 1&
        ReDim value(length) As Byte
        For i = 0& To length Step 2&
            value(i) = chars(CLng(chrUprBnd * Rnd) * 2&)
        Next
    End If
    RandomString = value
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-05-26T10:35:08.943

使用 Vinko Vrsalovic 的算法，这是功能代码，谢谢和 cya！

```
all_chars = array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","S","T","U","V","W","X","Y","Z")
Randomize
for i = 1 to 4
   random_index = int(Rnd()*25)
clave = clave & all_chars(random_index) 
next 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T07:38:54.467

使用 Randomize
Int(Rnd * high bound) + (low bound) 将生成一个随机数
生成一个数组，其值从 asc("a") 到 asc("z") 和从 asc("0") 到 asc(" 9")
生成 1 到 26 (10+26) 之间的随机数并在数组中查找。

不再安装 VB6。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-07-02T04:47:46.763

如果您使用的是 SQL 数据库，您可以像这样生成 PrimaryKey：

`SELECT NEWID() as KeyValue`

这是非常好的方法，也非常安全。

# javascript - HTML 表单的 JavaScript

> ID：292256
> 
> 赞同：1
> 
> 时间：2008-11-15T07:10:08.130
> 
> 标签：javascript, html, forms, webforms

我是一个有着简单需求的简单灵魂，我正在尝试配置一个表单。我讨厌表格。

它需要有 JavaScript 来传输数据，需要将包含数据的电子邮件发送到电子邮件地址，并且需要将访问者重定向到 pdf。CGI 一直让我感到困惑，而且我对 JavaScript 了解不多。

我已经完成了 html，但是 post 操作和 JavaScript 让我很生气。找了4个小时。把叉子插在我身上。我受够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T11:39:12.970

听起来您需要验证表单，然后将其发送到服务器，然后重新验证（无法插入 JavaScript）并将邮件请求发送到电子邮件服务器。

我建议将 PHP 用于重新验证表单并将请求发送到电子邮件服务器的服务器，因为它简单且受广泛支持。

假设你有这个 HTML

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="script.js"></script>
<form id="emailForm" method="post" action="mail.php">
    <input type='text' name='firstName' id="firstName"><br>
    <input type='text' name='lastName' id='lastname'><br>
    <input type='submit' value='submit' name='submit'>
</form> 
```

您可以使用 javascript 和 jQuery 验证用户是否在所有字段中输入了某些内容。在文件 script.js 中说你有：

```
var formIsOkay = true;
$(document).ready( function() {
$('#emailForm').submit( function() {
    $('#emailForm input').each( function() {
         if ( this.val() == '' ) { formIsOkay = false; }
    }
    return formIsOkay;
}
} 
```

然后在 email.php 你会有这样的东西：

```
 <?php
 $to =  'email@domain.com';
 $from = 'email@domain.com';
 $subject = 'Form';
 $message = 'Hello, the following variables were supplied:<br>';
 foreach($_POST as $key => $val){
     $message .= "$key = $val<br>";
 }
 $message = wordwrap($message, 70);
 $headers  = 'MIME-Version: 1.0' . "\r\n";
 $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
 $headers .= "To: $to" . "\r\n";
 $headers .= "From: $from" . "\r\n";
 mail($to, $subject, $message, $headers);
 ?> 
```

为此，您需要在服务器上运行 PHP，并在 php 中设置 SMTP 服务器，但大多数服务器都有这个。请注意，PHP 现在如何不重新修改表单，所以当有人提交一个空表单时，它仍然会在电子邮件中发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T07:34:15.523

好的，首先，我们需要澄清你的措辞。JavaScript 和 Java 是两种截然不同的语言。

为了发送邮件，您需要使用与 SMTP 服务器结合使用的任何语言，这必须是实际发送电子邮件的语言，而不是客户端的 JavaScript。

可以在此处找到使用 JavaScript 发布到 SMTP 服务器的示例（尽管我不推荐这种方法，因为 ActiveX 是 IE 独有的）： [http ://www.ostrosoft.com/smtp_component/smtp_javascript.asp](http://www.ostrosoft.com/smtp_component/smtp_javascript.asp)

最终使用 JavaScript，您将使用的最佳方法只是发布到非 SMTP 服务器，然后将数据发送到 SMTP 服务器。

如果您实际使用 Java，则可以添加一个名为 JavaMail 的可选库，以便更轻松地发送邮件，但同样，您需要与 SMTP 服务器通信。

可以在此处找到 JavaMail 的示例： [http ://www.javapractices.com/topic/TopicAction.do?Id=144](http://www.javapractices.com/topic/TopicAction.do?Id=144)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T08:57:06.073

你的表单听起来像一个FormMail-form，它是专门为发送邮件而设计的，它实际上并不需要javascript，但它肯定需要一些隐藏字段，而且你特别想提取的所有信息都必须有自己的部分/表单中的字段。

那么，问题是什么？-)

# javascript - dom 操作后 Javascript 无效

> ID：292257
> 
> 赞同：1
> 
> 时间：2008-11-15T07:10:16.677
> 
> 标签：javascript, dom

我的页面有两个依赖于 JavaScript 的组件。在左侧，有基于属性的导航 (abn)。右边是 abn 的结果。

有一个 abn 的事件处理程序和一个结果的事件处理程序（两者都在单击）每当用户单击 abn 时，我都会执行 Ajax 调用，该调用返回一个 JSON 对象，其中 HTML 结果是其中一个键的值/值对。HTML 被插入到结果组件中。

页面结果的事件处理程序在页面刷新时工作正常。当我在 Ajax 调用后将 HTML 内容插入结果槽时，它停止工作。我已经验证结果包含我的 JavaScript 所依赖的所有 div 和类。

我认为当我替换 HTML 内容时，JavaScript 处理程序就会停止工作。有人可以解释为什么会发生这种情况以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T07:14:27.980

您是否插入了具有相同 id（重复 id）的元素？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T07:16:00.503

你如何替换结果的 html 内容？我的猜测是您在页面加载时定义了事件处理程序，但是您正在用一个没有事件处理程序的新 dom 元素覆盖 dom 元素。但在我了解更多信息之前，我必须查看一些代码或获得更多解释:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T07:53:19.883

当您使用新数据更新 HTML 时，您是否重新附加了之前拥有的任何事件处理程序？

您可能已经替换了以前具有事件处理程序的元素，而现在没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-16T09:45:53.820

> They are class, not div. And they have the same class. The event handler is not part of the result. The javascript is at the bottom of the page while the Result is at the top. So the javascript is sitll there. They are not being replaced.

If you are replacing elements with new elements via .innerHTML, the JavaScript at the bottom of the page will not be re-executed when you do so. If you are adding event handlers using JavaScript (Level 2) rather than as html attributes (Level 0) then those handlers are only added when the user first visits the page. You need to call that code every time you place the new DOM elements on the page.

Of course, this answer may be totally off the mark. We could tell if you gave us a code sample.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T19:34:40.420

我已经看到了类似的行为，即使用先前设置的 innerHTML zaps 事件处理程序来操作 DOM，尽管只有当您替换附加了处理程序的实际元素时。这适用于内联事件处理程序属性，以及通过 Javascript 连接的“正确”事件处理程序。

测试是否发生这种情况的最佳方法是向单击 abn 时调用的函数添加一些调试语句。如果您没有使用调试器，只需添加一些警报（然后考虑使用 JavaScript 调试器）

```
function iAmCalledWhenSomeoneClicksOnAbn(){
    alert("I was called, w00t!");
    //...rest of function
} 
```

第一次点击（有效）会给你一个警报。如果第二次单击（不起作用）跳过警报，则您知道您的 DOM 操作正在删除您的事件处理程序。

如果第二次单击仍为您提供警报，则说明发生了其他事情。最可能的罪魁祸首是停止执行的未处理的 Javascript 异常。为您的浏览器（Firefox/Firebug、IE/Visual Studio Express Web Developer、Safari/Drosera）下载一个调试器并按照执行路径直到抛出异常，或者您到达代码中应该进行 DOM 操作的部分。如果您达到后者，请检查所有变量的内容以及 DOM 的当前内容，以确定未发生预期 DOM 操作的原因。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T07:38:19.710

它们是类，而不是 div。他们有相同的班级。事件处理程序不是结果的一部分。javascript 位于页面底部，而 Result 位于顶部。所以javascript就在那里。他们没有被替换。

# c# - C# 4.0 的新酷特性

> ID：292265
> 
> 赞同：28
> 
> 时间：2008-11-15T07:19:57.500
> 
> 标签：c#, .net, c#-4.0

你们正在寻找的最酷的新功能是什么，或者您听说过在 c# 4.0 中发布的最酷的新功能是什么。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2008-11-15T07:30:14.673

*如果您需要，*动态的东西听起来很酷，但我不希望经常使用它。

委托和接口的通用差异是相似的 - 目前缺乏差异是一个令人头疼的问题，但 C# 4 中可用的有限差异无法涵盖许多令人头疼的地方。

COM 功能对我并不特别感兴趣——我真的应该更多地了解它们是什么。

在构建不可变类型时，可选参数和命名参数可能会产生很大的不同：它支持如下语法：

```
Person p = new Person (name: "Jon", age: 32); 
```

没有构造函数重载的庞大组合。我希望更多地支持以只读自动实现的属性的形式编写不可变类型，但我不希望我们会得到这些。（目前它们肯定不在提议的功能列表中。）

实际上，我个人对.NET 4.0的一些*框架特性更感兴趣——尤其是*[代码协定](http://blogs.msdn.com/bclteam/archive/2008/11/11/introduction-to-code-contracts-melitta-andersen.aspx)和[并行扩展](http://blogs.msdn.com/pfxteam/)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-11-15T07:58:31.433

方法参数默认值：

```
public void MyMethod1(string value1 = "test", int num1 = 10, double num2 = 12.2)
{
  //...
} 
```

也可能是匿名返回类型：

```
public var MyMethod2()
{
  // ..
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-09-15T21:02:08.520

[元组](http://msdn.microsoft.com/en-us/magazine/dd942829.aspx)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-11-15T08:16:26.437

`IDynamicObject`，后面的胶水`dynamic`，允许在运行时解释调用。

这对于诸如 REST、XML、COM、`DataSet`动态语言和许多其他语言等固有的无类型场景很有趣。它是建立在[动态语言运行时 (DLR)](http://en.wikipedia.org/wiki/Dynamic_Language_Runtime)之上的[动态调度](http://en.wikipedia.org/wiki/Dynamic_dispatch/)实现。

代替繁琐的反射语义，您可以*点入*声明为`dynamic`. 想象一下使用 Silverlight 中的 Javascript 对象：

```
dynamic obj = GetScriptObject();

HtmlPage.Window.Alert(obj.someProperty); 
```

支持所有 C# 语法（我相信）：

```
HtmlPage.Window.Alert(obj.someMethod() + obj.items[0]); 
```

反射本身看起来更干净：

```
public void WriteSomePropertyValue(object target)
{
    Console.WriteLine((target as dynamic).SomeProperty);
}

public void WriteSomeMethodValue(object target, int arg1, string arg2)
{
    Console.WriteLine((target as dynamic).SomeMethod(arg1, arg2));
} 
```

`dynamic`是工具包中的另一个工具。它不会改变静态与动态的争论，它只是缓解了摩擦。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2010-02-04T02:12:34.110

[严格来说不是 C#，但由于 .NET 被标记为此处，因此有一个关于BCL 更改](http://blogs.msdn.com/bclteam/archive/2009/10/21/what-s-new-in-the-bcl-in-net-4-beta-2-justin-van-patten.aspx)的好链接。

自我注意：必须`Stopwatch.Restart()`在 4.0 发布之前重命名我的扩展方法 :)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2010-11-04T09:32:56.187

*   **C# 2.0** —Generics (.NET Framework support was added, and C# benefited from this); iterator pattern (the yield keyword); anonymous methods (the delegate keyword), nullable types, and the null coalescing operator (??).
*   **C# 3.0** —Anonymous types, extension methods, object initializers, collection initializers, implicitly typed local variables (var keyword), lambda expressions (=>), and the LINQ query expression pattern.
*   **C# 4.0** —Optional Parameters and Named Arguments, Dynamic typing (dynamic type), improved COM-Interop, and Contra and Co-Variance.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-09-15T20:56:47.200

增强对[表达式树](http://community.bartdesmet.net/blogs/bart/archive/2009/08/10/expression-trees-take-two-introducing-system-linq-expressions-v4-0.aspx)的支持！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-15T07:22:35.530

dynamic 关键字看起来可以很好地弥合 IronRuby 或 IronPython 等动态语言之间的差距，这可能有助于它在 Microsoft 单一文化中的采用……这让我很兴奋。

虽然我对它很感兴趣，但我也担心它会被过度使用，比如泛型和 LINQ、SQLCLR 等 :)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2010-11-09T02:51:43.237

C#4.0

1）PLinq

2) 命名参数和可选参数

3) 懒惰

4) Co & Contra 方差

5) 任务并行

6) 动态对象

7) 扩展对象

8) 改进的 COM 互操作

9）元组

仅举几例

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2010-12-19T19:35:14.663

**使用async**和**await**以同步方式编写异步代码的能力 很酷。

# language-agnostic - 什么是存在类型？

> ID：292274
> 
> 赞同：196
> 
> 时间：2008-11-15T07:31:00.803
> 
> 标签：language-agnostic, types, type-systems, existential-type

我通读了 Wikipedia 文章*[Existential types](https://en.wikipedia.org/wiki/Type_system#Existential_types)*。我收集到它们被称为存在类型是因为存在运算符 (∃)。不过，我不确定这有什么意义。有什么区别

```
T = ∃X { X a; int f(X); } 
```

和

```
T = ∀x { X a; int f(X); } 
```

?

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2011-04-02T00:26:42.093

当有人定义通用类型`∀X`时，他们会说：*你可以插入任何你想要的类型，我不需要知道任何关于类型的信息来完成我的工作，我只会不透明地将它称为`X`*.

当有人定义存在类型`∃X`时，他们会说：*我会在这里使用我想要的任何类型；您对类型一无所知，因此只能将其不透明地称为`X`*.

通用类型让您可以编写如下内容：

```
void copy<T>(List<T> source, List<T> dest) {
   ...
} 
```

该`copy`函数不知道`T`实际会是什么，但它不需要知道。

存在类型可以让您编写如下内容：

```
interface VirtualMachine<B> {
   B compile(String source);
   void run(B bytecode);
}

// Now, if you had a list of VMs you wanted to run on the same input:
void runAllCompilers(List<∃B:VirtualMachine<B>> vms, String source) {
   for (∃B:VirtualMachine<B> vm : vms) {
      B bytecode = vm.compile(source);
      vm.run(bytecode);
   }
} 
```

列表中的每个虚拟机实现都可以有不同的字节码类型。该`runAllCompilers`函数不知道字节码类型是什么，但它不需要；它所做的只是将字节码从 中继`VirtualMachine.compile`到`VirtualMachine.run`。

Java 类型通配符（例如：）`List<?>`是一种非常有限的存在类型。

**更新：**忘了提到你可以用通用类型模拟存在类型。首先，包装您的通用类型以隐藏类型参数。其次，反转控制（这有效地交换了上述定义中的“你”和“我”部分，这是存在主义和普遍主义之间的主要区别）。

```
// A wrapper that hides the type parameter 'B'
interface VMWrapper {
   void unwrap(VMHandler handler);
}

// A callback (control inversion)
interface VMHandler {
   <B> void handle(VirtualMachine<B> vm);
} 
```

现在，我们可以拥有`VMWrapper`自己的调用`VMHandler`，它具有通用类型的`handle`函数。最终效果是一样的，我们的代码必须被`B`视为不透明的。

```
void runWithAll(List<VMWrapper> vms, final String input)
{
   for (VMWrapper vm : vms) {
      vm.unwrap(new VMHandler() {
         public <B> void handle(VirtualMachine<B> vm) {
            B bytecode = vm.compile(input);
            vm.run(bytecode);
         }
      });
   }
} 
```

一个示例虚拟机实现：

```
class MyVM implements VirtualMachine<byte[]>, VMWrapper {
   public byte[] compile(String input) {
      return null; // TODO: somehow compile the input
   }
   public void run(byte[] bytecode) {
      // TODO: Somehow evaluate 'bytecode'
   }
   public void unwrap(VMHandler handler) {
      handler.handle(this);
   }
} 
```

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-02-27T22:06:50.913

**存在类型**的值就像`∃x. F(x)` **是一对**包含某种*类型* `x`和类型的*值*`F(x)`。而多态类型的值 like`∀x. F(x)`是一个接受某种类型并*产生*type 值的*函数*。在这两种情况下，类型都关闭了一些类型构造函数。`x`*`F(x)``F`*

 *请注意，此视图混合了类型和值。存在性证明是一种类型和一种值。通用证明是按类型索引的整个值族（或从类型到值的映射）。

所以你指定的两种类型的区别如下：

```
T = ∃X { X a; int f(X); } 
```

这意味着： type 的值`T`包含一个名为 的类型`X`、一个 value`a:X`和一个 function `f:X->int`。类型值的生产者`T`可以选择*任何*类型，`X`而消费者对`X`. 除了有一个调用它的例子，`a`并且这个值可以通过将`int`其转换为`f`. 换句话说，一个类型的值`T`知道如何以`int`某种方式产生一个。好吧，我们可以消除中间类型`X`，然后说：

```
T = int 
```

普遍量化的有点不同。

```
T = ∀X { X a; int f(X); } 
```

这意味着： type 的值`T`可以被赋予任何 type `X`，它会产生一个 value`a:X`和一个函数，`f:X->int` *不管`X`它是*什么。换句话说：类型值的消费者`T`可以为`X`. 类型值的生产者`T`根本不知道任何关于 的内容`X`，但它必须能够`a`为 的任何选择生成一个值`X`，并且能够将这样的值转换为`int`。

显然实现这种类型是不可能的，因为没有程序可以产生所有可以想象的类型的值。除非你允许像`null`或底部这样的荒谬。

由于存在论是一对，所以存在论论点可以通过**柯里化**转换为普遍论点。

```
(∃b. F(b)) -> Int 
```

是相同的：

```
∀b. (F(b) -> Int) 
```

前者是**二级**存在主义。这导致以下有用的属性：

> 每个存在量化的等级类型`n+1`都是普遍量化的等级类型`n`。

有一种标准算法可以将存在主义转化为普遍主义，称为[*Skolemization*](http://en.wikipedia.org/wiki/Skolem_normal_form)。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2011-12-31T03:52:41.887

我认为将存在类型与通用类型一起解释是有意义的，因为这两个概念是互补的，即一个是另一个的“对立面”。

我无法回答有关存在类型的每一个细节（例如给出准确的定义、列出所有可能的用途、它们与抽象数据类型的关系等），因为我对此不够了解。我将仅演示（使用 Java）[这篇 HaskellWiki 文章](http://www.haskell.org/haskellwiki/Existential_type#Overview "HaskellWiki 上的文章")所说的存在类型的主要影响：

> *存在类型可以*用于*多种不同的目的。但他们*所做*的是在右侧“隐藏”一个类型变量。通常，出现在右侧的任何类型变量也必须出现在左侧 […]*

**示例设置：**

以下伪代码不是完全有效的 Java，即使它很容易修复它。事实上，这正是我在这个答案中要做的！

```
class Tree<α>
{
    α       value;
    Tree<α> left;
    Tree<α> right;
}

int height(Tree<α> t)
{
    return (t != null)  ?  1 + max( height(t.left), height(t.right) )
                        :  0;
} 
```

让我为您简要说明这一点。我们正在定义……

*   一种递归类型`Tree<α>`，表示二叉树中的一个节点。每个节点存储`value`某种类型*α*的 a，并具有对相同类型的可选子树`left`和子树的引用。`right`

*   `height`返回从任何叶节点到根节点的最远距离的函数`t`。

现在，让我们将上面的伪代码`height`转换为正确的 Java 语法！（为了简洁起见，我将继续省略一些样板，例如面向对象和可访问性修饰符。）我将展示两种可能的解决方案。

**1.通用型解决方案：**

最明显的解决方法是通过在其签名中引入类型参数*α*`height`来简单地实现泛型：

 *```
<α> int height(Tree<α> t)
{
    return (t != null)  ?  1 + max( height(t.left), height(t.right) )
                        :  0;
} 
```

如果您愿意，这将允许您在该函数内声明变量并创建*α类型的表达式。*但...

**2.存在型解决方案：**

如果您查看我们方法的主体，您会注意到我们实际上并没有访问或使用任何*α*类型的东西！没有具有该类型的表达式，也没有使用该类型声明的任何变量……那么，为什么我们必须要`height`泛型呢？为什么我们不能简单地忘记*α*？事实证明，我们可以：

```
int height(Tree<?> t)
{
    return (t != null)  ?  1 + max( height(t.left), height(t.right) )
                        :  0;
} 
```

正如我在这个答案的开头所写的那样，存在类型和通用类型本质上是互补/双重的。因此，如果通用类型解决方案是为了`height` *更*通用，那么我们应该期望存在类型具有相反的效果：使其*不那么*通用，即通过隐藏/删除类型参数*α*。

因此，您不能再`t.value`在此方法中引用 of 的类型，也不能操作该类型的任何表达式，因为没有标识符绑定到它。（[`?`通配符](http://en.wikipedia.org/wiki/Wildcard_%28Java%29 "维基百科上的文章")是一个特殊的标记，而不是“捕获”一个类型的标识符。）`t.value`实际上变得不透明；也许您仍然可以用它做的唯一事情是将其类型转换为`Object`.

**概括：**

```
===========================================================
                     |    universally       existentially
                     |  quantified type    quantified type
---------------------+-------------------------------------
 calling method      |                  
 needs to know       |        yes                no
 the type argument   |                 
---------------------+-------------------------------------
 called method       |                  
 can use / refer to  |        yes                no  
 the type argument   |                  
=====================+===================================== 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-09-08T01:18:41.347

这些都是很好的例子，但我选择稍微不同的回答。回想一下数学，∀x。P(x) 的意思是“对于所有的 x，我可以证明 P(x)”。换句话说，它是一种函数，你给我一个 x，我有一个方法可以为你证明。

在类型论中，我们不是在谈论证明，而是在谈论类型。所以在这个空间里，我们的意思是“对于你给我的任何 X 类型，我会给你一个特定的 P 类型”。现在，由于除了 X 是一种类型之外，我们没有给 P 提供太多关于 X 的信息，所以 P 不能用它做很多事情，但是有一些例子。P 可以创建“所有相同类型的对”的类型：`P<X> = Pair<X, X> = (X, X)`. 或者我们可以创建选项 type: `P<X> = Option<X> = X | Nil`，其中 Nil 是空指针的类型。我们可以从中列出一个清单：`List<X> = (X, List<X>) | Nil`. 请注意，最后一个是递归的，值`List<X>`要么是第一个元素是 X，第二个元素是 a 的对，要么`List<X>`是空指针。

现在，在数学中∃x。P(x) 的意思是“我可以证明存在一个特定的 x 使得 P(x) 为真”。可能有很多这样的 x，但要证明它，一个就足够了。另一种思考方式是必须存在一组非空的证据-证明对{(x, P(x))}。

翻译为类型论：族`∃X.P<X>`中的类型是类型 X 和对应的类型`P<X>`。请注意，在我们将 X 交给 P 之前，（因此我们对 X 的一切了解，但对 P 知之甚少）现在相反。`P<X>`不承诺提供有关 X 的任何信息，只是说有一个，而且它确实是一种类型。

这有什么用？好吧，P 可以是一种具有暴露其内部类型 X 的方法的类型。一个例子是一个隐藏其状态 X 的内部表示的对象。虽然我们无法直接操作它，但我们可以通过以下方式观察它的效果戳 P。这种类型可能有很多实现，但无论选择哪一个，您都可以使用所有这些类型。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2012-11-30T19:31:10.960

直接回答你的问题：

对于通用类型，使用的`T`必须包括类型参数`X`。例如`T<String>`或`T<Integer>`。对于存在类型的使用，`T`不要包含该类型参数，因为它是未知的或不相关的 - 只需使用`T`（或在 Java 中`T<?>`）。

更多的信息：

通用/抽象类型和存在类型是对象/函数的消费者/客户端和它的生产者/实现之间的双重视角。当一方看到通用类型时，另一方看到存在类型。

在 Java 中，您可以定义一个泛型类：

```
public class MyClass<T> {
   // T is existential in here
   T whatever; 
   public MyClass(T w) { this.whatever = w; }

   public static MyClass<?> secretMessage() { return new MyClass("bazzlebleeb"); }
}

// T is universal from out here
MyClass<String> mc1 = new MyClass("foo");
MyClass<Integer> mc2 = new MyClass(123);
MyClass<?> mc3 = MyClass.secretMessage(); 
```

*   从 的*客户*的角度来看`MyClass`，`T`是通用的，因为您可以`T`在使用该类时替换任何类型，并且无论何时使用 的实例，您都必须知道 T 的实际类型`MyClass`
*   从实例方法`MyClass`本身的角度来看，`T`是存在的，因为它不知道真正的类型`T`
*   在 Java 中，`?`表示存在类型 - 因此当您在类中时，`T`基本上是`?`. 如果你想处理一个存在的实例`MyClass`，`T`你可以`MyClass<?>`像`secretMessage()`上面的例子一样声明。

如其他地方所讨论的，存在类型有时用于隐藏某些东西的实现细节。Java 版本可能如下所示：

```
public class ToDraw<T> {
    T obj;
    Function<Pair<T,Graphics>, Void> draw;
    ToDraw(T obj, Function<Pair<T,Graphics>, Void>
    static void draw(ToDraw<?> d, Graphics g) { d.draw.apply(new Pair(d.obj, g)); }
}

// Now you can put these in a list and draw them like so:
List<ToDraw<?>> drawList = ... ;
for(td in drawList) ToDraw.draw(td); 
```

正确捕捉这一点有点棘手，因为我假装使用某种函数式编程语言，而 Java 不是。但这里的重点是，您正在捕获某种状态以及在该状态上运行的函数列表，并且您不知道状态部分的真实类型，但是这些函数确实如此，因为它们已经与该类型匹配.

现在，在 Java 中，所有非最终的非原始类型都是部分存在的。这听起来可能很奇怪，但是因为声明为的变量`Object`可能是其子类`Object`，所以您不能声明特定类型，只能声明“此类型或子类”。因此，对象被表示为一个状态加上一个在该状态上操作的函数列表——确切地调用哪个函数是在运行时通过查找确定的。这非常类似于使用上述存在类型，其中您有一个存在状态部分和一个在该状态上运行的函数。

在没有子类型和强制类型转换的静态类型编程语言中，存在类型允许人们管理不同类型对象的列表。列表`T<Int>`不能包含`T<Long>`. 但是，列表`T<?>`可以包含 的任何变体`T`，允许将许多不同类型的数据放入列表中，并根据需要将它们全部转换为 int（或执行数据结构内提供的任何操作）。

几乎总是可以在不使用闭包的情况下将具有存在类型的记录转换为记录。闭包也是存在类型的，因为它被关闭的自由变量对调用者是隐藏的。因此，支持闭包但不支持存在类型的语言可以允许您创建共享相同隐藏状态的闭包，就像您将放入对象的存在部分一样。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2009-04-13T01:12:29.683

存在类型是不透明类型。

想想 Unix 中的文件句柄。你知道它的类型是 int，所以你可以很容易地伪造它。例如，您可以尝试从句柄 43 中读取。如果程序碰巧有一个使用此特定句柄打开的文件，您将从中读取。您的代码不一定是恶意的，只是草率（例如，句柄可能是未初始化的变量）。

存在类型从您的程序中隐藏。如果`fopen`返回一个存在类型，你所能做的就是将它与一些接受这种存在类型的库函数一起使用。例如，以下伪代码将编译：

```
let exfile = fopen("foo.txt"); // No type for exfile!
read(exfile, buf, size); 
```

接口“read”声明为：

存在一个类型 T 使得：

```
size_t read(T exfile, char* buf, size_t size); 
```

变量 exfile 不是 int，不是`char*`，也不是 struct File——在类型系统中没有什么可以表达的。您不能声明类型未知的变量，也不能将指针转换为该未知类型。语言不会让你。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-11-04T00:33:05.793

似乎我来晚了，但无论如何，本文档添加了另一种关于存在类型的观点，虽然不是特别与语言无关，但应该更容易理解存在类型：[http://www.cs.uu .nl/groups/ST/Projects/ehc/ehc-book.pdf](http://www.cs.uu.nl/groups/ST/Projects/ehc/ehc-book.pdf)（第 8 章）

> 普遍和存在量化类型之间的差异可以通过以下观察来表征：
> 
> *   使用具有 ∀ 量化类型的值决定了为量化类型变量的实例化选择的类型。例如，标识函数“id :: ∀aa → a”的调用者确定为这个特定的 id 应用程序选择的类型变量 a 的类型。对于函数应用程序“id 3”，此类型等于 Int。
>     
>     
> *   具有 ∃ 量化类型的值的创建确定并隐藏了量化类型变量的类型。例如，“∃a.(a, a → Int)”的创建者可能已经从“(3, λx → x)”构造了该类型的值；另一个创建者从“('x', λx → ord x)”构造了一个相同类型的值。从用户的角度来看，这两个值具有相同的类型，因此可以互换。该值具有为类型变量 a 选择的特定类型，但我们不知道是哪种类型，因此无法再利用此信息。此值特定类型信息已被“忘记”；我们只知道它存在。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2015-06-15T04:01:10.747

类型参数的所有值都存在通用类型。存在类型仅存在于满足存在类型约束的类型参数的值。

例如，在 Scala 中，表达存在类型的一种方法是抽象类型，它被限制在某些上限或下限。

```
trait Existential {
  type Parameter <: Interface
} 
```

等效地，受约束的通用类型是存在类型，如下例所示。

```
trait Existential[Parameter <: Interface] 
```

任何使用站点都可以使用 ，`Interface`因为任何可实例化的子类型都`Existential`必须定义`type Parameter`必须实现`Interface`.

Scala 中存在类型的[退化情况](https://stackoverflow.com/a/8686154/615784)是一种抽象类型，它从不被引用，因此不需要由任何子类型定义。`List[_]` [这在 Scala](https://stackoverflow.com/questions/1031042/difference-between-scalas-existential-types-and-javas-wildcard-by-example)和`List<?>`Java中有效地具有简写符号。

我的回答受到了 Martin Odersky[提出的统一](https://groups.google.com/d/msg/scala-language/PV4q6O1qIh8/yG4p8PA2Jf8J)抽象类型和存在类型的建议的启发。[随附](http://www.cs.ox.ac.uk/ralf.hinze/WG2.8/31/slides/martin.pdf#page=41)的幻灯片有助于理解。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-11-24T06:48:32.723

对抽象数据类型和信息隐藏的研究将存在类型带入了编程语言。将数据类型抽象化会隐藏有关该类型的信息，因此该类型的客户端不能滥用它。假设你有一个对象的引用……有些语言允许你将该引用转换为对字节的引用，并对那块内存做任何你想做的事情。为了保证程序的行为，语言强制您仅通过对象设计者提供的方法对对象的引用进行操作是很有用的。你知道类型存在，但仅此而已。

> 看：
> 
> 抽象类型有存在类型，MITCHEL & PLOTKIN
> 
> [http://theory.stanford.edu/~jcm/papers/mitch-plotkin-88.pdf](http://theory.stanford.edu/~jcm/papers/mitch-plotkin-88.pdf)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-12-05T06:43:17.197

我创建了这个图表。不知道是不是很严谨。但如果有帮助，我很高兴。 [![在此处输入图像描述](https://i.stack.imgur.com/hkccG.png)](https://i.stack.imgur.com/hkccG.png)

* * *

## 回答 #11

> 赞同：-6
> 
> 时间：2008-11-15T08:04:16.507

据我了解，这是一种描述接口/抽象类的数学方法。

至于 T = ∃X { X a; 整数 f(X); }

对于 C#，它将转换为通用抽象类型：

```
abstract class MyType<T>{
    private T a;

    public abstract int f(T x);
} 
```

“存在”只是意味着有某种类型遵守此处定义的规则。

# encryption - ROT13/47 之类的无密钥密码

> ID：292276
> 
> 赞同：1
> 
> 时间：2008-11-15T07:35:02.633
> 
> 标签：encryption, rot13

您是否知道其他与 ROT47 系列类似的密码？我的主要要求是它是无钥匙的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T08:13:59.437

听起来您可能正在寻找一些“经典密码学”解决方案。

替代密码是一个字符被另一个字符替换的编码。例如 A->Y、B->Q、C->P 等等。“Caesar Cipher”是保留顺序的特殊情况，“key”是偏移量。在 rot13/47 的情况下，“key”分别是 13 或 47，尽管它可能类似于 3 (A->D, B->E, C->F, ...)。

* * *

转置密码是不替换字母的密码，而是以预定义的方式重新排列字母的密码。例如：

```
CRYPTOGRAPHY 
```

可以写成

```
C Y T G A H
 R P O R P Y 
```

所以加密输出是通过从左到右读取两行来创建的

```
CYTGAHRPORPY 
```

* * *

rot13/47 的另一个特性是它是可逆的：

```
encode(encode(plaintext)) == plaintext 
```

如果这是您想要的属性，您可以简单地将消息与已知（先前确定的）XOR 值进行异或。然后，对具有相同值的密文进行异或运算将返回原始明文。一个例子是[memfrob 函数](http://www.gnu.org/software/libtool/manual/libc/Trivial-Encryption.html)，它只是用数字 42 的二进制表示对缓冲区进行异或。

* * *

您还可以查看其他形式的编码，例如[Base64](http://en.wikipedia.org/wiki/Base64)，如果它更接近您正在寻找的内容。

* * *

！！免责声明 - 如果您有实际上试图保护任何人的数据，请不要使用这些方法中的任何一种。虽然很有趣，但所有这些方法都很容易破解。

# java - 从 Java 中的 Hashtable 填充 JTable

> ID：292279
> 
> 赞同：2
> 
> 时间：2008-11-15T07:41:36.117
> 
> 标签：java, swing, hashtable, jtable

我有一个函数，它从用户那里获取一个密钥并生成一个哈希表（在密钥指定的模式上）。创建 Hashtable 后，我想填充一个 JTable，以便每一列代表一个键，每一行代表与该键关​​联的值。我尝试了一切，但无法完成这项工作。我不是从构造函数中创建表，因为我需要从用户那里获取输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T07:55:41.313

请参阅[如何使用表格：创建表格模型](http://java.sun.com/docs/books/tutorial/uiswing/components/table.html#data)。

> SimpleTableDemo 使用的 JTable 构造函数使用如下代码创建其表模型：

```
new AbstractTableModel() {
    public String getColumnName(int col) {
        return columnNames[col].toString();
    }
    public int getRowCount() { return rowData.length; }
    public int getColumnCount() { return columnNames.length; }
    public Object getValueAt(int row, int col) {
        return rowData[row][col];
    }
    public boolean isCellEditable(int row, int col)
        { return true; }
    public void setValueAt(Object value, int row, int col) {
        rowData[row][col] = value;
        fireTableCellUpdated(row, col);
    }
} 
```

您基本上必须以上述方式包装您的哈希表。这是一个例子。

```
package eed3si9n.hashtabletable;

import java.awt.BorderLayout;
import java.util.Enumeration;
import java.util.Hashtable;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.JButton;
import java.awt.Dimension;

public class MainForm extends JFrame {

    private static final long serialVersionUID = 1L;
    private JPanel jContentPane = null;  //  @jve:decl-index=0:visual-constraint="23,38"
    private JScrollPane m_scrollPane = null;
    private JTable m_table = null;
    private Hashtable<String, String> m_hash = null;
    private JButton m_btnAdd = null;    

    /**
     * This is the default constructor
     */
    public MainForm() {
        super();
        initialize();
        m_hash = new Hashtable<String, String>();
        m_hash.put("Dog", "Bow");
    }

    private void onButtonPressed() {
        m_hash.put("Cow", "Moo");
        m_table.revalidate();
    }

    /**
     * This method initializes this
     * 
     * @return void
     */
    private void initialize() {
        this.setSize(409, 290);
        this.setTitle("JFrame");
        this.setContentPane(getJContentPane());
    }

    /**
     * This method initializes jContentPane
     * 
     * @return javax.swing.JPanel
     */
    private JPanel getJContentPane() {
        if (jContentPane == null) {
            jContentPane = new JPanel();
            jContentPane.setLayout(new BorderLayout());
            jContentPane.setSize(new Dimension(500, 500));
            jContentPane.setPreferredSize(new Dimension(500, 500));
            jContentPane.add(getM_scrollPane(), BorderLayout.NORTH);
            jContentPane.add(getM_btnAdd(), BorderLayout.SOUTH);
        }
        return jContentPane;
    }

    /**
     * This method initializes m_scrollPane 
     *  
     * @return javax.swing.JScrollPane  
     */
    private JScrollPane getM_scrollPane() {
        if (m_scrollPane == null) {
            m_scrollPane = new JScrollPane();
            m_scrollPane.setViewportView(getM_table());
        }
        return m_scrollPane;
    }

    /**
     * This method initializes m_table  
     *  
     * @return javax.swing.JTable   
     */
    private JTable getM_table() {
        if (m_table == null) {
            m_table = new JTable();
            m_table.setModel(new AbstractTableModel(){
    private static final long serialVersionUID = 1L;

    public int getColumnCount() {
        return 2;
    }

    public int getRowCount() {
        return m_hash.size();
    }

    public String getColumnName(int column) {
        if (column == 0) {
            return "Animal";
        } else {
            return "Sound";
        }
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        if (columnIndex == 0) {
            return getKey(rowIndex);
        } else {
            return m_hash.get(getKey(rowIndex));
        } // if-else

    }

    private String getKey(int a_index) {
        String retval = "";
        Enumeration<String> e = m_hash.keys();
        for (int i = 0; i < a_index + 1; i++) {
            retval = e.nextElement();
        } // for

        return retval;
    }

            });
        }
        return m_table;
    }

    /**
     * This method initializes m_btnAdd 
     *  
     * @return javax.swing.JButton  
     */
    private JButton getM_btnAdd() {
        if (m_btnAdd == null) {
            m_btnAdd = new JButton();
            m_btnAdd.setPreferredSize(new Dimension(34, 30));
            m_btnAdd.addActionListener(new java.awt.event.ActionListener() {
                public void actionPerformed(java.awt.event.ActionEvent e) {
                    onButtonPressed();
                }
            });
        }
        return m_btnAdd;
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                MainForm frame = new MainForm();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(500, 500);
                frame.setVisible(true);
            }
        });
    }
}  //  @jve:decl-index=0:visual-constraint="10,10" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T11:12:17.750

首先，避免`Hashtable`，直奔`Map`。在这种情况下，您可能需要两种潜在的标准实现：`LinkedHashMap`可以保留添加条目的顺序；`TreeMap`, a `SortedMap`/ `NavigableMap`, 将对结果进行排序（其顺序可以由 a 确定`Comparator`。或者，您可能想要一种`Map`触发事件的形式，或者还提供一个`TableModel`.

如果您想要从 to 表进行一次转换`Map`，那么它非常简单。

```
public static TableModel toTableModel(Map<?,?> map) {
    DefaultTableModel model = new DefaultTableModel(
        new Object[] { "Key", "Value" }, 0
    );
    for (Map.Entry<?,?> entry : map) {
        model.addRow(new Object[] { entry.getKey(), entry.getValue() });
    }
    return model;
} 
```

然后只需`JTable`使用这个预先填充的模型创建。

（免责声明：我没有测试过或编译过这段代码。）

保持`Map`和`TableModel`同步是更多的代码。一般来说，最好尽可能避免重复状态。编写一个将自身暴露为 a`Map`和 a 的类`TableModel`。你可以通过一个`Map`触发事件和一个`TableModel`适应的来更加脱节`Map`（尽管注意它`Map`没有基于索引的随机访问，所以对于大型地图，你需要聪明或缓慢）。

换一种方式，更简单的方法是将数据直接添加到 a`DefaultTableModel`而根本不使用 a `Map`。

# c# - 你如何从堆栈帧中获取泛型参数的类型？

> ID：292295
> 
> 赞同：2
> 
> 时间：2008-11-15T08:07:09.373
> 
> 标签：c#, generics, reflection

我们应该通过工厂实例化我们的实体，因为它们在客户端和服务器上的设置不同。我想确保是这种情况，但不能让它发挥作用。

```
public interface IEntityFactory
{
    TEntity Create<TEntity>() where TEntity : new();
}

public abstract class Entity
{
    protected Entity()
    {
        VerifyEntityIsCreatedThroughFactory();
    }

    [Conditional("DEBUG")]
    private void VerifyEntityIsCreatedThroughFactory()
    {
        foreach (var methodBase in new StackTrace().GetFrames().Select(x => x.GetMethod()))
        {
            if (!typeof(IEntityFactory).IsAssignableFrom(methodBase.DeclaringType)
                || methodBase.Name != "Create")
                continue;

            // The generic type is TEnitiy but I want the provided type!
            if (methodBase.GetGenericArguments()[0] != GetType())
                Debug.Fail(string.Format("Use factory when creating {0}.", GetType().Name));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T13:34:18.090

是否可以在结构上而不是在运行时解决这个问题？您能否将实体和工厂隔离在不同的程序集中，然后为实体构造函数提供`internal`范围，以便只有工厂能够调用它们？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T16:30:15.020

感谢您的回复。将构造函数设置为 internal 是不可能的，因为我们有多个包含实体的程序集。现在我倾向于创建一个类，工厂注册要创建的类型，构造函数检查注册的类型，这不是我想要的解决方案，但现在可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T09:20:09.600

问题是工厂方法类型在运行时被解析，因此该方法被认为是“开放”的。在这种情况下，如您所见，通用参数类型将返回 TEntity。

不幸的是，（除非我遗漏了什么），获得什么类型的 TEntity 的唯一方法是首先使用 MethodInfo.MakeGenericMethod 创建一个封闭的方法然后执行，这当然不太可能由您的调用者完成。

有关其他详细信息，请参阅此[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms172334.aspx)。

# msbuild - msbuild：什么时候在构建项目中是 Microsoft.VisualBasic.Targets 由 msbuild“导入”的？

> ID：292298
> 
> 赞同：1
> 
> 时间：2008-11-15T08:10:56.447
> 
> 标签：msbuild

这是我的情况：我试图通过查看位于 .NET 框架安装路径中的构建文件来了解 msbuild 的工作原理：

```
C:\Windows\Microsoft.NET\Framework\v3.5>dir /s/b microsoft*
Microsoft.Build.Tasks.v3.5.xml
Microsoft.Build.xsd
Microsoft.Common.targets
Microsoft.Common.Tasks
Microsoft.CSharp.targets
Microsoft.Data.Entity.targets
Microsoft.VisualBasic.targets
Microsoft.WinFx.targets
MSBuild\Microsoft.Build.Commontypes.xsd
MSBuild\Microsoft.Build.Core.xsd 
```

我假设 msbuild 以 Microsoft.Common.Targets 开头，然后在将来的某个时候 msbuild“查看”我的 vb 项目文件扩展名 (.vbproj) 并加载“Microsoft.VisualBasic.targets”。

两个问题：

1）我的解释正确吗？

2) 你能向我解释一下，确定这是一个 .vbproj 文件并相应地加载“Microsoft.VisualBasic.targets”的代码在哪里？代码是锁定在某个程序集中的某个地方，还是在上面列出的构建文件中可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T08:17:44.047

它从您的 .vbproj 文件“开始”。看看那个文件，它会<Import> Microsoft.VisualBasic.targets，而后者又会<Import> Microsoft.Common.targets。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-12-01T17:00:56.837

在 4.0（目前在 Beta 中可用）中，有一个 /preprocess 开关可以让这一切变得清晰。

# c# - 从 C# 中的列表中选择唯一元素

> ID：292307
> 
> 赞同：24
> 
> 时间：2008-11-15T08:21:29.343
> 
> 标签：c#, list

如何从列表中选择唯一元素，`{0, 1, 2, 2, 2, 3, 4, 4, 5}`以便`{0, 1, 3, 5}`有效地删除重复元素的*所有实例*`{2, 4}`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2008-11-15T08:35:41.890

```
var numbers = new[] { 0, 1, 2, 2, 2, 3, 4, 4, 5 };

var uniqueNumbers =
    from n in numbers
    group n by n into nGroup
    where nGroup.Count() == 1
    select nGroup.Key;

// { 0, 1, 3, 5 } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2008-11-15T08:23:03.897

```
var nums = new int{ 0...4,4,5};
var distinct = nums.Distinct(); 
```

确保您使用的是 Linq 和 .NET 框架 3.5。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2009-01-16T12:49:35.190

与 lambda..

```
var all = new[] {0,1,1,2,3,4,4,4,5,6,7,8,8}.ToList();
var unique = all.GroupBy(i => i).Where(i => i.Count() == 1).Select(i=>i.Key); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2008-11-15T14:45:39.833

C# 2.0 解决方案：

```
static IEnumerable<T> GetUniques<T>(IEnumerable<T> things)
{
    Dictionary<T, int> counts = new Dictionary<T, int>();

    foreach (T item in things)
    {
        int count;
        if (counts.TryGetValue(item, out count))
            counts[item] = ++count;
        else
            counts.Add(item, 1);
    }

    foreach (KeyValuePair<T, int> kvp in counts)
    {
        if (kvp.Value == 1)
            yield return kvp.Key;
    }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-02-17T08:55:15.003

如果您的 List 中有复杂类型的对象并且想要获取属性的唯一值，这是另一种可行的方法：

```
var uniqueValues= myItems.Select(k => k.MyProperty)
                  .GroupBy(g => g)
                  .Where(c => c.Count() == 1)
                  .Select(k => k.Key)
                  .ToList(); 
```

或获得不同的值：

```
var distinctValues = myItems.Select(p => p.MyProperty)
                            .Distinct()
                            .ToList(); 
```

如果您的属性也是复杂类型，您可以为 Distinct() 创建自定义比较器，例如 Distinct(OrderComparer)，其中 OrderComparer 可能如下所示：

```
public class OrderComparer : IEqualityComparer<Order>
{
    public bool Equals(Order o1, Order o2)
    {
        return o1.OrderID == o2.OrderID;
    }

    public int GetHashCode(Order obj)
    {
        return obj.OrderID.GetHashCode();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-15T09:32:44.877

如果 Linq 对您不可用，因为您必须支持无法升级的遗留代码，则声明一个 Dictionary，其中第一个 int 是数字，第二个 int 是出现次数。循环浏览您的列表，加载您的字典。完成后，循环浏览您的字典，仅选择出现次数为 1 的那些元素。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-15T17:58:08.790

我相信马特的意思是：

```
 static IEnumerable<T> GetUniques<T>(IEnumerable<T> things)
 {
     Dictionary<T, bool> uniques = new Dictionary<T, bool>();
     foreach (T item in things)
     {
         if (!(uniques.ContainsKey(item)))
         {
             uniques.Add(item, true);
         }
     }
     return uniques.Keys;
 } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-02-20T03:21:34.567

给猫剥皮的方法有很多，但 HashSet 似乎是为这里的任务而设计的。

```
var numbers = new[] { 0, 1, 2, 2, 2, 3, 4, 4, 5 };

HashSet<int> r = new HashSet<int>(numbers);

foreach( int i in r ) {
    Console.Write( "{0} ", i );
} 
```

输出：

0 1 2 3 4 5

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-12-11T13:37:11.643

在 .Net 2.0 中，我非常确定这个解决方案：

```
public IEnumerable<T> Distinct<T>(IEnumerable<T> source)
{
     List<T> uniques = new List<T>();
     foreach (T item in source)
     {
         if (!uniques.Contains(item)) uniques.Add(item);
     }
     return uniques;
} 
```

# jquery - 用于 Asp.Net 2.0 的 Jquery 的 Ajax 属性

> ID：292308
> 
> 赞同：0
> 
> 时间：2008-11-15T08:21:57.830
> 
> 标签：jquery, ajax, asp.net-ajax, asp.net-2.0

我总是在博客中看到这样的代码：

```
$.ajax({
                    type: "POST",
                    contentType: "application/json; charset=utf-8",
                    url: "WebService.asmx/HelloWorld",
                    data: "{}",
                    dataType: "json",
                    success: function(msg) {
                        alert(msg.d);
                    }
                }); 
```

但我认为这仅适用于 asp.net 3.5。我无法使用 2.0 运行它。如何在我的应用程序中使用这些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-16T14:32:53.273

您需要将此属性添加到您的网络服务器类

```
[System.Web.Script.Services.ScriptService]
public class Service : System.Web.Services.WebService 
```

并将此属性赋予您的功能

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
```

从技术上讲，您不需要指定 responseformat，因为它会根据您在请求中指定的格式进行响应。并且您*必须*在请求中指定格式。

问候
K

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-01-05T14:45:25.550

如果您使用 jQuery 连接到服务器，则您的 HTML 中不需要`ScriptManager`。

我认为你代码的其他部分是正确的。只需删除`ScriptManager`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T08:50:58.457

我已经知道这篇文章，但它对我没有帮助。

在我的示例应用程序中，我使用以下代码：

**我的jQuery代码：**

```
 $(document).ready(function() {            
        $('#clKaydet').click(function() {
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "WebService.asmx/HelloWorld",
                data: "{}",
                dataType: "json",
                success: function(msg) {
                    alert(msg);
                }
            });

        });

    }); 
```

**我的 HTML 代码：**

```
<form id="form1" runat="server">
    <asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" runat="server" />
    <div>

        <input type="button" id="clKaydet" runat="server" value="Kayıt" onclick="Kayit()" />
    </div>

    </div>
    </form> 
```

**我的网络服务代码：**

```
 <WebMethod()> _
Public Function HelloWorld() As String
    Dim sText As String = "Hello"
    Return sText
End Function 
```

有什么错误吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T09:04:57.493

我们使用 jQuery 进行所有 DOM 操作，但是当将数据发送回服务器时，我们使用 ASP.Net AJAX 来利用自动生成的代理类

让生活变得真正简单！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T12:36:06.303

我认为您缺少的一点是标有 WebMethod 标记的方法会将数据序列化为 XML，而不是 JSON。使用 ASP.NET MVC，您可以本机返回 JSON，但如果您想要将 JSON 用于 WebMethod，您可能需要编写自己的转换器。我建议尝试将 AJAX 调用的数据类型更改为“xml”，看看是否可行。

我也没有将 jquery 用于 AJAX（还），所以我还没有尝试过（还）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T21:28:15.247

总之，您是否这么说，我不能直接将这些代码与 asp.net 2.0 一起使用？

# map - Web 应用程序中的地理数据可视化

> ID：292314
> 
> 赞同：2
> 
> 时间：2008-11-15T08:31:48.463
> 
> 标签：map, charts, data-visualization

我有一个为地理相关数据实施可视化服务的请求。

我有一份**意大利邮政编码**列表（它们在意大利语中称为 CAP）。我已经找到了一张将这些邮政编码映射到**地理坐标 (lat/long)**的表格。

因此，我必须将数据可视化为地图的结构如下：

```
ZIPcode Latitude Longitude RequestCount
------- -------- --------- ------------ 
```

是否有一种简单的方法（使用 Web 服务或使用组件自己实现它 - 最好在 .NET 中）来**创建类似于我在下面插入的图像的地图**？它不需要那么漂亮，**也不一定是地缘政治**。

我只需要为每个点显示一个**更小或更大的圆圈并在其旁边**显示RequestCount 的值。我认为这可以使用坐标来完成，或者，如果有一些服务可以映射意大利邮政编码，则使用邮政编码。

*先感谢您！*

[替代文字 http://img515.imageshack.us/img515/3814/carsalesuh6.png](http://img515.imageshack.us/img515/3814/carsalesuh6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T09:09:34.753

看看[.net Charting](http://www.dotnetcharting.com/map_charts.aspx)和[Chart FX Maps](http://www.softwarefx.com/Extensions/featuresMaps.aspx)（我以前从未使用过这些）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T09:28:18.397

也许...

使用谷歌地图 API。您不能绘制圆形叠加层，但可以绘制多边形。这是绘制多边形的 API。一个 8 边形的多边形看起来已经很像圆形了。你可以尝试更多的面来看看它的外观。

以下是 Google GPolygon 类的 API 参考：

[http://code.google.com/apis/maps/documentation/reference.html#GPolygon](http://code.google.com/apis/maps/documentation/reference.html#GPolygon)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T10:34:13.023

我在许多项目中都使用过 MapServer，它运行良好且非常灵活。虽然没有尝试过 .NET 绑定：

[http://www.paolocorti.net/2006/09/20/mapserver-tutorial-for-c-mapscript-asp-net/](http://www.paolocorti.net/2006/09/20/mapserver-tutorial-for-c-mapscript-asp-net/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-15T10:49:11.650

[GeoNames](http://www.geonames.org/postalcode-search.html?q=80125&country=IT)为地理测绘提供数据集和开源库

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-15T14:14:11.223

我已经将[Fusion Maps](http://www.fusioncharts.com/maps/)用于此类事情。它是基于 Flash 的，带有一个 javascript API。您可以轻松地为它提供一个静态 XML 文件来启动它，但我还构建了各种 Web 服务来为其提供动态功能。还有很多选项可以更改地图的外观。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-22T04:48:18.423

看看 Mapv - 一个地理可视化库

[![在此处输入图像描述](https://i.stack.imgur.com/Niol6.jpg)](https://i.stack.imgur.com/Niol6.jpg)

[在此处输入图像描述](https://i.stack.imgur.com/Niol6.jpg)

# apache-flex - 如何在 Flash（10 之前的版本）中处理从右到左的语言？

> ID：292316
> 
> 赞同：4
> 
> 时间：2008-11-15T08:32:39.023
> 
> 标签：apache-flex, flash, arabic

我们目前正在使用 Flex 创建一个 Web 应用程序。我们无法从用户那里获取阿拉伯语文本并正确显示（例如在聊天功能中）。虽然 Flash 10 可能会解决这个问题，但我们不想强迫我们的用户升级。

Flash 翻转句子单词的顺序。因此，如果我在文本字段中写了“Hello World”之类的内容，它将在聊天区域中显示为“World Hello”。

在 Flash 中是否有使用从右到左语言的标准方法？

*我们目前用一个函数来翻转单词的顺序，但是当在聊天中使用英文或特殊字符时，事情会变得一团糟，比如:)或:D *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-12-06T18:05:51.590

您可能还想[在这里查看 FalabyAS3Flex](http://www.arabicode.com/en/flaraby/as3/flex/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-12-02T22:25:51.443

你可能想试试这个： [http ://www.red-id.com/blog/category/RTL-Flash.aspx](http://www.red-id.com/blog/category/RTL-Flash.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T12:57:41.983

这似乎是一个 Unicode 问题，因此通过 Google 的快速 talaash 给了我[Flash 中的 Unicode](http://polygeek.com/110_flex_unicode-in-flash)，但可能更重要的是[Flash: RTL (right-to-left)](http://www.blog.lessrain.com/flash-ltr-left-to-right-and-rtl-right-to-left/)，因为它提到了阿拉伯语（以及其他 RTL语言）以及[用于 Flash 的 RTL 文本输出类](http://www.electroinn.com/blog/?p=6)。

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-11-11T07:59:15.260

没有像样的方法来支持这一点。您尝试的任何东西都将是一种黑客行为，并且在某些情况下会中断。而且绝对不适用于编辑。

我会说：要求用户更新。

Player 10 在所有市场的渗透率已经超过 90% ( [http://www.adobe.com/products/player_census/flashplayer/version_penetration.html](http://www.adobe.com/products/player_census/flashplayer/version_penetration.html) )。

用户可以理解你别无选择。它是“对您的语言的更新或支持非常糟糕”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-03-18T08:36:43.843

[这](http://giladmanor.blogspot.com/2009/03/flex-right-to-left-for-hebrew-man.html)是一个在 flex 中处理文本方向的示例。

# graphics - 用于 C 或 Python 的快速矢量渲染库

> ID：292324
> 
> 赞同：6
> 
> 时间：2008-11-15T08:57:47.257
> 
> 标签：graphics, vector

我正在寻找像开罗这样的图书馆，速度要快得多。它必须是与 C 或 Python 一起工作的库。如果我能输出到 PNG 和 SVG 也很好。我在看 Qt 的亚瑟，但那是 C++，我不是粉丝。有什么建议么？

编辑：另一个前提是它必须在 Linux 下运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T09:23:31.650

我不知道什么是快，但这里有一个[渲染比较](http://web.archive.org/web/20100105151758/http://www.linuxrising.org/svg_test/)。

编辑：显然[Xara](http://www.xaraxtreme.org/about-performance.html)应该比开罗快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T12:23:19.167

Python 有[aggdraw](http://effbot.org/zone/aggdraw-index.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-16T22:44:31.207

Google 的 Chrome 浏览器和 Android 平台使用了他们的 Skia 矢量库。

我听说 Vladimir Vukicevic 已迅速将 Cairo 移植到能够使用 Skia 的二手消息中。快速谷歌搜索似乎证实了这一点：

[http://people.mozilla.com/~vladimir/misc/cairo-skia.patch](http://people.mozilla.com/~vladimir/misc/cairo-skia.patch)

不确定这何时或是否成为主流，但我预计会全面加速！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-06-19T17:49:43.820

OpenGL？

它可以很好地完成 2D。:)

# asp.net - Visual Studio 2005 中缺少“导出模板”选项

> ID：292339
> 
> 赞同：2
> 
> 时间：2008-11-15T09:26:12.707
> 
> 标签：asp.net, templates, visual-studio-2005

我正在尝试学习和创建**Visual Studio 模板**，并根据[此 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/cc188697.aspx)，

> 要创建的最简单的模板类型是项目模板。为此，只需打开一个包含您要用作模板的文件的项目，然后选择 File | 导出模板以运行导出模板向导

现在，**问题**是我的 Visual Studio 2005**中缺少“导出模板”选项**。我使用的版本是**VS 2005 团队套件**，我打开要导出的项目模板是**“ASP.NET Web 应用程序**”。

是否需要安装任何补丁或进行任何设置以获取“导出模板”选项？还是我没有按照正确的方式创建模板？

链接/指向 Internet 上关于 VS 模板的好文章/资源也会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T10:20:28.090

查看 Visual Studio 中的“**工具/自定义/命令”选项**。

您要查找的命令应该是**File group**，因此只需将其从 Customize 对话框拖到 File 下拉菜单中。

[替代文字 http://www.xmlx.net/software/images/vs2005customizemenu.gif](http://www.xmlx.net/software/images/vs2005customizemenu.gif)

*我希望这有帮助！*

# vba - 基本语法和示例教程

> ID：292348
> 
> 赞同：3
> 
> 时间：2008-11-15T09:33:50.727
> 
> 标签：vba, ms-office

在工作中，我与 MS-Office 密切合作。我设法生成了一些执行各种任务的脚本。虽然我可以将函数移植到 VBA 有一些困难，但我并不完全理解 VBA 语言的基础。

我寻求基本语法和示例的项目包括：“hello world”程序、循环、流控制、变量声明、变量类型转换、对象（如果可能）、文件/用户输入/输出，何时可以使用“with”块， 等等。

有人可以为我提供一个 VBA 教程的链接，或许还有上述项目的详细信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T10:22:47.273

[MSDN：使用 VBA 开发 Office 应用程序](http://msdn.microsoft.com/en-us/library/aa140980(office.10).aspx "MSDN：使用 VBA 开发 Office 应用程序")

如果您还没有看过它，您可以从 Office 中的 Visual Basic 帮助中学到很多东西。要访问它，请打开 Office 程序并按 Alt+F11 打开 Visual Basic 编辑器。然后按 F1 或导航到帮助 -> Microsoft Visual Basic 帮助。此外，正如 Mitch 所提到的，如果您学习了 VB6 的基础知识，您可以对 VBA 使用相同的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T09:55:40.293

VBA post Office 2000 的版本几乎与VB6 相同。这个[MSDN 站点](http://msdn.microsoft.com/en-us/vbasic/ms789086.aspx)是一个很好的起点。[VB6 资源中心](http://msdn.microsoft.com/en-au/vbrun/default.aspx)也可能有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-11-02T03:32:16.693

我想你会发现这个视频教程很有帮助：

[http://developresource.weebly.com/10/post/2011/11/vba.html](http://developresource.weebly.com/10/post/2011/11/vba.html)

还有一些其他很棒的东西你可以在那里找到所以试试看:)

# visual-studio - 在 VS 2008 中打开一个 VS 2003 C++ 项目

> ID：292350
> 
> 赞同：0
> 
> 时间：2008-11-15T09:41:34.143
> 
> 标签：visual-studio, visual-studio-2008, solution, visual-studio-2003

找到了一些旧代码，大约是 VS 2003。现在我刚刚安装了 VS 2008 (SP1)。当我尝试打开 *.sln 文件时，它会尝试转换项目。报告通知我它已成功完成，但解决方案为空，标有“项目文件已卸载”。VS 2008 甚至不包括打开 *.vcproj 文件。

有谁知道如何转换我的解决方案？

PS：我发现了几个转换工具，可以从 VS 2005 转换为 2008，反之亦然 - 没有人回顾 2003 :(

一如既往，感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T12:39:19.587

我建议通过创建一个新项目来手动转换项目。如果您现在遇到问题，那么以后您将无法通过尝试其他导入方法来确定。

附带说明一下——我在 vs2005 上，我经常收到 2008 年的项目交给我。我进入 sln 和 proj 文件并重命名版本号，它工作得很好。希望对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T10:19:34.767

也许您可以先将您的解决方案从 VS2003 转换为 VS2005，然后再从 VS2005 转换为 VS2008 ???

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T13:00:50.230

借调 Klathzazts “手动更改版本号”。当升级过程中出现问题时，这通常是处理 VSC++ 的最佳解决方案。

# mysql - MySQL True vs False 优化

> ID：292351
> 
> 赞同：1
> 
> 时间：2008-11-15T09:43:40.473
> 
> 标签：mysql, optimization, indexing

有人可以向我解释为什么我会看到以下行为：

```
mysql> show index from history_historyentry;
+----------------------+------------+------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table                | Non_unique | Key_name                     | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+----------------------+------------+------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| history_historyentry |          0 | PRIMARY                      |            1 | id          | A         |       48609 |     NULL | NULL   |      | BTREE      |         |  
+----------------------+------------+------------------------------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
1 row in set (0.00 sec)

mysql> explain SELECT COUNT(*) FROM `history_historyentry`  WHERE `history_historyentry`.`is_deleted` = False;
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table                | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | history_historyentry | ALL  | NULL          | NULL | NULL    | NULL | 48612 | Using where | 
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
1 row in set (0.00 sec)

mysql> explain SELECT COUNT(*) FROM `history_historyentry`  WHERE `history_historyentry`.`is_deleted` = True;
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table                | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | history_historyentry | ALL  | NULL          | NULL | NULL    | NULL | 48613 | Using where | 
+----+-------------+----------------------+------+---------------+------+---------+------+-------+-------------+
1 row in set (0.00 sec)

mysql> create index deleted on history_historyentry (is_deleted) ;
Query OK, 48627 rows affected (0.38 sec)
Records: 48627  Duplicates: 0  Warnings: 0

mysql> explain SELECT COUNT(*) FROM `history_historyentry`  WHERE `history_historyentry`.`is_deleted` = False;
+----+-------------+----------------------+-------+---------------+---------+---------+------+-------+--------------------------+
| id | select_type | table                | type  | possible_keys | key     | key_len | ref  | rows  | Extra                    |
+----+-------------+----------------------+-------+---------------+---------+---------+------+-------+--------------------------+
|  1 | SIMPLE      | history_historyentry | index | deleted       | deleted | 1       | NULL | 36471 | Using where; Using index | 
+----+-------------+----------------------+-------+---------------+---------+---------+------+-------+--------------------------+
1 row in set (0.00 sec)

mysql> explain SELECT COUNT(*) FROM `history_historyentry`  WHERE `history_historyentry`.`is_deleted` = True;
+----+-------------+----------------------+------+---------------+---------+---------+-------+------+-------------+
| id | select_type | table                | type | possible_keys | key     | key_len | ref   | rows | Extra       |
+----+-------------+----------------------+------+---------------+---------+---------+-------+------+-------------+
|  1 | SIMPLE      | history_historyentry | ref  | deleted       | deleted | 1       | const |  166 | Using index | 
+----+-------------+----------------------+------+---------------+---------+---------+-------+------+-------------+
1 row in set (0.00 sec) 
```

为什么 True 与 False 的索引使用率存在差异？具体来说，在false的情况下，ref列是NULL，额外的列是Using where；使用索引。但在真实情况下，ref 列是 const，而额外的列是 Using index。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T09:46:44.867

大概是因为一个提供了良好的选择性而另一个没有，即只有一小部分行被删除。

基于成本的优化器仅在提供良好选择性（通常为 10%）或可能是覆盖索引（无需进一步查找表或书签即可满足查询）时才使用索引。

# git - “git pull”和“git fetch”有什么区别？

> ID：292357
> 
> 赞同：13061
> 
> 时间：2008-11-15T09:51:09.660
> 
> 标签：git, version-control, git-pull, git-fetch

`git pull`和 和有什么区别`git fetch`？

* * *

## 回答 #1

> 赞同：10901
> 
> 时间：2008-11-15T09:52:40.267

用最简单的术语来说，`git pull`a`git fetch`后跟 a `git merge`。

您可以*`git fetch`*随时更新您的远程跟踪分支`refs/remotes/<remote>/`。此操作永远不会更改您自己在 下的任何本地分支`refs/heads`，并且在不更改工作副本的情况下可以安全地执行此操作。我什至听说有人`git fetch`在后台定期运行 cron 作业（尽管我不建议这样做）。

A*`git pull`*是您要使用其远程版本更新本地分支，同时更新您的其他远程跟踪分支。

来自 Git 文档[`git pull`](http://git-scm.com/docs/git-pull)：

> 在其默认模式下，`git pull`是`git fetch`后跟的简写`git merge FETCH_HEAD`。

* * *

## 回答 #2

> 赞同：2419
> 
> 时间：2011-08-18T08:53:22.197

*   当你使用 时`pull`，Git 会尝试自动合并。*它是上下文敏感*的，因此 Git 会将所有拉取的提交合并到您当前正在处理的分支中。 `pull`自动合并提交**而不让您先查看它们**。如果你不仔细管理你的分支，你可能会遇到频繁的冲突。

*   当您执行此操作时`fetch`，Git 会从目标分支收集您当前分支中不存在的所有提交，并将**它们存储在您的本地存储库**中。但是，**它不会将它们与您当前的分支合并**。如果您需要使存储库保持最新，但正在处理可能会因更新文件而中断的事情，这将特别有用。要将提交集成到您当前的分支中，您必须在`merge`之后使用。

* * *

## 回答 #3

> 赞同：1329
> 
> 时间：2013-03-31T18:43:47.200

将 git 的设计理念与更传统的源代码控制工具（如 SVN）的理念进行对比非常重要。

Subversion 是使用客户端/服务器模型设计和构建的。有一个存储库是服务器，多个客户端可以从服务器获取代码，对其进行处理，然后将其提交回服务器。假设客户端在需要执行操作时始终可以联系服务器。

Git 旨在支持更分布式的模型，而不需要中央存储库（尽管您当然可以根据需要使用一个）。git 也被设计成客户端和“服务器”不需要同时在线。Git 的设计目的是让不可靠链接上的人们甚至可以通过电子邮件交换代码。可以完全断开连接并刻录 CD 以通过 git 交换代码。

为了支持这个模型，git 使用你的代码维护一个本地存储库，以及一个镜像远程存储库状态的附加本地存储库。通过在本地保存远程存储库的副本，即使无法访问远程存储库，git 也可以找出所需的更改。稍后当您需要将更改发送给其他人时，git 可以将它们作为一组更改从已知的时间点传输到远程存储库。

*   **`git fetch`**是说“更新我的远程存储库的本地副本”的命令。

*   **`git pull`**说“将远程存储库中的更改带到我保存自己代码的地方。”

通常**`git pull`**这样做是**`git fetch`**为了更新远程存储库的本地副本，然后将更改合并到您自己的代码存储库和可能的工作副本中。

需要记住的是，您的工作站上通常至少有**三个项目副本**。一个副本是您自己的存储库，其中包含您自己的提交历史记录。第二个副本是您正在编辑和构建的工作副本。第三个副本是远程存储库的本地“缓存”副本。

* * *

## 回答 #4

> 赞同：1017
> 
> 时间：2015-06-09T13:30:39.580

这是[奥利弗·斯蒂尔 (Oliver Steele) 对所有这些如何组合在一起的形象](http://blog.osteele.com/2008/05/my-git-workflow/)：

![在此处输入图像描述](https://i.stack.imgur.com/XwVzT.png)

如果有足够的兴趣，我想我可以更新图像以添加`git clone`和`git merge`...

* * *

## 回答 #5

> 赞同：538
> 
> 时间：2010-05-07T19:23:37.927

的一个用例`git fetch`是，以下内容将告诉您自上次拉动以来远程分支中的任何更改......因此您可以在进行实际拉动之前进行检查，这可能会更改当前分支和工作副本中的文件。

```
git fetch
git diff ...origin 
```

请参阅：[https](https://git-scm.com/docs/git-diff) ://git-scm.com/docs/git-diff关于 diff 命令中的双点和三点语法

* * *

## 回答 #6

> 赞同：404
> 
> 时间：2012-05-11T18:37:27.180

我花了一点时间来理解有什么区别，但这是一个简单的解释。`master`在您的本地主机中是一个分支。

克隆存储库时，您会将整个存储库获取到本地主机。这意味着那时您有一个指向`HEAD`和指向同一个的源/主指针`HEAD`。

当您开始工作并提交时，您将主指针前进到`HEAD`+ 您的提交。但是原点/主指针仍然指向克隆时的位置。

所以区别将是：

*   如果你这样做，`git fetch`它只会获取远程存储库 ( [GitHub](http://en.wikipedia.org/wiki/GitHub) ) 中的所有更改并将源/主指针移动到`HEAD`. 同时，您的本地分支主管将继续指向它所在的位置。
*   如果您执行 a `git pull`，它将基本上执行 fetch （如前所述）并将任何新更改合并到您的 master 分支并将指针移动到`HEAD`.

* * *

## 回答 #7

> 赞同：269
> 
> 时间：2016-01-25T17:28:50.103

有时，视觉表示会有所帮助。

[![在此处输入图像描述](https://i.stack.imgur.com/ZYAVG.jpg)](https://i.stack.imgur.com/ZYAVG.jpg)

* * *

## 回答 #8

> 赞同：265
> 
> 时间：2013-04-13T17:31:34.557

**简要地**

`git fetch`类似于`pull`但不合并。即它获取远程更新（`refs`和`objects`），但您的本地保持不变（即`origin/master`得到更新但`master`保持不变）。

`git pull`从远程下拉并立即合并。

**更多的**

`git clone`克隆一个 repo。

`git rebase`将当前分支中不在上游分支中的内容保存到临时区域。您的分支现在与开始更改之前相同。因此，`git pull -rebase`将拉下远程更改，倒回您的本地分支，在当前分支的顶部一一重播您的更改，直到您是最新的。

此外，`git branch -a`还将向您展示所有分支机构的确切情况 - 本地和远程。

这篇博文很有用：

[git pull、git fetch 和 git clone（和 git rebase）之间的区别 - Mike Pearce](https://web.archive.org/web/20190711105239/http://blog.mikepearce.net/2010/05/18/the-difference-between-git-pull-git-fetch-and-git-clone-and-git-rebase/)

和涵盖`git pull`,`git fetch`和.`git clone``git rebase`

## 更新

我想我会更新这个来展示你在实践中是如何使用它的。

1.  从远程更新您的本地仓库（但不要合并）：

    ```
     git fetch 
    ```

2.  下载更新后，让我们看看差异：

    ```
     git diff master origin/master 
    ```

3.  如果您对这些更新感到满意，请合并：

    ```
     git pull 
    ```

笔记：

第 2 步：有关本地和远程之间差异的更多信息，请参阅：[如何将本地 git 分支与其远程分支进行比较？](https://stackoverflow.com/questions/1800783/compare-local-git-branch-with-remote-branch)

在第 3 步：在这里做一个可能更准确（例如在一个快速变化的 repo 上）`git rebase origin`。请参阅另一个答案中的[@Justin Ohms 评论](https://stackoverflow.com/questions/292357/what-is-the-difference-between-git-pull-and-git-fetch#comment16374948_5376768)。

另见： http: [//longair.net/blog/2009/04/16/git-fetch-and-merge/](http://longair.net/blog/2009/04/16/git-fetch-and-merge/)

* * *

## 回答 #9

> 赞同：195
> 
> 时间：2008-11-15T09:52:50.580

```
git-pull - 从另一个存储库或本地分支获取并合并
概要

git 拉…
描述

使用给定的参数运行 git-fetch，并调用 git-merge 来合并
将头检索到当前分支。使用 --rebase，调用 git-rebase
而不是 git-merge。

请注意，您可以使用 . （当前目录）作为 <repository> 拉取
来自本地存储库——这在合并本地分支时很有用
进入当前分支。

另请注意，用于 git-pull 本身和底层 git-merge 的选项
必须在用于 git-fetch 的选项之前给出。

```

如果你想合并历史，你会拉，如果你只是“想要 codez”，你会提取，因为有人在这里标记了一些文章。

* * *

## 回答 #10

> 赞同：175
> 
> 时间：2011-03-21T11:07:20.773

您可以从远程存储库中获取，查看差异，然后提取或合并。

这是一个名为远程存储库`origin`和一个名为`master`跟踪远程分支的分支的示例`origin/master`：

```
git checkout master                                                  
git fetch                                        
git diff origin/master
git rebase origin master 
```

* * *

## 回答 #11

> 赞同：174
> 
> 时间：2017-06-21T09:48:21.043

**好的**，这里有一些关于`git pull`and的信息`git fetch`，所以你可以理解实际的区别......简单来说，**fetch**获取最新数据，但不是代码更改，不会弄乱你当前的本地分支代码，而是**pull** get代码更改并将其合并到您的本地分支，继续阅读以获取有关每个分支的更多详细信息：

## 获取

它将所有**引用**和**对象**以及任何新分支下载到您的本地存储库...

> 从一个或多个其他存储库中获取分支和/或标签（统称为“引用”），以及完成其历史所需的对象。远程跟踪分支已更新（有关控制此行为的方法，请参见下面的描述）。
> 
> 默认情况下，任何指向正在获取的历史的标签也会被获取；效果是获取指向您感兴趣的分支的标签。可以通过使用 --tags 或 --no-tags 选项或配置 remote..tagOpt 来更改此默认行为。通过使用显式获取标签的 refspec，您也可以获取不指向您感兴趣的分支的标签。
> 
> git fetch 可以从单个命名存储库或 URL 或从多个存储库中获取，如果给定并且有一个遥控器。配置文件中的条目。（见 git-config [1](https://i.stack.imgur.com/nWYnQ.png)）。
> 
> 如果未指定远程，默认情况下将使用原始远程，除非为当前分支配置了上游分支。
> 
> 获取的 refs 的名称以及它们指向的对象名称被写入 .git/FETCH_HEAD。脚本或其他 git 命令（例如 git-pull）可能会使用此信息。

* * *

## git 拉

它会将**远程**的更改应用到本地的**当前分支**...

> 将来自远程存储库的更改合并到当前分支中。在其默认模式下，git pull 是 git fetch 后跟 git merge FETCH_HEAD 的简写。
> 
> 更准确地说， git pull 使用给定的参数运行 git fetch 并调用 git merge 将检索到的分支头合并到当前分支中。使用 --rebase，它运行 git rebase 而不是 git merge。
> 
> 应该是传递给 git-fetch [1](https://i.stack.imgur.com/nWYnQ.png)的远程存储库的名称。可以命名任意远程引用（例如，标签的名称），甚至是具有相应远程跟踪分支的引用集合（例如，refs/heads/ *:refs/remotes/origin/*），但通常是名称远程存储库中的一个分支。
> 
> 和 的默认值是从 git-branch --track 设置的当前分支的“远程”和“合并”配置中读取的。

* * *

我还创建了下面的**视觉效果**，向您展示如何`git fetch`一起`git pull`工作......

[![git pull 和 git fetch](https://i.stack.imgur.com/nWYnQ.png)](https://i.stack.imgur.com/nWYnQ.png)

* * *

## 回答 #12

> 赞同：173
> 
> 时间：2011-05-15T20:53:04.537

简短而简单的答案是`git pull`紧随`git fetch`其后的是`git merge`.

需要注意的是，**不管你喜不喜欢，它**`git pull`都会自动合并。当然，这可能会导致合并冲突。假设你的遥控器是，你的分支是. 如果您在拉取之前，您应该对潜在的合并冲突有所了解，并可以相应地准备您的本地分支。**`origin``master``git diff origin/master`**

 **除了拉和推之外，[一些工作流程](https://web.archive.org/web/20150321185928/http://mettadore.com/2011/09/07/the-ever-deployable-github-workflow//)还涉及到`git rebase`，例如这个，我从链接的文章中转述：

```
git pull origin master
git checkout foo-branch
git rebase master
git push origin foo-branch 
```

如果您发现自己处于这种情况下，您可能会想`git pull --rebase`. 除非你真的，真的知道你在做什么，否则我建议不要这样做。此警告来自, version的`man`页面：`git-pull``2.3.5`

> 这是一种潜在的危险操作模式。它改写了历史，当您已经发布了该历史时，这并不是一个好兆头。除非您仔细阅读 git-rebase(1)，否则不要使用此选项。

* * *

## 回答 #13

> 赞同：148
> 
> 时间：2015-02-06T11:48:13.600

![在此处输入图像描述](https://i.stack.imgur.com/aiQDJ.png)

这种交互式图形表示对于理解 git 非常有帮助：http: [//ndpsoftware.com/git-cheatsheet.html](http://ndpsoftware.com/git-cheatsheet.html)

`git fetch`只需将更改从远程“下载”到本地存储库。`git pull`下载更改并将它们合并到您当前的分支中。“在其默认模式下，`git pull`是`git fetch`后跟的简写`git merge FETCH_HEAD`。”

* * *

## 回答 #14

> 赞同：139
> 
> 时间：2015-12-23T15:31:03.377

### 奖金：

在谈到上述答案中的 pull & fetch 时，我想分享一个有趣的技巧，

# **`git pull --rebase`**

上面这个命令是我 git 生活中最有用的命令，它节省了很多时间。

在将您的新提交推送到服务器之前，请尝试使用此命令，它会自动同步最新的服务器更改（使用 fetch + 合并）并将您的提交放在 git log 的顶部。无需担心手动拉/合并。

在以下位置查找详细信息：http: [//gitolite.com/git-pull--rebase](http://gitolite.com/git-pull--rebase)

* * *

## 回答 #15

> 赞同：126
> 
> 时间：2014-02-19T21:18:54.000

我喜欢对情况有一些直观的表示来掌握这些东西。也许其他开发人员也想看到它，所以这是我的补充。我不完全确定这一切都是正确的，所以如果您发现任何错误，请发表评论。

```
 LOCAL SYSTEM
                  . =====================================================    
================= . =================  ===================  =============
REMOTE REPOSITORY . REMOTE REPOSITORY  LOCAL REPOSITORY     WORKING COPY
(ORIGIN)          . (CACHED)           
for example,      . mirror of the      
a github repo.    . remote repo
Can also be       .
multiple repo's   .
                  .
                  .
FETCH  *------------------>*
Your local cache of the remote is updated with the origin (or multiple
external sources, that is git's distributed nature)
                  .
PULL   *-------------------------------------------------------->*
changes are merged directly into your local copy. when conflicts occur, 
you are asked for decisions.
                  .
COMMIT            .                             *<---------------*
When coming from, for example, subversion, you might think that a commit
will update the origin. In git, a commit is only done to your local repo.
                  .
PUSH   *<---------------------------------------*
Synchronizes your changes back into the origin. 
```

获取遥控器镜像的一些主要优点是：

*   **性能**（滚动浏览所有提交和消息，而不试图通过网络挤压它）
*   **关于本地 repo 状态的反馈**（例如，我使用 Atlassian 的 SourceTree，它会给我一个灯泡，指示与原点相比我是提前还是落后提交。可以使用 GIT FETCH 更新此信息）。

* * *

## 回答 #16

> 赞同：115
> 
> 时间：2017-02-07T14:15:06.597

**GIT Fetch**和**GIT Pull**之间的区别可以用以下场景来解释：（ *请记住，图片胜于雄辩！，我提供了图片表示）*

让我们举一个例子，您正在与您的团队成员一起处理一个项目。所以项目会有一个主分支，所有贡献者必须将它分叉到他们自己的本地存储库，然后在这个本地分支上修改/添加模块，然后推送回主分支。

因此， 当您在本地存储库上分叉主项目时，两个分支的**初始状态**`A`将是这样的 - ( ，`B`并且`C`是项目的模块已经完成)

[![在此处输入图像描述](https://i.stack.imgur.com/SPky3.png)](https://i.stack.imgur.com/SPky3.png)

现在，您已经开始开发新模块（假设`D`），当您完成`D`模块后，您希望将其推送到主分支，但同时发生的情况是您的一位队友开发了新模块`E`，`F`并修改了`C`.
所以现在发生的事情是您的本地存储库落后于项目的原始进度，因此将您的更改推送到主分支可能会导致冲突并可能导致您的模块`D`发生故障。

[![在此处输入图像描述](https://i.stack.imgur.com/SpIlX.png)](https://i.stack.imgur.com/SpIlX.png)

为避免此类问题并与项目的原始进度并行工作，有两种方法：

**1\. Git Fetch -**这将下载对 origin/main 分支项目所做的所有更改，这些更改不存在于您的本地分支中。并将等待 Git Merge 命令将已获取的更改应用到您的存储库或分支。

[![在此处输入图像描述](https://i.stack.imgur.com/8qhgH.png)](https://i.stack.imgur.com/8qhgH.png)

所以现在您可以在将文件合并到您的存储库之前仔细监控文件。由于 Modified ，您还可以`D`根据需要进行修改`C`。

[![在此处输入图像描述](https://i.stack.imgur.com/JYA7S.png)](https://i.stack.imgur.com/JYA7S.png)

**2\. Git Pull-**这将使用原始/主分支更新您的本地分支，即实际上它所做的是Git Fetch 和Git 一个接一个合并的组合。 *但这可能会导致发生冲突，因此建议使用带有干净副本的 Git Pull。*

[![在此处输入图像描述](https://i.stack.imgur.com/O1vk0.png)](https://i.stack.imgur.com/O1vk0.png)

* * *

## 回答 #17

> 赞同：111
> 
> 时间：2012-07-17T16:43:11.773

我也为此苦苦挣扎。事实上，我通过谷歌搜索完全相同的问题来到这里。阅读所有这些答案最终在我的脑海中描绘了一幅画面，我决定尝试通过查看 2 个存储库和 1 个沙箱的状态以及在查看它们的版本时随时间执行的操作来了解这一点。所以这就是我想出的。如果我在任何地方搞砸了，请纠正我。

三个带有 fetch 的 repos：

```
---------------------     -----------------------     -----------------------
- Remote Repo       -     - Remote Repo         -     - Remote Repo         -
-                   -     - gets pushed         -     -                     -
- @ R01             -     - @ R02               -     - @ R02               -
---------------------     -----------------------     -----------------------

---------------------     -----------------------     -----------------------
- Local Repo        -     - Local Repo          -     - Local Repo          -
- pull              -     -                     -     - fetch               -
- @ R01             -     - @ R01               -     - @ R02               -
---------------------     -----------------------     -----------------------

---------------------     -----------------------     -----------------------
- Local Sandbox     -     - Local Sandbox       -     - Local Sandbox       -
- Checkout          -     - new work done       -     -                     -
- @ R01             -     - @ R01+              -     - @R01+               -
---------------------     -----------------------     ----------------------- 
```

拉动的三个回购

```
---------------------     -----------------------     -----------------------
- Remote Repo       -     - Remote Repo         -     - Remote Repo         -
-                   -     - gets pushed         -     -                     -
- @ R01             -     - @ R02               -     - @ R02               -
---------------------     -----------------------     -----------------------

---------------------     -----------------------     -----------------------
- Local Repo        -     - Local Repo          -     - Local Repo          -
- pull              -     -                     -     - pull                -
- @ R01             -     - @ R01               -     - @ R02               -
---------------------     -----------------------     -----------------------

---------------------     -----------------------     -----------------------
- Local Sandbox     -     - Local Sandbox       -     - Local Sandbox       -
- Checkout          -     - new work done       -     - merged with R02     -
- @ R01             -     - @ R01+              -     - @R02+               -
---------------------     -----------------------     ----------------------- 
```

这帮助我理解了为什么 fetch 非常重要。

* * *

## 回答 #18

> 赞同：94
> 
> 时间：2013-02-21T13:25:03.660

我们简单地说：

```
git pull == git fetch + git merge 
```

如果运行`git pull`，则不需要将数据合并到本地。如果您运行`git fetch`，则意味着您必须运行`git merge`才能将最新代码下载到本地计算机。否则，不合并就不会更改本地机器代码。

所以在 Git Gui 中，当你获取数据时，你必须合并数据。Fetch 本身不会在您的本地进行代码更改。您可以通过获取一次获取并查看来检查更新代码时；它不会改变的代码。然后合并...您将看到更改后的代码。

* * *

## 回答 #19

> 赞同：87
> 
> 时间：2019-02-12T19:25:14.710

简单来说，如果您要在没有任何互联网连接的情况下跳上飞机……在出发之前，您可以这样做`git fetch origin <branch>`。它会将所有更改提取到您的计算机中，但将其与您的本地开发/工作区分开。

在飞机上，您可以对本地工作空间进行更改，然后将其与您之前获取的内容合并，然后解决潜在的合并冲突，所有这些都无需连接到 Internet。除非有人对远程存储库进行了*新*的更改，否则一旦您到达目的地，您就会`git push origin <branch>`去喝咖啡。

* * *

从这个很棒[的 Atlassian 教程中](https://www.atlassian.com/git/tutorials/syncing/git-fetch)：

> 该`git fetch`命令将提交、文件和引用从远程存储库下载到本地存储库。
> 
> 当您想查看*其他人*一直在做什么时，您会执行获取操作。它类似于 SVN 更新，因为它可以让您查看中央历史记录的进展情况，但它不会强制您将更改实际合并到您的存储库中。Git**将获取的内容与现有的本地内容隔离开来**，它对 **您的本地开发工作绝对没有影响**。`git checkout`必须使用该命令显式检出获取的内容。这使得在将提交与本地存储库集成之前，获取一种安全的方式来审查提交。
> 
> 从远程存储库下载内容时，`git pull`可以`git fetch`使用命令来完成任务。您可以考虑 `git fetch`这两个命令的“安全”版本。它将下载远程内容，但不会更新本地存储库的工作状态，从而使您当前的工作保持不变。`git pull`是更激进的替代方案，它将下载活动本地分支的远程内容并立即执行`git merge`为新的远程内容创建合并提交。如果您有正在进行的未决更改，这将导致冲突并启动合并冲突解决流程。

* * *

与`git pull`：

*   你没有得到任何孤立。
*   它不需要显式检出。因为它隐含地做了一个`git merge`.
*   合并步骤会影响你本地的发展，*可能会*造成冲突
*   这基本上是不安全的。这是侵略性的。
*   不像`git fetch`它只影响你的`.git/refs/remotes`， git pull 会影响你`.git/refs/remotes` **和** `.git/refs/heads/`

* * *

**嗯...所以如果我不使用 更新工作副本`git fetch`，那么我在哪里进行更改？Git fetch 在哪里存储新的提交？**

好问题。首先，`heads`或者`remotes`不存储新的提交。他们只是有提交的[指针。](https://stackoverflow.com/questions/3965676/why-did-my-git-repo-enter-a-detached-head-state/65847406#65847406)因此，随着`git fetch`您下载最新的[git 对象](https://matthew-brett.github.io/curious-git/git_object_types.html)（blob、树、提交。要完全了解这些对象，请观看[git internals 上的此视频](https://www.youtube.com/watch?v=lG90LZotrpo0f)），但只需更新您的`remotes`指针以指向该分支的最新提交。它仍然与您的工作副本隔离，因为您的分支在`heads`目录中的指针尚未更新。它只会在`merge`/上更新`pull`。但又在哪里？让我们来了解一下。

在您的项目目录中（即，您执行`git`命令的位置）执行以下操作：

1.  `ls`. 这将显示文件和目录。没什么酷的，我知道。

2.  现在做`ls -a`。这将显示[点文件](https://unix.stackexchange.com/questions/21778/whats-so-special-about-directories-whose-names-begin-with-a-dot)，即以`.`You 开头的文件，然后将能够看到一个名为：的目录`.git`。

3.  做`cd .git`。这显然会改变你的目录。

4.  有趣的来了; 做`ls`。您将看到目录列表。我们正在寻找`refs`。做`cd refs`。

5.  查看所有目录中的内容很有趣，但让我们关注其中的两个。`heads`和`remotes`。也`cd`可以用来检查它们的内部。

6.  *`git fetch`您所做的*任何*`/.git/refs/remotes`操作都会更新目录中的指针。它不会更新`/.git/refs/heads`目录中的任何内容。*

**   *Any* `git pull`将首先执行`git fetch`, update`/.git/refs/remotes`目录中的项目，然后与您的本地合并，然后更改`/.git/refs/heads`目录中的头。* 

 ** * *

一个非常好的相关答案也可以在*[“git fetch”放在哪里？](https://stackoverflow.com/questions/27554859/where-does-git-fetch-place-itself/27555444#27555444)*.

[此外，从Git 分支命名约定](http://www.guyroutledge.co.uk/blog/git-branch-naming-conventions/)帖子中查找“斜线表示法” 。它可以帮助你更好地理解 Git 如何将东西放在不同的目录中。

* * *

## 查看实际差异

做就是了：

```
git fetch origin master
git checkout master 
```

如果远程主机已更新，您将收到如下消息：

```
Your branch is behind 'origin/master' by 2 commits, and can be fast-forwarded.
  (use "git pull" to update your local branch) 
```

如果您没有`fetch`并且只是这样做了，`git checkout master`那么您的本地 git 将不知道添加了 2 个提交。它只会说：

```
Already on 'master'
Your branch is up to date with 'origin/master'. 
```

但这是过时和不正确的。这是因为 git 只会根据它所知道的信息给你反馈。它忘记了它尚未撤消的新提交......

* * *

## 在本地处理分支时，有什么方法可以查看远程所做的新更改？

一些 IDE（例如 Xcode）非常智能并且使用 a 的结果`git fetch`并且可以注释在当前工作分支的远程分支中已更改的代码行。如果该行已被本地更改和远程分支更改，则该行将被标记为红色。这不是合并冲突。这是一个*潜在*的合并冲突。`git pull`这是一个提示，您可以在从远程分支执行之前使用它来解决未来的合并冲突。

[![在此处输入图像描述](https://i.stack.imgur.com/OEl72.png)](https://i.stack.imgur.com/OEl72.png)

* * *

## 有趣的提示：

如果您获取远程分支，例如：

```
git fetch origin feature/123 
```

然后这将进入您的远程目录。您的本地目录仍然无法使用它。但是，它通过 DWIM 简化了您对远程分支的结帐（按我的意思做）：

```
git checkout feature/123 
```

你不再需要做：

```
git checkout -b feature/123 origin/feature/123 
```

有关更多信息，请[在此处阅读](https://stackoverflow.com/a/56464547/5175709)

* * *

## 回答 #20

> 赞同：86
> 
> 时间：2013-09-19T20:01:46.303

`git fetch`将代码从远程服务器下拉到本地存储库中的跟踪分支。如果您的远程被命名`origin`（默认），那么这些分支将位于`origin/`，例如`origin/master`，`origin/mybranch-123`等。这些不是您当前的分支，它们是来自服务器的这些分支的*本地*副本。

`git pull`执行一个`git fetch`但随后**还将**跟踪分支中的代码合并到该分支的当前本地版本中。如果你还没有准备好迎接这些变化，那就`git fetch`先吧。

* * *

## 回答 #21

> 赞同：80
> 
> 时间：2012-11-26T21:58:01.933

`git fetch`将检索远程分支，以便您可以使用当前分支`git diff`或它们。将在当前分支跟踪的远程分支上运行 fetch，然后合并结果。您可以使用查看远程分支是否有任何更新，而无需将它们与本地分支合并。`git merge``git pull``git fetch`

* * *

## 回答 #22

> 赞同：76
> 
> 时间：2016-07-13T21:23:09.153

**Git 获取**

您通过 fetch 将更改从 origin 下载到本地分支。Fetch 向远程仓库询问其他人已提交但您在本地仓库中没有的所有提交。Fetch 下载这些提交并将它们添加到本地存储库。

**Git 合并**

您可以使用 merge 命令应用通过 fetch 下载的更改。Merge 将获取从 fetch 中检索到的提交，并尝试将它们添加到您的本地分支。合并将保留您本地更改的提交历史记录，以便当您通过推送共享您的分支时，Git 将知道其他人如何合并您的更改。

**Git 拉取**

fetch 和 merge 经常一起运行，以至于创建了一个将两者结合在一起的命令 pull。拉取然后合并以将下载的提交添加到您的本地分支。

* * *

## 回答 #23

> 赞同：52
> 
> 时间：2013-06-04T14:08:16.277

`git pull`和之间的唯一区别`git fetch`是：

`git pull`从远程分支中提取并合并它。

`git fetch`仅从远程分支获取但不合并

即 git pull = git fetch + git merge ...

* * *

## 回答 #24

> 赞同：44
> 
> 时间：2013-11-28T17:03:45.460

Git 允许在较新的提交之后应用按时间顺序较旧的提交。因此，在存储库之间传输提交的行为分为两个步骤：

1.  将远程分支的新提交复制到本地仓库中此远程分支的副本。

    （回购到回购操作）`master@remote >> remote/origin/master@local`

2.  将新提交集成到本地分支

    （内部回购操作）`remote/origin/master@local >> master@local`

第 2 步有两种方法。您可以：

1.  在最后一个共同祖先之后分叉本地分支，并添加与本地存储库唯一的提交并行的新提交，通过合并提交完成，关闭分叉。
2.  在最后一个共同祖先之后插入新提交并重新应用本地存储库独有的提交。

在`git`术语中，步骤 1 是`git fetch`，步骤 2 是`git merge`或`git rebase`

`git pull`是`git fetch`和`git merge`

* * *

## 回答 #25

> 赞同：42
> 
> 时间：2015-07-29T18:38:48.453

**git pull**命令实际上是一个for `shortcut`git **fetch**后跟**git merge**或**git rebase**命令，具体取决于您的配置。您可以配置您的 Git 存储库，以便**git pull**是 fetch 后跟 rebase。

* * *

## 回答 #26

> 赞同：37
> 
> 时间：2014-08-12T04:00:07.987

Git 使用两条命令从远程获取最新版本的分支到本地：

1.  git fetch：Git 会从远程获取最新版本到本地，但不会自动合并。      `git fetch origin master` `git log -p master..origin/master` `git merge origin/master`

         上面的命令意味着将最新版本的主分支从远程从源下载到源主分支。然后比较本地的master分支和origin的master分支。最后，合并。

2.  git pull：Git 将从远程获取最新版本并合并到本地。

        `git pull origin master`

         上面的命令等同于`git fetch`and `git merge`。在实践中，`git fetch`可能更安全，因为在合并之前我们可以看到更改并决定是否合并。

* * *

## 回答 #27

> 赞同：37
> 
> 时间：2015-05-19T11:57:20.180

> `git pull`和 和有什么不一样`git fetch`？

要理解这一点，您首先需要了解您的本地 git 不仅维护您的本地存储库，而且还维护远程存储库的本地副本。

`git fetch`使您的远程存储库的本地副本保持最新。例如，如果您的远程存储库是 GitHub - 您可能希望将远程存储库中所做的任何更改提取到远程存储库的本地副本。这将允许您执行比较或合并等操作。

`git pull`另一方面，会将远程存储库中的更改降低到您保留自己代码的位置。通常，首先`git pull`会`git fetch`更新远程存储库的本地副本，然后将更改合并到您自己的代码存储库和可能的工作副本中。

* * *

## 回答 #28

> 赞同：36
> 
> 时间：2017-07-12T06:23:41.457

初学者的简单图形表示，

[![在此处输入图像描述](https://i.stack.imgur.com/fEvk2.jpg)](https://i.stack.imgur.com/fEvk2.jpg)

这里，

```
git pull 
```

将从存储库中获取代码并使用您的本地重新设置...在 git pull 中，有可能创建新的提交。

但在 ，

获取

将从存储库中获取代码，我们需要使用手动重新设置它`git rebase`

例如：我将从服务器主服务器获取并在我的本地主服务器中重新设置它。

1) git pull ( rebase 会自动完成):

```
git pull origin master 
```

这里**origin**是你的远程 repo **master**是你的分支

2）git fetch（需要手动变基）：

```
git fetch origin master 
```

它将从原点获取服务器更改。它将在您的本地，直到您自己重新设置它。我们需要通过检查代码手动修复冲突。

```
git rebase origin/master 
```

这会将代码变基为本地代码。在此之前确保您在正确的分支中。

* * *

## 回答 #29

> 赞同：35
> 
> 时间：2013-09-19T22:41:11.377

git pull == ( git fetch + git 合并)

git fetch 不会更改本地分支。

如果您已经有一个为所需项目设置了远程的本地存储库，则可以使用 git fetch 获取现有远程的所有分支和标签。... Fetch 不会对本地分支进行任何更改，因此您需要将远程分支与配对的本地分支合并以合并新的 fetch 更改。[来自 github](https://help.github.com/articles/fetching-a-remote)

* * *

## 回答 #30

> 赞同：35
> 
> 时间：2015-09-13T18:48:18.100

实际上，Git 维护您自己的代码和远程存储库的副本。

该命令`git fetch`通过从远程存储库获取数据使您的本地副本保持最新。我们需要这个的原因是因为其他人可能对代码进行了一些更改，而您希望自己保持更新。

该命令`git pull`将远程存储库中的更改带到您保存自己代码的位置。通常，`git pull`首先执行“git fetch”以使远程存储库的本地副本保持最新，然后将更改合并到您自己的代码存储库和可能的工作副本中。

* * *

## 回答 #31

> 赞同：31
> 
> 时间：2015-07-12T03:54:52.497

```
git pull = git fetch + git merge 
```

* * *

## 回答 #32

> 赞同：25
> 
> 时间：2015-07-12T05:39:57.860

**git 拉**

它使用一个命令执行两个功能。

它获取对远程分支所做的所有更改，然后将这些更改合并到您的本地分支中。您还可以通过传递 --rebase 来修改 pull 的行为。可以在[这里阅读合并和变基之间的区别](https://stackoverflow.com/questions/16666089/whats-the-difference-between-git-merge-and-git-rebase)

**获取**

Git fetch 只完成了 git pull 的一半工作。它只是将远程更改带入您的本地存储库，但不会将它们应用到您的分支。您必须明确应用这些更改。这可以按如下方式完成：

```
git fetch
git rebase origin/master 
```

* * *

## 回答 #33

> 赞同：23
> 
> 时间：2015-09-25T09:46:48.777

必须牢记 git 的性质。您有遥控器和本地分支机构（不一定相同）。与其他源代码控制系统相比，这可能有点令人困惑。

通常，当您签出远程时，会创建一个跟踪远程的本地副本。

git fetch 将与远程分支一起使用并更新您的信息。

如果其他 SWE 正在同一个分支工作，实际上就是这种情况，而在小型开发 - 一个分支 - 一个项目场景中很少出现这种情况。

您在当地分支机构的工作仍然完好无损。为了将更改带到您的本地分支，您必须合并/重新设置远程分支的更改。

git pull 正是这两个步骤（即 --rebase 到 rebase 而不是 merge ）

如果您的本地历史和远程历史有冲突，您将被迫在 git push 期间进行合并以发布您的更改。

因此，这实际上取决于您的工作环境的性质和使用什么的经验。

* * *

## 回答 #34

> 赞同：18
> 
> 时间：2019-11-07T06:54:38.557

所有分支都存储在`.git/refs`

所有本地分支都存储在`.git/refs/heads`

所有远程分支都存储在`.git/refs/remotes`

> 该`git fetch`命令将提交、文件和引用从远程存储库下载到本地存储库。当您想查看其他人一直在做什么时，您会执行获取操作。

因此，当您执行`git fetch`所有文件、提交和引用时，将下载到

这个目录`.git/refs/remotes`

您可以切换到这些分支以查看更改。

此外，您可以根据需要合并它们。

> `git pull` 只需下载这些更改并将它们合并到当前分支。

*例子*

如果你想看到远程分支的工作`dev/jd/feature/auth`，你只需要做

`git fetch origin dev/jd/feature/auth`

查看更改或工作进度，

`git checkout dev/jd/feature/auth`

但是，如果您还想在当前分支中获取并合并它们，

`git pull origin dev/jd/feature/auth`

*如果你这样做`git fetch origin branch_name`，它将获取分支，现在你可以切换到你想要的分支并查看更改。您的本地 master 或其他本地分支不会受到影响。但是`git pull origin branch_name`会获取分支并且也会合并到当前分支。*

* * *

## 回答 #35

> 赞同：9
> 
> 时间：2020-05-13T16:32:45.603

简单解释：

```
git fetch 
```

获取元数据。如果您想签出最近创建的分支，您可能需要在结帐前进行提取。

```
git pull 
```

从远程获取元数据，并将文件从远程移动并合并到分支

* * *

## 回答 #36

> 赞同：5
> 
> 时间：2017-12-22T20:36:23.780

**Git 获取**

帮助您了解来自`git repository`. 假设您在一个使用 的团队中`GitFlow`工作，其中团队致力于多个`branches`（功能）。与您一起`git fetch --all` `command`了解`branches`.`repository`

大多`git fetch`与`git reset`. 例如，您希望将所有本地更改恢复为当前存储库状态。

```
git fetch --all // get known about latest updates
git reset --hard origin/[branch] // revert to current branch state 
```

**git拉**

此命令更新您`branch`的当前`repository` `branch`状态。让我们继续`GitFlow`。多个功能`branches`是分支，当您`merged`想`develop`为项目开发新功能时，您必须进行开发`branch`并执行`git pull`以获得当前状态`develop` `branch`

> GitFlow 文档[https://gist.github.com/peterdeweese/4251497](https://gist.github.com/peterdeweese/4251497)

* * *

## 回答 #37

> 赞同：4
> 
> 时间：2020-11-19T09:20:38.433

这张图可能会有所帮助。`git pull`本质上等价于`git fetch`then`git merge`

[![这张图可能会有所帮助。 git pull 本质上等同于 git fetch 然后 git merge](https://i.stack.imgur.com/weoyi.png)](https://i.stack.imgur.com/weoyi.png)

* * *

## 回答 #38

> 赞同：2
> 
> 时间：2022-01-18T09:17:38.987

# 按定义：

**Git获取：**

Git fetch 是一个允许您从另一个存储库下载对象的命令。

**Git 拉取：**

Git pull 是一个命令，它允许您从另一个存储库或本地分支获取并与之集成。

# 主要区别

**什么时候应该使用 Git Fetch？**

如果您只想查看远程存储库中的所有当前分支和更改，Git fetch 可以获取您需要的所有信息，而无需实际对您的工作进行任何本地更改。

*   这使您有时间决定合并更改的最佳行动方案，例如将它们合并到本地分支或快速转发您的本地分支。

**命令：**

> $ git 获取原点

**什么时候应该使用 Git Pull？**

当您对将从远程存储库获取并添加到本地副本的更改有完整的上下文时，Git pull 是一个理想的操作。

**命令：**

> $ git pull 起源大师

**事实：**

两者都用于从远程存储库下载新数据。

# 为什么你需要这些命令？

例如，最近对远程存储库进行了更改，您希望将它们合并到本地副本中。你有几个选择；从远程获取更改的两个最常见的操作是 Git pull 和 Git fetch。

# 需要考虑的要点：

**拿来：**

*   它的主要功能是获取内容。
*   它只有命令行语法。

**拉：**

*   它的主要功能是获取和合并内容的组合。
*   它具有命令行语法以及发布更改的拉取请求。

# 我的意见：

Git Pull 比 git fetch 更好，因为它具有两个命令的功能。但是，与 Git Pull 相比，Git Fetch 被认为更安全。

# java - 用于 Web 应用程序的客户端 Java 与 (Adobe) Flash，选择什么以及何时选择

> ID：292361
> 
> 赞同：4
> 
> 时间：2008-11-15T09:53:36.363
> 
> 标签：java, apache-flex, flash, client-side

几年前，客户端 Java 不适合 Web 开发，因为很大一部分 Web 用户没有安装 Java。（我不记得确切的数字，超过 10%）。

现在我看到了一个大型网站的 Google Analytics 统计数据，它表明 >98% 的用户安装了 Java。

这些统计数据是否受到 Javascript 使用的严重影响？据我了解，谷歌分析只衡量拥有 Javascript 的用户。

其他大网站上的图片是否相似？

**与 Flash 相比，客户端 Java 真的有“阻碍”的缺点吗？**

编辑：我的意思主要是 java applet，java WebStart 似乎不适合普通用户。
我提到 Javascript 只是为了描述 Google Analytics 的工作方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T11:20:45.737

当我写我的文凭项目时，我不得不在 Flash 和 Java Applets 之间做出选择。以下是一些优点和缺点：

Java 小程序：

*   [加] 你用Java编程，成熟稳定
*   [plus] 你可以使用包含很多功能的 Java GUI 框架
*   [减号] 用户第一次使用小程序点击页面时，必须初始化 JVM，即使在速度很快的计算机上也可能需要几分钟
*   [减号] Applet 不打算用作动画媒体；当然，你可以做一些事情，但这就像用 C 语言编程 - 你从头开始做所有事情

示例：我需要显示一个数据包，因为它在两个路由器之间移动。数据包必须是某种控件，例如按钮或某种东西。此动画可以在 Flash 中的 1 行代码中定义，其中所有对象都派生自一些可以设置动画的基础对象。我在 Java 中找不到合适的解决方案。

闪光：

*   [plus] 真的很专注于动画；
*   [加] ActionScript 实际上是一种 OO 语言
*   [减号] ActionScript 邋遢、漏洞百出，支持者寥寥无几。如果您遇到困难，请准备好在晦涩难懂的日本论坛中搜索解决方案
*   [减号] ActionSCript 可能是面向对象的，但它缺少很多功能，例如枚举、完全成熟的接口、线程 (!!!!) 等。
*   [减号] Flash 旨在供非技术人员使用 - 他们只使用创作工具；我为所有东西编写了代码并且它有效，但这很痛苦。

我的结论：

我急切地等待动画和富客户端界面的编程范例。

ps：Silverlight 到目前为止似乎令人失望，也许微软会向它注入一些美元。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T22:00:55.773

嗯，Java 似乎比我更受支持，我搜索了一些统计数据，发现 92% 到 96% 的浏览器支持 Java（即它已启用足以检测到它！虽然我猜很多 Java 检测算法使用 JavaScript 来检测＆报告-正如您所指出的-但是无论如何，对JS的支持也非常好，在我们的Web 2.0时代甚至更多）。
Adobe 拥有更好的支持，但总体而言差异很小。无论如何，真正想查看/使用该应用程序的人将激活/升级/下载所需的引擎。

现在，我们必须看看支持哪些 JRE！唉，我没有找到任何统计数据。
在那里，Adobe 有优势：不是每个人都有 Flash 9 或 10，但升级速度非常快。虽然下载和安装新的 JRE 是一项相当艰巨的任务……当然，您可以针对历史上最低的公分母 Java 1.1，或者更实际的 Java 2（1.4），但不能全部使用仍然令人沮丧1.6 特点...

我见过一些人抱怨 Java 小程序会导致他们的浏览器崩溃（显然是在 Unix 系统上），但对于少数浏览器/系统来说，这比其他任何问题都多。

正如所指出的，Java 小程序的启动时间比 Flash 长得多（尽管一些大型 Flash 游戏加载速度也很慢）。
现在，我已经看到了一些[处理](http://processing.org/ "覆盖")小程序，比如臭名昭著的[网页图形](http://www.aharef.info/static/htmlgraph/?url=http%3A%2F%2Fstackoverflow.com%2Fabout "网页作为图形 - HTML DOM Visualizer Applet")，它们中的大多数加载速度很快：很多功能已经在用户的硬盘上，在广泛的 Java 库中。处理会生成相当轻量级的 jar，而许多 Flash 小程序必须包含外部库……或者重新发明轮子！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-12-25T02:15:25.053

关于 ActionScript 的评论，以前的一些帖子已过时。动作脚本 3。在 Flex 2 时间范围内可用，即 2007 年 1 月 Flex 2.0 和 Flash player 9 发布时。

AS3 是一种成熟的 OOP 编程语言，可与 Java 相媲美。它有类和接口、继承、类成员的访问保护关键字、构造函数、静态，还有一些 Java 没有的好东西：属性、事件、声明性数据绑定和闭包。

默认情况下，AS3 是静态编译的，因此需要声明成员和变量的类型。这可以放宽到 AS3 可以恢复为动态类型 ala JavaScript 的地方。但是，它在运行时效率较低。有时在处理动态数据时，选择性地使用动态类仍然很有用。（静态类型检查语言的一个好处是 Flex Builder IDE 中的代码完成。）

大部分 Flex 开发都是使用 MXML 完成的。这是用于 Flex 的声明性基于 XML 的 DSL。不过，MXML 会被编译成 ActionScript3 代码。因此，您在 MXML 中所做的工作等同于 AS3 命令式编码，但相对于它所代表的底层图形 Flex 形式，通常可以更简洁、更清晰、结构更恰当（即，MXML 有利于对 MVC 模式的视图进行编码） ）。

最重要的是，Flex 的 ActionScript3 编程对于 Java 或 C# 程序员来说学习起来很容易和自然。语言根本不是问题。Flex 的强大之处在于与 Flex SDK 以及其中的无数功能密切相关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T11:52:43.677

不是一个确切的答案，因为它会非常自以为是，只是分享我的经验......

在最近的一个项目中，我们正在构建一个符合 WAI 的站点，我们被要求避免使用 flash 对象，因为可访问性是一个主要问题。对于大多数 Web 开发人员来说，不同的小程序并不适合；）。原因之一可能是 Rich UI 与 Web UI 的范式不同。

然而，当需要客户端监控时，我们发现小程序是不可替代的（不是针对 .NET 和 ActiveX 控件）。该应用程序使用基于智能卡的身份验证，并将小程序加载到浏览器中以侦听客户端事件（卡移除）并提醒服务器结束会话。

在这种情况下，我倾向于认为 Flash 是一种吸引眼球的东西（视图），因为小程序虽然设计为多功能，但在客户端扮演着模型的角色。需要注意的是，小程序和闪存都消耗客户端机器上的 CPU 周期，因此传统上适用于涉及冗长计算的任务。计算器、报告生成器、趋势插图画家、占星图生成器（是）和其他可以由用户提供数据并立即显示结果的任务利用这些。

一个主要问题是缺少客户端软件（Java、flash 插件）。在这种情况下，用户体验非常烦人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T22:48:54.833

注意到一些关于 java 不更新自身的评论。现在 1.6.0_10 已经发布，它比以前更容易和自动化地更新自身，您可以选择一种新的安装方法，即 java 内核安装方法。这会在您需要时自动安装 java 组件。

关于此的一些文字：http: [//java.sun.com/javase/6/6u10faq.jsp](http://java.sun.com/javase/6/6u10faq.jsp)

所以有一些变化，我认为 Sun 刚醒来就看到了新的 CEO。我知道这个新系统传播需要 1 到 2 年，但你可以开始你的项目并在它准备好时享受乐趣。：） 谁知道。

无论如何，也许你为简单的动画功能工作 +500% 比 Flash，但如果你的应用程序不是一个简单的动画，那么你用 Flash 工作 +500% 来进行一些简单的 3 行 java 代码替换 :) 取决于你的应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-01-07T02:23:40.913

我在 Java 中工作了 7 年，然后我最近在我的最新项目（1.5 年及以后）中开始使用 AS3。我喜欢 AS3 和 Flash，原因如下：

*   该语言本身与 Java 非常相似。Adobe 的文档与 JavaDocs 一样好或更好。
*   AS3 语言支持将 XML 作为本机类型。在 Java 中解析 XML 是一场噩梦。
*   Flash 有很好的动画和图形框架，例如 papervision 3D 和 tweener。
*   如果您使用 Flex 3 框架和 Flex Builder 3，构建看起来与 Swing 一样好或更好的界面是微不足道的。我喜欢在 Swing 中编写 UI，但是在可视化 Flex Designer 中设计 UI 就像呼吸新鲜空气一样。
*   我很确定有更多的浏览器支持 Flash。
*   你见过加载 Flash 小程序吗？它的可用性真的很差，并且让您的用户在小程序启动之前单击两三个对话框。Flash 应用程序可以正常工作。

祝你的项目好运！

# java - Javascript 中的 URL 解码

> ID：292362
> 
> 赞同：4
> 
> 时间：2008-11-15T09:53:51.950
> 
> 标签：java, javascript

我想解码使用该`java.net.URLEncoder.encode()`方法编码的字符串。

我尝试`unescape()`在javascript中使用该函数，但空格出现问题，因为`java.net.URLEncoder.encode()`将空格转换为“+”但`unescape()`不会将“+”转换为空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T09:59:09.193

尝试`decodeURI("")`或`decodeURIComponent("")`！-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T11:38:49.773

使用 JavaScript 的 escape/unescape 函数几乎总是错误的，它与 URL 编码或 Web 上的任何其他标准编码不兼容。非 ASCII 字符和空格一样被意外处理，而旧版浏览器不一定具有相同的行为。

正如 roenving 所提到的，您想要的方法是 decodeURIComponent()。这是在 IE 5.0 上找不到的较新添加，因此如果您需要支持该浏览器（希望不是，现在！）您需要自己实现该功能。对于非 ASCII 字符，这意味着您需要实现 UTF-8 编码器。如果您需要，可以使用代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T20:40:05.920

decodeURI[Component] 也不将 + 作为空格处理（至少在我测试的 FF3 上）。

简单的解决方法：

```
alert(decodeURIComponent('http://foo.com/bar+gah.php?r=%22a+b%22&d=o%e2%8c%98o'.replace(/\+/g, '%20'))) 
```

事实上，这个 URL 上的 unescape 阻塞：它只知道像 %u2318 这样不标准的 UTF-16 字符（参见[Percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding "百分比编码 - 维基百科，免费的百科全书")）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-03-21T01:10:16.727

尝试

```
var decoded = decodeURIComponent(encoded.replace(/\+/g," ")); 
```

# java - 选择何时实例化类

> ID：292363
> 
> 赞同：1
> 
> 时间：2008-11-15T09:54:46.097
> 
> 标签：java, variables, performance

我最近为一个作业写了一个类，我必须将名称存储在一个 ArrayList（在 java 中）中。我将 ArrayList 初始化为实例变量`private ArrayList<String> names`。后来当我根据解决方案检查我的工作时，我注意到他们已经在`run()`方法中初始化了他们的 ArrayList。

我想了一会儿，我觉得这可能是一个品味问题，但总的来说，在这种情况下，一个人如何选择？是占用更少的内存还是什么？

PS我喜欢Ruby中以@符号开头的实例变量：它们更可爱。

（元问题：这个问题的更好标题是什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T10:06:00.693

用伟大的 Knuth 的话来说“过早的优化是万恶之源”。

只需担心您的程序正常运行并且没有错误。这比以后难以调试的晦涩优化要重要得多。

但是要回答您的问题-如果您在类成员中进行初始化，则将在第一次在代码中提到您的类时分配内存（即，当您从中调用方法时）。如果您在一个方法中进行初始化，则内存分配会在稍后调用此特定方法时发生。

所以只是后期初始化的问题……这在业界称为惰性初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T18:52:21.690

## 初始化

作为经验法则，尝试在声明变量时对其进行初始化。

如果变量的值永远不会改变，请使用`final`关键字明确表示。这可以帮助您推断代码的正确性，虽然我不知道识别`final`关键字的编译器或 JVM 优化，但它们肯定是可能的。

当然，这条规则也有例外。例如，可以在 if-else 或 switch 中分配变量。在这种情况下，“空白”声明（没有初始化的声明）优于保证在读取虚拟值之前被覆盖的初始化。

```
/* DON'T DO THIS! */
Color color = null;
switch(colorCode) {
  case RED: color = new Color("crimson"); break;
  case GREEN: color = new Color("lime"); break;
  case BLUE: color = new Color("azure"); break;
}
color.fill(widget); 
```

现在你有一个`NullPointerException`无法识别的颜色代码。最好不要分配无意义的`null`。编译器会在调用时产生错误`color.fill()`，因为它会检测到您可能没有初始化`color`.

为了在这种情况下回答您的问题，我必须查看有问题的代码。如果解决方案在`run()`方法内部对其进行了初始化，则它必须被用作临时存储，或者作为“返回”任务结果的一种方式。

如果集合用作临时存储，并且在方法之外无法访问，则应将其声明为局部变量，而不是实例变量，并且很可能应在方法中声明的位置对其进行初始化。

## 并发问题

对于初级编程课程，您的讲师可能不会试图让您面对并发编程的复杂性——尽管如果是这样的话，我不确定您为什么要使用`Thread`. 但是，随着 CPU 设计的当前趋势，任何学习编程的人都需要牢牢掌握并发性。我将尝试在这里更深入地研究。

从线程的`run`方法返回结果有点棘手。该方法是[Runnable](http://java.sun.com/javase/6/docs/api/java/lang/Runnable.html)接口，没有什么可以阻止多个线程执行`run`单个实例的方法。[由此产生的并发问题是 Java 5 中引入的Callable](http://java.sun.com/javase/6/docs/api/java/util/concurrent/Callable.html)接口背后的动机的一部分。它很像`Runnable`，但可以以线程安全的方式返回结果，`Exception`如果任务无法执行则抛出一个。

这有点题外话，但如果您好奇，请考虑以下示例：

```
class Oops extends Thread { /* Note that thread implements "Runnable" */

  private int counter = 0;

  private Collection<Integer> state = ...;

  public void run() {
    state.add(counter);
    counter++;
  }

  public static void main(String... argv) throws Exception {
    Oops oops = new Oops();
    oops.start();
    Thread t2 = new Thread(oops); /* Now pass the same Runnable to a new Thread. */
    t2.start(); /* Execute the "run" method of the same instance again. */
    ...
  }
} 
```

在`main`方法结束时，您几乎不知道“状态”`Collection`是什么。两个线程同时处理它，我们还没有指定集合是否可以安全地并发使用。如果我们在线程内部初始化它，至少我们可以说最终`state`将包含一个元素，但我们不能说它是 0 还是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T10:07:39.847

来自[维基书籍](http://en.wikibooks.org/wiki/Java_Programming/Data_and_Variables)：

Java 中变量的三种基本作用域：

*   局部变量，在类的方法中声明，在方法执行期间有效（并且仅占用存储空间）。每次调用该方法时，都会使用一个新的变量副本。

*   实例变量，在类中声明但在任何方法之外。只要对应的对象在内存中就有效并占用存储；一个程序可以实例化该类的多个对象，每个对象都有自己的所有实例变量的副本。这是面向对象编程的基本数据结构规则；类被定义为在给定系统中保存特定于“对象类”的数据，并且每个实例都保存自己的数据。

*   静态变量，在类中声明为静态，在任何方法之外。无论从该类实例化多少对象，都只有一个这样的变量副本。

所以是的，内存消耗是一个问题，特别是如果 run() 中的 ArrayList 是本地的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T10:12:40.943

我不完全理解你的完整问题。

但据我现在了解，性能/内存优势将相当小。因此，我肯定会支持易用性方面。

所以做最适合你的事情。仅在需要时解决性能/内存优化问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T19:37:47.137

对于实例变量，我个人的经验法则是初始化它们，至少使用默认值，或者：

1.  在声明时间，即

    `private ArrayList<String> myStrings = new ArrayList<String>();`

2.  在构造函数中

如果它确实是一个实例变量，并且表示对象的状态，那么它会在构造函数退出时完全初始化。否则，您可能会尝试在变量具有值之前对其进行访问。当然，这不适用于您将自动获得默认值的原语。

对于静态（类级）变量，在声明或静态初始化程序中初始化它们。如果我进行计算或其他工作来获取值，我会使用静态初始化程序。如果您只是调用`new Foo()`变量或将变量设置为已知值，请在声明中初始化。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-11-21T14:33:52.927

您必须避免延迟初始化。这会导致以后出现问题。
但是如果你因为初始化太重而不得不这样做，你必须这样做：

静态字段：

```
// Lazy initialization holder class idiom for static fields
private static class FieldHolder {
   static final FieldType field = computeFieldValue();
}
static FieldType getField() { return FieldHolder.field; } 
```

实例字段：

```
// Double-check idiom for lazy initialization of instance fields
private volatile FieldType field;
FieldType getField() {
   FieldType result = field;
   if (result == null) { // First check (no locking)
      synchronized(this) {
         result = field;
         if (result == null) // Second check (with locking)
            field = result = computeFieldValue();
      }
   }
   return result;
} 
```

根据 Joshua Bolch 的“Effective Java™ Second Edition”（ISBN-13：978-0-321-35668-0）：
**“明智地使用惰性初始化”**

# c# - 如何避免代码中的枚举值与数据库中的相应值之间的依赖关系？

> ID：292378
> 
> 赞同：12
> 
> 时间：2008-11-15T10:16:18.817
> 
> 标签：c#, enums

我有许多在整个 ASP.NET 应用程序中测试过的用户权限。这些权限值在枚举中引用，以便我可以方便地测试权限，如下所示：

*   btnCreate.Enabled = PermissionManager.TestPermission(Permission.AllowCreate);

但是，我也将这些权限存储在数据库中，因为我需要保存更多关于它们的信息，而不仅仅是他们的 ID。但这会在枚举值和数据库中的值之间产生可怕的依赖关系，这是对任何一个都考虑不周的更改，并且我在整个应用程序中都遇到了问题。有没有更好的方法来解决这个问题？以前有没有人处理过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T10:23:00.877

我不知道最好的解决方案是什么，我想听听。我们的解决方案是显式键入枚举，如

```
public enum MyEnum : int 
{
   None =0,
   Value = 1,
   AnotherValue =2 
} 
```

并将整数值保存到数据库中。例如，当值 1 被删除时，您仍然可以使用枚举，并且 AnotherValue 在数据库中仍然具有值 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T10:25:08.283

或者也许将枚举值作为字符串存储在数据库中。ToString();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T11:23:34.280

只要您*从不*更改已分配的值，就可以使用枚举值。如果您在 .NET 中使用标准的基于角色的授权，您仍将依赖数据库中相应角色表中某些文本字符串的存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-10T23:55:34.050

我在需要在代码中作为枚举访问的任何表上添加扩展属性。然后，我使用代码生成软件（codesmith、T4 等）通过查找具有此属性的任何表来为我生成所有枚举。用于此的任何表都遵守一些基本规则（必须具有名称列等），因此代码生成器知道将哪个列用作枚举元素的名称。

一旦将值添加到这些表中，我们就会注意几乎从不更改它们以避免破坏构建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T10:34:31.103

我们使用一个从数据库生成枚举代码（例如：NorthwindEnums.cs）的小型应用程序。我们确保在数据库更改时运行它并更新受影响的库。

我们还尝试保持枚举从 0 开始并按顺序排列，以避免 C# 中的 Web 服务引用出现问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-20T23:13:46.170

不久前，我为我的公司构建了一个小工具来执行此操作，该工具将使用枚举字段上的属性来允许与数据库中的表“同步”。

该工具可以扫描程序集并生成适当的 INSERT/UPDATE SQL 命令，这些命令会将数据库与代码中的枚举定义同步。

# php - 提取出现在几个禁止字符之一之前的字符

> ID：292380
> 
> 赞同：2
> 
> 时间：2008-11-15T10:18:42.710
> 
> 标签：php, string, text-extraction, blacklist

一旦遇到几个不需要的字符之一，我想丢弃字符串中的所有剩余字符。

一旦遇到列入黑名单的字符，就应该返回该点之前的字符串。

例如，如果我有一个数组：

```
$chars = array("a", "b", "c"); 
```

我将如何通过以下字符串...

```
log dog hat bat 
```

...最终得到：

```
log dog h 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-15T10:29:43.547

strcspn[函数](http://php.net/manual/en/function.strcspn.php)是您正在寻找的。

```
<?php

$mask = "abc";

$string = "log dog hat bat";

$result = substr($string,0,strcspn($string,$mask));

var_dump($result);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T13:11:12.660

Vinko 的回答当然没有错，我可能更倾向于在专业脚本中推荐该技术，因为正则表达式可能执行得较慢，但纯粹为了研究人员的不同点，可以使用正则表达式。

为了记录，要将数组转换`['a', 'b', 'c']`为`abc`，只需调用`implode($array)`-- 不需要空的粘合字符串。

代码： ( [Demo](https://3v4l.org/REAZ3) ) -- 在第一次出现 a|b|c 时分成两半，然后访问第一个元素

```
echo preg_split('~[abc]~', $string, 2)[0]; 
```

代码： ( [Demo](https://3v4l.org/f10IR) ) -- 匹配非 a|b|c 字符的前导子串，然后访问第一个元素

```
echo preg_match('~^[^abc]+~', $string, $match) ? $match[0] : ''; 
```

我应该声明，如果您的任何列入黑名单的字符在字符类中对正则表达式引擎具有特殊含义，那么它们将需要被转义。

# language-agnostic - Best practices for developers in dealing with clients

> ID：292388
> 
> 赞同：13
> 
> 时间：2008-11-15T10:26:25.097
> 
> 标签：language-agnostic

Personally, I've found that when good developers deal with clients, they often get sucked into the after-sales support process and this process has been difficult to reverse, so was just interested to hear the various strategies that developers employ in maintaining a healthy, useful relationship that keeps clients using the right person at the right time.

So do you and, if so, how do you deal with clients?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T10:48:30.920

Just a tip: Write down every single thing a client says to you.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-15T12:14:10.043

Most of the projects I work on are done on time-and-materials contracts, which means: we give the customer an initial estimate of how long the project will take but bill for actual hours worked, whether over or under the estimate (I don't know why a client would agree to this, but they do). Once the project is "complete" and in production, we set up a service extension to the time-and-materials contract, creating a block of billable hours to cover after-sales support. When a client is aware that they're being billed for all contact with us, they tend to keep that contact to a minimum.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-15T12:18:40.223

One other point: I've found that it's best to communicate with clients via email where possible. It's a much more efficient way to transfer information (assuming everyone involved can write), and it leaves a permanent record of what the client told you to do.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-11-15T10:56:11.917

This is a pain we feel as well. Once you help out a customer it is too easy for the customer to directly contact the developer later on and request support. And since we usually aim to please, and probably feel sort of responsible when the application we built for them has a problem, we too often give the customer a quick helping hand.

I think that the developers should be separated from the customers, but this requires that the company has a support/concultancy department which can fix the problem instead. They in turn should be free to contact the developer, unless it's a huge company with a mainstream application where there is a less risk that the problem can be traced back to a problem with the sourcecode.

But let me tell you, I understand how difficult this is. I've been working in our consultancy shop for many years, starting from support and now I'm mostly managing the other consultants and developing. There are a lot of customers (like hundreds) who feel they have a personal relationship with me, and assume that they can call me directly even after years and years.

My tip is to make sure you have a good network of concultants and supportworkers who can help the customer for you, and have them contact you instead if they can't figure it out.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-12-11T08:23:19.173

I'd go the opposite of what have been said.

## The client is your number one information source

*   Avoid intermediaries (human and technical)
*   Keep tracks (not to use it against the customers, even if it can happen, but because he pays to get what he wants)
*   Communicate - on your initiative - in a short regular basis but for small amount of times.
*   Any doubt can be cleared asking the good questions. The guy don't want that ? Get rid of it (even if you like it better). The guy want that ? Why not, add time and money on the contract.

## You must train your communication skills

Most of what has been said here before is essentially related to the fact that programmers usually have poor communications skills. So they fall into the typical traps :

*   customers give them bad info
*   they waste time
*   they get stressed

At the end, nobody is happy.

But with trained communication skills you will learn to direct when, how long and about what your chats will be, and so :

*   Make any deal quick and nice
*   Give confidence to the client
*   Understands what the client wants (not what he says he wants)
*   Ensure is satisfied with the answer (even if it's nonsens for you)

Everybody will be happier : the customer will feel good **and let you work in peace** while you will have the information to keep working. Eventually, the resulting software will be better.

Think talking to customer is boring ? They think it too. And paperwork is boring as well, but you must do it, so do it well instead of looking for excuses.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-15T13:36:18.507

I just finished my education and am working at my first job, but here is what we do:

I communicate through a third party from the same company with "higher rank". The third party is someone knowledgeable of the requirements the software should have, but not in software engineering. When I ask about specifications, or send them proposals he distills the essence of their answers send them to me.

I think this way of working with stuff limits the amount of bullying a customer can get away with when it comes to changing specs, expanding specs etc.

For me it's especially useful since I'm only 21 years old, and people might have trouble believing I can get things done.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-15T14:22:36.900

best practices:

Remember the client is the one who signs the checks.

Users work for the client.

Refer any user requests to the client for approval.

Always deal with the client because they understand that everything you do will cost them money.

If the client wants after the sale support and is willing to pay for it then give it to him cheerfully.

Oh and what MusiGenesis said!

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-11-15T15:24:16.680

The best way is to never ever ever give your direct line to a customer. Have them go through Tech support (if it exists) first. We employ this method and it works well. The software developers are the last resort - for things that support simply can't do/don't know how to fix -- such as a DBA not knowing that the servers are instanced. But it will cut down on the "it's not connecting to the internets" type of phone calls.

You could also force all support requests to go through email/secretary. At that point, you can discern which ones are critical, and which ones can be solved with a simple 'tutorial' on how to fix the problem.

And as stated above - record EVERYTHING in an exchange with a customer. Doing so prevents the 'well he said she said' deal that customers can fall into.

Then again -- if you're getting a ton of customer support issues, you should be looking at the cause of it - whether it's a training issue, or whether the software is legitimately buggy.

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-11-15T15:55:48.397

In our company, every developer is also a salesman. If I step over the door of a Customer then I'm in a good position to make more business.

1.  They know me and I have credabillity because I've allready delivered to them.
2.  I have knowledge about their business
3.  I use my knowledge to ask questionas about other parts in their business
4.  I plant *hooks* to them when I talk to them, in their best interrests of course.
5.  I make clear that we are not a "hit and run"-company, but there to really support their business.

Maybe this is not how all company does, but I think you should use the people you have that allready has a foot inside the customers company to really work with them and make more business and tie the customer tighter to you.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-12-11T06:46:11.723

I personally think developers should never interact with clients. This is why you have the Q/A team. They get requirements, hand them to developers, discuss any issues, schedule development progress meetings. If developers have questions, the go to the Q/A personnel responsible for the requirements and documentation. Developers are engineers, not salesmen or negotiators. They should be given environment to develop stable, working code without getting distracted by customer phone calls. This is how many companies deal with customers regardless of company size. In the end, your chances of completing a project on time are higher than when you customer calls up and decides to change requirements or requests a feature. Which would probably mean you have to go back a couple of iterations and change something that may break everything completed past that point.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-15T11:50:10.793

Lots and lots of communication. Communication can be as simple as checking in with your customers by stopping by at their desks (if you are co-located) or keeping in touch over the phone. The more personal the communication is (in-person beats phone call, phone call beats email, etc.), the stronger your relationship will be.

Another good conflict resolution practice I've used is keeping as much information as possible in a single, shared place. I've used a bug/feature database (JIRA), a wiki, and even a network share drive for this purpose, but the point is that neither party has exclusive lock/write access. Updates can be made together with your customers, and there is a clear, public record of the change history of your system.

# batch-file - 如何使用批处理文件重命名现有文件以进行备份？

> ID：292392
> 
> 赞同：1
> 
> 时间：2008-11-15T10:32:01.840
> 
> 标签：batch-file, windows-xp, rename

```
pkzip25 -add=all -dir=current -silent -locale -exclude=DistData.zip -exclude=extract.bat -exclude=run.bat -exclude=pkzip25.exe -exclude=extracted.txt -exclude=zipped.txt -exclude=.\STORE DistData.zip *.*
pkzip25 -view -directories DistData.zip >zipped.txt

copy DistData.zip ..\BKX\DistData_1.zip
cd ..\BKX
rename DistData_1.zip DistData_2.zip 
rename DistData_2.zip DistData_3.zip
rename DistData_3.zip DistData_4.zip
rename DistData_4.zip DistData_5.zip 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T10:58:40.507

```
rename DistData_1.zip DistData_2.zip 
rename DistData_2.zip DistData_3.zip
rename DistData_3.zip DistData_4.zip
rename DistData_4.zip DistData_5.zip 
```

错了，你必须使用相反的顺序，先删除最后一个：

```
del DistData_5.zip
rename DistData_4.zip DistData_5.zip
rename DistData_3.zip DistData_4.zip
rename DistData_2.zip DistData_3.zip
rename DistData_1.zip DistData_2.zip 
```

并且可能还移动 DistData.zip 而不是复制，因此如果您创建新的 zipfile，它不存在。

```
move DistData.zip ..\BKX\DistData_1.zip 
```

但我不知道这是否是您的问题/问题。

编辑：如果你想保留 5 个压缩文件（而不是 4 个），我建议如下：

```
del DistData.zip >NUL 2>&1
pkzip25 -add=all -dir=current -silent -locale -exclude=DistData.zip -exclude=extract.bat -exclude=run.bat -exclude=pkzip25.exe -exclude=extracted.txt -exclude=zipped.txt -exclude=.\STORE DistData.zip *.*
pkzip25 -view -directories DistData.zip >zipped.txt

move DistData.zip ..\BKX
cd ..\BKX
del DistData_5.zip
rename DistData_4.zip DistData_5.zip
rename DistData_3.zip DistData_4.zip
rename DistData_2.zip DistData_3.zip
rename DistData_1.zip DistData_2.zip 
rename DistData.zip DistData_1.zip 
```

这样，您始终有 5 个备份副本。

# php - PHP 模板

> ID：292395
> 
> 赞同：2
> 
> 时间：2008-11-15T10:34:44.003
> 
> 标签：php, templates, variables, global-variables

我正在用 PHP 编写一个简单的模板层，但我有点卡住了。以下是它目前的工作方式：

首先，我使用`fetch_template`从数据库中加载模板内容 - 这很有效（如果您有兴趣，我会在启动时收集所有模板）。

我在模板代码和逻辑中使用 PHP 变量 - 例如：

```
// PHP:
$name = 'Ross';

// Tpl:
<p>Hello, my name is $name.</p> 
```

然后我使用`output_template`（下面）解析模板中的变量并替换它们。以前我使用带有美化`str_replace`模板类的模板标签，但效率太低。

```
/**
 * Returns a template after evaluating it
 * @param   string  $template   Template contents
 * @return  string  Template output
 */
function output_template($template) {
    eval('return "' . $template . '";');
} 
```

如果您还没有猜到，我的问题是变量没有在函数内部声明 - 因此函数无法解析它们，`$template`除非我将它们放在全局范围内 - 我不确定我是否想要这样做. 或者有一个变量数组作为函数中的参数（这听起来更乏味但可能）。

除了在我的代码中使用函数中的代码（它只是一个单行代码）而不是使用函数之外，有没有人有任何解决方案？

谢谢，罗斯

*Ps 我知道 Smarty 和大量的模板引擎 - 我不打算使用它们，所以请不要推荐它们。谢谢！*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-15T10:49:48.420

您可以使用`include($template_name)`.

或者，如果您想要模板输出的内容，您可以执行以下操作：

```
$template_name = 'template.php';

// import the contents into this template
ob_start();
include($template_name);
$content = ob_get_clean();

// do something with $content now ... 
```

请记住，在您的模板中，您可以使用经常被忽视的 PHP 语法：

```
<?php if ($a == 5): ?>
A is equal to 5
<?php endif; ?> 
```

替代语法可用于 if、while、for、foreach 和 switch ...非常适合操作模板中的数据。有关详细信息，请参阅“[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php "PHP 替代语法")”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-15T10:41:10.903

我会传递一个带有要替换的变量的关联数组，然后 extract() 它们。

然后你也可以通过 $_GLOBALS 来达到同样的效果。

```
function output_template($template, $vars) {
    extract($vars);
    eval('return "' . $template . '";');
} 
```

编辑：您可能还需要考虑字符串替换而不是 eval，这取决于允许谁编写您的模板以及谁指定要加载哪个模板。那么逃跑也可能有问题......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-11-15T10:47:03.247

此外，扩展[davev](https://stackoverflow.com/questions/292395/php-templating#292400)的评论 eval 有点难看。

如果你能做类似的事情

```
function inc_scope( $file , $vars )
{
    extract($vars); 
    ob_start(); 
    require($file); 
    return ob_get_clean(); 
} 
```

然后你可以使用plain-old-php 作为你的模板语言，你不会得到任何邪恶的评估，并且“提取”+缓冲只是限制了需求中php代码的可见范围。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-04-12T17:31:08.193

**创建文件**

1.  配置文件
2.  索引.php

**创建文件夹**

1.  公司
2.  模板/默认/控制器/这里的主要文件 home.php、login.php、register.php、contact.php、product.php ...

* * *

1.  headet.tpl 和 footer.tpl 包含 home.php 文件。
2.  主目录/模板/默认

**config.php 代码在这里**

```
/* semu design */
// HTTP URL
define('HTTP_SERVER', 'http://localhost/1/');

// HTTPS URL DISABLE
// define('HTTPS_SERVER', 'http://localhost/1/');

// DİZİNLER
define('DIR_INC',       'C:\wamp\www\1/inc/');
define('DIR_TEMLATE',   'C:\wamp\www\1/template/default/');
define('DIR_MODULES',   'C:\wamp\www\1/template/default/module/');
define('DIR_IMAGE',     'C:\wamp\www\1/image/');
define('DIR_CACHE',     'cache'); // [php cache system turkish coder][1]

// DB
define('DB_HOSTNAME',   'localhost');
define('DB_USERNAME',   'root');
define('DB_PASSWORD',   '123');
define('DB_DATABASE',   'default');
define('DB_PREFIX',     ''); 
```

**index.php 代码在这里**

```
<?php 
// Version
define('VERSION', '1.0');

// Config file
if (file_exists('config.php')) {
    require_once('config.php');
}

// Moduller
require_once(DIR_INC . 'startup.php'); // mysql.php db engine, cache.php, functions.php, mail.php ... vs require_once code

// Cache System
//$sCache = new sCache();

/*$options = array(
    'time'   => 120,
    'buffer' => true,
    'load'   => false,
    //'external'=>array('nocache.php','nocache2.php'), // no cache file
);

$sCache = new sCache($options);*/

// page
$page = isset($_GET['page']) ? trim(strtolower($_GET['page'])) : "home";

$allowedPages = array(
    'home'          => DIR_TEMPLATE.'controller/home.php',
    'login'         => DIR_TEMPLATE.'controller/login.php',
    'register'      => DIR_TEMPLATE.'controller/register.php',
    'contact'       => DIR_TEMPLATE.'controller/contact.php'
);

include( isset($allowedPages[$page]) ? $allowedPages[$page] : $allowedPages["home"] );
?> 
```

> 1.  index.php?page=home
> 2.  index.php?page=登录 ...

**活动类代码**

```
<ul>
<li <?php if ( $page == 'home' ) echo 'class="active"'; ?> Home </li>
<li <?php if ( $page == 'login' ) echo 'class="active"'; ?> Login </li>
</ul> 
```

> 1.  令牌系统即将到来：
> 2.  index.php?page=home&token=Co54wEHHdvUt4QzjEUyMRQOc9N1bJaeS

问候。

# ruby-on-rails - 限制 has_many 关系中关联数量的最佳实践？

> ID：292403
> 
> 赞同：4
> 
> 时间：2008-11-15T10:46:32.827
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有两个模型——用户和帐户。每个账号最多可以关联n个用户，一个用户只能关联一个账号。

说用户似乎很自然

```
belongs_to :account 
```

和帐户

```
has_many :users 
```

但是，在通过该 has_many 声明限制关联数量时，我不清楚最佳实践。我知道有一个 :limit 参数，但这只会限制返回的关联数量，而不是能够存在的数量。

我怀疑答案是使用类似 :before_add 的东西。但是，这种方法似乎只适用于通过 << 创建的关联。所以它会在你使用时被调用

```
@account.users << someuser 
```

但如果你用过

```
@account.users.create 
```

我还考虑过在 User 模型中使用 before_save 实现限制可能更实用，但在 User 模型中实现 Account 业务规则似乎有点偏离。

限制关联数量的最佳做法是什么？

编辑：每个帐户的 n 个用户将是存储在个人帐户中的一些业务数据，而不是在代码中随意浮动的直接幻数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T12:15:19.667

首先，如果你的 users 表有外键 account_id 那么你需要使用

```
class User
  belongs_to :account
end 
```

这样，您将确保用户只能关联到一个帐户。

如果您想限制该帐户最多可以有 3 个用户，那么您可以定义以下验证：

```
class User
  validates_each :account do |user, attr, value|
    user.errors.add attr, "too much users for account" if user.account.users.size >= 3
  end
end 
```

因此，如果帐户已经有 3 个用户，您将无法为帐户创建新用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T13:19:56.713

我认为您的规则有不同的解释。将规则想象为“您不能将用户添加到已经有 3 个用户的帐户中”。现在它是用户规则，在用户对象上实现它似乎非常自然，@Raimond 的解决方案就足够了。

您也可以考虑将其实现为数据库约束，但我可能不会那样做...... 3 似乎是一个任意数字，以后可能会改变，我，我怀疑你，更希望它被捕获代码而不是隐藏在数据库约束中。

# database - 优化：为 HTML 使用本地文件或数据库

> ID：292415
> 
> 赞同：2
> 
> 时间：2008-11-15T11:02:50.827
> 
> 标签：database, optimization, filesystems, performance

这是从[这个问题](https://stackoverflow.com/questions/292395/php-templating)开始的，假设我使用文件来存储我的 HTML 模板，我得到了一些答案。

在最近之前，我总是将“编译”模板作为 html 文件保存在目录中（根目录之上）。我的模板通常有两种类型的变量——“静态”变量，它们不会在每次使用时都被替换，而是在整个站点中使用——基本上是为了便于维护，例如，如果我决定更改站点名称；以及在每次页面加载时发生变化的动态变量。

我总是习惯将这些作为文件保存在服务器上 - 但我的朋友指出了我忽略的一些事情：当您可以进行一次数据库调用时，为什么还要进行 5-10 次文件系统调用？

**我想知道哪个更有效率？从系统调用几个 HTML 文件或从数据库调用几行模板（在一个查询/调用中）。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T11:10:49.830

**不要在数据库中存储可编辑的 HTML**

说真的，因为一旦你意识到你不能再只是弹出一个文本编辑器，仅仅改变的维护开销就会变得很穷。

我参与了许多在数据库中有 HTML 内容的项目，“找到内容所在的那一行”一直是一场噩梦，我真的很想*拍摄*制作它的人。

另外，**不要过早地优化**. 如果你发现它是一个减慢项目速度的问题，那么就改变它。因为为了节省一毫秒，使代码的可维护性大大降低。但是将代码设计得足够好，以便以后需要更改内容的来源，这应该很容易做到。

> 当然，这可以通过拥有一个合适的 Web 界面来编辑模板来解决吗？

呃，真的不是，除非你只是想和记事本竞争。语法高亮和您可以在标准编辑器中获得的所有其他完整功能只会让您的开发人员在发现自己编辑网页时会自杀不必担心实体编码等，例如，尝试在 html 内容包含文本区域元素的文本区域中编辑 html！）

### 在 FileIO 上

虽然文件 IO 可能是一个瓶颈，但请记住，如果您安装了正确的 linux 并且有足够的内存，则称为“磁盘缓存”的方便的东西会生效，它实际上会将文件使用在内存中，所以文件IO 变得仅仅是 memcpy。

相反，在我使用的任何代码的实际压力测试中，最大的减速发生在数据库中！主要是缓慢的 CONNECT 字符串、查询解析时间、额外的 php<->mysql 交互。你并不是真的想获得任何东西。文件系统查找接近于数据库索引查找，除了“您需要从磁盘流式传输”之外，您没有任何未知数，无需担心表锁定问题！

您可能应该尝试像缓存库之类的东西，强烈推荐 X-Cache，这更有可能给您带来明显的性能提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T11:23:53.733

我非常同意肯特弗雷德里克回答的要点。但是，如果你真的想知道哪个更高效/更快，你不能合理地期望在这里得到答案。如果你想要这个答案，只有一种方法可以得到它：双向分析应用程序。

# jquery - 在 jQuery 中，将具有相同类的跨度设置为 display:inline from :block

> ID：292419
> 
> 赞同：1
> 
> 时间：2008-11-15T11:10:55.570
> 
> 标签：jquery

使用 jQuery，有没有办法选择引用特定 css 类的所有标签，并将显示设置为“内联”？

例子：

```
<span class="theclass">junk</span>
<span class="theclass">other junk</span>
<span class="theclass">more junk</span> 
```

在 .css 中：

```
.theclass {
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T11:24:52.500

```
$(".theclass").css("display", "inline"); 
```

或许

```
$(".theclass").show(); 
```

# c# - 确定一个反射类型是否可以转换为另一个反射类型

> ID：292437
> 
> 赞同：5
> 
> 时间：2008-11-15T11:33:49.220
> 
> 标签：c#, .net, reflection

在.net（C＃）中，如果您通过反射发现了两种类型，是否可以确定是否可以将一种类型转换为另一种类型？（隐式和/或显式）。

我要做的是创建一个库，允许用户指定一种类型的属性映射到另一种类型的属性。如果这两个属性具有匹配的类型，一切都很好，但我希望能够允许它们映射可以使用隐式/显式转换的属性。所以如果他们有

```
class from  
{
  public int IntProp{get;set;}
}

class to
{
  public long LongProp{get;set;}
  public DateTime DateTimeProp{get;set;}
} 
```

他们可以说 from.IntProp 将被分配给 to.LongProp （因为存在隐式转换）。但是如果他们说它映射到 DateTimeProp 我就可以确定没有可用的演员表并抛出异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-01-09T16:35:50.010

```
public static bool HasConversionOperator( Type from, Type to )
        {
            Func<Expression, UnaryExpression> bodyFunction = body => Expression.Convert( body, to );
            ParameterExpression inp = Expression.Parameter( from, "inp" );
            try
            {
                // If this succeeds then we can cast 'from' type to 'to' type using implicit coercion
                Expression.Lambda( bodyFunction( inp ), inp ).Compile();
                return true;
            }
            catch( InvalidOperationException )
            {
                return false;
            }
        } 
```

这应该可以解决隐式和显式转换（包括数字类型、类等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-15T10:40:31.923

这里的实现并不漂亮，但我相信它涵盖了所有情况（隐式/显式运算符、可为空的装箱/拆箱、原始类型转换、标准强制转换）。请注意，说转换可能成功与说它会成功（几乎不可能确定）是有区别的。有关更多详细信息、全面的单元测试和隐式版本，请查看我的[帖子](https://web.archive.org/web/20141124210557/http://www.codeducky.org/dynamically-determining-implicit-explicit-type-conversions-c/)。

```
public static bool IsCastableTo(this Type from, Type to)
{
    // from https://web.archive.org/web/20141017005721/http://www.codeducky.org/10-utilities-c-developers-should-know-part-one/ 
    Throw.IfNull(from, "from");
    Throw.IfNull(to, "to");

    // explicit conversion always works if to : from OR if 
    // there's an implicit conversion
    if (from.IsAssignableFrom(to) || from.IsImplicitlyCastableTo(to))
    {
        return true;
    }

    // for nullable types, we can simply strip off the nullability and evaluate the underyling types
    var underlyingFrom = Nullable.GetUnderlyingType(from);
    var underlyingTo = Nullable.GetUnderlyingType(to);
    if (underlyingFrom != null || underlyingTo != null)
    {
        return (underlyingFrom ?? from).IsCastableTo(underlyingTo ?? to);
    }

    if (from.IsValueType)
    {
        try
        {
            ReflectionHelpers.GetMethod(() => AttemptExplicitCast<object, object>())
                .GetGenericMethodDefinition()
                .MakeGenericMethod(from, to)
                .Invoke(null, new object[0]);
            return true;
        }
        catch (TargetInvocationException ex)
        {
            return !(
                ex.InnerException is RuntimeBinderException
                // if the code runs in an environment where this message is localized, we could attempt a known failure first and base the regex on it's message
                && Regex.IsMatch(ex.InnerException.Message, @"^Cannot convert type '.*' to '.*'$")
            );
        }
    }
    else
    {
        // if the from type is null, the dynamic logic above won't be of any help because 
        // either both types are nullable and thus a runtime cast of null => null will 
        // succeed OR we get a runtime failure related to the inability to cast null to 
        // the desired type, which may or may not indicate an actual issue. thus, we do 
        // the work manually
        return from.IsNonValueTypeExplicitlyCastableTo(to);
    }
}

private static bool IsNonValueTypeExplicitlyCastableTo(this Type from, Type to)
{
    if ((to.IsInterface && !from.IsSealed)
        || (from.IsInterface && !to.IsSealed))
    {
        // any non-sealed type can be cast to any interface since the runtime type MIGHT implement
        // that interface. The reverse is also true; we can cast to any non-sealed type from any interface
        // since the runtime type that implements the interface might be a derived type of to.
        return true;
    }

    // arrays are complex because of array covariance 
    // (see http://msmvps.com/blogs/jon_skeet/archive/2013/06/22/array-covariance-not-just-ugly-but-slow-too.aspx).
    // Thus, we have to allow for things like var x = (IEnumerable<string>)new object[0];
    // and var x = (object[])default(IEnumerable<string>);
    var arrayType = from.IsArray && !from.GetElementType().IsValueType ? from
        : to.IsArray && !to.GetElementType().IsValueType ? to
        : null;
    if (arrayType != null)
    {
        var genericInterfaceType = from.IsInterface && from.IsGenericType ? from
            : to.IsInterface && to.IsGenericType ? to
            : null;
        if (genericInterfaceType != null)
        {
            return arrayType.GetInterfaces()
                .Any(i => i.IsGenericType
                    && i.GetGenericTypeDefinition() == genericInterfaceType.GetGenericTypeDefinition()
                    && i.GetGenericArguments().Zip(to.GetGenericArguments(), (ia, ta) => ta.IsAssignableFrom(ia) || ia.IsAssignableFrom(ta)).All(b => b));
        }
    }

    // look for conversion operators. Even though we already checked for implicit conversions, we have to look
    // for operators of both types because, for example, if a class defines an implicit conversion to int then it can be explicitly
    // cast to uint
    const BindingFlags conversionFlags = BindingFlags.Public | BindingFlags.Static | BindingFlags.FlattenHierarchy;
    var conversionMethods = from.GetMethods(conversionFlags)
        .Concat(to.GetMethods(conversionFlags))
        .Where(m => (m.Name == "op_Explicit" || m.Name == "op_Implicit")
            && m.Attributes.HasFlag(MethodAttributes.SpecialName)
            && m.GetParameters().Length == 1 
            && (
                // the from argument of the conversion function can be an indirect match to from in
                // either direction. For example, if we have A : B and Foo defines a conversion from B => Foo,
                // then C# allows A to be cast to Foo
                m.GetParameters()[0].ParameterType.IsAssignableFrom(from)
                || from.IsAssignableFrom(m.GetParameters()[0].ParameterType)
            )
        );

    if (to.IsPrimitive && typeof(IConvertible).IsAssignableFrom(to))
    {
        // as mentioned above, primitive convertible types (i. e. not IntPtr) get special 
        // treatment in the sense that if you can convert from Foo => int, you can convert
        // from Foo => double as well
        return conversionMethods.Any(m => m.ReturnType.IsCastableTo(to));
    }

    return conversionMethods.Any(m => m.ReturnType == to);
}

private static void AttemptExplicitCast<TFrom, TTo>()
{
    // based on the IL generated from
    // var x = (TTo)(dynamic)default(TFrom);

    var binder = Microsoft.CSharp.RuntimeBinder.Binder.Convert(CSharpBinderFlags.ConvertExplicit, typeof(TTo), typeof(TypeHelpers));
    var callSite = CallSite<Func<CallSite, TFrom, TTo>>.Create(binder);
    callSite.Target(callSite, default(TFrom));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-11-27T16:06:27.583

直接回答你的问题...

> 如果您通过反射发现了两种类型，是否可以确定是否可以将一种类型转换为另一种？（隐式和/或显式）

...您可以使用类似的东西：

```
to.GetType().IsAssignableFrom(from.GetType()); 
```

Type.IsAssignableFrom() 方法可以完全用于您的目的。与使用 TypeConverters 相比，这也将大大减少冗长（即使只是稍微提高性能）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T11:37:05.190

最好看看 TypeConverter 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T13:44:00.347

那么，您的意思可能是鸭子类型或结构类型？有几种实现可以动态生成所需的代理。

例如：

[http://www.deftflux.net/blog/page/Duck-Typing-Project.aspx](http://www.deftflux.net/blog/page/Duck-Typing-Project.aspx)

# c# - 在 C# 中包装 Visual C++

> ID：292450
> 
> 赞同：3
> 
> 时间：2008-11-15T11:45:00.883
> 
> 标签：c#, .net, c++, interop, reverse-engineering

我需要使用 C++ 进行一些进程注入，但我更愿意将 C# 用于除低级内容之外的所有内容。我听说过“函数包装”和“编组”，并且已经做了很多谷歌搜索，并且在这里和那里找到了一些信息，但我仍然非常缺乏。

我按有用的顺序阅读的内容；
[http://msdn.microsoft.com/en-us/library/ms235281(VS.80).aspx](http://msdn.microsoft.com/en-us/library/ms235281(VS.80).aspx)
[http://www.drdobbs.com/cpp/184401742](http://www.drdobbs.com/cpp/184401742)
[http://geeklit.blogspot.com/2006/08 /calling-c-lib-from-c.html](http://geeklit.blogspot.com/2006/08/calling-c-lib-from-c.html)

如何将所有较低级别的东西（本机 C++）包装在 C# 中，以便我可以轻松地用我更熟悉的语言 C# 来命令这些函数？

非常感谢有关该主题的任何信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T14:06:26.340

我认为 P/Invoke 确实是最直接的方法：

*   *在非托管*C++中创建一个 DLL ，其中包含执行注入所需的所有功能。
*   在您的 C# 代码中，声明一些`static extern`方法，并使用`DllImport`属性将它们指向您的 C++ dll。有关更多详细信息，请参阅[arul](https://stackoverflow.com/users/15409/arul)在[其答案](https://stackoverflow.com/questions/292450/wrapping-visual-c-in-c#292455)中提供的链接。

请注意，P/Invoke 不限于“windows API 函数”——您可以调用任何本机 DLL 公开的函数。

P/Invoke 的一个潜在缺点是您必须为您的 C++ 函数提供签名，可能会指定一些不太明显的编组。在这种情况下，您可以考虑构建 COM 服务器而不是“普通”DLL，并使用[COM 互操作](http://msdn.microsoft.com/en-us/library/kew41ycz(VS.80).aspx)从 C# 调用您的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T11:53:23.457

要使用 P/Invoke，请参阅[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T13:21:16.103

如果 Pinvoking 不是您想要做的，那么创建一个托管 C++ 应用程序。使用本机 C++ 进行进程注入。使用托管 c++ 为这种本机行为创建一个 .NET 友好的接口。然后可以从 C# 调用它。

# ruby-on-rails - Rails 非图像文件上传到数据库而不使用服务器端临时文件？

> ID：292453
> 
> 赞同：3
> 
> 时间：2008-11-15T11:51:41.617
> 
> 标签：ruby-on-rails, ruby

我正在研究向我的基于 Rails 的 Intranet 站点添加一个允许用户上传文件的功能的可行性。

两个目的：我的用户在地理上分布广泛，并且链接到共享网络存储上的文档并不总是有效（不同的地址、DNS 条目和我无法控制或不感兴趣的东西），所以我正在考虑提供一个面向数据库的替代方案。我们有许多文件，我们在客户端从中解析数据。我宁愿能够将其推送到服务器。

我看过 attachment_fu、Paperclip 和另一个（忘记名字了！），所有这些看起来都非常面向图像，尽管 attachment_fu 至少可以在没有图像处理库的情况下工作，谢天谢地。

最大的问题是我的服务器不允许我的应用程序在本地写入文件，而这些插件似乎都想创建一个 Tempfile。

问题（终于！）

是否有一种合理的方法可以上传二进制数据并将其在内存中处理和/或将其存储为 BLOB 而无需保存任何服务器端文件？

还是我应该放弃文件分发的想法，并在可能的情况下为用户提供复制和粘贴文本框的次优选择？

（我能在 SO 上找到的最接近的是[这](https://stackoverflow.com/questions/116353/uploading-files-in-ruby-on-rails)并没有真正帮助）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-16T16:57:07.257

您可以从 params 对象中读取数据，并将其直接写入您的模型。

例如，您可以有这样的表格。

```
<% form_for :upload, :url => {:action=>:upload}, :html=>{:multipart=>true} do |f| %>
  <%= f.file_field :file %>
  <%= f.submit 'Upload' %>
<% end %> 
```

然后您可以轻松获取原始文件名和二进制数据。

```
class TestController < ApplicationController

  def upload 
    file_param = params[:upload][:file]
    filename = file_param.original_filename
    filedata = file_param.read

    @data = UploadedFile.create(:name => filename, :data => filedata)

    render :text => "created #{@data.id}"
  end

end 
```

当然，您的模型需要有正确的列。

```
class CreateUploadedFiles < ActiveRecord::Migration
  def self.up
    create_table :uploaded_files do |t|
      t.string :name
      t.binary :data
      t.timestamps
    end
  end

  def self.down
    drop_table :uploaded_files
  end
end 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T14:00:10.783

这个[HowTo](http://wiki.rubyonrails.org/rails/pages/HowtoUploadFiles) for Rails 包括一个关于如何直接上传到数据库的部分（接近页面末尾）。该部分有点混乱，但要点是您只需将上传的文件内容读入 ActiveRecord 对象上的 BLOB 字段并正常保存。由于我不知道您如何在应用程序中使用该文件，因此我无法就如何从数据库中使用它提供任何建议，尽管在 HowTo 中还有一个关于从数据库下载的部分。

仅查看您是否可以获得写入单个目录的权限可能更容易，可能在您的 Web 应用程序文件夹中，在服务器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-17T20:44:20.590

> 最大的问题是我的服务器不允许我的应用程序在本地写入文件，而这些插件似乎都想创建一个 Tempfile。

是的，否则您根本无法上传文件。

如果上传的文件大于 15k 左右，Rails 本身会创建临时文件。

```
<%= f.file_field :file %>
....
file_param = params[:upload][:file] 
```

只要您上传大于 15k`params[:upload][:file]`的内容，就会变成`ActionController::UploadedTempFile`.

有什么不同？Rails 可能会将其临时文件写入全局临时目录（每个人都可以写入），但插件可能正在尝试写入 RAILS_ROOT/tmp，而您的服务器不允许这样做。好消息是您可以将这些东西配置为使用不同的临时目录，这样他们就可以编写他们的临时文件，这一切都应该工作。

例如，[attachment_fu 的默认临时路径位于 rails 根目录下。](http://github.com/technoweenie/attachment_fu/tree/master/lib/technoweenie/attachment_fu.rb#L4). 您应该能够像这样更改它：

```
Technoweenie::AttachmentFu.tempfile_path = Dir::tmpdir 
```

**PS：直接从参数中提取文件数据并将其放入数据库可能仍然是最好的方法。我个人不喜欢 attachment_fu 和它的同类，因为他们试图做太多的事情，但无论哪种方式，了解整个上传的文件/临时文件如何在 rails 中工作都是非常有用的 :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-20T14:23:57.360

所以我的控制器中的这段代码：

```
 def upload
    file_content = params[:upload][:file]
    render :text => [
      [:original_path, :content_type, :local_path, :path, :original_filename].collect {|m| file_content.send(m)},
      file_content.class, 
      file_content.size.to_s].flatten.join("<br/>")
  end 
```

给这个较小的文件：

```
b_wib.xls
application/vnd.ms-excel

b_wib.xls
ActionController::UploadedStringIO
13824 
```

这是一个更大的：

```
a_wib.xls
application/vnd.ms-excel
/tmp/CGI.10029.1
/tmp/CGI.10029.1
a_wib.xls
ActionController::UploadedTempfile
27648 
```

...这与猎户座描述的完全一样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-08-05T14:07:55.260

For anyone else reading this while just saving the File/IO in params to the database is a nice solution (why complicate matters) Paperclip, and I would suspect attachment_fu, are not image specific. Since uploading images and resizing are very common Paperclip comes bundled with a processor to resize images, but it is not enabled by default and you can easily add your own processors.

# c++ - Visual Studio 2008 的探查器，C++？

> ID：292457
> 
> 赞同：16
> 
> 时间：2008-11-15T11:54:51.127
> 
> 标签：c++, visual-studio-2008, profiler

对于至少可以与 Visual Studio 2008 Professional 集成的本机 C++，是否有任何好的、免费（或至少相当便宜）的分析器？

我查看了[DevPartner](http://www.compuware.com/products/devpartner/profiler/default.asp?cid=701000000004ej0AAA&focus=&productfocus=&source=Web+-+Evaluation+Request&offering=DevPartner&productfamily=DevPartner&desc=The+DevPartner+Community+Profiler+Edition+is+a+product+download+that+offers+customers+and+prospects+a+high-level+view+of+the+performance+profiling+capabilities+of+DevPartner+Studio+Professional+Edition.&trk=200601-74)社区版，但它们似乎只支持 Visual Studio 2003 和 Visual Studio 2005。

如果没有任何好的免费/便宜的分析器，我可以用相对较少的摩擦来使用 VS？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-11-16T07:53:43.767

在我的工作场所，我们使用[AQTime](http://www.automatedqa.com/products/aqtime/)。它不是免费的（600 美元或 30 天的试用期），但它确实能创造奇迹。我喜欢它，因为它可以处理本机（我们使用 C++）和托管代码。它在独立模式下工作，与 Visual Studio 集成，还可以与 Borland 的 IDE 一起工作（对于那些 C++ Builder 和 Delphi 爱好者）。

但我会看这个问题，看看有没有我可以在家使用的免费工具=）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-08-26T14:35:26.650

Microsoft 实际上提供了分析器的独立版本，您可以从命令行使用它。 [http://www.microsoft.com/downloads/details.aspx?familyid=fd02c7d6-5306-41f2-a1be-b7dcb74c9c0b&displaylang=en](http://www.microsoft.com/downloads/details.aspx?familyid=fd02c7d6-5306-41f2-a1be-b7dcb74c9c0b&displaylang=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-03-04T14:41:47.057

[此技术](https://stackoverflow.com/questions/375913/what-can-i-use-to-profile-c-code-in-linux/378024#378024)是免费的，并且在 Visual Studio 中运行良好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-01-29T23:47:02.073

再次投票给 AQTime。我们对此非常满意。但当然它不是你问的免费的......

我尝试过一次 CodeAnalyst，但据我所知，它是在进行轮询而不是检测，因此给出了相当粗略的结果。还没有找到任何我更喜欢的免费 Windows 分析器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-09-15T05:28:00.850

[http://supercomputingblog.com/windows/how-to-profile-c-code-in-visual-studio-for-free/](http://supercomputingblog.com/windows/how-to-profile-c-code-in-visual-studio-for-free/)如果你想要一些非常简单的东西

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-09-06T11:45:15.140

VS 2008 的免费分析器： [http](http://unick-soft.ru/Articles.cgi?id=8) ://unick-soft.ru/Articles.cgi?id=8 这是俄文文章，但您可以使用翻译 google com。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T14:02:18.280

我相信英特尔的 VTune 或 AMD 的 CodeAnalyst 都是免费的。

# sql-server - 存储过程 MSSQL2005

> ID：292458
> 
> 赞同：3
> 
> 时间：2008-11-15T11:55:59.877
> 
> 标签：sql-server, sql-server-2005, stored-procedures

如果您有很多存储过程并且您更改了表列的名称，有没有办法检查哪些存储过程不再工作？

* * *

**更新**：我已经阅读了一些答案，我很清楚没有简单的方法可以做到这一点。离开存储过程会更容易吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T12:31:49.603

我是 SysComments 的忠实粉丝：

```
SELECT DISTINCT Object_Name(ID) 
FROM SysComments 
WHERE text LIKE '%Table%'
AND text LIKE '%Column%' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T12:09:27.993

对此有一个书本式的答案，也有一个现实世界的答案。

首先，对于书上的答案，您可以使用 sp_depends 查看其他存储过程引用了该表（而不是单个列），然后检查它们是否引用了该表：

[http://msdn.microsoft.com/en-us/library/ms189487.aspx](http://msdn.microsoft.com/en-us/library/ms189487.aspx)

然而，现实世界的答案是它在很多情况下都不起作用：

*   动态 SQL 字符串：如果您在存储过程或应用程序代码中动态构建字符串，然后执行该字符串，SQL Server 无法知道您的代码在做什么。您可能在代码中硬编码了列名，这会中断。
*   嵌入式 T-SQL 代码：如果您的应用程序中有代码（不在 SQL Server 中），那么 SQL Server 端将不会检测到它。

另一种选择是使用 SQL Server Profiler 捕获服务器上所有活动的跟踪，然后在捕获的查询中搜索所需的字段名称。在生产服务器上这不是一个好主意，因为配置文件会产生一些开销，但它确实有效 - 大多数时候。如果您的应用程序执行“SELECT *”，然后在您的应用程序中，您期望特定字段名称作为该结果集的一部分返回，它将中断。

您可能开始明白没有简单直接的方法可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T14:26:41.757

虽然这将花费最多的工作，但确保一切正常的最佳方法是**编写集成测试**。

集成测试就像单元测试一样，除了在这种情况下它们将与数据库集成。这需要一些努力，但您可以轻松编写测试来运行每个存储过程，以确保它*执行*时不会出错。

在最简单的情况下，它只会执行 sp 并确保没有错误并且不关心实际结果。如果您的测试只是执行 sp 没有检查结果，那么您可以通用地编写很多这样的内容。

为此，您需要一个数据库来执行。虽然您可以手动设置数据库并部署存储过程，但最好的方法是使用持续集成从源代码控制系统自动获取最新代码（数据库 DDL、存储过程、测试）、构建数据库并执行您的测试。每次您提交对源代码管理的更改时都会发生这种情况。

是的，这似乎需要做很多工作。工作量很大，但回报也很大。确保您的更改不会破坏任何内容的能力使您能够以更高的质量更快地推动产品发展。

看看[NUnit](http://www.nunit.org)和[NDbUnit](http://sourceforge.net/projects/ndbunit/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T12:03:09.083

我敢肯定有更优雅的方法来解决这个问题，但如果数据库不是太复杂，这里有一个快速而肮脏的方法：

选择所有存储过程和脚本到一个查询窗口。

搜索旧的列名。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T12:20:11.327

如果您只对在存储过程中查找列使用感兴趣，那么最好的方法可能是在定义列 sys.sql_modules 表中对列名进行暴力搜索 - 该表存储存储过程/函数的定义。

# language-agnostic - 在编写任何代码之前，您如何规划应用程序的架构？

> ID：292463
> 
> 赞同：84
> 
> 时间：2008-11-15T12:06:31.603
> 
> 标签：language-agnostic, architecture, oop

我挣扎的一件事是在编写任何代码之前规划应用程序的架构。

我的意思不是收集需求以缩小应用程序需要做什么，而是有效地思考一种布置整体类、数据和流结构的好方法，并迭代这些想法，以便我有一个可靠的计划甚至在打开 IDE 之前都要考虑行动。目前，只需打开 IDE，创建一个空白项目，开始编写零碎的代码，然后让设计从那里“成长”出来，这一切都很容易。

我收集 UML 是做到这一点的一种方法，但我没有使用它的经验，所以它看起来有点模糊。

**在编写任何代码之前，您**如何规划应用程序的架构？如果 UML 是要走的路，您能否为小型应用程序的开发人员推荐一份简明实用的介绍？

感谢您的意见。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2008-11-15T12:32:08.480

我考虑以下几点：

1.  系统应该做什么，即系统试图解决的问题是什么
2.  谁是客户，他们的愿望是什么
3.  系统必须与什么集成
4.  是否有任何遗留方面需要考虑
5.  什么是用户交互
6.  ETC...

然后我开始将系统视为一个黑匣子，然后：

1.  需要与那个黑盒子发生什么交互
2.  黑匣子内部需要发生什么行为，即这些交互需要发生什么才能使黑匣子在更高级别表现出所需的行为，例如接收和处理来自预订系统的传入消息，更新数据库等.

然后这将开始为您提供由各种内部黑匣子组成的系统视图，每个黑匣子都可以以相同的方式进一步分解。

UML 非常适合表示这种行为。您可以仅使用 UML 众多组件中的两个组件来描述大多数系统，即：

*   类图，和
*   序列图。

如果需要描述的行为有任何并行性，您可能还需要活动图。

学习 UML 的一个很好的资源是 Martin Fowler 的优秀书籍“UML Distilled”（[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/0321193687)- 为脚本儿童链接纳粹清理过 (-: )。这本书让您快速了解每个组件的基本部分UML。

哦。我所描述的几乎是 Ivar Jacobson 的方法。Jacobson 是 OO 的三个朋友之一。事实上，UML 最初是由形成三个朋友的另外两个人 Grady Booch 和 Jim Rumbaugh 开发的

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-11-15T12:30:00.730

我真的发现首先在纸上或白板上书写非常重要。如果你愿意的话，然后转移到 UML，但没有什么比一开始手工绘制它的灵活性更好的了。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-11-15T13:18:31.973

你绝对应该看看 Steve McConnell 的 Code Complete——尤其是他关于“建筑设计”的赠品章节

你可以从他的网站下载：

[http://cc2e.com/File.ashx?cid=336](http://cc2e.com/File.ashx?cid=336)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-11-15T12:13:24.243

如果您正在为 .NET 开发，Microsoft 刚刚发布了（作为免费电子书！）[应用程序架构指南 2.0b1](http://www.infoq.com/news/2008/11/App-Architecture-Guide-2.0)。它提供了大量关于在编写任何代码之前规划架构的非常好的信息。

如果您很绝望，我希望您可以将其中的大部分用于非基于 .NET 的架构。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-11-15T12:30:46.423

我首先要说的是，我主要从事 Web 开发，其中大部分架构已经提前确定（WebForms，现在的 MVC），而且我的大多数项目都是相当小的，一个人的工作时间不到一年。我还知道我将有一个 ORM 和 DAL 来分别处理我的业务对象和数据交互。最近，我已经转而使用 LINQ，因此很多“设计”变成了通过 DBML 设计器进行的数据库设计和映射。

通常，我以 TDD（测试驱动开发）方式工作。我不会花很多时间在建筑或设计细节上。我确实通过故事收集了用户与应用程序的整体交互。我使用这些故事来进行交互设计并发现应用程序的主要组件。在此过程中，我与客户一起做了大量的白板工作——有时如果它们看起来足够重要以保持图表形式，则使用数码相机捕捉细节。主要是我的故事在 wiki 中以故事形式捕获。最终，故事被组织成发布和迭代。

到这个时候，我通常对架构有了很好的了解。如果它很复杂或者有一些不寻常的地方——与我的正常做法不同的东西——或者我正在和其他人一起工作（不是典型的），我会用图表（再次在白板上）。复杂的交互也是如此——我可以在白板上设计页面布局和流程，保留它（或通过相机捕捉）直到我完成该部分。一旦我大致了解了我要去哪里以及首先需要做什么，我将开始为第一个故事编写测试。通常，这就像：“好吧，我需要这些课程。我将从这个开始，它需要这样做。” 然后我开始愉快地进行 TDD，架构/设计从应用程序的需求中成长。

定期地，我会发现自己想要重新编写一些代码，或者认为“这真的很臭”，我会重构我的设计以消除重复或用更优雅的东西替换臭代码。大多数情况下，我关心的是在遵循良好设计原则的同时降低功能。我发现使用已知模式并在进行过程中注意好的原则非常有效。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-15T12:10:44.497

[http://dn.codegear.com/article/31863](http://dn.codegear.com/article/31863)

我使用 UML，发现该指南非常有用且易于阅读。如果您需要不同的东西，请告诉我。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-15T12:18:25.793

UML 是一种符号。这是一种记录您的设计的方式，但不是（在我看来）进行设计。但是，如果您需要写下来，我会推荐 UML，不是因为它是“最好的”，而是因为它是其他人可能已经知道如何阅读的标准，而且它比发明自己的“标准”要好。

我认为对 UML 最好的介绍仍然是 Martin Fowler 的[UML Distilled](https://rads.stackoverflow.com/amzn/click/com/020165783X)，因为它简洁明了，提供了在何处使用它的实用指导，并且清楚地表明您不必为了它而购买整个 UML/RUP 故事有用

做设计很难。它不能在一个 StackOverflow 答案中真正被捕捉到。不幸的是，我的设计技能，例如它们，多年来一直在发展，所以我没有一个可以参考的资源。

然而，我发现一个有用的模型是稳健性分析（谷歌，但这里有一个介绍[）](http://iconixprocess.com/iconix-process/analysis-and-preliminary-design/robustness-analysis/)。如果您有系统应该做什么的用例，涉及的领域模型，那么我发现健壮性分析是一个有用的工具，可以将两者联系起来并确定系统的关键组件需要什么.

但最好的建议是广泛阅读、认真思考和实践。这不是一个纯粹的可教技能，你必须实际去做。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-11-15T16:43:44.040

我不够聪明，无法提前计划。当我提前计划时，我的计划总是出错，但现在我已经在糟糕的计划上花费了*n天时间。*我在白板上的限制似乎是 15 分钟左右。

基本上，我会尽我所能来确定我是否朝着正确的方向前进。

我审视我的设计是否存在关键问题：当 A 对 B 执行 C 时，它对 D 来说是否足够快？如果没有，我们需要不同的设计。这些问题中的每一个都可以用一个尖峰来回答。如果尖峰看起来不错，那么我们就有了设计，是时候扩展它了。

我编码的方向是尽快获得一些真正的客户价值，所以客户可以告诉我应该去哪里。

因为我总是把事情弄错，所以我依靠重构来帮助我把它们弄好。重构是有风险的，所以我必须边写单元测试。由于耦合，事后编写单元测试很困难，所以我先编写测试。对这些东西保持自律是很困难的，而且不同的大脑对事物的看法也不同，所以我喜欢和我一起编码。我的编程伙伴有鼻子，所以我经常洗澡。

我们称之为“极限编程”。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-05-09T19:08:26.390

“白板、草图和便利贴是出色的设计工具。复杂的建模工具往往会让人分心而不是启发。” 来自[Venkat Subramaniam 和 Andy Hunt 的敏捷开发人员实践](http://www.pragprog.com/titles/pad/practices-of-an-agile-developer)。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2008-11-15T12:42:50.703

我不相信任何事情都*可以*在实施前提前规划。我有 10 年的经验，但那只是在 4 家公司（包括一家公司的 2 个站点，几乎完全相反），而且我几乎所有的经验都是在观看巨大的集群方面****** **发生。我开始认为重构之类的东西确实是做事的最佳方式，但同时我意识到我的经验是有限的，我可能只是对我所看到的做出反应。我真正想知道的是如何获得最好的体验，以便我能够得出正确的结论，但似乎没有捷径，只是需要很多时间看到人们做错事:(。我真的很想在一家人们做事正确的公司工作（正如成功的产品部署所证明的那样），

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2008-11-15T13:15:29.500

我不敢苟同：UML 可用于应用程序架构，但更常用于技术架构（框架、类或序列图……），因为这是这些图最容易与开发保持同步的地方.

当您采用一些功能规范（描述操作的性质和流程，而不对未来的实现做出任何假设）并将它们转换为技术规范时，就会出现**[应用程序架构。](https://stackoverflow.com/questions/212270#212362)**

这些规范代表了*实现*某些业务和功能需求所需的**应用程序。**

 *所以如果你需要处理几个大的金融投资组合（功能规范），你可能会确定你需要把那个大的规范划分为：

*   分配器将这些繁重的计算分配给不同的服务器
*   一个启动器，以确保在开始处理这些投资组合之前所有计算服务器都已启动并运行。
*   一个能够显示正在发生的事情的 GUI。
*   一个“通用”组件来开发特定的组合算法，独立于应用程序架构的其余部分，以方便单元测试，还可以进行一些功能和回归测试。

所以基本上，考虑***应用程序架构***就是决定你需要以一种连贯的方式开发哪些“文件组”（你不能在同一组文件中开发启动器、GUI、调度程序……：它们将无法以相同的速度发展）

当应用程序架构定义良好时，它的每个组件通常都是*配置*组件的良好候选者，即可以将一组文件作为一个全部版本控制到 VCS（版本控制系统）中，这意味着它的*所有*文件都将是每次您需要记录该应用程序的快照时都标记在一起（同样，很难标记您的*所有*系统，其每个应用程序不能同时处于稳定状态）

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2011-05-12T19:24:08.840

我从事建筑业有一段时间了。我先用BPML细化业务流程，再用UML捕捉各种细节！第三步一般是ERD！当您完成 BPML 和 UML 时，您的 ERD 将相当稳定！没有计划是完美的，也没有抽象是 100% 的。重构计划，目标是尽可能减少重构！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-11-15T15:15:40.333

我试图将我的想法分解为两个方面：我试图操纵的事物的表示，以及我打算用它们做什么。

当我尝试对我要操作的东西进行建模时，我想出了一系列离散的项目定义——一个电子商务网站将有一个 SKU、一个产品、一个客户等等。我还会处理一些非物质性的事情——订单或类别。一旦我拥有系统中的所有“名词”，我将创建一个域模型来显示这些对象如何相互关联——一个订单有一个客户和多个 SKU，许多 sku 被分组到一个产品中，等等在。

这些域模型可以表示为 UML 域模型、类图和 SQL ERD。

一旦我弄清楚了系统的名词，我就会转向动词——例如，这些项目中的每一个都经过哪些操作来提交订单。这些通常很好地映射到我的功能需求的用例——我发现表达这些的最简单方法是 UML 序列、活动或协作图或泳道图。

将其视为一个迭代过程很重要。我会在这个领域做一个小角落，然后处理这些动作，然后再回去。理想情况下，我将有时间编写代码来尝试一些东西——你永远不希望设计远远领先于应用程序。如果您认为自己正在为所有内容构建完整且最终的架构，则此过程通常很糟糕；实际上，您要做的只是建立团队在开发过程中将共享的基本基础。您主要是为团队成员创建一个共享词汇表，以便他们在描述系统时使用，而不是为必须如何完成制定法律。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-11-15T17:41:12.910

我发现自己在编码之前无法充分考虑系统。粗略地看一眼某些组件太容易了，您后来才意识到它们比您想象的要复杂得多。

一种解决方案是非常努力地尝试。到处写 UML。走遍每一堂课。想想它将如何与您的其他课程互动。这很难做到。

我喜欢做的是首先做一个总体概述。我不喜欢 UML，但我确实喜欢绘制能说明问题的图表。然后我开始实施它。即使我只是用空方法写出类结构，我也经常看到我之前错过的东西，所以我更新了我的设计。当我在编码时，我会意识到我需要做一些不同的事情，所以我会更新我的设计。这是一个**迭代过程**。“首先设计一切，然后实现一切”的概念被称为瀑布模型，我认为其他人已经表明这是一种糟糕的软件开发方式。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-11-17T11:33:31.577

试试 Archimate。

# java - 制作使用数据库的 Java 应用程序需要了解什么？

> ID：292464
> 
> 赞同：2
> 
> 时间：2008-11-15T12:08:11.833
> 
> 标签：java, database, netbeans

自从我开始使用 NetBeans 以来，我已经学会了一些[强大的方法](http://www.netbeans.org/kb/60/java/gui-db.html)来抽象创建 Java 数据库应用程序的过程，这些应用程序具有自动生成的 UI、bean 绑定和一堆我目前只是模糊理解其工作原理的东西（我讨厌成为新手）。问题是，*我该如何做我真正想做的基本事情*？我读过的教程对能够从 IDE 中连接和处理数据库，或者如何创建一些 UI 滑块和复选框并将其绑定到表列等方面做出了很大的贡献。但是我在哪里可以了解如何让我自己的代码做这些事情？抽象很好，但目前对我需要做的事情毫无用处。

任何人都可以向我推荐一些好的资源或教程来学习这个吗？我发现的几个并没有像我希望的那样有用，可以让我的项目开始......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T12:12:37.737

[JDBC 教程](http://java.sun.com/docs/books/tutorial/jdbc/index.html)是一个很好的起点

简介中的一个片段

```
JDBC API 是一种 Java API，可以访问任何类型的表格数据，
尤其是存储在关系数据库中的数据。

JDBC 帮助您编写管理这三种编程的 Java 应用程序
活动：

   1\. 连接到数据源，如数据库
   2\. 向数据库发送查询和更新语句
   3\. 检索并处理从数据库接收到的结果以回答
      您的查询

      下面的简单代码片段给出了一个简单的例子
这三个步骤：

```

```
 Connection con = DriverManager.getConnection
             ( "jdbc:myDriver:wombat", "myLogin","myPassword");

  Statement stmt = con.createStatement();
  ResultSet rs = stmt.executeQuery("SELECT a, b, c FROM Table1");
  while (rs.next()) {
    int x = rs.getInt("a");
    String s = rs.getString("b");
    float f = rs.getFloat("c");
  } 
```

```
      这个简短的代码片段将 DriverManager 对象实例化为
连接到数据库驱动程序并登录到数据库，实例化一个
将您的 SQL 语言查询传送到数据库的语句对象；
实例化一个检索查询结果的 ResultSet 对象，
并执行一个简单的 while 循环，检索并显示那些
结果。就是这么简单。

```

[此处](http://tinyurl.com/5sgag8)还有 Google 图书上的图书预览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T12:12:36.787

试试Sun的[JDBC 介绍。](http://java.sun.com/docs/books/tutorial/jdbc/overview/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T19:54:11.677

如果您熟悉 JDBC，您可能需要考虑使用[Spring 对 JDBC 的支持](http://static.springframework.org/spring/docs/2.5.x/reference/jdbc.html)。它为通过 JDBC 访问数据库提供了更好的 API（比标准库）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T13:21:01.593

阅读 jdbc 教程后，请注意基本概念： - 连接 - 语句 - 查询 - 结果集

数据库授权属于连接，查询是“做什么”的描述 - 获取数据或更新，结果集在某些情况下可能是可更新的（！）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-06-17T13:27:57.947

上次我查看 JDBC 教程时，其中有很多代码示例，如果它们用于实际应用程序，它们将成为 SQL 注入的秘诀。我必须教一门关于 JDBC 的课程，并且我应该使用该教程，但我必须用安全讲座来补充它。

# version-control - MS Source Server：srcsrv.ini 变量的意义

> ID：292480
> 
> 赞同：4
> 
> 时间：2008-11-15T12:22:51.463
> 
> 标签：version-control, project, source-server

MS 源服务器技术使用名为 srcsrv.ini 的初始化文件。其中一个值标识源服务器位置，例如，

```
MYSERVER=\\machine\foobar 
```

文档对这个值没有给出很多答案。首先，我无法找到值名称的意义，即左侧的内容——而且我没有看到它在其他任何地方使用过。[高级 Windows 调试](http://www.advancedwindowsdebugging.com/)中的 Hewardt & Pravat说“左侧......代表项目名称”，但这似乎与 MS 的“MYSERVER”示例不符。

左边的意义是*什么*？它还用在什么地方？该值是引用服务器还是项目，是每台服务器一个，还是每个项目一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-17T12:27:18.130

对于将来研究此问题的任何人，我从 MS 收到了以下信息：

> 左侧的名称是版本控制服务器的逻辑名称。该名称也用于源索引符号文件 (pdb)。例如，符号文件可能包含以下字符串值：
> 
>   MYSERVER=mymachine1.sys-mygroup.corp.microsoft.com:2003
> 
> ，并且源文件在 pdb 中的引用方式如下：
> 
>   *MYSERVER*/base/myfolder/
> 
> mycode.c SrcSrv 启动，它查看 Srcsrv.ini 的值；这些值会覆盖 .pdb 文件中包含的信息：
> 
>   “MYSERVER=mymachine.sys-mygroup.corp.microsoft.com:1666”覆盖
>   “MYSERVER=mymachine1.sys-mygroup.corp.microsoft.com:2003”
> 
> 这使用户能够将调试器配置为在调试时使用备用源代码控制服务器。该信息记录在[http://msdn.microsoft.com/en-us/library/ms680641.aspx](http://msdn.microsoft.com/en-us/library/ms680641.aspx)。

因此，它是源服务器的逻辑名称，它的值可以在调试时更改，以引用与创建 PDB 时最初使用的服务器不同的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-08T14:36:38.973

调试器检索源的方式是通过 srcsrv 使用一些命令行实用程序。实用程序本身和使用的命令行因托管代码的存储库类型而异。阻止检索的问题之一是，当调用该命令行程序时，它会失败。要找出在 WinDBG 中使用命令*!sym 噪声的原因。*它对诊断符号服务器问题很有帮助，但对于源索引 PDB，它还将显示实际使用的命令行 WinDBG。从命令日志窗口复制命令并在 CMD.EXE 中运行它以获取有关失败的更多详细信息。

# wpf - 查找 ListBox ItemTemplate 的哪一部分被双击

> ID：292491
> 
> 赞同：0
> 
> 时间：2008-11-15T12:35:57.160
> 
> 标签：wpf

我有一个数据绑定 ListBox，它使用自定义 ItemTemplate 来显示我的东西。ItemTemplate 有一个包含不同元素的 4x2 网格。现在我希望我的用户能够获得不同的数据，具体取决于他们双击的子项 - 所以如果他们双击第 0 行第 0 列中的图像，他们会得到一个窗口。如果他们双击第 1 行第 2 列中的文本块，他们将获得具有不同信息的不同类型的窗口。

当然，ListBox 中每一行的信息都是唯一的。

是否有任何简单的方法来获取有关用户双击网格的哪一行/列的信息？

ItemTemplate 是在外部资源字典中定义的，所以我看不到它绑定到事件本身的方法。

我是否需要制作自定义控件，或者没有它是否可行？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T17:44:18.943

WPF 引入了[RoutedEvents](http://msdn.microsoft.com/en-us/library/system.windows.routedevent.aspx)。在您的情况下，您可以简单地将 MouseDoubleClick 事件处理程序添加到您的 ListBox。

```
<ListBox ItemsSource="{Binding Path=myData}"
         ItemTemplate="{StaticResource template}"
         MouseDoubleClick="ListBox_MouseDoubleClick">
</ListBox> 
```

在后面的代码中，您将获得一个 MouseButtonEventArgs 类型的参数，其中包含有关原始源的信息。

```
MessageBox.Show(e.OriginalSource.ToString()); 
```

# php - 删除空标签的正则表达式

> ID：292516
> 
> 赞同：1
> 
> 时间：2008-11-15T13:07:23.370
> 
> 标签：php, html, regex

我想`&nbsp;`删除这样的空跨度标签（用空格填充）：

`<span> &nbsp; &nbsp; &nbsp; </span>`

我试过这个正则表达式，但它需要调整：

`(<span>(&nbsp;|\s)*</span>)`

`preg_replace('#<span>(&nbsp;|\s)*</span>#si','<\\1>',$encoded);`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T14:44:04.967

将 Kent Fredric 的正则表达式翻译成 PHP：

```
preg_match_all('#<span[^>]*(?:/>|>(?:\s|&nbsp;)*</span>)#im', $html, $result); 
```

这将匹配：

*   自动关闭跨度
*   跨越多行，无论如何
*   具有属性的跨度
*   跨越牢不可破的空间

也许你应该只包括跨度包含`<br />`...

像往常一样，在调整正则表达式时，一些工具很方便：

[http://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T13:13:23.623

.

```
qr{<span[^>]*(/>|>\s*?</span>)} 
```

应该了解他们的要点。（包括 XML 样式自结束标记，即：）

但是你**真的**不应该使用正则表达式来处理 HTML。

**仅回答与更正格式错误之前可见的问题上下文相关的问题**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T17:46:41.933

> 我试过这个正则表达式，但它需要调整：

原始问题中的正则表达式以什么方式失败？

> 当跨度嵌套时，问题就来了：`<span><span> &nbsp; </span></span>`

这是为什么使用正则表达式解析 HTML 不能很好地工作的一个例子。根据您的正则表达式风格，这种情况要么不可能一次性处理，要么非常困难。我不太了解 PHP 的正则表达式引擎，无法说出它属于哪个类别，但是，如果唯一的问题是它取出内部`<span>`并单独留下外部，那么您可能需要考虑简单地重新运行您的替换反复，直到没有事情可做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T13:33:40.087

我想这些跨度是由某些程序生成的，因为它们似乎没有任何属性。
我很困惑为什么你需要把它们括起来的空间放在尖括号之间，但是我又不知道代码的最终目的。
我认为 Kent 给出了解决方案：您必须使匹配不贪婪：因为您使用 dotall 选项，您将匹配第一个跨度和最后一个关闭跨度之间的所有内容！

所以答案应该是这样的：

`preg_replace('#<span>(&nbsp;|\s)*?</span>#si', '<$1>', $encoded);`

（未经测试）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-16T10:07:32.217

If your only issue are nested span tags, you can run the search-and-replace with the regex you have in a loop until the regex no longer finds any matches.

This may not be a very elegant solution, but it'll perform well enough.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-19T08:39:48.773

这是我对嵌套标签问题的解决方案，仍然不完整但接近...

```
$test="<span>   <span>& nbsp;  </span>  test <span>& nbsp; <span>& nbsp;  </span>  </span> & nbsp;& nbsp; </span>";

$pattern = '#<(\w+)[^>]*>(& nbsp;|\s)*</\1>#im';      
while(preg_match($pattern, $test, $matches, PREG_OFFSET_CAPTURE)!= 0)
{$test= preg_replace($pattern,'', $test);} 
```

对于简短的 $test 句子，该功能可以正常工作。尝试使用长文本时会出现问题。任何帮助将不胜感激...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2011-04-22T08:46:46.057

稍微修改一下 e-satis 的回答：

```
function remove_empty_spans($html_replace)
{
$pattern = '/<span[^>]*(?:\/>|>(?:\s|&nbsp;)*<\/span>)/im';
return preg_replace($pattern, '', $html_replace);
} 
```

这对我有用。

# visual-studio-2008 - 在 Visual Studio 2008 中将控制台应用程序转换为 Windows 应用程序？

> ID：292521
> 
> 赞同：3
> 
> 时间：2008-11-15T13:13:44.277
> 
> 标签：visual-studio-2008, console-application, windows

我发现[这个解决方案](https://stackoverflow.com/questions/144701/how-do-i-convert-a-net-console-application-to-a-winforms-or-wpf-application)有效，但我很难相信没有一键式解决方案可以解决这个问题。

你知道更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T13:15:21.403

不，没有“更好”的方法。这确实是唯一的方法:)（除非您创建自己的项目转换器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T16:57:22.407

这是唯一的方法。我猜你可以手动编辑项目文件来添加引用，但我会坚持使用 IDE。

# asp.net - 我的 reCaptcha 总是得到 Page.IsValid=False ......当使用 onClientClick="return validate()"

> ID：292528
> 
> 赞同：1
> 
> 时间：2008-11-15T13:17:50.337
> 
> 标签：asp.net, validation, captcha

我在我的 asp.net 2.0 Web 应用程序中使用 reCaptcha。

我在我的提交按钮上使用 onClientClick="return validateForm()" 。validateForm 进行基本检查并在不需要时阻止表单到达服务器......

出于某种原因，一旦用户通过客户端验证，他总是会得到 Page.IsValid="false"...

如果我删除 onClientClick 一切正常。该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-22T02:00:50.560

我不知道是什么导致了您的问题，但如果您还没有使用它，您可以尝试使用 .NET reCAPTCHA 库（可从[http://recaptcha.net/plugins/aspnet/获得）。](http://recaptcha.net/plugins/aspnet/)它使用 ASP.NET 验证器，因此您不需要进行任何自定义客户端验证。

# sql - LINQ to SQL 设计器错误

> ID：292535
> 
> 赞同：9
> 
> 时间：2008-11-15T13:28:14.623
> 
> 标签：sql, linq

每次我在保存后更改设计器中的值时，都会删除 .designer.cs 文件。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-11-15T14:26:32.773

将您的和文件`using`中的指令移动到范围内。`DataContext.cs``DataContext.designer.cs``namespace`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-11-15T13:58:18.553

*.designer.cs 文件完全由设计器生成。您不应将任何您自己的代码写入此文件。类和/或方法是部分的，因此您可以扩展/更改单独文件中的行为。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-11-15T13:44:29.987

不要将您自己的代码放在设计器文件中，而是使用利用部分类概念的单独文件。

# programming-languages - 将库/代码从 lang.x 移植到 lang.y 是否正常？

> ID：292536
> 
> 赞同：0
> 
> 时间：2008-11-15T13:28:34.747
> 
> 标签：programming-languages, choice

像许多人一样，如果不是全部的话，我也有我喜欢在项目中使用的最喜欢的编程语言，阅读，倡导，睡觉等等。我称之为 lang.y

为了不重新发明轮子，我尽可能在我的项目中使用其他人的作品（n|re）。但有时，已经制作的轮子是用其他语言（lang.x）编写的，而不是我使用的。

这主要发生在我需要使用主要由大型组织或学术项目创建的不太常见的应用程序时。

如果实现我需要从该项目中使用的功能不是那么复杂，我主要从 lang.y 中的 strath 编写它。

如果没有，我会尝试使用 lang.x，直到我对我不喜欢关于 lang.x 的所有废话感到愤怒，并搜索可以将应用程序/库与 lang.y 一起使用的桥应用程序

我也失败了，我只是倾向于放弃。所以，对于这个问题，从 lang.x 移植到 lang.y 对我来说似乎是合理的（对于 osi 批准的许可应用程序/库），但我也想有其他人的想法。

你会移植，还是使用 lang.x？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T16:16:35.577

正如其他人所说 - 这取决于。

如果重新编码很重要，那么当原始 lang.x 库发生更改时，您将面临两难境地——您是否重新移植更新的版本，以及如何做到这一点？

一般来说，最好在 lang.y 中编写一个调用 lang.x 库的库包装器。这样，您就可以在“真正”使用该库的代码中使用 lang.y 的良好特性，而您只需担心接口代码中的混乱。稳定的库可能不会经常更改其接口（不是每个版本），因此您可以升级 lang.x 库而无需重新编码包装器代码。当您确实需要增强包装代码时，添加新功能或修改更改的一两个接口通常是一个简单的练习。

另一种方法是成为 lang.y 中库的维护者。您必须与 lang.x 实现并行编辑您的 lag.y 实现。您可以非正式地这样做（也就是说，您和您的雇主可能是唯一的受益人——请注意图书馆的许可条款！），或者正式成为图书馆开发团队的成员。然后，您可以影响库的设计，以便您的 lang.y 实现更容易与 lang.x 实现保持同步。

**摘要**：尽可能长时间地保留图书馆的原始语言。除非您愿意进行必要的维护，否则请谨慎进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T17:16:11.587

正如其他人所说，这完全取决于情况。

举个例子，我目前正在将 Google 的[Protocol Buffers](http://code.google.com/p/protobuf/)框架移植到 C#。我试图保留一个类似于 Java 版本的 API，但也要让 .NET 程序员熟悉它。同时，一位朋友 (Marc Gravell) 正在做一个更像 WCF 的更“从头开始”的项目。拥有这两个项目很好，因为它们满足略有不同的需求。拥有它们也很好，*因为*这意味着 Java、C++、Python、C#（等）项目可以有效地相互通信。尝试使用 C# 中的 C++ 版本会很糟糕。

但是，与此同时，我看不出制作 VB.NET 版本有什么意义。它会有一些小优势——使开发人员能够将生成的代码与其他项目保持在同一个项目中——但这可能不值得付出额外的努力。大多数情况下，VB.NET 开发人员只需构建生成的 C# 代码并从他们的 VB.NET 项目中引用它就可以了。

不同的项目会有不同的考虑因素来权衡。迟早它总是关于价值（无论这对项目意味着什么）与努力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T13:33:40.163

如果库是成熟的、经过良好测试和封装的，我会将其保留为原始语言。但是当它在 COM 或 .NET 中时更容易，因为它们具有良好的互操作性和低开销。

只有当环境发生重大变化、语言过时，或者库需要进行重大的前瞻性开发工作时，我才会移植，这实际上意味着无论如何都需要对其进行全面重新测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T13:34:00.897

这取决于...

显然，从 Lisp 到 C# 的移植将是重写而不是移植，但我经常从更相似的语言移植东西。

如果您发现它的工具集如此缺乏，也许您应该评估您选择的语言 Y？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T13:46:33.120

如果您的首选语言不能很好地互操作，那么在需要大量互操作的项目中使用它可能是一个错误。

例如，python 是 Eve Online 服务器场的绝佳选择，但该项目几乎都是用 python 开发的，没有太多的互操作性。对于必须与许多其他不可更改的产品集成的企业应用程序，Python 可能不是一个很好的选择。尽管这门语言很神奇，但它不是万能的，也不应该被误用。

> 我对所有我不喜欢的关于 lang.x 的废话感到非常生气

在没有 lang.x 的所有失败的情况下，必须有一个比 lang.y 更好的互操作性的折衷方案。一些高级语言可以很好地处理本机代码。想到了 C#。

# c# - 如何识别字符串中的路径

> ID：292544
> 
> 赞同：2
> 
> 时间：2008-11-15T13:38:16.910
> 
> 标签：c#, regex, string

就是这样......我得到一个字符串，其中包含文件路径和一些参数。如何识别路径？我想到了'.'的索引。在文件中......但我不喜欢它。
使用正则表达式怎么样？谁能指出我正确的方向？

问候

编辑：这些是有效的条目...
somefile.msi /a
C:\MyFolder\SomeFile.exe -i -d

我不太关心论点，因为一旦我有了路径，我就会假设其余的都是论点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T14:02:29.373

您可以使用 System.IO.Path，它是静态方法。

```
bool isPath = System.IO.Path.GetDirectoryName(@"C:\MyFolder\SomeFile.exe -i -d") != String.Empty;
if (isPath)
{
    Console.WriteLine("The string contains a path");
} 
```

静态 Path 类还有其他几个有用的方法，例如 .GetFilename、.GetExtension 和 .GetPathRoot。

您也可以使用 System.IO.Directory 和 System.IO.File 来获得附加功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-15T13:52:32.497

除非您访问文件系统，否则您不能，因为路径可能包含空格。

因此，您可以使用 File.Exists 测试每个可能的“文件”。string.Split() 将在这里为您提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T13:41:40.163

好吧，在您解决在字符串中查找路径之前，您需要概述一组规则，以了解在此上下文中的路径

对于操作系统，这是一个有效的文件名：a

由于未指定目录信息，因此将使用*当前目录。*该文件没有扩展名。

但仍然是一个文件名。

这是您的上下文中的*路径吗？*或者你的意思是也有目录信息的东西？

您需要处理的示例将很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T14:42:00.293

在这种情况下，通常的方法是用空格进行标记（并对带有空格的文件名使用引号）。然后使用 / 或 - 作为参数。我认为您最好使用标准的、可接受的格式，而不是只处理一部分案例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T20:12:34.290

嗯，我相信唯一可靠的方法是访问文件系统，假设它是可访问的。
我会在空格处剪切字符串，从末尾开始，并取文件系统中存在的最长的字符串。

例如：

```
C:\My Folder\Some File.exe -i -d
=>
C:\My Folder\Some File.exe -i -d (no, although it might exist!)
C:\My Folder\Some File.exe -i    (no)
C:\My Folder\Some File.exe       (yes => That's this one) 
```

您必须考虑相对路径和 PATH 中的文件（如您的第一个示例，即所有 exe 文件 - 更糟糕的是，您可以在命令行上编写 foo.exe 或 foo ！）。

另外，您通常可以编写诸如 之类的东西`notepad/p`，这不会简化算法，因为知道这`C:/windows/notepad.exe` *是*XP 中的有效路径！:-)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-16T16:30:59.103

对于非 MSI 程序，UninstallString 被传递给 CreateProcess，因此您可能希望复制其确定文件名的方法。阅读[http://msdn.microsoft.com/en-us/library/ms682425.aspx](http://msdn.microsoft.com/en-us/library/ms682425.aspx)，尤其是 lpApplicationName 和 lpCommandLine 后半部分的注释。

MSI 安装的程序有一个单独的系统（msi!MsiConfigureProduct 或 msi!MsiRemovePatches）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T13:46:58.063

如果您对字符串有任何控制权，我建议您更改它的表示方式。一种方法是使用 URL 样式的参数 - 例如 fileName=myFile;arg1=value 等。然后解析键就很简单了。

任何类型的原始解析方案的问题在于尾随数据不一定是干净的。此外，您的文件名不一定没有空格、无关的“。”等。因此，无论您决定什么，100% 的时间都可能不正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-15T14:01:54.977

看看 SYStem.IO.Path，你可能想要 GetDirectoryName(string)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-15T15:58:31.370

谢谢大家的回答..有几个帖子我想标记为答案...在这些情况下你会怎么做？

万一有人想看看我在做什么，它是一个用于从我的计算机上卸载软件的小应用程序。我发布了代码，所以请随时下载并查看它。
这篇文章的原因是实现该方法的好`private ProcessStartInfo GetProcessInfo(string uninstallString)`方法。

这个项目的原因在[这里](http://sgomez.blogspot.com/2008/09/easy-remover-also-goes-open-source.html)发布......

# java - 如何使用 Maven 构建 SWT 应用程序

> ID：292548
> 
> 赞同：24
> 
> 时间：2008-11-15T13:43:04.343
> 
> 标签：java, maven-2, swt

我试图学习 swt，我在所有构建中使用 maven，在我的 IDE 中使用 eclipse。从 maven 存储库中获取 swt jar 时，我得到：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no swt-pi-gtk-3034 in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1709)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1030)
    at org.eclipse.swt.internal.Library.loadLibrary(Library.java:100)
    at org.eclipse.swt.internal.gtk.OS.<clinit>(OS.java:19)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:63)
    at org.eclipse.swt.internal.Converter.wcsToMbcs(Converter.java:54)
    at org.eclipse.swt.widgets.Display.<clinit>(Display.java:112)
    at wenzlick.test.swt.main.Main.main(Main.java:30) 
```

有没有人成功地使用 maven 构建和运行 swt 应用程序？

**编辑**：我做了一些研究，发现了问题。看看我下面的帖子

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-02T23:32:42.100

我已将最新 SWT 版本（4.2.2）的 win32/64 和 osx 工件上传到 googlecode 存储库，您可以在这里找到它：

[https://swt-repo.googlecode.com/svn/repo/](https://swt-repo.googlecode.com/svn/repo/)

要使用它，只需在 pom.xml 中添加以下内容：

```
<repositories>
    <repository>
        <id>swt-repo</id>
        <url>https://swt-repo.googlecode.com/svn/repo/</url>
    </repository>
</repositories> 
```

然后您可以只引用与您的平台相关的 SWT 依赖项。例如：

```
 <dependency>
        <groupId>org.eclipse.swt</groupId>
        <artifactId>org.eclipse.swt.win32.win32.x86</artifactId>
        <version>4.2.2</version>
    </dependency> 
```

对于其他平台，只需将 artifactId 替换为适当的值：

*   org.eclipse.swt.win32.win32.x86
*   org.eclipse.swt.win32.win32.x86_64
*   org.eclipse.swt.cocoa.macosx
*   org.eclipse.swt.cocoa.macosx.x86_64

其他平台和旧版本的工件也可用，请访问上面的存储库链接以找到它们。

快乐编码！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-15T17:37:54.617

听起来 Maven 正在引入旧版本的 SWT。*从 v3.4（及更高版本）开始，您只*需要swt.jar 。SWT 将根据需要自动提取`.so`s、`.jnilib`s 或`.dll`s。您需要担心的唯一棘手的事情是确保您获得正确的 swt.jar（对您的平台有意义）。

尝试在本地存储库中手动安装 SWT 3.4。如果这仍然给你同样的问题，那么可能是有问题的。之后，我会尝试`.so`手动提取 s，然后使用调用时的开关指定`java.library.path`变量。`-D`有时在 Linux 上，由于依赖问题（例如 libpango），库的加载可能会失败。在这种情况下，错误通常只是泛型`UnsatisifedLinkError`，使问题难以调试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T21:27:17.510

自 2013 年（这个职位成立之年）以来，情况发生了变化。SWT 现在已在 Maven Central 上发布。以下是撰写本文时的坐标：

```
<dependency>
    <groupId>org.eclipse.platform</groupId>
    <artifactId>org.eclipse.swt.win32.win32.x86_64</artifactId>
    <version>${swt.version}</version>
</dependency> 
```

你可能会觉得这张[票](https://bugs.eclipse.org/bugs/show_bug.cgi?id=510072)很有趣。

适用于 Windows 64 位的最新 SWT 工件：[https ://mvnrepository.com/artifact/org.eclipse.platform/org.eclipse.swt.win32.win32.x86_64](https://mvnrepository.com/artifact/org.eclipse.platform/org.eclipse.swt.win32.win32.x86_64)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-11-15T17:28:09.770

来自[UnsatisfiedLinkError的 API](http://java.sun.com/javase/6/docs/api/java/lang/UnsatisfiedLinkError.html)

> 如果 Java 虚拟机找不到声明为本地的方法的适当本地语言定义，则抛出此异常。

我自己没有尝试过，但我认为您不仅需要下载主要的 SWT jar，还需要为您的平台下载一个支持“本机”JAR。例如 swt-linux-gtk 如果你在 Linux 上？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-05T15:38:05.713

我将 github 与最新的 Eclipse 的东西一起使用： [https](https://github.com/maven-eclipse/maven-eclipse.github.io) ://github.com/maven-eclipse/maven-eclipse.github.io 。我建议你读一下。

对我有用的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.whatever</groupId>
  <artifactId>whatever</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>jar</packaging>

  <name>swt</name>
  <url>http://maven.apache.org</url>

    <repositories>
        <repository>
            <id>maven-eclipse-repo</id>
            <url>http://maven-eclipse.github.io/maven</url>
        </repository>
    </repositories>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.source>1.8</maven.compiler.source>
    <maven.compiler.target>1.8</maven.compiler.target>
    <swt.version>4.6</swt.version>
  </properties>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.12</version>
      <scope>test</scope>
    </dependency>
        <!-- select prefered one, or move the preferred on to the top: -->
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>org.eclipse.swt.win32.win32.x86_64</artifactId>
            <version>${swt.version}</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>org.eclipse.swt.win32.win32.x86</artifactId>
            <version>${swt.version}</version>
            <!-- To use the debug jar, add this -->
            <classifier>debug</classifier>
        </dependency>       
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>org.eclipse.swt.gtk.linux.x86</artifactId>
            <version>${swt.version}</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>org.eclipse.swt.gtk.linux.x86_64</artifactId>
            <version>${swt.version}</version>
        </dependency>
        <dependency>
            <groupId>org.eclipse.swt</groupId>
            <artifactId>org.eclipse.swt.cocoa.macosx.x86_64</artifactId>
            <version>${swt.version}</version>
        </dependency>

  </dependencies>
</project> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-20T01:56:19.180

我对此进行了更多研究，发现 swt jar 位于 maven 存储库中的几个不同位置。我使用的是 swt 组推出的 jars，但环顾四周后，我发现 org.eclipse.swt.gtk.linux 组为 linux 推出的 jars（org.eclipse.swt.win32.win32 for Windows ）。这是 swt 的 3.3 版本。还在找3.4。

# .net - 使用 .NET 修改 Excel 电子表格

> ID：292551
> 
> 赞同：2
> 
> 时间：2008-11-15T13:45:03.900
> 
> 标签：.net, excel

这是问题所在：

我必须使用 .NET 修改现有的 Excel 电子表格。电子表格非常复杂，我只需要在一些预定义的区域添加数据。

我正在调查我的选项，Excel Automation/InterOp 是不可能的，因为我正在实现一个 ASP.NET 网站，而 Excel 可能没有安装在服务器上。从我在网上找到的资料来看，InterOp 在性能方面也是一个非常昂贵的解决方案。

由于原始电子表格的复杂性，也排除了创建 CSV 文件的可能性。

目前我倾向于 ADO.NET OleDb 解决方案，但我发现很少提及（Google 和 Stackoverflow.com）所以我有点担心：OldDb for Excel 有什么问题？到目前为止，我可以在 MSDN 上找到的唯一缺点是我无法使用公式创建单元格，但这对我来说真的不是问题。

我也考虑过 SSIS，但这只是基于我的假设，即您可以在生成电子表格时使用现有的 Excel 文件。我不知道这是否可能。

然后是 OpenXml。与 OldDb 相比，它似乎过于复杂，而且还不确定我必须支持哪些旧 Excel 版本。

我错过了什么吗？还有更多的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T14:08:42.683

查看[MyXls](http://myxls.in2bits.org)一个用于读取和写入二进制 XLS 文件的 .NET 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T14:09:23.447

我已经使用[Aspose.Cells](http://www.aspose.com)来处理这类事情并取得了很好的成功。文档可能有点迟钝，但该产品似乎可以工作。它不需要您在服务器上安装 Excel，它适用于最新版本的 Excel（和以前的版本）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T15:41:53.777

使用任何驱动程序（ODBC、OLEDB 等）将 Excel 用作 ISAM 数据库的问题是列的数据类型基于列中的前 8 行 - 这纯粹是邪恶的；例如：如果一列类似于 part# 并且前 8 个部分恰好是数字，那么对于该列中 part# 不是数字的任何单元格，您将获得 NULL。（110000 与 111000-1 或 111000A）。这与您如何在 excel 中格式化列无关（即使您将列设置为文本）。

我会尝试找到有关此的文档并进行更新。这是一个：

[http://support.microsoft.com/kb/194124](http://support.microsoft.com/kb/194124)

[http://msdn.microsoft.com/en-us/library/bb177610.aspx](http://msdn.microsoft.com/en-us/library/bb177610.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T21:54:12.197

在这种情况下，我通常倾向于不要弄乱复杂的电子表格，而是设置一个单独的数据文件，我会将复杂电子表格中的数据单元格链接到该文件。这比从外部更改复杂的电子表格更清洁、更安全。

如果这并不比您目前面临的替代方案更容易，那会让我感到惊讶。但是我还没有看到你的电子表格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T13:53:38.457

你仍然有几个解决方案。1) Excel 文件的第三方组件。（我认为这是最痛苦和可靠的解决方案） 2）使用 html-table。

* * *

1) 简单地看一下互联网 :) 2) excel 与 html-tables 配合得很好。如果您生成此 html：

```
<html><body>
<table>
<tr><td><b>Column A</b></td><td><b>Column B</b></td></tr>
<tr><td><font color="red">-154</b></td><td><font size="5">hello world</font></td></tr>
</table>
</body></html> 
```

excel将在您格式化时将其显示为工作表。我认为，这是最通用的方式，如何在互联网环境中创建“丰富”的 excel 工作表，而无需在服务器上安装 excel。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T14:09:22.120

查看`Excel Web Access`，它是 MOSS 中 Excel Services 的一部分，它是 Excel 的服务器端版本，可让您通过 Web 浏览器计算和显示 Excel 信息。[MOSS 概述页面](http://msdn.microsoft.com/en-us/magazine/cc162511.aspx)描述了可以在服务器上提供 Excel 功能的 sharepoint 框架。您可以使用[VSTO API](http://msdn.microsoft.com/en-us/office/aa905533.aspx)以编程方式访问电子表格。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-15T15:05:25.923

不确定这是否正是您需要的，但肯定是：[4 在 Excel 教程中编辑](http://spietrek.blogspot.com/2008/11/links-1192008.html)（在 .NET #5-8 下）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-11-15T16:25:53.327

您可能想看看[http://www.gemboxsoftware.com/GBSpreadsheetFree.htm](http://www.gemboxsoftware.com/GBSpreadsheetFree.htm)。

他们有一个具有所有功能的免费版本，但如果符合您的需要，则每张纸限制为 150 行和每工作簿 5 张纸，否则付费版本的起价为 425 美元（1 个开发人员许可证）。

StackOverflow上的其他答案可能适用于您的问题[： Create Excel (.XLS and .XLSX) file from C#](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c)。

# c# - 扩展方法而不是 Null 对象模式

> ID：292552
> 
> 赞同：3
> 
> 时间：2008-11-15T13:45:30.873
> 
> 标签：c#, .net, null, extension-methods

我想知道使用扩展方法来避免检查层次结构中的空值。这个例子：

```
// GetItems(), GetFirstOrDefault(), GetProduct(), GetIDProduct() are extension methods like:
public static SomeType GetSomeProperty( this XYZ obj ) {
    if ( object.ReferenceEquals( obj, null ) ) { return default( SomeType ); }
    return obj.SomeProperty;
}

// the code with extension methods
Guid? idProduct = this.Invoice.GetItems().GetFirstOrDefault().GetProduct().GetIDProduct();
// instead of
Guid? idProduct = null;
Invoice invoice = this.Invoce;
if ( null != invoice ) {
    InvoiceItems items = invoice.Items;
    if ( null != items && items.Count > 0 ) {
        InvoiceItem item = items[0];
        if ( null != item ) {
            idProduct = item.IDProduct();
        }
    }
} 
```

我知道，有可用的空对象模式，但这种类型的扩展方法的解决方案看起来更好。

你认为，这个解决方案是好是坏（因为坏/好的设计、清晰度，等等）？

请投票“好”或“坏”，你为什么这么认为。帖子被标记为社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T13:57:40.867

我会理智地做这件事：

```
Guid? idProduct = null;
Invoice invoice = this.Invoce;

if (invoice != null && 
    invoice.Items != null &&
    invoice.Items.Count > 0 &&
    invoice.Items[0] != null) 
{
   idProduct = invoice.Items[0].IDProduct();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-02-04T14:05:26.013

这[打破了](http://codecrafter.blogspot.com/2008/07/c-extension-methods-and-null-references.html)实例方法的语义。扩展方法对调用者来说就像实例方法，因此应该*表现*得像它们。当你像这样破坏语义时，代码将更难理解和维护，它的行为会让大多数开发人员感到惊讶。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-02-04T14:08:17.617

**我将其投票为“对该解决方案不感兴趣”。**

我对我的实体模型类的 Null-Object-Pattern 很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-25T03:03:45.317

阅读这段代码时，首先让我印象深刻的是

```
GetFirstOrDefault().GetProduct() 
```

它打破了两个习惯用法：1）使用`Get`Jon 指出的样式方法，以及 2）“取消隐藏” Null Object 提供的抽象。这`OrDefault`让我成为你代码的读者，让我思考在`null`哪里

```
GetFirst().GetProduct() 
```

不会。是的，Null Object 和您的扩展方法替代方案的要点之一是减轻读者和/或维护者的负担。否则为什么要这样做？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T18:07:05.023

Java 和 .net 的一个限制是，没有什么可以清楚地确定引用类型的存储位置是否应该在语义上被视为*持有*对象的值，而不是*识别*对象（当然，从计算机的角度来看，所有这些存储位置都可以后者）。尽管如此，有些类型（如`String`）的存储位置通常会被视为保存值，而其他类型（如`StringBuilder`）的存储位置将被视为标识应对其执行操作的对象。

如果不是对 的`struct`约束`Nullable<T>`，并且如果类类型可以指定实例成员`this`在空对象上调用时应该运行（为空），我会认为这对于某些类型来说是一个很好的模式。虽然通常不可能合理地为可变类类型指定默认值，但对于许多不可变类型来说，具有合理的默认行为（例如`default(string).Length`可以返回零）是完全合理的。不幸的是，.net 语言没有指定属性和方法应该可用于空对象的方法，但至少扩展方法可以在这个方向上有所帮助。

# asp.net-mvc - MVC的实际应用|| 何时使用或不使用 MVC

> ID：292557
> 
> 赞同：30
> 
> 时间：2008-11-15T13:49:01.287
> 
> 标签：asp.net-mvc

我已经看到 ASP.NET 社区在讨论 MVC。我知道其起源的基础知识，并且有许多基于 ASP.NET MVC 的站点（除非我弄错了，堆栈溢出本身）。

从我所听到和读到的所有关于 MVC 的内容来看，它似乎是 ASP.NET 开发的未来。但由于我通常不涉足 .NET Web 开发，所以我想知道以下问题：什么时候适合使用 MVC，什么时候不适合，为什么？MVC 的伟大（和糟糕）使用的例子会很吸引人。
尽管我意识到 MVC 的其他实现也可以查看其他语言，例如 RoR，但我更感兴趣的是它对 .NET 程序员的影响。

如果这已经过去了，我很抱歉！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2008-11-15T14:03:10.807

这是我关于用于 Web 应用程序的 MVC 的 2 美分。对于 MVC 最初打算用于的那种 GUI 应用程序，需要“侦听器”代码，以便在事件更改模型数据时更新 UI。

在 Web 的 MVC 中，这是不必要的，您可以免费获得侦听器：Web 服务器，而 HTTP 请求就是事件。所以真正的 Web 的 MVC 应该更简单。事实上，它可以归结为中介者模式，控制器在模型和视图之间进行中介。

有两件事有很多困惑。不管传统的“智慧”：

框架！= MVC

数据库数据！=“模型”

“全栈”Web 开发框架通常会添加许多功能，并且其核心可能是面向 MVC 的，也可能不是面向 MVC 的。许多框架添加的特性之一是数据库访问或对象关系映射功能，并且由于框架和 MVC 混淆了，随后数据库数据和 MVC 的模型方面也会混淆。模型通常可以被视为应用程序的基础数据，但它不一定来自数据库。一个很好的例子可能是一个 wiki，其中底层模型/数据由文件修订数据组成，例如来自 RCS。

希望这会有所帮助，我相信其他人会有很多要补充的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-21T13:47:30.220

我想说使用 MVC 的一个非常引人注目的场景是，如果您有一群经验丰富的 .NET 开发人员，他们**没有**使用 WebForms 的经验。

我自己从这种情况（很少的网络经验）中走出来，我发现使用 MVC 而不是 WebForms 更加高效和舒适。

由于上述抽象，我发现很难拾取 WebForms - （我认为 WebForms 复杂性的证据是我从未遇到过任何我认为 WebForms“大师”的人，即知道页面生命周期关闭/数据绑定返回-前面等）。

使用 MVC 实际上让我可以使用我的 .NET 和软件经验，而无需大量投资学习 WebForms 框架。不仅如此，我对 HTTP 有了更好的理解，我认为这将允许更高质量的解决方案。

恕我直言，MVC 允许您比 WebForms 更好地分解代码，因此我认为具有大量“模式”经验的开发人员会更适应 MVC。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-11-15T14:12:42.830

ASP.NET MVC 不是 ASP.NET 开发的未来，它只是一种使用 ASP.NET 开发网站的新方法。微软已经明确表示他们将在未来继续支持和改进 WebForms 和 MVC。

如果不适合使用 MVC，我想不出任何网站。您也可以对 WebForms 提出同样的看法。

是否选择其中一个是个人选择，取决于开发团队的经验和偏好。

在几个大项目中使用 MVC 之后，我个人再也不会回到 WebForms 开发。在我看来，WebForms 在 http 和 html 上放置了一个不必要的抽象层。对于快速原型，您可以使用 WebForms 更快地拼凑出一些东西，但在那之后，抽象的复杂性使事情变得更难而不是更容易。在我看来，使用 WebForms 的唯一令人信服的理由是目前可用的丰富级别的 3rd 方控件。但是您可以混合使用 WebForms 和 MVC，因此很容易获得两全其美的效果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-21T13:24:39.527

我在一家同时拥有 ASP.NET 和 MVC 应用程序的商店工作。我认为最初我偏向于 Web 表单，因为我与它们一起工作了几年，但在完成了一些 MVC 项目之后，我更喜欢它。

然而，需要考虑的是，如果您有一个经验丰富的 Web 表单开发人员团队，由于学习曲线的原因，MVC 应用程序的初始进度会较慢，因此如果项目的时间线非常紧迫，它可能不是最好的过渡的时间。

除此之外，在这一点上，我想不出我更喜欢 Web 表单而不是 MVC 的任何情况。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-21T13:36:58.357

根据我自己的经验，我可以告诉您，如果您没有任何 Winforms 或 Webforms 背景，您可能会在 MVC 保护伞下感觉更舒服，因为您不会“期待”来自 ASP.NET Webforms 世界的任何东西。

另一方面，作为建议，我鼓励您查看其他 MVC 框架，例如 Django 或 RoR，它们更成熟，可以在 MVC 思维方式上“成为水”。我对 ASP.NET MVC 很满意，但寻找其他解决方案可以帮助您更好地理解框架背后的范例。

# wpf - 如何在 WPF 中绘制凹角矩形？

> ID：292558
> 
> 赞同：3
> 
> 时间：2008-11-15T13:50:16.480
> 
> 标签：wpf, xaml

如何在 WPF 中绘制凹角矩形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-16T00:19:43.217

您可以通过表达式混合（菜单 - 对象-> 路径操作）下的路径操作来创建它，我通过在一个矩形上减去四个椭圆来创建一个路径。

下面给出了凹矩形的 Path.Data，上一个答案中的@Kent Fredric 逻辑将有助于实现一个。

[![替代文字](https://i.stack.imgur.com/Ymbct.jpg)](https://i.stack.imgur.com/Ymbct.jpg)

```
M17.200002,0L120.4,0 120.4,2.3066998E-06C120.4,6.7378696,128.10079,12.200001,137.60001,12.200001L137.60001,85.400003C128.10077,85.400003,120.4,90.862138,120.4,97.6L17.200002,97.6C17.200002,90.862151,9.4993697,85.400003,0,85.400003L0,12.199999C9.4993663,12.200015,17.200002,6.7378725,17.200002,0z 
```

请参阅此处的博客文章[http://jobijoy.blogspot.com/2008/11/concave-cornered-rectangle-blend-tip.html](http://jobijoy.blogspot.com/2008/11/concave-cornered-rectangle-blend-tip.html)

另一种方法是创建一个 WPF 自定义形状，如下所示

```
public class ConcaveRectangle:System.Windows.Shapes.Shape 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T13:58:40.630

```
do you mean a rectangle with concave corners?, ie: 
     ____________________
    |                    |
  __|                    |__
 |                          |
 |                          |
 |                          |
 |__                      __|
    |                    |
    |____________________| 
```

给定一个尺寸 `w x h`为角半径的矩形，`r` 有 4 个角：

```
A :  0,0
B :  w,0
C :  w,h
D :  0,h 
```

有一个隐含的最小尺寸

```
w = 2r
h = 2r 
```

有4个圆心，`A,B,C,D`

因此有一个边缘点网格：

```
(0,0)--(0+r,0)---(w-r,0)---(w,0)
|                              |
(0,0+r)                  (w,0+r)
|                              |
|                              |
(0,h-r)                  (w,h-r)
|                              |
(0,h)--(0+r,h)---(w-r,h)---(w,h) 
```

那么它只是计算从一个点到另一个点的弧的一种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T00:29:18.517

我应该指出，如果它是凹形的，那么四个边就不是既相同又直的；因此它不是一个矩形。但我离题了。

# sql-server - 我可以使用 SQL Server Express 或 Web 或 Workgroup 版本运行 SSIS 包吗？

> ID：292564
> 
> 赞同：19
> 
> 时间：2008-11-15T13:57:20.803
> 
> 标签：sql-server, sql-server-2008, ssis

我查看了 SQL Server 2008 功能比较矩阵，它将 express/web 和工作组版本列为具有 SSIS 运行时。这是否意味着可以使用开发人员版开发 SSIS 包，然后在运行 SQL Server 2008 Express 等低级 SQL Server 版本之一的服务器上部署和运行它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-11-18T10:39:37.520

您需要 dtexec 从命令行运行 SSIS 包。

在 SQL2005 Express 中，您获得了 dtexec 和必要的工具

*   [具有高级服务的 SQL Server 2005 Express Edition](http://www.microsoft.com/downloads/details.aspx?familyid=4C6BA9FD-319A-4887-BC75-3B02B5E48A40&displaylang=en)
*   [Microsoft SQL Server 2005 速成版工具包](http://www.microsoft.com/downloads/details.aspx?familyid=3C856B93-369F-4C6F-9357-C35384179543&displaylang=en)

但是，如果没有 SQL 代理，您必须使用其他调度方法。

更多信息：[http ://daron.yondem.com/default.aspx?month=2006-05](http://daron.yondem.com/default.aspx?month=2006-05)

警告：我实际上并没有尝试过，并且**有报告说 dtexec 只是**因为许可证错误而失败。在我的例子中，我只需要运行一次 dtsx 并使用 SQLExpress 作为数据流目的地的开发人员版本来完成它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2008-11-15T14:55:25.117

工作组版只有原始的导入和导出功能。据我所知，如果您想使用任何数据转换创建 SSIS 包，您需要获得 SQL 标准版或更高版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2010-04-15T12:36:23.017

好的，故事就讲到这里。您*可以*使用带有高级服务的 SQL Server 2005 Express Edition 或上面的工具包来安装 DTEXEC。但是，此版本的 DTEXEC 功能并不完整。如果您的某个数据流任务尝试执行不允许的操作，您将收到如下消息：

`Description: The product level is insufficient for component "<component>" (1828).`

This means that the particular component uses something which isn't supported in the installed version of DTEXEC. I have noticed, for example, that this will happen if you use a DataReader source, which it appears I have to do to import from ODBC.

# html - 浏览器应用程序和本地文件系统访问

> ID：292566
> 
> 赞同：16
> 
> 时间：2008-11-15T13:58:05.140
> 
> 标签：html, browser, permissions, filesystems, access-control

我想通过能够管理本地文件和文件夹的功能来增强我的基于浏览器的 Web 应用程序。例如，文件夹树结构应通过 HTTP(S) 在本地工作站和服务器之间同步。

我知道基于浏览器的应用程序中与安全相关的限制。但是，有一些技术可以“解决”这些问题：

*   签名的 Java 小程序（完全信任）
*   .NET Windows Forms 浏览器控件（不是开玩笑，这行得通。只是配置太糟糕了）
*   活动X

我的问题是：您使用/建议什么，无论是技术还是实施实践？关键要求是安装过程尽可能简单。

感谢您的意见！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T14:34:03.740

谷歌齿轮。

它使您可以编写具有比普通浏览器更大的平台支持的 Javascript 应用程序，并与本地文件访问、缓存和数据库“不连接”。并且如果/当连接时，它会同步到中央服务器。

适用于所有平台上的多个浏览器；但仍处于重演之下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2010-03-24T06:37:20.500

Silverlight 4（仍处于测试阶段）允许文件系统访问：

“读取和写入文件到用户的 MyDocuments、MyMusic、MyPictures 和 MyVideos 文件夹（或非 Windows 平台的等效文件夹），例如存储媒体文件和获取报告的本地副本”

[http://www.silverlight.net/getstarted/silverlight-4/](http://www.silverlight.net/getstarted/silverlight-4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-02-01T15:31:29.920

Gears 和 Adob​​e Air 都要求用户在获得任何编程访问权限之前手动选择本地文件。由于本地文件系统访问时的安全考虑，非常有限，因此据我所知，那里没有任何基于 Web 的文件同步类型功能的机会。也许我对 Adob​​e Air 的看法是错误的，但这绝对是齿轮的情况。但如果我错了，请告诉我！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T14:40:08.160

绝对不是 ActiveX。花时间在过时的东西上是没有意义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T14:44:21.380

Adobe AIR（本质上是用于桌面的 Flash），是我们在上一份合同中考虑的东西，与 Java 小程序相反。上次查了一下，虽然用了几个月，但是AIR运行环境的安装还是很快很简单的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-01T15:39:47.733

您最好的选择可能是编写一个与您的 Web 应用程序交互的自定义​​应用程序。例如，[Dropbox](https://www.getdropbox.com)允许您通过使用监视启用 Dropbox 的文件夹的后台应用程序在计算机之间同步文件。它还允许您通过网络浏览器在线查看您的 Dropbox 文件。然后，Dropbox Web 应用程序允许您删除/移动/复制在本地文件系统中回显的文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-07-05T02:24:54.417

在 Google Wave 的演示中...

[http://www.youtube.com/watch?v=v_UyVmITiYQ&fmt=18](http://www.youtube.com/watch?v=v_UyVmITiYQ&fmt=18)

...在 15:30 时，一组 img 文件从文件系统拖放到浏览器。该功能归功于 Google Gears。这似乎与 Daniel OCallaghan 和官方文档建议的可能有所不同。

有人知道使用 Google Gear 和本地文件系统实际上可以做什么吗？

# language-agnostic - 如何保存和加载不同类型的对象？

> ID：292574
> 
> 赞同：1
> 
> 时间：2008-11-15T14:01:08.533
> 
> 标签：language-agnostic, oop

在编码过程中我经常遇到这种情况：

1.  我有几个具有相同基本类型的对象 ( `ConcreteType1`, , ...) ，它们具有抽象方法和. 通过覆盖该方法，每个对象都可以（并且必须）保存某种特定类型的数据。`ConcreteType2``AbstractType``save``load``save`
2.  我有一个`AbstractType`包含各种`ConcreteTypeX`对象的对象列表。
3.  我遍历`save`每个对象的列表和方法。

在这一点上，我认为这是一个很好的 OO 设计。（或者我错了吗？）当我想重新加载数据时问题开始了：

每个对象都可以加载自己的数据，但是我要提前知道具体的类型，这样我才能实例化权利`ConcreteTypeX`并调用`load`方法。所以加载方法必须对具体类型有很多了解。我通常通过在调用之前编写某种标记来“解决”这个问题，`save`加载程序使用它来确定正确的`ConcreteTypeX`.

我对此一直有/有不好的感觉。感觉像是某种反模式……

有没有更好的方法？

编辑：对不起，我重新写了一些文字。我知道序列化，也许在 Java/.NET/yourFavoriteLanguage 中有一些近乎完美的解决方案，但我正在寻找一个通用解决方案，与我的概念相比，它可能更好，更“OOP-ish” .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T14:03:56.080

这是 .NET 还是 Java？如果是这样，你为什么不使用序列化？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T14:18:04.460

如果您不能简单地使用序列化，那么我仍然肯定会将对象加载逻辑拉出基类。你的直觉是正确的，引导你正确识别[代码气味](http://en.wikipedia.org/wiki/Code_smell)。更改或添加派生类时不需要更改基类。

问题是，*必须*加载数据并实例化这些对象。这听起来像是[抽象工厂模式](http://en.wikipedia.org/wiki/Abstract_factory_pattern)的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T14:20:06.890

有更好的方法，但让我们退后一步，从概念上看一下。所有对象都在做什么？加载和保存。当您从内存中获取对象时，您实际上不必关心它是从文件、数据库还是 Windows 注册表中获取信息。您只需要加载对象。记住这一点很重要，因为稍后，您的维护程序员将查看 LoadFromFile() 方法并想知道，“为什么要调用它，因为它实际上不会从文件中加载任何内容？”

其次，您遇到了我们都遇到的问题，它基于分工。您需要一个处理从物理源获取数据的关卡；您需要一个操作此数据的关卡，并且您需要一个显示此数据的关卡。这是[N-Tier Development](http://csharpstruggles.blogspot.com/2004/08/n-tier-development.html)的症结所在。我已链接到一篇文章，该文章[详细讨论了您的问题](http://www.simple-talk.com/dotnet/.net-framework/.net-application-architecture-the-data-access-layer/)，并详细说明了如何创建数据访问层来解决您的问题。[这里](http://www.dotnetheaven.com/Uploadfile/tavanover/NTierDevelopmentwithMS102052006231650PM/NTierDevelopmentwithMS1.aspx)和[这里](http://geekswithblogs.net/steveclements/archive/2006/08/31/89892.aspx)也有许多代码项目。

如果您要寻找的是 Java，只需将“java”替换为 .NET 并搜索“Java N-Tier development”。然而，除了句法上的差异之外，设计结构是相同的。

# social-networking - 允许用户在社交网站上选择显示名称的最佳做法？

> ID：292584
> 
> 赞同：3
> 
> 时间：2008-11-15T14:08:56.350
> 
> 标签：social-networking

我经营一个社交网络/博客网站（[http://www.obsidianportal.com](http://www.obsidianportal.com)），目前用户在各处都由他们唯一（且不可更改）的用户名标识。许多人要求能够拥有一个他们可以选择的显示名称。我想支持这一点，但我担心欺骗和身份盗用。所以，我想知道是否有人处理过这个问题并有任何建议？

这是我想避免的：

我在网站上被称为*Micah*。我不希望任何人能够选择我的名字作为他们的显示名称，然后在网站上向其他人冒充我。同样，我不希望人们能够互相模仿。

以下是我确定的一些可能的途径：

*   让他们选择他们想要的任何名称（在合理范围内：亵渎、种族主义、仇恨言论等）
*   不允许用户选择与现有唯一用户名重叠的显示名称
*   不允许用户选择与现有唯一用户名或现有显示名称重叠的显示名称。

我是不是太偏执了？我应该放松一下，让用户选择他们想要的任何名称吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T14:17:13.977

我会[遵循最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)，在这种情况下“不允许用户选择与现有唯一用户名或现有显示名称重叠的显示名称。” 否则，您可能会有 10 个昵称 Piskvor 的不同人互相交谈；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T14:17:08.173

如果该帐户与具有某些**统计信息**的个人资料相关联，我认为您不需要必须是唯一的用户名。如果在 StackOverFlow 有人试图使用我的名字并且他的次数低于 1000 次，我认为很明显我是真实的。当然，有人可以在这里使用我的名字并尝试成为我，在这种情况下，我需要管理员的帮助，所以也许你应该有一个**系统来报告滥用行为**。

另一方面，我有一个系统可以验证用户名是唯一的。这样一来，就更简单了。我这样做是因为注册的人没有任何个人资料页面，所以很难知道谁是真正的人。

希望对您有所帮助。

# c# - 在 Java/J2ME 中与 UI 线程交互

> ID：292587
> 
> 赞同：5
> 
> 时间：2008-11-15T14:09:36.160
> 
> 标签：c#, java, multithreading, java-me, ui-thread

我正在编写一个 J2ME 应用程序。其中之一是定期轮询目录的内容，如果有任何新内容，则将它们绘制在屏幕上。我通过让 UI 表单启动一个带有指向自身的指针的轮询线程来完成此操作，并且当轮询线程找到某些内容时，它会回调表单并调用同步方法来更新它的显示。这似乎工作正常。

我的问题是这个。在 C#/.NET 中，我知道让非 UI 线程更新 UI 并不好，处理此问题的正确方法是将其委托给 UI 线程。

例如以下：

```
public void DoSomeUIThing()
{
    if (this.uiComponent.InvokeRequired)
    {
        this.uiComponent.Invoke(someDelegateThatCallsBackToThis);
    }
    else
    {
        this.uiComponent.Text = "This is the update I want to happen";
    }
} 
```

是否有 J2ME 等价物来管理这个过程？Java怎么样？还是 Java/J2ME 在这方面做得更好？如果没有，这是如何完成的？

[编辑] Swing 似乎支持我通过 SwingUtilities.invokeLater() 和 invokeAndWait() 方法提出的问题。J2ME 是否有等效的框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T14:26:31.790

关于 Java，您所描述的看起来像[SwingWorker (worker thread)](http://java.sun.com/docs/books/tutorial/uiswing/concurrency/worker.html)。

当 Swing 程序需要执行一个长时间运行的任务时，它通常使用其中一个工作线程，也称为后台线程。

Swing 程序包括以下几种线程：

*   初始线程，执行初始应用程序代码的线程。
*   事件调度线程，所有事件处理代码都在其中执行。大多数与 Swing 框架交互的代码也必须在这个线程上执行。
*   工作线程，也称为后台线程，执行耗时的后台任务。

[单线程规则](http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html)：
一旦实现了一个 Swing 组件，所有可能影响或依赖于该组件状态的代码都应该在事件调度线程中执行。

[在 J2EE 上下文中使用时，从 EJB 引用 SwingWorker](http://www.nabble.com/EJB-use-in-SwingWorker-td19057258.html)时需要小心。

关于**[J2ME](http://developers.sun.com/mobility/midp/articles/blackberrydev/)**，这取决于您是否将应用程序开发为将在任何支持 MIDP 的设备上运行的标准 MIDlet，或者**例如**作为 RIMlet，这是一个基于 CLDC 的应用程序，它使用特定于 BlackBerry 的 API，因此只能在 BlackBerry 上运行设备。

因为与 MIDP 的 UI 类不同，RIM 类似于 Swing，因为 UI 操作发生在事件线程上，这不像 MIDP 中那样是线程安全的。要在事件线程上运行代码，应用程序必须获得事件对象的锁定，或者使用 invokeLater() 或 invokeAndWait()——这对开发人员来说是额外的工作，但复杂性是有代价的。

但是对于[LCDUI](http://today.java.net/pub/a/today/2005/05/03/midletUI.html)，您可以[从多个线程访问一个表单](http://www.velocityreviews.com/forums/t144172-j2me-mutiple-threads-appending-to-same-form.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-15T17:54:25.630

Java ME 有很多配置文件。如果您的意思是 MIDP，那么`Display.runSerially`这就是您想要的。

对于 AWT (Swing)，您将使用`EventQueue.invokeLater`(`SwingUtilities.invokeLater`仅由于 Java 1.1 没有该`EventQueue`方法而需要 - 1.2 即将庆祝其十岁生日)。对于通用 DOM API，使用`DOMService.invokeLater`.

无论 GUI API 对线程安全提出什么声明，它们都可能是错误的（Swing 的一些声明在 JDK7 中被删除，因为它们不可实现）。在任何情况下，应用程序代码都不太可能是线程安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T15:04:26.907

对于 j2me 应用程序，您可能希望保持简单。主要是只在事件线程中触摸 UI 组件。这样做的直接方法是使用[invokeLater 或 invokeAndWait](http://java.sun.com/j2se/1.4.2/docs/api/javax/swing/SwingUtilities.html)。根据您的图书馆，您将无法访问除此之外的任何内容。通常，如果您的平台中未提供这些，则可能等同于没有线程支持并且不是问题。例如[黑莓确实支持它](http://developers.sun.com/mobility/midp/articles/blackberrydev/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T15:16:05.683

如果您在 SWT 下开发，这是通过 Display 对象的 asyncExec() 方法完成的。您传递一个实现 Runnable 的对象，以便 UI 线程执行在其他线程中完成的更改。

[这是从这里](http://www.ryanlowe.ca/blog/archives/000448_the_swt_thread.php)借来的一个例子

```
public void itemRemoved(final ModelEvent me)
{
   final TableViewer tableViewer = this.viewer;

   if (tableViewer != null)
   {
      display.asyncExec(new Runnable()
      {
         public void run()
         {
            tableViewer.remove(me.getItem());
         }
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2010-04-23T16:05:30.387

我可以证明 MIDP UI 工具包确实是线程安全的，因为我在几乎每个制造商制造的数百万部手机上运行具有复杂 GUI 的大型 MIDlet，我从未见过这方面的问题。

# c#-4.0 - IDynamicObject 实现忽略多个属性调用

> ID：292602
> 
> 赞同：0
> 
> 时间：2008-11-15T14:23:18.207
> 
> 标签：c#-4.0, dynamic-language-runtime, idynamicobject

我在 C# 4 中实现了 IDynamicObject，返回一个自定义 MetaObject 子类，该子类将简单的属性 getter/setter 分派到 Dictionary。不是火箭科学。

如果我这样做：

```
dynamic foo = new DynamicFoo();

foo.Name = "Joe";

foo.Name = "Fred";

Console.WriteLine(foo.Name); 
```

然后 'Joe' 被打印到控制台……第二次调用 'Name' setter 永远不会被调用（永远不会进入我的自定义调度程序代码）。

我知道 DLR 会进行呼叫站点缓存，但我认为这不适用于这里。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T17:29:52.717

在这种情况下，您从 (Bind)SetMember 返回的任何 MetaObject 都将被缓存和重用。你有 2 个动态站点做集合。第一次调用会将结果缓存在二级缓存中，第二个站点将在要求您生成新规则之前获取该缓存。

因此，无论您返回什么 MetaObject 都需要包含一个将更新值的表达式树。例如，它应该执行以下操作：

return new MetaObject( Expression.AssignProperty(this.Expression, value.Expression), Restrictions.TypeRestriction(this.Expression, this.Value.GetType());

# django - 第一个小型 Web 项目的 Web 技术

> ID：292607
> 
> 赞同：1
> 
> 时间：2008-11-15T14:29:53.077
> 
> 标签：django, frameworks

我是一名具有基本 Python 技能的 C++ 开发人员。这是任务，我的一个朋友在经营一家小公司，他问我是否可以为他做一个网站。我没有真正的截止日期，所以我认为这是一个尝试新事物并进行一些 Web 开发的绝佳机会。

用户必须能够添加照片、更改文本等。

你认为 Django 对这种项目来说会是一种矫枉过正吗？我没有这方面的经验。也许我应该尝试自定义一些博客引擎或 Google 站点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T17:09:01.743

您可能对最近人气上升的Google App Engine ( [http://code.google.com/appengine ) 感兴趣。](http://code.google.com/appengine/)该应用程序在 Google 的服务器上运行，无需维护 Apache 并担心正常运行时间。你基本上得到了一个基于 Django 的解决方案，它带有一个数据存储和一个 SDK，它允许你在桌面上方便地开发一个应用程序，然后将它上传到 apppot.com 供所有人使用。

文档很棒，即使您最终决定不使用它，该[教程](http://code.google.com/appengine/docs/gettingstarted/)也非常适合让您快速了解 Python 和 webapp 设计。还有一个[codelab](http://code.google.com/p/google-app-engine-codelab/downloads/list)，其中包含一个简单的 Wiki 示例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T14:45:38.927

如果您需要快速建立一个**非常简单的网站**，**Wordpress**可以是完美的选择。

Wordpress 是作为博客平台诞生的，但在较新的版本中，您可以管理页面、联系表格等。你可以找到好的插件来扩展它的功能。wordpress 的管理界面干净易用，页面或文章编辑器简单而强大。在帖子或页面中添加图像既简单又直观，这是我见过的任何其他开源 CMS 所没有的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T14:53:42.110

Django 是一个非常灵活的框架，它倾向于很好地向上和向下扩展。仅仅为一个简单的站点学习整个 API 可能有点过头了，但是如果你想学习新的东西，并且有一些空闲时间，那么它是一个有趣的学习和工作平台。我的建议是安装 API 并尝试使用它，阅读[Django 书](http://www.djangobook.com/)，看看你是如何开始的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T14:48:29.607

也许在潜入 Joomla 或 Django 之前，第一步应该以原始、纯粹的方式使用这些技术。创建一个简单的网页，执行一些服务器端脚本（python？php？），从 mySQL 数据库中检索数据并显示它。也加入一点 JavaScript。只是为了让您对最基本的基础感到满意。

然后，当您深入研究大型框架和库时，它们看起来就不会那么神奇了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-27T03:01:43.943

如果您真的要问最适合这项工作的工具是什么，那么您将不得不提供比“第一个小型 Web 项目”更多的细节。如果您要问的更多是您想学习 Web 应用程序开发，并且您已经知道 C++ 和 python，那么什么是一个很好的 Web 应用程序堆栈，您可以在其中利用您当前的技能，那么这里有一些更多建议.

Django 很酷。每个人都已经在这里谈论过它。如前所述，谷歌应用引擎有点基于 Django。

另外，请考虑另一个基于 python 的 Web 应用程序容器[zope 。](http://www.zope.org/)

如果您想利用您的 C++ 知识，请考虑[Wt](http://www.webtoolkit.eu/wt)。

您为什么不看一下所有三个的 hello world 示例，然后决定哪一个看起来对您最感兴趣？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T15:09:12.297

您可以使用大量的网站框架和工具包，而不是从头开始开发工作。这实际上取决于您想要使用哪种技术，以及您对语言潜力的感觉如何。如上所述，有[Joomla](http://www.joomla.org/)之类的东西，如果你想坚持使用 PhP 框架，你也可以使用[Drupal](http://drupal.org/)，它有大量的文档和支持，并且相对容易理解。

如果你想冒险进入微软领域，你可以看看[DotNetNuke](http://www.dotnetnuke.com/)。它也很像 Drupal 和 Joomla，所以它是一个很好的 CMS 框架，你可能会觉得更舒服，因为 ASP.Net 是基于编程语言而不是脚本语言，不像 Classic ASP 或 PhP。如果您打算走微软路线，我还建议您查看他们的[BizSpark](http://www.microsoft.com/bizspark/Default.aspx)开发人员计划 - 但这更多地取决于您的朋友对将他的网站作为企业运营的认真程度。

然后你也有很多东西是由[谷歌](http://code.google.com/)提供的，比如他们的图表和可视化——这似乎不是你要找的东西，但供将来参考，或者像地图混搭这样很酷的小东西。

这实际上取决于您愿意学习多少以及您有多少时间，有时没有一个粗略的截止日期是可能发生的最糟糕的事情。自然，一切都开始需要更长的时间。当你完成时，技术要么已经过时，要么你花了很长时间以至于业务计划已经改变。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-18T01:24:07.017

[使用 django 很容易， http://code.google.com/p/django-photologue/](http://code.google.com/p/django-photologue/)上已经有一个相册应用程序，它也带有标记，也许你只需要添加一些 jquery 效果即可完成您的网站。

要完成此操作，您只需创建一个 django 项目，将应用程序添加到您的设置中，配置您的 url 和模板，仅此而已。

此外，如果您需要一个小版本，您可以将此代码用作新应用程序的基础。

和 django 玩得开心！！

塞尔吉奥

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-12-07T20:27:10.167

[Pylons](http://pylonshq.com)是一个基于 WSGI 标准的优秀 Python Web 框架。它移植了 Ruby on Rails 的许多特性，因此非常适合快速开发。

我已经使用它几年了，现在我的数据库层结合了 SQLAlchemy，我发现它非常适合开发我的所有网站。

[对于生产站点](http://wiki.pylonshq.com/display/pylonscommunity/Sites+Using+Pylons)来说，它也很容易做到。

我发现的一个缺点是将其部署在共享主机上会有​​些复杂，但只要您对主机有 shell 访问权限，就应该没问题。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-11-15T14:32:16.147

您可以尝试安装和自定义 Joomla ( [http://www.joomla.org/](http://www.joomla.org/) ) 它的内容丰富，易于使用且易于自定义。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2008-11-15T14:59:39.803

每个人都在寻找一个框架，但是，假设它在 Apache 上运行，为什么不只包含服务器端，并且，因为你有 Python 经验，Python CGI 脚本会发出 JSON 以供 Javascript 在 UI 中使用。通过使用 CGI/SSI，您可以将有关框架和/或模板系统的决定推迟到以后，当您拥有更多经验时，您应该能够合理地重用您编写的任何 Python 代码。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2008-11-15T15:27:03.650

我将投票给 Drupal ( [http://www.drupal.org](http://www.drupal.org) )

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2008-11-15T17:32:53.693

我认为 [LOVDbyLess](http://lovdbyless.com/) 可能完全符合您的要求。如果您只需要基本的博客和照片上传以及一个简单的 SNS，那么请查看这个 Ruby-on-Rails 开源项目。它一直在发展新功能，并且很容易设置。

# idl - 如果 typedef 使用未知类型，Microsoft MIDL 不会报告错误，这是一个错误吗？

> ID：292610
> 
> 赞同：0
> 
> 时间：2008-11-15T14:31:05.383
> 
> 标签：idl, midl

我想知道我是否遗漏了什么：

```
//this is test.idl
typedef foo foo_t;
// end of test.idl 
```

当我使用以下命令编译 test.idl 时：

```
midl /W4 test.idl 
```

我得到这个输出

```
Microsoft (R) 32b/64b MIDL Compiler Version 6.00.0366
Copyright (c) Microsoft Corporation 1991-2002\. All rights reserved.
Processing .\test.idl
test.idl 
```

我得到一个错误的 test.h （在这条消息的底部），它只有

```
typedef foo_t; 
```

其中未知的 foo 类型被静默丢弃。

我本来预计会出现一条错误消息，说明“foo 是未知类型”，我错了吗？

我是否需要将任何特定参数传递给 MIDL 命令？

我使用 MIDL 编译器版本 7.00.0500 得到了相同的结果

```
/* this ALWAYS GENERATED file contains the definitions for the
interfaces */

 /* File created by MIDL compiler version 6.00.0366 */
/* at Thu Nov 13 11:47:40 2008
 */
/* Compiler settings for test.idl:
    Oicf, W4, Zp8, env=Win32 (32b run)
    protocol : dce , ms_ext, c_ext, robust
    error checks: allocation ref bounds_check enum stub_data
    VC __declspec() decoration level:
         __declspec(uuid()), __declspec(selectany), __declspec
(novtable)
         DECLSPEC_UUID(), MIDL_INTERFACE()
*/
//@@MIDL_FILE_HEADING(  )

#pragma warning( disable: 4049 )  /* more than 64k source lines */

/* verify that the <rpcndr.h> version is high enough to compile this
file*/
#ifndef __REQUIRED_RPCNDR_H_VERSION__
#define __REQUIRED_RPCNDR_H_VERSION__ 475
#endif

#include "rpc.h"
#include "rpcndr.h"

#ifndef __RPCNDR_H_VERSION__
#error this stub requires an updated version of <rpcndr.h>
#endif // __RPCNDR_H_VERSION__

#ifndef __test_h__
#define __test_h__

#if defined(_MSC_VER) && (_MSC_VER >= 1020)
#pragma once
#endif

/* Forward Declarations */

#ifdef __cplusplus
extern "C"{
#endif

void * __RPC_USER MIDL_user_allocate(size_t);
void __RPC_USER MIDL_user_free( void * );

/* interface __MIDL_itf_test_0000 */
/* [local] */

typedef foo_t;

extern RPC_IF_HANDLE __MIDL_itf_test_0000_v0_0_c_ifspec;
extern RPC_IF_HANDLE __MIDL_itf_test_0000_v0_0_s_ifspec;

/* Additional Prototypes for ALL interfaces */

/* end of Additional Prototypes */

#ifdef __cplusplus
}

#endif

#endif 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-18T08:19:43.823

我向 Microsoft 提交了以下错误：

[如果 typedef 使用未知类型，MIDL 不会报告错误](http://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=382571)

# jquery - 如何使用 jQuery 设置 DropDownList 的值？

> ID：292615
> 
> 赞同：375
> 
> 时间：2008-11-15T14:34:44.333
> 
> 标签：jquery, drop-down-menu

正如问题所说，如何使用 jQuery 设置 DropDownList 控件的值？

* * *

## 回答 #1

> 赞同：634
> 
> 时间：2008-11-15T14:38:45.073

```
$("#mydropdownlist").val("thevalue"); 
```

只需确保选项标签中的值与 val 方法中的值匹配。

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2015-12-21T11:20:44.377

正如@Nick Berardi 所建议的，如果您更改的值未反映在 UI 前端，请尝试：

```
$("#mydropdownlist").val("thevalue").change(); 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2011-11-17T10:13:08.987

~~如果您使用索引，您可以直接使用 .attr() 设置选定的索引：~~

 ~~```
$("#mydropdownlist").attr('selectedIndex', 0); 
```~~ 

~~这会将其设置为下拉列表中的第一个值。~~

**编辑：** 我上面的做法曾经奏效。但现在好像没有了。

但正如韩在评论中愉快地指出的那样，正确的做法是：

```
$("#mydropdownlist").get(0).selectedIndex = index_here; 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-04-16T08:24:22.573

试试这个非常简单的方法：

```
/*make sure that value is included in the options value of the dropdownlist 
e.g. 
(<select><option value='CA'>California</option><option value='AK'>Alaska</option>      </select>)
*/

$('#mycontrolId').val(myvalue).attr("selected", "selected"); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-05-25T05:23:32.387

如果您的下拉菜单是 Asp.Net 下拉菜单，那么下面的代码可以正常工作，

```
 $("#<%=DropDownName.ClientID%>")[0].selectedIndex=0; 
```

但是，如果您的 DropDown 是 HTML 下拉菜单，那么此代码将起作用。

```
 $("#DropDownName")[0].selectedIndex=0; 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-03-10T10:28:08.253

*该问题的最佳答案：*

```
$("#comboboxid").val(yourvalue).trigger("chosen:updated"); 
```

例如：

```
$("#CityID").val(20).trigger("chosen:updated"); 
```

或者

```
$("#CityID").val("chicago").trigger("chosen:updated"); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-03T09:59:10.097

有很多方法可以做到这一点。这里是其中的一些：

```
$("._statusDDL").val('2'); 
```

或者

```
$('select').prop('selectedIndex', 3); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-05-30T11:30:02.787

**设置值和更新**下拉列表事件

```
$("#id").val("1234").change(); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-11-11T12:10:59.043

**如果您只需要设置下拉列表的值，那么最好的方法是**

```
$("#ID").val("2"); 
```

**如果您必须在更新下拉列表值后触发任何脚本，例如如果您在下拉列表上设置任何 onChange 事件，并且您希望在更新下拉列表后运行它，那么您需要像这样使用**

```
$("#ID").val("2").change(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-09-18T12:38:35.273

我认为这可能会有所帮助：

```
 $.getJSON('<%= Url.Action("GetDepartment") %>', 
              { coDepartment: paramDepartment },
              function(data) {
                    $(".autoCompleteDepartment").empty();
                    $(".autoCompleteDepartment").append($("<option />").val(-1));
                    $.each(data, function() {
                        $(".autoCompleteDepartment").append($("<option />").val(this.CodDepartment).text(this.DepartmentName));
                    });
                    $(".autoCompleteDepartment").val(-1);                                       
              }  
             ); 
```

如果这样做，您将添加一个没有文本的元素。因此，当您单击 de combo 时，它不会出现，但是您稍后使用 $(".autoCompleteDepartment").val(-1); 添加的值 -1 让您控制组合是否具有有效值。

希望它可以帮助任何人。

对不起我的英语不好。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-06-18T05:27:28.877

**只需确保选项标签中的值与 val 方法中的值匹配即可。**

```
$("#mydropdownlist").val("thevalue"); 
```

如果您有一些 onchange 或任何其他带有下拉菜单的功能，您可以使用下面的代码。它可以触发您的 onchange 或其他一些功能。

```
$("#mydropdownlist").val("thevalue").change(); 
```

More Informations: [https://slaford.com/html/how-can-i-set-the-value-of-a-dropdown-list-using-jquery/](https://slaford.com/html/how-can-i-set-the-value-of-a-dropdown-list-using-jquery/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-05-18T14:32:49.620

**如果您`<options ....></options>`通过 Ajax 调用**
加载所有内容，请 按照以下步骤执行此操作。

1）。为下拉
For Ex 的设置值创建一个单独的方法：

```
function set_ip_base_country(countryCode)
    $('#country').val(countryCode)
} 
```

2）。ajax调用成功时调用此方法所有html追加任务完成

例如：

```
success: function (doc) {
  .....
  .....
  $("#country").append('<option style="color:black;" value="' + key + '">'  +   value + '</option>')
  set_ip_base_country(ip_base_country)
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-11-23T05:48:47.843

这是一个用于快速设置所选选项的功能：

```
function SetSelected(elem, val){
        $('#'+elem+' option').each(function(i,d){
        //  console.log('searching match for '+ elem + '  ' + d.value + ' equal to '+ val);
            if($.trim(d.value).toLowerCase() == $.trim(val).toLowerCase()){
        //      console.log('found match for '+ elem + '  ' + d.value);
                $('#'+elem).prop('selectedIndex', i);
            }
        });
    } 
```

使用参数元素 id 和选定值调用此函数；像这样：

```
SetSelected('selectID','some option'); 
```

当有很多选择选项要设置时，它很有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-26T10:02:47.307

设置`drop-down` `selected`值并更新更改

```
$("#PR2DistrictId option[value='@Model.PR2DistrictId']").attr("selected", true).trigger("chosen:updated") 
```

在这里，我们首先设置值，`Model`然后在选择时更新它

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-02-16T05:49:37.267

//下拉列表的Html格式。

```
<select id="MyDropDownList">
<option value=test1 selected>test1</option>
<option value=test2>test2</option>
<option value=test3>test3</option>
<option value=test4>test4</option> 
```

// 如果你想使用 javascript 将选中的 Item 更改为 test2。试试这个。// 设置下一个你想选择的选项

```
var NewOprionValue = "Test2"

        var RemoveSelected = $("#MyDropDownList")[0].innerHTML.replace('selected', '');
        var ChangeSelected = RemoveSelected.replace(NewOption, NewOption + 'selected>');
        $('#MyDropDownList').html(ChangeSelected); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-06-28T14:10:26.853

使用上面突出显示/检查的答案对我有用......这里有一点见解。我在获取 URL 时有点作弊，但基本上我是在 Javascript 中定义 URL，然后通过上面的 jquery 答案设置它：

```
<select id="select" onChange="window.location.href=this.value">
    <option value="">Select a task </option>
    <option value="http://127.0.0.1:5000/choose_form/1">Task 1</option>
    <option value="http://127.0.0.1:5000/choose_form/2">Task 2</option>
    <option value="http://127.0.0.1:5000/choose_form/3">Task 3</option>
    <option value="http://127.0.0.1:5000/choose_form/4">Task 4</option>
    <option value="http://127.0.0.1:5000/choose_form/5">Task 5</option>
    <option value="http://127.0.0.1:5000/choose_form/6">Task 6</option>
    <option value="http://127.0.0.1:5000/choose_form/7">Task 7</option>
    <option value="http://127.0.0.1:5000/choose_form/8">Task 8</option>
</select>
<script>
    var pathArray = window.location.pathname.split( '/' );
    var selectedItem = "http://127.0.0.1:5000/" + pathArray[1] + "/" + pathArray[2];
    var trimmedItem = selectedItem.trim();
    $("#select").val(trimmedItem);
</script> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-04-20T08:26:05.770

对于使用 Bootstrap 的人，请使用`$(#elementId').selectpicker('val','elementValue')`而不是`$('#elementId').val('elementValue')`，因为后者不会更新 UI 中的值。

**注意**：即使`.change()`功能有效，如上面某些答案中所建议的那样，但它会触发该`$('#elementId').change(function(){ //do something })`功能。

只是将其发布在那里以供将来引用此线程的人使用。

# php - PHP MYSQL - 一列中有许多数据

> ID：292618
> 
> 赞同：0
> 
> 时间：2008-11-15T14:36:10.193
> 
> 标签：php, mysql, database-design

我需要在 mysql 中存储 100-200 个数据，这些数据将由管道分隔..

知道如何将它存储在mysql上吗？我应该使用单列还是应该制作许多多列？我不知道究竟有多少数据用户会输入。

我做了一个表格，它停在需要存储多个数据的部分。

任何人都知道如何在单列中存储多个数据，或者有没有其他方法？

请帮我..

非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T14:54:46.287

您应该使用数据源的 ID 来实现您的表。此 ID 将用于对所有这些相似数据进行分组，因此您无需事先知道您有多少。

您的表格列和数据可以这样设置：

```
sourceID        data
--------        ----
       1         100
       1         200
       1         300
       2         100
       3         100
       3         200 
```

查询数据库时，只需拉入具有相同 sourceID 的所有数据。有了上面的数据，下面的查询将返回两条数据。

```
SELECT data
FROM dataTable
WHERE sourceID = 3 
```

`JOIN`如果您有多个表，则需要使用语法将它们相互关联。假设您有一个包含用户数据的主表，并且您希望将所有这些输入数据与每个用户相关联。

```
userID    userName    otherData
------    --------    ---------
     1         Bob          xyz
     2         Jim          abc
     3         Sue        lmnop 
```

如果要将此表 (userTable) 中的数据与 dataTable 中的数据连接，请使用如下查询：

```
SELECT userID, userName, data, otherData
FROM userTable
LEFT JOIN dataTable
ON userTable.userID = dataTable.sourceID
WHERE userTable.userID = 1 
```

此查询将为您提供 ID 为 1 的用户的所有数据。这假定数据表中的 sourceID 使用用户表中的 userID 来跟踪额外数据属于谁。

请注意，这不是 SQL 中唯一的 JOIN 语法。[您可以在此处](http://www.keithjbrown.co.uk/vworks/mysql/mysql_p5.php)了解其他类型的联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T14:43:24.890

如果您有一个来自该数据的表单，请将表单中的每个输入存储到它自己的单独列中。

在您的数据中寻找关系：听起来您有一个“有很多”关系，这表明您可能需要一个链接表，您可以在其中执行简单的连接查询......

在单个列中存储多个数据将是查询和更新的噩梦，除非您存储 XML，否则它会给我带来噩梦......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T14:44:45.823

听起来你需要一个连接表。在两个表中都有你需要的数据，用两个表的ID创建第三个表，那么你需要100、200、300或更多都没有关系。

# jquery - jQuery Draggable 错误：对象不支持此属性或方法

> ID：292635
> 
> 赞同：5
> 
> 时间：2008-11-15T14:52:43.813
> 
> 标签：jquery

我正在尝试将一个可拖动对象添加到一个简单的 html 页面。

IE 给出：对象不支持此属性或方法

FF 给出：jQuery(".dragthis").draggable 不是函数

使用最新的 jquery 解压。这是代码：

```
<html> 
    <head>
        <script src="jquery.js"></script>
        <script>
            $(document).ready(function () {
                jQuery(".dragthis").draggable();
                jQuery(".drophere").droppable();

            });
        </script>
        <style>
            .dragthis {
            }
            .drophere {
            }
        </style>
    </head>

    <body>
        <div class="dragthis">dragthis</div>
        <div class="drophere">drophere</div>
    </body> 
</html> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-15T14:53:50.877

您需要包含[jQuery UI 库](http://ui.jquery.com/)。

# css - 为带有长水平表格的页面打印样式表

> ID：292642
> 
> 赞同：8
> 
> 时间：2008-11-15T14:57:09.857
> 
> 标签：css, styling, printing-web-page

我有一个页面在长水平表中吐出 db 数据。

我需要很好地打印它，这样它就不会被切断。有小费吗 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-16T02:27:44.110

1.  将表格更改为具有多行的水平表格（交换行/列）

2.  建议用户切换到横向模式。AFAIK 无法在当前浏览器中以编程方式执行此操作（CSS3 定义`@page {size:landscape}`）

3.  每隔几列拆分表（即，一个包含 100 列的表，生成 10 个表，每个表包含 10 列）。使用 CSS`table {display: inline-table}`在屏幕上并排显示它们。这个技巧只有在你没有不同高度的单元格时才有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-15T16:38:35.703

如果它不适合纸上的可读字体，那它就是不适合。在我看来，巨大的水平表格（无论是 HTML 表格还是具有多列的 Excel 表格）不适合打印。就此而言，它们也不适合在屏幕上观看。请记住，对于您的用户来说，垂直滚动比水平滚动要容易得多——这都要归功于鼠标上的那个小滚轮。

最坏的情况是，您可能需要编写一个使用垂直布局的单独打印版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-11-16T01:54:42.430

为确保您的表格不会消失在 Printer Abyss 中，请确保其容器的宽度设置为 100%。

我假设您知道如何使用特定于打印的 CSS ( `<style type="text/css" media="print">`)。
由于打印机和计算机显示器可以有非常不同的分辨率，所以在打印 CSS 中进行大部分尺寸设置`em`，并在打印时隐藏非必要元素 ( `display:none`)。

此外，为了提高纸上的可读性，请使用白色背景、黑色文本和衬线字体（Times New Roman 等），它们以在纸上更易读而著称。

不同的浏览器会以自己的方式打印（甚至比在屏幕上打印更多），因此请多试一试，看看是否可以从其他浏览器获得更好的结果。也就是说，当然，如果打印不需要在整个浏览器范围内完美运行。

# javascript - 识别列表项索引 - 哪种方法更好？

> ID：292646
> 
> 赞同：0
> 
> 时间：2008-11-15T15:00:59.740
> 
> 标签：javascript, html, dom

我需要从列表中选取列表项，然后在它们上执行添加事件处理程序等操作。我可以想到两种方法来做到这一点。

HTML：

```
 <ul id="list">
       <li id="listItem-0"> first item </li>
       <li id="listItem-1"> second item </li> 
       <li id="listItem-2"> third item </li> 
    </ul> 
```

1.  使用 ID -

    ```
    for(i=0;i<3;i++)
    {
       document.getElementById("listItem-"+i).addEventListener("click",foo,false);
    } 
    ```

2.  使用 childNodes 属性-

    ```
    for(i=0;i<3;i++)
    {
      document.getElementById("list").childNodes[i]
         .addEventListener("click",foo,false);
    } 
    ```

我使用第一种方法的原因是在函数 foo 中，如果我想要项目在列表中的索引，我可以通过拆分 id 来做到这一点 -

```
 function foo()
    {
      tempArr = this.id.split('-');      
      index = tempArr[tempArr.length-1]; // the last element in the array
    } 
```

想不出办法用第二种方法，也就是不使用id命名方案。

问题：

1.  如何使用第二种方法或任何更好的方法获取索引
2.  遵循第一种方法是否有一些非常不好的影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T15:34:09.283

您可以通过向包含元素（无序列表）添加单个事件处理程序并利用事件冒泡的概念来避免向每个列表项添加事件处理程序。在这个单一事件处理程序中，您可以使用事件对象的属性来确定单击了什么。

您似乎希望将数组中的数据映射到列表项。虽然从列表项 id 中解析出数组索引会起作用，但另一种方法是将列表项上的“键”值存储为扩展，并使用 javascript 对象属性来查找您的数据。

部分示例：

```
<li key="myKey">

//oData is a object (eg. var oData = {};) that has been populated with properties
//whose value is the desired data (eg. oData["myKey"] = 123;)

alert(oData[event.srcElement.key]); // alerts 123 
```

就您展示的第一种技术的不良影响而言，一个不良影响是，对于许多列表项，您最终会定义许多事件处理程序，这在某些时候会对性能产生影响。

另请注意，通过省略“i”的 var 关键字，您可能无意中在循环中创建了全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T15:40:02.063

如果你选择使用 jQuery，它就很简单：

```
$('ul#list li').click(function () {
    var i = this.id.split('-').pop();
    alert( i );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T16:00:12.863

也许类似于：

```
var lis = document.getElementById("list").getElementsByTagName("li");

for (var i = 0, li; li = lis[i]; ++i) {
  li.addEventListener("click", (function(pos) {
    return function() {
      alert(pos);
    };
  })(i), false);
} 
```

或者，从 J cs 答案和[自定义数据属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#embedding-custom-non-visible-data)中获得一些灵感：

```
var lis = document.getElementById("list").getElementsByTagName("li");

for (var i = 0, li; li = lis[i]; ++i) {
  li.setAttribute("data-index", i); // Or whatever value you want...
  li.addEventListener("click", function() {
    alert(this.getAttribute("data-index"));
 }, false);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-16T00:59:46.253

如前所述，如果要检索 li 的列表，则应在 ul 上使用 getElementsByTagName，因为 childNodes 可能会检索一些文本节点以及 li 节点。

现在，如果您需要在事件处理程序中使用索引，则最好直接使用闭包以便在事件处理程序中重用循环变量。

```
var lis = document.getElementById("list").getElementsByTagName("li");

for( var i = 0, l = lis.length; i < l; ++i )
{
    (function(){

        // As a new variable will be created for each loop, 
        // you can use it in your event handler  
        var li = lis[i]; 

        li.addEventListener("click", function() 
        {
            li.className = "clicked";

        }, false);

    })();
} 
```

但是您可以为此考虑事件委托。您只需将事件处理程序附加到父元素并使用目标属性找到单击的元素。

```
document.getElementById("list").addEventListener("click", function(event)
{
    var li = event.target;
    if( li.nodeName.toLowerCase() == "li" )
    {
        ...
    }
}, false); 
```

# mysql - SQL - 如何进行有条件的 INSERT

> ID：292660
> 
> 赞同：5
> 
> 时间：2008-11-15T15:19:01.997
> 
> 标签：mysql, sql, insert

仅使用**MySQL**，我正在查看是否可以仅在表是新表时运行插入语句。我成功创建了一个用户变量来查看表是否存在。问题是您不能将“WHERE”与插入语句一起使用。关于如何使它工作的任何想法？

```
// See if the "country" table exists -- saving the result to a variable
SELECT
    @table_exists := COUNT(*)
FROM
    information_schema.TABLES
WHERE
    TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'country';

// Create the table if it doesn't exist
CREATE TABLE IF NOT EXISTS country (
    id INT unsigned auto_increment primary key,
    name VARCHAR(64)
);

// Insert data into the table if @table_exists > 0
INSERT INTO country (name) VALUES ('Afghanistan'),('Aland Islands') WHERE 0 < @table_exists; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T15:25:14.340

```
IF @TableExists > 0 THEN
   BEGIN
       INSERT INTO country (name) VALUES ('Afghanistan'),('Aland Islands');
   END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T15:26:04.213

使用 if 语句代替 where 子句：

[http://dev.mysql.com/doc/refman/5.0/en/if-statement.html](http://dev.mysql.com/doc/refman/5.0/en/if-statement.html)

# c# - 在 foreach thru 方法中更改项目

> ID：292667
> 
> 赞同：1
> 
> 时间：2008-11-15T15:27:12.697
> 
> 标签：c#, methods, foreach

让我们从以下代码段开始：

```
Foreach(Record item in RecordList){
  ..
  item = UpdateRecord(item, 5);
  ..
} 
```

UpdateRecode 函数更改项目的某些字段并返回更改后的对象。在这种情况下，编译器会抛出一个异常，指出无法在 foreach 迭代中更新该项目。

现在 UpdateRecord 方法已更改，因此它返回 void 并且代码段将如下所示：

```
Foreach(Record item in RecordList){
  ..
  UpdateRecord(item, 5);
  ..
} 
```

在这种情况下，项目将被更新，因为 Record 是一个引用类型。但它使代码不可读。

我正在处理的项目有很多 foreach 循环，一遍又一遍地使用几乎相同的代码，所以我想创建更新部分记录的方法。有没有很好的方法来做到这一点？一种使代码更具可读性而不是进一步破坏它的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T15:31:14.063

如果您需要更新集合，请不要使用迭代器模式，就像您说的那样，它要么容易出错，要么闻起来很糟糕。

我发现在这种情况下使用带有索引的 for 循环会更清晰一些，因为您正在尝试这样做非常明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T16:18:53.467

编译器抱怨您无法更新*集合*，而不是记录。通过执行 item = UpdateRecord，您正在重新分配迭代器变量 item。

我不同意 UpdateRecord(item, 5) 在任何方面都不可读 - 但如果它让你感觉更好，扩展方法可能会让你更清楚地知道你正在更改 item 的内容。

```
static void Update(this Record item, int value) {
   // do logic
}

foreach (Record item in RecordList) {
   item.Update(5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T15:36:47.983

您需要更新相同的列表吗？你可以返回一个新的（更新的）枚举吗？

```
foreach(Record item in RecordList){
  ..
  yield return GetUpdatedRecord(item, 5);
  ..
} 
```

# c# - 是否有在 C# 中重载赋值运算符的解决方法？

> ID：292676
> 
> 赞同：35
> 
> 时间：2008-11-15T15:34:09.470
> 
> 标签：c#, operator-overloading

与 C++ 不同，在 C# 中，您不能重载赋值运算符。

我正在为具有非常大数字的算术运算做一个自定义 Number 类，我希望它具有内置数字类型（如 int、decimal 等）的外观。我重载了算术运算符，但是任务仍然...

这是一个例子：

```
Number a = new Number(55); 
Number b = a; //I want to copy the value, not the reference 
```

有解决该问题的方法吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2009-02-05T15:49:44.497

您可以使用 'implicit' 关键字为分配创建重载：

假设你有一个像 Foo 这样的类型，你觉得它可以从字符串隐式转换。您将在 Foo 类中编写以下静态方法：

```
public static implicit operator Foo(string normalString)
{
    //write your code here to go from string to Foo and return the new Foo.
} 
```

完成后，您可以在代码中使用以下内容：

```
Foo x = "whatever"; 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2008-11-15T16:46:50.570

我仍然不清楚你是否真的需要这个。任何一个：

*   您的 Number 类型应该是一个结构（这很可能 - 数字是最常见的结构示例）。请注意，您希望类型表现的所有类型（int、decimal 等）都是结构。

或者：

*   您的 Number 类型应该是不可变的，使每个突变操作都返回一个新实例，在这种情况下，无论如何您都不需要在分配时复制数据。（事实上​​，你的类型应该是不可变的，无论它是否是结构体。可变结构体是邪恶的，数字当然不应该是可变引用类型。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-11-15T15:44:01.027

您将无法以 C++ 的外观解决它，因为 a = b; 在 C++ 中比在 C# 中具有其他语义。在 C# 中，a = b; 指向与 b 相同的对象。在 C++ 中，a = b 改变了 a 的内容。两者都有其起起落落。就像你做的一样

```
MyType * a = new MyType();
MyType * b = new MyType(); 
a = b; /* only exchange pointers. will not change any content */ 
```

在 C++ 中（它会丢失对第一个对象的引用，并造成内存泄漏。但我们在这里忽略它）。您也不能为此重载 C++ 中的赋值运算符。

解决方法很简单：

```
MyType a = new MyType();
MyType b = new MyType();

// instead of a = b
a.Assign(b); 
```

*免责声明*：我不是 C# 开发人员

你可以像这样创建一个只写属性。然后做 a.Self = b; 多于。

```
public MyType Self {
    set {
        /* copy content of value to this */
        this.Assign(value);
    }
} 
```

现在，这**不好**。因为它违反了最小意外原则（POLS）。如果一个人做了 a.Self = b; 就不会期望 a 改变。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-15T16:29:24.710

您可以使类不可变，而不是在传递引用时复制数据。当类是不可变的时，对它有多个引用不是问题，因为它无法更改。

更改数据的操作当然会返回新实例。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-01-06T20:26:57.520

较早的一篇文章建议了这一点：

> 公共静态隐式运算符 Foo(string normalString) { }

我尝试了这种方法......但要让它工作，你需要这个：

公共静态隐式运算符 Foo(Foo original) { }

并且编译器不会让您从您的确切类型或您自己的任何基本类型中获得隐式转换函数。这是有道理的，因为这将是一种覆盖赋值运算符的后门方式，而 C# 不想允许这种方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-10T15:48:02.470

这是一个适合我自己的解决方案：

```
public class MyTestClass
{
   private int a;
   private string str;

   public MyTestClass()
   {
      a = 0;
      str = null;
   }

   public MyTestClass(int a, string str)
   {
      this.a = a;
      this.str = str;
   }

   public MyTestClass Clone
   {
      get
      {
         return new MyTestClass(this.a, this.str);
      }
   }
} 
```

代码中的其他地方：

```
MyTestClass test1 = new MyTestClass(5, "Cat");
MyTestClass test2 = test1.Clone; 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-09-07T16:53:09.180

也许您正在寻找的东西可以使用 C# 访问器来解决。

[http://msdn.microsoft.com/en-us/library/aa287786(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287786(v=vs.71).aspx)

# coding-style - 了解 Dijkstra 的莫扎特编程风格

> ID：292682
> 
> 赞同：20
> 
> 时间：2008-11-15T15:41:28.767
> 
> 标签：coding-style, dijkstra

我看到了 Edsger Dijsktra 看到的[这篇关于编程风格的文章。](http://www.catonmat.net/blog/edsger-dijkstra-discipline-in-thought/)快速解释一下，主要区别在于莫扎特，当类比到编程时，在写任何东西之前完全理解（有争议的）问题，而贝多芬在将笔记写在纸上时做出了决定，并在此过程中进行了许多修改。使用 Mozart 编程，1.0 版将是软件的唯一版本，其目标是无错误地工作和最高效率。此外，Dijkstra 表示，不应该向公众发布没有达到那种细化和稳定性水平的软件。

根据他的观点，有两个问题。莫扎特编程甚至可能吗？如果我们采用莫扎特风格，我们今天编写的软件真的会受益吗？

我的想法。看来，为了解决软件日益复杂的问题，我们已经从这种方法转向敏捷开发、公共 beta 测试和不断修订等定义 Web 开发的方法，其中速度最重要。但是，当我想到 Web 软件可以经历的所有修订时，尤其是在维护期间，通常会在补丁之上应用补丁，然后通过繁琐的重构过程进行改进——莫扎特的方式似乎很有吸引力。它至少会减少那些烦人的软件更新，例如 Digsby、Windows、iTunes 等，其中许多是需要立即发布新版本的不可预见漏洞造成的。

编辑：有关 Dijsktra 观点的更准确解释，请参阅[下面的回复。](https://stackoverflow.com/questions/292682/understanding-dijkstras-mozart-programming-style#292955)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2008-11-15T16:02:48.693

莫扎特编程风格是一个完整的神话（每个人都必须编辑和修改他们最初的努力），虽然“莫扎特”在这个例子中本质上是一个隐喻，但值得注意的是，莫扎特本身实际上是一个神话。

莫扎特是一个被认为是神奇的神童，他在 4 岁时创作了他的第一首奏鸣曲（他实际上是 6 岁，这很糟糕——你永远不会在任何地方听到它演奏）。当然，很少有人提到他的父亲被认为是欧洲最伟大的音乐老师，他强迫他所有的孩子每天练习演奏和作曲几个小时，只要他们能拿起乐器或钢笔。

莫扎特本人小心翼翼地通过销毁他的大部分草稿来维持他的音乐完全从他的脑海中浮现的错觉，尽管足以证明他是一个和其他人一样的编辑。贝多芬只是对这个过程更加诚实（也许是因为他是聋子，并且无法分辨是否有人偷偷摸摸地接近他）。

我什至不会提到莫扎特的旋律是从听鸣禽获得的理论。或者他创建了一个使用骰子随机生成音乐的系统（这*实际上*很酷，但也可以解释莫扎特的音乐有多少似乎是从无到有的）。

这个故事的寓意是：不要相信炒作。编程是一种工作，接下来是更多的工作来修复你第一次犯的错误，然后是更多的工作来修复你第二次犯的错误，依此类推，直到你死。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-15T16:54:11.320

**它没有规模。**

我可以在脑海中弄清楚一行代码，一个例程，甚至是一个小程序。但是中型节目？可能有一些人可以做到，但是有多少人，他们要花多少钱？他们真的应该编写下一个工资单程序吗？这就像在 muzak 上浪费了莫扎特。

现在，试着想象一个莫扎特乐队。只是几秒钟。

* * *

它仍然是一个强大的工具。如果你能在脑海中找出整条线，那就去做吧。如果你能找出一个包含所有有趣案例的小程序，那就去做吧。

从表面上看，它避免了回到绘图板，因为您没有想到一个边缘案例需要完全不同的界面。

更深层次的含义（[假头](http://www.associatedcontent.com/article/604505/life_lessons_and_the_randy_pausch_head.html)？）可以通过学习另一种人类语言来解释。很长一段时间，您都在思考哪些词代表了您的想法，以及如何将它们排列成一个有效的句子——转录会花费大量的前台周期。
有一天你会注意到你只是说话的一种解放的感觉。它可能感觉像是“用外语思考”，或者好像“单词自然而然”。你有时会在寻找一个特定的单词或习语时绊倒，但大多数时候翻译**是在“潜意识 CPU”的巨大资源中运行的**。

* * *

“高目标”是开发一个（大部分）独立于实现语言的解决方案的心理模型，以将问题的*解决方案*与*转录*问题分开。转录简单、重复且易于训练，抽象的解决方案可以重复使用。

我不知道如何教它，但是“在开始编写之前尽可能多地弄清楚”听起来像是朝着这个目标的良好编程实践。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2008-11-15T15:46:21.050

来自 Usenet 的经典故事，关于真正的莫扎特编程。

> 真正的程序员用 Fortran 编写。
> 
> 也许他们现在这样做了，在这个充满精简啤酒、手动计算器和“用户友好”软件的颓废时代，但回到过去的美好时光，当时“软件”这个词听起来很有趣，而真正的计算机是由鼓和真空管制成的，真正的程序员用机器代码编写。不是 Fortran。不是老鼠。甚至不是汇编语言。机器码。原始的、朴素的、难以理解的十六进制数字。直接地。
> 
> 为了避免新一代的程序员在对这段辉煌过去的无知中长大，我觉得有责任尽我所能地描述一个真正的程序员是如何编写代码的。我会叫他梅尔，因为那是他的名字。
> 
> 我第一次见到梅尔是在我为打字机公司的现已解散的子公司 Royal McBee Computer Corp. 工作时。该公司制造了 LGP-30，一种小型、便宜（按当时的标准）的鼓式存储器计算机，并且刚刚开始制造 RPC-4000，一个大大改进、更大、更好、更快的鼓-内存计算机。核心成本太高，而且无论如何都不会留在这里。（这就是为什么你还没有听说过这家公司或电脑的原因。）
> 
> 我受雇为这个新奇迹编写 Fortran 编译器，Mel 是我的向导。梅尔不赞成编译器。
> 
> “如果一个程序不能重写自己的代码，”他问道，“那有什么好处呢？”
> 
> 梅尔用十六进制编写了公司拥有的最流行的计算机程序。它在 LGP-30 上运行，并在电脑展上与潜在客户玩二十一点。它的影响总是戏剧性的。LGP-30 的展台每场都座无虚席，IBM 的销售人员站在一起互相交谈。这是否真正出售计算机是我们从未讨论过的问题。
> 
> Mel 的工作是为 RPC-4000 重新编写二十一点程序。（端口？那是什么意思？）新计算机有一个一加一寻址方案，其中每条机器指令，除了操作码和所需操作数的地址外，还有第二个地址，指示位置，在转鼓上，找到了下一条指令。用现代的话来说，每条指令后面都有一个 GO TO！把*它*放在帕斯卡的烟斗里抽。
> 
> Mel 喜欢 RPC-4000，因为他可以优化他的代码：也就是说，在鼓上定位指令，这样当一个完成它的工作时，下一个就会到达“读取头”并可以立即执行。有一个程序可以完成这项工作，一个“优化汇编程序”，但梅尔拒绝使用它。
> 
> “你永远不知道它会把东西放在哪里”，他解释说，“所以你必须使用单独的常量”。
> 
> 过了很久我才明白那句话。由于梅尔知道每一个操作码的数值，并分配了自己的鼓地址，所以他写的每条指令也可以被认为是一个数值常数。如果它具有正确的数值，他可以选择较早的“加法”指令，并乘以它。他的代码不容易被别人修改。
> 
> 我将 Mel 的手动优化程序与优化汇编程序处理的相同代码进行了比较，Mel 总是运行得更快。那是因为“自上而下”的程序设计方法还没有发明出来，梅尔无论如何也不会使用它。他首先编写了程序循环的最里面部分，因此他们将首先选择鼓上的最佳地址位置。优化汇编器不够聪明，无法这样做。
> 
> Mel 也从未编写过延时循环，即使在笨拙的 Flexowriter 需要输出字符之间的延迟才能正常工作时也是如此。他只是在鼓上找到指令，这样每一个连续的指令在需要时都刚好*经过* 读取头；鼓必须再进行一次完整的旋转才能找到下一条指令。他为这个程序创造了一个令人难忘的术语。尽管“最佳”是一个绝对术语，就像“唯一”一样，但将其设为相对已成为常见的口头习惯：“不是很理想”或“不太理想”或“不是很理想”。梅尔将最大时间延迟位置称为“最悲观”。
> 
> 在他完成二十一点程序并让它运行之后，（“甚至初始化程序都被优化了”，他自豪地说）他收到了来自销售部门的变更请求。该程序使用了一个优雅的（优化的）随机数生成器来洗牌并从“牌组”中发牌，一些推销员觉得这太公平了，因为有时客户会输。他们希望 Mel 修改程序，以便在控制台上设置感应开关时，他们可以改变赔率并让客户获胜。
> 
> 梅尔犹豫了。他觉得这显然是不诚实的，事实确实如此，并且它影响了他作为程序员的个人诚信，它确实如此，所以他拒绝这样做。首席推销员与梅尔交谈，大老板也如此，在老板的催促下，几位资深程序员也如此。梅尔终于屈服了，写了代码，但他的测试倒退了，当感应开关打开时，程序就会作弊，每次都赢。梅尔对此很高兴，声称他的潜意识是无法控制的道德，并且坚决拒绝修复它。
> 
> 在 Mel 离开公司从事更环保的工作后，Big Boss 让我查看代码，看看我是否能找到测试并反转它。有点不情愿，我同意去看。追踪 Mel 的代码是一次真正的冒险。
> 
> 我经常觉得编程是一种艺术形式，它的真正价值只有另一个精通同样神秘艺术的人才能欣赏；由于过程的本质，有一些可爱的宝石和辉煌的政变隐藏在人类的视野和钦佩之下，有时是永远的。你可以通过阅读他的代码来了解他的很多信息，即使是十六进制的。梅尔是，我认为，一个无名的天才。
> 
> 当我发现一个没有测试的无辜循环时，也许我最大的震惊来了。没有测试。*无*。常识说它必须是一个闭环，程序将在其中无限循环。然而，程序控制权直接通过了它，并且安全地从另一边传了出去。我花了两个星期才弄明白。
> 
> RPC-4000 计算机有一个非常现代化的设备，称为索引寄存器。它允许程序员编写一个在内部使用索引指令的程序循环；每次通过时，索引寄存器中的数字都会添加到该指令的地址，因此它将引用一系列中的下一个数据。他只需要每次都增加索引寄存器。梅尔从未使用过它。
> 
> 相反，他会将指令拉入机器寄存器，将其地址加一，然后将其存储回来。然后，他将直接从寄存器执行修改后的指令。编写循环是为了考虑到这个额外的执行时间——就在这条指令完成时，下一条指令就在鼓的读磁头下方，准备好了。但是循环中没有测试。
> 
> 当我注意到索引寄存器位（位于指令字中地址和操作码之间的位）被打开时，重要的线索出现了——但梅尔从未使用过索引寄存器，一直保持为零。当灯亮起时，它几乎使我失明。
> 
> 他将他正在处理的数据定位在内存顶部附近——指令可以寻址的最大位置——因此，在处理完最后一个数据之后，增加指令地址会使其溢出。进位会将操作码加一，将其更改为指令集中的下一个：跳转指令。果然，下一条程序指令在地址位置 0 中，程序愉快地运行了。
> 
> 我没有与 Mel 保持联系，所以我不知道他是否曾经屈服于自那些早已过去的日子以来冲刷编程技术的变革洪流。我喜欢认为他没有。无论如何，我印象深刻，以至于我放弃了寻找有问题的测试，并告诉大老板我找不到它。他似乎并不感到惊讶。
> 
> 当我离开公司时，如果你打开正确的感觉开关，二十一点程序仍然会作弊，我认为应该是这样。我对破解 Real Programmer 的代码感到不舒服。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-11-15T19:37:38.713

[Edsger Dijkstra 在这段名为“思想纪律](http://tinyurl.com/yuvrry)”的YouTube 视频中讨论了他对莫扎特与贝多芬编程的看法。

![替代文字](https://i.stack.imgur.com/Ha4Tn.jpg)

该线程中的人们几乎讨论了 Dikstra 的观点是如何不切实际的。我会试着为他辩护一些。

*   **Dijkstra 反对公司本质上是在客户身上“测试”他们的软件。** 发布 1.0 版，然后立即修补 1.1。他认为该程序应该被完善到“热修复”补丁几乎是不道德的程度。
*   **他*不* 认为软件应该一蹴而就，或者永远不需要进行更改。** 他经常讨论他的设计理念，其中之一是模块化和易于更改。但是，他经常认为，在您完全理解了问题之后，应该以这种方式编写单个算法。那是他纪律的一部分。
*   在他与程序员打交道的丰富经验之后，他发现，除非程序员突破自己的知识极限，否则他们不会快乐。他说程序员不想编写他们完全并且 100% 理解的东西，因为其中没有挑战。 **程序员总是想处于知识的边缘。** 虽然他理解程序员为什么会这样，但他表示这并不代表低容错编程。

我相信 Dijkstra 的“纪律”也有一些行业或编程应用。美国宇航局漫游者、医疗行业嵌入式设备（即分发药物等）、某些转移我们资金的金融软件。这些领域没有发布后增量变化的奢侈品，需要更多的“莫扎特方法”。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2008-11-15T20:27:38.597

我认为莫扎特的故事混淆了交付与开发的方式。贝多芬没有对公众对他的交响曲进行测试。（看看他在第一次公开表演后改变了多少乐谱会很有趣。）

我也不认为 Dijkstra 坚持要在你的脑海中完成这一切。毕竟，他写了一些关于纪律编程的书，这些书涉及到在纸上解决它，并且在他希望看到数学质量的学科的同时，你注意到数学家在解决一个问题时可能会消耗多少纸和黑板吗？

我赞成[Simucal 的回应](https://stackoverflow.com/questions/292682/understanding-dijkstras-mozart-programming-style#292955)，但我认为莫扎特-贝多芬的比喻应该被抛弃。这个鞋拔子将 Dijkstra 对纪律和理解的坚持推到了一个不属于它的角落。

**补充说明：**

电视普及不是那么热，它混淆了一些关于音乐创作的东西，一个作曲家在做什么，一个程序员在做什么。用 Dijkstra 自己的话来说，在他 1972 年的图灵奖演讲中：“我们不能忘记，编写程序*不是*我们的业务；设计将显示所需行为的计算类是我们的业务。” 作曲家可能会发现所需的行为。

此外，在 Dijkstra 的 1.0 版本应该是最终版本的概念中，我们很容易混淆期望的行为和功能如何随着时间的推移而演变。我相信他认为所有未来的版本都是因为第一个版本没有经过深思熟虑并且没有严格可靠地完成，因此过于简单化了。

即使没有上市时间紧迫性，我认为我们现在更好地理解了重要类型的软件随着用户体验以及他们对它的实用目的而发展。明显的反例是游戏（还要考虑戏剧电影是如何开发的）。你认为贝多芬在没有他之前的所有经验和探索的情况下能写出第九交响曲吗？你认为观众能听到它的原貌吗？他应该等到他有完美的奏鸣曲吗？我确信 Dijkstra 没有提出这个建议，但我确实认为他对莫扎特-贝多芬的看法太过分了，无法说明他的观点。

此外，考虑下国际象棋软件。新版本不是因为以前的版本没有正确播放。它是关于利用国际象棋启发式和可用计算机能力的进步。对于这种情况和许多其他情况，认为版本 1.0 是最终版本的想法是不成立的。我理解他反对发布已知不可靠且可能受损的软件是正确的，这些软件的缺陷需要在维护和未来版本中弥补。但莫扎特的反驳对我来说站不住脚。

那么，Dijkstra 是继续驾驶他购买的第一辆汽车，还是那辆汽车的复制品？也许有计划的过时，但其中很多与前几代汽车技术不可能提供甚至考虑的改进和可靠性有关。

我是 Dijkstra 的忠实粉丝，但我认为莫扎特-贝多芬的东西太简单了，也不合适。我也是贝多芬的忠实粉丝。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-15T16:49:37.913

我认为使用莫扎特编程*似乎是可能的。*我知道有一家公司，暴雪，它在软件产品做好并准备好之前不会发布软件产品。这并不意味着暗黑破坏神 3 会在一个令人眼花缭乱的编码过程中从某人的脑海中完整而完整。这*确实*意味着这就是我们其他人的样子。暴雪将在内部测试他们的游戏，在他们解决所有问题之前不会向世界其他地方展示。大多数公司不采用这种方法，而是宁愿在软件足以解决问题时发布软件，然后在出现问题时修复错误并添加功能。这种方法（在不同程度上）适用于大多数公司。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-11-15T15:43:36.347

好吧，我们不可能都像莫扎特一样优秀，不是吗？也许贝多芬编程更容易。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-15T15:58:37.220

如果 Apple 采用“莫扎特”编程，那么今天就不会有 Mac OS X 或 iTunes。

如果谷歌采用“莫扎特”编程，就没有 Gmail 或谷歌阅读器了。

如果 SO 开发人员采用“莫扎特”编程，那么今天就不会有 SO。

如果微软采用“莫扎特”编程，今天就不会有 Windows（嗯，我认为那会很好）。

所以答案是否定的。没有什么是完美的，也没有什么是完美的，包括软件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-24T14:35:36.247

我认为这个想法是提前计划。您至少需要对您正在尝试做的事情以及您计划如何到达那里有某种大纲。如果您只是坐在键盘前，希望“缪斯女神”将您带到您的程序需要去的地方，那么结果可能会相当不平衡，并且您需要更长的时间才能到达那里。

任何类型的写作都是如此。很少有作家只是坐在打字机前毫无想法，然后开始敲打，直到制作出畅销小说。哎呀，我的岳父（一名高中英语老师）实际上为他的*信件*写了大纲。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-11-15T16:06:30.153

计算的进步值得在这里和那里牺牲荣耀或天才。

# mysql - 与会计应用程序的 MySQL 事务

> ID：292706
> 
> 赞同：5
> 
> 时间：2008-11-15T16:06:29.653
> 
> 标签：mysql, transactions

我有一个如下表：

```
transaction_id
user_id
other_user_id
trans_type
amount 
```

此表用于维护财务类型应用程序的帐户交易。

它的复式记帐，因此从用户 A 到 B 的转移将在表中插入两行，看起来像。

```
1, A, B, Sent, -100
1, B, A, Received, 100 
```

任何账户的余额都是通过汇总该账户的交易来计算的。

例如：

```
select sum(amount) from transactions where user_id=A 
```

锁定资金转移的最佳方法是什么？我当前的代码如下所示：

```
Start Transaction
Debit the sender's account
check the balance of the sender's account
if new balance is negative then the sender didn't have enough money and rollback
if the balance is positive then credit the receiver and commit 
```

这似乎没有完全按预期工作。我在网上看到很多关于交易的例子，基本上都是：开始、借方、贷方、提交。但是检查发件人之间余额的最佳方法是什么？

我有不应该通过的交易。假设一个用户有 3K 的余额，并且两笔交易同时进入 3K，这两项交易在只有一笔交易的情况下才能通过。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T16:39:42.240

您使用的是 InnoDB 表还是 MyISAM 表？MySQL 不支持 MyISAM 表上的事务（但如果您尝试使用它们，它不会给您错误）。此外，请确保您的事务隔离级别设置得当，它应该是 SERIALIZABLE，这不是 MySQL 的默认值。

本文有一个很好的示例，[它](http://www.informit.com/articles/article.aspx?p=26890&seqNum=3)使用与您的示例非常相似的示例来解释不同隔离级别的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T20:28:00.110

问题是“用户帐户”的概念“分散”在表中的许多行中。使用当前的表示，我认为您不能“锁定用户帐户”（可以这么说），因此在修改它们时您可以接受竞争条件。

一个可能的解决方案是拥有另一个带有用户帐户的表，并锁定该表中的一行，因此任何需要修改帐户的人都可以尝试获取锁定，执行操作并释放锁定。

例如：

```
begin transaction;
update db.accounts set lock=1 where account_id='Bob' and lock=0;
if (update is NOT successful) # lock wasn't on zero
  {
  rollback;
  return;
  }
if (Bob hasn't enough funds)
  {
  rollback;
  return;
  }

insert into db.transactions value (?, 'Bob', 'Alice', 'Sent', -3000);
insert into db.transactions value (?, 'Alice', 'Bob', 'Received',  3000);
update db.accounts set lock=0 where account_id='Bob' and lock=1;

commit; 
```

... 或类似的东西。

# asp.net - 我可以在没有闪光灯或 Silverlight 的情况下制作全屏网站吗？

> ID：292710
> 
> 赞同：3
> 
> 时间：2008-11-15T16:10:56.010
> 
> 标签：asp.net

我正在处理需要网页全屏显示的内容。屏幕必须变成全白。

无论如何，我可以在没有闪光灯或银光的情况下做到这一点吗？提前致谢

编辑：我不想强迫任何人进入全屏模式，这将主要由几个人使用。即便如此，我会就如何进入和退出 fullscreen 给出适当的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T16:42:55.197

你不能全屏，因为安全原因标题栏还在不同的浏览器中等等。

但是一种方法可能是使窗口大于屏幕，例如宽 100 像素和高 100 像素，并将窗口定位在 -50、-50。我没有尝试过，但如果没有限制窗口尺寸大于屏幕尺寸，它可能是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T16:29:13.150

使用 JavaScript：

```
window.open ("http://stackoverflow.com", "","fullscreen=yes"); 
```

窗口的大小因浏览器而异，但实际上在 IE 中，您将拥有所需的行为......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T17:31:32.243

请不要调整用户的网络浏览器的大小。我将屏幕的其余部分用于其他事情，我认为许多用户也这样做。一个受人尊敬的网站位于浏览器放置的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T17:54:20.950

“例如像ajax之类的东西？” ...

**阿贾克斯！= Javascript。**

作为网站运营商，您的责任是有一定的礼貌并允许用户控制大小。

您可以阅读 screen.width 和 screen.height，如果它们远离 document.body.clientHeight 或 document.body.clientWidth，请提醒用户该页面应以全屏模式查看以及如何使其全屏显示（F12对于 IE - 我认为，对于 FF，F11）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T16:29:07.720

不，您不能使用 javascript 以这种方式控制浏览器。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-15T23:23:43.093

您可以指示您的用户使用 firefox 3，然后按 F11 进入全屏模式。如果鼠标不在屏幕顶部附近，标题栏将消失。

是的，它需要用户交互，但是如果他们想进入全屏模式，那么他们很容易在自己的力量下这样做，并在他们想离开的时候再次离开。

-亚当

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2010-06-23T15:32:15.593

好吧，我看到您正在尝试简单地拥有一个使页面全屏显示的按钮；类似于 youtube 全屏模式。

同样，我不建议使用“just hit `F11`”方法，因为 Safari 或一般 Mac 上的人将被排除在外。

您可以使用 C#，这可以通过下载 Visual Studio 或 MS Visual C#，甚至 CosmosBoot 来完成。C# 中有大量用于全屏应用程序的代码。C# 中全屏的另一个好处是它可以通过一些简单的 ASP 代码轻松嵌入到网页中。

您可以使用 java，这可能会非常缓慢，并且需要大量编码，但它是可以实现的。您可以使用数百个 IDE 或 JDK 中的一个，但我并没有真正使用 java，所以我不能在编程方面给您太多建议，但它比 C# 更容易嵌入，您所需要的一切是标签。

# javascript - 你如何管理你的 DojoX 代码？

> ID：292711
> 
> 赞同：5
> 
> 时间：2008-11-15T16:12:23.620
> 
> 标签：javascript, version-control, dojo

您如何管理在生产应用程序中对[DojoX](http://dojotoolkit.org/projects/dojox)代码或小部件的使用？

[Dojo Toolkit](http://dojotoolkit.org/)由Core、Dijit 和DojoX 组成。作为扩展工具包的新想法的孵化器，DojoX 代码和小部件的功能具有不同程度的不稳定性。

DojoX 代码如*[QueryReadStore](http://dojotoolkit.org/book/book-dojo/part-3-javascript-programming-dojo-and-dijit/using-dojo-data/available-stores/dojox-d)*（用于从服务器获取批量数据）或像*[Grid](http://dojotoolkit.org/book/dojo-book-0-9/docx-documentation-under-development/grid)*（用于利用用户界面网格组件）这样的小部件不包含在 Core 或 Dijit 中。但它们的功能足以在某些情况下使用，需要注意的是“开发人员要小心”，因为在未来的 Toolkit 版本中，API 或源代码树中的组件位置可能会发生变化。另一个问题是，您可能必须调整您正在使用的 DojoX 组件才能使其在您的环境中正常运行，因为代码中还没有高度的健壮性。

那么，您如何确保随着您使用的 DojoX 组件的发展，您的应用程序保持平稳运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-27T13:24:57.477

这可能是一个显而易见但涉及更多的解决方案……但是：参与进来！它实际上是一次熟悉 Dojo 的整体功能的最佳方式之一，教授了很多优秀的 JS-foo，并确保您掌握有关特定模块未来的内部信息。DojoX 的大部分内容是社区贡献的，旨在稳定和有用。审查、测试、修改代码的人越多——它就越有可能成功并变得稳定。

问候，彼得·希金斯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-19T03:08:35.527

有几种方法可以做到：

*   坚持使用一个版本的 Dojo 并始终如一地使用它。
*   将修改后的代码移动到您自己的命名空间并从那里包含它。
    *   实际上，它是现有 DojoX 模块的一个分支。所有代码同步和反向移植都是您的责任。
    *   注意 Dojo 的其余部分——如果它的变化导致你的分叉版本被破坏，那么也要准备好修补你的模块。
*   将修改后的文件复制到某处并在需要原始文件之前包含/需要它们。

为了说明后一种技术，假设我要修补位于 dojox/charting/abc.js 中的一个文件：

```
dojo.provide("dojox.charting.abc");
// the rest of the file
... 
```

我可以将它复制到我的目录中，例如 my/patched_abc.js，并使其看起来像这样：

```
dojo.provide("my.patched_abc");
// now I include the rest of the file with my modifications

dojo.provide("dojox.charting.abc");
// the rest of the file
... 
```

在我使用 dojox.charting 的代码中，我像这样包含它：

```
dojo.require("my.patched_abc");
// now I can include dojox.charting,
// which will use my patched dojox.charting.abc module

dojo.require("dojox.charting.Chart2D");
// the rest of the file
... 
```

请注意避免循环“要求”语句。

这种技术非常适用于反向移植和小型定制。如果您的更改比这更广泛，您应该考虑编写自己的模块。

# c# - 安全地从线程中引发事件

> ID：292715
> 
> 赞同：1
> 
> 时间：2008-11-15T16:17:04.483
> 
> 标签：c#, vb.net, multithreading

我在从非 UI 线程引发的事件方面遇到一些问题，因为我不希望在添加到 Form1 中的线程的每个事件处理程序上处理 If me.invokerequired。

我确定我已经在某处阅读过如何使用委托事件（在 SO 上），但我找不到它。

```
Public Class Form1

    Private WithEvents _to As New ThreadedOperation

    Private Sub Button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button.Click
        _to.start()
    End Sub

    Private Sub _to_SomthingHappend(ByVal result As Integer) Handles _to.SomthingHappend
        TextBox.Text = result.ToString //cross thread exception here
    End Sub

End Class

Public Class ThreadedOperation

    Public Event SomthingHappend(ByVal result As Integer)
    Private _thread As Threading.Thread

    Public Sub start()
        If _thread Is Nothing Then
            _thread = New Threading.Thread(AddressOf Work)
        End If
        _thread.Start()
    End Sub

    Private Sub Work()
        For i As Integer = 0 To 10
            RaiseEvent SomthingHappend(i)
            Threading.Thread.Sleep(500)
        Next
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T16:55:22.067

您从 Control 派生了您的类。有点不寻常，但如果控件实际上托管在窗体上，则可以使用 Me.Invoke() 来编组调用。例如：

```
 Private Delegate Sub SomethingHappenedDelegate(ByVal result As Integer)

  Private Sub Work()
    For i As Integer = 0 To 10
      Me.Invoke(New SomethingHappenedDelegate(AddressOf SomethingHappenedThreadSafe), i)
      Threading.Thread.Sleep(500)
    Next
  End Sub

  Private Sub SomethingHappenedThreadSafe(ByVal result As Integer)
    RaiseEvent SomthingHappend(result)
  End Sub 
```

如果此类对象实际上并未托管在表单上，​​则需要传递对表单的引用，以便它可以调用 Invoke()：

```
 Private mHost As Form

  Public Sub New(ByVal host As Form)
    mHost = host
  End Sub 
```

并使用 mHost.Invoke()。或 BeginInvoke()。

本书的最后一个技巧是使用你的主启动窗体作为同步对象。这并不完全安全，但在 99% 的情况下都有效：

```
 Dim main As Form = Application.OpenForms(0)
  main.Invoke(New SomethingHappenedDelegate(AddressOf SomethingHappenedThreadSafe), i) 
```

请注意，WF 中有一个错误会阻止 OpenForms() 在动态重新创建打开的表单时准确跟踪它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T18:04:28.230

如果您想简化所有这些，可以使用一个名为 BackgroundWorker 的类来为您处理 GUI 线程封送处理。

# delphi - 编写关键文本数据的技术

> ID：292717
> 
> 赞同：2
> 
> 时间：2008-11-15T16:19:01.000
> 
> 标签：delphi, windows-xp, mission-critical

我们从昂贵的实验中长时间（〜几天）获取类似文本/csv的数据，因此要不惜一切代价避免文件损坏。

最近，在进行实验时，从 XP 的资源管理器中复制了一个文件，并且部分数据丢失了，可能是由于多次访问冲突。

有什么好的技术可以避免这种损失？- 我们在 Windows XP 系统上使用 Delphi。

下面列出了我们提出的一些想法 - 我们欢迎您提出意见以及您自己的意见。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-11-15T16:20:31.107

使用数据库作为辅助数据存储机制并利用原子事务机制

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2008-11-15T16:33:51.050

如何将大文件拆分为单独的文件，每天一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-16T14:43:57.837

如果这些机器在网络上：将带有日志记录数据的 HTTP 帖子发送到网络服务器。（发送 UDP 数据包会更简单）。

确保只复制旧数据。如果文件名上有一个分辨率为 1 小时的时间戳，则可以安全地复制早于 1 小时的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T16:20:12.077

如果写入失败，则缓存结果以供以后写入 - 因此，如果文件在外部打开，数据仍然存储在内部，甚至可以存储到磁盘

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-16T09:03:57.713

I think what you're looking for is the Win32 [CreateFile](http://msdn.microsoft.com/en-us/library/aa363858(VS.85).aspx) API, with these flags:

FILE_FLAG_WRITE_THROUGH : Write operations will not go through any intermediate cache, they will go directly to disk.

FILE_FLAG_NO_BUFFERING : The file or device is being opened with no system caching for data reads and writes. This flag does not affect hard disk caching or memory mapped files. There are strict requirements for successfully working with files opened with CreateFile using the FILE_FLAG_NO_BUFFERING flag, for details see File Buffering.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-11-17T18:09:24.257

每个实验都使用一个“工作”文件和一个“完成”文件。工作文件以独占方式打开，完成文件复制到网络上的某个地方。接收机器上的应用程序会将这些文件输入数据库。如果资源管理器尝试移动或复制工作文件，它将收到“拒绝访问”错误。

“工作”文件将在一段时间后“完成”（例如，6/12/24 小时或任何时间段）。所以它创建另一个工作文件（名称必须包含时间戳）并通过网络发送“完成”（或者人类可以这样做，如果我正确理解你的文本，你实际上在做什么）。

在使用时复制文件是要求它被损坏。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-11-15T16:19:27.990

将数据写入隐藏目录中的缓冲区文件，并定期将数据复制到“公共”数据文件（例如每 10 个点），从而减少写入并提供备份

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2008-11-15T16:19:51.530

离散地写入数据点，即为每个数据点写入打开和关闭文件句柄 - 如果数据点之间的时间很短，这将减少访问文件的时间

# user-interface - 您的开发 UI 应该与最终产品有多少相似之处？

> ID：292722
> 
> 赞同：2
> 
> 时间：2008-11-15T16:25:02.487
> 
> 标签：user-interface, design-patterns

除了可能在更大（或更好）的商店，开发 UI 由开发人员完成。根据您的经验，这对最终产品有多大影响，我们应该花多少时间来正确开发 UI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T16:35:03.713

您正在构建并向客户展示的界面基本上就是他们所看到的一切。您可以与他们坐下来讨论产品应该做什么，但让用户发现问题或缺少功能的第一最佳方法是向他们展示最终产品中的界面. 您可以使用原型或正在构建的实际界面来执行此操作。

所以我会说界面应该看起来很像你在开发过程中最终交付的东西。这将保证你得到正确的反馈，并且用户知道他得到了什么。当然，您可以构建一个不完全具有最终产品样式（颜色、窗口样式、字体等）的界面，但是您正在构建的产品的功能应该尽早明确尽可能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T17:02:29.167

我喜欢在项目开始时花更多时间专注于软件的核心功能。如果您正确地将业务逻辑与表示逻辑分开（例如，使用 MVC），那么以后改进用户界面应该很容易。

我知道一些开发人员会故意让原型的用户界面看起来与最终产品中的不同。这在您进行演示时很有用，让客户清楚地知道他们所看到的只是一个原型。一个很好的例子是[Napkin Look and Feel](http://napkinlaf.sourceforge.net/)，一种可插入的 Java 外观和感觉，让您的用户界面看起来像是在餐巾纸上潦草地写的。Kathy Sierra 写[了一篇有趣的博客文章](http://headrush.typepad.com/creating_passionate_users/2006/12/dont_make_the_d.html)，说明你为什么要这样做。

# javascript - 如何阻止点击事件在 Javascript 函数中执行？

> ID：292723
> 
> 赞同：0
> 
> 时间：2008-11-15T16:25:08.103
> 
> 标签：javascript, onclick, prototypejs, dom-events

我正在尝试将 onclick 事件分配给单击另一个元素时已经存在的锚标记。但是，我尝试过的一切似乎都会导致在分配后立即触发事件。我们正在使用 Prototype 和 Scriptaculous。

这是功能：

```
<script type="text/javascript">     
    function loadData(step, dao_id) {
        var div_id = 'div_' + step;
        var anchor_id = 'step_anchor_' + step;
        var prv = step -1;

        switch(step) {
            case 1:
                var action = 'major_list';
                break;
            case 2:
                var action = 'alumni_list';
                break;
            case 3:
                var action = 'alumnus_display';
                break;
        }

        new Ajax.Request('awizard.php', {
                method: 'get',
                parameters: {action : action, dao_id : dao_id},
                onSuccess: function(data) {
                    $(div_id).innerHTML = data.responseText;
                    //$(anchor_id).observe('click', loadData(prv, dao_id, true));
                    //Event.observe(anchor_id, 'click', alert('I executed'));

                    showStep(step);

                    //$(anchor_id).onclick = loadData(prv, dao_id, true);
                    //$(anchor_id).observe('click', loadData(prv, dao_id, true));

                }
            }
        )                   
    }

    function showStep(step, toggleBack) {

        var div_id = 'div_' + step;
        if(!toggleBack) {
            if(step != 1) {
                var prv = step -1;
                Effect.SlideUp('div_' + prv, { duration:1, delay:0 });
            }

            Effect.SlideDown(div_id, { duration:1, delay:1 });
            Effect.Appear('step_anchor_' + step, { duration:1, delay:2 });
        } else {

            var prv = step -1;
            Effect.SlideDown('div_' + prv, { duration:1, delay:0 });
            Effect.SlideUp(div_id, { duration:1, delay:1 });
            Effect.Fade('step_anchor_' + step, { duration:1, delay:2 });
        }               
    }
</script> 
```

如您所知，我尝试了多种将 onclick 事件分配给锚标记的方法，但它们都不能正常工作。起初我假设锚标记上的 Effect.Appear 函数可以触发 onclick 事件，所以我尝试将事件分配移动到 showStep 函数之后，但这没有任何区别。此外，我尝试在分配后立即调用 stop() 函数，但这也没有任何区别。

我对此束手无策。有什么方法可以让我将 onclick 事件分配给锚标签，而不会自动触发事件？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T16:29:44.757

函数是 Javascript 中的第一类对象，这意味着您可以将它们分配给变量或将它们作为参数传递给其他函数。在您的代码中，您将函数调用与对函数的引用混淆了。

看看这段代码：

```
$(anchor_id).observe('click', loadData(prv, dao_id, true)); 
```

这是做什么的，它将调用“loadData”的结果传递给观察函数。您要做的是传递对函数调用的引用。您可以通过将代码更改为以下内容来轻松修复它：

```
$(anchor_id).observe('click', function() { loadData(prv, dao_id, true) } ); 
```

# ssl - 自签名 SSL 证书或 CA？

> ID：292732
> 
> 赞同：51
> 
> 时间：2008-11-15T16:31:46.373
> 
> 标签：ssl, self-signed, ca

我想加密我网站的身份验证和注册部分（出于显而易见的原因）。这个网站是目前和旧的网站，我和一些朋友从中学开始，至今仍在使用。在不久的将来，我可能会也可能不会将其注册为非营利组织，但无论哪种方式，CA 都需要花钱，而且该组织没有，而且我们目前是大学生。

威瑞信不合理，GoDaddy 每年 30 美元。GoDaddy 不是太不合理，我认为他们的证书被大多数网络浏览器接受。GoDaddy 的问题是我不知道他们为什么有不同的 SSL 产品（即：为什么不验证我很便宜？这对证书有任何影响吗？如果它只包含域名，浏览器如何处理它？ ?)

另外，使用我自己的证书有问题吗？登录页面是否可以是 http，并且有一行说明我使用自签名证书，这是指纹，然后将表单发布到 https 页面？Safari 的方法并不算太糟糕或听起来太吓人。然而，我担心 firefox 3 的方法会吓跑人们并给我大量的电子邮件，说我的网站被黑客入侵了。我不知道 IE 如何响应自签名证书。（还有一个问题，为什么要为我可以毫不费力地自己创造的东西付费，但我不会提出其中的哲学部分，这是一个更实际的问题。）

总而言之，我是每年给 GoDaddy 30 美元，还是只用一小段话告诉人们我在做什么，然后给少数真正想要我指纹的人？

编辑：我正在阅读更多信息的论坛上的一些人提到，只有在 GoDaddy 服务器上时才会提供 GoDaddy 证书，但事实并非如此。两件事：（1）这是真的吗？并且还有其他 CA 的价格大致相同，因此论点应该仍然相同。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2009-02-05T02:00:33.610

有一个普遍的误解，认为自签名证书本质上不如 GoDaddy 和 Verisign 等商业 CA 出售的证书安全，并且如果使用它们，您必须忍受浏览器警告/异常；**这是不正确的**。

*如果您安全地分发自签名证书（或 CA 证书，如 bobince 建议的那样）并将其安装在将使用您的站点的浏览器中，则*它与购买的证书一样安全，并且不易受中间人攻击攻击和证书伪造。显然，这意味着只有少数人需要安全访问您的站点（例如，内部应用程序、个人博客等）才可行。

为了提高认识并鼓励像我这样的小型博客作者保护自己，我编写了一个入门级教程，解释了证书背后的概念以及如何安全地创建和使用自己的自签名证书（完整带有代码示例和屏幕截图）[在这里](https://web.archive.org/web/20171109050255/http://www.clintharris.net/2009/self-signed-certificates/)。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2008-11-15T17:24:22.227

SSL 证书解决了两个目的：流量加密*（至少用于 RSA 密钥交换）*和信任验证。如您所知，您可以使用*（或不使用，如果我们谈论的是 SSL 3.0 或 TLS）*任何自签名证书来加密流量。但是信任是通过一系列证书来实现的。我不认识你，但我确实信任威瑞信（或者至少微软信任，因为他们已经支付了很多钱来默认将它安装在他们的操作系统中），并且由于威瑞信信任你，所以我信任你也。结果，当我在我的 Web 浏览器中访问这样的 SSL 页面时，没有可怕的警告，因为我信任的某个人说你就是你。

通常，证书越贵，颁发证书机构的调查就越多。因此，对于扩展验证证书，请求者必须提交更多文件以证明他们是他们所说的人，作为回报，他们会在现代 Web 浏览器中获得一个明亮、快乐的绿色条（我认为 Safari 与它还没有）。

最后，一些公司与威瑞信这样的大公司合作纯粹是为了品牌名称；他们知道他们的客户至少听说过 Verisign，因此对于在他们的在线商店购物的人来说，他们的印章看起来不像 GoDaddy 的那样简单。

如果品牌对您来说并不重要，或者您的网站不容易受到网络钓鱼攻击，那么您可以购买的最便宜的 SSL 证书（默认情况下在大多数 Web 浏览器中安装其根目录）就可以了。通常，唯一完成的验证是您必须能够回复发送给 DNS 管理联系人的电子邮件，从而“证明”您“拥有”该域名。

当然，您可以在非 GoDaddy 服务器上使用这些便宜的证书，但您可能必须首先在服务器上安装中间证书。这是一个介于 30 美元的廉价证书和 GoDaddy “真实交易”根证书之间的证书。访问您网站的 Web 浏览器会说“嗯，看起来这是用中间人签名的，你明白吗？” 这~~需要~~ *可能需要*额外的旅行。但是随后它会从您的服务器请求中间体，看到它链接到它知道的受信任的根证书，并且没有问题。

但是，如果您不允许在服务器上安装中间件（例如在共享主机场景中），那么您就不走运了。这就是为什么大多数人说 GoDaddy 证书不能在非 GoDaddy 服务器上使用的原因。不正确，但对于许多场景来说足够真实。

（在工作中，我们为我们的在线商店使用 Comodo 证书，并使用便宜的 30 美元 GoDaddy 证书来保护与数据库的内部连接。）

*以斜体*编辑，以反映埃里克森在下面的富有洞察力的澄清。每天学些新东西！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-15T16:52:21.510

[从Let's Encrypt](https://letsencrypt.org/)获得证书，这是一个新十年的免费 CA，被浏览器广泛支持。

~~我还没有尝试过，但在[回答类似问题](https://stackoverflow.com/questions/34968/best-cheapest-ssl-certificates#35039)时提到了[StartCom](https://www.startcomca.com/)。显然你可以免费获得一年的证书，它被 Firefox 3 接受。~~

即使您必须付费，我也建议您使用 CA 而不是自签名证书。有些人不会看到您的解释，假冒网站可能会像您建议的那样发布他们自己的假证书指纹。我怀疑普通用户是否知道证书指纹是什么或如何检查它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2008-11-15T17:00:07.563

与其创建自签名证书，不如创建一个自签名 CA，然后用它签署您的 HTTPS 证书。要求用户安装 CA 比单个服务器证书更容易，并且您可以创建新证书（例如，用于子域，或更新过期的证书），而无需用户再次安装服务器证书。

然后，您可以稍后决定是否值得花 30 美元从您自己的 CA 签名的证书切换到由 GoDaddy 或其他人签名的相同证书。

无论哪种方式，都不要有一个带有发布到 HTTPS 的表单的 HTTP 页面。用户看不到它要去的地方；他们必须查看源代码以检查表单是否被劫持以指向其他地方，并且没有人会这样做。您必须有一个带有 CA 链接的 HTTP 首页和一个指向 HTTPS 登录表单的单独链接。

要求用户安装一个通过普通 HTTP 下载的证书的 CA 有点淘气：如果有中间人，他们可以即时替换你的 CA 并劫持随后的 HTTPS 连接。实际发生这种情况的可能性非常低，因为它必须是有针对性的攻击，而不是普通的旧式自动嗅探，但实际上您应该将 CA 下载链接托管在其他一些受 HTTPS 保护的服务上。

客户接受度是只有您可以回答的问题，您知道您的用户是谁。当然，火狐的界面太吓人了。如果这些天像 GoDaddy 这样的 CA 降到 30 美元，我可能会选择它；它曾经很多，更糟。

假设对旧浏览器和小众浏览器的支持不是什么大问题，只需选择最便宜的 CA。您*应该*付费让 CA 正确验证您的身份，但实际上这不是它的工作方式，而且从未如此，因此为更彻底的检查支付额外费用几乎不会让您一无所获。威瑞信高昂的价格仅靠企业惯性生存下来。

CA 只需要拥有几百比特的私钥就可以收钱。本应属于 CA 授权的身份验证内容已移至 EV 证书。这更像是一个骗局。喜悦。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-11-15T17:05:28.020

自签名证书[是不安全的](https://www.gerv.net/security/self-signed-certs/)。对真的。“至少它是加密的”根本没有帮助。来自文章：

> 世界级加密*零认证=零安全

如果您的网站是为您和您的几个朋友准备的，那么您可以创建自己的 CA 并将您的证书分发给朋友。

否则要么从已知的 CA 获得证书（[免费](https://letsencrypt.org/)），要么根本不使用自签名证书，因为你得到的只是一种*虚假*的安全感。

* * *

为什么只是加密的流量不安全？您总是允许另一端解密您的流量（您必须这样做，否则您会发送乱码）。

**如果你不检查另一端的人，你就允许任何人解密你的流量。**如果您将数据安全或不安全地发送给攻击者，这并没有什么不同——攻击者无论如何都会获取数据。

我不是在谈论检查例如 paypal.com 是否属于值得信赖的金融机构（这是一个更大的问题）。我说的是检查您是在向 paypal.com 发送数据***，***还是只是向拐角处的一辆面包车发送证书，上面写着*“是的，我完全像 paypal.com，你相信这是真的！”*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-11-15T17:19:51.567

昨晚我终于崩溃了，将我的服务器从自签名证书切换到了 GoDaddy 证书，这没什么大不了的，除了他们的流程还不够清晰。每年 30 美元是一个合理的成本，在非 GoDaddy 服务器上使用证书不是问题。

如果您要与公众谈论 SSL，请获取由真实 CA 签名的真实证书。即使您正在为最低工资工作，您每年也可以节省超过 30 美元的浪费时间来处理用户的恐惧或不信任，这甚至还没有考虑到由于他们害怕离开您的网站而可能造成的任何收入损失。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-15T20:13:33.057

为了回答您关于 Internet Explorer 的问题，它会警告用户有关其证书未由 IE 已知（不幸地称为“受信任”）CA 签名的任何站点。这包括您自己的 CA 和自签名证书。如果证书中的域不是被访问的域，它也会发出警告。

如果这是一个私人网站，您可能不会在意，只要您获得链接级加密（您是否害怕有人嗅探您的流量？）。如果有公共访问权限并且您想要 SSL，则从公认的 CA 获取签名证书，正如其他人已经建议的那样。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-11-19T14:52:35.257

如果拐角处的那辆面包车已经能够劫持您的互联网连接，那么您遇到的问题比自签名证书更严重。

银行应使用客户证书进行身份验证。那将使那辆货车无法做任何事情……因为它没有银行私钥。

自签名证书非常好......假设您的互联网连接没有受到损害。如果您的连接*已*被破坏......无论如何，您可能都会受到困扰。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-11-18T10:49:11.773

GoDaddy 通过本网站上的“立即购买”链接以每年 15 美元的价格提供 SSL 证书。不要使用优惠券代码，因为这样价格会回到每年 30 美元，并从那里打折。

[http://www.sslshopper.com/ssl-certificate-comparison.html?ids=17,25,34,37,62](http://www.sslshopper.com/ssl-certificate-comparison.html?ids=17,25,34,37,62)

# c++ - 从文件中读取的 C++ 会阻止任何进一步的写入。为什么？

> ID：292740
> 
> 赞同：2
> 
> 时间：2008-11-15T16:42:04.653
> 
> 标签：c++, file-io, stream

我正在实现一个非常简单的文件数据库。我有2个基本操作：

```
void Insert(const std::string & i_record)
{
   //create or append to the file
    m_fileStream.open(m_fileName.c_str(), std::ios::out | std::ios::app);

    if (m_fileStream.is_open())
    {
        m_fileStream << i_record << "\n";
    }

    m_fileStream.flush();
    m_fileStream.close();
}

/*
* Returns a list with all the items in the file.
*/
 std::vector<std::string> SelectAll()
 {
    std::vector<std::string> results;

    m_fileStream.open(m_fileName.c_str(), std::ios::in);

    std::string line;
    if (m_fileStream.is_open())
    {
        while (!m_fileStream.eof())
        {
            getline (m_fileStream, line);
            results.push_back(line);

        }
    }

    m_fileStream.close();

    return results;
 } 
```

该类将 m_fileStream 和 m_fileName 作为私有成员。

好的 - 这是问题所在：

如果我这样做：

```
db->Insert("a");
db->SelectAll();
db->Insert("b"); 
```

最终结果是文件将*只*包含“a”；为什么？

注意：似乎 getline() 将设置失败位。但为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T17:01:57.793

改变

```
 while (!m_fileStream.eof())
    {
        getline (m_fileStream, line);
        results.push_back(line);

    } 
```

到

```
 while (getline (m_fileStream, line))
    {
        results.push_back(line);
    } 
```

否则最后你会得到一个额外的空行。`eof()`仅当您尝试读取文件末尾之后才会返回 true，而*不是*仅当下一次读取超出文件末尾时才会返回。

它设置了`failbit`因为`getline`尝试从流中提取字符。如果没有剩下的字符（并且`'\n'`还没有看到），`stream.get(c)`一个字符将设置`failbit`. 然后`getline`将设置`eofbit`然后`.eof()`将返回true，并且您的循环退出。

如果您不想`failbit`设置，则将您的条件从更改`!stream.eof()`为`stream.peek() != EOF`（并确保文件中有一个尾随换行符）。

现在这也是您问题的解决方案：`.close()`不是`.clear()`您的流，因此`failbit`如果您重新打开文件，仍然会设置。读完你的东西后打电话`stream.clear()`，然后它就可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T18:36:53.423

我认为 litb 非常成功。但只是添加我的 0.02 美元：

1）我一直喜欢：

```
while ( stream && (stream.peek() != EOF) )  {...} 
```

因为可能会发生除 EOF 之外的 [坏] 事件。

（而且，正如 litb 所提到的，peek()!=EOF 解决了流不设置 EOF 的问题，直到我们尝试读取末尾。）

.

2）由于“m_fileStream”在这两种方法中都被打开、读取/写入/刷新和关闭......

为什么不在堆栈上本地声明呢？这样做可以确保没有以前的状态问题留下来搞砸你。而且你访问磁盘，所以效率可能不是最大的问题......

此外，你可以偷懒：

```
ifstream stream ( m_fileName.c_str() );
ASSERT( stream, !=, NULL );  // Uses my own ASSERT macro && stream.operator().
while ( stream && (stream.peek() != EOF) )  {...} 
```

# calendar - 是否有以编程方式安排事件的已知模式？

> ID：292741
> 
> 赞同：3
> 
> 时间：2008-11-15T16:42:09.287
> 
> 标签：calendar, design-patterns, schedule, recurring

有没有人有一个已知的、可靠的解决方案来安排系统内的事件（即约会、会议等）。我在这里所说的“事件”是指需要一次性或重复完成并根据时间表执行的任务。我找到了 DevExpress 的调度 UI 组件，它对使用自定义对象有一些参考，但我认为一定有人已经很好地解决了这个问题。提前感谢大家的时间和精力。

拜伦克劳威尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T16:48:48.803

这是Ayende对 .NET 中调度的一个很好的[讨论。](http://ayende.com/Blog/archive/2007/11/11/Not-invented-here-useful-noneteless.aspx)

# c# - 如何防止 ASP.NET 3.5 SP1 覆盖我的操作？

> ID：292756
> 
> 赞同：1
> 
> 时间：2008-11-15T16:53:39.857
> 
> 标签：c#, .net, asp.net, .net-3.5

在我的母版页中`<form ... action="" ...>`，在 SP1 之前，如果我查看源，则操作属性将是一个空字符串。在 SP1 中，操作属性被覆盖“MyPage.aspx?MyParams”，不幸的是，这会导致我的回发失败，因为我在 URL 中有额外的路径信息（即 MyPage.aspx\CustomerData?MyParams）。我已经检查了 OnLoad 事件中的 action 属性，此时它仍然是空白的，所以 SP1 的某个地方覆盖了这个 :(。

抱歉，我刚刚意识到我的部分帖子丢失了，因为我没有正确使用降价。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T19:29:31.647

也许您可以在[此 ASP.NET 论坛帖子](http://forums.asp.net/t/1305800.aspx)（.NET 3.5 Service Pack 1 中 ASP.NET 的已知问题/重大更改）中找到解决方案。

## 问题

现在，在声明性标记中定义时，HtmlForm 操作属性得到尊重。

## 原因

3.5 SP1 向 HtmlForm 类型添加了一个可设置的 Action 属性。这一新功能使开发人员可以更轻松地为开发人员希望使用与正常回发生成的 Url 不同的 Url 的情况显式设置表单的操作属性。但是，此更改也意味着如果在 .aspx 页面的声明性标记中设置了 action 属性，则 ASP.NET 将在呈现`<form />`元素时使用标记中的设置。

## 解决方法

如果 action 属性出现在`<form />`元素的声明性标记中，则早期版本的 ASP.NET 总是忽略它。开发人员应从其声明性标记中删除 action 属性，以返回 ASP.NET 呈现回发 URL 的原始行为。

## 例子

之前（ASP.NET 将 action 属性作为死代码忽略）：

```
<form name="form1" method="post" runat="server" action="test.aspx"></form> 
```

3.5 SP1（删除 action 属性以让 ASP.NET 呈现回发 URL）：

```
<form name="form1" method="post" runat="server"></form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T16:23:52.730

MrJavaGuy 提供了很好的解决方案，但代码中有一个错字，因为在此处的框中粘贴代码并不总是能正常工作。WriteAttribute 方法有重复，更正的代码如下 -

```
public class HtmlFormAdapter : ControlAdapter 
{
    protected override void Render(HtmlTextWriter writer)
    {
        HtmlForm form = this.Control as HtmlForm;

        if (form == null)
        {
            throw new InvalidOperationException("Can only use HtmlFormAdapter as an adapter for an HtmlForm control");
        }
        base.Render(new CustomActionTextWriter(writer));
    }

    public class CustomActionTextWriter : HtmlTextWriter
    {
        public CustomActionTextWriter(HtmlTextWriter writer) : base(writer)
        {
            this.InnerWriter = writer.InnerWriter;
        }

        public override void WriteAttribute(string name, string value, bool fEncode)
        {
            if (name == "action")
            {
                value = "";
            }
            base.WriteAttribute(name, value, fEncode);      
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-24T17:19:26.400

我们最终所做的只是将操作用户过度使用控制适配器。这对我们有用，但**不是**通用解决方案。

```
public class HtmlFormAdapter : ControlAdapter
    {
        protected override void Render(HtmlTextWriter writer)
        {
            HtmlForm form = this.Control as HtmlForm;
            if (form == null)
            {
                throw new InvalidOperationException("Can only use HtmlFormAdapter as an adapter for an HtmlForm control");
            }

            base.Render(new CustomActionTextWriter(writer));
        }

        public class CustomActionTextWriter : HtmlTextWriter
        {
            public CustomActionTextWriter(HtmlTextWriter writer) : base(writer)
            {
                this.InnerWriter = writer.InnerWriter;
            }

            public override void WriteAttribute(string name, string value, bool fEncode)
            {
        public override void WriteAttribute(string name, string value, bool fEncode)
        {
    if (name == "action")
    {
        value = "";
    }       
            base.WriteAttribute(name, value, fEncode);  //// override action
        }
    } 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-12-18T21:00:18.013

这可能是一个旧线程，但我设法找到了一个有趣的 hack。只需将表单的操作设置为“#”，这似乎可以毫无问题地发回重写的 url。

# unit-testing - 你在哪里取笑 - 直接依赖，或者你扩大界限......？

> ID：292767
> 
> 赞同：0
> 
> 时间：2008-11-15T17:02:48.293
> 
> 标签：unit-testing, mocking, integration-testing

所以，我对 C# 和 .NET 中的单元测试和模拟都相当陌生；我分别使用 xUnit.net 和 Rhino Mocks。我是一个皈依者，我想我专注于编写行为规范，而不是纯粹的 TDD。呸，语义；本质上，我想要一个自动安全网在上面工作。

一个想法让我印象深刻。我得到了针对接口的编程，而分解依赖项的好处就在那里。卖。但是，在我的行为验证套件（又名单元测试;-)）中，我一次断言一个接口的行为。就像一次一个接口的实现一样，它的所有依赖项都被模拟出来并建立了期望。

这种方法似乎是，如果我们验证一个类的行为与它的协作依赖项一样，并且反过来依赖于每个协作依赖项来签署相同的质量合同，那么我们就很成功了。似乎足够合理。

不过，回到这个想法。在半集成测试中是否有任何价值，其中测试夹具针对连接在一起的具体实现单元进行断言，并且我们正在针对模拟依赖项测试其内部行为？我刚刚重读了一遍，我想我可能会措辞更好。显然，我想会有一定数量的“好吧，如果它为您增加价值，请继续这样做” - 但有没有其他人考虑过这样做，并从中获得超过成本的收益？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-15T18:04:59.180

您的问题已经争论了多年，也可以改写为“什么是单位”？

没有单元测试法则规定您需要单独测试每个类。但是，为了可维护，您真正希望测试只需要在它们测试的行为发生变化时发生变化。以这种方式来看，使用具体版本的密切合作者和假货用于更远的合作者通常是合理的。

我绝对使用一种或另一种假货的一个地方是遵循 Michael Feather 的[单元测试规则](http://www.artima.com/weblogs/viewpost.jsp?thread=126923)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-15T07:15:59.550

我看不到将完全可单元测试的内部类链接在一起的集成测试的价值。

在我看来，集成测试的价值在于它触及平台或外部接口的地方，即您无法进行单元测试的合同。

# math - 计算沿路径的旋转

> ID：292774
> 
> 赞同：3
> 
> 时间：2008-11-15T17:12:23.390
> 
> 标签：math, animation, 3d, trigonometry

我正在尝试为一个对象设置动画，假设它是一辆汽车。我希望它从点开始

*x1,y1,z1*

指向*x2,y2,z2*。它移动到这些点，但它似乎是在*漂移*而不是指向运动方向。所以我的问题是：如何在我的 updateframe() 事件中解决这个问题？你能给我指出一些好的资源的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-19T18:33:15.940

首先，您如何代表道路？

我最近做了这件事，我在道路上使用了[Catmull-Rom](http://en.wikipedia.org/wiki/Cubic_Hermite_spline)样条线。要定向对象并使其遵循样条线路径，您需要从沿着样条线的*t插入当前**x、y、z*位置，然后将其沿 Frenet 坐标系或[Frenet 框架](http://en.wikipedia.org/wiki/Frenet_Frame#Frenet_frame)定向到该特定位置。

 *基本上，对于每个点，您需要 3 个向量：切线、法线和副法线。切线将是您希望对象（汽车）指向的实际方向。

我选择 Catmull-Rom 是因为它们很容易在任何点扣除切线 - 只需将其他 2 个邻近点与当前点之间的（向量）差值。（假设你在*t*，选择*t-epsilon*和*t+epsilon* - 其中 epsilon 是一个足够小的常数）。

对于其他 2 个向量，您可以使用[这种迭代方法- 也就是说，您从一端的一组已知向量开始，然后在每个](http://www.cs.cmu.edu/afs/andrew/scs/cs/15-462/web/old/asst2camera.html)*updateframe()*的基础上工作一个新的集合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T17:31:11.713

您需要计算出汽车的初始方向，以及汽车在目的地的最终方向，然后在它们之间进行插值以确定当前时间步长之间的方向。

[本文](http://www.gamasutra.com/features/19980703/quaternions_01.htm)描述了插值背后的数学原理，以及与旋转对象有关的一些其他可能对您有用的事情。一般来说，gamasutra.com 是这类事情的绝佳资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T17:41:20.210

我认为插值会给你看到的漂移。您需要对转向的工作方式进行建模..您的更新功能应该 1) 始终沿其指向的方向移动汽车 2) 将汽车转向当前目标 .. 一个不应该影响另一个，以便转弯将比到达更快地发生和完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-19T17:50:34.450

一般来说，汽车指向的方向是沿着它的*速度向量*，这是它的*位置*向量的一阶导数。

例如，如果汽车每*n*秒绕原点绕一圈（半径为*r ），则汽车位置的**x*分量由下式给出：

 **```
x = r.sin(2πt/n) 
```

其速度矢量的*x*分量将是：

```
vx = dx/dt = r.(2π/n)cos(2πt/n) 
```

对所有*x*、*y*和*z*分量执行此操作，对结果向量进行归一化，然后您就有了方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-20T05:05:29.190

始终将汽车指向目的地既简单又便宜，但如果汽车沿着弯曲的路径行驶，它就行不通了。在这种情况下，您需要将汽车沿**切线**指向其当前位置（参见上面的其他答案）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-02-09T13:20:06.890

going from one position to another gives an object a velocity, a velocity is a vector, and normalising that vector will give you the direction vector of the motion that you can plug into a "look at" matrix, do the cross of the up with this vector to get the side and hey presto you have a full matrix for the direction control of the object in motion.

# c# - HttpWebRequest/HttpWebResponse 和 cookie 的问题

> ID：292778
> 
> 赞同：6
> 
> 时间：2008-11-15T17:16:45.177
> 
> 标签：c#, .net

我在使用 HttpWebRequest/HttpWebResponse 和 cookie/CookieContainer/CookieCollection 时遇到问题。问题是，如果 Web 服务器未在 cookie 中发送/使用“路径”，则 Cookie.Path 等于请求 URI 的路径部分，而不是“/”或在我的应用程序中为空。因此，这些 cookie 不适用于整个域，它实际上在适当的 Web 浏览器中起作用。任何想法如何解决这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T20:46:45.547

啊，我明白你的意思了。通常浏览器*真正*做的是将包含文档的文件夹作为路径；对于 '/login.php' 这将是 '/' 所以它可以在整个域中有效地工作。'/potato/login.php' 将被限制为 '/potato/'; 任何带有尾随路径信息部分（例如'/login.php/'）的东西都不起作用。

在这种情况下，Netscape 规范可能被认为是错误的，或者至少在声称路径默认为当前文档路径时具有误导性……这取决于您在那里阅读“路径”的准确程度。然而，浏览器的行为与最初的 Netscape 版本是一致的。网景从来没有那么擅长编写规范……

如果 .NET 的 HttpWebRequest 真的默认 CookieContainer.Path 为当前文档的*整个*路径，我会针对它提交一个错误。

不幸的是，标准文档中当前并未实际描述现实世界的行为……有 RFC 2965，它确实使路径正确，但进行了其他一些不代表现实世界浏览器行为的更改，因此这并不完全可靠任何一个。:-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-16T03:29:00.977

似乎我无法进一步使用默认的 cookie 处理程序，所以我很生气，我很难做到。哈哈。所以自己解析 response.Headers["Set-Cookie"] 是我的解决方案。不是我喜欢的，但它有效。我只是简单地消除了使用正则表达式以错误的逗号分隔的问题。

If I could give out points here, I would give you some of them, bobince, because you gave me valuable information. I would also vote up if I could (need higher rep. score), but since this behavior probably is a bug, as you mentioned, I will accept that as an answer.

Thank you. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T17:42:10.023

这就是cookies的工作方式。“正确的”网络浏览器的功能与最初在古代 Netscape cookie 文档中指定的完全相同：http: [//cgi.netscape.com/newsref/std/cookie_spec.html](http://cgi.netscape.com/newsref/std/cookie_spec.html)

Web 应用程序必须*始终*有效地设置“路径”（通常是“/”）。

# vba - 编程 Excel 时将选择设置为无

> ID：292779
> 
> 赞同：32
> 
> 时间：2008-11-15T17:18:46.387
> 
> 标签：vba, excel

当我在使用 range.copy 和 range.paste 之后创建图表时，它会选择粘贴范围，然后当我在几行之后创建图表时，它会将选择用作图中的第一个系列。我可以删除该系列，但有更优雅的方法吗？我试过

```
Set selection = nothing 
```

但它不会让我设置选择。我也尝试了 selection.clear，但这只是清除了最后选择的单元格，并且仍然在情节中添加了一个额外的系列。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2010-09-25T15:08:12.320

```
Application.CutCopyMode = False 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-11-15T21:43:03.250

```
Cells(1,1).Select 
```

它会将您带到单元格 A1，从而取消您现有的选择。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-11T12:27:15.493

只需使用

> 发送键“{ESC}”

从而取消您的选择。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-11-25T13:30:43.867

选择任何单元格并关闭剪切复制模式。

```
Range("A1").Select
Application.CutCopyMode = False 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-01-26T18:15:04.650

有一种方法可以解决您的问题。

1.  创建一个形状（一个矩形）
2.  在形状数据库中将其命名 >>> 例如：“Ready”
3.  参考它 MYDOC.Shapes("Ready") 并将可见性更改为 False

当您想要 Excel SELECT NOTHING 时，请执行以下操作：

```
MYDOC.Shapes("Ready").visible=True
MYDOC.Shapes("Ready").Select
MYDOC.Shapes("Ready").visible=False 
```

这隐藏了选择，并且在您的窗口中仍然没有选择任何内容 PLUS：“就绪”一词显示在工作表的左上角。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-03-21T00:56:01.550

您可以在最后简单地使用此代码。（不要使用假）

```
Application.CutCopyMode = True 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-11-15T17:59:48.443

我不认为这是可以做到的。以下是从 Chip Pearson 网站复制的一些代码，未经修改：[http](http://www.cpearson.com/excel/UnSelect.aspx) ://www.cpearson.com/excel/UnSelect.aspx 。

取消选择活动单元格

此过程将从选择中删除活动单元格。

```
Sub UnSelectActiveCell()
    Dim R As Range
    Dim RR As Range
    For Each R In Selection.Cells
        If StrComp(R.Address, ActiveCell.Address, vbBinaryCompare) <> 0 Then
            If RR Is Nothing Then
                Set RR = R
            Else
                Set RR = Application.Union(RR, R)
            End If
        End If
    Next R
    If Not RR Is Nothing Then
        RR.Select
    End If
End Sub 
```

取消选择当前区域

此过程将从选择中删除包含活动单元格的区域。

```
Sub UnSelectCurrentArea()
    Dim Area As Range
    Dim RR As Range

    For Each Area In Selection.Areas
        If Application.Intersect(Area, ActiveCell) Is Nothing Then
            If RR Is Nothing Then
                Set RR = Area
            Else
                Set RR = Application.Union(RR, Area)
            End If
        End If
    Next Area
    If Not RR Is Nothing Then
        RR.Select
    End If
End Sub 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-11-02T06:35:36.847

尝试了你所有的建议，没有运气，但这是一个对我有用的想法，从你的选择范围中选择一个单元格（比如 AAA1000000），然后再次选择 A1

范围（“AAA1000000”）。激活

范围（“A1”）。激活

盖伊

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2010-10-03T07:27:56.470

在 Excel 2007 中，使用 select 和 CutCopyMode 属性的组合，可以重置所有选择。它适用于我的用例。

```
Application.CutCopyMode = xlCopy
ActiveSheet.Range("A" & lngRow).Select 
```

问候马杜尔

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-07-20T16:46:33.030

我在 Excel 2013 中遇到了这个问题。我设置了“冻结窗格”，这导致了这个问题。当我删除冻结的窗格时，问题得到了解决。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-07-01T13:15:35.510

**如果您在已选择的范围内选择一个单元格，**它将不起作用。但是，选择原始选择之外的范围将清除原始选择。

' *** 原始选择 *** ' ActiveSheet.range("A1:K10").Select

' *** 新选择 *** ' Activesheet.Range("L1").Select

' *** 然后 *** ' Activesheet.Range("A1").Select

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-13T20:25:14.883

```
Sub MyFunc()

    Range("B6").Select

    Selection.Locked = True

End Sub 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-03-16T09:14:47.967

您可以设置`Application.ScreenUpdating = False`并选择一个不可见的单元格，然后将其设置`.ScreenUpdating`为true。这至少不会在当前视图中显示任何选定的单元格。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-11-25T13:55:33.760

`Selection(1, 1).Select`将仅选择当前选择的左上角单元格。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-20T13:07:02.290

如果使用按钮调用粘贴过程，

尝试在操作后激活按钮。这成功清除了选择

没有

*   不得不摆弄隐藏的东西
*   选择另一个单元格（这与所要求的完全相反）
*   影响剪贴板模式
*   有按退出的hacky方法，这并不总是有效

高温高压

```
Sub BtnCopypasta_Worksheet_Click()
   range.copy
   range.paste
BtnCopypasta.Activate
End sub 
```

高温高压

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-28T04:51:09.877

`Application.CutCopyMode`没有一个对我有用或`.Select`对我有用的答案。

但我确实找到了一个未在此处发布的解决方案，这对我来说非常有用！

来自 StackExchange SuperUser：[需要 Excel VBA “取消选择”](https://superuser.com/questions/469720/excel-vba-unselect-wanted)

> 如果您真的不想要“未选择任何内容”，您可以在代码执行结束时使用 VBA 保护工作表，这将导致未选择任何内容。您可以将其添加到宏中，也可以直接将其放入 VBA。

```
Sub NoSelect()
   With ActiveSheet
   .EnableSelection = xlNoSelection
   .Protect
   End With
End Sub 
```

> 一旦工作表不受保护，光标就会激活一个单元格。

希望这可以帮助有同样问题的人！

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-08-04T03:15:09.967

做如下声明：

```
ActiveSheet.Cells(ActiveWindow.SplitRow+1,ActiveWindow.SplitColumn+1).Select 
```

# asp.net - 如何将 JQuery 与母版页一起使用？

> ID：292787
> 
> 赞同：30
> 
> 时间：2008-11-15T17:28:51.017
> 
> 标签：asp.net, jquery, master-pages

只要不涉及母版页，我就可以获得简单的示例来正常工作。我要做的就是单击一个按钮，并使用母版页在 .js 文件中使用 javascript 说“hello world”。非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-11-15T18:00:45.587

**编辑**

正如@Adam 在评论中指出的那样，有一个本机 jQuery 机制，它基本上与我原始答案中的 hack 做同样的事情。使用 jQuery 你可以做到

```
 $('[id$=myButton]').click(function(){ alert('button clicked'); }); 
```

我的 hack 最初是作为 ASP.NET 的原型工作开发的，我将其改编为原始答案。请注意，jQuery 基本上在底层做同样的事情。不过，我建议使用 jQuery 方式，而不是实现我的 hack。

**原始答案留给评论上下文**

当您使用母版页时，ASP.NET 会破坏相关页面上控件的名称。您需要找到一种方法来找到正确的控件来添加处理程序（假设您使用 javascript 添加处理程序）。

我使用这个函数来做到这一点：

```
function asp$( id, tagName ) {
    var idRegexp = new RegExp( id + '$', 'i' );
    var tags = new Array();
    if (tagName) {
        tags = document.getElementsByTagName( tagName );
    }
    else {
        tags = document.getElementsByName( id );
    }
    var control = null;
    for (var i = 0; i < tags.length; ++i) {
       var ctl = tags[i];
       if (idRegexp.test(ctl.id)) {
          control = ctl;
          break;
       }
    }

    if (control) {
        return $(control.id);
    }
    else {
        return null;
    }
} 
```

然后您可以执行以下操作：

```
jQuery(asp$('myButton','input')).click ( function() { alert('button clicked'); } ); 
```

您的子页面上有以下内容

```
<asp:Button ID="myButton" runat="server" Text="Click Me" /> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-11-19T01:59:27.537

如果您的站点在其他文件夹中有内容页面，`ResolveUrl`在 src 路径中使用 Page 的方法将确保始终可以找到您的 js 文件：

```
<script type="text/javascript" src='<%= ResolveUrl("~/Scripts/jquery-1.2.6.min.js") %>' ></script> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2009-03-18T20:24:27.517

确保将 jQuery 添加到母版页中。鉴于您拥有此控制权：

```
<asp:Button ID="myButton" runat="server" Text="Submit" /> 
```

您可以使用以下方法连接 javascript：

```
$(document).ready(function() {
    $('[id$=myButton]').click(function() { alert('button clicked'); });
}); 
```

`$(document).ready()`当 DOM 完全加载时触发，并且所有元素都应该在那里。您可以进一步简化它

```
$(function() {}); 
```

选择器语法`$('[id$=myButton]')`根据元素的 id 属性搜索元素，但只匹配字符串的结尾。相反，`'[id^=myButton]'`会匹配开头，但为了过滤掉唯一的ID，这不是很有用。有许多更有用的选择器可以与 jQuery 一起使用。[全部学习它们](http://docs.jquery.com/Selectors)，您的很多工作都会为您完成。

问题是 ASP.Net 为每个元素创建了唯一的 id 和 name 属性，这使得查找它们变得困难。过去，您需要将 UniqueID 属性从服务器传递给 javascript，但 jQuery 使这变得不必要。

借助 jQuery 选择器的强大功能，您可以将 javascript 与服务器端完全分离，并直接在您的 javascript 代码中连接事件。您不必再将 javascript 添加到标记中，这有助于提高可读性并使重构变得更加容易。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-11-15T17:58:04.217

只需将`<script type="text/javascript" src="jquery.js" />`标记移动到母版页中的 head 标记中。然后您可以在所有内容页面中使用 jquery。

在 jQuery 中使用母版页没有什么神奇之处。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2010-02-26T17:10:22.823

亚当的解决方案是最好的。简单的！

母版页：

```
<head runat="server">    
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <script src="Scripts/jquery-1.3.2.js" type="text/javascript"></script>
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>    
</head> 
```

内容页：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">       
<script type="text/javascript">
    $(document).ready(function () {
        $("[id$=AlertButton]").click(function () {
            alert("Welcome jQuery !");
        });
    }); 
</script> 
</asp:Content> 
```

按钮在哪里

```
<asp:Button ID="AlertButton" runat="server" Text="Button" /> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-11-15T20:03:12.873

引用 MasterPage 头部的 Jquery .js 文件如下：

```
<script type="text/javascript" src="/Scripts/jquery-1.2.6.min.js"></script> 
```

（有些浏览器不喜欢以 /> 结尾）

然后你可以写像

```
$('#<%= myBtn.ClientID%>').show() 
```

在您的 javascript 中，确保在您的客户端代码中引用 ASP.Net 控件时使用 ClientId。这将处理控件名称和 ID 的任何“修改”。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-11-15T18:20:42.067

母版页：

jQuery 库位于母版页中。查看路径是否被正确引用。您可能希望像这样添加额外的文档：

```
<head>
    <script type="text/javascript" src="/Scripts/jquery-1.2.6.min.js"></script> 
    <% if (false) { %>
    <script type="text/javascript" src="/Scripts/jquery-1.2.6-vsdoc.js"></script>
    <% } %>
</head> 
```

母版页：

```
<head>
<script type="text/javascript">
    $(document).ready(
        function()
        {
            alert('Hello!');
        }
    );
</script>
</head> 
```

内容页面和用户控件的 CodeBehind：

```
this.textBox.Attributes.Add("onChange",
    String.Format("passElementReferenceToJavascript({0})", this.textBox.ClientID)); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-11-15T19:33:17.927

看看这篇文章：

[http://blogs.msdn.com/webdevtools/archive/2008/10/28/rich-intellisense-for-jquery.aspx](http://blogs.msdn.com/webdevtools/archive/2008/10/28/rich-intellisense-for-jquery.aspx)

还解释了如何在 Visual Studio 中为 jQuery 获取智能感知。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-01-17T16:58:02.560

如果有人想访问标签，这里是语法

```
$('[id$=lbl]').text('Hello'); 
```

标签 ID在哪里`lbl`，标签中显示的文本是“Hello”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-16T09:55:44.037

当页面与母版页面一起呈现时，控件 ID 在页面呈现时会发生变化，因此我们不能像这样在 jQuery 中引用它们`#controlid`。相反，我们应该尝试使用`input[id$=controlid]`. 如果控件呈现为输入控件，或者作为锚标记`a[id$=controlid]`在 jQuery 中使用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-07-24T14:02:04.787

我也从最简单的例子开始，但没有运气。我最后不得不在母版页部分之外*添加jquery .js 文件。*`<head>`这是我可以在 Firefox 中使用任何东西的唯一方法（还没有尝试过其他浏览器）。

我还必须使用绝对地址引用 .js 文件。不完全确定那是怎么回事。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-03-27T20:54:39.030

Adam Lassek 与使用 jQuery 选择器相关联，尽管我认为它值得明确地通过他们的类调用选择元素，而不是他们的 id。

例如，而不是`$("#myButton").click(function() { alert('button clicked'); });`

改为使用`$(".myButtonCssClass").click(function() { alert('button clicked'); });`

并将类添加到按钮：

```
<asp:Button ID="myButton" runat="server" Text="Submit" CssClass="myButtonCssClass" /> 
```

除了能够一次将相同的 jQuery 代码应用到多个控件（具有相同的 css 类）之外，这样做的好处是不必担心两个控件 id 是否以相同的方式“结束”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-12-19T19:48:09.483

*   问题 --> 使用 Site.Master 页面时，控件 ID 名称（对于 ASP 控件）获取以它们为前缀的 ContentPlaceHolderID。（请注意，这对于非 asp 控件来说不是问题，因为它们不会被“重新解释”——即它们只是以书面形式出现）

*   解决方案：

    *   1.  最简单的 --> 将 ClientIDMode="Static" 添加到 aspx 页面中的 asp 控件定义（或使用属性设置）
    *   替代方案包括：
    *   2.  在 js 代码中硬编码 ContentPlaceHolderID 名称，例如“#ContentPlaceHolder1_controlName” - eek!!!!
    *   3.  在 ASP 页面中使用 <%= controlName.ClientID %> - 再加上，将它分配给一个变量（或变量对象）。然后可以在外部 js 页面中使用变量（或对象点表示法）（注意：不能在外部 js 中使用 <%= controlName.ClientID %>）
    *   4.  Using CssClass with a unique(same name as ID) in ASP page and refering to the control as ".controlName" instead of "#controlName"
    *   5.  Using the "[id$=_controlName]" instead of "#controlName" - this is involves a small search and is looking for a control that ends with the unique name - that way the start is irrelevant

# database - 过度规范化

> ID：292797
> 
> 赞同：31
> 
> 时间：2008-11-15T17:34:23.673
> 
> 标签：database, rdbms, normalization

何时将数据库设计描述为过度规范化？这种特征是绝对的吗？还是取决于它在应用程序中的使用方式？谢谢。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2008-11-15T17:44:13.187

在一般意义上，我认为过度规范化是指当您执行如此多的 JOIN 来检索数据时，它会导致显着的性能损失和数据库死锁，即使您已经调整了索引。显然，对于像 MySpace 或 eBay 这样的大型应用程序和网站，去规范化是一项扩展需求。

作为几家小型企业的开发人员，我告诉你，根据我的经验，从规范化 -> 非规范化总是比反过来更容易，实际上反过来（为了避免数据重复，现在业务大约一年后要求发生了变化）要困难得多。

当我读到诸如“您应该将地址放在客户表中而不是单独的地址表中以便避免加入”之类的一般性陈述时，我不寒而栗，因为您只知道一年后有人会要求您这样做带有您完全没有预见到的地址的东西，例如维护审计跟踪或为每个客户存储多个地址。如果您的数据库允许您创建索引视图，则您可以回避该问题，直到您的数据集如此之大以至于它不可能存在或由单个服务器或一组服务器提供服务 1-写，多读环境。对于我们大多数人来说，我认为这种情况不会经常发生。

当有疑问时，我的目标是第三范式，但有一些例外（例如，让一个字段包含一个分隔字符串的 CSV 列表，因为我知道我永远不会从另一个角度查看数据）。当我需要整合时，我会先查看我的视图或索引。希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-15T17:47:04.537

这始终是应用程序领域的问题。这通常是一个正确性问题，但有时是一个性能问题。

在一种情况下，我可以想到一个过度规范化的初步案例：假设您有一个订单 + 订单项，订单项引用 productID，并将定价留给 product.price。由于这引入了时间耦合，因此您错误地进行了标准化，因为过度标准化会影响已发货的订单，除非价格绝对不会改变。您当然可以争辩说这只是一个建模错误（如评论中所示），但在大多数情况下，我也将归一化不足视为建模错误。

另一类与性能相关。原则上，我认为通常有比非规范化数据更好的性能解决方案，例如物化视图，但如果您的应用程序遭受许多连接的性能后果，那么评估非规范化是否可以帮助您可能是值得的。我认为这些案例经常被过分强调，因为人们有时会在正确分析他们的应用程序之前达到非规范化。

人们还经常忘记替代方案，例如保持数据库的规范形式并使用仓储或其他策略来处理经常读取但不经常更改的数据。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-11-15T18:05:31.100

标准化是绝对的。数据库遵循范式，或者不遵循。有六种范式。大多数情况下，他们的名字从第一到第五。另外还有一个 Boyce-Codd 范式。

规范化的存在正是为了一个目的——防止“更新异常”。

标准化不是主观的。这不是判断。每个表和表之间的关系要么遵循标准形式，要么不遵循标准形式。

因此，您不能“过度规范化”或“规范化不足”。

话虽如此，归一化有性能成本。有些人选择以各种方式进行非规范化以提高性能。最常见的合理非规范化是打破 3NF 并包含派生数据。

一个常见的错误是破坏 2NF 并在键值和非键值之间存在函数依赖的重复副本。这需要额外的更新或者——更糟糕的是——触发以保持副本并行。

事务性数据库的非规范化应视具体情况而定。

数据仓库也很少遵循任何事务规范化规则，因为它（基本上）从未更新。

“过度规范化”可能意味着数据库由于大量连接而太慢。这也可能意味着数据库已经超出了硬件。或者应用程序没有被设计为可扩展的。

这里最常见的问题是人们在交易进行时尝试使用交易数据库进行报告。事务的锁定会干扰报告。

然而，“归一化不足”意味着存在 NF 违规，并且正在进行不必要的处理来处理复制数据和纠正更新异常。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-11-15T17:41:51.677

当性能成本超过对应用程序预期目的的收益时。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2011-08-25T02:33:31.433

规范化您的 OLTP 数据库，并非规范化您的 OLAP 数据库。每个人都有一个决定其架构的使命。与规范化事务数据库一样，数据仓库的存在是有原因的。一个完整的系统需要两者。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-11-17T16:17:52.640

很多人都在谈论性能。我认为一个关键问题是灵活性。一般来说，你的数据库越规范化，它就越灵活。

我们目前使用“过度规范化”的数据库，因为在我们的操作环境中，客户需求每月都会发生变化。通过“过度规范化”，我们可以相应地采用我们的软件，而无需更改数据库结构。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-11-15T18:06:44.233

我对此的看法：

总是尽可能地标准化。我通常对规范化很着迷，并尝试设计一些可以处理所有可以想到的未来扩展的东西。我最终得到的是一个非常灵活的数据库设计......而且不可能实现。

然后真正的工作开始了：去规范化。在这里，您解决了您所知道的实施有问题和/或由于连接过多而会减慢查询速度的问题。

这样你就知道你为了什么让设计可用。

编辑：文档！我忘了提到记录非规范化非常重要。当您接管一个项目以了解选择背后的原因时，这非常有帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-07-24T21:36:49.260

第三范式（**3NF**）被认为是许多合理的数据库应用程序的最佳规范化级别。在这种状态下，[正如 Bill Kent 曾经总结](http://www.bkent.net/Doc/simple5.htm)的那样，每个*“非关键字段 [在特定关系数据库管理系统或 RDBMS 中的每个表中] 都必须提供关于键、整个键的事实，而且仅钥匙。”* 3NF 是[由 EF Codd 引入的术语](https://en.wikipedia.org/wiki/Third_normal_form)，数据库管理关系模型的发明者。通常，软件应用程序所依赖的数据，尤其是用于在线事务处理系统 (OLTP) 的应用程序，将在 3NF 中表现良好。根据定义，这种范式通过要求行/列数据的最小重复来减小数据库大小，并最大限度地提高查询效率和应用程序维护的便利性。3NF 通过要求将数据库的表（即它的模式）分解为由主键/外键关联的单独表来实现这一点——基本上直到 Kent 的规则成立（好吧，为了便于阅读，我已经这样说了，但是3NF 的实际定义比这要详细得多）。相反，**过度规范化意味着增加相关表之间的查询所需的连接数。**这是因为将数据库模式分解为比 3NF 更细化的级别。然而，尽管超过 3 度的归一化通常可以被认为是过度归一化，但“过度归一化”一词的负面含义有时可能是没有根据的。由于应用程序软件的复​​杂性和多功能性，在某些设计上需要 4NF（及以上）的应用程序中可能需要过度规范化。这方面的一个例子是针对某些行业的高度可定制和可扩展的商业数据库程序，在该程序中它被出售给需要开放 API 的最终用户。但是反过来也可能是可取的——即非规范化——最值得注意的是，在设计在线分析处理 (OLAP) 数据库时，该数据库严格用于汇总 OLTP 数据库中的数据，仅用于查询/报告——例如数据仓库。在这种情况下，数据必须以高度非规范化的格式（即 1NF 或 2NF）存在。通常在这些限制下——当对高效查询和报告有很高的要求时——我们发现数据库和应用程序程序员调用数据库，“过度规范化”。但是作为[Redgate的 Tony Davis 曾经说过](https://www.red-gate.com/simple-talk/blogs/the-myth-of-over-normalization/)——考虑到当今更先进、更高效的数据库软件和存储系统——“查询中的多个连接对性能的影响可以忽略不计。如果你的数据库很慢，那不是因为它”过度标准化'！” 所以总而言之，这种特性——超标准化——不是绝对的，它取决于它在应用程序中的使用方式。[用肯特的话来说](http://www.bkent.net/Doc/simple5.htm)，“*规范化规则旨在防止更新异常和数据不一致。. . [但是] 在考虑到实际绩效要求时，没有义务对所有记录进行完全规范化。. . 规范化设计通过最小化冗余和不一致性来增强数据的完整性，但对于某些检索应用程序可能会带来一些性能成本。. . [因此，] 标准化的可取性必须根据其对检索应用程序的性能影响进行评估。*"

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-11-15T17:51:38.663

[..或达到您的 RDBMS 将执行的连接数量的限制。](https://stackoverflow.com/questions/2432/have-you-ever-encountered-a-query-that-sql-server-could-not-execute-because-it#256991)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-11-17T16:03:11.720

如果连接过多会影响性能，则为报告目的创建非规范化表可以加快速度。通过将数据复制到新表中，可以运行完全没有连接的报表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2008-11-17T16:07:56.420

根据我的经验，我从未见过包含邮政地址的规范化数据库，因为将地址存储为字符串通常是可以接受的。理想情况下，会有国家、县/州、城市、地区和街道的表格。我没有遇到任何需要在街道上报告的人，所以没有必要。这些地址仅用于邮政联系，因此被视为一个实体。

# wpf - Silverlight DataBinding 错误 - 虽然适用于 WPF！

> ID：292800
> 
> 赞同：0
> 
> 时间：2008-11-15T17:38:27.627
> 
> 标签：wpf, silverlight, data-binding, datacontext

启动一个新的 Silverlight 应用程序...并在后面的代码中（在“加载”事件中），输入以下代码：

```
// This will *NOT* cause an error.
this.LayoutRoot.DataContext = new string[5]; 
```

但...

```
// This *WILL* cause an error!
this.LayoutRoot.DataContext = this; 
```

引发的错误是“值不在预期范围内”。顺便说一句，此代码在常规 WPF（Windows 开发）中 100% 工作，应该没有理由不能在 WPF/E 中工作:)

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T17:51:18.867

您目前不能将可视元素用作 Silverlight 2 中数据绑定的数据源。我认为这将在 Silverlight v.Next 中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-03-03T09:46:14.813

如果直接在代码中创建绑定，则可以将可视元素用作数据源，但尝试将可视元素分配给 DataContext 将引发 ArgumentException。这没有多大意义，但 Silverlight 只是在第 2 版上。

# c# - SQL Server Express / MS Access LINQ 特性，该使用哪一个？

> ID：292803
> 
> 赞同：3
> 
> 时间：2008-11-15T17:40:32.490
> 
> 标签：c#, asp.net, sql-server, linq, ms-access

我有一些 ASP.Net 数据库前端网站，其中 MS Access 是后端。我正在尝试使用 ASP.Net 动态数据网站。我是否应该将此数据库更改为 SQL Server Express 或其他方式以使其更容易，或者是否应该与 MS Access 一起使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-15T17:52:53.417

选择 SQL Express 的原因如下：

1.  **缩放**：MS Access 永远不会缩放。一旦超过 10 个并发连接，您就会开始遇到麻烦。SQL Express 将扩展。您始终可以将 SQL Express 升级到完整的 SQL Server 安装。虽然这在 Access 中有些真实，但您的某些 SQL 语句和数据类型可能无法干净地传输。
2.  **安全**性：SQL Server 具有比 Access 更好的安全模型。您可以为每个用户锁定数据库中的架构。您还可以更好地管理用户访问（想想开发用户、测试用户和生产用户）。
3.  **性能**：这类似于缩放。如果您看到网站的流量激增，Access 可能无法处理它，而 SQL Server Express 可能会。
4.  **工具**：像 LINQ 这样的工具和库总是以 SQL Server 为目标。通过这种方式，您将获得更好的支持和更好的文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-16T20:58:15.040

Jet 后端适用于大多数只读网站，即使是流量不错的网站。Michael Kaplan 的旧网站[http://trigeminal.com](http://trigeminal.com)使用 Jet 数据库作为后端，当它是他的主站点时（他后来被微软雇用），他说它每天获得超过 10 万次点击，并且坚持得很好。

对于读/写操作，Jet 将开始在网站上停滞不前，这与它在多用户 LAN 应用程序中的停滞位置相同，同时连接数在 20 到 50 个之间，具体取决于您的应用程序的设计。

值得一提的是，尽管我是一名专业的 Access 开发人员并且非常非常了解 Jet，但我不使用 Jet 作为我任何网站的后端。这并不是因为我不喜欢将 Jet 用于网站，而是因为我不喜欢将*Windows*用于 Web 服务器——我是 Apache 支持者（和 PHP 开发人员），并托管我所有的网站（以及我的客户）以及）在非 Windows 托管服务上（目前它们都是 Linux，但并非总是如此）。我做过的所有网站数据库都使用 MySQL 作为后端。

简而言之，找出您的主机在数据库后端方面提供什么，然后选择最好的。我无法想象一个提供 ASP.NET 的主机不提供 SQL Server，而这绝对是我在那种情况下会选择的。将您的 Jet 后端升级到本地 PC 上的 SQL Server 非常容易，然后进行备份，您可以将其导入您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-02-28T09:23:52.707

您可以使用 LINQ to DataSets 对 Access .mdb 或 .accdb 数据库使用 Linq。

您可以在[http://msdn.microsoft.com/en-us/library/bb386977.aspx](http://msdn.microsoft.com/en-us/library/bb386977.aspx)和 [http://blogs.msdn.com/adonet/archive/2007/01/26/querying-datasets-introduction阅读更多内容-to-linq-to-dataset.aspx](http://blogs.msdn.com/adonet/archive/2007/01/26/querying-datasets-introduction-to-linq-to-dataset.aspx)

# ruby-on-rails - 如何在 Rails 的视图中访问不同的对象集合？

> ID：292806
> 
> 赞同：0
> 
> 时间：2008-11-15T17:41:40.507
> 
> 标签：ruby-on-rails, ruby, model-view-controller

我不知道如何搜索这个答案，所以我会继续问它。

在我的 rails 项目中，我有一个 User 模型和一个 foo 模型。一个用户可以有一个或多个 foo 模型分配给它。我通过添加实现了这一点

```
has_many :foo, :through => :user_foo 
```

在我的用户模型中。

现在，在我看来，我想显示所有 foo 的列表。不仅仅是那些被选中的（我将制作这些单选按钮，但这是另一个问题）。当我尝试这样做时（是的，我正在使用haml）：

```
 - for foo in @foos 
```

我收到此错误：

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.each 
```

我的假设是这是因为 @foos 集合是空的。在我的用户视图中访问此集合的正确方法是什么？

** 编辑 **

我认为我最初的问题有点令人困惑。我试图弄清楚的第一个问题是如何从我的用户视图中访问 foos 的集合。关系无所谓。我只想要系统中所有 foo 的列表。不仅仅是分配给用户的那些。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T17:49:56.887

我假设你有`belongs_to :user`你的 Foo 类？

你的控制器代码是什么样的？要显示所有 foo，它应该具有以下内容：

```
def index
  @foos = Foo.all
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-18T07:06:37.137

要访问所有 Foos，只需使用

```
@foos = Foo.all 
```

在您的控制器中。

您之前遇到的错误，可以通过以下检查来防止 nil 对象错误：

```
- if @foos.empty?
  %p There are no Foos
- else
  ... 
```

此外，迭代集合的最佳方式是使用`#each`方法，而不是`for`循环。例如：

```
- @foos.each do |foo|
  %p= foo.name 
```

所以一个完成的例子是：

```
- if @foos.empty?
  %p There are no Foos
- else
  - @foos.each do |foo|
    %p= foo.name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T22:19:05.500

该错误表明您的 foo 对象为空。

如果您希望所有 Foo 都与当前用户对象连接，请使用

```
my_user = User.find(1) # finds user with id no. 1
list_of_foos = my_user.foos # finds all foos associated with my_user 
```

应该管用

如果您正在寻找所有 foo，无论它们的关联如何，您都可以使用

```
list_of_foos = Foo.find(:all) 
```

这可能不符合当前流行的 Rails 语法：自从我积极进行 Rails 开发以来已经有一段时间了，但是如果我理解正确的问题，这应该会对你有所帮助。祝你好运。

# .net - 我可以使用 ODAC 11g 访问 10g

> ID：292809
> 
> 赞同：3
> 
> 时间：2008-11-15T17:42:23.393
> 
> 标签：.net, oracle, odp.net

我正在为不同的 Oracle 版本开发一个带有 VS208 的应用程序。我想知道是否需要安装不同版本的 ODAC 来执行此操作，或者最新版本是否具有向后兼容性？提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T17:59:47.677

根据[系统要求](http://www.oracle.com/technology/software/tech/windows/odpnet/install11106.html)，它应该适用于 9i 及更高版本。我之前使用 11g 访问过 10g 数据库没有问题。尽管我应该注意到我并没有真正做很多事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-03-16T07:53:29.020

ODAC 11g 将与回溯到 9.2 版的数据库一起工作（向后兼容）。一般来说，除非您有非常令人信服的理由，否则最好使用最新版本的 ODAC，以便您可以利用错误修复和新功能。

克里斯蒂安·谢伊

甲骨文

# c# - 如何正确注销事件处理程序

> ID：292820
> 
> 赞同：67
> 
> 时间：2008-11-15T17:50:08.570
> 
> 标签：c#, .net, events, delegates

在代码审查中，我偶然发现了这个（简化的）代码片段来取消注册事件处理程序：

```
 Fire -= new MyDelegate(OnFire); 
```

我认为这不会取消注册事件处理程序，因为它会创建一个以前从未注册过的新委托。但是搜索 MSDN 我发现了几个使用这个成语的代码示例。

于是我开始了一个实验：

```
internal class Program
{
    public delegate void MyDelegate(string msg);
    public static event MyDelegate Fire;

    private static void Main(string[] args)
    {
        Fire += new MyDelegate(OnFire);
        Fire += new MyDelegate(OnFire);
        Fire("Hello 1");
        Fire -= new MyDelegate(OnFire);
        Fire("Hello 2");
        Fire -= new MyDelegate(OnFire);
        Fire("Hello 3");
    }

    private static void OnFire(string msg)
    {
        Console.WriteLine("OnFire: {0}", msg);
    }

} 
```

令我惊讶的是，发生了以下事情：

1.  `Fire("Hello 1");`正如预期的那样，产生了两条消息。
2.  `Fire("Hello 2");`产生了一条消息！
    这让我相信注销`new`代表是有效的！
3.  `Fire("Hello 3");`扔了一个`NullReferenceException`。
    调试代码表明这`Fire`是`null`在取消注册事件之后。

我知道对于事件处理程序和委托，编译器会在后台生成大量代码。但我仍然不明白为什么我的推理是错误的。

我错过了什么？

附加问题：从没有注册事件的事实来看，我得出结论，无论`Fire`何时`null`触发事件，`null`都需要进行检查。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2008-11-15T18:00:47.613

C# 编译器的默认实现是添加事件处理程序调用`Delegate.Combine`，同时删除事件处理程序调用`Delegate.Remove`：

```
Fire = (MyDelegate) Delegate.Remove(Fire, new MyDelegate(Program.OnFire)); 
```

框架的实现`Delegate.Remove`不关注`MyDelegate`对象本身，而是关注委托引用的方法（`Program.OnFire`）。`MyDelegate`因此，在取消订阅现有事件处理程序时创建新对象是完全安全的。因此，C# 编译器允许您在添加/删除事件处理程序时使用简写语法（在幕后生成完全相同的代码）：您可以省略以下`new MyDelegate`部分：

```
Fire += OnFire;
Fire -= OnFire; 
```

从事件处理程序中删除最后一个委托时，`Delegate.Remove`返回 null。正如您所发现的，在引发事件之前，必须针对 null 检查事件：

```
MyDelegate handler = Fire;
if (handler != null)
    handler("Hello 3"); 
```

它被分配给一个临时局部变量，以防止在其他线程上取消订阅事件处理程序可能出现的竞争条件。（有关将事件处理程序分配给局部变量的线程安全性的详细信息，请参阅[我的博客文章](http://code.logos.com/blog/2008/11/events_and_threads_part_4.html)。）解决此问题的另一种方法是创建一个始终订阅的空委托；虽然这会使用更多内存，但事件处理程序永远不能为空（并且代码可以更简单）：

```
public static event MyDelegate Fire = delegate { }; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-11-15T20:42:29.143

在触发委托之前，您应该始终检查委托是否没有目标（其值为空）。如前所述，一种方法是订阅一个不会被删除的无操作匿名方法。

```
public event MyDelegate Fire = delegate {}; 
```

但是，这只是避免 NullReferenceExceptions 的一种技巧。

只是简单地在调用之前检查委托是否为空不是线程安全的，因为其他线程可以在空检查之后取消注册并在调用时使其为空。还有另一种解决方案是将委托复制到临时变量中：

```
public event MyDelegate Fire;
public void FireEvent(string msg)
{
    MyDelegate temp = Fire;
    if (temp != null)
        temp(msg);
} 
```

不幸的是，JIT 编译器可能会优化代码、消除临时变量并使用原始委托。（根据 Juval Lowy - Programming .NET Components）

因此，为避免此问题，您可以使用接受委托作为参数的方法：

```
[MethodImpl(MethodImplOptions.NoInlining)]
public void FireEvent(MyDelegate fire, string msg)
{
    if (fire != null)
        fire(msg);
} 
```

请注意，如果没有 MethodImpl(NoInlining) 属性，JIT 编译器可能会内联该方法，使其毫无价值。因为委托是不可变的，所以这个实现是线程安全的。您可以将此方法用作：

```
FireEvent(Fire,"Hello 3"); 
```

# apache-flex - Flex：防止滚动条在自动显示时覆盖内容

> ID：292826
> 
> 赞同：10
> 
> 时间：2008-11-15T17:52:34.493
> 
> 标签：apache-flex, scrollbar

我在 Flex 中有一个只能在垂直方向滚动的画布，所以我将画布的属性设置如下：

```
verticalScrollPolicy="auto" horizontalScrollPolicy="off" 
```

这里的问题是垂直滚动条在出现时会覆盖内容 - 尽管还有足够的水平空间。我本来希望内容大小会自动调整。

将垂直滚动策略设置为“on”时，也不会覆盖任何内容。

如果我将两个滚动策略都设置为“自动”，我还会得到一个水平滚动条，仅用于滚动到垂直滚动条覆盖的区域。

是否有一种解决方法，当显示垂直滚动条时，如何重新布局画布的内容，使其不覆盖任何内容？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-11-15T18:05:22.830

这是一个错误。有关解决方法，请参阅*[Flex verticalScrollPolicy 错误](http://www.nbilyk.com/flex-scrollpolicy-bug)*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-11-16T16:52:40.073

关于这个问题的一个旁注：它实际上不是一个错误，而是已知的（和预期的？）行为：

> *“仅当您将滚动策略显式设置为时，Flex 才会在其大小计算中考虑滚动条 `ScrollPolicy.ON`。因此，如果您使用自动滚动策略（默认），滚动条会与按钮重叠。为了防止这种行为，您可以设置 `height`属性用于 HBox 容器或允许 HBox 容器通过设置基于百分比的宽度来调整大小。请记住，更改 HBox 容器的高度会导致应用程序中的其他组件根据它们自己的大小规则移动和调整大小。*

-- 来自Flex 3 帮助中的“[调整组件大小](http://livedocs.adobe.com/flex/3/html/help.html?content=size_position_3.html)” ，在*“使用滚动条”下*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2011-02-25T11:19:33.817

我必须找到解决此问题的解决方法[Flex ScrollPolicy.AUTO Not Good Enough](http://www.hempton.com/2008/05/flex-scrollpolicyauto-not-good-enough/)，因为[Flex verticalScrollPolicy 错误](http://www.nbilyk.com/flex-scrollpolicy-bug)解决方法对我不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-08-18T07:38:13.870

在 vbox 或其他基于 Container 的组件上，我解决了这样的问题。

错误的：

```
<mx:VBox width="100%" height="100%"
      verticalScrollPolicy="auto" horizontalScrollPolicy="off">
     <mx:Repeater dataProvider="{hede}">
          <custom:RenderItem ........../>
     </mx:Repeater>
</mx:VBox> 
```

没有滚动条

工作版本：

```
<mx:VBox width="100%" height="100%"
    **minHeight="1"** horizontalScrollPolicy="off">
    <mx:Repeater dataProvider="{hede}">
        <custom:RenderItem ........../>
    </mx:Repeater>
</mx:VBox> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2010-03-16T15:24:54.967

我也是。我通常对 Flex 中的 verticalScrollBar 有一些问题，所以我更喜欢使用浏览器的滚动条来滚动整个应用程序。您可以在此处找到解决方法：[如何调整 Flex 舞台的大小并使用浏览器滚动条](http://www.davidortinau.com/blog/how_to_resize_the_flex_stage_and_use_the_browser_scrollbar/)。

我使用的代码：

在 Flex 中：

```
ExternalInterface.call("setInitialFlashHeight", this.height); 
```

在我的 HTML (JavaScript) 中：

```
function setInitialFlashHeight(newHeight) {
    document.getElementById('my_flash').style.height = newHeight + 'px';
} 
```

如果你想添加（或删除）一些高度：

```
function addFlashHeight(height) {
    var divHeight;
    var obj = document.getElementById('my_flash');

    if (obj.offsetHeight) {
        divHeight = obj.offsetHeight;
    } else if (obj.style.pixelHeight){
        divHeight = obj.style.pixelHeight;
    }

    var newHeight = divHeight + height;
    document.getElementById('my_flash').style.height = newHeight + 'px';
} 
```

要删除，请使用“-”而不是“+”。

# java - 如何最好地将我的应用程序与不可靠的数据库隔离开来？

> ID：292830
> 
> 赞同：5
> 
> 时间：2008-11-15T17:54:27.563
> 
> 标签：java, database, soap, sybase, reliability

我有一个 Java SOAP 数据服务，它位于 Sybase 数据库之上，由于我无法控制的原因，它的性能不可靠。该数据库是供应商软件包的一部分，该软件包已由内部团队修改，大多数问题是由一天中某些时间的响应时间过慢引起的。

SOAP 服务向计算网格提供数据，当我请求数据时，我需要快速且*一致*的响应时间。该服务提供基本的 CRUD 功能，但读取与写入的比率约为 100:1。

将自己与数据库不可靠的性能隔离并确保 SOAP 服务快速可靠的最佳策略是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T18:19:27.763

我已经多次看到这个问题，通常与供应商数据库有关。

如果这是在 Windows 上，您可以创建一个 Windows 服务作为 SOAP 服务和数据库之间的中介。然后在 SOAP 服务和 Windows 服务之间放置一个消息队列（MSMQ 或 JMS 实现，如 MQ Series），用于异步通信。这样，数据库性能问题将不再影响 SOAP 服务。然而，这种解决方案确实是以增加复杂性为代价的。

请注意，.NET Web 服务可以由其客户端调用并异步响应。我不确定 Java SOAP 服务是否可行。

如果这是某种 Unix 风格，我认为它具有与 Windows 服务类似的功能——也许是一个守护进程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T22:12:28.230

为什么不使用线程？这样，即使数据库很慢，应用程序也可以慢慢等待。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T22:34:46.250

RoadWarrior的回应是正确的。执行任何操作的请求都会放入队列中。用户进来一次以提出请求，一次来接听请求。这实际上是在像 Expedia 这样的网站上正在与不可靠的服务（后端）通信的情况。用户的浏览器正在 ping 服务器，直到红灯变为绿色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-15T18:44:05.047

如何缓存来自 Web 服务的响应（在调用 WS 请求的客户端上，或者通过在两者之间设置代理 Web 服务）？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-11-15T18:52:52.953

如果数据库不太大，您可以缓存数据库中的结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-16T01:21:28.770

让其他内部团队调整该数据库，让使用该应用程序的每个人都受益。我确实爱我一些索引！

# c# - 在 Web 服务的生命周期内共享 Web 服务变量？

> ID：292831
> 
> 赞同：4
> 
> 时间：2008-11-15T17:56:44.487
> 
> 标签：c#, web-services, .net-2.0, c#-2.0

如何使变量（对象）在 Web 服务的整个生命周期中都可用？

静态变量似乎可以工作，但还有其他方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T18:09:04.803

静态变量存在于包含它们的应用程序域的生命周期中。对于 Web 服务，这通常是 ASP.Net 工作进程。这意味着当 IIS 决定循环工作进程时，您的静态变量将消失。这可能是您想要的，在这种情况下，它可能是一个不错的选择。（撇开静态变量在给定上下文中是否合适的讨论）。

在 Web 服务的范围内，您还可以通过 Application 属性访问[HttpApplicationState](http://msdn.microsoft.com/en-us/library/system.web.httpapplicationstate.aspx)（这将是一个 asmx 服务...不确定 WCF 是否相同），因此这也可能是存储某些东西的好选择在服务的生命周期中需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T18:38:53.793

使用 HttpApplicationState 的单身人士应该可以享受

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-11-15T18:08:17.473

可能，但如果静态变量有效，那么继续下一个问题！:)

# c# - 获取值来自的属性名称

> ID：292841
> 
> 赞同：0
> 
> 时间：2008-11-15T18:01:56.317
> 
> 标签：c#, .net, reflection

我想知道如何获取方法参数值来自的属性的名称。下面的代码片段显示了我想要做的事情：

```
Person peep = new Person();
Dictionary<object, string> mapping = new Dictionary<object, string>();
mapping[peep.FirstName] = "Name";
Dictionary<string, string> propertyToStringMapping = Convert(mapping);
if (mapping[peep.FirstName] == propertyToStringMapping["FirstName"])
  Console.WriteLine("This is my desired result");

private Dictionary<string, string> Convert(Dictionary<object, string> mapping)
{
   Dictionary<string, string> stringMapping = new Dictionary<string, string>();
   foreach (KeyValuePair<object, string> kvp in mapping)
   {
     //propertyName should eqal "FirstName"
     string propertyName = kvp.Key??????
     stringMapping[propertyName] = kvp.Value;
   }
   return stringMapping;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T18:12:19.790

您不能以这种方式这样做，因为它的工作方式是 C# 通过调用其 get 访问器来评估 FirstName 属性的值，并将该值传递给字典的索引器。因此，您发现 FirstName 值的方式完全丢失了。就像您评估 2 + 2 的方式一样。如果您写“x = 2 + 2”，x 的值将是 4，但无法判断它是 3 + 1 还是 2 + 2 还是 5 + ( -1) 或 ... 评估为 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T18:29:48.633

我认为最终您将需要存储与属性关联的 PropertyInfo 对象，或者在映射对象中存储属性名称的字符串表示形式。您拥有的语法：

```
mapping[peep.FirstName] = "Name"; 
```

将在字典中创建一个条目，其键值等于 peep.FirstName 属性的值，值等于“名称”。

如果您将属性名称存储为字符串，例如：

```
mapping["FirstName"] = "Name"; 
```

然后，您可以使用反射来获取对象的“FirstName”属性。但是，您必须将“窥视”对象传递给 Convert 函数。这似乎与您想要做的有些相反。

您可能还可以对 Expressions 感到疯狂并执行以下操作：

```
var mapping = new Dictionary<Expression<Action<T>>,string>();
mapping[ p => p.FirstName ] = "Name"; 
```

然后在您的 Convert 函数中，您可以检查表达式。它看起来像：

```
private Dictionary<string,string> Convert(Dictionary<Expression<Action<T>>,string> mapping)
{
    var result = new Dictionary<string,string>();
    foreach(var item in mapping)
    {
        LambdaExpression ex = item.Key as LambdaExpression;
        string propertyName = ((MemberExpression)ex.Body).Member.Name;
        string propertyValue = item.Value;
        result.Add(propertyName,proeprtyValue);
    }
    return result;
} 
```

这或多或少是在我的脑海中，所以我可能会有点表达类型。如果这个实现有问题，请告诉我，我会看看我是否可以制定一个功能示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T18:40:36.287

我不太了解 C#，但我想*peep*是一个枚举？至于Java，你可以这样做：

```
String propertyName = kvp.key.toString() 
```

也许C#中有类似的东西？

即使 peep 不是枚举：我看不出为什么键应该是任意对象？所以也许解决方案就是使用枚举作为键的类型？

另外，我不知道您要做什么，但通常，我不建议您将枚举键转换为字符串。你可以用字符串做什么，而用枚举也不能做什么？

# c# - SQL 查询的正则表达式给出了一个空的 MatchCollection

> ID：292844
> 
> 赞同：2
> 
> 时间：2008-11-15T18:04:41.380
> 
> 标签：c#, sql, regex, regex-group

我尽量保持简洁。我必须编写一个以 SQL 形式进行查询并搜索 XML 的程序。现在我正在尝试将字符串分解成逻辑片段，以便我可以使用它们。我有一个字符串作为输入，并希望得到一个 MatchCollection 作为输出。

请注意，下面的测试字符串是我强加给用户以保持简单的特殊格式。每行只允许一个语句，并且排除嵌套查询-

string testString = "select apples \n from dblp \r where we ate \n group by all of them \r HAVING NO SHAME \n";

我使用具有以下模式的正则表达式：

```
Regex reg = new Regex(@"(?<select> \A\bselect\b .)" +  
                      @"(?<from> ^\bfrom\b .)" +
                      @"(?<where> ^\bwhere\b .)" +
                      @"(?<groupBy> ^\bgroup by\b .)" +
                      @"(?<having> ^\bhaving\b .)"
                      , RegexOptions.IgnoreCase | RegexOptions.Multiline
                      ); 
```

据我所知，这应该给我匹配测试字符串的每个组。我会在每行的开头寻找“select”的完全匹配，然后是除换行符之外的任何字符。

现在我创建集合：

```
MatchCollection matches = reg.Matches(testString); 
```

为了确保它有效，我使用了一个 foreach 并打印了如下匹配：

```
foreach(Match match in matches)
{
    Console.WriteLine("Select: {0}", match.Groups["select"]);
   //and so on
} 
```

问题是集合总是空的。某个地方的正则表达式一定有缺陷，但我太缺乏经验，无法找到它。你能帮帮我吗？非常感谢！

* * *

我尝试使用 .* 而不是 . 直到我被告知。甚至会数学多个字符。我毫不怀疑这可能是一个问题，但即使更换它我也没有得到任何结果。

我不明白为什么很难匹配以定义的单词开头并附加任何字符的行，直到正则表达式找到换行符。在我看来，这应该是一个相对容易的任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T21:55:23.443

我认为您需要明确匹配行终止符，并按照其他人的建议更好地处理空格。假设用户可以在 \r 和 \n 之间进行选择，请尝试

```
@"(?<select>\Aselect .+)[\n\r]" +
@"(?<from>\s*from .+)[\n\r]" +
@"(?<where>\s*where .+)[\n\r]" +
@"(?<groupBy>\s*group by .+)[\n\r]" +
@"(?<having>\s*having .+)[\n\r]" 
```

只要您使用正则表达式，您可能希望做得更好：

```
@"\Aselect (?<select>.+)[\n\r]" +
@"\s*from (?<from>.+)[\n\r]" +
@"\s*where (?<where>.+)[\n\r]" +
@"\s*group by (?<groupBy>.+)[\n\r]" +
@"\s*having (?<having>.+)[\n\r]" 
```

对于这种用途，我对正则表达式的最大问题是，你能给出的唯一错误信息是事情失败了。您不能向用户提供有关他们做错了什么的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-16T10:02:21.760

I haven't tried to build a working regex for you, but I can see several issues. Others pointed out the first two issues, but not the third one.

1.  You can't use a single dot to match the variable parts such as "apples". Try \w+ or \S+
2.  Your string has embedded line breaks. You need to match those with [\r\n]+ or \s+
3.  The .NET regex engine treats \n as a line break, but NOT \r or \r\n. Thus, ^ will match after \n, but NOT after \r. If you do step 2, you don't need the anchors anyway, so remove them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T02:57:59.697

正如您所说，匹配关键字然后使用 (.+) 匹配该行的其余部分很容易。但是你必须匹配所有中间的字符，而你没有这样做。（^ 行锚与行分隔符*后面*的位置匹配，而不是分隔符本身。）您可以使用 \s+ 来使用行分隔符以及下一行的任何前导空格。

```
@"select\s+(?<select>.+)\s+" +
@"from\s+(?<from>.+)\s+" +
@"where\s+(?<where>.+)\s+" +
@"group by\s+(?<groupBy>.+)\s+" +
@"having\s+(?<having>.+)"; 
```

我还重新安排了一些事情，以便不捕获 SQL 关键字。这似乎是多余的，因为您使用的是命名组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-16T00:00:29.620

换行匹配可能有问题：是 LF（Unix 标准）、CR（MacOS）还是 CR LF（Windows）？如果您不知道，也许您应该将其与：`[\n\r]+`

*编辑*：您在测试字符串中包含了一些空格，围绕换行符，您在 rexex 中没有考虑到这些空格。

```
(?<from>^\s*from\b.*[\n\r]+$) 
```

# mysql - MySQL - 同一张表上的困难 INSERT...SELECT [MySQL 5.051]

> ID：292851
> 
> 赞同：0
> 
> 时间：2008-11-15T18:07:06.510
> 
> 标签：mysql

我正在尝试在我的表中插入一个新行，该行包含与我尝试从同一个表中选择的数据相同的数据，但具有不同`user_id`且没有固定值，`auto_id`因为这是一个 auto_increment 字段，并设置`ti`为 NOW( ）。下面是我的模型查询，其中 '1' 是新的`user_id`. 我一直在尝试很多变体，但仍然卡住，任何可以帮助我将其变成有效查询的人。

```
INSERT INTO `lins` ( `user_id` , `ad` , `ke` , `se` , `la` , `ra` , `ty` , `en` , `si` , `mo` , `ti` , `de` , `re` , `ti` ) (

SELECT '1', `ad` , `ke` , `se` , `la` , `ra` , `ty` , `en` , `si` , `mo` , `ti` , `de` , `re` , NOW( )
FROM `lins`
WHERE autoid = '4'
AND user_id = '2'
) 
```

感谢您花时间帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T19:10:22.670

我刚试过，它对我有用。

您是否拼错了与“”对应的列名`ke`？

我猜你表中的实际列名不仅仅是两个字母。例如，您在显示的查询中有两列名为“ `ti`”，所以我假设您已经从较长的名称中编辑了这些列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T19:34:04.757

大概您知道“WHERE autoid = 4”如果它是唯一的 autoid 就足够了。如果您打算用单引号括起整数（1、4 和 2），并且它们是数字，那么您已经创建了隐含类型转换；在 WHERE 子句中，这将禁用优化器对结果整数值使用索引的能力。

此外，使用不必要的（并且容易打错的）反引号是这里至少一个其他类似问题的根源。

# spring - Spring Integration 作为独立 ESB 的嵌入式替代方案

> ID：292860
> 
> 赞同：5
> 
> 时间：2008-11-15T18:09:28.970
> 
> 标签：spring, jdbc, soa, esb, spring-integration

有没有人有将[Spring Integration](http://springframework.org/spring-integration)项目作为嵌入式 ESB 的经验？

我对以下用例非常感兴趣：

*   按计划从目录中读取文件
*   从 JDBC 数据源获取数据
*   动态启动/停止/重新部署模块的模块化和可能性（例如，一个模块可以按计划扫描目录，另一个来自 jdbc 数据源的调用查询等）
*   重复/重试策略

**更新：**

除了“从 JDBC 数据源获取数据”之外，我找到了所有问题的答案。技术上可行吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-09-11T09:34:24.050

请记住，“ESB”只是一个旨在销售更昂贵软件的营销术语，它不是灵丹妙药。您需要考虑软件需要执行的特定工作，并相应地进行选择。如果 Spring Integration 似乎符合要求，那么如果它看起来不像是一个超级昂贵的服务器安装，我不会太担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-11-30T15:24:19.480

Spring Integration JDBC 适配器在 2.0 中可用，我们上周刚刚发布了 GA。这是参考手册中的相关部分：http: [//static.springsource.org/spring-integration/docs/latest-ga/reference/htmlsingle/#jdbc](http://static.springsource.org/spring-integration/docs/latest-ga/reference/htmlsingle/#jdbc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-17T19:45:19.727

此链接描述了带有 Spring 集成的[FileSucker 。](http://www.jroller.com/habuma/entry/spring_integration_return_of_the)阅读您的企业集成模式以获取我认为的更多信息。

我觉得你需要自己做更多的调查，或者对你的一些用例做几次尝试。然后我们可以讨论什么好什么坏

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-08-15T08:11:17.453

JDBC 适配器似乎[正在进行中](https://jira.springframework.org/browse/INT-544)。

即使没有可用的特定适配器，请记住 Spring Integration 是 POJO 的精简包装器。您将能够在任何组件中访问 JDBC，例如您的服务激活器。

有关基于轮询入站通道适配器的解决方案，请参见[此处。](http://forum.springsource.org/showthread.php?t=67734)

# javascript - 使用 Javascript 更改元素的 onfocus 处理程序？

> ID：292861
> 
> 赞同：5
> 
> 时间：2008-11-15T18:10:39.123
> 
> 标签：javascript, onblur, onfocus

我有一个具有默认值的表单，它描述了应该进入该字段的内容（替换标签）。当用户聚焦一个领域时，这个函数被调用：

```
function clear_input(element)
{
    element.value = "";
    element.onfocus = null;
} 
```

onfocus 设置为 null，因此如果用户在字段中放置某些内容并决定更改它，则不会删除他们的输入（因此只会删除一次）。现在，如果用户在没有输入任何数据的情况下移动到下一个字段，则使用此函数（称为 onblur）恢复默认值：

```
function restore_default(element)
{
    if(element.value == '')
    {
        element.value = element.name.substring(0, 1).toUpperCase()
                          + element.name.substring(1, element.name.length);
    }
} 
```

碰巧默认值是元素的名称，所以我没有添加 ID，而是操作了 name 属性。问题是，如果他们确实跳过了元素，那么 onfocus 事件会被 clear_input 取消，但永远不会恢复。

我添加了

```
element.onfocus = "javascript:clear_input(this);"; 
```

在 restore_default 函数中，但这不起作用。我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-11-15T18:21:36.027

利用

```
element.onfocus = clear_input; 
```

或（带参数）

```
element.onfocus = function () { 
    clear_input( param, param2 ); 
}; 
```

和

```
function clear_input () {
    this.value = "";
    this.onfocus = null;
} 
```

“javascript:”位是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T19:52:37.887

看起来您不允许字段为空，但是如果用户在字段中放置一个或多个空格怎么办？如果你想防止这种情况，你需要修剪它。（有关修剪的不同方法，请参阅[Steven Levithans 博客）。](http://blog.stevenlevithan.com/archives/faster-trim-javascript)

```
function trim(str) {
    return str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');
} 
```

如果你真的想大写你可以使用的字符串：

```
function capitalize(str) {
    return str.substr(0, 1).toUpperCase() + str.substr(1).toLowerCase();
} 
```

通过清除 onfocus 事件，您创建了一个不应该存在的问题。一个更简单的解决方案是在 onfocus 事件中添加一个 if 语句，因此它只会清除它是否是您的默认值（但我更喜欢像 tvanfosson 建议的那样选择它）。

我假设您在输入元素上设置了值属性，以便在显示页面时在输入元素中显示一个值，即使禁用了 javascript。该值可用作 element.defaultValue。使用这种方法的好处：

*   您只需在一处定义默认值。
*   您不再需要大写处理程序中的任何值。
*   默认值可以有任何大小写（如“John Y McMain”）
*   默认值不再需要与元素的名称相同。

.

```
function clear_default(element) {
    if (trim(element.value) == element.defaultValue ) { element.value = ""; }
}

function restore_default(element) {
    if (!trim(element.value).length) { element.value = element.defaultValue;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T18:33:52.337

我建议你处理它有点不同。与其清除该值，不如将其全部突出显示，以便用户可以开始输入以覆盖它。然后您不需要恢复默认值（尽管如果值为空，您仍然可以这样做并且以相同的方式）。您也可以将处理程序留在原处，因为文本不会被清除，只是突出显示。使用验证来确保该值不是输入的原始值。

```
function hightlight_input(element) {
    element.select();
}

function restore_default(element) // optional, do we restore if the user deletes?
{
    if(element.value == '')
    {
        element.value = element.name.substring(0, 1).toUpperCase()
                          + element.name.substring(1, element.name.length);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-11-19T14:30:08.017

```
<!-- JavaScript
function checkClear(A,B){if(arguments[2]){A=arguments[1];B=arguments[2]} if(A.value==B){A.value=""} else if(A.value==""){A.value="Search"}}
//-->

<form method="post" action="search.php">
<input type="submit" name="1">
<input type="text" name="srh" Value="Search" onfocus="checkClear(this,'Search')" onblur="checkClear(this,' ')">
</form> 
```

# ruby - 使用 Ruby 将超链接添加到 Word 文档网络中创建的书签

> ID：292862
> 
> 赞同：0
> 
> 时间：2008-11-15T18:11:30.243
> 
> 标签：ruby, ms-word, hyperlink

如何使用现有书签将超链接添加到 Word 文档。我一直在使用 IRB 进行测试，但继续收到**Command Failed**。我已附加到一个正在运行的 Word 应用程序，其中选择了我想绑定到超链接的文本。为了测试，我一直在尝试添加一个 google hyperlnk。我想一旦我得到它，我就可以找出书签。这是我正在使用的命令

```
doc.Hyperlink.add(word.selection, 'http://www.google.com', '','','text to display') 
```

两个空白参数分别用于 SubAddress 和 ScreenTip。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-19T02:12:25.873

卢克-

你很亲近...

改变这个...

```
 doc.Hyperlink.add(word.selection, 'http://www.google.com', '','','text to display') 
```

……到这……

```
 doc.Hyperlinks.add(word.selection.Range, 'http://www.google.com', '','','text to display') 
```

有两个必要的改变：

*(1) 您在Hyperlinks* （复数）集合上调用 Add 方法，并且 (2) 第一个参数需要是*Range*对象。

通过这些更改，您的代码对我有用。

# agile - 不稳定的极限编程团队

> ID：292874
> 
> 赞同：3
> 
> 时间：2008-11-15T18:29:12.190
> 
> 标签：agile, extreme-programming

你会推荐在团队组成经常变化的组织中实施的极端编程实践吗？如果在一个极端的编程场景中，团队中途**变得**不稳定，你会推荐什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T20:34:07.447

我建议首先解决团队波动的问题。如果你的办公室一开始就有旋转门，那么任何流程都不会运作得很好，我想说的是，使用一个更依赖于个人绩效和贡献的流程，而不是打算用于“如果可能的话，机器中的可更换齿轮”将使事情变得更糟。

结对编程可能会在这种情况下起作用，前提是您可以让一些人在身边足够长的时间，以便他们可以将他们的知识传授给团队中的新成员。然而，问题的一部分是你不能真正练习结对编程的“对等”部分，你最终会陷入隐含的高级/初级情况，只是因为一半的对不知道代码足够好。

大多数开发过程都依赖于一个相对稳定的团队，该团队确实非常了解代码库。如果你没有这个，你需要围绕这样一个事实设计一个流程，即你将与那些试图掌握代码库的开发人员在他们试图提高生产力的同时进行处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-17T23:15:52.150

**程序员配对成为必须。**工程师实践 (XP) 和管理实践 (SCRUM) 能够以可持续的速度交付。对于一个工作团队，您应该强调的第一件事就是将其保持在一起。如果这不可能，编程配对就更重要了！

对于瀑布，一个项目开始，人们聚集，然后他们必须经历Form，Storm，Norm然后Perform。一旦团队学会了如何一起工作，项目就会结束，工作团队就会解散。然后再次重复该过程。你看到问题了吗？谁有这么多钱，可以继续为团队支付Form，Storm，Norm，然后一次又一次的Performance？

话虽如此，每个团队都会看到团队人员来来去去。通过程序员结对，您可以将新人带入团队，他们几乎会立即生效。通过配对，他们将很快学习业务领域、应用程序代码和工程实践。

我们选择了一个 4 对的团队，并为团队增加了 3 对新对。我们将所有新开发人员与经验丰富的团队成员配对。我们给了自己 30 天的时间让新成员跟上进度。团队完成了所有可交付成果。您能否想象在瀑布团队中将 6 名开发人员添加到由 8 名开发人员组成的团队中。团队在同化新团队成员时几乎陷入停顿。

最重要的是，保持一个职能团队在一起。如果无法做到这一点，请有效地利用配对来让新朋友快速加入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-16T21:53:31.933

High test coverage and a continuous integration can help ensure that new team members do not break what was previously implemented. Pair programming is the fastest way that I've found to help someone get familiar with a project. Planning meetings, short iterations, and tracking velocity over those iterations could also help new developers easily bite small pieces that are more easily managed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T18:46:07.867

当团队组成不稳定时，什么过程会起作用？至少在 XP 中，使用结对编程，您希望不止一个团队成员熟悉代码的所有部分。FWIW，我不练习 XP，我只是不知道使用 XP 会如何加剧这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T20:54:56.513

结对编程应该有助于让新的团队成员加快速度，以及在团队房间中进行渗透沟通。开发人员和客户测试的广泛套件应确保新团队成员不会破坏现有功能。高代码质量应该帮助他们更快地找到自己的方式。

话虽如此，易变团队确实是一种强大的反模式。为什么你首先拥有它们？

# agile - 极限编程和客户端

> ID：292877
> 
> 赞同：0
> 
> 时间：2008-11-15T18:32:34.960
> 
> 标签：agile, extreme-programming

哪种类型的客户端可能支持 XP（极限编程）实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T18:39:19.470

我在一家从事敏捷（不是严格意义上的 XP，但仍然适用）的公司工作，我们的客户群完全是政府组织。一旦他们在工作中看到了敏捷过程的结果，即使是那些要求以类似瀑布的方式提供文档的人也非常乐意继续从敏捷过程中获益。

而且，是的，我同意 vfilby。您的客户应该关心结果，而不是您如何实现它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T18:34:08.310

如果您的团队通过良好的业绩记录取得了巨大的成果，那么公司就希望取得成功。如果反过来，只有盲目游荡的公司才会感兴趣。

有一种**奇怪**的情况，客户希望遵循某些做法。就像经验丰富的开发经理将项目外包给外部公司，或者可能是听说 XP 很好但没有真正的知识或经验的客户。在前者中，有经验的消费者会知道他想要什么，如果你不提供这些服务，他们就会去别处。如果你试图伪造它，他们会知道并且最不高兴。后者，只要他们取得好成绩并认为是他们自己的智慧使他们从地上出来，就没有什么关系了。

无论哪种方式，重要的是结果。

*现在开始我的谩骂，到目前为止已经激起了很多愤怒：*

你会为了迎合客户而损害你的良好实践吗？如果您坚决支持 XP，请出售它！如果他们希望您使用您强烈反对的方法。告诉他们。如果不能达成共识，就不应该达成协议。

我会告诉面包师使用什么谷物吗？烤箱有多热？一定不行。如果我说我想在面包上放罂粟籽，我不在乎它们是怎么放在那里的，只要它们在那里。Dp 我根据他的方法选择面包师，或者面包的美味程度？让一个非程序员告诉你如何做你的手艺是很糟糕的。

如果您想赞美 XP 的优点，那么请提前宣传成本效益和投资回报率。向他们展示为什么在开发人员效率和减少缺陷方面对他们更好。如果您为非程序员工作，那么您就是专家，掌权并提供建议。

如果您的团队在 XP 方面表现出色并取得了不错的成果，那么您将毫无问题地推销任何潜在客户。结果对客户很重要；如果你能证明你在一致的时间内始终如一地生产出高质量的产品，那么销售你的方法应该没有问题。（除了一些绝对需要瀑布的例外）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T19:14:15.657

*   要么是已经在 XP 项目上取得好成绩的客户。
*   或者吞下了 Kool-Aid 的客户。

可以说，这使得这些客户少之又少:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T18:39:35.883

我认为客户接受敏捷开发实践（尤其是 XP）可能不像过去那样令人信服，因为它们现在更加主流。过去与敏捷团队有过积极经验的客户更有可能购买这些方法。对于较小的客户或问题较小的客户来说，如果他们担心 XP，他们可能更容易接受 XP。对于持怀疑态度的客户，我建议从小处着手并建立信心。并确保你兑现你的承诺！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T19:18:36.537

几乎所有其他人似乎都在您是或为 ISV 为客户编写自定义软件的背景下解释您的问题。是这种情况吗？

如果您的问题类似于什么样的公司可能采用 XP，那么我会说一家过去被烧毁的公司花费太多时间编写开发人员文档和为重用而设计只是不得不扔掉它完全浪费时间和精力。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2010-05-05T23:57:16.617

每次迭代，客户必须接受具有固定时间、固定资源、固定质量（工作到 100%）和稍微可变范围的迭代交付。

然而，更常见的是他们想要确定时间、资源、质量和范围。

可能支持 XP 实践的客户端类型是已经了解 XP 提供的软件生产系统的优点和缺点的客户端。

# sql - 伟大的 SQL 开发人员的标志

> ID：292878
> 
> 赞同：5
> 
> 时间：2008-11-15T18:33:34.600
> 
> 标签：sql

根据他们的工作，您如何区分优秀的 SQL 开发人员？

示例可能包括：

很少使用 CURSOR，并试图将它们重构掉。
很少使用临时表，并尝试将它们重构掉。
自信地处理 OUTER JOIN 中的 NULL 值。
避免未广泛实施的 SQL 扩展。知道如何优雅地缩进。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T18:51:26.047

我发现优秀的 SQL 开发人员通常也是优秀的数据库设计师，并且更愿意参与数据库的设计和实现。这是因为糟糕的数据库设计甚至会阻碍和阻碍最优秀的开发人员——良好的 SQL 直觉在面对病态设计或 RI 很差或不存在的系统时并不总是能正常工作。因此，告诉优秀 SQL 开发人员的一种方法是在数据建模上测试他们。

此外，优秀的数据库开发人员必须具备复杂的联接逻辑，并且准确了解各种多路联接在不同情况下的结果。对连接缺乏舒适感是糟糕的 SQL 代码（以及糟糕的 SQL 设计，就此而言）的第一大原因。

至于具体的语法问题，我会犹豫以下指令：

> 不使用 CURSOR。
> 
> 不使用临时表。

使用这些技术可以让您区分一个危险的业余 SQL 程序员（当简单的关系谓词会更好时使用它们）和一个体面的初级 SQL 程序员（知道如何在没有它们的情况下完成大多数事情）。然而，在现实世界的使用中有很多情况，其中临时表和游标是完成事情的完全适当的方法（有时是唯一的方法）（没有移动到另一层进行处理，这有时会更好）。

因此，并不禁止使用此类高级概念，但除非您清楚地与 SQL 专家打交道，该专家正在处理一个非常棘手的问题，由于某种原因，该问题不适合关系解决方案......是的，它们可能是警告信号。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-15T18:48:03.180

我不认为游标、临时表或其他 SQL 实践本质上是不好的，或者它们的使用清楚地表明数据库程序员有多好。

我认为每种类型的问题都有合适的工具。当然，如果你只有一把锤子，一切看起来都像钉子。我认为优秀的 SQL 程序员或数据库开发人员知道在特定情况下哪种工具是正确的。恕我直言，您不能概括排除特定模式。

但经验法则可能是：优秀的数据库开发人员会为复杂情况找到比普通程序员更**短、更优雅的解决方案。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-11-15T18:50:29.167

以下是一些不适用于普通软件开发人员的事情，但适用于具有良好 SQL 技能的人：

*   定义有益的索引，但不定义冗余或未使用的索引。
*   有效地使用交易。
*   重视参照完整性。
*   将规范化应用于数据库设计。
*   考虑集合，而不是循环。
*   自信地使用 JOIN。
*   了解 NULL 和三值逻辑的工作原理。
*   了解查询参数的用途和好处。

您给出的示例，不使用游标、临时表或不知道给定任务的 3 个替代查询，我*不会*考虑成为一名出色的 SQL 开发人员的迹象。也许我会称做这些事情的人为“*杂技演员*”。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-11-15T18:57:47.937

只是为了增加已经很好的答案；开发人员可以**将复杂的问题简化为简单**且易于维护的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T19:40:03.297

知道如何使用 INFORMATION_SCHEMA 和表元数据来编写通用代码或生成代码以节省重复的数据库任务。

# c# - Web 应用程序的事件日志 SecurityException？

> ID：292883
> 
> 赞同：1
> 
> 时间：2008-11-15T18:36:57.790
> 
> 标签：c#, events, .net-2.0, c#-2.0

我有一个将消息写入事件日志的应用程序。我传递给 EventLog.WriteEntry 的源不存在，因此框架尝试通过将其添加到注册表来创建源。如果用户是管理员，它工作正常，当用户不是管理员时，我得到以下信息：

“System.Security.SecurityException：不允许请求的注册表访问。” 信息。

我该如何解决？

**更新**

我已在注册表中手动使用管理员帐户创建注册表。现在，我有错误： System.Security.SecurityException: Requested registry access is not allowed。

我不明白，因为我在组管理员中创建了一个用户......我还需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-17T13:45:18.237

对于您的更新，我发现了一些可能对您有帮助的东西：

```
Run regedt32
Navigate to the following key:
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Security
Right click on this entry and select Permissions
Add the ASPNET user
Give it Read permission

2\. Change settings in machine.config file

Run Explorer
Navigate to WINDOWS or WINNT folder
Open Microsoft.NET folder
Open Framework folder
Open v1.1.4322 folder (folder name may be different, depending on what dotnet version is installed)
Open CONFIG folder
Open machine.config file using notepad (make a backup of this file first)
Locate processmodel tag (approx. at line 441)
Locate userName="machine" (approx. at line 452)
Change it to userName="SYSTEM"
Save and close the file
Close Explorer

3\. Restart IIS

Run IISReset 
```

[来源在这里](http://forums.codecharge.com/posts.php?post_id=67135)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T18:37:56.570

“非编程方式”是授予使用您的 Web 应用程序/Web 服务的用户访问注册表的权限（事件日志写入事件日志中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T13:08:47.033

这些都不适合我。诀窍是将应用程序池标识从“ApplicationPoolIdentity”更改为“LocalSystem”。然后将 LocalSystem Windows 帐户放入 Administrators 组。

# c# - .NET 在不同时区和不同语言环境中的 SQL 中存储 DateTime

> ID：292887
> 
> 赞同：2
> 
> 时间：2008-11-15T18:38:12.313
> 
> 标签：c#, datetime

对于不同的时区和不同的语言环境，在 SQL 中存储 DateTime 的最佳方法是什么
关于时区有一些问题/答案，但没有一个是解决语言环境问题。DateTime.ToUniversalTime 是特定于语言环境的，我需要它独立于语言环境。

例如：

```
 DateTime.Now.ToUniversalTime.ToString()
        In US locale returns something like: 11/23/2008 8:20:00   
        In France locale returns   23/11/2008 8:20:00 

Notice that day/month are inverted 
```

如果您在美国 SQL DB 上的法国语言环境中保存 DateTime - 您会收到错误，因为它是错误的日期格式。

最好是一个 C# 代码片段

1.  获取特定语言环境中的 DateTime 并将其存储在 SQL datetime 字段中
2.  检索 SQL 日期时间字段并将其转换为语言环境 DateTime

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2008-11-15T19:06:59.523

我不清楚你想要实现什么，也许你应该看看[DateTimeOffset](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.aspx)类。这使您可以控制相对于 UTC 的时间偏移，并且您可以通过这种方式“独立于区域设置”。您可以将时间以 UTC 格式存储在数据库中，然后根据需要进行转换。问题是你想如何转换它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T19:09:07.100

我更喜欢所有时间都是 UTC，出来是用户相关的。这样，应用程序运行的任何服务器位置都变得无关紧要。困难的部分是时区偏移量发生变化时 - 例如，所有不同的时区和夏令时的不同规则等。为此，我使用 3.5 中的 System.TimeZoneInfo 类。

[http://csharpfeeds.com/post/5336/Exploring_Windows_Time_Zones_with_System.TimeZoneInfo_Josh_Free.aspx](http://csharpfeeds.com/post/5336/Exploring_Windows_Time_Zones_with_System.TimeZoneInfo_Josh_Free.aspx)

编辑：这是我现在正在做的一个项目的一个片段：

--用户相对时间-- = TimeZoneInfo.ConvertTimeFromUtc((DateTime)sg.GameTimeUTC, s.User.TimeZoneInfo);

我通过使用 TimeZoneInfo 的静态 ConvertTimeFromUtc 获取用户的本地时间，并将我转换的 Utc 时间以及我存储在用户配置文件中的用户的 TimeZoneInfo.Id 值（字符串）传递给它。ConvertTimeFromUtc 方法处理所有关于所有不同时区及其规则的丑陋细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T20:38:07.187

如果您只是将`DateTime`UTC 格式保存在数据库中，这应该不是问题，并且以下内容应该适用于 IMO。

```
namespace MyNamespace
{
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Data.Common;
    using System.Data.SqlClient;

    using System.Globalization;

    using System.Threading;

    public sealed class MyProgram
    {
        private DbConnectionStringBuilder connectionStringBuilder;

        public static void Main(string[] args)
        {
            DbConnectionStringBuilder connectionStringBuilder = new SqlConnectionStringBuilder(args[0]);
            MyProgram myProgram = new MyProgram(connectionStringBuilder);
            myProgram.Run();
        }

        public MyProgram(DbConnectionStringBuilder connectionStringBuilder)
        {
            if (null == connectionStringBuilder)
            {
                throw new ArgumentNullException("connectionStringBuilder");
            }

            this.connectionStringBuilder = connectionStringBuilder;
        }

        public void Run()
        {
            IList<Guid> guids = new List<Guid>(2);
            guids.Add(this.Create(DateTime.Now));
            Thread.Sleep(new TimeSpan(0, 0, 5)); // I just want to assure there is a different time in the next row. :)
            guids.Add(this.Create(DateTime.UtcNow));

            foreach(Guid guid in guids)
            {
                Console.WriteLine(this.Retrieve(guid));
            }
        }

        private Guid Create(DateTime dateTime)
        {
            Guid result = Guid.Empty;

            if (dateTime.Kind == DateTimeKind.Unspecified)

            {

                throw new ArgumentException("I cannot work with unspecified DateTimeKinds.", "dateTime");

            }

            else if (dateTime.Kind == DateTimeKind.Local)

            {

                dateTime = dateTime.ToUniversalTime();

            }

            using (IDbConnection connection = new SqlConnection(this.connectionStringBuilder.ConnectionString))
            {
                using (IDbCommand command = connection.CreateCommand())
                {

                    command.CommandText = "INSERT INTO MyTable (MyUtcDate) OUTPUT INSERTED.Id VALUES (@DateTime)";

                    IDataParameter parameter = command.CreateParameter();
                    parameter.ParameterName = "DateTime";
                    parameter.Value = dateTime;
                    command.Parameters.Add(parameter);

                    command.Connection.Open();

                    result = (Guid)command.ExecuteScalar();
                }
            }

            return result;
        }

        private string Retrieve(Guid id)
        {

            string result = string.Empty;

            using (IDbConnection connection = new SqlConnection(this.connectionStringBuilder.ConnectionString))
            {
                using (IDbCommand command = connection.CreateCommand())
                {
                    command.CommandText = "SELECT MyUtcDate FROM MyTable WHERE Id = @Id";

                    IDataParameter parameter = command.CreateParameter();
                    parameter.ParameterName = "Id";
                    parameter.Value = id;
                    command.Parameters.Add(parameter);

                    command.Connection.Open();
                    using (IDataReader dataReader = command.ExecuteReader(CommandBehavior.SingleRow))
                    {
                        if (dataReader.Read())
                        {
                            DateTime myDate = DateTime.SpecifyKind(dataReader.GetDateTime(dataReader.GetOrdinal("myUtcDate")), DateTimeKind.Utc);

                            result = string.Format(CultureInfo.CurrentCulture, "{0}: {1}, {2}: {3}", TimeZoneInfo.Utc.StandardName, myDate, TimeZoneInfo.Local.StandardName, myDate.ToLocalTime());
                        }
                    }
                }
            }

            return result;
        }
    }
} 
```

# c++ - 使用 Boehm GC 时 C++ 内存泄漏的原因

> ID：292893
> 
> 赞同：2
> 
> 时间：2008-11-15T18:41:57.220
> 
> 标签：c++, garbage-collection

这段代码对我造成了内存泄漏，我不知道为什么。

[[编辑]此处](http://paste.pocoo.org/show/91254/)包含的代码有问题：

```
#include "src/base.cpp"

typedef std::map<std::string, AlObj*, std::less<std::string>, 
  gc_allocator<std::pair<const std::string, AlObj*> > > KWARG_TYPE;

AlInt::AlInt(int val)   {
    this->value = val;
    this->setup();
}

// attrs is of type KWARG_TYPE
void AlInt::setup() {
    this->attrs["__add__"] = new AddInts();
    this->attrs["__sub__"] = new SubtractInts();
    this->attrs["__mul__"] = new MultiplyInts();
    this->attrs["__div__"] = new DivideInts();
    this->attrs["__pow__"] = new PowerInts();
    this->attrs["__str__"] = new PrintInt();
}

int main() {
    while (true) {
        AlObj* a = new AlInt(3);
    }
} 
```

AlInt 继承自 AlObj，而 AlObj 又继承自 gc。当我注释掉 setup() 的内容时，我没有内存泄漏，这让我相信问题在于地图没有清理，但是我使用的是 gc 分配器，所以我不确定接下来看哪里。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T19:12:48.123

'gc allocator' 正在分配和处理这种类型的对象：

```
std::pair<const std::string, AlObj*> 
```

仅仅因为这个对象有一个指针并不意味着分配器会在它上面调用delete。

如果您希望在 setUp() 中创建的对象是 GC，那么您需要通过 GC 分配它们。或者学习使用 boost:ptr_map 或 shared_ptr。

地图销毁（而不是删除）它**拥有**的对象。在这种情况下，它拥有指针**而不是**指针指向的位置。因此，当地图被销毁时，它会释放与地图及其拥有的对象相关的所有内容（对于指针，这意味着它什么都不做）。

如果您有一个包含指针的地图（或其他容器）。您必须手动删除指针，否则会出现内存泄漏。或者，您可以使用 boost::ptr_map 或包含 share_ptr 的地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-16T06:59:26.263

分配器正在删除您的配对。但是删除一对并不会删除该对中恰好是指针的成员。

# asp.net - 在 ASP.NET 中不使用 ReportViewer 打印报表

> ID：292910
> 
> 赞同：1
> 
> 时间：2008-11-15T18:56:36.987
> 
> 标签：asp.net, printing, reportviewer, business-intelligence

我正在使用商业智能报告服务来报告 My MS SQL 数据库中的一些数据。在 ASP.NET 中，我创建了新的报告查看器，它从 BI 获取数据并显示报告，然后我可以打印它。

我的问题是如何在没有报告查看器的情况下打印报告？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T21:56:34.517

我倾向于提供针对打印优化的报告作为 .pdf 响应。这假设客户端安装了 .pdf 阅读器。由于您的方案听起来像是一个以业务为中心的方案，因此这可能是合理的。

如果可以直接访问报表服务器，则可以通过报表的 url 访问报表（类似这样...）：

```
"http://myserver/reportserver?/MyReports/MyPrintFriendlyReport&rs:Command=Render&rc:LinkTarget=main&rs:Format=PDF" 
```

我通常不会这样做。为了克服安全访问/防火墙问题，我创建了一个页面来调用报告服务 Web 服务。render 方法根据您提供的参数返回一个字节数组（“pdf”，如果您指定）。然后你修改 content-type headers 和 Response.BinaryWrite 结果。

您应该可以通过谷歌搜索此示例代码（我现在无法访问）。

# java - 我在哪里可以下载 JSTL jar

> ID：292914
> 
> 赞同：62
> 
> 时间：2008-11-15T18:58:21.227
> 
> 标签：java, jsp, jakarta-ee, jstl

有谁知道，因为我尝试过的所有地方似乎都超时了！

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2008-11-15T19:03:13.480

[您可以在此处](http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/jakarta-taglibs-standard-1.1.2.zip)下载 JSTL 1.1和 JSTL 1.2[此处](http://central.maven.org/maven2/javax/servlet/jstl/1.2/jstl-1.2.jar)。

### 也可以看看：

*   [JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2011-07-17T09:27:34.470

[http://jstl.java.net/download.html](http://jstl.java.net/download.html)

它被分成两个独立的 JAR 文件：jstl-api.jar 和 jstl-impl.jar。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-10-13T16:48:34.450

[http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/](http://archive.apache.org/dist/jakarta/taglibs/standard/binaries/)

没有一个镜像在其他页面上工作

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-06T00:14:00.053

您可以从此链接下载 JSTL jar

```
http://findjar.com/jar/javax/servlet/jstl/1.2/jstl-1.2.jar.html 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2010-12-01T07:07:24.843

过去有类似：https://jstl.dev.java.net/download.html。但是几天后，dev.java.net 上发生了一些事情。

Java.net 将被修改，请阅读：http://www.java.net/。所以我认为我们必须等待。我还发现：http://java.net/projects/help/pages/RequestedProjects。

也许这很有帮助。

另一种选择是查看 maven 存储库：[http ://repo1.maven.org/maven2/javax/servlet/](http://repo1.maven.org/maven2/javax/servlet/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-01T13:04:28.837

如果您使用的是 Maven，这里有一些适用于您的 pom.xml 文件的内容

```
<dependency>
<groupId>javax.servlet</groupId>
<artifactId>jstl</artifactId>
<version>1.2</version>
</dependency> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-19T05:59:46.383

Visit [Here](http://www.findjar.com/index.x?query=jstl+) to get your required jar files of JSTL.

and to get any of your required jar files visit [HERE](http://www.findjar.com/index.x)

# memory-management - 什么构成了良好的内存配置文件？

> ID：292920
> 
> 赞同：0
> 
> 时间：2008-11-15T19:05:20.353
> 
> 标签：memory-management, tradeoff

在设计任何桌面应用程序时，是否有关于应用程序应使用多少内存的一般规则？

对于重量级应用程序，这些应用程序可以很容易理解或至少对其进行分析，例如 Firefox 或 Google Chrome。但是对于较小的实用程序或业务线应用程序，可接受的内存使用量是多少？

我问是因为我最近遇到了内存使用和性能之间的权衡，想知道是否对此有任何普遍共识？

**编辑：**平台是 Windows XP，适用于机器只能运行富 Internet 应用程序的用户。

我的具体权衡问题是在内存中缓存大量图像。如果可能的话，我希望我的应用程序缓存尽可能多的用户内存允许。我已经这样做了，以便应用程序将缓存到某个最大限制*，考虑到目前的内存压力。*.

但是什么是一个好的数字？你怎么想出一个？这就是我要问的重点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T19:31:29.957

对此没有绝对的答案。这取决于太多的变量。

以下是一些供考虑的权衡：

*   您正在为什么设备/平台开发？
*   您是否希望您的用户将此软件用作其计算机的主要用途（例如，您可能正在开发某种服务器软件）
*   谁是您的目标受众，家庭用户？高级用户？
*   您是否对用户将拥有的 RAM 量做出切合实际的期望？
*   您是否考虑到用户还将在该计算机上使用许多其他软件？

有时你可以吃蛋糕也可以吃。例如，如果您正在读取一个文件并将其写回，您可以逐块读取它，而不是将整个文件读入内存然后将其写出。在这种情况下，您可以使用更好的内存，并且不会降低速度。

如果必须，我通常建议使用更多 RAM 以获得更好的速度。但前提是 RAM 要求对您的目标受众来说是现实的。例如，如果您希望拥有 1GB RAM 的家庭用户使用您的程序，那么您自己就不要使用 600MB RAM。

考虑在这种情况下使用更多 RAM 以获得更好的速度，并优化代码的其他部分以使用更少的 RAM。

**编辑：**

关于你缓存图片的具体情况。我认为您最好允许用户设置他们希望作为选项执行的缓存量。这样，拥有大量 RAM 的人可以将其设置得更高以获得更好的性能，而拥有少量 RAM 的人可以将其设置得更低。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T19:29:58.993

这完全取决于您的目标平台，这或多或少是一个业务决策。您需要的内存越多，能够使用您的软件的客户就越少。要问的一些问题：您的客户（或潜在客户）在他们的计算机中安装了多少内存？他们将与您的应用程序同时运行哪些其他应用程序？您的应用程序是假定为专门运行的（如全屏计算机游戏），还是应该主要在后台运行的实用程序，或者经常从其他应用程序切换到它？

Hear 是一项调查的示例，该调查显示了人们通过 Steam 玩游戏的系统中已安装 RAM 的分布情况（来源：[Valve - 调查摘要数据](http://www.steampowered.com/status/survey.html)）：

*   小于 96 Mb 0.01 %
*   96 Mb 至 127 Mb 0.01 %
*   128 Mb 至 255 Mb 0.21 %
*   256 Mb 至 511 Mb 5.33 %
*   512 Mb 至 999 Mb 19.81 %
*   1 Gb 至 1.49 Gb 30.16 %
*   1.5 Gb 至 1.99 Gb 6.10 %
*   2.0 Gb 38.37 %

我从我的领域（电脑游戏）的此类调查中得出的一个结论是，我可以合理地预期我们几乎所有的用户都拥有 512 MB 或更多，而绝大多数用户拥有 1 GB 或更多。对于应该独占运行的电脑游戏，这意味着 400 MB 左右的工作集相当安全，几乎不会限制任何人出局，如果它为产品提供了显着的附加值，那么拥有一个工作集可能是有意义的大约 800 MB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T19:26:59.623

这取决于您的目标 PC 硬件。如果您的应用程序使用太多内存，那么它会在 windows 页面时变慢。测试！在你的妥协中尝试这两种选择，如果有意义的话，在两者之间尝试一些。在您的用户将使用的典型机器上运行测试，并打开合理数量的其他应用程序。因此，对于大多数人来说，它是 Outlook，可能是 Internet Explorer 的一个或 2 个实例（或您选择的邮件客户端/浏览器）。我在一个组织工作，我的应用程序的使用也可能正在运行一些其他自定义应用程序，因此我们也对那些正在运行的应用程序进行测试。我们发现我们的应用程序使用了过多的内存，并且使切换应用程序变得非常缓慢，因此我们稍微放慢了我们的应用程序以减少其内存使用量。如果您有兴趣，我们的目标硬件最初是 512Mb 机器，因为那是我们常见的标准规格工作站。由于这个应用程序，几台 PC 不得不升级到 1Gb。我们现在已经稍微减少了它的 RAM 使用量，但它是用 VB .NET 编写的，并且使用的大部分内存似乎是框架。PerfMon 说该进程正在使用大约 200Mb（峰值），但托管堆只有大约 2Mb！

# ruby-on-rails - 在 Active Record 模型 search() 方法中使用 scope_builder 有条件地构建命名范围

> ID：292922
> 
> 赞同：2
> 
> 时间：2008-11-15T19:05:47.483
> 
> 标签：ruby-on-rails, named-scope

我正在使用 Ryan Bates 出色的[scope_builder](http://github.com/ryanb/scope-builder/tree/master)有条件地构建一个新的命名范围，以在 Active Record 模型的 search() 方法中使用。

示例文档显示您可以执行以下操作：

```
 # in product model
  def self.search(options)
    scope_builder do |builder|
      builder.released.visible
      builder.cheap if options[:cheap]
    end
  end 
```

但是，当我在我的模型中包含上述代码的相关版本并调用 search() 并传递了一些选项时，我得到的是 ScopeBuilder::Builder 的一个实例，而不是使用选项执行链式命名范围的结果我已经通过了，这是我所期望的。

我的问题是：**如何获得执行 builder(options) 而不是构建器实例的结果？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-16T03:30:50.677

看起来 scope_builder 块[旨在](http://github.com/ryanb/scope-builder/tree/master/README)返回 scope-builder 实例，因此您必须从实例中获取结果。

尝试在实例上使用 .all 来获取结果。例如：

```
@results = Product.search().all 
```

从[他的测试](http://github.com/ryanb/scope-builder/tree/717b8f83dfb2ecdd5136eff018a319253e7bdc7b/spec/scope_builder/builder_spec.rb)看来，这应该可以工作（第 47 行：“应该能够在块中建立范围”）。

# php - 用于 PHP 的强大且成熟的 HTML 解析器

> ID：292926
> 
> 赞同：139
> 
> 时间：2008-11-15T19:09:52.793
> 
> 标签：php, html, html-parsing

是否有任何可用于 PHP 的强大且成熟的 HTML 解析器？快速浏览一下 PEAR 并没有发现任何问题（很多类用于生成 HTML，而不是用于消费），Google 告诉我很多人已经开始然后放弃了各种解析器项目。

对 XML 解析器不感兴趣（除非那时可以使用格式不正确的 HTML）或使用正则表达式自行破解它。

**意图澄清：**我对过滤 HTML 内容不感兴趣，我对从 HTML 文档中提取信息感兴趣。

# php - SimpleXML 或 XMLReader？

> ID：292935
> 
> 赞同：3
> 
> 时间：2008-11-15T19:18:34.680
> 
> 标签：php, xml

两者中哪一个更普及？我想从[http://freshmeat.net/projects-xml/mysql/mysql.xml?branch_id=46519](http://freshmeat.net/projects-xml/mysql/mysql.xml?branch_id=46519)读出版本号，但我想使用更多人拥有的版本号。

如果您知道另一种从 mysql 获取最新稳定版本号的方法，请告诉我 ;)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-15T19:49:27.427

对于这种任务，将文档读入 a[`DomDocument`](http://us2.php.net/domdocument)并使用[`DomXPath`](http://docs.php.net/manual/it/domxpath.query.php)可能更合适。

要回答您的问题，这两个库（以及`DomDocument`+ `DomXPath`）都是 PHP5 的标准装备，因此它们同样是不错的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T23:07:22.957

它必须是 SimpleXML。它[默认启用](http://uk3.php.net/manual/en/simplexml.installation.php)，加载 XML 文档比 Dom 方法更快，比 Dom 方法具有更小的内存占用，并且比 Dom 方法具有更简单的[xpath](http://uk3.php.net/manual/en/function.simplexml-element-xpath.php)方法：

```
$xml = simplexml_load_file(
    'http://freshmeat.net/projects-xml/mysql/mysql.xml?branch_id=46519'
    );
$result = $xml->xpath('//latest_release/latest_release_version'); 
// or '//latest_release/*' if you'd rather loop through all release information.

while(list( , $node) = each($result))
    echo $node, "\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T23:01:01.733

对于大文件使用 XMLreader，simpleXML 将消耗大文件上的所有内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-11-15T22:10:05.677

SimpleXML 是在 PHP5 中引入的，而 XmlReader 仅默认包含在 5.1 版本中，因此前者可能是最好的方法：

```
$struct = simplexml_load_string($xml);
$version = (string)$struct->project->latest_release->latest_release_version; 
```

但是，如果您不进行任何其他 XML 处理并希望最大限度地提高兼容性，您可以正则表达式 XML：

```
if(preg_match('/<latest_release_version>(.*?)<\\/latest_release_version>/', $xml, $matches)){
$version = $matches[1];
} 
```

它比正确处理 XML 更麻烦，但可能更快并且几乎所有 PHP 安装都支持它。

# javascript - 如何在 IE 上找到恶意 Ajax 请求的来源？

> ID：292941
> 
> 赞同：1
> 
> 时间：2008-11-15T19:26:26.973
> 
> 标签：javascript, jquery, ajax, internet-explorer

我使用 JavaScript (JQuery) 重写了我的家庭网站，在后端对 PHP 进行 Ajax 调用。这是您的标准“一堆图像缩略图和一个主图像，当您单击缩略图图像时，主图像会发生变化”之类的东西。使用 Firefox 时一切正常，但在 IE 上，当我单击缩略图时，主图像变为我单击的图像，然后立即变回第一个图像。我试过 MS Script Debugger 无济于事；我在启动 Ajax 调用的 JavaScript 代码中设置了一个断点，当我单击缩略图时，断点就会触发。然后我按F5，它继续，但没有再次开火。如果我使用 Wireshark 观察网络上的实际 TCP 数据包，我可以看到我们肯定向服务器发送了多个请求。

有什么建议么？我正在谈论的一个例子是[here](http://perrow.ca/gallery.php?tag=nicholas-1)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-11-15T22:19:00.183

通过您的站点进行调试，看起来正在发生的事情：

处理完第一张图像后，将引发 resize 事件，因此将调用以下代码：

```
$(window).bind("resize", function(){ 
    ResizeWindow( 'nicholas-1' )
}); 
```

如您所知，它会重新加载您的画廊。现在我不能告诉你为什么会发生这种情况，但这就是麻烦的开始。

为了将来参考调试，我使用 VS2008 附加到 IE。然后我在 $ajax() 中打断：

```
// Send the data
try {
    xhr.send(s.data);
} catch(e) {
    jQuery.handleError(s, xhr, null, e);
} 
```

然后我只需按 F5，它为前两个 ajax 调用运行，然后当我发现流氓 ajax 调用时打开调用堆栈窗口并将调用堆栈返回到我之前发布的函数。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T19:42:12.730

你可以使用[Fiddler](http://www.fiddlertool.com/)，一个免费的 Internet Explorer 调试代理。当我不得不在 IE 上调试特定的、与服务器相关的问题时，这对我有很大的帮助。

这是[MSDN 上的 Fiddler 简介](http://i.msdn.microsoft.com/Bb250446.ie_introfiddler_fig04(en-us,VS.85).gif)。

[替代文字 http://i.msdn.microsoft.com/Bb250446.ie_introfiddler_fig04(en-us,VS.85).gif](http://i.msdn.microsoft.com/Bb250446.ie_introfiddler_fig04(en-us,VS.85).gif)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-15T19:45:22.287

IE 是一项工作，不是吗？你有没有尝试过这样的事情？

```
var inProcess = 0;

function eventHandler() {

    if (inProcess == 0) {

      inProcess = 1;

      // do stuff

      setTimeout('inProcess = 0', 5000);

    }

} 
```

顺便说一句，可爱的孩子。

# visual-studio - 具有 2 个项目的解决方案 - 共享 Properties.Resources

> ID：292948
> 
> 赞同：2
> 
> 时间：2008-11-15T19:33:28.207
> 
> 标签：visual-studio, visual-studio-2008, projects, solution

在 Visual C# 2008 中，我有一个包含两个项目的解决方案。

第一个项目包含 Form1，它显示一个 Label，其中 Text 设置为 Properties.Resources 中的字符串，如下所示：

```
label1.Text = Properties.Resources.MY_TEXT; 
```

在第二个项目中，我从第一个项目中“添加为链接”这个 Form1。我想显示这个表单，所以它的显示与从第一个项目调用时相同。它应该显示一个标签，其中包含在第一个项目中定义的文本 Properties.Resources.MY_TEXT。

不幸的是，第二个项目没有构建并出现以下错误消息：“名称'属性'在当前上下文中不存在”。

有什么办法可以解决这个问题吗？我尝试将第一个项目中的“Resources.resx”文件“添加为链接”，但没有帮助。

编辑：我发现如果我在 Project2 中添加 Project1 作为参考，一切正常。我还必须将 Project1 资源中的访问修饰符从内部更改为公共。这是正确的方法吗？

谢谢你，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-16T07:00:55.947

是的，这是正确的方法（从另一个项目中引用一个项目）。您可能希望应用的一种模式是拥有一个包含所有参考/查找/设置的项目。然后，您无需解决 UI 项目之间的依赖关系。

您公开资源的方法是正确的。

您还询问了有关组合程序集的问题。看看[ILMerge 工具](http://research.microsoft.com/~mbarnett/ILMerge.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-11-15T20:15:30.883

您应该添加“使用 MyOtherProjectNamespace”，以便您可以访问其属性

# uuid - 什么是 UUID？

> ID：292965
> 
> 赞同：85
> 
> 时间：2008-11-15T19:43:27.530
> 
> 标签：uuid, glossary, acronym

那么，什么是一？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2008-11-15T20:00:15.033

这是一个标识号，可以唯一标识某物。身份证号码将是*普遍*唯一的想法。因此，任何两个事物都不应该具有相同的 uuid。事实上，如果你要生成 10 万亿个 uuid，那么两个 uuid 相同的概率大约为 0.00000006。

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2009-04-24T17:17:39.163

## 标准化标识符

[UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier)在[RFC 4122](http://www.ietf.org/rfc/rfc4122.txt)中定义。它们是通用唯一标识符，可以在不使用集中权限的情况下生成。有四种主要类型的 UUID，它们在略有不同的场景中使用。所有 UUID 的长度都是 128 位，但通常表示为由四个连字符分隔的 32 个十六进制字符。

最常见的版本 1 UUID 结合了 MAC 地址和时间戳以产生足够的唯一性。如果生成多个 UUID 的速度足够快以至于时间戳在下一代之前不会增加，则时间戳会手动增加 1。如果没有可用的 MAC 地址，或者出于隐私原因不希望它的存在，6 随机来自加密安全随机数生成器的字节可用于节点 ID。

最不常见的版本 3 和版本 5 UUID 分别使用 MD5 和 SHA1 哈希函数，加上一个命名空间，再加上一个已经唯一的数据值来生成一个唯一的 ID。例如，这可用于从 URL 生成 UUID。

第 4 版 UUID 只是 128 位随机数据​​，通过一些位旋转来识别 UUID 版本和变体。

UUID 冲突*极*不可能发生，尤其是在单个应用程序空间中。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2018-11-05T12:18:15.710

UUID 代表**Universally Unique IDentifier**。它是一个 128 位的值，用于软件开发中**的唯一标识**。UUID 与 GUID (Microsoft) 相同，是分布式计算环境 (DCE) 的一部分，由开放软件基金会 (OSF) 标准化。

如前所述，它们旨在在空间和时间上具有很高的唯一性，并且在计算上难以猜测。它的生成基于当前时间戳和生成 UUID 的工作站的唯一属性。

[![在此处输入图像描述](https://i.stack.imgur.com/goiPw.png)](https://i.stack.imgur.com/goiPw.png) 图片来自[https://segment.com/blog/a-brief-history-of-the-uuid/](https://segment.com/blog/a-brief-history-of-the-uuid/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2008-11-15T20:37:44.210

这是一串很长的位，应该是现在和永远唯一的，即不可能与您或世界上任何其他人生成的任何其他 UUID 发生冲突。

它的工作方式是简单地使用当前时间戳，以及生成它的计算机的与互联网相关的唯一属性（如 IP 地址，在您连接到互联网时应该是唯一的；或 MAC 地址，它更底层，网卡的硬连线 ID）是位串的一部分。

本来世界上每张网卡都有自己唯一的MAC地址，但到了后世，可以通过软件更改MAC地址，不再像唯一ID那么可靠。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-11-15T19:46:51.580

这是一个[通用唯一标识符](http://en.wikipedia.org/wiki/Uuid)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-20T12:21:22.770

UUID 是一个 128 位的数字，用于唯一标识某个实体。根据所使用的特定机制，可以保证 UUID 是不同的，或者至少极有可能与生成的任何其他 UUID 不同。UUID 依赖于组件的组合来确保唯一性。UUID 包含对生成 UUID 的主机的网络地址的引用、时间戳和随机生成的组件。因为网络地址标识了一台唯一的计算机，并且时间戳对于从特定主机生成的每个 UUID 都是唯一的，所以这两个组件应该充分确保唯一性。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-08T13:45:13.290

我只想补充一点，最好使用 usUUID（静态窗口标识符）。例如，如果计算机用户依赖第三方软件（如盲人或低视力用户的屏幕阅读器），则其他软件（在这种情况下为屏幕红屏）将使用唯一标识符更好地发挥作用！毕竟，如果有人在您知道您的停车地点之后移动您的汽车，您会多么高兴！！！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-03T07:22:52.823

通用唯一标识符 (UUID) 是一个 128 位数字，用于识别计算机系统中的信息。术语全局唯一标识符 (GUID) 也被使用，通常用于 Microsoft 创建的软件。根据标准方法生成时，UUID 出于实际目的是唯一的。与大多数其他编号方案不同，它们的独特性不依赖于中央注册机构或生成它们的各方之间的协调。而 UUID 重复的概率。

# asp.net - 开发一个简单的照片ASP.NET/MVC应用程序，怎么做？

> ID：292966
> 
> 赞同：1
> 
> 时间：2008-11-15T19:44:32.053
> 
> 标签：asp.net, asp.net-mvc, photo

我找到了这个网站（照片博客） [http://www.OneReaction.net/](http://www.OneReaction.net/)

我很好奇这是如何做到的：1）从源代码中你看不到图像的 URL 2）如何在图像上覆盖版权信息而不更改底层照片？

想法？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-15T22:05:32.097

检查此链接：[使用 HttpHandler 在 ASP.NET 中为图像添加水印](http://blog.donnfelker.com/post/Watermarking-Images-in-ASPNET-with-an-HttpHandler.aspx)。它描述了一种为您网站的每个图像添加水印的技术。通过将 中的路径更改为`HttpHandler`不太`web.config`通用的路径（例如`/photos/*.jpg`），您可以将效果限制为图像子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-15T19:52:21.040

我相信 ImageHandler.ashx 正在拦截请求并将版权信息放入图像中，然后再将其传递给浏览器。处理程序可能设置为捕获所有浏览到 .jpg 文件的尝试。

[绘图命名空间上](http://msdn.microsoft.com/en-us/library/system.drawing.aspx)的文档应该可以帮助您找出将文本插入图像的实际代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-20T07:30:41.283

网址在源代码中

```
<img id="image" title="Condemned to Contrast II" src="Resources/ImageHandler.ashx" 
    alt="Condemned to Contrast II" style="border-width:0px;" /> 
```

试试[这个链接](http://www.onereaction.net/Resources/ImageHandler.ashx)

# windows - 保护 Windows 服务应用程序

> ID：292967
> 
> 赞同：0
> 
> 时间：2008-11-15T19:44:57.857
> 
> 标签：windows, security, service, access-control

有没有办法限制具有管理权限的用户管理特定的基于 Windows 服务的应用程序？我想限制管理员停止或重新启动我的服务，这与 Windows 事件日志服务非常相似。有哪些比较流行的方法或推荐的方法来保护产品供应商遵循的服务（如防病毒应用程序、防火墙等，服务必须连续运行）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-11-15T22:20:00.057

从服务管理 mmc 中删除停止选项。使用 .net 服务，您：

```
ServicesToRun = new ServiceBase[] { new Service1() };
ServicesToRun[0].CanStop = false; 
```

对于 win32，请参阅[SERVICE_STATUS](http://msdn.microsoft.com/en-us/library/ms685996(VS.85).aspx)结构和[SetServiceStatus](http://msdn.microsoft.com/en-us/library/ms686241(VS.85).aspx)函数文档。没有测试这个选项。

也就是说，我认为（希望我是对的）在用户空间中没有可能阻止管理员停止服务。管理员仍然可以通过从 taskmanager 或 taskkill 中终止进程来停止服务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2008-11-15T19:45:21.130

这是使用访问控制的一种方法 - [http://support.microsoft.com/?kbid=288129](http://support.microsoft.com/?kbid=288129)

# c# - Sproc 参数仅返回第一个字符

> ID：292988
> 
> 赞同：3
> 
> 时间：2008-11-15T19:59:37.687
> 
> 标签：c#, sql, sql-server, stored-procedures, ado.net

我有一个 sproc 和一些 C# 调用它。我的问题是 (N)VARCHAR 值都只返回第一个字符。其他一切都很好。为什么只返回第一个字符？

所以

```
Content = (string)cmd.Parameters["@SmsContent"].Value,
ToNumber = (string) cmd.Parameters["@ToNumber"].Value, 
```

两者都只返回第一个字符。

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[GetNextSms]
(   
    @SmsId UNIQUEIDENTIFIER OUTPUT, 
    @SmsContent NVARCHAR OUTPUT, 
    @ToNumber VARCHAR OUTPUT,
    @TimeAccepted DATETIME OUTPUT
)
AS
BEGIN TRANSACTION
    -- 1\. Get 1 row
    SET ROWCOUNT 1
        SELECT @SmsId = SmsId FROM SendQueue
        WHERE ProcessingStarted = 0
    SET ROWCOUNT 0
    -- 2\. Set as processing
    UPDATE SendQueue 
        SET ProcessingStarted = 1
        WHERE SmsId = @SmsId
    -- 3\. Return data
    SELECT @SmsId = SmsId,
        @SmsContent = SmsContent,
        @ToNumber = ToNumber,
        @TimeAccepted = TimeAccepted
    FROM SendQueue
    WHERE SmsId = @SmsId;

COMMIT 
```

这是我的 C#

```
connection.Open();
var cmd = new SqlCommand(@"GetNextSms", connection) {CommandType = CommandType.StoredProcedure};
SqlParameter param = cmd.Parameters.Add("@SmsId", SqlDbType.UniqueIdentifier);
param.Direction = ParameterDirection.Output;
param = cmd.Parameters.Add("@ToNumber", SqlDbType.VarChar,50);
param.Direction = ParameterDirection.Output;
param = cmd.Parameters.Add("@SmsContent", SqlDbType.NVarChar,1024);
param.Direction = ParameterDirection.Output;
param = cmd.Parameters.Add("@TimeAccepted", SqlDbType.DateTime);
param.Direction = ParameterDirection.Output;

if (cmd.ExecuteNonQuery() > 0)
{
    sms = new Sms
              {
                  SmsId = ((Guid) cmd.Parameters["@SmsId"].Value),
                  Content = (string)cmd.Parameters["@SmsContent"].Value,
                  ToNumber = (string) cmd.Parameters["@ToNumber"].Value,
                  TimeAccepted = ((DateTime) cmd.Parameters["@TimeAccepted"].Value)
              };
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-11-15T20:12:01.407

基于一些搜索（即我没有尝试过），您也应该使用长度声明您的存储过程参数，即

```
ALTER PROCEDURE [dbo].[GetNextSms]
(   
    @SmsId UNIQUEIDENTIFIER OUTPUT, 
    @SmsContent NVARCHAR(1024) OUTPUT, 
    @ToNumber VARCHAR(50) OUTPUT,
    @TimeAccepted DATETIME OUTPUT
) 
```

抱歉，如果这不是答案，但值得一试。它似乎同意[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms186939.aspx)指出 NVARCHAR/VARCHAR 的默认长度为 1。

# winapi - 允许在列表框中垂直滚动，当它被禁用时（VB6）

> ID：292991
> 
> 赞同：2
> 
> 时间：2008-11-15T20:06:22.960
> 
> 标签：winapi, vb6, listbox

我需要在多选列表框（VB6）中允许垂直滚动条但是，当控件被禁用时，我无法滚动。

我认为有一个 API 可以实现这一点，但我最喜欢的[VB6 站点（MVPS VB.NET）](http://vbnet.mvps.org)没有办法。

我玩弄假装它被禁用，并忽略点击......但是用VB6代码做到这一点真的很丑......所以如果这是一个解决方案，我需要一个API来忽略点击。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-11-17T00:06:12.570

我想出了下面的代码，它隐藏了一个类后面的所有细节。基本上，我实现了 greg 的想法，即在禁用列表框的滚动条之上使用覆盖另一个滚动条。在我的代码中，我动态地创建了另一个 ListBox 控件（调整大小以便只有它的滚动条可见），并使用它的滚动条来滚动实际的 ListBox。我还特别避免使用 Windows API（除了调用`GetSystemMetrics`我曾经计算过滚动条在系统上的宽度）。使用另一个 ListBox 的滚动条的好处是它可以正确设置主题（ListBox 在显示它的滚动条时使用操作系统的主题，但 VB.Scrollbar 没有，所以它看起来不合适）。使用第二个 ListBox 滚动第一个列表框的另一个优点是实现滚动逻辑非常容易（只要滚动第二个 ListBox，只需将第一个 ListBox 的 TopIndex 属性设置为第二个 ListBox 的 TopIndex 属性）。

我还将它设置为尽可能低影响（您只需在`Form_Load`事件中调用一个函数即可使其工作）。

### 用法

1.  添加`CustomScrollingSupport.cls`和`ListBoxExtras.bas`到您的项目。

2.  在表单的`Form_Load`事件中，添加以下行：

    `AddCustomListBoxScrolling Me`

    这将使表单上的每个 VB.ListBox 都支持滚动，即使它们被禁用。如果您只想将此功能添加到选定数量的 ListBox 中，则可以`AddCustomScrollingSupport`改为调用，传入特定的 ListBox 控件。

### 有趣的笔记

在此代码的旧版本中，我没有调用`ZOrder`第二个列表框（提供滚动条的那个）上的方法来确保它出现在第一个列表框的顶部。这意味着第二个列表框实际上在第一个列表框之后；有趣的是，当第一个 ListBox 被禁用时，第二个 ListBox 上的滚动仍然有效！显然，当第一个 ListBox 被禁用时，任何会进入该 ListBox 的鼠标和键盘事件都会“渗透”到第二个 ListBox，因此滚动支持仍然有效。我不确定这是错误还是设计使然（我的意思是，您可能会争辩说禁用控件后面的控件能够接收事件是有道理的……）。但是，我发现滚动有时有点生涩，所以我决定添加`.ZOrder 0`使第二个列表框呈现在第一个列表框之上。这样做的缺点是您会看到第二个列表框（滚动条左侧）的框架边框，如果它隐藏在第一个列表框后面，您不会看到它，但滚动更顺畅。

* * *

**CustomScrollingSupport.cls**

此类封装了向`VB.ListBox`控件添加“自定义滚动支持”（因为没有更好的名称）所需的逻辑。它不应该直接使用，而是使用模块`Add*`中的一种方法`ListBoxExtras.bas`（我将在后面的帖子中提供该模块的代码）。

```
Option Explicit

Private Declare Function GetSystemMetrics Lib "user32" (ByVal nIndex As Long) As Long
Private Const SM_CXVSCROLL = 2
Private Const SM_CXFRAME = 32

Private m_runningScrollers As Collection
Private WithEvents m_list As VB.listbox
Private WithEvents m_listScroller As VB.listbox

'--------------------------------------------------------------'
' Bind                                                         '
'                                                              '
'   Adds custom scrolling support to a ListBox control.        '
'   Specifically, it allows the ListBox to be                  '
'   scrolled even when it is disabled.                         '
'                                                              '
'   Parameters:                                                '
'                                                              '
'   + list                                                     '
'       the ListBox control to add custom scrolling support to '
'                                                              '
'   + runningScrollers                                         '
'       a Collection of CustomScrollingSupport objects. Passed '
'       in so that this object can remove itself from the list '
'       when it is terminated.                                 '
'                                                              '
'--------------------------------------------------------------'

Public Sub Bind(ByVal list As VB.listbox, runningScrollers As Collection)

    Set m_list = list
    Set m_runningScrollers = runningScrollers

    'Create another ListBox loaded with the same number of entries as the real listbox'
    Set m_listScroller = m_list.Container.Controls.Add("VB.ListBox", list.Name & "_scroller")
    LoadScrollerList

    Dim nScrollbarWidth As Long
    nScrollbarWidth = GetSystemMetricScaled(SM_CXVSCROLL, m_list) + _
                      GetSystemMetricScaled(SM_CXFRAME, m_list)

    'Display the other listbox (the "scroller"), just wide enough so that only its scrollbar is visible'
    'and place it over the real listboxs scroll bar'
    With m_listScroller
        .Left = m_list.Left + m_list.Width - nScrollbarWidth
        .Top = m_list.Top
        .Height = m_list.Height
        .Width = nScrollbarWidth
        .Enabled = True
        .Visible = True
        .ZOrder 0
    End With

End Sub

Private Sub m_listScroller_Scroll()
    'If the master list has changed, need to reload scrollers list'
    '(not ideal, but there is no ItemAdded event that we could use to keep the lists in sync)'
    If m_list.ListCount <> m_listScroller.ListCount Then
        LoadScrollerList
    End If

    'Make any scrolling done on the scroller listbox occur in the real listbox'
    m_list.TopIndex = m_listScroller.TopIndex

End Sub

Private Sub Class_Terminate()

    Dim scroller As CustomScrollingSupport
    Dim nCurrIndex As Long

    If m_runningScrollers Is Nothing Then
        Exit Sub
    End If

    'Remove ourselves from the list of running scrollers'

    For Each scroller In m_runningScrollers
        nCurrIndex = nCurrIndex + 1
        If scroller Is Me Then
            m_runningScrollers.Remove nCurrIndex
            Debug.Print m_runningScrollers.Count & " scrollers are running"
            Exit Sub
        End If
    Next

End Sub

Private Sub LoadScrollerList()

    Dim i As Long

    m_listScroller.Clear
    For i = 1 To m_list.ListCount
        m_listScroller.AddItem ""
    Next

End Sub

Private Function GetSystemMetricScaled(ByVal nIndex As Long, ByVal ctrl As Control)
    GetSystemMetricScaled = ctrl.Container.ScaleX(GetSystemMetrics(nIndex), vbPixels, ctrl.Container.ScaleMode)
End Function 
```

* * *

**ListBoxExtras.bas**

该模块包含两个实用方法：

`AddCustomScrollingSupport`向单个`VB.ListBox` 控件

`AddCustomListBoxScrolling`添加自定义滚动功能向`VB.ListBox` 给定的每个控件添加自定义滚动功能`Form`

```
Option Explicit

Public Sub AddCustomScrollingSupport(ByVal list As VB.listbox)

    Static runningScrollers As New Collection

    Dim newScroller As CustomScrollingSupport
    Set newScroller = New CustomScrollingSupport

    runningScrollers.Add newScroller
    newScroller.Bind list, runningScrollers

End Sub

Public Sub AddCustomListBoxScrolling(ByVal frm As Form)

    Dim ctrl As Control
    For Each ctrl In frm.Controls

        If TypeOf ctrl Is VB.listbox Then
            AddCustomScrollingSupport ctrl
        End If

    Next

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-11-15T21:25:55.280

与其寻找忽略点击的 API，不如就忽略事件？（即当用户单击/选择某些东西时不要这样做）。

而且，我认为有一个`SelectionMode`属性可以禁用多选并使其成为单选。

如果您根本不希望用户能够选择任何内容，您可以尝试挂钩`SelectionIndexChanged`事件并将其设置`SelectionIndex`为 -1。

我的 VB6 有点生疏，如果事件/属性名称不完全匹配，请见谅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-11-15T23:01:32.123

说到黑客，如果当鼠标在滚动条上移动时启用滚动条会怎样？

或者也许......在 ListBox 的 SB 上放置另一个滚动条，并使用 API 来滚动禁用的 LB。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-16T16:23:53.860

仅在禁用的列表框上启用滚动条是可能的（我认为），但是您必须深入研究 Windows API 并执行 SendMessage 和其他一些可怕的事情。

我刚刚检查了它，当列表框被禁用时，您仍然可以通过更改控件的 ListIndex 属性以编程方式上下滚动它。因此，您可以执行 greg 建议的操作，并将启用的垂直滚动条“浮动”在列表框上的垂直滚动条上，并使用此滚动条的 Value_Changed 事件（我认为这就是它的名称）来更改列表框的 ListIndex 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-11-15T22:42:46.937

这是一个完整的 VB hack，但我认为您可以启用列表框，然后在除滚动条之外的所有列表框上拖动一个透明标签（带有空白文本）。标签将拦截任何鼠标点击（尽管这不会影响击键）。

这只有在标签像我记得的那样透明时才有效（它可能是图像控件 - 没有加载的图像 - 在 VB 中像这样工作）。

# .net - 让 ClaimsResponse 与 DotNetOpenId 一起工作的秘诀是什么？

> ID：292993
> 
> 赞同：8
> 
> 时间：2008-11-15T20:07:31.070
> 
> 标签：.net, asp.net, security, openid, dotnetopenauth

让 ClaimsResponse 与[DotNetOpenId](http://code.google.com/p/dotnetopenid/)一起工作的秘诀是什么？

例如，在这段代码（来自[Scott Hanselman 的博客](http://www.hanselman.com/blog/CategoryView.aspx?category=DasBlog)）中，ClaimsResponse 对象应该有很多不错的小东西，比如“昵称”和“电子邮件地址”，但 ClaimsResponse 对象本身是“null”：

```
 OpenIdRelyingParty openid = new OpenIdRelyingParty();  
 if (openid.Response != null)  
 {  
    // Stage 3: OpenID Provider sending assertion response  
    switch (openid.Response.Status)  
    {  
       case AuthenticationStatus.Authenticated:  
          ClaimsResponse fetch = openid.Response.GetExtension(typeof(ClaimsResponse)) as ClaimsResponse;  
          string nick = fetch.Nickname;  
          string homepage = openid.Response.ClaimedIdentifier;  
          string email = fetch.Email;  
          string comment = Session["pendingComment"] as string;  
          string entryId = Session["pendingEntryId"] as string;  
          if (String.IsNullOrEmpty(comment) == false && String.IsNullOrEmpty(entryId) == false)  
          {  
             AddNewComment(nick, email, homepage, comment, entryId, true);  
          }  
          break;  
    }  
 } 
```

起初，我认为这是因为我没有使用“ClaimsRequest”重定向到提供者……但使用此代码重定向到 OpenId 提供者仍然无济于事：

```
OpenIdRelyingParty openid = new OpenIdRelyingParty();  
IAuthenticationRequest req = openid.CreateRequest(openid_identifier.Text);  
ClaimsRequest fetch = new ClaimsRequest();  
fetch.Email = DemandLevel.Require;  
fetch.Nickname = DemandLevel.Require;  
req.AddExtension(fetch);  
req.RedirectToProvider(); 
```

我究竟做错了什么？或者其他开发者是否经历过同样的痛苦？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-12-04T18:01:51.117

我不知道您是否解决了问题，但经过数小时的努力，我找到了解决方案。实际上，您需要更改您的 web.config 文件以声明电子邮件，这里的全名是 web.config，它适用于我。我从 nerddinner 项目下载了它。实际上，我复制了除 web.config 之外的所有内容，但没有收到电子邮件字段。所以后来我发现还有其他问题。我从 nerddinner 项目中复制了 web.config，一切正常。

这是文件，如果你不想去 nerddinner 项目。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
  <configSections>
    <sectionGroup name="elmah">
     </sectionGroup>
    <section name="dotNetOpenAuth" type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection" requirePermission="false" allowLocation="true" />
  </configSections>
  <connectionStrings configSource="connectionStrings.config">
  </connectionStrings>
  <dotNetOpenAuth>
    <openid>
      <relyingParty>
        <behaviors>
          <add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth" />
        </behaviors>
      </relyingParty>
    </openid>
  </dotNetOpenAuth>
  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
    -->
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Logon" />
    </authentication>
    <membership>
      <providers>
        <clear />
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ApplicationServices" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" passwordStrengthRegularExpression="" applicationName="/" />
      </providers>
    </membership>
    <profile>
      <providers>
        <clear />
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ApplicationServices" applicationName="/" />
      </providers>
    </profile>
    <roleManager enabled="false">
      <providers>
        <clear />
        <add connectionStringName="ApplicationServices" applicationName="/" name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
        <add applicationName="/" name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
      </providers>
    </roleManager>
    <customErrors mode="RemoteOnly" defaultRedirect="/Dinners/Trouble">
      <error statusCode="404" redirect="/Dinners/Confused" />
    </customErrors>

    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Globalization" />
        <add namespace="System.Linq" />
        <add namespace="System.Collections.Generic" />
      </namespaces>
    </pages>
    <httpHandlers>
      <add verb="*" path="*.mvc" validate="false" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    </httpHandlers>
    <httpModules>
    </httpModules>
    <trace enabled="true" requestLimit="10" pageOutput="false" traceMode="SortByTime" localOnly="true" />
  </system.web>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
  -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
    <handlers>
      <remove name="MvcHttpHandler" />
      <remove name="UrlRoutingHandler" />
      <add name="MvcHttpHandler" preCondition="integratedMode" verb="*" path="*.mvc" type="System.Web.Mvc.MvcHttpHandler, System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <appSettings>
    <add key="microsoft.visualstudio.teamsystems.backupinfo" value="8;web.config.backup" />
    <!-- Fill in your various consumer keys and secrets here to make the sample work. -->
    <!-- You must get these values by signing up with each individual service provider. -->
    <!-- Twitter sign-up: https://twitter.com/oauth_clients -->
    <add key="twitterConsumerKey" value="" />
    <add key="twitterConsumerSecret" value="" />
  </appSettings>
  <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-12-17T04:22:03.137

你的代码看起来不错。但请注意，并非所有 OP 都支持您正在使用的 sreg 扩展。如果您正在验证的 OP 不支持它，那么响应扩展将为您所看到的 null。所以空检查总是一个好主意。

如果您正在寻找要测试的 OP，myopenid.com 支持 sreg。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-11-15T22:54:07.117

使用最新版本的 DotNetOpenId，这段代码对我来说似乎工作正常：

```
var request = openid.CreateRequest(openid_identifier);
var fields = new ClaimsRequest();
fields.Email = DemandLevel.Require;
fields.Nickname = DemandLevel.Require;
request.AddExtension(fields);
request.RedirectToProvider(); 
```

从提供者返回时：

```
var claimResponse = openid.Response.GetExtension<ClaimsResponse>(); 
```

PS：我使用的是 MVC，而不是 WebForms。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2011-03-12T23:36:41.330

我用了

```
 /* worked */var fetch = new FetchRequest();
   fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
   request.AddExtension(fetch); 
```

代替

```
 /* didnt work*/
   var fields = new ClaimsRequest();
   fields.Email = DemandLevel.Require;
   fields.FullName = DemandLevel.Require;
   request.AddExtension(fields); 
```

并在响应中尝试

```
 this.Request.Params["openid.ext1.value.alias1"]; 
```

只是而不是访问索赔。这在 Google 的 ASP.Net 中与我一起工作。

ASP.Net 中的问题是使用 ClaimsRequest 时请求未完整发送，如果您使用 Fiddler，您可以看到这一点。并且响应也没有正确检索到您需要从 Request.params 访问直接参数，它们都在那里。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-12-05T19:58:57.673

在 C# 中，以上都不适用于我（使用 PayPal Access 作为标识符）

以下对我有用：

```
OpenIdRelyingParty openid = new OpenIdRelyingParty();

protected void Page_Load(object sender, EventArgs e)
{
    var response = openid.GetResponse();

    if (response != null)
    {
        switch (response.Status)
        {
            case AuthenticationStatus.Authenticated:

                if (this.Request.Params["openid.ext1.value.alias1"] != null)
                {
                    Response.Write(this.Request.Params["openid.ext1.value.alias1"]);
                    Response.Write(this.Request.Params["openid.ext1.value.alias2"]);
                }
                else {
                    Response.Write("Alias wrong");
                }
                break;
        }
    }
}
 protected void loginButton_Click(object sender, EventArgs e)
{

    var openidRequest = openid.CreateRequest(openIdBox.Text);
    var fetch = new FetchRequest();

    fetch.Attributes.AddRequired(WellKnownAttributes.Contact.Email);
    fetch.Attributes.AddRequired(WellKnownAttributes.Name.FullName);
    openidRequest.AddExtension(fetch);

    openidRequest.RedirectToProvider();

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-03-17T11:08:43.040

在我从示例复制的 web.config 中更新以下内容后，我可以正确接收参数。

```
<section name="dotNetOpenAuth"
         type="DotNetOpenAuth.Configuration.DotNetOpenAuthSection"
         requirePermission="false" 
         allowLocation="true"/> 
```

在下面 `<configsections>`

并单独添加这些

```
<dotNetOpenAuth>
    <openid>
        <relyingParty>
            <behaviors>
                <add type="DotNetOpenAuth.OpenId.Behaviors.AXFetchAsSregTransform, DotNetOpenAuth"/>
            </behaviors>
        </relyingParty>
    </openid>
</dotNetOpenAuth> 
```

# c# - C# 和 MySQL - 温和的框架替代品

> ID：292995
> 
> 赞同：0
> 
> 时间：2008-11-15T20:12:19.423
> 
> 标签：c#, orm

我在 C# 和 MySQL 的个人项目开始时玩弄。

我熟悉 Gentle Framework 的使用（使用 MyGeneration 生成类，基于数据模型）。这就是我喜欢 Gentle 的地方；

*   易于使用的 [class].Retrieve(id) / [object].Persist() 语义，具有强类型字段；
*   我从 DB 数据模型开始，选择何时生成新的代码文件；
*   MyGeneration 允许跨代保存一些“手动代码部分”......
*   ...并且部分类允许我在并行文件中添加永久代码，例如简单的只读属性（例如 Person 对象的 FirstName 和 Surname 成员中的“FullName”） - 或者我可以使用继承；
*   我发现这是一种创建 DAL 并向其添加某些类似业务对象层的工具的可容忍且快速的方法。

不幸的是，为了有效地查询，我最终使用了相当多的查询/SqlCommands，并且依赖于对列名等的弱类型引用，并且似乎有回避对象代理和缓存优势的风险。无论如何，Gentle 不再被开发，现在似乎是考虑替代品的好时机。

那么，我应该考虑什么？

*   强类型 ADO 数据集的生成是可能的，但似乎很难添加到它（例如，“FullName”虚拟列），以便在更新表结构并重新生成数据集后持续存在。
*   NHibernate 似乎有很多粉丝......但我第一次看到它似乎表明 XML 数据定义是王道，而不是数据库中现有的数据模型。它看起来也很依赖依赖；
*   SubSonic 演示似乎建议它生成文件，并且在 WebAppProjects 的演示中，它看起来可能会以我可以添加或继承的方式生成文件；
*   MySql Connector.Net 工具似乎不支持为 Linq 生成数据集（例如通过拖放），我怀疑这是强类型数据访问的关键需求。

您的想法将不胜感激！先感谢您...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-11-15T20:31:50.397

我有一些使用 Gentle 的经验，我不得不承认它的查询效率非常低。我建议研究 NHibernate，因为它有一个丰富的社区。确实首选 XML 定义，但有一些方法可以使用类级属性进行映射。

SubSonic（尤其是[3.0 版本](http://blog.wekeroad.com/tags/subsonic/)）使用[T4 模板](http://blog.wekeroad.com/blog/make-visual-studio-generate-your-repository/)看起来很有前途。这应该让您更好地控制代码生成。它也可以做LINQ。

不要投资于 LINQ-to-SQL，因为有传言称它将停止使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-11-16T00:35:51.590

假设 .Net 3.5 Framework 是一个可供使用的选项，那么您可以查看 Microsoft 的 Entity Framework（与 .Net 3.5 Service Pack 1 一起发布）。

Entity Framework 允许基于您的数据库架构生成 DAL 类，但这些类的维护隐藏在一个 XML 文件后面，该文件可以通过 Visual Studio IDE 中的一个简单命令快速轻松地更新以考虑架构更改。

我正在做一个项目，我们将实体框架与 MySQL 一起使用，几乎没有问题。此选项的主要缺点是 MySQL 提供的官方 .Net 连接器尚不支持实体框架 - 有一个付费替代方案，称为[MyDirect.Net](http://devart.com/dotconnect/mysql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-11-17T12:12:27.287

感谢 Filip 和 Snorkpete 的建议 - 您的评论和链接被证明是有帮助的。

我可能会先尝试 SubSonic；它看起来像是我会理解并且能够快速开始使用的东西（今天应该回答这个问题），我很惊讶地看到它得到了 MS 的间接支持，因为他们雇用了编写它的人。T4看起来也很有趣。

实体关系模型看起来也很有趣，MyDirect 的链接将来可能会有所帮助。这里唯一的缺点是期望。MS 过去搞砸了他们的方法，使他们可以轻松地通过拖放创建初始设计，但以后更难修改或保持最新。

无论如何，再次感谢你们，我会尽量保持这个问题的更新。

尼日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-12-17T17:49:40.840

[链接文本](http://weblogs.asp.net/zowens/archive/2007/09/18/subsonic-of-the-day-collections.aspx)我会选择 Subsonic，成熟的 DAL 生成器，并大大提高生产力。

我们已经将它与 MySQL 和 SQL Server 一起使用 - 不用担心。为表、存储过程、列名生成类。所以每次我们发现自己在做Somthing Dot Intellisense 移动箭头键和分号。

每当您的架构发生更改时，您都可以重新生成这些类，然后您就回家了。此外，您可以通过创建部分类来扩展它们。

它支持几乎所有的 SQL 语义 - 连接、按主键加载集合、添加 WHERE 子句、Order by、Count、Top、调用存储过程、视图等，直观的语法是一大优势。

让您一睹为快——对于 Books 表[BookID-PK, title, AuthorID]，它会生成几种类型的方法。

*   采用 Title、AuthorID 的插入方法
*   可空列是可选参数，也就是 C# 可空类型？
*   采用 BookID、AuthorID、Title 的更新方法
*   按主键加载图书（在显示详细信息页面时很有用）
*   BookCollection 和 Book Entities，只需调用 BookCollection.Load，您就有准备绑定到任何数据绑定控件的书籍列表

这是快速链接。

谢谢，毛利克·莫迪

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-17T18:10:26.630

我使用一些 SQL 从表中生成强类型对象，它基于 Cade Bryant 构建的对象，但我做了一些调整。它生成的代码不是 100% 可编译的，但它节省了大量的样板工作，并且很容易填补空白（如果我是你，我会让所有属性完全成熟，或者承受 jon skeet 的愤怒！）

[http://NotifyURL.com/sql](http://NotifyURL.com/sql)

# c++ - 你可以在 boost asio 中设置 SO_RCVTIMEO 和 SO_SNDTIMEO 套接字选项吗？

> ID：292997
> 
> 赞同：6
> 
> 时间：2008-11-15T20:13:09.187
> 
> 标签：c++, boost, boost-asio

你可以在 boost asio 中设置 SO_RCVTIMEO 和 SO_SNDTIMEO 套接字选项吗？

如果有怎么办？

注意我知道你可以使用计时器，但我特别想知道这些套接字选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-12-23T22:44:25.370

绝对地！Boost ASIO 允许您访问本机/底层数据，在这种情况下是 SOCKET 本身。所以，假设你有：

```
boost::asio::ip::tcp::socket my_socket; 
```

假设您已经调用了`open`or`bind`或一些实际上可以`my_socket`使用的成员函数。然后，要获取底层 SOCKET 值，请调用：

```
SOCKET native_sock = my_socket.native();
int result = SOCKET_ERROR;

if (INVALID_SOCKET != native_sock)
{
    result = setsockopt(native_sock, SOL_SOCKET, <the pertinent params you want to use>);
} 
```

所以你有它！Boost 的 ASIO 让您可以比其他方式更快地完成许多事情，但是您仍然需要正常的套接字库调用很多事情。这恰好是其中之一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-11-15T20:25:24.843

它似乎没有内置到 Boost.Asio 中（截至当前的 Boost SVN），但是，如果您愿意编写自己的类来模拟这些`boost::asio::detail::socket_option`类，您可以随时按照示例进行`boost/asio/socket_base.hpp`以下操作：

```
typedef boost::asio::detail::socket_option::timeval<SOL_SOCKET, SO_SNDTIMEO>
    send_timeout;
typedef boost::asio::detail::socket_option::timeval<SOL_SOCKET, SO_RCVTIMEO>
    receive_timeout; 
```

（显然，我不建议您将`timeval`类注入`boost::asio::detail::socket_option`命名空间，但我现在想不出一个好的。:-P）

编辑：我的示例实现`socket_option::timeval`，基于`socket_option::integer`：

```
// Helper template for implementing timeval options.
template <int Level, int Name>
class timeval
{
public:
  // Default constructor.
  timeval()
    : value_(zero_timeval())
  {
  }

  // Construct with a specific option value.
  explicit timeval(::timeval v)
    : value_(v)
  {
  }

  // Set the value of the timeval option.
  timeval& operator=(::timeval v)
  {
    value_ = v;
    return *this;
  }

  // Get the current value of the timeval option.
  ::timeval value() const
  {
    return value_;
  }

  // Get the level of the socket option.
  template <typename Protocol>
  int level(const Protocol&) const
  {
    return Level;
  }

  // Get the name of the socket option.
  template <typename Protocol>
  int name(const Protocol&) const
  {
    return Name;
  }

  // Get the address of the timeval data.
  template <typename Protocol>
  ::timeval* data(const Protocol&)
  {
    return &value_;
  }

  // Get the address of the timeval data.
  template <typename Protocol>
  const ::timeval* data(const Protocol&) const
  {
    return &value_;
  }

  // Get the size of the timeval data.
  template <typename Protocol>
  std::size_t size(const Protocol&) const
  {
    return sizeof(value_);
  }

  // Set the size of the timeval data.
  template <typename Protocol>
  void resize(const Protocol&, std::size_t s)
  {
    if (s != sizeof(value_))
      throw std::length_error("timeval socket option resize");
  }

private:
  static ::timeval zero_timeval()
  {
    ::timeval result = {};
    return result;
  }

  ::timeval value_;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T13:30:17.150

解决此问题的一个简单方法是使用本机读写功能。

对于 1 秒超时写入：

```
struct timeval tv = { 1, 0 };
setsockopt(socket.native_handle(), SOL_SOCKET, SO_SNDTIMEO, &tv, sizeof(tv));
ssize_t nsent = ::write(socket->native_handle(), buff, size);
if (nsent > 0) {
  BOOST_LOG_TRIVIAL(debug) << "Sent " << nsent << " bytes to remote client " << ep;
} else if (nsent == 0) {
 BOOST_LOG_TRIVIAL(info) <<  "Client " << ep << " closed connection";
} else if (errno != EAGAIN) {
  BOOST_LOG_TRIVIAL(info) <<  "Client " << ep << " error: " <<     strerror(errno);
} 
```

对于 1 秒超时读取：

```
struct timeval tv = { 1, 0 };
setsockopt(socket.native_handle(), SOL_SOCKET, SO_RCVTIMEO, &tv, sizeof(tv));
ssize_t nread = ::read(socket.native_handle(), buff, audio_buff_size);
if (nread > 0) {
} else if (nread == 0) {
  BOOST_LOG_TRIVIAL(info) <<  "Source " << source << " server " << host << " closed connection";
  break;
} else if (errno != EAGAIN) {
  BOOST_LOG_TRIVIAL(info) <<  "Source " << source << " server " << host << " error: " << strerror(errno);
  break;
} 
```

这对我来说很好。

# iphone - 我需要一个 UUID 来为 iPhone 编程吗？

> ID：292998
> 
> 赞同：0
> 
> 时间：2008-11-15T20:13:20.827
> 
> 标签：iphone, uuid

我需要一个 UUID 来为 iPhone 编程吗？有人告诉我我需要这个，我怎样才能获得 UUID

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-15T20:17:08.790

您需要 Apple 的开发人员证书才能在实际 iPhone 上安装您的应用程序并将您的应用程序发布到 Apple Store，但您不需要 uuid，除非该人将开发人员证书误认为是 uuid 并使用了错误的术语。要获得证书，您必须加入 Apple 的开发者计划。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-11-15T23:35:19.060

UUID，通用唯一 ID 号，或也称为 UDID，唯一设备 ID 号，是用于将应用程序代码签署到一个或多个设备的认证的一部分。

必须能够将您的应用程序传输到您的 iPhone（或 iPod Touch）以进行测试和临时分发。您需要进入（并支付 99 美元）Apple 的 iPhone 开发人员计划（个人或公司）才能获得使您能够执行此操作的证书。开发人员通常要求 beta 测试人员提供他们的 UUID，以便开发人员可以创建允许应用程序工作的证书/配置文件。

连接 iPhone 后，可以在 iTunes 中找到 UUID。在“摘要”选项卡上，单击“序列号”，它应更改为“标识符”。可以通过按 Command-C (Mac) 或 CTRL-C (Windows) 将生成的 40 位十六进制数字复制到剪贴板。

或者，您可以从 iTunes AppStore下载[Ad Hoc Helper应用程序。](http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=285691333&mt=8)当您运行它时，它会创建一封电子邮件，其中在正文中包含您的 iPhone 标识符。

请注意，您可以使用[免费帐户](http://developer.apple.com/iphone)下载 iPhone SDK，并使用 SDK 的内置 iPhone 模拟器进行程序。***********