# StackOverflow 问答 11859000-11859999

# php - 服务器上的链接无法正常工作

> ID：11859004
> 
> 赞同：1
> 
> 时间：2012-08-08T06:42:44.743
> 
> 标签：php, linux

我的项目中有一个搜索链接，通过单击用户将重定向到另一个页面并根据获取值，将显示数据。在我的本地主机中一切正常。但是当我将文件放入服务器时，它说页面不是找到了。我不知道发生了什么。

我的 loclhost 中的链接：-

```
http://localhost/sampleproject?pickuplocation=Adelaide&returnlocation=Melbourne&vehicle=Campervan (2 berth) 
```

在 url 中显示如下：-

```
http://localhost/sampleproject?pickuplocation=Adelaide&returnlocation=Melbourne&vehicle=Campervan+%282+berth%29 
```

它工作正常。

在服务器链接上是： -

```
http://www.example.com/?pickuplocation=Adelaide&returnlocation=Melbourne&vehicle=Campervan (2 berth) 
```

在 url 中显示如下（服务器）：-

```
http://www.example.com/?pickuplocation=Adelaide&returnlocation=Melbourne&vehicle=Campervan+%282+berth%29 
```

服务器上的此链接会引发错误`PAGE NOT FOUND`。我不知道发生了什么。请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:55:31.960

我很确定问题将出在您的 .htaccess 文件中，请尝试绕过它。

# iphone - iPhone - 如何在后台执行任务？

> ID：11859011
> 
> 赞同：1
> 
> 时间：2012-08-08T06:43:08.560
> 
> 标签：iphone, xcode, ios5

当应用程序在后台运行（最小化）时，我想在固定的时间间隔内调用一个方法。

就像我想每天调用网络服务....并希望在 localNotification 消息正文中显示此网络服务的结果。这个任务怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:46:13.133

请按照 Apple 提供的本指南了解应用程序如何进入后台：

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

查找名为**Background Execution and Multitasking**的部分：

> 但是，您只能在后台运行特定类型的任务：
> 
> *   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> *   让用户随时了解其位置的应用程序，例如导航应用程序
> *   支持互联网协议语音 (VoIP) 的应用程序 需要下载和处理新内容的报亭应用程序
> *   从外部配件接收定期更新的应用程序
> 
> 如果您的应用程序属于这些类型的掌握范围内，您现在可以继续确定应用程序类型。
> 
> 可能的类型有：
> 
> *   *音频*——应用程序在后台向用户播放可听内容。（此内容包括使用 AirPlay 的流式音频或视频内容。）
> *   *位置*——该应用程序让用户随时了解他们的位置，即使它在后台运行时也是如此。
> *   *voip* — 该应用程序使用户能够使用 Internet 连接拨打电话。
> *   *newsstand-content* — 该应用程序是一个 Newsstand 应用程序，可在后台下载和处理杂志或报纸内容。
> *   *external-accessory* — 该应用程序与需要通过外部附件框架定期提供更新的硬件附件配合使用。
> *   *bluetooth-central* — 该应用程序与需要通过 CoreBluetooth 框架定期提供更新的蓝牙配件配合使用。

# file-extension - 什么是 phtml，什么时候应该使用 .phtml 扩展名而不是 .php？

> ID：11859015
> 
> 赞同：257
> 
> 时间：2012-08-08T06:43:17.800
> 
> 标签：file-extension, php

我想知道 .phtml 和 .php 文件之间的区别是什么，以及何时使用其中一个。

* * *

## 回答 #1

> 赞同：343
> 
> 时间：2012-08-08T06:48:52.120

就页面渲染而言，通常没有区别。但是，当您的 Web 项目变得更大时，它是一个巨大的设施开发者端。

我以这种方式使用两者：

*   **.PHP**页面不包含与视图相关的代码
*   **.PHTML**页面包含很少（如果有的话）数据逻辑，其中大部分是与演示相关的

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2012-08-08T06:51:18.480

`.phtml`是 PHP 2 程序的标准文件扩展名。`.php3`接管了 PHP 3。当 PHP 4 出来时，他们切换到顺子`.php`.

有时仍会使用较旧的文件扩展名，但并不常见。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-08-08T06:47:05.603

这是一个文件 ext，有些人用了一段时间来表示它是 PHP 生成的 HTML。由于像 Apache 这样的服务器并不关心你使用什么作为文件 ext，只要它被映射到某个东西，你可以继续调用你所有的 PHP 文件 .jimyBobSmith 并且它会很高兴地运行它们。PHTML 恰好是流行了一段时间的趋势。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-07-29T21:51:30.417

举一个 Alex 所说的例子，例如，如果您使用 Magento，.phtml 文件只能在 /design 区域中作为模板文件找到，并且包含 HTML 和 PHP 行。同时，PHP 文件是纯代码，其中没有任何 HTML 行。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-08-08T06:45:36.127

`.phtml`文件告诉网络服务器这些是由服务器生成的具有动态内容的 html 文件......就像`.php`浏览器中的文件一样。

`.phtml`因此，在生产性使用中，您应该不会体验到`.php`文件的差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-16T16:07:44.303

如果您正确设置 Apache，您可以选择世界上的任何扩展。如果您在 Apache 配置中进行设置，则可以使用 .html 来执行 PHP。

**总之，扩展与应用程序或网站本身无关。你可以使用你想要的，但通常使用 .php （不要重新发明轮子）**

但是在 2019 年，你应该使用路由，最后忘记了扩展。

我推荐你使用 Laravel。

回答@KingCrunch：没错，Apache 默认不使用它，但如果您更改配置，您可以轻松使用它。但这不推荐，因为每个人都知道这不是一个真正的选择。

我已经看到使用 html 扩展名执行 PHP 的 .html 文件。

# java - 下载哪个插件以在谷歌浏览器上显示 java 小程序

> ID：11859019
> 
> 赞同：0
> 
> 时间：2012-08-08T06:43:37.267
> 
> 标签：java, html, google-chrome, applet, object-tag

我最近在显示一个 java 小程序时遇到了一些问题。终于，有些东西显示出来了。但它不是一个小程序。这是一个小盒子，我的小程序的宽度和高度，要求显示小程序所需的插件。我正在使用谷歌浏览器。我需要哪个插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:49:48.510

听起来您需要[Java 插件](http://java.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:51:38.183

看看这个[网站](https://support.google.com/chrome/bin/answer.py?hl=en&answer=2429779)你确定，你已经安装了Java？你可以[在这里测试](https://java.com/en/download/testjava.jsp)

# android - How to use android java classes in Phonegap?

> ID：11859022
> 
> 赞同：0
> 
> 时间：2012-08-08T06:43:56.800
> 
> 标签：android, cordova

I have an application in android which browse and upload file.My java classes are here:

MainActivity.java

```
public class MainActivity extends Activity implements OnClickListener {

private static final int REQUEST_PICK_FILE = 1;

private TextView mFilePathTextView;
private Button mStartActivityButton;
private File selectedFile;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Set the views
    mFilePathTextView = (TextView)findViewById(R.id.file_path_text_view);
    mStartActivityButton = (Button)findViewById(R.id.start_file_picker_button);
    mStartActivityButton.setOnClickListener(this);      
}

public void onClick(View v) {
    switch(v.getId()) {
    case R.id.start_file_picker_button:
        // Create a new Intent for the file picker activity
        Intent intent = new Intent(this, FilePickerActivity.class);

        // Set the initial directory to be the sdcard
        //intent.putExtra(FilePickerActivity.EXTRA_FILE_PATH, Environment.getExternalStorageDirectory());

        // Show hidden files
        //intent.putExtra(FilePickerActivity.EXTRA_SHOW_HIDDEN_FILES, true);

        // Only make .png files visible
        //ArrayList<String> extensions = new ArrayList<String>();
        //extensions.add(".png");
        //intent.putExtra(FilePickerActivity.EXTRA_ACCEPTED_FILE_EXTENSIONS, extensions);

        // Start the activity
        startActivityForResult(intent, REQUEST_PICK_FILE);
        break;

    //case R.id.You_can_handle_more_onclick_events_from_here:
        //Do something
        //break;
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if(resultCode == RESULT_OK) {
        switch(requestCode) {
        case REQUEST_PICK_FILE:
            if(data.hasExtra(FilePickerActivity.EXTRA_FILE_PATH)) {
                // Get the file path
                selectedFile = new File(data.getStringExtra(FilePickerActivity.EXTRA_FILE_PATH));
                // Set the file path text view
                mFilePathTextView.setText(selectedFile.getPath());  
                //Now you have your selected file, You can do your additional requirement with file.                
           }
         }
      }
   }
} 
```

FilePickerActivity.java

```
public class FilePickerActivity extends ListActivity {

public final static String EXTRA_FILE_PATH = "file_path";
public final static String EXTRA_SHOW_HIDDEN_FILES = "show_hidden_files";
public final static String EXTRA_ACCEPTED_FILE_EXTENSIONS = "accepted_file_extensions";
private final static String DEFAULT_INITIAL_DIRECTORY = "/";

protected File mDirectory;
protected ArrayList<File> mFiles;
protected FilePickerListAdapter mAdapter;
protected boolean mShowHiddenFiles = false;
protected String[] acceptedFileExtensions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Set the view to be shown if the list is empty
    LayoutInflater inflator = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View emptyView = inflator.inflate(R.layout.file_picker_empty_view, null);
    ((ViewGroup)getListView().getParent()).addView(emptyView);
    getListView().setEmptyView(emptyView);

    // Set initial directory
    mDirectory = new File(DEFAULT_INITIAL_DIRECTORY);

    // Initialize the ArrayList
    mFiles = new ArrayList<File>();

    // Set the ListAdapter
    mAdapter = new FilePickerListAdapter(this, mFiles);
    setListAdapter(mAdapter);

    // Initialize the extensions array to allow any file extensions
    acceptedFileExtensions = new String[] {};

    // Get intent extras
    if(getIntent().hasExtra(EXTRA_FILE_PATH)) {
        mDirectory = new File(getIntent().getStringExtra(EXTRA_FILE_PATH));
    }
    if(getIntent().hasExtra(EXTRA_SHOW_HIDDEN_FILES)) {
        mShowHiddenFiles = getIntent().getBooleanExtra(EXTRA_SHOW_HIDDEN_FILES, false);
    }
    if(getIntent().hasExtra(EXTRA_ACCEPTED_FILE_EXTENSIONS)) {
        ArrayList<String> collection = getIntent().getStringArrayListExtra(EXTRA_ACCEPTED_FILE_EXTENSIONS);
        acceptedFileExtensions = (String[]) collection.toArray(new String[collection.size()]);
    }
}

@Override
protected void onResume() {
    refreshFilesList();
    super.onResume();
}

/**
 * Updates the list view to the current directory
 */
protected void refreshFilesList() {
    // Clear the files ArrayList
    mFiles.clear();

    // Set the extension file filter
    ExtensionFilenameFilter filter = new ExtensionFilenameFilter(acceptedFileExtensions);

    // Get the files in the directory
    File[] files = mDirectory.listFiles(filter);
    if(files != null && files.length > 0) {
        for(File f : files) {
            if(f.isHidden() && !mShowHiddenFiles) {
                // Don't add the file
                continue;
            }

            // Add the file the ArrayAdapter
            mFiles.add(f);
        }

        Collections.sort(mFiles, new FileComparator());
    }
    mAdapter.notifyDataSetChanged();
}

@Override
public void onBackPressed() {
    if(mDirectory.getParentFile() != null) {
        // Go to parent directory
        mDirectory = mDirectory.getParentFile();
        refreshFilesList();
        return;
    }

    super.onBackPressed();
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    File newFile = (File)l.getItemAtPosition(position);

    if(newFile.isFile()) {
        // Set result
        Intent extra = new Intent();
        extra.putExtra(EXTRA_FILE_PATH, newFile.getAbsolutePath());
        setResult(RESULT_OK, extra);
        // Finish the activity
        finish();
    } else {
        mDirectory = newFile;
        // Update the files list
        refreshFilesList();
    }

    super.onListItemClick(l, v, position, id);
}

private class FilePickerListAdapter extends ArrayAdapter<File> {

    private List<File> mObjects;

    public FilePickerListAdapter(Context context, List<File> objects) {
        super(context, R.layout.file_picker_list_item, android.R.id.text1, objects);
        mObjects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = null;

        if(convertView == null) { 
            LayoutInflater inflater = (LayoutInflater)getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.file_picker_list_item, parent, false);
        } else {
            row = convertView;
        }

        File object = mObjects.get(position);

        ImageView imageView = (ImageView)row.findViewById(R.id.file_picker_image);
        TextView textView = (TextView)row.findViewById(R.id.file_picker_text);
        // Set single line
        textView.setSingleLine(true);

        textView.setText(object.getName());
        if(object.isFile()) {
            // Show the file icon
            imageView.setImageResource(R.drawable.file);
        } else {
            // Show the folder icon
            imageView.setImageResource(R.drawable.folder);
        }

        return row;
    }

}

private class FileComparator implements Comparator<File> {
    public int compare(File f1, File f2) {
        if(f1 == f2) {
            return 0;
        }
        if(f1.isDirectory() && f2.isFile()) {
            // Show directories above files
            return -1;
        }
        if(f1.isFile() && f2.isDirectory()) {
            // Show files below directories
            return 1;
        }
        // Sort the directories alphabetically
        return f1.getName().compareToIgnoreCase(f2.getName());
    }
}

private class ExtensionFilenameFilter implements FilenameFilter {
    private String[] mExtensions;

    public ExtensionFilenameFilter(String[] extensions) {
        super();
        mExtensions = extensions;
    }

    public boolean accept(File dir, String filename) {
        if(new File(dir, filename).isDirectory()) {
            // Accept all directory names
            return true;
        }
        if(mExtensions != null && mExtensions.length > 0) {
            for(int i = 0; i < mExtensions.length; i++) {
                if(filename.endsWith(mExtensions[i])) {
                    // The filename ends with the extension
                    return true;
                }
            }
            // The filename did not match any of the extensions
            return false;
        }
        // No extensions has been set. Accept all file extensions.
        return true;
       }
    }
  } 
```

In android application using these classes i am able to browse and select files but i want to execute these classes using phonegap. can anyone please help me how to use these classes in phonegap using html and js files?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:08:17.913

I think you need to create a plugin class by following [this](http://docs.phonegap.com/en/2.0.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android).

You can create an object of your class inside the `execute` and you can use your java functions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:52:17.947

[Communication between Android Java and Phonegap Javascript?](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)

This should work for you, you need to call JAVA method in javascript.

# database - wordpress 在哪里存储域名以及何时“未保留”？

> ID：11859023
> 
> 赞同：0
> 
> 时间：2012-08-08T06:43:58.420
> 
> 标签：database, validation, wordpress

我正在创建一个多站点 wordpress 博客。我正在使用自己的代码进行注册，而不是 wordpress 注册。一切正常，除了我有时会收到此错误`"Sorry!that site is reserved"`。但这并不总是如此。我很难理清这背后的逻辑。我已经检查了同名域的数据库但我什至没有找到它。当我在浏览器中输入网址时，它说该站点尚不存在。

我错过了什么？这造成的问题是用户已经注册了电子邮件，我必须提供不同的注册详细信息才能创建一个新站点。我必须重新开始。我正在通过 Ajax 进行验证，并确保一切都符合要求以避免这种情况。但是我缺少一个条件。请帮我找到那个。谢谢。

更新：错误似乎是从 697 附近的 ms-functions.php 行产生的。我似乎无法理解代码背后的逻辑。我认为如果用户名与博客名一起存在，请检查 $user是一个对象，登录是否等于博客名，如果博客名不等于用户名（user_login）或者用户不是对象，则终止代码。我可能在写这个问题时解决了这个问题。我会检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:56:27.667

似乎问题在于用户名和子域不能相同（显然！！）我已经检查了条件并且工作正常。但这可能不是真正的问题，可能只是巧合。我仍然欢迎任何关于这个问题的建议和线索。

# android - 如何为多个表创建 SyncAdapter？

> ID：11859029
> 
> 赞同：3
> 
> 时间：2012-08-08T06:44:19.347
> 
> 标签：android, android-syncadapter

我已经从示例同步适配器的 android 开发人员站点下载了示例代码。它只同步一个表，我的问题是我想从同步适配器同步两个表（汽车和船）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:29:38.793

`SyncAdapter`只需调用 a`ContentProvider`来更新存储在`ContentProvider`. 在查询或编辑表的调用中，您提供数据的 URI。要处理的表名是 URI 的一部分，如 Android 的[Content Provider Basics](http://developer.android.com/guide/topics/providers/content-provider-basics.html)文档中所述。至于服务器端，这也将通过要获取或发布到的 URL 来完成。

# vb.net - VB.NET：如何在 xml 文档中引用泛型类和方法

> ID：11859034
> 
> 赞同：5
> 
> 时间：2012-08-08T06:44:49.823
> 
> 标签：vb.net, generics, reference, xml-documentation

**注意**：这是[此问题](https://stackoverflow.com/questions/532166/c-how-to-reference-generic-classes-and-methods-in-xml-documentation)的副本，但适用于 Visual Basic 而不是 C#。

在编写 XML 文档时，您可以使用`<see cref="something">something</see>`，当然可以。但是如何引用具有泛型类型的类或方法呢？

```
Public Class FancyClass(Of T)

  Public Function  FancyMethod(value As T) As String
    Return "something fancy"
  End Function

End Class 
```

如果我要在某处编写 xml 文档，我将如何引用花哨的类？我怎样才能引用一个`FancyClass(Of String)`？方法呢？

例如，在另一个类中，我想让用户知道我将返回一个`FancyClass(Of Integer)`. 我怎么能`see cref`为此做点什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-23T19:46:59.650

看来你在VS2012中不能做这件事，但是在VS2013中已经修复了；你可以简单地写`<see cref="FancyClass(Of T)" />`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T13:40:35.390

我习惯写这样的东西：

```
''' <summary>
''' A great fancy class.
''' </summary>
''' <typeparam name="T">Generic stuff ....</typeparam>
Public Class FancyClass(Of T)

    ''' <summary>
    ''' A fancy method that do fancy operation.
    ''' </summary>
    ''' <param name="value">The value.</param>
    ''' <returns></returns>
    Public Function FancyMethod(value As T) As String
        Return "something fancy"
    End Function

End Class 
```

xml 文档必须讨论您的泛型类。你永远不会引用`FancyClass(Of String)`：这不是一个类。

# javascript - Javascript try/catch 作用域

> ID：11859037
> 
> 赞同：0
> 
> 时间：2012-08-08T06:45:01.773
> 
> 标签：javascript, scope, try-catch

我正在编写一个向服务器发出 Ajax 请求的代码。我在请求之外使用 try/catch 进行错误处理，如下所示。search 方法正在向服务器发送请求，如果它可以读取结果，则调用回调函数。

我在问这个：由于 ajax 请求是异步的，如果回调内部（而不是搜索方法内部）有错误，它会落入外部 catch 块还是我需要在回调函数中进行另一个 try/catch？

```
try {
    service.search(function () {
        var entries = service.getEntries();
        $.each(entries, function (index, content) {
            var cat = {
                // those may throw exceptions, too
                name: content.get("category"),
                path: content.getPath()
            };
            categories.push(cat); // defined somewhere else.
        });
        if (categories.length < totalResults) {
            // A method call may throw exception
        } else if (typeof loadCallback === 'function') {
            // Done.
        }
    });
} catch (e) {

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T16:19:27.183

经过两三年的 javascript 开发，我发现在 ajax 请求中捕获错误的最佳方法是有多个回调：一个用于成功，一个用于错误。

我已经更改了 Netmera HTML5 SDK 中的所有方法，现在我们不需要任何 try/catch 块。我们需要做的就是传递两个函数参数：

```
service.search(function(dataArray) {
    // loop through dataArray
}, function(exception) {
    // Exception detail
} 
```

在搜索方法内部，它类似于：

```
this.search = function(successCallback, errorCallback) {
    ...
    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            if (request.status == 200) {
                successCallback(...);
            } else {
                errorCallback(...);
            }
        }
    };
    request.ontimeout = function () {
        errorCallback(...);
    };

    request.send(...);
}; 
```

# javascript - 我可以将 Netrating 或 Google Analytics 放入 Photoswipe js 以计算每张照片的浏览量吗

> ID：11859041
> 
> 赞同：0
> 
> 时间：2012-08-08T06:45:17.467
> 
> 标签：javascript, photoswipe

我正在为我的移动网络照片库使用 photoswipe js，但我需要知道我拥有的视图数量，因此尝试将我的谷歌分析包含到图库中，但不知何故它只能捕获 1 个视图，但有什么方法可以有一个回调事件来加载谷歌分析？那么用户查看的每个图像都有一个视图吗？有没有专家可以帮助我这个非程序员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:55:03.370

我不知道您希望看到什么代码，但您可以使用 PhotoSwipe.EventTypes，如果您在 06-events.html 中有 photoSwipe 示例，则您有 eventTypes，有一个称为 onDisplayImage，在此事件中您可以将分析代码用于虚拟网页浏览量[http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55529)，它会成功的。确保不要发送两次浏览量跟踪，有时 onDisplayImage 会多次调用它。

我希望这对你有所帮助。

# objective-c - UIImagePNGRepresentation 内存泄漏

> ID：11859051
> 
> 赞同：1
> 
> 时间：2012-08-08T06:45:48.927
> 
> 标签：objective-c, ios, uiimagepngrepresentation

我在我的代码中使用了下面的行

```
 NSData *dataForImage=UIImagePNGRepresentation(image); 
```

我的应用程序由于内存不足而崩溃。当我使用 VM 跟踪器/分配时，它显示了堆增长。我分析了代码。它显示我在上面的线上泄漏为 100%。方法是否`UIImagePNGRepresentation`需要更多的内存分配？据我所知，它返回一个自动释放的对象。

如果我做错了什么，请告诉我。

编辑：它没有显示泄漏仪器泄漏。我使用了分配工具，然后对特定功能进行了快照。它向我展示了堆增长。我认为它是在更多使用应用程序后导致应用程序崩溃的原因。在堆中我使用了“扩展详细信息”，它在上面的行上显示了 100%

编辑：希望这会有所帮助

```
-(IBAction)Save{

                MyInfo *myInfo = [[MyInfo alloc]init];
                if (theimageView.image != nil) {

                     UIImage *image=[theimageView.image fixImageOrientation];
                    [myInfo set_image:image];
                    NSData *dataForImage=UIImagePNGRepresentation(image);
                    image=nil;

                    [myInfo set_imageData:dataForImage];
                    dataForImage=nil;
                }
  [tempArray addObject:myInfo];
  [myInfo release];
  myInfo=nil;
  // Here I have added myInfo object in array and released that object

 } 
```

在上面的代码中，`fixImageOrientation`是为 UIImage 写的一个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T02:12:34.357

我的猜测是`UIImagePNGRepresentation(image)`导致问题的方法。你需要排空游泳池。

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

NSData *dataForImage=UIImagePNGRepresentation(image);

[pool release]; 
```

或在弧

```
@autoreleasepool
{
    NSData *dataForImage=UIImagePNGRepresentation(image);
} 
```

# javascript - 如何从 json Web 服务获取自动完成 jquery mobile 的源代码？

> ID：11859052
> 
> 赞同：0
> 
> 时间：2012-08-08T06:45:49.980
> 
> 标签：javascript, json, autocomplete

我想从我的 json Web 服务中获取自动完成插件的数据源。但我无法将 json 字符串放入自动完成插件的数据源中。但是为什么我的网络服务中的数据源没有显示？

这是我的网络服务 json [http://www.myservice.com/Service1.svc/list](http://www.myservice.com/Service1.svc/list)中显示的内容：

```
{"GetReportArResult":[
    {"FNCustomerCode":"RSK346","FnCustomerName":"KITCHEN LANGUAGE PTE LTD"},
    {"FNCustomerCode":"RSL117","FnCustomerName":"LOVELIFE VENTURES PTE LTD"},
    {"FNCustomerCode":"RSU386","FnCustomerName":"UDDERS PTE LTD"},
    {"FNCustomerCode":"RSB638","FnCustomerName":"BODY PLUS PTE LTD"},
    {"FNCustomerCode":"NTU042","FnCustomerName":"NTUC FAIRPRICE (339) -MARSILING MRT"},
    {"FNCustomerCode":"NTU108","FnCustomerName":"NTUC FAIRPRICE (335) -JURONG WEST"},
    {"FNCustomerCode":"RSI559","FnCustomerName":"IGGY'S PTE LTD"},
    {"FNCustomerCode":"RSG843","FnCustomerName":"GOLDEN DEVELOPMENT PTE LTD"},
    {"FNCustomerCode":"RSK583","FnCustomerName":"KOUFU PTE LTD (RASAPURA MASTER)"}
]} 
```

这是我到目前为止所做的：

```
$("#ar_main").bind("pageshow", function(e) {
    $("#text_customer").autocomplete({
        target: $('#suggestions'),
        source: function(request, response) {
            $.ajax({
                type: "GET",
                contentType: "application/json; charset=utf-8",
                url: "http://www.myservice.com/Service1.svc/list",
                dataType: "json",
                data: {
                    term: request.term
                },
                success: function(data) {
                    response($.map(data.GetReportArResult, function(item) {
                        return {
                            label: item.FnCustomerName,
                            value: item.FnCustomerCode
                        };
                    }));
                }
            });
        },
        link: 'target.html?term=',
        minLength: 1
    });
}); 
```

# mysql - 从单个列中删除重复项

> ID：11859054
> 
> 赞同：1
> 
> 时间：2012-08-08T06:45:55.070
> 
> 标签：mysql, sql

我有一张这样的桌子：

*桌子*

```
id
=====
1
1
2
2
6
6
7
5
5
9 
```

除了创建新表之外，我还需要删除重复项。一种方法是：

```
create table_new (select distinct id from table ) 
```

是否有删除重复项的删除命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:16:41.363

恕我直言，在普通情况下（Ansi SQL）你不能这样做，因为没有唯一的关键字段，你不能区分一行和另一行，所以你不能删除它。

但在 MySQL 中，您可以运行这个 UGLY 查询。它使用@S sting 来累积 ID，所以不要在大桌子上使用它：

```
set @S:=',';
delete from t 
where if(LOCATE(CONCAT(',',ID,','),@S)>0,'del',@S:=CONCAT(@S,ID,','))='del' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:01:08.450

示例代码

[http://sqlfiddle.com/#!3/56182/2](http://sqlfiddle.com/#!3/56182/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:02:40.363

我不确定是否有任何直接实现，但这里有一个您可能感兴趣的函数实现。

```
function RemoveDuplicates($TableName, $UniqueFieldName, $IDFieldName, $FirstFoundIDValue)
{
    $Query =    "DELETE  FROM ".$TableName." ".
                "WHERE    ".$IDFieldName." IN ".
                "( SELECT a.".$IDFieldName." ".
                    "FROM ".$TableName." a, ".$TableName." b ".
                    "WHERE (a.".$UniqueFieldName." = b.".$UniqueFieldName.") ".
                    "AND (a.".$IDFieldName." > ".$FirstFoundIDValue.") ".
                    "GROUP BY a.".$IDFieldName." ".
                    "HAVING COUNT(a.".$UniqueFieldName.") > 1 ".
                ")";
    db_query($Query);

// Example Use:            
// delete  from tblps_CommEquip 
// where PSID in    
// ( select a.PSID from tblps_CommEquip a, tblps_CommEquip b     
//      where    (a.CommEquipType = b.CommEquipType) 
//      AND (a.PSID > 80)    
//      group by a.PSID 
//      having count(a.CommEquipType) > 1
// )
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:51:19.403

第一次上谷歌：

> [http://support.microsoft.com/kb/139444/en-us?fr=1](http://support.microsoft.com/kb/139444/en-us?fr=1)

本文描述了使用临时表来保存唯一记录，清除原始表并将唯一记录添加回其中，您可能可以通过编写一些存储过程来做到这一点，但我想您只需要这样做一次吗？然后我会按照描述的方法去。此外，为了防止将来出现问题，请对该字段使用唯一键或主键约束，这样就不可能有 2 条记录具有相同的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T06:52:01.277

您可以使用 cte：

```
;WITH cte
     AS (SELECT ROW_NUMBER() OVER (PARTITION BY ID 
                                       ORDER BY ( SELECT 0)) RN
         FROM   #MyTable)
DELETE FROM cte
WHERE  RN > 1 
```

这将避免为您的不同记录创建临时表或保留表的需要。如果您有可能包含重复值的其他列，则可以`ID`在`PARTITION BY`表达式的后面添加它们。

尽管我会担心您为什么有重复的 ID 值。

*   如果这是一个行 ID，那么我建议使用 IDENTITY 并自动增加 ID。
*   如果它是一个项目或参考 ID，那么我会尽量避免添加重复项（这可能是完全错误的，具体取决于您的结构）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T06:55:17.997

删除所有重复项的单个查询（在 Oracle 中测试）

> 从 my_table 中删除 rowid 不在（按 id 从 temp_table 组中选择 min(rowid)）；

解释：

默认情况下，Oracle 给每一行一个 rowid（我相信其他数据库有相同或相似的东西）。

我们先看一下内部查询。Group by 子句根据一些标准对行进行分组，在我们的例子中是 Id。我们也可以基于多个列进行分组（按 col1、col2 分组）。当我们说 min(rowid) 时，我们只是确保它返回一个 rowid，以防多行具有重复的列。

外部删除查询很简单，它只是从表中删除我们内部查询未返回的所有其他内容（重复项）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T10:10:56.990

删除重复行的最佳方法是提供一个唯一标识表中每条记录的主键列。

# java - Android 中增强现实应用的离线地图

> ID：11859058
> 
> 赞同：2
> 
> 时间：2012-08-08T06:46:19.030
> 
> 标签：java, android, android-mapview, augmented-reality

我刚刚专注于为离线开发一个增强现实地图应用程序。我已经浏览了[Mixare](https://github.com/mixare/mixare)代码，需要制作离线（无互联网）AR 应用程序。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:54:26.253

嗨，我最近使用 mixare 创建了一个离线应用程序。我是通过使用插件来实现的。该项目可以在这里找到：[https ://github.com/abduegal/Arena-mixare](https://github.com/abduegal/Arena-mixare)

连同一些关于如何使用插件的文档：[https ://github.com/abduegal/mixare/wiki](https://github.com/abduegal/mixare/wiki)

我基本上所做的是创建一个 mixare 启动器并将其与一些插件捆绑在一起。我在我的插件中覆盖了 mixare 的一些功能，通过这样做我能够创建一个离线版本。

* * *

OfflineConverter 将在线数据源转换为离线数据源：[https ://github.com/abduegal/Arena-mixare/blob/master/src/org/mixare/plugin/util/OfflineConverter.java](https://github.com/abduegal/Arena-mixare/blob/master/src/org/mixare/plugin/util/OfflineConverter.java) **注意**它不能转换音频和视频标记。

支持离线标记[https://github.com/abduegal/Arena-mixare/blob/master/src/org/mixare/plugin/OfflineCapableImageMarker.java](https://github.com/abduegal/Arena-mixare/blob/master/src/org/mixare/plugin/OfflineCapableImageMarker.java) 是一个插件，它覆盖默认标记并打开活动对话框而不是网页浏览。

您也可以加入 mixare google 群组，并在必要时寻求帮助。你会在那里得到更快的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T14:09:30.417

根据定义，AR 意味着基于位置的 UI/UX。*如果*您创建类似于“飞机”模式的模式功能，可以禁用 GPS 和位置报告，则应该可以为离线创建地图。（在飞行模式下对 AR 应用程序进行错误测试也很棒！） - 希望对您有所帮助...

# java - 开发离线词典

> ID：11859059
> 
> 赞同：-6
> 
> 时间：2012-08-08T06:46:19.683
> 
> 标签：java, dictionary, translation, nokia-s40

请我对 Java 编程比较陌生，我是计算机科学专业的一年级学生，请我想为诺基亚 s40 手机开发一个离线字典 .jar，它将英语翻译成我的本地语言 我已经用谷歌搜索并搜索了类似帖子的讨论主题，但是我还没有找到任何相关的帖子，请任何帮助和信息都会很有用，因为我仍然是初学者非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T06:55:16.437

如果对你来说一切都是新的，我建议先从基础开始学习写作，即学习编写一个简单的桌面词典应用程序。之后，您将了解程序的结构和组件应该是什么。然后您就可以开始学习如何对诺基亚手机进行编程并将应用程序移植过来。

首先查看一些开源字典的源代码。例如，openDict [http://opendict.sourceforge.net/?cid=1](http://opendict.sourceforge.net/?cid=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:56:33.160

字典只不过是类似于地图的东西，它将两个字符串映射在一起，或者将关键字映射到描述。您可以使用[MAP 接口](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)开始。

您可以使用上述内容执行以下操作：

```
 Map<String, String> myDictionary = TreeMap<String, String>();
    dictionary.put("Hello", "Ola in Spanish");
    System.out.println(myDictionary.get("Hello")); 
```

这里，

*   key - 提供对值的访问。
*   value - 映射到指定的键。
*   你好 - Ola 西班牙语

# r - Data.table 和 get() 命令 (R)

> ID：11859063
> 
> 赞同：3
> 
> 时间：2012-08-08T06:46:57.327
> 
> 标签：r, function, data.table

我有一个问题，包括`data.table`函数中的操作。输入参数是 data.table 名称和列/变量名称。

我可以使用`get()`命令引用data.table。但是，对变量名使用相同的命令不起作用。我知道这`get()`可能不适合列/变量名称，但我坚持使用哪个命令。

**已编辑：**我现在已经包含`substitute()`而不是`get()`它仍然无法正常工作。

```
toy_example_fun <- function(d, .expr){

  .expr = substitute(.expr)

  setkey(get(d), .expr)  # ==> doesn't work

  d.agg <- get(d)[,list(sum(y), sum(v)), by=.expr]  # --> works
}

toy_example_fun("DT", x) 
```

**替代方案：** `quote()` -> 这行得通。但是，我对在函数内部工作的解决方案感兴趣。

```
DT <- data.table(x=rep(c("a","b","c"),each=3), y=c(1,3,6), v=1:9)    
d <- "DT"
variable <- quote(x)
d.agg <- get(d)[,list(sum(y), sum(v)), by=variable] 
```

尽管如此，后一种替代方法`variable <- quote(x)`会产生错误消息：

```
 <simpleError in doTryCatch(return(expr), name, parentenv, handler): object 'x' not found>
    <simpleError in is.scalar(val): object 'x' not found>
    <simpleError in is.data.frame(obj): object 'x' not found> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:58:38.377

干得好：

```
someFun <- function(d, .expr){
  group <- substitute(.expr)
  get(d)[,list(sum(y), sum(v)), by=group]
}

someFun("DT", x)
   group V1 V2
1:     a 10  6
2:     b 10 15
3:     c 10 24

someFun("DT", "x")
   x V1 V2
1: a 10  6
2: b 10 15
3: c 10 24 
```

* * *

马修编辑：

+1 以上。和/或字符列名也可以`by`直接接受：

```
someFun = function(d, col) {
    get(d)[,list(sum(y),sum(v)),by=col]
}
someFun("DT","x")
   x V1 V2
1: a 10  6
2: b 10 15
3: c 10 24
someFun("DT","x,y")
   x y V1 V2
1: a 1  1  1
2: a 3  3  2
3: a 6  6  3
4: b 1  1  4
5: b 3  3  5
6: b 6  6  6
7: c 1  1  7
8: c 3  3  8
9: c 6  6  9 
```

但随后`someFun("DT",x)`将无法正常工作。所以阿德里的回答更笼统。

* * *

编辑`setkeyv`

```
someFun <- function(d, cols){
  setkeyv(get(d), cols)
  cols <- substitute(cols)
  get(d)[,list(sum(y), sum(v)), by=cols]
}

someFun("DT", "x")
   x V1 V2
1: a 10  6
2: b 10 15
3: c 10 24 
```

# jquery - 根据类获取元素的子基数？

> ID：11859066
> 
> 赞同：1
> 
> 时间：2012-08-08T06:47:06.190
> 
> 标签：jquery

如何在其容器内获取具有类“选定”位置的 li 元素？

```
<ul>
  <li></li>
  <li class="selected"></li>
  <li></li>
</ul> 
```

在这种情况下，它应该返回 2，因为它是容器内的第二个 li。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:58:52.003

```
var elem = $('li.selected');
$('ul li').index(elem); 
```

这将返回 1，因为元素索引从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:59:17.107

尝试这个

**HTML**

```
<ul>
    <li></li>
    <li class="selected"></li>
    <li></li>
</ul>​ 
```

**JS**

```
var selectedIndex=$("ul li.selected").index()+1; 
alert(selectedIndex); // outputs 2 
```

基本上第一个索引是`0`，第二个索引是`1`，所以`+1`根据你的问题使用第二个索引`2`而不是`1`。

[**演示**](http://jsfiddle.net/heera/QrtPG/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:50:51.053

```
$(".selected").index(); 
```

[查看](http://api.jquery.com/index/)`.index(...)`jQuery 函数。

请注意，索引函数返回从零开始的节点位置，而不是从一开始，因此第一个元素将是“在零索引中”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:53:11.820

您可能会阅读：[如何获取兄弟姐妹之间的元素编号/索引](https://stackoverflow.com/questions/4654028/getting-the-element-number-in-jquery)

`var selectedIndex = $("#selected").index() + 1;`

`var selectedIndex = $(".selected").index() + 1;`（为你）

这是公认的答案，对您的问题也有好处。

另请阅读[Index()](http://api.jquery.com/index/)属性。

# iphone - 在 ios 中存储应用程序数据的最佳位置是什么？

> ID：11859069
> 
> 赞同：2
> 
> 时间：2012-08-08T06:47:13.310
> 
> 标签：iphone, ios5, nsdocumentdirectory

我认为有很多与 ios 存储指南相关的问题。我在[这里找到了一个](https://stackoverflow.com/questions/11857837/can-i-save-the-downloaded-files-to-nscachedictionary-in-iphone)。但我想对此进行更多澄清：

我的文件很少存储在 NSDocumentDirectory 中。比如我的数据库文件、Plist 文件以及一些临时的音频和视频文件。

在 ios < 5.0 中存储文件没有问题.. 但是在参考[http://developer.apple.com/library/ios/#qa/qa1719/_index.html](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)时显示问题

在 ios 5.1 有不同的方法和 iso 5.0.1 有不同.. 和 ios 5.0 不允许文件以防止备份

我的问题是：

1.  我是否必须通过检查 ios 5.1 和 5.0.1 的 ios 版本来实现这两种方法？
2.  我是否必须为我的数据库文件和 plist 文件使用 Caches 目录而不是 NSDocument 目录，因为在 ios 5.0 中没有阻止文件在 icloud 上备份的选项？
3.  iOS 会在必要时从 Caches 目录中删除您的文件，所以如果我将数据库文件存储在 Caches 目录中，我该如何存储它。我不想丢失数据。

如链接中所述：

`It is not possible to exclude data from backups on iOS 5.0\. If your app must support iOS 5.0, then you will need to store your app data in Caches to avoid that data being backed up. iOS will delete your files from the Caches directory when necessary, so your app will need to degrade gracefully if it's data files are deleted.`

我不希望我的数据库和 plist 文件在任何情况下都被删除。

任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:56:14.517

您可以使用 Documents 文件夹来保存您的数据库和 plist。由于您不希望备份数据库，因此您可以使用文件属性对其进行标记。还是我误会了你？

更新：

不要使用已弃用的方式将文件标记为非后退，只需使用提供的新方式即可。看看这里[输入链接描述这里](https://stackoverflow.com/questions/10121165/how-to-use-nsurlisexcludedfrombackupkey-or-kcfurlisexcludedfrombackupkey)如何做到这一点。正确的位置仍然是 Dokuments 文件夹，因为那里的文件不会被删除。

# jquery - jQuery滑块 - 看不到页面底部，页面大时浏览器滚动条不出现

> ID：11859071
> 
> 赞同：0
> 
> 时间：2012-08-08T06:47:20.167
> 
> 标签：jquery, html, css, slider, scrollbar

当内容部分没有太多文本时，这是一个工作代码： [jsFiddle](http://jsfiddle.net/wvGHL/)

解释，里面有什么：居中的内容+粘性页脚，点击链接时所有内容都会向下滑动。链接也向下滑动。当内容部分很小时，一切正常。

同样的代码在这里[jsFiddle](http://jsfiddle.net/dZu74/)，与第一个链接的唯一区别是 html 内容：我添加了太多文本，所以你可以看到仍然没有滚动条来向下滚动页面。您看不到粘性页脚。为什么不显示滚动条？怎么修？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:03:34.607

在您的 CSS 中，您拥有包含所有内容`overflow: hidden;`的div。`#global-container`因此，任何不适合 div 的内容都会被隐藏。

将其更改为`overflow: auto;`，一旦有很多内容，您将获得一个滚动条。

# android - 将 Android 布局从相对更改为线性

> ID：11859073
> 
> 赞同：9
> 
> 时间：2012-08-08T06:47:24.460
> 
> 标签：android, android-layout

我刚开始创建 android 应用程序，但是我在更改时遇到了问题`layout`，每次我创建新的 android 项目时，它都会给我`RelativeLayout`而不是`LinearLayout`，（好吧，基本上我是按照书上的说明进行操作的，但它并没有教我如何更改它）我认为必须有一个默认设置，以便我可以将其更改`Relativelayout`为`LinearLayout`.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-08T06:56:00.960

替换以下标签：

```
<RelativeLayout
    ... >

</RelativeLayout> 
```

由那些：

```
<LinearLayout
    ... >

</LinearLayout> 
```

此外，您应该从 TextView 属性中删除以下内容：

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

因为他们申请的是相对布局而不是线性布局。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T08:16:23.163

要更改`Parent`您的`layout XML`文件，请按照下列步骤操作：

*   右键单击Eclipse 中项目文件`layout`夹中的文件夹中的文件夹。`res`( `<project-folder/res/layout>`)
*   选择选项`New -> Other...`。参考图片：![选择布局文件夹](../Images/302a01d2f8b4b2aefa15e07f938e2e1a.png)
*   `Android Layout XML file`从这里选择选项。![在此处输入图像描述](../Images/29ccc7c4dc51c392eb27718cb06dce06.png)
*   按`Next`并选择`LinearLayout`as`Root Element`和 give `File Name`。按完成![在此处输入图像描述](../Images/01d977af198121ecc439ade728dd6f97.png)
*   现在你`Layout XML`的根元素为`LinearLayout`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-02T17:19:00.090

如果您使用的是 Eclipse，只需：右击，更改布局并选择您选择的布局。

[图例：](https://i.imgur.com/uYS0Xlk.png)

![在此处输入图像描述](../Images/0454e1ac5319aa0f9e2056c3fd16f274.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-08T06:51:50.293

您只需要使用 更改此标签`<RelativeLayout ...>`，`<LinearLayout ...>`并且不要忘记使用相同的 Layout 关闭它

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-03T16:24:21.557

在最新版本的**android studio**中，我相信这将是实现它的方法。

**转到 res-> layout 文件夹**并右键单击它，您会看到一个侧边栏，询问您要创建的文件类型

转到 ->**编辑文件模板**选项。

[![在此处输入图像描述](../Images/97b04fc9924f52ffb3ab2a41c88835ea.png)](https://i.stack.imgur.com/mEH1w.png)

您将看到此对话框打开。您可以在“**其他**”选项卡中看到这两个选项这些选项是**LayoutResourceFile.xml**和**LayoutResourceFile_vertical.xml**

[![在此处输入图像描述](../Images/f5c4399cf2be705ae9faf8a4097c49cc.png)](https://i.stack.imgur.com/F5vgS.png)

在这两个**LayoutResourceFile.xml**和**LayoutResourceFile_vertical.xml中将****${ROOT_TAG}**更改为 LinearLayout ，您将始终将**LinearLayout**作为父级。

 ******[![改变](../Images/ee98e57149c3a57c76a31d44822fab3c.png)](https://i.stack.imgur.com/E1vdK.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T06:54:07.850

当您创建新的 XML 文件时，您可以为其分配布局。但是当您创建新项目时，您不能更改布局，您必须在创建项目后更改它。所以转到 XML 文件中的 .xml 选项卡您可以编辑布局。希望这可以帮助。******

# xml - XML 文件未在 Internet Explorer 中打开

> ID：11859074
> 
> 赞同：0
> 
> 时间：2012-08-08T06:47:38.013
> 
> 标签：xml, internet-explorer

我无法在我的 Internet Explorer 8 中使用 XML 文件。当我尝试打开它时，IE 会抛出一个错误，指出：

无法使用样式表查看 XML 输入。请更正错误并重试。
系统错误：-2146697211。

但我可以在记事本中查看 XML。请在这件事上给予我帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:58:04.510

xml 文件不是一个有效的文件。

记事本向您显示文本。ie8 尝试验证xml。

使用 xml 编辑器查找错误的位置并尝试修复它。

# php - android中的会话问题

> ID：11859075
> 
> 赞同：0
> 
> 时间：2012-08-08T06:47:56.000
> 
> 标签：php, android, session, httpclient

在我的应用程序中，我使用的是 PHP Web 服务器。

在主要活动中，我使用用户名和密码连接到服务器。使用这些值，服务器开始我的会话。

因此，为了维护会话，我在整个应用程序中使用相同的 HTTP 客户端。

```
public static HttpClient httpclient = new DefaultHttpClient(); 
```

但问题是，大多数情况下，如果我想从服务器获取数据，我会使用后台线程来获取数据，然后更新 UI 线程。因此，当我在后台分配客户端并且用户尝试通过单击 UI 上的按钮来建立其他连接时。它给了我这个例外

```
Invalid use of SingleClientConnManager: connection still allocated. 
```

我正在捕获此异常，因此应用程序不会崩溃，但会话正在被破坏。因此我最终在某些视图中显示“空”。

谁能帮助我如何以更好的方式维护会话以及如何避免此 SingleClientConnManager 异常。

谢谢你

我想到了这种方法：

当应用程序崩溃或给出 singleClientConnManager 异常（在任何一种情况下会话都丢失）时，使用`java.lang.Thread.UncaughtExceptionHandler`i 再次连接到服务器，使用使用 Shared Preferences 存储的用户名和密码（这将再次启动会话），然后重新启动当前活动。我没有尝试过，但我想知道这是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:17:05.893

您应该尝试避免该异常，而不是捕获它并解决它！建议的方法对我来说看起来*不是好的做法。*

在我看来，问题在于您只有一个连接，但用户可以启动 2。如果是这种情况，您应该能够处理它，或者阻止用户这样做。

*   一种选择是：认识到您已经有一个连接（不要依赖这个例外），然后开始一个新的连接。我的意思是，在这种情况下，您不依赖于抛出异常的连接，而是通过“正常”方式检查是否已经存在一个异常（例如一些变量）。你可以从那里开始听起来有点像黑客（重新启动活动和所有），但最好是等待异常。

*   另一种选择可能是在其他请求仍在进行时阻止用户按下按钮，但这取决于您的应用程序可能是用户界面失败。这取决于用户看到什么以及我猜发生了什么。您可以通过使用微调器来做到这一点，禁用除表单之外的所有按钮，有很多方法可以实现这一点。

*   最后，您可能希望将请求“排队”并仅在完成宝贵的请求后将其发送到服务器。这样您就可以毫无例外地使用连接。我的意思是你保持一切原样，但是按下第二个按钮后的动作是记住你必须做这个动作，在第一个动作返回后，然后检查是否还有其他事情要做。

**不要依赖异常来处理代码流！**

# c# - 指定的强制转换在 foreach 中无效

> ID：11859077
> 
> 赞同：1
> 
> 时间：2012-08-08T06:48:00.043
> 
> 标签：c#, winforms, linq-to-sql

我使用 LinqToSql 作为 ORM。我有一个包含以下代码的表单：

```
public partial class frmBarcodeList : Form
{

    private ConnectionStringSettings connectionString = ConfigurationManager.ConnectionStrings["myconn"];
    private DatabaseContext _context; 

    public frmBarcodeList()
        {
            _context = new DatabaseContext(connectionString.ConnectionString);
            InitializeComponent();               
        }    
} 
```

在按钮处理程序中单击我调用`GetInfoFromDataBase`. 这是问题方法：

```
private List<TicketInfo> GetInfoFromDataBase()
        {
            try
            {
                var oids = GetSelectedEvents();

                List<Order> orders = new List<Order>();
                List<TicketInfo> data = new List<TicketInfo>();
                foreach (var oid in oids)
                {
                    orders.AddRange(_context.Orders.Where(o => o.ScheduleId == oid && o.IsPayed.Value).ToList());
                }

                foreach (var order in orders)
                {
                    foreach (var detail in order.OrderDetails) ***line 158**
                    {
                        var checkSum = CalculateChecksum(detail.BarCode);
                        TicketInfo info = new TicketInfo();
                        info.Firstname = order.SiteUser.FirstName;
                        info.LastName = order.SiteUser.LastName;
                        info.Email = order.SiteUser.Email;
                        info.Phone = order.SiteUser.PhoneNumber;
                        info.Barcode = string.Format("{0}{1}", detail.BarCode, checkSum);
                        info.FileName = RemoveInvalidFilePathCharacters(string.Format("{0}_{1}", order.EventSchedule.BaseEvent.Name,
                                                                                      order.EventSchedule.RecurrenceStart), "");
                        data.Add(info);
                    }
                }
                return data;
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message + "\n" + e.StackTrace);
            }

            return null;
        } 
```

我得到错误：

```
---------------------------

---------------------------
Specified cast is not valid.
   at System.Data.SqlClient.SqlBuffer.get_Int32()

   at System.Data.SqlClient.SqlDataReader.GetInt32(Int32 i)

   at Read_OrderDetail(ObjectMaterializer`1 )

   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()

   at System.Data.Linq.EntitySet`1.Load()

   at System.Data.Linq.EntitySet`1.GetEnumerator()

   at DT.KazBilet2.BarcodeChecker.frmBarcodeList.GetInfoFromDataBase() in C:\Users\Макс\Documents\Visual Studio 2010\Projects\DT.KazBilet2\branches\NewDesk\DT.KazBilet2.BarcodeChecker\frmBarcodeList.cs:line 158
---------------------------
ОК   
--------------------------- 
```

为什么我会收到此错误？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:34:03.410

使用 Linq2SQL 时，SqlClient 方法中的类型转换错误（几乎）总是由于模型错误。

我会检查模型是否与数据库一致，尤其是模型中的 int 字段（get_Int32 给出错误）对应于数据库中的实际整数字段。

# drupal - Drupal 视图 - 根据 URL 过滤内容

> ID：11859079
> 
> 赞同：1
> 
> 时间：2012-08-08T06:48:04.893
> 
> 标签：drupal, drupal-views, drupal-contextual-filters

我有一个显示特定内容类型（广告）的视图。我的内容类型有一个“仅在页面上显示”字段，它是一种文本类型。在这里，我将给出应该显示特定内容的页面。

我创建了一个显示在 /blog 上的块，它显示了所有广告内容。但如果网址匹配，我希望广告仅在块中显示。

例如。如果添加了一个广告，说“abc”，“仅在页面上显示”为“/blog/europe/*”，那么只有当人们访问一个 URL 时，才应该在块中显示“abc”，比如 /blog/europe/france 等。

现在我创建了一个视图，但我不知道如何将“仅在页面上显示”字段作为参数传递给视图。

基本上我希望发生以下情况：

```
if "page url" contains "show only on field" then select the content
else don't select. 
```

这种类型的过滤器是否可以在 drupal 视图中使用？我希望意见论点可以挽救我的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:33:17.980

将参数传递给视图有不同的方法，具体取决于您显示视图的方式。我希望我能正确理解你的问题。听起来您想通过“仅在页面上显示”字段的值过滤视图的内容。要过滤的“仅在页面上显示”的实际值是通过 URL 传递的。

为此，您必须在视图中添加上下文过滤器。然后，您可以将“仅在页面上显示”的值作为 URL 中的参数添加到该视图。在这种情况下，当您加载视图时，它将仅显示那些“仅在页面上显示”字段等于您在 URL 中传递的值的节点。

例如，页面视图的路径可能是“path/to/view”。然后，您将在此 url 中添加“仅在页面上显示”参数（例如“path/to/view/value_of_show_only_on_page”）。当您使用此 URL 时，您的视图将被过滤，因此仅显示“仅在页面上显示”的值等于“value_of_show_only_on_page”的内容。

注意 Drupal 6 中的“上下文过滤器”在 Views UI 中被称为“参数”。

# android - 如何在 android 的画布上创建一个按钮并将该按钮链接到图像以显示/隐藏？

> ID：11859081
> 
> 赞同：3
> 
> 时间：2012-08-08T06:48:13.830
> 
> 标签：android, canvas

我想在 android 上的画布上有一个按钮，它可以弹出一个图像，然后再次单击图像消失。

```
public class Charts extends Activity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new Draw(this));
    }
}

private class Draw extends View {
    public Draw(Context context) {
        super(context);
    }

    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
    }
} 
```

上面的代码是我的代码的开始，在此之后我使用了一些小的基本工具，如绘画，如上所示，我扩展了视图......我不确定如何放置按钮

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:35:53.383

我不知道这是否可能，但我看到了 2 个选项：

1.  您可以在画布上绘制一个按钮，这基本上是一个`Bitmap`图像，然后单击检查指针坐标是否在位图区域坐标内。

2.  或者，将您`Canvas`放入 a`RelativeLayout`并在其中添加一个 Button 控件。既然你在a `RelativeLayout`，`Button`就会出现在a上`Canvas`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:34:17.883

Canvas 不是视图，SurfaceView 是视图。您可以将 Button（或任何其他视图）放在 ViewGroup 中。所有布局，如 LinearLayout、RelativeLayout 等都是 ViewGroup，其中包含一个或多个 View 子项。

我相信您想在 SurfaceView 中放置一个 Button。您不能在 SurfaceView 中放置一个按钮，但您可以做的是，设计您的 UI，使其在布局中有一个 SurfaceView，并且在它附近有一个您想要单击的按钮。

编辑：@Andy Res 在 2) 中建议的内容可能是您正在寻找的内容。将 SurfaceView 放在 RelativeLayout 中，并在相同布局中有一个按钮。或者您可以使用 FrameLayout 并在其中包含 SurfaceView 和 Button。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:01:55.687

这就是我的做法（对我有用）：

*   在画布上绘制按钮的位图。
*   使用 Android touch api，检测触摸坐标是否在位图 dst rec 中。
*   如果上述结果属实，则在画布上绘制您希望“弹出”的位图。

我希望这能让您更好地了解如何执行此操作。

**更新：**

```
private class Draw extends View implements OnTouchListener {
    Rect button = new Rect(); // Define the dimensions of the button here
    boolean buttonClicked;

    public Draw(Context context) {
        super(context);
    }

    public void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        if (buttonClicked == true) {
            canvas.drawBitmap(source, null, button, null); 
                    // Source will be a that of a clicked button bitmap
        } else {
            canvas.drawBitmap(source, null, button, null); 
                    // Source will be a that of a non clicked button bitmap
        }

    }

    @Override
    public boolean onTouch(View view, MotionEvent event) {
        if (button.contains(event.getX(), event.getY())) {
            buttonClicked = true;
        } else {
            buttonClicked = false;
        }

        return true;
    }

} 
```

PS：代码不工作的时候不要惊慌，我没有测试过。不知道你是如何渲染你的视图，我建议你移动 SurfaceView 并创建一个渲染线程，这里有一个教程：[http ://www.edu4java.com/androidgame.html](http://www.edu4java.com/androidgame.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T13:27:53.747

我也有类似的要求并以老式的方式解决了它

1.  使用画布绘制一个按钮，并记下按钮在所有四个角上的 x 和 y 坐标。
2.  当用户触摸屏幕时，获取 x 和 y 坐标。
3.  现在检查用户触摸的位置是否落在按钮位置坐标下。如果是，则在代码中执行按钮功能，否则不做任何事情

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:36:23.530

我这样做的方式是使用 .png 图形，然后使用

```
 canvas.drawbitmap(image, rect1, rect2, paint); 
```

其中 image 是 .png rect1 是屏幕上按钮的目标位置 rect2 是我要使用的按钮部分和绘制对象

然后在

```
 @Overide 
    onTouchEvent(MotionEvent event) {} 
```

我输入代码来检测是否在 rect1 边界内检测到运动事件向上（其中包含它在屏幕上的目标位置

然后我会打电话给我创造的东西

```
 Button1Clicked(); 
```

这是我将处理点击的地方。

# jakarta-ee - Java EE：servlet 容器中的垃圾收集

> ID：11859082
> 
> 赞同：1
> 
> 时间：2012-08-08T06:48:16.283
> 
> 标签：jakarta-ee, servlets, garbage-collection

在 servlet 容器中，servlet 'S' 被实例化并服务了一些请求。它依赖于对象“O”，因此它在实例化“S”时创建了该对象。对“O”的唯一引用是通过“S”。

在服务了最初的几次请求后，“S”很长一段时间都没有收到任何请求。现在的问题是：'S' 会被垃圾收集，'O' 会随之而来吗？

或者换句话说，是否存在一些引用“S”的服务器对象“A”，因此无论它是否长时间服务任何请求，它都不会被垃圾收集？如果有一些这样的对象'A'，那么谁指的是'A'所以'A'不是垃圾收集等等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:15:49.763

你的问题没有完美的答案。Servlet 3.0 规范中的第 2.3.4 节指出：

> servlet 容器不需要在任何特定时间段内保持加载 servlet。servlet 实例可以在 servlet 容器中保持活动状态，时间为毫秒，在 servlet 容器的生命周期内（可能是几天、几个月或几年），或者介于两者之间的任何时间。
> 
> 当 servlet 容器确定应该从服务中删除一个 servlet 时，它会调用 Servlet 接口的 destroy 方法以允许 servlet 释放它正在使用的任何资源并保存任何持久状态。例如，当容器想要节省内存资源或正在关闭时，它可能会这样做。

所以它高度依赖于容器本身。有些可能会提供配置功能以在一段时间不活动后卸载 servlet（我不知道有任何功能，但从来不需要这样的功能）。

**结论**

> 在服务了最初的几次请求后，“S”很长一段时间都没有收到任何请求。现在的问题是：'S' 会被垃圾收集，'O' 会随之而来吗？

Servlet 本身的垃圾收集依赖于容器，并且应该在`javax.servlet.Servlet.destroy()`被调用之后进行。之后*应该*为 GC 标记 servlet 'S' - 包括所有引用的对象 'O'（只要这些对象没有在其他地方引用）。同样，它取决于容器的实现。

IMO，这在现实中并不重要。您应该始终认为 servlet 与容器一样长，并且停止容器通常会通过停止 JVM 来释放所有内存。

# javascript - 清空时间间隔

> ID：11859085
> 
> 赞同：0
> 
> 时间：2012-08-08T06:48:24.783
> 
> 标签：javascript, jquery

我面临清除图像滑块时间间隔的问题。当我单击下一个缩略图时，前一个计时器将被清除，如果我选择上一个图像，则前一个选定的计时器将被清除。我正在使用颜色代码作为计时器以便更好地理解。

这是我的演示

[http://codebins.com/bin/4ldqp9c/27](http://codebins.com/bin/4ldqp9c/27)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:00:35.017

当您设置Interval 时，您将其分配给一个变量，然后您稍后使用clearInterval(variable)。所以改变

```
 Slider();
      timer=setInterval(Slider, 4000); 
```

至

```
 Slider();
      clearInterval(timer);
      timer=setInterval(Slider, 4000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:58:47.827

更改`setInterval`为`setTimeout`。`setInterval`将在哪里重复，因为`setTimeout`只会触发一次。

# opencv - cvCalcPGH 与 cvFindContours 的使用

> ID：11859086
> 
> 赞同：4
> 
> 时间：2012-08-08T06:48:27.460
> 
> 标签：opencv

由于某种原因，谷歌没有使用 cvCalcPGH() 的好例子，也没有其他使用 Freeman 代码进行轮廓匹配的好例子。所以我试着做到：

```
#include "opencv2/opencv.hpp"
#include "opencv2/legacy/legacy.hpp"

int
main(int argc, char* argv[]) {

        IplImage* g_gray = cvLoadImage("lisa.png",CV_LOAD_IMAGE_GRAYSCALE);
        cvThreshold( g_gray, g_gray, 100, 255, CV_THRESH_BINARY );

        CvMemStorage* storage=cvCreateMemStorage(0);
        CvSeq* firstContour=NULL;

        int a=cvFindContours(g_gray, storage, &firstContour,sizeof(CvChain),CV_RETR_LIST, CV_CHAIN_CODE);

        CvHistogram *hist;
        int h_bins = 30, s_bins = 30;
        float h_ranges[] = { 0, 180 };
        float s_ranges[] = { 0, 255 };
        int hist_size[] = { h_bins, s_bins };
        float* ranges[] = { h_ranges, s_ranges };

        hist = cvCreateHist( 2, hist_size, CV_HIST_ARRAY, ranges, 1 );
        if( CV_SEQ_ELTYPE( firstContour ) != CV_32SC2 ) {
                printf(":(\n");
        }

        cvCalcPGH((CvSeq *)firstContour,hist);
        return 0;

} 
```

cvFindContours() 将按记录运行，但 cvCalcPGH() 将失败：

```
$ ./calcpgh 
:(
OpenCV Error: Unsupported format or combination of formats (The contour is not valid or the point type is not supported) in cvCalcPGH, file /Users/tonu-samuel/OpenCV-2.4.2/modules/legacy/src/pgh.cpp, line 351
terminate called throwing an exceptionAbort trap: 6
$ 
```

OpenCV 是 2.4.2 并且表示 assert() 是为了`CV_SEQ_ELTYPE( contour ) != CV_32SC2`我也在我的代码中检查。如何解决它不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-13T00:46:16.907

谷歌不会给你很好的例子的原因是你所说的所有东西都被弃用了。

`cvCalcPGH`在新的 opencv 中不再可用，您可能已经知道，因为您已经包含了遗留库。

也`CV_CHAIN_CODE`被[删除](http://docs.opencv.org/2.4.2/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html#findcontours)了，你不能在新的opencv中使用它。

你应该找时间将你的代码移植到新的 opencv 上，它正在流行并且会从其他人那里得到更多的帮助。

但是讨论您当前的代码，正如旧文档所说：

> CV_CHAIN_CODE - 在 Freeman 链码中输出轮廓。所有其他方法输出多边形（顶点序列）

的输出`cvFindContours`始终是顶点序列，`CV_CHAIN_CODE`只是一个例外。这就是为什么`cvCalcPGH`无法理解这些代码的原因。

由于您可能已经使用其他近似方法测试了代码，您应该已经看到`cvCalcPGH`多边形可以正常工作。

您应该自己将 Freeman 代码转换为多边形，然后您可以使用任何您想要的 opencv 方法。但没有它，我还没有看到可以解释 Freeman 代码本身的单一方法。

我不确定应该如何进行这种转换，但是使用以下从[Sara Maher Mohammad](http://tech.groups.yahoo.com/group/OpenCV/message/79071)无耻窃取的代码，您可以提取代码并开始自己解释：

```
CvChainPtReader reader;

cvStartReadChainPoints((CvChain*) firstContour, &reader);
for (int i = 0; i < firstContour->total; i++) {
    CV_READ_SEQ_ELEM(reader.code, (*((CvSeqReader*)&(reader))));
    printf("%d \n", reader.code);
} 
```

但同样，我不建议使用已弃用的方法和函数，您可能会找到更好的方法来做您想做的事。

只是猜测您可能只想找到两个 Freeman 代码之间的距离，您可能不会计算 PGH，而只需使用其他一些距离函数，例如[此处](https://stackoverflow.com/questions/6718525/question-on-freeman-chain-code)讨论的函数。

# qt - 将数据传输到 QProcess 的标准输入时如何处理缓冲区溢出？

> ID：11859088
> 
> 赞同：1
> 
> 时间：2012-08-08T06:48:28.293
> 
> 标签：qt, pipe

我们的 Qt 应用程序`write()`将大量数据发送到 a`QProcess`的标准输入。通常，该进程的读取速度比我的 Qt 应用程序的写入速度快。所以一切都很好。

问题是反过来会发生什么？未读缓冲区是否会随着时间的推移不断增加，超出操作系统允许的范围？还是Qt设置了限制。我在 Qt 的文档中找不到任何内容，或者我找不到任何缓冲区溢出警告信号，我可以用来减慢应用程序的写入速度。

# sockets - 创建两个套接字时保证临时端口相同，一个TCP和一个UDP

> ID：11859090
> 
> 赞同：0
> 
> 时间：2012-08-08T06:48:39.510
> 
> 标签：sockets

是否有一种简单（非迭代）的方法来绑定两个套接字，一个 TCP 和一个 UDP，以保证两者具有相同的临时端口？

我有一个简单的服务器，最初通过 TCP 连接，但也通过 UDP 传输。我不想从客户端发送 UDP 数据包后连接只是为了让服务器发现客户端的 UDP 临时端口。除非必须，否则我不想通过初始 TCP 连接消息发送端口号。

现在，我在 TCP 套接字上的 getsockname 之后显式绑定客户端 UDP 套接字的端口，以发现操作系统分配的临时端口。它还没有失败，但感觉很脆弱。

**编辑：** 为了澄清，当前的实现假设操作系统永远不会为已经被 UDP 套接字使用的 TCP 套接字分配临时端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:12:40.737

将一个绑定到 (0)，然后获取本地端口值，然后将另一个绑定到该值。如果失败（端口已经分配），关闭第一个套接字，冲洗并重复。

没有其他方法，它可能“感觉”很脆弱。但我不明白为什么你需要它们相同。如果它们是短暂的，那么无论如何其他人都不知道它们是什么，你必须以某种方式宣传它们。

# php - 未收到 $_POST[] 参数

> ID：11859096
> 
> 赞同：0
> 
> 时间：2012-08-08T06:48:59.947
> 
> 标签：php, javascript

我正在尝试通过 $_POST 方法将值从我的 test.php 发送到我的 backgroundScript.php，当打印出正在发送的值时，我得到了正确的值，但是当我转到我的 backgroundScript 文件以查看该值是否已发送 - 没有任何内容被打印出来，它等于 null --------------------------------test.php 文件 - 主要代码

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  //$DBH->prepare('SELECT first FROM contacts');
}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}  
//get query
$FNresult=$DBH->query('SELECT first FROM contacts'); 
//set fetch mode
$FNresult->setFetchMode(PDO::FETCH_ASSOC);

$dropdown = "<select name='contacts' id='contacts' >";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option  value='{$row['first']}'>{$row['first']}</option>";
 // echo getLN();

}

$dropdown .= "\r\n</select>";

echo $dropdown;

//}
/*
//                  Get last name

function getLN(){
    $query = "SELECT last FROM contacts";
    $LNresult=mysql_query($query);

    $last;
    while($row = mysql_fetch_assoc($LNresult)) {

        $last = "{$row['last']}";

    }
    echo $last;
}//end getLN
*/

$DBH = null; 
?>

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js"></script>   
<!-- javascript on client-side -->
<script type="text/javascript">  

var dropdown = $('#contacts');

document.write(dropdown.val());

dropdown.bind('change', function(){

    $.post('backgroundScript.php', 
        { 
            first: dropdown.val()

        },
        function(response) {
            $('#first').val(response.first);
            $('#last').val(response.last);
            $('#phone').val(response.phone);
            // Repeat for all of your form fields
        },
        'json'
    );

});

</script>

<form action="insert.php" method="post">
First Name: <input type="text" id="first"  ><br>
Last Name: <input type="text" id="last"><br>
Phone: <input type="text" id="phone"><br>
Mobile: <input type="text" id="mobile"><br>
Fax: <input type="text" id="fax"><br>
E-mail: <input type="text" id="email"><br>
Web: <input type="text" id="web"><br>
<input type="Submit">
</form> 
```

backgroundScript.php -------------------------------------------------------- 值发送到哪里

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  //$DBH->prepare('SELECT first FROM contacts');
}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}  

$first= $_POST['first'];
print_r("print value: $first");
//$first = "david";
$sth = $DBH->prepare('SELECT *
    FROM contacts
    WHERE first = :first');
$sth->bindParam(':first', $first, PDO::PARAM_STR);
$sth->execute();

$row = $sth->fetch();

$returnArray = array( 
'first' => $row["first"],
'last' => $row["last"], 
'phone' => $row["phone"], 
);
//print_r("After pureeing fruit, the colour is: $returnArray");
/*echo "<pre>";
print_r($returnArray);
echo "</pre>";
exit;*/

// background script

// retrieve data based on $_POST variable, set to $returnArray
/*while($row = $sth->fetch(PDO::FETCH_ASSOC)){
  // do something with row

}
$returnArray = array( 
'first' => $row["first"], 
);

echo "<pre>";
print_r($returnArray);
echo "</pre>";
exit;
*/

/****************************
 * the structure of returnArray should look something like
     array(
         'first' => firstName,
         'last' => lastName,

     )*/
    // echo json_encode(array('first' => "hello", 'last' => "Other value"));
//echo json_encode($returnArray);
$DBH = null; 
```

############################ 更新到 TEST.PHP

```
try {  
  # MySQL with PDO_MYSQL  
  $DBH = new PDO("mysql:host=$hostname;dbname=$database", $username, $password);  
  $DBH->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );

  //$DBH->prepare('SELECT first FROM contacts');
}  
catch(PDOException $e) { 
    echo "I'm sorry, I'm afraid I can't do that.";  
    file_put_contents('PDOErrors.txt', $e->getMessage(), FILE_APPEND);   
}  
//get query
$FNresult=$DBH->query('SELECT first FROM contacts'); 
//set fetch mode
$FNresult->setFetchMode(PDO::FETCH_ASSOC);

//}
/*
//                  Get last name

function getLN(){
    $query = "SELECT last FROM contacts";
    $LNresult=mysql_query($query);

    $last;
    while($row = mysql_fetch_assoc($LNresult)) {

        $last = "{$row['last']}";

    }
    echo $last;
}//end getLN
*/

$DBH = null; 
?>

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js"></script>   
<!-- javascript on client-side -->
<script type="text/javascript">  

var dropdown = $('#contacts');

document.write(dropdown.val());

dropdown.bind('change', function(){

    $.post('backgroundScript.php', 
        { 
            first: dropdown.val()

        },
        function(response) {
            $('#first').val(response.first);
            $('#last').val(response.last);
            $('#phone').val(response.phone);
            // Repeat for all of your form fields
        },
        'json'
    );

});

</script>

<form action="insert.php" method="post">
<?php

$dropdown = "<select name='contacts' id='contacts' >";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option  value='{$row['first']}'>{$row['first']}</option>";
 // echo getLN();

}

$dropdown .= "\r\n</select>";

echo $dropdown;
?>

First Name: <input type="text" name="first" id="first" ><br>
Last Name: <input type="text" id="last"><br>
Phone: <input type="text" id="phone"><br>
Mobile: <input type="text" id="mobile"><br>
Fax: <input type="text" id="fax"><br>
E-mail: <input type="text" id="email"><br>
Web: <input type="text" id="web"><br>
<input type="Submit">
</form> 
```

现在，当我尝试打印下拉列表的值时，我在 javascript 中得到一个未定义的值

＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃＃ 更新

```
<form action="backgroundScript.php" method="post">

<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js"></script>   
<!-- javascript on client-side -->
<script type="text/javascript">  

var dropdown = $('#contacts');

document.write(dropdown.val());

dropdown.bind('change', function(){

    $.post('backgroundScript.php', 
        { 
            first: dropdown.val()

        },
        function(response) {
            $('#first').val(response.first);
            $('#last').val(response.last);
            $('#phone').val(response.phone);
            // Repeat for all of your form fields
        },
        'json'
    );

});

</script>

<?php

$dropdown = "<select name='contacts' id='contacts' >";

while($row =$FNresult->fetch()) {

  $dropdown .= "\r\n<option  value='{$row['first']}'>{$row['first']}</option>";
}
$dropdown .= "\r\n</select>";

echo $dropdown;
?>

First Name: <input type="text" name="first" id="first" ><br>
Last Name: <input type="text" name="last" id="last"><br>
Phone: <input type="text"  name="phone" id="phone"><br>
Mobile: <input type="text" id="mobile"><br>
Fax: <input type="text" id="fax"><br>
E-mail: <input type="text" id="email"><br>
Web: <input type="text" id="web"><br>
<input type="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:50:39.843

POST 使用`name`而不是`id`来标识参数。在您的领域使用`name`- 或同时使用两者。

```
<input type="text" name="first" id="first" > 
```

Javascript 可以很好地处理整个 ID，`getElementByID`但需要使用 POST 和 GET 数据`name`。

编辑：您还需要确保该`<select....>`语句位于`<form>`and`</form>`标记内，否则它不会作为该表单的一部分发送。

坚持这一行：

```
<form action="backgroundScript.php" method="post"> 
```

在这些行之上：

```
<script type="text/javascript"
     src="http://code.jquery.com/jquery-latest.min.js"></script>   
<!-- javascript on client-side -->
<script type="text/javascript"> 
```

编辑 2：另外，正如 Herpa 指出的那样，你`<form action=''>`的设置为`insert.php`and not `backgroundScript.php`。你也需要改变它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T06:53:00.003

在 test.php 文件中更改它：

```
<form action="backgroundScript.php.php" method="post">
First Name: <input type="text" id="first" ><br>
Last Name: <input type="text" id="last"><br>
Phone: <input type="text" id="phone"><br>
Mobile: <input type="text" id="mobile"><br>
Fax: <input type="text" id="fax"><br>
E-mail: <input type="text" id="email"><br>
Web: <input type="text" id="web"><br>
<?php echo $dropdown; ?>
<input type="Submit">
</form> 
```

form 标签的 action 属性显示发送 POST 数据的位置。在您的脚本中，您将其发送到 insert.php。您还应该使用 name 属性通过 POST 变量获取输入字段的名称。编辑：您在表单外呼应了选择。

# excel - CSV 格式的 Excel 宏

> ID：11859097
> 
> 赞同：2
> 
> 时间：2012-08-08T06:49:05.067
> 
> 标签：excel, csv, export-to-excel, vba

有没有办法以 CSV 文件格式运行 Excel 宏？

我正在使用 csv 模板将文件导出到 CSV，是否可以在 CSV 格式的模板上编写宏。我不能以 XLS 格式保存它。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:00:48.010

虽然您不能*将*宏保存在`CSV`文件中，但您也可以

1.  `CSV`使用控制器工作簿或插件运行宏
2.  更进一步，以编程方式将代码添加到`CSV`文件中（例如添加事件处理程序）

如果您提供有关您需要做什么的更多信息，那么我们可以为上述路径提供帮助。

**（*编辑：仍然不清楚 CSV 文件是如何生成的 - 这是通过 Excel 还是通过其他应用程序完成的？]***

使用 Pearson 的[应用程序事件示例](http://www.cpearson.com/excel/AppEvent.aspx)，您可以使用底部的代码（来自打开的 Excel 控制器工作簿）来捕获新`CSV`文件的添加，然后对其进行格式化。

如果您需要`CSV`即时捕获文件的创建，则需要使用更复杂的方法，例如将[VBscript 与 WMI 结合](http://blogs.technet.com/b/heyscriptingguy/archive/2004/10/11/how-can-i-automatically-run-a-script-any-time-a-file-is-added-to-a-folder.aspx)使用。

**`Controller Workbook Approach`**

*ThisWorkbook 模块*

```
Private XLApp As CExcelEvents

Private Sub Workbook_Open()
    Set XLApp = New CExcelEvents
End Sub 
```

*名为 CExcelEvents 的类模块*

```
Private WithEvents App As Application

Private Sub App_NewWorkbook(ByVal Wb As Workbook)
If Wb.FileFormat = xlCSV Then
MsgBox Wb & " is a Csvfile"
'your code
End If
End Sub

Private Sub Class_Initialize()
    Set App = Application
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-19T00:48:48.253

**设置**：Excel 2010

将您创建的宏保存到个人宏工作簿。

**详情**：

1.  打开 *.csv 文件
2.  录制宏并将其存储在个人宏工作簿中。
3.  当消息框询问您是否要保存对个人宏工作簿所做的更改时，退出 Excel 并单击保存。

[链接到信息源。](https://support.office.com/en-us/article/Create-and-save-all-your-macros-in-a-single-workbook-66c97ab3-11c2-44db-b021-ae005a9bc790)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:04:26.917

为了实现您想要做的事情，您需要首先创建一个 XLS，其中包含您想要的宏 VB 代码。然后，您需要将此 XLS 保存在始终可用的位置（即在 HD 上或在公司网络上）。然后，您需要在机器上的 Excel 中创建一个自定义按钮，并将此按钮链接到您想要触发的 VB 宏模块。这意味着每当您手动打开 Excel 或通过打开 CSV 时，您将在工具栏中拥有自定义按钮，就像任何其他按钮一样。然后，当 CSV 在 Excel 中打开时，您可以单击自定义按钮，它将从保存的 XLS 中触发您链接到的宏。

# c# - 从菜单项调用 BHO 功能

> ID：11859099
> 
> 赞同：0
> 
> 时间：2012-08-08T06:49:16.773
> 
> 标签：c#, internet-explorer, bho

好吧，我感觉这里有点缺水。自从我接触 C# 以来已经有一段时间了，而且我全都是关于 java，所以 .NET 平台、Windows 的东西对我来说都是希腊语，但我仍然面临着这个挑战，现在我面临一个令人不安的问题：

*   如何从工具菜单中的菜单项调用 BHO 函数？

我已经设法从一个教程跳到另一个教程，并实现了一个 BHO，它在“工具”下注册了一个菜单项，我需要它来从我的 BHO 代码中调用一个函数。

我读到我应该实现这个接口**IOleCommandTarget**但我找不到它，我不知道要参考什么......

非常感谢任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:18:59.167

[IOleCommandTarget](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683797%28v=vs.85%29.aspx)。

有人为您[完成了互操作](http://pinvoke.net/default.aspx/Interfaces/IOleCommandTarget.html)。

# javascript - 从外部元素控制 Flexslider。

> ID：11859102
> 
> 赞同：20
> 
> 时间：2012-08-08T06:49:35.427
> 
> 标签：javascript, jquery, api, flexslider

我有一个我想从元素外部控制的 Flexislider。我试过这个：

```
var myslider = $('.slider').flexslider({
    animation: 'slide'
});

$('button').click(function () {
    myslider.flexAnimate(3)    //Function: Move slider - (target, pause) parameters
}); 
```

但这又回来了`TypeError: Object [object Object] has no method 'flexAnimate'`

然后我偶然发现了这个线程（https://github.com/woothemes/FlexSlider/issues/125），这表明这是正确的方法：

```
$('button').click(function () {
    myslider.flexslider(3)
}); 
```

但是我看不到如何指定动画的速度。我希望更改仅针对该事件是即时的。

我想我想知道如何从滑块元素外部访问文档中提到的滑块 API

```
slider                        //Object: The slider element itself
slider.container              //Object: The ul.slides within the slider
slider.slides                 //Object: The slides of the slider
slider.count                  //Int: The total number of slides in the slider
slider.currentSlide           //Int: The slide currently being shown
slider.animatingTo            //Int: Useful in .before(), the slide currently animating to
slider.animating              //Boolean: is slider animating?
slider.atEnd                  //Boolean: is the slider at either end?
slider.manualPause            //Boolean: force slider to stay paused during pauseOnHover event
slider.controlNav             //Object: The slider controlNav
slider.directionNav           //Object: The slider directionNav
slider.controlsContainer      //Object: The controlsContainer element of the slider
slider.manualControls         //Object: The manualControls element of the slider
slider.flexAnimate(target)    //Function: Move slider - (target, pause) parameters
slider.pause()                //Function: Pause slider slideshow interval
slider.resume()               //Function: Resume slider slideshow interval
slider.canAdvance(target)     //Function: returns boolean if slider can advance - (target) parameter
slider.getTarget(dir)         //Function: get target given a direction - "next" or "prev" parameter 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-17T11:17:50.040

您可以像这样访问滑块对象：

```
var exampleSlider = $('#slider').data('flexslider');
// now you can access all the methods for example flexAnimate
exampleSlider.flexAnimate(..); 
```

如上所述，您可以在[https://github.com/woothemes/FlexSlider](https://github.com/woothemes/FlexSlider)的 API 描述中找到它（源代码行：[https ://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js# L674](https://github.com/woothemes/FlexSlider/blob/master/jquery.flexslider.js#L674) )

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-09T15:52:50.723

使用最新 (2.1) 版本的 Flexslider，您可以像这样使用外部 API：

```
$('button').click(function () {
    $('.slider').flexslider(3);
}); 
```

有关 API 的完整详细信息，请参见[https://github.com/woothemes/FlexSlider#updates](https://github.com/woothemes/FlexSlider#updates)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-17T19:26:03.297

这个对我有用：

```
 $('#slider').flexslider({
        animation: "slide",
        controlNav: false,
        animationLoop: false,
        slideshow: false,
        start: function(){
            $('#sliderNext').on('click', function(e){
                $('.flex-next').trigger('click');
            });
            $('#sliderPrev').on('click', function(e){
                $('.flex-prev').trigger('click');
            });
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-31T00:04:10.437

没有人回答主要问题：如何在没有动画的特定幻灯片上在灯箱中启动 flexslider，但随后在幻灯片之间有动画。我已经解决了这样的问题：

在打开灯箱（使用灯箱回调）之前，我将 flexslider 的动画速度设置为 0：

```
self.$slider.data('flexslider').vars.animationSpeed = 0; 
```

打开灯箱（使用灯箱回调）后，我更改了 flexslider 索引并返回动画速度的先前值：

```
self.$slider.flexslider(this.index);
self.$slider.data('flexslider').vars.animationSpeed = 600; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-07T07:19:49.203

您可以先尝试设置滑块对象：

```
$slider = $('.slideshow').flexslider(); 
```

然后使用 flexslider 的公共方法：

```
$slider.data('flexslider').pause();
$slider.data('flexslider').play(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-07T13:30:20.937

```
var myslider = ('.flexslider').flexslider({
   animation: 'slide',
   animationLoop: false
});
myslider.flexslider(3); 
```

那对我有用。虽然我以不同的格式使用它。

```
var img = $('<span/>');
img.attr('onclick','myslider.flexslider('+ id + ');'); 
```

我有很多幻灯片要从数据库加载。

# vb.net - Detect random Powerpoint freezes while performing actions

> ID：11859105
> 
> 赞同：0
> 
> 时间：2012-08-08T06:49:50.073
> 
> 标签：vb.net, crash, powerpoint, office-interop

I am creating a lot of Powerpoint Slides in a loop, using Interop and VB.NEt 4.0 and I have trouble solving a strange powerpoint crash.

The creation of slides works well in most cases, but sometimes Powerpoint runs into a problem of its own and stops working properly. Most of the times it just stops responding oder crashes immediately. Detecting this failure is easy, just evaluate the H_Result. But sometimes there is a more challenging failure: Powerpoint stops responding but does not throw an exception. It simply stops working until somebody manually tries to push a button in Powerpoint, which will generate an exception. But if nobody pushes this button, Powerpoint will stay frozen indefinitely. Due to this condition, my code will never have a chance to evaluate the problem. This is especially annoying if you want to create a huge number of Slides at night and it stops after Slide 50\. Does anybody have an idea how to solve this problem. This whole program runs in an Backgroundworker - so maybe my main thread can ask the bgw every minute or so "are you still alive?" But how to implement this.

Below is a simple Outline of the Backgroundworkercode.

Basically, it's look like this:

```
Dim SlideNumber as Integer =0
Dim PowerpointHasCrashed as Boolean
Dim Slide as pptns.Slide

do while SlideNumber<ListOfSlidesTobeCreated.Count-1 and PowerpointHasCrashed =False

try
   DoStuffWithSlide(ListOfSlidesTobeCreated(SlideNumber))
catch ex as exception
   If ex.message like PowerPointFailue then
      PowerpointHasCrashed =True
   End If    
end try

SlideNumber +=1
end while

If PowerpointHasCrashed =true then
SlideNumber -=1
'Do some Stuff to repair the Damage and start the loop again.
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T10:11:56.703

After some struggle, i simply used the Backgroundworker.Reportsprogress sub to set a datetime variable to now. Every 3 minutes a timer checks this variable, if this variable is older than 5 minutes, Powerpoint will be killed and restartet. Because every finished slides causes reportsprogress to increase, this works very well.

# actionscript-3 - 如何暂停、停止录制并恢复并开始录制 FMS AS

> ID：11859107
> 
> 赞同：1
> 
> 时间：2012-08-08T06:50:06.517
> 
> 标签：actionscript-3, flash, flash-media-server

Flash AS3 中的录制模块，将实时流录制到 FMS。想要暂停录制或停止录制。我应该写什么。我的代码它不起作用。

```
private function handlePause(event:MouseEvent):void
{
    ns.pause();
}
private function handleStop(event:MouseEvent):void
{
    ns.close(); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:04:23.377

我从未使用过 FMS，但一些建设性的谷歌搜索让我发现了一篇关于**“简单 AS3 记录器”**的帖子，该帖子连同**“用于 NetStream 的 as3LanguageRef”**应该能够为您提供开始/停止发布所需的内容溪流。

*   [http://labs.influxis.com/?p=949](http://labs.influxis.com/?p=949)
*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html)

在暂停录制会话时，您必须解决很多问题，因为您正在“**暂停正在发布的**网络流”，这些家伙似乎找到了解决它的方法：
[http://www. justskins.com/forums/pausing-a-netstream-while-53312.html](http://www.justskins.com/forums/pausing-a-netstream-while-53312.html)

如果您查看 labs.influxis-side，您可以找到关于如何播放/停止已发布流的最简单的代码示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:20:45.343

> 参数 name 标识要发布的流的字符串。如果传递 false，则流停止发布。使用以下语法：

[http://help.adobe.com/en_US/flashmediaserver/ssaslr/WS5b3ccc516d4fbf351e63e3d11a11aff5ba-7d13SSASLR.html#WS5b3ccc516d4fbf351e63e3d11a11afc95e-7fd6SSASLR](http://help.adobe.com/en_US/flashmediaserver/ssaslr/WS5b3ccc516d4fbf351e63e3d11a11aff5ba-7d13SSASLR.html#WS5b3ccc516d4fbf351e63e3d11a11afc95e-7fd6SSASLR)

```
ns.publish(false); 
```

尽管我不是 FMS 或 Red5 的用户，但似乎这会阻止它，就暂停而言，我不确定。

**编辑**

啊，您似乎还可以指定如何启动流备份，也可以使用该文档中的这个：

> howToPublish 一个可选字符串，指定如何发布流。有效值为“record”、“append”、“appendWithGap”和“live”。默认值为“实时”。如果省略此参数或传递“live”，则发布实时数据但不记录。如果远程服务器上已存在同名文件，则将其删除。

如果您想要更直接的答案，我将不得不查看您的初始 ns.publish 被调用的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:14:16.177

根据 AS3 语言参考，这些是可用于 NetStream 的选项。

暂停/继续：

*   ns.togglePause();
*   ns.pause();
*   ns.resume();

停止：

*   ns.stop();

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetStream.html)

# c# - C# 中的 BigInteger 除法

> ID：11859111
> 
> 赞同：12
> 
> 时间：2012-08-08T06:50:30.120
> 
> 标签：c#, .net, biginteger, division

我正在编写一个需要在 C# 中准确划分 BigInteger 类的类。

例子：

```
BigInteger x = BigInteger.Parse("1000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
BigInteger y = BigInteger.Parse("2000000000000000000000000000000000000000000000000000000000000000000000000000000000000");

x /= y;

Console.WriteLine(x.ToString());

//Output = 0 
```

问题是作为一个整数，它自然不包含十进制值。我怎样才能克服这个以获得 0.5 的实际结果（给定示例）。

PS 解必须能准确除任何BigInteger，不只是例子！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T07:03:20.150

在上面的例子中，数字仍然足够小，可以转换为`double`，所以在这种情况下你可以说

```
double result = (double)x / (double)y; 
```

如果`x`和`y`对于 a 来说太大`double`但仍然具有可比性，也许这个绝妙的技巧会有所帮助：

```
double result = Math.Exp(BigInteger.Log(x) - BigInteger.Log(y)); 
```

但总的来说，当`BigInteger`它们很大时，它们的商也很大，如果不导入第三方库，这很难做到。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-08T06:56:41.717

除法需要什么精度？一种方法是：

*   将分子乘以 1000
*   划分数字
*   将结果转换为`double`并除以 1000

代码相同：

```
BigInteger x = BigInteger.Parse("1000000000000000000000000000000000000000000000000000000000000000000000000000000000000");
BigInteger y = BigInteger.Parse("2000000000000000000000000000000000000000000000000000000000000000000000000000000000000");

x *= 1000;
x /= y;
double result = (double)x;
result /= 1000;
Console.WriteLine(result); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:05:26.703

如果您需要保持完全精确，请使用有理数的实现（Java 等效项是 Apache Commons Math 库中的 Fraction 类）。潜伏着各种实现，但.NET 4.0（因为它内置了 System.Numerics.BigInteger）最轻量级的解决方案如下：

```
 System.Numerics.BigInteger x = System.Numerics.BigInteger.Parse("10000000000000000000000000000000000000000000000000000");

        System.Numerics.BigInteger y = System.Numerics.BigInteger.Parse("20000000000000000000000000000000000000000000000000000");

        // From BigRationalLibrary
        Numerics.BigRational r = new Numerics.BigRational(x,y);

        Console.Out.WriteLine(r.ToString());
        // outputs "1/2", but can be converted to floating point if needed. 
```

要使其工作，您需要来自 .Net 4.0 System.Numerics.dll 的 System.Numberics.BigInteger 和来自 CodePlex的[BigRational实现。](http://bcl.codeplex.com/wikipage?title=BigRational)

[Microsoft Solver Foundation 3.0](http://archive.msdn.microsoft.com/solverfoundation)中也实现了一个[Rational 结构](http://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.common.rational%28v=vs.93%29)。在撰写本文时，www.solverfoundation.com 站点已损坏，因此是指向存档的链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T06:57:41.957

您可能知道整数除法不会产生十进制值，因此您的结果将被截断为 0。根据[这个问题](https://stackoverflow.com/questions/2533960/big-numbers-with-fraction-support)，可以在[此处](http://sine.codeplex.com/)找到大双精度实现，但它的最后一个版本是在 2009 年。如果您进一步看，您可能会发现更新的或者这个简单地完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:17:19.297

听起来像是[定点](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)（而不是浮点）的工作。

只需将分子预移位所需的小数位数，如下所示：

```
BigInteger quotient = (x << 10) / y; 
```

这会给你点后的 10 位（大约 3 个十进制数字）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-19T15:02:35.347

```
//b = 10x bigger as a => fraction should be 0.1
BigInteger a = BigInteger.Pow(10, 5000);
BigInteger b = BigInteger.Pow(10, 5001);

//before the division, multiple by a 1000 for a precision of 3, afterwards 
//divide the result by this.
var fraction = (double) BigInteger.Divide(a * 1000, b) / 1000; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-08T06:54:41.910

将其解析为双倍：

```
double a = Convert.ToDouble(x);
double b = Convert.ToDouble(y);

Console.WriteLine(a / b); 
```

# windows - 我怎么能从普通特权程序中调用特权（需要管理员特权）程序？

> ID：11859114
> 
> 赞同：0
> 
> 时间：2012-08-08T06:50:39.163
> 
> 标签：windows, winapi, visual-c++

> **可能重复：**
> [如何运行需要提升和等待的子进程？](https://stackoverflow.com/questions/4893262/how-can-i-run-a-child-process-that-requires-elevation-and-wait)

CreateProcess 不起作用，UAC 对话框甚至没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:25:23.243

如果您使用的是 Visual Studio，最简单的方法是这样；在项目属性下，在链接器部分下，将“UAC 执行级别”设置为 requireAdministrator。如果您使用其他构建环境，您可以手动创建清单文件。

# c# - 显示消息框时不调用 OnPaint

> ID：11859119
> 
> 赞同：0
> 
> 时间：2012-08-08T06:50:59.993
> 
> 标签：c#, messagebox, onpaint

在我们的项目中，我创建了一个表单并如下运行它：

```
 Application.run(myform); 
```

在这种形式中，我们需要绘制一些东西，因此它的 OnPaint 方法被覆盖并且通常没有问题，但是当我们显示消息框或表单时永远不会调用 OnPaint：

```
 Messagebox.show("something"); 
```

或者

```
 formA.showDialog(); 
```

所以当用户拖动消息框时，会留下痕迹，因为背景不能重绘。有谁知道为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T07:18:19.233

您可以通过调用该`Refresh`方法使表单重新绘制。

```
var timer = new Timer();
timer.Interval = 1000;
timer.Tick += new EventHandler(timer_Tick);
timer.Start();

void timer_Tick(object sender, EventArgs e)
{
    Refresh();
} 
```

# php - 如何从 MySQL DB 的列中创建按字母顺序排序的数组并将其传递给视图？

> ID：11859133
> 
> 赞同：0
> 
> 时间：2012-08-08T06:52:10.277
> 
> 标签：php, mysql, codeigniter

我正在使用 CodeIgniter，基本上是一个 PHP 菜鸟。所以我在我的数据库中有这张名为“商店”的表。我想要一个按字母顺序排序的数组，其中的元素对应于表存储中的“标题”列。

目前，我似乎想不出任何可能的解决方案！

有什么帮助吗？？

我使用linux/ubuntu ...

PS：我在 PHP 手册中读到 sqlsrv 扩展只能在 Windows 平台上使用（[http://www.php.net/manual/en/sqlsrv.requirements.php](http://www.php.net/manual/en/sqlsrv.requirements.php)） 有没有 Linux 替代品呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:54:22.240

您可以`ORDER BY`在 MySQL 查询中使用子句对记录进行排序：

```
SELECT *
FROM stores.table_name
ORDER BY title ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:01:15.880

控制器：

```
$res['output']=$this->modelname->get();
$this->load->view('viewname',$res); 
```

模型：

```
function get()
{
$query=$this->db->query("select * from table order by title asc");
$output=$query->result();
return $output;
} 
```

看法 ：

```
<?php
foreach($output as $obj)
{
echo $obj->blah;
}
?> 
```

# html - 不同版本的 IE 中相同的元素不同的 clientWidth 值

> ID：11859148
> 
> 赞同：1
> 
> 时间：2012-08-08T06:53:06.247
> 
> 标签：html

我有如下代码来获取“内容”宽度，但它如何返回 IE 7、8、9 的不同值？Firefox 的值也不同。

我怎样才能让它返回一致的值？不使用 JQuery 可以吗？

```
document.getElementById('content').clientWidth
document.getElementById('leftSide').offsetWidth
document.getElementById('content').clientHeight 
```

左侧 div 包含在内容 div 内。他们唯一的风格是

```
background-color:white; 
```

我有：

IE7 1604/297/925

IE8 1906/297/925

IE9 1910/297/1609。

FF 1610/297/1910

我试图打开“符合标准的模式”，但仍然没有任何区别......

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:04:22.773

区别与浏览器框模型有关。很大程度上取决于您是否处于怪癖模式（[http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)）。缓解这些问题的最有效方法是使用具有规范化浏览器之间差异的方法的 JavaScript 库（例如，jQuery's `.width()` `.height()`）。

# java - 如何在struts2中格式化会话中的数字

> ID：11859151
> 
> 赞同：1
> 
> 时间：2012-08-08T06:53:12.397
> 
> 标签：java, struts2, number-formatting

我有一个超过 20 位的数字，我必须用逗号分隔符对其进行格式化。我必须从 http 会话中读取值。我用过这种：

```
<s:property value="%{getText('{0,number,#,###.00}',{<%=hsession.getAttribute("calculated_forfeit") %>})}" /> 
```

但它不起作用，错误是：期望等号！！！！！！！！！getText 格式适用于变量，但我不确定来自 http 会话的值。该技术是struts2。

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:08:34.923

您必须在 scriptlet 中加上简单的引号：

```
 <s:property value="%{getText('{0,number,#,###.00}',{<%=hsession.getAttribute('calculated_forfeit') %>})}" /> 
```

无论如何，struts2 提供了一种简单的方法来访问带有`#session`变量的会话属性。

```
<s:property value="%{getText('{0,number,#,###.00}',{#session.calculated_forfeit})}" /> 
```

# iphone - 在 IOS 中使用属性解析 XML

> ID：11859152
> 
> 赞同：0
> 
> 时间：2012-08-08T06:53:14.207
> 
> 标签：iphone, objective-c, ios, xml-parsing

我有一个 XML 文件，我想在 Objective-C 中解析它，但找不到更好的方法......

```
<record xmlns="http://www.loc.gov/MARC21/slim">
  <datafield ind1=" " ind2=" " tag="020">
    <subfield code="z">1234567890</subfield>
  </datafield>
  <datafield ind1="1" ind2=" " tag="100">
    <subfield code="a">Ashton-Good, Donna.</subfield>
  </datafield>
  <datafield ind1="1" ind2="0" tag="245">
    <subfield code="a">Eazee skating</subfield>
    <subfield code="h">[videorecording] :</subfield>
    <subfield code="b">the basics of ice skating for beginners of all ages /</subfield>
    <subfield code="c">Donna Ashton-Good.</subfield>
  </datafield>
  <datafield ind1="3" ind2=" " tag="246">
    <subfield code="a">Easy skating</subfield>
  </datafield>
  <datafield ind1=" " ind2=" " tag="260">
    <subfield code="a">[S.l.] :</subfield>
    <subfield code="b">D. Ashton-Good,</subfield>
    <subfield code="c">c1999.</subfield>
  </datafield>
</record> 
```

此 XML 包含需要解析以获取数据的标记和代码。请帮助我解析这个 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:02:09.047

在 h 文件中声明数组和字符串，如：

```
NSMutableArray *aryCategory;
 NSString *strCategroyName; 
```

在 .m 文件中用于启动 Parser 使用：

```
NSXMLParser *parser = [[NSXMLParser alloc] initWithData:yourData]; // your data will be instance of NSData or NSMutableData
parser.delegate = self;
[parser parse]; 
```

这将在您获得 xml 数据后完成。对于处理结果，您可以使用`NSXMLParserDelegate`如下：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
     if ([elementName isEqualToString:@"category"]) {
          aryCategory = [[NSMutableArray alloc] init];
          strCategroyName = @"";
     }
}
- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
     strCategroyName = [NSString stringWithFormat:@"%@%@", strCategroyName, string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
    if ([elementName isEqualToString:@"categoryName"]) {
          [aryCategory addObject:strCategroyName];
          strCategroyName = @"";
     }
} 
```

现在，您的数组将充满您的所有类别名称。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:58:05.123

您可以使用[NSXMLParser](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)。如果你想使用 XPath，有外部库，例如[TouchXML](https://github.com/TouchCode/TouchXML/)。

# apache - Apache - Tomcat ProxyPass 维护会话 http / https

> ID：11859153
> 
> 赞同：0
> 
> 时间：2012-08-08T06:53:24.170
> 
> 标签：apache, session, tomcat, https, proxypass

我在 Tomcat 实例中部署了一个标准的 webapp。此 Web 应用程序中有一些页面通过 http 从一个域访问，而其他一些页面通过 https 从另一个域访问。我正在使用这样的代理通行证：

```
<VirtualHost *:80>
ServerName a.somewhere.com 
ProxyPass           /app    http://127.0.0.1:8080/app
ProxyPassReverse    /app    http://127.0.0.1:8080/app
</VirtualHost>

<VirtualHost *:443>
ServerName a-secure.somewhere.com
ProxyPass           /app    http://127.0.0.1:8080/app
ProxyPassReverse    /app    http://127.0.0.1:8080/app

    SSLEngine on
    SSLProtocol all -SSLv2
    SSLCipherSuite HIGH:MEDIUM:!aNULL:!MD5
    SSLCertificateFile "..."
    SSLCertificateKeyFile "..."
    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    BrowserMatch "MSIE [2-5]" \
     nokeepalive ssl-unclean-shutdown \
     downgrade-1.0 force-response-1.0
</VirtualHost> 
```

场景如下：webapp 中的每个页面都通过以下方式访问：

```
http://a.somewhere.com/app/.... 
```

虽然有一些页面由以下人员访问：

```
https://a-secure.somewhere.com/app/.... 
```

例如，当用户在

```
http://a.somewhere.com/app/unsecure.jsp 
```

那里有一个链接

```
https://a-secure.somewhere.com/app/secure.jsp 
```

在浏览此类站点时，我可以做些什么来维护用户的会话信息？

先感谢您。

# canvas - J2ME Canvas 上的倒数计时器

> ID：11859155
> 
> 赞同：2
> 
> 时间：2012-08-08T06:53:34.050
> 
> 标签：canvas, java-me

在我的应用程序中，我需要在 Canvas 上实现的倒数计时器（如 Android 中的计时器）并向用户显示倒数时间。如何在 Canvas 上实现倒数计时器并向用户显示倒数时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:17:41.127

它非常简单，您只需要使用两个类`TimerTask`和`Timer`类。该类`TimerTask`是一个线程，它将执行您的特定代码，而`Timer`该类告诉`TimerTask`何时执行定义的代码 init。只需研究以下代码，

```
import java.util.Timer;
import java.util.TimerTask;

public class TimerDemo
{
    private MyTimerTask mt;
    private Timer timer;

    public TimerDemo()
    {
        mt = new MyTimerTask();     
        timer = new Timer(); 
        timer.schedule(mt, 1000, 1000);
        System.out.println ( "Countdown Begins " ); 
    }

    public static void main ( String args[] )
    {
        TimerDemo td = new TimerDemo();
    }

    private class MyTimerTask extends TimerTask
    {
        int val = 10;
        public void run()
        {
            if ( val > 0 )
            {
                System.out.println ( "Value : " + val-- );
            }
            else
            {
                timer.cancel();
            }
        }
    }
}

/*************************/
/**********OUTPUT*********
Countdown Begins 
Value : 10
Value : 9
Value : 8
Value : 7
Value : 6
Value : 5
Value : 4
Value : 3
Value : 2
Value : 1
*************************/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:11:36.780

您需要使用 java.util.TimerTask 或 java.util.Timer 并实现 Runnable 接口来创建线程。谷歌它并查看文档。

# iphone - iPhone：如何使用 AVAudioPlayer 检测 Iphone/Ipod 音量级别

> ID：11859156
> 
> 赞同：0
> 
> 时间：2012-08-08T06:53:33.453
> 
> 标签：iphone, objective-c, ios5, avaudioplayer

我正在使用 AVAudioPlayer 开发应用程序，我想检测我的设备（即 iPhone/iPad）的音量，那么我该怎么做？

实际上我想检测 iPhone/iPad 何时处于静音模式，那么它的音量是多少？

任何想法？分享它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:17:20.747

```
- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(volumeChanged:)
     name:@"AVSystemController_SystemVolumeDidChangeNotification"
     object:nil];
}

- (void)volumeChanged:(NSNotification *)notification
{
    float volume =
    [[[notification userInfo]
      objectForKey:@"AVSystemController_AudioVolumeNotificationParameter"]
     floatValue];

    // Do stuff with volume
} 
```

请参阅[此](https://stackoverflow.com/questions/3651252/how-to-get-audio-volume-level-and-volume-changed-notifications-on-ios-4)线程上的答案详细信息。

# jquery - 选择同一无序列表项内的其他锚点

> ID：11859161
> 
> 赞同：0
> 
> 时间：2012-08-08T06:53:49.787
> 
> 标签：jquery, jquery-selectors

我`li`的列表中有很多元素，`ul`如下所示：

```
<li id="filesOrderArray_dynamic_number>">
  <a href="javascript:void(0)" class="remove_from_filestock">
    <img src="ui_icons/cross-small.gif" title="Remove" rel="more_dynamic_numbers_here" />
  </a>
  <a href="javascript:void(0)" class="title_filestock">
    <img src="ui_icons/properties-small.gif')?>" title="Properties" rel="more_dynamic_numbers_here" />
  </a>
  <a href="some_address" target="_blank" class="filestock_preview fancybox" rel="filestock">
    Some Title
  </a>
</li> 
```

我有一个 jQuery 函数。当我单击同一标签内部时，我试图选择`a.filestock_preview`文本。`a.title_filestock``li`

```
function title()
{
  $('a.title_filestock').click(function(e) {
    e.preventDefault();
    var value = $(this).closest('a.filestock_preview').text(); alert(value);   
  });
}
title(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:56:46.883

该`.closest()`方法着眼于*祖先*元素。`.filestock_preview`您要选择的元素是该元素的*兄弟*`.title_filestock`。由于它紧随其后，您可以使用[`.next()`](http://api.jquery.com/next/)：

```
var value = $(this).next().text(); 
```

您也可以使用[`.siblings()`](http://api.jquery.com/siblings/)并传入选择器：

```
var value = $(this).siblings('a.filestock_preview').text(); 
```

# android - 在 AsyncTask 中从数据库中获取数据有时会引发异常

> ID：11859165
> 
> 赞同：1
> 
> 时间：2012-08-08T06:54:04.847
> 
> 标签：android, cursor, android-asynctask

我正在 AsyncTask 中从数据库中检索数据。有时它可以完美地检索数据，但有时会引发以下异常。

```
08-08 12:14:13.140: E/AndroidRuntime(3659): FATAL EXCEPTION: AsyncTask #5
08-08 12:14:13.140: E/AndroidRuntime(3659): java.lang.RuntimeException: An error occured while executing doInBackground()
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at java.lang.Thread.run(Thread.java:1019)
08-08 12:14:13.140: E/AndroidRuntime(3659): Caused by: android.database.sqlite.SQLiteMisuseException: library routine called out of sequence: , while compiling: SELECT _id, puzzle_number, path FROM puzzle_file_infors ORDER BY puzzle_number
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
08-08 12:14:13.140: E/AndroidRuntime(3659):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42) 
```

这是我的异步任务

```
public class BackgroundTask extends AsyncTask<String, Void, Cursor>{
    private final ProgressDialog m_cProgressDialog = new ProgressDialog(m_cContext);

     @Override
        protected void onPreExecute() {
            m_cProgressDialog.setMessage("Please Wait....");
            m_cProgressDialog.show();
        }

    @Override
    protected Cursor doInBackground(String... params) {
        m_cAdapter.open();
        m_cCursor = m_cAdapter.getAllPuzzles();
        startManagingCursor(m_cCursor);
        return m_cCursor;
    }

    @Override
    protected void onPostExecute(Cursor result) {
        startManagingCursor(result);
        if(result != null){
            m_cPuzzlesAdapter = new PuzzlesAdapter(PuzzlesActivity.this, result, m_cFromActivity);
            m_cGridView.setAdapter(m_cPuzzlesAdapter);
            m_cAdapter.close();
            if (m_cProgressDialog.isShowing()) {
                m_cProgressDialog.dismiss();
            }
        }
    }
} 
```

我哪里错了？是不是因为我没有在适当的位置关闭光标？为此，我使用了**startManagingCursor()**，但它仍然无法正常工作。请指导我。

# iphone - iOS 5.1 没有备份标志？

> ID：11859166
> 
> 赞同：2
> 
> 时间：2012-08-08T06:54:05.813
> 
> 标签：iphone, nsurlconnection, icloud, nsdocumentdirectory

由于数据存储指南中的一些问题，我的第一个音乐下载应用程序被拒绝了。我试图将我的 mp3 文件保存在 NSDocumentDirectory 中。我需要通过添加标志“不备份”来重新提交我的应用程序。

这是我的代码，

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

  NSString *documentsDirectoryPath = [[paths objectAtIndex:0]stringByAppendingPathComponent:@"Music.mp3"];
  [receivedData writeToFile:documentsDirectoryPath atomically:YES];
  [self addSkipBackupAttributeToItemAtURL:downloadURL];

 - (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL1
      {
          if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
          const char* filePath = [[URL1 path] fileSystemRepresentation];

          const char* attrName = "com.apple.MobileBackup";
          u_int8_t attrValue = 1;

          int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
          return result == 0;
     } 
          else { // iOS >= 5.1
                    NSError *error = nil;
                   [URL1 setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];

                    return error == nil;
                     NSLog(@"success");
              }
      } 
```

此代码适用于我的 5.1 版本吗？有点困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:10:35.243

参考以下代码。

[如何防止文件备份到 iCloud 和 iTunes？](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)

**`iOS 5.1 and later`**

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;
} 
```

**`in iOS 5.0.1`**

```
#import <sys/xattr.h>
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    const char* filePath = [[URL path] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
} 
```

# jquery - 在计算器包装器外部单击时关闭计算器

> ID：11859168
> 
> 赞同：0
> 
> 时间：2012-08-08T06:54:12.520
> 
> 标签：jquery

我有一个计算器，它打开时专注于文本框。这个计算器有外包装和带有计算器按钮的子 div 容器。

我的问题是我只想在点击鼠标离开计算器包装器时关闭计算器。`$('html').bind('click', function ()....` 但是，我每次单击计算器按钮时都会使用此代码，并且上述代码范围仅在计算器包装器上而不是在包含计算器按钮的子 div 容器上。

### 计算器包装### -`<div class="calc-wrapper">`

### 计算器按钮### -`<div class="calc-button-wrapper-operator">`

```
<div class="calc-wrapper">
<div class="calc-button-wrapper-operator">
    <div class="calc-button">9</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">8</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">7</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">6</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">5</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">4</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">3</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">2</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">1</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">0</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">.</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">-</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">+</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">*</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">/</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">C</div>
</div>
<div class="calc-button-wrapper-operator">
    <div class="calc-button">=</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:11:46.530

尝试：

```
$('body, .calc-wrapper').click(function (e){
   $('.calc-close').hide(); // or your code to clode
}); 
```

您可以删除正文，我添加了它，而您的包装可能无法覆盖所有网页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:16:47.130

```
$('body').unbind('click.closeCalc').bind('click.closeCalc', function(event){
     if(!($(event.target).hasClass('calc-wrapper') || 
               $(event.target).parents('.calc-wrapper').length == 1){
           // code to hide the calculator here.
     }
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T10:12:12.653

我找到了解决方案。

```
var CurrCalculator = $(CalControl).parent();

    $($('html').not($(CurrCalculator))).bind('click', function (event) {...
   below this code to hide the current Calculator 
...}); 
```

第一行获取当前容器的实例。

期望这个变量包含整个 HTML 正文。因此，无论您在该区域 (var CurrCalculator) 的哪个位置单击，您的计算器都将打开。如果在计算器外点击，则会关闭。

# jquery - 用于多种用途的 FadeIn 类

> ID：11859169
> 
> 赞同：1
> 
> 时间：2012-08-08T06:54:12.987
> 
> 标签：jquery, click, hover, toggle

我想要一个简单的 Jquery 解决方案，用于将鼠标悬停在“容器”类上并淡入“叠加层”。在这个简单的 Jquery 代码中，将显示所有“容器”的所有“覆盖”。有没有人知道一个简单的解决方案来淡化这个类中“覆盖”的“覆盖”？

谢谢。

```
$('.overlay').hide();
$('.container').hover(function() {
    $('.overlay').fadeToggle(300);
});

<!-- container 01 -->
<div class="container">
    <p>Lorem ipsum dolor sit amet</p>   
    <div class="overlay">
        <p>Lorem ipsum dolor sit amet</p>
    </div>
</div>
<!-- container 02 -->
<div class="container">
    <p>Lorem ipsum dolor sit amet</p>   
    <div class="overlay">
        <p>Lorem ipsum dolor sit amet</p>
    </div>
</div>
<!-- container 03 -->
<div class="container">
    <p>Lorem ipsum dolor sit amet</p>   
    <div class="overlay">
        <p>Lorem ipsum dolor sit amet</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T06:57:22.770

```
$('.container').hover(function() {
    $(this).find('.overlay').fadeToggle(300);
}); 
```

[http://jsbin.com/owehim/1/](http://jsbin.com/owehim/1/)

# sql - 使用两列进行分区的 SQL 查询

> ID：11859170
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:54:17.290
> 
> 标签：sql, oracle, oracle10g

我有一个名为 sites 的 Oracle 表，其中有多个同名记录。例如：

```
 Owner Name          Contact Name            Owner Address  Contact Address    
        A                  A                   XYZ                 SDF
        A                  D                   ABC                 JKL
        B                  E                   QWE                 YUR
        B                  F                   JKL                 SFD
        C                  C                   ZXC                 ASD  
        B                  G                   BNM                 SAD 
```

我的 SQL 查询应该返回

```
A1           XYZ
A2           ABC
A3           SDF
B1           QWE
B2           JKL 
B3           BNM
C1           ZXC
C2           ASD
D            JKL
E            YUR
F            SFD
G            SAD 
```

有人可以帮我写这样的查询吗？理想情况下，我不喜欢带有单个记录的数字后缀，但如果它简化了查询，我也可以这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:21:22.447

您可以使用`union`来创建您想要的内容：

```
with the_data as ( 
  select owner_name as name, owner_address as address
    from my_table
   union all
  select contact_name as name, contact_address as address
    from my_table
         )
select name 
        || case when count(*) over ( partition by name ) = 1 then ''
                else to_char(row_number() over ( partition by name 
                                                     order by address ))
           end
     , address
  from the_data 
```

如果您只想要不同的地址，联系人组合将更`union all`改为`union`。[这里是 SQL Fiddle 形式](http://www.sqlfiddle.com/#!4/07a2d/5)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T08:58:00.263

在第一个查询中对所有者姓名列进行分区 -> 查询 1 在第二个查询中对联系人姓名列进行分区 -> 查询 2

执行联合查询 1 和查询 2

# eclipse - 在 Eclipse 中以快捷方式运行？

> ID：11859174
> 
> 赞同：3
> 
> 时间：2012-08-08T06:54:35.080
> 
> 标签：eclipse

我在eclipse中搭建cocos2d-x环境。虽然设置一切都已正确完成，除了当我按 ctrl+f11 它打开远程应用程序设置并要求设置新配置。我想将其设为默认 Run As Android Application 而不是每次都进行项目然后右键单击并运行 android 应用程序

请问有什么方法可以让我快捷地访问普通的 Android 应用程序

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T07:30:49.223

在 Eclipse 中，转到`window -> preferences`，转到`general -> keys`

在那里你可以定义你的键盘快捷键![在此处输入图像描述](../Images/5dd9f35f25f020c0018c60bf23a037fc.png)

# screenshot - Unity ReadPixels 在三星笔记中返回黑屏

> ID：11859183
> 
> 赞同：2
> 
> 时间：2012-08-08T06:54:57.430
> 
> 标签：screenshot, unity3d, samsung-mobile

我有代码：

```
savedImage = new Texture2D((int) this.camera.pixelWidth, (int) this.camera.pixelHeight, TextureFormat.RGB24, false);
savedImage.ReadPixels(this.camera.pixelRect, 0, 0);
savedImage.Apply (); 
```

它只是以某种方式截取屏幕截图。此代码适用于三星 SI 和 SIII，但不适用于 Note。在三星 Note 上，它只返回黑屏。有谁知道为什么会这样？非常感谢？

# php - PHP解析一个取决于选择的选项

> ID：11859185
> 
> 赞同：0
> 
> 时间：2012-08-08T06:55:08.083
> 
> 标签：php, codeigniter

我的视图中有一个名为 Placeholder 的下拉菜单 -`"add_fields_placeholder"`其值为**yes**和**no**。

When **no** is selected I would like the placeholder value to be left out of the `$formData`array that generates the form html lines that are inserted into the database.

**选择是**时，我希望从占位符输入框中`add_fields_placeholderValue`提交到`$formData`数组中的文本。

我将如何实现这一目标？

```
 public function add()
    {

        $this->form_validation->set_rules('add_fields_name', 'Name', 'trim|required|xss_clean');
        $this->form_validation->set_rules('add_fields_value', 'Value', 'trim|xss_clean');
        $this->form_validation->set_rules('add_fields_class', 'Class', 'trim|xss_clean');
        $this->form_validation->set_rules('add_fields_placeholder', 'Placeholder', 'trim|required|xss_clean|callback_dropdown_check');
        $this->form_validation->set_rules('add_fields_type', 'Type', 'trim|required|xss_clean|callback_dropdown_check');

        if($this->form_validation->run() == FALSE)
        {
            $data['validation_errors'] = validation_errors('<div class="alert alert-error">', '</div>');
            $data['contentMangement'] = $this->options_model->systemOptions();
            $data['pageTitle'] = 'Add Fields';
            $this->load->view('_assets/dashHeader', $data);
            $this->load->view('dashboard/add_fields', $data);
            $this->load->view('_assets/footer');    

        }else{

            $fieldName = $this->input->post('add_fields_name', TRUE);
            $fieldValue = $this->input->post('add_fields_class', TRUE); 
            $fieldClass = $this->input->post('add_fields_defaultValue', TRUE);

            //Removes Caps & spaces
            $fieldNameStripped = strtolower(str_replace(" ", "", $fieldName));
            $fieldValueStripped = strtolower(str_replace(" ", "", $fieldValue));
            $fieldClassStripped = strtolower(str_replace(" ", "", $fieldClass));
            //Default Form Details

            $fieldLabel = '<label for="'. $fieldNameStripped . '">'. $fieldName. '</label>'."\n";

            $formData = array(
                                'name' => ''.$fieldNameStripped.'',
                                'id' => ''.$fieldNameStripped.'',
                                'value' => ''.$fieldValueStripped.'',
                                'class' =>''.$fieldClassStripped.'',
                                'placeholder' => ''
                            );

            if (isset($_REQUEST['add_fields_type']))
            {
                if($_REQUEST['add_fields_type'] == 'input')
                {
                    $fieldField = form_input($formData, TRUE);
                }

                if($_REQUEST['add_fields_type'] == 'textarea')
                {
                    $fieldField = form_textarea($formData, TRUE);
                }

                if($_REQUEST['add_fields_type'] == 'radiobutton')
                {
                    $fieldField = form_radio($formData, TRUE);
                }

                if($_REQUEST['add_fields_type'] == 'checkbox')
                {
                    $fieldField = form_checkbox($formData, TRUE);
                }

                $fieldTypeInsert = array(
                                        'name'  =>  ''.$fieldName.'',
                                        'type'  =>  ''.$_REQUEST['add_fields_type'].'',
                                        'label' =>  ''.$fieldLabel.'',
                                        'field' =>  ''.$fieldField.''   
                                        );

                $this->form_model->insertField($fieldTypeInsert);

                $data['validation_errors'] = '<div class="alert alert-success"><strong>Thank You</strong> Your Field Has Been Added</div>';
                $data['contentMangement'] = $this->options_model->systemOptions();
                $data['pageTitle'] = 'Add Fields';
                $this->load->view('_assets/dashHeader', $data);
                $this->load->view('dashboard/add_fields', $data);
                $this->load->view('_assets/footer');    

            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:04:32.977

你可以做：

```
$dropdown = $this->input->post('add_fields_placeholder', TRUE);
$dropdown_value = '';
if ($dropdown == 'yes') {
    $dropdown_value = 'yes';
}

$formData = array(
                 'name' => ''.$fieldNameStripped.'',
                 'id' => ''.$fieldNameStripped.'',
                 'value' => ''.$fieldValueStripped.'',
                 'class' =>''.$fieldClassStripped.'',
                 'placeholder' => $dropdown_value
            ); 
```

# sql - 使用 DISTINCT 查询需要很长时间

> ID：11859191
> 
> 赞同：0
> 
> 时间：2012-08-08T06:55:22.240
> 
> 标签：sql, sql-server, ms-access

我正在使用 Microsoft Access 2003。我的项目中的一个表单需要很长时间才能显示给用户。

这是适用的查询：

```
SELECT DISTINCT tb_KonzeptDaten.DFCC
,tb_KonzeptDaten.OBD_Code AS Konzept_Obd
,tb_bauteile.*
,FehlerCodes_akt_Liste.VAG_Code
,FehlerCodes_akt_Liste.OBD_Code
,FehlerCodes_akt_Liste.F_Klasse_EU
,FehlerCodes_akt_Liste.F_Klasse_US
,FehlerCodes_akt_Liste.CDT AS CdtNr
,FehlerCodes_akt_Liste.Pfad_Bezeichnung
,FehlerCodes_akt_Liste.Fehlerpfad AS PfadName
,FehlerCodes_akt_Liste.Fehlerunterpfad
,tb_bauteile_Tools.Tool AS Tool_
FROM (
    (
        tb_bauteile LEFT JOIN FehlerCodes_akt_Liste ON tb_bauteile.OBD2_Plaus = FehlerCodes_akt_Liste.ID
        ) LEFT JOIN tb_bauteile_Tools ON tb_bauteile.Tool = tb_bauteile_Tools.ID
    )
LEFT JOIN tb_KonzeptDaten ON FehlerCodes_akt_Liste.Fehlerpfad = tb_KonzeptDaten.DFC; 
```

如果我删除**DISTINCT**然后运行查询，性能将会提高（从 9 秒到 2 秒）。此外，我还在必要的字段上放置了一个索引。

如何更改我的查询（可能没有 DISTINCT）以提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:06.060

我会建议获取不同的 ID，然后在列查询中获取您想要的列。

像这样的东西

```
Select (select Fehlerpfad from FehlerCodes_akt_Liste where id=A.id ) as col1, ...
from
(
   Select distinct ids from table
   .........
) A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:58:34.750

使用 distinct 本质上是在做一个`group by`，所以你只会得到“唯一”的记录。如果您没有任何重复记录，则不需要这样做。

我会将重点放在您的联接上，而不是`distinct`子句上。

# spring - 使用 Spring MVC 上传所有文件夹内容，包括子文件夹

> ID：11859195
> 
> 赞同：1
> 
> 时间：2012-08-08T06:55:57.637
> 
> 标签：spring, amazon-s3, amazon-web-services

我的问题是我想使用网页选择一个文件夹并使用 Spring 将文件夹的所有内容上传到 S3。

我已经尝试过 Spring MVC multipartresolver 来上传文件，它工作正常。我也使用 JetS3t 将文件夹和文件上传到 S3。但是如何使用我的网络应用程序选择一个文件夹并告诉它将所有文件和子文件夹上传到 S3。我正在使用 Spring MVC 3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:24:18.563

不使用“正常”的基于 HTML 表单的文件上传。这与 Spring 或 amazon 无关，它只是 HTML 中的一个限制。在 WHAT 工作组中[建议](http://lists.whatwg.org/pipermail/whatwg-whatwg.org/2009-December/024455.html)添加此功能，但那是不久前的事了，我认为它没有任何结果。

您拥有的关闭是允许您选择多个文件的“[多个](http://www.w3schools.com/html5/att_input_multiple.asp)”文件选择器（“ ”）选择器。`<input type="file" multiple>`与 HTML5 中的新 FileReader API（[示例](http://www.html5rocks.com/en/tutorials/file/dndfiles/)）一起，这让您更接近您想要的。不幸的是，IE 不支持“多个”。

对于真正的目录选择和上传，您必须使用 Java Applets 或类似技术。为了被允许与文件系统交互，applet 必须正确签名。

# python - 运行多个 unittest.TestCase 方法，每个方法都使用相同的随机数据

> ID：11859198
> 
> 赞同：1
> 
> 时间：2012-08-08T06:56:24.760
> 
> 标签：python, testing, selenium

我想在 Python 中使用 Selenium RC 执行测试套件。在这组测试中，我想：

1.  借助 Selenium 在网站上模拟用户输入数据
2.  检查数据是否正确放入数据库
3.  从所选帐户获取电子邮件并对其进行解析以检查数据是否正确

所有测试原则上都已完成，但它们不能作为包含这三个测试的整个测试套件工作。我尝试在*setUp*方法中生成数据，但在所有测试中数据都不同。我已经了解到，在每次测试执行中都会运行*setUp()*和*tearDown()*方法，因此我尝试将数据生成器移动到测试类构造函数中，但我仍然无法处理它。

我的测试结构如下：

```
class TestClass(unittest.TestCase):
  def __init__(self, TestClass):
     unittest.TestCase.__init__(self, TestClass)
     self.define_random_data()
  def setUp(self):
    db_connection_function(self)
  def some_internal_methods(self):
    ...
  def test_website_data_input(self):
    ...
  def test_db_test(self):
    ...
  def test_email_parse(self):
    ...
  def tearDown(self):
    ...
suite = unittest.TestLoader().loadTestsFromTestCase(TestClass)
unittest.TextTestRunner(verbosity=2).run(suite) 
```

我究竟做错了什么？在每个测试中生成的数据都是不同的，我不知道如何处理它——我试图在每个可能的地方运行这个方法，但它仍然是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:32:45.120

啊好吧。为每个运行的测试方法创建一个新的 TestClass 实例。所以你必须这样做。

```
import unittest
import random
random_data = random.random()

class TestClass(unittest.TestCase):
    def __init__(self, TestClass):
        unittest.TestCase.__init__(self, 'test_first')
        self.data = random_data

    def test_first(self):
        self.fail(self.data)

    def test_second(self):
        self.fail(self.data)

if __name__ == '__main__':
    unittest.main() 
```

我刚刚对此进行了测试，并为每个测试打印了相同的失败消息。随机数据仅在导入测试模块时生成。

# java - 是否可以在其自身内使线程进入睡眠状态？

> ID：11859200
> 
> 赞同：0
> 
> 时间：2012-08-08T06:56:33.857
> 
> 标签：java, multithreading

我正在用 java 中的多线程进行试验，基本上我想创建两个线程，并让它们计数到一个数字。

但是当他们到达大约一半时，他们会睡一段时间。所以我想在 FOR 循环中放置一个 IF 语句，看看它什么时候达到了一半，如果达到了，它就会让自己进入睡眠状态。

我正在运行单核 cpu atm，因为我在学校计算机上，所以理论上，当我让第一个线程进入睡眠状态时，第二个应该启动吗？

另外，是否可以让第一个线程从第二个线程进入睡眠状态，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:02:40.663

您可以使用[`Thread.sleep(int milliseconds)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29)：

> Causes the currently executing thread to sleep (temporarily cease execution) for the specified number of milliseconds, subject to the precision and accuracy of system timers and schedulers. The thread does not lose ownership of any monitors.

As for making one thread pausing another, you could expose methods which the other threads can call to pause the execution of other threads.

Just like any other multi-threaded program, keep an eye out for [race conditions](https://stackoverflow.com/questions/34510/what-is-a-race-condition).

As for your other question, single core processors should be able to run multiple threads, so the amount of cores (in this case) does not really matter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:59:41.693

线程只能使用[`Thread.sleep`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#sleep%28long%29). 即使在单核 CPU 上运行时，JVM 也会为所有可运行的线程安排时间。如果您想更好地控制每个线程何时运行，您将需要查看[`java.util.concurrent`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)包中的信号量和其他锁定/调度机制。

提出更具体的问题，以获得有关您在项目中遇到的问题的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:00:37.870

当您开始让一个线程让另一个线程进入睡眠状态然后让自己进入睡眠状态时，您将非常接近竞争/死锁条件：

[http://en.wikipedia.org/wiki/Deadlock#Necessary_conditions](http://en.wikipedia.org/wiki/Deadlock#Necessary_conditions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:07:21.250

I'd recommend you to have a look at this book It covers almost everything about java and concurrency/multithreading, including coding principles and many examples. [Book For Conucurrency In java](http://www.javaconcurrencyinpractice.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:09:01.800

For the first part of your question:

It's possible that the second thread may have finished by the time execution reaches the sleep() statement in the first thread. This is because the JVM allocates CPU time to threads not based on when in time each was started, but based on complex scheduling algorithms. The only thing that is guaranteed when you call `Thread.sleep(1000)` is that the thread WILL stop execution at that point for at least 1000 milliseconds.

The second part - putting one thread to sleep from another - has been addressed well by others. You need to watch out for race conditions.

# java - Google Guice 是否有效？

> ID：11859207
> 
> 赞同：10
> 
> 时间：2012-08-08T06:57:14.783
> 
> 标签：java, guice

一年多没有发布，甚至没有小错误修正。对存储库的提交很少，过去两个月没有提交。使用这个库开始新项目是否安全？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-31T14:19:04.447

Guice 4 现在处于测试阶段（参见[https://github.com/google/guice](https://github.com/google/guice)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T10:31:41.473

他们的 Google Group 中有一个[非常新鲜的答案](https://groups.google.com/forum/?fromgroups#!topic/google-guice/T8LCD6GBU0I%5B1-25%5D)。

[以下](http://code.google.com/p/google-guice/issues/list?q=label:3.1)是标记为 3.1 候选的当前问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-29T06:53:57.020

大家好消息！

Guice 4.0 发布（[https://github.com/google/guice/wiki/Guice40](https://github.com/google/guice/wiki/Guice40)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-20T14:04:52.573

Guice 是一个功能齐全的系统。存在错误，正在进行改进，但核心是稳定的并且已经有很长一段时间了。也就是说，我们已经发布了 4.0-beta，因此新功能、新约束、新 SPI 添加可用于现场测试。我们应该在本季度或下个季度初发布 4.0 最终版，这取决于一些内部事情是否迅速进入。

# c# - 将 listview 列值与另一个 listview 列值进行比较，如果匹配则显示列值而不是其他值

> ID：11859208
> 
> 赞同：2
> 
> 时间：2012-08-08T06:57:18.417
> 
> 标签：c#, winforms, listview, compare, contacts

我有一个显示**联系人**的列表视图-`name`并且`number`是列。我有另一个显示**消息**的列表视图- `phone number`（从接收消息的位置），`message`作为列。现在，当我填充我的消息列表视图时，我想将电话号码列与联系人列表号码列进行比较，然后如果匹配，则将消息列表视图的号码列替换为联系人姓名。

这可能吗？请提供解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:00:14.090

看看这是否可以帮助您：

```
 if (messagelist.Items.Count > 0)
            {
                for (int i = 0; i < messagelist.Items.Count; i++)
                {
                    string mnum = messagelist.Items[i].Text;

                    for (int j = 0; j < contactlist.Items.Count; j++)
                    {
                        if (contactlist.Items[j].SubItems[1].Text == mnum)
                        {
                            messagelist.Items[i].Text = contactlist.Items[j].Text;
                        }

                    }
                }
            } 
```

我假设联系人列表的第二列中有数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:25:43.947

我首先`join`要两个`lists`号码/电话号码：

```
var matchingList = (from c in ContactList
                    join m in MessageList on c.Number equals m.PhoneNumber
                    select new {ContactName = c.Name
                              , ContactNumber = c.Number
                              , Message = m.Message
                              , PhoneNumber = m.PhoneNumber } ); 
```

现在你有一个`list`匹配的`Contact.Number`and `Message.PhoneNumber`。

现在您可以遍历这些项目并设置`Name`：

```
MessageList.Foreach( x => 
{
    var matchedItem = matchingList.FirstOrDefault( y => y.Massage == x.Message && y.PhoneNumber == x.PhoneNumber);

    if(matchedItem != null)
    {
        x.PhoneNumber = matchedItem.Name
    }
}); 
```

注意：未经测试。只是一些工作。

希望这可以帮助。

# css - css：如何将多个样式表合并为一个

> ID：11859211
> 
> 赞同：4
> 
> 时间：2012-08-08T06:57:30.367
> 
> 标签：css

有谁知道如何将多个样式表组合成一个？例如我有

```
<link rel="stylesheet" type="text/css" href="abc.css" />
<link rel="stylesheet" type="text/css" href="efg.css" />
<link rel="stylesheet" type="text/css" href="hij.css" /> 
```

在 mysite.html 中。如何将上述 3 个样式表合并为一个？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T07:02:54.327

[您可以使用YUI Compresser](http://developer.yahoo.com/yui/compressor/)合并您的 css 文件，它结合了 CSS 并最大限度地减少了代码，并且有利于性能。

看看[这里](http://www.codeproject.com/Articles/141931/Combine-Multiple-CSS-Files-into-One-File-and-Minif)，将 CSS 文件合并为一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T04:55:27.860

不推荐@import ...最大的问题是它会导致文件按顺序加载（一个必须等​​待另一个）而不是并行（同时）加载。这会浪费时间和往返行程，并使您的网页加载速度变慢。

[http://www.feedthebot.com/pagespeed/avoid-css-import.html][1]

[1]：[http](http://www.feedthebot.com/pagespeed/avoid-css-import.html) ://www.feedthebot.com/pagespeed/avoid-css-import.html你可以在这里阅读...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T06:59:30.193

将文件的内容复制到一个中怎么样？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T04:33:21.493

您可以使用 title 属性对它们进行分组。尝试给出一个标题属性，如 `title="myStyle"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:06:10.613

您可以使用 .htaccess 文件，参考 -

[http://www.isitvivid.com/blog/combining-your-cssjs-files-with-htaccess/](http://www.isitvivid.com/blog/combining-your-cssjs-files-with-htaccess/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:07:09.397

您好，您可以通过导入选项实现您想要的结果......

应用多个文件的更简单方法是使用“@import”规则（取决于浏览器支持）。

```
<style type="text/css" media="all">
  @import url("/css/a.css");
  @import url("/css/b.css");
  @import url("/css/c.css");
</style> 
```

[您可以阅读更多关于使用 @import 处理多个样式表的信息](http://www.free-css.com/free-css-tutorials/basic-css-tutorials/at-import.php)

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-08T07:03:32.520

基本上，你可以让它们保持这种状态。只要您的样式表没有从一个到另一个重新定义元素，您就不会有问题。例如，如果您的 htm 文件中有 2 个样式表 a.css 和 b.css

```
<link rel="stylesheet" type="text/css" href="a.css" />
<link rel="stylesheet" type="text/css" href="b.css" /> 
```

如果在 a.css 你有

```
a{
text-decoration:none;
} 
```

在 b.css 中

```
a{
text-decoration:underline;
} 
```

然后第二个链接样式表将定义 text-decoration 属性`a`

# ios - 如何在 Interface Builder NIB 中使用 GLKView 设置 GLKViewController 库对象

> ID：11859212
> 
> 赞同：4
> 
> 时间：2012-08-08T06:57:33.270
> 
> 标签：ios, xcode, interface-builder, glkit

{Xcode 4.4，部署目标 iOS5.0，不是情节提要，使用 ARC}

我一直在研究 iOS 中的 OpenGL，并且正如许多教程所示，以编程方式创建 GLKViewController 和 GLKView 没有问题。我想尝试在界面构建器中使用 GLKViewController 库对象，但除了我没有使用的情节提要设置之外，我还没有找到任何教程或信息。我自己的尝试没有 100% 有效，所以我在这里展示了我的设置截图，希望有人能告诉我我做错了什么。只是为了澄清，它在我指的界面生成器中使用这个对象：

![GLKViewController 库对象](../Images/32c33ad6cb05a507b4f77e93001b01a9.png)

我通过将一个 GLKViewController 对象从库中拖到 IB 中来设置它，这也将一个子 GLKView 放在那里。我删除了默认视图，所以它看起来像这样：

![IB布局](../Images/210f6f721b5d7cbfce4ed6681ec61bf4.png)

我在我的 OpenGLVC2 类（一个 GLKViewController）中创建了一个 GLKView 插座属性，我像这样连接插座：

![IB奥特莱斯](../Images/5e71800b033883141323460da664deb7.png)

实际上，起初我没有连接文件所有者中的视图出口，因为这已经在 GLKViewController 对象中自动完成，但是以错误“加载了 OpenGL2_iPhone 笔尖但未设置视图出口”而终止。我还将文件的所有者委托连接到 GLKViewController 对象，但以错误“此类不符合键委托的键值编码”而终止。我认为因为 IB 中的 GLKViewController 我设置为自定义类 OpenGLVC2，所以一旦它们在运行时缝合在一起，GLKViewController*就是*文件的所有者，但显然我错了。

因此，如上面的屏幕截图所示，设置实际上可以在屏幕上绘制一次，但我没有得到渲染循环（即更新方法不会触发），以及其他方法，如 shouldAutorotateToInterfaceOrientation: don'不开火。看来我的 OpenGL2VC 类的 GLKView 委托工作正常，但我的 GLKViewController 不是。

IB nib 方法是否可以在同一个 GLKViewController 类中拥有 GLKViewController 和 GLKView 方法？这就是我在教程中以编程方式完成的方式（事实上，第一步所有代码都在 AppDelegate 中）。这是我的 GLKViewController 和 GLKView 的身份和属性检查器的屏幕截图，以防出现问题：

![身份和属性检查器](../Images/2c96298108ca4d4be88cb49b188f19ef.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:01:41.673

我觉得你的笔尖很奇怪的是`GLKViewController`它里面的物体。通常文件的所有者是 type`GLKViewController`并且只有一个`GLKView`在下面。我的下图说明了这一点。

![在此处输入图像描述](../Images/6c93569f111f1e6b9c14f2165302d599.png)

我为控制器创建 nib 的常用过程是添加视图类型的新 nib 文件，并将文件所有者的类设置为我正在使用的控制器类。

注意：我不能`GLKViewController`从笔尖显式地将 ' 委托设置为 self，但这可以在代码中完成。

# python - 在 OpenERP 中导入函数的参数

> ID：11859214
> 
> 赞同：1
> 
> 时间：2012-08-08T06:57:37.947
> 
> 标签：python, import, openerp

我是 OpenERP 和 Python 的新手，我试图了解 py 文件中的各种功能。所有文件中都使用了一个导入函数，通常分为两部分：第一部分似乎是指 Python 库（称为模块？），`from datetime import datetime`或者`from dateutil.relativedelta import relativedelta`但第二部分，我不知道它指的是什么。

我想知道以下功能指的是什么：

```
import netsvc
import pooler
from osv import fields, osv
import decimal_precision as dp
from tools.translate import _ 
```

什么是 netsvc、pooler、osv、decimal_precision、tools_translate？如果它们是 openERP 模块，我在哪里可以找到它们背后的代码，否则它们是什么？

我将感谢任何能够向我解释所有这些的人，以及任何其他类似的人，如果他/她知道的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:17:39.890

所有这些都是 openerp *python 模块*：

```
./server/6.1/openerp/netsvc.py
./server/6.1/openerp/pooler.py
./server/6.1/openerp/osv/osv.py
./server/6.1/openerp/tools 
```

除此之外`decimal_precision`，`openerp module`您可以在插件中找到它：

```
./addons/6.1/decimal_precision 
```

所有这些导入都是`relative import`一种糟糕的编码态度（[请参阅相关的 pep](http://www.python.org/dev/peps/pep-0328/)）。幸运的是，openerp 团队正在朝着更好的方法发展，例如`from openerp.addons import this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:04:46.827

这些是 Python 模块。它们不是标准库的一部分，而是您安装的一些第三方库。它们可能是 OpenERP 的一部分，或者是 OpenERP 使用的一些其他库的一部分。如果您打开交互式解释器，您可以导入模块，然后查看它们的`__file__`属性以查看文件的位置。例如，对于`guineapyg`我安装的名为的随机模块：

```
>>> import guineapyg
>>> guineapyg.__file__
'C:\\Documents and Settings\\BrenBarn\\My Documents\\Python\\guineapyg\\guineapyg.py' 
```

您应该阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉导入模块和其他基本 Python 内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T07:14:20.773

您可以在 $server/openerp/ 中找到代码

都是 $server/openerp/ 的相对路径

其中 "$server" 是您的 OpenERP 服务器的路径

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-08T07:17:20.547

`pooler`是一个 python 模块，它跟踪您已安装的所有模块的所有对象，并为每个数据库维护它。

`netsvc`模块负责`socket`服务（默认8070端口连接openerp）

`decimal_precision`是处理浮点数的模块，如发票中的税费取决于您的选择 2 位小数或 3 位小数等...这也取决于您提供的配置，该模块负责为所有用户保持相同的配置此类对象（提供相同的小数精度）

`_`是一个`gettext.gettext`别名，用于为您为所选数据库安装的所有语言保留翻译信息。

地点：

```
netsvc $Server_path/openerp/netsvc.py

pooler $Server_path/openerp/pooler.py 
```

$server_path - 是你安装 openerp 服务器的地方。

`decision_precision`你可以在 openerp 里面找到一个标准的 openerp 模块。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T18:47:20.417

听起来你已经安装了一些包含编译文件而不是原始 Python 源代码的 OpenERP 版本。

我建议您通过从启动板检查源代码并从源代码运行服务器来[重新配置您的开发环境。](http://doc.openerp.com/v6.1/developer/01_getting_started.html)就个人而言，我喜欢在 Eclipse 下使用 PyDev 运行它，因为它有一个很好的调试器。

对于 Eclipse 中的项目配置，我刚刚从启动板签出每个分支，然后将每个分支作为一个项目导入到我的 Eclipse 工作区中。6.0 和 6.1 的启动细节略有不同。以下是用于启动每个版本的*服务器*项目的命令行参数：

6.0：

> --addons-path ${workspace_loc:openerp-addons-6.0} --config ${workspace_loc:openerp-config/src/server.config} --xmlrpc-port=9069 --netrpc-port=9070 --xmlrpcs-端口=9071

6.1 需要web客户端与服务器一起启动：

> --addons-path ${workspace_loc:openerp-addons-trunk},${workspace_loc:openerp-web-trunk}/addons,${workspace_loc:openerp-migration} --config ${workspace_loc:openerp-config/src/ server.config} --xmlrpc-port=9069 --netrpc-port=9070 --xmlrpc-port=9071

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:03:26.917

它们是[包和模块](http://docs.python.org/tutorial/modules.html)，[位于`sys.path`](http://docs.python.org/tutorial/modules.html#the-module-search-path).

# javascript - Javascript函数文字？

> ID：11859216
> 
> 赞同：0
> 
> 时间：2012-08-08T06:57:43.987
> 
> 标签：javascript, json, object, literals

我偶然发现了这段代码

```
var Actors = {

    init: function(config){
        this.config = config;
        this.bindEvents();
    },

    bindEvents: function(){
        this.config.letterSelection.on('change',this.fetchActors );
    },

    fetchActors: function(){
        console.log('fetching');
    }
}; 
```

起初我在想这是什么类型的 Javascript。我不知道要搜索什么。所以我想在这里问是合适的

我的理解是 var Actors 是一个对象。但是这些呢？

```
 init: function(config){
        this.config = config;
        this.bindEvents();
    }, 
```

您具体将文字“init”称为什么？它被称为对象文字吗？在初始化之后，它附加了一个函数，你怎么称呼它？

我明白代码在做什么。但我不知道用技术术语如何称呼它们。那么这是什么类型的javascript？为什么“init”这个词有它的功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T06:59:28.527

> 您具体将文字“init”称为什么？它被称为对象文字吗？

一个财产。对象字面量是`{}`

> 在初始化之后，它附加了一个函数，你怎么称呼它？

一个方法。

> 为什么“init”这个词有它的功能

因为通过将它们分配给对象属性来组织一堆相关的“东西”很有用。

`this`当函数可以用来对与之关联的对象进行操作时，情况就更是如此了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:05:10.767

JavaScript 是一种函数式语言，这意味着函数是其中的一等对象。所以如果你有一个变量，那么你可以给它分配一些字符串、一些数字、一些对象或一些函数，如下所示：

```
var a;
a = function() {};
a(); // Call this function 
```

以同样的方式，您可以将函数分配给对象属性，如下所示：

```
var a = {};
a.myProp = function() {};
a.myProp(); // Call this function 
```

但是当你调用你的函数时`a.myProp()`，这个函数也会收到一个特殊的参数，叫做`this`指向`a`。

因此，在您的情况下`Actors`，分配了具有属性的对象文字，该属性`init`分配了一个函数。你可以称它为`method`，但这是来自其他 OO 语言的概念。在这里，它只是一个分配了功能的属性。

# asp.net - 当单击更新面板中的按钮时，来自 page_load 的更新查询会一次又一次地执行

> ID：11859217
> 
> 赞同：0
> 
> 时间：2012-08-08T06:57:46.967
> 
> 标签：asp.net

我有一个更新查询`page_load()`。我在页面上有一个按钮。我只想执行一次该查询，但是当我单击按钮时，页面会再次加载。

因此，我将该按钮放在更新面板中。现在，当我单击按钮时，页面似乎没有重新加载，但更新查询正在执行。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:09:39.367

```
USE **ISPOSTBACK** PROPERTY IN YOUR **PAGELOAD.**

protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
       //RUN UR UPDATE QUERY HERE
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:01:43.173

在 Page_Load 方法中添加以下内容

```
if(!IsPostBack)
{
 //Run update query
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:01:58.617

使用 UpdatePanel 时，您的页面可能看起来没有刷新，但实际上您的整个页面生命周期都已执行。这是通过 AJAX 请求完成的，该请求只会刷新更新面板中的部分。对于这种情况，您不需要 UpdatPanel。

如果`Page_Load`当前请求是`Postback`. PostBack 表示页面上的用户操作已执行并且将运行事件。如果是，您知道您不需要运行查询。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
       // Run query
    }
} 
```

UpdatePanels 可能会给您一种使用 AJAX 的错误感觉，但在内部，它们运行您的整个页面生命周期，并且它们与真正的 AJAX 请求不同。

# qt - qt QCoreApplication::exec() 在 ubuntu 12.04 上崩溃

> ID：11859227
> 
> 赞同：0
> 
> 时间：2012-08-08T06:58:25.810
> 
> 标签：qt, crash, ubuntu-12.04

我正在开发一个在 qt、ubuntu 中的套接字上带有信号槽的系统应用程序

```
void Receiver::startServer()
{
....
connect(udpSocket, SIGNAL(readyRead()), this, SLOT(receiveFunc()));
}

void Receiver::receiveFunc()
{

emit receiveForwarder();
{

Handler::start()
{
receiver= new Receiver();
thread=new QThread()
receiver->moveToThread(thread);
receiver->startServer();

connect(receiver, SIGNAL(receiveForwarder()), this, SLOT(processTexts()));
}

Handler::processTexts()
{

//emit another signal that is in another thread
} 
```

我有一个 processTexts 函数，它既是线程的插槽，也向另一个线程发出信号。如果我在 Handler 中省略了第二次发出，则问题并未解决，但程序稍后会崩溃。但它并没有消失。一两分钟后它会折断。程序处理来自 UDP 套接字的文本。并通过另一个 QTcpSocket 将其发送到另一个程序。

崩溃签名是：

```
0[bt:0]/application/collector/main.cpp::exceptionHandler(int)::30
./collector(_Z16exceptionHandleri+0x56)[0x422156]
/lib/x86_64-linux-gnu/libc.so.6(+0x364c0)[0x7fbf348f54c0]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(+0x1a9b24)[0x7fbf35558b24]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(g_main_context_check+0x183)[0x7fbf33db1a33]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(+0x47f96)[0x7fbf33db1f96]
/lib/x86_64-linux-gnu/libglib-2.0.so.0(g_main_context_iteration+0x34)[0x7fbf33db2124]
/usr/lib/x86_64-linugnu-libQtCore.so.4(_ZN20QEventDispatcherGlib13processEventsE6QFlagsIN10QEventLoop17ProcessEven    tsFlagEE+0xd6)[0x7fbf35559426]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN10QEventLoop13processEventsE6QFlagsINS_17ProcessEventsFlagEE+0x32)       [0x7fbf35528c82]
/usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN10QEventLoop4execE6QFlagsINS_17ProcessEventsFlagEE+0xf7)      [0x7fbf35528ed7]
  /usr/lib/x86_64-linux-gnu/libQtCore.so.4(_ZN16QCoreApplication4execEv+0x87)[0x7fbf3552df67]
  ./collector(main+0x216)[0x4234c6]
/lib/x86_64-linux-gnu/libc.so.6(__libc_start_main+0xed)[0x7fbf348e076d] 
```

我用 valgrind 分析了它，它说：

```
==31981== Conditional jump or move depends on uninitialised value(s)
==31981==    at 0x556AB14: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170)
==31981==
==31981== Invalid read of size 2
==31981==    at 0x556AB45: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170)
==31981==  Address 0xa8bf0c6 is 6 bytes inside a block of size 16 free'd
==31981==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==31981==    by 0x556AB44: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170)

==31981==
==31981== Invalid read of size 2
==31981==    at 0x556AB4D: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170)
==31981==  Address 0xa8bf0c4 is 4 bytes inside a block of size 16 free'd
==31981==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==31981==    by 0x556AB44: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170)

==31981==
==31981== Thread 2:
==31981== Invalid write of size 2
==31981==    at 0x6C281FA: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C291D1: g_source_add_poll (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B7A9: QEventDispatcherGlib::registerSocketNotifier(QSocketNotifier*) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x5145E59: QUdpSocket::readDatagram(char*, long long, QHostAddress*, unsigned short*) (in /usr/lib/x86_64-linux-gnu/libQtNetwork.so.4.8.1)
==31981==    by 0x4205F1: LogReceiver::receiveLog() (udpSocket.cpp:52)
==31981==    by 0x42B630: LogReceiver::qt_static_metacall(QObject*, QMetaObject::Call, int, void**) (moc_udpSocket.cpp:54)
==31981==    by 0x5555445: QObject::event(QEvent*) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553BE9B: QCoreApplication::notifyInternal(QObject*, QEvent*) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FC69: QCoreApplicationPrivate::sendPostedEvents(QObject*, int, QThreadData*) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x556AF92: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AC99: g_main_context_dispatch (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B05F: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==  Address 0xa8bf0c6 is 6 bytes inside a block of size 16 free'd
==31981==    at 0x4C2A4BC: operator delete(void*) (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==31981==    by 0x556AB44: ??? (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x6C2AA32: g_main_context_check (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2AF95: ??? (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x6C2B123: g_main_context_iteration (in /lib/x86_64-linux-gnu/libglib-2.0.so.0.3200.1)
==31981==    by 0x556B3BE: QEventDispatcherGlib::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AC81: QEventLoop::processEvents(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553AED6: QEventLoop::exec(QFlags<QEventLoop::ProcessEventsFlag>) (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x553FF66: QCoreApplication::exec() (in /usr/lib/x86_64-linux-gnu/libQtCore.so.4.8.1)
==31981==    by 0x4234C5: main (main.cpp:170) 
```

我分析了程序并删除了所有我不知道是 Qt 错误或 ubuntu 错误或 GCC 还是我的错的错误。

此外，我想知道是否有人尝试过每秒处理超过 20 个事件的系统应用程序。它在一段时间后崩溃。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T11:38:28.093

SocketNotifier 实现不是线程安全的。这意味着您不允许从不同的线程控制它。

如果您在没有 QT_NO_DEBUG 的情况下编译 Qt，您将收到警告说您从不同的线程控制它：

```
void QEventDispatcherGlib::unregisterSocketNotifier(QSocketNotifier *notifier)
{
    Q_ASSERT(notifier);
#ifndef QT_NO_DEBUG
    int sockfd = notifier->socket();
    if (sockfd < 0) {
        qWarning("QSocketNotifier: Internal error");
        return;
    } else if (notifier->thread() != thread()
               || thread() != QThread::currentThread()) {
        qWarning("QSocketNotifier: socket notifiers cannot be disabled from another thread");
        return;
    }   
#endif
//....
} 
```

请检查移动到线程的对象的所有成员是否被创建为该对象的子对象。或者干脆关掉QT_NO_DEBUG。

顺便说一句：我遇到了类似的问题，使用几个小时后就出现了崩溃。

# android - Android 开放只读 sqlite 数据库

> ID：11859229
> 
> 赞同：1
> 
> 时间：2012-08-08T06:58:32.053
> 
> 标签：android, sql, sqlite

我试图做一个简单的android应用程序，这个应用程序需要在数据库中查找。

我只需要从数据库中读取信息。我不需要复制数据库，我只想对其进行一些查询。

我已经阅读了许多网站和教程，但一直无法理解我该怎么做。

我发现了很多关于如何创建数据库的东西，但只有一些关于你何时已经拥有数据库的东西。然后人们想复制数据库，但我不明白如何不复制数据库。它对我没有用，因为我只想阅读它，我不会改变它。

如果有人知道一种简单的方法或解释如何做的教程，请提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:10:58.660

因为您必须将数据库从您的资产复制到您的模拟器或设备中，但是如果您检查您的资产文件，它不会更改，因为它已经复制到您的设备或模拟器中，如果您想卸载您的应用程序并想要运行它再次，您不必担心您的数据库会更改或其值，这就是复制数据库的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:14:30.857

[嗨，试试这个教程，认为它对初学者有用](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/) 注意：-不要下载代码先学习基础知识，它会很好..

# python - 在python中将字符串转换为日期时间

> ID：11859231
> 
> 赞同：-1
> 
> 时间：2012-08-08T06:58:36.590
> 
> 标签：python

我有一个字符串形式的日期时间字符串：

```
20120808111051 
```

如何将此字符串转换为日期时间对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:06:15.620

我详细说明：

```
import datetime

s = "20120808111051"
parsed_datetime = datetime.datetime.strptime(s, "%Y%m%d%H%M%S") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:01:31.747

在最近的 Python 版本中，您可以使用函数 strptime：

```
http://docs.python.org/library/time.html#time.strptime 
```

您也可以在较旧的 Python 版本中执行此操作：

```
from datetime import datetime
d = '20120808111051'
print datetime(int(d[0:4]), int(d[4:6]), int(d[6:8]), int(d[8:10]), int(d[10:12]), int(d[12:14])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:10:27.780

你需要 datetime.strptime：[http ://docs.python.org/library/datetime.html#datetime.datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)

例子：

```
>>> import datetime
>>> datetime.datetime.strptime('20120808111051', '%Y%m%d%H%M%S')
datetime.datetime(2012, 8, 8, 11, 10, 51) 
```

请注意，我只是猜到了您发布的字符串的格式（即`0808`是月-日，还是日-月？），您必须知道这一点。

# mysql - MySQL DISTINCT 和空格

> ID：11859233
> 
> 赞同：5
> 
> 时间：2012-08-08T06:58:43.830
> 
> 标签：mysql, distinct

考虑以下查询

```
INSERT INTO DummyTable (TextColumn) VALUES ('Text');
INSERT INTO DummyTable (TextColumn) VALUES ('Text ');

SELECT DISTINCT TextColumn FROM DummyTable 
```

请注意，第二个插入包含一个空格：'Text'

但是 DISTINCT 会忽略空格并只返回一行“文本” - 你如何让 DISTINCT 不忽略空格？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T06:58:43.830

原来我正在寻找一个 BINARY 关键字，然后 DISTINCT 比较原始二进制值，包括空格。

```
SELECT DISTINCT BINARY TextColumn FROM DummyTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T06:59:45.820

```
SELECT DISTINCT replace(TextColumn,' ','') FROM DummyTable 
```

# python - 检查文件是否为任何文件类型打开

> ID：11859234
> 
> 赞同：2
> 
> 时间：2012-08-08T06:58:45.377
> 
> 标签：python

Python 文件类型文档`file.closed`作为

> bool 指示文件对象的当前状态。这是一个只读属性；该`close()`方法更改值。它可能不适用于所有类似文件的对象。

鉴于它不能保证在所有类似文件的对象上都可用，是否有另一种（更好的？）方法来检查我是否已经打开文件，然后再尝试重新打开它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:02:49.523

返回的所有文件对象`open`都具有该`closed`属性。

类似文件的对象是实现与`file`（例如[`StringIO.StringIO`](http://docs.python.org/library/stringio#StringIO.StringIO)）相同接口的对象，并且您引用的文档表明没有必要具有`closed`属性来实现这样的接口。

[相同的文档到处](http://docs.python.org/library/stdtypes.html#bltin-file-objects)都有关于应该在哪些类文件对象中实现哪些方法的注释。他们对属性也有这样的说法：

> 文件对象还提供了许多其他有趣的属性。这些对于类文件对象不是必需的，但如果它们对特定对象有意义，则应实施。

由于 close 方法的文档声明“*任何需要打开文件的操作都会引发 ValueError* ”，因此检查类文件对象是否已关闭的最佳方法是简单地使用文件，就好像它已打开一样，并抓住`ValueError`以防万一。

```
try:
    mystr = f.read(42)
except ValueError:
    # f was closed, do whatever needs doing 
```

并非所有类似文件的对象都是`seek`-able，因此进行*测试读取*以检查对象是否已关闭（正如我建议的那样）是一个坏主意。这是因为您需要存储您已读取的内容以防文件被打开，然后以某种方式将其添加到*实际*读取中，当它发生时。最好简单地假设它是打开的并立即执行您想做的任何事情，然后在 except 子句中处理已关闭的文件。

正如评论中所指出的，**人们不会简单地重新打开一个关闭的类似文件的对象**。在`StringIO`示例中，关闭实际上删除了缓冲区，因此类文件对象不再像关闭之前那样具有“重新打开”自身所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:09:08.557

只是为了澄清@lazyr 已经说过的内容：文档指的是类似文件*的*对象。实际*文件*对象将始终具有该`closed`属性，您可以使用它来查看文件是否已关闭。

# android - 在运行时更改颜色资源

> ID：11859238
> 
> 赞同：1
> 
> 时间：2012-08-08T06:58:51.803
> 
> 标签：android

是否可以从 res-colors.xml 更改颜色：

```
<color name="transparent_color">#00000000</color> 
```

在运行时？

更改它的原因是，在我扩展的 EditText 上，我将 backgroundresouce 设置为：

```
 setBackgroundResource(R.drawable.edittext_rounded_corners); 
```

edittext_rounded_corners.xml 看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- res/drawable/edittext_rounded_corners.xml -->
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:state_pressed="true"><shape>
            <solid android:color="#FF8000" />
            <stroke android:width="2.3dp" android:color="@color/referenceFrame" />
            <corners android:radius="8dp" />
        </shape></item>
    <item android:state_focused="false" android:state_pressed="true"><shape>
            <solid android:color="#FF8000" />
            <stroke android:width="2.3dp" android:color="#FF8000" />
            <corners android:radius="8dp" />
        </shape></item>
    <item android:state_focused="true" android:state_pressed="false"><shape>
            <solid android:color="#FFFFFF" />
            <stroke android:width="2.3dp" android:color="#FF8000" />
            <corners android:radius="8dp" />
        </shape></item>
    <item android:state_focused="false" android:state_pressed="false"><shape>
            <gradient android:angle="270" android:centerColor="#FFFFFF" android:endColor="#FFFFFF" android:startColor="#F2F2F2" />
            <stroke android:width="0.7dp" android:color="#BDBDBD" />
            <corners android:radius="8dp" />
        </shape></item>
    <item android:state_enabled="true"><shape>
            <padding android:bottom="4dp" android:left="4dp" android:right="4dp" android:top="4dp" />
        </shape></item>

</selector> 
```

当我有错误时，我需要一种方法使@Color/referenceFrame 变为红色。已经完成错误处理，只需要改变参考框架的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:02.640

创建一个新的可绘制对象（或选择器，您需要的），并将其`referenceFrame`设置为红色。让我们调用这个文件`edittext_error.xml`

然后，当您遇到错误时，只需将 EditText 的背景更改为指向新文件：

```
setBackgroundResource(R.drawable.edittext_error); 
```

# java - Web 服务或 HTTP 数据传输

> ID：11859240
> 
> 赞同：0
> 
> 时间：2012-08-08T06:59:01.200
> 
> 标签：java, web-services, ftp, webserver, webservice-client

我将编写一个对用户输入做出反应并将用户输入数据发送到服务器的应用程序。如果没有互联网连接，该应用程序将批量处理数据并尽快发送。加密无关紧要，因为只是发送了一堆关键信息，如果没有相应的真实数据，这是没有意义的。

我的第一个想法是使用 FTP，因为我必须开发自己的服务器部分，但是在 java 中使用 FTP 客户端似乎有点难看。此外，一些防火墙会阻止传出的 FTP。

80 端口大部分是开放的，因此我想使用一些网络服务的东西。然后，该应用程序将以其本机数据格式执行 HTTP POST。现在我真的不想开发额外的服务器应用程序。是否已经有一些服务器应用程序只是将 POST 请求写入某个文件以进行进一步处理？否则，编写一个捕获数据并将其写入文件的小东西也可能不是太多工作。

关于如何以最快和最简单的方式实现这个项目的任何想法？我担心 FTP 可能会增加一些不必要的复杂性。第二个想法有缺陷吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:27:44.283

您可能想 google WebDAV，它可以让您通过 HTTP 存储文件，并且您应该能够找到 Java 客户端 impl。

这是一个给你介绍的链接：[http ://en.wikipedia.org/wiki/WebDAV](http://en.wikipedia.org/wiki/WebDAV)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:59:22.210

一路HTTP POST。FTP 既旧又笨重，正如您所说，防火墙存在问题。如果您不介意 PHP 或Java 中的[https://stackoverflow.com/a/7940622/116509](https://stackoverflow.com/a/7940622/116509) ，服务器端可以很简单，例如[https://stackoverflow.com/a/3718333/116509](https://stackoverflow.com/a/3718333/116509)

# iphone - 在 Plist 中读取和写入详细信息

> ID：11859242
> 
> 赞同：0
> 
> 时间：2012-08-08T06:59:10.570
> 
> 标签：iphone, ios, plist

我在xcode的documnet目录中创建了一个plist名称infoD.plist，就像他的![在此处输入图像描述](../Images/ff20bce63968dd601f47bb9dee61289f.png)形象

在某些情况下，我只想在我的代码中将 NO 更改为 YES。我需要这样

```
infoD plist objectAtIndex:10 to YES if purchased.if the user purchased something ,i need to chnage the iteam10 value to YES. how to do this. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:05:43.017

使用 NSMutableDictionary 抓取你的 plist 的 plist 内容

```
NSMutableDictionary *dict = [NSMutableDictionary dictionaryWithContentsOfFile:<filepath>];

[dict setValue:[NSNumber numberWithBool:YES] forKey:@"item 10"];
[dict writeToFile:<filepath> atomically:YES]; 
```

# .htaccess - 无法使用自定义维护页面

> ID：11859243
> 
> 赞同：0
> 
> 时间：2012-08-08T06:59:16.013
> 
> 标签：.htaccess

因为我有一个动态 IP 地址，所以当我需要维护站点时，我在 htaccess 文件中使用了以下几行来显示自定义维护页面。不需要时，我注释掉这些行。

```
RewriteCond %{HTTP_COOKIE} !^.*secret-cookie.*$ [NC]
RewriteRule .* maintenance-page.html [NC,L,R=503] 
```

使用 Firecookie 在 Firefox 上安装 secret-cookie 后，我可以在 Firefox 上看到网站，而我正在处理它，如果我在 IE 上查看该网站，我会看到维护页面，因为 IE 没有 cookie。系统的 cookie 部分工作正常。问题是我的自定义维护页面没有显示。而是显示标准的“ `Service Temporarily Unavailable`”页面。我已经尝试了 RewriteRule 行的一些排列，但总是显示标准页面而不是我的自定义页面。

# mysql - MySQL 多次计数未正确计数

> ID：11859250
> 
> 赞同：0
> 
> 时间：2012-08-08T06:59:36.520
> 
> 标签：mysql, count, subquery

我遇到了一个查询问题，我想从子查询中的同一个表中检索多个列的计数作为主查询。

这是我的查询：

```
SELECT 
    CM.entityId,
    (SELECT COUNT(*) 
     FROM _credit_control_main 
     WHERE invoiceAge < 14 AND entityId = CM.entityId) AS under14,
    (SELECT COUNT(*) 
     FROM _credit_control_main 
     WHERE invoiceAge >= 14 AND invoiceAge < 30 AND entityId = CM.entityId) AS under14to30,
    (SELECT COUNT(*) 
     FROM _credit_control_main 
     WHERE invoiceAge >= 30 AND invoiceAge < 60 AND entityId = CM.entityId) AS under30to60,
    (SELECT COUNT(*) 
     FROM _credit_control_main 
     WHERE invoiceAge >= 60 AND invoiceAge < 90 AND entityId = CM.entityId) AS under60to90,
    (SELECT COUNT(*) 
     FROM _credit_control_main 
     WHERE invoiceAge > 90 AND entityId = CM.entityId) AS over90,
    COUNT(*) AS iCount
FROM
    _credit_control_main AS CM
WHERE 
    ((CM.invoiceNet + CM.invoiceVat) - (creditNet+creditVat)) - (CM.paymentTotal - (CM.creditNet + CM.creditVat)) > 0.00
GROUP BY 
    entityId 
ORDER BY 
    `CM`.`entityId` ASC 
```

如果我基于其中一个子查询创建一个基本查询，我会得到正确的计数，但实际上我会得到大量夸大的计数。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:10:51.053

我不知道为什么您的查询是错误的，但我知道您应该如何编写它。所有这些子计数都是杀手，尝试理解这个技巧，你会在可读性和性能方面获得很多：

```
SELECT
    CM.entityId,
    SUM(invoiceAge < 14) as under14,
    SUM(invoiceAge >= 14 AND invoiceAge < 30) as under14to30,
    SUM(invoiceAge >= 30 AND invoiceAge < 60) as under30to60,
    SUM(invoiceAge >= 60 AND invoiceAge < 90) as under60to90,
    SUM(invoiceAge > 90) as over90,
    COUNT(*) AS iCount
FROM _credit_control_main AS CM
WHERE ((CM.invoiceNet+CM.invoiceVat)-(creditNet+creditVat))-(CM.paymentTotal-(CM.creditNet+CM.creditVat)) > 0.00
GROUP BY entityId
ORDER BY `CM`.`entityId` ASC; 
```

顺便说一句，`invoiceAge = 90`这里不适合任何类别。

# jquery - 如何控制jquery ui滑块手柄拖动时刻的速度？

> ID：11859251
> 
> 赞同：1
> 
> 时间：2012-08-08T06:59:38.853
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-selectors

我的 jquery ui 滑块有问题，我使用以下代码创建了多个滑块句柄： [单击此处检查 JS Bin 代码](http://jsbin.com/olehir/18/edit)

现在的问题是，当我慢慢拖动滑块手柄时，该功能可以正常工作。当滑块快速拖动时，所有功能都崩溃了，有时动画功能将无法正常工作。

任何有解决方案的人请告诉我。 [点击查看js小提琴代码](http://jsfiddle.net/satishchandra/jGKG7/1/)

# directx - 在 SharpDx 中保存为 png

> ID：11859252
> 
> 赞同：4
> 
> 时间：2012-08-08T06:59:40.193
> 
> 标签：directx, png, image, direct2d, sharpdx

我在 Direct2D 下使用 SharpDx 开发 Metro-application。我用`deviceContext`. 如何将我的图片保存为 png 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-09T03:57:48.077

解决方案：

```
 public class Direct2DImageEncoder
  {
    private readonly Direct2DFactoryManager factoryManager;
    private readonly Bitmap wicBitmap;
    private readonly WicRenderTarget renderTarget;

    private readonly int imageWidth, imageHeight;

    public Direct2DImageEncoder(int imageWidth, int imageHeight, int imageDpi)
    {
      this.imageWidth = imageWidth;
      this.imageHeight = imageHeight;      

      factoryManager = new Direct2DFactoryManager();

      wicBitmap = new Bitmap(factoryManager.WicFactory, imageWidth, imageHeight, SharpDX.WIC.PixelFormat.Format32bppBGR, BitmapCreateCacheOption.CacheOnLoad);
      var renderTargetProperties = new RenderTargetProperties(RenderTargetType.Default, new PixelFormat(Format.Unknown, AlphaMode.Unknown), imageDpi, imageDpi, RenderTargetUsage.None, FeatureLevel.Level_DEFAULT);
      renderTarget = new WicRenderTarget(factoryManager.D2DFactory, wicBitmap, renderTargetProperties);
      renderTarget.BeginDraw();
      renderTarget.Clear(Colors.White);
    }

    public void Save(Stream systemStream, Direct2DImageFormat format)
    {
      renderTarget.EndDraw();

      var stream = new WICStream(factoryManager.WicFactory, systemStream);
      var encoder = new BitmapEncoder(factoryManager.WicFactory, Direct2DConverter.ConvertImageFormat(format));
      encoder.Initialize(stream);

      var bitmapFrameEncode = new BitmapFrameEncode(encoder);
      bitmapFrameEncode.Initialize();
      bitmapFrameEncode.SetSize(imageWidth, imageHeight);
      bitmapFrameEncode.PixelFormat = SharpDX.WIC.PixelFormat.FormatDontCare;
      bitmapFrameEncode.WriteSource(wicBitmap);

      bitmapFrameEncode.Commit();
      encoder.Commit();

      bitmapFrameEncode.Dispose();
      encoder.Dispose();
      stream.Dispose();      
    }   
  }

  public class Direct2DFactoryManager
  {
    private readonly SharpDX.WIC.ImagingFactory wicFactory;
    private readonly SharpDX.Direct2D1.Factory d2DFactory;
    private readonly SharpDX.DirectWrite.Factory dwFactory;

    public Direct2DFactoryManager()
    {
      wicFactory = new SharpDX.WIC.ImagingFactory();
      d2DFactory = new SharpDX.Direct2D1.Factory();
      dwFactory = new SharpDX.DirectWrite.Factory();
    }

    public SharpDX.WIC.ImagingFactory WicFactory
    {
      get
      {
        return wicFactory;
      }
    }

    public SharpDX.Direct2D1.Factory D2DFactory
    {
      get
      {
        return d2DFactory;
      }
    }

    public SharpDX.DirectWrite.Factory DwFactory
    {
      get
      {
        return dwFactory;
      }
    }
  }

  public enum Direct2DImageFormat
  {
    Png, Gif, Ico, Jpeg, Wmp, Tiff, Bmp
  }

  public class Direct2DConverter
  {
    public static Guid ConvertImageFormat(Direct2DImageFormat format)
    {
      switch (format)
      {
        case Direct2DImageFormat.Bmp:
          return ContainerFormatGuids.Bmp;
        case Direct2DImageFormat.Ico:
          return ContainerFormatGuids.Ico;
        case Direct2DImageFormat.Gif:
          return ContainerFormatGuids.Gif;
        case Direct2DImageFormat.Jpeg:
          return ContainerFormatGuids.Jpeg;
        case Direct2DImageFormat.Png:
          return ContainerFormatGuids.Png;
        case Direct2DImageFormat.Tiff:
          return ContainerFormatGuids.Tiff;
        case Direct2DImageFormat.Wmp:
          return ContainerFormatGuids.Wmp;
      }
      throw new NotSupportedException();
    }

    #endregion
  } 
```

您应该使用`renderTarget`绘图方法

# iphone - 插入原始数据时，在下一个索引上插入 NULL 数据

> ID：11859253
> 
> 赞同：1
> 
> 时间：2012-08-08T06:59:40.380
> 
> 标签：iphone

```
-(IBAction)btnAddToFavorite:(id)sender
{
    [self insertDataToFavourites:[[tempDict objectForKey:@"pageid"]intValue]:[tempDict objectForKey:@"desc"]];
}

-(void)insertDataToFavourites:(int)pageid :(NSString *)description
{
    sqlite3_stmt *insertStatement = nil;
    NSString *sql;
    int returnvalue;
        sql = [NSString stringWithFormat:@"insert into AddFavorite (Id,Description) VALUES (?,?)"];

    returnvalue = sqlite3_prepare_v2(database, [sql UTF8String], -1, &insertStatement, NULL);

    NSLog(@"\nFavorite ID is:--> %d &\nDescription is:--> %@",[[tempDict valueForKey:@"pageid"] intValue] ,[tempDict valueForKey:@"desc"]);

    if (returnvalue == 1){
        NSAssert1 (0,@"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
    }
    sqlite3_bind_text(insertStatement, 1,[[tempDict objectForKey:@"pageid"] UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(insertStatement, 2,[[tempDict objectForKey:@"desc"] UTF8String], -1, SQLITE_TRANSIENT);

    if (SQLITE_DONE != sqlite3_step(insertStatement)){
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    }
    else{
        sqlite3_reset(insertStatement);
    }

    sqlite3_finalize(insertStatement);
} 
```

这是将数据插入数据库的代码。当我使用选择查询检查数据库时，它显示这样的数据。

![在此处输入图像描述](../Images/394ee83008a6a46e7301d1f239ed31de.png)

谁能告诉我错误在哪里？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:20:17.293

尝试使用 pageid 方法变量而不是您的 dict，也许 dict 是错误的。另一方面，您插入 id

```
sqlite3_bind_text(insertStatement, 1,[[tempDict objectForKey:@"pageid"] UTF8String], -1, SQLITE_TRANSIENT); 
```

我认为这可能不正确。

对于测试用例，您可以将 SQLiteManager 作为 sqlstatement 插入

插入 AddFavorite (Id,Description) VALUES (1,'TestDescription');

检查语句是否正确。

如果 id 是数据库中的 int，我将使用此代码插入您的值

```
-(void)insertDataToFavourites:(int)pageid :(NSString *)description
{
   sqlite3 *database;

   if(sqlite3_open([self.databasePath UTF8String], &database) == SQLITE_OK) {

      const char *sqlStatement = "INSERT INTO AddFavorite (Id,Description) VALUES (?,?);";

      sqlite3_stmt *compiled_statement;
      if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiled_statement, NULL) == SQLITE_OK)    {

        sqlite3_bind_int(compiled_statement, 1, pageid);
        sqlite3_bind_text(compiled_statement, 2, [description UTF8String] , -1, SQLITE_TRANSIENT);

      }

      if(sqlite3_step(compiled_statement) != SQLITE_DONE ) {
        NSLog( @"Error: %s", sqlite3_errmsg(database) );
      } else {
        NSLog( @"Insert into row id = %lld", sqlite3_last_insert_rowid(database));
      }

      sqlite3_finalize(compiled_statement);
  }

  sqlite3_close(database); 
} 
```

# python - PyQt：QTableWidget 到 .xls 文件

> ID：11859258
> 
> 赞同：10
> 
> 时间：2012-08-08T06:59:52.520
> 
> 标签：python, pyqt, xls, qtablewidget

所以，我有一个 QTableWidget，我想使用 xlwt 模块将它保存到一个 .xls 文件中......

这是代码：

```
def savefile(self):
        filename = unicode(QtGui.QFileDialog.getSaveFileName(self, 'Save File', '', ".xls(*.xls)"))    
        wbk = xlwt.Workbook()
        self.sheet = wbk.add_sheet("sheet")
        self.row = 0
        self.col = 0
        self.add2(self.row, self.col)
        wbk.save(filename)    

def add2(self, row, col):
    for i in range(self.tableWidget.columnCount()):
        for x in range(self.tableWidget.rowCount()):
            try:
                teext = str(self.tableWidget.item(row, col).text())
                self.sheet.write(row, col, teext)
                row += 1
            except AttributeError:
                pass                   
        col += 1 
```

但这只写出单元格 0,0 中的文本，没有其他内容......

我想我犯了一个严重的错误......

**更新：**

```
def savefile(self):
        filename = unicode(QtGui.QFileDialog.getSaveFileName(self, 'Save File', '', ".xls(*.xls)"))    
        wbk = xlwt.Workbook()
        self.sheet = wbk.add_sheet("sheet", cell_overwrite_ok=True)
        self.add2()
        wbk.save(filename)    

def add2(self):
    row = 0
    col = 0         
    for i in range(self.tableWidget.columnCount()):
        for x in range(self.tableWidget.rowCount()):
            try:             
                teext = str(self.tableWidget.item(row, col).text())
                self.sheet.write(row, col, teext)
                row += 1
            except AttributeError:
                row += 1
        row = 0
        col += 1 
```

解决了问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:07:51.723

[您可能还会发现使用范围（或xrange](https://stackoverflow.com/questions/135041/should-you-always-favor-xrange-over-range) ）的输出作为 tableWidget.item 调用的索引更简洁和更容易，而不是担心增加自己的计数器。您可能会在代码中的其他位置使用工作表本身，但如果不是，它会为您节省一些内存以不将工作表分配为您的类的属性变量：

```
def savefile(self):
    filename = unicode(QtGui.QFileDialog.getSaveFileName(self, 'Save File', '', ".xls(*.xls)"))    
    wbk = xlwt.Workbook()
    sheet = wbk.add_sheet("sheet", cell_overwrite_ok=True)
    self.add2(sheet)
    wbk.save(filename)

def add2(self, sheet):
    for currentColumn in range(self.tableWidget.columnCount()):
        for currentRow in range(self.tableWidget.rowCount()):
            try:
                teext = str(self.tableWidget.item(currentRow, currentColumn).text()
                sheet.write(currentRow, currentColumn, teext)
            except AttributeError:
                pass 
```

因为您使用的是 range 命令，所以 currentColumn 变量将从 0 递增到 columnCount() 并且 currentRow 将从 0 递增到 currentRow()

# iphone - iPhone 上的低功耗蓝牙连接间隔

> ID：11859259
> 
> 赞同：3
> 
> 时间：2012-08-08T06:59:54.470
> 
> 标签：iphone, ios, core-bluetooth, bluetooth-lowenergy

Apple 蓝牙设计指南说应该在外围设备上设置连接间隔

```
Interval Min ≥ 20 ms
Interval Min + 20 ms ≤ Interval Max 
```

当将最小值设置为 20 毫秒，最大值设置为 40 毫秒时，我希望得到 iPhone 的接受和最低的可用间隔，但 iPhone 总是设置 37.5 毫秒的连接间隔。尝试将最大值向下推会从 iPhone 发出拒绝状态，然后将连接间隔设置为 ~100 毫秒。

是否有可能以某种方式将其降低到 20 毫秒（因为这是 Apple 指南中的最小值）？实际最小值是多少？根据我的观察，`Interval min`可以设置为 30 毫秒，没有任何区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T19:51:45.787

我最近一直在尝试这个。这不符合他们的指导方针，所以我不确定它为什么起作用，但使用以下连接设置，我能够从 iPad 获得 18.75 毫秒的间隔：

*   最小间隔 = 10 毫秒
*   最大间隔 = 20 毫秒
*   延迟 = 0
*   超时 = 100 毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T11:12:18.963

蓝牙 SIG 定义连接间隔最小和最大范围值 = 7.25 毫秒到 4000 毫秒。实现可以选择此范围内的任何值作为连接间隔最小值或最大值。但是，最小连接间隔不得大于最大连接间隔。最小值取决于外设的电池考虑，最大连接间隔取决于外设上可用的缓冲区。Iphone 将这些值设置为 37.5 毫秒给我们一个提示，即外围设备上可用的缓冲区是恒定的。您可以尝试更改此参数，看看现在您是否看到连接间隔有所不同。

# c++ - 为什么 unordered_set 操作（如 count 和 erase）会返回 size_type？

> ID：11859262
> 
> 赞同：5
> 
> 时间：2012-08-08T07:00:09.573
> 
> 标签：c++, hashset, c++-standard-library, unordered-set

显然，[`unordered_set::erase`](http://en.cppreference.com/w/cpp/container/unordered_set/erase)并[`unordered_set::count`](http://en.cppreference.com/w/cpp/container/unordered_set/count)返回一些不是严格布尔值的东西（从逻辑上讲，我不是在谈论实际类型）。

链接页面读取第三版擦除：

```
size_type erase( const key_type& key ); 
```

> 删除具有键值键的元素

这有一种语气，表明给定键的元素可能不止一个。它没有明确说明这一点，但听起来很像。
现在，集合的要点，即使是无序的集合，也是每个元素都有一次。

标准库承认该`bool`类型的存在并将其用于布尔值，如[`unordered_set::empty()`](http://en.cppreference.com/w/cpp/container/unordered_set/empty). **那么，`size_type`在上述情况下，返回有什么意义呢？即使存在哈希冲突，容器也应该区分具有不同键的元素，对吧？我还能依靠吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:08:38.480

> a.erase(k) size_type 擦除所有键等于 k ​​的元素。返回已擦除的元素数。
> 
> b.count(k) size_type 返回键等于 k ​​的元素的数量。

这是因为[无序的关联容器要求](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)[23.2.5]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:08:24.127

这可能只是为了让他们可以重新使用`unordered_multiset`. 除了性能方面，您不必担心哈希冲突，即使每个元素都发生冲突，容器仍然是正确的——即使这样的事情会非常慢。

# c++ - 更改标签的标题

> ID：11859263
> 
> 赞同：0
> 
> 时间：2012-08-08T07:00:15.033
> 
> 标签：c++, c, label, atl

我想根据用户输入在执行时间更改标签的标题（文本）。如果用户按下按钮，我的程序将执行一些东西并将输出写入标签。但我有一个问题。

首先，我的环境中没有标签。至少在工具箱中。我知道，从工具箱中添加并不是唯一的方法，但我有点害怕触摸旧的源代码并将事情搞砸。

我找到了一个静态文本元素，但我猜由于它是一个“静态”元素，我在 resource.h 中看不到它。所以，如果我使用类似的函数`GetDlgItem(IDC_STATIC);`，它就不起作用。因为`IDC_STATIC`我的resource.h中没有。

这是第二个。

而且，我也用过`SetDlgItemText(IDC_STATIC, "text");`。但是，由于我的 resource.h 不知道是什么`IDC_STATIC`，我得到了错误。

是否有不在工具箱中的标签类/元素？我猜 my`IDC_STATIC`不在我的 resource.h 中，因为它的静态行为。或者，有没有其他方法来更新标签/静态文本的文本？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:07:58.127

您想使用静态控件，但给它一些标识符而不是 IDC_STATIC。然后，您将能够使用该标识符使用`GetDlgItemText`,`SetDlgItemText`等。或者，您可以/可以使用设置为只读的 EDIT 控件，这几乎等同于静态控件¹。

* * *

¹甚至比许多人意识到的要多——例如，要更改普通编辑控件的背景颜色，您需要响应`WM_CTLCOLOREDIT`. 要更改静态控件*或*只读编辑控件的背景颜色，您可以响应`WM_CTLCOLORSTATIC`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:06:49.323

将静态文本的 ID 更改为 以外的内容`IDC_STATIC`，然后更改这些代码以更新它。我希望我在 5 分钟前尝试过。

更改它的 ID 会更新您的 resource.h 并在其中添加您的静态文本。

我猜这可能会帮助我之后的人进行调试：

```
TCHAR   *pszBuffer = new TCHAR[255];
pszBuffer = TEXT("dkjhasja");
CWindow wndSys;
wndSys.Attach(GetDlgItem(IDC_BLABLABLA));
wndSys.SetWindowText(pszBuffer);
wndSys.Detach(); 
```

# css - 根据出现的次数更改 css

> ID：11859267
> 
> 赞同：0
> 
> 时间：2012-08-08T07:00:30.883
> 
> 标签：css

我想根据用户类出现在父类中的次数来设置用户 div 的样式。我知道如何使用 jquery 来做到这一点，但这是否仅适用于 css3？我只针对 Chrome 浏览器。

```
<div class="parent">
 <div class="user"></div>
</div>

<div class="parent">
 <div class="user"></div>
 <div class="user"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:06:45.230

有一个名为 :nth-child(integer) 的选择器。你可以这样做

```
.parent .user:nth-child(1) 
```

只会影响该 .parent 中的第一个 .user。我不知道为什么它不是基于 0 的，但无论如何。此外，您可以使用方程式，例如

```
.parent .user:nth-child(2n+2) 
```

只会选择每秒 .parent .user

这里还有一些阅读

[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

或者根据 .user 出现的次数来显示样式，解决方案是设置第一个孩子的样式，然后覆盖它，同时设置第二个孩子的样式，然后在设置第三个孩子的样式时覆盖它，依此类推。这是一个例子

[http://lea.verou.me/2011/01/styling-children-based-on-their-number-with-css3/](http://lea.verou.me/2011/01/styling-children-based-on-their-number-with-css3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:21:07.017

没有办法做你所要求的，我知道。Gareth Parker 链接到的方法要求您要么知道将有多少子元素，要么知道它们的最大数量。

我得到的最接近的是样式化任何`.user`一个元素之后的`.user`元素：

```
​.parent .user { background:red; }
.parent .user ~ .user { background:blue; } 
```

​ 这使用了`~`组合器，即 General Sibling 组合器。

[这](http://jsfiddle.net/purmou/bBcMm/)是在行动。

当然，您也可以将一个类应用于`.parent`您知道其中包含多个`.user`元素的任何元素，然后只针对`.user`该给定类中的任何元素。

# r - 将来自多个数据帧的内容绘制到单个 ggplot2 表面

> ID：11859269
> 
> 赞同：5
> 
> 时间：2012-08-08T07:00:33.737
> 
> 标签：r, ggplot2

我在这里是一个完全的 R 初学者，对这个问题有相应的复杂程度。

我正在使用 R 中的 ROCR 包来生成 ROC 曲线的绘图数据。然后我使用 ggplot2 绘制情节。像这样的东西：

```
library(ggplot2)
library(ROCR)

inputFile <- read.csv("path/to/file", header=FALSE, sep=" ", colClasses=c('numeric','numeric'), col.names=c('score','label'))

predictions <- prediction(inputFile$score, inputFile$label)
auc <- performance(predictions, measure="auc")@y.values[[1]]

rocData <- performance(predictions, "tpr","fpr")
rocDataFrame <- data.frame(x=rocData@x.values[[1]],y=rocData@y.values[[1]])

rocr.plot <- ggplot(data=rd, aes(x=x, y=y)) + geom_path(size=1)
rocr.plot <- rocr.plot + geom_text(aes(x=1, y= 0, hjust=1, vjust=0, label=paste(sep = "", "AUC = ",round(auc,4))),colour="black",size=4) 
```

这适用于绘制单个 ROC 曲线。但是，我想做的是在整个目录中读取输入文件的价值 - 每个分类器测试结果一个文件 - 并制作所有 ROC 曲线的 ggplot2 多面图，同时仍将 AUC 分数打印到每个图中。

我想了解实现此目的的“正确” R 风格方法是什么。我确信我可以通过让一个循环遍历目录中的所有文件并为每个文件创建一个单独的数据框，然后让另一个循环创建多个图，并以某种方式让 ggplo2 将所有这些图输出到同一表面。但是，这不允许我使用 ggplot2 的内置分面，我认为这是正确的方法。不过，我不确定如何将我的数据转换为适合刻面使用的形状。我是否应该将所有数据框合并为一个，并为每个合并的块命名（例如文件名）并对其进行分面？如果是这样，是否有图书馆或推荐的做法来实现这一点？

感谢您的建议。我仍在研究 R 中的最佳实践，因此我宁愿获得专家的建议，而不是仅仅修改代码以使代码看起来更像我习惯的普通声明性编程语言。

编辑：我最不清楚的是，当使用 ggplot2 的内置分面功能时，我是否仍然能够将自定义字符串（AUC 分数）输出到它将生成的每个图中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-08T07:46:05.013

这是一个如何生成您所描述的绘图的示例。我使用内置数据集`quakes`：

该代码执行以下操作：

*   加载`ggplot2`和`plyr`包
*   添加一个方面变量`quakes`- 在这种情况下，我按地震深度进行总结
*   用于`ddply`总结每个深度的平均幅度
*   Use `ggplot` with `geom_text` to label the mean magnitude

The code:

```
library(plyr)
library(ggplot2)

quakes$level <- cut(quakes$depth, 5, 
  labels=c("Very Shallow", "Shallow", "Medium", "Deep", "Very Deep"))

quakes.summary <- ddply(quakes, .(level), summarise, mag=round(mean(mag), 1))

ggplot(quakes, aes(x=long, y=lat)) + 
  geom_point(aes(colour=mag)) + 
  geom_text(aes(label=mag), data=quakes.summary, x=185, y=-35) +
  facet_grid(~level) + 
  coord_map() 
```

![enter image description here](../Images/6b7c3efbd2a37baf99e75cfe6d605f39.png)

# awk - awk 打印长十六进制溢出？

> ID：11859274
> 
> 赞同：1
> 
> 时间：2012-08-08T07:00:40.757
> 
> 标签：awk, hex

最近，我读了一些长度为 16 的十六进制数据，比如`0x1000 0000 0000 0000`，但是当 print 0xffff ffff ffff ffff 时打印出一些奇怪的东西

```
awk '{printf("0x\n", 0x1000000000000000)}'  output `0x1000000000000000`  ok. 
```

但是，取而代之的是

16 f `awk '{printf("0x\n", 0xffffffffffffffff)}'`, 输出`0`

15 f `awk '{printf("0x\n", 0xfffffffffffffff)}'`, 输出`1000000000000000`（14 0)

15 f `awk '{printf("0x\n", 0xfffffffffffffff0)}'`, 输出`0`

14 f `awk '{printf("0x\n", 0xffffffffffffff)}'`, 输出 `100000000000000` (13 0)

14 f `awk '{printf("0x\n", 0xffffffffffffff0)}'`, 输出 `100000000000000` (14 0)

14 f `awk '{printf("0x\n", 0xffffffffffffff00)}'`, 输出 `0`

13f `awk '{printf("0x\n", 0xfffffffffffff)}'`，输出 `fffffffffffff`（13f）</p>

13f `awk '{printf("0x\n", 0xfffffffffffff0)}'`，输出 `fffffffffffff0`（13f）</p>

13f `awk '{printf("0x\n", 0xfffffffffffff00)}'`，输出 `fffffffffffff00`（13f）</p>

13f `awk '{printf("0x\n", 0xfffffffffffff000)}'`，输出 `fffffffffffff000`（13f）</p>

所以 13f 没问题，如何打印 16f？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T21:58:03.727

您在`printf()`调用中缺少格式字符串。请注意，它的`printf`工作方式与`print`. 我假设您看到 awk 解释器的一些随机不稳定行为。

另一个典型的 awk 问题是它通常使用双精度浮点数来表示所有数值（也包括整数），因此当您接近 64 位时，您会失去精度并得到奇怪的伪影。这取决于实际的 awk 实现。

您可能会看到这两个问题的混合。我承认四舍五入到 0 很奇怪。

# couchdb - 如何根据行数从列表中抛出（例如）404

> ID：11859281
> 
> 赞同：0
> 
> 时间：2012-08-08T07:01:25.343
> 
> 标签：couchdb

我正在尝试从列表中触发 404。像这样的东西：

```
function (head, req) {
    var row;
    var returnArr = [];
    while (row = getRow()) {
        returnArr.push(row.value);
    }
    if(returnArr.length === 0) {
        start({code:404});
        send(JSON.stringify({error:"not found"}));
    } else {
        send(JSON.stringify(returnArr));
    }
}; 
```

[我在这里](https://stackoverflow.com/questions/11846050/throw-404-from-shows-lists)找到了一些帮助。但是，我将`start()`函数调用为晚的接缝。当`start()`函数位于开头（在第一行）时，它可以工作。

当然我不能`start()`提前打电话，因为我首先必须确定视图是否有任何行。

如何实施？

**更新：**

在调用 getRow() 后 start() 确实不起作用。不确定这是否是预期的行为。这也不起作用：

```
function (head, req) {
    var row;
    var returnArr = [];
    while (row = getRow()) {
        returnArr.push(row.value);
    }
    if(returnArr.length === 0) {
        throw (['error', 'not_found', 'Some message like Page not found']);
    } else {
        send(JSON.stringify(returnArr));
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T23:12:26.320

是的，这是一个开放的错误。不幸的是，Jira 已关闭，因此我无法链接到该问题。但正如您所发现的，您目前不能在 start() 之前调用 getRow()。

# c# - 将分隔符转换为输入字符

> ID：11859282
> 
> 赞同：0
> 
> 时间：2012-08-08T07:01:26.857
> 
> 标签：c#, asp.net

我的 SQL 查询检索一行多列。我用'|'将它存储在字符串中 用于区分列的分隔符。

`<textarea>`然后在页面字段中打印该字符串`.aspx`。

我的问题是在那之后有什么办法吗？分隔符下一列出现在文本区域的下一行？就像`Enter`按键一样？

代码：

```
dtOutput = Generix.getData("dbo.EventMsg E Left Join dbo.ATMStatusHistory A On E.Code=A.Fault", "Distinct E.Fault_Short_Name", "A.Code In (" + sFaultNumber + ") And IsNull(Fault_Short_Name,'')<>''", "", "", 1);
sOtherFaults = "";
foreach (DataRow drOutput in dtOutput.Rows)
{
foreach (DataColumn dcOutput in dtOutput.Columns)
{
sOtherFaults += ((sOtherFaults == "") ? "" : ":") + Convert.ToString(drOutput[dcOutput]);
}
}

 sOutput += "|" + sOtherFaults + "|" + sClosedFault + "|" + sTemp + "|";
                            Response.Write(sOutput); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:07:41.730

尝试：

```
string.Join(@"|\r\n", sOutput, sOtherFaults, sClosedFault, sTemp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:03:53.190

我认为你最好在[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)这里使用 a ，像这样。

```
var responseString = new StringBuilder(sOutput);
resposeString.AppendLine("|");

foreach (DataRow drOutput in dtOutput.Rows)
{
    foreach (DataColumn dcOutput in dtOutput.Columns)
    {
        resposeString.AppendFormat("{0}:", Convert.ToString(drOutput[dcOutput]));
    }
}

// Remove last : delimiter
responseString.Remove(responseString.Length - 1, 1);

resposeString.AppendLine("|");
resposeString.Append(sClosedFault);
resposeString.AppendLine("|");
resposeString.Append(sTemp);

Response.Write(responseString.ToString()); 
```

像`String.Format`这样将节省大量中间字符串实例化，但也非常适合循环结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:03:15.857

我真的不明白你的意思，但试试这个

```
 sOutput += "|" + sOtherFaults + "|" + sClosedFault + "|" + sTemp + "|";

 Response.Write(sOutput.Replace("|", "\r\n")); 
```

或者

```
 sOutput += "|" + sOtherFaults + "|" + sClosedFault + "|" + sTemp + "\r\n";

 Response.Write(sOutput); 
```

# string - 我想在文件中的字母后插入空格

> ID：11859283
> 
> 赞同：0
> 
> 时间：2012-08-08T07:01:28.150
> 
> 标签：string, perl

**F1.txt**

```
tom1 a1 b1 c1
bob2 d2 e2 f2 
```

***结果***

**F2.txt**

```
a1 b1 c1 tom1
d2 e2 f2 bob2 
```

大家好，有谁能帮我解决这个问题。我的工作是将文件中每一行的第一个单词移到给定文件该行的最后一个位置。如F2.txt所示。这是我尝试过的代码，但没有得到所需的输出。

```
use strict;
use warnings;

open FILE1, "<final.l";
open FILE2, ">>finala11.l";

my($line, @line);
while (<FILE1>) {
  $line=$_;
  chomp($line);
  @line = split("\t"," ",$line);

  push(@line, shift(@line));
  print FILE2 @line,"\n";
}

close (FILE1);
close (FILE2); 
```

我在这个文件中得到的输出是：

**F3.txt**

```
a1b1c1tom1
d2e2f2bob2 
```

但预期的输出如 F2.txt 所示。您能帮我找出代码中的错误以获得所需的结果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:06:58.387

您可以使用加入：

```
print FILE2 join("\t", @line),"\n"; 
```

或者：

```
print FILE2 "@line\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:10:15.843

```
use strict;
use warnings;

open FILE1, "<final.l";
open FILE2, ">>finala11.l";

my ($line, @line);
while () {
  $line = $_;
  chomp($line);
  @line = split(" ", $line, 2);     # <<

  push(@line, "\t", shift(@line));  # <<
  print FILE2 @line, "\n";
}

close(FILE1);
close(FILE2); 
```

谢谢我刚刚更正了突出显示的行并获得了所需的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:02:03.127

将自动拆分与数组切片相结合：

```
$ perl -F/\t/ -lane 'print join "\t", @F[1..$#F,0]' f1.txt > f2.txt 
```

# image - 在时间间隔内用图像动画 div

> ID：11859286
> 
> 赞同：0
> 
> 时间：2012-08-08T07:01:31.633
> 
> 标签：image, html, jquery-animate

以下是我的 div 框。

```
<div id="one1" class="f"></div>
    <div id="one2" class="f"></div>

   <div id="two1" class="s"></div>
    <div id="two2" class="s"></div>

   <div id="three1" class="c"></div>
    <div id="three2" class="c"></div>

   <div id="four1" class="d"></div>
    <div id="four2" class="d"></div> 
```

以下是我对 div 框的风格。

```
#one1{width:114px; height:35px; background-image:url(about1.png); float:left; margin-left:10px;}
#one2{width:114px; height:35px; background-image:url(about-rollover.png); margin-left:10px; float:left}

#two1{width:114px; height:35px; background-image:url(about1.png); float:left; margin-left:10px;}
#two2{width:114px; height:35px; background-image:url(about-rollover.png); margin-left:10px; float:left}

#three1{width:114px; height:35px; background-image:url(about1.png); float:left; margin-left:10px;}
#three2{width:114px; height:35px; background-image:url(about-rollover.png); margin-left:10px; float:left}

#four1{width:114px; height:35px; background-image:url(about1.png); float:left; margin-left:10px;}
#four2{width:114px; height:35px; background-image:url(about-rollover.png); margin-left:10px; float:left} 
```

我需要这个框在特定时间级别更改图像。第一个图像在特定时间间隔内更改图像。完成后，下一步更改图像。在第四个图像更改后，我需要启动第一个图像。如果鼠标悬停在图像上意味着必须清除所有时间间隔。请建议我任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:07:19.150

您可以尝试使用 jquery 插件，例如[Nivo Slider](http://nivo.dev7studios.com/demos/)。他们有很好的过渡效果和

# asp.net - 替换 web.config 转换中的 IIS 重写规则

> ID：11859290
> 
> 赞同：51
> 
> 时间：2012-08-08T07:01:45.543
> 
> 标签：asp.net, iis, url-rewriting, web-config, transform

我有一些 IIS 重写规则，我想因环境而异。开发重写规则在 web.config 文件中，然后在 web.test.config 文件的末尾我有：

```
 <appSettings>
         ...Some app settings tranforms here
    </appSettings>
    <system.webserver>
            <rewrite xdt:Transform="Replace">
              <rules>
                ... rules here
              </rules>
            </rewrite>
          </system.webserver>
        </configuration> 
```

当我部署到测试时，我的应用程序设置会发生变化，但 IIS 重写规则不会。我希望整个`<rewrite>`部分都可以简单地替换为转换文件中的部分（根据[http://msdn.microsoft.com/en-us/library/dd465326.aspx](http://msdn.microsoft.com/en-us/library/dd465326.aspx)），但没有任何改变。

我也尝试过`xdt:Transform="Replace" xdt:Locator="Match(name)">`制定个人规则：

```
<rule name="Test rule" stopProcessing="true" xdt:Transform="Replace" xdt:Locator="Match(name)"> 
```

但这又没有什么区别。

是否甚至可以替换 web.config 中的重写规则，如果可以，我错过了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-11-27T18:05:52.283

由于我的主 web.config 中没有任何重写规则，因此 Replace 转换不起作用。我成功使用了插入变换，如下：

```
 <system.webServer>
<rewrite xdt:Transform="Insert">
  <rules>
    <rule name="CanonicalHostNameRule1">
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" pattern="^www\.mysite\.com$" negate="true" />
      </conditions>
      <action type="Redirect" url="http://www.mysite.com/{R:1}" />
    </rule>
  </rules>
</rewrite>
</system.webServer> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-05T14:07:07.833

在创建发布配置时，重写部分对我来说很奇怪，错误和部分根本没有显示。这就是我解决它的方法。

> Microsoft (R) Build Engine 版本 12.0.31101.0

> Microsoft .NET 框架，版本 4.0.30319.0

**编辑**在搞砸了这个之后，我意识到在没有重写插件的服务器上拥有重写标签会使网络服务器返回错误。我想要服务器和本地开发机器上的不同配置，所以修复是：

未转换的 web.config 只需要一个 <system.webServer> 标记和 web.config.release 中的基本规范主机名规则

```
<configuration>
<system.webServer>
        <rewrite xdt:Transform="Insert">
            <rules>
                <rule name="CanonicalHostNameRule" xdt:Transform="Insert">
                    <match url="(.*)" />
                    <conditions>
                        <add input="{HTTP_HOST}" pattern="^www\.host\.com$" negate="true" />
                    </conditions>
                    <action type="Redirect" url="http://www.host.com/{R:1}" />
                </rule>
            </rules>
        </rewrite>
</system.webServer>
</configuration> 
```

该操作根本不需要名称，但重写标签需要 xdt:Transform="Insert"

显然，如果您也希望在本地计算机上使用它，则需要进行更新。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-03-24T16:22:41.743

这里有很多带有示例的答案，这是一件好事，但我认为缺少一些细节。[我已经在我的网站上](https://itbackyard.com/how-to-add-extra-configuration-to-web-config-for-release-environment/)写过这个，这里的关键点是添加`xdt:Transform="Insert"`你想要为相应环境添加的根标签层次结构。

默认情况下，您有 Web.config 文件，但也有 Web.Debug.config 和 Web.Release.config，如下图所示：

[![在此处输入图像描述](../Images/f2791de3fb4d72e9ca57fd3754006e58.png)](https://i.stack.imgur.com/jn0H2.png)

假设您想在您的应用程序版本中添加从 http 到 https 的重定向。然后编辑 Web.Release.config 并添加以下行：

```
<?xml version="1.0"?>

.....
  <system.webServer>
    <rewrite xdt:Transform="Insert">
      <rules>
        ......
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

因此，下次您发布项目时，带有 rewrite 的标签及其子内容将被添加到 web.config 文件中。

要在发布之前查看它，请右键单击 Web.Release.config 并单击 Preview Transform。

[![在此处输入图像描述](../Images/5f20c530abe19b7562869f1ceec183e4.png)](https://i.stack.imgur.com/ONMEq.png)

您将看到初始版本和发布版本之间的差异。

[![在此处输入图像描述](../Images/80c90f9c0762a291239b9a2b31a37b43.png)](https://i.stack.imgur.com/aIgSH.png)

参考：

*   [HTTP 到 HTTPS 重定向 - IIS 8.5 无法正常工作](https://stackoverflow.com/questions/30533616/http-to-https-redirect-iis-8-5-not-working-properly)
*   [Microsoft Web.Config 文件转换](https://docs.microsoft.com/en-us/aspnet/web-forms/overview/deployment/visual-studio-web-deployment/web-config-transformations)

> 免责声明：本指南链接参考我的个人网站。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T13:42:08.013

可以转换 system.webServer 的重写部分。我最初遇到了同样的问题，并意识到我无意中将重写节点错误地放置在 system.web 下。尽管根据您提供的有限代码段，这看起来不像您的问题，但我仍然怀疑您的问题与转换文件中的节点位置有关。

这是我的 Web.Debug.config 的样子（这个版本在调试版本上编写了正确的 Web.config）：

```
<?xml version="1.0"?>

<!-- For more information on using web.config transformation visit http://go.microsoft.com/fwlink/?LinkId=125889 -->

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <!--
    In the example below, the "SetAttributes" transform will change the value of 
    "connectionString" to use "ReleaseSQLServer" only when the "Match" locator 
    finds an atrribute "name" that has a value of "MyDB".

    <connectionStrings>
      <add name="MyDB" 
        connectionString="Data Source=ReleaseSQLServer;Initial Catalog=MyReleaseDB;Integrated Security=True" 
        xdt:Transform="SetAttributes" xdt:Locator="Match(name)"/>
    </connectionStrings>
  -->
  <system.web>
    <!--
      In the example below, the "Replace" transform will replace the entire 
      <customErrors> section of your web.config file.
      Note that because there is only one customErrors section under the 
      <system.web> node, there is no need to use the "xdt:Locator" attribute.

      <customErrors defaultRedirect="GenericError.htm"
        mode="RemoteOnly" xdt:Transform="Replace">
        <error statusCode="500" redirect="InternalError.htm"/>
      </customErrors>
    -->
  </system.web>
  <system.webServer>
    <rewrite xdt:Transform="Replace">
      <rules>
        <clear/>
        <rule name="Canonical Hostname">
          <!-- Note that I have stripped out the actual content of my rules for the purposes of posting here... -->
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T22:52:57.833

我使用的一个技巧是给动作一个名称
，然后在我的转换中添加`xdt:Transform="SetAttributes" xdt:Locator="Match(name)"`如下

```
<system.webServer>
<rewrite>
  <rules>

    <rule name="RedirecttoWWW" enabled="true"  >
      <match url="(.*)" />
      <conditions>
        <add input="{HTTP_HOST}" negate="true" pattern="^www\.([.a-zA-Z0-9]+)$" />
      </conditions>
      <action name="AddWWW" type="Redirect" url="http://www.{HTTP_HOST}/{R:0}" appendQueryString="true" redirectType="Permanent" xdt:Transform="SetAttributes" xdt:Locator="Match(name)" />
    </rule>

  </rules>
</rewrite> 
```

上面的例子是给所有请求加上**www**

- - - -更新 - - -

只是将名称添加到操作的更新将无法正常工作，因此我将代码更新如下

```
 <system.webServer>

      <rule name="RedirecttoWWW" enabled="true"  xdt:Transform="RemoveAll" xdt:Locator="Match(name)" >
      </rule>
      <rule name="RedirecttoWWW" enabled="true"  xdt:Transform="InsertIfMissing" xdt:Locator="Match(name)" >
        <match url="(.*)" />
        <conditions>
          <add input="{HTTP_HOST}" negate="true" pattern="^www\.([.a-zA-Z0-9]+)$" />
        </conditions>
        <action  type="Redirect" url="http://{HTTP_HOST}/{R:0}" appendQueryString="true" redirectType="Permanent" />
      </rule>
    </rules>
  </rewrite>
  </system.webServer> 
```

# database - 中止和回滚的区别？

> ID：11859292
> 
> 赞同：5
> 
> 时间：2012-08-08T07:01:47.423
> 
> 标签：database, transactions, rollback, abort

事务管理中的中止和回滚有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:04:38.490

如果您指的是命令，通常没有。

来自——例如[——PostgreSQL 手册](http://www.postgresql.org/docs/8.2/static/sql-abort.html)；

> ABORT 回滚当前事务并导致该事务所做的所有更新被丢弃。此命令在行为上与标准 SQL 命令 ROLLBACK 相同，并且仅出于历史原因而存在。

如果您的意思是数据库自动中止事务，这通常是在出现不可恢复的错误（例如丢失的连接）时完成的，通常也通过回滚活动事务来完成。

# javascript - 客户端的 JavaScript 框架

> ID：11859296
> 
> 赞同：4
> 
> 时间：2012-08-08T07:02:07.437
> 
> 标签：javascript, gwt, dojo, vaadin, gxt

我的团队由更多的 Java 人员和有限的 JavaScript 经验组成。我知道这个问题已经被问过好几次了，但为了让我的事实正确，我需要澄清一些事情，因为我在客户端技术方面的经验非常有限。我们决定使用 GWT 而不是纯 JavaScript 框架来构建我们的解决方案（鉴于有更多的 Java 经验）。

这些都是支持我决定的事实。

*   100% 用 Ja​​va 编写
*   需要基本的 Java 技能（Java SE 而不是 Java EE）
*   OOPHM – 进程外托管模式 – 定义您的浏览器和版本。浏览器兼容性不再是我们的问题
*   调试 – 使用 IDE 的调试器调试您的 GWT 应用程序，就像任何其他 Java 应用程序一样
*   优化的 JavaScript - GWT 比您编写更快、更紧凑的 JavaScript

但是我的一些应用功能需要用到外部的js库。例如，假设我需要使用一些特定的 js 库在特定页面上绘制一些东西。（其实就是用dojos写的那个js文件）。

1.  GWT 可以满足上述要求吗？
2.  您认为选择 GWT 的决定是明智的还是有其他建议？
3.  我们发现 sencha gxt 拥有最好的小部件库（我知道它的商业性，至少我找到了我们需要的所有小部件）。你认为在核心 GWT 上使用包装库是一个明智的主意吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T09:21:05.427

> GWT 可以满足上述要求吗？

是的（见@Andrey Kapelchik 的回答）。

> 您认为选择 GWT 的决定是明智的还是有其他建议？

鉴于您的背景和您提到的几点，我认为这是一个非常好的决定。我已经使用 JavaScript、jQuery 等构建了应用程序，但是对于超过 1000 行代码的任何内容，我不想再次“手动”构建 JavaScript 应用程序。对我来说决定性的几点：

*   使用 GWT，我可以在服务器端和客户端重用部分代码。例如，我可以在客户端验证以提供即时反馈，然后使用相同的代码在服务器上再次验证以确保安全。
*   我发现在大型 GWT 项目中我的方式要容易得多。虽然以清晰的方式排列甚至大型 JavaScript 代码当然是可能的，但它总是*会*变得笨拙。
*   我一直在大量使用 IDE 功能（重构、查找对字段的写访问权限，...），而 IDE 对 JavaScript 的支持对我来说太有限了。

你仍然需要一点点 JavaScript 知识。您的团队绝对应该学习 CSS，我建议您彻底学习它——无论您选择哪种客户端框架。

> 我们发现 sencha gxt 拥有最好的小部件库（我知道它的商业性，至少我找到了我们需要的所有小部件）。你认为在核心 GWT 上使用包装库是一个明智的主意吗？

在我正在进行的几个项目中，我们使用 GXT，因为这个决定是几年前做出的。以下是我的看法：如果你需要构建一个看起来非常像桌面应用的东西，GXT 可能是完美的，否则我不建议将应用*基于*GXT。

使用纯 GWT 可以获得最佳性能，如果您了解 CSS，它会更加灵活。GXT 有一些不错的功能，但要解决它的局限性、重大的性能问题（有时还有它的错误）可能非常耗时。如果你真的需要一个特殊的 GXT 小部件，你仍然可以构建一个纯 GWT 应用程序，然后只添加一个 GXT/SmartGWT 小部件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:25:49.960

我认为 GWT 非常适合您所描述项目的要求和目标。GWT 有[JavaScript Native Interface](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)来使用原生 JavaScript。JSNI 允许将 GWT 与现有 JavaScript 或外部 JS 库集成。它通过允许您将 JavaScript 直接集成到应用程序的 Java 源代码中来解决这些问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:25:55.583

在许多错误的开始之后，我的团队真的在这个问题上苦苦挣扎，我们确定 JavaScript 无法真正避免，掌握它并没有我担心的那么糟糕。升级 GWT 所需的时间与升级客户端 JS MVC 框架所需的时间大致相同。

我们确实考虑过 GWT，但放弃了它，因为从长远来看，由于以下原因，它会更难维护。

*   如果 GWT 的开发人员对维护它失去兴趣，那么维护像 GWT 这样的东西需要非常复杂的技能。
*   我们可能想要的小部件可能可用于其他 GWT 并且移植到 GWT 可能比我们想要做的工作更多。
*   现代 JavaScript MVC 框架变得非常成熟，具有许多非常酷的功能，可以轻松开发复杂的单页应用程序。
*   浏览器会变得更好，JS 框架会变得更好，高级前端开发人员会更容易......等等。

我们还评估了 dojo 并放弃了它，因为我们觉得定制它对我们的团队来说太难了。这就是我们最终的结果。

1.  用于 CSS / 小部件框架的 Twitter Bootstarp
2.  一堆不同的 jquery 插件从网上的各个地方争吵起来
3.  用于客户端 MVC 框架的 JQuery、Backbone、Handlebars。

如果我今天再次开始这个项目，我会选择 Google 的 AngularJS，它确实是构建客户端 Web 应用程序的绝佳方法。尤其是因为在 JavaScript 中巧妙地使用了依赖注入以及双向绑定和一堆其他东西。我在 Throne of JS 会议上，谷歌 AngularJS 的人说他们将 17,000 行 GWT 应用程序移植到 2500 行 angularJS 应用程序。

# php - jquery post + serializeArray

> ID：11859299
> 
> 赞同：0
> 
> 时间：2012-08-08T07:02:12.943
> 
> 标签：php, jquery

我正在尝试使用 jquery post + serializeArray() 将包含照片字段的表单发布到另一个 php 页面进行这样的处理，但它不起作用：-

```
<script>
function photo_process(){
     $.post('album/photoprocess.php',$('#form2').serializeArray(),
          function (output){
              $('#result_message').html(output);           
          }
     );
}
</script>

<form id="form2" action="module/album/photoprocess.php" method="post" 
      enctype="multipart/form-data">
…
…
</form>
<input type="submit" value="Submit" onclick="photo_process()"/>

<div id="result_message"></div> 
```

其实，我可以这样做吗？还是我写错了什么？？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:04:08.633

使用`.serialize()`代替`.serializeArray()`

# jquery - jqGrid：如何更改 jqGrid 的宽度？

> ID：11859304
> 
> 赞同：6
> 
> 时间：2012-08-08T07:02:44.283
> 
> 标签：jquery, jqgrid

我想改变 jqGrid 的宽度。我试图在我的griddefinition中设置宽度：

```
 width: '800px' 
```

还有其他方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T07:10:29.447

您可以使用该`setGridWidth`物业

```
 $('#gridId').jqGrid('setGridWidth', '800'); 
```

如果您希望网格动态调整大小，请连接到窗口调整大小功能，但请记住设置初始宽度

```
 var DataGrid = $('#gridId');

 //sets the grid size initially
 DataGrid.jqGrid('setGridWidth', parseInt($(window).width()) - 20);    

 //handles the grid resize on window resize
 $(window).resize(function () { 
       DataGrid.jqGrid('setGridWidth', parseInt($(window).width()) - 20); 
 }); 
```

# c# - 获取移动用户asp.net的位置

> ID：11859311
> 
> 赞同：1
> 
> 时间：2012-08-08T07:03:14.970
> 
> 标签：c#, asp.net, html

我是asp.net 的新手。我正在开发一个专门针对移动用户的网站。我想通过客户端获取经度和纬度，如果手机支持 GPS，那么它可以通过网站上的 GPS 进行定位。我怎样才能做到这一点。这是在 HTML5 上工作的吗？

请帮助发送一些带有描述的代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:09:40.440

您可以为此使用 HTML5 Geolocation，但它不使用手机 GPS

[http://html5doctor.com/finding-your-position-with-geolocation/](http://html5doctor.com/finding-your-position-with-geolocation/)例如。

```
 navigator.geolocation.getCurrentPosition(foundLocation, noLocation);

  function foundLocation(position)
  {
    var lat = position.coords.latitude;
    var long = position.coords.longitude;
    alert('Found location: ' + lat + ', ' + long); //Do something
  }
  function noLocation()
 {
    alert('Could not find location');
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-10-23T06:10:07.280

使用 sim7100e 连接到 lattepanda 并内置 arduino sim71000e 将通过 sim7100e gps 向 arduino 发送位置数据，此位置数据将由 arduino 代码处理，然后 arduino 将数据发送到 lattepanda 上的 c# 并通过互联网将数据上传到您的网页

# windows - 为什么录音机代码可以工作 8 位，但不能工作 16 位？

> ID：11859318
> 
> 赞同：0
> 
> 时间：2012-08-08T07:03:33.140
> 
> 标签：windows, audio, record

我正在尝试在 Windows 上录制音频，这是我的代码。它适用于 8 位，但不适用于 16 位。谁能帮我？#include #include #include #pragma comment(lib,"winmm.lib") using namespace std;

```
int test(){

    HWAVEIN microHandle;
    WAVEHDR waveHeader;

    MMRESULT result = 0;

    WAVEFORMATEX waveformat;
    waveformat.wFormatTag = WAVE_FORMAT_PCM;

    waveformat.wBitsPerSample=8;
    waveformat.nSamplesPerSec=16000;//8000;
    waveformat.nAvgBytesPerSec=waveformat.nSamplesPerSec*waveformat.nSamplesPerSec/8;

    waveformat.nChannels=1;
    waveformat.nBlockAlign=waveformat.nChannels*waveformat.wBitsPerSample/8;

    waveformat.cbSize=0;

    result = waveInOpen(&microHandle, WAVE_MAPPER, &waveformat, 0L, 0L, CALLBACK_EVENT);

    if (result)
    {
        cout << "Fail step 1" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0; 
    }

    const int BUFSIZE = 16000*4;
    char *  buf = (char *)malloc(BUFSIZE);
    // Set up and prepare header for input
    waveHeader.lpData = (LPSTR)buf;
    waveHeader.dwBufferLength = BUFSIZE;
    waveHeader.dwBytesRecorded=0;
    waveHeader.dwUser = 0L;
    waveHeader.dwFlags = 0L;
    waveHeader.dwLoops = 0L;
    waveInPrepareHeader(microHandle, &waveHeader, sizeof(WAVEHDR));

    // Insert a wave input buffer
    result = waveInAddBuffer(microHandle, &waveHeader, sizeof(WAVEHDR));

    if (result)
    {
        cout << "Fail step 2" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0;
    }

    result = waveInStart(microHandle);

    if (result)
    {
        cout << "Fail step 3" << endl;
        cout << result << endl;
        Sleep(10000);
        return 0;
    }

    // Wait until finished recording
    do {} while (waveInUnprepareHeader(microHandle, &waveHeader, sizeof(WAVEHDR))==WAVERR_STILLPLAYING);

    FILE *fp = fopen("output.pcm","w");
    fwrite(buf,1,BUFSIZE,fp);
    fclose(fp);

    waveInClose(microHandle);

    return 0;
}
void main()
{
    test();
} 
```

如果我设置参数waveformat.wBitsPerSample = 8，它可以正确记录音频，但如果我设置它waveformat.wBitsPerSample = 16，它会记录噪音！谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:11:55.753

它应该是 FILE *fp = fopen("output.pcm","wb"); 非文件 *fp = fopen("output.pcm","w");

# php - PHP：会话变量被具有相同名称的声明变量覆盖

> ID：11859320
> 
> 赞同：0
> 
> 时间：2012-08-08T07:03:46.157
> 
> 标签：php

刚刚验证，PHP会话变量被同名声明的变量覆盖。即）我有会话变量`$_SESSION['lan'] = 'xyz'`（全局变量）和我的PHP页面x.php之一在循环中有变量`$lan`，`foreach`在这个循环结束时，我`$_SESSION['lan']`被foreach循环中使用的数组的最后一个值覆盖。

我的意思是`$_SESSION['lan']`具有值“abc”，此后该 lan`$_SESSION`全局变量变为“abc”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T12:01:06.703

确保[`register_globals`](http://php.net/manual/en/security.globals.php)是`off`.

# appharbor - AppHarbor：有条件的 web.config

> ID：11859323
> 
> 赞同：1
> 
> 时间：2012-08-08T07:04:00.603
> 
> 标签：appharbor

[当部署在AppHarbor](https://appharbor.com/)上与部署到本地网络机器时，我想要一个不同的 web.config 。

特别是，我想打开 Windows 身份验证，以便在 Windows 网络上获取当前 Windows 用户名，但在 AppHarbor 上仍允许匿名用户连接。

（我能想到的最佳解决方案是使用 AppHarbor 配置设置，将 AppHarbor 配置为允许写入文件，然后在 Application_Start 上重写 web.config。丑陋。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T13:45:31.423

无需重新发明轮子，AppHarbor 团队已经解决了这个问题。

我认为[自定义 web.config 转换和合并](http://blog.appharbor.com/2012/07/27/custom-web-config-transforms-and-merges)是您正在寻找的。

# javascript - 如何在javascript中设置日期格式？

> ID：11859326
> 
> 赞同：1
> 
> 时间：2012-08-08T07:04:08.090
> 
> 标签：javascript, asp.net, telerik, rad-controls

我想为我的 radtime 选择器转换日期时间格式。`2012-8-2-13-00-00` 当我从我的 radtime 选择器中选择日期时，我得到了输出。当我尝试转换为日期时，它说的日期无效。

JavaScript：

```
function SourqtyValidation()
{
var specifiedtime = document.getElementById('<%=txtSpecifiedArrvialTime.ClientID %>').value;
                alert(specifiedtime);
                var a = new Date(specifiedtime);
var actuvalarrivaltime = document.getElementById('<%=txtActualArrivalTime.ClientID %>').value;
alert(actuvalarrivaltime);
                var b = new Date(actuvalarrivaltime);
                b.format("dd/MM/yyyy hh:mm:ss");
                alert(b);
                var difference =Math.round((a - b) / 1000);
                alert(difference);
} 
```

aspx：

```
//txtSpecifiedArrvialTime = predifened as 2012/08/02 09:35:55;

  <telerik:RadTimePicker ID="txtActualArrivalTime" runat="server" EmptyMessage="Actual Arrival Time">                                                        </telerik:RadTimePicker> 
```

那么我怎样才能在几分钟内获得两次之间的差异呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:14:02.727

要获取时差，日期应采用相同格式，
“2012-8-2-13-00-00”格式不正确，将其转换为“2012/08/02 13:00:00”格式即可您可以通过将其除以 1000 来获得以秒为单位的差异。

您可以使用它来将您的字符串转换为日期时间

```
 var dt = '2012-8-2-13-00-00'.split(/\-|\s/);
    dat = new Date(dt.slice(0,3).reverse().join('/')+' '+dt[3]+':'+dt[4]+':'+dt[5]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:25:26.613

尝试使用**Datejs**它有非常方便的方法：

例如。：

```
Date.parse('Thu, 1 July 2004 22:30:00');

Date.parseExact("10/15/2004", "M/d/yyyy");  // The Date of 15-Oct-2004 
```

非常好的库，用于在 javascript 中处理数据时间。

**Datejs 是一个开源的 JavaScript 日期库。**

[日期](http://www.datejs.com/)

# google-maps - GWT地图错误显示灰色区域

> ID：11859328
> 
> 赞同：2
> 
> 时间：2012-08-08T07:04:14.127
> 
> 标签：google-maps, gwt

我创建了一个小部件来显示 google earth ，当我单击按钮时，**google earth 消失并被 google map 取代**。

我正在使用`gwt earth 3`and [gwt map v3](http://code.google.com/p/gwt-maps-api/)。当我第一次单击该按钮时，谷歌地图显示良好。

[但是当我再次单击该按钮时，谷歌地图在这样](https://stackoverflow.com/questions/5383044/error-in-gwt-mapwidget)的灰色区域内显示得非常小，它使用了 gwt-map v2。

在[gwt map v3](http://code.google.com/p/gwt-maps-api/)中，它没有 method `checkResizeAndCenter()`。所以我想知道是否有另一种方法来解决这个错误。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-21T07:56:09.603

我认为您遇到过这样的情况，地图小部件被添加到宽度和高度大于地图小部件的宽度和高度的面板中。

# java - Java JTable：如何为简单的行标题呈现左列单元格

> ID：11859329
> 
> 赞同：1
> 
> 时间：2012-08-08T07:04:16.823
> 
> 标签：java, swing, jtable, render, jtableheader

我的目标是创建一个 JTable，并仅呈现最左侧的列单元格，目的是为表创建行标题。

我在网上遇到的所有行表示例似乎都令人费解或不符合我的目的，所以我想知道是否有一种简单的方法可以通过仅渲染左列单元格来创建 JTable 行标题？

下面我有一个包含 2 列和 2 行的简单表的代码。是否有可能有人可以修改它，或者用简单的术语解释，我如何去渲染最左边的列以用于行标题。

谢谢你。

```
import javax.swing.*;
import java.awt.*;
import javax.imageio.*;
import java.io.*;
import java.awt.image.BufferedImage;
import java.util.*;
public class GUITable extends JFrame{public GUITable(){

init();
  }

  public final void init(){
    String[] columnNames = {"", "Gross Weight"};

  Object[][] data = {
  {"", new Integer(100)},};

  final JTable table = new JTable(data, columnNames);
  table.setPreferredScrollableViewportSize(new Dimension(500, 70));
  table.setFillsViewportHeight(true);

  JScrollPane scrollPane = new JScrollPane(table);
  add(scrollPane);
}

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

public void run() {
try {
  UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel");
} catch (Exception e) {
  e.printStackTrace();
}
  GUITable ex = new GUITable();
  ex.setVisible(true);
    }
    });
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:20:04.693

您的代码示例可能是

```
import javax.swing.*;
import java.awt.*;

public class GUITable extends JFrame {

    public GUITable() {
        init();
    }

    public final void init() {
        String[] columnNames = {"", "Gross Weight"};
        Object[][] data = {{"", new Integer(100)},};
        final JTable table = new JTable(data, columnNames);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        pack();
    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(
               "com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");//Java6
            //UIManager.setLookAndFeel(
               //"javax.swing.plaf.nimbus.NimbusLookAndFeel");//Java7
        } catch (Exception fail) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {

                GUITable ex = new GUITable();
                ex.setVisible(true);
            }
        });
    }
} 
```

从您的描述中不确定，您是指[@camickr 的行号表](http://tips4java.wordpress.com/2008/11/18/row-number-table/)，还是另一个[half_sized 尝试](https://stackoverflow.com/questions/8187639/jtable-with-titled-rows-and-columns/8187799#8187799)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T15:12:46.947

是的 - 通过使用自定义`TableCellRenderer`，您可以修改第一列（仅第一列）的显示方式。

本质上，您可以使用它`TableCellRenderer`仅在第一列上设置：

```
table.getColumnModel().getColumn(0).setCellRenderer(new CustomRenderer()); 
```

您可以扩展`DefaultTableCellRenderer`以处理您想要执行的任何特殊渲染：

```
//Custom Renderer - does the default rendering except if told the row should be a different color
public static class CustomRenderer extends DefaultTableCellRenderer{

    public CustomRenderer(){
        super();
        //Customize the rendering however you want
        setBackground(UIManager.getColor("TableHeader.background"));
    }
} 
```

在您的示例中将它们放在一起：

```
import javax.swing.*; 
import javax.swing.table.DefaultTableCellRenderer;

import java.awt.*; 
public class TestTable extends JFrame{

    public TestTable(){ 
        init(); 
    } 

    public final void init(){ 
        String[] columnNames = {"", "Gross Weight"}; 

        Object[][] data = {{"", new Integer(100)},}; 

        final JTable table = new JTable(data, columnNames); 
        // Add Renderer to first column only
        table.getColumnModel().getColumn(0).setCellRenderer(new CustomRenderer());
        table.setPreferredScrollableViewportSize(new Dimension(500, 70)); 
        table.setFillsViewportHeight(true); 

        JScrollPane scrollPane = new JScrollPane(table); 
        scrollPane.setPreferredSize(new Dimension(300, 200));
        add(scrollPane); 
    } 

    public static void main(String[] args) { 
        SwingUtilities.invokeLater(new Runnable() { 

            public void run() { 
                try { 
                    UIManager.setLookAndFeel("javax.swing.plaf.nimbus.NimbusLookAndFeel"); 
                } catch (Exception e) { 
                    e.printStackTrace(); 
                } 
                TestTable ex = new TestTable();
                ex.pack();
                ex.setVisible(true); 

            } 
        }); 
    } 

    //Custom Renderer - does the default rendering except if told the row should be a different color
    public static class CustomRenderer extends DefaultTableCellRenderer{

        public CustomRenderer(){
            super();
            //Customize the rendering however you want
            setBackground(UIManager.getColor("TableHeader.background"));
        }
    }

} 
```

# java - 反应器与前导器

> ID：11859332
> 
> 赞同：18
> 
> 时间：2012-08-08T07:04:26.653
> 
> 标签：java, design-patterns

谁能解释反应器模式和前摄器模式之间的区别？我知道在反应器模式中，操作是同步的，而在前摄器中它们是异步的，而且在反应器中，操作是由反应器交给客户端的处理程序完成的。（如果我错了请纠正我）

此外，哪些模式用于故障安全，哪些用于快速故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-05-25T14:02:18.917

在**反应器**模式中，您将轮询设备是否准备好做某事，而**在前摄**器模式中，您将做某事并轮询它的完成情况。

反应器模式的好例子是：epoll（Linux）、kqueue（MacOS、FreeBSD）、select（Linux、MacOS、Windows）方法。前摄器模式的一个很好的例子是 Windows IOCP 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T18:57:16.587

参考[快速失败还是安全失败？](https://stackoverflow.com/questions/3413986/fail-fast-or-fail-safe)以及 wiki 文章，我会说 proactor 是故障安全的，reactor 是快速故障的。具有完成处理程序的 Proactor 为其提供了一种更“安全”的方法。如果一个任务失败同时阻塞了大量资源，那么像reactor这样的同步环境将有很大的失败。希望这可以帮助。

# android - 如何编译 Android 许可示例。没有库，只有源

> ID：11859341
> 
> 赞同：0
> 
> 时间：2012-08-08T07:04:52.040
> 
> 标签：android, android-lvl

我已经在 SDK 中下载了许可包。没有库（LVL ？），只有 play_licensing/library 中的源代码。我不知道如何编译他们的示例和我的应用程序。与他们的库源代码。
那里没有规则。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:44:11.360

只需将源代码复制到 Android 项目的源文件夹中，然后以这种方式编译即可。

# android - OnResume 相机重新初始化黑屏

> ID：11859342
> 
> 赞同：7
> 
> 时间：2012-08-08T07:04:55.203
> 
> 标签：android, xamarin.android, onresume, onpause, xamarin

我有个问题。在初始化相机以进行预览并将另一个应用程序聚焦后，然后回到我的应用程序：预览显示为黑色。如果我继续拍照，它会拍下我通常将相机指向的位置。

我在 OnResume() 覆盖上做错了吗？相关代码如下：

```
public void ReleaseCamera()
    {
        if (myCamera != null)
        {
            myCamera.Release();
            myCamera = null;
        }
    }

protected override void OnPause()
    {
        base.OnPause();

        if (myButtonState == ButtonState.CameraActive)
            ReleaseCamera();
    }

protected override void OnResume()
    {
        base.OnResume();

        if (myButtonState == ButtonState.CameraActive)
            InitializeCamera();
    }

private void InitializeCamera()
    {
        SurfaceView mySurfaceView = FindViewById<SurfaceView>(Resource.Id.surfaceView1);

        myCamera = Android.Hardware.Camera.Open(cameraNumber);
        Android.Hardware.Camera.Parameters p = myCamera.GetParameters();

        myCamera.SetDisplayOrientation(90); // Portrait
        myCamera.SetPreviewDisplay(mySurfaceView.Holder);
        myCamera.StartPreview();
    } 
```

谢谢您的帮助。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T07:19:51.740

[`onResume()`](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)太早被调用。在这个阶段你没有准备好表面支架。您可以尝试[`onPostResume()`](http://developer.android.com/reference/android/app/Activity.html#onPostResume%28%29)在 Activity 中引入处理程序，和/或处理[`SurfaceHolder.Callback.surfaceChanged()`](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html#surfaceChanged%28android.view.SurfaceHolder,%20int,%20int,%20int%29)事件。

# nhibernate - Fluent Nhibernate 不会保存

> ID：11859354
> 
> 赞同：0
> 
> 时间：2012-08-08T07:05:42.970
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent, fluent-nhibernate-mapping

我有以下课程：

```
public class PhoneModel
{
     public virtual ModelIdentifier SupportModels
}
public class ModelIdentifier
{
     public virtual string Name
     public virtual IList<string> Values
} 
```

这就是我映射它的方式：

```
 mapping.Component(x => x.SuppoertedModel, y =>
      {
        y.Map(x => x.Name, "FAMILY_ID");
        y.HasMany(x => x.Values).Element("VALUE").Table("SUPPORTEDMODULS")
      } 
```

创建了 2 个表：

1.  PhoneModel 列“FAMILY_ID”
2.  SUPPORTEDMODELS 列“VALUE”、“PHONE_MODEL_ID”

问题是当我添加值时，它不会将其保存到 SUPPORTEDMODELS 表中：

```
var pm = new PhoneModel();
pm.SupportedModels.Name = "11"
pm.SupportedModels.Values.Add("34"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:24:28.103

*   你不见了`HasMany(x => x.Values).Cascade.AllDeleteOrphan()`
*   测试代码中可能缺少 session.Flush() 或 transaction.Commit()

顺便说一句：如果顺序`Values`不重要，那么将其更改为`ICollection<string>`and`HasMany().AsSet()`因为这允许 NH 优化某些东西并且代码不能依赖于使用 sql 时不可靠的顺序。

# javascript - 获取表格行中 tds onclick 的从零开始的索引

> ID：11859356
> 
> 赞同：0
> 
> 时间：2012-08-08T07:05:59.543
> 
> 标签：javascript, jquery

嗨有一个有很多行的表

第一行有`<th>`s 然后所有以下行都包含`<td>`s

如果我使用下面的脚本并单击其中包含`<td>`s 的第一行，我会收到一个警报，说 1。我如何让它说零而不减去一个。我认为使用“has(td)”会起作用吗？

```
$('td').click(function(){

   var s = $(this).parents('table tr:has(td)').index();
   alert(s);

});

<table border="1" width="400px" height="200px">
    <tr>
        <th></th><th></th><th></th><th></th><th></th>
    </tr>
    <tr>
        <td></td><td></td><td></td><td></td><td></td> if I click here it must alert 0
    </tr>
    <tr>
        <td></td><td></td><td></td><td></td><td></td> if I click here it must alert 1
    </tr>
    <tr>
        <td></td><td></td><td></td><td></td><td></td> if I click here it must alert 2
    </tr>
    <tr>
        <td></td><td></td><td></td><td></td><td></td> if I click here it must alert 3
    </tr>
    <tr>
        <td></td><td></td><td></td><td></td><td></td> if I click here it must alert 4
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:15:47.323

传递 a 选择器`.index()`以过滤掉兄弟姐妹

```
$('td').click(function(){
    var s = $(this).parent().index('tr:has(td)');
    alert(s);
});​ 
```

[http://jsfiddle.net/nAhE3/](http://jsfiddle.net/nAhE3/)

# objective-c - 将复选框添加到 UITableView 中的部分之一

> ID：11859357
> 
> 赞同：0
> 
> 时间：2012-08-08T07:06:03.270
> 
> 标签：objective-c, ios, xcode, uitableview, uiviewcontroller

我以编程方式创建了一个包含不同部分的表格视图控制器我想在我的第三部分中添加 3 行带有复选标记框（我使用了故事板！）请你给我一些提示，我该怎么做..

**我的问题是如何在左侧为我的第三部分设置复选框**

这是图片：而不是请设置您的代码：在缺席代码部分中有 3 行带有复选标记框

这是我在故事板中的观点：

这是代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
NSMutableArray *keys = [[NSMutableArray alloc] init];
NSMutableDictionary *contents = [[NSMutableDictionary alloc] init];

NSString *staKey = @"Start";
NSString *endKey = @"End";
NSString *absKey= @"Absence";

[contents setObject:[NSArray arrayWithObjects:@"Time: 08:00 Date: Fri,3 Aug, 2012", nil] forKey:staKey];
[contents setObject:[NSArray arrayWithObjects:@"Time: 17:57 Date: Fri,3 Aug, 2012", nil] forKey:endKey];
[contents setObject:[NSArray arrayWithObjects:@"Please set your code", nil] forKey:absKey];

[keys addObject:staKey];
[keys addObject:endKey];
[keys addObject:absKey];

[self setSectionKeys:keys];
[self setSectionContents:contents];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSString *key = [[self sectionKeys] objectAtIndex:[indexPath section]];
NSArray *contents = [[self sectionContents] objectForKey:key];
NSString *contentForThisRow = [contents objectAtIndex:[indexPath row]];

static NSString *CellIdentifier = @"CellIdentifier";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault 
reuseIdentifier:CellIdentifier];
}

[[cell textLabel] setText:contentForThisRow];
return cell;

 }

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
NSMutableArray *weekArray = [[ NSMutableArray alloc] initWithObjects: @"Start Time", @"End Time",@"Absence Code", 
 nil];

return [weekArray objectAtIndex:section];
}

- (UITableViewCellAccessoryType)tableView:(UITableView *)tv accessoryTypeForRowWithIndexPath:(NSIndexPath  
*)indexPath {
return UITableViewCellAccessoryDisclosureIndicator;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:42:45.243

每个复选框单元格应该是一个*自定义*TableViewCell。然后只需在 TableViewCell 中放置一个 ImageView 和一个 Label 并使用 didSelectRowAtIndex: 在选中/未选中之间切换图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:14:36.377

**编辑：**

检查[选择 UITableView 链接的多行](http://developer.apple.com/library/ios/#samplecode/TableMultiSelect/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011189-Intro-DontLinkElementID_2)获得帮助。

这样做：更改以下方法中的代码：

```
- (UITableViewCellAccessoryType)tableView:(UITableView *)tv accessoryTypeForRowWithIndexPath:(NSIndexPath  *)indexPath {
 if(indexPath.section ==2)
 {
  return UITableViewCellAccessoryCheckMark;
 }
 else
 {
  return UITableViewCellAccessoryDisclosureIndicator;
 }
} 
```

# ruby-on-rails - Rails 3：工作 Mongoid 验证码存在吗？

> ID：11859358
> 
> 赞同：4
> 
> 时间：2012-08-08T07:06:05.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, captcha

我已经为 Rails 3 尝试了一些验证码，但没有一个能很好地与 Mongoid 配合使用。我不需要任何太花哨的东西来做一个快速的人工检查。

你们如何得到一个与 Mongoid 合作的人？有替代解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:31:24.657

这超出了 mongoid 范围，但仍然适用。看看[负验证码](https://github.com/subwindow/negative-captcha)：

*负验证码创建了一个表单，其中包含只有机器人可以执行但人类不能执行的任务。这具有完全相同的效果，与正验证码相比，（传闻）假阳性识别率要低得多。所有这一切都不会让人类在提交表单时遇到任何额外的麻烦。这真的是双赢的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T00:52:51.313

您可以使用带有 mongo 支持的**simple-captcha** [v1rtual](https://github.com/v1rtual) [分支。](https://github.com/v1rtual/simple-captcha)简单干净的设置和使用：

只需添加到您的 Gemfile 为：

```
gem 'wolcanus-simple_captcha', :require => 'simple_captcha', :git => 'git://github.com/v1rtual/simple-captcha.git' 
```

运行生成器：

```
rails generate simple_captcha 
```

对于基于控制器，在文件“app/controllers/application.rb”中添加以下行：

```
ApplicationController < ActionController::Base
  include SimpleCaptcha::ControllerHelpers
end 
```

在表单标签内的视图文件中添加以下代码：

```
<%= show_simple_captcha %> 
```

并在控制器的操作中将其验证为

```
if simple_captcha_valid?
  do this
else
  do that
end 
```

有关更多选项，请参见分支：[https ://github.com/v1rtual/simple-captcha](https://github.com/v1rtual/simple-captcha)

# c# - 获取在 Powerpoint 中调用宏的控件的名称

> ID：11859371
> 
> 赞同：1
> 
> 时间：2012-08-08T07:07:08.987
> 
> 标签：c#, vsto, powerpoint, add-in

在 VBA for PowerPoint 或 C# COM AddIn 中是否有办法识别调用宏的控件或处于活动状态的控件（确定它刚刚被单击）？

我知道

```
Globals.ThisAddIn.Application.ActiveWindow.Selection 
```

，但是当您处于演示模式并且我在下面找不到任何内容时，这不起作用

```
Globals.ThisAddIn.Application.ActivePresentation 
```

编辑：我需要获取控件或其名称，以便可以将同一个 Sub 用于多个控件。

例子：

```
Public Sub RespondToControl(Control sender) 
    Dim AddIn As COMAddIn 
    Dim automationObject As Object 
    Set AddIn = Application.COMAddIns("MyAddIn") 
    Set automationObject = AddIn.object 
    Call automationObject.DoSomethingBasedOnNameOfControl(sender.Name) 
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:28:19.137

如果您指的是开发人员工具箱中的控件（命令按钮、复选框等），那么在幻灯片放映期间单击控件时，每个单独控件的 Click 事件中的代码都会运行。

```
Private Sub CheckBox1_Click()
MsgBox "You clicked CheckBox1"
End Sub

Private Sub CommandButton1_Click()
MsgBox "You clicked CommandButton1"
End Sub 
```

你的意思是其他类型的控件吗？

你究竟需要完成什么？

# java - Android：如何将 HttpResponse 转换为 List I have android AsynTask method that call the Web Service which returns the List<> as shown below: [[1,"Test",37.334542,-121.890821,-121.890821], [2,"XYZ",37.337749,-121.8867 问问题 问问题 2012-08-08T07:07:08.653 1339 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have android AsynTask method that call the Web Service which returns the List<> as shown below: [[1,"Test",37.334542,-121.890821,-121.890821], [2,"XYZ",37.337749,-121.886702,-121.886702], [4,"PQR",37.336453,-121.884985,-121.884985]] Here my question is how can I convert the response of HttpResponse to List<> as same as shown above. That looks like a json response. If it is, the easiest way to do it if you have that String (jsonResponse) already is something like: JSONArray json; try { json = new JSONArray (jsonResponse); } catch (JSONException e) { //do something } You can then just use the JSONArray as is, or iterate through it and add each item to a List if you need. javaandroidjsonrestarraylist 4 1 回答 1 This answer is useful 2 这看起来像一个 json 响应。如果是这样，如果您已经拥有该字符串（jsonResponse），那么最简单的方法是： JSONArray json; try { json = new JSONArray (jsonResponse); } catch (JSONException e) { //do something } 然后，您可以按原样使用 JSONArray，或者遍历它并将每个项目添加到 aList如果需要。 于 2012-08-08T07:13:04.783 回答 Related 1 javascript - 从服务器端代码获取会话信息到客户端代码 1 django - django + 与 ORM 混淆 2 ruby-on-rails-3 - Rails 3.2 基本关系 has_many 3 c# - 如何创建多个excel表 3 r - 将一个因子列转换为多个布尔列 1 c# - 遍历odata中关系的关系 1 java - 在 Eclipse 中复制一个 android 应用程序项目？ 2 oracle - oracle-索引组织表 3 java - Hotmail 等效的 IMAP 1 javascript - 在 d3.js 中创建嵌套的 SVG 节点 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11859373
> 
> 赞同：0
> 
> 时间：
> 
> 标签：java, android, json, rest, arraylist

I have android AsynTask method that call the Web Service which returns the List<> as shown below:

```
[[1,"Test",37.334542,-121.890821,-121.890821],
[2,"XYZ",37.337749,-121.886702,-121.886702],
[4,"PQR",37.336453,-121.884985,-121.884985]] 
```

Here my question is how can I convert the response of HttpResponse to List<> as same as shown above.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:13:04.783

这看起来像一个 json 响应。如果是这样，如果您已经拥有该字符串（jsonResponse），那么最简单的方法是：

```
JSONArray json;
try {
    json = new JSONArray (jsonResponse);
} catch (JSONException e) {
    //do something
} 
```

然后，您可以按原样使用 JSONArray，或者遍历它并将每个项目添加到 a`List`如果需要。

# mysql - 存储投票信息 - 数据库大纲

> ID：11859380
> 
> 赞同：1
> 
> 时间：2012-08-08T07:07:47.560
> 
> 标签：mysql, database, data-structures

总结：在FB上存储类似系统的信息最有效的方法是什么。又名，喜欢的人会被保存，喜欢的人会被保存等等。

它需要与用户 ID 相关联，以便知道谁喜欢它。问题是，您是否有一列有一个以逗号分隔的被喜欢事物的 id 列表，或者您是否为每个喜欢的事物设置了一个单独的列（列太多）。存储的信息将是一个布尔值 (1/0)，但需要与用户以及喜欢的“页面”相关联。

我的想法是这样的：

列名=喜欢例如：

```
1,2,3,4,5 
```

又名，用户“喜欢”了 id 为 1、2、3、4 和 5 的页面。要计算总“喜欢”，需要进行计数，然后将其存储在与页面本身关联的数据库中（表已经存在）。

这对我来说似乎是最好的方法，但有没有人能想到的更好的选择？

PS我不喜欢FB，但这是最简单的解释。

编辑：与stackoverflow上的加/负类似的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:46:39.553

在这种情况下，最好的方法是创建一个新表来跟踪喜欢。因此，假设您有 table `posts`，其中有一列`post_id`包含所有帖子（用户可以对其投票）。并且您有另一个`users`带有 column 的表`user_id`，其中包含所有用户。

您应该创建一个`likes`至少有两列的表，例如`like_postid`和`like_userid`。现在，每次用户喜欢一个帖子时，都会在此表中创建一个新行，其中包含被喜欢的帖子的 id （`post_id`from的值）和喜欢该帖子`posts`的用户的 id （ from 的值`user_id`） 。`users`当然，您可以在`likes`表中输入更多列（例如，跟踪何时创建了点赞）。

您在这里所拥有的称为[多对多关系](http://en.wikipedia.org/wiki/Many-to-many_%28data_model%29)。谷歌它以获取有关它的更多信息并找到有关如何正确实施它们的更多建议（您会发现逗号分隔的 id 列表不是最佳实践之一）。

根据评论更新：如果我是正确的；您想获得对某位艺术家进行投票的所有用户（按名称排序）的列表。你应该这样做：

```
SELECT Artists.Name, User.Name
FROM Artists
JOIN Votes
    ON Votes.page_ID = Artists.ID
JOIN Users
    ON Votes.Votes_Userid = Users.User_ID
WHERE Artists.Name = "dfgdfg"
ORDER BY Users.Users_Name 
```

这里有一件奇怪的事情；您的投票表中包含艺术家 ID 的列似乎被调用`page_ID`。此外，您的列名有点不一致（不是很糟糕，但是如果您希望在将代码放置 6 个月后能够理解您的代码，请记住这一点）。在您的评论中，您说您只进行了一次连接，但实际上您进行了两次连接。如果您指定两个表名（就像您所做的那样：`JOIN Users, Votes`SQL 实际上连接了这两个表。

根据您在评论中发布的查询，我可以告诉您没有太多使用联接的经验。我建议你阅读如何使用它们，它会真正提高你编写好代码的能力。

# css - div中的均匀空间href img

> ID：11859382
> 
> 赞同：1
> 
> 时间：2012-08-08T07:07:56.747
> 
> 标签：css, html, alignment, image

我很难弄清楚如何在 div 容器的两侧均匀地放置 3 个 href img。

视觉示例：[XXX]

(X = href img [ ]=容器 div)

```
<div id="container">
  <a href="#"><img src="image1.jpg"></a>
  <a href="#"><img src="image2.jpg"></a>
  <a href="#"><img src="image3.jpg"></a>
</div> 
```

CSS：

```
#container {
  clear: both;
  width: 900px;
  height: 150px;
}
#container a img {
  margin: 0 auto;
} 
```

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:29:58.277

好的，因为您希望它们均匀分布，我建议使用百分比作为图像的宽度。例如：

```
#container {
  clear: both;
  width: 900px;
  height: 150px;
}
#container a img {
  float: left;
  width: 33%;
} 
```

这应该使您的锚点在父 div 中浮动，以便它们水平对齐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:39:45.513

这是一个示例 - [jsFiddle](http://jsfiddle.net/YRQze/2/)。在 Chrome 21、IE9、FF13、Safari 5、Opera 11 中测试。

```
#container {
  clear: both;
  width: 900px;
  height: 150px;
}
#container a {
  float: left;
  display: block;
  width: 300px;
  text-align: center;
}
#container a img {
  margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:49:07.103

尝试这个

```
#container a {float:left; padding:0 10px} 
```

# wcf - WCF 中的可靠会话和发送超时

> ID：11859386
> 
> 赞同：0
> 
> 时间：2012-08-08T07:08:21.033
> 
> 标签：wcf, reliablesession

我正在开发一个 WCF 应用程序。在 app.config 文件中，我使用了启用的可靠会话。我的 sendTimeOut 绑定设置为 10 分钟。在测试应用程序时，我遇到了一个问题，比如我正在断开网络连接，并且我正在尝试连接到远程系统，因为我启用了可靠会话，代理它等待 10 分钟，然后只抛出异常。是否有任何属性/属性可以帮助我检测 app.config 文件中可用的网络连接或作为可靠会话的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:10:34.430

InactivityTimeout 应该可以帮助您。Inactivity 的默认超时值也是 10 分钟。如果您想更早地检测到网络断开连接，则可以根据您的要求减少不活动超时。 [http://msdn.microsoft.com/en-us/library/system.servicemodel.reliablesession.inactivitytimeout.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.reliablesession.inactivitytimeout.aspx)

HTH，阿米特

# sql - JOIN 后在字段中获取数组

> ID：11859391
> 
> 赞同：0
> 
> 时间：2012-08-08T07:08:38.480
> 
> 标签：sql, codeigniter

假设我有一个名为 Appointments 的表，另一个名为 Clients 的表和一个名为 ClientsAppointments 的连接表，它关联了上述两个表。这用于客户端可以有多个约会，并且多个客户端可以参加同一个约会（nn 关系）的场景。

我想列出约会，其中“客户”字段是与该约会相关的所有客户的数组。到目前为止我已经尝试过：

```
 SELECT * FROM Appointments a
    INNER JOIN ClientsAppointments ca ON ca.IdAppointment = a.IdAppointment
    INNER JOIN Clients c ON c.IdClient = ca.IdClient 
```

这当然行不通。它给了我一份与他们拥有的每个客户重复的约会清单。然后在 PHP 中我会处理它们来实现这一点。这种方式似乎比进行多次查询更有效，因为每次约会通常只有一个客户。

表模式（这些不是实际的表，但为了说明情况而进行了简化）：

```
 Appointment(
            INT idAppointment,
            DATETIME start,
            DATETIME end)

    Clients(
            INT idClient,
            VARCHAR name)

    ClientsAppointments(
            INT idAppointment,
            INT idClient) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:18:48.820

尝试使用[`LEFT OUTER JOIN`](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

```
SELECT a.*,c.Name FROM ClientsAppointments ca
LEFT OUTER JOIN Appointments a ON ca.IdAppointment = a.IdAppointment
LEFT OUTER JOIN Clients c ON ca.IdClient = c.IdClient 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:42:16.650

如果您使用 MySQL 作为数据库，请尝试使用 GROUP_CONCAT：

```
SELECT a.IdAppointment,GROUP_CONCAT(CAST(ca.IdClient AS CHAR) SEPARATOR ',')  FROM Appointments a
INNER JOIN ClientsAppointments ca ON ca.IdAppointment = a.IdAppointment
group by a.IdAppointment 
```

# c# - 从保存的链接中提取文件名

> ID：11859396
> 
> 赞同：0
> 
> 时间：2012-08-08T07:09:03.307
> 
> 标签：c#

我保存了一个链接一个看起来像这样的数据库

```
~\quizes\314757_499034200123763_1508831626_a.jpg 
```

我使用以下代码提取文件名

```
Uri uri = new Uri(BulletedList1.DataValueField.ToString());
        string filename=Path.GetFileName(uri.LocalPath); 
```

但它给出了以下错误 **无法确定 URI 的格式。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:08:39.323

我使用以下方法完成了我的工作。

```
ListItem li = BulletedList1.Items[e.Index];

        string filename = Path.GetFileName(li.Value.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:13:09.800

您可以只使用[Path.GetFileName](http://msdn.microsoft.com/en-us/library/system.io.path.getfilename.aspx)，例如：

```
var dbValue = @"~\quizes\314757_499034200123763_1508831626_a.jpg";
string filename = Path.GetFileName(dbValue); 
```

对于您的示例，它应该可以正常工作。

**编辑**

只是猜测，但如果您将数据库中的所有值都读入 BulletList 控件，则可以查看[Items](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.items.aspx)属性以读取它们。大概是这样的：

```
foreach (var item in BulletedList1.Items)
 {
    string filename = Path.GetFileName(item.ToString());
    // Do stuff with the file name
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:15:05.367

这有什么问题？

```
var fromDatabase = @"~\quizes\314757_499034200123763_1508831626_a.jpg";
string filename = Path.GetFileName(fromDatabase); 
```

还是因为其他原因需要扩展“~”？在这种情况下， http: [//msdn.microsoft.com/en-us/library/system.web.virtualpathutility.aspx](http://msdn.microsoft.com/en-us/library/system.web.virtualpathutility.aspx)可能会对您有所帮助。

# objective-c - 目标c是否支持协议的私有继承

> ID：11859398
> 
> 赞同：2
> 
> 时间：2012-08-08T07:09:08.707
> 
> 标签：objective-c, objective-c-category

可以私有继承协议，以便在下一个继承级别不应该访问它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:21:18.007

Objective-C 没有 C++ 那样的“私有继承”（或“私有一致性”）。

您可以遵守协议，而无需在头文件中声明您的一致性。例如，如果您将其放在文件中的声明`NSCoding`上方，您可以遵守“秘密” ：`@implementation``.m`

```
@interface MyObject () <NSCoding>
@end 
```

这声明了一个将协议添加到类的*类扩展*。`NSCoding``MyObject`

但是，任何人（包括子类）都可以询问您是否采用该协议：

```
[[MyObject class] conformsToProtocol:@protocol(NSCoding)]
// returns YES

[[MySubObject class] conformsToProtocol:@protocol(NSCoding)]
// also returns YES, if MySubObject is a subclass of MyObject 
```

并且任何人都可以通过先转换对象来向 a发送`NSCoding`消息：`MyObject`

```
[(id<NSCoding>)someObject encodeWithCoder:someCoder] 
```

如果您创建了 的子类`MyObject`，并且您的子类也声明它符合`NSCoding`，那么它几乎肯定需要`[super encodeWithCoder:]`从自己的`encodeWithCoder:`方法中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:16:12.440

不，由于语言设计，这是不可能的。

此外，由于任何方法都可以被覆盖，因此您永远无法确定您调用的方法是否来自正确的类。

可能有一些 hack 允许直接*调用*您想要的方法，但这并不容易，甚至可能是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:20:36.080

协议或其他方式，没有办法阻止方法被子类覆盖

[[来源]](https://stackoverflow.com/a/2864317/916299)

# c - 关于 C 中的浮点数和比较运算符

> ID：11859399
> 
> 赞同：4
> 
> 时间：2012-08-08T07:09:15.400
> 
> 标签：c, floating-point

```
int main()
{
    float lfResult = 19.893196;
    if(lfResult == 19.893196)
        printf("Works");
    else
        printf("does not work");

    getch();
    return 0;
} 
```

输出：不起作用

为什么`if`条件失败？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T07:12:48.503

在 C 中，浮动常量的类型为`double`. 尝试：

```
float lfResult = 19.893196f;
if(lfResult == 19.893196f)
                        ^ 
```

因此常数`19.893196`比 具有更高的精度`lfResult`。

> 6.4.4.2 - 4
> 
> **无后缀的浮点常量具有 double 类型**。如果以字母 f 或 F 为后缀，则它的类型为 float。如果以字母 l 或 L 为后缀，则它的类型为 long double。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:14:06.980

你的文字是双精度的，在赋值中被转换为浮点数。

尝试：

```
if(lfResult == 19.893196F)
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:19:42.540

在 if 条件下，19.893196 可以作为 double。所以 if 条件失败。

您应该尝试以下方式。

```
if(lfResult == 19.893196f) 
```

我想这会对你有所帮助。

# ruby-on-rails - Ruby on Rails 模型/控制器访问

> ID：11859402
> 
> 赞同：0
> 
> 时间：2012-08-08T07:09:33.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有两个模型，*subject*和*page*。我在它们之间创建了一个一对多的关联。

```
class Subject < ActiveRecord::Base
  has_many :pages
  attr_accessible :name
  attr_accessible :position
  attr_accessible :visible
  attr_accessible :created_at
end 
```

和

```
class Page < ActiveRecord::Base
  belongs_to :subject

  attr_accessible :subject_id
  attr_accessible :name
  attr_accessible :permalink
  attr_accessible :position
  attr_accessible :visible
  attr_accessible :created_at
end 
```

如上所述，我有两个模型，我想将主题模型中的所有主题名称访问到页面模型/控制器......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:50:50.000

试试这个：

```
Subject.select("subjects.name").joins(:pages).uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:26:11.147

以下是访问主题页面或页面主题的方法。

```
s = Subject.create(<params>)
s.pages  # array of page objects

p = Page.create(<params>)
p.subject # subject object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:40:26.830

如果要获取保存在主题模型中的所有主题，请使用：

```
Subject.pluck(:name) 
```

或访问与特定页面关联的主题：

```
page = Page.first
page.subject  #subject object associated with the page 
```

# java - 创建服务时没有空的构造函数

> ID：11859403
> 
> 赞同：100
> 
> 时间：2012-08-08T07:09:36.210
> 
> 标签：java, android

我正在努力解决这个错误：

> 08-08 11:42:53.179：E/AndroidRuntime(20288)：原因：java.lang.InstantiationException：无法实例化类 com.example.localnotificationtest.ReminderService；没有空的构造函数

我不明白为什么会发生此错误。

我试图在特定时间出现通知，在搜索了一段时间后，我发现了这个[旧的 stackoverflow 问题](https://stackoverflow.com/q/7540724/1250370)。我尝试了一切，但我的代码给出了错误。

请帮我解决这个问题。

这是我的 MainActivity 代码：

```
public class MainActivity extends Activity {
    int mHour, mMinute;
    ReminderService reminderService;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        reminderService = new ReminderService("ReminderService");

        TimePickerDialog dialog = new TimePickerDialog(this, mTimeSetListener, mHour, mMinute, false);
        dialog.show();
    }

    TimePickerDialog.OnTimeSetListener mTimeSetListener =  new OnTimeSetListener() {

        @Override
        public void onTimeSet(TimePicker v, int hourOfDay, int minute) {
            mHour = hourOfDay;
            mMinute = minute;

            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
            Calendar c = Calendar.getInstance();
            c.set(Calendar.YEAR, Calendar.YEAR);
            c.set(Calendar.MONTH, Calendar.MONTH);
            c.set(Calendar.DAY_OF_MONTH, Calendar.DAY_OF_MONTH);
            c.set(Calendar.HOUR_OF_DAY, mHour);
            c.set(Calendar.MINUTE, mMinute);
            c.set(Calendar.SECOND, 0);

            long timeInMills = c.getTimeInMillis();

            Intent intent = new Intent(MainActivity.this, ReminderService.class);
            PendingIntent pendingIntent = PendingIntent.getService(MainActivity.this, 0, intent, 0);
            alarmManager.set(AlarmManager.RTC, timeInMills, pendingIntent);
        }
    };

} 
```

这是我的 ReminderService 代码：

```
public class ReminderService extends IntentService {

    public ReminderService(String name) {
        super(name);
        // TODO Auto-generated constructor stub
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        Intent notificationIntent = new Intent(this, MainActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 1, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT);

        NotificationManager nm = (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);

        Notification.Builder builder = new Notification.Builder(this);

        builder.setContentIntent(contentIntent)
            .setSmallIcon(R.drawable.ic_launcher)
            .setTicker("Local Notification Ticker")
            .setWhen(System.currentTimeMillis())
            .setAutoCancel(true)
            .setContentTitle("Local Notification")
            .setContentText("This is content text.");
         Notification n = builder.getNotification();

         nm.notify(1, n);
    }

} 
```

这是我的 manifest.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.localnotificationtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"  android:label="@string/app_name"  android:theme="@style/AppTheme" >
        <activity android:name=".MainActivity"  android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:name="ReminderService"></service>
    </application>

</manifest> 
```

我不知道我哪里错了。我错过了一些代码吗？

* * *

## 回答 #1

> 赞同：224
> 
> 时间：2012-08-08T07:20:02.977

您需要向您的类添加一个空的构造函数，**即一个不带参数的构造函数：**

```
public ReminderService() {
    super("ReminderService");
} 
```

[文档](https://developer.android.com/reference/android/app/IntentService.html#IntentService(java.lang.String))中的解释：

`name`用于命名工作线程。

***注意****：这仅适用于意图服务。*

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2015-02-16T00:51:38.437

如果您将 Service 声明为**Inner Class / Nested Class**，则还需要将类设为**静态**

没有它，即使你的构造函数是正确的，你也会得到错误

> **解释**
> 
> 原因是，您只能在外部类的上下文中实例化内部类，因此您需要先创建外部类的实例。
> 
> 声明你的内部类静态使它独立于它的外部类

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-08-08T07:20:59.873

为**IntentService**声明一个**默认的无参数构造函数**

 **```
public class ReminderService extends IntentService {
    public ReminderService() {
      super("ReminderService");
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-08T07:20:16.270

您需要将**默认的无参数构造函数**添加到**ReminderService**类。如果您不编写自己的构造函数（您拥有），这只会隐式添加。见这里：[http ://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)**

# javascript - 通过 javascript 应用样式而不使用 Id

> ID：11859404
> 
> 赞同：0
> 
> 时间：2012-08-08T07:09:37.507
> 
> 标签：javascript, html, css

我的html页面内容如下

```
<div>
    <div>
        Summary 1
    </div>
    <div style="display:none">
        Details 1
    </div>
    <button>Read More</button>
</div> 
```

详细信息内容最初是折叠的。当用户单击阅读更多按钮时，我需要显示详细信息内容。我可以让它成为可能。我将为详细信息 div 标签定义 id，为按钮的 onclick 事件定义 javascript。使用 id 我将更改 div 样式显示。

但是我有多个基于后端数据的部分列表。所以我的页面将呈现如下

```
<div>
    <div>
        Summary 1
    </div>
    <div style="display:none">
        Details 1
    </div>
    <button>Read More</button>
</div>

<div>
    <div>
        Summary 2
    </div>
    <div style="display:none">
        Details 2
    </div>
    <button>Read More</button>
</div>

<div>
    <div>
        Summary 3
    </div>
    <div style="display:none">
        Details 3
    </div>
    <button>Read More</button>
</div> 
```

现在，当单击“阅读更多”按钮时，我如何实现展开和折叠功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:23:09.713

使用纯 javascript 并战略性地添加一些类，您可以这样做，这将使每个按钮成为一个切换，甚至根据切换状态更改其文本。然后，一段 javascript 将服务于该结构的所有重复实例，并且代码将独立于摘要、详细信息和按钮的确切 HTML 布局（只要它们保留相同的类并位于相同的容器 div 中）。

HTML：

```
<div>
    <div>
        Summary 1
    </div>
    <div class="details" style="display:none">
        Details 1
    </div>
    <button class="readMore">Read More</button>
</div>

<div>
    <div>
        Summary 2
    </div>
    <div class="details" style="display:none">
        Details 2
    </div>
    <button class="readMore">Read More</button>
</div>

<div>
    <div>
        Summary 3
    </div>
    <div class="details" style="display:none">
        Details 3
    </div>
    <button class="readMore">Read More</button>
</div>​ 
```

和javascript：

```
function toggleVis(el) {
    var vis = el.style.display != "none";
    if (vis) {
        el.style.display = "none";
    } else {
        el.style.display = "block";
    }
    return(!vis);
}

(function() {
    var readMore = document.getElementsByClassName("readMore");
    for (var i = 0; i < readMore.length; i++) {
        readMore[i].onclick = function(e) {
            var vis = toggleVis(e.target.parentNode.getElementsByClassName("details")[0]);
            e.target.innerHTML = vis ? "Read Less" : "Read More";
        }
    }
})(); 
```

工作演示：http: [//jsfiddle.net/jfriend00/aMBkJ/](http://jsfiddle.net/jfriend00/aMBkJ/)

注意：这需要在旧版本的 IE 上使用[shim 。](http://code.google.com/p/getelementsbyclassname/source/browse/trunk/getElementsByClassName.js)`getElementsByClassName()`​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:19:59.670

通过使用 jQuery [**.prev()**](http://api.jquery.com/prev/)您可以轻松实现它。

```
$('button').on('click', function(e){
   $(this).prev('div').toggle();
}); 
```

## [演示](http://jsfiddle.net/P7Aa9/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T07:17:47.130

你可以用jquery试试这个

```
<button class="readmore">Read More</button> 
```

jQuery

```
$('.readmore').click(function(){
   $(this).prev().show();
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T07:18:19.700

这是使用jquery的方法：

HTML 代码：

```
<div class="stuff">
<dl id="faq">
    <dt>What shouldn't I do to the bird?</dt>
    <dd>Never try to treat a fracture at home.</dd>
</div> 
```

jQuery 代码：

```
jQuery(document).ready(function() {
$('#faq').find('dd').hide().end().find('dt').click(function(){
       $(this).next().slideToggle();
   });
}); 
```

# jquery - jQuery隐藏或显示输入框

> ID：11859407
> 
> 赞同：0
> 
> 时间：2012-08-08T07:09:57.760
> 
> 标签：jquery

我对人们在这里提到的关于如何执行以下操作的不同方式感到困惑：

我有一个`add_fields_placeholder`包含三个值的下拉菜单：

*   请选择 -`value=""`
*   是的 -`value ="yes"`
*   不 -`value = "no"`

在这下面我有一个输入框叫做`add_fields_placeholderValue`

如果以上选择为“是”，我如何使此输入“必需”但也可见？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:13:39.690

您在下拉菜单上为选择触发器创建一个函数，并根据它的值隐藏或显示输入框。这是一个例子

```
$(document).ready(function()
{
    $("#dropdownID").change(function()
    {
        if($(this).value == "yes"))
        {
            $("#inputBoxID").show();
        }
        else
        {
            $("#inputBoxID").hide();
        }
    });
}); 
```

# c# - 如何使用 Naudio 从 WAV 文件中播放多声道音频？

> ID：11859409
> 
> 赞同：2
> 
> 时间：2012-08-08T07:10:17.820
> 
> 标签：c#, audio, naudio

我对NAudio相当陌生，我正在尝试将WAV文件中的音频通道加载到WaveStreams中，并在其自己的WaveViewer中显示每个通道。

我该怎么办？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T08:03:08.543

您的问题的答案可以在这里找到：

[http://mark-dot-net.blogspot.no/2012/01/handling-multi-channel-audio-in-naudio.html](http://mark-dot-net.blogspot.no/2012/01/handling-multi-channel-audio-in-naudio.html)

# playframework - 手动将 Cron-Job 添加到池中

> ID：11859410
> 
> 赞同：2
> 
> 时间：2012-08-08T07:10:20.643
> 
> 标签：playframework, playframework-1.x

我想做以下事情：

通常，您通过实现一个类来实现 Play-Jobs，该类扩展了 添加到池[OnApplicationStart](http://www.playframework.org/documentation/api/1.2.4/play/jobs/Job.html) ...

我现在想在运行时添加 Cron-Jobs（通过 GUI 添加任务...），但我不确定如何实现。

我查看了 JobsPlugin 并发现以下几行：

```
job.nextPlannedExecution = nextDate;
executor.schedule((Callable<V>)job, nextDate.getTime() - now.getTime(), TimeUnit.MILLISECONDS);
job.executor = executor; 
```

我必须像那样添加它们吗？

这甚至可能吗？因为我找不到任何行，告诉作业本身，它应该遵循哪个 Cron-Expression...

```
String cron = job.getClass().getAnnotation(On.class).value(); 
```

`job.nextPlannedExecution`在 Job-Execution 和新设置之后，这条线是否再次从外部调用？

* * *

好的，我希望我现在不回答我自己的问题，但这可能是解决方案吗？：

我实现了自己的 Job-Class，添加了一个属性，例如`cronExpression`并覆盖了 Job 的

```
public void _finally() {
    super._finally();
    if (executor == JobsPlugin.executor) {
        JobsPlugin.scheduleForCRON(this);
    }
} 
```

实现我自己的`sheduleForCron()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:42:55.820

查看 JobsPlugin 的源代码，您应该能够模仿使用`scheduledJobs`and`executor`属性所做的事情。

如果你看一下这个`onApplicationStart`方法，这显示了用`@On`'@Every `are managed in the job pool.`On `uses the CRON expression and uses`scheduleForCRON `, where as`Every` 注释的 Jobs 如何使用执行器来管理重复。

由于`scheduledJobs`和`executor`属性是公共静态的，你可以随心所欲地访问和操作它，所以我建议通读 JobsPlugin 的源代码，尤其是下面的代码，并在你自己的代码库中模仿它。

```
 // @On
        if (clazz.isAnnotationPresent(On.class)) {
            try {
                Job<?> job = ((Job<?>) clazz.newInstance());
                scheduledJobs.add(job);
                scheduleForCRON(job);
            } catch (InstantiationException ex) {
                throw new UnexpectedException("Cannot instanciate Job " + clazz.getName());
            } catch (IllegalAccessException ex) {
                throw new UnexpectedException("Cannot instanciate Job " + clazz.getName());
            }
        }
        // @Every
        if (clazz.isAnnotationPresent(Every.class)) {
            try {
                Job job = (Job) clazz.newInstance();
                scheduledJobs.add(job);
                String value = job.getClass().getAnnotation(Every.class).value();
                if (value.startsWith("cron.")) {
                    value = Play.configuration.getProperty(value);
                }
                value = Expression.evaluate(value, value).toString();
                if(!"never".equalsIgnoreCase(value)){
                    executor.scheduleWithFixedDelay(job, Time.parseDuration(value), Time.parseDuration(value), TimeUnit.SECONDS);
                }
            } catch (InstantiationException ex) {
                throw new UnexpectedException("Cannot instanciate Job " + clazz.getName());
            } catch (IllegalAccessException ex) {
                throw new UnexpectedException("Cannot instanciate Job " + clazz.getName());
            }
        } 
```

# javascript - JavaScript 子类化和方法覆盖

> ID：11859414
> 
> 赞同：2
> 
> 时间：2012-08-08T07:10:33.467
> 
> 标签：javascript, inheritance

我想用 JavaScript 做简单的经典继承。我只需要子类化和方法覆盖，而不是prototype.js 或其他一些库提供的冗长语法和花里胡哨。

现在，这个名叫 Shelby S. Moore 的家伙提出了一个按我希望的方式工作的解决方案：http: [//www.coolpage.com/developer/javascript/Correct%20OOP%20for%20Javascript.html](http://www.coolpage.com/developer/javascript/Correct%20OOP%20for%20Javascript.html)

唯一的问题是他正在扩展本机类型 Object 和 Function ，这破坏了我使用的一些库。同样作为一般性观察，我不想弄乱本机对象的原型。

我在这里制作了 Shelby S. Moore 的示例：http: [//jsfiddle.net/christian1974/CEKL5/](http://jsfiddle.net/christian1974/CEKL5/)

从示例中可以看出，它按预期工作。现在，64.000 美元的问题是：你能推荐一种让它在不与 Object.prototype 和 Function.prototype 混淆的情况下工作的方法吗？

我正在寻找一种非常简单的语法，例如：

```
Extend(parent, this); 
```

我应该放弃整个想法并使用执行此操作的现有库吗？我是否让自己的生活太艰难了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:28:15.310

为什么不增加对象原型，而只是创建一个函数`inherits`呢？

```
function inherits(parent)
{
    //just make sure this doesn't get called on the global object (like a regular function)
    //and the parent is an actual constructor reference
    if (this === window || typeof parent !== 'function')
    {
        throw new Error('inherit not possible on window/without constructor');
    }
    //to set the constructor dynamically and secure the constructor of child object
    //I'd say this should do the trick (be weary though, not tested)
    var constr, Proto;
    constr = this.constructor;
    Proto = typeof parent === 'function' ? new parent : parent;//get instance
    this.prototype = Proto.prototype;
    this.constructor = constr;//restore constructor when needed
    if( arguments.length > 1 )
    {
        return parent.apply( this, Array.prototype.slice.call( arguments, 1 ) );
    }
    return parent.call( this );
}

function Foo(someArg)
{
    inherits.apply(this,[Bar,someArg]);
} 
```

话虽如此，我并没有真正看到这种方法的好处，比如说，`Object.create`并且 - 因为你使用的是 libs - jQuery 的`.extend`方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:14:18.417

```
function extend(Child, Parent) {
    var F = function() { };
    F.prototype = Parent.prototype;
    Child.prototype = new F();
    Child.prototype.constructor = Child;
    Child.superclass = Parent.prototype;
} 
```

用法：

```
function Parent() {}

Parent.prototype.hello = function(name) {
    alert('hello ' + name);
}

function Child() {
    Child.superclass.hello.call(this, 'world');
}

extend(Child, Parent); 
```

# android - 在 android 原生应用中实现 Brightcove 播放器

> ID：11859416
> 
> 赞同：1
> 
> 时间：2012-08-08T07:10:40.757
> 
> 标签：android

我只想在 android.i 中实现 Brightcove 播放器

[http://support.brightcove.com/en/docs/accessing-video-content-media-api](http://support.brightcove.com/en/docs/accessing-video-content-media-api)

[http://support.brightcove.com/en/docs/best-practices-android-app-development](http://support.brightcove.com/en/docs/best-practices-android-app-development)

从那里，我得到的视频网址为“ [http://api.brightcove.com/services/library?command=find_video_by_id&video_id=1520880903001&video_fields=name,length,FLVURL&media_delivery=http&token=jskS1rEtQHy9exQKoc14IcMq8v5x2gCP6yaB7d0hraRtO__.HUux](http://api.brightcove.com/services/library?command=find_video_by_id&video_id=1520880903001&video_fields=name,length,FLVURL&media_delivery=http&token=jskS1rEtQHy9exQKoc14IcMq8v5x2gCP6yaB7d0hraRtO__6HUuxMg)

我在videocloud上获得了特定视频的VideoId，Video_fields。我只想在android本机应用程序的brightcove播放器上使用这些信息播放该视频。

我的代码：

私有静态最终字符串 MyApiToken = "我的令牌"; 私有 ReadAPI mReadAPI = new ReadAPI(MyApiToken); 私人 com.brightcove.mobile.mediaapi.model.Video pVideo；

```
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main);

    makeAPICall();

} 
```

私人无效 makeAPICall() {

```
 Log.d("Sample", "Beginning makeAPICall");
    EnumSet<VideoFieldEnum> videoFields = VideoFieldEnum.createEmptyEnumSet(); 
    videoFields.add(VideoFieldEnum.NAME);
    videoFields.add(VideoFieldEnum.LENGTH);
    videoFields.add(VideoFieldEnum.FLVURL);

    try {
        long videoId =My videoId;
        pVideo = mReadAPI.findVideoById(videoId, videoFields, null);
    } catch(Exception e) {
        String msg = e.getMessage();
        Log.e("Sample", msg);
    }

    //Create the player
    BCPlayerView mPlayer;
    mPlayer = (BCPlayerView) findViewById(R.id.player);

    mPlayer.load(pVideo);
    mPlayer.start();
} 
```

}

我还添加了诸如 bc-android-mediapi.jar 和 bc-android-player.jar 之类的库 jar。当我尝试运行时。，我得到了黑屏，视频播放器控制器可见。但是视频没有播放。我需要包括的任何内容更远？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T20:39:26.923

我知道这是一篇旧帖子，但我在寻找相同答案时遇到了麻烦。

这是我解决它的方法：

1.  确保您的应用有权访问互联网

    ```
     <uses-permission android:name="android.permission.INTERNET"/> 
    ```

2.  通过 URL 访问使用读取 API 令牌密钥（[如何获取此令牌](http://support.brightcove.com/en/video-cloud/docs/managing-media-api-tokens#view)）

3.  通过强制媒体传输类型为 H264

    ```
     theReadAPI.setMediaDeliveryType(MediaDeliveryTypeEnum.HTTP); 
    ```

希望这可以帮助其他在这个库中遇到问题的人。这是我的完整代码示例：

```
 Logger mAPILogger = Logger.getLogger("BCAndroidAPILogger");
    ReadAPI theReadAPI = new ReadAPI("read with URL Access token");
    theReadAPI.setMediaDeliveryType(MediaDeliveryTypeEnum.HTTP);
    theReadAPI.setLogger(mAPILogger);

    EnumSet<VideoFieldEnum> videoFields = VideoFieldEnum
            .createEmptyEnumSet();
    videoFields.add(VideoFieldEnum.ID);
    videoFields.add(VideoFieldEnum.NAME);
    videoFields.add(VideoFieldEnum.LENGTH);
    videoFields.add(VideoFieldEnum.RENDITIONS);
    videoFields.add(VideoFieldEnum.FLVURL);
    videoFields.add(VideoFieldEnum.THUMBNAILURL);
    videoFields.add(VideoFieldEnum.VIDEOFULLLENGTH);

    try {
        // Get My Playlist
        Playlist thePlaylist = theReadAPI.findPlaylistById(1234567890123,
                videoFields, null, null);

        BCPlayerView thePlayer = (BCPlayerView) findViewById(R.id.player);
        thePlayer.logEnabled(true);
        thePlayer.load(thePlaylist.getVideos().get(0));
        thePlayer.start();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# android - 如何更有效地设置布局大小？

> ID：11859417
> 
> 赞同：0
> 
> 时间：2012-08-08T07:10:43.893
> 
> 标签：android

我需要将我的视图放置在中心，它的宽度不是应用程序正在运行的屏幕的特定百分比，`match parent`或者是特定百分比的大小。`wrap content`为了获得更灵活的布局，我没有使用尺寸设置其大小，而是为元素定义了权重，以使其具有所需的主要大小。为了做到这一点，我`LinearLayouts`为它们插入了两个额外的和定义的权重。我认为这不是`Views`在 XML 中增加数量的最佳解决方案。你们能告诉我更有效的方法吗？

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                  android:layout_width="match_parent"
                  android:layout_height="match_parent"
                  android:background="@drawable/right_back"
                  android:orientation="horizontal"
                  android:gravity="center">

<!-- The first one I think which is redundant -->
        <LinearLayout
            android:layout_weight="25"
            android:layout_width="0dip"
            android:layout_height="wrap_content"/>

<!-- Main view I need to be of a required size on each screen size -->
        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:background="@drawable/layout_round_corners"
            android:orientation="vertical"
            android:layout_weight="50"
            android:padding="20dip">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="@string/welcome_text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="@color/text_color"
                android:layout_gravity="center_horizontal"/>

            <EditText
                android:id="@+id/edt_firsttimeactivity_first_field"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:hint="@string/password"
                android:password="true"
                android:singleLine="true"/>

            <EditText
                android:id="@+id/edt_firsttimeactivity_second_field"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:hint="@string/repeat_new_password_again"
                android:password="true"
                android:singleLine="true"/>

            <Button
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_horizontal"
                android:onClick="onButtonClick"
                android:text="@string/create_account_for_me"/>
        </LinearLayout>

<!-- The second one I think which is redundant -->
        <LinearLayout
            android:layout_weight="25"
            android:layout_width="0dip"
            android:layout_height="wrap_content"></LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:37:23.453

我相信问题是你没有定义一个`weightSum`. 您应该`android:weightSum="100"`（例如）添加到最外层的 LinearLayout，然后将该总和除以您想要的内部布局。

编辑：如果我正确理解了这个问题，我认为你应该能够通过简单地使用`android:paddingLeft`和`android:paddingRight`作为你的“主视图”来解决问题。您也可以尝试`android:layout_marginLeft`和`android:layout_marginRight`. 当然，`fill_parent`在这种情况下留下高度。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:47:57.743

这就是你应该如何编写布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="match_parent"
              android:layout_height="match_parent"                  
              android:orientation="horizontal"
              android:background="@drawable/right_back"
              android:weightSum="1"
              android:gravity="center">

<!-- Main view I need to be of a required size on each screen size -->
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="@drawable/layout_round_corners"
        android:layout_weight=".5"
        android:padding="20dp">

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/welcome_text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/text_color"
            android:layout_gravity="center_horizontal"/>

        <EditText
            android:id="@+id/edt_firsttimeactivity_first_field"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"                
            android:hint="@string/password"
            android:password="true"
            android:singleLine="true"/>

        <EditText
            android:id="@+id/edt_firsttimeactivity_second_field"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/repeat_new_password_again"
            android:password="true"
            android:singleLine="true"/>

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:onClick="onButtonClick"
            android:text="@string/create_account_for_me"/>
    </LinearLayout>
</LinearLayout> 
```

试试这个。您可以更改 2nd LinearLayout 的 layout_weight 以使其看起来像您喜欢的那样大或小。

# sql - 是否可以在 current_schema 中选择独立于公共同义词的表

> ID：11859418
> 
> 赞同：0
> 
> 时间：2012-08-08T07:10:46.150
> 
> 标签：sql, oracle, scope, schema, synonym

有没有办法只从自己的模式中选择数据，即使有公共同义词？

就像是：`Select * from current_schema.Table1`

更多信息：

我在 schema1 上的 table1 上有一个公共同义词。
现在我有一个选择 table1 的包（在 schema2 上），我想选择 schema2 的 table1 而不是 schema1。
我的问题是，当用户在他的服务器上使用包时，我不会更改标识符。

**编辑**
我看到我的问题不清楚，我想知道我当前的模式是否有占位符？

目前我需要这样做： `Select * from schema2.Table1`

我想要的是这样的： `Select * from MySchema.Table1` 或 `Select * from this.Table1` 或 `Select * from current_schema.Table1`

oracle中是否存在类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:24:59.823

范围[规则非常明确](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_7001.htm#sthref7116 "CREATE SYNONYM 的 SQL 参考")。当数据库解析查询时，它会按照以下优先顺序查找与语句中的标识符匹配的对象：

1.  架构中该名称的对象
2.  该名称的私有同义词（在您的架构中）
3.  该名称的公共同义词

但是如果你想明确一点，你可以在你的表引用前加上特定的模式名称。这有助于将您的意图传达给查看您的代码的其他人。

此外，如果您的架构中有一个表 TABLE1 并且有一个名为 TABLE1 的公共同义词指向您要查询的另一个架构中的表，那么您必须在您的引用前面加上该其他架构。

* * *

> “我想知道的是我当前的模式是否有占位符”

不，因为没有必要。默认值始终是您当前的架构。也就是说，这个说法...

```
SQL>  select * from t23; 
```

... 将*始终*从您当前架构中的 T23 中选择，如果它有一个具有该名称的表（或私有同义词）。

请注意，可以使用 ALTER SESSION 命令更改当前模式的值：

```
SQL>  alter session set current_schema=scott; 
```

现在，如果您执行之前的选择，它将返回来自 SCOTT.T23 的结果，前提是 SCOTT 模式具有这样的表，并且您对它具有特权。您可以[在我不久前写的一篇博客文章中找到有关 Oracle 模式的更多信息](http://radiofreetooting.blogspot.co.uk/2007/02/user-schema.html "用户！= 架构")。

* * *

我试图了解您遇到了什么问题，我注意到您的场景是一个用户执行另一个用户拥有的包。现在，默认情况下，拥有的包`SCHEMA2`将针对拥有的对象运行，`SCHEMA2`并使用授予的其他对象的权限`SCHEMA2`。

但是 PL/SQL 为我们提供了改变这一点的能力：AUTHID 子句确定包是使用定义者的权限（即包所有者）还是调用者的权限（当前用户）运行。因此，如果在运行实例时`SCHEMA2`定义了他们的包表 2 的 将是 范围内的，这将是公共同义词所拥有的或由公共同义词指示的。`AUTHID CURRENT_USER``SCHEMA1``SCHEMA1``SCHEMA1`

[找到更多。](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/create_package.htm#sthref2758)

# c# - 操作无法完成，因为 DbContext 已被释放

> ID：11859421
> 
> 赞同：9
> 
> 时间：2012-08-08T07:11:18.963
> 
> 标签：c#, asp.net-mvc-3

我正在 EF 4.1 中编写一个简单的应用程序，它将使用我的公共数据源（数据库中央服务器）的添加、删除、编辑和详细信息。在我的控制器类中，我写道：

```
 public class RegController : Controller
    {
       //
       // GET: /Reg/
       private string CmdStr =    ConfigurationManager.ConnectionStrings["MyConn"].ConnectionString;      
       public ActionResult Index()
      {
        using (var db = new RegModelContext(CmdStr))
        {
          return View(db.Registrant);
       }

    }
} 
```

当我执行我的应用程序时，它在 foreach 语句的索引视图中给了我一个错误：

```
@model IEnumerable<Registration.Models.Register>

@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
</head>
<body>
    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table>
        <tr>
            <th></th>
            <th>
                UserName
            </th>
            <th>
                Password
            </th>
            <th>
                Email
            </th>
            <th>
                Address
            </th>
        </tr>

    @foreach (var item in Model) {
        <tr>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
                @Html.ActionLink("Details", "Details", new { id=item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id=item.Id })
            </td>
            <td>
                @item.UserName
            </td>
            <td>
                @item.Password
            </td>
            <td>
                @item.Email
            </td>
            <td>
                @item.Address
            </td>
        </tr>
    }

    </table>
</body>
</html> 
```

错误是这样的：“操作无法完成，因为 DbContext 已被释放。”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-08T07:15:52.590

您应该使用 List 作为模型传递

我假设 db.Registrant 返回用户列表？如果是这样，请执行以下操作

```
List<Registrant> items = null;

using (var db = new RegModelContext(CmdStr))
{
    items = db.Registrant.ToList();
}

return View(items); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T09:45:28.023

只是为了进一步评论，您需要区分您的担忧。您不应该在控制器中使用这样的数据库上下文。而是通过存储库或服务层使用它。

我在使用时也遇到了这个问题`using`。我删除了使用部分。修改下面的代码以适应您的场景。假设您要带回用户列表。我会在我的存储库类中有这个：

```
public class UserRepository : IUserRepository
{
     MyDbContext dbContext = new MyDbContext();

     public IEnumerable<User> GetAll()
     {
          return dbContext.Users;
     }
} 
```

然后，您通过 Autofac、Ninject 等将这个存储库注入到您的控制器中。

在您的控制器中，它看起来像这样：

```
public class UserController : Controller
{
     private readonly IUserRepository userRepository;

     public UserController(IUserRepository userRepository)
     {
          this.userRepository = userRepository;
     }

     public ActionResult Index()
     {
          UserViewModel viewModel = new UserViewModel
          {
               Users = userRepository.GetAll()
          };
     }
} 
```

然后在您看来，您可以遍历用户。

# jquery - 悬停在对象上时获取对象的“原始”（非悬停）背景颜色

> ID：11859422
> 
> 赞同：6
> 
> 时间：2012-08-08T07:11:19.043
> 
> 标签：jquery, css

我可以使用以下函数获取任何元素的背景颜色：

```
$('.example').css('background') 
```

但是，在我的例子中，鼠标在这个元素上移动，并且由于 CSS`:hover`伪类，我收到了修改后的颜色。

有什么办法可以得到原色吗？就像是

```
$('.example').cssWithoutHover('background') 
```

你可以[在这里](http://sudokuhero.com/5J2763E1I6HI14593C413JC85HGC6948B7531I5D726J47D46F928195123E8678C75B6D49D4GI971C0)测试它。只需将 5 放在最后一个单元格中。这个单元格的颜色会在动画之后改变。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T07:26:05.813

您可以在准备好的 DOM 上扫描起始 BG 颜色并将它们存储为数据属性。

```
var board = $('#board-numbers');
board.children('div').each(function() {
    $(this).data('start-bg', $(this).css('background'));
});
board.on('hover', 'div', function() {
    var curr_bg = $(this).css('background');
    var start_bg = $(this).data('start-bg');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-03T18:39:40.547

扩展@vadim 发布的想法，我想我可以做得更好。只是`clone()`对象，不要把它放在 DOM 中。这样它就不能悬停！

```
css_color_without_hover_ = $('.example').clone(false).css('background'); 
```

还可以节省您在文档加载时对 DOM 进行潜在昂贵的扫描！

对我来说很好用。

- 编辑 -

我刚刚注意到这种技术存在局限性（或“陷阱”）。

如果您尝试获取颜色数据的元素的颜色（或背景颜色）继承自父元素，则克隆的对象将与 CSS 模式不匹配，这意味着样式不会应用于 jQuery 对象。

在这种情况下，解决方法是克隆父对象（适当的样式确实适用），并获取其样式，而不是子对象的样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T07:26:13.837

几乎可以肯定你不能那么容易。

这是一个派生的解决方案：

页面加载后，您可以将背景颜色存储在自定义属性中（悬停时不会更改）以便稍后获取：

```
$().ready(function(){
    $('.example').each(function(el){
        $(this).data('bgcolor', $(this).css('background-color'));
    });
    $('.example').hover(function(ev){
        console.log($(this).data('bgcolor'));
    });
}): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T07:26:37.813

你可以使用[jss](https://github.com/Box9/jss)库。它使您可以访问样式表规则

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T07:32:12.310

我可以建议将所有背景颜色定义移动到不同的类。当您需要特定类的背景颜色时，您可以即时创建元素并获取它的背景颜色，并且无需 :hover 修改。像这样的东西：

```
$('<div class="normal-cell"></div>').css('background-color') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:33:18.957

另一种解决方案是使用 jQuery [hover()](http://api.jquery.com/hover/)来更改悬停时的样式，而不是纯 CSS。例如，

```
$('.example').hover(
    function() { // handlerIn
        $(this).addClass('exampleHover');
    },
    function() { // handlerOut
        $(this).removeClass('exampleHover');
    }
); 
```

# servlets - Spring MVC - 在 onBindAndValidate 中添加 cookie

> ID：11859423
> 
> 赞同：0
> 
> 时间：2012-08-08T07:11:22.000
> 
> 标签：servlets, cookies, spring-mvc

我目前正在使用旧的 Spring 2.5 应用程序，我想做的是修改自定义控制器（扩展 SimpleFormController）的验证逻辑。

```
protected void onBindAndValidate(HttpServletRequest request, Object command, BindException errors) throws Exception; 
```

我想在这个方法中做的是根据我提供的服务类的结果编写一个 cookie。但是，由于此时在控制器的工作流程中我无权访问该`HttpServletResponse`对象，是否还有其他方法可以：

*   要么检索`HttpServletResponse`对象以向其写入 cookie。或者。
*   使用 Spring MVC 中的一些其他工具来生成 cookie。我看过`org.springframework.web.util.CookieGenerator`，但它仍然需要一个响应对象才能工作。

我感谢任何人都可以提供的帮助。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:09:06.047

事实证明，我仍然无法在 Spring MVC 2.5 中找到任何直观的内置方法来执行此操作。

所以我最终做的是这个黑客。首先，我修改了我的控制器以调用一个实用函数类，该类将获取生成的服务对象（无论它在哪里被调用），它公开了一个与 servlet 兼容的`getCookie()`方法，然后将它放在用户的会话下，如下所示：

```
WebUtils.setSessionAttribute(request, "myResponseObjectSessionName", myResponseObject); 
```

现在，由于它们都继承自`SimpleFormController`，因此我创建了一个新的抽象类，它仍然继承自前者，但有一个修改过的`handleRequestInternal()`方法，如下所示：

```
public ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response) throws Exception {

    // let the controller do it's job
    ModelAndView result = handleRequestInternal(request, response, errors);

    // and then use a helper class to inspect the session, find the session attribute
    // 'myResponseObjectSessionName', and set any cookies left in case it does exist at 
    // this point in time.
    new ProcessServiceObject().setServiceResponseCookie(request, response);

    return result;
} 
```

不是很优雅，但我认为它有效。干杯。

# java - How to avoid B Class object creation from outside world, and allow through only A Class

> ID：11859430
> 
> 赞同：0
> 
> 时间：2012-08-08T07:11:37.170
> 
> 标签：java

How to avoid B Class object creation from outside world, and allow through only A Class ?

I have 2 classes

```
public class A {
    B obj = null;
    public A() {
        obj = new B();
    }        
    public void methodA () {
        obj.methodB();
    }        
    // other methods
}

public class B {
    public void methodB () {
        // some logic            
    }
    //other methods
}

public class Client {
    public static void main (String s[]) {
        // Valid Call            
        A obj = new A();
        obj.methodA();  // Since methodB is called internally

        // Invalid Call , How to restrict this B object creation here ?
        B objB = new B();
        objB.methodB();

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:21:26.957

One solution I can think of is to use a inner static class of A: KeyToB with a private constructor, that is needed by B to be instanciated. Therefore, there is only A that can instanciate B, which can be in a different file.

```
public class A {
    B obj = null;
    public A() {
        obj = new B(instance);
    }
    public void methodA() {
        obj.methodB();
    }
    // other methods ..

    //The key to have the right to instanciate B, only visible in A
    private static KeyToB instance = new KeyToB();

    public static class KeyToB{
        private KeyToB() {
        }
    }
}

public class B {
    //The constructor is package visible, it need a non null instance of KeyToB . If someone use new B(null), it will get a RuntimeException
    B(KeyToB instance) {
        if (instance == null){
            throw new IllegalArgumentException("B can only be instanciated by A");
        }
    }
    public void methodB() {     
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:16:45.217

Try to make the class B as an inner class of class A and specify the scope of class B as private

```
class A {
    B b = null;
    public A() {
    b = new B();    
    }
     public void testA() {
       return b.methodB();
     }

    private class B {

         public void methodB () {             
                   // some logic                     
         }  

    }
} 
```

[http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:46:24.763

Use the concept of `Inner Class`.

`Private` members of the `Outer Class` **(ie Enclosing Class)** is **accessible to all the** `Inner Class` **(ie Enclosed Class)** within it, and **vice-versa**

So let `Class A` be the **Outer Class**, and `Class B` as the `private` **Inner Class**

```
public  class A {

        B obj;

        public A() {

        obj = new B(); 

        }

        private class B {

             public void methodB () {             

             }  

        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:14:29.080

A simple solution is to put both `A` and `B` in the sample package. Then make class `B` public but its constructor `package` access or `protected`:

Class `A` would be:

```
package my;
public class A {} 
```

and class `B` would be:

```
package my;
public class B {
   B() {}
} 
```

If class `B` is actually not needed outside the package, you can also even make the class itself a package access one.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:15:22.413

Put the B class in the same package as A, and make its constructor package-protected. Only the classes from the same package will be able to invoke it.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:16:34.320

You can make `B` a inner (static) class of `A` with private constructor.

```
class B {

    public A createA() {
        A a = new A();
        return a;
    }

    public static class A {
        private A() {}
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T07:17:33.213

You can use private static nested class:

```
 public class A {
        private static class B {
            public void methodB () {
                // some logic            
            }
            //other methods
        }

        B obj = null;

        public A() {
            obj = new B();
        }        
        public void methodA () {
            obj.methodB();
         }        
         // other methods
   } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-08T07:21:42.917

```
public class A {

    private class B{

        private B(){

        }       
    }

    public B createB(){
        return new B();
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-08T07:41:22.547

Here is solution, its working ..

```
public class A {

    public static boolean isFromAClass = false;
    B obj = null;

    public A() {
        try {
            isFromAClass = true;
            obj = new B();
            isFromAClass = false;
        } catch (Exception e) {
        }
    }

    public void methodA() {
        System.out.println("methodA");
        obj.methodB();
    }
    // other methods
}

public class B {

    public B () throws Exception {
        if(!A.isFromAClass) {
            throw new Exception();
        }
    }
    public void methodB() {
        System.out.println("methodB");
        // some logic
    }
    //other methods
}

public class Client {

    public static void main(String s[]) throws Exception {
        // Valid Call
        A obj = new A();
        obj.methodA();  // Since methodB is called internally

        // Invalid Call , How to restrict this B object creation here ?
        B objB = new B(); // this line throws Exception
        objB.methodB();

    }
} 
```

A, B, Client class may be in any package.

using public static boolean isFromAClass = false; field, it is achieved.

Only I need to change, instead od generalized Exception, it should be customized Exception as **OutSideAClassBClassInstanceShouldNotBeCreated**

# jquery - jquery如何从外部调用控制器方法

> ID：11859431
> 
> 赞同：1
> 
> 时间：2012-08-08T07:11:38.653
> 
> 标签：jquery, asp.net-mvc

我是 mvc 的新手，但在 webform 方面有很好的经验。当我们通过 jquery 调用任何页面方法时，页面方法必须是静态的，并且必须在 asp.net webform 中具有 webmethod 属性，但是对于 asp.net mvc，当我们通过 jquery 调用任何控制器方法时，该方法可以像公共一样正常方法。所以我只需要知道 jquery 如何从外部调用控制器方法。我用谷歌搜索了这个，但没有找到关于这个问题的讨论。所以请任何有深入了解的人详细讨论这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T14:54:11.970

这就像同步请求任何 ASP.Net-MVC 网页一样。它对同步和异步请求的响应方式基本相同。

它会起作用，因为你有：

*   将控制器方法的返回类型定义为`ActionResult`或任何继承自它的类型，例如`ViewResult`or `JsonResult`，

*   确保方法的返回值是同一类型（当然——否则你会得到编译时错误！）例如：

    ```
     return View(myModel);  //View() returns a ViewResult obejct. 
    ```

*   将此方法放置在从 System.Web.Mvc.Controller 类继承的对象中。

*   在 Global.asax 中映射与请求的 URL 匹配的路由并将其路由到指定的控制器和操作

ActionResult 只定义了一个公共方法签名：

```
public abstract void ExecuteResult(ControllerContext context); 
```

并且框架为 ActionResult 的每个变体定义了一个具体的版本。但是您并不需要真正了解 ExecuteResult() 的内部工作原理。

MVC 框架完成所有协调，同时为您提供许多入口点来重新配置默认值（约定）。它为您设置 ControllerContext、调用 ExecuteResult()、创建所有默认 HTTP 标头（如果需要，您可以从控制器内部修改）等等。

# delphi - Delphi自定义表单图标设置

> ID：11859435
> 
> 赞同：0
> 
> 时间：2012-08-08T07:11:56.103
> 
> 标签：delphi, delphi-xe2

我是德尔福学习者。我有一些德尔福项目。在我所有的项目中，我使用了除 ApplicationIcon 之外的单独的 FormIcon。FormIcon 有 256X256、48X48、32X32 和 16X16 不同尺寸的图标。我注意到在 WinXP 和 Win7 中的“Alt+Tab”显示了一个模糊的 FromIcon。Win7中FormIcon在Taskbar中也是模糊的。我认为这是由于使用 16X16 大小的图标创建的拉伸大小。对此没有自动解决方案。我在互联网上搜索过，我发现我必须打电话

```
SmallIconSize := GetSystemMetrics(SM_CXSMICON);
LargeIconSize := GetSystemMetrics(SM_CXICON); 
```

但我无法理解它何时会被调用以及如何调用？所以请给一个完整的教程，以便它可以普遍实施。我找到了一个使用 IconResource 的解决方案并调用它。但我不喜欢这个解决方案。我希望只使用 FormIcon。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:03:24.820

您需要在其中创建一个`.ico`包含多种尺寸（页面）的图标文件 ( )。最简单的方法是使用像[GreenFish Icon Editor](http://greenfish.tk/)这样的图标编辑器，它将为您完成所有工作。（从现在开始我将其称为`GFIE`。）

这些说明是特定于 GFIE 的，需要能够正确处理多尺寸图标的 Windows 版本；如果您正在运行 Delphi XE2，您可能正在使用一个。我在 Windows 7 64 位上测试了我使用 Delphi 2007（用于测试兼容性）创建的图标。

*   创建要用作图标的图像。最好以尽可能大的分辨率创建它（最好是 256 x 256 或更高）。除了图标，您还可以使用其他格式，例如 PNG 或 BMP。您可以使用 GFIE 或任何其他图像编辑器来创建它。

*   如果还没有，请在 GFIE 中打开图像。`Icon->Create Windows Icon From Image...`从主菜单中选择。

*   在出现的对话框中，检查您想要的图标大小。这是具有默认大小和颜色深度的对话框：

![在此处输入图像描述](../Images/d8deef04b064ef02bf1b4a828cdc6391.png)

*   单击确定，GFIE 将创建图像文件。将其保存到磁盘，然后像往常一样将其用于表单或您的应用程序。（`Project->Options->Application->Icon`对于您的应用程序，或使用 Object Inspector 设置表单的图标。）编译您的项目。

Windows 将根据您系统上的有效设置自动选择合适的图像尺寸；如果您没有创建正确的尺寸，它将选择最接近的匹配并将其调整为正确的尺寸。您可以在 Windows 资源管理器中对此进行测试：切换到您的应用所在的文件夹，然后使用`View`菜单选择`Small Icons`、`Medium Icons`和`Large Icons`，然后观察您的应用程序图标顺利更改为正确的分辨率。

# android - 着色文本视图

> ID：11859436
> 
> 赞同：0
> 
> 时间：2012-08-08T07:12:04.363
> 
> 标签：android, android-layout, android-intent

我正在尝试从 textview 的某个位置突出显示 Textview 的特定颜色。例如，在 textview 字符串中，我想突出显示从 0 到 15 位置的白色和从第 16 到字符串结尾的红色。这可能吗？谁能给我一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:24:16.360

通过使用`Spannable Text`你可以做到

```
Spannable WordtoSpan = new SpannableString("I know just how to whisper");        
WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 0, 15, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tv.setText(WordtoSpan); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:18:21.637

`TextView`有一个属性`textColor`。一旦设置，它将为整个着色`TextView.` 我认为 Android 中没有内置的东西来实现你需要的东西，但一个想法是将你的 long`TextView`从你需要的位置截断成几个小`TextViews`的，并用自己的颜色绘制每个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:23:30.387

```
 Get count of your string 

  int length = YourString.length();
then check with if condtion and set like this.

  TextView tt;
  int color = Integer.parseInt("bdbdbd", 16)+0xFF000000);
  tt.setTextColor(color); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:24:08.610

也许您可以使用 WebView 并将 HTML 代码放入其中...

```
String html = "<div><span style="background-color:red">SOME TEXT</span><span style="background-color:blue">SOME TEXT</span></div>"
wv.loadData(html, "text/html", Encoding.UTF_8.toString()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:24:45.440

我认为没有直接的方法可以在文本视图中设置不同的颜色。

您可以尝试将 html 格式的文本设置为您的文本视图以实现您的目标。例如;

```
yourTextView.setText(Html.fromHtml(yourText)); 
```

在上面的代码中，*yourText*是 html 格式的字符串，您可以根据应用程序逻辑创建 html 文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:26:18.877

你可以试试这个ForegroundColorSpan[例如](http://developer.android.com/reference/android/text/style/ForegroundColorSpan.html)`TextView`-

```
TextView tView = (TextView)findViewById(R.id.text);
tView.setText("Italic, highlighted, bold.", TextView.BufferType.SPANNABLE);
Spannable WordtoSpan = (Spannable) tView.getText();
WordtoSpan.setSpan(new ForegroundColorSpan(0xFFFFFF00), 0, 15, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tView.setText(WordtoSpan); 
```

# ruby-on-rails - 如何处理基于 JSON 的 RESTful 代码中的异常？

> ID：11859437
> 
> 赞同：39
> 
> 时间：2012-08-08T07:12:16.137
> 
> 标签：ruby-on-rails, json, actioncontroller

我有一个“软件即服务”应用程序，它使用通过 RESTful API 通信的 JSON。

简单地说：当使用带有 JSON 数据交换的 RESTful API 时，捕获和报告异常的最佳实践是什么？

我的第一个想法是通过生成一个脚手架来看看 Rails 做了什么，但这显然是不对的。这是一段摘录：

```
class MumblesController < ApplicationController

  # GET /mumbles/1
  # GET /mumbles/1.json
  def show
    @mumble = Mumble.find(params[:id])
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @mumble }
    end
  end

end 
```

在这种情况下，如果 JSON 代码发送一个不存在的 ID，例如

```
http://www.myhost.com/mumbles/99999.json 
```

然后 Mumble.find() 将引发 ActiveRecord::RecordNotFound。ActionController 会捕捉到它并在 HTML 中呈现一个错误页面。但是 HTML 对于期待 JSON 的客户端来说是无用的。

我可以通过将 Mumble.find() 包装在一个`begin ... rescue RuntimeError`块中并呈现 JSON 状态 => :unprocessable_entity 或其他东西来解决这个问题。

但是，如果客户端的应用程序发送无效路径怎么办，例如：

```
http://www.myhost.com/badtypo/1.json 
```

基于 JSON 的应用程序是否应该捕获并返回 JSON 错误？如果是这样，我在哪里可以捕获它而不深入挖掘 ActionDispatch？

所以总的来说，如果出现错误，我是否应该让 ActionController 生成 HTML？感觉不对啊……

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-08-08T07:21:00.667

（我在点击 [发布您的问题] 之前找到了答案。但这也可能对其他人有所帮助......）

## 使用 ActionController 的`rescue_from`

答案是使用 ActionController 的`rescue_from`，如[本指南](http://guides.rubyonrails.org/v2.3.11/action_controller_overview.html#rescue)中所述并[在此处](http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from)记录。特别是，您可以按照以下几行替换默认 404.html 和 500.html 文件的默认呈现：

```
class ApplicationController < ActionController::Base
  rescue_from ActiveRecord::RecordNotFound, :with => :record_not_found

private
  def record_not_found(error)
    render :json => {:error => error.message}, :status => :not_found
  end 
end 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-03-24T08:48:57.367

如果它对任何人有帮助，这就是我为纯粹的 json api 所做的一切：

在您`ApplicationController`的每个特定控制器继承自，添加

```
# app/controllers/api/v1/application_controller.rb

# ...

rescue_from StandardError do |exception|
    render json: { :error => exception.message }, :status => 500
end

# ... 
```

*   主要基于无畏_傻瓜的回答

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-14T13:20:04.727

作为开发人员，您还希望看到跟踪（最好是有用的行，过滤掉 gem）。并使生产中的痕迹不可见：

```
 rescue_from StandardError do |exception|
    # Handle only JSON requests
    raise unless request.format.json?

    err = {error: exception.message}

    err[:backtrace] = exception.backtrace.select do |line|
      # filter out non-significant lines:
      %w(/gems/ /rubygems/ /lib/ruby/).all? do |litter|
         not line.include?(litter)
      end
    end if Rails.env.development? and exception.is_a? Exception

    # duplicate exception output to console:
    STDERR.puts ['ERROR:', err[:error], '']
                    .concat(err[:backtrace] || []).join "\n"

    render :json => err, :status => 500
  end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T07:41:39.287

关于如何保持编写 JSON API 代码的一致标准没有明确的共识，但这是我实践的一些（比你要求的更多）：

1.  保持简单 - 尽量保持安静。自定义方法可以使事情变得快速复杂。
2.  让服务器返回本机错误代码，并使用“rescue_from”进行捕获，然后
3.  在其他情况下，渲染 Rails HTTP 响应代码，客户端应用程序可以专门针对这些代码。

在您的情况下，您可能会发现 Rails respond_to 和 respond_with 可以优雅地处理 html/json/other 响应。即使在您的解决方案中，它仍然会有效地呈现 HTML，但这不是您的客户端应用程序将解释的内容，而是读取 HTTP 标头并获取 HTTP 响应代码，这就是触发您的“rescue_from”的原因.

# perl - 如何从 Perl 中的网页内容中仅获取特定行

> ID：11859438
> 
> 赞同：1
> 
> 时间：2012-08-08T07:12:18.003
> 
> 标签：perl

我正在使用下面的代码来获取网页内容。它工作正常，但我想从中获得特定的线路。任何帮助是极大的赞赏。

```
use strict;
use warnings;
use LWP::Simple;

my $content = get('http://www.w3schools.com/');
print $content;
my @arr;
my $flag = 0;
push (@arr, $content);
#print @arr;

my $find = "HTML 4.01";
for (@arr)
{
  if ($_ =~ /$find/) 
  {
    print "$_\n";
    print "passed\n";
    $flag = 1;
  }
}

if ($flag == 1)
{
  print "Testcase passed";
}
else
{  
  die "Testcases fails";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:00:09.217

`get`将整个内容作为单个值获取。如果你想逐行处理，[`split`](http://p3rl.org/split)首先在[line endings](http://p3rl.org/rebackslash#%5cR)上。

```
use strict;
use warnings;
use LWP::Simple qw(get);

for my $line (split qr/\R/, get('http://www.w3schools.com/')) {
    print $line if $line =~ /\QHTML 4.01/;
} 
```

# c# - 如何使用正则表达式匹配引号中的字符串

> ID：11859442
> 
> 赞同：12
> 
> 时间：2012-08-08T07:12:48.877
> 
> 标签：c#, .net, regex, string

假设我在文本文件中有以下文本

第一个文本

《一些文字》

"124arandom txt 不应该被解析！@

《124 一些文字》

“어떤글”

不应解析此文本

我想检索`Some Text`,`124 Some Text`并`어떤 글`作为匹配的字符串。文本逐行读取。抓住的是，如果它在引号内，它也必须匹配外语。

更新：我发现了一些奇怪的东西。我正在尝试一些随机的东西，发现：

```
string s = "어떤 글"
Regex regex = new Regex("[^\"]*");
MatchCollection matches = regex.Matches(s); 
```

匹配项的计数 = 10 并在内部生成了一些空项（解析的文本在索引 2 中）。这可能就是为什么我在做 Regex.Replace 时总是得到空字符串的原因。为什么会这样？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-08T07:19:07.550

如果您逐行阅读文本，则正则表达式

```
"[^"]*" 
```

将找到所有带引号的字符串，除非它们可能包含转义引号，例如`"a 2\" by 4\" board"`.

要正确匹配这些，您需要

```
"(?:\\.|[^"\\])*" 
```

如果您不希望引号成为匹配的一部分，请使用[环视断言](http://www.regular-expressions.info/lookaround.html)：

```
(?<=")[^"]*(?=")
(?<=")(?:\\.|[^"\\])*(?=") 
```

这些正则表达式，作为 C# 正则表达式，可以这样创建：

```
Regex regex1 = new Regex(@"(?<="")[^\""]*(?="")");
Regex regex2 = new Regex(@"(?<="")(?:\\.|[^""\\])*(?="")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:38:12.393

. 您可以使用正则表达式，然后尝试将其与您想要的任何文本匹配。可以在一个循环或任何你需要的。

```
string str = "\"your text\"";
//check for at least on char inside the qoutes
Regex r = new Regex("\".+\"");
bool ismatch = r.IsMatch(str); 
```

# windows - nodejs本机模块无法在window xp中编译（nodejs v0.8）

> ID：11859443
> 
> 赞同：1
> 
> 时间：2012-08-08T07:12:50.907
> 
> 标签：windows, node.js, module

我为nodejs编写了一个shapelib绑定，它可以在linux中编译，但是当我用VS2005编译它时，我得到了一个错误：

`deps\uv\include\uv-private/uv-win.h(181) : error C2146: syntax error : missing ';' before identifier 'srwlock_'`

谷歌搜索后，我发现 SRW 锁在 Windows XP 下不可用，这就是我收到错误的原因。

我的问题是为什么 nodejs 可以在 Windows XP 中使用？是不是用了SRW Lock？

# c# - 什么是环境类？

> ID：11859452
> 
> 赞同：2
> 
> 时间：2012-08-08T07:13:35.540
> 
> 标签：c#, attributes

定义如下（在 C# 中）的 AmbientClassAttribute 的用途是什么：

```
using System;

namespace Metamodel
{
    [AttributeUsage(AttributeTargets.Class, Inherited = true)]
    public sealed class AmbientClassAttribute : System.Attribute
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:33:54.243

`AmbientClassAttribute`顾名思义，就是一个属性类，这意味着它被用作类定义中的一个属性，如下所示：

```
[AmbientClass]
public class MyClass { } 
```

所有这一切都是添加元数据——它将类标记为 AmbientClass——不管这意味着什么。但是标记自身的行为——添加属性——背后没有任何逻辑，这就是类没有任何成员的原因。它什么也没*做*。它只是将该类标记为环境类。

那有什么*用*呢？它允许其他代码片段，我的类的代码 - 在本例中为 XAML 处理器 - 了解此元数据并相应地处理：“XAML 处理器 [使用它] 确定成员的类型所有者”。

# c# - 如何关闭/交互 ruby w.exe 启动的任务

> ID：11859455
> 
> 赞同：1
> 
> 时间：2012-08-08T07:13:41.120
> 
> 标签：c#, ruby, windows-services

看来我的谷歌搜索技能太差了，我找不到一些问题的答案：

我从 C# 服务调用 ruby​​ 任务。除了服务中的一些东西来获取信息表单注册表，准备任务等。我最后做了：

```
 m_mProcess.StartInfo = new ProcessStartInfo { FileName = Command, Arguments = Argument, WorkingDirectory = WorkDir, CreateNoWindow = true };
      m_mProcess.Start();
      Pid = m_mProcess.Id; 
```

文件名是“ruby.exe”。我尝试了很多东西，以便在我停止服务时向已启动的任务发送 CTRL-SIGNAL-BREAK（请参阅此处导致失败的更多详细信息：[从服务启动 EXE 文件并通过发送停止它信号中断](https://stackoverflow.com/questions/7741820/start-a-exe-file-from-a-service-and-stop-it-by-sending-sigbreak)）。

所以现在我只是用`Process.GetProcessById(Pid).Kill();`.

这只会带来一个问题。我使用 ruby​​ 任务启动了一个瘦服务器，该任务打开并侦听 tcp 端口。当我终止进程时，端口被 Windows 设计阻止了 2-3 分钟（不确定到底有多长时间 - 并且没有发现禁用此功能）。

前传到此为止。现在到我的实际问题:)。

我正在考虑使用`rubyw.exe`而不是`ruby.exe`找到与任务交互的任何方式。我希望可以在不阻塞任何端口的情况下正确关闭/停止 ruby​​w.exe 任务。我已经将服务更改为从 ruby​​w.exe 开始以测试任何副作用或问题，而不是使用 ruby​​.exe（到目前为止还找不到）。但是我仍然必须终止该进程，直到找到正确关闭该进程的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:40:52.717

对于这样的问题，可能有更复杂的解决方案，但我通过管理系统环境变量来简单地处理它。所以当我启动一个脚本时，我给变量值“运行”，如果我想停止它，我的调用程序将它更改为“停止”。脚本监视变量，当它找到一个“停止”时，如果很好地关闭并且就在退出之前将值设置为“停止”，以便调用程序知道脚本确实停止了。这是一个适用于任何环境和任何语言的解决方案，但当然您需要访问 Rubyscripts 来更改它们。

# search - 具有自动完成/建议功能的 Solr 搜索框？

> ID：11859456
> 
> 赞同：4
> 
> 时间：2012-08-08T07:13:47.303
> 
> 标签：search, drop-down-menu, autocomplete, solr, autosuggest

要使用 Solr，我需要我的搜索框在用户输入时提供建议。使用下拉菜单。我怎样才能完成它？任何现有的例子？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:26:11.700

[这](http://blog.trifork.com/2012/02/15/different-ways-to-make-auto-suggestions-with-solr/)是我写的一篇关于提出自动建议的不同方法以及如何做出正确选择的文章。如果您想要更高级和更灵活的东西，那么还有[这篇文章](http://www.cominvent.com/2012/01/25/super-flexible-autocomplete-with-solr/)，其中也包含一个示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:17:11.573

看看 Suggester 组件 - [http://wiki.apache.org/solr/Suggester/](http://wiki.apache.org/solr/Suggester/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T19:17:27.957

有多种方法可以提供自动建议功能。

*单项建议*

此方法先查找第一个字母，然后查找短语中的第一个单词，搜索“men's shirts”必须以“m”开头，然后是“men's”，才能找到“men's shirt”作为响应。

这可以通过使用以下字段类型并使用查询来完成`my little po*`

```
<fieldType name="suggestion_text" class="solr.TextField" positionIncrementGap="100">
       <analyzer>
          <tokenizer class="solr.KeywordTokenizerFactory" />
       </analyzer>
</fieldType> 
```

*多词无序建议*

这种自动填充方法将“衬衫”识别为短语的一部分，例如“男士衬衫”，并将其与“女士衬衫”、“工作衬衫”和其他包含“男士”的短语一起推荐给客户。</p>

这可以通过使用以下字段类型并使用查询来完成`my AND little AND po*`

```
<fieldType name="prefix_text" class="solr.TextField" positionIncrementGap="100">
   <analyzer type="index">
      <tokenizer class="solr.StandardTokenizerFactory" />
   </analyzer>

</fieldType> 
```

*多词有序建议*

第三种方法匹配包含完整短语的子短语的所有内容，只要它的顺序正确，即“men's shir”，而不是“shirts me”。</p>

Solr 没有内置功能来生成它，但我们可以实现自己的令牌过滤器。有关此实施和以前实施的更多信息（以及完整信息） - 请查看此[博客文章](https://blog.griddynamics.com/implementing-autocomplete-with-solr)

# jquery - view.py 中的 JSON

> ID：11859459
> 
> 赞同：0
> 
> 时间：2012-08-08T07:13:57.497
> 
> 标签：jquery, django, json

我正在使用 Django 开发用户界面。我在views.py中做了一些操作。我已经检索到看起来像这样的值。

`results = [{'start_time': '23:51:58', 'id_start_time': datetime.time(23, 51, 58)}, {'start_time': '23:59:04', 'id_start_time': datetime.time(23, 59, 4)}]` 我正在尝试将其保存到一个 json 对象中，以传输回 HTML 页面，在那里我有 JQuery 语法来对这些值执行操作，但由于某种原因它不起作用。我使用的语法是，

导入json

```
json_var = json.dumps(results) 
```

我还使用了以下语法，

```
variable_result = simplejson.dumps(results) 
```

但它们似乎都不起作用，或者我可能不明白它是如何工作的逻辑。如果语法正确，请告诉我如何查看这些存储的对象。如果语法不正确，有人可以告诉我它应该如何使用完美的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:07.887

```
from django.core import serializers

json_serializer = serializers.get_serializer("json")
response =  json_serializer.serialize(list, ensure_ascii=False, indent=2, use_natural_keys=True)
return HttpResponse(response, mimetype="application/json") 
```

请检查[这个](https://stackoverflow.com/a/11470298/513101)或[这个](https://docs.djangoproject.com/en/dev/topics/serialization/#id2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:30:43.213

```
TypeError: datetime.time(23, 51, 58) is not JSON serializable 
```

`json.dumps`在使用or之前先序列化/字符串化日期时间对象`simplejson.dumps`。Python 的集成 json 序列化程序不能与日期时间“类型”一起使用，只能使用内置类型，如`int`, `float`,`str`等。

# c# - Observable.Throw 示例

> ID：11859468
> 
> 赞同：1
> 
> 时间：2012-08-08T07:14:27.163
> 
> 标签：c#, system.reactive

我对 Observables 有点陌生，所以我只是在寻找一个能让我朝着正确方向前进的例子（也许是教程？）。所以就在这里 - 我想创建异步`Observable`并从中`Exception`获取。这是我的例子：

```
 protected IObservable<Tuple<DataPart1, DataPart2>> LoadAllDataFunc(string FileName)
    {
        return Observable.Start<Tuple<DataPart1, DataPart2>>(() =>
        {
            ConfigReaderWriter readerWriter = new ConfigReaderWriter();
            try
            {
                readerWriter.UnpackFile(fileName, out DataPart1, out DataPart2);
                return Tuple.Create(DataPart1, DataPart2);
            }
            catch (Exception exp_gen)
            {
                Observable.Throw<Exception>(exp_gen);
                return null;
            }
        });
    } 
```

问题是我认为我没有`Exception`正确投掷。例如 - 任何订阅者：

```
 internal IObservable<DataPart2> GetProject()
    {
        if (this.GlobalDataPart2 != null)
            return Observable.Return(GlobalDataPart2);

        IObservable<Project> receivedData = null;

        var loadAll = LoadAllDataFunc(this.GlobalFileName).Subscribe(
                data => { receivedData = Observable.Return(data.Item1); },
                (ex) => { Observable.Throw<Exception>(ex); }
            );

        return receivedData;
    } 
```

不会收到`Exception`来自`LoadAllDataFunc`？即使**发生**异常，订阅者也会收到`null`.

那么 - 从 Observable 抛出异常的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T19:08:52.080

只是为了清楚地说明 Observable.Throw 的作用：它返回一个可观察的序列（具有指定的元素类型），其唯一作用是通过调用其 OnError 方法告诉所有观察者有关异常的信息：

```
var err = Observable.Throw<int>(new Exception("Oops!"));
err.Subscribe(_ => {}, ex => { Console.WriteLine(ex.Message); }, () => {});
err.Subscribe(_ => {}, ex => { Console.WriteLine(ex.Message); }, () => {}); 
```

上面的代码将打印 Oops！两次。

正如 Gideon 所提到的，像 Start 这样的操作符会将用户异常传播到 OnError 通道。但是，如果您使用 Observable.Create，请直接与观察者讨论错误情况：

```
var res = Observable.Create<int>(observer =>
{
    return scheduler.Schedule(() =>
    {
        var res = default(int);

        try
        {
            res = ComputationThatMayFail();
        }
        catch (Exception ex)
        {
            observer.OnError(ex);
            return;
        }

        observer.OnNext(res);
        observer.OnCompleted();
    });
}); 
```

事实上，上面显示的代码与 Start 所做的非常接近。（一个区别与使用 AsyncSubject 缓存操作结果有关。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:14:50.367

使用`Observable.Start`时，最好的方法是不捕获异常。 `Observable.Throw`并`Observable.Return`简单地创建可观察的序列；`IObservable`正如您似乎期望的那样，他们没有从内部方法返回做任何特别的事情。这就是为什么您没有`OnError`从最上面的代码中获得调用的原因。对 Observable.Throw 的调用创建了一个 observable，对它不做任何事情，并从函数返回一个空值，然后将其发送到观察者的`OnNext`.

您的第二段代码似乎有相关问题。同样，对 Throw 的调用将无济于事。该订阅者的 OnNext 操作也可能不是您想要的。通常，您将从该函数返回 null ，因为返回`LoadAllDataFunc`时可能不会出现第一个结果`GetProject`（订阅通常不会阻塞。）我猜您想要做的是使用`Select`。

```
return LoadAllDataFunc(this.GlobalFileName)
       .Select(data => data.Item1); //should this be Item2? 
```

# mysqli - 扩展简单类时出现致命错误

> ID：11859474
> 
> 赞同：0
> 
> 时间：2012-08-08T07:14:41.130
> 
> 标签：mysqli, php

我有一条简单的线`class autorization extends mysql`，它会导致*致命错误：在...中的非对象上调用成员函数 close()*在那一行是

```
function __destruct(){
        $this->connection->close();
    } 
```

构造函数

```
$mysqli = new mysqli(*****);
$this->connection = $mysqli; 
```

目前没有其他方法ot class mysql不使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:43:32.203

连接属性未初始化。如果您在`mysql`类中有一个构造函数，请确保您没有通过在`autorization`类中指定一个构造函数来完全覆盖它。这可以通过添加：

```
parent::__constructor( any_params_to_mysql_go_here ); 
```

顺便说一句，您的问题不清楚谁维护连接属性：mysql 类与否？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:26:37.033

出于测试目的尝试

```
function __destruct(){
    if ( !is_object($this->connection) ) {
        echo ' $this->connection is not an object', "\n";
        var_dump($this->connection);
        die;
    }
    if ( !method_exists($this->connection, 'close') ) {
        echo '$this->connection has no method close()', "\n";
        echo get_class($this->connection), "\n";
        die;
    }
    $this->connection->close();
} 
```

# java - 搜索栏小部件未启动可搜索活动

> ID：11859479
> 
> 赞同：9
> 
> 时间：2012-08-08T07:14:56.537
> 
> 标签：java, android, android-manifest, searchbar

我正在尝试使用操作栏中的搜索栏小部件在我的 android 应用程序上实现搜索。

我正在关注

[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html) [http://developer.android.com/guide/topics/ui/actionbar.html#ActionView](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

教程来完成这项工作。

我有两项涉及搜索的活动。SearchBar 活动具有操作栏，AcceptSearch 是我的可搜索活动。即使我声明了哪个活动是可搜索的活动，查询也不会发送到 AcceptSearch 并且活动也没有启动。

我配置了搜索栏，以便在小部件为空时出现搜索栏提示，但提示也永远不会出现。这是我的代码。

**搜索栏**

```
public class SearchBar extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.search_bar);
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    //Inflate the options menu from XML
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);

    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager)getSystemService(Context.SEARCH_SERVICE);
    SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false);        
    return true;        
} 
```

**接受搜索**

```
public class AcceptSearch extends ListActivity
{
@Override
protected void onCreate(Bundle savedInstanceState) 
{       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_splash_screen);

    //Get the intent, verify the action and get the query
    Intent intent = getIntent();
    if(Intent.ACTION_SEARCH.equals(intent.getAction()))
    {
        String query = intent.getStringExtra(SearchManager.QUERY);  

        //Start the search
        doMySearch();
    }
} 
```

**可搜索的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android" 
    android:label="@string/app_label"
    android:hint="@string/search_hint">    
</searchable> 
```

**选项菜单**

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >    
<item
    android:title="Help"
    android:id="@+id/menu_help"
    android:showAsAction="always"
/>
<item
    android:title="Categories"
    android:id="@+id/menu_cats"
    android:showAsAction="always"
/>
<item 
    android:id="@+id/menu_search"
    android:title="Search with Searchlet"
    android:icon="@drawable/ic_action_search"
    android:showAsAction="ifRoom|collapseActionView"
    android:actionViewClass="android.widget.SearchView"/>
</menu> 
```

**显现**

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.searchlet"
    android:versionCode="1"
    android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".SplashScreenActivity"
        android:label="@string/title_activity_splash_screen"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".AcceptSearch">
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data android:name="android.app.searchable"
            android:resource="@xml/searchable"/>
    </activity>

    <activity android:name=".SearchBar"
              android:label="@string/app_name">                  
        <intent-filter>
            <action android:name="com.example.searchlet.CLEARSCREEN" />
            <category android:name="android.intent.category.DEFAULT" />

        </intent-filter>
    </activity>

</application>

</manifest> 
```

我相信这就是重现这种情况所需的所有信息。

谢谢大家。我很欣赏。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-16T14:12:45.273

这些教程似乎缺少一个重要部分。您必须添加`<meta-data android:name="android.app.default_searchable" android:value=".MySearchActivityName" />`内部`<application>`标签。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-27T16:56:10.050

我有一个类似的问题。我正在关注[grokking 的教程](http://www.grokkingandroid.com/android-tutorial-adding-search-to-your-apps/)，但活动从未打开。我尝试了适合我的 Indrek 解决方案。

您应该确保在正确的父项下拥有正确的元数据。元数据

```
<meta-data
     android:name="android.app.default_searchable"
     android:value=".NameSearchActivity" /> 
```

应该在申请中。跟随元数据

```
<meta-data
     android:name="android.app.searchable"
     android:resource="@xml/searchable" /> 
```

应该在 AndroidManifest.xml 中的搜索活动参数下。

在搜索活动中，我按照之前链接的教程中所说的来管理活动堆栈。我希望这个解决方案适用于每个有同样问题的人。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-10T19:56:17.813

保罗·阿兰迪斯·马丁内斯，谢谢。您的解决方案运行良好，带有活动堆栈的教程很有帮助。`<application>`我将这个元数据放入部分：

```
<meta-data
 android:name="android.app.default_searchable"
 android:value=".NameSearchActivity" /> 
```

我注意到@Override onQueryTextSubmit 方法应该返回 false 以开始可搜索的活动。否则虚拟键盘上的 searchButton 不起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-13T14:09:14.643

对于仍然遇到此问题的其他任何人，我也遇到了此问题，如果 Searchable Activity 扩展 AppCompatActivity 活动将无法启动，我将其更改为扩展 Activity 并且它有效。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-02-05T04:08:16.440

我遇到了`SearchView`不启动的`SearchActivity`问题，结果是包/目录问题。

如果 与托管您`SearchableActivity`的 不在同一目录中，则需要更改：`Activity``SearchView`

```
searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName())); 
```

至

```
searchView.setSearchableInfo(searchManager.getSearchableInfo(new ComponentName(this, SearchableActivity.class))); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-03T08:32:41.367

您在清单文件的“.SearchBar”活动中缺少元数据，该活动指向“.AcceptSearch”活动。

将以下元数据添加到“.SearchBar”活动：

```
<!-- search widget target activity-->
        <meta-data android:name="android.app.default_searchable"
                    android:value=".AcceptSearch" /> 
```

这是“.SearchBar”活动清单的更新代码。

```
<activity android:name=".SearchBar"
              android:label="@string/app_name"> 
        <!-- search widget target activity-->
        <meta-data android:name="android.app.default_searchable"
                android:value=".AcceptSearch" />
        <intent-filter>
            <action android:name="com.example.searchlet.CLEARSCREEN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-12T09:08:56.767

searchable.xml 中的提示和标签是引用，而不是硬编码字符串。

```
 <searchable xmlns:android="http://schemas.android.com/apk/res/android"
      android:hint="@string/search_hint"
      android:label="@string/app_name"/> 
```

这应该如何在清单中声明包含 SearchView 小部件的 Activity

```
<activity
    android:name="ACTIVITY PATH WHICH CONTAINS SEARCHVIEW WIDGET">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <meta-data
            android:name="android.app.default_searchable"
            android:value=".SearchableActivity" />

</activity> 
```

清单中可搜索活动的声明。

```
 <activity android:name=".SearchableActivity">

        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>

        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable" />

 </activity> 
```

# iis-7 - IIS 行为不同

> ID：11859480
> 
> 赞同：0
> 
> 时间：2012-08-08T07:14:58.027
> 
> 标签：iis-7, internet-explorer-9

我有一个我发布的小网站，然后我创建了一个虚拟目录来托管它。

现在在 IE9 中，当我尝试使用此“http://localhost/mysite/login.aspx”地址访问我的网站时，它运行良好。

但是当我尝试使用这个“http://102.12.103.12/mysite/login.aspx”地址访问我的网站时，它的行为并不完美。然后是CSS的问题。

尽管使用 Chrome/Firefox（最新版本）中的两个地址访问我的网站效果很好。

有人可以解释一下 IE9 的异常行为吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:46:27.337

请检查您在 css 标签中的 src 路径。请参考下面的链接。

[http://blogs.msdn.com/b/ieinternals/archive/2011/03/27/http-406-not-acceptable-php-ie9-standards-mode-accepts-only-text_2f00_css-for-stylesheets.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/03/27/http-406-not-acceptable-php-ie9-standards-mode-accepts-only-text_2f00_css-for-stylesheets.aspx)

# mysql - 如何在现有的mysql表中进行分区？

> ID：11859481
> 
> 赞同：2
> 
> 时间：2012-08-08T07:15:02.083
> 
> 标签：mysql, database

我有一个名为 tbl_rtdata 的表。我删除了该表中的所有分区并以以下方式创建新分区。

```
ALTER TABLE tbl_rtdata  PARTITION BY RANGE (Month(fld_date))

SUBPARTITION BY HASH (Day(fld_date)) SUBPARTITIONS 12(   
PARTITION Apr_0 VALUES LESS THAN (2012-05-01),
PARTITION May_1 VALUES LESS THAN (2012-06-01),    
PARTITION Jun_2 VALUES LESS THAN (2012-07-01),  
PARTITION Jul_3 VALUES LESS THAN (2012-08-01),
PARTITION Aug_4 VALUES LESS THAN (2012-09-01),
PARTITION Sep_5 VALUES LESS THAN (2012-10-01),
PARTITION Oct_6 VALUES LESS THAN (2012-11-01),  
PARTITION Nov_7 VALUES LESS THAN (2012-12-01),
PARTITION Dec_8 VALUES LESS THAN MAXVALUE ); 
```

但我得到一个错误： `VALUES LESS THAN value must be strictly increasing for each partition.`

如果我在查询中删除子分区，则会显示分区“Apr_0”的错误 VALUES 值必须具有 INT 类型

我应该怎么做才能从中恢复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T11:48:26.143

我找到了非常简单的答案，使用 to_days 函数

```
ALTER TABLE tbl_rtdata  PARTITION BY RANGE (Month(fld_date))
(   
PARTITION p_Apr VALUES LESS THAN (TO_DAYS('2012-05-01')),
PARTITION p_May VALUES LESS THAN (TO_DAYS('2012-06-01')), 
PARTITION p_Jun VALUES LESS THAN (TO_DAYS('2012-07-01')),  
PARTITION p_Jul VALUES LESS THAN (TO_DAYS('2012-08-01')),
PARTITION p_Aug VALUES LESS THAN (TO_DAYS('2012-09-01')),
PARTITION p_Sep VALUES LESS THAN (TO_DAYS('2012-10-01')),
PARTITION p_Oct VALUES LESS THAN (TO_DAYS('2012-11-01')),  
PARTITION p_Nov VALUES LESS THAN (TO_DAYS('2012-12-01')),
PARTITION p_Dec VALUES LESS THAN MAXVALUE ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:18:46.830

我认为`MySQL < 5.5` 尝试这个不支持：Manual [here](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)

```
ALTER TABLE tbl_rtdata PARTITION BY RANGE COLUMNS (fld_date) (
  PARTITION Apr_0 VALUES LESS THAN ('2012-05-01'),
  PARTITION May_1 VALUES LESS THAN ('2012-06-01'),
  PARTITION Dec_8 VALUES LESS THAN (MAXVALUE)
  ); 
```

# css - CSS 边框不环绕浮动项目

> ID：11859483
> 
> 赞同：1
> 
> 时间：2012-08-08T07:15:04.777
> 
> 标签：css

我正在尝试创建一个两列布局。左栏是导航菜单，右栏是内容。

问题是，包裹所有内容的边框仅包裹右栏内容，而左栏导航菜单在视觉上超出了 div 边框。

JSfiddle：http: [//jsfiddle.net/ekeWz/](http://jsfiddle.net/ekeWz/)

有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:16:31.200

嘿，现在像这样给你的css中的**#wrapper** `overflow:hidden;`

```
#wrapper {
overflow:hidden;} 
```

[**现场演示**](http://jsfiddle.net/ekeWz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:18:13.463

你可以通过给`overflow:hidden;`你的父 div 或`#wrapper`div来得到你想要的结果

[http://jsfiddle.net/ekeWz/6/](http://jsfiddle.net/ekeWz/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:19:49.217

我认为这就是你想要的：

```
#wrapper {
    width: 600px;
    float: left;
    border: 1px solid black;}
#left_menu {
    float: left;
    border-right: 1px solid blue;}
    width: 25%;} 
```

一旦你用left_menu中的浮动打破了div的流动，你必须用相同的浮动调整父div的流动。

# android - 调用 onCreate、onPause、onResume 等的代码在哪里

> ID：11859484
> 
> 赞同：1
> 
> 时间：2012-08-08T07:15:08.480
> 
> 标签：android, android-activity, android-ui, android-framework

据我了解，onCreate、onPause、onResume 等都是在主 UI 线程中执行的。如果其他一些线程（android 框架代码的一部分）将这些调用作为消息附加到 UI 线程的队列，这是可能的。我想知道框架中的哪个线程/进程和哪个类将这些消息附加到 UI 线程的队列中？应该有一些 'handleMessage' 函数来执行 'myActivity.onPause'。我找不到它。如果我的理解有误，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T11:35:32.133

入住。`startActivityLocked()`_`ActivityStack.java`

小路 -`framework/base/services/java/com/android/server/am/ActivityStack.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:22:39.593

ActivityThread.H 是暂停活动的处理程序。在 H Handler PAUSE_ACTIVITY 下是为要暂停的活动发布的消息

# c++ - STL map.find 返回不正确的元素

> ID：11859485
> 
> 赞同：2
> 
> 时间：2012-08-08T07:15:12.227
> 
> 标签：c++, stl, maps

我有以下内容，它似乎正在返回地图中的第一个即第 0 个节点。我无法弄清楚这段代码有什么问题。

map.find 总是返回第一个 (0th) 元素。无论在“插入”调用中构造什么输入。

我对 STL 有点陌生，因此将不胜感激。我在这里缺少什么吗？

```
class numbers{
public :
    unsigned int data;
    numbers(unsigned int value)    {
        data=value;
    }
};
bool operator<(numbers a, numbers b){
    return (a.data<b.data)?a.data:b.data;
}

class names{
public:
    string s;
    names(int value)    {
        char arr[10];
        itoa(value, arr, 10);
        s=arr;
    }
    void print(){cout<<s;}
};

void main(){
    map<numbers, names> bigmap;
    for(int i=0;i<1000;i++)
        bigmap.insert(pair<numbers,names>( numbers(i), names(i)));
    cout<<"Inserted!";
    map<numbers, names>::iterator p;
    p=bigmap.find(numbers(10));
    p->second.print();//output is always 0
    getchar();
    //Large Lookup test
} 
```

我在这里缺少什么吗？DI 需要预先分配对象，然后提供给插入操作。我不认为 STL 映射需要预先分配它们。谢谢，在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T07:17:08.420

您的比较运算符是错误的。`true`除非`a`是`0`并且小于 RHS，或者`b`是`0`并且大于或等于 LHS ，否则您的实现将始终返回。只返回比较的结果。

```
bool operator<(numbers a, numbers b){
    return (a.data<b.data);
} 
```

# javascript - jQuery MouseMove：内容淡出？

> ID：11859486
> 
> 赞同：0
> 
> 时间：2012-08-08T07:15:17.043
> 
> 标签：javascript, jquery, pagination, timeout, mousemove

我有全屏背景图像，我想通过网站左右两侧的“上一个”和“下一个”箭头进行控制。

**html**

```
<nav id="pagination">
    <a id="prev" href="#"></a>
    <a id="next" href="#"></a>
</nav> 
```

**css (css)**

```
#pagination {   
    display:none;
    position:relative;
    z-index:1;

    a { 
        display:block;
        position:fixed;
        top:45%;
        width:100px;
        height:100px;

        &#next {
            right:20px;
        }

        &#prev {
            left:20px;
        }
    }
} 
```

所以这正是我想要的。我有一个在页面左侧垂直居中的上一个图像链接和一个在页面右侧垂直居中的下一个图像链接。

我有以下 JS (jquery) 到fadeIn() 和fadeOut() 这个导航…</p>

```
var c, p = $('#pagination');
$(document).on('mousemove',function() {
        p.fadeIn('fast');
        clearTimeout(c);
        c = setTimeout(function() {
            p.fadeOut('fast');
        }, 1000);
    }); 
```

这工作得很好，但是`#pagination`当我目前在分页链接上时也会淡出（）。是否可以从这种行为中排除链接本身？我希望我的解释不会太奇怪。再说一遍：现在我的分页就像著名的视频播放器一样工作。不移动鼠标时，分页淡出 - 移动鼠标时，分页再次淡入。

但是，当我当前位于两个链接（`#prev`或`#next`）之一并且不移动鼠标时，“#pagination”也会淡出。我不希望这种情况发生。因此，当鼠标悬停在两个分页链接上时，分页不应淡出。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:21:09.047

尝试这个。

```
 var c;
 $('#pagination').('mousemove',function() {
    $(this).fadeIn('fast');
    clearTimeout(c);
    c = setTimeout(function() {
        p.fadeOut('fast');
    }, 1000);
}); 
```

# css - 为什么悬停在 IE9 中的自定义引导按钮上不起作用？

> ID：11859494
> 
> 赞同：1
> 
> 时间：2012-08-08T07:15:34.820
> 
> 标签：css, twitter-bootstrap, internet-explorer-9

这是我自定义的按钮的 CSS。

我正在使用 Twitter Bootstrap v2.0.4 中的按钮样式。悬停在 Firefox 和 Chrome 中完美运行，但不适用于 IE9。Boostrap 中的标准按钮都在 IE9 中正确悬停，但不是我的自定义按钮。

如何让这个按钮在 IE9 中悬停？

```
.btn-custom, .btn-custom:hover{
    color:#f8f8f8;
    text-shadow: 1px 1px 1px #5B5E82;
}
.btn-custom {
    background-color: #286B95;
    background-image: -moz-linear-gradient(top, #499bce, #276b95);  
    background-image: -ms-linear-gradient(top, #499bce, #276b95);
    background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#499bce), to(#276b95));
    background-image: -webkit-linear-gradient(top, #499bce, #276b95);   
    background-image: -o-linear-gradient(top, #499bce, #276b95);
    background-image: linear-gradient(top, #499bce, #276b95);
    background-repeat:repeat-x;
    border-color: #276b95 #276b95 #235E83;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    *background-color: #276b95;
    filter:
        progid:DXImageTransform.Microsoft.gradient(startColorstr='#499bce', endColorstr='#276b95', GradientType=0)
        progid:DXImageTransform.Microsoft.shadow(color='#0000FF',direction=45,strength=1);      
}
.btn-custom:hover, .btn-custom:active, .btn-custom[disabled] {
    background-color:#276b95;
    *background-color:#1F5678;
}
.btn-custom:active{
    background-color:#1F5373 \9;
} 
```

# ios - 如何使用 MFMailComposeViewController 进行自定义消息传递

> ID：11859500
> 
> 赞同：0
> 
> 时间：2012-08-08T07:15:46.953
> 
> 标签：ios, email, mfmailcomposeviewcontroller

我需要实现一个功能，我希望允许用户通过电子邮件共享应用程序内容，但我们需要从服务器发送电子邮件，而不是使用设备配置的电子邮件。

我的问题是，是否可以使用 MFMailComposeViewController 并获取发送按钮处理程序，而实际上不允许作曲家发送电子邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:22:50.683

我不认为这种行为是苹果想要的。我将实现一个表单并将此表单提交到您的服务器并在您的服务器上生成一封电子邮件。我认为破解 MFMailComposeViewController 所花费的时间超过了实现您自己的电子邮件表单的时间。

# arrays - 给定一个记录数组，如何从每个记录中获取一个表示字段的数组？

> ID：11859504
> 
> 赞同：6
> 
> 时间：2012-08-08T07:15:53.703
> 
> 标签：arrays, delphi, delphi-2010, record, projection

我必须翻译一些 Fortran 90 代码并找到一个有趣的语言功能。

例如，他们定义了以下类型和动态数组变量：

```
TYPE WallInfo
  CHARACTER(len=40) :: Name
  REAL              :: Azimuth
  REAL              :: Tilt
  REAL              :: Area
  REAL              :: Height
END TYPE WallInfo

TYPE(WallInfo), ALLOCATABLE, DIMENSION(:) :: Wall 
```

稍后在代码中，他们调用了一个函数：

```
CALL HeatFlow(Wall%Area, Wall%Azimuth) 
```

作为一个 Delphi 程序员，这让我有点吃惊，因为 Wall 是一个记录数组！

从例程中的用法可以看出，Fortran 可以将记录数组中的字段投影为自己的数组。

```
SUBROUTINE HeatFlow( Area, Azimuth )
  REAL, INTENT(IN), DIMENSION(:) :: Area
  REAL, INTENT(IN), DIMENSION(:) :: Azimuth 
```

有谁知道是否有办法用 Delphi 做到这一点（我使用的是 2010 版）？

我可以编写一个函数来将记录值提取为数组，但这有点乏味，因为我必须为每个字段编写一个专用例程（而且有很多）。

我希望 Delphi 2010 中有一些我错过的语言功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T00:04:35.860

使用扩展 RTTI，可以创建一个通用函数，该函数将数组和字段名称作为输入，并使用数组的 RTTI 仅提取该字段的值并使用它们创建一个具有正确数据类型的新数组。

以下代码在 XE2 中适用于我：

```
uses
  System.SysUtils, System.Rtti;

type
  FieldArray<TArrElemType, TFieldType> = class
  public
    class function Extract(const Arr: TArray<TArrElemType>; const FieldName: String): TArray<TFieldType>;
  end;

class function FieldArray<TArrElemType, TFieldType>.Extract(const Arr: TArray<TArrElemType>; const FieldName: String): TArray<TFieldType>;
var
  Ctx: TRttiContext;
  LArrElemType: TRttiType;
  LField: TRttiField;
  LFieldType: TRttiType;
  I: Integer;
begin
  Ctx := TRttiContext.Create;
  try
    LArrElemType := Ctx.GetType(TypeInfo(TArrElemType));
    LField := LArrElemType.GetField(FieldName);
    LFieldType := Ctx.GetType(TypeInfo(TFieldType));
    if LField.FieldType <> LFieldType then
      raise Exception.Create('Type mismatch');
    SetLength(Result, Length(Arr));
    for I := 0 to Length(Arr)-1 do
    begin
      Result[I] := LField.GetValue(@Arr[I]).AsType<TFieldType>;
    end;
  finally
    Ctx.Free;
  end;
end; 
```

.

```
type
  WallInfo = record
    Name: array[0..39] of Char;
    Azimuth: Real;
    Tilt: Real;
    Area: Real;
    Height: Real;
  end;

procedure HeatFlow(const Area: TArray<Real>; const Azimuth: TArray<Real>);
begin
  // Area contains (4, 9) an Azimuth contains (2, 7) as expected ...
end;

var
  Wall: TArray<WallInfo>;
begin
  SetLength(Wall, 2);

  Wall[0].Name := '1';
  Wall[0].Azimuth := 2;
  Wall[0].Tilt := 3;
  Wall[0].Area := 4;
  Wall[0].Height := 5;

  Wall[1].Name := '6';
  Wall[1].Azimuth := 7;
  Wall[1].Tilt := 8;
  Wall[1].Area := 9;
  Wall[1].Height := 10;

  HeatFlow(
    FieldArray<WallInfo, Real>.Extract(Wall, 'Area'),
    FieldArray<WallInfo, Real>.Extract(Wall, 'Azimuth')
    );
end; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T09:34:06.780

我将其发布为答案，因为评论有点过于有限，无法表达这一点。

这个答案试图解释 FORTRAN 和 Delphi 中数组和记录的内存布局的差异，并修改了Todd [Grigsby](https://stackoverflow.com/users/549088/todd-grigsby)的[答案](https://stackoverflow.com/a/11873556/29290)和[Remy Lebeau的](https://stackoverflow.com/users/65863/remy-lebeau)[答案](https://stackoverflow.com/a/11874993/29290)（我都赞成）。

FORTRAN 和其他一些以计算为中心的语言按[列主要顺序](http://en.wikipedia.org/wiki/Row-major_order#Column-major_order)存储嵌套数组。Delphi 和许多其他语言都使用[行大命令](http://en.wikipedia.org/wiki/Row-major_order#Row-major_order)。

从内存的角度来看，一条记录只不过是一个字段数组，它们：

*   有名字而不是索引
*   可能有不同的类型

对于计算密集型操作，当您的算法有利于列时，存储嵌套数组列的主要顺序是有意义的。与行主要订单相同。因此，在循环中，您需要将[索引的顺序与存储的顺序相匹配](http://blogs.uct.ac.za/blog/big-bytes/archives/2010/09/)。

鉴于 FORTRAN 中的此记录和数组定义：

```
TYPE WallInfo
  CHARACTER(len=40) :: Name
  REAL              :: Azimuth
  REAL              :: Tilt
  REAL              :: Area
  REAL              :: Height
END TYPE WallInfo

TYPE(WallInfo), ALLOCATABLE, DIMENSION(:) :: Wall 
```

以及 Delphi 中的功能等效定义：

```
type
  WallInfo = record
    Name: array[0..39] of Char;
    Azimuth: Real;
    Tilt: Real;
    Area: Real;
    Height: Real;
  end;

var
  Wall: array of WallInfo; 
```

和一个由 3 个 WallInfo 元素组成的数组，这就是内存布局的外观（它们都是连续的内存区域，我将它们分成几行以保持可读性）：

在 FORTRAN 中：

```
Name[0,0]...Name[0,39], Name[1,0]...Name[1,39], Name[2,0]...Name[2,39],
Azimuth[0], Azimuth[1], Azimuth[2],
Tilt[0], Tilt[1], Tilt[2],
Area[0], Area[1], Area[2],
Height[0], Height[1], Height[2], 
```

在德尔福：

```
Name[0,0]...Name[0,39], Azimuth[0], Tilt[0], Area[0], Height[0],
Name[1,0]...Name[1,39], Azimuth[1], Tilt[1], Area[1], Height[1],
Name[2,0]...Name[2,39], Azimuth[2], Tilt[2], Area[2], Height[2], 
```

所以这个 FORTRAN 电话：

CALL HeatFlow(Wall%Area, Wall%Azimuth)

只会将指向 Area[0] 和 Azimuth[0] 内存位置的指针以及这些内存区域的长度传递给函数。

在 Delphi 中，这是不可能的，所以你必须

1.  构建新的区域和方位角阵列
2.  从名为 Wall 的 WallInfo 记录实例数组中的信息中复制它们
3.  将它们发送到函数
4.  如果这些是 var 参数：将两个数组中的更改复制回 Wall

[Todd Grigsby](https://stackoverflow.com/a/11873556/29290)和[Remy Lebeau](https://stackoverflow.com/a/11874993/29290)使用直接的 Delphi 代码或 Delphi 记录 RTTI 在他们的答案中展示了前三个步骤。
第 4 步的工作方式类似。

两种解决方案都使用 Delphi 2009 中引入的泛型。
[在 Delphi 2010 之前，记录上的 RTTI 非常少](http://wiert.me/2009/08/24/answered-stackoverflow-on-parsing-a-record-of-unknown-structure-use-classes-with-published-properties-and-the-delphi-streaming-mechanism/)），因此您得到了两个答案的正确 Delphi 版本。

注意（再次）：将您的算法从 FORTRAN 转换为 Delphi 时，请确保注意数组中的循环和其他索引，因为列/行的主要变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T21:36:32.000

要回答您的问题，不，没有语言构造或便捷方法可以将记录数组中的单个列拆分为自己的简单数组。

我会推荐如下内容：

```
function SplitColumn( RecordArray : Array of {recordtype} ) : Array of {columntype};
var
  column : array of {type};
  x : Integer;
begin
  setlength( result, high( RecordArray ) + 1 );
  for x := 0 to high( RecordArray ) do
    result[ x ] := RecordArray[ x ].{columnname};
end; 
```

那就是如果你想使用动态数组。就个人而言，如果您要移植它，我会使用 List 和 List，如下所示：

```
type
   TWallList = class( TList<TWallInfo> );
   TDoubleList = class( TList<Double> );

function SplitColumn( WallList : TWallList; AreaList, AzimuthList : TDoubleList ); 
var
  x : Integer;
begin
  for x := 0 to RecList.Count-1 do
  begin
    AreaList.add( RecordArray[ x ].Area );
    Azimuth.add( RecordArray[ x ].Azimuth );
  end;
end; 
```

# java - java-gearman-client - 产生越来越多的线程

> ID：11859508
> 
> 赞同：3
> 
> 时间：2012-08-08T07:16:16.703
> 
> 标签：java, multithreading, gearman

我编写了一个应用程序，它使用[Gearman](http://www.gearman.org)将作业（客户端）提交给一个或多个工作人员，尤其是[java-gearman-service](http://code.google.com/p/java-gearman-service/) 0.6.2。

现在我正在运行一个无限循环，每 10 秒检查一次是否需要向 Jobserver 提交新作业。这背后有一些逻辑。请注意，我只想提交它们，而不是得到结果或回调。

基本上我所做的是：

```
Gearman gearman = Gearman.createGearman();
GearmanClient client = gearman.createGearmanClient();
client.addServer(gearman.createGearmanServer("someip",somePort);
while(true) {
    // get the jobs to submit from the application logic
    client.submitBackgroundJob("functionname","dataBytes");
    // sleep for a few seconds.
} 
```

这会产生越来越多的线程，直到消耗太多内存以致`OutOfMemory`抛出异常。

我试图实例化`Gearman`并`GearmanClient`在循环中 - 并通过以下方式关闭它们：

```
client.shutdown();
gearman.shutdown(); 
```

在提交了所有作业之后，但这会导致：

> 28 [gearman-1] INFO gearman - [127.0.1.1:4730]：已连接
> 
> ```
>  634 [main] FATAL main - Exception! 
> ```
> 
> java.lang.NullPointerException
> 
> 在 org.gearman.impl.util.GearmanUtils.toString（未知来源）
> 
> 在 org.gearman.impl.serverpool.AbstractConnectionController.onDisconnect（未知来源）
> 
> 在 org.gearman.impl.server.remote.GearmanServerRemote$InnerGearmanConnectionHandler.onDisconnect（未知来源）
> 
> 在 org.gearman.impl.core.GearmanConnectionManager$SocketHandlerImpl.onDisconnect（未知来源）
> 
> 在 org.gearman.impl.reactor.SocketImpl.closeConnection（未知来源）
> 
> 在 org.gearman.impl.reactor.SocketImpl.close（未知来源）
> 
> 在 org.gearman.impl.core.GearmanConnectionManager$SocketHandlerImpl$Connection.close（未知来源）
> 
> 在 org.gearman.impl.server.remote.GearmanServerRemote.shutdown（未知来源）
> 
> 在 org.gearman.impl.GearmanImpl.shutdown（未知来源）
> 
> 在 MyApplication.start（ClientManager.java:clientShutdownLine）
> 
> 31 [gearman-1] INFO gearman - [127.0.1.1:4730]：断开连接
> 
> java.lang.IllegalStateException
> 
> 在 org.gearman.impl.client.GearmanJobReturnImpl.eof（未知来源）
> 
> 在 org.gearman.impl.client.ClientImpl.failTo（未知来源）
> 
> 在 org.gearman.impl.client.ClientImpl.onClose（未知来源）
> 
> 在 org.gearman.impl.client.ClientImpl.access $700（未知来源）
> 
> 在 org.gearman.impl.client.ClientImpl$InnerConnectionController.onClose（未知来源）
> 
> 在 org.gearman.impl.serverpool.AbstractConnectionController.closeServer（未知来源）
> 
> 在 org.gearman.impl.serverpool.AbstractConnectionController.onDisconnect（未知来源）
> 
> 在 org.gearman.impl.server.remote.GearmanServerRemote$InnerGearmanConnectionHandler.onDisconnect（未知来源）
> 
> 在 org.gearman.impl.core.GearmanConnectionManager$SocketHandlerImpl.onAccept（未知来源）
> 
> 在 org.gearman.impl.reactor.NioReactor$1.completed（未知来源）
> 
> 在 org.gearman.impl.reactor.NioReactor$1.completed（未知来源）
> 
> 在 sun.nio.ch.Invoker.invokeUnchecked（未知来源）
> 
> 在 sun.nio.ch.Invoker$2.run（未知来源）
> 
> 在 sun.nio.ch.AsynchronousChannelGroupImpl$1.run（未知来源）
> 
> 在 java.util.concurrent.ThreadPoolExecutor.runWorker（未知来源）

我怎样才能避免 Gearman-Java-Service 一段时间后产生这么多线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:08:55.457

尝试更新到最新版本。我想你可能会看到这些问题：

*   [http://code.google.com/p/java-gearman-service/issues/detail?id=32&can=1](http://code.google.com/p/java-gearman-service/issues/detail?id=32&can=1)
*   [http://code.google.com/p/java-gearman-service/issues/detail?id=33&can=1](http://code.google.com/p/java-gearman-service/issues/detail?id=33&can=1)

另请注意，[submitBackgroundJob](http://java-gearman-service.googlecode.com/svn/javadoc/org/gearman/GearmanClient.html#submitBackgroundJob%28java.lang.String,%20byte%5B%5D%29)是一个异步调用，并且在后台发生了一些排队。如果您提交作业的速度超过了客户端的速度，则会发生内存不足异常。鉴于您似乎在等待几秒钟，可能并非如此，但试试这个：

```
Gearman gearman = Gearman.createGearman();
GearmanClient client = gearman.createGearmanClient();
client.addServer(gearman.createGearmanServer("someip",somePort);
while(true) {
    // get the jobs to submit from the application logic
    GearmanJobReturn jobReturn = client.submitBackgroundJob("functionname","dataBytes");
    while(!jobReturn.isEOF()) {jobReturn.poll();}
} 
```

GearmanJobReturn将在到达文件末尾之前轮询[后台](http://java-gearman-service.googlecode.com/svn/javadoc/org/gearman/GearmanJobReturn.html)作业的作业句柄（或错误消息）。这也将允许在您提交下一个作业之前完全提交作业。

不要在提交之间关闭服务。这会减慢一切。任何已建立的连接都将关闭，您需要重新建立连接以提交下一个作业。

# javascript - 如何使用 jQuery 向第一个孩子添加类？

> ID：11859509
> 
> 赞同：15
> 
> 时间：2012-08-08T07:16:20.163
> 
> 标签：javascript, jquery

如何在具有特定索引的容器上添加类元素？

我现在正在尝试这个应该影响第一个元素（无论如何都不起作用）

```
$('#resultsBox li:first-child').addClass('aaaa'); 
```

但我希望能够更改具有索引的容器中任何元素的类。

EG 如果我想修改 index = 2 的元素。

```
<div id="resultsBox">
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</div> 
```

应该变成：

```
<div id="resultsBox">
<ul>
<li></li> // Index 0
<li></li> // Index 1
<li class="selected"></li> // Index 2
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-08T07:17:40.200

使用[**:first**](http://api.jquery.com/first-selector/)选择器：

```
$('#resultsBox li:first').addClass('aaaa'); 
```

对于第三个元素选择，您可以使用[**each()**](http://api.jquery.com/index/)方法： [这里是 jsFiddle。](http://jsfiddle.net/MXLH8/4/)

```
$('ul li').each(function(i) {
    if ( i === 2 ) {
       $(this).addClass('aaaa');
    }
}); 
```

或者您可以使用 Jamiec 和 MrThys 提到的**[eq](http://api.jquery.com/each/)**方法来做到这一点：但是当事情变得复杂时，每种方法都会非常有用。

```
$('#resultsBox li').eq(2).addClass('aaaa'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T07:18:10.747

实现这一目标的最干净的方法是：

```
$('#resultsBox li').eq(2).addClass('selected'); 
```

.eq 方法的文档可以在这里找到：http: [//api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T07:19:17.283

使用 :first 选择器或 :nth-child 选择器。我提到 :nth-child 选择器只是为了以防你想将类添加到除第一个之外的任何东西。如果需要，您还可以在没有 javascript 的纯 CSS 中使用 :nth-child

```
$("#resultBox li:nth-child(1)").addClass('aaa'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-24T03:44:52.557

对于选择 ul

```
$("#resultsBox ul").first().addClass( "aaaa" ); 
```

对于选择第一个 li

```
$("#resultsBox ul li").first().addClass( "aaaa" ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:17:43.790

[`eq selector`](http://api.jquery.com/eq-selector/)

```
$('#resultsBox li:eq(2)').addClass('aaaa'); 
```

或者[`eq function`](http://api.jquery.com/eq/)

```
$('#resultsBox li').eq(2).addClass('aaaa'); 
```

# box2d-iphone - ApplyLinearImpulse 方法

> ID：11859515
> 
> 赞同：0
> 
> 时间：2012-08-08T07:16:52.077
> 
> 标签：box2d-iphone, vimpulse

在 transformPosition 方法中，我们可以为特定的精灵应用角度，如下所示；

```
[sprite transformPosition:ccpAdd(sprite.position,
ccpMult(ccpForAngle(angle), ANY_VELOCITY))]; 
```

是否可以在 ApplyLinearImpulse 方法的参数中使用角度和速度以及如何使用？下面是该方法的正常声明。我们可以用我们上面使用的某个角度和速度来替换那个 b2Vec2(90, 0) 吗？

```
body->ApplyLinearImpulse(b2Vec2(90, 0), body->GetWorldCenter()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T12:35:27.727

当然，您可以做一些与您在上面所做的非常相似的事情：

```
CGPoint angleVector = ccpForAngle(angle);
body->ApplyLinearImpulse(b2Vec2(angleVector.x*ANY_VELOCITY, angleVector.y*ANY_VELOCITY), body->GetWorldCenter()); 
```

# javascript - 替代 $.mobile.changePage 或 $.mobile.changePage(back)

> ID：11859516
> 
> 赞同：0
> 
> 时间：2012-08-08T07:16:56.083
> 
> 标签：javascript, jquery-mobile

我有这个功能： 单击：单击`function() { $.mobile.changePage('#Page');}`列表元素后，无论调用该函数的位置如何，我都需要准确返回到我所在的位置。有点像`$.mobile.changePage(back);` 提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:55:40.723

如果您只想回到历史的上一页；`history.go(-1);`应该这样做。

# php - Drupal模块mysql错误

> ID：11859517
> 
> 赞同：0
> 
> 时间：2012-08-08T07:16:57.223
> 
> 标签：php, drupal, drupal-6

在某些站点的模块中，我有下一个代码

```
function q_cart_add($node) {
    global $user;
    //drupal_set_title('Добавление товара в корзину');
    drupal_set_title('Товар добавлен в корзину');
    if (!user_access('add to cart'))
        return '<p>У вас не достаточно прав для добавления в корзину</p>';
    if ($node -> type != 'kartochka')
        return '<p>В корзину можно положить только товар</p>';
    $added = false;
    if ($user -> uid) {
        $added = db_result(db_query('SELECT `added` FROM {q_cart} WHERE `uid` = %d, `nid` = %d', $user -> uid, $node -> nid));
        if (!$added) {
            db_query('INSERT INTO {q_cart} (`uid`, `nid`, `added`) VALUES (%d, %d, %d)', $user -> uid, $node -> nid, time());
        }
    } else {
        foreach (isset($_COOKIE['q_cart']) && ($cart = json_decode($_COOKIE['q_cart'])) ? $cart : array() as $item)
            if ($item -> nid == $node -> nid) {
                $added = true;
                break; 
```

但是在 drupal(6) 管理面板的报告中我有错误：

```
 You have an error in your SQL syntax; check the manual that corresponds to your MySQL 
server version for the right syntax to use near &#039; `nid` = 806&#039; at line 1 query: 
SELECT `added` FROM q_cart WHERE `uid` = 1, `nid` = 806 in file... 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:08:53.643

问题是第一个查询的这一部分：

```
WHERE `uid` = %d, `nid` = %d 
```

条件需要用`AND`or分隔`OR`：

```
SELECT `added` FROM {q_cart} WHERE `uid` = %d AND `nid` = %d 
```

# java - 如果写入较少，休眠将成为开销

> ID：11859519
> 
> 赞同：3
> 
> 时间：2012-08-08T07:17:04.320
> 
> 标签：java, performance, hibernate, jakarta-ee

我们正在开发一个与数据仓库交互并检索数据进行分析的应用程序。

在这种情况下，休眠会成为性能开销，因为对数据仓库的写入将非常少。

意图是在业务层和数据层之间具有松散耦合。

对于这个要求，Spring JDBC 是否比使用 ORM 更理想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T11:37:13.573

For more reads, I second using Spring JDBC with caching. I would first try caching at the Database level and if that is not performant enough then move to application level caching.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:59:10.250

ORM 仅在您实际计划将结果用作对象时才有用。如果你把它放在一个合理的缓存（ehcache）后面，性能应该可以与 JDBC 相媲美。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:43:49.470

Hibernate 可能不如经过调整的 Spring JDBC 高效，但它更易于使用，因此可以提高您的工作效率。此外，它可能不会成为您应用程序的瓶颈！

它很容易设置，所以我建议您试一试，并感谢您节省使用它的时间！这可能比使用 JDBC 节省的几毫秒更有价值......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T18:32:13.443

在大多数读取应用程序的情况下，Hibernate 性能更好。请注意，由于以下原因，您可能仍然存在性能问题：
A. 对象代理
的大量使用 B. SQL 生成可能很好，但没有优化 - 我强烈建议她在配置中打开 show_sql = true 属性如果您选择休眠解决方案，请仔细监控某些基准测试中的 SQL 调用。

为了克服 B - 请考虑通过 hibernate 调用存储过程并将结果映射到对象（使用 Hibernate 进行对象映射，而不是 SQL 生成），从这个意义上说，Hibernate 将在行为上更接近 Spring-JDBC。
此外，考虑使用 Hibernate 的缓存状态来提高性能 - 不确定这在您的情况下是否可行 - a。查询缓存
B. 一级缓存（在会话范围内）
c．二级缓存 - 在应用程序范围内
我还建议进行适当的设计，并让您的 DAL 尽可能松散耦合，因此如果 Hibernate 性能不佳，您可以轻松切换到其他替代方案，例如作为 Spring-JDBC

# java - 如何计算多个线程完成执行所需的总时间？

> ID：11859534
> 
> 赞同：5
> 
> 时间：2012-08-08T07:17:40.417
> 
> 标签：java, multithreading, response, runnable

我正在从我的代码中启动多个线程（大约 1000 个）。它们是从 while 循环调用的可运行线程。如何计算所有线程完成执行所需的总时间？

此外，我正在打开一个数据库连接并有一组查询，我正在为这些查询启动这些线程（1 个线程用于 1 个查询）。我什么时候关闭连接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T07:26:06.297

我会使用 ExecutorService

```
long start = System.nanoTime();
ExecutorService service = Executors.newWhatEverPool();
for(loop)
   service.submit(new MyRunnable());

service.shutdown();
service.awaitTermination(1, TimeUnit.HOUR); // or longer.    
long time = System.nanoTime() - start;
System.out.printf("Tasks took %.3f ms to run%n", time/1e6); 
```

完成后关闭连接。资源的创建者也关闭它是一种常见的模式。例如，如果主线程创建连接，它可以在所有线程完成后关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T07:22:17.063

使用[此处](http://www.javamex.com/tutorials/threads/CountDownLatch.shtml)提到的 CountDownLatch 。

```
public class StopLatchedThread extends Thread {
  private final CountDownLatch stopLatch;

  public StopLatchedThread(CountDownLatch stopLatch) {
    this.stopLatch = stopLatch;
  }
  public void run() {
    try {
      // perform interesting task
    } finally {
      stopLatch.countDown();
    }
  }
}

public void performParallelTask() throws InterruptedException {
  CountDownLatch cdl = new CountDownLatch(10);
  for (int i = 0; i < 10; i++) {
    Thread t = new StopLatchedThread(cdl);
    t.start();
  }
  cdl.await();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:21:31.640

您需要另一个线程等待这 1000 个线程完成工作，您可以使用 CountDownLatch 来完成，但您需要知道您拥有的线程的确切数量 - 在您的情况下为 1000。

像这样的东西：

```
public class LatchTest {
    public static void main(String[] args) throws Exception {

        final CountDownLatch latch = new CountDownLatch(100);

        long startTime = System.nanoTime();
        for(int i=0;i<100;++i){
            new Thread(new Runnable() {
                public void run() {
                    //Simulate some work
                    latch.countDown();
            }).start();
        }

        // Main Thread will wait for all Threads to finish
        latch.await();
        long finishTime = System.nanoTime();
        System.out.println("Have passed : " + (finishTime - startTime));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T07:28:36.963

为什么不将它们全部放入[Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)中，然后依次在每个结果[Future](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)上调用 get() ？

一旦最后一个线程完成，那么您将调用最后一个 get() 并且您可以为完成操作计时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T07:49:16.193

通常，由于上下文切换，您无法准确测量时间执行。如果您有 1000 个线程，则会对所有时间测量产生重大影响。不过，如果您可以省略高精度的时间测量，您可以使用 CountDownLautching 原语来同步线程启动和线程完成：

```
 public static void main( String[] args ) throws InterruptedException {
    final int THREAD_COUNT = 10000;
    long startTime;
    long endTime;
    final CountDownLatch startBarierr = new CountDownLatch(THREAD_COUNT + 1);
    final CountDownLatch finishBarierr = new CountDownLatch(THREAD_COUNT);
    for (int i = 0; i < THREAD_COUNT; i++){
        final int iterationIndex = i;
        new Thread(new Runnable() {
            @Override
            public void run() {
                startBarierr.countDown();
                System.out.println("Thread " + iterationIndex + " started");
                try {
                    startBarierr.await();
                    //do some work in separate thread
                    int iterationCount = (int)(0.8*Integer.MAX_VALUE);
                    for(int i = 0; i < iterationCount; i++){

                    }
                    System.out.println("Thread " + iterationIndex + " finished");
                    finishBarierr.countDown(); //current thread finished, send mark
                } catch (InterruptedException e) {
                    throw new AssertionError("Unexpected thread interrupting");
                }
            }
        }).start();
    }
    startBarierr.countDown();
    startBarierr.await(); //await start for all thread
    startTime = System.currentTimeMillis(); //and note time
    finishBarierr.await(); //wait each thread
    endTime = System.currentTimeMillis();   //note finish time
    System.out.println("Time(ms) - " + (endTime - startTime));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:24:31.210

可能最简单的方法是将这些线程放在一个列表中，并每隔一段时间检查它们中的任何一个是否还活着（Thread.isAlive() 方法），将死线程从列表中删除。重复直到列表为空。缺点是它会给你一些误差范围的时间。

另一种解决方案是将“父”控制器注入这些线程，然后让它们在完成后报告。同样的逻辑也适用——我们可以从列表（或其他类型的集合）中拉出一个已完成的线程，直到我们的列表为空。这种方法更精确，但需要在线程中添加额外的逻辑。

# javascript - onmouseover, onmouseout,onclick 函数 Javascript

> ID：11859536
> 
> 赞同：1
> 
> 时间：2012-08-08T07:17:43.663
> 
> 标签：javascript, asp.net, html, css

我的页面有一个菜单，这里是 Onmouseover，Onmouseout img

```
<img id='wits' class="wits1" src="Images/MenuInWhite/ContactButton1.png" onmouseover="this.src='Images/mouseover/ContactButton2.png'"
        onmouseout="this.src='Images/MenuInWhite/ContactButton1.png'"  /><br />
    <img id='city' class="city1" src="Images/MenuInWhite/ActivitiesButton1.png" onmouseover="this.src='Images/mouseover/ActivitiesButton2.png'"
        onmouseout="this.src='Images/MenuInWhite/ActivitiesButton1.png'" /><br />
    <img id='organise' class="city1" onmouseout="this.src='Images/MenuInWhite/CruisesButton1.png';"
        onmouseover="this.src='Images/mouseover/CruisesButton2.png';" src="Images/MenuInWhite/CruisesButton1.png" /><br />
    <img id='people' class="city1" onmouseout="this.src='Images/MenuInWhite/HomeButton1.png';"
        onmouseover="this.src='Images/mouseover/HomeButton2.png';" src="Images/MenuInWhite/HomeButton1.png" /><br /> 
```

每当我将鼠标放在图像上时，图像必须更改，当我将鼠标移开时，必须将其更改为原始图片，它工作正常，，

我想知道每当我选择任何图像时该怎么做，该图像必须更改为在图像上移动鼠标时显示的图像。当我选择任何其他图像时，必须进行相同的过程，但必须将先前更改的图像更改回原始图片。

请帮我解决这个问题，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:25:37.577

这是一个纯 JavaScript 解决方案，可能会有所帮助

```
function isMSIE() 
{
   var ie7 = 
   (document.all && !window.opera && window.XMLHttpRequest) ? true : false;
   return ie7;
}
function getParent(element, depth) 
{
   var rVal = element;
   if (isMSIE()) {
       for (i = 0; i < depth; i++)
       rVal = rVal.parentElement;
   }
   else {
        for (i = 0; i < depth; i++)
        rVal = rVal.parentNode;
    }
    return rVal;
}
function clicked(sender)
{
    var parent   = getParent(sender, 1);
    var imgs = parent.getElementsByTagName("IMG");
    for(i=0; i<imgs.length; i++)
    {
       if (imgs[i] != sender) {
          imgs[i].src = 'Images/MenuInWhite/ContactButton1.png';
          imgs[i].onmouseout = 
            function () { this.src = 'Images/MenuInWhite/HomeButton1.png'; };
       }
       else {
          imgs[i].src = 'Images/MenuInWhite/HomeButton1.png';
          imgs[i].onmouseout = null;
       }
        if(imgs[i]!=sender)
          imgs[i].src = 'Images/MenuInWhite/HomeButton1.png';
    }
} 
```

* * *

```
<div>
   <img id='wits' class="wits1" 
      src="Images/MenuInWhite/ContactButton1.png"    
      onmouseover="this.src='Images/mouseover/ContactButton2.png'"
      onmouseout="this.src='Images/MenuInWhite/ContactButton1.png'"
      onclick="clicked(this);"  /><br />
   // Just add this onclick="clicked(this);" on each img
</div> 
```

# javascript - blockUI 在进行 ajax 调用的 setInterval 中被删除

> ID：11859538
> 
> 赞同：0
> 
> 时间：2012-08-08T07:17:52.300
> 
> 标签：javascript, jquery

我有以下代码片段，其中每隔 5 秒进行一次 ajax 调用，以检查响应是否为真。UI 将被阻止，直到收到的响应为真，当响应为真时，UI 将被解锁。我正在使用 Jquery blockUI v1.0 插件来阻止 UI：

```
$.fn.suspendResumeonConfirm=function(caseNumber,correlationId){ 
var contents=$('<table style="width:240px;"><tr><td align="center" style="padding: 5px;">Waiting for Response</td></tr><tr><td  align="center" style="padding: 5px;">'+
        '<div id="testProgress"  style="height:10px;background:#f1f1f1;"></div></td></tr><tr><td  align="center" style="padding: 5px;">'+
        '<label class="remainingTime">  </label> Seconds Remaining</td></tr></table>');
        contents.find('div#testProgress').progressbar("destroy").progressbar({value:0}).css("border","1px solid #e4e4e4");
        var progressUpdate=$("<div id='progressUpdate'></div>").append(contents);           
        var timeOut=0,
        response=false;         
        $("body").blockUI(true,{message:progressUpdate,css:{width:250}});
        var interval=setInterval(function() {               
            timeOut++;
            if(timeOut % 5==0){
                var param='entityNumber='+caseNumber+'&correlationId='+correlationId+'&entityType=Case&status=REQ';
                $(this).cAjax('POST','CheckRequestStatus.action',param,false,false,'','Error', true);
                response=strResponseText;
                //$(this).cAjax('POST', 'CheckRequestStatus.action',param,true,true,'serviceCallBack','Error', true,{timeOut:timeOut});
                $('#testProgress').progressbar("option", "value", (timeOut/serviceAlterationTimeout)*100);
                $("div#progressUpdate label.remainingTime").text((serviceAlterationTimeout-timeOut));
            }
            if(timeOut==60){
$('#testProgress').progressbar("option", "value", (timeOut/serviceAlterationTimeout)*100);
                $("div#progressUpdate label.remainingTime").text((serviceAlterationTimeout-timeOut));           
                $("body").blockUI(false);                   
                clearInterval(interval);
 }
        }
        , 1000);
};

$.fn.cAjax =  function(cType, cUrl, cData, cCache, cAsync, cFn, cAlert, cPrData,     functionArguments)
{
var self = $(this).eq(0),
    xhrObj = {};
try{
    strResponseText = "";
    xhrObj = $.ajax({
        type: cType,
        url: cUrl,
        data: cData,
        cache: cCache,
        async: cAsync,
        processData:cPrData? true : false,
        // ; Event will be called on Ajax SUCCESS
        success: function(data, textStatus, XMLHttpRequest) {
            if  ((typeof data).toUpperCase() == "OBJECT"){  
                data = JSON.stringify(data);
            }
                if(data.indexOf('Session Expired') != -1){
                    $(window.location).attr('href',  'Dashboard.action');
                }
                else if(data =="System error")
                {
                    var btnObject = {
                            "OK": function()   {$(this).dialog('close');}};
                      $(this).removeLoadingMsg().cDialog('customErrorDialog',sysErrorObj[0],sysErrorObj[1],false,true,null,null,btnObject,false,null,false,"slide","center");
                }
                else{
                    if(cFn && cFn != '')
                    {
                        if(typeof functionArguments ==   'boolean' || functionArguments)
                            self[cFn](data,   functionArguments);       //calling function by jquery Object notation    
                        else
                            self[cFn](data);
                    }
                    strResponseText = data;
                    return data;
                }
                return false;
    },

        // ; Event will be called on Ajax ERROR
        error:function (xhr, ajaxOptions, thrownError){
                var btnObject = {
                        "OK": function()  {$(this).dialog('close');}},errLabelCon = "";

                errLabelCon = $(this).errorCode(xhr.status);
                errLabelCon = errLabelCon.split(",");
                //abort handling. Callback function will receive   first argment as string "ABORT" and passed arguments if any
                if(ajaxOptions == "abort")
                {
                    if(cFn && cFn != '')
                    {
                        if(typeof functionArguments == 'boolean' || functionArguments)
                            self[cFn]("ABORT", functionArguments);      //calling function by jquery Object notation    
                        else
                            self[cFn]("ABORT");
                    }
                }
                else if(errLabelCon.length == 2)
                // replaced removeLoadingMsg with blockUI so that   current loading should be remove not all
                       $(this).blockUI(false).cDialog(null,errLabelCon[0],errLabelCon[1],false,true,null,null,btnObject,false,null,false,"slide","center");
    },

        // ; Event will be called on Request Complete
        complete:function(XMLHttpRequest,textStatus){
                //; alert("Complete:  "+strResponseText+"  "+textStatus+" "+XMLHttpRequest);
                if(strResponseText.indexOf('Session Expired') != -1){
                    $(window.location).attr('href', 'Dashboard.action');
                }
                if(strResponseText=="System error")
                {
                    var btnObject = {
                            "OK": function(){$(this).dialog('close');}};
                    $(this).removeLoadingMsg().cDialog('customErrorDialog',sysErrorObj[0],sysErrorObj[1],false,true,null,null,btnObject,false,null,false,"slide","center");
                }
    }
    });
    //store the XHR object so that it can be used while ajax in progress
    $(this).data("xhr", xhrObj);
}
catch(e){
    var btnObject = {
            "OK": function(){$(this).dialog('close');},
            "Click to Login": function(){$(this).dialog('close');$(window.location).attr('href', 'LogonFwdAction.action');}};
    var exception = sysErrorObj[1];

    exception += "<br />"+e;

    $(this).cDialog('customErrorDialog',sysErrorObj[0],exception,false,true,null,null,btnObject,false,null,false,"slide","center");
}
}; 
```

问题是在 setInterval 中进行 ajax 调用后，UI 会在下一个时间间隔内自动解锁。但是，如果我删除 setInterval 中的 ajax 调用，blockUI 仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:24:07.170

我不太明白为什么 ui 会过早地解除阻塞，但是我已经尝试重构和整理代码，并认为结果更容易理解。

我的主要目标是避免必须通过`cFn`和`functionArguments`到达`cAjax()`。这是通过传递一个`jQuery.Deferred`对象来实现的，允许`cFn`在`suspendResumeonConfirm()`.

```
$.fn.suspendResumeonConfirm = function(caseNumber,correlationId) {
    var contents = $('<table style="width:240px;"><tr><td align="center" style="padding: 5px;">Waiting for Response</td></tr><tr><td align="center" style="padding: 5px;">'+
        '<div id="testProgress" style="height:10px;background:#f1f1f1;"></div></td></tr><tr><td align="center" style="padding: 5px;">' +
        '<label class="remainingTime">  </label> Seconds Remaining</td></tr></table>');
    contents.find('div#testProgress').progressbar("destroy").progressbar({value:0}).css("border", "1px solid #e4e4e4");
    var progressUpdate = $("<div id='progressUpdate'></div>").append(contents);
    var timeOut = 0,
        pollInterval = 5,//seconds
        $$ = {//cache of jQuery objects
            body: $("body"),
            testProgress: $('#testProgress'),
            remainingTime: $("div#progressUpdate label.remainingTime")
        };
    $$.body.blockUI(true, { message:progressUpdate, css:{width:250} });
    function unblockUI() {
        $$.body.blockUI(false);
        clearInterval(interval);
    }
    var param = {'entityNumber':caseNumber, 'correlationId':correlationId, 'entityType':'Case', 'status':'REQ'};
    var interval = setInterval(function() {
        var xhr = $(this).data("xhr");//previous xhr object
        if(xhr) {//if there was a previous iteration
            if(xhr.abort) {
                xhr.abort();//abort
            }
            else if(xhr.reject) {
                xhr.reject();//or reject
            }
        }
        timeOut += pollInterval;
        var def = $.Deferred();
        var xhr = $(this).cAjax('POST', 'CheckRequestStatus.action', param, false, false, true, def);
        $(this).data("xhr", xhr);
        $.when(def).done(function(data) {
            //do other stuff here??
            if(data ...) {//test for a successful response
                unblockUI();
            }
            else {
                $(this).removeLoadingMsg();//??
            }
        }).fail(function(action) {
            switch(action) {
                case "abort":
                    $(this).whatever("ABORT", ...);
                break;
                case 'Session Expired':
                    window.location.href = 'Dashboard.action';
                break;
                case 'System error':
                    $(this).removeLoadingMsg();
                break;
            }
        });
        $$.testProgress.progressbar("option", "value", (timeOut/serviceAlterationTimeout)*100);
        $$.remainingTime.text((serviceAlterationTimeout-timeOut));
    }, pollInterval * 1000);
    setTimeout(unblockUI, serviceAlterationTimeout);//timeout
};

$.fn.cAjax = function(cType, cUrl, cData, cCache, cAsync, cPrData, def) {
    var xhrObj,
        btnObject = {
            "OK": function() {
                $(this).dialog('close');
            }
        };
    try {
        return $.ajax({
            type: cType,
            url: cUrl,
            data: cData,
            cache: cCache,
            async: cAsync,
            processData: cPrData ? true : false,
            success: function(data, textStatus, XMLHttpRequest) {
                if((typeof data).toUpperCase() == "OBJECT") {
                    data = JSON.stringify(data);
                }
                if(data.indexOf('Session Expired') != -1) {
                    def.reject('Session Expired');
                }
                else if(data == "System error") {
                    $(this).cDialog('customErrorDialog', sysErrorObj[0], sysErrorObj[1], false, true, null, null, btnObject, false, null, false, "slide", "center");
                    def.reject('System error');
                }
                else {
                    def.resolve(data);
                }
            },
            error: function (xhr, textStatus, thrownError) {
                var errLabelCon = $(this).errorCode(xhr.status).split(",");
                if(textStatus !== "abort" && errLabelCon.length == 2) {
                    $(this).cDialog(null, errLabelCon[0], errLabelCon[1], false, true, null, null, btnObject, false, null, false, "slide", "center");
                }
                def.reject(textStatus);
            }
        });
    }
    catch(e) {
        var btnObject2 = $.extend(btnObject, {
            "Click to Login": function() {
                $(this).dialog('close');
                $(window.location).attr('href', 'LogonFwdAction.action');
            }
        });
        var exception = sysErrorObj[1] + "<br />" + e;
        $(this).cDialog('customErrorDialog', sysErrorObj[0], exception, false, true, null, null, btnObject2, false, null, false, "slide", "center");
        return $.Deferred().promise();//dummy promise instead of xhr
    }
}; 
```

*仅经过测试以检查没有解析错误*

尽管代码在结构上应该是健壮的，但它在几个地方是不完整的，所以你需要完成它并让它完全按照你的意愿去做。

# ssl - JRuby Heroku 宝石

> ID：11859549
> 
> 赞同：4
> 
> 时间：2012-08-08T07:18:30.413
> 
> 标签：ssl, heroku, gem, openssl, jruby

是否可以将 Heroku 客户端与 JRuby 一起使用？

我已经成功安装了所有依赖项的heroku gem，但我无法登录。

```
PS D:\Projects\myproject> heroku login
Enter your Heroku credentials.
Email: myname@mydomain.com
Password (typing will be hidden): mypassword

 !    Heroku client internal error.
 !    Search for help at: https://help.heroku.com
 !    Or report a bug at: https://github.com/heroku/heroku/issues/new

    Error:       write would raise (OpenSSL::SSL::SSLError) (Excon::Errors::SocketError)
    Backtrace:   org/jruby/ext/openssl/SSLSocket.java:626:in `syswrite_nonblock'
                 C:/JRuby/lib/ruby/1.9/openssl/buffering.rb:374:in `write_nonblock'
                 C:/JRuby/lib/ruby/gems/shared/gems/excon-0.15.5/lib/excon/socket.rb:117:in `write'
                 C:/JRuby/lib/ruby/gems/shared/gems/excon-0.15.5/lib/excon/connection.rb:223:in `request_kernel'
                 C:/JRuby/lib/ruby/gems/shared/gems/excon-0.15.5/lib/excon/connection.rb:101:in `request'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-api-0.3.2/lib/heroku/api.rb:60:in `request'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-api-0.3.2/lib/heroku/api/login.rb:5:in `post_login'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/auth.rb:76:in `api_key'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/auth.rb:185:in `ask_for_credentials'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/auth.rb:217:in `ask_for_and_save_credentials'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/auth.rb:80:in `get_credentials'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/auth.rb:41:in `login'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/command/auth.rb:22:in `login'
                 org/jruby/RubyBasicObject.java:1667:in `__send__'
                 org/jruby/RubyKernel.java:2060:in `send'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/command.rb:179:in `run'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/lib/heroku/cli.rb:25:in `start'
                 C:/JRuby/lib/ruby/gems/shared/gems/heroku-2.30.2/bin/heroku:16:in `(root)'
                 org/jruby/RubyKernel.java:1050:in `load'
                 C:\JRuby\bin\heroku:23:in `(root)'

    Command:     heroku login
    Version:     heroku-gem/2.30.2 (java) ruby/1.9.3

PS D:\Projects\myproject> 
```

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:40:38.397

我认为我在 OpenSSL 和 JRuby (ruby 1.9.2) 不兼容方面遇到了同样的问题。如果您只想登录，请尝试

> JRUBY_OPTS=--1.8 heroku 登录

这将使用 jruby 的 1.8.7 版本的 ruby​​ 实现，它应该与 OpenSSL 一起使用

编辑：对于窗户

> 设置 JRUBY_OPTS=--1.8
> 
> 登录
> 
> 设置 JRUBY_OPTS=--1.9

编辑：

作为

> heroku-toolbelt/2.30.5 (java) ruby​​/1.9.2

我不再有这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:45:01.140

注意：Heroku 最近[宣布了官方的 jRuby 支持](https://blog.heroku.com/archives/2012/12/13/run_jruby_on_heroku_right_now/)，并且有一个[关于将现有应用程序迁移到 jRuby 的专门帮助文档](https://devcenter.heroku.com/articles/moving-an-existing-rails-app-to-run-on-jruby)。

# c# - 从对象初始化器访问属性

> ID：11859553
> 
> 赞同：4
> 
> 时间：2012-08-08T07:18:46.813
> 
> 标签：c#, .net, object-initializers

我有以下`Person`课程

```
class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string FullName
    {
        get { return FirstName + " " + LastName; }
    }
    public IEnumerable<Person> Children { get; set; }
} 
```

我可以像这样初始化它：

```
Person p = new Person() { FirstName = "John", LastName = "Doe" }; 
```

但是是否可以`Person`在对象初始化程序中引用另一个属性，所以我可以做这样的事情？

```
Person p = new Person()
{
    FirstName = "John",
    LastName  = "Doe",
    Children  = GetChildrenByFullName(FullName);
}; 
```

**编辑**

就问题而言，引用的属性不必根据其他属性计算，但可以在构造函数中设置其值。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:35:16.340

你不能这样做：

```
void Foo()
{ 
  String FullName = "";

  Person p = new Person()
  {
    FirstName = "John",
    LastName  = "Doe",
    Children  = GetChildrenByFullName(FullName); // is this p.FullName 
                                                 // or local variable FullName?
  };
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T07:42:44.247

不。当在对象初始化器中时，您不在类的实例中。换句话说，您只能访问可以设置的公开的公开属性。

明确地：

```
class Person
{
    public readonly string CannotBeAccessed;
    public  string CannotBeAccessed2 {get;}
    public void CannotBeAccessed3() { }

    public string CanBeAccessed;
    public string CanBeAccessed2 { set; }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T14:13:26.340

我认为您可以通过使用私有局部变量支持您的属性来解决您的问题。例如

```
class Person {
    private string m_FirstName = string.Empty;
    private string m_LastName = string.Empty;

    public string FirstName {
        get { return m_FirstName; }
        set { m_FirstName = value; }
    }

    public string LastName {
        get { return m_LastName; }
        set { m_LastName = value;}
    }

    public string FullName {
         get { return m_FirstName + " " + m_LastName; }
    }

    public IEnumerable<Person> Children { get; set; }
} 
```

假设对象初始化程序按照您在初始化代码中指定的顺序设置属性（并且应该），则局部变量应该是可访问的（在内部由 FullName 只读属性）。

# c# - C# postgres 数据库连接

> ID：11859558
> 
> 赞同：0
> 
> 时间：2012-08-08T07:19:00.763
> 
> 标签：c#, database, postgresql

我已经设法连接到数据库，但我使用以下代码进行连接。

```
static void Main(string[] args)
{
    using (NpgsqlConnection conn= new NpgsqlConnection(
        "Host=xxx.xx.xx.xxx;Port=5432;User Id=Admin;Password=postgres.1;Database=Test1;")) 
    {
        conn.Open();

        NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM TABLE1", conn);

        try
        {
            NpgsqlDataReader dr = cmd.ExecuteReader();
            while (dr.Read())
            {
                for (int i = 0; i < dr.FieldCount; i++)
                {
                    Console.Write("{0} \t", dr[i]);
                }
                Console.WriteLine();
            }
            dr.Close();
        }
        finally
        {
            conn.Close();
        }
    }

    Console.ReadLine();
} 
```

显然我必须以某种方式为数据库中的表生成类并使用它们来连接而不是使用`NpgsqlCommand cmd = new NpgsqlCommand("SELECT * FROM TABLE1", conn);`. 已经尝试使用 DbLinq 的 DbMetal，但我收到错误消息：

> DbMetal：服务器已关闭连接。

我一直在研究这个，但我没有发现任何有用的东西。

如果可以的话请帮忙。有点急

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:25:56.190

我认为你需要一个 NpgsqlDataAdapter 和一个 DataSet

```
 DataSet ds = new DataSet();
            NpgsqlDataAdapter da = new NpgsqlDataAdapter(); 
            da.SelectCommand = cmd;
            da.Fill(ds);
            return ds; 
```

现在您的 DataSet 包含一个表 (ds.Tables[0]) 和该表中所有选定的行

```
 foreach(DataRow r in ds.Tables[0].Rows)
                 Console.WriteLine(r["ColumnName"].ToString()); 
```

# iphone - 我如何向 Apple 提交文件以拒绝使用受保护的第 3 方材料？

> ID：11859559
> 
> 赞同：0
> 
> 时间：2012-08-08T07:19:00.653
> 
> 标签：iphone, submit, document

我收到了拒绝：

> 8.5：使用受保护的第 3 方材料（商标、版权、商业机密或其他专有内容）需要进行书面权利检查，必须根据要求提供

我现在已经拿到了文件，但是在我上传了我的应用程序之后，我找不到任何地方可以提交我的文件。有人知道怎么提交吗？

我知道在我上传我的应用程序之前我可以提交文件，但是我想知道在我已经上传我的应用程序之后如何提交我的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:33:40.633

一个想法：告诉他们你有审查笔记中的文档。在 iTunes Connect 中，单击您的应用程序。然后单击查看详细信息按钮。然后单击“版本信息”旁边的编辑按钮。在“Review Notes”文本框中，告诉他们您有文档并将根据要求提供。或者将文档放在某处的 Web 服务器上并输入 URL。

另一个想法：[向应用审查委员会提交上诉](https://developer.apple.com/appstore/contact/appreviewboard/index.html)，并告诉他们您在“上诉理由”文本框中有文档。

# java - 如何在 JFreeChart 中设置条形样式

> ID：11859560
> 
> 赞同：1
> 
> 时间：2012-08-08T07:19:01.847
> 
> 标签：java, jfreechart, bar-chart

![在此处输入图像描述](../Images/5e84225e2501d90e67ecfa3eb159a228.png)

'One' 是 JFreeChart 中的默认样式。

我想要'两个'风格（酒吧）。

请问我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:45:57.870

我没试过，但也许有

```
chart.getPlot().setDrawingSupplier(supplier); 
```

使用 DrawingSupplier 的子类重新定义`getNextFillPaint()`; 或使用

```
 new DefaultDrawingSupplier(java.awt.Paint[] paintSequence, java.awt.Paint[] fillPaintSequence, java.awt.Paint[] outlinePaintSequence, java.awt.Stroke[] strokeSequence, java.awt.Stroke[] outlineStrokeSequence, java.awt.Shape[] shapeSequence) 
```

# jquery - 嵌套敲除模板绑定

> ID：11859563
> 
> 赞同：-2
> 
> 时间：2012-08-08T07:19:08.483
> 
> 标签：jquery, knockout.js, knockout-2.0

```
 $.ajax({
                    url: "/survey/surveyQuestions",
                    success: function (questionsData) {
                        $.ajax({
                            url: "/survey/surveyOptions",
                            success: function (optionsData) {
                                alert(questionsData.length);
                                for (var i = 0; i < questionsData.length; i++) {
                                    QuestionsScript.Question = ko.mapping.fromJS(questionsData[i]); 
                                    ko.applyBindings(QuestionsScript, document.getElementById("innerDiv")); 
                                    for (var j = 0; j < optionsData.length; j++) { 
                                               if (optionsData[j].QuestionId = questionsData.QuestionId[i]) {
                                                     OptionsScript.Option = ko.mapping.fromJS(optionsData[j]);
                                                     ko.applyBindings(OptionsScript, document.getElementById(" ... here i nee to give options template table Id....."));
                                                  }
                                        }
                                }

                            }
                        });

                    }
                }); 
```

我需要像下面这样绑定

```
Question 1
       Option1
       Option2
       Option3
Question 2
       Option1
       Option2
       Option3
Question 3
        Option2
        Option3 
```

我的模板是

```
<script id="QuestionsScript" type="text/x-jquery-tmpl">
<div data-bind="attr:{id :QuestionId}"  class="question">
    <h2><label data-bind="text :QuestionText" /></h2>
    <div class="option">
        <table data-bind="attr:{id : QuestionId} , template: {name:'OptionsScript', foreach: Option}">
            <tbody>
            </tbody>
        </table>
    </div>
</div>
</script>
<script id="OptionsScript" type="text/x-jquery-tmpl">
<tr>
    <td>{{= OptionText}}</td>
</tr>
</script> 
```

正如我所说的我想要的输出和模板，我不知道为什么我不能得到那个。所以请为此提供任何示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:49:03.030

我认为你可以这样做：

```
function Question(id, name) {
    this.id = id;
    this.name = name;
    this.answers = ko.observableArray();
}

function Answer(id, name) {
    this.id = id;
    this.name = name;
}

function ViewModel() {
    this.questions = ko.observableArray();
    var self = this;

    //dummy data
    self.init = function () {
        var q1 = new Question(1, "Question 1");
        var q1a1 = new Answer(1, "Option 1");
        var q1a2 = new Answer(2, "Option 2");
        q1.answers([q1a1, q1a2]);

        var q2 = new Question(2, "Question 2");
        var q2a1 = new Answer(1, "Option 1");
        var q2a2 = new Answer(2, "Option 2");
        var q2a3 = new Answer(3, "Option 3");
        q2.answers([q2a1, q2a2, q2a3]);

        var q3 = new Question(3, "Question 3");
        var q3a1 = new Answer(1, "Option 1");
        var q3a2 = new Answer(2, "Option 2");
        var q3a3 = new Answer(3, "Option 3");
        q3.answers([q3a1, q3a2, q3a3]);

        self.questions([q1, q2, q3]);
    };

    self.init();
} 
```

并像这样绑定视图模型：

```
<div data-bind="foreach:questions">
    <div data-bind="attr:{id :id}" class="question">
        <h2><label data-bind="text :name" /></h2>
        <div class="option">
            <table data-bind="attr:{id : id}">
                <tbody data-bind="foreach:answers">
                    <tr>
                        <td data-bind="text:name"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div> 
```

这是[摆弄](http://jsfiddle.net/yk3GR/1/)示例。

# java - 如何在 AspectJ 中使用 @After 和 @AfterThrowing 之一？

> ID：11859568
> 
> 赞同：1
> 
> 时间：2012-08-08T07:19:38.843
> 
> 标签：java, aspectj

在这种情况下如何避免双重登录？

```
@AfterThrowing(pointcut="execution(String greeting(..))",throwing="e")
public void itsAFoo1(JoinPoint joinPoint, RemoteException e) {
    logger.error(joinPoint.getSignature().toLongString() + " exception here!");
}

@After("execution(String greeting(..))")
public void itsAFoo2(JoinPoint joinPoint, RemoteException e) {
    logger.error(joinPoint.getSignature().toLongString());
} 
```

我有两个日志：

```
[2012-08-07 17:02:01,585] [request1344351718430] [public java.lang.String componentC.Hello.greeting(java.lang.String) exception here!]
[2012-08-07 17:02:01,585] [request1344351718430] [public java.lang.String componentC.Hello.greeting(java.lang.String)] 
```

但如果有异常，我需要收到一份，如果没有，我需要收到一份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:22:54.850

将 @After 更改为 @AfterReturning

```
@AfterReturning("execution(String greeting(..))")
public void itsAFoo2(JoinPoint joinPoint, RemoteException e) {
    logger.error(joinPoint.getSignature().toLongString());
} 
```

# c# - 如何从网页中提取信息？

> ID：11859574
> 
> 赞同：1
> 
> 时间：2012-08-08T07:19:56.753
> 
> 标签：c#, html, regex

我想从网站的首页收集一些数据。我可以轻松地遍历每一行，它只是我感兴趣的一个特定行。所以我想识别正确的行并提取数字，在本例中为 324。我该怎么做？

```
<h2><a href="/mmp/it/su/">Weather</a></h2> <span class="jix_channels_count">(324)</span><br><p class="jix_channels_desc">Prog&oslash;r, su, si&oslash;r, tester</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:22:08.813

下载内容后，使用 HTML 解析器（例如[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)）来识别`span`属于`jix_channels_count`该类的元素。

另一种选择是[SgmlReader](http://developer.mindtouch.com/SgmlReader)。

`regex`你用- 我全心全意地建议你不要采取这个方向来标记你的问题。

建议的方法（使用 SgmlReader）或多或少像这样：

```
var url = "www.that-website.com/foo/";
var myRequest = (HttpWebRequest)WebRequest.Create(url);
myRequest.Method = "GET";
WebResponse myResponse = myRequest.GetResponse();                
var responseStream = myResponse.GetResponseStream();
var sr = new StreamReader(responseStream, Encoding.Default);
var reader = new SgmlReader
             {
                 DocType = "HTML",
                 WhitespaceHandling = WhitespaceHandling.None,
                 CaseFolding = CaseFolding.ToLower,
                 InputStream = sr
             };
var xmlDoc = new XmlDocument();
xmlDoc.Load(reader);
var nodeReader = new XmlNodeReader(xmlDoc);
XElement xml = XElement.Load(nodeReader); 
```

现在，您可以使用 LINQ to XML（递归或以其他方式）查找具有值等于`span`的属性的元素并读取该元素的值。`class``jix_channels_count`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:29:05.343

用正则表达式解析 html 页面是错误的。不过，如果您知道单个 html 行的确切结构，则可以使用正则表达式，而无需将该行视为 html 代码。

假设数字始终在括号内，并且跨度为 jix_channels_count 类：

```
Match match = Regex.Match(htmlLine, @"(\<span[^>]*class=""jix_channels_count[^>]*\>\()([^)]+)(\))", RegexOptions.IgnoreCase);
if (match.Success)
{
    string number = match.Groups[2].Value;
} 
```

# c# - 对象传递中的可访问性不一致作为参数

> ID：11859582
> 
> 赞同：-3
> 
> 时间：2012-08-08T07:20:38.297
> 
> 标签：c#, .net, wpf

我在 SQLServer 类中有这段代码

```
 class sqlServer
{
    public string uName,pWord;

    public SqlConnection connection;
    public sqlServer(string name, string pass)
    {
        this.uName = name;
        this.pWord = pass;
        connection = new SqlConnection("user id=" + uName + ";" + "password=" + pWord + ";" + "server=SERVER\\SQLSERVER2008;"
                                   + "database=school; " + "connection timeout=30");

    }
  -------------------- 
```

我在另一个名为 mainWindow 的类中创建了这个类的对象，我想将此对象作为另一个类的参数传递。其中一个是收银员菜单，这些代码在这里......

它给出错误错误

可访问性不一致：字段类型“school.sqlServer”的可访问性低于字段“school.cashierMenu.db” D:\Projects\school\school\cashierMenu.xaml.cs 21 26 school

主菜单部分...

```
db = new sqlServer(txtBxName.Text, txtBxPassword.Password);
            if (db.connect())
            {
                db.disconnect();
                MessageBox.Show("Fasasaild");                   
            }

            else
            {
                MessageBox.Show("Faild"); 
```

## }

收银员菜单构造函数

```
public partial class cashierMenu : Window
{
    public sqlServer db;

    public cashierMenu(sqlServer database)
    {
        InitializeComponent();
        this.db = database;
    }
} 
```

我怎么能出去……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:24:02.473

放入`public`您的班级声明。

```
public class sqlServer 
```

您收到错误是因为您将`sqlServer`属性公开为`public`但 sqlServer 类默认情况下不公开`internal`。

要做到这一点，你要么必须让你 sqlServer 类`public`或让你的财产`internal`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:25:08.330

您的问题是您将 sqlServer 声明为 internal

这是该错误的链接：http: [//msdn.microsoft.com/en-us/library/997yz02a (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/997yz02a(v=vs.80).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:25:27.920

该类`sqlServer`不公开可见（默认为，`internal`因为您没有指定其他任何内容）。该`db`字段是公共的，这意味着它将公开一个不公开可见的类型。解决方案是同时`sqlServer`公开课程：

```
public class sqlServer
{
   ... 
```

作为旁注，我会重新设计这个`sqlServer`类，这样它就不会公开暴露`uName`and`pWord`字段。

# ubuntu - php-fpm 在 ubuntu 上正常运行需要哪些系统文件在被监禁的环境中？

> ID：11859583
> 
> 赞同：2
> 
> 时间：2012-08-08T07:20:43.030
> 
> 标签：ubuntu, php, chroot

我在 ubuntu 12.04 上使用 php5-fpm，并为使用 nginx 托管的每个域都有单独的池和 chroot 位置。但是，我知道有些系统文件需要直接在监狱里，但是我需要哪些呢？

我知道 dns 解析目前不起作用，我读过一些文章说我需要将一些系统核心文件复制到目录中，但他们从未真正详细说明我实际需要复制到哪些文件那里。

我知道 dns、时区有一些东西（php 似乎对于任何时间/日期相关的函数都会出错）。

我只是想知道一般 chroot 的使用。是否值得使用它，或者为每个域设置一个单独的分区会更安全，或者甚至为每个域设置一个单独的虚拟机（这会花费更多资源）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:22:09.247

我也在寻找这个问题的答案。经过研究，答案似乎并不那么简单。

有些东西很明显，因为它几乎用于所有事情。这些文件用于解析名称、端口和时区。

*   /etc/hosts
*   /etc/nsswitch.conf
*   /etc/resolv.conf
*   /etc/服务
*   /etc/本地时间

但是根据您安装的扩展以及 PHP 的编译方式，您还需要更多的东西。我不知道您是否需要它们，但以防万一，您可以使用命令*ldd*和 PHP-binary 作为参数来获取 PHP 使用的库列表：

```
ldd /usr/bin/php5 
```

根据您的扩​​展所在的路径，您可以使用相同的命令来获取所需的库：

```
ldd /usr/lib/php5/20100525/* 
```

现在您只需要注意您在 PHP-config 文件中使用的其他可执行文件。就我而言，我找到了对*sendmail*的参考。

*我没有让它完全为我工作......我仍然有一些使用 curl 解析名称的问题。但到目前为止还没有开始:)*

资料来源：

*   [http://www.cyberciti.biz/tips/howto-setup-lighttpd-php-mysql-chrooted-jail.html](http://www.cyberciti.biz/tips/howto-setup-lighttpd-php-mysql-chrooted-jail.html)
*   [http://forum.nginx.org/read.php?3,229450,229450](http://forum.nginx.org/read.php?3,229450,229450)

**编辑：**这是我从 IRC 的某个人那里得到的脚本。我没试过，但他说效果很好...... [http://pastebin.com/index/HyE87bcF](http://pastebin.com/index/HyE87bcF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:20:51.103

我使用一组使用 deboostrap 创建 chroot 的脚本来创建我的 Debian/Ubuntu chroot，因此所有库都在那里，我不必弄清楚要安装什么。它可能比你想要的更多，但它可能会让你开始。我经常在由我的脚本创建的 chroot 中进行开发工作，并且（还）没有遇到任何问题。祝你好运！

[https://github.com/vtonehundred/vroot](https://github.com/vtonehundred/vroot)

# jquery - 从模式窗口更改页面内容

> ID：11859593
> 
> 赞同：0
> 
> 时间：2012-08-08T07:21:08.640
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我正在使用模态窗口的[插件](https://github.com/marcosesperon/Messi)。我正在做的是，单击一个锚点，模态显示并在输入字段中显示单击的锚点文本，以使用户能够更改它。我想要做的是，当用户在模式内的输入字段中键入新的锚文本时，让锚文本在主页内随您键入而改变。需要建议才能从模式窗口访问主页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:36:47.337

该插件仅在您的标签`<div>`底部创建一个附加项（使用检查元素查看类的名称）。`<body>`它仍然在同一个文件中。因此您可以使用 jQuery 选择器访问锚点的 id。使用设置文本`$("#yourAnchorID").html("your new text")`

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:37:16.027

您可以尝试将单击的锚标记的引用传递给您的插件，并根据用户在输入字段中的类型更改锚标记的内容。

# iphone - 如何将 2 个或多个视图添加到与页面控件相关的一个滚动视图？

> ID：11859594
> 
> 赞同：0
> 
> 时间：2012-08-08T07:21:11.137
> 
> 标签：iphone

我是 iPhone 开发的新手。我使用`UIPageControl`并且`UIScrollView`我想将 2 个或更多视图添加到单个`UIScrollView`. 我有 2 页的页面控件。请给我一个例子或链接来实现这个。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:33:25.867

在中，`UIScrollView`您可以通过简单地在滚动视图中显示它们来添加多个`UIView`'。

# objective-c - 带有 NSFetchedResultsController 的 UITableViewController 实例

> ID：11859595
> 
> 赞同：0
> 
> 时间：2012-08-08T07:21:17.047
> 
> 标签：objective-c, core-data, nsfetchedresultscontroller

我遇到`MyClass:UITableViewController`了`NSFetchedResultsController`一些问题：当我创建 MyClass 的新实例时， fetchedResultsController 返回给我 empty `fetchedObjects`。但是在这个类的第一个实例中，一切都很好......

我做错了什么？

使用 managaedCondext 和其他需要的变量一切正常（即没有错误只有空结果）

我的类.h

```
@interface MyClass : UITableViewController <UISearchDisplayDelegate, NSFetchedResultsControllerDelegate>

@property (nonatomic, retain) NSFetchedResultsController *fetchedResultsController;

@end 
```

我的班级.m

```
@implementation MyClass

@synthesize fetchedResultsController = _fetchedResultsController;

......

- (NSFetchedResultsController *)newFetchedResultsControllerWithSearch:(NSString *)searchString
{
    /*
     Set up the fetched results controller.
     */
    // Create the fetch request for the entity.
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *callEntity = [NSEntityDescription entityForName:@"Entity" inManagedObjectContext:_managedObjectContext];
    [fetchRequest setEntity:callEntity];

    NSPredicate *filterPredicate = [NSPredicate predicateWithFormat:@"attr == %@", _value];

    NSMutableArray *predicateArray = [NSMutableArray array];
    if(searchString.length)
    {
        // your search predicate(s) are added to this array
        [predicateArray addObject:[NSPredicate predicateWithFormat:@"title CONTAINS[cd] %@", searchString]];
        // finally add the filter predicate for this view
        if(filterPredicate)
        {
            filterPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:filterPredicate, [NSCompoundPredicate orPredicateWithSubpredicates:predicateArray], nil]];
        }
        else
        {
            filterPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:predicateArray];
        }
    }
    [fetchRequest setPredicate:filterPredicate];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"position" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:&sortDescriptor count:1];
    [sortDescriptor release];

    [fetchRequest setSortDescriptors: sortDescriptors];
    [sortDescriptors release];

    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest 
                                                                                                managedObjectContext:[DataManager shared].managedObjectContext 
                                                                                                  sectionNameKeyPath:nil 
                                                                                                           cacheName:nil];
    aFetchedResultsController.delegate = self;

    [fetchRequest release];

    NSError *error = nil;
    if (![aFetchedResultsController performFetch:&error]) 
    {
        /*
         Replace this implementation with code to handle the error appropriately.

         abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. If it is not possible to recover from the error, display an alert panel that instructs the user to quit the application by pressing the Home button.
         */
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return aFetchedResultsController;
}   

- (NSFetchedResultsController *)fetchedResultsController 
{
    if (_fetchedResultsController != nil) 
    {
        return _fetchedResultsController;
    }
    _fetchedResultsController = [self newFetchedResultsControllerWithSearch:nil];
    return [[_fetchedResultsController retain] autorelease];
} 
```

其他方法都是标准的，没有额外的...

第一个瞬间是（一切正常！）：

```
MyClass *myClass = [[[MyClass alloc] initWithNibName:@"MyClass" bundle:nil] autorelease];
myClass.tabBarItem.image = [UIImage imageNamed:@"myClass"];
myClass.title = NSLocalizedString(@"myClass", @"myClass");
UINavigationController *myClassNavigationController = [[[UINavigationController alloc] initWithRootViewController:myClass] autorelease]; 
```

然后我尝试显示该类的实例：

```
MyClass *myClass1 = [[MyClass alloc] initWithNibName:@"MyClass" bundle:nil];
myClass1.hidesBottomBarWhenPushed = YES;
myClass1.modalPresentationStyle = UIModalTransitionStyleCoverVertical;
[self.navigationController presentModalViewController:myClass1 animated:YES];
[myClass1 release]; 
```

什么都没有 - 一个没有错误的空 tableView...

# iphone - 在 iPad 或 iPhone 相机中拍摄的照片的 DPI 是多少？

> ID：11859597
> 
> 赞同：0
> 
> 时间：2012-08-08T07:21:20.370
> 
> 标签：iphone, objective-c, ipad, tesseract

我在我的应用程序中使用 tesseract 库进行图像扫描。我在某处读过该库为超过 100 DPI 的图像提供了良好的性能。我正在使用 iPhone 4 和 iPad 拍摄照片并将其作为 tesseract 库的输入。但仍然库提供不可读的输出。什么是 iPhone 的 DPI 或iPad 相机？如何提高 tesseract 库的性能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T08:23:18.747

准备一把 12 英寸的尺子和卷尺。把尺子放在桌子上。将手机放在尺子上方，将相机对准尺子。使用卷尺测量从尺子到相机的距离。给统治者拍照。

在图像查看器或编辑器中打开照片。（例如，您可以在 Mac 上使用预览。）使用图像查看器/编辑器来测量标尺的大小（以像素为单位）。

将标尺的大小（以像素为单位）除以 12。这是标尺图片的每英寸像素（也称为每英寸点数或 DPI），从您用卷尺测量的距离获取。

**需要 100 DPI 的关键**是 OCR 库需要足够的分辨率来识别字母。它可能希望字母高 15-20 像素（我猜）。如果字母太小，则图像可能没有足够的信息供 OCR 库工作。并且字母也可能太大——库可能没有被编程为寻找 100 像素高的字母。如果字母大小合适，但模糊不清，OCR 库可能无法识别它们。

可能只是因为您尝试拍摄的文字太小，因此当您将相机靠近到足够近以使字母大小合适时，相机无法对焦并且图片模糊。在这种情况下，您可能无法修复它（除了购买配备更好相机的手机）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:24:43.197

它有 72 dpi，至少这是它存储在 EXIF 中的内容 ![在此处输入图像描述](../Images/fe5674ca9defe8748659351865d6b24c.png)

# c# - System.Security.SecurityException：该程序集不允许部分受信任的调用者

> ID：11859606
> 
> 赞同：3
> 
> 时间：2012-08-08T07:21:36.330
> 
> 标签：c#, sql-server

我正在尝试使用集成在 sql server 2008 中的 clr 存储过程创建一个简单的 msmq 消息传递应用程序。

遵循以下步骤

1.  通过默认的 System.Messaging 引用在 sql server 中不可用，因此创建了这个程序集

    **ALTER DATABASE [AdventureWorksLT2008] SET TRUSTWORTHY on create ASSEMBLY Messaging AUTHORIZATION dbo FROM 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\System.Messaging.dll' WITH PERMISSION_SET = EXTERNAL_ACCESS GO**

2.创建带有存储过程的sql server应用程序

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Data.SqlTypes;
using System.Data.SqlClient;
using Microsoft.SqlServer.Server;
using System.Messaging;
using System.Security;

    [assembly: AllowPartiallyTrustedCallers]
    namespace CLRProcedure
    {

        public class StoredProcedure
        {
            /// <summary>
            /// Sends message to queue
            /// </summary>
            /// <param name="queue">Queue path</param>
            /// <param name="msg">Message</param>
            [SqlProcedure]

            public static void Proc_Send_Queue(SqlString queue, SqlString msg)
            {
                using (MessageQueue msgQueue = new MessageQueue(queue.ToString(), QueueAccessMode.Send))
                {
                    msgQueue.Formatter = new XmlMessageFormatter(new Type[] { typeof(string) });
                    msgQueue.Send(msg.Value);
                }
            }
         }     
     } 
```

1.  在 sql server 中注册该程序 **集 从“E:\CCA Parctise\SqlMSMQ.dll”创建程序集 MSMQApp**

SqlMSMQ.dll 是 sql server 应用程序 dll。

1.  创建存储过程 **create PROCEDURE [dbo].[Proc_Send_Queue] (@queue nvarchar, @msg nvarchar) WITH EXECUTE AS CALLER AS EXTERNAL NAME [MSMQApp].[CLRProcedure.StoredProcedure].[Proc_Send_Queue]**
2.  在执行存储过程时 **使用 [AdventureWorksLT2008] GO DECLARE @return_value int EXEC @return_value = [dbo].[Proc_Send_Queue] @queue = N'SampleQ', --msmq name @msg = N'Simpel queue message' -- message SELECT'返回值' = @return_value GO**

    抛出错误

    消息 6522，级别 16，状态 1，过程 Proc_Send_Queue，第 0 行在执行用户定义的例程或聚合“Proc_Send_Queue”期间发生 .NET Framework 错误：System.Security.SecurityException：该程序集不允许部分受信任的调用者。System.Security.SecurityException：在 CLRProcedure.StoredProcedure.Proc_Send_Queue（SqlString 队列，SqlString 消息）

感谢您帮助解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:58:01.743

[允许部分信任的调用者](http://msdn.microsoft.com/en-us/library/ms345097%28v=sql.105%29.aspx)状态：

> 我们建议在 SQL Server 中注册的所有程序集（添加到全局程序集缓存的程序集除外）都使用 AllowPartiallyTrustedCallers 属性进行标记，以便 SQL Server 加载的程序集可以相互访问。

你完全按照建议所说的做了，你得到了错误。发生什么了？请参阅 [强命名程序集和 AllowPartiallyTrustedCallers](http://blogs.msdn.com/b/sqlclr/archive/2006/06/22/643554.aspx)：

> 当程序集 B 调用强名称程序集 A 时，
> 
> A 必须具有 AllowPartiallyTrustedCallers 属性或 B 必须具有不安全 (FullTrust) 权限集。

在您的情况下， 'B' 是`SqlMSMQ.dll`，而强名称 'A' 是`System.Messaging.dll`。由于您无法将“A”修改为具有 APTC 属性，因此唯一的解决方案是将“B”修改为完全受信任（即 UNSAFE）：

```
 create assembly MSMQApp from 'E:\CCA Parctise\SqlMSMQ.dll'
   with permission_set = unsafe; 
```

您的消息的收件人是什么？[如果是由 SQL Server 支持的另一个应用程序，那么您在Service Broker](http://msdn.microsoft.com/en-us/library/ms345108%28v=sql.90%29.aspx)中有一个更好的选择。

# iphone - 使用 asihttp 请求在表格中使用进度条发出多个请求

> ID：11859608
> 
> 赞同：0
> 
> 时间：2012-08-08T07:21:48.717
> 
> 标签：iphone, ios, crash, asihttprequest

我正在使用 asihhtp 请求在 ios 中发出多个图像上传请求以将图像提交到服务器。但是由于进度条，我的应用程序总是崩溃。这是我的代码

```
 ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:urlStr]];
                [request appendPostData:postData];
                [request setTag:[[dic objectForKey:@"unique"] integerValue]];
                [request setDelegate:self];
                [request setUploadProgressDelegate:cell.mProgressBar];
                [request setDidFailSelector:@selector(requestFail:)];
                [request setDidFinishSelector:@selector(requestDone:)];
                [request setRequestMethod:@"POST"];
                [request addRequestHeader:@"Content-Type" value:@"text/plain"];
                [request setShouldContinueWhenAppEntersBackground:YES];
                //[myQueue addOperation:request];
                [appDelegate window].userInteractionEnabled = NO;
                [request startAsynchronous]; 
```

我有自定义单元格，其中有进度条和标签，因此一旦过程完成，我将隐藏栏并显示已完成的标签。

用户滚动表应用程序崩溃使用进度条时出现问题

崩溃输出

```
> -[UIProgressView respondsToSelector:]: message sent to deallocated instance 0x10d210c0 
```

自定义单元格代码

```
 #import <UIKit/UIKit.h>

    @interface CustomProgressBar : UITableViewCell
    {

    }

    @property (retain, nonatomic) IBOutlet UILabel         *mlblCompllrtrlbl;
    @property (retain, nonatomic) IBOutlet UIProgressView  *mProgressBar;
    @property (retain, nonatomic) IBOutlet UIImageView     *mCellImafge;

    @end 
```

自定义单元格代码

```
 #import "CustomProgressBar.h"

    @implementation CustomProgressBar
    @synthesize mlblCompllrtrlbl;
    @synthesize mProgressBar;
    @synthesize mCellImafge;

    - (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString*)reuseIdentifier
    {
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
    }

    - (void)setSelected:(BOOL)selected animated:(BOOL)animated
   {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
   }

   - (void)dealloc 
   {
    [mCellImafge release];
    [mlblCompllrtrlbl release];
    [mProgressBar release];
    [super dealloc];
   }

   @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:03:33.017

当它离开屏幕时，您的 tableviewcell 将被释放或重用（取决于您如何设置重用标识符）。

您需要以一种独立于表格视图单元格的方式以某种方式跟踪您的请求。您可能需要一个单独的对象来表示存储在 NSArray 中的每个请求，该 NSArray 属于视图控制器，或者属于与您希望请求具有相同生命周期的其他对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:17:13.933

你可能在某处发布了progressview，所以首先删除语句

[UIProgressView 发布];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:57:36.187

表格单元格是自动释放的，所以每当您滚动表格时，progressview 就会被释放，并且您可能正在尝试访问该 progessView 的方法

# asp.net-mvc - 将凭据从 MVC Web 应用程序传递到 WCF 服务

> ID：11859610
> 
> 赞同：2
> 
> 时间：2012-08-08T07:22:05.427
> 
> 标签：asp.net-mvc, wcf, security, asp.net-mvc-4, wcf-security

我有一个 MVC 4 Web 应用程序，它使用表单身份验证来验证用户的用户名和密码。Web 应用程序调用许多 WCF 服务，这些服务还需要用户的用户名和密码来验证用户是否有权访问该服务。

在 Web 应用程序中“跟踪”用户的用户名和密码然后传递给 WCF 服务的最佳方法是什么？

从我读过的内容来看，使用会话状态来存储密码听起来不是一个好主意，但我不确定最好的选择是什么。

# javascript - Jquery拖放允许2个元素

> ID：11859611
> 
> 赞同：2
> 
> 时间：2012-08-08T07:22:06.653
> 
> 标签：javascript, jquery, jquery-ui, draggable, droppable

我在使用 jquery 的拖放时遇到了一些问题。我只想从每个“ul”中拖动 1 个元素。所以我想要的结果是红色框中的“测试”和“foo”。我如何跟踪红框中的元素？

这是代码：http: [//jsfiddle.net/9edge/CTpTr/](http://jsfiddle.net/9edge/CTpTr/)

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:12:58.780

填写两个单独的计数器，每个项目类型一个（并给你的项目类别来识别它们）。

使用 check() 函数检查您的限制，如果达到或未返回 true/false，请使用 drop() 函数更新您的计数器。

```
$(function() {
    var limit = 1;
    var counter_test = 0;
    var counter_foo = 0;
    $("[id=drag]").draggable({
        revert: "invalid"
    });
    $('#div1').droppable({
        accept: function(item) {
            if ($(item).hasClass('test')) {
                if (counter_test >= limit) {
                    return false;
                }
            }
            else {
                if (counter_foo >= limit) {
                    return false;
                }
            }
            return true;
        },
        drop: function(e, ui) {
            if (ui.draggable.hasClass('test')) {
                counter_test++;
            }
            else {
                counter_foo++;
            }
        }
    });
});
​ 
```

[小提琴](http://jsfiddle.net/CTpTr/19/)

[修复了 ID 的新小提琴](http://jsfiddle.net/CTpTr/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T08:29:48.783

解决方案的想法：http: [//jsfiddle.net/CTpTr/23/](http://jsfiddle.net/CTpTr/23/)。您只能放置 1 个测试元素和 1 个 foo 元素，然后您仍然可以拖放，但 droppable 元素中不接受放置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:13:45.900

我更新了你的小提琴。稍微复杂一点的解决方案在这里：

[http://jsfiddle.net/CTpTr/18/](http://jsfiddle.net/CTpTr/18/)

如您所见，我从元素中删除了`drag`id 。`li`id 在网页中应该是唯一的。您可以使用选择器使这些元素可拖动到另一个选择器 ( `#lists li`)。然后我使用两个变量来跟踪在红色 div 中拖放的对象数量。第一个是“限制”，第二个是“左”。

```
var limits = { test: 1, foo: 1}, left = 2; 
```

`limits`是每个列表中允许的元素数（基于自定义 html5 data-dragtype 属性），`left`是允许的元素总数。因此，例如，如果您希望能够添加两个“foo”类型的元素和一个“test”类型的元素，您可以使用

```
var limits = { test: 1, foo: 2}, left = 3; 
```

或者，如果你想允许两个“foo”和一个“test”，但总共有两个元素，你可以使用

```
var limits = { test: 1, foo: 2}, left = 2; 
```

如您所见，它比您要求的版本更灵活。

每次放置一个元素时，drop 事件处理程序都会检索拖动的元素`drg.draggable` （注意`(e, drg)`函数的参数）及其类型`draggable.data('dragtype')`。

```
$(function() {
    var limits = { test: 1, foo: 1}, 
        left = 2;
    $("#lists li").draggable({
        revert: "invalid"
    });
    $('#div1').droppable({
        drop: function(e, drg) {
            var draggable = $(drg.draggable), 
                dragtype = draggable.data('dragtype');
            left -=1;
            limits[dragtype] -= 1;
            if (left == 0) {
                $(this).droppable("disable");
                $('#lists li').draggable("disable");
            }
            if (limits[dragtype] == 0){
                $('li[data-dragtype=' + dragtype +']').draggable('disable');
            }
        }
    });
});​ 
```

因此，如果仅对一种类型达到限制`li`，您可以使用 仅禁用该类型元素的拖动功能`$('li[data-dragtype=' + dragtype +']').draggable('disable')`。

需要注意的重要一点是添加另一种类型的列表是多么容易。例如，如果您想添加`li`“bar”类型的元素，您可以添加这样的`ul`元素

```
<ul class="bar">
    <li data-dragtype="bar">bar1</li>
    <li data-dragtype="bar">bar2</li>
    <li data-dragtype="bar">bar3</li>
    <li data-dragtype="bar">bar4</li>
</ul> 
```

并相应地设置`limits`和`left`变量，而不更改放置事件处理程序的代码。例如：

```
var limits = { test: 1, foo: 1, bar: 2}, left = 4; 
```

# sql - SQL：如果不存在实用程序

> ID：11859614
> 
> 赞同：3
> 
> 时间：2012-08-08T07:22:14.757
> 
> 标签：sql

我正在寻找可以将任何插入语句包装在 IF NOT EXISTS 语句中的实用程序应用程序。

我可以很容易地编写这个程序，但是想知道是否已经有一些预制工具可以做到这一点？

理想情况下，最好在管理工作室中选择插入语句的文本，右键单击 - > 如果不存在。在此之后，插入语句将被包装在 IF NOT Exists 子句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:23:06.783

我不认为它存在，因为即使是“如果不存在”子句也可以是相对的。你告诉记录不存在的参数是什么？仅通过主键？或者该工具是否必须验证表格中的每一列？大多数表上都有 InsertedDate 和 UpdatedDate，所以如果你选择选项 2，一条记录永远不会被认为是重复的，对吧？此外，如果您有数字列，您可能还会遇到精度问题。

# sql - 如何使报告生成更快？（从 sql 数据库中提取数据）

> ID：11859626
> 
> 赞同：1
> 
> 时间：2012-08-08T07:23:16.033
> 
> 标签：sql, optimization, bigdata

我的团队使用 SQL 数据库生成“每日活跃用户”报告，我们搜索的表的大小**约为 700 万条记录**，我们尽最大努力优化我们的算法，并将索引放在 SQL db 上，但 每个记录**仍然有 120 秒**每日报告生成。

有没有办法让它更快？

**任何人可以推荐我可以搜索的任何字段/关键字/书籍/论坛？**

* * *

详细信息

**查询定义：**

对于连续 7 天登录的用户，我们在 7 天结束时将其计为“活跃用户”

**表：login_in**

记录登录、注销时间、账号ID的基本信息

**编程语言：带有seam框架的java**

**SQL 数据库：MySQL**

* * *

提前很多谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:48:24.307

第一步是对`EXPLAIN`驱动报告的查询进行查询。这可以提供关于查询的哪个部分很慢的线索。您希望确保查询的所有部分都被索引覆盖，而不是完整的表访问。

请参阅文档以获取[解释](http://dev.mysql.com/doc/refman/5.0/en/explain.html)

# c - 这两种语法有什么区别？

> ID：11859627
> 
> 赞同：0
> 
> 时间：2012-08-08T07:23:20.340
> 
> 标签：c

为什么

`(a?b:c)=5;`

在“C”中显示需要的左值，而

`*(a?&b:&c)=5;`

很好吗？两者有什么区别？

假设 a=1，对于第一种情况，它给出 b=5，第二种情况给出，`*(&b)=5`.`

我无法理解的是：如果我们写`b=5`or有什么区别`*(&b)=5`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T07:59:16.693

> 如果我们写 b=5 或 *(&b)=5 有什么区别？

第二个获取一个指向`b`然后取消引用该指针的指针，将 5 存储到获得的指针中。

但是，您的问题似乎忽略了*真正的*问题：为什么它在第二种情况下有效，但在第一种情况下无效。这与 C 中的表达式及其处理方式有关。

运算符的结果`?:`是一个值；具体来说，它是一个*rvalue*。松散地定义，右值是不能放在赋值左侧的值。它们之所以如此命名，是因为它们是位于赋值右侧的值。例如，表达式“5”是一个右值表达式。你不能这样做`5 = 40;`是胡说八道。

命名变量是左值。您可以将左值放在等式的左侧。该表达式`a`是一个左值表达式（假设它`a`是一个在范围内的变量名）。

但是，表达式`(a + b)`是*右值表达式*，而不是左值。并且有充分的理由；你不能做`(a + b) = 30;`的比你能做的更多`(5 + 10) = 30;`。

运算符的结果`?:`是一个右值表达式，就像`+`上面的运算符一样。这解释了为什么`(a?b:c) = 5;`不起作用；您正在尝试为右值表达式分配一个值。那是违法的。

现在，让我们看看第二种情况。我们知道这`?:`会产生一个右值表达式。现在，这就解释了表达式的分类是什么，但是表达式结果的*类型*呢？好吧，假设`b`and`c`都是`int`s，那么的*类型*也是。`(a?b:c)``int`

但是，当您这样做时`(a?&b:&c)`，此表达式的类型是*`int*`*，而不是`int`。它是一个*指向*整数的指针。它是“指向`int`.”的类型的右值表达式。它将返回 的地址`b`或 的地址`c`。

当你有一个`int*`，并且你用操作符取消引用它时`*`，你会得到什么？你得到一个类型的***左值表达式***`int`。因为`(a?&b:&c)`是 type 的右值表达式`int*`，如果你取消引用它，你会得到一个 type 的左值表达式`int`。此左值将引用`b`或`c`，具体取决于 的内容`a`。

简单地说，它的工作原理完全一样：

```
int *ptr = NULL;
if(a)
  ptr = &b;
else
  ptr = &c;

*ptr = 5; 
```

你得到一个指针，它可以指向任何特定的内存位置，然后你在指向的位置存储一些东西。就是这么简单。

# php - 使用 @OneToOne 的声明 - Doctrine2

> ID：11859634
> 
> 赞同：17
> 
> 时间：2012-08-08T07:23:41.753
> 
> 标签：php, symfony, doctrine-orm

我有一张带有产品的表格和另一张带有注释的表格。每个产品可以有或没有一些注释。我只需要注释就知道它们被引用到哪个产品，但产品不知道它的注释。我认为这应该是我的代码：

```
namespace EM\MyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

use EM\MyBundle\Entity\Productss;

/**
 * @ORM\Entity
 * @ORM\Table(name="notes")
 */
class Notess
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @OneToOne(targetEntity="Productss")
 * @JoinColumn(name="products_id", referencedColumnName="id")
 **/
private $products; 
//... 
}

namespace EM\MyBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * @ORM\Entity
 * @ORM\Table(name="domains")
 */
class Domains
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;
// ...
} 
```

但它给出了一个错误：[Doctrine\Common\Annotations\AnnotationException]

[语义错误] 属性 EM\MyBundle\ Entity\Notes::$products 中的注释“@OneToOne”从未导入。您是否可能忘记为此注释添加“使用”语句？

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-08T07:29:27.670

我认为你应该使用`@ORM\OneToOne`...

```
/**
 * @ORM\OneToOne(targetEntity="Productss")
 * @ORM\JoinColumn(name="products_id", referencedColumnName="id")
 */
private $products; 
//... 
} 
```

# android - 安卓。使屏幕变黑

> ID：11859635
> 
> 赞同：0
> 
> 时间：2012-08-08T07:23:49.543
> 
> 标签：android

我正在为 Android 设备开发一个小游戏。每场比赛结束后，对手有能力开始新的比赛，此时我清除屏幕上的所有位图，清除所有`ImageViews`保存位图的所有内容，然后重新绘制所有内容。问题是一秒钟左右，`ImageViews`我清除的消失然后在我重绘它们后重新出现。我想让屏幕变黑或将整个屏幕淡化为黑色，删除对象，重绘/重新定位它们，然后将屏幕变为黑色:)

如何实现？我还没有找到任何好的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:27:19.720

您可以放置​​一些覆盖线性布局并在必要时显示。

```
android:visibility="visible"
android:visibility="invisible" 
```

# php - codeigniter 中的两种类型的 URL。一个用于分页，一个用于显示项目 - 如何？

> ID：11859639
> 
> 赞同：2
> 
> 时间：2012-08-08T07:24:03.723
> 
> 标签：php, codeigniter, seo, pagination

我有一些带有我自己的搜索引擎等的 codeigniter 画廊应用程序。

在单个项目页面上，有用于在图像之间导航的**下一个**和**上一个**按钮。

我的图片网址如下所示：

```
myurl.com/image/keyword/res_position 
```

**关键字**变量显然是用户为搜索键入的关键字，而**res_position**是结果列表中的位置 - 我需要它在下一个和上一个之间导航。

Ofc 我的下一个项目有 url

```
myurl.com/keyword/res_position+1 
```

和以前的

```
myurl.com/keyword/res_position-1 
```

就是这样。奇迹般有效。

我的问题是我想要一些只能用于显示单个图像的方法。我想过

```
mysite.com/image/id 
```

这将完成这项工作 - 但我担心重复的内容和 SEO 方面。

如您所见，我的“下一个-上一个”URL 结构有很多变化，因为用户可以输入很多其他关键字，并且每次单个图像“res-position”可以是不同的数字。

你能给我推荐一些解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:42:28.070

只是一个想法 -

为同一内容提供多个 URI 会导致重复问题，但我认为您对此无能为力。但是，您可以尝试使用搜索引擎禁止某些 URL `robots.txt`- 这应该可以帮助您停止重复内容问题...

```
User-agent: *
Disallow: /image/something 
```

**更新**

> Robots.txt 还用于避免所谓的“规范化”问题或具有多个“规范”URL。这个问题有时被错误地称为“重复内容”问题。
> 
> 当网站上的多个页面包含相同的信息时，就会出现规范化问题。例如，产品页面可能还具有“打印”版本，以便更轻松地打印出产品的规格和详细信息。这可能会给搜索引擎带来问题，然后他们必须确定哪个版本的页面（即 site.com/product-a.html 或 site.com/product-a-print.html）是规范版本。Robots.txt 将用于防止次要版本被索引。

参考：[http ://seoroi.com/seo-faq/robotstxt-what-it-is-why-its-used-and-how-to-write-it/](http://seoroi.com/seo-faq/robotstxt-what-it-is-why-its-used-and-how-to-write-it/)

# git - 如何删除待处理的拉取请求？

> ID：11859641
> 
> 赞同：0
> 
> 时间：2012-08-08T07:24:08.000
> 
> 标签：git, github

我创建了一个拉取请求。后来我意识到我需要用更新的提交覆盖那个拉取请求。但是由于第一个待处理的请求，Github 不允许我执行另一个请求请求。我可以删除之前的拉取请求吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:26:58.040

如果您更新拉取请求所基于的分支，GitHub 将自动更新拉取请求以匹配该分支。您不必重新创建它。只需推送新版本的分支。

如果您重写了历史记录（例如`commit --amend`或`rebase`），则在推送替换提交时需要使用该`--force`标志。

# ruby-on-rails - jQuery html方法不起作用

> ID：11859644
> 
> 赞同：0
> 
> 时间：2012-08-08T07:24:16.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在我正在构建的应用程序上创建赞成/反对票功能。当用户点击 upvote 或 downvote 按钮时，将 ajax 请求提交给控制器，该控制器更新数据库中的投票计数，然后运行一个 javascript 文件，该文件使用 jquery 更新显示的投票计数并禁用按下的按钮。这是更新显示的jquery：

```
$('#post-action-<%= "#{@post.id}" %>').html("
                <i class=\"icon-arrow-up arrow-voted\"></i>
                <p class=\"votes_difference\" ><%= (post.upvotes - post.downvotes) %></p>
            <%= link_to raw(\"<i class=\"icon-arrow-down\"></i>\"), post_downvote_path(post.id), method: :put, remote: true %>
                <p class=\"votes_sum\" ><%= (post.upvotes + post.downvotes) %> votes</p>
"); 
```

一切正常，除了更新投票显示和更改投票按钮（换句话说，上面的代码没有运行。数据库已更新，所以我知道控制器运行成功。）。我也知道问题出在上面的 jquery 上，因为当我渲染更少的 html 时它正在工作。这是我以前工作过的更简单的代码：

```
$('#post-action-<%= "#{@post.id}" %>').html("<%= @post.upvotes - @post.downvotes %>") 
```

我很确定我抓住了正确的元素。我要替换的 html 元素内容是：

```
<div class="post_actions" id="post-action-<%= "#{post.id}" %>" >

...some embedded ruby and other html

</div> 
```

我假设有一些 jquery 语法错误，但我根本找不到它。我在这里束手无策。对此问题的任何和所有输入将不胜感激。

**编辑**

正如 Trip 的回答的评论中所引用的，我可以通过改变这个来打印 foobar：

```
$('#post-action-<%= "#{ @post.id }" %>').html("fooooooobar!") 
```

对此：

```
$('#post-action-<%= @post.id %>').html("fooooooobar!") 
```

但是，当我用更复杂的代码替换 foobar 时：

```
$('#post-action-<%= @post.id %>').html("

                <i class='icon-arrow-up arrow-voted'></i>
                <p class='votes_difference' >
                  <%= (@post.upvotes - @post.downvotes) %>
                </p>
            <%= link_to raw('<i class=\"icon-arrow-down\"></i>'), post_downvote_path(@post.id), method: :put, remote: true %>
                <p class='votes_sum' ><%= (@post.upvotes + @post.downvotes) %> votes</p>

"); 
```

问题又回来了。用户显示不更新。但是，这一次，控制台出现 jquery 错误：

```
PUT http://localhost:3000/course/1/upvote_post 500 (Internal Server Error) jquery.js:8241
jQuery.ajaxTransport.send jquery.js:8241
jQuery.extend.ajax jquery.js:7720
$.rails.rails.ajax jquery_ujs.js:99
$.rails.rails.handleRemote jquery_ujs.js:158
(anonymous function) jquery_ujs.js:309
jQuery.event.dispatch jquery.js:3333
jQuery.event.add.elemData.handle.eventHandle 
```

**编辑 2**

在玩弄了 jquery 代码之后，我注意到了一些事情。首先，我必须缩小代码。如果我不这样做，jQuery 就不会触发。例如，我应该这样做：

```
$('#post-action-<%= "#{ @post.id }" %>').html("fooooooobar!") 
```

而不是这个：

```
$('#post-action-<%= "#{ @post.id }" %>').html("
              fooooooobar!
") 
```

其次，在将每一行输入回 html 方法后，我已经确定了导致问​​题的行。这一行：

```
<%= link_to raw(\"<i class=\"icon-arrow-down\"></i>\"), post_downvote_path(post.id), method: :put, remote: true %> 
```

导致 jquery 失败。我尝试了没有“原始”的行：

```
 <%= link_to "<i class='icon-arrow-down'></i>", post_downvote_path(post.id), method: :put, remote: true %> 
```

但还是一无所获。

**解决方案 - 是的**

为了让链接线工作，我不得不像这样逃避它：

```
<%= escape_javascript(link_to raw("<i class='icon-arrow-down'></i>"), post_downvote_path(@post.id), method: :put, remote: true) %> 
```

最后！终于自由了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:35.953

我认为是这一行：

```
<%= link_to raw(\"<i class=\"icon-arrow-down\"></i>\"), 
```

所以这样做：

```
$('#post-action-<%= "#{@post.id}" %>').html("
                <i class='icon-arrow-up arrow-voted'></i>
                <p class='votes_difference' >
                  <%= (post.upvotes - post.downvotes) %>
                </p>
            <%= link_to raw('<i class=\"icon-arrow-down\"></i>'), post_downvote_path(post.id), method: :put, remote: true %>
                <p class='votes_sum' ><%= (post.upvotes + post.downvotes) %> votes</p>
"); 
```

**更新**

此行失败的原因：

```
\"<i class=\"icon-arrow-down\"></i>\"), 
```

是因为你`/"`用来封闭另一个`/"`所以应用程序认为这里有两个部分：

```
\"<i class=\" 
```

和

```
\"></i>\" 
```

你需要区分它们。您已经在使用`"`您的`html()`方法，因此请使用`'`

所以它看起来像这样：

```
'<i class=\"icon-arrow-down\"></i>'), 
```

其次，escape_javascript 的链接：

```
<%= escape_javascript(link_to raw("<i class='icon-arrow-down'></i>"), post_downvote_path(@post.id), method: :put, remote: true) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:31:17.340

看起来您在 html 中错过了 @post 并且只是将其作为帖子。试试这个。

顺便说一句，您应该使用 firebug 或 chrome inspect 元素来找出任何脚本错误。他们甚至在发生时指出与 ajax 相关的脚本错误。

> $('#post-action-<%= "#{@post.id}" %>').html(" <%= (@post.upvotes - @post.downvotes) %>
> 
> <%= link_to raw(\"\"), post_downvote_path(@post.id), 方法: :put, remote: true %> <%= (@post.upvotes + @post.downvotes) %> 票
> 
> ");

# php - PHP中的负查找字符串（正则表达式）

> ID：11859645
> 
> 赞同：0
> 
> 时间：2012-08-08T07:24:29.467
> 
> 标签：php, regex

我有一个这样的字符串

```
<div tagname="chapter_title" class="CHAP_TTL" aidpstyle="CHAP_TTL">testt</div>
<div tagname="section" id="sec01">
<div tagname="title" class="H1" aidpstyle="H1" id="sec01">
     INTRODUCTION<!--title-->
</div>
<div tagname="para" class="CHAP_BM_FIRST" aidpstyle="CHAP_BM_FIRST">test3
<div tagname="emph" class="ITALIC" aidcstyle="ITALIC">buildings</div> 
```

我正在尝试在标记名属性中查找不包含单词 (emph,section) 的 DIV

我使用了下面的模式，但它没有显示正确的输出

```
 preg_match_all('/<div tagname="(?!emph)(?!section)(?!footnote)
      (?!note).*"/i',$new_updated_html,$divstarttag); 
```

有接盘侠吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:39:54.933

我检查了您的代码，它的工作正常，除了您需要使用以下两行替换所有新行和空格 -

```
$string = preg_replace('/\s\s+/', ' ', $subject);

$data = preg_replace('/\r\n/', "", $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:30:27.043

请查看[PHP Simple DOM Parser](http://simplehtmldom.sourceforge.net/)（或任何其他 PHP HTML 解析框架）。您应该避免对 HTML 使用正则表达式。DOM Parser 应该允许您遍历`div`文档中的各个部分并访问相关信息。

# url - 在 Felix OSGi 中安装包时我们可以使用相对 URL 吗？

> ID：11859660
> 
> 赞同：1
> 
> 时间：2012-08-08T07:25:36.113
> 
> 标签：url, osgi, relative-path, apache-felix

对不起，如果这是一个愚蠢的问题。

在 OSGi 中，我们可以在安装包时传递文件 URL：

```
Bundle myBundle = felix.getBundleContext().installBundle ( "file:/Felix/RootDir/MyBundle.jar" ); 
```

URL“file://Felix/RootDir/MyBundle.jar”现在唯一地标识了包。

我们是否允许传递相对 URL？比如下图：

```
Bundle myBundle = felix.getBundleContext().installBundle ( "file:MyBundle.jar" ); 
```

如果是这样，那么这个相对 URL 的父目录是什么？（是 felix.cache.rootdir 吗？）。

如果允许相对 URL，那么 Felix 是否在内部将相对 URL 转换为绝对 URL？也就是说，如果我这样做：

```
String locationID = myBundle.getLocation(); 
```

它会返回绝对 URL 还是相对 URL？

（是的，我知道每个捆绑包也有一个很长的 int ID）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:49:23.600

Felix 的“当前目录”可能是您启动它时生效的目录。此外，框架不得更改您为安装包提供的位置字符串。所以它不会将提供的位置字符串转换为其他值。

# java - 如何在java中将普通套接字转换为客户端的ssl套接字？

> ID：11859668
> 
> 赞同：0
> 
> 时间：2012-08-08T07:25:57.623
> 
> 标签：java, android, sockets, networking, ssl

如何将连接到服务器的普通客户端套接字转换为同一端口上的 ssl 套接字？我正在使用 java 套接字。我的客户端在 android 中，服务器是 uvnc c/c++ 服务器。

创建套接字后。我正在使用套接字的输入流。我想为输入流启用 DSM 插件。我该如何继续或接近？谷歌搜索没有太大帮助！

我如何在客户端（android/java）解密一条消息，该消息已由 DSM 插件在服务器（c++ 服务器）端加密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:02:59.150

见`SSLSocketFactory.createSocket(Socket, ...)`方法。

# html - 表 TH 标签内的 H1、H2、H3、H4、H5、H6？- HTML

> ID：11859671
> 
> 赞同：23
> 
> 时间：2012-08-08T07:26:06.270
> 
> 标签：html, html-table, html-heading

我可以`H1, H2, H3, H4, H5, H6`在`table TH`标签内使用吗？- HTML

我尝试使用 w3 验证器进行验证，但它没有验证。我明白了：

```
The element h4 must not appear as a descendant of the th element.
<th><h4>Orange</h4></th> 
```

我使用 HTML5，所以我认为最好的办法是用来`<div>`制作表格，然后将`<H4>`标签放入其中。或者这也是一个坏主意？因为它看起来像这样：

```
<h4>first title</h4> <h4>second title</h4> <h4>third title</h4> 
<p>first parahraph</p> <p>second parahraph</p> <p>third parahraph</p> 
```

而且我不知道这看起来如何，3 个标题标签关闭，中间没有任何文本或段落。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-08-08T07:35:06.083

**[HTML 生活标准](http://www.whatwg.org/specs/web-apps/current-work/)明确禁止这一点**。[`th`元素](http://www.whatwg.org/specs/web-apps/current-work/#the-th-element)内容模型如下（重点添加）：

> 流式内容，但**没有**页眉、页脚、分段内容或**标题内容**后代。

“[标题内容](http://www.whatwg.org/specs/web-apps/current-work/#heading-content)”指的是`h1`等`h2`元素，还有`hgroup`元素：

> 标题内容定义了一个部分的标题（无论是使用分段内容元素显式标记，还是由标题内容本身暗示）。
> 
> `h1 h2 h3 h4 h5 h6 hgroup`

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2012-08-08T07:31:24.487

就有效的 HTML 而言？是的。

就它是一个好主意而言？是的 - 这些是标题区域，因此非常适合 H 标签。

有一种观点认为你不应该仅仅使用一个标签来包含另一个标签，所以你可以争辩标题文本应该直接放在`th`. 但是从 SEO 的角度来看，更重要的是 H 标签，所以你经常会看到这样的事情：

```
<th><h3>Some heading</h3></th> 
```

* * *

## 回答 #3

> 赞同：-8
> 
> 时间：2012-08-08T07:32:07.963

是的，但是 TH 表示表头，我认为表头中的表头不利于语义。也许它对 SEO 有好处。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-08-08T07:34:00.953

是的。您可以使用`H1 , H2,.. H6`表 TH 标签内的标签。这些也将在表 TH 标记中执行相同的功能。表格内容的文本大小可以根据您的需要进行更改。

只需查看此[链接](http://accessibility.psu.edu/headingshtml)以获取参考。

# ios - 适用于 iOS 的 Facebook SDK 3.0：无法为批量请求设置 omit_response_on_success

> ID：11859676
> 
> 赞同：0
> 
> 时间：2012-08-08T07:26:15.960
> 
> 标签：ios, facebook-graph-api, facebook-ios-sdk, facebook-batch-request

似乎对于批处理请求，所有参数都作为 relative_url 的一部分进行了转义，如果 omit_response_on_success 设置为 @(false)，应用程序将崩溃并显示以下消息：-[__NSCFNumber length]: unrecognized selector

```
NSDictionary *parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys: @(false), @"omit_response_on_success", nil];

FBRequest *request1 = [FBRequest requestWithGraphPath:self.graphPath
                                          parameters:parameters
                                          HTTPMethod:nil];

[newConnection addRequest:request1 completionHandler:handler batchEntryName:@"entryName"]; 
```

如果 graphPath 设置为`@"me/home?omit_response_on_success=0"`，则此操作将没有输出。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T01:04:11.287

是的，SDK 目前不支持此选项，请务必为此在[https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)上提交功能请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:45:54.730

[如docs](http://developers.facebook.com/docs/reference/api/batch/ "文档")中所述，这不应该是参数，而是请求 JSON 正文中的键值。我认为问题在于如何在 iOS SDK 中设置该键值对，因为我们无权访问请求的正文。据我所知，没有办法做到这一点，但我不确定这是否是一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T16:38:42.403

Facebook 不允许我们使用 iOS SDK 设置这个标志，这很烦人。我花了几个小时试图找出一种方法，这是我想出的一个小技巧。应该是比较安全的。只需使用 RSFBRequestConnection 而不是 FBRequestConnection：

```
@interface RSFBRequestConnection : FBRequestConnection

@end

@implementation RSFBRequestConnection

- (NSMutableURLRequest *)urlRequest
{
    NSMutableURLRequest *request = [super urlRequest];

    NSData *body = request.HTTPBody;
    NSString *bodyStr = [[NSString alloc] initWithData:body encoding:NSUTF8StringEncoding];
    NSLog(@"%@", bodyStr);

    NSString *fixed = [bodyStr stringByReplacingOccurrencesOfString:@"\"relative_url\"" withString:@"\"omit_response_on_success\":false,\"relative_url\""];

    request.HTTPBody = [fixed dataUsingEncoding:NSUTF8StringEncoding];

    return request;
}

@end 
```

# php - 我怎么知道 FuelPHP 的版本？

> ID：11859678
> 
> 赞同：1
> 
> 时间：2012-08-08T07:26:18.470
> 
> 标签：php, fuelphp

我前段时间下载了FuelPHP，但是在开发时遇到上传错误功能的问题。

我认为这是旧 FuelPHP 版本的问题。我知道新版本没有这个问题。

但是我不知道在哪里可以找到FuelPHP 版本。

你能给我一个关于如何找到FuelPHP版本的建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:48:41.607

检查文件内部`classes/fuel.php`：

```
const VERSION = '1.3-dev'; 
```

[https://github.com/fuel/core/blob/1.3/develop/classes/fuel.php#L29](https://github.com/fuel/core/blob/1.3/develop/classes/fuel.php#L29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:31:15.573

检查 README.md 文件，它在那里：“* 版本：1.2”

# gwt - 根据内容调整 GWT Panels 的高度

> ID：11859679
> 
> 赞同：2
> 
> 时间：2012-08-08T07:26:20.630
> 
> 标签：gwt

我们有许多使用不同类型 GWT 面板的屏幕。

许多屏幕上的一个常见问题是，内容大小是在运行时派生的。因此，如果我为面板（垂直/水平/DockPanel）定义了一个高度，并且当面板中添加了任何新组件或内容更多时，面板高度保持不变。所以我们看不到内容。UI 外观和感觉变得最差。

我们如何处理身高问题？当屏幕发生变化时，我们是否必须手动编码来调整每个面板/小部件的高度。这不是一种非常糟糕的编码方式吗？另外，现在我们在某些地方有数据网格，如果没有记录非常少，我们会看到数据网格下方留下了很大的空间，不知道我们如何处理这些情况？

根据评论在下面更新了几个示例：您的意思是说，只要我们知道内容垂直增长，我们总是可以选择 FlowPanel。因为，我们使用了垂直面板/水平面板的一些屏幕，当用户单击某些内容时，其中会添加和显示新字段。所以垂直面板/水平面板高度自动没有得到调整。再举一个例子，我们在 Dock Layout Panel 内容区域中有主 Vertical Panel，其中有一些内容可能会有所不同的小部件。所以现在如果我对大小不同的内容使用 FlowPanel，那么外部面板呢？会调整吗？再说说我们使用的那种面板 - Dock Layout Panel 与固定的页眉、页脚、左侧菜单和内容区域一起使用。在内容区域中使用滚动面板。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T14:25:47.647

在 GWT（和 HTML）中，您可以设置面板的高度或让它自然展开。一般来说，一旦你设定了某物的高度，你就失去了让它自然膨胀的能力。

GWT 中的某些面板隐式设置了它们自己的高度（或要求您设置它们的高度），因此对于动态大小的内容来说从来都不是好的选择。例如，LayoutPanels 和 ScrollPanels 永远不能动态调整，并希望您以编程方式提供大小信息。另一方面，FlowPanels 和 HTMLPanels 非常适合动态高度，并且不希望您明确设置它们的高度。

如果你想要一个滚动面板，当然你必须定义它应该有多高——它怎么知道什么时候滚动以及什么时候变得更大呢？但是，您可以将 FlowPanel（自动扩展）放入 ScrollPanel（您已将其设置为 800px 或其他）。然后，当您向 FlowPanel 添加内容时，它将在 ScrollPanel 内展开。然后用户可以滚动查看 FlowPanel 的不同部分。

故障排除提示：

1.  确保您没有在要自然展开的面板上设置高度
2.  确保您在面板上设置的高度应始终相同
3.  尝试使用 FlowPanels 而不是 Horizo​​ntal/VerticalPanels
4.  *LayoutPanels and AbsolutePanels always need explicit sizes and can never grow dynamically as you add more content. Anything you want to grow with content should probably be a FlowPanel or HTMLPanel.

# rhino-mocks - HowTo：引发事件处理程序具有 ref bool 参数的事件

> ID：11859681
> 
> 赞同：1
> 
> 时间：2012-08-08T07:26:28.727
> 
> 标签：rhino-mocks

使用 RhinoMocks 我想引发一个事件，其中事件处理程序签名如下所示： `MyEventHandler(int a value, ref bool handled) {..}`

如果我使用：
`myMock.Raise(x => x.MyEventHandler += null, aValue, handled);`

我收到以下错误消息： System.InvalidOperationException: Parameter #2 is System.Boolean 但应该是 System.Boolean&

我试过了：
`myMock.Raise(x => x.MyEventHandler += null, aValue, ref Arg<bool>.Ref(Is.Anything(), handled).Dummy);`
但这甚至没有编译......

引发此事件的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:00:52.347

看看下面的例子

```
[Test]
public void RaiseEvent()
{
    var mock = MockRepository.GenerateMock<IEventsRaiser>();
    mock.GetEventRaiser(x => x.MyEvent += null).Raise(1, Arg<bool>.Ref(new Anything(), true).Dummy);
}

public delegate void MyEventHandler(int a, ref bool handled);

public interface IEventsRaiser
{
    event MyEventHandler MyEvent;
} 
```

# javascript - 如何在高级编译模式下使用 Google Closure 编译器编译 jQuery UI 小部件？

> ID：11859686
> 
> 赞同：1
> 
> 时间：2012-08-08T07:26:37.853
> 
> 标签：javascript, jquery, jquery-ui, google-closure-compiler

鉴于此示例 jQuery UI 小部件，可在[http://jqueryui.com/demos/widget/](http://jqueryui.com/demos/widget/)上找到：

```
$(function() {
    // the widget definition, where "custom" is the namespace,
    // "colorize" the widget name
    $.widget( "custom.colorize", {
        // default options
        options: {
            red: 255,
            green: 0,
            blue: 0,

            // callbacks
            change: null,
            random: null
        },

        // the constructor
        _create: function() {
            this.element
                // add a class for theming
                .addClass( "custom-colorize" )
                // prevent double click to select text
                .disableSelection();

            this.changer = $( "<button>", {
                text: "change",
                "class": "custom-colorize-changer"
            })
            .appendTo( this.element )
            .button();

            // bind click events on the changer button to the random method
            // in 1.9 would use this._bind( this.changer, { click: "random" });
            var that = this;
            this.changer.bind("click.colorize", function() {
                // _bind would handle this check
                if (that.options.disabled) {
                    return;
                }
                that.random.apply(that, arguments);
            });
            this._refresh();
        },

        // called when created, and later when changing options
        _refresh: function() {
            this.element.css( "background-color", "rgb(" +
                this.options.red +"," +
                this.options.green + "," +
                this.options.blue + ")"
            );

            // trigger a callback/event
            this._trigger( "change" );
        },

        // a public method to change the color to a random value
        // can be called directly via .colorize( "random" )
        random: function( event ) {
            var colors = {
                red: Math.floor( Math.random() * 256 ),
                green: Math.floor( Math.random() * 256 ),
                blue: Math.floor( Math.random() * 256 )
            };

            // trigger an event, check if it's canceled
            if ( this._trigger( "random", event, colors ) !== false ) {
                this.option( colors );
            }
        },

        // events bound via _bind are removed automatically
        // revert other modifications here
        _destroy: function() {
            // remove generated elements
            this.changer.remove();

            this.element
                .removeClass( "custom-colorize" )
                .enableSelection()
                .css( "background-color", "transparent" );
        },

        // _setOptions is called with a hash of all options that are changing
        // always refresh when changing options
        _setOptions: function() {
            // in 1.9 would use _superApply
            $.Widget.prototype._setOptions.apply( this, arguments );
            this._refresh();
        },

        // _setOption is called for each individual option that is changing
        _setOption: function( key, value ) {
            // prevent invalid color values
            if ( /red|green|blue/.test(key) && (value < 0 || value > 255) ) {
                return;
            }
            // in 1.9 would use _super
            $.Widget.prototype._setOption.call( this, key, value );
        }
    });

    // initialize with default options
    $( "#my-widget1" ).colorize();

    // initialize with two customized options
    $( "#my-widget2" ).colorize({
        red: 60,
        blue: 60
    });

    // initialize with custom green value
    // and a random callback to allow only colors with enough green
    $( "#my-widget3" ).colorize( {
        green: 128,
        random: function( event, ui ) {
            return ui.green > 128;
        }
    });

    // click to toggle enabled/disabled
    $( "#disable" ).toggle(function() {
        // use the custom selector created for each widget to find all instances
        $( ":custom-colorize" ).colorize( "disable" );
    }, function() {
        $( ":custom-colorize" ).colorize( "enable" );
    });

    // click to set options after initalization
    $( "#black" ).click( function() {
        $( ":custom-colorize" ).colorize( "option", {
            red: 0,
            green: 0,
            blue: 0
        });
    });
}); 
```

使用[Google Closure Compiler](http://closure-compiler.appspot.com)在高级模式下编译代码，如下所示：

**编辑：**它应该`externs_url`代替`extern`，但显然你不能有多个`externs_url`定义。使用`code_url`而不是`extern`，编译器会抛出 117 个警告。

```
// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// @output_file_name default.js
// @extern https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @extern https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/jquery-ui.min.js
// @formatting pretty_print
// ==/ClosureCompiler==

$(function() {
// the widget definition, where "custom" is the namespace,
// "colorize" the widget name
$.widget( "custom.colorize", {
// default options
options: {
red: 255,
green: 0,
blue: 0,

// callbacks
change: null,
random: null
},

// the constructor
_create: function() {
this.element
// add a class for theming
.addClass( "custom-colorize" )
// prevent double click to select text
.disableSelection();

this.changer = $( "<button>", {
text: "change",
"class": "custom-colorize-changer"
})
.appendTo( this.element )
.button();

// bind click events on the changer button to the random method
// in 1.9 would use this._bind( this.changer, { click: "random" });
var that = this;
this.changer.bind("click.colorize", function() {
// _bind would handle this check
if (that.options.disabled) {
return;
}
that.random.apply(that, arguments);
});
this._refresh();
},

// called when created, and later when changing options
_refresh: function() {
this.element.css( "background-color", "rgb(" +
this.options.red +"," +
this.options.green + "," +
this.options.blue + ")"
);

// trigger a callback/event
this._trigger( "change" );
},

// a public method to change the color to a random value
// can be called directly via .colorize( "random" )
random: function( event ) {
var colors = {
red: Math.floor( Math.random() * 256 ),
green: Math.floor( Math.random() * 256 ),
blue: Math.floor( Math.random() * 256 )
};

// trigger an event, check if it's canceled
if ( this._trigger( "random", event, colors ) !== false ) {
this.option( colors );
}
},

// events bound via _bind are removed automatically
// revert other modifications here
_destroy: function() {
// remove generated elements
this.changer.remove();

this.element
.removeClass( "custom-colorize" )
.enableSelection()
.css( "background-color", "transparent" );
},

// _setOptions is called with a hash of all options that are changing
// always refresh when changing options
_setOptions: function() {
// in 1.9 would use _superApply
$.Widget.prototype._setOptions.apply( this, arguments );
this._refresh();
},

// _setOption is called for each individual option that is changing
_setOption: function( key, value ) {
// prevent invalid color values
if ( /red|green|blue/.test(key) && (value < 0 || value > 255) ) {
return;
}
// in 1.9 would use _super
$.Widget.prototype._setOption.call( this, key, value );
}
});

// initialize with default options
$( "#my-widget1" ).colorize();

// initialize with two customized options
$( "#my-widget2" ).colorize({
red: 60,
blue: 60
});

// initialize with custom green value
// and a random callback to allow only colors with enough green
$( "#my-widget3" ).colorize( {
green: 128,
random: function( event, ui ) {
return ui.green > 128;
}
});

// click to toggle enabled/disabled
$( "#disable" ).toggle(function() {
// use the custom selector created for each widget to find all instances
$( ":custom-colorize" ).colorize( "disable" );
}, function() {
$( ":custom-colorize" ).colorize( "enable" );
});

// click to set options after initalization
$( "#black" ).click( function() {
$( ":custom-colorize" ).colorize( "option", {
red: 0,
green: 0,
blue: 0
});
});
}); 
```

编译器返回 19 个警告：

```
Number of warnings: 19

JSC_INEXISTENT_PROPERTY: Property widget never defined on $ at line 4 character 0
$.widget( "custom.colorize", {
^
JSC_INEXISTENT_PROPERTY: Property addClass never defined on this.element at line 18 character 0
this.element
^
JSC_INEXISTENT_PROPERTY: Property disableSelection never defined on ? at line 18 character 0
this.element
^
JSC_INEXISTENT_PROPERTY: Property appendTo never defined on ? at line 24 character 15
this.changer = $( "<button>", {
               ^
JSC_INEXISTENT_PROPERTY: Property css never defined on this.element at line 46 character 0
this.element.css( "background-color", "rgb(" +
^
JSC_INEXISTENT_PROPERTY: Property _trigger never defined on this at line 53 character 0
this._trigger( "change" );
^
JSC_INEXISTENT_PROPERTY: Property _trigger never defined on this at line 66 character 5
if ( this._trigger( "random", event, colors ) !== false ) {
     ^
JSC_INEXISTENT_PROPERTY: Property option never defined on this at line 67 character 0
this.option( colors );
^
JSC_INEXISTENT_PROPERTY: Property css never defined on ? at line 77 character 0
this.element
^
JSC_INEXISTENT_PROPERTY: Property enableSelection never defined on ? at line 77 character 0
this.element
^
JSC_INEXISTENT_PROPERTY: Property removeClass never defined on this.element at line 77 character 0
this.element
^
JSC_INEXISTENT_PROPERTY: Property Widget never defined on $ at line 87 character 0
$.Widget.prototype._setOptions.apply( this, arguments );
^
JSC_INEXISTENT_PROPERTY: Property Widget never defined on $ at line 98 character 0
$.Widget.prototype._setOption.call( this, key, value );
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 103 character 0
$( "#my-widget1" ).colorize();
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 106 character 0
$( "#my-widget2" ).colorize({
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 113 character 0
$( "#my-widget3" ).colorize( {
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 123 character 0
$( ":custom-colorize" ).colorize( "disable" );
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 125 character 0
$( ":custom-colorize" ).colorize( "enable" );
^
JSC_INEXISTENT_PROPERTY: Property colorize never defined on ? at line 130 character 0
$( ":custom-colorize" ).colorize( "option", {
^ 
```

如何在高级编译模式下使用 Google Closure Compiler 编译jQuery UI 小部件（基于[jQuery UI 小部件工厂）？](http://wiki.jqueryui.com/w/page/12138135/Widget%20factory)如何解决编译器抛出的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:13:26.667

除了[jQuery 核心 externs 文件](http://code.google.com/p/closure-compiler/source/browse/trunk/contrib/externs/jquery-1.7.js)之外，您还需要一个 jQuery UI externs 文件。这是定义 jQuery UI 提供给编译器的符号和类型信息所必需的。

不幸的是，目前没有已知的 jQuery UI 外部文件。您的选择是创建足够的一个供您使用或使用 SIMPLE_OPTIMIZATIONS。

# android - webview链接不起作用

> ID：11859692
> 
> 赞同：6
> 
> 时间：2012-08-08T07:27:35.127
> 
> 标签：android, webview, click, hyperlink, response

我在我的 xml 中使用 webview，从资产目录加载 html 文件。但是点击链接有时会在第一次点击时启动浏览器，有时甚至在点击 5 次后也没有响应。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T07:32:55.943

为此，您必须使用[WebViewClient()](http://developer.android.com/reference/android/webkit/WebViewClient.html#WebViewClient%28%29)`WebView`

```
WebView web = (WebView)findViewById(R.id.webView1);
.....
.....   // Your stuff
.....
web.setWebViewClient(new HelloWebViewClient());

public class HelloWebViewClient extends WebViewClient
{
    public HelloWebViewClient()
    {
        // do nothing
    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url)
    {
        view.loadUrl(url);
        return true;
    }

    @Override
    public void onPageFinished(WebView view, String url)
    {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-29T19:02:59.883

只需添加这些行

```
webView.getSettings().setJavaScriptEnabled(true);
webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true); 
```

# android - 自动滚动列表到最后一个查看位置 Android

> ID：11859696
> 
> 赞同：0
> 
> 时间：2012-08-08T07:27:57.003
> 
> 标签：android

我需要实现具有自动滚动功能的列表视图，直到列表中最后看到的位置意味着当我第二次运行该活动时，它应该必须自动滚动到最后看到的位置。

在安卓中可以吗？我通过下面的数组适配器代码实现了我的列表：

```
 setListAdapter(new QuestionsArrayAdapter(this, SUBJECT, AUTHOR, RESPONCES, DATETIME, NEWPOST, LOGOIMAGE)); 
```

QuestionArratAdapter 类是：

```
 public class QuestionsArrayAdapter extends ArrayAdapter<String> {

      public QuestionsArrayAdapter(Context context, String[] questions,
        String[] author, String[] responces, String[] dateTime,
        String[] newPost, String[] logoImage) {
    super(context, R.layout.questionscreen, author);
    this.context = context;
    this.questions = questions;
    this.author = author;
    this.responces = responces;
    this.dateTime = dateTime;
    this.newPost = newPost;
    this.logoImage = logoImage;

      imageLoader=new ImageLoader(context.getApplicationContext());

}

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

    //System.out.println(s);

    //imageView.setImageResource(R.drawable.image_preview);
    return rowView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:36:49.710

您可以在离开活动时保存最后看到的位置；

```
int position = yourListView.getFirstVisiblePosition(); 
```

然后，当你第二次来到你的活动时，你可以像这样使用列表视图的平滑滚动方法，

```
yourListView.smoothScrollToPosition(position); 
```

`this.getListView()`在您使用的情况下，您可以使用代码获取 yourListView`ListActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:35:47.957

`listview`当您第二次打开活动时使用此属性

```
public void smoothScrollToPosition (int position) 
```

在代码中

```
listview.smoothScrollToPosition(pos) 
```

查看此[文档以获取列表视图](http://developer.android.com/reference/android/widget/ListView.html#smoothScrollToPosition%28int%29)

# security - Cakephp 2 安全组件和 ajax 调用

> ID：11859698
> 
> 赞同：5
> 
> 时间：2012-08-08T07:28:08.540
> 
> 标签：security, jquery, cakephp-2.1

处理我的 ajax 调用上的安全组件并没有按应有的方式进行。

你如何在 cakephp 2.x 中处理它？

应用控制器.php

```
public function beforeFilter() {
        $this->Security->blackHoleCallback = 'blackhole';
        if ($this->request->is('ajax')) {
            $this->Security->validatePost = false;
        } 
```

似乎不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-24T04:01:02.077

您仍然可以使用 Cake 提供的表单安全机制进行安全的 ajax 调用。为此，请呈现一个不可见的表单并放置输入以存储 ajax 调用参数。然后，使用 Javascript 在您的表单中设置这些参数并通过序列化来执行 ajax 调用。请记住，如果您启用了 CSRF 检查（并且禁用了每个会话一个令牌），您将必须使用新的有效 CSRF 令牌更新表单（您可以在控制器中使用 读取它`$this->request->params['_Token']['key']`）。

例子：

```
<?php
    echo $this->Form->create('AjaxForm');
        echo $this->Form->hidden('value');
    echo $this->Form->end();
?>

<script>    
    function makeAjaxCall()  {
        $.post(
            ajaxUrl,
            $('#AjaxForm').serialize(),
            function(data) {
                $('#AjaxForm [name="data[_Token][key]"]').val(data.newCsrfToken)
            }
        );
    };
</script> 
```

**为了进一步参考，我们创建了一个组件，该组件允许在动态修改的客户端表单上保持启用的安全性，并且在进行 ajax 调用时无需解锁字段或操作。您可以在[https://github.com/QTSdev/DynamicSecurity](https://github.com/QTSdev/DynamicSecurity)找到它。**

# php - 如果我有 lof 数据，为什么 TCPDF 结果不显示？

> ID：11859702
> 
> 赞同：0
> 
> 时间：2012-08-08T07:28:35.000
> 
> 标签：php, mysql, tcpdf

我用 PHP 开发了一个软件并用 TCPDF 报告。它运行良好，但是在 MySQL 中导入大量数据后，PHP 无法在浏览器超时之前生成报告。我尝试过使用最新的 firefox 和 Chrome 版本。

这是我的脚本：

```
 <?php

    require_once('tcpdf/config/lang/eng.php');
    require_once('tcpdf/tcpdf.php');

    // create new PDF documentation
     include "koneksi.php"; //file conection

     $bln=$_POST[BLN];  //for catch month
     $thn=$_POST[THN];  //for catch year
     $exp=$_POST[EXP];  //for catch expedition name

     if(empty($exp))
     {    
       $sql = "SELECT * FROM tb_exp_local where  bulan = '$bln'  AND tahun = '$thn'";
     }
     elseif($exp != "")
     {
       $sql = "SELECT * FROM tb_exp_local where  bulan = '$bln'  AND tahun = '$thn' AND nama_exp = '$exp'";
     }  
       $hasil = mysql_query($sql);

       $pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);

       // set font
       $pdf->SetFont('times', '', 11);

    // landscape
       $pdf->addPage( 'L', 'LETTER' );

  //this for convert html to pdf with html function    

       $html = '
    <table border="1" cellspacing="3" cellpadding="4">
        <tr><td colspan="9" align="center"><h2>Form Pantauan Expedisi Export</h2></td></tr>
        <tr>
            <th align="center"><b>Tanggal</b></th>
            <th align="center"><b>Nama Expedisi</b></th>
            <th align="center"><b>Nama Distributor</b></th>
            <th align="center"><b>Kota Tujuan</b></th>
            <th align="center"><b>No Faktur</b></th>
            <th align="center"><b>Kondisi Armada Pengiriman</b></th>
            <th align="center"><b>Ketepatan Jumlah</b></th>
            <th align="center"><b>Ketepatan Waktu Kirim</b></th>
            <th align="center"><b>Keterangan</b></th>
        </tr></table>';

       while ($data = mysql_fetch_array($hasil))
       {

         $html .= '<table border="1"><tr><td align="center">'.$data['tgl'].'</td>
                       <td align="center">'.$data['nama_exp'].'</td>
                       <td align="center">'.$data['nama_dist'].'</td>
                       <td align="center">'.$data['kota_tujuan'].'</td>
                       <td align="center">'.$data['faktur'].'</td>
                       <td align="center">'.$data['konarmada'].'</td>
                       <td align="center">'.$data['tepatjml'].'</td>
                       <td align="center">'.$data['tepatwaktu'].'</td> 
                       <td align="center">'.$data['ket'].'</td>  
                       </tr></table> ';

       }

       $pdf->writeHTML($html, true, false, true, false, ''); //for generate

       $pdf->Output('FormPantauExpLocalAll', 'I'); // for generate pdf file

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:32:30.473

服务器超时不依赖于浏览器。尝试在循环中使用[set_time_limit(60) ：](http://php.net/manual/en/function.set-time-limit.php)

```
 while ($data = mysql_fetch_array($hasil))
   {
       set_time_limit(60);
       $html .= '(...)';
   } 
```

此外，尝试在 (bulan, tahun, nama_exp) 列上将 INDEX 添加到您的数据库中，它应该会加快检索过程。另外，请注意您可能在此过程中内存不足（检查您服务器上的 PHP 日志）

# jsf - 选择项旁边的 JSF inputText

> ID：11859714
> 
> 赞同：0
> 
> 时间：2012-08-08T07:29:57.130
> 
> 标签：jsf, primefaces

我想在 f:selectItem 旁边显示 p:inputText 并获得如下图所示的结果： ![在此处输入图像描述](../Images/30215974d025df328e0ff1737531f55a.png)

用我的代码：

```
<p:selectManyCheckbox id="s1" value="#{myBean.selectedValues}" layout="pageDirection" >
    <f:selectItem itemLabel="value 1" itemValue="v1" />
    <f:selectItem itemLabel="value 2" itemValue="v2" />
    <f:selectItem itemLabel="value 3" itemValue="v3" />
    <p:inputText id="input1" value="#{myBean.input1Value}" />

</p:selectManyCheckbox> 
```

inputText 已在 selectItems 之前显示：

![在此处输入图像描述](../Images/49da665605b9f4495d36c7919af1940a.png)

我也尝试过将 inputText 放入 selectItem 标记，但结果是一样的。

```
<f:selectItem itemLabel="value 3" itemValue="v3">
    <p:inputText id="input1" value="#{myBean.input1Value}" />
</f:selectItem> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:24:30.517

最简单的方法是使用`p:panelGrid`with`columns="2"`

```
<p:panelGrid columns="2">  
    <p:selectManyCheckbox....
    </p:selectManyCheckbox>
    <p:inputText id="input1" value="#{myBean.input1Value}" />
</p:panelGrid> 
```

看看[Primefaces PanelGrid的其他示例](http://www.primefaces.org/showcase/ui/panelGrid.jsf)

# iphone - 如何获取当前日期的前 7 天日期？

> ID：11859719
> 
> 赞同：0
> 
> 时间：2012-08-08T07:30:00.253
> 
> 标签：iphone, objective-c, xcode

我正在做一个项目，我需要在用户从日期选择器中选择的特定日期前 7 天设置警报。

我使用以下代码从用户那里获取日期

```
NSDateFormatter *df = [[NSDateFormatter alloc]init];
[df setDateStyle:NSDateFormatterFullStyle];
NSString *dateStr = [NSString stringWithFormat:@"%@",[df stringFromDate:datePickerObj.date]];
[df release]; 
```

谁能告诉我如何获取所选日期前7天的日期。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T07:32:56.390

使用`dateByAddingComponents:toDate:options:`，像这样：

```
NSCalendar *calendar = [NSCalendar currentCalendar];
NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = -7;
NSDate *earlierDate = [calendar dateByAddingComponents:components
    toDate:datePickerObj.date options:0]; 
```

# java - 如何在 Java 中调用 PostgreSQL 过程？

> ID：11859723
> 
> 赞同：3
> 
> 时间：2012-08-08T07:30:23.293
> 
> 标签：java, postgresql

如何在 Java 中进行这样的查询并获得结果：

```
SELECT filedata.num,st_area(ST_Difference(ST_TRANSFORM(filedata.the_geom,70066),filedata_temp.the_geom))
FROM filedata, filedata_temp
Where filedata.num=filedata_temp.num 
```

或者，我认为如果我从此查询在 Postgres 中创建过程会更好。

```
CREATE OR REPLACE FUNCTION get_geom_difference()
RETURNS void AS
$$
BEGIN
SELECT filedata.num,st_area(ST_Difference(ST_TRANSFORM(filedata.the_geom,70066),filedata_temp.the_geom))
FROM filedata, filedata_temp
Where filedata.num=filedata_temp.num

end;
$$
LANGUAGE 'plpgsql' 
```

并称之为

```
Connection ce_proc= null;
ce_proc = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
java.sql.CallableStatement proc =  ce_proc.prepareCall("{get_geom_difference()}");
proc.execute();
proc.close();
ce_proc.close(); 
```

但是如何在 Java 中从这个过程中得到结果呢？

### 更新

我试过这个SP

```
DROP FUNCTION get_geom_difference();

CREATE OR REPLACE FUNCTION get_geom_difference()
RETURNS integer AS
$$
DECLARE

tt integer;
BEGIN
SELECT filedata.num INTO tt
FROM filedata
Where filedata.num=1;
RETURN tt;

END;
$$
LANGUAGE 'plpgsql' 
```

并打电话

```
Class.forName("org.postgresql.Driver");
Connection connect= null;
connect = DriverManager.getConnection("jdbc:postgresql://localhost:5432/postgis","postgres","123456");
java.sql.CallableStatement proc =  connect.prepareCall("{?=call get_geom_difference()}");
proc.registerOutParameter(1, java.sql.Types.INTEGER);
proc.executeQuery(); 
ResultSet results = (ResultSet) proc.getObject(1); 
```

并得到一个错误：

> `in line`org.apache.jasper.JasperException：在第 25 行proc.executeQuery()处处理 JSP 页面 /commit_changes.jsp 时发生异常；
> 
> 根本原因 javax.servlet.ServletException：org.postgresql.util.PSQLException：查询未返回任何结果

但查询

```
SELECT filedata.num 
FROM filedata
Where filedata.num=1; 
```

返回`1`。

错在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T12:16:31.107

有很多不同的`CallableStatement`构造函数，但[只有其中两个可以让您返回结果](http://w3processing.com/index.php?subMenuId=151)。

A`ResultSet`由 . 返回`CallableStatement.executeQuery()`。上面的链接中有一个很好的完整示例。

我不知道从 a 返回标量结果`CallableStatement`是否合法。不过，我希望`PgJDBC`将它转换为一行的行集，所以它*应该可以*工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T07:29:39.927

您可以在很大程度上简化该功能。（为了这个问题，保持简单的功能。）

```
CREATE OR REPLACE FUNCTION get_geom_difference()
   RETURNS integer AS
$BODY$
   SELECT num
   FROM   filedata
   WHERE  num = 1 
   LIMIT  1;  -- needed if there can be more than one rows with num = 1
$BODY$    LANGUAGE SQL; 
```

尽管从技术上讲，您在问题中的内容也可以使用 - 只要数据类型匹配。可以？`filedata.num`是类型的列`integer`吗？这就是我从示例中收集到的信息。关于[你的另一个问题](https://stackoverflow.com/q/11862936/939860)，我假设`numeric`缺乏信息。其中至少有一个会失败。

如果函数的返回类型与返回值不匹配，您会从 PostgreSQL 函数中得到一个错误。如果配置正确，在这种情况下，您的 PostgreSQL 日志将包含详细的错误消息。

当您在 PostgreSQL 中创建上述函数然后调用时，您会看到什么：

```
SELECT get_geom_difference(1); 
```

从[psql](http://www.postgresql.org/docs/current/interactive/app-psql.html)。（最好在同一个会话中排除数据库、端口、服务器或用户的混合。）

调用一个带一个参数并返回一个标量值的简单函数似乎很简单。[PostgreSQL JDBC 手册的第 6.1 章](http://jdbc.postgresql.org/documentation/91/callproc.html)有一个完整的示例，它似乎与您的问题完全一致（不过，我的专长是 Postgres 而不是 JDBC）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:33:25.467

您的查询示例很典型。所以你需要的是

[Java 数据库连接 (JDBC)](http://en.wikipedia.org/wiki/JDBC_driver)

以及为它提供服务所需的一切都在包[java.sql中](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/package-summary.html)

因此，在这一点上，我建议您阅读一些教程，如果您有一些特殊问题，请在 SO 上写下它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:35:50.053

您将需要 JDBC 来执行此操作。您应该能够在[此处](http://docs.oracle.com/javase/tutorial/jdbc/index.html)找到所有 JDBC 相关信息。

[在此处](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)查看有关如何将 Java 应用程序连接到 PostgreSQL 的更详细的教程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T23:14:28.187

适用于 100% java 7 和 postgres pgadmin 2016，在您的事务中使用 createNativeQuery 编写并更改**myschema.mymethodThatReturnASelect**

用于方案和函数的名称。

```
@Override
    public List<ViewFormulario> listarFormulario(Long idUsuario) {
        List<ViewFormulario> list =null;
        try {
            Query q = em.createNativeQuery("SELECT * FROM myschema.mymethodThatReturnASelect(?);");
            q.setParameter(1, idUsuario);

             List<Object[]> listObject = (List<Object[]>) q.getResultList();
            if (listObject != null && !listObject.isEmpty()) {
                list = new ArrayList<>();
                for (Object o[] : listObject) {
                    ViewFormulario c = new ViewFormulario();
                    c.setIdProyecto(o[0] != null ? Long.valueOf(o[0].toString()) : -1L); 
```

……等等……等等。

# java - 如何使用jooq来表达mysql REGEXP？

> ID：11859734
> 
> 赞同：1
> 
> 时间：2012-08-08T07:31:06.450
> 
> 标签：java, mysql, sql, jooq

我有这样的查询：

```
SELECT * 
FROM uni_customer 
WHERE mobile REGEXP '^(1[3,4,5,8]){1}\\d{9}$' 
```

但是字段中没有这样`REGEXP(String)`的功能，并且mysql不支持如下语法：

```
SELECT * 
FROM uni_customer 
WHERE  regexp(mobile,'^(1[3,4,5,8]){1}\\d{9}$') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T14:59:41.747

即将推出的 jOOQ 2.5.0 中将很快提供对[运营商](https://github.com/jOOQ/jOOQ/issues/620)的官方[支持。`REGEXP`](https://github.com/jOOQ/jOOQ/issues/620)同时，您可以自己扩展 jOOQ，如下所示：

```
Condition regexp = Factory.condition("{0} REGEXP {1}", 
                                     UNI_CUSTOMER.MOBILE,
                                     val("^(1[3,4,5,8]){1}\\d{9}$")); 
```

或在查询中：

```
create.select()
      .from(UNI_CUSTOMER)
      .where(condition("{0} REGEXP {1}", 
                       UNI_CUSTOMER.MOBILE, val("^(1[3,4,5,8]){1}\\d{9}$"))); 
```

# c++ - 如何初始化字符串指针？

> ID：11859737
> 
> 赞同：5
> 
> 时间：2012-08-08T07:31:17.340
> 
> 标签：c++, string

我想将静态值存储在字符串指针中是否可行？

如果我喜欢

```
string *array = {"value"}; 
```

发生错误

```
error: cannot convert 'const char*' to 'std::string*' in initialization 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T07:34:26.403

然后你需要写

```
string *array = new string("value"); 
```

虽然你最好使用

```
string array = "value"; 
```

因为这是使用它的预期方式。否则你需要跟踪内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:35:49.570

`std::string`指针必须指向一个对象`std::string`。它实际指向的内容取决于您的用例。例如：

```
std::string s("value"); // initialize a string
std::string* p = &s; // p points to s 
```

在上面的示例中，`p`指向`string`具有自动存储持续时间的本地。当它被销毁时，任何指向它的东西都会指向垃圾。

您还可以使指针指向动态分配的字符串，在这种情况下，您负责在完成后释放资源：

```
std::string* p = new std::string("value"); // p points to dynamically allocated string
// ....
delete p; // release resources when done 
```

建议您使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointers)而不是原始指针来动态分配对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T08:20:03.683

作为s`array`的数组，`string`你可以试试这个：

```
int main()
{
  string *array = new string[1]; 
  array[1] = "value";
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:35:59.820

您可以将文字显式转换为字符串：

```
 std::string array[] = {std::string("value")}; 
```

请注意，您必须将其定义为数组，而不是指针。当然，如果您有多个元素，则数组最有意义，例如：

```
string array[] = {string("value1"), string("value2"), string("etc")}; 
```

# maven - Maven 配置，如果 System.out.println 在代码中，则构建失败

> ID：11859744
> 
> 赞同：1
> 
> 时间：2012-08-08T07:31:55.777
> 
> 标签：maven, build, pom.xml, system.out

我们想从项目中删除所有 system.out.println。

如何配置 pom 或相同所需的依赖项是什么。

谢谢，阿尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-06T14:30:25.313

我正在使用 maven PMD 插件来解决同样的问题。

1-将插件添加到 pom.xml

```
 <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-pmd-plugin</artifactId>
            <configuration>
                <rulesets>
                    <ruleset>${basedir}\src\main\resources\my-rules.xml</ruleset>
                </rulesets>
            </configuration>
        </plugin>
    </plugins 
```

2- 将 my-rules.xml 放在项目资源文件夹下

```
<?xml version="1.0"?>
<ruleset name="Custom ruleset"
         xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
    <description>
    </description>

    <rule ref="rulesets/java/logging-java.xml/SystemPrintln" />
    <rule ref="rulesets/java/logging-java.xml/AvoidPrintStackTrace"/>
    <rule ref="rulesets/java/basic.xml/OverrideBothEqualsAndHashcode"/>
    <rule ref="rulesets/java/empty.xml/EmptyFinallyBlock"/>
    <rule ref="rulesets/java/basic.xml/ReturnFromFinallyBlock" />
    <rule ref="rulesets/java/logging-java.xml/LoggerIsNotStaticFinal"/>
</ruleset> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:44:37.263

我没有亲自做过，但看看[FindBugs](http://findbugs.sourceforge.net/factSheet.html)。可以在[此处](http://mojo.codehaus.org/findbugs-maven-plugin/)找到 Maven 插件。

您可以编写自己的自定义检测器来搜索`System.out.print`和`System.out.println`。欲了解更多信息，请参阅此网站：

[http://www.ibm.com/developerworks/library/j-findbug2/](http://www.ibm.com/developerworks/library/j-findbug2/)

# java - 为 wso2 esb UsernameToken 安全服务生成存根

> ID：11859747
> 
> 赞同：2
> 
> 时间：2012-08-08T07:32:07.100
> 
> 标签：java, wso2, stub, wso2esb

我正在尝试为 wso2 esb 服务编写一个简单的 java 客户端，使用 UsernameToken 方法进行保护。我很难生成 java 存根。

我首先尝试了 WSDL2Java，但它没有生成有效的 pom.xml 文件，并且 maven 无法解析依赖项。

所以我决定尝试使用 JAX-WS RI。存根生成并且看起来很好，但是当我尝试调用服务时出现以下异常。

```
 Exception in thread "main" com.sun.xml.internal.ws.client.ClientTransportException: HTTP transport error: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching xxxxxx found
    at com.sun.xml.internal.ws.transport.http.client.HttpClientTransport.getOutput(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.process(Unknown Source)
    at com.sun.xml.internal.ws.transport.http.client.HttpTransportPipe.processRequest(Unknown Source)
    at com.sun.xml.internal.ws.transport.DeferredTransportPipe.processRequest(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.__doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber._doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.doRun(Unknown Source)
    at com.sun.xml.internal.ws.api.pipe.Fiber.runSync(Unknown Source)
    at com.sun.xml.internal.ws.client.Stub.process(Unknown Source)
    at com.sun.xml.internal.ws.client.sei.SEIStub.doProcess(Unknown Source)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
    at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(Unknown Source)
    at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(Unknown Source)
    at $Proxy32.getcodelists(Unknown Source)
    at com.sirmaitt.esb.codelists.client.Client.main(Client.java:32)
Caused by: javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No name matching xxxxxx found
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(Unknown Source)
    ... 15 more
Caused by: java.security.cert.CertificateException: No name matching xxxxx found
    at sun.security.util.HostnameChecker.matchDNS(Unknown Source)
    at sun.security.util.HostnameChecker.match(Unknown Source)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkIdentity(Unknown Source)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)
    ... 27 more 
```

我知道异常是由 wso2 服务器拥有的自签名证书引起的。我能做些什么来避免它？

是否有一些更简单的方法可以使用 UsernameToken 安全方法为 ssl 安全服务生成有效的 java 存根？这是我的服务定义：

```
 <proxy name="bala-ala" transports="https" startOnLoad="true" trace="disable">
        <target>
            <endpoint>
                <address uri="http://xx.xx.xxx.xx:9766/services/list?wsdl"/>
            </endpoint>
            <outSequence>
                <send/>
            </outSequence>
        </target>
        <publishWSDL uri="http://xx.xx.xxx.xx:9766/services/Codelists?wsdl"/>
        <policy key="conf:/repository/axis2/service-groups/bala-ala/services/bala-ala/policies/UTOverTransport"/>
        <enableSec/>
    </proxy> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T10:14:24.067

您仍然可以使用 http 中公开的 wsdl。（服务仅在 https 中公开，但 wsdls 仍然在 http 中公开）

```
http://localhost:8280/services/bala-ala?wsdl 
```

如果您想继续使用 https 中公开的 wsdl，最好的选择是将 ESB 的证书导入到 cacerts。

# android - 如何实现书签功能，将章节分成多页的epub文件？

> ID：11859753
> 
> 赞同：1
> 
> 时间：2012-08-08T07:32:11.613
> 
> 标签：android

我已解压缩并解析 epub 文件并在 Webview 中呈现它。现在我想知道如何实现书签功能、搜索文本和最重要的将章节分成多个页面。如果有人对此有任何想法，请与我分享。

# java - 如何计算保留堆大小和浅堆大小？

> ID：11859755
> 
> 赞同：1
> 
> 时间：2012-08-08T07:32:16.090
> 
> 标签：java, performance

我是 Java 新手，我刚刚使用 eclispe 的 MAT 进行了堆转储分析。所以我只想了解以下几点 a) 了解什么是浅堆和保留堆大小以及它是如何计算的？如果您提供示例，那就太好了。b）对于性能问题，大多数人建议我保持最小和最大堆大小相同，这样可以吗？还是对应用程序的应用程序是主观的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:38:01.410

**浅堆**是一个 消耗的内存`object`。一个对象每个引用需要 32 位或 64 位（取决于操作系统架构），每个整数需要 4 个字节，每个长整型需要 8 个字节等。根据堆转储格式，可以调整大小

**X 的保留堆**是 X 的保留集中所有对象的浅层大小的总和，即由 X 保持活动的内存。

参考[这个](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.mat.ui.help/concepts/shallowretainedheap.html)链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:54:04.007

JVM 大小调整和调优不是一门精确的科学，因此一揽子决定将最小和最大大小设置为相同不一定是最好的配置选择。

我发现[这](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)很好地解释了您需要做出的各种决定。在解决您的问题时，它说：

> 将 -Xms 和 -Xmx 设置为相同的值可以通过从虚拟机中删除最重要的大小决定来提高可预测性。但是，如果您做出错误的选择，虚拟机将无法进行补偿。

如果您将最小值和最大值设置为相同，但 Eden 空间大小不合适，则最终可能会导致垃圾收集性能不佳。

决定大小的唯一方法是在各种工作负载下运行您的应用程序并查看 GC 的执行情况。

# jquery - 从 javascript 可见的 Radbutton 设置

> ID：11859758
> 
> 赞同：0
> 
> 时间：2012-08-08T07:32:25.030
> 
> 标签：jquery, telerik

下面的语句不能做。

```
$find("<%=RadButtonStackoveflow.ClientID%>").visible(false); 
```

但是有什么方法可以让 JavaScript 中的 Radbutton 看起来是假的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:48:21.947

试试这个：

```
var radButton = $find("<%= RadButtonStackoveflow.ClientID %>");
radButton.set_visible(false); 
```

# facebook - graph api - 检索页面的喜欢列表

> ID：11859762
> 
> 赞同：2
> 
> 时间：2012-08-08T07:32:28.537
> 
> 标签：facebook, facebook-graph-api

我一直在寻找并发现这可能是不可能的..但我想我还是会问：

我有这个 facebook 页面，我想显示喜欢我页面的每个人的用户图像（=头像）。我认为这真的很奇怪，使用 facebook API 是不可能的！

所以基本上我需要检索喜欢我的页面的用户列表。像这样的东西：（但喜欢不存在）。

[https://graph.facebook.com/page_name/likes?access_token=token](https://graph.facebook.com/page_name/likes?access_token=token)

如果我使用简单的 facebook 插件 - 它会显示喜欢我页面的人的用户图像。那么为什么插件可以检索这些图像但 API 不能呢？

任何帮助深表感谢！

在此先感谢，本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:22:45.070

您无法调用 API 调用或 FQL 查询来获取喜欢该页面的用户列表。出于隐私原因，Facebook 已阻止此类呼叫。您应该坚持使用该插件。

# windows-8 - 设置 ToastNotification 的背景

> ID：11859764
> 
> 赞同：6
> 
> 时间：2012-08-08T07:32:30.337
> 
> 标签：windows-8, microsoft-metro, toast

我想知道我们如何更改 Windows Metro（或桌面）应用程序中 toast 通知的背景颜色。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T08:16:16.020

前景：您可以将应用清单中的“前景文本”设置为深色或浅色。

背景：这遵循应用程序清单的“背景颜色” - 因此将与应用程序的磁贴背景相同。

对于我使用过的大多数应用程序，根据 UI 规范设置磁贴颜色就足够了 - 然后将“前景文本”设置为浅色或深色。如果您愿意，您当然可以覆盖浅色/深色主题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-08T15:24:19.760

对于桌面应用程序，toast 通知（和开始屏幕磁贴）上使用的背景颜色不能由应用程序本身配置。磁贴的颜色由用户选择的开始屏幕颜色主题（PC 设置 -> 个性化 -> 开始屏幕）决定，吐司通知的背景颜色始终为灰色（当不在高对比度主题中时） ）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T07:37:49.690

我认为它总是使用清单文件中指定的颜色。因此，要更改颜色，您必须更改整个应用程序的颜色。

# actionscript-3 - 尝试在 Flex 3 中更改状态时出现异常

> ID：11859766
> 
> 赞同：0
> 
> 时间：2012-08-08T07:32:39.180
> 
> 标签：actionscript-3, apache-flex, flex3

我试图通过单击按钮将舞台状态更改为不同的状态。问题是出现`some times`异常，因为`The supplied DisplayObject must be child of the caller`. 这是我试图改变状态的方法

```
this.currentState = 'fullScreen'; 
```

这`this`是一个`canvas`.

这是州的 MXML`fullscreen`

```
<mx:State name="fullScreen">
            <mx:RemoveChild target="{lstExpert}"/>
            <mx:RemoveChild target="{screenToggle}"/>

            <mx:AddChild  relativeTo="{outContainer}" position="firstChild">
                <mx:HBox id="topHeaderBox" horizontalAlign="left" verticalAlign="middle" width="98.5%" height="60"/>
            </mx:AddChild>

            <mx:AddChild relativeTo="{topHeaderBox}" position="firstChild" >
                <mx:Label id="lblCourseName" width="100%"  text="Name" color="#ffffff" fontFamily="Arial" fontSize="14" fontWeight="bold" height="20" />    
            </mx:AddChild>

            <mx:AddChild target="{screenToggle}" relativeTo="{lblCourseName}" position="after" />

            <mx:AddChild relativeTo="message" position="before">
                <mx:Spacer id="Bar" height="5" width="2" />
            </mx:AddChild>
</state> 
```

这里会有什么错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:28:49.500

您可能想要绑定最后一个对象的`relativeTo`属性值。`AddChild`意思是这样写：

```
<mx:AddChild relativeTo="{message}" position="before"> 
```

假设您有一个具有该 ID 的元素。

希望这可以帮助。

# c# - FTP-Framework - 下载文件异步 - 回调、委托、线程、BackgroundWorker、异常内线程

> ID：11859773
> 
> 赞同：1
> 
> 时间：2012-08-08T07:32:59.690
> 
> 标签：c#, multithreading, exception, exception-handling

我正在编写一个 FTPS 框架。用户（使用我的框架的程序员）应该可以异步下载文件（在另一个文件中`Thread`）。所以，我的大问题是，程序员无法处理在传输中`Exception`的 -Method 中抛出的 s ： - 当我要求告诉程序下载传输完成时，“他”如何处理s（来自他的)? -有同样的问题，而且程序员必须给我一个`DownloadFile``Thread``AsyncCallback``Exception``Thread`
`BackgroundWorker``RunWorkerCompletedEventHandler(object, RunWorkerCompletedEventArgs)`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:09:25.623

自 .NET 2.0 以来，有两种公开异步 API 的选项：

[异步编程模型](http://msdn.microsoft.com/en-us/library/ms228963%28v=vs.100%29.aspx)- 有利于更多后端/库代码。

[基于事件的异步模式](http://msdn.microsoft.com/en-us/library/wewwczdw.aspx)- 当您的代码将在 UI 中使用时受到青睐。

在 .NET 4 中，您现在还拥有“基于任务的异步模式”（ TAP ）：

[使用任务简化异步编程](http://msdn.microsoft.com/en-us/magazine/ff959203.aspx)

如果可以的话，我会选择 TAP——它是三者中最好的，可以解决异常处理等问题。

# android - 如何在布局中包含首选项

> ID：11859784
> 
> 赞同：3
> 
> 时间：2012-08-08T07:33:56.667
> 
> 标签：android, android-layout, android-intent

我可以在布局中包含一个首选项，比如我们如何使用`<include layout=""/>`标签在另一个布局中包含一个布局。

我的布局代码是这样的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical">

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<include layout="@layout/settings"/>
<!-- <include layout="@xml/set_variables"/> -->
</LinearLayout> 
```

在上面的布局中，我试图包含首选项`@xml/set_variables`，但如果我取消注释，我的应用程序将崩溃`<include layout="@xml/set_variables"/>`。请任何人建议是否有任何方法可以在布局中包含偏好，或者我应该忘记这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T11:44:56.610

我浏览了[这个链接](https://stackoverflow.com/questions/10760420/add-a-button-to-the-bottom-of-preferences-screen)并找到了解决方案在我添加`onCreate`的y 中`PreferenceActivit`

```
setContentView(R.layout.settings);
addPreferencesFromResource(R.xml.set_variables); 
```

并添加`ListView`到`settings`布局中

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" /> 
```

它符合我的要求

# jquery - 如何使用谷歌地图从用户位置导航到 HTML5 网页上的固定点？

> ID：11859787
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:34:14.890
> 
> 标签：jquery, html, google-maps, geolocation

我是地理定位的新手，我尝试了很多次让我的网站定位用户的位置，但我仍然不知道如何从用户的位置导航到谷歌地图上的固定点，我正在使用以下代码：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <meta charset="utf-8">
    <title>Google Maps</title> 
    <link rel="stylesheet" href="css/pink.min.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile.structure-1.1.1.min.css" />

    <style>
        #map-page, #map-canvas { width: 100%; height: 300px; padding: 0; }
    </style>
    <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
    <script type="text/javascript" src="../JQuery Mobile 程式碼/ch9/maps.js"></script>
    <script src="http://code.jquery.com/mobile/1.0/jquery.mobile-1.0.min.js"></script>
    <script src="http://maps.google.com.tw/maps/api/js?sensor=false"></script>
    <script type="text/javascript">

$( "#map-page" ).live( "pageinit", function() {

    var defaultLatLng = new google.maps.LatLng(22.983587,120.22599);  // Default to Hollywood, CA when no geolocation support

    if ( navigator.geolocation ) {
        function success(pos) {

            // Location found, show map with these coordinates
            drawMap(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));
        }

        function fail(error) {
            console.log(error);
            drawMap(defaultLatLng);  // Failed to find location, show default map
        }

        // Find the users current position.  Cache the location for 5 minutes, timeout after 6 seconds
        navigator.geolocation.getCurrentPosition(success, fail, {maximumAge: 500000, enableHighAccuracy:true, timeout: 6000});
    } else {
        drawMap(defaultLatLng);  // No geolocation support, show default map    
    }

    function drawMap(latlng) {
        var myOptions = {
            zoom: 10,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP

        };

        var map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);

        // Add an overlay to the map of current lat/lng
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: "Greetings!"
        });
    }

    //設置起點  
function setstart(){  

    var latitude = pos.coords.latitude;
    var longitude = pos.coords.longitude;
    var title="Your Location";
    //地图中心坐标
    var latlng = new google.maps.LatLng(latitude,longitude);    

    if(!startpoint){  

    startpoint = new google.maps.Marker({  

        map:myMap,  

        position:latlng,  

        draggable: true  

    });}  

}  

//設置終點  
function setend(){  

    var newcenter = new google.maps.LatLng(22.981666,120.194301);

    if(!endpoint){  

    endpoint = new google.maps.Marker({  

        map:myMap,  

        position:newcenter,  

        draggable: true  

    });}  

}  

//路線導航  
function start2end(model){  

    directionsDisplay = new google.maps.DirectionsRenderer();  

    directionsDisplay.setMap(myMap);  
    var startlatlng=startpoint.getPosition();  
    var endlatlng=endpoint.getPosition();  
    $("#jczbresult").show("slow");  
    $("#jczbresultmin").hide();  
    var geocoder = new google.maps.Geocoder();  
    geocoder.geocode({'latLng': startlatlng}, function(results, status) {  
          if (status == google.maps.GeocoderStatus.OK) {  
            if (results[1]) {  
                $("#startdrive").html('起點:'+results[1].formatted_address);  
            }}});   
    geocoder.geocode({'latLng': endlatlng}, function(results, status) {  
          if (status == google.maps.GeocoderStatus.OK) {  
            if (results[1]) {  

                $("#enddrive").html('終點:'+results[1].formatted_address);  
            }}});   

    if(model=='WALKING'){  
        $("#jczbtitle").innerHTML="步行查詢結果";  
        directionsService.route({  

            origin: startlatlng,  

            destination: endlatlng,  

            travelMode: google.maps.DirectionsTravelMode.WALKING  

            }, function(result, status){  

                if(status == google.maps.DirectionsStatus.OK){  

                     directionsDisplay.setDirections(result);//標記地圖顯示路線  
                     showSteps(result);//右側面板顯示詳細路線信息  

                    }  

                });  

        }else{  
            $("#jczbtitle").innerHTML="駕車查詢結果";  
            directionsService.route({  

                origin: startlatlng,  

                destination: endlatlng,  

                travelMode: google.maps.DirectionsTravelMode.DRIVING  

                }, function(result, status){  

                    if(status == google.maps.DirectionsStatus.OK){  

                         directionsDisplay.setDirections(result);  
                         showSteps(result);//右側面板顯示詳細路線信息  

                        }  

                    });  

            }  

}  
//顯示起點終點之間的詳細信息  
function showSteps(directionResult) {  
    $("#driveline").html('');  
    var myRoute = directionResult.routes[0].legs[0];  
    var v_html = '';  
    for (var i = 0; i < myRoute.steps.length; i++) {  
        var geocoder = new google.maps.Geocoder();  
        v_html += '<div class="carSearchtr02" id="driver_step_'+i+'">'+(i+1)+'.'+myRoute.steps[i].instructions+',此段路程為:'+myRoute.steps[i].distance.value+'米&lt;/div>';  
        //myRoute.steps[i].instructions;  
    }  
    if(v_html != '')  
    {  
         v_html = '<div class="carSearchtr01">总里程：'+myRoute.distance.value+'米&lt;/div>'+v_html;  
         $("#driveline").html(v_html);  
    }  
    else  
    {  
            $("#driveline").html('很抱歉，沒有找到符合您要的條件，您可以試試下面的方法:<br>調整一下您輸入的搜索關鍵字');  
    }  

  }  

});

    </script>

</head> 
<body> 

<div data-role="page" id="map-page">
    <div data-role="header">
        <a href="#" data-icon="home" data-iconpos="notext" data-direction="reverse"></a>
        <h1>Maps</h1>
    </div>

    <div data-role="content" id="map-canvas">
        <!-- map loads here... -->
    </div>
    <div data-role="footer"  class="ui-navbar-custom" >
        <div data-role="navbar" class="ui-navbar-custom">
        <ul>
          <li><a  href="index.html" data-ajax="false" data-icon="custom">首頁</a></li>
          <li><a href="listview.html" data-ajax="false" data-icon="custom" >營業項目</a></li>
          <li><a href="news.html" data-ajax="false" data-icon="custom" >最新消息&lt;/a></li>
          <li><a href="photo.html" data-ajax="false" data-icon="custom" >案例分享</a></li>
          <li><a href="phone.html" data-ajax="false"  data-icon="custom">聯絡我們&lt;/a></li>
        </ul>
        </div>
    </div>
</div>

</body>
</html> 
```

但是它不起作用，谁能告诉我怎么了，thx

顺便说一句，我有一个代码演示

[http://appkon.com/demo/project2/maps.html](http://appkon.com/demo/project2/maps.html)

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T08:24:01.290

你有一个应该绘制路线的函数：`start2end()`，但你没有在任何地方调用这个函数。

所以你应该从调用函数开始，例如在成功回调中`navigator.geolocation.getCurrentPosition()`

然后您将收到不同的错误，但修复错误应该会引导您获得所需的结果。

# c# - 当我不希望 WPF 创建新的子菜单时？

> ID：11859789
> 
> 赞同：1
> 
> 时间：2012-08-08T07:34:17.833
> 
> 标签：c#, wpf, xaml, wpf-controls

我正在使用 WPF 菜单，不幸的是，每当我在 Visual Studio 设计器中设置图标时，都会收到异常错误。

为了解决这个问题，我尝试使用 XAML 代码设置图标，我有以下内容：

```
<Menu Height="23" Name="menu1" VerticalAlignment="Top" BorderThickness="0" SnapsToDevicePixels="True" OverridesDefaultStyle="False" Opacity="1">
    <MenuItem Header="Help">
        <MenuItem Header="About"> 
            <Image Source="Images/Help.png" />
        </MenuItem>
    </MenuItem>
</Menu> 
```

不幸的是，这会产生以下情况：

![在此处输入图像描述](../Images/5c12e1286b742ae2c0f926bd3598e4df.png)

我试过用谷歌搜索这个问题，但看不到我的 XAML 哪里出了问题。我知道这很简单，但我被卡住了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:43:33.667

你想要这样的东西吗？

```
<Menu Height="23" Name="menu1" VerticalAlignment="Top" BorderThickness="0" SnapsToDevicePixels="True" OverridesDefaultStyle="False" Opacity="1">
  <MenuItem Header="Help">
   <MenuItem>
    <MenuItem.Header>
      <StackPanel>
        <Image Source="Images/Help.png" />
        <TextBlock Text="About" />
      </StackPanel>
     </MenuItem.Header>
    </MenuItem>
   </MenuItem>
 </Menu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:45:23.640

这是你想要的吗？

```
<Menu Height="23" Name="menu1" VerticalAlignment="Top" BorderThickness="0" SnapsToDevicePixels="True" OverridesDefaultStyle="False" Opacity="1">
    <MenuItem Header="Help">
        <MenuItem Header="About">
            <MenuItem.Icon>
                <Image Source="Images/Help.png" />
            </MenuItem.Icon>
        </MenuItem>
    </MenuItem>
</Menu> 
```

# android - 在标签android中拉伸的图像

> ID：11859793
> 
> 赞同：0
> 
> 时间：2012-08-08T07:34:29.820
> 
> 标签：android, image, tabs

我的应用程序中有一个 TabHost，我试图将图像放入文本中。我的问题是图像拉伸到整个屏幕而不是实际尺寸。我在高度和宽度中使用“wrap_content”，它仍然在做。当我将相同的图像放入其他带有“wrap_content”的商品时，就可以了。只有在标签中它很奇怪。这就是它的外观：

![在此处输入图像描述](../Images/1ec0247a84d0a43c682d4c8ef28a90c0.png)

而不是这样：

![在此处输入图像描述](../Images/f46f7fce2f1f103315110a67cc12a208.png)

那是我的代码：

```
<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

           <TabWidget
               android:id="@android:id/tabs"
               android:layout_width="wrap_content"
               android:layout_height="60dp"
               android:gravity="center_vertical"
               android:showDividers="none" >

            </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="start" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="stop" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="first tab" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                 <Button
                    android:id="@+id/button3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="second tab B" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Secont tab" />

            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:44:23.840

您可以尝试从这样的 java 代码中缩放图像视图；

```
yourImageView.setScaleType(ScaleType.CENTER); 
```

或像这样来自XML；

```
android:scaleType="fitCenter" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:58:07.307

我使用相对布局修复它，如下所示：

```
<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.8" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.1" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentTop="false"
                android:layout_centerHorizontal="true"
                android:gravity="center_vertical"
                android:showDividers="none" >
            </TabWidget>

        </RelativeLayout>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.9" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <Button
                    android:id="@+id/button1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="start" />

                <Button
                    android:id="@+id/button2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="stop" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="first tab" />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                 <Button
                    android:id="@+id/button3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="second tab B" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Secont tab" />

            </LinearLayout>
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

不管怎么说，还是要谢谢你！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:59:19.417

您需要使用 9-patch 图像。

这是一个指南，可帮助您创建 9-patch 图像。 [http://radleymarx.com/blog/simple-guide-to-9-patch/](http://radleymarx.com/blog/simple-guide-to-9-patch/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-23T13:28:07.827

很晚的答案，我相信你不再关心了，但其他人可能会。

这是另一个[链接](http://romannurik.github.io/AndroidAssetStudio/nine-patches.html)

**九补丁生成器允许您根据指定的源图稿快速生成不同屏幕密度的简单九补丁。**

如果您对此有任何问题，请查看**[此处](https://stackoverflow.com/questions/19196616/is-there-a-way-to-create-xxhdpi-xhdpi-hdpi-mdpi-and-ldpi-drawables-from-a-lar)**。阅读[CommonsWare](https://stackoverflow.com/users/115145/commonsware)答案。

# knockout.js - 嵌套模板绑定+敲除js

> ID：11859795
> 
> 赞同：0
> 
> 时间：2012-08-08T07:34:43.170
> 
> 标签：knockout.js

我想像这样使用敲除映射来绑定模板

```
Question 1
       Option1
       Option2
       Option3
Question 2
       Option1
       Option2
       Option3
Question 3
        Option2
        Option3 
```

任何人请提供一些示例代码以获取任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:16:22.990

这是一个简单的例子：

html代码：

```
<script type="text/html" id="SimpleTemplate">
    <li>
        <div>
            <span data-bind="text: name"> 
            options:  
        </div>
        <ul data-bind="foreach: option">
            <li>
                <span data-bind="text: $data"> </span>              
            </li>
        </ul>
    </li>
</script>
<ul  data-bind="
            template: {
            name: 'SimpleTemplate',
            foreach: questions
            }">
</ul> 
```

昏死：

```
var Question= function(name, option) {
    this.name = name;
    this.option = ko.observableArray(option);  
};

var viewModel = {
    questions: [
        new Question("Question1", ["option1", "option2", "option3"]),
        new Question("Question2", ["option1", "option2", "option3"]),
        new Question("Question3", ["option1", "option2"])
        ]    
};

ko.applyBindings(viewModel); 
```

# c++ - 带有水平滚动条的 C++ MFC 列表控件

> ID：11859797
> 
> 赞同：2
> 
> 时间：2012-08-08T07:34:45.030
> 
> 标签：c++, mfc, scrollbar, clistctrl

我来这里是为了问这个问题，因为我找到的解决方案都没有让我满意，甚至没有奏效。我的问题很简单。

我`CListCtrl`在 C++ 中有很多列。它们不适合列表的宽度，所以我必须添加一个水平滚动条。

我尝试使用`EnableScrollbar`, `ShowScrollBar`, `SetScrollPos`，但没有一个有效。如何创建水平滚动条并正确显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:35:58.207

如果您使用的是 LVS_REPORT 样式，它应该只为您添加滚动条（只要列超过 ListCtrl 的宽度）。不需要特别的诡计。

您的 CListCtrl 是否有可能比它的容器窗口大，因此不添加滚动条？如果仍然无法正常工作，请在您的问题中添加屏幕截图。

# c# - 在 Winforms C# 中编辑应用程序设置

> ID：11859798
> 
> 赞同：2
> 
> 时间：2012-08-08T07:34:51.597
> 
> 标签：c#, winforms, url, appsettings, web-reference

我需要在 C# windows 应用程序中更改我的 Webreference url。我的 app.config 文件`applicationSettings`有

```
<applicationSettings>
    <DataAggregator.Properties.Settings>
        <setting name="DataAggregator_WebService_AccessDB"  serializeAs="String">
            <value>http://twks-126/Webservice/AccessDB.asmx</value>
        </setting>
    </DataAggregator.Properties.Settings>
</applicationSettings> 
```

我需要在运行时将值更改为新的 web 服务。当我尝试获取时，`configurationmanager.appsettings`我没有得到设置。难道我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:38:54.980

尝试将 app.config 配置更改为以下内容；

```
<appSettings>
    <add key="DataAggregator_WebService_AccessDB" value="http://twks-126/Webservice/AccessDB.asmx"/>
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:48:59.343

如果要访问指向的数据，则`<DataAggregator.Properties.Settings>`需要在代码中使用此语法

```
string url = DataAggregator.Properties.Settings.Default.DataAggregator_WebService_AccessDB; 
```

但是请记住，如果此设置已配置为应用程序范围，您将无法将更改保存回配置文件。

您的语法可用于访问配置文件的不同部分。这部分被称为`AppSettings`和它不一样`applicationSettings`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-13T12:18:28.293

```
var config = ConfigurationManager.OpenExeConfiguration(Application.ExecutablePath);
config.AppSettings.Settings.Remove(key);
config.AppSettings.Settings.Add(key, value.ToString());
config.Save(ConfigurationSaveMode.Minimal);
ConfigurationManager.RefreshSection("appSettings"); 
```

# ios - 在 iOS 中搜索获取应用程序崩溃

> ID：11859801
> 
> 赞同：0
> 
> 时间：2012-08-08T07:35:02.003
> 
> 标签：ios, nsmutablearray, uisearchbar

我创建了一个 iOS 应用程序来从`UITableView`. 但是当我输入“ag..”、“as...”以及其他几种情况时，应用程序突然崩溃了。它给出了例外

` *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[NSMutableArray objectAtIndex:]: index 37 beyond bounds [0 .. 36]”

我能做些什么来解决这个问题。谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:39:23.720

它几乎可以准确地告诉您问题所在：可变数组的有效范围是 0 到 36，而您要求的元素编号为 37。

我不确定您是否有一个错误的错误（即，您是从一开始而不是从零开始计数）或者您正在寻找一个不存在的元素，但这就是您的例外。

# html - 使用哪个工具来设计强大的网页？

> ID：11859805
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:35:21.453
> 
> 标签：html, css, size, screen

过去几周我一直在做 Web 开发，我认为 Web 开发除了设计部分之外还不错。最令人困惑的事情之一是屏幕尺寸。

在 Java 和许多其他语言中，如果您将元素设置到特定位置，则无论屏幕大小如何，它都会保留在那里。

但是，我发现在网页中，如果我将 CSS 和 HTML 放在某个地方，结果证明它适合我的屏幕（但仅限于我的屏幕......），而在其他屏幕尺寸中，位置是关闭的。

我有两个`<div>`,`wrap`和`content`, 在我的屏幕上看起来像这样：

```
|[     [     ]     ]| 
```

在更高的屏幕尺寸中检查这个看起来像这样：

```
|[  [     ]             ]| 
```

在较小的屏幕尺寸上，会发生这种情况：

```
|[  [                | ]          ] 
```

有没有像 WYSIWYG 编辑器这样我们可以拖动我们的组件并使其适合任何浏览器和屏幕尺寸的编辑器？

我试过了：

*   阿普塔纳
*   织梦者
*   作曲家

我仍然使用记事本++手动编码获得最佳结果

请用一个软件、一本书或一个魔术来启发我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:39:18.430

WYSIWYG = 邪恶，因为大多数情况下它是 WYSIMNWYG - 你看到的大多不是你得到的，而且大多数这些编辑器的代码真的很糟糕。

相反，尝试一个布局框架（如[960](http://960.gs/)或[Twitter Bootstrap](http://twitter.github.com/bootstrap/) - 只是示例，还有很多其他的）以避免很多麻烦。[Skeleton](http://www.getskeleton.com/)可能也适合您，它用于创建响应式布局（您所描述的问题）。或者，您可能想尝试[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)，这极大地扩展了您编写 css 的可能性。

我也用 N++ 手工编写了所有代码。

# php - 命名空间php中的反射

> ID：11859807
> 
> 赞同：11
> 
> 时间：2012-08-08T07:35:24.090
> 
> 标签：php, reflection, namespaces

```
namespace foo;
class a
{
private $bar;
public $baz;
protected $alpha
}

$reflect=new \ReflectionClass('a');
$properties=$reflect->getProperties(ReflectionProperty::IS_PROTECTED); 
```

它将返回`ReflectionProperty`class not found 致命错误 $properties 是对象的数组`ReflectionProperty`。为什么它不自动解析到全局空间？其中与 DOM 相关的类是隐式执行的。如果`ReflectionProperty`类`use`在命名空间中是 d 它可以工作。但为什么不隐含地发生呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-08T07:51:12.713

命名空间中的类将以命名空间名称开头，全局属性需要以斜杠（\）开头。[使用手册](http://in3.php.net/language.namespaces.rules) 试试这个

```
namespace foo;
class a
{
private $bar;
public $baz;
protected $alpha;
}

$reflect=new \ReflectionClass('\\foo\\a');
$properties=$reflect->getProperties(\ReflectionProperty::IS_PROTECTED); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:44:09.740

相对类名（那些不以 开头的`\\`）总是首先针对当前命名空间解析，然后针对每个别名标识符（通过`use`）解析。这尤其意味着，如果您自己没有定义一个具体的命名空间，那么您就是在全局命名空间中，这意味着它`\Bar`和`Bar`引用同一个类。但是，如果您在命名空间中`Foo`，它们会有所不同 ( `\Bar <==> Bar == \Foo\Bar`)。

您可以在手册中找到[详细说明](http://php.net/language.namespaces.rules)。在手册的[“命名空间基础”部分](http://php.net/language.namespaces.basics)，您可以找到这背后的想法：它就像一个文件系统。如果您在根目录下，`cat /etc/passwd`并且`cat etc/passwd`是相同的，但不是，如果您更改工作目录。

（旁边：应该是`$reflect=new \ReflectionClass('\\foo\\a');`, 或`$reflect=new \ReflectionClass(__NAMESPACE__ . '\\a');`）

# c# - 从空参数中清除 URL

> ID：11859810
> 
> 赞同：0
> 
> 时间：2012-08-08T07:35:32.190
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

如何从 Url 中删除空参数：

```
http://localhost:12058/User/Doctors?pageNumber=1&HospitalId=&DepartmentId=&specialityId=&name=&email= 
```

在我的情况下，我想要干净的网址：`name=&email=`

我尝试这样做：

```
routes.MapRoute(null, "{controller}/{action}/{id}", // URL with parameters
        new { controller = "User", name = UrlParameter.Optional, email = UrlParameter.Optional }); 
```

但这对我不起作用

# c# - ElementHost 中的 WPF 控件呈现问题

> ID：11859821
> 
> 赞同：14
> 
> 时间：2012-08-08T07:36:09.990
> 
> 标签：c#, .net, wpf, winforms, elementhost

我有一个 WinForms 控件，里面有一个`TableLayoutPanel`包含多个的控件`ElementHosts`，每个控件都`ElementHost`包含一个 WPF 控件。

一切正常，除非控件的大小大于窗口并且`ScrollBar`存在；当我向下滚动时，控件会变得扭曲，就像这样 -

![在此处输入图像描述](../Images/9fc50c753bc5d3f2286963b29014ba46.png)

在最大化窗口或重新调整窗口大小时，控件会正确呈现（减小大小以使控件超出可见区域，然后再次增加大小以将它们带回可见区域）

这不会发生在同一个窗口中的 WinForms 控件只是 WPF 的控件中；知道为什么会发生这种情况以及任何解决方案吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-28T08:59:43.943

```
this.Loaded += delegate
{
    var source = PresentationSource.FromVisual(this);
    var hwndTarget = source.CompositionTarget as HwndTarget;

    if (hwndTarget != null)
    {
        hwndTarget.RenderMode = RenderMode.SoftwareOnly;
    }
}; 
```

尝试在您托管的 wpf 控件中使用它。这是在 win 表单中托管的 wpf 控件的已知呈现问题。将渲染模式更改为仅软件即可解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T09:21:37.973

`ElmenetHost`我有一个类似的问题并解决了在滚动事件中强制刷新`TableLayoutPanel`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T23:07:41.610

好的，这听起来像是完全的废话，但它对我有用：`Load`如果您的表格，请调整表格大小。

```
public class MyForm : Form
{
   public MyForm()
   {
      Load += (o, e) => { Width -=1; Width +=1; };
   }
} 
```

调整表单大小后，我无法强制显示问题。

# eclipse-plugin - Eclipse 中的树内容提供程序

> ID：11859824
> 
> 赞同：1
> 
> 时间：2012-08-08T07:36:22.090
> 
> 标签：eclipse-plugin, swt, eclipse-rcp

我想在向导的一个页面上创建项目和包树（类似于 Eclipse 中“移动”选项中的树）。如何创建树并不难，但问题是我需要有这种可用项目和包的结构，我不确定如何获得。这是我在这里的第一篇文章，所以如果我不够清楚，我会提供更多详细信息。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T16:41:30.287

[http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/ui/StandardJavaElementContentProvider.html](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/ui/StandardJavaElementContentProvider.html)显示了Java 元素层次结构。

# asp.net-mvc - 如何在 ASP.NET WebAPI MediaTypeFormatter 中检索 HTTP 请求方法？

> ID：11859826
> 
> 赞同：1
> 
> 时间：2012-08-08T07:36:22.783
> 
> 标签：asp.net-mvc, json, asp.net-web-api

当 ASP.NET WebAPI 函数返回值为 IEnumerable 且 HTTP 请求方法为 GET 的 JSON 时，我想抛出一个异常 -[希望停止生成任何顶级为数组的 JSON](https://stackoverflow.com/questions/395592/json-security-best-practices)。

我试图通过创建 MediaTypeFormatter 来做到这一点。我能做到吗？我还有其他方法可以做到这一点吗？谢谢。

就像是：

```
public class CustomFormatter : MediaTypeFormatter
{
    public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContentHeaders contentHeaders, TransportContext transportContext)
    {
        // Retrieve value for isGetRequest somehow...
        if (value is IEnumerable && isGetRequest)
        {
            throw new InvalidOperationException();
        }
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T08:54:02.917

这是可能的，因为`GetPerRequestFormatterInstance`方法已被添加并且可以被覆盖：

```
public class CustomFormatter : MediaTypeFormatter
{
    private HttpRequestMessage _request;

    private CustomFormatter(HttpRequestMessage request)
    {
        _request = request;
    }

    public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, HttpRequestMessage request, MediaTypeHeaderValue mediaType)
    {
        return new CustomFormatter(request);
    }
    .......... 
```

因此，如果您这样做，那么在 时`WriteToStreamAsync`，请求将有一个值。

# python - 如何在python中轻松地在unicode中编码一长串十六进制值

> ID：11859827
> 
> 赞同：1
> 
> 时间：2012-08-08T07:36:22.440
> 
> 标签：python, unicode, codepoint

我有一个长字符串的十六进制代码点值。对于一个简短的，以下是好的。

```
msg = unichr(0x062A) + unichr(0x0627) + unichr(0x0628)
print msg 
```

但是，由于 unichr 的备用 api unicode() 确实存在，我认为必须有一种方法可以将整个代码点字符串传递给它。到目前为止，我无法做到。

现在我必须像上面的 3 一样输入一个 150 个十六进制值（代码点）的字符串来生成一个完整的字符串。我希望得到类似的东西

```
msg = unicode('0x062A, 0x0627....') 
```

我必须使用 'msg' 后者。打印它只是一个例子。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:39:45.003

很难说出你到底要什么。你在找`u'\u062A\u0627\u0628'`吗？转义允许您在`\u`unicode 字符串中按代码点输入单个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T07:40:16.853

也许是这样的：

```
", ".join(unichr(u) for u in (0x062A, 0x0627, 0x0628)) 
```

结果：

```
u'\u062a, \u0627, \u0628' 
```

**编辑：**这使用[`str.join`](http://docs.python.org/library/stdtypes.html#str.join).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:41:16.110

按照你的例子：

```
>>> c = u'\u062A\u0627\u0628'
>>> print c
تاب 
```

# java - 如何在休眠状态下编写更新查询

> ID：11859835
> 
> 赞同：1
> 
> 时间：2012-08-08T07:37:18.727
> 
> 标签：java, sql, hibernate

```
public String passlink(String companyName, String mailName) {

    Session session = Hibernateutil.getSessionFactory().openSession();

    Transaction transaction = null;

    try {
        transaction = session.beginTransaction();

        String queryString="UPDATE account SET companyname = :companyName WHERE companyname like 'm' AND Email LIKE :mailName";
        Query query=session.createQuery(queryString);

        query.setParameter("companyName", companyName);
        query.setParameter("mailName", mailName);
        int result = query.executeUpdate();

        System.out.println("Rows affected: " + result);

            System.out.println("Successfully updated");
        transaction.commit();

    } catch (Exception e) {
        value = "FAIL";
                   e.printStackTrace();
        //System.out.println("Error--> " + e.getMessage());
    }
    return value;

} 
```

我写更新查询

String queryString="UPDATE account SET companyname = :companyName WHERE companyname like 'm' AND Email LIKE :mailName";

像这样，但它给出了以下错误。

> java.lang.IndexOutOfBoundsException：索引：0，大小：0 at java.util.ArrayList.RangeCheck(Unknown Source) at java.util.ArrayList.get(Unknown Source) at org.hibernate.hql.ast.HqlSqlWalker.postProcessUpdate( HqlSqlWalker.java:390) 在 org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:164) 在 org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:189) 在 org.hibernate.hql .ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:130) 在 org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:83) 在 org.hibernate.impl.SessionFactoryImpl.getQuery(SessionFactoryImpl.java:425) 在org.hibernate.impl.SessionImpl.getQueries(SessionImpl.java:880) 在 org.hibernate.impl.SessionImpl.executeUpdate(SessionImpl.java:861) 在 org.hibernate。impl.QueryImpl.executeUpdate(QueryImpl.java:89) at com.njob.dao.AccountDao.passlink(AccountDao.java:213) at com.njob.action.companylink.doPost(companylink.java:34) at javax.servlet .http.HttpServlet.service(HttpServlet.java:709) at javax.servlet.http.HttpServlet.service(HttpServlet.java:802) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:237) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:157) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:214) 在 org.apache.catalina.core.StandardContextValve.invoke( StandardContextValve.java:178) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:126) 在 org.apache.catalina.valves.ErrorReportValve。在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:107) 调用(ErrorReportValve.java:105) .coyote.http11.Http11Processor.process(Http11Processor.java:825) 在 org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:731) 在 org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket (PoolTcpEndpoint.java:526) 在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:80) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) ) 在 java.lang.Thread.run(Unknown Source)107) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.processConnection(Http11Protocol.java:731) 在 org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526) 在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java :80) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) at java.lang.Thread.run(Unknown Source)107) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:148) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:825) 在 org.apache.coyote.http11.Http11Protocol $Http11ConnectionHandler.processConnection(Http11Protocol.java:731) 在 org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526) 在 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java :80) at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) at java.lang.Thread.run(Unknown Source)org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526) 中的 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.runIt) 中的 Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:731) java:80) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) 在 java.lang.Thread.run(Unknown Source)org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:526) 中的 org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.runIt) 中的 Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:731) java:80) 在 org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:684) 在 java.lang.Thread.run(Unknown Source)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:50:55.390

将查询更改为

```
String queryString="UPDATE account SET companyname = :companyName WHERE companyname like 'm' AND email LIKE :mailName"; 
```

并使用

```
query.setParameter("companyName", companyName);
query.setParameter("mailName", mailName); 
```

* * *

**看**

*   [使用休眠的本机 SQL 查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:44:17.697

试试这个

```
 query.setParameter("companyName", companyName); 
```

您使用的参数是 companyName

# php - 当两个数组在每个数组的相同索引上具有相关值时如何在一个数组排序时获得关系???PHP

> ID：11859843
> 
> 赞同：0
> 
> 时间：2012-08-08T07:37:58.257
> 
> 标签：php, sorting

例如，当两个数组在两个数组的相同索引上都有某种关系的值时，我如何获得两个数组之间的关系，

我已经从 mysql 的一个表中检索了“tagname”和“path”，然后我使用循环将这两个列值放入两个数组中，因此“array Tag[]”具有值“Introduction”和“array Path[]”具有路径值作为介绍，这两个值都在该数组的索引“0”上，所有数据都以这种方式收集在“arrat Tag[]”和“array Path[]”中，之后我根据其他数组使用排序我的“Tag”这段代码，

```
$sorted =array_intersection($some_other_array,$array Tag) 
```

现在我怎么知道 Tag as tag sorted 的相关路径值？

希望您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:05:24.000

从 mysql/DB 结果集中创建数组时，创建为

```
while($row = mysql_fetch_assoc($query)){
    $array[$row['path']] = $row['tag'];
} 
```

假设您的数组为

```
$array['xyz'] = 'pqr';
$array['abc'] = 'wsx';
$array['poi'] = 'qaz';
$array['lkj'] = 'abc'; 
```

根据可用的标签或排序方法根据需要对数组进行排序。在这种情况下，而不是 int index 它将具有键，因为带有标签的路径排序也将它与路径绑定。

对数组进行排序后（假设使用标签名称的首字母进行排序）

```
$array['lkj'] = 'abc';
$array['poi'] = 'qaz';
$array['xyz'] = 'pqr';
$array['abc'] = 'wsx'; 
```

`foreach`因此，如果您想要特定的标签路径并且您知道标签值，则可以使用带有键和值的循环或使用 aray_keys轻松找到 标签的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:42:12.563

您需要将这两个数组组合成关联数组，然后根据特定的排序方案使用[asort()](http://php.net/manual/en/function.asort.php)或[uasort() 。](http://php.net/manual/en/function.uasort.php)

# python - xrange 生成字符串？我不明白

> ID：11859846
> 
> 赞同：0
> 
> 时间：2012-08-08T07:38:05.597
> 
> 标签：python, for-loop, xrange

出于某种原因，第一个`for...`循环中的 x 变量在代码的单次迭代后从`int`变为。`str`我很困惑为什么一定会这样，但是每次我运行这个脚本时，我的集合最终都会被包含数百个零的字符串填充。

如果有人好奇，这是解决欧拉问题 4 的尝试。

```
# A palindromic number reads the same both ways.
# The largest palindrome made from the product
# of two 2-digit numbers is 9009 = 91 99.
# Find the largest palindrome made from the product of two 3-digit numbers.

def palindrome():

    products = set()

    for x in xrange(700,999):
        for y in xrange(700,999):
            temp = x*y
            n = [x for x in str(temp)]
            if temp not in products:
                if len(n)%2 == 0:
                    half = len(n)/2
                    first = n[:half]
                    last = n[half:]
                    last.reverse()
                    if first == last:
                        products.add(temp)

    return products

if __name__ == "__main__":
    n = palindrome()
    print n 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T07:42:03.240

在 python 2.x 中，列表推导将其变量泄漏到封闭范围。所以你的列表理解`[x for x in str(temp)]`会覆盖 x 的值。但请注意，在外循环的下一次迭代中，它将被设置回 int。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T07:41:58.537

它更改为字符串，因为*您*为其分配了一个字符串：

```
 n = [x for x in str(temp)] 
```

像这样的错误是你应该避免使用一个字母变量的原因。话虽这么说，我通常`_`在列表推导中用作一次性变量......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T07:42:35.277

不要在以下列表理解中使用 x `n = [x for x in str(temp)]`。只需选择另一个变量名称即可。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-08T08:05:23.350

```
1    for x in xrange(700,999):
2        for y in xrange(700,999):
3            temp = x*y
4            n = [x for x in str(temp)] 
```

在第 4 步之后，n = ['4', '9', '0', '0', '0', '0'], x = '0'

然后对于下一步#3，temp='0'*701

# php - 使用 PDO::FETCH_CLASS 从数据库设置自己的参数

> ID：11859853
> 
> 赞同：1
> 
> 时间：2012-08-08T07:38:45.520
> 
> 标签：php, class, pdo

我创建了一个类用户，它反映了用户表中的行。有一种填充方法，我根据主键从数据库中获取值并尝试将其存储在 self 对象中。我可以通过获取所有变量并为每个字段一个一个地设置它们来做到这一点。有没有办法使用 PDO::FETCH_CLASS 或任何其他简单的方法来做到这一点？

如果我尝试使用 $this = $stmt->fetch( PDO::FETCH_CLASS ) 存储它，则会出现致命错误：Cannot re-assign $this in /var/www/html/php/classes.php on line 51 错误。

我不想使用 ORM 风格的工具，想自己开发类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:45:19.413

您是否尝试过类似 list($this->a, $this->b, $this->c) = array((...)) 之类的方法，其中数组（可能）是您获取的结果？因为你不能分配 $this 变量，只能引用它的字段和方法。

另一种解决方案是实现[ArrayAccess](http://php.net/manual/kr/class.arrayaccess.php)接口并将数据存储在底层数组中。

# java - 如何将storm mongo库添加为maven依赖项？

> ID：11859854
> 
> 赞同：3
> 
> 时间：2012-08-08T07:38:45.263
> 
> 标签：java, maven, maven-3, apache-storm

我正在尝试使用[Storm-contrib](https://github.com/nathanmarz/storm-contrib)的 SimpleMongoBolt 。我下载了源码，进入storm-contrib-mongo目录，运行mvn package和mvn install。一切正常，IntelliJ 能够在编码时解决问题。但是，当我尝试构建我的项目时，它会尝试在外部存储库中为该库找到一个 pom。当它找不到它时，它就会失败。我需要做什么来解决这个问题？

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>StormTest</groupId>
    <artifactId>StormTest</artifactId>
    <version>1.0</version>
    <packaging>jar</packaging>
    <name>StormTest</name>

    <repositories>
        <repository>
            <id>clojars.org</id>
            <url>http://clojars.org/repo</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>storm</groupId>
            <artifactId>storm</artifactId>
            <version>0.7.2</version>
            <scope>Test</scope>
        </dependency>
        <dependency>
            <groupId>com.rapportive</groupId>
            <artifactId>storm-amqp-spout</artifactId>
            <version>0.1.1</version>
        </dependency>
        <dependency>
            <groupId>com.rapportive</groupId>
            <artifactId>storm-json</artifactId>
            <version>0.0.1</version>
        </dependency>
        <dependency>
            <groupId>storm</groupId>
            <artifactId>storm-contrib-mongo</artifactId>
            <version>0.1-SNAPSHOT</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T09:18:57.920

您可以尝试检查您的项目 pom 中是否定义了正确的依赖项，并将它们与风暴工件一进行比较。*groupId*，*artifactId*和*version*必须相同，否则 Maven 将尝试从外部存储库下载它，并且可能会失败，因为它从未安装在任何公共 Maven 存储库中。

当您安装工件时，它会转到*用户目录*/.m2/repostiory/ *group/id/path* /*artifact/id/path*/ *version*。

对于您的storm-amqp-spout，您应该将它放在： ***user-directory* /.m2/repository/com/rapportive/storm-amqp-spout/0.1.1**文件夹中。

在那里你应该有几个文件：

1.  *jar*本身（如果它被打包为 jar 文件）。
2.  *pom.xml*文件（与您为项目创建并用于构建和安装它的文件相同）。
3.  上述两者的可选*sha1*文件。

如果您没有它们，您可能在将工件安装到存储库时出错。您可以尝试再次安装它或手动创建 pom，只需从工件源目录复制它即可。

如果有正确的 pom.xml，我真的不知道，因为我从未使用过 IntelliJ（想法？;)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:33:46.750

Storm-Contrib 中的 SimpleMongoBolt 实际上已经过时了。我自己更新了模块并提交了一个尚未合并的拉取请求。目前，您可以从[我的 Storm-Contrib fork](https://github.com/ilionblaze/storm-contrib)中检索更新的代码。

# java - 自定义SVN深度值

> ID：11859863
> 
> 赞同：1
> 
> 时间：2012-08-08T07:39:57.477
> 
> 标签：java, svn, tortoisesvn, svnkit

我需要 SVN 分支下所有文件夹名称的列表。但不能达到**无限**深度..说我需要高达 5 级深度..

有没有办法指定自定义的 SVNdepth 值？获取即时文件夹列表和迭代的问题是，每个文件夹包含数百个子文件夹。

使用的命令：
**svn ls --depth infinity [http://sample.com/repository/pag/branches/dev/](http://sample.com/repository/pag/branches/dev/)**
我们可以使用自定义值（数值）代替无穷大吗？如果是这样怎么办？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:08:13.400

不幸的是，不支持数字深度。您应该为每个目录递归地调用目录列表。

# asp.net-mvc - 将 Telerik 树视图绑定到 Telerik Grid

> ID：11859864
> 
> 赞同：1
> 
> 时间：2012-08-08T07:40:05.323
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, telerik, telerik-mvc

如何将 Telerik MVC TreeView 绑定到 RAZOR 引擎中的 Telerik MVC Grid。我有一个仪表板，它有一个 Telerik MVC 网格，绑定了单列数据，即网格中只有一列。我需要将 Telerik MVC TreeView 绑定到网格中的每个项目，即每个单元格。即 Telerik Grid 中的每个单元格都应显示在 TreeView 中，如下所示：

![Telerik TreeView 数据绑定到 Telerik Grid 的屏幕截图](../Images/a459092940d32fbc68907792e89e1d61.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T09:05:31.290

开箱即用是不可能的。但您可以使用模板： [http ://demos.telerik.com/aspnet-mvc/treeview/templates](http://demos.telerik.com/aspnet-mvc/treeview/templates)

您可以将 ClientTemplate 用于列并通过 ajax 从另一个子视图加载树视图。在 RowDataBound 事件上开始下载。

示例： **网格视图**

```
<script type="text/javascript">

function onRowDataBound(e) {
    var grid = $(this).data('tGrid');
        var dataItem = e.dataItem;
        var replacement = $('div.e-marker-detailarea', e.detailRow);

        $.ajax(
            {
                url: '@Url.Action("GetTreeView", "SomeController")',
                data: {value: dataItem.TreeViewValue},
                type: 'POST',
                error: function() {
                    alert("Error!!!")
                },
                success: function (data, textStatus, XMLHttpRequest) { replacement.html(data); }
            }
        );
    }
} 
```

```
@(
Html.Telerik().Grid<GridModel>()
        .Name("GridModel")
        .DataBinding(b=>b.Ajax().Select("GridBind", "SomeController"))
        .Columns(columns=>
            {
                columns.Bound(b => b.TreeViewValue).Title("Комментарий").ClientTemplate("<div class=\"e-marker-detailarea\"></div>");
            })
        .ClientEvents(c => c.OnRowDataBound("onRowDataBound"))
) 
```

**子树视图**：

```
@{
  Html.Telerik().TreeView()
    .Name("TreeView")
    .Items(item =>
    {
        item.Add()
            .Text("Mail")
            .ImageUrl("~/Content/PanelBar/FirstLook/mail.gif")
            .ImageHtmlAttributes(new { alt = "Mail Icon" })
            .Items(subItem =>
            {
                subItem.Add()
                        .Text("Personal Folders")
                        .ImageUrl("~/Content/PanelBar/FirstLook/mailPersonalFolders.gif")
                        .ImageHtmlAttributes(new { alt = "Personal Folders Icon" });
            });
        item.Add()
            .Text("Contacts")
            .ImageUrl("~/Content/PanelBar/FirstLook/contacts.gif")
            .ImageHtmlAttributes(new { alt = "Contacts Icon" })
            .Items((subItem) =>
            {
                subItem.Add()
                        .Text("My Contacts")
                        .ImageUrl("~/Content/PanelBar/FirstLook/contactsItems.gif")
                        .ImageHtmlAttributes(new { alt = "Contact Icon" });

            });
        item.Add()
            .Text("Tasks")
            .ImageUrl("~/Content/PanelBar/FirstLook/tasks.gif")
            .ImageHtmlAttributes(new { alt = "Tasks Icon" })
            .Items((subItem) =>
            {
                subItem.Add()
                        .Text("My Tasks")
                        .ImageUrl("~/Content/PanelBar/FirstLook/tasksItems.gif")
                        .ImageHtmlAttributes(new { alt = "Task Icon" });                   
            });
    })
} 
```

**控制器**：

```
ActionResult GridView()
{
    return View();
}
[GridAction]
ActionResult GridBind()
{
    //initialize IEnumerable<GridModel> gridModelList
    return View(new GridModel(gridModelList));
}

ActionResult GetTreeView(TreeViewValue treeViewValue)
{
    //some calculations to get model
    return PartialView("ChildTreeView", model)
} 
```

# javascript - 具有无限水平滚动的流体可调整大小的图像（REV. 2）

> ID：11859867
> 
> 赞同：1
> 
> 时间：2012-08-08T07:40:18.867
> 
> 标签：javascript, jquery, html, css

我用一个简单的水平“nowrap”css 编写了一个网站，img 并排浮动。我也隐藏了滚动条。**侧滚动可以通过正常的垂直鼠标滚轮滚动来完成（见我的项目网址**

因为图像都是 1400x850 像素的大分辨率，所以我想创建一个可以根据浏览器大小缩放图像的网站。目前所有图像都在最大宽度：100%，我的目标是在浏览器较小时将它们缩放到该百分比以下。

我尝试在自动中使用 max-width:100% 的宽度和高度。它不工作。

我尝试使用 jquery 流体图像脚本，由于“nowrap”，它们无法正常工作

以下是我正在使用的主要代码：

```
#content {
width:5600px;
overflow-x: auto;
white-space: nowrap;
max-width: 100%;
height: auto;
width: auto\9; /* ie8 */
}

#portfolio img {
float:left;
display:inline;
max-width: 100%;
height: auto;
width: auto\9; /* ie8 */
} 
```

这是我的项目的链接： http: [//credencepartners.com/demo02/](http://credencepartners.com/demo02/)

这是我试图产生的结果（例如，请参阅评论）：[http ://credencepartners.com/demo02/interface/scene01.jpg](http://credencepartners.com/demo02/interface/scene01.jpg)

我是否需要在这个场景上实现 javascript 或者 CSS 可以用于这种场景？

* * *

**更新/2012 年 8 月 10 日**

感谢 Corey 的提醒，我已经更新了我的 demo02 链接。现在的问题只是在图像下方添加文本。我尝试使用 div 类将文本和图像组合在一起，结果导致图像再次变得不流畅。现在我需要帮助制作一个流畅且可调整大小的 div 标签。

* * *

**目标**

知道构建一个典型的横向滚动网站是非常简单的。我遇到的主要问题只是顶部的流体可调整大小的图像。我对流畅/响应式布局很陌生，希望这里的大师能启发我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:57:14.800

使用这个 CSS：

```
body, html {
    width:100%;
    min-height:100%;
    height:auto !important;
}
#content {
    width:100%;
    height:100%;
    position:relative;
}
#portfolio {
    width:100%;
    height:100%;
    position:relative;
}
#portfolio ul{
    width:100%;
    height:100%;
    display:block;
    white-space:nowrap;
    overflow:auto;
    list-style:none;
    padding:0;
    margin:0;
    text-align:center; /*in case not enough images to create a scroll*/
}
#portfolio img{
    width:auto;
    height:100%;
    display:inline-block;
    position:relative;
} 
```

并像这样布置你的html：

```
<div id="content">
    <div id="portfolio">
        <ul>
            <img src="src.jpg" />
            <img src="src.jpg" />
            <img src="src.jpg" />
        </ul>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:57:21.117

我试了一下，发现：

1.  您需要从图像中删除高度和宽度标签
2.  您使用 jQuery/JavaScript 将“portfolio”-div 的高度设置为窗口高度

应该就是这些了，希望我明白你的意思

# c# - 插入正则表达式

> ID：11859869
> 
> 赞同：-4
> 
> 时间：2012-08-08T07:40:34.200
> 
> 标签：c#, regex

我有以下字符串：

```
10-5*tan(40)-cos(0)-40*sin(90); 
```

我已经提取了数学函数并计算了它们的值：

```
tan(40) = 1.42;
cos(0) = 1;
sin(90) = 0; 
```

我想将这些值插入到表达式字符串中，如下所示：

```
10-5*(1.42)-(1)-40*(0); 
```

请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:51:07.647

我会使用 Regex.Replace 然后使用自定义 MatchEvaluator 转换您的值并插入这些值，检查： http: [//msdn.microsoft.com/en-us/library/cft8645c (v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/cft8645c(v=vs.110).aspx)

这看起来像：

```
class Program
{
    static string ConvertMathFunc(Match m)
    {
        Console.WriteLine(m.Groups["mathfunc"]);
        Console.WriteLine(m.Groups["argument"]);

        double arg;
        if (!double.TryParse(m.Groups["argument"].Value, out arg))
            throw new Exception(String.Format("Math function argument could not be parsed to double", m.Groups["argument"].Value));

        switch (m.Groups["mathfunc"].Value)
        {
            case "tan": return Math.Tan(arg).ToString();
            case "cos": return Math.Cos(arg).ToString();
            case "sin": return Math.Sin(arg).ToString();
            default:
                throw new Exception(String.Format("Unknown math function '{0}'", m.Groups["mathfunc"].Value));
        }
    }

    static void Main(string[] args)
    {
        string input = "10 - 5 * tan(40) - cos(0) - 40 * sin(90);";

        Regex pattern = new Regex(@"(?<mathfunc>(tan|cos|sin))\((?<argument>[0-9]+)\)");
        string output = pattern.Replace(input, new MatchEvaluator(Program.ConvertMathFunc));

        Console.WriteLine(output);
    }
} 
```

# php - wkhtmltopdf - 编码问题

> ID：11859872
> 
> 赞同：19
> 
> 时间：2012-08-08T07:40:52.290
> 
> 标签：php, encoding, wkhtmltopdf

我正在使用 wkhtmltopdf 将 html 页面导出为 pdf，但似乎捷克字符有问题...我将整个 html 加载到变量中，然后我更改编码并像这样运行 wkhtmltopdf：

```
$html = ob_get_clean();
$html = iconv("UTF-8","Windows-1250", $html);
file_put_contents('../export.php', $html);

$commandString = WKHTML_LIB.'http://www.estiroad.com/export.php sestava.pdf';
exec($commandString); 
```

.html 文件具有正确的编码，但即使我将 --encoding windows-1250 参数设置为命令字符串，它也无法正常工作......感谢您的任何想法......

编辑：我解决了这个问题！问题是在我在页面开头定义的常量 WKHTML_LIB 中：

```
define('WKHTML_LIB', "../wkhtmltopdf/wkhtmltopdf-amd64"); 
```

我只是将路径直接写到 exec(); 命令，现在它甚至可以使用标志。很抱歉打扰你这么琐碎的事情......现在 $commandString 行看起来像这样：

```
$commandString = '"../wkhtmltopdf/wkhtmltopdf-amd64" --print-media-type --page-size A4 -R     50 --encoding windows-1250 --header-html header.html --margin-top 10mm --margin-bottom 10mm --margin-left 10mm --margin-right 10mm http://www.estiroad.com/export.php sestava.pdf'; 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-06-27T07:20:59.570

备查：

我对德语变音符号也有同样的问题。

我一加

```
<meta charset="UTF-8" /> 
```

到html页面问题就解决了。

当然，前提是您的页面以 utf-8 格式提供。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T12:16:54.847

我解决了这个问题！问题是在我在页面开头定义的常量 WKHTML_LIB 中：

```
define('WKHTML_LIB', "../wkhtmltopdf/wkhtmltopdf-amd64"); 
```

我只是将路径直接写到 exec(); 命令，现在它甚至可以使用标志。很抱歉打扰你这么琐碎的事情......现在 $commandString 行看起来像这样：

```
$commandString = '"../wkhtmltopdf/wkhtmltopdf-amd64" --print-media-type --page-size A4 -R     50 --encoding windows-1250 --header-html header.html --margin-top 10mm --margin-bottom 10mm --margin-left 10mm --margin-right 10mm http://www.estiroad.com/export.php sestava.pdf'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T09:24:16.460

在没有正确呈现中文字符之前，我遇到了类似的 wkhtmltopdf 问题。我通过安装相应的中文字体解决了这个问题。

您是否必须安装任何与捷克语相关的字体才能正确呈现字符？由于我不熟悉捷克语字符/字体，我不确定这是否适用。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T10:29:52.437

刚才我用你提供的那些字符做了一个测试，它们对我来说很好用。Win7，wkhtmltopdf 0.11.0 rc2。适用于封面、目录、书签、内容和标题。还用韩文和中文字符进行了测试，甚至它们也可以工作。

PDF 生成使用（文件位置已删除） `--print-media-type --page-size A5 --header-html header.html --footer-html footer.html --margin-bottom 10mm --margin-top 10mm --margin-left 10mm --margin-right 10mm cover cover.html toc --xsl-style-sheet tocfile.xsl temp.html temp.pdf`

temp.html 是非常无效的 XHTML，第一行说`<?xml version="1.0" encoding="iso-8859-1"?>`. temp.html 文件是使用 UTF-8 使用 C# 写入磁盘的，并且可以正常工作。我真的建议尽可能使用 UTF-8。

![生成的 PDF 截图](../Images/74c48d5b65be8a6b35e0cec4af4ffad6.png)

# build - 无点构建任务错误

> ID：11859877
> 
> 赞同：2
> 
> 时间：2012-08-08T07:41:28.503
> 
> 标签：build, dotless

最近在 nuget 上升级到最新版本的 dotless 后，我现在遇到了构建错误。

[根据https://stackoverflow.com/a/2181543/435460](https://stackoverflow.com/a/2181543/435460)，我已将 dotless 设置为构建任务

它曾经可以工作，但是当我最近在 nuget 上更新到最新版本时，我现在`dotless 1.3.0.5 has stopped working`在尝试构建时收到错误，导致我的构建失败。

有没有办法让它再次工作？我已经进行了一些初步的谷歌调查，但结果不足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:45:03.137

看起来这是由于删除了 .NET 3.5 Framework 在我们的机器上造成的 - 开发人员遇到了其他问题，我认为删除了 4.5，并且在他下次重新启动时清除了 3.5。

重新安装 .NET 3.5 似乎解决了这个问题。

# javascript - 不要为机器人（谷歌和其他）加载 JS 脚本以获得更好的性能？

> ID：11859878
> 
> 赞同：0
> 
> 时间：2012-08-08T07:41:32.553
> 
> 标签：javascript, performance, facebook-social-plugins

只是好奇，如果有人已经这样做了。为了提高机器人的性能和加载时间，如何跳过 Facebook、Google+、Twitter 等社交 js 的负载？

这会被视为一种黑客行为并会影响排名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:52:42.960

当心。Googlebot（当然还有其他人）将下载 JS 并将其用于索引。如果机器人不想下载脚本，那么它不必 - 但你应该给它选择。

# javascript - 未捕获的 ReferenceError：添加未在 javascript 代码中定义

> ID：11859881
> 
> 赞同：0
> 
> 时间：2012-08-08T07:41:51.657
> 
> 标签：javascript

我正在编写模块化 javascript 代码。我写了一个基本的计算器，有两个输入和四个按钮来执行算术运算。当我运行它时，它会在控制台中显示此错误。

`Uncaught ReferenceError: add is not defined`

所有按钮都会发生这种情况。我该如何解决这个问题以及为什么它不起作用？

这是我的**[代码](http://jsfiddle.net/gmC94/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:48:19.093

您正在混淆变量和对象属性。Javascript 从不隐式查找对象属性——它始终是变量查找，全局对象和`with`语句除外。

所以指定对象：

```
 calculation: function(operator) {
        if(operator == 'add')
            return this.add(valone, valtwo);
        else if(operator == 'sub')
            return this.sub(valone, valtwo);
        else if(operator == 'mult')
            return this.mult(valone, valtwo);
        else
            return this.div(valone, valtwo);
    } 
```

# infovis - infoviz 的力有向图中的边方向不正确

> ID：11859882
> 
> 赞同：1
> 
> 时间：2012-08-08T07:41:52.313
> 
> 标签：infovis

我试图显示像“graphnode6.0-----> graphnode0.0 -------> graphnode15.0”这样的力图，但是当我构造json对象时，我总是得到“graphnode6.0---- --> graphnode0.0 <---------graphnode15.0" 我的 JSON 对象是

```
var json = [
{
  "adjacencies": [  
  {
      "nodeTo": "graphnode15.0", 
      "data": {"$type":"arrow",
      "$direction":"['graphnode0.0','graphnode15.0']"}
    }  
  ], 
  "data": {
    '$color': "#83548B", 
    '$type': "circle"
  }, 
  "id": "graphnode0.0", 
  "name": "graphnode0.0"
},
{
  "adjacencies": [    
     {
      "nodeTo": "graphnode0.0", 
      "data": {"$type":"arrow",
      "$direction":"['graphnode6.0','graphnode0.0']"}
    }], 
  "data": {
    "$color": "#83548B", 
    "$type": "circle"
  }, 
  "id": "graphnode6.0", 
  "name": "graphnode6.0"
} 
```

];

我在这个 JSON 结构中犯了什么错误吗？谢谢苏米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:56:40.640

我遇到了类似的问题，但是感谢您的快速演示，我想我已经设法解决了我们的两个问题:)

在方向块内使用双引号。

```
"$direction":["graphnode1", "nodeZ"] 
```

当我尝试使用单引号时

```
"$direction":['graphnode1', 'nodeZ'] 
```

箭头只会在一个方向上呈现。希望这对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-19T00:15:51.393

`$direction`您正在为属性使用字符串。

```
"$direction":"['graphnode6.0','graphnode0.0']" 
```

它应该是一个数组。像这样：

```
"$direction":["graphnode6.0","graphnode0.0"] 
```

[请参阅此示例代码。](http://philogb.github.io/jit/static/v20/Jit/Examples/RGraph/example2.code.html)

# java - java lang NumberFormatException

> ID：11859883
> 
> 赞同：0
> 
> 时间：2012-08-08T07:41:57.303
> 
> 标签：java, number-formatting

我正在尝试将字符串转换为双精度。但我得到了数字格式异常。给出异常的代码是这样的：

```
double B = Double.parseDouble(s); 
```

我将 s 值从服务器带到我的应用程序。它是这样的：

```
fd485b154a0427fa75c0428cdafac71f 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:49:33.297

**1.** `Double.parseDouble()`仅适用于`Double` **Numbers**，**不适**用于`non-Numbers`。

**2.** `fd485b154a0427fa75c0428cdafac71f`是**没有号码**......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:50:59.290

试试这个：（我假设字符串是其中的 0-9 和 af 的 HEX coz）

```
double doubleVal = new BigInteger("fd485b154a0427fa75c0428cdafac71f", 16).longValue();
long longVal = new BigInteger("fd485b154a0427fa75c0428cdafac71f", 16).longValue();
System.out.println(doubleVal);
System.out.println(longVal); 
```

这给出了：

```
8.4848548707027374E18
8484854870702737183 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T07:55:55.880

`Double.parseDouble(s)``s`如果是数字，则做得很好。显然，您收到的是以十六进制为基数的数字。对？

这很简单：

```
double doubleAsLongReverse = new BigInteger(doubleAsString, 16).longValue(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T07:45:10.890

```
double B = Double.parseDouble(s); 
```

仅适用于数字，不适用于此类 fd485b154a0427fa75c0428cdafac71f 值示例 `String s = "123"; double B = Double.parseDouble(s); System.out.println(B);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T07:49:35.360

[`Hex`](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html)在 Apache 的 Commons Codec 中使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T07:49:58.133

您可以使用 ByteBuffer 类[http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html) 您可以从字符串 s.getBytes() 中放入字节，然后调用 getDouble()

希望能帮助到你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-08T08:11:33.763

我会用

```
double doubleVal = new BigInteger("fd485b154a0427fa75c0428cdafac71f", 16).doubleValue();
System.out.println(doubleVal); 
```

印刷

```
3.366703756933705E38 
```

如果您使用 .longValue() 您将由于溢出而切断数字的开头。

# memory - 如何在linux中安装和使用dr内存泄漏工具？

> ID：11859884
> 
> 赞同：0
> 
> 时间：2012-08-08T07:41:56.953
> 
> 标签：memory, memory-leaks, dr-memory

我想在我的 linux 环境中安装 dr 内存泄漏工具并在我的进程上运行泄漏工具，有人可以帮助我安装指南以及如何执行该工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T02:14:22.983

[1) 从https://code.google.com/p/drmemory/downloads/list](https://code.google.com/p/drmemory/downloads/list)下载 Dr. Memory 的最新 DrMemory-Linux-XXX-X.tar.gz 版本

2) 将包解压到您选择的目录中：

```
cd /home/myname/install
tar xzf DrMemory-Linux-X.X.X-X.tar.gz 
```

3) 将您的应用程序构建为 32 位（Dr. Memory 尚不支持 64 位），带有调​​试信息并且没有内联以获得更好的调用堆栈：

```
cd /home/myname/project
g++ -m32 -g -fno-inline -fno-omit-frame-pointer *.cpp -o myapp 
```

4) 在 Dr. Memory 下运行您的应用程序：

```
/home/myname/install/DrMemory-Linux-X.X.X-X/bin/drmemory.pl -- ./myapp arg1 arg2 arg3 
```

# jquery - 相同的图像不同的悬停区域

> ID：11859893
> 
> 赞同：1
> 
> 时间：2012-08-08T07:42:37.647
> 
> 标签：jquery, hover, area

以下是否可能：

我有**一张**图像，我希望在其中有不同的悬停“检测”区域，而不会将图像切成与我想要的悬停区域相同数量的片段。这是一种已知的技术还是更喜欢对图像进行切片？

例如： http: [//postimage.org/image/v6riryiov/](http://postimage.org/image/v6riryiov/)

如果以上是推荐的，我该如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:44:01.377

您可以拥有一个以该图像作为背景的容器，然后`div`在该容器内定义 4 个，每个具有不同的 id，使用`width`和`height`。类似于以下内容：

```
<div id="container">
    <div id="d1"></div>
    <div id="d2"></div>
    <div id="d3"></div>
    <div id="d4"></div>
</div> 
```

CSS

```
#container { width:800px; height:800px; background:url(path/to/img.png) no-repeat }
#container > div { height:800px }
#d1, #d2 { width: 300px }
#d3 { width: 100px }
#d4 { width: 200px } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:44:02.080

将绝对定位的 Divs 放在图像上！

你应该用一个 div 定位的 relativ 来包装图像！

```
<div style="position: relative;">
<img />
<div id="area1" style="position absolute; top:yourvalue; left: yourvalue;"></div>
<div id="area2" style="position absolute; top:yourvalue; left: yourvalue;"></div>
</div> 
```

# iphone - 除了 Xcode 之外，我还需要什么来为 iPhone 开发矢量绘图应用程序吗？

> ID：11859900
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:43:06.180
> 
> 标签：iphone, xcode, vector-graphics

我是矢量动画的新手。我正在练习一个 Xcode4.3 项目，该项目允许用户绘制他喜欢的精确长度、呼吸或半径的对象。用户将在绘图板上绘制对象。用户可以将文本插入到他喜欢的尺寸的绘图对象中，并且基于文本的手动增加或减少，创建的对象的大小需要改变。除了安装 Xcode 4.3，我还需要安装什么其他东西来启动项目（如 Quartz2D、Cocos2D 框架等）？请提及。

另外，请让我知道是否有相同的分步教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:50:14.970

欢迎来到stackoverflow。

您只需要安装 Xcode 即可开始使用。您无需在 Mac 上安装任何其他工具、应用程序或库。

不过，您可能需要在大脑中安装大量新知识。;^) 如果你没有太多的 iOS 开发经验或使用 Core Graphics，你需要先完成一些教程。您可以在网上找到许多免费教程。

您可能还想升级到 Xcode 4.4.1（今天发布！）。而且，当您想在设备（而不是模拟器）上实际运行您的应用程序时，您需要向 Apple 付费才能加入 iOS 开发者计划。

至于是否有“任何相同的分步教程”：在 stackoverflow 上，我们希望您自己进行此类研究，并向我们展示您在寻求帮助时所做的工作。

# ios - 如何缓存 CGContextRef

> ID：11859901
> 
> 赞同：4
> 
> 时间：2012-08-08T07:43:16.917
> 
> 标签：ios, core-graphics, vector-graphics, catiledlayer

对我之前的结果不满意，我被要求创建一个在缩放时不会模糊的手绘视图。我能想象到的唯一方法是使用 a `CATiledLayer`，否则在缩放时画线太慢了。目前，我已经设置好它每次都会重绘每一行，但我想知道我是否可以在上下文或其他东西中缓存前几行的结果（**而不是**像素，因为它们需要很好地缩放）。

我考虑过 CGBitmapContext，但这是否意味着我需要在每次缩放后拆除并设置一个新的上下文？问题是在 Retina 显示器上，线条绘制太慢（在 iPad 2 上是马马虎虎），尤其是在缩放时绘制。App Store 中有一个叫 GoodNotes 的应用程序，它精美地证明了这是可能的，并且可以顺利完成，但我无法理解他们是如何做到的。到目前为止，这是我的代码（今天大部分时间的结果）：

```
- (void)drawRect:(CGRect)rect
{   
    CGContextRef c = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(c, mLineWidth);
    CGContextSetAllowsAntialiasing(c, true);
    CGContextSetShouldAntialias(c, true);
    CGContextSetLineCap(c, kCGLineCapRound);
    CGContextSetLineJoin(c, kCGLineJoinRound);

    //Protect the local variables against the multithreaded nature of CATiledLayer
    [mLock lock]; 
    NSArray *pathsCopy = [mStrokes copy];
    for(UIBezierPath *path in pathsCopy) //**Would like to cache these**
    {
        CGContextAddPath(c, path.CGPath);
        CGContextStrokePath(c);
    }
    if(mCurPath)
    {
        CGContextAddPath(c, mCurPath.CGPath);
        CGContextStrokePath(c);
    }

    CGRect pathBounds = mCurPath.bounds;
    if(pathBounds.size.width > 32 || pathBounds.size.height > 32)
    {
        [mStrokes addObject:mCurPath];
        mCurPath = [[UIBezierPath alloc] init];
    }
   [mLock unlock];
} 
```

分析显示迄今为止最热门的功能是`GCSFillDRAM8by1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:34:25.377

首先，由于路径描边是最昂贵的操作，您不应该锁定它，因为这会阻止您在不同的核心上同时绘制图块。

其次，我认为您可以通过在上下文中添加所有路径并完全抚摸它们来避免`CGContextStrokePath`多次调用。

```
[mLock lock]; 
for ( UIBezierPath *path in mStrokes ) {
    CGContextAddPath(c, path.CGPath);
}
if ( mCurPath ) {
    CGContextAddPath(c, mCurPath.CGPath);
}
CGRect pathBounds = mCurPath.bounds;
if ( pathBounds.size.width > 32 || pathBounds.size.height > 32 )
{
    [mStrokes addObject:mCurPath];
    mCurPath = [[UIBezierPath alloc] init];
}
[mLock unlock];
CGContextStrokePath(c); 
```

这`CGContextRef`只是进行绘图操作的画布。您无法缓存它，但您可以使用`CGImageRef`路径的平面位图图像创建一个并重用该图像。这对缩放没有帮助（因为当细节级别发生变化时，您需要重新创建图像），但在用户绘制非常长的路径时有助于提高性能。

关于该主题有一个非常有趣的 WWDC 2012 会议视频：[优化 2D 图形和动画性能](https://developer.apple.com/videos/wwdc/2012/?id=506)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:48:40.763

The bottleneck was actually the way I was using CATiledLayer. I guess it is too much to update with freehand info. I set it up with levels of detail as I saw in the docs and tutorials online, but in the end I didn't need that much. I just hooked up the scrollview delegate, cleared the contents when it was done zooming and changed the `contentScale` of the layer to match the scroll view. The result was beautiful (it disappears and fades back in, but that can't be helped).

# python - 循环赛的比赛代码

> ID：11859907
> 
> 赞同：0
> 
> 时间：2012-08-08T07:43:48.113
> 
> 标签：python, itertools

我正在尝试编写一个竞赛代码，该代码将获取竞争对手列表，然后随机决定他们在每一轮中必须面对的人，循环赛风格没有淘汰赛。 [关于此类竞赛的维基文章](http://en.wikipedia.org/wiki/Round-robin_tournament)

在每轮比赛结束时，每场比赛的获胜者将获得一分。

当所有可能的战斗结束时，得分最多的一方获胜。

但我遇到了一些麻烦，这是我到目前为止的代码：

```
import itertools

# list of competitors (does not need to be even, in this case, 7)
# maybe this should be a dict with their wins and loses like:
# {'Andy': [2,['Bob','Charlie'],0,[]], ... }
# which means andy won 2 times, against bob and charlie, and lost 0 times
competitors = ['Andy', 'Bob', 'Charlie', 'Daniel', 'Eric', 'Ferdinand', 'Gabriel']
# the starting round number
round_number = 1
# holds the winner
winner = None

# start the competition
print "The competitors are: \n" + " ".join(competitors)

# round handler
def do_round():
    #round notifier
    print "Round " + str(round_number)

    #here is the problem
    matches = itertools.permutations(competitors,2)
    for match in matches: 
        print match

    # increase round number
    round_number += 1
    #return this rounds matches
    return matches

# gets the winners of each round for each match 
def get_winners(matches):
    winners = []
    for match in matches:
        winners.append(raw_input("who won?: " + " or ".join(match)))         

# decides if the games are over yet
def is_there_a_winner(winners):
    # this function should know how to get every rounds winners and add their points
    # and then decide if the game is over and there is a total winner
    winner = ??

# main loop
while not winner:
    matches = do_round()
    get_winners(matches)
    is_there_a_winner(winners) 
```

**编辑：**抱歉，在我出于某种原因写这部分之前，有人问了这个问题。

我的问题是排列给出了所有可能的排列，我只想在一轮中获得竞争对手的排列，然后下次我运行它时，能够参考他们已经与之对抗的人而不是比赛来又起来了。

**Edit2：**我决定在我的帖子中添加一个“期望的结果”。

我希望输出是这样的：

```
The competitors are: 
Andy Bob Charlie Daniel Eric Ferdinand Gabriel
Round 1
Andy     vs   Bob
Charlie  vs   Daniel
Eric     vs   Ferdinand
Gabriel sits out
Round 1 Results:
Andy     beat Bob
Charlie  beat Daniel
Eric     beat Ferdinand
Round 2
Andy     vs   Daniel
Bob      vs   Gabriel
Eric     vs   Charlie
Ferdinand sits out

... etc etc ... until at the end the winner (highest score) is revealed. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:10:44.237

我在这里找到了答案：

[https://stackoverflow.com/a/11246261/1561176](https://stackoverflow.com/a/11246261/1561176)

这就是我需要的，现在只需要输入我自己的值。并修改它的输出方式。

可能应该尝试更深入地寻找，谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:50:26.347

而不是使用排列，例如：

```
import copy
import random
# Setup:
opponents = dict()
for competitor in competitors:
    opponents[competitor] = copy.deepcopy(competitors)

def do_round():
    players = copy.deepcopy(competitors)
    while players:
        p1 = players.pop(0)
        p2 = random.choice(opponents[p1])
        opponents[p2].remove(p1)
        opponents[p1].remove(p2)
        players.remove(p2)
        play_match(p1, p2)

for _ in range(len(competitors)):
    do_round() 
```

如果比赛不并行进行，则[创建时间表会容易得多](https://stackoverflow.com/a/9901036/180174)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:46:16.133

你说“随机决定他们必须在每一轮面对谁”，但你可以按照维基百科文章中描述的循环算法，这不是随机的，但可以确保对于 n 个玩家，在 (n-1) 轮之后，每个玩家遇到了所有其他人。

# javascript - javascript中的执行顺序问题

> ID：11859909
> 
> 赞同：3
> 
> 时间：2012-08-08T07:43:52.740
> 
> 标签：javascript, function, execution

我对 javascript 比较陌生，所以请不要反对我。

我有一些代码应该让用户有一点时间从基本菜单到达子菜单。我的问题是代码一直以奇怪的顺序执行。

这是代码：

```
function onFocusOut() {
    var tester = 0;
    setTimeout(function(){menuReset(tester)},1000);
}

function menuReset(tester) {    
    var hoverCheck = function (event) {
        alert("#navBase a has focus"); //is fired, but to late...
        var tester = event.data.varTester;
        var tester = 1;
    };

    jQuery('#navBase').on('mousemove', 'a', { varTester: tester }, hoverCheck);
    jQuery('#navBase').off('mousemove', 'a', { varTester: tester }, hoverCheck);

    alert(tester);   //This keeps firing first, before the alert in hoverCheck

    if(tester == 1){
        alert("tester = 1");
        return;
    }

    else {
        jQuery('#navBase ul').hide();
        jQuery('#navBase').css({'width': ''});
        jQuery('#navBaseAnchor').css({
            'width': '', 'color': '', 
            'font-size': '', 
            'border-bottom-style': '', 
            'border-bottom-width': '', 
            'border-bottom-color': ''});

        tester = 0;
    }
} 
```

现在，在执行 hoverCheck 函数（应该将“tester”设置为 1）并在该函数中触发警报之前，我不断收到“tester”为 0 的警报。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:08:01.087

我对 JS 也很陌生，但是您是否也应该注意变量范围错误？

您已经`tester`在本地声明 in`onFocusOut()`和 in `menuReset(tester)`，然后在外面将其称为全局 var？

来自[answers.oreilly.com](http://answers.oreilly.com/topic/2045-distinction-between-local-and-global-variables-javascript/)

> *   LOCAL - 是那些特定于某个功能且仅适用于它的功能。
> *   GLOBAL - 是那些未在函数中定义的函数，也可以用于函数，除非函数不需要该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:23:48.817

没关系的人......我找到了解决这一切的方法。目前，我正在`.focus()`为所涉及的锚设置 a `mouseOver`。（当然还有`blur()`）`mouseleave`然后使用 . 检查当前聚焦的元素真的很容易`document.activeElement`。

所以问题解决了，尽管方式有点不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T07:55:51.070

`alert(tester)`是执行您作为用户注意到的某事的第一行代码。这两个函数调用`jQuery().on()`并且`jQuery().off()`仅附加事件处理程序。如果要在警报中看到“1”，则必须在执行之前快速移动鼠标`hoverCheck`。但可能你的手移动速度不能超过 JavaScript 到达下一行，即`alert()`等于`tester`“0”的行。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T21:53:16.407

稍微不同的方法是设置 Javascript timeout() 如果不满足某个条件，则在一定时间后使子菜单消失。

查看[这个 JSFiddle 示例](http://jsfiddle.net/BPqrK/)

祝你好运！

# excel - 如何找到“0”值而不是空单元格

> ID：11859916
> 
> 赞同：2
> 
> 时间：2012-08-08T07:44:19.733
> 
> 标签：excel, vba

我有一个包含 8 列数据 AH 的电子表格，每列都有不同的长度，并且可能包含我需要删除的“0”值。我没有使用循环执行此操作，而是尝试使用 .Find 方法执行此操作，但由于 find 方法将空单元格（其中一列短于最大长度列）分类为零，因此我变得不稳定。当函数找到其中一个单元格时，它会选择并删除该列顶部的一个单元格，而不是选择特定的单元格。我已经尝试使用我的代码使用 0 以外的值，它工作正常，因此 excel 将空单元格分类为“0”是一个问题。

有没有办法专门搜索值“0”？我尝试使用 str(0) 指定字符串值“0”但得到相同的结果。我的代码的一个子集是：

```
Row = wf.Max(Cells(Rows.Count,1).End(xlUp).Row, Cells(Rows.Count,8).End(xlUp_.Row

'Originally I had zero = 0 or "0" but I tried the following to get a string version
zero = Str(0)
zerofix = Right(zero,1)

Do While Check_Val_Existence(zerofix,Row) = True
   Set aCell = ActiveSheet.Range(Cells(1,1), Cells(Row,8)).Find(What:=zerofix,LookIn:=xlValues)
   If Not aCell Is Nothing Then
      aCell.Delete Shift:=xlUp
   End If
Loop 
```

在哪里

```
Function Check_Val_Existence(ByVal Srch, ByVal Row) As Boolean

Dim rFnd As Range

Set rFnd = ActiveSheet.Range(Cells(1,1), Cells(Row,8)).Find(What:=Srch)
If Not rFnd Is Nothing Then
   Check_Val_Existence = True
Else
   Check_Val_Existence = False
End If

End Function 
```

我宁愿不必遍历代码并依次搜索每一列，但看起来我可能不得不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:51:59.297

试试这个

```
Sheet1.Cells.Replace What:="0", Replacement:="", LookAt:=xlwhole, SearchOrder:= _
xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False 
```

这将清除所有具有“0”的单元格

如果要删除具有“0”的单元格，则还可以使用`.Find`and `.FindNext`。看到这个链接

**主题**： Excel VBA 中的 .Find 和 .FindNext

**链接**：[http ://www.siddharthout.com/2011/07/14/find-and-findnext-in-excel-vba/](http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/)

**从该链接引用**

> 在本教程中，我将重点介绍如何使用 .Find 来加快搜索速度。
> 
> .Find 的语法是
> 
> 表达式.Find（什么，之后，LookIn，LookAt，SearchOrder，SearchDirection，MatchCase，MatchByte，SearchFormat）
> 
> 在哪里
> 
> 表达式（必需）：是任何有效的范围对象。因此，如果我们采用上面的示例，那么范围将是 Range(“A1:A” & lastRow)
> 
> 什么（可选变体）：是“搜索值”</p>
> 
> 之后（可选变体）：您希望在其之后开始搜索的单元格。
> 
> LookIn（可选变体）：信息的类型。（xlValues 或 xlFormulas）
> 
> LookAt（可选变体）：可以是以下 XlLookAt（常量）之一：xlWhole 或 xlPart。
> 
> SearchOrder（可选变体）：可以是以下 XlSearchOrder 常量之一：xlByRows 或 xlByColumns。
> 
> SearchDirection：可以是这些 XlSearchDirection 常量之一。xlNext 默认 xlPrevious
> 
> MatchCase（可选变体）：True 使搜索区分大小写。默认值为假。
> 
> MatchByte（可选变体）：仅在您选择或安装了双字节语言支持时使用。如果双字节字符只匹配双字节字符，则为真。False 使双字节字符匹配其单字节字符。
> 
> SearchFormat（可选变体）：搜索格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:57:36.797

与其使用*所有单元格*，不如先进行初步工作以定义感兴趣的范围 - 即其中包含数字的单元格，要么输入为常数，要么输入为公式。这会将您的空白 cels 从搜索中排除，这既可以加快您的代码速度，又可以消除错误标志。

在此示例`rng3`中，返回 上感兴趣的单元格`ActiveSheet`。然后你会在这个范围内运行你的`Find`例程

```
Sub LookAtZeros()
Dim rng1 As Range
Dim rng2 As Range
Dim rng3 As Range
On Error Resume Next
Set rng1 = Cells.SpecialCells(xlCellTypeConstants, xlNumbers)
Set rng2 = Cells.SpecialCells(xlCellTypeFormulas, xlNumbers)
On Error GoTo 0
If Not rng1 Is Nothing Then
If Not rng2 Is Nothing Then
Set rng3 = Union(rng1, rng2)
Else
Set rng3 = rng1
End If
Else
If Not rng2 Is Nothing Then Set rng3 = rng2
End If
If Not rng3 Is Nothing Then
MsgBox "Range with numeric constants and/or numeric formulae is " & rng3.Address(0, 0)
Else
MsgBox "no numbers", vbCritical
End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T17:13:19.530

我的建议是将 0 普遍替换为 = 0/0，这应该会产生错误（并且由于唯一的计算，如果需要，仍然可以将值恢复为 0），然后执行 find/选择特殊错误。

# java - 如何在 jOOQ 中使用别名

> ID：11859923
> 
> 赞同：4
> 
> 时间：2012-08-08T07:44:34.577
> 
> 标签：java, sql, alias, jooq

有人可以指导我如何在 jOOQ 中使用别名。我尝试查看 jOOQ 文档，但不清楚。如果可能，请提供一个例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T14:44:48.763

[`org.jooq.Table`](http://www.jooq.org/javadoc/latest/org/jooq/Table.html)和[`org.jooq.Field`](http://www.jooq.org/javadoc/latest/org/jooq/Field.html)类型都实现[`org.jooq.AliasProvider`](http://www.jooq.org/javadoc/latest/org/jooq/AliasProvider.html). 这意味着，您可以调用[`as(String)`](http://www.jooq.org/javadoc/latest/org/jooq/AliasProvider.html#as%28java.lang.String%29)它们来创建别名对象。例子：

```
Table<?> aliasedTable = MY_TABLE.as("t");
Field<?> aliasedField = MY_FIELD.as("f"); 
```

[jOOQ 手册](http://www.jooq.org/manual/DSL/ALIAS/)中的示例包括：

```
TBook book = T_BOOK.as("b");
TAuthor author = T_AUTHOR.as("a");

create.select(author.ID, book.ID)
      .from(author)
      .join(book).on(author.ID.equal(book.AUTHOR_ID)) 
```

# r - 计算汇总统计，然后将所有结果合并到单个 data.frame

> ID：11859925
> 
> 赞同：4
> 
> 时间：2012-08-08T07:44:48.040
> 
> 标签：r, merge, reshape

我正在尝试学习简化我的代码并将多个`data.frames`（> 2）同时合并到一个数据集中。首先，我想为四个 PCA 列（ 、、 ...）中的每一个计算“站点” `mean`、`sd`和`n`（每个站点的“个人”数量）。其次，将结果合并到单个 data.frame 中。以下是我尝试执行此任务的示例数据和代码。`Morph_PC1``Morph_PC2`

我意识到可能有一种方法可以生成不需要合并的单个数据集，这会很棒，但我也想知道如何使`merge_all`包中的命令`reshape`起作用。

样本数据：

```
WW_Data <- structure(list(Individual_ID = c("WW_00A_05", "WW_00A_03", "WW_00A_02", 
"WW_00A_01", "WW_00A_04", "WW_00A_06", "WW_00A_08", "WW_00A_09", 
"WW_00A_07", "WW_00A_10", "WW_09AB_14", "WW_09AB_09", "WW_09AB_13", 
"WW_10AD_01", "WW_10AD_09", "WW_10AD_04", "WW_10AD_02", "WW_10AD_03", 
"WW_10AD_07", "WW_10AD_08"), Site_Name = c("Alnön", "Alnön", 
"Alnön", "Alnön", "Alnön", "Alnön", "Alnön", "Alnön", "Alnön", 
"Alnön", "Anjan", "Anjan", "Anjan", "Anjan", "Anjan", "Anjan", 
"Anjan", "Anjan", "Anjan", "Anjan"), Morph_PC1 = c(-2.08424433316496, 
-1.85413711191957, -1.67227075271696, -1.0486265729884, -0.809415702756541, 
-2.81781338129716, -2.08471369525797, -0.183840575363918, -0.753930407169699, 
0.0719252507535882, 1.02353521593315, 1.34441686821234, 0.755249445355964, 
-0.564426004755035, 0.720689649641627, -0.243471506156601, -0.245437522679261, 
-0.69936850894502, 0.9160796809062, 2.2881261039382), Morph_PC2 = c(1.28499189140338, 
-0.349487815669147, 0.0148183164519594, -1.55929148726881, -0.681590397005219, 
1.21595114750227, 0.116028310510466, 0.187613229042593, -0.923592436104444, 
-1.50956083294446, 1.44864057855388, 1.46254159976068, 1.20375736157205, 
0.174071006609975, -0.722049893415186, 1.03516327411773, 0.808851776990861, 
-0.928263134752596, -0.175511637463994, -0.389421342417043), 
    Morph_PC3 = c(-0.445087364125436, -0.704903876393893, 0.161983939922481, 
    1.14604411022773, 0.701508422965674, -0.78133408496171, -0.306619974141955, 
    1.05643337302175, 0.163868647932456, -0.673344807228353, 
    -0.337986608605208, -1.01911125040091, 0.258004835638601, 
    -0.648040419259003, -0.196770002944659, 0.614010430132367, 
    0.755886614924319, -0.0631407344114064, -1.28178468134549, 
    0.226362214551239), Morph_PC4 = c(0.0476276463048772, 0.342957387676778, 
    -0.117383887482525, 0.289881853573214, 0.649579005842321, 
    0.600433718752986, 0.295294947111845, -0.293754065807853, 
    -0.43805381119461, 0.520363554131325, -0.393329204345947, 
    -1.05629143416274, -0.370922397397109, 0.115121369773473, 
    0.91445926597504, 0.280048079793911, -0.802245210297552, 
    0.00368405602889952, -0.251898295768711, -0.607995193037228
    )), .Names = c("Individual_ID", "Site_Name", "Morph_PC1", 
"Morph_PC2", "Morph_PC3", "Morph_PC4"), row.names = c(36L, 37L, 
38L, 39L, 40L, 41L, 42L, 43L, 44L, 45L, 137L, 138L, 139L, 140L, 
141L, 142L, 143L, 144L, 145L, 146L), class = "data.frame") 
```

编码：

```
## Calculate statistics for each site ##
WW_PC1_Mean <- subset(melt(tapply(WW_Data$Morph_PC1,list(WW_Data$Site_Name),mean)), value != FALSE)
WW_PC1_SD <- subset(melt(tapply(WW_Data$Morph_PC1,list(WW_Data$Site_Name),sd)), value != FALSE)
WW_PC2_Mean <- subset(melt(tapply(WW_Data$Morph_PC2,list(WW_Data$Site_Name),mean)), value != FALSE)
WW_Site_SD <- subset(melt(tapply(WW_Data$Morph_PC2,list(WW_Data$Site_Name),sd)), value != FALSE)

## merge the all the datasets with one command - THIS FAILS!
WW_Stats <- merge_all(WW_Site_PC1_Mean, WW_Site_PC1_SD, WW_Site_PC2_Mean, by = c("indices")) 
```

**编辑**：现在我有一个很好的结果，可以快速将摘要统计信息放入三个文件中，但我仍然在尝试`merge_all`（尽管我不确定是否应该使用`merge_recurse`- 无论我得到相同的错误）结果时遇到问题。这是我的尝试：

```
## Calculate statistics for each site ##
WW_Site_PC_Mean <- ddply(WW_Data, .(Site_Name), numcolwise(mean))
colnames(WW_Site_PC_Mean) <- c("Site_Name", "PC1_Mean", "PC2_Mean", "PC3_Mean", "PC4_Mean")
WW_Site_PC_SD <- ddply(WW_Data, .(Site_Name), numcolwise(sd))
colnames(WW_Site_PC_Mean) <- c("Site_Name", "PC1_SD", "PC2_SD", "PC3_SD", "PC4_SD")
WW_Site_PC_N <- count(WW_Data$Site_Name)
colnames(WW_Site_PC_N) <- c("Site_Name", "PCA_N")

## merge the all the datasets with one command - THIS FAILS!
WW_Stats <- merge_recurse(WW_Site_PC_Mean, WW_Site_PC_SD, WW_Site_PC_N, by = "Site_Name") 
```

错误输出：

```
Error in fix.by(by.x, x) : 
  'by' must specify column(s) as numbers, names or logical 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T08:04:40.523

留在基础 R 中，您可以使用`aggregate`：

```
WW_Data_mean = aggregate(list(mean = WW_Data[, -c(1, 2)]), 
                         list(Site_Name = WW_Data$Site_Name), mean)
WW_Data_sd = aggregate(list(mean = WW_Data[, -c(1, 2)]), 
                       list(Site_Name = WW_Data$Site_Name), sd) 
```

# 更新（你问题的第二部分）

您的代码有几个错误，也许您需要更多地“玩”合并。

首先，错误。您的示例中失败的行失败，因为：

1.  它的结构不正确；要合并的`data.frame`s 应该在 a 中`list`。
2.  它引用了您的示例中不存在的对象！您正在尝试合并一个名为的对象`WW_Site_Name_PC1_Mean`，但该对象的名称是`WW_PC1_Mean`.

其次，这里有一些其他的尝试。修正你的列名：

```
# Fix your column names
# There's probably an easier way to do this, but...
names(WW_PC1_Mean)[2] = "WW_PC1_Mean"
names(WW_PC1_SD)[2] = "WW_PC1_SD"
names(WW_PC2_Mean)[2] = "WW_PC2_Mean"
names(WW_Site_SD)[2] = "WW_Site_SD" 
```

现在，试试`merge_all`。请注意，您需要提供一个`list`of `data.frame`s。似乎*总是*只`merge_all`给出两列——但也许我做错了什么。

```
# Not what you want
merge_all(list(WW_PC1_Mean, WW_PC1_SD, 
               WW_PC2_Mean, WW_Site_SD), by="indices")
  indices WW_PC1_Mean
1   Alnön  -1.3237067
2   Anjan   0.5295393 
```

继续前进`merge_recurse`。这有效：

```
# This is what you want
merge_recurse(list(WW_PC1_Mean, WW_PC1_SD, 
                   WW_PC2_Mean, WW_Site_SD), by="indices")
  indices WW_PC1_Mean WW_PC1_SD WW_PC2_Mean WW_Site_SD
1   Alnön  -1.3237067 0.9252417   -0.220412  0.9912227
2   Anjan   0.5295393 0.9511800    0.391778  0.9112450 
```

您也可以`Reduce`在基础 R 中使用。

```
# Base R also has a solution
Reduce(function(x, y) merge(x, y, all=TRUE), 
       list(WW_PC1_Mean, WW_PC1_SD, WW_PC2_Mean, WW_Site_SD)) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T07:57:06.930

我建议你把精力集中在学习一些`plyr`优点上。

使用该功能`ddply`，您可以**真正**简化您的代码。以下是`mean`使用一行代码计算数据中所有列的方法：

```
library(plyr)
ddply(WW_Data, .(Site_Name), numcolwise(mean))
  Site_Name  Morph_PC1 Morph_PC2   Morph_PC3  Morph_PC4
1     Alnön -1.3237067 -0.220412  0.03185484  0.1896946
2     Anjan  0.5295393  0.391778 -0.16925696 -0.2169369 
```

同样，标准差：

```
ddply(WW_Data, .(Site_Name), numcolwise(sd))
  Site_Name Morph_PC1 Morph_PC2 Morph_PC3 Morph_PC4
1     Alnön 0.9252417 0.9912227 0.7316201 0.3766064
2     Anjan 0.9511800 0.9112450 0.6698389 0.5717482 
```

* * *

我经常使用这种类型的分析。使用这种策略，我几乎不需要同时合并多个数据帧。

PS。包`reshape`是旧的 - 您应该使用`reshape2`它，它不再包含该`merge_all()`功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T17:38:38.320

一些使用 plyr 和信息变量名称的解决方案。

```
ms <- function(x) cbind("mean"=mean(x),"sd"=sd(x))
do.call(rbind,dlply(WW_Data, .(Site_Name), function(dat) numcolwise(ms)(dat)))

      Morph_PC1.mean Morph_PC1.sd Morph_PC2.mean Morph_PC2.sd Morph_PC3.mean Morph_PC3.sd Morph_PC4.mean Morph_PC4.sd
Alnön     -1.3237067    0.9252417     -0.2204120    0.9912227     0.03185484   0.73162007      0.1896946    0.3766064
Anjan      0.5295393    0.9511800      0.3917780    0.9112450    -0.16925696   0.66983885     -0.2169369    0.5717482 
```

# c# - 将 varbinary 从 sql 加载或转换为文本框文本？

> ID：11859926
> 
> 赞同：1
> 
> 时间：2012-08-08T07:44:48.270
> 
> 标签：c#, .net, sql-server

我是 C# 编程的新手。
目前我尝试将文本文件保存并加载到 sql server。我在 youtube 上观看并搜索了一些视频和文档。他们将图像文件存储到sql。我尝试并已经将文本文件保存到服务器（二进制数据）。现在我坚持如何加载或转换它：

当我保存它时，我使用了内存流：

```
MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(textreview.Text);
byte[] theBytes = Encoding.UTF8.GetBytes(textreview.Text);
ms.Position = 0;
ms.Read(theBytes, 0, theBytes.Length);

//insert value to server
SqlCommand cmdb = new SqlCommand("insert into Assignment(text) values (@text)", con);
cmdb.Parameters.AddWithValue("@textname", textPathLabel.Text);
cmdb.Parameters.AddWithValue("@text", theBytes); 
```

现在我尝试加载它，但我卡在这里！

```
//load from sql
byte[] picarr = (byte[])dr["text"];
ms = new MemoryStream(picarr);
ms.Seek(0, SeekOrigin.Begin);
StreamReader reader = new StreamReader(ms);
string text = reader.ReadToEnd();
textreview.Text = text; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:57:30.803

这是一个关于如何将文本转换为字节然后再返回的示例：

`var bytes = Encoding.UTF8.GetBytes("test");`

这将为您提供一个如下所示的字节数组：

`{ 116, 101, 115, 116 }`

现在要再次获取文本，您可以`Encoding.UTF8.GetString()`像这样使用：

`Encoding.UTF8.GetString(bytes);`

这意味着您可以在保存值时简单地执行此操作：

`cmdb.Parameters.AddWithValue("@text", Encoding.UTF8.GetBytes(textreview.Text));`

然后在加载它时，您只需执行以下操作：

`textreview.Text = Encoding.GetString((byte[])dr["text"]);`

# ruby-on-rails - 轨道中 mongoid 的 TTL

> ID：11859929
> 
> 赞同：3
> 
> 时间：2012-08-08T07:44:54.670
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

如 mongodb 网站所述，我可以使用 .ensureIndex({state:1},{expireAfterSeconds:10}) 使记录过期。但是如何从 Rails 实现呢？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:31:18.613

如果您使用的是 MongoDB 2.2，Ruby 驱动程序应该已经通过 Collection 的[create_index()](http://api.mongodb.org/ruby/current/Mongo/Collection.html#create_index-instance_method)和[ensure_index()](http://api.mongodb.org/ruby/current/Mongo/Collection.html#ensure_index-instance_method)方法支持这一点。索引选项直接传递给服务器。为了方便起见，API 文档中的下划线符号在内部进行了翻译（例如`:drop_dups`设置`:dropDups`选项）。你应该能够做到：

```
@collection.create_index([['state', Mongo::ASCENDING]], :expireAfterSeconds => 10) 
```

特别是对于 mongoid，看起来您也可以根据[本文档](http://rdoc.info/github/mongoid/mongoid/Mongoid/Indexes/ClassMethods#index-instance_method)传递索引的自定义选项。

# ios - 企业经销证书将在一个月内到期

> ID：11859933
> 
> 赞同：1
> 
> 时间：2012-08-08T07:45:12.047
> 
> 标签：ios, xcode, distribution

我们的分销证书将于 9 月到期。我红了苹果文档，但是关于更新证书的信息不多。我们是否必须使用新证书再次重新发送所有应用程序？

谢谢你。

# xslt - 用 xslt 中的元素替换版权符号和其他符号

> ID：11859934
> 
> 赞同：1
> 
> 时间：2012-08-08T07:45:13.063
> 
> 标签：xslt, xslt-1.0

输入：

```
<text>
    Please see the registered mark® .
    Please see the copy right ©.
    Please see the Trade mark™.
</text> 
```

输出：

```
 <text>
        Please see the registered mark<registeredTrademark></registeredTrademark>.
        Please see the copy right <copyright></copyright>.
        Please see the Trade mark <trademark></trademark>.
  </text> 
```

我需要用上面显示的元素替换所有特殊符号

任何人都可以帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:56:26.420

由于这是 XSLT 1.0，您将不得不使用递归命名模板来依次检查每个字符。

首先，在 XSLT 中创建一种“查找”可能更灵活，您可以在其中指定符号列表和所需的元素名称来替换它们

```
<lookup:codes>
  <code symbol="®">registeredTrademark</code>
  <code symbol="©">copyright</code>
  <code symbol="™">trademark</code>
</lookup:codes> 
```

（'lookup' 命名空间实际上可以命名为任何名称，只要它在 XSLT 中声明即可）。

然后，要访问它，您可以定义一个变量来访问此查找

```
<xsl:variable name="lookup" select="document('')/*/lookup:codes"/> 
```

而且，要根据符号查找实际代码会做这样的事情（其中 $text）是一个包含您正在检查的文本的变量。

```
 <xsl:variable name="char" select="substring($text, 1, 1)"/>
  <xsl:variable name="code" select="$lookup/code[@symbol = $char]"/> 
```

所有命名模板都会做的是检查文本的第一个字符，如果它存在于查找中，则将其替换为元素，然后使用文本的剩余部分递归调用模板。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:lookup="lookup" exclude-result-prefixes="lookup">
   <xsl:output method="xml" indent="no"/>

   <lookup:codes>
      <code symbol="®">registeredTrademark</code>
      <code symbol="©">copyright</code>
      <code symbol="™">trademark</code>
   </lookup:codes>

   <xsl:variable name="lookup" select="document('')/*/lookup:codes"/>

   <xsl:template match="text[text()]">
      <text>
         <xsl:call-template name="text"/>
      </text>
   </xsl:template>

   <xsl:template name="text">
      <xsl:param name="text" select="text()"/>
      <xsl:variable name="char" select="substring($text, 1, 1)"/>
      <xsl:variable name="code" select="$lookup/code[@symbol = $char]"/>
      <xsl:choose>
         <xsl:when test="$code"><xsl:element name="{$code}" /></xsl:when>
         <xsl:otherwise>
            <xsl:value-of select="$char"/>
         </xsl:otherwise>
      </xsl:choose>
      <xsl:if test="string-length($text) &gt; 1">
         <xsl:call-template name="text">
            <xsl:with-param name="text" select="substring($text, 2, string-length($text) - 1)"/>
         </xsl:call-template>
      </xsl:if>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<text> 
    Please see the registered mark<registeredTrademark /> . 
    Please see the copy right <copyright />. 
    Please see the Trade mark<trademark />. 
</text> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:11:57.870

**通过避免逐字符递归和使用“最大可能步”递归，这种转换更加有效**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <my:reps>
  <r char="®">registeredTrademark</r>
  <r char="©">copyright</r>
  <r char="™">trademark</r>
 </my:reps>

 <xsl:variable name="vReps" select="document('')/*/my:reps/*"/>

 <xsl:template match="text()" name="multReplace">
  <xsl:param name="pText" select="."/>
  <xsl:param name="pReps" select="$vReps"/>

   <xsl:if test="$pText">
     <xsl:variable name="vTarget" select="$pReps[1]/@char"/>
       <xsl:choose>
         <xsl:when test="not($vTarget)">
           <xsl:value-of select="$pText"/>
         </xsl:when>
         <xsl:otherwise>
           <xsl:variable name="vReplacement" select="$pReps[1]"/>

           <xsl:call-template name="multReplace">
            <xsl:with-param name="pText" select=
            "substring-before(concat($pText, $vTarget), $vTarget)"/>
            <xsl:with-param name="pReps" select="$pReps[position() >1]"/>
           </xsl:call-template>

           <xsl:if test="contains($pText, $vTarget)">
             <xsl:element name="{$vReplacement}"/>
             <xsl:call-template name="multReplace">
              <xsl:with-param name="pText" select="substring-after($pText, $vTarget)"/>
              <xsl:with-param name="pReps" select="$pReps"/>
             </xsl:call-template>
           </xsl:if>
         </xsl:otherwise>
       </xsl:choose>
   </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<text>
        Please see the registered mark® .
        Please see the copy right ©.
        Please see the Trade mark™.
</text> 
```

**生成正确替换的文本**：

```
 Please see the registered mark<registeredTrademark/> .
    Please see the copy right <copyright/>.
    Please see the Trade mark<trademark/>. 
```

# javascript - 如何在 AJAX 请求中编写内部 URL

> ID：11859939
> 
> 赞同：0
> 
> 时间：2012-08-08T07:45:33.367
> 
> 标签：javascript, jquery, ajax

我正在测试本地服务器上的站点是地址 `my.internal/test.php`

哪个在浏览器中运行良好

但是当我这样做时，什么也没有发生

```
$(function() {

        $.get("my.internal/test.php", function(data){
            alert("Data Loaded: " + data);
            alert('hello')  ;
        });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:47:17.633

您可以指定绝对地址或相对地址。如果你传递一个绝对的，你必须写完整的 URL，即包括协议：

```
$(function() { 

        $.get("http://my.internal/test.php", function(data){ 
            alert("Data Loaded: " + data); 
            alert('hello')  ; 
        }); 

}); 
```

你也可以使用这个网址：

```
/test.php 
```

# sql - 子查询返回多个值

> ID：11859940
> 
> 赞同：1
> 
> 时间：2012-08-08T07:45:36.387
> 
> 标签：sql, database, oracle, oracle8i

我有以下查询给出了`req_no and order_no`。`order_no`是一个 sub_query ，您可以从下面的 sql 中看到。对于少数`req_no`人来说，不止一个`order_no's`，因此我得到了`ORA-01427: single-row subquery returns more than one row`.

我想同时显示`order_no`for one `req_no`，我该如何实现呢？任何帮助都是非常可观的。

谢谢

PS我们客户的一个数据库仍然是`Oracle 8i`。

```
SELECT  max_qst.req_no,
            (SELECT  DISTINCT max_odr.order_no
                FROM     maximo_orders max_odr,
                         maximo_order_revisions max_odv,
                         maximo_order_items max_odi,
                         maximo_order_dates max_odd,
                         maximo_requisition_order max_rqo,
                         maximo_requisition_details max_req
              WHERE       max_req.req_no = max_qst.req_no
                         AND max_req.req_yr = max_qst.req_yr
                         AND max_odr.order_no = max_odi.order_no
                         AND max_odi.order_item_id = max_odd.order_item_id
                         AND max_req.requisition_item_id = max_rqo.requisition_item_id
                         AND max_rqo.order_schedule_id = max_odd.order_schedule_id
                         AND max_odv.order_no = max_odi.order_no
                         AND max_odv.revision_no =
                                 (SELECT   MAX (max_alias.revision_no)
                                     FROM   maximo_order_revisions max_alias
                                    WHERE   max_alias.order_no = max_odv.order_no)
                         AND maximo_order_item (max_odi.order_no,
                                                                  max_odv.revision_no,
                                                                  max_odi.order_item_id
                                                                 ) = 'CONFIRMED'
                        )
  FROM  maximo_requisitions max_qst, maximo_requisition_details max_qsd
 WHERE       max_qst.qst_id = max_qsd.qst_id
            AND max_qst.enter_date = '2001'
            AND max_qst.req_no = 'PUR_12WX' 
```

*`Update 1`*

想要输出。

```
REQ_No     ORDER_NO

PUR_12WX   PR_9078  
PUR_12WX   PR_9079 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T08:07:39.027

使用连接而不是相关子查询。

我已经`max_qst`从子查询中删除了引用并将它们移动到连接谓词中。

我也刚刚将其更改为使用`LEFT JOIN`. 这允许没有`order_no`返回值的可能性。

```
SELECT
  max_qst.req_no,
  sub_query.order_no
FROM
  maximo_requisitions          max_qst
INNER JOIN
  maximo_requisition_details   max_qsd
    ON max_qst.qst_id = max_qsd.qst_id
LEFT JOIN
(
  SELECT DISTINCT
    max_odr.order_no,
    max_req.req_no,
    max_req.req_yr
  FROM
    maximo_orders              max_odr,
    maximo_order_revisions     max_odv,
    maximo_order_items         max_odi,
    maximo_order_dates         max_odd,
    maximo_requisition_order   max_rqo,
    maximo_requisition_details max_req
  WHERE
        max_odr.order_no            = max_odi.order_no
    AND max_odi.order_item_id       = max_odd.order_item_id
    AND max_req.requisition_item_id = max_rqo.requisition_item_id
    AND max_rqo.order_schedule_id   = max_odd.order_schedule_id
    AND max_odv.order_no            = max_odi.order_no
    AND max_odv.revision_no         = (SELECT MAX (max_alias.revision_no)
                                         FROM maximo_order_revisions max_alias
                                        WHERE max_alias.order_no = max_odv.order_no)
    AND maximo_order_item (max_odi.order_no,  max_odv.revision_no, max_odi.order_item_id) = 'CONFIRMED'
)
  suq_query
    ON  max_qst.req_no = sub_query.req_no
    AND max_qst.req_yr = sub_query.req_yr
WHERE
  max_qst.enter_date = '2001'
  max_qst.req_no = 'PUR_12WX' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:54:42.703

您可以使用

```
DISTINCT 
```

或者

```
WHERE ROWNUM = 1 
```

但我建议您调查一下*为什么*返回的数据不止一行：您是否误解了数据、是否错过了连接、是否存在错误或重复的数据等。

# node.js - 有条件包含在 Jade + Express

> ID：11859942
> 
> 赞同：2
> 
> 时间：2012-08-08T07:45:41.253
> 
> 标签：node.js, express, pug

如何在玉中使用 if -else 关于“包含”的语句？

例如，如果我有两个单独的导航栏模板 navbar.jade 和 navbar_notloggedin.jade

我想要做：

```
input(type='hidden', value= user.user)#username

- if(user.user!="")
  include navbar
- else if(user.user=="")
  include navbar_notloggedin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T09:55:39.743

您可以使用，

```
-if (user.user)
 include navbar
-else
 include navbar_notloggedin 
```

if 语句将检查变量是否已定义，而不是检查它是否为空字符串。但是，我假设您没有为用户存储空字符串值。

# json - Solr JSON请求没有一次返回所有数据

> ID：11859943
> 
> 赞同：0
> 
> 时间：2012-08-08T07:45:47.973
> 
> 标签：json, parsing, solr

我正在使用这种模式：

```
http://localhost:8983/solr/select/?q=hello&wt=json&json.wrf=?&indent=true&hl=true&hl.fl=title 
```

它返回如下：

```
?({
    "response":{"numFound":100,"start":0,"docs":[
        {
            "id":"1234",
            "title":"Something Hello"
            ..
            ..
        },
        ... bla bla, to the end
    ]
}) 
```

它显然显示`100 records found`在标题中，但项目`{ bla bla... }` **确实在`just 10`里面**。它确实是索引中的第 100 项。它必须准确地显示 100。

它只显示前 10 个项目吗？
我在模式中错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T07:50:28.923

100 是 Solr 找到的记录总数，但默认情况下它一次只返回 10 个。

尝试添加`&rows=100`到 URL 以一次获取所有 100 个结果。

**编辑：**在一个真实的应用程序中，您可能希望在页面中获取结果，这样您就不会在尝试一次获取数不胜数的结果时耗尽内存。在这种情况下，您可以组合`start`和`rows`选项。

例如一次获取 20 个结果：

*   第一个请求将使用`&start=0&rows=20`

*   第二个请求将使用`&start=20&rows=20`

*   ... 以此类推，直到您获取所有结果。

这类似于在 SQL 中使用`OFFSET`and`LIMIT`关键字，如果您熟悉的话。

# regex - 在 Perl 的同一字符串中打印多个 reg expr 匹配项

> ID：11859945
> 
> 赞同：2
> 
> 时间：2012-08-08T07:45:50.997
> 
> 标签：regex, perl

我有一个格式为：

```
20120807 175041.438  5976.022 E   27000 [PRE:4712345678: Just some text HERE '127.0.0.1' or APU_ID '' - DEFAULTING TO WORLD_PLAN_9 ZONE]
20120807 175041.438  5976.022 E   27000 [PRE:4722345679: Just some text HERE '127.0.0.2' or APU_ID '26002' - DEFAULTING TO WORLD_PLAN_9 ZONE]
.. 
```

我要提取的是：

```
20120807;4712345678;127.0.0.1;;
20120807;4722345679;127.0.0.2;26002; 
```

我知道我可以使用例如提取 IP。`/(\d+\.){3}\d+/`和以 4 开头的 10 位数字，例如。`/[4][0-9]{9}/`但是如何从同一个字符串一起打印它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:03:16.290

```
while (<DATA>) {
    @ds = /^(\d+).*?PRE:(\d+):[^']+'([^']+)' or APU_ID '(\d*)'/;
    print "$_;" for @ds;
    print "\n";
}

__DATA__
20120807 175041.438 5976.022 E 27000 [PRE:4712345678: Just some text HERE '127.0.0.1' or APU_ID '' - DEFAULTING TO WORLD_PLAN_9 ZONE]
20120807 175041.438 5976.022 E 27000 [PRE:4722345679: Just some text HERE '127.0.0.2' or APU_ID '26002' - DEFAULTING TO WORLD_PLAN_9 ZONE] 
```

输出：

```
20120807;4712345678;127.0.0.1;;
20120807;4722345679;127.0.0.2;26002; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:05:06.700

```
use strict;

while(my $line = <DATA>) {

    $line =~ m{
            ^
            (\d+)              # first number
            .*?
            (\d{10})           # 10 digits number
            .*? 
            ((?:\d+\.){3}\d+)  # ip
            .*?
            APU_ID\s' 
            (\d*)              # apu number
            '
    }x;

    printf "%s %s %s %s\n", $1, $2, $3, $4;
}

__DATA__
20120807 175041.438  5976.022 E   27000 [PRE:4712345678: Just some text HERE '127.0.0.1'     or APU_ID '' - DEFAULTING TO WORLD_PLAN_9 ZONE]
20120807 175041.438  5976.022 E   27000 [PRE:4722345679: Just some text HERE '127.0.0.2' or  APU_ID '26002' - DEFAULTING TO WORLD_PLAN_9 ZONE] 
```

# java - 在java中只打印一次随机数组变量

> ID：11859946
> 
> 赞同：0
> 
> 时间：2012-08-08T07:45:52.837
> 
> 标签：java, arrays

我有一个 uni 任务，我必须创建一个 Java 程序来生成随机配对的客户及其交易总额。

它分为两部分，第一部分产生客户及其交易，如下所示：

```
Customer ID, Transaction Value
1, 74.36 
1, 44.98 
3, 6.44
0, 19.13
3, 59.44
2, 81.56
0, 87.21
4, 40.9
1, 42.11
3, 66.05 
```

第二个总结了每个客户的交易总数，如下所示：

```
Customer: 1 Transactions: 3.0
Customer: 1 Transactions: 3.0
Customer: 3 Transactions: 3.0
Customer: 0 Transactions: 2.0
Customer: 3 Transactions: 3.0
Customer: 2 Transactions: 1.0
Customer: 0 Transactions: 2.0
Customer: 4 Transactions: 1.0
Customer: 1 Transactions: 3.0
Customer: 3 Transactions: 3.0 
```

我的问题是第二部分应该只生成每个客户 ID 一次，即`1,3,0,2,4`。我只能使用 int 和 double 变量来执行此操作，而无需创建任何其他数组或结构。我的代码可以在下面找到。

```
 import java.util.*;

 public class Assignment3 {
   public static long studentNumber=1234567; 

   public static int customerID[];
   public static double transactionValue[];

   public static void initialiseData(int size) {
     customerID = new int[size];
     transactionValue = new double[size];

     Random rand = new Random(studentNumber);
     for (int i=0; i<size; i++) {
       customerID[i] = rand.nextInt(size / 2);
       transactionValue[i] = rand.nextInt(10000) / 100.0;
     }
   }

   public static void main(String args[]) {
     int size=10;

    initialiseData(size);

    // Your code should only be below this line
    double transaction = 0;
    int customer = 0;
    int customer_Total = 0;
    int count = 0;
    int customer_count = 0;
    double transaction_Total = 0;

    System.out.println("Customer ID, Transaction Value");

    for (size= 0; size < customerID.length; size++) {
    customer= customerID[size];
    transaction= transactionValue[size];
    System.out.println(customer + ", " + transaction);

    }

    System.out.println("");

    for(customer_count = 0; customer_count < customerID.length; customer_count++) {
      transaction_Total= 0;
      customer_Total = customerID[customer_count];
      count = customerID[customer_count];
      //System.out.println(count);

      for (int customer_count2 = 0;
           customer_count2 < customerID.length;
           customer_count2++) {                         
        if (customer_Total == customerID[customer_count2]) {
          transaction_Total++;

          //System.out.println(customer_count2);
        }
      }

      System.out.println("Customer: "+ customer_Total + " " +
                         "Transactions: " + transaction_Total); 
    }

    // Your code should not be below this line

  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:52:08.517

我建议你看看[Collections.shuffle](http://www.docjar.com/html/api/java/util/Collections.java.html)是如何工作的。在您的情况下，您可以创建一个包含所有可能值的数组，然后以随机顺序“洗牌”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:51:14.980

编辑：在这段代码中：

```
for(customer_count = 0; customer_count < customerID.length; customer_count++) {
  transaction_Total= 0;
  customer_Total = customerID[customer_count];
  count = customerID[customer_count];
  //System.out.println(count);

  for (int customer_count2 = 0;
       customer_count2 < customerID.length;
       customer_count2++) {                         
    if (customer_Total == customerID[customer_count2]) {
      transaction_Total++;

      //System.out.println(customer_count2);
    }
  }

  System.out.println("Customer: "+ customer_Total + " " +
                     "Transactions: " + transaction_Total); 
} 
```

在 'transaction_Total= 0;' 之后添加以下内容：

```
int wasBefore = 0; //are you allowed to use boolean variables?
for (int customer_count3 = 0;
       customer_count3 < customer_count;
       customer_count3++) {                         
    if (customer_Total == customerID[customer_count3]) {
      wasBefore = 1;
    }
}
if (wasBefore==1) {continue;} 
```

通过这种方式，您仍然可以获得客户的随机订单，而无需重新分配他们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:28:36.320

so your homework is a little bit irritating, since it is unusual to make such a restriction as don't use arrays.

But you could do the following: Your customer ids go from 0 to size/2 so it is possible to write a loop which counts the transactions for every possible customer. Like this

```
for(int customer_id = 0; customer_id <= size /2 ; customer_id++){
    int transaction_sum = 0;
    for (j= 0; j < customerID.length; j++)
        if(customerID[j] == i)
             transaction_sum++;
    if( transaction_sum > 0)
        System.out.println("Customer: " + customer_id +
                           "  Transactions: " + transaction_sum);
} 
```

but this is not a nice solution, beacuse this is slow for large number of possible ids.

# c - 如何在内核模块中获取数组的地址，以便我能够在用户空间应用程序中使用它？

> ID：11859947
> 
> 赞同：1
> 
> 时间：2012-08-08T07:45:55.223
> 
> 标签：c, linux, memory, linux-kernel, linux-device-driver

我有一个名为的内核模块`mymodule`，其中有：

```
static struct file_operations my_mod_fops = {
        .owner = THIS_MODULE
        .write = my_write,
        .open = my_open,
        .unlocked_ioctl = my_ioctl,
        .read = my_read,

}; 
```

前一个结构中映射的所有函数都经过测试，它们都可以。我想全局声明（如果可用，静态声明）一个字符`kernel_array[128]`，我想编写一个可以执行此操作的用户空间应用程序：

```
int main(){

char* ptr_to_kernel_arr = get_kernel_array_address();

for (int i=0 ; i<128;++i)
    *(ptr_to_kernel_arr+i) = i;

return 0;
} 
```

我的困难是：

1.  如何获取这样的地址，`kernel_array[128]`以便我可以从用户空间应用程序分配值？

2.  内核如何知道其`lsmod`列表中的哪个模块持有`kernel_array`

3.  [`mmap`](http://linux.die.net/man/2/mmap)所有这些场景如何关联？

我阅读了[第 15 章和](http://www.makelinux.net/ldd3/)更多材料，但不知道该怎么做。[我在网上](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html#s8)找到的所有示例都声明了一个文件并与内核和用户空间共享它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T09:06:14.873

您需要实现该`mmap`功能并从`file_operations`.

这将允许用户空间打开您的设备，`mmap`使用文件描述符调用并获取地址。

请注意，mmap 在页面分辨率下工作。所以你不能映射 128 字节，而只能映射 4K 的倍数。您可以映射包含静态缓冲区的 4K 页面，但随后用户进程将能够破坏它不应该接触的内存，这是非常不鼓励的。

# android - 布局中的 EditText 不是全宽

> ID：11859959
> 
> 赞同：0
> 
> 时间：2012-08-08T07:46:54.780
> 
> 标签：android, android-layout, android-widget, android-ui

我有xml的问题。为什么我的 EditText 不显示全屏宽度？它显示了大约 80% 的屏幕宽度，但不是全部..

```
<ScrollView
        android:layout_width="match_parent"
        android:layout_height="fill_parent" 
        android:background="@color/colorGray"
        android:layout_weight=".35" >

        <HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:scrollbars="horizontal|vertical" >

    <LinearLayout
        android:id="@+id/rightCont"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

            <EditText
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:text="test" />

    </LinearLayout>
    </HorizontalScrollView>
    </ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T07:49:08.693

因为它`EditText`被包裹在一个只`ScrollView`需要 0.35 重量的屏幕上。所以它会扩展直到它到达其父级的边界`ViewGroup.`

要对此进行测试，请将 ScrollView 的权重更改为 1：

```
android:layout_weight="1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:53:25.463

除了 Andy Res 所说的，不建议在滚动视图中使用滚动视图。较新的 android 版本可以处理该问题，但较旧的 android 版本将难以确定应在触摸事件上滚动哪个滚动视图。

此外，带有 wrap_content 的 LinearLayout 和带有 fill_parent 的 EditText 也应该导致 EditText 的纯 wrap_content 行为。

你应该重新考虑你的布局。

# php - 使用mysql在php中检索和上传图像

> ID：11859961
> 
> 赞同：1
> 
> 时间：2012-08-08T07:47:07.570
> 
> 标签：php, mysql, image, upload

我在从数据库中检索图像时遇到问题。这是将图像上传到数据库的代码：

```
<form method="post" action="index2.php" enctype="multipart/form-data">
  <input type="file" name="drimg2"/>
  <input  type="submit" name="submit2" value="Save"/>
</form>

<?php

if(isset($_POST['submit2'])) {

  $con=mysql_connect("localhost","root","root");
  mysql_select_db("test",$con);

  $imgname1=$_FILES['drimg2']['name'];
  echo $imgname1;

  $imageextension1 = substr(strrchr($imgname1,'.'), 1);
  if (($imageextension1!= "jpg") && ($imageextension1 != "jpeg") && ($imageextension1 != "gif")&& ($imageextension1 != "png")&& ($imageextension1 != "bmp")) {
    die('Unknown extension. Only jpg, jpeg, and gif files are allowed. Please hit the back button on your browser and try again.');
  }

  if (($imageextension1= "jpg") && ($imageextension1= "jpeg") && ($imageextension1= "gif") && ($imageextension1 = "png") && ($imageextension1 = "bmp")) {   
    $query1=mysql_query("INSERT INTO store set image='$imgname1'");
    $action = move_uploaded_file($_FILES['drimg2']['tmp_name'],"images/".$imgname1); 
    die('not Uploded');
  }
}
?> 
```

现在我想检索数据库中的所有图像；为此，我使用以下代码：

```
<?php
$query1="select * from store";
$fetch=mysql_query($query1);

while ($rows=mysql_fetch_array($fetch)) {
  echo "<img  src='images/".$rows['image']."'  />";   
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:35:38.933

您不应该使用旧的 mysql_* 函数，而是使用 PDO 或 mysqli。这是一种更清洁、更安全的方式来做你想做的事。

```
<?php 
/**
 * A Simple class to handle your database requests
 * related to your image storage ect
 */
class image_model{
    private $db;
    function __construct($db){
        $this->db = $db;
    }

    function add($img_name){
        $sql = "INSERT INTO store (image) VALUES (:value)";
        $stmt = $this->db->prepare($sql);
        $stmt->bindParam(':value', $img_name, PDO::PARAM_STR);
        $stmt->execute();
    }

    function get_all(){
        $sql = "SELECT image FROM store";
        return $this->db->query($sql)->fetchAll();
    }
    //Perhaps use in future
    function get_image($id){
        $sql = "SELECT image FROM store WHERE id=:id";
        $stmt = $this->db->prepare($sql);
        $stmt->bindParam(':id', $id, PDO::PARAM_INT);
        $stmt->execute();
        return $result->fetchAll();
    }
}

//Connect safely to your database...
try{
    $db = new PDO("mysql:host=localhost;dbname=test", 'root', 'password');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE,PDO::FETCH_ASSOC);
}catch (Exception $e){
    die('Cannot connect to mySQL server. Details:'.$e->getMessage());
}

//Create an instance of the image model above
$img_model = new image_model($db);

//Boom...Handle the upload
if($_SERVER['REQUEST_METHOD']=='POST'){
    if ($_FILES["img"]["error"] > 0){
        echo "Error: ".$_FILES["img"]["error"]."<br />";
    }else{
        $img = getimagesize($_FILES["img"]["tmp_name"]);

        $allowed = array('image/jpeg','image/gif','image/png','image/bmp');
        //Width and height must be more then 0 pixles and mime must be in allowed array
        if($img[0] > 0 && $img[1] > 0 && in_array($img['mime'],$allowed)){
            if(is_uploaded_file($_FILES["img"]["tmp_name"])){
                //Clean image name
                $img_name = preg_replace('/[^a-zA-Z0-9.-]/s', '_', basename($_FILES["img"]["name"]));
                //move image to folder
                move_uploaded_file($_FILES["img"]["tmp_name"],"images/".$img_name);
                //Add image to db using a method from the image model
                $img_model->add($img_name);
            }
        }else{
            echo "Error: Unknown extension. Only jpg, bmp and gif files are allowed. Please hit the back button on your browser and try again.<br />";
        }

    }
}

//Your form
?>
<h1>Upload image</h1>
<form method="POST" action="" enctype="multipart/form-data">
<input type="file" name="img"/>
<input  type="submit" name="submit" value="Save"/>
</form>

<?php 
//Access your image model in a simple way and get all images
foreach($img_model->get_all() as $row){
  echo '<img src="images/'.$row['image'].'" /><br />';  
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:54:08.080

参考这个[链接](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/)，

希望这会有所帮助。将图像代码的检索更改为以下，

```
$content = $row['image'];

header('Content-type: image/jpg');
     echo $content; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-01T06:41:52.443

试试这个我已经测试了这段代码并做了一些修改。

```
<form method="post" action="index2.php" enctype="multipart/form-data">
  <input type="file" name="drimg2"/>
  <input  type="submit" name="submit2" value="Save"/>
</form>

<?php
if(isset($_POST['submit2'])) {
  $con=mysql_connect("localhost","root","root");
  mysql_select_db("test",$con);
  $imgname1=$_FILES['drimg2']['name'];
  //echo $imgname1;
  $imageextension1 = substr(strrchr($imgname1,'.'), 1);
    //echo '<pre>';print_r($imageextension1);echo '</pre>';die('Call');
  if (($imageextension1!= "jpg") && ($imageextension1 != "jpeg") && ($imageextension1 != "gif")&& ($imageextension1 != "png")&& ($imageextension1 != "bmp")) {
    die('Unknown extension. Only jpg, jpeg, and gif files are allowed. Please hit the back button on your browser and try again.');
  } else {
  //if (($imageextension1 == "jpg") && ($imageextension1 == "jpeg") && ($imageextension1 == "gif") && ($imageextension1 == "png") && ($imageextension1 = "bmp")) {
      if(move_uploaded_file($_FILES['drimg2']['tmp_name'],"images/".$imgname1)) {
          $query1=mysql_query("INSERT INTO fileurl(filename) VALUES('".$imgname1."')"); //fileurl is table name and filename is field name
          if($query1) {
              echo "Data inserted";
          } else {
              echo "Data not inserted";
          }
      } else {
          echo "Error occured while trying to upload image";
      }
    //$action = ;
    //die('not Uploded');
  }
}
?> 
```

并获取图像试试这个

```
$query = "SELECT * FROM fileurl";
$fetch = mysql_query($query);
while($rows = mysql_fetch_array($fetch)) {
    echo "<img src='images/".$rows['filename']."' />";
} 
```

如果您的图像格式不匹配，它将自动关闭程序，否则它将跳转到 else 条件并上传图像，然后将文件名插入数据库。

# python - SUDS 或 SOAPpy：谷歌应用引擎 python

> ID：11859964
> 
> 赞同：1
> 
> 时间：2012-08-08T07:47:15.337
> 
> 标签：python, django, google-app-engine, soap, suds

我对 GAE python 上的 WSDL (SOAP) Web 服务非常陌生，我阅读了一些服务，如[SOAPpy](http://www.ebi.ac.uk/Tools/webservices/tutorials/06_programming/python/soap/soappy)、[SUDS](https://fedorahosted.org/suds/wiki/Documentation)

实际上，我无法弄清楚哪种服务最适合且最容易使用。

伙计们，您能否与我分享您使用此服务或我可以在我的应用程序中使用的任何其他最佳服务的经验。

**注意：**我使用 Windows7 进行 Python2.5、GAE 1.6.1v 的开发

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:02:33.773

SUDS 非常好，将是我的首选，但 AFAIK 不能在没有修改的情况下在 GAE 上工作。它将 WSDL 缓存存储在文件系统上，而在 GAE 上，您希望将其存储在 memcached 中。修复它应该不会太难，如果你搜索你应该找到一些关于这个问题的博客文章。github上也有好几个版本，可能有些支持GAE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-09T21:37:55.843

这是我在上面评论中链接的[博客文章。](http://omiethenull.blogspot.in/2010/08/suds-and-appengine.html)我很高兴它有帮助，但我很惊讶我`suds_memcache.py`的仍然有用。我已经继续并将其作为一个要点，以便更容易获取/查找，因此您可以轻松地分叉它： [https ://gist.github.com/jjwatt/f263b00a2827d6decbfd42a0734872fb](https://gist.github.com/jjwatt/f263b00a2827d6decbfd42a0734872fb)

# spring - 处理同一类型的多种形式 - 不可能？

> ID：11859967
> 
> 赞同：2
> 
> 时间：2012-08-08T07:47:18.297
> 
> 标签：spring, spring-mvc

考虑以下场景：

1.  我的表单模型

    ```
    public class PersonForm {
        @NotNull
        private String name;

        /*usual getters and setters*/
    } 
    ```

2.  我的控制器：

    ```
    @Controller
    @SessionAttribute(types={ PersonForm.class })
    public class MyController {

        @RequestAttribute(...)
        public String render(final ModelMap map) {
            /* get list of info and for each info 
             * create a PersonForm and put it in the modelmap
             * under key p0, p1, p2, ..., pn
             */
        }

        public String submit(final ModelMap map,
                             @Valid final PersonForm form,
                             final BindingResult result) {

            if (result.hasErrors()) {
                // return to page
            } else {
                // do necessary logic and proceed to next page
            }
        }
    } 
    ```

3.  最后是我的 JSP 视图

    ```
    ...
    <c:forEach ...>
        <form:form commandName="p${counter}">
            ... other form:elements and submit button goes here
        </form:form>
    </c:forEach>
    ... 
    ```

如您所见，我正在尝试处理同一类类型的多种形式。提交工作——它让我很好地使用了 submit(...) 方法，验证也是如此。但是重新渲染页面并没有向我显示预期的错误消息！

更糟糕的是——我检查了提交标头中传递的内容，没有任何迹象表明提交了哪个表单，因此无法区分一个表单和另一个表单。这让我相信同一类类型的多种形式是不可能的......

有没有其他方法可以做到这一点（除了 Ajax）？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T08:31:17.237

I managed to get this 'hack' to work. It is as what *jelies* has recommended so the credit goes all to him.

In simple terms, the concept is to pre-fill your view using the traditional `<c:forEach>` construct. The tricky part is whenever the 'Submit' button of that respective row is pressed, all of the information must be injected into a hidden form and force-submitted to the Controller. If the screen is rendered again with some errors, the script must be responsible of injecting the values back to the respective rows *including* the errors.

* * *

1) My model

```
 public class PersonForm {

        private String id;

        @NotNull
        private String name;

        /*usual getters and setters*/
    } 
```

2) My controller

```
 @Controller
    @SessionAttribute(/* the hidden form name, the person list */)
    public class MyController {

        @RequestAttribute(...)
        public String render(final ModelMap map) {
            /* get list of info and for each info 
             * create a PersonForm and put it in the modelmap
             * under key p0, p1, p2, ..., pn
             */
        }

        public String submit(final ModelMap map,
                             @Valid final PersonForm form,
                             final BindingResult result) {

            if (result.hasErrors()) {
                // return to page
            } else {
                // do necessary logic and proceed to next page
            }
        }
    } 
```

3) My view

```
 ...

    <form:form commandName="personForm" cssStyle="display: none;">
        <form:hidden path="id"/>
        <form:hidden path="name" />
        <form:errors path="name" cssStyle="display: none;" />
    </form:form>

    ...

    <c:forEach var="p" items="${pList}">
        <input type="text" id="${ p.id }Name" value="${ p.name }" />
        <!-- to be filled in IF the hidden form returns an error for 'name' -->
        <span id="${ p.id }nameErrorSpan"></span>
        <button type="button" value="Submit" onclick="injectValuesAndForceSubmit('${ p.id }');" />
    </c:forEach>

    ...

    <script type="text/javascript">

    injectValuesAndForceSubmit = function(id) {

        $('#id').val( id ); // fill in the hidden form's id
        $('#name').val( $('#'+id+'name').val() ); //fill in the hidden form's name

        $('#personForm').submit(); //submit!
    }

    $(document).ready(function() {

        var id = $('#id').val();    
        if (id.trim().length == 0) {
            //Empty. Nothing to do here as this is a simple render.
        } else {

            //The page seems to be returning from some sort of error ... pre-fill the respective row!
            $('#'+id+'name').val($('#name').val());
            var hiddenNameErrorSpan = $('#name.errors');
            if (hiddenNameErrorSpan) {
                $('#'+id+'nameErrorSpan').text(hiddenNameErrorSpan.html());
            }
        } //else
    }
    </script> 
```

* * *

As you can see the view has the hairiest parts -- hopefully it will still proves to be useful for anyone who (unfortunately) comes across the same situation as mine. Cheers!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:24:50.273

IMHO having multiple forms makes things overcomplicated (or at least with spring). Also, you are using multiple forms but only one is going to be submitted.

So, I suggest that the easiest way to manage this is using a unique hidden external form with person properties. When one of the buttons is pressed, fill accordingly the person properties of form and submit it. With this you are achieving the tipical spring form submit/validation.

Maybe this solution requires a bit work with JavaScript, but I don't know how to handle spring-mvc with multiple forms, I always tried to avoid it, due to previous unsuccessful attemps.

# javascript - Javascript - 可以更新警报框吗？

> ID：11859969
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:47:31.330
> 
> 标签：javascript, datetime, alert, setinterval, bookmarklet

我再次尝试使用 JavaScript，并想在警报框（书签）中制作一个时钟。

以下代码：

```
javascript:alert(new%20Date().toLocaleString()) 
```

将以 2012 年 8 月 8 日星期三 12:40:54 AM 的格式显示时间。但是，时钟的时间不会更新，因为小书签只是在获取时间。那么，警报框是否可以更新（像这样:)

```
javascript:alert(setInterval("new%20Date().toLocaleString()",1000)) 
```

还是无法更新警报框（它获取某些内容然后停止执行脚本）？

编辑* 我已经尝试过第二个代码行并且知道它不起作用，我只是想将其作为寻找允许更新时间的方法的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T07:51:03.383

这是正确的。无法更新警报框。它们还拥有另一个非常重要的特性，这在 javascript 中很难实现（不是你想要的）。它们完全暂停任何代码的执行（因为 javascript 是单线程的），直到它们被解除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:51:33.150

否 - 警告框打印一个字符串，并且在显示时不能更改其内容。

请改用 DHTML 对话框模拟，例如[Facebook 的](http://developers.facebook.com/docs/reference/dialogs/). 由于这些只是完成本机模式功能（例如）工作的 HTML，`alert()`因此它们更加灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T08:13:45.677

这是来自 github 的 javascript 时钟的[工作示例](https://github.com/wbajzek/clock)。

他获取了他在自述文件中使用的教程。

# c++ - 为什么这个随机变量没有均匀分布？

> ID：11859973
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:48:17.113
> 
> 标签：c++, cryptography, probability, discrete-mathematics

所以，假设我们有一个在 {0,1}^1 上的随机变量 X。这意味着 X 可以取值 0，也可以取值 1。我的问题是，为什么这个概率不是均匀分布中的 1/2？换句话说，为什么我们不能说 X 的概率分布，知道它只能取两个值，而它确实取的值（在这种情况下为 0 或 1）是随机的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:54:04.063

您正在描述[伯努利分布](http://en.wikipedia.org/wiki/Bernoulli_distribution)，它也是n=1 的[二项分布](http://en.wikipedia.org/wiki/Binomial_distribution)。

对于这种分布，您的参数通常是`p`- 得到 1
的概率。得到 1 和 0 的概率会有所不同，并且可能不一样。

如果你有`p=1/2`- 这是一个特定的（非常有用的案例），其中“实验”是无偏见的，并且通常用于[统计测试](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)- 用于测试某个数据集是否有偏见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:55:16.767

您是在问为什么理论上在只有两个值的集合上定义的随机变量不一定具有均匀分布，或者您是在问为什么您使用的 C++ 伪随机引擎没有均匀分布？

您似乎在问一个理论问题，在这种情况下，答案很简单，因为这是定义分布的方式（由您或其他人）。也许我想定义一个分布，使得 1 出现 2/3 的时间。集合的大小不会以任何方式影响分布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T11:28:18.727

让我们从一个例子开始（实际上是两个）。

令 X \in {0, 1} 为描述抛硬币的随机变量；X=0 表示正面，X=1 表示反面，我们假设硬币是公平的并且它不能落在边缘。在这种情况下，P(X=0)=P(X=1)=0.5。

现在让 Y \in {0, 1} 是一个不同的随机变量，描述当你打开灯时灯泡是否烧坏；Y=0 表示灯亮，Y=1 表示灯泡烧坏。假设为了论证，灯泡烧坏的概率是 0.0001，那么 P(Y=0)=0.9999 和 P(Y=1)=0.0001。

我们从中看到的是，要完全定义一个随机变量，我们不仅需要指定它可以取的值集，还需要指定潜在的概率分布。当然，您选择的特定分布取决于您尝试建模的过程。

# jquery - jQuery - 向下滑动而不是向上滑动

> ID：11859976
> 
> 赞同：1
> 
> 时间：2012-08-08T07:48:19.257
> 
> 标签：jquery, html, css, scrollbar, slide

如何制作与[jsFiddle](http://jsfiddle.net/AwcUX/1/)相同，但不同的是绿色框应该向下滑动消失（并在您再次单击[示例](http://jsfiddle.net/AwcUX/1/)`click here`中的链接时向上滑动出现）。

两根弦

```
/*position:absolute;*/
/*bottom:0px;*/ 
```

[如果取消注释，则在jsFiddle](http://jsfiddle.net/AwcUX/1/)的 css 部分中注释的内容无法正常工作，因为它确实开始向下滑动，但是浏览器滚动条消失了 - 不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:01:34.487

## 编辑：

添加一个`<div>`带有`id` **sliderWrapper**的 a并给它`100%` **宽度**，如下所示。

```
<div width="100%" id="sliderWrapper">        
    <div id="slider" style="border:1px solid red;">
        <h1>1</h1><h1>2</h1><h1>3</h1><h1>4</h1><h1>F</h1>

        <h1>1</h1><h1>2</h1><h1>3</h1><h1>4</h1><h1>E</h1>

        <h1>1</h1><h1>2</h1><h1>3</h1><h1>4</h1><h1>D</h1>

        <h1>1</h1><h1>2</h1><h1>3</h1><h1>4</h1><h1>C</h1>

        <h1>1</h1><h1>2</h1><h1>3</h1><h1>4</h1><h1>B</h1>

        <h1>A</h1><h1>A</h1><h1>A</h1><h1>A</h1><h1>A</h1>

         <h1>6</h1><h1>7</h1><h1>8</h1><h1>9</h1><h1>10</h1>
    </div>
</div> 
```

**继续遵循 css 规则`#slider`**

```
 #slider {
      background : green;             
      width:100px;
      margin:20px auto 0 auto;
   } 
```

**将以下行替换为`$('#slider').slideToggle(500)`**

```
 if(hid) { $('#sliderWrapper').show("slide", { direction:"down" }, 500);} 
 else { $('#sliderWrapper').hide("slide", { direction:"down" }, 500); } 
```

[**看演示**](http://jsfiddle.net/DV3qx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:00:35.590

编辑了你的 jsFiddle！使用 jquery.slideToggle(); 和一些 Css 来获得正确的滑动方向！

**[jsFiddle](http://jsfiddle.net/AwcUX/23/)**

# symfony - symfony2 - 如何覆盖控制器 __construct

> ID：11859977
> 
> 赞同：-1
> 
> 时间：2012-08-08T07:48:20.410
> 
> 标签：symfony, controller, php

我在使用 Symfony2 时遇到了一些问题。即在如何使用该`__construct()`功能。官方文档非常糟糕！

我希望能够使用以下内容：

```
public function __construct()
{
    parent::__construct();
    $user = $this->get('security.context')->getToken()->getUser();
} 
```

我怎么会收到以下错误：

```
Fatal error: Cannot call constructor in /Sites/src/DEMO/DemoBundle/Controller/Frontend/HomeController.php on line 11 
```

第 11 行是`parent::__construct();`. 我将其删除并得到以下新错误

```
Fatal error: Call to a member function get() on a non-object in /Sites/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php on line 242 
```

我想我可能需要设置`ContainerInterface`DIC，但我不知道该怎么做（我试过但失败了，很惨）

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T14:55:54.510

对于新的 S2 开发人员来说，这实际上是一个很常见的误解。正如@KingCrunch 所说，S2 控制器没有构造，因此您的方法将失败。查看源代码：命名空间 Symfony\Bundle\FrameworkBundle\Controller\Controller，您会看到 Controller 扩展了组件 ContainerAware，它有一个名为 setContainer 的方法。如果你真的想要，你可以覆盖这个方法并做你想做的事。

然而，有一个专门为这类事情设计的事件系统，即在动作方法开始之前执行某些方法。可能想搜索一下有关此主题的其他问题。

S2.1 控制器现在有一个 getUser() 方法。我建议将它添加到您的基本控制器类中，而不用担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T07:57:09.570

不知道，你扩展了哪个类，但是 symfony 控制器没有构造函数。因此，正如消息所暗示的那样

```
Fatal error: Cannot call constructor in
/Sites/src/DEMO/DemoBundle/Controller/Frontend/HomeController.php on line 11

Line 11 is "parent::__construct();" 
```

它不能调用构造函数，因为*它不存在*。

```
public function __construct()
{
    $user = $this->get('security.context')->getToken()->getUser();
} 
```

值得注意的是，您甚至不需要扩展任何类或实现任何接口。一个 symfony2-controller 可以是一个完全独立的独立类。

> 官方文档非常糟糕！

文档建议在哪里调用父构造函数；）

# php - 正则表达式改进

> ID：11859983
> 
> 赞同：-2
> 
> 时间：2012-08-08T07:48:36.453
> 
> 标签：php, regex

我有以下正则表达式：

`/%%[\s\S]*?%%/i`

它旨在捕获这些类型的字符串：

`%%test%%`

`%%test2%%`

但是，因为这个正则表达式在大字符串上运行，有时会出现错误，例如，如果我有这个：

`%test%% adhja kshdjah skdja %%test1%%`它会回来`%% adhja kshdjah skdja %%`

它应该捕获的字符串中永远不会有任何空格，我怎样才能更改我的正则表达式以仅使用没有空格的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:52:28.530

用于`[^%\s]`非`space`和非`%`。

```
/%%[^%\s]*?%%/ 
```

# ios - 我无法在 iOS UIWebview 中打开 URL

> ID：11859984
> 
> 赞同：0
> 
> 时间：2012-08-08T07:48:40.103
> 
> 标签：ios, uiwebview

我无法在 UIWebview 中打开以下 URL

[http://ad.doubleclick.net/click%3Bh%3Dv8/3ccb/3/0/%2a/v%3B260459540%3B0-0%//3B1%3B42477956%3B2825-320/56%3B38531391/38549148/1 %3B%3B%7Esscs%3D%3fhttp://www.google.com/](http://ad.doubleclick.net/click%3Bh%3Dv8/3ccb/3/0/%2a/v%3B260459540%3B0-0%//3B1%3B42477956%3B2825-320/56%3B38531391/38549148/1%3B%3B%7Esscs%3D%3fhttp://www.google.com/)

[http://itunes.apple.com/sg/app/little-red-helicopter/id389086132?mt=8](http://itunes.apple.com/sg/app/little-red-helicopter/id389086132?mt=8)

请帮我解决这些问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:52:29.570

iOS 有一个用于 iTunes 链接的自定义 url 方案，您无法在 web 视图中打开它，因为操作系统会将其定向到 iTunes/App Store。

[http://wiki.akosma.com/IPhone_URL_Schemes#App_Store](http://wiki.akosma.com/IPhone_URL_Schemes#App_Store)

# c# - .Net 中的 DLL 管理

> ID：11859987
> 
> 赞同：0
> 
> 时间：2012-08-08T07:48:48.490
> 
> 标签：c#, applicationdomain

我开发的客户端应用程序调用具有多个版本的产品，我的客户可以一个接一个地加载不同版本的产品。

为了在以前的版本中支持这一点，我为每次用户选择版本创建了应用程序域。

这是正确的方法吗？我有其他选择吗？

**已编辑：** 多个版本 - 多个 dll

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:52:58.920

如果不同版本的产品驻留在不同的 DLL 中，那么是的，AppDomain 是正确的方法。

尽管请确保您不会将 DLL 泄漏到您的主域。

此外，运行一些测试以确保您不会泄漏内存。

**更新**

另一种方法是在另一个进程中加载​​ DLL 并使用 RPC 或服务调用。我想这对您的应用程序来说有点过头了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:59:11.743

我不认为产品必须驻留在不同的 AppDomain 中。这样做的主要原因是什么？您是否希望您的应用程序能够卸载特定的 dll，并在运行时加载相同 dll 的新版本？如果不是...我不明白拥有应用程序域的原因是什么。

当您想保证在卸载程序集时可以释放程序集本身分配的内存时，通常会使用 AppDomain。它在某些类型的应用程序中很有意义。IIS 使用 AppDomains 来管理它正在运行的所有应用程序（以便将应用程序分开）。

为什么不对产品的所有版本使用通用接口，并在内部存储有关产品本身的信息（属性或任何您喜欢的方式）？