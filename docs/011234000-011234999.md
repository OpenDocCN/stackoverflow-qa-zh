# StackOverflow 问答 11234000-11234999

# javascript - 存储在变量中的函数？Javascript

> ID：11234000
> 
> 赞同：4
> 
> 时间：2012-06-27T19:59:39.753
> 
> 标签：javascript

有人可以解释一下这个符号在javascript中是什么吗？函数（d）在做什么？在这个程序中，似乎 x 被以下调用，但我不知道这意味着什么。提前致谢...

```
x = function(d) { return d.x * width / mx; };

// later....
 x({x: .9}); // call 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T20:03:31.583

.9 是传递给函数的 object(d) 的属性 x 的值。

在函数 d = {x:9}(object) 中，现在当您请求 d 的 property(x) 值（使用 DOT 表示法）时，它会返回属性 x 的值。

所以 dx 返回 0.9！

所以你会问我如何首先将属性的值传递给函数-X，这就是我们在 dis this -> x(objectBeingSent); 时所做的。其中 objectBeingSent 是 {x: .9}。

匿名函数是在运行时动态声明的函数。它们被称为匿名函数，因为它们的名称与普通函数不同。

匿名函数使用函数运算符声明。您可以使用函数运算符在任何可以放置表达式的地方创建新函数。例如，您可以将新函数声明为函数调用的参数或分配另一个对象的属性。

函数运算符返回对刚刚创建的函数的引用。然后可以将函数分配给变量，作为参数传递或从另一个函数返回。这是可能的，因为函数是 javascript 中的第一类对象。

这是一个使用函数语句以常规方式声明函数的示例：

```
 function eatCake(){
     alert("So delicious and moist");
 }
 eatCake(); 
```

这是一个使用函数运算符动态声明相同函数的示例：

```
 var eatCakeAnon = function(){
     alert("So delicious and moist");
 };
 eatCakeAnon(); 
```

看到第二个函数的右括号后的分号了吗？**};** 您在语句后使用分号。这是一个声明：

```
var eatCakeAnon = function(){
         alert("So delicious and moist");
     }; 
```

[来源](http://helephant.com/2008/08/23/javascript-anonymous-functions/)

PS我能找到的最好的解释！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:03:20.190

它被称为匿名函数。*该函数将 {x: number* }形式的对象作为参数，并对*number*进行一些数学运算。

# sed - 使用 sed 替换多行

> ID：11234001
> 
> 赞同：11
> 
> 时间：2012-06-27T19:59:52.700
> 
> 标签：sed

我以为我理解 sed 但我想不是。我有以下两个文件，我想用不同的行替换“为什么”和“呵呵”行。根本没有空格。

> 测试.txt：

```
hi
why
huh
hi
why
huh 
```

> 测试2.txt：

```
1
hi
why
huh
hi
why
huh 
```

以下两个命令给出以下结果：

```
sed "N; s/<why\/>\n<huh\/>/yo/g" test.txt > out.txt

out.txt:
hi
why
huh
hi
yo

sed "N; s/<why\/>\n<huh\/>/yo/g" test2.txt > out2.txt

out2.txt:
1
hi
yo
hi
why
huh 
```

我对 sed 有什么不了解的地方？为什么两个输出文件都不包含以下内容：

```
hi
yo
hi
yo 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T20:25:35.330

你的表达几乎是正确的，但它有两个问题：

*   如果你想匹配`why`一个单词，你应该把它放在`\<`它`\>`周围。你确实把它放在了`<`周围`\/>`。所以，第一个修正是：

    ```
    $ sed 'N; s/\<why\>\n\<huh\>/yo/g' test.txt 
    ```

*   但它也不起作用：

    ```
    $ sed 'N; s/\<why\>\n\<huh\>/yo/g' test.txt
    hi
    why
    huh
    hi
    yo 
    ```

    为什么它只替换第二对线？好吧，在第一行，`N`命令将连接`why`到`hi`，在[模式空间](https://stackoverflow.com/questions/5886564/what-actually-the-meaning-of-n-in-sed/5886784#5886784)中留下字符串`hi\nwhy`。该字符串与命令不匹配`s///`，因此仅打印该行。下一次，您`huh`在模式空间中有字符串并连接`hi`到它。就在下一行中，您将`why\nhuh`在要替换的模式空间中。

    解决方案是仅在当前行为 时才`why`使用[地址](http://www.gnu.org/software/sed/manual/html_node/Addresses.html) `/^why$/`连接下一行：

    ```
    $ sed '/^why$/ {N; s/\<why\>\n\<huh\>/yo/g}' test.txt
    hi
    yo
    hi
    yo 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-11-20T19:41:04.000

[Brandizzi](https://stackoverflow.com/users/287976/brandizzi)的回答很好地解释了它没有替换两对线的原因。

但是，如果我们更进一步。假设我们有以下文件，我们想用“pure\nmilk”替换“apple\njuice”。

> 测试.txt

```
water water water water 
water water water apple
juice water water apple
juice water water water 
```

模式过滤方式不起作用。

```
sed '/apple/ {N; s/apple\njuice/pure\nmilk/g}' test.txt 

water water water water
water water water pure
milk water water apple
juice water water water 
```

因为 test.txt 中的第二个苹果，已经被 N 连接到前一行，没有被模式过滤器捕获。

我能想到的一种解决方案是使用分支连接所有行，然后进行替换。

```
sed ':a;N;$!ba;s/apple\njuice/pure\nmilk/g' test.txt 

water water water water
water water water pure
milk water water pure
milk water water water 
```

它看起来很愚蠢，但我还没有想到更好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:21:34.307

这应该适用于`test.txt`文件：

```
sed '/hi/! { N ; s/why\nhuh/yo/ }' test.txt 
```

它的意思是：

如果在一行中找不到`hi`（它将是`why`），请阅读下一行并将其全部替换为`yo`。否则直接打印（当`hi`）。

输出：

```
hi
yo
hi
yo 
```

# google-fusion-tables - 试图获得 2 个地图 API：FusionTablesLayer 函数在同一张地图和融合表上工作

> ID：11234005
> 
> 赞同：0
> 
> 时间：2012-06-27T20:00:12.380
> 
> 标签：google-fusion-tables

我创建了一个融合表和图层，允许我使用复选框来隐藏或显示地图上的某些标记。我想添加一个类似于平移和缩放功能的搜索功能。此外，一旦地图缩放到该位置，我希望有一个半径选项来识别特定区域内的其他位置。我已经修改了在 IN 查询 (https://developers.google.com/fusiontables/docs/samples/in) 上找到的示例代码，并且可以让复选框工作，但是当我尝试包含平移和缩放代码时（ https://developers.google.com/fusiontables/docs/samples/search_and_zoom），我似乎无法使用搜索功能。

我有一张包含大约 4000 条记录的融合表。我是编码新手，所以我确信它在我的语法中。我也会假设我想做的事情是可能的？

任何帮助，将不胜感激。

这是代码。如前所述，我想插入一个利用平移和缩放功能的搜索。我最终从下面的代码中删除了它，因为我不确定如何插入或格式化它。

```
 <head>
  <style>
    #map-canvas { width:800px; height:600px; }
  </style>
  <script type="text/javascript"
    src="http://maps.google.com/maps/api/js?sensor=false">
  </script>
  <script type="text/javascript">
    var map;
    var layerl0;
function initialize() {
        var tableId = '4422804';

        var map = new google.maps.Map(document.getElementById('map-canvas'), {
          center: new google.maps.LatLng(50.792047064406866, -99.052734375),
          zoom: 2,
          mapTypeId: google.maps.MapTypeId.HYBRID
        });

        var layer = new google.maps.FusionTablesLayer();
        filterMap(layer, tableId, map);

        google.maps.event.addDomListener(document.getElementById('< 5'),
            'click', function() {
              filterMap(layer, tableId, map);
        });

        google.maps.event.addDomListener(document.getElementById('> 5'),
            'click', function() {
              filterMap(layer, tableId, map);
        });

        google.maps.event.addDomListener(document.getElementById('Not Signed'),
            'click', function() {
              filterMap(layer, tableId, map);
        });

    google.maps.event.addDomListener(document.getElementById('Signed Not Selling'),
            'click', function() {
              filterMap(layer, tableId, map);

    });
      }

      // Filter the map based on checkbox selection.
      function filterMap(layer, tableId, map) {
        var where = generateWhere();

        if (where) {
          if (!layer.getMap()) {
            layer.setMap(map);
          }
          layer.setOptions({
            query: {
              select: 'Full Address',
              from: tableId,
              where: where
            }
          });
        } else {
          layer.setMap(null);
        }
      }

      // Generate a where clause from the checkboxes. If no boxes
      // are checked, return an empty string.
      function generateWhere() {
        var filter = [];
        var stores = document.getElementsByName('store');
        for (var i = 0, store; store = stores[i]; i++) {
          if (store.checked) {
            var storeName = store.value.replace(/'/g, '\\\'');
            filter.push("'" + storeName + "'");
          }
        }
        var where = '';
        if (filter.length) {
          where = "'Map' IN (" + filter.join(',') + ')';
        }
        return where;
      }
          google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:52:52.930

您没有包括您的复选框等。但这是一个使用按钮而不是复选框的示例。不应该太难适应你的需要。没有放大到，这确实是一个不同的问题。

[http://jsfiddle.net/ebridger/wmnDU/](http://jsfiddle.net/ebridger/wmnDU/)

# html - 关闭 HTML 输入会破坏任何东西，反之亦然？

> ID：11234007
> 
> 赞同：2
> 
> 时间：2012-06-27T20:00:21.210
> 
> 标签：html, xhtml, input

我一直并将继续关闭 HTML 输入，例如

```
<input type=text /> 
```

而不是非 XHTML 方式

```
<input type=text> 
```

但我的问题是，无论哪种方式都会有任何可预见的问题，即跨浏览器、移动设备等？我刚刚注意到我使用的框架生成没有结束标记的输入，我讨厌我的代码和他们的代码之间存在差异。这真的很烦人和丑陋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:06:19.970

`input`标签已经关闭了很长时间，几乎任何系统都应该能够在没有关闭的情况下处理它。如果您已将文档声明为 XHTML，则它不会验证标记是否未关闭，并且某些 XML 实用程序可能无法解析它，但 Web 浏览器被设计为在它们接受的内容方面非常自由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:25:05.540

就个人而言，我从未见过由于关闭 HTML 文档中的空标签而导致的跨浏览器问题。

但是，根据[Refactoring HTML](http://www.amazon.ca/Refactoring-HTML-Improving-Existing-Applications/dp/0321503635)，旧版浏览器（例如 Netscape 3）将无法正确解析空元素。

这是因为在 SGML 和一些 HTML4 解析器中，支持类似于空标记语法的语法“ [NET](http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#NET) ”：（引自[XHTML 被认为是有害](http://hixie.ch/advocacy/xhtml)的）

> "/>" 空标签语法在 HTML4 中实际上具有完全不同的含义。（如果我没记错名字的话，它就是被称为 NET 的 SHORTTAG 最小化特性。）具体来说，XHT​​ML
> 
> ```
> <p> Hello <br /> World </p> 
> ```
> 
> ...如果解释为 HTML4，则完全等同于：
> 
> ```
> <p> Hello <br>&gt; World </p> 
> ```
> 
> ...并且应该真正呈现为：
> 
> ```
> Hello
> > World 
> ```

因此，如果您使用的是 HTML4`<!DOCTYPE>`并针对 Netscape 3，请不要这样做！但是如果您使用的是 HTML5（或 XHTML），关闭空标签并没有什么坏处——事实上，在 XHTML 中您必须这样做，否则 Tim Bray 会害死一只小狗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:04:36.150

有一个未关闭的输入标签仍然是有效的html，所以如果你不需要满足xhtml标准，你应该没问题。

# php - 在 Apache 服务器上将特定的 .htm 页面处理为 .php

> ID：11234010
> 
> 赞同：3
> 
> 时间：2012-06-27T20:00:25.043
> 
> 标签：php, html, apache, .htaccess

我正在为 Apache 服务器编程，我只需要一个特定的 html 页面（比如 first.htm）作为 PHP 脚本处理。是否可以设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:10:34.077

[`SetHandler`](http://httpd.apache.org/docs/2.0/mod/core.html#sethandler)也可以使用指令：

> 强制处理程序处理所有匹配的文件
> 
> 当放入 .htaccess 文件或 a or 部分时，该指令强制所有匹配的文件通过 handler-name 给出的处理程序进行解析。

```
<Files first.htm>
    SetHandler application/x-httpd-php
</Files> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:03:21.090

创建一个名为的文件`.htaccess`并将其放置在该文件所在的目录中。将此行添加到 ti：

```
<Files first.htm>
    AddType application/x-httpd-php .htm
</Files> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T20:07:24.920

```
<Files first.htm>
    ForceType application/x-httpd-php
</Files> 
```

# model-view-controller - “渲染视图”和使用响应的方法“sendResponse()”发送响应有什么区别？

> ID：11234012
> 
> 赞同：0
> 
> 时间：2012-06-27T20:00:29.823
> 
> 标签：model-view-controller, zend-framework, symfony1, rendering, httpresponse

我问过一个[关于](https://stackoverflow.com/questions/11233442/what-does-it-mean-to-render-a-view-what-the-procedure-is-this)什么是“渲染视图”的问题。得到了一些答案：

> 渲染视图意味着向用户或浏览器显示视图，例如 html 部分。

和

> 因此，通过渲染视图，MVC 框架已经处理了控制器中的数据并在模型中完成了后端工作，然后将这些数据发送到视图以输出给用户。

和

> 渲染只是意味着发射。打印。回响。写入某个源（可能是标准输出）。

但不明白然后`rendering a view`使用`Response`类将输出发送给用户使用其`sendResponse()`方法之间的区别。如果`render a view`意味着将输出回显给用户，那么为什么`sendResponse()`存在，反之亦然？`sendResponse()`完全发送标题，然后在标题输出正文。他们解决相同的任务但不同？有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:13:10.943

在 ZF 中，渲染视图实际上并不输出任何内容。相反，呈现过程将内容作为字符串返回给调用者。 `Zend_Application`自动处理渲染视图并通过占位符将其插入布局（假设您使用布局），并将该数据放入`Zend_Controller_Response_Http`最终负责将内容交付给用户的对象中。使用 Response 对象的原因是它可以封装您的 HTML 输出，还可以管理您要发送的任何其他 HTTP 标头或重定向。

如果您愿意，您还可以在将数据发送到客户端之前进一步操作 Response 对象中的响应内容。

`sendResponse()`负责发送任何标头（包括 HTTP 响应代码），检查可能发生的任何异常（由于无法发送标头或其他原因），然后发送可能包含您的布局和一个或多个呈现的 HTML查看脚本。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:09:24.437

它们是两个非常不同的东西。

渲染视图提供了另一个层，您可以在其中模板化您的数据。这将允许您轻松地动态填充 HTML/模板，保持逻辑与表示分离。

回显数据直接跳过此步骤，并且通常保留用于将 json/xml（数据）响应重新发送给用户，而不是 html 响应。

您没有发布您正在谈论的框架，但两者都应该允许您指定响应标头。

请不要过于简单化。每个服务器的目的都是渲染资源，但这并不意味着它们都是一样的。

# c# - 执行每个管道命令后在 C# 中捕获 PowerShell 输出

> ID：11234015
> 
> 赞同：5
> 
> 时间：2012-06-27T20:00:53.927
> 
> 标签：c#, wpf, powershell

我正在实现一个 WPF 应用程序，它为字典中给出的每个键/值对执行一个 PowerShell 脚本，使用该对作为脚本参数。我将脚本的每次运行都存储为管道中的新命令。但是，这导致我只能在每次运行脚本后需要输出时从运行的最后一个命令中获取输出。我考虑过在每次执行脚本时创建一个新管道，但我需要知道脚本的所有执行何时完成。这是帮助解释我的问题的相关代码：

```
private void executePowerShellScript(String scriptText, Dictionary<String, String> args)
{
     // Create the PowerShell object.
     PowerShell powerShell = PowerShell.Create();

     // If arguments were given, add the script and its arguments.
     if (args != null)
     {
          foreach (KeyValuePair<String, String> arg in args)
          {
               powerShell.AddScript(scriptText);
               powerShell.AddArgument(arg.Key);
               powerShell.AddArgument(arg.Value);
          }
     }

     // Otherwise, just add the script.
     else
          powerShell.AddScript(scriptText);

     // Add the event handlers.
     PSDataCollection<PSObject> output = new PSDataCollection<PSObject>();
     output.DataAdded += new EventHandler<DataAddedEventArgs>(Output_DataAdded);
     powerShell.InvocationStateChanged +=
          new EventHandler<PSInvocationStateChangedEventArgs>(Powershell_InvocationStateChanged);

     // Invoke the pipeline asynchronously.
     IAsyncResult asyncResult = powerShell.BeginInvoke<PSObject, PSObject>(null, output);
}

private void Output_DataAdded(object sender, DataAddedEventArgs e)
{
     PSDataCollection<PSObject> myp = (PSDataCollection<PSObject>)sender;

     Collection<PSObject> results = myp.ReadAll();
     foreach (PSObject result in results)
     {
          Console.WriteLine(result.ToString());
     }
} 
```

然后我使用以下方法知道脚本的所有执行何时完成。由于我通过检查管道的调用状态是否已完成来执行此操作，因此我无法为脚本的每次执行创建新的管道：

```
private void Powershell_InvocationStateChanged(object sender, PSInvocationStateChangedEventArgs e)
{
     switch (e.InvocationStateInfo.State)
     {
          case PSInvocationState.Completed:
               ActiveCommand.OnCommandSucceeded(new EventArgs());
               break;
          case PSInvocationState.Failed:
               OnErrorOccurred(new ErrorEventArgs((sender as PowerShell).Streams.Error.ReadAll()));
               break;
     }
     Console.WriteLine("PowerShell object state changed: state: {0}\n", e.InvocationStateInfo.State);
} 
```

所以，要回答我的问题：

1）我可以强制管道在它执行的每个命令之后产生输出吗？或者，
2）如果我每次运行命令时都创建一个新管道，是否有另一种方法可以检查脚本的所有执行是否已完成？

在 C# 中使用实际类的例子很少`PowerShell`，我对线程几乎一无所知，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T12:28:18.470

回答自己的问题我觉得很傻，但我所做的只是将循环功能从我的 C# 代码移到我的脚本中，这很有效。所以现在我一次将所有键和值作为数组参数传递，并且管道中只有一个命令。

不过，我仍然想知道是否可以在管道中的每个命令执行后产生输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T23:18:45.790

我有一种情况，我有一个管理 PowerShell 环境的对象，它需要一个脚本或一个模块和 cmdlet 并执行它，然后从原始模块中获取一个新的脚本或模块和 cmdlet 或 cmdlet 并执行它。每次执行某些操作时，我都需要返回结果。我通过在每次执行后清除命令队列来解决它：

```
powerShellInstance.Commands.Clear(); 
```

希望这可以帮助。

# java - 通过 Java 登录网站

> ID：11234021
> 
> 赞同：-1
> 
> 时间：2012-06-27T20:01:43.610
> 
> 标签：java, forms, authentication, login, web

我一直在到处寻找，但找不到这方面的教程。我想用一种简单的方法通过 java 登录到网站的登录表单。我没有代码，所以我希望你们中的一个人有一些示例代码；或者，如果您可以将我重定向到某个网站——那也很好。

问题：如何制作一个 Java 程序来访问网站的登录表单并简单地登录？

我需要这个的原因：我有登录 MySQL 数据库的代码，但我想尝试登录网站登录表单。警告：这根本不适合学校项目。只是个人的东西

我做了多少研究：我已经找了几个星期了，在这方面找不到太多。请帮我; 我急需这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T02:27:08.343

登录表单通过 html 表单收集一些用户输入，可能是用户名和密码，然后使用 http post 将其发送到 Web 服务器。使用java程序下载网页内容非常容易；发送表单数据需要更多的工作。但是 apache HttpClient 可以轻松地将表单参数发送到网站 - 就像登录表单一样。我认为您可以将其用于您的目的： [http ://hc.apache.org/httpcomponents-client-ga/](http://hc.apache.org/httpcomponents-client-ga/)

以下是使用上述库登录网站的示例：http: [//hc.apache.org/httpcomponents-client-ga/http.client/examples/org/apache/http/examples/client/ClientAuthentication.java](http://hc.apache.org/httpcomponents-client-ga/http.client/examples/org/apache/http/examples/client/ClientAuthentication.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:22:35.363

从您对 Alexwho96 的回答的评论中，我猜您想将登录过程自动化到现有的登录页面。

AFAIK HtmlUnit 应该能够做到这一点（通常用于单元测试）。

[http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/)

编辑：

您也可以尝试： [http ://docs.oracle.com/javase/7/docs/api/java/net/Authenticator.html](http://docs.oracle.com/javase/7/docs/api/java/net/Authenticator.html)

不过，我不确定这是否适用于登录表单。

# javascript - 多个 jquery 命令不起作用

> ID：11234029
> 
> 赞同：0
> 
> 时间：2012-06-27T20:02:20.007
> 
> 标签：javascript, jquery

只有使用 id "exp_month" 的第一个命令有效，其他 2 个无效。id 当前在 html 中设置。

```
 if (month!="")
            $('select#exp_month>option:eq('+month+')').attr('selected', true);

    if (year!="")
            $('select#exp_year>option:eq('+year+')').attr('selected', true);

    if (state!="")  {
            $('select#x_state>option:eq("'+state+'")').attr('selected', true);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:28:37.187

问题是“option:eq”按索引值选择选项，而不是按选项值。

我现在正在使用：

$('#id").val(theVal)

# android - 为什么行动起来注册不了？

> ID：11234032
> 
> 赞同：0
> 
> 时间：2012-06-27T20:02:32.347
> 
> 标签：android, andengine

我正在运行一个场景更新处理程序以在触摸场景时增加我的精灵的比例。它应该在用户抬起手指时停止，但我的动作从未注册。精灵的大小不断增加，直到再次触摸屏幕，此时旧精灵停止生长，新精灵开始。任何想法为什么？

```
scene.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void reset() {         
        }

        @Override
        public void onUpdate(float pSecondsElapsed) {
            if(fillerNum>-1){
                if(filler[fillerNum].active){
                    mPhysicsWorld.unregisterPhysicsConnector(mPhysicsWorld.getPhysicsConnectorManager().findPhysicsConnectorByShape(filler[fillerNum].sprite));
                    mPhysicsWorld.destroyBody(filler[fillerNum].body);

                    filler[fillerNum].sprite.setScale(filler[fillerNum].scale+=pSecondsElapsed*.5);

                    filler[fillerNum].body = PhysicsFactory.createCircleBody(mPhysicsWorld, filler[fillerNum].sprite, BodyType.DynamicBody, FIXTURE_DEF);
                    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(filler[fillerNum].sprite, filler[fillerNum].body, true, true));
                }
            }               
        }
    });

@Override
    public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {
         if(this.mPhysicsWorld != null) {
                if(pSceneTouchEvent.isActionDown()) {
                    createFiller(pSceneTouchEvent.getX(), pSceneTouchEvent.getY());
                    return true;
                }
                if(pSceneTouchEvent.isActionUp()){
//Never executed
                    Log.e("Action UP", Boolean.toString(filler[fillerNum].active));
                    createStationaryFiller();
                }
            }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:27:25.977

您正在注册一个更新处理程序！这意味着只要您的场景已向 Engine 注册，就会持续调用此 onUpdate 方法。它只会在您的 FillerNum 小于 -1 时停止。您需要查看填充数的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:13:57.693

您可以`ZoomExample`参考，当您触摸场景时，相机会平滑放大，您只需将缩放部分替换为代码即可放大精灵：

```
scene.setOnSceneTouchListener(new IOnSceneTouchListener() {
        @Override
        public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {
            switch(pSceneTouchEvent.getAction()) {
                case TouchEvent.ACTION_DOWN:
                    //sprite.setScale() code
                    break;
                case TouchEvent.ACTION_UP:
                    //sprite.setScale() code
                    break;
            }
            return true;
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T04:37:12.790

很多人都为这个问题头破血流！当你犯错时，你会打自己！检查你的`onSceneTouchEvent()`方法。你`return false`到底。该方法的返回值 false 告诉 TouchListener 用户正在执行的 TouchEvent(action down) 是无效的！因此 TouchListener 将停止注册所有后续事件（动作移动，动作向上......等）！

这就是为什么第二`if`条语句中的代码永远不会执行的原因！您所要做的就是更改`return false`为`return true`，告诉 touchlistener 您希望注册以下事件。

如此愚蠢的问题却如此令人沮丧！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-28T03:24:51.573

事实证明，我需要在创建精灵的 onAreaTouched 方法中添加一个 isActionUp 方法，并将它放在 onSceneTouchEvent 中。如果没有前者，精灵会继续增长，直到添加另一个触摸。如果没有后者，你可以将你的手指从精灵上拖下来，它仍然会增长。

# arcgis - 在 ArcGIS Flexviewer 的 Popup 中显示图像

> ID：11234033
> 
> 赞同：0
> 
> 时间：2012-06-27T20:02:33.093
> 
> 标签：arcgis, arcgis-server

我使用 ArcGIS Flex 查看器创建了一个示例 flex 应用程序，并尝试从 web(wiki) 访问一些图像。

我已成功配置弹出 XML 文件，以便它显示图像。但是，当我单击该功能时，它没有显示图像。

我在想这是否可能是因为这些图像更大，无法包含在弹出窗口中。

我尝试了以下在弹出配置 xml 中使用不同标签的解决方法。

# 解决方法：1

```
<description><![CDATA[<a href="{LINK_NEW}"><img src="{LINK_NEW}"/>{LINK_NEW}</a>.<br>a. ]]>
</description> 
```

# 解决方法：2

```
<medias>
  <media chartfields="" type="image" imagesource="{LINK_NEW}" imagelink="{LINK_NEW}" /> 
  </medias> 
```

第二个似乎让我接近分辨率，但无法在弹出窗口中看到图像。

这里的问题是，我想知道一种在 xml 标签的帮助下调整原始图像大小的方法，如果可能的话，我想增加弹出窗口的大小以及减小适合的图像大小弹出窗口。

我的配置文件如下：

```
<?xml version="1.0" ?>
<configuration>
    <title>{NAME}</title>        
    <medias>
    <media chartfields="" type="image" imagesource="{LINK_NEW}" imagelink="{LINK_NEW}" />
    </medias>
    <fields>
            <field name="NAME" alias="NAME" visible="true"/>
                <field name="LOCID" alias="LOCID" visible="true"/>
                <field name="STATE" alias="STATE" visible="true"/>
                <field name="ACAIS" alias="ACAIS" visible="true"/>
        <field name="LINK_NEW" alias="LINK_NEW" visible="false"/>
    </fields>
    <showattachments>true</showattachments>  
</configuration> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:14:45.680

我刚刚发现我们无法在弹出窗口中访问更大的图像，这可能是需要通过弹出配置完成的增强功能。

并且还发现通过在弹出配置中使用图像控件，可以通过 FLEX API 访问更大的图像。以下是一些可能有用的链接。

图像控制： [http ://livedocs.adobe.com/flex/3/html/help.html?content=controls_16.html](http://livedocs.adobe.com/flex/3/html/help.html?content=controls_16.html)

PopUpRendererSkin： [http ://help.arcgis.com/en/webapi/flex/apiref/com/esri/ags/skins/PopUpRendererSkin.html](http://help.arcgis.com/en/webapi/flex/apiref/com/esri/ags/skins/PopUpRendererSkin.html)

# python - html textarea 提交导致“=”字符仅在部署在 GAE 上时显示在新行

> ID：11234034
> 
> 赞同：1
> 
> 时间：2012-06-27T20:03:00.737
> 
> 标签：python, google-app-engine, textarea, jinja2

当我在 Windows GAE 启动器的文本区域框中提交以下文本时，`http://localhost:8080`它显示正常。

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a dolor eget diam
condimentum varius. Proin malesuada dictum ante, sed commodo purus vestibulum in. 
Sed nibh dui, volutpat eu porta eu, molestie ut lacus. Vivamus iaculis urna ut tellus 
blandit eu at nisl. Fusce eros libero, aliquam vitae hendrerit vitae, posuere ac diam. 
Vivamus sagittis, felis in imperdiet pellentesque, eros nibh porttitor nisi, id      
tristique leo libero a ligula. In in elit et velit auctor lacinia eleifend cursus mauris. Mauris 
pellentesque lorem et augue placerat ultrices. Nam sed quam nisl, eget elementum felis. 
Integer sapien ipsum, aliquet quis viverra quis, adipiscing eget sapien. Nam consequat 
lacinia enim, id viverra nisl molestie feugiat. 
```

当我点击提交按钮后我的代码部署在 GAE 上时，它显示如下：

```
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus a dolor eg=
et diam condimentum varius. Proin malesuada dictum ante, sed commodo purus =
vestibulum in. Sed nibh dui, volutpat eu porta eu, molestie ut lacus. Vivam=
us iaculis urna ut tellus tempor blandit eu at nisl. Fusce eros libero, ali=
quam vitae hendrerit vitae, posuere ac diam. Vivamus sagittis, felis in imp=
erdiet pellentesque, eros nibh porttitor nisi, id tristique leo libero a li=
gula. In in elit et velit auctor lacinia eleifend cursus mauris. Mauris pel=
lentesque lorem et augue placerat ultrices. Nam sed quam nisl, eget element=
um felis. Integer sapien ipsum, aliquet quis viverra quis, adipiscing eget =
sapien. Nam consequat lacinia enim, id viverra nisl molestie feugiat. 
```

实现说明如下：

我正在使用 jinja2 引擎。我有 autescape = false：

```
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir), autoescape = False) 
```

我从 textarea 元素中获取内容。这是它在我的模板中的设置方式：

```
 <label>
    <div>Information</div>
    <textarea name="information">{{r.information}}</textarea>
  </label> 
```

我使用以下方法检索字符串：

```
information = self.request.get('information') 
```

我将字符串提交到数据存储

```
r.information = information
r.put() 
```

当再次显示它进行编辑时，我使用相同的模板代码：

```
 <label>
    <div>Information</div>
    <textarea name="information">{{r.information}}</textarea>
  </label> 
```

一切都在当地运作良好。但是当我将它部署到谷歌应用引擎时，我得到了一些奇怪的结果。我想知道这些 = 标志是从哪里来的？

**编辑：**
为澄清起见，它将 =CRLF 放在每行的末尾。

**编辑 2: ** 以下是错误注释 21 中的代码：

```
def from_fieldstorage(cls, fs):
    """
    Create a dict from a cgi.FieldStorage instance
    """
    obj = cls()
    if fs.list:
        # fs.list can be None when there's nothing to parse
        for field in fs.list:
            if field.filename:
                obj.add(field.name, field)
            else:

                # first, set a common charset to utf-8.
                common_charset = 'utf-8'

                # second, check Content-Transfer-Encoding and decode
                # the value appropriately
                field_value = field.value
                transfer_encoding = field.headers.get(
                  'Content-Transfer-Encoding', None)

                if transfer_encoding == 'base64':
                    field_value = base64.b64decode(field_value)

                if transfer_encoding == 'quoted-printable':
                    field_value = quopri.decodestring(field_value)

                if field.type_options.has_key('charset') and \
                      field.type_options['charset'] != common_charset:
                    # decode with a charset specified in each
                    # multipart, and then encode it again with a
                    # charset specified in top level FieldStorage
                    field_value = field_value.decode(
                      field.type_options['charset']).encode(common_charset)

            # TODO: Should we take care of field.name here?
            obj.add(field.name, field_value)

    return obj

multidict.MultiDict.from_fieldstorage = classmethod(from_fieldstorage) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:48:06.650

你可能会犯[这个错误](http://code.google.com/p/googleappengine/issues/detail?id=2749) 评论 21 中的解决方法过去对我有用，最近的评论表明它仍然有效。

# javascript - Javascript onchange() 在 chrome 和 IE 中不起作用

> ID：11234035
> 
> 赞同：0
> 
> 时间：2012-06-27T20:03:03.847
> 
> 标签：javascript

我有一个总变量，我使用 PHP/JS 下拉框中的更改通过刷新获取请求进行更新。似乎在 Firefox 中可以正常工作，但在 Chrome / IE 中则完全不行。有什么建议么？

```
<form action='cart.php' onchange = 'go()'>
<select id = 'postinfo' name = 'postage'>

<script>
  function go() {
    var x = document.getElementById("postinfo").value;
    if (x == "express") {
        var price = 9.99
        window.location.href = "cart.php?delivery=" + price + "&item=express"; 
    }else if (x == "free"){
        var price = 4.99
        window.location.href = "cart.php?delivery=" + price + "&item=free"; 
    }
  }
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:05:48.833

表单元素上没有 onchange 事件。

您可能希望它在 select 元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:14:40.113

您应该将“onchange”JavaScript 事件附加到您的选择标记而不是表单标记。

例如：

```
 <form>
    <select onchange="alert('I just changed!!!');">
      <option>1</option>
      <option>2</option>
    </select>
  </form> 
```

高温高压

# variables - 变换 scale() svg 文档中的可变参数

> ID：11234039
> 
> 赞同：0
> 
> 时间：2012-06-27T20:03:23.703
> 
> 标签：variables, parameters, svg, arguments, transform

在 SVG 文件中，我想在 defs 部分（或任何其他相关节点）中定义一些全局常量值，以用作缩放参数。

```
<svg:defs id="defs4">
xxxx value defined here
</svg:defs>

...

<svg:g id="id1" transform="scale(xxxx)">...</svg:g> 
```

PS：这里没有涉及脚本我已经尝试了 param() 函数但没有任何成功......甚至可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:00:03.993

有一个[SVG 参数规范](http://www.w3.org/TR/SVGParam/)，但它仍在编写中，尚未由任何 UA 本地实现。有一些示例说明它在[入门](http://www.w3.org/TR/2009/WD-SVGParamPrimer-20090616/)中如何工作， 但它们目前是使用 javascript 实现的。一旦完成参数规范，未来的 UA 将不需要打开脚本以使参数工作。

# python - Python正则表达式 - 匹配包含#expr1而不是#expr2而不是#expr3的字符串

> ID：11234040
> 
> 赞同：0
> 
> 时间：2012-06-27T20:03:23.847
> 
> 标签：python, regex

我想匹配一个包含“subscribe”但没有“did not”或“unsub.*”的字符串。

例如，

“请订阅我”将匹配

但是“我没有订阅这封电子邮件”或“请取消订阅我”将无法匹配。

我所拥有的是

```
".*subscribe(?!.*did\\s+not)(?!.*unsub.*)" 
```

这显然不起作用。

再说一次，我想要的表达式是 (A and !B and !C)

任何帮助，将不胜感激。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:07:03.670

您的前瞻应该在正则表达式的开头：

```
re.match(r"(?!.*did\s+not)(?!.*unsub).*subscribe", text) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:08:50.877

***正则表达式：***

```
^(?!.*unsub)(?!.*did not).*subscribe 
```

***Python：***

```
re.match(r"^(?!.*unsub)(?!.*did not).*subscribe", str) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:18:20.673

您可以使用正面和负面的前瞻性来做到这一点，但更好的方法是为搜索词设置一个正则表达式，为停用词设置另一个。

```
if re.search(r"\bsubscribe", text) and not re.search(r"did\s+not|\bunsub", text):
    unsubscribe(sender) 
```

仅当您需要在特定位置包含/排除文本时，才值得使用前瞻。

另请注意，`\b`（单词边界）将阻止“订阅”在“取消订阅”一词中匹配。

# python - Python：读取文本文件的内容并查找匹配/条件

> ID：11234053
> 
> 赞同：0
> 
> 时间：2012-06-27T20:04:10.027
> 
> 标签：python, python-3.x, python-2.7

我正在尝试打开一个文本文件并查找 string `Num_row_lables`。如果 的值`Num_row_labels`大于或等于 10，则打印文件名。

在下面的示例中，我的文本文件`test.mrk`包含以下格式的一些文本： Ps，我的文本文件没有`Num_row_labels >= 10`. 它总是有“ `equal to`”。

```
Format= { Window_Type="Tabular", Tabular= { Num_row_labels=10 } } 
```

所以我创建了一个变量`teststring`来保存我将要查看的模式。然后我打开了文件。

然后使用`re`，我进入`Num_row_labels=10`了我的名为 match 的变量。使用`group()`on match，我提取了我想要的阈值并使用`int()`转换的`string to int`.

`find/print`如果文本文件的 Num_row_labels = 10 或任何大于 10 的 # ，我的目的是读取文本文件到Num_row_labels 的值以及文件名。

这是我的测试代码：

```
import os
import os.path
import re

teststring = """Format= { Window_Type="Tabular", Tabular= { Num_row_labels=10 } }"""
fname = "E:\MyUsers\ssbc\test.mrk"
fo = open(fname, "r")
match = re.search('Num_row_labels=(\d+)', teststring)
tnum = int(match.group(1))

if(tnum>=10):
        print(fname) 
```

如何确保在打开文件的内容中搜索匹配项并检查 tnum>=10 的条件？我的测试代码只会根据最后 4 行简单地打印文件名。我想确保搜索遍及我的文本文件的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:11:03.900

所以你想要做的是将整个文件作为字符串读出，并在该字符串上搜索你的模式

```
with open(fname, "r") as fo:
    content_as_string = fo.read()
    match = re.search('Num_row_labels=(\d+)', content_as_string)
    # do want you want to the matchings 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-21T14:21:29.990

***Python代码根据条件读取文件内容***

```
 file = '../input/testtxt/kaggle.txt'
    output = []
    with open(file, 'r') as fp:
        lines = fp.readlines()
        for i in lines:
            if('Image for' in i):
                output.append(i)

    print(output) 
```

# windows - 签署内核模式驱动程序

> ID：11234055
> 
> 赞同：1
> 
> 时间：2012-06-27T20:04:35.713
> 
> 标签：windows, digital-certificate, kmdf

我有一个 kmfd 驱动程序，我正在从[http://www.digicert.com/code-signing/](http://www.digicert.com/code-signing/)购买证书，这个证书可以在 Windows 7 上使用吗？还是我只需要从威瑞信购买，他们收取高达 400 美元/年的费用，而这是 178 美元/年。

# python - 3d numpy 记录数组

> ID：11234059
> 
> 赞同：9
> 
> 时间：2012-06-27T20:04:51.267
> 
> 标签：python, numpy

是否可以在 numpy 中有一个 3-D 记录数组？（也许这是不可能的，或者也有一种更简单的方法来做事——我对其他选择持开放态度）。

假设我想要一个包含 3 个变量（比如温度、降水、湿度）数据的数组，并且每个变量的数据实际上是 2 年（行）和 6 个月数据（列）的二维数组，我可以创建它像这样：

```
>>> import numpy as np

>>> d = np.array(np.arange(3*2*6).reshape(3,2,6))
>>> d

#
# comments added for explanation...
#        jan   feb   mar   apr   may   Jun    

array([[[ 0,    1,    2,    3,    4,    5],   # yr1  temp
        [ 6,    7,    8,    9,   10,   11]],  # yr2  temp

       [[12,   13,   14,   15,   16,   17],   # yr1  precip
        [18,   19,   20,   21,   22,   23]],  # yr2  precip

       [[24,   25,   26,   27,   28,   29],   # yr1  humidity
        [30,   31,   32,   33,   34,   35]]]) # yr2  humidity 
```

我希望能够输入：

```
>>> d['temp'] 
```

并得到这个（数据的第一个“页面”）：

```
>>> array([[ 0,  1,  2,  3,  4,  5],
           [ 6,  7,  8,  9, 10, 11]]) 
```

或者：

```
>>> d['Jan']   # assume months are Jan-June 
```

得到这个

```
>>> array([[0,6],
          [12,18],
          [24,30]]) 
```

我已经经历了很多次：[http](http://www.scipy.org/RecordArrays) ://www.scipy.org/RecordArrays ，但不知道我是如何设置的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T21:26:44.337

实际上，您可以对结构化数组执行类似的操作，但通常麻烦多于其价值。

你想要的基本上是标记轴。

[Pandas](http://pandas.pydata.org/)（建立在 numpy 之上）提供了你想要的东西，如果你想要这种类型的索引，它是一个更好的选择。还有[Larry（用于标记数组）](http://larry.sourceforge.net/)，但它在很大程度上已被 Pandas 取代。

此外，您应该查看结构化数组的 numpy 文档以获取有关此信息的信息，而不是常见问题解答。numpy 文档有相当多的信息。[http://docs.scipy.org/doc/numpy/user/basics.rec.html](http://docs.scipy.org/doc/numpy/user/basics.rec.html)

如果您确实想采用纯 numpy 路线，请注意结构化数组可以包含多维数组。（请注意指定 dtype 时的 shape 参数。）不过，这将很快变得比它的价值更复杂。

用`pandas`术语来说，你想要的是一个[`Panel`](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#panel). 不过，您可能应该先[熟悉`DataFrame`s](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)。

使用 Pandas 的方法如下：

```
import numpy as np
import pandas

d = np.array(np.arange(3*2*6).reshape(3,2,6))

dat = pandas.Panel(d, items=['temp', 'precip', 'humidity'], 
                      major_axis=['yr1', 'yr2'], 
                      minor_axis=['jan', 'feb', 'mar', 'apr', 'may', 'jun'])

print dat['temp']
print dat.major_xs('yr1')
print dat.minor_xs('may') 
```

# powershell - 使用 Powershell 的 Out-Host 时保留颜色

> ID：11234062
> 
> 赞同：6
> 
> 时间：2012-06-27T20:04:57.897
> 
> 标签：powershell, scripting

我有一个命令行可执行文件，可以将彩色文本打印到标准输出。当我执行以下操作时...

`my_executable.exe | Out-Host`

...我发现 Out-Host 删除了所有彩色输出。当我想显示程序的彩色输出而不通过管道发送它时，这是一个问题。

有没有另一种方法可以让我显示控制台程序/批处理文件的彩色输出而不通过管道发送它？

编辑：

换句话说，我想要的是：

![着色输出](../Images/368c3ab3aaf1f5ff958c21c7a7070a45.png)

但是 Out-Host 会导致：

![无着色输出](../Images/eaddc159573005a4386e51dcfd21a92d.png)

编辑2：

这就是为什么我不能只调用 my_executable.exe 的原因：

我在 .ps1 文件中有一个类似于以下内容的脚本

```
param($someValue)

# do some things
.\my_executable.exe | Out-Host 
# do some more things
return 1 
```

现在，当我执行以下操作时：

```
$result = .\my-script.ps1 
```

$result 是 1。如果我不使用 Out-Host，$result 将是 my_executable.exe 的输出，最后是 1。Out-Host 允许我显示 my_executable.exe 的输出*而不将其返回给调用者*。我想要的是一种显示 my_executable.exe 的彩色输出而不将其返回给调用者的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-03T18:52:13.910

```
$exe = ".\my_executable.exe"
$args = ""
$process = Start-Process $exe $args -NoNewWindow -Wait -ErrorAction Stop -PassThru
if ($process.ExitCode -ne 0) {
    throw "FAILED: $exe $args"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:24:21.810

该`Out-Host`命令不支持着色，`Write-Host`所以我建议改用它。

或者，只是摆脱`Out-Host`业务，然后做`$result = .\my-script.ps1 | select -last 1`.

# java - GWT、GWT Designer 和 Eclipse 插件问题

> ID：11234066
> 
> 赞同：0
> 
> 时间：2012-06-27T20:05:21.500
> 
> 标签：java, eclipse, gwt, eclipse-plugin, gwt-designer

我正在学习 GWT，所以我正在学习 Google GWT 的本教程 [https://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/stockwatcher](https://developers.google.com/web-toolkit/tools/gwtdesigner/tutorials/stockwatcher)

在这个我必须在设计模式下打开一个java文件。我收到了错误

java.lang.ClassNotFoundException：com.google.gwt.dev.shell.designtime.HostedModeSupportImpl

我通过 zip 文件安装了 GWT 设计器，将其解压缩并提取到 plugins 和 features 文件夹中。

这是正确的方法吗？这就是java文件没有在设计模式下打开的原因吗？

另外，我无法在 Eclipse 中安装新软件，请参阅我的问题->

[Eclipse 3.7 Indigo-“安装新软件”没有进展：GWT Designer](https://stackoverflow.com/questions/11232486/eclipse-3-7-indigo-install-new-software-not-progressing-gwt-designer)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:20:41.613

问题的原因是 AVG Antivirus 阻止了安装。确保您的计算机上没有运行会阻止在 Eclipse 上安装软件的防病毒软件。

# linux - 使用主目录二进制文件覆盖系统二进制文件

> ID：11234067
> 
> 赞同：4
> 
> 时间：2012-06-27T20:05:23.313
> 
> 标签：linux, autoconf, openmpi

我正在尝试在我的主目录（OpenMPI）中编译一个软件。我的系统上安装的构建依赖项（autoconf）之一不是 OpenMPI autogen 脚本要求的较新版本。我在我的主目录中编译并安装了新版本的 autoconf。

无论如何，安装在我的主目录中的二进制文件是否可以“覆盖”系统上为我的会话安装的版本？

我尝试设置一个别名，该别名可通过命令行工作，但不适用于用于生成配置脚本的脚本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:08:00.633

您可以更改 PATH[环境变量](http://lowfatlinux.com/linux-environment-variables.html)，以便您的主目录出现在系统目录之前，例如

> PATH=$HOME/bin:$PATH

然后，您可以使用[which](http://linux.about.com/library/cmd/blcmdl1_which.htm)命令来确保获取正确的二进制文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T20:08:40.693

将要覆盖的二进制文件的路径添加到`$PATH`环境变量中。像`PATH=/path/to/binary:$PATH ./compile`

`compile`在尝试查找命令时，将首先查找您添加的路径。它仅对该执行有效，并且在命令返回后不会保留。您可以使用`export PATH=/path/to/binary/:$PATH`，它将为该会话保存。

**编辑**：正如 Eric.J 所说，您可以使用`which compile`which 将输出命令的路径，以确保它是正确的。

# google-chrome - 仅适用于 Opera、Safari 和 Chrome 的 CSS 样式表

> ID：11234068
> 
> 赞同：0
> 
> 时间：2012-06-27T20:05:26.400
> 
> 标签：google-chrome, css, safari, opera

我正在使用在 IE 和 Firefox 上运行良好的代码：

```
 .tytulmalykom {
    color:#666666;
    font-size:11px;
    font-variant:small-caps;
} 
```

我想将此代码仅用于 Opera、Safari 和 Chrome：

```
 .tytulmalykom {
    color:#666666;
    font-size:11px;
    text-transform:uppercase;
} 
```

我所有的样式表都在 stylesheet.css 文件中。

到目前为止，我使用了很多链接 rel：

```
<link rel="stylesheet" href="files/stylesheet.css" type="text/css" />
<![if !IE]><link rel="stylesheet" type="text/css" href="files/firefox.css" media="screen" /><![endif]>
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="files/ie7.css" /><![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:40:02.693

这是我为解决此问题所做的工作：

我在每一页上都添加了：

```
<style type="text/css">

@-moz-document url-prefix() { 
    .tytulmalykom { font-variant:small-caps; text-transform:none }
}
</style> 
```

然后

在 stylesheet.css 中：

```
.tytulmalykom {
    color:#666666;
    font-size:11px;
    text-transform:uppercase;
} 
```

和ie7.css：

```
.tytulmalykom {
    font-variant:small-caps;
} 
```

firefox.css 中不需要其他任何东西

# security - 带有数据库存储角色和 FOSUserBundle 的 Symfony2 安全系统（access_control 和 security.context）

> ID：11234069
> 
> 赞同：0
> 
> 时间：2012-06-27T20:05:31.973
> 
> 标签：security, symfony, roles, fosuserbundle

我正在使用类似于[http://blog.jmoz.co.uk/symfony2-fosuserbundle-role-entities的解决方案](http://blog.jmoz.co.uk/symfony2-fosuserbundle-role-entities)

因此，我有一个`Role`实现的实体，`RoleInterface`并且我有一个修改后的`User`实体，该实体设置为与角色具有多对多关系。

这允许我使用这样的代码

```
$user = $this->get('security.context')->getToken()->getUser();
$role = new Role('ROLE_TEST');
$user->addRole($role);

$em = $this->getDoctrine()->getEntityManager();
$em->persist($role);
$em->persist($user);
$em->flush(); 
```

然后我可以检查用户是否具有以下角色

```
$user = $this->get('security.context')->getToken()->getUser();

if($user->hasRole('ROLE_TEST')){
   //do stuff...
} 
```

* * *

这个解决方案没问题，但我需要访问安全上下文并使用如下代码：

```
if($this->get('security.context')->isGranted('ROLE_TEST')){
   //do stuff...
} 
```

在 security.yml cofig 文件中，我想像这样使用 access_control 代码：

```
access_control:
   - { path: ^/test$, role: ROLE_TEST } 
```

我需要一个自定义用户管理器吗？在数据库中分配给用户的角色不会被转移到内置的 Symfony 安全系统中。

换句话说，当我查看分析器的安全部分时，它显示用户被分配到`Roles [ROLE_USER]`，但我希望得到它，这样系统也会识别我在数据库中为登录用户设置的角色，例如`ROLE_TEST`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T12:56:38.657

这不起作用的原因是因为我仍然使用相同的会话登录。注销然后重新登录以使用新角色刷新会话就可以了。哦！

# objective-c - 使用 Restkit 为核心数据创建临时对象的更好方法

> ID：11234071
> 
> 赞同：1
> 
> 时间：2012-06-27T20:05:37.850
> 
> 标签：objective-c, cocoa, core-data, restkit

在我的应用程序中，我有这种情况，我需要将对象发布到远程服务器并获取对象密钥，然后将对象存储在本地。我在我的应用程序中实现了核心数据和 Restkit。

对象值是从用户输入中收集的。在将对象发布到远程服务器之前，我想不出一个好方法来准备对象。该对象是 NSManagedObject 类型的实体，我不想在从服务器获取对象 ID 之前存储它。

我遇到了[这个](https://stackoverflow.com/questions/9896718/best-practice-for-temporary-objects-in-restkit-with-core-data)建议使用瞬态对象来处理这种情况。但正如该线程中所讨论的，这会导致代码维护问题。

有没有更好的方法来处理这种情况？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:23:08.293

使您的核心数据模型类遵守 RKRequestSerializable 协议。

然后，当用户输入被验证时，像往常一样创建一个实体并将其设置为 RKRequest 的参数值，这会将您的对象作为 HTTP 正文发送。查看 RKParams.m 中的示例。

还将新创建的实体设置为 RKObjectLoader 的 targetObject。这样，当您的 Web 服务返回信息（如新的唯一 ID）时，它将针对新对象并将新的唯一 ID 保存到该对象，而不会创建副本。

清如泥？

PS：哦，小心将自动生成的核心数据类与自定义代码混合！我建议[mogen](http://rentzsch.github.com/mogenerator/)帮助您在每次进行更改时都不会丢失代码。

# algorithm - 从列表中删除项目 - 算法时间复杂度

> ID：11234078
> 
> 赞同：0
> 
> 时间：2012-06-27T20:06:01.377
> 
> 标签：algorithm, big-o

问题由两个排序列表组成，没有大小为 n 和 m 的重复项。第一个列表包含应从第二个列表中删除的字符串。

最简单的算法必须进行`nxm`操作（我相信这个术语是“二次时间”？）。

改进的解决方案是利用两个列表都已排序并在将来的比较中跳过索引低于上次删除索引的字符串这一事实。我想知道那是什么时间复杂度？

这个问题有没有时间复杂度更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T20:09:13.743

你应该看看[Merge sort](http://en.wikipedia.org/wiki/Merge_sort)。这就是为什么它有效工作背后的基本思想。

想法是将两个列表一起扫描，这需要`O(n+m)`时间：

为第一个列表创建一个指针`x`，比如说，为第二个列表创建`A`另一个指针。设置和。While和if则添加到新的合并列表并递增。否则添加到新列表并递增。一旦你点击or ，分别从or中获取剩余的元素。`y``B``x=0``y=0``x < n``y < m``A[x] < B[y]``A[x]``x``B[y]``y``x=n``y=m``B``A`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T20:07:16.103

我相信复杂性会是`O(n+m)`，因为每个列表中的每个项目都会被访问一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:07:01.550

计数/桶排序算法将在第二个列表中的每个字符串都是一个桶的情况下工作。

您浏览第二个列表（需要 m 时间）并创建您的存储桶。然后，您浏览您的第一个列表（需要 n 时间）并增加出现次数。然后，您将不得不再次遍历每个存储桶（需要 m 时间），并且只返回出现一次的字符串。Trie 或 HashMap 可以很好地存储桶。应该是 O(n+m+m)。如果您使用 HashSet，则在第二次通过而不是递增计数器时，您会从 Set 中删除。它应该是 O(n+m+(mn))。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-27T21:55:45.877

如果使用二进制搜索，可能是 O(m + log(n)) 吗？

# java - 在 Arraylist 中添加和获取字符串数组

> ID：11234082
> 
> 赞同：0
> 
> 时间：2012-06-27T20:06:14.373
> 
> 标签：java, arraylist

我有这个从 XML 文件中读取的代码。它获取五个字符串（groupId、groupType、filePath、author 和 lineNo），并首先将它们保存在一个字符串数组中。然后，字符串数组被保存在一个 ArrayList 中。最后，最后一个“for”显示了 ArrayList 的内容。

当我想显示内容时，我只得到最后添加的字符串数组的问题。以下是代码和输出。谁能弄清楚是什么问题？

```
ArrayList<String[]> developerTypes = new ArrayList<String[]>();
String[] developerInfo = {null, null, null, null, null};
String[] developerInfoR = {null, null, null, null, null};

String groupId;
String groupType;
String filePath;
String author;
String lineNo;

SAXBuilder builder = new SAXBuilder();
Document doc = (Document) builder.build("A.xml");
Element clones = doc.getRootElement();

// Loop of clones' children (clone_group)
List<Element> parentElements = clones.getChildren();
for(Element parentElement:parentElements){

    // Loop of clone_group's children (clone_fragment)
    List<Element> elements = parentElement.getChildren();
    for(Element element:elements){

        // Loop of clone_fragment's children (blameInfo)
        List<Element> childelements = element.getChildren();
        for(Element childElement:childelements){

            groupId = parentElement.getAttributeValue("groupid");
            groupType = parentElement.getAttributeValue("type");
            filePath = element.getAttributeValue("file");
            author = childElement.getAttributeValue("author");
            lineNo = childElement.getAttributeValue("lineNo");
            //System.out.print(groupId + " - ");
            //System.out.print(groupType + " - ");
            //System.out.print(file + " - ");
            //System.out.println(author);
            developerInfo[0] = groupId;
            developerInfo[1] = groupType;
            developerInfo[2] = filePath.substring(1, filePath.lastIndexOf("."));;
            developerInfo[3] = author;
            developerInfo[4] = lineNo;
            developerTypes.add(developerInfo);

        }// for (blameInfo)    
    }// for (clone_fragment)
}// for (clone_group)

// Display the content of the Arraylist    
for(int i = 0; i< developerTypes.size(); ++i){

    developerInfoR = developerTypes.get(i);

    for(int j = 0; j< developerInfoR.length; ++j){

        System.out.print(developerInfoR[j] + " ");

    }
    System.out.print("\n");

} 
```

输出：

```
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
309 Type-3 builtin/update-index.c Jonathan Nieder 704 
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:09:50.163

> 当我想显示内容时，我只得到最后添加的字符串数组的问题。

不，你发现你有*很多*对*同一个*字符串数组的引用......因为那是你添加的。你只有一个字符串数组*对象*；`developerInfo`只是对该数组的引用。当您调用时`developerTypes.add(developerInfo)`，会将引用复制到 中`ArrayList`，因此您多次获得相同的引用。

您应该将声明和实例化拉`developerInfo`入循环：

```
String[] developerInfo = {
    groupId,
    groupType,
    filePath.substring(1, filePath.lastIndexOf(".")),
    author,
    lineNo
};
developerTypes.add(developerInfo); 
```

同样，如果您在使用它之前不声明，您的代码会更干净`developerInfoR`：

```
for(int i = 0; i< developerTypes.size(); ++i){
    String[] developerInfoR = developerTypes.get(i);
    for(int j = 0; j< developerInfoR.length; ++j){
        System.out.print(developerInfoR[j] + " ");
    }
    System.out.print("\n");
} 
```

或者更好的是，使用增强的 for 循环：

```
for (String[] developerInfoR : developerTypes) {
    for (String info : developerInfoR) {
        System.out.print(info + " ");
    }
    System.out.print("\n");
} 
```

*一般来说*，您应该尽可能晚地声明具有最小范围的局部变量，理想情况下在声明时分配一个值。在方法顶部声明所有变量确实会损害可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:09:40.280

您只有一个`developerInfo`在循环中不断添加的数组实例。您需要在每个循环步骤中创建一个新数组。

您似乎对您正在使用的构造的语义有一些误解。我从您预先初始化的方式推断出这一点`developerInfoR`，但从不使用该值。数组变量只包含对数组的引用，因此每次分配给它时，之前引用的数组都会被遗忘并丢弃。所以，不要预先初始化`developerInfo`。事实上，你甚至不需要在你使用它的地方声明它。

还有一种更简单的方法来打印数组的内容：只需调用`System.out.println(Arrays.toString(developerInfoR))`. 这样，您甚至不需要打印代码中的内部循环。

您不需要任何变量 groupId、groupType、filePath、author、lineNo。只写例子`developerInfo[0] = parentElement.getAttributeValue("groupid");`和类似的。这使得代码更明显。但是使用完整对象而不是 String[] 可能更有意义。有很多字段，每个字段的含义都在整数索引后面。

总而言之，采用这些建议加上一些额外的建议，您的代码可以重写为：

```
final String path = filePath.substring(1, filePath.lastIndexOf("."));
final Document doc = (Document) new SAXBuilder().build("A.xml");
final List<DeveloperInfo> developers = new ArrayList<String[]>();
for (Element parentElement : doc.getRootElement().getChildren())
  for (Element element : parentElement.getChildren())
    for (Element childElement : element.getChildren())
      developers.add(new DeveloperInfo(
          parentElement.getAttributeValue("groupid"),
          parentElement.getAttributeValue("type"),
          element.getAttributeValue("file"),
          path,
          childElement.getAttributeValue("author"),
          childElement.getAttributeValue("lineNo"),
      ));
for (DeveloperInfo d : developerTypes) System.out.println(d); 
```

DeveloperInfo 类：

```
class DeveloperInfo {
  public final String groupId, groupType, filePath, author, lineNo;
  public DeveloperInfo(
      String groupId, String groupType, String filePath, 
      String author, String lineNo)
  {
    this.groupId = groupId; this.groupType = groupType; this.filePath = filePath;
    this.author = author; this.lineNo = lineNo;
  }
  public String toString() {
    return "DeveloperInfo [groupId=" + groupId + ", groupType=" + groupType + 
      ", filePath=" + filePath + ", author=" + author + ", lineNo=" + lineNo + "]";
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:10:22.067

每次将其添加到`ArrayList`.

而不是声明这个`String[] developerInfo = {null, null, null, null, null};`

一开始。每次循环时创建一个新数组。

`String[] developerInfo = new String[5];`

# sql-server - 聚簇索引扫描而不是左连接时的聚簇索引查找

> ID：11234090
> 
> 赞同：2
> 
> 时间：2012-06-27T20:06:58.973
> 
> 标签：sql-server, indexing

```
SELECT *
FROM
    tbl_transaction t
LEFT JOIN
    tbl_transaction_hsbc ht
ON 
    t.transactionid = ht.transactionid 
```

`transactionid`两个表上都是主键，那么为什么没有索引搜索？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T20:10:56.510

也许是 SELECT * ... 并且可能因为您要返回整个表，所以寻找没有任何优势。你想要一个 seek 做什么，逐步搜索每一行？扫描效率更高。

我知道您可能已经阅读或被告知要不惜一切代价避免扫描。我认为需要有更多与此相关的上下文。有时扫描是正确的答案，也是获取数据的最有效途径。如果查询很慢，也许您可​​以显示一个实际的执行计划，我们可以帮助查明问题。但答案不会强制此查询使用搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T23:16:23.880

没有索引搜索，因为您没有 where 子句。索引查找意味着您检查索引中的一系列值。由于您没有 where 子句，因此除了扫描所有索引值之外别无选择。所以得名“索引扫描”。

这不是表扫描，而是索引扫描。如果您在其中一个表中的此列上没有索引，您将对第二个表进行表扫描 + 对第一个表进行索引扫描。

# ruby-on-rails - 在 Rails 的 link_to_if 方法中使用 div 作为 name 参数

> ID：11234097
> 
> 赞同：0
> 
> 时间：2012-06-27T20:07:22.170
> 
> 标签：ruby-on-rails, link-to

我正在努力做到这一点，因此如果用户接受了邀请，他们可以选择单击 not_attending div 来取消邀请。

但是，即使用户没有接受邀请，我也希望 not_attending div 保持存在，只是没有链接。

另一个线程中的某个人好心地将我指向了 link_to_if 方法，该方法接受以下形式的参数：

```
link_to_if(condition, name, options = {}, html_options = {}, &block) 
```

这是我正在使用的代码：

```
<%= link_to_if(invite.accepted, "Name I Don't Want", not_attending_path) %>                             
    <div class="not_attending_div">
         not attending
    </div> 
```

那么，有没有办法使用 not_attending div 作为名称参数，类似于如何以以下方式增加 link_to：

```
<%= link_to(users_path) do %>
  <div id="fancydiv">This div is more than just text</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:04:18.250

你可以在我的脑海中通过两种方式做到这一点：

```
<%= link_to(users_path) do %>
  <div id="fancydiv">This div is more than just text</div>
<% end if invite.accepted %> 
```

或者

```
<%= link_to_if(invite.accepted, content_tag(:div, "Some div text", :id => "fancydiv"), not_attending_path) %> 
```

# ruby-on-rails - 在 Rails 中仅在单个邮件程序上注册邮件程序拦截器

> ID：11234099
> 
> 赞同：4
> 
> 时间：2012-06-27T20:07:29.690
> 
> 标签：ruby-on-rails, actionmailer

我正在尝试向我的 Rails 应用程序中的几个邮件程序之一添加一个拦截器。尽管我试图只在一个邮件程序上注册它，但它似乎正在拦截来自两者的电子邮件。这是我如何尝试仅注册一个 Mailer 的一些示例代码。

```
class Mailer1 < ActionMailer::Base; end
class Mailer2 < ActionMailer::Base; end

Mailer1.register_interceptor(MailInterceptor) 
```

是否可以只关注一个邮件？谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-21T13:09:03.207

您可以做的是仅在特定邮件程序上应用拦截器：

```
class SpecificMailerInterceptor
  FILTERED_MAILERS = %w(SpecificMailer)

  def self.delivering_email(message)
    return if deliver?(message)

    message.perform_deliveries = false
  end

  def self.deliver?(message)
    # If you are in the other mailers always deliver message
    return true unless FILTERED_MAILERS.include?(message.delivery_handler.to_s)
    # Apply interceptor logic here       
  end
end 
```

# perl - Perl 写入文件流导致意外的 SIGPIPE 错误

> ID：11234100
> 
> 赞同：2
> 
> 时间：2012-06-27T20:07:32.093
> 
> 标签：perl, file-io, sigpipe

我有以下 perl 代码尝试将字符串写入新创建的文件：

```
open(OUT, ">$file") or die "file out error!\n";
print OUT $string; 
```

通常，此代码可以正常工作。如果我们对 $file 所在的目录没有写权限，程序就会失败，这是意料之中的。但是，不是打印“文件输出错误！” 作为错误消息，程序只是以退出代码 13（权限被拒绝）退出。

1.  当我们无法写入文件时，为什么 open 方法会成功？
2.  在这种情况下，我们如何获得适当的错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:12:12.870

我认为您混淆了程序退出代码及其标准系统系统错误代码的报告。错误代码 ( `errno`) 13 等同于“权限被拒绝”。

```
perl -lE '$!=13;say $!'
Permission denied

perl -lE '$!=32;say $!'
Broken pipe 
```

当然，实际消息可能会因您的操作系统而略有不同。

就此而言，为打开构建错误消息的更好（IMO）方法是：`open OUT，">"，"$file" 或 die "Can't open $file: $!\n" .

# forms - 来自多个类的 Symfony2 表单

> ID：11234103
> 
> 赞同：0
> 
> 时间：2012-06-27T20:07:51.243
> 
> 标签：forms, symfony, upload, doctrine, persist

我有一个类文章，其中包含一系列步骤类，步骤包含多个媒体类。

想法是一篇文章可以包含几个步骤，每个步骤可以包含几个图像。

我需要实现一个表单，以便使用 Doctrine 轻松上传和持久化。

我需要一些关于如何使用 jQuery 上传多个图像的建议，这些图像出现在一篇文章中并与 Doctrine 保持一致。

当我尝试添加到表单时：

```
 ->add('files','file',
        array(
                "label"     => "Files",
                "required"  => FALSE,
                "attr"      => array(
                "accept"    => "image/*",
                "multiple"  => "multiple",
        ) 
```

我收到一个错误：

```
Neither property "files" nor method "getFiles()" nor method "isFiles()" exists in class      "Ift\DesignBundle\Entity\Article" 
```

在实体文章中我有

```
 protected $steps; 
```

这与类步骤（OneToMany）有关。在 Steps 中是一个属性：

```
protected $media; 
```

代表图像并且与 Steps OneToMany 相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:26:40.553

似乎您的私有或受保护财产 $files 没有 setter 和 getter，或者您根本没有此属性

# ruby - 从亚马逊网址获取 ASIN 号

> ID：11234104
> 
> 赞同：1
> 
> 时间：2012-06-27T20:07:52.207
> 
> 标签：ruby, regex, amazon-web-services

给定一个亚马逊产品 URL，可以是

```
http://amazon.com/gp/product/ASIN/*
http://amazon.com/*/dp/ASIN/*
http://amazon.com/dp/ASIN/* 
```

如何从 Ruby 中的 URL 中删除 ASIN 编号？我不擅长写正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:12:12.970

使用应该通过以下方式找到匹配项：

```
scan(/https?:\/\/(?:www\.|)amazon\.com\/(?:gp\/product|[^\/]+\/dp|dp)\/([^\/]+)/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T23:17:07.320

如果您要进行大量 URL 解析，我建议您查看[Addressable::URI](http://addressable.rubyforge.org/api/Addressable/URI.html) gem。它比使用正则表达式解析 URL 更容易维护。也看看它的[模板](http://addressable.rubyforge.org/api/Addressable/Template.html)模块，它就是为此目的而设计的。

查看[可寻址](http://addressable.rubyforge.org/api/)主页上的示例以获取更多信息。

您还可以使用 Ruby 的内置 URI 模块，使用 获取路径`path`，以及简单的字符串拆分和一些逻辑来查看哪个元素具有“ `dp`”，然后获取数组中的下一个元素或“ `gp`”并获取第二个以下元素。

# wpf - 如何使用转换器更改数据模板化 wpf 列表框的字体颜色？

> ID：11234110
> 
> 赞同：1
> 
> 时间：2012-06-27T20:08:26.367
> 
> 标签：wpf, datatemplate, ivalueconverter

我有一个列表框使用的 DataTemplate：

```
<local:BooleanToFontColorConverter x:Key="boolToFontColor" />
<DataTemplate x:Key="ListBox_DataTemplateSpeakStatus">
    <Label Width="Auto">
            <TextBlock Name="MY_TextBlock" Text="Hello!" Foreground="{Binding Path=MY_COLOR, Converter={StaticResource boolToFontColor}}" />
    </Label>
</DataTemplate> 
```

MY_COLOR 是以下代码：

```
 public class Packet_Class : INotifyPropertyChanged
    {
        private bool _my_color = false;
        public bool MY_COLOR { get { return _my_color; } 
                                       set { _my_color = value; RaisePropertyChanged("MY_COLOR"); } }
    } 
```

然后在适当的时候设置属性，我认为它会触发 RaisePropertyChanged 函数

```
 myPacketClass.MY_COLOR = true; 
```

而 boolToFontColor 正在“尝试”使用该位：

```
 public class BooleanToFontColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
                  CultureInfo culture)
    {
        if (value is Boolean)
        {
            return ((bool)value) ? new SolidColorBrush(Colors.Red) : new SolidColorBrush(Colors.Black);
        }

        return new SolidColorBrush(Colors.Black);
    }

    public object ConvertBack(object value, Type targetType, object parameter,
                              CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

当我将 MY_COLOR 的值从 true 更改为 false 时，反之亦然，我在运行时看不到文本前景色的可见变化。有没有人可以就我哪里出错提供建议？非常感谢并提前感谢您。

编辑：

一些额外的信息试图提供更清晰的信息。我在这样的 ListBox 中使用我的 DataTemplate：

```
<ListBox x:Name="MyUserList" ItemTemplate="{StaticResource ListBox_DataTemplateSpeakStatus}"  SelectionMode="Extended" /> 
```

在我的 WPF Window 元素中，我将我的本地命名空间设置为我的 mainwindow.xaml.cs 封装在的命名空间：

```
xmlns:local ="clr-namespace:My_NameSpace" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:28:38.597

RaisePropertyChanged 方法应引发接口中定义的 PropertyChanged 事件，如下所示：

```
public event PropertyChangedEventHandler PropertyChanged;
        protected void RaisePropertyChanged (string propertyName)
        {
            if (this.PropertyChanged != null)
                this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        } 
```

转换器：

```
public class BooleanToFontColorConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter,
              CultureInfo culture)
    {
        if (value is Boolean)
        {
            return ((bool)value) ? new SolidColorBrush(Colors.Red) : new SolidColorBrush(Colors.Black);
        }

        return new SolidColorBrush(Colors.Black);
    }

    public object ConvertBack(object value, Type targetType, object parameter,
                              CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

您必须使用 a`SolidColorBrush`才能使其工作。

它适用于我的环境，如果您遇到任何问题，请告诉我。

# arduino - 无法链接 Arduino 项目以包含 Simulink 代码

> ID：11234111
> 
> 赞同：0
> 
> 时间：2012-06-27T20:08:37.930
> 
> 标签：arduino, simulink, avr-gcc

在工作中，我最近接受了 MATLAB/Simulink 培训，包括可以为嵌入式应用程序生成 C 代码的 Simulink Coder。我想尝试一下，所以我买了一个 Arduino，并投入其中。我能够毫无问题地编写简单的草图，但在尝试集成 Simulink 生成的代码时遇到了障碍。

我最初使用的是 Arduino IDE，然后是带有 Arduino 插件的 Eclipse，最后是带有 embedXcode 模板的 Xcode。（我使用 Simulink 的工作机器是 PC，但我不允许安装“未经授权的软件”，所以我在家里的 Mac 上完成了剩下的工作。）所有三个都使用相同的 avr-gcc 编译器。

这三个都有相同的故障点：生成的函数调用上出现“未定义的引用”错误。我认为这是一个链接器问题，而不是基本语法或标头包含，因为 Eclipse 和 Xcode 代码完成工作正常，如果我以任何方式更改调用签名，错误就会改变。我可以对数据结构进行引用。

据我所知，默认的 makefile 设置为编译和链接文件夹中的任何文件。至少使用 Xcode 创建一个“mass_model2.o”文件。最后，如果我使用简单的函数调用手动编写单独的“myFunction.c”和“MyFunction.h”文件，它会按预期在设备上编译和运行。

`setup()`无奈之下，我复制了生成的“.c”文件的全部内容，并将它们粘贴到我的和函数之后的主草图文件中`loop()`，保持相同的“.h”引用，并从项目中删除了“.c”文件. 这实际上确实编译并运行了！但是，我不应该为了使用它而触摸生成的代码。

我需要做什么才能正确编译和链接？

Simulink 代码非常冗长，因此这里是关键部分：

mass_model2.h 摘录：

```
#include "rtwtypes.h"
#include "mass_model2_types.h"

/* External inputs (root inport signals with auto storage) */
typedef struct {
  int16_T PotPos;                      /* '<Root>/PotPos' */
} ExternalInputs_mass_model2;

/* External outputs (root outports fed by signals with auto storage) */
typedef struct {
  int16_T ServoCmd;                    /* '<Root>/ServoCmd' */
} ExternalOutputs_mass_model2;

/* External inputs (root inport signals with auto storage) */
extern ExternalInputs_mass_model2 mass_model2_U;

/* External outputs (root outports fed by signals with auto storage) */
extern ExternalOutputs_mass_model2 mass_model2_Y;

/* Model entry point functions */
extern void mass_model2_initialize(void);
extern void mass_model2_step(void); 
```

mass_model2.c 摘录：

```
#include "mass_model2.h"
#include "mass_model2_private.h"

/* External inputs (root inport signals with auto storage) */
ExternalInputs_mass_model2 mass_model2_U;

/* External outputs (root outports fed by signals with auto storage) */
ExternalOutputs_mass_model2 mass_model2_Y;

/* Model step function */
void mass_model2_step(void)
{
    // lots of generated code here
}

/* Model initialize function */
void mass_model2_initialize(void)
{
    // generated code here
} 
```

其他引用的标头“rtwtypes.h”和“mass_model2_private.h”定义了生成代码使用的特定类型，例如`int16_T`. 这些文件包含在项目中，我没有收到任何与它们相关的错误。

在我的草图文件中，`setup()`函数调用`mass_model2_initialize()`. `loop()`读取我的输入（电位器），在 中设置值`mass_model2_U.PotPos`，然后调用`mass_model2_step()`. 然后它获取`mass_model2_Y.ServoCmd`并将值写入伺服输出，最后有一个`delay()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:38:01.640

您可以将此下载[http://www.mathworks.com/matlabcentral/fileexchange/24675](http://www.mathworks.com/matlabcentral/fileexchange/24675)与 Simulink、Simulink Coder 和 Embedded Coder 一起使用。确保您拥有每个工具的正确版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T22:05:09.363

主`#include "Arduino.h"`草图上需要声明。

# c# - 通过 WebRequest 将数据和文件上传到 ASP.NET MVC 3 操作

> ID：11234117
> 
> 赞同：0
> 
> 时间：2012-06-27T20:09:03.283
> 
> 标签：c#, asp.net-mvc-3, webrequest

我有一个 ASP.NET MVC 3 控制器操作。该动作定义如下：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Index(string parameter1, HttpPostedFileBase uploadFile)
{
  if (parameter1 == null)
    return Json(new { status = "Error" }, JsonRequestBehavior.AllowGet);

  if (uploadFile.ContentLength == 0)
    return Json(new { status = "Error" }, JsonRequestBehavior.AllowGet);

  return Json(new { status = "Success" }, JsonRequestBehavior.AllowGet);
} 
```

我需要通过 C# 应用程序上传到此端点。目前，我正在使用以下内容：

```
public void Upload()
{
  WebRequest request = HttpWebRequest.Create("http://www.mydomain.com/myendpoint");
  request.Method = "POST";
  request.ContentType = "multipart/form-data";
  request.BeginGetRequestStream(new AsyncCallback(UploadBeginGetRequestStreamCallBack), request);
}

private void UploadBeginGetRequestStreamCallBack(IAsyncResult ar)
{
  string json = "{\"parameter1\":\"test\"}";

  HttpWebRequest webRequest = (HttpWebRequest)(ar.AsyncState);
  using (Stream postStream = webRequest.EndGetRequestStream(ar))
  {
    byte[] byteArray = Encoding.UTF8.GetBytes(json);
    postStream.Write(byteArray, 0, byteArray.Length);
    postStream.Close();
  }
  webRequest.BeginGetResponse(new AsyncCallback(Upload_Completed), webRequest);
}

private void Upload_Completed(IAsyncResult result)
{
  WebRequest request = (WebRequest)(result.AsyncState);
  WebResponse response = request.EndGetResponse(result);
  // Parse response
} 
```

虽然我得到 200，但状态始终是“错误”。进一步挖掘后，我注意到 parameter1 始终为空。我有点困惑。有人可以告诉我如何通过 WebRequest 以编程方式发送参数 1 的数据以及代码中的文件吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T02:35:35.830

哥们，这个难度很大！

我真的试图找到一种以编程方式将文件上传到 MVC 操作的方法，但我做不到，对不起。我找到的解决方案将文件转换为字节数组并将其序列化为字符串。

来，看看吧。

这是您的**控制器操作**：

```
 [AcceptVerbs(HttpVerbs.Post)]
            public ActionResult uploadFile(string fileName, string fileBytes)
            {
                if (string.IsNullOrEmpty(fileName) || string.IsNullOrEmpty(fileBytes))
                    return Json(new { status = "Error" }, JsonRequestBehavior.AllowGet);

                string[] byteToConvert = fileBytes.Split('.');
                List<byte> fileBytesList = new List<byte>();
    byteToConvert.ToList<string>()
            .Where(x => !string.IsNullOrEmpty(x))
            .ToList<string>()
            .ForEach(x => fileBytesList.Add(Convert.ToByte(x)));

                //Now you can save the bytes list to a file

                return Json(new { status = "Success" }, JsonRequestBehavior.AllowGet);
            } 
```

这是**客户端代码（发布文件）**：

```
public void Upload()
        {
            WebRequest request = HttpWebRequest.Create("http://localhost:7267/Search/uploadFile");
            request.Method = "POST";
            //This is important, MVC uses the content-type to discover the action parameters
            request.ContentType = "application/x-www-form-urlencoded";

            byte[] fileBytes = System.IO.File.ReadAllBytes(@"C:\myFile.jpg");

            StringBuilder serializedBytes = new StringBuilder();

            //Let's serialize the bytes of your file
            fileBytes.ToList<byte>().ForEach(x => serializedBytes.AppendFormat("{0}.", Convert.ToUInt32(x)));

            string postParameters = String.Format("fileName={0}&fileBytes={1}", "myFile.jpg", serializedBytes.ToString());

            byte[] postData = Encoding.UTF8.GetBytes(postParameters);

            using (Stream postStream = request.GetRequestStream())
            {
                postStream.Write(postData, 0, postData.Length);
                postStream.Close();
            }

            request.BeginGetResponse(new AsyncCallback(Upload_Completed), request);
        }

        private void Upload_Completed(IAsyncResult result)
        {
            WebRequest request = (WebRequest)(result.AsyncState);
            WebResponse response = request.EndGetResponse(result);
            // Parse response
        } 
```

[Hanselman 有一篇](http://www.hanselman.com/blog/ABackToBasicsCaseStudyImplementingHTTPFileUploadWithASPNETMVCIncludingTestsAndMocks.aspx)关于从 Web 界面上传文件的好帖子，这不是你的情况。

如果您需要帮助将字节数组转换回文件，请查看此线程：[Can a Byte[] Array be write to a file in C#?](https://stackoverflow.com/questions/381508/can-a-byte-array-be-written-to-a-file-in-c)

希望这可以帮助。

如果有人有更好的解决方案，我想看看它。

问候， 卡里尔

# ruby-on-rails-3 - 如何在 Rails 中集成 facebook 评论？

> ID：11234121
> 
> 赞同：0
> 
> 时间：2012-06-27T20:09:21.610
> 
> 标签：ruby-on-rails-3, facebook-comments

我想在我的 rails 博客应用程序中添加 facebook 评论。有没有办法这样做并在我的本地主机上测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:16:26.117

要使用 Facebook 评论，只需在您的视图中添加标签。
为了在我的开发环境中测试 facebook 应用程序集成，我在 facebook 应用程序配置选项中使用了 localhost:3000 的 127.0.0.1:3000 insted。

# objective-c - 就 C# 开发人员可以理解的而言，@selector 指令是什么？

> ID：11234127
> 
> 赞同：1
> 
> 时间：2012-06-27T20:09:44.137
> 
> 标签：objective-c, ios

在这里使用[选择器](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)的目的是什么？

`CADisplayLink* displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(render:)];`

[来源：](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)来自初学者 OpenGL es 2.0 网站的代码

我读了定义

> @selector() 指令允许您引用已编译的选择器，而不是完整的方法名称。

不幸的是，这并没有让我明白。我的专长是 C#。因此，如果您能将答案与如何在 C# 中实现类似的解决方案联系起来，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T20:23:18.350

选择器声明函数的名称。而已。它与反射类非常相似[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)，但使用起来要简单得多。

C# 和 Objective-C 的比较：注意 C# 代码可能有点偏离，因为我已经很长时间没有使用它了

```
// C#
using namespace system.reflection;

class someClass {
     void someMethod(object input) {
           string methodName = "doSomething";

           input.getType().getMethod(methodName).invoke(input, new Object[] { });
     }
}

// OBJC
@implementation someClass 

-(void) someMethod:(id) input
{
     SEL methodName = @selector(doSomething);

     [input performSelector:methodName];
}

@end 
```

就 a 的内部`SEL`结构而言，它`C-string`已被放入私有映射中以提高运行时的查找速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:16:58.753

这里有两个链接可以很好地解释它们。第一个是 Apple 关于选择器的文档，第二个是关于选择器、委托和块（相对较新）之间的区别。

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)

[http://bradcupit.tumblr.com/post/3431169229/ios-blocks-vs-selectors-and-delegates](http://bradcupit.tumblr.com/post/3431169229/ios-blocks-vs-selectors-and-delegates)

编辑：

哦，不是 C#，但如果你熟悉 javaScript 之类的，选择器类似于回调。同样，第二篇文章有助于解释用途/相似之处/差异。

# regex - 如何使用正则表达式查找字符串中相同后续字符的出现？

> ID：11234134
> 
> 赞同：2
> 
> 时间：2012-06-27T20:10:25.773
> 
> 标签：regex

如何使用正则表达式或函数在字符串中找到相同后续字符的出现？

例子：

> 我是 l​<strong>ee​t，我有一个 thr​<strong>ee​pi​<strong>zz​as。那里的 n​<strong>oo​b 只有一个 pi​<strong>zz​a。P​<strong>oo​r 男孩。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:13:32.173

您可以使用[反向引用](http://www.regular-expressions.info/brackets.html#usebackrefinregex)：

```
/(.)\1/ 
```

如果要查找长度为 2 或以上的序列，请更改`\1`为。`\1+`

请注意，语法可能会因您使用的正则表达式引擎而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:16:19.800

这应该工作...... `(.)\1+`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:14:16.610

不确定您正在使用哪个版本的正则表达式，但对于`egrep`，这有效：

```
egrep '(.)\1' < file 
```

这将显示所有连续有两个字符的行。如果你只想要字母：

```
egrep `([A-Za-z])\1' < file 
```

会工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:15:10.033

谷歌它：'双字符正则表达式'

这是我用你的正则表达式重新制作的：[http ://refiddle.com/2fa](http://refiddle.com/2fa)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T20:13:57.150

像这样的 perl 口味。`\w`匹配一个单词字符，并`\2`匹配第二个括号。

```
m/((\w)\2+)/g 
```

# ruby - 编写多行懒惰计算方法的ruby方法是什么？

> ID：11234142
> 
> 赞同：2
> 
> 时间：2012-06-27T20:11:18.443
> 
> 标签：ruby

我认为我可能不会以最红宝石的方式编写延迟实例化的方法/属性。以这种方法为例：

```
def tax
  @tax ||= Proc.new do
    if flat_tax > commission_plan.tax_max
      return commission_plan.tax_max
    end if commission_plan.tax_max
    if flat_tax < commission_plan.tax_min
      return commission_plan.tax_min
    end if commission_plan.tax_min
    flat_tax
  end.call
end 
```

有没有更类似于 ruby​​ 的方式来重构这个方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T20:38:58.047

```
def tax
  @tax ||= calc_tax
end

private

def calc_tax
  min, max = commission_plan.tax_min, commission_plan.tax_max
  if (min..max).include? flat_tax
    flat_tax
  else
    flat_tax > max ? max : min
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:33:11.197

你问的是什么叫做记忆。正如 Yuri 建议的那样，为此使用 Proc 很尴尬。

这是我的快速重构。我可能仍会进一步重构它......但它是一个更简单的重构，它更像是 Ruby 风格。

```
def tax
  @tax ||= calculate_tax
end

def calculate_tax
  if commission_plan.tax_max && flat_tax > commission_plan.tax_max
    commission_plan.tax_max
  elsif commission_plan.tax_min && flat_tax < commission_plan.tax_min
    commission_plan.tax_min
  else 
    flat_tax
  end
end 
```

此外，如果您不介意包含一些外部依赖项，请查看[ActiveSupport::Memoizable](http://api.rubyonrails.org/classes/ActiveSupport/Memoizable.html)。这是一篇关于[记忆](http://rails-bestpractices.com/posts/59-use-memoization)的文章。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T20:52:35.560

如果您不想将依赖项添加到外部库，您可以轻松添加自己的“memoize”助手。类似于以下内容：

```
class Class
  def memoize(method)
    original_method = instance_method(method)
    instance_var = "@__#{method}__".to_sym
    define_method(method) do |*a,&b|
      cached = instance_variable_get(instance_var)
      unless cached
        cached = old_method.bind(self).call(*a,&b)
        instance_variable_set(instance_var, cached)
      end
      cached
    end
  end
end 
```

然后用法如下：

```
def tax
  # expensive calculation here
end
memoize :tax 
```

如果你不喜欢这个`memoize`界面，你可以把它改成你喜欢的。这是鲁比，宝贝！你可以像泡泡糖一样扭曲、弯曲和拉伸的语言。也许这样的界面会很好：

```
def_memoized :tax do
  # expensive calculation here
end 
```

我喜欢将每个项目对核心 Ruby 的扩展放在一个名为`lib/core_extensions.rb`. 这就是那种会进去的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T20:23:04.793

我不明白你为什么要创建这个匿名函数。这是……多余的。这是一个更好更干净的代码：

```
def tax
    return commission_plan.tax_max if commission_plan.tax_max &&
        flat_tax > commission_plan.tax_max
    return commission_plan.tax_min if commission_plan.tax_min &&
        flat_tax > commission_plan.tax_min
    return flat_tax
end 
```

还有其他实现它的方法，但与你所拥有的相比，这是一个很大的改进。

# objective-c - 解析 XML 并将数据存储到 NSMuttableArray

> ID：11234147
> 
> 赞同：-2
> 
> 时间：2012-06-27T20:11:49.823
> 
> 标签：objective-c, xml, xcode, arrays, nsmutablearray

> **可能重复：**
> [将 XML 数据解析为 NSMutableArray iOS - iPhone](https://stackoverflow.com/questions/9884702/parsing-xml-data-to-nsmutablearray-ios-iphone)

```
<ForecastResult>
<Forecast>
<Date>2012-06-27T00:00:00</Date>
<WeatherID>4</WeatherID>
<Desciption>Sunny</Desciption>
<Temperatures>
<MorningLow/>
<DaytimeHigh>100</DaytimeHigh>
</Temperatures>
<ProbabilityOfPrecipiation>
<Nighttime/>
<Daytime>00</Daytime>
</ProbabilityOfPrecipiation>
</Forecast>
<Forecast>
<Date>2012-06-28T00:00:00</Date>
<WeatherID>4</WeatherID>
<Desciption>Sunny</Desciption>
<Temperatures>
<MorningLow>74</MorningLow>
<DaytimeHigh>95</DaytimeHigh>
</Temperatures>
<ProbabilityOfPrecipiation>
<Nighttime>10</Nighttime>
<Daytime>00</Daytime>
</ProbabilityOfPrecipiation>
</Forecast> 
```

以上是我的 XML 文件，我想将 Date 和 DaytimeHigh 读入 NSMuttableArray。我正在使用 NSXML 解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:42:24.660

你`categList`在我说的问题中问的是重复的。你不应该关注问题，而应该关注答案。该问题的答案建议您使用[XMLReader](http://troybrant.net/blog/2010/09/simple-xml-to-nsdictionary-converter/)，它允许将 XML 轻松解析为 NSDictionary 对象。然后你可以将字典对象传递给 NSArray。有关如何使用 XMLReader 的详细说明，请访问上面的链接页面。下面是如何将 NSDictionary 值传递给 NSMutableArray：

```
NSMutableArray *arrayFromDictionary = [dictionaryWithXMLData allValues]; 
```

希望这可以帮助！

# php - 表单收集错误

> ID：11234149
> 
> 赞同：8
> 
> 时间：2012-06-27T20:11:58.007
> 
> 标签：php, symfony, symfony-forms

我正在尝试采用一种表单类型并显示它，但是我需要用户一次上传补丁上传。所以说要上传 30 个文件，页面上有 30 个表单。我收到此错误：

> 表单的视图数据应为标量、数组或 \ArrayAccess 的实例类型，但它是 MS\CoreBundle\Entity\Photo 类的实例。您可以通过将“data_class”选项设置为“MS\CoreBundle\Entity\Photo”或添加一个视图转换器来将 MS\CoreBundle\Entity\Photo 的实例转换为标量、数组或 \数组访问。

画廊类型代码是：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('photo', 'collection', array(
        'type' => new PhotoType(),
        'allow_add' => true,
        'data_class' => 'MS\CoreBundle\Entity\Photo',
        'prototype' => true,
        'by_reference' => false,
    ));
} 
```

照片类型代码是：

```
public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('description', 'text', array('label' => "Title:", 'required' => true))
                ->add('File')
                ->add('album', 'entity', array(
                    'class' => 'MSCoreBundle:Album',
                    'property' => 'title',
                    'required' => true,
                    'query_builder' => function(EntityRepository $er)
                    {
                        return $er->createQueryBuilder('a')
                            ->orderBy('a.title', 'ASC');
                    },
                ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'MS\CoreBundle\Entity\Photo',
        ));
    } 
```

我的控制器功能是：

```
 public function newAction($count)
        {
            for($i = 1; $i <= $count; $i++) {
                $entity = new Photo();
            }

            $form = $this->container->get('ms_core.gallery.form');
            $form->setData($entity);

            return array(
                'entity' => $entity,
                'form' => $form->createView()
            );

  } 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T20:17:15.010

您不应该将`data_class`选项传递给 GalleryType 中的[集合类型](http://symfony.com/doc/master/reference/forms/types/collection.html)。或者，如果您确实想覆盖 PhotoType 的默认值（已设置，因此您不必这样做），您可以在 options 数组中指定它，如下所示：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('photo', 'collection', array(
        'type' => new PhotoType(),
        'allow_add' => true,
        'options' => array('data_class' => 'MS\CoreBundle\Entity\Photo'),
        'prototype' => true,
        'by_reference' => false,
    ));
} 
```

确保您**在**“GalleryType”中设置了默认`data_class`选项，它似乎应该是专辑。

此外，在您的控制器中，您没有正确创建表单。您需要`setData()`使用表单的数据类型进行调用，在本例中为相册。

```
public function newAction($count)
{
        $album = new Album();
        for($i = 1; $i <= $count; $i++) {
            $album->addPhoto(new Photo());
        }

        $form = $this->container->get('ms_core.gallery.form');
        $form->setData($album);

        return array(
            'entity' => $album,
            'form' => $form->createView()
        );
} 
```

# mysql - 是否可以从 php/mysql 查询中将多个单元格返回到单个单元格中？

> ID：11234155
> 
> 赞同：1
> 
> 时间：2012-06-27T20:12:11.313
> 
> 标签：mysql, datatables

我正在为我们的知识库构建一个简单的搜索表（最终使用 jquery Datatables）。我能够返回我需要的所有信息，但是当一行链接到我们的多个产品时，我会得到“重复”的行。

例如，解决方案# 377 与我们数据库中的产品 1、产品 2 和产品 3 相关。当我运行查询时，我得到以下结果：

```
ID          Product          Description
377          Product1         Description xyz
377          Product2         Description xyz
377          Product3         Description xyz 
```

三行之间的唯一区别是“产品”列。有没有办法将此数据返回为：

```
ID                Product                   Description
377      Product1, Product2, Product3       Description xyz 
```

我的查询：

```
select kb.kbarticleid as ID,
kbc.title as Product,
kb.subject as Subject, 
kbd.contentstext as Contents 
from swkbarticles kb 

inner join swkbarticledata kbd on kb.kbarticleid = kbd.kbarticleid
inner join swkbarticlelinks kbl on kb.kbarticleid = kbl.kbarticleid
inner join swkbcategories kbc on kbl.linktypeid = kbc.kbcategoryid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:15:27.787

我接受了您的查询，将其放入子查询中，将所有产品收集为 CSV 字符串，然后运行 ​​GROUP BY

```
SELECT ID,GROUP_CONCAT(Product) Product,Description
FROM
(
    select kb.kbarticleid as ID,
    kbc.title as Product,
    kb.subject as Description, 
    kbd.contentstext as Contents 
    from swkbarticles kb 
    inner join swkbarticledata kbd on kb.kbarticleid = kbd.kbarticleid
    inner join swkbarticlelinks kbl on kb.kbarticleid = kbl.kbarticleid
    inner join swkbcategories kbc on kbl.linktypeid = kbc.kbcategoryid
) A GROUP BY ID,Description; 
```

我对我的快速而肮脏的回答没有任何要求。我不知道主题是描述还是哪个表有描述列。

假设您的查询有效，我将其设为子查询并仅返回 ID、描述和产品。然后我取这三列并调用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)函数。该功能将合并所有共享相同 GROUP BY 元素的产品。

原则上，这将产生您要求的 ID 377 的输出。

# php - 我们如何仅在服务器的数据库中选择某些列并制作 csv 文件或 excel？

> ID：11234161
> 
> 赞同：0
> 
> 时间：2012-06-27T20:12:49.983
> 
> 标签：php, mysql, sql, database

我有一个包含许多表的数据库，并且一个特定的表具有列：

1.  姓名
2.  电子邮件
3.  不：
4.  地址
5.  开始日期（也包括时间）
6.  end_date（也包括时间）
7.  ID

我只需要选择满足以下条件的人的姓名和电子邮件地址：

1.  他在列表中出现了两次
2.  字段 Start_date 和 end_date 中的时间差必须为 10+分钟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:19:53.563

在 mysql 中，您需要一个子查询：

```
select t.*
from t join
     (select name, email, count(*) as cnt
      from t
      where time_to_sec(timediff(start_date, end_date)) > 10*60
      group by name, email
      having count(*) > 1
     ) dups
     on t.name = dups.name and t.email = dups.email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:31:53.373

您可以像这样将表格连接到自身上：

```
SELECT `a`.`name`, `a`.`email`
FROM `table_name` `a`
JOIN `table_name` `b` ON
  (`a`.`name` = `b`.`name` OR `a`.`email` = `b`.`email`)
  AND `a`.`id` != `b`.`id`
  AND `a`.`end_date` < DATE_ADD(`a`.`start_date`, INTERVAL 10 MINUTE)
GROUP BY `a`.`name` 
```

[例子](http://sqlfiddle.com/#!2/4f1d6/5)

在循环结果时，您可以使用[`fputcsv()`](http://php.net/manual/en/function.fputcsv.php).

# mysql - 标准化，困惑

> ID：11234162
> 
> 赞同：2
> 
> 时间：2012-06-27T20:12:59.647
> 
> 标签：mysql, database

我正在尝试将规范化纳入我的数据库设计中，互联网上的一些解释让我有些困惑 - 我不确定我是否朝着正确的方向前进？

到目前为止，我有：

用户：

```
id 
username 
password 
```

用户配置文件设置：

```
id 
userid 
active 
dateofreg 
```

用户业务信息：

```
id 
userid 
businessname 
tags 
```

联系方式：

```
id 
userid 
address 
postcode 
email 
tel 
```

分类标签：

```
id 
userid 
services 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:17:50.363

address 将获得一个自己的表

```
contactinfo
==========
id
userid
idaddress
postcode
email
tel

address
==========
idaddress
street
houseNumber
postalCode
city
country 
```

...

良好的基础知识：[http ://databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:22:26.890

```
**userbusinessinfo**
id
userid
businessname
tags 
```

标签包含什么？这听起来像是不止一个值，在这种情况下你应该有一个`UserBusinessInfoTags`表。为了清晰起见，您还应该对字段使用驼峰式大小写，对表名使用正确的大小写。

```
**UserBusinessInfoTags**
id
userBusinessInfo_id
tag 
```

`UserProfileSettings`持有什么？如果它与用户是一对一的关系，则该表可以与用户合并。

`ContactInfo`可以拆分出来。用户是否允许拥有多个地址、多个电子邮件和多个电话号码？每个人都应该有自己的表他们。如果没有，请将其与`Users`. 例如，如果他们可以有多个电话号码和地址，但不能有电子邮件，它看起来像。

```
**Users**
id
username
password
email

**UserAddresses**
id
userId
addressLine1
addressLine2
city
state
zipCode
country

**UserPhoneNumbers**
id
userId
phoneNumber
phoneNumberType 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:26:19.587

规范化是关于减少存储特定数据的次数。规范化可能会走得太远，因为数据库规范化程度越高，性能就越差。

在平面文件与完全规范化的极端情况下，您将从一个 sql 命中获得一条记录，而从其他表中获得 10 条或 20 条甚至更多的记录。

您标准化的程度（第三种范式是理想的 IMO，但其他人会不同意）完全取决于应用程序及其复杂性。

除了@duffy356 指出的地址之外，我会说你说得对。

# flash - 将外部文本文件加载到 Flash - URL 未加载

> ID：11234165
> 
> 赞同：0
> 
> 时间：2012-06-27T20:13:14.543
> 
> 标签：flash, actionscript, flashdevelop, loadvars

**Flash 动作脚本**

myData = new LoadVars();

myData.onLoad = 函数（） {

myText_txt.text = this.myVariable;

};

myData.load("http://www.myserver.com/test/myText.txt");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:19:36.623

您是否偶然对服务器上的 crossdomain.xml 文件进行了失败的 (http404) 调用？查看： http: [//kb2.adobe.com/cps/142/tn_14213.html](http://kb2.adobe.com/cps/142/tn_14213.html)

# jquery - jQuery 自动完成功能无法正常工作

> ID：11234170
> 
> 赞同：1
> 
> 时间：2012-06-27T20:13:45.403
> 
> 标签：jquery, jquery-ui, autocomplete

我在我的网站上使用了多个自动完成框。盒子里装满了动态字符串数组，所以我没有使用服务器。所有信息都是本地的。这是我的一些代码：

```
<script>
var availableMaps = new Array();
var availableLayers = new Array();
var availablePlaces = new Array();
</script> 
```

以上是我的索引页面的顶部

```
<div class="ui-widget">
    <label for="mapTags">Search: </label>
    <input id="mapTags">
</div> 
```

以上是我的索引页的正文

```
for(var i = 0; i < mapContainer.length; i++)
{
    availableMaps[i] = mapContainer[i].name;
}
$( "#mapTags" ).autocomplete({
        source: availableMaps
}); 
```

这段代码可以在页面加载时运行的 js 函数中找到。它不在`$(document).ready`函数中运行。而且我知道 availableMaps 数组充满了字符串值。

自动完成功能确实有点作用，因为如果我在输入字段中输入字母或单词，我可以按下向下箭头，并且项目会显示在字段中，就像自动完成工作一样。唯一的问题是我没有得到带有值可供选择的小下拉菜单。所以我需要的只是让下拉菜单显示出来。输入字段下方还有其他内容，所以下拉菜单可以隐藏在其他内容后面吗？似乎不太可能。我需要在`$(document).ready`函数中有这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:25:01.983

是的，您需要将`$("#mapTags").autocomplete...`部分放在`$(document).ready`函数内部以确保 jQuery 已加载，否则`$`将是未定义的并且您的自动完成将无法设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T21:47:06.950

对于仍然关心的人，我不得不将 z-index 增加到 100000000000 之类的东西。在我之前编写部分系统的那个人显然已经设置了一个非常大的 z-index。至少现在我知道你可以有一个大于 100 的 z-index。

迈克希尼

# internet-explorer - 将 BASE 元素用于在 IE8 标准模式下在 IE8 中呈现的本地 html 文件时缺少样式表/脚本/图像

> ID：11234172
> 
> 赞同：5
> 
> 时间：2012-06-27T20:13:49.707
> 
> 标签：internet-explorer, internet-explorer-8, ie8-browser-mode

我们有一些 HTML 页面（本地的，而不是 Web 服务器上的），它们使用 BASE 元素来识别包含一堆常见样式表和图像的特定基本目录。下面是一个例子（页面存放在c:\temp\html\test.html，资源目录是c:\temp\resources）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <base href="file:///c:/temp/resources/"></base>
    </head>
    <body>
        <p><img src="image.jpg" /></p>
    </body>
</html> 
```

这在我测试过的所有当前浏览器（Firefox、Chrome、IE9）中运行良好，并且在 Quirks 模式下的 IE8 中运行良好。但是在 IE8 标准模式下运行的 IE8 中（此页面的默认值 - 在实际页面中是必需的模式），任何样式表、脚本或图像引用都被破坏了 - 就好像元素被完全忽略了一样。

我已经尝试过元素的其他变体 -`<base href="file:///c:/temp/resources/">`或者`<base href="file:///c:/temp/resources/"/>`各种不同的文件 url，例如 file:///c:/temp/resources/test.html 等，以及基础的相对 href，但似乎没有说服图像/样式表/脚本加载。

我知道上面的例子似乎微不足道，但在我们的实际场景中，我们必须在 IE8 标准模式下加载 IE8 中的页面，并且必须设置一个特定的，所以我真的想找出一个解决方案，如果有的话。

我确实在早期的 IE8 版本中找到了一些与该元素相关的错误的引用，但它们在很久以前就被标记为修复，我正在一个干净的 Windows 7 VM 上测试这个并应用了所有 IE8 更新。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-07T04:15:44.123

**状态更新：**   使用：**`<base href="\\c:\temp\resources\" />`**

这是我在创建此解决方案时使用的过程，以允许**IE8**将**基本属性**用于本地文件。

***澄清一下：***这个[**经过W3C**](http://validator.w3.org/#validate_by_input)验证的解决方案适用于**IE7、IE8**和所有**现代浏览器**！

**参考截图：**：
在这里你可以看到***IE8地址栏***不像其他现代浏览器那样操作：斜杠***颠倒***并且没有`file:// /` 协议可见。但是，**IE8** 会在页面刷新时在**浏览器的状态栏** 中显示 `file:///` 协议！

![在此处输入图像描述](../Images/695618d27a00d483d51777dbcecbb368.png)

**参考截图：**
由于**IE8**对本地文件的处理方式不同，因此了解**IE8**协议`file:///`很重要。

要了解可用的语法方法，查看**本地 Intranet的****Internet 选项（安全选项卡）**将为我们提供该信息。这里实际上没有进行任何更改，请仅使用语法：

 **![在此处输入图像描述](../Images/0b790440ee26ab705d098924d2c9f8ca.png)

在上图中，***本地 Intranet 窗口***确认需要反斜杠。

此外，它表明该`file:\\`协议与此***斜杠***语法相关联。由于**IE8****`file:///`**自动隐含了协议（*之前提到过：请参阅浏览器的状态栏并注意斜线呈现正确！！*）。在标签中 定义这个协议是个问题。解决方案是**不使用协议**！ ***`file:``Base`***

 *******参考链接 1：** [**无协议 URL 方案：**](http://encosia.com/cripple-the-google-cdns-caching-with-a-single-character/)
> 是不完全是简单的阅读，但 [**第 4.2 节 RFC 3986**][3] 为完全限定的 URL 提供了 > 完全省略协议（HTTP 或 HTTPS） >。当省略 URL 的协议时，浏览器将使用 > 底层文档的协议。
**参考链接 2：** [**了解 Paul Irish 的网络路径参考：**](http://paulirish.com/2010/the-protocol-relative-url/)

> *当然，如果您在本地查看文件，它会尝试使用`file://`协议请求文件。

上面的参考资料解释了使用 `//` 将允许任何浏览器在访问文件或资产时使用当前已知的 **URL Scheme**。由于 **IE8** 改变了游戏规则，使用 **`\\`** 而不是 `//` 将适用于 Base 标签，因为所有浏览器都会将其转换/解释为标准的 `file:///` URL Scheme（*隐含本地文件*），包括浏览器**IE7**！
**完整的 HTML 标记 | 工作演示：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Using Base Tag with Local Files IE8 and Modern Browser DEMO</title>

  <!-- The name of this file is:  test.html  -->
  <!-- The location of this HTML file on the hard drive is:  C:\temp\html\test.html  -->

  <!-- This unusually constructed Base attribute tag uses two rules to have it work for Locally Hosted IE8 Files that are not server based. -->
  <!-- First, the "URL Scheme" is based on "Network Path Reference" which means no Protocol is used. -->
  <!-- Second, the "forward slashes" are changed to "back slashes". It's the syntax IE8 actually expects. -->
  <!-- This entire method is also friendly for modern browsers showing these local files that are not server based. -->
  <base href="\\c:\temp\resources\" />

</head>
<body>

  <p>
    <!-- The location of this "image.jpg" on the hard drive is at:  C:\temp\resources\image.jpg  -->
    <img src="image.jpg" alt="image" />
  </p>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T00:29:35.520

不幸的是，看起来 IE8 的标准模式不处理 BASE 元素中的 file:// URI。

如果您可以在本地页面中运行脚本，我建议您使用一些简单的 javascript 来遍历所有外部元素（SCRIPT、IMG、LINK、IFRAME、FRAME）并修复任何无方案的 URI（那些不't contains "://") 使用您想要的 BASE。*******

# pointers - Java / JNI / SWIG：如何取回指针传递的长值？

> ID：11234176
> 
> 赞同：0
> 
> 时间：2012-06-27T20:14:05.630
> 
> 标签：pointers, java-native-interface, swig, long-integer

我正在使用 SWIG 生成的代码将我的 Java 代码连接到 C DLL。Java代码的调用有效，函数被调用并且返回值正确，但是指针传递的long的值（这是函数给出的真实数据）一旦到达Java代码就丢失了。

由于函数原型是非常基本的 C 语言，我希望它能够工作，但事实并非如此。

你知道我应该改变什么吗？

谢谢你。

DLL函数原型：

```
long viOpenDefaultRM (unsigned long * vi); 
```

SWIG 生成的 C 代码：

```
SWIGEXPORT jint JNICALL Java_visa_1javaJNI_viOpenDefaultRM(JNIEnv *jenv, 
                                                  jclass jcls, jlong jarg1) {
  jint jresult = 0 ;
  unsigned long *arg1 = (unsigned long *) 0 ;
  long result;

  (void)jenv;
  (void)jcls;
  arg1 = *(unsigned long **)&jarg1; 
  result = (long)viOpenDefaultRM(arg1);
  jresult = (jint)result; 
  printf("C: jarg1 = %d\n", jarg1);    // added for debug
  return jresult;
} 
```

调用本机方法的 Java 代码：

```
SWIGTYPE_p_unsigned_long defaultRM = new SWIGTYPE_p_unsigned_long();
int status = visa_java.viOpenDefaultRM(defaultRM);
System.out.println("defaultRM = " + SWIGTYPE_p_unsigned_long.getCPtr(defaultRM)); 
```

终端输出：

```
C: jarg1 = 79348104
defaultRM = 0 
```

问题：**defaultRM 应该等于 jarg1**

# scala - scala 代码函数式编程改头换面：从 List[List[myClass.toString]] 结构中提取字符串

> ID：11234180
> 
> 赞同：2
> 
> 时间：2012-06-27T20:14:46.790
> 
> 标签：scala, functional-programming, iteration

请告诉我如何以`toString`功能方式重写。

代码还可以，但没什么值得骄傲的，里面有 3 个临时变量。

```
class Field(x: Int, y: Int) {
  val value = init(x,y)
  private def init(x: Int, y: Int) = List.fill(x,y)(new Cell)
  override def toString(): String = {
    val temp = new StringBuilder
    for(i <- value) {
      for(j <- i) {
        temp.append(j.toString())
      }
      temp.append("\n")
    }
    temp.mkString
  }
} 
```

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:22:57.507

这个怎么样（*看马！一行*）：

```
override def toString() = value.map(_.mkString).mkString("\n") 
```

有时它让我害怕 Scala 代码的紧凑程度......

* * *

顺便说一句，如果您不需要重用`init()`方法，您可以简单地说：

```
val value = List.fill(x,y)(new Cell) 
```

# opengl - 核心视频 - displaylink 我需要帮助解释 CVTimeStamp

> ID：11234181
> 
> 赞同：5
> 
> 时间：2012-06-27T20:14:47.600
> 
> 标签：opengl, quicktime, core-video, .mov

核心视频专家，我正在为 .mov 文件创建自定义视频播放器。我有 .mov 解析器工作并使用我正在尝试播放视频的 QTCoreVideo101 示例。

我遇到的问题是显示链接 getFrameForTime 我不知道如何使用时间值来找到正确的帧。

CVTimeStamp 中包含的值对我来说没有任何意义。下面是为 1 秒视频请求的值的示例。谁能解释我如何使用这些值在 .mov 文件中找到正确的帧？

前三个请求 - CVTimeStamp 的值

1.  视频时间：489150134353920.000000 主机时间：2026048145326080.000000 视频时间刻度：241500000.000000 速率标量：1.000000 视频刷新周期：4028320.000000

2.  video Time: 489150201462784.000000 hostTime: 2026048279543808.000000 videoTimeScale: 241500000.000000 rateScalar: 0.999985 videoRefreshPeriod: 4028320.000000

3.  video Time: 489156643913728.000000 hostTime: 2026074988871680.000000 videoTimeScale: 241500000.000000 rateScalar: 1.000000 videoRefreshPeriod: 4028320.000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T01:47:09.990

`CVTimeStamp`s 在[CVTimeStamp 参考文档](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CVTimeRef/Reference/reference.html)中进行了解释。`videoTimeScale`是一秒被划分的单位数。因此，对于 30 fps 视频，它至少需要为 30（尽管它可以是 30 - 60、120、30000 等的任意倍数）。`videoTime`是当前帧（或场）开始的时间刻度中的时间。因此，如果您的时基是 30000，并且您在第 15 帧，那么您`videoTimeScale`将是 30000，您`videoTime`将是 15000。

您可以通过检查该`smpteTime`字段并查看它是否符合您的预期来检查您是否正确解释了该值。在上面的示例中，它将是 0 小时、0 分钟、0 秒、15 帧（或 00:00:00:15）。

您是否有理由只使用操作系统的内置视频解码功能？

# php - 当 mod_rewrite 将 .html 重写为 .php 时，$_GET 变量会消失

> ID：11234188
> 
> 赞同：2
> 
> 时间：2012-06-27T20:15:20.170
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

我正在使用 mod_rewrite 将 .html 重写为 .php。

```
RewriteRule ^([0-9a-zA-Z-_]+)\.html$ index.php?p=$1 [L] 
```

但是，我在 URL 中使用 $_GET 时遇到了问题。如果请求的 URL 采用以下格式，则可以正常工作：`index.php?a=f1`

但是，如果将其重写为`home.html?a=f1`，则没有。

假设它只是浏览器在点击 .html 后停止读取。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T20:18:20.410

您需要添加[`QSA`](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_qsa)标志：

```
RewriteRule ^([0-9a-zA-Z-_]+)\.html$ index.php?p=$1 [QSA,L] 
```

原因在文档中得到了最好的解释：

> 当替换 URI 包含查询字符串时，RewriteRule 的默认行为是丢弃现有的查询字符串，并将其替换为新生成的查询字符串。使用 [QSA] 标志会合并查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:16:57.507

你必须打电话`home.htm&a=f1`

隐藏的网址是：`index.php?p=home&a=f1`

# .net - 解析 .NET 代码以调用树

> ID：11234193
> 
> 赞同：1
> 
> 时间：2012-06-27T20:15:49.143
> 
> 标签：.net, codedom

我有很多程序具有相同或相似名称的函数，我一直在将它们移到库中。我没有使用任何代码签入软件，只是每个项目的子文件夹。我一直在使用纯文本文件搜索来查找具有这些库函数的文件。

我可以编写一个程序来读取这些行并编译“FUNCTION”定义名称的列表。我想知道是否有办法使用 System.CodeDom 的 CompileAssemblyFromSource 和 Reflection 来解析 .NET 代码文件并列出其中包含的命名空间/类/函数定义树。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T12:20:11.700

[这正是Microsoft Roslyn](http://en.wikipedia.org/wiki/Microsoft_Roslyn)可以帮助您的事情。

# python - Python中的网络接口模拟？

> ID：11234197
> 
> 赞同：6
> 
> 时间：2012-06-27T20:16:11.187
> 
> 标签：python, networking, interface, simulation

我正在使用 Python 为数字收音机制作模拟器。无线电通过 RF 中继一个 RS-232 端口和一个以太网端口，一对无线电构成无缝管道。因此，模拟器将成对使用，它们之间的管道模拟射频链路，允许用户使用物理接口、虚拟接口或隧道连接到每一端。

对于 RF 串行端口，我使用 PySerial 和虚拟串行端口使模拟器尽可能通用：我可以将模拟器连接到物理串行端口、网络套接字或另一个本地程序。除了用于在每个不同操作系统上创建虚拟串行端口的工具之外，这种方法是完全跨平台的。

我希望模拟器能够通过虚拟接口与本地程序联网，通过共享网络接口与远程程序联网，并通过专用于模拟器的本地物理接口与远程程序联网。但到目前为止，我还没有找到一种直接的方法来做到这一点。我一直在研究 SLIP/PPP、TAP/DUN、pcap/SOCK_RAW 和其他可能性，但没有发现明显或通用的解决方案。

关键的困难似乎在于，这涉及到整个以太网接口，低于 IP 级别，在以太网协议本身的级别：如果它只有几个端口，解决方案将相对简单。还是我错过了一些非常明显的东西？

如何使用 Python 以与 RF 串行接口解决方案一样通用的方式创建和使用 RF 以太网接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T16:34:58.267

人们发布的大量答案鼓励我跳出框框思考。

我的方法是使用 Dummynet，这是一个真正令人惊叹的多功能工具。不幸的是，Dummynet Windows 和 Linux 端口没有得到很好的维护，这意味着我将运行 *BSD。

但这简化了事情，因为 *BSD 映像也可以作为 VM 运行，这大大简化了虚拟接口的处理。

如果我担心大小，我可以使用 picoBSD 或 nanoBSD 为我的模拟器制作一个小型定制系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-09T11:18:15.230

您可以使用这个 Python 库：[rawsocketpy](https://github.com/AlexisTM/rawsocket_python)它允许在第 2 层（使用以太网 II 协议）上使用原始套接字 => 无 IP/TCP/UDP 标头。

```
#!/usr/bin/env python
from rawsocketpy import RawSocket

sock = RawSocket("wlp2s0", 0xEEFA)
sock.send("some data")
sock.send("personal data", dest="\xAA\xBB\xCC\xDD\xEE\xFF") 
```

或服务器形式：

```
#!/usr/bin/env python
from rawsocketpy import RawRequestHandler, RawAsyncServerCallback
import time

def callback(handler, server):
    print("Testing")
    handler.setup()
    handler.handle()
    handler.finish()

class LongTaskTest(RawRequestHandler):
    def handle(self):
        time.sleep(1)
        print(self.packet)

    def finish(self):
        print("End")

    def setup(self):
        print("Begin") 

def main():
    rs = RawAsyncServerCallback("wlp2s0", 0xEEFA, LongTaskTest, callback)
    rs.spin()

if __name__ == '__main__':
    main() 
```

# javascript - 如何对表单使用 jquery TOOLS 验证，指示错误消息的位置

> ID：11234199
> 
> 赞同：3
> 
> 时间：2012-06-27T20:16:20.403
> 
> 标签：javascript, forms, validation, jquery-tools

一般来说，我对 SO 和 Web 开发都是新手。对不起，我的普遍无知。

我已经建立了一个表单，它在表单提交之前进行了验证。我已经包含了 jqueryTOOLS 基本验证器：[http ://www.jquerytools.org/demos/validator/index.html](http://www.jquerytools.org/demos/validator/index.html)

它工作正常，但我需要调整错误消息的位置，我发现我可以使用以下代码来完成：

```
$("#myform").validator({
position: 'center left',
offset: [-2, 80],
}); 
```

但是，它正在调整包含错误消息的 div 左侧的位置。因为我希望错误出现在每个字段的左侧，所以我试图锚定错误消息的右侧，而不是左侧。

因此，虽然我可以使用位置和偏移量来移动错误消息，但我希望我正在移动的错误消息的点能够改变。

这很重要，因为错误消息的长度不同，因此如果我锚定左侧，那么更长的消息将覆盖需要交互的字段。

我希望这很清楚，如果没有，我可以解释更多！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:54:16.310

问题是由于 jquery 工具插件设置了`left`css 属性与`right` 属性。它绝对位于页面上，因此它为“左中”所做的计算是不正确的。它应该计算与页面右侧的距离，而不是左侧。你甚至可以在他们的[演示页面](http://www.jquerytools.org/demos/validator/index.htm)上看到这个失败：只需打开一个控制台并运行它：

```
$("#myform").validator({position:'center left', offset:[0,0]}) 
```

点击提交，你会看到它不起作用

您可以强制为错误宽度设置一定的宽度（例如 200），然后您可以传入 offset:[0,200] 并且它会正确显示。

否则，您可能必须手动修复插件源中的逻辑（并向他们提交错误！）

# jquery - 将高度设置为自动时手风琴动画中断！重要

> ID：11234202
> 
> 赞同：0
> 
> 时间：2012-06-27T20:16:24.807
> 
> 标签：jquery, css, animation, height, accordion

**这是怎么回事？**: 我的 jQuery 手风琴的动画坏了。在关闭上一个选项卡之前单击下一个选项卡一小段时间后，它会显示先前打开的选项卡。动画也不会滑动。

**CSS**：从[这个答案中找到](https://stackoverflow.com/a/9515573/1118431)

```
/* The following was added into accordion.css */
.ui-accordion .ui-accordion-content { height: auto!important; } 
```

* * *

**jQuery**

```
$(document).ready(function() {

    $("#accordion").accordion({ 
        active: false,
        fillSpace: false
    });

    $("#accordion").accordion("option", "active", false);
    $("#accordion").accordion("option", "fillspace", false);
}); 
```

* * *

**我尝试过**的：我摆弄了`fillSpace`and的值`height`。在手风琴.css 中，我尝试过，`overflow: visible!important;`但格式确实搞砸了。

**我想要发生的事情**：清洁动画，每个部分的高度取决于每个部分的内容量`<div>`（也就是我对上面的 CSS 所做的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:04:52.697

如果我没记错的话，您使用的是插件？至少对我来说这是一个问题（因为意外的行为，我讨厌他们）。所以不久前我创造了自己的手风琴。[**您可以在此处**](http://jsfiddle.net/A7f7J/)查看工作示例。 希望对你有帮助！
这是我的代码：

```
 $(document).ready(function() {

   $('.wrapper ul li ul:first').addClass('active');
   $('.wrapper ul li ul').hide();
   $('a.home,a.about,a.service,a.contact').click(function()     {
   if($('a.home,a.about,a.service,a.contact').next('ul').hasClass('active')) {
   $('.active').stop(true, true).slideUp('slow');
   $('.active').removeClass('active');
   $(this).next('ul').addClass('active');
   $('.active:not(:animated)').stop().slideDown('slow');
   }
   });
   }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:27:22.653

我现在觉得有点傻，但简单地设置`autoHeight`为 false 会占用内容较少的部分下方不必要的空间。动画也很流畅。

```
$(document).ready(function() {

    $("#accordion").accordion({ 
        active: false,
        autoHeight: false, // ADDED
        collapsible: true
    });

    $("#accordion").accordion("option", "active", false);
    $("#accordion").accordion("option", "autoHeight", false); // ADDED
    $("#accordion").accordion("option", "collapsible", false);
}); 
```

# python - openpyxl 线程安全吗？

> ID：11234203
> 
> 赞同：4
> 
> 时间：2012-06-27T20:16:24.950
> 
> 标签：python, thread-safety, openpyxl

openpyxl线程安全吗？我希望有一个线程更改工作表，而另一个线程定期保存。我想知道是否需要在更改和保存操作周围添加一个锁定对象，或者是否已经内置在 openpyxl 中。我没有在文档中看到任何内容，也没有看到关于 openpyxl 中线程的任何先前问题。

阅读您的答案后，我进行了以下测试：

```
import threading 
import random 
import time 
from openpyxl import Workbook

wb = Workbook() 

class openpyxlwriting ( threading.Thread): 

    def run ( self ): 

        global wb
        ws = wb.get_active_sheet()
        c = 1 
        for a in range(100):
            for b in range(10000):
                ws.cell(column = a,row=b).value = c
                c += 1
            print "row ",a

class openpyxlsaving ( threading.Thread): 

    def run ( self ): 

        global wb

        for a in range(1000): 
            wb.save('test.xlsx')
            print "saved"

openpyxlwriting().start()
time.sleep(1)
openpyxlsaving ().start() 
```

这给了我以下回溯： [trasback.png](https://www.dropbox.com/s/aaet4xg5es7bpva/openpyxl%20trasback.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T01:04:24.310

> “OpenPyXl 是线程安全的；工作簿可以由不同的线程同时创建。但是，每个工作簿一次只能由一个线程修改。”

表格[https://bitbucket.org/openpyxl/openpyxl/issues/228/](https://bitbucket.org/openpyxl/openpyxl/issues/228/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T01:02:44.680

我决定看看我是否可以对此进行测试，所以我在下面创建了一个简单的程序，它生成了一堆线程，这些线程试图读取和写入同一个单元格，并抛出随机睡眠。

我没有看到任何可能表明存在问题的操作系统错误。另一方面，我确实看到了一些我不太理解的行为。随着线程数的增加，完成的循环数减少。因此，例如，线程 100 只完成了 8 次循环。这可能是我的某种错误，或者它可能表明线程安全存在问题。

无论如何，如果您愿意的话，这应该让您开始自己测试它。

```
import threading
import random
import time
from openpyxl import Workbook

wb = Workbook()
ws = wb.get_active_sheet()
testcell = ws.cell('B9')
counter = 1

class openpyxlworker ( threading.Thread):

    def run ( self ):

        global wb     
        global testcell
        global counter

        for a in range(1000):
            time.sleep(random.random()/100)
            writing = random.randrange(1, 1000)
            testcell.value = writing
            time.sleep(random.random()/100)
            reading = testcell.value          
            print "Thread " + str(counter) + " wrote " + str(writing) + " and read " + str(reading)
            time.sleep(random.random()/100)
            wb.save('test.xlsx')

        counter = counter + 1

for b in range(100):
    openpyxlworker().start() 
```

# cgi - 动态 kml 和 CGI

> ID：11234214
> 
> 赞同：0
> 
> 时间：2012-06-27T20:17:19.343
> 
> 标签：cgi, kml, google-earth, google-earth-plugin

我有一个问题需要帮助来解决涉及 kml 文件的问题。让我首先说我不是程序员，并且在我开始当前项目时从未打算成为一名程序员。因为原来的程序员拿了之前开发的代码然后离开去赚钱，所以我一直在尝试重写程序，完成网站建设等......所有这些我都不知道该怎么做。如果不是因为我在自学我不知道的东西以完成任务方面很顽固，这个项目早就死了！我仍然不确定我是否在这里打败了一匹死马，但这是我最后一次尝试完成这项工作。

我开发了一个网站并设置了一个多人服务器，专门用于在微软的飞行模拟器程序 FSX 中使用船只。仍在网站[http://www.fsnavnet.com](http://www.fsnavnet.com)上工作，我正在使用第三方服务器软件进行多人游戏。为了推进一切，我需要做的是使用 Google Earth Plugin 在网站上创建一个“Fleet Tracker”页面。网页和插件的代码已经完成。

我正在尝试合并一个名为 FSX Google Earth Tracker 的第三方程序，该程序是使用 C# 开发的，它实际上跟踪单个 FSX 飞机/船只等。使用 Google 地球。很酷！该程序具有允许您创建 kml 文件的功能。我已经把那个kml放在网站上，为它写了网页并调整了kml，最后让它在本地工作，这意味着我只能通过有飞行模拟器的机器看到网站上的飞机/船只交通和FSX Google Earth Tracker 安装在上面。（我有两台计算机正在运行，都安装了虚拟机，以便为网站和 FSX Google Earth Tracker 开发和测试东西。）

这是kml代码

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" 
xmlns:gx="http://www.google.com/kml/ext/2.2"
xmlns:kml="http://www.opengis.net/kml/2.2"
xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
<LookAt>
        <longitude>-100.6738312112837</longitude>
        <latitude>36.41206190789826</latitude>
        <altitude>0</altitude>
        <heading>0</heading>
        <tilt>0</tilt>
        <range>9475744.521612534</range>
        <gx:altitudeMode>relativeToSeaFloor</gx:altitudeMode>
</LookAt>
    <Folder>
        <name>User Aircraft</name>
        <open>1</open>
<NetworkLink>
        <name>Current Position</name>
<Link>
        <name>Current Position</name>
        <href>http://localhost:9016/fsxu.kml</href>
        <refreshMode>onExpire</refreshMode>
</Link>
</NetworkLink>          
<NetworkLink>
        <name>Course Prediction</name>
<Link>
        <name>Course Prediction</name>
        <href>http://localhost:9016/fsxpre.kml</href>
        <refreshMode>onExpire</refreshMode>
</Link>
</NetworkLink>

    </Folder>
    <Folder>
        <name>AI Objects</name>
        <open>1</open>
        <NetworkLink>
        <name>Aircrafts</name>
<Link>
        <name>Aircrafts</name>
        <href>http://localhost:9016/fsxaip.kml</href>
        <refreshMode>onExpire</refreshMode>
</Link>
</NetworkLink>
<NetworkLink>
        <name>Helicopters</name>
<Link>
        <name>Helicopters</name>
        <href>http://localhost:9016/fsxaih.kml</href>
        <refreshMode>onExpire</refreshMode>
</Link>
</NetworkLink>

<NetworkLink>
        <name>Boats</name>
<Link>
        <name>Boats</name>
        <href>http://localhost:9016/fsxaib.kml</href>
        <refreshMode>onExpire</refreshMode>
</Link>
</NetworkLink>

    </Folder>
</Document>
</kml> 
```

我一直在网络上进行研究，试图找出如何使网页上的 kml 动态化。该网站正在广播（如果我可以使用该术语）kml 根据我写入的“查看”参数，当您第一次打开该页面时，您可以看到地球倾斜、转动和调整缩放，但不存在“飞行模拟”流量，我在网上发现有关使用 Python CGI 使 kml 文件动态化的页面，但我可以让 Python 在我的 WAMP 测试服务器上使用，如果我这样做了，我不会了解如何编写 .py 脚本以使 kml 执行我需要它执行的操作。我已经尝试了一周的时间来研究这件事，但没有运气。

所以我的问题是：如果有的话，还有哪些替代方法可以让 kml 在网站上动态工作以显示我想要显示的内容？我已经看到其他基于飞行模拟器的网站已经完成了我正在尝试使用谷歌地图做的事情。（[http://www.itsyourplane.com/startup.asp?p=/html/iyptracker.asp](http://www.itsyourplane.com/startup.asp?p=/html/iyptracker.asp)）我试过了联系这些开发人员以了解他们是如何做到的，但没有人在说话！

如果我无法解决这个问题，我除了关闭项目之外别无选择，在我投入了所有时间和精力之后，我不愿意这样做。任何帮助/指导将不胜感激！！！

谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:08:10.113

您的 kml 引用本地主机：

```
http://localhost:9016/fsxu.kml 
```

这将无法通过网络访问。您需要将这些 URL 更改为您的网络服务器的公共名称（可能类似于：

```
http://www.fsnavnet.com/kml/fsxu.kml 
```

并且您将需要[验证您的服务器是否已配置为提供 kml 文件](https://developers.google.com/kml/documentation/kml_tut#kml_server)）

# php - 使用 Javascript 插入 php 包含

> ID：11234215
> 
> 赞同：1
> 
> 时间：2012-06-27T20:17:19.670
> 
> 标签：php, javascript

我根本没有找到明确的答案。我一直在寻找一两个小时。

我有一个 PHP 页面进行 SQL 调用并构建我的页面。我有一个带有触发页面附加事件的 onClick JavaScript 函数的项目列表。除其他事项外，我需要使用 onClick 函数在 HTML 页面中附加额外的 PHP 代码。我一直希望通过包含附加到 PHP 文件中，但使用这个 JS 函数似乎无法使用。

想法将是最有帮助的。如果您可以通过代码参考或现有教程来支持您的答案，那将是非常棒的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:25:36.243

JavaScript 是在客户端浏览器中执行的代码，PHP 是在服务器上执行的代码。试图从 JavaScript 输出 PHP 将**永远不会**成功。

如果您希望通过 JavaScript 触发 PHP 代码，您可以向服务器上的 PHP 文件发出[XML Http 请求。](https://developer.mozilla.org/en/xmlhttprequest)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:28:17.430

您可以使用 JQuery+Ajax 加载外部文件，然后只附加元素，例如：

```
// when the page loads
$(document).ready(function () {
    $.ajax({
      url: "test.html",
      cache: false
    }).done(function( html ) {
      $("#results").append(html);
    });
}); 
```

或者

```
// when the an element is clicked
$(document).ready(function () {
  $.fn.appendElement = function (){
    $.ajax({
      url: "test.html",
      cache: false
    }).done(function( html ) {
      $("#results").append(html);
    });
  }
});

$('#buttonId').click(function(){ $(this).appendElement(); }); 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:26:24.980

使用 AJAX，使用 jQuery 你可以这样做：

```
$.get('test.php', function(data) {
  $("#MyDiv").html(data);
}); 
```

这会将“test.php”生成的内容插入到`<div id="MyDiv">`.

行。你不想要 jQuery ......上面使用纯 javascript 相同：

```
function getHTTPObject() {
  var xmlhttp;
  /*@cc_on
  @if (@_jscript_version >= 5)
    try {
      xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (e) {
      try {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
      } catch (E) {
        xmlhttp = false;
      }
    }
  @else
  xmlhttp = false;
  @end @*/
  if (!xmlhttp && typeof XMLHttpRequest != 'undefined') {
    try {
      xmlhttp = new XMLHttpRequest();
    } catch (e) {
      xmlhttp = false;
    }
  }
  return xmlhttp;  
}

function $(id) { return document.getElementById(id); }

function AJAX_GetAsinc(ajax, id, url) {
  ajax.abort();
  function statechange() {
    if ((ajax.readyState==4) && (ajax.status==200)) $(id).innerHTML=ajax.responseText;
  }
  ajax.open('GET', url, true);
  ajax.onreadystatechange = statechange;
  ajax.send(null);
}

var ajax = getHTTPObject();

AJAX_GetAsinc(ajax, 'MyDiv', 'test.php'); // This loads the content 
```

哦，是的......这不那么令人困惑：S

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T20:28:57.823

使用 ajax 是解决方案。:) ajax（异步 JavaScript 和 XML）所做的是运行外部 php 页面并动态返回其结果而无需重新加载页面。:)

当然，另一种解决方案是将您的 html 文件放在 .php 中，然后只回显您要添加的 php。

# mysql - mysql 不会启动 OSX - 无法通过套接字连接

> ID：11234217
> 
> 赞同：0
> 
> 时间：2012-06-27T20:17:43.310
> 
> 标签：mysql, macos

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) 
```

这就是我在运行 $mysql （或 sudo !! 之后...）时得到的结果。我安装了首选项窗格，并且过去启动和停止它都没有问题。我收到此错误，在检查首选项窗格时，它没有运行。点击“启动服务器”导致它提示我输入密码，然后挂起几秒钟，但没有启动服务器。

```
mysqld: Can't change dir to '/usr/local/mysql-5.1.51-osx10.6-x86_64/data/' (Errcode: 13) 
```

120627 16:11:22 [错误] 中止

是我从命令行运行 $mysqld 时得到的。我已经查看了有关此主题的其他六篇文章，但似乎没有一个真正适用（到目前为止），因为我今天对我的机器配置没有做任何事情，并且今天早上 mysql 运行良好。

有我可以检查的日志吗？是否有我应该调查的 my.conf 设置？如果我在安装cx_Oracle的同时牺牲了一只羔羊，数据库大神会不会被安抚？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T21:40:10.370

卸载当前的 mysql 版本，然后使用[Homebrew](https://brew.sh/)安装 mysql。

```
brew install mysql 
```

我发现这个答案很有帮助：[https ://stackoverflow.com/a/6378429/554406](https://stackoverflow.com/a/6378429/554406)

# java - 执行 sudo su 命令后 Java 程序挂起？

> ID：11234219
> 
> 赞同：1
> 
> 时间：2012-06-27T20:18:01.027
> 
> 标签：java, ssh, channel, jsch

我有一个程序可以`ssh`进入远程主机并在此之后远程执行命令。命令喜欢`mkdir`并且`cd`可以工作，但是当我尝试执行该命令时`sudo su - username`，程序就会挂起。我想知道我的代码中是否有任何遗漏/错误。

```
JSch jSch = new JSch();
Channel channel = null;
Session session = null;
InputStream in = null;        
String  username;
OutputStream  os  = null;;

try {   
    Properties conf = new Properties();
    conf.put("StrictHostKeyChecking", "no");

    jSch.addIdentity("id_rsa");
    jSch.setConfig(conf);
    session = jSch.getSession("username", "hostname", 22);      

    String cmd = "mkdir test";
    session.connect();   //   creating the ssh connection        

    channel = (ChannelExec) session.openChannel("exec");        
    ((ChannelExec)channel).setCommand(cmd);
    channel.setInputStream(null);
    in = channel.getInputStream(null);        
    channel.connect();  

    byte[] tmp = new byte[1024];        
    while (true) { 
        while (in.available() > 0) {
            int i = in.read(tmp, 0, 1024);
            if (i < 0) {
                break;
            }
        }
        if (channel.isClosed()) {
            break;
        }      
        try {
            Thread.sleep(1000);  // to wait for long running process ..                
        } catch (Exception ee) {
        }
        String value = new String(tmp);            
        System.out.println("input stream " + value);
    }     
}catch(Exception  e){
    e.printStackTrace();
}finally{
    channel.disconnect();
    session.disconnect();
    if(in!=null)
    in.close();
} 
```

另外，我需要`ssh`在 I 之后从这台主机到另一台主机`sudo`，所以基本上我需要`ssh`通过网关之类的东西连接到远程主机，然后连接到数据库，一旦这个问题得到解决。

对此的任何启示将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:22:40.803

sudo 命令将需要 pty。 在 exec 通道上做 sudo参考[http://www.jcraft.com/jsch/examples/Sudo.java.html ，跳转主机参考](http://www.jcraft.com/jsch/examples/Sudo.java.html)[http://www.jcraft.com/jsch/示例/JumpHosts.java.html](http://www.jcraft.com/jsch/examples/JumpHosts.java.html)

# node.js - 如何动态设置 Jade 模板的布局以在 Node.js/Express 3.0 中扩展？

> ID：11234220
> 
> 赞同：8
> 
> 时间：2012-06-27T20:18:02.900
> 
> 标签：node.js, express, pug

我有 3 个文件：layoutA.jade、layoutB.jade 和 index.jade。如何以编程方式设置 index.jade 将扩展的布局？

我试过使用：

```
app.set('view options', { layout: false }); 
```

和：

```
res.render('index', { title: 'Express', layout: 'layoutB' });  // older 2.x way? 
```

我似乎无法覆盖 index.jade 文件中明确设置的任何内容。省略 index.jade 文件中的 extends 行也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T00:08:20.217

假设玉文件位于以下目录中：

```
+ views
  + shared
    - layoutA.jade
    - layoutB.jade
  + home
    - index.jade 
```

以正确的顺序添加布局设置，并指定根视图文件夹：

```
app.set('views', __dirname + '/views');
app.set('view engine', 'jade');
app.set('view options', { layout: 'shared/layoutA' }); 
```

确保您指定了正确的文件夹（在本例中为“views”）。还要确保指定有效的默认布局。在深入研究之前检查这是否适用于测试页面。

一旦它工作，你可以像这样的默认布局：

```
if(someImportantVar) {
  res.render('home/index', { title: 'Different layout!', layout: 'shared/layoutB' });
} else {
  res.render('home/index', { title: 'Default layout!'});
} 
```

# ruby-on-rails - Rails - 不包含的模块

> ID：11234221
> 
> 赞同：0
> 
> 时间：2012-06-27T20:18:02.760
> 
> 标签：ruby-on-rails, ruby

我对动态添加方法到我的 Ruby 类的模块很感兴趣。

我正在使用 include 语法将这些带入我的课程，并且一切都按预期工作。

但是，我注意到当我使用 Authlogic 或 Paperclip 等 gem 时，不需要显式导入。我可以简单地在我的 ActiveRecord 派生模型上发出acts_as_authentic 或has_attached_file，并且类方法自动在范围内并被调用来装饰我的类。

这里发生了什么？包含在 Gemfile 中是否将所有类方法隐含在范围内？

我想写一个 Gem 以同样的方式表现。

编辑 - 这篇文章[http://yehudakatz.com/2009/11/12/better-ruby-idioms/](http://yehudakatz.com/2009/11/12/better-ruby-idioms/)表明 ActiveRecord::Base 正在通过包含得到增强。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:23:06.983

最好的答案是代码本身。

Rails 插件通常使用[`Rails::Railtie`](http://api.rubyonrails.org/classes/Rails/Railtie.html)（这里是[Paperclip 示例](https://github.com/thoughtbot/paperclip/blob/v3.1.2/lib/paperclip.rb#L54)）向 Rails 添加功能。

从[`Paperclip::Railtie`](https://github.com/thoughtbot/paperclip/blob/v3.1.2/lib/paperclip/railtie.rb)文件中可以看出，Paperclip 扩展`ActiveRecord::Base`了一些自定义模块。在这种情况下，[`Paperclip::Glue`](https://github.com/thoughtbot/paperclip/blob/v3.1.2/lib/paperclip/glue.rb)是提供`has_attached_file`宏以及其他几种方法的方法。

```
ActiveRecord::Base.send(:include, Paperclip::Glue) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:24:35.220

只要应用程序的 gemfile 中需要 gem，Rails 3 就会在应用程序启动时加载所有依赖项。

# css - 如何在自定义 CSS 菜单上覆盖部分边框

> ID：11234225
> 
> 赞同：0
> 
> 时间：2012-06-27T20:18:33.220
> 
> 标签：css, menu, hover, hide, border

所以这里是测试站点：[http ://rjewkes.com/index.php](http://rjewkes.com/index.php)

如果您滚动菜单项，您会看到“li span”元素位于“li”元素前面。但我想反过来。我对它们进行了适当的 z 索引，但由于某种原因它不起作用。

```
ul#topnav {
margin: 0 0 0 0; 
padding: 0;
float: left;
width: 1000px;
height:28px;
list-style: none;
position: relative;
background:url(images/navbar.jpg) no-repeat;
background-position:top left;
z-index:1000;
}
ul#topnav li {
float: left;
margin-top: 0; 
padding: 9px 0px 5px 0px;
z-index:1000;
}
ul#topnav li a {
float:left;
padding: 0 25px;
font-size:11px !important;
font-weight:bold;
display: block;
border:#transparent solid 1px;
color: #003654;
text-decoration: none;
z-index:1000;
}
ul#topnav li:hover {
background-color:#FFF;
position:static;
margin: -1px -1px 0 -1px !important;
padding-bottom:15px !important;
border-right: 1px solid #ccc;
border-top:#CCC solid 1px;
border-left:#CCC solid 1px;
z-index:1000;
}
ul#topnav li span {
float: left;
padding: 15px 0;
position: absolute;
left: 0; 
top:24px;
display: none;
width: 998px;
background-image:url(images/opacity.png);
color: #ccc;
z-index:1000;
}
ul#topnav li:hover span { 
display: block;
height:140px;
border: 1px solid #ccc;
margin-top:7px;
margin-left:-1px;
z-index:997;
-moz-box-shadow: 0px 8px 6px -6px rgba(0,0,0,0.1);
-webkit-box-shadow: 0px 8px 6px -6px rgba(0,0,0,0.1);
box-shadow: 0px 8px 6px -6px rgba(0,0,0,0.1);
/* For IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180,     Color='#000000')";
/* For IE 5.5 - 7 */
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180, Color='#000000');
}
ul#topnav li span a { 
background: transparent;
font-size:11px !important;
text-align:left;
border-left: 1px solid #ccc;
margin:5px 0 10px -1px;
padding:0 10px 0 20px;
width:100px;
height:130px;
display: inline;
z-index:997;
}
ul#topnav li span a:hover {
text-align:left;
color:#449ec7;
text-decoration: none;
z-index:997;
}
ul#topnav li span img {
position: relative;
float:right;
margin:10px 20px 0 0;
padding:0 0 0 0;
z-index:997;
} 
```

我将不胜感激任何有助于解决此问题的反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:40:20.550

这不是一个完整的答案，但我还不能使用评论功能..

z-index 在这里不起作用，因为只有您的`<span>`元素使用 position:absolute。无论您为`<li>`元素提供什么 z-index 都无关紧要，因为`<li>`它不是绝对定位的，因此必须遵循 DOM 顺序。

不幸的是，我想不出用你当前的标记做这件事的简单方法。元素的绝对位置`<li>`会起作用，但这会很混乱，如果你想保持菜单的灵活性，根本不建议这样做。我可能想到的任何其他解决方案都需要从根本上改变菜单的标记，或者做一个小的设计改变。不幸的是，这是一个非常简单的问题，没有简单的解决方案。

我会继续考虑它，我可能会想出一个简单的解决方法。

# javascript - 在 if 语句中测试多个函数调用的结果的意外行为

> ID：11234228
> 
> 赞同：0
> 
> 时间：2012-06-27T20:19:00.177
> 
> 标签：javascript

假设我有以下非常简单的代码块：

```
<script>
function hasVal(field) {
    console.log(field);
    var ret = false;

    return ret;
}

if(hasVal('#field1') && hasVal('#field2')) {
    console.log('here');
}else {
    console.log('there');
}
</script> 
```

我期待它输出以下内容：

```
#field1
#field2
there 
```

它实际输出的是：

```
#field1
there 
```

有人可以解释一下这里发生了什么吗？

Javascript从第一个函数调用返回后是否立即停止评估`if`语句的其余部分？`false`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:20:28.807

和运算符有时称为**短路**行为，所以是的，`&&`只要操作数为 ，就停止计算。`||`**`&&``false`**

 **`||`类似地，一旦操作数是， 的评估就结束了`true`。

这通常对作为程序员的您来说是一个巨大的好处，尽管当您确实需要完整的评估时，尽管在极少数情况下（其中大多数带有明显的代码气味，例如您的示例中的副作用）。为此，您可以使用普通的布尔值`&`and `|`，或者将表达式显式分解为单独的语句。

`null`在访问属性之前必须检查某些东西是否可用（或不可用）的极其常见的情况下，可以看出这是一件好事的原因：

```
if (something != null && something.whatever == 17) {
  ...
} 
```

如果`&&`总是对表达式的两边进行评估，那么这个习语就行不通了，我们作为软件开发人员的生活将会更加地狱般。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:20:45.717

Because your second condition in `if` does not execute. For `&&` to work **both** left and right conditions should resolve to **truthy** value. Interpreter sees that first condition is `false`, it skips second one straight away since it wasn't truthy.**

# html - 有没有这样的 iframe 可用

> ID：11234236
> 
> 赞同：1
> 
> 时间：2012-06-27T20:19:50.050
> 
> 标签：html

我使用 Homestead 建立了我的网站。这是一个简单的网站建设者。我最近重新构建了我的网站以包含运行良好的 iframe。我喜欢为我的客户提供的另一个功能是我所在行业特有的搜索引擎。这工作得很好。但是，首页搜索框（我在代码框中加载为 html，当键入关键字时，会将您带出我的网站进行搜索。我尝试将它设置为 iframe，但这没有用。

以下是其中一位技术人员的话： *问题是它返回并将您发送到一个链接。当您使用 iframe 时，无法在网站上拥有唯一链接。在您的实例中，您会看到产品的 url 和产品搜索始终是 www.adlib.us/productsearch-new.html 搜索始终需要我们的页面返回产品和您的 iframe 页面的正确 url，但它只返回一个地址，所以它不能放在你的 iframe 页面的地址中。*

*可能有一种方法可以创建一个程序来处理它，但我们无法提供。*

既然他相信这是可以做到的，我想知道是否有人知道怎么做。

在此先感谢您的帮助。罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:24:01.173

尝试 WordPress 或 Joomla，而不是使用这些奇怪的 Sitebuilders。它们都提供集成在其核心中的出色搜索引擎，并且非常易于使用和定制。当然在某种程度上。如需进一步定制，请尝试 Drupal。WordPress、Joomla 和 Drupal 是开源的，这意味着它是免费的，除了你花时间在 youtube 上阅读一些基本教程或阅读论坛之外，它是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:28:55.983

听起来 Google 自定义搜索很适合您。

[http://www.google.com/cse/](http://www.google.com/cse/)

您只需将嵌入的 Google 搜索框复制并粘贴到您的定制网站即可。此外，您还可以查看网站搜索的分析。不需要 iframe 之类的东西。

# mysql - SQL 查询（如果可能，约 5 个表连接）？

> ID：11234239
> 
> 赞同：0
> 
> 时间：2012-06-27T20:20:00.353
> 
> 标签：mysql, sql, codeigniter

我有那些 MySQL 表：

```
products
id

products_content
product_id, lang, product_name, product_content

products_and_categories
product_id, category_id

products_categories
id, parent_id

products_categories_content
category_id, lang, category_name, category_content

products_and_prices
product_id, price_id

products_prices
id

products_prices_content
price_id, lang, description, weight, price, currency 
```

如何从 id 为 5 的类别中选择所有产品（例如）以及每个产品的所有价格？单个查询可以吗？

目前要从类别中选择所有产品，我正在使用（CodeIgniter）：

```
 $this->db->select('*')
        ->from('products')
        ->join('products_content', 'products_content.product_id = products.id')
        ->join('products_and_categories', 'products_and_categories.product_id = products.id')
        ->where(array('category_id' => $category_id, 'lang' => $lang)); 
```

# vb.net - VB.net 检查字符串是否包含多个字符串中的 1 个的最快方法

> ID：11234240
> 
> 赞同：1
> 
> 时间：2012-06-27T20:20:01.123
> 
> 标签：vb.net, string

好的，所以我想检查一个大字符串是否包含数组中许多其他字符串中的一个（任何）。

我可以遍历该数组并执行“如果最大环.contains(arrayitem) 执行某些操作然后退出”，但我觉得这可能效率低下，尤其是在字符串数组非常大的情况下。

另外，性能会根据找到的字符串在数组中的位置而有所不同。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T00:29:47.330

我认为最好的方法是使用正则表达式

```
Imports System.Text.RegularExpressions

Dim arrayitems As New Regex(arrayitem(0) & "|" & arrayitem(1) & "|"  & arrayitem(2))

If arrayitems.IsMatch(largestring) Then 
  'Exists
  '...
End If 
```

另一种选择是使用 IndexOf （理论上）比 Contains 略快

```
Dim str As String = "Hello World."

' Does the string contain "World"?
If (str.IndexOf("World") <> -1) Then
  Console.Write("string contains 'World'")
Else
  Console.Write("string does not contain 'World'")
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:25:38.460

暗淡结果 As String() = Array.FindAll(arr, Function(s) s.Contains("whatever"))

# xml - XML 列未更新，未给出错误

> ID：11234242
> 
> 赞同：1
> 
> 时间：2012-06-27T20:20:12.273
> 
> 标签：xml, sql-server-2008

我正在编写一个脚本来将行插入到包含 XML 列的 SQL Server 2008 数据库数据表中。要插入的 XML 是串联字符串的形式，因此插入语句如下所示：

```
insert into mytable (id, xmldata) values (100, '<DATA>...<VALUE>' + 
@varcharvariable + '</VALUE>...</DATA>');

(1 row(s) affected) 
```

XML 数据的长度在 1000 到 9000 个字符之间，具体取决于插入的行。这通常可以正常工作，但是偶尔会将 null 插入 xmldata 而不是 XML。SSMS 不会显示插入期间发生的任何错误，它只是默默地将 XML 数据替换为 null。如果我尝试返回并手动更新此值，则会发生同样的事情：

```
update mytable set xmldata = '<DATA>...<VALUE>' + @varcharvariable + 
'</VALUE>...</DATA>' where id = 100;

(1 row(s) affected) 
```

但是当查看数据表中的那一行时，xmldata 仍然返回为空。为了进一步增加我的困惑，这个问题不会在某些数据库上发生，但在使用完全相同的查询时，对于相同的行会发生在其他数据库上。

在某些时候，我读到这可能与内存问题有关（我再也找不到该页面，所以我不记得细节了）。该网页提到将 CAST('' as VARCHAR(MAX)) 附加到 XML 将确保为查询分配足够的内存以按预期运行。这实际上工作了一段时间，但今天我又遇到了这个问题，添加这还不够。这将是更新查询的示例：

```
update mytable set xmldata = CAST('' as VARCHAR(MAX)) + 
'<DATA>...<VALUE>' + @varcharvariable + '</VALUE>...</DATA>' 
where id = 100; 
```

有谁知道是什么导致此更新静默失败或如何解决此问题？

# objective-c - 将秒推到倒数计时器

> ID：11234244
> 
> 赞同：1
> 
> 时间：2012-06-27T20:20:20.483
> 
> 标签：objective-c, xcode, nstimer, countdown

我创建了一个显示在标签上的倒数计时器，现在我想添加一个功能，让用户按下按钮的 eberytime 它将为倒数计时器增加 30 秒。我试图自己做，但我没有成功（我出错了，有一次它停止了我的计时器）我该怎么做？这是我的代码：

```
-(IBAction)start:(id)sender
{
    timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self     selector:@selector(updateTimer:) userInfo:nil repeats:YES];

}

-(void)updateTimer:(NSTimer *)timer
{
    currentTime -= 10 ;
    [self populateLabelwithTime:currentTime];

    if(currentTime <=0)
    {
        [timer invalidate];
        //some code when countdown reach to 00:00:00
    }

}

- (void)populateLabelwithTime:(int)milliseconds {
    seconds = milliseconds/1000;
    minutes = seconds / 60;

    seconds -= minutes * 60;

    NSString * countdownText = [NSString stringWithFormat:@"%@%02d:%02d:%02d", (milliseconds<0?@"-":@""), minutes, seconds,milliseconds%1000];
    countdownLabel.text = countdownText;

}

-(IBAction)addTime:(id)sender
{
    timer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self selector:@selector(addToCurrent:) userInfo:nil repeats:YES];
}

-(void) addToCurrent:(NSTimer *)timerb;
{
    seconds +=10;
    [self populateLabelWithTime:seconds];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    currentTime = 2700;

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:53:43.240

无需在每次单击按钮时重新创建计时器。此外，在我看来，当您尝试将 30 秒添加回计时器时，您不小心修改了秒数而不是 currentTime。

```
-(IBAction)addTime:(id)sender
{
    currentTime += 30000;
    [self populateLabelWithTime:currentTime];
} 
```

# ruby-on-rails - joosy 动态渲染删除小部件

> ID：11234245
> 
> 赞同：0
> 
> 时间：2012-06-27T20:20:23.577
> 
> 标签：ruby-on-rails, joosy

完成博客教程后，我正在基于 Joosy 制作一个简单的 Todo List 应用程序。

我在我的 TaskWidget 中遇到了 @renderDynamic（我能够在博客中工作）的问题。

当我单击动态部分上的提交时，它会成功回发并更新资源，但会删除小部件内容。有什么想法吗？

我的仓库在这里： [https ://github.com/awinograd/todo_list/](https://github.com/awinograd/todo_list/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:03:25.963

查看此讨论[github.com/roundlake/joosy/issues/23](https://github.com/roundlake/joosy/issues/23)

简而言之，您可能不希望将小部件或表单置于动态渲染之下。或者在传递给@onRefresh 的回调中手动重新绑定它们。

# ruby - 从 String#split 返回的零长度字符串

> ID：11234246
> 
> 赞同：5
> 
> 时间：2012-06-27T20:20:25.990
> 
> 标签：ruby

在 Ruby 1.9.3（可能还有更早的版本，不确定）中，我试图弄清楚为什么 Ruby 的 String#split 方法给了我某些结果。我得到的结果似乎与我的预期相反。这是一个例子：

```
"abcabc".split("b") #=> ["a", "ca", "c"]
"abcabc".split("a") #=> ["", "bc", "bc"]
"abcabc".split("c") #=> ["ab", "ab"] 
```

在这里，第一个示例返回的正是我所期望的。

但是在第二个例子中，我很困惑为什么#split 返回一个长度为零的字符串作为返回数组的第一个值。这是什么原因？这是我所期望的：

```
"abcabc".split("a") #=> ["bc", "bc"] 
```

沿着同一条线，为什么在第三个示例中没有返回尾随零长度字符串？如果第二个示例返回一个长度为零的字符串作为它的第一个值，那么最后一个示例应该返回与其最后一个值相同的值。

启发我，我在这里缺少什么？

**编辑**：更深入地研究它，我意识到为什么这是默认行为以及为什么我的想法是完全错误的。例如，如果我们要通过 CSV 文件，在每一列上进行拆分，我们的数据将被丢弃，因为空的前导列将被忽略。

同样重要的是要注意这个问题不仅仅与 Ruby 有关——我了解到许多其他语言的行为方式完全相同。当我了解到这一点时，我只是在使用 Ruby。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:38:10.913

ruby [1.9 文档](http://ruby-doc.org/core-1.9.3/String.html#method-i-split)说

> 如果省略了 limit 参数，则会抑制尾随的空字段。

因此，如果我们以您为例：

```
 "abcabc".split("a") #=> ["bc", "bc"] 
```

我们包括一个极限值：

```
 "abcabc".split("a", -1)  #=> ["ab", "ab", ""] 
```

你得到了预期的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T20:36:47.490

```
"abcabc".split("b") #=> ["a", "ca", "c"]
"abcabc".split("a") #=> ["", "bc", "bc"]
"abcabc".split("c") #=> ["ab", "ab"] 
```

假设你用逗号分开。你会期待什么样的行为 `",bc,bc".split(',')`？在“a”上拆分没有什么不同。对于第三个示例，`split`默认情况下省略尾随空。

# time-series - 在 Stata / SAS 中创建具有缺失值的运行平均值

> ID：11234247
> 
> 赞同：2
> 
> 时间：2012-06-27T15:33:21.997
> 
> 标签：time-series, sas, stata

多年来，我对环境和气象变量（温度和湿度）进行了每小时测量的时间序列。从这些每小时值中，我想计算 24 小时运行平均值来创建曝光参数。为此，要求至少有 17 个每小时测量值可用，且连续缺失值不超过 6 小时。如果 24 小时内连续缺失超过 6 个小时值，则该特定日期的数据将设置为缺失。如何在 Stata 或 SAS 中实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:34:03.943

看起来您可以使用以下组合为“有效”观察创建一个虚拟变量

*   `by varname : generate ....`,

*   `egen`， 和

*   滞后变量 ( `L.varname`, `L2.varname`... `L24.varname`...)

然后，使用您的数据子集创建您的平均值（例如， `yourcommand ... if dummy==1 ...`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T10:32:56.330

一个Stata解决方案：

1.  用于`tssmooth ma myvar_ma = myvar, w(24)`创建移动平均线。缺失的将被忽略。

2.  创建指标`gen ismiss = missing(myvar)`

3.  用于`tssmooth ma ismiss_ma = ismiss, w(24)`创建指标的移动平均线。

4.  `replace myvar_ma = . if ismiss_ma > (7/24)`

（至少 17/24 必须存在，因此 7 或更少的缺失是可以接受的，但 8 或更多是不可接受的。

编辑。`tsegen`SSC 现在提供了一种解决此类问题的简单方法。您可以直接在命令语法中指定窗口中可接受的最小非缺失值数量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T01:16:18.533

好的，这是我的尝试。首先创建一些示例数据以供使用：

```
**
** CREATE ~3 YEARS DAYS OF HOURLY TEMPERATURE DATA
** THIS IS UGLY - IM SURE THERES A BETTER WAY TO DO IT BUT WHATEVER
*;
data tmp;
  pi = constant('pi');
  do year=1 to 3;
    linear_trend = 0.1 * year;
    day = 0;
    do yearly_progress=0 to (pi*2) by (pi/182.5);
      day = day + 1;
      yearly_seasonality = (1 + sin(yearly_progress)) / 2;
      hour = 0;
      day_mod = (ranuni(0)*10);
      do hourly_progress=0 to (pi*2) by (pi/12);
        hourly_seasonality = (1 + sin(hourly_progress)) / 2;
        if hour ne 24 then do;
          temperature = 60*(1+linear_trend) + (20 * yearly_seasonality) + (30 * hourly_seasonality) - day_mod;
          output;
        end;
        hour = hour + 1;
      end;
    end;
  end;
run;

**
** ADD SOME MISSING VALS
** ~ 10% MISSING
** ~ 10 IN A ROW MISSING EVERY 700 OR SO HOURS
*;
data sample_data;
  set tmp;
  if (ranuni(0) < 0.1) or (mod(_n_,710) > 700) then do;
    temperature = .;
  end;
run; 
```

其次，如果满足要求，则计算温度的移动平均值：

```
**
** I DONT NORMALLY LIKE USING THE LAG FUNCTION BUT IN THIS CASE ITS IDEAL
*;
data results;
  set sample_data;

  **
  ** POPULATE AN ARRAY WITH THE 24 CURRENT VALUES
  ** BECAUSE WE ARE USING LAG FUNCTION MAKE SURE IT IS NOT WITHIN ANY 
  ** CONDITIONAL IF STATEMENTS
  *;
  array arr [0:23] temperature0-temperature23;
  temperature0  =  lag0(temperature);
  temperature1  =  lag1(temperature);
  temperature2  =  lag2(temperature);
  temperature3  =  lag3(temperature);
  temperature4  =  lag4(temperature);
  temperature5  =  lag5(temperature);
  temperature6  =  lag6(temperature);
  temperature7  =  lag7(temperature);
  temperature8  =  lag8(temperature);
  temperature9  =  lag9(temperature);
  temperature10 = lag10(temperature);
  temperature11 = lag11(temperature);
  temperature12 = lag12(temperature);
  temperature13 = lag13(temperature);
  temperature14 = lag14(temperature);
  temperature15 = lag15(temperature);
  temperature16 = lag16(temperature);
  temperature17 = lag17(temperature);
  temperature18 = lag18(temperature);
  temperature19 = lag19(temperature);
  temperature20 = lag20(temperature);
  temperature21 = lag21(temperature);
  temperature22 = lag22(temperature);
  temperature23 = lag23(temperature);

  **
  ** ITERATE OVER THE ARRAY VARIABLES TO MAKE SURE WE MEET THE REQUIREMENTS
  *;
  available_observations  = 0;
  missing_observations    = 0;
  max_consecutive_missing = 0;
  tmp_consecutive_missing = 0;
  do i=0 to 23;
    if arr[i] eq . then do;
      missing_observations    = missing_observations + 1;
      tmp_consecutive_missing = tmp_consecutive_missing + 1;
      max_consecutive_missing = max(max_consecutive_missing, tmp_consecutive_missing);
    end;
    else do;
      available_observations  = available_observations + 1;        
      tmp_consecutive_missing = 0;
    end;
  end;

  if tmp_consecutive_missing <= 6 and available_observations >= 17 then do;
    moving_avg = mean(of temperature0-temperature23);
  end;
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T13:11:37.530

对于一般移动平均计算，使用 PROC EXPAND 是最简单的方法（您需要获得 ETS 许可才能使用此程序）。例如，下面的代码将计算 24 个周期的移动平均值并将前 16 个观测值设置为缺失。但是，为了符合您的其他标准，您之后仍需要按照 Rob 的代码行运行数据步骤，因此您不妨在该步骤中执行所有计算。

```
proc expand data=sample_data out=mov_avg_results;
convert temperature=mean_temp / method=none transformout=(movave 24 trimleft 17);
run; 
```

# c++ - C++中的向量排序

> ID：11234252
> 
> 赞同：0
> 
> 时间：2012-06-27T20:20:39.953
> 
> 标签：c++, sorting, vector

我将一个整数二进制文件读入 int 向量。当我使用排序函数时，向量正在归零......

我知道矢量没问题！

有什么问题？

```
std::ifstream input("D:\\Amostra.txt", ios::binary);
vector<int> v (NumBlocks*ELEMENTS_PER_BLOCK*sizeof(int));

input.read(reinterpret_cast<char *>(&v[0]), NumBlocks*ELEMENTS_PER_BLOCK*sizeof(int));

sort(v.begin(), v.end());

for (int i=0; i<ELEMENTS_PER_BLOCK*NumBlocks; i++){
        cout << v[i] << endl;
    };
system("pause"); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T20:23:40.057

```
vector<int> v (NumBlocks*ELEMENTS_PER_BLOCK*sizeof(int)); 
```

该构造函数的参数是您需要的元素数量，而不是这些元素占用的字节数。这将创建`sizeof(int)*N`元素，`N`您需要的数字在哪里。排序后第一个`(sizeof(int)-1)*N`将为0。

```
input.read(reinterpret_cast<char *>(&v[0]), NumBlocks*ELEMENTS_PER_BLOCK*sizeof(int)); 
```

该文件具有`.txt`扩展名，但您正在阅读它，就好像它是二进制文件一样。如果文件是二进制转储，那么这个读取是......嗯......代码味道但并非完全错误。如果文件是文本，那么这是完全错误的。

`copy`您可以使用算法和 a读取仅包含空格分隔的整数的文本文件`istream_iterator`：

```
std::vector<int> v;
v.reserve(NumBlocks*ELEMENTS_PER_BLOCK);
std::copy( std::istream_iterator<int>(input), std::istream_iterator<int>(),
           std::back_inserter( v ) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:24:10.627

错误在这一行：

```
vector<int> v (NumBlocks*ELEMENTS_PER_BLOCK*sizeof(int)); 
```

参数应该是元素的数量，而不是字节数，所以`*sizeof(int)`从最后取出。实际上，您的向量的元素数量是您想要的 4 倍。你没有读到的都是零，所以当你调用时`sort`，它们会走到向量的前面，然后你只打印出零，而不是带有真实数据的那些。

# c# - 连接到捕获驱动程序而不创建窗口

> ID：11234256
> 
> 赞同：0
> 
> 时间：2012-06-27T20:21:08.743
> 
> 标签：c#, winapi, video, video-capture

如何在不创建捕获窗口的情况下连接到视频捕获驱动程序。这可能吗 ？换句话说，我想从用户网络摄像头捕获视频而不显示预览窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:47:20.913

您只需要一个带有旧版[Video for Windows](http://msdn.microsoft.com/en-us/library/windows/desktop/dd757708%28v=vs.85%29.aspx) API 的窗口。使用[DirectShow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375454%28v=vs.85%29.aspx)或[Media Foundation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694197%28v=vs.85%29.aspx)，视频捕获不需要窗口。在 C# 中，您可以使用开源[DirectShow.NET](http://directshownet.sourceforge.net/)和[Media Foundation.NET](http://mfnet.sourceforge.net/)库与这些 API 交互。

仅供参考：DirectShow.NET 在 C# 中包含 CapWMV 示例，可将视频捕获到文件中。

> 使用 WM ASF Writer 过滤器创建 wmv 文件的 .NET 示例应用程序 虽然 LGPL 涵盖了底层库，但此示例作为公共域发布。分发它是希望它有用，但没有任何保证；甚至没有对适销性或特定用途适用性的默示保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T08:57:17.840

使用 VfW，您需要（至少）创建视频/捕获窗口，但您可以给它一个空窗口句柄作为父窗口并使其不可见。来自 VfW 库的所有通信都是通过 StdCall 回调完成的。我不是 100%，但我认为您也不需要运行消息泵。

正如[Roman 所说](https://stackoverflow.com/a/11235268/588306)，你应该看看 DirectShow，因为它在 15 年前就已经淘汰了 VfW。

# sql-server-2008 - 合并两个表中的数据，其中一个优先

> ID：11234257
> 
> 赞同：0
> 
> 时间：2012-06-27T20:21:12.843
> 
> 标签：sql-server-2008, tsql

我正在尝试将两个表中的数据合并到一个结果中，但不复制 id，`CourseID`而用户的完成优先于结果。

### 用户课程完成表

```
Col Name        | Default | PK?
===================================
UserID                      Y
CourseID                    Y
SystemComplete    NULL      N
UserComplete      NULL      N

UserID, CourseID, SystemComplete, UserComplete
1, 1, NULL, 12/06/2012
1, 2, NULL, 12/06/2012
1, 3, 10/06/2012, 12/06/2012
1, 4, NULL, NULL
1, 5, 10/06/2012, NULL
2, 1, NULL, 12/06/2012 
```

### 课程组表

```
Col Name        | Default | PK?
===================================
CourseID                     Y
GroupID                      Y

CourseID, GroupID
1, 1
2, 1
3, 1
4, 1
12, 1
5, 2
6, 2 
```

### 预期成绩

我想查找用户的所有课程完成情况，并用未完成的项目补充该列表。例如，如果我想要 Group`1`和 User的列表`1`，我会得到

```
CourseID, SystemComplete, UserComplete
======================================
1, NULL, 12/06/2012
2, NULL, 12/06/2012
3, 10/06/2012, 12/06/2012
4, NULL, NULL
12, NULL, NULL --not in completion record 
```

### 我试过的

我已经尝试了几个查询，但我似乎无法弄清楚这一点。下面的一个是我在[几个](https://stackoverflow.com/questions/4493896/combine-results-from-two-tables-into-one-recordset) [问题](https://stackoverflow.com/questions/11059372/oracle-sql-combining-two-tables-but-taking-duplicates-from-one)中发现的。

```
SELECT
  COALESCE(uc.CourseID, cg.CourseID) as CourseID
FROM
  CoursesToGroup as cg
FULL JOIN UserCompletion as uc ON
  uc.CourseID = cg.CourseId
WHERE
  uc.UserID = 1 AND
  cg.GroupID = 1 
```

...但这仅返回一行结果

我得到的最接近的是`UNION`两个查询，但是我不知道如何将`UserComplete`and`SystemComplete`数据放入查询中

```
SELECT CourseID
FROM UserCompletion
WHERE
  EmployeeID = 1

UNION

SELECT CourseID
FROM CoursesToGroup
WHERE
  LearningPathID = 1 
```

这将返回正确的结果，`CourseID`但是，正如我之前所说，我无法弄清楚如何将完成数据放入其中并仍然删除重复`CourseId`。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:28:04.313

```
SELECT CourseID, SystemComplete, UserComplete
FROM UserCompletion
WHERE
UserId = 1

UNION

SELECT CourseId, null, null
FROM CoursesToGroup
where GroupId = 1
and CourseId NOT IN 
    (SELECT CourseId From UserCompletion
     WHERE UserId = 1) 
```

# android - 打开 NFC 模拟器使用

> ID：11234263
> 
> 赞同：1
> 
> 时间：2012-06-27T20:21:58.753
> 
> 标签：android, android-emulator, nfc, open-nfc

我想知道如何正确使用 Open NFC Simulator，我已经通过了类似的帖子： [Open NFC emulator 入门](https://stackoverflow.com/questions/6770774/getting-started-with-open-nfc-emulator)

但我的问题是在按照上面链接中的所有说明操作后没有运气，有人可以逐步指导我如何正确加载 SDK 插件并启动模拟器吗？

我正在做一个关于 Android NFC 的最后一年项目，使用 NFC 进行移动支付，如果有人有示例程序或此类主题，也非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T11:58:09.507

好的，我将步骤放在这里，它将部分复制此链接中列出的步骤：[Open NFC emulator 入门](https://stackoverflow.com/questions/6770774/getting-started-with-open-nfc-emulator)，但有一些关于如何操作的指示，以便可以使用 Open NFC Simulator 来模拟两个设备 [点对点]：

以下步骤需要按顺序执行，如果模拟器在程序完成之前挂起/冻结，则需要从头开始执行步骤 (5-8)，因此顺序至关重要。

1.  必须存在以下软件包：

    OpenNFC Android SDK 插件：[链接](http://sourceforge.net/projects/open-nfc/files/)

    OpenNFC Core 版（包含连接中心和 NFC 模拟器）

    回声服务器 -[回声工具](http://bansky.net/echotool/)

2.  OpenNFC 必须安装在 Android SDK 中（在文件夹 - android-sdk-windows/add-ons/ 中）

3.  使用带有这些参数的 cmd 启动 Echo 服务器 – “echotool /p tcp /s 7”</p>

4.  启动 ConnectionCenter.exe，如果是第一次运行，则必须将其配置为接受来自其他计算机的服务客户端和提供程序连接。

5.  使用管理权限启动 NfcSimulator.exe（右键单击以管理员身份运行）

6.  启动多个（两个）Android Emulators (AVD)，通常从 AVD 管理器创建 AVD 就足够了，如果此过程不起作用，则使用 cmd，运行 emulator-arm.exe（在文件夹 - android-sdk-windows /tools/) 带有这些参数“emulator-arm.exe –avd” 例如“emulator-arm.exe –avd A1”</p>

7.  在第一次运行的每个模拟器中，NFC 设置必须如下所示进行配置： 必须输入 IP – 10.0.2.2 并且必须为 NFC HAL 实现选择“NFC Controller Simulator”，现在可以切换启用/禁用 NFC .

    配置这些设置后，NFC 模拟器将显示每个设备中 NFC 的激活，它会点亮可用的模拟技术。

8.  要进行 NFC 点对点传输，在 NFC 模拟器中，必须双击“NFC Device #2”，如下图所示，这与用户将智能手机靠近 NFC 读卡器时一样，完成传输必须双击可见的 OpenNFC 图标，这类似于用户从阅读器中取出智能手机时。

# jquery - HTML 表单忽略复选框并选择是否加载了 jQuery

> ID：11234264
> 
> 赞同：0
> 
> 时间：2012-06-27T20:22:01.413
> 
> 标签：jquery, forms

我对表单和 jQuery 有很大的问题。

```
<form name="doall" method="POST" action="test.php">
    <input type="hidden" value="<?php echo $Sorder ?>" name="order" />
    <input type="hidden" value="<?php echo $Ssort ?>" name="sort" />
    <input type="hidden" value="<?php echo $form_id_venue ?>" name="form_id_venue" />
    <input type="checkbox" name="objectSelected[]" value="<?php echo $userToRead[$j]['id'] ?>"/></td> 
```

如果在 test.php 中`print_r($_POST)`，我注意到该数组填充了除选择和复选框之外的每个输入值。

`$_POST`不考虑复选框、单选和选择输入，只考虑文本和文本区域。

如果我禁用 jQuery，一切正常。为什么？

# batch-file - 批量跳过字符或从字符串变量中提取子字符串以进行比较？

> ID：11234269
> 
> 赞同：1
> 
> 时间：2012-06-27T20:22:26.647
> 
> 标签：batch-file, comparison, substring, filenames, skip

我正在尝试对 2 个 .txt 文件进行逐行比较。但问题是对于第一个文件，我想在第一个文件的前 10 行中每行的前 9 个字符之后开始逐行比较第二个文件。我在某处读到您可以提取子字符串，但我只看到您必须指定子字符串长度（~start，length）的格式，因为我的每一行都有不同的长度。我该如何做到这一点？

```
 < !logPath! (
 FOR /F "tokens=*" %%A in (%refLogPath%) DO (
      set logLine=
      set /p logLine=
      set refLogLine=%%A
      echo !logLine!
      echo !refLogLine! 

      REM check logLine against refLogLine(ENG-REF.log)
  REM skip 1st 9 chars of each line
      if NOT !logLine!==!refLogLine! (

     set flag=false
         echo !logLine!
 ) else (
 set flag=true
  echo !flag!
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:08:22.843

你真的应该考虑使用批处理以外的东西来进行这种类型的处理。

但如果你真的想继续...

查看 SET 命令的帮助文档。在命令提示符下键入`HELP SET`或`SET /?`。

在文档中，您将看到您可以省略长度参数，这意味着从字符串的起始位置到结尾：`!logline:~9!`将给出您想要的。请记住，位置从 0 开始。

# mysql - MySQL 注入攻击：概念证明

> ID：11234274
> 
> 赞同：2
> 
> 时间：2012-06-27T20:22:44.473
> 
> 标签：mysql, sql-injection

我在客户端提供的块中有以下代码：

```
$user = $_POST['user'];

$sql = "SELECT * FROM users WHERE user = '" . $user . "'";

$dbh->query($sql); 
```

此外，此代码当前不会在屏幕上回显任何内容，因此如果我选择多个用户，它对我没有帮助。这不会在视觉上向客户展示任何东西。

对我来说很明显这很容易注入，但我找不到向客户展示这将如何工作的方法。我尝试删除表格，但`->query()`似乎一次只允许一个语句。

到目前为止，这是我尝试过的， `' OR 1=1; DROP TABLE users; SELECT * FROM users WHERE 1='1`但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:55:43.113

`SLEEP(1000)`您可以多次注入以耗尽连接池。或者您可以使用非常复杂的表达式来提高 CPU 负载。

如果有很多派生表，您甚至可能会耗尽内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:43:39.113

您在审查数据库查询方面做得还不够。脚本中的方法（没有回声）称为[盲注](https://www.owasp.org/index.php/Blind_SQL_Injection)，它仍然**很有**可能实现接管或注入。

尝试使用自动 SQL 注入工具，例如[SqlMap](http://sqlmap.org/)。您会对查询结果感到惊讶。您还可以针对您的查询尝试一些来自[unixwiz的示例。](http://www.unixwiz.net/techtips/sql-injection.html)虽然这些都是针对他的目标的，但其背后的所有理论和证据都是合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:29:01.130

注入以下内容怎么样：

```
"' OR 1'" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:59:04.417

截断；

```
' or 1=1; truncate table users; -- 
```

降低 ;

```
 ' or 1=1; drop table users; -- 
```

我认为可以做到。

# ajax - Chrome的Ajax url不同？

> ID：11234275
> 
> 赞同：0
> 
> 时间：2012-06-27T20:22:46.213
> 
> 标签：ajax, google-chrome

我注意到以下脚本在 Chrome 中不起作用，但它适用于所有其他浏览器：

```
$.ajax({
   url : 'pages/add.php',
   data: $("#frm-upload").serialize(),
   dataType: "json",
   type: 'POST',
   ... 
```

当使用url“pages/add.php”时，它不起作用，我必须添加/ like“/pages/add.php”。在其他浏览器中，我没有这个问题，所以我想知道为什么 Chrome 会为此苦苦挣扎？

很难找到这方面的具体信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:26:25.930

我猜这与 Chrome 试图在地址栏中隐藏“http://”这一事实有关。不久前我遇到了同样的问题，只是放弃并输入了“/”。

# jquery - 用 html 链接连接 jquery 函数

> ID：11234277
> 
> 赞同：0
> 
> 时间：2012-06-27T20:22:50.440
> 
> 标签：jquery, html

我正在尝试学习 html 和 jquery。我的问题是我有一个框，我想根据用户点击的内容进行修改。例如，如果用户单击淡入淡出，则框应该淡出，并且滑动会使框滑动。我被困在如何将一个盒子与多个功能和链接连接起来。

```
<script type="text/javascript" src="jQuery-1.7.min.js"></script>
<script type="text/javascript">

    $ (function() {
        $('a').click(function() {
            $('#box').fadeOut(3000);
        });
    });

</script>
</head>

<body>
<div id="box"></div>
<li><a href="#">fade</a></li>
<li><a href="#">slide down</a></li>
<li><a href="#">slide right</a></li>
</body>
</html> 
```

这是CSS：

```
#box
{
background: red;
width: 300px;
height: 300px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:27:15.520

为每个 ID 提供锚点 ID 和设置事件。

```
<li><a href="#" id="fade">fade</a></li>
<li><a href="#" id="slided">slide down</a></li>
<li><a href="#" id="slider">slide right</a></li> 
```

对于每个事件，做相应的动画

```
$('#fade').on('click', function() {
          $('#box').fadeOut(3000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:29:24.200

将您的函数移动到 document.ready 语句中并在您的 LI 上添加一个选择器

```
$(document).ready(function() {

$('a.fade').on("click", function(e) {
    e.preventDefault();
    $('#box').fadeOut(3000);
});

//rest of animate functions

}); 
```

[http://jsfiddle.net/GT9jh/](http://jsfiddle.net/GT9jh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:34:09.160

你可以这样：**[jsFiddle example](http://jsfiddle.net/j08691/xc7EP/)**。

**HTML**

```
<div id="box"></div>
<li><a rel="fade" href="#">fade</a></li>
<li><a rel="slide down" href="#">slide down</a></li>
<li><a rel="slide right" href="#">slide right</a></li>​ 
```

**jQuery**

```
$('a').click(function() {
    effect = $(this).attr('rel').split(' ')[0];
    direction = $(this).attr('rel').split(' ')[1];
    $('#box').hide(effect, { direction: direction }, 1000);
});​ 
```

# regex - Excel 按字母数字字符串中的第二个字符排序

> ID：11234288
> 
> 赞同：0
> 
> 时间：2012-06-27T20:23:30.003
> 
> 标签：regex, sorting, excel, excel-formula, vba

我在 Excel 电子表格中有一个列，其中包含以下内容：

```
### - 3-digit number
#### - 4-digit number
A### - character with 3-digits
#A## - digit followed by character then 2 more digits 
```

这些字符串的右侧也可能有多余的字符。

我想按以下顺序（升序或降序）按此列对整个电子表格进行排序：

前三种类型的字符串按预期按字母顺序排列（不是 ASCII-Betically！）然后是 #A##，首先是字符，然后是第一个数字。

```
Example:
000...999, 0000...9999, A000...Z999, 0A00...9A99, 0B00...9B99...9Z99 
```

我觉得有一个使用正则表达式或宏的非常简单的解决方案，但我的 VBa 和 RegExp 相当生疏（一个朋友问我这个问题，但这些天我更像是一个 C 人）。我已经阅读了一些解决方案，这些解决方案涉及将数据拆分为我可以接受的其他列。

我会满足于一个好的指南的链接。预先感谢永恒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:28:17.273

如果您想按第二个字符排序而不考虑前后的内容，那么正则表达式`^.(.)`表示第二个字符匹配...

# bash - 使用 NppExec（和 Cygwin）在 Notepad++ 中在 Windows 上运行 bash shell 脚本

> ID：11234289
> 
> 赞同：3
> 
> 时间：2012-06-27T20:23:36.250
> 
> 标签：bash, shell, cygwin, notepad++, nppexec

我正在尝试`.sh`使用 NPPExec 从 Notepad++ 中重建如何在我的 Windows 机器上执行 bash shell 文件。（我以前成功地做到过，但是我的硬盘崩溃了，我不记得我以前是怎么做到的。）

当它之前工作时，我会运行调用`.sh`文件的 NPPExec 脚本，它会向我显示在 Notepad++ 中处理 .sh 文件的控制台输出，就好像它在 cygwin 中处理一样。

这是我试图开始工作的示例 .sh 文件：

```
message="Testing"
echo $message 
```

该文件位于 C: 的根目录中。

**失败的尝试：**

以下三种方法均无效：

*   执行： `C:\nppexec.sh`

回复：

```
CreateProcess() failed with error code 193:
%1 is not a valid Win32 application. 
```

*   执行：`npp_exec C:\nppexec.sh`

回复：

```
message="Testing"
CreateProcess() failed with error code 2:
The system cannot find the file specified.    
$message 
```

*   在运行 npp_exec 时，将 .sh 文件作为第一行添加`#! /bin/bash`会导致额外的错误：

    ```
    NPP_EXEC: C:\nppexec.sh
    #! /bin/bash
    CreateProcess() failed with error code 2:
    The system cannot find the file specified. 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:43:14.430

尝试在 Windows 上执行批处理文件时出现同样的错误。

我通过在记事本++的控制台中执行第一个命令 cmd 解决了这个问题，然后是 E:\test.bat

我的window pc上也安装了一个mksnt。

首先在notepad++的控制台中启动bash，测试shell现在运行良好

```
bash
C:\nppexec.sh 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:32:20.067

解决方案是直接调用 bash：

```
C:\cygwin\bin\bash --login -c "command.sh" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-25T17:11:26.127

通过一个**按键**，我想在记事本中使用 Cygwin执行**活动选项卡的 shell 脚本。**

经过几个小时在网上寻找和试验，我终于想出了

1.  安装 NppExec 插件
2.  按 F6
3.  粘贴以下代码：

    `//save the file NPP_SAVE //redirect console output to $(OUTPUT) & silent mode npe_console v+ -- //convert winpath to cygpath D:\cygwin64\bin\bash -lc "cygpath \"$(FULL_CURRENT_PATH)\" //execute the file D:\cygwin64\bin\bash -lc "$(OUTPUT)"`

希望为某些人节省一些时间

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-13T07:30:05.683

使用此运行命令

`C:\cygwin64\bin\bash.exe -l -c "cd \"$0\" ; echo $@; \"./$1\"; exec bash;" "$(CURRENT_DIRECTORY)" "$(FILE_NAME)"`

您可以从运行对话框中保存此命令以供以后使用。

对于 git bash，更改路径如下：

`C:\Progra~1\Git\bin\bash -l -c "cd \"$0\" ; echo $@; \"./$1\"; exec bash;" "$(CURRENT_DIRECTORY)" "$(FILE_NAME)"`

# javascript - 用于超时用户和显示灯箱警报警告的 jQuery 插件

> ID：11234294
> 
> 赞同：1
> 
> 时间：2012-06-27T20:23:59.690
> 
> 标签：javascript, jquery

我正在寻找执行以下行为的 jQuery 插件： 1\. 查找用户在 10 分钟内不活动。2\. 10 分钟后显示警报或灯箱消息。我相信灯箱会更好。3\. 再过 5 分钟后，执行一个动作。

```
 My javascript code is : 

            <script type="text/javascript">
    var idleTime = 0;
    var activeTime = 0;
    var warningFlag = 0;
    setInterval(function checkIdle() {
        idleTime += 1;
        activeTime += 1;
        //document.write(idleTime + ' ' + activeTime);
        if(idleTime > 5) {
            alert("Idle from last 5 seconds!! You have been active for last "+ activeTime);
            warningFlag=1;
        }
        if((idleTime > 10) && (warningFlag==1)) {
            alert("Idle from last 10 seconds!! You have been active for last "+ activeTime);
            window.location = "www.tinyprints.com";
        }
        window.onload = resetTimer;
        document.onmousemove = resetTimer;
        document.onkeypress = resetTimer;
    },1000);

    function resetTimer() {
         idleTime = 0;
    }

</script>
    But i was thinking to use a jQuery plugin. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:27:02.617

这里有一个很好的 jQuery 插件： [http](http://www.erichynds.com/jquery/creating-a-mint-com-style-idle-logout-timer-using-jquery/) ://www.erichynds.com/jquery/creating-a-mint-com-style-idle-logout-timer-using-jquery/ 它可以让你做你想做的事。您可以通过更改参数轻松让它在 10 分钟后更改页面`redirectAfter`。

# android - 在android中实现循环执行？

> ID：11234295
> 
> 赞同：2
> 
> 时间：2012-06-27T20:24:00.930
> 
> 标签：android, loops, real-time, executives

我正在编写一个 android 应用程序，我需要能够定期/连续地做某些事情。我来自 C/C++ 嵌入式固件背景，这种新奇的做事方式需要一些时间来适应。似乎Android中没有“主循环”之类的东西，一切都是事件驱动的……我也明白，默认情况下，你编写的所有代码都在GUI线程上运行，我可能应该创建一个新线程执行相当于“主循环”...

到目前为止，我所拥有的是 AsyncTask 类的实现，它的“doInBackground”方法包含一个无限循环（我的主循环），我创建了这个类的一个实例并在我的应用程序启动时立即运行它。我遇到的问题是在这个线程和用户界面之间的交互......当我的主循环线程中发生某些事情并且我想更新 GUI 时，我知道我必须调用“publishProgress”，它在 GUI 线程上执行. 这有一些问题，主要是我在这个“onProgressUpdate”方法中尝试做的许多事情都不起作用，或者没有在可预测的时间内发生。

我的问题，有没有更好的方法来完成我想做的事情？一般来说，当大多数人在他们的应用程序运行时想要定期和/或连续运行代码时会做什么，这些代码必须及时与用户界面交互（我的意思是及时，零延迟）。

谢谢你。

```
public class MainLoopThread extends AsyncTask<Void, Void, Void>
{
    @Override
    protected Void doInBackground(Void... arg0)
    {
        while(true)
        {
            //Do stuff

            //Update GUI
            publishProgress();
        }   
    }

    protected void onProgressUpdate(Void...voids)
    {
        //Update GUI
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:00:46.650

目前尚不清楚您要做什么，但是让我说`AsyncTask`以这种方式使用可能会产生负面影响。

`AsyncTask`内部使用线程池模式来运行来自`doInBackground()`. 在 1.6 之前和从 3.0 开始的 Android OS 上，池大小仅为 1，这意味着一堆 AsyncTask 没有并行计算。更多细节在[这里](https://stackoverflow.com/a/4072832/247013)。

因此，这可能会导致只有这个当前`AsyncTask`正在运行，而其他即使启动也必须等到当前运行完成。

根据您对定期完成的事情的需求，Android 会公开：

*   [报警管理器](http://developer.android.com/intl/zh-CN/reference/android/app/AlarmManager.html)
*   [处理](http://developer.android.com/intl/zh-CN/reference/android/os/Handler.html)程序 - 它允许延迟或定期在 UI 线程上发布可运行的
*   [定时器](http://developer.android.com/intl/zh-CN/reference/java/util/Timer.html)+`Activity.runOnUiThread(Runnable action)`内部`TimerTask`

**更新：**根据您的评论，您似乎需要一个`Service`，它启动一个线程，该线程定期发送带有 UI 数据的广播。然后您的 UI（活动）注册广播接收器以捕获这些广播，提取数据并用于 UI 更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:31:56.943

所以你说 onProgessUpdate() 不起作用？这看起来很奇怪，因为它应该。您拥有的另一个选择就是制作一个循环的线程。诀窍是，如果你想更新 UI 线程，你必须调用 view.post() 并给它一个实际执行更新的 runnable。这里的想法是您必须在 UI 线程上安排更新，您不能只是接受它并说现在！

# sql - SQL/DBF 将记录从一个表更新到位于不同文件夹中的另一个表 (*.dbf)

> ID：11234298
> 
> 赞同：0
> 
> 时间：2012-06-27T20:24:06.810
> 
> 标签：sql, database, vb.net, dbf

将记录从一个表更新到位于不同文件夹中的另一个表。

```
Dim connection As New ADODB.Connection
Dim strConnection As String
Dim pathPrincipal As String
Dim pathUpdate As String 'External data base to update with TablePrincipal
Dim strSQL As String

pathPrincipal = "D:\DBFs"
strConnection = "Driver={Microsoft dBASE Driver (*.dbf)};DriverID=277;Dbq=" & PathPrincipal 

connection.Open strConnection
If connection.State <> adStateOpen Then Exit Sub 
```

'正确的 ：）

```
strSQL="UPDATE TablePrincipal#DBF" & " A INNER JOIN " & "TableUpdate#DBF" & " B ON A.ID = B.ID SET A.X=B.X, A.Y=B.Y"
'Execute 
connection.Execute strSQL, n, adCmdText 
```

以前的代码可以完美运行.....

但我的问题是当两个 DBF 不在同一个文件夹中但我正在尝试这不是其他方法时

```
'No working for external DBF :'( :(
strSQL = "UPDATE TablePrincipal#DBF A INNER JOIN" & _
         " OPENROWSET('MSDASQL','Driver={Microsoft dBase Driver (*.dbf)}; DBQ=" & _
         pathUpdate & "; SourceType = DBF ','SELECT * FROM TableUpdate#DBF') B" & _
         " ON A.ID=B.ID SET A.X=B.X, A.Y=B.Y" 
```

任何人都可以帮助我.....请！！！！为我的英语道歉:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:57:15.250

只需在 UPDATE 和 SELECT 查询中使用完整的文件名（包括路径）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:58:29.007

如果数据驻留在不同的卷上，例如 C:、D:、X:、Y:（或任何映射），如果不进行一些调整，您将非常不走运......

我不知道您的路径设置，但我知道我已经使用 VFP (Visual FoxPro) 并使用最新的 OleDB Provider 完成了以下工作......

在为数据文件建立连接时，您应该能够从连接点引用相对路径。但是，这只有在您所指的数据路径都在同一个逻辑卷上时才有效......例如

```
C:\SomePath\YourApplication\FirstDataFolder
C:\SomePath\YourApplication\SecondDataFolder

or even

C:\SomeOtherPath\AnotherDataLocation 
```

如果以上内容与您的环境相似，您可以创建与 C:\SomePath\YourApplication 的连接

然后，您的查询应该能够执行类似的操作

```
update FirstDataFolder\YourTable A
   JOIN SecondDataFolder\YourOtherTable B
     on a.field = b.field
   set ... etc
   where 
```

如果路径基于第三个路径示例，则您必须自己连接到 C:\，然后完全限定现在的“相对”数据路径，例如：

```
update SomePath\YourApplication\FirstDataFolder\YourTable A
   JOIN SomeOtherPath\AnotherDataLocation\YourOtherTable B
     on a.field = b.field
   set ... etc
   where 
```

# vb.net - 测试对象什么都没有和反射

> ID：11234303
> 
> 赞同：0
> 
> 时间：2012-06-27T20:24:28.213
> 
> 标签：vb.net

我得到 NullReferenceException ：

传真号码 = Customer.ContactLink.Contact.DefaultFaxLink.Phone.PhoneNumber

空 ref 在 DefaultFaxLink 上。由于没有传真号码，因此 DefaultFaxLink 未初始化，我知道如果是，我不会在分配时收到错误。

所以，我的问题是，有没有一种方法可以捕获异常而不必测试每个对象以查看它是否什么都不是？

我只想处理语句的整个右手部分，以便如果任何部分什么都不是，我只为左变量分配任何内容。

除此之外，我可以在基础对象上使用反射来评估每个成员及其子成员并分配一个空值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:19:05.787

您可以对 NullReferenceException 使用 Try-Catch 块

```
Public Class Customer
    Public ContactLink As ContactLink
End Class

Public Class ContactLink
    Public Contact As Contact
End Class

Public Class Contact
    Public DefaultFaxLink As FaxLink
End Class

Public Class FaxLink
    Public Phone As Phone
End Class

Public Class Phone
    Public PhoneNumber As String
End Class

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    Dim objCustomer As New Customer
    objCustomer.ContactLink = New ContactLink
    objCustomer.ContactLink.Contact = New Contact
    objCustomer.ContactLink.Contact.DefaultFaxLink = New FaxLink

    Dim PhoneNumber As String = ""

    Try
        PhoneNumber = objCustomer.ContactLink.Contact.DefaultFaxLink.Phone.PhoneNumber
    Catch ex As NullReferenceException
        PhoneNumber = ""
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try

    If Not String.IsNullOrEmpty(PhoneNumber) Then
        MsgBox("Fax number is..." & PhoneNumber)
    Else
        MsgBox("No fax number!")
    End If

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:45:04.080

写一个函数。

```
Public Class Customer

    Public Function GetFaxNumberSafe() As String

        If Me.ContactLink IsNot Nothing AndAlso
           Me.ContactLink.Contact IsNot Nothing AndAlso
           Me.ContactLink.Contact.DefaultFaxLink IsNot Nothing AndAlso
           Me.ContactLink.Contact.DefaultFaxLink.Phone IsNot Nothing Then

            Return Customer.ContactLink.Contact.DefaultFaxLink.Phone.PhoneNumber

        Else

            Return Nothing

        End If

    End Function

End Class 
```

您还可以将对象设置为在访问时延迟加载实例化，以便始终拥有对象引用。

```
Public Class Customer

    Private _contactLink As New Lazy(Of ContactLink)()

    Public ReadOnly Property ContactLink As ContactLink
        Get
            Return _contactLink.Value
        End Get
    End Property

End Class 
```

# node.js - 在 nodejs express 中运行 https 服务器时出现 ERR_SSL_PROTOCOL_ERROR 浏览器错误消息

> ID：11234306
> 
> 赞同：3
> 
> 时间：2012-06-27T20:24:55.583
> 
> 标签：node.js, https, express

我使用下面的代码在 Express 上运行了许多 nodejs 应用程序。它们都使用类似于以下的代码运行良好：

```
fs = require 'fs'                                                               
https = require 'https'                                                         
express = require 'express'                                                     
server_port = 3000                                                              
keys_dir = 'keys/'                                                              server_options = {
  key  : fs.readFileSync(keys_dir + 'privatekey.pem'), 
  cert : fs.readFileSync(keys_dir + 'certificate.pem')                          }                                                                                             app = express.createServer(server_options)
app.listen server_port 
console.log "HTTPS Server started on port #{server_port}" 
```

但是，当尝试使用此代码创建新应用程序时，我在启动 https 服务器时看到 ERR_SSL_PROTOCOL_ERROR。知道是什么导致了这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:24:56.287

我发现这是从 express 2.5.8 移动到 express 3 - 特别是 3.0.0beta4 时引起的。在创建新项目时，从 npm 中提取的版本已更改为版本 3 系列。即使在您运行`express --version`此版本时该模块被标记为“测试版”，但现在运行时安装的是`npm install express`. [此处](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)概述了更改的详细信息。

为了解决我的情况，我使用了以下代码：

```
const fs = require("fs");
const https = require("https");
const express = require("express");

const keysDir = "keys/";
const options = {
  key  : fs.readFileSync(keysDir + "privatekey.pem"),
  ca   : fs.readFileSync(keysDir + "certrequest.csr"),
  cert : fs.readFileSync(keysDir + "certificate.pem")
};

const app = express();
https.createServer(options, app).listen(3000); 
```

# ruby-on-rails - 部分标识符中的 Ruby on Rails 新对象在 1 处停止

> ID：11234313
> 
> 赞同：0
> 
> 时间：2012-06-27T20:25:14.313
> 
> 标签：ruby-on-rails, partial

我有文章，有很多文章资产。相当简单。在文章的编辑表单上，我只想添加新的文章资产。我不需要编辑当前的，所以我创建了一个这样的部分：

```
<% f.fields_for :article_assets, article_asset do |builder| -%>
    <div class="article_asset">
        <%= builder.file_field :image %>
        <%= builder.check_box :is_flagged, :class => "isFlagged" %> isFlagged
    </div>
<% end -%> 
```

没有集合，因为我一次只需要一个对象，并且不需要来自现有文章资产的数据。以 edit.erb 的形式，我呈现以下内容：

```
<%= render :partial => 'article_asset', :locals => {:f => f}, :object => ArticleAsset.new %> 
```

这使得一个新的文章资产出现，我可以添加信息，到目前为止一切都很酷。重要的是该字段获取**article[article_assets_attributes][0][is_flagged]**的名称形式。一切都很好，因为这也会将总是在 rails 中带有复选框的隐藏字段分组到其余字段。然后我有一个执行此操作的“添加项目”链接：

```
page.insert_html :bottom, :article_assets_fields, :partial => "article_asset", :locals => {:f => f}, :object => ArticleAsset.new 
```

正如预期的那样，单击此链接会在创建的字段下提供一个新字段，其名称形式为**article[article_assets_attributes][1][is_flagged]**的复选框字段。加分，完美！然而，添加另一个具有相同链接的表单也会给出相同的表单（标识符也为 1，重复），这使得提交表单只有 2 个项目而不是 3 个。有谁知道为什么会发生这种情况以及我能做些什么解决这个问题？

Ruby on Rails 2.3.11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:43:22.947

嵌套表格 2.3 失败。这个是我存在一段时间的祸根，甚至看过 railscast 等。这是我的方法：

1）这在article.rb中

```
 after_update :save_article_assets

    def new_article_asset_attributes=(article_asset_attributes)
      article_asset_attributes.each do |attributes|
        article_assets.build(attributes)
      end
    end

    def existing_article_asset_attributes=(article_asset_attributes)
      article_assets.reject(&:new_record?).each do |article_asset|
        attributes = article_asset_attributes[article_asset.id.to_s]
        if attributes
          article_asset.attributes = attributes
        else
          article_assets.delete(article_asset)
        end
      end
    end

    def save_article_assets
      article_assets.each do |article_asset|
        article_asset.save(false)
      end
    end 
```

2）在某处的助手中：

```
def add_article_asset_link(name)
  button_to_function name, :class => "new_green_btn" do |page|
        page.insert_html :bottom, :article_assets, :partial => "article_asset", :object => ArticleAsset.new()
    end
end

def fields_for_article_asset(article_asset, &block)
  prefix = article_asset.new_record? ? 'new' : 'existing'
  fields_for("article[#{prefix}_article_asset_attributes][]", article_asset, &block)
end 
```

3）在你的部分：

```
<% fields_for_article_asset(article_asset) do |aa| %>
    <tr class="article_asset">
      <td><%= aa.text_field :foo %></td>
        <td><%= link_to_function "remove", "$(this).up('.article_asset').remove()" %></td>
    </tr>
<% end %> 
```

4）在_form中：

```
<table>
    <%= render :partial => "article_asset", :collection => @article.article_assets %>
</table>

<%= add_article_asset_link "Add asset" %> 
```

# vba - 更改没有依赖项的单元格会导致完整重新计算包含许多带有 UDF 调用的公式的工作表

> ID：11234317
> 
> 赞同：-1
> 
> 时间：2012-06-27T20:25:27.413
> 
> 标签：vba, excel

我有一个大型电子表格，其中几个单元格具有在电子表格中调用自定义 VBA 函数的公式。

有时，*但并非总是*如此，如果我更改一个完全没有依赖项的任意单元格（即：电子表格中没有公式引用该单元格），它将导致工作簿的完全重新计算。

对此有任何潜在的合乎逻辑的解释吗？

## 更新

没有与 SheetChange 相关的代码（不存在事件处理程序），也没有任何工作表后面的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:29:56.357

似乎代码是在更改定义的（目标）单元格时从工作*表模块自动执行的。*

# php - 将数组转换为树状 JSON 结构

> ID：11234318
> 
> 赞同：0
> 
> 时间：2012-06-27T20:25:29.150
> 
> 标签：php, arrays, json

这是我试图转换为 JSON 对象的数组：

```
Array
(
    [0] => 102
    [id] => 102
    [1] => 
    [attribution] => 
    [2] => image
    [type] => image
    [3] => 
    [latitude] => 
    [4] => 
    [longitude] => 
    [5] => 81
    [comments] => 81
    [6] => Nashville
    [filter] => Nashville
    [7] => 1340803981
    [created_time] => 1340803981
    [8] => http://instagr.am/p/MYQ4IqTVHm/
    [link] => http://instagr.am/p/MYQ4IqTVHm/
    [9] => 1847
    [likes] => 1847
    [10] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_6.jpg
    [low_resolution] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_6.jpg
    [11] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_5.jpg
    [thumbnail] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_5.jpg
    [12] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_7.jpg
    [standard_resolution] => http://distilleryimage6.s3.amazonaws.com/9dcd44d2c05c11e1a39b1231381b7ba1_7.jpg
    [13] => 223002407889359334_26499947
    [pid] => 223002407889359334_26499947
    [14] => doutzenkroes1
    [username] => doutzenkroes1
    [15] => 
    [website] => 
    [16] => 
    [bio] => 
    [17] => http://images.instagram.com/profiles/profile_26499947_75sq_1335638089.jpg
    [profile_picture] => http://images.instagram.com/profiles/profile_26499947_75sq_1335638089.jpg
    [18] => Doutzen Kroes
    [full_name] => Doutzen Kroes
    [19] => 26499947
    [uid] => 26499947
)
Array
(
    [0] => 101
    [id] => 101
    [1] => 
    [attribution] => 
    [2] => image
    [type] => image
    [3] => 13.827936172
    [latitude] => 13.827936172
    [4] => 100.471916198
    [longitude] => 100.471916198
    [5] => 20
    [comments] => 20
    [6] => Brannan
    [filter] => Brannan
    [7] => 1340802429
    [created_time] => 1340802429
    [8] => http://instagr.am/p/MYN62aqdE8/
    [link] => http://instagr.am/p/MYN62aqdE8/
    [9] => 1497
    [likes] => 1497
    [10] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_6.jpg
    [low_resolution] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_6.jpg
    [11] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_5.jpg
    [thumbnail] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_5.jpg
    [12] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_7.jpg
    [standard_resolution] => http://distilleryimage4.s3.amazonaws.com/00df3f7ac05911e1b2fe1231380205bf_7.jpg
    [13] => 222989400318529852_1387675
    [pid] => 222989400318529852_1387675
    [14] => wan_soloist
    [username] => wan_soloist
    [15] => http://www.facebook.com/WanThanakrit
    [website] => http://www.facebook.com/WanThanakrit
    [16] => Soloist SnapShot & Last Lemonade~!!
    [bio] => Soloist SnapShot & Last Lemonade~!!
    [17] => http://images.instagram.com/profiles/profile_1387675_75sq_1334119071.jpg
    [profile_picture] => http://images.instagram.com/profiles/profile_1387675_75sq_1334119071.jpg
    [18] => Wan Soloist
    [full_name] => Wan Soloist
    [19] => 1387675
    [uid] => 1387675
)
Array
(
    [0] => 100
    [id] => 100
    [1] => 
    [attribution] => 
    [2] => image
    [type] => image
    [3] => 
    [latitude] => 
    [4] => 
    [longitude] => 
    [5] => 25
    [comments] => 25
    [6] => Normal
    [filter] => Normal
    [7] => 1340804961
    [created_time] => 1340804961
    [8] => http://instagr.am/p/MYSwEjCzRq/
    [link] => http://instagr.am/p/MYSwEjCzRq/
    [9] => 1544
    [likes] => 1544
    [10] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_6.jpg
    [low_resolution] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_6.jpg
    [11] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_5.jpg
    [thumbnail] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_5.jpg
    [12] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_7.jpg
    [standard_resolution] => http://distilleryimage10.s3.amazonaws.com/e5ad1776c05e11e19dc71231380fe523_7.jpg
    [13] => 223010649809826922_10380716
    [pid] => 223010649809826922_10380716
    [14] => amarelloo
    [username] => amarelloo
    [15] => 
    [website] => 
    [16] => 
    [bio] => 
    [17] => http://images.instagram.com/profiles/profile_10380716_75sq_1338715577.jpg
    [profile_picture] => http://images.instagram.com/profiles/profile_10380716_75sq_1338715577.jpg
    [18] => Marcelo PeÃ±a
    [full_name] => Marcelo PeÃ±a
    [19] => 10380716
    [uid] => 10380716
)
Array
(
    [0] => 99
    [id] => 99
    [1] => 
    [attribution] => 
    [2] => image
    [type] => image
    [3] => 
    [latitude] => 
    [4] => 
    [longitude] => 
    [5] => 43
    [comments] => 43
    [6] => Sutro
    [filter] => Sutro
    [7] => 1340799635
    [created_time] => 1340799635
    [8] => http://instagr.am/p/MYIlthLZhQ/
    [link] => http://instagr.am/p/MYIlthLZhQ/
    [9] => 1412
    [likes] => 1412
    [10] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_6.jpg
    [low_resolution] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_6.jpg
    [11] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_5.jpg
    [thumbnail] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_5.jpg
    [12] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_7.jpg
    [standard_resolution] => http://distilleryimage4.s3.amazonaws.com/7f18b29cc05211e1b00112313800c5e4_7.jpg
    [13] => 222965957422585936_11252917
    [pid] => 222965957422585936_11252917
    [14] => stevesototattoo
    [username] => stevesototattoo
    [15] => http://www.stevesototattoo.com
    [website] => http://www.stevesototattoo.com
    [16] => Tattoo Artist & Owner of Goodfellas Tattoo Art & Design Studio. World Traveling Tattoo Artist. West Coast Reppin
    [bio] => Tattoo Artist & Owner of Goodfellas Tattoo Art & Design Studio. World Traveling Tattoo Artist. West Coast Reppin
    [17] => http://images.instagram.com/profiles/profile_11252917_75sq_1339634703.jpg
    [profile_picture] => http://images.instagram.com/profiles/profile_11252917_75sq_1339634703.jpg
    [18] => Steve Soto Tattoo Art Co.
    [full_name] => Steve Soto Tattoo Art Co.
    [19] => 11252917
    [uid] => 11252917
)
Array
(
    [0] => 98
    [id] => 98
    [1] => 
    [attribution] => 
    [2] => image
    [type] => image
    [3] => 
    [latitude] => 
    [4] => 
    [longitude] => 
    [5] => 83
    [comments] => 83
    [6] => Valencia
    [filter] => Valencia
    [7] => 1340800009
    [created_time] => 1340800009
    [8] => http://instagr.am/p/MYJTYbhVND/
    [link] => http://instagr.am/p/MYJTYbhVND/
    [9] => 1824
    [likes] => 1824
    [10] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_6.jpg
    [low_resolution] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_6.jpg
    [11] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_5.jpg
    [thumbnail] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_5.jpg
    [12] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_7.jpg
    [standard_resolution] => http://distilleryimage11.s3.amazonaws.com/5e24e56ec05311e1af7612313813f8e8_7.jpg
    [13] => 222969095875023683_3745339
    [pid] => 222969095875023683_3745339
    [14] => namidacross
    [username] => namidacross
    [15] => 
    [website] => 
    [16] => Art Director / Graphic Designer // Japan

My another account 
B&W only â–· @namidacrossbw

    [bio] => Art Director / Graphic Designer // Japan

My another account 
B&W only â–· @namidacrossbw

    [17] => http://images.instagram.com/profiles/profile_3745339_75sq_1315794772.jpg
    [profile_picture] => http://images.instagram.com/profiles/profile_3745339_75sq_1315794772.jpg
    [18] => NAMiDA+
    [full_name] => NAMiDA+
    [19] => 3745339
    [uid] => 3745339
) 
```

这是我用来获取它并将其转换为有效的 json 对象的代码，以便我的 Javascript 代码可以获取并解析它。

```
 $query = mysql_query("SELECT * FROM `table_name` ORDER BY id DESC LIMIT 5") or die(mysql_error()); // fetching the latest 5 rows
    while ($result = mysql_fetch_array($query)) {
        //echo "<pre>"; print_r($result); echo "</pre>";
        print (json_encode($result));
    } 
```

但我得到的响应`json_encode`似乎不是一个有效的 json 对象！我究竟做错了什么 ？

这是发出的 json 对象

```
{
  "0": "102",
  "id": "102",
  "1": "",
  "attribution": "",
  "2": "image",
  "type": "image",
  "3": "",
  "latitude": "",
  "4": "",
  "longitude": "",
  "5": "81",
  "comments": "81",
  "6": "Nashville",
  "filter": "Nashville",
  "7": "1340803981",
  "created_time": "1340803981",
  "8": "http:\/\/instagr.am\/p\/MYQ4IqTVHm\/",
  "link": "http:\/\/instagr.am\/p\/MYQ4IqTVHm\/",
  "9": "1847",
  "likes": "1847",
  "10": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_6.jpg",
  "low_resolution": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_6.jpg",
  "11": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_5.jpg",
  "thumbnail": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_5.jpg",
  "12": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_7.jpg",
  "standard_resolution": "http:\/\/distilleryimage6.s3.amazonaws.com\/9dcd44d2c05c11e1a39b1231381b7ba1_7.jpg",
  "13": "223002407889359334_26499947",
  "pid": "223002407889359334_26499947",
  "14": "doutzenkroes1",
  "username": "doutzenkroes1",
  "15": "",
  "website": "",
  "16": "",
  "bio": "",
  "17": "http:\/\/images.instagram.com\/profiles\/profile_26499947_75sq_1335638089.jpg",
  "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_26499947_75sq_1335638089.jpg",
  "18": "Doutzen Kroes",
  "full_name": "Doutzen Kroes",
  "19": "26499947",
  "uid": "26499947"
} {
  "0": "101",
  "id": "101",
  "1": "",
  "attribution": "",
  "2": "image",
  "type": "image",
  "3": "13.827936172",
  "latitude": "13.827936172",
  "4": "100.471916198",
  "longitude": "100.471916198",
  "5": "20",
  "comments": "20",
  "6": "Brannan",
  "filter": "Brannan",
  "7": "1340802429",
  "created_time": "1340802429",
  "8": "http:\/\/instagr.am\/p\/MYN62aqdE8\/",
  "link": "http:\/\/instagr.am\/p\/MYN62aqdE8\/",
  "9": "1497",
  "likes": "1497",
  "10": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_6.jpg",
  "low_resolution": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_6.jpg",
  "11": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_5.jpg",
  "thumbnail": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_5.jpg",
  "12": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_7.jpg",
  "standard_resolution": "http:\/\/distilleryimage4.s3.amazonaws.com\/00df3f7ac05911e1b2fe1231380205bf_7.jpg",
  "13": "222989400318529852_1387675",
  "pid": "222989400318529852_1387675",
  "14": "wan_soloist",
  "username": "wan_soloist",
  "15": "http:\/\/www.facebook.com\/WanThanakrit",
  "website": "http:\/\/www.facebook.com\/WanThanakrit",
  "16": "Soloist SnapShot & Last Lemonade~!!",
  "bio": "Soloist SnapShot & Last Lemonade~!!",
  "17": "http:\/\/images.instagram.com\/profiles\/profile_1387675_75sq_1334119071.jpg",
  "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_1387675_75sq_1334119071.jpg",
  "18": "Wan Soloist",
  "full_name": "Wan Soloist",
  "19": "1387675",
  "uid": "1387675"
} {
  "0": "100",
  "id": "100",
  "1": "",
  "attribution": "",
  "2": "image",
  "type": "image",
  "3": "",
  "latitude": "",
  "4": "",
  "longitude": "",
  "5": "25",
  "comments": "25",
  "6": "Normal",
  "filter": "Normal",
  "7": "1340804961",
  "created_time": "1340804961",
  "8": "http:\/\/instagr.am\/p\/MYSwEjCzRq\/",
  "link": "http:\/\/instagr.am\/p\/MYSwEjCzRq\/",
  "9": "1544",
  "likes": "1544",
  "10": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_6.jpg",
  "low_resolution": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_6.jpg",
  "11": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_5.jpg",
  "thumbnail": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_5.jpg",
  "12": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_7.jpg",
  "standard_resolution": "http:\/\/distilleryimage10.s3.amazonaws.com\/e5ad1776c05e11e19dc71231380fe523_7.jpg",
  "13": "223010649809826922_10380716",
  "pid": "223010649809826922_10380716",
  "14": "amarelloo",
  "username": "amarelloo",
  "15": "",
  "website": "",
  "16": "",
  "bio": "",
  "17": "http:\/\/images.instagram.com\/profiles\/profile_10380716_75sq_1338715577.jpg",
  "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_10380716_75sq_1338715577.jpg",
  "18": "Marcelo Pe\u00f1a",
  "full_name": "Marcelo Pe\u00f1a",
  "19": "10380716",
  "uid": "10380716"
} {
  "0": "99",
  "id": "99",
  "1": "",
  "attribution": "",
  "2": "image",
  "type": "image",
  "3": "",
  "latitude": "",
  "4": "",
  "longitude": "",
  "5": "43",
  "comments": "43",
  "6": "Sutro",
  "filter": "Sutro",
  "7": "1340799635",
  "created_time": "1340799635",
  "8": "http:\/\/instagr.am\/p\/MYIlthLZhQ\/",
  "link": "http:\/\/instagr.am\/p\/MYIlthLZhQ\/",
  "9": "1412",
  "likes": "1412",
  "10": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_6.jpg",
  "low_resolution": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_6.jpg",
  "11": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_5.jpg",
  "thumbnail": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_5.jpg",
  "12": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_7.jpg",
  "standard_resolution": "http:\/\/distilleryimage4.s3.amazonaws.com\/7f18b29cc05211e1b00112313800c5e4_7.jpg",
  "13": "222965957422585936_11252917",
  "pid": "222965957422585936_11252917",
  "14": "stevesototattoo",
  "username": "stevesototattoo",
  "15": "http:\/\/www.stevesototattoo.com",
  "website": "http:\/\/www.stevesototattoo.com",
  "16": "Tattoo Artist & Owner of Goodfellas Tattoo Art & Design Studio. World Traveling Tattoo Artist. West Coast Reppin",
  "bio": "Tattoo Artist & Owner of Goodfellas Tattoo Art & Design Studio. World Traveling Tattoo Artist. West Coast Reppin",
  "17": "http:\/\/images.instagram.com\/profiles\/profile_11252917_75sq_1339634703.jpg",
  "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_11252917_75sq_1339634703.jpg",
  "18": "Steve Soto Tattoo Art Co.",
  "full_name": "Steve Soto Tattoo Art Co.",
  "19": "11252917",
  "uid": "11252917"
} {
  "0": "98",
  "id": "98",
  "1": "",
  "attribution": "",
  "2": "image",
  "type": "image",
  "3": "",
  "latitude": "",
  "4": "",
  "longitude": "",
  "5": "83",
  "comments": "83",
  "6": "Valencia",
  "filter": "Valencia",
  "7": "1340800009",
  "created_time": "1340800009",
  "8": "http:\/\/instagr.am\/p\/MYJTYbhVND\/",
  "link": "http:\/\/instagr.am\/p\/MYJTYbhVND\/",
  "9": "1824",
  "likes": "1824",
  "10": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_6.jpg",
  "low_resolution": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_6.jpg",
  "11": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_5.jpg",
  "thumbnail": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_5.jpg",
  "12": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_7.jpg",
  "standard_resolution": "http:\/\/distilleryimage11.s3.amazonaws.com\/5e24e56ec05311e1af7612313813f8e8_7.jpg",
  "13": "222969095875023683_3745339",
  "pid": "222969095875023683_3745339",
  "14": "namidacross",
  "username": "namidacross",
  "15": "",
  "website": "",
  "16": "Art Director \/ Graphic Designer \/\/ Japan\r\n\r\nMy another account \r\nB&W only \u25b7 @namidacrossbw\r\n",
  "bio": "Art Director \/ Graphic Designer \/\/ Japan\r\n\r\nMy another account \r\nB&W only \u25b7 @namidacrossbw\r\n",
  "17": "http:\/\/images.instagram.com\/profiles\/profile_3745339_75sq_1315794772.jpg",
  "profile_picture": "http:\/\/images.instagram.com\/profiles\/profile_3745339_75sq_1315794772.jpg",
  "18": "NAMiDA+",
  "full_name": "NAMiDA+",
  "19": "3745339",
  "uid": "3745339"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:29:28.580

您的 javascript 可能会收到类似`{"id":1,...}{"id":2}{...}{...}`而不是`[{"id":1,...},{"id":2},{...},{...},....]`

您应该将所有行收集到一个数组中，当您拥有所有行时，然后对行数组进行编码：

```
$query = mysql_query("SELECT * FROM `table_name` ORDER BY id DESC LIMIT 5");
$rows = array();

    while ($result = mysql_fetch_assoc($query)) {
        $rows[] = $result;
    }
    echo json_encode( $rows ); 
```

# database-design - 如何为尚无模式的信息设计数据库？

> ID：11234319
> 
> 赞同：1
> 
> 时间：2012-06-27T20:25:31.787
> 
> 标签：database-design, blob

假设我想建立一个电子邮件数据库。由于我不了解电子邮件的结构，我可能会将电子邮件存储在一个只有基本属性的简单表中：

```
Emails
   email_id   integer (PK)
   from       varchar(200)
   sent       timestamp
   email      blob 
```

但后来我决定我毕竟了解电子邮件的结构，并希望扩展我的数据库以将整个电子邮件表示为结构化数据，而不仅仅是一个 blob。我可能会使用适当的外键和关联表创建一个 EmailAddress 实体、一个 MIME 实体、一个 Header 实体。

*但是我现在*可以在我的数据库中做什么，以期待有一天将 blob 解压缩到子模式中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:26:57.170

不要为此使用关系数据库。

使用[文档数据库](http://en.wikipedia.org/wiki/Document-oriented_database)或其他一些[无模式数据存储](http://en.wikipedia.org/wiki/NoSQL)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:27:29.993

考虑将其存储为结构化格式（例如 XML），以便以后可以有效地将数据转换为适当的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T11:36:07.213

*   通过实现访问层来屏蔽未来的模式更改。使用视图读取，存储过程（或触发器）写入底层表——避免从应用层直接访问表。

*   考虑锚建模方法，它使用 6NF 并且非常适合不断变化 - 模式演变。锚建模收费会自动创建视图和触发器作为访问层。

# android - android：如何在锁屏设置中添加一个条目？

> ID：11234320
> 
> 赞同：0
> 
> 时间：2012-06-27T20:25:32.457
> 
> 标签：android, android-screen

我想创建一个自定义屏幕锁定/解锁小部件并在“标准”屏幕锁定设置菜单中对其进行配置。

是否可以通过编程方式在设置标准菜单中添加新条目？

如果是，如何？有人可以提供代码示例吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T03:24:09.997

锁屏在完全独立的沙盒环境中运行，第三方应用程序无法访问。Android 目前不支持此功能。对不起。

# macos - 应用程序总是请求访问钥匙串的权限

> ID：11234323
> 
> 赞同：8
> 
> 时间：2012-06-27T20:25:35.517
> 
> 标签：macos, xcode4

我有一个将用户名和密码存储在钥匙串中的应用程序。在 Xcode 3 上工作时一切正常，我最近搬到了 Xcode 4，现在当我运行应用程序时，我得到一个提示：

`Application wants to use your confidential information stored in keychain" in your keychain.`

点击总是允许后，我看到应用程序添加到钥匙串项目的访问控制列表中，但每次运行应用程序时都会得到。

同样在再次点击始终允许后，我看到访问控制有同一个应用程序的两个实例。似乎操作系统认为这是一个新应用程序。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T17:50:28.563

我认为问题在于您的签名的指定要求导致它不接受自己作为与自己“相同的应用程序”（出于钥匙串的目的）。

造成这种情况的一个常见原因（我认为这是您的原因）是使用开发人员 ID 应用程序证书，没有指定要求，也没有安装中间证书。

标准的开发者 ID 要求如下所示：

```
designated => anchor apple generic and 
identifier \"com.example.appName\" and 
((cert leaf[field.1.2.840.113635.100.6.1.9] exists) or 
 (certificate 1[field.1.2.840.113635.100.6.2.6] exists and 
 certificate leaf[field.1.2.840.113635.100.6.1.13] exists  and 
 certificate leaf[subject.OU] = \"1AZBYCXDW9V\" )) 
```

如果您想自己构建它，则必须将标识符替换为捆绑标识符，并将 subject.OU 替换为证书中的值。（如果您在 Keychain Access 中双击它，它应该被列为组织单位。）然后您可以添加到“Other Code Signing Flags”：

```
--requirements "=designated ..." (the whole mess from above) 
```

但是，更好的方法是使用 Xcode 4.3.2 或更高版本。如果它识别出您正在使用开发人员 ID 应用程序证书，并且可以在钥匙串中看到中间证书，它将默认生成此证书。

此外，如果您使用 Xcode 中的存档管理器来“导出开发人员 ID 签名的应用程序”，而不是仅使用目标目录中的构建，它将确保对您的应用程序和任何其他随附的可签名文件进行签名，并且它将测试一切都设置正确。（失败非常神秘——例如，您的“选择要签名的开发者 ID”步骤可能没有选择，系统日志中的消息没有有用的信息——但至少失败或成功的事实缩小了范围你的问题在哪里。）

无论哪种方式，您都需要从[Developer Certificate Utility](https://developer.apple.com/certificates/index.action)站点上的“Developer ID Intermediate Certificate”链接下载并安装（在您的构建机器上）名为“Developer ID Certification Authority”的中间证书。

最后一件事：即使这可以解决您在构建机器上运行的问题，您也确实希望在您支持的最旧的操作系统版本上进行测试。例如，Lion 的 codesign 编译的需求有时无法在 Leopard 上解析，有时甚至无法在 Snow Leopard 上解析。如果发生这种情况……请参阅[Gatekeeper vs. Leopard：一个正在进行的故事](http://fetchsoftworks.com/fetch/blog/gatekeeper-vs-leopard-an-ongoing-tale)。

# objective-c - 我将如何创建一个带有开始按钮的加载屏幕，该按钮可以通向我的应用程序的其余部分？

> ID：11234325
> 
> 赞同：0
> 
> 时间：2012-06-27T20:25:37.387
> 
> 标签：objective-c, ios

在我的应用程序中，我想要一个带有开始按钮的加载屏幕，当用户按下开始按钮时，它会显示我的应用程序的实际部分。

我不能使用 Default.png，因为我需要开始按钮的功能。由于我的 rootViewController 是一个 tabBar，我不能简单地将我的屏幕添加为子视图，因为那时我的加载屏幕只会出现在每个单独的选项卡中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:35:35.220

您可以创建一个新的视图控制器并将该视图控制器设置为根视图控制器。在新的视图控制器中，创建一个带有加载图像的 UIImageView 和一个你想要的 UIButton。然后您可以进入情节提要并让按钮转换到“[您的] 应用程序的实际部分”。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:42:26.813

有几种方法可以做到这一点。假设您的应用程序在开始屏幕上花费的时间很少，我会将其实现为显示在根选项卡视图上的模态视图控制器。

首次加载根标签栏视图后，呈现*不带*动画的开始屏幕视图控制器。

```
[tabBarViewController presentViewController:startViewController animated:NO completion:NULL]; 
```

如果您足够早地这样做（例如，在您的应用程序委托的 didFinishLaunching: 方法中），开始屏幕将是用户看到的第一件事。很难说你应该在哪里插入这段代码，因为你没有说你是使用故事板还是默认笔尖或手动加载视图等。

按下按钮时，只需关闭 startViewController。

# c# - 如何读取本地 MJPEG 文件

> ID：11234327
> 
> 赞同：1
> 
> 时间：2012-06-27T20:25:58.957
> 
> 标签：c#, .net, xna, jpeg, mjpeg

我正在 XNA 中为 Windows Phone 编写一个应用程序......我想读取存储在应用程序资源中的 MJPEG 流。我找到了许多关于如何通过 WebHttpRequest 从网站获取 MJPEG 的示例，如下所示：

```
 // get the response
        HttpWebRequest request = (HttpWebRequest) asyncResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse) request.EndGetResponse(asyncResult);

        try {
            // find boundary value
            string contentType = response.Headers["Content-Type"];

            if (!String.IsNullOrEmpty(contentType) && !contentType.Contains("=")) {
                throw new FormatException("Invalid content-type header.  The source is likely not returning a proper MJPEG stream.");
            }

            string boundary = response.Headers["Content-Type"].Split('=')[1].Replace("\"", "");
            byte[] boundaryBytes = Encoding.UTF8.GetBytes(boundary.StartsWith("--") ? boundary : "--" + boundary);

            using (Stream stream = response.GetResponseStream()) {
                using (BinaryReader binaryReader = new BinaryReader(stream)) {

                   // code to parse the MJPEG stream
                }
            }
        } finally {
            response.Close();
        } 
```

...但这并不是我想要的。下面是我从应用程序资源中将 MJPEG 作为二进制流读取的代码：

```
 private void ParseMjpeg(object uri)
    {
        // what the corresponding code for determining the boundary bytes in my local MJPEG?
        byte[] boundaryBytes = ???

        using (Stream stream = TitleContainer.OpenStream(uri.ToString())) {
            using (BinaryReader binaryReader = new BinaryReader(stream)) {

                // code to parse the MJPEG stream as before: OK
            }
        }
    } 
```

如何在上面的代码中确定边界字节？任何帮助将非常感激。

谢谢，j3d

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:54:52.943

这应该会让你的生活更轻松。据我了解，DLL 应该为您提供您需要的大部分内容。

[http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder](http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder)

# iphone - 尝试创建函数来计算检查单元格的数量并从另一个函数调用它

> ID：11234328
> 
> 赞同：2
> 
> 时间：2012-06-27T20:25:59.333
> 
> 标签：iphone, objective-c, function, uitableview, methods

所以我创建了一个函数：

```
-(void)checkCount:(UITableView *)tableView isIndexPathChecked:(NSIndexPath *)indexPath{
NSString *name = [[NSString alloc] init];
UITableViewCell *investigatedCell = [tableView cellForRowAtIndexPath:indexPath];
if(investigatedCell.accessoryType ==UITableViewCellAccessoryCheckmark)
    name = investigatedCell.textLabel.text;
[checkedRows addObject: name];
} 
```

每次尝试从另一个方法中调用此方法时，我都会遇到错误。什么是正确的语法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:35:35.840

我相信您看到的错误是因为您的公共头文件中不存在方法调用。尝试添加

```
-(void)checkCount:(UITableView *)tableView isIndexPathChecked:(NSIndexPath *)indexPath; 
```

到您的 .h 文件。

您可能还想仔细检查您的拼写，并确保您将方法调用发送到正确的对象。我猜是自己。

```
UITableView *myTable = pointer_to_tableView_instance;
NSIndexPath *indexPath = pointer_to_indexPath_to_check;
[self checkCount:myTable isIndexPathChecked:indexPath];
NSLog(@"%i",checkedRows.count); 
```

# php - 比较 HTML 和 Javascript

> ID：11234333
> 
> 赞同：2
> 
> 时间：2012-06-27T20:26:29.383
> 
> 标签：php, javascript, jquery, ajax

所以我想知道一些事情。在我正在制作的 IM/聊天网站中，我让它每隔 10 秒左右检查一次数据库，看看是否有新数据进入。而且，当用户发布新评论时，它会自动将其发送到数据库并将其添加到评论列表而不重新加载。但它每次都会加载所有评论。

我想知道是否有可能在不对所有旧评论都这样做的情况下为新评论添加效果（例如淡入）。

```
function update(){
    oldhtml = $('#listposts');
    $.ajax({
            type: "POST",
            data: "",
            url: "update.php",
            success: function(msg){
                $("#listposts").html(msg);
                $('.comment_date').each(function(){
                    $(this).text('[' + prettyDate($(this).text())+']');
                if(oldhtml == )
                });
            }
        });
}
var intervalID = window.setInterval(update, 10000); 
```

这是我的更新代码。这是我的邮政编码：

```
$("#postbutton").click(function () {
    if(!$('#post').val()==""){
        $.ajax({
            type: "POST",
            data: "data=" + $("#post").val(),
            url: "post.php",
            success: function(msg){
                $("#listposts").html(msg);
                $('.comment_date').each(function(){
                    $(this).text('[' + prettyDate($(this).text())+']');
                });
            }
        });
        $("#post").val("");
    }
}); 
```

如您所见，我也在使用 prettyDate。但这与这个问题无关。

因此，正如标题所述，我将尝试将当前 html 保存在一个变量 (oldhtml) 中，然后加载新内容。然后我会比较两者，然后使用新评论淡入。我在那里吗？我错过了重点吗？

哦，请不要仅仅因为我错过了一个明显的解决方案而对我投反对票。如果我解释得不好，我认为你应该使用它，我想我做到了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:30:26.300

您可以在`success`处理程序中执行此操作：

```
var $dv = $('<div />').css('display', 'none').html(msg);
$("#listposts").append($dv);
$dv.fadeIn(); 
```

当然，您可以根据需要使用 a`<span>`而不是。`<div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:38:02.710

类似于 Blaster 的...

```
 $('<div />').html(msg).appendTo('#posts').hide().fadeIn(); 
```

# c# - VS C# 网站登录工具连接到非默认 SQL 数据库

> ID：11234334
> 
> 赞同：0
> 
> 时间：2012-06-27T20:26:33.347
> 
> 标签：c#, asp.net, sql, database, login

我想使用 VS 工具箱中的登录工具在网站上登录用户，但它默认连接到 ASPNETDB.MDF 以验证用户，但我希望它连接到我自己的数据库。我想我需要在 ASPNETDB 中制作类似的用户表以用于格式化目的，但这没什么大不了的。应该有一个简单的方法来明确定义要连接到哪个数据库，但我找不到它，我对此还是有点陌生​​。由于自动密码散列等原因，我想尽可能使用登录框，而且我不想担心自己为这样一个小项目做这件事。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:00:34.323

Login 控件使用[asp.net Membership Provider](http://msdn.microsoft.com/en-us/library/ms731049.aspx)。

这是一个快速链接，可以帮助您走上正确的道路：

[http://www.misfitgeek.com/adding-asp-net-membership-to-your-own-database/](http://www.misfitgeek.com/adding-asp-net-membership-to-your-own-database/)

# c# - 我们如何降低 iOS 游戏的功耗？

> ID：11234335
> 
> 赞同：2
> 
> 时间：2012-06-27T20:26:43.653
> 
> 标签：c#, iphone, ipad, game-engine, battery

我们刚刚开发了一款 iOS 游戏，用户一直抱怨它会耗尽电池电量。它以每秒 60 帧的速度播放，并使用专有的游戏引擎（用 C# 编写）。其中一个可能是问题，还是应该首先调查其他常见因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:31:26.100

Apple[在他们的 iOS 编程指南中有一些关于降低功耗的指导方针](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html#//apple_ref/doc/uid/TP40007072-CH8-SW56)

开始一些技巧的好地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:24:10.140

首先，通过 Instruments 运行代码，看看它如何影响 CPU 使用率（持续高 CPU 会耗尽电池电量）。另外，您是否使用任何设备功能，例如 GPS 或 WIFI？这些将进一步耗尽电池。

其次，当您的应用程序应该挂起可能会消耗电池电量时，您是否会运行任何后台进程？

您可以通过检查设备日志的功耗、进行更改和保存另一个日志来跟踪您增强的任何性能。

[按照这些说明完成此操作](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Built-InInstruments/Built-InInstruments.html#//apple_ref/doc/uid/TP40004652-CH6-SW63)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:34:42.960

可能有一个简单的答案，尝试以 30 FPS 或什至低至 24 FPS 的速度运行游戏。有什么真正的理由需要如此快速地运行它吗？？？

顺便说一句，我说 24 是“技术上”你的眼睛（对于大多数人来说）可以检测到的最快速度。

在视频中，我们尽量走高，因为从录制过程中可以看到有伪影，但由于游戏有生成场景，一般不需要高于24。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:35:37.973

一个好的第一步是将帧速率降低到 30 FPS。对于任何合理的游戏，60 FPS 都是过大的。在某些时候，您的眼睛无法分辨出差异，除非帧速率在跳跃。该速率大约为 24-30 FPS，这就是它最常用于视频和游戏的原因。

不过，我会提醒您，如果您确实有实时游戏（尤其是基于反射的游戏），请在另一个线程上执行您的游戏逻辑。如果不这样做，您可能会遇到其他游戏存在的缺陷，例如：

使命召唤：现代战争 3 的引擎设计有一个重大缺陷，即你的枪射击的射速完全取决于游戏的帧速率，而不是由后台线程决定。

这使得某些武器比其他武器更危险，因为在大约 60 FPS 的帧速率下，它们每次射击的时间都是整数。

因此，话虽如此，请尝试降低帧速率。仅此一项可能就是消耗大部分电池的原因。

# css - 非兄弟元素的任何 nth:child 等价物？

> ID：11234346
> 
> 赞同：0
> 
> 时间：2012-06-27T20:27:34.850
> 
> 标签：css, css-selectors

我在一个网站上工作，遇到了一个问题。我有几个 div 应用了相同的 css 类。我想使用 css 变换每隔 3、5、8 等旋转一次，以呈现随机性。过去我用 nth-child 做过这个，但现在我的 div 不是直接的兄弟姐妹，而是从共同的父级嵌套了大约 5 个级别。

这是代码的简化（太长，无法全部添加）。

```
<tr>
  <td valign="top" width="20%">
    <form>
      <div class="box fp-product-listing">
        <div class="product-image">
          <a href="">
            <img class=" " />
          </a>
        </div>
        <div class="product-description">
          <a href="""></a>
          <div class="prices"> <- THIS IS THE DIV TO BE STYLED
          </div>
        </div>
      </div>
    </form>
  </td>
  <td valign="top" width="20%">
    <form>
      <div class="box fp-product-listing">
        <div class="product-image">
          <a href="">
            <img class=" " />
          </a>
        </div>
        <div class="product-description">
          <a href="""></a>
          <div class="prices"> <- THIS IS THE DIV TO BE STYLED
          </div>
        </div>
      </div>
    </form>
  </td>
</tr> 
```

关于如何使用纯 CSS 做到这一点的任何建议？（不，我不会为了这个小效果而使用 jQuery :)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:06:31.213

从您提供的 HTML 中，看起来每个`div.prices`都在其自己`td`的模式中。在这种情况下，您使用`td:nth-child(...) div.prices`and not `div.prices:nth-child(...)`，因为这些`td`元素是彼此的兄弟。

# ios - Segue 总是加载新的视图实例

> ID：11234348
> 
> 赞同：2
> 
> 时间：2012-06-27T20:27:46.187
> 
> 标签：ios, xcode, uistoryboard

我正在执行这样的segue；

```
[self performSegueWithIdentifier:@"showSecondView" sender:self]; 
```

但是行为是它总是会“加载”新视图，而不是在已经加载的情况下显示现有视图。

我的问题是，加载视图后如何将视图保存在内存中，以便将来的 segue 调用将简单地“显示”现有视图？

谢谢

编辑：

这是我的用户界面设计。它本质上是一个自定义的侧标签栏视图控制器，带有一个 UIView（大灰色块），所有子视图都放置在其中。

![](../Images/aeeebad88994a71b2ff7a3f8bcfa522b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:13:35.920

简短的回答是 iOS 不太适合这种情况，但您也许可以这样做。这取决于。

问题是该视图的控制器如何在视图控制器层次结构中表示。标准选项是`pushViewController`(a push segue) 或`presentViewController`(a modal segue)。您也许可以利用视图控制器包含的优势进行自定义 segue（请参阅[WWDC 2011 session 102](https://developer.apple.com/videos/wwdc/2011/?id=102)），但如果您想要这样做，我会感到惊讶。通常，当您听到人们谈论创建新视图的挫败感时，是因为他们想要返回某个主视图，但却忽略了`popToRootViewController`，而是转而回到了那个根场景。

一个可能出现的完全理论（并且可能不切实际）的答案是使用单例并做一些轻微的手来转换视图，但是在观看 WWDC 2011 session 102 on view controller contains 之后，他们痛斥了保持视图层次结构的重要性与视图控制器层次结构同步，所以我认为这没有意义。

如果我了解您想要的用户界面，我可能会提出更有意义的建议。对于 99% 的应用程序，它们围绕着推送/弹出视图、呈现/关闭模式视图或使用某些容器（例如标签栏容器或某些自定义容器）在同级视图之间跳转。您的用户界面流程是什么？

# c# - 在 asp .net c# 4.0 图表控件上反转系列数据点的简单方法

> ID：11234350
> 
> 赞同：1
> 
> 时间：2012-06-27T20:27:53.527
> 
> 标签：c#, asp.net, charts

与往常一样，我会因为没有提供足够的代码而受到批评，但我认为我可以用最少的代码来描述这一点，如果存在的话，我希望能得到一个单行的答案。如果不是，我知道如何通过少量的努力自己编写代码。

我有一个带有单个系列和图表区域的图表。在我的代码中，我像这样动态添加点：

```
Chart1.Series[0].Points.AddXY(1,1)
Chart1.Series[0].Points.AddXY(2,2)
Chart1.Series[0].Points.AddXY(3,3) 
```

我想知道是否有任何方法可以通过单个函数调用或一些简单而轻松的方法来围绕 Y 轴旋转点，也就是右侧的最远点会出现在左侧，反之亦然

换句话说，它是一个函数调用，基本上就像我以相反的顺序添加点一样：

```
Chart1.Series[0].Points.AddXY(3,3)
Chart1.Series[0].Points.AddXY(2,2)
Chart1.Series[0].Points.AddXY(1,1) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:35:40.863

通过 for 或 foreach 循环并将每个点压入堆栈。然后将它们从堆栈中弹出并重新添加。`List.Reverse()`如果您的项目在列表中，您也可以使用方法。

# pydot - 用 pydot 发现学位？

> ID：11234351
> 
> 赞同：4
> 
> 时间：2012-06-27T20:27:55.167
> 
> 标签：pydot, pygraphviz

在使用 pygraphviz 进行了一些工作后，我回到了 pydot。pygraphviz 中有用的方法之一是 iterdegree()。pydot可以做类似的事情吗？即：找到最高度的节点，以便我可以将其设置为根？

jjc

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-02T01:34:22.680

一年半后没有答案？我不认为 Pydot 没有编写一些代码的方法。

但是您可以将 NetworkX 与[networkx.from_pydot()](http://networkx.github.io/documentation/networkx-1.8/reference/generated/networkx.drawing.nx_pydot.from_pydot.html)函数一起使用以转换为 NetworkX 图形对象，然后调用 degree() 方法。

# python - 如何求和迭代计数，也从单个查询移动到多个查询并创建表输出

> ID：11234354
> 
> 赞同：1
> 
> 时间：2012-06-27T20:28:10.133
> 
> 标签：python, python-2.7, counting

我有一个包含数千个 fasta 格式的 DNA 序列的文件，我需要计算在较大文件中出现了多少次 100 个单独的短序列（基序）。到目前为止，我一直在逐个主题地做主题，但我不知道如何对我的输出求和，这样我就没有一列包含数千个值的列。一次输入所有图案并获得一张桌子也很棒。我对编码非常陌生，并感谢任何反馈！我有;

```
from Bio import SeqIO
for i in SeqIO.parse(f,'fasta'):
   print i.seq.count('motif') 
```

我在想我真的不需要 Biopython，因为这些图案不会出现在序列名称中。那么我可以做一个只逐行读取（...）的迭代器吗？

我的输入是这样的；

```
>fasta1
AACTGGGGTCCGTCGATAATATAGGATAG...
>fasta2
GCGCGTGATAGATATGATTAGCGGCGCAA... 
```

ETC

像这样在 csv 文件中使用图案；

```
ACCGAATTTAAA,AAATTATAAAA,GCCCTAAAAAG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:51:26.313

如果您排除解析，您将不得不选择：逐行处理文件或首先将其作为一个整体读取。这两种方法都可能有严重的缺点：

如果您逐行阅读和计数，您将不会检测到用换行符截取的图案；

如果您一次在字符串中读取它并删除所有换行符 ( `\n`)，则可能会耗尽内存，具体取决于文件大小和可用 RAM。

无论哪种方式，假设您已经从 csv 读取了您的主题序列：

```
#let's say `motifs` is a list of motif sequences
counts = [0] * len(motifs)
for s in SeqIO.parse(f,'fasta'):
    for i, motif in enumerate(motifs):
        counts[i] += s.seq.count(motif) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:46:25.727

```
from Bio import SeqIO

sum = 0
for i in SeqIO.parse(f,'fasta'):
    sum += i.seq.count('motif')

print sum 
```

如果要计算多个文件名如下的文件：fasta1, fasta2, ... fastaN

```
from Bio import SeqIO

sum_table

for k in range(N): 
    sum = 0   
    for i in SeqIO.parse(f,'fasta'+str(k+1)):
        sum += i.seq.count('motif')
    sum_table.append(sum)

print sum_table 
```

当然，您可以在没有库的情况下执行此操作。但是有了图书馆，为什么还要重新发明轮子呢？

# vba - Word 2007 宏自动编号文档中的项目

> ID：11234358
> 
> 赞同：0
> 
> 时间：2012-06-27T20:28:45.137
> 
> 标签：vba, word-2007

我正在尝试使用宏来查找和替换 Word 2007 文档中的某些文本。每次找到文本时，我想在替换文本中自动增加一个数字。

前文：

```
The quick brown (??) fox jumps over (??) the (??) lazy dog 
```

之后的所需文字：

```
The quick brown (1) fox jumps over (2) the (3) lazy dog 
```

出于某种原因，我的代码只替换了第一个实例：

```
Sub SetRequirements()
    Dim myNumber As Integer
    myNumber = 1

    With ActiveDocument.Content.Find
        .ClearFormatting
        .Text = "(??)"
        Do While .Execute( _
            Replace:=wdReplaceOne, _
            ReplaceWith:="(" & myNumber & ")", _
            Forward:=True) = True

            myNumber = myNumber + 1

        Loop
    End With
End Sub 
```

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:01:18.747

```
Sub SetRequirements()

Const S_FIND As String = "(??)"
Dim myNumber As Integer

    myNumber = 1

    Do While InStr(ActiveDocument.Content, S_FIND) > 0
        With ActiveDocument.Content.Find
            .ClearFormatting
            .Text = S_FIND
            .Execute Replace:=wdReplaceOne, ReplaceWith:="(" & myNumber & ")", _
                     Forward:=True
        End With
        myNumber = myNumber + 1
    Loop

End Sub 
```

# c# - 向另一个网络发送命令

> ID：11234359
> 
> 赞同：0
> 
> 时间：2012-06-27T20:28:45.873
> 
> 标签：c#, web-services, network-programming

我正在尝试编写一个监控工具来监控一些信息它会在 azure 上正常工作。所以我将在 azure 上托管数据库，webservice 也将在 azure 上托管。

在客户端上，我从配置文件中读取了他需要多少次将信息更新到 azure 数据库（使用 azure 上的 web 服务）。

现在我还想向客户端本身发送一些命令。就像启动服务一样，....最好的方法是什么？如何从托管在 azure 平台上的网站发送它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:37:17.693

我认为您也应该考虑在客户端实现 WCF 服务。当需要指示客户端执行某项操作时，软件的 Azure 端可以从该服务调用操作。

客户端的 WCF 服务应该很简单，托管在 Windows 服务或您的实际客户端中（无论它是什么......赢表单、控制台等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T12:10:39.747

由于您没有 VPN，听起来您在客户端上托管 WCF 服务可能有问题。如果客户端位于防火墙后面，您必须修改防火墙配置以允许您的服务器连接到该服务。

上次我不得不做这样的服务时，我使用了[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)。服务器维护要发送到客户端的消息队列。您的客户端连接到 Web 服务并请求任何可用的消息。如果消息可用，则服务器返回它们。如果没有，服务器将请求打开一段时间。一旦消息到达，服务器就会将它发送到已经打开的连接。客户端将定期超时/重新连接或发送保持活动消息（可能每分钟一次），以便在干预防火墙中保持连接活动。

# c# - 如何扩展一个密封类 - 需要简单的程序解释和实时使用

> ID：11234360
> 
> 赞同：9
> 
> 时间：2012-06-27T20:28:46.463
> 
> 标签：c#, .net

乡亲

我有一个密封类如下。我想扩展这个密封类，以便添加一个返回 x 和 y 平均值的方法。这不仅仅是使用“this”的扩展方法:(有人可以帮我理解“扩展密封类”的概念及其“实时使用和好处”吗

```
class Sealed A       
{ 
    int a; int b;    
    int Add (int x, int y)    
    {
        return x+y;
    }
} 
```

谢谢....

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-27T20:38:57.297

正如@ReedCopsey 已经指出的那样，扩展密封类的功能的方法是使用[Extension Method](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。这是一个可以满足您要求的功能：

```
public sealed class MyClass       
{ 
    int a; int b;    
    int Add (int x, int y)    
    {
        return x + y;
    }
}

public static class MyClassExtensions
{
    public static decimal Average(this MyClass value,  int x, int y)
    {
        return (x + y)/2M;
    }
} 
```

用法：

```
 var myClass = new MyClass();

    // returns 15
    var avg = myClass.Average(10, 20); 
```

**编辑**根据要求，这是所有代码。在 Visual Studio 中创建一个新的控制台应用程序，将`Program.cs`文件中的所有代码替换为以下代码并运行。

```
using System;

namespace ConsoleApplication1
{
    public sealed class MyClass
    {
        public int X { get; private set; }
        public int Y { get; private set; }

        public MyClass(int x, int y)
        {
            this.X = x;
            this.Y = y;
        }

        int Add()
        {
            return this.X + this.Y;
        }
    }

    public static class MyClassExtensions
    {
        public static decimal Average(this MyClass value)
        {
            return (value.X + value.Y) / 2M;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var myClass = new MyClass(10, 20);
            var avg = myClass.Average();

            Console.WriteLine(avg);
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-27T20:30:48.097

> 有人可以帮我理解“扩展密封类”的概念及其“实时使用和好处”吗

基本概念是密封类意味着您不能继承（扩展）它。这就是类被*密封*的全部原因——这“密封”了类，因此它不能被扩展。

扩展方法允许您创建一个*看似*扩展类的方法，但实际上是一个普通的静态方法。编译器调用此方法，并传递类实例。

# sparql - Sparql Query Results without Namespace

> ID：11234371
> 
> 赞同：8
> 
> 时间：2012-06-27T20:29:58.450
> 
> 标签：sparql, semantic-web, jena, virtuoso

I want to get results from sparql query and the results contain no namespace. ex: there is result in triple format like:

```
"http://www.xyz.com#Raxit"  "http://www.w3.org/1999/02/22-rdf-syntax-ns#type"  "http://www.xyz.com#Name" 
```

So i want to get only following:

```
Raxit type Name 
```

I want to get this results directly from sparql query. I am using virtuoso.

Is it possible to get this from sparql?

Please share your thoughts regarding this.

Thanks in Advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T23:07:38.630

If your data is regular, and you know that the sub-string you want *always* occurs after a `#` character, then you can use the [`strafter`](http://www.w3.org/TR/sparql11-query/#func-strafter) function from SPARQL 1.1\. I do not know whether this is available in Virtuoso's implementation or not.

*However* this is, in general, a very risky strategy. Not all URI's are formatted with a local name part after a `#` character. In fact, in general, a URI may not have a legal or useful localname at all. So you should ask yourself: why do you think you need this? Generally speaking, a semantic web application uses the whole URI as an indivisible identifier. If your need is actually for something human-friendly to display in a UI, have your query also look for `rdfs:label` or `skos:label` properties. Worst case, try to abbreviate the URI to q-name form (i.e. `prefix:name`), using the prefixes from the model or a service like [prefix.cc](http://prefix.cc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T22:06:22.207

The simplest way to achieve this is to not bother with adapting your query, but to just post-process the result yourself. Depending on which client library you use to communicate with Virtuoso, you will typically find it has API support to parse the result, get back values, and for each value then get only local name (I suggest you look for a `URI.getLocalName()` method or something similar).

# ios - 如何使用情节提要的详细信息披露按钮？

> ID：11234373
> 
> 赞同：1
> 
> 时间：2012-06-27T20:30:00.563
> 
> 标签：ios, xcode, storyboard, segue, disclosure

我尝试将 Detail Disclosure Button 与 Storyboard 一起使用，但是当我构建从 Disclosure Button 到新视图的 segue 时，它​​仅在我按下表格单元格时才有效，而不是在我按下 Detail Disclosure Button 时。

我必须做什么？

谢谢，

伯恩哈德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T01:23:05.477

我可能错了，但我发现它需要通过 UITableDelegate 代码来实现：

```
#pragma mark - Table view delegate methods

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    // do a segue based on the indexPath or do any setup later in prepareForSegue
    [self performSegueWithIdentifier:@"segueName" sender:self];
} 
```

然后在你的`prepareForSegue`

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if([segue.identifier isEqualToString:@"segueName"]){

        NSIndexPath * indexPath =  self.sequenceTableView.indexPathForSelectedRow;
       // do some prep based on indexPath, if needed

     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:36:38.527

skinnyTOD 的回答很好。但我不知道为什么 self.sequenceTableView.indexPathForSelectedRow; 返回 nil(0x0000000)，我必须使用属性将 selectedRow 保存在 accessoryButtonTappedForRowWithIndexPath 中：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    // do a segue based on the indexPath or do any setup later in prepareForSegue
    self.selectedRow = indexPath.row;
    [self performSegueWithIdentifier:@"segueName" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"segueName"]) {
        // use self.selectedRow here
    }
} 
```

# android - 谷歌是如何做到这一点的？在 Android 应用程序中滑动 ActionBar

> ID：11234375
> 
> 赞同：118
> 
> 时间：2012-06-27T20:30:15.630
> 
> 标签：android, android-layout, android-widget, android-actionbar, android-side-navigation

我真的很想在自己的应用程序中实现这个（侧面导航），有人知道谷歌是如何做到的吗？

他们似乎已经将当前窗口拉到一边，并放入了自己的飞入式导航。

![](../Images/77287e7ea6b527b001fffa602cb28fa8.png)

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-07-06T18:35:49.833

事实上，有一种方法可以做到这一点。即使没有实现你自己的`ActionBar`.

看看`hierachyviewer`吧！（位于工具目录中）

有`DecorView`和`LinearLayout`小时候的。这`LinearLayout`包含 the`ActionBar`和 other 内容。因此，您可以简单地对其应用一些并`FrameLayout.LayoutParams`以`LinearLayout`这种方式在左侧获得一些空间。然后，你可以用你的 menu-ListView 填充这个空间，并用 FrameLayout 覆盖其他内容，当它被点击时，它会折叠菜单。所以，这里有一些代码：

一、折叠/展开类（SlideMenu.java）：

```
package your.cool.app;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Rect;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.Window;
import android.view.animation.TranslateAnimation;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.FrameLayout;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.TextView;

public class SlideMenu {
//just a simple adapter
public static class SlideMenuAdapter extends ArrayAdapter<SlideMenu.SlideMenuAdapter.MenuDesc> {
    Activity act;
    SlideMenu.SlideMenuAdapter.MenuDesc[] items;
    class MenuItem {
        public TextView label;
        public ImageView icon;
    }
    static class MenuDesc {
        public int icon;
        public String label;
    }
    public SlideMenuAdapter(Activity act, SlideMenu.SlideMenuAdapter.MenuDesc[] items) {
        super(act, R.id.menu_label, items);
        this.act = act;
        this.items = items;
        }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = act.getLayoutInflater();
            rowView = inflater.inflate(R.layout.menu_listitem, null);
            MenuItem viewHolder = new MenuItem();
            viewHolder.label = (TextView) rowView.findViewById(R.id.menu_label);
            viewHolder.icon = (ImageView) rowView.findViewById(R.id.menu_icon);
            rowView.setTag(viewHolder);
        }

        MenuItem holder = (MenuItem) rowView.getTag();
        String s = items[position].label;
        holder.label.setText(s);
        holder.icon.setImageResource(items[position].icon);

        return rowView;
    }
}

private static boolean menuShown = false;
private static View menu;
private static LinearLayout content;
private static FrameLayout parent;
private static int menuSize;
private static int statusHeight = 0;
private Activity act;
SlideMenu(Activity act) {
    this.act = act;
}
//call this in your onCreate() for screen rotation
public void checkEnabled() {
    if(menuShown)
        this.show(false);
}
public void show() {
//get the height of the status bar
    if(statusHeight == 0) {
        Rect rectgle = new Rect();
        Window window = act.getWindow();
        window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
        statusHeight = rectgle.top;
        }
    this.show(true);
}
public void show(boolean animate) {
    menuSize = Functions.dpToPx(250, act);
    content = ((LinearLayout) act.findViewById(android.R.id.content).getParent());
    FrameLayout.LayoutParams parm = (FrameLayout.LayoutParams) content.getLayoutParams();
    parm.setMargins(menuSize, 0, -menuSize, 0);
    content.setLayoutParams(parm);
//animation for smooth slide-out
    TranslateAnimation ta = new TranslateAnimation(-menuSize, 0, 0, 0);
    ta.setDuration(500);
    if(animate)
        content.startAnimation(ta);
    parent = (FrameLayout) content.getParent();
    LayoutInflater inflater = (LayoutInflater) act.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    menu = inflater.inflate(R.layout.menu, null);
    FrameLayout.LayoutParams lays = new FrameLayout.LayoutParams(-1, -1, 3);
    lays.setMargins(0,statusHeight, 0, 0);
    menu.setLayoutParams(lays);
    parent.addView(menu);
    ListView list = (ListView) act.findViewById(R.id.menu_listview);
    list.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            //handle your menu-click
        }
    });
    if(animate)
        menu.startAnimation(ta);
    menu.findViewById(R.id.overlay).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            SlideMenu.this.hide();
        }
    });
    Functions.enableDisableViewGroup((LinearLayout) parent.findViewById(android.R.id.content).getParent(), false);
    ((ExtendedViewPager) act.findViewById(R.id.viewpager)).setPagingEnabled(false);
    ((ExtendedPagerTabStrip) act.findViewById(R.id.viewpager_tabs)).setNavEnabled(false);
    menuShown = true;
    this.fill();
}
public void fill() {
    ListView list = (ListView) act.findViewById(R.id.menu_listview);
    SlideMenuAdapter.MenuDesc[] items = new SlideMenuAdapter.MenuDesc[5];
    //fill the menu-items here
    SlideMenuAdapter adap = new SlideMenuAdapter(act, items);
    list.setAdapter(adap);
}
public void hide() {
    TranslateAnimation ta = new TranslateAnimation(0, -menuSize, 0, 0);
    ta.setDuration(500);
    menu.startAnimation(ta);
    parent.removeView(menu);

    TranslateAnimation tra = new TranslateAnimation(menuSize, 0, 0, 0);
    tra.setDuration(500);
    content.startAnimation(tra);
    FrameLayout.LayoutParams parm = (FrameLayout.LayoutParams) content.getLayoutParams();
    parm.setMargins(0, 0, 0, 0);
    content.setLayoutParams(parm);
    Functions.enableDisableViewGroup((LinearLayout) parent.findViewById(android.R.id.content).getParent(), true);
    ((ExtendedViewPager) act.findViewById(R.id.viewpager)).setPagingEnabled(true);
    ((ExtendedPagerTabStrip) act.findViewById(R.id.viewpager_tabs)).setNavEnabled(true);
    menuShown = false;
}
} 
```

一些帮助方法（对我来说，在静态 Functions.java 中）：

```
 public static int dpToPx(int dp, Context ctx) {
    Resources r = ctx.getResources();
    return (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp, r.getDisplayMetrics());
}
//originally: http://stackoverflow.com/questions/5418510/disable-the-touch-events-for-all-the-views
//modified for the needs here
public static void enableDisableViewGroup(ViewGroup viewGroup, boolean enabled) {
    int childCount = viewGroup.getChildCount();
    for (int i = 0; i < childCount; i++) {
        View view = viewGroup.getChildAt(i);
        if(view.isFocusable())
            view.setEnabled(enabled);
        if (view instanceof ViewGroup) {
            enableDisableViewGroup((ViewGroup) view, enabled);
            } else if (view instanceof ListView) {
                if(view.isFocusable())
                    view.setEnabled(enabled);
                ListView listView = (ListView) view;
                int listChildCount = listView.getChildCount();
                for (int j = 0; j < listChildCount; j++) {
                    if(view.isFocusable())
                        listView.getChildAt(j).setEnabled(false);
                    }
                }
        }
    } 
```

然后，布局：

菜单布局 (res/layout/menu.xml)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent" >
    <LinearLayout
        android:orientation="vertical"
        android:layout_height="fill_parent"
        android:layout_width="250dip"
        android:background="@color/darkblack">
        <ListView
            android:id="@+id/menu_listview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:divider="@color/dividerblack"
            android:dividerHeight="2dip"  />
    </LinearLayout>
    <FrameLayout
        android:id="@+id/overlay"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </FrameLayout>
</LinearLayout> 
```

列表项的布局（res/layout/menu_listitem.xml）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="wrap_content"
android:layout_width="fill_parent" >
    <ImageView
        android:id="@+id/menu_icon"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:layout_marginRight="5dip"
        android:layout_marginLeft="10dip"
        android:layout_marginTop="10dip"
        android:layout_marginBottom="10dip" />

    <TextView
        android:id="@+id/menu_label"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="@color/white"
        android:textSize="24dp"
        android:layout_marginTop="10dip"
        android:layout_marginBottom="10dip" />
</LinearLayout> 
```

如何使用它：

在你的`onCreate()`：

```
private SlideMenu slidemenu;
@Override
public void onCreate(Bundle savedInstanceState) {
    //your onCreate code
    slidemenu = new SlideMenu(this);
    slidemenu.checkEnabled();
} 
```

在 ActionBar 主页按钮的处理程序中：

```
slidemenu.show(); 
```

就是这样！

现在，它的一个小屏幕截图：

![滑动菜单](../Images/864e320ecee17a576ab26dfed33898b2.png)

据我所知，它正在工作。如果您遇到任何问题或我的解释不清楚，请与我联系！

编辑：`ExtendedViewPager`& `ExtendedPagerStrip`：

扩展视图页面：

```
package your.cool.app;

//source: http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html

import android.content.Context;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class ExtendedViewPager extends ViewPager {

private boolean enabled;

public ExtendedViewPager(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.enabled = true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onTouchEvent(event);
    }

    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

public void setPagingEnabled(boolean enabled) {
    this.enabled = enabled;
}
} 
```

扩展的PagerTabStrip：

```
package your.cool.app;

//source: http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html

import android.content.Context;
import android.support.v4.view.PagerTabStrip;
import android.util.AttributeSet;
import android.view.MotionEvent;

public class ExtendedPagerTabStrip extends PagerTabStrip {

private boolean enabled;

public ExtendedPagerTabStrip(Context context, AttributeSet attrs) {
    super(context, attrs);
    this.enabled = true;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onTouchEvent(event);
    }

    return false;
}

@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    if (this.enabled) {
        return super.onInterceptTouchEvent(event);
    }

    return false;
}

public void setNavEnabled(boolean enabled) {
    this.enabled = enabled;
}
} 
```

我将它`SlideMenu`用于带有 with 的 Activity，`ViewPager`用于`PagerTabStrip`诸如 Talk、Market 等选项卡。您不能以简单的方式禁用这些视图，因此上面的两个类只是扩展它们以`onTouch`在禁用时停止事件。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-17T02:23:49.063

有几次*尝试*这样做，但是我还没有找到关于如何在所有 api 级别上使用 actionbar 成功实现它的库或源代码。一个有前途的库在这里

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

这是[示例应用程序](http://youtu.be/8vNaANLHw-c)的视频。

这是[Google Play](https://play.google.com/store/apps/details?id=com.slidingmenu.example)应用程序链接。

这确实适用于 ActionbarSherlock。您必须使用 ABS 构建 SlidingMenu 库才能使其正常工作。工作，看起来很棒！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-17T23:07:52.653

[对原始实现](https://stackoverflow.com/a/11367825/361413)进行了综述，并添加了 XML 解析以及`autodetection`可能存在的内容`actionbar`，因此它可以与本机以及支持操作栏（例如`ActionBarSherlock`.

整个事情现在是一个库项目和一个示例应用程序，并在[Sliding Menu for android](http://www.coboltforge.com/2012/07/tech-stuff-a-sliding-menu-for-android-very-much-like-the-google-and-facebook-apps-have-it/)中进行了描述感谢[**scirocco**](https://stackoverflow.com/users/1150188/scirocco/)的最初想法和代码！

![LibSlideMenu 截图](../Images/3c5b93f8e358bbb12e1ecbf1fd16fd84.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-08-10T12:50:34.003

如果您使用的 API 级别大于 11，则可以使用[受@Scirocco 给出的答案启发的更简单的方法](https://stackoverflow.com/a/11367825/356895)

```
// get content parent that is basically the whole 
// app screen (viewed from hierarchy viewer)
final LinearLayout content = 
     (LinearLayout) findViewById(android.R.id.content).getParent();

// make new value animator with range from 0 to 1
final ValueAnimator animator = ValueAnimator.ofFloat(0, 1);
// set custom duration
animator.setDuration(500);
// on update is called for every value in the 
    // given range in time frame defined by the duration
animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {

    public void onAnimationUpdate(ValueAnimator animation) {
        // get the current value
        float value = ((Float) (animation.getAnimatedValue())).floatValue();
        // translate by that value, minus means translate left
        content.setTranslationX(-250 * value);
    }
});
// start the animator
animator.start();

// make or inflate custom view for test purposes 
Button textView = new Button(this);
textView.setText("TestButton");
// add it to the frame layout that is the parent of the content on position 0
FrameLayout parent = (FrameLayout) content.getParent();
parent.addView(textView, 0); 
```

这里的想法是使用`ValueAnimator`该转换，而不仅仅是使用操作栏为主布局设置动画，因此您可以与要用作滑动面板的膨胀视图进行交互。您应该用对您的应用程序有用的东西替换硬编码的值。

我希望这有帮助 ：）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-08T13:28:53.763

好吧，目前我正在做一个项目并遇到了滑动菜单，我用谷歌搜索，但很失望地看到没有人给出一些代码或一些关于如何开始制作滑动菜单的提示，但每个人都给出了一些链接github的项目/库要使用，我决定自己做，最后我有自己的滑动菜单准备好了......

我已经花了两天时间

**1.关于制作滑动动画**

**2\. 使其适用于所有屏幕分辨率**

一旦你对**动画**有了一些了解，它真的很容易和简单，我读过一些地方，重新发明**轮子**是不明智的（人们指的是滑动菜单的 github 源代码），但我相信你应该至少一次尝试自己制作，以便了解它的实际工作原理和功能：P

所以这是一张我的滑动菜单将如何工作的图片

**1.查找.xml** `//later in the code it will be refer as findLayout`

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <RelativeLayout
        android:id="@+id/find_layout"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <RelativeLayout
        android:id="@+id/header" 
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:padding="2dp"
        android:background="@drawable/main_header">

        <Button 
            android:id="@+id/filter"
            android:layout_width="40dp"
            android:layout_height="30dp"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:background="@drawable/filter_button" />

        <TextView 
            android:id="@+id/city"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/filter"
            android:layout_marginLeft="20dp"
            android:layout_marginTop="3dp"
            android:text="Islamabad"
            android:textSize="22sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_dark"/>

        <RelativeLayout 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/city"
            android:layout_alignLeft="@+id/city">

            <TextView 
                android:id="@+id/interested_in"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:text="Men and Women"
                android:textSize="12sp"
                android:textColor="@android:color/primary_text_dark"/>

            <ImageView 
                android:id="@+id/separator"
                android:layout_width="2dp"
                android:layout_height="18dp"
                android:layout_toRightOf="@+id/interested_in"
                android:layout_marginLeft="4dp"
                android:src="@drawable/separator_1"
                android:layout_centerVertical="true" />

            <TextView 
                android:id="@+id/age"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="4dp"
                android:layout_toRightOf="@+id/separator"
                android:layout_centerVertical="true"
                android:text="18-24 years"
                android:textSize="12sp"
                android:textColor="@android:color/primary_text_dark"/>

            <ImageView
                android:id="@+id/separator_1" 
                android:layout_width="2dp"
                android:layout_height="18dp"
                android:layout_toRightOf="@+id/age"
                android:layout_marginLeft="4dp"
                android:src="@drawable/separator_1"
                android:layout_centerVertical="true" />

            <TextView 
                android:id="@+id/distance"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="4dp"
                android:layout_toRightOf="@+id/separator_1"
                android:layout_centerVertical="true"
                android:text=">30km"
                android:textSize="12sp"
                android:textColor="@android:color/primary_text_dark" />

        </RelativeLayout>

    </RelativeLayout>

    <GridView 
        android:id="@+id/users_grid"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/header"
        android:numColumns="4">

    </GridView>

    </RelativeLayout>

    <include 
        layout="@layout/filter"/> //here i included the filter.xml, which is on top of find.xml layout and is initially invisible    
</RelativeLayout> 
```

![在此处输入图像描述](../Images/1e4af2930f0f331b40326f773f604144.png)

**2.过滤器.xml** `//later in code refer as FilterLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/filter_layout"
    android:visibility="invisible"
    android:layout_width="260dp"
    android:layout_height="match_parent"
    android:background="@drawable/grey_bg" >

    <ImageView 
        android:id="@+id/profile_pic"
        android:layout_width="match_parent"
        android:layout_height="220dp"
        android:src="@drawable/pic"/>

    <RelativeLayout
        android:id="@+id/header" 
        android:layout_width="match_parent"
        android:layout_height="55dp"
        android:paddingLeft="10dp"
        android:paddingTop="5dp"
        android:layout_below="@+id/profile_pic"
        android:background="@drawable/light_blue_header">

        <TextView
            android:id="@+id/name" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="3dp"
            android:text="Raja Babar"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_dark"/>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/name"
            android:layout_alignLeft="@+id/name">

            <TextView
                android:id="@+id/gender"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerVertical="true"
                android:text="Male"
                android:textSize="12sp"
                android:textColor="@android:color/primary_text_dark" />

            <ImageView 
                android:id="@+id/seperator"
                android:layout_width="2dp"
                android:layout_height="20dp"
                android:layout_toRightOf="@+id/gender"
                android:layout_marginLeft="5dp"
                android:src="@drawable/separator_1"
                android:layout_centerVertical="true" />

            <TextView
                android:id="@+id/age"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/seperator"
                android:layout_marginLeft="5dp"
                android:layout_centerVertical="true"
                android:text="22 years"
                android:textSize="12sp"
                android:textColor="@android:color/primary_text_dark" />

        </RelativeLayout>

    </RelativeLayout>

    <ScrollView 
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/header"
        android:layout_marginTop="15dp"
        android:layout_centerHorizontal="true">

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    <TextView
            android:id="@+id/filter_options" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/filter_options"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_light"/>

    <RelativeLayout
        android:id="@+id/interested_in_layout" 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:paddingRight="40dp"
        android:layout_below="@+id/filter_options"
        android:background="@drawable/interested_in_field">

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="@string/gender"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_light"/>

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text="@string/women_men"
            android:textSize="18sp"
            android:textColor="#33b9cd" />

    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/age_layout" 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:paddingRight="40dp"
        android:layout_below="@+id/interested_in_layout"
        android:background="@drawable/age_field_1">

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="@string/age"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_light"/>

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text="18-24 years"
            android:textSize="18sp"
            android:textColor="#33b9cd"/>

    </RelativeLayout>
    <RelativeLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:paddingLeft="15dp"
        android:paddingRight="40dp"
        android:layout_below="@+id/age_layout"
        android:background="@drawable/distance_field">

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="@string/distance"
            android:textSize="18sp"
            android:textStyle="bold"
            android:textColor="@android:color/primary_text_light"/>

        <TextView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:text=">30km"
            android:textSize="18sp"
            android:textColor="#33b9cd"/>

    </RelativeLayout>

    </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

![在此处输入图像描述](../Images/d1af622588c7fa6ea3dbaacb999ecc4e.png)

在**find.xml 中**，我最初包含**了 filter.xml**，它是不可见的

现在**FilterAnimation.java**

```
package matchat.helpers;

import com.s3.matchat.R;

import android.content.Context;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.animation.AlphaAnimation;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.RelativeLayout;

public class FilterAnimation implements AnimationListener 
{
    Context context;

    RelativeLayout filterLayout, otherLayout;

    private Animation filterSlideIn, filterSlideOut, otherSlideIn, otherSlideOut;

    private static int otherLayoutWidth, otherLayoutHeight;

    private boolean isOtherSlideOut = false;

    private int deviceWidth;

    private int margin;

    public FilterAnimation(Context context) 
    {
        this.context = context;

        DisplayMetrics displayMetrics = context.getResources().getDisplayMetrics();

        deviceWidth = displayMetrics.widthPixels; // as my animation is x-axis related so i gets the device width and will use that width,so that this sliding menu will work fine in all screen resolutions
    }

    public void initializeFilterAnimations(RelativeLayout filterLayout)
    {
        this.filterLayout = filterLayout;

        filterSlideIn = AnimationUtils.loadAnimation(context, R.anim.filter_slide_in);

        filterSlideOut = AnimationUtils.loadAnimation(context, R.anim.filter_slide_out);    

    }

    public void initializeOtherAnimations(RelativeLayout otherLayout)
    {       
        this.otherLayout = otherLayout;

        otherLayoutWidth = otherLayout.getWidth();

        otherLayoutHeight = otherLayout.getHeight();

        otherSlideIn = AnimationUtils.loadAnimation(context, R.anim.other_slide_in);
        otherSlideIn.setAnimationListener(this);

        otherSlideOut = AnimationUtils.loadAnimation(context, R.anim.other_slide_out);
        otherSlideOut.setAnimationListener(this);
    }

    public void toggleSliding()
    {
        if(isOtherSlideOut) //check if findLayout is already slided out so get so animate it back to initial position
        {       
            filterLayout.startAnimation(filterSlideOut);

            filterLayout.setVisibility(View.INVISIBLE);

            otherLayout.startAnimation(otherSlideIn);
        }
        else //slide findLayout Out and filterLayout In
        {
            otherLayout.startAnimation(otherSlideOut);

            filterLayout.setVisibility(View.VISIBLE);

            filterLayout.startAnimation(filterSlideIn);
        }
    }

    @Override
    public void onAnimationEnd(Animation animation) 
    {
        if(isOtherSlideOut) //Now here we will actually move our view to the new position,because animations just move the pixels not the view
        {
            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(otherLayoutWidth, otherLayoutHeight);

            otherLayout.setLayoutParams(params);

            isOtherSlideOut = false;
        }
        else
        {   
            margin = (deviceWidth * 80) / 100; //here im coverting device percentage width into pixels, in my other_slide_in.xml or other_slide_out.xml you can see that i have set the android:toXDelta="80%",so it means the layout will move to 80% of the device screen,to work across all screens i have converted percentage width into pixels and then used it

            RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(otherLayoutWidth, otherLayoutHeight);

            params.leftMargin = margin;

            params.rightMargin = -margin; //same margin from right side (negavite) so that our layout won't get shrink

            otherLayout.setLayoutParams(params);

            isOtherSlideOut = true;

            dimOtherLayout();
        }
    }

    @Override
    public void onAnimationRepeat(Animation animation) 
    {

    }

    @Override
    public void onAnimationStart(Animation animation) 
    {

    }

    private void dimOtherLayout()
    {
        AlphaAnimation alphaAnimation = new AlphaAnimation(1.0f, 0.5f);

        alphaAnimation.setFillAfter(true);

        otherLayout.startAnimation(alphaAnimation);
    }

} 
```

**现在 Find.java**

```
package main.matchat.activities;

import matchat.helpers.FilterAnimation;
import com.s3.matchat.R;
import android.app.Activity;
import android.os.Bundle;
import android.util.DisplayMetrics;
import android.view.View;
import android.view.ViewTreeObserver;
import android.view.View.OnClickListener;
import android.view.ViewTreeObserver.OnGlobalLayoutListener;
import android.widget.Button;
import android.widget.RelativeLayout;

public class Find extends Activity implements OnClickListener
{
    RelativeLayout filterLayout, findLayout;

    Button btFilter;

    FilterAnimation filterAnimation;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {       
        super.onCreate(savedInstanceState);
        setContentView(R.layout.find);

        filterLayout = (RelativeLayout)findViewById(R.id.filter_layout);

        findLayout = (RelativeLayout)findViewById(R.id.find_layout);

        btFilter = (Button)findViewById(R.id.filter);
        btFilter.setOnClickListener(this);

        filterAnimation = new FilterAnimation(this);

        initializeAnimations(); 
    }

    private void initializeAnimations()
    {   //Setting GlobolLayoutListener,when layout is completely set this function will get called and we can have our layout onbject with correct width & height,else if you simply try to get width/height of your layout in onCreate it will return 0

        final ViewTreeObserver filterObserver = filterLayout.getViewTreeObserver();

        filterObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() 
        {

            @Override
            public void onGlobalLayout() 
            {
                filterLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);

                DisplayMetrics displayMetrics = getResources().getDisplayMetrics();

                int deviceWidth = displayMetrics.widthPixels;

                int filterLayoutWidth = (deviceWidth * 80) / 100; //here im coverting device percentage width into pixels, in my other_slide_in.xml or other_slide_out.xml you can see that i have set the android:toXDelta="80%",so it means the layout will move to 80% of the device screen,to work across all screens i have converted percentage width into pixels and then used it

                RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(filterLayoutWidth, RelativeLayout.LayoutParams.MATCH_PARENT);

                filterLayout.setLayoutParams(params);//here im setting the layout params for my filter.xml because its has width 260 dp,so work it across all screen i first make layout adjustments so that it work across all screens resolution 

                filterAnimation.initializeFilterAnimations(filterLayout);

            }
        });

        final ViewTreeObserver findObserver = findLayout.getViewTreeObserver();

        findObserver.addOnGlobalLayoutListener(new OnGlobalLayoutListener() 
        {

            @Override
            public void onGlobalLayout() 
            {
                findLayout.getViewTreeObserver().removeGlobalOnLayoutListener(this);

                filterAnimation.initializeOtherAnimations(findLayout);
            }
        });

    }

    @Override
    public void onClick(View v) 
    {
        int id = v.getId();

        switch(id)
        {

        case R.id.filter:

            filterAnimation.toggleSliding();

            break;
        }
    } 

} 
```

这是动画 res/anim

**1.filter_slide_in.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator">

    <translate 
        android:fromXDelta="-100%"
        android:toXDelta="0%"
        android:duration="1000"
        android:fillEnabled="true" />

</set> 
```

**2.filter_slide_out.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator">

    <translate 
        android:fromXDelta="0%"
        android:toXDelta="-100%"
        android:duration="1000"/>

</set> 
```

**3.other_slide_in.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator" >

    <translate 
        android:fromXDelta="0%"
        android:toXDelta="-80%"
        android:duration="1000"
        android:fillEnabled="true"/>

</set> 
```

**4.other_slide_out.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
     android:interpolator="@android:anim/decelerate_interpolator">

    <translate 
        android:fromXDelta="0%"
        android:toXDelta="80%"
        android:duration="1000"
        android:fillEnabled="true"/>

</set> 
```

那里有一个完整的工作和功能滑动菜单，您可以对其进行自定义以满足您的要求，如果有人在设置方面仍有问题，请随时询问，我很乐意为您提供帮助**:)**

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-27T09:14:15.503

我创建了自己的解决方案，用于滑开视图并在下方显示菜单，因为许多其他解决方案似乎不适用于较旧的 Android 版本，或者缺乏有关如何使其工作的正确说明。

我的解决方案具有以下特点：

*   支持滑动视图以显示位于其下方的菜单
*   上面的菜单和视图都可以是任何自定义视图
*   在旧的 Android 版本上受支持（测试至少在 Android 2.2 上工作）
*   适用于 PhoneGap / Cordova 项目

该解决方案使用自定义布局，称为 SlidingMenuLayout，您需要向其中添加 2 个视图。您添加的第一个视图是菜单，第二个是主视图。

将布局添加到现有项目的最简单方法是覆盖 Activity 的`setContentView()`方法：

```
@Override
public void setContentView(View view) {
    SlidingMenuLayout layout = new SlidingMenuLayout(this);
    layout.setLayoutParams(new LinearLayout.LayoutParams(
        ViewGroup.LayoutParams.MATCH_PARENT,
        ViewGroup.LayoutParams.MATCH_PARENT, 
        0.0F));
    layout.addView(new MenuView(this));
    layout.addView(view);
    super.setContentView(layout);
} 
```

在此示例中，`MenuView`是实际显示菜单的视图。实施此视图由您决定。
最后，您可以添加一个按钮（通常在主视图的左上角），该按钮会根据需要在布局上调用`openMenu()`或。 的代码可在 GitHub[项目页面](https://github.com/arendjr/SlidingMenuLayout/)上找到。`closeMenu()`
`SlidingMenuLayout`

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-06T08:18:38.367

对于那些使用*SlidingMenu*库 ( [https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu) ) 的人来说，有一种方法可以插入它，而且它似乎有效！在@Scirocco 的帮助下，将其放入您`onCreate`的活动中：

```
ViewGroup decorView = (ViewGroup) getWindow().getDecorView();
mSlidingMenu = new SlidingMenu(this);
ViewGroup mainContent = (ViewGroup) decorView.getChildAt(0);
decorView.removeView(mainContent);
mSlidingMenu.setContent(mainContent);
decorView.addView(mSlidingMenu);
mMenu = (LinearLayout) View.inflate(this, R.layout.menuview, null);
mSlidingMenu.setMenu(mMenu);
mSlidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_MARGIN);
mSlidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset); 
```

基本上它所做的是将`linearlayout`装饰视图替换为`slidingmenu`。

注意：我只对它进行了轻微的测试，但它似乎有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-17T09:00:38.397

```
 public class ImprovedSlidingPaneLayout extends SlidingPaneLayout {
    Context context;
    FrameLayout left;
    FrameLayout right;
    Boolean canOpen = true;
    public ImprovedSlidingPaneLayout(Context context) {
        super(context);
        this.context = context;
        this.left = new FrameLayout(context);
        this.right = new FrameLayout(context);
        this.addView(left);
        this.addView(right);
    }
    public ImprovedSlidingPaneLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.context = context;
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        if (canOpen)
            return super.onInterceptTouchEvent(ev);
        else
            return false;
    }

    public ImprovedSlidingPaneLayout canOpen(Boolean canOpen) {
        this.canOpen = canOpen;
        return this;
    }

    public ImprovedSlidingPaneLayout makeActionBarSlide(Window window){
        ViewGroup decorView = (ViewGroup) window.getDecorView();
        ViewGroup mainContent = (ViewGroup) decorView.getChildAt(0);
        decorView.removeView(mainContent);
        setContentView(mainContent);
        decorView.addView(this);
        return this;
    }

    public ImprovedSlidingPaneLayout setMenuView(View view){
        if((left.getChildCount()== 1)){
            left.removeView(left.getChildAt(0));
        }
        left.addView(view);
        return this;
    }

    public ImprovedSlidingPaneLayout setContentView(View view){
        if((right.getChildCount()== 1)){
            right.removeView(right.getChildAt(0));
        }
        right.addView(view);
        return this;
    }

    public ImprovedSlidingPaneLayout setMenuWidth(int width){
        left.setLayoutParams(new SlidingPaneLayout.LayoutParams(width, ViewGroup.LayoutParams.MATCH_PARENT));
        return this;
    }

} 
```

这是我的课扩展`SlidingPaneLayout`。可以随着动作滑动

# c++ - 从 C++ 将 JSON 对象返回到 HTTP POST REST 调用

> ID：11234378
> 
> 赞同：1
> 
> 时间：2012-06-27T20:30:28.927
> 
> 标签：c++, json, web-services, http, fastcgi

我有一个通过 REST 向网络公开的 C++ API。我已将应用程序编写为 FastCGI 进程。我能够使用正文中的数据发布到应用程序并取回文本。但现在，我想将数据作为 JSON 对象返回，而不是文本。

我已经将输出打包到 JSON 文件中。我只需要知道如何将其传递回请求者。

编辑：

我目前有这样的东西：http: [//pastebin.com/vhC30kTJ](http://pastebin.com/vhC30kTJ)

在此，我在 printcontent(string) 函数中打印文本。我使用 cout 打印的文本由 FastCGI 传回给 HTTP 请求者。我想改为传递 JSON，但我不知道该怎么做。我能够将数据写入 JSON 文件。我是传回 JSON 文件还是传回 json 样式字符串？我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:21:48.610

理想情况下，形成 JSON 的函数应该接受`std::ostream &`. 然后，如果你想写入一个你传入的文件`std::ofstream`，如果你想把它写入标准输出（在这种情况下你想要这样做，以便它被发送到浏览器）你可以传入`std::cout`. 确保首先写出所需的 HTTP 标头和空行，否则服务器/浏览器将尝试将 JSON 解释为 HTTP 标头。

```
void makejson(ostream & output, string content)
{
    /* output << "{\"some\":\"json\"}" */
}

// Write to file
ofstream file("data.json");
makejson(file, "somedata");
file.close();

// Write to browser
cout << "Content-Type: application/json\r\n\r\n";
makejson(cout, "somedata"); 
```

# javascript - 通过 javascript 处理 XSL 文件

> ID：11234379
> 
> 赞同：0
> 
> 时间：2012-06-27T20:30:37.090
> 
> 标签：javascript, xml

我想通过我的 javascript 代码处理我的 xsl 文件。我制作了我的 XSL 文件，但我想在运行时动态更改我的 XSL 文件。就像在标题或数据中添加更多属性一样。我的javascript代码如下`

```
<script>
function loadXMLDoc(dname)
{
if (window.XMLHttpRequest)
  {
  xhttp=new XMLHttpRequest();
  }
else
  {
  xhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xhttp.open("GET",dname,false);
xhttp.send("");
return xhttp.responseXML;
}

function displayResult()
{
xml=loadXMLDoc("cdcatalog.xml");
xsl=loadXMLDoc("cdcatalog.xsl");
// code for IE
if (window.ActiveXObject)
  {
  ex=xml.transformNode(xsl);
  document.getElementById("example").innerHTML=ex;
  }
// code for Mozilla, Firefox, Opera, etc.
else if (document.implementation && document.implementation.createDocument)
  {
  xsltProcessor=new XSLTProcessor();
  xsltProcessor.importStylesheet(xsl);
  resultDocument = xsltProcessor.transformToFragment(xml,document);
  document.getElementById("example").appendChild(resultDocument);
  }
}
</script> 
```

`My XSL file code:`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th align="left">Title</th>
      <th align="left">Artist</th>
      <th align="left">Country</th>
    </tr>
    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title" /></td>
      <td><xsl:value-of select="artist" /></td>
      <td><xsl:value-of select="country" /></td>
    </tr>
    </xsl:for-each>
  </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

`

# java - “立即发送”的单字命名约定

> ID：11234380
> 
> 赞同：1
> 
> 时间：2012-06-27T20:30:38.243
> 
> 标签：java, naming-conventions, send

我有一个网络应用程序，它创建一些自定义消息并将它们按顺序缓冲在一个 FIFO 队列中，直到`send()`调用一个方法，然后所有这些消息都被传输到它们的预期目的地。

还需要提供一种允许“立即发送”功能的方法，即在不考虑队列的情况下传输消息（或一组消息），队列保持不变，等待调用 send() 方法.

该类公开了几个方法的 API，所有这些方法都是单个英文单词，我想保持这个约定。

那么，有没有合适的单字替换，比如说，`sendNow()`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T20:32:58.693

你知道吗？我会选择`enqueue()`或`buffer()`代替，`send()`因为这是该方法正在做的事情。也许甚至考虑`later(Message)`？

然后`send()`用于立即发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:32:23.840

发送

词库可以帮助您。

[http://thesaurus.com/browse/Send?s=t](http://thesaurus.com/browse/Send?s=t)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:55:08.493

我会使用`expedite`或`dispatch`。然而，两者都不是完美的。Expedite 仅具有发送某物的模糊含义，而 dispatch 则不具有相当的即时性，可能会被误认为是 send 的同义词。我个人比较喜欢`expedite`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T20:36:30.987

遵循一些真实的场景，我将其称为priority()，就像在优先邮件中一样。[https://www.usps.com/ship/priority-mail.htm](https://www.usps.com/ship/priority-mail.htm)？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T22:37:32.757

你可以`post()`你的消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-27T21:06:32.900

加速（）怎么样？

[http://thesaurus.com/browse/hasten](http://thesaurus.com/browse/hasten)

“加快速度；快点”

# asp.net - 连接到实体数据源的标准 ASP.NET 控件是否提供内置验证？

> ID：11234385
> 
> 赞同：2
> 
> 时间：2012-06-27T20:31:16.633
> 
> 标签：asp.net, entity-framework

实体框架连接到我的数据库以检索列、数据类型、关系等。它还知道哪些列可以为空，不能为空。

如果我将常规的 asp.net 网格连接到实体数据源，它可以根据实体自动生成网格。它根据数据类型等知道哪些字段应该是复选框。

由于数据类型内置在实体类中，常规的 asp.net 控件（如网格或表单视图）是否也可以自动执行验证？（或至少生成必要的验证控制？）

谢谢，凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T08:43:01.927

**是的，您可以使用asp:ValidationSummary**控件显示验证错误，包括验证类型。这里有一个在gridview上使用这种方法的项目：http: [//code.msdn.microsoft.com/ASPNET-Web-Forms-97f8ee9a](http://code.msdn.microsoft.com/ASPNET-Web-Forms-97f8ee9a)，查看编辑学生。向实体添加更多验证规则的方法是附加元数据。如果您使用的是 EF Code First，您可以通过添加元数据类直接应用规则，此处示例：

```
[MetadataType(typeof(EntityNameMetaData))]
public partial class EntityName {} // name of entity which want to add validation
public class EntityNameMetaData // this is a place, where put validation rules
{
    [StringLength(25, ErrorMessage = "First name must be 25 characters or less in length.")]
    [Required(ErrorMessage = "First name is required.")]]
     //custom or other validation rules
     public String EntityProperty

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:57:59.417

这在 asp.net 中是不可能自动实现的，您必须定义列并创建项目模板来实现这一点。

# c++ - 使用 MinGW、freeglut 和 glew 编译简单的静态 OpenGL 4.0 程序

> ID：11234386
> 
> 赞同：5
> 
> 时间：2012-06-27T20:31:22.977
> 
> 标签：c++, winapi, opengl, freeglut, glew

问题出在标题中，我将尝试在下面列出我已经尝试过的内容，依此类推。

首先，据我了解，为了在 Windows 上使用 OpenGL 4.0，您必须扩展或绕过默认的 Windows 库，因为它仅提供 OpenGL 1.1。

所以我们在`C:/MinGW/`. 接下来我通过从[项目站点下载](http://freeglut.sourceforge.net/index.php#download)[tarball](http://sourceforge.net/projects/freeglut/files/freeglut/2.8.0/freeglut-2.8.0.tar.gz/download)来设置 FreeGLUT 。通过根据[指令](http://freeglut.sourceforge.net/docs/install.php)运行生成文件并在命令中添加少量内容来提取和编译。`--prefix``./configure`

```
./configure --prefix=/c/Users/Owner/root/
make all
make install 
```

现在我有 freeglut in `/c/Users/Owner/root/lib/`，`/c/Users/Owner/root/include/`等等。接下来是 GLEW，据我所知，我的问题孩子。

[从项目站点](http://glew.sourceforge.net/index.html)下载源存档（[直接 1.7.0.zip 链接](https://sourceforge.net/projects/glew/files/glew/1.7.0/glew-1.7.0.zip/download)）。编译有点复杂，我目前的配方来自堆栈溢出问题“[使用 mingw 在 Windows 上构建 glew](https://stackoverflow.com/questions/6005076/building-glew-on-with-mingw) ”。下面列出了一个缩写形式：

```
mkdir lib/
mkdir bin/
gcc -DGLEW_NO_GLU -O2 -Wall -W -Iinclude -DGLEW_BUILD -o src/glew.o -c src/glew.c
gcc -shared -Wl,-soname,libglew32.dll -Wl,--out-implib,lib/libglew32.dll.a -o lib/glew32.dll src/glew.o -L/mingw/lib -lglu32 -lopengl32 -lgdi32 -luser32 -lkernel32
ar cr lib/libglew32.a src/glew.o
gcc -DGLEW_NO_GLU -DGLEW_MX -O2 -Wall -W -Iinclude -DGLEW_BUILD -o src/glew.mx.o -c src/glew.c
gcc -shared -Wl,-soname,libglew32mx.dll -Wl,--out-implib,lib/libglew32mx.dll.a -o lib/glew32mx.dll src/glew.mx.o -L/mingw/lib -lglu32 -lopengl32 -lgdi32 -luser32 -lkernel32
ar cr lib/libglew32mx.a src/glew.mx.o 
```

并且应该从`/path/to/glew-1.7.0/`.

* * *

现在通过“完成”库的设置（假设没有错误......）编译我的简单程序是用这一行完成的。

```
${G++}  -DFREEGLUT_STATIC -DGLEW_STATIC -m32 main.cpp -o main.exe -lfreeglut_static -lopengl32 -lwinmm -lgdi32 -lglew32  -I ${ROOTPATH}/include -L ${ROOTPATH}/lib --static 
```

现在稍微分解一下，并解释为什么我有各种“额外”的论点，并向您展示我已经遇到并解决了哪些错误和问题。

1.  `-DFREEGLUT_STATIC`并`-lfreeglut_static`使用而不是正常使用，`-lfreeglut`因为我们想要在这里进行静态构建。不这样做会导致与 freeglut 相关的链接器错误。
2.  `-DGLEW_STATIC`出于同样的原因添加。
3.  `-lwinmm`添加以修复链接器错误：`freeglut_init.c:(.text+0x5d9): undefined reference to '_timeBeginPeriod@4'`.
4.  `-lgdi32`添加以修复链接器错误：`c:/Users/Owner/root//lib\libfreeglut_static.a(freeglut_init.o):freeglut_init.c:(.text+0x58c): undefined reference to '_GetDeviceCaps@8'`

现在我被以下链接器错误难住了：

```
c:/Users/Owner/root//lib\libglew32.a(glew.o):glew.c:(.text+0x83e8): undefined reference to `_glGetString@4'
c:/Users/Owner/root//lib\libglew32.a(glew.o):glew.c:(.text+0xa1b2): undefined reference to `_glGetString@4'
c:/Users/Owner/root//lib\libglew32.a(glew.o):glew.c:(.text+0xa290): undefined reference to `_glGetString@4' 
```

产生此错误 ( ) 的最小测试用例`main.cpp`是。

```
#include <GL/glew.h>
#include <GL/freeglut.h>

int main(int argc, char **argv) {
  glEnableVertexAttribArray(0);
} 
```

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T12:06:54.710

尝试在最后一行添加 -lopengl32 以编译您的程序，看看它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:44:47.520

参数顺序对于`gcc`链接器选项很重要。

试试这个：

```
${G++} -DFREEGLUT_STATIC -DGLEW_STATIC -m32 main.cpp -o main.exe -I ${ROOTPATH}/include -L ${ROOTPATH}/lib -lopengl32 -lwinmm -lgdi32 -lglew32 -static -lfreeglut_static 
```

另外，我认为没有双破折号`--static`选项，只是`-static`.

在 win32 上，你需要一个成功`glewInit()`的`glEnableVertexAttribArray()`函数指针才能有效。在检查您的核心版本和/或扩展之后，当然:)

# php - PHP：如果它是关联数组，如何通过其数字偏移量获取数组的值？

> ID：11234388
> 
> 赞同：5
> 
> 时间：2012-06-27T20:31:31.237
> 
> 标签：php, arrays

我有一个关联数组，当 var dumped 看起来像这样：

```
Array
(
    [tumblr] => Array
        (
            [type] => tumblr
            [url] => http://tumblr.com/
        )

    [twitter] => Array
        (
            [type] => twitter
            [url] => https://twitter.com/
        )

) 
```

如您所见，键是自定义的“tumblr”和“twitter”，而不是数字 0 和 1。

有时我需要通过自定义键获取值，有时我需要通过数字键获取值。

有什么办法可以`$myarray[0]`输出：

```
(
    [type] => tumblr
    [url] => http://tumblr.com/
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T20:32:47.790

您可以通过以下方式运行数组[`array_values()`](http://php.net/array_values)：

```
$myarray = array_values( $myarray); 
```

现在你的数组看起来像：

```
array(2) {
  [0]=>
  array(2) {
    ["type"]=>
    string(6) "tumblr"
    ["url"]=>
    string(18) "http://tumblr.com/"
  } ... 
```

这是因为`array_values()`只会从数组中获取值并将数组重置/重新排序/重新设置为数字数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:33:06.860

您可以使用[`array_values`](http://php.net/manual/en/function.array-values.php)获取具有数字索引的数组的副本。

# c# - 通过计算和存储逆进行快速整数除法？

> ID：11234393
> 
> 赞同：3
> 
> 时间：2012-06-27T20:31:57.320
> 
> 标签：c#, division, inverse

据我了解，当前进行整数除法的方法是在硬件中计算倒数，然后执行乘法。

我有一些 C# 代码，其中大量时间用于整数除法，其值很少更改，以至于可以缓存它们的值。

我想在软件中执行硬件算法，即计算除数的倒数并将所有这些除法转换为乘法。有谁知道执行这种转换的算法，或者更好的是，CLR 中有什么东西可以自动执行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:48:20.017

有一个[关于整数除法乘法主题的优秀博客文章系列](http://ridiculousfish.com/blog/posts/labor-of-division-episode-i.html)。它确实包含自己实施转换所需的一切。

# eclipse - 为什么我的eclipse项目没有构建路径？

> ID：11234399
> 
> 赞同：15
> 
> 时间：2012-06-27T20:32:38.413
> 
> 标签：eclipse, svn

在 Eclipse 中没有构建路径有什么好处？当它就像你永远不会使用的东西时，为什么设置默认值？似乎开发 eclipse indigo 是为了使软件开发尽可能地晦涩难懂。我刚刚从另一台计算机上签出了我今天下午签入的项目（称为地牢世界）的新副本，并且自动没有任何工作，无法编译，无法选择构建路径，无法添加 jre，无法添加 jdk ，无法将其添加到项目属性中。

![在此处输入图像描述](../Images/4f3ba7a1a5855de602018ec8acd1c8e6.png)

我的日食坏了吗？我不敢相信这会发生，这么简单的事情不可行。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-06-15T10:54:21.473

以上解决方案对我没有任何作用，所以我在下面尝试

右键单击项目>>属性>>项目方面>>单击java

[![在此处输入图像描述](../Images/6c0fe1b25282cfbceeed084e1c50baae.png)](https://i.stack.imgur.com/zmSsV.jpg)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T20:52:38.963

看起来您没有将 Eclipse 项目元数据文件添加到源代码控制系统，因此 Eclipse 不知道您的构建路径是什么，甚至不知道它是否是 java 项目。您可以看到地牢世界项目上的小文件夹缺少小“j”，这意味着 Eclipse 不认为它是一个 java 项目。

返回到您的另一台计算机并在原始项目根目录中查找以下文件...

1.  。项目
2.  .classpath
3.  .settings/*

确保所有最终都在您的源代码控制系统中，否则将无法正常工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-24T07:17:31.303

我有同样的问题，但我已经解决了

项目右键 -> 属性 -> java 构建路径 -> src/main/sources

全部删除“已排除”上的项目，然后该项目变为“（无）”状态

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-10T15:19:10.643

我尝试了以下步骤，它对我有用。

**右键单击项目>>属性>>项目方面>>单击java**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-27T20:35:46.477

Eclipse 有一个构建路径。它存储在项目中的（默认隐藏）.classpath 文件中。您还可以通过项目属性中的 UI 访问它（右键单击您的项目、属性、java 构建路径）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-26T14:17:13.870

好吧，这可能不是您的问题，但是如果您在 Eclipse 中使用不同的视角（例如对于 Python），也会发生类似的情况。

[![在此处输入图像描述](../Images/5b3f613fb2ab90632b69b52a64a332ba.png)](https://i.stack.imgur.com/wT1ip.png)

对比

[![在此处输入图像描述](../Images/1f4993a42c052f1cd1d1456b62b90ef7.png)](https://i.stack.imgur.com/h7O81.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-17T12:58:03.573

在 Eclipse 中右键单击我的项目后没有条目。如何单击某些东西，wenn 构建路径条目丢失。所以我的 Eclpise 没有检测到我的 java 项目。我使用了以下 Maven 命令，之后我也清理了项目。现在 Projekt 可以按预期工作。所以...

如果您使用的是 Maven，请在项目目录的 cmd 控制台中尝试**mvn eclipse:eclipse ！**确保使用该命令的 Maven 文件夹的路径。

例如：

```
cd C:\yourEclipseProject\

C:\yourPathToMaven\apache-maven-2.2.1\bin\mvn eclipse:eclipse 
```

这对我有帮助。在网络研究失败后，一位同事告诉了我这个提示。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-30T14:45:09.590

我刚刚遇到了类似的问题，我发现在创建项目时我一直在选择 General Project 而不是 Java Project。在我选择 Java>Project 之后，它解决了我的问题。也许它也会解决你的问题。

选择之后，eclipse 也自动包含了 java 库。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-13T19:55:44.520

将 IDE 相关文件提交到源代码管理中不是一个好习惯。如果团队中的某个人使用不同的 IDE 怎么办？在 OP 提出这个问题时，这可能是唯一的选择。

eclipse (4.x) 上的新版本会自动处理这个问题。可能是通过观察您在项目中拥有什么样的源文件和构建文件。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-07-19T12:27:56.010

不知道原因。但这对我有用，所以发布它。

右键单击项目->“属性”->“Java 构建路径”。

[![在此处输入图像描述](../Images/62cd731cc72eb261b9b6561a8bd9ed34.png)](https://i.stack.imgur.com/ImSCk.png)

[![在此处输入图像描述](../Images/0cbe270baf4ba62ad459a422acb378be.png)](https://i.stack.imgur.com/9Ls2q.png)

# javascript - animate() 更新不够快

> ID：11234400
> 
> 赞同：1
> 
> 时间：2012-06-27T20:32:40.153
> 
> 标签：javascript, jquery, html, css

我正在制作一个保留在页面顶部的导航栏。当用户向下滚动时，这个栏会缩小，当用户回到页面顶部时，导航栏会恢复到原来的尺寸。

**问题：**当用户向下滚动时，导航栏按预期缩小。但是，如果用户快速滚动回到页面顶部，导航栏仍然会缩小，并且回调函数`animate()`中的`scrollTop()`函数会在几秒钟后触发。

为了调试这个，我包括`console.log($(window).scrollTop());`告诉我用户在页面上的当前位置。`console.log`用户滚动时，我会尽快获得输出。**但是** 应该在动画完成时触发，直到输出`{console.log('animated');`后几秒钟后才会出现。`console.log($(window).scrollTop());``0`

当用户向上滚动时，我怎样才能`animate()`快速响应？

**JS代码**

```
var navBar = $('#navbar-inner');
var top = navBar.css('top');
$(window).scroll(function() {
    console.log($(window).scrollTop());
    if($(this).scrollTop() > 50) {
        navBar.animate({'marginTop':'-20', 'height':'60'}, 300);
    } else {
        navBar.animate({'marginTop':'0', 'height':'80'}, 300, function() 
            {console.log('animated');});
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:01:41.657

（发表我的评论作为答案）

用于`.stop()`在开始新动画之前停止任何正在进行的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:57:10.643

我之前遇到过这种问题，动画的持续时间比用户操作的时间长。你只需要停止动画，比如

```
navBar.stop(true, true).animate(...); 
```

为了更好地理解 stop() 这里是链接[http://api.jquery.com/stop/](http://api.jquery.com/stop/)。希望能帮助到你

# javascript - 用于地理空间操作的 Node.js 库

> ID：11234413
> 
> 赞同：6
> 
> 时间：2012-06-27T20:33:20.020
> 
> 标签：javascript, google-maps, node.js, geospatial

我正在开发一个应用程序，其中有这样的地理空间多边形：

```
var polygon = [{"lat": -19.939323, "lng": -43.928983},
               {"lat": -19.939747, "lng": -43.933103},
               {"lat": -19.947291, "lng": -43.93497},
               {"lat": -19.948138, "lng": -43.931451},
               {"lat": -19.943882, "lng": -43.930292}] 
```

我将收到一个坐标来说明是否在多边形内部。我在 Google Maps Javascript API 的几何库中发现了一个功能完全相同的函数：[containsLocation(point:LatLng, polygon:Polygon)](https://developers.google.com/maps/documentation/javascript/reference#poly)

但这必须是服务器端的，使用node.js，有没有办法在node.js上使用这个功能，或者更好，有没有一个好的库可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T21:48:11.433

有几个节点模块，例如[geolib](https://npmjs.org/package/geolib)：

> 提供基本地理空间操作的库，如距离计算、十进制坐标到六十进制的转换，反之亦然等。

它具有确定相对于多边形的坐标的等效功能。

**参考**

*   [geolib Github 存储库](https://github.com/manuelbieh/geolib)
*   [geojson-js-utils Github 仓库](https://github.com/maxogden/geojson-js-utils)
*   [geojson-vt Github 存储库](https://github.com/mapbox/geojson-vt)

# android - 在 Horizo ntalScrollView 中使用 ScrollViews 布局

> ID：11234416
> 
> 赞同：6
> 
> 时间：2012-06-27T20:33:44.547
> 
> 标签：android, android-listview, horizontalscrollview

我想创建一种卡片布局，其中包含可以水平滚动卡片的`ListView`布局。`HorizontalScrollableView`一切正常，但滚动有问题。只有当我不水平滚动卡片时，我才能垂直滚动列表视图，反之亦然。

这是主容器：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <HorizontalScrollView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#ddd" >

        <LinearLayout
            android:id="@+id/list"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:orientation="horizontal" >
        </LinearLayout>
    </HorizontalScrollView>

</RelativeLayout> 
```

我膨胀并将列表视图项目添加到线性布局。我希望在没有这些限制的情况下平滑地进行垂直和水平滚动（同时水平和垂直滚动）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T19:43:30.203

看看这个，可能会帮助您实现自定义的双向滚动布局。

[https://github.com/ened/Android-Tiling-ScrollView/blob/master/src/asia/ivity/android/tiledscrollview/TwoDScrollView.java](https://github.com/ened/Android-Tiling-ScrollView/blob/master/src/asia/ivity/android/tiledscrollview/TwoDScrollView.java)

如果您想要任何 ListView 功能（如视图回收、过滤、适配器） - 事情会变得更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:46:10.803

我建议您使用 ViewFlipper 来提供水平滚动效果。然后将 ListView 添加到孩子的脚蹼。使用手势左右移动。

ListView 仍将垂直滚动，如果您无法将 OnItemClickListener 设置为 ListView，那么您可以使用 Gesture 的 SingleTap 方法。

[View Flipper讨论 1](http://www.anddev.org/view-layout-resource-problems-f27/multiple-calls-of-getview-in-arrayadapter-t16595.html)中的 ListView和[View Flipper 讨论 2 中的 ListView](http://android-journey.blogspot.in/2009/12/android-viewflipper-and-slidingdrawer.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:44:39.143

我建议将您的 horiziontallayout 作为您在适配器的 getView() 中返回的根视图。这样每一行将彼此分开滚动。如果这不能立即起作用，您可能必须为您的行设置 setItemsCanFocus(true) 才能将输入提供给您的水平滚动视图。

# c# - 客户端异步调用 WCF 服务

> ID：11234419
> 
> 赞同：0
> 
> 时间：2012-06-27T20:33:52.037
> 
> 标签：c#, wcf, client-server, httpclient, wcf-client

> **可能重复：**
> [使用 C# 在 WCF 中同时访问 PerSession 服务](https://stackoverflow.com/questions/11264825/accessing-persession-service-simultaneously-in-wcf-using-c-sharp)

我已经实现了具有方法 s1 和方法 s2 的 ac# wcf 服务。方法 s1 是执行处理的主要过程，方法 s2 是辅助方法，它基于两个静态 int 变量（总计、当前）跟踪方法 s1 的状态。

```
total ----> indicates the total number of tasks.
current-----> indicates the current task that is being processed. 
```

我还创建了 3 个异步调用 Web 服务的 c# 客户端。下面提到的这些是客户端方法。

```
client1: c11,c12
client2: c21,c22
client3: c31,c32 
```

所有这 3 个客户端方法都并行调用服务。所以现在我的问题是 2 个变量 total 和 current 是静态变量。当所有三个客户端同时调用服务时，总值和当前值被混合在一起，而不是为每个客户端分开。

例如，在正常的合格场景中，它们应该是这样的：

```
client1: (total,current)------>(3,1)(3,2)(3,3)
client2: (total,current)------>(2,1)(2,2)
client3: (total,current)------>(4,1)(4,2)(4,3)(4,4) 
```

但是现在我的常规情况是，我将所有值混合在一起，因为对于任何应该相同的客户端，总变量值不应该更改。因为这两个变量 total 和 current 将在我的 wcf 应用程序中被访问并且会被修改，所以我在一个类中将它们设置为静态，以便它们可以作为全局变量，并且可以通过我想要在 wcf 中的任何位置通过类名访问程序。所以我无法弄清楚如何解决这个问题，任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:44:43.870

本质上，服务是每个客户端自己的实例。使用`ConcurrencyMode`，您可以进行调整。

看看这个[http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicebehaviorattribute.concurrencymode.aspx)

# html - document() 函数——写出具有分组内容的多个文件

> ID：11234422
> 
> 赞同：0
> 
> 时间：2012-06-27T20:34:09.237
> 
> 标签：html, xslt, xpath, dita

我正在尝试根据以下规则拆分各种 HTML 文档：

1.  对于 any `<h3>`，根据内容创建一个文件名的新文档`<h3>`（用一些翻译来替换不需要的字符）
2.  对于每个`li`的 a 的子`following-sibling::ol`元素`h3`，创建一个`step`包含该内容的元素`<li>`，包括任何子元素
3.  将出现在 next 之前的`following-sibling`任何复制到作为2 中创建的元素的后续兄弟元素的元素。`<ol>``<ol>``<info>``<step>`

因此，我有以下输入文档（这可能有点多，我已尽力简化）：

```
 <body>
<h2><a name="BK_Admin_User_Top" id="BK_Admin_User_Top"></a><b>Page title</b></h2>
<p>Page content.</p>
<p class="Intro">What do you want to do?</p>
<p class="indent-intro hcp1 c1">
  <a href="#Admin_User_New">add a new user</a>
</p>
<p class="indent-intro hcp1 c1">
  <a href="#_Admin_User_Edit" class="hcp2">change an existing user</a>
</p>
<p class="indent-intro hcp1 c1">
  <a href="#_Admin_User_Delete" class="hcp2">delete a user</a>
</p>

<h3><a name="_Admin_User_New" id="_Admin_User_New"></a>Adding a User</h3>
<ol start="1" type="1">
  <li class="p-listLevelOne">
    <p class="listLevelOne">From the 
    <span class="bold">Maintenance</span> folder on the menu tree, click 
    <span class="bold"> Admin Users</span>. </p>
  </li>
</ol>
<p class="SANote hcp3 c2">
<img src="image45.gif" alt="" width="17" height="16" border="0" class="hcp4" /> &#160;If you are a system administrative user, a  Group tab and a  tab for you to enter or select a  group and  for the administrative unit and user precede the  Admin Unit tab for all procedures.</p>
<p class="BGNote">
<i class="hcp3">
<span class="c3">
<span>
  <img src="image45.gif" alt="" width="17" height="16" border="0" class="hcp4" />
</span> &#160;If you are a  group user, a</span>  
<span class="c3">tab for you to enter or select the  for the administrative unit and user precedes the  Admin Unit</span></i> 
<i>
  <span class="c3">tab for all procedures.</span>
</i></p>
<ol start="2" type="1">
  <li class="p-listLevelOne">
    <p class="listLevelOne">Do one of the following:</p>
  </li>
  <li class="p-listSubBullet">
    <p class="listSubBullet">Enter the ID of administrative unit of the user you want to add in the Admin Unit ID field and click 
    <b>NEXT</b>.</p>
  </li>
</ol>

<h3>
<a name="_Admin_User_Edit" id="_Admin_User_Edit"></a>Changing a  User</h3>
<ol>
  <li class="p-listLevelOne">
    <p class="listLevelOne c6">From the 
    <b>Maintenance</b> folder on the menu tree, click 
    <b> Admin Users</b>. The  Admin User Maintenance dialog is displayed with the  Admin Unit tab.</p>
  </li>
</ol>
<p class="SANote c6">
  <span class="hcp8 hcp3 c11">
  <img src="image45.gif" alt="" width="17" height="16" border="0" class="hcp4" /> &#160;If you are a system administrative user, a  Group tab and a  tab for you to enter or select a  group and  for the administrative unit and user precede the  Admin Unit tab for all procedures.</span>
</p>
<p class="BGNote">
<i class="hcp3">
<span class="c3">
<span>
  <img src="image45.gif" alt="" width="17" height="16" border="0" class="hcp4" />
</span> &#160;If you are a  group user, a</span>  
<span class="c3">tab for you to enter or select the  for the administrative unit and user precedes the  Admin Unit</span></i> 
<i>
  <span class="c3">tab for all procedures.</span>
</i></p>
<ol start="2" type="1">
  <li class="p-listLevelOne">
    <p class="listLevelOne">Do one of the following:</p>
  </li>
  <li class="p-listSubBullet">
    <p class="listSubBullet c6">Enter the ID of administrative unit of the user you want to modify in the 
    <b>Admin Unit ID</b> field and click 
    <b>NEXT</b>.</p>
  </li>
  <li class="p-listSubBullet">
    <p class="listSubBullet c6">Click 
    <b>SEARCH</b> to display a list of  administrative units to select from. Select the one you want and click 
    <b>NEXT</b>. You can filter the list by entry in either or both the 
    <b>Admin Unit ID</b> and 
    <b>Admin Unit Name</b> fields.</p>
  </li>
</ol>
<p class="indent hcp9 c7">The  Admin User 
<span class="c12">tab is displayed.</span></p>
<ol start="3" type="1">
  <li class="p-listLevelOne">
    <p class="listLevelOne hcp12 c7">
      <span class="hcp8">Do one of the following:</span>
    </p>
  </li>
  <li class="p-listSubBullet">
    <p class="listSubBullet hcp9 c7">Enter the ID of the user that you want to modify in the 
    <b>User ID</b> field and click 
    <b>EDIT</b>.</p>
  </li>
  <li class="p-listSubBullet">
    <p class="listSubBullet c6">Click 
    <b>SEARCH</b> to display a list of users to select from. Select the one you want and click 
    <b>EDIT</b>. You can filter the list by entry in either or both the 
   User ID and 
    User Name fields.</p>
  </li>
</ol>
<p class="indent hcp9 c7">
<span class="c12">The  Admin User Details</span> 
<span class="c12">tab is displayed with the current values for the selected user.</span></p>
<ol start="4">
  <li class="p-listLevelOne">
    <p class="listLevelOne c6">Change the current data as needed.</p>
  </li>
</ol>
<p class="listLevelOne hcp3 c13">
<span class="c3">
  <img src="image45.gif" alt="" width="17" height="16" border="0" class="hcp4" />
</span> &#160;To reset the user's password, click PASSWORD. &#160;The initial password is system generated and then displayed in the Password field.</p>
<ol start="5">
  <li class="p-listLevelOne">
    <p class="listLevelOne hcp9 c7">If needed at any point, click 
    <b>RESET</b> to return the fields to the last saved values.</p>
  </li>
  <li class="p-listLevelOne">
    <p class="listLevelOne hcp9 c7">Click 
    <b>APPLY</b>. The changes are made to the database.</p>
  </li>
  <li class="p-listLevelOne">
    <p class="listLevelOne hcp9 c7">Click 
    <b>CLOSE</b> to end the maintenance session.</p>
  </li>
</ol>
 </body> 
```

我的转变是：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<!-- identity template -->
<xsl:template match="@*|node()" name="identity">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:key name="kFollowing" match="*[preceding-sibling::h3]" 
    use="generate-id(preceding-sibling::h3[1])"/> 

<xsl:template match="h3[preceding::p[@class='Intro']]" priority="10">
    <xsl:variable name="yeti-title">
        <xsl:value-of select="normalize-space(.)"/>                                                    
    </xsl:variable>
    <xsl:variable name="title_filename">
        <xsl:value-of select="translate($yeti-title,' /.()�?','___')"/>
    </xsl:variable>
    <xsl:variable name="newfilename">
        <xsl:value-of select="concat('done\',generate-id(.),'_',$title_filename,'.dita')"/>
    </xsl:variable>
    <xsl:document href="{$newfilename}" method="xml">
        <task>
            <xsl:attribute name="id">
                <xsl:value-of select="$title_filename"/>
            </xsl:attribute>
            <title>
                <xsl:value-of select="$yeti-title"/>
            </title>
            <taskbody>
                <context>              
                    <draft-comment>This topic was automatically generated. Its parent topic is "<xsl:value-of select="/descendant::title[1]"/>."</draft-comment>
                </context>         
                <steps>   
                    <xsl:variable name="h3-id" select="generate-id(.)"/> x
                    <xsl:for-each select="li[key('kFollowing',$h3-id]">
                        <step>
                            <cmd>
                                <xsl:value-of select="."/>
                            </cmd>
                            <xsl:if test="following-sibling::li[1][@class='p-listSubBullet']">
                                <info>
                                    <ul>
                                        <xsl:for-each select="following-sibling::li[@class='p-listSubBullet']">
                                            <li><xsl:value-of select="."/></li>
                                        </xsl:for-each>
                                    </ul>
                                </info>
                            </xsl:if>
                        </step>  
                    </xsl:for-each>
                </steps>
            </taskbody>
        </task>
    </xsl:document>  
</xsl:template> 
```

期望的结果是三个文件：

第一个已经由较大的变换处理：

```
<?xml version="1.0" encoding="UTF-8"?>
<task>
    <title>Page title</title>
    <taskbody>
        <context>
            <p>What do you want to do?</p>
            <p><xref href="{generated href value}"/></p>
            <p><xref href="{generated href value}"/></p>
            <p><xref href="{generated href value}"/></p>
        </context>
    </taskbody>
</task> 
```

第二个文档，由`h3`源文档中的第一个触发：

```
<task>
    <title>Adding a User</title>
<steps>
    <step><cmd>From the <uicontrol>Maintenance</uicontrol> folder on the 
    menu tree, click <uicontrol> Admin Users</uicontrol>.</cmd>
        <info><note>If you are a system administrative user, a 
            Group tab and a  tab for you to enter or select a  group and  for the
            administrative unit and user precede the  Admin Unit tab for all procedures.</note>
            <note>If you are a  group user, a  
                tab for you to enter or select the  for the administrative unit and 
                user precedes the  Admin Unit tab for all procedures. 
            </note>
     </info></step>
    <step><cmd>Do one of the following:</cmd>
    <info>
        <ul>
            <li>Enter the ID of administrative unit of the user you want to add in the Admin Unit ID field and click  
                <uicontrol>NEXT</uicontrol>.   
            </li>
        </ul>
    </info></step>
</steps>
</task> 
```

第三个，由第二个触发`h3`。

```
 <?xml version="1.0" encoding="UTF-8"?>
<task>
    <title>Changing a User</title>
    <steps>
        <step><cmd>From the  
        <uicontrol>Maintenance</uicontrol> folder on the menu tree, click  
        <uicontrol> Admin Users</uicontrol>. The  Admin User Maintenance 
            dialog is displayed with the  Admin Unit tab.</cmd>
        <info><note> If you are a system administrative user, a  Group tab and a 
    tab for you to enter or select a  group and  for the administrative unit
    and user precede the  Admin Unit tab for all procedures.</note>
        <note>If you are a  group user, a tab for you to enter or select the 
         for the administrative unit and user precedes the  Admin Unit tab for all procedures.</note></info></step>
        <step><cmd>Do one of the following:</cmd>
        <info>
            <ul>
                <li>Enter the ID of administrative unit of the user you want to modify in the  
                    <uicontrol>Admin Unit ID</uicontrol> field and click  
                    <uicontrol>NEXT</uicontrol>. </li>
                <li>
                    Click  
                    <uicontrol>SEARCH</uicontrol> to display a list of  administrative units to select from. Select the one you want and click  
                    <uicontrol>NEXT</uicontrol>. You can filter the list by entry in either or both the  
                    <uicontrol>Admin Unit ID</uicontrol> and  
                    <uicontrol>Admin Unit Name</uicontrol> fields. 
                </li>
            </ul><p>The  Admin User tab is displayed.</p> 
        </info></step>
        <step><cmd>Do one of the following:</cmd>
            <info><ul>
                <li>Enter the ID of the user that you want to modify in the  
                    <uicontrol>User ID</uicontrol> field and click  
                    <uicontrol>EDIT</uicontrol>.</li>
                <li>Click  
                    <uicontrol>SEARCH</uicontrol> to display a list of users to select from. 
                    Select the one you want and click  
                    <uicontrol>EDIT</uicontrol>. You can filter the list by entry in either or both the  
                    User ID and  
                    User Name fields.</li>
            </ul>
                <p> The  Admin User Details 
                    tab is displayed with the current values for the selected user.</p></info>
        </step>
        <step><cmd>Change the current data as needed.</cmd>
            <note>To reset the user's password, click PASSWORD. The initial password is system generated and then displayed in the Password field.</note></step>
        <step><cmd>If needed at any point, click  
            <uicontrol>RESET</uicontrol> to return the fields to the last saved values.</cmd>            
    </step>
    <step><cmd>
        Click  
        <uicontrol>APPLY</uicontrol>. The changes are made to the database.
    </cmd></step>
        <step><cmd>Click  
            <uicontrol>CLOSE</uicontrol> to end the maintenance session.</cmd></step></steps>
</task> 
```

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:50:08.333

`h3`通过在 div 中手动包装和“子”内容，然后使用以下转换，我能够获得所需的结果文档。还有一些其他的杂项模板可以处理一些较小的细节，但问题的核心已经解决了。

```
<xsl:stylesheet version="1.1" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="kFollowing" match="p[contains(./@class,'Note')]|ul|table" 
 use="generate-id(preceding::p[@class='listLevelOne'][1])"/> 

<xsl:template match="div[child::ol]" priority="10">
  <xsl:variable name="yeti-title">
    <xsl:value-of select="normalize-space(child::h3)"/>                                                    
  </xsl:variable>
  <xsl:variable name="title_filename">
    <xsl:value-of select="translate($yeti-title,' /.()�?','___')"/>
  </xsl:variable>
  <xsl:variable name="newfilename">
    <xsl:value-of select="concat('done\',generate-id(.),'_',$title_filename,'.dita')"/>
  </xsl:variable>
  <xsl:document href="{$newfilename}" method="xml">
    <task>
      <xsl:attribute name="id">
        <xsl:value-of select="$title_filename"/>
      </xsl:attribute>
      <title>
        <xsl:value-of select="$yeti-title"/>
      </title>
      <taskbody>
        <context>              
          <draft-comment>This topic was automatically generated. Its parent topic is "<xsl:value-of select="/descendant::title[1]"/>."</draft-comment>
        </context>  
        <steps>   
          <xsl:for-each select="descendant::p[@class='listLevelOne']">
            <xsl:variable name="ol_id">
              <xsl:value-of select="generate-id()"/>
            </xsl:variable>
            <step>
              <cmd>
                <xsl:apply-templates/>
              </cmd>
                <info>
                  <xsl:apply-templates select="key('kFollowing',$ol_id)"/>
                </info>
            </step>  
          </xsl:for-each>
        </steps>   
      </taskbody>
    </task>  
  </xsl:document> 
```

# jquery - 在自定义 JQuery 中嵌套 JQuery UI 选项卡

> ID：11234423
> 
> 赞同：7
> 
> 时间：2012-06-27T20:34:09.580
> 
> 标签：jquery, jquery-ui, nested, jquery-ui-tabs

我正在运行一个 Wordpress 主题 ( [Slate](http://themes.okaythemes.com/slate/) )，它带有实现由`jquery.tabs.min.js`.

使用他们的简码，我尝试嵌套标签，但没有成功，很可能是因为他们如何设计简码，所以我创建了一些简单的 jQuery 和额外的 HTML 来制作嵌套标签区域，然后包含原始主题的 jquery 标签短代码。

一切正常，但有一个问题让我感到困惑：当加载的子选项卡包含的选项卡少于之前的父选项卡子选项卡时，就会溢出子选项卡，而 jQuery 获取子选项卡来自上一组，将它们附加到当前选项卡。

一个工作示例是[here](http://www.casabianca.ca/dev/neighborhood-guide)。请注意，锻炼区域的“冬季运动活动”子选项卡也会加载到夜生活区域，游览父选项卡中的博物馆和旅游景点也会加载到日历父选项卡中，该子选项卡应仅包含 1 个子选项卡（蒙特利尔活动）。

所以我有一些奇怪的溢出。
我控制父标签的初学者jQuery代码如下。

```
$(function(){
    var subcat = $('.sub-categories'),
        subdivfirst = $('.sub-categories div:first'),
        subdiv = $('.sub-categories div'),
        cattitlefirst = $('.categories ul li:first'),
        cattitle = $('.categories ul li');

        subcat.children('div').hide();  
        subdivfirst.show();     
        cattitlefirst.addClass('active');

        $('.categories li a').click(function(){
            var $this = $(this);

            cattitle.removeClass('active');
            subcat.children('div').hide();

            $this.parent('li').addClass('active');

            var catLink = $this.attr('id');
            var showcat = $('div #sub-' + catLink);

            showcat
                .fadeIn(600)    
                .find('.panes').show()
        });
}); 
```

然后这些“ `.subcategories`div”中的每一个都包含标准的 jQueryUI 选项卡。

我认为 jQueryUI 选项卡和我创建的额外自制选项卡之间一定存在某种冲突，但我不确定如何追踪。任何清理我的代码的帮助、提示或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T10:52:03.533

为什么不对类别和子类别使用标准的 jquery UI 选项卡？您可以轻松地将自定义类添加到 css 中，它会自动在子选项卡上打开第一个选项卡，或者如果您使用 cookie，它会打开最后一个选项卡，该选项卡在该主选项卡中打开。

我在想的是这样的[http://jsfiddle.net/3H33m](http://jsfiddle.net/3H33m)

```
$(document).ready(function(){
    $('#Categories').tabs({
        show: { 
            effect: "fadeIn", duration: 600 
            } 
    });

    $('.sub-categories').tabs({
        show: { 
            effect: "fadeIn", duration: 600 
            } 
    });
}); 
```

仅将内容添加到第 1 类和第 2 类以及它们的子项。第二个主要类别子项基本上是从第一个复制的。我也改变了 HTML 结构，但这只是因为我想将元素快速放入左右。它也应该适用于您的结构。

# jquery - CSS关键帧：在页面加载时动画/过渡到内联值

> ID：11234426
> 
> 赞同：2
> 
> 时间：2012-06-27T20:34:23.403
> 
> 标签：jquery, css, css-transitions, css-animations

我正在开发一个基于 CSS 和 HTML 的百分比值条形表示的项目。代码如下所示：

**HTML：**

```
<div class="chart">
  <div class="bar" style="width:43%"></div>
</div> 
```

**CSS：**

```
.chart {
  background-color: #DADADA;
  height: 2px;
  position: relative;
}

.chart .bar {
    background-color: #3D98C6;
    height: 100%;
} 
```

我想做的是在页面加载时将条形宽度从 0% 开始，然后将其设置为内联值。我希望该值是内联的，以便我们的后端开发人员可以让 Ruby on Rails 只在视图中输出一个百分比。我知道我可以通过转换来做到这一点，我目前正在这样做：

CSS：

```
.chart .bar {
  -moz-transition: width 1.25s linear;
  -webkit-transition: width 1.25s linear;
  -ms-transition: width 1.25s linear;
  -o-transition: width 1.25s linear;
  transition: width 1.25s linear;
}

body.jquery.csstransitions:not(.loaded) .chart-container .chart .bar {
  width: 0% !important;
} 
```

JavaScript：

```
$(function() {
  $('body').addClass('jquery');

  // Way down in the code

  $('body').addClass('loaded');
}); 
```

这表示虽然用户支持 JavaScript，但他们的浏览器支持 CSS 过渡，并且“已加载”类尚未添加到正文中，但所有条形的宽度均为 0%。使用 jQuery 添加 .loaded 后，条形图都将转换为内联值。

我对这种方法的问题是，用户启用 JavaScript 并添加“jquery”和“csstransitions”类的可能性很小，但它会在到达添加的代码之前由于某种原因中断类`.loaded`。这将导致所有条都以 0% 的宽度出现。我从事的这个项目有很多人参与其中，JavaScript 有可能在正确的位置发生故障，导致我们的用户看到损坏的图表。如果我可以改为使用 CSS 关键帧动画来设置从 0% 宽度到内联宽度的动画，那么我可以将 JavaScript 排除在等式之外，并且知道代码可以为条形设置动画，或者在没有动画的情况下加载它们。

有什么方法可以在不依赖 JavaScript 的情况下在页面加载时对宽度进行动画/转换？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:08:10.597

看起来我的问题实际上很容易回答。我以前从未使用过 CSS 关键帧动画，也没有意识到它们基本上是根据时间有条件地应用样式，然后在它们之间制作动画。这意味着，通过不为某个关键帧应用样式，下一个应用样式的内容将被动画化以代替空样式。这意味着我可以这样做：

**HTML：**

```
<div class="chart">
  <div class="bar" style="width:43%;"></div>
</div> 
```

**CSS：**

```
@-moz-keyframes animate-bar {
    0%   { width: 0%; }
}

@-webkit-keyframes animate-bar {
    0%   { width: 0%; }
}

@-ms-keyframes animate-bar {
    0%   { width: 0%; }
}

@-o-keyframes animate-bar {
    0%   { width: 0%; }
}

@-keyframes animate-bar {
    0%   { width: 0%; }
}

.chart {
  background-color: #DADADA;
  height: 2px;
  position: relative;
}

.chart .bar {
  background-color: #3D98C6;
  height: 100%;
  -moz-animation: animate-bar 1.25s 1 linear;
  -webkit-animation: animate-bar 1.25s 1 linear;
  -ms-animation: animate-bar 1.25s 1 linear;
  -o-animation: animate-bar 1.25s 1 linear;
  animation: animate-bar 1.25s 1 linear;
} 
```

并且 0% 的开始动画只会动画到内联样式，因为没有结束样式意味着结束样式等同于覆盖该样式的任何内容。

**编辑：**

我创建了一个[JS Fiddle](http://jsfiddle.net/GrcmD/1/)来向未来的访问者展示这一点。

# android - 不支持c2dm，有什么办法吗？

> ID：11234427
> 
> 赞同：1
> 
> 时间：2012-06-27T20:34:24.107
> 
> 标签：android, android-c2dm

根据[c2dm 网站](https://developers.google.com/android/c2dm/)中包含的消息，似乎不再支持云到设备。我知道它在那里明确指定，但是，只是为了再澄清一次（因为我真的需要一个新用户），有没有可能的方法来获得任何新的 senderId/quota 以使用 c2dm 操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:05:48.153

不，您不能再获取 senderid 或更改您的配额。从今天开始，C2DM 已被[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)完全取代。

# javascript - Backbone.js 将此绑定到 setInterval

> ID：11234431
> 
> 赞同：4
> 
> 时间：2012-06-27T20:34:51.570
> 
> 标签：javascript, backbone.js, underscore.js

我正在尝试`this.collection`从`setInterval`. 但是，这不受约束。我似乎无法弄清楚如何绑定它以便`this`可以访问集合，而不是`setInterval`对象。

这是我的观点的一个片段。

```
initialize: function(){
  _.bindAll(this);
},
start: function() {
  setInterval(function() {
    this.collection.each(function(item) { 
      console.log(item.id);
    });
  }, 5000);
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T20:38:23.450

设置回调时，您应该需要[`bind()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/function/bind)的值：`this`

```
setInterval(function() {
    this.collection.each(function(item) { 
        console.log(item.id);
    });
}.bind(this), 5000); 
```

如果您需要 IE8 兼容性，请不要忘记包含上述 MDN 页面中的 shim。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T20:50:42.837

你可以这样做：

```
initialize: function(){
  _.bindAll(this);
},
afterInterval: function() {
  this.collection.each(function(item){ 
    console.log(item.id);
  });
},
start: function() {
  setInterval(this.afterInterval, 5000);
} 
```

`afterInterval`现在是一个回调，它可以访问`this`视图。

# javascript - Javascript 对象数组不返回正确的值？

> ID：11234432
> 
> 赞同：0
> 
> 时间：2012-06-27T20:35:08.320
> 
> 标签：javascript, javascript-objects

我有一个返回对象的 JavaScript 函数。我将该对象存储在 myarray 对象中，并尝试使用 switch 返回匹配的值。当我返回匹配值时，它给了我不正确的结果，即“未定义”

请阅读以下代码及其注释

```
parseobjectarray('description') // "undefined"

function parseobjectarray(attribute) {
    var returnval;
    $(document).ready(function () {
        var myArray = new Object(); 
        myArray = ParsePagetags(); // returns an object
        switch (attribute) {
            case 'description':
                returnval = myArray.description;
                //alert(returnval); // shows correct result
                break;
            default:
                returnval = "";
        }
            //alert(returnval); // shows correct result
    });
    alert(returnval); // shows incorrect result i.e "undefined"
    return returnval; // shows incorrect result i.e "undefined"
} 
```

为什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:37:49.003

您的：

```
alert(returnval); 
```

不在：

```
$(document).ready(function () {

}); 
```

尝试：

```
$(document).ready(function () {

    function parseobjectarray(attribute) {

        var returnval;
        var myArray = new Object();
        myArray = ParsePagetags(); // returns an object array

        switch (attribute) {
            case 'description':
                returnval = myArray.description;
                alert(returnval); // shows correct result
            break;
            default:
                returnval = "";
        }

        alert(returnval); // shows correct result
        return returnval;
    }

    parseobjectarray(yourAttribute);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:39:01.770

您的方法在`$(document).ready()`执行**之后**`alert(returnVal)`运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:43:32.077

你这里的架构是完全错误的。您正在初始化一个变量，然后调用该`$(document).ready()`方法，尝​​试警告该`returnval`变量，然后返回该变量。

尝试以下结构：

```
function parseobjectarray(attribute) {  
    var returnval;  

    var myArray = new Object();
    myArray = ParsePagetags(); // returns an object
    switch (attribute) {
        case 'description':
            returnval = myArray.description;
            alert(returnval); // shows correct result
            break;
        default:
            returnval = "";
    }
    alert(returnval); // shows correct result  

    return returnval;
}

$(document).ready(function(){
    parseobjectarray(attribute);
}); 
```

`$(document).ready()`用于在文档加载后建立事件侦听器或触发指定函数。如果您希望在加载文档后触发此函数并且希望重用该函数，则将函数声明从方法中移出，然后单独调用该函数。

如果函数不会被重用，那么您可以将函数声明保留在`$(document).ready()`函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:40:27.647

在你的函数中有 $(document).ready(... 有什么特殊的原因吗？试试没有 document.ready...

```
function parseobjectarray(attribute) {
var returnval;

    var myArray = new Object();
    myArray = ParsePagetags(); // returns an object array
    switch (attribute) {
        case 'description':
            returnval = myArray.description;
            alert(returnval); // shows correct result
            break;
        default:
            returnval = "";
    }

alert(returnval); // shows incorrect result i.e "undefined"
return returnval;
} 
```

# ruby - Ruby 截断单词 + 长文本

> ID：11234444
> 
> 赞同：0
> 
> 时间：2012-06-27T20:36:15.173
> 
> 标签：ruby, regex, truncation

我有以下函数，它接受文本和字数，如果文本中的字数超过字数，它会被省略号截断。

```
#Truncate the passed text. Used for headlines and such
  def snippet(thought, wordcount)
    thought.split[0..(wordcount-1)].join(" ") + (thought.split.size > wordcount ? "..." : "")
  end 
```

然而，这个函数没有考虑到非常长的单词，例如......

> “你好哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇哇

我想知道是否有更好的方法来处理我正在尝试做的事情，以便以有效的方式同时考虑字数和文本大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:47:57.210

这是一个 Rails 项目吗？

为什么不使用以下帮助程序：

```
truncate("Once upon a time in a world far far away", :length => 17) 
```

如果没有，只需重用代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:10:41.507

这可能是一个两步过程：

1.  将字符串截断为最大长度（不需要正则表达式）
2.  使用正则表达式，从截断的字符串中找到最大字数。

* * *

编辑：

另一种方法是将字符串拆分为单词，循环遍历数组，将长度相加。当你发现超限时，`join 0 .. index`就在超限之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:42:09.033

***提示：***正则表达式`^(\s*.+?\b){5}`将匹配前 5 个“单词”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:58:56.130

检查单词和字符限制的逻辑变得过于复杂，无法清晰地表达为一个表达式。我会建议这样的事情：

```
def snippet str, max_words, max_chars, omission='...'
  max_chars = 1+omision.size if max_chars <= omission.size # need at least one char plus ellipses
  words = str.split
  omit = words.size > max_words || str.length > max_chars ? omission : ''
  snip = words[0...max_words].join ' '
  snip = snip[0...(max_chars-3)] if snip.length > max_chars
  snip + omit
end 
```

正如其他人指出的那样，Rails String#truncate 几乎提供了您想要的功能（截断以适应自然边界的长度），但它不允许您独立声明最大字符长度和字数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-17T23:09:58.833

**前 20 个字符**：

```
>> "hello world this is the world".gsub(/.+/) { |m| m[0..20] + (m.size > 20 ? '...' : '') }
=> "hello world this is t..." 
```

**前5个字**：

```
>> "hello world this is the world".gsub(/.+/) { |m| m.split[0..5].join(' ') + (m.split.size > 5 ? '...' : '') }
=> "hello world this is the world..." 
```

# javascript - 如果控件位于活动的 RadPageView 中，要查找的 Javascript 是什么？

> ID：11234445
> 
> 赞同：0
> 
> 时间：2012-06-27T20:36:25.103
> 
> 标签：javascript, asp.net, telerik

我在 RadPageView 中有一个 Telerik RadGrid，在另一个 RadPageView 中有另一个 RadGrid。两者都是同一个 RadMultiPage 控件的一部分。我正在编写一个 Javascript 函数来调整 RadGrid 的大小以填充窗口中的剩余空间。如何确定哪个 RadGrid 在活动 RadPageView 中是可见的？

这可能会让您更清楚地了解我的意思：

```
<script type="text/javascript">
function resizeElements(sender, EventArgs) {
  var m_grid = sender;
  if(m_grid) {
     m_grid.GridDataDiv.style.height = right_pane_height - padding + "px";
  }
}
</script>
<div id="right_pane">
<telerik:RadMultiPage runat="server" >
  <telerik:RadPageView runat="server">
     <telerik:RadGrid runat="server" >
       <ClientSettings>
           <ClientEvents OnGridCreated="resizeElements" />
         </ClientSettings>
     </telerik:RadGrid>
  </telerik:RadPageView>
  <telerik:RadPageView runat="server">
     <telerik:RadGrid runat="server" >
       <ClientSettings>
           <ClientEvents OnGridCreated="resizeElements" />
         </ClientSettings>
     </telerik:RadGrid>
  </telerik:RadPageView>
</telerik:RadMultiPage>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:29:05.250

我不使用 Telerik，但是，一种通用的方法是在 Firebug/Chrome F12 视图/类似视图中查看元素的类，然后使用 JQuery 在 RadMultiPage 中查找“div:visible”（给这个如果可以在 ASP.NET 中使用 ID 或类）。在这个里面你会找到你的网格。

您的 JQuery 可能看起来像这样：

```
$('#myMultiPageID > div:visible > .classOfRadGrid').each(function() {
    resizeElements(this, myEventArgsVariable);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T16:14:35.253

我意识到没有必要知道哪个 RadGrid 是可见的以调整它的大小。我只是调整它们的大小。唯一的问题是我需要确保 RadGrid 及其 GridDataDiv 元素存在，因为当它们所在的 RadPageView 不可见时它们可能不存在。

```
if( m_grid && m_grid.GridDataDiv ) {
      m_grid.GridDataDiv.style.height = right_pane_height - padding + "px";
}

if( m_grid2 && m_grid2.GridDataDiv ) {
      m_grid2.GridDataDiv.style.height = right_pane_height - padding + "px";
} 
```

# ubuntu-10.04 - 使用 sun java 在 ubuntu 上安装 Resin

> ID：11234448
> 
> 赞同：0
> 
> 时间：2012-06-27T20:36:49.570
> 
> 标签：ubuntu-10.04, jdk1.6, resin

我正在尝试在 ubuntu 上安装树脂。我已经安装了jdk1.6。但是当我这样做时

```
sudo apt-get install resin 
```

它显示“open-jdk”也将被下载。为什么会这样？我不想打开 jdk。有没有其他方法可以在不打开 jdk 并将我的树脂指向 sun jdk home 的情况下安装树脂。我对 ubuntu 或者说 linux 比较陌生。谢谢

# java - Android开发Array与int比较

> ID：11234450
> 
> 赞同：0
> 
> 时间：2012-06-27T20:36:57.523
> 
> 标签：java, android, arrays, int

Android开发初学者。我的代码崩溃了。我制作了一个简单的 Java 方法，例如 php 中的 inArray 函数。

```
private ArrayList<Long> inArray(int array[], int searched)
{
    ArrayList<Long> ans = new ArrayList<Long>();

    for(int i = 0; i <= array.length; i++)
    {
          if (array[i] == searched)
          {
              ans.add((long) i);
          }
    } 

    return ans;
} 
```

在这个阶段不起作用

```
if (array[i] == searched) 
```

我如何比较它们？我尝试了很多东西，但代码一直在崩溃。非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:06:17.193

采用

```
for(int i = 0; i <array.length; i++) 
```

或者

```
for(int i = 0; i <= array.length-1; i++) 
```

代替

```
for(int i = 0; i <= array.length; i++) 
```

# java - Java 继承和包装

> ID：11234451
> 
> 赞同：0
> 
> 时间：2012-06-27T20:37:03.543
> 
> 标签：java, inheritance, code-generation, wrapper

我有一个想要的生成对象：

1.  保留现有功能，无需注入构造函数并重写要调用的每个方法`injectedObject.sameMethod()`。
2.  在不修改生成的对象的情况下向该生成的对象添加附加功能。

添加附加功能。

例如：

```
public class GeneratedObject {
    public String getThis() { ... }
    public String getThat() { ... }
}

public interface ObjectWrapper {
    String doThisWithThat();
}

public class ObjectWrapperImpl extends GeneratedObject implements ObjectWrapper {
    String doThisWithThat() { ... }
} 
```

但是，向下转换是不允许的，什么是正确的实现而不重写一堆冗余代码只是为了包装对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:10:35.350

我认为[装饰器模式](https://en.wikipedia.org/wiki/Decorator_pattern)可能会对您有所帮助：“装饰器模式可用于在运行时扩展（装饰）某个对象的功能，独立于同一类的其他实例”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:14:49.030

如果您可以从中提取接口`GeneratedObject`，则可以使用[动态代理](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Proxy.html)来执行此操作。您将创建一个代理来实现提取的接口`ObjectWrapper`，并使用调用处理程序将`GeneratedObject`接口中的所有方法调用传递给委托，并将`doThisWithThat()`调用发送到其他地方。

代理并不漂亮，但丑陋至少是本地化的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:38:56.007

你试过aspectj吗？ [http://www.eclipse.org/aspectj/doc/next/progguide/semantics-declare.html](http://www.eclipse.org/aspectj/doc/next/progguide/semantics-declare.html) 这有点复杂，但您的要求也是如此。

# c# - C# 创建对象 obj = new T()?

> ID：11234452
> 
> 赞同：23
> 
> 时间：2012-06-27T20:37:04.583
> 
> 标签：c#, generics

我有一个我们可以调用的超类`class A`和几个子类，例如`class a1 : A`, `class a2 : A`, ... 和`a6 : A`. 在我的`class B`中，我有一组方法可以创建一个子类并将其添加到一个`List<A>`in 中`B`。

我想缩短我目前的代码。所以不要写

```
Adda1()
{
    aList.Add( new a1() );
}

Adda2()
{
    aList.Add( new a2() );
} 

...

Adda6()
{
    aList.Add( new a6() );
} 
```

相反，我想写一些类似的东西

```
Add<T>()
{
    aList.Add( new T() );  // This gives an error saying there is no class T.
} 
```

那可能吗？

是否也可以约束`T`必须是类型`A`或其子类之一？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-27T20:39:09.643

李的回答是正确的。

原因是为了能够调用`new T()`，您需要为`new()`您的类型参数添加一个约束：

```
void Add<T>() where T : new()
{
     ... new T() ...
} 
```

您还需要一个约束`T : A`，以便您可以将类型的对象添加`T`到`List<A>`.

注意：`new()`与其他约束一起使用时，`new()`约束必须放在**最后**。

**有关的**

*   [类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-27T20:39:16.407

```
public void Add<T>() where T : A, new()
{
    aList.Add(new T());
} 
```

# asp-classic - 如果文件正在使用中，如何使用 cdo.message 发送附件

> ID：11234454
> 
> 赞同：0
> 
> 时间：2012-06-27T20:37:08.757
> 
> 标签：asp-classic

我正在尝试在带有附件的经典 asp 站点中发送电子邮件。我收到错误消息“该进程无法访问该文件，因为它正被另一个进程使用。”

该文件位于托管该站点的同一物理服务器上的共享文件夹中。如果我检查服务器上的计算机管理，我可以确认用户已打开它。

然后我的问题是：如果该文件正在使用中，我是否能够使用 cdo.message 发送保存到磁盘的文件的副本？我剥离了其余代码进行测试，但使用它仍然遇到相同的错误。

```
'Create the Message Object
Set objMsg = Server.CreateObject("CDO.Message")
'Set the properties of the Message
With objMsg 
    Set .Configuration = cdoConfig 
        .From = sFrom
        .To = sTo
        .Subject = sSubject
        .TextBody = sBody 
        .Send 
    End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:53:54.013

不，您不能规避此限制，也不想这样做，否则您可能会发送损坏的文件。

# java - 在 Batik 中使用 SVGConverter 将 svg 转换为 png 时图像质量不佳

> ID：11234455
> 
> 赞同：7
> 
> 时间：2012-06-27T20:37:10.673
> 
> 标签：java, batik

我转换后的图像质量非常低。我曾尝试使用 setQuality 方法，但它似乎并没有改变任何东西。

这是将 svg 转换为 png 的代码部分：

```
SVGConverter svgConverter = new SVGConverter();
String[] sources = { "C:/imageData.svg" };
svgConverter.setSources(sources);
svgConverter.setDestinationType(DestinationType.PNG);
svgConverter.setDst(new File("C:/image.png")); 
```

有谁知道我怎样才能使图像质量更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T11:12:59.137

我在将 SVG 转换为 PNG 时使用此代码（使用字节数组）：

```
private byte[] renderPng(byte[] svgBytes) {
    try {
        TranscoderInput transcoderInput = new TranscoderInput(new ByteArrayInputStream(svgBytes));
        ByteArrayOutputStream output = new ByteArrayOutputStream();
        TranscoderOutput transcoderOutput = new TranscoderOutput(output);

        Transcoder transcoder = null;
        String type = "png";
        if(type.equalsIgnoreCase("png")) { 
            transcoder = new PNGTranscoder()
            {
                @Override
                protected ImageRenderer createRenderer()
                {
                    ImageRenderer r = super.createRenderer();

                    RenderingHints rh = r.getRenderingHints();

                    rh.add(new RenderingHints(RenderingHints.KEY_ALPHA_INTERPOLATION,
                        RenderingHints.VALUE_ALPHA_INTERPOLATION_QUALITY));
                    rh.add(new RenderingHints(RenderingHints.KEY_INTERPOLATION,
                        RenderingHints.VALUE_INTERPOLATION_BICUBIC));

                    rh.add(new RenderingHints(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON));

                    rh.add(new RenderingHints(RenderingHints.KEY_COLOR_RENDERING,
                        RenderingHints.VALUE_COLOR_RENDER_QUALITY));
                    rh.add(new RenderingHints(RenderingHints.KEY_DITHERING,
                        RenderingHints.VALUE_DITHER_DISABLE));

                    rh.add(new RenderingHints(RenderingHints.KEY_RENDERING,
                        RenderingHints.VALUE_RENDER_QUALITY));

                    rh.add(new RenderingHints(RenderingHints.KEY_STROKE_CONTROL,
                        RenderingHints.VALUE_STROKE_PURE));

                    rh.add(new RenderingHints(RenderingHints.KEY_FRACTIONALMETRICS,
                        RenderingHints.VALUE_FRACTIONALMETRICS_ON));
                    rh.add(new RenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING,
                        RenderingHints.VALUE_TEXT_ANTIALIAS_OFF));

                    r.setRenderingHints(rh);

                    return r;
                }
            };

            transcoder.addTranscodingHint(PNGTranscoder.KEY_BACKGROUND_COLOR, Color.WHITE);
        } else {
            transcoder = new JPEGTranscoder();

            Float jpegQuality = new Float(0.95);
            // KEY_WIDTH - seems to pick it up just fine from the SVG charts.  Set to 560 otherwise.
            // KEY_QUALITY 0-1.0 with 1.0 being No Loss.  Value must be of type Float.  0.95 is 30% smaller and looks great.
            transcoder.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, jpegQuality);
        }

        // NOTE: for linux you need Java 1.4.1+ AND the headless environment (e.g. export JAVA_OPTS='-Djava.awt.headless=true').
        try {
            transcoder.transcode(transcoderInput, transcoderOutput);
        }
        catch(Exception e) {
            logger.error("SVG To Raster response transcode exception", e);
            if(output != null) {
                output.close();
            }
            throw( new RuntimeException("SVG To Raster Filter Response Stream Exception", e) );
        }

        if(output != null) {
            output.flush();
            output.close();
        }

        transcoderInput  = null;
        transcoderOutput = null;
        transcoder = null;

        return output.toByteArray();
    } catch (Exception exc) {
        logger.error("Error in rendering png method", exc);
    }
    return new byte[0];
} 
```

此外，SVG 文档中的 clipPath 元素应该包含这个属性，否则会有奇怪的伪影：

```
<clipPath shape-rendering="geometricPrecision" ... > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-01T08:31:43.070

在 Apache Batik 中，您可以通过传递转码器提示 KEY_PIXEL_UNIT_TO_MILLIMETER 来更改分辨率。

然而，重要的方面是您需要将您的高度和宽度缩放到与您正在寻找的新分辨率相同的比例。

例如：

**我的 SVG 尺寸为 3.5 * 2.0 英寸（252 * 144 像素）。**

**目标分辨率为 600 DPI。**

```
int RESOLUTION_DPI = 600;
float SCALE_BY_RESOLUTION = RESOLUTION_DPI / 72f;
float scaledWidth = 252*SCALE_BY_RESOLUTION;
float scaledHeight = 144*SCALE_BY_RESOLUTION;
float pixelUnitToMM = new Float(25.4f/RESOLUTION_DPI);

transcoderInput = new TranscoderInput(svgDocument);
TranscoderOutput transcoderOutput = new TranscoderOutput(ostream);
transcoder.addTranscodingHint(ImageTranscoder.KEY_BACKGROUND_COLOR, Color.WHITE);
transcoder.addTranscodingHint(PNGTranscoder.KEY_WIDTH, scaledWidth);
transcoder.addTranscodingHint(PNGTranscoder.KEY_HEIGHT, scaledHeight);

transcoder.addTranscodingHint(PNGTranscoder.KEY_PIXEL_UNIT_TO_MILLIMETER, pixelUnitToMM);

transcoder.transcode(transcoderInput, transcoderOutput); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-20T07:49:09.937

尝试这个....

```
jpeg.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, new Float(keyQuality));
jpeg.addTranscodingHint(JPEGTranscoder.KEY_HEIGHT, height*scalePercentage);
jpeg.addTranscodingHint(JPEGTranscoder.KEY_WIDTH, width*scalePercentage);
jpeg.addTranscodingHint(JPEGTranscoder.KEY_QUALITY, 1.0f);
jpeg.addTranscodingHint(JPEGTranscoder.KEY_BACKGROUND_COLOR, Color.WHITE); 
```

您需要像 set keyQuality 1.0f 一样增加高度和宽度。

如果 height=200 将高度增加 200*3(height*scalePercentage)。也类似于宽度

# php - 在 Javascript 和 php 中实现计时器的最佳方法

> ID：11234456
> 
> 赞同：0
> 
> 时间：2012-06-27T20:37:16.543
> 
> 标签：php, javascript, html, time, timer

我正在用 php 和 Javascript 开发一个测验应用程序。当用户点击提交按钮时测验开始（我不控制测验何时开始）。测验应该在特定时间后停止（我决定）。我不想完全依赖客户端计算机来停止时间，因为客户端计算机时间可以更改。测验不应在页面刷新时重新启动。

我知道 setInterval 和基本的 javascript。到目前为止我开发的功能完美无缺，但测验在页面刷新时重新启动。

```
function formatSecondsAsTime(secs) {
    var hours = Math.floor(secs / 3600);
    var minutes = Math.floor(secs / 60) - (hours * 60);
    var seconds = secs - (hours * 3600) - (minutes * 60);
    return hours + ':' + minutes + ':' + seconds;
}

function startTimer(mytime) {
    mytime = mytime.split(":");
    hrs = mytime[0];
    parseInt(hrs, 10);
    mins = mytime[1];
    parseInt(mins, 10)
    secs = mytime[2];
    parseInt(secs, 10);
    if (hrs > 0 || mins > 0 || secs > 0) {
        timerVar = setInterval(function () {
            if (secs > 0) //time is less than a minute
            {
                displayTime(hrs, mins, secs--);
            }
            else if (secs == 0 && mins > 0) {

                displayTime(hrs, mins = mins - 1, secs = secs + 59);
            }
            else if (secs == 0 && mins == 0 && hrs > 0) {
                displayTime(hrs--, mins = mins + 59, secs = secs + 59);
            }
            else if (secs == 0 && mins == 0 && hrs == 0) {
                clearTimeout(timerVar);
                displayTime(0, 0, 0);
            }
        }, 1000);
    }
    else {
        displayTime(0, 0, 0);
    }
}

function displayTime(hrs, mins, secs) {
    if (secs > 0 || hrs > 0 || mins > 0) {
        if ((secs.toString()).length < 2) secs = "0" + secs;
        if ((mins.toString()).length < 2) mins = "0" + mins;
        if ((hrs.toString()).length < 2) hrs = "0" + hrs;

        document.getElementById("quiztime").innerHTML = "Time remaining: " + hrs + ":" + mins + ":" + secs;
    }
    else {
        document.getElementById("quiztime").innerHTML = "Quiz has ended!";
        alert("Quiz has ended. Click ok to continue.");
        document.forms["answerForm"].submit();
    }
} 
```

请建议我最好的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:01:51.330

实现此目的的最佳方法之一如下：在测验开始时，向服务器发送 AJAX 请求，告诉您的 PHP 脚本它已启动。您的 PHP 脚本应该为保存开始时间的用户存储一个会话变量。在提交测验时，检查以确保当前时间与会话存储的开始时间之间的差异不大于您允许的时间量。

客户端无法编辑或查看会话变量。如果客户端在测验中间加载页面，则根据会话中的开始时间将 JS 计时器数量设置为剩余时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:41:26.423

我建议您使用 cookie 来确定当前用户是否在某个开始的测验中。即当用户单击提交时，您正在使用 PHP 设置 cookie 并在数据库中记录开始时间。每次用户访问该页面时，您都会检查该 cookie 并从数据库中获取记录。这样您就可以知道距离测验结束还剩多少时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:58:52.263

Cookie 是记住开始时间的关键。在 cookie 中设置开始时间，在 php 中提交。这同一时间应该在脚本元素中写入页面（然后服务器和客户端都将知道开始时间）。为了保护 cookie，您可以在服务器端对其进行加密。可以通过比较cookie中的值和js中的值（测试完成时）来验证开始时间没有被篡改。

如果页面重新加载并且 cookie 存在，请从 cookie 中提取时间而不是设置新时间。

# ruby-on-rails - Rails 3 i18n 如何*不*转义换行符

> ID：11234459
> 
> 赞同：7
> 
> 时间：2012-06-27T20:37:23.177
> 
> 标签：ruby-on-rails, internationalization, haml

我在我的 .text.haml 邮件模板中使用 i18n，我希望在 en.yml 中有一个带有换行符的字符串，但即使我使用 html_safe 或在键名后加上 _html，t() 也总是会转义它们。

有没有办法做到这一点？？

```
p3_html: >
    You love monkeys:
     \n- You look like one
     \n- Your smell like one
     \n- Your account has been flagged 
```

在我的 html.haml 模板中：

```
!= t('emails.post.twitter_forbidden.p3_html').html_safe 
```

无论 \n 是什么都被转义。我不能使用 %br 或其他任何东西，因为这些是文本模板。我知道我可以把它分成 4 个 i18n 字符串，但这真的很难过。

顺便说一句，我检查了一下，它是 i18n 转义，而不是 haml。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T20:57:40.537

你可以这样做：

`t('emails.post.twitter_forbidden.p3_html').html_safe.gsub("\n", '<br/>')`

据我所知，这是唯一的方法。

**编辑**

实际上，经过一番挖掘，我找到了`simple_format`帮手。

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-04T20:47:07.447

这里有几个选项：如上所述，simple_format 会有所帮助。像这样格式化你的 yml 文件：

```
 p3_html: |
      Some text:
      - Point 1
      - Point 2
      - Point 3 
```

然后使用

```
 =simple_format t(:p3_html) 
```

这会给你类似的东西

```
 <p>Some text
      <br>
      - Point 1
      <br>
      - Point 2
      <br>
      - Point 3
    </p> 
```

或者，如果您希望每行一个新段落：

```
 p3_html: |
      Some text:

      - Point 1

      - Point 2

      - Point 3 
```

这应该给你这个：

```
 <p>Some text</p>
    <p>- Point 1</p>
    <p>- Point 2</p>
    <p>- Point 3</p> 
```

或者类似的东西更灵活

```
 <% t(:p3_html).each_line do |line| %>
      <li>= |line|</li>
    <% end %> 
```

使您能够输入不同的格式：

```
 <li>- Point 1</li>
    <li>- Point 2</li>
    <li>- Point 3</li> 
```

最后的选择是在 yaml 中使用数组：

```
 p3_html: 
        - Some text:
        - - Point 1
        - - Point 2
        - - Point 3

    <% t(:p3_html).each do |line| %>
      <p>= |line|</p>
    <% end %> 
```

可能更干净，虽然我认为它会用逗号玩得很开心，并且上述版本的优点是您可以在格式之间切换而无需修改您的 yaml

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-15T17:12:48.933

我最终只在这样的语言环境文件中使用标签：

```
a:
  b: "Some <br /> thing" 
```

然后在模板中我制作它们[`.html_safe`](http://apidock.com/rails/String/html_safe)：

```
<%= t('a.b').html_safe %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-28T01:43:30.837

很简单，只需执行此操作即可将文本换行：

en.yml

```
long_text: |
  Lorem ipsum dolor sit amet.

  Consectetur adipisicing elit. 
```

app/views/sample/file.html.erb

```
<%= simple_format t(:'long_text') %> 
```

请参阅：[http ://apidock.com/rails/ActionView/Helpers/TextHelper/simple_format](http://apidock.com/rails/ActionView/Helpers/TextHelper/simple_format)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-29T16:35:07.177

I18n 只使用 yaml，而 yaml 可以有数组。:-)

所以我会探索使用这样的选项。

在您的 yaml 文件中，您将有一个名为 p3_html 的密钥

```
# http://en.wikipedia.org/wiki/YAML#Lists_of_associative_arrays
p3_html:
- some text
- some more text
- some more more text 
```

然后在您的 haml 视图中，您将拥有以下 HAML 代码：

```
= t('p3_html').each do |x| 
  %p= x 
```

或者如果您愿意，可以在一行中

```
= t('p3_html').each {|x| haml_tag :p, x } 
```

还要记住，如果你把它移到一个帮助器中，你可能必须在你的 ruby​​ 变量前面使用 haml_concat 帮助器。我不确定。

您还必须将翻译 yaml 变量 t('p3_html') 的相对/绝对命名调整为应用的命名。

希望这可以帮助！

# ruby - 停止长时间运行的延迟作业

> ID：11234460
> 
> 赞同：1
> 
> 时间：2012-06-27T20:37:29.340
> 
> 标签：ruby, delayed-job

我有一些工作需要很长时间才能完成。一般1-3小时。我使用宝石“守护进程”来守护延迟的工人。如果我使用 rake 任务：“script/delayed_job stop”来停止它们，那么它们不会停止，直到工人完成......

是否有一个简单的解决方案来停止工作？

我已经设法做到了，但也欢迎任何其他建议。

这个想法是：

*   捕获“TERM”信号（因为守护进程为其衍生进程发送“TERM”）并保存旧的
*   当“TERM”信号到来时，完成工作（但不要退出）
*   终止作业后设置回“TERM”的旧处理程序
*   将“TERM”发送到我所在的进程（将调用旧处理程序）

这是代码：

```
def self.prepare_to_be_stopped_by_daemons
  self.old_trap = Signal.trap("TERM") do
    self.should_terminate = true
  end
end
def check_the_stop_signal_by_daemons
  if self.class.should_terminate
    Delayed::Worker.logger.debug "Asked to be TERMINATED. Calling the old trap." if Delayed::Worker.logger
    self.class.restore_old_trap
    Process.kill("TERM", Process.pid)

    raise StopCrawlingException.new
  end
end

def self.restore_old_trap
  Signal.trap("TERM", old_trap)
end 
```

# jquery - 将图像附加到 div

> ID：11234467
> 
> 赞同：1
> 
> 时间：2012-06-27T20:38:03.210
> 
> 标签：jquery

我有以下代码通过 JSON 从 flickr 提要中拍摄照片，我正在尝试将它们附加到`div`另一个`div`. 我可以让它将所有图像附加到一个中`div`，但我希望它将每个图像附加到一个单独的`div`.

```
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=XXXMYKEYXXX&photoset_id=XXXMYSETXXX&extras=original_format&format=json&jsoncallback=?", function(data){
    $.each(data.photoset.photo, function(i,item){
        var photo = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.originalsecret + '_o.jpg';
        /*var longer = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.originalsecret + '_t.jpg';*/
        $('<div class="slideshow-content">').appendTo("#slideshow-holder");
        $('<img/>').attr({src: photo}).appendTo(".slideshow-content");
    });
}); 
```

该编辑器似乎删除了标签，因此 2 个附加分别是`"div class="slideshow-content"`和一个`"img /"`。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:45:19.683

```
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=XXXMYKEYXXX&photoset_id=XXXMYSETXXX&extras=original_format&format=json&jsoncallback=?", function(data){
    $.each(data.photoset.photo, function(i,item){
        var photo = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.originalsecret + '_o.jpg';
        $('<img />').attr('src',photo).appendTo("#slideshow-holder").wrap('<div class="slideshow content"/>');
    });
}); 
```

或者，只需在附加之前构造 HTML 字符串...

```
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&api_key=XXXMYKEYXXX&photoset_id=XXXMYSETXXX&extras=original_format&format=json&jsoncallback=?", function(data){
    $.each(data.photoset.photo, function(i,item){
        var photo = 'http://farm' + item.farm + '.static.flickr.com/' + item.server + '/' + item.id + '_' + item.originalsecret + '_o.jpg';
        $('<div class="slideshow-content"><img src="'+photo+'"/></div>').appendTo("#slideshow-holder");
    });
}); 
```

# r - R 非线性最小二乘 (nls) 模型拟合

> ID：11234468
> 
> 赞同：1
> 
> 时间：2012-06-27T20:38:04.147
> 
> 标签：r, model, plot, nls, model-fitting

我正在尝试将数据的 G 函数中的信息拟合到以下数学模式： y = A / ((1 + (B^2)*(x^2))^((C+1)/2 ））。该图的形状可以在这里看到：

[http://www.wolframalpha.com/input/?i=y+%3D+1%2F+%28%281+%2B+%282%5E2%29*%28x%5E2%29%29%5E%28%282 %2B1%29%2F2%29%29](http://www.wolframalpha.com/input/?i=y%20=%201/%20%28%281%20%2b%20%282%5E2%29%2a%28x%5E2%29%29%5E%28%282%2b1%29/2%29%29)

这是我一直在做的一个基本示例：

```
data(simdat)

library(spatstat)

simdat.Gest <- Gest(simdat) #Gest is a function within spatstat (explained below)

Gvalues <- simdat.Gest$rs

Rvalues <- simdat.Gest$r

GvsR_dataframe <- data.frame(R = Rvalues, G = rev(Gvalues))

themodel <- nls(rev(Gvalues) ~ (1 / (1 + (B^2)*(R^2))^((C+1)/2)), data = GvsR_dataframe, start = list(B=0.1, C=0.1), trace = FALSE) 
```

“Gest”是“spatstat”库中的一个函数。它是 G 函数或最近邻函数，它显示了独立轴上粒子之间的距离，以及在从属轴上找到最近邻粒子的概率。因此，它从 y=0 开始并在 y=1 处达到饱和点。

如果您绘制 simdat.Gest，您会注意到曲线是“s”形的，这意味着它从 y = 0 开始并在 y = 1 结束。因此，我反转了向量 Gvalues，它是依赖的变量。因此，信息处于适合上述模型的正确方向。

您可能还注意到我已经自动设置了 A = 1。这是因为 G(r) 总是在 1 处饱和，所以我没有费心将它保留在公式中。

我的问题是我不断收到错误。对于上面的示例，我收到此错误：

```
Error in nls(rev(Gvalues) ~ (1/(1 + (B^2) * (R^2))^((C + 1)/2)), data = GvsR_dataframe,  : 
  singular gradient 
```

我也遇到了这个错误：

```
Error in nls(Gvalues1 ~ (1/(1 + (B^2) * (x^2))^((C + 1)/2)), data = G_r_dataframe,  : 
  step factor 0.000488281 reduced below 'minFactor' of 0.000976562 
```

我不知道第一个错误来自哪里。然而，我认为第二个发生是因为我没有为 B 和 C 选择合适的起始值。

我希望有人可以帮助我找出第一个错误来自哪里。另外，选择起始值以避免第二个错误的最有效方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T07:55:20.897

如前所述，您的问题很可能是起始值。您可以使用两种策略：

1.  使用蛮力找到起始值。请参阅包`nls2`以获取执行此操作的功能。
2.  尝试对起始值进行合理的猜测。根据您的值，可以对模型进行线性化。

> G = (1 / (1 + (B^2)*(R^2))^((C+1)/2))
> 
> ln(G)=-(C+1)/2*ln(B^2*R^2+1)
> 
> 如果 B^2*R^2 很大，则变为大约。ln(G) = -(C+1)*(ln(B)+ln(R))，这是线性的。
> 
> 如果 B^2*R^2 接近 1，则大约为。ln(G) = -(C+1)/2*ln(2)，它是常数。

（请检查错误，由于足球比赛，昨晚很晚。）

**提供附加信息后进行编辑**：数据看起来像遵循累积分布函数。如果它像鸭子一样嘎嘎叫，那它很可能是一只鸭子。事实上`?Gest`，估计了一个 CDF。

```
library(spatstat)
data(simdat)
simdat.Gest <- Gest(simdat)
Gvalues <- simdat.Gest$rs
Rvalues <- simdat.Gest$r
plot(Gvalues~Rvalues)

#let's try the normal CDF
fit <- nls(Gvalues~pnorm(Rvalues,mean,sd),start=list(mean=0.4,sd=0.2))
summary(fit)
lines(Rvalues,predict(fit))
#Looks not bad. There might be a better model, but not the one provided in the question. 
```

# shell - 如何通过 shell 调用在 SWI-Prolog 中显示模式匹配目标的结果？

> ID：11234469
> 
> 赞同：2
> 
> 时间：2012-06-27T20:38:05.760
> 
> 标签：shell, prolog, swi-prolog

我想知道从 shell 调用它时如何从 SWI-Prolog 获得输出。

假设我有一个简单的知识库，`kb.pl`：

```
dad(elvis, lisaMarie).
dad(john, julian). 
```

我可以从 shell 调用 SWI-Prolog：

```
$ swipl --quiet -s kb.pl -t listing 
```

我的知识库列表打印到`stdout`. 如果我试试这个：

```
$ swipl --quiet -s kb.pl -t "dad(elvis, X)"
$ echo $?
0 
```

没有输出输出，但我知道它找到了匹配项，因为当我查询返回码时我得到零。相似地：

```
$ swipl --quiet -s kb.pl -t "dad(morrisey, X)"
$ echo $?
1 
```

表明 Prolog 正确地未能找到匹配的事实。

我的问题是：如何打印所有匹配项，以便从 shell 中可以看到像在 Prolog 环境中一样的输出？例如

```
$ swipl --quiet -s kb.pl -t "dad(elvis,X)" --magicdust
X = lisaMarie. 
```

我不认为`--quiet`是问题所在。它只是抑制序言启动消息。请参阅[SWI-Prolog 命令行选项](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%272.4%27,swi%28%27/doc/Manual/cmdline.html%27%29%29)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:57:07.290

自己打印，例如：

```
$ swipl -q -s kb.pl -t "dad(elvis,X), writeln(X), false" 
```

# data-modeling - 是否存在代表常见文件格式的关系数据模型库？

> ID：11234472
> 
> 赞同：0
> 
> 时间：2012-06-27T20:38:16.693
> 
> 标签：data-modeling

假设我想将 JPEG/JFIF 图像存储在关系数据库中。原始 JPEG 数据可能放在 BLOB 列中，而 EXIF 元数据可能需要几个表来表示所有不同的标签多重性。但由于 JPEG/JFIF 格式相当固定且定义明确，我想知道这是否已经完成。

一般的问题是是否有人为知名文件格式发布了任何此类数据模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:05:18.897

存在几个提供图像库并将其信息存储在关系数据库中的开源项目。

对您来说，查看这些项目并稍微阅读他们的 wiki 页面以了解他们如何为图像库建模可能是一个好主意。

Design3Edge 对一些开源项目有一个很好的概述（[链接](http://www.design3edge.com/2010/08/26/best-free-and-open-source-php-image-galleries/)）

# html - 尝试用每边两个 div 扩展和居中一个 div

> ID：11234478
> 
> 赞同：1
> 
> 时间：2012-06-27T20:38:35.523
> 
> 标签：html, css

我在下面有以下 div 结构：

```
<div class="Large-Centered-Div">
<div class="Left-Div">
    <div class="Inner-Left-Div">
    </div>
    <div class="Inner-Center-Div">
    </div>
    <div class="Inner-Right-Div">
    </div>
</div>
<div class="Center-Div">
    (Small Image/Etc. Would Go Here)
</div>
<div class="Right-Div">
    <div class="Inner-Left-Div">
    </div>
    <div class="Inner-Center-Div">
    </div>
    <div class="Inner-Right-Div">
    </div>
</div> 
```

我想做的有点复杂，但希望这一切都有意义：

1.  让“Large-Centered-Div”扩大页面的整个宽度，并在“Large-Centered-Div”内设置“Left-Div”、“Center-Div”和“Right-Div”，以便“Center-Div”很小，“Left-Div”和“Right-Div”很大，这样“Center-Div”的宽度很小但在中间。

2.  在“Left-Div”和“Right-Div”中，我希望“Inner-Center-Div”占据大部分空间，并且只有“Inner-Left-Div”和“Inner-Right- Div" 占用足够的空间来显示它们各自边缘的图像。另外，我希望“Inner-Center-Div”的宽度大小是流动的。

考虑到这些事情，我已经实现了清单上的第一个目标，但没有实现第二个目标。这是第一项的代码：

```
    .Large-Centered-Div {
        位置：相对；
        左：0px；
        右：0px；
    }

    .Left-Div {
        向左飘浮;
        垂直对齐：中间；
        宽度：47%；
    }

    .Center-Div {
        向左飘浮;
        宽度：6%；
        文本对齐：居中；
    }

    .Right-Div {
        向左飘浮;
        垂直对齐：中间；
        宽度：47%；
    }

```

问题是，我如何实现#2？这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:01:06.417

我要做的是硬编码图像的宽度。我们称它为 w 像素。所以：

```
.Inner-Left-Div, .Inner-Right-Div { width: wpx; } 
```

然后内部中心 div 将扩展以填充其余空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:58:50.653

我要做的是使 div 的宽度成为百分比的函数，这样，它们之间的关系总是相同的，并且它们会完美地调整大小。

```

`.Large-Centered-Div{
  width: 100%;
}

.Left-Div, .Right-Div, .Inner-Left-Div, .Inner-Right-Div{
  width: 40%;
}

.Center-Div, .Inner-Center-Div{
  width:20%;
}` 

这是迄今为止实现这一目标的最快和最干燥的方法。

另外，为了约定，最好将您的类名保留为小写。如果您简化它们，则更容易记住您的约定，祝您好运！

-布赖恩

            回答 #3

赞同：0

时间：2012-06-27T20:49:32.437

尝试使图像的内左和内右 div 为自动，并使中间中心 div 具有一定的百分比。

```

# javascript - 如何在 hook.io 中禁用输出

> ID：11234480
> 
> 赞同：1
> 
> 时间：2012-06-27T20:38:44.490
> 
> 标签：javascript, node.js

我以编程方式将 hook.io 用于小型应用程序服务器。在每个连接和事件上它都会打印一些东西，但我只想要错误输出。有什么方法可以让钩子对象静音吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T00:53:13.587

**是的。**

尝试在命令行上使用*--silent模式。*

像所有 hook.io 选项一样，您也可以将其传递给您的钩子构造函数。

```
 new Hook({silent: true} 
```

# jquery - jquery循环PageAnchorBuilder多个ul的

> ID：11234486
> 
> 赞同：0
> 
> 时间：2012-06-27T20:39:11.313
> 
> 标签：jquery, cycle

我正在使用 jQuery 循环和 PageAnchorBuilder 生成缩略图的无序列表。我想我要问的是我是否可以让它出现在多个 ul 中，也许每个都有 6 li？

任何人都知道我怎么能做到这一点？

```
$('#slideshow').before('<ul id="nav">').cycle({ 
fx:     'turnDown', 
speed:  'fast', 
timeout: 0, 
pager:  '#nav', 

// callback fn that creates a thumbnail to use as pager anchor 
pagerAnchorBuilder: function(idx, slide) { 
    return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>'; 
} 
```

});

# c - realloc() 的返回值给出了分段错误

> ID：11234488
> 
> 赞同：2
> 
> 时间：2012-06-27T20:39:25.587
> 
> 标签：c, memory-management, gcc, cygwin

```
#define BUF_SIZE 10

char *html = "foo:baa\r\nxxx:yyyy:\r\nLocation:........................................\r\Connection:close\r\n\r\n";
char *p = (char*)html, *buf, *pbuf, *tbuf;
int buf_size = BUF_SIZE, hsize = 0;

 if((buf = malloc(buf_size)) == NULL) FAILED("NO MEMORY!\n");
   pbuf = buf;

    while(*p != '\0' && *(p + 1) != '\r' && *(p + 2) != '\n') {
                    if((hsize + 1) >= buf_size) {
                        printf("Do realloc!\n");
                        buf_size += BUF_SIZE + 2; 
                        tbuf = realloc(buf, buf_size); // BUF_SIZE 
                        if(tbuf != NULL) {
                            buf = tbuf;
                        } else {
                            printf(" NO MEMORY!\n");
                            exit(1);
                        }
                    }

                    *pbuf ++= *p++, hsize ++;
            } 
```

但它给了一个

```
Do realloc!
Do realloc!
Stack trace:
Frame     Function  Args
0022A814  7798EFA3  (000000FC, 0000EA60, 00000000, 0022A948)
0022A828  7798EF52  (000000FC, 0000EA60, 000000A4, 0022A924)
0022A948  610DB059  (00000000, 00000001, 0022A978, 0000000C)
0022AA38  610D841E  (00000000, 61102908, 003B0023, 00230000)
0022AA98  610D88EE  (20038878, 0000000C, 0022AAC8, 00000006)
0022AB48  610D8A40  (00000E3C, 00000006, 00000001, 20010340)
0022AB68  610D8A6C  (00000006, 0022CE80, 0022ABD4, 20038883)
0022AB98  610D8CF5  (004031AA, 20010340, 0022ABE8, 61138596)
20010348  6110F935  (73756A2E, DF0DF02E, 200000C8, 00000000) 
```

我不知道如何解决这个问题！实际上，我不确定这是否是一个真正的分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:42:36.067

您正在使用 BUF_SIZE 的#define 版本。

```
realloc(buf, BUF_SIZE); 
```

您应该使用存储在 buf_size 中的计算值。

```
realloc(buf, buf_size); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:42:53.807

```
*pbuf ++= *p++, hsize ++; 
```

你永远不会初始化`pBuf`. 还：

```
tbuf = realloc(buf, BUF_SIZE); 
```

应该：

```
tbuf = realloc(buf, buf_size); 
```

编辑：

正如@ouah 在评论中指出的那样，并且考虑到您实际上确实进行了初始化`pBuf`（尽管我们看不到它），您操纵的方式似乎`p`是可能的罪魁祸首。的种类和内容是`html`什么？它是否为空终止？您的任何`*(p + n)`表达式是否超出了它的有效范围？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T21:23:04.477

你有两个致命的问题：

1.  `pbuf`分配了`buf`at init 的值，但从不更新。`realloc`不保证在`malloc`（以及随后的`realloc`调用）之后返回相同的地址。

2.  `pbuf`在调用 required 之前，您在这里溢出`realloc`：

    `*pbuf ++= *p++, hsize ++;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T20:42:47.240

我没有详尽地查看您的代码，但是您真的是要调用`realloc()`with `BUF_SIZE`（这是一个固定的预处理器常量），而不是`buf_size`? 具有仅因大小写而异的具有不同值和目的的符号通常不是一个好习惯（部分原因是这些错误）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T20:42:50.433

您正在重新计算`buf_size`，但您没有在`realloc`. 我认为应该是

```
tbuf = realloc(buf, buf_size); // not BUF_SIZE 
```

目前，您继续以 10 大小重新分配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T21:22:07.847

除了许多其他答案中提到的许多错误之外：在您调用之后`realloc`，`pbuf`不再有效，但您取消引用它。

# android - 提高 Android OpenCV 项目的性能

> ID：11234490
> 
> 赞同：3
> 
> 时间：2012-06-27T20:39:59.210
> 
> 标签：android, opencv, opengl-es, computer-vision, multicore

我正在开发基于安卓手机的盲人货币识别系统。为此，我使用 OpenCV 作为图像处理框架。我实现了一个方形检测模块，它运行良好。

手机摄像头每秒释放 30 帧，所以处理速度真的很慢。我使用精明的边缘检测算法（用于正方形检测）。输出结果被绘制在 中`Android SurfaceView`。有什么建议可以加快速度吗？换成 怎么`SurfaceView`样`GLSurfaceView`？会不会加快速度？

我的设备有双核处理器。**多核编程怎么样？？（对于android）**

我的设备是三星 Galaxy S2。

![在此处输入图像描述](../Images/06b37246d9a3e77fe9c144abce3a4c7e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T21:52:00.050

很难说 OpenGL 是否会大大提高速度（是的，OpenGL 肯定更快）。

您为什么不对您的应用程序进行基准测试，以了解在绘图和 OpenCV 计算上花费了多少时间？

例如：

*   加载一张图像并进行**n**次 OpenCV 计算（不显示）
*   加载相同的图像并显示**n**次

比较结果。如果 OpenCV 需要（大约）80% 的时间，那么您肯定需要改进您的 OpenCV 算法。否则尝试使用 OpenGL 显示图像。

# windows - 乌龟 svn 存储库和可视 svn 存储库有什么区别？

> ID：11234493
> 
> 赞同：7
> 
> 时间：2012-06-27T20:40:08.303
> 
> 标签：windows, svn, tortoisesvn, visualsvn-server

据我所知，VisualSVN Server 是一个服务器，而 TortoiseSVN 是一个客户端。但我也可以只使用 tortoise svn 创建存储库，而不需要 Visual SVN。

两者有什么区别还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:43:56.197

不同之处在于您使用 TortoiseSVN 客户端创建的存储库是您机器上的本地存储库。但该存储库与 Visual SVN 服务器（或任何其他 SVN 服务器）使用的存储库属于同一类型。如果您将本地创建的存储库移动到您的 svn 服务器，则可以改为通过服务器访问它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T20:44:05.977

SVN 存储库“只是”一堆文件和目录。您可以直接（`file:`协议）或通过 http、https、svn 等访问此存储库。

TortoiseSVN 只允许创建存储库。如果您需要使用该协议以外的其他协议访问它`file:`，您将需要一个服务器（TortoiseSVN 不提供该服务器）。

# jquery - 如何将选择传递给jquery函数

> ID：11234494
> 
> 赞同：0
> 
> 时间：2012-06-27T20:40:12.337
> 
> 标签：jquery

我有一些 javascript 在其中将选项附加到选择：

```
var myuniqueddl = $('#myuniqueddl');

$("<option value='0'>--- Select a value ---</option>").appendTo(myuniqueddl); 
```

我实际上也在尝试为另一个选择执行此操作。

我想避免代码重复是否应该将 ddl 传递给方法来执行此操作？

```
function(someType ddl)
{
   $("<option value='0'>--- Select a value ---</option>").appendTo(ddl);
} 
```

将选择传递给方法是一个坏主意吗？

有更好的方法吗？

如果这种方式可以，我将它传递为什么类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:42:36.523

首先，是的，将`select`元素传递给函数以减少代码重复是完全有效的。在这种情况下，您似乎担心必须键入相同的函数调用 ( `appendTo`) 两次，这实际上不是重复。

其次，您不能为 JavaScript 函数参数指定*任何类型。*JavaScript 中的变量是[动态类型](http://en.wikipedia.org/wiki/JavaScript#Dynamic)的。您只需指定变量名称：

```
function myFunction(ddl) {
  $("<option value='0'>--- Select a value ---</option>").appendTo(ddl);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:42:50.173

> 如果这种方式可以，我将它传递为什么类型？

它应该是类似于以下内容的 jQuery 元素：

```
var myuniqueddl = $('#myuniqueddl'); 
```

**例子：**

```
function addOption(el)
{
   $("<option value='0'>--- Select a value ---</option>").appendTo(el);
}

var myuniqueddl = $('#myuniqueddl');
var myuniqueddl2 = $('#myuniqueddl2');

addOption(myuniqueddl);
addOption(myuniqueddl2); 
```

或直接：

```
addOption($('#myuniqueddl'));
addOption($('#myuniqueddl2')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T20:47:14.710

Javascript 函数不使用类型提示，因此您的函数签名：

```
function(someType ddl) 
```

.. 无效。

此外，我建议让您的函数更灵活一点，并通过将字符串传递给 jQuery 来消除 DOM 元素的创建（[效率不高，请参阅此基准](https://stackoverflow.com/questions/268490/jquery-document-createelement-equivalent/268520#268520)）：

```
var addOption = function(sel, text, value) {
    if (typeof value == 'undefined')
        value = text;
   sel.options[sel.options.length] = new Option(text, value);
}
// usage: addOption($('#myuniqueddl'), '--- Select a value ---');
//    or: addOption($('#myuniqueddl'), '--- Select a value ---', 0); 
```

**文档**

*   MDN 上的函数 - [https://developer.mozilla.org/en/JavaScript/Guide/Functions](https://developer.mozilla.org/en/JavaScript/Guide/Functions)
*   关于使用 jQuery 创建元素的 StackOverflow Q/A -[使用 jQuery 创建 HTML 元素的最有效方法是什么？](https://stackoverflow.com/questions/327047/what-is-the-most-efficient-way-to-create-html-elements-using-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T20:43:29.283

这没有什么问题，但让我给你一个有效的例子，因为你的代码有一些语法错误。

```
function(ddl)
{
   $("<option value='0'>--- Select a value ---</option>").appendTo(ddl);
} 
```

> 如果这种方式可以，我将它传递为什么类型？

Javascript 使用类型的方式与 c# 或 java 不同。只需传递一个变量，类似于上面的代码。

# c# - Fluent Nhibernate 映射默认值

> ID：11234499
> 
> 赞同：1
> 
> 时间：2012-06-27T20:40:50.413
> 
> 标签：c#, nhibernate, fluent

当使用 Fluent NHibernate 映射我的属性时，在插入时，我只想在我的属性为空时才使用数据库默认值。因此，例如，如果 db 默认值为 100，而我的属性为 null，则应插入 100，否则插入我的属性的值（例如 25）。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T08:36:17.387

您可以通过映射覆盖来做到这一点：

```
public class MyEntityMappingOverride : IAutoMappingOverride<MyEntity>
{
     public void Override(AutoMapping<MyEntity> mapping)
     {
         mapping.Map(x => x.MyProperty).Default("100");
     }
} 
```

# iphone - iOS 在 NSMutableDictionary 上的键中添加对象（不是那么简单）

> ID：11234503
> 
> 赞同：0
> 
> 时间：2012-06-27T20:41:19.057
> 
> 标签：iphone, objective-c, ios, xcode, nsmutabledictionary

如何为同一个键添加多个对象？那可能吗？

例如，我需要一个这样的字典：

```
object:textField.text for key @"Permanent key" 
```

我需要始终将对象添加到该永久键，具体取决于用户在文本字段上键入内容的次数。

所以我的字典会有很多关于“永久密钥”的条目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:42:42.507

这是不可能的，字典中每个值的键必须是唯一的。

如果你需要几个像这样的对象，为什么不把它们做成一个 NSMutableArray 或 NSMutableSet 呢？或者让你的对象本身是一个 NSMutableArray，然后你将它分配给那个键，然后简单地将所需的新值添加到这个 NSMutableArray 中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:43:01.000

您可以使用 NSMutableArray 作为对象，在其中放置要分配给该唯一键的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:46:40.977

如果您能够为**同一个键添加（比如说）对象 A****和**对象 B ；当您使用该键检索时，您会得到哪个对象？甲还是乙？

 **根据定义，键必须是唯一的；它们就像数组的数字索引，但不是连续的数字，它们可以是任意字符串。

正如其他人指出的那样，您希望为该键存储一个对象数组，而不是单个对象。**

# android - 屏幕底部的 Android 位置按钮

> ID：11234506
> 
> 赞同：0
> 
> 时间：2012-06-27T20:41:25.883
> 
> 标签：android, layout

嗨，我在将按钮放置在屏幕底部时遇到问题，我已经将其布局，并且在 Eclipse 的图形布局中，它看起来正是我想要的，但是当我在设备上运行它时，按钮都转到了非常底端筛分位置相同。所以只有一个按钮可见。有谁知道这是为什么，或者你知道如何将东西 s 放在底部并加一点填充？

这是我尝试过的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/ic_background_credits"
    android:orientation="vertical" >

    <Button
        android:id="@+id/fm"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="38dp"
        android:background="@drawable/fmbtn" />

    <Button
        android:id="@+id/ph"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/fm"
        android:layout_alignLeft="@+id/fm"
        android:background="@drawable/visitphbtn" />

</RelativeLayout> 
```

这是我的代码，我在其中夸大了这个视图

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    //Check Preferences which sets UI
    setContentView(R.layout.singlenews);
    findViewById(R.id.progress).setVisibility(View.GONE);
    loadData();

       Button backbtn = (Button) findViewById(R.id.backbtn);

        //Listening to button event
        backbtn.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                //Starting a new Intent
                Intent previousScreen = new Intent(getApplicationContext(), InfoActivity.class);
                startActivity(previousScreen);

            }
        });

}

public void loadData(){

    name = getIntent().getStringExtra("name");
    Log.v("lc", "infoname=" + name);

     if (name.equals(name1")) {

            NewsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.infodetail,
                    null);

        TextView headerText = (TextView) findViewById(R.id.header_text);
        headerText.setText("About name1"); 

        TextView mainText = (TextView) NewsView.findViewById(R.id.maintext);
        mainText.setText("name1");

        ImageView NewsImage = (ImageView)NewsView.findViewById(R.id.imageView2);
        NewsImage.setImageDrawable(getResources().getDrawable(R.drawable.ic_logo_evostik));

     }  

     if (name.equals("name2")) {

            NewsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.infodetail,
                    null);

        TextView headerText = (TextView) findViewById(R.id.header_text);
        headerText.setText("About name2"); 

        TextView mainText = (TextView) NewsView.findViewById(R.id.maintext);
        mainText.setText("name2");

        ImageView NewsImage = (ImageView)NewsView.findViewById(R.id.imageView2);
        NewsImage.setImageDrawable(getResources().getDrawable(R.drawable.ic_logo_pitchero));

     } 

     if (name.equals("name3")) {

            NewsView = LayoutInflater.from(getBaseContext()).inflate(R.layout.creditsdetail,
                    null);

            TextView headerText = (TextView) findViewById(R.id.header_text);
            headerText.setText("name3"); 

            Button phbtn=(Button)NewsView.findViewById(R.id.ph);

            phbtn.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View arg0) {
                            //Starting a new Intent
                            Uri uri = Uri.parse("http://www.pitchero.com");
                             Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                             startActivity(intent);

                        }
                    });

            Button fmbtn=(Button)NewsView.findViewById(R.id.fm);

            fmbtn.setOnClickListener(new View.OnClickListener() {

                        public void onClick(View arg0) {
                            //Starting a new Intent
                            Uri uri = Uri.parse("http://www.fantasticmedia.co.uk/mobile/");
                             Intent intent = new Intent(Intent.ACTION_VIEW, uri);
                             startActivity(intent);

                        }
                    });

         } 

  ListView list = getListView();
  list.setVerticalFadingEdgeEnabled(false);

  Log.v("BGThread", "Filled results");

adapter = new MergeAdapter();

adapter.addView(NewsView);

setListAdapter(adapter);

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:55:53.327

我认为您混淆了一些属性。

在您的第二个按钮中，不要将“+”运算符添加到 id，因为它正在创建一个新按钮。只需将其删除并留下“@”即可。

记住 '+' 添加到 id 和 '@' 引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:49:50.377

我实际上在我的项目中尝试了您的布局，并且两个按钮放置正确。

您确定您没有在代码中执行任何其他操作吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:56:02.970

相对布局是相对于作为 ViewGroup 的 RelativeLayout 容器内的其他项目。因此，例如，您可以在 pm 的描述中指定 android:layout_leftOf="@+id/fm"。如果你想要填充，你也可以像按钮内部一样使用边距和填充。

```
android:layout_marginBottom="20dip" 
android:layout_leftOf="@+id/fm"
android:paddingBottom="10dip" 
```

# jquery - 在模板中设置自定义绑定，作为自定义绑定的一部分

> ID：11234507
> 
> 赞同：0
> 
> 时间：2012-06-27T20:41:26.180
> 
> 标签：jquery, knockout.js, knockout-2.0, custom-binding

这个主题有点令人困惑，但这是我想要做的：

我创建了一个 KnockoutJS 自定义绑定来在我的页面上显示一个网格。这很好用，我遵循了网站上的 SimpleGrid 模型。但是，我的一些字段是日期、布尔值等。我想使用自定义绑定来使用 time ago 插件等转换日期。在构建网格之前，我只需在网格中分配自定义绑定。现在我正在使用“可重用”网格绑定，我希望能够传入（作为列定义的一部分）绑定和值的列表，以便在模板中为网格的标题和单元格分配。

这是我页面中的 HTML：

```
<div data-bind="grid: grid" /> 
```

这是 HTML 页面视图模型：

```
 var tenantsViewModel = {
    navigateDetails: function (tenant) {
        document.location = '/Tenants/Details/' + tenant.TenantId;
    },
    navigateDomain: function (tenant) {
        window.open("http://" + tenant.Domain);
    },
    grid: new my.grid({
        resource: "system/tenants",
        columns: [
          { display: "Tenant", value: "Name", isLink: true },
          { display: "Enabled", value: "IsEnabled", isLink: false },
          { display: "Tenant Since", value: "CreatedOn", isLink: false },
          { display: "Domain", value: "Domain", isLink: true }
      ]
    })
};
tenantsViewModel.grid.update();
ko.applyBindings(tenantsViewModel); 
```

这是我的自定义网格绑定和模板：

```
// Object
my.grid = function (config) {
    var self = this;
    self.data = ko.observableArray([]);
    self.columns = config.columns;
    var resource = config.resource;

    my.grid.prototype.update = function () {
        // A Wrapper for $.ajax()/JSONP
        my.get(resource, function (data) {
            self.data(data);
        });
    };
};

// Templates
var templateEngine = new ko.nativeTemplateEngine();

templateEngine.addTemplate = function (templateName, templateMarkup) {
    document.write("<script type=\"text/html\" id='" + templateName + "'>" + templateMarkup + "<" + "/script>");
};

templateEngine.addTemplate("merlin_grid", "\
                <table class=\"data\">\
                    <thead>\
                        <tr data-bind=\"foreach: columns\">\
                           <th data-bind=\"text: display\"></th>\
                        </tr>\
                    </thead>\
                    <tbody data-bind=\"foreach: data\">\
                       <tr data-bind=\"foreach: $parent.columns\">\
                           <td data-bind=\"css: { link: isLink },text: typeof value == 'function' ? value($parent) : $parent[value] \"></td>\
                        </tr>\
                    </tbody>\
                </table>");

// Grid: Convert element into a full blown grid component
ko.bindingHandlers.grid = {
    init: function () {
        return { controlsDescendantBindings: true };
    },
    update: function (element, viewModelAccessor, allBindingsAccessor) {
        var viewModel = viewModelAccessor(), allBindings = allBindingsAccessor();

        while (element.firstChild)
            ko.removeNode(element.firstChild);

        var gridTemplateName = allBindings.gridTemplate || "merlin_grid";

        var gridContainer = element.appendChild(document.createElement("DIV"));
        ko.renderTemplate(gridTemplateName, viewModel, { templateEngine: templateEngine }, gridContainer, "replaceNode");
    }
}; 
```

是否有捷径可寻？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:23:30.257

我无法让它工作。我也向 KnockoutJS 用户组提出了问题。如果他们有回应，我会在这里发布结果。

# c# - 从系统服务调用的 VS Debug DLL

> ID：11234511
> 
> 赞同：1
> 
> 时间：2012-06-27T20:41:39.260
> 
> 标签：c#, .net, dll, visual-studio-debugging

我正在为应用程序开发一个带有一些插件逻辑的 DLL（在 Visual C# Express 中）。

有没有办法调试这个DLL，一旦它被应用程序使用？该应用程序在 Windows 上作为服务运行，它是一个 COTS 应用程序，这意味着它不是我可以开始调试的 C# 项目。

我知道在 Visual C# Express 中进行调试存在一些限制。在 Visual Studio Pro 中是否可以执行此任务？

我想要实现的是能够单步执行逻辑，设置断点以查看来电时会发生什么。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:47:10.097

我不确定 VS Express，但通常情况下，

1.  打开 Visual Studio
2.  打开您的解决方案（Windows 服务项目）
3.  调试 -> 附加到进程
4.  从可用进程列表中选择您的服务
5.  您可以使用断点和其他东西。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:51:05.393

虽然我不完全确定这具体是如何与服务一起工作的，但您可以设置任意调试目标。

在调试面板中（在项目属性中），您可以将任何可执行文件或其他命令设置为调试目标。此命令生成的进程将附加调试器，无论可执行文件来自何处。不要求目标是 C# 项目或任何 Visual Studio 项目。这应该在 Express 和 Pro 中都可用。可以附加到稍后的进程（如果您有启动器），但这可能超出了您当前的范围。

然后像往常一样在代码中设置断点，当代码被命中时（无论您的代码调用它还是主机可执行文件），都会触发断点。根据您掌握的有关主机的信息量，您也可以有效地对其进行调试；即使您没有任何信息，您也可以逐步完成程序集。

这里唯一的要求是目标加载并运行您的代码。根据上下文（程序的插件、注入的依赖项等），这具有不同的难度。该技术用于许多地方，特别是插件系统，您可能无法调试实际主机，但仍希望使用插件进行调试。

另一个稍微丑陋的变体是强迫宿主打破和自我认同。这仅对调试有用，因为它非常具有破坏性。典型的方法是显示带有进程 ID 的消息框（模式）。然后该过程将暂停，直到消息被解除，并且可以附加调试器。这对于服务来说变得更加困难，尽管仍有一些方法可以以阻止方式发布您的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:58:16.077

您可以使用[System.Diagnostics.Debugger.Break()](http://msdn.microsoft.com/en-us/library/system.diagnostics.debugger.break.aspx)方法。

# spring - 我应该在 Spring MVC 之前学习 Spring 吗？

> ID：11234513
> 
> 赞同：4
> 
> 时间：2012-06-27T20:41:53.700
> 
> 标签：spring, spring-mvc

我非常了解 Java，并且在 EclipseLink、Hibernate、JSF、Grails 和其他一些东西方面有一些经验。但现在我想学习用于 Web 应用程序的 Spring MVC，也许还有用于站点的。我应该在开始 Spring MVC 之前学习 Spring Framework，还是不学习？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:59:03.087

简而言之，是的。Spring MVC 借鉴了 Spring 中的依赖注入等很多概念，所以在学习 Spring MVC 之前需要将这些概念刻录下来。例如，只需创建一个简单的 Java 项目，创建一些 bean，了解容器/注入/布线如何工作的概念，然后继续在 Spring MVC 中实现它们。

最明显的好处是您可以将 Spring 与您可能已经熟悉的其他 Web 框架集成。这样您就可以两全其美，并且在必须学习之前不必学习 Spring MVC。

[本](http://blog.springsource.com/2010/11/09/green-beans-putting-the-spring-in-your-step-and-application/)教程解释了以 spring 方式连接到数据库，并解释了 Spring 的基本概念。[然后，您可以使用Spring MVC 教程](http://blog.springsource.com/2011/01/04/green-beans-getting-started-with-spring-mvc/)跟进它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:51:57.910

Spring 有一个简单的学习曲线，（当然不是要掌握它）所以我建议在一个小规模的测试项目中一起学习它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:53:26.523

我不知道这个问题是否与 stackoverflow 有关，但无论如何我认为学习 Spring MVC 是迈出学习 Spring 第一步的最佳方式，事实上，许多 Spring 教程都是从 Spring MVC 应用程序开始的。

# c# - 切换 ListView 中特定元素的可见性

> ID：11234515
> 
> 赞同：0
> 
> 时间：2012-06-27T20:42:13.770
> 
> 标签：c#, asp.net

我在页面上有一个列表视图，并且正在尝试模拟树视图的切换效果。当第一次绑定细节元素（LBL_ActionTitle、LBL_Action、LBL_UrlTitle、LBL_Url）设置为visibility = false。我想让元素的点击事件（LB_ExpandCollapse）切换与其直接相关的细节元素的可见性。IE页面上没有该类型的所有元素。我不确定如何做到这一点，或者是否可以做到，并希望有人能指出我正确的方向。这是供参考的控件。

```
 <div id="logContainer">
        <asp:ListView ID=LV_Logs runat="server">
            <LayoutTemplate>
                <table border="0" cellpadding="0" cellspacing="0" style="width:100%">
                    <tr>
                        <td></td>
                        <td style="width:85%" />
                    </tr>
                    <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
                </table>
            </LayoutTemplate>
            <ItemTemplate>
                <tr>
                    <td>
                        <hr />
                        <asp:LinkButton ID="LB_ExpandCollapse" runat="server" CausesValidation="false" OnClick="expandCollapse_Click">+</asp:LinkButton>
                        <asp:Label ID="LBL_MessageType" runat="server" Text='<%# Eval("messageType") %>'></asp:Label>
                        <hr />
                    </td>
                    <td style="text-align: right">
                        <hr />
                        <asp:Label ID="LBL_Message" runat="server" Text='<%# Eval("messageTime") %>'></asp:Label>
                        <hr />
                    </td>
                </tr>

                <tr style="text-align: left">
                    <td style="padding-left: 65px">
                        <asp:Label ID="LBL_ActionTitle" Visibility="false" runat="server" Text="User Action:"></asp:Label>
                    </td>
                    <td style="padding-left: 10px">
                        <asp:Label ID="LBL_Action" Visibility="false" runat="server" Text='<%# Eval("action") %>'></asp:Label>
                    </td>
                </tr>
                <tr style="text-align: left">
                    <td style="padding-left: 65px">
                        <asp:Label ID="LBL_UrlTitle" Visibility="false" runat="server" Text="URL:"></asp:Label>
                    </td>
                    <td style="padding-left: 10px">
                        <asp:Label ID="LBL_Url" runat="server" Visibility="false" Text='<%# Eval("url") %>'></asp:Label>
                    </td>
                </tr>

           </ItemTemplate>

        </asp:ListView>
        <asp:DataPager ID="DataPagerProducts" runat="server" PagedControlID="LV_Logs"
            PageSize="20" OnPreRender="DataPagerProducts_PreRender">
            <Fields>
                <asp:NextPreviousPagerField ShowFirstPageButton="True" ShowNextPageButton="False" />
                <asp:NumericPagerField />
                <asp:NextPreviousPagerField ShowLastPageButton="True" ShowPreviousPageButton="False" />
            </Fields>
        </asp:DataPager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:54:34.167

我建议您将记录的 ID 作为 ID 放在包含要切换的字段的 TR 上。然后在您`expandCollapseClick`还传递 ID，以便您可以将行的样式设置为`display:block`. 当然，这假设所有行都从`display:none`. IE。

```
<tr id='<%# Eval("recordId") %>' style='display:none'> 
```

然后在 Javascript 中（伪代码）

```
function expandCollapseClick(row)
{
    document.getElementById(row).style.display = 'block';
} 
```

然后更改您的按钮以执行客户端，如下所示：

```
<button onclick='expandCollapse(<%# Eval("recordId") %>)'>+</button> 
```

这将调用代码来显示行，并传入正确行的 id。当然，这假设在检索页面时表格已完全填充，您要做的只是隐藏/显示详细信息。

# python - 为什么`object.__init__`不带参数

> ID：11234519
> 
> 赞同：1
> 
> 时间：2012-06-27T20:42:27.520
> 
> 标签：python, python-3.x

为什么不`object.__init__`作为`*args, **kwargs`论据？据我所知，这以一种非常烦人的方式破坏了一些简单的代码，没有任何好处：

假设我们要确保`__init__`调用所有父类的所有 's。只要每个 init 都遵循调用`super().__init__`this 的简单约定，就可以保证整个层次结构都运行一次，并且只运行一次（也不必专门指定父级）。当我们传递参数时，问题就出现了：

```
class Foo:
    def __init__(self, *args, **kwargs):
        print("foo-init")
        super().__init__(*args, **kwargs) # error if there are arguments!

class Bar:
    def __init__(self, *args, **kwargs):
        print("bar-init")
        super().__init__(*args, **kwargs)

class Baz(Bar, Foo):
    def __init__(self, *args, **kwargs):
        print("baz-init")
        super().__init__(*args, **kwargs)

b1 = Baz() # works
b2 = Baz("error") 
```

这样做的原因是什么，最好的通用方法是什么（！在我的特定情况下很容易解决，但这依赖于层次结构的额外知识）解决方法？我能看到的最好的方法是检查父对象是否是对象，在这种情况下不要给它任何参数 .. 太丑了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:53:05.700

您可以查看[http://bugs.python.org/issue1683368](http://bugs.python.org/issue1683368)进行讨论。请注意，实际上有人*要求*它导致错误。另请参阅[有关 python-dev 的讨论](http://www.mail-archive.com/python-dev@python.org/msg22025.html)。

无论如何，你的设计很奇怪。你为什么要写每一堂课来参加未指定的`*args`and `**kwargs`？一般来说，最好让方法接受它们需要的参数。例如，如果有人输入错误的关键字名称，接受所有内容的开放式参数可能会导致各种错误。有时它是必要的，但它不应该是默认的做事方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T21:02:57.550

Raymond Hettinger 的[super() 被认为是 super](http://rhettinger.wordpress.com/2011/05/26/super-considered-super/)有一些关于如何处理这个问题的信息。它在“实用建议”部分。

# html - 在另一个之上浮动一点

> ID：11234534
> 
> 赞同：0
> 
> 时间：2012-06-27T20:43:01.680
> 
> 标签：html, css

![在此处输入图像描述](../Images/6dd93a0a0ac36b32113a6710ddad2c49.png)

你好，

我尝试使用专辑图片和一些信息创建列。我希望信息在它旁边的图像上覆盖一点点。就像在这张图片上：

但是，要么我打破左侧浮动，要么文本完全位于图像等之上。等等。除了所需的结果之外的所有内容。

一些帮助会很棒，这是一个jsfiddle：

[http://jsfiddle.net/Scf4u/](http://jsfiddle.net/Scf4u/)

一小段代码：

```
<div class="entrie">
                <img class="entrieImage" src="http://doekewartena.nl/temp/images/img02.png"/>

                <div class="entrieInfo">
                    <div class="band">Kids for Cash</div>
                    <div class="album">No More Walls E.P.</div>
                    <div class="label">...</div>
                    <div class="year">1986</div>
                    <p>-</p>
                    <div class="tags">rousseau, green, woodsy, band photo, 12IN, tree, civilization, Atco, 1960's, Fuzz
                    </div>
                </div>

            </div> 
```

CSS：

```
.entrie {
    float: left;
}

.entrieInfo {
    width: 200px;
    float: left;
    margin-left: 10px;

}

.entrieImage {
    /* if you only set the width then the height will be set automaticly proportional*/
    width: 300px;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:52:19.027

穿上。`margin-right: -30px;`_`.enterieInfo`

被克里斯托弗·马歇尔击败。要么或应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:50:34.767

[http://jsfiddle.net/Scf4u/1/](http://jsfiddle.net/Scf4u/1/)

```
 #entries .entrie:nth-of-type(2n) {
            margin-left: -41px;
            position: relative;
            z-index: -1;
        } 
```

应该每隔一秒 .entries div 并在左侧设置一个负边距，并在前一个 div 下方设置一个 z-index。可能混淆了我的伪选择器。

# expressionengine - 表达式引擎：什么时候使用通道，什么时候不使用它们？

> ID：11234536
> 
> 赞同：1
> 
> 时间：2012-06-27T20:43:12.040
> 
> 标签：expressionengine, channels

作为开发人员和用户，我仍然是 Expression Engine 的新手。我面临的问题是，我的很多知识正在被用户传递给我，这些用户已经找到了通过使用渠道系统来完成传统上由开发人员（例如产品库）承担的任务的方法。

我想知道的是人们的看法是什么时候最好建议客户使用它，什么时候不使用。

让我举个例子，客户想要一个系统，该系统具有可以举办活动的场所。之前的开发者选择使用会员系统来做场馆和频道系统来做活动，并编写一些自定义代码来尝试将两者结合在一起，特别是因为没有足够的钩子来完成一些后台自动化任务，比如查找创建或更新场地时的地址的长/纬度。

我主要是在追随别人的工作，但这不是他们的错，这是他们获得的信息，因为他们也是系统的新手。

在任何其他项目中，这将是一个主细节类型设置，事件属于场所，我可能会编写 2 个自定义表格，通过模块在管理区域中的编辑器，然后在页面中使用常规自定义代码来显示和操作info - 这样，我可以控制用户点击提交时发生的事情。

但是，策动方是一位资深的Expression Engine用户，以“哦，把它都放在频道里然后有这个标签那个标签等等”的方式指示之前的开发者。

那么，我是否错过了这一点，或者我是否正确，这不适合渠道系统，什么时候应该使用渠道，什么时候不适合？

谢谢朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T12:09:06.090

这个问题是非常假设性的，每个开发人员都会给您不同的答案，因为这完全取决于要求以及 EE 开发人员的滚动方式。

从根本上说，ExpressionEngine 允许您以多种方式处理构建，没有对错，尽管有些更容易，有些更难，有些只是愚蠢的。

基本上，通道是一组数据“条目”——它们可以是任何东西。使用您的示例，场所可以是一个通道，其中创建了与主题相关的字段（例如位置、大小、价格等）。以及具有不同字段（例如日期、类型、位置）的事件的另一个渠道。

大多数情况下，任何东西都可以插入通道。但会员详细信息最好保存在本机会员功能中（尽管有一个商业插件将会员数据保存在频道中）。

您参考了以前的开发人员方法——这可能是因为他们使用了第三方插件，需要将数据单独保存到通道中，或者对最佳方法缺乏了解。或者只是因为开发人员决定以这种方式处理它！我怀疑最后一个开发人员将成员（场地）关联到条目（事件）以将事件链接到场地。基本 EE 功能允许相关条目，允许您将 1 个条目与另一个条目相关联（例如 Event -> Venue），或使用出色的 Playa 插件，因此这种方法实际上是没有必要的。

就我个人而言，我总是将数据存储在渠道中，并将人员/成员存储在本地会员功能中（例如管理员、网站访问者、客户等）。我只会构建一个附加组件（利用它自己的表/数据）来存储附加信息，如果它超出了 EE 可以存储的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:35:34.600

要回答您的实际问题（它扩大[了 Stack Overflow 问题应该](https://stackoverflow.com/faq#dontask)诚实的范围）：您应该为场地使用频道，为活动使用频道，并且活动条目中的场地字段是链接到的“相关条目”字段类型场地频道。这是“标准”EE 方式，与传统数据库模式最相似。

# xml - 处理 XSLT 命名空间不匹配

> ID：11234537
> 
> 赞同：0
> 
> 时间：2012-06-27T20:43:13.967
> 
> 标签：xml, xslt, rss, youtube, xml-namespaces

所以，希望这将是我对这个项目的最后帮助请求，因为你们已经提供了很多帮助。

基本上，我正在编写一些代码来获取 YouTube 播放列表并将其转换为 RSS 提要。我已经让它按照我想要的方式工作，除了一个小细节：我不知道为什么，但我需要在它编译之前从 YouTube XML 中删除其中一个命名空间。

YouTube 的命名空间声明如下所示：

```
<feed xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:gml='http://www.opengis.net/gml' xmlns:yt='http://gdata.youtube.com/schemas/2007' xmlns:georss='http://www.georss.org/georss' gd:etag='W/&quot;A04NRn47eCp7I2A9WhJTF0g.&quot;'> 
```

通常，我会使用完全相同的那些，除非出于任何原因，如果我包含该`xmlns='http://www.w3.org/2005/Atom'`段，则整个内容都返回 null。

到目前为止，我的技术一直是从 YouTube XML 中删除该行，但这让我觉得有点不雅。如果比我了解更多的人可以指出我当前代码的问题，我将不胜感激。

亚当

编辑：作为参考，这是我的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns='http://www.w3.org/2005/Atom' xmlns:media='http://search.yahoo.com/mrss/' xmlns:openSearch='http://a9.com/-/spec/opensearch/1.1/' xmlns:gd='http://schemas.google.com/g/2005' xmlns:yt='http://gdata.youtube.com/schemas/2007' gd:etag='W/&quot;Ak8EQX47eCp7I2A9WhdSEkQ.&quot;'>

<xsl:template match="/">
<xsl:for-each select="entry">
<xsl:if test="yt:position &lt; 3">
    <item>

        <title><xsl:value-of select="title" /></title>
        <xsl:variable name="videoid" select="substring-before(substring-after(media:group/media:content/@url, 'v/'), '?')" />   <!--Extracting the YouTube video ID--> 
        <description>
            <embed src="http://www.youtube.com/v/{$videoid}" type="application/x-shockwave-flash" allowscriptaccess="never" allowfullscreen="true" width="500" height="300"></embed>    <!--Embed code for the video-->
            <br />
            <br />
            <xsl:call-template name="ParseLink">    <!--Parses the video description such that URLs become links-->
                <xsl:with-param name="text" select="media:group/media:description" />   
            </xsl:call-template>
            <img src="http://i.ytimg.com/vi/{$videoid}/hqdefault.jpg" style="display:none"/>    <!--Includes hidden thumbnail-->
        </description>

        <link>http://www.youtube.com/watch?v=<xsl:value-of select="$videoid" /></link>  <!--Link to video on YouTube-->
        <guid isPermaLink="false">http://www.youtube.com/watch?v=<xsl:value-of select="$videoid" /></guid>

    </item>
</xsl:if>
</xsl:for-each>
</xsl:template>

<xsl:template name="ParseLink"> <!--YouTube automatically turns URLs into links, this performs the same function for RSS-->
    <xsl:param name="text"/>
    <xsl:choose>

        <xsl:when test="contains($text,'http')">            
            <a href="http{substring-before(substring-after($text, 'http'), '&#xA;')}">Watch the complete video on our website</a>
            <br/>
            <xsl:call-template name="ParseText">    <!--Once the link is found, parses the rest of the text-->
                <xsl:with-param name="text">
                    <xsl:value-of select="substring-after($text,'&#xA;')"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:when>

        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>

<xsl:template name="ParseText"> <!--Replaces line breaks in the description to <br> tags-->
    <xsl:param name="text"/>
    <xsl:choose>

        <xsl:when test="contains($text,'&#xA;')">
            <xsl:value-of select="substring-before($text,'&#xA;')"/>
            <br />
            <xsl:call-template name="ParseText">
                <xsl:with-param name="text">
                    <xsl:value-of select="substring-after($text,'&#xA;')"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:when>

        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>

    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:21:05.897

您的样式表不起作用的原因是您没有定义 Atom 命名空间... YouTube 的默认命名空间是[http://www.w3.org/2005/Atom](http://www.w3.org/2005/Atom)。如果你想在“feed”节点上匹配，你会有一个像这样的样式表：

```
<xsl:stylesheet xmlns:atom="http://www.w3.org/2005/Atom" ... more stuff ... >
    <xsl:template match="/atom:feed">
        etc. etc.
    </xsl:template>
</xsl:stylesheet> 
```

编辑：这是一个有效的示例样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"         xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" xmlns:openSearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:gd="http://schemas.google.com/g/2005" xmlns:yt="http://gdata.youtube.com/schemas/2007" gd:etag="W/&quot;Ak8EQX47eCp7I2A9WhdSEkQ.&quot;">
    <xsl:template match="/atom:feed">
        <xsl:apply-templates select="atom:entry"/>
    </xsl:template>
    <xsl:template match="atom:entry">
            <p>Entry:<xsl:value-of select="atom:title"/>
            </p>
    </xsl:template>
</xsl:stylesheet> 
```

编辑：好的，这是您更新的样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"         xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/"     xmlns:openSearch="http://a9.com/-/spec/opensearch/1.1/"     xmlns:gd="http://schemas.google.com/g/2005"     xmlns:yt="http://gdata.youtube.com/schemas/2007"     gd:etag="W/&quot;Ak8EQX47eCp7I2A9WhdSEkQ.&quot;">
    <xsl:template match="/atom:feed">
        <xsl:for-each select="atom:entry">
            <item>
                <title>
                <xsl:value-of select="atom:title"/>
            </title>
            <xsl:variable name="videoid" select="substring-before(substring-after(media:group/media:content/@url, 'v/'), '?')"/>
            <!--Extracting the YouTube video ID-->
            <description>
                <embed src="http://www.youtube.com/v/{$videoid}" type="application/x-shockwave-flash" allowscriptaccess="never" allowfullscreen="true" width="500" height="300"/>
                <!--Embed code for the video-->
                <br/>
                <br/>
                <xsl:call-template name="ParseLink">
                    <!--Parses the video description such that URLs become links-->
                    <xsl:with-param name="text" select="media:group/media:description"/>
                </xsl:call-template>
                <img src="http://i.ytimg.com/vi/{$videoid}/hqdefault.jpg" style="display:none"/>
                <!--Includes hidden thumbnail-->
            </description>
            <link>http://www.youtube.com/watch?v=<xsl:value-of select="$videoid"/>
            </link>
            <!--Link to video on YouTube-->
            <guid isPermaLink="false">http://www.youtube.com/watch?v=<xsl:value-of select="$videoid"/>
            </guid>
        </item>
    </xsl:for-each>
</xsl:template>
<xsl:template name="ParseLink">
    <!--YouTube automatically turns URLs into links, this performs the same function for RSS-->
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text,'http')">
            <a href="http{substring-before(substring-after($text, 'http'), '&#xA;')}">Watch the complete video on our website</a>
            <br/>
            <xsl:call-template name="ParseText">
                <!--Once the link is found, parses the rest of the text-->
                <xsl:with-param name="text">
                    <xsl:value-of select="substring-after($text,'&#xA;')"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$text"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template>
<xsl:template name="ParseText">
    <!--Replaces line breaks in the description to <br> tags-->
    <xsl:param name="text"/>
    <xsl:choose>
        <xsl:when test="contains($text,'&#xA;')">
            <xsl:value-of select="substring-before($text,'&#xA;')"/>
            <br/>
            <xsl:call-template name="ParseText">
                <xsl:with-param name="text">
                    <xsl:value-of select="substring-after($text,'&#xA;')"/>
                </xsl:with-param>
            </xsl:call-template>
        </xsl:when>
            <xsl:otherwise>
                <xsl:value-of select="$text"/>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>
</xsl:stylesheet> 
```

# actionscript - 在 ActionScript 2 中发送 JSON

> ID：11234542
> 
> 赞同：0
> 
> 时间：2012-06-27T20:43:31.963
> 
> 标签：actionscript

有人知道如何在 ActionScript 2 中发送 JSON 吗？

我尝试使用 XML() 但它在发送之前将所有“变为”。前任：

```
var callout = new XML({ "name": "John"})
callout.sendAndLoad('http://api.app.com', new XML()); 
```

但发送的是 {"name":"John"}

也无法升级到 AS3（希望我能）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:04:04.230

这是你如何做到的

创建一个扩展 LoadVars 的新类并覆盖“toString”方法以返回 JSON。然后，您可以使用 load() 和 sendAndLoad() 将 JSON 发送到 URL

例子：

```
class SendJson extends LoadVars {

   public var data:String;  // Put your JSON here

   public function toString() {
      return data;
   }

} 
```

# clojure - 在 clojure 中实现一个 cron 类型的调度程序

> ID：11234546
> 
> 赞同：9
> 
> 时间：2012-06-27T20:43:52.057
> 
> 标签：clojure

我正在寻找任何可以在给定时间触发事件的 clojure 方法，

例如：我希望一个特定的进程在上午 9:30 开始，然后我可以触发另一个进程在半小时后开始运行，等等。

提前致谢！

* * *

### 更新2：

感谢@arthur-ulfeoldt 和@unknown-person，他们还建议在删除他的答案之前使用[https://github.com/samaaron/at-at 。](https://github.com/samaaron/at-at)文档有点过时，但这就是我的工作方式。

```
（使用'overtone.at-at）

(def my-pool (mk-pool))
;=> 创建一个线程池

（每 1000 次 #(println "I am supercool!") my-pool :initial-delay 2000）
;=> 在 2 秒延迟后每 1 秒启动一次打印功能

(停止*1)
;=> 停止它

```

所以要让它从 9 点开始，间隔半小时，我会这样做：

```
（需要'[clj-time.core :as t]）
（需要'[clj-time.coerce :as c]）
（使用'overtone.at-at）

;制作线程池
(def my-pool (mk-pool))

（定义当前时间（t/now））

(def 当前日期 (t/日期时间
                    （吨/年当前时间）
                    （吨/月当前时间）
                    （吨/天当前时间）））

(def next-9-oclock
  （如果（> 9（吨/小时当前时间））
    (t/plus current-date (t/hours 9))
    (t/plus current-date (t/days 1) (t/hours 9))))

（定义初始延迟
   (- (c/to-long next-9-oclock) (c/to-long current-time))

（每 180 万
       #(println "我超酷！")
       我的池
       :初始延迟
       初始延迟）

```

### 更新：

@arthur-ulfeoldt，我不知道如何将一些 java 代码翻译成 clojure。 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)

像：

```
final ScheduledFuture<?> beeperHandle = 
        scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS); 
```

和：

```
final Runnable beeper = new Runnable() {
        public void run() { System.out.println("beep"); }
     }; 
```

### 整个例子

```
蜂鸣器控制类 {
    私有最终 ScheduledExecutorService 调度程序 =
       Executors.newScheduledThreadPool(1);

    公共无效 beepForAnHour() {
        最终 Runnable 蜂鸣器 = new Runnable() {
                公共无效运行（）{ System.out.println（“哔”）；}
            };
        最终计划未来 beeperHandle =
            scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
        scheduler.schedule(new Runnable() {
                公共无效运行（）{beeperHandle.cancel（真）；}
            }, 60 * 60, 秒);
    }
 }

```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-28T02:09:09.120

我需要一些东西

*   以整秒间隔开始计划任务，而不是具有高系统时间精度的整分钟间隔。
*   将根据需要生成尽可能多的线程，以便在较早时间间隔开始的任务可以与在较晚时间间隔开始的辅助任务一起存在。

在阅读了 at-at、Montony 和 Quartzite 的一些源代码之后，我觉得它们不符合我所追求的要求（这实际上是更简单的东西），所以我编写了自己的 - [cronj](https://github.com/zcaudate/cronj)

用法示例。

```
(require '[cronj.core :as cj])

(cj/schedule-task! {:id 0   :desc 0 
              :handler #(println "job 0:" %) 
              :tab "/5 * * * * * *"}) ;; every 5 seconds
(cj/schedule-task! {:id 1   :desc 1 
              :handler #(println "job 1:" %) 
              :tab "/3 * * * * * *"}) ;; every 3 seconds

(cj/start!) 

;; wait for scheduler to do its thing ......

(cj/stop!) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:53:21.373

java >=5.0 的[ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)涵盖了所有这些以及更多内容。有一个名为[at-at](https://github.com/overtone/at-at)的 clojure 项目很好地包装了它（并且是我个人最喜欢的项目 Overtone 的一部分）

您可能会发现这个其他 SO 问题很有帮助[在 Clojure 中定期执行代码](https://stackoverflow.com/questions/8220347/executing-code-at-regularly-timed-intervals-in-clojure)

从归纳：

```
schedule 方法创建具有各种延迟的任务并返回一个任务对象     
 用于取消或检查执行。scheduleAtFixedRate 和 scheduleWithFixedDelay   
 方法创建并执行定期运行直到取消的任务。

```

正确获取 cron 或类型服务比听起来要难，因此使用现有实现可能比滚动自己的实现具有一些优势。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T09:08:30.157

我遇到了一些用于调度的 Clojure 库，按复杂度升序排列：

*   [Overtone/at-at](https://github.com/overtone/at-at)，一个简单的提前调度器
*   [Monotony](https://github.com/aredington/monotony)，一种以人类直观的方式安排事情的调度程序。
*   [Quartzite](https://github.com/michaelklishin/quartzite)，一个强大的 Clojure 调度库，构建在 Java Quartz Scheduler 之上。

# python - url_for 里面包含 jinja2

> ID：11234553
> 
> 赞同：4
> 
> 时间：2012-06-27T20:44:33.120
> 
> 标签：python, flask, jinja2

我正在使用带有 jinja2 模板的烧瓶，其中包括另一个名为 buttons.html 的 jinja2 模板。

按钮模板的父级如下所示：

```
{% include "{{ url_for('.buttons') }}" %} 
```

蓝图代码如下所示：

```
@whatever_blueprint.route('/whatever/buttons.html', methods=['GET'])
def buttons():
    return render_template('/whatever/buttons.html') 
```

这让我可以利用 jinja 将解决 . 为当前蓝图上下文添加前缀 url_for 路径，从而为我提供专门为渲染它的蓝图渲染的按钮。我在其他情况下使用 .prefix 方法，但在这种情况下没有尝试过嵌套的 url_for 。不幸的是，我似乎无法让它工作，大概是因为嵌套的 {% {{ }} %}。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:49:27.413

不幸的是（或幸运的是？大多数用例会相当难看）您不能包含 URL，而只能包含模板。

您想要的是`{{ buttons() }}`将`buttons`函数`buttons`（或in ）传递给调用或`{{ buttons }}`通过全局模板上下文提供。`buttons=buttons()``render_template()``render_template()`

# forms - 使用 jquery 提交表单

> ID：11234559
> 
> 赞同：1
> 
> 时间：2012-06-27T20:45:03.993
> 
> 标签：forms, submit

提交表单时，我尝试使用 id 提交表单并通过 JQuery 在其上调用提交，但当然，第一个脚本让我陷入无限循环。

使用plupload后，我注意到他们使用另一种方式提交表单，这不会导致无限循环。

我试图找到有关此的信息，但我似乎无法获得有关此的具体信息？

```
$('#test').submit(function(e) {
   alert("here");
   $('#test').submit();
   return false;
});

$('form').submit(function(e) {
   alert("here");
   $('form')[0].submit();
   return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:50:54.680

## 开始编辑

在第一种情况下，您在 jQuery 对象上触发 jQuery 提交事件（请参阅[http://api.jquery.com/submit/](http://api.jquery.com/submit/)）

在第二种情况下，您在 javascript 对象上调用 javascript submit 方法。它不会触发提交事件。

两种情况下的“提交”都不相同。

在第二种情况下，如果您更换：

```
$('form')[0].submit(); 
```

和

```
$($('form')[0]).submit(); 
```

您还将以无限循环结束。

## 结束编辑

实际上，使用plupload，关键是等待您能够成功提交表单的时间。主要功能是订阅 StateChanged 事件。

它是这样工作的：

1-首先检查队列是否为空。如果是，验证表单提交（返回 true）

2-如果队列不为空

a- 启动加载剩余文件 b- 订阅未来的“StateChanged”事件，它将检查队列。如果那个时候是空的，转到第1步会成功（因为那个时候队列是空的） c - 取消表单提交（队列当前不是空的）

一些带有注释的代码：

```
 // Client side form validation
    $('form').submit(function(e) {
        var myForm = e.currentTarget;
        var uploader = $(item).pluploadQueue();

        // if files in queue upload them first. Cancel current form submission.
        // Subscribe to 'StateChanged' to check if the queue is empty and try 
        // a new submission, each time a file is finished uploading

        if (uploader.files.length > 0) {
            // When all files are uploaded submit form
            uploader.bind('StateChanged', function() {
                if (uploader.files.length === (uploader.total.uploaded + uploader.total.failed)) {
                    myForm.submit(); // 
                }
            });
           // start uploading remaining files. 
           // End of each upload will trigger the 'StateChanged'
            uploader.start(); 
           // there are files in queue. (the reason we are running current block)
           // Cancel current form submission 
            return false;  
        }
        return true; // the queue is empty, validate current form submission
    }); 
```

希望这会有所帮助

# ssrs-2008 - 检查字段值是否在 SSRS 报告中的字符串列表中

> ID：11234561
> 
> 赞同：5
> 
> 时间：2012-06-27T20:45:05.790
> 
> 标签：ssrs-2008, reporting-services, ssrs-tablix

我正在使用 SSRS (VS2008) 并创建工作订单报告。在报告表的详细信息行中，我有以下列（带有一些假数据）

```
WONUM  |  A  |  B  | Hours
ABC123 |  3  |  0  |   3
SPECIAL|  0  |  6  |   6
DEF456 |  5  |  0  |   5
GHI789 |  4  |  0  |   4
OTHER  |  0  |  2  |   2 
```

正如您所看到的，所有工作订单都有一个工作订单号 (WONUM) 以及总小时数 (HOURS)。我需要根据 WONUM 将小时数放入 A 列或 B 列。我有一个特别命名的工作订单列表（在示例中，它们将是“SPECIAL”和“OTHER”），这将导致 HOURS 值放在 B 列中。如果 WONUM 不是一个特殊命名的，那么它进入 A 列。这是我想要作为 A 列和 B 列的表达式的内容：

```
Column A: =IIF(Fields!WONUM.Value IN ("SPECIAL","OTHER"), 0, Fields!Hours.Value)
Column B: =IIF(Fields!WONUM.Value IN ("SPECIAL","OTHER"), Fields!Hours.Value, 0) 
```

但正如您可能知道`Fields!WONUM.Value IN ("SPECIAL","OTHER")`的那样，这不是一种有效的方法！完成这项工作的最佳方法是什么？由于其他原因，我无法在 SQL 查询中以任何其他方式对其进行标记，因此必须在表中完成。

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-10T08:57:41.090

试试这个，（使用 InStr() 函数）

```
IIF(InStr(Fields!WONUM.Value,"SPECIAL")>0 OR InStr(Fields!WONUM.Value,"OTHER")>0, 0, Fields!Hours.Value)

IIF(InStr(Fields!WONUM.Value,"SPECIAL")>0 OR InStr(Fields!WONUM.Value,"OTHER")>0, Fields!Hours.Value,0) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T02:15:10.757

如果只是两个 WONUM，那么您可以这样做：

A栏：

```
=IIF((Fields!WONUM.Value <> "SPECIAL") AND (Fields!WONUM.Value <> "OTHER"), Fields!Hours.Value, 0) 
```

B栏：

```
=IIF((Fields!WONUM.Value = "SPECIAL") OR (Fields!WONUM.Value = "OTHER"), Fields!Hours.Value, 0) 
```

或在每列中使用相同的公式以保持一致性，并在最后交换字段/0。

# php - PHP 和 mySQL 仅邀请注册

> ID：11234563
> 
> 赞同：2
> 
> 时间：2012-06-27T20:45:13.437
> 
> 标签：php, mysql, login, registration, invitation

我正在尝试为小型企业网站实施仅限邀请的注册系统。管理员可以在其中输入员工的个人电子邮件并将验证码发送给他/她。

当员工点击电子邮件中的链接时，他将被重定向到注册页面。（使用开关来确定显示的内容）

问题是我早些时候制作了注册页面，但我无法将其应用于此邀请码。邀请码使用“echo”来显示文本，而原始注册页面在使用 php、html 和 css 创建的表格内有一个表格。我的问题是如何修改代码以使其兼容。

请参阅下面的代码：

**邀请.php**

```
mysql_select_db($database_connSQL, $connSQL);
$query_RecInvite = "SELECT * FROM invite_codes";
$RecInvite = mysql_query($query_RecInvite, $connSQL) or die(mysql_error());
$row_RecInvite = mysql_fetch_assoc($RecInvite);
$totalRows_RecInvite = mysql_num_rows($RecInvite);

/*
This script assumes you already have a database setup, with a connection string in place.
First, we'll need to create our table...
Copy/paste the following SQL code into the database you'll be using.

CREATE TABLE `invite_codes` (
    `id` int(11) NOT NULL auto_increment,
    `invite_code` varchar(35) NOT NULL default '',
    `time_stored` int(11) NOT NULL default '0',
    PRIMARY KEY  (`id`)
) TYPE=MyISAM ;

*/
function genRandomString($length) {
    $chars = "0123456789abcdefghijklmnopqrstuvwxyz";
    for ($p = 0; $p < $length; $p++) {
        $string .= $chars[mt_rand(0, strlen($chars))];
    }
    return $string;
}
function clean($str) {
    $value = mysql_escape_string(stripslashes(htmlspecialchars($str)));
    return $value;
}
function sendEmail($mailto,$mailsubject,$mailcontent,$mailfrom) {
    if($mailto == '' || $mailsubject == '' || $mailcontent == '' || $mailfrom == '') {
        return false;
    } else {
        $headers = 'From: '.$mailfrom."\r\n".
        'Reply-To: '.$mailfrom."\r\n" .
        'X-Mailer: PHP/'.phpversion();
        if(mail($mailto, $mailsubject, $mailcontent, $headers)) {
            return true;
        } else {
            return false;
        }
    }
}
function checkEmail($email) {
    if(!ereg("^[^@]{1,64}@[^@]{1,255}$", $email)) { return false; }
    $email_array = explode("@", $email);
    $local_array = explode(".", $email_array[0]);
    for($i = 0; $i < sizeof($local_array); $i++) {
        if(!ereg("^(([A-Za-z0-9!#$%&'*+/=?^_`{|}~-][A-Za-z0-9!#$%&'*+/=?^_`{|}~\.-]{0,63})|(\"[^(\\|\")]{0,62}\"))$", $local_array[$i])) {
            return false;
        }
    }
    if(!ereg("^\[?[0-9\.]+\]?$", $email_array[1])) {
        $domain_array = explode(".", $email_array[1]);
        if (sizeof($domain_array) < 2) { return false; }
        for($i = 0; $i < sizeof($domain_array); $i++) {
            if (!ereg("^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]+))$", $domain_array[$i])) {
                return false;
            }
        }
    }
    return true;
}
(empty($_GET['go']))?($go = 'home'):($go = $_GET['go']);
switch($go) {
    case 'home':
        echo 'This is an invite code example..<br />Generate a new invite code:<br />
            <form action="?go=generate" method="post">
            <input name="submit" type="submit" value="Generate" />
            </form>';
    break;
    case 'generate':
        $invite_code = genRandomString(25); // genRandomString( INT )
        echo 'This is a random invite code: <b>'.$invite_code.'</b><br />Let&#39;s go ahead and toss this into our database...';
        if(mysql_query("INSERT INTO invite_codes (id,invite_code,time_stored) VALUES ('','".$invite_code."','".mktime()."')")) {
            echo '<br />Insertion successful<br /><br />Use code to invite a friend:<br />';
            echo '<p><form action="?go=invite" method="post">
                <input type="text" name="email" id="email" value="" />
                <input type="hidden" name="code" id="code" value="'.$invite_code.'" />
                <input name="submit" type="submit" value="Invite" />
                </form></p>';
        } else { echo 'Whoops! Something went horribly wrong, and we couldn&#39;t store the code :('; }
    break;
    case 'invite':
        if(!empty($_POST['email'])) {
            if(checkEmail($_POST['email'])) {
                $thisDomain = str_replace('www.', '', $_SERVER['HTTP_HOST']);
                $mailcont = "Someone has invited you to an invite only website!\nYour invite code is: ".$_POST['code'].".\n\nYou can use it at http://www.".$thisDomain."/newTATCS/login/invite.php?go=register&hash=".$_POST['code'];
                if(sendEmail($_POST['email'],'You have been invited!',$mailcont,'noreply@'.$thisDomain)) {
                    echo 'Your invite was dispatched to '.$_POST['email'].'<br /><br />Go back <a href="?go=home">home</a>';
                } else { echo 'Whoops! Something went horribly wrong, and we couldn&#39;t send the email :('; }
            } else { 'Whoops! Looks like the email address you selected is invalid :('; }
        } else { 'Whoops! It looks like you didn&#39;t actually add an email address...'; }
    break;
    case 'register':
        if(!empty($_POST['code'])) {
            $code = clean($_POST['code']); // Because SQL injections are annoying :)
            $query = mysql_query("SELECT id FROM invite_codes WHERE invite_code = '".$code."'");
            if(mysql_num_rows($query) == 1) {
                $fetch = mysql_fetch_object($query);
                echo 'Congratulations, the invite code was found!<br />We&#39;re going to remove it from the database now...';
                if(mysql_query("DELETE FROM invite_codes WHERE id = '".$fetch->id."'")) {
                    echo '<br />Code removed!';
                } else { echo 'Whoops! Something went horribly wrong, and we couldn&#39;t remove the code :('; }
            } else { echo 'Sorry, that code is invalid.'; }
        } else {
            echo 'This website is closed to the public. You will need an invite code to continue registration.
                <p><form action="?go=register" method="post">
                <input type="text" name="code" id="code" value="'.$_GET['hash'].'" />
                <input name="submit" type="submit" value="Check" />
                </form></p>';
        }
    break;
}
?> 
```

**注册.php**

```
<form id="register" name="register" method="POST" action="<?php echo $editFormAction; ?><?php echo $loginFormAction; ?>">
      <div class="leftRegister">
        <table width="278" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td width="278">Saultation<br />
              <select name="salutation" id="salutation">
                <option selected="selected">Mr.</option>
                <option>Mrs.</option>
                <option>Ms.</option>
                <option>Dr.</option>
                <option>Prof.</option>
            </select></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td><table width="278" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td width="138">Name<br /></td>
                <td width="140">&nbsp;</td>
              </tr>
              <tr>
                <td valign="top"><span id="sprytextfield1">
                  <input name="firstname" class="regFirstname" type="text" id="firstname" />
                  <br />
                  <span class="textfieldRequiredMsg">Enter your First name .</span></span></td>
                <td width="140" valign="top"><span id="sprytextfield2">
                  <input type="text" class="regLastname" name="lastname" id="lastname" />
                  <br />
                  <span class="textfieldRequiredMsg">Enter your Last name.</span></span></td>
              </tr>
            </table></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>Personal Email<br />
              <span id="sprytextfield9">
              <input type="text" name="email" id="email" />
              <br />
              <span class="textfieldRequiredMsg">Please enter your personal email.</span></span></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>Create a password<br />
              <span id="sprypassword1">
              <input type="password" name="password" id="password" />
              <br />
            <span class="passwordRequiredMsg">Please choose a password that contain at least<br />
1 letter and 1 number for maximum security.</span><span class="passwordMinCharsMsg">Minimum number of characters not met.<br />
Password must contain at least  5 characters.</span><span class="passwordInvalidStrengthMsg">Password must contain at least 1 letter and 1 number.</span></span></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>Confirm your password<br />
              <span id="spryconfirm1">
              <input type="password" name="passwordcheck" id="passwordcheck" />
            <span class="confirmRequiredMsg"><br />
            Please make sure your password matches</span><span class="confirmInvalidMsg"><br />
            The values don't match.</span></span></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
          <tr>
            <td>Birthday<br />
              <select name="BirthMonth">
                <option value="1">January</option>
                <option value="2">February</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
              </select>
              <select name="BirthDay">
                <?php
    for ($i=1; $i<=31; $i++)
    {
     echo "<option value='$i'>$i</option>";
    }
   ?>
              </select>
              <select name="BirthYear">
                <?php
    for ($i=2006; $i>=1900; $i=$i-1)
    {
     echo "<option value='$i'>$i</option>";
    }
   ?>
            </select></td>
          </tr>
          <tr>
            <td>&nbsp;</td>
          </tr>
        </table>
      </div>

      <div class ="rightRegister">
        <table width="280" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td colspan="2">Address
              <br />
              <span id="sprytextfield3">
              <input type="text" name="address" id="address" />
              <br />
              <span class="textfieldRequiredMsg">Please enter your address</span></span></td>
          </tr>
          <tr>
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr>
            <td colspan="2">City<br />
              <span id="sprytextfield4">
              <input type="text" name="city" id="city" />
              <br />
            <span class="textfieldRequiredMsg">Please enter your city.</span></span></td>
          </tr>
          <tr>
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr>
            <td width="108" valign="top">State/Province<br />
              <span id="sprytextfield5">
              <input type="text" name="state" id="state" class="regState" />
            <span class="textfieldRequiredMsg">State  required.</span></span></td>
            <td width="144" valign="top">Zip/Postal Code<br />
              <span id="sprytextfield6">
              <input type="text" name="postalcode" id="postalcode" class="regPostalcode" />
              <span class="textfieldRequiredMsg"><br />
Zip Code required.</span><span class="textfieldMaxCharsMsg"><br />
Enter  5-digit Zip code.</span></span></td>
          </tr>
          <tr>
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr>
            <td colspan="2">Homephone
              <span id="sprytextfield7"><br />
              <input type="text" name="homephone" id="homephone" />
              <br />
              <span class="textfieldRequiredMsg">Please enter  phone number.</span></span></td>
          </tr>
          <tr>
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr>
            <td colspan="2">Cellphone<br />
              <span id="sprytextfield8">
              <input type="text" name="cellphone" id="cellphone" />
              <br />
            <span class="textfieldRequiredMsg">Please enter your cellphone number.</span></span></td>
          </tr>
          <tr>
            <td colspan="2">&nbsp;</td>
          </tr>
          <tr>
            <td colspan="2" align="right"><span class="submit">
              <input type="submit" value="Submit" />
            </span></td>
          </tr>
          <tr>
            <td colspan="2" align="right">&nbsp;</td>
          </tr>
        </table>
        <p>&nbsp;</p>
      </div>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <p>&nbsp;</p>
      <input type="hidden" name="MM_insert" value="register" />
    </form>
  </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:48:00.590

`site.php?code=ajiofdjasoiej39048`在您的注册页面上，从查询字符串 ( )中提取邀请码。然后，检查数据库中是否存在具有该邀请码的行。如果是，则显示注册表。否则显示错误消息。提交时再次检查代码，用户注册成功后，从数据库中删除邀请码。

此外，不推荐使用 php_mysql 。请改用 MySQLi 或 PDO。

# java - 如何使用 Jackson 和 CXF 从 JSON 字符串反序列化为 Enum

> ID：11234564
> 
> 赞同：3
> 
> 时间：2012-06-27T20:45:16.460
> 
> 标签：java, json, enums, cxf, jackson

我正在使用 Enum 中的静态工厂玩 @JsonCreator，但是当请求有效负载中存在带有“Sex”：“Male”的 Json 对象时，CXF 不会检测并调用 updateUser 方法。当我取出枚举的这个字符串表示时，它就起作用了。

任何想法如何构造这三个类/枚举以使反序列化从字符串到枚举工作。谢谢！

用户资源：

```
@PUT
@Produces("application/json")
@Consumes("application/json")
@Path("/{user-id}")
public Response updateUser(UserBean user, @PathParam("user-id") Long userId) {
    user.setId(userId);
    UserBean registeredUser = userService.updateUser(user);
    return Response.ok().entity(registeredUser).build();
} 
```

和用户Bean：

```
public class UserBean {

private long id;
private String firstName;
private String lastName;
private String email;
private String phone;
private String password;
private Sex sex;
    ..... 
```

和枚举：

```
public enum Sex {

FEMALE("Female", 0),
MALE("Male", 1);

private String desc;
private int value;

Sex(String desc, int value) {
    this.desc = desc;
    this.value = value;
}

public String desc() {
    return desc;
}

@JsonValue
public int value() {
    return value;
}

@JsonCreator
public static Sex fromString(@JsonProperty("sex") String desc) {
    for (Sex type : Sex.values()) {
        if (type.equals(desc)) {
            return type;
        }
    }
    return null;
} 
```

}

# pdf - 在 pentaho 报表设计器中将两个 prpt 报表的结果合并为一个 PDF

> ID：11234569
> 
> 赞同：0
> 
> 时间：2012-06-27T20:45:22.803
> 
> 标签：pdf, pentaho

我一直在到处找这个。我有两个单独的 prpt 文件，我能够为这些 prpt 文件生成 pdf。我想将这两个报告合并成一个包含两页的 PDF。我想在报表设计器或 Pentaho 数据集成中执行此操作。请有人可以帮我解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T11:35:51.163

您可以通过报表设计器中的子报表执行此操作 - 无需使用 DI 工具。您在父报表中创建一个新的子报表，然后粘贴子报表中的所有元素。诚然，不是很干净。

或者，如果它是一个非常复杂的报告，您可以解压缩 prpt，插入子报告并重新压缩它。但这很棘手——而且对于必须在哪里做的事情有一些限制！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:09:03.303

[**如果您的唯一目的是合并 pdf 文档（而不是 prpt 文件）：有一个名为pdfsam**](http://www.pdfsam.org/)的免费开源工具能够合并多个 pdf 文档。或者，如果您不愿意上传敏感数据，您可以使用在线服务，例如[foxyutils 的 mergepdf](http://foxyutils.com/mergepdf/)

# c# - 如何使用 WebAPI 在表之间映射 EntitySet

> ID：11234570
> 
> 赞同：1
> 
> 时间：2012-06-27T20:45:24.943
> 
> 标签：c#, sql, json, asp.net-web-api

我的表中很少有必须通过补间表访问关系数据，即“表之间”。

示例：我有一个名为 Door 的实体，一个名为 Hardware，一个名为 DoorHardware(DoorID int,HardwareID int)

我正在使用 JSON 序列化客户端上的数据并使用 .net WebAPI 将其打包成强类型对象。当我遇到我需要硬件实体集是实体集而不是实体集的情况时，一切都正确地接受了映射。

我们如何告诉 WebAPI 从 JSON 中获取硬件而不是寻找 DoorHardware，因为我的 JSON 的结构符合预期。{door.hardware{}}... 而不是 {door.doorHardware}

![SQL 表](../Images/68f2bd0e1f978b56e7fe0cf3281223c1.png) 这是 .net WebAPI 服务器端。您可以看到门硬件是用于将 JSON 映射到的 EntitySet 是 DoorHardwares 而不仅仅是硬件。

![网络API / JSON](../Images/723308e0167e94bf3bba1cb9c18e862e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:52:11.297

在我的 linq to sql 项目中添加了一个部分类，webAPI 按预期映射属性。

```
 public partial class Door
    {
        public EntitySet<Hardware> Hardware{ get; set; }
    } 
```

# java-me - 在 J2ME 中执行 AT 命令

> ID：11234573
> 
> 赞同：2
> 
> 时间：2012-06-27T20:45:32.220
> 
> 标签：java-me, at-command

我想知道如何在 J2ME 应用程序中执行 AT 命令。我简要介绍的方法如下：

首先通过以下方式获取手机中存在的所有端口

`String ports = System.getProperty("microedition.commports");`

现在只需尝试写“AT”并等待每个端口的响应（是的，我说的是每个端口**！！！**）

```
try{
  commConnection = (CommConnection) Connector.open("comm:" + portsArr[i] + ";baudrate=19200");
} catch (IOException e) {
    print("IOException:Port:" + portsArr[i] + "~Mess: " + e.getMessage());
} 
```

一旦我从某个端口获得“OK”，我就可以以同样的方式执行我想要的命令。

我正在尝试在两部不同的手机上执行此操作

[诺基亚 SuperNova 7210](http://www.gsmarena.com/nokia_7210_supernova-2447.php)

端口=USB1

当我尝试写入端口时，没有任何反应。

[诺基亚随心音乐](http://www.gsmarena.com/nokia_5233-3390.php)

端口= USB2,COM1,IR1,USB1,BT1,BT2,BT3,BT4,BT5,BT6,BT7,BT8,BT9,BT10,BT11,BT12,BT13,BT14,BT15,BT16,BT17,BT18,BT19,BT20, BT21,BT22,BT23,BT24,BT25,BT26,BT27,BT28,BT29,BT30,BT31,BT32,BT33,BT34,BT35,BT36,BT37,BT38,BT39,BT40,BT41,BT42,BT43,BT44,BT45, BT46,BT47,BT48,BT49,BT50,BT51,BT52,BT53,BT54,BT55,BT56,BT57,BT58,BT59,BT60,BT61,BT62,BT63,BT64

当我尝试写入 USB2、COM1、BT1 端口时

```
IOException:Port:COM1~Mess: SymbianOS error = -1 : General:
System error
IOException:Port:USB1~Mess: SymbianOS error = -21 : General:
System error
IOException:Port:BT1~Mess: SymbianOS error = -44 : General:
System error 
```

这是一个正确的方法吗？

[Smslib](http://code.google.com/p/smslib/)使用 AT 命令，但我不明白他们如何执行 AT 命令或他们如何获得编写 AT 命令的端口？

如果 J2ME 无法实现，我不介意不使用其他语言编写 AT 命令的执行，只要两者都能够通信并且该解决方案将支持大多数供应商。

相关 - [https://stackoverflow.com/questions/3803508/can-i-use-at-commands-insider-j2me-app](https://stackoverflow.com/questions/3803508/can-i-use-at-commands-insider-j2me-app)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:05:57.397

你想要达到的目标是绝对**不可能的**。

只有当 Java ME 通过 COMM 端口提供对 GSM 调制解调器的访问时，您的方法才有效，但事实并非如此！

（我想*可能*有一个设备可以提供这个，在 Java ME 领域一切皆有可能，但我从未见过或听说过这个）。

您所指的库在具有通过 COMM 端口连接到它的设备的 PC 上运行，它在 Java ME 上下文中不起作用**。**

我怀疑您真正想做的是通过 MIDlet 访问手机的本地 SMS 收件箱。我向你保证，**绝对没有办法**做到这一点！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:06:16.783

如果您想要做的只是发送一条短信，也许您可​​以使用 APDU 来获取它。这在技术上似乎是可行的：

首先，您需要 JSR 177 SATSA-APDU。[在http://www.developer.nokia.com/Community/Wiki/Java_ME_API_support_on_Nokia_devices](http://www.developer.nokia.com/Community/Wiki/Java_ME_API_support_on_Nokia_devices)查看支持它的诺基亚设备

然后你必须像 STK Applet 一样创建一个 SMS APDU。请查看[http://www.dreamfabric.com/sms/上的“以 PDU 模式发送消息”](http://www.dreamfabric.com/sms/)

我没有尝试这个，但如果我必须这样做，这是我会走的路。如果它对你有用，请分享。

# javascript - 三重 (3) 等号

> ID：11234575
> 
> 赞同：48
> 
> 时间：2012-06-27T20:45:37.043
> 
> 标签：javascript, jquery

> **可能重复：**
> [JavaScript === vs ==：我使用哪个“相等”运算符有关系吗？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

我在这里问[了另一个问题](https://stackoverflow.com/questions/11112127/prevent-backspace-from-navigating-back-with-jquery-like-googles-homepage)，并得到了很好的回答，如下所示：

```
$(document).on("keydown", function (e) {
  if (e.which === 8 && !$(e.target).is("input, textarea") || $(e.target).is('[readonly]')) {
      e.preventDefault();
  }
}); 
```

注意 if 语句中的三个等号`===`。我一直认为`==`javascript/jQuery if 语句只需要两个等号。这三个有什么原因吗？

**更新**

抱歉重复的问题 - 我搜索但没有找到任何好的问题。我想我使用了错误的搜索词。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-27T20:48:39.407

javascript 中的三等号表示*没有类型强制的相等*。

例如：

```
1=="1"     // true, automatic type coersion
1==="1"    // false, not the same type. 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-27T20:47:16.527

三个等号表示值和类型都相等。

# c# - HTTP 请求没有响应

> ID：11234576
> 
> 赞同：1
> 
> 时间：2012-06-27T20:45:37.397
> 
> 标签：c#, http-request

> **可能重复：**
> [在 C# 中调整 HttpWebRequest 连接超时](https://stackoverflow.com/questions/1500955/adjusting-httpwebrequest-connection-timeout-in-c-sharp)

在我的代码中，我正在调用实时聊天 api 来获取以下格式的操作员列表：

```
 HttpWebRequest request
                = WebRequest.Create("url-here") as HttpWebRequest;
            request.Credentials
                = new NetworkCredential(
                    username,
                    password
                    );

            using (HttpWebResponse response = request.GetResponse() as HttpWebResponse)
            {
                StreamReader reader = new StreamReader(response.GetResponseStream());

           //dowhatever
            } 
```

今天实时聊天 api 下线了，因为我们的网站也下线了。在这种情况下，api 请求继续旋转并处于“未响应”状态。

如何解决这个问题？我不想继续等到 api 响应。因为它会导致我的页面也继续旋转。有没有类似超时的方法 - 或者等待 2 秒然后跳过实时聊天请求部分？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:51:41.460

您可以使用该[`WebRequest.Timeout`属性](http://msdn.microsoft.com/en-us/library/system.net.webrequest.timeout.aspx)来设置您希望代码在超时之前等待多长时间：

```
var request = WebRequest.Create("url-here") as HttpWebRequest;
request.Credentials = new NetworkCredential(username, password);
request.Timeout = 30 * 1000; // wait for 30 seconds (30,000 milliseconds) 
```

# bash - bash中的多行赋值

> ID：11234577
> 
> 赞同：8
> 
> 时间：2012-06-27T20:45:43.850
> 
> 标签：bash, sh

在 Windows 上的 .cmd 文件中，我这样做：

```
SET JARS=^
./lib/apache-mime4j-0.6.jar;^
./lib/apache-mime4j-0.6.jar;^
./lib/bsh-1.3.0.jar;^
./lib/cglib-nodep-2.1_3.jar;^
./lib/commons-codec-1.6.jar;^
./lib/commons-collections-3.2.1.jar;^
./lib/commons-exec-1.1.jar;^
./lib/commons-io-2.0.1.jar;^
./lib/commons-io-2.3.jar; 
```

如何在 shell 中进行这样的多行赋值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T20:54:33.273

给这只猫剥皮的方法有很多。

```
JARS='
./lib/apache-mime4j-0.6.jar;
./lib/apache-mime4j-0.6.jar;
./lib/bsh-1.3.0.jar;
./lib/cglib-nodep-2.1_3.jar;
./lib/commons-codec-1.6.jar;
./lib/commons-collections-3.2.1.jar;
./lib/commons-exec-1.1.jar;
./lib/commons-io-2.0.1.jar;
./lib/commons-io-2.3.jar;
' 
```

根据您的问题，这可以让您在变量中进行多行输入。

但是如果您打算在 shell 脚本中使用这些文件，您需要告诉我们如何使用，以便我们能够得出适当的答案，而不是让我们猜测。为了在 shell 脚本中使用，文件需要用一些有用的东西来分隔。

你问，“我怎么能在 shell 中做这样的多行赋值”，但你的例子中的赋值实际上是一个单行，`^`在每个输入行的末尾否定下面的换行符（*而不是*转义它，正如另一个答案所建议的） .

我在这个答案中的解决方案是多行的，但是您需要更多地解释您需要什么才能确定什么是有用的。

例如，如果您需要单步执行将使用该`jar`命令处理的文件列表，您可能需要以下内容：

```
#!/bin/sh

JARS='
./lib/apache-mime4j-0.6.jar
./lib/bsh-1.3.0.jar
...
'

set $JARS
for jarfile in "$@"; do
  jar xf "$jarfile" ...
done 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T20:52:10.593

或者

```
SOMEVAR=$( cat <<EOF
value1
value2
value3
value4
value5
EOF
) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T20:47:28.223

正如我将展示的那样，这个问题隐含地要求**单行输出。**

# 测试.bat

```
@SET JARS=^
./lib/apache-mime4j-0.6.jar;^
./lib/apache-mime4j-0.6.jar;^
./lib/bsh-1.3.0.jar;^
./lib/cglib-nodep-2.1_3.jar;^
./lib/commons-codec-1.6.jar;^
./lib/commons-collections-3.2.1.jar;^
./lib/commons-exec-1.1.jar;^
./lib/commons-io-2.0.1.jar;^
./lib/commons-io-2.3.jar;
@echo %JARS% 
```

# 输出

```
c:\home\Steven\Desktop>test.bat
./lib/apache-mime4j-0.6.jar;./lib/apache-mime4j-0.6.jar;./lib/bsh-1.3.0.jar;./li
b/cglib-nodep-2.1_3.jar;./lib/commons-codec-1.6.jar;./lib/commons-collections-3.
2.1.jar;./lib/commons-exec-1.1.jar;./lib/commons-io-2.0.1.jar;./lib/commons-io-2
.3.jar; 
```

# 测试.sh

```
JARS=\
'./lib/apache-mime4j-0.6.jar;'\
'./lib/apache-mime4j-0.6.jar;'\
'./lib/bsh-1.3.0.jar;'\
'./lib/cglib-nodep-2.1_3.jar;'\
'./lib/commons-codec-1.6.jar;'\
'./lib/commons-collections-3.2.1.jar;'\
'./lib/commons-exec-1.1.jar;'\
'./lib/commons-io-2.0.1.jar;'\
'./lib/commons-io-2.3.jar;'
echo "$JARS" 
```

# 输出

```
$ ./test.sh
./lib/apache-mime4j-0.6.jar;./lib/apache-mime4j-0.6.jar;./lib/bsh-1.3.0.jar;./li
b/cglib-nodep-2.1_3.jar;./lib/commons-codec-1.6.jar;./lib/commons-collections-3.
2.1.jar;./lib/commons-exec-1.1.jar;./lib/commons-io-2.0.1.jar;./lib/commons-io-2
.3.jar; 
```

# javascript - 完全相同的代码在 Dreamweaver 中无法正常工作

> ID：11234578
> 
> 赞同：1
> 
> 时间：2012-06-27T20:46:01.390
> 
> 标签：javascript, html, dreamweaver

有时，当我将 jsfiddle 中的 javascript 复制到 Dreamweaver 中时，我最终会撞到墙上。具有（看起来是）完全相同的 javascript 的两个文档不能以相同的方式工作。

在文档 AI 中有以下代码：

```
<script>
alert('test')
</script> 
```

在文档 BI 中有以下代码（不起作用）：

```
<script>
alert('test')
​&lt;/script> 
```

注意：请将代码 B 复制到 html 文档中，并在给我评论之前尝试它是否发出警报。我不是在开玩笑，发生了一些奇怪的事情。

我发现问题与结束脚本标记有关，但我看不出代码有任何问题。

文档 A 和 B 的代码有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T21:46:00.960

右括号后面有一个[零宽度空格](http://en.wikipedia.org/wiki/Zero-width_space)(U+8203)。

[jsfiddle 知道](https://github.com/jsfiddle/jsfiddle-docs-alpha/issues/163)该错误，这似乎是[codemirror](http://codemirror.net/)语法荧光笔的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:39:32.230

将 jsfiddle 中的 javascript 代码（使用 Chrome 浏览器）复制并粘贴到 Dreamweaver 中时，我在脚本末尾得到一个不可见的 Unicode 字符。

这个小家伙：“​”（是的，它们之间有一个字符......）

这弄乱了javascript，很难找到问题所在。

如果您遇到与我类似的问题，您可以通过从上面的“”中复制来搜索该字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:48:42.810

尝试：

```
<script type="text/javascript">
    alert("Test");
</script> 
```

高温高压

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:48:50.360

你把这段代码放在页面的什么地方？

尝试使用`<script type="text/javascript">`而不仅仅是`<script>`.

为了工作，您的脚本需要位于`<head></head>`或之间的任何位置`<body></body>`。

您是否尝试过其他浏览器？您确定启用了 Javascript 吗？

# mysql - mysql查询优化

> ID：11234582
> 
> 赞同：1
> 
> 时间：2012-06-27T20:46:40.610
> 
> 标签：mysql, sql, optimization, graph, connection

我有两列的表（varchar from，varchar to）。该表表示节点之间的连接（从节点到节点）。我想让所有节点从我指定的节点连接或连接到我指定的节点，以及从这些节点连接或连接到这些节点的节点。目前我使用下面的查询给我正确的结果，但我正在寻找更整洁的解决方案。

```
//currently used query specified node "node1"
SELECT tonode as node
FROM conn
WHERE
fromnode
IN
(SELECT tonode as node FROM conn WHERE fromnode="node1"
UNION
SELECT fromnode as node FROM conn WHERE tonode="node1")
UNION
SELECT fromnode as node
FROM conn
WHERE
tonode
IN
(SELECT tonode as node FROM conn WHERE fromnode="node1"
UNION
SELECT fromnode as node FROM conn WHERE tonode="node1")

//create table for conn table
CREATE TABLE `conn` (
  `fromnode` varchar(70) NOT NULL,
  `tonode` varchar(70) NOT NULL,
  PRIMARY KEY (`fromnode`,`tonode`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC;
INSERT INTO `conn` (`fromnode`,`tonode`) VALUES
 ('node1','node2'),
 ('node1','node3'),
 ('node3','node2'),
 ('node4','node1'),
 ('node4','node2'),
 ('node4','node5'),
 ('node5','node6'),
 ('node4','node3'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:10:10.747

我的优化版本：

```
SET @origin = "node1";
SELECT DISTINCT
 IF(c1.fromnode = @origin,
   IF(c1.tonode = c2.tonode,
     IF(c2.fromnode = @origin, c2.tonode, c2.fromnode),
     IF(c2.tonode = @origin, c2.fromnode, c2.tonode)
   ),
   IF(c1.fromnode = c2.tonode,
     IF(c2.fromnode = @origin, c2.tonode, c2.fromnode),
     IF(c2.tonode = @origin, c2.fromnode, c2.tonode)
   )
 ) AS node
FROM conn AS c1
LEFT JOIN conn AS c2 ON (c1.fromnode = c2.fromnode OR c1.tonode = c2.fromnode OR c1.fromnode = c2.tonode OR c1.tonode = c2.tonode)
WHERE c1.fromnode = @origin OR c1.tonode = @origin; 
```

旧查询的 DESCRIBE 输出：

```
+----+--------------------+------------+--------+---------------+---------+---------+------------+------+--------------------------+
| id | select_type        | table      | type   | possible_keys | key     | key_len | ref        | rows | Extra                    |
+----+--------------------+------------+--------+---------------+---------+---------+------------+------+--------------------------+
|  1 | PRIMARY            | conn       | index  | NULL          | PRIMARY | 424     | NULL       |    8 | Using where; Using index |
|  2 | DEPENDENT SUBQUERY | conn       | eq_ref | PRIMARY       | PRIMARY | 424     | const,func |    1 | Using where; Using index |
|  3 | DEPENDENT UNION    | conn       | eq_ref | PRIMARY       | PRIMARY | 424     | func,const |    1 | Using where; Using index |
| NULL | UNION RESULT       | <union2,3> | ALL    | NULL          | NULL    | NULL    | NULL       | NULL |                          |
|  4 | UNION              | conn       | index  | NULL          | PRIMARY | 424     | NULL       |    8 | Using where; Using index |
|  5 | DEPENDENT SUBQUERY | conn       | eq_ref | PRIMARY       | PRIMARY | 424     | const,func |    1 | Using where; Using index |
|  6 | DEPENDENT UNION    | conn       | eq_ref | PRIMARY       | PRIMARY | 424     | func,const |    1 | Using where; Using index |
| NULL | UNION RESULT       | <union5,6> | ALL    | NULL          | NULL    | NULL    | NULL       | NULL |                          |
| NULL | UNION RESULT       | <union1,4> | ALL    | NULL          | NULL    | NULL    | NULL       | NULL |                          |
+----+--------------------+------------+--------+---------------+---------+---------+------------+------+--------------------------+ 
```

我的查询的 DESCRIBE 输出：

```
+----+-------------+-------+-------+---------------+---------+---------+------+------+-------------------------------------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref  | rows | Extra                                     |
+----+-------------+-------+-------+---------------+---------+---------+------+------+-------------------------------------------+
|  1 | SIMPLE      | c1    | index | PRIMARY       | PRIMARY | 424     | NULL |    8 | Using where; Using index; Using temporary |
|  1 | SIMPLE      | c2    | index | PRIMARY       | PRIMARY | 424     | NULL |    8 | Using index                               |
+----+-------------+-------+-------+---------------+---------+---------+------+------+-------------------------------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:27:52.363

如果我对您的理解正确（大约只有 2 个级别），您可以执行[以下](http://sqlfiddle.com/#!4/9712d/6)操作：

```
SELECT level,fromnode , tonode 
FROM conn1 
WHERE level < 3
CONNECT BY PRIOR tonode = fromnode
START WITH fromnode like '%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T23:01:55.827

由于这些“from”和“to”关系是双向的（您需要遍历两个方向），因此在 MySQL 中没有简单的语句可以做到这一点。要在单个列中返回单个结果集中的所有节点值，我可以避免 UNION 操作的最接近方法是：

```
SELECT CASE 
       WHEN t.i = 1 THEN t.dnode
       WHEN t.i = 2 AND t.dnode = c.fromnode THEN c.tonode
       WHEN t.i = 2 AND t.dnode = c.tonode THEN c.fromnode
       ELSE NULL
       END AS node
  FROM ( SELECT d.i
              , m.root
              , CASE WHEN m.root = n.fromnode THEN n.tonode ELSE n.fromnode END AS dnode
           FROM (SELECT 'node1' AS root) m
          CROSS
           JOIN (SELECT 1 AS i UNION ALL SELECT 2) d
           LEFT
           JOIN conn n ON m.root IN (n.fromnode,n.tonode)
       ) t
  LEFT
  JOIN conn c
    ON t.i = 2 AND t.dnode IN (c.fromnode,c.tonode)
 GROUP BY node
 ORDER BY node 
```

我不知道我是否能够解开它，但我会尝试的。为了避免多次指定根节点“node1”，我使用子查询来返回它。

```
 (SELECT 'node1' AS root) m 
```

因为我们要“深入两层”，所以我需要两组节点，所以我创建了一个笛卡尔积来使我拥有的行数加倍，我将它们标记为 1 用于第一级，2为第二级。

```
 CROSS
           JOIN (SELECT 1 AS i UNION ALL SELECT 2) d 
```

有了这个，我现在准备加入`conn`表，并且我想要任何具有与根节点匹配的 fromnode 或 tonode 值的行。

```
 LEFT
           JOIN conn n ON m.root IN (n.fromnode,n.tonode) 
```

使用该结果集，我想在其中一些行上“翻转”fromnode 和 tonode，这样我们基本上总是在一侧有“根”节点。我使用 CASE 表达式来测试哪一侧与根匹配：

```
CASE WHEN m.root = n.fromnode THEN n.tonode ELSE n.fromnode END AS dnode 
```

所以现在我将该结果集包装为内联视图 aliased `t`。该子查询可以单独运行，以查看我们是否返回了我们期望的内容：

```
SELECT d.i
     , m.root
     , CASE WHEN m.root = n.fromnode THEN n.tonode ELSE n.fromnode END AS dnode
  FROM (SELECT 'node1' AS root) m
 CROSS
  JOIN (SELECT 1 AS i UNION ALL SELECT 2) d
  LEFT
  JOIN conn n ON m.root IN (n.fromnode,n.tonode) 
```

我们确实需要返回那个“级别”值（`d.i`我们之前生成的，我们在下一步需要它，当我们再次加入 conn 表时，遍历下一个级别，我只需要加入我们要去的那些行看第二层。

```
 LEFT
  JOIN conn c
    ON t.i = 2 AND t.dnode IN (c.fromnode,c.tonode) 
```

再说一次，我不在乎哪个侧节点在这一点上，我只需要进行匹配即可。

此时，您可以运行整个查询，然后拉动`t.*, c.*`看看我们有什么，但我将跳过这部分并直接进入“魔术”。

此时，我们可以使用 CASE 表达式从混乱中“挑选”出我们想要的节点值。

如果级别值（不幸地标记为`i`）是 1，那么我们正在查看第一个级别，因此我们只需要获取位于“根”的“另一”侧的“nodeX”值。这可以从`t`源代码中获得，作为别名为`dnode`.

否则，我们将查看“第二”级的行，`i = 2`. （在这种特殊情况下，`i = 2`可以省略对 on 的测试，但为了完整性，它包括在内，以防万一我们将扩展这种方法以获得三个（喘气！）或更多（哦，我的！）级别。

在这里，我们需要知道哪一侧（从或到）与第一级匹配，我们只需拉另一侧。如果`t.dnode`一侧匹配，我们拉另一侧。

最后，我们使用 GROUP BY 来折叠重复项。

由于我们不关心这些来自哪个级别，因此我们省略了返回`t.i`，这将为我们提供级别。

* * *

概括

我不认为这比您的查询更简单。而且我不知道性能如何比较。但是很高兴有其他陈述来比较性能。

# iis-7 - 处理 SignaR 应用程序中的当前 IIS 请求？

> ID：11234591
> 
> 赞同：0
> 
> 时间：2012-06-27T20:47:30.383
> 
> 标签：iis-7, configuration, signalr

我有一个 SignalR 应用程序在生产中运行，此处输入代码`Requests Current`值超过 5000，呈现`503 Service Unavailable`错误。所以我用以下内容更新了 Aspnet.config 以增加`Requests Current`值

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
    <system.web>
        <applicationPool 
            maxConcurrentRequestsPerCPU="20000" 
            maxConcurrentThreadsPerCPU="20000" 
            requestQueueLimit="20000" />
    </system.web>
    <runtime>
        <legacyUnhandledExceptionPolicy enabled="false" />
        <legacyImpersonationPolicy enabled="true"/>
        <alwaysFlowImpersonationPolicy enabled="false"/>
        <SymbolReadingPolicy enabled="1" />
        <shadowCopyVerifyByTimestamp enabled="true"/>
    </runtime>
    <startup useLegacyV2RuntimeActivationPolicy="true" />
</configuration> 
```

但是，现在 Requests Current 值能够增加到超过 5000，并且在略高于 10,000 时，服务不可用。我有时只看到少数排队的请求（少于 100 个）。

![在此处输入图像描述](../Images/a979d209fd8c159ce5b0231efd0998ba.png)

还需要配置什么才能使其正常运行？

**- 更新 -**

使用 0.5.2 后，Requests Current 似乎稳定下来，这是一个显着的改进。这个测试已经运行了两个多小时，而在不到 30 分钟内，req 的电流将继续构建。

内存消耗仍有一些增加，但可能不是由于 Req 的 Current：

![请求当前 - 改进](../Images/c2ee4d8752a8cbffc4556530957b2e2e.png)

# javascript - Gradle 有序源集

> ID：11234592
> 
> 赞同：1
> 
> 时间：2012-06-27T20:47:34.590
> 
> 标签：javascript, gradle

我正在使用 Gradle 的 SourceSets 概念作为声明 JavaScript 源的一种方式，但是，我不太想办法让源以给定的顺序声明。我想要的是这样的：

```
javascript.source {
    custom {
        js {
            srcDir "src/js"
            include "file2.js", "file1.js"
        }
    }
} 
```

按照我声明的顺序提供文件集合。

我知道我可以用 FileTree 来做到这一点，但我觉得我缺少一些东西来使这个工作与声明 SourceSets 一起工作。

如果这是不可能的，我应该对订购的来源使用什么？

编辑：请注意，我需要依赖顺序，因为我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T12:29:57.433

我可以建议您尝试声明第二个`sourceSet`包含`file1.js`并使您的原件`sourceSet`依赖它。大致如此：

```
javascript.source {
    custom2 {
        js {
            srcDir "src/js2"
            include "file2.js"
        }
    }
    custom {
        js {
            srcDir "src/js"
            include "file1.js"
        }
        compileClasspath += custom2.outputs
    }
} 
```

不过，不确定您使用的插件是否可以做到这一点。但希望你明白这一点。

我猜在像 Gradle 这样的声明式系统中，指定顺序的唯一方法是声明不同部分之间的依赖关系，并让 Gradle 为您计算顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T11:56:56.000

根据定义，a `sourceSet`in gradle 是源文件和资源文件的逻辑分组。（不暗示排序）

例如，对于 Java 插件，这意味着当 gradle 尝试编译您的应用程序时，它知道在哪里可以找到编译过程的源文件。

我不确定您到底要完成什么。你在这里使用任何特殊的插件吗？为什么需要文件的特殊顺序？请解释您正在尝试做的事情的总体情况。我很确定这`sourceSet`对你没有帮助。

# php - 如何将 Google Trusted Store 徽章添加到 ASPdotnetstorefront

> ID：11234593
> 
> 赞同：0
> 
> 时间：2012-06-27T20:47:36.580
> 
> 标签：php, javascript, asp.net, html

如何将受信任的徽章脚本添加到 aspdotnetstorefront？Google 要求将以下代码放置在 ordersconfirmation 页面中，最有可能是 ordersconfirmation.aspx。如何访问页面的源代码，使用正确的变量将代码实现到站点？谢谢！

```
<!-- START Trusted Stores Order -->
<div id="gts-order" style="display:none;">

  <!-- start order and merchant information -->
  <span id="gts-o-id">MERCHANT_ORDER_ID</span>
  <span id="gts-o-domain">MERCHANT_ORDER_DOMAIN</span>
  <span id="gts-o-email">CUSTOMER_EMAIL</span>
  <span id="gts-o-country">CUSTOMER_COUNTRY</span>
  <span id="gts-o-currency">CURRENCY</span>
  <span id="gts-o-total">ORDER_TOTAL</span>
  <span id="gts-o-discounts">ORDER_DISCOUNTS</span>
  <span id="gts-o-shipping-total">ORDER_SHIPPING</span>
  <span id="gts-o-tax-total">ORDER_TAX</span>
  <span id="gts-o-est-ship-date">ORDER_EST_SHIP_DATE</span>
  <span id="gts-o-has-preorder">HAS_BACKORDER_PREORDER</span>
  <span id="gts-o-has-digital">HAS_DIGITAL_GOODS</span>
  <!-- end order and merchant information -->

  <!-- start repeated item specific information -->
  <!-- item example: this area repeated for each item in the order -->
  <span class="gts-item">
    <span class="gts-i-name">ITEM_NAME</span>
    <span class="gts-i-price">ITEM_PRICE</span>
    <span class="gts-i-quantity">ITEM_QUANTITY</span>
    <span class="gts-i-prodsearch-id">ITEM_PRODUCT_SEARCH_ID</span>
    <span class="gts-i-prodsearch-store-id">ITEM_PRODUCT_SEARCH_ACCOUNT_ID</span>
    <span class="gts-i-prodsearch-country">ITEM_PRODUCT_SEARCH_COUNTRY</span>
    <span class="gts-i-prodsearch-language">ITEM_PRODUCT_SEARCH_LANGUAGE</span>
  </span>
  <!-- end item 1 example -->
  <!-- end repeated item specific information -->

</div>
<!-- END Trusted Stores --> 
```

这里[链接到谷歌受信任的商店](https://support.google.com/trustedstoresmerchant/bin/answer.py?hl=en&answer=2609894&ctx=go#Section2)，以更好地了解它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:42:59.563

正确，您需要将这些插入到代码隐藏文件中。如果您有 C# 解决方案，您要查找的文件是 orderconfirmation.aspx.cs，如果是 VB，则为 orderconfirmation.aspx.vb。如果您还没有，我建议您设置一个本地 ASPDNS 解决方案，以便您可以在上传到您的 Web 服务器之前进行和测试代码更改。

注意：根据您的解决方案的设置方式，执行更改可能会有所不同（例如预编译站点），也可能无法执行（例如，如果您是 ChannelAdvisor 客户）。

# r - R根据频率表绘制箱线图

> ID：11234594
> 
> 赞同：1
> 
> 时间：2012-06-27T20:47:44.977
> 
> 标签：r, ggplot2

> **可能重复：**
> [geom_boxplot 与预先计算的值](https://stackoverflow.com/questions/10628847/geom-boxplot-with-precomputed-values)

我想知道如何将如下频率表转换为 ggplot2 的箱线图，以显示每个组的分布（组为 x 轴，频率为 y 轴）。它让我困扰了一段时间，因为我通过谷歌找到了箱线图示例，y 轴值都需要由每个数据点给出，而不是频率。

```
 Group1  Group2  …   Group60
1-100   8   5       15
101-200 12  7       21
201-300 15  11      33
301-400 25  12      35
401-500 40  15      45
501-600 43  18      55
…               

data=read.table(file="data.csv",sep=",",header=TRUE,row.names=1)
df=melt(data)
df$variable=factor(df$variable)
names(df)=c("Group","freq") 
```

然后 ？

# php - 通过php生成管道分隔文件

> ID：11234602
> 
> 赞同：1
> 
> 时间：2012-06-27T20:48:11.340
> 
> 标签：php, csv, fputcsv

我的代码使用 PHP 的 fputcsv 函数生成一个 txt 文件。

对于分隔符，我正在尝试使用 '|'

```
$query = mysql_query("SELECT email, emailSource FROM session WHERE is_complete='1' ORDER by sessionid ASC")

$filename= 'here.txt';

$fp = fopen( $filename,'w');

fputcsv($fp, array('Email address', 'Email Source'));

if(mysql_numrows($query) > 0) {

    while ($row = mysql_fetch_array($query, MYSQL_ASSOC)) {
            fputcsv($fp, array_values($row));
    }
}

fclose($fp);
$contents = file_get_contents($filename);
$contents = str_replace(",", "|", $contents);
file_put_contents($filename, $contents); 
```

我得到的结果都在一行上，而不是在单独的行上显示值，而且我在标题周围也有“”。

```
"Email address"|"Email Source"|blah@blah.com|hi| 
```

而不是这个：

```
Email address|Email Source|

blah@blah.com|hi| 
```

请有人告诉我我做错了什么。是因为我使用 fputcsv 并保存到 txt 文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:52:21.040

摆脱 str_replace / file_get_contents/ file_put_contents 块。而不是`fputcsv($fp, array('...'))`，使用`fputcsv($fp, array('...'), '|');`

# iphone - 是否可以在 iPhone sdk 上流式传输实时 Flash 视频？

> ID：11234606
> 
> 赞同：1
> 
> 时间：2012-06-27T20:48:29.173
> 
> 标签：iphone, flash, stream

如果您继续访问[http://www.africam.com/wildlife/tembe_webcam](http://www.africam.com/wildlife/tembe_webcam)，您可以看到他们的 Flash 格式的实时视频流。我需要知道是否可以在 iPhone 上播放该直播。如果可能的话，是否有任何我需要了解的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:03:51.467

是 FMS 4.5 支持流式传输到 iOS [http://www.adobe.com/products/flash-media-streaming.html](http://www.adobe.com/products/flash-media-streaming.html)

您可以试用 AWS FMS 5 即用即付[http://www.adobe.com/products/amazon-web-services.html](http://www.adobe.com/products/amazon-web-services.html)

编辑：你也有[http://www.wowza.com/](http://www.wowza.com/)

# sharepoint-2010 - 能否在 Azure 云上托管 Sharepoint 2010？

> ID：11234607
> 
> 赞同：0
> 
> 时间：2012-06-27T20:48:31.873
> 
> 标签：sharepoint-2010, azure

顾名思义，Sharepoint 2010 能否在 Azure 云上安装并成功运行？

我知道 Azure 曾经是无状态的，因此无法支持 Sharepoint，但最近的文章和帖子似乎表明 Mirosoft 已经解决了这个问题。

[http://www.theregister.co.uk/2012/06/27/microsoft_windows_azure_cloud_epiphany/](http://www.theregister.co.uk/2012/06/27/microsoft_windows_azure_cloud_epiphany/)

我检查了 Azure 网站并提到了 Sharepoint，但没有特别提到 2010 年，我想确保它是一个受支持的环境，没有任何问题或无法预料的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:52:47.747

随着 2012 年春季版本（您通过上面的链接了解），现在有一些虚拟机被持久化到 Windows Azure blob 中的磁盘上。SharePoint 2010 是在此环境中经过专门测试的应用程序之一。

请参阅[此支持页面](http://support.microsoft.com/kb/2721672)，其中明确指出了 SharePoint 2010（和其他软件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:59:45.083

[您可能会发现这篇关于在 Azure 中为 SharePoint 场创建 VM 实例的](http://blogs.technet.com/b/speschka/archive/2012/06/17/creating-an-azure-persistent-vm-for-an-isolated-sharepoint-farm.aspx)TechNet 文章很有帮助。

# python - 使用 Beautiful Soup 在 python 中解析网页

> ID：11234614
> 
> 赞同：8
> 
> 时间：2012-06-27T20:48:54.850
> 
> 标签：python, beautifulsoup, urllib

我在从网站获取数据时遇到了一些麻烦。网站源码在这里：

```
view-source:http://release24.pl/wpis/23714/%22La+mer+a+boire%22+%282011%29+FRENCH.DVDRip.XviD-AYMO 
```

有这样的东西：

> ## 电影资讯
> 
> Tytuł..................................: La mer à boire
> 
> Ocena..................................: IMDB - 6.3 /10 (24)
> 
> 产品..................................................: Francja
> 
> Gatunek.................................................：戏剧
> 
> Czas trwania.................................................：98 分钟。
> 
> 首映......................................: 22.02.2012 - Świat
> 
> Reżyseria..................................................：雅克·马约
> 
> 场景.......................................: Pierre Chosson, Jacques Maillot
> 
> Aktorzy..................................: Daniel Auteuil, Maud Wyler , Yann Trégouët, 阿兰·贝格尔

我想从这个网站获取数据以获得一个 Python 字符串列表：

```
[[Tytuł, "La mer à boire"]
[Ocena, "IMDB - 6.3/10 (24)"]
[Produkcja, Francja]
[Gatunek, Dramat]
[Czas trwania, 98 min.]
[Premiera, "22.02.2012 - Świat"]
[Reżyseria, "Jacques Maillot"]
[Scenariusz, "Pierre Chosson, Jacques Maillot"]
[Aktorzy, "Daniel Auteuil, Maud Wyler, Yann Trégouët, Alain Beigel"]] 
```

我使用 BeautifulSoup 编写了一些代码，但我不能再进一步了，我只是不知道从网站源代码中得到什么以及如何转换为字符串......请帮忙！

我的代码：

```
 # -*- coding: utf-8 -*-
#!/usr/bin/env python

import urllib2
from bs4 import BeautifulSoup

try :
    web_page = urllib2.urlopen("http://release24.pl/wpis/23714/%22La+mer+a+boire%22+%282011%29+FRENCH.DVDRip.XviD-AYMO").read()
    soup = BeautifulSoup(web_page)
    c = soup.find('span', {'class':'vi'}).contents
    print(c)
except urllib2.HTTPError :
    print("HTTPERROR!")
except urllib2.URLError :
    print("URLERROR!") 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T21:22:44.350

使用 BeautifulSoup 的秘诀是找到 HTML 文档的隐藏模式。例如，您的循环

```
for ul in soup.findAll('p') :
    print(ul) 
```

方向正确，但它会返回所有段落，而不仅仅是您要查找的段落。但是，您要查找的段落具有 class 的有用属性`i`。在这些段落中，可以找到两个跨度，一个与 class `i`，另一个与 class `vi`。我们很幸运，因为这些跨度包含您正在寻找的数据：

```
<p class="i">
    <span class="i">Tytuł............................................</span>
    <span class="vi">: La mer à boire</span>
</p> 
```

因此，首先获取给定类的所有段落：

```
>>> ps = soup.findAll('p', {'class': 'i'})
>>> ps
[<p class="i"><span class="i">Tytuł... <LOTS OF STUFF> ...pan></p>] 
```

现在，使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，我们可以生成一个对列表，其中每对包含段落中的第一个和第二个跨度：

```
>>> spans = [(p.find('span', {'class': 'i'}), p.find('span', {'class': 'vi'})) for p in ps]
>>> spans
[(<span class="i">Tyt... ...</span>, <span class="vi">: La mer à boire</span>), 
 (<span class="i">Ocena... ...</span>, <span class="vi">: IMDB - 6.3/10 (24)</span>),
 (<span class="i">Produkcja.. ...</span>, <span class="vi">: Francja</span>),
 # and so on
] 
```

现在我们有了跨度，我们可以从中获取文本：

```
>>> texts = [(span_i.text, span_vi.text) for span_i, span_vi in spans]
>>> texts
[(u'Tytu\u0142............................................', u': La mer \xe0 boire'),
 (u'Ocena.............................................', u': IMDB - 6.3/10 (24)'),
 (u'Produkcja.........................................', u': Francja'), 
  # and so on
] 
```

那些文本仍然不好，但很容易纠正它们。要从第一个中删除点，我们可以使用[`rstrip()`](http://docs.python.org/library/stdtypes.html#str.rstrip)：

```
>>> u'Produkcja.........................................'.rstrip('.')
u'Produkcja' 
```

`:`可以使用以下命令删除字符串[`lstrip()`](http://docs.python.org/library/stdtypes.html#str.lstrip)：

```
>>> u': Francja'.lstrip(': ')
u'Francja' 
```

要将其应用于所有内容，我们只需要另一个列表推导：

```
>>> result = [(text_i.rstrip('.'), text_vi.replace(': ', '')) for text_i, text_vi in texts]
>>> result
[(u'Tytu\u0142', u'La mer \xe0 boire'),
 (u'Ocena', u'IMDB - 6.3/10 (24)'),
 (u'Produkcja', u'Francja'),
 (u'Gatunek', u'Dramat'),
 (u'Czas trwania', u'98 min.'),
 (u'Premiera', u'22.02.2012 - \u015awiat'),
 (u'Re\u017cyseria', u'Jacques Maillot'),
 (u'Scenariusz', u'Pierre Chosson, Jacques Maillot'),
 (u'Aktorzy', u'Daniel Auteuil, Maud Wyler, Yann Tr&eacute;gou&euml;t, Alain Beigel'),
 (u'Wi\u0119cej na', u':'),
 (u'Trailer', u':Obejrzyj zwiastun')] 
```

就是这样。我希望这个循序渐进的例子可以让你更清楚地使用 BeautifulSoup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:15:35.920

这将为您提供您想要的列表，您必须编写一些代码来摆脱尾随的 '....' 并转换字符串。

```
 import urllib2
    from bs4 import BeautifulSoup

     try :
 web_page = urllib2.urlopen("http://release24.pl/wpis/23714/%22La+mer+a+boire%22+%282011%29+FRENCH.DVDRip.XviD-AYMO").read()
soup = BeautifulSoup(web_page)
LIST = []
for p in soup.findAll('p'):
    s = p.find('span',{ "class" : 'i' })
    t = p.find('span',{ "class" : 'vi' })
    if s and t:
        p_list = [s.string,t.string]
        LIST.append(p_list) 
```

除了 urllib2.HTTPError : print("HTTPERROR!") 除了 urllib2.URLError : print("URLERROR!")

# c# - 按第二列对 Windows.Forms.ListView 进行排序

> ID：11234617
> 
> 赞同：0
> 
> 时间：2012-06-27T20:49:09.253
> 
> 标签：c#, winforms, listview, sorting, icomparer

我想按第二列的内容（可以是“在线”或“离线”）对 ListView 项目进行排序。排序只会在代码中的一个特定位置进行，因此解决方案不必很灵活。不仅如此，它应该易于实现，并且不需要对应用程序的其余部分进行重大更改。

我试图让类实现 IComparer 并将其分配给 listView.ListViewItemSorter，但它对我不起作用。

代码示例：

```
class ChannelSorter : System.Collections.IComparer
{
    public int Compare(object a, object b)
    {
        if ((a as ListViewItem).SubItems[0].Text.CompareTo("Online") == 0)
            if ((b as ListViewItem).SubItems[0].Text.CompareTo("Online") == 0)
                return 0;
            else
                return -1;
        else if ((b as ListViewItem).SubItems[0].Text.CompareTo("Online") == 0)
            return 1;
        else
            return 0;
    }
}

// in constructor of Form1
listView1.ListViewItemSorter = new ChannelSorter(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:56:37.543

[您可以通过OrderBy](http://msdn.microsoft.com/fr-fr/library/system.linq.enumerable.orderby.aspx)方法使用 LINQ ：

我想您列表中的用户来自 User[] 数组或列表，或任何 Enumerable。然后，您只需使用 OrderBY 方法来获取一个新的有序列表：

```
var currentUsers = new List<User>();
// Fill your users
// Super happy fun sorting time!
var sortedUsers = currentUsers.OrderBy(user => user.State); 
```

其中 user.State 是他们的当前状态（在线、离线）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:00:43.403

你的函数应该只包含一行：

```
return (a as ListViewItem).SubItems[0].Text.CompareTo((b as ListViewItem).SubItems[0].Text) 
```

# silverlight - 绑定到自定义转换器的属性

> ID：11234618
> 
> 赞同：2
> 
> 时间：2012-06-27T20:49:14.800
> 
> 标签：silverlight

我写了一个转换器 BoolToStringConverter。转换器有两个属性 TrueString 和 FalseString。这是我在 XAML 中使用它的方式

```
<UserControl.Resources>
    <local:BooleanToStringConverter x:Key="BooleanToStringConverter" TrueString="{Binding Strings.Open, Source={StaticResource MyStrings}}"></local:BooleanToStringConverter>
</UserControl.Resources> 
```

这可以编译，但是在运行它时出现 xml 解析异常。如果我将 TrueString 属性的设置更改为 TrueString = "Open"，则一切正常。

这是正在使用的转换器：

```
<Button x:Name="MyButton" Content="{Binding Path=IsOpen, Converter={StaticResource BooleanToStringConverter}}" Command="{Binding MyCommand}" VerticalAlignment="Top" Style="{StaticResource MyStyle}" Margin="0,2,10,2"/> 
```

有什么想法有什么问题吗？我想做的就是将本地资源的属性设置为本地化值。

编辑这是我的转换器类

```
public class BooleanToStringConverter : IValueConverter
{
    public BooleanToStringConverter()
    {
    }

    public string TrueString
    {
        get;
        set;
    }

    public string FalseString
    {
        get;
        set;
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        bool boolValue = System.Convert.ToBoolean(value, CultureInfo.InvariantCulture);

        return boolValue ? TrueString : FalseString;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }     
} 
```

这是运行时异常消息：

System.Windows.dll 中出现“System.Windows.Markup.XamlParseException”类型的第一次机会异常

附加信息：设置属性“Optimize.Client.Presentation.BooleanToStringConverter.FalseString”引发异常。[行：18 位置：86]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:08:20.153

您不能绑定到`TrueString`and`FalseString`属性。从[MSDN 帮助](http://msdn.microsoft.com/en-us/library/cc221408%28v=VS.95%29.aspx#setting_properties_data_binding)：

> 为了成为绑定的目标，属性必须是依赖属性

您可以尝试为您的 xaml 使用绑定的 ConverterParameter 部分

```
<Button x:Name="MyButton" Content="{Binding Path=IsOpen, Converter={StaticResource BooleanToStringConverter}, ConverterParameter=Open}" 
        Command="{Binding MyCommand}" VerticalAlignment="Top" 
        Style="{StaticResource MyStyle}" Margin="0,2,10,2"/> 
```

您还可以使您的转换器不那么通用，只处理打开/关闭字符串。

另一种选择是让您的值转换器扩展 DependencyObject，并将您的属性转换为 DependencyProperties。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T16:46:22.543

您还可以像这样在 XAML 中设置公共属性：

```
<localHelpers:BoolToTextConverter x:Key="boolToTextConverter">
    <localHelpers:BoolToTextConverter.TrueText>
        Sent
    </localHelpers:BoolToTextConverter.TrueText>
    <localHelpers:BoolToTextConverter.FalseText>
        Not Sent
    </localHelpers:BoolToTextConverter.FalseText>
</localHelpers:BoolToTextConverter> 
```

完整的示例在我的博客文章[中。](http://blog.digitaltools.com/post/2012/07/20/Generic-Boolean-to-Text-Converter.aspx)

# php - Web 主机升级后 AJAX/PHP 不工作

> ID：11234620
> 
> 赞同：0
> 
> 时间：2012-06-27T20:49:30.753
> 
> 标签：php, ajax, apache

我的网络托管公司最近升级到 Apache 2.2.22 和 PHP 5.3.13，从那以后一段脚本将无法正常工作。该网页是一个无线电流媒体，现在从文本文件更新曲目信息的部分根本不显示。流媒体工作正常，其他第三方小部件也是如此。

这是显示专辑封面的脚本的一部分：

```
updateNowPlayingInfo = function() {
var d = new Date();
$.ajax( '/php_proxy_simple.php?url=playingnow.txt&_=' + d.getTime(), { 
    complete: function( jqXHR, textStatus) { console.log( 'RMX Player XHR completed: ' +textStatus ); },
    error: function( jqXHR, textStatus, errorThrown) { console.log( 'RMX Player XHR error:' + textStatus + ':' + errorThrown ); },
    xhr:  (window.ActiveXObject) ?
    function() {
            try {
                return new window.ActiveXObject("Microsoft.XMLHTTP");
            } catch(e) {}
        } :
        function() {
            return new window.XMLHttpRequest();
        }, 
    cache: true,
    type: 'GET',
    crossDomain: true,
    dataType: 'text',
    global: false, // @note was using false
    ifModified: true,
    success: function( data, textStatus, jqXHR ) {

        //alert( playingData );
        playingData =  data.split("\n");

        if ( playingData[2] && ! playingData[2].match( /no-image-no-ciu/ ) ) {
            //playingData[2] =  playingData[2].replace( 'SS110', 'AA280' ); // swap small image for medium
            //console.log( playingData[2] );
            playingData[2] =  playingData[2].replace( '_SL160_', '_SX200_' ); // swap small image for large
            $( "#nowplaying_album_cover img" ).attr( "src" ,  playingData[2] );
            $( "#nowplaying_album_cover").show();
            }
         else $( "#nowplaying_album_cover").attr("src" , playingData[2] );
         $( "#nowplaying_album_cover").show();
        },
    failure: function() { alert('failed to get play data') ; }
} ); 
```

和PHP代码：

```
 <?php
// PHP Proxy example for Yahoo! Web services. 
// Responds to both HTTP GET and POST requests

// Allowed hostname
define ('HOSTNAME', 'http://www.mysite.co/');

// Get the REST call path from the AJAX application
// Is it a POST or a GET?
ini_set( 'error_reporting', 0);
$path = ($_POST['url']) ? $_POST['url'] : $_GET['url'];
$url = HOSTNAME.$path.'?timestamp=' . time();

// Open the Curl session
$session = curl_init($url);

// If it's a POST, put the POST data in the body
if ($_POST['url']) {
    $postvars = '';
    while ($element = current($_POST)) {
        $postvars .= urlencode(key($_POST)).'='.urlencode($element).'&';
        next($_POST);
    }
    curl_setopt ($session, CURLOPT_POST, true);
    curl_setopt ($session, CURLOPT_POSTFIELDS, $postvars);
}

// Don't return HTTP headers. Do return the contents of the call
curl_setopt($session, CURLOPT_HEADER, false);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);

// Make the call
$response = curl_exec($session);

// possibly include expires header to bust aggresive caching  -expires=>â€™+1sâ€™
header('Content-Type: text/html;charset=utf-8');

echo $response;
curl_close($session);

?> 
```

我从原始日志文件中获取了这个：

“GET /playingnow.txt HTTP/1.1”304

不确定这是否相关。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T17:57:36.983

修复它，PHP文件的文件权限需要在0644。谢谢。

# javascript - 简单的 JavaScript 复选框验证

> ID：11234622
> 
> 赞同：15
> 
> 时间：2012-06-27T20:49:35.510
> 
> 标签：javascript, html, forms, validation

我通常使用 PHP，所以遗憾的是没有一些基本的 JS 原则。这就是我想要完成的全部——我已经看过很多关于这个主题的帖子，但它们通常超出了我的需要。

这是我的表格：

```
 <input type="checkbox" name="checkbox" value="check"  />
 <input type="submit" name="email_submit" value="submit" onclick="----??----"  /> 
```

复选框是一个简单的“我同意”。我希望按下提交按钮，并且仅在选中该复选框时才会提交。

事情是这样的：我想要一种简单的欺骗方式——没有方法——只是一些这种形式的内联代码（假设它不是太长？）。这不是一个公共页面，我只需要这种类型的验证快速简单的东西。如果未选中，它将抛出警报（）；如果它被选中，它将通过 php 通过 post 提交并照常进行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-27T20:59:50.777

你可以使用：

```
 if(!this.form.checkbox.checked)
{
    alert('You must agree to the terms first.');
    return false;
} 
```

（[演示页面](http://jsfiddle.net/plstand/Da5dh/)）。

```
<input type="checkbox" name="checkbox" value="check"  />
<input type="submit" name="email_submit" value="submit" onclick="if(!this.form.checkbox.checked){alert('You must agree to the terms first.');return false}"  /> 
```

*   从内联事件处理程序返回`false`将阻止默认操作发生（在这种情况下，提交表单）。
*   `!`是[布尔非运算符](https://en.wikipedia.org/wiki/Negation)。
*   `this`是提交按钮，因为它是事件处理程序附加到的元素。
*   `.form`是提交按钮所在的表单。
*   `.checkbox`是该表单中名为“复选框”的控件。
*   `.checked`如果复选框被选中，则为 true，如果未选中复选框，则为 false。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-13T08:29:21.230

现在不需要 jquery 或 php。像这里一样使用“必需”的 HTML5 输入属性

```
 <form>
        <p>
            <input class="form-control" type="text" name="email" />
            <input type="submit" value="ok" class="btn btn-success" name="submit" />
            <input type="hidden" name="action" value="0" />
        </p>
        <p><input type="checkbox" required name="terms">I have read and accept <a href="#">SOMETHING Terms and Conditions</a></p>
 </form> 
```

这将在选择加入复选框之前验证并阻止任何提交。语言独立的解决方案，因为它是由用户的 Web 浏览器生成的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T20:53:05.497

你可以这样做：

```
<form action="../" onsubmit="return checkCheckBoxes(this);">
    <p><input type="CHECKBOX" name="MyCheckbox" value="This..."> This...</p>
    <p><input type="SUBMIT" value="Submit!"></p>
</form>

<script type="text/javascript" language="JavaScript">
<!--
function checkCheckBoxes(theForm) {
    if (
    theForm.MyCheckbox.checked == false) 
    {
        alert ('You didn\'t choose any of the checkboxes!');
        return false;
    } else {    
        return true;
    }
}
//-->
</script> 
```

[http://lab.artlung.com/validate-checkbox/](http://lab.artlung.com/validate-checkbox/)

虽然不太易读恕我直言，但这可以在没有像这样的单独函数定义的情况下完成：

```
<form action="../" onsubmit="if (this.MyCheckbox.checked == false) { alert ('You didn\'t choose any of the checkboxes!'); return false; } else { return true; }">
    <p><input type="CHECKBOX" name="MyCheckbox" value="This..."> This...</p>
    <p><input type="SUBMIT" value="Submit!"></p>
</form> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T20:57:58.567

您可以执行以下操作：

```
<form action="/" onsubmit="if(document.getElementById('agree').checked) { return true; } else { alert('please agree'); return false; }">
    <input type="checkbox" name="checkbox" value="check" id="agree" />
    <input type="submit" name="email_submit" value="submit" />
</form>​ 
```

**这是一个工作演示 - [http://jsfiddle.net/Ccr2x/](http://jsfiddle.net/Ccr2x/)**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-16T07:49:31.103

```
var confirm=document.getElementById("confirm").value;
         if((confirm.checked==false)
         {
         alert("plz check the checkbox field");
         document.getElementbyId("confirm").focus();
         return false;
         } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-25T21:19:35.620

如果**复选框的 ID**为“ **Delete** ”，那么对于**提交按钮的“** **onclick** ”事件，javascript 函数可以如下所示：

 **```
html:
<input type="checkbox" name="Delete" value="Delete" id="Delete"></td>
<input type="button" value="Delete" name="delBtn" id="delBtn" onclick="deleteData()">

script:
<script type="text/Javascript">
    function deleteData() {
        if(!document.getElementById('Delete').checked){
            alert('Checkbox not checked');
            return false;
        }
</script> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-27T20:54:18.970

如果您的复选框的 ID 为“复选框”：

```
 if(document.getElementById('checkbox').checked == true){ // code here } 
```

高温高压

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-07-21T17:03:03.993

另一种简单的方法是创建一个函数并检查复选框是否被选中，然后使用 jQuery 禁用按钮。

HTML：

```
<input type="checkbox" id="myCheckbox" />
<input type="submit" id="myButton" /> 
```

JavaScript：

```
var alterDisabledState = function () {

var isMyCheckboxChecked = $('#myCheckbox').is(':checked');

     if (isMyCheckboxChecked) {
     $('myButton').removeAttr("disabled");
     } 
     else {
             $('myButton').attr("disabled", "disabled");
     }
} 
```

现在，您有一个按钮，在他们选中复选框之前，该按钮处于禁用状态，现在您获得了更好的用户体验。不过，我会确保您仍然进行服务器端验证。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-23T14:18:15.340

`validate()`另一种简单的方法是在表单加载和单击提交按钮时创建和调用函数。通过使用`checked`属性，我们检查复选框是否被选中。 有一个用于访问第一个值（即男性）`cbox[0]`的索引`0``name="gender"`

您可以执行以下操作：

```
function validate() {
  var cbox = document.forms["myForm"]["gender"];
  if (
    cbox[0].checked == false &&
    cbox[1].checked == false &&
    cbox[2].checked == false
  ) {
    alert("Please Select Gender");
    return false;
  } else {
    alert("Successfully Submited");
    return true;
  }
}
```

```
<form onload="return validate()" name="myForm">
  <input type="checkbox" name="gender" value="male"> Male

  <input type="checkbox" name="gender" value="female"> Female

  <input type="checkbox" name="gender" value="other"> Other <br>

  <input type="submit" name="submit" value="Submit" onclick="validate()">
</form>
```

**演示：** [CodePen](https://codepen.io/aditya149/pen/vzOood)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-08T06:34:23.603

通过 id 定位它，然后使用以下代码：

```
function check(){
    if(document.getElementById('yourid').checked
    {
        return true;
    }
    else
    {
        alert ("checkbox not checked"); 
        return false;
    }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-09-13T10:03:35.857

```
var testCheckbox = document.getElementById("checkbox");  
if (!testCheckbox.checked) {
  alert("Error Message!!");
}
else {
  alert("Success Message!!");
} 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2013-04-25T11:08:26.987

伙计们，您可以很容易地进行这种验证。只是您必须跟踪复选框的 ID 或名称。您可以静态或动态地执行此操作。

对于静态，您可以使用复选框的硬编码 id，对于动态，您可以将字段的名称用作数组并创建一个循环。

请检查以下链接。你会很容易明白我的意思。

[http://expertsdiscussion.com/checkbox-validation-using-javascript-t29.html](http://expertsdiscussion.com/checkbox-validation-using-javascript-t29.html)

谢谢**

# .net - 在特定情况下，ASP.NET MVC WebGrid 没有正确地将当前参数传递给分页链接

> ID：11234623
> 
> 赞同：2
> 
> 时间：2012-06-27T20:49:38.520
> 
> 标签：.net, asp.net-mvc-3, webgrid

`WebGrid`分页链接在所有情况下都能正常工作，除了一个（我注意到）。

`CheckBoxFor`在 MVC 中使用时，它会为同一个字段创建一个`input[type=hidden]`和一个`input[type=check-box]`，以便它可以处理状态。因此，如果您有一个名为的字段`X`并在方法中提交您的表单`GET`，您最终会得到一个如下所示的 URL：

> [http://foo.com?X=false&X=true](http://foo.com?X=false&X=true)

默认模型绑定器可以理解这些多个实例操作系统`X`并找出它的价值。

当您尝试对`WebGrid`. 它的行为是尝试捕获当前请求参数并在分页链接中重新传递它们。但是，由于不止一个`X`，它将通过`X=false,true`而不是预期的`X=false`或`X=false&X=true`

这是一个问题，因为`X=false,true`无法正确绑定。它将在动作开始之前触发模型绑定器中的异常。

有什么办法可以解决吗？

**编辑：**

这似乎是一个非常具体的问题，但事实并非如此。几乎每个带有复选框的搜索表单都会破坏 WebGrid 分页。（如果您使用的是 GET）

**编辑2：**

我认为我唯一的两个选择是：

*   构建我自己的 WebGrid 分页器，它在为分页链接传递参数时更聪明
*   构建我自己的理解`false,true`为有效的布尔模型绑定器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:06:32.317

如果其他人遇到所描述的问题，您可以使用自定义模型绑定器解决此问题，如下所示：

```
public class WebgridCheckboxWorkaroundModelBinder : DefaultModelBinder
{
    protected override void BindProperty(ControllerContext controllerContext, ModelBindingContext bindingContext, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
        if (propertyDescriptor.PropertyType == typeof (Boolean))
        {
            var value = bindingContext.ValueProvider.GetValue(propertyDescriptor.Name);
            if (value.AttemptedValue == "true,false")
            {
                PropertyInfo prop = bindingContext.Model.GetType().GetProperty(propertyDescriptor.Name, BindingFlags.Public | BindingFlags.Instance);
                if (null != prop && prop.CanWrite)
                {
                    prop.SetValue(bindingContext.Model, true, null);
                }
                return;
            }
        }

        base.BindProperty(controllerContext, bindingContext, propertyDescriptor);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T17:31:20.233

从 DefaultModelBinder 继承的另一种方法是专门为可为空的布尔值实现 IModelBinder 接口。

```
internal class BooleanModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        // Get the raw attempted value from the value provider using the ModelName
        var param = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        if (param != null)
        {
            var value = param.AttemptedValue;
            return value == "true,false";
        }
        return false;
    }
} 
```

然后，您可以将模型绑定添加到 Global.asax 或将其添加到参数中，如下所示：

```
public ActionResult GridRequests([ModelBinder(typeof(BooleanModelBinder))]bool? IsShowDenied, GridSortOptions sort, int? page)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-15T13:29:56.270

对于那些想在 Dan 的解决方案中实现自定义模型绑定器但不确定如何实现的人。

您必须在 Global.asax 文件中注册模型绑定器：

```
protected void Application_Start()
    {
        ModelBinders.Binders.Add(typeof(HomeViewModel), new WebgridCheckboxWorkaroundModelBinder());
    } 
```

并在您的操作中指定其用途：

```
public ActionResult Index([ModelBinder(typeof(WebgridCheckboxWorkaroundModelBinder))] HomeViewModel viewModel)
    {
        //code here
        return View(viewModel);
    } 
```

# asp.net - 更新面板中的 2 个 asp 面板控件

> ID：11234626
> 
> 赞同：1
> 
> 时间：2012-06-27T20:50:22.787
> 
> 标签：asp.net

我在更新面板中保留了 2 个 asp 面板控件（带有文本框和按钮），因此我希望一次只显示 1 个。当我点击按钮时，下一个 asp 面板应该是可见的，旧的 asp 面板隐藏了。我无法弄清楚..这是代码...

```
<asp:UpdatePanel ID="updatepnlSSN" ChildrenAsTriggers="false" runat="server" UpdateMode="Conditional">
  <ContentTemplate>
     <asp:Panel ID="pnlSSNLookup" runat="server" BackColor="#EEE6DF" BorderColor="#274F73"
                            BorderStyle="Outset">
        <table>
           <tr>
            <td colspan="3">
   <asp:Label ID="lblMsg" runat="server" ForeColor="#713C2C"></asp:Label>
            </td>
           </tr>
           <tr>
            <td>
   <asp:Label ID="lblStudentID" runat="server" Text="State Student ID:" ForeColor="#274F73" ToolTip="State Student ID Label"></asp:Label>
            </td
            <td>
 &nbsp;&nbsp;&nbsp;
   <asp:TextBox ID="txtStudentID" runat="server" ToolTip="Enter the student's state ID number" AccessKey="i" TabIndex="1"></asp:TextBox>
            </td>
            <td>
   <asp:RegularExpressionValidator ID="valStudentID" runat="server" ControlToValidate="txtStudentID" ErrorMessage="Please enter numeric only" ValidationExpression="[0-9]+" ForeColor="#713C2C" Display="Dynamic">
</asp:RegularExpressionValidator>
<asp:RequiredFieldValidator ID="valStdntID" runat="server" ControlToValidate="txtStudentID" Display="Dynamic" ErrorMessage="Please enter a State Student ID" ForeColor="#713C2C"></asp:RequiredFieldValidator>
           </td>
         </tr>
         <tr>
           <td>
 <asp:Label ID="lblFName" runat="server" Text="Student Legal First Name:" ForeColor="#274F73" ToolTip="First Name Label"></asp:Label>
           <td>
           <td>
&nbsp;&nbsp;&nbsp;
 <asp:TextBox ID="txtFName" runat="server" AccessKey="f" TabIndex="2" ToolTip="Enter the Student's First Name"></asp:TextBox>
          </td>
                                    <td>
   <asp:RequiredFieldValidator ID="valFirstName" runat="server" ControlToValidate="txtFName" Display="Dynamic" ErrorMessage="Please enter the student's first name." ForeColor="#713C2C"></asp:RequiredFieldValidator>
          </td>
        </tr>
        <tr>
          <td>
   <asp:Label ID="lblDOB" runat="server" ForeColor="#274F73" Text="Student Date of Birth </br> (mm/dd/yyyy)" ToolTip="STudent's date of birth label"></asp:Label>
          </td>
          <td>
 <div style="position: relative;">
 &nbsp;&nbsp;&nbsp;
  <asp:TextBox ID="txtDOB" runat="server" AccessKey="d" TabIndex="3" ToolTip="Enter the student's date of birth"></asp:TextBox>
  <cc1:CalendarExtender ID="txtDOB_CalendarExtender" runat="server" Enabled="True" TargetControlID="txtDOB" PopupPosition="Right" Format="MM/dd/yyyy">
    </cc1:CalendarExtender>
     </div>
                                    </td>
                                    <td>
 <asp:RangeValidator ID="RangeValidator1" runat="server" ControlToValidate="txtDOB" ErrorMessage="Please enter a valid date:  mm/dd/yyyy" ForeColor="#713C2C" MaximumValue="01/01/2075" MinimumValue="01/01/1970" Type="Date" Display="Dynamic"></asp:RangeValidator>
  <asp:RequiredFieldValidator ID="valStudentDOB" runat="server" ControlToValidate="txtDOB" Display="Dynamic" ErrorMessage="Please enter the student's date of birth" ForeColor="#713C2C"></asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td>
 <asp:Button ID="btnSearchSSN" runat="server" Text="Search" AccessKey="s" TabIndex="4" ToolTip="Begin student search" />
                                    </td>
                                </tr>
                            </table>
                        </asp:Panel>
                        </td> </tr>
                        <tr>
                            <td>
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 0 10px 0 10px">
 <asp:Panel ID="pnlSSNEntry" runat="server" BackColor="#EEE6DF" BorderColor="#274F73" BorderStyle="Outset" Visible="False" Height="110px">
   <table align="left">
                                        <tr>
           <td colspan="3">
   <asp:Label ID="lblSSnText" runat="server" ForeColor="#274F73" Text="Please enter the SSN for:  "></asp:Label>
   <asp:Label ID="lblSSNName" runat="server" ForeColor="#274F73"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
   <asp:Label ID="lblSSNSubmitMsg" runat="server" ForeColor="#713C2C"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
   <asp:Label ID="lblSSN0" runat="server" ForeColor="#274F73" Text="Social Security Number:   "></asp:Label>
                                            </td>
                                            <td>
  &nbsp;&nbsp;&nbsp;
   <asp:TextBox ID="txtArea" runat="server" AccessKey="a" MaxLength="3" TabIndex="5" ToolTip="Enter the student's SSN area number" Width="29px"></asp:TextBox>
 &nbsp;&nbsp;
     <asp:TextBox ID="txtGroup" runat="server" AccessKey="g" MaxLength="2" TabIndex="6" ToolTip="Enter the student's SSN group number" Width="22px"></asp:TextBox>
                                                &nbsp;&nbsp;
    <asp:TextBox ID="txtSerial" runat="server" AccessKey="r" MaxLength="4" TabIndex="7" ToolTip="Enter the student's SSN serial number" Width="35px"></asp:TextBox>
                                            </td>
                                            <td>
   <asp:Label ID="lblSSNError" runat="server" ForeColor="#713C2C" Text="Please enter a valid Social Security Number" Visible="False"></asp:Label>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                &nbsp;
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
     <asp:Button ID="btnSSN" runat="server" Text="Submit SSN" AccessKey="n" TabIndex="8" ToolTip="Submit the student's SSN" />
                                            </td>
                                        </tr>
                                    </table>
                                </asp:Panel>
                    </ContentTemplate>
                    <Triggers>
   <asp:AsyncPostBackTrigger ControlID="btnSearchSSN" EventName="Click" />
   <asp:AsyncPostBackTrigger ControlID="btnSSN" EventName="Click" />
                    </Triggers>
                </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:53:20.017

您最好在 UpdatePanel 中使用 MultiView 并根据按钮单击设置 ActiveView。这是一个[教程](http://asp-net-example.blogspot.com/2008/10/multiview-example-how-to-use-multiview.html)

简而言之，MultiView 是面板的包装器。它包含可以激活的 View 对象的集合。在任何给定时间只能看到一个视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:54:05.063

[使用ASP:MultiView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.multiview.aspx)会不会更好。然后您一次显示一个视图，它带有与之关联的互斥绑定。

```
<asp:MultiView>
    <asp:View>
       View 1
    </asp:View>
     <asp:View>
       View 2
    </asp:View>
</asp:MultiView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:19:50.077

上面的答案提出了解决上述问题的一种很好的方法，但如果你真的想这样做，而不是尝试在按钮点击事件上添加代码，比如

```
protected void btnSearchSSN_Click(object sender, EventArgs e)
  {
      pnlSSNLookup.Visible = false;
      this.pnlSSNEntry.Visible = true;
  }
  protected void btnSSN_Click(object sender, EventArgs e)
  {
      pnlSSNEntry.Visible = false;
      this.pnlSSNLookup.Visible = true;

  } 
```

希望它会给您所需的结果。

# autoit - AutoIt：在鼠标指针下查找窗口

> ID：11234628
> 
> 赞同：3
> 
> 时间：2012-06-27T20:50:29.853
> 
> 标签：autoit

我正在使用 AutoIt3，我需要一种方法让用户选择一个窗口。在我看来，最快的方法是让它们指向一个窗口。所以问题是，我如何查看鼠标指针下方的窗口？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-30T01:00:57.993

我从我为选择屏幕上的区域而放置的一些代码中推断出这一点。这只会弹出鼠标下方的窗口标题（按 Escape 退出循环）：

```
#include <WinAPI.au3>
#include <Misc.au3>

Func _WindowFromPoint($iX,$iY)
    Local $stInt64,$aRet,$stPoint=DllStructCreate("long;long")
    DllStructSetData($stPoint,1,$iX)
    DllStructSetData($stPoint,2,$iY)
    $stInt64=DllStructCreate("int64",DllStructGetPtr($stPoint))
    $aRet=DllCall("user32.dll","hwnd","WindowFromPoint","int64",DllStructGetData($stInt64,1))
    If @error Then Return SetError(2,@error,0)
    If $aRet[0]=0 Then Return SetError(3,0,0)
    Return $aRet[0]
EndFunc

Local $hControl, $hWin, $hOldWin, $aMousePos
$hOldWin = ""
While Not _IsPressed("1B")
    $aMousePos = MouseGetPos()
    $hControl=_WindowFromPoint($aMousePos[0],$aMousePos[1])
    ; Since _WindowFromPoint() can return 'sub' windows, or control handles, we should seek the owner window
    $hWin=_WinAPI_GetAncestor($hControl,2)
    If $hWin <> $hOldWin Then
        TrayTip("Window Info","Window under mouse = " & WinGetTitle($hWin), 1)
        $hOldWin = $hWin
    EndIf
    Sleep(10)
WEnd 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T10:41:02.107

这是一个完整的全屏 GUI 示例，显示实际屏幕和鼠标指针下方窗口周围的边框。该函数用于将窗口的标题写入控制台。

```
#include <Misc.au3>
#include <Array.au3>
#include <GDIPlus.au3>
#include <ScreenCapture.au3>
#include <WindowsConstants.au3>

HotKeySet("{Esc}", "_Exit")
Func _Exit()
    Exit 0
EndFunc

Global $xPosReminder, $yPosReminder
$dll = DllOpen("user32.dll")

$allWindows = WinList()
; exclude invisible windows from winlist
Dim $windows[1]
$windows[0] = 0
For $i = 1 to $allWindows[0][0]
    ; only fetches visible windows
    If BitAnd(WinGetState($allWindows[$i][1]), 2) Then;AND $allWindows[$i][0] <> "" Then
        ReDim $windows[$windows[UBound($windows) - 1] + 2]
        $windows[UBound($windows) - 1] = $windows[UBound($windows) - 2] + 1
        $windows[UBound($windows) - 2] = $allWindows[$i][1]
    EndIf
Next
ReDim $windows[$windows[UBound($windows) - 1]]
_ArrayReverse($windows)

; capture screen without cursor
$pos = MouseGetPos()
MouseMove(@DesktopWidth, @DesktopHeight, 0)
$hBitmap = _ScreenCapture_Capture ("")
MouseMove($pos[0], $pos[1], 0)

; create and show new fullscreen gui
$hGUI = GUICreate("", @DesktopWidth, @DesktopHeight, 0, 0, $WS_POPUP)
GUISetState(@SW_SHOW)

; Initialize GDI+ library
_GDIPlus_StartUp()
$hImage = _GDIPlus_BitmapCreateFromHBITMAP ($hBitmap)
$hGraphics = _GDIPlus_GraphicsCreateFromHWND ($hGUI)
$hPen = _GDIPlus_PenCreate(0xFFFF0000, 3, 2)
$iX = _GDIPlus_ImageGetWidth($hImage)
$iY = _GDIPlus_ImageGetHeight($hImage)

_GDIPlus_GraphicsDrawImage($hGraphics, $hImage, 0, 0)

Global $oldWindow = 0
; Wait for Click
While True
    If _IsPressed("01", $dll) Then ; left mouse button
        $xPos = MouseGetPos(0)
        $yPos = MouseGetPos(1)
        ExitLoop
    EndIf
    If __MouseMoved() Then
        ; Erzeugt eine Kopie einer 24 bit Bitmap
        $hClone = _GDIPlus_BitmapCloneArea($hImage, 0, 0, $iX, $iY, $GDIP_PXF24RGB)

        $currentWindow = __GetWindowByMousePosition($windows, MouseGetPos(0), MouseGetPos(1))
        If $currentWindow <> $oldWindow Then
            $windowPosition = WinGetPos($currentWindow)

            ; reduce position and size to desktop space
            $windowPosition[0] = _Iif($windowPosition[0] < 0, 0, $windowPosition[0])
            $windowPosition[1] = _Iif($windowPosition[1] < 0, 0, $windowPosition[1])
            $windowPosition[2] = _Iif($windowPosition[2]  > @DesktopWidth, @DesktopWidth, $windowPosition[2])
            $windowPosition[3] = _Iif($windowPosition[3] > @DesktopHeight, @DesktopHeight, $windowPosition[3])

            _GDIPlus_GraphicsDrawImage($hGraphics, $hClone, 0, 0)
            _GDIPlus_GraphicsDrawRect($hGraphics, $windowPosition[0], $windowPosition[1], $windowPosition[2], $windowPosition[3], $hPen)
            $oldWindow = $currentWindow
        EndIf
    EndIf
    Sleep(1)
WEnd

; Free Ressources
_GDIPlus_PenDispose($hPen)
_GDIPlus_BitmapDispose($hImage)
_GDIPlus_GraphicsDispose($hGraphics)
_WinAPI_DeleteObject($hBitmap)
_GDIPlus_ShutDown()
DllClose($dll)

GUISetState(@SW_HIDE)

Func __GetWindowByMousePosition($windows, $xPos, $yPos)
    Local $currentWindow = 0
    For $i = 0 to UBound($windows) - 1
        $pos = WinGetPos($windows[$i])
        If $xPos >= $pos[0] AND $xPos <= $pos[0] + $pos[2] AND $yPos >= $pos[1] AND $yPos <= $pos[1] + $pos[3] Then
            $currentWindow = $windows[$i]
        EndIf
    Next
    Return $currentWindow
EndFunc

Func __MouseMoved()
    Local $actualPos = MouseGetPos()
    If $xPosReminder <> $actualPos[0] OR $yPosReminder <> $actualPos[1] Then
        $xPosReminder = $actualPos[0]
        $yPosReminder = $actualPos[1]
        Return True
    Else
        Return False
    EndIf
EndFunc

ConsoleWrite(WinGetTitle(__GetWindowByMousePosition($windows, $xPos, $yPos)) & @CR) 
```

# iphone - NSSet如何随机提取对象？

> ID：11234630
> 
> 赞同：8
> 
> 时间：2012-06-27T20:50:38.203
> 
> 标签：iphone, objective-c, ios, nsset

我不确定 NSSet 是如何`anyObject`工作的。“返回的对象是在集合方便时选择的”（来自[NSSet 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSSet)）是什么意思？

此外，我怎样才能最好地从 NSSet 中随机提取对象？我正在考虑进入`allObjects`一个数组，然后`myArray[arc4random_uniform(x)]`其中 x 是数组中的对象数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T20:56:35.120

引用[NSSet 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSet_Class/Reference/Reference.html)：

> 返回的对象是在集合方便时选择的——不保证选择是随机的。

对于“随机性”，将 转换`NSSet`为`NSArray`using `[theSet allObjects]`。
接下来，使用 随机选择任何对象`arc4random_uniform()`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-27T20:56:25.037

通常，`NSSet`实例是通过`CFHash`支持创建的，因此它们几乎总是返回该哈希中的第一个对象，因为它是查找速度最快的。它说的原因

> 返回的对象是在集合方便时选择的——不保证选择是随机的。

是因为您并不总是知道它将有一个支持数组。就您所知，`NSSet`您拥有的实例有一个`NSDictionary`支持它，或一些其他类似的数据结构。

因此，总而言之，如果您需要 a 中的随机对象`NSSet`，请不要使用`-anyObject`，而是使用`allObjects:`然后打乱该数组。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T20:56:06.183

文档显示`anyObject`返回

> 集合中的一个对象，如果集合不包含任何对象，则为 nil。返回的对象是在集合方便时选择的——不保证选择是随机的。

很可能有一些确定性算法在起作用。

正如您所建议的，最可靠的做法是`NSArray`使用该`NSSet`方法创建一个`allObjects`，然后从中选择一个随机元素，`arc4random() % N`其中的`N`是。`count``NSArray`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-15T06:04:02.633

我使用 arc4random() 和两个可变数组来获取一组随机且唯一的对象：

```
NSMutableArray *selectionPool = ...;

int numberOfObjectsToSelect = x;

NSMutableArray *selectedObjects = [[NSMutableArray alloc] initWithCapacity:numberOfObjectsToSelect];

int modulus = selectionPool.count - 1;

for (int i = 0; i < numberOfObjectsToSelect; i++) {

    int j = arc4random() % (modulus--);
    [selectedObjects addObject:[selectionPool objectAtIndex:j]];
    [selectionPool removeObjectAtIndex:j];

} 
```

我不确定它对于大型集合的效率有多高，但它对我来说适用于数量在 100 多个对象中的集合。

# haskell - 使用 Join() 而不是 Bind() 的 Monad

> ID：11234632
> 
> 赞同：70
> 
> 时间：2012-06-27T20:50:45.997
> 
> 标签：haskell, monads

Monad 通常由`return`和轮流解释`bind`。但是，我认为您也可以`bind`根据`join`（和`fmap`？）

在缺乏一流功能的编程语言中，`bind`使用起来非常尴尬。`join`，另一方面，看起来很容易。

但是，我不完全确定我是否了解其`join`工作原理。显然，它具有 [Haskell] 类型

```
加入 :: Monad m => m (mx) -> mx

```

对于 list monad，这是微不足道的`concat`。但是对于一般的 monad，这种方法实际上在操作上做了什么？我看到了它对类型签名的作用，但我试图弄清楚如何用 Java 或类似语言编写类似的东西。

（实际上，这很容易：我不会。因为泛型被破坏了。;-) 但原则上问题仍然存在......）

* * *

哎呀。以前好像有人问过这个问题：

[Monad 连接函数](https://stackoverflow.com/questions/3382210/monad-join-function)

`return`有人可以用,`fmap`和勾勒出一些常见单子的实现`join`吗？（即，根本不提`>>=`。）我想也许这可能有助于它沉入我愚蠢的大脑......

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-06-28T09:46:51.680

在不深入隐喻的情况下，我是否建议将典型的 monad 解读`m`为“产生 a 的策略”，因此类型`m value`是一流的“产生价值的策略”。计算或外部交互的不同概念需要不同类型的策略，但一般概念需要一些规则结构才能有意义：

*   如果你已经有了一个值，那么你就有了一个策略来产生一个值`return :: v -> m v`（
*   如果您有一个将一种价值转换为另一种价值的功能，您可以将其提升到策略（`fmap :: (v -> u) -> m v -> m u`），只需等待策略交付其价值，然后对其进行转换；
*   如果你有一个策略来产生一个产生价值的策略，那么你可以构造一个策略来产生一个价值（`join :: m (m v) -> m v`），它遵循外部策略直到它产生内部策略，然后一直遵循那个内部策略直到一个价值。

举个例子：叶子标记的二叉树......

```
data Tree v = Leaf v | Node (Tree v) (Tree v) 
```

...表示通过抛硬币来生产东西的策略。如果策略是`Leaf v`，那就是你的`v`；如果策略是，如果硬币显示“正面”，则`Node h t`您掷硬币并继续策略，如果它是“反面”。`h``t`

```
instance Monad Tree where
  return = Leaf 
```

策略生成策略是一棵带有树标签叶子的树：代替每个这样的叶子，我们可以嫁接给它贴标签的树......

```
 join (Leaf tree) = tree
  join (Node h t)  = Node (join h) (join t) 
```

...当然我们有`fmap`它只是重新标记叶子。

```
instance Functor Tree where
  fmap f (Leaf x)    = Leaf (f x)
  fmap f (Node h t)  = Node (fmap f h) (fmap f t) 
```

这是一个策略来产生一个策略来产生一个`Int`。

![树的树](../Images/a64dc3f1403e9fbd307f45adae6465f6.png)

掷硬币：如果是“正面”，则掷另一枚硬币以在两种策略之间做出决定（分别为“掷硬币产生 0 或产生 1”或“产生 2”）；如果是“反面”，则产生第三个（“掷硬币产生 3 或掷硬币产生 4 或 5”）。

这显然`join`是为了制定一个产生`Int`.

![在此处输入图像描述](../Images/ba353e72f186362e00e6e4870c6bd207.png)

我们正在利用的是这样一个事实，即“产生价值的策略”本身可以被视为一种价值。在 Haskell 中，将策略嵌入为值是沉默的，但在英语中，我使用引号来区分使用策略和仅仅谈论它。操作员表示策略“`join`以某种方式产生然后遵循策略”，或者“如果你被*告知*一个策略，你就可以*使用*它”。

（元。我不确定这种“策略”方法是否是一种适当的通用方式来考虑单子和值/计算的区别，或者它是否只是另一个糟糕的隐喻。我确实发现叶子标记的树状类型很有用直觉的来源，这也许并不奇怪，因为它们是*自由*的单子，具有足够的结构来成为单子，但仅此而已。）

PS“绑定”的类型

```
(>>=) :: m v -> (v -> m w) -> m w 
```

说“如果你有一个策略来产生 a `v`，并且对于每个 va 后续策略来产生 a `w`，那么你就有一个策略来产生 a `w`”。我们如何才能捕捉到`join`呢？

```
mv >>= v2mw = join (fmap v2mw mv) 
```

我们可以重新标记我们的`v`生产策略，通过`v2mw`生产而不是每个`v`值来生成后续的`w`生产策略——准备好了`join`！

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-27T21:42:27.267

```
join = concat -- []
join f = \x -> f x x -- (e ->)
join f = \s -> let (f', s') = f s in f' s' -- State
join (Just (Just a)) = Just a; join _ = Nothing -- Maybe
join (Identity (Identity a)) = Identity a -- Identity
join (Right (Right a)) = Right a; join (Right (Left e)) = Left e; 
                                  join (Left e) = Left e -- Either
join ((a, m), m') = (a, m' `mappend` m) -- Writer
-- N.B. there is a non-newtype-wrapped Monad instance for tuples that
-- behaves like the Writer instance, but with the tuple order swapped
join f = \k -> f (\f' -> f' k) -- Cont 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-28T17:15:25.320

调用会产生值，因此使用它来取回值是一件*很自然的事情*。`fmap (f :: a -> m b) (x ::`**`m`**`a)``(y ::`**`m`**`(m b))`*`join``(z :: m b)`*

 *然后 bind 被简单地定义为`bind ma f = join (fmap f ma)`，从而实现了多样性函数的[Kleisly 组合](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Monad.html#v:-62--61--62-)`(:: a -> m b)`性，这就是它的真正意义所在：

```
ma `bind` (f >=> g) = (ma `bind` f) `bind` g              -- bind = (>>=)
                    = (`bind` g) . (`bind` f) $ ma 
                    = join . fmap g . join . fmap f $ ma 
```

所以，有了`flip bind = (=<<)`，[我们有](https://stackoverflow.com/questions/34545818/is-monad-bind-operator-closer-to-function-composition-chaining-or-functi/34561605#34561605)

```
 ((g <=< f) =<<)  =  (g =<<) . (f =<<)  =  join . (g <$>) . join . (f <$>) 
```

[![克莱斯利组成](../Images/69c072b224ef63d191c9a3f6d8d2facd.png)](https://i.stack.imgur.com/G5uCl.png)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-06-28T20:30:59.877

好的，所以回答你自己的问题并不是一个很好的形式，但我会记下我的想法，以防它启发其他人。（我对此表示怀疑...）

如果一个 monad 可以被认为是一个“容器”，那么两者`return`都有`join`非常明显的语义。`return`生成一个单元素容器，并将`join`容器的容器变成单个容器。这没什么难的。

所以让我们专注于更自然地被认为是“动作”的单子。在这种情况下，`m x`是某种动作，`x`当你“执行”它时会产生一个类型的值。`return x`没有什么特别的，然后产生`x`. `fmap f`接受一个产生 的动作`x`，并构造一个计算`x`然后应用`f`到它的动作，并返回结果。到目前为止，一切都很好。

很明显，如果`f`它自己产生一个动作，那么你最终得到的是`m (m x)`. 也就是说，一个计算另一个动作的动作。`>>=`在某种程度上，这可能比采取行动的函数和“产生行动的函数”等更容易让你思考。

所以，从逻辑上讲，它似乎`join`会运行第一个动作，执行它产生的动作，然后运行它。（或者更确切地说，`join`如果你想分裂头发，会返回一个执行我刚才描述的操作。）

这似乎是中心思想。要实现`join`，您要运行一个动作，然后它会为您提供另一个动作，然后您运行它。（无论“运行”对这个特定的 monad 意味着什么。）

鉴于这种见解，我可以尝试编写一些`join`实现：

```
join Nothing = Nothing
join (Just mx) = mx 
```

如果外部动作是`Nothing`，则返回`Nothing`，否则返回内部动作。再说一次，`Maybe`它更像是一个容器而不是一个动作，所以让我们试试别的东西......

```
newtype Reader s x = Reader (s -> x)

join (Reader f) = Reader (\ s -> let Reader g = f s in g s) 
```

那是……无痛的。A`Reader`实际上只是一个接受全局状态的函数，然后才返回其结果。因此，要取消堆栈，您将全局状态应用于外部操作，该操作返回一个新的`Reader`. 然后，您也将状态应用于此内部函数。

在某种程度上，它可能比通常的方式*更容易：*

```
Reader f >>= g = Reader (\ s -> let x = f s in g x) 
```

现在，哪个是 reader 函数，哪个是计算下一个 reader 的函数......？

现在让我们试试旧的`State`单子。这里每个函数都将初始状态作为输入，但也会返回一个新状态及其输出。

```
data State s x = State (s -> (s, x))

join (State f) = State (\ s0 -> let (s1, State g) = f s0 in g s1) 
```

那不是太难。它基本上是运行然后运行。

我现在要停止打字了。随时指出我的示例中的所有故障和错别字... :-/

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-06-28T05:04:00.467

我发现许多关于 monad 的解释说“你不必了解范畴论，真的，只要把 monad 想象成墨西哥卷饼 / 太空服 / 什么的”。

真的，那篇为我揭开 monad 神秘面纱的文章只是说了什么是类别，用类别来描述 monad（包括 join 和 bind），并没有理会任何虚假的隐喻：

*   [http://en.wikibooks.org/wiki/Haskell/Category_theory](http://en.wikibooks.org/wiki/Haskell/Category_theory)

我认为这篇文章非常易读，不需要太多数学知识。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-28T15:11:59.213

询问 Haskell 中的类型签名*做*什么就像询问 Java 中的接口*做什么*。

从字面上看，它“没有”。（当然，你通常会有某种与之相关的目的，这主要是在你的脑海中，而不是在实现中。）

在这两种情况下，您都在声明将在以后的定义中使用的语言中的合法符号序列。

当然，在 Java 中，我想您可以说接口对应于类型签名，该类型签名将在 VM 中逐字实现。您可以通过这种方式获得一些多态性——您可以定义一个接受接口的名称，并且您可以为接受不同接口的名称提供不同的定义。Haskell 中也发生了类似的事情，您可以为接受一种类型的名称提供一个声明，然后为该名称提供另一个处理不同类型的声明。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-08T04:29:42.247

这是 Monad 在一张图片中解释的。绿色类别中的2个函数是不可组合的，当映射到蓝色类别（严格来说，它们是一个类别）时，它们变成了可组合的。Monad 是关于将 type`T -> Monad<U>`的函数转换为 的函数`Monad<T> -> Monad<U>`。

[![Monad 在一张图片中解释了这一点。](../Images/93a1b5056be341e81d807bd31f9c0ffb.png)](https://i.stack.imgur.com/wOlfQ.png)*

# hook - 表达式引擎：成员更新挂钩

> ID：11234642
> 
> 赞同：1
> 
> 时间：2012-06-27T20:52:06.740
> 
> 标签：hook, expressionengine

当用户或管理系统更新成员的详细信息时，是否存在挂钩？

我想做的是有两个自定义字段；使用 google maps api 的地理编码功能填充的 long 和 lat。

我需要这是自动的，以便在创建帐户时进行调用并更新长/纬度字段，如果用户已更新，则我们检查地址数据是否已更改，如果已更改，请重新请求长/纬度。

除非我没有发现任何东西，否则我可以找到成员创建的钩子，但不能找到更新的钩子。

有没有藏在某个地方？或者我有可能以某种方式撬开一个吗？

表达引擎版本为2.2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:39:37.750

该方法没有钩子`update_member()`，你是对的。您可以查看使用`session_start`钩子，然后在该钩子方法中检查...所有新数据都`$_POST['edit_profile']`应该`$_POST`在.`$_POST['id']``member_id`

# ruby-on-rails - 无法在 Heroku 上创建管理员用户

> ID：11234659
> 
> 赞同：0
> 
> 时间：2012-06-27T20:53:34.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我是 Rails 新手，我在 Lynda.com 上完成了 Kevin Skoglund 的 Ruby on Rails 3 Essential Training 课程。通过课程，您设置了一个简单的 cms，我做到了。它不包括 Git 或部署，但我已将我的简单 cms 推送到 github ( [https://github.com/nick5a1/Simple_CMS](https://github.com/nick5a1/Simple_CMS) ) 并部署到 Heroku ( [http://nkarrasch.herokuapp.com/](http://nkarrasch.herokuapp.com/) )。

为了部署到 Heroku，我按照 Heroku 设置指南 ( [https://devcenter.heroku.com/articles/rails3](https://devcenter.heroku.com/articles/rails3) ) 将我的数据库从 MySQL 切换到 PostgreSQL。按照指示，我在 Gemfile 中将 gen'mysql2' 更改为 gen'sqlite3' 并在推送之前运行 bundle install 。然后我跑了`heroku run rake db:migrate`。

我遇到了2个问题。当我尝试登录 ( [http://nkarrasch.herokuapp.com/access](http://nkarrasch.herokuapp.com/access) ) 时，我收到一条错误消息“我们很抱歉，但出了点问题”。相反，我应该收到一条包含无效用户名/密码组合的 Flash 消息。这就是我在本地机器上的测试环境中得到的。

其次，当我登录 Heroku 控制台以创建和创建管理员用户时，当我尝试保存该用户时，我收到以下错误：

```
irb(main):004:0> user.save
   (1.2ms)  BEGIN
  AdminUser Exists (1.9ms)  SELECT 1 AS one FROM "admin_users" WHERE "admin_users"."username" = 'Nick5a1' LIMIT 1
   (1.7ms)  ROLLBACK
=> false 
```

任何有关如何排除故障的建议将不胜感激:)。

非常感谢，尼克

编辑：这是我的 Heroku 日志：

```
2012-06-27T20:36:44+00:00 heroku[slugc]: Slug compilation started
2012-06-27T20:37:34+00:00 heroku[api]: Add shared-database:5mb add-on by *
2012-06-27T20:37:34+00:00 heroku[api]: Release v2 created by *
2012-06-27T20:37:34+00:00 heroku[api]: Add RAILS_ENV, LANG, PATH, RACK_ENV, GEM_PATH config by *
2012-06-27T20:37:34+00:00 heroku[api]: Release v3 created by *
2012-06-27T20:37:34+00:00 heroku[api]: Release v4 created by *
2012-06-27T20:37:34+00:00 heroku[api]: Deploy 1d82839 by *
2012-06-27T20:37:35+00:00 heroku[slugc]: Slug compilation finished
2012-06-27T20:37:36+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 45450`
2012-06-27T20:37:40+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-27T20:37:40+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-27T20:37:40+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-06-27T20:37:44+00:00 app[web.1]: => Rails 3.2.6 application starting in production on http://0.0.0.0:45450
2012-06-27T20:37:44+00:00 app[web.1]: => Call with -d to detach
2012-06-27T20:37:44+00:00 app[web.1]: => Booting WEBrick
2012-06-27T20:37:44+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-06-27T20:37:44+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-06-27T20:37:44+00:00 app[web.1]: [2012-06-27 20:37:44] INFO  WEBrick 1.3.1
2012-06-27T20:37:44+00:00 app[web.1]: [2012-06-27 20:37:44] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2012-06-27T20:37:44+00:00 app[web.1]: [2012-06-27 20:37:44] INFO  WEBrick::HTTPServer#start: pid=2 port=45450
2012-06-27T20:37:45+00:00 heroku[web.1]: State changed from starting to up
2012-06-27T20:39:44+00:00 heroku[run.1]: Awaiting client
2012-06-27T20:39:44+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
2012-06-27T20:39:44+00:00 heroku[run.1]: State changed from starting to up
2012-06-27T20:39:51+00:00 heroku[run.1]: Process exited with status 0
2012-06-27T20:39:51+00:00 heroku[run.1]: State changed from up to complete
2012-06-27T20:41:05+00:00 heroku[run.1]: Awaiting client
2012-06-27T20:41:05+00:00 heroku[run.1]: Starting process with command `bundle exec rails console`
2012-06-27T20:41:05+00:00 heroku[run.1]: State changed from starting to up
2012-06-27T20:46:09+00:00 heroku[run.1]: Process exited with status 0
2012-06-27T20:46:09+00:00 heroku[run.1]: State changed from up to complete 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:11:56.880

您正在声明两个不同的数据库...尝试从您的以下两行中删除`Gemfile`：

```
gem 'pg'
gem 'mysql2' 
```

并添加以下内容：

```
group :production do
  gem 'pg'
  gem 'thin'
end

group :development, :test do
  gem 'mysql2'
end 
```

通过这种方式，您定义了一个用于开发的数据库 ( `mysql`) 和另一个 ( `pg`) 用于生产的数据库。

更改 gemfile 后：

```
git add .
git commit -m "gemfile updated"
git push
git push heroku master
heroku run rake db:migrate 
```

**编辑**- 看着你的`routes.rb`我意识到你正在使用`match ':controller(/:action(/:id))(.:format)'`，这将通过`get`请求使你的所有操作都可用。但是，我从未使用过它，我认为您的路线可能有问题。

只是为了确保它指向`access/attempt_login`，您能否包括以下生成的路由：

```
rake routes 
```

# c# - 如何在 CodeBehind 的 DetailTable 中访问 FooterText (Telerik-RadGrid)？

> ID：11234661
> 
> 赞同：3
> 
> 时间：2012-06-27T20:53:48.233
> 
> 标签：c#, asp.net, telerik, footer, radgrid

我的 asp.net 网络表单中有一个 Telerik RadGrid，如下所示：

```
MasterTableView
           DetailTables -> GridTableView 
```

在那个详细表中，我有一列如下所示：

```
 <telerik:GridTableView runat="server" DataKeyNames="ID,Customer_ID,CardType_ID,OrderStatus_ID"
                                DataSourceID="sdsOrders" AllowFilteringByColumn="True" 
                                AllowMultiColumnSorting="True" AllowSorting="True" ShowFooter="True" OnDataBinding="GridTableView_DataBinding">  
...   

                            <telerik:GridBoundColumn DataField="TotalPrice" DataType="System.Int32" FilterControlAltText="Filter TotalPrice column"
                                HeaderText="TotalPrice" SortExpression="TotalPrice" 
                                UniqueName="TotalPrice" AllowFiltering="False" FooterText="Sum: " Aggregate="Sum">
                                <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                                <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="100px" />
                            </telerik:GridBoundColumn> 
```

我想更改页脚文本（总和）和页脚中的（总和）的颜色。
对于 MasterTableView 中的 DataBoundColumns，以下代码有效：

```
protected void GridTableView_DataBinding(object sender, EventArgs e)
{
    GridBoundColumn TotalPrice = grdCustomers.MasterTableView.GetColumnSafe("TotalPrice") as GridBoundColumn;
    TotalPrice.FooterAggregateFormatString = "<span class=\"AggregateTitleColor\">Sum : </span>" + "{0:#,0 ;#,0- }";
    TotalPrice.FooterStyle.ForeColor = ColorTranslator.FromHtml("blue");
} 
```

现在我怎样才能在 DetailTable 中为 TotalPrice 重写这些代码？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:54:30.050

我找到了答案：
首先应该在 MasterTableView 中使用 DataBinding。
并像这样重写代码：

```
protected void MasterTableView_DataBinding(object sender, EventArgs e)  <- Pay Attention Here
{
    GridBoundColumn TotalPrice = grdCustomers.MasterTableView.DetailTables[0].GetColumnSafe("TotalPrice") as GridBoundColumn;
    TotalPrice.FooterAggregateFormatString = "<span class=\"AggregateTitleColor\">Sum : </span>" + "{0:#,0 ;#,0- }";
    TotalPrice.FooterStyle.ForeColor = ColorTranslator.FromHtml("blue");
} 
```

你就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:59:24.030

查看[RAD Grid](http://www.telerik.com/help/aspnet-ajax/grid-totals-in-footers.html)控件中的总计文档。我知道您已经知道如何显示总计，但是那里有一大段 C# 和 ASP 代码显示使用 FooterStyle 属性更改页脚颜色。

# ffmpeg - 如何在 Ubuntu 12.04 LTS（Precise Pangolin）上使用 libx264 编译 avconv？

> ID：11234662
> 
> 赞同：12
> 
> 时间：2012-06-27T20:53:59.323
> 
> 标签：ffmpeg, video-encoding, ubuntu-12.04

*是否有关于如何在 Ubuntu 中编译avconv*的分步指南？

*与ffmpeg*相比，似乎很难用*avconv*搜索任何教程。

 ** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T00:54:50.847

终于知道怎么弄了

1.) 创建一个目录 avconv-source

```
mkdir avconv-source 
```

2.) 下载并安装 x264 库

```
cd ~/avconv-source
git clone git://git.videolan.org/x264.git x264
cd x264
sudo ./configure --enable-static
sudo make
sudo make install 
```

3.) 下载 avconv 源

```
cd ~/avconv-source
git clone git://git.libav.org/libav.git avconv
cd avconv
sudo ./configure
sudo ./configure --enable-gpl --enable-libx264
sudo make
sudo make install 
```

现在你可以执行

```
avconv -i test.mov -c:v libx264 -c:a copy test.mp4 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-30T05:55:15.917

它在 Ubuntu 12.04 上对我来说非常有用，只是它抱怨缺少汇编程序。

最低版本是 yasm-1.2.0。如果你真的想在没有 asm 的情况下进行编译，请使用 --disable-asm 进行配置。

感谢*[HOWTO: Install and use the latest FFmpeg and x264](http://ubuntuforums.org/showthread.php?p=11404469)*，我也做了以下事情，除此之外还可以。

```
sudo apt-get install build-essential checkinstall

sudo apt-get build-dep yasm

wget http://www.tortall.net/projects/yasm/releases/yasm-1.2.0.tar.gz && \
tar -xf yasm-1.2.0.tar.gz && cd yasm-1.2.0 && ./configure

make

sudo checkinstall --pakdir "$HOME/Desktop" --pkgname yasm --pkgversion 1.2.0 \
--backup=no --default 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-09-16T18:49:29.337

这在 Ubuntu 13.04 和 Ubuntu 12.04.3 LTS 上对我有用。

```
apt-get install libavcodec-extra-53 
```*

# c++ - 是否可以在 protobuf 内发送已编译的 protobuf 消息定义？

> ID：11234663
> 
> 赞同：1
> 
> 时间：2012-06-27T20:54:01.663
> 
> 标签：c++, protocol-buffers

我想为我们使用的一些基于 protobuf 的服务对流量进行一些消息调试。

这些服务都使用已编译的 .proto 文件作为消息，我想将消息的实际格式序列化回 .proto 文件文本并将其发送给客户端，以便客户端在编译时不需要知道实现细节.

这在 C++ 中可能吗？我知道我可以[在没有定义的情况下获得消息的结构](https://stackoverflow.com/questions/1995411/how-to-get-structure-of-a-google-protobuf-message-without-the-definition)，但是拥有消息字段的名称对于调试至关重要。在没有 .proto 文件的情况下，是否有另一种获取此信息的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:17:08.033

如果*原始发送者*有 .proto 文件，它们可以通过“protoc”编译成 protobuf 数据文件，匹配“descriptor.proto”（应该在您的 protobuf 分发中可用）。您可以使用

```
protoc --descriptor_set_out={out_path} --proto_path={in_path} 
```

（或者如果您愿意，可以使用标准输出，IIRC - 未经测试）

生成的二进制数据可以作为一个`bytes`字段包含在内，并且只要客户端还具有从 descriptor.proto 生成的对象模型，就可以单独反序列化。

反序列化后要做什么：`FileDescriptorSet`是顶级对象；您应该能够向下遍历到`FieldDescriptorProto`，其中包含成员名称等

也许不是很优雅，但它应该可以工作。

或者，以任何方式包含元数据，并将所有内容视为扩展字段。

# javascript - “[本机代码]”是什么意思？

> ID：11234664
> 
> 赞同：75
> 
> 时间：2012-06-27T20:54:04.207
> 
> 标签：javascript, jquery, native-code

我试图调查 jQuery 代码，所以我使用了这个：

```
document.write($.constructor); 
```

[jsfiddle](http://jsfiddle.net/WZGWp/)

我得到了这个结果：

```
function Function() { [native code] } 
```

是什么`[native code]`意思？为什么我看不到真正的代码？

[经测试`Google-Chrome`]

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-27T21:00:09.783

当您在解释语言（而不是编译语言）中定义函数时。您可以访问定义函数的文件/字符串/文本。

例如，在 JavaScript 中，您可以读取已定义函数的定义正文。

如果您尝试对JavaScript 构造中*包含*的函数执行相同操作，则它不会以文本形式实现，而是以二进制形式实现。没有理由显示实现该功能的二进制代码，因为它不可读，甚至可能不可用。

jQuery 扩展了默认的 JavaScript 行为。这是它受到高度赞赏和赞扬的原因之一，而不是例如 Prototype.js。Prototype*改变*了 JavaScript 的自然行为，在将 Prototype 与其他一些依赖于正常功能的代码一起使用时，可能会产生不一致。

## tl;博士：

jQuery 扩展了 JavaScript，使用本机代码实现了一些功能（这在性能方面是一件好事）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-27T20:59:35.613

`$`,`jQuery`只是一个函数。不调用它，它只是一个普通的函数。函数的构造函数是`Function`，因此`$.constructor`显示`[native code]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-16T11:02:08.493

bind 对函数执行此操作：

> ```
> var f = function() { /* source code */ };
> console.log(f.toString()); 
> ```

```
function () { /* source code */ } 
```

> ```
> var a = {};
> f = f.bind(a);
> console.log(f.toString()); 
> ```

```
function () { [native code] } 
```

> ```
> f = new Function('/* source code */');
> console.log(f.toString()); 
> ```

```
function anonymous() { /* source code */ } 
```

> ```
> f = f.bind(a);
> console.log(f.toString()); 
> ```

```
function () { [native code] } 
```

bind 要么返回对某种包装器代码的引用，要么 toString 认为绑定的副本是本地的，因为它不是由用户直接创建的

但是，直接记录函数，不使用 toString()，打印（在 Chrome 中）原始未绑定函数的源代码：

> ```
> f = f.bind(a);
> console.log(f) 
> ```

```
ƒ () { /* source code */ } 
```

在 FF 中这不起作用 - FF 打印函数对象，没有源代码

# perl - 使用 ne 比较 perl 中的两个哈希值

> ID：11234666
> 
> 赞同：2
> 
> 时间：2012-06-27T20:54:15.267
> 
> 标签：perl, comparison

我试图理解 perl 中的一段代码，但我遇到了一些麻烦，因为它对 perl 编程来说有点新。

我有两个哈希，它们在 for 循环的不同迭代中以相同的顺序输入相同的（键，值）对。

迭代 1 创建 %hash1，迭代 2 创建 %hash2。

`%hash1 = (1 => 10, 2 => 20, 3=> 30);`

```
%hash2 = (1 => 10,  2 => 20, 3=> 30); 
```

然后是一个比较这些的命令：

```
if (%hash1 ne %hash2) {print "Not Equal"; die;} 
```

我的问题是：

(1) 上面的 if 语句究竟比较了什么？

（2）我尝试分配，

```
my $a = %hash1; my $b = %hash2; 
```

但是这些给了我 3/8 的输出！那会是什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T21:01:04.430

`ne`是字符串比较运算符。它的操作数是字符串，因此是标量。从[perldata](http://perldoc.perl.org/perldata.html)，

> 如果您在标量上下文中评估哈希，则如果哈希为空，则返回 false。如果有任何键/值对，则返回 true；更准确地说，返回的值是一个字符串，由已使用的桶数和分配的桶数组成，用斜杠分隔。

因此，它比较了两个散列具有相同数量的已使用存储桶，并且两个散列具有相同数量的已分配存储桶。

比较散列的一种方法是使用带有集合的[JSON:XS](http://search.cpan.org/perldoc?JSON%3a%3aXS)对它们进行字符串化。`canonical`

```
JSON::XS->new->canonical(1)->encode(\%hash) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T08:44:47.813

有一个 Module [Data::Compare](http://search.cpan.org/~dcantrell/Data-Compare-1.22/)可用于比较 CPAN 上的哈希值。这工作如下：

```
 use Data::Compare; # exports subroutine: Compare() !
 ...

 my %hash1 = (1 => 10, 2 => 20, 3 => 30);
 my %hash2 = (1 => 10, 2 => 20, 3 => 30);

 # This won't work:
 # if (%hash1 ne %hash2) {print "Not Equal"; die;}

 # This works:
 if( ! Compare(\%hash1, \%hash2)  ) {  print "Not Equal";  die; }

 ... 
```

这不是核心模块，您必须安装它。它也可以在 activeperl/windows 下（在它们的默认存储库中）。

问候，

rbo

# c++ - 多个接口上的多个多播

> ID：11234671
> 
> 赞同：2
> 
> 时间：2012-06-27T20:54:28.690
> 
> 标签：c++, linux, networking, multicast

操作系统：CentOS 5.5
语言：C++

我已经对此进行了大量研究，但我真的找不到任何与我所做的精确设置相关的文章。这是一个非常具体的设置，所以我将尽我所能描述我在做什么以及我正在尝试做什么。

我有一台带有 2 个以太网端口（eth0 和 eth1）的计算机。每个人同时接收不同的多播广播。因此，1 个多播 IP 地址和端口将指向 eth0，另一个多播 IP 地址和端口将指向 eth1。

我正在编写一个程序，旨在侦听给定的多播 IP 地址和端口。

目标是能够启动程序并收听 1 个多播，同时启动该程序的第二个实例来收听另一个多播。该程序本身仅设计为一次收听 1 个多播。

但是，我似乎无法同时运行这两个程序。

使用“路由”命令，我已经能够设置路由表，我可以在其中接收 1 个流，但不能接收另一个。我一次只能获得 1 个流，但不能同时进行。

eth0 连接到：10.10.20.50 -- 此接口的多播为 225.0.7.10 端口 51007 eth1 连接到：192.168.20.21 -- 此接口的多播为 225.0.8.10 端口 51008

如果我执行路由命令，“route add default gw 1​​0.10.20.50 eth0”我可以接收到该地址上的多播就好了

但是，一旦我添加“route add default gw 1​​92.168.20.21 eth1”，我就无法再在 10.10.20.50 接口上接收多播。

我在绑定套接字或设置 sockopts 时没有收到任何错误...该程序只是简单地阻塞了 recv 调用并且永远不会收到消息。

我已经尝试了各种路由命令组合来支持这一点，并且我在连接代码中也做了一些不同的事情来解决这个问题，但没有运气。这是我当前的连接代码：

```
 //Create the UDP socket, check to make sure it was created successfully
  cout << "Initializing Connection..." << endl ;
  m_socket = socket ( AF_INET , SOCK_DGRAM , IPPROTO_UDP ) ;

  if( m_socket == -1 )
  {
    cout << "ERROR CREATING SOCKET: " << strerror(errno) << endl ;
    return false ;
  }

  cout << "Socket Created" << endl;

  //Setup socket binding information
  sockaddr_in addr ;
  bzero  ( ( char* ) &addr , sizeof ( addr ) ) ;
  addr . sin_family       = AF_INET ;
  addr . sin_addr.s_addr  = inet_addr(interface_addr) ; //10.10.20.50 or 192.168.20.21
  addr . sin_port         = htons ( port ) ;            //51007 or 51008

  //bind the socket, check for errors
  int result = bind ( m_socket , ( struct sockaddr* ) &addr , sizeof ( addr ) ) ;

  if ( result == -1 )
  {
    cout << "ERROR BINDING PORT: " << strerror ( errno ) << endl;
    shutdown ( m_socket , SHUT_RDWR ) ;
    return false ;
  }

  cout << "Socket Bound" << endl;

  //subscribe to the supplied IP address and port to listen on
  in_addr host_addr ;
  inet_pton ( AF_INET , ip_addrs . c_str () , & ( host_addr ) ) ;

  struct ip_mreq mreq;
  mreq . imr_multiaddr = host_addr ;       // multicast address 225.0.7.10 or 225.0.8.10
  mreq . imr_interface = addr . sin_addr ; //the 10.10.20.50 or 192.168.20.21 specified above

  result = setsockopt ( m_socket , IPPROTO_IP , IP_ADD_MEMBERSHIP, &mreq , sizeof(mreq) ) ;

  if ( result == -1 )
  {
    cout << "ERROR SETTING SOCKOPT SUBSCRIPTION: " << strerror(errno) << endl ;
    printSocketError();
    shutdown ( m_socket , SHUT_RDWR ) ;
    return false ;
  }

  /*
   * Read from the socket to get the initial bit of information we need so the
   * buffers can get allocated correctly, and the width and height of the application
   * can be defined.
   */
  cout << "Attempting to read from the socket..." << endl;
  MyPacket pckt ;
  recv ( m_socket , &pckt , sizeof ( pckt ) , MSG_PEEK ) ;

  cout << "Data Received... processing" << endl ; 
```

我也尝试使用 ip_mreqn 结构手动指定接口，并使用 setsockopt 进行 SOL_BINDTODEVICE 设置（eth0 或 eth1），但遇到了与以前相同的问题，如果我有特定的路由设置，我只能连接它。 . 即使这样，也只有 1 会收到，而不会收到其他。

重申……我需要同时运行该程序的 2 个副本……每个副本都在侦听来自特定接口的自己指定的多播地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:08:16.027

您需要设置两条不同的路由，以便将不同的组路由到（并因此在其上侦听）给定接口：

```
root:~# route add -net 225.0.7.10 netmask 255.255.255.255 dev eth0
root:~# route add -net 225.0.8.10 netmask 255.255.255.255 dev eth1 
```

然后，当你的程序运行时，你应该能够看到在什么接口上收听了哪些组`netstat -ng`。

### 编辑0：

*   该[`shutdown(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/shutdown.2.html)调用仅针对 TCP，对 UDP 没有任何意义。
*   查看[“UNIX 网络编程，套接字网络 API”](http://www.unpbook.com/)，第 1 卷。它有详细的章节介绍如何正确执行此操作。书中的代码是免费提供的。

### 编辑1：

获取我提到的 UNP 书的源代码，它[在这里](http://www.unpbook.com/unpv13e.tar.gz)。查看`unpv13e/lib`解压缩存档中的目录，读取`mcast_join.c`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-17T09:07:19.653

而是这样做 - 1\. 创建一个类。2\. 具有在该类中创建和绑定 IP 和端口的功能。3\. 使用该类 Object 从主函数调用该函数两次。

要验证结果，您可以使用命令 netstat -g，它将显示与您的多播 IP 对应的两个实例。

如果您愿意，我可以编写代码，但请先自己尝试编写代码。

# jquery - 如何使用 DataTables 获取用户选择的节点的行号

> ID：11234672
> 
> 赞同：1
> 
> 时间：2012-06-27T20:54:29.067
> 
> 标签：jquery, datatables

我的 DataTable 设置为允许用户选择一行。在表格的一侧，我有“向上”和“向下”按钮，允许用户移动表格上的数据行。要实际移动行，我需要知道所选节点的行号，最明显的方法是使用 fnGetPosition()。但是，当我使用 FireBug 调试代码时，它告诉我 fnGetPosition() 不是函数。

这是我按下向上按钮时调用的函数：

```
function moveRowUp()
{       
var table = TableTools.fnGetInstance('firstConditionalTable');//Initialize table as an instance of TableTools
var rows = $("#firstConditionalTable tr");//Making a jQuery objecet of the tr elements in the table
var row = table.fnGetSelected();//fnGetSelected returns an array of all selected nodes. row should be assigned an array.
var index = table.fnGetPosition(row[0]);//Get row number of selected node. FireBug tells me that table.fnGetPosition is not a function.
alert(index);//Testing purposes
rows.eq(index).insertBefore(rows.eq(index - 1));//Does the actual moving up
} 
```

如果有人看到任何问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:24:21.270

> table.fnGetPosition(row[0]);//获取选中节点的行号。FireBug 告诉我 table.fnGetPosition 不是函数

这是正确的 - 这里有“表”作为 TableTools 实例，其中 fnGetPosition 是 DataTable 方法（[http://datatables.net/api](http://datatables.net/api)）。您很少会想要使用 fnGetPosition - 它为您提供 DataTables 缓存中数据的内部索引，而不是表中的位置。

您可能想要的是这个 API 方法：[http](http://datatables.net/plug-ins/api#fnGetAdjacentTr) ://datatables.net/plug-ins/api#fnGetAdjacentTr为您提供下一个或上一个 TR 元素 - 考虑到排序、过滤等。但是请记住，您不能只将 DOM 方法与 DataTables 一起使用，因为它的内部排序会覆盖您所做的操作 - 请参阅[http://datatables.net/faqs#append](http://datatables.net/faqs#append)

# c# - 如何在 XML 反序列化期间将 XML 字符串保留为字符串字段

> ID：11234676
> 
> 赞同：3
> 
> 时间：2012-06-27T20:54:37.697
> 
> 标签：c#, xml, deserialization

我得到了一个 XML 输入字符串，并希望将其反序列化为一个部分保留原始 XML 的对象。

```
<SetProfile>
  <sessionId>A81D83BC-09A0-4E32-B440-0000033D7AAD</sessionId>
  <profileDataXml>
    <ArrayOfProfileItem>
      <ProfileItem>
        <Name>Pulse</Name>
        <Value>80</Value>
      </ProfileItem>
      <ProfileItem>
        <Name>BloodPresure</Name>
        <Value>120</Value>
      </ProfileItem>
    </ArrayOfProfileItem>
  </profileDataXml>
</SetProfile> 
```

类定义：

```
public class SetProfile
{
    public Guid sessionId;
    public string profileDataXml;
} 
```

我希望反序列化语法看起来像

```
string inputXML = "..."; // the above XML
XmlSerializer xs = new XmlSerializer(typeof(SetProfile));
using (TextReader reader = new StringReader(inputXML))
{
    SetProfile obj = (SetProfile)xs.Deserialize(reader);
    // use obj ....
} 
```

但是 XMLSerializer 会抛出异常，并且不会将 <profileDataXml> 的后代输出到原始 XML 字符串中的“profileDataXml”字段。

有没有办法实现这样的反序列化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:58:44.037

如果您想将其反序列化为 XML，请使用 XML 类型（`XElement`或者`XmlElement`应该工作） - 请参见下面的代码。

```
public class StackOverflow_11234676
{
    const string XML = @"<SetProfile>
                          <sessionId>A81D83BC-09A0-4E32-B440-0000033D7AAD</sessionId>
                          <profileDataXml>
                            <ArrayOfProfileItem>
                              <ProfileItem>
                                <Name>Pulse</Name>
                                <Value>80</Value>
                              </ProfileItem>
                              <ProfileItem>
                                <Name>BloodPresure</Name>
                                <Value>120</Value>
                              </ProfileItem>
                            </ArrayOfProfileItem>
                          </profileDataXml>
                        </SetProfile>";

    public class SetProfile
    {
        public Guid sessionId;
        public XElement profileDataXml;
    }
    public static void Test()
    {
        string inputXML = XML;
        XmlSerializer xs = new XmlSerializer(typeof(SetProfile));
        using (TextReader reader = new StringReader(inputXML))
        {
            SetProfile obj = (SetProfile)xs.Deserialize(reader);
            Console.WriteLine(obj.profileDataXml);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:12:43.970

我会说你可以反序列化这个 XML。

看看这篇文章： [控制 XML 序列化的属性](http://msdn.microsoft.com/en-us/library/83y7df3e%28v=vs.71%29.aspx)

让它工作的最简单方法是使用 REVERSE 方法。创建类并应用 xml 序列化属性并尝试序列化，直到获得与发布的相同的 xml 结果。一旦你得到相同的 xml，你的反序列化就会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:53:31.137

我会为此使用 Xml.Linq。

```
setProfile obj = new setProfile();
var doc = XDocument.Parse(yourXml);
obj.sessionID = doc.Root.Element("sessionID").value;
obj.profileDataXml = doc.Root.Element("profileDataXml").value; 
```

# jqgrid - jqGrid：表单未显示复选框值

> ID：11234677
> 
> 赞同：0
> 
> 时间：2012-06-27T20:54:46.627
> 
> 标签：jqgrid

我有以下调用来加载网格：

```
$("#searchlist").jqGrid({
    url:'./searchlibrary',
    datatype: 'json',
    mtype: 'POST',
    postData: {
        type: function(){return $('select[name="searchtype"]').val();},
        criteria: function(){return getSearchData();}
    },
    colNames:['Resource Name','Unit', 'Topic','Document Type','Content Type','Select'],
    colModel :[ 
        {name:'resourceName', index:'resourceName', width:380, align:'left'}, 
        {name:'unit', index:'unitID', width:40, align:'center',sortable:true,
            sorttype:'text'}, 
        {name:'topic', index:'topicID', width:220, align:'center',sortable:true}, 
        {name:'docType', index:'docTypeID', width:97, align:'center',
            sortable:true}, 
        {name:'contentType', index:'contentTypeID', width:97, align:'center',
            sortable:true},
        {name: 'select', width:55, align: "center", sortable: false, editable: true,
            edittype: "checkbox", editoptions: { value:"Yes:No" },
            formatter:"checkbox",formatoptions: {disabled : false}}
    ],
    rowNum:20,
    sortname: 'resourceName',
    sortorder: 'asc',
    viewrecords: true,
    gridview: true,
    width:878,
    height:251
}); 
```

请注意本节中的最后一项`colModel`。注意编辑选项部分。加载网格时，它似乎忽略了这一点。检查 chrome 中的元素显示正在生成以下代码：

```
<input type="checkbox" value=" " offval="no"> 
```

我在声明中做错了吗？

# 更新

这是返回的 JSON：

```
 {"total":1,"page":"1","records":"4","rows":[{"id":"1","cell":["Test Resource 1","1","Topic 1","pdf","course","1"]},{"id":"2","cell":["Test Resource 2","1","Topic 1","pdf","course","2"]},{"id":"3","cell":["Test Resource 3","1","Topic 2","mp4","course","3"]},{"id":"4","cell":["Test Resource 4","1","Topic 2","wmv","course","4"]}]} 
```

这仍然给了我 4 个默认检查的结果。这就是我 colModel 中现在可供选择的内容：

```
 {name: 'select', index:'resourceID', width:55, align: "center", sortable: false, editable: true, edittype: "checkbox", editoptions: { value:"Yes:No", defaultValue:"No" }, formatter:"checkbox",formatoptions: {disabled : false}} 
```

为一个选择单元格生成的第一个 html 是这样的：

```
 <input type="checkbox" checked="checked" value="1" offval="no"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:15:08.540

如果您在网格中加载数据，则该`select`列的值将填充为与`formatter:"checkbox"`. 如果值是`""`默认值可以使用。所以可以使用`defaultValue`来`formatoptions`指定默认值。HTML 片段

```
<input type="checkbox" value=" " offval="no"> 
```

with `" "`value 表明您可能使用空格而不是空字符串有错误的数据。如果您需要正确填写数据，您需要从服务器返回具有`true`、`false`、`1`、`0`、`yes`、或的数据`no`（所有值的大小写都不重要）。有关更多详细信息，请参阅[源代码](https://github.com/tonytomov/jqGrid/blob/v4.4.0/js/jquery.fmatter.js#L266-276)。`on``off`

因此，您应该再验证一次从服务器返回的数据。我个人更喜欢使用`1`and`0`作为复选框的输入值。

# c# - 加载 pcap 文件

> ID：11234678
> 
> 赞同：2
> 
> 时间：2012-06-27T20:54:59.820
> 
> 标签：c#, tcp, pcap, sharppcap

我正在尝试使用 SharpPcap 在 c# 中编写一个 tcp 重建程序。到目前为止，我做得很好，重建工作正常。我唯一的问题是，为了自己重建大的 Pcap 文件，我需要将它们按部分/块加载到内存中，因为 sharppcap 只让我加载整个文件（我认为）。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T06:31:13.620

pcap 文件格式非常简单，请参见此处：[http ://wiki.wireshark.org/FileFormatReference/libpcap](http://wiki.wireshark.org/FileFormatReference/libpcap)

为什么不自己加载文件，一次可能是一个数据包，然后你可以随心所欲地做你想做的事情，而不是让一个库来决定你的内存使用模式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:58:47.023

鉴于 SharpPcap`PcapDevice`有一个`GetNextPacket`方法，从该方法继承`LibPcapLiveDevice`并`CaptureFileReaderDevice`继承该方法，我看不到任何需要您加载整个文件的内容 - 您可能必须*读取*整个文件，但您可以忽略您没有的数据包'不想要。

# android - Android Service和线程中运行的重复性任务

> ID：11234680
> 
> 赞同：5
> 
> 时间：2012-06-27T20:55:09.303
> 
> 标签：android, service, background, scheduled-tasks

我正在后台运行一项读取 GPS/网络位置的服务，需要执行以下操作：

*   在后台运行而不会在应用程序重新启动时中断，并尽可能保持其活着而不会被杀死（这在 Merlin 的评论的帮助下得到了解决）

*   在收到新位置时，调用 Web 服务并发送读取的位置

*   每 60 秒运行一次重复性任务，并将最后一个位置重新发送到 Web 服务。如果用户保持在同一位置，这将有所帮助。

我考虑了一些事情，我不确定我是否理解正确。该服务与主应用程序在同一线程中运行，因此在与 UI 线程相同的线程上将位置发送到服务器可能会触发 UI 冻结，这并不好。此外，我不确定 GPS/网络侦听器是否有自己的线程或使用与应用程序相同的线程。

这是服务的缩短代码，以使事情更清楚：

```
public class GPSLoggerService extends Service {
@Override
public void onCreate() {
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 50, locationListenerNetwork);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 50, locationListenerGps);

    scheduleTaskExecutor = Executors.newScheduledThreadPool(5);
    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
        @Override
        public void run() {
                updateLocation(lastLocation);
        }, 60, 60, TimeUnit.SECONDS);

    return START_STICKY;
}

LocationListener locationListenerGps = new LocationListener() {
    @Override
    public void onLocationChanged(Location location) {
        updateLocation(location);
    }
...
}    

LocationListener locationListenerNetwork = new LocationListener() {
    @Override
    public void onLocationChanged(Location location) {
        updateLocation(location);
    }
...
}

private void updateLocation(Location readLocation) {
    //web service call
    String response = WebServiceCalls.updateLocation(readLocation);

    //log data in a local Sqlite database
    saveLocation(readLocation) 
} 
```

我主要关心的是如何处理 updateLocation 调用并将其放在与主应用程序线程不同的线程中。scheduleTaskExecutor 我相信这不是要走的路。有时，即使在我调用 stopService() 之后，服务仍然存在，即使我告诉 TaskExecutor 关闭。我找不到服务没有停止的其他解释。回顾一下：我需要在每次听众收到新位置时发送位置，并每 60 秒重新发送一次。我还需要能够通过取消活动线程来快速停止服务。

你会建议我如何处理我的案子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T20:50:03.990

我会使用 IntentService 并仅使用 AlarmManager 来触发意图。

这样做的主要优点是无需担心线程代码，因为它在后台工作

**更新**

另一种有趣的方法可以在[https://stackoverflow.com/a/7709140/808940中找到](https://stackoverflow.com/a/7709140/808940)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T16:16:33.967

*   该服务与主应用程序运行相同的进程，而不是线程。此外，如果您想在另一个进程中运行服务，则可以使用[android:process](http://developer.android.com/guide/topics/manifest/service-element.html#proc)标签。

*   我不确定你为什么要每 60 秒调用一次 WebService，因为 60 秒太少了。此外，当位置未更改时，您应该跳过调用 WebService，因为它需要网络通信并且这是一项昂贵的操作。

*   无需使用执行器。您应该尽可能减少线程数。要在特定时间间隔执行任务，请使用 AlarmManager 在特定时间传递意图。检查[setRepeating()](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)方法来设置警报。

*   另一件事是，您应该尽量避免在 Listener 中执行任何任务。因为在考虑阻止接收者/侦听者和杀死候选人之前，系统允许有 10 秒的[超时。](http://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive%28android.content.Context,%20android.content.Intent%29)您应该使用[Handler](http://developer.android.com/reference/android/os/Handler.html)在后台线程中执行任务（即，每当您从侦听器接收到更新时，将消息添加到 Handler 队列，当 Handler 线程空闲时将被选中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T04:45:51.607

为了防止您的服务被破坏，您可以将您的服务作为[前台服务](http://developer.android.com/guide/components/services.html#Foreground)启动。

从 onLocationChanged() 方法获取位置后，您可以使用[asynctask](http://developer.android.com/reference/android/os/AsyncTask.html)将位置发送到 Web 服务，这样它就不会阻塞您的 UI。

**编辑**

1.  您可以在**requestLocationUpdates**方法中设置最短时间和最短距离。因此，我认为您不应该使用调度程序任务将位置发送到服务器。根据关于最小时间和最小距离的参数，位置管理器将检查位置。如果位置发生更改，那么它将使用新位置调用 onLocationChanged() 方法。现在，您关于用户的解决方案保持不变。您可以将一些逻辑更改为服务器端，例如两个连续位置 location1 和 location2 之间是否相差 1 小时意味着用户在 location1 停留了 1 小时。

2.  您可以使用单个 LocationListener 类来监听 GPS 和 NETWORK 位置。

3.  当您在 onLocationChanged() 方法中获取位置时，您可以使用异步任务发送该位置。
4.  获得位置后，您可以将该位置保存在首选项或数据库中，以检查 GPS 和网络提供商向您发送相同位置的天气，因此如果您要跟踪，则可以保存您的 webAPI 调用，这样您就可以节省一部分电池电量。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-15T23:30:42.713

你应该使用异步任务：

```
public class RefreshTask extends AsyncTask<Integer, Void, Integer> {

    /**
     * The system calls this to perform work in a worker thread and delivers
     * it the parameters given to AsyncTask.execute()
     */

    public RefreshTask() {

    }

    protected Integer doInBackground(Integer... millis) {
        try{
            int waitTime = 0;
            while(waitTime<60000){
                Thread.sleep(100);
                waitTime += 100;
            }

            //update location here

        }catch(InterruptedException e){

        }

        return 1;
    }

    /**
     * The system calls this to perform work in the UI thread and delivers
     * the result from doInBackground()
     */
    protected void onPostExecute(Integer result) {
        new RefreshTask.execute();
    }

} 
```

# .net - Convert.ToBase64String 是否有可能返回带有 ENTER 的字符串？

> ID：11234682
> 
> 赞同：1
> 
> 时间：2012-06-27T20:55:41.693
> 
> 标签：.net, string, base64

我使用 .NET 的 Convert.ToBase64String 创建了一个“加密的”电子邮件验证链接。很少，我被告知链接被拆分，好像新的 srting 中有新的行。那可能吗？很可能只是电子邮件客户端问题，但我想确定...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:00:35.243

换行符的插入由此重载的第二个参数控制：

```
public static string ToBase64String(
    byte[] inArray
,   Base64FormattingOptions options
) 
```

如果你通过`Base64FormattingOptions.InsertLineBreaks`了，你会得到换行符；否则，你不会得到换行符。

单参数重载不会插入中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:00:53.420

是的，这是可能的——如果你通过它`Base64FormattingOptions.InsertLineBreaks`，你将每 76 个字符换行一次。

不过，默认情况下不应该有换行符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T21:10:02.660

对于处理 URL，建议使用它`HttpServerUtility.UrlTokenEncode`。

[http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urltokenencode.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.urltokenencode.aspx)

将 Convert.ToBase64String 用于 URL 存在一些已知问题。

[http://tipsforcdevelopers.blogspot.co.uk/2009/05/difference-between-converttobase64strin.html](http://tipsforcdevelopers.blogspot.co.uk/2009/05/difference-between-converttobase64strin.html)

# emacs - 是否有可用的 Emacs paredit hook 以便我可以重新定义 Cj？

> ID：11234697
> 
> 赞同：6
> 
> 时间：2012-06-27T20:57:18.190
> 
> 标签：emacs, elisp

我喜欢使用`C-j`to`eval-last-sexp`但 paredit-mode （我不喜欢）将其覆盖为`paredit-newline`. 查看 paredit-mode 文档，我看不到任何类似于`paredit-mode-hook`我可以`add-hook`调用的已定义`local-set-key`或类似函数的东西。

有人有建议吗？

**更新** 在尝试了下面的两个答案并且没有取得太大成功后，我认为问题可能与 paredit 在几个不同的上下文中加载的事实有关？也就是说，我打开了 Common Lisp、Clojure 和 Emacs Lisp 文件，所有这些文件都可以使用 paredit。可悲的是，在每种模式下，各种形式的`eval-last-sexp`名称略有不同，因此我无法为所有内容定义一次密钥。相反，我需要根据我所在的主要模式绑定密钥。希望这会增加另一个有用的数据点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T21:16:13.273

无需使用钩子，如下所示应该可以工作：

```
(eval-after-load "paredit"
  #'(define-key paredit-mode-map (kbd "C-j") 'eval-last-sexp)) 
```

或者，如果由于某种原因不起作用，或者您只是更喜欢使用挂钩，您可以将上述调用添加到已激活`define-key`的主要模式的挂钩中。`paredit`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T02:05:30.640

由其中一个宏定义的每种模式都会`define-*-mode`自动运行相应的`MODE-hook`.

我看到 paredit-mode 是用 定义的次要模式`(define-minor-mode paredit-mode ...)`，因此它将运行`paredit-mode-hook`。

您可以键入`M-x` `find-function` `RET` `define-minor-mode` `RET`并搜索`run-hooks`以查看定义此行为的位置。

**编辑**（基于对问题的补充）：

它们是否都`C-x C-e`用作特定于模式的 eval-last-sexp 函数的默认绑定？这对他们来说似乎是一件一致的事情，如果是这样，那么您可以使用以下方法：

```
(local-set-key (kbd "C-j") (key-binding (kbd "C-x C-e"))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T20:58:48.760

有一个paredit-mode-hook。直到你添加一些东西，你才能看到它。很奇怪，但这就是钩子的行为方式。

但是，在您的情况下，最好的方法可能是清除 Cj 的 paredit 绑定：

```
(eval-after-load 'paredit
   #'(define-key paredit-mode-map (kbd "C-j") nil)) 
```

然后在每个主要模式挂钩中通过 local-set-key 设置您自己的。

# css - 使用窗口更改 DIV 宽度

> ID：11234698
> 
> 赞同：1
> 
> 时间：2012-06-27T20:57:26.630
> 
> 标签：css, html, window, size

我有两个 div：一个向左浮动，另一个向右浮动。右边的 div 是一个恒定的大小，但我希望左边的 div 根据窗口大小改变它的宽度。我目前将宽度设置为 75%，在一定尺寸下看起来很棒。但是，当窗口变得相对较大时，两个 div 之间的空间变得太大。无论窗口大小如何，如何设置左侧 div 的宽度，使其与右侧 div 的距离保持不变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:00:29.817

将最左边的 div 的宽度设置为`100%`并赋予它`margin-right`与 right 相同的宽度`div`。然后将 right`div`的位置设为绝对，并固定到页面的右上角。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:00:09.313

您可以将左侧浮动 div 设置为 100%，并为其设置与右侧浮动 div 一样宽的边距。那应该工作

像这个[jsfiddle](http://jsfiddle.net/jdhB8/)

# xen - 无法使用 libvirt Java 绑定连接到 XenServer

> ID：11234699
> 
> 赞同：1
> 
> 时间：2012-06-27T20:57:38.690
> 
> 标签：xen, libvirt

我正在帮助编写一个远程管理虚拟机的程序。当我尝试连接到 XenServer 计算机以发现虚拟机管理程序时，我收到“无法连接：无法读取 CA 证书'/etc/pki/CA/cacert.pem'：没有这样的文件或目录”错误。我已经尝试创建它正在寻找的 cacert.pem 文件，但这并不能解决任何问题。我读过这个特定的错误并不能准确地显示出了什么问题。

这只发生在我使用 Java 绑定时——我可以使用 virsh 成功连接到机器。我打开了 libvirt 的调试模式并尝试连接绑定和 virsh。我看到的唯一主要区别是 virsh 调用了几个 libvirt 不做的 virEvent 类型的方法。（我想，这可能只是使用我的自定义 ConnectAuth 类的 libvirt，它不提示输入密码）

使用：

*   libvirt 0.9.12 --with-xenapi
*   libvirt-java 0.4.7

我似乎找不到其他遇到此问题的人。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:18:28.130

我们最终不得不修改 libvirt-java 中的 Connect 对象。该对象仍然有效，但不知何故抛出了错误。这是一个混乱的 hack，但我们只是忽略了抛出的某些错误并传递了 Connect 对象并能够连接。

# java - 玩！重新编译后出现PessimisticLockException

> ID：11234703
> 
> 赞同：2
> 
> 时间：2012-06-27T20:57:47.147
> 
> 标签：java, hibernate, playframework

我目前正在使用 Java Play 2.0.1 和 h2 内存数据库。

我目前在我的一个页面上的表格中显示数据库中包含的所有项目，这工作正常，包括 CRUD 操作。但是，当我删除数据库中包含的所有项目，然后以某种方式修改我的代码（只是为了重新编译和重新加载页面，例如添加评论）时，当我尝试显示显示数据库项目的页面时我被抛出异常：

```
PessimisticLockException: Timeout trying to lock table 
```

从线

```
x = entityManager.createQuery("FROM X").getResultList(); 
```

我的删除方法：

```
@Transactional
  public static Result deleteEvent(Long hjid){
      entityManager.remove(entityManager.find(X.class, hjid));
      flash("success", "Event has been deleted");
      return redirect(routes.Application.events());
  } 
```

现在我尝试`db.default.url="jdbc:h2:mem:events`在我的application.conf中修改我的LOCK_TIMEOUT，以及设置MVCC = TRUE，但仍然抛出异常。

我可能认为的问题是我将 EntityManager 声明为静态字段

```
static EntityManager entityManager = entityManagerFactory.createEntityManager(); 
```

虽然我不确定这是否是错误的原因，或者这只是一个糟糕的想法和糟糕的做法，或者两者都不是。

问题是，为什么只有在重新编译和加载页面后才抛出异常？

# java - 在 Android 和纯 Java 中打印

> ID：11234707
> 
> 赞同：1
> 
> 时间：2012-06-27T20:58:07.557
> 
> 标签：java, android

如何将两者都打印到 Log.e/d/etc。和 System.out/err/etc.？我有一些在桌面上测试的代码，有时我在 Android 上使用它，我也想在那里查看日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:06:05.223

如果您只是使用`System.out.println(tag+": "+msg);`，它应该在您在常规 Java 应用程序中运行代码时输出到您的控制台，并`System.out`在从 Android 中运行时使用标记打印到 LogCat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:05:57.813

尝试类似的东西

```
/ Create a console handler
ConsoleHandler handler = new ConsoleHandler(); 
```

// 添加到记录器 Logger logger = Logger.getLogger("com.mycompany"); logger.addHandler(处理程序);

# javascript - 绑定到特定的 CSS 过渡

> ID：11234710
> 
> 赞同：2
> 
> 时间：2012-06-27T20:58:32.170
> 
> 标签：javascript, css, css-transitions

将鼠标悬停在元素上会翻转它。我希望在用户将鼠标悬停在元素上完成转换时运行 JavaScript 函数。

即，当用户不再将鼠标悬停在元素上时，我希望在元素返回其自然状态（在本例中为未翻转）时运行一些 JavaScript。

我试图绑定到该`webkitTransitionEnd`事件，但是当悬停转换完成以及鼠标关闭转换完成时会触发。如何区分这两种转换？

我的 CSS 看起来像这样：

```
.back {
position: absolute;
z-index: 800;
-webkit-transition: z-index 0s linear .25s, -webkit-transform .5s ease-in-out;
-moz-transition: z-index 0s linear .25s, -moz-transform .5s ease-in-out;
-webkit-transform: rotateY(-180deg);
-moz-transform: rotateY(-180deg);
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
}
.searchResult:hover .back {
position: absolute;
z-index: 900;
-webkit-transition: z-index 0s linear .25s, -webkit-transform .5s ease-in-out;
-moz-transition: z-index 0s linear .25s, -moz-transform .5s ease-in-out;
-webkit-transform: rotateY(0deg);
-moz-transform: rotateY(0deg);
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
} 
```

我的 JavaScript 看起来像这样（不合适，因为在完成鼠标悬停和鼠标悬停转换（即翻转和取消翻转）时触发）：

```
el.find('.back').bind("webkitTransitionEnd", function (e) { /* do stuff */ }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:26:40.543

我认为（我还没有进行超过 2 分钟的测试）我已经解决了这个问题。

解决方案是根据事件`target`元素的已知 CSS 属性在 javascript 中添加条件。在我的情况下，我知道 z-index 在翻转和非翻转状态下是不同的，并且在我的 javascript 中使用它似乎可以解决这个问题。

条件如下所示：

```
 if(e.originalEvent.propertyName === '-webkit-transform' && 
    $(e.originalEvent.target).css('z-index') === '800') { 

   /*we know we are at the end of the correct transition*/ 

 } 
```

然而，我的测试浏览器非常现代（在撰写本文时）：Chrome 22.0.1186.0 canary。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:28:14.493

事件侦听器实际上会触发多次，每个属性一次。您可以使用 event.propertyName 访问属性名称。把它们放在一起...

```
element.addEventListener("webkitTransitionEnd", function(e){
    if(e.propertyName == "width") {
        doSomething();
    }
}, false); 
```

或在 jQuery 中

```
 $(element).on("webkitTransitionEnd", function(e){
        if(e.originalEvent.propertyName == "width") {
            doSomething();
        }
    }); 
```

# javascript - 正则表达式在开始时将字符串与（逗号分隔的）数字匹配并拆分为数字和休息？

> ID：11234715
> 
> 赞同：0
> 
> 时间：2012-06-27T20:58:40.110
> 
> 标签：javascript, regex

给定一个字符串，例如：

`23,234,456 first second third`

如何将字符串拆分为两部分，其中第 1 部分包含*开头*的数字，第 2 部分包含其余部分——但前提是字符串以数字开头，并且数字可以用逗号分隔吗？换句话说，我想要两个结果：`23,234,456`和`first second third`. 如果该字符串中有一个数字不是第一个数字的一​​部分，那么它应该在第二个结果中。

到目前为止，我最好的尝试是在开始时抓住数字，是这样的：

`^[0-9]+(,[0-9]{3})*`

这似乎抓住了开始行的逗号分隔或非逗号分隔的数字。但是，当我在 Javascript 控制台中运行它时，我不仅得到了完整的数字，而且还得到了最后 3 位数字与它们前面的匹配`,`。（例如`23,234,456`和`,456`）。

至于将其余部分放入另一个变量中，我遇到了麻烦。我尝试使用`\b`，等等，但我认为我必须错过一些关于抓住其余部分的基本知识。

我在 Javascript 中这样做以防万一。

更多关于匹配和不匹配的示例。

`2 one two three`应该返回`2`并且`one two three`

`2345 one two three`应该返回`2345`并且`one two three`

`2 one 2 three`应该返回`2`并且`one 2 three`

`2,234 one two 3,000`应该返回`2,234`并且`one two 3,000`

第 1 部分和第 2 部分之间的空格可以包含在第 2 部分的开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:10:05.983

您需要为 first 和 rest 使用捕获组。试试这个正则表达式：

```
^(\d+(?:,\d+)*)\s+(.*) 
```

现在第 1 组是逗号分隔的数字，第 2 组是其余的。\s+ 吃掉中间的空白。（至少需要 1 个）。

当然，如果正则表达式根本不匹配，那么它不会以数字或逗号分隔的数字列表开头，后跟一个或多个空格字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:13:44.477

除非我大错特错，否则您可以简单地[`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)放在第一个空格上。

您还可以对照 来检查字符串`/^[0-9,]+ /`，如果不匹配，则可以首先跳过拆分。

编辑：不幸的是，我不认为 JavaScript 提供了一种简单的方法来分割字符的第一个实例。

这是一个匹配值并将它们放入捕获的组中的正则表达式：

```
^(?:([0-9,]+)\s)?(.*)$ 
```

# ivy - 下载 ivy 依赖项时，如何让 Eclipse 使用我的 IVY_HOME 变量？

> ID：11234724
> 
> 赞同：2
> 
> 时间：2012-06-27T20:59:26.587
> 
> 标签：ivy, ivyde

我的公司广泛使用 ivy 来下载依赖项。其中一些依赖项很大（约 500MB），需要一段时间才能从远程存储库下载。

为了构建我们的应用程序，我们有一个 ant 脚本，它将首先解析所有依赖项并部署到服务器。

我设置了一个“IVY_HOME”环境变量，以便将所有依赖项下载到 D:\ivy_home 而不是 C:\Users\.ivy2\ - 这是因为 D: 是我的 SSD，它明显更快，它是我的位于本地服务器目录 - 因此将文件从 ivy_home 复制到服务器非常快。

但是由于某种原因，当我在 eclipse 中使用 IvyDE 插件时 - 它总是想下载所有依赖项的单独副本并将它们放入我的 C:\ 中，这会导致几个问题：

1.  来自 ant 脚本的本地发布将不会在 eclipse 中被拾取，因为它们被放置在不同的位置
2.  已经在 D 中下载的依赖项：不会被拾取，这使得 eclipse 中的 ivy Resolve 比它需要的慢得多
3.  依赖项在 Eclipse 中的驱动速度较慢，因此执行搜索和执行这些 jar 的速度也较慢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-18T04:09:44.773

如何创建符号链接以将用户中的 .ivy2 替换为 D？我自己试过了，看起来效果很好。

以root身份打开cmd，然后执行这一行

```
mklink /d C:\Users\{username}\.ivy2 D:\.ivy2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T22:03:21.573

我将创建一个 ivysettings.xml 文件并使用[caches](http://ant.apache.org/ivy/history/latest-milestone/settings/caches.html)指令指定缓存的位置。例如，请参阅以下答案：

[我可以一起关闭 .ivy 缓存吗？](https://stackoverflow.com/questions/5019550/can-i-turn-off-the-ivy-cache-all-together/5023172#5023172)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T15:53:44.003

为什么不使用 ivysettings.xml 和属性文件全局设置 IVY。这个属性文件可能有这个：

```
ivy.default.ivy.user.dir=D:\ivy_home 
```

对于单个项目，您可以取消选中每个 IvyDE 库管理的“启用项目特定设置”，因此它们将使用 IVY 全局设置，并带有一个额外的 eclipse 环境配置。

# entity-framework - 实体框架不生成复杂类型？

> ID：11234729
> 
> 赞同：0
> 
> 时间：2012-06-27T20:59:51.640
> 
> 标签：entity-framework

我为存储过程创建了一个函数映射。存储过程从一个简单的表变量返回数据

```
 DECLARE @tblResults TABLE(
  KeyName VARCHAR(100), 
  ID INT IDENTITY, 
  DataType INT, 
  DayNo INT, 
  Consumption FLOAT, 
  SeriesName VARCHAR(20), 
  DayType INT, 
  DayKey VARCHAR(20)) 
```

我已经正常设置了复杂类型，但它不能作为复杂类型使用？

我已经进入 Designer.cs 文件并将 [Key()] 添加到 KeyName 字段，但这仍然不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:33:13.947

我设法解决了这个谢谢。我忘记了我需要在我的解决方案的 Web 端创建一个新的 ObjectQueryable 方法来返回新类型的对象。没有它，类型就不会转移到 silverlight 应用程序端。一旦我添加了它，删除了所有生成的代码并重新生成它工作:) 我仍然需要手动将 Key 属性添加到我的关键字段中，因为这让我感到刺痛，但我已经准备好了！我真的需要找到一种方法来阻止 EF 缓存东西，但这在我的另一个问题中有所涉及

# javascript - Javascript中的一次可调用函数

> ID：11234730
> 
> 赞同：1
> 
> 时间：2012-06-27T20:59:58.347
> 
> 标签：javascript, time, timer

我正在用 Javascript 开发一个测验组件，其中有一个 startTimer() 函数，它根据传递给它的值开始倒计时。该函数在页面加载和测验开始时被调用。

我不会让用户再次调用该函数并更改测验时间。

是否可以检测到该函数被第二次调用？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:05:40.777

任何用户都可以在他们的浏览器中禁用 JavaScript。

我建议您记录提供页面和返回服务器的答案之间的时间，并将其用作他们花费多长时间的最终来源。也许允许一点缓冲区来补偿网络延迟和页面呈现时间。

JavaScript 计时器可以是一个很好的 UI 功能，可以帮助用户知道他们还剩下多少时间，但**永远不要相信用户界面，因为聪明的用户会编写自己的 UI**（或者在这种情况下，将 UI 配置为不使用 JavaScript ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:05:56.567

如果您想阻止人们更改测验的任何方面，您将必须在服务器上实施限制。

要防止在客户端干预测验数据，即使不是不可能，也是非常困难的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-27T21:11:45.390

谢谢大家，我在网上找到了这个：

```
function createChance(){  
    var chanceLeft = true;  
    return function(){  
        if(chanceLeft){  
            console.log("This was the only chance you had.");  
             chanceLeft = false;  
        }  
        else{  
            console.log('Sorry: you already used your chance');  
        }  
    };  
}  

var chance = createChance();  
chance();  
 // This was the only chance you had.  
chance(); 
// Sorry: you already used your chance 
```

有什么技巧吗？？？？

# c++ - 由枚举初始化的向量

> ID：11234731
> 
> 赞同：-2
> 
> 时间：2012-06-27T21:00:01.090
> 
> 标签：c++, vector, enums

以下代码未构建。

```
struct some_struct {
    some_struct() {
      ... do something here to specify size of v; how ??
    }
    enum {
       ZERO,
       ONE,
       TWO
    };

    static std::vector<std::string> v(TWO);
}; 
```

欣赏任何想法.. 似乎没有任何迹象表明这是非法使用。

错字：修正了向量语法和更正：我只在 2005/2008 年测试过，而不是 2010 年。对于那些询问的人的错误信息：

```
error C2061: syntax error : identifier 'TWO' 
```

进一步编辑：

看起来编译器认为`v`是一个返回 type 的函数`std::vector<std::string>`；所有这些都在里面`struct`（我现在进一步更正了我的帖子以进一步澄清这一点）。也许我需要省略它与类型混淆的大小参数并在构造函数中的某处声明大小？我的意思是让这个向量成为结构的静态数据成员。如何让编译器理解这一点？

注意：在 Linux 上，我在一个类似于我最初拥有的代码（没有结构）的独立代码上对其进行了测试......所以也许它不会在 Linux 上通过这个更正进行编译。所以我删除了它在 Linux 上构建 OK 的评论。道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T22:05:50.663

您不能在类声明中初始化类成员。您需要在外部实例化它：

```
#include <vector>
#include <string>

struct some_struct {
    some_struct() {
    }
    enum {
       ZERO,
       ONE,
       TWO
    };

    static std::vector<std::string> v;
};

std::vector<std::string>
some_struct::v = std::vector<std::string>(TWO);

int main() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:14:21.617

您不能像那样在标头中初始化向量。由于它是静态的，因此您可以在源文件中声明它的位置：

```
std::vector<std::string> some_struct::v(TWO); 
```

如果它不是静态的，您将在类构造函数的初始化列表中进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:10:52.950

**注意：以下所有内容均因 OP 对原始问题的更正而无效。**

这一切都取决于你`vector`从哪里得到的定义。如果您在某个地方包含了定义`vector<>`模板的标准 C++ #include 文件（或者，最近的`std::vector<>`模板），那么您将收到错误，因为它被定义为模板但未提供类型。它期望类似：

```
std::vector<int> v; 
```

如果您一路上没有包含标准文件，它会从其他地方获取向量的定义，而 Lord 只知道它期望什么样的构造函数参数。

无论如何，vector 作为一个类是非标准的，如果声明和实现从一个环境到另一个环境不同（或不存在）也就不足为奇了。

# c# - 从 C# 调用 Oracle 存储过程

> ID：11234734
> 
> 赞同：2
> 
> 时间：2012-06-27T21:00:05.740
> 
> 标签：c#, oracle, stored-procedures, oracle11g, odp.net

我在使用带有“ODP.net”的“C#”中的 SP 时遇到问题。

执行此操作时：

```
 List<OracleParam> param = new List<OracleParam>();
            param.Add(new OracleParam("IdEstivantIn", OracleDbType.Decimal, estivant.IdEstivant, ParameterDirection.Input));
            param.Add(new OracleParam("NomIn", OracleDbType.NClob, estivant.Nom, ParameterDirection.Input));
            param.Add(new OracleParam("PrenomIn", OracleDbType.NClob, estivant.Prenom, ParameterDirection.Input));
            param.Add(new OracleParam("FixeIn", OracleDbType.NClob, estivant.Fixe, ParameterDirection.Input));
            param.Add(new OracleParam("PortableIn", OracleDbType.NClob, estivant.Portable, ParameterDirection.Input));
            param.Add(new OracleParam("MailIn", OracleDbType.NClob, estivant.Mail, ParameterDirection.Input));
            param.Add(new OracleParam("RueIn", OracleDbType.NClob, estivant.Rue, ParameterDirection.Input));
            param.Add(new OracleParam("NumeroRueIn", OracleDbType.NClob, estivant.NumeroRue, ParameterDirection.Input));
            param.Add(new OracleParam("CodePostaleIn", OracleDbType.NClob, estivant.CodePostal, ParameterDirection.Input));
            param.Add(new OracleParam("VilleIn", OracleDbType.NClob, estivant.Ville, ParameterDirection.Input));
            param.Add(new OracleParam("PaysIn", OracleDbType.NClob, estivant.Pays, ParameterDirection.Input));
            //param.Add(new OracleParam("PaysIn", OracleDbType.RefCursor, null, ParameterDirection.ReturnValue));

            con.ExecuteReturn(CommandType.StoredProcedure, "TAMARIS.PACKAGE_EST.updateEst", param); 
```

我收到此错误：

```
ORA-12704: character set mismatch
ORA-06512: at "TAMARIS.PACKAGE_EST", line 94
ORA-06512: at line 1 
```

在我的数据库中，PK 是一个数字，所有其他字段都是 NCLOBS。

我的 SP 的规格如下：

```
PROCEDURE updateEst (
      IdEstivantIn IN number,
      NomIn IN nclob ,
      PrenomIn IN nclob,
      FixeIn IN nclob,
      PortableIn IN nclob,
      MailIn IN nclob,
      RueIn IN nclob,
      NumeroRueIn IN nclob,
      CodePostaleIn IN nclob,
      VilleIn IN nclob,
      PaysIn IN nclob) IS
 BEGIN 
```

对于另一个 SP，我还有另一个问题，我认为这一定是相关的。

错误如下：

```
ORA-06550: line 1, column 15:
PLS-00306: wrong number or types of arguments in call to 'INSERTEST'
ORA-06550: line 1, column 7:
PL/SQL: Statement ignored 
```

我打的电话：

```
 param.Add(new OracleParam("Nom_in", OracleDbType.NClob, estivant.Nom, ParameterDirection.Input));
            param.Add(new OracleParam("Prenom_in", OracleDbType.NClob, estivant.Prenom, ParameterDirection.Input));
            param.Add(new OracleParam("Fixe_in", OracleDbType.NClob, estivant.Fixe, ParameterDirection.Input));
            param.Add(new OracleParam("Portable_in", OracleDbType.NClob, estivant.Portable, ParameterDirection.Input));
            param.Add(new OracleParam("Mail_in", OracleDbType.NClob, estivant.Mail, ParameterDirection.Input));
            param.Add(new OracleParam("Rue_in", OracleDbType.NClob, estivant.Rue, ParameterDirection.Input));
            param.Add(new OracleParam("NumeroRue_in", OracleDbType.NClob, estivant.NumeroRue, ParameterDirection.Input));
            param.Add(new OracleParam("CodePostale_in", OracleDbType.NClob, estivant.CodePostal, ParameterDirection.Input));
            param.Add(new OracleParam("Ville_in", OracleDbType.NClob, estivant.Ville, ParameterDirection.Input));
            param.Add(new OracleParam("Pays_in", OracleDbType.NClob, estivant.Pays, ParameterDirection.Input));
            param.Add(new OracleParam("", OracleDbType.Int32, null, ParameterDirection.ReturnValue));

            con.ExecuteStoredReturn(CommandType.StoredProcedure, "PACKAGE_EST.insertEst", param); 
```

我错过了什么？是因为我使用的是 NClobs 而不是 varchars 吗？

我真的不知道这里发生了什么，但我认为它一定是一些简单的错误。

# vba - 如何使用列标题选择不同范围的单元格以从文件名填充数据

> ID：11234737
> 
> 赞同：0
> 
> 时间：2012-06-27T21:00:28.287
> 
> 标签：vba, excel, excel-2007

这是来自这篇文章的另一个问题：[如何使用 excel 文件的文件名来更改一列单元格？](https://stackoverflow.com/questions/11192167/how-to-use-the-filename-of-an-excel-file-to-change-a-column-of-cells)

我注意到在上一篇文章的代码中它引用了特定的单元格（J2，K2）。但是，在使用代码时，当列更改时出现错误。所以现在我正在寻找一种方法来修改下面的代码，以使用标题列的名称来填充第二列，而不是引用特定的单元格。我认为唯一真正需要调整的行是 myRng 行，但我会提供我正在尝试的所有代码以供参考。

如果您没有阅读其他帖子，我将描述该问题。我正在尝试根据“名称”列和文件名填写第二列（名称+类型）。当我在代码中引用 K 或 J 行时，一切正常，但是当我加载不同的文件并且列位置发生变化时，一切都变得混乱了。

我需要将第二列（名称+类型）填充为与第一列（名称）完全相同的数字或行，这就是我使用范围（“K2：K”和lastCell）公式的原因。

有没有办法做到这一点？

当前尝试的 VBA 代码：

```
' Insert Column after name and then rename it name+type

Rows(1).Find("name").Offset(0, 1).EntireColumn.Insert
Rows(1).Find("name").Offset(0, 1).FormulaR1C1 = "name+type"

Dim myRng As Range
Dim lastCell As Long
Dim myOtherRange As Range
Dim column2Range As Range

myOtherRange = Rows(1).Find("name")
column2Range = Rows(1).Find("name+type")
lastCell = Range(myOtherRange).End(xlDown).Row
Set myRng = Range("K2:K" & lastCell)

myOtherRange.FormulaR2C1 = "=LEFT(MID(CELL(""filename""),SEARCH(""["",CELL(""filename""))+1, SEARCH(""]"",CELL(""filename""))-SEARCH(""["",CELL(""filename""))-1),5)&RC[-1]"
myOtherRange.FormulaR2C1.Select
Selection.Copy
myRng.Select
ActiveSheet.Paste 
```

初稿 VBA 代码：

```
' Insert Column after name and then rename it name+type

Rows(1).Find("name").Offset(0, 1).EntireColumn.Insert
Rows(1).Find("name").Offset(0, 1).FormulaR1C1 = "name+type"

'Add the contents to the name+type column

Range("K2").Select
ActiveCell.FormulaR1C1 = "=LEFT(MID(CELL(""filename"",RC[-1]),SEARCH(""["",CELL(""filename"",RC[-1]))+1,SEARCH(""]"",CELL(""filename"",RC[-1]))-SEARCH(""["",CELL(""filename"",RC[-1]))-1),5)&RC[-1]"
Range("K2").Select
Selection.Copy
Range("K2:K8294").Select
ActiveSheet.Paste 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:27:12.423

> @Scott 或 Siddharth Rout 可能 =) – Jonny 11 小时前

我永远不会推荐这个:) SO 到处都是可以为您提供帮助的专家。你为什么要限制你能得到的帮助？;)

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim lRow As Long, aCol As Long
    Dim aCell As Range

    Set ws = Sheets("Sheet1") '<~~ Change this to the relevant sheet name

    With ws
        Set aCell = .Rows(1).Find("Name")

        '~~> Check if the column with "name" is found
        If Not aCell Is Nothing Then
            aCol = aCell.Column
            .Columns(aCol + 1).EntireColumn.Insert
            .Cells(1, aCol + 1).Value = "Name+Type"
            .Activate

            .Rows(1).Select

            With ActiveWindow
                .SplitColumn = 0
                .SplitRow = 1
                .FreezePanes = True
            End With

            '~~> Get lastrow of Col which has "name"
            lRow = .Range(Split(.Cells(, aCol).Address, "$")(1) & .Rows.Count).End(xlUp).Row

            ThisWorkbook.Save

            '~~> Add the formula to all the cells in 1 go.
            .Range(Split(.Cells(, aCol + 1).Address, "$")(1) & "2:" & _
            Split(.Cells(, aCol + 1).Address, "$")(1) & lRow).Formula = _
            "=LEFT(MID(CELL(""filename"",RC[-1]),SEARCH(""["",CELL(""filename"",RC[-1]))+1," & _
            "SEARCH(""]"",CELL(""filename"",RC[-1]))-SEARCH(""["",CELL(""filename"",RC[-1]))-1),5)&RC[-1]"

            .Columns("A:AK").Columns.AutoFit
        Else
            MsgBox "Name Column Not Found"
        End If
     End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:09:13.427

在修改了 Siddharth 提供的代码之后，这是对我有用的最终代码。如果没有此编辑，还需要删除格式和公式来搜索并将文件名添加到单元格中的保存功能不起作用。我还必须将工作表更改为 activeSheet，因为它一直在变化。这是代码：

```
Sub Naming()

Dim LR As Long, i As Long, lngCol As Long

lngCol = Rows(1).Find("NAME", lookat:=xlWhole).Column 'assumes there will always be a column with "NAME" in row 1

Application.ScreenUpdating = False

LR = Cells(Rows.Count, lngCol).End(xlUp).Row

For i = LR To 1 Step -1

    If Len(Cells(i, lngCol).Value) < 4 Then Rows(i).Delete

Next i

Application.ScreenUpdating = True

' Insert Column after NAME and then rename it NAME+TYPE

Dim ws As Worksheet
Dim lRow As Long, aCol As Long
Dim aCell As Range

Set ws = ActiveSheet 'Need to change to the Active sheet

With ws
    Set aCell = .Rows(1).Find("NAME")

    ' Check if the column with "NAME" is found, it is assumed earlier
    If Not aCell Is Nothing Then
        aCol = aCell.Column
        .Columns(aCol + 1).EntireColumn.Insert
        .Cells(1, aCol + 1).Value = "NAME+TYPE"
        .Activate

    ' Freeze the Top Row

    Rows("1:1").Select
    With ActiveWindow
        .SplitColumn = 0
        .SplitRow = 1
    End With
    ActiveWindow.FreezePanes = True

        ' Get lastrow of Col which has "NAME"
        lRow = .Range(Split(.Cells(, aCol).Address, "$")(1) & .Rows.Count).End(xlUp).Row

        'Save the file and format the filetype
        Dim wkb As Workbook
        Set wkb = ActiveWorkbook 'change to your workbook reference
        wkb.SaveAs Replace(wkb.Name, "#csv.gz", ""), 52 'change "csv.gz" to ".xlsm" if need be

        ' Add the formula to all the cells in 1 go.
        .Range(Split(.Cells(, aCol + 1).Address, "$")(1) & "2:" & _
        Split(.Cells(, aCol + 1).Address, "$")(1) & lRow).Formula = _
        "=LEFT(MID(CELL(""filename""),SEARCH(""["",CELL(""filename""))+1, SEARCH(""]"",CELL(""filename""))-SEARCH(""["",CELL(""filename""))-1),5)&RC[-1]"

        .Columns("A:AK").Columns.AutoFit
    Else
        MsgBox "NAME Column Not Found"
    End If
 End With

' Change the Range of the cursor

Range("A1").Select
Application.CutCopyMode = False

End Sub 
```

# javascript - 删除重复标签

> ID：11234740
> 
> 赞同：4
> 
> 时间：2012-06-27T21:00:33.220
> 
> 标签：javascript, jquery

我有一个页面，由具有错误 LI 元素的服务器生成，带有两个结束 li 标签

```
<li>Whatever</li></li> 
```

所有 jQuery 操作在 Firefox 中都能正常工作，但在 IE（7 和 8）中却不行。我想`</li>`在开始我的功能之前删除重复项，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:05:59.333

无法通过客户端修复，除非您的浏览器不符合逻辑。jQuery 控制的是 DOM，而不是原始的 HTML，因此，它无法编辑已清理的损坏标签。只需修复您的服务器端脚本。

如果你真的想要一个 hacky、可怕、糟糕的 JS 解决方案，你可以在页面加载后 AJAX 请求页面本身，从页面中删除 AJAX 调用（以避免无限循环），删除损坏的元素，然后加载那个 HTML在新窗口中。请永远不要那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:18:20.380

如果可能，您当然应该修复生成页面的代码。

如果这是不可能的，那么你前面的路很坎坷。您无法修复标记，因为它在您对其进行任何处理之前已被解析，因此您必须修复浏览器从损坏的标记生成的任何内容。

每个浏览器都有不同的方式来处理不正确的代码，因此您必须测试您可以使用的所有可能的浏览器，包括 Internet Explorer 的每个当前版本（7、8、9、10 和可能的 6）。这很麻烦，因为一次只能安装一个版本的 IE。幸运的是，您可以使用较新版本的开发人员工具来模拟旧版本，但它仍然不是 100% 准确的模拟。

有些浏览器可能会忽略额外的结束标签，有些浏览器会添加额外的列表元素。您必须编写代码来处理每个浏览器从标记生成的任何内容，并修复元素。

# android - PayPal 与 Android 的集成

> ID：11234743
> 
> 赞同：3
> 
> 时间：2012-06-27T21:00:38.097
> 
> 标签：android, paypal

我已经看到了一些相关的问题，但没有人关注我遇到的具体问题：

我正在使用 PayPal MPL 库。

我构建我的 PayPalPayment 对象，然后为结帐创建活动。运行良好。我的问题是，在 ResultDelegate 上，我需要从我的活动中调用一个函数，该函数在付款后发生并进行一些更改（例如存储 SharedPreferences 等）。

所以是这样的：

```
public class ResultDelegate implements PayPalResultDelegate, Serializable {
    public void onPaymentSucceeded(String payKey, String paymentStatus) {
        System.out.println("SUCCESS, You have successfully completed your transaction.");
        System.out.println("PayKey: "+payKey);
        System.out.println("PayStatus: "+paymentStatus);

        callMyCustomAfterPaymentFunction();
    }
    ...
} 
```

现在的问题是，我尝试为 ResultDelegate 创建一个接受我的活动的构造函数。我现有的代码是：

```
//On the activity class
public class MainMenuActivity extends Activity {
    public void onCreate(Bundle savedInstanceState)
    {
        ...
        Button buy = (Button) findViewByID(R.id.buy_button);
        buy.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v)
            {
                new PurchaseTask(activity).execute();
            }
        }
    }
}

public class PurchaseTask extends AsyncTask <String, Void, String> {
    protected String doInBackground()
    {
        ...
        PayPal pp = PayPal.getInstance();
        CheckoutButton cb = pp.getCheckoutButton(...);
        cb.setOnClickListener(new View.OnClickListener(){
            public void onClick(View v){
                ResultDelegate delegate = new ResultDelegate(myActivity);
                Intent checkout = PayPal.getInstance().checkout(paument, activity, delegate);
                activity.StartActivity(checkoutIntent);
            }
        }
    }
}

//On the ResultDelegate class

public class ResultDelegate implements PayPalResultDelegate, Serializable {
    private Activity myActivity;

    public void onPaymentSucceeded(String payKey, String paymentStatus) {
        System.out.println("SUCCESS, You have successfully completed your transaction.");
        System.out.println("PayKey: "+payKey);
        System.out.println("PayStatus: "+paymentStatus);

        myActivity.performAfterPaymentOperations();
    }
    ...
} 
```

所以目标是从 ResultDelegate 调用活动函数。或者更简单，只是为了能够在 ResultDelegate onPaymentSucceeded() 触发时存储一些 SharedPreference 更改。

但是我得到一个 NotSerializableException 提到我的 MyActivity 字段不是可序列化的。

因此，然后我将瞬态标识符添加到 ResultDelegate 内的活动字段中，但现在我得到了 NullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T21:26:26.633

[贝宝移动结账指南](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_MPL_Developer_Guide_and_Reference_Android.pdf)

贝宝网站上提供的实施与您的不同。他们正在做`startActivityForResult()`开始`PaypalActivity`。并且在`onActivityResult()`方法中，他们正在检查`statusCode`以检查交易状态并采取相应行动。

按照该文档进行实施。

在您的代码中，我没有找到使用`AsyncTask`. 你`ResultDelegate`在`Serializable`哪里，`Activity`这不是它抛出的原因`NotSerializableException`。

**编辑：**

当您正在为 Google Android 平台开发时，为什么不使用 Google Checkout In-App 呢？

**编辑：**

`PaypalActivity`当您完成时，将调用此方法。该活动将传递`resultCode`给此`onActivityResult`方法。

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (resultCode) {
    case Activity.RESULT_OK:
        // The payment succeeded
        String payKey = data.getStringExtra(PayPalActivity.EXTRA_PAY_KEY);
        // Tell the user their payment succeeded
        break;
    case Activity.RESULT_CANCELED:
        // The payment was canceled
        // Tell the user their payment was canceled
        break;
    case PayPalActivity.RESULT_FAILURE:
        // The payment failed -- we get the error from the EXTRA_ERROR_ID
        // and EXTRA_ERROR_MESSAGE
        String errorID = data.getStringExtra(PayPalActivity.EXTRA_ERROR_ID);
        String errorMessage = data
                .getStringExtra(PayPalActivity.EXTRA_ERROR_MESSAGE);
        // Tell the user their payment was failed.
    }
} 
```

问候， 阿基夫·哈米德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T12:16:20.807

您可以像这样创建自定义侦听器：

创建一个自定义监听器：

```
 OnDoubleTap mListener;

    // Double tap custome listenre to edit photoes
    public interface OnDoubleTap {
        public void onEvent(Uri imgPath, int mPos);

    }

    public void setDoubleTapListener(OnDoubleTap eventListener) {
        mListener = eventListener;

    } 
```

现在像这样在任何你想要的地方调用它：

```
mListener.onEvent(Uri, 1)); 
```

现在，每当您调用此侦听器时，这将在您使用此侦听器的活动中触发，如下所示：

```
myCanvas.setDoubleTapListener(new OnDoubleTap() {

        @Override
        public void onEvent(Uri imgPath, int Pos) {
            // TODO Auto-generated method stub
            Toast.makeText(mContext, "LISTENER WORKING !!!", Toast.LENGTH_SHORT).show();

        }
    }); 
```

myCanvas 是您创建侦听器的类的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T12:42:12.613

试试这个解决方案：

```
PayPalPayment thingToBuy = new PayPalPayment(new BigDecimal(price),getResources().getString(R.string.curruncy_code), getResources().getString(R.string.app_name),
                    PayPalPayment.PAYMENT_INTENT_SALE);
            Intent intent = new Intent(CreateEventStep4.this, PaymentActivity.class);
            intent.putExtra(PaymentActivity.EXTRA_PAYMENT, thingToBuy);
            startActivityForResult(intent, REQUEST_PAYPAL_PAYMENT); 
```

* * *

```
PaymentConfirmation confirm = data.getParcelableExtra(PaymentActivity.EXTRA_RESULT_CONFIRMATION);
            if (confirm != null) {
                try {

                    Log.e("paymentExample", confirm.toJSONObject().toString());

                    JSONObject jsonObj=new JSONObject(confirm.toJSONObject().toString());

                    String paymentId=jsonObj.getJSONObject("response").getString("id");
                    System.out.println("payment id:-=="+paymentId);

                    screenShotFile = takeScreenshot(frmTemplate);
                    uploadImage(myEvent.getEvent_id(),screenShotFile);

                } catch (JSONException e) {
                    Log.e("paymentExample", "an extremely unlikely failure occurred: ", e);
                } 
```

# blackberry - 专注于黑莓领域

> ID：11234753
> 
> 赞同：0
> 
> 时间：2012-06-27T21:01:25.943
> 
> 标签：blackberry, focus

我的屏幕上有 5 个字段。我在 9300 上工作，而不是触摸设备

```
--------       ---------
   1              2
--------       ---------
------------------------
            3'/3''
-------------------------
            4
------------------------ 
```

我希望当我单击字段 1 时焦点更改为字段 3'，如果我单击字段 2 焦点更改为字段 3''。当我单击向下按钮时，焦点更改为字段 4。

我所知道的重点是在第 1 场，然后是第 2 场，然后是第 3 场。我无法访问字段 3' 或传递到字段 4。如何订购字段的焦点 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T01:12:31.447

焦点通过您的字段转移的顺序通常由您`add()`将它们转移到它们的顺序决定`Manager`。

您没有完全指定**所有**转换应该如何工作，但这样的事情可能会起作用：

```
public void MyManager(long style) {
   super(style);

    Field one = new LabelField("hello");
    Field two = new BitmapField(image);
    Field threePrime = new EditField("");
    Field threeDoublePrime = new EditField("");
    Field four = new LabelField("goodbye");

    add(one);
    add(threePrime);
    add(two);
    add(threeDoublePrime);
    add(four);
} 
```

如果您想要比这更复杂的东西，您可以在您的自定义子类（包含这五个对象）中[覆盖。`navigationMovement(int,int,int,int)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#navigationMovement%28int,%20int,%20int,%20int%29)`Manager``Manager``Field`

[有关该技术的信息，请参阅这篇文章。](http://supportforums.blackberry.com/t5/Java-Development/How-to-move-focus-left-right-up-down/m-p/101326/highlight/true#M11384)

# java - 是否可以在java中定义一组线程的执行顺序

> ID：11234757
> 
> 赞同：0
> 
> 时间：2012-06-27T21:02:13.887
> 
> 标签：java, multithreading

我的理解是理论上线程是并行执行的。JVM决定；当资源可用时，从等待线程队列中选择哪个线程（基于某种算法）。

因此，我们不能为线程提供/强制执行序列。

假设我的 java 应用程序有 3 个线程，t1、t2 和 t3。

出于某种特定原因；我希望线程按以下顺序执行：t3 然后 t1 然后 t2。

是否有可能做到这一点？java是否提供了任何方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:24:53.680

使用执行器：

```
executor.execute(runnable1);
wait();
executor.execute(runnable2);
wait();
executor.execute(runnable3);
wait(); 
```

当然，每个 Runnable 都必须以`notify()`语句结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:25:49.730

**不要使用线程**，是直接的答案。

如果您不希望代码乱序运行，那么您为什么要使用线程呢？像往常一样一步一步地执行事情。

如果您希望线程的某些*部分*按顺序运行，则使用标准并发机制，如锁、等待/通知和信号量，但如果您只是希望整个操作按特定顺序运行，那么...按顺序运行它们. 没有线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-09T17:40:53.217

自 java 8 以来，这变得非常容易使用[`CompletableFuture`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html)：

```
CompletableFuture.runAsync(runnable3)
            .thenRunAsync(runnable1)
            .thenRunAsync(runnable2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T21:10:02.207

您无法告诉线程调度程序执行线程的顺序。如果您需要确保在线程 A 上运行的某段代码必须在线程 B 上运行的另一段代码之前运行，则必须使用锁或强制执行该顺序`wait()`/ `notify()`。

例如，您可以使用两个线程都可以访问的变量作为“标志”来指示线程 B 继续执行是否安全。线程 B 可以`wait()`在一个循环中检查该变量的值。然后当线程 B 可以安全运行时，线程 A 可以设置变量并使用`notify()`.

所以是的，可以在不同线程上发生的事情之间强制执行所需的顺序。不过，一般来说，您希望避免编写如此低级、详细的代码。很容易出错并导致微妙的、难以发现的错误。在处理多线程代码时，如果可以，请*始终*尝试使用高级构建块。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T21:31:45.020

您可以在另一个线程上加入一个线程，这样他就会在另一个线程完成时运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-05T19:03:44.683

## 您可以为线程设置顺序。

我试图模拟你的情况：

```
public class ThreadJoinExample {
    private static final Thread FIRST = new Thread( new RunnableImpl(), "first" );
    private static final Thread SECOND = new Thread( new RunnableImpl(), "second" );
    public static void main(String[] args) {
        //here have started current thread or "main" thread that will control above threads
        FIRST.start();
        //waiting 2 seconds, "stop" your current thread and after current thread will start this "t3" thread until it will dead
        try {
            FIRST.join(2000);
        } catch (InterruptedException e) {
            System.out.println();
            e.printStackTrace();
        }
        SECOND.start();
        //"stop" your current thread immediately and run "t1" thread until it will dead.
        try {
            SECOND.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        //Or we can wait for all threads and in the end - finish current main thread
        try {
            FIRST.join();
            SECOND.join();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Current thread is going die");
    }
}
class RunnableImpl implements Runnable{

    @Override
    public void run() {
        System.out.println("Started thread: "+Thread.currentThread().getName());
        try {
            Thread.sleep(4000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Thread is going die: "+Thread.currentThread().getName());
    }
} 
```

* * *

**输出：**

```
Started thread: first
Started thread: second
Thread is going die: first
Thread is going die: second
Current thread is going die 
```

**摘要：**使用**.join()**方法，我们可以将当前线程移动到 Runnable 状态，直到“加入的线程”死掉

# forms - Symfony2：如何使 php_intl 扩展可用于 Symfony2？

> ID：11234761
> 
> 赞同：6
> 
> 时间：2012-06-27T21:02:29.217
> 
> 标签：forms, symfony, setattribute

我正在尝试在 Symfony 上关注此文档：http: [//symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

好的，这就是我的事情，我已经将我的表单外部化并创建了一个特定的表单类来处理流程并能够重用它。

那么，当我提交表单时会发生什么，无论信息是否适合我的班级，我都会收到这个致命错误：

> 致命错误：在 C:\Program Files (x86)\wamp\www\QNetworks\vendor\symfony\src\Symfony\Component\Form\Extension\Core\DataTransformer\ 中的非对象上调用成员函数 setAttribute()第 130 行调用堆栈上的 NumberToLocalizedStringTransformer.php

我正在使用 php 5.3.9 运行，并且我的 intl 扩展已安装并激活，但是当我运行 app/check.php 命令时，我看到：

> [[WARNING]] 检查 intl 扩展是否可用：失败
> 
> *** 安装并启用 intl 扩展（用于验证器）***

所以我不明白这个扩展有什么问题。我应该重新安装它吗？当我去这里时：http: [//php.net/manual/en/intl.requirements.php](http://php.net/manual/en/intl.requirements.php) 我看到我可以安装 PECL 或 ICU 库，但我不知道我是否应该以及是否有任何关系我的问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:33:02.517

您的 Intl 扩展必须正确配置。检查您的服务器是否真的使用 phpinfo() 激活

然后在您的 php.ini 上激活日志记录：

```
[intl]
intl.error_level = E_WARNING
extension=php_intl.dll 
```

并检查日志

如果它被激活，则可能是故障。尝试将 dll 重新下载到 c:\PHP\ext\php_intl.dll

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:21:51.233

注意你有两个 php.ini ：

*   *wamp\bin\php\php5.3.13
*   *wamp\bin\apache\apache2.2.22\bin

您应该在两者中取消注释 extension=php_intl.dll 。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-30T13:13:37.230

启用 intl 扩展后，您需要将一些文件复制到 apache bin 目录。它可以帮助你：[http ://www.youtube.com/watch?v=gtIcpdPzXiE](http://www.youtube.com/watch?v=gtIcpdPzXiE)

# ios - 使用 OpenGL ES 2.0 调整图像大小

> ID：11234762
> 
> 赞同：1
> 
> 时间：2012-06-27T21:02:40.007
> 
> 标签：ios, image-processing, avfoundation, opengl-es-2.0

我的问题很简单：我必须处理视频的每一帧。该过程计算一个区域以在原始帧上进行裁剪。为了获得更好的性能，我必须缩小原始帧。如今，这要归功于一个专门的图书馆。但是，它很慢。由于 OpenGL ES 2.0 glsl，我们想知道是否有可能缩小此帧。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:16:36.790

如果您使用 AV Foundation 从磁盘加载视频或从相机中提取视频，您可以使用我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架为您处理底层的 OpenGL ES 处理。

具体来说，您可以使用 GPUImageCropFilter 在 CGRect 中使用归一化的 0.0-1.0 坐标裁剪输入视频的选定区域。FilterShowcase 示例展示了如何在实践中对来自摄像机的实时视频进行操作。有了这个，如果你不想的话，你不需要接触任何手动的 OpenGL ES API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T19:59:42.490

最后，我将使用帧缓冲区对象来渲染我的纹理。我将视口设置为所需的大小并像往常一样渲染我的纹理。为了取回下采样的图像，我将使用 glGetReadPixels。

大卫

# c++ - TOKEN_ELEVATION_TYPE 未在此范围内声明，我做错了什么？

> ID：11234763
> 
> 赞同：0
> 
> 时间：2012-06-27T21:02:42.573
> 
> 标签：c++, winapi

`windows.h`包括在内，代码：

```
#include <windows.h>

int main() {
  HANDLE hToken;
  DWORD dwSize;
  TOKEN_ELEVATION_TYPE pElevationType = TokenElevationTypeDefault;
  OpenProcessToken(GetCurrentProcess(),TOKEN_ADJUST_PRIVILEGES, &hToken);
  GetTokenInformation(hToken, TokenElevationType, pElevationType, sizeof(TOKEN_ELEVATION_TYPE), &dwSize)
} 
```

编译器是 MinGW 4.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:06:17.477

这是 Windows API 中相关枚举的一个相对较新的添加，可能您没有所需的 Platform SDK 级别 - 确认`winnt.h`从哪里获取，如果此值丢失，请追踪正确的 Platform SDK你的。

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb530718(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530718(v=vs.85).aspx)

> 要求
> 
> 支持的最低客户端
> Windows Vista
> 
> 支持的最低服务器
> Windows Server 2008
> 
> 头文件
> Winnt.h

WSrv 2008 的 Windows SDK 在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=11310)。

# c# - 水晶 ReportDocument 对象中的默认 ExportOptions 在哪里

> ID：11234767
> 
> 赞同：1
> 
> 时间：2012-06-27T21:03:26.473
> 
> 标签：c#, pdf, crystal-reports, reportdocument

我正在使用 CR for VS2010 以编程方式从 Crystal Report 文件生成 PDF 和 Excel 文档。对于 Crystal Reports 2008 中的某些报表，它们在以下选项中选中了“从组树创建书签”：

> 文件 > 导出 > 导出选项 > PDF 格式

如果该特定报告已选中该选项，我想使用该选项导出，但我无法在 ReportClass 对象的任何位置找到该选项。如何判断 .rpt 文件是否选择了该文件？还是 ReportClass 对象不会从 .rpt 文件中检索到它？

伪代码如下：

```
 using (var report = new ReportClass { FileName = "C:/Reports/" + name + ".rpt" })
        {
            report.Load();
            /* set connections */

            /* set parameters */

            /* set the export type */

            /* set the content type and export options */

            if (showBookmarksForPDF && exportType == ExportFormatType.PortableDocFormat)
                AdjustExportOptions();

            /* export to stream */

            return new FileStreamResult(stream, contentType);
        } 
```

注意：我可以添加书签就好了，但我只想对需要它的 rpt 这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:40:21.833

很抱歉，但我认为 ReportClass 对象不会从 .rpt 文件继承此数据。![在此处输入图像描述](../Images/9dddcd1dc1be7b31b765e4c5adc18526.png)

我猜这个数据只能设置，不能直接检索。您可以使用其他方法来解决这个问题，例如在文件名中标记它。

# asp.net-mvc - 从递归模型创建表单

> ID：11234771
> 
> 赞同：7
> 
> 时间：2012-06-27T21:03:31.420
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, recursion

我有一个这样的递归模型：

```
public class Node
{
    public int Id { get; set; }
    public string Text { get; set; }
    public IList<Node> Childs { get; set; }

    public Node()
    {
        Childs = new List<Node>();
    }
} 
```

我正在使用以下代码构建一棵带有剃刀视图的树：

```
<ul>
    @DisplayNode(Model)
</ul>

@helper DisplayNode(Node node) {
    <li>
        @node.Text

        @if(node.Childs.Any())
        {
            <ul>
                @foreach(var child in node.Childs)
                {
                    @DisplayNode(child)
                }
            </ul>
        }
    </li>
} 
```

一切正常，我的树渲染，但我需要在树的每一行上添加一个文本框，我想输入这样的名称：

```
Childs[0].Childs[1].Childs[2].Text 
```

所以我的模型绑定将按预期工作。

有没有办法通过使用 EditorTemplates 或其他任何方法来实现这一点？

我想避免在表单提交上使用 javascript 构建输入名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T06:34:18.813

您可以使用尊重当前导航上下文而不是这样的编辑器模板`@helper`。

`Node`因此，为类型 ( )定义一个自定义编辑器模板`~/Views/Shared/EditorTemplates/Node.cshtml`：

```
@model Node
<li>
    @Html.LabelFor(x => x.Text)
    @Html.EditorFor(x => x.Text)
    @if (Model.Childs.Any())
    {
        <ul>
            @Html.EditorFor(x => x.Childs)
        </ul>
    }
</li> 
```

然后在一些主视图中：

```
@model MyViewModel
<ul>
    @Html.EditorFor(x => x.Menu)
</ul> 
```

其中`Menu`属性显然是 type `Node`。

# google-chrome-extension - 来自 chrome-extension:// 页面的跨域权限？

> ID：11234772
> 
> 赞同：0
> 
> 时间：2012-06-27T21:03:31.840
> 
> 标签：google-chrome-extension

我想通过 chrome-extension:// 页面（使用全帧 iframe）“代理”网页，以便它们显示为扩展页面，而不是网页。但是，我仍然想将内容脚本应用于它们，并且没有取得任何成功。有没有办法允许 chrome 扩展页面访问 iframe 的内容，因为它是“特权”并且应该被允许绕过 XSS 限制？

每当我尝试执行脚本( { code : blah , allFrames: true }) 时，我都会收到关于 chrome-extenion 页面的 XSS 错误，而不是其中的 http 页面......

想法？

# jquery - 将议程视图添加到 fullcalendar

> ID：11234774
> 
> 赞同：1
> 
> 时间：2012-06-27T21:03:47.427
> 
> 标签：jquery, fullcalendar

是否可以通过创建一个封装全日历的新插件来添加一个议程视图，就像在谷歌日历中找到的那样，将所有事件列出到全日历。

这意味着，在不使用原始代码的情况下，有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-09T21:42:51.343

在此处发布在 fullcalendar.js 中添加新视图的解决方案。我需要在 fullcalendar.js 中为我的一个项目实现议程或列表视图。在这个过程中，我有机会对 Adam 的代码进行逆向工程。我必须说这个插件使用了一些非常好的编码实践和 javascript 概念。

如果我在这里分享我的发现和解决方案，我认为这对用户很有用。包含的列表视图具有以下功能：

*   功能齐全且可定制的列表/议程视图
*   使用附带的箭头按钮进行分页
*   事件上的单击/悬停效果
*   使用分页动态调用列表视图的事件

首先，我们不能在不接触完整日历源代码的情况下做到这一点。Javascript 不允许这种可扩展性。但是，我尽可能地简化了事情，并且我还发布了从头开始复制它的步骤以及源代码。这将有助于将来更新 fullcalendar.js

1.  首先，我们需要定义一个新视图来显示事件列表。视图在 fullcalendar.js 中定义为对象，可以使用构造函数添加。[您可以在此 URL https://gist.github.com/amitesh-m/5744528](https://gist.github.com/amitesh-m/5744528)上找到列表视图的构造函数。该函数定义并初始化一个名为“list”的新视图。在其中，renderEvents 是主要成员函数，它在此视图上呈现可用事件并附加单击/悬停事件触发器。

2.  接下来我们需要更改 Calendar 对象的 updateEvents 函数（在第 500 行附近）。这样做是为了取消链接列表视图的 fullcalendar.js 的默认事件调用行为。修改后的函数将如下所示：

    ```
     function updateEvents(forceRender) {
        if (currentView.name == "list") {
            currentView.visStart = new Date(0);
            currentView.visEnd = new Date(currentView.page * 1000);
            refetchEvents();
        } else if (!options.lazyFetching || isFetchNeeded(currentView.visStart, currentView.visEnd)) {
            refetchEvents();
        }
        else if (forceRender) {
            rerenderEvents();
        }
    } 
    ```

对于其他视图，一切都将像以前一样工作，但现在日历将向事件服务器发送一个稍微不同的请求以获取列表视图。现在，当有人点击列表视图时，fullcalendar 将设置“start=0”和“end=1”。页面上显示的项目数由服务器管理。

3.  接下来，我们需要更改日历对象的 renderView() 函数（在第 374 行附近）。这是为了根据 fullcalendar.js 中已经包含的箭头按钮在我们的列表上启用分页。该函数应如下所示：

    ```
    function renderView(inc) {
        if (elementVisible()) {
            ignoreWindowResize++; // because renderEvents might temporarily change the height before setSize is reached

            unselect();

            if (suggestedViewHeight === undefined) {
                calcSize();
            }

            var forceEventRender = false;
            if (!currentView.start || inc || date < currentView.start || date >= currentView.end) {
                // view must render an entire new date range (and refetch/render events)
                currentView.render(date, inc || 0); // responsible for clearing events
                setSize(true);
                forceEventRender = true;
            }
            else if (currentView.sizeDirty) {
                // view must resize (and rerender events)
                currentView.clearEvents();
                setSize();
                forceEventRender = true;
            }
            else if (currentView.eventsDirty) {
                currentView.clearEvents();
                forceEventRender = true;
            }

            if (currentView.name == "list") {
                forceEventRender = true;
                if (inc == 1) {
                    currentView.page++;
                    currentView.title = "Page " + currentView.page;
                } else if (inc == -1) {
                    currentView.page--;
                    currentView.title = "Page " + currentView.page;
                }
            }
            currentView.sizeDirty = false;
            currentView.eventsDirty = false;
            updateEvents(forceEventRender);

            elementOuterWidth = element.outerWidth();

            header.updateTitle(currentView.title);
            var today = new Date();
            if (today >= currentView.start && today < currentView.end) {
                header.disableButton('today');
            } else {
                header.enableButton('today');
            }

            ignoreWindowResize--;
            currentView.trigger('viewDisplay', _element);
        }
    } 
    ```

现在，当有人单击上一个或下一个按钮时，日历将向服务器发送新事件数据的请求。对于列表视图，“start”的值将始终保持为 0，而“end”的值将表示后续页码。

4.  而已。您现在需要做的就是调用完整日历选项中的列表视图。这可以通过将“列表”添加到标题对象的“右侧”来完成，如下所示

    标题：{左：'prev，下一个今天'，中心：'title'，右：'list，month，agendaWeek，agendaDay'}

此 URL 上提供了演示：http: [//tas.co.in/fullcalendar-with-listview/](http://tas.co.in/fullcalendar-with-listview/)

# java - 如何使用数字证书创建 Web 服务

> ID：11234776
> 
> 赞同：1
> 
> 时间：2012-06-27T21:03:52.933
> 
> 标签：java, web-services, security, digital-signature

我必须用数字证书建立一个网络服务，但我在这方面没有经验，我有一些例子，但对我来说还不够。在下面的代码中，我可以从 JKS 文件中获取公钥和私钥，加密字符串并验证是否分配了该字符串。但我对我应该使用谁有一些疑问：

1.  我有 1 个私钥和 1 个公钥。如果我有多个客户调用我的网络服务，他们都需要有公钥吗？和私钥？

2.  我应该如何将公钥发送给客户端？是文件还是字符串？我的公共测试密钥的返回是：

公钥：Sun RSA 公钥，2048 位模数：公共指数：65537

1.  在代码中，我只能验证签名是否正确，我无法对其进行解密以获得真实值。

    导入java.io.File；导入 java.io.FileInputStream；导入 java.io.InputStream；导入 java.security.Key；导入 java.security.KeyStore；导入 java.security.PrivateKey；导入 java.security.PublicKey；导入 java.security.Signature；导入 java.security.cert.Certificate；

    公共类证书{

    ```
    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {

        String txt = "TEST_STRING";

        File certificado = new File("C:\\temp\\teste.jks");
        PrivateKey privateKey = getPrivateKeyFromFile(certificado, "TESTE", "123");

        System.out.println("PRIVATE KEY: " + privateKey.toString());

        PublicKey publicKey = getPublicKeyFromFile(certificado, "TESTE", "123");

        System.out.println("PUBLIC KEY: " + publicKey.toString());

        //a chave privada serve pra encriptar os dados.
        byte[] txtAssinado = createSignature( privateKey, txt.getBytes() );  

        System.out.println("txtAssinado: " + txt2Hexa( txtAssinado ) );

        if( verifySignature( publicKey, txt.getBytes(), txtAssinado ) ) {  
            System.out.println("Assinatura OK!");  
        } else {  
            System.out.println("Assinatura NOT OK!");  
        }  

    }

    public static PrivateKey getPrivateKeyFromFile( File cert, String alias, String password ) throws Exception {  
        KeyStore ks = KeyStore.getInstance ( "JKS" );  
        char[] pwd = password.toCharArray();  
        InputStream is = new FileInputStream( cert );  
        ks.load( is, pwd );  
        is.close();  
        Key key = ks.getKey( alias, pwd );  
        if( key instanceof PrivateKey ) {  
            return (PrivateKey) key;  
        }  
        return null;  
    }  

    /** 
     * Retorna a assinatura para o buffer de bytes, usando a chave privada. 
     * @param key PrivateKey 
     * @param buffer Array de bytes a ser assinado. 
     */  
    public static byte[] createSignature( PrivateKey key, byte[] buffer ) throws Exception {  
        Signature sig = Signature.getInstance("MD2withRSA");  
        sig.initSign(key);  
        sig.update(buffer, 0, buffer.length);  
        return sig.sign();  
    }  

    /** 
     * Verifica a assinatura para o buffer de bytes, usando a chave pública. 
     * @param key PublicKey 
     * @param buffer Array de bytes a ser verficado. 
     * @param sgined Array de bytes assinado (encriptado) a ser verficado. 
     */  
    public static boolean verifySignature( PublicKey key, byte[] buffer, byte[] signed ) throws Exception {  
        Signature sig = Signature.getInstance("MD2withRSA");  
        sig.initVerify(key);  
        sig.update(buffer, 0, buffer.length);  
        return sig.verify( signed );  
    }  

    /** 
     * Extrai a chave pública do arquivo. 
     */  
    public static PublicKey getPublicKeyFromFile( File cert, String alias, String password ) throws Exception {  
        KeyStore ks = KeyStore.getInstance ( "JKS" );  
        char[] pwd = password.toCharArray();  
        InputStream is = new FileInputStream( cert );  
        ks.load( is, pwd );  
        Key key = ks.getKey( alias, pwd );  
        Certificate c = ks.getCertificate( alias );  
        PublicKey p = c.getPublicKey();  
        return p;  
    }  

    public static String txt2Hexa(byte[] bytes) {  
        if( bytes == null ) return null;  
        String hexDigits = "0123456789abcdef";  
        StringBuffer sbuffer = new StringBuffer();  
        for (int i = 0; i < bytes.length; i++) {  
            int j = ((int) bytes[i]) & 0xFF;  
            sbuffer.append(hexDigits.charAt(j / 16));  
            sbuffer.append(hexDigits.charAt(j % 16));  
        }  
        return sbuffer.toString();  
    } 
    ```

    }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:07:52.153

你为什么需要它？如果它只是用于加密通信，您可以使用 SSL/TLS 在传输级别上执行此操作。如果是用于身份验证，我建议使用带有 WS-Policy 框架的健壮的 Web 服务堆栈（例如 Apache CXF 和 Metro）。它会为你处理低级加密货币的东西。

（当然，您可以在传输级别使用身份验证，在消息级别使用加密，但第一个将您的代码与应用程序服务器结合起来，而后者的速度非常缓慢。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T15:11:47.753

我决定在本教程之后使用 ws-security ：

[http://www.developer.com/java/other/article.php/3802631/Securing-Web-Services-in-JBoss-Application-Server-with-WS-Security.htm](http://www.developer.com/java/other/article.php/3802631/Securing-Web-Services-in-JBoss-Application-Server-with-WS-Security.htm)

谢谢！

# ruby-on-rails-3 - Rails 模型与其他模型作为实例变量

> ID：11234778
> 
> 赞同：1
> 
> 时间：2012-06-27T21:04:18.743
> 
> 标签：ruby-on-rails-3, model

我正在构建一个包含`Developer`s的 Rails 应用程序`Application`。开发人员和应用程序都是其内容来自外部 API 的对象。因此，这两个模型都是手写的，没有利用 ActiveModel、ActiveResource 等。

我正在尝试确定如何将 Application 对象实例化为 Developer 对象的实例变量。

我的`Developer.initialize()`函数中有以下代码：

```
@apps = Array.new
data['applications'].each do |app|
  @apps << Application.new(app)
end 
```

该代码是相当不言自明的。`developer.rb`（定义 Developer 的地方）和（定义 Application 的地方）都`application.rb`位于`app/models`目录中。我的开发者控制器通过调用来实例化一个 Developer 对象`Developer.new`。

do 块中的代码行产生以下错误：

```
uninitialized constant Developer::Application
app/models/developer.rb:24:in `initialize'
app/controllers/developers_controller.rb:11:in `new'
app/controllers/developers_controller.rb:11:in `show' 
```

所以看起来 Rails 正在尝试实例化 Developer::Application，而我想实例化目录中定义的 Application`application.rb`对象`app/models`。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T16:24:38.250

您必须需要必要的文件。就我而言，在 Developer 类中，我需要以下行：`require 'application.rb'`并且一切正常。

# activecollab - activeCollab 3、子任务时间进入

> ID：11234779
> 
> 赞同：0
> 
> 时间：2012-06-27T21:04:22.353
> 
> 标签：activecollab

有谁知道 Activecollab 3.1 + 的一个模块，它可以允许输入子任务的时间，还有一个可以按里程碑/任务/子任务和用户等进行 (TPS) 报告的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T13:38:21.340

我们不知道在子任务级别提供时间跟踪的模块。该功能在 activeCollab 3 中被删除（以简化系统并清楚地传达主要工作单元是什么）。请在任务级别跟踪时间并提供任何其他信息作为记录摘要。

# cygwin - 安装 Cygwin 后 SSH 代理不再启动

> ID：11234782
> 
> 赞同：5
> 
> 时间：2012-06-27T21:04:38.130
> 
> 标签：cygwin, msysgit, ssh-agent

安装了 msysGit，编写了启动 ssh-agent 的代码`.profile`，一切正常。

安装了 cygwin，**没有 Git**，只有 ssh 和 cURL。

当 Git bash 打开时 SSH 代理不再启动。

我可以启动一个新的 ssh-agent 进程实例，我在 Git bash 中运行时看到它`ps`，但是在尝试使用时`ssh-add`，我收到此错误：
`Could not open a connection to your authentication agent.`

使用 cygwin，在它的安装文件夹 (C:\cygwin) 中创建了许多`.profile`文件`.bashrc`。不确定这是否是问题所在。

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T16:28:24.980

看看我在[此处](https://stackoverflow.com/questions/17695337/cygwins-ssh-add-returns-could-not-open-a-connection-to-your-authentication-age)发布的关于该`ssh-add`问题的答案。希望此解决方案也适用于您的场景。

# python - 创建子窗口时隐藏诅咒错误消息

> ID：11234785
> 
> 赞同：3
> 
> 时间：2012-06-27T21:04:53.367
> 
> 标签：python, ncurses, curses

我有一个创建子窗口的简单 python 诅咒代码。但是，在运行函数 window.subwin() 的过程中失败并显示以下消息：

这里有一个测试用例：

```
import curses

if __name__ == '__main__':
    curses.initscr()

    window = curses.newwin(15, 40, 7, 20)
    window.box()
    window.refresh()

    subwindow = window.subwin(5, 10, 2, 2)
    subwindow.box()
    subwindow.refresh()

    subwindow.getkey()

    curses.endwin() 
```

产生以下输出：

```
Traceback (most recent call last):
File "c.py", line 12, in <module>
  subwindow = window.subwin(5, 10, 2, 2)
_curses.error: curses function returned NULL 
```

有没有办法获得更具描述性的信息？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T21:20:39.013

当无法创建子窗口（非法操作）时，可能会发生错误。这可能是因为您要求在窗口外绘制子窗口。

*subwin*方法接收绝对坐标（相对于屏幕，而不是父窗口）。*如果subwin*坐标在*window*之外，它将失败。另一个失败的原因：宽度或高度溢出窗口。

代替*subwin*，您可以使用*derwin*（派生窗口），它接收亲属坐标（不易出错）。

```
import curses

if __name__ == '__main__':
    curses.initscr()

    window = curses.newwin(15, 40, 7, 20)
    window.box()
    window.refresh()

    subwindow = window.derwin(5, 10, 2, 2)  # <- here is the change
    subwindow.box()
    subwindow.refresh()

    subwindow.getkey()

    curses.endwin() 
```

# php - 省略 => 值时出现非法偏移类型错误

> ID：11234789
> 
> 赞同：-1
> 
> 时间：2012-06-27T21:05:53.053
> 
> 标签：php

如果我省略该`=> $v`部分，下面代码的第 3 行将失败。我收到以下错误：

`Warning: Illegal offset type in /home/site/page.php on line 404`

当第`[$k]`5 行更改为 时`['$k']`，我收到以下错误。

`Notice: Undefined index: $k in /home/site/page.php on line 404`

当它像下面一样完整时，`$k => $v`一切正常。我什至不使用`$v`. 为什么我需要它在`foreach`循环中使它工作呢？

```
<? if ( $arr[ 'status'][ 'chain'] ) { 
     foreach ( $arr[ 'status'][ 'chain'] as $k => $v) { ?>
        <tr>
            <td class="line_item_data status_td">
                <?= $ arr[ 'status'][ 'chain'][$k][ 'message'] ?>
            </td>
            <td align="center">
                <img src="images/green_check.gif" width="20" />
            </td>
        </tr>
    <? } 
} ?> 
```

我确实看到[了这个答案](https://stackoverflow.com/a/2732502/1252748)，但不知道它是否真的适用。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:15:38.760

无论哪种方式，您都在循环遍历数组中的每个项目。

如果您只是执行 foreach $k，则将 $k 设置为数组中的每个 VALUE，忽略键

如果将其保留为 $k => $v，则将 $k 设置为每个 KEY，并将 $v 设置为附加到该键的每个 VALUE。

例如，您有一个如下所示的数组：

```
$arr=array(
    1=>'a',
    2=>'b',
    3=>'c'
); 
```

并做：

```
foreach($arr as $k){
    echo "k is $k <br>";
} 
```

输出将是：

```
k is a
k is b
k is c 
```

而如果你这样做

```
foreach($arr as $k=>$v){
    echo "k is $k and v is $v<br>";
} 
```

输出将是：

```
k is 1 and v is a
k is 2 and v is b
k is 3 and v is c 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:09:08.853

那是因为 $k 是一个值，但您将它用作键。相反，写：

```
 <? if ( $arr[ 'status'][ 'chain'] ) { 
     foreach ( $arr[ 'status'][ 'chain'] as $k) { ?>
        <tr>
            <td class="line_item_data status_td">
                <?= $k[ 'message'] ?>
            </td>
            <td align="center">
                <img src="images/green_check.gif" width="20" />
            </td>
        </tr>
    <? } 
} ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T21:09:53.650

该构造`$k => $v`用于在构造中迭代数组的键和值`foreach`。您可以仅使用值进行迭代`$v`，但不能仅对键进行迭代`$k`。如果您使用以下内容：

```
foreach ($arr['status']['chain'] as $k) 
```

... foreach 循环在语法上是有效的，但`$k`将填充数组*值*而不是键。在这种情况下，数组元素`$ arr[ 'status'][ 'chain'][$k][ 'message']`不存在，因为数组中没有`$k`有效的键`$arr['status']['chain']`。

### 然而，这可以简单得多......

在循环内部，`$v`保存您尝试索引的数组元素，因此您只需按以下方式访问它：

```
<?= $v['message'] ?> 
```

这相当于`$arr['status']['chain'][$k]['message']`。所以最终不是`$v`你不需要在你的循环中，而是`$k`你不需要。

```
 // Iterate the values only. Keys aren't actually needed.
 foreach ( $arr[ 'status'][ 'chain'] as $v) {
     // snip html markup..
            <?= $v[ 'message'] ?>
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T21:13:47.480

使用时必须始终指定值`foreach`，*它是可选的键*。

像这样，

```
foreach ($array as $k => $v) 
```

...然后`$k`是关键，`$v`也是价值。如果你这样做：

```
foreach ($array as $k) 
```

...然后`$k`成为*value*，而不是 key。如果你只想要钥匙，你可以这样做：

```
while (list($key) = each($array)) {
    echo $key;
} 
```

...或者：

```
while (key($array) && next($array)) {
    echo $key;
} 
```

# c# - 财产解决政策

> ID：11234795
> 
> 赞同：0
> 
> 时间：2012-06-27T21:06:06.053
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, unity-container

我需要根据 PropertyInfo.Name 解决属性注入。这个类看起来像这样

```
public class Test
{
    [Dependency]
    public Test TestProperty1{ get; set; }
} 
```

我希望能够以某种方式***在幕后***解决 TestProperty1 ，而无需显式重新键入属性名称。

```
container.Resolve<Test>("TestProperty1") 
```

在呼叫`container.Resolve<Test>()`或`container.BuildUp( new Test())`**期间

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:58:16.180

我不确定我是否理解你想要达到的目标。您希望 Unity 填充`TestProperty1`而不告诉它这样做吗？

使用`DependencyAttribute`不是一个好的选择。[这篇文章解释了为什么](http://blog.ploeh.dk/2010/01/27/WhatsSoDangerousAboutADIAttribute.aspx)。

要指示 Unity 向您注入一个值，`TestProperty1`您必须修改注册码：

```
container.RegisterType<Test>(new InjectionProperty("TestProperty1")); 
```

对 resolve 的调用将返回一个已`Test`填充的实例`TestProperty1`。

如果您有一个现有`Test`的调用实例，`container.BuildUp()`也会将一些值注入`TestProperty1`.

# drupal-6 - 在 Drupal 中填充视图

> ID：11234803
> 
> 赞同：0
> 
> 时间：2012-06-27T21:06:49.083
> 
> 标签：drupal-6, drupal-views

请原谅冗长的解释。我希望这是有道理的：

我正在尝试创建一个包含某个内容类型的视图，该内容类型不包含某个列表的分类术语。结构如下：

```
A project is the main container of all SKUs that exist
Inside each project are pages.
Inside each page are callouts.
Inside the callouts are the SKUs.

In other words:   PROJECT > PAGE > CALLOUT > SKU 
```

我目前能够填充所有没有条款的 SKU：

![填充所有 SKU](../Images/b3815f72aac39fe0b66e44f07300b3fc.png)

我需要将此限制在某些项目中。我的猜测是我需要使用 Argument 和 Relationships，但我不确定如何处理这么深的层次结构。

我的猜测是我需要创建 PROJECTS 和 PAGES 的关系，以及 PROJECT 的参数。

任何帮助都是极好的。如果您需要更多信息，请与我们联系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T10:39:50.637

如果您的 url 类似于`/projectid/pageid/calloutid/skuid`，您可能想要使用参数并`%1`使用`projectid`, `%2`for`pageid`等，然后将您的页面限制或任何参数限制为某些页面的 sku。

# c# - 使用树形视图或单选按钮修改 Windows 窗体

> ID：11234805
> 
> 赞同：0
> 
> 时间：2012-06-27T21:07:02.000
> 
> 标签：c#, .net, winforms

我正在创建一个 GUI，我想要一个根据树视图中的哪个项目或单选按钮上选择的项目进行更改的应用程序。

我知道如何知道选择了哪个项目，但是如何根据项目更改界面？

我应该尝试什么？多个面板？有些隐藏？

想象一下像 MMC 这样的应用程序，右侧会根据我在右侧选择的内容而变化。

我在事件中使用了`Button1.Visible = true` 和类似的东西`Button2.Visible = false`，但是如何将右侧的元素分组？在设计者模式下，我会看到每个对象都与其他对象重叠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:51:06.073

假设您指的是菜单之类的东西（左侧的菜单选项；单击时，窗口的右侧会填充相应的设置），只需为每个“窗口”创建一个单独的控件（非技术性词的用法）在右边。选择左侧的条目时，请通过在右侧面板中的相应控件上调用brandtofront（）来处理单击事件。

如果您不是指菜单，而是指更细化的东西（左侧的每个选择都在同一个中央显示单元上操作，并且每个选择可能只影响一小部分），然后划分将中央显示单元分成面板，每个可能受左侧选择影响的单元一个，并根据左侧选择显示和隐藏它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T01:44:47.510

处理这个问题的常用方法是在屏幕右侧有一个面板，并且每个不同的视图都创建了自己的 UserControl。然后，当树视图选择更改时，您清除面板的子项，创建相关的 UserControl 实例，将其添加到面板，并将其 Dock 设置为 Fill。类似于下面的伪代码：

```
 private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
    {
        panel1.Controls.Clear();
        UserControl uc = new MyUserControl();
        uc.DataToShow = (MyObject)treeView1.SelectedNode.Tag;
        uc.Dock = DockStyle.Fill;
        panel1.Controls.Add(uc);
    } 
```

# c++ - 具有继承的元素的容器副本

> ID：11234806
> 
> 赞同：1
> 
> 时间：2012-06-27T21:07:04.150
> 
> 标签：c++, qt

所有，这似乎是一个简单的问题，但它让我很适应。假设我有一个名为 Animal 的 C++ 基类和派生类 Cat、Dog、Horse、Hippo、Snake。我有另一个名为 Zoo 的类，其中包含 Animal 对象的列表（在本例中为 Qt 列表，其中基类 Animal 是 QObject）。现在我想做的是创建一个 Zoo 对象，并能够将它复制到另一个 Zoo 对象，并让目标 Zoo 拥有它自己的 Animals 副本。问题出在 Zoo 复制构造函数中，因为它认为它有一个 Animals 列表，它调用 Animal 的复制构造函数而不是 Dog、Cat 等，因为编译器应该这样做。为了解决这个问题，我将 Animal 列表更改为 Animal 指针列表，然后创建了自己的 Animal 复制构造函数和赋值运算符。这些中的每一个都调用 Animal::Clone( Animal & rhs ) 方法，该方法依次调用 Animals Clone() 方法的每个派生类，该方法返回从堆分配的新指针及其数据的副本。这一切都很好，但我一直认为我错过了一个更优雅的解决方案。所以我的问题是，当你有一个包含某种类型对象的容器时，我们如何复制包含该容器的类？我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:30:49.943

您所做的几乎是在 C++ 中*的*惯用方式。虚拟`clone()`方法实际上被称为虚拟复制构造函数*习语*。通常，您会将其声明为以下签名的虚拟抽象方法。

```
Animal * clone() const = 0; 
```

请注意，它不带任何`rhs`参数，它只是返回自身的克隆。给定一个动物的实例`Animal * myPet`，你可以通过说得到一个重复的实例

```
Animal * mySecondPet = myPet->clone(); 
```

如果要实例化派生类，则必须在派生类中实现它。

*[Ed:]*正如您所发现的，由于C++ 设计中固有的[切片问题](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)，容器类不可能直接而不通过指针来保存项目。

在 C++ 中，您的解决方案是一个习惯用法：它非常优雅，每个看到它的人，知道他们的 C++ 的人，都应该立即明白您的意思。习语和*某些*设计模式是语言的一部分。如果不知道成语，你就不能称自己精通一门语言，无论是人类语言还是编程语言。

在我的许多项目中，我使用一个名为 的接口类（所有抽象虚拟方法），它只`Cloneable`包含这个克隆方法。然后很容易强制一些基类是可克隆的：只需从 Cloneable 继承。例如，我希望`QEvent`是`Cloneable`这样。事实上，不可能复制`QEvents`将它们发布到多个事件队列。

Daniel 的建议“您是否尝试过将 Animal 的复制构造函数设为虚拟？” 不能从字面上理解。在 C++ 中实际上没有虚拟复制构造函数或任何构造函数之类的东西——原因很简单：在构造对象之前，它的虚拟方法表还没有最终确定。具体来说，Animal 构造函数中的代码将在调用任何派生类的构造函数以将虚拟方法表指针换出到派生类中的表指针之前执行。因此，如果您在构造函数中进行了任何虚拟方法调用，它们将不会转到从您的类派生的任何类。就是这样。

# c# - DataContractJSONSerializer 包含列表的嵌套 DataContract 对象

> ID：11234807
> 
> 赞同：4
> 
> 时间：2012-06-27T21:07:11.010
> 
> 标签：c#, asp.net-mvc-3

背景：我们正在使用一个属性，该属性在传递某些标头时将响应的输出更改为 JSON 对象。另一个属性在传递适当的接受标头时返回 XML。如果缺少接受标头或“html”，则返回测试页面。

我需要能够像这样序列化一个对象结构：

```
[DataContract]
public class ResponseModel
{
   [DataMember]
   public bool Success { get; set;}

   [DataMember]
   public dynamic Data { get; set; } //I have tried "Object" as well

   [DataMember]
   public ApiErrorModel Error { get; set; } 

}

//for reference
[DataContract]
public class ApiErrorModel 
{
    [DataMember]
    public string ErrorCode { get; set; }

    [DataMember]
    public string ErrorMessage { get; set; }
} 
```

我遇到的问题是，虽然我还无法测试任何错误状态，但当它要序列化这样的结构时：

```
[DataContract]
public class DatabaseModel
{
   [DataMember]
   List<Database> Database { get; set; }
   //snip implementation
}

[DataContract]
public class Database
{
   [DataMember]
   [Required]
   public string DatabaseName { get; set; }

   [DataMember]
   List<Guid> APITokens { get; set; }

   //snip other fields..., Guids and strings...
} 
```

它失败了，给了我错误：

类型 '[namespace].Api.Business.Web.Models.DatabaseModel' 与数据合同名称 'DatabaseModel:http://schemas.datacontract.org/2004/07/[namespace].Api.Business.Web.Models' 是没想到。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我已经使用 DataContractResolver 进行了研究，但我似乎无法让它与它的 JSON 版本一起使用。切换到 JSON.NET 或 JavaScriptSerializer 序列化程序可能更容易，但它也需要适用于 XML（这可能是 JSON 特定的问题）。我想知道是否有一种方法可以解决此问题，而无需将我将要使用的每种类型的列表添加到已知类型的序列化方法列表中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T05:02:27.697

JSON.NET 基本上是要走的路。看来 DataContractJsonSerializer 不适合这项任务。

# javascript - InDesign CS5 / Extendscript -- exportFile 的参数是什么，它的相关属性是什么？

> ID：11234808
> 
> 赞同：2
> 
> 时间：2012-06-27T21:07:12.217
> 
> 标签：javascript, export, adobe-indesign, extendscript

在线 InDesign 的 Extendscript 文档非常差，否则我无法找到有关该`exportFile`方法的任何详细/有用的信息……这就是我能找到的全部内容，其中相当混乱：http:    [//jongware.mit.edu/ idcs5/pe_ExportFormat.html](http://jongware.mit.edu/idcs5/pe_ExportFormat.html)。

* * *

我见过的一个常见的这样的陈述`exportFile`是：

       `imgs[i].exportFile(ExportFormat.JPG, img, false)`.

该语句使用 的`JPG`属性`ExportFormat`，正在传递一个文件对象`img`，并且正在传递参数`false`。

我知道文件对象必须以这种方式实例化：

       `var img = new File(folder + "/" + fileName)`.

...但是WTF是`false`为了？

此外，似乎`ExportFormat`对象的不同文件类型属性以不同的方式实例化......例如，我看到一个 PDF 的 ExportFormat 被实例化为`ExportFormat.pdfType`. 这种变化让我大吃一惊，其他文件类型似乎也有唯一的属性名称。

* * *

那么，该`exportFile`方法的参数究竟是什么，这些参数的所有属性是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T13:32:40.700

//PDF导出预设）

```
//The default PDF export preset names are surrounded by square breackets

//(e.g., "[High Quality Print], [Press Quality], or [Smallest File Size]").
var myPDFExportPreset = app.pdfExportPresets.item("[Press Quality]");

myDocument.exportFile(
    ExportFormat.pdfType,
    File(Folder.desktop + "/ExportPDFWithPreset.pdf"),
    false, 
    myPDFExportPreset
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T23:08:33.373

如果您在哪里可以找到资源，我认为资源非常多；）我真的建议您将此书签作为收藏夹：http: [//jongware.mit.edu/idcs5js_html_3.0.3i/idcs5js/](http://jongware.mit.edu/idcs5js_html_3.0.3i/idcs5js/)

完成后，导航到 pageItem ( Layout ) 链接并查看 exportFile 方法：

void exportFile（格式：变化，到：File[，showingOptions：bool=false][，使用：PDFExportPreset][，versionComments：string][，forceSave：bool=false]）将对象导出到文件。

false 表示您不想使用 PDF 导出预设。

洛伊克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T04:00:28.920

是的，毫无疑问，[jongware](http://jongware.mit.edu/idcs5js_html_3.0.3i/idcs5js/)为 InDesign 脚本社区以及[http://indesignsecrets.com/](http://indesignsecrets.com/)做了很多工作......

我确实认为 Adob​​e 应该自己提供更全面的文档，如果他们想接触更广泛的受众（[单击此处查看 Adob​​e 文档](http://www.adobe.com/devnet/indesign/documentation.html)）。

* * *

我认为这个人安迪马修斯说得很好：

> “值得注意的是，ExtendScript 的文档并不是最好的。如果您习惯了 Actionscript 或 ColdFusion 的文档，那么您不仅会感到失望，还会感到困惑……
> 
> 。 ..我确实希望 Adob​​e 能在使他们的工具和文档成为一流的方面付出更多的努力。这肯定会有所作为，并会大大减少挫败感，并可以鼓励更多的设计师/开发人员谈论这个软件。”
> 
> （[点击这里查看此页面](http://www.andymatthews.net/read/2011/11/25/Scripting-Photoshop-with-JavaScript-and-ExtendScript)）

* * *

就书籍而言：

在寻找有关 InDesign 中 Extendscript 的良好资源时，我发现[使用 JavaScript 编写 InDesign CS3/4 脚本](http://shop.oreilly.com/product/9780596802530.do)这本书是对 InDesign 中的 Extendscript 的一个非常好的介绍，但它只提供了非常基本的示例......

但是，很快我就会有 Grant Gamble 的[InDesign CS5 Automation Using XML & JavaScript](https://rads.stackoverflow.com/amzn/click/com/1460915380)一书，这似乎是一个更全面的指南。这本书显然包括他的另一本书[InDesign CS5 JavaScript的全部内容](https://rads.stackoverflow.com/amzn/click/com/1463667442)  **以及**有关 XML 的信息。

# html - 将文本添加到 textarea 会添加额外的字符。这是什么原因造成的？

> ID：11234809
> 
> 赞同：1
> 
> 时间：2012-06-27T21:07:27.593
> 
> 标签：html, textarea, ascii

有谁知道当我将预生成的数据放入我的文本区域时为什么会看到这个额外的字符？

[http://i.imgur.com/k4y1D.png](http://i.imgur.com/k4y1D.png)

字符是“Â'”

# java - Hibernate @One-To-Many 类似于 @ElementCollection

> ID：11234813
> 
> 赞同：1
> 
> 时间：2012-06-27T21:08:03.513
> 
> 标签：java, hibernate, hibernate-mapping

我正在尝试做这样的事情，但使用@One-To-Many 而不是@ElementCollection。

```
public class Book {
    ...
    @ElementCollection
    Set<String> tags;
    ...
} 
```

这将创建两个表，一个用于 Book，另一个用于带有 (BookID, Tag) 的标签，除了我不能将 Criteria 与 @ElementCollection 一起使用这一事实之外，它工作正常。

所以我改变了它并为标签制作了一个包装类：

```
public class Book {
    ...
    @OneToMany(...)
    Set<BookTag> tags;
    ...
}

public class BookTag {
    ...
    String tag;
    ...
} 
```

问题是使用 @OneToMany 注释休眠创建 3 个表：一个用于书籍，一个用于标签，一个用于连接书籍和标签。这个解决方案工作得很好，但我想要 2 个表而不是 3 个，因为 Tag 类只包含一个字符串。

有什么方法可以使用 @OneToMany 并像使用 @ElementCollection 一样让休眠创建 2 个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:19:43.350

是的，通过指定 OneToMany 必须使用连接列而不是默认值（使用连接表）：

```
@OneToMany(...)
@JoinColumn(name = "BOOK_ID")
private Set<BookTag> tags; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:30:38.257

您可以`@ElementCollection`使用 JPA 条件执行该查询。假设您使用的是元模型，它看起来像这样：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Book> cq = cb.createQuery(Book.class);
Root<Book> book = cq.from(Book.class);

cq.select(book).where(cb.equal(book.join(Book_.tags), "fanfic"));

TypedQuery<Book> query = em.createQuery(cq); 
```

如果您不使用元模型，则基本相同，但您可能需要使用`joinSet`.

该查询具有合理的意义。唯一令人惊讶的是需要做 a`join`而不是 a `get`，这是因为`tags`它是复数属性，而不是单数属性，但您正在查看它的各个元素。

您可能还期望阅读更自然

```
cq.select(book).where(cb.isMember("fanfic", book.get(Book_.tags))); 
```

会工作。也许对于一些 JPA 实现它确实如此。但是对于 Hibernate (4.1.4)，它不会；它因语法错误而爆炸。这似乎是[休眠错误 HHH-5209](https://hibernate.onjira.com/browse/HHH-5209)。

# python - python url映射语法

> ID：11234815
> 
> 赞同：2
> 
> 时间：2012-06-27T21:08:12.810
> 
> 标签：python, google-app-engine, jinja2, url-mapping

我正在使用 jinja2 作为我的模板引擎为 google appengine 编写一个 python 程序。我希望有一个处理大量帖子的处理程序，其中一些帖子具有完全不同的 URL，但都具有相同的基础。

我有可能拥有这样的 URL 处理程序：

```
app = webapp2.WSGIApplication([('/post/([.*]+)/([.*]+)/([.*]+)/([.*]+)', PostPage), ], debug=True) 
```

然而让它接受那些不能满足每一个附加功能的 URL，比如有一个 URL：

/post/1234/一些标题

如果没有，是否有某种方法可以更改它，以便一个处理程序可以获取多个页面的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:32:34.210

如果您不需要（作为处理程序的参数）/post/{param1} 之后的路径部分，您可以简单地编写`app = webapp2.WSGIApplication([('/post/(.*)/.*', PostPage)`，处理程序将排除 /post/{id}/ 形式的所有内容。 *

# javascript - 更新javascript中多个元素的更有效方法？

> ID：11234823
> 
> 赞同：1
> 
> 时间：2012-06-27T21:08:40.577
> 
> 标签：javascript, jquery

我有 6 个带有 ID 的 div " `#first`，`#second`...`#sixth`

如果我想在每个 div 上执行函数，我会设置一个包含每个 div 名称的数组。如果我想应用一个函数，我会设置一个循环遍历数组中的每个元素并（例如）将背景颜色更改为红色：

```
function updateAllDivsInTheList() {
  for(var i = 0; i < array.size; i++)
    $("#"+array[i]).changeCssFunction();
  }
} 
```

每当我创建一个新的 div 时，我都会将它添加到数组中。

问题是，如果我有大量需要更新的 div（比如 1200 个 div 中的 1000 个），那么必须按顺序遍历数组中的每个元素可能是一个痛苦/性能坦克。是否有一些替代的、更有效的方式或数据结构来更新多个 div？也许除了数组之外还有其他更有效的数据结构？还是我正在做的最有效的方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T21:10:41.397

您应该缓存您的 jQuery 对象，以便您的名称列表成为 jQuery 对象列表。迭代 1000 个项目的数组很快。每次构建 1000 个新的 jQuery 对象很慢。

```
var names = [ "one", "two", ..., "six" ];

// Turn the array of strings into an array of their corresponding jQuery ele
var $divs = $.map(names, function (v) { return $("#" + v); }); 
```

您还可以将多个 id 链接到一个选择器中并避免（外部）循环；jQuery 将（可能）仍然在内部将其实现为循环。

```
$('#one, #two, #three').changeCssFunction(); 
```

请注意，将 DOM 更新一千次*会*很慢，在某些浏览器中比在其他浏览器中更慢。您可能会考虑重新考虑您的代码，以便从某个父对象中添加或删除一个类，从而允许一些新的 CSS 选择器通过单个 DOM 更新来匹配所有子元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:13:43.080

一种更有效的方法可能是不在客户端执行此操作。在 Internet Explorer 中，与 dom 的每次交互（检查 css 类、更改 css、检查属性）都可能导致 dom 刷新，从而导致页面“冻结”。如果您仍然打算这样做，您应该给每个 div 一个通用的类名，并使用 jquery 来选择该类名。然后您可以遍历返回的 jquery 对象列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:16:11.043

```
var divs$ = [];
$('div.someClass').each(function(i,e) {
  divs$.push($(e));
});

function updateAllDivsInTheList() {
  for(var i = 0; i < array.size; i++)
    divs$[i].changeCssFunction(); 
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T21:20:54.793

调用 jQuery 方法时，它将在内部循环遍历集合中的所有匹配元素。因此，只构建一个包含所有元素的 jQuery 对象会更有效：

```
$(array.map(function(id){return "#"+id;}).join(", ")).changeCssFunction(); 
```

使用更简单的选择器会更容易，例如使用类。如果您想多次使用该方法，请务必缓存 jQuery 对象。

如果您想要真正的性能提升，请不要使用 jQuery。您可以使用本机 DOM 方法直接应用样式更改（这当然取决于它们的复杂性和跨浏览器安全性），或者您可以尝试[操作样式表](http://www.hunlock.com/blogs/Totally_Pwn_CSS_with_Javascript)而不是单个元素上的样式属性。

# image-processing - HSL 与 HSI 颜色空间

> ID：11234824
> 
> 赞同：2
> 
> 时间：2012-06-27T21:08:46.837
> 
> 标签：image-processing, colors, computer-vision

我无法理解 HSL 和 HSI 之间的区别。他们是一样的吗？您是否使用相同的算法来转换 RGB -> HSL 和 RGB -> HSI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-05T01:34:45.760

这些是 HSV / HSL / HSI 颜色空间的比较。

他们的色调是一样的。饱和度和亮度的表达式如下所示：

[![HSV 与 HSL](../Images/a8c5540d062ec52e511a8cae1843d809.png)](https://i.stack.imgur.com/MS7QL.png) [![恒指](../Images/02a02bb07371296e2ed2ecaf7cf0f2ee.png)](https://i.stack.imgur.com/ndUDc.png)

资料来源：[维基百科](https://en.wikipedia.org/wiki/HSL_and_HSV#Lightness)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-27T21:19:47.847

他们不一样。您不能使用相同的函数从 RGB 进行转换。

# php - 来自覆盖文件夹的 Wordpress 身份验证

> ID：11234825
> 
> 赞同：0
> 
> 时间：2012-06-27T21:08:47.817
> 
> 标签：php, wordpress

我在 wordpress 网站的根目录中有一个文件夹。因此，wordpress 似乎被绕过了（预期的结果），但现在我想向谨慎的模块（位于 wordpress 根目录中的代码）添加功能，以检查我们是否登录到 wordpress……可以这能做到吗？

### 澄清文件夹结构

```
/wp-admin/
/wp-content/
index.php
... (all wordpress files)
/my-folder/    <~ I want to access via http://mysite.com/my-folder/
    index.php  <~ I want a line of php to check if user is logged in to wordpress or not
    style.css 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:56:19.750

为此，您需要包含/要求位于所有 word press 文件中的文件“wp-blog-header.php”，并使用返回布尔值的 WorldPress 函数“is_user_logged_in()”，有关更多详细信息，[请参阅 WorldPress PHP代码在这里](http://core.trac.wordpress.org/browser/tags/3.4.1/wp-includes/pluggable.php#L726)。

因此，您可以在文件 /my-folder/index.php 中使用类似这样的功能来检查用户是否登录到您的 WorldPress

```
function checkWPLogin(){
    require_once("../wp-blog-header.php");
    return is_user_logged_in();
} 
```

# grails - 如何将域类导入 Groovy 脚本？

> ID：11234826
> 
> 赞同：1
> 
> 时间：2012-06-27T21:08:49.387
> 
> 标签：grails

有没有办法在 groovy 脚本中访问域对象？我已经尝试像往常一样导入它们，但我仍然得到一个`NoClassDefFoundError`. 我也尝试将包添加到`depends`列表中，但这也无济于事。

我正在通过调用脚本`grails MyScript param1 param2`。如果我运行它，`grails run-script scripts/MyScript`那么我可以很好地导入，但不能传递参数。

我已经看到[这个问题](http://grails.1312388.n4.nabble.com/run-script-Can-scripts-take-command-line-arguments-td4629588.html)完全模仿了我的问题，但是，该解决方案似乎对我不起作用。

```
import foo.Bar

includeTargets << grailsScript("Init")
includeTargets << grailsScript("_GrailsArgParsing")

target(main: "Does Foo") {
    depends(configureProxy, classpath, parseArguments)

    println argsMap

    Bar.get(1)//Throws java.lang.NoClassDefFoundError
}

setDefaultTarget(main) 
```

如何在我的 Groovy 脚本中导入域类和访问脚本参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:58:05.450

您必须使用 run-script 运行您的脚本，而不是作为普通脚本

请参阅[运行脚本文档](http://grails.org/doc/latest/ref/Command%20Line/run-script.html)

我不认为 run-script 支持命令行参数实际上是查看[run script source code](https://bitbucket.org/tednaleid/grails-run-script/src/034ed2a74171/scripts/RunScript.groovy) 。

您可以重写一个运行脚本克隆，将参数作为 bean 传递给运行脚本（就像它已经为 grailsApplication 所做的那样）。我觉得做起来不难。

或者，您可以使用配置中包含的外部属性文件将参数传递给 grails 应用程序，以及运行脚本。

# jquery - 两个相同的 jQuery 砌体页面 - 动画和角标都有不同的行为

> ID：11234827
> 
> 赞同：0
> 
> 时间：2012-06-27T21:09:01.067
> 
> 标签：jquery, css, jquery-masonry

我正在尝试 jQuery 砌体动画示例，并设法使基本页面正常工作。但是，动画不起作用。

这非常令人沮丧，因此我从 jQuery Masonry 站点复制了示例页面，并开始将其剥离，直到我发现它与我的页面之间的区别；识别我引入的任何故障。

这是一个精美的工作版本：http: [//jsfiddle.net/LittleBobbyTables/FrRbv/](http://jsfiddle.net/LittleBobbyTables/FrRbv/)

尝试增加/减少页面和框架大小，您会注意到块的动画效果很好。

这是我的（相同？）版本，它不起作用：http: [//jsfiddle.net/LittleBobbyTables/M2K9z/](http://jsfiddle.net/LittleBobbyTables/M2K9z/)

我已经把我自己的风格放到了积木上，但除此之外，我看不出有什么不同。会是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:24:07.000

使用 Chrome 的开发者控制台，这个错误被 jQuery (jquery.min.js:3) 吐出：

> 未捕获的错误：语法错误，无法识别的表达式：##

您在应用 Masonry 的代码中有一个无效的选择器。三重哈希`###`不是 Sizzle（jQUery 使用的 CSS 选择器库）选择器语法的一部分。相反，使用单个哈希按 ID 定位元素：

```
$('#container').masonry({
    itemSelector : '.item',
    columnWidth : 240,
    cornerStampSelector: '.corner-stamp',
    isAnimated: !Modernizr.csstransitions
}); 
```

# iphone - 奇怪的 Segue 行为 - 不触发

> ID：11234828
> 
> 赞同：0
> 
> 时间：2012-06-27T21:09:05.933
> 
> 标签：iphone, ios, storyboard, uistoryboardsegue

所以我注意到我的程序中有一些非常奇怪的行为。这是一个简化的代码片段，然后我将解释构建和运行时会发生什么。

```
-(void)viewDidLoad {
   [super viewDidLoad];
   ...
   if (self.sampleBool) {
       [self performSegueWithIdentifier:@"mySegue" sender:self];
   }
   else {
       // do stuff
   }
}
...
-(IBAction)myMethod:(UITapGestureRecognizer*)sender {
    ...
    [self performSegueWithIdentifier:@"mySegue" sender:self];
} 
```

segue 通过 UITapGestureRecognizer 触发很好 - 所以我知道 segue 已正确链接。但是，当 self.sampleBool 为 true 并且在 viewDidLoad 中调用 performSegueWithIdentifier 时，segue 不会触发。

有人有任何猜测吗？任何帮助或建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:12:59.197

尝试使用`viewWillAppear`or`viewDidAppear`事件，看看它是否有效。我的*猜测*是，`viewDidload`由于事情并未完全连接起来，因此可能不相关。

另一方面，这里有设计问题吗？如果您的情况属实，是否应该发生这种情况？也许您可以在调用该视图加载之前在上游进一步进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:05:01.277

如果你尝试在 ViewDidLoad 中推送另一个 ViewController，你会遇到问题，因为在 viewDidLoad 中，viewcontroller 还没有准备好！简单的方法是尝试使用 viewWillAppear 或 viewDidappear。

# python - python程序以选定的顺序划分文件中的数字

> ID：11234830
> 
> 赞同：-6
> 
> 时间：2012-06-27T21:09:16.900
> 
> 标签：python, file-io

我是 Python 新手，想读取一个文件，该文件甚至有数字，（比如 20）个数字，比如

```
100
200 
59
78
...
590
13 
```

我想阅读它们并计算`val[11]/val[1], val[12]/val[2]`等的除法结果。请你帮帮我。或者您可以建议的任何其他语言在哪里会很快。非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:21:20.093

好的，这会让你从基础***开始***，***但*你必须弄清楚你的数学逻辑、各种索引值和操作顺序**来解决你的问题。

这只是打开一个文件并显示其内容。数据以字符串形式读取，并转换为浮点数，以便您可以对数字进行数学运算。

我强烈建议您阅读[Python 教程](http://docs.python.org/tutorial/)，或者*最好*使用您~~更~~熟悉的编程语言工作。

```
with open('data.txt') as f:
    data = f.readlines()
    for i in range(len(data)):
        result = float(data[i])
        print result 
```

的内容`data.txt`

```
100
200 
59
78
590
13 
```

***剩下的就看你了。***当您遇到特定问题时，请随时回来寻求帮助。

最后，由于文件中的数据`data`以 Python[列表](http://docs.python.org/library/functions.html#list)的变量名结尾，通读这些[Python 文档](http://docs.python.org/tutorial/introduction.html#lists)和本[教程](http://www.tutorialspoint.com/python/python_lists.htm)应该有助于理解这种数据结构。

# bash - bash中浮点数中的常量字符数

> ID：11234831
> 
> 赞同：1
> 
> 时间：2012-06-27T21:09:19.303
> 
> 标签：bash

我需要用 bash 对数字进行一些“漂亮”的格式化。我有一串科学格式的逗号分隔浮点数（即 3.14159 或 1.0601e-12），我需要创建一个逗号分隔的列表，其中所有数字都有尽可能多的字符。填充时使用空格还是零并不是很重要（即“3.14”和“3.140000”都有效）。我尝试将 printf 与“%.12f”一起使用，但这当然行不通。我没有想法（除了在角色级别上工作，但这似乎过于复杂）

我真的很感激帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:24:50.093

如果您只想在输出中指定恒定数量的字符，则可以使用*field-width*修饰符。例如，要确保每个字段正好有 24 个字符：

```
printf "%'24f\n" 3.140000 3000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:25:58.530

对于浮点数，使用 %f，对于科学计数法，使用 %e：

```
$ printf "%12.2f\n" 359.197
      359.20
$ printf "%12.2e\n" 359.197
    3.59e+02 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T00:11:17.083

左边的零填充比动态小数精度更容易。这是一个裂缝，不确定它是否符合您的要求。

```
IFS=, read -ra a <<<'1.234567e+3,5432.623,54326e+4,12.26546e+3,1000000000000,2.3641867e+4'

for idx in "${!a[@]}"; do
    printf -v "b[${b:=0}>b&&(b=$b),idx+1]" '%f%n' "${a[idx]}" b
done

for idx in "${!a[@]}"; do
    printf -v 'a[idx]' '%#.*f' $((b - ${#b[idx+1]})) "${b[idx+1]}"
done

# IFS=, declare -a 'b=("${a[*]}")'
# echo "$b"
printf '%s\n' "${a[@]}" 
```

这使

```
1234.567000000
5432.623000000
543260000.0000
12265.46000000
1000000000000.
23641.86700000 
```

虽然我很想看到一种更优雅的方式。

# c# - 强制 db4o 调用构造函数

> ID：11234834
> 
> 赞同：1
> 
> 时间：2012-06-27T21:09:29.550
> 
> 标签：c#, .net, db4o, object-oriented-database

有没有办法告诉 db4o 在激活对象时调用类默认构造函数？我尝试了以下代码，但没有奏效：

```
 private static void ConfigureDatabase()
    {
        var config = Db4oEmbedded.NewConfiguration();
        config.Common.ObjectClass(typeof(Device)).CallConstructor(true);
        using(var db = Db4oEmbedded.OpenFile(config, Helper.GetDataFilePath("index"))) { }
    } 
```

从数据库中检索对象时，永远不会调用 Device 的构造函数。

下面是 Device 构造函数的样子：

```
 public Device()
    {
        connectionType = ConnectionType.Disconnected;
    } 
```

任何帮助，将不胜感激。

**更新** BWT，我还想知道是否可以告诉 db4o 为每个对象调用构造函数，而不必为每种类型逐一编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T22:13:59.610

你试过[这个](http://community.versant.com/documentation/reference/db4o-7.12/net2/reference/Content/configuration/common/calling_constructors.html)吗？

```
IEmbeddedConfiguration configuration = Db4oEmbedded.NewConfiguration();
configuration.Common.CallConstructors = true; 
```

# php - 使用 Web API 时没有结果

> ID：11234842
> 
> 赞同：1
> 
> 时间：2012-06-27T21:10:20.727
> 
> 标签：php, xml, usps

我正在尝试使用 PHP 从美国邮政服务 (USPS) 费率计算器中提取 XML 页面。这是我正在使用的代码（当然替换了我的 API 登录名和密码）：

```
<?
$api = "http://production.shippingapis.com/ShippingAPI.dll?API=RateV4&XML=<RateV4Request ".
       "USERID=\"MYUSERID\" PASSWORD=\"MYPASSWORD\"><Revision/><Package ID=\"1ST\">".
       "<Service>FIRST CLASS</Service><FirstClassMailType>PARCEL</FirstClassMailType>".
       "<ZipOrigination>12345</ZipOrigination><ZipDestination>54321</ZipDestination>".
       "<Pounds>0</Pounds><Ounces>9</Ounces><Container/><Size>REGULAR</Size></Package></RateV4Request>";

$xml_string = file_get_contents($api); 

$xml = simplexml_load_string($xml_string);
?> 
```

很简单。但是它永远不会返回任何东西。我可以将 URL 直接粘贴到浏览器的地址栏中：

```
http://production.shippingapis.com/ShippingAPI.dll?API=RateV4&XML=<RateV4RequestUSERID="MYUSERID" PASSWORD="MYPASSWORD"><Revision/><Package ID="1ST"><Service>FIRST CLASS</Service><FirstClassMailType>PARCEL</FirstClassMailType><ZipOrigination>12345</ZipOrigination><ZipDestination>54321</ZipDestination><Pounds>0</Pounds><Ounces>9</Ounces><Container/><Size>REGULAR</Size></Package></RateV4Request> 
```

它返回我需要的 XML，所以我知道 URL 是有效的。但我似乎无法使用 PHP 捕获它。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:13:20.843

一件事是您需要对发送到服务的 XML 进行 URL 编码。浏览器会自动为您执行此操作，但`file_get_contents`不会。

尝试这个：

```
 $param = urlencode("<RateV4Request ".
   "USERID=\"MYUSERID\" PASSWORD=\"MYPASSWORD\"><Revision/><Package ID=\"1ST\">".
   "<Service>FIRST CLASS</Service><FirstClassMailType>PARCEL</FirstClassMailType>".
   "<ZipOrigination>12345</ZipOrigination><ZipDestination>54321</ZipDestination>".
   "<Pounds>0</Pounds><Ounces>9</Ounces><Container/><Size>REGULAR</Size></Package></RateV4Request>");

 $api = "http://production.shippingapis.com/ShippingAPI.dll?API=RateV4&XML="
        .$param;

 ... then the rest of the code 
```

如果这没有帮助，请确保您已激活错误报告，以便在出现错误时得到响应`file_get_contents`。

# python - 如何在 Windows 上设置 Python 默认语言环境？

> ID：11234843
> 
> 赞同：2
> 
> 时间：2012-06-27T21:10:22.427
> 
> 标签：python, windows, locale

我知道我使用更改更改应用程序的语言环境

```
import locale
locale.setlocale(locale.LC_ALL, '') 
```

文档说语言环境的默认值通常来自 LANG 环境变量。但是，在 Windows 平台上，它似乎有所不同。Python 在哪里获取语言环境的默认值？有没有办法更改我所有 Python 脚本的默认值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:19:11.437

可以通过控制面板设置 Windows 系统的默认系统区域设置。`setlocale`当您使用 '' 作为第二个参数调用时，Python 使用此默认语言环境。请参阅[此处](http://java.com/en/download/help/locale.xml)了解如何更改默认语言环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:16:52.653

这是您在控制面板中设置的值。

# php - strpos() 返回错误的位置

> ID：11234844
> 
> 赞同：0
> 
> 时间：2012-06-27T21:10:29.947
> 
> 标签：php, arrays, string, strpos

我是 PHP 新手，但我想我会尝试一下...

这是我的代码：

```
function ScrambleDataPlus($inData){
    $normalAlphabet =   "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÜabcdefghijklmnopqrstuvwxyzäöü.-,& ";
    $scrambAlphabet1 =  "ZXe.LSzdQVkcOt74Üüsry12b$0B#RfWöiEw,aIPAKDC3ÄN&JTjFmgn6Ux8YpvoqhGu5älHÖ9M";
    $scrambAlphabet2 =  "1eTLUÄzXjYp.dx684IÜ5äWgnCüsr7DEw,3voFGVhiQu&HÖ2JfOty#RbMP9ZamklSö$0BNcqAK";
    $reorderPosition =  array(3,12,15,7,2,11,14,1,10,8,4,13,6,16,5,9,0);

    $outData = array();
    $backup = array();
    $result = "";
    $alphabetPosition = 0;
    $newPosition = 0;

    if(strlen($inData) == 17)
    {
        //Scramble data with first aphabet
        for ($i = 0; $i < strlen($inData); $i += 2)
        {
            $alphabetPosition = strpos($normalAlphabet, $inData[$i]);               
            $outData[$i] = $scrambAlphabet1[$alphabetPosition];
            //print("From: ".$inData[$i]." to: ".$outData[$i]);
        }
        //print(sizeof($outData)."<br>");
        //printArray($outData);

        //Scramble data with second aphabet
        for ($i = 1; $i < strlen($inData); $i += 2)
        {
            $alphabetPosition = strpos($normalAlphabet, $inData[$i]);
            $outData[$i] = $scrambAlphabet2[$alphabetPosition];

        }
        //print(sizeof($outData)."<br>");
        //printArray($outData);

        //mix original order
        $backup = $outData;
        for ($i = 0; $i < strlen($inData); $i++)
        {
            $newPosition = $reorderPosition[$i];
            $outData[$i] = $backup[$newPosition];

        }
        //print(sizeof($outData)."<br>");
        //printArray($outData);

        for ($i = 0; $i < sizeof($outData); $i++)
        {
            $result .= $outData[$i];
            //print($i.". iteration: ".$outData[$i]."<br>");
        }
    }
    else
        $result = "Fehler";

    return $result;
} 
```

这两个字符串是我的加扰字母表。我注意到一些奇怪的行为：一些字母被错误的“乱码”字母取代。

例如：从：0 到：Z；从： 。至：H；从：7 到：d；从：2 到：e；从：1 到：X；从：h 到：N；从：l 到：j；从：o 到：g；从：0 到：Z；9

注意，那个“。” 应该是“l”（一）和“l”（较低的 L）应该是“F” - 那么这里发生了什么？！

PS .：对于调试的东西很抱歉 - 我只是想知道发生了什么......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T21:12:11.607

尝试使用`mb_strpos()`. 看起来您有一些非拉丁字符，并且 PHP 的默认字符串库与 ISO-8859-1 以外的任何内容都不兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:40:02.790

需要将编码设置为 UTF-8 并使用 mb_strpos 而不是 strpos：

mb_internal_encoding("UTF-8");

# php - 如何在php中获取多维数组中的所有键

> ID：11234852
> 
> 赞同：10
> 
> 时间：2012-06-27T21:10:42.753
> 
> 标签：php, arrays, key, multidimensional-array

```
Array
(
    [0] => Array
        (
            [name] => A
            [id] => 1
            [phone] => 416-23-55
            [Base] => Array
                (
                    [city] => toronto
                )

            [EBase] => Array
                (
                    [city] => North York                
                )

            [Qty] => 1
        )

(
    [1] => Array
        (
            [name] => A
            [id] => 1
            [phone] => 416-53-66
            [Base] => Array
                (
                    [city] => qing
                )

            [EBase] => Array
                (
                    [city] => chong                
                )

            [Qty] => 2
        )

) 
```

如何获取格式为“0、姓名、身份证、电话、基地、城市、Ebase、数量”的所有键值？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-27T21:17:00.793

试试这个

```
function array_keys_multi(array $array)
{
    $keys = array();

    foreach ($array as $key => $value) {
        $keys[] = $key;

        if (is_array($value)) {
            $keys = array_merge($keys, array_keys_multi($value));
        }
    }

    return $keys;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T21:15:25.053

如果您不知道数组的大小，请使用带有 foreach 循环的递归函数，如果每个 $val 都是数组，则该循环会调用自身。如果您确实知道大小，那么只需遍历每个维度并记录每个维度的键。

像这样的东西：

```
<?php
function getKeysMultidimensional(array $array) 
{
    $keys = array();
    foreach($array as $key => $value)
    {
        $keys[] = $key;
        if( is_array($value) ) { 
            $keys = array_merge($keys, getKeysMultidimensional($value));
        }
    }

    return $keys;

} 
```

# c# - Multicast Delegate 中的方法发生异常时会发生什么

> ID：11234854
> 
> 赞同：6
> 
> 时间：2012-06-27T21:10:58.423
> 
> 标签：c#, .net

我想了解在多播代表中处理异常的最佳方法是什么？

我的问题是，如果方法在多播委托执行中抛出异常会发生什么？它会停止吗？继续 ？如何处理 ？如果有人可以分享，一个带有解释的小程序将非常有帮助....谢谢....

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T21:15:33.000

异常将立即传播，并且委托的调用列表中的任何“稍后”操作都*不会*被执行。如果您想确保执行*所有*委托 - 例如，可能将所有异常聚合在一起 - 您需要调用[`Delegate.GetInvocationList`](http://msdn.microsoft.com/en-us/library/system.delegate.getinvocationlist.aspx)，将这些委托中的每一个转换为与原始委托相同的类型，然后逐个调用它们，捕获抛出异常。

这是一些执行此操作的示例代码 - 最好以更通用的方式执行此操作，理想情况下构建一个新委托，该委托（执行时）将执行所有组成委托并聚合异常......但这是一个开始.

```
using System;
using System.Collections.Generic;
using System.Threading.Tasks;

class Program
{
    public static void Main()
    {
        Action x = null;
        x += () => Console.WriteLine("First");
        x += () => { throw new Exception("Bang 1"); };
        x += () => { throw new Exception("Bang 2"); };
        x += () => Console.WriteLine("Second");

        try
        {
            ExecuteAll<Action>(x, action => action());
        }
        catch (AggregateException e)
        {
            Console.WriteLine(e);
        }
    }

    public static void ExecuteAll<T>(Delegate multi, Action<T> invoker)
    {
        List<Exception> exceptions = new List<Exception>();
        foreach (var single in multi.GetInvocationList())
        {
            try
            {
                invoker((T)(object)single);
            }
            catch (Exception e)
            {
                exceptions.Add(e);
            }
        }
        if (exceptions.Count > 0)
        {
            throw new AggregateException(exceptions);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:14:58.080

它将像任何其他异常一样工作，并且将与非多播委托一样工作：异常向上传播堆栈。

# iphone - 在 iOS 中使用图像蒙版动画填充圆形进度表

> ID：11234856
> 
> 赞同：4
> 
> 时间：2012-06-27T21:11:02.413
> 
> 标签：iphone, ios, ipad, core-animation, core-graphics

我需要使用类似 HUD 的饼图动画来为圆形进度表的填充设置动画。我找到了如何使用 Core Animation 以纯色为路径设置动画的示例。不同之处在于我需要填充是图像蒙版（请参阅链接），而不是纯色。

[点击这里查看设计图片](http://imageshack.us/g/337/screenshot20120627at156.png/)

有人可以提供有关如何使用 Core Animation 或其他任何东西来解决此问题的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-22T16:42:58.580

我的魔术数字示例（为了更好地理解）：

```
 CAShapeLayer *circle = [CAShapeLayer layer];
  circle.path = [UIBezierPath bezierPathWithArcCenter:CGPointMake(29, 29) radius:27 startAngle:-M_PI_2 endAngle:2 * M_PI - M_PI_2 clockwise:YES].CGPath;
  circle.fillColor = [UIColor clearColor].CGColor;
  circle.strokeColor = [UIColor greenColor].CGColor;
  circle.lineWidth = 4;

  CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
  animation.duration = 10;
  animation.removedOnCompletion = NO;
  animation.fromValue = @(0);
  animation.toValue = @(1);
  animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
  [circle addAnimation:animation forKey:@"drawCircleAnimation"];

  [imageCircle.layer.sublayers makeObjectsPerformSelector:@selector(removeFromSuperlayer)];
  [imageCircle.layer addSublayer:circle]; 
```

imageCircle - 带有自定义“图像掩码”的 UIImageView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T04:01:47.983

这是循环进度视图的基本教程：

[http://iosdevtricks.blogspot.com/2013/06/custom-circular-progress-view-for-ios.html](http://iosdevtricks.blogspot.com/2013/06/custom-circular-progress-view-for-ios.html)

您将需要进行一些额外的调整：

1.  以木质纹理为背景
2.  将圆圈颜色更改为绿色
3.  调整圆的半径和圆的线宽
4.  中心圆，使其适合木质纹理

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T05:16:08.327

如果您已经知道如何使用纯色，那么您需要做的就是创建一个用作`mask`图像的新图层（绿色圆圈）。遮罩层的 Alpha 通道用于确定可见的内容，因此您可以使用您已经阅读过的任何使用单一颜色的示例并将其用于您的遮罩。可以对遮罩层的属性进行动画更改以使图像的或多或少变得可见。

所以你需要做的是：

*   对齐两个图像，背景和绿色圆圈。
*   根据您阅读的示例之一创建一个新层（您可以在此处或[此处查看](https://stackoverflow.com/a/10651797/608157)[我的答案](https://stackoverflow.com/a/8021051/608157)以获得另外两个示例）。
*   将新层设置为`mask`蓝色 imageViews 层
*   为遮罩层的圆形进度设置动画。

# grep - 你如何 grep 一个包含斜杠的字符串？

> ID：11234858
> 
> 赞同：19
> 
> 时间：2012-06-27T21:11:20.960
> 
> 标签：grep, slash

我应该如何查找包含正斜杠的字符串`./.`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-27T21:16:04.350

正斜杠在 grep 中不是特殊字符，但可能在 sed、Ruby 或 Perl 等工具中。不过，您可能想转义字面句号，转义斜线也无妨。这应该适用于所有情况：

```
\.\/\. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-27T21:14:18.140

您只需要用反斜杠转义句点。因此，如果我有一个`foo.txt`包含内容的文件：

```
./.
foo
bar
./. 
```

我可以运行`grep \./\. test.txt`，它应该只打印两`./.`行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-12T10:26:33.773

试试 fgrep。在你的情况下`fgrep '/<string>'`

# arrays - 结构数组 - 在没有循环的字段内对矩阵进行操作

> ID：11234859
> 
> 赞同：1
> 
> 时间：2012-06-27T21:11:28.290
> 
> 标签：arrays, matlab, struct

我有以下称为测试的结构数组，其中每个字段都是包含矩阵的 [1x3] 结构数组。我想创建一个新字段levelsq，它对每个矩阵元素进行平方。我可以用一个循环来做到这一点：

```
[test(1:3).level] = deal([1,1],[2,2],[3,3])

for i = 1:3
   test(i).levelsq = test(i).level.^2
end

test.level
ans =
     1     1
ans =
     2     2
ans =
     3     3

test.levelsq
ans =
     1     1
ans =
     4     4
ans =
     9     9 
```

我已经通过分离和连接元素获得了一些方法，但还不能添加新字段：

```
temp = num2cell([test.level].^2) 
test.levelsq = temp{:}
??? Illegal right hand side in assignment. Too many elements. 
```

然后我尝试重塑临时变量，但它仍然不是正确的形式

```
temp2= reshape(temp,2,3)'
temp2 = 
[1]    [1]
[4]    [4]
[9]    [9] 
```

有没有更简单的方法来做到这一点而无需循环或不必分离内容？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:41:46.330

```
test = arrayfun(@(x) setfield(x, 'levelsq', x.level .^ 2), test); 
```

顺便说一句，如果您设置列向量，您可以轻松访问数组的值：

```
>> [test.level]

ans =

     1     2     3
     1     2     3

>> [test.levelsq]

ans =

     1     4     9
     1     4     9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:48:49.297

您可能需要考虑您的应用程序需要哪些数据类型。您当前正在使用数值数组、元胞数组和结构（即双重嵌套结构！）。

“Matlab”方法是使用数字数组（也称为矩阵）来完成所有这些工作。它们经过高度优化，非常有利于数学运算。

你可以这样做：

```
level = [ 1 1; 2 2; 3 3;];
levelsq = level.^2; 
```

如果您想要一个数据结构同时保存`level`和`levelsq`，您可以将两者连接成一个三维矩阵：

```
test = cat(3, level, levelsq); 
```

你可以通过调用来访问level，通过调用来访问`test(:,:,1)`levelsq `test(:,:,2)`。

另一方面，如果您需要保留您正在使用的数据结构，您就无法击败@Serg。

# jboss5.x - 运行 Jsfunit 测试时出现空指针异常

> ID：11234860
> 
> 赞同：0
> 
> 时间：2012-06-27T21:11:40.977
> 
> 标签：jboss5.x, jsfunit

我正在尝试运行 JSFUnit 测试来测试我的 jsf 页面以及 JBoss 上的托管 bean。我在整个运行测试时都得到了 Null 指针异常。

我正在使用 jboss-jsfunit-core-1.3.0.Final.jar。前段时间我在使用 jboss-jsfunit-core-1.0.0.GA.jar 并且可以成功运行 jsf 单元测试。

这是我的堆栈跟踪

```
null

java.lang.NullPointerException
at org.jboss.jsfunit.framework.FaceletsErrorPageException.isFaceletsErrorPage  (FaceletsErrorPageException.java:55)
at org.jboss.jsfunit.framework.FaceletsErrorPageDetector.afterRequest(FaceletsErrorPageDetector.java:39)
at org.jboss.jsfunit.framework.JSFUnitWebConnection.notifyListenersAfter(JSFUnitWebConnection.java:103)
at org.jboss.jsfunit.framework.JSFUnitWebConnection.getResponse(JSFUnitWebConnection.java:84)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1487)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1445)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:323)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:384)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:369)
at org.jboss.jsfunit.framework.SimpleInitialRequestStrategy.doInitialRequest(SimpleInitialRequestStrategy.java:48)
at org.jboss.jsfunit.framework.WebClientSpec.doInitialRequest(WebClientSpec.java:244)
at org.jboss.jsfunit.jsfsession.JSFSession.<init>(JSFSession.java:80)
at org.jboss.jsfunit.jsfsession.JSFSession.<init>(JSFSession.java:57)
at uk.co.pruhealth.heal.web.jsfunit.PolicyHolderDetailsJSFUnitTest.setUp(PolicyHolderDetailsJSFUnitTest.java:21)
at org.apache.cactus.internal.AbstractCactusTestCase.runBareServer(AbstractCactusTestCase.java:153)
at org.apache.cactus.internal.server.AbstractWebTestCaller.doTest(AbstractWebTestCaller.java:119)
at org.apache.cactus.internal.server.AbstractWebTestController.handleRequest_aroundBody0(AbstractWebTestController.java:93)
at org.apache.cactus.internal.server.AbstractWebTestController.handleRequest_aroundBody1$advice(AbstractWebTestController.java:224)
at org.apache.cactus.internal.server.AbstractWebTestController.handleRequest(AbstractWebTestController.java)
at org.apache.cactus.server.ServletTestRedirector.doPost_aroundBody2(ServletTestRedirector.java:101)
at org.apache.cactus.server.ServletTestRedirector.doPost_aroundBody3$advice(ServletTestRedirector.java:224)
at org.apache.cactus.server.ServletTestRedirector.doPost(ServletTestRedirector.java)
at org.apache.cactus.server.ServletTestRedirector.doGet_aroundBody0(ServletTestRedirector.java:72)
at org.apache.cactus.server.ServletTestRedirector.doGet_aroundBody1$advice(ServletTestRedirector.java:224)
at org.apache.cactus.server.ServletTestRedirector.doGet(ServletTestRedirector.java)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.jsfunit.framework.JSFUnitFilter.doFilter(JSFUnitFilter.java:116)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:183)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:95)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.internalProcess(ActiveRequestResponseCacheValve.java:74)
at org.jboss.web.tomcat.service.request.ActiveRequestResponseCacheValve.invoke(ActiveRequestResponseCacheValve.java:47)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:599)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:451)
at java.lang.Thread.run(Thread.java:619) 
```

在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:17:21.707

它似乎没有获得足够的 Internet 连接。重新下载并尝试重置您的 Internet 连接。

# c++ - 如何保证模板结构中 const 静态成员的初始化顺序

> ID：11234862
> 
> 赞同：3
> 
> 时间：2012-06-27T21:11:46.857
> 
> 标签：c++, templates, initialization, static-members, static-initialization

我有两个模板结构，每个都包含一个 const 静态成员变量。这些成员变量之一的初始化取决于第二个。因此，我希望能够保证第二个在第一个之前初始化。这是一个简化的示例：

依赖项.hpp：

```
template<typename T, T> struct value { };

template <typename T>
struct Dependency {
  Dependency() {}
  Dependency(T v) : var(v) {}
  const static Dependency staticVar;
  T var;
};

template <typename T>
const Dependency<T> Dependency<T>::staticVar = Dependency<T>(1.5); 
```

测试结构.hpp：

```
#include "dependency.hpp"

//template class Dependency<double>; [1]
//template class Dependency<float>;  [2]

template <typename T>
struct TestStruct {
  TestStruct(Dependency<T> v) : var(v.var) {}

  const static TestStruct staticVar;
  T var;
};

template <typename T>
const TestStruct<T> TestStruct<T>::staticVar = TestStruct<T>(Dependency<T>(Dependency<T>::staticVar)); 
```

测试.cpp：

```
#include <iostream>
#include "testStruct.hpp"

using namespace std;

int main(int argc, char *argv[])
{
  cout << "TestStruct<d> " << TestStruct<double>::staticVar.var << endl;
  cout << "Dependency<d> " << Dependency<double>::staticVar.var << endl;

  cout << endl;

  cout << "Dependency<f> " << Dependency<float>::staticVar.var << endl; // [3]
  cout << "TestStruct<f> " << TestStruct<float>::staticVar.var << endl;

  return 0;
}; 
```

main的输出是

```
TestStruct<d> 0
Dependency<d> 1.5

Dependency<f> 1.5
TestStruct<f> 1.5 
```

也就是说，如果已经为 type 实例化了`TestStruct<T>`' ，则它`staticVar`会被正确初始化，但否则它会保持为 0 ，因为尚未初始化。取消注释 [1] 和 [2] 解决了类型问题和（即，所有输出 1.5，即使已注释 [3] 也是如此），但如果可能的话，我宁愿不必列出所有可能的类型或为那些实例化模板键入不使用它们的代码。我希望能够在（或）中放入一些东西来保证已经为该类型实例化，而不必指定 T 可能是什么类型。`Dependency``T``Dependency<T>::staticVar``float``double``TestStruct<T>``testStruct.hpp``Dependency`

我看过[C++ 静态成员初始化（里面的模板很有趣）](https://stackoverflow.com/questions/1819131/c-static-member-initalization-template-fun-inside)和[如何强制初始化静态成员？](https://stackoverflow.com/questions/6420985/how-to-force-a-static-member-to-be-initialized). 第一个很好地解释了情况，但没有为像我这样的问题提出解决方案。第二个有两个解决方案，但似乎都不能在 GCC 4.2.1 中工作（或者我错误地应用了它......）。

我应该尝试任何其他技巧或解决方法，还是我坚持显式实例化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-10T20:28:40.593

正如 cdhowie 所建议的，您可以使用静态方法来确保 和 之间的初始化`TestStruct`顺序`Dependency`。如果您真的关心维护静态变量而不是静态方法的外观，则可以使用由静态方法调用初始化的静态引用变量。

您只需要确保您的静态方法实现本身不使用静态引用变量，以便在全局初始化上下文期间可以安全地调用它们。

```
template <typename T>
struct Dependency {
  Dependency() {}
  Dependency(T v) : var(v) {}
  static const Dependency & staticMethod () {
      static const Dependency staticMethodVar(1.5);
      return staticMethodVar;
  }
  static const Dependency & staticVar;
  T var;
};

template <typename T>
const Dependency<T> & Dependency<T>::staticVar
        = Dependency<T>::staticMethod();

template <typename T>
struct TestStruct {
  TestStruct(Dependency<T> v) : var(v.var) {}
  static const TestStruct & staticMethod () {
      static const TestStruct staticMethodVar(Dependency<T>::staticMethod());
      return staticMethodVar;
  }
  static const TestStruct & staticVar;
  T var;
};

template <typename T>
const TestStruct<T> & TestStruct<T>::staticVar
        = TestStruct<T>::staticMethod(); 
```

# ssh - 如何在 SSH 中自动创建带有代码的文件？

> ID：11234864
> 
> 赞同：3
> 
> 时间：2012-06-27T21:11:49.680
> 
> 标签：ssh

我如何在 SSH 中创建一个已经包含代码的文件？

类似于 touch filename.php >> echo "thecode here" 的内容

??

另外，任何 SSH 提示？希望变得更有效率。

你知道，工作更聪明而不是更努力。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:25:45.800

```
echo "some text" > myfile.txt 
```

将生成一个名为 myfile.txt 的文件，其中包含“一些文本”。

如果您的本地计算机上已经有一个文件要移动到远程计算机，则可以使用 scp。

```
scp /some/local/file.txt my.server.com:/some/remote/file.txt 
```

# android - 保存复杂状态

> ID：11234865
> 
> 赞同：0
> 
> 时间：2012-06-27T21:11:50.357
> 
> 标签：android

我可以看到我将如何保存简单整数和 wot-not 之类的东西，但是，例如，如果我的主要活动是与服务通信，我将创建一个隐藏在类成员中的 Handler 实例。我该如何保存这样的复杂对象？我如何重新联系我的服务？（可能这个问题的内容证明我确实很困惑，但我希望有人能幽默我:-)。

显然我需要让我的困惑更清楚。让我们尝试一个例子。我有一个像这样初始化的类成员：

```
private final Handler mHandler = new Handler() {...yadda, yadda}; 
```

我已将它传递给使用它向我的主要活动发送回消息的服务。当我（例如）旋转屏幕时，是什么让同一个处理程序实例仍然存在于我的活动中？

同样对于来自的 mTalkService 类成员

```
new AardTalkerService(this, mHandler); 
```

这是服务本身，是什么让我可以在保存/恢复状态后使用 mTalkService？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:00:45.947

不要使用对`Activity`类成员的直接访问，因为它经常被杀死和重新创建，足以保证您的应用程序最终会崩溃和烧毁。

您可以使用广播接收器或`Observable/Observer`模式，在其中您的`Activity`注册为`Observer`in`onRestore()`和取消注册 in `onPause()`，以确保没有人尝试向 dead 发送更新`Activity`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:08:47.957

真的很酷的方式（这真的取决于“酷”对你意味着什么；））这样做是创建一个继承自 android.app.Application 的类并在那里添加你的字段。因此，当您从应用程序的任何位置请求上下文时，您将获得此类的一个实例，并且您可以访问您的字段。

（注意::: 您需要在清单中注册您的自定义实现才能使其正常工作。）

否则，如果您想要它简单、快速和肮脏，只需拥有一个静态类，拥有一个静态字段，并从您的服务和活动中访问它。（注意线程同步问题）

如果你的服务和活动在同一个进程上运行，你可以使用一个自定义接口，它有一个简单的回调，可以从你的活动订阅，而不是通过处理程序的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:50:18.790

将其设为类字段并在 OnCreate() 方法中对其进行初始化，这样您几乎可以在应用程序的任何位置使用它。

# orm - org.hibernate.MappingException：找不到实体类（使用限定的类名不起作用）

> ID：11234868
> 
> 赞同：3
> 
> 时间：2012-06-27T21:12:00.510
> 
> 标签：orm, hql, hibernate-tools

我正在尝试运行一个简单的 SELECT FROM 表（我也尝试过 SELECT FROM package.Class ）查询，但我不断收到此错误：

```
 org.hibernate.MappingException: entity class not found: demo.Agents
    at org.hibernate.mapping.PersistentClass.getMappedClass(PersistentClass.java:125)
    at org.hibernate.tuple.PropertyFactory.getGetter(PropertyFactory.java:191)
    at org.hibernate.tuple.PropertyFactory.buildIdentifierProperty(PropertyFactory.java:67)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:136)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:475)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:133)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:84)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:297)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1385)
    at org.hibernate.console.ConsoleConfiguration$5.execute(ConsoleConfiguration.java:278)
    at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
    at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
    at org.hibernate.console.ConsoleConfiguration.buildSessionFactory(ConsoleConfiguration.java:273)
    at org.hibernate.eclipse.console.actions.ExecuteQueryAction.execute(ExecuteQueryAction.java:82)
    at org.hibernate.eclipse.console.actions.ExecuteQueryAction.run(ExecuteQueryAction.java:56)
    at org.eclipse.jface.action.Action.runWithEvent(Action.java:498)
    at org.hibernate.eclipse.console.actions.ExecuteQueryAction.runWithEvent(ExecuteQueryAction.java:60)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$6.handleEvent(ActionContributionItem.java:452)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
Caused by: java.lang.ClassNotFoundException: demo.Agents
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:513)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:429)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:417)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at org.hibernate.util.ReflectHelper.classForName(ReflectHelper.java:192)
    at org.hibernate.mapping.PersistentClass.getMappedClass(PersistentClass.java:122)
    ... 43 more 
```

这是该类的 hbm.xml 文件（注意完整的限定符 demo.Agents）

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Generated Jun 27, 2012 19:17:46 by Hibernate Tools 3.6.0 -->
<hibernate-mapping>
    <class name="demo.Agents" table="agents" schema="public">
        <id name="id" type="int">
            <column name="id" />
            <generator class="assigned"></generator>
        </id>
        <property name="ssn" type="long">
            <column name="ssn" precision="13" scale="0" not-null="true" />
        </property>
        <property name="namee" type="string">
            <column name="namee" length="15" not-null="true" />
        </property>
        <property name="surname" type="string">
            <column name="surname" length="30" not-null="true" />
        </property>
        <property name="adress" type="string">
            <column name="adress" length="100" />
        </property>
        <property name="phone" type="string">
            <column name="phone" length="20" />
        </property>
    </class>
</hibernate-mapping> 
```

其他一些细节，可能有帮助：

[http://img441.imageshack.us/img441/2572/ss20120627202116.png](http://img441.imageshack.us/img441/2572/ss20120627202116.png)

[http://img20.imageshack.us/img20/2236/ss20120624201620.png](http://img20.imageshack.us/img20/2236/ss20120624201620.png)

如果您需要任何其他打印屏幕，我很乐意提供。请帮忙 ：）。我处于一个非常紧张的位置。谢谢（有人添加了一些更好的标签，我现在压力很大，想太多了）

乐

hibernatecfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>

        <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
        <property name="hibernate.connection.password">blablabla</property>
        <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/projteste</property>
        <property name="hibernate.connection.username">postgres</property>
            <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
    </session-factory>
</hibernate-configuration> 
```

映射在控制台配置中完成

LE2 查看注释（链接 607）如果我从控制台配置中的其他映射中删除类，我会收到该错误。

这是hibernatecfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
                                         "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
 <session-factory name="">
  <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
  <property name="hibernate.connection.password">123456</property>
  <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/projteste</property>
  <property name="hibernate.connection.username">postgres</property>
  <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
  <mapping resource="demo/Clients.hbm.xml"/>
    <mapping resource="demo/Agents.hbm.xml"/>
 </session-factory>
</hibernate-configuration> 
```

和堆栈跟踪

```
org.hibernate.MappingNotFoundException: resource: demo/Clients.hbm.xml not found
at org.hibernate.cfg.Configuration.addResource(Configuration.java:665)
at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:1679)
at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:1647)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1626)
at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1600)
at org.hibernate.cfg.Configuration.configure(Configuration.java:1554)
at org.hibernate.console.ConfigurationFactory.loadConfigurationXML(ConfigurationFactory.java:351)
at org.hibernate.console.ConfigurationFactory.configureStandardConfiguration(ConfigurationFactory.java:279)
at org.hibernate.console.ConfigurationFactory.buildConfiguration(ConfigurationFactory.java:184)
at org.hibernate.console.ConfigurationFactory.createConfiguration(ConfigurationFactory.java:96)
at org.hibernate.console.ConsoleConfiguration$3.execute(ConsoleConfiguration.java:240)
at org.hibernate.console.execution.DefaultExecutionContext.execute(DefaultExecutionContext.java:63)
at org.hibernate.console.ConsoleConfiguration.execute(ConsoleConfiguration.java:107)
at org.hibernate.console.ConsoleConfiguration.buildWith(ConsoleConfiguration.java:237)
at org.hibernate.console.ConsoleConfiguration.build(ConsoleConfiguration.java:188)
at org.hibernate.eclipse.console.workbench.ConsoleConfigurationWorkbenchAdapter.getChildren(ConsoleConfigurationWorkbenchAdapter.java:42)
at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.getChildren(BasicWorkbenchAdapter.java:100)
at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

k4

```
 org.hibernate.console.HibernateConsoleRuntimeException: Could not compute classpath
    at org.hibernate.eclipse.console.EclipseLaunchConsoleConfigurationPreferences.getCustomClassPathURLS(EclipseLaunchConsoleConfigurationPreferences.java:103)
    at org.hibernate.eclipse.console.utils.ProjectUtils.findJavaProjects(ProjectUtils.java:302)
    at org.hibernate.eclipse.console.workbench.ProjectCompilerVersionChecker.validateProjectComplianceLevel(ProjectCompilerVersionChecker.java:35)
    at org.hibernate.eclipse.console.workbench.ConsoleConfigurationWorkbenchAdapter.getChildren(ConsoleConfigurationWorkbenchAdapter.java:37)
    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.getChildren(BasicWorkbenchAdapter.java:100)
    at org.hibernate.eclipse.console.workbench.BasicWorkbenchAdapter.fetchDeferredChildren(BasicWorkbenchAdapter.java:106)
    at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.eclipse.core.runtime.CoreException: Unable to restore classpath entry.
    at org.eclipse.jdt.launching.JavaRuntime.abort(JavaRuntime.java:1376)
    at org.eclipse.jdt.launching.JavaRuntime.abort(JavaRuntime.java:1361)
    at org.eclipse.jdt.launching.JavaRuntime.newRuntimeClasspathEntry(JavaRuntime.java:731)
    at org.eclipse.jdt.launching.StandardClasspathProvider.recoverRuntimePath(StandardClasspathProvider.java:100)
    at org.eclipse.jdt.launching.StandardClasspathProvider.computeUnresolvedClasspath(StandardClasspathProvider.java:65)
    at org.eclipse.jdt.launching.JavaRuntime.computeUnresolvedRuntimeClasspath(JavaRuntime.java:1215)
    at org.hibernate.eclipse.console.utils.ClassLoaderHelper.getClasspath(ClassLoaderHelper.java:146)
    at org.hibernate.eclipse.console.EclipseLaunchConsoleConfigurationPreferences.getCustomClassPathURLS(EclipseLaunchConsoleConfigurationPreferences.java:94)
    ... 7 more
Caused by: org.xml.sax.SAXException: FWK005 parse may not be called while parsing.
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:263)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284)
    at org.eclipse.jdt.launching.JavaRuntime.newRuntimeClasspathEntry(JavaRuntime.java:708)
    ... 12 more 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T21:34:36.820

您忘记在主配置文件中声明映射文件：

```
<session-factory>
    ...
    <mapping resource="demo/Clients.hbm.xml"/>
    <mapping resource="demo/Agents.hbm.xml"/>
</session-factory> 
```

我将在这里重复我的评论：实体应该以单数形式命名：`Agent`, `Client`. 调整自动生成（参见[http://docs.jboss.org/tools/3.0.1.GA/en/hibernatetools/html_single/index.html#tab_and_col](http://docs.jboss.org/tools/3.0.1.GA/en/hibernatetools/html_single/index.html#tab_and_col)），或者之后重构生成的代码，因为您的所有应用程序代码将基于这些名称，调用 an 真的很`Agent`糟糕`Agents`。代码将令人困惑且难以理解。实体无论如何都是应用程序的核心，并且应该包含其他方法，而不仅仅是 setter 和 getter。所以自动生成启动是可以的，但之后应该忘记。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-02T20:44:33.610

在您`xxx.hbm.xml`使用限定的类名中：`package_name.xxx`在 hibernate-mapping 元素中。这是 POJO 的 jboss 规范。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-27T10:48:29.840

并检查 .hbm.xml 文件，该类名完全符合表名。例如：

```
<class name="com.test.Emp" table="Emp">.. </class> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:54:06.870

看起来我解决了它：
1）我不需要修改我原来的 hibernatecfg.xml 。显然，我在控制台配置中定义的映射与我在项目文件夹中的 hbm.xml 文件之间存在不一致（它们的名称略有不同）。
如果您使用 ant 从 hbmxml 文件构建 pojos，则阅读此内容的人不应添加`<sessionfactory>`标签（如果我记得有双重导入错误，请转到此处 [http://docs.jboss.org/tools/latest/en/hibernatetools/html_single/](http://docs.jboss.org/tools/latest/en/hibernatetools/html_single/)和搜索重复）。永远记得重建和刷新您的控制台配置和您的项目
2) select id, ssn FROM demo.Agents 查询有效，但 select id,ssn FROM 代理不...这很奇怪吗？
3）记得在执行之前保存您的查询；似乎否则它会执行较旧的查询
4）如果我的回答有帮助，请发表评论：D 即使它在我发布它 10 年后对您有所帮助。我会检查 :D
5) 感谢 Nizet 的建议
6) 我还有什么遗漏的吗？

# xml - xquery 表达式仅在其中包含特定字符串时才返回链接文本

> ID：11234873
> 
> 赞同：0
> 
> 时间：2012-06-27T21:12:25.880
> 
> 标签：xml, xquery

我想从 XML 文档中提取一些链接（链接的格式与 html 页面上的格式相同）。

例如，一个链接是“http://xyz.com/start/tyu/a.html”，另一个是“http://ert.com/tyu/b.html”，而第三个链接是“http:// /asdf.com/ghjk/c.html"

从上面的 3 个链接（我在 FLWOR 表达式中使用 for 子句）...我只想选择其中包含字符串“tyu”的链接——我想为此使用子字符串，但是子字符串需要指定开始和结束位置 - 而在我的场景中，我不知道所需的字符串将在哪个位置。

在这种情况下如何进行子字符串匹配，即不知道子字符串出现的确切位置？为此，我可以使用 XQuery 1.0。

最后，我想提取链接 URL，以及链接文本......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:40:03.010

这是[fn:contains](http://www.w3.org/TR/xquery-operators/#func-contains)的工作：

```
 for $link in
   (
     <a href="http://xyz.com/start/tyu/a.html">first link</a>,
     <a href="http://ert.com/tyu/b.html">second link</a>,
     <a href="http://asdf.com/ghjk/c.html">third link</a>
   )
   where contains($link/@href, "tyu")
   return <link url="{$link/@href}" text="{$link}"/> 
```

# shell - 将 nmap 输出发送到文件而不将其打印到标准输出

> ID：11234874
> 
> 赞同：2
> 
> 时间：2012-06-27T21:12:33.800
> 
> 标签：shell, arguments, nmap

我正在`nmap`使用以下命令调用：

```
nmap -oX i.xml -p 1-1023 -r -T4 -d -d 
```

这样做会`i.xml`成功发送输出。但是，文本仍然打印在命令行上，另外被重定向到`i.xml`. 我希望命令在命令行上静默运行，但仍将其所有输出写入我的`i.xml`文件。我尝试使用该`-v0`参数，但使用它会导致我的 XML 文件和命令行都看不到任何输出。

如何告诉 nmap*仅*将其输出发送到我的 XML 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T21:29:20.250

您是否尝试过将标准输出重定向到空设备？

```
nmap -oX i.xml -p 1-1023 -r -T4 -d -d >/dev/null 
```

在 Windows 上，使用`NUL`代替`/dev/null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-19T15:01:32.130

首先，您没有在命令行上指定任何目标。不确定您打算做什么其次，-oX i.xml 将输出到 i.xml 和 stdout 要仅在 xml 文件（而不是 stdout）上获得结果，请添加额外的 -v0 参数

# regex - GWT 的验证工具或模式

> ID：11234883
> 
> 赞同：2
> 
> 时间：2012-06-27T21:13:14.743
> 
> 标签：regex, validation, gwt

我正在寻找一种工具或模式来实现 GWT 的验证。有没有嵌入验证功能的东西？

编辑：我的意思是表单中的验证

我使用 GWT 插件（包括 GWT Designer）安装了 STS，似乎我必须在 onblur 空事件之上编写我的验证事件和视觉行为。

是否有现有的工具或库可以简化开发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:08:23.223

你可以试试下面的库。

[http://gwt-vl.maydu.eu/ValidationShowcase.html](http://gwt-vl.maydu.eu/ValidationShowcase.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T09:06:59.083

如果您需要 JSR-303 验证，请查看[gwt-validation](http://code.google.com/p/gwt-validation/)。

# java - OSGi 捆绑包从非捆绑包 jar 导入包：为它们创建捆绑包？

> ID：11234884
> 
> 赞同：4
> 
> 时间：2012-06-27T21:13:15.327
> 
> 标签：java, jar, osgi

我是 OSGi 的新手，并且正在使用 Equinox。我已经进行了几次搜索，但找不到任何答案。OSGI上的讨论[- 处理捆绑包所需的 3rd 方 JAR 在](https://stackoverflow.com/questions/1340483/osgi-handling-3rd-party-jars-required-by-a-bundle)一定程度上有所帮助，但并没有完全回答我的问题。

我已经获得了一个 jar 文件，`rabbitmq-client.jar`它已经打包为 OSGi 包（在其 MANIFEST.MF 中具有 Bundle-Name 和其他此类属性），我想将其安装为包。这个 jar 导入包`org.apache.commons.io`和`org.apache.commons.io.input`从`commons-io-1.2.jar`. RabbitMQ 客户端 2.7.1 发行版还包括`commons-cli-1.1.jar`，所以我认为它也是必需的。

我检查了这些公用 jar 的清单，发现它们似乎没有打包为捆绑包。也就是说，它们的清单没有任何标准捆绑属性。

我的具体问题是：如果我`rabbitmq-client.jar`作为一个包安装，那么访问需要从公共 jar 导入的包的正确方法是什么？我只能想到三个替代方案，而无需重新构建`rabbitmq-client.jar`.

1.  来自公共 jar 的包已经包含在 Equinox 全局类路径中，并且`rabbitmq-client.jar`会从那里自动获取它们。
2.  我必须用两个公共 jar 制作另一个包，导出所需的包，然后在 Equinox 中安装该包。
3.  当我启动 Equinox 时，我必须将这两个公共 jars 放在全局类路径中，它们将从那里可用`rabbitmq-client.jar`。

我读过一个通常不使用 OSGi 容器中的全局类路径。我不清楚全局类路径中的项目在构建单个捆绑类路径时是否可用。但是，我注意到`rabbitmq-client.jar`它还导入了其他包，例如`javax.net`我认为来自全局类路径的包。还是有其他一些捆绑包可以导出它们？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T21:20:50.373

解决方案（2）是正确的方法。(1) 和 (3) 不起作用，因为正如您似乎已经理解的那样，OSGi 中没有全局类路径之类的东西。

每个包都导入它需要的所有包，而这些包必须由另一个包导出。有一个例外，那就是`java.*`命名空间下的所有类......即不需要 import`java.lang`等`java.util`。

诸如此类的包`javax.net`确实来自 JRE，但它们仍然不在“全局类路径”上。有一个称为 System Bundle 的特殊包，它代表 OSGi 中的 OSGi 框架本身。该捆绑包导出一堆来自 JRE 的包，例如`javax.net`、`javax.swing`、`org.w3c.dom`等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T02:05:38.580

我还要补充一下 Neil 所说的，对于流行的捆绑包，比如 commons-io，通常不需要选项 (2)，因为其他人已经这样做了。有一个 SpringSource 存储库，其中包含许多转换后的捆绑包。对于 commons-io，您可以做得更好，因为 maven Central 上的“官方”jar 版本 1.4 已经是一个捆绑包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-06T18:33:41.157

一种可能是将非 OSGI jar 添加`Bundle-classpath`到`MANIFEST.MF`.

在以下示例中，通用引用包括文件夹“libs”（位于包的根文件夹中）内的所有 jar，并将它们添加到包类路径中。

虽然通常认为这不是一个好的做法（与显式导入所需的包相比），但`DynamicImport-Package`可以使用自动添加所有包。当罐子被放入一个单独的“包装”包中时，正如 Neil Bartlett 所提议的那样，这不会造成太大的伤害：

```
Bundle-ClassPath: libs/*.jar
DynamicImport-Package: * 
```

在这种情况下，对于其他非 jar 依赖项，例如 dll 文件，添加以下内容`build.properties`会将文件夹“libs”及其子文件夹中的所有内容包含到包中，并具有相同的文件夹结构：

```
bin.includes = META-INF/,\
           .,\
           libs/** 
```

# ruby-on-rails-3 - 我怎样才能让rails应用程序只将twitter bootstrap css应用于选定的页面？

> ID：11234889
> 
> 赞同：0
> 
> 时间：2012-06-27T21:13:37.847
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我有一个应用程序，它将有一个每个人都可以看到的前端和一个供管理员管理数据的后端。我希望与后端相关的所有页面都应用 twitter 引导程序，而其他页面使用不同的 css。我已经根据控制器加载了不同的布局。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:23:32.900

很简单：只将 Twitter Bootstrap CSS 文件放在您用于后端的布局中！

# c++ - 查询简单的 C++ 线程池实现

> ID：11234894
> 
> 赞同：6
> 
> 时间：2012-06-27T21:14:16.677
> 
> 标签：c++, implementation, threadpool

Stackoverflow 给了我很大的帮助，我想回馈社区。我一直在使用 TinyThread++[网站](http://tinythreadpp.bitsnbites.eu/)C++ 可移植线程库，使用我从 Stackoverflow 中学到的东西来实现一个简单的线程池。我是线程编程的新手，所以对互斥锁等不太满意。我有一个问题最好在展示代码后提出（在 Linux 下运行得很好）：

```
// ThreadPool.h

class ThreadPool
{
 public:

 ThreadPool();
~ThreadPool();

// Creates a pool of threads and gets them ready to be used
void CreateThreads(int numOfThreads);

// Assigns a job to a thread in the pool, but doesn't start the job
// Each SubmitJob call will use up one thread of the pool.
// This operation can only be undone by calling StartJobs and
// then waiting for the jobs to complete. On completion,
// new jobs may be submitted.
void SubmitJob( void (*workFunc)(void *), void *workData );

// Begins execution of all the jobs in the pool.
void StartJobs();

// Waits until all jobs have completed.
// The wait will block the caller.
// On completion, new jobs may be submitted.
void WaitForJobsToComplete();

private:

enum typeOfWorkEnum { e_work, e_quit };

 class ThreadData
 {
   public:

    bool ready;  // thread has been created and is ready for work  
    bool haveWorkToDo;
    typeOfWorkEnum  typeOfWork;

    // Pointer to the work function each thread has to call.
    void (*workFunc)(void *);

    // Pointer to work data
    void *workData;

    ThreadData() : ready(false), haveWorkToDo(false) {  };
 };

struct ThreadArgStruct
{
    ThreadPool *threadPoolInstance;
    int         threadId;
};

// Data for each thread
ThreadData  *m_ThreadData;

ThreadPool(ThreadPool const&); // copy ctor hidden
ThreadPool& operator=(ThreadPool const&); // assign op. hidden

// Static function that provides the function pointer that a thread can call
// By including the ThreadPool instance in the void * parameter,
// we can use it to access other data and methods in the ThreadPool instance.
static void ThreadFuncWrapper(void *arg)
{
    ThreadArgStruct *threadArg = static_cast<ThreadArgStruct *>(arg);
    threadArg->threadPoolInstance->ThreadFunc(threadArg->threadId);
}

// The function each thread calls    
void ThreadFunc( int threadId );

// Called by the thread pool destructor
void DestroyThreadPool();

// Total number of threads available
// (fixed on creation of thread pool)
int m_numOfThreads;
int m_NumOfThreadsDoingWork;
int m_NumOfThreadsGivenJobs;

// List of threads
std::vector<tthread::thread *> m_ThreadList;

// Condition variable to signal each thread has been created and executing
tthread::mutex              m_ThreadReady_mutex;
tthread::condition_variable m_ThreadReady_condvar;

 // Condition variable to signal each thread to start work
tthread::mutex              m_WorkToDo_mutex;
tthread::condition_variable m_WorkToDo_condvar;

// Condition variable to signal the main thread that 
// all threads in the pool have completed their work
tthread::mutex              m_WorkCompleted_mutex;
tthread::condition_variable m_WorkCompleted_condvar;
}; 
```

cpp文件：

```
//
//  ThreadPool.cpp
//

#include "ThreadPool.h"    

// This is the thread function for each thread.
// All threads remain in this function until
// they are asked to quit, which only happens
// when terminating the thread pool.
void ThreadPool::ThreadFunc( int threadId )
{
 ThreadData *myThreadData = &m_ThreadData[threadId]; 
 std::cout << "Hello world: Thread " << threadId << std::endl;

 // Signal that this thread is ready
 m_ThreadReady_mutex.lock();
       myThreadData->ready = true;
       m_ThreadReady_condvar.notify_one(); // notify the main thread
 m_ThreadReady_mutex.unlock();       

 while(true)
 {
    //tthread::lock_guard<tthread::mutex> guard(m);
    m_WorkToDo_mutex.lock();

    while(!myThreadData->haveWorkToDo) // check for work to do
         m_WorkToDo_condvar.wait(m_WorkToDo_mutex); // if no work, wait here 
    myThreadData->haveWorkToDo = false; // need to do this before unlocking the mutex

    m_WorkToDo_mutex.unlock();

    // Do the work
    switch(myThreadData->typeOfWork)
    {
        case e_work:
            std::cout << "Thread " << threadId << ": Woken with work to do\n";

            // Do work
            myThreadData->workFunc(myThreadData->workData);

            std::cout << "#Thread " << threadId  << ": Work is completed\n";
            break;

         case e_quit:
             std::cout << "Thread " << threadId << ": Asked to quit\n";
             return; // ends the thread
    }

    // Now to signal the main thread that my work is completed
    m_WorkCompleted_mutex.lock();
       m_NumOfThreadsDoingWork--;

      // Unsure if this 'if' would make the program more efficient
      // if(m_NumOfThreadsDoingWork == 0)
           m_WorkCompleted_condvar.notify_one(); // notify the main thread
    m_WorkCompleted_mutex.unlock();       
  }

}

ThreadPool::ThreadPool() 
{ 
   m_numOfThreads = 0;  m_NumOfThreadsDoingWork = 0; m_NumOfThreadsGivenJobs = 0;
}

ThreadPool::~ThreadPool()
{
    if(m_numOfThreads)
    {
    DestroyThreadPool(); 
    delete [] m_ThreadData;
    }
}

void ThreadPool::CreateThreads(int numOfThreads)
{
// Check if a thread pool has already been created
if(m_numOfThreads > 0) 
   return;

m_NumOfThreadsGivenJobs = 0;
m_NumOfThreadsDoingWork = 0;
m_numOfThreads = numOfThreads;
m_ThreadData = new ThreadData[m_numOfThreads];
ThreadArgStruct threadArg;

for(int i=0; i<m_numOfThreads; ++i)
 {   
    threadArg.threadId = i;
    threadArg.threadPoolInstance = this;

    // Creates the thread and saves it in a list so we can destroy it later
    m_ThreadList.push_back( new tthread::thread( ThreadFuncWrapper, (void *)&threadArg  ) ); 

    // It takes a little time for a thread to get established.
    // Best wait until it gets established before creating the next thread.
    m_ThreadReady_mutex.lock();
    while(!m_ThreadData[i].ready)  // Check if thread is ready
        m_ThreadReady_condvar.wait(m_ThreadReady_mutex); // If not, wait here
    m_ThreadReady_mutex.unlock();    
 } 
} 

// Assigns a job to a thread, but doesn't start the job
void ThreadPool::SubmitJob(void (*workFunc)(void *), void *workData)
{
 // Check if the thread pool has been created
 if(!m_numOfThreads) 
    return;

 if(m_NumOfThreadsGivenJobs >= m_numOfThreads)
    return;

 m_ThreadData[m_NumOfThreadsGivenJobs].workFunc = workFunc;
 m_ThreadData[m_NumOfThreadsGivenJobs].workData = workData;  

 std::cout << "Submitted job " << m_NumOfThreadsGivenJobs << std::endl;

 m_NumOfThreadsGivenJobs++;  
}

void ThreadPool::StartJobs()
{
// Check that the thread pool has been created
// and some jobs have been assigned
if(!m_numOfThreads || !m_NumOfThreadsGivenJobs) 
   return;

// Set 'haveworkToDo' flag for all threads 
m_WorkToDo_mutex.lock();
   for(int i=0; i<m_NumOfThreadsGivenJobs; ++i)
   {
       m_ThreadData[i].typeOfWork = e_work;  // forgot to do this !
       m_ThreadData[i].haveWorkToDo = true;
   }
   m_NumOfThreadsDoingWork = m_NumOfThreadsGivenJobs;

   // Reset this counter so we can resubmit jobs later
   m_NumOfThreadsGivenJobs = 0;

   // Notify all threads they have work to do
   m_WorkToDo_condvar.notify_all();
   m_WorkToDo_mutex.unlock();
}

void ThreadPool::WaitForJobsToComplete()
{
  // Check that a thread pool has been created
  if(!m_numOfThreads) 
   return;

 m_WorkCompleted_mutex.lock();
 while(m_NumOfThreadsDoingWork > 0)  // Check if all threads have completed their work
   m_WorkCompleted_condvar.wait(m_WorkCompleted_mutex); // If not, wait here
 m_WorkCompleted_mutex.unlock();    
}

void ThreadPool::DestroyThreadPool()
{
std::cout << "Ask threads to quit\n";
m_WorkToDo_mutex.lock();
   for(int i=0; i<m_numOfThreads; ++i)
   {
     m_ThreadData[i].haveWorkToDo = true;
     m_ThreadData[i].typeOfWork = e_quit;
   }
   m_WorkToDo_condvar.notify_all();
m_WorkToDo_mutex.unlock();

// As each thread terminates, catch them here
for(int i=0; i<m_numOfThreads; ++i)
 {
     tthread::thread *t = m_ThreadList[i];

     // Wait for thread to complete
     t->join();
 }
 m_numOfThreads = 0;
} 
```

使用示例：（通过平方倒数求和来计算 pi-squared/6）实际上，此使用示例并行运行相同的计算 10 次。更实际的用法是让每个线程计算一组不同的求和项。池作业完成后，通过添加所有线程结果来获得最终结果。

```
struct CalculationDataStruct
{
int inputVal;
double outputVal;
};

void LongCalculation( void *theSums )
{
CalculationDataStruct *sums = (CalculationDataStruct *)theSums;

int terms = sums->inputVal;
double sum;
for(int i=1; i<terms; i++)
    sum += 1.0/( double(i)*double(i) );
sums->outputVal = sum;
}

int main(int argc, char** argv)
{ 
int numThreads = 10;

// Create pool
ThreadPool threadPool;
threadPool.CreateThreads(numThreads);

// Create thread workspace
CalculationDataStruct sums[numThreads];

// Set up jobs
for(int i=0; i<numThreads; i++)
{
    sums[i].inputVal = 3000*(i+1);
    threadPool.SubmitJob(LongCalculation, &sums[i]);
}

// Run the jobs
threadPool.StartJobs();
threadPool.WaitForJobsToComplete();

// Print results
for(int i=0; i<numThreads; i++)
   std::cout << "Sum of " << sums[i].inputVal << " terms is " << sums[i].outputVal << std::endl;

 return 0;
} 
```

问题：在ThreadPool::ThreadFunc方法中，如果下面的if语句会获得更好的性能

```
if(NumOfThreadsDoingWork == 0) 
```

被包括在内？另外，我会感谢批评和改进代码的方法。同时，我希望代码对其他人有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T05:43:45.130

首先，您可能想查看 C++11 的“ [std::thread](http://en.cppreference.com/w/cpp/thread/thread) ”和“std::mutex”。您可能还想研究英特尔的“[线程构建模块](http://threadingbuildingblocks.org/)”，它提供了许多工作分配模式。对于可移植的、跨平台的、C++ 封装的 API，我通常使用[OpenThreads 库](http://openthreads.sourceforge.net/)。最后，您可以使用诸如[ZeroMQ 之](http://www.zeromq.org/)类的消息传递库来构建无需互斥锁的可扩展分布式工作负载。

查看您当前的代码，我最担心的是您似乎没有锁定用于将工作分配给线程的变量。我假设这是因为您已将 SubmitJob 和 StartWork 分开。

但最终，您的 ThreadPool 不是线程安全的。

它也是一个具有工作类型等的复杂 API。您可能需要抽象出“工作”的概念。这是我这样做的一个示例，您可能希望将大部分代码封装回您的 ThreadPool 类；终止方法（NULL 作业）也有点人为，您可能想使用 pthread_cancel，但这很好地服务于这个演示。

```
#include <queue>
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

static int jobNo = 0;
class Job {
public:
    Job() : m_i(++jobNo) { printf("Created job %d.\n", m_i); }
    int m_i;
    void Execute() { printf("Job %d executing.\n", m_i); usleep(500 * 1000); }
};

std::queue<Job*> queue;
pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t cond = PTHREAD_COND_INITIALIZER;

void AddJob(Job* job) {
    pthread_mutex_lock(&mutex);
    queue.push(job);
    pthread_cond_signal(&cond);
    pthread_mutex_unlock(&mutex);
}

void* QueueWorker(void* /*threadInfo*/) {
    Job* job = NULL;
    for (;;) {
        pthread_mutex_lock(&mutex);
        while ( queue.empty() ) {
            // unlock the mutex until the cond is signal()d or broadcast() to.
            // if this call succeeds, we will have the mutex locked again on the other side.
            pthread_cond_wait(&cond, &mutex);
        }
        // take the first task and then release the lock.
        job = queue.front();
        queue.pop();
        pthread_mutex_unlock(&mutex);

        if ( job == NULL ) {
            // in this demonstration, NULL ends the run, so forward to any other threads.
            AddJob(NULL);
            break;
        }
        job->Execute();
        delete job;
    }
    return NULL;
}

int main(int argc, const char* argv[]) {
    pthread_t worker1, worker2;
    pthread_create(&worker1, NULL, &QueueWorker, NULL);
    pthread_create(&worker2, NULL, &QueueWorker, NULL);

    srand(time(NULL));

    // queue 5 jobs with delays.
    for ( size_t i = 0; i < 5; ++i ) {
        long delay = (rand() % 800) * 1000;
        printf("Producer sleeping %fs\n", (float)delay / (1000*1000));
        usleep(delay);
        Job* job = new Job();
        AddJob(job);
    }
    // 5 more without delays.
    for ( size_t i = 0; i < 5; ++i ) {
        AddJob(new Job);
    }
    // null to end the run.
    AddJob(NULL);

    printf("Done with jobs.\n");
    pthread_join(worker1, NULL);
    pthread_join(worker2, NULL);

    return 0;
} 
```

# objective-c - Objective-C，在不同方法中遇到变量问题

> ID：11234896
> 
> 赞同：2
> 
> 时间：2012-06-27T21:14:30.567
> 
> 标签：objective-c, xcode, variables

我有一个 .h 文件，其中声明了 2 个变量，然后我有一个 .m 文件，其中包含多种方法，所有这些都需要从 .h 文件中访问 2 个变量。

这是 .h 文件，带有 2 个变量路径和文档目录

```
@interface create_textViewController : UIViewController {
IBOutlet UITextField *textField1;
IBOutlet UITextView *textView;
NSArray *paths;
NSString *documentsDirectory; 
```

}

在我的 .m 文件中，第一种方法应该初始化 2 个变量，然后另一种方法只是用来访问它们。

```
-(void)viewDidLoad{
[super loadView];
NSLog(@"viewdidload");
paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
documentsDirectory = [paths objectAtIndex:0]; 
```

}

```
-(void)toiPad{
NSString *name = [NSString stringWithFormat:@"%@/output.txt", documentsDirectory];
NSString *content = [[NSString alloc] initWithFormat:@"%@", textView.text];
[content writeToFile:name atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil]; 
```

}

但是，当我在 toiPad 方法中放入一个 NSLog 并尝试输出文档目录时，程序崩溃了。

有什么建议吗？我想我可能只是错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:20:46.853

我会想象（[引用](https://developer.apple.com/library/mac/documentation/cocoa/reference/foundation/miscellaneous/foundation_functions/reference/reference.html#//apple_ref/c/func/NSSearchPathForDirectoriesInDomains)没有明确说明它）`NSSearchPathForDirectoriesInDomains`返回一个自动释放的对象，所以试试：

```
documentsDirectory = [[paths objectAtIndex:0] retain]; 
```

您需要在`dealloc`方法中释放它，我假设您已经在这样做了。

根本不用费心保持`paths`价值（`NSSearchPathForDirectoriesInDomains`只要你再次需要它就打电话）。

# jquery - 在每个语句中填充内部 HTML

> ID：11234897
> 
> 赞同：0
> 
> 时间：2012-06-27T21:14:32.583
> 
> 标签：jquery

我在成功调用 ajax 时尝试填充每个项目 real_price。它所做的是将每个项目的所有 real_price 标签填充到服务获取的最后一个值。

如何重写它以一次填充 1 个，以便每个项目都有其特定价格？

```
<div class="item">
    <p class="price">$388.00</p>
    <p class="part_number">VM2327T23A00T</p>
    <p class="real_price"></p>
</div>
<div class="item">
    <p class="price">$88.00</p>
    <p class="part_number">AA327T23A00T</p>
    <p class="real_price"></p>
</div>
<div class="item">
    <p class="price">$38.00</p>
    <p class="part_number">AA327T23A00T</p>
    <p class="real_price"></p>
</div>

<script>
    jQuery('.part_number').each(function () {

                jQuery.ajax(
                {
                    type: "POST",
                    url: "RealTimePricing.aspx/GetRealPrice",
                    data: "{pmber:' " + SearchSpring.jQuery(this).text() + "', lrice: ' " + jQuery(this).siblings('.price').text() + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    cache: false,
                    success: function (msg) {
                       //NEED TO CHANGE SOMETHING HERE
                       jQuery('.real_price').html(msg.d);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:22:55.660

第一个参数`$(selector).each(function( index, element)`是元素的索引。`real_price`使用该索引可以使用 eq() 方法定位相应的元素

```
jQuery('.part_number').each(function (index) {

                jQuery.ajax(
                {
                    type: "POST",
                    url: "RealTimePricing.aspx/GetRealPrice",
                    data: "{pmber:' " + SearchSpring.jQuery(this).text() + "', lrice: ' " + jQuery(this).siblings('.price').text() + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    cache: false,
                    success: function (msg) {
                       //NEED TO CHANGE SOMETHING HERE
                       jQuery('.real_price').eq(index).html(msg.d); 
```

`this`或者可以在引用中定义需要较少 DOM 搜索的元素

```
jQuery('.part_number').each(function (index) {
    var $real_price=$(this).next();

     /* ajax */

        success: function(msg){
            $real_price.html( msg.d);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:20:51.307

获取该类的兄弟姐妹：

```
jQuery('.part_number').each(function (i, el) {
//...
    success: function (msg) {
        jQuery(el).siblings('.real_price').html(msg.d);
    }
//...
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:23:12.087

提供的信息略有不足，但如果我理解正确，您希望使用相应的值更新每个“real_price”。

基于该假设，以下内容应该起作用：

```
success: function(msg){
    for(var i=0; msg.length; i++){
        var obj = msg[i];

        $('.item').each(function(k, v){
            if($(this).find('.part_number').text() == obj.part_number){
                $(this).find('.real_price').text(obj.real_price);
            }
        });
    }
} 
```

# android - Android：在用于创建 ListView 行布局的 ViewGroup 中获取 View 时遇到问题

> ID：11234900
> 
> 赞同：0
> 
> 时间：2012-06-27T21:14:48.443
> 
> 标签：android, view, android-listview, android-imageview, viewgroup

我有一个带有行（列表项）的自定义布局的 ListView，并且像往常一样使用适配器填充列表。在这个自定义布局中，我添加了一个 ImageView 和 TextView（所以有一个图标来匹配文本）。我无法根据 ListView 中的位置获取 ImageView（需要这样做，以便我可以将图标设置为明显匹配文本），我从错误日志中获得的唯一真实信息是错误所在的行但无论如何我都会发布它。任何帮助是极大的赞赏。我真的不想因为必须删除 ListView、创建一堆 RelativeLayouts、将它们包含在 LinearLayout 中并将其放在 Scrollview 中而造成混乱。

相关代码：-

```
ListView listView = (ListView) findViewById(R.id.servicelist);
String[] values = new String[] { "Choice0", "Choice1", "Choice2",
        "Choice3", "Choice4", "Choice5" };

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.services_row,
android.R.id.text1, values);

listView.setAdapter(adapter);

for(int position=0; position<11; position++){
    ViewGroup rowView = (ViewGroup) listView.getChildAt(position);
    ImageView icon = (ImageView) rowView.findViewById(R.id.service_row_icon); //ERROR HERE
    switch(position){
    case 0:{ icon.setImageResource(R.drawable.ic_launcher); break; }
    case 1:{ icon.setImageResource(R.drawable.ic_launcher); break; }
    //ETC ETC More cases go here, irrelevant code
    }
} 
```

行布局（service_row.xml）：-

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">

<ImageView
    android:id="@+id/service_row_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/icon"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"/>

<TextView
    android:id="@+id/service_row_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textColor="#33b5e5"
    android:paddingLeft="5dp"/>

</LinearLayout> 
```

错误日志：-

```
06-28 01:46:31.581: E/AndroidRuntime(18070): FATAL EXCEPTION: main
06-28 01:46:31.581: E/AndroidRuntime(18070): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dragonheart.autodroid/com.dragonheart.autodroid.ServiceClasses.AddServiceActivity}: java.lang.NullPointerException
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.os.Looper.loop(Looper.java:137)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread.main(ActivityThread.java:4507)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at java.lang.reflect.Method.invokeNative(Native Method)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at java.lang.reflect.Method.invoke(Method.java:511)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at dalvik.system.NativeStart.main(Native Method)
06-28 01:46:31.581: E/AndroidRuntime(18070): Caused by: java.lang.NullPointerException
06-28 01:46:31.581: E/AndroidRuntime(18070):    at com.dragonheart.autodroid.ServiceClasses.AddServiceActivity.onCreate(AddServiceActivity.java:43)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.Activity.performCreate(Activity.java:4465)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
06-28 01:46:31.581: E/AndroidRuntime(18070):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
06-28 01:46:31.581: E/AndroidRuntime(18070):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:13:06.687

您需要在`getView`适配器内部而不是在适配器外部执行此操作。它崩溃是因为框架不知道您想要列表中的许多视图中的哪一个。

在适配器内部，它将知道位置并能够返回正确的视图。

# c# - C# 泛型通配符或如何保存对未知泛型继承的引用

> ID：11234903
> 
> 赞同：15
> 
> 时间：2012-06-27T21:14:58.593
> 
> 标签：c#, generics, inheritance, wildcard

好的，情况就是这样。我有一个`FlexCollection<T>`类，其目的是保存一些专业化的列表`FlexItem`，因此：

```
public class FlexCollection<T> where T : FlexItem, new()
{
    public void Add(T item) { ... }
    ...
} 
```

`FlexItem`不是泛型类本身。我想要实现的是能够在`FlexItem`'s 字段中保存对包含该对象的集合的引用。不幸的是，在 C# 中，不可能引用模板类的“任何”特化（如在 Java 中）。起初我尝试使用非泛型接口`IFlexCollection`，但它实际上迫使我实现每个方法两次，即：

```
public class FlexCollection<T> : IFlexCollection where T : FlexItem, new()
{
    public void Add(T item) { ... } // to use in generic calls
    public void Add(object item) { ... } // to use for calls from within FlexItem
    ...
} 
```

然后我发现我可以让 FlexItem 本身成为一个泛型类！然后一个特化可以持有对该特化的对象集合的引用（这是非常合乎逻辑的）。所以：

```
public class FlexItem<T> where T : FlexItem<T>, new()
{
    public FlexCollection<T> ReferenceToParentCollection;
    ...
}

public class FlexCollection<T> where T : FlexItem<T>, new()
{
    public void Add(T item) { ... } 
    ...
} 
```

现在我可以声明一些`FlexItem<T>`专业化和相应的集合：

```
public class BasicItem : FlexItem<BasicItem> { public int A; }
public class BasicCollection : FlexCollection<BasicItem> { }; 
```

当我尝试扩展这些类以容纳其他字段时，就会出现问题。即我想要一个除了 field 之外还`ExtendedItem`包含 field 的类：`B``A`

```
public class ExtendedItem : BasicItem { public int B; }
public class ExtendedCollection : FlexCollection<ExtendedItem> { }; 
```

问题是它`ExtendedItem`是`FlexItem<BasicItem>`and not的子类`FlexItem<ExtendedItem>`。因此是不可能`ExtendedCollection`像上面那样声明的。这会导致编译错误：

```
The type 'Demo.ExtendedItem' must be convertible to
'Demo.FlexItem<Demo.ExtendedItem>' in order to use it as parameter 'T'
in the generic type or method 'Demo.BasicCollection<T>' 
```

有没有办法避免这种类型的冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:35:43.157

有两种方法可以解决此问题：

您可以使用基本多态集合而不继承基类集合：

```
class Program
{
    static void Main(string[] args)
    {
        BasicCollection extendedCollection = new BasicCollection();
        extendedCollection.Add(new ExtendedItem { A = 1, B = 2});
        extendedCollection.Add(new BasicItem { A = 3 });
        extendedCollection.Add(new ExtendedItem { A = 4, B = 5});

        foreach (BasicItem item in extendedCollection)
        {
            switch(item.GetType().Name)
            {
                case "BasicItem":
                    Console.Out.WriteLine(string.Format("Found BasicItem: A={0}", item.A));
                    break;
                case "ExtendedItem":
                    ExtendedItem extendedItem = item as ExtendedItem;
                    Console.Out.WriteLine(string.Format("Found ExtendedItem: A={0} B={1}", extendedItem.A, extendedItem.B));
                    break;
            }
        }
    }
}

public class FlexItem<T> where T : FlexItem<T>, new()
{
    public FlexCollection<BasicItem> ReferenceToParentCollection;
}

public class FlexCollection<T> where T : FlexItem<T>, new()
{
    public void Add(T item) { } 
}
public class BasicItem : FlexItem<BasicItem> { public int A; }
public class ExtendedItem : BasicItem { public int B; }
public class BasicCollection : FlexCollection<BasicItem>
{
    Collection<BasicItem> items = new Collection<BasicItem>();
    public void Add(BasicItem item)
    {
        item.ReferenceToParentCollection = this;
        items.Add(item);
    }
    public void Remove(BasicItem item)
    {
        item.ReferenceToParentCollection = null;
        items.Remove(item);
    }
    public IEnumerator GetEnumerator()
    {
        return items.GetEnumerator();
    }

} 
```

或者您可以将集合类引用装箱并在需要时将其拆箱，因为您知道子对象的类型？

```
class Program
{
    static void Main(string[] args)
    {
        ExtendedCollection extendedCollection = new ExtendedCollection();
        extendedCollection.Add(new ExtendedItem { A = 1, B = 2, ReferenceToParentCollection = extendedCollection });
        extendedCollection.Add(new ExtendedItem { A = 3, B = 3, ReferenceToParentCollection = extendedCollection });
        foreach (ExtendedItem item in extendedCollection)
        {
            (item.ReferenceToParentCollection as ExtendedCollection) ...
        }
    }
}

public class FlexItem<T> where T : FlexItem<T>, new()
{
    public object ReferenceToParentCollection;
}

public class FlexCollection<T> where T : FlexItem<T>, new()
{
    public void Add(T item) { } 
}

public class BasicItem : FlexItem<BasicItem> { public int A; }
public class BasicCollection : FlexCollection<BasicItem> { };
public class ExtendedItem : BasicItem { public int B; }
public class ExtendedCollection : FlexCollection<ExtendedItem> { }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:45:48.057

好的，我决定尝试 C# 事件。这样，我实际上不需要 FlexItem 来保存对拥有 FlexCollection 的引用。如果执行相应的操作，我只需引发一个事件，即“IAmBeingRemoved”和 FlexCollection 的代码。代码逻辑甚至更好地封装。我只是希望我不会遇到任何性能问题或其他基于泛型的惊喜。:-) 我发布它是为了也许有人会发现它是解决他们自己问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T16:24:51.147

不确定您的代码的目的（用途）是什么，但在我看来，您正在尝试基于泛型解决方案以及稍后“摆脱”有关某些类型的泛型数据 - 这在 C# 中是不可能的. 如果您选择采用泛型方法，则应始终保留泛型类型基础的信息：

```
 public class FlexItem<T> where T : FlexItem<T>, new()
    {
        public FlexCollection<T> ReferenceToParentCollection;
    }

    public class FlexCollection<T> where T : FlexItem<T>, new()
    {
        public void Add(T item)
        {
        }
    }

    public class BasicItem<T> : FlexItem<BasicItem<T>>
    {
        public int A;
    }

    public class BasicCollection<T> : FlexCollection<BasicItem<T>>
    {
    }

    public class ExtendedItem<T> : BasicItem<T>
    {
        public int B;
    }

    public class ExtendedCollection<T> : FlexCollection<T> where T: FlexItem<T>, new()
    {
    } 
```

# java - 在Java中调用静态函数时构造函数如何运行

> ID：11234904
> 
> 赞同：-3
> 
> 时间：2012-06-27T21:15:04.367
> 
> 标签：java

我想要一个类来检查输入是否有效，并且所有有效输入都记录在文本文件中。

因此，在构造过程中，它读取文本文件并将所有有效输入放入 HashSet。然后我有`static`函数接收输入并检查输入是否在 HashSet 中。

代码结构如下：

```
public class Validator {
    HashSet validInputs;

    public Validator() {
        //read in
    }

    public static boolean validate(String in) {
        //check and return
    }
} 
```

然后在其他类中，我需要使用`Validator`类来验证字符串。代码就像：

```
...
String a = XXX;
boolean valid = Validator.validate(a);
... 
```

我没有测试过代码，但我有两个问题：

1.  它有效吗？是否读入了有效的输入文本文件？
2.  类什么时​​候会读入文本文件？
3.  `Validator`每次调用该函数时都会读取文本文件`validate()`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T21:18:15.800

> 它有效吗？是否读入了有效的输入文本文件？

不，那行不通。

您的方法应该是一个实例方法，以便它可以访问其他实例成员。

```
public boolean validate(String in) {
    //check and return
} 
```

* * *

> 类什么时​​候会读入文本文件？

您必须先构建类，然后才能使用它。在构造函数中读取文本文件。

* * *

> 每次我调用函数 validate() 时，Validator 会读取文本文件吗？

不，构造函数在你调用时被调用`new Validator()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:20:56.630

`validInputs`不，在您创建`Validator`using实例之前，您将无法访问您的`new Validator()`

1.  不，您的文件在使用时不会被读入。
2.  当您创建`Validator`.
3.  不会。只有当您拥有 时才会读入`new Validator()`。

如果您希望能够静态访问此方法，请考虑使用[`Singleton`](http://en.wikipedia.org/wiki/Singleton_pattern).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T21:38:23.697

您可以使用单例和*非静态* `validate`方法：

```
public class Validator {
    private static Validator instance = null;

    /**
     * Do not use new Validator; use Validator.getInstance() instead.
     */
    private Validator() {
        // read in
    }

    public static Validator getInstance() {
        if(instance == null) {
            instance = new Validatorr();
        }
        return instance;
    }

    public boolean validate(String str) {
        // check and return
    }
} 
```

您需要`validate`使用的任何地方：

```
Validator.getInstance().validate() 
```

*注意：以这种方式实现的单例模式的副作用是，如果不使用验证器，则验证器**不会**被创建并且`in`不会被读取。这可能是也可能不是您想要的。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T21:18:24.843

它不会。`validInputs`将绑定到的实例，`Validator`您将无法从静态方法中引用它。你需要的是一个静态块：

```
public final class Validator {
    private static HashSet validInputs;

    private Validator() {}

    static {
        //read in
    }

    public static boolean validate(String in) {

     //check and return
    }
} 
```

如果你这样做：

```
When will the class read in the text file? -  When the class is loaded by the Class loader.
Will Validator read the text file every time I call the function validate()? -  No, only when the class is loaded. 
```

# java - 使用 JBoss ESB，我如何从 smooks 中获取多个对象并将它们用作 ejb 的参数？

> ID：11234909
> 
> 赞同：1
> 
> 时间：2012-06-27T21:15:25.320
> 
> 标签：java, jboss, esb, smooks

这是我的 jboss-esb.xml 文件的一部分：

```
<action name="HotelAvailRq_To_HotelAvailRequest" class="org.jboss.soa.esb.smooks.SmooksAction">
  <property name="smooksConfig" 
            value="requestConverters/HotelAvailRq_To_HotelAvailRequest.xml" />
  <property name="resultType" 
           value="JAVA" />
  <!-- <property name="javaResultBeanId" value="hotel" /> --> 
  <!-- <property name="set-payload-location" value="map" /> -->                 
  <property name="mappedContextObjects" 
            value="hotel,dateRange" />
  <property name="reportPath"
    value="C:\Documents and Settings\barrowj\esb-workspace\esb\smooks-in-report.html" />
</action>
<action name="print-result" class="org.jboss.soa.esb.actions.SystemPrintln" >
  <property name="message" value="Read" />
  <property name="printfull" value="true" />
</action>
<action name="availabilityCall" 
        class="org.jboss.soa.esb.actions.EJBProcessor">
  <property name="ejb3" value="true" />
  <property name="jndi-name" value="HotelBooking/remote" />
  <property name="initial-context-factory" 
            value="org.jnp.interfaces.NamingContextFactory" />
  <property name="provider-url" value="jnp://localhost:1099" />
  <property name="method" value="availability" />                   
  <property name="ejb-params">
    <arg0 type="model.domain.Hotel">map.hotel</arg0>
    <arg1 type="model.domain.value_objects.DateRange">body.map.dateRange</arg1>
    <arg2 type="model.domain.value_objects.RoomRequest">roomRequest</arg2>
    <arg3 type="model.domain.RatePlanList">ratePlanList</arg3>
    <arg4 type="model.domain.AmenityList">amenityList</arg4>
    <arg5 type="model.domain.types.Money">minimumRate</arg5>
    <arg6 type="model.domain.types.Money">maximumRate</arg6>
    <arg7 type="model.domain.Partner">partner</arg7>
  </property>
</action> 
```

smooks 电话返回

```
body: [ objects: 
  {org.jboss.soa.esb.message.defaultEntry=
    { dateRange=DateRange [  thru=2010-03-24, from=2010-03-23], 
      roomRequest=RoomRequest [list=[GuestInfo [count=1, age=null]], numberOfRooms=1],
      PTIME=null, 
      guestInfo=GuestInfo [count=1, age=null], 
      PUUID=null, 
      partner=Partner [partnerId=bukuser], 
      hotel=Hotel [id=61044, name=null, chainCode=BW, roomTypes=[], maxStay=P30D, bookings=[], ratePlans=[]], 
      guestInfoList=[GuestInfo [count=1, age=null]]}, 
    SmooksExecutionContext={}} ] 
```

因此，我需要将 dateRange、roomRequest、guestInfo 和其他 EJB 参数映射到 EJB 调用。有没有办法做到这一点？

该文档表明您可以，但没有说明如何从 XML 中的上下文映射中获取映射值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:27:24.930

所以问题原来是 smooks 动作和 ejb 动作之间的交互。Smooks 返回一个东西的哈希图。它将散列图放在 ESB 的 message.body 中。这又是一个哈希图。

ejb 操作正在寻找 message.getBody().get("name")，而它应该寻找 message.getBody().get("smooksResults").get("name")。没有办法告诉 ejb 操作在那里查看。

唯一的解决方案是更改 EJB 操作，以便它可以查看 smooks 结果哈希映射。

# javascript - Javascript如果字符串包含空格用破折号替换空格

> ID：11234914
> 
> 赞同：3
> 
> 时间：2012-06-27T21:15:59.793
> 
> 标签：javascript, string, replace

我正在尝试编写一些代码来检查先前定义的变量是否有空格，如果有，则用破折号替换空格。这将嵌套在另一个函数中。

```
function foo(){            
    // If stateName has a space replaces the space with a dash

    window.open('http://website.html/state-solar-policy/' + stateName);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T21:17:59.803

使用这个正则表达式：

```
stateName.replace(/\s/g,"-"); 
```

它将用破折号 ( `-`)替换所有空格字符

**请注意**，如果字符串中没有空格，正则表达式不会引起任何问题。
如果找到，它会用破折号替换每个空格，如果没有找到，它什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:21:59.873

```
var string = "blah blah blah"
var new_string = string.replace(" ", "-"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:18:33.527

```
var string="john doe is great";
var dashedstring=string.split(" ").join("-"); 
```

# javascript - 在鼠标单击时更改 knockout.js 中的 css 类

> ID：11234920
> 
> 赞同：12
> 
> 时间：2012-06-27T21:16:40.497
> 
> 标签：javascript, jquery, css, knockout.js

knockout.js 文档显示了这样的 css 绑定：

```
<div data-bind="css: { profitWarning: currentProfit() < 0 }">   
    Profit Information
</div> 
```

我需要对其进行调整以更改鼠标单击时的 css 类。我怎样才能做到这一点？

根据下面的答案，我正在使用如下代码：

```
// CSS class to be applied
<style>
    .bigclass
    {
        width: 200px;
    }

</style>

// Select list inside a jquery .tmpl
<script id='criteriaRowTemplate' type='text/html'>
    <tr>
        <td>
            <select data-bind='click: makeBig, css: {bigclass : SelectHasFocus() > 0}' />
        </td>
    </tr>
</script> 

// Knockout.js Viewmodel
var CriteriaLine = function() {
    this.SearchCriterion = ko.observable();
    this.SelectHasFocus = ko.observable(0);

    // this method is called
    makeBig = function(element) { 
        this.SelectHasFocus(1);            
    };        
}; 
```

但是，这并没有扩大选择列表的宽度。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T21:35:59.563

让您的点击功能更改可观察变量。例如：[_](http://jsfiddle.net/6896T/57/)

```
<div data-bind="css: { myclass: newClass() == true }">
   Profit Information
</div>

<button data-bind="click: changeClass">Change Class</button>

<script type="text/javascript">
    var viewModel = {
        newClass: ko.observable(false),
        changeClass: function() {
            viewModel.newClass(true);
        }
    }; 
</script> 
```

注意：您可以在同一个元素上组合`click`和。`css`例如：

```
<div databind="click: changeClass, css: { myclass: newClass() == true }"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T16:08:10.613

我觉得问题出在脚本标签上。

请在以下链接中找到解决方案：http: [//jsfiddle.net/ZmU6g/3/](http://jsfiddle.net/ZmU6g/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T21:24:05.490

最简单的方法是使用[点击绑定](http://knockoutjs.com/documentation/click-binding.html)来更改回调中的可观察对象。[您将使用attr](http://knockoutjs.com/documentation/attr-binding.html)绑定之类的东西适当地绑定该类

# c++ - 为什么 C++ STL map 容器的复杂度是 O(log(n))？

> ID：11234921
> 
> 赞同：11
> 
> 时间：2012-06-27T21:16:45.747
> 
> 标签：c++, performance, stl, map

对于诸如`vector`and之类的 C++ STL 容器`list`，查找元素以及插入或删除元素的复杂性是不言自明的。但是，对于`map`容器，即使我从阅读中知道访问和插入复杂性/性能是 O(log(n))，我也无法弄清楚*为什么*。我显然没有像我需要的那样理解地图，因此非常感谢您对这个主题的一些启发。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T21:19:36.450

映射或集合的元素包含在树结构中；每次检查树的节点时，您都​​会确定您尝试查找/插入的元素是否小于或大于该节点。您需要执行此操作的次数（对于正确平衡的树）是 log2(N)，因为每次比较都会抛出一半的可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T00:26:46.700

作为 slavik262 点，地图通常使用自平衡的红黑树来实现。检查红黑树的复杂性，例如在[维基百科](http://en.wikipedia.org/wiki/Red_black_tree "维基百科")中 我不知道带有二叉树的地图的任何实现；如果 Mark Ransom 知道一个，我很高兴知道是哪一个。

# c# - 监控每个进程的网络 IO (KB/s)

> ID：11234929
> 
> 赞同：1
> 
> 时间：2012-06-27T21:17:21.340
> 
> 标签：c#, java, windows, networking, tcp

是否有任何带有实时监控图的免费便捷工具来显示 Windows 上特定进程的网络 I/O？（与[资源监视器](http://www.makeuseof.com/tag/closer-windows-resource-monitor/)相同的方式）

*为什么不坚持使用资源监视器？* 因为我花了太多年的时间在电脑屏幕前编写代码，最终导致视觉缺陷。RM 图表几乎无法利用，并且没有调整大小/全屏模式选项。

Process Monitor 看起来很有希望，但是磁盘和网络 I/O 合并在图中。

![在此处输入图像描述](../Images/b5c35777fdc1a0ec04ec1d1d4798c0d1.png)

# java - 在 Mac 上使用 JBDC 对 SQL Server 进行 Windows 身份验证

> ID：11234931
> 
> 赞同：17
> 
> 时间：2012-06-27T21:17:22.307
> 
> 标签：java, sql, sql-server, macos, windows-authentication

是否可以从 Mac 使用 Windows 身份验证/集成安全性连接到 SQL Server？我正在使用 Microsoft 提供的 type 4 JDBC 驱动程序。前端（表单应用程序）是用 Java 编码的。一切都在 Windows 上完美运行，但办公室中的一个人使用的是 Mac。

这可能吗？仅供参考，我从未使用过 Mac，所以我是他们的新手。我在整个互联网上搜索过，但没有找到解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-27T15:39:23.147

根据我的经验，这些信息很难获得。由于微软更改了规则并添加了`authenticationScheme`参数，我的所有搜索都出现了错误（过时的）信息。为了帮助下一个人，下面是一个有效的连接字符串示例：

```
jdbc:jtds:sqlserver://123.123.123;instance=server1;databaseName=students;integratedSecurity=true;authenticationScheme=JavaKerberos 
```

也在驱动程序属性集中`"Domain"`。不要在任何用户名设置中包含域。

这是在 Mac OSX 上使用带有 jtds 的 Squirrel SQL (Java) 测试的。希望上一句有可能需要知道此信息的人使用的搜索词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T21:25:40.743

[使用 Kerberos 集成身份验证连接到 SQL Server](http://msdn.microsoft.com/en-us/library/gg558122.aspx)

> 从 Microsoft JDBC Driver 4.0 for SQL Server 开始，应用程序可以使用**authenticationScheme**连接属性来指示它想要使用类型 4 Kerberos 集成身份验证连接到数据库。

* * *

SQL Server的[jTDS](http://jtds.sourceforge.net/index.html) JDBC 驱动程序支持 Windows 身份验证，只需使用[常见问题解答](http://jtds.sourceforge.net/faq.html)中描述的**域**属性。

> **领域**
> 
> 指定要在其中进行身份验证的 Windows 域。如果存在并且提供了用户名和密码，jTDS 使用 Windows (NTLM) 身份验证而不是通常的 SQL Server 身份验证（即，提供的用户和密码是域用户和密码）。这允许非 Windows 客户端登录到仅配置为接受 Windows 身份验证的服务器。
> 
> 如果域参数存在但没有提供用户名和密码，jTDS 使用其本地单点登录库并使用已登录的 Windows 用户凭据登录（为此，显然需要在 Windows 上登录一个域，并且还安装了 SSO 库——请参阅发行版中的 README.SSO，了解如何执行此操作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T16:35:46.230

我在 mac (10.9) 上使用 jTDS。

使用此驱动程序，您需要像往常一样指定用户名和密码，唯一的区别是您需要在连接字符串中指定 domain=WHATEVERTHENTDOMAIN（或者如果您愿意，也可以指定连接属性）。

所以一个示例连接字符串是：

```
jdbc:jtds:sqlserver://db_server:1433/DB_NAME;domain=NT_DOMAIN_NAME 
```

jTDS 驱动程序然后使用 NTLM 使用用户名和密码登录到指定的域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-02T22:51:04.000

jTDS 不如微软的 JDBC 驱动（特别是它无法判断prepared statement中的参数类型）

是的，您可以使用 Active Directory 身份验证对 MS SQL Server 进行身份验证，因为 Active Directory 只是 Kerberos + LDAP，它们是开源的并在 Mac 上实现

Kerberos 配置`/etc/krb5.conf`：

```
[libdefaults]
default_realm = YOUR_REALM.NET

[realms]
YOUR_REALM.NET = {
    kdc = host.your-domain.net
} 
```

我需要使用 KDC 的完全限定域名，而不仅仅是域名

JDBC 连接字符串：

```
jdbc:sqlserver://$host;database=$db;integratedSecurity=true;authenticationScheme=JavaKerberos 
```

如果`$host`没有 的 SPN `MSSQLSrv/$host`，则添加`serverSp=$SPN`到 JDBC 连接字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-06T01:11:44.607

说一个驱动程序可以确定数据类型而另一个驱动程序不能确定是不正确的。 *任何*驱动程序都必须根据传递的参数查看隐含的类型。jTDS 和微软的驱动程序都这样做。这是协议的一个限制——数据库不能告诉驱动程序哪种类型是正确的，因为在许多查询中它不知道你想要什么。

在每个版本中，jTDS 和微软的驱动都有不同的问题和不同的优势。“最佳”选择取决于您查看的每个版本以及您的需求。随着不同版本的出现，我不得不来回切换——微软以某种方式打破，然后添加了我想要的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-26T21:05:42.470

这是一个旧帖子，但可能与某些人有关。请参阅其他[SO 帖子](https://stackoverflow.com/questions/37835929/connect-to-sql-server-with-windows-authentication-from-a-linux-machine-through-j/37839177?noredirect=1#comment76499441_37839177 "所以发帖")，该帖子描述了如何通过 JDBC 从 Linux 机器连接到具有 Windows 身份验证的 SQL Server。这也适用于mac。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-02-18T15:26:54.197

以下连接字符串对我有用

```
jdbc:jtds:sqlserver://server_name:port_name;useLOBs=false;databaseName=db_name;useNTLMv2=true;domain=domain_name; 
```

我正在使用[jTDS 1.3.2](https://sourceforge.net/projects/jtds/files/)和[SQuirreL SQL Client](https://sourceforge.net/projects/squirrel-sql/files/1-stable/4.1.0/squirrel-sql-4.1.0-MACOSX-install.jar/download)。

# javascript - 如何使用 javascript 遍历文件系统目录和文件？

> ID：11234933
> 
> 赞同：3
> 
> 时间：2012-06-27T21:17:25.700
> 
> 标签：javascript, android, cordova, sd-card, fileapi

我正在使用 Javascript 编写一个应用程序，该应用程序将与 Phonegap 一起使用来制作一个 Android 应用程序。我正在使用 Phonegap File API 来读取目录和文件。相关代码如下所示：

```
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
//
function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFileSystemSuccess, fail);
}

function onFileSystemSuccess(fileSystem) {
    fileSystem.root.getDirectory("/sdcard", {create: false, exclusive: false}, getDirSuccess, fail);
}

function getDirSuccess(dirEntry) {
    // Get a directory reader
    var directoryReader = dirEntry.createReader();

    // Get a list of all the entries in the directory
    directoryReader.readEntries(readerSuccess,fail);
}

var numDirs = 0;
var numFiles = 0;

function readerSuccess(entries) {
    var i;
    for (i=0; i<entries.length; i++) 
    {
        if(entries[i].isFile === true)
        {
        numFiles++;
        entries[i].file(fileSuccess,fail);
        }
        else if (entries[i].isDirectory === true)
        {
        numDirs++;
        getDirSuccess(entries[i]);
        }
    }
} 
```

所以到目前为止，该程序运行良好。阅读器将读取 /sdcard 目录的内容。如果它遇到一个文件，它将调用 fileSuccess（为简洁起见，我在代码中将其排除），如果它遇到另一个目录，它将再次调用 getDirSuccess。我的问题是：我怎么知道整个 /sdcard 目录何时被读取？如果不多次通过 /sdcard 目录，我想不出一种好方法来完成此任务。任何想法表示赞赏，并提前感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T21:37:42.623

+1 提出了一个好问题，因为无论如何我自己都必须这样做。我会使用旧的 setTimeout 技巧。一旦取消不再发生，您就知​​道您已经完成并且可以触发您的事件，但只需确保它只触发一次。

这就是我的意思，我将变量命名为 long 只是为了更具可读性（不是我的风格）......

```
// create timeout var outside your "readerSuccess" function scope
var readerTimeout = null, millisecondsBetweenReadSuccess = 100;

function readerSuccess(entries) {
    var i = 0, len = entries.length;
    for (; i < len; i++) {
        if (entries[i].isFile) {
            numFiles++;
            entries[i].file(fileSuccess,fail);
        } else if (entries[i].isDirectory) {
            numDirs++;
            getDirSuccess(entries[i]);
        }
        if (readerTimeout) {
            window.clearTimeout(readerTimeout);
        }
    }
    if (readerTimeout) {
        window.clearTimeout(readerTimeout);
    }
    readerTimeout = window.setTimeout(weAreDone, millisecondsBetweenReadSuccess);
}

// additional event to call when totally done
function weAreDone() {
   // do something
} 
```

因此，其中的逻辑是您在阅读内容时不断取消调用“weAreDone”函数。不确定这是否是最好的方法或更有效的方法，但在适当的“毫秒间读取成功”的情况下，它不会导致一个以上的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T13:41:59.137

与其使用 setTimeout（如果您的设备非常慢，这可能会失败），您可以使用计数器来查看仍然需要调用多少回调。如果计数器达到零，你就完成了:)

这是递归代码：

```
var fileSync = new function(){
    this.filesystem = null;

    this.getFileSystem = function(callback){
        var rfs = window.requestFileSystem || window.webkitRequestFileSystem;

        rfs(
              1// '1' means PERSISTENT
            , 0// '0' is about max. storage size: 0==we don't know yet
            , function(filesystem){
                fileSync.filesystem = filesystem;
                callback(filesystem);
            }
            , function(e){
                alert('An error occured while requesting the fileSystem:\n\n'+ e.message);
            }
        );
    }

    this.readFilesFromReader = function(reader, callback, recurse, recurseFinishedCallback, recurseCounter)
    {
        if (recurse && !recurseCounter)
            recurseCounter = [1];

        reader.readEntries(function(res){
                callback(res);

                if (recurse)
                {
                    for (var i=0; i<res.length; i++) {
                        /* only handle directories */
                        if (res[i].isDirectory == true)
                        {
                            recurseCounter[0]++;
                            fileSync.readFilesFromReader(res[i].createReader(), callback, recurse, recurseFinishedCallback, recurseCounter);
                        }
                    }
                }
                /* W3C specs say: Continue calling readEntries() until an empty array is returned.
                 * You have to do this because the API might not return all entries in a single call.
                 * But... Phonegap doesn't seem to accommodate this, and instead always returns the same dir-entries... OMG, an infinite loop is created :-/
                */
                //if (res.length)
                //  fileSync.readFilesFromReader(reader, callback, recurse, recurseFinishedCallback, recurseCounter);
                //else
                if (recurse && --recurseCounter[0] == 0)
                {
                    recurseFinishedCallback();
                }
            }
        , function(e){
            fileSync.onError(e);
            if (recurse && --recurseCounter[0] == 0)
                recurseFinishedCallback();
        });
    };

    this.onError = function(e){
        utils.log('onError in fileSync: ' + JSON.stringify(e));
        if (utils.isDebugEnvironment())
            alert('onError in fileSync: '+JSON.stringify(e));
    }
}

var utils = new function(){
    this.log = function(){
        for (var i=0;i<arguments.length;i++)
            console.log(arguments[i]);
    }
    this.isDebugEnvironment = function(){ return true }// simplified
} 
```

测试这个的示例代码：

```
var myFiles = [];
var directoryCount = 0;

window.onerror = function(){ alert('window.onerror=\n\n' + arguments.join('\n')) }

var gotFilesCallback = function(entries)
{
    for (var i=0;i<entries.length;i++)
    {
        if (entries[i].isFile == true)
            myFiles.push(entries[i].fullPath)
        else
            ++directoryCount;
    }
}

var allDoneCallback = function(){
    alert('All files and directories were read.\nWe found '+myFiles.length+' files and '+directoryCount+' directories, shown on-screen now...');
    var div = document.createElement('div');
    div.innerHTML = '<div style="border: 1px solid red; position: absolute;top:10px;left:10%;width:80%; background: #eee;">'
        + '<b>Filesystem root:</b><i>' + fileSync.filesystem.root.fullPath + '</i><br><br>'
        + myFiles.join('<br>').split(fileSync.filesystem.root.fullPath).join('')
    + '</div>';
    document.body.appendChild(div);
}

/* on-device-ready / on-load, get the filesystem, and start reading files */
var docReadyEvent = window.cordova ? 'deviceready':'load';
document.addEventListener(docReadyEvent, function()
{
    fileSync.getFileSystem(function(filesystem){
        var rootDirReader = filesystem.root.createReader();
        fileSync.readFilesFromReader(rootDirReader, gotFilesCallback, true, allDoneCallback);
    })
}, false); 
```

# c# - 为什么 System.ServiceModel.Dispatcher 需要完全合格才能编译

> ID：11234934
> 
> 赞同：0
> 
> 时间：2012-06-27T21:17:28.617
> 
> 标签：c#, wcf, .net-4.0, namespaces

我正在学习 WCF，并在一个简单的 WCF 示例中找到[了这篇文章。](http://bloggingabout.net/blogs/dennis/archive/2010/06/16/wcf-simple-example-in-visual-studio-2010.aspx)

在下面的代码中（来自上面的文章），为什么`System.ServiceModel.Dispatcher.ChannelDispatcher`在 foreach 循环中有 a 时需要完全限定`using System.ServiceModel;`？虽然`ServiceHost`不需要完全限定它才能工作，并且它来自与`Dispatcher`.

如果您在循环中删除`System.ServiceModel`from `System.ServiceModel.Dispatcher.ChannelDispatcher`，则代码不会编译。

```
using System;
using System.ServiceModel;

namespace ConsoleHost
{
    class Program
    {
        static void Main(string[] args)
        {
            Type serviceType = typeof(EmailService.EmailValidator);
            Uri serviceUri = new Uri("http://localhost:8080/");

            ServiceHost host = new ServiceHost(serviceType, serviceUri);
            host.Open();

            foreach (System.ServiceModel.Dispatcher.ChannelDispatcher dispatcher in host.ChannelDispatchers)
            {
                Console.WriteLine("\t{0}, {1}", dispatcher.Listener.Uri.ToString(), dispatcher.BindingName); 
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:25:53.583

`ServiceHost`是 System.ServiceModel 命名空间上的一个类（在 using 语句中）；`ChannelDispatcher`是 System.ServiceModel 上的一个类。**调度程序**命名空间。如果您在下面添加此 using 语句，您将能够使用 ChannelDispatcher 而无需完全限定。

```
using System.ServiceModel.Dispatcher; 
```

# php - PHP - 以ajax形式显示recaptcha

> ID：11234935
> 
> 赞同：1
> 
> 时间：2012-06-27T21:17:30.320
> 
> 标签：php, ajax, recaptcha

我已将 recaptcha 添加到我的 php 登录表单中。该表单会计算失败尝试的次数，并在超过允许的尝试次数时显示验证码。这适用于普通的 PHP 表单。但是，如果表单是使用 ajax (jquery) 提交的，则不会刷新页面，因此验证码不会变得可见。

我的登录表单中的 recaptcha 代码如下所示：

```
<!-- recaptcha -->
    <?php
    if (!isset($_SESSION['PL_LOGIN_COUNT'])) $_SESSION['PL_LOGIN_COUNT'] = 0;
    if(PL_LOGIN_CAPTCHA_ON || !PL_LOGIN_CAPTCHA_ON && $_SESSION['PL_LOGIN_COUNT'] > PL_MAX_LOGIN_ATTEMPT) {
        echo '<label for="recaptcha_response_field">';
        echo $plLang->get('LNG_26');
        echo '</label>';
        require_once(PL_ABSPATH.'pl-lib/lib-recaptcha.php');
        $publickey = PL_RECAPTCHA_PUBLIC_KEY;
        echo recaptcha_get_html($publickey);
    }?> 
```

任何建议都会很棒。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:31:37.680

AJAX 会显示一个验证码 JSON 代码和一个基于 AJAX 结果执行操作的 javascript 函数怎么样？

# asp.net-mvc-3 - MVC 3 无法从表单身份验证中免除页面

> ID：11234936
> 
> 赞同：0
> 
> 时间：2012-06-27T21:17:32.917
> 
> 标签：asp.net-mvc-3, forms-authentication, webforms

在混合 MVC3 / Web 表单应用程序中，我们使用表单身份验证。我正在尝试从 loginUrl 重定向中免除一个页面。

在 web.config 中：

表单身份验证配置（片段）：

```
<location path="." inheritInChildApplications="false">
 <system.web>  
  ...
  <authentication mode="Forms">
    <forms loginUrl="~/Authorization/Auth/LogOn" timeout="2880" />
  </authentication>
  <authorization>
    <deny users="?"/>
  </authorization>
  ...
 </system.web>
</location> 
```

在要豁免的页面的位置元素下方：

```
 <location path="foo.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>  
  </location> 
```

我已经尝试了两个“？” 和位置元素中的允许用户中的“*”但无济于事。当我尝试点击 foo.aspx 时，我会重定向到 loginUrl。

# ember.js - 在 Ember 视图中，在重新呈现内部子视图后运行代码的最佳方式是什么？

> ID：11234937
> 
> 赞同：2
> 
> 时间：2012-06-27T21:17:36.053
> 
> 标签：ember.js

我发现了很多关于如何使用动态数据等初始化 jQuery 插件的问题，通常答案是你应该使用`didInsertElement`钩子。我的问题是，当使用 ember-data 时，最初视图插入为空，然后通过绑定填充模板变量。因此，`didInsertElement`我需要的元素不存在。

我找到了适合我的解决方案，但我认为必须有更好的解决方案。

除了`didInsertElement`方法之外，我还观察了控制器中的属性，并从那里调用我的代码，包裹在 a 中，`Ember.run.next`这样子视图就会在之前呈现。

是否有更好的解决方案来响应更新的子视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T10:38:42.253

我遇到了这个问题并想出了一个解决方案：[制作一个车把助手](https://stackoverflow.com/questions/13760733/ember-js-using-a-handlebars-helper-to-detect-that-a-subview-has-rendered/13857859#13857859)，告诉你子部分何时呈现。希望对其他人有所帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T11:06:47.327

这在一定程度上取决于您的应用程序的大小，以及您的视图正在呈现的元素数量。

编辑：您可能会成功观察 RecordArray 的 isLoaded 属性。这里的一些细节：[https ://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/record_arrays/adapter_populated_record_array.js#L21](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/record_arrays/adapter_populated_record_array.js#L21)

我用于将单个对象作为其内容的视图的一个选项是：

```
MyApp.CustomView = Ember.View.extend({
    content: null,

    contentObserver: function() {
        this.rerender();
    }.observes('content')
} 
```

但是，如果您的视图内容是一个列表，那么为列表中的每个项目重新呈现视图几乎没有意义。

但是，我认为这种方法与您已经在做的非常相似。

另一种方法是使用 Ember Data 实现您自己的适配器。这样，您可以告诉应用程序的其余部分它已完成数据加载。就像是：

```
MyApp.Adapter = DS.Adapter.create({
    //Finding all object of a certain type. Fetching from the server
    findAll: function(store, type, ids) {
        var url = type.url;
        jQuery.getJSON(url, function(data) {
            store.loadMany(type, data);
        });

        //Perform some custom logic here... 
    }
} 
```

这应该可行，但它不像它应该/可能的那样通用。

此外，您可能想查看此提交，它允许注册一次性事件。

[https://github.com/emberjs/ember.js/commit/1809e65012b93c0a530bfcb95eec22d972069745#L0R19](https://github.com/emberjs/ember.js/commit/1809e65012b93c0a530bfcb95eec22d972069745#L0R19)

# php - 这个 mysqli 查询有什么问题？

> ID：11234938
> 
> 赞同：0
> 
> 时间：2012-06-27T21:17:37.617
> 
> 标签：php, mysql

我试图弄清楚下面的 mysqli 代码有什么问题。数据肯定在表中。我有两个问题：

1.  为什么这没有给我任何结果？
2.  我可以将 echo`<table></table>`部分放在单独的 php 文件中吗，如果可以，我将如何调用`$name,$partner,$cell`等？

    ```
     <?php

      $mysqli = new mysqli($host, $uname, $pword, $db);
    if ($mysqli->connect_errno)
    {
    echo "Connection failed: %s\n", $mysqli->connect_error;
    exit();
    }

      $query = ("SELECT * FROM contacts WHERE contacttype IN ('Buyer','Seller','Buyer / Seller','Investor') AND leadstatus = 'New' ORDER BY date DESC");

      $result = $mysqli->query($query);

      while ($row = $result->fetch_array()) {

      $space = (!empty($row['firstname']) && !empty($row['lastname'])) ? ' ' : '';        
      $name = $row['firstname'].$space.$row['lastname'];       
      $partner  = $row['spousefirst'];   
      $cell = (!empty($row['phonecell'])) ? " {$row['phonecell']} (cell)" : ''; 
      $email = (!empty($row['email'])) ? " {$row['email']} (email)" : '';
      $ID = $row['ID'];

      echo'<table>
      <tbody>
      <tr>
        <td><input type="checkbox" name="" id="" value="<? echo $ID; ?>"></td>
        <td><a href="/backend/leads/view/?ID=<? echo $ID; ?> "><strong><? echo $name; ?></strong></a></td>
        <td><a href="/backend/leads/view/?ID=<? echo $ID; ?> "><? echo $partner; ?></a></td>
        <td><? echo $phonecell; ?></td>
        <td><a href="mailto:<? echo $email; ?>"><? echo $email; ?></a></td>
        <td><? echo date("M jS, g:i A", strtotime($date)); ?></td>
        <td><? echo $contacttype; ?></td>
        <td><? echo $agentassigned; ?></td>
        <td><? echo $leadstatus; ?></td>
        <td><a href="/backend/contacts/notes.php?ID=<? echo $ID; ?>">View </a>+ </td>
        <td><a href="/backend/contacts/todo.php?ID=<? echo $ID; ?>">View </a>+ </td>
        <td><a href="/backend/contacts/deletesuccess.php?ID=<? echo $ID; ?>">D</a></td>
        </tr>
        </tbody>
    </table>';
         }
         ?> 
    ```

编辑：

它显示`<table>`但只是没有给我 $name、$email...ect 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T22:04:30.993

最终的回声看起来构造得不好。我更喜欢使用连接字符串来输出变量，就像这样（我只放了几行作为例子）：

```
echo'<table>
<tbody>
   <tr>
     <td><input type="checkbox" name="" id="" value="'. $ID .'"></td>
     <td><a href="/backend/leads/view/?ID='. $ID .'"><strong>'. $name.' </strong></a></td> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:25:49.183

该查询看起来像您的其余代码一样可靠。以下是一些可以尝试的故障排除步骤：

1.  `echo`并`$query`直接针对您的数据库运行它。你得到结果了吗？如果您没有从直接查询中得到任何结果，那么这意味着查询返回 0 行，并且您的表也将最终为空。
2.  执行 a`var_dump($result)`以验证其中是否存储了信息。您还可以将更改添加`$result = $mysqli->query($query);`到`$result = $mysqli->query($query) or die $mysqli->error;`

这两个步骤的结果应该可以让您很好地了解哪里出了问题。通常，您希望停止查询过程的每个部分并查看涉及的每个变量，以确保其中包含您期望存储的数据。

回答你的第二个问题：是的，你可以。如果您将表的代码放在单独的文件中，然后将`include()`其放入，则变量仍可用于包含的代码。

请参阅有关[include()的 PHP 手册](http://us.php.net/manual/en/function.include.php)

# c++ - 如何确保我的进程永远不会将另一个进程锁定在文件之外？

> ID：11234941
> 
> 赞同：4
> 
> 时间：2012-06-27T21:18:16.980
> 
> 标签：c++, c, windows, winapi, file-locking

我有一个在后台运行并定期备份文件的 Windows 进程。备份是通过将文件上传到服务器来完成的。

在备份期间，我不想锁定任何其他应用程序，使其无法写入或读取文件；如果其他应用程序想要更改文件，我应该停止上传并关闭文件。

分享模式在这里没用；即使我正在共享对正在读取的文件的所有访问权限，如果其他进程尝试打开它进行写入而不共享读取，它将被锁定在文件之外。

是否可以在不编写驱动程序的情况下在 Windows 上完成此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:27:34.003

您可能对[卷影复制](http://www.codeproject.com/Articles/321273/VSS-API-IN-CPP)感兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:25:24.363

您当然可以复制文件，然后在上传到服务器之前检查原始文件和副本是否相同（因此代表一致的快照）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:32:27.113

根据[这个 MSDN page](http://msdn.microsoft.com/en-us/library/aa363764.aspx)，如果使用 NTFS，您应该能够将文件锁定在您的事务中，同时将文件上传到服务器。这将确保您对文件的看法不会改变，即使文件已从外部更改。

# extjs - 在 ExtJS4 TreeGrid 中加载嵌套的 JSON 数据

> ID：11234945
> 
> 赞同：0
> 
> 时间：2012-06-27T21:18:22.763
> 
> 标签：extjs, extjs4, extjs4.1, treegrid, treepanel

我正在尝试将嵌套的 JSONData 加载到我的树形网格中。在第一次调用获取数据时，填充网格所需的所有数据都作为 JSON 对象在响应中返回。但是我可以看到它仍然尝试为网格中的所有父对象获取数据。

即使在虚假 GET 之后，它仍然无法填充子节点。

我定义了 2 个模型，具有“hasMany”关系的父节点指代子模型，而具有“BelongsTo”关系的子节点指代父模型

我正在使用带有 JSON 阅读器的 Ajax 代理。

在网上搜索我找不到太多信息，我使用了 extJS 文档中的 user-orderitems-products 示例来尝试设置我的模型和树。

我不完全确定我错过了什么。任何帮助将不胜感激。

JSON（人可能有也可能没有子对象）：

```
People: {
 {firstName: john, id:123, uniqueID:1231, leaf:true},
 {firstName: jane, id:124, uniqueID:1240, 
  offspring:[
    {firstName: adam,    id:124,  uniqueID:1241, leaf:true},
    {firstName: brandon, id:124,  uniqueID:1242, leaf:true},
    {firstName: claire,  id:1243, uniqueID:1243, leaf:true}
 ]}
} 
```

模型：

```
Ext.define('Person',{
  extend: 'Ext.data.Model',
  fields: [
    {name: 'firstName', type:'string'},
    {name: 'uniqueID',  type:'float'}
    hasMany: {
       model:'Offspring', 
       name: 'Offspring', 
       associationKey: 'offspring',
       primaryKey: 'uniqueID',
       foreignKey: 'id'
    }
  ],
  proxy: {
   type: 'rest',
   url: 'http://blah/blah',
   reader: {
     type: 'json',
     root: 'People'
   }

  }
});

Ext.define('Offspring',{
  extend: 'Ext.data.Model',
  fields: [
    {name: 'firstName', type:'string'},
    {name: 'uniqueID',  type:'float'}
 ],
 belongsTo: 'Person'
}); 
```

店铺定义：

```
var store = Ext.create('Ext.data.TreeStore', {
  model: 'Person',
  folderSort: true
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T01:37:03.773

我怀疑您可能会将简单的父子关系与 hasMany 关系混淆。

但是对于你原来的问题。您正在返回一个不是叶子但没有返回子节点的节点 (jane)。由于您的代理根`Person`是`People`，children 属性也应该是`people`。

我相信以下 JSON 对您有用：

```
People: {
    {firstName: john, id:123, uniqueID:1231, leaf:true},
    {firstName: jane, id:124, uniqueID:1240, 
    People:[
        {firstName: adam,    id:124,  uniqueID:1241, leaf:true},
        {firstName: brandon, id:124,  uniqueID:1242, leaf:true},
        {firstName: claire,  id:1243, uniqueID:1243, leaf:true}
    ]}
} 
```

这是一个工作代码：

模型：

```
Ext.define('BS.model.ItemCategory', {
    extend: 'Ext.data.Model',
    fields: [
        {name: 'name'     , type: 'string'},
        {name: 'iconCls'  , type: 'string', defaultValue: 'treenode-no-icon'},
        {name: 'leaf'     , type: 'boolean', defaultValue: false},
        {name: 'expanded' , type: 'boolean', defaultValue: true, persist: false},
        {name: 'index'     , type: 'int'},        
    ],

    proxy: {
        type: 'direct',

        api: {
            create:  ItemCategories.Create,
            read:    ItemCategories.Read,
            update:  ItemCategories.Update,
            destroy: ItemCategories.Destroy,
        },
    },

}); 
```

店铺：

```
Ext.define('BS.store.ItemCategories', {

    extend: 'Ext.data.TreeStore',    
    model: 'BS.model.ItemCategory',

    autoSync: true,

    root: {
        text: 'Root',
        id: 'NULL',
        expanded: true
    },

    clearOnLoad: true,
}); 
```

JSON：

```
"result":{
  "success":true,
  "children":[
     {
        "id":"1",
        "parentId":null,
        "name":"DFM",
        "index":"0",
        "deleted":"0",
        "children":[
           {
              "id":"6",
              "parentId":"1",
              "name":"Studios",
              "index":"0",
              "deleted":"0",
              "loaded":true,
              "leaf":false
           },
           {
              "id":"7",
              "parentId":"1",
              "name":"Equipment",
              "index":"1",
              "deleted":"0",
              "children":[
                 {
                    "id":"18",
                    "parentId":"7",
                    "name":"Cameras",
                    "index":"0",
                    "deleted":"0",
                    "loaded":true,
                    "leaf":false
                 },
                 {
                    "id":"20",
                    "parentId":"7",
                    "name":"Tripods",
                    "index":"1",
                    "deleted":"0",
                    "loaded":true,
                    "leaf":false
                 },
                 {
                    "id":"26",
                    "parentId":"7",
                    "name":"Lighting Kits",
                    "index":"2",
                    "deleted":"0",
                    "loaded":true,
                    "leaf":false
                 }
              ],
              "leaf":false
           }
        ],
        "leaf":false
     },
     {
        "id":"3",
        "parentId":null,
        "name":"3D",
        "index":"2",
        "deleted":"0",
        "loaded":true,
        "leaf":false
     }
  ]
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T23:58:24.257

在 SDK 下载中有一个完全这样的例子：http: [//dev.sencha.com/deploy/ext-4.1.0-gpl/examples/tree/treegrid.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/tree/treegrid.html)

# android - 您如何清除确定的进度条以供重用？

> ID：11234946
> 
> 赞同：4
> 
> 时间：2012-06-27T21:18:24.677
> 
> 标签：android, android-widget, android-progressbar

我有一个带有一个按钮的 Activity，它可以启动一个长时间运行的任务。我使用 AsyncTask 执行任务并显示一个确定的 ProgressBar，该进度条会随着任务的进行而更新。第一次运行任务时一切正常，但在随后的运行中会出现对话框，但已经处于 100% 和 100/100。我在我的活动中同时覆盖了 onCreateDialog 和 onPrepareDialog。我认为使用 setProgress(0) 会重置对话框，但这不起作用。我在 AsyncTask 的 onPreExecute 方法中使用 showDialog，在 AsyncTask 的 onPostExecute 中使用dismissDialog。我能够重置对话框的唯一方法是在 onPostExecute 中使用 removeDialog，但我宁愿不重新创建对话框，因为我将重复使用多次。相关代码如下。这是 API 级别 10。

```
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case PROGRESS_DIALOG:
            progressDialog = new ProgressDialog(ProtoBufSerializationTestActivity.this);
            progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            progressDialog.setCancelable(true);
            progressDialog.setMax(100);
            progressDialog.setMessage("Testing...");
            return progressDialog;
        default:
            return null;
    }
}

@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    super.onPrepareDialog(id, dialog);
    switch (id) {
        case PROGRESS_DIALOG:
            ProgressDialog tmp = (ProgressDialog)dialog;
            tmp.setProgress(0);
            tmp.setSecondaryProgress(0);
            return;
        default:
            Log.e("test", "Unknown dialog requested");
    }
}

private class SerializationTestTask extends AsyncTask<Void, Integer, Long> {

    @Override
    protected void onPreExecute() {
        showDialog(PROGRESS_DIALOG);
    }

    @Override
    protected Long doInBackground(Void... params) {
        long accumulator = 0;
        int totalSize = 0;
        for (int i = 0; i < 10000; i++) {
            final long start = System.nanoTime();
            //code to be timed
            final long end = System.nanoTime();
            accumulator += end - start;
            if (i % 100 == 0) {
                publishProgress(i);
            }
        }
        return accumulator;
    }

    @Override
    protected void onPostExecute(Long aLong) {
        dismissDialog(PROGRESS_DIALOG);
        results.setText(String.format("Serialized Message 10000 times.\nAverage time to serialize %.3fms", (double) aLong / 1e10));
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progressDialog.incrementProgressBy(1);
    } 
```

**编辑**在接受@Arhimed 的建议后，我得到了以下代码。它要简单得多。我本可以使用`DialogFragment`，但我认为在这种情况下没有必要。

```
private class SerializationTestTask extends AsyncTask<Void, Integer, Long> {
    private ProgressDialog dialog;

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(ProtoBufSerializationTestActivity.this, "Serialization Test", "Testing...", false);
    }

    @Override
    protected Long doInBackground(Void... params) {
        long accumulator = 0;
        int totalSize = 0;
        for (int i = 0; i < 10000; i++) {
            final long start = System.nanoTime();
            //code to be timed
            final long end = System.nanoTime();
            accumulator += end - start;
            if (i % 100 == 0) {
                publishProgress(i);
            }
        }
        return accumulator;
    }

    @Override
    protected void onPostExecute(Long aLong) {
        dialog.dismiss();
        results.setText(String.format("Serialized Message 10000 times.\nAverage time to serialize %.3fms", (double) aLong / 1e10));
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        dialog.incrementProgressBy(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-27T08:45:08.477

实际上 Arhimed 是对的，你不能这样做，但你可以用“脏”的方式强制进度条进入其零状态。对我来说，客户希望进度条无论如何都将其值归零，以防用户离开活动，但在我的情况下，进度仍然存在，只是从开始重置。我有自定义进度可绘制，`setProgress`根本没有帮助我。所以我所做的是在实际设置真实可绘制之前调用此方法，`setProgressDrawable(null)`这很脏清除方式，但它会做你想做的事，然后用你自己的progressdrawable调用相同的方法，所以感觉它已经被刷新了。就是这样......不幸的是，没有其他方法可以实现这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:20:54.237

以这种方式使用是不可能的`ProgressDialog`。您`AsyncTask`应该每次都创建一个新实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T14:15:06.933

实际上 setProgress(0) 只有在进度开始时才会刷新显示。因此，您可以通过在 setProgress 之前调用 onStart 来强制刷新，如下所示：

```
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    super.onPrepareDialog(id, dialog);
    ProgressDialog progress = (ProgressDialog)dialog;
    progress.onStart();
    progress.setProgress(0);
} 
```

# javascript - jquery-ui拖放事件问题

> ID：11234951
> 
> 赞同：2
> 
> 时间：2012-06-27T21:18:49.690
> 
> 标签：javascript, jquery, jquery-ui

当我使用 droppables over event 来更改 css 以获得视觉反馈时，我遇到了麻烦。当可拖动项位于可放置项上时，它按预期工作。将可拖动项放在可放置项上后，当鼠标滚过在放置之前已通过可拖动项越过它的对象时，鼠标仍会显示为悬停状态。停止事件也没有触发。

我不能使用 hoverClass 选项，因为当可拖动对象位于可放置对象上方时，我希望根据鼠标位置显示不同的结束状态。

任何想法将不胜感激。

你可以在这里看到一个例子：http: [//jsfiddle.net/SurferJoe/26eU5/](http://jsfiddle.net/SurferJoe/26eU5/)

# xml - 在 AS3 中查找 XML 节点名称结构

> ID：11234952
> 
> 赞同：0
> 
> 时间：2012-06-27T21:18:56.140
> 
> 标签：xml, actionscript-3, flash

我有一个丑陋的 druple-gardens RSS 提要进入闪存，我正在使用与此链接相同的想法。[http://www.eccesignum.org/blog/accessing-views-from-flash-in-drupal-gardens](http://www.eccesignum.org/blog/accessing-views-from-flash-in-drupal-gardens)将其解析为新的 xml 结构。

闪码：

```
 var str = item.description;
            var newString = str.split("&lt;").join("<").split("&gt;").join(">").split("&quot;`").join("\"").split("&nbsp;").join(" ");
            var description = new XML('<description>'+ newString + '</description>');

            trace("myXML = "+description[0]); 
```

我正在尝试查看如何通过名称访问每个元素。这是第一个描述节点。找出描述xml。

```
<description>
  <div class="field field-name-field-hometown field-type-text field-label-above">
    <div class="field-label">Home Town:</div>
    <div class="field-items">
      <div class="field-item even">Bemidji, Minnesota (up near where they filmed Fargo)</div>
    </div>
  </div>
  <div class="field field-name-field-school field-type-text field-label-above">
    <div class="field-label">School:</div>
    <div class="field-items">
      <div class="field-item even">UCONN Undergrad / Columbia MBA</div>
    </div>
  </div>
  <div class="field field-name-field-lives field-type-text field-label-above">
    <div class="field-label">Currently Live:</div>
    <div class="field-items">
      <div class="field-item even">Milford, CT</div>
    </div>
  </div>
  <div class="field field-name-field-relationship field-type-text field-label-above">
    <div class="field-label">relationship status:</div>
    <div class="field-items">
      <div class="field-item even">Married with two boys</div>
    </div>
  </div>
  <div class="field field-name-field-tidbit field-type-text-long field-label-above">
    <div class="field-label">tidbit:</div>
    <div class="field-items">
      <div class="field-item even">I’m an avid UCONN fan, a Green Bay Packers shareholder and I golf whenever I get the chance.</div>
    </div>
  </div>
  <div class="field field-name-field-favorite-memory field-type-text-long field-label-above">
    <div class="field-label">Favorite Memory:</div>
    <div class="field-items">
      <div class="field-item even">beating Worthington in the Ping Pong Tournament</div>
    </div>
  </div>
</description> 
```

我试图在没有运气的情况下获得现场标签。例子：

description.div.field-label 和字段项的值

任何人都知道如何使用上述 xml 中的名称获取元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:25:06.337

你有没有尝试过

```
var list:XMLList =yourXML.descendents('div').(attribute('class')=='field-label');
for each var (node:XML in list) {
   trace(node.text());
} 
```

?

# asp.net-mvc - 为什么在我的 ASP MVC4 应用程序中重定向资源捆绑？

> ID：11234959
> 
> 赞同：7
> 
> 时间：2012-06-27T21:19:23.260
> 
> 标签：asp.net-mvc, asp.net-mvc-4, resourcebundle, asp.net-optimization

我正在使用 RC，并通过 NuGet 检查了所有内容是否都是最新的。在我的 global.asax.cs 中，我得到了：

```
BundleTable.Bundles.AddDefaultFileExtensionReplacements();
BundleTable.Bundles.AddDefaultIgnorePatterns();
BundleTable.Bundles.AddDefaultFileOrderings();

Bundle scripts = new Bundle("~/Scripts");
scripts.IncludeDirectory("~/Scripts", "*.js");
BundleTable.Bundles.Add(scripts);

Bundle css = new Bundle("~/Content/css");
css.IncludeDirectory("~/Content/css", "*.css", false);
BundleTable.Bundles.Add(css); 
```

我已经尝试了一些不同的配置，但没有任何改进。

然后在我的布局中我得到了：

```
<link href="@BundleTable.Bundles.ResolveBundleUrl("~/Content/css")" rel="stylesheet" type="text/css" />
<script src="@BundleTable.Bundles.ResolveBundleUrl("~/Scripts")"> </script> 
```

当页面加载时，它的 url 看起来不错：

```
<link href="/Content/css?v=QAsFYXHCbnaU70oGVxpgi9py9iKQrT9C4BVNdHa7xoI1" rel="stylesheet" type="text/css" /> 
```

但该网址重定向到：

```
/Content/css/ 
```

这会返回 404 not found 错误...

![捆绑重定向...](../Images/6ace8afe04d92e22c323b762f67cfdc6.png)

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T22:28:21.847

~/Scripts 和 ~/Content/css 虚拟路径已经存在于磁盘上，所以你需要让它们成为一些虚拟 url，比如说 ~/Scripts/js 和 ~/Content/styles 就是这样，现在很好。

```
Bundle scripts = new Bundle("~/Scripts/js");
scripts.IncludeDirectory("~/Scripts", "*.js");
BundleTable.Bundles.Add(scripts);

Bundle css = new Bundle("~/Content/styles");
css.IncludeDirectory("~/Content/css", "*.css", false);
BundleTable.Bundles.Add(css); 
```

同样在 MVC4 中，路由、捆绑和过滤器配置已移至

> ~/App_Start/(RouteConfig, BundleConfig, FilterConfig).cs

所以检查你有那些，如果有，那么在那里写你的配置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-29T23:14:12.207

决定是否处理请求的捆绑模块逻辑不会接管对现有文件或目录的请求。这就是为什么当您的捆绑请求与现有目录（或文件）位于相同的虚拟路径时不起作用的原因。

# php - 如何将数据库中的值附加到锚标记的 href 属性？

> ID：11234960
> 
> 赞同：0
> 
> 时间：2012-06-27T21:19:25.163
> 
> 标签：php, jquery, sql, attributes

我正在使用一个弹出 jquery，它使用 href=#?w=300?h=200 弹出一个静态代码块，但除了大小之外，我还需要从 sql 数据库传递一个变量，href=?pro​​p_id=$ ID 。我试图将它们结合起来，但似乎没有任何效果有人知道吗？

谢谢你

```
$(document).ready(function() {

//When you click on a link with class of poplight and the href starts with a # 
$('a.poplight[href^=#]').click(function() {
    var popID = $(this).attr('rel'); //Get Popup Name
    var popURL = $(this).attr('href'); //Get Popup href to define size

    //Pull Query & Variables from href URL
    var query= popURL.split('?');
    var dim= query[1].split('&');
    var popWidth = dim[0].split('=')[1]; //Gets the first query string value

    //Fade in the Popup and add close button
    $('#' + popID).fadeIn().css({ 'width': Number( popWidth ) }).prepend('<a href="#" class="close"><img src="to_use/close.png" class="btn_close" title="Close Window" alt="Close" /></a>');

    //Define margin for center alignment (vertical   horizontal) - we add 80px to the height/width to accomodate for the padding  and border width defined in the css
    var popMargTop = ($('#' + popID).height() + 80) / 2;
    var popMargLeft = ($('#' + popID).width() + 80) / 2;

    //Apply Margin to Popup
    $('#' + popID).css({
        'margin-top' : -popMargTop,
        'margin-left' : -popMargLeft
    });

    //Fade in Background
    $('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
    $('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer - .css({'filter' : 'alpha(opacity=80)'}) is used to fix the IE Bug on fading transparencies 

    return false;
});

//Close Popups and Fade Layer
$('a.close, #fade').live('click', function() { //When clicking on the close or fade layer...
    $('#fade , .popup_block').fadeOut(function() {
        $('#fade, a.close').remove();  //fade them both out
    });
    return false;
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:13:23.733

更简单的方法是将`data-`属性与[jQuery 的 .data() 方法结合使用](http://api.jquery.com/data/)

HTML

```
 <a href="#" class="poplight" data-propId="123" data-w="300" data-h="200">Text</a> 
```

JS

```
 /* in click handler */
  var data=$(this).data();
  var propId=data.propId;/* same as $(this).data('propId') */
  var popWidth=data.w;
   /* etc..*/ 
```

# events - 谷歌应用脚 本可安装触发器在受保护的电子表格上使用错误的权限

> ID：11234961
> 
> 赞同：1
> 
> 时间：2012-06-27T21:19:27.707
> 
> 标签：events, triggers, google-apps-script, google-sheets, protected

根据谷歌关于容器特定可安装触发器的[文档](https://developers.google.com/apps-script/understanding_triggers#ActionTriggers)，触发器将“作为安装触发器的用户运行，而不是作为触发事件的用户运行”。

这似乎意味着触发器可以更新 Google Docs 中的受保护工作表，因为尽管用户可能无法编辑受保护工作表，但如果触发器是由具有写入权限的用户安装的，则可以。

为了以最简单的方式测试这个想法，我尝试使用一个 onOpen 事件来触发一个脚本，该脚本编辑受保护工作表上单元格的值。这是由可以编辑工作表的用户安装的。尽管如果打开工作表的用户具有写访问权限，则它可以工作，但如果用户没有，则无法更新工作表。

这是由于我对它应该如何工作的误解，还是它是一个错误？谷歌似乎很清楚该脚本以上传脚本的用户的权限运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:29:10.573

这是一个错误。

3 月，我在旧 GAS 论坛上 [张贴][1] 讨论了它。来自 Google 的 Anton Soradoi 通过电子邮件私下回复了我，因为我无法公开分享电子表格。我与他分享了它，并在 4 月 3 日星期二通过电子邮件收到了回复：

“你遇到的问题似乎是一个错误。我们目前正在调查它。一旦我有更多信息，我会尽快回复你。”

我没有提出问题，因为他们已经在处理此案，但从那以后我再也没有听到过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T23:41:12.160

这真有趣。如果您为 onEdit 执行此操作，则必须手动添加一个触发器以运行“On Edit”并调用 onEdit 函数，只要有人编辑某些内容，它就会以您的名义运行，但我认为对于 onOpen，它只会在您是用户打开电子表格，您可以尝试。

# iphone - 不重复刷新 UITableView 单元格

> ID：11234965
> 
> 赞同：0
> 
> 时间：2012-06-27T21:19:47.037
> 
> 标签：iphone, uitableview, refresh

我正在开发一个博客应用程序，其中不同的文章显示在表格视图中。我正在使用以下代码进行刷新：

```
for (NSString *feed in _feeds) {
    NSURL *url = [NSURL URLWithString:feed];
    ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setDelegate:self];
    [_queue addOperation:request];
} 
```

当出现错误并且没有加载任何内容时，这可以正常工作，但如果所有加载都正常并且您只是在寻找新文章，它最终会复制所有内容。这里也是 viewDidLoad 设置：

```
self.allEntries = [NSMutableArray array];
self.queue = [[[NSOperationQueue alloc] init] autorelease];
self.feeds = [NSArray arrayWithObjects:@"http://316apps.com/ipreachersblog/feed/",
              nil]; 
```

关于我可以做些什么来只添加自原始加载以来的新文章有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:02:14.110

如果您想出某种文章的[校验和](http://en.wikipedia.org/wiki/Checksum)怎么办？

然后校验和将作为文章的唯一标识符。

# android - SQLite select * 查询只返回第一列的值

> ID：11234966
> 
> 赞同：0
> 
> 时间：2012-06-27T21:19:47.363
> 
> 标签：android, sqlite

```
public List<User> getAllUsers() {
  List<User> userList = new ArrayList<User>();

  String selectQuery = "SELECT  * FROM " + TABLE_USERS;

  SQLiteDatabase db = this.getWritableDatabase();
  Cursor cursor = db.rawQuery(selectQuery, null);

  if (cursor.moveToFirst()) {
   do {
    User user = new User(cursor.getString(0),cursor.getString(1),cursor.getString(2),cursor.getString(3),cursor.getString(4),cursor.getString(5),cursor.getString(6));

    userList.add(user);
   } while (cursor.moveToNext());
  }

  return userList;
 }

 public void addUser(User user) {
  SQLiteDatabase db = this.getWritableDatabase();

  ContentValues values = new ContentValues();
  values.put(KEY_ID, user._id); // User id
  values.put(KEY_BLUETOOTH_NAME, user._bluetooth_name);
  values.put(KEY_COLOR, user._color);
  values.put(KEY_LAST_LAT, user._last_lat);
  values.put(KEY_LAST_LNG, user._last_lng);
  values.put(KEY_MODEL, user._model);
  values.put(KEY_LAST_SEEN, user._last_seen);

  db.insert(TABLE_USERS, null, values);
  db.close(); 
 } 
```

**用户类属性**

```
public class User {

String _id;
String _bluetooth_name;
String _color;
String _last_seen;
String _model;
String _last_lng;
String _last_lat;

 public User(String id, String bluetooth_name, String color, String last_seen, String model, String last_lng, String last_lat){
      this._id = id;
      this._bluetooth_name = bluetooth_name;
      this._color = color;
      this._last_seen = last_seen;
      this._model = model;
      this._last_lat = last_lat;
      this._last_lng = last_lng;
 }

} 
```

* * *

```
DatabaseHandler dh = new DatabaseHandler(getApplicationContext());

dh.clearTable(); //clear the table

User user = new User("1","2","3","5","6","7","8"); //add dummy user

dh.addUser(user);

List<User> userlist = dh.getAllUsers(); //all users properties are null, except "id" (which is the first prop, value: "1") 
```

可能是一个简单的问题，因为这是我第一次尝试在 android 中使用 SQLite：

我正在尝试获取已添加到用户 SQLite 表中的所有用户。但是我的所有用户只设置了第一个属性“id”。谁能解释一下为什么？

更新：

```
public DatabaseHandler(Context context) {
  super(context, DATABASE_NAME, null, DATABASE_VERSION);
 }

 @Override
 public void onCreate(SQLiteDatabase db) {
  String CREATE_USERS_TABLE = "CREATE TABLE " + TABLE_USERS + "(" +
     KEY_ID + " INTEGER PRIMARY KEY," +
     KEY_BLUETOOTH_NAME + " TEXT," +
     KEY_COLOR + " TEXT," +
     KEY_LAST_LAT + " TEXT," +
     KEY_LAST_LNG + " TEXT," +
     KEY_LAST_SEEN + " TEXT," +
     KEY_MODEL + " TEXT" + ")";

  db.execSQL(CREATE_USERS_TABLE);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T22:22:52.397

我可以想象这样的场景：您正在开发数据库方案，而在某些版本中，表只有`_id`列。您运行应用程序，因此它会创建数据库/表。然后将所有其余列添加到表创建代码中，但由于表已经创建，代码不会再次执行，因此表保持不变。如果这个理论是正确的，那么重新安装应用程序应该可以解决它。

**更新：**

我希望`KEY_ID`是“_id”？如果不是，请修复。SQL for`KEY_ID`也应该是：

```
KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
```

**更新2：**

抱歉，我上面的 UPDATE 部分将 DB id 与您的业务逻辑用户 id 混淆了。所以我建议使用`KEY_UID`（“uid”）作为业务逻辑用户id，使用`KEY_DB_ID`（“_id”）作为数据库id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T22:26:45.903

您应该使用[Cursor.getColumnIndex(String columnName)](http://developer.android.com/reference/android/database/Cursor.html#getColumnIndex%28java.lang.String%29)返回要输入的列的索引`Cursor.getString(long index)`。

确保在查询之后但在遍历结果之前执行此操作，否则效率会很低。

此外，您应该使用[SQLiteDatabase.query(...)](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)而不是原始查询来降低复杂性

*更新*

如果您希望它自动递增而不在列定义中声明 AUTOINCREMENT，则不应为 KEY_ID 列指定值

# javascript - Javascript更改元素的类

> ID：11234971
> 
> 赞同：0
> 
> 时间：2012-06-27T21:20:07.243
> 
> 标签：javascript, jquery, html, dom

这是我现在正在处理的网页中大量削减的源代码。

```
<!--// GRID ENTRY //-->
    <li class="entry" id="sjDDulC8wt">
        <div class="entry_actions">
            <ul class="entry_actions">
                <li class='have_it'>
<a href='javascript: haveItem("name", "id", "none")'  target='_self' title='Have It' class='have_it'>%</a></li>
            </ul>
        </div>
    </li> 
```

在`haveItem()`函数内部，我试图将`<a>`元素的类从“have_it”更改为“have_it selected”以更改元素的外观。id的原因是因为我在页面上有几十个这样的元素。我目前使用的 javascript 是：

```
var targetA = document.getElementbyID(sjDDulC8wt).getElementsbyTitle("Have_it"); 
targetA.removeClass("have_it").addClass("have_it selected"); 
```

当我单击链接时，该`haveItem()`函数运行，但它不会更改类。如何更改我的脚本以便单击链接将更改课程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T21:27:58.247

我假设您正在使用 jQuery，因为您正在使用`removeClass()`and `addClass`。否则，我建议您链接到[jQuery](http://jquery.com/)，以便下面的代码可以正常工作，或者只使用 JavaScript。

```
var targetA = $('#sjDDulC8wt .have_it');
targetA.addClass('selected'); 
```

为了将来参考，以下是您可以改进的代码的一些内容：

1.  `getElementById()`接受要作为字符串检索的元素的 id。基本上，您应该将您的 ID 包含在`'`或`"`
2.  小心放置空格和下划线的位置。它们不是同一件事。您的列表项有标题`Have It`，而您的 JavaScript 有`Have_it`。
3.  资本化问题。`Have_It`不是一回事`Have_it`。当您尝试按 ID 获取元素时，请注意这一点。
4.  一个有空格的类实际上是多个类。`have_it selected`实际上既有`have_it`类又有`selected`类。因此没有必要删除`have_it`然后添加`have_it selected`- 您可以直接添加`selected`类。
5.  该函数`getElementbyTitle()`目前在 JavaScript 中不存在。另外，再次注意大小写。通常，函数中每个单词的首字母大写。因此，如果它确实存在，它将被调用`getElementByTitle()`（注意`B`而不是`b`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:42:09.237

这里：

```
var anchor = document.querySelector( '#sjDDulC8wt [title="Have It"]' );
if ( anchor ) anchor.classList.add( 'selected' ); 
```

**现场演示：http:** [//jsfiddle.net/UZfnh/](http://jsfiddle.net/UZfnh/)

（不适用于旧版浏览器。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:30:33.297

如果您不能使用 jQuery，那么您可以使用以下方法更改元素的类名[`className`](https://developer.mozilla.org/en/DOM/element.className)：

```
var element = document.getElementById("elementId");
element.className = "have_it selected"; 
```

还要注意这个函数：[`getElementsByClassName`](https://developer.mozilla.org/en/DOM/document.getElementsByClassName)（HTML5）。

正如已经指出的那样，您在选择元素时还有一些其他问题。从您的示例中，您似乎想要使用：

```
var element = document.getElementById("sjDDulC8wt");
var children = element.getElementsByClassName("have_it");
children[0].className = "have_it selected"; 
```

请注意，这里**没有错误处理/空检查**。这处理了一个简单的情况，假设它存在，只更改具有指定类的第一个孩子。

但如果你可以使用它，更喜欢 jQuery。从您的使用`addClass/removeClass`看来，您已经期待 jQuery。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T21:33:48.593

这应该为您完成任务：

```
<a title="Have It" class="have_it" onclick="this.className+=' selected'">%</a> 
```

但是，您应该了解[DOM](https://developer.mozilla.org/en/DOM/)。您使用的任何方法（、 和`getElementbyID`）`getElementsbyTitle`都不存在。`removeClass``addClass`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T21:42:45.597

成功找到元素后，您可以执行以下操作之一：

1.  `element.classList.add("selected");`

    它使用了一个相当新[`classList`](https://developer.mozilla.org/en/DOM/element.classList)的功能，可用于 FF 3.6、IE 10、Chrome 8、Opera 11.50、Safari 5.1 及更高版本。一旦您确定您的客户将拥有其中一种浏览器（不久的将来），这是最首选的方式。

2.  `element.className += " selected";`

    [`className`文档](https://developer.mozilla.org/en/DOM/element.className)。这很有效，可能是最简单的方法。没有那么好`classList`，但适用于所有浏览器。

# javascript - JavaScript 中的延迟动画

> ID：11234973
> 
> 赞同：1
> 
> 时间：2012-06-27T21:20:17.737
> 
> 标签：javascript, jquery, animation, delay

我想延迟在 li a 元素中滑动图像的动画。我的想法是，我可以使用计数器 (i) 遍历每个 li 元素，并设置动画的超时时间：1000 + i * 50

不幸的是，只有最后一个 li 元素会被动画化。这是为什么？

```
li = $('nav ul li').get();
lic = li.length;

$('nav ul li a .icon').hide();

t = [];
for (i = 0; i < li.length; i++) {
    var obj = $('nav ul li')[i];

    t[i] = setTimeout(function() {
        $(obj).children('a').children('.icon').slideDown();
    }, 1000 + i * 50);

    delete obj;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:24:38.427

这应该没问题：

## *[jsBin 演示](http://jsbin.com/ikihuw/2/edit)*

```
$('nav ul li a .icon').hide();

$('nav ul li').each(function( i ){       
    $(this).find('.icon').delay(i*300).slideDown();    
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T21:29:38.533

试试这个，这不是一个完整的代码，并且未经测试。请借用这个逻辑..

```
$('nav ul li').each(function {
    $(this).find("a>.icon").hide();
    t[i] = setTimeout(function() {
        $(this).find("a>.icon").slideDown();
    }, 1000 + i * 50);
}); 
```

# ios - 在 iOS 上处理大量像素

> ID：11234978
> 
> 赞同：0
> 
> 时间：2012-06-27T21:20:47.707
> 
> 标签：ios, performance, ios5, opengl-es, opengl-es-2.0

我需要在 iOS 设备的屏幕上移动大量像素。这样做最有效的方法是什么？

到目前为止，我正在使用`glTexSubImage2D()`，但我想知道这是否可以更快地完成。我注意到 OpenGL ES 2.0 不支持像素缓冲区，但 Core Video 似乎使用了像素缓冲区。我可以用那个吗？或者也许有一个 Apple 的 OpenGL 扩展可以帮助我实现类似的东西（我认为在 WWDC 2012 视频之一中看到了关于客户端存储扩展的非常模糊的提及，但我找不到任何关于它的文档）？还有其他方法可以加快速度吗？

我主要关心的是`glTexSubImage2D()`复制我发送的所有像素。理想情况下，我想跳过复制数据的这一步，因为我已经准备好了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T22:19:44.503

您可能想到的客户端存储扩展是`CVOpenGLESTextureCacheCreateTextureFromImage`；完整的教程在[这里](http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/)。这绝对是将数据传输到 GPU 的最快方式。

令人沮丧的是，我在 Apple 的文档中唯一提到它的是[iOS 4.3 到 5.0 API 差异](https://developer.apple.com/library/ios/#releasenotes/General/iOS50APIDiff/)文档——快速搜索`CVOpenGLESTextureCache.h`.

# .htaccess - 了解 .htaccess 文件，并编写重定向

> ID：11234979
> 
> 赞同：0
> 
> 时间：2012-06-27T21:20:49.297
> 
> 标签：.htaccess

好的，所以我必须在客户网站上做一些工作 - 出于某种原因，他们都有 www。子域和正在使用的空子域，具有不同的网站。他们不想要这个。

他们想要 www。仅子域（也就是说，他们希望空子域重定向到 www。）

据说，这就是它在 Wordpress 中的设置方式。

这是我的 .htaccess 文件：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteRule ^(.*)(\.htm|\.html)$ /contact [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress

#php_flag display_errors on
#php_value error_reporting 8191 
```

任何人都可以解释这个吗？（我对 .htaccess 文件不是很熟悉——任何拥有任何资源的人都会有所帮助）。例如，如何让任何访问[http://examplesite.com](http://examplesite.com)的人访问[http://www.examplesite.com](http://www.examplesite.com)。

同一个域上怎么会有两个不同的网站？我正在查看 public_html 文件夹，似乎根本没有对其他站点的引用 - 什么都没有，没有文件，nada。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:44:06.783

要强制使用`www`子域，您可以添加以下代码：

```
RewriteCond %{HTTP_HOST} ^domain\.com$
RewriteRule ^(.*) http://www.domain.com/$1  [QSA,L,R=301] 
```

这是这些行的作用：

1.  检查 HTTP_HOST，它必须是`domain.com`
2.  取当前请求，在后面加上`www.domain.com/`（`$1`代表抓到的请求）
3.  将生成的 url 用作带有`[R=301]`标签的 301 重定向（永久重定向）
4.  如果这条规则被捕获，则不阅读下一条规则，带有`[L]`标签
5.  转发 GET 数据，带`[QSA]`标签。

您必须将此代码放在这两行之后：

```
RewriteEngine On
RewriteBase / 
```

其中设置了重写引擎，并定义了基本 url。

**注意**：重定向不会转发 POST 数据。确保在您的代码中始终使用 www 子域（这可以使用集中式轻松完成`base_url`）。

看看[这里](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)以了解更好的 htaccess 文件。

# microsoft-metro - QUnit 和 Sinon，测试 XHR 请求

> ID：11234991
> 
> 赞同：2
> 
> 时间：2012-06-27T21:21:40.327
> 
> 标签：microsoft-metro, qunit, sinon

我对单元测试比较陌生，我正在尝试找出一种以有意义的方式测试 XHR 请求的方法。

1）请求将各种脚本和其他资源拉入页面，我想确保正在加载正确数量的资源，并且请求成功。

2）我应该对提供资源的服务使用实际请求吗？我在 sinonjs.org 上查看了 fakeserver 和 fakexhr 请求，但我真的不明白它们如何提供有意义的测试。

3）我正在测试现有的代码，我意识到这是毫无意义的，但这是我需要做的。话虽如此，某些方法中有很多代码可能会分解为各种测试。我应该分解现有代码并为我的解释期望创建测试吗？或者只是为实际存在的内容编写测试？....如果这有任何意义。

谢谢，-约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T06:35:07.200

我发现使用 sinon fakeServer 返回各种测试响应来锻炼我的客户端功能很有用。您可以设置一系列测试，其中 fakeServer 响应返回可用于随后检查代码行为的数据。例如，假设您期望返回 10 个资源对象，您可以创建预装的 xml 或 json 来表示这些资源，然后检查您的代码是否已正确处理它们。在另一个测试中，当您只收到九个对象时，您的代码会做什么？

开始编写测试以覆盖现有代码。当这些测试通过时，开始将您的代码分解为更易于理解和有意义的单元。如果测试仍然通过，那就太好了，你只是重构了你的代码，并没有无意中破坏任何东西。此外，现在您可以更轻松地测试和理解更小的代码块。从这一点开始，您将永远不会回头 :-)

# magento - Magento - 目录页面上评论链接（summary_short.phtml）的布局模板位置更改

> ID：11234993
> 
> 赞同：1
> 
> 时间：2012-06-27T21:21:55.190
> 
> 标签：magento, layout, magento-1.5

我制作了一个简单的自定义模块，将评论放在产品页面上（而不是默认链接到新页面）。

产品页面上的所有内容都运行良好。目录页面上的链接不是。这仍然链接到“评论页面”而不是它应该的产品页面。这是因为我似乎无法在我的自定义 xml 布局文件中触发 summary_short.phtml 的布局模板位置更改。

这是我的布局文件内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

<default>
    <reference name="head">
        <action method="addItem"><type>skin_css</type><name>css/reviews.css</name></action>
    </reference>      
</default>

<!-- This works great -->  

<catalog_product_view>              
    <reference name="content">     
        <reference name="product.info">
            ...  
            <action method="addReviewSummaryTemplate"><type>default</type><template>productpagereviews/review/helper/summary.phtml</template></action>
            <action method="addReviewSummaryTemplate"><type>short</type><template>productpagereviews/review/helper/summary_short.phtml</template></action>
        </reference>
    </reference>
</catalog_product_view>

<!-- Below does not work at all -->  

<catalog_category_default>
    <reference name="content">
        <reference name="product_list">
            <action method="addReviewSummaryTemplate"><type>default</type><template>productpagereviews/review/helper/summary.phtml</template></action>
            <action method="addReviewSummaryTemplate"><type>short</type><template>productpagereviews/review/helper/summary_short.phtml</template></action>
        </reference>
    </reference>
</catalog_category_default>
</layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:35:19.340

***我讨厌在我提出问题后***回答我自己的问题——该死！无论如何，我将发布答案，以便其他人知道他们是否有问题。

事实证明我需要一个不同的主手柄。正确的是这个`catalog_category_layered`。我仍然将“默认”标签留在那里，因为我不确定为什么这个标签有效而`catalog_category_default`无效。如果有人能回答，我将不胜感激！

完整的（块）代码如下：

```
<catalog_category_layered>
    <reference name="product_list">
        <action method="addReviewSummaryTemplate"><type>short</type><template>productpagereviews/review/helper/summary_short.phtml</template></action>
    </reference>
</catalog_category_layered> 
```

现在一切都按预期工作！是时候进行更多测试了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:51:45.560

这可能有助于回答您关于为什么一个工作而不是另一个工作的问题：http: [//kb.magenting.com/content/13/60/en/magento-is-anchor-option-in-category-properties.html](http://kb.magenting.com/content/13/60/en/magento-is-anchor-option-in-category-properties.html)

本质上，*catalog_category_layered* 用于启用类别选项“Is Anchor”时。

# javascript - RESTful GET 资源应该如何接受日期时间参数？

> ID：11234994
> 
> 赞同：0
> 
> 时间：2012-06-27T21:21:57.203
> 
> 标签：javascript, python, rest, datetime

> **可能重复：**
> [是否有可以在 URL 上传递的标准日期/时间格式？](https://stackoverflow.com/questions/2344987/is-there-a-standard-date-time-format-that-can-be-passed-on-a-url)

RESTful 资源接受日期时间对象的好方法是什么？具体来说，我不确定在 URL 中将日期和时间表示为查询参数的好方法是什么。

我正在考虑做这样的事情：

```
GET /Calls?start=YYYY-MM-DD_HH:MM:SS 
```

我在客户端使用 Javascript/jQuery，在后端使用 Python，所以理想情况下，它是一种可以很容易地用 Javascript 编写并用 Python 读取的格式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T21:34:59.780

大多数日期时间库（绝对是 Python 和 JS）都遵循相同的格式化方法，即格式化字符串。我会选择只使用数字并使用大小降序排列的任何一个，即 YYYYMMDDhhmmss。

在进入格式之前要考虑的另一件事是您是否可能需要通过更类似于日期范围的方式进行参数化，以及是否包括秒、分钟、小时等可能会过度指定请求并使其难以客户端来定位他们正在寻找的数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T04:15:50.467

使用[ISO 8601 标准](http://en.wikipedia.org/wiki/ISO_8601)将时间参数编码为字符串。它对人类来说是可读的，并得到了多种语言的大量库的支持。

我建议不要使用 Unix 时间。当您的系统管理员被要求抓取或解析您的 Web 服务器日志以进行 API 调用时，他们会感谢您。使用 ISO 8601 将避免他们不得不在该过程中构建第二个步骤，将 Unix 时间数字转换为实际人类必须理解的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T21:32:21.963

Unix 时间... [http://en.wikipedia.org/wiki/Unix_time](http://en.wikipedia.org/wiki/Unix_time)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T21:29:55.243

为什么不只是`YYYYMMDDHHMMSS`？

只要双方都能遵循这种格式，我看不出有什么问题